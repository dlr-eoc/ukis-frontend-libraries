(self.webpackChunkdemo_maps=self.webpackChunkdemo_maps||[]).push([[631],{3694:(jt,ut)=>{ut.read=function(o,V,k,J,$){var U,S,b=8*$-J-1,T=(1<<b)-1,y=T>>1,m=-7,d=k?$-1:0,l=k?-1:1,n=o[V+d];for(d+=l,U=n&(1<<-m)-1,n>>=-m,m+=b;m>0;U=256*U+o[V+d],d+=l,m-=8);for(S=U&(1<<-m)-1,U>>=-m,m+=J;m>0;S=256*S+o[V+d],d+=l,m-=8);if(0===U)U=1-y;else{if(U===T)return S?NaN:1/0*(n?-1:1);S+=Math.pow(2,J),U-=y}return(n?-1:1)*S*Math.pow(2,U-J)},ut.write=function(o,V,k,J,$,U){var S,b,T,y=8*U-$-1,m=(1<<y)-1,d=m>>1,l=23===$?Math.pow(2,-24)-Math.pow(2,-77):0,n=J?0:U-1,h=J?1:-1,s=V<0||0===V&&1/V<0?1:0;for(V=Math.abs(V),isNaN(V)||V===1/0?(b=isNaN(V)?1:0,S=m):(S=Math.floor(Math.log(V)/Math.LN2),V*(T=Math.pow(2,-S))<1&&(S--,T*=2),(V+=S+d>=1?l/T:l*Math.pow(2,1-d))*T>=2&&(S++,T/=2),S+d>=m?(b=0,S=m):S+d>=1?(b=(V*T-1)*Math.pow(2,$),S+=d):(b=V*Math.pow(2,d-1)*Math.pow(2,$),S=0));$>=8;o[k+n]=255&b,n+=h,b/=256,$-=8);for(S=S<<$|b,y+=$;y>0;o[k+n]=255&S,n+=h,S/=256,y-=8);o[k+n-h]|=128*s}},8064:(jt,ut,o)=>{"use strict";jt.exports=k;var V=o(3694);function k(C){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(C)?C:new Uint8Array(C||0),this.pos=0,this.type=0,this.length=this.buf.length}k.Varint=0,k.Fixed64=1,k.Bytes=2,k.Fixed32=5;var J=4294967296,$=1/J,S=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function T(C){return C.type===k.Bytes?C.readVarint()+C.pos:C.pos+1}function n(C,L,A){var P=L<=16383?1:L<=2097151?2:L<=268435455?3:Math.floor(Math.log(L)/(7*Math.LN2));A.realloc(P);for(var R=A.pos-1;R>=C;R--)A.buf[R+P]=A.buf[R]}function h(C,L){for(var A=0;A<C.length;A++)L.writeVarint(C[A])}function s(C,L){for(var A=0;A<C.length;A++)L.writeSVarint(C[A])}function f(C,L){for(var A=0;A<C.length;A++)L.writeFloat(C[A])}function g(C,L){for(var A=0;A<C.length;A++)L.writeDouble(C[A])}function a(C,L){for(var A=0;A<C.length;A++)L.writeBoolean(C[A])}function I(C,L){for(var A=0;A<C.length;A++)L.writeFixed32(C[A])}function p(C,L){for(var A=0;A<C.length;A++)L.writeSFixed32(C[A])}function E(C,L){for(var A=0;A<C.length;A++)L.writeFixed64(C[A])}function F(C,L){for(var A=0;A<C.length;A++)L.writeSFixed64(C[A])}function w(C,L){return(C[L]|C[L+1]<<8|C[L+2]<<16)+16777216*C[L+3]}function K(C,L,A){C[A]=L,C[A+1]=L>>>8,C[A+2]=L>>>16,C[A+3]=L>>>24}function O(C,L){return(C[L]|C[L+1]<<8|C[L+2]<<16)+(C[L+3]<<24)}k.prototype={destroy:function(){this.buf=null},readFields:function(C,L,A){for(A=A||this.length;this.pos<A;){var P=this.readVarint(),R=P>>3,N=this.pos;this.type=7&P,C(R,L,this),this.pos===N&&this.skip(P)}return L},readMessage:function(C,L){return this.readFields(C,L,this.readVarint()+this.pos)},readFixed32:function(){var C=w(this.buf,this.pos);return this.pos+=4,C},readSFixed32:function(){var C=O(this.buf,this.pos);return this.pos+=4,C},readFixed64:function(){var C=w(this.buf,this.pos)+w(this.buf,this.pos+4)*J;return this.pos+=8,C},readSFixed64:function(){var C=w(this.buf,this.pos)+O(this.buf,this.pos+4)*J;return this.pos+=8,C},readFloat:function(){var C=V.read(this.buf,this.pos,!0,23,4);return this.pos+=4,C},readDouble:function(){var C=V.read(this.buf,this.pos,!0,52,8);return this.pos+=8,C},readVarint:function(C){var A,P,L=this.buf;return A=127&(P=L[this.pos++]),P<128||(A|=(127&(P=L[this.pos++]))<<7,P<128)||(A|=(127&(P=L[this.pos++]))<<14,P<128)||(A|=(127&(P=L[this.pos++]))<<21,P<128)?A:function b(C,L,A){var R,N,P=A.buf;if(R=(112&(N=P[A.pos++]))>>4,N<128||(R|=(127&(N=P[A.pos++]))<<3,N<128)||(R|=(127&(N=P[A.pos++]))<<10,N<128)||(R|=(127&(N=P[A.pos++]))<<17,N<128)||(R|=(127&(N=P[A.pos++]))<<24,N<128)||(R|=(1&(N=P[A.pos++]))<<31,N<128))return function y(C,L,A){return A?4294967296*L+(C>>>0):4294967296*(L>>>0)+(C>>>0)}(C,R,L);throw new Error("Expected varint not more than 10 bytes")}(A|=(15&(P=L[this.pos]))<<28,C,this)},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var C=this.readVarint();return C%2==1?(C+1)/-2:C/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var C=this.readVarint()+this.pos,L=this.pos;return this.pos=C,C-L>=12&&S?function B(C,L,A){return S.decode(C.subarray(L,A))}(this.buf,L,C):function M(C,L,A){for(var P="",R=L;R<A;){var H,ot,ht,N=C[R],Q=null,et=N>239?4:N>223?3:N>191?2:1;if(R+et>A)break;1===et?N<128&&(Q=N):2===et?128==(192&(H=C[R+1]))&&(Q=(31&N)<<6|63&H)<=127&&(Q=null):3===et?(ot=C[R+2],128==(192&(H=C[R+1]))&&128==(192&ot)&&((Q=(15&N)<<12|(63&H)<<6|63&ot)<=2047||Q>=55296&&Q<=57343)&&(Q=null)):4===et&&(ot=C[R+2],ht=C[R+3],128==(192&(H=C[R+1]))&&128==(192&ot)&&128==(192&ht)&&((Q=(15&N)<<18|(63&H)<<12|(63&ot)<<6|63&ht)<=65535||Q>=1114112)&&(Q=null)),null===Q?(Q=65533,et=1):Q>65535&&(Q-=65536,P+=String.fromCharCode(Q>>>10&1023|55296),Q=56320|1023&Q),P+=String.fromCharCode(Q),R+=et}return P}(this.buf,L,C)},readBytes:function(){var C=this.readVarint()+this.pos,L=this.buf.subarray(this.pos,C);return this.pos=C,L},readPackedVarint:function(C,L){if(this.type!==k.Bytes)return C.push(this.readVarint(L));var A=T(this);for(C=C||[];this.pos<A;)C.push(this.readVarint(L));return C},readPackedSVarint:function(C){if(this.type!==k.Bytes)return C.push(this.readSVarint());var L=T(this);for(C=C||[];this.pos<L;)C.push(this.readSVarint());return C},readPackedBoolean:function(C){if(this.type!==k.Bytes)return C.push(this.readBoolean());var L=T(this);for(C=C||[];this.pos<L;)C.push(this.readBoolean());return C},readPackedFloat:function(C){if(this.type!==k.Bytes)return C.push(this.readFloat());var L=T(this);for(C=C||[];this.pos<L;)C.push(this.readFloat());return C},readPackedDouble:function(C){if(this.type!==k.Bytes)return C.push(this.readDouble());var L=T(this);for(C=C||[];this.pos<L;)C.push(this.readDouble());return C},readPackedFixed32:function(C){if(this.type!==k.Bytes)return C.push(this.readFixed32());var L=T(this);for(C=C||[];this.pos<L;)C.push(this.readFixed32());return C},readPackedSFixed32:function(C){if(this.type!==k.Bytes)return C.push(this.readSFixed32());var L=T(this);for(C=C||[];this.pos<L;)C.push(this.readSFixed32());return C},readPackedFixed64:function(C){if(this.type!==k.Bytes)return C.push(this.readFixed64());var L=T(this);for(C=C||[];this.pos<L;)C.push(this.readFixed64());return C},readPackedSFixed64:function(C){if(this.type!==k.Bytes)return C.push(this.readSFixed64());var L=T(this);for(C=C||[];this.pos<L;)C.push(this.readSFixed64());return C},skip:function(C){var L=7&C;if(L===k.Varint)for(;this.buf[this.pos++]>127;);else if(L===k.Bytes)this.pos=this.readVarint()+this.pos;else if(L===k.Fixed32)this.pos+=4;else{if(L!==k.Fixed64)throw new Error("Unimplemented type: "+L);this.pos+=8}},writeTag:function(C,L){this.writeVarint(C<<3|L)},realloc:function(C){for(var L=this.length||16;L<this.pos+C;)L*=2;if(L!==this.length){var A=new Uint8Array(L);A.set(this.buf),this.buf=A,this.length=L}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(C){this.realloc(4),K(this.buf,C,this.pos),this.pos+=4},writeSFixed32:function(C){this.realloc(4),K(this.buf,C,this.pos),this.pos+=4},writeFixed64:function(C){this.realloc(8),K(this.buf,-1&C,this.pos),K(this.buf,Math.floor(C*$),this.pos+4),this.pos+=8},writeSFixed64:function(C){this.realloc(8),K(this.buf,-1&C,this.pos),K(this.buf,Math.floor(C*$),this.pos+4),this.pos+=8},writeVarint:function(C){(C=+C||0)>268435455||C<0?function m(C,L){var A,P;if(C>=0?(A=C%4294967296|0,P=C/4294967296|0):(P=~(-C/4294967296),4294967295^(A=~(-C%4294967296))?A=A+1|0:(A=0,P=P+1|0)),C>=0x10000000000000000||C<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");L.realloc(10),function d(C,L,A){A.buf[A.pos++]=127&C|128,C>>>=7,A.buf[A.pos++]=127&C|128,C>>>=7,A.buf[A.pos++]=127&C|128,C>>>=7,A.buf[A.pos++]=127&C|128,A.buf[A.pos]=127&(C>>>=7)}(A,0,L),function l(C,L){var A=(7&C)<<4;L.buf[L.pos++]|=A|((C>>>=3)?128:0),C&&(L.buf[L.pos++]=127&C|((C>>>=7)?128:0),C&&(L.buf[L.pos++]=127&C|((C>>>=7)?128:0),C&&(L.buf[L.pos++]=127&C|((C>>>=7)?128:0),C&&(L.buf[L.pos++]=127&C|((C>>>=7)?128:0),C&&(L.buf[L.pos++]=127&C)))))}(P,L)}(C,this):(this.realloc(4),this.buf[this.pos++]=127&C|(C>127?128:0),!(C<=127)&&(this.buf[this.pos++]=127&(C>>>=7)|(C>127?128:0),!(C<=127)&&(this.buf[this.pos++]=127&(C>>>=7)|(C>127?128:0),!(C<=127)&&(this.buf[this.pos++]=C>>>7&127))))},writeSVarint:function(C){this.writeVarint(C<0?2*-C-1:2*C)},writeBoolean:function(C){this.writeVarint(!!C)},writeString:function(C){C=String(C),this.realloc(4*C.length),this.pos++;var L=this.pos;this.pos=function Y(C,L,A){for(var R,N,P=0;P<L.length;P++){if((R=L.charCodeAt(P))>55295&&R<57344){if(!N){R>56319||P+1===L.length?(C[A++]=239,C[A++]=191,C[A++]=189):N=R;continue}if(R<56320){C[A++]=239,C[A++]=191,C[A++]=189,N=R;continue}R=N-55296<<10|R-56320|65536,N=null}else N&&(C[A++]=239,C[A++]=191,C[A++]=189,N=null);R<128?C[A++]=R:(R<2048?C[A++]=R>>6|192:(R<65536?C[A++]=R>>12|224:(C[A++]=R>>18|240,C[A++]=R>>12&63|128),C[A++]=R>>6&63|128),C[A++]=63&R|128)}return A}(this.buf,C,this.pos);var A=this.pos-L;A>=128&&n(L,A,this),this.pos=L-1,this.writeVarint(A),this.pos+=A},writeFloat:function(C){this.realloc(4),V.write(this.buf,C,this.pos,!0,23,4),this.pos+=4},writeDouble:function(C){this.realloc(8),V.write(this.buf,C,this.pos,!0,52,8),this.pos+=8},writeBytes:function(C){var L=C.length;this.writeVarint(L),this.realloc(L);for(var A=0;A<L;A++)this.buf[this.pos++]=C[A]},writeRawMessage:function(C,L){this.pos++;var A=this.pos;C(L,this);var P=this.pos-A;P>=128&&n(A,P,this),this.pos=A-1,this.writeVarint(P),this.pos+=P},writeMessage:function(C,L,A){this.writeTag(C,k.Bytes),this.writeRawMessage(L,A)},writePackedVarint:function(C,L){L.length&&this.writeMessage(C,h,L)},writePackedSVarint:function(C,L){L.length&&this.writeMessage(C,s,L)},writePackedBoolean:function(C,L){L.length&&this.writeMessage(C,a,L)},writePackedFloat:function(C,L){L.length&&this.writeMessage(C,f,L)},writePackedDouble:function(C,L){L.length&&this.writeMessage(C,g,L)},writePackedFixed32:function(C,L){L.length&&this.writeMessage(C,I,L)},writePackedSFixed32:function(C,L){L.length&&this.writeMessage(C,p,L)},writePackedFixed64:function(C,L){L.length&&this.writeMessage(C,E,L)},writePackedSFixed64:function(C,L){L.length&&this.writeMessage(C,F,L)},writeBytesField:function(C,L){this.writeTag(C,k.Bytes),this.writeBytes(L)},writeFixed32Field:function(C,L){this.writeTag(C,k.Fixed32),this.writeFixed32(L)},writeSFixed32Field:function(C,L){this.writeTag(C,k.Fixed32),this.writeSFixed32(L)},writeFixed64Field:function(C,L){this.writeTag(C,k.Fixed64),this.writeFixed64(L)},writeSFixed64Field:function(C,L){this.writeTag(C,k.Fixed64),this.writeSFixed64(L)},writeVarintField:function(C,L){this.writeTag(C,k.Varint),this.writeVarint(L)},writeSVarintField:function(C,L){this.writeTag(C,k.Varint),this.writeSVarint(L)},writeStringField:function(C,L){this.writeTag(C,k.Bytes),this.writeString(L)},writeFloatField:function(C,L){this.writeTag(C,k.Fixed32),this.writeFloat(L)},writeDoubleField:function(C,L){this.writeTag(C,k.Fixed64),this.writeDouble(L)},writeBooleanField:function(C,L){this.writeVarintField(C,!!L)}}},6706:(jt,ut,o)=>{"use strict";o.d(ut,{Z:()=>c});var k=1,J=2,$=3,S=5,b=6378137,T=6356752.314,y=.0066943799901413165,m=484813681109536e-20,d=Math.PI/2,s=1e-10,f=.017453292519943295,g=57.29577951308232,a=Math.PI/4,I=2*Math.PI,p=3.14159265359,E={greenwich:0,lisbon:-9.131906111111,paris:2.337229166667,bogota:-74.080916666667,madrid:-3.687938888889,rome:12.452333333333,bern:7.439583333333,jakarta:106.807719444444,ferro:-17.666666666667,brussels:4.367975,stockholm:18.058277777778,athens:23.7163375,oslo:10.722916666667};const F={ft:{to_meter:.3048},"us-ft":{to_meter:1200/3937}};var w=/[\s_\-\/\(\)]/g;function K(t,e){if(t[e])return t[e];for(var D,r=Object.keys(t),v=e.toLowerCase().replace(w,""),x=-1;++x<r.length;)if((D=r[x]).toLowerCase().replace(w,"")===v)return t[D]}function O(t){var v,x,D,e={},r=t.split("+").map(function(X){return X.trim()}).filter(function(X){return X}).reduce(function(X,nt){var ct=nt.split("=");return ct.push(!0),X[ct[0].toLowerCase()]=ct[1],X},{}),G={proj:"projName",datum:"datumCode",rf:function(X){e.rf=parseFloat(X)},lat_0:function(X){e.lat0=X*f},lat_1:function(X){e.lat1=X*f},lat_2:function(X){e.lat2=X*f},lat_ts:function(X){e.lat_ts=X*f},lon_0:function(X){e.long0=X*f},lon_1:function(X){e.long1=X*f},lon_2:function(X){e.long2=X*f},alpha:function(X){e.alpha=parseFloat(X)*f},gamma:function(X){e.rectified_grid_angle=parseFloat(X)},lonc:function(X){e.longc=X*f},x_0:function(X){e.x0=parseFloat(X)},y_0:function(X){e.y0=parseFloat(X)},k_0:function(X){e.k0=parseFloat(X)},k:function(X){e.k0=parseFloat(X)},a:function(X){e.a=parseFloat(X)},b:function(X){e.b=parseFloat(X)},r_a:function(){e.R_A=!0},zone:function(X){e.zone=parseInt(X,10)},south:function(){e.utmSouth=!0},towgs84:function(X){e.datum_params=X.split(",").map(function(nt){return parseFloat(nt)})},to_meter:function(X){e.to_meter=parseFloat(X)},units:function(X){e.units=X;var nt=K(F,X);nt&&(e.to_meter=nt.to_meter)},from_greenwich:function(X){e.from_greenwich=X*f},pm:function(X){var nt=K(E,X);e.from_greenwich=(nt||parseFloat(X))*f},nadgrids:function(X){"@null"===X?e.datumCode="none":e.nadgrids=X},axis:function(X){var nt="ewnsud";3===X.length&&-1!==nt.indexOf(X.substr(0,1))&&-1!==nt.indexOf(X.substr(1,1))&&-1!==nt.indexOf(X.substr(2,1))&&(e.axis=X)},approx:function(){e.approx=!0}};for(v in r)x=r[v],v in G?"function"==typeof(D=G[v])?D(x):e[D]=x:e[v]=x;return"string"==typeof e.datumCode&&"WGS84"!==e.datumCode&&(e.datumCode=e.datumCode.toLowerCase()),e}const M=function ht(t){return new ot(t).output()};var B=1,R=/\s/,N=/[A-Za-z]/,Q=/[A-Za-z84_]/,et=/[,\]]/,H=/[\d\.E\-\+]/;function ot(t){if("string"!=typeof t)throw new Error("not a string");this.text=t.trim(),this.level=0,this.place=0,this.root=null,this.stack=[],this.currentObject=null,this.state=B}function mt(t,e,r){Array.isArray(e)&&(r.unshift(e),e=null);var x=r.reduce(function(D,G){return xt(G,D),D},e?{}:t);e&&(t[e]=x)}function xt(t,e){if(Array.isArray(t)){var r=t.shift();if("PARAMETER"===r&&(r=t.shift()),1===t.length)return Array.isArray(t[0])?(e[r]={},void xt(t[0],e[r])):void(e[r]=t[0]);if(t.length)if("TOWGS84"!==r){if("AXIS"===r)return r in e||(e[r]=[]),void e[r].push(t);var v;switch(Array.isArray(r)||(e[r]={}),r){case"UNIT":case"PRIMEM":case"VERT_DATUM":return e[r]={name:t[0].toLowerCase(),convert:t[1]},void(3===t.length&&xt(t[2],e[r]));case"SPHEROID":case"ELLIPSOID":return e[r]={name:t[0],a:t[1],rf:t[2]},void(4===t.length&&xt(t[3],e[r]));case"PROJECTEDCRS":case"PROJCRS":case"GEOGCS":case"GEOCCS":case"PROJCS":case"LOCAL_CS":case"GEODCRS":case"GEODETICCRS":case"GEODETICDATUM":case"EDATUM":case"ENGINEERINGDATUM":case"VERT_CS":case"VERTCRS":case"VERTICALCRS":case"COMPD_CS":case"COMPOUNDCRS":case"ENGINEERINGCRS":case"ENGCRS":case"FITTED_CS":case"LOCAL_DATUM":case"DATUM":return t[0]=["name",t[0]],void mt(e,r,t);default:for(v=-1;++v<t.length;)if(!Array.isArray(t[v]))return xt(t,e[r]);return mt(e,r,t)}}else e[r]=t;else e[r]=!0}else e[t]=!0}ot.prototype.readCharicter=function(){var t=this.text[this.place++];if(4!==this.state)for(;R.test(t);){if(this.place>=this.text.length)return;t=this.text[this.place++]}switch(this.state){case B:return this.neutral(t);case 2:return this.keyword(t);case 4:return this.quoted(t);case 5:return this.afterquote(t);case 3:return this.number(t);case-1:return}},ot.prototype.afterquote=function(t){if('"'===t)return this.word+='"',void(this.state=4);if(et.test(t))return this.word=this.word.trim(),void this.afterItem(t);throw new Error("havn't handled \""+t+'" in afterquote yet, index '+this.place)},ot.prototype.afterItem=function(t){return","===t?(null!==this.word&&this.currentObject.push(this.word),this.word=null,void(this.state=B)):"]"===t?(this.level--,null!==this.word&&(this.currentObject.push(this.word),this.word=null),this.state=B,this.currentObject=this.stack.pop(),void(this.currentObject||(this.state=-1))):void 0},ot.prototype.number=function(t){if(!H.test(t)){if(et.test(t))return this.word=parseFloat(this.word),void this.afterItem(t);throw new Error("havn't handled \""+t+'" in number yet, index '+this.place)}this.word+=t},ot.prototype.quoted=function(t){'"'!==t?this.word+=t:this.state=5},ot.prototype.keyword=function(t){if(Q.test(t))this.word+=t;else{if("["===t){var e=[];return e.push(this.word),this.level++,null===this.root?this.root=e:this.currentObject.push(e),this.stack.push(this.currentObject),this.currentObject=e,void(this.state=B)}if(!et.test(t))throw new Error("havn't handled \""+t+'" in keyword yet, index '+this.place);this.afterItem(t)}},ot.prototype.neutral=function(t){if(N.test(t))return this.word=t,void(this.state=2);if('"'===t)return this.word="",void(this.state=4);if(H.test(t))return this.word=t,void(this.state=3);if(!et.test(t))throw new Error("havn't handled \""+t+'" in neutral yet, index '+this.place);this.afterItem(t)},ot.prototype.output=function(){for(;this.place<this.text.length;)this.readCharicter();if(-1===this.state)return this.root;throw new Error('unable to parse string "'+this.text+'". State is '+this.state)};var Rt=.017453292519943295;function pt(t){return t*Rt}function Ft(t){var e=M(t),r=e.shift(),v=e.shift();e.unshift(["name",v]),e.unshift(["type",r]);var x={};return xt(e,x),function Mt(t){if("GEOGCS"===t.type?t.projName="longlat":"LOCAL_CS"===t.type?(t.projName="identity",t.local=!0):t.projName="object"==typeof t.PROJECTION?Object.keys(t.PROJECTION)[0]:t.PROJECTION,t.AXIS){for(var e="",r=0,v=t.AXIS.length;r<v;++r){var x=[t.AXIS[r][0].toLowerCase(),t.AXIS[r][1].toLowerCase()];-1!==x[0].indexOf("north")||("y"===x[0]||"lat"===x[0])&&"north"===x[1]?e+="n":-1!==x[0].indexOf("south")||("y"===x[0]||"lat"===x[0])&&"south"===x[1]?e+="s":-1!==x[0].indexOf("east")||("x"===x[0]||"lon"===x[0])&&"east"===x[1]?e+="e":(-1!==x[0].indexOf("west")||("x"===x[0]||"lon"===x[0])&&"west"===x[1])&&(e+="w")}2===e.length&&(e+="u"),3===e.length&&(t.axis=e)}t.UNIT&&(t.units=t.UNIT.name.toLowerCase(),"metre"===t.units&&(t.units="meter"),t.UNIT.convert&&("GEOGCS"===t.type?t.DATUM&&t.DATUM.SPHEROID&&(t.to_meter=t.UNIT.convert*t.DATUM.SPHEROID.a):t.to_meter=t.UNIT.convert));var D=t.GEOGCS;function G(ct){return ct*(t.to_meter||1)}"GEOGCS"===t.type&&(D=t),D&&(t.datumCode=D.DATUM?D.DATUM.name.toLowerCase():D.name.toLowerCase(),"d_"===t.datumCode.slice(0,2)&&(t.datumCode=t.datumCode.slice(2)),("new_zealand_geodetic_datum_1949"===t.datumCode||"new_zealand_1949"===t.datumCode)&&(t.datumCode="nzgd49"),("wgs_1984"===t.datumCode||"world_geodetic_system_1984"===t.datumCode)&&("Mercator_Auxiliary_Sphere"===t.PROJECTION&&(t.sphere=!0),t.datumCode="wgs84"),"_ferro"===t.datumCode.slice(-6)&&(t.datumCode=t.datumCode.slice(0,-6)),"_jakarta"===t.datumCode.slice(-8)&&(t.datumCode=t.datumCode.slice(0,-8)),~t.datumCode.indexOf("belge")&&(t.datumCode="rnb72"),D.DATUM&&D.DATUM.SPHEROID&&(t.ellps=D.DATUM.SPHEROID.name.replace("_19","").replace(/[Cc]larke\_18/,"clrk"),"international"===t.ellps.toLowerCase().slice(0,13)&&(t.ellps="intl"),t.a=D.DATUM.SPHEROID.a,t.rf=parseFloat(D.DATUM.SPHEROID.rf,10)),D.DATUM&&D.DATUM.TOWGS84&&(t.datum_params=D.DATUM.TOWGS84),~t.datumCode.indexOf("osgb_1936")&&(t.datumCode="osgb36"),~t.datumCode.indexOf("osni_1952")&&(t.datumCode="osni52"),(~t.datumCode.indexOf("tm65")||~t.datumCode.indexOf("geodetic_datum_of_1965"))&&(t.datumCode="ire65"),"ch1903+"===t.datumCode&&(t.datumCode="ch1903"),~t.datumCode.indexOf("israel")&&(t.datumCode="isr93")),t.b&&!isFinite(t.b)&&(t.b=t.a),[["standard_parallel_1","Standard_Parallel_1"],["standard_parallel_1","Latitude of 1st standard parallel"],["standard_parallel_2","Standard_Parallel_2"],["standard_parallel_2","Latitude of 2nd standard parallel"],["false_easting","False_Easting"],["false_easting","False easting"],["false-easting","Easting at false origin"],["false_northing","False_Northing"],["false_northing","False northing"],["false_northing","Northing at false origin"],["central_meridian","Central_Meridian"],["central_meridian","Longitude of natural origin"],["central_meridian","Longitude of false origin"],["latitude_of_origin","Latitude_Of_Origin"],["latitude_of_origin","Central_Parallel"],["latitude_of_origin","Latitude of natural origin"],["latitude_of_origin","Latitude of false origin"],["scale_factor","Scale_Factor"],["k0","scale_factor"],["latitude_of_center","Latitude_Of_Center"],["latitude_of_center","Latitude_of_center"],["lat0","latitude_of_center",pt],["longitude_of_center","Longitude_Of_Center"],["longitude_of_center","Longitude_of_center"],["longc","longitude_of_center",pt],["x0","false_easting",G],["y0","false_northing",G],["long0","central_meridian",pt],["lat0","latitude_of_origin",pt],["lat0","standard_parallel_1",pt],["lat1","standard_parallel_1",pt],["lat2","standard_parallel_2",pt],["azimuth","Azimuth"],["alpha","azimuth",pt],["srsCode","name"]].forEach(function(ct){return function at(t,e){var r=e[0],v=e[1];!(r in t)&&v in t&&(t[r]=t[v],3===e.length&&(t[r]=e[2](t[r])))}(t,ct)}),!t.long0&&t.longc&&("Albers_Conic_Equal_Area"===t.projName||"Lambert_Azimuthal_Equal_Area"===t.projName)&&(t.long0=t.longc),t.lat_ts||!t.lat1||"Stereographic_South_Pole"!==t.projName&&"Polar Stereographic (variant B)"!==t.projName?!t.lat_ts&&t.lat0&&"Polar_Stereographic"===t.projName&&(t.lat_ts=t.lat0,t.lat0=pt(t.lat0>0?90:-90)):(t.lat0=pt(t.lat1>0?90:-90),t.lat_ts=t.lat1)}(x),x}function Dt(t){var e=this;if(2===arguments.length){var r=arguments[1];Dt[t]="string"==typeof r?"+"===r.charAt(0)?O(arguments[1]):Ft(arguments[1]):r}else if(1===arguments.length){if(Array.isArray(t))return t.map(function(v){Array.isArray(v)?Dt.apply(e,v):Dt(v)});if("string"==typeof t){if(t in Dt)return Dt[t]}else"EPSG"in t?Dt["EPSG:"+t.EPSG]=t:"ESRI"in t?Dt["ESRI:"+t.ESRI]=t:"IAU2000"in t?Dt["IAU2000:"+t.IAU2000]=t:console.log(t);return}}!function V(t){t("EPSG:4326","+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees"),t("EPSG:4269","+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees"),t("EPSG:3857","+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs"),t.WGS84=t["EPSG:4326"],t["EPSG:3785"]=t["EPSG:3857"],t.GOOGLE=t["EPSG:3857"],t["EPSG:900913"]=t["EPSG:3857"],t["EPSG:102113"]=t["EPSG:3857"]}(Dt);const Wt=Dt;var rt=["PROJECTEDCRS","PROJCRS","GEOGCS","GEOCCS","PROJCS","LOCAL_CS","GEODCRS","GEODETICCRS","GEODETICDATUM","ENGCRS","ENGINEERINGCRS"],bt=["3857","900913","3785","102113"];function ft(t,e){var r,v;if(t=t||{},!e)return t;for(v in e)void 0!==(r=e[v])&&(t[v]=r);return t}function St(t,e,r){var v=t*e;return r/Math.sqrt(1-v*v)}function kt(t){return t<0?-1:1}function Lt(t){return Math.abs(t)<=p?t:t-kt(t)*I}function te(t,e,r){var v=t*r;return v=Math.pow((1-v)/(1+v),.5*t),Math.tan(.5*(d-e))/v}function Yt(t,e){for(var v,x,r=.5*t,D=d-2*Math.atan(e),G=0;G<=15;G++)if(v=t*Math.sin(D),D+=x=d-2*Math.atan(e*Math.pow((1-v)/(1+v),r))-D,Math.abs(x)<=1e-10)return D;return-9999}function W(t){return t}var dt=[{init:function Et(){var t=this.b/this.a;this.es=1-t*t,"x0"in this||(this.x0=0),"y0"in this||(this.y0=0),this.e=Math.sqrt(this.es),this.lat_ts?this.k0=this.sphere?Math.cos(this.lat_ts):St(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)):this.k0||(this.k0=this.k?this.k:1)},forward:function wt(t){var v,x,e=t.x,r=t.y;if(r*g>90&&r*g<-90&&e*g>180&&e*g<-180)return null;if(Math.abs(Math.abs(r)-d)<=s)return null;if(this.sphere)v=this.x0+this.a*this.k0*Lt(e-this.long0),x=this.y0+this.a*this.k0*Math.log(Math.tan(a+.5*r));else{var D=Math.sin(r),G=te(this.e,r,D);v=this.x0+this.a*this.k0*Lt(e-this.long0),x=this.y0-this.a*this.k0*Math.log(G)}return t.x=v,t.y=x,t},inverse:function it(t){var v,x,e=t.x-this.x0,r=t.y-this.y0;if(this.sphere)x=d-2*Math.atan(Math.exp(-r/(this.a*this.k0)));else{var D=Math.exp(-r/(this.a*this.k0));if(-9999===(x=Yt(this.e,D)))return null}return v=Lt(this.long0+e/(this.a*this.k0)),t.x=v,t.y=x,t},names:["Mercator","Popular Visualisation Pseudo Mercator","Mercator_1SP","Mercator_Auxiliary_Sphere","merc"]},{init:function Z(){},forward:W,inverse:W,names:["longlat","identity"]}],Ot={},Ct=[];function Gt(t,e){var r=Ct.length;return t.names?(Ct[r]=t,t.names.forEach(function(v){Ot[v.toLowerCase()]=r}),this):(console.log(e),!0)}const oe={start:function ne(){dt.forEach(Gt)},add:Gt,get:function qt(t){if(!t)return!1;var e=t.toLowerCase();return typeof Ot[e]<"u"&&Ct[Ot[e]]?Ct[Ot[e]]:void 0}};var Qt={MERIT:{a:6378137,rf:298.257,ellipseName:"MERIT 1983"},SGS85:{a:6378136,rf:298.257,ellipseName:"Soviet Geodetic System 85"},GRS80:{a:6378137,rf:298.257222101,ellipseName:"GRS 1980(IUGG, 1980)"},IAU76:{a:6378140,rf:298.257,ellipseName:"IAU 1976"},airy:{a:6377563.396,b:6356256.91,ellipseName:"Airy 1830"},APL4:{a:6378137,rf:298.25,ellipseName:"Appl. Physics. 1965"},NWL9D:{a:6378145,rf:298.25,ellipseName:"Naval Weapons Lab., 1965"},mod_airy:{a:6377340.189,b:6356034.446,ellipseName:"Modified Airy"},andrae:{a:6377104.43,rf:300,ellipseName:"Andrae 1876 (Den., Iclnd.)"},aust_SA:{a:6378160,rf:298.25,ellipseName:"Australian Natl & S. Amer. 1969"},GRS67:{a:6378160,rf:298.247167427,ellipseName:"GRS 67(IUGG 1967)"},bessel:{a:6377397.155,rf:299.1528128,ellipseName:"Bessel 1841"},bess_nam:{a:6377483.865,rf:299.1528128,ellipseName:"Bessel 1841 (Namibia)"},clrk66:{a:6378206.4,b:6356583.8,ellipseName:"Clarke 1866"},clrk80:{a:6378249.145,rf:293.4663,ellipseName:"Clarke 1880 mod."},clrk80ign:{a:6378249.2,b:6356515,rf:293.4660213,ellipseName:"Clarke 1880 (IGN)"},clrk58:{a:6378293.645208759,rf:294.2606763692654,ellipseName:"Clarke 1858"},CPM:{a:6375738.7,rf:334.29,ellipseName:"Comm. des Poids et Mesures 1799"},delmbr:{a:6376428,rf:311.5,ellipseName:"Delambre 1810 (Belgium)"},engelis:{a:6378136.05,rf:298.2566,ellipseName:"Engelis 1985"},evrst30:{a:6377276.345,rf:300.8017,ellipseName:"Everest 1830"},evrst48:{a:6377304.063,rf:300.8017,ellipseName:"Everest 1948"},evrst56:{a:6377301.243,rf:300.8017,ellipseName:"Everest 1956"},evrst69:{a:6377295.664,rf:300.8017,ellipseName:"Everest 1969"},evrstSS:{a:6377298.556,rf:300.8017,ellipseName:"Everest (Sabah & Sarawak)"},fschr60:{a:6378166,rf:298.3,ellipseName:"Fischer (Mercury Datum) 1960"},fschr60m:{a:6378155,rf:298.3,ellipseName:"Fischer 1960"},fschr68:{a:6378150,rf:298.3,ellipseName:"Fischer 1968"},helmert:{a:6378200,rf:298.3,ellipseName:"Helmert 1906"},hough:{a:6378270,rf:297,ellipseName:"Hough"},intl:{a:6378388,rf:297,ellipseName:"International 1909 (Hayford)"},kaula:{a:6378163,rf:298.24,ellipseName:"Kaula 1961"},lerch:{a:6378139,rf:298.257,ellipseName:"Lerch 1979"},mprts:{a:6397300,rf:191,ellipseName:"Maupertius 1738"},new_intl:{a:6378157.5,b:6356772.2,ellipseName:"New International 1967"},plessis:{a:6376523,rf:6355863,ellipseName:"Plessis 1817 (France)"},krass:{a:6378245,rf:298.3,ellipseName:"Krassovsky, 1942"},SEasia:{a:6378155,b:6356773.3205,ellipseName:"Southeast Asia"},walbeck:{a:6376896,b:6355834.8467,ellipseName:"Walbeck"},WGS60:{a:6378165,rf:298.3,ellipseName:"WGS 60"},WGS66:{a:6378145,rf:298.25,ellipseName:"WGS 66"},WGS7:{a:6378135,rf:298.26,ellipseName:"WGS 72"}},ge=Qt.WGS84={a:6378137,rf:298.257223563,ellipseName:"WGS 84"};Qt.sphere={a:6370997,b:6370997,ellipseName:"Normal Sphere (r=6370997)"};var De={wgs84:{towgs84:"0,0,0",ellipse:"WGS84",datumName:"WGS84"},ch1903:{towgs84:"674.374,15.056,405.346",ellipse:"bessel",datumName:"swiss"},ggrs87:{towgs84:"-199.87,74.79,246.62",ellipse:"GRS80",datumName:"Greek_Geodetic_Reference_System_1987"},nad83:{towgs84:"0,0,0",ellipse:"GRS80",datumName:"North_American_Datum_1983"},nad27:{nadgrids:"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat",ellipse:"clrk66",datumName:"North_American_Datum_1927"},potsdam:{towgs84:"598.1,73.7,418.2,0.202,0.045,-2.455,6.7",ellipse:"bessel",datumName:"Potsdam Rauenberg 1950 DHDN"},carthage:{towgs84:"-263.0,6.0,431.0",ellipse:"clark80",datumName:"Carthage 1934 Tunisia"},hermannskogel:{towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Hermannskogel"},osni52:{towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"airy",datumName:"Irish National"},ire65:{towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"mod_airy",datumName:"Ireland 1965"},rassadiran:{towgs84:"-133.63,-157.5,-158.62",ellipse:"intl",datumName:"Rassadiran"},nzgd49:{towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993",ellipse:"intl",datumName:"New Zealand Geodetic Datum 1949"},osgb36:{towgs84:"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894",ellipse:"airy",datumName:"Airy 1830"},s_jtsk:{towgs84:"589,76,480",ellipse:"bessel",datumName:"S-JTSK (Ferro)"},beduaram:{towgs84:"-106,-87,188",ellipse:"clrk80",datumName:"Beduaram"},gunung_segara:{towgs84:"-403,684,41",ellipse:"bessel",datumName:"Gunung Segara Jakarta"},rnb72:{towgs84:"106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1",ellipse:"intl",datumName:"Reseau National Belge 1972"}};var Ye={};function q(t){if(0===t.length)return null;var e="@"===t[0];return e&&(t=t.slice(1)),"null"===t?{name:"null",mandatory:!e,grid:null,isNull:!0}:{name:t,mandatory:!e,grid:Ye[t]||null,isNull:!1}}function tt(t){return t/3600*Math.PI/180}function At(t,e,r){return String.fromCharCode.apply(null,new Uint8Array(t.buffer.slice(e,r)))}function re(t){return t.map(function(e){return[tt(e.longitudeShift),tt(e.latitudeShift)]})}function ae(t,e,r){return{name:At(t,e+8,e+16).trim(),parent:At(t,e+24,e+24+8).trim(),lowerLatitude:t.getFloat64(e+72,r),upperLatitude:t.getFloat64(e+88,r),lowerLongitude:t.getFloat64(e+104,r),upperLongitude:t.getFloat64(e+120,r),latitudeInterval:t.getFloat64(e+136,r),longitudeInterval:t.getFloat64(e+152,r),gridNodeCount:t.getInt32(e+168,r)}}function ye(t,e,r,v){for(var x=e+176,G=[],X=0;X<r.gridNodeCount;X++){var nt={latitudeShift:t.getFloat32(x+16*X,v),longitudeShift:t.getFloat32(x+16*X+4,v),latitudeAccuracy:t.getFloat32(x+16*X+8,v),longitudeAccuracy:t.getFloat32(x+16*X+12,v)};G.push(nt)}return G}function Te(t,e){if(!(this instanceof Te))return new Te(t);e=e||function(ct){if(ct)throw ct};var r=function le(t){if(!function Ut(t){return"string"==typeof t}(t))return t;if(function zt(t){return t in Wt}(t))return Wt[t];if(function It(t){return rt.some(function(e){return t.indexOf(e)>-1})}(t)){var e=Ft(t);if(function Xt(t){var e=K(t,"authority");if(e){var r=K(e,"epsg");return r&&bt.indexOf(r)>-1}}(e))return Wt["EPSG:3857"];var r=function Vt(t){var e=K(t,"extension");if(e)return K(e,"proj4")}(e);return r?O(r):e}return function he(t){return"+"===t[0]}(t)?O(t):void 0}(t);if("object"==typeof r){var v=Te.projections.get(r.projName);if(v){if(r.datumCode&&"none"!==r.datumCode){var x=K(De,r.datumCode);x&&(r.datum_params=r.datum_params||(x.towgs84?x.towgs84.split(","):null),r.ellps=x.ellipse,r.datumName=x.datumName?x.datumName:r.datumCode)}r.k0=r.k0||1,r.axis=r.axis||"enu",r.ellps=r.ellps||"wgs84",r.lat1=r.lat1||r.lat0;var D=function Ie(t,e,r,v,x){if(!t){var D=K(Qt,v);D||(D=ge),t=D.a,e=D.b,r=D.rf}return r&&!e&&(e=(1-1/r)*t),(0===r||Math.abs(t-e)<s)&&(x=!0,e=t),{a:t,b:e,rf:r,sphere:x}}(r.a,r.b,r.rf,r.ellps,r.sphere),G=function we(t,e,r,v){var x=t*t,D=e*e,G=(x-D)/x,X=0;return v?(x=(t*=1-G*(.16666666666666666+G*(.04722222222222222+.022156084656084655*G)))*t,G=0):X=Math.sqrt(G),{es:G,e:X,ep2:(x-D)/D}}(D.a,D.b,0,r.R_A),X=function Ce(t){return void 0===t?null:t.split(",").map(q)}(r.nadgrids),nt=r.datum||function je(t,e,r,v,x,D,G){var X={};return X.datum_type=void 0===t||"none"===t?S:4,e&&(X.datum_params=e.map(parseFloat),(0!==X.datum_params[0]||0!==X.datum_params[1]||0!==X.datum_params[2])&&(X.datum_type=k),X.datum_params.length>3&&(0!==X.datum_params[3]||0!==X.datum_params[4]||0!==X.datum_params[5]||0!==X.datum_params[6])&&(X.datum_type=J,X.datum_params[3]*=m,X.datum_params[4]*=m,X.datum_params[5]*=m,X.datum_params[6]=X.datum_params[6]/1e6+1)),G&&(X.datum_type=$,X.grids=G),X.a=r,X.b=v,X.es=x,X.ep2=D,X}(r.datumCode,r.datum_params,D.a,D.b,G.es,G.ep2,X);ft(this,r),ft(this,v),this.a=D.a,this.b=D.b,this.rf=D.rf,this.sphere=D.sphere,this.es=G.es,this.e=G.e,this.ep2=G.ep2,this.datum=nt,this.init(),e(null,this)}else e(t)}else e(t)}(Te.projections=oe).start();const Oe=Te;function Ue(t,e,r){var G,X,ct,v=t.x,x=t.y,D=t.z?t.z:0;if(x<-d&&x>-1.001*d)x=-d;else if(x>d&&x<1.001*d)x=d;else{if(x<-d)return{x:-1/0,y:-1/0,z:t.z};if(x>d)return{x:1/0,y:1/0,z:t.z}}return v>Math.PI&&(v-=2*Math.PI),X=Math.sin(x),ct=Math.cos(x),{x:((G=r/Math.sqrt(1-e*(X*X)))+D)*ct*Math.cos(v),y:(G+D)*ct*Math.sin(v),z:(G*(1-e)+D)*X}}function ti(t,e,r,v){var X,nt,ct,Tt,Pt,Bt,Zt,ee,se,ue,de,fe,Pe,ze,pe,_e=t.x,Ee=t.y,be=t.z?t.z:0;if(X=Math.sqrt(_e*_e+Ee*Ee),nt=Math.sqrt(_e*_e+Ee*Ee+be*be),X/r<1e-12){if(ze=0,nt/r<1e-12)return pe=-v,{x:t.x,y:t.y,z:t.z}}else ze=Math.atan2(Ee,_e);ct=be/nt,ee=(Tt=X/nt)*(1-e)*(Pt=1/Math.sqrt(1-e*(2-e)*Tt*Tt)),se=ct*Pt,Pe=0;do{Pe++,Bt=e*(Zt=r/Math.sqrt(1-e*se*se))/(Zt+(pe=X*ee+be*se-Zt*(1-e*se*se))),fe=(de=ct*(Pt=1/Math.sqrt(1-Bt*(2-Bt)*Tt*Tt)))*ee-(ue=Tt*(1-Bt)*Pt)*se,ee=ue,se=de}while(fe*fe>1e-24&&Pe<30);return{x:ze,y:Math.atan(de/Math.abs(ue)),z:pe}}function an(t){return t===k||t===J}function ki(t,e,r){if(null===t.grids||0===t.grids.length)return console.log("Grid shift grids not found"),-1;var v={x:-r.x,y:r.y},x={x:Number.NaN,y:Number.NaN},G=[];t:for(var X=0;X<t.grids.length;X++){var nt=t.grids[X];if(G.push(nt.name),nt.isNull){x=v;break}if(null!==nt.grid)for(var ct=nt.grid.subgrids,Tt=0,Pt=ct.length;Tt<Pt;Tt++){var Bt=ct[Tt],Zt=(Math.abs(Bt.del[1])+Math.abs(Bt.del[0]))/1e4;if(!(Bt.ll[1]-Zt>v.y||Bt.ll[0]-Zt>v.x||Bt.ll[1]+(Bt.lim[1]-1)*Bt.del[1]+Zt<v.y||Bt.ll[0]+(Bt.lim[0]-1)*Bt.del[0]+Zt<v.x||(x=Oi(v,e,Bt),isNaN(x.x))))break t}else if(nt.mandatory)return console.log("Unable to find mandatory grid '"+nt.name+"'"),-1}return isNaN(x.x)?(console.log("Failed to find a grid shift table for location '"+-v.x*g+" "+v.y*g+" tried: '"+G+"'"),-1):(r.x=-x.x,r.y=x.y,0)}function Oi(t,e,r){var v={x:Number.NaN,y:Number.NaN};if(isNaN(t.x))return v;var x={x:t.x,y:t.y};x.x-=r.ll[0],x.y-=r.ll[1],x.x=Lt(x.x-Math.PI)+Math.PI;var D=Hi(x,r);if(e){if(isNaN(D.x))return v;D.x=x.x-D.x,D.y=x.y-D.y;var nt,ct,G=9;do{if(ct=Hi(D,r),isNaN(ct.x)){console.log("Inverse grid shift iteration failed, presumably at grid edge.  Using first approximation.");break}D.x+=(nt={x:x.x-(ct.x+D.x),y:x.y-(ct.y+D.y)}).x,D.y+=nt.y}while(G--&&Math.abs(nt.x)>1e-12&&Math.abs(nt.y)>1e-12);if(G<0)return console.log("Inverse grid shift iterator failed to converge."),v;v.x=Lt(D.x+r.ll[0]),v.y=D.y+r.ll[1]}else isNaN(D.x)||(v.x=t.x+D.x,v.y=t.y+D.y);return v}function Hi(t,e){var G,r={x:t.x/e.del[0],y:t.y/e.del[1]},v_x=Math.floor(r.x),v_y=Math.floor(r.y),x_x=r.x-1*v_x,x_y=r.y-1*v_y,D={x:Number.NaN,y:Number.NaN};if(v_x<0||v_x>=e.lim[0]||v_y<0||v_y>=e.lim[1])return D;var X_x=e.cvs[G=v_y*e.lim[0]+v_x][0],X_y=e.cvs[G][1];G++;var nt_x=e.cvs[G][0],nt_y=e.cvs[G][1],ct_x=e.cvs[G+=e.lim[0]][0],ct_y=e.cvs[G][1];G--;var Tt_y=e.cvs[G][1],Pt=x_x*x_y,Bt=x_x*(1-x_y),Zt=(1-x_x)*(1-x_y),ee=(1-x_x)*x_y;return D.x=Zt*X_x+Bt*nt_x+ee*e.cvs[G][0]+Pt*ct_x,D.y=Zt*X_y+Bt*nt_y+ee*Tt_y+Pt*ct_y,D}function Bi(t,e,r){var G,X,nt,v=r.x,x=r.y,D=r.z||0,ct={};for(nt=0;nt<3;nt++)if(!e||2!==nt||void 0!==r.z)switch(0===nt?(G=v,X=-1!=="ew".indexOf(t.axis[nt])?"x":"y"):1===nt?(G=x,X=-1!=="ns".indexOf(t.axis[nt])?"y":"x"):(G=D,X="z"),t.axis[nt]){case"e":case"n":ct[X]=G;break;case"w":case"s":ct[X]=-G;break;case"u":void 0!==r[X]&&(ct.z=G);break;case"d":void 0!==r[X]&&(ct.z=-G);break;default:return null}return ct}function Ji(t){var e={x:t[0],y:t[1]};return t.length>2&&(e.z=t[2]),t.length>3&&(e.m=t[3]),e}function Si(t){if("function"==typeof Number.isFinite){if(Number.isFinite(t))return;throw new TypeError("coordinates must be finite numbers")}if("number"!=typeof t||t!=t||!isFinite(t))throw new TypeError("coordinates must be finite numbers")}function _i(t,e,r,v){var x,D=void 0!==(r=Array.isArray(r)?Ji(r):{x:r.x,y:r.y,z:r.z,m:r.m}).z;if(function ei(t){Si(t.x),Si(t.y)}(r),t.datum&&e.datum&&function Mi(t,e){return(t.datum.datum_type===k||t.datum.datum_type===J||t.datum.datum_type===$)&&"WGS84"!==e.datumCode||(e.datum.datum_type===k||e.datum.datum_type===J||e.datum.datum_type===$)&&"WGS84"!==t.datumCode}(t,e)&&(r=_i(t,x=new Oe("WGS84"),r,v),t=x),v&&"enu"!==t.axis&&(r=Bi(t,!1,r)),"longlat"===t.projName)r={x:r.x*f,y:r.y*f,z:r.z||0};else if(t.to_meter&&(r={x:r.x*t.to_meter,y:r.y*t.to_meter,z:r.z||0}),!(r=t.inverse(r)))return;if(t.from_greenwich&&(r.x+=t.from_greenwich),r=function xn(t,e,r){if(function Fe(t,e){return!(t.datum_type!==e.datum_type||t.a!==e.a||Math.abs(t.es-e.es)>5e-11)&&(t.datum_type===k?t.datum_params[0]===e.datum_params[0]&&t.datum_params[1]===e.datum_params[1]&&t.datum_params[2]===e.datum_params[2]:t.datum_type!==J||t.datum_params[0]===e.datum_params[0]&&t.datum_params[1]===e.datum_params[1]&&t.datum_params[2]===e.datum_params[2]&&t.datum_params[3]===e.datum_params[3]&&t.datum_params[4]===e.datum_params[4]&&t.datum_params[5]===e.datum_params[5]&&t.datum_params[6]===e.datum_params[6])}(t,e)||t.datum_type===S||e.datum_type===S)return r;var v=t.a,x=t.es;if(t.datum_type===$){if(0!==ki(t,!1,r))return;v=b,x=y}var G=e.a,X=e.b,nt=e.es;return e.datum_type===$&&(G=b,X=T,nt=y),x!==nt||v!==G||an(t.datum_type)||an(e.datum_type)?(r=Ue(r,x,v),an(t.datum_type)&&(r=function fi(t,e,r){if(e===k)return{x:t.x+r[0],y:t.y+r[1],z:t.z+r[2]};if(e===J){var G=r[3],X=r[4],nt=r[5],ct=r[6];return{x:ct*(t.x-nt*t.y+X*t.z)+r[0],y:ct*(nt*t.x+t.y-G*t.z)+r[1],z:ct*(-X*t.x+G*t.y+t.z)+r[2]}}}(r,t.datum_type,t.datum_params)),an(e.datum_type)&&(r=function xi(t,e,r){if(e===k)return{x:t.x-r[0],y:t.y-r[1],z:t.z-r[2]};if(e===J){var G=r[3],X=r[4],nt=r[5],ct=r[6],Tt=(t.x-r[0])/ct,Pt=(t.y-r[1])/ct,Bt=(t.z-r[2])/ct;return{x:Tt+nt*Pt-X*Bt,y:-nt*Tt+Pt+G*Bt,z:X*Tt-G*Pt+Bt}}}(r,e.datum_type,e.datum_params)),r=ti(r,nt,G,X),e.datum_type!==$||0===ki(e,!0,r)?r:void 0):r}(t.datum,e.datum,r))return e.from_greenwich&&(r={x:r.x-e.from_greenwich,y:r.y,z:r.z||0}),"longlat"===e.projName?r={x:r.x*g,y:r.y*g,z:r.z||0}:(r=e.forward(r),e.to_meter&&(r={x:r.x/e.to_meter,y:r.y/e.to_meter,z:r.z||0})),v&&"enu"!==e.axis?Bi(e,!0,r):(r&&!D&&delete r.z,r)}var li=Oe("WGS84");function Ti(t,e,r,v){var x,D,G;return Array.isArray(r)?(x=_i(t,e,r,v)||{x:NaN,y:NaN},r.length>2?typeof t.name<"u"&&"geocent"===t.name||typeof e.name<"u"&&"geocent"===e.name?"number"==typeof x.z?[x.x,x.y,x.z].concat(r.splice(3)):[x.x,x.y,r[2]].concat(r.splice(3)):[x.x,x.y].concat(r.splice(2)):[x.x,x.y]):(D=_i(t,e,r,v),2===(G=Object.keys(r)).length||G.forEach(function(X){if(typeof t.name<"u"&&"geocent"===t.name||typeof e.name<"u"&&"geocent"===e.name){if("x"===X||"y"===X||"z"===X)return}else if("x"===X||"y"===X)return;D[X]=r[X]}),D)}function Ai(t){return t instanceof Oe?t:t.oProj?t.oProj:Oe(t)}const Be=function Je(t,e,r){t=Ai(t);var x,v=!1;return typeof e>"u"?(e=t,t=li,v=!0):(typeof e.x<"u"||Array.isArray(e))&&(r=e,e=t,t=li,v=!0),e=Ai(e),r?Ti(t,e,r):(x={forward:function(D,G){return Ti(t,e,D,G)},inverse:function(D,G){return Ti(e,t,D,G)}},v&&(x.oProj=e),x)};var pi=6,Ln="AJSAJS",gn="AFAFAF",mn=65,Pi=73,Ci=79,Mn=86,ln=90;const _s={forward:Vn,inverse:function Xs(t){var e=hn(Jn(t.toUpperCase()));return e.lat&&e.lon?[e.lon,e.lat,e.lon,e.lat]:[e.left,e.bottom,e.right,e.top]},toPoint:Dn};function Vn(t,e){return e=e||5,function Fn(t,e){var r="00000"+t.easting,v="00000"+t.northing;return t.zoneNumber+t.zoneLetter+function $n(t,e,r){var v=Nn(r);return function Hn(t,e,r){var v=r-1,x=Ln.charCodeAt(v),D=gn.charCodeAt(v),G=x+t-1,X=D+e,nt=!1;return G>ln&&(G=G-ln+mn-1,nt=!0),(G===Pi||x<Pi&&G>Pi||(G>Pi||x<Pi)&&nt)&&G++,(G===Ci||x<Ci&&G>Ci||(G>Ci||x<Ci)&&nt)&&++G===Pi&&G++,G>ln&&(G=G-ln+mn-1),X>Mn?(X=X-Mn+mn-1,nt=!0):nt=!1,(X===Pi||D<Pi&&X>Pi||(X>Pi||D<Pi)&&nt)&&X++,(X===Ci||D<Ci&&X>Ci||(X>Ci||D<Ci)&&nt)&&++X===Pi&&X++,X>Mn&&(X=X-Mn+mn-1),String.fromCharCode(G)+String.fromCharCode(X)}(Math.floor(t/1e5),Math.floor(e/1e5)%20,v)}(t.easting,t.northing,t.zoneNumber)+r.substr(r.length-5,e)+v.substr(v.length-5,e)}(function Vs(t){var X,nt,ct,Tt,Pt,se,ue,e=t.lat,r=t.lon,v=6378137,x=.00669438,D=.9996,Zt=Pn(e),ee=Pn(r);ue=Math.floor((r+180)/6)+1,180===r&&(ue=60),e>=56&&e<64&&r>=3&&r<12&&(ue=32),e>=72&&e<84&&(r>=0&&r<9?ue=31:r>=9&&r<21?ue=33:r>=21&&r<33?ue=35:r>=33&&r<42&&(ue=37)),se=Pn(6*(ue-1)-180+3),X=x/(1-x),nt=v/Math.sqrt(1-x*Math.sin(Zt)*Math.sin(Zt)),ct=Math.tan(Zt)*Math.tan(Zt),Tt=X*Math.cos(Zt)*Math.cos(Zt);var de=D*nt*((Pt=Math.cos(Zt)*(ee-se))+(1-ct+Tt)*Pt*Pt*Pt/6+(5-18*ct+ct*ct+72*Tt-58*X)*Pt*Pt*Pt*Pt*Pt/120)+5e5,fe=D*(v*(.9983242984503243*Zt-.002514607064228144*Math.sin(2*Zt)+2639046602129982e-21*Math.sin(4*Zt)-35*x*x*x/3072*Math.sin(6*Zt))+nt*Math.tan(Zt)*(Pt*Pt/2+(5-ct+9*Tt+4*Tt*Tt)*Pt*Pt*Pt*Pt/24+(61-58*ct+ct*ct+600*Tt-330*X)*Pt*Pt*Pt*Pt*Pt*Pt/720));return e<0&&(fe+=1e7),{northing:Math.round(fe),easting:Math.round(de),zoneNumber:ue,zoneLetter:Yn(e)}}({lat:t[1],lon:t[0]}),e)}function Dn(t){var e=hn(Jn(t.toUpperCase()));return e.lat&&e.lon?[e.lon,e.lat]:[(e.left+e.right)/2,(e.top+e.bottom)/2]}function Pn(t){return t*(Math.PI/180)}function ps(t){return t/Math.PI*180}function hn(t){var e=t.northing,r=t.easting,v=t.zoneLetter,x=t.zoneNumber;if(x<0||x>60)return null;var nt,Tt,Pt,Bt,Zt,ee,ue,de,fe,D=.9996,G=6378137,X=.00669438,ct=(1-Math.sqrt(1-X))/(1+Math.sqrt(1-X)),Pe=r-5e5,_e=e;v<"N"&&(_e-=1e7),ue=6*(x-1)-180+3,nt=X/(1-X),fe=(de=_e/D/6367449.145945056)+(3*ct/2-27*ct*ct*ct/32)*Math.sin(2*de)+(21*ct*ct/16-55*ct*ct*ct*ct/32)*Math.sin(4*de)+151*ct*ct*ct/96*Math.sin(6*de),Tt=G/Math.sqrt(1-X*Math.sin(fe)*Math.sin(fe)),Pt=Math.tan(fe)*Math.tan(fe),Bt=nt*Math.cos(fe)*Math.cos(fe),Zt=G*(1-X)/Math.pow(1-X*Math.sin(fe)*Math.sin(fe),1.5),ee=Pe/(Tt*D);var Ee=fe-Tt*Math.tan(fe)/Zt*(ee*ee/2-(5+3*Pt+10*Bt-4*Bt*Bt-9*nt)*ee*ee*ee*ee/24+(61+90*Pt+298*Bt+45*Pt*Pt-252*nt-3*Bt*Bt)*ee*ee*ee*ee*ee*ee/720);Ee=ps(Ee);var ze,be=(ee-(1+2*Pt+Bt)*ee*ee*ee/6+(5-2*Bt+28*Pt-3*Bt*Bt+8*nt+24*Pt*Pt)*ee*ee*ee*ee*ee/120)/Math.cos(fe);if(be=ue+ps(be),t.accuracy){var Le=hn({northing:t.northing+t.accuracy,easting:t.easting+t.accuracy,zoneLetter:t.zoneLetter,zoneNumber:t.zoneNumber});ze={top:Le.lat,right:Le.lon,bottom:Ee,left:be}}else ze={lat:Ee,lon:be};return ze}function Yn(t){var e="Z";return 84>=t&&t>=72?e="X":72>t&&t>=64?e="W":64>t&&t>=56?e="V":56>t&&t>=48?e="U":48>t&&t>=40?e="T":40>t&&t>=32?e="S":32>t&&t>=24?e="R":24>t&&t>=16?e="Q":16>t&&t>=8?e="P":8>t&&t>=0?e="N":0>t&&t>=-8?e="M":-8>t&&t>=-16?e="L":-16>t&&t>=-24?e="K":-24>t&&t>=-32?e="J":-32>t&&t>=-40?e="H":-40>t&&t>=-48?e="G":-48>t&&t>=-56?e="F":-56>t&&t>=-64?e="E":-64>t&&t>=-72?e="D":-72>t&&t>=-80&&(e="C"),e}function Nn(t){var e=t%pi;return 0===e&&(e=pi),e}function Jn(t){if(t&&0===t.length)throw"MGRSPoint coverting from nothing";for(var x,e=t.length,r=null,v="",D=0;!/[A-Z]/.test(x=t.charAt(D));){if(D>=2)throw"MGRSPoint bad conversion from: "+t;v+=x,D++}var G=parseInt(v,10);if(0===D||D+3>e)throw"MGRSPoint bad conversion from: "+t;var X=t.charAt(D++);if(X<="A"||"B"===X||"Y"===X||X>="Z"||"I"===X||"O"===X)throw"MGRSPoint zone letter "+X+" not handled: "+t;r=t.substring(D,D+=2);for(var nt=Nn(G),ct=function Qn(t,e){for(var r=Ln.charCodeAt(e-1),v=1e5,x=!1;r!==t.charCodeAt(0);){if(++r===Pi&&r++,r===Ci&&r++,r>ln){if(x)throw"Bad character: "+t;r=mn,x=!0}v+=1e5}return v}(r.charAt(0),nt),Tt=function ys(t,e){if(t>"V")throw"MGRSPoint given invalid Northing "+t;for(var r=gn.charCodeAt(e-1),v=0,x=!1;r!==t.charCodeAt(0);){if(++r===Pi&&r++,r===Ci&&r++,r>Mn){if(x)throw"Bad character: "+t;r=mn,x=!0}v+=1e5}return v}(r.charAt(1),nt);Tt<qn(X);)Tt+=2e6;var Pt=e-D;if(Pt%2!=0)throw"MGRSPoint has to have an even number \nof digits after the zone letter and two 100km letters - front \nhalf for easting meters, second half for \nnorthing meters"+t;var se,ue,de,Bt=Pt/2,Zt=0,ee=0;return Bt>0&&(se=1e5/Math.pow(10,Bt),ue=t.substring(D,D+Bt),Zt=parseFloat(ue)*se,de=t.substring(D+Bt),ee=parseFloat(de)*se),{easting:Zt+ct,northing:ee+Tt,zoneLetter:X,zoneNumber:G,accuracy:se}}function qn(t){var e;switch(t){case"C":e=11e5;break;case"D":e=2e6;break;case"E":e=28e5;break;case"F":e=37e5;break;case"G":e=46e5;break;case"H":e=55e5;break;case"J":e=64e5;break;case"K":e=73e5;break;case"L":e=82e5;break;case"M":e=91e5;break;case"N":e=0;break;case"P":e=8e5;break;case"Q":e=17e5;break;case"R":e=26e5;break;case"S":e=35e5;break;case"T":e=44e5;break;case"U":e=53e5;break;case"V":e=62e5;break;case"W":e=7e6;break;case"X":e=79e5;break;default:e=-1}if(e>=0)return e;throw"Invalid zone letter: "+t}function Qi(t,e,r){if(!(this instanceof Qi))return new Qi(t,e,r);if(Array.isArray(t))this.x=t[0],this.y=t[1],this.z=t[2]||0;else if("object"==typeof t)this.x=t.x,this.y=t.y,this.z=t.z||0;else if("string"==typeof t&&typeof e>"u"){var v=t.split(",");this.x=parseFloat(v[0],10),this.y=parseFloat(v[1],10),this.z=parseFloat(v[2],10)||0}else this.x=t,this.y=e,this.z=r||0;console.warn("proj4.Point will be removed in version 3, use proj4.toPoint")}Qi.fromMGRS=function(t){return new Qi(Dn(t))},Qi.prototype.toMGRS=function(t){return Vn([this.x,this.y],t)};const ts=Qi;var Es=.01953125,yi=.01068115234375;function cn(t){var e=[];e[0]=1-t*(.25+t*(.046875+t*(Es+t*yi))),e[1]=t*(.75-t*(.046875+t*(Es+t*yi)));var r=t*t;return e[2]=r*(.46875-t*(.013020833333333334+.007120768229166667*t)),e[3]=(r*=t)*(.3645833333333333-.005696614583333333*t),e[4]=r*t*.3076171875,e}function Wi(t,e,r,v){return v[0]*t-(r*=e)*(v[1]+(e*=e)*(v[2]+e*(v[3]+e*v[4])))}function ns(t,e,r){for(var v=1/(1-e),x=t,D=20;D;--D){var G=Math.sin(x),X=1-e*G*G;if(x-=X=(Wi(x,G,Math.cos(x),r)-t)*(X*Math.sqrt(X))*v,Math.abs(X)<s)return x}return x}const _n={init:function Js(){this.x0=void 0!==this.x0?this.x0:0,this.y0=void 0!==this.y0?this.y0:0,this.long0=void 0!==this.long0?this.long0:0,this.lat0=void 0!==this.lat0?this.lat0:0,this.es&&(this.en=cn(this.es),this.ml0=Wi(this.lat0,Math.sin(this.lat0),Math.cos(this.lat0),this.en))},forward:function ss(t){var x,D,G,r=t.y,v=Lt(t.x-this.long0),X=Math.sin(r),nt=Math.cos(r);if(this.es){var Tt=nt*v,Pt=Math.pow(Tt,2),Bt=this.ep2*Math.pow(nt,2),Zt=Math.pow(Bt,2),ee=Math.abs(nt)>s?Math.tan(r):0,se=Math.pow(ee,2),ue=Math.pow(se,2);x=1-this.es*Math.pow(X,2),Tt/=Math.sqrt(x);var de=Wi(r,X,nt,this.en);D=this.a*(this.k0*Tt*(1+Pt/6*(1-se+Bt+Pt/20*(5-18*se+ue+14*Bt-58*se*Bt+Pt/42*(61+179*ue-ue*se-479*se)))))+this.x0,G=this.a*(this.k0*(de-this.ml0+X*v*Tt/2*(1+Pt/12*(5-se+9*Bt+4*Zt+Pt/30*(61+ue-58*se+270*Bt-330*se*Bt+Pt/56*(1385+543*ue-ue*se-3111*se))))))+this.y0}else{var ct=nt*Math.sin(v);if(Math.abs(Math.abs(ct)-1)<s)return 93;if(D=.5*this.a*this.k0*Math.log((1+ct)/(1-ct))+this.x0,G=nt*Math.cos(v)/Math.sqrt(1-Math.pow(ct,2)),(ct=Math.abs(G))>=1){if(ct-1>s)return 93;G=0}else G=Math.acos(G);r<0&&(G=-G),G=this.a*this.k0*(G-this.lat0)+this.y0}return t.x=D,t.y=G,t},inverse:function Zn(t){var e,r,v,x,D=1/this.a*(t.x-this.x0),G=1/this.a*(t.y-this.y0);if(this.es)if(r=ns(e=this.ml0+G/this.k0,this.es,this.en),Math.abs(r)<d){var Pt=Math.sin(r),Bt=Math.cos(r),Zt=Math.abs(Bt)>s?Math.tan(r):0,ee=this.ep2*Math.pow(Bt,2),se=Math.pow(ee,2),ue=Math.pow(Zt,2),de=Math.pow(ue,2);e=1-this.es*Math.pow(Pt,2);var fe=D*Math.sqrt(e)/this.k0,Pe=Math.pow(fe,2);v=r-(e*=Zt)*Pe/(1-this.es)*.5*(1-Pe/12*(5+3*ue-9*ee*ue+ee-4*se-Pe/30*(61+90*ue-252*ee*ue+45*de+46*ee-Pe/56*(1385+3633*ue+4095*de+1574*de*ue)))),x=Lt(this.long0+fe*(1-Pe/6*(1+2*ue+ee-Pe/20*(5+28*ue+24*de+8*ee*ue+6*ee-Pe/42*(61+662*ue+1320*de+720*de*ue))))/Bt)}else v=d*kt(G),x=0;else{var X=Math.exp(D/this.k0),nt=.5*(X-1/X),Tt=Math.cos(this.lat0+G/this.k0);e=Math.sqrt((1-Math.pow(Tt,2))/(1+Math.pow(nt,2))),v=Math.asin(e),G<0&&(v=-v),x=0===nt&&0===Tt?0:Lt(Math.atan2(nt,Tt)+this.long0)}return t.x=x,t.y=v,t},names:["Fast_Transverse_Mercator","Fast Transverse Mercator"]};function Un(t){var e=Math.exp(t);return(e-1/e)/2}function wi(t,e){t=Math.abs(t),e=Math.abs(e);var r=Math.max(t,e),v=Math.min(t,e)/(r||1);return r*Math.sqrt(1+Math.pow(v,2))}function os(t,e){for(var G,r=2*Math.cos(2*e),v=t.length-1,x=t[v],D=0;--v>=0;)G=r*x-D+t[v],D=x,x=G;return e+G*Math.sin(2*e)}function lt(t,e,r){for(var ee,se,v=Math.sin(e),x=Math.cos(e),D=Un(r),G=function Kt(t){var e=Math.exp(t);return(e+1/e)/2}(r),X=2*x*G,nt=-2*v*D,ct=t.length-1,Tt=t[ct],Pt=0,Bt=0,Zt=0;--ct>=0;)ee=Bt,se=Pt,Tt=X*(Bt=Tt)-ee-nt*(Pt=Zt)+t[ct],Zt=nt*Bt-se+X*Pt;return[(X=v*G)*Tt-(nt=x*D)*Zt,X*Zt+nt*Tt]}const ie={init:function gt(){if(!this.approx&&(isNaN(this.es)||this.es<=0))throw new Error('Incorrect elliptical usage. Try using the +approx option in the proj string, or PROJECTION["Fast_Transverse_Mercator"] in the WKT.');this.approx&&(_n.init.apply(this),this.forward=_n.forward,this.inverse=_n.inverse),this.x0=void 0!==this.x0?this.x0:0,this.y0=void 0!==this.y0?this.y0:0,this.long0=void 0!==this.long0?this.long0:0,this.lat0=void 0!==this.lat0?this.lat0:0,this.cgb=[],this.cbg=[],this.utg=[],this.gtu=[];var t=this.es/(1+Math.sqrt(1-this.es)),e=t/(2-t),r=e;this.cgb[0]=e*(2+e*(-2/3+e*(e*(116/45+e*(26/45+e*(-2854/675)))-2))),this.cbg[0]=e*(e*(2/3+e*(4/3+e*(-82/45+e*(32/45+e*(4642/4725)))))-2),this.cgb[1]=(r*=e)*(7/3+e*(e*(-227/45+e*(2704/315+e*(2323/945)))-1.6)),this.cbg[1]=r*(5/3+e*(-16/15+e*(-13/9+e*(904/315+e*(-1522/945))))),this.cgb[2]=(r*=e)*(56/15+e*(-136/35+e*(-1262/105+e*(73814/2835)))),this.cbg[2]=r*(-26/15+e*(34/21+e*(1.6+e*(-12686/2835)))),this.cgb[3]=(r*=e)*(4279/630+e*(-332/35+e*(-399572/14175))),this.cbg[3]=r*(1237/630+e*(e*(-24832/14175)-2.4)),this.cgb[4]=(r*=e)*(4174/315+e*(-144838/6237)),this.cbg[4]=r*(-734/315+e*(109598/31185)),this.cgb[5]=(r*=e)*(601676/22275),this.cbg[5]=r*(444337/155925),r=Math.pow(e,2),this.Qn=this.k0/(1+e)*(1+r*(1/4+r*(1/64+r/256))),this.utg[0]=e*(e*(2/3+e*(-37/96+e*(1/360+e*(81/512+e*(-96199/604800)))))-.5),this.gtu[0]=e*(.5+e*(-2/3+e*(5/16+e*(41/180+e*(-127/288+e*(7891/37800)))))),this.utg[1]=r*(-1/48+e*(-1/15+e*(437/1440+e*(-46/105+e*(1118711/3870720))))),this.gtu[1]=r*(13/48+e*(e*(557/1440+e*(281/630+e*(-1983433/1935360)))-.6)),this.utg[2]=(r*=e)*(-17/480+e*(37/840+e*(209/4480+e*(-5569/90720)))),this.gtu[2]=r*(61/240+e*(-103/140+e*(15061/26880+e*(167603/181440)))),this.utg[3]=(r*=e)*(-4397/161280+e*(11/504+e*(830251/7257600))),this.gtu[3]=r*(49561/161280+e*(-179/168+e*(6601661/7257600))),this.utg[4]=(r*=e)*(-4583/161280+e*(108847/3991680)),this.gtu[4]=r*(34729/80640+e*(-3418889/1995840)),this.utg[5]=(r*=e)*(-20648693/638668800),this.gtu[5]=.6650675310896665*r;var v=os(this.cbg,this.lat0);this.Zb=-this.Qn*(v+function tr(t,e){for(var G,r=2*Math.cos(e),v=t.length-1,x=t[v],D=0;--v>=0;)G=r*x-D+t[v],D=x,x=G;return Math.sin(e)*G}(this.gtu,2*v))},forward:function yt(t){var e=Lt(t.x-this.long0),r=t.y;r=os(this.cbg,r);var v=Math.sin(r),x=Math.cos(r),D=Math.sin(e),G=Math.cos(e);r=Math.atan2(v,G*x),e=Math.atan2(D*x,wi(v,x*G)),e=function qs(t){var e=Math.abs(t);return e=function Qs(t){var e=1+t,r=e-1;return 0===r?t:t*Math.log(e)/r}(e*(1+e/(wi(1,e)+1))),t<0?-e:e}(Math.tan(e));var nt,ct,X=lt(this.gtu,2*r,2*e);return r+=X[0],e+=X[1],Math.abs(e)<=2.623395162778?(nt=this.a*(this.Qn*e)+this.x0,ct=this.a*(this.Qn*r+this.Zb)+this.y0):(nt=1/0,ct=1/0),t.x=nt,t.y=ct,t},inverse:function Nt(t){var v,x,e=1/this.a*(t.x-this.x0),r=1/this.a*(t.y-this.y0);if(r=(r-this.Zb)/this.Qn,e/=this.Qn,Math.abs(e)<=2.623395162778){var D=lt(this.utg,2*r,2*e);r+=D[0],e+=D[1],e=Math.atan(Un(e));var G=Math.sin(r),X=Math.cos(r),nt=Math.sin(e),ct=Math.cos(e);r=Math.atan2(G*ct,wi(nt,ct*X)),v=Lt((e=Math.atan2(nt,ct*X))+this.long0),x=os(this.cgb,r)}else v=1/0,x=1/0;return t.x=v,t.y=x,t},names:["Extended_Transverse_Mercator","Extended Transverse Mercator","etmerc","Transverse_Mercator","Transverse Mercator","tmerc"]},Xe={init:function Re(){var t=function ce(t,e){if(void 0===t){if((t=Math.floor(30*(Lt(e)+Math.PI)/Math.PI)+1)<0)return 0;if(t>60)return 60}return t}(this.zone,this.long0);if(void 0===t)throw new Error("unknown utm zone");this.lat0=0,this.long0=(6*Math.abs(t)-183)*f,this.x0=5e5,this.y0=this.utmSouth?1e7:0,this.k0=.9996,ie.init.apply(this),this.forward=ie.forward,this.inverse=ie.inverse},names:["Universal Transverse Mercator System","utm"],dependsOn:"etmerc"};function Ge(t,e){return Math.pow((1-t)/(1+t),e)}const gi={init:function Qe(){var t=Math.sin(this.lat0),e=Math.cos(this.lat0);e*=e,this.rc=Math.sqrt(1-this.es)/(1-this.es*t*t),this.C=Math.sqrt(1+this.es*e*e/(1-this.es)),this.phic0=Math.asin(t/this.C),this.ratexp=.5*this.C*this.e,this.K=Math.tan(.5*this.phic0+a)/(Math.pow(Math.tan(.5*this.lat0+a),this.C)*Ge(this.e*t,this.ratexp))},forward:function Ki(t){var e=t.x,r=t.y;return t.y=2*Math.atan(this.K*Math.pow(Math.tan(.5*r+a),this.C)*Ge(this.e*Math.sin(r),this.ratexp))-d,t.x=this.C*e,t},inverse:function ii(t){for(var r=t.x/this.C,v=t.y,x=Math.pow(Math.tan(.5*v+a)/this.K,1/this.C),D=20;D>0&&(v=2*Math.atan(x*Ge(this.e*Math.sin(t.y),-.5*this.e))-d,!(Math.abs(v-t.y)<1e-14));--D)t.y=v;return D?(t.x=r,t.y=v,t):null},names:["gauss"]},Di={init:function bi(){gi.init.apply(this),this.rc&&(this.sinc0=Math.sin(this.phic0),this.cosc0=Math.cos(this.phic0),this.R2=2*this.rc,this.title||(this.title="Oblique Stereographic Alternative"))},forward:function mi(t){var e,r,v,x;return t.x=Lt(t.x-this.long0),gi.forward.apply(this,[t]),e=Math.sin(t.y),r=Math.cos(t.y),v=Math.cos(t.x),t.x=(x=this.k0*this.R2/(1+this.sinc0*e+this.cosc0*r*v))*r*Math.sin(t.x),t.y=x*(this.cosc0*e-this.sinc0*r*v),t.x=this.a*t.x+this.x0,t.y=this.a*t.y+this.y0,t},inverse:function Tn(t){var e,r,v,x,D;if(t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,t.x/=this.k0,t.y/=this.k0,D=Math.sqrt(t.x*t.x+t.y*t.y)){var G=2*Math.atan2(D,this.R2);e=Math.sin(G),r=Math.cos(G),x=Math.asin(r*this.sinc0+t.y*e*this.cosc0/D),v=Math.atan2(t.x*e,D*this.cosc0*r-t.y*this.sinc0*e)}else x=this.phic0,v=0;return t.x=v,t.y=x,gi.inverse.apply(this,[t]),t.x=Lt(t.x+this.long0),t},names:["Stereographic_North_Pole","Oblique_Stereographic","sterea","Oblique Stereographic Alternative","Double_Stereographic"]},jn={init:function as(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.coslat0=Math.cos(this.lat0),this.sinlat0=Math.sin(this.lat0),this.sphere?1===this.k0&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=s&&(this.k0=.5*(1+kt(this.lat0)*Math.sin(this.lat_ts))):(Math.abs(this.coslat0)<=s&&(this.con=this.lat0>0?1:-1),this.cons=Math.sqrt(Math.pow(1+this.e,1+this.e)*Math.pow(1-this.e,1-this.e)),1===this.k0&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=s&&Math.abs(Math.cos(this.lat_ts))>s&&(this.k0=.5*this.cons*St(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts))/te(this.e,this.con*this.lat_ts,this.con*Math.sin(this.lat_ts))),this.ms1=St(this.e,this.sinlat0,this.coslat0),this.X0=2*Math.atan(this.ssfn_(this.lat0,this.sinlat0,this.e))-d,this.cosX0=Math.cos(this.X0),this.sinX0=Math.sin(this.X0))},forward:function Cn(t){var D,G,X,nt,ct,Tt,e=t.x,r=t.y,v=Math.sin(r),x=Math.cos(r),Pt=Lt(e-this.long0);return Math.abs(Math.abs(e-this.long0)-Math.PI)<=s&&Math.abs(r+this.lat0)<=s?(t.x=NaN,t.y=NaN,t):this.sphere?(D=2*this.k0/(1+this.sinlat0*v+this.coslat0*x*Math.cos(Pt)),t.x=this.a*D*x*Math.sin(Pt)+this.x0,t.y=this.a*D*(this.coslat0*v-this.sinlat0*x*Math.cos(Pt))+this.y0,t):(G=2*Math.atan(this.ssfn_(r,v,this.e))-d,nt=Math.cos(G),X=Math.sin(G),Math.abs(this.coslat0)<=s?(ct=te(this.e,r*this.con,this.con*v),t.x=this.x0+(Tt=2*this.a*this.k0*ct/this.cons)*Math.sin(e-this.long0),t.y=this.y0-this.con*Tt*Math.cos(e-this.long0),t):(Math.abs(this.sinlat0)<s?(D=2*this.a*this.k0/(1+nt*Math.cos(Pt)),t.y=D*X):(D=2*this.a*this.k0*this.ms1/(this.cosX0*(1+this.sinX0*X+this.cosX0*nt*Math.cos(Pt))),t.y=D*(this.cosX0*X-this.sinX0*nt*Math.cos(Pt))+this.y0),t.x=D*nt*Math.sin(Pt)+this.x0,t))},inverse:function Rs(t){t.x-=this.x0,t.y-=this.y0;var e,r,x,D,G=Math.sqrt(t.x*t.x+t.y*t.y);if(this.sphere){var X=2*Math.atan(G/(2*this.a*this.k0));return e=this.long0,r=this.lat0,G<=s?(t.x=e,t.y=r,t):(r=Math.asin(Math.cos(X)*this.sinlat0+t.y*Math.sin(X)*this.coslat0/G),e=Math.abs(this.coslat0)<s?Lt(this.lat0>0?this.long0+Math.atan2(t.x,-1*t.y):this.long0+Math.atan2(t.x,t.y)):Lt(this.long0+Math.atan2(t.x*Math.sin(X),G*this.coslat0*Math.cos(X)-t.y*this.sinlat0*Math.sin(X))),t.x=e,t.y=r,t)}if(Math.abs(this.coslat0)<=s){if(G<=s)return r=this.lat0,t.x=e=this.long0,t.y=r,t;t.x*=this.con,t.y*=this.con,r=this.con*Yt(this.e,G*this.cons/(2*this.a*this.k0)),e=this.con*Lt(this.con*this.long0+Math.atan2(t.x,-1*t.y))}else x=2*Math.atan(G*this.cosX0/(2*this.a*this.k0*this.ms1)),e=this.long0,G<=s?D=this.X0:(D=Math.asin(Math.cos(x)*this.sinX0+t.y*Math.sin(x)*this.cosX0/G),e=Lt(this.long0+Math.atan2(t.x*Math.sin(x),G*this.cosX0*Math.cos(x)-t.y*this.sinX0*Math.sin(x)))),r=-1*Yt(this.e,Math.tan(.5*(d+D)));return t.x=e,t.y=r,t},names:["stere","Stereographic_South_Pole","Polar Stereographic (variant B)","Polar_Stereographic"],ssfn_:function Cs(t,e,r){return e*=r,Math.tan(.5*(d+t))*Math.pow((1-e)/(1+e),.5*r)}},Eo={init:function er(){var t=this.lat0;this.lambda0=this.long0;var e=Math.sin(t),r=this.a,x=1/this.rf,D=2*x-Math.pow(x,2),G=this.e=Math.sqrt(D);this.R=this.k0*r*Math.sqrt(1-D)/(1-D*Math.pow(e,2)),this.alpha=Math.sqrt(1+D/(1-D)*Math.pow(Math.cos(t),4)),this.b0=Math.asin(e/this.alpha);var X=Math.log(Math.tan(Math.PI/4+this.b0/2)),nt=Math.log(Math.tan(Math.PI/4+t/2)),ct=Math.log((1+G*e)/(1-G*e));this.K=X-this.alpha*nt+this.alpha*G/2*ct},forward:function po(t){var e=Math.log(Math.tan(Math.PI/4-t.y/2)),r=this.e/2*Math.log((1+this.e*Math.sin(t.y))/(1-this.e*Math.sin(t.y))),x=2*(Math.atan(Math.exp(-this.alpha*(e+r)+this.K))-Math.PI/4),D=this.alpha*(t.x-this.lambda0),G=Math.atan(Math.sin(D)/(Math.sin(this.b0)*Math.tan(x)+Math.cos(this.b0)*Math.cos(D))),X=Math.asin(Math.cos(this.b0)*Math.sin(x)-Math.sin(this.b0)*Math.cos(x)*Math.cos(D));return t.y=this.R/2*Math.log((1+Math.sin(X))/(1-Math.sin(X)))+this.y0,t.x=this.R*G+this.x0,t},inverse:function yo(t){for(var v=(t.x-this.x0)/this.R,x=2*(Math.atan(Math.exp((t.y-this.y0)/this.R))-Math.PI/4),D=Math.asin(Math.cos(this.b0)*Math.sin(x)+Math.sin(this.b0)*Math.cos(x)*Math.cos(v)),G=Math.atan(Math.sin(v)/(Math.cos(this.b0)*Math.cos(v)-Math.sin(this.b0)*Math.tan(x))),X=this.lambda0+G/this.alpha,nt=0,ct=D,Tt=-1e3,Pt=0;Math.abs(ct-Tt)>1e-7;){if(++Pt>20)return;nt=1/this.alpha*(Math.log(Math.tan(Math.PI/4+D/2))-this.K)+this.e*Math.log(Math.tan(Math.PI/4+Math.asin(this.e*Math.sin(ct))/2)),Tt=ct,ct=2*Math.atan(Math.exp(nt))-Math.PI/2}return t.x=X,t.y=ct,t},names:["somerc"]};var Xi=1e-7;const Ro={init:function Mo(){var t,e,r,v,x,D,G,X,nt,ct,Pt,Tt=0,Bt=0,Zt=0,ee=0,se=0,ue=0,de=0;this.no_off=function xo(t){var r="object"==typeof t.PROJECTION?Object.keys(t.PROJECTION)[0]:t.PROJECTION;return"no_uoff"in t||"no_off"in t||-1!==["Hotine_Oblique_Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin"].indexOf(r)}(this),this.no_rot="no_rot"in this;var Pe=!1;"alpha"in this&&(Pe=!0);var _e=!1;if("rectified_grid_angle"in this&&(_e=!0),Pe&&(de=this.alpha),_e&&(Tt=this.rectified_grid_angle*f),Pe||_e)Bt=this.longc;else if(Zt=this.long1,se=this.lat1,ee=this.long2,ue=this.lat2,Math.abs(se-ue)<=Xi||(t=Math.abs(se))<=Xi||Math.abs(t-d)<=Xi||Math.abs(Math.abs(this.lat0)-d)<=Xi||Math.abs(Math.abs(ue)-d)<=Xi)throw new Error;var Ee=1-this.es;e=Math.sqrt(Ee),Math.abs(this.lat0)>s?(X=Math.sin(this.lat0),r=Math.cos(this.lat0),t=1-this.es*X*X,this.B=r*r,this.B=Math.sqrt(1+this.es*this.B*this.B/Ee),this.A=this.B*this.k0*e/t,(x=(v=this.B*e/(r*Math.sqrt(t)))*v-1)<=0?x=0:(x=Math.sqrt(x),this.lat0<0&&(x=-x)),this.E=x+=v,this.E*=Math.pow(te(this.e,this.lat0,X),this.B)):(this.B=1/e,this.A=this.k0,this.E=v=x=1),Pe||_e?(Pe?(Pt=Math.asin(Math.sin(de)/v),_e||(Tt=de)):(Pt=Tt,de=Math.asin(v*Math.sin(Pt))),this.lam0=Bt-Math.asin(.5*(x-1/x)*Math.tan(Pt))/this.B):(D=Math.pow(te(this.e,se,Math.sin(se)),this.B),G=Math.pow(te(this.e,ue,Math.sin(ue)),this.B),x=this.E/D,nt=(G-D)/(G+D),ct=((ct=this.E*this.E)-G*D)/(ct+G*D),(t=Zt-ee)<-Math.pi?ee-=I:t>Math.pi&&(ee+=I),this.lam0=Lt(.5*(Zt+ee)-Math.atan(ct*Math.tan(.5*this.B*(Zt-ee))/nt)/this.B),Pt=Math.atan(2*Math.sin(this.B*Lt(Zt-this.lam0))/(x-1/x)),Tt=de=Math.asin(v*Math.sin(Pt))),this.singam=Math.sin(Pt),this.cosgam=Math.cos(Pt),this.sinrot=Math.sin(Tt),this.cosrot=Math.cos(Tt),this.rB=1/this.B,this.ArB=this.A*this.rB,this.BrA=1/this.ArB,this.no_off?this.u_0=0:(this.u_0=Math.abs(this.ArB*Math.atan(Math.sqrt(v*v-1)/Math.cos(de))),this.lat0<0&&(this.u_0=-this.u_0)),x=.5*Pt,this.v_pole_n=this.ArB*Math.log(Math.tan(a-x)),this.v_pole_s=this.ArB*Math.log(Math.tan(a+x))},forward:function Po(t){var r,v,x,D,G,X,nt,ct,e={};if(t.x=t.x-this.lam0,Math.abs(Math.abs(t.y)-d)>s){if(r=.5*((G=this.E/Math.pow(te(this.e,t.y,Math.sin(t.y)),this.B))-(X=1/G)),v=.5*(G+X),D=Math.sin(this.B*t.x),x=(r*this.singam-D*this.cosgam)/v,Math.abs(Math.abs(x)-1)<s)throw new Error;ct=.5*this.ArB*Math.log((1-x)/(1+x)),X=Math.cos(this.B*t.x),nt=Math.abs(X)<Xi?this.A*t.x:this.ArB*Math.atan2(r*this.cosgam+D*this.singam,X)}else ct=t.y>0?this.v_pole_n:this.v_pole_s,nt=this.ArB*t.y;return this.no_rot?(e.x=nt,e.y=ct):(e.x=ct*this.cosrot+(nt-=this.u_0)*this.sinrot,e.y=nt*this.cosrot-ct*this.sinrot),e.x=this.a*e.x+this.x0,e.y=this.a*e.y+this.y0,e},inverse:function To(t){var e,r,v,x,D,G,X,nt={};if(t.x=1/this.a*(t.x-this.x0),t.y=1/this.a*(t.y-this.y0),this.no_rot?(r=t.y,e=t.x):(r=t.x*this.cosrot-t.y*this.sinrot,e=t.y*this.cosrot+t.x*this.sinrot+this.u_0),x=.5*((v=Math.exp(-this.BrA*r))-1/v),D=.5*(v+1/v),X=((G=Math.sin(this.BrA*e))*this.cosgam+x*this.singam)/D,Math.abs(Math.abs(X)-1)<s)nt.x=0,nt.y=X<0?-d:d;else{if(nt.y=this.E/Math.sqrt((1+X)/(1-X)),nt.y=Yt(this.e,Math.pow(nt.y,1/this.B)),nt.y===1/0)throw new Error;nt.x=-this.rB*Math.atan2(x*this.cosgam-G*this.singam,Math.cos(this.BrA*e))}return nt.x+=this.lam0,nt},names:["Hotine_Oblique_Mercator","Hotine Oblique Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin","Hotine_Oblique_Mercator_Two_Point_Natural_Origin","Hotine_Oblique_Mercator_Azimuth_Center","Oblique_Mercator","omerc"]},Dr={init:function ir(){if(this.lat2||(this.lat2=this.lat1),this.k0||(this.k0=1),this.x0=this.x0||0,this.y0=this.y0||0,!(Math.abs(this.lat1+this.lat2)<s)){var t=this.b/this.a;this.e=Math.sqrt(1-t*t);var e=Math.sin(this.lat1),r=Math.cos(this.lat1),v=St(this.e,e,r),x=te(this.e,this.lat1,e),D=Math.sin(this.lat2),G=Math.cos(this.lat2),X=St(this.e,D,G),nt=te(this.e,this.lat2,D),ct=te(this.e,this.lat0,Math.sin(this.lat0));this.ns=Math.abs(this.lat1-this.lat2)>s?Math.log(v/X)/Math.log(x/nt):e,isNaN(this.ns)&&(this.ns=e),this.f0=v/(this.ns*Math.pow(x,this.ns)),this.rh=this.a*this.f0*Math.pow(ct,this.ns),this.title||(this.title="Lambert Conformal Conic")}},forward:function nr(t){var e=t.x,r=t.y;Math.abs(2*Math.abs(r)-Math.PI)<=s&&(r=kt(r)*(d-2*s));var x,D,v=Math.abs(Math.abs(r)-d);if(v>s)x=te(this.e,r,Math.sin(r)),D=this.a*this.f0*Math.pow(x,this.ns);else{if((v=r*this.ns)<=0)return null;D=0}var G=this.ns*Lt(e-this.long0);return t.x=this.k0*(D*Math.sin(G))+this.x0,t.y=this.k0*(this.rh-D*Math.cos(G))+this.y0,t},inverse:function Io(t){var e,r,v,x,D,G=(t.x-this.x0)/this.k0,X=this.rh-(t.y-this.y0)/this.k0;this.ns>0?(e=Math.sqrt(G*G+X*X),r=1):(e=-Math.sqrt(G*G+X*X),r=-1);var nt=0;if(0!==e&&(nt=Math.atan2(r*G,r*X)),0!==e||this.ns>0){if(r=1/this.ns,v=Math.pow(e/(this.a*this.f0),r),-9999===(x=Yt(this.e,v)))return null}else x=-d;return D=Lt(nt/this.ns+this.long0),t.x=D,t.y=x,t},names:["Lambert Tangential Conformal Conic Projection","Lambert_Conformal_Conic","Lambert_Conformal_Conic_1SP","Lambert_Conformal_Conic_2SP","lcc","Lambert Conic Conformal (1SP)","Lambert Conic Conformal (2SP)"]},Nr={init:function Fr(){this.a=6377397.155,this.es=.006674372230614,this.e=Math.sqrt(this.es),this.lat0||(this.lat0=.863937979737193),this.long0||(this.long0=.4334234309119251),this.k0||(this.k0=.9999),this.s45=.785398163397448,this.s90=2*this.s45,this.fi0=this.lat0,this.e2=this.es,this.e=Math.sqrt(this.e2),this.alfa=Math.sqrt(1+this.e2*Math.pow(Math.cos(this.fi0),4)/(1-this.e2)),this.uq=1.04216856380474,this.u0=Math.asin(Math.sin(this.fi0)/this.alfa),this.g=Math.pow((1+this.e*Math.sin(this.fi0))/(1-this.e*Math.sin(this.fi0)),this.alfa*this.e/2),this.k=Math.tan(this.u0/2+this.s45)/Math.pow(Math.tan(this.fi0/2+this.s45),this.alfa)*this.g,this.k1=this.k0,this.n0=this.a*Math.sqrt(1-this.e2)/(1-this.e2*Math.pow(Math.sin(this.fi0),2)),this.s0=1.37008346281555,this.n=Math.sin(this.s0),this.ro0=this.k1*this.n0/Math.tan(this.s0),this.ad=this.s90-this.uq},forward:function sr(t){var e,r,v,x,D,G,X,ct=t.y,Tt=Lt(t.x-this.long0);return e=Math.pow((1+this.e*Math.sin(ct))/(1-this.e*Math.sin(ct)),this.alfa*this.e/2),r=2*(Math.atan(this.k*Math.pow(Math.tan(ct/2+this.s45),this.alfa)/e)-this.s45),v=-Tt*this.alfa,x=Math.asin(Math.cos(this.ad)*Math.sin(r)+Math.sin(this.ad)*Math.cos(r)*Math.cos(v)),D=Math.asin(Math.cos(r)*Math.sin(v)/Math.cos(x)),G=this.n*D,X=this.ro0*Math.pow(Math.tan(this.s0/2+this.s45),this.n)/Math.pow(Math.tan(x/2+this.s45),this.n),t.y=X*Math.cos(G)/1,t.x=X*Math.sin(G)/1,this.czech||(t.y*=-1,t.x*=-1),t},inverse:function Oo(t){var e,r,v,x,G,X,nt,ct=t.x;t.x=t.y,t.y=ct,this.czech||(t.y*=-1,t.x*=-1),G=Math.sqrt(t.x*t.x+t.y*t.y),x=Math.atan2(t.y,t.x)/Math.sin(this.s0),v=2*(Math.atan(Math.pow(this.ro0/G,1/this.n)*Math.tan(this.s0/2+this.s45))-this.s45),e=Math.asin(Math.cos(this.ad)*Math.sin(v)-Math.sin(this.ad)*Math.cos(v)*Math.cos(x)),r=Math.asin(Math.cos(v)*Math.sin(x)/Math.cos(e)),t.x=this.long0-r/this.alfa,X=e,nt=0;var Tt=0;do{t.y=2*(Math.atan(Math.pow(this.k,-1/this.alfa)*Math.pow(Math.tan(e/2+this.s45),1/this.alfa)*Math.pow((1+this.e*Math.sin(X))/(1-this.e*Math.sin(X)),this.e/2))-this.s45),Math.abs(X-t.y)<1e-10&&(nt=1),X=t.y,Tt+=1}while(0===nt&&Tt<15);return Tt>=15?null:t},names:["Krovak","krovak"]};function Ei(t,e,r,v,x){return t*x-e*Math.sin(2*x)+r*Math.sin(4*x)-v*Math.sin(6*x)}function tn(t){return 1-.25*t*(1+t/16*(3+1.25*t))}function ls(t){return.375*t*(1+.25*t*(1+.46875*t))}function hs(t){return.05859375*t*t*(1+.75*t)}function us(t){return t*t*t*(35/3072)}function In(t,e,r){var v=e*r;return t/Math.sqrt(1-v*v)}function Bn(t){return Math.abs(t)<d?t:t-kt(t)*Math.PI}function Os(t,e,r,v,x){var D,G;D=t/e;for(var X=0;X<15;X++)if(D+=G=(t-(e*D-r*Math.sin(2*D)+v*Math.sin(4*D)-x*Math.sin(6*D)))/(e-2*r*Math.cos(2*D)+4*v*Math.cos(4*D)-6*x*Math.cos(6*D)),Math.abs(G)<=1e-10)return D;return NaN}const Ss={init:function rr(){this.sphere||(this.e0=tn(this.es),this.e1=ls(this.es),this.e2=hs(this.es),this.e3=us(this.es),this.ml0=this.a*Ei(this.e0,this.e1,this.e2,this.e3,this.lat0))},forward:function Zr(t){var e,r,v=t.x,x=t.y;if(v=Lt(v-this.long0),this.sphere)e=this.a*Math.asin(Math.cos(x)*Math.sin(v)),r=this.a*(Math.atan2(Math.tan(x),Math.cos(v))-this.lat0);else{var D=Math.sin(x),G=Math.cos(x),X=In(this.a,this.e,D),nt=Math.tan(x)*Math.tan(x),ct=v*Math.cos(x),Tt=ct*ct,Pt=this.es*G*G/(1-this.es);e=X*ct*(1-Tt*nt*(1/6-(8-nt+8*Pt)*Tt/120)),r=this.a*Ei(this.e0,this.e1,this.e2,this.e3,x)-this.ml0+X*D/G*Tt*(.5+(5-nt+6*Pt)*Tt/24)}return t.x=e+this.x0,t.y=r+this.y0,t},inverse:function Ur(t){t.x-=this.x0,t.y-=this.y0;var v,x,e=t.x/this.a,r=t.y/this.a;if(this.sphere){var D=r+this.lat0;v=Math.asin(Math.sin(D)*Math.cos(e)),x=Math.atan2(Math.tan(e),Math.cos(D))}else{var X=Os(this.ml0/this.a+r,this.e0,this.e1,this.e2,this.e3);if(Math.abs(Math.abs(X)-d)<=s)return t.x=this.long0,t.y=d,r<0&&(t.y*=-1),t;var nt=In(this.a,this.e,Math.sin(X)),ct=nt*nt*nt/this.a/this.a*(1-this.es),Tt=Math.pow(Math.tan(X),2),Pt=e*this.a/nt,Bt=Pt*Pt;v=X-nt*Math.tan(X)/ct*Pt*Pt*(.5-(1+3*Tt)*Pt*Pt/24),x=Pt*(1-Bt*(Tt/3+(1+3*Tt)*Tt*Bt/15))/Math.cos(X)}return t.x=Lt(x+this.long0),t.y=Bn(v),t},names:["Cassini","Cassini_Soldner","cass"]};function pn(t,e){var r;return t>1e-7?(1-t*t)*(e/(1-(r=t*e)*r)-.5/t*Math.log((1-r)/(1+r))):2*e}const ar={init:function Br(){var e,t=Math.abs(this.lat0);if(this.mode=Math.abs(t-d)<s?this.lat0<0?this.S_POLE:this.N_POLE:Math.abs(t)<s?this.EQUIT:this.OBLIQ,this.es>0)switch(this.qp=pn(this.e,1),this.mmf=.5/(1-this.es),this.apa=function Zo(t){var e,r=[];return r[0]=.3333333333333333*t,r[0]+=.17222222222222222*(e=t*t),r[1]=.06388888888888888*e,r[0]+=.10257936507936508*(e*=t),r[1]+=.0664021164021164*e,r[2]=.016415012942191543*e,r}(this.es),this.mode){case this.N_POLE:case this.S_POLE:this.dd=1;break;case this.EQUIT:this.rq=Math.sqrt(.5*this.qp),this.dd=1/this.rq,this.xmf=1,this.ymf=.5*this.qp;break;case this.OBLIQ:this.rq=Math.sqrt(.5*this.qp),e=Math.sin(this.lat0),this.sinb1=pn(this.e,e)/this.qp,this.cosb1=Math.sqrt(1-this.sinb1*this.sinb1),this.dd=Math.cos(this.lat0)/(Math.sqrt(1-this.es*e*e)*this.rq*this.cosb1),this.ymf=(this.xmf=this.rq)/this.dd,this.xmf*=this.dd}else this.mode===this.OBLIQ&&(this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0))},forward:function bo(t){var e,r,v,x,D,G,X,nt,ct,Tt,Pt=t.x,Bt=t.y;if(Pt=Lt(Pt-this.long0),this.sphere){if(D=Math.sin(Bt),Tt=Math.cos(Bt),v=Math.cos(Pt),this.mode===this.OBLIQ||this.mode===this.EQUIT){if((r=this.mode===this.EQUIT?1+Tt*v:1+this.sinph0*D+this.cosph0*Tt*v)<=s)return null;e=(r=Math.sqrt(2/r))*Tt*Math.sin(Pt),r*=this.mode===this.EQUIT?D:this.cosph0*D-this.sinph0*Tt*v}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(v=-v),Math.abs(Bt+this.lat0)<s)return null;r=a-.5*Bt,e=(r=2*(this.mode===this.S_POLE?Math.cos(r):Math.sin(r)))*Math.sin(Pt),r*=v}}else{switch(X=0,nt=0,ct=0,v=Math.cos(Pt),x=Math.sin(Pt),D=Math.sin(Bt),G=pn(this.e,D),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(X=G/this.qp,nt=Math.sqrt(1-X*X)),this.mode){case this.OBLIQ:ct=1+this.sinb1*X+this.cosb1*nt*v;break;case this.EQUIT:ct=1+nt*v;break;case this.N_POLE:ct=d+Bt,G=this.qp-G;break;case this.S_POLE:ct=Bt-d,G=this.qp+G}if(Math.abs(ct)<s)return null;switch(this.mode){case this.OBLIQ:case this.EQUIT:ct=Math.sqrt(2/ct),r=this.mode===this.OBLIQ?this.ymf*ct*(this.cosb1*X-this.sinb1*nt*v):(ct=Math.sqrt(2/(1+nt*v)))*X*this.ymf,e=this.xmf*ct*nt*x;break;case this.N_POLE:case this.S_POLE:G>=0?(e=(ct=Math.sqrt(G))*x,r=v*(this.mode===this.S_POLE?ct:-ct)):e=r=0}}return t.x=this.a*e+this.x0,t.y=this.a*r+this.y0,t},inverse:function Lo(t){t.x-=this.x0,t.y-=this.y0;var v,x,D,G,X,nt,ct,e=t.x/this.a,r=t.y/this.a;if(this.sphere){var Pt,Tt=0,Bt=0;if((x=.5*(Pt=Math.sqrt(e*e+r*r)))>1)return null;switch(x=2*Math.asin(x),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(Bt=Math.sin(x),Tt=Math.cos(x)),this.mode){case this.EQUIT:x=Math.abs(Pt)<=s?0:Math.asin(r*Bt/Pt),e*=Bt,r=Tt*Pt;break;case this.OBLIQ:x=Math.abs(Pt)<=s?this.lat0:Math.asin(Tt*this.sinph0+r*Bt*this.cosph0/Pt),e*=Bt*this.cosph0,r=(Tt-Math.sin(x)*this.sinph0)*Pt;break;case this.N_POLE:r=-r,x=d-x;break;case this.S_POLE:x-=d}v=0!==r||this.mode!==this.EQUIT&&this.mode!==this.OBLIQ?Math.atan2(e,r):0}else{if(ct=0,this.mode===this.OBLIQ||this.mode===this.EQUIT){if(e/=this.dd,r*=this.dd,(nt=Math.sqrt(e*e+r*r))<s)return t.x=this.long0,t.y=this.lat0,t;G=2*Math.asin(.5*nt/this.rq),D=Math.cos(G),e*=G=Math.sin(G),this.mode===this.OBLIQ?(X=this.qp*(ct=D*this.sinb1+r*G*this.cosb1/nt),r=nt*this.cosb1*D-r*this.sinb1*G):(X=this.qp*(ct=r*G/nt),r=nt*D)}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(r=-r),!(X=e*e+r*r))return t.x=this.long0,t.y=this.lat0,t;ct=1-X/this.qp,this.mode===this.S_POLE&&(ct=-ct)}v=Math.atan2(e,r),x=function zr(t,e){var r=t+t;return t+e[0]*Math.sin(r)+e[1]*Math.sin(r+r)+e[2]*Math.sin(r+r+r)}(Math.asin(ct),this.apa)}return t.x=Lt(this.long0+v),t.y=x,t},names:["Lambert Azimuthal Equal Area","Lambert_Azimuthal_Equal_Area","laea"],S_POLE:1,N_POLE:2,EQUIT:3,OBLIQ:4};function yn(t){return Math.abs(t)>1&&(t=t>1?1:-1),Math.asin(t)}const Xr={init:function kr(){Math.abs(this.lat1+this.lat2)<s||(this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e3=Math.sqrt(this.es),this.sin_po=Math.sin(this.lat1),this.cos_po=Math.cos(this.lat1),this.t1=this.sin_po,this.con=this.sin_po,this.ms1=St(this.e3,this.sin_po,this.cos_po),this.qs1=pn(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat2),this.cos_po=Math.cos(this.lat2),this.t2=this.sin_po,this.ms2=St(this.e3,this.sin_po,this.cos_po),this.qs2=pn(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat0),this.cos_po=Math.cos(this.lat0),this.t3=this.sin_po,this.qs0=pn(this.e3,this.sin_po),this.ns0=Math.abs(this.lat1-this.lat2)>s?(this.ms1*this.ms1-this.ms2*this.ms2)/(this.qs2-this.qs1):this.con,this.c=this.ms1*this.ms1+this.ns0*this.qs1,this.rh=this.a*Math.sqrt(this.c-this.ns0*this.qs0)/this.ns0)},forward:function Kr(t){var e=t.x,r=t.y;this.sin_phi=Math.sin(r),this.cos_phi=Math.cos(r);var v=pn(this.e3,this.sin_phi),x=this.a*Math.sqrt(this.c-this.ns0*v)/this.ns0,D=this.ns0*Lt(e-this.long0),G=x*Math.sin(D)+this.x0,X=this.rh-x*Math.cos(D)+this.y0;return t.x=G,t.y=X,t},inverse:function ws(t){var e,v,x,D,G;return t.x-=this.x0,t.y=this.rh-t.y+this.y0,this.ns0>=0?(e=Math.sqrt(t.x*t.x+t.y*t.y),v=1):(e=-Math.sqrt(t.x*t.x+t.y*t.y),v=-1),x=0,0!==e&&(x=Math.atan2(v*t.x,v*t.y)),v=e*this.ns0/this.a,G=this.sphere?Math.asin((this.c-v*v)/(2*this.ns0)):this.phi1z(this.e3,(this.c-v*v)/this.ns0),D=Lt(x/this.ns0+this.long0),t.x=D,t.y=G,t},names:["Albers_Conic_Equal_Area","Albers","aea"],phi1z:function Uo(t,e){var r,x,D,G,X=yn(.5*e);if(t<s)return X;for(var nt=t*t,ct=1;ct<=25;ct++)if(X+=G=.5*(D=1-(x=t*(r=Math.sin(X)))*x)*D/Math.cos(X)*(e/(1-nt)-r/D+.5/t*Math.log((1-x)/(1+x))),Math.abs(G)<=1e-7)return X;return null}},Bo={init:function Vr(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0),this.infinity_dist=1e3*this.a,this.rc=1},forward:function cs(t){var e,r,v,x,G,X,nt,Tt=t.y;return v=Lt(t.x-this.long0),e=Math.sin(Tt),r=Math.cos(Tt),x=Math.cos(v),(G=this.sin_p14*e+this.cos_p14*r*x)>0||Math.abs(G)<=s?(X=this.x0+1*this.a*r*Math.sin(v)/G,nt=this.y0+1*this.a*(this.cos_p14*e-this.sin_p14*r*x)/G):(X=this.x0+this.infinity_dist*r*Math.sin(v),nt=this.y0+this.infinity_dist*(this.cos_p14*e-this.sin_p14*r*x)),t.x=X,t.y=nt,t},inverse:function Yr(t){var e,r,v,x,D,G;return t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,t.x/=this.k0,t.y/=this.k0,(e=Math.sqrt(t.x*t.x+t.y*t.y))?(x=Math.atan2(e,this.rc),r=Math.sin(x),G=yn((v=Math.cos(x))*this.sin_p14+t.y*r*this.cos_p14/e),D=Math.atan2(t.x*r,e*this.cos_p14*v-t.y*this.sin_p14*r),D=Lt(this.long0+D)):(G=this.phic0,D=0),t.x=D,t.y=G,t},names:["gnom"]},Ls={init:function Hr(){this.sphere||(this.k0=St(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)))},forward:function hr(t){var v,x,r=t.y,D=Lt(t.x-this.long0);if(this.sphere)v=this.x0+this.a*D*Math.cos(this.lat_ts),x=this.y0+this.a*Math.sin(r)/Math.cos(this.lat_ts);else{var G=pn(this.e,Math.sin(r));v=this.x0+this.a*this.k0*D,x=this.y0+this.a*G*.5/this.k0}return t.x=v,t.y=x,t},inverse:function Wo(t){var e,r;return t.x-=this.x0,t.y-=this.y0,this.sphere?(e=Lt(this.long0+t.x/this.a/Math.cos(this.lat_ts)),r=Math.asin(t.y/this.a*Math.cos(this.lat_ts))):(r=function lr(t,e){var r=1-(1-t*t)/(2*t)*Math.log((1-t)/(1+t));if(Math.abs(Math.abs(e)-r)<1e-6)return e<0?-1*d:d;for(var x,D,G,X,v=Math.asin(.5*e),nt=0;nt<30;nt++)if(D=Math.sin(v),G=Math.cos(v),X=t*D,v+=x=Math.pow(1-X*X,2)/(2*G)*(e/(1-t*t)-D/(1-X*X)+.5/t*Math.log((1-X)/(1+X))),Math.abs(x)<=1e-10)return v;return NaN}(this.e,2*t.y*this.k0/this.a),e=Lt(this.long0+t.x/(this.a*this.k0))),t.x=e,t.y=r,t},names:["cea"]},Fs={init:function Ds(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Equidistant Cylindrical (Plate Carre)",this.rc=Math.cos(this.lat_ts)},forward:function Jr(t){var r=t.y,v=Lt(t.x-this.long0),x=Bn(r-this.lat0);return t.x=this.x0+this.a*v*this.rc,t.y=this.y0+this.a*x,t},inverse:function Go(t){var r=t.y;return t.x=Lt(this.long0+(t.x-this.x0)/(this.a*this.rc)),t.y=Bn(this.lat0+(r-this.y0)/this.a),t},names:["Equirectangular","Equidistant_Cylindrical","eqc"]},Zs={init:function zo(){this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=tn(this.es),this.e1=ls(this.es),this.e2=hs(this.es),this.e3=us(this.es),this.ml0=this.a*Ei(this.e0,this.e1,this.e2,this.e3,this.lat0)},forward:function Qr(t){var v,x,D,r=t.y,G=Lt(t.x-this.long0);if(D=G*Math.sin(r),this.sphere)Math.abs(r)<=s?(v=this.a*G,x=-1*this.a*this.lat0):(v=this.a*Math.sin(D)/Math.tan(r),x=this.a*(Bn(r-this.lat0)+(1-Math.cos(D))/Math.tan(r)));else if(Math.abs(r)<=s)v=this.a*G,x=-1*this.ml0;else{var X=In(this.a,this.e,Math.sin(r))/Math.tan(r);v=X*Math.sin(D),x=this.a*Ei(this.e0,this.e1,this.e2,this.e3,r)-this.ml0+X*(1-Math.cos(D))}return t.x=v+this.x0,t.y=x+this.y0,t},inverse:function cr(t){var e,r,v,x,D,G,X,nt,ct;if(v=t.x-this.x0,x=t.y-this.y0,this.sphere)if(Math.abs(x+this.a*this.lat0)<=s)e=Lt(v/this.a+this.long0),r=0;else{var Tt;for(X=v*v/this.a/this.a+(G=this.lat0+x/this.a)*G,nt=G,D=20;D;--D)if(nt+=ct=-1*(G*(nt*(Tt=Math.tan(nt))+1)-nt-.5*(nt*nt+X)*Tt)/((nt-G)/Tt-1),Math.abs(ct)<=s){r=nt;break}e=Lt(this.long0+Math.asin(v*Math.tan(nt)/this.a)/Math.sin(r))}else if(Math.abs(x+this.ml0)<=s)r=0,e=Lt(this.long0+v/this.a);else{var Pt,Bt,Zt,ee,se;for(X=v*v/this.a/this.a+(G=(this.ml0+x)/this.a)*G,nt=G,D=20;D;--D)if(se=this.e*Math.sin(nt),Pt=Math.sqrt(1-se*se)*Math.tan(nt),Bt=this.a*Ei(this.e0,this.e1,this.e2,this.e3,nt),Zt=this.e0-2*this.e1*Math.cos(2*nt)+4*this.e2*Math.cos(4*nt)-6*this.e3*Math.cos(6*nt),nt-=ct=(G*(Pt*(ee=Bt/this.a)+1)-ee-.5*Pt*(ee*ee+X))/(this.es*Math.sin(2*nt)*(ee*ee+X-2*G*ee)/(4*Pt)+(G-ee)*(Pt*Zt-2/Math.sin(2*nt))-Zt),Math.abs(ct)<=s){r=nt;break}Pt=Math.sqrt(1-this.es*Math.pow(Math.sin(r),2))*Math.tan(r),e=Lt(this.long0+Math.asin(v*Pt/this.a)/Math.sin(r))}return t.x=e,t.y=r,t},names:["Polyconic","poly"]},to={init:function ds(){this.A=[],this.A[1]=.6399175073,this.A[2]=-.1358797613,this.A[3]=.063294409,this.A[4]=-.02526853,this.A[5]=.0117879,this.A[6]=-.0055161,this.A[7]=.0026906,this.A[8]=-.001333,this.A[9]=67e-5,this.A[10]=-34e-5,this.B_re=[],this.B_im=[],this.B_re[1]=.7557853228,this.B_im[1]=0,this.B_re[2]=.249204646,this.B_im[2]=.003371507,this.B_re[3]=-.001541739,this.B_im[3]=.04105856,this.B_re[4]=-.10162907,this.B_im[4]=.01727609,this.B_re[5]=-.26623489,this.B_im[5]=-.36249218,this.B_re[6]=-.6870983,this.B_im[6]=-1.1651967,this.C_re=[],this.C_im=[],this.C_re[1]=1.3231270439,this.C_im[1]=0,this.C_re[2]=-.577245789,this.C_im[2]=-.007809598,this.C_re[3]=.508307513,this.C_im[3]=-.112208952,this.C_re[4]=-.15094762,this.C_im[4]=.18200602,this.C_re[5]=1.01418179,this.C_im[5]=1.64497696,this.C_re[6]=1.9660549,this.C_im[6]=2.5127645,this.D=[],this.D[1]=1.5627014243,this.D[2]=.5185406398,this.D[3]=-.03333098,this.D[4]=-.1052906,this.D[5]=-.0368594,this.D[6]=.007317,this.D[7]=.0122,this.D[8]=.00394,this.D[9]=-.0013},forward:function Gn(t){var e,G=(t.y-this.lat0)/m*1e-5,X=t.x-this.long0,nt=1,ct=0;for(e=1;e<=10;e++)ct+=this.A[e]*(nt*=G);var se,Tt=ct,Pt=X,Bt=1,Zt=0,ue=0,de=0;for(e=1;e<=6;e++)se=Zt*Tt+Bt*Pt,ue=ue+this.B_re[e]*(Bt=Bt*Tt-Zt*Pt)-this.B_im[e]*(Zt=se),de=de+this.B_im[e]*Bt+this.B_re[e]*Zt;return t.x=de*this.a+this.x0,t.y=ue*this.a+this.y0,t},inverse:function zn(t){var e,Pt,G=(t.y-this.y0)/this.a,X=(t.x-this.x0)/this.a,nt=1,ct=0,Bt=0,Zt=0;for(e=1;e<=6;e++)Pt=ct*G+nt*X,Bt=Bt+this.C_re[e]*(nt=nt*G-ct*X)-this.C_im[e]*(ct=Pt),Zt=Zt+this.C_im[e]*nt+this.C_re[e]*ct;for(var ee=0;ee<this.iterations;ee++){var fe,se=Bt,ue=Zt,Pe=G,_e=X;for(e=2;e<=6;e++)fe=ue*Bt+se*Zt,Pe+=(e-1)*(this.B_re[e]*(se=se*Bt-ue*Zt)-this.B_im[e]*(ue=fe)),_e+=(e-1)*(this.B_im[e]*se+this.B_re[e]*ue);se=1,ue=0;var Ee=this.B_re[1],be=this.B_im[1];for(e=2;e<=6;e++)fe=ue*Bt+se*Zt,Ee+=e*(this.B_re[e]*(se=se*Bt-ue*Zt)-this.B_im[e]*(ue=fe)),be+=e*(this.B_im[e]*se+this.B_re[e]*ue);var ze=Ee*Ee+be*be;Bt=(Pe*Ee+_e*be)/ze,Zt=(_e*Ee-Pe*be)/ze}var Le=Bt,pe=Zt,qe=1,xe=0;for(e=1;e<=9;e++)xe+=this.D[e]*(qe*=Le);var Ae=this.lat0+xe*m*1e5;return t.x=this.long0+pe,t.y=Ae,t},names:["New_Zealand_Map_Grid","nzmg"]},Ko={init:function eo(){},forward:function io(t){var r=t.y,v=Lt(t.x-this.long0),x=this.x0+this.a*v,D=this.y0+this.a*Math.log(Math.tan(Math.PI/4+r/2.5))*1.25;return t.x=x,t.y=D,t},inverse:function ko(t){t.x-=this.x0,t.y-=this.y0;var e=Lt(this.long0+t.x/this.a),r=2.5*(Math.atan(Math.exp(.8*t.y/this.a))-Math.PI/4);return t.x=e,t.y=r,t},names:["Miller_Cylindrical","mill"]},mr={init:function gr(){this.sphere?(this.n=1,this.m=0,this.es=0,this.C_y=Math.sqrt((this.m+1)/this.n),this.C_x=this.C_y/(this.m+1)):this.en=cn(this.es)},forward:function so(t){var e,r,v=t.x,x=t.y;if(v=Lt(v-this.long0),this.sphere){if(this.m)for(var D=this.n*Math.sin(x),G=20;G;--G){var X=(this.m*x+Math.sin(x)-D)/(this.m+Math.cos(x));if(x-=X,Math.abs(X)<s)break}else x=1!==this.n?Math.asin(this.n*Math.sin(x)):x;e=this.a*this.C_x*v*(this.m+Math.cos(x)),r=this.a*this.C_y*x}else{var nt=Math.sin(x),ct=Math.cos(x);r=this.a*Wi(x,nt,ct,this.en),e=this.a*v*ct/Math.sqrt(1-this.es*nt*nt)}return t.x=e,t.y=r,t},inverse:function On(t){var e,v,x;return t.x-=this.x0,v=t.x/this.a,t.y-=this.y0,e=t.y/this.a,this.sphere?(e/=this.C_y,v/=this.C_x*(this.m+Math.cos(e)),this.m?e=yn((this.m*e+Math.sin(e))/this.n):1!==this.n&&(e=yn(Math.sin(e)/this.n)),v=Lt(v+this.long0),e=Bn(e)):(e=ns(t.y/this.a,this.es,this.en),(x=Math.abs(e))<d?(x=Math.sin(e),v=Lt(this.long0+t.x*Math.sqrt(1-this.es*x*x)/(this.a*Math.cos(e)))):x-s<d&&(v=this.long0)),t.x=v,t.y=e,t},names:["Sinusoidal","sinu"]},_r={init:function Xo(){},forward:function Vo(t){for(var r=t.y,v=Lt(t.x-this.long0),x=r,D=Math.PI*Math.sin(r);;){var G=-(x+Math.sin(x)-D)/(1+Math.cos(x));if(x+=G,Math.abs(G)<s)break}x/=2,Math.PI/2-Math.abs(r)<s&&(v=0);var X=.900316316158*this.a*v*Math.cos(x)+this.x0,nt=1.4142135623731*this.a*Math.sin(x)+this.y0;return t.x=X,t.y=nt,t},inverse:function Us(t){var e,r;t.x-=this.x0,t.y-=this.y0,r=t.y/(1.4142135623731*this.a),Math.abs(r)>.999999999999&&(r=.999999999999),e=Math.asin(r);var v=Lt(this.long0+t.x/(.900316316158*this.a*Math.cos(e)));v<-Math.PI&&(v=-Math.PI),v>Math.PI&&(v=Math.PI),r=(2*e+Math.sin(2*e))/Math.PI,Math.abs(r)>1&&(r=1);var x=Math.asin(r);return t.x=v,t.y=x,t},names:["Mollweide","moll"]},pr={init:function $o(){Math.abs(this.lat1+this.lat2)<s||(this.lat2=this.lat2||this.lat1,this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=tn(this.es),this.e1=ls(this.es),this.e2=hs(this.es),this.e3=us(this.es),this.sinphi=Math.sin(this.lat1),this.cosphi=Math.cos(this.lat1),this.ms1=St(this.e,this.sinphi,this.cosphi),this.ml1=Ei(this.e0,this.e1,this.e2,this.e3,this.lat1),Math.abs(this.lat1-this.lat2)<s?this.ns=this.sinphi:(this.sinphi=Math.sin(this.lat2),this.cosphi=Math.cos(this.lat2),this.ms2=St(this.e,this.sinphi,this.cosphi),this.ml2=Ei(this.e0,this.e1,this.e2,this.e3,this.lat2),this.ns=(this.ms1-this.ms2)/(this.ml2-this.ml1)),this.g=this.ml1+this.ms1/this.ns,this.ml0=Ei(this.e0,this.e1,this.e2,this.e3,this.lat0),this.rh=this.a*(this.g-this.ml0))},forward:function Ho(t){var v,e=t.x,r=t.y;if(this.sphere)v=this.a*(this.g-r);else{var x=Ei(this.e0,this.e1,this.e2,this.e3,r);v=this.a*(this.g-x)}var D=this.ns*Lt(e-this.long0),G=this.x0+v*Math.sin(D),X=this.y0+this.rh-v*Math.cos(D);return t.x=G,t.y=X,t},inverse:function Jo(t){var e,r,v,x;t.x-=this.x0,t.y=this.rh-t.y+this.y0,this.ns>=0?(r=Math.sqrt(t.x*t.x+t.y*t.y),e=1):(r=-Math.sqrt(t.x*t.x+t.y*t.y),e=-1);var D=0;return 0!==r&&(D=Math.atan2(e*t.x,e*t.y)),this.sphere?(x=Lt(this.long0+D/this.ns),v=Bn(this.g-r/this.a),t.x=x,t.y=v,t):(v=Os(this.g-r/this.a,this.e0,this.e1,this.e2,this.e3),x=Lt(this.long0+D/this.ns),t.x=x,t.y=v,t)},names:["Equidistant_Conic","eqdc"]},oo={init:function js(){this.R=this.a},forward:function Bs(t){var x,D,r=t.y,v=Lt(t.x-this.long0);Math.abs(r)<=s&&(x=this.x0+this.R*v,D=this.y0);var G=yn(2*Math.abs(r/Math.PI));(Math.abs(v)<=s||Math.abs(Math.abs(r)-d)<=s)&&(x=this.x0,D=r>=0?this.y0+Math.PI*this.R*Math.tan(.5*G):this.y0+Math.PI*this.R*-Math.tan(.5*G));var X=.5*Math.abs(Math.PI/v-v/Math.PI),nt=X*X,ct=Math.sin(G),Tt=Math.cos(G),Pt=Tt/(ct+Tt-1),Zt=Pt*(2/ct-1),ee=Zt*Zt,se=Math.PI*this.R*(X*(Pt-ee)+Math.sqrt(nt*(Pt-ee)*(Pt-ee)-(ee+nt)*(Pt*Pt-ee)))/(ee+nt);v<0&&(se=-se),x=this.x0+se;var ue=nt+Pt;return se=Math.PI*this.R*(Zt*ue-X*Math.sqrt((ee+nt)*(nt+1)-ue*ue))/(ee+nt),D=r>=0?this.y0+se:this.y0-se,t.x=x,t.y=D,t},inverse:function yr(t){var e,r,v,x,D,G,X,nt,ct,Tt,Pt,Bt;return t.x-=this.x0,t.y-=this.y0,Pt=Math.PI*this.R,D=(v=t.x/Pt)*v+(x=t.y/Pt)*x,Pt=3*(x*x/(nt=-2*(G=-Math.abs(x)*(1+D))+1+2*x*x+D*D)+(2*(X=G-2*x*x+v*v)*X*X/nt/nt/nt-9*G*X/nt/nt)/27)/(ct=(G-X*X/3/nt)/nt)/(Tt=2*Math.sqrt(-ct/3)),Math.abs(Pt)>1&&(Pt=Pt>=0?1:-1),Bt=Math.acos(Pt)/3,r=t.y>=0?(-Tt*Math.cos(Bt+Math.PI/3)-X/3/nt)*Math.PI:-(-Tt*Math.cos(Bt+Math.PI/3)-X/3/nt)*Math.PI,e=Math.abs(v)<s?this.long0:Lt(this.long0+Math.PI*(D-1+Math.sqrt(1+2*(v*v-x*x)+D*D))/2/v),t.x=e,t.y=r,t},names:["Van_der_Grinten_I","VanDerGrinten","vandg"]},ta={init:function qo(){this.sin_p12=Math.sin(this.lat0),this.cos_p12=Math.cos(this.lat0)},forward:function vr(t){var G,X,nt,ct,Tt,Pt,Bt,Zt,ee,se,ue,de,fe,Pe,_e,Ee,be,ze,Le,pe,qe,xe,e=t.x,r=t.y,v=Math.sin(t.y),x=Math.cos(t.y),D=Lt(e-this.long0);return this.sphere?Math.abs(this.sin_p12-1)<=s?(t.x=this.x0+this.a*(d-r)*Math.sin(D),t.y=this.y0-this.a*(d-r)*Math.cos(D),t):Math.abs(this.sin_p12+1)<=s?(t.x=this.x0+this.a*(d+r)*Math.sin(D),t.y=this.y0+this.a*(d+r)*Math.cos(D),t):(ze=this.sin_p12*v+this.cos_p12*x*Math.cos(D),be=(Ee=Math.acos(ze))?Ee/Math.sin(Ee):1,t.x=this.x0+this.a*be*x*Math.sin(D),t.y=this.y0+this.a*be*(this.cos_p12*v-this.sin_p12*x*Math.cos(D)),t):(G=tn(this.es),X=ls(this.es),nt=hs(this.es),ct=us(this.es),Math.abs(this.sin_p12-1)<=s?(Tt=this.a*Ei(G,X,nt,ct,d),Pt=this.a*Ei(G,X,nt,ct,r),t.x=this.x0+(Tt-Pt)*Math.sin(D),t.y=this.y0-(Tt-Pt)*Math.cos(D),t):Math.abs(this.sin_p12+1)<=s?(Tt=this.a*Ei(G,X,nt,ct,d),Pt=this.a*Ei(G,X,nt,ct,r),t.x=this.x0+(Tt+Pt)*Math.sin(D),t.y=this.y0+(Tt+Pt)*Math.cos(D),t):(Bt=v/x,Zt=In(this.a,this.e,this.sin_p12),ee=In(this.a,this.e,v),se=Math.atan((1-this.es)*Bt+this.es*Zt*this.sin_p12/(ee*x)),Le=0===(ue=Math.atan2(Math.sin(D),this.cos_p12*Math.tan(se)-this.sin_p12*Math.cos(D)))?Math.asin(this.cos_p12*Math.sin(se)-this.sin_p12*Math.cos(se)):Math.abs(Math.abs(ue)-Math.PI)<=s?-Math.asin(this.cos_p12*Math.sin(se)-this.sin_p12*Math.cos(se)):Math.asin(Math.sin(D)*Math.cos(se)/Math.sin(ue)),de=this.e*this.sin_p12/Math.sqrt(1-this.es),fe=this.e*this.cos_p12*Math.cos(ue)/Math.sqrt(1-this.es),t.x=this.x0+(Ee=Zt*Le*(1-(pe=Le*Le)*(_e=fe*fe)*(1-_e)/6+(qe=pe*Le)/8*(Pe=de*fe)*(1-2*_e)+(xe=qe*Le)/120*(_e*(4-7*_e)-3*de*de*(1-7*_e))-xe*Le/48*Pe))*Math.sin(ue),t.y=this.y0+Ee*Math.cos(ue),t))},inverse:function fa(t){var e,r,v,x,D,G,X,nt,ct,Tt,Pt,Bt,ee,se,ue,de,fe,Pe,_e,Ee,be,ze,Le;return t.x-=this.x0,t.y-=this.y0,this.sphere?(e=Math.sqrt(t.x*t.x+t.y*t.y))>2*d*this.a?void 0:(r=e/this.a,v=Math.sin(r),x=Math.cos(r),D=this.long0,Math.abs(e)<=s?G=this.lat0:(G=yn(x*this.sin_p12+t.y*v*this.cos_p12/e),X=Math.abs(this.lat0)-d,D=Math.abs(X)<=s?Lt(this.lat0>=0?this.long0+Math.atan2(t.x,-t.y):this.long0-Math.atan2(-t.x,t.y)):Lt(this.long0+Math.atan2(t.x*v,e*this.cos_p12*x-t.y*this.sin_p12*v))),t.x=D,t.y=G,t):(nt=tn(this.es),ct=ls(this.es),Tt=hs(this.es),Pt=us(this.es),Math.abs(this.sin_p12-1)<=s?(G=Os(((Bt=this.a*Ei(nt,ct,Tt,Pt,d))-(e=Math.sqrt(t.x*t.x+t.y*t.y)))/this.a,nt,ct,Tt,Pt),D=Lt(this.long0+Math.atan2(t.x,-1*t.y)),t.x=D,t.y=G,t):Math.abs(this.sin_p12+1)<=s?(Bt=this.a*Ei(nt,ct,Tt,Pt,d),G=Os(((e=Math.sqrt(t.x*t.x+t.y*t.y))-Bt)/this.a,nt,ct,Tt,Pt),D=Lt(this.long0+Math.atan2(t.x,t.y)),t.x=D,t.y=G,t):(e=Math.sqrt(t.x*t.x+t.y*t.y),ue=Math.atan2(t.x,t.y),ee=In(this.a,this.e,this.sin_p12),de=Math.cos(ue),_e=3*this.es*(1-(Pe=-(fe=this.e*this.cos_p12*de)*fe/(1-this.es)))*this.sin_p12*this.cos_p12*de/(1-this.es),ze=1-Pe*(be=(Ee=e/ee)-Pe*(1+Pe)*Math.pow(Ee,3)/6-_e*(1+3*Pe)*Math.pow(Ee,4)/24)*be/2-Ee*be*be*be/6,se=Math.asin(this.sin_p12*Math.cos(be)+this.cos_p12*Math.sin(be)*de),D=Lt(this.long0+Math.asin(Math.sin(ue)*Math.sin(be)/Math.cos(se))),Le=Math.sin(se),G=Math.atan2((Le-this.es*ze*this.sin_p12)*Math.tan(se),Le*(1-this.es)),t.x=D,t.y=G,t))},names:["Azimuthal_Equidistant","aeqd"]},Gs={init:function Er(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0)},forward:function ao(t){var e,r,v,x,G,X,nt,Tt=t.y;return v=Lt(t.x-this.long0),e=Math.sin(Tt),r=Math.cos(Tt),x=Math.cos(v),((G=this.sin_p14*e+this.cos_p14*r*x)>0||Math.abs(G)<=s)&&(X=1*this.a*r*Math.sin(v),nt=this.y0+1*this.a*(this.cos_p14*e-this.sin_p14*r*x)),t.x=X,t.y=nt,t},inverse:function ga(t){var e,r,v,x,D,G,X;return t.x-=this.x0,t.y-=this.y0,r=yn((e=Math.sqrt(t.x*t.x+t.y*t.y))/this.a),v=Math.sin(r),x=Math.cos(r),G=this.long0,Math.abs(e)<=s?(X=this.lat0,t.x=G,t.y=X,t):(X=yn(x*this.sin_p14+t.y*v*this.cos_p14/e),D=Math.abs(this.lat0)-d,Math.abs(D)<=s?(G=Lt(this.lat0>=0?this.long0+Math.atan2(t.x,-t.y):this.long0-Math.atan2(-t.x,t.y)),t.x=G,t.y=X,t):(G=Lt(this.long0+Math.atan2(t.x*v,e*this.cos_p14*x-t.y*this.sin_p14*v)),t.x=G,t.y=X,t))},names:["ortho"]};var ke_AREA_0=1,ke_AREA_1=2,ke_AREA_2=3,ke_AREA_3=4;function Vi(t,e,r,v){var x;return t<s?(v.value=ke_AREA_0,x=0):(x=Math.atan2(e,r),Math.abs(x)<=a?v.value=ke_AREA_0:x>a&&x<=d+a?(v.value=ke_AREA_1,x-=d):x>d+a||x<=-(d+a)?(v.value=ke_AREA_2,x=x>=0?x-p:x+p):(v.value=ke_AREA_3,x+=d)),x}function kn(t,e){var r=t+e;return r<-p?r+=I:r>+p&&(r-=I),r}const uo={init:function ea(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Quadrilateralized Spherical Cube",this.face=this.lat0>=d-a/2?5:this.lat0<=-(d-a/2)?6:Math.abs(this.long0)<=a?1:Math.abs(this.long0)<=d+a?this.long0>0?2:4:3,0!==this.es&&(this.one_minus_f=1-(this.a-this.b)/this.a,this.one_minus_f_squared=this.one_minus_f*this.one_minus_f)},forward:function lo(t){var r,v,x,D,G,X,e={x:0,y:0},nt={value:0};if(t.x-=this.long0,r=0!==this.es?Math.atan(this.one_minus_f_squared*Math.tan(t.y)):t.y,v=t.x,5===this.face)D=d-r,v>=a&&v<=d+a?(nt.value=ke_AREA_0,x=v-d):v>d+a||v<=-(d+a)?(nt.value=ke_AREA_1,x=v>0?v-p:v+p):v>-(d+a)&&v<=-a?(nt.value=ke_AREA_2,x=v+d):(nt.value=ke_AREA_3,x=v);else if(6===this.face)D=d+r,v>=a&&v<=d+a?(nt.value=ke_AREA_0,x=-v+d):v<a&&v>=-a?(nt.value=ke_AREA_1,x=-v):v<-a&&v>=-(d+a)?(nt.value=ke_AREA_2,x=-v-d):(nt.value=ke_AREA_3,x=v>0?-v+p:-v-p);else{var ct,Tt,Pt,Bt,Zt,ee;2===this.face?v=kn(v,+d):3===this.face?v=kn(v,+p):4===this.face&&(v=kn(v,-d)),Bt=Math.sin(r),Zt=Math.cos(r),ee=Math.sin(v),ct=Zt*Math.cos(v),Tt=Zt*ee,Pt=Bt,1===this.face?x=Vi(D=Math.acos(ct),Pt,Tt,nt):2===this.face?x=Vi(D=Math.acos(Tt),Pt,-ct,nt):3===this.face?x=Vi(D=Math.acos(-ct),Pt,-Tt,nt):4===this.face?x=Vi(D=Math.acos(-Tt),Pt,ct,nt):(D=x=0,nt.value=ke_AREA_0)}return X=Math.atan(12/p*(x+Math.acos(Math.sin(x)*Math.cos(a))-d)),G=Math.sqrt((1-Math.cos(D))/(Math.cos(X)*Math.cos(X))/(1-Math.cos(Math.atan(1/Math.cos(x))))),nt.value===ke_AREA_1?X+=d:nt.value===ke_AREA_2?X+=p:nt.value===ke_AREA_3&&(X+=1.5*p),e.x=G*Math.cos(X),e.y=G*Math.sin(X),e.x=e.x*this.a+this.x0,e.y=e.y*this.a+this.y0,t.x=e.x,t.y=e.y,t},inverse:function xr(t){var r,v,x,D,G,X,nt,ct,Tt,se,ue,de,e={lam:0,phi:0},Pt={value:0};if(t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,v=Math.atan(Math.sqrt(t.x*t.x+t.y*t.y)),r=Math.atan2(t.y,t.x),t.x>=0&&t.x>=Math.abs(t.y)?Pt.value=ke_AREA_0:t.y>=0&&t.y>=Math.abs(t.x)?(Pt.value=ke_AREA_1,r-=d):t.x<0&&-t.x>=Math.abs(t.y)?(Pt.value=ke_AREA_2,r=r<0?r+p:r-p):(Pt.value=ke_AREA_3,r+=d),Tt=p/12*Math.tan(r),G=Math.sin(Tt)/(Math.cos(Tt)-1/Math.sqrt(2)),X=Math.atan(G),(nt=1-(x=Math.cos(r))*x*(D=Math.tan(v))*D*(1-Math.cos(Math.atan(1/Math.cos(X)))))<-1?nt=-1:nt>1&&(nt=1),5===this.face)ct=Math.acos(nt),e.phi=d-ct,e.lam=Pt.value===ke_AREA_0?X+d:Pt.value===ke_AREA_1?X<0?X+p:X-p:Pt.value===ke_AREA_2?X-d:X;else if(6===this.face)ct=Math.acos(nt),e.phi=ct-d,e.lam=Pt.value===ke_AREA_0?-X+d:Pt.value===ke_AREA_1?-X:Pt.value===ke_AREA_2?-X-d:X<0?-X-p:-X+p;else{var Bt,Zt,ee;Tt=(Bt=nt)*Bt,Zt=(Tt+=(ee=Tt>=1?0:Math.sqrt(1-Tt)*Math.sin(X))*ee)>=1?0:Math.sqrt(1-Tt),Pt.value===ke_AREA_1?(Tt=Zt,Zt=-ee,ee=Tt):Pt.value===ke_AREA_2?(Zt=-Zt,ee=-ee):Pt.value===ke_AREA_3&&(Tt=Zt,Zt=ee,ee=-Tt),2===this.face?(Tt=Bt,Bt=-Zt,Zt=Tt):3===this.face?(Bt=-Bt,Zt=-Zt):4===this.face&&(Tt=Bt,Bt=Zt,Zt=-Tt),e.phi=Math.acos(-ee)-d,e.lam=Math.atan2(Zt,Bt),2===this.face?e.lam=kn(e.lam,-d):3===this.face?e.lam=kn(e.lam,-p):4===this.face&&(e.lam=kn(e.lam,+d))}return 0!==this.es&&(se=e.phi<0?1:0,ue=Math.tan(e.phi),de=this.b/Math.sqrt(ue*ue+this.one_minus_f_squared),e.phi=Math.atan(Math.sqrt(this.a*this.a-de*de)/(this.one_minus_f*de)),se&&(e.phi=-e.phi)),e.lam+=this.long0,t.x=e.lam,t.y=e.phi,t},names:["Quadrilateralized Spherical Cube","Quadrilateralized_Spherical_Cube","qsc"]};var Mr=[[1,22199e-21,-715515e-10,31103e-10],[.9986,-482243e-9,-24897e-9,-13309e-10],[.9954,-83103e-8,-448605e-10,-9.86701e-7],[.99,-.00135364,-59661e-9,36777e-10],[.9822,-.00167442,-449547e-11,-572411e-11],[.973,-.00214868,-903571e-10,1.8736e-8],[.96,-.00305085,-900761e-10,164917e-11],[.9427,-.00382792,-653386e-10,-26154e-10],[.9216,-.00467746,-10457e-8,481243e-11],[.8962,-.00536223,-323831e-10,-543432e-11],[.8679,-.00609363,-113898e-9,332484e-11],[.835,-.00698325,-640253e-10,9.34959e-7],[.7986,-.00755338,-500009e-10,9.35324e-7],[.7597,-.00798324,-35971e-9,-227626e-11],[.7186,-.00851367,-701149e-10,-86303e-10],[.6732,-.00986209,-199569e-9,191974e-10],[.6213,-.010418,883923e-10,624051e-11],[.5722,-.00906601,182e-6,624051e-11],[.5322,-.00677797,275608e-9,624051e-11]],Kn=[[-520417e-23,.0124,121431e-23,-845284e-16],[.062,.0124,-1.26793e-9,4.22642e-10],[.124,.0124,5.07171e-9,-1.60604e-9],[.186,.0123999,-1.90189e-8,6.00152e-9],[.248,.0124002,7.10039e-8,-2.24e-8],[.31,.0123992,-2.64997e-7,8.35986e-8],[.372,.0124029,9.88983e-7,-3.11994e-7],[.434,.0123893,-369093e-11,-4.35621e-7],[.4958,.0123198,-102252e-10,-3.45523e-7],[.5571,.0121916,-154081e-10,-5.82288e-7],[.6176,.0119938,-241424e-10,-5.25327e-7],[.6769,.011713,-320223e-10,-5.16405e-7],[.7346,.0113541,-397684e-10,-6.09052e-7],[.7903,.0109107,-489042e-10,-104739e-11],[.8435,.0103431,-64615e-9,-1.40374e-9],[.8936,.00969686,-64636e-9,-8547e-9],[.9394,.00840947,-192841e-9,-42106e-10],[.9761,.00616527,-256e-6,-42106e-10],[1,.00328947,-319159e-9,-42106e-10]],zs=g/5,ia=1/zs,fs=function(t,e){return t[0]+e*(t[1]+e*(t[2]+e*t[3]))};const aa={init:function Cr(){this.x0=this.x0||0,this.y0=this.y0||0,this.long0=this.long0||0,this.es=0,this.title=this.title||"Robinson"},forward:function sa(t){var e=Lt(t.x-this.long0),r=Math.abs(t.y),v=Math.floor(r*zs);v<0?v=0:v>=18&&(v=17);var x={x:fs(Mr[v],r=g*(r-ia*v))*e,y:fs(Kn[v],r)};return t.y<0&&(x.y=-x.y),x.x=x.x*this.a*.8487+this.x0,x.y=x.y*this.a*1.3523+this.y0,x},inverse:function ra(t){var e={x:(t.x-this.x0)/(.8487*this.a),y:Math.abs(t.y-this.y0)/(1.3523*this.a)};if(e.y>=1)e.x/=Mr[18][0],e.y=t.y<0?-d:d;else{var r=Math.floor(18*e.y);for(r<0?r=0:r>=18&&(r=17);;)if(Kn[r][0]>e.y)--r;else{if(!(Kn[r+1][0]<=e.y))break;++r}var v=Kn[r],x=5*(e.y-v[0])/(Kn[r+1][0]-v[0]);x=function na(t,e,r,v){for(var x=e;v;--v){var D=t(x);if(x-=D,Math.abs(D)<r)break}return x}(function(D){return(fs(v,D)-e.y)/function(t,e){return t[1]+e*(2*t[2]+3*e*t[3])}(v,D)},x,s,100),e.x/=fs(Mr[r],x),e.y=(5*r+x)*f,t.y<0&&(e.y=-e.y)}return e.x=Lt(e.x+this.long0),e},names:["Robinson","robin"]},la={init:function fo(){this.name="geocent"},forward:function go(t){return Ue(t,this.es,this.a)},inverse:function ma(t){return ti(t,this.es,this.a,this.b)},names:["Geocentric","geocentric","geocent","Geocent"]};var ks={h:{def:1e5,num:!0},azi:{def:0,num:!0,degrees:!0},tilt:{def:0,num:!0,degrees:!0},long0:{def:0,num:!0},lat0:{def:0,num:!0}};const ha={init:function _a(){if(Object.keys(ks).forEach(function(r){if(typeof this[r]>"u")this[r]=ks[r].def;else{if(ks[r].num&&isNaN(this[r]))throw new Error("Invalid parameter value, must be numeric "+r+" = "+this[r]);ks[r].num&&(this[r]=parseFloat(this[r]))}ks[r].degrees&&(this[r]=this[r]*f)}.bind(this)),Math.abs(Math.abs(this.lat0)-d)<s?this.mode=this.lat0<0?1:0:Math.abs(this.lat0)<s?this.mode=2:(this.mode=3,this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0)),this.pn1=this.h/this.a,this.pn1<=0||this.pn1>1e10)throw new Error("Invalid height");this.p=1+this.pn1,this.rp=1/this.p,this.h1=1/this.pn1,this.pfact=(this.p+1)*this.h1,this.es=0;var t=this.tilt,e=this.azi;this.cg=Math.cos(e),this.sg=Math.sin(e),this.cw=Math.cos(t),this.sw=Math.sin(t)},forward:function pa(t){t.x-=this.long0;var x,D,G,X,e=Math.sin(t.y),r=Math.cos(t.y),v=Math.cos(t.x);switch(this.mode){case 3:D=this.sinph0*e+this.cosph0*r*v;break;case 2:D=r*v;break;case 1:D=-e;break;case 0:D=e}switch(x=(D=this.pn1/(this.p-D))*r*Math.sin(t.x),this.mode){case 3:D*=this.cosph0*e-this.sinph0*r*v;break;case 2:D*=e;break;case 0:D*=-r*v;break;case 1:D*=r*v}return x=(x*this.cg-D*this.sg)*this.cw*(X=1/((G=D*this.cg+x*this.sg)*this.sw*this.h1+this.cw)),D=G*X,t.x=x*this.a,t.y=D*this.a,t},inverse:function An(t){t.x/=this.a,t.y/=this.a;var r,v,x,e={x:t.x,y:t.y};t.x=(r=this.pn1*t.x*(x=1/(this.pn1-t.y*this.sw)))*this.cg+(v=this.pn1*t.y*this.cw*x)*this.sg,t.y=v*this.cg-r*this.sg;var D=wi(t.x,t.y);if(Math.abs(D)<s)e.x=0,e.y=t.y;else{var G,X;switch(X=1-D*D*this.pfact,X=(this.p-Math.sqrt(X))/(this.pn1/D+D/this.pn1),G=Math.sqrt(1-X*X),this.mode){case 3:e.y=Math.asin(G*this.sinph0+t.y*X*this.cosph0/D),t.y=(G-this.sinph0*Math.sin(e.y))*D,t.x*=X*this.cosph0;break;case 2:e.y=Math.asin(t.y*X/D),t.y=G*D,t.x*=X;break;case 0:e.y=Math.asin(G),t.y=-t.y;break;case 1:e.y=-Math.asin(G)}e.x=Math.atan2(t.x,t.y)}return t.x=e.x+this.long0,t.y=e.y,t},names:["Tilted_Perspective","tpers"]},u={init:function ya(){if(this.flip_axis="x"===this.sweep?1:0,this.h=Number(this.h),this.radius_g_1=this.h/this.a,this.radius_g_1<=0||this.radius_g_1>1e10)throw new Error;if(this.radius_g=1+this.radius_g_1,this.C=this.radius_g*this.radius_g-1,0!==this.es){var t=1-this.es,e=1/t;this.radius_p=Math.sqrt(t),this.radius_p2=t,this.radius_p_inv2=e,this.shape="ellipse"}else this.radius_p=1,this.radius_p2=1,this.radius_p_inv2=1,this.shape="sphere";this.title||(this.title="Geostationary Satellite View")},forward:function va(t){var v,x,D,G,e=t.x,r=t.y;if(e-=this.long0,"ellipse"===this.shape){r=Math.atan(this.radius_p2*Math.tan(r));var X=this.radius_p/wi(this.radius_p*Math.cos(r),Math.sin(r));if(x=X*Math.cos(e)*Math.cos(r),D=X*Math.sin(e)*Math.cos(r),G=X*Math.sin(r),(this.radius_g-x)*x-D*D-G*G*this.radius_p_inv2<0)return t.x=Number.NaN,t.y=Number.NaN,t;v=this.radius_g-x,this.flip_axis?(t.x=this.radius_g_1*Math.atan(D/wi(G,v)),t.y=this.radius_g_1*Math.atan(G/v)):(t.x=this.radius_g_1*Math.atan(D/v),t.y=this.radius_g_1*Math.atan(G/wi(D,v)))}else"sphere"===this.shape&&(v=Math.cos(r),x=Math.cos(e)*v,D=Math.sin(e)*v,G=Math.sin(r),v=this.radius_g-x,this.flip_axis?(t.x=this.radius_g_1*Math.atan(D/wi(G,v)),t.y=this.radius_g_1*Math.atan(G/v)):(t.x=this.radius_g_1*Math.atan(D/v),t.y=this.radius_g_1*Math.atan(G/wi(D,v))));return t.x=t.x*this.a,t.y=t.y*this.a,t},inverse:function ua(t){var x,D,G,X,e=-1,r=0,v=0;if(t.x=t.x/this.a,t.y=t.y/this.a,"ellipse"===this.shape){this.flip_axis?(v=Math.tan(t.y/this.radius_g_1),r=Math.tan(t.x/this.radius_g_1)*wi(1,v)):(r=Math.tan(t.x/this.radius_g_1),v=Math.tan(t.y/this.radius_g_1)*wi(1,r));var nt=v/this.radius_p;if((G=(D=2*this.radius_g*e)*D-4*(x=r*r+nt*nt+e*e)*this.C)<0)return t.x=Number.NaN,t.y=Number.NaN,t;X=(-D-Math.sqrt(G))/(2*x),e=this.radius_g+X*e,r*=X,v*=X,t.x=Math.atan2(r,e),t.y=Math.atan(v*Math.cos(t.x)/e),t.y=Math.atan(this.radius_p_inv2*Math.tan(t.y))}else if("sphere"===this.shape){if(this.flip_axis?(v=Math.tan(t.y/this.radius_g_1),r=Math.tan(t.x/this.radius_g_1)*Math.sqrt(1+v*v)):(r=Math.tan(t.x/this.radius_g_1),v=Math.tan(t.y/this.radius_g_1)*Math.sqrt(1+r*r)),(G=(D=2*this.radius_g*e)*D-4*(x=r*r+v*v+e*e)*this.C)<0)return t.x=Number.NaN,t.y=Number.NaN,t;X=(-D-Math.sqrt(G))/(2*x),e=this.radius_g+X*e,r*=X,v*=X,t.x=Math.atan2(r,e),t.y=Math.atan(v*Math.cos(t.x)/e)}return t.x=t.x+this.long0,t},names:["Geostationary Satellite View","Geostationary_Satellite","geos"]};Be.defaultDatum="WGS84",Be.Proj=Oe,Be.WGS84=new Be.Proj("WGS84"),Be.Point=ts,Be.toPoint=Ji,Be.defs=Wt,Be.nadgrid=function Ze(t,e){var r=new DataView(e),v=function _t(t){var e=t.getInt32(8,!1);return 11!==e&&(11!==(e=t.getInt32(8,!0))&&console.warn("Failed to detect nadgrid endian-ness, defaulting to little-endian"),!0)}(r),x=function vt(t,e){return{nFields:t.getInt32(8,e),nSubgridFields:t.getInt32(24,e),nSubgrids:t.getInt32(40,e),shiftType:At(t,56,64).trim(),fromSemiMajorAxis:t.getFloat64(120,e),fromSemiMinorAxis:t.getFloat64(136,e),toSemiMajorAxis:t.getFloat64(152,e),toSemiMinorAxis:t.getFloat64(168,e)}}(r,v),D=function $t(t,e,r){for(var v=176,x=[],D=0;D<e.nSubgrids;D++){var G=ae(t,v,r),X=ye(t,v,G,r),nt=Math.round(1+(G.upperLongitude-G.lowerLongitude)/G.longitudeInterval),ct=Math.round(1+(G.upperLatitude-G.lowerLatitude)/G.latitudeInterval);x.push({ll:[tt(G.lowerLongitude),tt(G.lowerLatitude)],del:[tt(G.longitudeInterval),tt(G.latitudeInterval)],lim:[nt,ct],count:G.gridNodeCount,cvs:re(X)}),v+=176+16*G.gridNodeCount}return x}(r,x,v),G={header:x,subgrids:D};return Ye[t]=G,G},Be.transform=_i,Be.mgrs=_s,Be.version="__VERSION__",function i(t){t.Proj.projections.add(_n),t.Proj.projections.add(ie),t.Proj.projections.add(Xe),t.Proj.projections.add(Di),t.Proj.projections.add(jn),t.Proj.projections.add(Eo),t.Proj.projections.add(Ro),t.Proj.projections.add(Dr),t.Proj.projections.add(Nr),t.Proj.projections.add(Ss),t.Proj.projections.add(ar),t.Proj.projections.add(Xr),t.Proj.projections.add(Bo),t.Proj.projections.add(Ls),t.Proj.projections.add(Fs),t.Proj.projections.add(Zs),t.Proj.projections.add(to),t.Proj.projections.add(Ko),t.Proj.projections.add(mr),t.Proj.projections.add(_r),t.Proj.projections.add(pr),t.Proj.projections.add(oo),t.Proj.projections.add(ta),t.Proj.projections.add(Gs),t.Proj.projections.add(uo),t.Proj.projections.add(aa),t.Proj.projections.add(la),t.Proj.projections.add(ha),t.Proj.projections.add(u)}(Be);const c=Be},3727:function(jt){jt.exports=function(){"use strict";function ut(s,f,g,a,I){!function p(E,F,w,K,O){for(;K>w;){if(K-w>600){var M=K-w+1,B=F-w+1,Y=Math.log(M),C=.5*Math.exp(2*Y/3),L=.5*Math.sqrt(Y*C*(M-C)/M)*(B-M/2<0?-1:1);p(E,F,Math.max(w,Math.floor(F-B*C/M+L)),Math.min(K,Math.floor(F+(M-B)*C/M+L)),O)}var R=E[F],N=w,Q=K;for(o(E,w,F),O(E[K],R)>0&&o(E,w,K);N<Q;){for(o(E,N,Q),N++,Q--;O(E[N],R)<0;)N++;for(;O(E[Q],R)>0;)Q--}0===O(E[w],R)?o(E,w,Q):o(E,++Q,K),Q<=F&&(w=Q+1),F<=Q&&(K=Q-1)}}(s,f,g||0,a||s.length-1,I||V)}function o(s,f,g){var a=s[f];s[f]=s[g],s[g]=a}function V(s,f){return s<f?-1:s>f?1:0}var k=function(s){void 0===s&&(s=9),this._maxEntries=Math.max(4,s),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function J(s,f,g){if(!g)return f.indexOf(s);for(var a=0;a<f.length;a++)if(g(s,f[a]))return a;return-1}function $(s,f){U(s,0,s.children.length,f,s)}function U(s,f,g,a,I){I||(I=n(null)),I.minX=1/0,I.minY=1/0,I.maxX=-1/0,I.maxY=-1/0;for(var p=f;p<g;p++){var E=s.children[p];S(I,s.leaf?a(E):E)}return I}function S(s,f){return s.minX=Math.min(s.minX,f.minX),s.minY=Math.min(s.minY,f.minY),s.maxX=Math.max(s.maxX,f.maxX),s.maxY=Math.max(s.maxY,f.maxY),s}function b(s,f){return s.minX-f.minX}function T(s,f){return s.minY-f.minY}function y(s){return(s.maxX-s.minX)*(s.maxY-s.minY)}function m(s){return s.maxX-s.minX+(s.maxY-s.minY)}function d(s,f){return s.minX<=f.minX&&s.minY<=f.minY&&f.maxX<=s.maxX&&f.maxY<=s.maxY}function l(s,f){return f.minX<=s.maxX&&f.minY<=s.maxY&&f.maxX>=s.minX&&f.maxY>=s.minY}function n(s){return{children:s,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function h(s,f,g,a,I){for(var p=[f,g];p.length;)if(!((g=p.pop())-(f=p.pop())<=a)){var E=f+Math.ceil((g-f)/a/2)*a;ut(s,E,f,g,I),p.push(f,E,E,g)}}return k.prototype.all=function(){return this._all(this.data,[])},k.prototype.search=function(s){var f=this.data,g=[];if(!l(s,f))return g;for(var a=this.toBBox,I=[];f;){for(var p=0;p<f.children.length;p++){var E=f.children[p],F=f.leaf?a(E):E;l(s,F)&&(f.leaf?g.push(E):d(s,F)?this._all(E,g):I.push(E))}f=I.pop()}return g},k.prototype.collides=function(s){var f=this.data;if(!l(s,f))return!1;for(var g=[];f;){for(var a=0;a<f.children.length;a++){var I=f.children[a],p=f.leaf?this.toBBox(I):I;if(l(s,p)){if(f.leaf||d(s,p))return!0;g.push(I)}}f=g.pop()}return!1},k.prototype.load=function(s){if(!s||!s.length)return this;if(s.length<this._minEntries){for(var f=0;f<s.length;f++)this.insert(s[f]);return this}var g=this._build(s.slice(),0,s.length-1,0);if(this.data.children.length)if(this.data.height===g.height)this._splitRoot(this.data,g);else{if(this.data.height<g.height){var a=this.data;this.data=g,g=a}this._insert(g,this.data.height-g.height-1,!0)}else this.data=g;return this},k.prototype.insert=function(s){return s&&this._insert(s,this.data.height-1),this},k.prototype.clear=function(){return this.data=n([]),this},k.prototype.remove=function(s,f){if(!s)return this;for(var g,a,I,p=this.data,E=this.toBBox(s),F=[],w=[];p||F.length;){if(p||(p=F.pop(),a=F[F.length-1],g=w.pop(),I=!0),p.leaf){var K=J(s,p.children,f);if(-1!==K)return p.children.splice(K,1),F.push(p),this._condense(F),this}I||p.leaf||!d(p,E)?a?(g++,p=a.children[g],I=!1):p=null:(F.push(p),w.push(g),g=0,a=p,p=p.children[0])}return this},k.prototype.toBBox=function(s){return s},k.prototype.compareMinX=function(s,f){return s.minX-f.minX},k.prototype.compareMinY=function(s,f){return s.minY-f.minY},k.prototype.toJSON=function(){return this.data},k.prototype.fromJSON=function(s){return this.data=s,this},k.prototype._all=function(s,f){for(var g=[];s;)s.leaf?f.push.apply(f,s.children):g.push.apply(g,s.children),s=g.pop();return f},k.prototype._build=function(s,f,g,a){var I,p=g-f+1,E=this._maxEntries;if(p<=E)return $(I=n(s.slice(f,g+1)),this.toBBox),I;a||(a=Math.ceil(Math.log(p)/Math.log(E)),E=Math.ceil(p/Math.pow(E,a-1))),(I=n([])).leaf=!1,I.height=a;var F=Math.ceil(p/E),w=F*Math.ceil(Math.sqrt(E));h(s,f,g,w,this.compareMinX);for(var K=f;K<=g;K+=w){var O=Math.min(K+w-1,g);h(s,K,O,F,this.compareMinY);for(var M=K;M<=O;M+=F){var B=Math.min(M+F-1,O);I.children.push(this._build(s,M,B,a-1))}}return $(I,this.toBBox),I},k.prototype._chooseSubtree=function(s,f,g,a){for(;a.push(f),!f.leaf&&a.length-1!==g;){for(var I=1/0,p=1/0,E=void 0,F=0;F<f.children.length;F++){var w=f.children[F],K=y(w),O=(M=s,B=w,(Math.max(B.maxX,M.maxX)-Math.min(B.minX,M.minX))*(Math.max(B.maxY,M.maxY)-Math.min(B.minY,M.minY))-K);O<p?(p=O,I=K<I?K:I,E=w):O===p&&K<I&&(I=K,E=w)}f=E||f.children[0]}var M,B;return f},k.prototype._insert=function(s,f,g){var a=g?s:this.toBBox(s),I=[],p=this._chooseSubtree(a,this.data,f,I);for(p.children.push(s),S(p,a);f>=0&&I[f].children.length>this._maxEntries;)this._split(I,f),f--;this._adjustParentBBoxes(a,I,f)},k.prototype._split=function(s,f){var g=s[f],a=g.children.length,I=this._minEntries;this._chooseSplitAxis(g,I,a);var p=this._chooseSplitIndex(g,I,a),E=n(g.children.splice(p,g.children.length-p));E.height=g.height,E.leaf=g.leaf,$(g,this.toBBox),$(E,this.toBBox),f?s[f-1].children.push(E):this._splitRoot(g,E)},k.prototype._splitRoot=function(s,f){this.data=n([s,f]),this.data.height=s.height+1,this.data.leaf=!1,$(this.data,this.toBBox)},k.prototype._chooseSplitIndex=function(s,f,g){for(var a,I,p,E,F,w,K,O=1/0,M=1/0,B=f;B<=g-f;B++){var Y=U(s,0,B,this.toBBox),C=U(s,B,g,this.toBBox),L=(I=Y,p=C,void 0,void 0,void 0,void 0,E=Math.max(I.minX,p.minX),F=Math.max(I.minY,p.minY),w=Math.min(I.maxX,p.maxX),K=Math.min(I.maxY,p.maxY),Math.max(0,w-E)*Math.max(0,K-F)),A=y(Y)+y(C);L<O?(O=L,a=B,M=A<M?A:M):L===O&&A<M&&(M=A,a=B)}return a||g-f},k.prototype._chooseSplitAxis=function(s,f,g){var a=s.leaf?this.compareMinX:b,I=s.leaf?this.compareMinY:T;this._allDistMargin(s,f,g,a)<this._allDistMargin(s,f,g,I)&&s.children.sort(a)},k.prototype._allDistMargin=function(s,f,g,a){s.children.sort(a);for(var I=this.toBBox,p=U(s,0,f,I),E=U(s,g-f,g,I),F=m(p)+m(E),w=f;w<g-f;w++){var K=s.children[w];S(p,s.leaf?I(K):K),F+=m(p)}for(var O=g-f-1;O>=f;O--){var M=s.children[O];S(E,s.leaf?I(M):M),F+=m(E)}return F},k.prototype._adjustParentBBoxes=function(s,f,g){for(var a=g;a>=0;a--)S(f[a],s)},k.prototype._condense=function(s){for(var f=s.length-1,g=void 0;f>=0;f--)0===s[f].children.length?f>0?(g=s[f-1].children).splice(g.indexOf(s[f]),1):this.clear():$(s[f],this.toBBox)},k}()},6021:(jt,ut,o)=>{"use strict";o.d(ut,{T:()=>k});var V=o(9735);function k(J){return(0,V.h)(($,U)=>J<=U)}},2227:(jt,ut,o)=>{"use strict";o.d(ut,{j:()=>te});var V=o(285),k=o(6021),J=o(2474),$=o(1293),U=o(377),S=o(9895),b=o(5884),T=o(627),y=o(2349),m=o(7704);const d="units",l=[1,2,5],n=25.4/.28,s=class h extends T.Z{constructor(Et){Et=Et||{};const wt=document.createElement("div");wt.style.pointerEvents="none",super({element:wt,render:Et.render,target:Et.target});const it=void 0!==Et.className?Et.className:Et.bar?"ol-scale-bar":"ol-scale-line";this.innerElement_=document.createElement("div"),this.innerElement_.className=it+"-inner",this.element.className=it+" "+y.XV,this.element.appendChild(this.innerElement_),this.viewState_=null,this.minWidth_=void 0!==Et.minWidth?Et.minWidth:64,this.maxWidth_=Et.maxWidth,this.renderedVisible_=!1,this.renderedWidth_=void 0,this.renderedHTML_="",this.addChangeListener(d,this.handleUnitsChanged_),this.setUnits(Et.units||"metric"),this.scaleBar_=Et.bar||!1,this.scaleBarSteps_=Et.steps||4,this.scaleBarText_=Et.text||!1,this.dpi_=Et.dpi||void 0}getUnits(){return this.get(d)}handleUnitsChanged_(){this.updateElement_()}setUnits(Et){this.set(d,Et)}setDpi(Et){this.dpi_=Et}updateElement_(){const Et=this.viewState_;if(!Et)return void(this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1));const wt=Et.center,it=Et.projection,z=this.getUnits();let Z=(0,m._Q)(it,Et.resolution,wt,"degrees"==z?"degrees":"m");const W=this.minWidth_*(this.dpi_||n)/n,j=void 0!==this.maxWidth_?this.maxWidth_*(this.dpi_||n)/n:void 0;let st=W*Z,dt="";if("degrees"==z){const we=m.Wm.degrees;st*=we,st<we/60?(dt="\u2033",Z*=3600):st<we?(dt="\u2032",Z*=60):dt="\xb0"}else if("imperial"==z)st<.9144?(dt="in",Z/=.0254):st<1609.344?(dt="ft",Z/=.3048):(dt="mi",Z/=1609.344);else if("nautical"==z)Z/=1852,dt="NM";else if("metric"==z)st<1e-6?(dt="nm",Z*=1e9):st<.001?(dt="\u03bcm",Z*=1e6):st<1?(dt="mm",Z*=1e3):st<1e3?dt="m":(dt="km",Z/=1e3);else{if("us"!=z)throw new Error("Invalid units");st<.9144?(dt="in",Z*=39.37):st<1609.344?(dt="ft",Z/=.30480061):(dt="mi",Z/=1609.3472)}let Ct,Gt,qt,ne,oe,Qt,Ot=3*Math.floor(Math.log(W*Z)/Math.log(10));for(;;){qt=Math.floor(Ot/3);const we=Math.pow(10,qt);if(Ct=l[(Ot%3+3)%3]*we,Gt=Math.round(Ct/Z),isNaN(Gt))return this.element.style.display="none",void(this.renderedVisible_=!1);if(void 0!==j&&Gt>=j){Ct=ne,Gt=oe,qt=Qt;break}if(Gt>=W)break;ne=Ct,oe=Gt,Qt=qt,++Ot}const ge=this.scaleBar_?this.createScaleBar(Gt,Ct,dt):Ct.toFixed(qt<0?-qt:0)+" "+dt;this.renderedHTML_!=ge&&(this.innerElement_.innerHTML=ge,this.renderedHTML_=ge),this.renderedWidth_!=Gt&&(this.innerElement_.style.width=Gt+"px",this.renderedWidth_=Gt),this.renderedVisible_||(this.element.style.display="",this.renderedVisible_=!0)}createScaleBar(Et,wt,it){const z=this.getScaleForResolution(),_=z<1?Math.round(1/z).toLocaleString()+" : 1":"1 : "+Math.round(z).toLocaleString(),Z=this.scaleBarSteps_,W=Et/Z,j=[this.createMarker("absolute")];for(let dt=0;dt<Z;++dt)j.push(`<div><div class="ol-scale-singlebar ${dt%2==0?"ol-scale-singlebar-odd":"ol-scale-singlebar-even"}" style="width: ${W}px;"></div>`+this.createMarker("relative")+(dt%2==0||2===Z?this.createStepText(dt,Et,!1,wt,it):"")+"</div>");return j.push(this.createStepText(Z,Et,!0,wt,it)),(this.scaleBarText_?`<div class="ol-scale-text" style="width: ${Et}px;">`+_+"</div>":"")+j.join("")}createMarker(Et){return`<div class="ol-scale-step-marker" style="position: ${Et}; top: ${"absolute"===Et?3:-10}px;"></div>`}createStepText(Et,wt,it,z,_){const W=(0===Et?0:Math.round(z/this.scaleBarSteps_*Et*100)/100)+(0===Et?"":" "+_);return`<div class="ol-scale-step-text" style="margin-left: ${0===Et?-3:wt/this.scaleBarSteps_*-1}px;text-align: ${0===Et?"left":"center"};min-width: ${0===Et?0:wt/this.scaleBarSteps_*2}px;left: ${it?wt+"px":"unset"};">`+W+"</div>"}getScaleForResolution(){return(0,m._Q)(this.viewState_.projection,this.viewState_.resolution,this.viewState_.center,"m")*(1e3/25.4)*(this.dpi_||n)}render(Et){const wt=Et.frameState;this.viewState_=wt?wt.viewState:null,this.updateElement_()}};var f=o(4829),g=o(9389),a=o(3583),I=o(63);const p="projection",E="coordinateFormat",w=class F extends T.Z{constructor(Et){Et=Et||{};const wt=document.createElement("div");wt.className=void 0!==Et.className?Et.className:"ol-mouse-position",super({element:wt,render:Et.render,target:Et.target}),this.addChangeListener(p,this.handleProjectionChanged_),Et.coordinateFormat&&this.setCoordinateFormat(Et.coordinateFormat),Et.projection&&this.setProjection(Et.projection),this.renderOnMouseOut_=void 0!==Et.placeholder,this.placeholder_=this.renderOnMouseOut_?Et.placeholder:"&#160;",this.renderedHTML_=wt.innerHTML,this.mapProjection_=null,this.transform_=null,this.wrapX_=!1!==Et.wrapX}handleProjectionChanged_(){this.transform_=null}getCoordinateFormat(){return this.get(E)}getProjection(){return this.get(p)}handleMouseMove(Et){const wt=this.getMap();this.updateHTML_(wt.getEventPixel(Et))}handleMouseOut(Et){this.updateHTML_(null)}setMap(Et){if(super.setMap(Et),Et){const wt=Et.getViewport();this.listenerKeys.push((0,a.oL)(wt,g.Z.POINTERMOVE,this.handleMouseMove,this)),this.renderOnMouseOut_&&this.listenerKeys.push((0,a.oL)(wt,g.Z.POINTEROUT,this.handleMouseOut,this)),this.updateHTML_(null)}}setCoordinateFormat(Et){this.set(E,Et)}setProjection(Et){this.set(p,(0,m.U2)(Et))}updateHTML_(Et){let wt=this.placeholder_;if(Et&&this.mapProjection_){if(!this.transform_){const _=this.getProjection();this.transform_=_?(0,m.WO)(this.mapProjection_,_):m.gD}const z=this.getMap().getCoordinateFromPixelInternal(Et);if(z){const _=(0,m.Cs)();if(_&&(this.transform_=(0,m.WO)(this.mapProjection_,_)),this.transform_(z,z),this.wrapX_){const W=_||this.getProjection()||this.mapProjection_;(0,I.Cf)(z,W)}const Z=this.getCoordinateFormat();wt=Z?Z(z):z.toString()}}(!this.renderedHTML_||wt!==this.renderedHTML_)&&(this.element.innerHTML=wt,this.renderedHTML_=wt)}render(Et){const wt=Et.frameState;wt?this.mapProjection_!=wt.viewState.projection&&(this.mapProjection_=wt.viewState.projection,this.transform_=null):this.mapProjection_=null}};var K=o(4855),O=o(8962),M=o(4591);const B=["fullscreenchange","webkitfullscreenchange","MSFullscreenChange"];function L(Yt){const Et=Yt.body;return!!(Et.webkitRequestFullscreen||Et.requestFullscreen&&Yt.fullscreenEnabled)}function A(Yt){return!(!Yt.webkitIsFullScreen&&!Yt.fullscreenElement)}function P(Yt){Yt.requestFullscreen?Yt.requestFullscreen():Yt.webkitRequestFullscreen&&Yt.webkitRequestFullscreen()}const Q=class C extends T.Z{constructor(Et){Et=Et||{},super({element:document.createElement("div"),target:Et.target}),this.keys_=void 0!==Et.keys&&Et.keys,this.source_=Et.source,this.isInFullscreen_=!1,this.boundHandleMapTargetChange_=this.handleMapTargetChange_.bind(this),this.cssClassName_=void 0!==Et.className?Et.className:"ol-full-screen",this.documentListeners_=[],this.activeClassName_=void 0!==Et.activeClassName?Et.activeClassName.split(" "):[this.cssClassName_+"-true"],this.inactiveClassName_=void 0!==Et.inactiveClassName?Et.inactiveClassName.split(" "):[this.cssClassName_+"-false"];const wt=void 0!==Et.label?Et.label:"\u2922";this.labelNode_="string"==typeof wt?document.createTextNode(wt):wt;const it=void 0!==Et.labelActive?Et.labelActive:"\xd7";this.labelActiveNode_="string"==typeof it?document.createTextNode(it):it;const z=Et.tipLabel?Et.tipLabel:"Toggle full-screen";this.button_=document.createElement("button"),this.button_.title=z,this.button_.setAttribute("type","button"),this.button_.appendChild(this.labelNode_),this.button_.addEventListener(K.Z.CLICK,this.handleClick_.bind(this),!1),this.setClassName_(this.button_,this.isInFullscreen_),this.element.className=`${this.cssClassName_} ${y.XV} ${y.hg}`,this.element.appendChild(this.button_)}handleClick_(Et){Et.preventDefault(),this.handleFullScreen_()}handleFullScreen_(){const Et=this.getMap();if(!Et)return;const wt=Et.getOwnerDocument();if(L(wt))if(A(wt))!function N(Yt){Yt.exitFullscreen?Yt.exitFullscreen():Yt.webkitExitFullscreen&&Yt.webkitExitFullscreen()}(wt);else{let it;it=this.source_?"string"==typeof this.source_?wt.getElementById(this.source_):this.source_:Et.getTargetElement(),this.keys_?function R(Yt){Yt.webkitRequestFullscreen?Yt.webkitRequestFullscreen():P(Yt)}(it):P(it)}}handleFullScreenChange_(){const Et=this.getMap();if(!Et)return;const wt=this.isInFullscreen_;this.isInFullscreen_=A(Et.getOwnerDocument()),wt!==this.isInFullscreen_&&(this.setClassName_(this.button_,this.isInFullscreen_),this.isInFullscreen_?((0,M.$H)(this.labelActiveNode_,this.labelNode_),this.dispatchEvent("enterfullscreen")):((0,M.$H)(this.labelNode_,this.labelActiveNode_),this.dispatchEvent("leavefullscreen")),Et.updateSize())}setClassName_(Et,wt){wt?(Et.classList.remove(...this.inactiveClassName_),Et.classList.add(...this.activeClassName_)):(Et.classList.remove(...this.activeClassName_),Et.classList.add(...this.inactiveClassName_))}setMap(Et){const wt=this.getMap();wt&&wt.removeChangeListener(O.Z.TARGET,this.boundHandleMapTargetChange_),super.setMap(Et),this.handleMapTargetChange_(),Et&&Et.addChangeListener(O.Z.TARGET,this.boundHandleMapTargetChange_)}handleMapTargetChange_(){const Et=this.documentListeners_;for(let it=0,z=Et.length;it<z;++it)(0,a.bN)(Et[it]);Et.length=0;const wt=this.getMap();if(wt){const it=wt.getOwnerDocument();L(it)?this.element.classList.remove(y.Qi):this.element.classList.add(y.Qi);for(let z=0,_=B.length;z<_;++z)Et.push((0,a.oL)(it,B[z],this.handleFullScreenChange_,this));this.handleFullScreenChange_()}}};var et=o(7934),H=o(9832),ot=o(6070),ht=o(2e3),mt=o(8485),xt=o(5646),Rt=o(7194),at=o(77),pt=o(8943);const Wt=class Dt extends T.Z{constructor(Et){Et=Et||{},super({element:document.createElement("div"),render:Et.render,target:Et.target}),this.boundHandleRotationChanged_=this.handleRotationChanged_.bind(this),this.collapsed_=void 0===Et.collapsed||Et.collapsed,this.collapsible_=void 0===Et.collapsible||Et.collapsible,this.collapsible_||(this.collapsed_=!1),this.rotateWithView_=void 0!==Et.rotateWithView&&Et.rotateWithView,this.viewExtent_=void 0;const wt=void 0!==Et.className?Et.className:"ol-overviewmap",it=void 0!==Et.tipLabel?Et.tipLabel:"Overview map",z=void 0!==Et.collapseLabel?Et.collapseLabel:"\u2039";"string"==typeof z?(this.collapseLabel_=document.createElement("span"),this.collapseLabel_.textContent=z):this.collapseLabel_=z;const _=void 0!==Et.label?Et.label:"\u203a";"string"==typeof _?(this.label_=document.createElement("span"),this.label_.textContent=_):this.label_=_;const Z=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_,W=document.createElement("button");W.setAttribute("type","button"),W.title=it,W.appendChild(Z),W.addEventListener(K.Z.CLICK,this.handleClick_.bind(this),!1),this.ovmapDiv_=document.createElement("div"),this.ovmapDiv_.className="ol-overviewmap-map",this.view_=Et.view;const j=new H.Z({view:Et.view,controls:new et.Z,interactions:new et.Z});this.ovmap_=j,Et.layers&&Et.layers.forEach(function(ge){j.addLayer(ge)});const st=document.createElement("div");st.className="ol-overviewmap-box",st.style.boxSizing="border-box",this.boxOverlay_=new mt.Z({position:[0,0],positioning:"center-center",element:st}),this.ovmap_.addOverlay(this.boxOverlay_);const Ot=this.element;Ot.className=wt+" "+y.XV+" "+y.hg+(this.collapsed_&&this.collapsible_?" "+y.hN:"")+(this.collapsible_?"":" ol-uncollapsible"),Ot.appendChild(this.ovmapDiv_),Ot.appendChild(W);const Ct=this,Gt=this.boxOverlay_,qt=this.boxOverlay_.getElement(),oe=function(ge){const we=function(ge){return{clientX:ge.clientX,clientY:ge.clientY}}(ge),Ie=j.getEventCoordinateInternal(we);Gt.setPosition(Ie)},Qt=function(ge){const we=j.getEventCoordinateInternal(ge);Ct.getMap().getView().setCenterInternal(we),window.removeEventListener("mousemove",oe),window.removeEventListener("mouseup",Qt)};qt.addEventListener("mousedown",function(){window.addEventListener("mousemove",oe),window.addEventListener("mouseup",Qt)})}setMap(Et){const wt=this.getMap();if(Et!==wt){if(wt){const it=wt.getView();it&&this.unbindView_(it),this.ovmap_.setTarget(null)}if(super.setMap(Et),Et){this.ovmap_.setTarget(this.ovmapDiv_),this.listenerKeys.push((0,a.oL)(Et,ht.Z.PROPERTYCHANGE,this.handleMapPropertyChange_,this));const it=Et.getView();it&&(this.bindView_(it),it.isDef()&&(this.ovmap_.updateSize(),this.resetExtent_())),this.ovmap_.isRendered()||this.updateBoxAfterOvmapIsRendered_()}}}handleMapPropertyChange_(Et){if(Et.key===O.Z.VIEW){const wt=Et.oldValue;wt&&this.unbindView_(wt);const it=this.getMap().getView();this.bindView_(it)}else!this.ovmap_.isRendered()&&(Et.key===O.Z.TARGET||Et.key===O.Z.SIZE)&&this.ovmap_.updateSize()}bindView_(Et){if(!this.view_){const wt=new xt.ZP({projection:Et.getProjection()});this.ovmap_.setView(wt)}Et.addChangeListener(Rt.Z.ROTATION,this.boundHandleRotationChanged_),this.handleRotationChanged_()}unbindView_(Et){Et.removeChangeListener(Rt.Z.ROTATION,this.boundHandleRotationChanged_)}handleRotationChanged_(){this.rotateWithView_&&this.ovmap_.getView().setRotation(this.getMap().getView().getRotation())}validateExtent_(){const Et=this.getMap(),wt=this.ovmap_;if(!Et.isRendered()||!wt.isRendered())return;const it=Et.getSize(),_=Et.getView().calculateExtentInternal(it);if(this.viewExtent_&&(0,at.fS)(_,this.viewExtent_))return;this.viewExtent_=_;const Z=wt.getSize(),j=wt.getView().calculateExtentInternal(Z),st=wt.getPixelFromCoordinateInternal((0,at.rL)(_)),dt=wt.getPixelFromCoordinateInternal((0,at.w$)(_)),Ot=Math.abs(st[0]-dt[0]),Ct=Math.abs(st[1]-dt[1]),Gt=Z[0],qt=Z[1];Ot<.1*Gt||Ct<.1*qt||Ot>.75*Gt||Ct>.75*qt?this.resetExtent_():(0,at.r4)(j,_)||this.recenter_()}resetExtent_(){const Et=this.getMap(),wt=this.ovmap_,it=Et.getSize(),_=Et.getView().calculateExtentInternal(it),Z=wt.getView(),W=Math.log(7.5)/Math.LN2,j=1/(.1*Math.pow(2,W/2));(0,at.H9)(_,j),Z.fitInternal((0,pt.oJ)(_))}recenter_(){const Et=this.getMap(),wt=this.ovmap_,it=Et.getView();wt.getView().setCenterInternal(it.getCenterInternal())}updateBox_(){const Et=this.getMap(),wt=this.ovmap_;if(!Et.isRendered()||!wt.isRendered())return;const it=Et.getSize(),z=Et.getView(),_=wt.getView(),Z=this.rotateWithView_?0:-z.getRotation(),W=this.boxOverlay_,j=this.boxOverlay_.getElement(),st=z.getCenterInternal(),dt=z.getResolution(),Ot=_.getResolution(),Ct=it[0]*dt/Ot,Gt=it[1]*dt/Ot;W.setPosition(st),j&&(j.style.width=Ct+"px",j.style.height=Gt+"px",j.style.transform="rotate("+Z+"rad)")}updateBoxAfterOvmapIsRendered_(){this.ovmapPostrenderKey_||(this.ovmapPostrenderKey_=(0,a.Vx)(this.ovmap_,ot.Z.POSTRENDER,function(Et){delete this.ovmapPostrenderKey_,this.updateBox_()},this))}handleClick_(Et){Et.preventDefault(),this.handleToggle_()}handleToggle_(){this.element.classList.toggle(y.hN),this.collapsed_?(0,M.$H)(this.collapseLabel_,this.label_):(0,M.$H)(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_;const Et=this.ovmap_;if(!this.collapsed_){if(Et.isRendered())return this.viewExtent_=void 0,void Et.render();Et.updateSize(),this.resetExtent_(),this.updateBoxAfterOvmapIsRendered_()}}getCollapsible(){return this.collapsible_}setCollapsible(Et){this.collapsible_!==Et&&(this.collapsible_=Et,this.element.classList.toggle("ol-uncollapsible"),!Et&&this.collapsed_&&this.handleToggle_())}setCollapsed(Et){!this.collapsible_||this.collapsed_===Et||this.handleToggle_()}getCollapsed(){return this.collapsed_}getRotateWithView(){return this.rotateWithView_}setRotateWithView(Et){this.rotateWithView_!==Et&&(this.rotateWithView_=Et,0!==this.getMap().getView().getRotation()&&(this.rotateWithView_?this.handleRotationChanged_():this.ovmap_.getView().setRotation(0),this.viewExtent_=void 0,this.validateExtent_(),this.updateBox_()))}getOverviewMap(){return this.ovmap_}render(Et){this.validateExtent_(),this.updateBox_()}};var Ut=o(5504),zt=o(5290),rt=o(5331),It=o(4892),bt=o(5379),Xt=o(9558),Vt=o(4459),he=o(5857),le=o(3714),Ht=o(2415),ft=o(3223);const St=["mapDiv"];function kt(Yt,Et){1&Yt&&(le.TgZ(0,"div",3),le._uU(1,"+"),le.qZA())}let te=(()=>{class Yt{constructor(wt,it){this.mapSvc=wt,this.ngZone=it,this.subs=[],this.mapSize=[0,0],this.initialMapStateSet=!1,this.removePopupsOnMouseLeave=z=>{this.mapSvc.removeAllPopups(_=>"pointermove"===_.get("addEvent"))}}ngOnInit(){this.subscribeToMapState(),this.initMap(),this.subscribeToLayers()}ngAfterViewInit(){this.map.setTarget(this.mapDivView.nativeElement),this.subscribeToMapEvents(),this.map.getTargetElement().addEventListener("mouseleave",this.removePopupsOnMouseLeave)}ngAfterViewChecked(){this.updateMapSize()}ngOnDestroy(){this.subs.forEach(it=>it.unsubscribe());const wt=this.mapStateSvc.getMapState().value;wt.options.notifier="user",this.mapStateSvc.setMapState(wt),this.map&&(this.map.un("moveend",this.mapOnMoveend),this.map.un("click",this.mapOnClickMove),this.map.un("dblclick",this.mapOnDclick),this.map.getTargetElement().removeEventListener("mouseleave",this.removePopupsOnMouseLeave),this.map.getInteractions().forEach(it=>{this.map.removeInteraction(it)}))}getMapDiv(){return this.mapDivView&&this.mapDivView.nativeElement?{width:this.mapDivView.nativeElement.offsetWidth,height:this.mapDivView.nativeElement.offsetHeight}:null}updateMapSize(){const wt=this.getMapDiv();if(wt)if(wt.width===this.mapSize[0]&&wt.height===this.mapSize[1]){if(!this.initialMapStateSet){const it=this.mapStateSvc.getMapState().getValue();this.setMapState(it),this.initialMapStateSet=!0}}else this.ngZone.runOutsideAngular(()=>{this.map.updateSize(),this.mapSize=this.map.getSize()})}addUpdateLayers(wt,it,z){const _=this.mapSvc.getLayerGroups(it)[0].getLayers(),Z=z.reduce((W,j)=>W+this.mapSvc.getLayers(j).length,0);wt.length!==this.mapSvc.getLayers(it).length?this.mapSvc.setUkisLayers(wt,it,Z):this.updateLayers(wt,it,Z,_)}updateLayers(wt,it,z,_){for(const Z of wt){const W=this.mapSvc.getLayerByKey({key:"id",value:Z.id},it);if(W){W.getVisible()!==Z.visible&&((0,Vt.f$)(W,Z.visible,Z instanceof J.AO),this.mapSvc.hideAllPopups(!Z.visible,dt=>{const Ct=dt.getId().toString().split(":")[0];return!Ct||(Ct===Z.id?Ct===Z.id:void 0)})),W.getOpacity()!==Z.opacity&&(0,Vt.yv)(W,Z.opacity,Z instanceof J.AO),this.updateLayerSource(Z,W);const j=wt.indexOf(Z),st=z>0?j+z:j;W.getZIndex()!==st&&((0,Vt.n8)(W,j,_),(0,Vt.AH)(W,j,z)),this.updateLayerParamsWith(W,Z)}}}updateLayerSource(wt,it){if(wt instanceof J.AO&&it instanceof U.Z){const z=wt.custom_layer.getSource(),_=it.getSource();z&&(0,$.sq)(_)!==(0,$.sq)(z)&&(it.setSource(z),_ instanceof It.ZP&&_.dispose())}else if(wt instanceof J.AO&&wt.custom_layer instanceof S.Z&&it instanceof S.Z){const z=wt.custom_layer.getLayers().getArray();it.getLayers().getArray().forEach((Z,W)=>{const j=z[W];if(Z instanceof U.Z&&j instanceof U.Z){const st=Z.getSource(),dt=j.getSource();dt&&(0,$.sq)(st)!==(0,$.sq)(dt)&&Z.setSource(dt)}})}}updateLayerParamsWith(wt,it){switch(it.type){case J.MR:this.updateWmsLayerParamsWith(wt,it);break;case J.$6:this.updateWmtsLayerParamsWith(wt,it);break;case J.Sw:this.updateGeojsonLayerParamsWith(wt,it);break;case J.KF:this.updateWfsLayerParamsWith(wt,it);break;case J.CY:this.updateTmsLayerParamsWith(wt,it)}}updateTmsLayerParamsWith(wt,it){it instanceof J.DJ&&(0,Xt.bg)(wt,it.options.style,it.options.styleSource)}updateWfsLayerParamsWith(wt,it){it.options&&it.options.style!==wt.getStyle()&&wt.setStyle(it.options.style),wt.getSource().getUrl()!==it.url&&wt.getSource().setUrl(it.url)}updateGeojsonLayerParamsWith(wt,it){const z=wt.getSource();if(z){if(it.data){const _=this.mapSvc.geoJsonToFeatures(it.data);if(z instanceof bt.Z){const Z=z.getSource();Z.clear(),Z.addFeatures(_)}else z.clear(),z.addFeatures(_)}else it.url&&(z instanceof bt.Z?z.getSource().setUrl(it.url):z.setUrl(it.url));"object"==typeof it?.cluster&&"distance"in it.cluster&&z instanceof bt.Z&&z.setDistance(it.cluster.distance)}it?.options?.style&&wt.setStyle(it.options.style)}updateWmsLayerParamsWith(wt,it){if(wt instanceof U.Z){const _=wt.getSource().getParams(),Z=it.params;this.shallowEqual(_,Z)||wt.getSource().updateParams(Z)}}updateWmtsLayerParamsWith(wt,it){if(wt instanceof U.Z){const z=wt.getSource(),_=z.getStyle(),Z=z.getFormat(),W=z.getVersion(),j=z.getMatrixSet(),st=it.params.style,dt=it.params.format,Ot=it.params.version,Ct=it.params.matrixSetOptions.matrixSet;if(void 0!==st&&_!==st||void 0!==dt&&Z!==dt||void 0!==Ot&&W!==Ot||void 0!==Ct&&j!==Ct){const Gt=it.filtertype.toLowerCase();this.mapSvc.updateUkisLayer(it,Gt)}}}shallowEqual(wt,it){const z=Object.getOwnPropertyNames(wt),_=Object.getOwnPropertyNames(it);if(z.length!==_.length)return!1;for(const Z of z)if(wt[Z]!==it[Z])return!1;return!0}addUpdateBaseLayers(wt){const it=this.mapSvc.getLayerGroups("baselayers")[0].getLayers();if(wt.length!==this.mapSvc.getLayers("baselayers").length){const z=wt.filter(_=>!0===_.visible);0===z.length?wt[0].visible=!0:z.length>1&&(wt.forEach(_=>_.visible=!1),wt[0].visible=!0),this.mapSvc.setUkisLayers(wt,"baselayers")}else for(const z of wt){const _=this.mapSvc.getLayerByKey({key:"id",value:z.id},"baselayers");if(_){const Z=wt.indexOf(z);_.getVisible()!==z.visible&&(0,Vt.f$)(_,z.visible,z instanceof J.AO),_.getZIndex()!==Z&&(it.remove(_),it.insertAt(Z,_),(0,Vt.AH)(_,Z)),_.getOpacity()!==z.opacity&&(0,Vt.yv)(_,z.opacity,z instanceof J.AO),this.updateLayerSource(z,_),this.updateLayerParamsWith(_,z)}}}subscribeToLayers(){if(this.layersSvc){const wt=this.layersSvc.getBaseLayers().subscribe(_=>this.addUpdateBaseLayers(_));this.subs.push(wt);const it=this.layersSvc.getLayers().subscribe(_=>this.addUpdateLayers(_,"layers",["baselayers"]));this.subs.push(it);const z=this.layersSvc.getOverlays().subscribe(_=>this.addUpdateLayers(_,"overlays",["baselayers","layers"]));this.subs.push(z)}}setMapState(wt){const it=this.mapStateSvc.getLastAction().getValue();"user"===wt.options.notifier&&("setExtent"===it?this.mapSvc.setExtent(wt.extent,!0):"setState"===it?(this.mapSvc.setZoom(wt.zoom),this.mapSvc.setCenter([wt.center.lon,wt.center.lat],!0),this.mapSvc.setRotation(wt.rotation)):"setRotation"===it&&this.mapSvc.setRotation(wt.rotation))}subscribeToMapState(){if(this.mapStateSvc){const wt=this.mapStateSvc.getMapState().pipe((0,k.T)(1)).subscribe(it=>this.setMapState(it));this.subs.push(wt)}}subscribeToMapEvents(){this.mapOnMoveend=wt=>{const it=this.mapStateSvc.getMapState().getValue(),z=this.mapSvc.getZoom(),_=this.mapSvc.getCenter(!0),Z=this.mapSvc.getCurrentExtent(!0),W=this.mapSvc.getRotation(),j={lat:parseFloat(_[1]),lon:parseFloat(_[0])},st=new V.U5(z,j,{notifier:"map"},Z,it.time,it.viewAngle,W);this.mapStateSvc.setMapState(st)},this.map.on("moveend",this.mapOnMoveend),this.mapOnClickMove=wt=>{this.mapSvc.layersOnMapEvent(wt)},this.map.on(["click","pointermove"],this.mapOnClickMove),this.mapOnDclick=wt=>{this.mapSvc.removeAllPopups()},this.map.on("dblclick",this.mapOnDclick)}initMap(){const wt=this.mapSvc.createMap();this.map=wt.map;const it=this.map.getInteractions();(0,he.c)().forEach(_=>{it.getArray().find(W=>W.constructor.name===_.constructor.name)||this.map.addInteraction(_)}),this.setControls(),this.layersSvc||console.log("there is no layersSvc as defined!"),this.mapStateSvc||console.log("there is no mapStateSvc as defined!")}setControls(){const wt=[],it=[];if(this.map&&(this.map.getControls().getArray().forEach(_=>it.push(_)),this.map.getControls().clear()),this.controls&&this.map){if(!1!==this.controls.attribution){let z={collapsible:!0,collapsed:!1};"object"==typeof this.controls.attribution&&(z=Object.assign(z,this.controls.attribution));const _=new b.Z(z);wt.push(_)}if(this.controls.scaleLine){let z={};"object"==typeof this.controls.scaleLine&&(z=Object.assign(z,this.controls.scaleLine));const _=new s(z);wt.push(_)}if(!1!==this.controls.zoom){let z={};"object"==typeof this.controls.zoom&&(z=Object.assign(z,this.controls.zoom));const _=new f.Z(z);wt.push(_)}if(this.controls.mousePosition){let z={coordinateFormat:Z=>(0,I.yZ)(Z,2),projection:"EPSG:4326"};"object"==typeof this.controls.mousePosition&&(z=Object.assign(z,this.controls.mousePosition));const _=new w(z);wt.push(_)}if(this.controls.fullScreen){let z={};"object"==typeof this.controls.fullScreen&&(z=Object.assign(z,this.controls.fullScreen));const _=new Q(z);wt.push(_)}if(this.controls.overviewMap){const z=document.createElement("spawn");z.innerHTML='<clr-icon shape="world"></clr-icon>';let _={layers:[new Ut.Z({source:new zt.Z})],label:z};"object"==typeof this.controls.overviewMap&&(_=Object.assign(_,this.controls.overviewMap));const Z=new Wt(_);wt.push(Z)}if(this.controls.rotate){let z={};"object"==typeof this.controls.rotate&&(z=Object.assign(z,this.controls.rotate));const _=new rt.Z(z);wt.push(_)}wt.length&&(it.filter(_=>!wt.includes(_)).forEach(_=>wt.push(_)),this.map.getControls().extend(wt))}}static#t=this.\u0275fac=function(it){return new(it||Yt)(le.Y36(Ht.B),le.Y36(le.R0b))};static#e=this.\u0275cmp=le.Xpm({type:Yt,selectors:[["ukis-map-ol"]],viewQuery:function(it,z){if(1&it&&le.Gf(St,5),2&it){let _;le.iGM(_=le.CRH())&&(z.mapDivView=_.first)}},inputs:{layersSvc:"layersSvc",mapStateSvc:["mapState","mapStateSvc"],controls:"controls"},decls:3,vars:1,consts:[["ref","map",1,"map"],["mapDiv",""],["class","crosshair",4,"ngIf"],[1,"crosshair"]],template:function(it,z){1&it&&(le.TgZ(0,"div",0,1),le.YNc(2,kt,2,0,"div",2),le.qZA()),2&it&&(le.xp6(2),le.Q6J("ngIf",z.controls&&z.controls.crosshair))},dependencies:[ft.O5],styles:['@charset "UTF-8";:root{--ukis-crosshair-color: #ff0004;--ukis-popup-bg-color: rgb(238, 238, 238);--ukis-drop-shadow: drop-shadow(0 1px 4px rgba(0, 0, 0, .2));--ukis-ol-bbox-bg-color: rgba(255, 255, 255, .4);--ukis-ol-bbox-border-color: rgba(87, 87, 87, .4);--ukis-ol-overviewmap-left: .5em;--ukis-ol-overviewmap-bottom: 3em;--ukis-ol-control-bg-color: rgba(87, 87, 87, .6);--ukis-ol-control-border-color: rgba(87, 87, 87, .4)}.map{width:100%;height:100%;position:relative}.ol-popup{position:absolute;background-color:var(--ukis-popup-bg-color);filter:var(--ukis-drop-shadow);padding:15px;border-radius:2px;bottom:12px;left:-50px;min-width:280px;display:none;z-index:1000000}.ol-popup .ol-popup-closer{text-decoration:none;position:absolute;top:0;right:8px;cursor:pointer}.ol-popup .ol-popup-closer:after{content:"\\2716"}.ol-popup:after,.ol-popup:before{top:100%;border:solid transparent;content:" ";height:0;width:0;position:absolute;pointer-events:none}.ol-popup:after{border-top-color:var(--ukis-popup-bg-color);border-width:10px;left:48px;margin-left:-10px}.ol-popup:before{border-width:11px;left:48px;margin-left:-11px}.ol-popup.hidden{visibility:hidden}.crosshair{top:50%;left:50%;font-size:large;color:var(--ukis-crosshair-color);z-index:1;position:absolute;cursor:default}.ol-control{padding:1px;--ol-subtle-background-color: #fff6}.ol-control button{--ol-subtle-foreground-color: #fff;--ol-foreground-color: #fff;cursor:pointer;background-color:var(--ukis-ol-control-bg-color)}.ol-control button:focus{background-color:var(--ukis-ol-control-bg-color)}.ol-control button:hover{background-color:var(--ukis-ol-control-border-color)}.ol-scale-line{background:rgba(255,255,255,.4);line-height:1.375em;padding:1px}.ol-scale-line .ol-scale-line-inner{background:var(--ukis-ol-control-bg-color);border-color:var(--ukis-ol-control-bg-color);--ol-foreground-color: #fff}.ol-attribution:not(.ol-collapsed){padding:0 2px}.ol-attribution ul{font-size:.5rem}.ol-box{background-color:var(--ukis-ol-bbox-bg-color);border-color:var(--ukis-ol-bbox-border-color)!important}.ol-box.ol-drag-select{border-color:var(--clr-color-action-600, var(--fallback-color-no-clr))!important}.ol-overviewmap{left:var(--ukis-ol-overviewmap-left)!important;bottom:var(--ukis-ol-overviewmap-bottom)!important}\n'],encapsulation:2})}return Yt})()},2415:(jt,ut,o)=>{"use strict";o.d(ut,{B:()=>wt});var V=o(3714),k=o(2474),J=o(9832),$=o(5646),U=o(3436),S=o(377),b=o(9895),T=o(8485),y=o(7414),m=o(276),d=o(4658),l=o(4910),n=o(5504),h=o(5616),s=o(7178),f=o(5645),g=o(9558),a=o(6971),I=o(7670),p=o(9470),E=o(7887),F=o(8618),w=o(6328),K=o(4840),O=o(440),M=o(8428),B=o(3824),Y=o(7704);const L=class C extends K.Z{constructor(z){const _=void 0!==z.requestEncoding?z.requestEncoding:"KVP",Z=z.tileGrid;let W=z.urls;void 0===W&&void 0!==z.url&&(W=(0,B.Gk)(z.url)),super({attributions:z.attributions,attributionsCollapsible:z.attributionsCollapsible,cacheSize:z.cacheSize,crossOrigin:z.crossOrigin,interpolate:z.interpolate,projection:z.projection,reprojectionErrorThreshold:z.reprojectionErrorThreshold,tileClass:z.tileClass,tileGrid:Z,tileLoadFunction:z.tileLoadFunction,tilePixelRatio:z.tilePixelRatio,urls:W,wrapX:void 0!==z.wrapX&&z.wrapX,transition:z.transition,zDirection:z.zDirection}),this.version_=void 0!==z.version?z.version:"1.0.0",this.format_=void 0!==z.format?z.format:"image/jpeg",this.dimensions_=void 0!==z.dimensions?z.dimensions:{},this.layer_=z.layer,this.matrixSet_=z.matrixSet,this.style_=z.style,this.requestEncoding_=_,this.setKey(this.getKeyForDimensions_()),W&&W.length>0&&(this.tileUrlFunction=(0,B.Un)(W.map(this.createFromWMTSTemplate.bind(this))))}setUrls(z){this.urls=z;const _=z.join("\n");this.setTileUrlFunction((0,B.Un)(z.map(this.createFromWMTSTemplate.bind(this))),_)}getDimensions(){return this.dimensions_}getFormat(){return this.format_}getLayer(){return this.layer_}getMatrixSet(){return this.matrixSet_}getRequestEncoding(){return this.requestEncoding_}getStyle(){return this.style_}getVersion(){return this.version_}getKeyForDimensions_(){const z=this.urls?this.urls.slice(0):[];for(const _ in this.dimensions_)z.push(_+"-"+this.dimensions_[_]);return z.join("/")}updateDimensions(z){Object.assign(this.dimensions_,z),this.setKey(this.getKeyForDimensions_())}createFromWMTSTemplate(z){const _=this.requestEncoding_,Z={layer:this.layer_,style:this.style_,tilematrixset:this.matrixSet_};"KVP"==_&&Object.assign(Z,{Service:"WMTS",Request:"GetTile",Version:this.version_,Format:this.format_}),z="KVP"==_?(0,M.B)(z,Z):z.replace(/\{(\w+?)\}/g,function(st,dt){return dt.toLowerCase()in Z?Z[dt.toLowerCase()]:st});const W=this.tileGrid,j=this.dimensions_;return function(st,dt,Ot){if(!st)return;const Ct={TileMatrix:W.getMatrixId(st[0]),TileCol:st[1],TileRow:st[2]};Object.assign(Ct,j);let Gt=z;return Gt="KVP"==_?(0,M.B)(Gt,Ct):Gt.replace(/\{(\w+?)\}/g,function(qt,ne){return Ct[ne]}),Gt}}};var P=o(4876);const N=class R extends P.Z{constructor(z){super({extent:z.extent,origin:z.origin,origins:z.origins,resolutions:z.resolutions,tileSize:z.tileSize,tileSizes:z.tileSizes,sizes:z.sizes}),this.matrixIds_=z.matrixIds}getMatrixId(z){return this.matrixIds_[z]}getMatrixIds(){return this.matrixIds_}};var et=o(1308),H=o(4892),ot=o(5379),ht=o(7934),mt=o(6256),xt=o(2101),Rt=o(2658),at=o(1958),pt=o(6706),Mt=o(77),Ft=o(1821),Dt=o(9644),Wt=o(9032),Ut=o(5739),zt=o(2334),rt=o(5366),It=o(5784),bt=o(5168),Xt=o(1293),Vt=o(5992),he=o(4459);const le="type",Ht="filtertype",ft="id",St="groupID",kt="groupName",Lt="title",Yt="EPSG:4326",Et="popup";let wt=(()=>{class it{constructor(_,Z){this.app=_,this.envInjector=Z,this.hitTolerance=0,this.hitLayerCurr=null,this.hitLayerPrev=null,this.projectionChange=new Vt.x,this.dynamicPopupComponents=new Map,this.popupEvents=new Vt.x,this.filterLayerNoPopup=W=>{const j=W.get(Et);let st=!0;return j||(st=!1),j&&this.isPopupObj(j)&&!0===j.filterLayer&&(st=!1),st},this.map=new J.Z({controls:[]}),this.view=new $.ZP,this.EPSG="EPSG:3857"}createMap(_){const j=new b.Z({layers:[]});j.set(Ht,"baselayers"),j.set(Lt,"Base maps"),j.set(ft,"ID_filtertype_baselayers");const st=new b.Z({layers:[]});st.set(Ht,"layers"),st.set(Lt,"Layers"),st.set(ft,"ID_filtertype_layers");const dt=new b.Z({layers:[]});dt.set(Ht,"overlays"),dt.set(Lt,"Overlays"),dt.set(ft,"ID_filtertype_overlays"),this.viewOptions={center:(0,Y.vs)([0,0],Yt,this.EPSG),zoom:0,projection:(0,Y.U2)(this.EPSG)},this.view.constrainRotation&&(this.viewOptions.constrainRotation=this.view.constrainRotation),this.view.enableRotation&&(this.viewOptions.enableRotation=this.view.enableRotation),this.view.extent&&(this.viewOptions.extent=this.view.extent),this.view.constrainOnlyCenter&&(this.viewOptions.constrainOnlyCenter=this.view.constrainOnlyCenter),this.view.smoothExtentConstraint&&(this.viewOptions.smoothExtentConstraint=this.view.smoothExtentConstraint),this.view.getMaxResolution()&&(this.viewOptions.maxResolution=this.view.getMaxResolution()),this.view.getMinResolution()&&(this.viewOptions.minResolution=this.view.getMinResolution()),this.view.getMaxZoom()&&(this.viewOptions.maxZoom=this.view.getMaxZoom()),this.view.getMinZoom()&&(this.viewOptions.minZoom=this.view.getMinZoom()),this.view.multiWorld&&(this.viewOptions.multiWorld=this.view.multiWorld),this.view.constrainResolution&&(this.viewOptions.constrainResolution=this.view.constrainResolution),this.view.smoothResolutionConstraint&&(this.viewOptions.smoothResolutionConstraint=this.view.smoothResolutionConstraint),this.view.getResolution()&&(this.viewOptions.resolution=this.view.getResolution()),this.view.getResolutions()&&(this.viewOptions.resolutions=this.view.getResolutions()),this.view.rotation&&(this.viewOptions.rotation=this.view.rotation),this.view.zoomFactor&&(this.viewOptions.zoomFactor=this.view.zoomFactor);const Ot=new $.ZP(this.viewOptions);return this.map.getLayerGroup().getLayers().clear(),[j,st,dt].map(Ct=>this.map.addLayer(Ct)),this.map.setView(Ot),this.view=this.map.getView(),this.setProjection(this.EPSG),_&&this.map.setTarget(_),{map:this.map,view:this.view}}setHitTolerance(_){this.hitTolerance=_}getHitTolerance(){return this.hitTolerance}addBboxSelection(_,Z,W,j){Object.assign({className:"ol-drag-select",condition:_},j);const dt=new bt.Z(j);return Z&&dt.on("boxstart",Ot=>{Z(Ot)}),W&&dt.on("boxend",Ot=>{const Ct=dt.getGeometry().getExtent();W(Ct,Ot)}),this.map.addInteraction(dt),dt}getLayers(_){const Z=_.toLowerCase();let W;return this.map.getLayers().getArray().forEach(j=>{j.get(Ht)===Z&&(W=j.getLayers().getArray())}),W}getLayersFromGroup(_,Z,W=!1){const j=_.getLayers().getArray();let st=j;if(W){let dt=[].concat(j);j.forEach(Ot=>{Ot instanceof b.Z&&(dt=dt.concat(this.getLayersFromGroup(Ot,Z,!0)))}),st=dt}return Z?st.filter(dt=>dt.get(Ht)&&dt.get(Ht).toLowerCase()===Z.toLowerCase()):st}getLayerByKey(_,Z){const W=this.getLayersFromGroup(this.map.getLayerGroup(),Z),j=(0,he.fA)(W),st=[];if(j.forEach(dt=>{dt.get(_.key)&&dt.get(_.key)===_.value&&-1===st.indexOf(dt)&&st.push(dt)}),!st.length){const dt=this.getLayersFromGroup(this.map.getLayerGroup(),Z,!0);dt.length&&dt.forEach(Ot=>{Ot.get(_.key)&&Ot.get(_.key)===_.value&&-1===st.indexOf(Ot)&&st.push(Ot)})}return 1===st.length?st[0]:null}setRecursiveKey(_,Z,W=Ht){_.set(W,Z),_ instanceof b.Z&&_.getLayers().forEach(j=>{this.setRecursiveKey(j,Z,W)})}addLayer(_,Z){const W=Z.toLowerCase();let j;return this.map.getLayers().getArray().forEach(st=>{st.get(Ht)===W&&(this.isLayerInGroup(_,st)||(j=st.getLayers().getArray(),this.setRecursiveKey(_,W,Ht),j.push(_),st.setLayers(new ht.Z(j))))}),j}isLayerInGroup(_,Z){return!!Z.getLayers().getArray().filter(st=>st.get(ft)===_.get(ft)).length}getLayerGroups(_){const Z=[];return this.map.getLayers().forEach(W=>{W instanceof b.Z&&(_?W.get(Ht)&&W.get(Ht).toLowerCase()===_.toLowerCase()&&Z.push(W):Z.push(W))}),Z}addLayers(_,Z){const W=Z.toLocaleLowerCase();let j;return this.getLayerGroups(W).forEach(dt=>{dt.getLayers().getLength()>0?(j=dt.getLayers().getArray(),_.map(Ct=>{this.isLayerInGroup(Ct,dt)||j.push(Ct)})):j=_,j.forEach(Ct=>{Ct instanceof b.Z&&this.setRecursiveKey(Ct,W,Ht)}),dt.setLayers(new ht.Z(j))}),j}setLayers(_,Z){const W=Z.toLocaleLowerCase(),j=this.getLayerGroups(W);return _.forEach(st=>{st instanceof b.Z&&this.setRecursiveKey(st,Z.toLocaleLowerCase(),Ht)}),j.forEach(st=>{this.cleanUpEventListeners(st,_),st.setLayers(new ht.Z(_))}),_}cleanUpEventListeners(_,Z){const W=_.getLayers().getArray().filter(j=>!Z.map(st=>st.get(ft)).includes(j.get(ft)));this.removeListenersFromOldLayers(W),W.forEach(j=>_.getLayers().remove(j))}addEventsToLayer(_,Z,W){_.events&&(_.events.layer&&_.events.layer.forEach(j=>{Z.getListeners(j.event)||Z.on(j.event,j.listener)}),_.events.source&&_.events.source.forEach(j=>{W.getListeners(j.event)||W.on(j.event,j.listener)}))}removeListenersFromOldLayers(_){const Z=W=>{if("function"==typeof W.getSource){const j=W.getSource();j&&(j instanceof H.ZP&&j.dispose(),j.hasListener()&&j.disposeInternal())}W.hasListener()&&W.disposeInternal()};_.forEach(W=>{W instanceof b.Z?W.getLayers().forEach(j=>{Z(j)}):W instanceof U.Z&&Z(W)})}getLayerGroupForLayer(_){const Z=this.getLayersFromGroup(this.map.getLayerGroup(),null,!0);Z.push(this.map.getLayerGroup());let W=null;return Z.forEach(j=>{if(j instanceof b.Z){const dt=this.getLayersFromGroup(j).find(Ot=>Ot===_);dt&&(W={group:j,layer:dt})}}),W}removeLayerByKey(_,Z){const W=Z.toLocaleLowerCase(),j=this.getLayerByKey(_,W);if(j){const st=this.getLayerGroupForLayer(j);if(st.group){const dt=this.getLayersFromGroup(st.group).filter(Ot=>Ot!==j);st.group.setLayers(new ht.Z(dt))}}}updateLayerByKey(_,Z,W){const j=W.toLocaleLowerCase();this.map.getLayers().forEach(st=>{if(st.get(Ht)===j){const dt=st.getLayers();dt.forEach((Ot,Ct)=>{if(Ot.get(_.key)&&Ot.get(_.key)===_.value){const Gt=Z.getProperties(),qt=Z.getExtent(),ne=Z.getMaxZoom(),oe=Z.getMinZoom(),Qt=Z.getOpacity(),ge=Z.getVisible(),we=Z.getZIndex();if(Ot instanceof S.Z&&Z instanceof S.Z){const Ie=Z.getSource();Ot.setSource(Ie)}Gt&&Ot.setProperties(Gt),qt&&Ot.setExtent(qt),ne&&Ot.setMaxZoom(ne),oe&&Ot.setMinZoom(oe),Qt&&Ot.setOpacity(Qt),ge&&Ot.setVisible(ge),we&&(0,he.AH)(Ot,we),Ot.changed(),dt.setAt(Ct,Ot)}}),st.setLayers(dt)}})}removeAllLayers(_){const Z=_.toLowerCase();let W;this.map.getLayers().getArray().forEach(j=>{j.get(Ht)===Z&&(W=j.getLayers(),W.clear())})}setUkisLayers(_,Z,W){const j=Z.toLowerCase(),st=[];if(_.length<1&&"baselayers"!==j?this.removeAllLayers(j):_.forEach((dt,Ot)=>{const Ct=this.create_layers(dt);Ct&&((0,he.AH)(Ct,Ot,W),st.push(Ct))}),st.length>0)return this.setLayers(st,j),{type:j,layers:st}}setUkisLayer(_,Z){Z||(Z=_.filtertype);const W=Z.toLowerCase(),st=this.getLayers(W).find(Ot=>Ot.get(ft)===_.id),dt=this.create_layers(_);st?(this.removeLayerByKey({key:ft,value:st.get(ft)},Z),this.addLayer(dt,Z)):this.addLayer(dt,Z)}updateUkisLayer(_,Z){Z||(Z=_.filtertype);const W=Z.toLowerCase(),st=this.getLayers(W).find(Ot=>Ot.get(ft)===_.id),dt=this.create_layers(_);dt&&this.updateLayerByKey({key:ft,value:st.get(ft)},dt,Z)}create_layers(_){let Z;switch(_.type){case k.Aq:Z=this.create_xyz_layer(_);break;case k.MR:Z=this.create_wms_layer(_);break;case k.$6:Z=this.create_wmts_layer(_);break;case k.CY:Z=this.create_tms_layer(_);break;case k.Sw:Z=this.create_geojson_layer(_);break;case k.R6:Z=this.create_kml_layer(_);break;case k.KF:Z=this.create_wfs_layer(_);break;case k.ED:Z=this.create_custom_layer(_);break;case k.jn:Z=this.create_stacked_layer(_)}return Z}createOlLayerOptions(_,Z,W){W&&(_.attribution&&W.setAttributions([_.attribution]),_.continuousWorld&&(W.wrapX_=_.continuousWorld),_.popup&&!_.crossOrigin&&null!==_.crossOrigin&&this.sourceSetCross(W),(_.crossOrigin||null===_.crossOrigin)&&this.sourceSetCross(W));const j={opacity:_.opacity||1,visible:_.visible,zIndex:1,id:_.id,name:_.name,filtertype:_.filtertype,type:Z,legendImg:_.legendImg};return W&&(j.source=W),_.popup&&(j.popup=_.popup,j.className=_.id),_.maxResolution&&(j.maxResolution=_.maxResolution),_.minResolution&&(j.minResolution=_.minResolution),_.maxZoom&&(j.maxZoom=_.maxZoom),_.minZoom&&(j.minZoom=_.minZoom),_.bbox&&(j.extent=(0,Y.$A)(_.bbox.slice(0,4),Yt,this.getProjection().getCode())),j}create_xyz_layer(_){const Z={wrapX:!1};_.crossOrigin&&(Z.crossOrigin=_.crossOrigin);const W=new p.Z(Z),j=this.createOlLayerOptions(_,"xyz",W),dt=new n.Z(Object.assign(j,{preload:0,useInterimTilesOnError:!0}));return this.setSubdomains(_,dt),this.setCrossOrigin(_,dt),this.addEventsToLayer(_,dt,W),dt}create_tms_layer(_){let Z=null;if(_ instanceof k.YY)return Z=this.create_xyz_layer(_),Z.set("type","tms"),Z;if(_ instanceof k.DJ){const W=new f.Z({format:new I.Z,tileGrid:(0,a.dl)({minZoom:_.minZoom||void 0,maxZoom:_.maxZoom||void 0}),url:_.url,wrapX:!1}),j=this.createOlLayerOptions(_,"tms",W);Z=new s.Z(Object.assign(j,{declutter:!0,renderMode:"hybrid"})),this.setCrossOrigin(_,Z),this.addEventsToLayer(_,Z,W);const dt=_?.options?.style,Ot=_?.options?.styleSource;return dt&&Ot&&((0,g.h0)(Z,dt),(0,g.bg)(Z,dt,Ot).then(Ct=>{this.setSubdomains(_,Z)})),Z}}create_wms_layer(_){let Z;return"true"===_.params?.TILED||null==_.params?.TILED?Z=this.create_tiled_wms_layer(_):"false"===_.params?.TILED&&(Z=this.create_image_wms_layer(_)),Z}create_tiled_wms_layer(_){const Z={params:Object.assign({},this.keysToUppercase(_.params)),wrapX:!1};_.tileSize&&(Z.tileGrid=this.getTileGrid("default",null,_.tileSize),delete Z.params.tileSize),_.crossOrigin&&(Z.crossOrigin=_.crossOrigin);const W=new F.Z(Z),st=this.createOlLayerOptions(_,"wms",W),dt=new n.Z(Object.assign(st,{preload:0,useInterimTilesOnError:!0}));return this.setSubdomains(_,dt),this.addEventsToLayer(_,dt,W),dt}create_image_wms_layer(_){const Z={params:Object.assign({},this.keysToUppercase(_.params)),url:_.url},W=new w.Z(Z),j=this.createOlLayerOptions(_,"wms",W),dt=new l.Z(Object.assign(j,{}));return this.addEventsToLayer(_,dt,W),dt}create_wmts_layer(_){if(_ instanceof k.RC){let Z=this.getTileGrid("wmts"),W=this.EPSG;_.params.matrixSetOptions&&(W=_.params.matrixSetOptions.matrixSet,"resolutions"in _.params.matrixSetOptions?Z=this.getTileGrid("wmts",null,_.tileSize,null,_.params.matrixSetOptions.resolutions):("resolutionLevels"in _.params.matrixSetOptions||"tileMatrixPrefix"in _.params.matrixSetOptions)&&(Z=this.getTileGrid("wmts",_.params.matrixSetOptions.resolutionLevels,_.tileSize,_.params.matrixSetOptions.tileMatrixPrefix,null)),"matrixIds"in _.params.matrixSetOptions&&(Z=this.getTileGrid("wmts",null,_.tileSize,null,null,_.params.matrixSetOptions.matrixIds)));let j={url:_.url,tileGrid:Z,matrixSet:W,wrapX:!1,layer:_.params.layer,style:_.params.style};j=Object.assign({},j,_.params),_.crossOrigin&&(j.crossOrigin=_.crossOrigin);const st=new L(j),dt=this.createOlLayerOptions(_,"wmts",st),Ct=new n.Z(Object.assign(dt,{}));return this.setSubdomains(_,Ct),this.setCrossOrigin(_,Ct),this.addEventsToLayer(_,Ct,st),Ct}console.error(`layer with id: ${_.id} and type ${_.type} is no instanceof WmtsLayer!`)}create_wfs_layer(_){let Z=null;Z=0===_.url.indexOf("http://")||0===_.url.indexOf("https://")?new URL(_.url):new URL(_.url,window.location.origin),Z.searchParams.set("srsname",this.EPSG);const W=new et.Z({format:new mt.Z,url:Z.toString()}),j=this.createOlLayerOptions(_,"wfs",W),st={};_.options&&Object.assign(st,_.options);const dt=new h.Z(Object.assign(j,st));return _.cluster&&this.setCluster(_,dt,W,{}),this.setSubdomains(_,dt),this.setCrossOrigin(_,dt),this.addEventsToLayer(_,dt,W),dt}create_geojson_layer(_){let Z;_.data?Z=new et.Z({features:this.geoJsonToFeatures(_.data),format:new mt.Z,wrapX:!1}):_.url&&(Z=new et.Z({url:_.url,format:new mt.Z({dataProjection:Yt,featureProjection:this.EPSG}),wrapX:!1}));const W=this.createOlLayerOptions(_,"geojson",Z),j={};_.options&&Object.assign(j,_.options);const st=new h.Z(Object.assign(W,j));return _.cluster&&this.setCluster(_,st,Z,{}),this.setCrossOrigin(_,st),this.addEventsToLayer(_,st,Z),st}create_kml_layer(_){let Z;_.data?Z=new et.Z({features:new xt.ZP({extractStyles:!0}).readFeatures(_.data,{dataProjection:Yt,featureProjection:this.EPSG}),format:new xt.ZP,wrapX:!1}):_.url&&(Z=new et.Z({url:_.url,format:new xt.ZP({extractStyles:!0,crossOrigin:_.crossOrigin&&null===_.crossOrigin?_.crossOrigin:"anonymous"}),wrapX:!1}));const W=this.createOlLayerOptions(_,"kml",Z),j={};_.options&&Object.assign(j,_.options);const st=new h.Z(Object.assign(W,j));return _.cluster&&this.setCluster(_,st,Z,{}),this.setCrossOrigin(_,st),this.addEventsToLayer(_,st,W.source),st}setCrossOrigin(_,Z){if(Z instanceof S.Z){const W=Z.getSource();_.popup&&!_.crossOrigin&&null!==_.crossOrigin&&this.sourceSetCross(W),(_.crossOrigin||null===_.crossOrigin)&&this.sourceSetCross(W)}}setCluster(_,Z,W,j){if(_.cluster){const st={};"object"==typeof _.cluster&&Object.assign(st,_.cluster),st.source=W;const dt=new ot.Z(st);Z.setSource(dt),Z.setStyle(Ot=>{const Ct=Ot.get("features").length;let Gt=j[Ct];return Gt||(Gt=new Wt.ZP({image:new rt.Z({radius:10,stroke:new It.Z({color:"#fff"}),fill:new zt.Z({color:"#3399CC"})}),text:new Ut.Z({text:Ct.toString(),fill:new zt.Z({color:"#fff"})})}),j[Ct]=Gt),Gt})}}setSubdomains(_,Z){if(_ instanceof k.DJ||_ instanceof k.YY){const W=Z.getSource();if(_.subdomains){if("wfs"===_.type&&W instanceof et.Z)_.url=_.url.replace("{s}",`${_.subdomains[0]}-${_.subdomains[_.subdomains.length-1]}`),W.setUrl(_.url);else if(!(W instanceof et.Z)){const j=_.subdomains.map(st=>_.url.replace("{s}",`${st}`));W.setUrls(j)}}else W.setUrl(_.url)}}sourceSetCross(_){(_ instanceof O.ZP||_ instanceof K.Z||_ instanceof E.Z)&&(_.crossOrigin="anonymous",_.crossOrigin_="anonymous")}create_custom_layer(_){if(_.custom_layer){const Z=_.custom_layer;if(Z instanceof S.Z){const j=Z.getSource();_.attribution&&j.setAttributions([_.attribution]),j.wrapX_=!!_.continuousWorld&&_.continuousWorld,this.setCrossOrigin(_,Z),this.addEventsToLayer(_,Z,j),j instanceof H.ZP&&Z.on("change:source",st=>{st.oldValue.dispose()})}else Z instanceof b.Z?Z.getLayers().forEach(j=>{j.set(St,_.id),j.set(kt,_.name);const st=`${_.id}_${(0,Xt.sq)(j)}`;if(j.get(ft)||j.set(ft,st),j instanceof S.Z&&(this.setCrossOrigin(_,j),this.addEventsToLayer(_,j,j.getSource())),_.popup&&!j.get(Et)&&(j.set(Et,_.popup),"ol-layer"===j.getClassName()&&(j.className_=st)),_.bbox){const dt=(0,Y.$A)(_.bbox.slice(0,4),Yt,this.getProjection().getCode());j.setExtent(dt)}}):console.error(`The custom_layer of ${_.id} in not a openlayers Layer`);_.maxResolution&&Z.setMaxResolution(_.maxResolution),_.minResolution&&Z.setMinResolution(_.minResolution),_.maxZoom&&Z.setMaxZoom(_.maxZoom),_.minZoom&&Z.setMinZoom(_.minZoom);const W={type:"custom",name:_.name,id:_.id,visible:_.visible,legendImg:_.legendImg,opacity:_.opacity||1,zIndex:1};if(_.popup&&!(Z instanceof b.Z)&&(W.popup=_.popup,Z.className_=_.id),_.bbox){const j=(0,Y.$A)(_.bbox.slice(0,4),Yt,this.getProjection().getCode());Z.setExtent(j)}return Z.setProperties(W),Z}console.log("attribute custom_layer not set on layer type custom!",_)}create_stacked_layer(_){if(_ instanceof k.WQ){const Z=_.layers.map(dt=>(dt.visible=_.visible,dt.opacity=_.opacity,_.popup&&(dt.popup=_.popup),_.events&&(dt.events=_.events),this.create_layers(dt))),W=this.createOlLayerOptions(_,"custom");return Z.forEach(dt=>{dt.set(St,_.id),dt.set(kt,_.name)}),new b.Z(Object.assign(W,{layers:Z}))}console.log("layer is not of type StackedLayer!",_)}resolutionsFromExtent(_,Z,W){const j=Z,st=(0,Mt.Cr)(_),dt=(0,Mt.dz)(_),Ot=Math.max(dt/W,st/W),Ct=j+1,Gt=new Array(Ct);for(let qt=0;qt<Ct;++qt)Gt[qt]=Ot/Math.pow(2,qt);return Gt}matrixIdsFromResolutions(_,Z){return Array.from(Array(_).keys()).map(W=>Z?`${Z}:${W}`:W)}getTileGrid(_="default",Z,W,j,st,dt){const Ot=Z||Ft.e,Ct=W||Ft.S,Gt=j||"",qt=this.getProjection().getExtent(),ne=this.resolutionsFromExtent(qt,Ot,Ct),oe=this.matrixIdsFromResolutions(ne.length,Gt),Qt={extent:qt,origin:(0,Mt.rL)(qt),resolutions:st||ne,tileSize:[Ct,Ct]};return"wmts"===_?(Qt.matrixIds=dt||oe,new N(Qt)):"default"===_?new P.Z(Qt):void 0}isPopupObj(_){return _&&"object"==typeof _&&!Array.isArray(_)}isPopupObjMove(_){return this.isPopupObj(_)&&"move"===_.event}isPopupObjClick(_){return this.isPopupObj(_)&&"click"===_.event}isPopupObjArray(_){return Array.isArray(_)&&_.length&&this.isPopupObj(_[0])}isPopupStringArray(_){return Array.isArray(_)&&_.length&&"string"==typeof _[0]}eventIsBrowserEvent(_,Z){return"move"===_&&"pointermove"===Z.type||"click"===_&&"click"===Z.type||void 0}layersOnMapEvent(_){let Z=!1;const W=this.map.getAllLayers();let j=W.length;const st=new Map;let dt=null;for(;j--;){const Ot=W[j];let Ct=Ot.getVisible(),Gt=Ot.getOpacity();const qt=Ot.get(St);if(qt){const oe=this.getLayerByKey({key:ft,value:qt});Ct=oe.getVisible(),Gt=oe.getOpacity()}const ne=Ot.get(Et);if(this.checkForPopupAsObservable(Ot,Ct,Gt,ne,st),Ct&&0!==Gt&&this.filterLayerExtent(Ot,_.pixel)&&!ne)break;if(this.filterLayerNoPopup(Ot)&&Ot.getData&&Ot.getData(_.pixel)&&this.checkIsRaster(Ot)){const oe=Ot.getData(_.pixel);let Qt;if((oe instanceof Uint8ClampedArray||oe instanceof Uint8Array||oe instanceof Float32Array)&&(Qt=oe[3]),Qt||oe instanceof DataView){dt={layer:Ot,color:oe};break}}else if(this.filterLayerNoPopup(Ot)&&this.filterLayerExtent(Ot,_.pixel)&&this.checkIsVector(Ot)){const oe=this.map.getFeaturesAtPixel(_.pixel,{layerFilter:Qt=>Ot.get(ft)===Qt.get(ft)});if(oe.length){dt={layer:Ot,feature:oe[0]};break}}}if(dt){const Ot=dt.layer.get(Et);this.hitLayerCurr=dt.layer.get(ft),this.hitLayerPrev||(this.hitLayerPrev=this.hitLayerCurr),(dt.color||dt.feature)&&(Z=!0),this.hitLayerPrev&&this.hitLayerPrev!==this.hitLayerCurr&&(Z=!1,this.hitLayerPrev=this.hitLayerCurr),this.checkTopLayerEvent(_,Ot)&&this.layerOnEvent(_,dt.layer,dt.color,dt.feature)}Z?this.map.getTargetElement().style.cursor="pointer":(this.publishNullPropertiesAsObservable(st,_),this.removeAllPopups(Ot=>"pointermove"===Ot.get("addEvent")),this.map.getTargetElement().style.cursor="")}checkForPopupAsObservable(_,Z,W,j,st){Z&&0!==W&&j&&(this.isPopupObj(j)&&j.asObservable?st.set(_.get(ft),_):this.isPopupObjArray(j)&&j.forEach(dt=>{dt.asObservable&&st.set(_.get(ft),_)}))}publishNullPropertiesAsObservable(_,Z){_.size&&_.forEach(W=>{const j=W.get(Et),st=[];this.isPopupObj(j)&&j.asObservable?st.push(j):this.isPopupObjArray(j)&&j.forEach(dt=>{dt.asObservable&&st.push(dt)}),st.forEach(dt=>{this.eventIsBrowserEvent(dt.event||"click",Z)&&this.popupEvents.next({popupObj:dt,popupParams:{layerId:W.get(ft),layerName:W.get("name"),mapEvent:Z,layer:W,properties:null}})})})}checkTopLayerEvent(_,Z){let W=null;const j=(st,dt)=>{dt.event?this.eventIsBrowserEvent(dt.event,st)&&this.isPopupObjClick(dt)?W="click":this.eventIsBrowserEvent(dt.event,st)&&this.isPopupObjMove(dt)&&(W="move"):"click"===st.type&&(W="click")};return"boolean"==typeof Z?!0===Z&&"click"===_.type&&(W="click"):this.isPopupStringArray(Z)?"click"===_.type&&(W="click"):this.isPopupObjArray(Z)?Z.map(st=>{j(_,st)}):j(_,Z),W}checkIsRaster(_){return _ instanceof d.Z||_ instanceof y.Z}checkIsVector(_){return _ instanceof m.Z&&!this.checkIsRaster(_)}layerOnEvent(_,Z,W,j){this.checkIsRaster(Z)?this.rasterOnEvent(_,Z,W):this.checkIsVector(Z)&&this.vectorOnEvent(_,Z,j)}filterLayerExtent(_,Z){let W=!0;const j=_.getExtent();if(j){const st=this.map.getCoordinateFromPixel(Z);(0,Mt.b8)(j,st)||(W=!1)}return W}vectorOnEvent(_,Z,W){if(Z&&W){const j=Z.get(Et);let st={};const Ot=W.getProperties().features;if(Ot&&1===Ot.length)st=Ot[0].getProperties();else{if(Ot&&Ot.length>1){if("click"===_.type){const Ct=this.getFeaturesExtent(Ot);return this.setExtent(Ct),!1}return!0}st=W.getProperties()}this.prepareAddPopup(Z,_,j,W,st)}}rasterOnEvent(_,Z,W){const j=Z.get(Et);j&&this.prepareAddPopup(Z,_,j,null,null,W)}prepareAddPopup(_,Z,W,j,st,dt){const Ot=_.getProperties(),Ct={layerId:Ot.id,layerName:Ot.name||Ot[kt]||null,mapEvent:Z,layer:_,properties:st?Object.assign({},st):{}};Ct.properties?.geometry&&delete Ct.properties.geometry,j&&(Ct.feature=j),dt&&(Ct.color=dt);const Gt=oe=>{oe&&oe.filterkeys&&(Ct.properties=Object.keys(Ct.properties).filter(Qt=>oe.filterkeys.includes(Qt)).reduce((Qt,ge)=>(Qt[ge]=Ct.properties[ge],Qt),{}))};this.isPopupStringArray(W)?Ct.properties=Object.keys(Ct.properties).filter(oe=>W.includes(oe)).reduce((oe,Qt)=>(oe[Qt]=Ct.properties[Qt],oe),{}):this.isPopupObjArray(W)?Gt(W.find(Qt=>this.eventIsBrowserEvent(Qt.event,Z))):this.isPopupObj(W)&&Gt(W);const qt=oe=>{if(oe.properties){const Qt=Object.keys(oe.properties);Array.isArray(Qt)&&(Ct.properties=Object.keys(Ct.properties).reduce((ge,we)=>{const Ie=oe.properties[we];return Ie?ge[Ie]=Ct.properties[we]:ge[we]=Ct.properties[we],ge},{}))}};this.isPopupObjArray(W)?W.forEach(oe=>{this.eventIsBrowserEvent(oe.event,Z)&&qt(oe)}):this.isPopupObj(W)&&qt(W);const ne=oe=>{"asyncPopup"in oe?oe.asyncPopup(Ct,Qt=>{oe.asObservable?this.publishPopupEvent(oe,Ct,Qt):this.addPopup(Ct,oe,Qt,oe.event,oe.single)}):oe.asObservable?this.publishPopupEvent(oe,Ct):this.addPopup(Ct,oe,null,oe.event,oe.single)};"boolean"==typeof W||this.isPopupStringArray(W)?this.addPopup(Ct):this.isPopupObjArray(W)?W.forEach(oe=>{this.eventIsBrowserEvent(oe.event,Z)&&ne(oe)}):W&&ne(W)}publishPopupEvent(_,Z,W){W&&(Z.properties=Object.assign(Z.properties,W)),this.popupEvents.next({popupObj:_,popupParams:Z})}addPopup(_,Z,W,j,st){const dt=_.layer.get(Et),Ot=_.layer.get(ft),Ct="popup_move_ID",Gt="move_ID_L_F",qt=this.getPopups().find(Qt=>Qt.getId()===Ct),ne=_.mapEvent;let oe=null;if("move"===j&&(_.color?oe=`${Ot}:${_.color.toString()}`:_.feature?oe=`${Ot}:${(0,Xt.sq)(_.feature)}`:_.layer&&(oe=`${Ot}:${(0,Xt.sq)(_.layer)}`)),"move"===j&&"pointermove"===ne.type&&qt){let Qt;const ge=_.feature;if(Qt=ge&&"Point"===ge.getGeometry()?.getType()?ge.getGeometry().getCoordinates():ne.coordinate,oe!==qt.get(Gt)){const we=this.createPopupContainer(qt,_,Z,W,j);qt.setElement(we)}qt.setPosition(Qt),qt.getElement().parentElement.style.zIndex="1"}else if("pointermove"!==ne.type||j)if("pointermove"===ne.type&&"click"===j)qt&&this.removeAllPopups(Qt=>"pointermove"===Qt.get("addEvent"));else{let Qt=null;Qt="move"===j?Ct:_.feature?`${Ot}:${(0,Xt.sq)(_.feature)}`:_.layer?`${Ot}:${(0,Xt.sq)(_.layer)}`:`${Ot}:popup_${(new Date).getTime()}`;const ge={id:Qt,autoPan:{animation:{duration:250}},positioning:"bottom-center",stopEvent:!0,insertFirst:!1};let we=ge;if(this.isPopupObjArray(dt)){const Ze=dt.find(Ce=>this.eventIsBrowserEvent(Ce.event,ne));Ze.options&&(we=Object.assign(ge,Ze.options))}else this.isPopupObj(dt)&&dt.options&&(we=Object.assign(ge,dt.options));const Ie=new T.Z(we);oe&&Ie.set(Gt,oe),st&&this.removeAllPopups(Ze=>{const q=Ze.getId().toString().split(":")[0];return!q||(Ot===q?Ot===q:void 0)});const De=this.getPopups().find(Ze=>Ze.getId()===Ie.getId()&&Ie.getId()!==Ct);De&&(this.map.removeOverlay(De),this.destroyDynamicPopupComponent(De.getId().toString()));const je=this.createPopupContainer(Ie,_,Z,W,j);let Ke;Ie.getId()===Ct?Ie.set("addEvent","pointermove"):Ie.set("addEvent",ne.type),Ie.set(le,Et),Ie.setElement(je);const Ye=_.feature;Ke=Ye&&"Point"===Ye.getGeometry()?.getType()?Ye.getGeometry().getCoordinates():ne.coordinate,Ie.setPosition(Ke),qt&&"move"===j||this.map.addOverlay(Ie)}else qt&&this.removeAllPopups(Qt=>"pointermove"===Qt.get("addEvent"))}createPopupContainer(_,Z,W,j,st){const dt=document.createElement("div");dt.className="ol-popup-content";let Ot="";if(W?.popupFunction){const Gt=W.popupFunction(Z);Ot="string"==typeof Gt?Gt:this.createPopupHtml(Gt)}else j?Ot="string"==typeof j?j:this.createPopupHtml(j):Object.keys(Z.properties).length&&(Ot=this.createPopupHtml(Z.properties));if(dt.innerHTML=Ot,W?.dynamicPopup){const Gt=_.getId().toString();this.destroyDynamicPopupComponent(Gt),this.createDynamicPopupComponent(Gt,dt,Z,W)}const Ct=document.createElement("div");if(Ct.className="ol-popup",Ct.id=_.getId().toString(),Ct.style.display="block",!st||"move"!==st){const Gt=document.createElement("a");Gt.className="ol-popup-closer",Ct.appendChild(Gt);const qt=()=>{Gt.removeEventListener("click",qt,!1),this.map.removeOverlay(_),this.destroyDynamicPopupComponent(_.getId().toString())};Gt.addEventListener("click",qt,!1)}return Ct.appendChild(dt),Ct}removeAllPopups(_){let Z=this.getPopups();_&&(Z=this.getPopups().filter(_)),Z.forEach(W=>{W.get(le)===Et&&(this.map.removeOverlay(W),this.destroyDynamicPopupComponent(W.getId().toString()))})}hideAllPopups(_,Z){let W=this.getPopups();Z&&(W=this.getPopups().filter(Z)),W.forEach(j=>{if(j.get(le)===Et){const st=j.getElement();_?st.classList.add("hidden"):st.classList.remove("hidden")}})}createPopupHtml(_){let Z="<table>";for(const W in _)_.hasOwnProperty(W)&&(Z+='<tr><td style="vertical-align: top; padding-right: 7px;"><b>'+W+": </b></td><td>"+_[W]+"</td></tr>");return Z+="</table>",Z}getPopups(){const _=[];return this.map.getOverlays().getArray().slice(0).forEach(Z=>{Z.get(le)===Et&&_.push(Z)}),_}destroyDynamicPopupComponent(_){this.dynamicPopupComponents.has(_)&&(this.dynamicPopupComponents.get(_).destroy(),this.dynamicPopupComponents.delete(_))}createDynamicPopupComponent(_,Z,W,j){const st=(0,V.LMc)(j.dynamicPopup.component,{environmentInjector:this.envInjector,hostElement:Z});if(j.dynamicPopup.getAttributes){const dt=j.dynamicPopup.getAttributes(W);for(const Ot in dt)"undefined"!==dt[Ot]&&(st.instance[Ot]=dt[Ot])}this.app.attachView(st.hostView),this.dynamicPopupComponents.set(_,st)}setExtent(_,Z,W){const j=(0,Y.U2)(Z?Yt:this.EPSG),st=(0,Y.$A)(_.slice(0,4),j,this.getProjection().getCode()),dt={size:this.map.getSize()};return W&&Object.assign(dt,W),this.map.getView().fit(st,W),st}setCenter(_,Z){const W=(0,Y.U2)(Z?Yt:this.EPSG),j=(0,Y.vs)(_,W,this.getProjection().getCode());return this.map.getView().setCenter(j),j}getCenter(_){const Z=(0,Y.U2)(_?Yt:this.EPSG),W=(0,Y.U2)(this.getProjection().getCode());return(0,Y.vs)(this.map.getView().getCenter(),W,Z)}getFeaturesExtent(_,Z){const W=_[0].getGeometry().getExtent().slice(0);if(_.forEach(j=>{(0,Mt.l7)(W,j.getGeometry().getExtent())}),Z){const j=(0,Y.U2)(Yt);return(0,Y.$A)(W,this.getProjection().getCode(),j)}return W}getCurrentExtent(_){const Z=(0,Y.U2)(_?Yt:this.EPSG),W=this.map.getView().calculateExtent();return(0,Y.$A)(W,this.getProjection().getCode(),Z)}setRotation(_){const Z=this.map.getView();_*=Math.PI/180,Z.setRotation(_)}getRotation(){return this.map.getView().getRotation()*(180/Math.PI)}setZoom(_){this.map.getView().setZoom(_)}getZoom(){return this.map.getView().getZoom()}zoomInOut(_,Z){const W=this.map.getView();if(!W)return;const j=Z?.zoomStep||1,st="+"===_?j:-1*j,dt=W.getZoom();if(void 0!==dt){const Ot=W.getConstrainedZoom(dt+st);W.getAnimating()&&W.cancelAnimations(),W.animate({zoom:Ot,duration:Z?.duration||250,easing:Z?.easing||Dt.Vv},Ct=>{Z.callback&&Z.callback(Ct)})}}geoJsonToFeature(_){return new mt.Z({dataProjection:Yt,featureProjection:this.EPSG}).readFeature(_)}geoJsonToFeatures(_){return new mt.Z({dataProjection:Yt,featureProjection:this.EPSG}).readFeatures(_)}getProjection(){return this.map.getView().getProjection()}reprojectFeatures(_,Z,W){_.getFeatures().forEach(j=>{j.getGeometry().transform(Z,W)})}setProjection(_){if(_){let Z={};if(this.viewOptions&&(Z=this.viewOptions,Z.minResolution=void 0,Z.maxResolution=void 0,Z.resolution=void 0,Z.resolutions=void 0),_ instanceof Rt.Z){Z.projection=_;const st=(0,Y.vs)(this.map.getView().getCenter(),this.map.getView().getProjection(),_);Z.center=st,Z.zoom=this.map.getView().getZoom()}else"string"==typeof _&&(Z.projection=_,Z.center=this.map.getView().getCenter(),Z.zoom=this.map.getView().getZoom());const W=new $.ZP(Z),j=this.EPSG;this.EPSG=W.getProjection().getCode(),this.map.setView(W),this.view=this.map.getView(),this.map.getLayers().getArray().forEach(st=>{st.getLayers().getArray().forEach(dt=>{if(dt instanceof S.Z){let Ot=dt.getSource();for(;Ot.source;)Ot=Ot.source;Ot instanceof et.Z&&this.reprojectFeatures(Ot,j,this.EPSG)}})}),this.projectionChange.next(this.getProjection())}}registerProjection(_){pt.Z.defs(_.code,_.proj4js),(0,at.z2)(pt.Z)}getOlProjection(_){return new Rt.Z({code:_.code,extent:_.extent?_.extent:void 0,worldExtent:_.worldExtent?_.worldExtent:void 0,global:!!_.global&&_.global,units:_.units?_.units:void 0})}keysToUppercase(_){return Object.keys(_).forEach(Z=>{const W=Z.toUpperCase();W!==Z&&(_[W]=_[Z],delete _[Z])}),_}static#t=this.\u0275fac=function(Z){return new(Z||it)(V.LFG(V.z2F),V.LFG(V.lqb))};static#e=this.\u0275prov=V.Yz7({token:it,factory:it.\u0275fac,providedIn:"root"})}return it})()},9631:(jt,ut,o)=>{"use strict";o.d(ut,{oC:()=>U,BR:()=>V.B});var V=o(2415),J=(o(2227),o(3223)),$=o(3714);let U=(()=>{class S{static#t=this.\u0275fac=function(y){return new(y||S)};static#e=this.\u0275mod=$.oAB({type:S});static#i=this.\u0275inj=$.cJS({providers:[V.B],imports:[J.ez]})}return S})()},4459:(jt,ut,o)=>{"use strict";o.d(ut,{UT:()=>W,qS:()=>Gt,n8:()=>d,fA:()=>J,yv:()=>y,f$:()=>T,AH:()=>m,vK:()=>$,f_:()=>ft});var V=o(9895),k=o(8287);function J(q){let tt=[];for(const _t of q)if(_t instanceof V.Z){const At=J(_t.getLayers().getArray());tt=Array.prototype.concat(tt,At)}else tt.push(_t);return tt}function $(q,tt,_t,vt=!1){const At=tt.getContext("2d");if(!At)throw new Error("The target-canvas needs to use a 2d-context.");if(!tt.width||!tt.height)throw new Error("TargetCanvas: width or height have not been set.");At instanceof CanvasRenderingContext2D&&At.clearRect(0,0,tt.width,tt.height);const $t=q.getSize();tt.width=$t[0],tt.height=$t[1];const re=J(q.getLayers().getArray()),ae=[];for(const ye of re)if(ye.getVisible()&&ye.getOpacity()>0){const Te=ye.on("postrender",Oe=>{const Ue=Oe.context.canvas;At instanceof CanvasRenderingContext2D&&(At.beginPath(),At.drawImage(Ue,0,0,Ue.clientWidth,Ue.clientHeight,0,0,tt.width,tt.height),At.closePath())});Array.isArray(Te)?Te.map(Oe=>ae.push(Oe)):ae.push(Te)}vt?q.on("rendercomplete",ye=>{_t(tt)}):q.once("rendercomplete",ye=>{for(const Te of ae)(0,k.B)(Te);_t(tt)}),q.renderSync()}function T(q,tt,_t=!1){q.setVisible(tt),!_t&&q instanceof V.Z&&q.getLayers().forEach(At=>{T(At,tt)})}function y(q,tt,_t=!1){q.setOpacity(tt),!_t&&q instanceof V.Z&&q.getLayers().forEach(At=>{y(At,tt)})}function m(q,tt,_t){q.setZIndex(_t>0?tt+_t:tt),q instanceof V.Z&&q.getLayers().forEach($t=>{m($t,tt,_t)})}function d(q,tt,_t){_t.remove(q),_t.insertAt(tt,q)}var l=o(4910),n=o(7704);const h=q=>{let tt=[];for(const _t of q){let vt;vt=Array.isArray(_t[0])?h(_t):_t,tt=Array.prototype.concat(tt,vt)}return tt},f=(q,tt)=>Math.log(q)/Math.log(tt),g=(q,tt)=>f(q,tt)%1==0,E=(q,tt,_t)=>{const vt=q.createShader(tt);if(!vt)throw new Error("No shader was created");if(q.shaderSource(vt,_t),q.compileShader(vt),!q.getShaderParameter(vt,q.COMPILE_STATUS))throw q.deleteShader(vt),new Error(`An error occurred compiling the shader: ${q.getShaderInfoLog(vt)}.    \n\n Shader code: ${_t}`);return vt},O=(q,tt)=>{q.useProgram(tt)},A=(q,tt,_t)=>{q.bindBuffer(q.ARRAY_BUFFER,_t.buffer),q.enableVertexAttribArray(tt),q.vertexAttribPointer(tt,_t.vectorSize,_t.type,_t.normalize,_t.stride,_t.offset)},ot=(q,tt,_t,vt)=>{if(_t>q.getParameter(q.MAX_COMBINED_TEXTURE_IMAGE_UNITS))throw new Error(`There are only ${q.getParameter(q.MAX_COMBINED_TEXTURE_IMAGE_UNITS)} texture bind points, but you tried to bind to point nr. ${_t}.`);7===_t&&console.error(`You are about to bind to the dedicated texture-construction bind point (nr. ${_t}).\n        If after this call another texture is built, your shader will now use that new texture instead of this one!\n        Consider using another bind point.`),q.activeTexture(q.TEXTURE0+_t),q.bindTexture(q.TEXTURE_2D,tt),q.uniform1i(vt,_t)},pt=(q,tt,_t)=>{const vt=q.getUniformLocation(tt,_t);if(null===vt)throw new Error(`Couldn't find uniform ${_t} in program.`);return vt},Mt=(q,tt,_t,vt)=>{switch(_t){case"bool":case"int":q.uniform1i(tt,vt[0]);break;case"bvec2":case"ivec2":q.uniform2i(tt,vt[0],vt[1]);break;case"bvec3":case"ivec3":q.uniform3i(tt,vt[0],vt[1],vt[2]);break;case"bvec4":case"ivec4":q.uniform4i(tt,vt[0],vt[1],vt[2],vt[3]);break;case"bool[]":case"int[]":q.uniform1iv(tt,vt);break;case"bvec2[]":case"ivec2[]":q.uniform2iv(tt,vt);break;case"bvec3[]":case"ivec3[]":q.uniform3iv(tt,vt);break;case"bvec4[]":case"ivec4[]":q.uniform4iv(tt,vt);break;case"float":q.uniform1f(tt,vt[0]);break;case"vec2":q.uniform2f(tt,vt[0],vt[1]);break;case"vec3":q.uniform3f(tt,vt[0],vt[1],vt[2]);break;case"vec4":q.uniform4f(tt,vt[0],vt[1],vt[2],vt[3]);break;case"float[]":q.uniform1fv(tt,vt);break;case"vec2[]":q.uniform2fv(tt,vt);break;case"vec3[]":q.uniform3fv(tt,vt);break;case"vec4[]":q.uniform4fv(tt,vt);break;case"mat2":q.uniformMatrix2fv(tt,!1,vt);break;case"mat3":q.uniformMatrix3fv(tt,!1,vt);break;case"mat4":q.uniformMatrix4fv(tt,!1,vt);break;default:throw Error(`Type ${_t} not implemented.`)}};class Ut{constructor(tt,_t,vt){this.vertexShaderSource=_t,this.fragmentShaderSource=vt,this.program=((q,tt,_t)=>{const vt=q.createProgram();if(!vt)throw new Error("No program was created");const At=E(q,q.VERTEX_SHADER,tt),$t=E(q,q.FRAGMENT_SHADER,_t);if(q.attachShader(vt,At),q.attachShader(vt,$t),q.linkProgram(vt),q.detachShader(vt,At),q.detachShader(vt,$t),q.deleteShader(At),q.deleteShader($t),!q.getProgramParameter(vt,q.LINK_STATUS))throw q.deleteProgram(vt),new Error("Unable to initialize the shader program: "+q.getProgramInfoLog(vt));return vt})(tt,_t,vt),this.id=function(q){let tt=0;for(const _t of q)tt+=_t.charCodeAt(0);return`${tt}`}(_t+vt)}}class zt{constructor(tt,_t,vt,At,$t){this.location=pt(tt,_t.program,vt),this.type=At,this.value=$t,this.variableName=vt}}class rt{constructor(tt,_t,vt,At,$t){this.location=pt(tt,_t.program,vt),this.texture=At instanceof HTMLImageElement||At instanceof HTMLCanvasElement?((q,tt)=>{const _t=q.createTexture();if(!_t)throw new Error("No texture was created");q.activeTexture(q.TEXTURE0+7),q.bindTexture(q.TEXTURE_2D,_t);const At=q.RGBA,$t=q.RGBA,re=q.UNSIGNED_BYTE;let ae,ye;return q.texImage2D(q.TEXTURE_2D,0,At,$t,re,tt),q.generateMipmap(q.TEXTURE_2D),q.bindTexture(q.TEXTURE_2D,null),tt instanceof HTMLImageElement?(ae=tt.naturalWidth,ye=tt.naturalHeight):(ae=tt.width,ye=tt.height),{texture:_t,level:0,internalformat:At,format:$t,type:re,width:ae,height:ye,border:0}})(tt,At):At,this.bindPoint=$t,this.variableName=vt}}class It{constructor(tt,_t,vt,At,$t){this.location=pt(tt,_t.program,vt),this.texture=((q,tt)=>{const _t=tt.length,vt=tt[0].length,At=tt[0][0].length;if(!g(vt,2)||!g(_t,2))throw new Error(`Texture-data-dimensions must be a power of two, but are ${vt} x ${_t}`);if(4!==At)throw new Error(`Expecting 4 channels, but ${At} provided`);const $t=q.createTexture();if(!$t)throw new Error("No texture was created");q.activeTexture(q.TEXTURE0+7),q.bindTexture(q.TEXTURE_2D,$t);const ye=q.RGBA,Te=q.RGBA,Oe=q.UNSIGNED_BYTE,Fe=new Uint8Array(h(tt));return 4!==At&&q.pixelStorei(q.UNPACK_ALIGNMENT,1),q.texImage2D(q.TEXTURE_2D,0,ye,vt,_t,0,Te,Oe,Fe),q.texParameteri(q.TEXTURE_2D,q.TEXTURE_WRAP_S,q.CLAMP_TO_EDGE),q.texParameteri(q.TEXTURE_2D,q.TEXTURE_WRAP_T,q.CLAMP_TO_EDGE),q.texParameteri(q.TEXTURE_2D,q.TEXTURE_MIN_FILTER,q.NEAREST),q.texParameteri(q.TEXTURE_2D,q.TEXTURE_MAG_FILTER,q.NEAREST),q.bindTexture(q.TEXTURE_2D,null),{texture:$t,level:0,internalformat:ye,format:Te,type:Oe,width:vt,height:_t,border:0}})(tt,At),this.bindPoint=$t,this.variableName=vt}}class bt{constructor(tt,_t,vt,At,$t="triangles"){let re;switch($t){case"triangles":re=tt.TRIANGLES;break;case"lines":re=tt.LINES;break;case"points":re=tt.POINTS;break;default:throw new Error(`Invalid drawing mode ${$t}`)}this.location=((q,tt,_t)=>{const vt=q.getAttribLocation(tt,_t);if(-1===vt)throw new Error(`Couldn't find attribute ${_t} in program.`);return vt})(tt,_t.program,vt),this.value=((q,tt,_t=q.TRIANGLES)=>{const vt=new Float32Array(h(tt)),At=q.createBuffer();if(!At)throw new Error("No buffer was created");return q.bindBuffer(q.ARRAY_BUFFER,At),q.bufferData(q.ARRAY_BUFFER,vt,q.STATIC_DRAW),q.bindBuffer(q.ARRAY_BUFFER,null),{buffer:At,vectorSize:tt[0].length,vectorCount:tt.length,type:q.FLOAT,normalize:!1,stride:0,offset:0,drawingMode:_t}})(tt,At,re),this.variableName=vt,this.drawingMode=re}}class Xt{constructor(tt,_t,vt="triangles"){let At;switch(vt){case"triangles":At=tt.TRIANGLES;break;case"lines":At=tt.LINES;break;case"points":At=tt.POINTS;break;default:throw new Error(`Invalid drawing mode ${vt}`)}this.index=((q,tt,_t=q.TRIANGLES)=>{const vt=new Uint16Array(h(tt)),At=q.createBuffer();if(!At)throw new Error("No buffer was created");return q.bindBuffer(q.ELEMENT_ARRAY_BUFFER,At),q.bufferData(q.ELEMENT_ARRAY_BUFFER,vt,q.STATIC_DRAW),q.bindBuffer(q.ELEMENT_ARRAY_BUFFER,null),{buffer:At,count:vt.length,type:q.UNSIGNED_SHORT,offset:0,drawingMode:_t}})(tt,_t,At)}}function Vt(q,tt){for(const _t of q)if(tt(_t))return _t;return null}class le{constructor(tt,_t,vt,At,$t){this.program=tt,this.attributes=_t,this.uniforms=vt,this.textures=At,this.index=$t;const[re,ae,ye,Te]=function he(q){const tt=/^\s*attribute (int|float|vec2|vec3|vec4|mat2|mat3|mat4) (\w*);/gm,_t=/^\s*uniform (int|float|vec2|vec3|vec4|mat2|mat3|mat4) (\w*)(\[\d\])*;/gm,vt=/^\s*uniform sampler2D (\w*);/gm,At=/^\s*precision (\w*) float;/gm,$t=q.fragmentShaderSource+"\n\n\n"+q.vertexShaderSource,re=[];let ae;for(;null!==(ae=tt.exec($t));)re.push(ae[2]);const ye=[];let Te;for(;null!==(Te=_t.exec($t));)ye.push(Te[2]);const Oe=[];let Fe;for(;null!==(Fe=vt.exec($t));)Oe.push(Fe[1]);const Ue=[];let ti;for(;null!==(ti=At.exec($t));)Ue.push(ti[1]);return[re,ye,Oe,Ue]}(tt);for(const Fe of re){const Ue=_t.filter(ti=>ti.variableName===Fe);if(1!==Ue.length)throw new Error(`Provided ${Ue.length} values for shader's attribute ${Fe}.`)}for(const Fe of ae){const Ue=vt.filter(ti=>ti.variableName===Fe);if(1!==Ue.length)throw new Error(`Provided ${Ue.length} values for shader's uniform ${Fe}.`)}for(const Fe of ye){const Ue=At.filter(ti=>ti.variableName===Fe);if(1!==Ue.length)throw new Error(`Provided ${Ue.length} values for shader's texture ${Fe}.`)}1===Te.length&&console.warn("You have only provided one precision qualifier.\n            This can cause issues when you want to use a uniform in both the vertex- and the fragment-shader.");const Oe=this.attributes.map(Fe=>Fe.value.vectorCount);if(Math.min(...Oe)!==Math.max(...Oe))throw new Error("Your attributes are not of the same length!")}bind(tt){O(tt,this.program.program);for(const _t of this.attributes)A(tt,_t.location,_t.value);for(const _t of this.uniforms)Mt(tt,_t.location,_t.type,_t.value);for(const _t of this.textures)ot(tt,_t.texture.texture,_t.bindPoint,_t.location);this.index&&((q,tt)=>{q.bindBuffer(q.ELEMENT_ARRAY_BUFFER,this.index.index.buffer)})(tt)}render(tt,_t,vt,At){vt?((q,tt,_t)=>{q.bindFramebuffer(q.FRAMEBUFFER,tt.framebuffer),_t?(tt.width/tt.height!=_t[2]/_t[3]&&console.warn("Your viewport-aspect is different from the framebuffer-aspect."),q.viewport(..._t)):q.viewport(0,0,tt.width,tt.height)})(tt,vt,At):((q,tt)=>{q.bindFramebuffer(q.FRAMEBUFFER,null),tt?(q.canvas.width/q.canvas.height!=tt[2]/tt[3]&&console.warn("Your viewport-aspect is different from the canvas-aspect."),q.viewport(...tt)):q.viewport(0,0,q.canvas.width,q.canvas.height)})(tt,At),_t&&((q,tt)=>{q.clearColor(tt[0],tt[1],tt[2],tt[3]),q.clearDepth(1),q.clear(q.COLOR_BUFFER_BIT|q.DEPTH_BUFFER_BIT)})(tt,_t),this.index?((q,tt)=>{q.drawElements(tt.drawingMode,tt.count,tt.type,tt.offset)})(tt,this.index.index):((q,tt)=>{q.drawArrays(tt.drawingMode,tt.offset,tt.vectorCount)})(tt,this.attributes[0].value)}updateAttributeData(tt,_t,vt){const At=Vt(this.attributes,$t=>$t.variableName===_t);if(!At)throw new Error(`No such attribute ${_t} to be updated.`);((q,tt,_t)=>{const vt=new Float32Array(h(_t));q.bindBuffer(q.ARRAY_BUFFER,tt.buffer),q.bufferData(q.ARRAY_BUFFER,vt,q.STATIC_DRAW),q.bindBuffer(q.ARRAY_BUFFER,null)})(tt,At.value,vt)}updateUniformData(tt,_t,vt){const At=Vt(this.uniforms,$t=>$t.variableName===_t);if(!At)throw new Error(`No such uniform ${_t} to be updated.`);At.value=vt}updateTextureData(tt,_t,vt){const At=Vt(this.textures,re=>re.variableName===_t);if(!At)throw new Error(`No such texture ${_t} to be updated.`);const $t=((q,tt,_t)=>{if(q.activeTexture(q.TEXTURE0+7),q.bindTexture(q.TEXTURE_2D,tt.texture),_t instanceof HTMLImageElement||_t instanceof HTMLCanvasElement||_t instanceof ImageBitmap)q.texImage2D(q.TEXTURE_2D,0,q.RGBA,q.RGBA,q.UNSIGNED_BYTE,_t);else{const vt=_t[0].length,At=_t.length;if(!g(vt,2)||!g(At,2))throw new Error(`Texture-data-dimensions must be a power of two, but are ${At} x ${vt}`);const $t=new Uint8Array(h(_t));q.texImage2D(q.TEXTURE_2D,tt.level,tt.internalformat,tt.width,tt.height,tt.border,tt.format,tt.type,$t)}return q.generateMipmap(q.TEXTURE_2D),q.bindTexture(q.TEXTURE_2D,null),_t instanceof HTMLImageElement?(tt.width=_t.naturalWidth,tt.height=_t.naturalHeight):_t instanceof HTMLCanvasElement||_t instanceof ImageBitmap?(tt.width=_t.width,tt.height=_t.height):(tt.width=_t[0].length,tt.height=_t.length),tt})(tt,At.texture,vt);At.texture=$t}}class Ht{constructor(tt,_t,vt){const At=(q=>{const tt=q.createFramebuffer();if(!tt)throw new Error("Error creating framebuffer");return tt})(tt),$t=((q,tt,_t)=>{if(tt<=0||_t<=0)throw new Error("Width and height must be positive.");const vt=q.createTexture();if(!vt)throw new Error("No texture was created");return q.activeTexture(q.TEXTURE0+7),q.bindTexture(q.TEXTURE_2D,vt),q.texImage2D(q.TEXTURE_2D,0,q.RGBA,tt,_t,0,q.RGBA,q.UNSIGNED_BYTE,null),q.texParameteri(q.TEXTURE_2D,q.TEXTURE_WRAP_S,q.CLAMP_TO_EDGE),q.texParameteri(q.TEXTURE_2D,q.TEXTURE_WRAP_T,q.CLAMP_TO_EDGE),q.texParameteri(q.TEXTURE_2D,q.TEXTURE_MIN_FILTER,q.NEAREST),q.texParameteri(q.TEXTURE_2D,q.TEXTURE_MAG_FILTER,q.NEAREST),q.bindTexture(q.TEXTURE_2D,null),{texture:vt,level:0,internalformat:q.RGBA,format:q.RGBA,type:q.UNSIGNED_BYTE,width:tt,height:_t,border:0}})(tt,_t,vt),re=((q,tt,_t)=>{if(q.bindFramebuffer(q.FRAMEBUFFER,_t),q.framebufferTexture2D(q.FRAMEBUFFER,q.COLOR_ATTACHMENT0,q.TEXTURE_2D,tt.texture,0),q.checkFramebufferStatus(q.FRAMEBUFFER)!==q.FRAMEBUFFER_COMPLETE)throw new Error(`Error creating framebuffer: framebuffer-status: ${q.checkFramebufferStatus(q.FRAMEBUFFER)} ; error-code: ${q.getError()}`);return q.bindFramebuffer(q.FRAMEBUFFER,null),{framebuffer:_t,texture:tt,width:tt.width,height:tt.height}})(tt,$t,At);this.fbo=re}}function ft(q,tt){const _t=1e3/q;let At,$t,re,vt=_t;const ae=()=>{At=window.performance.now(),tt(vt),$t=window.performance.now(),vt=$t-At,re=Math.max(_t-vt,0),setTimeout(()=>{requestAnimationFrame(ae)},re)};ae()}const z=(q,tt)=>({vertices:[[-q/2,tt/2,0],[-q/2,-tt/2,0],[q/2,-tt/2,0],[-q/2,tt/2,0],[q/2,-tt/2,0],[q/2,tt/2,0]],texturePositions:[[0,1],[0,0],[1,0],[0,1],[1,0],[1,1]]});var Z=o(2041);class W extends l.Z{constructor(tt){super(tt)}createRenderer(){return this.renderer=new j(this),this.renderer}updateSunAngle(tt){this.renderer&&this.renderer.updateSunAngle(tt)}}class j extends Z.Z{constructor(tt){super(tt),this.state="loading";const _t=document.createElement("canvas");_t.width=1200,_t.height=800,_t.style.position="absolute";const vt=_t.getContext("webgl"),At=tt.getSource(),$t=At.getProjection(),re=At.getImageExtent(),ae=this.bboxOntoRectangle(2,2,re),ye=((q,tt=256,_t=256,vt="red")=>{const At=document.createElement("canvas").getContext("2d");if(!At)throw new Error("no context");return At.canvas.width=tt,At.canvas.height=_t,At.font=`bold ${5*_t/6|0}px sans-serif`,At.textAlign="center",At.textBaseline="middle",At.fillStyle=vt,At.fillText(q,tt/2,_t/2),At.canvas})("test",2048,2048,"red"),Te=new Ut(vt,"\n            attribute vec3 a_position;\n            attribute vec2 a_texturePosition;\n            uniform mat3 u_world2pix;\n            uniform mat3 u_pix2canv;\n            varying vec2 v_texturePosition;\n            void main() {\n                vec3 pixelPosition = u_world2pix * vec3(a_position.x, a_position.y, 1.);\n                vec3 canvasPosition = u_pix2canv * pixelPosition;\n                gl_Position = vec4(canvasPosition.x, canvasPosition.y, 0., 1.);\n                v_texturePosition = a_texturePosition;\n            }\n        ","\n            precision mediump float;\n            uniform sampler2D u_srtm;\n            uniform float u_imageSize;\n            uniform vec3 u_sun;\n            varying vec2 v_texturePosition;\n            void main() {\n                float delta = 4. / u_imageSize;\n                float top = texture2D(u_srtm, vec2(v_texturePosition.x,         1. - v_texturePosition.y + delta)).r;\n                float bot = texture2D(u_srtm, vec2(v_texturePosition.x,         1. - v_texturePosition.y - delta)).r;\n                float lft = texture2D(u_srtm, vec2(v_texturePosition.x + delta, 1. - v_texturePosition.y        )).r;\n                float rgt = texture2D(u_srtm, vec2(v_texturePosition.x - delta, 1. - v_texturePosition.y        )).r;\n\n                vec3 surfaceNormal = vec3(\n                    lft - rgt,\n                    bot - top,\n                    2. * delta\n                );\n                surfaceNormal = normalize(surfaceNormal);\n                vec3 sunNormal = normalize(u_sun);\n                float alignment = abs(dot(sunNormal, surfaceNormal));\n\n                gl_FragColor = vec4(0., 0., 0., 0.5 * alignment);\n            }\n        ");O(vt,Te.program);const Oe=new le(Te,[new bt(vt,Te,"a_position",ae.vertices),new bt(vt,Te,"a_texturePosition",ae.texturePositions)],[new zt(vt,Te,"u_imageSize","float",[2048]),new zt(vt,Te,"u_sun","vec3",[0,0,1]),new zt(vt,Te,"u_world2pix","mat3",h([[1,0,0],[0,1,0],[0,0,1]])),new zt(vt,Te,"u_pix2canv","mat3",h([[1/(_t.width/2),0,0],[0,-1/(_t.height/2),0],[-1,1,1]]))],[new rt(vt,Te,"u_srtm",ye,0)]);Oe.bind(vt),this.shader=Oe,this.canvas=_t,this.gl=vt,this.projection=$t;const Fe=At.getImage(re,.02197265625,2.440000295639038,$t);Fe.load(),Fe.addEventListener("change",Ue=>{const ti=Fe.getImage();this.shader.updateTextureData(this.gl,"u_srtm",ti),this.shader.bind(this.gl),this.state="ready",tt.changed();const fi=tt.get("map");requestAnimationFrame(()=>{fi.render()})})}prepareFrame(tt){if("ready"===this.state){const _t=tt.coordinateToPixelTransform;this.shader.updateUniformData(this.gl,"u_world2pix",h([[_t[0],_t[1],0],[_t[2],_t[3],0],[_t[4],_t[5],1]])),this.shader.bind(this.gl),tt.viewState.projection!==this.projection&&this.reprojectImage(tt.viewState.projection)}return!0}renderFrame(tt,_t){return"ready"===this.state&&(this.shader.render(this.gl),this.transformCanvas(tt)),this.canvas}renderDeclutter(tt){}updateSunAngle(tt){this.shader.updateUniformData(this.gl,"u_sun",[tt[0],tt[1],1]),this.shader.bind(this.gl),this.shader.render(this.gl)}bboxOntoRectangle(tt,_t,vt){const At=z(tt,_t);for(const $t of At.vertices){const ae=$t[1];$t[0]=$t[0]===tt/2?vt[2]:vt[0],$t[1]=ae===_t/2?vt[3]:vt[1]}return At}reprojectImage(tt){const _t=super.getLayer().getSource(),vt=_t.getProjection(),At=_t.getImageExtent(),$t=(0,n.$A)(At,vt,tt),re=this.bboxOntoRectangle(2,2,$t);this.shader.updateAttributeData(this.gl,"a_position",re.vertices),this.shader.bind(this.gl)}transformCanvas(tt){const _t=tt.layerStatesArray[tt.layerIndex],vt=tt.pixelRatio,At=tt.size,$t=Math.round(At[0]*vt),re=Math.round(At[1]*vt),ae=_t.opacity;this.canvas.width=$t,this.canvas.height=re,this.canvas.style.opacity=`${ae}`,this.shader.updateUniformData(this.gl,"u_pix2canv",h([[1/(this.canvas.width/2),0,0],[0,-1/(this.canvas.height/2),0],[-1,1,1]]))}}var st=o(9727),dt=o(5616),Ot=o(5379),Ct=o(4591);class Gt extends dt.Z{constructor(tt){super(tt),this.options=tt}createRenderer(){return new qt(this,this.options.renderSettings)}updateParas(tt,_t,vt){const At={colorRamp:this.options.renderSettings.colorRamp,maxEdgeLength:this.options.renderSettings.maxEdgeLength,storeInterpolatedPixelData:this.options.renderSettings.storeInterpolatedPixelData,valueProperty:this.options.renderSettings.valueProperty,power:tt,showLabels:vt,smooth:_t};super.getRenderer().updateSettings(At),this.options.renderSettings=At}}class qt extends st.Z{constructor(tt,_t){super(tt),this.settings=_t,this.container=document.createElement("div"),this.container.classList.add("ol-layer"),this.container.style.setProperty("position","absolute"),this.container.style.setProperty("width","100%"),this.container.style.setProperty("height","100%"),this.webGlCanvas=document.createElement("canvas"),this.webGlCanvas.style.setProperty("position","absolute"),this.webGlCanvas.style.setProperty("left","0px"),this.webGlCanvas.style.setProperty("top","0px"),this.webGlCanvas.style.setProperty("width","100%"),this.webGlCanvas.style.setProperty("height","100%"),this.webGlCanvas.width=1e3,this.webGlCanvas.height=1e3,this.gl=this.webGlCanvas.getContext("webgl"),this.container.appendChild(this.webGlCanvas),this.pointRenderer=new st.Z(tt);const vt=tt.getSource();this.projection=vt.getProjection();const{coords:At,values:$t,bboxDelta:re,maxVal:ae}=this.parseData(vt,this.settings.valueProperty,this.settings.maxEdgeLength),{observationsBbox:ye,maxEdgeLengthBbox:Te}=this.parseDataBbox(re,At,$t,ae,this.settings.maxEdgeLength);this.bbox=re;const Oe=[[1,0,0],[0,1,0],[0,0,1]];this.interpolationShader=oe(this.gl,ye,ae,this.settings.power,Te),this.valueFb=new Ht(this.gl,this.webGlCanvas.width,this.webGlCanvas.height),this.colorizationShader=Qt(this.gl,this.settings.colorRamp,ae,this.settings.smooth,this.valueFb),this.colorFb=new Ht(this.gl,this.webGlCanvas.width,this.webGlCanvas.height),this.arrangementShader=ge(this.gl,Oe,Oe,re,this.colorFb),this.runInterpolationShader(this.valueFb.fbo),this.runColorizationShader(this.colorFb.fbo)}prepareFrame(tt){if(this.webGlCanvas.style.opacity=`${tt.layerStatesArray[tt.layerIndex].opacity}`,tt.viewState.projection!==this.projection){this.projection=tt.viewState.projection;const At=super.getLayer().getSource(),{coords:$t,values:re,bboxDelta:ae,maxVal:ye}=this.parseData(At,this.settings.valueProperty,this.settings.maxEdgeLength),{observationsBbox:Te,maxEdgeLengthBbox:Oe}=this.parseDataBbox(ae,$t,re,ye,this.settings.maxEdgeLength);this.updateInterpolationShader(this.settings.power,Te,Oe),this.runInterpolationShader(this.valueFb.fbo),this.runColorizationShader(this.colorFb.fbo),this.bbox=ae}return this.updateArrangementShader(tt.coordinateToPixelTransform,tt.size[0],tt.size[1],this.bbox),this.pointRenderer.prepareFrame(tt),!0}renderFrame(tt,_t){if(this.runArrangementShader(),this.settings.showLabels){const vt=this.pointRenderer.renderFrame(tt,this.container);(0,Ct.hF)(this.container,[this.webGlCanvas,vt])}else(0,Ct.hF)(this.container,[this.webGlCanvas]);return this.container}renderDeclutter(tt){}updateSettings(tt){const _t=this.settings;this.settings=tt,tt.power!==_t.power?(this.updateInterpolationShader(tt.power),this.runInterpolationShader(this.valueFb.fbo),this.updateColorizationShader(tt.smooth),this.runColorizationShader(this.colorFb.fbo)):tt.smooth!==_t.smooth&&(this.updateColorizationShader(tt.smooth),this.runColorizationShader(this.colorFb.fbo)),super.getLayer().changed()}updateArrangementShader(tt,_t,vt,At){const re=[[1/(_t/2),0,0],[0,-1/(vt/2),0],[-1,1,1]];this.arrangementShader.updateUniformData(this.gl,"u_world2pix",h([[tt[0],tt[1],0],[tt[2],tt[3],0],[tt[4],tt[5],1]])),this.arrangementShader.updateUniformData(this.gl,"u_pix2clip",h(re)),this.arrangementShader.updateUniformData(this.gl,"u_bbox",At)}runArrangementShader(tt){this.arrangementShader.bind(this.gl),this.arrangementShader.render(this.gl,[0,0,0,0],tt)}updateInterpolationShader(tt,_t,vt){this.interpolationShader.updateUniformData(this.gl,"u_power",[tt]),_t&&this.interpolationShader.updateTextureData(this.gl,"u_dataTexture",[_t]),vt&&this.interpolationShader.updateUniformData(this.gl,"u_maxDistance",[vt])}runInterpolationShader(tt){this.interpolationShader.bind(this.gl),this.interpolationShader.render(this.gl,[0,0,0,0],tt),this.settings.storeInterpolatedPixelData&&(this.interpolatedValues=(q=>{const tt=q.getContext("webgl");if(!tt)throw new Error("no context");const _t=tt.getParameter(tt.IMPLEMENTATION_COLOR_READ_FORMAT),vt=tt.getParameter(tt.IMPLEMENTATION_COLOR_READ_TYPE);let At;if(vt===tt.UNSIGNED_BYTE)At=new Uint8Array(tt.drawingBufferWidth*tt.drawingBufferHeight*4);else if(vt===tt.UNSIGNED_SHORT_5_6_5||vt===tt.UNSIGNED_SHORT_4_4_4_4||vt===tt.UNSIGNED_SHORT_5_5_5_1)At=new Uint16Array(tt.drawingBufferWidth*tt.drawingBufferHeight*4);else{if(vt!==tt.FLOAT)throw new Error(`Did not understand pixel data type ${vt} for format ${_t}`);At=new Float32Array(tt.drawingBufferWidth*tt.drawingBufferHeight*4)}return tt.readPixels(0,0,q.width,q.height,_t,vt,At),At})(this.webGlCanvas))}updateColorizationShader(tt){this.colorizationShader.updateUniformData(this.gl,"u_smooth",[tt?1:0])}runColorizationShader(tt){this.colorizationShader.bind(this.gl),this.colorizationShader.render(this.gl,[0,0,0,0],tt)}parseData(tt,_t,vt){let At=tt.getFeatures();At=tt instanceof Ot.Z?tt.getSource().getFeatures():tt.getFeatures();const $t=At.map(fi=>fi.getGeometry().getCoordinates()),re=At.map(fi=>parseFloat(fi.getProperties()[_t])),ae=we($t),ye=ae[2]-ae[0],Te=ae[3]-ae[1];let Oe,Fe;ye>Te?(Fe=ye-Te,Oe=0):(Fe=0,Oe=Te-ye);const Ue=[ae[0]-vt,ae[1]-vt,ae[2]+Oe+vt,ae[3]+Fe+vt],ti=re.reduce((fi,xi)=>xi>fi?xi:fi,0);return{coords:$t,values:re,bboxDelta:Ue,maxVal:ti}}parseDataBbox(tt,_t,vt,At,$t){const re=Ie(_t,vt).map(Ue=>{const ti=ne([Ue[0],Ue[1]],tt);return[255*(ti[0]+1)/2,255*(ti[1]+1)/2,255*Ue[2]/At,255]}),ae=re.length,ye=((q,tt)=>{const _t=Math.ceil(f(q,2));return Math.pow(2,_t)})(ae);for(let Ue=0;Ue<ye-ae;Ue++)re.push([0,0,0,0]);return{observationsBbox:re,maxEdgeLengthBbox:$t/Math.max(tt[2]-tt[0],tt[3]-tt[1])}}}const ne=(q,tt)=>[(q[0]-tt[0])/(tt[2]-tt[0])*2-1,(q[1]-tt[1])/(tt[3]-tt[1])*2-1],oe=(q,tt,_t,vt,At)=>{const re=new Ut(q,"\n            precision mediump float;\n            attribute vec3 a_position;\n            attribute vec2 a_texturePosition;\n            varying vec2 v_position;\n            varying vec2 v_texturePosition;\n\n            void main() {\n                v_position = a_position.xy;\n                v_texturePosition = a_texturePosition;\n                gl_Position = vec4(a_position.xy, 0.0, 1.0);\n            }\n        ","\n            precision mediump float;\n            uniform float u_power;\n            uniform sampler2D u_dataTexture;\n            uniform int u_nrDataPoints;\n            uniform float u_maxValue;\n            uniform float u_maxDistance;\n            varying vec2 v_position;\n            varying vec2 v_texturePosition;\n\n            void main() {\n\n                float valSum = 0.0;\n                float wSum = 0.0;\n                float minD = 10000.0;\n                for (int i = 0; i < 10000; i++) {\n                    if (i > u_nrDataPoints) {\n                        break;\n                    }\n                    vec4 dataPoint = texture2D(u_dataTexture, vec2(float(i) / float(u_nrDataPoints), 0.5));\n                    if (dataPoint.w > 0.0) {  // texture is padded to next power of two with transparent 0-values.\n                        vec2 coords = dataPoint.xy * 2.0 - 1.0;  // transforming coords from [0, 1] to [-1, 1]\n                        float value = dataPoint.z * u_maxValue;  // transforming value from [0, 1] to [0, maxValue]\n\n                        float d = distance(v_position, coords);\n                        float w = 1.0 / pow(d, u_power);\n                        valSum += value * w;\n                        wSum += w;\n                        if (d < minD) {\n                            minD = d;\n                        }\n                    }\n                }\n                float interpolatedValue = valSum / wSum;\n                float alpha = 1.0;\n                if (minD > u_maxDistance) {\n                    alpha = 0.0;\n                }\n                vec4 color = vec4(interpolatedValue / u_maxValue, 0.0, 0.0, alpha);\n\n                gl_FragColor = color;\n            }\n        "),ae={vertices:[[-1,1,0],[-1,-1,0],[1,-1,0],[1,1,0]],texturePositions:[[0,1],[0,0],[1,0],[1,1]],vertexIndices:[[0,1,2],[0,2,3]]};return new le(re,[new bt(q,re,"a_position",ae.vertices),new bt(q,re,"a_texturePosition",ae.texturePositions)],[new zt(q,re,"u_power","float",[vt]),new zt(q,re,"u_nrDataPoints","int",[tt.length]),new zt(q,re,"u_maxValue","float",[_t]),new zt(q,re,"u_maxDistance","float",[At])],[new It(q,re,"u_dataTexture",[tt],0)],new Xt(q,ae.vertexIndices))},Qt=(q,tt,_t,vt,At)=>{const re=new Ut(q,"\n            precision mediump float;\n            attribute vec2 a_position;\n            attribute vec2 a_textureCoord;\n            varying vec2 v_textureCoord;\n\n            void main() {\n                v_textureCoord = a_textureCoord;\n                gl_Position = vec4(a_position.xy, 0.0, 1.0);\n            }\n        ","\n            precision mediump float;\n            uniform float u_colorRampValues[15];\n            uniform vec3 u_colorRampColors[15];\n            uniform int u_nrColorRampValues;\n            uniform float u_maxValue;\n            uniform bool u_smooth;\n            uniform sampler2D u_valueTexture;\n            varying vec2 v_textureCoord;\n\n            vec3 valueToSmoothColor(in float value) {\n                if (value < u_colorRampValues[0]) {\n                    return u_colorRampColors[0];\n                }\n                for (int i = 1; i < 15; i++) {\n                    if (i > u_nrColorRampValues) {\n                        break;\n                    }\n                    if (value < u_colorRampValues[i]) {\n                        float alpha = (value - u_colorRampValues[i-1]) / (u_colorRampValues[i] - u_colorRampValues[i-1]);\n                        vec3 color = alpha * (u_colorRampColors[i] - u_colorRampColors[i-1]) + u_colorRampColors[i-1];\n                        return color;\n                    }\n                    if (i == u_nrColorRampValues) {\n                        return u_colorRampColors[i];\n                    }\n                }\n            }\n\n            vec3 valueToStepColor(in float value) {\n                for (int i = 0; i < 15; i++) {\n                    if (i > u_nrColorRampValues) {\n                        break;\n                    }\n                    if (value < u_colorRampValues[i]) {\n                        return u_colorRampColors[i];\n                    }\n                    if (i == u_nrColorRampValues) {\n                        return u_colorRampColors[i];\n                    }\n                }\n            }\n\n            void main() {\n                vec4 pixelData = texture2D(u_valueTexture, v_textureCoord);\n                float val = pixelData.r * u_maxValue;\n                float alpha = pixelData.w;\n                vec3 rgb = vec3(0.0, 0.0, 0.0);\n                if (alpha > 0.01) {\n                    if (u_smooth) {\n                        rgb = valueToSmoothColor(val);\n                    } else {\n                        rgb = valueToStepColor(val);\n                    }\n                }\n                gl_FragColor = vec4(rgb.x / 255.0, rgb.y / 255.0, rgb.z / 255.0, alpha);\n            }\n        ");return new le(re,[new bt(q,re,"a_position",z(2,2).vertices),new bt(q,re,"a_textureCoord",z(2,2).texturePositions)],[new zt(q,re,"u_colorRampValues","float[]",tt.map(ye=>ye.val)),new zt(q,re,"u_colorRampColors","vec3[]",h(tt.map(ye=>ye.rgb))),new zt(q,re,"u_nrColorRampValues","int",[tt.length]),new zt(q,re,"u_maxValue","float",[_t]),new zt(q,re,"u_smooth","bool",[vt?1:0])],[new rt(q,re,"u_valueTexture",At.fbo.texture,0)])},ge=(q,tt,_t,vt,At)=>{const $t=new Ut(q,"\n            precision mediump float;\n            attribute vec3 a_pos;\n            attribute vec2 a_posTexture;\n            uniform mat3 u_world2pix;\n            uniform mat3 u_pix2clip;\n            uniform vec4 u_bbox;\n            varying vec2 v_posTexture;\n\n            vec2 clipBbx2worldCoords(vec2 clipCoords, vec4 bbox) {\n                float xPerct = ( clipCoords.x + 1.0 ) / 2.0;\n                float yPerct = ( clipCoords.y + 1.0 ) / 2.0;\n                float xWorld = xPerct * (bbox.z - bbox.x) + bbox.x;\n                float yWorld = yPerct * (bbox.w - bbox.y) + bbox.y;\n                return vec2(xWorld, yWorld);\n            }\n\n            void main() {\n                v_posTexture = a_posTexture;\n                vec2 worldPos = clipBbx2worldCoords(a_pos.xy, u_bbox);\n                vec3 clipPos = u_pix2clip * u_world2pix * vec3(worldPos.xy, 1.0);\n                gl_Position = vec4(clipPos.xy, 0.0, 1.0);\n            }\n        ","\n            precision mediump float;\n            uniform sampler2D u_texture;\n            varying vec2 v_posTexture;\n\n            void main() {\n                gl_FragColor = texture2D(u_texture, v_posTexture);\n            }\n        ");return new le($t,[new bt(q,$t,"a_pos",z(2,2).vertices),new bt(q,$t,"a_posTexture",z(2,2).texturePositions)],[new zt(q,$t,"u_world2pix","mat3",h(tt)),new zt(q,$t,"u_pix2clip","mat3",h(_t)),new zt(q,$t,"u_bbox","vec4",vt)],[new rt(q,$t,"u_texture",At.fbo.texture,0)])},we=q=>{const tt=q.map(ae=>ae[0]),_t=q.map(ae=>ae[1]),vt=Math.min(...tt),At=Math.max(...tt);return[vt,Math.min(..._t),At,Math.max(..._t)]},Ie=(q,tt)=>{const _t=[];for(let vt=0;vt<q.length;vt++)_t.push(q[vt].concat(tt[vt]));return _t}},9558:(jt,ut,o)=>{"use strict";o.d(ut,{h0:()=>ho,bg:()=>xr});var V=o(5366),k=o(2334),J=o(9269),$=o(3387),U=o(5784),S=o(9032),b=o(5739),T=o(5173),y=o(1463),m=o(33),d=o(8939),l=o(3824),n=o(1293),h=o(6256),s=o(377),f=o(9895),g=o(7670),a=o(9832),I=o(1914),p=o(4876),E=o(4840),F=o(77),w=o(6971),K=o(7704);const N=class R extends E.Z{constructor(i){if(super({attributions:i.attributions,cacheSize:i.cacheSize,crossOrigin:i.crossOrigin,interpolate:i.interpolate,projection:(0,K.U2)("EPSG:3857"),reprojectionErrorThreshold:i.reprojectionErrorThreshold,state:"loading",tileLoadFunction:i.tileLoadFunction,wrapX:void 0===i.wrapX||i.wrapX,transition:i.transition,zDirection:i.zDirection}),this.tileJSON_=null,this.tileSize_=i.tileSize,i.url)if(i.jsonp)!function O(u,i,c,t){const e=document.createElement("script"),r="olc_"+(0,n.sq)(i);function v(){delete window[r],e.parentNode.removeChild(e)}e.async=!0,e.src=u+(u.includes("?")?"&":"?")+(t||"callback")+"="+r;const x=setTimeout(function(){v(),c&&c()},1e4);window[r]=function(D){clearTimeout(x),v(),i(D)},document.head.appendChild(e)}(i.url,this.handleTileJSONResponse.bind(this),this.handleTileJSONError.bind(this));else{const c=new XMLHttpRequest;c.addEventListener("load",this.onXHRLoad_.bind(this)),c.addEventListener("error",this.onXHRError_.bind(this)),c.open("GET",i.url),c.send()}else{if(!i.tileJSON)throw new Error("Either `url` or `tileJSON` options must be provided");this.handleTileJSONResponse(i.tileJSON)}}onXHRLoad_(i){const c=i.target;if(!c.status||c.status>=200&&c.status<300){let t;try{t=JSON.parse(c.responseText)}catch{return void this.handleTileJSONError()}this.handleTileJSONResponse(t)}else this.handleTileJSONError()}onXHRError_(i){this.handleTileJSONError()}getTileJSON(){return this.tileJSON_}handleTileJSONResponse(i){const c=(0,K.U2)("EPSG:4326"),t=this.getProjection();let e;if(void 0!==i.bounds){const G=(0,K.WO)(c,t);e=(0,F.Ne)(i.bounds,G)}const r=(0,w.Tl)(t),D=(0,w.dl)({extent:r,maxZoom:i.maxzoom||22,minZoom:i.minzoom||0,tileSize:this.tileSize_});if(this.tileGrid=D,this.tileUrlFunction=(0,l.uR)(i.tiles,D),i.attribution&&!this.getAttributions()){const G=void 0!==e?e:r;this.setAttributions(function(X){return(0,F.kK)(G,X.extent)?[i.attribution]:null})}this.tileJSON_=i,this.setState("ready")}handleTileJSONError(){this.setState("error")}};var Q=o(5616),et=o(1308),H=o(7178),ot=o(5645),ht=o(3989),mt=o(133);function xt(u){return u&&u.__esModule&&Object.prototype.hasOwnProperty.call(u,"default")?u.default:u}var at,pt={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function Mt(u){return(u=Math.round(u))<0?0:u>255?255:u}function Dt(u){return Mt("%"===u[u.length-1]?parseFloat(u)/100*255:parseInt(u))}function Wt(u){return function Ft(u){return u<0?0:u>1?1:u}("%"===u[u.length-1]?parseFloat(u)/100:parseFloat(u))}function Ut(u,i,c){return c<0?c+=1:c>1&&(c-=1),6*c<1?u+(i-u)*c*6:2*c<1?i:3*c<2?u+(i-u)*(2/3-c)*6:u}try{at={}.parseCSSColor=function zt(u){var c,i=u.replace(/ /g,"").toLowerCase();if(i in pt)return pt[i].slice();if("#"===i[0])return 4===i.length?(c=parseInt(i.substr(1),16))>=0&&c<=4095?[(3840&c)>>4|(3840&c)>>8,240&c|(240&c)>>4,15&c|(15&c)<<4,1]:null:7===i.length&&(c=parseInt(i.substr(1),16))>=0&&c<=16777215?[(16711680&c)>>16,(65280&c)>>8,255&c,1]:null;var t=i.indexOf("("),e=i.indexOf(")");if(-1!==t&&e+1===i.length){var r=i.substr(0,t),v=i.substr(t+1,e-(t+1)).split(","),x=1;switch(r){case"rgba":if(4!==v.length)return null;x=Wt(v.pop());case"rgb":return 3!==v.length?null:[Dt(v[0]),Dt(v[1]),Dt(v[2]),x];case"hsla":if(4!==v.length)return null;x=Wt(v.pop());case"hsl":if(3!==v.length)return null;var D=(parseFloat(v[0])%360+360)%360/360,G=Wt(v[1]),X=Wt(v[2]),nt=X<=.5?X*(G+1):X+G-X*G,ct=2*X-nt;return[Mt(255*Ut(ct,nt,D+1/3)),Mt(255*Ut(ct,nt,D)),Mt(255*Ut(ct,nt,D-1/3)),x];default:return null}}return null}}catch{}class rt{constructor(i,c,t,e=1){this.r=i,this.g=c,this.b=t,this.a=e}static parse(i){if(!i)return;if(i instanceof rt)return i;if("string"!=typeof i)return;const c=at(i);return c?new rt(c[0]/255*c[3],c[1]/255*c[3],c[2]/255*c[3],c[3]):void 0}toString(){const[i,c,t,e]=this.toArray();return`rgba(${Math.round(i)},${Math.round(c)},${Math.round(t)},${e})`}toArray(){const{r:i,g:c,b:t,a:e}=this;return 0===e?[0,0,0,0]:[255*i/e,255*c/e,255*t/e,e]}toArray01(){const{r:i,g:c,b:t,a:e}=this;return 0===e?[0,0,0,0]:[i/e,c/e,t/e,e]}toArray01PremultipliedAlpha(){const{r:i,g:c,b:t,a:e}=this;return[i,c,t,e]}}rt.black=new rt(0,0,0,1),rt.white=new rt(1,1,1,1),rt.transparent=new rt(0,0,0,0),rt.red=new rt(1,0,0,1),rt.blue=new rt(0,0,1,1);var It=rt;function bt(u){return"object"==typeof u?["literal",u]:u}function he(u){switch(u.colorSpace){case"hcl":return"interpolate-hcl";case"lab":return"interpolate-lab";default:return"interpolate"}}function ft(u,i){const c=bt(function Ht(u,i){return void 0!==u?u:void 0!==i?i:void 0}(u.default,i.default));return void 0===c&&"resolvedImage"===i.type?"":c}function St(u,i,c){const t=Yt(u,i),e=["get",u.property];if("categorical"===t&&"boolean"==typeof c[0][0]){const r=["case"];for(const v of c)r.push(["==",e,v[0]],v[1]);return r.push(ft(u,i)),r}if("categorical"===t){const r=["match",e];for(const v of c)te(r,v[0],v[1],!1);return r.push(ft(u,i)),r}if("interval"===t){const r=["step",["number",e]];for(const v of c)te(r,v[0],v[1],!0);return Lt(r),void 0===u.default?r:["case",["==",["typeof",e],"number"],r,bt(u.default)]}if("exponential"===t){const r=void 0!==u.base?u.base:1,v=[he(u),1===r?["linear"]:["exponential",r],["number",e]];for(const x of c)te(v,x[0],x[1],!1);return void 0===u.default?v:["case",["==",["typeof",e],"number"],v,bt(u.default)]}throw new Error(`Unknown property function type ${t}`)}function Lt(u){"step"===u[0]&&3===u.length&&(u.push(0),u.push(u[3]))}function te(u,i,c,t){u.length>3&&i===u[u.length-2]||(t&&2===u.length||u.push(i),u.push(c))}function Yt(u,i){return u.type?u.type:i.expression.interpolated?"exponential":"interval"}function Et(u){const i=["concat"],c=/{([^{}]+)}/g;let t=0;for(let e=c.exec(u);null!==e;e=c.exec(u)){const r=u.slice(t,c.lastIndex-e[0].length);t=c.lastIndex,r.length>0&&i.push(r),i.push(["get",e[1]])}if(1===i.length)return u;if(t<u.length)i.push(u.slice(t));else if(2===i.length)return["to-string",i[1]];return i}class wt extends Error{constructor(i,c){super(c),this.message=c,this.key=i}}var it=wt;class z{constructor(i,c=[]){this.parent=i,this.bindings={};for(const[t,e]of c)this.bindings[t]=e}concat(i){return new z(this,i)}get(i){if(this.bindings[i])return this.bindings[i];if(this.parent)return this.parent.get(i);throw new Error(`${i} not found in scope.`)}has(i){return!!this.bindings[i]||!!this.parent&&this.parent.has(i)}}var _=z;const Z={kind:"null"},W={kind:"number"},j={kind:"string"},st={kind:"boolean"},dt={kind:"color"},Ot={kind:"object"},Ct={kind:"value"},qt={kind:"collator"},ne={kind:"formatted"},oe={kind:"resolvedImage"};function Qt(u,i){return{kind:"array",itemType:u,N:i}}function ge(u){if("array"===u.kind){const i=ge(u.itemType);return"number"==typeof u.N?`array<${i}, ${u.N}>`:"value"===u.itemType.kind?"array":`array<${i}>`}return u.kind}const we=[Z,W,j,st,dt,ne,Ot,Qt(Ct),oe];function Ie(u,i){if("error"===i.kind)return null;if("array"===u.kind){if("array"===i.kind&&(0===i.N&&"value"===i.itemType.kind||!Ie(u.itemType,i.itemType))&&("number"!=typeof u.N||u.N===i.N))return null}else{if(u.kind===i.kind)return null;if("value"===u.kind)for(const c of we)if(!Ie(c,i))return null}return`Expected ${ge(u)} but found ${ge(i)} instead.`}function De(u,i){return i.some(c=>c.kind===u.kind)}function je(u,i){return i.some(c=>"null"===c?null===u:"array"===c?Array.isArray(u):"object"===c?u&&!Array.isArray(u)&&"object"==typeof u:c===typeof u)}class Ke{constructor(i,c,t){this.sensitivity=i?c?"variant":"case":c?"accent":"base",this.locale=t,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(i,c){return this.collator.compare(i,c)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class Ye{constructor(i,c,t,e,r){this.text=i.normalize?i.normalize():i,this.image=c,this.scale=t,this.fontStack=e,this.textColor=r}}class Ze{constructor(i){this.sections=i}static fromString(i){return new Ze([new Ye(i,null,null,null,null)])}isEmpty(){return 0===this.sections.length||!this.sections.some(i=>0!==i.text.length||i.image&&0!==i.image.name.length)}static factory(i){return i instanceof Ze?i:Ze.fromString(i)}toString(){return 0===this.sections.length?"":this.sections.map(i=>i.text).join("")}serialize(){const i=["format"];for(const c of this.sections){if(c.image){i.push(["image",c.image.name]);continue}i.push(c.text);const t={};c.fontStack&&(t["text-font"]=["literal",c.fontStack.split(",")]),c.scale&&(t["font-scale"]=c.scale),c.textColor&&(t["text-color"]=["rgba"].concat(c.textColor.toArray())),i.push(t)}return i}}class Ce{constructor(i){this.name=i.name,this.available=i.available}toString(){return this.name}static fromString(i){return i?new Ce({name:i,available:!1}):null}serialize(){return["image",this.name]}}function q(u,i,c,t){return"number"==typeof u&&u>=0&&u<=255&&"number"==typeof i&&i>=0&&i<=255&&"number"==typeof c&&c>=0&&c<=255?typeof t>"u"||"number"==typeof t&&t>=0&&t<=1?null:`Invalid rgba value [${[u,i,c,t].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${("number"==typeof t?[u,i,c,t]:[u,i,c]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function tt(u){if(null===u)return!0;if("string"==typeof u)return!0;if("boolean"==typeof u)return!0;if("number"==typeof u)return!0;if(u instanceof It)return!0;if(u instanceof Ke)return!0;if(u instanceof Ze)return!0;if(u instanceof Ce)return!0;if(Array.isArray(u)){for(const i of u)if(!tt(i))return!1;return!0}if("object"==typeof u){for(const i in u)if(!tt(u[i]))return!1;return!0}return!1}function _t(u){if(null===u)return Z;if("string"==typeof u)return j;if("boolean"==typeof u)return st;if("number"==typeof u)return W;if(u instanceof It)return dt;if(u instanceof Ke)return qt;if(u instanceof Ze)return ne;if(u instanceof Ce)return oe;if(Array.isArray(u)){const i=u.length;let c;for(const t of u){const e=_t(t);if(c){if(c===e)continue;c=Ct;break}c=e}return Qt(c||Ct,i)}return Ot}function vt(u){const i=typeof u;return null===u?"":"string"===i||"number"===i||"boolean"===i?String(u):u instanceof It||u instanceof Ze||u instanceof Ce?u.toString():JSON.stringify(u)}class At{constructor(i,c){this.type=i,this.value=c}static parse(i,c){if(2!==i.length)return c.error(`'literal' expression requires exactly one argument, but found ${i.length-1} instead.`);if(!tt(i[1]))return c.error("invalid value");const t=i[1];let e=_t(t);const r=c.expectedType;return"array"===e.kind&&0===e.N&&r&&"array"===r.kind&&("number"!=typeof r.N||0===r.N)&&(e=r),new At(e,t)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}serialize(){return"array"===this.type.kind||"object"===this.type.kind?["literal",this.value]:this.value instanceof It?["rgba"].concat(this.value.toArray()):this.value instanceof Ze?this.value.serialize():this.value}}var $t=At,ae=class re{constructor(i){this.name="ExpressionEvaluationError",this.message=i}toJSON(){return this.message}};const ye={string:j,number:W,boolean:st,object:Ot};class Te{constructor(i,c){this.type=i,this.args=c}static parse(i,c){if(i.length<2)return c.error("Expected at least one argument.");let e,t=1;const r=i[0];if("array"===r){let x,D;if(i.length>2){const G=i[1];if("string"!=typeof G||!(G in ye)||"object"===G)return c.error('The item type argument of "array" must be one of string, number, boolean',1);x=ye[G],t++}else x=Ct;if(i.length>3){if(null!==i[2]&&("number"!=typeof i[2]||i[2]<0||i[2]!==Math.floor(i[2])))return c.error('The length argument to "array" must be a positive integer literal',2);D=i[2],t++}e=Qt(x,D)}else e=ye[r];const v=[];for(;t<i.length;t++){const x=c.parse(i[t],t,Ct);if(!x)return null;v.push(x)}return new Te(e,v)}evaluate(i){for(let c=0;c<this.args.length;c++){const t=this.args[c].evaluate(i);if(!Ie(this.type,_t(t)))return t;if(c===this.args.length-1)throw new ae(`Expected value to be of type ${ge(this.type)}, but found ${ge(_t(t))} instead.`)}return null}eachChild(i){this.args.forEach(i)}outputDefined(){return this.args.every(i=>i.outputDefined())}serialize(){const i=this.type,c=[i.kind];if("array"===i.kind){const t=i.itemType;if("string"===t.kind||"number"===t.kind||"boolean"===t.kind){c.push(t.kind);const e=i.N;("number"==typeof e||this.args.length>1)&&c.push(e)}}return c.concat(this.args.map(t=>t.serialize()))}}var Oe=Te;class Fe{constructor(i){this.type=ne,this.sections=i}static parse(i,c){if(i.length<2)return c.error("Expected at least one argument.");const t=i[1];if(!Array.isArray(t)&&"object"==typeof t)return c.error("First argument must be an image or text section.");const e=[];let r=!1;for(let v=1;v<=i.length-1;++v){const x=i[v];if(r&&"object"==typeof x&&!Array.isArray(x)){r=!1;let D=null;if(x["font-scale"]&&(D=c.parse(x["font-scale"],1,W),!D))return null;let G=null;if(x["text-font"]&&(G=c.parse(x["text-font"],1,Qt(j)),!G))return null;let X=null;if(x["text-color"]&&(X=c.parse(x["text-color"],1,dt),!X))return null;const nt=e[e.length-1];nt.scale=D,nt.font=G,nt.textColor=X}else{const D=c.parse(i[v],1,Ct);if(!D)return null;const G=D.type.kind;if("string"!==G&&"value"!==G&&"null"!==G&&"resolvedImage"!==G)return c.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");r=!0,e.push({content:D,scale:null,font:null,textColor:null})}}return new Fe(e)}evaluate(i){return new Ze(this.sections.map(t=>{const e=t.content.evaluate(i);return _t(e)===oe?new Ye("",e,null,null,null):new Ye(vt(e),null,t.scale?t.scale.evaluate(i):null,t.font?t.font.evaluate(i).join(","):null,t.textColor?t.textColor.evaluate(i):null)}))}eachChild(i){for(const c of this.sections)i(c.content),c.scale&&i(c.scale),c.font&&i(c.font),c.textColor&&i(c.textColor)}outputDefined(){return!1}serialize(){const i=["format"];for(const c of this.sections){i.push(c.content.serialize());const t={};c.scale&&(t["font-scale"]=c.scale.serialize()),c.font&&(t["text-font"]=c.font.serialize()),c.textColor&&(t["text-color"]=c.textColor.serialize()),i.push(t)}return i}}class Ue{constructor(i){this.type=oe,this.input=i}static parse(i,c){if(2!==i.length)return c.error("Expected two arguments.");const t=c.parse(i[1],1,j);return t?new Ue(t):c.error("No image name provided.")}evaluate(i){const c=this.input.evaluate(i),t=Ce.fromString(c);return t&&i.availableImages&&(t.available=i.availableImages.indexOf(c)>-1),t}eachChild(i){i(this.input)}outputDefined(){return!1}serialize(){return["image",this.input.serialize()]}}const ti={"to-boolean":st,"to-color":dt,"to-number":W,"to-string":j};class fi{constructor(i,c){this.type=i,this.args=c}static parse(i,c){if(i.length<2)return c.error("Expected at least one argument.");const t=i[0];if(("to-boolean"===t||"to-string"===t)&&2!==i.length)return c.error("Expected one argument.");const e=ti[t],r=[];for(let v=1;v<i.length;v++){const x=c.parse(i[v],v,Ct);if(!x)return null;r.push(x)}return new fi(e,r)}evaluate(i){if("boolean"===this.type.kind)return!!this.args[0].evaluate(i);if("color"===this.type.kind){let c,t;for(const e of this.args){if(c=e.evaluate(i),t=null,c instanceof It)return c;if("string"==typeof c){const r=i.parseColor(c);if(r)return r}else if(Array.isArray(c)&&(t=c.length<3||c.length>4?`Invalid rbga value ${JSON.stringify(c)}: expected an array containing either three or four numeric values.`:q(c[0],c[1],c[2],c[3]),!t))return new It(c[0]/255,c[1]/255,c[2]/255,c[3])}throw new ae(t||`Could not parse color from value '${"string"==typeof c?c:String(JSON.stringify(c))}'`)}if("number"===this.type.kind){let c=null;for(const t of this.args){if(c=t.evaluate(i),null===c)return 0;const e=Number(c);if(!isNaN(e))return e}throw new ae(`Could not convert ${JSON.stringify(c)} to number.`)}return"formatted"===this.type.kind?Ze.fromString(vt(this.args[0].evaluate(i))):"resolvedImage"===this.type.kind?Ce.fromString(vt(this.args[0].evaluate(i))):vt(this.args[0].evaluate(i))}eachChild(i){this.args.forEach(i)}outputDefined(){return this.args.every(i=>i.outputDefined())}serialize(){if("formatted"===this.type.kind)return new Fe([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if("resolvedImage"===this.type.kind)return new Ue(this.args[0]).serialize();const i=[`to-${this.type.kind}`];return this.eachChild(c=>{i.push(c.serialize())}),i}}var xi=fi;const an=["Unknown","Point","LineString","Polygon"];var ki=class xn{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null,this.featureTileCoord=null,this.featureDistanceData=null}id(){return this.feature&&void 0!==this.feature.id?this.feature.id:null}geometryType(){return this.feature?"number"==typeof this.feature.type?an[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}distanceFromCenter(){if(this.featureTileCoord&&this.featureDistanceData){const i=this.featureDistanceData.center,c=this.featureDistanceData.scale,{x:t,y:e}=this.featureTileCoord;return this.featureDistanceData.bearing[0]*(t*c-i[0])+this.featureDistanceData.bearing[1]*(e*c-i[1])}return 0}parseColor(i){let c=this._parseColorCache[i];return c||(c=this._parseColorCache[i]=It.parse(i)),c}};class Oi{constructor(i,c,t,e){this.name=i,this.type=c,this._evaluate=t,this.args=e}evaluate(i){return this._evaluate(i,this.args)}eachChild(i){this.args.forEach(i)}outputDefined(){return!1}serialize(){return[this.name].concat(this.args.map(i=>i.serialize()))}static parse(i,c){const t=i[0],e=Oi.definitions[t];if(!e)return c.error(`Unknown expression "${t}". If you wanted a literal array, use ["literal", [...]].`,0);const r=Array.isArray(e)?e[0]:e.type,v=Array.isArray(e)?[[e[1],e[2]]]:e.overloads,x=v.filter(([G])=>!Array.isArray(G)||G.length===i.length-1);let D=null;for(const[G,X]of x){D=new ys(c.registry,c.path,null,c.scope);const nt=[];let ct=!1;for(let Tt=1;Tt<i.length;Tt++){const Pt=i[Tt],Bt=Array.isArray(G)?G[Tt-1]:G.type,Zt=D.parse(Pt,1+nt.length,Bt);if(!Zt){ct=!0;break}nt.push(Zt)}if(!ct){if(Array.isArray(G)&&G.length!==nt.length){D.error(`Expected ${G.length} arguments, but found ${nt.length} instead.`);continue}for(let Tt=0;Tt<nt.length;Tt++){const Pt=Array.isArray(G)?G[Tt]:G.type,Bt=nt[Tt];D.concat(Tt+1).checkSubtype(Pt,Bt.type)}if(0===D.errors.length)return new Oi(t,r,X,nt)}}if(1===x.length)c.errors.push(...D.errors);else{const X=(x.length?x:v).map(([ct])=>function Hi(u){return Array.isArray(u)?`(${u.map(ge).join(", ")})`:`(${ge(u.type)}...)`}(ct)).join(" | "),nt=[];for(let ct=1;ct<i.length;ct++){const Tt=c.parse(i[ct],1+nt.length);if(!Tt)return null;nt.push(ge(Tt.type))}c.error(`Expected arguments of type ${X}, but found (${nt.join(", ")}) instead.`)}return null}static register(i,c){Oi.definitions=c;for(const t in c)i[t]=Oi}}var Bi=Oi;class Ji{constructor(i,c,t){this.type=qt,this.locale=t,this.caseSensitive=i,this.diacriticSensitive=c}static parse(i,c){if(2!==i.length)return c.error("Expected one argument.");const t=i[1];if("object"!=typeof t||Array.isArray(t))return c.error("Collator options argument must be an object.");const e=c.parse(void 0!==t["case-sensitive"]&&t["case-sensitive"],1,st);if(!e)return null;const r=c.parse(void 0!==t["diacritic-sensitive"]&&t["diacritic-sensitive"],1,st);if(!r)return null;let v=null;return t.locale&&(v=c.parse(t.locale,1,j),!v)?null:new Ji(e,r,v)}evaluate(i){return new Ke(this.caseSensitive.evaluate(i),this.diacriticSensitive.evaluate(i),this.locale?this.locale.evaluate(i):null)}eachChild(i){i(this.caseSensitive),i(this.diacriticSensitive),this.locale&&i(this.locale)}outputDefined(){return!1}serialize(){const i={};return i["case-sensitive"]=this.caseSensitive.serialize(),i["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(i.locale=this.locale.serialize()),["collator",i]}}const ei=8192;function Si(u,i){u[0]=Math.min(u[0],i[0]),u[1]=Math.min(u[1],i[1]),u[2]=Math.max(u[2],i[0]),u[3]=Math.max(u[3],i[1])}function li(u,i){return!(u[0]<=i[0]||u[2]>=i[2]||u[1]<=i[1]||u[3]>=i[3])}function Ti(u,i){const c=function Mi(u){return(180+u)/360}(u[0]),t=function _i(u){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+u*Math.PI/360)))/360}(u[1]),e=Math.pow(2,i.z);return[Math.round(c*e*ei),Math.round(t*e*ei)]}function Ai(u,i,c){const t=u[0]-i[0],e=u[1]-i[1],r=u[0]-c[0],v=u[1]-c[1];return t*v-r*e==0&&t*r<=0&&e*v<=0}function Je(u,i,c){return i[1]>u[1]!=c[1]>u[1]&&u[0]<(c[0]-i[0])*(u[1]-i[1])/(c[1]-i[1])+i[0]}function Be(u,i){let c=!1;for(let t=0,e=i.length;t<e;t++){const r=i[t];for(let v=0,x=r.length;v<x-1;v++){if(Ai(u,r[v],r[v+1]))return!1;Je(u,r[v],r[v+1])&&(c=!c)}}return c}function pi(u,i){for(let c=0;c<i.length;c++)if(Be(u,i[c]))return!0;return!1}function gn(u,i,c,t){const D=t[0]-c[0],G=t[1]-c[1],X=(u[0]-c[0])*G-D*(u[1]-c[1]),nt=(i[0]-c[0])*G-D*(i[1]-c[1]);return X>0&&nt<0||X<0&&nt>0}function mn(u,i,c,t){return 0!==function Ln(u,i){return u[0]*i[1]-u[1]*i[0]}([t[0]-c[0],t[1]-c[1]],[i[0]-u[0],i[1]-u[1]])&&!(!gn(u,i,c,t)||!gn(c,t,u,i))}function Pi(u,i,c){for(const t of c)for(let e=0;e<t.length-1;++e)if(mn(u,i,t[e],t[e+1]))return!0;return!1}function Ci(u,i){for(let c=0;c<u.length;++c)if(!Be(u[c],i))return!1;for(let c=0;c<u.length-1;++c)if(Pi(u[c],u[c+1],i))return!1;return!0}function Mn(u,i){for(let c=0;c<i.length;c++)if(Ci(u,i[c]))return!0;return!1}function ln(u,i,c){const t=[];for(let e=0;e<u.length;e++){const r=[];for(let v=0;v<u[e].length;v++){const x=Ti(u[e][v],c);Si(i,x),r.push(x)}t.push(r)}return t}function _s(u,i,c){const t=[];for(let e=0;e<u.length;e++){const r=ln(u[e],i,c);t.push(r)}return t}function Vn(u,i,c,t){if(u[0]<c[0]||u[0]>c[2]){const e=.5*t;let r=u[0]-c[0]>e?-t:c[0]-u[0]>e?t:0;0===r&&(r=u[0]-c[2]>e?-t:c[2]-u[0]>e?t:0),u[0]+=r}Si(i,u)}function Dn(u,i,c,t){const e=Math.pow(2,t.z)*ei,r=[t.x*ei,t.y*ei],v=[];if(!u)return v;for(const x of u)for(const D of x){const G=[D.x+r[0],D.y+r[1]];Vn(G,i,c,e),v.push(G)}return v}function Pn(u,i,c,t){const e=Math.pow(2,t.z)*ei,r=[t.x*ei,t.y*ei],v=[];if(!u)return v;for(const x of u){const D=[];for(const G of x){const X=[G.x+r[0],G.y+r[1]];Si(i,X),D.push(X)}v.push(D)}if(i[2]-i[0]<=e/2){!function Xs(u){u[0]=u[1]=1/0,u[2]=u[3]=-1/0}(i);for(const x of v)for(const D of x)Vn(D,i,c,e)}return v}class hn{constructor(i,c){this.type=st,this.geojson=i,this.geometries=c}static parse(i,c){if(2!==i.length)return c.error(`'within' expression requires exactly one argument, but found ${i.length-1} instead.`);if(tt(i[1])){const t=i[1];if("FeatureCollection"===t.type)for(let e=0;e<t.features.length;++e){const r=t.features[e].geometry.type;if("Polygon"===r||"MultiPolygon"===r)return new hn(t,t.features[e].geometry)}else if("Feature"===t.type){const e=t.geometry.type;if("Polygon"===e||"MultiPolygon"===e)return new hn(t,t.geometry)}else if("Polygon"===t.type||"MultiPolygon"===t.type)return new hn(t,t)}return c.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(i){if(null!=i.geometry()&&null!=i.canonicalID()){if("Point"===i.geometryType())return function ps(u,i){const c=[1/0,1/0,-1/0,-1/0],t=[1/0,1/0,-1/0,-1/0],e=u.canonicalID();if(!e)return!1;if("Polygon"===i.type){const r=ln(i.coordinates,t,e),v=Dn(u.geometry(),c,t,e);if(!li(c,t))return!1;for(const x of v)if(!Be(x,r))return!1}if("MultiPolygon"===i.type){const r=_s(i.coordinates,t,e),v=Dn(u.geometry(),c,t,e);if(!li(c,t))return!1;for(const x of v)if(!pi(x,r))return!1}return!0}(i,this.geometries);if("LineString"===i.geometryType())return function Vs(u,i){const c=[1/0,1/0,-1/0,-1/0],t=[1/0,1/0,-1/0,-1/0],e=u.canonicalID();if(!e)return!1;if("Polygon"===i.type){const r=ln(i.coordinates,t,e),v=Pn(u.geometry(),c,t,e);if(!li(c,t))return!1;for(const x of v)if(!Ci(x,r))return!1}if("MultiPolygon"===i.type){const r=_s(i.coordinates,t,e),v=Pn(u.geometry(),c,t,e);if(!li(c,t))return!1;for(const x of v)if(!Mn(x,r))return!1}return!0}(i,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}serialize(){return["within",this.geojson]}}var Yn=hn;function Fn(u){if(u instanceof Bi){if("get"===u.name&&1===u.args.length)return!1;if("feature-state"===u.name)return!1;if("has"===u.name&&1===u.args.length)return!1;if("properties"===u.name||"geometry-type"===u.name||"id"===u.name)return!1;if(/^filter-/.test(u.name))return!1}if(u instanceof Yn)return!1;let i=!0;return u.eachChild(c=>{i&&!Fn(c)&&(i=!1)}),i}function $n(u){if(u instanceof Bi&&"feature-state"===u.name)return!1;let i=!0;return u.eachChild(c=>{i&&!$n(c)&&(i=!1)}),i}function Nn(u,i){if(u instanceof Bi&&i.indexOf(u.name)>=0)return!1;let c=!0;return u.eachChild(t=>{c&&!Nn(t,i)&&(c=!1)}),c}class Hn{constructor(i,c){this.type=c.type,this.name=i,this.boundExpression=c}static parse(i,c){if(2!==i.length||"string"!=typeof i[1])return c.error("'var' expression requires exactly one string literal argument.");const t=i[1];return c.scope.has(t)?new Hn(t,c.scope.get(t)):c.error(`Unknown variable "${t}". Make sure "${t}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(i){return this.boundExpression.evaluate(i)}eachChild(){}outputDefined(){return!1}serialize(){return["var",this.name]}}var Jn=Hn;class Qn{constructor(i,c=[],t,e=new _,r=[]){this.registry=i,this.path=c,this.key=c.map(v=>`[${v}]`).join(""),this.scope=e,this.errors=r,this.expectedType=t}parse(i,c,t,e,r={}){return c?this.concat(c,t,e)._parse(i,r):this._parse(i,r)}_parse(i,c){function t(e,r,v){return"assert"===v?new Oe(r,[e]):"coerce"===v?new xi(r,[e]):e}if((null===i||"string"==typeof i||"boolean"==typeof i||"number"==typeof i)&&(i=["literal",i]),Array.isArray(i)){if(0===i.length)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const e=i[0];if("string"!=typeof e)return this.error(`Expression name must be a string, but found ${typeof e} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const r=this.registry[e];if(r){let v=r.parse(i,this);if(!v)return null;if(this.expectedType){const x=this.expectedType,D=v.type;if("string"!==x.kind&&"number"!==x.kind&&"boolean"!==x.kind&&"object"!==x.kind&&"array"!==x.kind||"value"!==D.kind)if("color"!==x.kind&&"formatted"!==x.kind&&"resolvedImage"!==x.kind||"value"!==D.kind&&"string"!==D.kind){if(this.checkSubtype(x,D))return null}else v=t(v,x,c.typeAnnotation||"coerce");else v=t(v,x,c.typeAnnotation||"assert")}if(!(v instanceof $t)&&"resolvedImage"!==v.type.kind&&qn(v)){const x=new ki;try{v=new $t(v.type,v.evaluate(x))}catch(D){return this.error(D.message),null}}return v}return this.error(`Unknown expression "${e}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(typeof i>"u"?"'undefined' value invalid. Use null instead.":"object"==typeof i?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof i} instead.`)}concat(i,c,t){const e="number"==typeof i?this.path.concat(i):this.path,r=t?this.scope.concat(t):this.scope;return new Qn(this.registry,e,c||null,r,this.errors)}error(i,...c){const t=`${this.key}${c.map(e=>`[${e}]`).join("")}`;this.errors.push(new it(t,i))}checkSubtype(i,c){const t=Ie(i,c);return t&&this.error(t),t}}var ys=Qn;function qn(u){if(u instanceof Jn)return qn(u.boundExpression);if(u instanceof Bi&&"error"===u.name)return!1;if(u instanceof Ji)return!1;if(u instanceof Yn)return!1;const i=u instanceof xi||u instanceof Oe;let c=!0;return u.eachChild(t=>{c=i?c&&qn(t):c&&t instanceof $t}),!!c&&Fn(u)&&Nn(u,["zoom","heatmap-density","line-progress","sky-radial-progress","accumulated","is-supported-script","pitch","distance-from-center"])}function Qi(u,i){const c=u.length-1;let v,x,t=0,e=c,r=0;for(;t<=e;)if(r=Math.floor((t+e)/2),v=u[r],x=u[r+1],v<=i){if(r===c||i<x)return r;t=r+1}else{if(!(v>i))throw new ae("Input is not a number.");e=r-1}return 0}class ts{constructor(i,c,t){this.type=i,this.input=c,this.labels=[],this.outputs=[];for(const[e,r]of t)this.labels.push(e),this.outputs.push(r)}static parse(i,c){if(i.length-1<4)return c.error(`Expected at least 4 arguments, but found only ${i.length-1}.`);if((i.length-1)%2!=0)return c.error("Expected an even number of arguments.");const t=c.parse(i[1],1,W);if(!t)return null;const e=[];let r=null;c.expectedType&&"value"!==c.expectedType.kind&&(r=c.expectedType);for(let v=1;v<i.length;v+=2){const x=1===v?-1/0:i[v],D=i[v+1],G=v,X=v+1;if("number"!=typeof x)return c.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',G);if(e.length&&e[e.length-1][0]>=x)return c.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',G);const nt=c.parse(D,X,r);if(!nt)return null;r=r||nt.type,e.push([x,nt])}return new ts(r,t,e)}evaluate(i){const c=this.labels,t=this.outputs;if(1===c.length)return t[0].evaluate(i);const e=this.input.evaluate(i);if(e<=c[0])return t[0].evaluate(i);const r=c.length;return e>=c[r-1]?t[r-1].evaluate(i):t[Qi(c,e)].evaluate(i)}eachChild(i){i(this.input);for(const c of this.outputs)i(c)}outputDefined(){return this.outputs.every(i=>i.outputDefined())}serialize(){const i=["step",this.input.serialize()];for(let c=0;c<this.labels.length;c++)c>0&&i.push(this.labels[c]),i.push(this.outputs[c].serialize());return i}}var vs=ts,Ys=un;function un(u,i,c,t){this.cx=3*u,this.bx=3*(c-u)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*i,this.by=3*(t-i)-this.cy,this.ay=1-this.cy-this.by,this.p1x=u,this.p1y=t,this.p2x=c,this.p2y=t}un.prototype.sampleCurveX=function(u){return((this.ax*u+this.bx)*u+this.cx)*u},un.prototype.sampleCurveY=function(u){return((this.ay*u+this.by)*u+this.cy)*u},un.prototype.sampleCurveDerivativeX=function(u){return(3*this.ax*u+2*this.bx)*u+this.cx},un.prototype.solveCurveX=function(u,i){var c,t,e,r,v;for(typeof i>"u"&&(i=1e-6),e=u,v=0;v<8;v++){if(r=this.sampleCurveX(e)-u,Math.abs(r)<i)return e;var x=this.sampleCurveDerivativeX(e);if(Math.abs(x)<1e-6)break;e-=r/x}if((e=u)<(c=0))return c;if(e>(t=1))return t;for(;c<t;){if(r=this.sampleCurveX(e),Math.abs(r-u)<i)return e;u>r?c=e:t=e,e=.5*(t-c)+c}return e},un.prototype.solve=function(u,i){return this.sampleCurveY(this.solveCurveX(u,i))};var Es=xt(Ys);function yi(u,i,c){return u*(1-c)+i*c}var es=Object.freeze({__proto__:null,number:yi,color:function $s(u,i,c){return new It(yi(u.r,i.r,c),yi(u.g,i.g,c),yi(u.b,i.b,c),yi(u.a,i.a,c))},array:function xs(u,i,c){return u.map((t,e)=>yi(t,i[e],c))}});const Ts=4/29,cn=6/29,Wi=3*cn*cn,Hs=cn*cn*cn,ns=Math.PI/180,Js=180/Math.PI;function ss(u){return u>Hs?Math.pow(u,1/3):u/Wi+Ts}function Zn(u){return u>cn?u*u*u:Wi*(u-Ts)}function rs(u){return 255*(u<=.0031308?12.92*u:1.055*Math.pow(u,1/2.4)-.055)}function _n(u){return(u/=255)<=.04045?u/12.92:Math.pow((u+.055)/1.055,2.4)}function Un(u){const i=_n(u.r),c=_n(u.g),t=_n(u.b),e=ss((.4124564*i+.3575761*c+.1804375*t)/.95047),r=ss((.2126729*i+.7151522*c+.072175*t)/1);return{l:116*r-16,a:500*(e-r),b:200*(r-ss((.0193339*i+.119192*c+.9503041*t)/1.08883)),alpha:u.a}}function wi(u){let i=(u.l+16)/116,c=isNaN(u.a)?i:i+u.a/500,t=isNaN(u.b)?i:i-u.b/200;return i=1*Zn(i),c=.95047*Zn(c),t=1.08883*Zn(t),new It(rs(3.2404542*c-1.5371385*i-.4985314*t),rs(-.969266*c+1.8760108*i+.041556*t),rs(.0556434*c-.2040259*i+1.0572252*t),u.alpha)}function tr(u,i,c){const t=i-u;return u+c*(t>180||t<-180?t-360*Math.round(t/360):t)}const lt={forward:Un,reverse:wi,interpolate:function Qs(u,i,c){return{l:yi(u.l,i.l,c),a:yi(u.a,i.a,c),b:yi(u.b,i.b,c),alpha:yi(u.alpha,i.alpha,c)}}},gt_forward=function qs(u){const{l:i,a:c,b:t}=Un(u),e=Math.atan2(t,c)*Js;return{h:e<0?e+360:e,c:Math.sqrt(c*c+t*t),l:i,alpha:u.a}},gt_reverse=function os(u){const i=u.h*ns,c=u.c;return wi({l:u.l,a:Math.cos(i)*c,b:Math.sin(i)*c,alpha:u.alpha})},gt_interpolate=function Kt(u,i,c){return{h:tr(u.h,i.h,c),c:yi(u.c,i.c,c),l:yi(u.l,i.l,c),alpha:yi(u.alpha,i.alpha,c)}};class yt{constructor(i,c,t,e,r){this.type=i,this.operator=c,this.interpolation=t,this.input=e,this.labels=[],this.outputs=[];for(const[v,x]of r)this.labels.push(v),this.outputs.push(x)}static interpolationFactor(i,c,t,e){let r=0;if("exponential"===i.name)r=Nt(c,i.base,t,e);else if("linear"===i.name)r=Nt(c,1,t,e);else if("cubic-bezier"===i.name){const v=i.controlPoints;r=new Es(v[0],v[1],v[2],v[3]).solve(Nt(c,1,t,e))}return r}static parse(i,c){let[t,e,r,...v]=i;if(!Array.isArray(e)||0===e.length)return c.error("Expected an interpolation type expression.",1);if("linear"===e[0])e={name:"linear"};else if("exponential"===e[0]){const G=e[1];if("number"!=typeof G)return c.error("Exponential interpolation requires a numeric base.",1,1);e={name:"exponential",base:G}}else{if("cubic-bezier"!==e[0])return c.error(`Unknown interpolation type ${String(e[0])}`,1,0);{const G=e.slice(1);if(4!==G.length||G.some(X=>"number"!=typeof X||X<0||X>1))return c.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);e={name:"cubic-bezier",controlPoints:G}}}if(i.length-1<4)return c.error(`Expected at least 4 arguments, but found only ${i.length-1}.`);if((i.length-1)%2!=0)return c.error("Expected an even number of arguments.");if(r=c.parse(r,2,W),!r)return null;const x=[];let D=null;"interpolate-hcl"===t||"interpolate-lab"===t?D=dt:c.expectedType&&"value"!==c.expectedType.kind&&(D=c.expectedType);for(let G=0;G<v.length;G+=2){const X=v[G],nt=v[G+1],ct=G+3,Tt=G+4;if("number"!=typeof X)return c.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',ct);if(x.length&&x[x.length-1][0]>=X)return c.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',ct);const Pt=c.parse(nt,Tt,D);if(!Pt)return null;D=D||Pt.type,x.push([X,Pt])}return"number"===D.kind||"color"===D.kind||"array"===D.kind&&"number"===D.itemType.kind&&"number"==typeof D.N?new yt(D,t,e,r,x):c.error(`Type ${ge(D)} is not interpolatable.`)}evaluate(i){const c=this.labels,t=this.outputs;if(1===c.length)return t[0].evaluate(i);const e=this.input.evaluate(i);if(e<=c[0])return t[0].evaluate(i);const r=c.length;if(e>=c[r-1])return t[r-1].evaluate(i);const v=Qi(c,e),G=yt.interpolationFactor(this.interpolation,e,c[v],c[v+1]),X=t[v].evaluate(i),nt=t[v+1].evaluate(i);return"interpolate"===this.operator?es[this.type.kind.toLowerCase()](X,nt,G):"interpolate-hcl"===this.operator?gt_reverse(gt_interpolate(gt_forward(X),gt_forward(nt),G)):lt.reverse(lt.interpolate(lt.forward(X),lt.forward(nt),G))}eachChild(i){i(this.input);for(const c of this.outputs)i(c)}outputDefined(){return this.outputs.every(i=>i.outputDefined())}serialize(){let i;i="linear"===this.interpolation.name?["linear"]:"exponential"===this.interpolation.name?1===this.interpolation.base?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);const c=[this.operator,i,this.input.serialize()];for(let t=0;t<this.labels.length;t++)c.push(this.labels[t],this.outputs[t].serialize());return c}}function Nt(u,i,c,t){const e=t-c,r=u-c;return 0===e?0:1===i?r/e:(Math.pow(i,r)-1)/(Math.pow(i,e)-1)}var Jt=yt;class ie{constructor(i,c){this.type=i,this.args=c}static parse(i,c){if(i.length<2)return c.error("Expectected at least one argument.");let t=null;const e=c.expectedType;e&&"value"!==e.kind&&(t=e);const r=[];for(const x of i.slice(1)){const D=c.parse(x,1+r.length,t,void 0,{typeAnnotation:"omit"});if(!D)return null;t=t||D.type,r.push(D)}return e&&r.some(x=>Ie(e,x.type))?new ie(Ct,r):new ie(t,r)}evaluate(i){let e,c=null,t=0;for(const r of this.args){if(t++,c=r.evaluate(i),c&&c instanceof Ce&&!c.available&&(e||(e=c),c=null,t===this.args.length))return e;if(null!==c)break}return c}eachChild(i){this.args.forEach(i)}outputDefined(){return this.args.every(i=>i.outputDefined())}serialize(){const i=["coalesce"];return this.eachChild(c=>{i.push(c.serialize())}),i}}var ce=ie;class me{constructor(i,c){this.type=c.type,this.bindings=[].concat(i),this.result=c}evaluate(i){return this.result.evaluate(i)}eachChild(i){for(const c of this.bindings)i(c[1]);i(this.result)}static parse(i,c){if(i.length<4)return c.error(`Expected at least 3 arguments, but found ${i.length-1} instead.`);const t=[];for(let r=1;r<i.length-1;r+=2){const v=i[r];if("string"!=typeof v)return c.error(`Expected string, but found ${typeof v} instead.`,r);if(/[^a-zA-Z0-9_]/.test(v))return c.error("Variable names must contain only alphanumeric characters or '_'.",r);const x=c.parse(i[r+1],r+1);if(!x)return null;t.push([v,x])}const e=c.parse(i[i.length-1],i.length-1,c.expectedType,t);return e?new me(t,e):null}outputDefined(){return this.result.outputDefined()}serialize(){const i=["let"];for(const[c,t]of this.bindings)i.push(c,t.serialize());return i.push(this.result.serialize()),i}}var Re=me;class Ne{constructor(i,c,t){this.type=i,this.index=c,this.input=t}static parse(i,c){if(3!==i.length)return c.error(`Expected 2 arguments, but found ${i.length-1} instead.`);const t=c.parse(i[1],1,W),e=c.parse(i[2],2,Qt(c.expectedType||Ct));return t&&e?new Ne(e.type.itemType,t,e):null}evaluate(i){const c=this.index.evaluate(i),t=this.input.evaluate(i);if(c<0)throw new ae(`Array index out of bounds: ${c} < 0.`);if(c>=t.length)throw new ae(`Array index out of bounds: ${c} > ${t.length-1}.`);if(c!==Math.floor(c))throw new ae(`Array index must be an integer, but found ${c} instead.`);return t[c]}eachChild(i){i(this.index),i(this.input)}outputDefined(){return!1}serialize(){return["at",this.index.serialize(),this.input.serialize()]}}var Xe=Ne;class Ge{constructor(i,c){this.type=st,this.needle=i,this.haystack=c}static parse(i,c){if(3!==i.length)return c.error(`Expected 2 arguments, but found ${i.length-1} instead.`);const t=c.parse(i[1],1,Ct),e=c.parse(i[2],2,Ct);return t&&e?De(t.type,[st,j,W,Z,Ct])?new Ge(t,e):c.error(`Expected first argument to be of type boolean, string, number or null, but found ${ge(t.type)} instead`):null}evaluate(i){const c=this.needle.evaluate(i),t=this.haystack.evaluate(i);if(null==t)return!1;if(!je(c,["boolean","string","number","null"]))throw new ae(`Expected first argument to be of type boolean, string, number or null, but found ${ge(_t(c))} instead.`);if(!je(t,["string","array"]))throw new ae(`Expected second argument to be of type array or string, but found ${ge(_t(t))} instead.`);return t.indexOf(c)>=0}eachChild(i){i(this.needle),i(this.haystack)}outputDefined(){return!0}serialize(){return["in",this.needle.serialize(),this.haystack.serialize()]}}var si=Ge;class Qe{constructor(i,c,t){this.type=W,this.needle=i,this.haystack=c,this.fromIndex=t}static parse(i,c){if(i.length<=2||i.length>=5)return c.error(`Expected 3 or 4 arguments, but found ${i.length-1} instead.`);const t=c.parse(i[1],1,Ct),e=c.parse(i[2],2,Ct);if(!t||!e)return null;if(!De(t.type,[st,j,W,Z,Ct]))return c.error(`Expected first argument to be of type boolean, string, number or null, but found ${ge(t.type)} instead`);if(4===i.length){const r=c.parse(i[3],3,W);return r?new Qe(t,e,r):null}return new Qe(t,e)}evaluate(i){const c=this.needle.evaluate(i),t=this.haystack.evaluate(i);if(!je(c,["boolean","string","number","null"]))throw new ae(`Expected first argument to be of type boolean, string, number or null, but found ${ge(_t(c))} instead.`);if(!je(t,["string","array"]))throw new ae(`Expected second argument to be of type array or string, but found ${ge(_t(t))} instead.`);if(this.fromIndex){const e=this.fromIndex.evaluate(i);return t.indexOf(c,e)}return t.indexOf(c)}eachChild(i){i(this.needle),i(this.haystack),this.fromIndex&&i(this.fromIndex)}outputDefined(){return!1}serialize(){if(null!=this.fromIndex&&void 0!==this.fromIndex){const i=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),i]}return["index-of",this.needle.serialize(),this.haystack.serialize()]}}var Ki=Qe;class ii{constructor(i,c,t,e,r,v){this.inputType=i,this.type=c,this.input=t,this.cases=e,this.outputs=r,this.otherwise=v}static parse(i,c){if(i.length<5)return c.error(`Expected at least 4 arguments, but found only ${i.length-1}.`);if(i.length%2!=1)return c.error("Expected an even number of arguments.");let t,e;c.expectedType&&"value"!==c.expectedType.kind&&(e=c.expectedType);const r={},v=[];for(let G=2;G<i.length-1;G+=2){let X=i[G];const nt=i[G+1];Array.isArray(X)||(X=[X]);const ct=c.concat(G);if(0===X.length)return ct.error("Expected at least one branch label.");for(const Pt of X){if("number"!=typeof Pt&&"string"!=typeof Pt)return ct.error("Branch labels must be numbers or strings.");if("number"==typeof Pt&&Math.abs(Pt)>Number.MAX_SAFE_INTEGER)return ct.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if("number"==typeof Pt&&Math.floor(Pt)!==Pt)return ct.error("Numeric branch labels must be integer values.");if(t){if(ct.checkSubtype(t,_t(Pt)))return null}else t=_t(Pt);if(typeof r[String(Pt)]<"u")return ct.error("Branch labels must be unique.");r[String(Pt)]=v.length}const Tt=c.parse(nt,G,e);if(!Tt)return null;e=e||Tt.type,v.push(Tt)}const x=c.parse(i[1],1,Ct);if(!x)return null;const D=c.parse(i[i.length-1],i.length-1,e);return!D||"value"!==x.type.kind&&c.concat(1).checkSubtype(t,x.type)?null:new ii(t,e,x,r,v,D)}evaluate(i){const c=this.input.evaluate(i);return(_t(c)===this.inputType&&this.outputs[this.cases[c]]||this.otherwise).evaluate(i)}eachChild(i){i(this.input),this.outputs.forEach(i),i(this.otherwise)}outputDefined(){return this.outputs.every(i=>i.outputDefined())&&this.otherwise.outputDefined()}serialize(){const i=["match",this.input.serialize()],c=Object.keys(this.cases).sort(),t=[],e={};for(const v of c){const x=e[this.cases[v]];void 0===x?(e[this.cases[v]]=t.length,t.push([this.cases[v],[v]])):t[x][1].push(v)}const r=v=>"number"===this.inputType.kind?Number(v):v;for(const[v,x]of t)i.push(1===x.length?r(x[0]):x.map(r)),i.push(this.outputs[v].serialize());return i.push(this.otherwise.serialize()),i}}var vi=ii;class gi{constructor(i,c,t){this.type=i,this.branches=c,this.otherwise=t}static parse(i,c){if(i.length<4)return c.error(`Expected at least 3 arguments, but found only ${i.length-1}.`);if(i.length%2!=0)return c.error("Expected an odd number of arguments.");let t;c.expectedType&&"value"!==c.expectedType.kind&&(t=c.expectedType);const e=[];for(let v=1;v<i.length-1;v+=2){const x=c.parse(i[v],v,st);if(!x)return null;const D=c.parse(i[v+1],v+1,t);if(!D)return null;e.push([x,D]),t=t||D.type}const r=c.parse(i[i.length-1],i.length-1,t);return r?new gi(t,e,r):null}evaluate(i){for(const[c,t]of this.branches)if(c.evaluate(i))return t.evaluate(i);return this.otherwise.evaluate(i)}eachChild(i){for(const[c,t]of this.branches)i(c),i(t);i(this.otherwise)}outputDefined(){return this.branches.every(([i,c])=>c.outputDefined())&&this.otherwise.outputDefined()}serialize(){const i=["case"];return this.eachChild(c=>{i.push(c.serialize())}),i}}var bi=gi;class mi{constructor(i,c,t,e){this.type=i,this.input=c,this.beginIndex=t,this.endIndex=e}static parse(i,c){if(i.length<=2||i.length>=5)return c.error(`Expected 3 or 4 arguments, but found ${i.length-1} instead.`);const t=c.parse(i[1],1,Ct),e=c.parse(i[2],2,W);if(!t||!e)return null;if(!De(t.type,[Qt(Ct),j,Ct]))return c.error(`Expected first argument to be of type array or string, but found ${ge(t.type)} instead`);if(4===i.length){const r=c.parse(i[3],3,W);return r?new mi(t.type,t,e,r):null}return new mi(t.type,t,e)}evaluate(i){const c=this.input.evaluate(i),t=this.beginIndex.evaluate(i);if(!je(c,["string","array"]))throw new ae(`Expected first argument to be of type array or string, but found ${ge(_t(c))} instead.`);if(this.endIndex){const e=this.endIndex.evaluate(i);return c.slice(t,e)}return c.slice(t)}eachChild(i){i(this.input),i(this.beginIndex),this.endIndex&&i(this.endIndex)}outputDefined(){return!1}serialize(){if(null!=this.endIndex&&void 0!==this.endIndex){const i=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),i]}return["slice",this.input.serialize(),this.beginIndex.serialize()]}}var Tn=mi;function qi(u,i){return"=="===u||"!="===u?"boolean"===i.kind||"string"===i.kind||"number"===i.kind||"null"===i.kind||"value"===i.kind:"string"===i.kind||"number"===i.kind||"value"===i.kind}function jn(u,i,c,t){return 0===t.compare(i,c)}function Xi(u,i,c){const t="=="!==u&&"!="!==u;return class Ma{constructor(r,v,x){this.type=st,this.lhs=r,this.rhs=v,this.collator=x,this.hasUntypedArgument="value"===r.type.kind||"value"===v.type.kind}static parse(r,v){if(3!==r.length&&4!==r.length)return v.error("Expected two or three arguments.");const x=r[0];let D=v.parse(r[1],1,Ct);if(!D)return null;if(!qi(x,D.type))return v.concat(1).error(`"${x}" comparisons are not supported for type '${ge(D.type)}'.`);let G=v.parse(r[2],2,Ct);if(!G)return null;if(!qi(x,G.type))return v.concat(2).error(`"${x}" comparisons are not supported for type '${ge(G.type)}'.`);if(D.type.kind!==G.type.kind&&"value"!==D.type.kind&&"value"!==G.type.kind)return v.error(`Cannot compare types '${ge(D.type)}' and '${ge(G.type)}'.`);t&&("value"===D.type.kind&&"value"!==G.type.kind?D=new Oe(G.type,[D]):"value"!==D.type.kind&&"value"===G.type.kind&&(G=new Oe(D.type,[G])));let X=null;if(4===r.length){if("string"!==D.type.kind&&"string"!==G.type.kind&&"value"!==D.type.kind&&"value"!==G.type.kind)return v.error("Cannot use collator to compare non-string types.");if(X=v.parse(r[3],3,qt),!X)return null}return new Ma(D,G,X)}evaluate(r){const v=this.lhs.evaluate(r),x=this.rhs.evaluate(r);if(t&&this.hasUntypedArgument){const D=_t(v),G=_t(x);if(D.kind!==G.kind||"string"!==D.kind&&"number"!==D.kind)throw new ae(`Expected arguments for "${u}" to be (string, string) or (number, number), but found (${D.kind}, ${G.kind}) instead.`)}if(this.collator&&!t&&this.hasUntypedArgument){const D=_t(v),G=_t(x);if("string"!==D.kind||"string"!==G.kind)return i(r,v,x)}return this.collator?c(r,v,x,this.collator.evaluate(r)):i(r,v,x)}eachChild(r){r(this.lhs),r(this.rhs),this.collator&&r(this.collator)}outputDefined(){return!0}serialize(){const r=[u];return this.eachChild(v=>{r.push(v.serialize())}),r}}}const xo=Xi("==",function Di(u,i,c){return i===c},jn),Mo=Xi("!=",function Cs(u,i,c){return i!==c},function er(u,i,c,t){return!jn(0,i,c,t)}),Po=Xi("<",function as(u,i,c){return i<c},function po(u,i,c,t){return t.compare(i,c)<0}),To=Xi(">",function Cn(u,i,c){return i>c},function yo(u,i,c,t){return t.compare(i,c)>0}),Co=Xi("<=",function Rs(u,i,c){return i<=c},function vo(u,i,c,t){return t.compare(i,c)<=0}),Ro=Xi(">=",function Is(u,i,c){return i>=c},function Eo(u,i,c,t){return t.compare(i,c)>=0});class ir{constructor(i,c,t,e,r,v){this.type=j,this.number=i,this.locale=c,this.currency=t,this.unit=e,this.minFractionDigits=r,this.maxFractionDigits=v}static parse(i,c){if(3!==i.length)return c.error("Expected two arguments.");const t=c.parse(i[1],1,W);if(!t)return null;const e=i[2];if("object"!=typeof e||Array.isArray(e))return c.error("NumberFormat options argument must be an object.");let r=null;if(e.locale&&(r=c.parse(e.locale,1,j),!r))return null;let v=null;if(e.currency&&(v=c.parse(e.currency,1,j),!v))return null;let x=null;if(e.unit&&(x=c.parse(e.unit,1,j),!x))return null;let D=null;if(e["min-fraction-digits"]&&(D=c.parse(e["min-fraction-digits"],1,W),!D))return null;let G=null;return e["max-fraction-digits"]&&(G=c.parse(e["max-fraction-digits"],1,W),!G)?null:new ir(t,r,v,x,D,G)}evaluate(i){return new Intl.NumberFormat(this.locale?this.locale.evaluate(i):[],{style:(this.currency?"currency":this.unit&&"unit")||"decimal",currency:this.currency?this.currency.evaluate(i):void 0,unit:this.unit?this.unit.evaluate(i):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(i):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(i):void 0}).format(this.number.evaluate(i))}eachChild(i){i(this.number),this.locale&&i(this.locale),this.currency&&i(this.currency),this.unit&&i(this.unit),this.minFractionDigits&&i(this.minFractionDigits),this.maxFractionDigits&&i(this.maxFractionDigits)}outputDefined(){return!1}serialize(){const i={};return this.locale&&(i.locale=this.locale.serialize()),this.currency&&(i.currency=this.currency.serialize()),this.unit&&(i.unit=this.unit.serialize()),this.minFractionDigits&&(i["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(i["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),i]}}class nr{constructor(i){this.type=W,this.input=i}static parse(i,c){if(2!==i.length)return c.error(`Expected 1 argument, but found ${i.length-1} instead.`);const t=c.parse(i[1],1);return t?"array"!==t.type.kind&&"string"!==t.type.kind&&"value"!==t.type.kind?c.error(`Expected argument of type string or array, but found ${ge(t.type)} instead.`):new nr(t):null}evaluate(i){const c=this.input.evaluate(i);if("string"==typeof c)return c.length;if(Array.isArray(c))return c.length;throw new ae(`Expected value to be of type string or array, but found ${ge(_t(c))} instead.`)}eachChild(i){i(this.input)}outputDefined(){return!1}serialize(){const i=["length"];return this.eachChild(c=>{i.push(c.serialize())}),i}}const Lr={"==":xo,"!=":Mo,">":To,"<":Po,">=":Ro,"<=":Co,array:Oe,at:Xe,boolean:Oe,case:bi,coalesce:ce,collator:Ji,format:Fe,image:Ue,in:si,"index-of":Ki,interpolate:Jt,"interpolate-hcl":Jt,"interpolate-lab":Jt,length:nr,let:Re,literal:$t,match:vi,number:Oe,"number-format":ir,object:Oe,slice:Tn,step:vs,string:Oe,"to-boolean":xi,"to-color":xi,"to-number":xi,"to-string":xi,var:Jn,within:Yn};function Dr(u,[i,c,t,e]){i=i.evaluate(u),c=c.evaluate(u),t=t.evaluate(u);const r=e?e.evaluate(u):1,v=q(i,c,t,r);if(v)throw new ae(v);return new It(i/255*r,c/255*r,t/255*r,r)}function Fr(u,i){return u in i}function sr(u,i){const c=i[u];return typeof c>"u"?null:c}function Rn(u){return{type:u}}Bi.register(Lr,{error:[{kind:"error"},[j],(u,[i])=>{throw new ae(i.evaluate(u))}],typeof:[j,[Ct],(u,[i])=>ge(_t(i.evaluate(u)))],"to-rgba":[Qt(W,4),[dt],(u,[i])=>i.evaluate(u).toArray()],rgb:[dt,[W,W,W],Dr],rgba:[dt,[W,W,W,W],Dr],has:{type:st,overloads:[[[j],(u,[i])=>Fr(i.evaluate(u),u.properties())],[[j,Ot],(u,[i,c])=>Fr(i.evaluate(u),c.evaluate(u))]]},get:{type:Ct,overloads:[[[j],(u,[i])=>sr(i.evaluate(u),u.properties())],[[j,Ot],(u,[i,c])=>sr(i.evaluate(u),c.evaluate(u))]]},"feature-state":[Ct,[j],(u,[i])=>sr(i.evaluate(u),u.featureState||{})],properties:[Ot,[],u=>u.properties()],"geometry-type":[j,[],u=>u.geometryType()],id:[Ct,[],u=>u.id()],zoom:[W,[],u=>u.globals.zoom],pitch:[W,[],u=>u.globals.pitch||0],"distance-from-center":[W,[],u=>u.distanceFromCenter()],"heatmap-density":[W,[],u=>u.globals.heatmapDensity||0],"line-progress":[W,[],u=>u.globals.lineProgress||0],"sky-radial-progress":[W,[],u=>u.globals.skyRadialProgress||0],accumulated:[Ct,[],u=>void 0===u.globals.accumulated?null:u.globals.accumulated],"+":[W,Rn(W),(u,i)=>{let c=0;for(const t of i)c+=t.evaluate(u);return c}],"*":[W,Rn(W),(u,i)=>{let c=1;for(const t of i)c*=t.evaluate(u);return c}],"-":{type:W,overloads:[[[W,W],(u,[i,c])=>i.evaluate(u)-c.evaluate(u)],[[W],(u,[i])=>-i.evaluate(u)]]},"/":[W,[W,W],(u,[i,c])=>i.evaluate(u)/c.evaluate(u)],"%":[W,[W,W],(u,[i,c])=>i.evaluate(u)%c.evaluate(u)],ln2:[W,[],()=>Math.LN2],pi:[W,[],()=>Math.PI],e:[W,[],()=>Math.E],"^":[W,[W,W],(u,[i,c])=>Math.pow(i.evaluate(u),c.evaluate(u))],sqrt:[W,[W],(u,[i])=>Math.sqrt(i.evaluate(u))],log10:[W,[W],(u,[i])=>Math.log(i.evaluate(u))/Math.LN10],ln:[W,[W],(u,[i])=>Math.log(i.evaluate(u))],log2:[W,[W],(u,[i])=>Math.log(i.evaluate(u))/Math.LN2],sin:[W,[W],(u,[i])=>Math.sin(i.evaluate(u))],cos:[W,[W],(u,[i])=>Math.cos(i.evaluate(u))],tan:[W,[W],(u,[i])=>Math.tan(i.evaluate(u))],asin:[W,[W],(u,[i])=>Math.asin(i.evaluate(u))],acos:[W,[W],(u,[i])=>Math.acos(i.evaluate(u))],atan:[W,[W],(u,[i])=>Math.atan(i.evaluate(u))],min:[W,Rn(W),(u,i)=>Math.min(...i.map(c=>c.evaluate(u)))],max:[W,Rn(W),(u,i)=>Math.max(...i.map(c=>c.evaluate(u)))],abs:[W,[W],(u,[i])=>Math.abs(i.evaluate(u))],round:[W,[W],(u,[i])=>{const c=i.evaluate(u);return c<0?-Math.round(-c):Math.round(c)}],floor:[W,[W],(u,[i])=>Math.floor(i.evaluate(u))],ceil:[W,[W],(u,[i])=>Math.ceil(i.evaluate(u))],"filter-==":[st,[j,Ct],(u,[i,c])=>u.properties()[i.value]===c.value],"filter-id-==":[st,[Ct],(u,[i])=>u.id()===i.value],"filter-type-==":[st,[j],(u,[i])=>u.geometryType()===i.value],"filter-<":[st,[j,Ct],(u,[i,c])=>{const t=u.properties()[i.value],e=c.value;return typeof t==typeof e&&t<e}],"filter-id-<":[st,[Ct],(u,[i])=>{const c=u.id(),t=i.value;return typeof c==typeof t&&c<t}],"filter->":[st,[j,Ct],(u,[i,c])=>{const t=u.properties()[i.value],e=c.value;return typeof t==typeof e&&t>e}],"filter-id->":[st,[Ct],(u,[i])=>{const c=u.id(),t=i.value;return typeof c==typeof t&&c>t}],"filter-<=":[st,[j,Ct],(u,[i,c])=>{const t=u.properties()[i.value],e=c.value;return typeof t==typeof e&&t<=e}],"filter-id-<=":[st,[Ct],(u,[i])=>{const c=u.id(),t=i.value;return typeof c==typeof t&&c<=t}],"filter->=":[st,[j,Ct],(u,[i,c])=>{const t=u.properties()[i.value],e=c.value;return typeof t==typeof e&&t>=e}],"filter-id->=":[st,[Ct],(u,[i])=>{const c=u.id(),t=i.value;return typeof c==typeof t&&c>=t}],"filter-has":[st,[Ct],(u,[i])=>i.value in u.properties()],"filter-has-id":[st,[],u=>null!==u.id()&&void 0!==u.id()],"filter-type-in":[st,[Qt(j)],(u,[i])=>i.value.indexOf(u.geometryType())>=0],"filter-id-in":[st,[Qt(Ct)],(u,[i])=>i.value.indexOf(u.id())>=0],"filter-in-small":[st,[j,Qt(Ct)],(u,[i,c])=>c.value.indexOf(u.properties()[i.value])>=0],"filter-in-large":[st,[j,Qt(Ct)],(u,[i,c])=>function Oo(u,i,c,t){for(;c<=t;){const e=c+t>>1;if(i[e]===u)return!0;i[e]>u?t=e-1:c=e+1}return!1}(u.properties()[i.value],c.value,0,c.value.length-1)],all:{type:st,overloads:[[[st,st],(u,[i,c])=>i.evaluate(u)&&c.evaluate(u)],[Rn(st),(u,i)=>{for(const c of i)if(!c.evaluate(u))return!1;return!0}]]},any:{type:st,overloads:[[[st,st],(u,[i,c])=>i.evaluate(u)||c.evaluate(u)],[Rn(st),(u,i)=>{for(const c of i)if(c.evaluate(u))return!0;return!1}]]},"!":[st,[st],(u,[i])=>!i.evaluate(u)],"is-supported-script":[st,[j],(u,[i])=>{const c=u.globals&&u.globals.isSupportedScript;return!c||c(i.evaluate(u))}],upcase:[j,[j],(u,[i])=>i.evaluate(u).toUpperCase()],downcase:[j,[j],(u,[i])=>i.evaluate(u).toLowerCase()],concat:[j,Rn(Ct),(u,i)=>i.map(c=>vt(c.evaluate(u))).join("")],"resolved-locale":[j,[qt],(u,[i])=>i.evaluate(u).resolvedLocale()]});var Nr=Lr;function Ei(u){return{result:"success",value:u}}function tn(u){return{result:"error",value:u}}function In(u){return"object"==typeof u&&null!==u&&!Array.isArray(u)}class Bn{constructor(i,c){this.expression=i,this._warningHistory={},this._evaluator=new ki,this._defaultValue=c?function Ao(u){return"color"===u.type&&(In(u.default)||Array.isArray(u.default))?new It(0,0,0,0):"color"===u.type?It.parse(u.default)||null:void 0===u.default?null:u.default}(c):null,this._enumValues=c&&"enum"===c.type?c.values:null}evaluateWithoutErrorHandling(i,c,t,e,r,v,x,D){return this._evaluator.globals=i,this._evaluator.feature=c,this._evaluator.featureState=t,this._evaluator.canonical=e||null,this._evaluator.availableImages=r||null,this._evaluator.formattedSection=v,this._evaluator.featureTileCoord=x||null,this._evaluator.featureDistanceData=D||null,this.expression.evaluate(this._evaluator)}evaluate(i,c,t,e,r,v,x,D){this._evaluator.globals=i,this._evaluator.feature=c||null,this._evaluator.featureState=t||null,this._evaluator.canonical=e||null,this._evaluator.availableImages=r||null,this._evaluator.formattedSection=v||null,this._evaluator.featureTileCoord=x||null,this._evaluator.featureDistanceData=D||null;try{const G=this.expression.evaluate(this._evaluator);if(null==G||"number"==typeof G&&G!=G)return this._defaultValue;if(this._enumValues&&!(G in this._enumValues))throw new ae(`Expected value to be one of ${Object.keys(this._enumValues).map(X=>JSON.stringify(X)).join(", ")}, but found ${JSON.stringify(G)} instead.`);return G}catch(G){return this._warningHistory[G.message]||(this._warningHistory[G.message]=!0,typeof console<"u"&&console.warn(G.message)),this._defaultValue}}}function rr(u,i){const c=new ys(Nr,[],i?function pn(u){const i={color:dt,string:j,number:W,enum:j,boolean:st,formatted:ne,resolvedImage:oe};return"array"===u.type?Qt(i[u.value]||Ct,u.length):i[u.type]}(i):void 0),t=c.parse(u,void 0,void 0,void 0,i&&"string"===i.type?{typeAnnotation:"coerce"}:void 0);return t?Ei(new Bn(t,i)):tn(c.errors)}class Zr{constructor(i,c){this.kind=i,this._styleExpression=c,this.isStateDependent="constant"!==i&&!$n(c.expression)}evaluateWithoutErrorHandling(i,c,t,e,r,v){return this._styleExpression.evaluateWithoutErrorHandling(i,c,t,e,r,v)}evaluate(i,c,t,e,r,v){return this._styleExpression.evaluate(i,c,t,e,r,v)}}class Ur{constructor(i,c,t,e){this.kind=i,this.zoomStops=t,this._styleExpression=c,this.isStateDependent="camera"!==i&&!$n(c.expression),this.interpolationType=e}evaluateWithoutErrorHandling(i,c,t,e,r,v){return this._styleExpression.evaluateWithoutErrorHandling(i,c,t,e,r,v)}evaluate(i,c,t,e,r,v){return this._styleExpression.evaluate(i,c,t,e,r,v)}interpolationFactor(i,c,t){return this.interpolationType?Jt.interpolationFactor(this.interpolationType,i,c,t):0}}function So(u,i){if("error"===(u=rr(u,i)).result)return u;const c=u.value.expression,t=Fn(c);if(!t&&!function ls(u){return"data-driven"===u["property-type"]}(i))return tn([new it("","data expressions not supported")]);const e=Nn(c,["zoom","pitch","distance-from-center"]);if(!e&&!function hs(u){return!!u.expression&&u.expression.parameters.indexOf("zoom")>-1}(i))return tn([new it("","zoom expressions not supported")]);const r=Ss(c);if(!r&&!e)return tn([new it("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')]);if(r instanceof it)return tn([r]);if(r instanceof Jt&&!function us(u){return!!u.expression&&u.expression.interpolated}(i))return tn([new it("",'"interpolate" expressions cannot be used with this property')]);if(!r)return Ei(new Zr(t?"constant":"source",u.value));return Ei(new Ur(t?"camera":"composite",u.value,r.labels,r instanceof Jt?r.interpolation:void 0))}function Ss(u){let i=null;if(u instanceof Re)i=Ss(u.result);else if(u instanceof ce){for(const c of u.args)if(i=Ss(c),i)break}else(u instanceof vs||u instanceof Jt)&&u.input instanceof Bi&&"zoom"===u.input.name&&(i=u);return i instanceof it||u.eachChild(c=>{const t=Ss(c);t instanceof it?i=t:!i&&t?i=new it("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):i&&t&&i!==t&&(i=new it("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),i}function or(u){if(Array.isArray(u))return u.map(or);if(u instanceof Object&&!(u instanceof Number||u instanceof String||u instanceof Boolean)){const i={};for(const c in u)i[c]=or(u[c]);return i}return function wo(u){return u instanceof Number||u instanceof String||u instanceof Boolean?u.valueOf():u}(u)}var jr={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},terrain:{type:"terrain"},fog:{type:"fog"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},projection:{type:"projection"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{},sky:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background","layout_sky"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_sky:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"},"fill-extrusion-edge-radius":{type:"number",private:!0,default:0,minimum:0,maximum:1,"property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_symbol:{type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature","pitch","distance-from-center"]}},filter_fill:{type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},filter_line:{type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},filter_circle:{type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},"filter_fill-extrusion":{type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},filter_heatmap:{type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},expression_name:{type:"enum",values:{let:{group:"Variable binding"},var:{group:"Variable binding"},literal:{group:"Types"},array:{group:"Types"},at:{group:"Lookup"},in:{group:"Lookup"},"index-of":{group:"Lookup"},slice:{group:"Lookup"},case:{group:"Decision"},match:{group:"Decision"},coalesce:{group:"Decision"},step:{group:"Ramps, scales, curves"},interpolate:{group:"Ramps, scales, curves"},"interpolate-hcl":{group:"Ramps, scales, curves"},"interpolate-lab":{group:"Ramps, scales, curves"},ln2:{group:"Math"},pi:{group:"Math"},e:{group:"Math"},typeof:{group:"Types"},string:{group:"Types"},number:{group:"Types"},boolean:{group:"Types"},object:{group:"Types"},collator:{group:"Types"},format:{group:"Types"},image:{group:"Types"},"number-format":{group:"Types"},"to-string":{group:"Types"},"to-number":{group:"Types"},"to-boolean":{group:"Types"},"to-rgba":{group:"Color"},"to-color":{group:"Types"},rgb:{group:"Color"},rgba:{group:"Color"},get:{group:"Lookup"},has:{group:"Lookup"},length:{group:"Lookup"},properties:{group:"Feature data"},"feature-state":{group:"Feature data"},"geometry-type":{group:"Feature data"},id:{group:"Feature data"},zoom:{group:"Camera"},pitch:{group:"Camera"},"distance-from-center":{group:"Camera"},"heatmap-density":{group:"Heatmap"},"line-progress":{group:"Feature data"},"sky-radial-progress":{group:"sky"},accumulated:{group:"Feature data"},"+":{group:"Math"},"*":{group:"Math"},"-":{group:"Math"},"/":{group:"Math"},"%":{group:"Math"},"^":{group:"Math"},sqrt:{group:"Math"},log10:{group:"Math"},ln:{group:"Math"},log2:{group:"Math"},sin:{group:"Math"},cos:{group:"Math"},tan:{group:"Math"},asin:{group:"Math"},acos:{group:"Math"},atan:{group:"Math"},min:{group:"Math"},max:{group:"Math"},round:{group:"Math"},abs:{group:"Math"},ceil:{group:"Math"},floor:{group:"Math"},distance:{group:"Math"},"==":{group:"Decision"},"!=":{group:"Decision"},">":{group:"Decision"},"<":{group:"Decision"},">=":{group:"Decision"},"<=":{group:"Decision"},all:{group:"Decision"},any:{group:"Decision"},"!":{group:"Decision"},within:{group:"Decision"},"is-supported-script":{group:"String"},upcase:{group:"String"},downcase:{group:"String"},concat:{group:"String"},"resolved-locale":{group:"String"}}},fog:{range:{type:"array",default:[.5,10],minimum:-20,maximum:20,length:2,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"high-color":{type:"color","property-type":"data-constant",default:"#245cdf",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"space-color":{type:"color","property-type":"data-constant",default:["interpolate",["linear"],["zoom"],4,"#010b19",7,"#367ab9"],expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-blend":{type:"number","property-type":"data-constant",default:["interpolate",["linear"],["zoom"],4,.2,7,.1],minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"star-intensity":{type:"number","property-type":"data-constant",default:["interpolate",["linear"],["zoom"],5,.35,6,0],minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},projection:{name:{type:"enum",values:{albers:{},equalEarth:{},equirectangular:{},lambertConformalConic:{},mercator:{},naturalEarth:{},winkelTripel:{},globe:{}},default:"mercator",required:!0},center:{type:"array",length:2,value:"number","property-type":"data-constant",minimum:[-180,-90],maximum:[180,90],transition:!1,requires:[{name:["albers","lambertConformalConic"]}]},parallels:{type:"array",length:2,value:"number","property-type":"data-constant",minimum:[-90,-90],maximum:[90,90],transition:!1,requires:[{name:["albers","lambertConformalConic"]}]}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number","property-type":"data-constant",default:1,minimum:0,maximum:1e3,expression:{interpolated:!0,parameters:["zoom"]},transition:!0,requires:["source"]}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background","paint_sky"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!1,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!1,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-ambient-occlusion-intensity":{"property-type":"data-constant",type:"number",private:!0,default:0,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fill-extrusion-ambient-occlusion-radius":{"property-type":"data-constant",type:"number",private:!0,default:3,minimum:0,expression:{interpolated:!0,parameters:["zoom"]},transition:!0,requires:["fill-extrusion-edge-radius"]}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!1,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-pattern":{type:"resolvedImage",transition:!1,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"},"line-trim-offset":{type:"array",value:"number",length:2,default:[0,0],minimum:[0,0],maximum:[1,1],transition:!1,requires:[{source:"geojson",has:{lineMetrics:!0}}],"property-type":"constant"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_sky:{"sky-type":{type:"enum",values:{gradient:{},atmosphere:{}},default:"atmosphere",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun":{type:"array",value:"number",length:2,units:"degrees",minimum:[0,0],maximum:[360,180],transition:!1,requires:[{"sky-type":"atmosphere"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun-intensity":{type:"number",requires:[{"sky-type":"atmosphere"}],default:10,minimum:0,maximum:100,transition:!1,"property-type":"data-constant"},"sky-gradient-center":{type:"array",requires:[{"sky-type":"gradient"}],value:"number",default:[0,0],length:2,units:"degrees",minimum:[0,0],maximum:[360,180],transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-gradient-radius":{type:"number",requires:[{"sky-type":"gradient"}],default:90,minimum:0,maximum:180,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-gradient":{type:"color",default:["interpolate",["linear"],["sky-radial-progress"],.8,"#87ceeb",1,"white"],transition:!1,requires:[{"sky-type":"gradient"}],expression:{interpolated:!0,parameters:["sky-radial-progress"]},"property-type":"color-ramp"},"sky-atmosphere-halo-color":{type:"color",default:"white",transition:!1,requires:[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-atmosphere-color":{type:"color",default:"white",transition:!1,requires:[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};function Br(u){if(!0===u||!1===u)return!0;if(!Array.isArray(u)||0===u.length)return!1;switch(u[0]){case"has":return u.length>=2&&"$id"!==u[1]&&"$type"!==u[1];case"in":return u.length>=3&&("string"!=typeof u[1]||Array.isArray(u[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return 3!==u.length||Array.isArray(u[1])||Array.isArray(u[2]);case"any":case"all":for(const i of u.slice(1))if(!Br(i)&&"boolean"!=typeof i)return!1;return!0;default:return!0}}function bo(u,i="fill"){if(null==u)return{filter:()=>!0,needGeometry:!1,needFeature:!1};Br(u)||(u=As(u));const c=u;let t=!0;try{t=function Lo(u){if(!Wn(u))return u;let i=or(u);return Gr(i),i=Wr(i),i}(c)}catch{console.warn(`Failed to extract static filter. Filter will continue working, but at higher memory usage and slower framerate.\nThis is most likely a bug, please report this via https://github.com/mapbox/mapbox-gl-js/issues/new?assignees=&labels=&template=Bug_report.md\nand paste the contents of this message in the report.\nThank you!\nFilter Expression:\n${JSON.stringify(c,null,2)}\n        `)}const e=jr[`filter_${i}`],r=rr(t,e);let v=null;if("error"===r.result)throw new Error(r.value.map(X=>`${X.key}: ${X.message}`).join(", "));v=(X,nt,ct)=>r.value.evaluate(X,nt,{},ct);let x=null,D=null;if(t!==c){const X=rr(c,e);if("error"===X.result)throw new Error(X.value.map(nt=>`${nt.key}: ${nt.message}`).join(", "));x=(nt,ct,Tt,Pt,Bt)=>X.value.evaluate(nt,ct,{},Tt,void 0,void 0,Pt,Bt),D=!Fn(X.value.expression)}return{filter:v,dynamicFilter:x||void 0,needGeometry:zr(t),needFeature:!!D}}function Wr(u){if(!Array.isArray(u))return u;const i=function No(u){if(Fo.has(u[0]))for(let i=1;i<u.length;i++)if(Wn(u[i]))return!0;return u}(u);return!0===i?i:i.map(c=>Wr(c))}function Gr(u){let i=!1;const c=[];if("case"===u[0]){for(let t=1;t<u.length-1;t+=2)i=i||Wn(u[t]),c.push(u[t+1]);c.push(u[u.length-1])}else if("match"===u[0]){i=i||Wn(u[1]);for(let t=2;t<u.length-1;t+=2)c.push(u[t+1]);c.push(u[u.length-1])}else if("step"===u[0]){i=i||Wn(u[1]);for(let t=1;t<u.length-1;t+=2)c.push(u[t+1])}i&&(u.length=0,u.push("any",...c));for(let t=1;t<u.length;t++)Gr(u[t])}function Wn(u){if(!Array.isArray(u))return!1;if(function Do(u){return"pitch"===u||"distance-from-center"===u}(u[0]))return!0;for(let i=1;i<u.length;i++)if(Wn(u[i]))return!0;return!1}const Fo=new Set(["in","==","!=",">",">=","<","<=","to-boolean"]);function Zo(u,i){return u<i?-1:u>i?1:0}function zr(u){if(!Array.isArray(u))return!1;if("within"===u[0])return!0;for(let i=1;i<u.length;i++)if(zr(u[i]))return!0;return!1}function As(u){if(!u)return!0;const i=u[0];return u.length<=1?"any"!==i:"=="===i?ar(u[1],u[2],"=="):"!="===i?ws(ar(u[1],u[2],"==")):"<"===i||">"===i||"<="===i||">="===i?ar(u[1],u[2],i):"any"===i?function yn(u){return["any"].concat(u.map(As))}(u.slice(1)):"all"===i?["all"].concat(u.slice(1).map(As)):"none"===i?["all"].concat(u.slice(1).map(As).map(ws)):"in"===i?kr(u[1],u.slice(2)):"!in"===i?ws(kr(u[1],u.slice(2))):"has"===i?Kr(u[1]):"!has"===i?ws(Kr(u[1])):"within"!==i||u}function ar(u,i,c){switch(u){case"$type":return[`filter-type-${c}`,i];case"$id":return[`filter-id-${c}`,i];default:return[`filter-${c}`,u,i]}}function kr(u,i){if(0===i.length)return!1;switch(u){case"$type":return["filter-type-in",["literal",i]];case"$id":return["filter-id-in",["literal",i]];default:return i.length>200&&!i.some(c=>typeof c!=typeof i[0])?["filter-in-large",u,["literal",i.sort(Zo)]]:["filter-in-small",u,["literal",i]]}}function Kr(u){switch(u){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",u]}}function ws(u){return["!",u]}var Uo=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function jo(u,i){const c={};for(const t in u)"ref"!==t&&(c[t]=u[t]);return Uo.forEach(t=>{t in i&&(c[t]=i[t])}),c}var Vr={thin:100,hairline:100,"ultra-light":200,"extra-light":200,light:300,book:300,regular:400,normal:400,plain:400,roman:400,standard:400,medium:500,"semi-bold":600,"demi-bold":600,bold:700,"extra-bold":800,"ultra-bold":800,heavy:900,black:900,"heavy-black":900,fat:900,poster:900,"ultra-black":950,"extra-black":950},Yr=/(italic|oblique)$/i,$r={},lr=xt(function(u,i,c){var t=$r[u];if(!t){Array.isArray(u)||(u=[u]);for(var x,D,e=400,r="normal",v=[],G=0,X=u.length;G<X;++G){var ct=u[G].split(" "),Tt=ct[ct.length-1].toLowerCase();for(var Pt in"normal"==Tt||"italic"==Tt||"oblique"==Tt?(r=D?r:Tt,D=!0,ct.pop(),Tt=ct[ct.length-1].toLowerCase()):Yr.test(Tt)&&(Tt=Tt.replace(Yr,""),r=D?r:ct[ct.length-1].replace(Tt,""),D=!0),Vr){var Bt=ct.length>1?ct[ct.length-2].toLowerCase():"";if(Tt==Pt||Tt==Pt.replace("-","")||Bt+"-"+Tt==Pt){e=x?e:Vr[Pt],ct.pop(),Bt&&Pt.startsWith(Bt)&&ct.pop();break}}!x&&"number"==typeof Tt&&(e=Tt,x=!0);var Zt=ct.join(" ").replace("Klokantech Noto Sans","Noto Sans");-1!==Zt.indexOf(" ")&&(Zt='"'+Zt+'"'),v.push(Zt)}t=$r[u]=[r,e,v]}return t[0]+" "+t[1]+" "+i+"px"+(c?"/"+c:"")+" "+t[2]});const Hr="https://api.mapbox.com";function hr(u){return 0!==u.indexOf("mapbox://")?"":u.slice(9)}function bs(u,i){const c=hr(u);if(!c)return decodeURI(new URL(u,location.href).href);if(0!==c.indexOf("styles/"))throw new Error(`unexpected style url: ${u}`);const e=c.slice(7);return`${Hr}/styles/v1/${e}?&access_token=${i}`}function Ls(u,i,c,t){const e=new URL(u,t),r=hr(u);return r?"mapbox.satellite"===r?`https://api.mapbox.com/v4/${r}/{z}/{x}/{y}${window.devicePixelRatio>=1.5?"@2x":""}.webp?access_token=${i}`:`https://{a-d}.tiles.mapbox.com/v4/${r}/{z}/{x}/{y}.vector.pbf?access_token=${i}`:(i&&(e.searchParams.has(c)||e.searchParams.set(c,i)),decodeURI(e.href))}const Ds={},Jr={};let Go=0;function ur(u){return u.id||(u.id=Go++),u.id}function cr(u){return u*Math.PI/180}const en=function(){const u=[];for(let i=78271.51696402048;u.length<=24;i/=2)u.push(i);return u}();function Zs(u,i){if(typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof OffscreenCanvas<"u")return new OffscreenCanvas(u,i);const c=document.createElement("canvas");return c.width=u,c.height=i,c}function qr(u,i){let c=0;const t=i.length;for(;c<t;++c)if(i[c]<u&&c+1<t){const r=i[c]/i[c+1];return c+Math.log(i[c]/u)/Math.log(r)}return t-1}const Gn={};function zn(u,i,c={},t){if(i in Gn)return t&&(t.request=Gn[i][0]),Gn[i][1];const e=c.transformRequest&&c.transformRequest(i,u)||i,r=(0,T.Vi)(()=>e).then(v=>(v instanceof Request||(v=new Request(v)),v.headers.get("Accept")||v.headers.set("Accept","application/json"),t&&(t.request=v),fetch(v).then(function(x){return delete Gn[i],x.ok?x.json():Promise.reject(new Error("Error fetching source "+i))}).catch(function(x){return delete Gn[i],Promise.reject(new Error("Error fetching source "+i))})));return Gn[i]=[e,r],r}function dr(u,i){if("string"!=typeof u)return Promise.resolve(u);if(!u.trim().startsWith("{"))return zn("Style",u=bs(u,i.accessToken),i);try{const c=JSON.parse(u);return Promise.resolve(c)}catch(c){return Promise.reject(c)}}const to={};function io(u,i,c,t){const e=[2*c*i.pixelRatio+i.width,2*c*i.pixelRatio+i.height],r=Zs(e[0],e[1]),v=r.getContext("2d");v.drawImage(u,i.x,i.y,i.width,i.height,c*i.pixelRatio,c*i.pixelRatio,i.width,i.height);const x=v.getImageData(0,0,e[0],e[1]);v.globalCompositeOperation="destination-over",v.fillStyle=`rgba(${255*t.r},${255*t.g},${255*t.b},${t.a})`;const D=x.data;for(let G=0,X=x.width;G<X;++G)for(let nt=0,ct=x.height;nt<ct;++nt)D[4*(nt*X+G)+3]>0&&v.arc(G,nt,c*i.pixelRatio,0,2*Math.PI);return v.fill(),r}function ko(u,i,c){const t=Math.max(0,Math.min(1,(c-u)/(i-u)));return t*t*(3-2*t)}function no(u,i,c){const t=Zs(i.width,i.height),e=t.getContext("2d");e.drawImage(u,i.x,i.y,i.width,i.height,0,0,i.width,i.height);const r=e.getImageData(0,0,i.width,i.height),v=r.data;for(let x=0,D=r.width;x<D;++x)for(let G=0,X=r.height;G<X;++G){const nt=4*(G*D+x),Tt=.75,Pt=.1,Bt=ko(Tt-Pt,Tt+Pt,v[nt+3]/255);Bt>0?(v[nt+0]=Math.round(255*c.r*Bt),v[nt+1]=Math.round(255*c.g*Bt),v[nt+2]=Math.round(255*c.b*Bt),v[nt+3]=Math.round(255*Bt)):v[nt+3]=0}return e.putImageData(r,0,0),t}const Ko=Array(256).join("\u200a");function fr(u,i){if(i>=.05){let c="";const t=u.split("\n"),e=Ko.slice(0,Math.round(i/.1));for(let r=0,v=t.length;r<v;++r)r>0&&(c+="\n"),c+=t[r].split("").join(e);return c}return u}let gr;function so(){return gr||(gr=Zs(1,1).getContext("2d")),gr}function On(u,i){return so().measureText(u).width+(u.length-1)*i}const ro={};function mr(u,i,c,t){if(-1!==u.indexOf("\n")){const v=u.split("\n"),x=[];for(let D=0,G=v.length;D<G;++D)x.push(mr(v[D],i,c,t));return x.join("\n")}const e=c+","+i+","+u+","+t;let r=ro[e];if(!r){const v=u.split(" ");if(v.length>1){const x=so();x.font=i;const G=x.measureText("M").width*c;let X="";const nt=[];for(let ct=0,Tt=v.length;ct<Tt;++ct){const Pt=v[ct],Bt=X+(X?" ":"")+Pt;On(Bt,t)<=G?X=Bt:(X&&nt.push(X),X=Pt)}X&&nt.push(X);for(let ct=0,Tt=nt.length;ct<Tt&&Tt>1;++ct){const Pt=nt[ct];if(On(Pt,t)<.35*G){const Bt=ct>0?On(nt[ct-1],t):1/0,Zt=ct<Tt-1?On(nt[ct+1],t):1/0;nt.splice(ct,1),Tt-=1,Bt<Zt?(nt[ct-1]+=" "+Pt,ct-=1):nt[ct]=Pt+" "+nt[ct]}}for(let ct=0,Tt=nt.length-1;ct<Tt;++ct){const Pt=nt[ct],Bt=nt[ct+1];if(On(Pt,t)>.7*G&&On(Bt,t)<.6*G){const Zt=Pt.split(" "),ee=Zt.pop();On(ee,t)<.2*G&&(nt[ct]=Zt.join(" "),nt[ct+1]=ee+" "+Bt),Tt-=1}}r=nt.join("\n")}else r=u;r=fr(r,t),ro[e]=r}return r}const Xo=/font-family: ?([^;]*);/,Vo=/("|')/g;let Us;function Yo(u){if(!Us){Us={};const i=document.styleSheets;for(let c=0,t=i.length;c<t;++c){const e=i[c];try{const r=e.rules||e.cssRules;if(r)for(let v=0,x=r.length;v<x;++v){const D=r[v];if(5==D.type){const G=D.cssText.match(Xo);Us[G[1].replace(Vo,"")]=!0}}}catch{}}}return u in Us}const _r={},Ho={Point:1,MultiPoint:1,LineString:2,MultiLineString:2,Polygon:3,MultiPolygon:3},Jo={center:[.5,.5],left:[0,.5],right:[1,.5],top:[.5,0],bottom:[.5,1],"top-left":[0,0],"top-right":[1,0],"bottom-left":[0,1],"bottom-right":[1,1]},Qo=function(u,i){const c=So(u,i);if("error"===c.result)throw new Error(c.value.map(t=>`${t.key}: ${t.message}`).join(", "));return c.value},pr={},js={zoom:0};let Bs,yr;function Se(u,i,c,t,e,r,v){const x=u.id;r||(r={},console.warn("No functionCache provided to getValue()")),r[x]||(r[x]={});const D=r[x];if(!D[c]){let G=(u[i]||pr)[c];const X=jr[`${i}_${u.type}`][c];void 0===G&&(G=X.default);let nt=function Os(u){return Array.isArray(u)&&u.length>0&&"string"==typeof u[0]&&u[0]in Nr}(G);if(!nt&&In(G)&&(G=function Xt(u,i){let c=u.stops;if(!c)return function Vt(u,i){const c=["get",u.property];if(void 0===u.default)return"string"===i.type?["string",c]:c;if("enum"===i.type)return["match",c,Object.keys(i.values),c,u.default];{const t=["color"===i.type?"to-color":i.type,c,bt(u.default)];return"array"===i.type&&t.splice(1,0,i.value,i.length||null),t}}(u,i);const t=c&&"object"==typeof c[0][0],e=t||void 0!==u.property,r=t||!e;return c=c.map(v=>!e&&i.tokens&&"string"==typeof v[1]?[v[0],Et(v[1])]:[v[0],bt(v[1])]),t?function le(u,i,c){const t={},e={},r=[];for(let x=0;x<c.length;x++){const D=c[x],G=D[0].zoom;void 0===t[G]&&(t[G]={zoom:G,type:u.type,property:u.property,default:u.default},e[G]=[],r.push(G)),e[G].push([D[0].value,D[1]])}if("exponential"===Yt({},i)){const x=[he(u),["linear"],["zoom"]];for(const D of r)te(x,D,St(t[D],i,e[D]),!1);return x}{const x=["step",["zoom"]];for(const D of r)te(x,D,St(t[D],i,e[D]),!0);return Lt(x),x}}(u,i,c):r?function kt(u,i,c,t=["zoom"]){const e=Yt(u,i);let r,v=!1;if("interval"===e)r=["step",t],v=!0;else{if("exponential"!==e)throw new Error(`Unknown zoom function type "${e}"`);{const x=void 0!==u.base?u.base:1;r=[he(u),1===x?["linear"]:["exponential",x],t]}}for(const x of c)te(r,x[0],x[1],v);return Lt(r),r}(u,i,c):St(u,i,c)}(G,X),nt=!0),nt){const ct=Qo(G,X);D[c]=ct.evaluate.bind(ct)}else"color"==X.type&&(G=It.parse(G)),D[c]=function(){return G}}return js.zoom=t,D[c](js,e,v)}function oo(u,i,c,t,e){return Se(u,"layout",`${t}-allow-overlap`,i,c,e)?Se(u,"layout",`${t}-ignore-placement`,i,c,e)?"none":"obstacle":"declutter"}function qo(u,i,c,t,e){return e||console.warn("No filterCache provided to evaluateFilter()"),u in e||(e[u]=bo(i).filter),js.zoom=t,e[u](js,c)}let vr=!1;function vn(u,i){if(u){if(!vr&&(0===u.a||0===i))return;const c=u.a;return i=void 0===i?1:i,0===c?"transparent":"rgba("+Math.round(255*u.r/c)+","+Math.round(255*u.g/c)+","+Math.round(255*u.b/c)+","+c*i+")"}return u}const ta=/\{[^{}}]*\}/g;function Er(u,i){return u.replace(ta,function(c){return i[c.slice(1,-1)]||""})}let ao=!1;const Ws={};function Gs(u,i,c,t=en,e=void 0,r=void 0,v=void 0,x=void 0){if("string"==typeof i&&(i=JSON.parse(i)),8!=i.version)throw new Error("glStyle version 8 required.");let D,G,X;if(Ws[function Fs(u,i){return ur(u)+"."+(0,n.sq)(i)}(i,u)]=Array.from(arguments),r)if(typeof Image<"u"){const _e=new Image;let Ee;(0,T.Vi)(()=>r).then(be=>{be instanceof Request?fetch(be).then(ze=>ze.blob()).then(ze=>{Ee=URL.createObjectURL(ze),_e.src=Ee}).catch(()=>{}):(_e.crossOrigin="anonymous",_e.src=be,Ee&&URL.revokeObjectURL(Ee))}),_e.onload=function(){D=_e,G=[_e.width,_e.height],u.changed(),_e.onload=null}}else if(typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope){const _e=self;_e.postMessage({action:"loadImage",src:r}),_e.addEventListener("message",function(be){"imageLoaded"===be.data.action&&be.data.src===r&&(D=be.data.image,G=[D.width,D.height])})}const nt=function Xr(u){u=u.slice();const i=Object.create(null);for(let c=0;c<u.length;c++)i[u[c].id]=u[c];for(let c=0;c<u.length;c++)"ref"in u[c]&&(u[c]=jo(u[c],i[u[c].ref]));return u}(i.layers),ct={},Tt=[],Pt={},Bt={},Zt=function Ns(u){let i=Ds[u.id];return i||(i={},Ds[ur(u)]=i),i}(i),ee=function Qr(u){let i=Jr[u.id];return i||(i={},Jr[ur(u)]=i),i}(i);let se;for(let _e=0,Ee=nt.length;_e<Ee;++_e){const be=nt[_e],ze=be.id;if("string"==typeof c&&be.source==c||Array.isArray(c)&&-1!==c.indexOf(ze)){const Le=be["source-layer"];if(se){if(be.source!==se)throw new Error(`Layer "${ze}" does not use source "${se}`)}else{se=be.source;const qe=i.sources[se];if(!qe)throw new Error(`Source "${se}" is not defined`);const xe=qe.type;if("vector"!==xe&&"geojson"!==xe)throw new Error(`Source "${se}" is not of type "vector" or "geojson", but "${xe}"`)}let pe=ct[Le];pe||(pe=[],ct[Le]=pe),pe.push({layer:be,index:_e}),Tt.push(ze)}}const ue=new U.Z,de=new k.Z,fe=[],Pe=function(_e,Ee,be){const ze=_e.getProperties(),Le=ct[ze.layer];if(!Le)return;let pe=t.indexOf(Ee);-1==pe&&(pe=qr(Ee,t));const qe=Ho[_e.getGeometry().getType()],xe={id:_e.getId(),properties:ze,type:qe},Ae=u.get("mapbox-featurestate")[_e.getId()];let Fi,$e=-1;for(let wn=0,gs=Le.length;wn<gs;++wn){const Ni=Le[wn],ve=Ni.layer,ms=ve.id;if(void 0!==be&&be!==ms)continue;const dn=ve.layout||pr,En=ve.paint||pr;if("none"===dn.visibility||"minzoom"in ve&&pe<ve.minzoom||"maxzoom"in ve&&pe>=ve.maxzoom)continue;const Ir=ve.filter;if(!Ir||qo(ms,Ir,xe,pe,ee)){let Zi,Gi,fn,Yi,bn,Me;Fi=ve;const Ks=Ni.index;if(3==qe&&("fill"==ve.type||"fill-extrusion"==ve.type))if(Gi=Se(ve,"paint",ve.type+"-opacity",pe,xe,Zt,Ae),ve.type+"-pattern"in En){const oi=Se(ve,"paint",ve.type+"-pattern",pe,xe,Zt,Ae);if(oi){const ai="string"==typeof oi?Er(oi,ze):oi.toString();if(D&&e&&e[ai]){++$e,Me=fe[$e],(!Me||!Me.getFill()||Me.getStroke()||Me.getText())&&(Me=new S.ZP({fill:new k.Z}),fe[$e]=Me),fn=Me.getFill(),Me.setZIndex(Ks);const ni=ai+"."+Gi;let hi=Bt[ni];if(!hi){const We=e[ai],Ve=Zs(We.width,We.height),ci=Ve.getContext("2d");ci.globalAlpha=Gi,ci.drawImage(D,We.x,We.y,We.width,We.height,0,0,We.width,We.height),hi=ci.createPattern(Ve,"repeat"),Bt[ni]=hi}fn.setColor(hi)}}}else Zi=vn(Se(ve,"paint",ve.type+"-color",pe,xe,Zt,Ae),Gi),ve.type+"-outline-color"in En&&(bn=vn(Se(ve,"paint",ve.type+"-outline-color",pe,xe,Zt,Ae),Gi)),bn||(bn=Zi),(Zi||bn)&&(++$e,Me=fe[$e],(!Me||Zi&&!Me.getFill()||!Zi&&Me.getFill()||bn&&!Me.getStroke()||!bn&&Me.getStroke()||Me.getText())&&(Me=new S.ZP({fill:Zi?new k.Z:void 0,stroke:bn?new U.Z:void 0}),fe[$e]=Me),Zi&&(fn=Me.getFill(),fn.setColor(Zi)),bn&&(Yi=Me.getStroke(),Yi.setColor(bn),Yi.setWidth(.5)),Me.setZIndex(Ks));if(1!=qe&&"line"==ve.type){Zi="line-pattern"in En?void 0:vn(Se(ve,"paint","line-color",pe,xe,Zt,Ae),Se(ve,"paint","line-opacity",pe,xe,Zt,Ae));const oi=Se(ve,"paint","line-width",pe,xe,Zt,Ae);Zi&&oi>0&&(++$e,Me=fe[$e],(!Me||!Me.getStroke()||Me.getFill()||Me.getText())&&(Me=new S.ZP({stroke:new U.Z}),fe[$e]=Me),Yi=Me.getStroke(),Yi.setLineCap(Se(ve,"layout","line-cap",pe,xe,Zt,Ae)),Yi.setLineJoin(Se(ve,"layout","line-join",pe,xe,Zt,Ae)),Yi.setMiterLimit(Se(ve,"layout","line-miter-limit",pe,xe,Zt,Ae)),Yi.setColor(Zi),Yi.setWidth(oi),Yi.setLineDash(En["line-dasharray"]?Se(ve,"paint","line-dasharray",pe,xe,Zt,Ae).map(function(ai){return ai*oi}):null),Me.setZIndex(Ks))}let Or,Ui,ca,Ii,Sr,Ar,Xn,wr,da,_o=!1,He=null,xa=0;if((1==qe||2==qe)&&"icon-image"in dn){const oi=Se(ve,"layout","icon-image",pe,xe,Zt,Ae);if(oi){let ai;Or="string"==typeof oi?Er(oi,ze):oi.toString();const ni=x?x(u,Or):void 0;if(D&&e&&e[Or]||ni){const hi=Se(ve,"layout","icon-rotation-alignment",pe,xe,Zt,Ae);if(2==qe){const We=_e.getGeometry();if(We.getFlatMidpoint||We.getFlatMidpoints){const Ve=We.getExtent();if(Math.sqrt(Math.max(Math.pow((Ve[2]-Ve[0])/Ee,2),Math.pow((Ve[3]-Ve[1])/Ee,2)))>150){const di="MultiLineString"===We.getType()?We.getFlatMidpoints():We.getFlatMidpoint();if(yr||(Bs=[NaN,NaN],yr=new $.ZP("Point",Bs,[],2,{},void 0)),ai=yr,Bs[0]=di[0],Bs[1]=di[1],"line"===Se(ve,"layout","symbol-placement",pe,xe,Zt,Ae)&&"map"===hi){const $i=We.getStride(),ji=We.getFlatCoordinates();for(let zi=0,ui=ji.length-$i;zi<ui;zi+=$i){const sn=ji[zi],rn=ji[zi+1],on=ji[zi+$i],Li=ji[zi+$i+1],br=Math.min(sn,on),Pa=Math.min(rn,Li),Ta=Math.max(sn,on),Ca=Math.max(rn,Li);if(di[0]>=br&&di[0]<=Ta&&di[1]>=Pa&&di[1]<=Ca){xa=Math.atan2(rn-Li,on-sn);break}}}}}}if(2!==qe||ai){const We=Se(ve,"layout","icon-size",pe,xe,Zt,Ae),Ve=void 0!==En["icon-color"]?Se(ve,"paint","icon-color",pe,xe,Zt,Ae):null;if(!Ve||0!==Ve.a){const ci=Se(ve,"paint","icon-halo-color",pe,xe,Zt,Ae),di=Se(ve,"paint","icon-halo-width",pe,xe,Zt,Ae);let nn=`${Or}.${We}.${di}.${ci}`;if(null!==Ve&&(nn+=`.${Ve}`),Ui=Pt[nn],!Ui){const $i=oo(ve,pe,xe,"icon",Zt);let ji;"icon-offset"in dn&&(ji=Se(ve,"layout","icon-offset",pe,xe,Zt,Ae).slice(0),ji[0]*=We,ji[1]*=-We);let zi=Ve?[255*Ve.r,255*Ve.g,255*Ve.b,Ve.a]:void 0;if(ni){const ui={color:zi,rotateWithView:"map"===hi,displacement:ji,declutterMode:$i,scale:We};"string"==typeof ni?ui.src=ni:(ui.img=ni,ui.imgSize=[ni.width,ni.height]),Ui=new J.Z(ui)}else{const ui=e[Or];let sn,rn,on;di?ui.sdf?(sn=io(no(D,ui,Ve||[0,0,0,1]),{x:0,y:0,width:ui.width,height:ui.height,pixelRatio:ui.pixelRatio},di,ci),zi=void 0):sn=io(D,ui,di,ci):(ui.sdf?(X||(X=no(D,{x:0,y:0,width:G[0],height:G[1]},{r:1,g:1,b:1,a:1})),sn=X):sn=D,rn=[ui.width,ui.height],on=[ui.x,ui.y]),Ui=new J.Z({color:zi,img:sn,imgSize:G,size:rn,offset:on,rotateWithView:"map"===hi,scale:We/ui.pixelRatio,displacement:ji,declutterMode:$i})}Pt[nn]=Ui}}Ui&&(++$e,Me=fe[$e],(!Me||!Me.getImage()||Me.getFill()||Me.getStroke())&&(Me=new S.ZP,fe[$e]=Me),Me.setGeometry(ai),Ui.setRotation(xa+cr(Se(ve,"layout","icon-rotate",pe,xe,Zt,Ae))),Ui.setOpacity(Se(ve,"paint","icon-opacity",pe,xe,Zt,Ae)),Ui.setAnchor(Jo[Se(ve,"layout","icon-anchor",pe,xe,Zt,Ae)]),Me.setImage(Ui),He=Me.getText(),Me.setText(void 0),Me.setZIndex(Ks),_o=!0,ca=!1)}else ca=!0}}}if(1==qe&&"circle"===ve.type){++$e,Me=fe[$e],(!Me||!Me.getImage()||Me.getFill()||Me.getStroke())&&(Me=new S.ZP,fe[$e]=Me);const oi="circle-radius"in En?Se(ve,"paint","circle-radius",pe,xe,Zt,Ae):5,ai=vn(Se(ve,"paint","circle-stroke-color",pe,xe,Zt,Ae),Se(ve,"paint","circle-stroke-opacity",pe,xe,Zt,Ae)),ni=Se(ve,"paint","circle-translate",pe,xe,Zt,Ae),hi=vn(Se(ve,"paint","circle-color",pe,xe,Zt,Ae),Se(ve,"paint","circle-opacity",pe,xe,Zt,Ae)),We=Se(ve,"paint","circle-stroke-width",pe,xe,Zt,Ae),Ve=oi+"."+ai+"."+hi+"."+We+"."+ni[0]+"."+ni[1];Ui=Pt[Ve],Ui||(Ui=new V.Z({radius:oi,displacement:[ni[0],-ni[1]],stroke:ai&&We>0?new U.Z({width:We,color:ai}):void 0,fill:hi?new k.Z({color:hi}):void 0,declutterMode:"none"}),Pt[Ve]=Ui),Me.setImage(Ui),He=Me.getText(),Me.setText(void 0),Me.setGeometry(void 0),Me.setZIndex(Ks),_o=!0}if("text-field"in dn){Xn=Math.round(Se(ve,"layout","text-size",pe,xe,Zt,Ae));const oi=Se(ve,"layout","text-font",pe,xe,Zt,Ae);Ar=Se(ve,"layout","text-line-height",pe,xe,Zt,Ae),Sr=lr(v?v(oi,i.metadata?i.metadata["ol:webfonts"]:void 0):oi,Xn,Ar),Sr.includes("sans-serif")||(Sr+=",sans-serif"),wr=Se(ve,"layout","text-letter-spacing",pe,xe,Zt,Ae),da=Se(ve,"layout","text-max-width",pe,xe,Zt,Ae);const ai=Se(ve,"layout","text-field",pe,xe,Zt,Ae);Ii="object"==typeof ai&&ai.sections?1===ai.sections.length?ai.toString():ai.sections.reduce((ni,hi,We)=>{const Ve=hi.fontStack?hi.fontStack.split(","):oi,ci=lr(v?v(Ve):Ve,Xn*(hi.scale||1),Ar);let di=hi.text;if("\n"===di)return ni.push("\n",""),ni;if(2!=qe){di=mr(di,ci,da,wr).split("\n");for(let nn=0,$i=di.length;nn<$i;++nn)nn>0&&ni.push("\n",""),ni.push(di[nn],ci);return ni}ni.push(fr(di,wr),ci)},[]):Er(ai,ze).trim(),Gi=Se(ve,"paint","text-opacity",pe,xe,Zt,Ae)}if(Ii&&Gi&&!ca){_o||(++$e,Me=fe[$e],(!Me||!Me.getText()||Me.getFill()||Me.getStroke())&&(Me=new S.ZP,fe[$e]=Me),Me.setImage(void 0),Me.setGeometry(void 0));const oi=oo(ve,pe,xe,"text",Zt);Me.getText()||Me.setText(He),He=Me.getText(),(!He||"getDeclutterMode"in He&&He.getDeclutterMode()!==oi)&&(He=new b.Z({padding:[2,2,2,2],declutterMode:oi}),Me.setText(He));const ai=Se(ve,"layout","text-transform",pe,xe,Zt,Ae);"uppercase"==ai?Ii=Array.isArray(Ii)?Ii.map((Li,br)=>br%2?Li:Li.toUpperCase()):Ii.toUpperCase():"lowercase"==ai&&(Ii=Array.isArray(Ii)?Ii.map((Li,br)=>br%2?Li:Li.toLowerCase()):Ii.toLowerCase());const ni=Array.isArray(Ii)?Ii:2==qe?fr(Ii,wr):mr(Ii,Sr,da,wr);He.setText(ni),He.setFont(Sr),He.setRotation(cr(Se(ve,"layout","text-rotate",pe,xe,Zt,Ae)));const hi=Se(ve,"layout","text-anchor",pe,xe,Zt,Ae),We=_o||1==qe?"point":Se(ve,"layout","symbol-placement",pe,xe,Zt,Ae);let Ve;if("line-center"===We?(He.setPlacement("line"),Ve="center"):He.setPlacement(We),"line"===We&&"function"==typeof He.setRepeat){const Li=Se(ve,"layout","symbol-spacing",pe,xe,Zt,Ae);He.setRepeat(2*Li)}He.setOverflow("point"===We);let ci=Se(ve,"paint","text-halo-width",pe,xe,Zt,Ae);const di=Se(ve,"layout","text-offset",pe,xe,Zt,Ae),nn=Se(ve,"paint","text-translate",pe,xe,Zt,Ae);let $i=0,ji=0;if("point"==We){Ve="center",-1!==hi.indexOf("left")?(Ve="left",ji=ci):-1!==hi.indexOf("right")&&(Ve="right",ji=-ci);const Li=Se(ve,"layout","text-rotation-alignment",pe,xe,Zt,Ae);He.setRotateWithView("map"==Li)}else He.setMaxAngle(cr(Se(ve,"layout","text-max-angle",pe,xe,Zt,Ae))*Ii.length/ni.length),He.setRotateWithView(!1);He.setTextAlign(Ve);let zi="middle";0==hi.indexOf("bottom")?(zi="bottom",$i=-ci-.5*(Ar-1)*Xn):0==hi.indexOf("top")&&(zi="top",$i=ci+.5*(Ar-1)*Xn),He.setTextBaseline(zi);const ui=Se(ve,"layout","text-justify",pe,xe,Zt,Ae);He.setJustify("auto"===ui?void 0:ui),He.setOffsetX(di[0]*Xn+ji+nn[0]),He.setOffsetY(di[1]*Xn+$i+nn[1]),de.setColor(vn(Se(ve,"paint","text-color",pe,xe,Zt,Ae),Gi)),He.setFill(de);const sn=vn(Se(ve,"paint","text-halo-color",pe,xe,Zt,Ae),Gi);if(sn&&ci>0){ue.setColor(sn),ci*=2;const Li=.5*Xn;ue.setWidth(ci<=Li?ci:Li),He.setStroke(ue)}else He.setStroke(void 0);const rn=Se(ve,"layout","text-padding",pe,xe,Zt,Ae),on=He.getPadding();rn!==on[0]&&(on[0]=rn,on[1]=rn,on[2]=rn,on[3]=rn),Me.setZIndex(Ks)}}}return $e>-1?(fe.length=$e+1,ao&&("set"in _e?_e.set("mapbox-layer",Fi):_e.getProperties()["mapbox-layer"]=Fi),fe):void 0};return u.setStyle(Pe),u.set("mapbox-source",se),u.set("mapbox-layers",Tt),u.set("mapbox-featurestate",u.get("mapbox-featurestate")||{}),Pe}function ea(u,i=512){return u.getExtent()?(0,w.dl)({extent:u.getExtent(),tileSize:i,maxZoom:22}).getResolutions():en}function xr(u,i,c="",t={},e=void 0){let r,v,x,D,G=!0;return"string"==typeof c||Array.isArray(c)?D=c:(x=c,D=x.source||x.layers,t=x),"string"==typeof t?(r=t,x={}):(r=t.styleUrl,x=t),!1===x.updateSource&&(G=!1),e||(e=x.resolutions),!r&&"string"==typeof i&&!i.trim().startsWith("{")&&(r=i),r&&(r=r.startsWith("data:")?location.href:bs(r,x.accessToken),x=function lo(u,i){return i.accessToken||(i=Object.assign({},i),new URL(u).searchParams.forEach((t,e)=>{i.accessToken=t,i.accessTokenParam=e})),i}(r,x)),new Promise(function(X,nt){dr(i,x).then(function(ct){if(8!=ct.version)return nt(new Error("glStyle version 8 required."));if(!(u instanceof Q.Z||u instanceof H.Z))return nt(new Error("Can only apply to VectorLayer or VectorTileLayer"));const Tt=u instanceof H.Z?"vector":"geojson";if(D?v=Array.isArray(D)?ct.layers.find(function(de){return de.id===D[0]}).source:D:(v=Object.keys(ct.sources).find(function(de){return ct.sources[de].type===Tt}),D=v),!v)return nt(new Error(`No ${Tt} source found in the glStyle.`));function Pt(){if(!G)return Promise.resolve();if(u instanceof H.Z)return function zs(u,i,c){return new Promise(function(t,e){(function eo(u,i,c={}){const t=[i,JSON.stringify(u)].toString();let e=to[t];if(!e||c.transformRequest){let r;c.transformRequest&&(r=(x,D)=>{const G=c.transformRequest&&c.transformRequest(D,"Tiles")||D;if(x instanceof d.Z)x.setLoader((X,nt,ct)=>{(0,T.Vi)(()=>G).then(Tt=>{fetch(Tt).then(Pt=>Pt.arrayBuffer()).then(Pt=>{const Zt=x.getFormat().readFeatures(Pt,{extent:X,featureProjection:ct});x.setFeatures(Zt)}).catch(Pt=>x.setState(m.Z.ERROR))})});else{const X=x.getImage();(0,T.Vi)(()=>G).then(nt=>{nt instanceof Request?fetch(nt).then(ct=>ct.blob()).then(ct=>{const Tt=URL.createObjectURL(ct);X.addEventListener("load",()=>URL.revokeObjectURL(Tt)),X.addEventListener("error",()=>URL.revokeObjectURL(Tt)),X.src=Tt}).catch(ct=>x.setState(m.Z.ERROR)):X.src=nt})}});const v=u.url;if(v&&!u.tiles){const x=Ls(v,c.accessToken,c.accessTokenParam||"access_token",i||location.href);if(v.startsWith("mapbox://"))e=Promise.resolve({tileJson:Object.assign({},u,{url:void 0,tiles:(0,l.Gk)(x)}),tileLoadFunction:r});else{const D={};e=zn("Source",x,c,D).then(function(G){return G.tiles=G.tiles.map(function(X){return"tms"===G.scheme&&(X=X.replace("{y}","{-y}")),Ls(X,c.accessToken,c.accessTokenParam||"access_token",D.request.url)}),Promise.resolve({tileJson:G,tileLoadFunction:r})})}}else u=Object.assign({},u,{tiles:u.tiles.map(function(x){return"tms"===u.scheme&&(x=x.replace("{y}","{-y}")),Ls(x,c.accessToken,c.accessTokenParam||"access_token",i||location.href)})}),e=Promise.resolve({tileJson:Object.assign({},u),tileLoadFunction:r});to[t]=e}return e})(u,i,c).then(function({tileJson:r,tileLoadFunction:v}){const x=function Kn(u,i,c){const t=new N({tileJSON:i,tileSize:u.tileSize||i.tileSize||512}),e=t.getTileJSON(),r=t.getTileGrid(),v=(0,K.U2)(c.projection||"EPSG:3857"),x=function Mr(u,i){const c=u.bounds;if(c){const t=(0,K.mi)([c[0],c[1]],i),e=(0,K.mi)([c[2],c[3]],i);return[t[0],t[1],e[0],e[1]]}return(0,K.U2)(i).getExtent()}(e,v),D=v.getExtent(),G=e.minzoom||0,X=e.maxzoom||22,nt={attributions:t.getAttributions(),projection:v,tileGrid:new p.Z({origin:D?(0,F.rL)(D):r.getOrigin(0),extent:x||r.getExtent(),minZoom:G,resolutions:ea(v,i.tileSize).slice(0,X+1),tileSize:r.getTileSize(0)})};return Array.isArray(e.tiles)?nt.urls=e.tiles:nt.url=e.tiles,nt}(u,r,c);x.tileLoadFunction=v,x.format=new g.Z,t(new ot.Z(x))}).catch(e)})}(ct.sources[v],r,x).then(function(_e){const Ee=u.getSource();Ee?_e!==Ee&&(Ee.setTileUrlFunction(_e.getTileUrlFunction()),"function"==typeof Ee.setUrls&&"function"==typeof _e.getUrls&&Ee.setUrls(_e.getUrls()),Ee.format_||(Ee.format_=_e.format_),Ee.getAttributions()||Ee.setAttributions(_e.getAttributions()),Ee.getTileLoadFunction()===ot.I&&Ee.setTileLoadFunction(_e.getTileLoadFunction()),(0,K.OP)(Ee.getProjection(),_e.getProjection())&&(Ee.tileGrid=_e.getTileGrid())):u.setSource(_e);const be=u.getSource().getTileGrid();!isFinite(u.getMaxResolution())&&!isFinite(u.getMinZoom())&&be.getMinZoom()>0&&u.setMaxResolution(function ds(u,i){const c=Math.floor(u),t=Math.pow(2,u-c);return i[c]/t}(Math.max(0,be.getMinZoom()-1e-12),be.getResolutions()))});const de=ct.sources[v];let fe=u.getSource();(!fe||fe.get("mapbox-source")!==de)&&(fe=function Cr(u,i,c){const t=c.projection?new h.Z({dataProjection:c.projection}):new h.Z,e=u.data,r={};if("string"==typeof e){const x=Ls(e,c.accessToken,c.accessTokenParam||"access_token",i||location.href);if(/\{bbox-[0-9a-z-]+\}/.test(x)){const G=(nt,ct,Tt)=>{const Pt=function Sn(u){return`{bbox-${(u?u.getCode():"EPSG:3857").toLowerCase().replace(/[^a-z0-9]/g,"-")}}`}(Tt);return x.replace(Pt,`${nt.join(",")}`)},X=new et.Z({attributions:u.attribution,format:t,loader:(nt,ct,Tt,Pt,Bt)=>{zn("GeoJSON","function"==typeof G?G(nt,ct,Tt):G,c).then(ee=>{const se=X.getFormat().readFeatures(ee,{featureProjection:Tt});X.addFeatures(se),Pt(se)}).catch(ee=>{X.removeLoadedExtent(nt),Bt()})},strategy:mt.VW});return X.set("mapbox-source",u),X}const D=new et.Z({attributions:u.attribution,format:t,url:x,loader:(G,X,nt,ct,Tt)=>{zn("GeoJSON",x,c).then(Pt=>{const Bt=D.getFormat().readFeatures(Pt,{featureProjection:nt});D.addFeatures(Bt),ct(Bt)}).catch(Pt=>{D.removeLoadedExtent(G),Tt()})}});return D}r.features=t.readFeatures(e,{featureProjection:(0,K.Cs)()||"EPSG:3857"});const v=new et.Z(Object.assign({attributions:u.attribution,format:t},r));return v.set("mapbox-source",u),v}(de,r,x));const Pe=u.getSource();return Pe?fe!==Pe&&(Pe.getAttributions()||Pe.setAttributions(fe.getAttributions()),Pe.format_||(Pe.format_=fe.getFormat()),Pe.url_=fe.getUrl()):u.setSource(fe),Promise.resolve()}let Bt,Zt,ee,se;function ue(){if(se||ct.sprite&&!Zt)se?(u.setStyle(se),Pt().then(X).catch(nt)):nt(new Error("Something went wrong trying to apply style."));else{if(x.projection&&!e){const fe=(0,K.U2)(x.projection).getUnits();"m"!==fe&&(e=en.map(Pe=>Pe/ht.W[fe]))}se=Gs(u,ct,D,e,Zt,ee,(de,fe=x.webfonts)=>function $o(u,i="https://cdn.jsdelivr.net/npm/@fontsource/{font-family}/{fontweight}{-fontstyle}.css"){const c=u.toString();if(c in _r)return _r[c];const t=[];for(let e=0,r=u.length;e<r;++e){u[e]=u[e].replace("Arial Unicode MS","Arial");const x=lr(u[e],1);(0,y.Qx)(x);const D=x.split(" ");t.push([D.slice(3).join(" ").replace(/"/g,""),D[1],D[0]])}for(let e=0,r=t.length;e<r;++e){const v=t[e],x=v[0];if(!Yo(x)&&100!==y.sG.get(`${v[2]}\n${v[1]} \n${x}`)){const D=i.replace("{font-family}",x.replace(/ /g,"-").toLowerCase()).replace("{Font+Family}",x.replace(/ /g,"+")).replace("{fontweight}",v[1]).replace("{-fontstyle}",v[2].replace("normal","").replace(/(.+)/,"-$1")).replace("{fontstyle}",v[2]);if(!document.querySelector('link[href="'+D+'"]')){const G=document.createElement("link");G.href=D,G.rel="stylesheet",document.head.appendChild(G)}}}return _r[c]=u,u}(de,fe),x.getImage),u.getStyle()?Pt().then(X).catch(nt):nt(new Error(`Nothing to show for source [${v}]`))}}if(ct.sprite){const de=new URL(function Wo(u,i,c){const t=hr(u);if(!t)return decodeURI(new URL(u,c).href);if(0!==t.indexOf("sprites/"))throw new Error(`unexpected sprites url: ${u}`);const r=t.slice(8);return`${Hr}/styles/v1/${r}/sprite?access_token=${i}`}(ct.sprite,x.accessToken,r||location.href));Bt=window.devicePixelRatio>=1.5?.5:1;const fe=.5==Bt?"@2x":"";let Pe=de.origin+de.pathname+fe+".json"+de.search;new Promise(function(_e,Ee){zn("Sprite",Pe,x).then(_e).catch(function(be){Pe=de.origin+de.pathname+".json"+de.search,zn("Sprite",Pe,x).then(_e).catch(Ee)})}).then(function(_e){if(void 0===_e&&nt(new Error("No sprites found.")),Zt=_e,ee=de.origin+de.pathname+fe+".png"+de.search,x.transformRequest){const Ee=x.transformRequest(ee,"SpriteImage")||ee;(Ee instanceof Request||Ee instanceof Promise)&&(ee=Ee)}ue()}).catch(function(_e){nt(new Error(`Sprites cannot be loaded: ${Pe}: ${_e.message}`))})}else ue()}).catch(nt)})}const Vi={};function ho(u,i,c={}){return dr(i,c).then(function(t){!function kn(u,i,c){i.layers.some(function(t){if("background"===t.type){if(u instanceof s.Z)return u.setBackground(function(e){return Pr(t,e,c,{})}),!0;if(u instanceof a.Z||u instanceof f.Z)return u.getLayers().insertAt(0,function Tr(u,i,c){const t=document.createElement("div");return t.className="ol-mapbox-style-background",t.style.position="absolute",t.style.width="100%",t.style.height="100%",new s.Z({source:new I.Z({}),render(e){const r=Pr(u,e.viewState.resolution,i,c);return t.style.backgroundColor=r,t}})}(t,c,{})),!0}})}(u,t,c)})}function Pr(u,i,c,t){const e={id:u.id,type:u.type},r=u.layout||{},v=u.paint||{};e.paint=v;const x=qr(i,c.resolutions||en);let D;const G=Se(e,"paint","background-color",x,Vi,t);return void 0!==v["background-opacity"]&&(D=Se(e,"paint","background-opacity",x,Vi,t)),"none"==r.visibility?void 0:vn(G,D)}},7934:(jt,ut,o)=>{"use strict";o.d(ut,{Z:()=>b});var V=o(7438),k=o(7069),J=o(7065);class U extends J.ZP{constructor(y,m,d){super(y),this.element=m,this.index=d}}const b=class S extends V.Z{constructor(y,m){if(super(),this.unique_=!!(m=m||{}).unique,this.array_=y||[],this.unique_)for(let d=0,l=this.array_.length;d<l;++d)this.assertUnique_(this.array_[d],d);this.updateLength_()}clear(){for(;this.getLength()>0;)this.pop()}extend(y){for(let m=0,d=y.length;m<d;++m)this.push(y[m]);return this}forEach(y){const m=this.array_;for(let d=0,l=m.length;d<l;++d)y(m[d],d,m)}getArray(){return this.array_}item(y){return this.array_[y]}getLength(){return this.get("length")}insertAt(y,m){if(y<0||y>this.getLength())throw new Error("Index out of bounds: "+y);this.unique_&&this.assertUnique_(m),this.array_.splice(y,0,m),this.updateLength_(),this.dispatchEvent(new U(k.Z.ADD,m,y))}pop(){return this.removeAt(this.getLength()-1)}push(y){this.unique_&&this.assertUnique_(y);const m=this.getLength();return this.insertAt(m,y),this.getLength()}remove(y){const m=this.array_;for(let d=0,l=m.length;d<l;++d)if(m[d]===y)return this.removeAt(d)}removeAt(y){if(y<0||y>=this.getLength())return;const m=this.array_[y];return this.array_.splice(y,1),this.updateLength_(),this.dispatchEvent(new U(k.Z.REMOVE,m,y)),m}setAt(y,m){if(y>=this.getLength())return void this.insertAt(y,m);if(y<0)throw new Error("Index out of bounds: "+y);this.unique_&&this.assertUnique_(m,y);const l=this.array_[y];this.array_[y]=m,this.dispatchEvent(new U(k.Z.REMOVE,l,y)),this.dispatchEvent(new U(k.Z.ADD,m,y))}updateLength_(){this.set("length",this.array_.length)}assertUnique_(y,m){for(let d=0,l=this.array_.length;d<l;++d)if(this.array_[d]===y&&d!==m)throw new Error("Duplicate item added to a unique collection")}}},7069:(jt,ut,o)=>{"use strict";o.d(ut,{Z:()=>V});const V={ADD:"add",REMOVE:"remove"}},9726:(jt,ut,o)=>{"use strict";o.d(ut,{Z:()=>k});const k=class V{constructor(){this.disposed=!1}dispose(){this.disposed||(this.disposed=!0,this.disposeInternal())}disposeInternal(){}}},7176:(jt,ut,o)=>{"use strict";o.d(ut,{Z:()=>b});var V=o(7438),k=o(4855),J=o(9418),$=o(3583);class U extends V.Z{constructor(y){super(),this.id_=void 0,this.geometryName_="geometry",this.style_=null,this.styleFunction_=void 0,this.geometryChangeKey_=null,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),y&&("function"==typeof y.getSimplifiedGeometry?this.setGeometry(y):this.setProperties(y))}clone(){const y=new U(this.hasProperties()?this.getProperties():null);y.setGeometryName(this.getGeometryName());const m=this.getGeometry();m&&y.setGeometry(m.clone());const d=this.getStyle();return d&&y.setStyle(d),y}getGeometry(){return this.get(this.geometryName_)}getId(){return this.id_}getGeometryName(){return this.geometryName_}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}handleGeometryChange_(){this.changed()}handleGeometryChanged_(){this.geometryChangeKey_&&((0,$.bN)(this.geometryChangeKey_),this.geometryChangeKey_=null);const y=this.getGeometry();y&&(this.geometryChangeKey_=(0,$.oL)(y,k.Z.CHANGE,this.handleGeometryChange_,this)),this.changed()}setGeometry(y){this.set(this.geometryName_,y)}setStyle(y){this.style_=y,this.styleFunction_=y?function S(T){if("function"==typeof T)return T;let y;return Array.isArray(T)?y=T:((0,J.h)("function"==typeof T.getZIndex,"Expected an `ol/style/Style` or an array of `ol/style/Style.js`"),y=[T]),function(){return y}}(y):void 0,this.changed()}setId(y){this.id_=y,this.changed()}setGeometryName(y){this.removeChangeListener(this.geometryName_,this.handleGeometryChanged_),this.geometryName_=y,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),this.handleGeometryChanged_()}}const b=U},1830:(jt,ut,o)=>{"use strict";o.d(ut,{Jx:()=>d,Kp:()=>T,Q9:()=>m,ZP:()=>l});var V=o(1877),k=o(4855),J=o(6343),$=o(7316),U=o(3583),S=o(5173);function T(n,h,s){const f=n;let g=!0,a=!1,I=!1;const p=[(0,U.Vx)(f,k.Z.LOAD,function(){I=!0,a||h()})];return f.src&&$.Tp?(a=!0,f.decode().then(function(){g&&h()}).catch(function(E){g&&(I?h():s())})):p.push((0,U.Vx)(f,k.Z.ERROR,s)),function(){g=!1,p.forEach(U.bN)}}function m(n,h){return h&&(n.src=h),n.src&&$.Tp?new Promise((s,f)=>n.decode().then(()=>s(n)).catch(g=>n.complete&&n.width?s(n):f(g))):function y(n,h){return new Promise((s,f)=>{function g(){I(),s(n)}function a(){I(),f(new Error("Image load error"))}function I(){n.removeEventListener("load",g),n.removeEventListener("error",a)}n.addEventListener("load",g),n.addEventListener("error",a),h&&(n.src=h)})}(n)}function d(n,h){return h&&(n.src=h),n.src&&$.Tp&&$.et?n.decode().then(()=>createImageBitmap(n)).catch(s=>{if(n.complete&&n.width)return n;throw s}):m(n)}const l=class b extends V.Z{constructor(h,s,f,g){super(),this.extent=h,this.pixelRatio_=f,this.resolution=s,this.state="function"==typeof g?J.Z.IDLE:g,this.image_=null,this.loader="function"==typeof g?g:null}changed(){this.dispatchEvent(k.Z.CHANGE)}getExtent(){return this.extent}getImage(){return this.image_}getPixelRatio(){return this.pixelRatio_}getResolution(){return this.resolution}getState(){return this.state}load(){if(this.state==J.Z.IDLE&&this.loader){this.state=J.Z.LOADING,this.changed();const h=this.getResolution(),s=Array.isArray(h)?h[0]:h;(0,S.Vi)(()=>this.loader(this.getExtent(),s,this.getPixelRatio())).then(f=>{"image"in f&&(this.image_=f.image),"extent"in f&&(this.extent=f.extent),"resolution"in f&&(this.resolution=f.resolution),"pixelRatio"in f&&(this.pixelRatio_=f.pixelRatio),(f instanceof HTMLImageElement||f instanceof ImageBitmap||f instanceof HTMLCanvasElement||f instanceof HTMLVideoElement)&&(this.image_=f),this.state=J.Z.LOADED}).catch(f=>{this.state=J.Z.ERROR,console.error(f)}).finally(()=>this.changed())}}setImage(h){this.image_=h}setResolution(h){this.resolution=h}}},8105:(jt,ut,o)=>{"use strict";o.d(ut,{Z:()=>$});var V=o(6343),k=o(1830);const $=class J extends k.ZP{constructor(S,b,T,y,m){super(S,b,T,void 0!==m?V.Z.IDLE:V.Z.LOADED),this.loader_=void 0!==m?m:null,this.canvas_=y,this.error_=null}getError(){return this.error_}handleLoad_(S){S?(this.error_=S,this.state=V.Z.ERROR):this.state=V.Z.LOADED,this.changed()}load(){this.state==V.Z.IDLE&&(this.state=V.Z.LOADING,this.changed(),this.loader_(this.handleLoad_.bind(this)))}getImage(){return this.canvas_}}},6343:(jt,ut,o)=>{"use strict";o.d(ut,{Z:()=>V});const V={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4}},7648:(jt,ut,o)=>{"use strict";o.d(ut,{Z:()=>b});var V=o(2738),k=o(33),J=o(4591),$=o(1830);const b=class U extends V.Z{constructor(y,m,d,l,n,h){super(y,m,h),this.crossOrigin_=l,this.src_=d,this.key=d,this.image_=new Image,null!==l&&(this.image_.crossOrigin=l),this.unlisten_=null,this.tileLoadFunction_=n}getImage(){return this.image_}setImage(y){this.image_=y,this.state=k.Z.LOADED,this.unlistenImage_(),this.changed()}handleImageError_(){this.state=k.Z.ERROR,this.unlistenImage_(),this.image_=function S(){const T=(0,J.E4)(1,1);return T.fillStyle="rgba(0,0,0,0)",T.fillRect(0,0,1,1),T.canvas}(),this.changed()}handleImageLoad_(){const y=this.image_;this.state=y.naturalWidth&&y.naturalHeight?k.Z.LOADED:k.Z.EMPTY,this.unlistenImage_(),this.changed()}load(){this.state==k.Z.ERROR&&(this.state=k.Z.IDLE,this.image_=new Image,null!==this.crossOrigin_&&(this.image_.crossOrigin=this.crossOrigin_)),this.state==k.Z.IDLE&&(this.state=k.Z.LOADING,this.changed(),this.tileLoadFunction_(this,this.src_),this.unlisten_=(0,$.Kp)(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))}unlistenImage_(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}}},9832:(jt,ut,o)=>{"use strict";o.d(ut,{Z:()=>le});var V=o(7438),k=o(7934),J=o(7069),$=o(276),U=o(9726),S=o(5173),b=o(1293),T=o(4836),y=o(77),m=o(4410),d=o(377),l=o(63);function h(Ht,ft){m.c1.expire()}const s=class n extends U.Z{constructor(ft){super(),this.map_=ft}dispatchRenderEvent(ft,St){(0,b.O3)()}calculateMatrices2D(ft){const St=ft.viewState,kt=ft.coordinateToPixelTransform,Lt=ft.pixelToCoordinateTransform;(0,T.qC)(kt,ft.size[0]/2,ft.size[1]/2,1/St.resolution,-1/St.resolution,-St.rotation,-St.center[0],-St.center[1]),(0,T.nb)(Lt,kt)}forEachFeatureAtCoordinate(ft,St,kt,Lt,te,Yt,Et,wt){let it;const z=St.viewState;function _(qt,ne,oe,Qt){return te.call(Yt,ne,qt?oe:null,Qt)}const Z=z.projection,W=(0,l.Cf)(ft.slice(),Z),j=[[0,0]];if(Z.canWrapX()&&Lt){const qt=Z.getExtent(),ne=(0,y.dz)(qt);j.push([-ne,0],[ne,0])}const st=St.layerStatesArray,dt=st.length,Ot=[],Ct=[];for(let qt=0;qt<j.length;qt++)for(let ne=dt-1;ne>=0;--ne){const oe=st[ne],Qt=oe.layer;if(Qt.hasRenderer()&&(0,d.j)(oe,z)&&Et.call(wt,Qt)){const ge=Qt.getRenderer(),we=Qt.getSource();if(ge&&we){const Ie=we.getWrapX()?W:ft,De=_.bind(null,oe.managed);Ct[0]=Ie[0]+j[qt][0],Ct[1]=Ie[1]+j[qt][1],it=ge.forEachFeatureAtCoordinate(Ct,St,kt,De,Ot)}if(it)return it}}if(0===Ot.length)return;const Gt=1/Ot.length;return Ot.forEach((qt,ne)=>qt.distanceSq+=ne*Gt),Ot.sort((qt,ne)=>qt.distanceSq-ne.distanceSq),Ot.some(qt=>it=qt.callback(qt.feature,qt.layer,qt.geometry)),it}hasFeatureAtCoordinate(ft,St,kt,Lt,te,Yt){return void 0!==this.forEachFeatureAtCoordinate(ft,St,kt,Lt,S.uX,this,te,Yt)}getMap(){return this.map_}renderFrame(ft){(0,b.O3)()}scheduleExpireIconCache(ft){m.c1.canExpireCache()&&ft.postRenderFunctions.push(h)}};var f=o(2e3),g=o(3220),a=o(5603),I=o(2349),p=o(1463),E=o(3583),F=o(4591);const K=class w extends s{constructor(ft){super(ft),this.fontChangeListenerKey_=(0,E.oL)(p.sG,f.Z.PROPERTYCHANGE,ft.redrawText.bind(ft)),this.element_=document.createElement("div");const St=this.element_.style;St.position="absolute",St.width="100%",St.height="100%",St.zIndex="0",this.element_.className=I.XV+" ol-layers";const kt=ft.getViewport();kt.insertBefore(this.element_,kt.firstChild||null),this.children_=[],this.renderedVisible_=!0}dispatchRenderEvent(ft,St){const kt=this.getMap();if(kt.hasListener(ft)){const Lt=new g.Z(ft,void 0,St);kt.dispatchEvent(Lt)}}disposeInternal(){(0,E.bN)(this.fontChangeListenerKey_),this.element_.parentNode.removeChild(this.element_),super.disposeInternal()}renderFrame(ft){if(!ft)return void(this.renderedVisible_&&(this.element_.style.display="none",this.renderedVisible_=!1));this.calculateMatrices2D(ft),this.dispatchRenderEvent(a.Z.PRECOMPOSE,ft);const St=ft.layerStatesArray.sort(function(Et,wt){return Et.zIndex-wt.zIndex});St.some(Et=>Et.layer instanceof $.Z&&Et.layer.getDeclutter())&&(ft.declutter={});const Lt=ft.viewState;this.children_.length=0;const te=[];let Yt=null;for(let Et=0,wt=St.length;Et<wt;++Et){const it=St[Et];ft.layerIndex=Et;const z=it.layer,_=z.getSourceState();if(!(0,d.j)(it,Lt)||"ready"!=_&&"undefined"!=_){z.unrender();continue}const Z=z.render(ft,Yt);Z&&(Z!==Yt&&(this.children_.push(Z),Yt=Z),te.push(it))}this.declutter(ft,te),(0,F.hF)(this.element_,this.children_),this.dispatchRenderEvent(a.Z.POSTCOMPOSE,ft),this.renderedVisible_||(this.element_.style.display="",this.renderedVisible_=!0),this.scheduleExpireIconCache(ft)}declutter(ft,St){if(ft.declutter){for(let kt=St.length-1;kt>=0;--kt){const Lt=St[kt],te=Lt.layer;te.getDeclutter()&&te.renderDeclutter(ft,Lt)}St.forEach(kt=>kt.layer.renderDeferred(ft))}}};var O=o(4855),M=o(9895),B=o(7065);const C=class Y extends B.ZP{constructor(ft,St,kt){super(ft),this.map=St,this.frameState=void 0!==kt?kt:null}},A=class L extends C{constructor(ft,St,kt,Lt,te,Yt){super(ft,St,te),this.originalEvent=kt,this.pixel_=null,this.coordinate_=null,this.dragging=void 0!==Lt&&Lt,this.activePointers=Yt}get pixel(){return this.pixel_||(this.pixel_=this.map.getEventPixel(this.originalEvent)),this.pixel_}set pixel(ft){this.pixel_=ft}get coordinate(){return this.coordinate_||(this.coordinate_=this.map.getCoordinateFromPixel(this.pixel)),this.coordinate_}set coordinate(ft){this.coordinate_=ft}preventDefault(){super.preventDefault(),"preventDefault"in this.originalEvent&&this.originalEvent.preventDefault()}stopPropagation(){super.stopPropagation(),"stopPropagation"in this.originalEvent&&this.originalEvent.stopPropagation()}};var P=o(6161),R=o(9389),N=o(1877),Q=o(7316);const H=class et extends N.Z{constructor(ft,St){super(ft),this.map_=ft,this.emulateClicks_=!1,this.dragging_=!1,this.dragListenerKeys_=[],this.moveTolerance_=void 0===St?1:St,this.down_=null;const kt=this.map_.getViewport();this.activePointers_=[],this.trackedTouches_={},this.element_=kt,this.pointerdownListenerKey_=(0,E.oL)(kt,R.Z.POINTERDOWN,this.handlePointerDown_,this),this.relayedListenerKey_=(0,E.oL)(kt,R.Z.POINTERMOVE,this.relayMoveEvent_,this),this.boundHandleTouchMove_=this.handleTouchMove_.bind(this),this.element_.addEventListener(O.Z.TOUCHMOVE,this.boundHandleTouchMove_,!!Q.bM&&{passive:!1})}emulateClick_(ft){let St=new A(P.Z.CLICK,this.map_,ft);this.dispatchEvent(St),void 0!==this.clickTimeoutId_?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=void 0,St=new A(P.Z.DBLCLICK,this.map_,ft),this.dispatchEvent(St)):this.clickTimeoutId_=setTimeout(()=>{this.clickTimeoutId_=void 0;const kt=new A(P.Z.SINGLECLICK,this.map_,ft);this.dispatchEvent(kt)},250)}updateActivePointers_(ft){const St=ft,kt=St.pointerId;if(St.type==P.Z.POINTERUP||St.type==P.Z.POINTERCANCEL){delete this.trackedTouches_[kt];for(const Lt in this.trackedTouches_)if(this.trackedTouches_[Lt].target!==St.target){delete this.trackedTouches_[Lt];break}}else(St.type==P.Z.POINTERDOWN||St.type==P.Z.POINTERMOVE)&&(this.trackedTouches_[kt]=St);this.activePointers_=Object.values(this.trackedTouches_)}handlePointerUp_(ft){this.updateActivePointers_(ft);const St=new A(P.Z.POINTERUP,this.map_,ft,void 0,void 0,this.activePointers_);this.dispatchEvent(St),this.emulateClicks_&&!St.defaultPrevented&&!this.dragging_&&this.isMouseActionButton_(ft)&&this.emulateClick_(this.down_),0===this.activePointers_.length&&(this.dragListenerKeys_.forEach(E.bN),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null)}isMouseActionButton_(ft){return 0===ft.button}handlePointerDown_(ft){this.emulateClicks_=0===this.activePointers_.length,this.updateActivePointers_(ft);const St=new A(P.Z.POINTERDOWN,this.map_,ft,void 0,void 0,this.activePointers_);if(this.dispatchEvent(St),this.down_=new PointerEvent(ft.type,ft),Object.defineProperty(this.down_,"target",{writable:!1,value:ft.target}),0===this.dragListenerKeys_.length){const kt=this.map_.getOwnerDocument();this.dragListenerKeys_.push((0,E.oL)(kt,P.Z.POINTERMOVE,this.handlePointerMove_,this),(0,E.oL)(kt,P.Z.POINTERUP,this.handlePointerUp_,this),(0,E.oL)(this.element_,P.Z.POINTERCANCEL,this.handlePointerUp_,this)),this.element_.getRootNode&&this.element_.getRootNode()!==kt&&this.dragListenerKeys_.push((0,E.oL)(this.element_.getRootNode(),P.Z.POINTERUP,this.handlePointerUp_,this))}}handlePointerMove_(ft){if(this.isMoving_(ft)){this.updateActivePointers_(ft),this.dragging_=!0;const St=new A(P.Z.POINTERDRAG,this.map_,ft,this.dragging_,void 0,this.activePointers_);this.dispatchEvent(St)}}relayMoveEvent_(ft){this.originalPointerMoveEvent_=ft;const St=!(!this.down_||!this.isMoving_(ft));this.dispatchEvent(new A(P.Z.POINTERMOVE,this.map_,ft,St))}handleTouchMove_(ft){const St=this.originalPointerMoveEvent_;(!St||St.defaultPrevented)&&("boolean"!=typeof ft.cancelable||!0===ft.cancelable)&&ft.preventDefault()}isMoving_(ft){return this.dragging_||Math.abs(ft.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(ft.clientY-this.down_.clientY)>this.moveTolerance_}disposeInternal(){this.relayedListenerKey_&&((0,E.bN)(this.relayedListenerKey_),this.relayedListenerKey_=null),this.element_.removeEventListener(O.Z.TOUCHMOVE,this.boundHandleTouchMove_),this.pointerdownListenerKey_&&((0,E.bN)(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(E.bN),this.dragListenerKeys_.length=0,this.element_=null,super.disposeInternal()}};var ot=o(6070),ht=o(8962),mt=o(6775),xt=o(5646),Rt=o(1880),at=o(9418),pt=o(5884),Mt=o(5331),Ft=o(4829),Wt=o(5857),Ut=o(5959),zt=o(7704),rt=o(7195),It=o(4345);function bt(Ht){Ht instanceof d.Z?Ht.setMapInternal(null):Ht instanceof M.Z&&Ht.getLayers().forEach(bt)}function Xt(Ht,ft){if(Ht instanceof d.Z)Ht.setMapInternal(ft);else if(Ht instanceof M.Z){const St=Ht.getLayers().getArray();for(let kt=0,Lt=St.length;kt<Lt;++kt)Xt(St[kt],ft)}}const le=class Vt extends V.Z{constructor(ft){super();const St=function he(Ht){let ft=null;void 0!==Ht.keyboardEventTarget&&(ft="string"==typeof Ht.keyboardEventTarget?document.getElementById(Ht.keyboardEventTarget):Ht.keyboardEventTarget);const St={},kt=Ht.layers&&"function"==typeof Ht.layers.getLayers?Ht.layers:new M.Z({layers:Ht.layers});let Lt,te,Yt;return St[ht.Z.LAYERGROUP]=kt,St[ht.Z.TARGET]=Ht.target,St[ht.Z.VIEW]=Ht.view instanceof xt.ZP?Ht.view:new xt.ZP,void 0!==Ht.controls&&(Array.isArray(Ht.controls)?Lt=new k.Z(Ht.controls.slice()):((0,at.h)("function"==typeof Ht.controls.getArray,"Expected `controls` to be an array or an `ol/Collection.js`"),Lt=Ht.controls)),void 0!==Ht.interactions&&(Array.isArray(Ht.interactions)?te=new k.Z(Ht.interactions.slice()):((0,at.h)("function"==typeof Ht.interactions.getArray,"Expected `interactions` to be an array or an `ol/Collection.js`"),te=Ht.interactions)),void 0!==Ht.overlays?Array.isArray(Ht.overlays)?Yt=new k.Z(Ht.overlays.slice()):((0,at.h)("function"==typeof Ht.overlays.getArray,"Expected `overlays` to be an array or an `ol/Collection.js`"),Yt=Ht.overlays):Yt=new k.Z,{controls:Lt,interactions:te,keyboardEventTarget:ft,overlays:Yt,values:St}}(ft=ft||{});this.loaded_=!0,this.boundHandleBrowserEvent_=this.handleBrowserEvent.bind(this),this.maxTilesLoading_=void 0!==ft.maxTilesLoading?ft.maxTilesLoading:16,this.pixelRatio_=void 0!==ft.pixelRatio?ft.pixelRatio:Q.MP,this.animationDelay_=this.animationDelay_.bind(this),this.coordinateToPixelTransform_=(0,T.Ue)(),this.pixelToCoordinateTransform_=(0,T.Ue)(),this.frameIndex_=0,this.frameState_=null,this.previousExtent_=null,this.viewPropertyListenerKey_=null,this.viewChangeListenerKey_=null,this.layerGroupPropertyListenerKeys_=null,this.viewport_=document.createElement("div"),this.viewport_.className="ol-viewport"+("ontouchstart"in window?" ol-touch":""),this.viewport_.style.position="relative",this.viewport_.style.overflow="hidden",this.viewport_.style.width="100%",this.viewport_.style.height="100%",this.overlayContainer_=document.createElement("div"),this.overlayContainer_.style.position="absolute",this.overlayContainer_.style.zIndex="0",this.overlayContainer_.style.width="100%",this.overlayContainer_.style.height="100%",this.overlayContainer_.style.pointerEvents="none",this.overlayContainer_.className="ol-overlaycontainer",this.viewport_.appendChild(this.overlayContainer_),this.overlayContainerStopEvent_=document.createElement("div"),this.overlayContainerStopEvent_.style.position="absolute",this.overlayContainerStopEvent_.style.zIndex="0",this.overlayContainerStopEvent_.style.width="100%",this.overlayContainerStopEvent_.style.height="100%",this.overlayContainerStopEvent_.style.pointerEvents="none",this.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent",this.viewport_.appendChild(this.overlayContainerStopEvent_),this.mapBrowserEventHandler_=null,this.moveTolerance_=ft.moveTolerance,this.keyboardEventTarget_=St.keyboardEventTarget,this.targetChangeHandlerKeys_=null,this.targetElement_=null,this.resizeObserver_=new ResizeObserver(()=>this.updateSize()),this.controls=St.controls||function Dt(Ht){Ht=Ht||{};const ft=new k.Z;return(void 0===Ht.zoom||Ht.zoom)&&ft.push(new Ft.Z(Ht.zoomOptions)),(void 0===Ht.rotate||Ht.rotate)&&ft.push(new Mt.Z(Ht.rotateOptions)),(void 0===Ht.attribution||Ht.attribution)&&ft.push(new pt.Z(Ht.attributionOptions)),ft}(),this.interactions=St.interactions||(0,Wt.c)({onFocusOnly:!0}),this.overlays_=St.overlays,this.overlayIdIndex_={},this.renderer_=null,this.postRenderFunctions_=[],this.tileQueue_=new mt.Z(this.getTilePriority.bind(this),this.handleTileChange_.bind(this)),this.addChangeListener(ht.Z.LAYERGROUP,this.handleLayerGroupChanged_),this.addChangeListener(ht.Z.VIEW,this.handleViewChanged_),this.addChangeListener(ht.Z.SIZE,this.handleSizeChanged_),this.addChangeListener(ht.Z.TARGET,this.handleTargetChanged_),this.setProperties(St.values);const kt=this;ft.view&&!(ft.view instanceof xt.ZP)&&ft.view.then(function(Lt){kt.setView(new xt.ZP(Lt))}),this.controls.addEventListener(J.Z.ADD,Lt=>{Lt.element.setMap(this)}),this.controls.addEventListener(J.Z.REMOVE,Lt=>{Lt.element.setMap(null)}),this.interactions.addEventListener(J.Z.ADD,Lt=>{Lt.element.setMap(this)}),this.interactions.addEventListener(J.Z.REMOVE,Lt=>{Lt.element.setMap(null)}),this.overlays_.addEventListener(J.Z.ADD,Lt=>{this.addOverlayInternal_(Lt.element)}),this.overlays_.addEventListener(J.Z.REMOVE,Lt=>{const te=Lt.element.getId();void 0!==te&&delete this.overlayIdIndex_[te.toString()],Lt.element.setMap(null)}),this.controls.forEach(Lt=>{Lt.setMap(this)}),this.interactions.forEach(Lt=>{Lt.setMap(this)}),this.overlays_.forEach(this.addOverlayInternal_.bind(this))}addControl(ft){this.getControls().push(ft)}addInteraction(ft){this.getInteractions().push(ft)}addLayer(ft){this.getLayerGroup().getLayers().push(ft)}handleLayerAdd_(ft){Xt(ft.layer,this)}addOverlay(ft){this.getOverlays().push(ft)}addOverlayInternal_(ft){const St=ft.getId();void 0!==St&&(this.overlayIdIndex_[St.toString()]=ft),ft.setMap(this)}disposeInternal(){this.controls.clear(),this.interactions.clear(),this.overlays_.clear(),this.resizeObserver_.disconnect(),this.setTarget(null),super.disposeInternal()}forEachFeatureAtPixel(ft,St,kt){if(!this.frameState_||!this.renderer_)return;const Lt=this.getCoordinateFromPixelInternal(ft);return this.renderer_.forEachFeatureAtCoordinate(Lt,this.frameState_,void 0!==(kt=void 0!==kt?kt:{}).hitTolerance?kt.hitTolerance:0,!1!==kt.checkWrapped,St,null,void 0!==kt.layerFilter?kt.layerFilter:S.uX,null)}getFeaturesAtPixel(ft,St){const kt=[];return this.forEachFeatureAtPixel(ft,function(Lt){kt.push(Lt)},St),kt}getAllLayers(){const ft=[];return function St(kt){kt.forEach(function(Lt){Lt instanceof M.Z?St(Lt.getLayers()):ft.push(Lt)})}(this.getLayers()),ft}hasFeatureAtPixel(ft,St){if(!this.frameState_||!this.renderer_)return!1;const kt=this.getCoordinateFromPixelInternal(ft);return this.renderer_.hasFeatureAtCoordinate(kt,this.frameState_,void 0!==(St=void 0!==St?St:{}).hitTolerance?St.hitTolerance:0,!1!==St.checkWrapped,void 0!==St.layerFilter?St.layerFilter:S.uX,null)}getEventCoordinate(ft){return this.getCoordinateFromPixel(this.getEventPixel(ft))}getEventCoordinateInternal(ft){return this.getCoordinateFromPixelInternal(this.getEventPixel(ft))}getEventPixel(ft){const kt=this.viewport_.getBoundingClientRect(),Lt=this.getSize(),Et="changedTouches"in ft?ft.changedTouches[0]:ft;return[(Et.clientX-kt.left)/(kt.width/Lt[0]),(Et.clientY-kt.top)/(kt.height/Lt[1])]}getTarget(){return this.get(ht.Z.TARGET)}getTargetElement(){return this.targetElement_}getCoordinateFromPixel(ft){return(0,zt.lO)(this.getCoordinateFromPixelInternal(ft),this.getView().getProjection())}getCoordinateFromPixelInternal(ft){const St=this.frameState_;return St?(0,T.nn)(St.pixelToCoordinateTransform,ft.slice()):null}getControls(){return this.controls}getOverlays(){return this.overlays_}getOverlayById(ft){const St=this.overlayIdIndex_[ft.toString()];return void 0!==St?St:null}getInteractions(){return this.interactions}getLayerGroup(){return this.get(ht.Z.LAYERGROUP)}setLayers(ft){const St=this.getLayerGroup();if(ft instanceof k.Z)return void St.setLayers(ft);const kt=St.getLayers();kt.clear(),kt.extend(ft)}getLayers(){return this.getLayerGroup().getLayers()}getLoadingOrNotReady(){const ft=this.getLayerGroup().getLayerStatesArray();for(let St=0,kt=ft.length;St<kt;++St){const Lt=ft[St];if(!Lt.visible)continue;const te=Lt.layer.getRenderer();if(te&&!te.ready)return!0;const Yt=Lt.layer.getSource();if(Yt&&Yt.loading)return!0}return!1}getPixelFromCoordinate(ft){const St=(0,zt.Vs)(ft,this.getView().getProjection());return this.getPixelFromCoordinateInternal(St)}getPixelFromCoordinateInternal(ft){const St=this.frameState_;return St?(0,T.nn)(St.coordinateToPixelTransform,ft.slice(0,2)):null}getRenderer(){return this.renderer_}getSize(){return this.get(ht.Z.SIZE)}getView(){return this.get(ht.Z.VIEW)}getViewport(){return this.viewport_}getOverlayContainer(){return this.overlayContainer_}getOverlayContainerStopEvent(){return this.overlayContainerStopEvent_}getOwnerDocument(){const ft=this.getTargetElement();return ft?ft.ownerDocument:document}getTilePriority(ft,St,kt,Lt){return(0,mt.R)(this.frameState_,ft,St,kt,Lt)}handleBrowserEvent(ft,St){const kt=new A(St=St||ft.type,this,ft);this.handleMapBrowserEvent(kt)}handleMapBrowserEvent(ft){if(!this.frameState_)return;const St=ft.originalEvent,kt=St.type;if(kt===R.Z.POINTERDOWN||kt===O.Z.WHEEL||kt===O.Z.KEYDOWN){const Lt=this.getOwnerDocument(),te=this.viewport_.getRootNode?this.viewport_.getRootNode():Lt,Yt=St.target;if(this.overlayContainerStopEvent_.contains(Yt)||!(te===Lt?Lt.documentElement:te).contains(Yt))return}if(ft.frameState=this.frameState_,!1!==this.dispatchEvent(ft)){const Lt=this.getInteractions().getArray().slice();for(let te=Lt.length-1;te>=0;te--){const Yt=Lt[te];if(Yt.getMap()===this&&Yt.getActive()&&this.getTargetElement()&&(!Yt.handleEvent(ft)||ft.propagationStopped))break}}}handlePostRender(){const ft=this.frameState_,St=this.tileQueue_;if(!St.isEmpty()){let Lt=this.maxTilesLoading_,te=Lt;if(ft){const Yt=ft.viewHints;if(Yt[Rt.Z.ANIMATING]||Yt[Rt.Z.INTERACTING]){const Et=Date.now()-ft.time>8;Lt=Et?0:8,te=Et?0:2}}St.getTilesLoading()<Lt&&(St.reprioritize(),St.loadMoreTiles(Lt,te))}ft&&this.renderer_&&!ft.animate&&(!0===this.renderComplete_?(this.hasListener(a.Z.RENDERCOMPLETE)&&this.renderer_.dispatchRenderEvent(a.Z.RENDERCOMPLETE,ft),!1===this.loaded_&&(this.loaded_=!0,this.dispatchEvent(new C(ot.Z.LOADEND,this,ft)))):!0===this.loaded_&&(this.loaded_=!1,this.dispatchEvent(new C(ot.Z.LOADSTART,this,ft))));const kt=this.postRenderFunctions_;for(let Lt=0,te=kt.length;Lt<te;++Lt)kt[Lt](this,ft);kt.length=0}handleSizeChanged_(){this.getView()&&!this.getView().getAnimating()&&this.getView().resolveConstraints(0),this.render()}handleTargetChanged_(){if(this.mapBrowserEventHandler_){for(let kt=0,Lt=this.targetChangeHandlerKeys_.length;kt<Lt;++kt)(0,E.bN)(this.targetChangeHandlerKeys_[kt]);this.targetChangeHandlerKeys_=null,this.viewport_.removeEventListener(O.Z.CONTEXTMENU,this.boundHandleBrowserEvent_),this.viewport_.removeEventListener(O.Z.WHEEL,this.boundHandleBrowserEvent_),this.mapBrowserEventHandler_.dispose(),this.mapBrowserEventHandler_=null,(0,F.ZF)(this.viewport_)}if(this.targetElement_){this.resizeObserver_.unobserve(this.targetElement_);const kt=this.targetElement_.getRootNode();kt instanceof ShadowRoot&&this.resizeObserver_.unobserve(kt.host),this.setSize(void 0)}const ft=this.getTarget(),St="string"==typeof ft?document.getElementById(ft):ft;if(this.targetElement_=St,St){St.appendChild(this.viewport_),this.renderer_||(this.renderer_=new K(this)),this.mapBrowserEventHandler_=new H(this,this.moveTolerance_);for(const te in P.Z)this.mapBrowserEventHandler_.addEventListener(P.Z[te],this.handleMapBrowserEvent.bind(this));this.viewport_.addEventListener(O.Z.CONTEXTMENU,this.boundHandleBrowserEvent_,!1),this.viewport_.addEventListener(O.Z.WHEEL,this.boundHandleBrowserEvent_,!!Q.bM&&{passive:!1});const kt=this.keyboardEventTarget_?this.keyboardEventTarget_:St;this.targetChangeHandlerKeys_=[(0,E.oL)(kt,O.Z.KEYDOWN,this.handleBrowserEvent,this),(0,E.oL)(kt,O.Z.KEYPRESS,this.handleBrowserEvent,this)];const Lt=St.getRootNode();Lt instanceof ShadowRoot&&this.resizeObserver_.observe(Lt.host),this.resizeObserver_.observe(St)}else this.renderer_&&(clearTimeout(this.postRenderTimeoutHandle_),this.postRenderTimeoutHandle_=void 0,this.postRenderFunctions_.length=0,this.renderer_.dispose(),this.renderer_=null),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0);this.updateSize()}handleTileChange_(){this.render()}handleViewPropertyChanged_(){this.render()}handleViewChanged_(){this.viewPropertyListenerKey_&&((0,E.bN)(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&((0,E.bN)(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);const ft=this.getView();ft&&(this.updateViewportSize_(this.getSize()),this.viewPropertyListenerKey_=(0,E.oL)(ft,f.Z.PROPERTYCHANGE,this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=(0,E.oL)(ft,O.Z.CHANGE,this.handleViewPropertyChanged_,this),ft.resolveConstraints(0)),this.render()}handleLayerGroupChanged_(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(E.bN),this.layerGroupPropertyListenerKeys_=null);const ft=this.getLayerGroup();ft&&(this.handleLayerAdd_(new M.V("addlayer",ft)),this.layerGroupPropertyListenerKeys_=[(0,E.oL)(ft,f.Z.PROPERTYCHANGE,this.render,this),(0,E.oL)(ft,O.Z.CHANGE,this.render,this),(0,E.oL)(ft,"addlayer",this.handleLayerAdd_,this),(0,E.oL)(ft,"removelayer",this.handleLayerRemove_,this)]),this.render()}isRendered(){return!!this.frameState_}animationDelay_(){this.animationDelayKey_=void 0,this.renderFrame_(Date.now())}renderSync(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()}redrawText(){const ft=this.getLayerGroup().getLayerStatesArray();for(let St=0,kt=ft.length;St<kt;++St){const Lt=ft[St].layer;Lt.hasRenderer()&&Lt.getRenderer().handleFontsChanged()}}render(){this.renderer_&&void 0===this.animationDelayKey_&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))}removeControl(ft){return this.getControls().remove(ft)}removeInteraction(ft){return this.getInteractions().remove(ft)}removeLayer(ft){return this.getLayerGroup().getLayers().remove(ft)}handleLayerRemove_(ft){bt(ft.layer)}removeOverlay(ft){return this.getOverlays().remove(ft)}renderFrame_(ft){const St=this.getSize(),kt=this.getView(),Lt=this.frameState_;let te=null;if(void 0!==St&&(0,rt.py)(St)&&kt&&kt.isDef()){const Yt=kt.getHints(this.frameState_?this.frameState_.viewHints:void 0),Et=kt.getState();if(te={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,declutter:null,extent:(0,y.p8)(Et.center,Et.resolution,Et.rotation,St),index:this.frameIndex_++,layerIndex:0,layerStatesArray:this.getLayerGroup().getLayerStatesArray(),pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:St,tileQueue:this.tileQueue_,time:ft,usedTiles:{},viewState:Et,viewHints:Yt,wantedTiles:{},mapId:(0,b.sq)(this),renderTargets:{}},Et.nextCenter&&Et.nextResolution){const wt=isNaN(Et.nextRotation)?Et.rotation:Et.nextRotation;te.nextExtent=(0,y.p8)(Et.nextCenter,Et.nextResolution,wt,St)}}this.frameState_=te,this.renderer_.renderFrame(te),te&&(te.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,te.postRenderFunctions),Lt&&(!this.previousExtent_||!(0,y.xb)(this.previousExtent_)&&!(0,y.fS)(te.extent,this.previousExtent_))&&(this.dispatchEvent(new C(ot.Z.MOVESTART,this,Lt)),this.previousExtent_=(0,y.YN)(this.previousExtent_)),this.previousExtent_&&!te.viewHints[Rt.Z.ANIMATING]&&!te.viewHints[Rt.Z.INTERACTING]&&!(0,y.fS)(te.extent,this.previousExtent_)&&(this.dispatchEvent(new C(ot.Z.MOVEEND,this,te)),(0,y.d9)(te.extent,this.previousExtent_))),this.dispatchEvent(new C(ot.Z.POSTRENDER,this,te)),this.renderComplete_=this.hasListener(ot.Z.LOADSTART)||this.hasListener(ot.Z.LOADEND)||this.hasListener(a.Z.RENDERCOMPLETE)?!this.tileQueue_.getTilesLoading()&&!this.tileQueue_.getCount()&&!this.getLoadingOrNotReady():void 0,this.postRenderTimeoutHandle_||(this.postRenderTimeoutHandle_=setTimeout(()=>{this.postRenderTimeoutHandle_=void 0,this.handlePostRender()},0))}setLayerGroup(ft){const St=this.getLayerGroup();St&&this.handleLayerRemove_(new M.V("removelayer",St)),this.set(ht.Z.LAYERGROUP,ft)}setSize(ft){this.set(ht.Z.SIZE,ft)}setTarget(ft){this.set(ht.Z.TARGET,ft)}setView(ft){if(!ft||ft instanceof xt.ZP)return void this.set(ht.Z.VIEW,ft);this.set(ht.Z.VIEW,new xt.ZP);const St=this;ft.then(function(kt){St.setView(new xt.ZP(kt))})}updateSize(){const ft=this.getTargetElement();let St;if(ft){const Lt=getComputedStyle(ft),te=ft.offsetWidth-parseFloat(Lt.borderLeftWidth)-parseFloat(Lt.paddingLeft)-parseFloat(Lt.paddingRight)-parseFloat(Lt.borderRightWidth),Yt=ft.offsetHeight-parseFloat(Lt.borderTopWidth)-parseFloat(Lt.paddingTop)-parseFloat(Lt.paddingBottom)-parseFloat(Lt.borderBottomWidth);!isNaN(te)&&!isNaN(Yt)&&(St=[te,Yt],!(0,rt.py)(St)&&(ft.offsetWidth||ft.offsetHeight||ft.getClientRects().length)&&(0,It.ZK)("No map visible because the map container's width or height are 0."))}const kt=this.getSize();St&&(!kt||!(0,Ut.fS)(St,kt))&&(this.setSize(St),this.updateViewportSize_(St))}updateViewportSize_(ft){const St=this.getView();St&&St.setViewportSize(ft)}}},6161:(jt,ut,o)=>{"use strict";o.d(ut,{Z:()=>k});var V=o(4855);const k={SINGLECLICK:"singleclick",CLICK:V.Z.CLICK,DBLCLICK:V.Z.DBLCLICK,POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"}},6070:(jt,ut,o)=>{"use strict";o.d(ut,{Z:()=>V});const V={POSTRENDER:"postrender",MOVESTART:"movestart",MOVEEND:"moveend",LOADSTART:"loadstart",LOADEND:"loadend"}},8962:(jt,ut,o)=>{"use strict";o.d(ut,{Z:()=>V});const V={LAYERGROUP:"layergroup",SIZE:"size",TARGET:"target",VIEW:"view"}},7438:(jt,ut,o)=>{"use strict";o.d(ut,{Z:()=>T});var V=o(7065),k=o(2e3),J=o(8287),$=o(1293),U=o(5269);class S extends V.ZP{constructor(m,d,l){super(m),this.key=d,this.oldValue=l}}const T=class b extends J.Z{constructor(m){super(),(0,$.sq)(this),this.values_=null,void 0!==m&&this.setProperties(m)}get(m){let d;return this.values_&&this.values_.hasOwnProperty(m)&&(d=this.values_[m]),d}getKeys(){return this.values_&&Object.keys(this.values_)||[]}getProperties(){return this.values_&&Object.assign({},this.values_)||{}}getPropertiesInternal(){return this.values_}hasProperties(){return!!this.values_}notify(m,d){let l;l=`change:${m}`,this.hasListener(l)&&this.dispatchEvent(new S(l,m,d)),l=k.Z.PROPERTYCHANGE,this.hasListener(l)&&this.dispatchEvent(new S(l,m,d))}addChangeListener(m,d){this.addEventListener(`change:${m}`,d)}removeChangeListener(m,d){this.removeEventListener(`change:${m}`,d)}set(m,d,l){const n=this.values_||(this.values_={});if(l)n[m]=d;else{const h=n[m];n[m]=d,h!==d&&this.notify(m,h)}}setProperties(m,d){for(const l in m)this.set(l,m[l],d)}applyProperties(m){m.values_&&Object.assign(this.values_||(this.values_={}),m.values_)}unset(m,d){if(this.values_&&m in this.values_){const l=this.values_[m];delete this.values_[m],(0,U.x)(this.values_)&&(this.values_=null),d||this.notify(m,l)}}}},2e3:(jt,ut,o)=>{"use strict";o.d(ut,{Z:()=>V});const V={PROPERTYCHANGE:"propertychange"}},8287:(jt,ut,o)=>{"use strict";o.d(ut,{B:()=>U,Z:()=>S});var V=o(1877),k=o(4855),J=o(3583);function U(b){if(Array.isArray(b))for(let T=0,y=b.length;T<y;++T)(0,J.bN)(b[T]);else(0,J.bN)(b)}const S=class $ extends V.Z{constructor(){super(),this.on=this.onInternal,this.once=this.onceInternal,this.un=this.unInternal,this.revision_=0}changed(){++this.revision_,this.dispatchEvent(k.Z.CHANGE)}getRevision(){return this.revision_}onInternal(T,y){if(Array.isArray(T)){const m=T.length,d=new Array(m);for(let l=0;l<m;++l)d[l]=(0,J.oL)(this,T[l],y);return d}return(0,J.oL)(this,T,y)}onceInternal(T,y){let m;if(Array.isArray(T)){const d=T.length;m=new Array(d);for(let l=0;l<d;++l)m[l]=(0,J.Vx)(this,T[l],y)}else m=(0,J.Vx)(this,T,y);return y.ol_key=m,m}unInternal(T,y){const m=y.ol_key;if(m)U(m);else if(Array.isArray(T))for(let d=0,l=T.length;d<l;++d)this.removeEventListener(T[d],y);else this.removeEventListener(T,y)}}},8485:(jt,ut,o)=>{"use strict";o.d(ut,{Z:()=>y});var V=o(7438),k=o(6070),J=o(2349),$=o(77),U=o(3583),S=o(4591);const y=class T extends V.Z{constructor(d){super(),this.options=d,this.id=d.id,this.insertFirst=void 0===d.insertFirst||d.insertFirst,this.stopEvent=void 0===d.stopEvent||d.stopEvent,this.element=document.createElement("div"),this.element.className=void 0!==d.className?d.className:"ol-overlay-container "+J.$A,this.element.style.position="absolute",this.element.style.pointerEvents="auto",this.autoPan=!0===d.autoPan?{}:d.autoPan||void 0,this.rendered={transform_:"",visible:!0},this.mapPostrenderListenerKey=null,this.addChangeListener("element",this.handleElementChanged),this.addChangeListener("map",this.handleMapChanged),this.addChangeListener("offset",this.handleOffsetChanged),this.addChangeListener("position",this.handlePositionChanged),this.addChangeListener("positioning",this.handlePositioningChanged),void 0!==d.element&&this.setElement(d.element),this.setOffset(void 0!==d.offset?d.offset:[0,0]),this.setPositioning(d.positioning||"top-left"),void 0!==d.position&&this.setPosition(d.position)}getElement(){return this.get("element")}getId(){return this.id}getMap(){return this.get("map")||null}getOffset(){return this.get("offset")}getPosition(){return this.get("position")}getPositioning(){return this.get("positioning")}handleElementChanged(){(0,S.ep)(this.element);const d=this.getElement();d&&this.element.appendChild(d)}handleMapChanged(){this.mapPostrenderListenerKey&&((0,S.ZF)(this.element),(0,U.bN)(this.mapPostrenderListenerKey),this.mapPostrenderListenerKey=null);const d=this.getMap();if(d){this.mapPostrenderListenerKey=(0,U.oL)(d,k.Z.POSTRENDER,this.render,this),this.updatePixelPosition();const l=this.stopEvent?d.getOverlayContainerStopEvent():d.getOverlayContainer();this.insertFirst?l.insertBefore(this.element,l.childNodes[0]||null):l.appendChild(this.element),this.performAutoPan()}}render(){this.updatePixelPosition()}handleOffsetChanged(){this.updatePixelPosition()}handlePositionChanged(){this.updatePixelPosition(),this.performAutoPan()}handlePositioningChanged(){this.updatePixelPosition()}setElement(d){this.set("element",d)}setMap(d){this.set("map",d)}setOffset(d){this.set("offset",d)}setPosition(d){this.set("position",d)}performAutoPan(){this.autoPan&&this.panIntoView(this.autoPan)}panIntoView(d){const l=this.getMap();if(!l||!l.getTargetElement()||!this.get("position"))return;const n=this.getRect(l.getTargetElement(),l.getSize()),h=this.getElement(),s=this.getRect(h,[(0,S.iO)(h),(0,S.Pb)(h)]),f=void 0===(d=d||{}).margin?20:d.margin;if(!(0,$.r4)(n,s)){const g=s[0]-n[0],a=n[2]-s[2],I=s[1]-n[1],p=n[3]-s[3],E=[0,0];if(g<0?E[0]=g-f:a<0&&(E[0]=Math.abs(a)+f),I<0?E[1]=I-f:p<0&&(E[1]=Math.abs(p)+f),0!==E[0]||0!==E[1]){const F=l.getView().getCenterInternal(),w=l.getPixelFromCoordinateInternal(F);if(!w)return;const K=[w[0]+E[0],w[1]+E[1]],O=d.animation||{};l.getView().animateInternal({center:l.getCoordinateFromPixelInternal(K),duration:O.duration,easing:O.easing})}}}getRect(d,l){const n=d.getBoundingClientRect(),h=n.left+window.pageXOffset,s=n.top+window.pageYOffset;return[h,s,h+l[0],s+l[1]]}setPositioning(d){this.set("positioning",d)}setVisible(d){this.rendered.visible!==d&&(this.element.style.display=d?"":"none",this.rendered.visible=d)}updatePixelPosition(){const d=this.getMap(),l=this.getPosition();if(!d||!d.isRendered()||!l)return void this.setVisible(!1);const n=d.getPixelFromCoordinate(l),h=d.getSize();this.updateRenderedPosition(n,h)}updateRenderedPosition(d,l){const n=this.element.style,h=this.getOffset(),s=this.getPositioning();this.setVisible(!0);let a="0%",I="0%";"bottom-right"==s||"center-right"==s||"top-right"==s?a="-100%":("bottom-center"==s||"center-center"==s||"top-center"==s)&&(a="-50%"),"bottom-left"==s||"bottom-center"==s||"bottom-right"==s?I="-100%":("center-left"==s||"center-center"==s||"center-right"==s)&&(I="-50%");const p=`translate(${a}, ${I}) translate(${Math.round(d[0]+h[0])+"px"}, ${Math.round(d[1]+h[1])+"px"})`;this.rendered.transform_!=p&&(this.rendered.transform_=p,n.transform=p)}getOptions(){return this.options}}},2738:(jt,ut,o)=>{"use strict";o.d(ut,{Z:()=>b});var V=o(1877),k=o(4855),J=o(33),$=o(1293),U=o(9644);const b=class S extends V.Z{constructor(y,m,d){super(),d=d||{},this.tileCoord=y,this.state=m,this.interimTile=null,this.key="",this.transition_=void 0===d.transition?250:d.transition,this.transitionStarts_={},this.interpolate=!!d.interpolate}changed(){this.dispatchEvent(k.Z.CHANGE)}release(){this.state===J.Z.ERROR&&this.setState(J.Z.EMPTY)}getKey(){return this.key+"/"+this.tileCoord}getInterimTile(){let y=this.interimTile;if(!y)return this;do{if(y.getState()==J.Z.LOADED)return this.transition_=0,y;y=y.interimTile}while(y);return this}refreshInterimChain(){let y=this.interimTile;if(!y)return;let m=this;do{if(y.getState()==J.Z.LOADED){y.interimTile=null;break}y.getState()==J.Z.LOADING?m=y:y.getState()==J.Z.IDLE?m.interimTile=y.interimTile:m=y,y=m.interimTile}while(y)}getTileCoord(){return this.tileCoord}getState(){return this.state}setState(y){if(this.state!==J.Z.ERROR&&this.state>y)throw new Error("Tile load sequence violation");this.state=y,this.changed()}load(){(0,$.O3)()}getAlpha(y,m){if(!this.transition_)return 1;let d=this.transitionStarts_[y];if(d){if(-1===d)return 1}else d=m,this.transitionStarts_[y]=d;const l=m-d+1e3/60;return l>=this.transition_?1:(0,U.YQ)(l/this.transition_)}inTransition(y){return!!this.transition_&&-1!==this.transitionStarts_[y]}endTransition(y){this.transition_&&(this.transitionStarts_[y]=-1)}}},4309:(jt,ut,o)=>{"use strict";o.d(ut,{Z:()=>S});var V=o(9418);const J=class k{constructor(T){this.highWaterMark=void 0!==T?T:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}canExpireCache(){return this.highWaterMark>0&&this.getCount()>this.highWaterMark}expireCache(T){for(;this.canExpireCache();)this.pop()}clear(){this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}containsKey(T){return this.entries_.hasOwnProperty(T)}forEach(T){let y=this.oldest_;for(;y;)T(y.value_,y.key_,this),y=y.newer}get(T,y){const m=this.entries_[T];return(0,V.h)(void 0!==m,"Tried to get a value for a key that does not exist in the cache"),m===this.newest_||(m===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(m.newer.older=m.older,m.older.newer=m.newer),m.newer=null,m.older=this.newest_,this.newest_.newer=m,this.newest_=m),m.value_}remove(T){const y=this.entries_[T];return(0,V.h)(void 0!==y,"Tried to get a value for a key that does not exist in the cache"),y===this.newest_?(this.newest_=y.older,this.newest_&&(this.newest_.newer=null)):y===this.oldest_?(this.oldest_=y.newer,this.oldest_&&(this.oldest_.older=null)):(y.newer.older=y.older,y.older.newer=y.newer),delete this.entries_[T],--this.count_,y.value_}getCount(){return this.count_}getKeys(){const T=new Array(this.count_);let m,y=0;for(m=this.newest_;m;m=m.older)T[y++]=m.key_;return T}getValues(){const T=new Array(this.count_);let m,y=0;for(m=this.newest_;m;m=m.older)T[y++]=m.value_;return T}peekLast(){return this.oldest_.value_}peekLastKey(){return this.oldest_.key_}peekFirstKey(){return this.newest_.key_}peek(T){return this.entries_[T]?.value_}pop(){const T=this.oldest_;return delete this.entries_[T.key_],T.newer&&(T.newer.older=null),this.oldest_=T.newer,this.oldest_||(this.newest_=null),--this.count_,T.value_}replace(T,y){this.get(T),this.entries_[T].value_=y}set(T,y){(0,V.h)(!(T in this.entries_),"Tried to set a value for a key that is used already");const m={key_:T,newer:null,older:this.newest_,value_:y};this.newest_?this.newest_.newer=m:this.oldest_=m,this.newest_=m,this.entries_[T]=m,++this.count_}setSize(T){this.highWaterMark=T}};var $=o(4092);const S=class U extends J{clear(){for(;this.getCount()>0;)this.pop().release();super.clear()}expireCache(T){for(;this.canExpireCache()&&!(this.peekLast().getKey()in T);)this.pop().release()}pruneExceptNewestZ(){if(0===this.getCount())return;const T=this.peekFirstKey(),m=(0,$.Ul)(T)[0];this.forEach(d=>{d.tileCoord[0]!==m&&(this.remove((0,$.km)(d.tileCoord)),d.release())})}}},6775:(jt,ut,o)=>{"use strict";o.d(ut,{Z:()=>y,R:()=>m});var V=o(4855),k=o(9418),J=o(5269);const $=1/0,S=class U{constructor(l,n){this.priorityFunction_=l,this.keyFunction_=n,this.elements_=[],this.priorities_=[],this.queuedElements_={}}clear(){this.elements_.length=0,this.priorities_.length=0,(0,J.Z)(this.queuedElements_)}dequeue(){const l=this.elements_,n=this.priorities_,h=l[0];1==l.length?(l.length=0,n.length=0):(l[0]=l.pop(),n[0]=n.pop(),this.siftUp_(0));const s=this.keyFunction_(h);return delete this.queuedElements_[s],h}enqueue(l){(0,k.h)(!(this.keyFunction_(l)in this.queuedElements_),"Tried to enqueue an `element` that was already added to the queue");const n=this.priorityFunction_(l);return n!=$&&(this.elements_.push(l),this.priorities_.push(n),this.queuedElements_[this.keyFunction_(l)]=!0,this.siftDown_(0,this.elements_.length-1),!0)}getCount(){return this.elements_.length}getLeftChildIndex_(l){return 2*l+1}getRightChildIndex_(l){return 2*l+2}getParentIndex_(l){return l-1>>1}heapify_(){let l;for(l=(this.elements_.length>>1)-1;l>=0;l--)this.siftUp_(l)}isEmpty(){return 0===this.elements_.length}isKeyQueued(l){return l in this.queuedElements_}isQueued(l){return this.isKeyQueued(this.keyFunction_(l))}siftUp_(l){const n=this.elements_,h=this.priorities_,s=n.length,f=n[l],g=h[l],a=l;for(;l<s>>1;){const I=this.getLeftChildIndex_(l),p=this.getRightChildIndex_(l),E=p<s&&h[p]<h[I]?p:I;n[l]=n[E],h[l]=h[E],l=E}n[l]=f,h[l]=g,this.siftDown_(a,l)}siftDown_(l,n){const h=this.elements_,s=this.priorities_,f=h[n],g=s[n];for(;n>l;){const a=this.getParentIndex_(n);if(!(s[a]>g))break;h[n]=h[a],s[n]=s[a],n=a}h[n]=f,s[n]=g}reprioritize(){const l=this.priorityFunction_,n=this.elements_,h=this.priorities_;let s=0;const f=n.length;let g,a,I;for(a=0;a<f;++a)g=n[a],I=l(g),I==$?delete this.queuedElements_[this.keyFunction_(g)]:(h[s]=I,n[s++]=g);n.length=s,h.length=s,this.heapify_()}};var b=o(33);const y=class T extends S{constructor(l,n){super(function(h){return l.apply(null,h)},function(h){return h[0].getKey()}),this.boundHandleTileChange_=this.handleTileChange.bind(this),this.tileChangeCallback_=n,this.tilesLoading_=0,this.tilesLoadingKeys_={}}enqueue(l){const n=super.enqueue(l);return n&&l[0].addEventListener(V.Z.CHANGE,this.boundHandleTileChange_),n}getTilesLoading(){return this.tilesLoading_}handleTileChange(l){const n=l.target,h=n.getState();if(h===b.Z.LOADED||h===b.Z.ERROR||h===b.Z.EMPTY){h!==b.Z.ERROR&&n.removeEventListener(V.Z.CHANGE,this.boundHandleTileChange_);const s=n.getKey();s in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[s],--this.tilesLoading_),this.tileChangeCallback_()}}loadMoreTiles(l,n){let s,f,g,h=0;for(;this.tilesLoading_<l&&h<n&&this.getCount()>0;)f=this.dequeue()[0],g=f.getKey(),s=f.getState(),s===b.Z.IDLE&&!(g in this.tilesLoadingKeys_)&&(this.tilesLoadingKeys_[g]=!0,++this.tilesLoading_,++h,f.load())}};function m(d,l,n,h,s){if(!d||!(n in d.wantedTiles)||!d.wantedTiles[n][l.getKey()])return $;const f=d.viewState.center,g=h[0]-f[0],a=h[1]-f[1];return 65536*Math.log(s)+Math.sqrt(g*g+a*a)/s}},8702:(jt,ut,o)=>{"use strict";o.d(ut,{T:()=>k,Z:()=>J});class V{constructor(U,S,b,T){this.minX=U,this.maxX=S,this.minY=b,this.maxY=T}contains(U){return this.containsXY(U[1],U[2])}containsTileRange(U){return this.minX<=U.minX&&U.maxX<=this.maxX&&this.minY<=U.minY&&U.maxY<=this.maxY}containsXY(U,S){return this.minX<=U&&U<=this.maxX&&this.minY<=S&&S<=this.maxY}equals(U){return this.minX==U.minX&&this.minY==U.minY&&this.maxX==U.maxX&&this.maxY==U.maxY}extend(U){U.minX<this.minX&&(this.minX=U.minX),U.maxX>this.maxX&&(this.maxX=U.maxX),U.minY<this.minY&&(this.minY=U.minY),U.maxY>this.maxY&&(this.maxY=U.maxY)}getHeight(){return this.maxY-this.minY+1}getSize(){return[this.getWidth(),this.getHeight()]}getWidth(){return this.maxX-this.minX+1}intersects(U){return this.minX<=U.maxX&&this.maxX>=U.minX&&this.minY<=U.maxY&&this.maxY>=U.minY}}function k($,U,S,b,T){return void 0!==T?(T.minX=$,T.maxX=U,T.minY=S,T.maxY=b,T):new V($,U,S,b)}const J=V},33:(jt,ut,o)=>{"use strict";o.d(ut,{Z:()=>V});const V={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4}},8939:(jt,ut,o)=>{"use strict";o.d(ut,{Z:()=>$});var V=o(2738),k=o(33);const $=class J extends V.Z{constructor(S,b,T,y,m,d){super(S,b,d),this.extent=null,this.format_=y,this.features_=null,this.projection=null,this.tileLoadFunction_=m,this.url_=T,this.key=T}getFormat(){return this.format_}getFeatures(){return this.features_}load(){this.state==k.Z.IDLE&&(this.setState(k.Z.LOADING),this.tileLoadFunction_(this,this.url_),this.loader_&&this.loader_(this.extent,this.resolution,this.projection))}onLoad(S,b){this.setFeatures(S)}onError(){this.setState(k.Z.ERROR)}setFeatures(S){this.features_=S,this.setState(k.Z.LOADED)}setLoader(S){this.loader_=S}}},5646:(jt,ut,o)=>{"use strict";o.d(ut,{ZP:()=>L});var V=o(7438),k=o(1880),J=o(7194),$=o(1821),U=o(7704),S=o(5173),b=o(63),T=o(9418),y=o(6868);function m(A,P,R){return function(N,Q,et,H,ot){if(!N)return;if(!Q&&!P)return N;const ht=P?0:et[0]*Q,mt=P?0:et[1]*Q,xt=ot?ot[0]:0,Rt=ot?ot[1]:0;let at=A[0]+ht/2+xt,pt=A[2]-ht/2+xt,Mt=A[1]+mt/2+Rt,Ft=A[3]-mt/2+Rt;at>pt&&(at=(pt+at)/2,pt=at),Mt>Ft&&(Mt=(Ft+Mt)/2,Ft=Mt);let Dt=(0,y.uZ)(N[0],at,pt),Wt=(0,y.uZ)(N[1],Mt,Ft);if(H&&R&&Q){const Ut=30*Q;Dt+=-Ut*Math.log(1+Math.max(0,at-N[0])/Ut)+Ut*Math.log(1+Math.max(0,N[0]-pt)/Ut),Wt+=-Ut*Math.log(1+Math.max(0,Mt-N[1])/Ut)+Ut*Math.log(1+Math.max(0,N[1]-Ft)/Ut)}return[Dt,Wt]}}function d(A){return A}var l=o(77),n=o(5959);function h(A,P,R,N){const Q=(0,l.dz)(P)/R[0],et=(0,l.Cr)(P)/R[1];return N?Math.min(A,Math.max(Q,et)):Math.min(A,Math.min(Q,et))}function s(A,P,R){let N=Math.min(A,P);return N*=Math.log(1+50*Math.max(0,A/P-1))/50+1,R&&(N=Math.max(N,R),N/=Math.log(1+50*Math.max(0,R/A-1))/50+1),(0,y.uZ)(N,R/2,2*P)}function a(A,P,R,N,Q){return R=void 0===R||R,function(et,H,ot,ht){if(void 0!==et){const mt=N?h(A,N,ot,Q):A;return R&&ht?s(et,mt,P):(0,y.uZ)(et,P,mt)}}}var I=o(7054),p=o(9644),E=o(8943);function K(A,P){setTimeout(function(){A(P)},0)}function C(A,P,R,N,Q){const et=Math.cos(-Q);let H=Math.sin(-Q),ot=A[0]*et-A[1]*H,ht=A[1]*et+A[0]*H;return ot+=(P[0]/2-R[0])*N,ht+=(R[1]-P[1]/2)*N,H=-H,[ot*et-ht*H,ht*et+ot*H]}const L=class w extends V.Z{constructor(P){super(),P=Object.assign({},P),this.hints_=[0,0],this.animations_=[],this.projection_=(0,U.UQ)(P.projection,"EPSG:3857"),this.viewportSize_=[100,100],this.targetCenter_=null,this.nextCenter_=null,this.cancelAnchor_=void 0,P.projection&&(0,U.h_)(),P.center&&(P.center=(0,U.Vs)(P.center,this.projection_)),P.extent&&(P.extent=(0,U.dY)(P.extent,this.projection_)),this.applyOptions_(P)}applyOptions_(P){const R=Object.assign({},P);for(const ot in J.Z)delete R[ot];this.setProperties(R,!0);const N=function M(A){let P,R,N,H=void 0!==A.minZoom?A.minZoom:0,ot=void 0!==A.maxZoom?A.maxZoom:28;const ht=void 0!==A.zoomFactor?A.zoomFactor:2,mt=void 0!==A.multiWorld&&A.multiWorld,xt=void 0===A.smoothResolutionConstraint||A.smoothResolutionConstraint,Rt=void 0!==A.showFullExtent&&A.showFullExtent,at=(0,U.UQ)(A.projection,"EPSG:3857"),pt=at.getExtent();let Mt=A.constrainOnlyCenter,Ft=A.extent;if(!mt&&!Ft&&at.isGlobal()&&(Mt=!1,Ft=pt),void 0!==A.resolutions){const Dt=A.resolutions;R=Dt[H],N=void 0!==Dt[ot]?Dt[ot]:Dt[Dt.length-1],P=A.constrainResolution?function f(A,P,R,N){return P=void 0===P||P,function(Q,et,H,ot){if(void 0!==Q){const ht=A[0],mt=A[A.length-1],xt=R?h(ht,R,H,N):ht;if(ot)return P?s(Q,xt,mt):(0,y.uZ)(Q,mt,xt);const Rt=Math.min(xt,Q),at=Math.floor((0,n.h7)(A,Rt,et));return A[at]>xt&&at<A.length-1?A[at+1]:A[at]}}}(Dt,xt,!Mt&&Ft,Rt):a(R,N,xt,!Mt&&Ft,Rt)}else{const Wt=(pt?Math.max((0,l.dz)(pt),(0,l.Cr)(pt)):360*U.Wm.degrees/at.getMetersPerUnit())/$.S/Math.pow(2,0),Ut=Wt/Math.pow(2,28);R=A.maxResolution,void 0!==R?H=0:R=Wt/Math.pow(ht,H),N=A.minResolution,void 0===N&&(N=void 0!==A.maxZoom?void 0!==A.maxResolution?R/Math.pow(ht,ot):Wt/Math.pow(ht,ot):Ut),ot=H+Math.floor(Math.log(R/N)/Math.log(ht)),N=R/Math.pow(ht,ot-H),P=A.constrainResolution?function g(A,P,R,N,Q,et){return N=void 0===N||N,R=void 0!==R?R:0,function(H,ot,ht,mt){if(void 0!==H){const xt=Q?h(P,Q,ht,et):P;if(mt)return N?s(H,xt,R):(0,y.uZ)(H,R,xt);const Rt=1e-9,at=Math.ceil(Math.log(P/xt)/Math.log(A)-Rt),pt=-ot*(.5-Rt)+.5,Mt=Math.min(xt,H),Ft=Math.floor(Math.log(P/Mt)/Math.log(A)+pt),Dt=Math.max(at,Ft),Wt=P/Math.pow(A,Dt);return(0,y.uZ)(Wt,R,xt)}}}(ht,R,N,xt,!Mt&&Ft,Rt):a(R,N,xt,!Mt&&Ft,Rt)}return{constraint:P,maxResolution:R,minResolution:N,minZoom:H,zoomFactor:ht}}(P);this.maxResolution_=N.maxResolution,this.minResolution_=N.minResolution,this.zoomFactor_=N.zoomFactor,this.resolutions_=P.resolutions,this.padding_=P.padding,this.minZoom_=N.minZoom;const Q=function O(A){if(void 0!==A.extent)return m(A.extent,A.constrainOnlyCenter,void 0===A.smoothExtentConstraint||A.smoothExtentConstraint);const P=(0,U.UQ)(A.projection,"EPSG:3857");if(!0!==A.multiWorld&&P.isGlobal()){const R=P.getExtent().slice();return R[0]=-1/0,R[2]=1/0,m(R,!1,!1)}return d}(P),et=N.constraint,H=function B(A){if(void 0===A.enableRotation||A.enableRotation){const R=A.constrainRotation;return void 0===R||!0===R?(0,I.Gw)():!1===R?I.YP:"number"==typeof R?(0,I.gE)(R):I.YP}return I.h$}(P);this.constraints_={center:Q,resolution:et,rotation:H},this.setRotation(void 0!==P.rotation?P.rotation:0),this.setCenterInternal(void 0!==P.center?P.center:null),void 0!==P.resolution?this.setResolution(P.resolution):void 0!==P.zoom&&this.setZoom(P.zoom)}get padding(){return this.padding_}set padding(P){let R=this.padding_;this.padding_=P;const N=this.getCenterInternal();if(N){const Q=P||[0,0,0,0];R=R||[0,0,0,0];const et=this.getResolution();this.setCenterInternal([N[0]+et/2*(Q[3]-R[3]+R[1]-Q[1]),N[1]-et/2*(Q[0]-R[0]+R[2]-Q[2])])}}getUpdatedOptions_(P){const R=this.getProperties();return void 0!==R.resolution?R.resolution=this.getResolution():R.zoom=this.getZoom(),R.center=this.getCenterInternal(),R.rotation=this.getRotation(),Object.assign({},R,P)}animate(P){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);const R=new Array(arguments.length);for(let N=0;N<R.length;++N){let Q=arguments[N];Q.center&&(Q=Object.assign({},Q),Q.center=(0,U.Vs)(Q.center,this.getProjection())),Q.anchor&&(Q=Object.assign({},Q),Q.anchor=(0,U.Vs)(Q.anchor,this.getProjection())),R[N]=Q}this.animateInternal.apply(this,R)}animateInternal(P){let N,R=arguments.length;R>1&&"function"==typeof arguments[R-1]&&(N=arguments[R-1],--R);let Q=0;for(;Q<R&&!this.isDef();++Q){const xt=arguments[Q];xt.center&&this.setCenterInternal(xt.center),void 0!==xt.zoom?this.setZoom(xt.zoom):xt.resolution&&this.setResolution(xt.resolution),void 0!==xt.rotation&&this.setRotation(xt.rotation)}if(Q===R)return void(N&&K(N,!0));let et=Date.now(),H=this.targetCenter_.slice(),ot=this.targetResolution_,ht=this.targetRotation_;const mt=[];for(;Q<R;++Q){const xt=arguments[Q],Rt={start:et,complete:!1,anchor:xt.anchor,duration:void 0!==xt.duration?xt.duration:1e3,easing:xt.easing||p.rd,callback:N};if(xt.center&&(Rt.sourceCenter=H,Rt.targetCenter=xt.center.slice(),H=Rt.targetCenter),void 0!==xt.zoom?(Rt.sourceResolution=ot,Rt.targetResolution=this.getResolutionForZoom(xt.zoom),ot=Rt.targetResolution):xt.resolution&&(Rt.sourceResolution=ot,Rt.targetResolution=xt.resolution,ot=Rt.targetResolution),void 0!==xt.rotation){Rt.sourceRotation=ht;const at=(0,y.$W)(xt.rotation-ht+Math.PI,2*Math.PI)-Math.PI;Rt.targetRotation=ht+at,ht=Rt.targetRotation}(A=Rt).sourceCenter&&A.targetCenter&&!(0,b.fS)(A.sourceCenter,A.targetCenter)||A.sourceResolution!==A.targetResolution||A.sourceRotation!==A.targetRotation?et+=Rt.duration:Rt.complete=!0,mt.push(Rt)}var A;this.animations_.push(mt),this.setHint(k.Z.ANIMATING,1),this.updateAnimations_()}getAnimating(){return this.hints_[k.Z.ANIMATING]>0}getInteracting(){return this.hints_[k.Z.INTERACTING]>0}cancelAnimations(){let P;this.setHint(k.Z.ANIMATING,-this.hints_[k.Z.ANIMATING]);for(let R=0,N=this.animations_.length;R<N;++R){const Q=this.animations_[R];if(Q[0].callback&&K(Q[0].callback,!1),!P)for(let et=0,H=Q.length;et<H;++et){const ot=Q[et];if(!ot.complete){P=ot.anchor;break}}}this.animations_.length=0,this.cancelAnchor_=P,this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN}updateAnimations_(){if(void 0!==this.updateAnimationKey_&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),!this.getAnimating())return;const P=Date.now();let R=!1;for(let N=this.animations_.length-1;N>=0;--N){const Q=this.animations_[N];let et=!0;for(let H=0,ot=Q.length;H<ot;++H){const ht=Q[H];if(ht.complete)continue;let xt=ht.duration>0?(P-ht.start)/ht.duration:1;xt>=1?(ht.complete=!0,xt=1):et=!1;const Rt=ht.easing(xt);if(ht.sourceCenter){const at=ht.sourceCenter[0],pt=ht.sourceCenter[1],Mt=ht.targetCenter[0],Ft=ht.targetCenter[1];this.nextCenter_=ht.targetCenter,this.targetCenter_=[at+Rt*(Mt-at),pt+Rt*(Ft-pt)]}if(ht.sourceResolution&&ht.targetResolution){const at=1===Rt?ht.targetResolution:ht.sourceResolution+Rt*(ht.targetResolution-ht.sourceResolution);if(ht.anchor){const pt=this.getViewportSize_(this.getRotation()),Mt=this.constraints_.resolution(at,0,pt,!0);this.targetCenter_=this.calculateCenterZoom(Mt,ht.anchor)}this.nextResolution_=ht.targetResolution,this.targetResolution_=at,this.applyTargetState_(!0)}if(void 0!==ht.sourceRotation&&void 0!==ht.targetRotation){const at=1===Rt?(0,y.$W)(ht.targetRotation+Math.PI,2*Math.PI)-Math.PI:ht.sourceRotation+Rt*(ht.targetRotation-ht.sourceRotation);if(ht.anchor){const pt=this.constraints_.rotation(at,!0);this.targetCenter_=this.calculateCenterRotate(pt,ht.anchor)}this.nextRotation_=ht.targetRotation,this.targetRotation_=at}if(this.applyTargetState_(!0),R=!0,!ht.complete)break}if(et){this.animations_[N]=null,this.setHint(k.Z.ANIMATING,-1),this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN;const H=Q[0].callback;H&&K(H,!0)}}this.animations_=this.animations_.filter(Boolean),R&&void 0===this.updateAnimationKey_&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)))}calculateCenterRotate(P,R){let N;const Q=this.getCenterInternal();return void 0!==Q&&(N=[Q[0]-R[0],Q[1]-R[1]],(0,b.U1)(N,P-this.getRotation()),(0,b.IH)(N,R)),N}calculateCenterZoom(P,R){let N;const Q=this.getCenterInternal(),et=this.getResolution();return void 0!==Q&&void 0!==et&&(N=[R[0]-P*(R[0]-Q[0])/et,R[1]-P*(R[1]-Q[1])/et]),N}getViewportSize_(P){const R=this.viewportSize_;if(P){const N=R[0],Q=R[1];return[Math.abs(N*Math.cos(P))+Math.abs(Q*Math.sin(P)),Math.abs(N*Math.sin(P))+Math.abs(Q*Math.cos(P))]}return R}setViewportSize(P){this.viewportSize_=Array.isArray(P)?P.slice():[100,100],this.getAnimating()||this.resolveConstraints(0)}getCenter(){const P=this.getCenterInternal();return P&&(0,U.lO)(P,this.getProjection())}getCenterInternal(){return this.get(J.Z.CENTER)}getConstraints(){return this.constraints_}getConstrainResolution(){return this.get("constrainResolution")}getHints(P){return void 0!==P?(P[0]=this.hints_[0],P[1]=this.hints_[1],P):this.hints_.slice()}calculateExtent(P){const R=this.calculateExtentInternal(P);return(0,U.Fj)(R,this.getProjection())}calculateExtentInternal(P){P=P||this.getViewportSizeMinusPadding_();const R=this.getCenterInternal();(0,T.h)(R,"The view center is not defined");const N=this.getResolution();(0,T.h)(void 0!==N,"The view resolution is not defined");const Q=this.getRotation();return(0,T.h)(void 0!==Q,"The view rotation is not defined"),(0,l.p8)(R,N,Q,P)}getMaxResolution(){return this.maxResolution_}getMinResolution(){return this.minResolution_}getMaxZoom(){return this.getZoomForResolution(this.minResolution_)}setMaxZoom(P){this.applyOptions_(this.getUpdatedOptions_({maxZoom:P}))}getMinZoom(){return this.getZoomForResolution(this.maxResolution_)}setMinZoom(P){this.applyOptions_(this.getUpdatedOptions_({minZoom:P}))}setConstrainResolution(P){this.applyOptions_(this.getUpdatedOptions_({constrainResolution:P}))}getProjection(){return this.projection_}getResolution(){return this.get(J.Z.RESOLUTION)}getResolutions(){return this.resolutions_}getResolutionForExtent(P,R){return this.getResolutionForExtentInternal((0,U.dY)(P,this.getProjection()),R)}getResolutionForExtentInternal(P,R){R=R||this.getViewportSizeMinusPadding_();const N=(0,l.dz)(P)/R[0],Q=(0,l.Cr)(P)/R[1];return Math.max(N,Q)}getResolutionForValueFunction(P){P=P||2;const R=this.getConstrainedResolution(this.maxResolution_),Q=Math.log(R/this.minResolution_)/Math.log(P);return function(et){return R/Math.pow(P,et*Q)}}getRotation(){return this.get(J.Z.ROTATION)}getValueForResolutionFunction(P){const R=Math.log(P||2),N=this.getConstrainedResolution(this.maxResolution_),et=Math.log(N/this.minResolution_)/R;return function(H){return Math.log(N/H)/R/et}}getViewportSizeMinusPadding_(P){let R=this.getViewportSize_(P);const N=this.padding_;return N&&(R=[R[0]-N[1]-N[3],R[1]-N[0]-N[2]]),R}getState(){const P=this.getProjection(),R=this.getResolution(),N=this.getRotation();let Q=this.getCenterInternal();const et=this.padding_;if(et){const H=this.getViewportSizeMinusPadding_();Q=C(Q,this.getViewportSize_(),[H[0]/2+et[3],H[1]/2+et[0]],R,N)}return{center:Q.slice(0),projection:void 0!==P?P:null,resolution:R,nextCenter:this.nextCenter_,nextResolution:this.nextResolution_,nextRotation:this.nextRotation_,rotation:N,zoom:this.getZoom()}}getViewStateAndExtent(){return{viewState:this.getState(),extent:this.calculateExtent()}}getZoom(){let P;const R=this.getResolution();return void 0!==R&&(P=this.getZoomForResolution(R)),P}getZoomForResolution(P){let N,Q,R=this.minZoom_||0;if(this.resolutions_){const et=(0,n.h7)(this.resolutions_,P,1);R=et,N=this.resolutions_[et],Q=et==this.resolutions_.length-1?2:N/this.resolutions_[et+1]}else N=this.maxResolution_,Q=this.zoomFactor_;return R+Math.log(N/P)/Math.log(Q)}getResolutionForZoom(P){if(this.resolutions_){if(this.resolutions_.length<=1)return 0;const R=(0,y.uZ)(Math.floor(P),0,this.resolutions_.length-2);return this.resolutions_[R]/Math.pow(this.resolutions_[R]/this.resolutions_[R+1],(0,y.uZ)(P-R,0,1))}return this.maxResolution_/Math.pow(this.zoomFactor_,P-this.minZoom_)}fit(P,R){let N;if((0,T.h)(Array.isArray(P)||"function"==typeof P.getSimplifiedGeometry,"Invalid extent or geometry provided as `geometry`"),Array.isArray(P)){(0,T.h)(!(0,l.xb)(P),"Cannot fit empty extent provided as `geometry`");const Q=(0,U.dY)(P,this.getProjection());N=(0,E.oJ)(Q)}else if("Circle"===P.getType()){const Q=(0,U.dY)(P.getExtent(),this.getProjection());N=(0,E.oJ)(Q),N.rotate(this.getRotation(),(0,l.qg)(Q))}else{const Q=(0,U.Cs)();N=Q?P.clone().transform(Q,this.getProjection()):P}this.fitInternal(N,R)}rotatedExtentForGeometry(P){const R=this.getRotation(),N=Math.cos(R),Q=Math.sin(-R),et=P.getFlatCoordinates(),H=P.getStride();let ot=1/0,ht=1/0,mt=-1/0,xt=-1/0;for(let Rt=0,at=et.length;Rt<at;Rt+=H){const pt=et[Rt]*N-et[Rt+1]*Q,Mt=et[Rt]*Q+et[Rt+1]*N;ot=Math.min(ot,pt),ht=Math.min(ht,Mt),mt=Math.max(mt,pt),xt=Math.max(xt,Mt)}return[ot,ht,mt,xt]}fitInternal(P,R){let N=(R=R||{}).size;N||(N=this.getViewportSizeMinusPadding_());const Q=void 0!==R.padding?R.padding:[0,0,0,0],et=void 0!==R.nearest&&R.nearest;let H;H=void 0!==R.minResolution?R.minResolution:void 0!==R.maxZoom?this.getResolutionForZoom(R.maxZoom):0;const ot=this.rotatedExtentForGeometry(P);let ht=this.getResolutionForExtentInternal(ot,[N[0]-Q[1]-Q[3],N[1]-Q[0]-Q[2]]);ht=isNaN(ht)?H:Math.max(ht,H),ht=this.getConstrainedResolution(ht,et?0:1);const mt=this.getRotation(),xt=Math.sin(mt),Rt=Math.cos(mt),at=(0,l.qg)(ot);at[0]+=(Q[1]-Q[3])/2*ht,at[1]+=(Q[0]-Q[2])/2*ht;const Ft=this.getConstrainedCenter([at[0]*Rt-at[1]*xt,at[1]*Rt+at[0]*xt],ht),Dt=R.callback?R.callback:S.Zn;void 0!==R.duration?this.animateInternal({resolution:ht,center:Ft,duration:R.duration,easing:R.easing},Dt):(this.targetResolution_=ht,this.targetCenter_=Ft,this.applyTargetState_(!1,!0),K(Dt,!0))}centerOn(P,R,N){this.centerOnInternal((0,U.Vs)(P,this.getProjection()),R,N)}centerOnInternal(P,R,N){this.setCenterInternal(C(P,R,N,this.getResolution(),this.getRotation()))}calculateCenterShift(P,R,N,Q){let et;const H=this.padding_;if(H&&P){const ot=this.getViewportSizeMinusPadding_(-N),ht=C(P,Q,[ot[0]/2+H[3],ot[1]/2+H[0]],R,N);et=[P[0]-ht[0],P[1]-ht[1]]}return et}isDef(){return!!this.getCenterInternal()&&void 0!==this.getResolution()}adjustCenter(P){const R=(0,U.lO)(this.targetCenter_,this.getProjection());this.setCenter([R[0]+P[0],R[1]+P[1]])}adjustCenterInternal(P){const R=this.targetCenter_;this.setCenterInternal([R[0]+P[0],R[1]+P[1]])}adjustResolution(P,R){R=R&&(0,U.Vs)(R,this.getProjection()),this.adjustResolutionInternal(P,R)}adjustResolutionInternal(P,R){const N=this.getAnimating()||this.getInteracting(),Q=this.getViewportSize_(this.getRotation()),et=this.constraints_.resolution(this.targetResolution_*P,0,Q,N);R&&(this.targetCenter_=this.calculateCenterZoom(et,R)),this.targetResolution_*=P,this.applyTargetState_()}adjustZoom(P,R){this.adjustResolution(Math.pow(this.zoomFactor_,-P),R)}adjustRotation(P,R){R&&(R=(0,U.Vs)(R,this.getProjection())),this.adjustRotationInternal(P,R)}adjustRotationInternal(P,R){const N=this.getAnimating()||this.getInteracting(),Q=this.constraints_.rotation(this.targetRotation_+P,N);R&&(this.targetCenter_=this.calculateCenterRotate(Q,R)),this.targetRotation_+=P,this.applyTargetState_()}setCenter(P){this.setCenterInternal(P&&(0,U.Vs)(P,this.getProjection()))}setCenterInternal(P){this.targetCenter_=P,this.applyTargetState_()}setHint(P,R){return this.hints_[P]+=R,this.changed(),this.hints_[P]}setResolution(P){this.targetResolution_=P,this.applyTargetState_()}setRotation(P){this.targetRotation_=P,this.applyTargetState_()}setZoom(P){this.setResolution(this.getResolutionForZoom(P))}applyTargetState_(P,R){const N=this.getAnimating()||this.getInteracting()||R,Q=this.constraints_.rotation(this.targetRotation_,N),et=this.getViewportSize_(Q),H=this.constraints_.resolution(this.targetResolution_,0,et,N),ot=this.constraints_.center(this.targetCenter_,H,et,N,this.calculateCenterShift(this.targetCenter_,H,Q,et));this.get(J.Z.ROTATION)!==Q&&this.set(J.Z.ROTATION,Q),this.get(J.Z.RESOLUTION)!==H&&(this.set(J.Z.RESOLUTION,H),this.set("zoom",this.getZoom(),!0)),(!ot||!this.get(J.Z.CENTER)||!(0,b.fS)(this.get(J.Z.CENTER),ot))&&this.set(J.Z.CENTER,ot),this.getAnimating()&&!P&&this.cancelAnimations(),this.cancelAnchor_=void 0}resolveConstraints(P,R,N){P=void 0!==P?P:200;const Q=R||0,et=this.constraints_.rotation(this.targetRotation_),H=this.getViewportSize_(et),ot=this.constraints_.resolution(this.targetResolution_,Q,H),ht=this.constraints_.center(this.targetCenter_,ot,H,!1,this.calculateCenterShift(this.targetCenter_,ot,et,H));if(0===P&&!this.cancelAnchor_)return this.targetResolution_=ot,this.targetRotation_=et,this.targetCenter_=ht,void this.applyTargetState_();N=N||(0===P?this.cancelAnchor_:void 0),this.cancelAnchor_=void 0,(this.getResolution()!==ot||this.getRotation()!==et||!this.getCenterInternal()||!(0,b.fS)(this.getCenterInternal(),ht))&&(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:et,center:ht,resolution:ot,duration:P,easing:p.Vv,anchor:N}))}beginInteraction(){this.resolveConstraints(0),this.setHint(k.Z.INTERACTING,1)}endInteraction(P,R,N){N=N&&(0,U.Vs)(N,this.getProjection()),this.endInteractionInternal(P,R,N)}endInteractionInternal(P,R,N){this.getInteracting()&&(this.setHint(k.Z.INTERACTING,-1),this.resolveConstraints(P,R,N))}getConstrainedCenter(P,R){const N=this.getViewportSize_(this.getRotation());return this.constraints_.center(P,R||this.getResolution(),N)}getConstrainedZoom(P,R){const N=this.getResolutionForZoom(P);return this.getZoomForResolution(this.getConstrainedResolution(N,R))}getConstrainedResolution(P,R){R=R||0;const N=this.getViewportSize_(this.getRotation());return this.constraints_.resolution(P,R,N)}}},1880:(jt,ut,o)=>{"use strict";o.d(ut,{Z:()=>V});const V={ANIMATING:0,INTERACTING:1}},7194:(jt,ut,o)=>{"use strict";o.d(ut,{Z:()=>V});const V={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"}},5959:(jt,ut,o)=>{"use strict";function V(d,l,n){let h,s;n=n||k;let f=0,g=d.length,a=!1;for(;f<g;)h=f+(g-f>>1),s=+n(d[h],l),s<0?f=h+1:(g=h,a=!s);return a?f:~f}function k(d,l){return d>l?1:d<l?-1:0}function $(d,l,n){if(d[0]<=l)return 0;const h=d.length;if(l<=d[h-1])return h-1;if("function"==typeof n){for(let s=1;s<h;++s){const f=d[s];if(f===l)return s;if(f<l)return n(l,d[s-1],f)>0?s-1:s}return h-1}if(n>0){for(let s=1;s<h;++s)if(d[s]<l)return s-1;return h-1}if(n<0){for(let s=1;s<h;++s)if(d[s]<=l)return s;return h-1}for(let s=1;s<h;++s){if(d[s]==l)return s;if(d[s]<l)return d[s-1]-l<l-d[s]?s-1:s}return h-1}function U(d,l,n){for(;l<n;){const h=d[l];d[l]=d[n],d[n]=h,++l,--n}}function S(d,l){const n=Array.isArray(l)?l:[l],h=n.length;for(let s=0;s<h;s++)d[d.length]=n[s]}function T(d,l){const n=d.length;if(n!==l.length)return!1;for(let h=0;h<n;h++)if(d[h]!==l[h])return!1;return!0}function m(d,l,n){const h=l||k;return d.every(function(s,f){if(0===f)return!0;const g=h(d[f-1],s);return!(g>0||n&&0===g)})}o.d(ut,{FZ:()=>U,fS:()=>T,h7:()=>$,j2:()=>k,l7:()=>S,pT:()=>m,ry:()=>V})},9418:(jt,ut,o)=>{"use strict";function V(k,J){if(!k)throw new Error(J)}o.d(ut,{h:()=>V})},9432:(jt,ut,o)=>{"use strict";o.d(ut,{_2:()=>F,XC:()=>h,mL:()=>E,e1:()=>O,TF:()=>p,Fv:()=>w,WV:()=>I,BB:()=>K,fG:()=>a});const V={name:"rgb",min:[0,0,0],max:[255,255,255],channel:["red","green","blue"],alias:["RGB"]};var k={name:"xyz",min:[0,0,0],channel:["X","Y","Z"],alias:["XYZ","ciexyz","cie1931"],whitepoint:{2:{A:[109.85,100,35.585],C:[98.074,100,118.232],D50:[96.422,100,82.521],D55:[95.682,100,92.149],D65:[95.045592705167,100,108.9057750759878],D75:[94.972,100,122.638],F2:[99.187,100,67.395],F7:[95.044,100,108.755],F11:[100.966,100,64.37],E:[100,100,100]},10:{A:[111.144,100,35.2],C:[97.285,100,116.145],D50:[96.72,100,81.427],D55:[95.799,100,90.926],D65:[94.811,100,107.304],D75:[94.416,100,120.641],F2:[103.28,100,69.026],F7:[95.792,100,107.687],F11:[103.866,100,65.627],E:[100,100,100]}}};k.max=k.whitepoint[2].D65,k.rgb=function(M,B){var A,P,R,Y=M[0]/(B=B||k.whitepoint[2].E)[0],C=M[1]/B[1],L=M[2]/B[2];return P=-.96924363628087*Y+1.87596750150772*C+.041555057407175*L,R=.055630079696993*Y+-.20397695888897*C+1.056971514242878*L,A=(A=3.240969941904521*Y+-1.537383177570093*C+-.498610760293*L)>.0031308?1.055*Math.pow(A,1/2.4)-.055:A*=12.92,P=P>.0031308?1.055*Math.pow(P,1/2.4)-.055:P*=12.92,R=R>.0031308?1.055*Math.pow(R,1/2.4)-.055:R*=12.92,[255*(A=Math.min(Math.max(0,A),1)),255*(P=Math.min(Math.max(0,P),1)),255*(R=Math.min(Math.max(0,R),1))]},V.xyz=function(M,B){var Y=M[0]/255,C=M[1]/255,L=M[2]/255;return[(.41239079926595*(Y=Y>.04045?Math.pow((Y+.055)/1.055,2.4):Y/12.92)+.35758433938387*(C=C>.04045?Math.pow((C+.055)/1.055,2.4):C/12.92)+.18048078840183*(L=L>.04045?Math.pow((L+.055)/1.055,2.4):L/12.92))*(B=B||k.whitepoint[2].E)[0],(.21263900587151*Y+.71516867876775*C+.072192315360733*L)*B[1],(.019330818715591*Y+.11919477979462*C+.95053215224966*L)*B[2]]};const J=k,$={name:"luv",min:[0,-134,-140],max:[100,224,122],channel:["lightness","u","v"],alias:["LUV","cieluv","cie1976"],xyz:function(M,B,Y){var C,L,A,Q,H,ot,ht;return 0===(A=M[0])?[0,0,0]:(C=M[1]/(13*A)+4*(H=J.whitepoint[Y=Y||2][B=B||"D65"][0])/(H+15*(ot=J.whitepoint[Y][B][1])+3*(ht=J.whitepoint[Y][B][2]))||0,L=M[2]/(13*A)+9*ot/(H+15*ot+3*ht)||0,[9*(Q=A>8?ot*Math.pow((A+16)/116,3):ot*A*.0011070564598794539)*C/(4*L)||0,Q,Q*(12-3*C-20*L)/(4*L)||0])}};J.luv=function(M,B,Y){var C,L,A,N,Q,et,H,ot,ht,mt,xt;mt=4*(H=J.whitepoint[Y=Y||2][B=B||"D65"][0])/(H+15*(ot=J.whitepoint[Y][B][1])+3*(ht=J.whitepoint[Y][B][2])),xt=9*ot/(H+15*ot+3*ht),C=4*(N=M[0])/(N+15*(Q=M[1])+3*(et=M[2]))||0,L=9*Q/(N+15*Q+3*et)||0;var pt=Q/ot;return[A=pt<=.008856451679035631?903.2962962962961*pt:116*Math.pow(pt,1/3)-16,13*A*(C-mt),13*A*(L-xt)]};var U={name:"lchuv",channel:["lightness","chroma","hue"],alias:["LCHuv","cielchuv"],min:[0,0,0],max:[100,100,360],luv:function(M){var P,Y=M[1];return P=M[2]/360*2*Math.PI,[M[0],Y*Math.cos(P),Y*Math.sin(P)]},xyz:function(M){return $.xyz(U.luv(M))}};const S=U;$.lchuv=function(M){var B=M[0],Y=M[1],C=M[2],L=Math.sqrt(Y*Y+C*C),P=360*Math.atan2(C,Y)/2/Math.PI;return P<0&&(P+=360),[B,L,P]},J.lchuv=function(M){return $.lchuv(J.luv(M))};const b={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},T=function m(M){var B,L,Y=[],C=1;if("number"==typeof M)return{space:"rgb",values:[M>>>16,(65280&M)>>>8,255&M],alpha:1};if("number"==typeof M)return{space:"rgb",values:[M>>>16,(65280&M)>>>8,255&M],alpha:1};if(M=String(M).toLowerCase(),b[M])Y=b[M].slice(),L="rgb";else if("transparent"===M)C=0,L="rgb",Y=[0,0,0];else if("#"===M[0]){var A=M.slice(1),P=A.length;C=1,P<=4?(Y=[parseInt(A[0]+A[0],16),parseInt(A[1]+A[1],16),parseInt(A[2]+A[2],16)],4===P&&(C=parseInt(A[3]+A[3],16)/255)):(Y=[parseInt(A[0]+A[1],16),parseInt(A[2]+A[3],16),parseInt(A[4]+A[5],16)],8===P&&(C=parseInt(A[6]+A[7],16)/255)),Y[0]||(Y[0]=0),Y[1]||(Y[1]=0),Y[2]||(Y[2]=0),L="rgb"}else if(B=/^((?:rgba?|hs[lvb]a?|hwba?|cmyk?|xy[zy]|gray|lab|lchu?v?|[ly]uv|lms|oklch|oklab|color))\s*\(([^\)]*)\)/.exec(M)){var Q="cmyk"===(L=B[1].replace(/a$/,""))?4:"gray"===L?1:3;Y=B[2].trim().split(/\s*[,\/]\s*|\s+/),"color"===L&&(L=Y.shift()),C=(Y=Y.map(function(et,H){if("%"===et[et.length-1])return et=parseFloat(et)/100,3===H?et:"rgb"===L?255*et:"h"===L[0]||"l"===L[0]&&!H?100*et:"lab"===L?125*et:"lch"===L?H<2?150*et:360*et:"o"!==L[0]||H?"oklab"===L?.4*et:"oklch"===L?H<2?.4*et:360*et:et:et;if("h"===L[H]||2===H&&"h"===L[L.length-1]){if(void 0!==y[et])return y[et];if(et.endsWith("deg"))return parseFloat(et);if(et.endsWith("turn"))return 360*parseFloat(et);if(et.endsWith("grad"))return 360*parseFloat(et)/400;if(et.endsWith("rad"))return 180*parseFloat(et)/Math.PI}return"none"===et?0:parseFloat(et)})).length>Q?Y.pop():1}else/[0-9](?:\s|\/|,)/.test(M)&&(Y=M.match(/([0-9]+)/g).map(function(et){return parseFloat(et)}),L=M.match(/([a-z])/gi)?.join("")?.toLowerCase()||"rgb");return{space:L,values:Y,alpha:C}};var y={red:0,orange:60,yellow:120,green:180,blue:240,purple:300};const d={name:"hsl",min:[0,0,0],max:[360,100,100],channel:["hue","saturation","lightness"],alias:["HSL"],rgb:function(M){var L,A,P,R,N,B=M[0]/360,Y=M[1]/100,C=M[2]/100,Q=0;if(0===Y)return[N=255*C,N,N];for(L=2*C-(A=C<.5?C*(1+Y):C+Y-C*Y),R=[0,0,0];Q<3;)(P=B+1/3*-(Q-1))<0?P++:P>1&&P--,R[Q++]=255*(N=6*P<1?L+6*(A-L)*P:2*P<1?A:3*P<2?L+(A-L)*(2/3-P)*6:L);return R}};V.hsl=function(M){var R,Q,B=M[0]/255,Y=M[1]/255,C=M[2]/255,L=Math.min(B,Y,C),A=Math.max(B,Y,C),P=A-L;return A===L?R=0:B===A?R=(Y-C)/P:Y===A?R=2+(C-B)/P:C===A&&(R=4+(B-Y)/P),(R=Math.min(60*R,360))<0&&(R+=360),Q=(L+A)/2,[R,100*(A===L?0:Q<=.5?P/(A+L):P/(2-A-L)),100*Q]};var n=o(6868);function h(M){return"string"==typeof M?M:K(M)}const s=1024,f={};let g=0;function a(M){if(4===M.length)return M;const B=M.slice();return B[3]=1,B}function I(M){const B=J.lchuv(V.xyz(M));return B[3]=M[3],B}function p(M){const B=J.rgb(S.xyz(M));return B[3]=M[3],B}function E(M){if(f.hasOwnProperty(M))return f[M];if(g>=s){let Y=0;for(const C in f)3&Y++||(delete f[C],--g)}const B=function l(M){Array.isArray(M)&&M.raw&&(M=String.raw(...arguments)),M instanceof Number&&(M=+M);var B,L=T(M);if(!L.space)return[];const A="h"===L.space[0]?d.min:V.min,P="h"===L.space[0]?d.max:V.max;return(B=Array(3))[0]=Math.min(Math.max(L.values[0],A[0]),P[0]),B[1]=Math.min(Math.max(L.values[1],A[1]),P[1]),B[2]=Math.min(Math.max(L.values[2],A[2]),P[2]),"h"===L.space[0]&&(B=d.rgb(B)),B.push(Math.min(Math.max(L.alpha,0),1)),B}(M);if(4!==B.length)throw new Error('Failed to parse "'+M+'" as color');for(const Y of B)if(isNaN(Y))throw new Error('Failed to parse "'+M+'" as color');return w(B),f[M]=B,++g,B}function F(M){return Array.isArray(M)?M:E(M)}function w(M){return M[0]=(0,n.uZ)(M[0]+.5|0,0,255),M[1]=(0,n.uZ)(M[1]+.5|0,0,255),M[2]=(0,n.uZ)(M[2]+.5|0,0,255),M[3]=(0,n.uZ)(M[3],0,1),M}function K(M){let B=M[0];B!=(0|B)&&(B=B+.5|0);let Y=M[1];Y!=(0|Y)&&(Y=Y+.5|0);let C=M[2];return C!=(0|C)&&(C=C+.5|0),"rgba("+B+","+Y+","+C+","+(void 0===M[3]?1:Math.round(1e3*M[3])/1e3)+")"}function O(M){try{return E(M),!0}catch{return!1}}},9490:(jt,ut,o)=>{"use strict";o.d(ut,{y:()=>S});var V=o(6343),k=o(4591),J=o(9823),$=o(4410),U=o(9432);function S(T){return T?Array.isArray(T)?(0,U.BB)(T):"object"==typeof T&&"src"in T?function b(T){if(!T.offset||!T.size)return $.c1.getPattern(T.src,"anonymous",T.color);const y=T.src+":"+T.offset,m=$.c1.getPattern(y,void 0,T.color);if(m)return m;const d=$.c1.get(T.src,"anonymous",null);if(d.getImageState()!==V.Z.LOADED)return null;const l=(0,k.E4)(T.size[0],T.size[1]);return l.drawImage(d.getImage(1),T.offset[0],T.offset[1],T.size[0],T.size[1],0,0,T.size[0],T.size[1]),(0,J.U)(l.canvas,y,void 0,V.Z.LOADED,T.color,!0),$.c1.getPattern(y,void 0,T.color)}(T):T:null}},4345:(jt,ut,o)=>{"use strict";o.d(ut,{ZK:()=>U});const V={info:1,warn:2,error:3,none:4};let k=V.info;function U(...b){k>V.warn||console.warn(...b)}},5884:(jt,ut,o)=>{"use strict";o.d(ut,{Z:()=>y});var V=o(1921),k=o(627),J=o(4855),$=o(2349),U=o(5959),S=o(4591),b=o(5173);const y=class T extends k.Z{constructor(d){d=d||{},super({element:document.createElement("div"),render:d.render,target:d.target}),this.ulElement_=document.createElement("ul"),this.collapsed_=void 0===d.collapsed||d.collapsed,this.userCollapsed_=this.collapsed_,this.overrideCollapsible_=void 0!==d.collapsible,this.collapsible_=void 0===d.collapsible||d.collapsible,this.collapsible_||(this.collapsed_=!1);const l=void 0!==d.className?d.className:"ol-attribution",n=void 0!==d.tipLabel?d.tipLabel:"Attributions",h=void 0!==d.expandClassName?d.expandClassName:l+"-expand",s=void 0!==d.collapseLabel?d.collapseLabel:"\u203a",f=void 0!==d.collapseClassName?d.collapseClassName:l+"-collapse";"string"==typeof s?(this.collapseLabel_=document.createElement("span"),this.collapseLabel_.textContent=s,this.collapseLabel_.className=f):this.collapseLabel_=s;const g=void 0!==d.label?d.label:"i";"string"==typeof g?(this.label_=document.createElement("span"),this.label_.textContent=g,this.label_.className=h):this.label_=g;const a=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_;this.toggleButton_=document.createElement("button"),this.toggleButton_.setAttribute("type","button"),this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_)),this.toggleButton_.title=n,this.toggleButton_.appendChild(a),this.toggleButton_.addEventListener(J.Z.CLICK,this.handleClick_.bind(this),!1);const p=this.element;p.className=l+" "+$.XV+" "+$.hg+(this.collapsed_&&this.collapsible_?" "+$.hN:"")+(this.collapsible_?"":" ol-uncollapsible"),p.appendChild(this.toggleButton_),p.appendChild(this.ulElement_),this.renderedAttributions_=[],this.renderedVisible_=!0}collectSourceAttributions_(d){const l=Array.from(new Set(this.getMap().getAllLayers().flatMap(h=>h.getAttributions(d)))),n=!this.getMap().getAllLayers().some(h=>h.getSource()&&!1===h.getSource().getAttributionsCollapsible());return this.overrideCollapsible_||this.setCollapsible(n),l}updateElement_(d){var l=this;return(0,V.Z)(function*(){if(!d)return void(l.renderedVisible_&&(l.element.style.display="none",l.renderedVisible_=!1));const n=yield Promise.all(l.collectSourceAttributions_(d).map(s=>(0,b.Vi)(()=>s))),h=n.length>0;if(l.renderedVisible_!=h&&(l.element.style.display=h?"":"none",l.renderedVisible_=h),!(0,U.fS)(n,l.renderedAttributions_)){(0,S.ep)(l.ulElement_);for(let s=0,f=n.length;s<f;++s){const g=document.createElement("li");g.innerHTML=n[s],l.ulElement_.appendChild(g)}l.renderedAttributions_=n}})()}handleClick_(d){d.preventDefault(),this.handleToggle_(),this.userCollapsed_=this.collapsed_}handleToggle_(){this.element.classList.toggle($.hN),this.collapsed_?(0,S.$H)(this.collapseLabel_,this.label_):(0,S.$H)(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_,this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_))}getCollapsible(){return this.collapsible_}setCollapsible(d){this.collapsible_!==d&&(this.collapsible_=d,this.element.classList.toggle("ol-uncollapsible"),this.userCollapsed_&&this.handleToggle_())}setCollapsed(d){this.userCollapsed_=d,this.collapsible_&&this.collapsed_!==d&&this.handleToggle_()}getCollapsed(){return this.collapsed_}render(d){this.updateElement_(d.frameState)}}},627:(jt,ut,o)=>{"use strict";o.d(ut,{Z:()=>b});var V=o(7438),k=o(6070),J=o(5173),$=o(3583),U=o(4591);const b=class S extends V.Z{constructor(y){super();const m=y.element;m&&!y.target&&!m.style.pointerEvents&&(m.style.pointerEvents="auto"),this.element=m||null,this.target_=null,this.map_=null,this.listenerKeys=[],y.render&&(this.render=y.render),y.target&&this.setTarget(y.target)}disposeInternal(){(0,U.ZF)(this.element),super.disposeInternal()}getMap(){return this.map_}setMap(y){this.map_&&(0,U.ZF)(this.element);for(let m=0,d=this.listenerKeys.length;m<d;++m)(0,$.bN)(this.listenerKeys[m]);this.listenerKeys.length=0,this.map_=y,y&&((this.target_?this.target_:y.getOverlayContainerStopEvent()).appendChild(this.element),this.render!==J.Zn&&this.listenerKeys.push((0,$.oL)(y,k.Z.POSTRENDER,this.render,this)),y.render())}render(y){}setTarget(y){this.target_="string"==typeof y?document.getElementById(y):y}}},5331:(jt,ut,o)=>{"use strict";o.d(ut,{Z:()=>S});var V=o(627),k=o(4855),J=o(2349),$=o(9644);const S=class U extends V.Z{constructor(T){T=T||{},super({element:document.createElement("div"),render:T.render,target:T.target});const y=void 0!==T.className?T.className:"ol-rotate",m=void 0!==T.label?T.label:"\u21e7",d=void 0!==T.compassClassName?T.compassClassName:"ol-compass";this.label_=null,"string"==typeof m?(this.label_=document.createElement("span"),this.label_.className=d,this.label_.textContent=m):(this.label_=m,this.label_.classList.add(d));const l=T.tipLabel?T.tipLabel:"Reset rotation",n=document.createElement("button");n.className=y+"-reset",n.setAttribute("type","button"),n.title=l,n.appendChild(this.label_),n.addEventListener(k.Z.CLICK,this.handleClick_.bind(this),!1);const s=this.element;s.className=y+" "+J.XV+" "+J.hg,s.appendChild(n),this.callResetNorth_=T.resetNorth?T.resetNorth:void 0,this.duration_=void 0!==T.duration?T.duration:250,this.autoHide_=void 0===T.autoHide||T.autoHide,this.rotation_=void 0,this.autoHide_&&this.element.classList.add(J.oj)}handleClick_(T){T.preventDefault(),void 0!==this.callResetNorth_?this.callResetNorth_():this.resetNorth_()}resetNorth_(){const y=this.getMap().getView();if(!y)return;const m=y.getRotation();void 0!==m&&(this.duration_>0&&m%(2*Math.PI)!=0?y.animate({rotation:0,duration:this.duration_,easing:$.Vv}):y.setRotation(0))}render(T){const y=T.frameState;if(!y)return;const m=y.viewState.rotation;if(m!=this.rotation_){const d="rotate("+m+"rad)";if(this.autoHide_){const l=this.element.classList.contains(J.oj);l||0!==m?l&&0!==m&&this.element.classList.remove(J.oj):this.element.classList.add(J.oj)}this.label_.style.transform=d}this.rotation_=m}}},4829:(jt,ut,o)=>{"use strict";o.d(ut,{Z:()=>S});var V=o(627),k=o(4855),J=o(2349),$=o(9644);const S=class U extends V.Z{constructor(T){T=T||{},super({element:document.createElement("div"),target:T.target});const y=void 0!==T.className?T.className:"ol-zoom",m=void 0!==T.delta?T.delta:1,d=void 0!==T.zoomInClassName?T.zoomInClassName:y+"-in",l=void 0!==T.zoomOutClassName?T.zoomOutClassName:y+"-out",n=void 0!==T.zoomInLabel?T.zoomInLabel:"+",h=void 0!==T.zoomOutLabel?T.zoomOutLabel:"\u2013",s=void 0!==T.zoomInTipLabel?T.zoomInTipLabel:"Zoom in",f=void 0!==T.zoomOutTipLabel?T.zoomOutTipLabel:"Zoom out",g=document.createElement("button");g.className=d,g.setAttribute("type","button"),g.title=s,g.appendChild("string"==typeof n?document.createTextNode(n):n),g.addEventListener(k.Z.CLICK,this.handleClick_.bind(this,m),!1);const a=document.createElement("button");a.className=l,a.setAttribute("type","button"),a.title=f,a.appendChild("string"==typeof h?document.createTextNode(h):h),a.addEventListener(k.Z.CLICK,this.handleClick_.bind(this,-m),!1);const p=this.element;p.className=y+" "+J.XV+" "+J.hg,p.appendChild(g),p.appendChild(a),this.duration_=void 0!==T.duration?T.duration:250}handleClick_(T,y){y.preventDefault(),this.zoomByDelta_(T)}zoomByDelta_(T){const m=this.getMap().getView();if(!m)return;const d=m.getZoom();if(void 0!==d){const l=m.getConstrainedZoom(d+T);this.duration_>0?(m.getAnimating()&&m.cancelAnimations(),m.animate({zoom:l,duration:this.duration_,easing:$.Vv})):m.setZoom(l)}}}},63:(jt,ut,o)=>{"use strict";o.d(ut,{Cf:()=>a,I8:()=>T,IH:()=>$,U1:()=>d,bA:()=>l,fS:()=>m,jk:()=>I,yZ:()=>g});var V=o(77),k=o(6868),J=o(5589);function $(p,E){return p[0]+=+E[0],p[1]+=+E[1],p}function T(p,E,F){const w=(0,k.$W)(E+180,360)-180,K=Math.abs(3600*w),O=F||0;let M=Math.floor(K/3600),B=Math.floor((K-3600*M)/60),Y=(0,k.FH)(K-3600*M-60*B,O);Y>=60&&(Y=0,B+=1),B>=60&&(B=0,M+=1);let C=M+"\xb0";return(0!==B||0!==Y)&&(C+=" "+(0,J.v)(B,2)+"\u2032"),0!==Y&&(C+=" "+(0,J.v)(Y,2,O)+"\u2033"),0!==w&&(C+=" "+p.charAt(w<0?1:0)),C}function m(p,E){let F=!0;for(let w=p.length-1;w>=0;--w)if(p[w]!=E[w]){F=!1;break}return F}function d(p,E){const F=Math.cos(E),w=Math.sin(E),O=p[1]*F+p[0]*w;return p[0]=p[0]*F-p[1]*w,p[1]=O,p}function l(p,E){return p[0]*=E,p[1]*=E,p}function g(p,E){return function y(p,E,F){return p?E.replace("{x}",p[0].toFixed(F)).replace("{y}",p[1].toFixed(F)):""}(p,"{x}, {y}",E)}function a(p,E){if(E.canWrapX()){const F=(0,V.dz)(E.getExtent()),w=I(p,E,F);w&&(p[0]-=w*F)}return p}function I(p,E,F){const w=E.getExtent();let K=0;return E.canWrapX()&&(p[0]<w[0]||p[0]>w[2])&&(F=F||(0,V.dz)(w),K=Math.floor((p[0]-w[0])/F)),K}},2349:(jt,ut,o)=>{"use strict";o.d(ut,{$A:()=>k,Qi:()=>$,XV:()=>J,hN:()=>S,hg:()=>U,oj:()=>V,p:()=>y});const V="ol-hidden",k="ol-selectable",J="ol-unselectable",$="ol-unsupported",U="ol-control",S="ol-collapsed",b=new RegExp(["^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)","(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?","(?:small|large)|medium|smaller|larger|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))","(?:\\s*\\/\\s*(normal|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])?))","?\\s*([-,\\\"\\'\\sa-z]+?)\\s*$"].join(""),"i"),T=["style","variant","weight","size","lineHeight","family"],y=function(m){const d=m.match(b);if(!d)return null;const l={lineHeight:"normal",size:"1.2em",style:"normal",weight:"normal",variant:"normal"};for(let n=0,h=T.length;n<h;++n){const s=d[n+1];void 0!==s&&(l[T[n]]=s)}return l.families=l.family.split(/,\s?/),l}},4591:(jt,ut,o)=>{"use strict";o.d(ut,{$H:()=>T,E4:()=>k,Pb:()=>b,W8:()=>$,ZF:()=>y,ep:()=>m,hF:()=>d,iO:()=>S,jy:()=>U});var V=o(7316);function k(l,n,h,s){let f;return f=h&&h.length?h.shift():V.Id?new OffscreenCanvas(l||300,n||300):document.createElement("canvas"),l&&(f.width=l),n&&(f.height=n),f.getContext("2d",s)}let J;function $(){return J||(J=k(1,1)),J}function U(l){const n=l.canvas;n.width=1,n.height=1,l.clearRect(0,0,1,1)}function S(l){let n=l.offsetWidth;const h=getComputedStyle(l);return n+=parseInt(h.marginLeft,10)+parseInt(h.marginRight,10),n}function b(l){let n=l.offsetHeight;const h=getComputedStyle(l);return n+=parseInt(h.marginTop,10)+parseInt(h.marginBottom,10),n}function T(l,n){const h=n.parentNode;h&&h.replaceChild(l,n)}function y(l){return l&&l.parentNode?l.parentNode.removeChild(l):null}function m(l){for(;l.lastChild;)l.removeChild(l.lastChild)}function d(l,n){const h=l.childNodes;for(let s=0;;++s){const f=h[s],g=n[s];if(!f&&!g)break;if(f!==g){if(!f){l.appendChild(g);continue}if(!g){l.removeChild(f),--s;continue}l.insertBefore(g,f)}}}},9644:(jt,ut,o)=>{"use strict";function V(S){return Math.pow(S,3)}function k(S){return 1-V(1-S)}function J(S){return 3*S*S-2*S*S*S}function $(S){return S}o.d(ut,{GE:()=>$,Vv:()=>k,YQ:()=>V,rd:()=>J})},3583:(jt,ut,o)=>{"use strict";o.d(ut,{Vx:()=>J,bN:()=>$,oL:()=>k});var V=o(5269);function k(U,S,b,T,y){if(T&&T!==U&&(b=b.bind(T)),y){const d=b;b=function(){U.removeEventListener(S,b),d.apply(this,arguments)}}const m={target:U,type:S,listener:b};return U.addEventListener(S,b),m}function J(U,S,b,T){return k(U,S,b,T,!0)}function $(U){U&&U.target&&(U.target.removeEventListener(U.type,U.listener),(0,V.Z)(U))}},7065:(jt,ut,o)=>{"use strict";o.d(ut,{ZP:()=>$});const $=class V{constructor(S){this.type=S,this.target=null}preventDefault(){this.defaultPrevented=!0}stopPropagation(){this.propagationStopped=!0}}},4855:(jt,ut,o)=>{"use strict";o.d(ut,{Z:()=>V});const V={CHANGE:"change",ERROR:"error",BLUR:"blur",CLEAR:"clear",CONTEXTMENU:"contextmenu",CLICK:"click",DBLCLICK:"dblclick",DRAGENTER:"dragenter",DRAGOVER:"dragover",DROP:"drop",FOCUS:"focus",KEYDOWN:"keydown",KEYPRESS:"keypress",LOAD:"load",RESIZE:"resize",TOUCHMOVE:"touchmove",WHEEL:"wheel"}},1877:(jt,ut,o)=>{"use strict";o.d(ut,{Z:()=>S});var V=o(9726),k=o(7065),J=o(5173),$=o(5269);const S=class U extends V.Z{constructor(T){super(),this.eventTarget_=T,this.pendingRemovals_=null,this.dispatching_=null,this.listeners_=null}addEventListener(T,y){if(!T||!y)return;const m=this.listeners_||(this.listeners_={}),d=m[T]||(m[T]=[]);d.includes(y)||d.push(y)}dispatchEvent(T){const y="string"==typeof T,m=y?T:T.type,d=this.listeners_&&this.listeners_[m];if(!d)return;const l=y?new k.ZP(T):T;l.target||(l.target=this.eventTarget_||this);const n=this.dispatching_||(this.dispatching_={}),h=this.pendingRemovals_||(this.pendingRemovals_={});let s;m in n||(n[m]=0,h[m]=0),++n[m];for(let f=0,g=d.length;f<g;++f)if(s="handleEvent"in d[f]?d[f].handleEvent(l):d[f].call(this,l),!1===s||l.propagationStopped){s=!1;break}if(0==--n[m]){let f=h[m];for(delete h[m];f--;)this.removeEventListener(m,J.Zn);delete n[m]}return s}disposeInternal(){this.listeners_&&(0,$.Z)(this.listeners_)}getListeners(T){return this.listeners_&&this.listeners_[T]||void 0}hasListener(T){return!!this.listeners_&&(T?T in this.listeners_:Object.keys(this.listeners_).length>0)}removeEventListener(T,y){if(!this.listeners_)return;const m=this.listeners_[T];if(!m)return;const d=m.indexOf(y);-1!==d&&(this.pendingRemovals_&&T in this.pendingRemovals_?(m[d]=J.Zn,++this.pendingRemovals_[T]):(m.splice(d,1),0===m.length&&delete this.listeners_[T]))}}},2994:(jt,ut,o)=>{"use strict";o.d(ut,{$6:()=>$,Bx:()=>y,QL:()=>E,TN:()=>p,Xp:()=>K,a5:()=>a,aj:()=>S,rM:()=>f,v8:()=>d,vY:()=>I,yZ:()=>T});var V=o(5173),k=o(7316),J=o(9418);function $(O){const M=arguments;return function(B){let Y=!0;for(let C=0,L=M.length;C<L&&(Y=Y&&M[C](B),Y);++C);return Y}}const S=function(O){const M=O.originalEvent;return M.altKey&&!(M.metaKey||M.ctrlKey)&&M.shiftKey},T=function(O){return!O.map.getTargetElement().hasAttribute("tabindex")||function(O){const M=O.map.getTargetElement(),B=O.map.getOwnerDocument().activeElement;return M.contains(B)}(O)},y=V.uX,d=function(O){const M=O.originalEvent;return 0==M.button&&!(k.G$&&k.tK&&M.ctrlKey)},f=function(O){const M=O.originalEvent;return!M.altKey&&!(M.metaKey||M.ctrlKey)&&!M.shiftKey},a=function(O){const M=O.originalEvent;return k.tK?M.metaKey:M.ctrlKey},I=function(O){const M=O.originalEvent;return!M.altKey&&!(M.metaKey||M.ctrlKey)&&M.shiftKey},p=function(O){const M=O.originalEvent,B=M.target.tagName;return"INPUT"!==B&&"SELECT"!==B&&"TEXTAREA"!==B&&!M.target.isContentEditable},E=function(O){const M=O.originalEvent;return(0,J.h)(void 0!==M,"mapBrowserEvent must originate from a pointer event"),"mouse"==M.pointerType},K=function(O){const M=O.originalEvent;return(0,J.h)(void 0!==M,"mapBrowserEvent must originate from a pointer event"),M.isPrimary&&0===M.button}},9071:(jt,ut,o)=>{"use strict";o.d(ut,{AP:()=>w,EM:()=>a,Lt:()=>I,Mj:()=>p,Mr:()=>T,PA:()=>y,Qc:()=>F,S9:()=>Rt,YM:()=>f,hD:()=>h,n$:()=>m,sw:()=>S,uW:()=>b,wy:()=>U});var V=o(5959),k=o(9432);let J=0;const $=0,U=1<<J++,S=1<<J++,b=1<<J++,T=1<<J++,y=1<<J++,m=1<<J++,d=Math.pow(2,6)-1,l={[U]:"boolean",[S]:"number",[b]:"string",[T]:"color",[y]:"number[]",[m]:"size"},n=Object.keys(l).map(Number).sort(V.j2);function h(at){const pt=[];for(const Mt of n)s(at,Mt)&&pt.push(l[Mt]);return 0===pt.length?"untyped":pt.length<3?pt.join(" or "):pt.slice(0,-1).join(", ")+", or "+pt[pt.length-1]}function s(at,pt){return(at&pt)===pt}function f(at,pt){return!!(at&pt)}function g(at,pt){return at===pt}class a{constructor(pt,Mt){this.type=pt,this.value=Mt}}class I{constructor(pt,Mt,...Ft){this.type=pt,this.operator=Mt,this.args=Ft}}function p(){return{variables:new Set,properties:new Set,featureId:!1,geometryType:!1,style:{}}}function F(at,pt,Mt){switch(typeof at){case"boolean":return new a(U,at);case"number":return new a(Mt===m?m:S,at);case"string":{let Dt=b;return(0,k.e1)(at)&&(Dt|=T),g(Dt&Mt,$)||(Dt&=Mt),new a(Dt,at)}}if(!Array.isArray(at))throw new Error("Expression must be an array or a primitive value");if(0===at.length)throw new Error("Empty expression");if("string"==typeof at[0])return function xt(at,pt,Mt){const Ft=at[0],Dt=K[Ft];if(!Dt)throw new Error(`Unknown operator: ${Ft}`);return Dt(at,pt,Mt)}(at,pt,Mt);for(const Dt of at)if("number"!=typeof Dt)throw new Error("Expected an array of numbers");let Ft=y;return 2===at.length?Ft|=m:(3===at.length||4===at.length)&&(Ft|=T),Mt&&(Ft&=Mt),new a(Ft,at)}const w={Get:"get",Var:"var",Concat:"concat",GeometryType:"geometry-type",Any:"any",All:"all",Not:"!",Resolution:"resolution",Zoom:"zoom",Time:"time",Equal:"==",NotEqual:"!=",GreaterThan:">",GreaterThanOrEqualTo:">=",LessThan:"<",LessThanOrEqualTo:"<=",Multiply:"*",Divide:"/",Add:"+",Subtract:"-",Clamp:"clamp",Mod:"%",Pow:"^",Abs:"abs",Floor:"floor",Ceil:"ceil",Round:"round",Sin:"sin",Cos:"cos",Atan:"atan",Sqrt:"sqrt",Match:"match",Between:"between",Interpolate:"interpolate",Coalesce:"coalesce",Case:"case",In:"in",Number:"number",String:"string",Array:"array",Color:"color",Id:"id",Band:"band",Palette:"palette",ToString:"to-string"},K={[w.Get]:mt(([at,pt])=>void 0!==pt?function E(at){switch(at){case"string":return b;case"color":return T;case"number":return S;case"boolean":return U;case"number[]":return y;default:throw new Error(`Unrecognized type hint: ${at}`)}}(pt.value):d,L(1,2),function O(at,pt){const Mt=F(at[1],pt);if(!(Mt instanceof a))throw new Error("Expected a literal argument for get operation");if("string"!=typeof Mt.value)throw new Error("Expected a string argument for get operation");return pt.properties.add(Mt.value),3===at.length?[Mt,F(at[2],pt)]:[Mt]}),[w.Var]:mt(([at])=>at.type,L(1,1),function M(at,pt,Mt,Ft){const Dt=at[1];if("string"!=typeof Dt)throw new Error("Expected a string argument for var operation");if(pt.variables.add(Dt),!("variables"in pt.style)||void 0===pt.style.variables[Dt])return[new a(d,Dt)];const Ut=F(pt.style.variables[Dt],pt);if(Ut.value=Dt,Ft&&!f(Ft,Ut.type))throw new Error(`The variable ${Dt} has type ${h(Ut.type)} but the following type was expected: ${h(Ft)}`);return[Ut]}),[w.Id]:mt(S|b,C,function B(at,pt){pt.featureId=!0}),[w.Concat]:mt(b,L(2,1/0),A(d)),[w.GeometryType]:mt(b,C,function Y(at,pt){pt.geometryType=!0}),[w.Resolution]:mt(S,C),[w.Zoom]:mt(S,C),[w.Time]:mt(S,C),[w.Any]:mt(U,L(2,1/0),A(U)),[w.All]:mt(U,L(2,1/0),A(U)),[w.Not]:mt(U,L(1,1),A(U)),[w.Equal]:mt(U,L(2,2),A(d),P),[w.NotEqual]:mt(U,L(2,2),A(d),P),[w.GreaterThan]:mt(U,L(2,2),A(d),P),[w.GreaterThanOrEqualTo]:mt(U,L(2,2),A(d),P),[w.LessThan]:mt(U,L(2,2),A(d),P),[w.LessThanOrEqualTo]:mt(U,L(2,2),A(d),P),[w.Multiply]:mt(at=>{let pt=S|T;for(let Mt=0;Mt<at.length;Mt++)pt&=at[Mt].type;return pt},L(2,1/0),A(S|T),P),[w.Coalesce]:mt(at=>{let pt=d;for(let Mt=1;Mt<at.length;Mt+=2)pt&=at[Mt].type;return pt&=at[at.length-1].type,pt},L(2,1/0),A(d),P),[w.Divide]:mt(S,L(2,2),A(S)),[w.Add]:mt(S,L(2,1/0),A(S)),[w.Subtract]:mt(S,L(2,2),A(S)),[w.Clamp]:mt(S,L(3,3),A(S)),[w.Mod]:mt(S,L(2,2),A(S)),[w.Pow]:mt(S,L(2,2),A(S)),[w.Abs]:mt(S,L(1,1),A(S)),[w.Floor]:mt(S,L(1,1),A(S)),[w.Ceil]:mt(S,L(1,1),A(S)),[w.Round]:mt(S,L(1,1),A(S)),[w.Sin]:mt(S,L(1,1),A(S)),[w.Cos]:mt(S,L(1,1),A(S)),[w.Atan]:mt(S,L(1,2),A(S)),[w.Sqrt]:mt(S,L(1,1),A(S)),[w.Match]:mt(at=>{let pt=d;for(let Mt=2;Mt<at.length;Mt+=2)pt&=at[Mt].type;return pt&=at[at.length-1].type,pt},L(4,1/0),N,function Q(at,pt,Mt,Ft){const Dt=at.length-1;let Ut=F(at[1],pt).type;const zt=F(at[at.length-1],pt);let rt=void 0!==Ft?Ft&zt.type:zt.type;const It=new Array(Dt-2);for(let Xt=0;Xt<Dt-2;Xt+=2){const Vt=F(at[Xt+2],pt),he=F(at[Xt+3],pt);Ut&=Vt.type,rt&=he.type,It[Xt]=Vt,It[Xt+1]=he}const bt=b|S|U;if(!f(bt,Ut))throw new Error(`Expected an input of type ${h(bt)} for the interpolate operation, got ${h(Ut)} instead`);if(Ut&=bt,g(rt,$))throw new Error("Could not find a common output type for the following match operation: "+JSON.stringify(at));for(let Xt=0;Xt<Dt-2;Xt+=2){const Vt=F(at[Xt+2],pt,Ut),he=F(at[Xt+3],pt,rt);It[Xt]=Vt,It[Xt+1]=he}return[F(at[1],pt,Ut),...It,F(at[at.length-1],pt,rt)]}),[w.Between]:mt(U,L(3,3),A(S)),[w.Interpolate]:mt(at=>{let pt=T|S;for(let Mt=3;Mt<at.length;Mt+=2)pt&=at[Mt].type;return pt},L(6,1/0),N,function et(at,pt,Mt,Ft){const Dt=at[1];let Wt;switch(Dt[0]){case"linear":Wt=1;break;case"exponential":if(Wt=Dt[1],"number"!=typeof Wt)throw new Error(`Expected a number base for exponential interpolation, got ${JSON.stringify(Wt)} instead`);break;default:Wt=null}if(!Wt)throw new Error(`Invalid interpolation type: ${JSON.stringify(Dt)}`);Wt=F(Wt,pt);let Ut=F(at[2],pt);if(!f(S,Ut.type))throw new Error(`Expected an input of type number for the interpolate operation, got ${h(Ut.type)} instead`);Ut=F(at[2],pt,S);const zt=new Array(at.length-3);for(let rt=0;rt<zt.length;rt+=2){let It=F(at[rt+3],pt);if(!f(S,It.type))throw new Error(`Expected all stop input values in the interpolate operation to be of type number, got ${h(It.type)} at position ${rt+2} instead`);let bt=F(at[rt+4],pt);if(!f(S|T,bt.type))throw new Error(`Expected all stop output values in the interpolate operation to be a number or color, got ${h(bt.type)} at position ${rt+3} instead`);It=F(at[rt+3],pt,S),bt=F(at[rt+4],pt,S|T),zt[rt]=It,zt[rt+1]=bt}return[Wt,Ut,...zt]}),[w.Case]:mt(at=>{let pt=d;for(let Mt=1;Mt<at.length;Mt+=2)pt&=at[Mt].type;return pt&=at[at.length-1].type,pt},L(3,1/0),function R(at,pt){const Ft=at.length-1;if(Ft%2==0)throw new Error(`An odd amount of arguments was expected for operation ${at[0]}, got ${JSON.stringify(Ft)} instead`)},function H(at,pt,Mt,Ft){const Dt=F(at[at.length-1],pt,Ft);let Wt=void 0!==Ft?Ft&Dt.type:Dt.type;const Ut=new Array(at.length-1);for(let zt=0;zt<Ut.length-1;zt+=2){const rt=F(at[zt+1],pt),It=F(at[zt+2],pt,Ft);if(!f(U,rt.type))throw new Error(`Expected all conditions in the case operation to be of type boolean, got ${h(rt.type)} at position ${zt} instead`);Wt&=It.type,Ut[zt]=rt,Ut[zt+1]=It}if(g(Wt,$))throw new Error("Could not find a common output type for the following case operation: "+JSON.stringify(at));for(let zt=0;zt<Ut.length-1;zt+=2)Ut[zt+1]=F(at[zt+2],pt,Wt);return Ut[Ut.length-1]=F(at[at.length-1],pt,Wt),Ut}),[w.In]:mt(U,L(2,2),function ot(at,pt){let Mt=at[2];if(!Array.isArray(Mt))throw new Error('The "in" operator was provided a literal value which was not an array as second argument.');if("string"==typeof Mt[0]){if("literal"!==Mt[0])throw new Error('For the "in" operator, a string array should be wrapped in a "literal" operator to disambiguate from expressions.');if(!Array.isArray(Mt[1]))throw new Error('The "in" operator was provided a literal value which was not an array as second argument.');Mt=Mt[1]}let Ft=b|S;const Dt=new Array(Mt.length);for(let Ut=0;Ut<Dt.length;Ut++){const zt=F(Mt[Ut],pt);Ft&=zt.type,Dt[Ut]=zt}if(g(Ft,$))throw new Error("Could not find a common type for the following in operation: "+JSON.stringify(at));return[F(at[1],pt,Ft),...Dt]}),[w.Number]:mt(S,L(1,1/0),A(d)),[w.String]:mt(b,L(1,1/0),A(d)),[w.Array]:mt(at=>2===at.length?y|m:3===at.length||4===at.length?y|T:y,L(1,1/0),A(S)),[w.Color]:mt(T,L(1,4),A(S)),[w.Band]:mt(S,L(1,3),A(S)),[w.Palette]:mt(T,L(2,2),function ht(at,pt){const Mt=F(at[1],pt,S);if(Mt.type!==S)throw new Error(`The first argument of palette must be an number, got ${h(Mt.type)} instead`);const Ft=at[2];if(!Array.isArray(Ft))throw new Error("The second argument of palette must be an array");const Dt=new Array(Ft.length);for(let Wt=0;Wt<Dt.length;Wt++){const Ut=F(Ft[Wt],pt,T);if(!(Ut instanceof a))throw new Error(`The palette color at index ${Wt} must be a literal value`);if(!f(Ut.type,T))throw new Error(`The palette color at index ${Wt} should be of type color, got ${h(Ut.type)} instead`);Dt[Wt]=Ut}return[Mt,...Dt]}),[w.ToString]:mt(b,L(1,1),A(U|S|b|T))};function C(at,pt){if(1!==at.length)throw new Error(`Expected no arguments for ${at[0]} operation`);return[]}function L(at,pt){return function(Mt,Ft){const Dt=Mt[0],Wt=Mt.length-1;if(at===pt){if(Wt!==at)throw new Error(`Expected ${at} argument${1===at?"":"s"} for ${Dt}, got ${Wt}`)}else if(Wt<at||Wt>pt)throw new Error(`Expected ${pt===1/0?`${at} or more`:`${at} to ${pt}`} arguments for ${Dt}, got ${Wt}`)}}function A(at){return function(pt,Mt){const Ft=pt[0],Dt=pt.length-1,Wt=new Array(Dt);for(let Ut=0;Ut<Dt;++Ut){const zt=F(pt[Ut+1],Mt);if(!f(at,zt.type)){const rt=h(at),It=h(zt.type);throw new Error(`Unexpected type for argument ${Ut} of ${Ft} operation, got ${rt} but expected ${It}`)}zt.type&=at,Wt[Ut]=zt}return Wt}}function P(at,pt,Mt){const Ft=at[0],Dt=at.length-1;let Wt=d;for(let zt=0;zt<Mt.length;++zt)Wt&=Mt[zt].type;if(Wt===$)throw new Error(`No common type could be found for arguments of ${Ft} operation`);const Ut=new Array(Dt);for(let zt=0;zt<Dt;++zt)Ut[zt]=F(at[zt+1],pt,Wt);return Ut}function N(at,pt){const Ft=at.length-1;if(Ft%2==1)throw new Error(`An even amount of arguments was expected for operation ${at[0]}, got ${JSON.stringify(Ft)} instead`)}function mt(at,...pt){return function(Mt,Ft,Dt){const Wt=Mt[0];let Ut=[];for(let rt=0;rt<pt.length;rt++)Ut=pt[rt](Mt,Ft,Ut,Dt)||Ut;let zt="function"==typeof at?at(Ut):at;if(void 0!==Dt){if(!f(zt,Dt))throw new Error(`The following expression was expected to return ${h(Dt)}, but returns ${h(zt)} instead: ${JSON.stringify(Mt)}`);zt&=Dt}if(zt===$)throw new Error(`No matching type was found for the following expression: ${JSON.stringify(Mt)}`);return new I(zt,Wt,...Ut)}}function Rt(at){if(!at)return"";const pt=at.getType();switch(pt){case"Point":case"LineString":case"Polygon":return pt;case"MultiPoint":case"MultiLineString":case"MultiPolygon":return pt.substring(5);case"Circle":return"Polygon";case"GeometryCollection":return Rt(at.getGeometries()[0]);default:return""}}},77:(jt,ut,o)=>{"use strict";o.d(ut,{Cf:()=>Ut,Cr:()=>Q,EO:()=>Mt,Ed:()=>H,GN:()=>f,H6:()=>M,H9:()=>Ft,HK:()=>h,I7:()=>Dt,MV:()=>zt,Ne:()=>Wt,T9:()=>l,Wj:()=>E,Xv:()=>xt,YN:()=>n,b8:()=>b,bg:()=>B,d9:()=>U,dY:()=>N,dz:()=>Rt,f3:()=>$,fS:()=>a,g0:()=>A,hC:()=>Y,hI:()=>k,iW:()=>I,jE:()=>y,kK:()=>at,l7:()=>p,lJ:()=>d,p8:()=>R,pX:()=>m,qP:()=>w,qf:()=>S,qg:()=>L,r4:()=>T,rL:()=>mt,w$:()=>C,xb:()=>pt});var V=o(4681);function k(rt){const It=[1/0,1/0,-1/0,-1/0];for(let bt=0,Xt=rt.length;bt<Xt;++bt)E(It,rt[bt]);return It}function $(rt,It,bt){return bt?(bt[0]=rt[0]-It,bt[1]=rt[1]-It,bt[2]=rt[2]+It,bt[3]=rt[3]+It,bt):[rt[0]-It,rt[1]-It,rt[2]+It,rt[3]+It]}function U(rt,It){return It?(It[0]=rt[0],It[1]=rt[1],It[2]=rt[2],It[3]=rt[3],It):rt.slice()}function S(rt,It,bt){let Xt,Vt;return Xt=It<rt[0]?rt[0]-It:rt[2]<It?It-rt[2]:0,Vt=bt<rt[1]?rt[1]-bt:rt[3]<bt?bt-rt[3]:0,Xt*Xt+Vt*Vt}function b(rt,It){return y(rt,It[0],It[1])}function T(rt,It){return rt[0]<=It[0]&&It[2]<=rt[2]&&rt[1]<=It[1]&&It[3]<=rt[3]}function y(rt,It,bt){return rt[0]<=It&&It<=rt[2]&&rt[1]<=bt&&bt<=rt[3]}function m(rt,It){const le=It[0],Ht=It[1];let ft=V.Z.UNKNOWN;return le<rt[0]?ft|=V.Z.LEFT:le>rt[2]&&(ft|=V.Z.RIGHT),Ht<rt[1]?ft|=V.Z.BELOW:Ht>rt[3]&&(ft|=V.Z.ABOVE),ft===V.Z.UNKNOWN&&(ft=V.Z.INTERSECTING),ft}function d(){return[1/0,1/0,-1/0,-1/0]}function l(rt,It,bt,Xt,Vt){return Vt?(Vt[0]=rt,Vt[1]=It,Vt[2]=bt,Vt[3]=Xt,Vt):[rt,It,bt,Xt]}function n(rt){return l(1/0,1/0,-1/0,-1/0,rt)}function h(rt,It){const bt=rt[0],Xt=rt[1];return l(bt,Xt,bt,Xt,It)}function f(rt,It,bt,Xt,Vt){return w(n(Vt),rt,It,bt,Xt)}function a(rt,It){return rt[0]==It[0]&&rt[2]==It[2]&&rt[1]==It[1]&&rt[3]==It[3]}function I(rt,It,bt){return Math.abs(rt[0]-It[0])<bt&&Math.abs(rt[2]-It[2])<bt&&Math.abs(rt[1]-It[1])<bt&&Math.abs(rt[3]-It[3])<bt}function p(rt,It){return It[0]<rt[0]&&(rt[0]=It[0]),It[2]>rt[2]&&(rt[2]=It[2]),It[1]<rt[1]&&(rt[1]=It[1]),It[3]>rt[3]&&(rt[3]=It[3]),rt}function E(rt,It){It[0]<rt[0]&&(rt[0]=It[0]),It[0]>rt[2]&&(rt[2]=It[0]),It[1]<rt[1]&&(rt[1]=It[1]),It[1]>rt[3]&&(rt[3]=It[1])}function w(rt,It,bt,Xt,Vt){for(;bt<Xt;bt+=Vt)O(rt,It[bt],It[bt+1]);return rt}function O(rt,It,bt){rt[0]=Math.min(rt[0],It),rt[1]=Math.min(rt[1],bt),rt[2]=Math.max(rt[2],It),rt[3]=Math.max(rt[3],bt)}function M(rt,It){let bt;return bt=It(Y(rt)),!!(bt||(bt=It(C(rt)),bt)||(bt=It(xt(rt)),bt)||(bt=It(mt(rt)),bt))&&bt}function B(rt){let It=0;return pt(rt)||(It=Rt(rt)*Q(rt)),It}function Y(rt){return[rt[0],rt[1]]}function C(rt){return[rt[2],rt[1]]}function L(rt){return[(rt[0]+rt[2])/2,(rt[1]+rt[3])/2]}function A(rt,It){let bt;if("bottom-left"===It)bt=Y(rt);else if("bottom-right"===It)bt=C(rt);else if("top-left"===It)bt=mt(rt);else{if("top-right"!==It)throw new Error("Invalid corner");bt=xt(rt)}return bt}function R(rt,It,bt,Xt,Vt){const[he,le,Ht,ft,St,kt,Lt,te]=N(rt,It,bt,Xt);return l(Math.min(he,Ht,St,Lt),Math.min(le,ft,kt,te),Math.max(he,Ht,St,Lt),Math.max(le,ft,kt,te),Vt)}function N(rt,It,bt,Xt){const Vt=It*Xt[0]/2,he=It*Xt[1]/2,le=Math.cos(bt),Ht=Math.sin(bt),ft=Vt*le,St=Vt*Ht,kt=he*le,Lt=he*Ht,te=rt[0],Yt=rt[1];return[te-ft+Lt,Yt-St-kt,te-ft-Lt,Yt-St+kt,te+ft-Lt,Yt+St+kt,te+ft+Lt,Yt+St-kt,te-ft+Lt,Yt-St-kt]}function Q(rt){return rt[3]-rt[1]}function H(rt,It,bt){const Xt=bt||[1/0,1/0,-1/0,-1/0];return at(rt,It)?(Xt[0]=rt[0]>It[0]?rt[0]:It[0],Xt[1]=rt[1]>It[1]?rt[1]:It[1],Xt[2]=rt[2]<It[2]?rt[2]:It[2],Xt[3]=rt[3]<It[3]?rt[3]:It[3]):n(Xt),Xt}function mt(rt){return[rt[0],rt[3]]}function xt(rt){return[rt[2],rt[3]]}function Rt(rt){return rt[2]-rt[0]}function at(rt,It){return rt[0]<=It[2]&&rt[2]>=It[0]&&rt[1]<=It[3]&&rt[3]>=It[1]}function pt(rt){return rt[2]<rt[0]||rt[3]<rt[1]}function Mt(rt,It){return It?(It[0]=rt[0],It[1]=rt[1],It[2]=rt[2],It[3]=rt[3],It):rt}function Ft(rt,It){const bt=(rt[2]-rt[0])/2*(It-1),Xt=(rt[3]-rt[1])/2*(It-1);rt[0]-=bt,rt[2]+=bt,rt[1]-=Xt,rt[3]+=Xt}function Dt(rt,It,bt){let Xt=!1;const Vt=m(rt,It),he=m(rt,bt);if(Vt===V.Z.INTERSECTING||he===V.Z.INTERSECTING)Xt=!0;else{const le=rt[0],Ht=rt[1],ft=rt[2],St=rt[3],te=bt[0],Yt=bt[1],Et=(Yt-It[1])/(te-It[0]);let wt,it;he&V.Z.ABOVE&&!(Vt&V.Z.ABOVE)&&(wt=te-(Yt-St)/Et,Xt=wt>=le&&wt<=ft),!Xt&&he&V.Z.RIGHT&&!(Vt&V.Z.RIGHT)&&(it=Yt-(te-ft)*Et,Xt=it>=Ht&&it<=St),!Xt&&he&V.Z.BELOW&&!(Vt&V.Z.BELOW)&&(wt=te-(Yt-Ht)/Et,Xt=wt>=le&&wt<=ft),!Xt&&he&V.Z.LEFT&&!(Vt&V.Z.LEFT)&&(it=Yt-(te-le)*Et,Xt=it>=Ht&&it<=St)}return Xt}function Wt(rt,It,bt,Xt){if(pt(rt))return n(bt);let Vt=[];if(Xt>1){const Ht=rt[2]-rt[0],ft=rt[3]-rt[1];for(let St=0;St<Xt;++St)Vt.push(rt[0]+Ht*St/Xt,rt[1],rt[2],rt[1]+ft*St/Xt,rt[2]-Ht*St/Xt,rt[3],rt[0],rt[3]-ft*St/Xt)}else Vt=[rt[0],rt[1],rt[2],rt[1],rt[2],rt[3],rt[0],rt[3]];It(Vt,Vt,2);const he=[],le=[];for(let Ht=0,ft=Vt.length;Ht<ft;Ht+=2)he.push(Vt[Ht]),le.push(Vt[Ht+1]);return function J(rt,It,bt){return l(Math.min.apply(null,rt),Math.min.apply(null,It),Math.max.apply(null,rt),Math.max.apply(null,It),bt)}(he,le,bt)}function Ut(rt,It){const bt=It.getExtent(),Xt=L(rt);if(It.canWrapX()&&(Xt[0]<bt[0]||Xt[0]>=bt[2])){const Vt=Rt(bt),le=Math.floor((Xt[0]-bt[0])/Vt)*Vt;rt[0]-=le,rt[2]-=le}return rt}function zt(rt,It,bt){if(It.canWrapX()){const Xt=It.getExtent();if(!isFinite(rt[0])||!isFinite(rt[2]))return[[Xt[0],rt[1],Xt[2],rt[3]]];Ut(rt,It);const Vt=Rt(Xt);if(Rt(rt)>Vt&&!bt)return[[Xt[0],rt[1],Xt[2],rt[3]]];if(rt[0]<Xt[0])return[[rt[0]+Vt,rt[1],Xt[2],rt[3]],[Xt[0],rt[1],rt[2],rt[3]]];if(rt[2]>Xt[2])return[[rt[0],rt[1],Xt[2],rt[3]],[Xt[0],rt[1],rt[2]-Vt,rt[3]]]}return[rt]}},4681:(jt,ut,o)=>{"use strict";o.d(ut,{Z:()=>V});const V={UNKNOWN:0,INTERSECTING:1,ABOVE:2,RIGHT:4,BELOW:8,LEFT:16}},6152:(jt,ut,o)=>{"use strict";o.d(ut,{Be:()=>$,ov:()=>J});var V=o(5173);let k=!1;function J(S,b,T,y,m,d,l){const n=new XMLHttpRequest;n.open("GET","function"==typeof S?S(T,y,m):S,!0),"arraybuffer"==b.getType()&&(n.responseType="arraybuffer"),n.withCredentials=k,n.onload=function(h){if(!n.status||n.status>=200&&n.status<300){const s=b.getType();try{let f;"text"==s||"json"==s?f=n.responseText:"xml"==s?f=n.responseXML||n.responseText:"arraybuffer"==s&&(f=n.response),f?d(b.readFeatures(f,{extent:T,featureProjection:m}),b.readProjection(f)):l()}catch{l()}}else l()},n.onerror=l,n.send()}function $(S,b){return function(T,y,m,d,l){const n=this;J(S,b,T,y,m,function(h,s){n.addFeatures(h),void 0!==d&&d(h)},l||V.Zn)}}},9250:(jt,ut,o)=>{"use strict";o.d(ut,{YU:()=>p,ZP:()=>h,fI:()=>s,zg:()=>I});var V=o(7176),k=o(3387),J=o(8095),$=o(49),U=o(8943),S=o(8982),b=o(6117),T=o(5872),y=o(4889),m=o(1293),d=o(7704),l=o(6630);const h=class n{constructor(){this.dataProjection=void 0,this.defaultFeatureProjection=void 0,this.featureClass=V.Z,this.supportedMediaTypes=null}getReadOptions(F,w){if(w){let K=w.dataProjection?(0,d.U2)(w.dataProjection):this.readProjection(F);w.extent&&K&&"tile-pixels"===K.getUnits()&&(K=(0,d.U2)(K),K.setWorldExtent(w.extent)),w={dataProjection:K,featureProjection:w.featureProjection}}return this.adaptOptions(w)}adaptOptions(F){return Object.assign({dataProjection:this.dataProjection,featureProjection:this.defaultFeatureProjection,featureClass:this.featureClass},F)}getType(){return(0,m.O3)()}readFeature(F,w){return(0,m.O3)()}readFeatures(F,w){return(0,m.O3)()}readGeometry(F,w){return(0,m.O3)()}readProjection(F){return(0,m.O3)()}writeFeature(F,w){return(0,m.O3)()}writeFeatures(F,w){return(0,m.O3)()}writeGeometry(F,w){return(0,m.O3)()}};function s(E,F,w){const K=w?(0,d.U2)(w.featureProjection):null,O=w?(0,d.U2)(w.dataProjection):null;let M=E;if(K&&O&&!(0,d.OP)(K,O)){F&&(M=E.clone());const B=F?K:O,Y=F?O:K;"tile-pixels"===B.getUnits()?M.transform(B,Y):M.applyTransform((0,d.Ck)(B,Y))}if(F&&w&&void 0!==w.decimals){const B=Math.pow(10,w.decimals),Y=function(C){for(let L=0,A=C.length;L<A;++L)C[L]=Math.round(C[L]*B)/B;return C};M===E&&(M=E.clone()),M.applyTransform(Y)}return M}const g={Point:J.Z,LineString:$.Z,Polygon:U.ZP,MultiPoint:S.Z,MultiLineString:b.Z,MultiPolygon:T.Z};function I(E,F){const w=E.geometry;if(!w)return[];if(Array.isArray(w))return w.map(M=>I({...E,geometry:M})).flat();const K="MultiPolygon"===w.type?"Polygon":w.type;if("GeometryCollection"===K||"Circle"===K)throw new Error("Unsupported geometry type: "+K);const O=w.layout.length;return s(new k.ZP(K,"Polygon"===K?function a(E,F,w){return Array.isArray(F[0])?((0,l.Oj)(E,0,F,w)||(E=E.slice(),(0,l.dL)(E,0,F,w)),E):((0,l.$v)(E,0,F,w)||(E=E.slice(),(0,l.zX)(E,0,F,w)),E)}(w.flatCoordinates,w.ends,O):w.flatCoordinates,w.ends?.flat(),O,E.properties||{},E.id).enableSimplifyTransformed(),!1,F)}function p(E,F){if(!E)return null;if(Array.isArray(E)){const K=E.map(O=>p(O,F));return new y.Z(K)}return s(new(0,g[E.type])(E.flatCoordinates,E.layout,E.ends),!1,F)}},6256:(jt,ut,o)=>{"use strict";o.d(ut,{Z:()=>B});var V=o(7176),k=o(781),J=o(3387),$=o(9250),U=o(8669),S=o(8559),b=o(7704),T=o(5269);function m(Y,C){if(!Y)return null;let L;switch(Y.type){case"Point":L=function n(Y){const C=Y.coordinates;return{type:"Point",flatCoordinates:C,layout:(0,S.Ss)(C.length)}}(Y);break;case"LineString":L=function h(Y){const C=Y.coordinates,L=C.flat();return{type:"LineString",flatCoordinates:L,ends:[L.length],layout:(0,S.Ss)(C[0]?.length||2)}}(Y);break;case"Polygon":L=function a(Y){const C=Y.coordinates,L=[],A=C[0]?.[0]?.length;return{type:"Polygon",flatCoordinates:L,ends:(0,U._5)(L,0,C,A),layout:(0,S.Ss)(A)}}(Y);break;case"MultiPoint":L=function f(Y){const C=Y.coordinates;return{type:"MultiPoint",flatCoordinates:C.flat(),layout:(0,S.Ss)(C[0]?.length||2)}}(Y);break;case"MultiLineString":L=function s(Y){const C=Y.coordinates,L=C[0]?.[0]?.length||2,A=[];return{type:"MultiLineString",flatCoordinates:A,ends:(0,U._5)(A,0,C,L),layout:(0,S.Ss)(L)}}(Y);break;case"MultiPolygon":L=function g(Y){const C=Y.coordinates,L=[],A=C[0]?.[0]?.[0].length||2;return{type:"MultiPolygon",flatCoordinates:L,ends:(0,U.QT)(L,0,C,A),layout:(0,S.Ss)(A)}}(Y);break;case"GeometryCollection":L=function l(Y,C){return Y.geometries.map(function(A){return m(A)})}(Y);break;default:throw new Error("Unsupported GeoJSON type: "+Y.type)}return L}function I(Y,C){const L=(Y=(0,$.fI)(Y,!0,C)).getType();let A;switch(L){case"Point":A=function O(Y,C){return{type:"Point",coordinates:Y.getCoordinates()}}(Y);break;case"LineString":A=function E(Y,C){return{type:"LineString",coordinates:Y.getCoordinates()}}(Y);break;case"Polygon":A=function M(Y,C){let L;return C&&(L=C.rightHanded),{type:"Polygon",coordinates:Y.getCoordinates(L)}}(Y,C);break;case"MultiPoint":A=function w(Y,C){return{type:"MultiPoint",coordinates:Y.getCoordinates()}}(Y);break;case"MultiLineString":A=function F(Y,C){return{type:"MultiLineString",coordinates:Y.getCoordinates()}}(Y);break;case"MultiPolygon":A=function K(Y,C){let L;return C&&(L=C.rightHanded),{type:"MultiPolygon",coordinates:Y.getCoordinates(L)}}(Y,C);break;case"GeometryCollection":A=function p(Y,C){return delete(C=Object.assign({},C)).featureProjection,{type:"GeometryCollection",geometries:Y.getGeometriesArray().map(function(A){return I(A,C)})}}(Y,C);break;case"Circle":A={type:"GeometryCollection",geometries:[]};break;default:throw new Error("Unsupported geometry type: "+L)}return A}const B=class y extends k.Z{constructor(C){C=C||{},super(),this.dataProjection=(0,b.U2)(C.dataProjection?C.dataProjection:"EPSG:4326"),C.featureProjection&&(this.defaultFeatureProjection=(0,b.U2)(C.featureProjection)),C.featureClass&&(this.featureClass=C.featureClass),this.geometryName_=C.geometryName,this.extractGeometryName_=C.extractGeometryName,this.supportedMediaTypes=["application/geo+json","application/vnd.geo+json"]}readFeatureFromObject(C,L){let A=null;A="Feature"===C.type?C:{type:"Feature",geometry:C,properties:null};const P=m(A.geometry);if(this.featureClass===J.ZP)return(0,$.zg)({geometry:P,id:A.id,properties:A.properties},L);const R=new V.Z;return this.geometryName_?R.setGeometryName(this.geometryName_):this.extractGeometryName_&&A.geometry_name&&R.setGeometryName(A.geometry_name),R.setGeometry((0,$.YU)(P,L)),"id"in A&&R.setId(A.id),A.properties&&R.setProperties(A.properties,!0),R}readFeaturesFromObject(C,L){let P=null;if("FeatureCollection"===C.type){P=[];const N=C.features;for(let Q=0,et=N.length;Q<et;++Q){const H=this.readFeatureFromObject(N[Q],L);H&&P.push(H)}}else P=[this.readFeatureFromObject(C,L)];return P.flat()}readGeometryFromObject(C,L){return function d(Y,C){const L=m(Y);return(0,$.YU)(L,C)}(C,L)}readProjectionFromObject(C){const L=C.crs;let A;if(L)if("name"==L.type)A=(0,b.U2)(L.properties.name);else{if("EPSG"!==L.type)throw new Error("Unknown SRS type");A=(0,b.U2)("EPSG:"+L.properties.code)}else A=this.dataProjection;return A}writeFeatureObject(C,L){L=this.adaptOptions(L);const A={type:"Feature",geometry:null,properties:null},P=C.getId();if(void 0!==P&&(A.id=P),!C.hasProperties())return A;const R=C.getProperties(),N=C.getGeometry();return N&&(A.geometry=I(N,L),delete R[C.getGeometryName()]),(0,T.x)(R)||(A.properties=R),A}writeFeaturesObject(C,L){L=this.adaptOptions(L);const A=[];for(let P=0,R=C.length;P<R;++P)A.push(this.writeFeatureObject(C[P],L));return{type:"FeatureCollection",features:A}}writeGeometryObject(C,L){return I(C,this.adaptOptions(L))}}},781:(jt,ut,o)=>{"use strict";o.d(ut,{Z:()=>U});var V=o(9250),k=o(1293);function $(S){return"string"==typeof S?JSON.parse(S)||null:null!==S?S:null}const U=class J extends V.ZP{constructor(){super()}getType(){return"json"}readFeature(b,T){return this.readFeatureFromObject($(b),this.getReadOptions(b,T))}readFeatures(b,T){return this.readFeaturesFromObject($(b),this.getReadOptions(b,T))}readFeatureFromObject(b,T){return(0,k.O3)()}readFeaturesFromObject(b,T){return(0,k.O3)()}readGeometry(b,T){return this.readGeometryFromObject($(b),this.getReadOptions(b,T))}readGeometryFromObject(b,T){return(0,k.O3)()}readProjection(b){return this.readProjectionFromObject($(b))}readProjectionFromObject(b){return(0,k.O3)()}writeFeature(b,T){return JSON.stringify(this.writeFeatureObject(b,T))}writeFeatureObject(b,T){return(0,k.O3)()}writeFeatures(b,T){return JSON.stringify(this.writeFeaturesObject(b,T))}writeFeaturesObject(b,T){return(0,k.O3)()}writeGeometry(b,T){return JSON.stringify(this.writeGeometryObject(b,T))}writeGeometryObject(b,T){return(0,k.O3)()}}},2101:(jt,ut,o)=>{"use strict";o.d(ut,{ZP:()=>tr});var V=o(7176),k=o(2334),J=o(4889),$=o(9269),U=o(6343),S=o(49),b=o(6117),T=o(8982),y=o(5872),m=o(8095),d=o(8943),l=o(5784),n=o(9032),h=o(5739),s=o(9250),f=o(1293),g=o(5959),a=o(3229);const p=class I extends s.ZP{constructor(){super(),this.xmlSerializer_=(0,a.xc)()}getType(){return"xml"}readFeature(lt,gt){if(!lt)return null;if("string"==typeof lt){const yt=(0,a.Qc)(lt);return this.readFeatureFromDocument(yt,gt)}return(0,a.qk)(lt)?this.readFeatureFromDocument(lt,gt):this.readFeatureFromNode(lt,gt)}readFeatureFromDocument(lt,gt){const yt=this.readFeaturesFromDocument(lt,gt);return yt.length>0?yt[0]:null}readFeatureFromNode(lt,gt){return null}readFeatures(lt,gt){if(!lt)return[];if("string"==typeof lt){const yt=(0,a.Qc)(lt);return this.readFeaturesFromDocument(yt,gt)}return(0,a.qk)(lt)?this.readFeaturesFromDocument(lt,gt):this.readFeaturesFromNode(lt,gt)}readFeaturesFromDocument(lt,gt){const yt=[];for(let Nt=lt.firstChild;Nt;Nt=Nt.nextSibling)Nt.nodeType==Node.ELEMENT_NODE&&(0,g.l7)(yt,this.readFeaturesFromNode(Nt,gt));return yt}readFeaturesFromNode(lt,gt){return(0,f.O3)()}readGeometry(lt,gt){if(!lt)return null;if("string"==typeof lt){const yt=(0,a.Qc)(lt);return this.readGeometryFromDocument(yt,gt)}return(0,a.qk)(lt)?this.readGeometryFromDocument(lt,gt):this.readGeometryFromNode(lt,gt)}readGeometryFromDocument(lt,gt){return null}readGeometryFromNode(lt,gt){return null}readProjection(lt){if(!lt)return null;if("string"==typeof lt){const gt=(0,a.Qc)(lt);return this.readProjectionFromDocument(gt)}return(0,a.qk)(lt)?this.readProjectionFromDocument(lt):this.readProjectionFromNode(lt)}readProjectionFromDocument(lt){return this.dataProjection}readProjectionFromNode(lt){return this.dataProjection}writeFeature(lt,gt){const yt=this.writeFeatureNode(lt,gt);return this.xmlSerializer_.serializeToString(yt)}writeFeatureNode(lt,gt){return null}writeFeatures(lt,gt){const yt=this.writeFeaturesNode(lt,gt);return this.xmlSerializer_.serializeToString(yt)}writeFeaturesNode(lt,gt){return null}writeGeometry(lt,gt){const yt=this.writeGeometryNode(lt,gt);return this.xmlSerializer_.serializeToString(yt)}writeGeometryNode(lt,gt){return null}};var E=o(9432),F=o(7704),w=o(5848),K=o(6868);const O=["http://www.google.com/kml/ext/2.2"],M=[null,"http://earth.google.com/kml/2.0","http://earth.google.com/kml/2.1","http://earth.google.com/kml/2.2","http://www.opengis.net/kml/2.2"],Y={fraction:"fraction",pixels:"pixels",insetPixels:"pixels"},C=(0,a.C5)(M,{ExtendedData:fi,Region:xi,MultiGeometry:(0,a.Pr)(At,"geometry"),LineString:(0,a.Pr)(tt,"geometry"),LinearRing:(0,a.Pr)(_t,"geometry"),Point:(0,a.Pr)($t,"geometry"),Polygon:(0,a.Pr)(ae,"geometry"),Style:(0,a.Pr)(Te),StyleMap:function ki(Kt,lt){const gt=W.call(this,Kt,lt);if(!gt)return;const yt=lt[lt.length-1];if(Array.isArray(gt))yt.Style=gt;else{if("string"!=typeof gt)throw new Error("`styleMapValue` has an unknown type");yt.styleUrl=gt}},address:(0,a.Pr)(w.s2),description:(0,a.Pr)(w.s2),name:(0,a.Pr)(w.s2),open:(0,a.Pr)(w.ud),phoneNumber:(0,a.Pr)(w.s2),styleUrl:(0,a.Pr)(it),visibility:(0,a.Pr)(w.ud)},(0,a.C5)(O,{MultiTrack:(0,a.Pr)(function Ie(Kt,lt){const gt=(0,a.O)([],we,Kt,lt);if(gt)return new b.Z(gt)},"geometry"),Track:(0,a.Pr)(je,"geometry")})),L=(0,a.C5)(M,{ExtendedData:fi,Region:xi,Link:function Je(Kt,lt){(0,a.T3)(A,Kt,lt)},address:(0,a.Pr)(w.s2),description:(0,a.Pr)(w.s2),name:(0,a.Pr)(w.s2),open:(0,a.Pr)(w.ud),phoneNumber:(0,a.Pr)(w.s2),visibility:(0,a.Pr)(w.ud)}),A=(0,a.C5)(M,{href:(0,a.Pr)(wt)}),P=(0,a.C5)(M,{Altitude:(0,a.Pr)(w.fy),Longitude:(0,a.Pr)(w.fy),Latitude:(0,a.Pr)(w.fy),Tilt:(0,a.Pr)(w.fy),AltitudeMode:(0,a.Pr)(w.s2),Heading:(0,a.Pr)(w.fy),Roll:(0,a.Pr)(w.fy)}),R=(0,a.C5)(M,{LatLonAltBox:function ei(Kt,lt){const gt=(0,a.O)({},Ji,Kt,lt);if(!gt)return;const yt=lt[lt.length-1],Nt=[parseFloat(gt.west),parseFloat(gt.south),parseFloat(gt.east),parseFloat(gt.north)];yt.extent=Nt,yt.altitudeMode=gt.altitudeMode,yt.minAltitude=parseFloat(gt.minAltitude),yt.maxAltitude=parseFloat(gt.maxAltitude)},Lod:function Mi(Kt,lt){const gt=(0,a.O)({},Si,Kt,lt);if(!gt)return;const yt=lt[lt.length-1];yt.minLodPixels=parseFloat(gt.minLodPixels),yt.maxLodPixels=parseFloat(gt.maxLodPixels),yt.minFadeExtent=parseFloat(gt.minFadeExtent),yt.maxFadeExtent=parseFloat(gt.maxFadeExtent)}}),N=(0,a.C5)(M,["Document","Placemark"]),Q=(0,a.C5)(M,{Document:(0,a.A4)(function _s(Kt,lt,gt){(0,a.ZL)({node:Kt},Mn,ln,lt,gt,void 0,this)}),Placemark:(0,a.A4)(is)});let et,ht,mt,xt,Rt,at,Ft,Ut,Ht,H=null,pt=null,Dt=null,zt=null,It=null,Xt=null;function he(Kt){return 32/Math.min(Kt[0],Kt[1])}function ft(Kt){return Kt}function te(Kt,lt,gt){return Array.isArray(Kt)?Kt:"string"==typeof Kt?te(gt[Kt],lt,gt):lt}function Yt(Kt){const lt=(0,a.Ve)(Kt,!1),gt=/^\s*#?\s*([0-9A-Fa-f]{8})\s*$/.exec(lt);if(gt){const yt=gt[1];return[parseInt(yt.substr(6,2),16),parseInt(yt.substr(4,2),16),parseInt(yt.substr(2,2),16),parseInt(yt.substr(0,2),16)/255]}}function Et(Kt){let lt=(0,a.Ve)(Kt,!1);const gt=[];lt=lt.replace(/\s*,\s*/g,",");const yt=/^\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?),([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)(?:\s+|,|$)(?:([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)(?:\s+|$))?\s*/i;let Nt;for(;Nt=yt.exec(lt);){const Jt=parseFloat(Nt[1]),ie=parseFloat(Nt[2]),ce=Nt[3]?parseFloat(Nt[3]):0;gt.push(Jt,ie,ce),lt=lt.substr(Nt[0].length)}if(""===lt)return gt}function wt(Kt){const lt=(0,a.Ve)(Kt,!1).trim();let gt=Kt.baseURI;return(!gt||"about:blank"==gt)&&(gt=window.location.href),gt?new URL(lt,gt).href:lt}function it(Kt){const lt=(0,a.Ve)(Kt,!1).trim().replace(/^(?!.*#)/,"#");let gt=Kt.baseURI;return(!gt||"about:blank"==gt)&&(gt=window.location.href),gt?new URL(lt,gt).href:lt}function _(Kt){return(0,w.fy)(Kt)}const Z=(0,a.C5)(M,{Pair:function xn(Kt,lt){const gt=(0,a.O)({},an,Kt,lt,this);if(!gt)return;const yt=gt.key;if(yt&&"normal"==yt){const Nt=gt.styleUrl;Nt&&(lt[lt.length-1]=Nt);const Jt=gt.Style;Jt&&(lt[lt.length-1]=Jt)}}});function W(Kt,lt){return(0,a.O)(void 0,Z,Kt,lt,this)}const j=(0,a.C5)(M,{Icon:(0,a.Pr)(function Ye(Kt,lt){return(0,a.O)({},Ke,Kt,lt)||null}),color:(0,a.Pr)(Yt),heading:(0,a.Pr)(w.fy),hotSpot:(0,a.Pr)(function z(Kt){const lt=Kt.getAttribute("xunits"),gt=Kt.getAttribute("yunits");let yt;return yt="insetPixels"!==lt?"insetPixels"!==gt?"bottom-left":"top-left":"insetPixels"!==gt?"bottom-right":"top-right",{x:parseFloat(Kt.getAttribute("x")),xunits:Y[lt],y:parseFloat(Kt.getAttribute("y")),yunits:Y[gt],origin:yt}}),scale:(0,a.Pr)(_)}),dt=(0,a.C5)(M,{color:(0,a.Pr)(Yt),scale:(0,a.Pr)(_)}),Ct=(0,a.C5)(M,{color:(0,a.Pr)(Yt),width:(0,a.Pr)(w.fy)}),qt=(0,a.C5)(M,{color:(0,a.Pr)(Yt),fill:(0,a.Pr)(w.ud),outline:(0,a.Pr)(w.ud)}),oe=(0,a.C5)(M,{coordinates:(0,a.z)(Et)});function Qt(Kt,lt){return(0,a.O)(null,oe,Kt,lt)}const we=(0,a.C5)(O,{Track:(0,a.Ei)(je)}),De=(0,a.C5)(M,{when:function Be(Kt,lt){const yt=lt[lt.length-1].whens,Nt=(0,a.Ve)(Kt,!1),Jt=Date.parse(Nt);yt.push(isNaN(Jt)?0:Jt)}},(0,a.C5)(O,{coord:function ge(Kt,lt){const yt=lt[lt.length-1].coordinates,Nt=(0,a.Ve)(Kt,!1),ie=/^\s*([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s+([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s+([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s*$/i.exec(Nt);if(ie){const ce=parseFloat(ie[1]),me=parseFloat(ie[2]),Re=parseFloat(ie[3]);yt.push([ce,me,Re])}else yt.push([])}}));function je(Kt,lt){const gt=(0,a.O)({coordinates:[],whens:[]},De,Kt,lt);if(!gt)return;const yt=[],Nt=gt.coordinates,Jt=gt.whens;for(let ie=0,ce=Math.min(Nt.length,Jt.length);ie<ce;++ie)3==Nt[ie].length&&yt.push(Nt[ie][0],Nt[ie][1],Nt[ie][2],Jt[ie]);return new S.Z(yt,"XYZM")}const Ke=(0,a.C5)(M,{href:(0,a.Pr)(wt)},(0,a.C5)(O,{x:(0,a.Pr)(w.fy),y:(0,a.Pr)(w.fy),w:(0,a.Pr)(w.fy),h:(0,a.Pr)(w.fy)})),Ze=(0,a.C5)(M,{coordinates:(0,a.z)(Et)});function Ce(Kt,lt){return(0,a.O)(null,Ze,Kt,lt)}const q=(0,a.C5)(M,{extrude:(0,a.Pr)(w.ud),tessellate:(0,a.Pr)(w.ud),altitudeMode:(0,a.Pr)(w.s2)});function tt(Kt,lt){const gt=(0,a.O)({},q,Kt,lt),yt=Ce(Kt,lt);if(yt){const Nt=new S.Z(yt,"XYZ");return Nt.setProperties(gt,!0),Nt}}function _t(Kt,lt){const gt=(0,a.O)({},q,Kt,lt),yt=Ce(Kt,lt);if(yt){const Nt=new d.ZP(yt,"XYZ",[yt.length]);return Nt.setProperties(gt,!0),Nt}}const vt=(0,a.C5)(M,{LineString:(0,a.Ei)(tt),LinearRing:(0,a.Ei)(_t),MultiGeometry:(0,a.Ei)(At),Point:(0,a.Ei)($t),Polygon:(0,a.Ei)(ae)});function At(Kt,lt){const gt=(0,a.O)([],vt,Kt,lt);if(!gt)return null;if(0===gt.length)return new J.Z(gt);let yt,Nt=!0;const Jt=gt[0].getType();let ie;for(let ce=1,me=gt.length;ce<me;++ce)if(ie=gt[ce],ie.getType()!=Jt){Nt=!1;break}if(Nt){let ce,me;if("Point"==Jt){const Re=gt[0];ce=Re.getLayout(),me=Re.getFlatCoordinates();for(let Ne=1,Xe=gt.length;Ne<Xe;++Ne)ie=gt[Ne],(0,g.l7)(me,ie.getFlatCoordinates());yt=new T.Z(me,ce),Oe(yt,gt)}else if("LineString"==Jt)yt=new b.Z(gt),Oe(yt,gt);else if("Polygon"==Jt)yt=new y.Z(gt),Oe(yt,gt);else{if("GeometryCollection"!=Jt)throw new Error("Unknown geometry type found");yt=new J.Z(gt)}}else yt=new J.Z(gt);return yt}function $t(Kt,lt){const gt=(0,a.O)({},q,Kt,lt),yt=Ce(Kt,lt);if(yt){const Nt=new m.Z(yt,"XYZ");return Nt.setProperties(gt,!0),Nt}}const re=(0,a.C5)(M,{innerBoundaryIs:function li(Kt,lt){const gt=(0,a.O)([],_i,Kt,lt);gt.length>0&&lt[lt.length-1].push(...gt)},outerBoundaryIs:function Ai(Kt,lt){const gt=(0,a.O)(void 0,Ti,Kt,lt);gt&&(lt[lt.length-1][0]=gt)}});function ae(Kt,lt){const gt=(0,a.O)({},q,Kt,lt),yt=(0,a.O)([null],re,Kt,lt);if(yt&&yt[0]){const Nt=yt[0],Jt=[Nt.length];for(let ce=1,me=yt.length;ce<me;++ce)(0,g.l7)(Nt,yt[ce]),Jt.push(Nt.length);const ie=new d.ZP(Nt,"XYZ",Jt);return ie.setProperties(gt,!0),ie}}const ye=(0,a.C5)(M,{IconStyle:function st(Kt,lt){const gt=(0,a.O)({},j,Kt,lt);if(!gt)return;const yt=lt[lt.length-1],Nt="Icon"in gt?gt.Icon:{},Jt=!("Icon"in gt)||Object.keys(Nt).length>0;let ie;const ce=Nt.href;ce?ie=ce:Jt&&(ie=at);let me,Re,Ne,Xe="bottom-left";const Ge=gt.hotSpot;let si;Ge?(me=[Ge.x,Ge.y],Re=Ge.xunits,Ne=Ge.yunits,Xe=Ge.origin):/^https?:\/\/maps\.(?:google|gstatic)\.com\//.test(ie)&&(ie.includes("pushpin")?(me=ht,Re=mt,Ne=xt):ie.includes("arrow-reverse")?(me=[54,42],Re=mt,Ne=xt):ie.includes("paddle")&&(me=[32,1],Re=mt,Ne=xt));const Qe=Nt.x,Ki=Nt.y;let ii;void 0!==Qe&&void 0!==Ki&&(si=[Qe,Ki]);const vi=Nt.w,gi=Nt.h;let bi;void 0!==vi&&void 0!==gi&&(ii=[vi,gi]);const mi=gt.heading;void 0!==mi&&(bi=(0,K.Yr)(mi));const qi=gt.color;if(Jt){ie==at&&(ii=Rt);const Di=new $.Z({anchor:me,anchorOrigin:Xe,anchorXUnits:Re,anchorYUnits:Ne,crossOrigin:this.crossOrigin_,offset:si,offsetOrigin:"bottom-left",rotation:bi,scale:gt.scale,size:ii,src:this.iconUrlFunction_(ie),color:qi}),Cs=Di.getScaleArray()[0],as=Di.getSize();if(null===as){const Cn=Di.getImageState();if(Cn===U.Z.IDLE||Cn===U.Z.LOADING){const Rs=function(){const Is=Di.getImageState();if(Is!==U.Z.IDLE&&Is!==U.Z.LOADING){const jn=Di.getSize();if(jn&&2==jn.length){const er=he(jn);Di.setScale(Cs*er)}Di.unlistenImageChange(Rs)}};Di.listenImageChange(Rs),Cn===U.Z.IDLE&&Di.load()}}else if(2==as.length){const Cn=he(as);Di.setScale(Cs*Cn)}yt.imageStyle=Di}else yt.imageStyle=Ft},LabelStyle:function Ot(Kt,lt){const gt=(0,a.O)({},dt,Kt,lt);if(!gt)return;const yt=lt[lt.length-1],Nt=new h.Z({fill:new k.Z({color:"color"in gt?gt.color:et}),scale:gt.scale});yt.textStyle=Nt},LineStyle:function Gt(Kt,lt){const gt=(0,a.O)({},Ct,Kt,lt);if(!gt)return;const yt=lt[lt.length-1],Nt=new l.Z({color:"color"in gt?gt.color:et,width:"width"in gt?gt.width:1});yt.strokeStyle=Nt},PolyStyle:function ne(Kt,lt){const gt=(0,a.O)({},qt,Kt,lt);if(!gt)return;const yt=lt[lt.length-1],Nt=new k.Z({color:"color"in gt?gt.color:et});yt.fillStyle=Nt;const Jt=gt.fill;void 0!==Jt&&(yt.fill=Jt);const ie=gt.outline;void 0!==ie&&(yt.outline=ie)}});function Te(Kt,lt){const gt=(0,a.O)({},ye,Kt,lt,this);if(!gt)return null;let yt="fillStyle"in gt?gt.fillStyle:H;const Nt=gt.fill;let Jt;void 0!==Nt&&!Nt&&(yt=null),"imageStyle"in gt?gt.imageStyle!=Ft&&(Jt=gt.imageStyle):Jt=pt;const ie="textStyle"in gt?gt.textStyle:zt,ce="strokeStyle"in gt?gt.strokeStyle:Dt,me=gt.outline;return void 0===me||me?[new n.ZP({fill:yt,image:Jt,stroke:ce,text:ie,zIndex:void 0})]:[new n.ZP({geometry:function(Re){const Ne=Re.getGeometry(),Xe=Ne.getType();return"GeometryCollection"===Xe?new J.Z(Ne.getGeometriesArrayRecursive().filter(function(si){const Qe=si.getType();return"Polygon"!==Qe&&"MultiPolygon"!==Qe})):"Polygon"!==Xe&&"MultiPolygon"!==Xe?Ne:void 0},fill:yt,image:Jt,stroke:ce,text:ie,zIndex:void 0}),new n.ZP({geometry:function(Re){const Ne=Re.getGeometry(),Xe=Ne.getType();return"GeometryCollection"===Xe?new J.Z(Ne.getGeometriesArrayRecursive().filter(function(si){const Qe=si.getType();return"Polygon"===Qe||"MultiPolygon"===Qe})):"Polygon"===Xe||"MultiPolygon"===Xe?Ne:void 0},fill:yt,stroke:null,zIndex:void 0})]}function Oe(Kt,lt){const gt=lt.length,yt=new Array(lt.length),Nt=new Array(lt.length),Jt=new Array(lt.length);let ie,ce,me;ie=!1,ce=!1,me=!1;for(let Re=0;Re<gt;++Re){const Ne=lt[Re];yt[Re]=Ne.get("extrude"),Nt[Re]=Ne.get("tessellate"),Jt[Re]=Ne.get("altitudeMode"),ie=ie||void 0!==yt[Re],ce=ce||void 0!==Nt[Re],me=me||Jt[Re]}ie&&Kt.set("extrude",yt),ce&&Kt.set("tessellate",Nt),me&&Kt.set("altitudeMode",Jt)}const Fe=(0,a.C5)(M,{displayName:(0,a.Pr)(w.s2),value:(0,a.Pr)(w.s2)}),ti=(0,a.C5)(M,{Data:function Ue(Kt,lt){const gt=Kt.getAttribute("name");(0,a.T3)(Fe,Kt,lt);const yt=lt[lt.length-1];gt&&yt.displayName?yt[gt]={value:yt.value,displayName:yt.displayName,toString:function(){return yt.value}}:null!==gt?yt[gt]=yt.value:null!==yt.displayName&&(yt[yt.displayName]=yt.value),delete yt.value},SchemaData:function Hi(Kt,lt){(0,a.T3)(Oi,Kt,lt)}});function fi(Kt,lt){(0,a.T3)(ti,Kt,lt)}function xi(Kt,lt){(0,a.T3)(R,Kt,lt)}const an=(0,a.C5)(M,{Style:(0,a.Pr)(Te),key:(0,a.Pr)(w.s2),styleUrl:(0,a.Pr)(it)}),Oi=(0,a.C5)(M,{SimpleData:function Bi(Kt,lt){const gt=Kt.getAttribute("name");if(null!==gt){const yt=(0,w.s2)(Kt);lt[lt.length-1][gt]=yt}}}),Ji=(0,a.C5)(M,{altitudeMode:(0,a.Pr)(w.s2),minAltitude:(0,a.Pr)(w.fy),maxAltitude:(0,a.Pr)(w.fy),north:(0,a.Pr)(w.fy),south:(0,a.Pr)(w.fy),east:(0,a.Pr)(w.fy),west:(0,a.Pr)(w.fy)}),Si=(0,a.C5)(M,{minLodPixels:(0,a.Pr)(w.fy),maxLodPixels:(0,a.Pr)(w.fy),minFadeExtent:(0,a.Pr)(w.fy),maxFadeExtent:(0,a.Pr)(w.fy)}),_i=(0,a.C5)(M,{LinearRing:(0,a.Ei)(Qt)}),Ti=(0,a.C5)(M,{LinearRing:(0,a.z)(Qt)});function pi(Kt,lt){const gt=(0,E._2)(lt),Nt=[255*(4==gt.length?gt[3]:1),gt[2],gt[1],gt[0]];for(let Jt=0;Jt<4;++Jt){const ie=Math.floor(Nt[Jt]).toString(16);Nt[Jt]=1==ie.length?"0"+ie:ie}(0,w.bZ)(Kt,Nt.join(""))}const gn=(0,a.C5)(M,{Data:(0,a.A4)(function mn(Kt,lt,gt){Kt.setAttribute("name",lt.name);const yt={node:Kt},Nt=lt.value;"object"==typeof Nt?(null!==Nt&&Nt.displayName&&(0,a.ZL)(yt,gn,a.hg,[Nt.displayName],gt,["displayName"]),null!==Nt&&Nt.value&&(0,a.ZL)(yt,gn,a.hg,[Nt.value],gt,["value"])):(0,a.ZL)(yt,gn,a.hg,[Nt],gt,["value"])}),value:(0,a.A4)(function Ci(Kt,lt){(0,w.bZ)(Kt,lt)}),displayName:(0,a.A4)(function Pi(Kt,lt){(0,w.xO)(Kt,lt)})}),Mn=(0,a.C5)(M,{Placemark:(0,a.A4)(is)}),ln=function(Kt,lt,gt){return(0,a.c)(lt[lt.length-1].node.namespaceURI,"Placemark")},Vn=(0,a.G3)("Data"),Dn=(0,a.C5)(M,["href"],(0,a.C5)(O,["x","y","w","h"])),Pn=(0,a.C5)(M,{href:(0,a.A4)(w.bZ)},(0,a.C5)(O,{x:(0,a.A4)(w.f3),y:(0,a.A4)(w.f3),w:(0,a.A4)(w.f3),h:(0,a.A4)(w.f3)})),ps=function(Kt,lt,gt){return(0,a.c)(O[0],"gx:"+gt)},hn=(0,a.C5)(M,["scale","heading","Icon","color","hotSpot"]),Yn=(0,a.C5)(M,{Icon:(0,a.A4)(function Vs(Kt,lt,gt){const yt={node:Kt};let Jt=Dn[gt[gt.length-1].node.namespaceURI],ie=(0,a.RA)(lt,Jt);(0,a.ZL)(yt,Pn,a.hg,ie,gt,Jt),Jt=Dn[O[0]],ie=(0,a.RA)(lt,Jt),(0,a.ZL)(yt,Pn,ps,ie,gt,Jt)}),color:(0,a.A4)(pi),heading:(0,a.A4)(w.f3),hotSpot:(0,a.A4)(function os(Kt,lt){Kt.setAttribute("x",String(lt.x)),Kt.setAttribute("y",String(lt.y)),Kt.setAttribute("xunits",lt.xunits),Kt.setAttribute("yunits",lt.yunits)}),scale:(0,a.A4)(Un)}),$n=(0,a.C5)(M,["color","scale"]),Nn=(0,a.C5)(M,{color:(0,a.A4)(pi),scale:(0,a.A4)(Un)}),Jn=(0,a.C5)(M,["color","width"]),Qn=(0,a.C5)(M,{color:(0,a.A4)(pi),width:(0,a.A4)(w.f3)}),qn={Point:"Point",LineString:"LineString",LinearRing:"LinearRing",Polygon:"Polygon",MultiPoint:"MultiGeometry",MultiLineString:"MultiGeometry",MultiPolygon:"MultiGeometry",GeometryCollection:"MultiGeometry"},Qi=function(Kt,lt,gt){if(Kt)return(0,a.c)(lt[lt.length-1].node.namespaceURI,qn[Kt.getType()])},ts=(0,a.G3)("Point"),vs=(0,a.G3)("LineString"),Ys=(0,a.G3)("LinearRing"),un=(0,a.G3)("Polygon"),Es=(0,a.C5)(M,{LineString:(0,a.A4)(Wi),Point:(0,a.A4)(Wi),Polygon:(0,a.A4)(Zn),GeometryCollection:(0,a.A4)(yi)});function yi(Kt,lt,gt){const yt={node:Kt},Nt=lt.getType();let ie,Jt=[];if("GeometryCollection"===Nt)lt.getGeometriesArrayRecursive().forEach(function(ce){const me=ce.getType();if("MultiPoint"===me)Jt=Jt.concat(ce.getPoints());else if("MultiLineString"===me)Jt=Jt.concat(ce.getLineStrings());else if("MultiPolygon"===me)Jt=Jt.concat(ce.getPolygons());else{if("Point"!==me&&"LineString"!==me&&"Polygon"!==me)throw new Error("Unknown geometry type");Jt.push(ce)}}),ie=Qi;else if("MultiPoint"===Nt)Jt=lt.getPoints(),ie=ts;else if("MultiLineString"===Nt)Jt=lt.getLineStrings(),ie=vs;else{if("MultiPolygon"!==Nt)throw new Error("Unknown geometry type");Jt=lt.getPolygons(),ie=un}(0,a.ZL)(yt,Es,ie,Jt,gt)}const $s=(0,a.C5)(M,{LinearRing:(0,a.A4)(Wi)});function xs(Kt,lt,gt){(0,a.ZL)({node:Kt},$s,Ys,[lt],gt)}const es=(0,a.C5)(M,{ExtendedData:(0,a.A4)(function Xs(Kt,lt,gt){const yt={node:Kt},Nt=lt.names,Jt=lt.values,ie=Nt.length;for(let ce=0;ce<ie;ce++)(0,a.ZL)(yt,gn,Vn,[{name:Nt[ce],value:Jt[ce]}],gt)}),MultiGeometry:(0,a.A4)(yi),LineString:(0,a.A4)(Wi),LinearRing:(0,a.A4)(Wi),Point:(0,a.A4)(Wi),Polygon:(0,a.A4)(Zn),Style:(0,a.A4)(function qs(Kt,lt,gt){const yt={node:Kt},Nt={};if(lt.pointStyles.length){const me=lt.pointStyles[0].getText();me&&(Nt.LabelStyle=me);const Re=lt.pointStyles[0].getImage();Re&&"function"==typeof Re.getSrc&&(Nt.IconStyle=Re)}if(lt.lineStyles.length){const me=lt.lineStyles[0].getStroke();me&&(Nt.LineStyle=me)}if(lt.polyStyles.length){const me=lt.polyStyles[0].getStroke();me&&!Nt.LineStyle&&(Nt.LineStyle=me),Nt.PolyStyle=lt.polyStyles[0]}const ie=wi[gt[gt.length-1].node.namespaceURI],ce=(0,a.RA)(Nt,ie);(0,a.ZL)(yt,Qs,a.hg,ce,gt,ie)}),address:(0,a.A4)(w.bZ),description:(0,a.A4)(w.bZ),name:(0,a.A4)(w.bZ),open:(0,a.A4)(w.Vi),phoneNumber:(0,a.A4)(w.bZ),styleUrl:(0,a.A4)(w.bZ),visibility:(0,a.A4)(w.Vi)}),Ms=(0,a.C5)(M,["name","open","visibility","address","phoneNumber","description","styleUrl","Style"]),Ps=(0,a.G3)("ExtendedData");function is(Kt,lt,gt){const yt={node:Kt};lt.getId()&&Kt.setAttribute("id",lt.getId());const Nt=lt.getProperties(),Jt={address:1,description:1,name:1,open:1,phoneNumber:1,styleUrl:1,visibility:1};Jt[lt.getGeometryName()]=1;const ie=Object.keys(Nt||{}).sort().filter(function(si){return!Jt[si]}),ce=lt.getStyleFunction();if(ce){const si=ce(lt,0);if(si){const Qe=Array.isArray(si)?si:[si];let Ki=Qe;if(lt.getGeometry()&&(Ki=Qe.filter(function(ii){const vi=ii.getGeometryFunction()(lt);if(vi){const gi=vi.getType();return"GeometryCollection"===gi?vi.getGeometriesArrayRecursive().filter(function(bi){const mi=bi.getType();return"Point"===mi||"MultiPoint"===mi}).length:"Point"===gi||"MultiPoint"===gi}})),this.writeStyles_){let ii=Qe,vi=Qe;lt.getGeometry()&&(ii=Qe.filter(function(gi){const bi=gi.getGeometryFunction()(lt);if(bi){const mi=bi.getType();return"GeometryCollection"===mi?bi.getGeometriesArrayRecursive().filter(function(Tn){const qi=Tn.getType();return"LineString"===qi||"MultiLineString"===qi}).length:"LineString"===mi||"MultiLineString"===mi}}),vi=Qe.filter(function(gi){const bi=gi.getGeometryFunction()(lt);if(bi){const mi=bi.getType();return"GeometryCollection"===mi?bi.getGeometriesArrayRecursive().filter(function(Tn){const qi=Tn.getType();return"Polygon"===qi||"MultiPolygon"===qi}).length:"Polygon"===mi||"MultiPolygon"===mi}})),Nt.Style={pointStyles:Ki,lineStyles:ii,polyStyles:vi}}if(Ki.length&&void 0===Nt.name){const ii=Ki[0].getText();ii&&(Nt.name=ii.getText())}}}const Re=Ms[gt[gt.length-1].node.namespaceURI],Ne=(0,a.RA)(Nt,Re);if((0,a.ZL)(yt,es,a.hg,Ne,gt,Re),ie.length>0){const si=(0,a.RA)(Nt,ie);(0,a.ZL)(yt,es,Ps,[{names:ie,values:si}],gt)}const Xe=gt[0];let Ge=lt.getGeometry();Ge&&(Ge=(0,s.fI)(Ge,!0,Xe)),(0,a.ZL)(yt,es,Qi,[Ge],gt)}const Ts=(0,a.C5)(M,["extrude","tessellate","altitudeMode","coordinates"]),cn=(0,a.C5)(M,{extrude:(0,a.A4)(w.Vi),tessellate:(0,a.A4)(w.Vi),altitudeMode:(0,a.A4)(w.bZ),coordinates:(0,a.A4)(function Ln(Kt,lt,gt){const yt=gt[gt.length-1],Nt=yt.layout,Jt=yt.stride;let ie;if("XY"==Nt||"XYM"==Nt)ie=2;else{if("XYZ"!=Nt&&"XYZM"!=Nt)throw new Error("Invalid geometry layout");ie=3}const ce=lt.length;let me="";if(ce>0){me+=lt[0];for(let Re=1;Re<ie;++Re)me+=","+lt[Re];for(let Re=Jt;Re<ce;Re+=Jt){me+=" "+lt[Re];for(let Ne=1;Ne<ie;++Ne)me+=","+lt[Re+Ne]}}(0,w.bZ)(Kt,me)})});function Wi(Kt,lt,gt){const yt=lt.getFlatCoordinates(),Nt={node:Kt};Nt.layout=lt.getLayout(),Nt.stride=lt.getStride();const Jt=lt.getProperties();Jt.coordinates=yt;const ce=Ts[gt[gt.length-1].node.namespaceURI],me=(0,a.RA)(Jt,ce);(0,a.ZL)(Nt,cn,a.hg,me,gt,ce)}const Hs=(0,a.C5)(M,["color","fill","outline"]),ns=(0,a.C5)(M,{outerBoundaryIs:(0,a.A4)(xs),innerBoundaryIs:(0,a.A4)(xs)}),Js=(0,a.G3)("innerBoundaryIs"),ss=(0,a.G3)("outerBoundaryIs");function Zn(Kt,lt,gt){const yt=lt.getLinearRings(),Nt=yt.shift(),Jt={node:Kt};(0,a.ZL)(Jt,ns,Js,yt,gt),(0,a.ZL)(Jt,ns,ss,[Nt],gt)}const rs=(0,a.C5)(M,{color:(0,a.A4)(pi),fill:(0,a.A4)(w.Vi),outline:(0,a.A4)(w.Vi)});function Un(Kt,lt){(0,w.f3)(Kt,Math.round(1e6*lt)/1e6)}const wi=(0,a.C5)(M,["IconStyle","LabelStyle","LineStyle","PolyStyle"]),Qs=(0,a.C5)(M,{IconStyle:(0,a.A4)(function Fn(Kt,lt,gt){const yt={node:Kt},Nt={},Jt=lt.getSrc(),ie=lt.getSize(),ce=lt.getImageSize(),me={href:Jt};if(ie){me.w=ie[0],me.h=ie[1];const ii=lt.getAnchor(),vi=lt.getOrigin();vi&&ce&&0!==vi[0]&&vi[1]!==ie[1]&&(me.x=vi[0],me.y=ce[1]-(vi[1]+ie[1])),!ii||ii[0]===ie[0]/2&&ii[1]===ie[1]/2||(Nt.hotSpot={x:ii[0],xunits:"pixels",y:ie[1]-ii[1],yunits:"pixels"})}Nt.Icon=me;let Re=lt.getScaleArray()[0],Ne=ie;null===Ne&&(Ne=Rt),2==Ne.length&&(Re/=he(Ne)),1!==Re&&(Nt.scale=Re);const Xe=lt.getRotation();0!==Xe&&(Nt.heading=Xe);const Ge=lt.getColor();Ge&&(Nt.color=Ge);const Qe=hn[gt[gt.length-1].node.namespaceURI],Ki=(0,a.RA)(Nt,Qe);(0,a.ZL)(yt,Yn,a.hg,Ki,gt,Qe)}),LabelStyle:(0,a.A4)(function Hn(Kt,lt,gt){const yt={node:Kt},Nt={},Jt=lt.getFill();Jt&&(Nt.color=Jt.getColor());const ie=lt.getScale();ie&&1!==ie&&(Nt.scale=ie);const me=$n[gt[gt.length-1].node.namespaceURI],Re=(0,a.RA)(Nt,me);(0,a.ZL)(yt,Nn,a.hg,Re,gt,me)}),LineStyle:(0,a.A4)(function ys(Kt,lt,gt){const yt={node:Kt},Nt={color:lt.getColor(),width:Number(lt.getWidth())||1},ie=Jn[gt[gt.length-1].node.namespaceURI],ce=(0,a.RA)(Nt,ie);(0,a.ZL)(yt,Qn,a.hg,ce,gt,ie)}),PolyStyle:(0,a.A4)(function _n(Kt,lt,gt){const yt={node:Kt},Nt=lt.getFill(),Jt=lt.getStroke(),ie={color:Nt?Nt.getColor():void 0,fill:!!Nt&&void 0,outline:!!Jt&&void 0},me=Hs[gt[gt.length-1].node.namespaceURI],Re=(0,a.RA)(ie,me);(0,a.ZL)(yt,rs,a.hg,Re,gt,me)})}),tr=class St extends p{constructor(lt){super(),lt=lt||{},Xt||function le(){et=[255,255,255,1],H=new k.Z({color:et}),ht=[20,2],mt="pixels",xt="pixels",Rt=[64,64],at="https://maps.google.com/mapfiles/kml/pushpin/ylw-pushpin.png",pt=new $.Z({anchor:ht,anchorOrigin:"bottom-left",anchorXUnits:mt,anchorYUnits:xt,crossOrigin:"anonymous",rotation:0,scale:he(Rt),size:Rt,src:at}),Ft="NO_IMAGE",Dt=new l.Z({color:et,width:1}),Ut=new l.Z({color:[51,51,51,1],width:2}),zt=new h.Z({font:"bold 16px Helvetica",fill:H,stroke:Ut,scale:.8}),It=new n.ZP({fill:H,image:pt,text:zt,stroke:Dt,zIndex:0}),Xt=[It]}(),this.dataProjection=(0,F.U2)("EPSG:4326"),this.defaultStyle_=lt.defaultStyle?lt.defaultStyle:Xt,this.extractStyles_=void 0===lt.extractStyles||lt.extractStyles,this.writeStyles_=void 0===lt.writeStyles||lt.writeStyles,this.sharedStyles_={},this.showPointNames_=void 0===lt.showPointNames||lt.showPointNames,this.crossOrigin_=void 0!==lt.crossOrigin?lt.crossOrigin:"anonymous",this.iconUrlFunction_=lt.iconUrlFunction?lt.iconUrlFunction:ft,this.supportedMediaTypes=["application/vnd.google-earth.kml+xml"]}readDocumentOrFolder_(lt,gt){const yt=(0,a.C5)(M,{Document:(0,a.pc)(this.readDocumentOrFolder_,this),Folder:(0,a.pc)(this.readDocumentOrFolder_,this),Placemark:(0,a.Ei)(this.readPlacemark_,this),Style:this.readSharedStyle_.bind(this),StyleMap:this.readSharedStyleMap_.bind(this)}),Nt=(0,a.O)([],yt,lt,gt,this);if(Nt)return Nt}readPlacemark_(lt,gt){const yt=(0,a.O)({geometry:null},C,lt,gt,this);if(!yt)return;const Nt=new V.Z,Jt=lt.getAttribute("id");null!==Jt&&Nt.setId(Jt);const ce=yt.geometry;if(ce&&(0,s.fI)(ce,!1,gt[0]),Nt.setGeometry(ce),delete yt.geometry,this.extractStyles_){const Ne=function Lt(Kt,lt,gt,yt,Nt){return function(Jt,ie){let ce=Nt,me="",Re=[];if(ce){const Xe=Jt.getGeometry();if(Xe)if(Xe instanceof J.Z)Re=Xe.getGeometriesArrayRecursive().filter(function(Ge){const si=Ge.getType();return"Point"===si||"MultiPoint"===si}),ce=Re.length>0;else{const Ge=Xe.getType();ce="Point"===Ge||"MultiPoint"===Ge}}ce&&(me=Jt.get("name"),ce=ce&&!!me,ce&&/&[^&]+;/.test(me)&&(Ht||(Ht=document.createElement("textarea")),Ht.innerHTML=me,me=Ht.value));let Ne=gt;if(Kt?Ne=Kt:lt&&(Ne=te(lt,gt,yt)),ce){const Xe=function kt(Kt,lt){const gt=[0,0];let yt="start";const Nt=Kt.getImage();if(Nt){const ce=Nt.getSize();if(ce&&2==ce.length){const me=Nt.getScaleArray(),Re=Nt.getAnchor();gt[0]=me[0]*(ce[0]-Re[0]),gt[1]=me[1]*(ce[1]/2-Re[1]),yt="left"}}let Jt=Kt.getText();return Jt?(Jt=Jt.clone(),Jt.setFont(Jt.getFont()||zt.getFont()),Jt.setScale(Jt.getScale()||zt.getScale()),Jt.setFill(Jt.getFill()||zt.getFill()),Jt.setStroke(Jt.getStroke()||Ut)):Jt=zt.clone(),Jt.setText(lt),Jt.setOffsetX(gt[0]),Jt.setOffsetY(gt[1]),Jt.setTextAlign(yt),new n.ZP({image:Nt,text:Jt})}(Ne[0],me);return Re.length>0?(Xe.setGeometry(new J.Z(Re)),[Xe,new n.ZP({geometry:Ne[0].getGeometry(),image:null,fill:Ne[0].getFill(),stroke:Ne[0].getStroke(),text:null})].concat(Ne.slice(1))):Xe}return Ne}}(yt.Style,yt.styleUrl,this.defaultStyle_,this.sharedStyles_,this.showPointNames_);Nt.setStyle(Ne)}return delete yt.Style,Nt.setProperties(yt,!0),Nt}readSharedStyle_(lt,gt){const yt=lt.getAttribute("id");if(null!==yt){const Nt=Te.call(this,lt,gt);if(Nt){let Jt,ie=lt.baseURI;(!ie||"about:blank"==ie)&&(ie=window.location.href),Jt=ie?new URL("#"+yt,ie).href:"#"+yt,this.sharedStyles_[Jt]=Nt}}}readSharedStyleMap_(lt,gt){const yt=lt.getAttribute("id");if(null===yt)return;const Nt=W.call(this,lt,gt);if(!Nt)return;let Jt,ie=lt.baseURI;(!ie||"about:blank"==ie)&&(ie=window.location.href),Jt=ie?new URL("#"+yt,ie).href:"#"+yt,this.sharedStyles_[Jt]=Nt}readFeatureFromNode(lt,gt){return M.includes(lt.namespaceURI)&&this.readPlacemark_(lt,[this.getReadOptions(lt,gt)])||null}readFeaturesFromNode(lt,gt){if(!M.includes(lt.namespaceURI))return[];let yt;const Nt=lt.localName;if("Document"==Nt||"Folder"==Nt)return yt=this.readDocumentOrFolder_(lt,[this.getReadOptions(lt,gt)]),yt||[];if("Placemark"==Nt){const Jt=this.readPlacemark_(lt,[this.getReadOptions(lt,gt)]);return Jt?[Jt]:[]}if("kml"==Nt){yt=[];for(let Jt=lt.firstElementChild;Jt;Jt=Jt.nextElementSibling){const ie=this.readFeaturesFromNode(Jt,gt);ie&&(0,g.l7)(yt,ie)}return yt}return[]}readName(lt){if(lt){if("string"==typeof lt){const gt=(0,a.Qc)(lt);return this.readNameFromDocument(gt)}return(0,a.qk)(lt)?this.readNameFromDocument(lt):this.readNameFromNode(lt)}}readNameFromDocument(lt){for(let gt=lt.firstChild;gt;gt=gt.nextSibling)if(gt.nodeType==Node.ELEMENT_NODE){const yt=this.readNameFromNode(gt);if(yt)return yt}}readNameFromNode(lt){for(let gt=lt.firstElementChild;gt;gt=gt.nextElementSibling)if(M.includes(gt.namespaceURI)&&"name"==gt.localName)return(0,w.s2)(gt);for(let gt=lt.firstElementChild;gt;gt=gt.nextElementSibling){const yt=gt.localName;if(M.includes(gt.namespaceURI)&&("Document"==yt||"Folder"==yt||"Placemark"==yt||"kml"==yt)){const Nt=this.readNameFromNode(gt);if(Nt)return Nt}}}readNetworkLinks(lt){const gt=[];if("string"==typeof lt){const yt=(0,a.Qc)(lt);(0,g.l7)(gt,this.readNetworkLinksFromDocument(yt))}else(0,a.qk)(lt)?(0,g.l7)(gt,this.readNetworkLinksFromDocument(lt)):(0,g.l7)(gt,this.readNetworkLinksFromNode(lt));return gt}readNetworkLinksFromDocument(lt){const gt=[];for(let yt=lt.firstChild;yt;yt=yt.nextSibling)yt.nodeType==Node.ELEMENT_NODE&&(0,g.l7)(gt,this.readNetworkLinksFromNode(yt));return gt}readNetworkLinksFromNode(lt){const gt=[];for(let yt=lt.firstElementChild;yt;yt=yt.nextElementSibling)if(M.includes(yt.namespaceURI)&&"NetworkLink"==yt.localName){const Nt=(0,a.O)({},L,yt,[]);gt.push(Nt)}for(let yt=lt.firstElementChild;yt;yt=yt.nextElementSibling){const Nt=yt.localName;M.includes(yt.namespaceURI)&&("Document"==Nt||"Folder"==Nt||"kml"==Nt)&&(0,g.l7)(gt,this.readNetworkLinksFromNode(yt))}return gt}readRegion(lt){const gt=[];if("string"==typeof lt){const yt=(0,a.Qc)(lt);(0,g.l7)(gt,this.readRegionFromDocument(yt))}else(0,a.qk)(lt)?(0,g.l7)(gt,this.readRegionFromDocument(lt)):(0,g.l7)(gt,this.readRegionFromNode(lt));return gt}readRegionFromDocument(lt){const gt=[];for(let yt=lt.firstChild;yt;yt=yt.nextSibling)yt.nodeType==Node.ELEMENT_NODE&&(0,g.l7)(gt,this.readRegionFromNode(yt));return gt}readRegionFromNode(lt){const gt=[];for(let yt=lt.firstElementChild;yt;yt=yt.nextElementSibling)if(M.includes(yt.namespaceURI)&&"Region"==yt.localName){const Nt=(0,a.O)({},R,yt,[]);gt.push(Nt)}for(let yt=lt.firstElementChild;yt;yt=yt.nextElementSibling){const Nt=yt.localName;M.includes(yt.namespaceURI)&&("Document"==Nt||"Folder"==Nt||"kml"==Nt)&&(0,g.l7)(gt,this.readRegionFromNode(yt))}return gt}readCamera(lt){const gt=[];if("string"==typeof lt){const yt=(0,a.Qc)(lt);(0,g.l7)(gt,this.readCameraFromDocument(yt))}else(0,a.qk)(lt)?(0,g.l7)(gt,this.readCameraFromDocument(lt)):(0,g.l7)(gt,this.readCameraFromNode(lt));return gt}readCameraFromDocument(lt){const gt=[];for(let yt=lt.firstChild;yt;yt=yt.nextSibling)yt.nodeType===Node.ELEMENT_NODE&&(0,g.l7)(gt,this.readCameraFromNode(yt));return gt}readCameraFromNode(lt){const gt=[];for(let yt=lt.firstElementChild;yt;yt=yt.nextElementSibling)if(M.includes(yt.namespaceURI)&&"Camera"===yt.localName){const Nt=(0,a.O)({},P,yt,[]);gt.push(Nt)}for(let yt=lt.firstElementChild;yt;yt=yt.nextElementSibling){const Nt=yt.localName;M.includes(yt.namespaceURI)&&("Document"===Nt||"Folder"===Nt||"Placemark"===Nt||"kml"===Nt)&&(0,g.l7)(gt,this.readCameraFromNode(yt))}return gt}writeFeaturesNode(lt,gt){gt=this.adaptOptions(gt);const yt=(0,a.c)(M[4],"kml"),Nt="http://www.w3.org/2000/xmlns/";yt.setAttributeNS(Nt,"xmlns:gx",O[0]),yt.setAttributeNS(Nt,"xmlns:xsi",a.fJ),yt.setAttributeNS(a.fJ,"xsi:schemaLocation","http://www.opengis.net/kml/2.2 https://developers.google.com/kml/schema/kml22gx.xsd");const Jt={node:yt},ie={};lt.length>1?ie.Document=lt:1==lt.length&&(ie.Placemark=lt[0]);const ce=N[yt.namespaceURI],me=(0,a.RA)(ie,ce);return(0,a.ZL)(Jt,Q,a.hg,me,[gt],ce,this),yt}}},7670:(jt,ut,o)=>{"use strict";o.d(ut,{Z:()=>I});var V=o(9250),k=o(49),J=o(6117),$=o(8982),U=o(5872),S=o(8064),b=o(8095),T=o(8943),y=o(2658),m=o(3387),d=o(7704),l=o(6630);function h(p,E,F){if(3===p){const w={keys:[],values:[],features:[]},K=F.readVarint()+F.pos;F.readFields(s,w,K),w.length=w.features.length,w.length&&(E[w.name]=w)}}function s(p,E,F){if(15===p)E.version=F.readVarint();else if(1===p)E.name=F.readString();else if(5===p)E.extent=F.readVarint();else if(2===p)E.features.push(F.pos);else if(3===p)E.keys.push(F.readString());else if(4===p){let w=null;const K=F.readVarint()+F.pos;for(;F.pos<K;)w=1==(p=F.readVarint()>>3)?F.readString():2===p?F.readFloat():3===p?F.readDouble():4===p?F.readVarint64():5===p?F.readVarint():6===p?F.readSVarint():7===p?F.readBoolean():null;E.values.push(w)}}function f(p,E,F){if(1==p)E.id=F.readVarint();else if(2==p){const w=F.readVarint()+F.pos;for(;F.pos<w;){const K=E.layer.keys[F.readVarint()],O=E.layer.values[F.readVarint()];E.properties[K]=O}}else 3==p?E.type=F.readVarint():4==p&&(E.geometry=F.pos)}function g(p,E,F){p.pos=E.features[F];const w=p.readVarint()+p.pos,K={layer:E,type:0,properties:{}};return p.readFields(f,K,w),K}const I=class n extends V.ZP{constructor(E){super(),E=E||{},this.dataProjection=new y.Z({code:"",units:"tile-pixels"}),this.featureClass=E.featureClass?E.featureClass:m.ZP,this.geometryName_=E.geometryName,this.layerName_=E.layerName?E.layerName:"layer",this.layers_=E.layers?E.layers:null,this.idProperty_=E.idProperty,this.supportedMediaTypes=["application/vnd.mapbox-vector-tile","application/x-protobuf"]}readRawGeometry_(E,F,w,K){E.pos=F.geometry;const O=E.readVarint()+E.pos;let M=1,B=0,Y=0,C=0,L=0,A=0;for(;E.pos<O;){if(!B){const P=E.readVarint();M=7&P,B=P>>3}if(B--,1===M||2===M)Y+=E.readSVarint(),C+=E.readSVarint(),1===M&&L>A&&(K.push(L),A=L),w.push(Y,C),L+=2;else{if(7!==M)throw new Error("Invalid command found in the PBF");L>A&&(w.push(w[A],w[A+1]),L+=2)}}L>A&&(K.push(L),A=L)}createFeature_(E,F,w){const K=F.type;if(0===K)return null;let O;const M=F.properties;let B;this.idProperty_?(B=M[this.idProperty_],delete M[this.idProperty_]):B=F.id,M[this.layerName_]=F.layer.name;const Y=[],C=[];this.readRawGeometry_(E,F,Y,C);const L=function a(p,E){let F;return 1===p?F=1===E?"Point":"MultiPoint":2===p?F=1===E?"LineString":"MultiLineString":3===p&&(F="Polygon"),F}(K,C.length);if(this.featureClass===m.ZP)O=new this.featureClass(L,Y,C,2,M,B),O.transform(w.dataProjection);else{let A;if("Polygon"==L){const N=(0,l.Q3)(Y,C);A=N.length>1?new U.Z(Y,"XY",N):new T.ZP(Y,"XY",C)}else A="Point"===L?new b.Z(Y,"XY"):"LineString"===L?new k.Z(Y,"XY"):"MultiPoint"===L?new $.Z(Y,"XY"):"MultiLineString"===L?new J.Z(Y,"XY",C):null;O=new(0,this.featureClass),this.geometryName_&&O.setGeometryName(this.geometryName_);const R=(0,V.fI)(A,!1,w);O.setGeometry(R),void 0!==B&&O.setId(B),O.setProperties(M,!0)}return O}getType(){return"arraybuffer"}readFeatures(E,F){const w=this.layers_;F=this.adaptOptions(F);const K=(0,d.U2)(F.dataProjection);K.setWorldExtent(F.extent),F.dataProjection=K;const O=new S(E),M=O.readFields(h,{}),B=[];for(const Y in M){if(w&&!w.includes(Y))continue;const C=M[Y];K.setExtent(C?[0,0,C.extent,C.extent]:null);for(let A=0,P=C.length;A<P;++A){const R=g(O,C,A),N=this.createFeature_(O,R,F);null!==N&&B.push(N)}}return B}readProjection(E){return this.dataProjection}setLayers(E){this.layers_=E}}},5848:(jt,ut,o)=>{"use strict";o.d(ut,{$L:()=>b,Vi:()=>m,_E:()=>T,bZ:()=>s,ej:()=>S,f3:()=>n,fy:()=>U,s2:()=>y,ud:()=>k,v$:()=>J,xO:()=>d});var V=o(3229);function k(f){return J((0,V.Ve)(f,!1))}function J(f){const g=/^\s*(true|1)|(false|0)\s*$/.exec(f);if(g)return void 0!==g[1]||!1}function U(f){return S((0,V.Ve)(f,!1))}function S(f){const g=/^\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)\s*$/i.exec(f);if(g)return parseFloat(g[1])}function b(f){return T((0,V.Ve)(f,!1))}function T(f){const g=/^\s*(\d+)\s*$/.exec(f);if(g)return parseInt(g[1],10)}function y(f){return(0,V.Ve)(f,!1).trim()}function m(f,g){s(f,g?"1":"0")}function d(f,g){f.appendChild((0,V.Me)().createCDATASection(g))}function n(f,g){const a=g.toPrecision();f.appendChild((0,V.Me)().createTextNode(a))}function s(f,g){f.appendChild((0,V.Me)().createTextNode(g))}},5173:(jt,ut,o)=>{"use strict";o.d(ut,{Dv:()=>J,Vi:()=>S,Zn:()=>$,qe:()=>U,uX:()=>k});var V=o(5959);function k(){return!0}function J(){return!1}function $(){}function U(b){let y,m,d,T=!1;return function(){const l=Array.prototype.slice.call(arguments);return(!T||this!==d||!(0,V.fS)(l,m))&&(T=!0,d=this,m=l,y=b.apply(this,arguments)),y}}function S(b){return function T(){let y;try{y=b()}catch(m){return Promise.reject(m)}return y instanceof Promise?y:Promise.resolve(y)}()}},903:(jt,ut,o)=>{"use strict";o.d(ut,{Z:()=>m});var V=o(7438),k=o(1293),J=o(4836),$=o(77),U=o(7704),S=o(5173),b=o(4554);const T=(0,J.Ue)(),m=class y extends V.Z{constructor(){super(),this.extent_=(0,$.lJ)(),this.extentRevision_=-1,this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=0,this.simplifyTransformedInternal=(0,S.qe)((l,n,h)=>{if(!h)return this.getSimplifiedGeometry(n);const s=this.clone();return s.applyTransform(h),s.getSimplifiedGeometry(n)})}simplifyTransformed(l,n){return this.simplifyTransformedInternal(this.getRevision(),l,n)}clone(){return(0,k.O3)()}closestPointXY(l,n,h,s){return(0,k.O3)()}containsXY(l,n){const h=this.getClosestPoint([l,n]);return h[0]===l&&h[1]===n}getClosestPoint(l,n){return this.closestPointXY(l[0],l[1],n=n||[NaN,NaN],1/0),n}intersectsCoordinate(l){return this.containsXY(l[0],l[1])}computeExtent(l){return(0,k.O3)()}getExtent(l){if(this.extentRevision_!=this.getRevision()){const n=this.computeExtent(this.extent_);(isNaN(n[0])||isNaN(n[1]))&&(0,$.YN)(n),this.extentRevision_=this.getRevision()}return(0,$.EO)(this.extent_,l)}rotate(l,n){(0,k.O3)()}scale(l,n,h){(0,k.O3)()}simplify(l){return this.getSimplifiedGeometry(l*l)}getSimplifiedGeometry(l){return(0,k.O3)()}getType(){return(0,k.O3)()}applyTransform(l){(0,k.O3)()}intersectsExtent(l){return(0,k.O3)()}translate(l,n){(0,k.O3)()}transform(l,n){const h=(0,U.U2)(l),s="tile-pixels"==h.getUnits()?function(f,g,a){const I=h.getExtent(),p=h.getWorldExtent(),E=(0,$.Cr)(p)/(0,$.Cr)(I);return(0,J.qC)(T,p[0],p[3],E,-E,0,0,0),(0,b.vT)(f,0,f.length,a,T,g),(0,U.Ck)(h,n)(f,g,a)}:(0,U.Ck)(h,n);return this.applyTransform(s),this}}},4889:(jt,ut,o)=>{"use strict";o.d(ut,{Z:()=>b});var V=o(4855),k=o(903),J=o(77),$=o(3583);class U extends k.Z{constructor(y){super(),this.geometries_=y,this.changeEventsKeys_=[],this.listenGeometriesChange_()}unlistenGeometriesChange_(){this.changeEventsKeys_.forEach($.bN),this.changeEventsKeys_.length=0}listenGeometriesChange_(){const y=this.geometries_;for(let m=0,d=y.length;m<d;++m)this.changeEventsKeys_.push((0,$.oL)(y[m],V.Z.CHANGE,this.changed,this))}clone(){const y=new U(S(this.geometries_));return y.applyProperties(this),y}closestPointXY(y,m,d,l){if(l<(0,J.qf)(this.getExtent(),y,m))return l;const n=this.geometries_;for(let h=0,s=n.length;h<s;++h)l=n[h].closestPointXY(y,m,d,l);return l}containsXY(y,m){const d=this.geometries_;for(let l=0,n=d.length;l<n;++l)if(d[l].containsXY(y,m))return!0;return!1}computeExtent(y){(0,J.YN)(y);const m=this.geometries_;for(let d=0,l=m.length;d<l;++d)(0,J.l7)(y,m[d].getExtent());return y}getGeometries(){return S(this.geometries_)}getGeometriesArray(){return this.geometries_}getGeometriesArrayRecursive(){let y=[];const m=this.geometries_;for(let d=0,l=m.length;d<l;++d)m[d].getType()===this.getType()?y=y.concat(m[d].getGeometriesArrayRecursive()):y.push(m[d]);return y}getSimplifiedGeometry(y){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),y<0||0!==this.simplifiedGeometryMaxMinSquaredTolerance&&y<this.simplifiedGeometryMaxMinSquaredTolerance)return this;const m=[],d=this.geometries_;let l=!1;for(let n=0,h=d.length;n<h;++n){const s=d[n],f=s.getSimplifiedGeometry(y);m.push(f),f!==s&&(l=!0)}return l?new U(m):(this.simplifiedGeometryMaxMinSquaredTolerance=y,this)}getType(){return"GeometryCollection"}intersectsExtent(y){const m=this.geometries_;for(let d=0,l=m.length;d<l;++d)if(m[d].intersectsExtent(y))return!0;return!1}isEmpty(){return 0===this.geometries_.length}rotate(y,m){const d=this.geometries_;for(let l=0,n=d.length;l<n;++l)d[l].rotate(y,m);this.changed()}scale(y,m,d){d||(d=(0,J.qg)(this.getExtent()));const l=this.geometries_;for(let n=0,h=l.length;n<h;++n)l[n].scale(y,m,d);this.changed()}setGeometries(y){this.setGeometriesArray(S(y))}setGeometriesArray(y){this.unlistenGeometriesChange_(),this.geometries_=y,this.listenGeometriesChange_(),this.changed()}applyTransform(y){const m=this.geometries_;for(let d=0,l=m.length;d<l;++d)m[d].applyTransform(y);this.changed()}translate(y,m){const d=this.geometries_;for(let l=0,n=d.length;l<n;++l)d[l].translate(y,m);this.changed()}disposeInternal(){this.unlistenGeometriesChange_(),super.disposeInternal()}}function S(T){return T.map(y=>y.clone())}const b=U},49:(jt,ut,o)=>{"use strict";o.d(ut,{Z:()=>n});var V=o(8559),k=o(5324),J=o(77),$=o(8669),U=o(3401),S=o(5959),b=o(6669),T=o(5535),y=o(4649),m=o(8599),d=o(9941);class l extends V.ZP{constructor(s,f){super(),this.flatMidpoint_=null,this.flatMidpointRevision_=-1,this.maxDelta_=-1,this.maxDeltaRevision_=-1,void 0===f||Array.isArray(s[0])?this.setCoordinates(s,f):this.setFlatCoordinates(f,s)}appendCoordinate(s){(0,S.l7)(this.flatCoordinates,s),this.changed()}clone(){const s=new l(this.flatCoordinates.slice(),this.layout);return s.applyProperties(this),s}closestPointXY(s,f,g,a){return a<(0,J.qf)(this.getExtent(),s,f)?a:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt((0,k.Bv)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),(0,k.H$)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!1,s,f,g,a))}forEachSegment(s){return(0,b.E)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,s)}getCoordinateAtM(s,f){return"XYM"!=this.layout&&"XYZM"!=this.layout?null:(0,y.iJ)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,s,f=void 0!==f&&f)}getCoordinates(){return(0,T.Ml)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinateAt(s,f){return(0,y.WW)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,s,f,this.stride)}getLength(){return(0,d.W)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getFlatMidpoint(){return this.flatMidpointRevision_!=this.getRevision()&&(this.flatMidpoint_=this.getCoordinateAt(.5,this.flatMidpoint_??void 0),this.flatMidpointRevision_=this.getRevision()),this.flatMidpoint_}getSimplifiedGeometryInternal(s){const f=[];return f.length=(0,U.dt)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,s,f,0),new l(f,"XY")}getType(){return"LineString"}intersectsExtent(s){return(0,m.Kz)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,s)}setCoordinates(s,f){this.setLayout(f,s,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=(0,$.Sg)(this.flatCoordinates,0,s,this.stride),this.changed()}}const n=l},6117:(jt,ut,o)=>{"use strict";o.d(ut,{Z:()=>l});var V=o(49),k=o(8559),J=o(5324),$=o(77),U=o(8669),S=o(3401),b=o(5959),T=o(5535),y=o(4649),m=o(8599);class d extends k.ZP{constructor(h,s,f){if(super(),this.ends_=[],this.maxDelta_=-1,this.maxDeltaRevision_=-1,Array.isArray(h[0]))this.setCoordinates(h,s);else if(void 0!==s&&f)this.setFlatCoordinates(s,h),this.ends_=f;else{const g=h,a=[],I=[];for(let E=0,F=g.length;E<F;++E)(0,b.l7)(a,g[E].getFlatCoordinates()),I.push(a.length);const p=0===g.length?this.getLayout():g[0].getLayout();this.setFlatCoordinates(p,a),this.ends_=I}}appendLineString(h){(0,b.l7)(this.flatCoordinates,h.getFlatCoordinates().slice()),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const h=new d(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return h.applyProperties(this),h}closestPointXY(h,s,f,g){return g<(0,$.qf)(this.getExtent(),h,s)?g:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt((0,J.Af)(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),(0,J.Xl)(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!1,h,s,f,g))}getCoordinateAtM(h,s,f){return"XYM"!=this.layout&&"XYZM"!=this.layout||0===this.flatCoordinates.length?null:(0,y.dG)(this.flatCoordinates,0,this.ends_,this.stride,h,s=void 0!==s&&s,f=void 0!==f&&f)}getCoordinates(){return(0,T.o1)(this.flatCoordinates,0,this.ends_,this.stride)}getEnds(){return this.ends_}getLineString(h){return h<0||this.ends_.length<=h?null:new V.Z(this.flatCoordinates.slice(0===h?0:this.ends_[h-1],this.ends_[h]),this.layout)}getLineStrings(){const h=this.flatCoordinates,s=this.ends_,f=this.layout,g=[];let a=0;for(let I=0,p=s.length;I<p;++I){const E=s[I],F=new V.Z(h.slice(a,E),f);g.push(F),a=E}return g}getFlatMidpoints(){const h=[],s=this.flatCoordinates;let f=0;const g=this.ends_,a=this.stride;for(let I=0,p=g.length;I<p;++I){const E=g[I],F=(0,y.WW)(s,f,E,a,.5);(0,b.l7)(h,F),f=E}return h}getSimplifiedGeometryInternal(h){const s=[],f=[];return s.length=(0,S.UJ)(this.flatCoordinates,0,this.ends_,this.stride,h,s,0,f),new d(s,"XY",f)}getType(){return"MultiLineString"}intersectsExtent(h){return(0,m.AW)(this.flatCoordinates,0,this.ends_,this.stride,h)}setCoordinates(h,s){this.setLayout(s,h,2),this.flatCoordinates||(this.flatCoordinates=[]);const f=(0,U._5)(this.flatCoordinates,0,h,this.stride,this.ends_);this.flatCoordinates.length=0===f.length?0:f[f.length-1],this.changed()}}const l=d},8982:(jt,ut,o)=>{"use strict";o.d(ut,{Z:()=>y});var V=o(8095),k=o(8559),J=o(77),$=o(8669),U=o(5959),S=o(5535),b=o(6868);class T extends k.ZP{constructor(d,l){super(),l&&!Array.isArray(d[0])?this.setFlatCoordinates(l,d):this.setCoordinates(d,l)}appendPoint(d){(0,U.l7)(this.flatCoordinates,d.getFlatCoordinates()),this.changed()}clone(){const d=new T(this.flatCoordinates.slice(),this.layout);return d.applyProperties(this),d}closestPointXY(d,l,n,h){if(h<(0,J.qf)(this.getExtent(),d,l))return h;const s=this.flatCoordinates,f=this.stride;for(let g=0,a=s.length;g<a;g+=f){const I=(0,b.bI)(d,l,s[g],s[g+1]);if(I<h){h=I;for(let p=0;p<f;++p)n[p]=s[g+p];n.length=f}}return h}getCoordinates(){return(0,S.Ml)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getPoint(d){return d<0||this.flatCoordinates.length/this.stride<=d?null:new V.Z(this.flatCoordinates.slice(d*this.stride,(d+1)*this.stride),this.layout)}getPoints(){const d=this.flatCoordinates,l=this.layout,n=this.stride,h=[];for(let s=0,f=d.length;s<f;s+=n){const g=new V.Z(d.slice(s,s+n),l);h.push(g)}return h}getType(){return"MultiPoint"}intersectsExtent(d){const l=this.flatCoordinates,n=this.stride;for(let h=0,s=l.length;h<s;h+=n)if((0,J.jE)(d,l[h],l[h+1]))return!0;return!1}setCoordinates(d,l){this.setLayout(l,d,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=(0,$.Sg)(this.flatCoordinates,0,d,this.stride),this.changed()}}const y=T},5872:(jt,ut,o)=>{"use strict";o.d(ut,{Z:()=>g});var V=o(8982),k=o(8943),J=o(8559),$=o(5324),U=o(77),S=o(8669),b=o(5959),T=o(9063),y=o(5535),m=o(8599),d=o(6630),l=o(8810),n=o(1221),h=o(4790),s=o(3401);class f extends J.ZP{constructor(I,p,E){if(super(),this.endss_=[],this.flatInteriorPointsRevision_=-1,this.flatInteriorPoints_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,!E&&!Array.isArray(I[0])){const F=I,w=[],K=[];for(let O=0,M=F.length;O<M;++O){const B=F[O],Y=w.length,C=B.getEnds();for(let L=0,A=C.length;L<A;++L)C[L]+=Y;(0,b.l7)(w,B.getFlatCoordinates()),K.push(C)}p=0===F.length?this.getLayout():F[0].getLayout(),I=w,E=K}void 0!==p&&E?(this.setFlatCoordinates(p,I),this.endss_=E):this.setCoordinates(I,p)}appendPolygon(I){let p;if(this.flatCoordinates){const E=this.flatCoordinates.length;(0,b.l7)(this.flatCoordinates,I.getFlatCoordinates()),p=I.getEnds().slice();for(let F=0,w=p.length;F<w;++F)p[F]+=E}else this.flatCoordinates=I.getFlatCoordinates().slice(),p=I.getEnds().slice(),this.endss_.push();this.endss_.push(p),this.changed()}clone(){const I=this.endss_.length,p=new Array(I);for(let F=0;F<I;++F)p[F]=this.endss_[F].slice();const E=new f(this.flatCoordinates.slice(),this.layout,p);return E.applyProperties(this),E}closestPointXY(I,p,E,F){return F<(0,U.qf)(this.getExtent(),I,p)?F:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt((0,$.sD)(this.flatCoordinates,0,this.endss_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),(0,$.gI)(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,this.maxDelta_,!0,I,p,E,F))}containsXY(I,p){return(0,h.Zl)(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,I,p)}getArea(){return(0,l.Eu)(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride)}getCoordinates(I){let p;return void 0!==I?(p=this.getOrientedFlatCoordinates().slice(),(0,d.dL)(p,0,this.endss_,this.stride,I)):p=this.flatCoordinates,(0,y.ug)(p,0,this.endss_,this.stride)}getEndss(){return this.endss_}getFlatInteriorPoints(){if(this.flatInteriorPointsRevision_!=this.getRevision()){const I=(0,n.E)(this.flatCoordinates,0,this.endss_,this.stride);this.flatInteriorPoints_=(0,T.U)(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,I),this.flatInteriorPointsRevision_=this.getRevision()}return this.flatInteriorPoints_}getInteriorPoints(){return new V.Z(this.getFlatInteriorPoints().slice(),"XYM")}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const I=this.flatCoordinates;(0,d.Oj)(I,0,this.endss_,this.stride)?this.orientedFlatCoordinates_=I:(this.orientedFlatCoordinates_=I.slice(),this.orientedFlatCoordinates_.length=(0,d.dL)(this.orientedFlatCoordinates_,0,this.endss_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(I){const p=[],E=[];return p.length=(0,s.Pp)(this.flatCoordinates,0,this.endss_,this.stride,Math.sqrt(I),p,0,E),new f(p,"XY",E)}getPolygon(I){if(I<0||this.endss_.length<=I)return null;let p;if(0===I)p=0;else{const w=this.endss_[I-1];p=w[w.length-1]}const E=this.endss_[I].slice(),F=E[E.length-1];if(0!==p)for(let w=0,K=E.length;w<K;++w)E[w]-=p;return new k.ZP(this.flatCoordinates.slice(p,F),this.layout,E)}getPolygons(){const I=this.layout,p=this.flatCoordinates,E=this.endss_,F=[];let w=0;for(let K=0,O=E.length;K<O;++K){const M=E[K].slice(),B=M[M.length-1];if(0!==w)for(let C=0,L=M.length;C<L;++C)M[C]-=w;const Y=new k.ZP(p.slice(w,B),I,M);F.push(Y),w=B}return F}getType(){return"MultiPolygon"}intersectsExtent(I){return(0,m.oW)(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,I)}setCoordinates(I,p){this.setLayout(p,I,3),this.flatCoordinates||(this.flatCoordinates=[]);const E=(0,S.QT)(this.flatCoordinates,0,I,this.stride,this.endss_);if(0===E.length)this.flatCoordinates.length=0;else{const F=E[E.length-1];this.flatCoordinates.length=0===F.length?0:F[F.length-1]}this.changed()}}const g=f},8095:(jt,ut,o)=>{"use strict";o.d(ut,{Z:()=>S});var V=o(8559),k=o(77),J=o(8669),$=o(6868);class U extends V.ZP{constructor(T,y){super(),this.setCoordinates(T,y)}clone(){const T=new U(this.flatCoordinates.slice(),this.layout);return T.applyProperties(this),T}closestPointXY(T,y,m,d){const l=this.flatCoordinates,n=(0,$.bI)(T,y,l[0],l[1]);if(n<d){const h=this.stride;for(let s=0;s<h;++s)m[s]=l[s];return m.length=h,n}return d}getCoordinates(){return this.flatCoordinates.slice()}computeExtent(T){return(0,k.HK)(this.flatCoordinates,T)}getType(){return"Point"}intersectsExtent(T){return(0,k.jE)(T,this.flatCoordinates[0],this.flatCoordinates[1])}setCoordinates(T,y){this.setLayout(y,T,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=(0,J.IG)(this.flatCoordinates,0,T,this.stride),this.changed()}}const S=U},8943:(jt,ut,o)=>{"use strict";o.d(ut,{ZP:()=>g,oJ:()=>I});var V=o(8559),k=o(5324),J=o(77),$=o(8669),U=o(3401),S=o(5535),b=o(8810);class T extends V.ZP{constructor(w,K){super(),this.maxDelta_=-1,this.maxDeltaRevision_=-1,void 0===K||Array.isArray(w[0])?this.setCoordinates(w,K):this.setFlatCoordinates(K,w)}clone(){return new T(this.flatCoordinates.slice(),this.layout)}closestPointXY(w,K,O,M){return M<(0,J.qf)(this.getExtent(),w,K)?M:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt((0,k.Bv)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),(0,k.H$)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,w,K,O,M))}getArea(){return(0,b.QQ)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinates(){return(0,S.Ml)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getSimplifiedGeometryInternal(w){const K=[];return K.length=(0,U.dt)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,w,K,0),new T(K,"XY")}getType(){return"LinearRing"}intersectsExtent(w){return!1}setCoordinates(w,K){this.setLayout(K,w,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=(0,$.Sg)(this.flatCoordinates,0,w,this.stride),this.changed()}}const y=T;var m=o(8095),d=o(5959),l=o(9063),n=o(8599),h=o(6630),s=o(4790);class f extends V.ZP{constructor(w,K,O){super(),this.ends_=[],this.flatInteriorPointRevision_=-1,this.flatInteriorPoint_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,void 0!==K&&O?(this.setFlatCoordinates(K,w),this.ends_=O):this.setCoordinates(w,K)}appendLinearRing(w){this.flatCoordinates?(0,d.l7)(this.flatCoordinates,w.getFlatCoordinates()):this.flatCoordinates=w.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const w=new f(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return w.applyProperties(this),w}closestPointXY(w,K,O,M){return M<(0,J.qf)(this.getExtent(),w,K)?M:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt((0,k.Af)(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),(0,k.Xl)(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,w,K,O,M))}containsXY(w,K){return(0,s.wY)(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,w,K)}getArea(){return(0,b.KP)(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)}getCoordinates(w){let K;return void 0!==w?(K=this.getOrientedFlatCoordinates().slice(),(0,h.zX)(K,0,this.ends_,this.stride,w)):K=this.flatCoordinates,(0,S.o1)(K,0,this.ends_,this.stride)}getEnds(){return this.ends_}getFlatInteriorPoint(){if(this.flatInteriorPointRevision_!=this.getRevision()){const w=(0,J.qg)(this.getExtent());this.flatInteriorPoint_=(0,l.X)(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,w,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_}getInteriorPoint(){return new m.Z(this.getFlatInteriorPoint(),"XYM")}getLinearRingCount(){return this.ends_.length}getLinearRing(w){return w<0||this.ends_.length<=w?null:new y(this.flatCoordinates.slice(0===w?0:this.ends_[w-1],this.ends_[w]),this.layout)}getLinearRings(){const w=this.layout,K=this.flatCoordinates,O=this.ends_,M=[];let B=0;for(let Y=0,C=O.length;Y<C;++Y){const L=O[Y],A=new y(K.slice(B,L),w);M.push(A),B=L}return M}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const w=this.flatCoordinates;(0,h.$v)(w,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=w:(this.orientedFlatCoordinates_=w.slice(),this.orientedFlatCoordinates_.length=(0,h.zX)(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(w){const K=[],O=[];return K.length=(0,U.Zh)(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(w),K,0,O),new f(K,"XY",O)}getType(){return"Polygon"}intersectsExtent(w){return(0,n.ac)(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,w)}setCoordinates(w,K){this.setLayout(K,w,2),this.flatCoordinates||(this.flatCoordinates=[]);const O=(0,$._5)(this.flatCoordinates,0,w,this.stride,this.ends_);this.flatCoordinates.length=0===O.length?0:O[O.length-1],this.changed()}}const g=f;function I(F){if((0,J.xb)(F))throw new Error("Cannot create polygon from empty extent");const w=F[0],K=F[1],O=F[2],M=F[3],B=[w,K,w,M,O,M,O,K,w,K];return new f(B,"XY",[B.length])}},8559:(jt,ut,o)=>{"use strict";o.d(ut,{Kr:()=>T,Ss:()=>S,ZP:()=>y});var V=o(903),k=o(1293),J=o(77),$=o(4554);function S(m){let d;return 2==m?d="XY":3==m?d="XYZ":4==m&&(d="XYZM"),d}function b(m){let d;return"XY"==m?d=2:"XYZ"==m||"XYM"==m?d=3:"XYZM"==m&&(d=4),d}function T(m,d,l){const n=m.getFlatCoordinates();if(!n)return null;const h=m.getStride();return(0,$.vT)(n,0,n.length,h,d,l)}const y=class U extends V.Z{constructor(){super(),this.layout="XY",this.stride=2}computeExtent(d){return(0,J.GN)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,d)}getCoordinates(){return(0,k.O3)()}getFirstCoordinate(){return this.flatCoordinates.slice(0,this.stride)}getFlatCoordinates(){return this.flatCoordinates}getLastCoordinate(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)}getLayout(){return this.layout}getSimplifiedGeometry(d){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),d<0||0!==this.simplifiedGeometryMaxMinSquaredTolerance&&d<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;const l=this.getSimplifiedGeometryInternal(d);return l.getFlatCoordinates().length<this.flatCoordinates.length?l:(this.simplifiedGeometryMaxMinSquaredTolerance=d,this)}getSimplifiedGeometryInternal(d){return this}getStride(){return this.stride}setFlatCoordinates(d,l){this.stride=b(d),this.layout=d,this.flatCoordinates=l}setCoordinates(d,l){(0,k.O3)()}setLayout(d,l,n){let h;if(d)h=b(d);else{for(let s=0;s<n;++s){if(0===l.length)return this.layout="XY",void(this.stride=2);l=l[0]}h=l.length,d=S(h)}this.layout=d,this.stride=h}applyTransform(d){this.flatCoordinates&&(d(this.flatCoordinates,this.flatCoordinates,this.stride),this.changed())}rotate(d,l){const n=this.getFlatCoordinates();if(n){const h=this.getStride();(0,$.U1)(n,0,n.length,h,d,l,n),this.changed()}}scale(d,l,n){void 0===l&&(l=d),n||(n=(0,J.qg)(this.getExtent()));const h=this.getFlatCoordinates();if(h){const s=this.getStride();(0,$.bA)(h,0,h.length,s,d,l,n,h),this.changed()}}translate(d,l){const n=this.getFlatCoordinates();if(n){const h=this.getStride();(0,$.Iu)(n,0,n.length,h,d,l,n),this.changed()}}}},8810:(jt,ut,o)=>{"use strict";function V($,U,S,b){let T=0,y=$[S-b],m=$[S-b+1];for(;U<S;U+=b){const d=$[U],l=$[U+1];T+=m*d-y*l,y=d,m=l}return T/2}function k($,U,S,b){let T=0;for(let y=0,m=S.length;y<m;++y){const d=S[y];T+=V($,U,d,b),U=d}return T}function J($,U,S,b){let T=0;for(let y=0,m=S.length;y<m;++y){const d=S[y];T+=k($,U,d,b),U=d[d.length-1]}return T}o.d(ut,{Eu:()=>J,KP:()=>k,QQ:()=>V})},1221:(jt,ut,o)=>{"use strict";o.d(ut,{E:()=>k});var V=o(77);function k(J,$,U,S){const b=[];let T=(0,V.lJ)();for(let y=0,m=U.length;y<m;++y){const d=U[y];T=(0,V.GN)(J,$,d[0],S),b.push((T[0]+T[2])/2,(T[1]+T[3])/2),$=d[d.length-1]}return b}},5324:(jt,ut,o)=>{"use strict";o.d(ut,{Af:()=>$,Bv:()=>J,H$:()=>S,Xl:()=>b,gI:()=>T,sD:()=>U});var V=o(6868);function k(y,m,d,l,n,h,s){const f=y[m],g=y[m+1],a=y[d]-f,I=y[d+1]-g;let p;if(0===a&&0===I)p=m;else{const E=((n-f)*a+(h-g)*I)/(a*a+I*I);if(E>1)p=d;else{if(E>0){for(let F=0;F<l;++F)s[F]=(0,V.t7)(y[m+F],y[d+F],E);return void(s.length=l)}p=m}}for(let E=0;E<l;++E)s[E]=y[p+E];s.length=l}function J(y,m,d,l,n){let h=y[m],s=y[m+1];for(m+=l;m<d;m+=l){const f=y[m],g=y[m+1],a=(0,V.bI)(h,s,f,g);a>n&&(n=a),h=f,s=g}return n}function $(y,m,d,l,n){for(let h=0,s=d.length;h<s;++h){const f=d[h];n=J(y,m,f,l,n),m=f}return n}function U(y,m,d,l,n){for(let h=0,s=d.length;h<s;++h){const f=d[h];n=$(y,m,f,l,n),m=f[f.length-1]}return n}function S(y,m,d,l,n,h,s,f,g,a,I){if(m==d)return a;let p,E;if(0===n){if(E=(0,V.bI)(s,f,y[m],y[m+1]),E<a){for(p=0;p<l;++p)g[p]=y[m+p];return g.length=l,E}return a}I=I||[NaN,NaN];let F=m+l;for(;F<d;)if(k(y,F-l,F,l,s,f,I),E=(0,V.bI)(s,f,I[0],I[1]),E<a){for(a=E,p=0;p<l;++p)g[p]=I[p];g.length=l,F+=l}else F+=l*Math.max((Math.sqrt(E)-Math.sqrt(a))/n|0,1);if(h&&(k(y,d-l,m,l,s,f,I),E=(0,V.bI)(s,f,I[0],I[1]),E<a)){for(a=E,p=0;p<l;++p)g[p]=I[p];g.length=l}return a}function b(y,m,d,l,n,h,s,f,g,a,I){I=I||[NaN,NaN];for(let p=0,E=d.length;p<E;++p){const F=d[p];a=S(y,m,F,l,n,h,s,f,g,a,I),m=F}return a}function T(y,m,d,l,n,h,s,f,g,a,I){I=I||[NaN,NaN];for(let p=0,E=d.length;p<E;++p){const F=d[p];a=b(y,m,F,l,n,h,s,f,g,a,I),m=F[F.length-1]}return a}},4790:(jt,ut,o)=>{"use strict";o.d(ut,{TG:()=>J,Zl:()=>U,uG:()=>k,wY:()=>$});var V=o(77);function k(S,b,T,y,m){return!(0,V.H6)(m,function(l){return!J(S,b,T,y,l[0],l[1])})}function J(S,b,T,y,m,d){let l=0,n=S[T-y],h=S[T-y+1];for(;b<T;b+=y){const s=S[b],f=S[b+1];h<=d?f>d&&(s-n)*(d-h)-(m-n)*(f-h)>0&&l++:f<=d&&(s-n)*(d-h)-(m-n)*(f-h)<0&&l--,n=s,h=f}return 0!==l}function $(S,b,T,y,m,d){if(0===T.length||!J(S,b,T[0],y,m,d))return!1;for(let l=1,n=T.length;l<n;++l)if(J(S,T[l-1],T[l],y,m,d))return!1;return!0}function U(S,b,T,y,m,d){if(0===T.length)return!1;for(let l=0,n=T.length;l<n;++l){const h=T[l];if($(S,b,h,y,m,d))return!0;b=h[h.length-1]}return!1}},8669:(jt,ut,o)=>{"use strict";function V(U,S,b,T){for(let y=0,m=b.length;y<m;++y)U[S++]=b[y];return S}function k(U,S,b,T){for(let y=0,m=b.length;y<m;++y){const d=b[y];for(let l=0;l<T;++l)U[S++]=d[l]}return S}function J(U,S,b,T,y){y=y||[];let m=0;for(let d=0,l=b.length;d<l;++d){const n=k(U,S,b[d],T);y[m++]=n,S=n}return y.length=m,y}function $(U,S,b,T,y){y=y||[];let m=0;for(let d=0,l=b.length;d<l;++d){const n=J(U,S,b[d],T,y[m]);0===n.length&&(n[0]=S),y[m++]=n,S=n[n.length-1]}return y.length=m,y}o.d(ut,{IG:()=>V,QT:()=>$,Sg:()=>k,_5:()=>J})},5535:(jt,ut,o)=>{"use strict";function V($,U,S,b,T){T=void 0!==T?T:[];let y=0;for(let m=U;m<S;m+=b)T[y++]=$.slice(m,m+b);return T.length=y,T}function k($,U,S,b,T){T=void 0!==T?T:[];let y=0;for(let m=0,d=S.length;m<d;++m){const l=S[m];T[y++]=V($,U,l,b,T[y]),U=l}return T.length=y,T}function J($,U,S,b,T){T=void 0!==T?T:[];let y=0;for(let m=0,d=S.length;m<d;++m){const l=S[m];T[y++]=1===l.length&&l[0]===U?[]:k($,U,l,b,T[y]),U=l[l.length-1]}return T.length=y,T}o.d(ut,{Ml:()=>V,o1:()=>k,ug:()=>J})},9063:(jt,ut,o)=>{"use strict";o.d(ut,{U:()=>$,X:()=>J});var V=o(5959),k=o(4790);function J(U,S,b,T,y,m,d){let l,n,h,s,f,g,a;const I=y[m+1],p=[];for(let w=0,K=b.length;w<K;++w){const O=b[w];for(s=U[O-T],g=U[O-T+1],l=S;l<O;l+=T)f=U[l],a=U[l+1],(I<=g&&a<=I||g<=I&&I<=a)&&(h=(I-g)/(a-g)*(f-s)+s,p.push(h)),s=f,g=a}let E=NaN,F=-1/0;for(p.sort(V.j2),s=p[0],l=1,n=p.length;l<n;++l){f=p[l];const w=Math.abs(f-s);w>F&&(h=(s+f)/2,(0,k.wY)(U,S,b,T,h,I)&&(E=h,F=w)),s=f}return isNaN(E)&&(E=y[m]),d?(d.push(E,I,F),d):[E,I,F]}function $(U,S,b,T,y){let m=[];for(let d=0,l=b.length;d<l;++d){const n=b[d];m=J(U,S,n,T,y,2*d,m),S=n[n.length-1]}return m}},4649:(jt,ut,o)=>{"use strict";o.d(ut,{WW:()=>J,dG:()=>U,iJ:()=>$});var V=o(5959),k=o(6868);function J(S,b,T,y,m,d,l){let n,h;const s=(T-b)/y;if(1===s)n=b;else if(2===s)n=b,h=m;else if(0!==s){let f=S[b],g=S[b+1],a=0;const I=[0];for(let F=b+y;F<T;F+=y){const w=S[F],K=S[F+1];a+=Math.sqrt((w-f)*(w-f)+(K-g)*(K-g)),I.push(a),f=w,g=K}const p=m*a,E=(0,V.ry)(I,p);E<0?(h=(p-I[-E-2])/(I[-E-1]-I[-E-2]),n=b+(-E-2)*y):n=b+E*y}l=l>1?l:2,d=d||new Array(l);for(let f=0;f<l;++f)d[f]=void 0===n?NaN:void 0===h?S[n+f]:(0,k.t7)(S[n+f],S[n+y+f],h);return d}function $(S,b,T,y,m,d){if(T==b)return null;let l;if(m<S[b+y-1])return d?(l=S.slice(b,b+y),l[y-1]=m,l):null;if(S[T-1]<m)return d?(l=S.slice(T-y,T),l[y-1]=m,l):null;if(m==S[b+y-1])return S.slice(b,b+y);let n=b/y,h=T/y;for(;n<h;){const a=n+h>>1;m<S[(a+1)*y-1]?h=a:n=a+1}const s=S[n*y-1];if(m==s)return S.slice((n-1)*y,(n-1)*y+y);const g=(m-s)/(S[(n+1)*y-1]-s);l=[];for(let a=0;a<y-1;++a)l.push((0,k.t7)(S[(n-1)*y+a],S[n*y+a],g));return l.push(m),l}function U(S,b,T,y,m,d,l){if(l)return $(S,b,T[T.length-1],y,m,d);let n;if(m<S[y-1])return d?(n=S.slice(0,y),n[y-1]=m,n):null;if(S[S.length-1]<m)return d?(n=S.slice(S.length-y),n[y-1]=m,n):null;for(let h=0,s=T.length;h<s;++h){const f=T[h];if(b!=f){if(m<S[b+y-1])return null;if(m<=S[f-1])return $(S,b,f,y,m,!1);b=f}}return null}},8599:(jt,ut,o)=>{"use strict";o.d(ut,{AW:()=>U,Kz:()=>$,ac:()=>b,mV:()=>S,oW:()=>T});var V=o(77),k=o(6669),J=o(4790);function $(y,m,d,l,n){const h=(0,V.qP)((0,V.lJ)(),y,m,d,l);return!!(0,V.kK)(n,h)&&(!!((0,V.r4)(n,h)||h[0]>=n[0]&&h[2]<=n[2]||h[1]>=n[1]&&h[3]<=n[3])||(0,k.E)(y,m,d,l,function(s,f){return(0,V.I7)(n,s,f)}))}function U(y,m,d,l,n){for(let h=0,s=d.length;h<s;++h){if($(y,m,d[h],l,n))return!0;m=d[h]}return!1}function S(y,m,d,l,n){return!!($(y,m,d,l,n)||(0,J.TG)(y,m,d,l,n[0],n[1])||(0,J.TG)(y,m,d,l,n[0],n[3])||(0,J.TG)(y,m,d,l,n[2],n[1])||(0,J.TG)(y,m,d,l,n[2],n[3]))}function b(y,m,d,l,n){if(!S(y,m,d[0],l,n))return!1;if(1===d.length)return!0;for(let h=1,s=d.length;h<s;++h)if((0,J.uG)(y,d[h-1],d[h],l,n)&&!$(y,d[h-1],d[h],l,n))return!1;return!0}function T(y,m,d,l,n){for(let h=0,s=d.length;h<s;++h){const f=d[h];if(b(y,m,f,l,n))return!0;m=f[f.length-1]}return!1}},9941:(jt,ut,o)=>{"use strict";function V(J,$,U,S){let b=J[$],T=J[$+1],y=0;for(let m=$+S;m<U;m+=S){const d=J[m],l=J[m+1];y+=Math.sqrt((d-b)*(d-b)+(l-T)*(l-T)),b=d,T=l}return y}o.d(ut,{W:()=>V})},6630:(jt,ut,o)=>{"use strict";function V(T,y,m,d){for(;y<m-d;){for(let l=0;l<d;++l){const n=T[y+l];T[y+l]=T[m-d+l],T[m-d+l]=n}y+=d,m-=d}}function k(T,y,m,d){let l=0,n=T[m-d],h=T[m-d+1];for(;y<m;y+=d){const s=T[y],f=T[y+1];l+=(s-n)*(f+h),n=s,h=f}return 0===l?void 0:l>0}function J(T,y,m,d,l){l=void 0!==l&&l;for(let n=0,h=m.length;n<h;++n){const s=m[n],f=k(T,y,s,d);if(0===n){if(l&&f||!l&&!f)return!1}else if(l&&!f||!l&&f)return!1;y=s}return!0}function $(T,y,m,d,l){for(let n=0,h=m.length;n<h;++n){const s=m[n];if(!J(T,y,s,d,l))return!1;s.length&&(y=s[s.length-1])}return!0}function U(T,y,m,d,l){l=void 0!==l&&l;for(let n=0,h=m.length;n<h;++n){const s=m[n],f=k(T,y,s,d);(0===n?l&&f||!l&&!f:l&&!f||!l&&f)&&V(T,y,s,d),y=s}return y}function S(T,y,m,d,l){for(let n=0,h=m.length;n<h;++n)y=U(T,y,m[n],d,l);return y}function b(T,y){const m=[];let n,d=0,l=0;for(let h=0,s=y.length;h<s;++h){const f=y[h],g=k(T,d,f,2);if(void 0===n&&(n=g),g===n)m.push(y.slice(l,h+1));else{if(0===m.length)continue;m[m.length-1].push(y[l])}l=h+1,d=f}return m}o.d(ut,{Q3:()=>b,$v:()=>J,Oj:()=>$,zX:()=>U,dL:()=>S})},6669:(jt,ut,o)=>{"use strict";function V(k,J,$,U,S){let b;for(J+=U;J<$;J+=U)if(b=S(k.slice(J-U,J),k.slice(J,J+U)),b)return b;return!1}o.d(ut,{E:()=>V})},3401:(jt,ut,o)=>{"use strict";o.d(ut,{Pp:()=>m,UJ:()=>$,Zh:()=>y,dt:()=>J,uZ:()=>b});var V=o(6868);function J(d,l,n,h,s,f,g){const a=(n-l)/h;if(a<3){for(;l<n;l+=h)f[g++]=d[l],f[g++]=d[l+1];return g}const I=new Array(a);I[0]=1,I[a-1]=1;const p=[l,n-h];let E=0;for(;p.length>0;){const F=p.pop(),w=p.pop();let K=0;const O=d[w],M=d[w+1],B=d[F],Y=d[F+1];for(let C=w+h;C<F;C+=h){const P=(0,V.rU)(d[C],d[C+1],O,M,B,Y);P>K&&(E=C,K=P)}K>s&&(I[(E-l)/h]=1,w+h<E&&p.push(w,E),E+h<F&&p.push(E,F))}for(let F=0;F<a;++F)I[F]&&(f[g++]=d[l+F*h],f[g++]=d[l+F*h+1]);return g}function $(d,l,n,h,s,f,g,a){for(let I=0,p=n.length;I<p;++I){const E=n[I];g=J(d,l,E,h,s,f,g),a.push(g),l=E}return g}function b(d,l){return l*Math.round(d/l)}function T(d,l,n,h,s,f,g){if(l==n)return g;let p,E,a=b(d[l],s),I=b(d[l+1],s);l+=h,f[g++]=a,f[g++]=I;do{if(p=b(d[l],s),E=b(d[l+1],s),(l+=h)==n)return f[g++]=p,f[g++]=E,g}while(p==a&&E==I);for(;l<n;){const F=b(d[l],s),w=b(d[l+1],s);if(l+=h,F==p&&w==E)continue;const K=p-a,O=E-I,M=F-a,B=w-I;K*B==O*M&&(K<0&&M<K||K==M||K>0&&M>K)&&(O<0&&B<O||O==B||O>0&&B>O)?(p=F,E=w):(f[g++]=p,f[g++]=E,a=p,I=E,p=F,E=w)}return f[g++]=p,f[g++]=E,g}function y(d,l,n,h,s,f,g,a){for(let I=0,p=n.length;I<p;++I){const E=n[I];g=T(d,l,E,h,s,f,g),a.push(g),l=E}return g}function m(d,l,n,h,s,f,g,a){for(let I=0,p=n.length;I<p;++I){const E=n[I],F=[];g=y(d,l,E,h,s,f,g,F),a.push(F),l=E[E.length-1]}return g}},4554:(jt,ut,o)=>{"use strict";function V(U,S,b,T,y,m){m=m||[];let d=0;for(let l=S;l<b;l+=T){const n=U[l],h=U[l+1];m[d++]=y[0]*n+y[2]*h+y[4],m[d++]=y[1]*n+y[3]*h+y[5]}return m&&m.length!=d&&(m.length=d),m}function k(U,S,b,T,y,m,d){d=d||[];const l=Math.cos(y),n=Math.sin(y),h=m[0],s=m[1];let f=0;for(let g=S;g<b;g+=T){const a=U[g]-h,I=U[g+1]-s;d[f++]=h+a*l-I*n,d[f++]=s+a*n+I*l;for(let p=g+2;p<g+T;++p)d[f++]=U[p]}return d&&d.length!=f&&(d.length=f),d}function J(U,S,b,T,y,m,d,l){l=l||[];const n=d[0],h=d[1];let s=0;for(let f=S;f<b;f+=T){const a=U[f+1]-h;l[s++]=n+y*(U[f]-n),l[s++]=h+m*a;for(let I=f+2;I<f+T;++I)l[s++]=U[I]}return l&&l.length!=s&&(l.length=s),l}function $(U,S,b,T,y,m,d){d=d||[];let l=0;for(let n=S;n<b;n+=T){d[l++]=U[n]+y,d[l++]=U[n+1]+m;for(let h=n+2;h<n+T;++h)d[l++]=U[h]}return d&&d.length!=l&&(d.length=l),d}o.d(ut,{Iu:()=>$,U1:()=>k,bA:()=>J,vT:()=>V})},7316:(jt,ut,o)=>{"use strict";o.d(ut,{G$:()=>U,Id:()=>T,ME:()=>$,MP:()=>b,Tp:()=>y,V:()=>k,bM:()=>d,et:()=>m,tK:()=>S});const V=typeof navigator<"u"&&typeof navigator.userAgent<"u"?navigator.userAgent.toLowerCase():"",k=V.includes("firefox"),$=V.includes("safari")&&!V.includes("chrom")&&(V.includes("version/15.4")||/cpu (os|iphone os) 15_4 like mac os x/.test(V)),U=V.includes("webkit")&&!V.includes("edge"),S=V.includes("macintosh"),b=typeof devicePixelRatio<"u"?devicePixelRatio:1,T=typeof WorkerGlobalScope<"u"&&typeof OffscreenCanvas<"u"&&self instanceof WorkerGlobalScope,y=typeof Image<"u"&&Image.prototype.decode,m="function"==typeof createImageBitmap,d=function(){let l=!1;try{const n=Object.defineProperty({},"passive",{get:function(){l=!0}});window.addEventListener("_",null,n),window.removeEventListener("_",null,n)}catch{}return l}()},5168:(jt,ut,o)=>{"use strict";o.d(ut,{Z:()=>d});var V=o(7065),k=o(3295),J=o(9726),$=o(8943);const S=class U extends J.Z{constructor(n){super(),this.geometry_=null,this.element_=document.createElement("div"),this.element_.style.position="absolute",this.element_.style.pointerEvents="auto",this.element_.className="ol-box "+n,this.map_=null,this.startPixel_=null,this.endPixel_=null}disposeInternal(){this.setMap(null)}render_(){const n=this.startPixel_,h=this.endPixel_,s="px",f=this.element_.style;f.left=Math.min(n[0],h[0])+s,f.top=Math.min(n[1],h[1])+s,f.width=Math.abs(h[0]-n[0])+s,f.height=Math.abs(h[1]-n[1])+s}setMap(n){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);const h=this.element_.style;h.left="inherit",h.top="inherit",h.width="inherit",h.height="inherit"}this.map_=n,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)}setPixels(n,h){this.startPixel_=n,this.endPixel_=h,this.createOrUpdateGeometry(),this.render_()}createOrUpdateGeometry(){if(!this.map_)return;const n=this.startPixel_,h=this.endPixel_,f=[n,[n[0],h[1]],h,[h[0],n[1]]].map(this.map_.getCoordinateFromPixelInternal,this.map_);f[4]=f[0].slice(),this.geometry_?this.geometry_.setCoordinates([f]):this.geometry_=new $.ZP([f])}getGeometry(){return this.geometry_}};var b=o(2994);class y extends V.ZP{constructor(n,h,s){super(n),this.coordinate=h,this.mapBrowserEvent=s}}const d=class m extends k.Z{constructor(n){super(),this.box_=new S((n=n||{}).className||"ol-dragbox"),this.minArea_=void 0!==n.minArea?n.minArea:64,n.onBoxEnd&&(this.onBoxEnd=n.onBoxEnd),this.startPixel_=null,this.condition_=n.condition?n.condition:b.v8,this.boxEndCondition_=n.boxEndCondition?n.boxEndCondition:this.defaultBoxEndCondition}defaultBoxEndCondition(n,h,s){const f=s[0]-h[0],g=s[1]-h[1];return f*f+g*g>=this.minArea_}getGeometry(){return this.box_.getGeometry()}handleDragEvent(n){this.startPixel_&&(this.box_.setPixels(this.startPixel_,n.pixel),this.dispatchEvent(new y("boxdrag",n.coordinate,n)))}handleUpEvent(n){if(!this.startPixel_)return!1;this.box_.setMap(null);const h=this.boxEndCondition_(n,this.startPixel_,n.pixel);return h&&this.onBoxEnd(n),this.dispatchEvent(new y(h?"boxend":"boxcancel",n.coordinate,n)),!1}handleDownEvent(n){return!!this.condition_(n)&&(this.startPixel_=n.pixel,this.box_.setMap(n.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new y("boxstart",n.coordinate,n)),!0)}onBoxEnd(n){}setActive(n){n||(this.box_.setMap(null),this.startPixel_&&(this.dispatchEvent(new y("boxcancel",this.startPixel_,null)),this.startPixel_=null)),super.setActive(n)}}},5360:(jt,ut,o)=>{"use strict";o.d(ut,{ZP:()=>b,Cv:()=>U,FW:()=>S});var V=o(7438);var J=o(9644);function U(T,y,m){const d=T.getCenterInternal();d&&T.animateInternal({duration:void 0!==m?m:250,easing:J.GE,center:T.getConstrainedCenter([d[0]+y[0],d[1]+y[1]])})}function S(T,y,m,d){const l=T.getZoom();if(void 0===l)return;const n=T.getConstrainedZoom(l+y),h=T.getResolutionForZoom(n);T.getAnimating()&&T.cancelAnimations(),T.animate({resolution:h,anchor:m,duration:void 0!==d?d:250,easing:J.Vv})}const b=class $ extends V.Z{constructor(y){super(),y&&y.handleEvent&&(this.handleEvent=y.handleEvent),this.map_=null,this.setActive(!0)}getActive(){return this.get("active")}getMap(){return this.map_}handleEvent(y){return!0}setActive(y){this.set("active",y)}setMap(y){this.map_=y}}},3295:(jt,ut,o)=>{"use strict";o.d(ut,{S:()=>$,Z:()=>U});var V=o(5360),k=o(6161);function $(S){const b=S.length;let T=0,y=0;for(let m=0;m<b;m++)T+=S[m].clientX,y+=S[m].clientY;return{clientX:T/b,clientY:y/b}}const U=class J extends V.ZP{constructor(b){super(b=b||{}),b.handleDownEvent&&(this.handleDownEvent=b.handleDownEvent),b.handleDragEvent&&(this.handleDragEvent=b.handleDragEvent),b.handleMoveEvent&&(this.handleMoveEvent=b.handleMoveEvent),b.handleUpEvent&&(this.handleUpEvent=b.handleUpEvent),b.stopDown&&(this.stopDown=b.stopDown),this.handlingDownUpSequence=!1,this.targetPointers=[]}getPointerCount(){return this.targetPointers.length}handleDownEvent(b){return!1}handleDragEvent(b){}handleEvent(b){if(!b.originalEvent)return!0;let T=!1;if(this.updateTrackedPointers_(b),this.handlingDownUpSequence){if(b.type==k.Z.POINTERDRAG)this.handleDragEvent(b),b.originalEvent.preventDefault();else if(b.type==k.Z.POINTERUP){const y=this.handleUpEvent(b);this.handlingDownUpSequence=y&&this.targetPointers.length>0}}else if(b.type==k.Z.POINTERDOWN){const y=this.handleDownEvent(b);this.handlingDownUpSequence=y,T=this.stopDown(y)}else b.type==k.Z.POINTERMOVE&&this.handleMoveEvent(b);return!T}handleMoveEvent(b){}handleUpEvent(b){return!1}stopDown(b){return b}updateTrackedPointers_(b){b.activePointers&&(this.targetPointers=b.activePointers)}}},5857:(jt,ut,o)=>{"use strict";o.d(ut,{c:()=>Q});var V=o(7934),k=o(5360),J=o(6161);const U=class $ extends k.ZP{constructor(H){super(),this.delta_=(H=H||{}).delta?H.delta:1,this.duration_=void 0!==H.duration?H.duration:250}handleEvent(H){let ot=!1;if(H.type==J.Z.DBLCLICK){const ht=H.originalEvent,xt=H.coordinate,Rt=ht.shiftKey?-this.delta_:this.delta_,at=H.map.getView();(0,k.FW)(at,Rt,xt,this.duration_),ht.preventDefault(),ot=!0}return!ot}};var S=o(3295),b=o(5173),T=o(2994),y=o(9644),m=o(63);const l=class d extends S.Z{constructor(H){super({stopDown:b.Dv}),this.kinetic_=(H=H||{}).kinetic,this.lastCentroid=null,this.panning_=!1;const ot=H.condition?H.condition:(0,T.$6)(T.rM,T.Xp);this.condition_=H.onFocusOnly?(0,T.$6)(T.yZ,ot):ot,this.noKinetic_=!1}handleDragEvent(H){const ot=H.map;this.panning_||(this.panning_=!0,ot.getView().beginInteraction());const ht=this.targetPointers,mt=ot.getEventPixel((0,S.S)(ht));if(ht.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(mt[0],mt[1]),this.lastCentroid){const xt=[this.lastCentroid[0]-mt[0],mt[1]-this.lastCentroid[1]],at=H.map.getView();(0,m.bA)(xt,at.getResolution()),(0,m.U1)(xt,at.getRotation()),at.adjustCenterInternal(xt)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=mt,this.lastPointersCount_=ht.length,H.originalEvent.preventDefault()}handleUpEvent(H){const ot=H.map,ht=ot.getView();if(0===this.targetPointers.length){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){const mt=this.kinetic_.getDistance(),xt=this.kinetic_.getAngle(),Rt=ht.getCenterInternal(),at=ot.getPixelFromCoordinateInternal(Rt),pt=ot.getCoordinateFromPixelInternal([at[0]-mt*Math.cos(xt),at[1]-mt*Math.sin(xt)]);ht.animateInternal({center:ht.getConstrainedCenter(pt),duration:500,easing:y.Vv})}return this.panning_&&(this.panning_=!1,ht.endInteraction()),!1}return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0}handleDownEvent(H){if(this.targetPointers.length>0&&this.condition_(H)){const ht=H.map.getView();return this.lastCentroid=null,ht.getAnimating()&&ht.cancelAnimations(),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}return!1}};var n=o(7054);const s=class h extends S.Z{constructor(H){H=H||{},super({stopDown:b.Dv}),this.condition_=H.condition?H.condition:T.aj,this.lastAngle_=void 0,this.duration_=void 0!==H.duration?H.duration:250}handleDragEvent(H){if(!(0,T.QL)(H))return;const ot=H.map,ht=ot.getView();if(ht.getConstraints().rotation===n.h$)return;const mt=ot.getSize(),xt=H.pixel,Rt=Math.atan2(mt[1]/2-xt[1],xt[0]-mt[0]/2);void 0!==this.lastAngle_&&ht.adjustRotationInternal(-(Rt-this.lastAngle_)),this.lastAngle_=Rt}handleUpEvent(H){return!(0,T.QL)(H)||(H.map.getView().endInteraction(this.duration_),!1)}handleDownEvent(H){return!!((0,T.QL)(H)&&(0,T.v8)(H)&&this.condition_(H))&&(H.map.getView().beginInteraction(),this.lastAngle_=void 0,!0)}};var f=o(5168);const a=class g extends f.Z{constructor(H){super({condition:(H=H||{}).condition?H.condition:T.vY,className:H.className||"ol-dragzoom",minArea:H.minArea}),this.duration_=void 0!==H.duration?H.duration:200,this.out_=void 0!==H.out&&H.out}onBoxEnd(H){const ht=this.getMap().getView();let mt=this.getGeometry();if(this.out_){const xt=ht.rotatedExtentForGeometry(mt),Rt=ht.getResolutionForExtentInternal(xt),at=ht.getResolution()/Rt;mt=mt.clone(),mt.scale(at*at)}ht.fitInternal(mt,{duration:this.duration_,easing:y.Vv})}};var I=o(4855);const F=class E extends k.ZP{constructor(H){super(),H=H||{},this.defaultCondition_=function(ot){return(0,T.rM)(ot)&&(0,T.TN)(ot)},this.condition_=void 0!==H.condition?H.condition:this.defaultCondition_,this.duration_=void 0!==H.duration?H.duration:100,this.pixelDelta_=void 0!==H.pixelDelta?H.pixelDelta:128}handleEvent(H){let ot=!1;if(H.type==I.Z.KEYDOWN){const ht=H.originalEvent,mt=ht.key;if(this.condition_(H)&&("ArrowDown"==mt||"ArrowLeft"==mt||"ArrowRight"==mt||"ArrowUp"==mt)){const Rt=H.map.getView(),at=Rt.getResolution()*this.pixelDelta_;let pt=0,Mt=0;"ArrowDown"==mt?Mt=-at:"ArrowLeft"==mt?pt=-at:"ArrowRight"==mt?pt=at:Mt=at;const Ft=[pt,Mt];(0,m.U1)(Ft,Rt.getRotation()),(0,k.Cv)(Rt,Ft,this.duration_),ht.preventDefault(),ot=!0}}return!ot}},K=class w extends k.ZP{constructor(H){super(),this.condition_=(H=H||{}).condition?H.condition:function(ot){return!(0,T.a5)(ot)&&(0,T.TN)(ot)},this.delta_=H.delta?H.delta:1,this.duration_=void 0!==H.duration?H.duration:100}handleEvent(H){let ot=!1;if(H.type==I.Z.KEYDOWN||H.type==I.Z.KEYPRESS){const ht=H.originalEvent,mt=ht.key;if(this.condition_(H)&&("+"===mt||"-"===mt)){const Rt="+"===mt?this.delta_:-this.delta_,at=H.map.getView();(0,k.FW)(at,Rt,void 0,this.duration_),ht.preventDefault(),ot=!0}}return!ot}},M=class O{constructor(H,ot,ht){this.decay_=H,this.minVelocity_=ot,this.delay_=ht,this.points_=[],this.angle_=0,this.initialVelocity_=0}begin(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0}update(H,ot){this.points_.push(H,ot,Date.now())}end(){if(this.points_.length<6)return!1;const H=Date.now()-this.delay_,ot=this.points_.length-3;if(this.points_[ot+2]<H)return!1;let ht=ot-3;for(;ht>0&&this.points_[ht+2]>H;)ht-=3;const mt=this.points_[ot+2]-this.points_[ht+2];if(mt<1e3/60)return!1;const xt=this.points_[ot]-this.points_[ht],Rt=this.points_[ot+1]-this.points_[ht+1];return this.angle_=Math.atan2(Rt,xt),this.initialVelocity_=Math.sqrt(xt*xt+Rt*Rt)/mt,this.initialVelocity_>this.minVelocity_}getDistance(){return(this.minVelocity_-this.initialVelocity_)/this.decay_}getAngle(){return this.angle_}};var B=o(7316),Y=o(6868);const L=class C extends k.ZP{constructor(H){super(H=H||{}),this.totalDelta_=0,this.lastDelta_=0,this.maxDelta_=void 0!==H.maxDelta?H.maxDelta:1,this.duration_=void 0!==H.duration?H.duration:250,this.timeout_=void 0!==H.timeout?H.timeout:80,this.useAnchor_=void 0===H.useAnchor||H.useAnchor,this.constrainResolution_=void 0!==H.constrainResolution&&H.constrainResolution;const ot=H.condition?H.condition:T.Bx;this.condition_=H.onFocusOnly?(0,T.$6)(T.yZ,ot):ot,this.lastAnchor_=null,this.startTime_=void 0,this.mode_=void 0,this.trackpadEventGap_=400,this.deltaPerZoom_=300}endInteraction_(){this.trackpadTimeoutId_=void 0;const H=this.getMap();H&&H.getView().endInteraction(void 0,this.lastDelta_?this.lastDelta_>0?1:-1:0,this.lastAnchor_)}handleEvent(H){if(!this.condition_(H)||H.type!==I.Z.WHEEL)return!0;const ht=H.map,mt=H.originalEvent;let xt;if(mt.preventDefault(),this.useAnchor_&&(this.lastAnchor_=H.coordinate),H.type==I.Z.WHEEL&&(xt=mt.deltaY,B.V&&mt.deltaMode===WheelEvent.DOM_DELTA_PIXEL&&(xt/=B.MP),mt.deltaMode===WheelEvent.DOM_DELTA_LINE&&(xt*=40)),0===xt)return!1;this.lastDelta_=xt;const Rt=Date.now();void 0===this.startTime_&&(this.startTime_=Rt),(!this.mode_||Rt-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(xt)<4?"trackpad":"wheel");const at=ht.getView();if("trackpad"===this.mode_&&!at.getConstrainResolution()&&!this.constrainResolution_)return this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):(at.getAnimating()&&at.cancelAnimations(),at.beginInteraction()),this.trackpadTimeoutId_=setTimeout(this.endInteraction_.bind(this),this.timeout_),at.adjustZoom(-xt/this.deltaPerZoom_,this.lastAnchor_),this.startTime_=Rt,!1;this.totalDelta_+=xt;const pt=Math.max(this.timeout_-(Rt-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,ht),pt),!1}handleWheelZoom_(H){const ot=H.getView();ot.getAnimating()&&ot.cancelAnimations();let ht=-(0,Y.uZ)(this.totalDelta_,-this.maxDelta_*this.deltaPerZoom_,this.maxDelta_*this.deltaPerZoom_)/this.deltaPerZoom_;(ot.getConstrainResolution()||this.constrainResolution_)&&(ht=ht?ht>0?1:-1:0),(0,k.FW)(ot,ht,this.lastAnchor_,this.duration_),this.mode_=void 0,this.totalDelta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0}setMouseAnchor(H){this.useAnchor_=H,H||(this.lastAnchor_=null)}},P=class A extends S.Z{constructor(H){const ot=H=H||{};ot.stopDown||(ot.stopDown=b.Dv),super(ot),this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.threshold_=void 0!==H.threshold?H.threshold:.3,this.duration_=void 0!==H.duration?H.duration:250}handleDragEvent(H){let ot=0;const ht=this.targetPointers[0],mt=this.targetPointers[1],xt=Math.atan2(mt.clientY-ht.clientY,mt.clientX-ht.clientX);if(void 0!==this.lastAngle_){const pt=xt-this.lastAngle_;this.rotationDelta_+=pt,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),ot=pt}this.lastAngle_=xt;const Rt=H.map,at=Rt.getView();at.getConstraints().rotation!==n.h$&&(this.anchor_=Rt.getCoordinateFromPixelInternal(Rt.getEventPixel((0,S.S)(this.targetPointers))),this.rotating_&&(Rt.render(),at.adjustRotationInternal(ot,this.anchor_)))}handleUpEvent(H){return!(this.targetPointers.length<2&&(H.map.getView().endInteraction(this.duration_),1))}handleDownEvent(H){if(this.targetPointers.length>=2){const ot=H.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||ot.getView().beginInteraction(),!0}return!1}},N=class R extends S.Z{constructor(H){const ot=H=H||{};ot.stopDown||(ot.stopDown=b.Dv),super(ot),this.anchor_=null,this.duration_=void 0!==H.duration?H.duration:400,this.lastDistance_=void 0,this.lastScaleDelta_=1}handleDragEvent(H){let ot=1;const ht=this.targetPointers[0],mt=this.targetPointers[1],xt=ht.clientX-mt.clientX,Rt=ht.clientY-mt.clientY,at=Math.sqrt(xt*xt+Rt*Rt);void 0!==this.lastDistance_&&(ot=this.lastDistance_/at),this.lastDistance_=at;const pt=H.map,Mt=pt.getView();1!=ot&&(this.lastScaleDelta_=ot),this.anchor_=pt.getCoordinateFromPixelInternal(pt.getEventPixel((0,S.S)(this.targetPointers))),pt.render(),Mt.adjustResolutionInternal(ot,this.anchor_)}handleUpEvent(H){return!(this.targetPointers.length<2)||(H.map.getView().endInteraction(this.duration_,this.lastScaleDelta_>1?1:-1),!1)}handleDownEvent(H){if(this.targetPointers.length>=2){const ot=H.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||ot.getView().beginInteraction(),!0}return!1}};function Q(et){et=et||{};const H=new V.Z,ot=new M(-.005,.05,100);return(void 0===et.altShiftDragRotate||et.altShiftDragRotate)&&H.push(new s),(void 0===et.doubleClickZoom||et.doubleClickZoom)&&H.push(new U({delta:et.zoomDelta,duration:et.zoomDuration})),(void 0===et.dragPan||et.dragPan)&&H.push(new l({onFocusOnly:et.onFocusOnly,kinetic:ot})),(void 0===et.pinchRotate||et.pinchRotate)&&H.push(new P),(void 0===et.pinchZoom||et.pinchZoom)&&H.push(new N({duration:et.zoomDuration})),(void 0===et.keyboard||et.keyboard)&&(H.push(new F),H.push(new K({delta:et.zoomDelta,duration:et.zoomDuration}))),(void 0===et.mouseWheelZoom||et.mouseWheelZoom)&&H.push(new L({onFocusOnly:et.onFocusOnly,duration:et.zoomDuration})),(void 0===et.shiftDragZoom||et.shiftDragZoom)&&H.push(new a({duration:et.zoomDuration})),H}},3436:(jt,ut,o)=>{"use strict";o.d(ut,{Z:()=>b});var V=o(7438),k=o(5644),J=o(1293),$=o(9418),U=o(6868);const b=class S extends V.Z{constructor(y){super(),this.background_=y.background;const m=Object.assign({},y);"object"==typeof y.properties&&(delete m.properties,Object.assign(m,y.properties)),m[k.Z.OPACITY]=void 0!==y.opacity?y.opacity:1,(0,$.h)("number"==typeof m[k.Z.OPACITY],"Layer opacity must be a number"),m[k.Z.VISIBLE]=void 0===y.visible||y.visible,m[k.Z.Z_INDEX]=y.zIndex,m[k.Z.MAX_RESOLUTION]=void 0!==y.maxResolution?y.maxResolution:1/0,m[k.Z.MIN_RESOLUTION]=void 0!==y.minResolution?y.minResolution:0,m[k.Z.MIN_ZOOM]=void 0!==y.minZoom?y.minZoom:-1/0,m[k.Z.MAX_ZOOM]=void 0!==y.maxZoom?y.maxZoom:1/0,this.className_=void 0!==m.className?m.className:"ol-layer",delete m.className,this.setProperties(m),this.state_=null}getBackground(){return this.background_}getClassName(){return this.className_}getLayerState(y){const m=this.state_||{layer:this,managed:void 0===y||y},d=this.getZIndex();return m.opacity=(0,U.uZ)(Math.round(100*this.getOpacity())/100,0,1),m.visible=this.getVisible(),m.extent=this.getExtent(),m.zIndex=void 0!==d||m.managed?d:1/0,m.maxResolution=this.getMaxResolution(),m.minResolution=Math.max(this.getMinResolution(),0),m.minZoom=this.getMinZoom(),m.maxZoom=this.getMaxZoom(),this.state_=m,m}getLayersArray(y){return(0,J.O3)()}getLayerStatesArray(y){return(0,J.O3)()}getExtent(){return this.get(k.Z.EXTENT)}getMaxResolution(){return this.get(k.Z.MAX_RESOLUTION)}getMinResolution(){return this.get(k.Z.MIN_RESOLUTION)}getMinZoom(){return this.get(k.Z.MIN_ZOOM)}getMaxZoom(){return this.get(k.Z.MAX_ZOOM)}getOpacity(){return this.get(k.Z.OPACITY)}getSourceState(){return(0,J.O3)()}getVisible(){return this.get(k.Z.VISIBLE)}getZIndex(){return this.get(k.Z.Z_INDEX)}setBackground(y){this.background_=y,this.changed()}setExtent(y){this.set(k.Z.EXTENT,y)}setMaxResolution(y){this.set(k.Z.MAX_RESOLUTION,y)}setMinResolution(y){this.set(k.Z.MIN_RESOLUTION,y)}setMaxZoom(y){this.set(k.Z.MAX_ZOOM,y)}setMinZoom(y){this.set(k.Z.MIN_ZOOM,y)}setOpacity(y){(0,$.h)("number"==typeof y,"Layer opacity must be a number"),this.set(k.Z.OPACITY,y)}setVisible(y){this.set(k.Z.VISIBLE,y)}setZIndex(y){this.set(k.Z.Z_INDEX,y)}disposeInternal(){this.state_&&(this.state_.layer=null,this.state_=null),super.disposeInternal()}}},4658:(jt,ut,o)=>{"use strict";o.d(ut,{Z:()=>J});var V=o(377);const J=class k extends V.Z{constructor(U){super(U=U||{})}}},7414:(jt,ut,o)=>{"use strict";o.d(ut,{Z:()=>$});var V=o(377),k=o(8528);const $=class J extends V.Z{constructor(S){S=S||{};const b=Object.assign({},S);delete b.preload,delete b.useInterimTilesOnError,super(b),this.setPreload(void 0!==S.preload?S.preload:0),this.setUseInterimTilesOnError(void 0===S.useInterimTilesOnError||S.useInterimTilesOnError)}getPreload(){return this.get(k.Z.PRELOAD)}setPreload(S){this.set(k.Z.PRELOAD,S)}getUseInterimTilesOnError(){return this.get(k.Z.USE_INTERIM_TILES_ON_ERROR)}setUseInterimTilesOnError(S){this.set(k.Z.USE_INTERIM_TILES_ON_ERROR,S)}getData(S){return super.getData(S)}}},276:(jt,ut,o)=>{"use strict";o.d(ut,{Z:()=>wt});var V=o(377),k=o(3727),J=o(9032),$=o(5366),U=o(2334),S=o(9269),b=o(6803),T=o(5784),y=o(5739),m=o(9071),d=o(9432);function n(it,z,_){const Z=(0,m.Qc)(it,_);if(!(0,m.YM)(z,Z.type)){const W=(0,m.hD)(z),j=(0,m.hD)(Z.type);throw new Error(`Expected expression to be of type ${W}, got ${j}`)}return h(Z,_)}function h(it,z){if(it instanceof m.EM){if(it.type===m.Mr&&"string"==typeof it.value){const Z=(0,d.mL)(it.value);return function(){return Z}}return function(){return it.value}}const _=it.operator;switch(_){case m.AP.Number:case m.AP.String:case m.AP.Coalesce:return function s(it,z){const _=it.operator,Z=it.args.length,W=new Array(Z);for(let j=0;j<Z;++j)W[j]=h(it.args[j],z);switch(_){case m.AP.Coalesce:return j=>{for(let st=0;st<Z;++st){const dt=W[st](j);if(typeof dt<"u"&&null!==dt)return dt}throw new Error("Expected one of the values to be non-null")};case m.AP.Number:case m.AP.String:return j=>{for(let st=0;st<Z;++st){const dt=W[st](j);if(typeof dt===_)return dt}throw new Error(`Expected one of the values to be a ${_}`)};default:throw new Error(`Unsupported assertion operator ${_}`)}}(it,z);case m.AP.Get:case m.AP.Var:return function f(it,z){const Z=it.args[0].value;switch(it.operator){case m.AP.Get:return W=>W.properties[Z];case m.AP.Var:return W=>W.variables[Z];default:throw new Error(`Unsupported accessor operator ${it.operator}`)}}(it);case m.AP.Id:return Z=>Z.featureId;case m.AP.GeometryType:return Z=>Z.geometryType;case m.AP.Concat:{const Z=it.args.map(W=>h(W,z));return W=>"".concat(...Z.map(j=>j(W).toString()))}case m.AP.Resolution:return Z=>Z.resolution;case m.AP.Any:case m.AP.All:case m.AP.Between:case m.AP.In:case m.AP.Not:return function a(it,z){const _=it.operator,Z=it.args.length,W=new Array(Z);for(let j=0;j<Z;++j)W[j]=h(it.args[j],z);switch(_){case m.AP.Any:return j=>{for(let st=0;st<Z;++st)if(W[st](j))return!0;return!1};case m.AP.All:return j=>{for(let st=0;st<Z;++st)if(!W[st](j))return!1;return!0};case m.AP.Between:return j=>{const st=W[0](j),dt=W[1](j),Ot=W[2](j);return st>=dt&&st<=Ot};case m.AP.In:return j=>{const st=W[0](j);for(let dt=1;dt<Z;++dt)if(st===W[dt](j))return!0;return!1};case m.AP.Not:return j=>!W[0](j);default:throw new Error(`Unsupported logical operator ${_}`)}}(it,z);case m.AP.Equal:case m.AP.NotEqual:case m.AP.LessThan:case m.AP.LessThanOrEqualTo:case m.AP.GreaterThan:case m.AP.GreaterThanOrEqualTo:return function g(it,z){const _=it.operator,Z=h(it.args[0],z),W=h(it.args[1],z);switch(_){case m.AP.Equal:return j=>Z(j)===W(j);case m.AP.NotEqual:return j=>Z(j)!==W(j);case m.AP.LessThan:return j=>Z(j)<W(j);case m.AP.LessThanOrEqualTo:return j=>Z(j)<=W(j);case m.AP.GreaterThan:return j=>Z(j)>W(j);case m.AP.GreaterThanOrEqualTo:return j=>Z(j)>=W(j);default:throw new Error(`Unsupported comparison operator ${_}`)}}(it,z);case m.AP.Multiply:case m.AP.Divide:case m.AP.Add:case m.AP.Subtract:case m.AP.Clamp:case m.AP.Mod:case m.AP.Pow:case m.AP.Abs:case m.AP.Floor:case m.AP.Ceil:case m.AP.Round:case m.AP.Sin:case m.AP.Cos:case m.AP.Atan:case m.AP.Sqrt:return function I(it,z){const _=it.operator,Z=it.args.length,W=new Array(Z);for(let j=0;j<Z;++j)W[j]=h(it.args[j],z);switch(_){case m.AP.Multiply:return j=>{let st=1;for(let dt=0;dt<Z;++dt)st*=W[dt](j);return st};case m.AP.Divide:return j=>W[0](j)/W[1](j);case m.AP.Add:return j=>{let st=0;for(let dt=0;dt<Z;++dt)st+=W[dt](j);return st};case m.AP.Subtract:return j=>W[0](j)-W[1](j);case m.AP.Clamp:return j=>{const st=W[0](j),dt=W[1](j);if(st<dt)return dt;const Ot=W[2](j);return st>Ot?Ot:st};case m.AP.Mod:return j=>W[0](j)%W[1](j);case m.AP.Pow:return j=>Math.pow(W[0](j),W[1](j));case m.AP.Abs:return j=>Math.abs(W[0](j));case m.AP.Floor:return j=>Math.floor(W[0](j));case m.AP.Ceil:return j=>Math.ceil(W[0](j));case m.AP.Round:return j=>Math.round(W[0](j));case m.AP.Sin:return j=>Math.sin(W[0](j));case m.AP.Cos:return j=>Math.cos(W[0](j));case m.AP.Atan:return 2===Z?j=>Math.atan2(W[0](j),W[1](j)):j=>Math.atan(W[0](j));case m.AP.Sqrt:return j=>Math.sqrt(W[0](j));default:throw new Error(`Unsupported numeric operator ${_}`)}}(it,z);case m.AP.Case:return function p(it,z){const _=it.args.length,Z=new Array(_);for(let W=0;W<_;++W)Z[W]=h(it.args[W],z);return W=>{for(let j=0;j<_-1;j+=2)if(Z[j](W))return Z[j+1](W);return Z[_-1](W)}}(it,z);case m.AP.Match:return function E(it,z){const _=it.args.length,Z=new Array(_);for(let W=0;W<_;++W)Z[W]=h(it.args[W],z);return W=>{const j=Z[0](W);for(let st=1;st<_;st+=2)if(j===Z[st](W))return Z[st+1](W);return Z[_-1](W)}}(it,z);case m.AP.Interpolate:return function F(it,z){const _=it.args.length,Z=new Array(_);for(let W=0;W<_;++W)Z[W]=h(it.args[W],z);return W=>{const j=Z[0](W),st=Z[1](W);let dt,Ot;for(let Ct=2;Ct<_;Ct+=2){const Gt=Z[Ct](W);let qt=Z[Ct+1](W);const ne=Array.isArray(qt);if(ne&&(qt=(0,d.fG)(qt)),Gt>=st)return 2===Ct?qt:ne?O(j,st,dt,Ot,Gt,qt):K(j,st,dt,Ot,Gt,qt);dt=Gt,Ot=qt}return Ot}}(it,z);case m.AP.ToString:return function w(it,z){const _=it.operator,Z=it.args.length,W=new Array(Z);for(let j=0;j<Z;++j)W[j]=h(it.args[j],z);if(_===m.AP.ToString)return j=>{const st=W[0](j);return it.args[0].type===m.Mr?(0,d.BB)(st):st.toString()};throw new Error(`Unsupported convert operator ${_}`)}(it,z);default:throw new Error(`Unsupported operator ${_}`)}}function K(it,z,_,Z,W,j){const st=W-_;if(0===st)return Z;const dt=z-_;return Z+(1===it?dt/st:(Math.pow(it,dt)-1)/(Math.pow(it,st)-1))*(j-Z)}function O(it,z,_,Z,W,j){if(W-_==0)return Z;const dt=(0,d.WV)(Z),Ot=(0,d.WV)(j);let Ct=Ot[2]-dt[2];Ct>180?Ct-=360:Ct<-180&&(Ct+=360);const Gt=[K(it,z,_,dt[0],W,Ot[0]),K(it,z,_,dt[1],W,Ot[1]),dt[2]+K(it,z,_,0,W,Ct),K(it,z,_,Z[3],W,j[3])];return(0,d.Fv)((0,d.TF)(Gt))}var M=o(5269),B=o(7195);function Y(it){return!0}function L(it){const z=(0,m.Mj)(),_=it.length,Z=new Array(_);for(let st=0;st<_;++st)Z[st]=P(it[st],z);const W={variables:{},properties:{},resolution:NaN,featureId:null,geometryType:""},j=new Array(_);return function(st,dt){if(W.properties=st.getPropertiesInternal(),W.resolution=dt,z.featureId){const Ct=st.getId();W.featureId=void 0!==Ct?Ct:null}let Ot=0;for(let Ct=0;Ct<_;++Ct){const Gt=Z[Ct](W);Gt&&(j[Ot]=Gt,Ot+=1)}return j.length=Ot,j}}function P(it,z){const _=R(it,"",z),Z=N(it,"",z),W=function Q(it,z){const _="text-",Z=xt(it,_+"value",z);if(!Z)return null;const W=R(it,_,z),j=R(it,_+"background-",z),st=N(it,_,z),dt=N(it,_+"background-",z),Ot=xt(it,_+"font",z),Ct=mt(it,_+"max-angle",z),Gt=mt(it,_+"offset-x",z),qt=mt(it,_+"offset-y",z),ne=at(it,_+"overflow",z),oe=xt(it,_+"placement",z),Qt=mt(it,_+"repeat",z),ge=Wt(it,_+"scale",z),we=at(it,_+"rotate-with-view",z),Ie=mt(it,_+"rotation",z),De=xt(it,_+"align",z),je=xt(it,_+"justify",z),Ke=xt(it,_+"baseline",z),Ye=Mt(it,_+"padding",z),Ze=Vt(it,_+"declutter-mode"),Ce=new y.Z({declutterMode:Ze});return function(q){if(Ce.setText(Z(q)),W&&Ce.setFill(W(q)),j&&Ce.setBackgroundFill(j(q)),st&&Ce.setStroke(st(q)),dt&&Ce.setBackgroundStroke(dt(q)),Ot&&Ce.setFont(Ot(q)),Ct&&Ce.setMaxAngle(Ct(q)),Gt&&Ce.setOffsetX(Gt(q)),qt&&Ce.setOffsetY(qt(q)),ne&&Ce.setOverflow(ne(q)),oe){const tt=oe(q);if("point"!==tt&&"line"!==tt)throw new Error("Expected point or line for text-placement");Ce.setPlacement(tt)}if(Qt&&Ce.setRepeat(Qt(q)),ge&&Ce.setScale(ge(q)),we&&Ce.setRotateWithView(we(q)),Ie&&Ce.setRotation(Ie(q)),De){const tt=De(q);if("left"!==tt&&"center"!==tt&&"right"!==tt&&"end"!==tt&&"start"!==tt)throw new Error("Expected left, right, center, start, or end for text-align");Ce.setTextAlign(tt)}if(je){const tt=je(q);if("left"!==tt&&"right"!==tt&&"center"!==tt)throw new Error("Expected left, right, or center for text-justify");Ce.setJustify(tt)}if(Ke){const tt=Ke(q);if("bottom"!==tt&&"top"!==tt&&"middle"!==tt&&"alphabetic"!==tt&&"hanging"!==tt)throw new Error("Expected bottom, top, middle, alphabetic, or hanging for text-baseline");Ce.setTextBaseline(tt)}return Ye&&Ce.setPadding(Ye(q)),Ce}}(it,z),j=function et(it,z){return"icon-src"in it?function H(it,z){const _="icon-",Z=_+"src",W=Ht(it[Z],Z),j=Ft(it,_+"anchor",z),st=Wt(it,_+"scale",z),dt=mt(it,_+"opacity",z),Ot=Ft(it,_+"displacement",z),Ct=mt(it,_+"rotation",z),Gt=at(it,_+"rotate-with-view",z),qt=It(it,_+"anchor-origin"),ne=bt(it,_+"anchor-x-units"),oe=bt(it,_+"anchor-y-units"),Qt=function he(it,z){const _=it[z];if(void 0!==_)return St(_,z)}(it,_+"color"),ge=function rt(it,z){const _=it[z];if(void 0!==_){if("string"!=typeof _)throw new Error(`Expected a string for ${z}`);return _}}(it,_+"cross-origin"),we=function Xt(it,z){const _=it[z];if(void 0!==_)return le(_,z)}(it,_+"offset"),Ie=It(it,_+"offset-origin"),De=Ut(it,_+"width"),je=Ut(it,_+"height"),Ke=function zt(it,z){const _=it[z];if(void 0!==_){if("number"==typeof _)return(0,B.Pq)(_);if(!Array.isArray(_))throw new Error(`Expected a number or size array for ${z}`);if(2!==_.length||"number"!=typeof _[0]||"number"!=typeof _[1])throw new Error(`Expected a number or size array for ${z}`);return _}}(it,_+"size"),Ye=Vt(it,_+"declutter-mode"),Ze=new S.Z({src:W,anchorOrigin:qt,anchorXUnits:ne,anchorYUnits:oe,color:Qt,crossOrigin:ge,offset:we,offsetOrigin:Ie,height:je,width:De,size:Ke,declutterMode:Ye});return function(Ce){return dt&&Ze.setOpacity(dt(Ce)),Ot&&Ze.setDisplacement(Ot(Ce)),Ct&&Ze.setRotation(Ct(Ce)),Gt&&Ze.setRotateWithView(Gt(Ce)),st&&Ze.setScale(st(Ce)),j&&Ze.setAnchor(j(Ce)),Ze}}(it,z):"shape-points"in it?function ot(it,z){const _="shape-",Z=_+"points",W=_+"radius",j=ft(it[Z],Z),st=ft(it[W],W),dt=R(it,_,z),Ot=N(it,_,z),Ct=Wt(it,_+"scale",z),Gt=Ft(it,_+"displacement",z),qt=mt(it,_+"rotation",z),ne=at(it,_+"rotate-with-view",z),oe=Ut(it,_+"radius2"),Qt=Ut(it,_+"angle"),ge=Vt(it,_+"declutter-mode"),we=new b.Z({points:j,radius:st,radius2:oe,angle:Qt,declutterMode:ge});return function(Ie){return dt&&we.setFill(dt(Ie)),Ot&&we.setStroke(Ot(Ie)),Gt&&we.setDisplacement(Gt(Ie)),qt&&we.setRotation(qt(Ie)),ne&&we.setRotateWithView(ne(Ie)),Ct&&we.setScale(Ct(Ie)),we}}(it,z):"circle-radius"in it?function ht(it,z){const _="circle-",Z=R(it,_,z),W=N(it,_,z),j=mt(it,_+"radius",z),st=Wt(it,_+"scale",z),dt=Ft(it,_+"displacement",z),Ot=mt(it,_+"rotation",z),Ct=at(it,_+"rotate-with-view",z),Gt=Vt(it,_+"declutter-mode"),qt=new $.Z({radius:5,declutterMode:Gt});return function(ne){return j&&qt.setRadius(j(ne)),Z&&qt.setFill(Z(ne)),W&&qt.setStroke(W(ne)),dt&&qt.setDisplacement(dt(ne)),Ot&&qt.setRotation(Ot(ne)),Ct&&qt.setRotateWithView(Ct(ne)),st&&qt.setScale(st(ne)),qt}}(it,z):null}(it,z),st=mt(it,"z-index",z);if(!(_||Z||W||j||(0,M.x)(it)))throw new Error("No fill, stroke, point, or text symbolizer properties in style: "+JSON.stringify(it));const dt=new J.ZP;return function(Ot){let Ct=!0;if(_){const Gt=_(Ot);Gt&&(Ct=!1),dt.setFill(Gt)}if(Z){const Gt=Z(Ot);Gt&&(Ct=!1),dt.setStroke(Gt)}if(W){const Gt=W(Ot);Gt&&(Ct=!1),dt.setText(Gt)}if(j){const Gt=j(Ot);Gt&&(Ct=!1),dt.setImage(Gt)}return st&&dt.setZIndex(st(Ot)),Ct?null:dt}}function R(it,z,_){let Z;if(Z=z+"fill-pattern-src"in it?function Rt(it,z,_){const Z=xt(it,z+"pattern-src",_),W=Dt(it,z+"pattern-offset",_),j=Dt(it,z+"pattern-size",_),st=pt(it,z+"color",_);return function(dt){return{src:Z(dt),offset:W&&W(dt),size:j&&j(dt),color:st&&st(dt)}}}(it,z+"fill-",_):pt(it,z+"fill-color",_),!Z)return null;const W=new U.Z;return function(j){const st=Z(j);return"none"===st?null:(W.setColor(st),W)}}function N(it,z,_){const Z=mt(it,z+"stroke-width",_),W=pt(it,z+"stroke-color",_);if(!Z&&!W)return null;const j=xt(it,z+"stroke-line-cap",_),st=xt(it,z+"stroke-line-join",_),dt=Mt(it,z+"stroke-line-dash",_),Ot=mt(it,z+"stroke-line-dash-offset",_),Ct=mt(it,z+"stroke-miter-limit",_),Gt=new T.Z;return function(qt){if(W){const ne=W(qt);if("none"===ne)return null;Gt.setColor(ne)}if(Z&&Gt.setWidth(Z(qt)),j){const ne=j(qt);if("butt"!==ne&&"round"!==ne&&"square"!==ne)throw new Error("Expected butt, round, or square line cap");Gt.setLineCap(ne)}if(st){const ne=st(qt);if("bevel"!==ne&&"round"!==ne&&"miter"!==ne)throw new Error("Expected bevel, round, or miter line join");Gt.setLineJoin(ne)}return dt&&Gt.setLineDash(dt(qt)),Ot&&Gt.setLineDashOffset(Ot(qt)),Ct&&Gt.setMiterLimit(Ct(qt)),Gt}}function mt(it,z,_){if(!(z in it))return;const Z=n(it[z],m.sw,_);return function(W){return ft(Z(W),z)}}function xt(it,z,_){if(!(z in it))return null;const Z=n(it[z],m.uW,_);return function(W){return Ht(Z(W),z)}}function at(it,z,_){if(!(z in it))return null;const Z=n(it[z],m.wy,_);return function(W){const j=Z(W);if("boolean"!=typeof j)throw new Error(`Expected a boolean for ${z}`);return j}}function pt(it,z,_){if(!(z in it))return null;const Z=n(it[z],m.Mr|m.uW,_);return function(W){return St(Z(W),z)}}function Mt(it,z,_){if(!(z in it))return null;const Z=n(it[z],m.PA,_);return function(W){return le(Z(W),z)}}function Ft(it,z,_){if(!(z in it))return null;const Z=n(it[z],m.PA,_);return function(W){const j=le(Z(W),z);if(2!==j.length)throw new Error(`Expected two numbers for ${z}`);return j}}function Dt(it,z,_){if(!(z in it))return null;const Z=n(it[z],m.PA,_);return function(W){return kt(Z(W),z)}}function Wt(it,z,_){if(!(z in it))return null;const Z=n(it[z],m.PA|m.sw,_);return function(W){return function Lt(it,z){return"number"==typeof it?it:kt(it,z)}(Z(W),z)}}function Ut(it,z){const _=it[z];if(void 0!==_){if("number"!=typeof _)throw new Error(`Expected a number for ${z}`);return _}}function It(it,z){const _=it[z];if(void 0!==_){if("bottom-left"!==_&&"bottom-right"!==_&&"top-left"!==_&&"top-right"!==_)throw new Error(`Expected bottom-left, bottom-right, top-left, or top-right for ${z}`);return _}}function bt(it,z){const _=it[z];if(void 0!==_){if("pixels"!==_&&"fraction"!==_)throw new Error(`Expected pixels or fraction for ${z}`);return _}}function Vt(it,z){const _=it[z];if(void 0!==_){if("string"!=typeof _)throw new Error(`Expected a string for ${z}`);if("declutter"!==_&&"obstacle"!==_&&"none"!==_)throw new Error(`Expected declutter, obstacle, or none for ${z}`);return _}}function le(it,z){if(!Array.isArray(it))throw new Error(`Expected an array for ${z}`);const _=it.length;for(let Z=0;Z<_;++Z)if("number"!=typeof it[Z])throw new Error(`Expected an array of numbers for ${z}`);return it}function Ht(it,z){if("string"!=typeof it)throw new Error(`Expected a string for ${z}`);return it}function ft(it,z){if("number"!=typeof it)throw new Error(`Expected a number for ${z}`);return it}function St(it,z){if("string"==typeof it)return it;const _=le(it,z),Z=_.length;if(Z<3||Z>4)throw new Error(`Expected a color with 3 or 4 values for ${z}`);return _}function kt(it,z){const _=le(it,z);if(2!==_.length)throw new Error(`Expected an array of two numbers for ${z}`);return _}const wt=class Yt extends V.Z{constructor(z){z=z||{};const _=Object.assign({},z);delete _.style,delete _.renderBuffer,delete _.updateWhileAnimating,delete _.updateWhileInteracting,super(_),this.declutter_=z.declutter?String(z.declutter):void 0,this.renderBuffer_=void 0!==z.renderBuffer?z.renderBuffer:100,this.style_=null,this.styleFunction_=void 0,this.setStyle(z.style),this.updateWhileAnimating_=void 0!==z.updateWhileAnimating&&z.updateWhileAnimating,this.updateWhileInteracting_=void 0!==z.updateWhileInteracting&&z.updateWhileInteracting}getDeclutter(){return this.declutter_}getFeatures(z){return super.getFeatures(z)}getRenderBuffer(){return this.renderBuffer_}getRenderOrder(){return this.get("renderOrder")}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}getUpdateWhileAnimating(){return this.updateWhileAnimating_}getUpdateWhileInteracting(){return this.updateWhileInteracting_}renderDeclutter(z,_){const Z=this.getDeclutter();Z in z.declutter||(z.declutter[Z]=new k(9)),this.getRenderer().renderDeclutter(z,_)}setRenderOrder(z){this.set("renderOrder",z)}setStyle(z){this.style_=void 0===z?J.yF:z;const _=function Et(it){if(void 0===it)return J.yF;if(!it)return null;if("function"==typeof it||it instanceof J.ZP)return it;if(!Array.isArray(it))return L([it]);if(0===it.length)return[];const z=it.length,_=it[0];if(_ instanceof J.ZP){const W=new Array(z);for(let j=0;j<z;++j){const st=it[j];if(!(st instanceof J.ZP))throw new Error("Expected a list of style instances");W[j]=st}return W}if("style"in _){const W=new Array(z);for(let j=0;j<z;++j){const st=it[j];if(!("style"in st))throw new Error("Expected a list of rules with a style property");W[j]=st}return function C(it){const z=(0,m.Mj)(),_=function A(it,z){const _=it.length,Z=new Array(_);for(let W=0;W<_;++W){const j=it[W],st="filter"in j?n(j.filter,m.wy,z):Y;let dt;if(Array.isArray(j.style)){const Ot=j.style.length;dt=new Array(Ot);for(let Ct=0;Ct<Ot;++Ct)dt[Ct]=P(j.style[Ct],z)}else dt=[P(j.style,z)];Z[W]={filter:st,styles:dt}}return function(W){const j=[];let st=!1;for(let dt=0;dt<_;++dt)if((0,Z[dt].filter)(W)&&(!it[dt].else||!st)){st=!0;for(const Ct of Z[dt].styles){const Gt=Ct(W);Gt&&j.push(Gt)}}return j}}(it,z),Z={variables:{},properties:{},resolution:NaN,featureId:null,geometryType:""};return function(W,j){if(Z.properties=W.getPropertiesInternal(),Z.resolution=j,z.featureId){const st=W.getId();Z.featureId=void 0!==st?st:null}return z.geometryType&&(Z.geometryType=(0,m.S9)(W.getGeometry())),_(Z)}}(W)}return L(it)}(z);this.styleFunction_=null===z?void 0:(0,J.J$)(_),this.changed()}}},9895:(jt,ut,o)=>{"use strict";o.d(ut,{V:()=>l,Z:()=>s});var V=o(3436),k=o(7934),J=o(7069),$=o(7065),U=o(4855),S=o(2e3),b=o(9418),T=o(5269),y=o(77),m=o(1293),d=o(3583);class l extends $.ZP{constructor(g,a){super(g),this.layer=a}}class h extends V.Z{constructor(g){g=g||{};const a=Object.assign({},g);delete a.layers;let I=g.layers;super(a),this.layersListenerKeys_=[],this.listenerKeys_={},this.addChangeListener("layers",this.handleLayersChanged_),I?Array.isArray(I)?I=new k.Z(I.slice(),{unique:!0}):(0,b.h)("function"==typeof I.getArray,"Expected `layers` to be an array or a `Collection`"):I=new k.Z(void 0,{unique:!0}),this.setLayers(I)}handleLayerChange_(){this.changed()}handleLayersChanged_(){this.layersListenerKeys_.forEach(d.bN),this.layersListenerKeys_.length=0;const g=this.getLayers();this.layersListenerKeys_.push((0,d.oL)(g,J.Z.ADD,this.handleLayersAdd_,this),(0,d.oL)(g,J.Z.REMOVE,this.handleLayersRemove_,this));for(const I in this.listenerKeys_)this.listenerKeys_[I].forEach(d.bN);(0,T.Z)(this.listenerKeys_);const a=g.getArray();for(let I=0,p=a.length;I<p;I++){const E=a[I];this.registerLayerListeners_(E),this.dispatchEvent(new l("addlayer",E))}this.changed()}registerLayerListeners_(g){const a=[(0,d.oL)(g,S.Z.PROPERTYCHANGE,this.handleLayerChange_,this),(0,d.oL)(g,U.Z.CHANGE,this.handleLayerChange_,this)];g instanceof h&&a.push((0,d.oL)(g,"addlayer",this.handleLayerGroupAdd_,this),(0,d.oL)(g,"removelayer",this.handleLayerGroupRemove_,this)),this.listenerKeys_[(0,m.sq)(g)]=a}handleLayerGroupAdd_(g){this.dispatchEvent(new l("addlayer",g.layer))}handleLayerGroupRemove_(g){this.dispatchEvent(new l("removelayer",g.layer))}handleLayersAdd_(g){const a=g.element;this.registerLayerListeners_(a),this.dispatchEvent(new l("addlayer",a)),this.changed()}handleLayersRemove_(g){const a=g.element,I=(0,m.sq)(a);this.listenerKeys_[I].forEach(d.bN),delete this.listenerKeys_[I],this.dispatchEvent(new l("removelayer",a)),this.changed()}getLayers(){return this.get("layers")}setLayers(g){const a=this.getLayers();if(a){const I=a.getArray();for(let p=0,E=I.length;p<E;++p)this.dispatchEvent(new l("removelayer",I[p]))}this.set("layers",g)}getLayersArray(g){return g=void 0!==g?g:[],this.getLayers().forEach(function(a){a.getLayersArray(g)}),g}getLayerStatesArray(g){const a=void 0!==g?g:[],I=a.length;this.getLayers().forEach(function(F){F.getLayerStatesArray(a)});const p=this.getLayerState();let E=p.zIndex;!g&&void 0===p.zIndex&&(E=0);for(let F=I,w=a.length;F<w;F++){const K=a[F];K.opacity*=p.opacity,K.visible=K.visible&&p.visible,K.maxResolution=Math.min(K.maxResolution,p.maxResolution),K.minResolution=Math.max(K.minResolution,p.minResolution),K.minZoom=Math.max(K.minZoom,p.minZoom),K.maxZoom=Math.min(K.maxZoom,p.maxZoom),void 0!==p.extent&&(K.extent=void 0!==K.extent?(0,y.Ed)(K.extent,p.extent):p.extent),void 0===K.zIndex&&(K.zIndex=E)}return a}getSourceState(){return"ready"}}const s=h},4910:(jt,ut,o)=>{"use strict";o.d(ut,{Z:()=>$});var V=o(4658),k=o(2041);const $=class J extends V.Z{constructor(S){super(S)}createRenderer(){return new k.Z(this)}getData(S){return super.getData(S)}}},377:(jt,ut,o)=>{"use strict";o.d(ut,{Z:()=>d,j:()=>m});var V=o(3436),k=o(4855),J=o(5644),$=o(5603),U=o(5646),S=o(9418),b=o(77),T=o(3583);function m(l,n){if(!l.visible)return!1;const h=n.resolution;if(h<l.minResolution||h>=l.maxResolution)return!1;const s=n.zoom;return s>l.minZoom&&s<=l.maxZoom}const d=class y extends V.Z{constructor(n){const h=Object.assign({},n);delete h.source,super(h),this.mapPrecomposeKey_=null,this.mapRenderKey_=null,this.sourceChangeKey_=null,this.renderer_=null,this.sourceReady_=!1,this.rendered=!1,n.render&&(this.render=n.render),n.map&&this.setMap(n.map),this.addChangeListener(J.Z.SOURCE,this.handleSourcePropertyChange_),this.setSource(n.source?n.source:null)}getLayersArray(n){return(n=n||[]).push(this),n}getLayerStatesArray(n){return(n=n||[]).push(this.getLayerState()),n}getSource(){return this.get(J.Z.SOURCE)||null}getRenderSource(){return this.getSource()}getSourceState(){const n=this.getSource();return n?n.getState():"undefined"}handleSourceChange_(){this.changed(),!this.sourceReady_&&"ready"===this.getSource().getState()&&(this.sourceReady_=!0,this.dispatchEvent("sourceready"))}handleSourcePropertyChange_(){this.sourceChangeKey_&&((0,T.bN)(this.sourceChangeKey_),this.sourceChangeKey_=null),this.sourceReady_=!1;const n=this.getSource();n&&(this.sourceChangeKey_=(0,T.oL)(n,k.Z.CHANGE,this.handleSourceChange_,this),"ready"===n.getState()&&(this.sourceReady_=!0,setTimeout(()=>{this.dispatchEvent("sourceready")},0))),this.changed()}getFeatures(n){return this.renderer_?this.renderer_.getFeatures(n):Promise.resolve([])}getData(n){return this.renderer_&&this.rendered?this.renderer_.getData(n):null}isVisible(n){let h;const s=this.getMapInternal();let f;!n&&s&&(n=s.getView()),h=n instanceof U.ZP?{viewState:n.getState(),extent:n.calculateExtent()}:n,!h.layerStatesArray&&s&&(h.layerStatesArray=s.getLayerGroup().getLayerStatesArray()),f=h.layerStatesArray?h.layerStatesArray.find(a=>a.layer===this):this.getLayerState();const g=this.getExtent();return m(f,h.viewState)&&(!g||(0,b.kK)(g,h.extent))}getAttributions(n){if(!this.isVisible(n))return[];let h;const s=this.getSource();if(s&&(h=s.getAttributions()),!h)return[];let g=h(n instanceof U.ZP?n.getViewStateAndExtent():n);return Array.isArray(g)||(g=[g]),g}render(n,h){const s=this.getRenderer();return s.prepareFrame(n)?(this.rendered=!0,s.renderFrame(n,h)):null}unrender(){this.rendered=!1}getDeclutter(){}renderDeclutter(n,h){}renderDeferred(n){const h=this.getRenderer();h&&h.renderDeferred(n)}setMapInternal(n){n||this.unrender(),this.set(J.Z.MAP,n)}getMapInternal(){return this.get(J.Z.MAP)}setMap(n){this.mapPrecomposeKey_&&((0,T.bN)(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),n||this.changed(),this.mapRenderKey_&&((0,T.bN)(this.mapRenderKey_),this.mapRenderKey_=null),n&&(this.mapPrecomposeKey_=(0,T.oL)(n,$.Z.PRECOMPOSE,function(h){const f=h.frameState.layerStatesArray,g=this.getLayerState(!1);(0,S.h)(!f.some(function(a){return a.layer===g.layer}),"A layer can only be added to the map once. Use either `layer.setMap()` or `map.addLayer()`, not both."),f.push(g)},this),this.mapRenderKey_=(0,T.oL)(this,k.Z.CHANGE,n.render,n),this.changed())}setSource(n){this.set(J.Z.SOURCE,n)}getRenderer(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_}hasRenderer(){return!!this.renderer_}createRenderer(){return null}disposeInternal(){this.renderer_&&(this.renderer_.dispose(),delete this.renderer_),this.setSource(null),super.disposeInternal()}}},5644:(jt,ut,o)=>{"use strict";o.d(ut,{Z:()=>V});const V={OPACITY:"opacity",VISIBLE:"visible",EXTENT:"extent",Z_INDEX:"zIndex",MAX_RESOLUTION:"maxResolution",MIN_RESOLUTION:"minResolution",MAX_ZOOM:"maxZoom",MIN_ZOOM:"minZoom",SOURCE:"source",MAP:"map"}},5504:(jt,ut,o)=>{"use strict";o.d(ut,{Z:()=>$});var V=o(7414),k=o(930);const $=class J extends V.Z{constructor(S){super(S)}createRenderer(){return new k.Z(this)}}},8528:(jt,ut,o)=>{"use strict";o.d(ut,{Z:()=>V});const V={PRELOAD:"preload",USE_INTERIM_TILES_ON_ERROR:"useInterimTilesOnError"}},5616:(jt,ut,o)=>{"use strict";o.d(ut,{Z:()=>$});var V=o(276),k=o(9727);const $=class J extends V.Z{constructor(S){super(S)}createRenderer(){return new k.Z(this)}}},7178:(jt,ut,o)=>{"use strict";o.d(ut,{Z:()=>w});var V=o(276),k=o(1068),J=o(649),$=o(930),U=o(33),S=o(1880),b=o(413),T=o(9034),y=o(4836),m=o(5959),d=o(77),l=o(4300),n=o(1293),h=o(7195),s=o(63);const f={image:["Polygon","Circle","LineString","Image","Text"],hybrid:["Polygon","LineString"],vector:[]},g={hybrid:["Image","Text","Default"],vector:["Polygon","Circle","LineString","Image","Text","Default"]},I=class a extends $.Z{constructor(O){super(O),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.renderedPixelToCoordinateTransform_=null,this.renderedOpacity_=1,this.tmpTransform_=(0,y.Ue)(),this.tileClipContexts_=null}prepareTile(O,M,B){let Y;const C=O.getState();return(C===U.Z.LOADED||C===U.Z.ERROR)&&(this.updateExecutorGroup_(O,M,B),this.tileImageNeedsRender_(O)&&(Y=!0)),Y}getTile(O,M,B,Y){const C=Y.pixelRatio,L=Y.viewState,A=L.resolution,P=L.projection,R=this.getLayer(),N=R.getSource().getTile(O,M,B,C,P),Q=Y.viewHints,et=!(Q[S.Z.ANIMATING]||Q[S.Z.INTERACTING]);return(et||!N.wantedResolution)&&(N.wantedResolution=A),this.prepareTile(N,C,P)&&(et||Date.now()-Y.time<8)&&"vector"!==R.getRenderMode()&&this.renderTileImage_(N,Y),super.getTile(O,M,B,Y)}isDrawableTile(O){const M=this.getLayer();return super.isDrawableTile(O)&&("vector"===M.getRenderMode()?(0,n.sq)(M)in O.executorGroups:O.hasContext(M))}getTileImage(O){return O.getImage(this.getLayer())}prepareFrame(O){const M=this.getLayer().getRevision();return this.renderedLayerRevision_!==M&&(this.renderedLayerRevision_=M,this.renderedTiles.length=0),super.prepareFrame(O)}updateExecutorGroup_(O,M,B){const Y=this.getLayer(),C=Y.getRevision(),L=Y.getRenderOrder()||null,A=O.wantedResolution,P=O.getReplayState(Y);if(!P.dirty&&P.renderedResolution===A&&P.renderedRevision==C&&P.renderedRenderOrder==L)return;const R=Y.getSource(),N=!!Y.getDeclutter(),Q=R.getTileGrid(),H=R.getTileGridForProjection(B).getTileCoordExtent(O.wrappedTileCoord),ot=R.getSourceTiles(M,B,O),ht=(0,n.sq)(Y);delete O.hitDetectionImageData[ht],O.executorGroups[ht]=[],P.dirty=!1;for(let mt=0,xt=ot.length;mt<xt;++mt){const Rt=ot[mt];if(Rt.getState()!=U.Z.LOADED)continue;const pt=Q.getTileCoordExtent(Rt.tileCoord),Mt=(0,d.Ed)(H,pt),Ft=(0,d.f3)(Mt,Y.getRenderBuffer()*A,this.tmpExtent),Dt=(0,d.fS)(pt,Mt)?null:Ft,Wt=new k.Z(0,Mt,A,M),Ut=(0,l.se)(A,M),zt=function(Vt,he){let le;const Ht=Vt.getStyleFunction()||Y.getStyleFunction();if(Ht&&(le=Ht(Vt,A)),le){const ft=this.renderFeature(Vt,Ut,le,Wt,N,he);P.dirty=P.dirty||ft}},rt=Rt.getFeatures();L&&L!==P.renderedRenderOrder&&rt.sort(L);for(let Vt=0,he=rt.length;Vt<he;++Vt){const le=rt[Vt];(!Dt||(0,d.kK)(Dt,le.getGeometry().getExtent()))&&zt.call(this,le,Vt)}const It=Wt.finish(),bt="vector"!==Y.getRenderMode()&&N&&1===ot.length?null:Mt,Xt=new J.ZP(bt,A,M,R.getOverlaps(),It,Y.getRenderBuffer(),!0);O.executorGroups[ht].push(Xt)}P.renderedRevision=C,P.renderedRenderOrder=L,P.renderedResolution=A}forEachFeatureAtCoordinate(O,M,B,Y,C){const L=M.viewState.resolution,A=M.viewState.rotation;B=B??0;const P=this.getLayer(),N=P.getSource().getTileGridForProjection(M.viewState.projection),Q=(0,d.hI)([O]);(0,d.f3)(Q,L*B,Q);const et={},H=function(mt,xt,Rt){let at=mt.getId();void 0===at&&(at=(0,n.sq)(mt));const pt=et[at];if(pt){if(!0!==pt&&Rt<pt.distanceSq){if(0===Rt)return et[at]=!0,C.splice(C.lastIndexOf(pt),1),Y(mt,P,xt);pt.geometry=xt,pt.distanceSq=Rt}}else{if(0===Rt)return et[at]=!0,Y(mt,P,xt);C.push(et[at]={feature:mt,layer:P,geometry:xt,distanceSq:Rt,callback:Y})}},ot=this.renderedTiles;let ht;for(let mt=0,xt=ot.length;!ht&&mt<xt;++mt){const Rt=ot[mt],at=N.getTileCoordExtent(Rt.wrappedTileCoord);if(!(0,d.kK)(at,Q))continue;const pt=(0,n.sq)(P),Mt=[Rt.executorGroups[pt]],Ft=P.getDeclutter();Mt.some(Dt=>{const Wt=Ft?M.declutter[Ft].all().map(Ut=>Ut.value):null;for(let Ut=0,zt=Dt.length;Ut<zt;++Ut)if(ht=Dt[Ut].forEachFeatureAtCoordinate(O,L,A,B,H,Wt),ht)return!0})}return ht}getFeatures(O){return new Promise((M,B)=>{const Y=this.getLayer(),C=(0,n.sq)(Y),L=Y.getSource(),A=this.renderedProjection,P=A.getExtent(),R=this.renderedResolution,N=L.getTileGridForProjection(A),Q=(0,y.nn)(this.renderedPixelToCoordinateTransform_,O.slice()),et=N.getTileCoordForCoordAndResolution(Q,R);let H;for(let at=0,pt=this.renderedTiles.length;at<pt;++at)if(et.toString()===this.renderedTiles[at].tileCoord.toString()){if(H=this.renderedTiles[at],H.getState()===U.Z.LOADED){const Mt=N.getTileCoordExtent(H.tileCoord);L.getWrapX()&&A.canWrapX()&&!(0,d.r4)(P,Mt)&&(0,s.Cf)(Q,A);break}H=void 0}if(!H||H.loadingSourceTiles>0)return void M([]);const ot=N.getTileCoordExtent(H.wrappedTileCoord),ht=(0,d.rL)(ot),mt=[(Q[0]-ht[0])/R,(ht[1]-Q[1])/R],xt=H.getSourceTiles().reduce(function(at,pt){return at.concat(pt.getFeatures())},[]);let Rt=H.hitDetectionImageData[C];if(!Rt){const at=(0,h.Pq)(N.getTileSize(N.getZForResolution(R,L.zDirection))),pt=this.renderedRotation_,Mt=[this.getRenderTransform(N.getTileCoordCenter(H.wrappedTileCoord),R,0,T.UN,at[0]*T.UN,at[1]*T.UN,0)];Rt=(0,T.TU)(at,Mt,xt,Y.getStyleFunction(),N.getTileCoordExtent(H.wrappedTileCoord),H.getReplayState(Y).renderedResolution,pt),H.hitDetectionImageData[C]=Rt}M((0,T.ix)(mt,xt,Rt))})}handleFontsChanged(){const O=this.getLayer();O.getVisible()&&void 0!==this.renderedLayerRevision_&&O.changed()}handleStyleImageChange_(O){this.renderIfReadyAndVisible()}renderDeclutter(O,M){const B=this.context,Y=B.globalAlpha;B.globalAlpha=M.opacity;const C=O.viewHints,L=!(C[S.Z.ANIMATING]||C[S.Z.INTERACTING]),A=this.renderedTiles;for(let P=0,R=A.length;P<R;++P){const N=A[P],Q=N.executorGroups[(0,n.sq)(this.getLayer())],et=this.getLayer().getDeclutter();if(Q)for(let H=Q.length-1;H>=0;--H)Q[H].execute(this.context,[this.context.canvas.width,this.context.canvas.height],this.getTileRenderTransform(N,O),O.viewState.rotation,L,J.o5,et?O.declutter[et]:void 0)}B.globalAlpha=Y}renderDeferredInternal(O){const B=this.renderedTiles.reduce((A,P,R)=>(P.executorGroups[(0,n.sq)(this.getLayer())].forEach(N=>A.push({executorGroup:N,index:R})),A),[]),Y=B.map(({executorGroup:A})=>A.getDeferredZIndexContexts()),C={};for(let A=0,P=B.length;A<P;++A){const R=B[A].executorGroup.getDeferredZIndexContexts();for(const N in R)C[N]=!0}Object.keys(C).sort(m.j2).map(Number).forEach(A=>{Y.forEach((P,R)=>{P[A]&&(P[A].forEach(N=>{const{executorGroup:Q,index:et}=B[R],H=Q.getRenderedContext(),ot=H.globalAlpha;H.globalAlpha=this.renderedOpacity_;const ht=this.tileClipContexts_[et];ht&&ht.draw(H),N.draw(H),ht&&H.restore(),H.globalAlpha=ot,N.clear()}),P[A].length=0)})})}getTileRenderTransform(O,M){const B=M.pixelRatio,Y=M.viewState,C=Y.center,L=Y.resolution,A=Y.rotation,P=M.size,R=Math.round(P[0]*B),N=Math.round(P[1]*B),et=this.getLayer().getSource().getTileGridForProjection(M.viewState.projection),H=O.tileCoord,ot=et.getTileCoordExtent(O.wrappedTileCoord),ht=et.getTileCoordExtent(H,this.tmpExtent)[0]-ot[0];return(0,y.Jp)((0,y.bA)(this.inversePixelTransform.slice(),1/B,1/B),this.getRenderTransform(C,L,A,B,R,N,ht))}postRender(O,M){const B=M.viewHints,Y=!(B[S.Z.ANIMATING]||B[S.Z.INTERACTING]);this.renderedPixelToCoordinateTransform_=M.pixelToCoordinateTransform.slice(),this.renderedRotation_=M.viewState.rotation,this.renderedOpacity_=M.layerStatesArray[M.layerIndex].opacity;const C=this.getLayer(),L=C.getRenderMode(),A=O.globalAlpha;O.globalAlpha=this.renderedOpacity_;const P=C.getDeclutter(),R=P?g[L].filter(pt=>!J.o5.includes(pt)):g[L],N=M.viewState,Q=N.rotation,et=C.getSource(),ot=et.getTileGridForProjection(N.projection).getZForResolution(N.resolution,et.zDirection),ht=this.renderedTiles,mt=[],xt=[],Rt=[];let at=!0;for(let pt=ht.length-1;pt>=0;--pt){const Mt=ht[pt];at=at&&!Mt.getReplayState(C).dirty;const Ft=Mt.executorGroups[(0,n.sq)(C)].filter(bt=>bt.hasExecutors(R));if(0===Ft.length)continue;const Dt=this.getTileRenderTransform(Mt,M),Wt=Mt.tileCoord[0];let Ut=!1;const zt=Ft[0].getClipCoords(Dt);let It,rt=O;if(zt){It=new b.Z,rt=It.getContext();for(let bt=0,Xt=mt.length;bt<Xt;++bt)if(ot!==Wt&&Wt<xt[bt]){const Vt=mt[bt];(0,d.kK)([zt[0],zt[3],zt[4],zt[7]],[Vt[0],Vt[3],Vt[4],Vt[7]])&&(Ut||(rt.save(),Ut=!0),rt.beginPath(),rt.moveTo(zt[0],zt[1]),rt.lineTo(zt[2],zt[3]),rt.lineTo(zt[4],zt[5]),rt.lineTo(zt[6],zt[7]),rt.moveTo(Vt[6],Vt[7]),rt.lineTo(Vt[4],Vt[5]),rt.lineTo(Vt[2],Vt[3]),rt.lineTo(Vt[0],Vt[1]),rt.clip())}mt.push(zt),xt.push(Wt)}for(let bt=0,Xt=Ft.length;bt<Xt;++bt)Ft[bt].execute(O,[O.canvas.width,O.canvas.height],Dt,Q,Y,R,M.declutter?.[P]);Ut&&(rt===O?rt.restore():Rt[pt]=It)}O.globalAlpha=A,this.ready=at,this.tileClipContexts_=Rt,M.declutter||this.renderDeferredInternal(M),super.postRender(O,M)}renderFeature(O,M,B,Y,C,L){if(!B)return!1;let A=!1;if(Array.isArray(B))for(let P=0,R=B.length;P<R;++P)A=(0,l.Pn)(Y,O,B[P],M,this.boundHandleStyleImageChange_,void 0,C,L)||A;else A=(0,l.Pn)(Y,O,B,M,this.boundHandleStyleImageChange_,void 0,C,L);return A}tileImageNeedsRender_(O){const M=this.getLayer();if("vector"===M.getRenderMode())return!1;const B=O.getReplayState(M),Y=M.getRevision();return B.renderedTileResolution!==O.wantedResolution||B.renderedTileRevision!==Y}renderTileImage_(O,M){const B=this.getLayer(),Y=O.getReplayState(B),C=B.getRevision(),L=O.executorGroups[(0,n.sq)(B)];Y.renderedTileRevision=C;const A=O.wrappedTileCoord,P=A[0],R=B.getSource();let N=M.pixelRatio;const et=M.viewState.projection,H=R.getTileGridForProjection(et),ot=H.getResolution(O.tileCoord[0]),ht=M.pixelRatio/O.wantedResolution*ot,mt=H.getResolution(P),xt=O.getContext(B);N=Math.round(Math.max(N,ht/N));const Rt=R.getTilePixelSize(P,N,et);xt.canvas.width=Rt[0],xt.canvas.height=Rt[1];const at=N/ht;if(1!==at){const Dt=(0,y.mc)(this.tmpTransform_);(0,y.bA)(Dt,at,at),xt.setTransform.apply(xt,Dt)}const pt=H.getTileCoordExtent(A,this.tmpExtent),Mt=ht/mt,Ft=(0,y.mc)(this.tmpTransform_);(0,y.bA)(Ft,Mt,-Mt),(0,y.Iu)(Ft,-pt[0],-pt[3]);for(let Dt=0,Wt=L.length;Dt<Wt;++Dt)L[Dt].execute(xt,[xt.canvas.width*at,xt.canvas.height*at],Ft,0,!0,f[B.getRenderMode()],null);Y.renderedTileResolution=O.wantedResolution}};var p=o(8528),E=o(9418);const w=class F extends V.Z{constructor(O){O=O||{};const M=Object.assign({},O);delete M.preload,delete M.useInterimTilesOnError,super(M);const B=O.renderMode||"hybrid";(0,E.h)("hybrid"==B||"vector"==B,"`renderMode` must be `'hybrid'` or `'vector'`"),this.renderMode_=B,this.setPreload(O.preload?O.preload:0),this.setUseInterimTilesOnError(void 0===O.useInterimTilesOnError||O.useInterimTilesOnError)}createRenderer(){return new I(this)}getFeatures(O){return super.getFeatures(O)}getRenderMode(){return this.renderMode_}getPreload(){return this.get(p.Z.PRELOAD)}getUseInterimTilesOnError(){return this.get(p.Z.USE_INTERIM_TILES_ON_ERROR)}setPreload(O){this.set(p.Z.PRELOAD,O)}setUseInterimTilesOnError(O){this.set(p.Z.USE_INTERIM_TILES_ON_ERROR,O)}}},133:(jt,ut,o)=>{"use strict";function k(U,S){return[[-1/0,-1/0,1/0,1/0]]}function J(U,S){return[U]}o.d(ut,{$6:()=>k,VW:()=>J}),o(7704)},6868:(jt,ut,o)=>{"use strict";function V(n,h,s){return Math.min(Math.max(n,h),s)}function k(n,h,s,f,g,a){const I=g-s,p=a-f;if(0!==I||0!==p){const E=((n-s)*I+(h-f)*p)/(I*I+p*p);E>1?(s=g,f=a):E>0&&(s+=I*E,f+=p*E)}return J(n,h,s,f)}function J(n,h,s,f){const g=s-n,a=f-h;return g*g+a*a}function $(n){const h=n.length;for(let f=0;f<h;f++){let g=f,a=Math.abs(n[f][f]);for(let p=f+1;p<h;p++){const E=Math.abs(n[p][f]);E>a&&(a=E,g=p)}if(0===a)return null;const I=n[g];n[g]=n[f],n[f]=I;for(let p=f+1;p<h;p++){const E=-n[p][f]/n[f][f];for(let F=f;F<h+1;F++)f==F?n[p][F]=0:n[p][F]+=E*n[f][F]}}const s=new Array(h);for(let f=h-1;f>=0;f--){s[f]=n[f][h]/n[f][f];for(let g=f-1;g>=0;g--)n[g][h]-=n[g][f]*s[f]}return s}function S(n){return n*Math.PI/180}function b(n,h){const s=n%h;return s*h<0?s+h:s}function T(n,h,s){return n+s*(h-n)}function y(n,h){const s=Math.pow(10,h);return Math.round(n*s)/s}function m(n,h){return Math.round(y(n,h))}function d(n,h){return Math.floor(y(n,h))}function l(n,h){return Math.ceil(y(n,h))}o.d(ut,{$W:()=>b,FH:()=>y,GW:()=>d,NM:()=>m,SV:()=>$,Yr:()=>S,bI:()=>J,mD:()=>l,rU:()=>k,t7:()=>T,uZ:()=>V})},5269:(jt,ut,o)=>{"use strict";function V(J){for(const $ in J)delete J[$]}function k(J){let $;for($ in J)return!1;return!$}o.d(ut,{Z:()=>V,x:()=>k})},9389:(jt,ut,o)=>{"use strict";o.d(ut,{Z:()=>V});const V={POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"}},7704:(jt,ut,o)=>{"use strict";o.d(ut,{Wm:()=>f.W,kv:()=>V.Z,zY:()=>Ft,rM:()=>xt,Sx:()=>H,UQ:()=>pt,uA:()=>wt,h_:()=>N,OP:()=>Ut,mi:()=>Dt,Vs:()=>kt,dY:()=>te,U2:()=>ht,_Q:()=>mt,Ck:()=>rt,WO:()=>zt,Cs:()=>Ht,gD:()=>et,lO:()=>St,Fj:()=>Lt,on:()=>Yt,vs:()=>It,$A:()=>bt});var V=o(2658);const k=6378137,J=Math.PI*k,$=[-J,-J,J,J],U=[-180,-85,180,85],S=k*Math.log(Math.tan(Math.PI/2));class b extends V.Z{constructor(_){super({code:_,units:"m",extent:$,global:!0,worldExtent:U,getPointResolution:function(Z,W){return Z/Math.cosh(W[1]/k)}})}}const T=[new b("EPSG:3857"),new b("EPSG:102100"),new b("EPSG:102113"),new b("EPSG:900913"),new b("http://www.opengis.net/def/crs/EPSG/0/3857"),new b("http://www.opengis.net/gml/srs/epsg.xml#3857")];function y(z,_,Z){const W=z.length;Z=Z>1?Z:2,void 0===_&&(_=Z>2?z.slice():new Array(W));for(let j=0;j<W;j+=Z){_[j]=J*z[j]/180;let st=k*Math.log(Math.tan(Math.PI*(+z[j+1]+90)/360));st>S?st=S:st<-S&&(st=-S),_[j+1]=st}return _}function m(z,_,Z){const W=z.length;Z=Z>1?Z:2,void 0===_&&(_=Z>2?z.slice():new Array(W));for(let j=0;j<W;j+=Z)_[j]=180*z[j]/J,_[j+1]=360*Math.atan(Math.exp(z[j+1]/k))/Math.PI-90;return _}const l=[-180,-90,180,90],n=6378137*Math.PI/180;class h extends V.Z{constructor(_,Z){super({code:_,units:"degrees",extent:l,axisOrientation:Z,global:!0,metersPerUnit:n,worldExtent:l})}}const s=[new h("CRS:84"),new h("EPSG:4326","neu"),new h("urn:ogc:def:crs:OGC:1.3:CRS84"),new h("urn:ogc:def:crs:OGC:2:84"),new h("http://www.opengis.net/def/crs/OGC/1.3/CRS84"),new h("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new h("http://www.opengis.net/def/crs/EPSG/0/4326","neu")];var f=o(3989);let g={};var E=o(3965),F=o(77),w=o(6868),K=o(63);const O=6371008.8;function M(z,_,Z){Z=Z||O;const W=(0,w.Yr)(z[1]),j=(0,w.Yr)(_[1]),st=(j-W)/2,dt=(0,w.Yr)(_[0]-z[0])/2,Ot=Math.sin(st)*Math.sin(st)+Math.sin(dt)*Math.sin(dt)*Math.cos(W)*Math.cos(j);return 2*Z*Math.atan2(Math.sqrt(Ot),Math.sqrt(1-Ot))}var P=o(4345);let R=!0;function N(z){R=!(void 0===z||z)}function Q(z,_){if(void 0!==_)for(let Z=0,W=z.length;Z<W;++Z)_[Z]=z[Z];else _=z.slice();return _}function et(z,_){if(void 0!==_&&z!==_){for(let Z=0,W=z.length;Z<W;++Z)_[Z]=z[Z];z=_}return z}function H(z){(function p(z,_){g[z]=_})(z.getCode(),z),(0,E.IH)(z,z,Q)}function ht(z){return"string"==typeof z?function I(z){return g[z]||g[z.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\w+)$/,"EPSG:$3")]||null}(z):z||null}function mt(z,_,Z,W){let j;const st=(z=ht(z)).getPointResolutionFunc();if(st){if(j=st(_,Z),W&&W!==z.getUnits()){const dt=z.getMetersPerUnit();dt&&(j=j*dt/f.W[W])}}else{const dt=z.getUnits();if("degrees"==dt&&!W||"degrees"==W)j=_;else{const Ot=zt(z,ht("EPSG:4326"));if(Ot===et&&"degrees"!==dt)j=_*z.getMetersPerUnit();else{let Gt=[Z[0]-_/2,Z[1],Z[0]+_/2,Z[1],Z[0],Z[1]-_/2,Z[0],Z[1]+_/2];Gt=Ot(Gt,Gt,2),j=(M(Gt.slice(0,2),Gt.slice(2,4))+M(Gt.slice(4,6),Gt.slice(6,8)))/2}const Ct=W?f.W[W]:z.getMetersPerUnit();void 0!==Ct&&(j/=Ct)}}return j}function xt(z){(function ot(z){z.forEach(H)})(z),z.forEach(function(_){z.forEach(function(Z){_!==Z&&(0,E.IH)(_,Z,Q)})})}function pt(z,_){return z?"string"==typeof z?ht(z):z:ht(_)}function Mt(z){return function(_,Z,W){const j=_.length;W=void 0!==W?W:2,Z=void 0!==Z?Z:new Array(j);for(let st=0;st<j;st+=W){const dt=z(_.slice(st,st+W)),Ot=dt.length;for(let Ct=0,Gt=W;Ct<Gt;++Ct)Z[st+Ct]=Ct>=Ot?_[st+Ct]:dt[Ct]}return Z}}function Ft(z,_,Z,W){const j=ht(z),st=ht(_);(0,E.IH)(j,st,Mt(Z)),(0,E.IH)(st,j,Mt(W))}function Dt(z,_){return N(),It(z,"EPSG:4326",void 0!==_?_:"EPSG:3857")}function Ut(z,_){if(z===_)return!0;const Z=z.getUnits()===_.getUnits();return(z.getCode()===_.getCode()||zt(z,_)===Q)&&Z}function zt(z,_){const Z=z.getCode(),W=_.getCode();let j=(0,E.U2)(Z,W);return j||(j=et),j}function rt(z,_){return zt(ht(z),ht(_))}function It(z,_,Z){return rt(_,Z)(z,void 0,z.length)}function bt(z,_,Z,W){const j=rt(_,Z);return(0,F.Ne)(z,j,void 0,W)}let Vt=null;function Ht(){return Vt}function St(z,_){return Vt?It(z,_,Vt):z}function kt(z,_){return Vt?It(z,Vt,_):(R&&!(0,K.fS)(z,[0,0])&&z[0]>=-180&&z[0]<=180&&z[1]>=-90&&z[1]<=90&&(R=!1,(0,P.ZK)("Call useGeographic() from ol/proj once to work with [longitude, latitude] coordinates.")),z)}function Lt(z,_){return Vt?bt(z,_,Vt):z}function te(z,_){return Vt?bt(z,Vt,_):z}function Yt(z,_){if(!Vt)return z;const Z=ht(_).getMetersPerUnit(),W=Vt.getMetersPerUnit();return Z&&W?z*Z/W:z}function wt(z,_,Z){return function(W){let j,st;if(z.canWrapX()){const dt=z.getExtent(),Ot=(0,F.dz)(dt);W=W.slice(0),st=(0,K.jk)(W,z,Ot),st&&(W[0]=W[0]-st*Ot),W[0]=(0,w.uZ)(W[0],dt[0],dt[2]),W[1]=(0,w.uZ)(W[1],dt[1],dt[3]),j=Z(W)}else j=Z(W);return st&&_.canWrapX()&&(j[0]+=st*(0,F.dz)(_.getExtent())),j}}!function it(){xt(T),xt(s),function Rt(z,_,Z,W){z.forEach(function(j){_.forEach(function(st){(0,E.IH)(j,st,Z),(0,E.IH)(st,j,W)})})}(s,T,y,m)}()},2658:(jt,ut,o)=>{"use strict";o.d(ut,{Z:()=>J});var V=o(3989);const J=class k{constructor(U){this.code_=U.code,this.units_=U.units,this.extent_=void 0!==U.extent?U.extent:null,this.worldExtent_=void 0!==U.worldExtent?U.worldExtent:null,this.axisOrientation_=void 0!==U.axisOrientation?U.axisOrientation:"enu",this.global_=void 0!==U.global&&U.global,this.canWrapX_=!(!this.global_||!this.extent_),this.getPointResolutionFunc_=U.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=U.metersPerUnit}canWrapX(){return this.canWrapX_}getCode(){return this.code_}getExtent(){return this.extent_}getUnits(){return this.units_}getMetersPerUnit(){return this.metersPerUnit_||V.W[this.units_]}getWorldExtent(){return this.worldExtent_}getAxisOrientation(){return this.axisOrientation_}isGlobal(){return this.global_}setGlobal(U){this.global_=U,this.canWrapX_=!(!U||!this.extent_)}getDefaultTileGrid(){return this.defaultTileGrid_}setDefaultTileGrid(U){this.defaultTileGrid_=U}setExtent(U){this.extent_=U,this.canWrapX_=!(!this.global_||!U)}setWorldExtent(U){this.worldExtent_=U}setGetPointResolution(U){this.getPointResolutionFunc_=U}getPointResolutionFunc(){return this.getPointResolutionFunc_}}},3989:(jt,ut,o)=>{"use strict";o.d(ut,{W:()=>J});const J={radians:6370997/(2*Math.PI),degrees:2*Math.PI*6370997/360,ft:.3048,m:1,"us-ft":1200/3937}},1958:(jt,ut,o)=>{"use strict";o.d(ut,{z2:()=>b});var V=o(2658),k=o(7704),J=o(3965);let $=null;function b(h){$=h;const s=Object.keys(h.defs),f=s.length;let g,a;for(g=0;g<f;++g){const I=s[g];if(!(0,k.U2)(I)){const p=h.defs(I);let E=p.units;!E&&"longlat"===p.projName&&(E="degrees"),(0,k.Sx)(new V.Z({code:I,axisOrientation:p.axis,metersPerUnit:p.to_meter,units:E}))}}for(g=0;g<f;++g){const I=s[g],p=(0,k.U2)(I);for(a=0;a<f;++a){const E=s[a],F=(0,k.U2)(E);if(!(0,J.U2)(I,E))if(h.defs[I]===h.defs[E])(0,k.rM)([p,F]);else{const w=h(I,E);(0,k.zY)(p,F,(0,k.uA)(p,F,w.forward),(0,k.uA)(F,p,w.inverse))}}}}},3965:(jt,ut,o)=>{"use strict";o.d(ut,{IH:()=>J,U2:()=>U});let V={};function J(S,b,T){const y=S.getCode(),m=b.getCode();y in V||(V[y]={}),V[y][m]=T}function U(S,b){let T;return S in V&&b in V[S]&&(T=V[S][b]),T}},3220:(jt,ut,o)=>{"use strict";o.d(ut,{Z:()=>J});var V=o(7065);const J=class k extends V.ZP{constructor(U,S,b,T){super(U),this.inversePixelTransform=S,this.frameState=b,this.context=T}}},5603:(jt,ut,o)=>{"use strict";o.d(ut,{Z:()=>V});const V={PRERENDER:"prerender",POSTRENDER:"postrender",PRECOMPOSE:"precompose",POSTCOMPOSE:"postcompose",RENDERCOMPLETE:"rendercomplete"}},3387:(jt,ut,o)=>{"use strict";o.d(ut,{ZP:()=>f});var V=o(4836),k=o(77),J=o(3401),$=o(5959),U=o(9063),S=o(7704),b=o(6630),T=o(4649),y=o(1221),m=o(5173),d=o(4554);const l=(0,V.Ue)();class n{constructor(a,I,p,E,F,w){this.id_=w,this.type_=a,this.flatCoordinates_=I,this.flatInteriorPoints_=null,this.flatMidpoints_=null,this.ends_=p||null,this.properties_=F,this.stride_=E}get(a){return this.properties_[a]}getExtent(){return this.extent_||(this.extent_="Point"===this.type_?(0,k.HK)(this.flatCoordinates_):(0,k.GN)(this.flatCoordinates_,0,this.flatCoordinates_.length,2)),this.extent_}getFlatInteriorPoint(){if(!this.flatInteriorPoints_){const a=(0,k.qg)(this.getExtent());this.flatInteriorPoints_=(0,U.X)(this.flatCoordinates_,0,this.ends_,2,a,0)}return this.flatInteriorPoints_}getFlatInteriorPoints(){if(!this.flatInteriorPoints_){const a=(0,b.Q3)(this.flatCoordinates_,this.ends_),I=(0,y.E)(this.flatCoordinates_,0,a,2);this.flatInteriorPoints_=(0,U.U)(this.flatCoordinates_,0,a,2,I)}return this.flatInteriorPoints_}getFlatMidpoint(){return this.flatMidpoints_||(this.flatMidpoints_=(0,T.WW)(this.flatCoordinates_,0,this.flatCoordinates_.length,2,.5)),this.flatMidpoints_}getFlatMidpoints(){if(!this.flatMidpoints_){this.flatMidpoints_=[];const a=this.flatCoordinates_;let I=0;const p=this.ends_;for(let E=0,F=p.length;E<F;++E){const w=p[E],K=(0,T.WW)(a,I,w,2,.5);(0,$.l7)(this.flatMidpoints_,K),I=w}}return this.flatMidpoints_}getId(){return this.id_}getOrientedFlatCoordinates(){return this.flatCoordinates_}getGeometry(){return this}getSimplifiedGeometry(a){return this}simplifyTransformed(a,I){return this}getProperties(){return this.properties_}getPropertiesInternal(){return this.properties_}getStride(){return this.stride_}getStyleFunction(){return this.styleFunction}getType(){return this.type_}transform(a){const I=(a=(0,S.U2)(a)).getExtent(),p=a.getWorldExtent();if(I&&p){const E=(0,k.Cr)(p)/(0,k.Cr)(I);(0,V.qC)(l,p[0],p[3],E,-E,0,0,0),(0,d.vT)(this.flatCoordinates_,0,this.flatCoordinates_.length,2,l,this.flatCoordinates_)}}applyTransform(a){a(this.flatCoordinates_,this.flatCoordinates_,this.stride_)}clone(){return new n(this.type_,this.flatCoordinates_.slice(),this.ends_?.slice(),this.stride_,Object.assign({},this.properties_),this.id_)}getEnds(){return this.ends_}enableSimplifyTransformed(){return this.simplifyTransformed=(0,m.qe)((a,I)=>{if(a===this.squaredTolerance_)return this.simplifiedGeometry_;this.simplifiedGeometry_=this.clone(),I&&this.simplifiedGeometry_.applyTransform(I);const p=this.simplifiedGeometry_.getFlatCoordinates();let E;switch(this.type_){case"LineString":p.length=(0,J.dt)(p,0,this.simplifiedGeometry_.flatCoordinates_.length,this.simplifiedGeometry_.stride_,a,p,0),E=[p.length];break;case"MultiLineString":E=[],p.length=(0,J.UJ)(p,0,this.simplifiedGeometry_.ends_,this.simplifiedGeometry_.stride_,a,p,0,E);break;case"Polygon":E=[],p.length=(0,J.Zh)(p,0,this.simplifiedGeometry_.ends_,this.simplifiedGeometry_.stride_,Math.sqrt(a),p,0,E)}return E&&(this.simplifiedGeometry_=new n(this.type_,p,E,2,this.properties_,this.id_)),this.squaredTolerance_=a,this.simplifiedGeometry_}),this}}n.prototype.getFlatCoordinates=n.prototype.getOrientedFlatCoordinates;const f=n},3369:(jt,ut,o)=>{"use strict";o.d(ut,{Z:()=>k});const k=class V{drawCustom($,U,S,b,T){}drawGeometry($){}setStyle($){}drawCircle($,U,S){}drawFeature($,U,S){}drawGeometryCollection($,U,S){}drawLineString($,U,S){}drawMultiLineString($,U,S){}drawMultiPoint($,U,S){}drawMultiPolygon($,U,S){}drawPoint($,U,S){}drawPolygon($,U,S){}drawText($,U,S){}setFillStrokeStyle($,U){}setImageStyle($,U){}setTextStyle($,U){}}},1463:(jt,ut,o)=>{"use strict";o.d(ut,{Df:()=>S,He:()=>m,Kd:()=>M,PH:()=>h,Qx:()=>F,Tx:()=>n,V4:()=>l,X9:()=>y,Zw:()=>B,_f:()=>C,bL:()=>b,mb:()=>T,oB:()=>f,rc:()=>d,ru:()=>s,sG:()=>a,yC:()=>g});var V=o(7438),k=o(7316),J=o(5269),$=o(4591),U=o(2349);const S="10px sans-serif",b="#000",T="round",y=[],m=0,d="round",l=10,n="#000",h="center",s="middle",f=[0,0,0,0],g=1,a=new V.Z;let p,I=null;const E={},F=function(){const P="32px ",R=["monospace","serif"],N=R.length,Q="wmytzilWMYTZIL@#/&?$%10\uf013";let et,H;function ot(mt,xt,Rt){let at=!0;for(let pt=0;pt<N;++pt){const Mt=R[pt];if(H=O(mt+" "+xt+" "+P+Mt,Q),Rt!=Mt){const Ft=O(mt+" "+xt+" "+P+Rt+","+Mt,Q);at=at&&Ft!=H}}return!!at}function ht(){let mt=!0;const xt=a.getKeys();for(let Rt=0,at=xt.length;Rt<at;++Rt){const pt=xt[Rt];a.get(pt)<100&&(ot.apply(this,pt.split("\n"))?((0,J.Z)(E),I=null,p=void 0,a.set(pt,100)):(a.set(pt,a.get(pt)+1,!0),mt=!1))}mt&&(clearInterval(et),et=void 0)}return function(mt){const xt=(0,U.p)(mt);if(!xt)return;const Rt=xt.families;for(let at=0,pt=Rt.length;at<pt;++at){const Mt=Rt[at],Ft=xt.style+"\n"+xt.weight+"\n"+Mt;void 0===a.get(Ft)&&(a.set(Ft,100,!0),ot(xt.style,xt.weight,Mt)||(a.set(Ft,0,!0),void 0===et&&(et=setInterval(ht,32))))}}}(),w=function(){let A;return function(P){let R=E[P];if(null==R){if(k.Id){const N=(0,U.p)(P),Q=K(P,"\u017dg");R=(isNaN(Number(N.lineHeight))?1.2:Number(N.lineHeight))*(Q.actualBoundingBoxAscent+Q.actualBoundingBoxDescent)}else A||(A=document.createElement("div"),A.innerHTML="M",A.style.minHeight="0",A.style.maxHeight="none",A.style.height="auto",A.style.padding="0",A.style.border="none",A.style.position="absolute",A.style.display="block",A.style.left="-99999px"),A.style.font=P,document.body.appendChild(A),R=A.offsetHeight,document.body.removeChild(A);E[P]=R}return R}}();function K(A,P){return I||(I=(0,$.E4)(1,1)),A!=p&&(I.font=A,p=I.font),I.measureText(P)}function O(A,P){return K(A,P).width}function M(A,P,R){if(P in R)return R[P];const N=P.split("\n").reduce((Q,et)=>Math.max(Q,O(A,et)),0);return R[P]=N,N}function B(A,P){const R=[],N=[],Q=[];let et=0,H=0,ot=0,ht=0;for(let mt=0,xt=P.length;mt<=xt;mt+=2){const Rt=P[mt];if("\n"===Rt||mt===xt){et=Math.max(et,H),Q.push(H),H=0,ot+=ht,ht=0;continue}const at=P[mt+1]||A.font,pt=O(at,Rt);R.push(pt),H+=pt;const Mt=w(at);N.push(Mt),ht=Math.max(ht,Mt)}return{width:et,height:ot,widths:R,heights:N,lineWidths:Q}}function C(A,P,R,N,Q,et,H,ot,ht,mt,xt){A.save(),1!==R&&(void 0===A.globalAlpha?A.globalAlpha=Rt=>Rt.globalAlpha*=R:A.globalAlpha*=R),P&&A.transform.apply(A,P),N.contextInstructions?(A.translate(ht,mt),A.scale(xt[0],xt[1]),function L(A,P){const R=A.contextInstructions;for(let N=0,Q=R.length;N<Q;N+=2)Array.isArray(R[N+1])?P[R[N]].apply(P,R[N+1]):P[R[N]]=R[N+1]}(N,A)):xt[0]<0||xt[1]<0?(A.translate(ht,mt),A.scale(xt[0],xt[1]),A.drawImage(N,Q,et,H,ot,0,0,H,ot)):A.drawImage(N,Q,et,H,ot,ht,mt,H*xt[0],ot*xt[1]),A.restore()}},5472:(jt,ut,o)=>{"use strict";o.d(ut,{Z:()=>m});var V=o(7544),k=o(4681),J=o(3369),$=o(9490),U=o(77),S=o(1463),b=o(5959),T=o(5535);const m=class y extends J.Z{constructor(l,n,h,s){super(),this.tolerance=l,this.maxExtent=n,this.pixelRatio=s,this.maxLineWidth=0,this.resolution=h,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_=null,this.bufferedMaxExtent_=null,this.instructions=[],this.coordinates=[],this.tmpCoordinate_=[],this.hitDetectionInstructions=[],this.state={}}applyPixelRatio(l){const n=this.pixelRatio;return 1==n?l:l.map(function(h){return h*n})}appendFlatPointCoordinates(l,n){const h=this.getBufferedMaxExtent(),s=this.tmpCoordinate_,f=this.coordinates;let g=f.length;for(let a=0,I=l.length;a<I;a+=n)s[0]=l[a],s[1]=l[a+1],(0,U.b8)(h,s)&&(f[g++]=s[0],f[g++]=s[1]);return g}appendFlatLineCoordinates(l,n,h,s,f,g){const a=this.coordinates;let I=a.length;const p=this.getBufferedMaxExtent();g&&(n+=s);let E=l[n],F=l[n+1];const w=this.tmpCoordinate_;let O,M,B,K=!0;for(O=n+s;O<h;O+=s)w[0]=l[O],w[1]=l[O+1],B=(0,U.pX)(p,w),B!==M?(K&&(a[I++]=E,a[I++]=F,K=!1),a[I++]=w[0],a[I++]=w[1]):B===k.Z.INTERSECTING?(a[I++]=w[0],a[I++]=w[1],K=!1):K=!0,E=w[0],F=w[1],M=B;return(f&&K||O===n+s)&&(a[I++]=E,a[I++]=F),I}drawCustomCoordinates_(l,n,h,s,f){for(let g=0,a=h.length;g<a;++g){const I=h[g],p=this.appendFlatLineCoordinates(l,n,I,s,!1,!1);f.push(p),n=I}return n}drawCustom(l,n,h,s,f){this.beginGeometry(l,n,f);const g=l.getType(),a=l.getStride(),I=this.coordinates.length;let p,E,F,w,K;switch(g){case"MultiPolygon":p=l.getOrientedFlatCoordinates(),w=[];const O=l.getEndss();K=0;for(let M=0,B=O.length;M<B;++M){const Y=[];K=this.drawCustomCoordinates_(p,K,O[M],a,Y),w.push(Y)}this.instructions.push([V.ZP.CUSTOM,I,w,l,h,T.ug,f]),this.hitDetectionInstructions.push([V.ZP.CUSTOM,I,w,l,s||h,T.ug,f]);break;case"Polygon":case"MultiLineString":F=[],p="Polygon"==g?l.getOrientedFlatCoordinates():l.getFlatCoordinates(),K=this.drawCustomCoordinates_(p,0,l.getEnds(),a,F),this.instructions.push([V.ZP.CUSTOM,I,F,l,h,T.o1,f]),this.hitDetectionInstructions.push([V.ZP.CUSTOM,I,F,l,s||h,T.o1,f]);break;case"LineString":case"Circle":p=l.getFlatCoordinates(),E=this.appendFlatLineCoordinates(p,0,p.length,a,!1,!1),this.instructions.push([V.ZP.CUSTOM,I,E,l,h,T.Ml,f]),this.hitDetectionInstructions.push([V.ZP.CUSTOM,I,E,l,s||h,T.Ml,f]);break;case"MultiPoint":p=l.getFlatCoordinates(),E=this.appendFlatPointCoordinates(p,a),E>I&&(this.instructions.push([V.ZP.CUSTOM,I,E,l,h,T.Ml,f]),this.hitDetectionInstructions.push([V.ZP.CUSTOM,I,E,l,s||h,T.Ml,f]));break;case"Point":p=l.getFlatCoordinates(),this.coordinates.push(p[0],p[1]),E=this.coordinates.length,this.instructions.push([V.ZP.CUSTOM,I,E,l,h,void 0,f]),this.hitDetectionInstructions.push([V.ZP.CUSTOM,I,E,l,s||h,void 0,f])}this.endGeometry(n)}beginGeometry(l,n,h){this.beginGeometryInstruction1_=[V.ZP.BEGIN_GEOMETRY,n,0,l,h],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[V.ZP.BEGIN_GEOMETRY,n,0,l,h],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)}finish(){return{instructions:this.instructions,hitDetectionInstructions:this.hitDetectionInstructions,coordinates:this.coordinates}}reverseHitDetectionInstructions(){const l=this.hitDetectionInstructions;let n;l.reverse();const h=l.length;let s,f,g=-1;for(n=0;n<h;++n)s=l[n],f=s[0],f==V.ZP.END_GEOMETRY?g=n:f==V.ZP.BEGIN_GEOMETRY&&(s[2]=n,(0,b.FZ)(this.hitDetectionInstructions,g,n),g=-1)}setFillStrokeStyle(l,n){const h=this.state;if(l){const s=l.getColor();h.fillPatternScale=s&&"object"==typeof s&&"src"in s?this.pixelRatio:1,h.fillStyle=(0,$.y)(s||S.bL)}else h.fillStyle=void 0;if(n){const s=n.getColor();h.strokeStyle=(0,$.y)(s||S.Tx);const f=n.getLineCap();h.lineCap=void 0!==f?f:S.mb;const g=n.getLineDash();h.lineDash=g?g.slice():S.X9;const a=n.getLineDashOffset();h.lineDashOffset=a||S.He;const I=n.getLineJoin();h.lineJoin=void 0!==I?I:S.rc;const p=n.getWidth();h.lineWidth=void 0!==p?p:S.yC;const E=n.getMiterLimit();h.miterLimit=void 0!==E?E:S.V4,h.lineWidth>this.maxLineWidth&&(this.maxLineWidth=h.lineWidth,this.bufferedMaxExtent_=null)}else h.strokeStyle=void 0,h.lineCap=void 0,h.lineDash=null,h.lineDashOffset=void 0,h.lineJoin=void 0,h.lineWidth=void 0,h.miterLimit=void 0}createFill(l){const n=l.fillStyle,h=[V.ZP.SET_FILL_STYLE,n];return"string"!=typeof n&&h.push(l.fillPatternScale),h}applyStroke(l){this.instructions.push(this.createStroke(l))}createStroke(l){return[V.ZP.SET_STROKE_STYLE,l.strokeStyle,l.lineWidth*this.pixelRatio,l.lineCap,l.lineJoin,l.miterLimit,this.applyPixelRatio(l.lineDash),l.lineDashOffset*this.pixelRatio]}updateFillStyle(l,n){const h=l.fillStyle;("string"!=typeof h||l.currentFillStyle!=h)&&(void 0!==h&&this.instructions.push(n.call(this,l)),l.currentFillStyle=h)}updateStrokeStyle(l,n){const h=l.strokeStyle,s=l.lineCap,f=l.lineDash,g=l.lineDashOffset,a=l.lineJoin,I=l.lineWidth,p=l.miterLimit;(l.currentStrokeStyle!=h||l.currentLineCap!=s||f!=l.currentLineDash&&!(0,b.fS)(l.currentLineDash,f)||l.currentLineDashOffset!=g||l.currentLineJoin!=a||l.currentLineWidth!=I||l.currentMiterLimit!=p)&&(void 0!==h&&n.call(this,l),l.currentStrokeStyle=h,l.currentLineCap=s,l.currentLineDash=f,l.currentLineDashOffset=g,l.currentLineJoin=a,l.currentLineWidth=I,l.currentMiterLimit=p)}endGeometry(l){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;const n=[V.ZP.END_GEOMETRY,l];this.instructions.push(n),this.hitDetectionInstructions.push(n)}getBufferedMaxExtent(){return!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=(0,U.d9)(this.maxExtent),this.maxLineWidth>0)&&(0,U.f3)(this.bufferedMaxExtent_,this.resolution*(this.maxLineWidth+1)/2,this.bufferedMaxExtent_),this.bufferedMaxExtent_}}},1068:(jt,ut,o)=>{"use strict";o.d(ut,{Z:()=>s});var V=o(5472),k=o(7544),J=o(77);var S=o(1463);var y=o(3401);const d=class m extends V.Z{constructor(g,a,I,p){super(g,a,I,p)}drawFlatCoordinatess_(g,a,I,p){const E=this.state,F=void 0!==E.fillStyle,w=void 0!==E.strokeStyle,K=I.length;this.instructions.push(k.$O),this.hitDetectionInstructions.push(k.$O);for(let O=0;O<K;++O){const M=I[O],B=this.coordinates.length,Y=this.appendFlatLineCoordinates(g,a,M,p,!0,!w),C=[k.ZP.MOVE_TO_LINE_TO,B,Y];this.instructions.push(C),this.hitDetectionInstructions.push(C),w&&(this.instructions.push(k.s3),this.hitDetectionInstructions.push(k.s3)),a=M}return F&&(this.instructions.push(k.gO),this.hitDetectionInstructions.push(k.gO)),w&&(this.instructions.push(k.Yc),this.hitDetectionInstructions.push(k.Yc)),a}drawCircle(g,a,I){const p=this.state;if(void 0===p.fillStyle&&void 0===p.strokeStyle)return;this.setFillStrokeStyles_(),this.beginGeometry(g,a,I),void 0!==p.fillStyle&&this.hitDetectionInstructions.push([k.ZP.SET_FILL_STYLE,S.bL]),void 0!==p.strokeStyle&&this.hitDetectionInstructions.push([k.ZP.SET_STROKE_STYLE,p.strokeStyle,p.lineWidth,p.lineCap,p.lineJoin,p.miterLimit,S.X9,S.He]);const w=g.getFlatCoordinates(),K=g.getStride(),O=this.coordinates.length;this.appendFlatLineCoordinates(w,0,w.length,K,!1,!1);const M=[k.ZP.CIRCLE,O];this.instructions.push(k.$O,M),this.hitDetectionInstructions.push(k.$O,M),void 0!==p.fillStyle&&(this.instructions.push(k.gO),this.hitDetectionInstructions.push(k.gO)),void 0!==p.strokeStyle&&(this.instructions.push(k.Yc),this.hitDetectionInstructions.push(k.Yc)),this.endGeometry(a)}drawPolygon(g,a,I){const p=this.state;if(void 0===p.fillStyle&&void 0===p.strokeStyle)return;this.setFillStrokeStyles_(),this.beginGeometry(g,a,I),void 0!==p.fillStyle&&this.hitDetectionInstructions.push([k.ZP.SET_FILL_STYLE,S.bL]),void 0!==p.strokeStyle&&this.hitDetectionInstructions.push([k.ZP.SET_STROKE_STYLE,p.strokeStyle,p.lineWidth,p.lineCap,p.lineJoin,p.miterLimit,S.X9,S.He]);const w=g.getEnds(),K=g.getOrientedFlatCoordinates(),O=g.getStride();this.drawFlatCoordinatess_(K,0,w,O),this.endGeometry(a)}drawMultiPolygon(g,a,I){const p=this.state;if(void 0===p.fillStyle&&void 0===p.strokeStyle)return;this.setFillStrokeStyles_(),this.beginGeometry(g,a,I),void 0!==p.fillStyle&&this.hitDetectionInstructions.push([k.ZP.SET_FILL_STYLE,S.bL]),void 0!==p.strokeStyle&&this.hitDetectionInstructions.push([k.ZP.SET_STROKE_STYLE,p.strokeStyle,p.lineWidth,p.lineCap,p.lineJoin,p.miterLimit,S.X9,S.He]);const w=g.getEndss(),K=g.getOrientedFlatCoordinates(),O=g.getStride();let M=0;for(let B=0,Y=w.length;B<Y;++B)M=this.drawFlatCoordinatess_(K,M,w[B],O);this.endGeometry(a)}finish(){this.reverseHitDetectionInstructions(),this.state=null;const g=this.tolerance;if(0!==g){const a=this.coordinates;for(let I=0,p=a.length;I<p;++I)a[I]=(0,y.uZ)(a[I],g)}return super.finish()}setFillStrokeStyles_(){const g=this.state;void 0!==g.fillStyle&&this.updateFillStyle(g,this.createFill),void 0!==g.strokeStyle&&this.updateStrokeStyle(g,this.applyStroke)}};var l=o(9577);const n={Circle:d,Default:V.Z,Image:class $ extends V.Z{constructor(g,a,I,p){super(g,a,I,p),this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.anchorX_=void 0,this.anchorY_=void 0,this.height_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.scale_=void 0,this.width_=void 0,this.declutterMode_=void 0,this.declutterImageWithText_=void 0}drawPoint(g,a,I){if(!this.image_||this.maxExtent&&!(0,J.b8)(this.maxExtent,g.getFlatCoordinates()))return;this.beginGeometry(g,a,I);const p=g.getFlatCoordinates(),E=g.getStride(),F=this.coordinates.length,w=this.appendFlatPointCoordinates(p,E);this.instructions.push([k.ZP.DRAW_IMAGE,F,w,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([k.ZP.DRAW_IMAGE,F,w,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(a)}drawMultiPoint(g,a,I){if(!this.image_)return;this.beginGeometry(g,a,I);const p=g.getFlatCoordinates(),E=[];for(let K=0,O=p.length;K<O;K+=g.getStride())(!this.maxExtent||(0,J.b8)(this.maxExtent,p.slice(K,K+2)))&&E.push(p[K],p[K+1]);const F=this.coordinates.length,w=this.appendFlatPointCoordinates(E,2);this.instructions.push([k.ZP.DRAW_IMAGE,F,w,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([k.ZP.DRAW_IMAGE,F,w,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(a)}finish(){return this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0,super.finish()}setImageStyle(g,a){const I=g.getAnchor(),p=g.getSize(),E=g.getOrigin();this.imagePixelRatio_=g.getPixelRatio(this.pixelRatio),this.anchorX_=I[0],this.anchorY_=I[1],this.hitDetectionImage_=g.getHitDetectionImage(),this.image_=g.getImage(this.pixelRatio),this.height_=p[1],this.opacity_=g.getOpacity(),this.originX_=E[0],this.originY_=E[1],this.rotateWithView_=g.getRotateWithView(),this.rotation_=g.getRotation(),this.scale_=g.getScaleArray(),this.width_=p[0],this.declutterMode_=g.getDeclutterMode(),this.declutterImageWithText_=a}},LineString:class b extends V.Z{constructor(g,a,I,p){super(g,a,I,p)}drawFlatCoordinates_(g,a,I,p){const E=this.coordinates.length,F=this.appendFlatLineCoordinates(g,a,I,p,!1,!1),w=[k.ZP.MOVE_TO_LINE_TO,E,F];return this.instructions.push(w),this.hitDetectionInstructions.push(w),I}drawLineString(g,a,I){const p=this.state;if(void 0===p.strokeStyle||void 0===p.lineWidth)return;this.updateStrokeStyle(p,this.applyStroke),this.beginGeometry(g,a,I),this.hitDetectionInstructions.push([k.ZP.SET_STROKE_STYLE,p.strokeStyle,p.lineWidth,p.lineCap,p.lineJoin,p.miterLimit,S.X9,S.He],k.$O);const w=g.getFlatCoordinates(),K=g.getStride();this.drawFlatCoordinates_(w,0,w.length,K),this.hitDetectionInstructions.push(k.Yc),this.endGeometry(a)}drawMultiLineString(g,a,I){const p=this.state;if(void 0===p.strokeStyle||void 0===p.lineWidth)return;this.updateStrokeStyle(p,this.applyStroke),this.beginGeometry(g,a,I),this.hitDetectionInstructions.push([k.ZP.SET_STROKE_STYLE,p.strokeStyle,p.lineWidth,p.lineCap,p.lineJoin,p.miterLimit,S.X9,S.He],k.$O);const w=g.getEnds(),K=g.getFlatCoordinates(),O=g.getStride();let M=0;for(let B=0,Y=w.length;B<Y;++B)M=this.drawFlatCoordinates_(K,M,w[B],O);this.hitDetectionInstructions.push(k.Yc),this.endGeometry(a)}finish(){const g=this.state;return null!=g.lastStroke&&g.lastStroke!=this.coordinates.length&&this.instructions.push(k.Yc),this.reverseHitDetectionInstructions(),this.state=null,super.finish()}applyStroke(g){null!=g.lastStroke&&g.lastStroke!=this.coordinates.length&&(this.instructions.push(k.Yc),g.lastStroke=this.coordinates.length),g.lastStroke=0,super.applyStroke(g),this.instructions.push(k.$O)}},Polygon:d,Text:l.Z},s=class h{constructor(g,a,I,p){this.tolerance_=g,this.maxExtent_=a,this.pixelRatio_=p,this.resolution_=I,this.buildersByZIndex_={}}finish(){const g={};for(const a in this.buildersByZIndex_){g[a]=g[a]||{};const I=this.buildersByZIndex_[a];for(const p in I){const E=I[p].finish();g[a][p]=E}}return g}getBuilder(g,a){const I=void 0!==g?g.toString():"0";let p=this.buildersByZIndex_[I];void 0===p&&(p={},this.buildersByZIndex_[I]=p);let E=p[a];return void 0===E&&(E=new(0,n[a])(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_),p[a]=E),E}}},649:(jt,ut,o)=>{"use strict";o.d(ut,{QN:()=>O,o5:()=>M,eV:()=>B,ZP:()=>A});var V=o(7544),k=o(413),J=o(9577),$=o(4836),U=o(77),S=o(1463),b=o(6868),T=o(4554);function y(P,R,N,Q,et,H,ot,ht,mt,xt,Rt,at){let pt=P[R],Mt=P[R+1],Ft=0,Dt=0,Wt=0,Ut=0;function zt(){Ft=pt,Dt=Mt,pt=P[R+=Q],Mt=P[R+1],Ut+=Wt,Wt=Math.sqrt((pt-Ft)*(pt-Ft)+(Mt-Dt)*(Mt-Dt))}do{zt()}while(R<N-Q&&Ut+Wt<H);let rt=0===Wt?0:(H-Ut)/Wt;const It=(0,b.t7)(Ft,pt,rt),bt=(0,b.t7)(Dt,Mt,rt),Xt=R-Q,Vt=Ut,he=H+ht*mt(xt,et,Rt);for(;R<N-Q&&Ut+Wt<he;)zt();rt=0===Wt?0:(he-Ut)/Wt;const le=(0,b.t7)(Ft,pt,rt),Ht=(0,b.t7)(Dt,Mt,rt);let ft;if(at){const Yt=[It,bt,le,Ht];(0,T.U1)(Yt,0,4,2,at,Yt,Yt),ft=Yt[0]>Yt[2]}else ft=It>le;const St=Math.PI,kt=[],Lt=Xt+Q===R;let te;if(Wt=0,Ut=Vt,pt=P[R=Xt],Mt=P[R+1],Lt)return zt(),te=Math.atan2(Mt-Dt,pt-Ft),ft&&(te+=te>0?-St:St),kt[0]=[(le+It)/2,(Ht+bt)/2,(he-H)/2,te,et],kt;for(let Yt=0,Et=(et=et.replace(/\n/g," ")).length;Yt<Et;){zt();let wt=Math.atan2(Mt-Dt,pt-Ft);if(ft&&(wt+=wt>0?-St:St),void 0!==te){let j=wt-te;if(j+=j>St?-2*St:j<-St?2*St:0,Math.abs(j)>ot)return null}te=wt;const it=Yt;let z=0;for(;Yt<Et;++Yt){const st=ht*mt(xt,et[ft?Et-Yt-1:Yt],Rt);if(R+Q<N&&Ut+Wt<H+z+st/2)break;z+=st}if(Yt===it)continue;const _=ft?et.substring(Et-it,Et-Yt):et.substring(it,Yt);rt=0===Wt?0:(H+z/2-Ut)/Wt;const Z=(0,b.t7)(Ft,pt,rt),W=(0,b.t7)(Dt,Mt,rt);kt.push([Z,W,z/2,wt,_]),H+=z}return kt}var m=o(5959),d=o(9941);const l=(0,U.lJ)(),n=[],h=[],s=[],f=[];function g(P){return P[3].declutterBox}const a=new RegExp("["+String.fromCharCode(1425)+"-"+String.fromCharCode(2303)+String.fromCharCode(64285)+"-"+String.fromCharCode(65023)+String.fromCharCode(65136)+"-"+String.fromCharCode(65276)+String.fromCharCode(67584)+"-"+String.fromCharCode(69631)+String.fromCharCode(124928)+"-"+String.fromCharCode(126975)+"]");function I(P,R){return"start"===R?R=a.test(P)?"right":"left":"end"===R&&(R=a.test(P)?"left":"right"),J.I[R]}function p(P,R,N){return N>0&&P.push("\n",""),P.push(R,""),P}const F=class E{constructor(R,N,Q,et,H){this.overlaps=Q,this.pixelRatio=N,this.resolution=R,this.instructions=et.instructions,this.coordinates=et.coordinates,this.coordinateCache_={},this.renderedTransform_=(0,$.Ue)(),this.hitDetectionInstructions=et.hitDetectionInstructions,this.pixelCoordinates_=null,this.viewRotation_=0,this.fillStates=et.fillStates||{},this.strokeStates=et.strokeStates||{},this.textStates=et.textStates||{},this.widths_={},this.labels_={},this.zIndexContext_=H?new k.Z:null}getZIndexContext(){return this.zIndexContext_}createLabel(R,N,Q,et){const H=R+N+Q+et;if(this.labels_[H])return this.labels_[H];const ot=et?this.strokeStates[et]:null,ht=Q?this.fillStates[Q]:null,mt=this.textStates[N],xt=this.pixelRatio,Rt=[mt.scale[0]*xt,mt.scale[1]*xt],at=Array.isArray(R),pt=mt.justify?J.I[mt.justify]:I(Array.isArray(R)?R[0]:R,mt.textAlign||S.PH),Mt=et&&ot.lineWidth?ot.lineWidth:0,Ft=at?R:R.split("\n").reduce(p,[]),{width:Dt,height:Wt,widths:Ut,heights:zt,lineWidths:rt}=(0,S.Zw)(mt,Ft),It=Dt+Mt,bt=[],Xt=(It+2)*Rt[0],Vt=(Wt+Mt)*Rt[1],he={width:Xt<0?Math.floor(Xt):Math.ceil(Xt),height:Vt<0?Math.floor(Vt):Math.ceil(Vt),contextInstructions:bt};(1!=Rt[0]||1!=Rt[1])&&bt.push("scale",Rt),et&&(bt.push("strokeStyle",ot.strokeStyle),bt.push("lineWidth",Mt),bt.push("lineCap",ot.lineCap),bt.push("lineJoin",ot.lineJoin),bt.push("miterLimit",ot.miterLimit),bt.push("setLineDash",[ot.lineDash]),bt.push("lineDashOffset",ot.lineDashOffset)),Q&&bt.push("fillStyle",ht.fillStyle),bt.push("textBaseline","middle"),bt.push("textAlign","center");const le=.5-pt;let Ht=pt*It+le*Mt;const ft=[],St=[];let Et,kt=0,Lt=0,te=0,Yt=0;for(let wt=0,it=Ft.length;wt<it;wt+=2){const z=Ft[wt];if("\n"===z){Lt+=kt,kt=0,Ht=pt*It+le*Mt,++Yt;continue}const _=Ft[wt+1]||mt.font;_!==Et&&(et&&ft.push("font",_),Q&&St.push("font",_),Et=_),kt=Math.max(kt,zt[te]);const Z=[z,Ht+le*Ut[te]+pt*(Ut[te]-rt[Yt]),.5*(Mt+kt)+Lt];Ht+=Ut[te],et&&ft.push("strokeText",Z),Q&&St.push("fillText",Z),++te}return Array.prototype.push.apply(bt,ft),Array.prototype.push.apply(bt,St),this.labels_[H]=he,he}replayTextBackground_(R,N,Q,et,H,ot,ht){R.beginPath(),R.moveTo.apply(R,N),R.lineTo.apply(R,Q),R.lineTo.apply(R,et),R.lineTo.apply(R,H),R.lineTo.apply(R,N),ot&&(this.alignAndScaleFill_=ot[2],this.fill_(R)),ht&&(this.setStrokeStyle_(R,ht),R.stroke())}calculateImageOrLabelDimensions_(R,N,Q,et,H,ot,ht,mt,xt,Rt,at,pt,Mt,Ft,Dt,Wt){let Ut=Q-(ht*=pt[0]),zt=et-(mt*=pt[1]);const rt=H+xt>R?R-xt:H,It=ot+Rt>N?N-Rt:ot,bt=Ft[3]+rt*pt[0]+Ft[1],Xt=Ft[0]+It*pt[1]+Ft[2],Vt=Ut-Ft[3],he=zt-Ft[0];let le;return(Dt||0!==at)&&(n[0]=Vt,f[0]=Vt,n[1]=he,h[1]=he,h[0]=Vt+bt,s[0]=h[0],s[1]=he+Xt,f[1]=s[1]),0!==at?(le=(0,$.qC)((0,$.Ue)(),Q,et,1,1,at,-Q,-et),(0,$.nn)(le,n),(0,$.nn)(le,h),(0,$.nn)(le,s),(0,$.nn)(le,f),(0,U.T9)(Math.min(n[0],h[0],s[0],f[0]),Math.min(n[1],h[1],s[1],f[1]),Math.max(n[0],h[0],s[0],f[0]),Math.max(n[1],h[1],s[1],f[1]),l)):(0,U.T9)(Math.min(Vt,Vt+bt),Math.min(he,he+Xt),Math.max(Vt,Vt+bt),Math.max(he,he+Xt),l),Mt&&(Ut=Math.round(Ut),zt=Math.round(zt)),{drawImageX:Ut,drawImageY:zt,drawImageW:rt,drawImageH:It,originX:xt,originY:Rt,declutterBox:{minX:l[0],minY:l[1],maxX:l[2],maxY:l[3],value:Wt},canvasTransform:le,scale:pt}}replayImageOrLabel_(R,N,Q,et,H,ot,ht){const xt=et.declutterBox,Rt=ht?ht[2]*et.scale[0]/2:0;return xt.minX-Rt<=N[0]&&xt.maxX+Rt>=0&&xt.minY-Rt<=N[1]&&xt.maxY+Rt>=0&&(!(!ot&&!ht)&&this.replayTextBackground_(R,n,h,s,f,ot,ht),(0,S._f)(R,et.canvasTransform,H,Q,et.originX,et.originY,et.drawImageW,et.drawImageH,et.drawImageX,et.drawImageY,et.scale)),!0}fill_(R){const N=this.alignAndScaleFill_;if(N){const Q=(0,$.nn)(this.renderedTransform_,[0,0]),et=512*this.pixelRatio;R.save(),R.translate(Q[0]%et,Q[1]%et),1!==N&&R.scale(N,N),R.rotate(this.viewRotation_)}R.fill(),N&&R.restore()}setStrokeStyle_(R,N){R.strokeStyle=N[1],R.lineWidth=N[2],R.lineCap=N[3],R.lineJoin=N[4],R.miterLimit=N[5],R.lineDashOffset=N[7],R.setLineDash(N[6])}drawLabelWithPointPlacement_(R,N,Q,et){const H=this.textStates[N],ot=this.createLabel(R,N,et,Q),ht=this.strokeStates[Q],mt=this.pixelRatio,xt=I(Array.isArray(R)?R[0]:R,H.textAlign||S.PH),Rt=J.I[H.textBaseline||S.ru],at=ht&&ht.lineWidth?ht.lineWidth:0;return{label:ot,anchorX:xt*(ot.width/mt-2*H.scale[0])+2*(.5-xt)*at,anchorY:Rt*ot.height/mt+2*(.5-Rt)*at}}execute_(R,N,Q,et,H,ot,ht,mt){const xt=this.zIndexContext_;let Rt;this.pixelCoordinates_&&(0,m.fS)(Q,this.renderedTransform_)?Rt=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),Rt=(0,T.vT)(this.coordinates,0,this.coordinates.length,2,Q,this.pixelCoordinates_),(0,$.lk)(this.renderedTransform_,Q));let at=0;const pt=et.length;let Ft,Dt,Wt,Ut,zt,rt,It,bt,Xt,Vt,he,le,Ht,Mt=0,ft=0,St=0,kt=null,Lt=null;const te=this.coordinateCache_,Yt=this.viewRotation_,Et=Math.round(1e12*Math.atan2(-Q[1],Q[0]))/1e12,wt={context:R,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:Yt},it=this.instructions!=et||this.overlaps?0:200;let z,_,Z,W;for(;at<pt;){const j=et[at];switch(j[0]){case V.ZP.BEGIN_GEOMETRY:z=j[1],W=j[3],z.getGeometry()?void 0===ht||(0,U.kK)(ht,W.getExtent())?++at:at=j[2]+1:at=j[2],xt&&(xt.zIndex=j[4]);break;case V.ZP.BEGIN_PATH:ft>it&&(this.fill_(R),ft=0),St>it&&(R.stroke(),St=0),!ft&&!St&&(R.beginPath(),zt=NaN,rt=NaN),++at;break;case V.ZP.CIRCLE:Mt=j[1];const dt=Rt[Mt],Ot=Rt[Mt+1],qt=Rt[Mt+2]-dt,ne=Rt[Mt+3]-Ot,oe=Math.sqrt(qt*qt+ne*ne);R.moveTo(dt+oe,Ot),R.arc(dt,Ot,oe,0,2*Math.PI,!0),++at;break;case V.ZP.CLOSE_PATH:R.closePath(),++at;break;case V.ZP.CUSTOM:Mt=j[1],Ft=j[2];const ge=j[4],we=j[5];wt.geometry=j[3],wt.feature=z,at in te||(te[at]=[]);const Ie=te[at];we?we(Rt,Mt,Ft,2,Ie):(Ie[0]=Rt[Mt],Ie[1]=Rt[Mt+1],Ie.length=2),xt&&(xt.zIndex=j[6]),ge(Ie,wt),++at;break;case V.ZP.DRAW_IMAGE:Mt=j[1],Ft=j[2],Xt=j[3],Dt=j[4],Wt=j[5];let De=j[6];const je=j[7],Ke=j[8],Ye=j[9],Ze=j[10];let Ce=j[11];const q=j[12];let tt=j[13];Ut=j[14]||"declutter";const _t=j[15];if(!Xt&&j.length>=20){Vt=j[19],he=j[20],le=j[21],Ht=j[22];const ei=this.drawLabelWithPointPlacement_(Vt,he,le,Ht);Xt=ei.label,j[3]=Xt,Dt=(ei.anchorX-j[23])*this.pixelRatio,j[4]=Dt,Wt=(ei.anchorY-j[24])*this.pixelRatio,j[5]=Wt,De=Xt.height,j[6]=De,tt=Xt.width,j[13]=tt}let vt,At,$t,re;j.length>25&&(vt=j[25]),j.length>17?(At=j[16],$t=j[17],re=j[18]):(At=S.oB,$t=!1,re=!1),Ze&&Et?Ce+=Yt:!Ze&&!Et&&(Ce-=Yt);let ae=0;for(;Mt<Ft;Mt+=2){if(vt&&vt[ae++]<tt/this.pixelRatio)continue;const ei=this.calculateImageOrLabelDimensions_(Xt.width,Xt.height,Rt[Mt],Rt[Mt+1],tt,De,Dt,Wt,Ke,Ye,Ce,q,H,At,$t||re,z),Si=[R,N,Xt,ei,je,$t?kt:null,re?Lt:null];if(mt){let Mi,_i,li,Ti,Ai;if(_t){const Je=Ft-Mt;if(!_t[Je]){_t[Je]={args:Si,declutterMode:Ut};continue}const Be=_t[Je];Mi=Be.args,_i=Be.declutterMode,delete _t[Je],li=g(Mi)}if(Mi&&("declutter"!==_i||!mt.collides(li))&&(Ti=!0),("declutter"!==Ut||!mt.collides(ei.declutterBox))&&(Ai=!0),"declutter"===_i&&"declutter"===Ut){const Je=Ti&&Ai;Ti=Je,Ai=Je}Ti&&("none"!==_i&&mt.insert(li),this.replayImageOrLabel_.apply(this,Mi)),Ai&&("none"!==Ut&&mt.insert(ei.declutterBox),this.replayImageOrLabel_.apply(this,Si))}else this.replayImageOrLabel_.apply(this,Si)}++at;break;case V.ZP.DRAW_CHARS:const ye=j[1],Te=j[2],Oe=j[3],Fe=j[4];Ht=j[5];const Ue=j[6],ti=j[7],fi=j[8];le=j[9];const xi=j[10];Vt=j[11],he=j[12];const an=[j[13],j[13]];Ut=j[14]||"declutter";const xn=this.textStates[he],ki=xn.font,Oi=[xn.scale[0]*ti,xn.scale[1]*ti];let Hi;ki in this.widths_?Hi=this.widths_[ki]:(Hi={},this.widths_[ki]=Hi);const Bi=(0,d.W)(Rt,ye,Te,2),Ji=Math.abs(Oi[0])*(0,S.Kd)(ki,Vt,Hi);if(Fe||Ji<=Bi){const Mi=y(Rt,ye,Te,2,Vt,(Bi-Ji)*I(Vt,this.textStates[he].textAlign),Ue,Math.abs(Oi[0]),S.Kd,ki,Hi,Et?0:this.viewRotation_);t:if(Mi){const _i=[];let li,Ti,Ai,Je,Be;if(le)for(li=0,Ti=Mi.length;li<Ti;++li){Be=Mi[li],Ai=Be[4],Je=this.createLabel(Ai,he,"",le),Dt=Be[2]+(Oi[0]<0?-xi:xi),Wt=Oe*Je.height+2*(.5-Oe)*xi*Oi[1]/Oi[0]-fi;const pi=this.calculateImageOrLabelDimensions_(Je.width,Je.height,Be[0],Be[1],Je.width,Je.height,Dt,Wt,0,0,Be[3],an,!1,S.oB,!1,z);if(mt&&"declutter"===Ut&&mt.collides(pi.declutterBox))break t;_i.push([R,N,Je,pi,1,null,null])}if(Ht)for(li=0,Ti=Mi.length;li<Ti;++li){Be=Mi[li],Ai=Be[4],Je=this.createLabel(Ai,he,Ht,""),Dt=Be[2],Wt=Oe*Je.height-fi;const pi=this.calculateImageOrLabelDimensions_(Je.width,Je.height,Be[0],Be[1],Je.width,Je.height,Dt,Wt,0,0,Be[3],an,!1,S.oB,!1,z);if(mt&&"declutter"===Ut&&mt.collides(pi.declutterBox))break t;_i.push([R,N,Je,pi,1,null,null])}mt&&"none"!==Ut&&mt.load(_i.map(g));for(let pi=0,Ln=_i.length;pi<Ln;++pi)this.replayImageOrLabel_.apply(this,_i[pi])}}++at;break;case V.ZP.END_GEOMETRY:if(void 0!==ot){z=j[1];const ei=ot(z,W,Ut);if(ei)return ei}++at;break;case V.ZP.FILL:it?ft++:this.fill_(R),++at;break;case V.ZP.MOVE_TO_LINE_TO:for(Mt=j[1],Ft=j[2],_=Rt[Mt],Z=Rt[Mt+1],R.moveTo(_,Z),zt=_+.5|0,rt=Z+.5|0,Mt+=2;Mt<Ft;Mt+=2)_=Rt[Mt],Z=Rt[Mt+1],It=_+.5|0,bt=Z+.5|0,(Mt==Ft-2||It!==zt||bt!==rt)&&(R.lineTo(_,Z),zt=It,rt=bt);++at;break;case V.ZP.SET_FILL_STYLE:kt=j,this.alignAndScaleFill_=j[2],ft&&(this.fill_(R),ft=0,St&&(R.stroke(),St=0)),R.fillStyle=j[1],++at;break;case V.ZP.SET_STROKE_STYLE:Lt=j,St&&(R.stroke(),St=0),this.setStrokeStyle_(R,j),++at;break;case V.ZP.STROKE:it?St++:R.stroke(),++at;break;default:++at}}ft&&this.fill_(R),St&&R.stroke()}execute(R,N,Q,et,H,ot){this.viewRotation_=et,this.execute_(R,N,Q,this.instructions,H,void 0,void 0,ot)}executeHitDetection(R,N,Q,et,H){return this.viewRotation_=Q,this.execute_(R,[R.canvas.width,R.canvas.height],N,this.hitDetectionInstructions,!0,et,H)}};var w=o(4591),K=o(5269);const O=["Polygon","Circle","LineString","Image","Text","Default"],M=["Image","Text"],B=O.filter(P=>!M.includes(P)),C={},A=class Y{constructor(R,N,Q,et,H,ot,ht){this.maxExtent_=R,this.overlaps_=et,this.pixelRatio_=Q,this.resolution_=N,this.renderBuffer_=ot,this.executorsByZIndex_={},this.hitDetectionContext_=null,this.hitDetectionTransform_=(0,$.Ue)(),this.renderedContext_=null,this.deferredZIndexContexts_={},this.createExecutors_(H,ht)}clip(R,N){const Q=this.getClipCoords(N);R.beginPath(),R.moveTo(Q[0],Q[1]),R.lineTo(Q[2],Q[3]),R.lineTo(Q[4],Q[5]),R.lineTo(Q[6],Q[7]),R.clip()}createExecutors_(R,N){for(const Q in R){let et=this.executorsByZIndex_[Q];void 0===et&&(et={},this.executorsByZIndex_[Q]=et);const H=R[Q];for(const ot in H)et[ot]=new F(this.resolution_,this.pixelRatio_,this.overlaps_,H[ot],N)}}hasExecutors(R){for(const N in this.executorsByZIndex_){const Q=this.executorsByZIndex_[N];for(let et=0,H=R.length;et<H;++et)if(R[et]in Q)return!0}return!1}forEachFeatureAtCoordinate(R,N,Q,et,H,ot){const ht=2*(et=Math.round(et))+1,mt=(0,$.qC)(this.hitDetectionTransform_,et+.5,et+.5,1/N,-1/N,-Q,-R[0],-R[1]),xt=!this.hitDetectionContext_;xt&&(this.hitDetectionContext_=(0,w.E4)(ht,ht,void 0,{willReadFrequently:!0}));const Rt=this.hitDetectionContext_;let at;Rt.canvas.width!==ht||Rt.canvas.height!==ht?(Rt.canvas.width=ht,Rt.canvas.height=ht):xt||Rt.clearRect(0,0,ht,ht),void 0!==this.renderBuffer_&&(at=(0,U.lJ)(),(0,U.Wj)(at,R),(0,U.f3)(at,N*(this.renderBuffer_+et),at));const pt=function L(P){if(void 0!==C[P])return C[P];const R=2*P+1,N=P*P,Q=new Array(N+1);for(let H=0;H<=P;++H)for(let ot=0;ot<=P;++ot){const ht=H*H+ot*ot;if(ht>N)break;let mt=Q[ht];mt||(mt=[],Q[ht]=mt),mt.push(4*((P+H)*R+(P+ot))+3),H>0&&mt.push(4*((P-H)*R+(P+ot))+3),ot>0&&(mt.push(4*((P+H)*R+(P-ot))+3),H>0&&mt.push(4*((P-H)*R+(P-ot))+3))}const et=[];for(let H=0,ot=Q.length;H<ot;++H)Q[H]&&et.push(...Q[H]);return C[P]=et,et}(et);let Mt;function Ft(bt,Xt,Vt){const he=Rt.getImageData(0,0,ht,ht).data;for(let le=0,Ht=pt.length;le<Ht;le++)if(he[pt[le]]>0){if(!ot||"none"===Vt||"Image"!==Mt&&"Text"!==Mt||ot.includes(bt)){const ft=(pt[le]-3)/4,St=et-ft%ht,kt=et-(ft/ht|0),Lt=H(bt,Xt,St*St+kt*kt);if(Lt)return Lt}Rt.clearRect(0,0,ht,ht);break}}const Dt=Object.keys(this.executorsByZIndex_).map(Number);let Wt,Ut,zt,rt,It;for(Dt.sort(m.j2),Wt=Dt.length-1;Wt>=0;--Wt){const bt=Dt[Wt].toString();for(zt=this.executorsByZIndex_[bt],Ut=O.length-1;Ut>=0;--Ut)if(Mt=O[Ut],rt=zt[Mt],void 0!==rt&&(It=rt.executeHitDetection(Rt,mt,Q,Ft,at),It))return It}}getClipCoords(R){const N=this.maxExtent_;if(!N)return null;const Q=N[0],et=N[1],H=N[2],ot=N[3],ht=[Q,et,Q,ot,H,ot,H,et];return(0,T.vT)(ht,0,8,2,R,ht),ht}isEmpty(){return(0,K.x)(this.executorsByZIndex_)}execute(R,N,Q,et,H,ot,ht){const mt=Object.keys(this.executorsByZIndex_).map(Number);mt.sort(m.j2),ot=ot||O;const xt=O.length;let Rt,at,pt,Mt,Ft;for(ht&&mt.reverse(),Rt=0,at=mt.length;Rt<at;++Rt){const Dt=mt[Rt].toString();for(Ft=this.executorsByZIndex_[Dt],pt=0,Mt=ot.length;pt<Mt;++pt){const Wt=ot[pt],Ut=Ft[Wt];if(void 0!==Ut){const zt=null===ht?void 0:Ut.getZIndexContext(),rt=zt?zt.getContext():R,It=this.maxExtent_&&"Image"!==Wt&&"Text"!==Wt;if(It&&(rt.save(),this.clip(rt,Q)),zt&&"Text"!==Wt&&"Image"!==Wt?zt.pushFunction(bt=>Ut.execute(bt,N,Q,et,H,ht)):Ut.execute(rt,N,Q,et,H,ht),It&&rt.restore(),zt){zt.offset();const bt=mt[Rt]*xt+pt;this.deferredZIndexContexts_[bt]||(this.deferredZIndexContexts_[bt]=[]),this.deferredZIndexContexts_[bt].push(zt)}}}}this.renderedContext_=R}getDeferredZIndexContexts(){return this.deferredZIndexContexts_}getRenderedContext(){return this.renderedContext_}renderDeferred(){const R=this.deferredZIndexContexts_,N=Object.keys(R).map(Number).sort(m.j2);for(let Q=0,et=N.length;Q<et;++Q)R[N[Q]].forEach(H=>{H.draw(this.renderedContext_),H.clear()}),R[N[Q]].length=0}}},8286:(jt,ut,o)=>{"use strict";o.d(ut,{Z:()=>d});var V=o(3369),k=o(9490),J=o(4836),$=o(1463),U=o(5959),S=o(77),b=o(6868),T=o(4554),y=o(8559);const d=class m extends V.Z{constructor(n,h,s,f,g,a,I){super(),this.context_=n,this.pixelRatio_=h,this.extent_=s,this.transform_=f,this.transformRotation_=f?(0,b.FH)(Math.atan2(f[1],f[0]),10):0,this.viewRotation_=g,this.squaredTolerance_=a,this.userTransform_=I,this.contextFillState_=null,this.contextStrokeState_=null,this.contextTextState_=null,this.fillState_=null,this.strokeState_=null,this.image_=null,this.imageAnchorX_=0,this.imageAnchorY_=0,this.imageHeight_=0,this.imageOpacity_=0,this.imageOriginX_=0,this.imageOriginY_=0,this.imageRotateWithView_=!1,this.imageRotation_=0,this.imageScale_=[0,0],this.imageWidth_=0,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=!1,this.textRotation_=0,this.textScale_=[0,0],this.textFillState_=null,this.textStrokeState_=null,this.textState_=null,this.pixelCoordinates_=[],this.tmpLocalTransform_=(0,J.Ue)()}drawImages_(n,h,s,f){if(!this.image_)return;const g=(0,T.vT)(n,h,s,f,this.transform_,this.pixelCoordinates_),a=this.context_,I=this.tmpLocalTransform_,p=a.globalAlpha;1!=this.imageOpacity_&&(a.globalAlpha=p*this.imageOpacity_);let E=this.imageRotation_;0===this.transformRotation_&&(E-=this.viewRotation_),this.imageRotateWithView_&&(E+=this.viewRotation_);for(let F=0,w=g.length;F<w;F+=2){const K=g[F]-this.imageAnchorX_,O=g[F+1]-this.imageAnchorY_;if(0!==E||1!=this.imageScale_[0]||1!=this.imageScale_[1]){const M=K+this.imageAnchorX_,B=O+this.imageAnchorY_;(0,J.qC)(I,M,B,1,1,E,-M,-B),a.save(),a.transform.apply(a,I),a.translate(M,B),a.scale(this.imageScale_[0],this.imageScale_[1]),a.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,-this.imageAnchorX_,-this.imageAnchorY_,this.imageWidth_,this.imageHeight_),a.restore()}else a.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,K,O,this.imageWidth_,this.imageHeight_)}1!=this.imageOpacity_&&(a.globalAlpha=p)}drawText_(n,h,s,f){if(!this.textState_||""===this.text_)return;this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);const g=(0,T.vT)(n,h,s,f,this.transform_,this.pixelCoordinates_),a=this.context_;let I=this.textRotation_;for(0===this.transformRotation_&&(I-=this.viewRotation_),this.textRotateWithView_&&(I+=this.viewRotation_);h<s;h+=f){const p=g[h]+this.textOffsetX_,E=g[h+1]+this.textOffsetY_;0!==I||1!=this.textScale_[0]||1!=this.textScale_[1]?(a.save(),a.translate(p-this.textOffsetX_,E-this.textOffsetY_),a.rotate(I),a.translate(this.textOffsetX_,this.textOffsetY_),a.scale(this.textScale_[0],this.textScale_[1]),this.textStrokeState_&&a.strokeText(this.text_,0,0),this.textFillState_&&a.fillText(this.text_,0,0),a.restore()):(this.textStrokeState_&&a.strokeText(this.text_,p,E),this.textFillState_&&a.fillText(this.text_,p,E))}}moveToLineTo_(n,h,s,f,g){const a=this.context_,I=(0,T.vT)(n,h,s,f,this.transform_,this.pixelCoordinates_);a.moveTo(I[0],I[1]);let p=I.length;g&&(p-=2);for(let E=2;E<p;E+=2)a.lineTo(I[E],I[E+1]);return g&&a.closePath(),s}drawRings_(n,h,s,f){for(let g=0,a=s.length;g<a;++g)h=this.moveToLineTo_(n,h,s[g],f,!0);return h}drawCircle(n){if(this.squaredTolerance_&&(n=n.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),(0,S.kK)(this.extent_,n.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const h=(0,y.Kr)(n,this.transform_,this.pixelCoordinates_),s=h[2]-h[0],f=h[3]-h[1],g=Math.sqrt(s*s+f*f),a=this.context_;a.beginPath(),a.arc(h[0],h[1],g,0,2*Math.PI),this.fillState_&&a.fill(),this.strokeState_&&a.stroke()}""!==this.text_&&this.drawText_(n.getCenter(),0,2,2)}}setStyle(n){this.setFillStrokeStyle(n.getFill(),n.getStroke()),this.setImageStyle(n.getImage()),this.setTextStyle(n.getText())}setTransform(n){this.transform_=n}drawGeometry(n){switch(n.getType()){case"Point":this.drawPoint(n);break;case"LineString":this.drawLineString(n);break;case"Polygon":this.drawPolygon(n);break;case"MultiPoint":this.drawMultiPoint(n);break;case"MultiLineString":this.drawMultiLineString(n);break;case"MultiPolygon":this.drawMultiPolygon(n);break;case"GeometryCollection":this.drawGeometryCollection(n);break;case"Circle":this.drawCircle(n)}}drawFeature(n,h){const s=h.getGeometryFunction()(n);s&&(this.setStyle(h),this.drawGeometry(s))}drawGeometryCollection(n){const h=n.getGeometriesArray();for(let s=0,f=h.length;s<f;++s)this.drawGeometry(h[s])}drawPoint(n){this.squaredTolerance_&&(n=n.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const h=n.getFlatCoordinates(),s=n.getStride();this.image_&&this.drawImages_(h,0,h.length,s),""!==this.text_&&this.drawText_(h,0,h.length,s)}drawMultiPoint(n){this.squaredTolerance_&&(n=n.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const h=n.getFlatCoordinates(),s=n.getStride();this.image_&&this.drawImages_(h,0,h.length,s),""!==this.text_&&this.drawText_(h,0,h.length,s)}drawLineString(n){if(this.squaredTolerance_&&(n=n.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),(0,S.kK)(this.extent_,n.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const h=this.context_,s=n.getFlatCoordinates();h.beginPath(),this.moveToLineTo_(s,0,s.length,n.getStride(),!1),h.stroke()}if(""!==this.text_){const h=n.getFlatMidpoint();this.drawText_(h,0,2,2)}}}drawMultiLineString(n){this.squaredTolerance_&&(n=n.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const h=n.getExtent();if((0,S.kK)(this.extent_,h)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const s=this.context_,f=n.getFlatCoordinates();let g=0;const a=n.getEnds(),I=n.getStride();s.beginPath();for(let p=0,E=a.length;p<E;++p)g=this.moveToLineTo_(f,g,a[p],I,!1);s.stroke()}if(""!==this.text_){const s=n.getFlatMidpoints();this.drawText_(s,0,s.length,2)}}}drawPolygon(n){if(this.squaredTolerance_&&(n=n.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),(0,S.kK)(this.extent_,n.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const h=this.context_;h.beginPath(),this.drawRings_(n.getOrientedFlatCoordinates(),0,n.getEnds(),n.getStride()),this.fillState_&&h.fill(),this.strokeState_&&h.stroke()}if(""!==this.text_){const h=n.getFlatInteriorPoint();this.drawText_(h,0,2,2)}}}drawMultiPolygon(n){if(this.squaredTolerance_&&(n=n.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),(0,S.kK)(this.extent_,n.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const h=this.context_,s=n.getOrientedFlatCoordinates();let f=0;const g=n.getEndss(),a=n.getStride();h.beginPath();for(let I=0,p=g.length;I<p;++I)f=this.drawRings_(s,f,g[I],a);this.fillState_&&h.fill(),this.strokeState_&&h.stroke()}if(""!==this.text_){const h=n.getFlatInteriorPoints();this.drawText_(h,0,h.length,2)}}}setContextFillState_(n){const h=this.context_,s=this.contextFillState_;s?s.fillStyle!=n.fillStyle&&(s.fillStyle=n.fillStyle,h.fillStyle=n.fillStyle):(h.fillStyle=n.fillStyle,this.contextFillState_={fillStyle:n.fillStyle})}setContextStrokeState_(n){const h=this.context_,s=this.contextStrokeState_;s?(s.lineCap!=n.lineCap&&(s.lineCap=n.lineCap,h.lineCap=n.lineCap),(0,U.fS)(s.lineDash,n.lineDash)||h.setLineDash(s.lineDash=n.lineDash),s.lineDashOffset!=n.lineDashOffset&&(s.lineDashOffset=n.lineDashOffset,h.lineDashOffset=n.lineDashOffset),s.lineJoin!=n.lineJoin&&(s.lineJoin=n.lineJoin,h.lineJoin=n.lineJoin),s.lineWidth!=n.lineWidth&&(s.lineWidth=n.lineWidth,h.lineWidth=n.lineWidth),s.miterLimit!=n.miterLimit&&(s.miterLimit=n.miterLimit,h.miterLimit=n.miterLimit),s.strokeStyle!=n.strokeStyle&&(s.strokeStyle=n.strokeStyle,h.strokeStyle=n.strokeStyle)):(h.lineCap=n.lineCap,h.setLineDash(n.lineDash),h.lineDashOffset=n.lineDashOffset,h.lineJoin=n.lineJoin,h.lineWidth=n.lineWidth,h.miterLimit=n.miterLimit,h.strokeStyle=n.strokeStyle,this.contextStrokeState_={lineCap:n.lineCap,lineDash:n.lineDash,lineDashOffset:n.lineDashOffset,lineJoin:n.lineJoin,lineWidth:n.lineWidth,miterLimit:n.miterLimit,strokeStyle:n.strokeStyle})}setContextTextState_(n){const h=this.context_,s=this.contextTextState_,f=n.textAlign?n.textAlign:$.PH;s?(s.font!=n.font&&(s.font=n.font,h.font=n.font),s.textAlign!=f&&(s.textAlign=f,h.textAlign=f),s.textBaseline!=n.textBaseline&&(s.textBaseline=n.textBaseline,h.textBaseline=n.textBaseline)):(h.font=n.font,h.textAlign=f,h.textBaseline=n.textBaseline,this.contextTextState_={font:n.font,textAlign:f,textBaseline:n.textBaseline})}setFillStrokeStyle(n,h){if(n){const s=n.getColor();this.fillState_={fillStyle:(0,k.y)(s||$.bL)}}else this.fillState_=null;if(h){const s=h.getColor(),f=h.getLineCap(),g=h.getLineDash(),a=h.getLineDashOffset(),I=h.getLineJoin(),p=h.getWidth(),E=h.getMiterLimit(),F=g||$.X9;this.strokeState_={lineCap:void 0!==f?f:$.mb,lineDash:1===this.pixelRatio_?F:F.map(w=>w*this.pixelRatio_),lineDashOffset:(a||$.He)*this.pixelRatio_,lineJoin:void 0!==I?I:$.rc,lineWidth:(void 0!==p?p:$.yC)*this.pixelRatio_,miterLimit:void 0!==E?E:$.V4,strokeStyle:(0,k.y)(s||$.Tx)}}else this.strokeState_=null}setImageStyle(n){let h;if(!n||!(h=n.getSize()))return void(this.image_=null);const s=n.getPixelRatio(this.pixelRatio_),f=n.getAnchor(),g=n.getOrigin();this.image_=n.getImage(this.pixelRatio_),this.imageAnchorX_=f[0]*s,this.imageAnchorY_=f[1]*s,this.imageHeight_=h[1]*s,this.imageOpacity_=n.getOpacity(),this.imageOriginX_=g[0],this.imageOriginY_=g[1],this.imageRotateWithView_=n.getRotateWithView(),this.imageRotation_=n.getRotation();const a=n.getScaleArray();this.imageScale_=[a[0]*this.pixelRatio_/s,a[1]*this.pixelRatio_/s],this.imageWidth_=h[0]*s}setTextStyle(n){if(n){const h=n.getFill();if(h){const O=h.getColor();this.textFillState_={fillStyle:(0,k.y)(O||$.bL)}}else this.textFillState_=null;const s=n.getStroke();if(s){const O=s.getColor(),M=s.getLineCap(),B=s.getLineDash(),Y=s.getLineDashOffset(),C=s.getLineJoin(),L=s.getWidth(),A=s.getMiterLimit();this.textStrokeState_={lineCap:void 0!==M?M:$.mb,lineDash:B||$.X9,lineDashOffset:Y||$.He,lineJoin:void 0!==C?C:$.rc,lineWidth:void 0!==L?L:$.yC,miterLimit:void 0!==A?A:$.V4,strokeStyle:(0,k.y)(O||$.Tx)}}else this.textStrokeState_=null;const f=n.getFont(),g=n.getOffsetX(),a=n.getOffsetY(),I=n.getRotateWithView(),p=n.getRotation(),E=n.getScaleArray(),F=n.getText(),w=n.getTextAlign(),K=n.getTextBaseline();this.textState_={font:void 0!==f?f:$.Df,textAlign:void 0!==w?w:$.PH,textBaseline:void 0!==K?K:$.ru},this.text_=void 0!==F?Array.isArray(F)?F.reduce((O,M,B)=>O+(B%2?" ":M),""):F:"",this.textOffsetX_=void 0!==g?this.pixelRatio_*g:0,this.textOffsetY_=void 0!==a?this.pixelRatio_*a:0,this.textRotateWithView_=void 0!==I&&I,this.textRotation_=void 0!==p?p:0,this.textScale_=[this.pixelRatio_*E[0],this.pixelRatio_*E[1]]}else this.text_=""}}},7544:(jt,ut,o)=>{"use strict";o.d(ut,{$O:()=>$,Yc:()=>J,ZP:()=>S,gO:()=>k,s3:()=>U});const V={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},k=[V.FILL],J=[V.STROKE],$=[V.BEGIN_PATH],U=[V.CLOSE_PATH],S=V},9577:(jt,ut,o)=>{"use strict";o.d(ut,{I:()=>m,Z:()=>l});var V=o(5472),k=o(7544),J=o(9490),$=o(1463),U=o(1293),S=o(77),b=o(6868);function T(n,h,s,f,g){const a=[];let I=s,p=0,E=h.slice(s,2);for(;p<n&&I+g<f;){const[F,w]=E.slice(-2),K=h[I+g],O=h[I+g+1],M=Math.sqrt((K-F)*(K-F)+(O-w)*(O-w));if(p+=M,p>=n){const B=(n-p+M)/M,Y=(0,b.t7)(F,K,B),C=(0,b.t7)(w,O,B);E.push(Y,C),a.push(E),E=[Y,C],p==n&&(I+=g),p=0}else if(p<n)E.push(h[I+g],h[I+g+1]),I+=g;else{const B=M-p,Y=(0,b.t7)(F,K,B/M),C=(0,b.t7)(w,O,B/M);E.push(Y,C),a.push(E),E=[Y,C],p=0,I+=g}}return p>0&&a.push(E),a}function y(n,h,s,f,g){let w,K,O,M,B,Y,C,L,A,P,a=s,I=s,p=0,E=0,F=s;for(K=s;K<f;K+=g){const R=h[K],N=h[K+1];void 0!==B&&(A=R-B,P=N-Y,M=Math.sqrt(A*A+P*P),void 0!==C&&(E+=O,w=Math.acos((C*A+L*P)/(O*M)),w>n&&(E>p&&(p=E,a=F,I=K),E=0,F=K-g)),O=M,C=A,L=P),B=R,Y=N}return E+=M,E>p?[F,K]:[a,I]}const m={left:0,center:.5,right:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1},l=class d extends V.Z{constructor(h,s,f,g){super(h,s,f,g),this.labels_=null,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=void 0,this.textRotation_=0,this.textFillState_=null,this.fillStates={},this.fillStates[$.bL]={fillStyle:$.bL},this.textStrokeState_=null,this.strokeStates={},this.textState_={},this.textStates={},this.textKey_="",this.fillKey_="",this.strokeKey_="",this.declutterMode_=void 0,this.declutterImageWithText_=void 0}finish(){const h=super.finish();return h.textStates=this.textStates,h.fillStates=this.fillStates,h.strokeStates=this.strokeStates,h}drawText(h,s,f){const I=this.textState_;if(""===this.text_||!I||!this.textFillState_&&!this.textStrokeState_)return;const p=this.coordinates;let E=p.length;const F=h.getType();let w=null,K=h.getStride();if("line"!==I.placement||"LineString"!=F&&"MultiLineString"!=F&&"Polygon"!=F&&"MultiPolygon"!=F){let O=I.overflow?null:[];switch(F){case"Point":case"MultiPoint":w=h.getFlatCoordinates();break;case"LineString":w=h.getFlatMidpoint();break;case"Circle":w=h.getCenter();break;case"MultiLineString":w=h.getFlatMidpoints(),K=2;break;case"Polygon":w=h.getFlatInteriorPoint(),I.overflow||O.push(w[2]/this.resolution),K=3;break;case"MultiPolygon":const A=h.getFlatInteriorPoints();w=[];for(let P=0,R=A.length;P<R;P+=3)I.overflow||O.push(A[P+2]/this.resolution),w.push(A[P],A[P+1]);if(0===w.length)return;K=2}const M=this.appendFlatPointCoordinates(w,K);if(M===E)return;if(O&&(M-E)/2!=w.length/K){let A=E/2;O=O.filter((P,R)=>{const N=p[2*(A+R)]===w[R*K]&&p[2*(A+R)+1]===w[R*K+1];return N||--A,N})}this.saveTextStates_(),(I.backgroundFill||I.backgroundStroke)&&(this.setFillStrokeStyle(I.backgroundFill,I.backgroundStroke),I.backgroundFill&&this.updateFillStyle(this.state,this.createFill),I.backgroundStroke&&(this.updateStrokeStyle(this.state,this.applyStroke),this.hitDetectionInstructions.push(this.createStroke(this.state)))),this.beginGeometry(h,s,f);let B=I.padding;if(B!=$.oB&&(I.scale[0]<0||I.scale[1]<0)){let A=I.padding[0],P=I.padding[1],R=I.padding[2],N=I.padding[3];I.scale[0]<0&&(P=-P,N=-N),I.scale[1]<0&&(A=-A,R=-R),B=[A,P,R,N]}const Y=this.pixelRatio;this.instructions.push([k.ZP.DRAW_IMAGE,E,M,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[1,1],NaN,this.declutterMode_,this.declutterImageWithText_,B==$.oB?$.oB:B.map(function(A){return A*Y}),!!I.backgroundFill,!!I.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,O]);const C=1/Y,L=this.state.fillStyle;I.backgroundFill&&(this.state.fillStyle=$.bL,this.hitDetectionInstructions.push(this.createFill(this.state))),this.hitDetectionInstructions.push([k.ZP.DRAW_IMAGE,E,M,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[C,C],NaN,this.declutterMode_,this.declutterImageWithText_,B,!!I.backgroundFill,!!I.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_?$.bL:this.fillKey_,this.textOffsetX_,this.textOffsetY_,O]),I.backgroundFill&&(this.state.fillStyle=L,this.hitDetectionInstructions.push(this.createFill(this.state))),this.endGeometry(s)}else{if(!(0,S.kK)(this.maxExtent,h.getExtent()))return;let O;if(w=h.getFlatCoordinates(),"LineString"==F)O=[w.length];else if("MultiLineString"==F)O=h.getEnds();else if("Polygon"==F)O=h.getEnds().slice(0,1);else if("MultiPolygon"==F){const C=h.getEndss();O=[];for(let L=0,A=C.length;L<A;++L)O.push(C[L][0])}this.beginGeometry(h,s,f);const M=I.repeat,B=M?void 0:I.textAlign;let Y=0;for(let C=0,L=O.length;C<L;++C){let A;A=M?T(M*this.resolution,w,Y,O[C],K):[w.slice(Y,O[C])];for(let P=0,R=A.length;P<R;++P){const N=A[P];let Q=0,et=N.length;if(null==B){const ot=y(I.maxAngle,N,0,N.length,2);Q=ot[0],et=ot[1]}for(let ot=Q;ot<et;ot+=K)p.push(N[ot],N[ot+1]);const H=p.length;Y=O[C],this.drawChars_(E,H),E=H}}this.endGeometry(s)}}saveTextStates_(){const h=this.textStrokeState_,s=this.textState_,f=this.textFillState_,g=this.strokeKey_;h&&(g in this.strokeStates||(this.strokeStates[g]={strokeStyle:h.strokeStyle,lineCap:h.lineCap,lineDashOffset:h.lineDashOffset,lineWidth:h.lineWidth,lineJoin:h.lineJoin,miterLimit:h.miterLimit,lineDash:h.lineDash}));const a=this.textKey_;a in this.textStates||(this.textStates[a]={font:s.font,textAlign:s.textAlign||$.PH,justify:s.justify,textBaseline:s.textBaseline||$.ru,scale:s.scale});const I=this.fillKey_;f&&(I in this.fillStates||(this.fillStates[I]={fillStyle:f.fillStyle}))}drawChars_(h,s){const f=this.textStrokeState_,g=this.textState_,a=this.strokeKey_,I=this.textKey_,p=this.fillKey_;this.saveTextStates_();const E=this.pixelRatio,F=m[g.textBaseline],w=this.textOffsetY_*E,K=this.text_,O=f?f.lineWidth*Math.abs(g.scale[0])/2:0;this.instructions.push([k.ZP.DRAW_CHARS,h,s,F,g.overflow,p,g.maxAngle,E,w,a,O*E,K,I,1,this.declutterMode_]),this.hitDetectionInstructions.push([k.ZP.DRAW_CHARS,h,s,F,g.overflow,p&&$.bL,g.maxAngle,E,w,a,O*E,K,I,1/E,this.declutterMode_])}setTextStyle(h,s){let f,g,a;if(h){const I=h.getFill();I?(g=this.textFillState_,g||(g={},this.textFillState_=g),g.fillStyle=(0,J.y)(I.getColor()||$.bL)):(g=null,this.textFillState_=g);const p=h.getStroke();if(p){a=this.textStrokeState_,a||(a={},this.textStrokeState_=a);const B=p.getLineDash(),Y=p.getLineDashOffset(),C=p.getWidth(),L=p.getMiterLimit();a.lineCap=p.getLineCap()||$.mb,a.lineDash=B?B.slice():$.X9,a.lineDashOffset=void 0===Y?$.He:Y,a.lineJoin=p.getLineJoin()||$.rc,a.lineWidth=void 0===C?$.yC:C,a.miterLimit=void 0===L?$.V4:L,a.strokeStyle=(0,J.y)(p.getColor()||$.Tx)}else a=null,this.textStrokeState_=a;f=this.textState_;const E=h.getFont()||$.Df;(0,$.Qx)(E);const F=h.getScaleArray();f.overflow=h.getOverflow(),f.font=E,f.maxAngle=h.getMaxAngle(),f.placement=h.getPlacement(),f.textAlign=h.getTextAlign(),f.repeat=h.getRepeat(),f.justify=h.getJustify(),f.textBaseline=h.getTextBaseline()||$.ru,f.backgroundFill=h.getBackgroundFill(),f.backgroundStroke=h.getBackgroundStroke(),f.padding=h.getPadding()||$.oB,f.scale=void 0===F?[1,1]:F;const w=h.getOffsetX(),K=h.getOffsetY(),O=h.getRotateWithView(),M=h.getRotation();this.text_=h.getText()||"",this.textOffsetX_=void 0===w?0:w,this.textOffsetY_=void 0===K?0:K,this.textRotateWithView_=void 0!==O&&O,this.textRotation_=void 0===M?0:M,this.strokeKey_=a?("string"==typeof a.strokeStyle?a.strokeStyle:(0,U.sq)(a.strokeStyle))+a.lineCap+a.lineDashOffset+"|"+a.lineWidth+a.lineJoin+a.miterLimit+"["+a.lineDash.join()+"]":"",this.textKey_=f.font+f.scale+(f.textAlign||"?")+(f.repeat||"?")+(f.justify||"?")+(f.textBaseline||"?"),this.fillKey_=g&&g.fillStyle?"string"==typeof g.fillStyle?g.fillStyle:"|"+(0,U.sq)(g.fillStyle):""}else this.text_="";this.declutterMode_=h.getDeclutterMode(),this.declutterImageWithText_=s}}},413:(jt,ut,o)=>{"use strict";o.d(ut,{Z:()=>J});var V=o(4591);const J=class k{constructor(){this.instructions_=[],this.zIndex=0,this.offset_=0,this.context_=new Proxy((0,V.W8)(),{get:(U,S)=>{if("function"==typeof(0,V.W8)()[S])return this.instructions_[this.zIndex+this.offset_]||(this.instructions_[this.zIndex+this.offset_]=[]),this.instructions_[this.zIndex+this.offset_].push(S),this.pushMethodArgs_},set:(U,S,b)=>(this.instructions_[this.zIndex+this.offset_]||(this.instructions_[this.zIndex+this.offset_]=[]),this.instructions_[this.zIndex+this.offset_].push(S,b),!0)})}pushMethodArgs_=(...U)=>(this.instructions_[this.zIndex+this.offset_].push(U),this);pushFunction(U){this.instructions_[this.zIndex+this.offset_].push(U)}getContext(){return this.context_}draw(U){this.instructions_.forEach(S=>{for(let b=0,T=S.length;b<T;++b){const y=S[b];if("function"==typeof y){y(U);continue}const m=S[++b];if("function"==typeof U[y])U[y](...m);else{if("function"==typeof m){U[y]=m(U);continue}U[y]=m}}})}clear(){this.instructions_.length=0,this.zIndex=0,this.offset_=0}offset(){this.offset_=this.instructions_.length,this.zIndex=0}}},9034:(jt,ut,o)=>{"use strict";o.d(ut,{TU:()=>y,UN:()=>T,ix:()=>m});var V=o(8286),k=o(9269),J=o(5959),$=o(6868),U=o(4591),S=o(7704),b=o(77);const T=.5;function y(d,l,n,h,s,f,g,a,I){const p=I?(0,S.Fj)(s,I):s,w=(0,U.E4)(d[0]*T,d[1]*T);w.imageSmoothingEnabled=!1;const K=w.canvas,O=new V.Z(w,T,s,null,g,a,I?(0,S.WO)((0,S.Cs)(),I):null),M=n.length,B=Math.floor(16777215/M),Y={};for(let L=1;L<=M;++L){const A=n[L-1],P=A.getStyleFunction()||h;if(!P)continue;let R=P(A,f);if(!R)continue;Array.isArray(R)||(R=[R]);const Q=(L*B).toString(16).padStart(7,"#00000");for(let et=0,H=R.length;et<H;++et){const ot=R[et],ht=ot.getGeometryFunction()(A);if(!ht||!(0,b.kK)(p,ht.getExtent()))continue;const mt=ot.clone(),xt=mt.getFill();xt&&xt.setColor(Q);const Rt=mt.getStroke();Rt&&(Rt.setColor(Q),Rt.setLineDash(null)),mt.setText(void 0);const at=ot.getImage();if(at){const Dt=at.getImageSize();if(!Dt)continue;const Wt=(0,U.E4)(Dt[0],Dt[1],void 0,{alpha:!1}),Ut=Wt.canvas;Wt.fillStyle=Q,Wt.fillRect(0,0,Ut.width,Ut.height),mt.setImage(new k.Z({img:Ut,anchor:at.getAnchor(),anchorXUnits:"pixels",anchorYUnits:"pixels",offset:at.getOrigin(),opacity:1,size:at.getSize(),scale:at.getScale(),rotation:at.getRotation(),rotateWithView:at.getRotateWithView()}))}const pt=mt.getZIndex()||0;let Mt=Y[pt];Mt||(Mt={},Y[pt]=Mt,Mt.Polygon=[],Mt.Circle=[],Mt.LineString=[],Mt.Point=[]);const Ft=ht.getType();if("GeometryCollection"===Ft){const Dt=ht.getGeometriesArrayRecursive();for(let Wt=0,Ut=Dt.length;Wt<Ut;++Wt){const zt=Dt[Wt];Mt[zt.getType().replace("Multi","")].push(zt,mt)}}else Mt[Ft.replace("Multi","")].push(ht,mt)}}const C=Object.keys(Y).map(Number).sort(J.j2);for(let L=0,A=C.length;L<A;++L){const P=Y[C[L]];for(const R in P){const N=P[R];for(let Q=0,et=N.length;Q<et;Q+=2){O.setStyle(N[Q+1]);for(let H=0,ot=l.length;H<ot;++H)O.setTransform(l[H]),O.drawGeometry(N[Q])}}}return w.getImageData(0,0,K.width,K.height)}function m(d,l,n){const h=[];if(n){const s=Math.floor(Math.round(d[0])*T),f=Math.floor(Math.round(d[1])*T),g=4*((0,$.uZ)(s,0,n.width-1)+(0,$.uZ)(f,0,n.height-1)*n.width),E=n.data[g+2]+256*(n.data[g+1]+256*n.data[g]),F=Math.floor(16777215/l.length);E&&E%F==0&&h.push(l[E/F-1])}return h}},1740:(jt,ut,o)=>{"use strict";o.d(ut,{Z:()=>S});var V=o(4855),k=o(6343),J=o(8287),$=o(1293);const S=class U extends J.Z{constructor(T){super(),this.ready=!0,this.boundHandleImageChange_=this.handleImageChange_.bind(this),this.layer_=T}getFeatures(T){return(0,$.O3)()}getData(T){return null}prepareFrame(T){return(0,$.O3)()}renderFrame(T,y){return(0,$.O3)()}loadedTileCallback(T,y,m){T[y]||(T[y]={}),T[y][m.tileCoord.toString()]=m}createLoadedTileFinder(T,y,m){return(d,l)=>{const n=this.loadedTileCallback.bind(this,m,d);return T.forEachLoadedTile(y,d,l,n)}}forEachFeatureAtCoordinate(T,y,m,d,l){}getLayer(){return this.layer_}handleFontsChanged(){}handleImageChange_(T){const y=T.target;(y.getState()===k.Z.LOADED||y.getState()===k.Z.ERROR)&&this.renderIfReadyAndVisible()}loadImage(T){let y=T.getState();return y!=k.Z.LOADED&&y!=k.Z.ERROR&&T.addEventListener(V.Z.CHANGE,this.boundHandleImageChange_),y==k.Z.IDLE&&(T.load(),y=T.getState()),y==k.Z.LOADED}renderIfReadyAndVisible(){const T=this.getLayer();T&&T.getVisible()&&"ready"===T.getSourceState()&&T.changed()}renderDeferred(T){}disposeInternal(){delete this.layer_,super.disposeInternal()}}},2041:(jt,ut,o)=>{"use strict";o.d(ut,{Z:()=>T});var V=o(7495),k=o(6343),J=o(1880),$=o(4836),U=o(77),S=o(7704);const T=class b extends V.Z{constructor(m){super(m),this.image_=null}getImage(){return this.image_?this.image_.getImage():null}prepareFrame(m){const d=m.layerStatesArray[m.layerIndex],l=m.pixelRatio,n=m.viewState,h=n.resolution,s=this.getLayer().getSource(),f=m.viewHints;let g=m.extent;if(void 0!==d.extent&&(g=(0,U.Ed)(g,(0,S.dY)(d.extent,n.projection))),!f[J.Z.ANIMATING]&&!f[J.Z.INTERACTING]&&!(0,U.xb)(g))if(s){const I=s.getImage(g,h,l,n.projection);I&&(this.loadImage(I)?this.image_=I:I.getState()===k.Z.EMPTY&&(this.image_=null))}else this.image_=null;return!!this.image_}getData(m){const d=this.frameState;if(!d)return null;const l=this.getLayer(),n=(0,$.nn)(d.pixelToCoordinateTransform,m.slice()),h=l.getExtent();if(h&&!(0,U.b8)(h,n))return null;const s=this.image_.getExtent(),f=this.image_.getImage(),g=(0,U.dz)(s),a=Math.floor(f.width*((n[0]-s[0])/g));if(a<0||a>=f.width)return null;const I=(0,U.Cr)(s),p=Math.floor(f.height*((s[3]-n[1])/I));return p<0||p>=f.height?null:this.getImageData(f,a,p)}renderFrame(m,d){const l=this.image_,n=l.getExtent(),h=l.getResolution(),[s,f]=Array.isArray(h)?h:[h,h],g=l.getPixelRatio(),a=m.layerStatesArray[m.layerIndex],I=m.pixelRatio,p=m.viewState,E=p.center,F=p.resolution,w=I*s/(F*g),K=I*f/(F*g);this.prepareContainer(m,d);const O=this.context.canvas.width,M=this.context.canvas.height,B=this.getRenderContext(m);let Y=!1,C=!0;if(a.extent){const N=(0,S.dY)(a.extent,p.projection);C=(0,U.kK)(N,m.extent),Y=C&&!(0,U.r4)(N,m.extent),Y&&this.clipUnrotated(B,m,N)}const L=l.getImage(),A=(0,$.qC)(this.tempTransform,O/2,M/2,w,K,0,g*(n[0]-E[0])/s,g*(E[1]-n[3])/f);this.renderedResolution=f*I/g;const P=L.width*A[0],R=L.height*A[3];if(this.getLayer().getSource().getInterpolate()||(B.imageSmoothingEnabled=!1),this.preRender(B,m),C&&P>=.5&&R>=.5){const N=A[4],Q=A[5],et=a.opacity;1!==et&&(B.save(),B.globalAlpha=et),B.drawImage(L,0,0,+L.width,+L.height,N,Q,P,R),1!==et&&B.restore()}return this.postRender(this.context,m),Y&&B.restore(),B.imageSmoothingEnabled=!0,this.container}}},7495:(jt,ut,o)=>{"use strict";o.d(ut,{Z:()=>h,r:()=>m});var V=o(1740),k=o(3220),J=o(5603),$=o(413),U=o(4836),S=o(9432),b=o(4591),T=o(5959),y=o(77);const m=[];let d=null;const h=class n extends V.Z{constructor(f){super(f),this.container=null,this.tempTransform=(0,U.Ue)(),this.pixelTransform=(0,U.Ue)(),this.inversePixelTransform=(0,U.Ue)(),this.context=null,this.deferredContext_=null,this.containerReused=!1,this.pixelContext_=null,this.frameState=null}getImageData(f,g,a){let I;d||function l(){d=(0,b.E4)(1,1,void 0,{willReadFrequently:!0})}(),d.clearRect(0,0,1,1);try{d.drawImage(f,g,a,1,1,0,0,1,1),I=d.getImageData(0,0,1,1).data}catch{return d=null,null}return I}getBackground(f){let a=this.getLayer().getBackground();return"function"==typeof a&&(a=a(f.viewState.resolution)),a||void 0}useContainer(f,g,a){const I=this.getLayer().getClassName();let p,E;if(f&&f.className===I&&(!a||f&&f.style.backgroundColor&&(0,T.fS)((0,S._2)(f.style.backgroundColor),(0,S._2)(a)))){const F=f.firstElementChild;F instanceof HTMLCanvasElement&&(E=F.getContext("2d"))}if(E&&E.canvas.style.transform===g?(this.container=f,this.context=E,this.containerReused=!0):this.containerReused?(this.container=null,this.context=null,this.containerReused=!1):this.container&&(this.container.style.backgroundColor=null),!this.container){p=document.createElement("div"),p.className=I;let F=p.style;F.position="absolute",F.width="100%",F.height="100%",E=(0,b.E4)();const w=E.canvas;p.appendChild(w),F=w.style,F.position="absolute",F.left="0",F.transformOrigin="top left",this.container=p,this.context=E}!this.containerReused&&a&&!this.container.style.backgroundColor&&(this.container.style.backgroundColor=a)}clipUnrotated(f,g,a){const I=(0,y.rL)(a),p=(0,y.Xv)(a),E=(0,y.w$)(a),F=(0,y.hC)(a);(0,U.nn)(g.coordinateToPixelTransform,I),(0,U.nn)(g.coordinateToPixelTransform,p),(0,U.nn)(g.coordinateToPixelTransform,E),(0,U.nn)(g.coordinateToPixelTransform,F);const w=this.inversePixelTransform;(0,U.nn)(w,I),(0,U.nn)(w,p),(0,U.nn)(w,E),(0,U.nn)(w,F),f.save(),f.beginPath(),f.moveTo(Math.round(I[0]),Math.round(I[1])),f.lineTo(Math.round(p[0]),Math.round(p[1])),f.lineTo(Math.round(E[0]),Math.round(E[1])),f.lineTo(Math.round(F[0]),Math.round(F[1])),f.clip()}prepareContainer(f,g){const a=f.extent,I=f.viewState.resolution,p=f.viewState.rotation,E=f.pixelRatio,F=Math.round((0,y.dz)(a)/I*E),w=Math.round((0,y.Cr)(a)/I*E);(0,U.qC)(this.pixelTransform,f.size[0]/2,f.size[1]/2,1/E,1/E,p,-F/2,-w/2),(0,U.nb)(this.inversePixelTransform,this.pixelTransform);const K=(0,U.BB)(this.pixelTransform);if(this.useContainer(g,K,this.getBackground(f)),!this.containerReused){const O=this.context.canvas;O.width!=F||O.height!=w?(O.width=F,O.height=w):this.context.clearRect(0,0,F,w),K!==O.style.transform&&(O.style.transform=K)}}dispatchRenderEvent_(f,g,a){const I=this.getLayer();if(I.hasListener(f)){const p=new k.Z(f,this.inversePixelTransform,a,g);I.dispatchEvent(p)}}preRender(f,g){this.frameState=g,!g.declutter&&this.dispatchRenderEvent_(J.Z.PRERENDER,f,g)}postRender(f,g){g.declutter||this.dispatchRenderEvent_(J.Z.POSTRENDER,f,g)}renderDeferredInternal(f){}getRenderContext(f){return f.declutter&&!this.deferredContext_&&(this.deferredContext_=new $.Z),f.declutter?this.deferredContext_.getContext():this.context}renderDeferred(f){f.declutter&&(this.dispatchRenderEvent_(J.Z.PRERENDER,this.context,f),f.declutter&&this.deferredContext_&&(this.deferredContext_.draw(this.context),this.deferredContext_.clear()),this.renderDeferredInternal(f),this.dispatchRenderEvent_(J.Z.POSTRENDER,this.context,f))}getRenderTransform(f,g,a,I,p,E,F){const O=I/g;return(0,U.qC)(this.tempTransform,p/2,E/2,O,-O,-a,-f[0]+F,-f[1])}disposeInternal(){delete this.frameState,super.disposeInternal()}}},930:(jt,ut,o)=>{"use strict";o.d(ut,{Z:()=>n});var V=o(7495),k=o(7648),J=o(6162),$=o(8702),U=o(33),S=o(4836),b=o(5959),T=o(77),y=o(7704),m=o(1293),d=o(7195);const n=class l extends V.Z{constructor(s){super(s),this.extentChanged=!0,this.renderedExtent_=null,this.renderedProjection=null,this.renderedTiles=[],this.newTiles_=!1,this.tmpExtent=(0,T.lJ)(),this.tmpTileRange_=new $.Z(0,0,0,0)}isDrawableTile(s){const f=this.getLayer(),g=s.getState(),a=f.getUseInterimTilesOnError();return g==U.Z.LOADED||g==U.Z.EMPTY||g==U.Z.ERROR&&!a}getTile(s,f,g,a){const I=a.pixelRatio,p=a.viewState.projection,E=this.getLayer();let w=E.getSource().getTile(s,f,g,I,p);return w.getState()==U.Z.ERROR&&E.getUseInterimTilesOnError()&&E.getPreload()>0&&(this.newTiles_=!0),this.isDrawableTile(w)||(w=w.getInterimTile()),w}getData(s){const f=this.frameState;if(!f)return null;const g=this.getLayer(),a=(0,S.nn)(f.pixelToCoordinateTransform,s.slice()),I=g.getExtent();if(I&&!(0,T.b8)(I,a))return null;const p=f.pixelRatio,E=f.viewState.projection,F=f.viewState,w=g.getRenderSource(),K=w.getTileGridForProjection(F.projection),O=w.getTilePixelRatio(f.pixelRatio);for(let M=K.getZForResolution(F.resolution);M>=K.getMinZoom();--M){const B=K.getTileCoordForCoordAndZ(a,M),Y=w.getTile(M,B[1],B[2],p,E);if(!(Y instanceof k.Z||Y instanceof J.Z)||Y instanceof J.Z&&Y.getState()===U.Z.EMPTY)return null;if(Y.getState()!==U.Z.LOADED)continue;const C=K.getOrigin(M),L=(0,d.Pq)(K.getTileSize(M)),A=K.getResolution(M),P=Math.floor(O*((a[0]-C[0])/A-B[1]*L[0])),R=Math.floor(O*((C[1]-a[1])/A-B[2]*L[1])),N=Math.round(O*w.getGutterForProjection(F.projection));return this.getImageData(Y.getImage(),P+N,R+N)}return null}loadedTileCallback(s,f,g){return!!this.isDrawableTile(g)&&super.loadedTileCallback(s,f,g)}prepareFrame(s){return!!this.getLayer().getSource()}renderFrame(s,f){const g=s.layerStatesArray[s.layerIndex],a=s.viewState,I=a.projection,p=a.resolution,E=a.center,F=a.rotation,w=s.pixelRatio,K=this.getLayer(),O=K.getSource(),M=O.getRevision(),B=O.getTileGridForProjection(I),Y=B.getZForResolution(p,O.zDirection),C=B.getResolution(Y);let L=s.extent;const A=s.viewState.resolution,P=O.getTilePixelRatio(w);this.prepareContainer(s,f);const R=this.context.canvas.width,N=this.context.canvas.height,Q=g.extent&&(0,y.dY)(g.extent,I);Q&&(L=(0,T.Ed)(L,(0,y.dY)(g.extent,I)));const et=C*R/2/P,H=C*N/2/P,ot=[E[0]-et,E[1]-H,E[0]+et,E[1]+H],ht=B.getTileRangeForExtentAndZ(L,Y),mt={};mt[Y]={};const xt=this.createLoadedTileFinder(O,I,mt),Rt=this.tmpExtent,at=this.tmpTileRange_;this.newTiles_=!1;const pt=F?(0,T.dY)(a.center,A,F,s.size):void 0;for(let rt=ht.minX;rt<=ht.maxX;++rt)for(let It=ht.minY;It<=ht.maxY;++It){if(F&&!B.tileCoordIntersectsViewport([Y,rt,It],pt))continue;const bt=this.getTile(Y,rt,It,s);if(this.isDrawableTile(bt)){const he=(0,m.sq)(this);if(bt.getState()==U.Z.LOADED){mt[Y][bt.tileCoord.toString()]=bt;let le=bt.inTransition(he);le&&1!==g.opacity&&(bt.endTransition(he),le=!1),!this.newTiles_&&(le||!this.renderedTiles.includes(bt))&&(this.newTiles_=!0)}if(1===bt.getAlpha(he,s.time))continue}const Xt=B.getTileCoordChildTileRange(bt.tileCoord,at,Rt);let Vt=!1;Xt&&(Vt=xt(Y+1,Xt)),Vt||B.forEachTileCoordParentTileRange(bt.tileCoord,xt,at,Rt)}const Mt=C/p*w/P,Ft=this.getRenderContext(s);(0,S.qC)(this.tempTransform,R/2,N/2,Mt,Mt,0,-R/2,-N/2),Q&&this.clipUnrotated(Ft,s,Q),O.getInterpolate()||(Ft.imageSmoothingEnabled=!1),this.preRender(Ft,s),this.renderedTiles.length=0;let Wt,Ut,zt,Dt=Object.keys(mt).map(Number);Dt.sort(b.j2),1!==g.opacity||this.containerReused&&!O.getOpaque(s.viewState.projection)?(Wt=[],Ut=[]):Dt=Dt.reverse();for(let rt=Dt.length-1;rt>=0;--rt){const It=Dt[rt],bt=O.getTilePixelSize(It,w,I),Vt=B.getResolution(It)/C,he=bt[0]*Vt*Mt,le=bt[1]*Vt*Mt,Ht=B.getTileCoordForCoordAndZ((0,T.rL)(ot),It),ft=B.getTileCoordExtent(Ht),St=(0,S.nn)(this.tempTransform,[P*(ft[0]-ot[0])/C,P*(ot[3]-ft[3])/C]),kt=P*O.getGutterForProjection(I),Lt=mt[It];for(const te in Lt){const Yt=Lt[te],Et=Yt.tileCoord,wt=Ht[1]-Et[1],it=Math.round(St[0]-(wt-1)*he),z=Ht[2]-Et[2],_=Math.round(St[1]-(z-1)*le),Z=Math.round(St[0]-wt*he),W=Math.round(St[1]-z*le),j=it-Z,st=_-W,dt=Y===It,Ot=dt&&1!==Yt.getAlpha((0,m.sq)(this),s.time);let Ct=!1;if(!Ot)if(Wt){zt=[Z,W,Z+j,W,Z+j,W+st,Z,W+st];for(let Gt=0,qt=Wt.length;Gt<qt;++Gt)if(Y!==It&&It<Ut[Gt]){const ne=Wt[Gt];(0,T.kK)([Z,W,Z+j,W+st],[ne[0],ne[3],ne[4],ne[7]])&&(Ct||(Ft.save(),Ct=!0),Ft.beginPath(),Ft.moveTo(zt[0],zt[1]),Ft.lineTo(zt[2],zt[3]),Ft.lineTo(zt[4],zt[5]),Ft.lineTo(zt[6],zt[7]),Ft.moveTo(ne[6],ne[7]),Ft.lineTo(ne[4],ne[5]),Ft.lineTo(ne[2],ne[3]),Ft.lineTo(ne[0],ne[1]),Ft.clip())}Wt.push(zt),Ut.push(It)}else Ft.clearRect(Z,W,j,st);this.drawTileImage(Yt,s,Z,W,j,st,kt,dt),Wt&&!Ot?(Ct&&Ft.restore(),this.renderedTiles.unshift(Yt)):this.renderedTiles.push(Yt),this.updateUsedTiles(s.usedTiles,O,Yt)}}return this.renderedRevision=M,this.renderedResolution=C,this.extentChanged=!this.renderedExtent_||!(0,T.fS)(this.renderedExtent_,ot),this.renderedExtent_=ot,this.renderedPixelRatio=w,this.renderedProjection=I,this.manageTilePyramid(s,O,B,w,I,L,Y,K.getPreload()),this.scheduleExpireCache(s,O),this.postRender(this.context,s),g.extent&&Ft.restore(),Ft.imageSmoothingEnabled=!0,this.container}drawTileImage(s,f,g,a,I,p,E,F){const w=this.getTileImage(s);if(!w)return;const K=this.getRenderContext(f),O=(0,m.sq)(this),M=f.layerStatesArray[f.layerIndex],B=M.opacity*(F?s.getAlpha(O,f.time):1),Y=B!==K.globalAlpha;Y&&(K.save(),K.globalAlpha=B),K.drawImage(w,E,E,w.width-2*E,w.height-2*E,g,a,I,p),Y&&K.restore(),B!==M.opacity?f.animate=!0:F&&s.endTransition(O)}getImage(){const s=this.context;return s?s.canvas:null}getTileImage(s){return s.getImage()}scheduleExpireCache(s,f){if(f.canExpireCache()){const g=function(a,I,p){const E=(0,m.sq)(a);E in p.usedTiles&&a.expireCache(p.viewState.projection,p.usedTiles[E])}.bind(null,f);s.postRenderFunctions.push(g)}}updateUsedTiles(s,f,g){const a=(0,m.sq)(f);a in s||(s[a]={}),s[a][g.getKey()]=!0}manageTilePyramid(s,f,g,a,I,p,E,F,w){const K=(0,m.sq)(f);K in s.wantedTiles||(s.wantedTiles[K]={});const O=s.wantedTiles[K],M=s.tileQueue,B=g.getMinZoom(),Y=s.viewState.rotation,C=Y?(0,T.dY)(s.viewState.center,s.viewState.resolution,Y,s.size):void 0;let A,P,R,N,Q,et,L=0;for(et=B;et<=E;++et)for(P=g.getTileRangeForExtentAndZ(p,et,P),R=g.getResolution(et),N=P.minX;N<=P.maxX;++N)for(Q=P.minY;Q<=P.maxY;++Q)Y&&!g.tileCoordIntersectsViewport([et,N,Q],C)||(E-et<=F?(++L,A=f.getTile(et,N,Q,a,I),A.getState()==U.Z.IDLE&&(O[A.getKey()]=!0,M.isKeyQueued(A.getKey())||M.enqueue([A,K,g.getTileCoordCenter(A.tileCoord),R])),void 0!==w&&w(A)):f.useTile(et,N,Q,I));f.updateCacheSize(L,I)}}},9727:(jt,ut,o)=>{"use strict";o.d(ut,{Z:()=>s});var V=o(1068),k=o(7495),J=o(649),$=o(5603),U=o(1880),S=o(9034),b=o(77),T=o(4591),y=o(4300),m=o(5959),d=o(7704),l=o(1293),n=o(63);const s=class h extends k.Z{constructor(g){super(g),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.hitDetectionImageData_=null,this.clipped_=!1,this.renderedFeatures_=null,this.renderedRevision_=-1,this.renderedResolution_=NaN,this.renderedExtent_=(0,b.lJ)(),this.wrappedRenderedExtent_=(0,b.lJ)(),this.renderedCenter_=null,this.renderedProjection_=null,this.renderedPixelRatio_=1,this.renderedRenderOrder_=null,this.replayGroup_=null,this.replayGroupChanged=!0,this.clipping=!0,this.targetContext_=null,this.opacity_=1}renderWorlds(g,a,I){const p=a.extent,E=a.viewState,F=E.center,w=E.resolution,K=E.projection,O=E.rotation,M=K.getExtent(),B=this.getLayer().getSource(),Y=this.getLayer().getDeclutter(),C=a.pixelRatio,L=a.viewHints,A=!(L[U.Z.ANIMATING]||L[U.Z.INTERACTING]),P=this.context,R=Math.round((0,b.dz)(p)/w*C),N=Math.round((0,b.Cr)(p)/w*C),Q=B.getWrapX()&&K.canWrapX(),et=Q?(0,b.dz)(M):null,H=Q?Math.ceil((p[2]-M[2])/et)+1:1;let ot=Q?Math.floor((p[0]-M[0])/et):0;do{let ht=this.getRenderTransform(F,w,0,C,R,N,ot*et);a.declutter&&(ht=ht.slice(0)),g.execute(P,[P.canvas.width,P.canvas.height],ht,O,A,void 0===I?J.QN:I?J.o5:J.eV,I?Y&&a.declutter[Y]:void 0)}while(++ot<H)}setDrawContext_(){1!==this.opacity_&&(this.targetContext_=this.context,this.context=(0,T.E4)(this.context.canvas.width,this.context.canvas.height,k.r))}resetDrawContext_(){if(1!==this.opacity_){const g=this.targetContext_.globalAlpha;this.targetContext_.globalAlpha=this.opacity_,this.targetContext_.drawImage(this.context.canvas,0,0),this.targetContext_.globalAlpha=g,(0,T.jy)(this.context),k.r.push(this.context.canvas),this.context=this.targetContext_,this.targetContext_=null}}renderDeclutter(g){!this.replayGroup_||!this.getLayer().getDeclutter()||this.renderWorlds(this.replayGroup_,g,!0)}renderDeferredInternal(g){this.replayGroup_&&(this.replayGroup_.renderDeferred(),this.clipped_&&this.context.restore(),this.resetDrawContext_())}renderFrame(g,a){const I=g.layerStatesArray[g.layerIndex];this.opacity_=I.opacity;const p=g.viewState;this.prepareContainer(g,a);const E=this.context,F=this.replayGroup_;let w=F&&!F.isEmpty();if(!w&&!this.getLayer().hasListener($.Z.PRERENDER)&&!this.getLayer().hasListener($.Z.POSTRENDER))return null;this.setDrawContext_(),this.preRender(E,g);const K=p.projection;if(this.clipped_=!1,w&&I.extent&&this.clipping){const O=(0,d.dY)(I.extent,K);w=(0,b.kK)(O,g.extent),this.clipped_=w&&!(0,b.r4)(O,g.extent),this.clipped_&&this.clipUnrotated(E,g,O)}return w&&this.renderWorlds(F,g,!this.getLayer().getDeclutter()&&void 0),!g.declutter&&this.clipped_&&E.restore(),this.postRender(E,g),this.renderedRotation_!==p.rotation&&(this.renderedRotation_=p.rotation,this.hitDetectionImageData_=null),g.declutter||this.resetDrawContext_(),this.container}getFeatures(g){return new Promise(a=>{if(this.frameState&&!this.hitDetectionImageData_&&!this.animatingOrInteracting_){const I=this.frameState.size.slice(),p=this.renderedCenter_,E=this.renderedResolution_,F=this.renderedRotation_,w=this.renderedProjection_,K=this.wrappedRenderedExtent_,O=this.getLayer(),M=[],B=I[0]*S.UN,Y=I[1]*S.UN;M.push(this.getRenderTransform(p,E,F,S.UN,B,Y,0).slice());const C=O.getSource(),L=w.getExtent();if(C.getWrapX()&&w.canWrapX()&&!(0,b.r4)(L,K)){let P=K[0];const R=(0,b.dz)(L);let Q,N=0;for(;P<L[0];)--N,Q=R*N,M.push(this.getRenderTransform(p,E,F,S.UN,B,Y,Q).slice()),P+=R;for(N=0,P=K[2];P>L[2];)++N,Q=R*N,M.push(this.getRenderTransform(p,E,F,S.UN,B,Y,Q).slice()),P-=R}const A=(0,d.Cs)();this.hitDetectionImageData_=(0,S.TU)(I,M,this.renderedFeatures_,O.getStyleFunction(),K,E,F,(0,y.se)(E,this.renderedPixelRatio_),A?w:null)}a((0,S.ix)(g,this.renderedFeatures_,this.hitDetectionImageData_))})}forEachFeatureAtCoordinate(g,a,I,p,E){if(!this.replayGroup_)return;const F=a.viewState.resolution,w=a.viewState.rotation,K=this.getLayer(),O={},M=function(L,A,P){const R=(0,l.sq)(L),N=O[R];if(N){if(!0!==N&&P<N.distanceSq){if(0===P)return O[R]=!0,E.splice(E.lastIndexOf(N),1),p(L,K,A);N.geometry=A,N.distanceSq=P}}else{if(0===P)return O[R]=!0,p(L,K,A);E.push(O[R]={feature:L,layer:K,geometry:A,distanceSq:P,callback:p})}};let B;const Y=[this.replayGroup_],C=this.getLayer().getDeclutter();return Y.some(L=>B=L.forEachFeatureAtCoordinate(g,F,w,I,M,C&&a.declutter[C]?a.declutter[C].all().map(A=>A.value):null)),B}handleFontsChanged(){const g=this.getLayer();g.getVisible()&&this.replayGroup_&&g.changed()}handleStyleImageChange_(g){this.renderIfReadyAndVisible()}prepareFrame(g){const a=this.getLayer(),I=a.getSource();if(!I)return!1;const p=g.viewHints[U.Z.ANIMATING],E=g.viewHints[U.Z.INTERACTING],F=a.getUpdateWhileAnimating(),w=a.getUpdateWhileInteracting();if(this.ready&&!F&&p||!w&&E)return this.animatingOrInteracting_=!0,!0;this.animatingOrInteracting_=!1;const K=g.extent,O=g.viewState,M=O.projection,B=O.resolution,Y=g.pixelRatio,C=a.getRevision(),L=a.getRenderBuffer();let A=a.getRenderOrder();void 0===A&&(A=y.eR);const P=O.center.slice(),R=(0,b.f3)(K,L*B),N=R.slice(),Q=[R.slice()],et=M.getExtent();if(I.getWrapX()&&M.canWrapX()&&!(0,b.r4)(et,g.extent)){const Dt=(0,b.dz)(et),Wt=Math.max((0,b.dz)(R)/2,Dt);R[0]=et[0]-Wt,R[2]=et[2]+Wt,(0,n.Cf)(P,M);const Ut=(0,b.Cf)(Q[0],M);Ut[0]<et[0]&&Ut[2]<et[2]?Q.push([Ut[0]+Dt,Ut[1],Ut[2]+Dt,Ut[3]]):Ut[0]>et[0]&&Ut[2]>et[2]&&Q.push([Ut[0]-Dt,Ut[1],Ut[2]-Dt,Ut[3]])}if(this.ready&&this.renderedResolution_==B&&this.renderedRevision_==C&&this.renderedRenderOrder_==A&&this.renderedFrameDeclutter_===!!g.declutter&&(0,b.r4)(this.wrappedRenderedExtent_,R))return(0,m.fS)(this.renderedExtent_,N)||(this.hitDetectionImageData_=null,this.renderedExtent_=N),this.renderedCenter_=P,this.replayGroupChanged=!1,!0;this.replayGroup_=null;const H=new V.Z((0,y.Qz)(B,Y),R,B,Y),ot=(0,d.Cs)();let ht;if(ot){for(let Dt=0,Wt=Q.length;Dt<Wt;++Dt){const zt=(0,d.Fj)(Q[Dt],M);I.loadFeatures(zt,(0,d.on)(B,M),ot)}ht=(0,d.WO)(ot,M)}else for(let Dt=0,Wt=Q.length;Dt<Wt;++Dt)I.loadFeatures(Q[Dt],B,M);const mt=(0,y.se)(B,Y);let xt=!0;const Rt=(Dt,Wt)=>{let Ut;const zt=Dt.getStyleFunction()||a.getStyleFunction();if(zt&&(Ut=zt(Dt,B)),Ut){const rt=this.renderFeature(Dt,mt,Ut,H,ht,this.getLayer().getDeclutter(),Wt);xt=xt&&!rt}},at=(0,d.Fj)(R,M),pt=I.getFeaturesInExtent(at);A&&pt.sort(A);for(let Dt=0,Wt=pt.length;Dt<Wt;++Dt)Rt(pt[Dt],Dt);this.renderedFeatures_=pt,this.ready=xt;const Mt=H.finish(),Ft=new J.ZP(R,B,Y,I.getOverlaps(),Mt,a.getRenderBuffer(),!!g.declutter);return this.renderedResolution_=B,this.renderedRevision_=C,this.renderedRenderOrder_=A,this.renderedFrameDeclutter_=!!g.declutter,this.renderedExtent_=N,this.wrappedRenderedExtent_=R,this.renderedCenter_=P,this.renderedProjection_=M,this.renderedPixelRatio_=Y,this.replayGroup_=Ft,this.hitDetectionImageData_=null,this.replayGroupChanged=!0,!0}renderFeature(g,a,I,p,E,F,w){if(!I)return!1;let K=!1;if(Array.isArray(I))for(let O=0,M=I.length;O<M;++O)K=(0,y.Pn)(p,g,I[O],a,this.boundHandleStyleImageChange_,E,F,w)||K;else K=(0,y.Pn)(p,g,I,a,this.boundHandleStyleImageChange_,E,F,w);return K}}},4300:(jt,ut,o)=>{"use strict";o.d(ut,{Pn:()=>y,Qz:()=>b,eR:()=>U,se:()=>S});var V=o(6343),k=o(1293);const J=.5,$={Point:function f(I,p,E,F,w,K){const O=E.getImage(),M=E.getText(),B=M&&M.getText(),Y=K&&O&&B?{}:void 0;if(O){if(O.getImageState()!=V.Z.LOADED)return;const C=I.getBuilder(E.getZIndex(),"Image");C.setImageStyle(O,Y),C.drawPoint(p,F,w)}if(B){const C=I.getBuilder(E.getZIndex(),"Text");C.setTextStyle(M,Y),C.drawText(p,F,w)}},LineString:function n(I,p,E,F,w){const K=E.getStroke();if(K){const M=I.getBuilder(E.getZIndex(),"LineString");M.setFillStrokeStyle(null,K),M.drawLineString(p,F,w)}const O=E.getText();if(O&&O.getText()){const M=I.getBuilder(E.getZIndex(),"Text");M.setTextStyle(O),M.drawText(p,F,w)}},Polygon:function a(I,p,E,F,w){const K=E.getFill(),O=E.getStroke();if(K||O){const B=I.getBuilder(E.getZIndex(),"Polygon");B.setFillStrokeStyle(K,O),B.drawPolygon(p,F,w)}const M=E.getText();if(M&&M.getText()){const B=I.getBuilder(E.getZIndex(),"Text");B.setTextStyle(M),B.drawText(p,F,w)}},MultiPoint:function g(I,p,E,F,w,K){const O=E.getImage(),M=O&&0!==O.getOpacity(),B=E.getText(),Y=B&&B.getText(),C=K&&M&&Y?{}:void 0;if(M){if(O.getImageState()!=V.Z.LOADED)return;const L=I.getBuilder(E.getZIndex(),"Image");L.setImageStyle(O,C),L.drawMultiPoint(p,F,w)}if(Y){const L=I.getBuilder(E.getZIndex(),"Text");L.setTextStyle(B,C),L.drawText(p,F,w)}},MultiLineString:function h(I,p,E,F,w){const K=E.getStroke();if(K){const M=I.getBuilder(E.getZIndex(),"LineString");M.setFillStrokeStyle(null,K),M.drawMultiLineString(p,F,w)}const O=E.getText();if(O&&O.getText()){const M=I.getBuilder(E.getZIndex(),"Text");M.setTextStyle(O),M.drawText(p,F,w)}},MultiPolygon:function s(I,p,E,F,w){const K=E.getFill(),O=E.getStroke();if(O||K){const B=I.getBuilder(E.getZIndex(),"Polygon");B.setFillStrokeStyle(K,O),B.drawMultiPolygon(p,F,w)}const M=E.getText();if(M&&M.getText()){const B=I.getBuilder(E.getZIndex(),"Text");B.setTextStyle(M),B.drawText(p,F,w)}},GeometryCollection:function l(I,p,E,F,w,K){const O=p.getGeometriesArray();let M,B;for(M=0,B=O.length;M<B;++M)(0,$[O[M].getType()])(I,O[M],E,F,w,K)},Circle:function T(I,p,E,F,w){const K=E.getFill(),O=E.getStroke();if(K||O){const B=I.getBuilder(E.getZIndex(),"Circle");B.setFillStrokeStyle(K,O),B.drawCircle(p,F,w)}const M=E.getText();if(M&&M.getText()){const B=I.getBuilder(E.getZIndex(),"Text");B.setTextStyle(M),B.drawText(p,F)}}};function U(I,p){return parseInt((0,k.sq)(I),10)-parseInt((0,k.sq)(p),10)}function S(I,p){const E=b(I,p);return E*E}function b(I,p){return J*I/p}function y(I,p,E,F,w,K,O,M){const B=[],Y=E.getImage();if(Y){let A=!0;const P=Y.getImageState();P==V.Z.LOADED||P==V.Z.ERROR?A=!1:P==V.Z.IDLE&&Y.load(),A&&B.push(Y.ready())}const C=E.getFill();C&&C.loading()&&B.push(C.ready());const L=B.length>0;return L&&Promise.all(B).then(()=>w(null)),function m(I,p,E,F,w,K,O){const M=E.getGeometryFunction()(p);if(!M)return;const B=M.simplifyTransformed(F,w);E.getRenderer()?d(I,B,E,p,O):(0,$[B.getType()])(I,B,E,p,O,K)}(I,p,E,F,K,O,M),L}function d(I,p,E,F,w){if("GeometryCollection"!=p.getType())I.getBuilder(E.getZIndex(),"Default").drawCustom(p,F,E.getRenderer(),E.getHitDetectionRenderer(),w);else{const O=p.getGeometries();for(let M=0,B=O.length;M<B;++M)d(I,O[M],E,F,w)}}},7576:(jt,ut,o)=>{"use strict";o.d(ut,{Co:()=>d,aA:()=>m,rX:()=>S,sY:()=>l});var V=o(77),k=o(4591),J=o(7704),$=o(6868);let U;const S=[];function b(n,h,s,f,g){n.beginPath(),n.moveTo(0,0),n.lineTo(h,s),n.lineTo(f,g),n.closePath(),n.save(),n.clip(),n.fillRect(0,0,Math.max(h,f)+1,Math.max(s,g)),n.restore()}function T(n,h){return Math.abs(n[4*h]-210)>2||Math.abs(n[4*h+3]-191.25)>2}function m(n,h,s,f){const g=(0,J.vs)(s,h,n);let a=(0,J._Q)(h,f,s);const I=h.getMetersPerUnit();void 0!==I&&(a*=I);const p=n.getMetersPerUnit();void 0!==p&&(a/=p);const E=n.getExtent();if(!E||(0,V.b8)(E,g)){const F=(0,J._Q)(n,a,g)/a;isFinite(F)&&F>0&&(a/=F)}return a}function d(n,h,s,f){const g=(0,V.qg)(s);let a=m(n,h,g,f);return(!isFinite(a)||a<=0)&&(0,V.H6)(s,function(I){return a=m(n,h,I,f),isFinite(a)&&a>0}),a}function l(n,h,s,f,g,a,I,p,E,F,w,K,O,M){const B=(0,k.E4)(Math.round(s*n),Math.round(s*h),S);if(K||(B.imageSmoothingEnabled=!1),0===E.length)return B.canvas;function Y(N){return Math.round(N*s)/s}B.scale(s,s),B.globalCompositeOperation="lighter";const C=(0,V.lJ)();let L;E.forEach(function(N,Q,et){(0,V.l7)(C,N.extent)});const A=s/f,P=(K?1:1+Math.pow(2,-24))/A;if(!O||1!==E.length||0!==F){if(L=(0,k.E4)(Math.round((0,V.dz)(C)*A),Math.round((0,V.Cr)(C)*A),S),K||(L.imageSmoothingEnabled=!1),g&&M){const N=(g[0]-C[0])*A,Q=-(g[3]-C[3])*A,et=(0,V.dz)(g)*A,H=(0,V.Cr)(g)*A;L.rect(N,Q,et,H),L.clip()}E.forEach(function(N,Q,et){if(N.image.width>0&&N.image.height>0){if(N.clipExtent){L.save();const xt=(N.clipExtent[0]-C[0])*A,Rt=-(N.clipExtent[3]-C[3])*A,at=(0,V.dz)(N.clipExtent)*A,pt=(0,V.Cr)(N.clipExtent)*A;L.rect(K?xt:Math.round(xt),K?Rt:Math.round(Rt),K?at:Math.round(xt+at)-Math.round(xt),K?pt:Math.round(Rt+pt)-Math.round(Rt)),L.clip()}const H=(N.extent[0]-C[0])*A,ot=-(N.extent[3]-C[3])*A,ht=(0,V.dz)(N.extent)*A,mt=(0,V.Cr)(N.extent)*A;L.drawImage(N.image,F,F,N.image.width-2*F,N.image.height-2*F,K?H:Math.round(H),K?ot:Math.round(ot),K?ht:Math.round(H+ht)-Math.round(H),K?mt:Math.round(ot+mt)-Math.round(ot)),N.clipExtent&&L.restore()}})}const R=(0,V.rL)(I);return p.getTriangles().forEach(function(N,Q,et){const H=N.source,ot=N.target;let ht=H[0][0],mt=H[0][1],xt=H[1][0],Rt=H[1][1],at=H[2][0],pt=H[2][1];const Mt=Y((ot[0][0]-R[0])/a),Ft=Y(-(ot[0][1]-R[1])/a),Dt=Y((ot[1][0]-R[0])/a),Wt=Y(-(ot[1][1]-R[1])/a),Ut=Y((ot[2][0]-R[0])/a),zt=Y(-(ot[2][1]-R[1])/a),rt=ht,It=mt;ht=0,mt=0,xt-=rt,Rt-=It,at-=rt,pt-=It;const Xt=(0,$.SV)([[xt,Rt,0,0,Dt-Mt],[at,pt,0,0,Ut-Mt],[0,0,xt,Rt,Wt-Ft],[0,0,at,pt,zt-Ft]]);if(!Xt)return;if(B.save(),B.beginPath(),function y(){if(void 0===U){const n=(0,k.E4)(6,6,S);n.globalCompositeOperation="lighter",n.fillStyle="rgba(210, 0, 0, 0.75)",b(n,4,5,4,0),b(n,4,5,0,5);const h=n.getImageData(0,0,3,3).data;U=T(h,0)||T(h,4)||T(h,8),(0,k.jy)(n),S.push(n.canvas)}return U}()||!K){B.moveTo(Dt,Wt);const he=4,le=Mt-Dt,Ht=Ft-Wt;for(let ft=0;ft<he;ft++)B.lineTo(Dt+Y((ft+1)*le/he),Wt+Y(ft*Ht/(he-1))),ft!=he-1&&B.lineTo(Dt+Y((ft+1)*le/he),Wt+Y((ft+1)*Ht/(he-1)));B.lineTo(Ut,zt)}else B.moveTo(Dt,Wt),B.lineTo(Mt,Ft),B.lineTo(Ut,zt);let Vt;if(B.clip(),B.transform(Xt[0],Xt[2],Xt[1],Xt[3],Mt,Ft),B.translate(C[0]-rt,C[3]-It),L)Vt=L.canvas,B.scale(P,-P);else{const he=E[0],le=he.extent;Vt=he.image,B.scale((0,V.dz)(le)/Vt.width,-(0,V.Cr)(le)/Vt.height)}B.drawImage(Vt,0,0),B.restore()}),L&&((0,k.jy)(L),S.push(L.canvas)),w&&(B.save(),B.globalCompositeOperation="source-over",B.strokeStyle="black",B.lineWidth=1,p.getTriangles().forEach(function(N,Q,et){const H=N.target,ot=(H[0][0]-R[0])/a,ht=-(H[0][1]-R[1])/a,mt=(H[1][0]-R[0])/a,xt=-(H[1][1]-R[1])/a,Rt=(H[2][0]-R[0])/a,at=-(H[2][1]-R[1])/a;B.beginPath(),B.moveTo(mt,xt),B.lineTo(ot,ht),B.lineTo(Rt,at),B.closePath(),B.stroke()}),B.restore()),B.canvas}},6162:(jt,ut,o)=>{"use strict";o.d(ut,{Z:()=>l});var V=o(7582),k=o(4855),J=o(2738),$=o(33),U=o(7166),S=o(7576),b=o(6868),T=o(77),y=o(3583),m=o(4591);const l=class d extends J.Z{constructor(h,s,f,g,a,I,p,E,F,w,K,O){super(a,$.Z.IDLE,O),this.renderEdges_=void 0!==K&&K,this.pixelRatio_=p,this.gutter_=E,this.canvas_=null,this.sourceTileGrid_=s,this.targetTileGrid_=g,this.wrappedTileCoord_=I||a,this.sourceTiles_=[],this.sourcesListenerKeys_=null,this.sourceZ_=0,this.clipExtent_=h.canWrapX()?h.getExtent():void 0;const M=g.getTileCoordExtent(this.wrappedTileCoord_),B=this.targetTileGrid_.getExtent();let Y=this.sourceTileGrid_.getExtent();const C=B?(0,T.Ed)(M,B):M;if(0===(0,T.bg)(C))return void(this.state=$.Z.EMPTY);const L=h.getExtent();L&&(Y=Y?(0,T.Ed)(Y,L):L);const A=g.getResolution(this.wrappedTileCoord_[0]),P=(0,S.Co)(h,f,C,A);if(!isFinite(P)||P<=0)return void(this.state=$.Z.EMPTY);if(this.triangulation_=new U.Z(h,f,C,Y,P*(void 0!==w?w:V.m),A),0===this.triangulation_.getTriangles().length)return void(this.state=$.Z.EMPTY);this.sourceZ_=s.getZForResolution(P);let N=this.triangulation_.calculateSourceExtent();if(Y&&(h.canWrapX()?(N[1]=(0,b.uZ)(N[1],Y[1],Y[3]),N[3]=(0,b.uZ)(N[3],Y[1],Y[3])):N=(0,T.Ed)(N,Y)),(0,T.bg)(N)){let Q=0,et=0;h.canWrapX()&&(Q=(0,T.dz)(L),et=Math.floor((N[0]-L[0])/Q)),(0,T.MV)(N.slice(),h,!0).forEach(ot=>{const ht=s.getTileRangeForExtentAndZ(ot,this.sourceZ_);for(let mt=ht.minX;mt<=ht.maxX;mt++)for(let xt=ht.minY;xt<=ht.maxY;xt++){const Rt=F(this.sourceZ_,mt,xt,p);Rt&&this.sourceTiles_.push({tile:Rt,offset:et*Q})}++et}),0===this.sourceTiles_.length&&(this.state=$.Z.EMPTY)}else this.state=$.Z.EMPTY}getImage(){return this.canvas_}reproject_(){const h=[];if(this.sourceTiles_.forEach(s=>{const f=s.tile;if(f&&f.getState()==$.Z.LOADED){const g=this.sourceTileGrid_.getTileCoordExtent(f.tileCoord);g[0]+=s.offset,g[2]+=s.offset;const a=this.clipExtent_?.slice();a&&(a[0]+=s.offset,a[2]+=s.offset),h.push({extent:g,clipExtent:a,image:f.getImage()})}}),this.sourceTiles_.length=0,0===h.length)this.state=$.Z.ERROR;else{const s=this.wrappedTileCoord_[0],f=this.targetTileGrid_.getTileSize(s),g="number"==typeof f?f:f[0],a="number"==typeof f?f:f[1],I=this.targetTileGrid_.getResolution(s),p=this.sourceTileGrid_.getResolution(this.sourceZ_),E=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=(0,S.sY)(g,a,this.pixelRatio_,p,this.sourceTileGrid_.getExtent(),I,E,this.triangulation_,h,this.gutter_,this.renderEdges_,this.interpolate),this.state=$.Z.LOADED}this.changed()}load(){if(this.state==$.Z.IDLE){this.state=$.Z.LOADING,this.changed();let h=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(({tile:s})=>{const f=s.getState();if(f==$.Z.IDLE||f==$.Z.LOADING){h++;const g=(0,y.oL)(s,k.Z.CHANGE,function(a){const I=s.getState();(I==$.Z.LOADED||I==$.Z.ERROR||I==$.Z.EMPTY)&&((0,y.bN)(g),h--,0===h&&(this.unlistenSources_(),this.reproject_()))},this);this.sourcesListenerKeys_.push(g)}}),0===h?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach(function({tile:s},f,g){s.getState()==$.Z.IDLE&&s.load()})}}unlistenSources_(){this.sourcesListenerKeys_.forEach(y.bN),this.sourcesListenerKeys_=null}release(){this.canvas_&&((0,m.jy)(this.canvas_.getContext("2d")),S.rX.push(this.canvas_),this.canvas_=null),super.release()}}},7166:(jt,ut,o)=>{"use strict";o.d(ut,{Z:()=>b});var V=o(77),k=o(7704),J=o(6868);const b=class S{constructor(y,m,d,l,n,h){this.sourceProj_=y,this.targetProj_=m;let s={};const f=(0,k.Ck)(this.targetProj_,this.sourceProj_);this.transformInv_=function(M){const B=M[0]+"/"+M[1];return s[B]||(s[B]=f(M)),s[B]},this.maxSourceExtent_=l,this.errorThresholdSquared_=n*n,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!l&&!!this.sourceProj_.getExtent()&&(0,V.dz)(l)>=(0,V.dz)(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?(0,V.dz)(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?(0,V.dz)(this.targetProj_.getExtent()):null;const g=(0,V.rL)(d),a=(0,V.Xv)(d),I=(0,V.w$)(d),p=(0,V.hC)(d),E=this.transformInv_(g),F=this.transformInv_(a),w=this.transformInv_(I),K=this.transformInv_(p),O=10+(h?Math.max(0,Math.ceil(Math.log2((0,V.bg)(d)/(h*h*256*256)))):0);if(this.addQuad_(g,a,I,p,E,F,w,K,O),this.wrapsXInSource_){let M=1/0;this.triangles_.forEach(function(B,Y,C){M=Math.min(M,B.source[0][0],B.source[1][0],B.source[2][0])}),this.triangles_.forEach(B=>{if(Math.max(B.source[0][0],B.source[1][0],B.source[2][0])-M>this.sourceWorldWidth_/2){const Y=[[B.source[0][0],B.source[0][1]],[B.source[1][0],B.source[1][1]],[B.source[2][0],B.source[2][1]]];Y[0][0]-M>this.sourceWorldWidth_/2&&(Y[0][0]-=this.sourceWorldWidth_),Y[1][0]-M>this.sourceWorldWidth_/2&&(Y[1][0]-=this.sourceWorldWidth_),Y[2][0]-M>this.sourceWorldWidth_/2&&(Y[2][0]-=this.sourceWorldWidth_);const C=Math.min(Y[0][0],Y[1][0],Y[2][0]);Math.max(Y[0][0],Y[1][0],Y[2][0])-C<this.sourceWorldWidth_/2&&(B.source=Y)}})}s={}}addTriangle_(y,m,d,l,n,h){this.triangles_.push({source:[l,n,h],target:[y,m,d]})}addQuad_(y,m,d,l,n,h,s,f,g){const a=(0,V.hI)([n,h,s,f]),I=this.sourceWorldWidth_?(0,V.dz)(a)/this.sourceWorldWidth_:null,p=this.sourceWorldWidth_,E=this.sourceProj_.canWrapX()&&I>.5&&I<1;let F=!1;if(g>0){if(this.targetProj_.isGlobal()&&this.targetWorldWidth_){const K=(0,V.hI)([y,m,d,l]);F=(0,V.dz)(K)/this.targetWorldWidth_>.25||F}!E&&this.sourceProj_.isGlobal()&&I&&(F=I>.25||F)}if(!F&&this.maxSourceExtent_&&isFinite(a[0])&&isFinite(a[1])&&isFinite(a[2])&&isFinite(a[3])&&!(0,V.kK)(a,this.maxSourceExtent_))return;let w=0;if(!(F||isFinite(n[0])&&isFinite(n[1])&&isFinite(h[0])&&isFinite(h[1])&&isFinite(s[0])&&isFinite(s[1])&&isFinite(f[0])&&isFinite(f[1])))if(g>0)F=!0;else if(w=(isFinite(n[0])&&isFinite(n[1])?0:8)+(isFinite(h[0])&&isFinite(h[1])?0:4)+(isFinite(s[0])&&isFinite(s[1])?0:2)+(isFinite(f[0])&&isFinite(f[1])?0:1),1!=w&&2!=w&&4!=w&&8!=w)return;if(g>0){if(!F){const O=this.transformInv_([(y[0]+d[0])/2,(y[1]+d[1])/2]);let M;M=E?((0,J.$W)(n[0],p)+(0,J.$W)(s[0],p))/2-(0,J.$W)(O[0],p):(n[0]+s[0])/2-O[0];const B=(n[1]+s[1])/2-O[1];F=M*M+B*B>this.errorThresholdSquared_}if(F){if(Math.abs(y[0]-d[0])<=Math.abs(y[1]-d[1])){const K=[(m[0]+d[0])/2,(m[1]+d[1])/2],O=this.transformInv_(K),M=[(l[0]+y[0])/2,(l[1]+y[1])/2],B=this.transformInv_(M);this.addQuad_(y,m,K,M,n,h,O,B,g-1),this.addQuad_(M,K,d,l,B,O,s,f,g-1)}else{const K=[(y[0]+m[0])/2,(y[1]+m[1])/2],O=this.transformInv_(K),M=[(d[0]+l[0])/2,(d[1]+l[1])/2],B=this.transformInv_(M);this.addQuad_(y,K,M,l,n,O,B,f,g-1),this.addQuad_(K,m,d,M,O,h,s,B,g-1)}return}}if(E){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}11&w||this.addTriangle_(y,d,l,n,s,f),14&w||this.addTriangle_(y,d,m,n,s,h),w&&(13&w||this.addTriangle_(m,l,y,h,f,n),7&w||this.addTriangle_(m,l,d,h,f,s))}calculateSourceExtent(){const y=(0,V.lJ)();return this.triangles_.forEach(function(m,d,l){const n=m.source;(0,V.Wj)(y,n[0]),(0,V.Wj)(y,n[1]),(0,V.Wj)(y,n[2])}),y}getTriangles(){return this.triangles_}}},7582:(jt,ut,o)=>{"use strict";o.d(ut,{m:()=>V});const V=.5},8390:(jt,ut,o)=>{"use strict";function V(k){return Array.isArray(k)?Math.min(...k):k}o.d(ut,{D:()=>V})},7054:(jt,ut,o)=>{"use strict";o.d(ut,{Gw:()=>U,YP:()=>J,gE:()=>$,h$:()=>k});var V=o(6868);function k(S){if(void 0!==S)return 0}function J(S){if(void 0!==S)return S}function $(S){const b=2*Math.PI/S;return function(T,y){return y?T:void 0!==T?T=Math.floor(T/b+.5)*b:void 0}}function U(S){const b=void 0===S?(0,V.Yr)(5):S;return function(T,y){return y||void 0===T?T:Math.abs(T)<=b?0:T}}},7195:(jt,ut,o)=>{"use strict";function k(U){return U[0]>0&&U[1]>0}function J(U,S,b){return void 0===b&&(b=[0,0]),b[0]=U[0]*S+.5|0,b[1]=U[1]*S+.5|0,b}function $(U,S){return Array.isArray(U)?U:(void 0===S?S=[U,U]:(S[0]=U,S[1]=U),S)}o.d(ut,{Pq:()=>$,bA:()=>J,py:()=>k})},5379:(jt,ut,o)=>{"use strict";o.d(ut,{Z:()=>m});var V=o(4855),k=o(7176),J=o(8095),$=o(1308),U=o(63),S=o(9418),b=o(77),T=o(1293);const m=class y extends $.Z{constructor(l){super({attributions:(l=l||{}).attributions,wrapX:l.wrapX}),this.resolution=void 0,this.distance=void 0!==l.distance?l.distance:20,this.minDistance=l.minDistance||0,this.interpolationRatio=0,this.features=[],this.geometryFunction=l.geometryFunction||function(n){const h=n.getGeometry();return(0,S.h)(!h||"Point"===h.getType(),"The default `geometryFunction` can only handle `Point` or null geometries"),h},this.createCustomCluster_=l.createCluster,this.source=null,this.boundRefresh_=this.refresh.bind(this),this.updateDistance(this.distance,this.minDistance),this.setSource(l.source||null)}clear(l){this.features.length=0,super.clear(l)}getDistance(){return this.distance}getSource(){return this.source}loadFeatures(l,n,h){this.source?.loadFeatures(l,n,h),n!==this.resolution&&(this.resolution=n,this.refresh())}setDistance(l){this.updateDistance(l,this.minDistance)}setMinDistance(l){this.updateDistance(this.distance,l)}getMinDistance(){return this.minDistance}setSource(l){this.source&&this.source.removeEventListener(V.Z.CHANGE,this.boundRefresh_),this.source=l,l&&l.addEventListener(V.Z.CHANGE,this.boundRefresh_),this.refresh()}refresh(){this.clear(),this.cluster(),this.addFeatures(this.features)}updateDistance(l,n){const h=0===l?0:Math.min(n,l)/l,s=l!==this.distance||this.interpolationRatio!==h;this.distance=l,this.minDistance=n,this.interpolationRatio=h,s&&this.refresh()}cluster(){if(void 0===this.resolution||!this.source)return;const l=(0,b.lJ)(),n=this.distance*this.resolution,h=this.source.getFeatures(),s={};for(let f=0,g=h.length;f<g;f++){const a=h[f];if(!((0,T.sq)(a)in s)){const I=this.geometryFunction(a);if(I){const p=I.getCoordinates();(0,b.HK)(p,l),(0,b.f3)(l,n,l);const E=this.source.getFeaturesInExtent(l).filter(function(F){const w=(0,T.sq)(F);return!(w in s)&&(s[w]=!0,!0)});this.features.push(this.createCluster(E,l))}}}}createCluster(l,n){const h=[0,0];for(let a=l.length-1;a>=0;--a){const I=this.geometryFunction(l[a]);I?(0,U.IH)(h,I.getCoordinates()):l.splice(a,1)}(0,U.bA)(h,1/l.length);const s=(0,b.qg)(n),f=this.interpolationRatio,g=new J.Z([h[0]*(1-f)+s[0]*f,h[1]*(1-f)+s[1]*f]);return this.createCustomCluster_?this.createCustomCluster_(g,l):new k.Z({geometry:g,features:l})}}},440:(jt,ut,o)=>{"use strict";o.d(ut,{ZP:()=>w,r6:()=>E,Ps:()=>F});var V=o(7065),k=o(4855),J=o(6343),$=o(1830),U=o(7582),S=o(7166),b=o(7576),T=o(8390),y=o(77),m=o(3583);const l=class d extends $.ZP{constructor(O,M,B,Y,C,L,A){let P=O.getExtent();P&&O.canWrapX()&&(P=P.slice(),P[0]=-1/0,P[2]=1/0);let R=M.getExtent();R&&M.canWrapX()&&(R=R.slice(),R[0]=-1/0,R[2]=1/0);const N=R?(0,y.Ed)(B,R):B,Q=(0,y.qg)(N),et=(0,b.aA)(O,M,Q,Y),ot=new S.Z(O,M,N,P,et*U.m,Y),ht=ot.calculateSourceExtent(),mt=(0,y.xb)(ht)?null:L(ht,et,C),xt=mt?J.Z.IDLE:J.Z.EMPTY,Rt=mt?mt.getPixelRatio():1;super(B,Y,Rt,xt),this.targetProj_=M,this.maxSourceExtent_=P,this.triangulation_=ot,this.targetResolution_=Y,this.targetExtent_=B,this.sourceImage_=mt,this.sourcePixelRatio_=Rt,this.interpolate_=A,this.canvas_=null,this.sourceListenerKey_=null}disposeInternal(){this.state==J.Z.LOADING&&this.unlistenSource_(),super.disposeInternal()}getImage(){return this.canvas_}getProjection(){return this.targetProj_}reproject_(){const O=this.sourceImage_.getState();if(O==J.Z.LOADED){const M=(0,y.dz)(this.targetExtent_)/this.targetResolution_,B=(0,y.Cr)(this.targetExtent_)/this.targetResolution_;this.canvas_=(0,b.sY)(M,B,this.sourcePixelRatio_,(0,T.D)(this.sourceImage_.getResolution()),this.maxSourceExtent_,this.targetResolution_,this.targetExtent_,this.triangulation_,[{extent:this.sourceImage_.getExtent(),image:this.sourceImage_.getImage()}],0,void 0,this.interpolate_,!0)}this.state=O,this.changed()}load(){if(this.state==J.Z.IDLE){this.state=J.Z.LOADING,this.changed();const O=this.sourceImage_.getState();O==J.Z.LOADED||O==J.Z.ERROR?this.reproject_():(this.sourceListenerKey_=(0,m.oL)(this.sourceImage_,k.Z.CHANGE,function(M){const B=this.sourceImage_.getState();(B==J.Z.LOADED||B==J.Z.ERROR)&&(this.unlistenSource_(),this.reproject_())},this),this.sourceImage_.load())}}unlistenSource_(){(0,m.bN)(this.sourceListenerKey_),this.sourceListenerKey_=null}};var n=o(1914),h=o(6809),s=o(6868),f=o(7704),g=o(5959);class I extends V.ZP{constructor(O,M){super(O),this.image=M}}function E(K,O){K.getImage().src=O}function F(K,O,M,B){const Y=O/M,C=(0,y.qg)(K),L=(0,s.mD)((0,y.dz)(K)/Y,h.L),A=(0,s.mD)((0,y.Cr)(K)/Y,h.L),R=L+2*(0,s.mD)((B-1)*L/2,h.L),N=(0,s.mD)((B-1)*A/2,h.L);return(0,y.p8)(C,Y,0,[R,A+2*N])}const w=class p extends n.Z{constructor(O){super({attributions:O.attributions,projection:O.projection,state:O.state,interpolate:void 0===O.interpolate||O.interpolate}),this.loader=O.loader||null,this.resolutions_=void 0!==O.resolutions?O.resolutions:null,this.reprojectedImage_=null,this.reprojectedRevision_=0,this.image=null,this.static_=!!O.loader&&0===O.loader.length,this.wantedProjection_=null}getResolutions(){return this.resolutions_}setResolutions(O){this.resolutions_=O}findNearestResolution(O){const M=this.getResolutions();return M&&(O=M[(0,g.h7)(M,O,0)]),O}getImage(O,M,B,Y){const C=this.getProjection();if(!C||!Y||(0,f.OP)(C,Y))return C&&(Y=C),this.getImageInternal(O,M,B,Y);if(this.reprojectedImage_){if(this.reprojectedRevision_==this.getRevision()&&(0,f.OP)(this.reprojectedImage_.getProjection(),Y)&&this.reprojectedImage_.getResolution()==M&&(0,y.fS)(this.reprojectedImage_.getExtent(),O))return this.reprojectedImage_;this.reprojectedImage_.dispose(),this.reprojectedImage_=null}return this.reprojectedImage_=new l(C,Y,O,M,B,(L,A,P)=>this.getImageInternal(L,A,P,C),this.getInterpolate()),this.reprojectedRevision_=this.getRevision(),this.reprojectedImage_}getImageInternal(O,M,B,Y){if(this.loader){const C=F(O,M,B,1),L=this.findNearestResolution(M);if(this.image&&(this.static_||this.wantedProjection_===Y&&(this.wantedExtent_&&(0,y.r4)(this.wantedExtent_,C)||(0,y.r4)(this.image.getExtent(),C))&&(this.wantedResolution_&&(0,T.D)(this.wantedResolution_)===L||(0,T.D)(this.image.getResolution())===L)))return this.image;this.wantedProjection_=Y,this.wantedExtent_=C,this.wantedResolution_=L,this.image=new $.ZP(C,L,B,this.loader),this.image.addEventListener(k.Z.CHANGE,this.handleImageChange.bind(this))}return this.image}handleImageChange(O){const M=O.target;let B;switch(M.getState()){case J.Z.LOADING:this.loading=!0,B="imageloadstart";break;case J.Z.LOADED:this.loading=!1,B="imageloadend";break;case J.Z.ERROR:this.loading=!1,B="imageloaderror";break;default:return}this.hasListener(B)&&this.dispatchEvent(new I(B,M))}}},6328:(jt,ut,o)=>{"use strict";o.d(ut,{Z:()=>b});var V=o(440),k=o(7576),J=o(4322),$=o(1830),U=o(7704);const b=class S extends V.ZP{constructor(y){super({attributions:(y=y||{}).attributions,interpolate:y.interpolate,projection:y.projection,resolutions:y.resolutions}),this.crossOrigin_=void 0!==y.crossOrigin?y.crossOrigin:null,this.url_=y.url,this.imageLoadFunction_=void 0!==y.imageLoadFunction?y.imageLoadFunction:V.r6,this.params_=Object.assign({},y.params),this.serverType_=y.serverType,this.hidpi_=void 0===y.hidpi||y.hidpi,this.renderedRevision_=0,this.ratio_=void 0!==y.ratio?y.ratio:1.5,this.loaderProjection_=null}getFeatureInfoUrl(y,m,d,l){const n=(0,U.U2)(d),h=this.getProjection();h&&h!==n&&(m=(0,k.aA)(h,n,y,m),y=(0,U.vs)(y,n,h));const s={url:this.url_,params:{...this.params_,...l},projection:h||n};return(0,J.QL)(s,y,m)}getLegendUrl(y,m){return(0,J.YT)({url:this.url_,params:{...this.params_,...m}},y)}getParams(){return this.params_}getImageInternal(y,m,d,l){return void 0===this.url_?null:((!this.loader||this.loaderProjection_!==l)&&(this.loaderProjection_=l,this.loader=(0,J.Ke)({crossOrigin:this.crossOrigin_,params:this.params_,projection:l,serverType:this.serverType_,hidpi:this.hidpi_,url:this.url_,ratio:this.ratio_,load:(n,h)=>(this.image.setImage(n),this.imageLoadFunction_(this.image,h),(0,$.Jx)(n))})),super.getImageInternal(y,m,d,l))}getImageLoadFunction(){return this.imageLoadFunction_}getUrl(){return this.url_}setImageLoadFunction(y){this.imageLoadFunction_=y,this.changed()}setUrl(y){y!=this.url_&&(this.url_=y,this.loader=null,this.changed())}updateParams(y){Object.assign(this.params_,y),this.changed()}changed(){this.image=null,super.changed()}}},5290:(jt,ut,o)=>{"use strict";o.d(ut,{Z:()=>$});var V=o(9470);const $=class J extends V.Z{constructor(S){let b;b=void 0!==(S=S||{}).attributions?S.attributions:['&#169; <a href="https://www.openstreetmap.org/copyright" target="_blank">OpenStreetMap</a> contributors.'],super({attributions:b,attributionsCollapsible:!1,cacheSize:S.cacheSize,crossOrigin:void 0!==S.crossOrigin?S.crossOrigin:"anonymous",interpolate:S.interpolate,maxZoom:void 0!==S.maxZoom?S.maxZoom:19,opaque:void 0===S.opaque||S.opaque,reprojectionErrorThreshold:S.reprojectionErrorThreshold,tileLoadFunction:S.tileLoadFunction,transition:S.transition,url:void 0!==S.url?S.url:"https://tile.openstreetmap.org/{z}/{x}/{y}.png",wrapX:S.wrapX,zDirection:S.zDirection})}}},4892:(jt,ut,o)=>{"use strict";o.d(ut,{ZP:()=>L});var V=o(9726),k=o(7065),J=o(4855),$=o(8105),U=o(4910),S=o(440),b=o(1914),T=o(5504),y=o(6775),m=o(7887),d=o(4591),l=o(4836),n=o(77),h=o(1293);let f,s=!0;try{new ImageData(10,10)}catch{s=!1}function a(A){let P=!0;try{new ImageData(10,10)}catch{P=!1}function R(N,Q,et){return P?new ImageData(N,Q,et):{data:N,width:Q,height:et}}return function(N){const Q=N.buffers,et=N.meta,ot=N.width,ht=N.height,mt=Q.length,xt=Q[0].byteLength;if(N.imageOps){const Mt=new Array(mt);for(let Dt=0;Dt<mt;++Dt)Mt[Dt]=R(new Uint8ClampedArray(Q[Dt]),ot,ht);return A(Mt,et).data.buffer}const Rt=new Uint8ClampedArray(xt),at=new Array(mt),pt=new Array(mt);for(let Mt=0;Mt<mt;++Mt)at[Mt]=new Uint8ClampedArray(Q[Mt]),pt[Mt]=[0,0,0,0];for(let Mt=0;Mt<xt;Mt+=4){for(let Dt=0;Dt<mt;++Dt){const Wt=at[Dt];pt[Dt][0]=Wt[Mt],pt[Dt][1]=Wt[Mt+1],pt[Dt][2]=Wt[Mt+2],pt[Dt][3]=Wt[Mt+3]}const Ft=A(pt,et);Rt[Mt]=Ft[0],Rt[Mt+1]=Ft[1],Rt[Mt+2]=Ft[2],Rt[Mt+3]=Ft[3]}return Rt.buffer}}function I(A,P){const N=Object.keys(A.lib||{}).map(function(et){return"const "+et+" = "+A.lib[et].toString()+";"}).concat(["const __minion__ = ("+a.toString()+")(",A.operation.toString(),");",'self.addEventListener("message", function(event) {',"  const buffer = __minion__(event.data);","  self.postMessage({buffer: buffer, meta: event.data.meta}, [buffer]);","});"]),Q=new Worker(typeof Blob>"u"?"data:text/javascript;base64,"+Buffer.from(N.join("\n"),"binary").toString("base64"):URL.createObjectURL(new Blob(N,{type:"text/javascript"})));return Q.addEventListener("message",P),Q}class E extends V.Z{constructor(P){let R;super(),this._imageOps=!!P.imageOps,R=0===P.threads?0:this._imageOps?1:P.threads||1;const N=new Array(R);if(R)for(let Q=0;Q<R;++Q)N[Q]=I(P,this._onWorkerMessage.bind(this,Q));else N[0]=function p(A,P){const R=a(A.operation);let N=!1;return{postMessage:function(Q){setTimeout(function(){N||P({data:{buffer:R(Q),meta:Q.meta}})},0)},terminate:function(){N=!0}}}(P,this._onWorkerMessage.bind(this,0));this._workers=N,this._queue=[],this._maxQueueLength=P.queue||1/0,this._running=0,this._dataLookup={},this._job=null}process(P,R,N){this._enqueue({inputs:P,meta:R,callback:N}),this._dispatch()}_enqueue(P){for(this._queue.push(P);this._queue.length>this._maxQueueLength;)this._queue.shift().callback(null,null)}_dispatch(){if(this._running||0===this._queue.length)return;const P=this._queue.shift();this._job=P;const R=P.inputs[0].width,N=P.inputs[0].height,Q=P.inputs.map(function(ht){return ht.data.buffer}),et=this._workers.length;if(this._running=et,1===et)return void this._workers[0].postMessage({buffers:Q,meta:P.meta,imageOps:this._imageOps,width:R,height:N},Q);const ot=4*Math.ceil(P.inputs[0].data.length/4/et);for(let ht=0;ht<et;++ht){const mt=ht*ot,xt=[];for(let Rt=0,at=Q.length;Rt<at;++Rt)xt.push(Q[Rt].slice(mt,mt+ot));this._workers[ht].postMessage({buffers:xt,meta:P.meta,imageOps:this._imageOps,width:R,height:N},xt)}}_onWorkerMessage(P,R){this.disposed||(this._dataLookup[P]=R.data,--this._running,0===this._running&&this._resolveJob())}_resolveJob(){const P=this._job,R=this._workers.length;let N,Q;if(1===R)N=new Uint8ClampedArray(this._dataLookup[0].buffer),Q=this._dataLookup[0].meta;else{const et=P.inputs[0].data.length;N=new Uint8ClampedArray(et),Q=new Array(R);const H=4*Math.ceil(et/4/R);for(let ot=0;ot<R;++ot){const mt=ot*H;N.set(new Uint8ClampedArray(this._dataLookup[ot].buffer),mt),Q[ot]=this._dataLookup[ot].meta}}this._job=null,this._dataLookup={},P.callback(null,function g(A,P,R){if(s)return new ImageData(A,P,R);f||(f=document.createElement("canvas").getContext("2d"));const N=f.createImageData(P,R);return N.data.set(A),N}(N,P.inputs[0].width,P.inputs[0].height),Q),this._dispatch()}disposeInternal(){for(let P=0;P<this._workers.length;++P)this._workers[P].terminate();this._workers.length=0}}class w extends k.ZP{constructor(P,R,N){super(P),this.extent=R.extent,this.resolution=R.viewState.resolution/R.pixelRatio,this.data=N}}let O=null;function M(A,P){const R=A.getRenderer();if(!R)throw new Error("Unsupported layer type: "+A);if(!R.prepareFrame(P))return null;const N=P.size[0],Q=P.size[1];if(0===N||0===Q)return null;const et=R.renderFrame(P,null);let H;if(et instanceof HTMLCanvasElement)H=et;else{if(et&&(H=et.firstElementChild),!(H instanceof HTMLCanvasElement))throw new Error("Unsupported rendered element: "+H);if(H.width===N&&H.height===Q)return H.getContext("2d").getImageData(0,0,N,Q)}if(O){const ot=O.canvas;ot.width!==N||ot.height!==Q?O=(0,d.E4)(N,Q,void 0,{willReadFrequently:!0}):O.clearRect(0,0,N,Q)}else O=(0,d.E4)(N,Q,void 0,{willReadFrequently:!0});return O.drawImage(H,0,0,N,Q),O.getImageData(0,0,N,Q)}function C(A){let P;return A instanceof b.Z?A instanceof m.Z?P=new T.Z({source:A}):A instanceof S.ZP&&(P=new U.Z({source:A})):P=A,P}const L=class K extends S.ZP{constructor(P){super({projection:null}),this.processor_=null,this.operationType_=void 0!==P.operationType?P.operationType:"pixel",this.threads_=void 0!==P.threads?P.threads:1,this.layers_=function Y(A){const P=A.length,R=new Array(P);for(let N=0;N<P;++N)R[N]=C(A[N]);return R}(P.sources);const R=this.changed.bind(this);for(let N=0,Q=this.layers_.length;N<Q;++N)this.layers_[N].addEventListener(J.Z.CHANGE,R);var A;this.useResolutions_=null!==P.resolutions,this.tileQueue_=new y.Z(function(){return 1},this.processSources_.bind(this)),this.renderedImageCanvas_=null,this.frameState_={animate:!1,coordinateToPixelTransform:(0,l.Ue)(),declutter:null,extent:null,index:0,layerIndex:0,layerStatesArray:(A=this.layers_,A.map(function(P){return P.getLayerState()})),pixelRatio:1,pixelToCoordinateTransform:(0,l.Ue)(),postRenderFunctions:[],size:[0,0],tileQueue:this.tileQueue_,time:Date.now(),usedTiles:{},viewState:{rotation:0},viewHints:[],wantedTiles:{},mapId:(0,h.sq)(this),renderTargets:{}},this.setAttributions(function(N){const Q=[];for(let et=0,H=P.sources.length;et<H;++et){const ot=P.sources[et],ht=ot instanceof b.Z?ot:ot.getSource();if(!ht)continue;const mt=ht.getAttributions();if("function"==typeof mt){const xt=mt(N);Q.push.apply(Q,xt)}}return 0!==Q.length?Q:null}),void 0!==P.operation&&this.setOperation(P.operation,P.lib)}setOperation(P,R){this.processor_&&this.processor_.dispose(),this.processor_=new E({operation:P,imageOps:"image"===this.operationType_,queue:1,lib:R,threads:this.threads_}),this.changed()}updateFrameState_(P,R,N){const Q=Object.assign({},this.frameState_);Q.viewState=Object.assign({},Q.viewState);const et=(0,n.qg)(P);Q.size[0]=Math.ceil((0,n.dz)(P)/R),Q.size[1]=Math.ceil((0,n.Cr)(P)/R),Q.extent=[et[0]-Q.size[0]*R/2,et[1]-Q.size[1]*R/2,et[0]+Q.size[0]*R/2,et[1]+Q.size[1]*R/2],Q.time=Date.now();const H=Q.viewState;return H.center=et,H.projection=N,H.resolution=R,Q}allSourcesReady_(){let R,P=!0;for(let N=0,Q=this.layers_.length;N<Q;++N)if(R=this.layers_[N].getSource(),!R||"ready"!==R.getState()){P=!1;break}return P}getImage(P,R,N,Q){if(!this.allSourcesReady_())return null;this.tileQueue_.loadMoreTiles(16,16),R=this.findNearestResolution(R);const et=this.updateFrameState_(P,R,Q);if(this.requestedFrameState_=et,this.renderedImageCanvas_){const H=this.renderedImageCanvas_.getResolution(),ot=this.renderedImageCanvas_.getExtent();(R!==H||!(0,n.fS)(et.extent,ot))&&(this.renderedImageCanvas_=null)}return(!this.renderedImageCanvas_||this.getRevision()!==this.renderedRevision_)&&this.processSources_(),et.animate&&requestAnimationFrame(this.changed.bind(this)),this.renderedImageCanvas_}processSources_(){const P=this.requestedFrameState_,R=this.layers_.length,N=new Array(R);for(let et=0;et<R;++et){P.layerIndex=et,P.renderTargets={};const H=M(this.layers_[et],P);if(!H)return;N[et]=H}const Q={};this.dispatchEvent(new w("beforeoperations",P,Q)),this.processor_.process(N,Q,this.onWorkerComplete_.bind(this,P))}onWorkerComplete_(P,R,N,Q){if(R||!N)return;const et=P.extent,H=P.viewState.resolution;if(H!==this.requestedFrameState_.viewState.resolution||!(0,n.fS)(et,this.requestedFrameState_.extent))return;let ot;if(this.renderedImageCanvas_)ot=this.renderedImageCanvas_.getImage().getContext("2d");else{const ht=Math.round((0,n.dz)(et)/H),mt=Math.round((0,n.Cr)(et)/H);ot=(0,d.E4)(ht,mt),this.renderedImageCanvas_=new $.Z(et,H,1,ot.canvas)}ot.putImageData(N,0,0),P.animate?requestAnimationFrame(this.changed.bind(this)):this.changed(),this.renderedRevision_=this.getRevision(),this.dispatchEvent(new w("afteroperations",P,Q))}getResolutions(P){if(!this.useResolutions_)return null;let R=super.getResolutions();if(!R)for(let N=0,Q=this.layers_.length;N<Q&&(R=this.layers_[N].getSource().getResolutions(P),!R);++N);return R}disposeInternal(){this.processor_&&this.processor_.dispose(),super.disposeInternal()}}},1914:(jt,ut,o)=>{"use strict";o.d(ut,{Z:()=>U});var V=o(7438),k=o(7704);function $(S){return S?Array.isArray(S)?function(b){return S}:"function"==typeof S?S:function(b){return[S]}:null}const U=class J extends V.Z{constructor(b){super(),this.projection=(0,k.U2)(b.projection),this.attributions_=$(b.attributions),this.attributionsCollapsible_=void 0===b.attributionsCollapsible||b.attributionsCollapsible,this.loading=!1,this.state_=void 0!==b.state?b.state:"ready",this.wrapX_=void 0!==b.wrapX&&b.wrapX,this.interpolate_=!!b.interpolate,this.viewResolver=null,this.viewRejector=null;const T=this;this.viewPromise_=new Promise(function(y,m){T.viewResolver=y,T.viewRejector=m})}getAttributions(){return this.attributions_}getAttributionsCollapsible(){return this.attributionsCollapsible_}getProjection(){return this.projection}getResolutions(b){return null}getView(){return this.viewPromise_}getState(){return this.state_}getWrapX(){return this.wrapX_}getInterpolate(){return this.interpolate_}refresh(){this.changed()}setAttributions(b){this.attributions_=$(b),this.changed()}setState(b){this.state_=b,this.changed()}}},7887:(jt,ut,o)=>{"use strict";o.d(ut,{Z:()=>n,s:()=>l});var V=o(7065),k=o(1914),J=o(4309),$=o(33),U=o(1293),S=o(9418),b=o(7704),T=o(4092),y=o(6971),m=o(7195);class l extends V.ZP{constructor(s,f){super(s),this.tile=f}}const n=class d extends k.Z{constructor(s){super({attributions:s.attributions,attributionsCollapsible:s.attributionsCollapsible,projection:s.projection,state:s.state,wrapX:s.wrapX,interpolate:s.interpolate}),this.opaque_=void 0!==s.opaque&&s.opaque,this.tilePixelRatio_=void 0!==s.tilePixelRatio?s.tilePixelRatio:1,this.tileGrid=void 0!==s.tileGrid?s.tileGrid:null,this.tileGrid&&(0,m.Pq)(this.tileGrid.getTileSize(this.tileGrid.getMinZoom()),[256,256]),this.tileCache=new J.Z(s.cacheSize||0),this.tmpSize=[0,0],this.key_=s.key||"",this.tileOptions={transition:s.transition,interpolate:s.interpolate},this.zDirection=s.zDirection?s.zDirection:0}canExpireCache(){return this.tileCache.canExpireCache()}expireCache(s,f){const g=this.getTileCacheForProjection(s);g&&g.expireCache(f)}forEachLoadedTile(s,f,g,a){const I=this.getTileCacheForProjection(s);if(!I)return!1;let E,F,w,p=!0;for(let K=g.minX;K<=g.maxX;++K)for(let O=g.minY;O<=g.maxY;++O)F=(0,T.lg)(f,K,O),w=!1,I.containsKey(F)&&(E=I.get(F),w=E.getState()===$.Z.LOADED,w&&(w=!1!==a(E))),w||(p=!1);return p}getGutterForProjection(s){return 0}getKey(){return this.key_}setKey(s){this.key_!==s&&(this.key_=s,this.changed())}getOpaque(s){return this.opaque_}getResolutions(s){const f=s?this.getTileGridForProjection(s):this.tileGrid;return f?f.getResolutions():null}getTile(s,f,g,a,I){return(0,U.O3)()}getTileGrid(){return this.tileGrid}getTileGridForProjection(s){return this.tileGrid?this.tileGrid:(0,y.X$)(s)}getTileCacheForProjection(s){const f=this.getProjection();return(0,S.h)(null===f||(0,b.OP)(f,s),"A VectorTile source can only be rendered if it has a projection compatible with the view projection."),this.tileCache}getTilePixelRatio(s){return this.tilePixelRatio_}getTilePixelSize(s,f,g){const a=this.getTileGridForProjection(g),I=this.getTilePixelRatio(f),p=(0,m.Pq)(a.getTileSize(s),this.tmpSize);return 1==I?p:(0,m.bA)(p,I,this.tmpSize)}getTileCoordForTileUrlFunction(s,f){f=void 0!==f?f:this.getProjection();const g=this.getTileGridForProjection(f);return this.getWrapX()&&f.isGlobal()&&(s=(0,y.Cf)(g,s,f)),(0,T.tE)(s,g)?s:null}clear(){this.tileCache.clear()}refresh(){this.clear(),super.refresh()}updateCacheSize(s,f){const g=this.getTileCacheForProjection(f);s>g.highWaterMark&&(g.highWaterMark=s)}useTile(s,f,g,a){}}},4840:(jt,ut,o)=>{"use strict";o.d(ut,{Z:()=>n});var V=o(4855),k=o(7648),J=o(6162),$=o(4309),U=o(33),S=o(322),b=o(7704),T=o(4092),y=o(6971),m=o(1293);function l(h,s){h.getImage().src=s}const n=class d extends S.Z{constructor(s){super({attributions:s.attributions,cacheSize:s.cacheSize,opaque:s.opaque,projection:s.projection,state:s.state,tileGrid:s.tileGrid,tileLoadFunction:s.tileLoadFunction?s.tileLoadFunction:l,tilePixelRatio:s.tilePixelRatio,tileUrlFunction:s.tileUrlFunction,url:s.url,urls:s.urls,wrapX:s.wrapX,transition:s.transition,interpolate:void 0===s.interpolate||s.interpolate,key:s.key,attributionsCollapsible:s.attributionsCollapsible,zDirection:s.zDirection}),this.crossOrigin=void 0!==s.crossOrigin?s.crossOrigin:null,this.tileClass=void 0!==s.tileClass?s.tileClass:k.Z,this.tileCacheForProjection={},this.tileGridForProjection={},this.reprojectionErrorThreshold_=s.reprojectionErrorThreshold,this.renderReprojectionEdges_=!1}canExpireCache(){if(this.tileCache.canExpireCache())return!0;for(const s in this.tileCacheForProjection)if(this.tileCacheForProjection[s].canExpireCache())return!0;return!1}expireCache(s,f){const g=this.getTileCacheForProjection(s);this.tileCache.expireCache(this.tileCache==g?f:{});for(const a in this.tileCacheForProjection){const I=this.tileCacheForProjection[a];I.expireCache(I==g?f:{})}}getGutterForProjection(s){return this.getProjection()&&s&&!(0,b.OP)(this.getProjection(),s)?0:this.getGutter()}getGutter(){return 0}getKey(){let s=super.getKey();return this.getInterpolate()||(s+=":disable-interpolation"),s}getOpaque(s){return!(this.getProjection()&&s&&!(0,b.OP)(this.getProjection(),s))&&super.getOpaque(s)}getTileGridForProjection(s){const f=this.getProjection();if(this.tileGrid&&(!f||(0,b.OP)(f,s)))return this.tileGrid;const g=(0,m.sq)(s);return g in this.tileGridForProjection||(this.tileGridForProjection[g]=(0,y.X$)(s)),this.tileGridForProjection[g]}getTileCacheForProjection(s){const f=this.getProjection();if(!f||(0,b.OP)(f,s))return this.tileCache;const g=(0,m.sq)(s);return g in this.tileCacheForProjection||(this.tileCacheForProjection[g]=new $.Z(this.tileCache.highWaterMark)),this.tileCacheForProjection[g]}createTile_(s,f,g,a,I,p){const E=[s,f,g],F=this.getTileCoordForTileUrlFunction(E,I),w=F?this.tileUrlFunction(F,a,I):void 0,K=new this.tileClass(E,void 0!==w?U.Z.IDLE:U.Z.EMPTY,void 0!==w?w:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return K.key=p,K.addEventListener(V.Z.CHANGE,this.handleTileChange.bind(this)),K}getTile(s,f,g,a,I){const p=this.getProjection();if(!p||!I||(0,b.OP)(p,I))return this.getTileInternal(s,f,g,a,p||I);const E=this.getTileCacheForProjection(I),F=[s,f,g];let w;const K=(0,T.km)(F);E.containsKey(K)&&(w=E.get(K));const O=this.getKey();if(w&&w.key==O)return w;const M=this.getTileGridForProjection(p),B=this.getTileGridForProjection(I),Y=this.getTileCoordForTileUrlFunction(F,I),C=new J.Z(p,M,I,B,F,Y,this.getTilePixelRatio(a),this.getGutter(),(L,A,P,R)=>this.getTileInternal(L,A,P,R,p),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_,this.tileOptions);return C.key=O,w?(C.interimTile=w,C.refreshInterimChain(),E.replace(K,C)):E.set(K,C),C}getTileInternal(s,f,g,a,I){let p=null;const E=(0,T.lg)(s,f,g),F=this.getKey();if(this.tileCache.containsKey(E)){if(p=this.tileCache.get(E),p.key!=F){const w=p;p=this.createTile_(s,f,g,a,I,F),p.interimTile=w.getState()==U.Z.IDLE?w.interimTile:w,p.refreshInterimChain(),this.tileCache.replace(E,p)}}else p=this.createTile_(s,f,g,a,I,F),this.tileCache.set(E,p);return p}setRenderReprojectionEdges(s){if(this.renderReprojectionEdges_!=s){this.renderReprojectionEdges_=s;for(const f in this.tileCacheForProjection)this.tileCacheForProjection[f].clear();this.changed()}}setTileGridForProjection(s,f){const g=(0,b.U2)(s);if(g){const a=(0,m.sq)(g);a in this.tileGridForProjection||(this.tileGridForProjection[a]=f)}}clear(){super.clear();for(const s in this.tileCacheForProjection)this.tileCacheForProjection[s].clear()}}},8618:(jt,ut,o)=>{"use strict";o.d(ut,{Z:()=>d});var V=o(4840),k=o(4322),J=o(8428),$=o(77),U=o(7576),S=o(5589),b=o(7704),T=o(6868),y=o(4092);const d=class m extends V.Z{constructor(n){n=n||{};const h=Object.assign({},n.params);super({attributions:n.attributions,attributionsCollapsible:n.attributionsCollapsible,cacheSize:n.cacheSize,crossOrigin:n.crossOrigin,interpolate:n.interpolate,opaque:!(!("TRANSPARENT"in h)||h.TRANSPARENT),projection:n.projection,reprojectionErrorThreshold:n.reprojectionErrorThreshold,tileClass:n.tileClass,tileGrid:n.tileGrid,tileLoadFunction:n.tileLoadFunction,url:n.url,urls:n.urls,wrapX:void 0===n.wrapX||n.wrapX,transition:n.transition,zDirection:n.zDirection}),this.gutter_=void 0!==n.gutter?n.gutter:0,this.params_=h,this.v13_=!0,this.serverType_=n.serverType,this.hidpi_=void 0===n.hidpi||n.hidpi,this.tmpExtent_=(0,$.lJ)(),this.updateV13_(),this.setKey(this.getKeyForParams_())}getFeatureInfoUrl(n,h,s,f){const g=(0,b.U2)(s),a=this.getProjection()||g;let I=this.getTileGrid();I||(I=this.getTileGridForProjection(a));const p=(0,b.vs)(n,g,a),E=(0,U.aA)(a,g,n,h),F=I.getZForResolution(E,this.zDirection),w=I.getResolution(F),K=I.getTileCoordForCoordAndZ(p,F);if(I.getResolutions().length<=K[0])return;let O=I.getTileCoordExtent(K,this.tmpExtent_);const M=this.gutter_;0!==M&&(O=(0,$.f3)(O,w*M,O));const B={QUERY_LAYERS:this.params_.LAYERS};Object.assign(B,(0,k.jt)(this.params_,"GetFeatureInfo"),f);const Y=Math.floor((p[0]-O[0])/w),C=Math.floor((O[3]-p[1])/w);return B[this.v13_?"I":"X"]=Y,B[this.v13_?"J":"Y"]=C,this.getRequestUrl_(K,O,1,a||g,B)}getLegendUrl(n,h){if(void 0===this.urls[0])return;const s={SERVICE:"WMS",VERSION:k.eQ,REQUEST:"GetLegendGraphic",FORMAT:"image/png"};if(void 0===h||void 0===h.LAYER){const f=this.params_.LAYERS;if(Array.isArray(f)&&1!==f.length)return;s.LAYER=f}if(void 0!==n){const f=this.getProjection()?this.getProjection().getMetersPerUnit():1;s.SCALE=n*f/28e-5}return Object.assign(s,h),(0,J.B)(this.urls[0],s)}getGutter(){return this.gutter_}getParams(){return this.params_}getRequestUrl_(n,h,s,f,g){const a=this.urls;if(!a)return;let I;return I=1==a.length?a[0]:a[(0,T.$W)((0,y.vp)(n),a.length)],(0,k.Q4)(h,(this.tileGrid||this.getTileGridForProjection(f)).getResolution(n[0]),s,f,I,g,this.serverType_)}getTilePixelRatio(n){return this.hidpi_&&void 0!==this.serverType_?n:1}getKeyForParams_(){let n=0;const h=[];for(const s in this.params_)h[n++]=s+"-"+this.params_[s];return h.join("/")}updateParams(n){Object.assign(this.params_,n),this.updateV13_(),this.setKey(this.getKeyForParams_())}updateV13_(){this.v13_=(0,S.n)(this.params_.VERSION||k.eQ,"1.3")>=0}tileUrlFunction(n,h,s){let f=this.getTileGrid();if(f||(f=this.getTileGridForProjection(s)),f.getResolutions().length<=n[0])return;1!=h&&(!this.hidpi_||void 0===this.serverType_)&&(h=1);const g=f.getResolution(n[0]);let a=f.getTileCoordExtent(n,this.tmpExtent_);const I=this.gutter_;0!==I&&(a=(0,$.f3)(a,g*I,a));const p=Object.assign({},(0,k.jt)(this.params_,"GetMap"));return this.getRequestUrl_(n,a,h,s,p)}}},322:(jt,ut,o)=>{"use strict";o.d(ut,{Z:()=>T});var k=o(7887),J=o(33),$=o(3824),U=o(4092),S=o(1293);class b extends k.Z{constructor(m){super({attributions:m.attributions,cacheSize:m.cacheSize,opaque:m.opaque,projection:m.projection,state:m.state,tileGrid:m.tileGrid,tilePixelRatio:m.tilePixelRatio,wrapX:m.wrapX,transition:m.transition,interpolate:m.interpolate,key:m.key,attributionsCollapsible:m.attributionsCollapsible,zDirection:m.zDirection}),this.generateTileUrlFunction_=this.tileUrlFunction===b.prototype.tileUrlFunction,this.tileLoadFunction=m.tileLoadFunction,m.tileUrlFunction&&(this.tileUrlFunction=m.tileUrlFunction),this.urls=null,m.urls?this.setUrls(m.urls):m.url&&this.setUrl(m.url),this.tileLoadingKeys_={}}getTileLoadFunction(){return this.tileLoadFunction}getTileUrlFunction(){return Object.getPrototypeOf(this).tileUrlFunction===this.tileUrlFunction?this.tileUrlFunction.bind(this):this.tileUrlFunction}getUrls(){return this.urls}handleTileChange(m){const d=m.target,l=(0,S.sq)(d),n=d.getState();let h;n==J.Z.LOADING?(this.tileLoadingKeys_[l]=!0,h="tileloadstart"):l in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[l],h=n==J.Z.ERROR?"tileloaderror":n==J.Z.LOADED?"tileloadend":void 0),null!=h&&this.dispatchEvent(new k.s(h,d))}setTileLoadFunction(m){this.tileCache.clear(),this.tileLoadFunction=m,this.changed()}setTileUrlFunction(m,d){this.tileUrlFunction=m,this.tileCache.pruneExceptNewestZ(),typeof d<"u"?this.setKey(d):this.changed()}setUrl(m){const d=(0,$.Gk)(m);this.urls=d,this.setUrls(d)}setUrls(m){this.urls=m;const d=m.join("\n");this.generateTileUrlFunction_?this.setTileUrlFunction((0,$.uR)(m,this.tileGrid),d):this.setKey(d)}tileUrlFunction(m,d,l){}useTile(m,d,l){const n=(0,U.lg)(m,d,l);this.tileCache.containsKey(n)&&this.tileCache.get(n)}}const T=b},1308:(jt,ut,o)=>{"use strict";o.d(ut,{Z:()=>w});var V=o(7934),k=o(7069),J=o(7065),$=o(4855),U=o(2e3),S=o(3727),b=o(77),T=o(1293),y=o(5269);const d=class m{constructor(O){this.rbush_=new S(O),this.items_={}}insert(O,M){const B={minX:O[0],minY:O[1],maxX:O[2],maxY:O[3],value:M};this.rbush_.insert(B),this.items_[(0,T.sq)(M)]=B}load(O,M){const B=new Array(M.length);for(let Y=0,C=M.length;Y<C;Y++){const L=O[Y],A=M[Y],P={minX:L[0],minY:L[1],maxX:L[2],maxY:L[3],value:A};B[Y]=P,this.items_[(0,T.sq)(A)]=P}this.rbush_.load(B)}remove(O){const M=(0,T.sq)(O),B=this.items_[M];return delete this.items_[M],null!==this.rbush_.remove(B)}update(O,M){const B=this.items_[(0,T.sq)(M)];(0,b.fS)([B.minX,B.minY,B.maxX,B.maxY],O)||(this.remove(M),this.insert(O,M))}getAll(){return this.rbush_.all().map(function(M){return M.value})}getInExtent(O){return this.rbush_.search({minX:O[0],minY:O[1],maxX:O[2],maxY:O[3]}).map(function(Y){return Y.value})}forEach(O){return this.forEach_(this.getAll(),O)}forEachInExtent(O,M){return this.forEach_(this.getInExtent(O),M)}forEach_(O,M){let B;for(let Y=0,C=O.length;Y<C;Y++)if(B=M(O[Y]),B)return B;return B}isEmpty(){return(0,y.x)(this.items_)}clear(){this.rbush_.clear(),this.items_={}}getExtent(O){const M=this.rbush_.toJSON();return(0,b.T9)(M.minX,M.minY,M.maxX,M.maxY,O)}concat(O){this.rbush_.load(O.rbush_.all());for(const M in O.items_)this.items_[M]=O.items_[M]}};var l=o(3387),n=o(1914),h=o(8883),s=o(5173),f=o(133),g=o(9418),a=o(5959),I=o(3583),p=o(6152);class E extends J.ZP{constructor(O,M,B){super(O),this.feature=M,this.features=B}}const w=class F extends n.Z{constructor(O){super({attributions:(O=O||{}).attributions,interpolate:!0,projection:void 0,state:"ready",wrapX:void 0===O.wrapX||O.wrapX}),this.loader_=s.Zn,this.format_=O.format,this.overlaps_=void 0===O.overlaps||O.overlaps,this.url_=O.url,void 0!==O.loader?this.loader_=O.loader:void 0!==this.url_&&((0,g.h)(this.format_,"`format` must be set when `url` is set"),this.loader_=(0,p.Be)(this.url_,this.format_)),this.strategy_=void 0!==O.strategy?O.strategy:f.$6;const M=void 0===O.useSpatialIndex||O.useSpatialIndex;let B,Y;this.featuresRtree_=M?new d:null,this.loadedExtentsRtree_=new d,this.loadingExtentsCount_=0,this.nullGeometryFeatures_={},this.idIndex_={},this.uidIndex_={},this.featureChangeKeys_={},this.featuresCollection_=null,Array.isArray(O.features)?Y=O.features:O.features&&(B=O.features,Y=B.getArray()),!M&&void 0===B&&(B=new V.Z(Y)),void 0!==Y&&this.addFeaturesInternal(Y),void 0!==B&&this.bindFeaturesCollection_(B)}addFeature(O){this.addFeatureInternal(O),this.changed()}addFeatureInternal(O){const M=(0,T.sq)(O);if(!this.addToIndex_(M,O))return void(this.featuresCollection_&&this.featuresCollection_.remove(O));this.setupChangeEvents_(M,O);const B=O.getGeometry();if(B){const Y=B.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(Y,O)}else this.nullGeometryFeatures_[M]=O;this.dispatchEvent(new E(h.Z.ADDFEATURE,O))}setupChangeEvents_(O,M){M instanceof l.ZP||(this.featureChangeKeys_[O]=[(0,I.oL)(M,$.Z.CHANGE,this.handleFeatureChange_,this),(0,I.oL)(M,U.Z.PROPERTYCHANGE,this.handleFeatureChange_,this)])}addToIndex_(O,M){let B=!0;if(void 0!==M.getId()){const Y=String(M.getId());if(Y in this.idIndex_)if(M instanceof l.ZP){const C=this.idIndex_[Y];C instanceof l.ZP?Array.isArray(C)?C.push(M):this.idIndex_[Y]=[C,M]:B=!1}else B=!1;else this.idIndex_[Y]=M}return B&&((0,g.h)(!(O in this.uidIndex_),"The passed `feature` was already added to the source"),this.uidIndex_[O]=M),B}addFeatures(O){this.addFeaturesInternal(O),this.changed()}addFeaturesInternal(O){const M=[],B=[],Y=[];for(let C=0,L=O.length;C<L;C++){const A=O[C],P=(0,T.sq)(A);this.addToIndex_(P,A)&&B.push(A)}for(let C=0,L=B.length;C<L;C++){const A=B[C],P=(0,T.sq)(A);this.setupChangeEvents_(P,A);const R=A.getGeometry();if(R){const N=R.getExtent();M.push(N),Y.push(A)}else this.nullGeometryFeatures_[P]=A}if(this.featuresRtree_&&this.featuresRtree_.load(M,Y),this.hasListener(h.Z.ADDFEATURE))for(let C=0,L=B.length;C<L;C++)this.dispatchEvent(new E(h.Z.ADDFEATURE,B[C]))}bindFeaturesCollection_(O){let M=!1;this.addEventListener(h.Z.ADDFEATURE,function(B){M||(M=!0,O.push(B.feature),M=!1)}),this.addEventListener(h.Z.REMOVEFEATURE,function(B){M||(M=!0,O.remove(B.feature),M=!1)}),O.addEventListener(k.Z.ADD,B=>{M||(M=!0,this.addFeature(B.element),M=!1)}),O.addEventListener(k.Z.REMOVE,B=>{M||(M=!0,this.removeFeature(B.element),M=!1)}),this.featuresCollection_=O}clear(O){if(O){for(const B in this.featureChangeKeys_)this.featureChangeKeys_[B].forEach(I.bN);this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.uidIndex_={})}else if(this.featuresRtree_){this.featuresRtree_.forEach(Y=>{this.removeFeatureInternal(Y)});for(const Y in this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[Y])}this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.nullGeometryFeatures_={};const M=new E(h.Z.CLEAR);this.dispatchEvent(M),this.changed()}forEachFeature(O){if(this.featuresRtree_)return this.featuresRtree_.forEach(O);this.featuresCollection_&&this.featuresCollection_.forEach(O)}forEachFeatureAtCoordinateDirect(O,M){return this.forEachFeatureInExtent([O[0],O[1],O[0],O[1]],function(Y){const C=Y.getGeometry();if(C instanceof l.ZP||C.intersectsCoordinate(O))return M(Y)})}forEachFeatureInExtent(O,M){if(this.featuresRtree_)return this.featuresRtree_.forEachInExtent(O,M);this.featuresCollection_&&this.featuresCollection_.forEach(M)}forEachFeatureIntersectingExtent(O,M){return this.forEachFeatureInExtent(O,function(B){const Y=B.getGeometry();if(Y instanceof l.ZP||Y.intersectsExtent(O)){const C=M(B);if(C)return C}})}getFeaturesCollection(){return this.featuresCollection_}getFeatures(){let O;return this.featuresCollection_?O=this.featuresCollection_.getArray().slice(0):this.featuresRtree_&&(O=this.featuresRtree_.getAll(),(0,y.x)(this.nullGeometryFeatures_)||(0,a.l7)(O,Object.values(this.nullGeometryFeatures_))),O}getFeaturesAtCoordinate(O){const M=[];return this.forEachFeatureAtCoordinateDirect(O,function(B){M.push(B)}),M}getFeaturesInExtent(O,M){if(this.featuresRtree_){if(!(M&&M.canWrapX()&&this.getWrapX()))return this.featuresRtree_.getInExtent(O);const Y=(0,b.MV)(O,M);return[].concat(...Y.map(C=>this.featuresRtree_.getInExtent(C)))}return this.featuresCollection_?this.featuresCollection_.getArray().slice(0):[]}getClosestFeatureToCoordinate(O,M){const B=O[0],Y=O[1];let C=null;const L=[NaN,NaN];let A=1/0;const P=[-1/0,-1/0,1/0,1/0];return M=M||s.uX,this.featuresRtree_.forEachInExtent(P,function(R){if(M(R)){const N=R.getGeometry(),Q=A;if(A=N instanceof l.ZP?0:N.closestPointXY(B,Y,L,A),A<Q){C=R;const et=Math.sqrt(A);P[0]=B-et,P[1]=Y-et,P[2]=B+et,P[3]=Y+et}}}),C}getExtent(O){return this.featuresRtree_.getExtent(O)}getFeatureById(O){const M=this.idIndex_[O.toString()];return void 0!==M?M:null}getFeatureByUid(O){const M=this.uidIndex_[O];return void 0!==M?M:null}getFormat(){return this.format_}getOverlaps(){return this.overlaps_}getUrl(){return this.url_}handleFeatureChange_(O){const M=O.target,B=(0,T.sq)(M),Y=M.getGeometry();if(Y){const L=Y.getExtent();B in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[B],this.featuresRtree_&&this.featuresRtree_.insert(L,M)):this.featuresRtree_&&this.featuresRtree_.update(L,M)}else B in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(M),this.nullGeometryFeatures_[B]=M);const C=M.getId();if(void 0!==C){const L=C.toString();this.idIndex_[L]!==M&&(this.removeFromIdIndex_(M),this.idIndex_[L]=M)}else this.removeFromIdIndex_(M),this.uidIndex_[B]=M;this.changed(),this.dispatchEvent(new E(h.Z.CHANGEFEATURE,M))}hasFeature(O){const M=O.getId();return void 0!==M?M in this.idIndex_:(0,T.sq)(O)in this.uidIndex_}isEmpty(){return this.featuresRtree_?this.featuresRtree_.isEmpty()&&(0,y.x)(this.nullGeometryFeatures_):!this.featuresCollection_||0===this.featuresCollection_.getLength()}loadFeatures(O,M,B){const Y=this.loadedExtentsRtree_,C=this.strategy_(O,M,B);for(let L=0,A=C.length;L<A;++L){const P=C[L];Y.forEachInExtent(P,function(N){return(0,b.r4)(N.extent,P)})||(++this.loadingExtentsCount_,this.dispatchEvent(new E(h.Z.FEATURESLOADSTART)),this.loader_.call(this,P,M,B,N=>{--this.loadingExtentsCount_,this.dispatchEvent(new E(h.Z.FEATURESLOADEND,void 0,N))},()=>{--this.loadingExtentsCount_,this.dispatchEvent(new E(h.Z.FEATURESLOADERROR))}),Y.insert(P,{extent:P.slice()}))}this.loading=!(this.loader_.length<4)&&this.loadingExtentsCount_>0}refresh(){this.clear(!0),this.loadedExtentsRtree_.clear(),super.refresh()}removeLoadedExtent(O){const M=this.loadedExtentsRtree_;let B;M.forEachInExtent(O,function(Y){if((0,b.fS)(Y.extent,O))return B=Y,!0}),B&&M.remove(B)}removeFeatures(O){const M=[];for(let B=0,Y=O.length;B<Y;++B){const L=this.removeFeatureInternal(O[B]);L&&M.push(L)}M.length>0&&this.changed()}removeFeature(O){O&&this.removeFeatureInternal(O)&&this.changed()}removeFeatureInternal(O){const M=(0,T.sq)(O);if(!(M in this.uidIndex_))return;M in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[M]:this.featuresRtree_&&this.featuresRtree_.remove(O),this.featureChangeKeys_[M]?.forEach(I.bN),delete this.featureChangeKeys_[M];const Y=O.getId();if(void 0!==Y){const C=Y.toString(),L=this.idIndex_[C];L===O?delete this.idIndex_[C]:Array.isArray(L)&&(L.splice(L.indexOf(O),1),1===L.length&&(this.idIndex_[C]=L[0]))}return delete this.uidIndex_[M],this.hasListener(h.Z.REMOVEFEATURE)&&this.dispatchEvent(new E(h.Z.REMOVEFEATURE,O)),O}removeFromIdIndex_(O){let M=!1;for(const B in this.idIndex_){const Y=this.idIndex_[B];if(O instanceof l.ZP&&Array.isArray(Y)&&Y.includes(O))Y.splice(Y.indexOf(O),1);else if(this.idIndex_[B]===O){delete this.idIndex_[B],M=!0;break}}return M}setLoader(O){this.loader_=O}setUrl(O){(0,g.h)(this.format_,"`format` must be set when `url` is set"),this.url_=O,this.setLoader((0,p.Be)(O,this.format_))}}},8883:(jt,ut,o)=>{"use strict";o.d(ut,{Z:()=>V});const V={ADDFEATURE:"addfeature",CHANGEFEATURE:"changefeature",CLEAR:"clear",REMOVEFEATURE:"removefeature",FEATURESLOADSTART:"featuresloadstart",FEATURESLOADEND:"featuresloadend",FEATURESLOADERROR:"featuresloaderror"}},5645:(jt,ut,o)=>{"use strict";o.d(ut,{Z:()=>E,I:()=>F});var V=o(4855),k=o(8939),J=o(4309),$=o(4876),U=o(33),S=o(322),b=o(2738),T=o(4591),y=o(1293);const m=[],l=class d extends b.Z{constructor(K,O,M,B){super(K,O,{transition:0}),this.context_={},this.executorGroups={},this.loadingSourceTiles=0,this.hitDetectionImageData={},this.replayState_={},this.sourceTiles=[],this.errorTileKeys={},this.getSourceTiles=B.bind(void 0,this),this.wrappedTileCoord=M}getContext(K){const O=(0,y.sq)(K);return O in this.context_||(this.context_[O]=(0,T.E4)(1,1,m)),this.context_[O]}hasContext(K){return(0,y.sq)(K)in this.context_}getImage(K){return this.hasContext(K)?this.getContext(K).canvas:null}getReplayState(K){const O=(0,y.sq)(K);return O in this.replayState_||(this.replayState_[O]={dirty:!1,renderedRenderOrder:null,renderedResolution:NaN,renderedRevision:-1,renderedTileResolution:NaN,renderedTileRevision:-1,renderedTileZ:-1}),this.replayState_[O]}load(){this.getSourceTiles()}release(){for(const K in this.context_){const O=this.context_[K];(0,T.jy)(O),m.push(O.canvas),delete this.context_[K]}super.release()}};var n=o(1821),h=o(77),s=o(6971),f=o(4092),g=o(5269),a=o(6152),I=o(7195);const E=class p extends S.Z{constructor(K){const O=K.projection||"EPSG:3857",M=K.extent||(0,s.Tl)(O),B=K.tileGrid||(0,s.dl)({extent:M,maxResolution:K.maxResolution,maxZoom:void 0!==K.maxZoom?K.maxZoom:22,minZoom:K.minZoom,tileSize:K.tileSize||512});super({attributions:K.attributions,attributionsCollapsible:K.attributionsCollapsible,cacheSize:K.cacheSize,interpolate:!0,opaque:!1,projection:O,state:K.state,tileGrid:B,tileLoadFunction:K.tileLoadFunction?K.tileLoadFunction:F,tileUrlFunction:K.tileUrlFunction,url:K.url,urls:K.urls,wrapX:void 0===K.wrapX||K.wrapX,transition:K.transition,zDirection:void 0===K.zDirection?1:K.zDirection}),this.format_=K.format?K.format:null,this.sourceTileCache=new J.Z(this.tileCache.highWaterMark),this.overlaps_=null==K.overlaps||K.overlaps,this.tileClass=K.tileClass?K.tileClass:k.Z,this.tileGrids_={}}getFeaturesInExtent(K){const O=[],M=this.tileCache;if(0===M.getCount())return O;const B=(0,f.Ul)(M.peekFirstKey())[0],Y=this.tileGrid;return M.forEach(function(C){if(C.tileCoord[0]!==B||C.getState()!==U.Z.LOADED)return;const L=C.getSourceTiles();for(let A=0,P=L.length;A<P;++A){const R=L[A];if((0,h.kK)(K,Y.getTileCoordExtent(R.tileCoord))){const Q=R.getFeatures();if(Q)for(let et=0,H=Q.length;et<H;++et){const ot=Q[et],ht=ot.getGeometry();(0,h.kK)(K,ht.getExtent())&&O.push(ot)}}}}),O}getOverlaps(){return this.overlaps_}clear(){this.tileCache.clear(),this.sourceTileCache.clear()}expireCache(K,O){const M=this.getTileCacheForProjection(K),B=Object.keys(O).reduce((Y,C)=>{const L=(0,f.MY)(C),A=M.peek(L);if(A){const P=A.sourceTiles;for(let R=0,N=P.length;R<N;++R)Y[P[R].getKey()]=!0}return Y},{});super.expireCache(K,O),this.sourceTileCache.expireCache(B)}getSourceTiles(K,O,M){if(M.getState()===U.Z.IDLE){M.setState(U.Z.LOADING);const B=M.wrappedTileCoord,Y=this.getTileGridForProjection(O),C=Y.getTileCoordExtent(B),A=Y.getResolution(B[0]);(0,h.f3)(C,-A,C);const P=this.tileGrid,R=P.getExtent();R&&(0,h.Ed)(C,R,C);const N=P.getZForResolution(A,this.zDirection);P.forEachTileCoord(C,N,Q=>{const et=this.tileUrlFunction(Q,K,O),H=this.sourceTileCache.containsKey(et)?this.sourceTileCache.get(et):new this.tileClass(Q,et?U.Z.IDLE:U.Z.EMPTY,et,this.format_,this.tileLoadFunction);M.sourceTiles.push(H);const ot=H.getState();if(ot<U.Z.LOADED){const ht=mt=>{this.handleTileChange(mt);const xt=H.getState();if(xt===U.Z.LOADED||xt===U.Z.ERROR){const Rt=H.getKey();Rt in M.errorTileKeys?H.getState()===U.Z.LOADED&&delete M.errorTileKeys[Rt]:M.loadingSourceTiles--,xt===U.Z.ERROR?M.errorTileKeys[Rt]=!0:H.removeEventListener(V.Z.CHANGE,ht),0===M.loadingSourceTiles&&M.setState((0,g.x)(M.errorTileKeys)?U.Z.LOADED:U.Z.ERROR)}};H.addEventListener(V.Z.CHANGE,ht),M.loadingSourceTiles++}ot===U.Z.IDLE&&(H.extent=P.getTileCoordExtent(Q),H.projection=O,H.resolution=P.getResolution(Q[0]),this.sourceTileCache.set(et,H),H.load())}),M.loadingSourceTiles||M.setState(M.sourceTiles.some(Q=>Q.getState()===U.Z.ERROR)?U.Z.ERROR:U.Z.LOADED)}return M.sourceTiles}getTile(K,O,M,B,Y){const C=(0,f.lg)(K,O,M),L=this.getKey();let A;if(this.tileCache.containsKey(C)&&(A=this.tileCache.get(C),A.key===L))return A;const P=[K,O,M];let R=this.getTileCoordForTileUrlFunction(P,Y);const N=this.getTileGrid().getExtent(),Q=this.getTileGridForProjection(Y);if(R&&N){const ot=Q.getTileCoordExtent(R);(0,h.f3)(ot,-Q.getResolution(K),ot),(0,h.kK)(N,ot)||(R=null)}let et=!0;if(null!==R){const ot=this.tileGrid,ht=Q.getResolution(K),mt=ot.getZForResolution(ht,1),xt=Q.getTileCoordExtent(R);(0,h.f3)(xt,-ht,xt),ot.forEachTileCoord(xt,mt,Rt=>{et=et&&!this.tileUrlFunction(Rt,B,Y)})}const H=new l(P,et?U.Z.EMPTY:U.Z.IDLE,R,this.getSourceTiles.bind(this,B,Y));return H.key=L,A?(H.interimTile=A,H.refreshInterimChain(),this.tileCache.replace(C,H)):this.tileCache.set(C,H),H}getTileGridForProjection(K){const O=K.getCode();let M=this.tileGrids_[O];if(!M){const B=this.tileGrid,Y=B.getResolutions().slice(),C=Y.map(function(P,R){return B.getOrigin(R)}),L=Y.map(function(P,R){return B.getTileSize(R)}),A=n.e+1;for(let P=Y.length;P<A;++P)Y.push(Y[P-1]/2),C.push(C[P-1]),L.push(L[P-1]);M=new $.Z({extent:B.getExtent(),origins:C,resolutions:Y,tileSizes:L}),this.tileGrids_[O]=M}return M}getTilePixelRatio(K){return K}getTilePixelSize(K,O,M){const B=this.getTileGridForProjection(M),Y=(0,I.Pq)(B.getTileSize(K),this.tmpSize);return[Math.round(Y[0]*O),Math.round(Y[1]*O)]}updateCacheSize(K,O){super.updateCacheSize(2*K,O),this.sourceTileCache.highWaterMark=this.getTileCacheForProjection(O).highWaterMark}};function F(w,K){w.setLoader(function(O,M,B){(0,a.ov)(K,w.getFormat(),O,M,B,w.onLoad.bind(w),w.onError.bind(w))})}},9470:(jt,ut,o)=>{"use strict";o.d(ut,{Z:()=>$});var V=o(4840),k=o(6971);const $=class J extends V.Z{constructor(S){const b=void 0!==(S=S||{}).projection?S.projection:"EPSG:3857",T=void 0!==S.tileGrid?S.tileGrid:(0,k.dl)({extent:(0,k.Tl)(b),maxResolution:S.maxResolution,maxZoom:S.maxZoom,minZoom:S.minZoom,tileSize:S.tileSize});super({attributions:S.attributions,cacheSize:S.cacheSize,crossOrigin:S.crossOrigin,interpolate:S.interpolate,opaque:S.opaque,projection:b,reprojectionErrorThreshold:S.reprojectionErrorThreshold,tileGrid:T,tileLoadFunction:S.tileLoadFunction,tilePixelRatio:S.tilePixelRatio,tileUrlFunction:S.tileUrlFunction,url:S.url,urls:S.urls,wrapX:void 0===S.wrapX||S.wrapX,transition:S.transition,attributionsCollapsible:S.attributionsCollapsible,zDirection:S.zDirection}),this.gutter_=void 0!==S.gutter?S.gutter:0}getGutter(){return this.gutter_}}},6809:(jt,ut,o)=>{"use strict";o.d(ut,{L:()=>k});const k=4},4322:(jt,ut,o)=>{"use strict";o.d(ut,{Ke:()=>h,Q4:()=>l,QL:()=>s,YT:()=>f,eQ:()=>y,jt:()=>n});var V=o(6809),k=o(8428),J=o(5589),$=o(1830),U=o(6868),S=o(77),b=o(7704),T=o(440);const y="1.3.0",m=[101,101];function d(g,a,I,p,E){E.WIDTH=I[0],E.HEIGHT=I[1];const F=p.getAxisOrientation();let w;const K=(0,J.n)(E.VERSION,"1.3")>=0;return E[K?"CRS":"SRS"]=p.getCode(),w=K&&"ne"==F.substr(0,2)?[a[1],a[0],a[3],a[2]]:a,E.BBOX=w.join(","),(0,k.B)(g,E)}function l(g,a,I,p,E,F,w){F=Object.assign({REQUEST:"GetMap"},F);const K=a/I,O=[(0,U.NM)((0,S.dz)(g)/K,V.L),(0,U.NM)((0,S.Cr)(g)/K,V.L)];if(1!=I)switch(w){case"geoserver":const B=90*I+.5|0;"FORMAT_OPTIONS"in F?F.FORMAT_OPTIONS+=";dpi:"+B:F.FORMAT_OPTIONS="dpi:"+B;break;case"mapserver":F.MAP_RESOLUTION=90*I;break;case"carmentaserver":case"qgis":F.DPI=90*I;break;default:throw new Error("Unknown `serverType` configured")}return d(E,g,O,p,F)}function n(g,a){return Object.assign({REQUEST:a,SERVICE:"WMS",VERSION:y,FORMAT:"image/png",STYLES:"",TRANSPARENT:!0},g)}function h(g){const a=void 0===g.hidpi||g.hidpi,I=(0,b.U2)(g.projection||"EPSG:3857"),p=g.ratio||1.5,E=g.load||$.Jx;return(F,w,K)=>{F=(0,T.Ps)(F,w,K,p),1!=K&&(!a||void 0===g.serverType)&&(K=1);const O=l(F,w,K,I,g.url,n(g.params,"GetMap"),g.serverType),M=new Image;return null!==g.crossOrigin&&(M.crossOrigin=g.crossOrigin),E(M,O).then(B=>({image:B,extent:F,pixelRatio:K}))}}function s(g,a,I){if(void 0===g.url)return;const p=(0,b.U2)(g.projection||"EPSG:3857"),E=(0,S.p8)(a,I,0,m),F={QUERY_LAYERS:g.params.LAYERS,INFO_FORMAT:"application/json"};Object.assign(F,n(g.params,"GetFeatureInfo"),g.params);const w=(0,U.GW)((a[0]-E[0])/I,V.L),K=(0,U.GW)((E[3]-a[1])/I,V.L),O=(0,J.n)(F.VERSION,"1.3")>=0;return F[O?"I":"X"]=w,F[O?"J":"Y"]=K,d(g.url,E,m,p,F)}function f(g,a){if(void 0===g.url)return;const I={SERVICE:"WMS",VERSION:y,REQUEST:"GetLegendGraphic",FORMAT:"image/png"};if(void 0===g.params||void 0===g.params.LAYER){const p=g.params.LAYERS;if(Array.isArray(p)&&1!==p.length)return;I.LAYER=p}if(void 0!==a){const p=(0,b.U2)(g.projection||"EPSG:3857").getMetersPerUnit()||1;I.SCALE=a*p/28e-5}return Object.assign(I,g.params),(0,k.B)(g.url,I)}},5589:(jt,ut,o)=>{"use strict";function V(J,$,U){const S=void 0!==U?J.toFixed(U):""+J;let b=S.indexOf(".");return b=-1===b?S.length:b,b>$?S:new Array(1+$-b).join("0")+S}function k(J,$){const U=(""+J).split("."),S=(""+$).split(".");for(let b=0;b<Math.max(U.length,S.length);b++){const T=parseInt(U[b]||"0",10),y=parseInt(S[b]||"0",10);if(T>y)return 1;if(y>T)return-1}return 0}o.d(ut,{n:()=>k,v:()=>V})},5366:(jt,ut,o)=>{"use strict";o.d(ut,{Z:()=>J});var V=o(6803);class k extends V.Z{constructor(U){super({points:1/0,fill:(U=U||{radius:5}).fill,radius:U.radius,stroke:U.stroke,scale:void 0!==U.scale?U.scale:1,rotation:void 0!==U.rotation?U.rotation:0,rotateWithView:void 0!==U.rotateWithView&&U.rotateWithView,displacement:void 0!==U.displacement?U.displacement:[0,0],declutterMode:U.declutterMode})}clone(){const U=this.getScale(),S=new k({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),scale:Array.isArray(U)?U.slice():U,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return S.setOpacity(this.getOpacity()),S}setRadius(U){this.radius_=U,this.render()}}const J=k},2334:(jt,ut,o)=>{"use strict";o.d(ut,{Z:()=>$});var V=o(6343),k=o(9823);class J{constructor(S){S=S||{},this.patternImage_=null,this.color_=null,void 0!==S.color&&this.setColor(S.color)}clone(){const S=this.getColor();return new J({color:Array.isArray(S)?S.slice():S||void 0})}getColor(){return this.color_}setColor(S){if(null!==S&&"object"==typeof S&&"src"in S){const b=(0,k.U)(null,S.src,"anonymous",void 0,S.offset?null:S.color?S.color:null,!(S.offset&&S.size));b.ready().then(()=>{this.patternImage_=null}),b.getImageState()===V.Z.IDLE&&b.load(),b.getImageState()===V.Z.LOADING&&(this.patternImage_=b)}this.color_=S}loading(){return!!this.patternImage_}ready(){return this.patternImage_?this.patternImage_.ready():Promise.resolve()}}const $=J},9269:(jt,ut,o)=>{"use strict";o.d(ut,{Z:()=>m});var V=o(4855),k=o(6343),J=o(4430),$=o(9432),U=o(9418),S=o(9823),b=o(1293);function T(d,l,n,h){return void 0!==n&&void 0!==h?[n/d,h/l]:void 0!==n?n/d:void 0!==h?h/l:1}class y extends J.Z{constructor(l){super({opacity:void 0!==(l=l||{}).opacity?l.opacity:1,rotation:void 0!==l.rotation?l.rotation:0,scale:void 0!==l.scale?l.scale:1,displacement:void 0!==l.displacement?l.displacement:[0,0],rotateWithView:void 0!==l.rotateWithView&&l.rotateWithView,declutterMode:l.declutterMode}),this.anchor_=void 0!==l.anchor?l.anchor:[.5,.5],this.normalizedAnchor_=null,this.anchorOrigin_=void 0!==l.anchorOrigin?l.anchorOrigin:"top-left",this.anchorXUnits_=void 0!==l.anchorXUnits?l.anchorXUnits:"fraction",this.anchorYUnits_=void 0!==l.anchorYUnits?l.anchorYUnits:"fraction",this.crossOrigin_=void 0!==l.crossOrigin?l.crossOrigin:null;const g=void 0!==l.img?l.img:null;let I,a=l.src;if((0,U.h)(!(void 0!==a&&g),"`image` and `src` cannot be provided at the same time"),(void 0===a||0===a.length)&&g&&(a=g.src||(0,b.sq)(g)),(0,U.h)(void 0!==a&&a.length>0,"A defined and non-empty `src` or `image` must be provided"),(0,U.h)(!((void 0!==l.width||void 0!==l.height)&&void 0!==l.scale),"`width` or `height` cannot be provided together with `scale`"),void 0!==l.src?I=k.Z.IDLE:void 0!==g&&(I="complete"in g?g.complete?g.src?k.Z.LOADED:k.Z.IDLE:k.Z.LOADING:k.Z.LOADED),this.color_=void 0!==l.color?(0,$._2)(l.color):null,this.iconImage_=(0,S.U)(g,a,this.crossOrigin_,I,this.color_),this.offset_=void 0!==l.offset?l.offset:[0,0],this.offsetOrigin_=void 0!==l.offsetOrigin?l.offsetOrigin:"top-left",this.origin_=null,this.size_=void 0!==l.size?l.size:null,void 0!==l.width||void 0!==l.height){let p,E;if(l.size)[p,E]=l.size;else{const F=this.getImage(1);if(F.width&&F.height)p=F.width,E=F.height;else if(F instanceof HTMLImageElement){this.initialOptions_=l;const w=()=>{if(this.unlistenImageChange(w),!this.initialOptions_)return;const K=this.iconImage_.getSize();this.setScale(T(K[0],K[1],l.width,l.height))};return void this.listenImageChange(w)}}void 0!==p&&this.setScale(T(p,E,l.width,l.height))}}clone(){let l,n,h;return this.initialOptions_?(n=this.initialOptions_.width,h=this.initialOptions_.height):(l=this.getScale(),l=Array.isArray(l)?l.slice():l),new y({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,crossOrigin:this.crossOrigin_,offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,opacity:this.getOpacity(),rotateWithView:this.getRotateWithView(),rotation:this.getRotation(),scale:l,width:n,height:h,size:null!==this.size_?this.size_.slice():void 0,src:this.getSrc(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getAnchor(){let l=this.normalizedAnchor_;if(!l){l=this.anchor_;const s=this.getSize();if("fraction"==this.anchorXUnits_||"fraction"==this.anchorYUnits_){if(!s)return null;l=this.anchor_.slice(),"fraction"==this.anchorXUnits_&&(l[0]*=s[0]),"fraction"==this.anchorYUnits_&&(l[1]*=s[1])}if("top-left"!=this.anchorOrigin_){if(!s)return null;l===this.anchor_&&(l=this.anchor_.slice()),("top-right"==this.anchorOrigin_||"bottom-right"==this.anchorOrigin_)&&(l[0]=-l[0]+s[0]),("bottom-left"==this.anchorOrigin_||"bottom-right"==this.anchorOrigin_)&&(l[1]=-l[1]+s[1])}this.normalizedAnchor_=l}const n=this.getDisplacement(),h=this.getScaleArray();return[l[0]-n[0]/h[0],l[1]+n[1]/h[1]]}setAnchor(l){this.anchor_=l,this.normalizedAnchor_=null}getColor(){return this.color_}getImage(l){return this.iconImage_.getImage(l)}getPixelRatio(l){return this.iconImage_.getPixelRatio(l)}getImageSize(){return this.iconImage_.getSize()}getImageState(){return this.iconImage_.getImageState()}getHitDetectionImage(){return this.iconImage_.getHitDetectionImage()}getOrigin(){if(this.origin_)return this.origin_;let l=this.offset_;if("top-left"!=this.offsetOrigin_){const n=this.getSize(),h=this.iconImage_.getSize();if(!n||!h)return null;l=l.slice(),("top-right"==this.offsetOrigin_||"bottom-right"==this.offsetOrigin_)&&(l[0]=h[0]-n[0]-l[0]),("bottom-left"==this.offsetOrigin_||"bottom-right"==this.offsetOrigin_)&&(l[1]=h[1]-n[1]-l[1])}return this.origin_=l,this.origin_}getSrc(){return this.iconImage_.getSrc()}getSize(){return this.size_?this.size_:this.iconImage_.getSize()}getWidth(){const l=this.getScaleArray();return this.size_?this.size_[0]*l[0]:this.iconImage_.getImageState()==k.Z.LOADED?this.iconImage_.getSize()[0]*l[0]:void 0}getHeight(){const l=this.getScaleArray();return this.size_?this.size_[1]*l[1]:this.iconImage_.getImageState()==k.Z.LOADED?this.iconImage_.getSize()[1]*l[1]:void 0}setScale(l){delete this.initialOptions_,super.setScale(l)}listenImageChange(l){this.iconImage_.addEventListener(V.Z.CHANGE,l)}load(){this.iconImage_.load()}unlistenImageChange(l){this.iconImage_.removeEventListener(V.Z.CHANGE,l)}ready(){return this.iconImage_.ready()}}const m=y},9823:(jt,ut,o)=>{"use strict";o.d(ut,{U:()=>m});var V=o(1877),k=o(4855),J=o(6343),$=o(9432),U=o(4591),S=o(1830),b=o(4410);let T=null;class y extends V.Z{constructor(n,h,s,f,g){super(),this.hitDetectionImage_=null,this.image_=n,this.crossOrigin_=s,this.canvas_={},this.color_=g,this.imageState_=void 0===f?J.Z.IDLE:f,this.size_=n&&n.width&&n.height?[n.width,n.height]:null,this.src_=h,this.ready_=null}initializeImage_(){this.image_=new Image,null!==this.crossOrigin_&&(this.image_.crossOrigin=this.crossOrigin_)}isTainted_(){if(void 0===this.tainted_&&this.imageState_===J.Z.LOADED){T||(T=(0,U.E4)(1,1,void 0,{willReadFrequently:!0})),T.drawImage(this.image_,0,0);try{T.getImageData(0,0,1,1),this.tainted_=!1}catch{T=null,this.tainted_=!0}}return!0===this.tainted_}dispatchChangeEvent_(){this.dispatchEvent(k.Z.CHANGE)}handleImageError_(){this.imageState_=J.Z.ERROR,this.dispatchChangeEvent_()}handleImageLoad_(){this.imageState_=J.Z.LOADED,this.size_=[this.image_.width,this.image_.height],this.dispatchChangeEvent_()}getImage(n){return this.image_||this.initializeImage_(),this.replaceColor_(n),this.canvas_[n]?this.canvas_[n]:this.image_}getPixelRatio(n){return this.replaceColor_(n),this.canvas_[n]?n:1}getImageState(){return this.imageState_}getHitDetectionImage(){if(this.image_||this.initializeImage_(),!this.hitDetectionImage_)if(this.isTainted_()){const n=this.size_[0],h=this.size_[1],s=(0,U.E4)(n,h);s.fillRect(0,0,n,h),this.hitDetectionImage_=s.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_}getSize(){return this.size_}getSrc(){return this.src_}load(){if(this.imageState_===J.Z.IDLE){this.image_||this.initializeImage_(),this.imageState_=J.Z.LOADING;try{void 0!==this.src_&&(this.image_.src=this.src_)}catch{this.handleImageError_()}this.image_ instanceof HTMLImageElement&&(0,S.Q9)(this.image_,this.src_).then(n=>{this.image_=n,this.handleImageLoad_()}).catch(this.handleImageError_.bind(this))}}replaceColor_(n){if(!this.color_||this.canvas_[n]||this.imageState_!==J.Z.LOADED)return;const h=this.image_,s=document.createElement("canvas");s.width=Math.ceil(h.width*n),s.height=Math.ceil(h.height*n);const f=s.getContext("2d");f.scale(n,n),f.drawImage(h,0,0),f.globalCompositeOperation="multiply",f.fillStyle=(0,$.XC)(this.color_),f.fillRect(0,0,s.width/n,s.height/n),f.globalCompositeOperation="destination-in",f.drawImage(h,0,0),this.canvas_[n]=s}ready(){return this.ready_||(this.ready_=new Promise(n=>{this.imageState_===J.Z.LOADED||this.imageState_===J.Z.ERROR?n():this.addEventListener(k.Z.CHANGE,function h(){(this.imageState_===J.Z.LOADED||this.imageState_===J.Z.ERROR)&&(this.removeEventListener(k.Z.CHANGE,h),n())})})),this.ready_}}function m(l,n,h,s,f,g){let a=void 0===n?void 0:b.c1.get(n,h,f);return a||(a=new y(l,l&&"src"in l?l.src||void 0:n,h,s,f),b.c1.set(n,h,f,a,g)),g&&a&&!b.c1.getPattern(n,h,f)&&b.c1.set(n,h,f,a,g),a}},4410:(jt,ut,o)=>{"use strict";o.d(ut,{c1:()=>b});var V=o(6343),k=o(9432),J=o(4591);function U(T,y,m){return y+":"+T+":"+(m?(0,k._2)(m):"null")}const b=new class ${constructor(){this.cache_={},this.patternCache_={},this.cacheSize_=0,this.maxCacheSize_=32}clear(){this.cache_={},this.patternCache_={},this.cacheSize_=0}canExpireCache(){return this.cacheSize_>this.maxCacheSize_}expire(){if(this.canExpireCache()){let y=0;for(const m in this.cache_)!(3&y++)&&!this.cache_[m].hasListener()&&(delete this.cache_[m],delete this.patternCache_[m],--this.cacheSize_)}}get(y,m,d){const l=U(y,m,d);return l in this.cache_?this.cache_[l]:null}getPattern(y,m,d){const l=U(y,m,d);return l in this.patternCache_?this.patternCache_[l]:null}set(y,m,d,l,n){const h=U(y,m,d),s=h in this.cache_;this.cache_[h]=l,n&&(l.getImageState()===V.Z.IDLE&&l.load(),l.getImageState()===V.Z.LOADING?l.ready().then(()=>{this.patternCache_[h]=(0,J.W8)().createPattern(l.getImage(1),"repeat")}):this.patternCache_[h]=(0,J.W8)().createPattern(l.getImage(1),"repeat")),s||++this.cacheSize_}setSize(y){this.maxCacheSize_=y,this.expire()}}},4430:(jt,ut,o)=>{"use strict";o.d(ut,{Z:()=>$});var V=o(1293),k=o(7195);class J{constructor(S){this.opacity_=S.opacity,this.rotateWithView_=S.rotateWithView,this.rotation_=S.rotation,this.scale_=S.scale,this.scaleArray_=(0,k.Pq)(S.scale),this.displacement_=S.displacement,this.declutterMode_=S.declutterMode}clone(){const S=this.getScale();return new J({opacity:this.getOpacity(),scale:Array.isArray(S)?S.slice():S,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getOpacity(){return this.opacity_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getDisplacement(){return this.displacement_}getDeclutterMode(){return this.declutterMode_}getAnchor(){return(0,V.O3)()}getImage(S){return(0,V.O3)()}getHitDetectionImage(){return(0,V.O3)()}getPixelRatio(S){return 1}getImageState(){return(0,V.O3)()}getImageSize(){return(0,V.O3)()}getOrigin(){return(0,V.O3)()}getSize(){return(0,V.O3)()}setDisplacement(S){this.displacement_=S}setOpacity(S){this.opacity_=S}setRotateWithView(S){this.rotateWithView_=S}setRotation(S){this.rotation_=S}setScale(S){this.scale_=S,this.scaleArray_=(0,k.Pq)(S)}listenImageChange(S){(0,V.O3)()}load(){(0,V.O3)()}unlistenImageChange(S){(0,V.O3)()}ready(){return Promise.resolve()}}const $=J},6803:(jt,ut,o)=>{"use strict";o.d(ut,{Z:()=>T});var V=o(6343),k=o(4430),J=o(9432),$=o(9490),U=o(4591),S=o(1463);class b extends k.Z{constructor(m){super({opacity:1,rotateWithView:void 0!==m.rotateWithView&&m.rotateWithView,rotation:void 0!==m.rotation?m.rotation:0,scale:void 0!==m.scale?m.scale:1,displacement:void 0!==m.displacement?m.displacement:[0,0],declutterMode:m.declutterMode}),this.hitDetectionCanvas_=null,this.fill_=void 0!==m.fill?m.fill:null,this.origin_=[0,0],this.points_=m.points,this.radius_=m.radius,this.radius2_=m.radius2,this.angle_=void 0!==m.angle?m.angle:0,this.stroke_=void 0!==m.stroke?m.stroke:null,this.imageState_=this.fill_&&this.fill_.loading()?V.Z.LOADING:V.Z.LOADED,this.imageState_===V.Z.LOADING&&this.ready().then(()=>this.imageState_=V.Z.LOADED),this.render()}clone(){const m=this.getScale(),d=new b({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(m)?m.slice():m,displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return d.setOpacity(this.getOpacity()),d}getAnchor(){const m=this.size_,d=this.getDisplacement(),l=this.getScaleArray();return[m[0]/2-d[0]/l[0],m[1]/2+d[1]/l[1]]}getAngle(){return this.angle_}getFill(){return this.fill_}setFill(m){this.fill_=m,this.render()}getHitDetectionImage(){return this.hitDetectionCanvas_||(this.hitDetectionCanvas_=this.createHitDetectionCanvas_(this.renderOptions_)),this.hitDetectionCanvas_}getImage(m){let d=this.canvases_[m];if(!d){const l=this.renderOptions_,n=(0,U.E4)(l.size*m,l.size*m);this.draw_(l,n,m),d=n.canvas,this.canvases_[m]=d}return d}getPixelRatio(m){return m}getImageSize(){return this.size_}getImageState(){return this.imageState_}getOrigin(){return this.origin_}getPoints(){return this.points_}getRadius(){return this.radius_}getRadius2(){return this.radius2_}getSize(){return this.size_}getStroke(){return this.stroke_}setStroke(m){this.stroke_=m,this.render()}listenImageChange(m){}load(){}unlistenImageChange(m){}calculateLineJoinSize_(m,d,l){if(0===d||this.points_===1/0||"bevel"!==m&&"miter"!==m)return d;let n=this.radius_,h=void 0===this.radius2_?n:this.radius2_;if(n<h){const A=n;n=h,h=A}const f=2*Math.PI/(void 0===this.radius2_?this.points_:2*this.points_),g=h*Math.sin(f),I=n-Math.sqrt(h*h-g*g),p=Math.sqrt(g*g+I*I),E=p/g;if("miter"===m&&E<=l)return E*d;const F=d/2/E,w=d/2*(I/p),O=Math.sqrt((n+F)*(n+F)+w*w)-n;if(void 0===this.radius2_||"bevel"===m)return 2*O;const M=n*Math.sin(f),Y=h-Math.sqrt(n*n-M*M),L=Math.sqrt(M*M+Y*Y)/M;return L<=l?2*Math.max(O,L*d/2-h-n):2*O}createRenderOptions(){let s,m=S.mb,d=S.rc,l=0,n=null,h=0,f=0;this.stroke_&&(s=(0,$.y)(this.stroke_.getColor()??S.Tx),f=this.stroke_.getWidth()??S.yC,n=this.stroke_.getLineDash(),h=this.stroke_.getLineDashOffset()??0,d=this.stroke_.getLineJoin()??S.rc,m=this.stroke_.getLineCap()??S.mb,l=this.stroke_.getMiterLimit()??S.V4);const g=this.calculateLineJoinSize_(d,f,l),a=Math.max(this.radius_,this.radius2_||0);return{strokeStyle:s,strokeWidth:f,size:Math.ceil(2*a+g),lineCap:m,lineDash:n,lineDashOffset:h,lineJoin:d,miterLimit:l}}render(){this.renderOptions_=this.createRenderOptions();const m=this.renderOptions_.size;this.canvases_={},this.hitDetectionCanvas_=null,this.size_=[m,m]}draw_(m,d,l){if(d.scale(l,l),d.translate(m.size/2,m.size/2),this.createPath_(d),this.fill_){let n=this.fill_.getColor();null===n&&(n=S.bL),d.fillStyle=(0,$.y)(n),d.fill()}m.strokeStyle&&(d.strokeStyle=m.strokeStyle,d.lineWidth=m.strokeWidth,m.lineDash&&(d.setLineDash(m.lineDash),d.lineDashOffset=m.lineDashOffset),d.lineCap=m.lineCap,d.lineJoin=m.lineJoin,d.miterLimit=m.miterLimit,d.stroke())}createHitDetectionCanvas_(m){let d;if(this.fill_){let l=this.fill_.getColor(),n=0;"string"==typeof l&&(l=(0,J._2)(l)),null===l?n=1:Array.isArray(l)&&(n=4===l.length?l[3]:1),0===n&&(d=(0,U.E4)(m.size,m.size),this.drawHitDetectionCanvas_(m,d))}return d?d.canvas:this.getImage(1)}createPath_(m){let d=this.points_;const l=this.radius_;if(d===1/0)m.arc(0,0,l,0,2*Math.PI);else{const n=void 0===this.radius2_?l:this.radius2_;void 0!==this.radius2_&&(d*=2);const h=this.angle_-Math.PI/2,s=2*Math.PI/d;for(let f=0;f<d;f++){const g=h+f*s,a=f%2==0?l:n;m.lineTo(a*Math.cos(g),a*Math.sin(g))}m.closePath()}}drawHitDetectionCanvas_(m,d){d.translate(m.size/2,m.size/2),this.createPath_(d),d.fillStyle=S.bL,d.fill(),m.strokeStyle&&(d.strokeStyle=m.strokeStyle,d.lineWidth=m.strokeWidth,m.lineDash&&(d.setLineDash(m.lineDash),d.lineDashOffset=m.lineDashOffset),d.lineJoin=m.lineJoin,d.miterLimit=m.miterLimit,d.stroke())}ready(){return this.fill_?this.fill_.ready():Promise.resolve()}}const T=b},5784:(jt,ut,o)=>{"use strict";o.d(ut,{Z:()=>k});class V{constructor($){this.color_=void 0!==($=$||{}).color?$.color:null,this.lineCap_=$.lineCap,this.lineDash_=void 0!==$.lineDash?$.lineDash:null,this.lineDashOffset_=$.lineDashOffset,this.lineJoin_=$.lineJoin,this.miterLimit_=$.miterLimit,this.width_=$.width}clone(){const $=this.getColor();return new V({color:Array.isArray($)?$.slice():$||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})}getColor(){return this.color_}getLineCap(){return this.lineCap_}getLineDash(){return this.lineDash_}getLineDashOffset(){return this.lineDashOffset_}getLineJoin(){return this.lineJoin_}getMiterLimit(){return this.miterLimit_}getWidth(){return this.width_}setColor($){this.color_=$}setLineCap($){this.lineCap_=$}setLineDash($){this.lineDash_=$}setLineDashOffset($){this.lineDashOffset_=$}setLineJoin($){this.lineJoin_=$}setMiterLimit($){this.miterLimit_=$}setWidth($){this.width_=$}}const k=V},9032:(jt,ut,o)=>{"use strict";o.d(ut,{J$:()=>S,ZP:()=>d,yF:()=>T});var V=o(5366),k=o(2334),J=o(5784),$=o(9418);class U{constructor(n){n=n||{},this.geometry_=null,this.geometryFunction_=m,void 0!==n.geometry&&this.setGeometry(n.geometry),this.fill_=void 0!==n.fill?n.fill:null,this.image_=void 0!==n.image?n.image:null,this.renderer_=void 0!==n.renderer?n.renderer:null,this.hitDetectionRenderer_=void 0!==n.hitDetectionRenderer?n.hitDetectionRenderer:null,this.stroke_=void 0!==n.stroke?n.stroke:null,this.text_=void 0!==n.text?n.text:null,this.zIndex_=n.zIndex}clone(){let n=this.getGeometry();return n&&"object"==typeof n&&(n=n.clone()),new U({geometry:n??void 0,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,renderer:this.getRenderer()??void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})}getRenderer(){return this.renderer_}setRenderer(n){this.renderer_=n}setHitDetectionRenderer(n){this.hitDetectionRenderer_=n}getHitDetectionRenderer(){return this.hitDetectionRenderer_}getGeometry(){return this.geometry_}getGeometryFunction(){return this.geometryFunction_}getFill(){return this.fill_}setFill(n){this.fill_=n}getImage(){return this.image_}setImage(n){this.image_=n}getStroke(){return this.stroke_}setStroke(n){this.stroke_=n}getText(){return this.text_}setText(n){this.text_=n}getZIndex(){return this.zIndex_}setGeometry(n){"function"==typeof n?this.geometryFunction_=n:"string"==typeof n?this.geometryFunction_=function(h){return h.get(n)}:n?void 0!==n&&(this.geometryFunction_=function(){return n}):this.geometryFunction_=m,this.geometry_=n}setZIndex(n){this.zIndex_=n}}function S(l){let n;if("function"==typeof l)n=l;else{let h;Array.isArray(l)?h=l:((0,$.h)("function"==typeof l.getZIndex,"Expected an `Style` or an array of `Style`"),h=[l]),n=function(){return h}}return n}let b=null;function T(l,n){if(!b){const h=new k.Z({color:"rgba(255,255,255,0.4)"}),s=new J.Z({color:"#3399CC",width:1.25});b=[new U({image:new V.Z({fill:h,stroke:s,radius:5}),fill:h,stroke:s})]}return b}function m(l){return l.getGeometry()}const d=U},5739:(jt,ut,o)=>{"use strict";o.d(ut,{Z:()=>U});var V=o(2334),k=o(7195);class ${constructor(b){this.font_=(b=b||{}).font,this.rotation_=b.rotation,this.rotateWithView_=b.rotateWithView,this.scale_=b.scale,this.scaleArray_=(0,k.Pq)(void 0!==b.scale?b.scale:1),this.text_=b.text,this.textAlign_=b.textAlign,this.justify_=b.justify,this.repeat_=b.repeat,this.textBaseline_=b.textBaseline,this.fill_=void 0!==b.fill?b.fill:new V.Z({color:"#333"}),this.maxAngle_=void 0!==b.maxAngle?b.maxAngle:Math.PI/4,this.placement_=void 0!==b.placement?b.placement:"point",this.overflow_=!!b.overflow,this.stroke_=void 0!==b.stroke?b.stroke:null,this.offsetX_=void 0!==b.offsetX?b.offsetX:0,this.offsetY_=void 0!==b.offsetY?b.offsetY:0,this.backgroundFill_=b.backgroundFill?b.backgroundFill:null,this.backgroundStroke_=b.backgroundStroke?b.backgroundStroke:null,this.padding_=void 0===b.padding?null:b.padding,this.declutterMode_=b.declutterMode}clone(){const b=this.getScale();return new $({font:this.getFont(),placement:this.getPlacement(),repeat:this.getRepeat(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(b)?b.slice():b,text:this.getText(),textAlign:this.getTextAlign(),justify:this.getJustify(),textBaseline:this.getTextBaseline(),fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():void 0,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0,padding:this.getPadding()||void 0,declutterMode:this.getDeclutterMode()})}getOverflow(){return this.overflow_}getFont(){return this.font_}getMaxAngle(){return this.maxAngle_}getPlacement(){return this.placement_}getRepeat(){return this.repeat_}getOffsetX(){return this.offsetX_}getOffsetY(){return this.offsetY_}getFill(){return this.fill_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getStroke(){return this.stroke_}getText(){return this.text_}getTextAlign(){return this.textAlign_}getJustify(){return this.justify_}getTextBaseline(){return this.textBaseline_}getBackgroundFill(){return this.backgroundFill_}getBackgroundStroke(){return this.backgroundStroke_}getPadding(){return this.padding_}getDeclutterMode(){return this.declutterMode_}setOverflow(b){this.overflow_=b}setFont(b){this.font_=b}setMaxAngle(b){this.maxAngle_=b}setOffsetX(b){this.offsetX_=b}setOffsetY(b){this.offsetY_=b}setPlacement(b){this.placement_=b}setRepeat(b){this.repeat_=b}setRotateWithView(b){this.rotateWithView_=b}setFill(b){this.fill_=b}setRotation(b){this.rotation_=b}setScale(b){this.scale_=b,this.scaleArray_=(0,k.Pq)(void 0!==b?b:1)}setStroke(b){this.stroke_=b}setText(b){this.text_=b}setTextAlign(b){this.textAlign_=b}setJustify(b){this.justify_=b}setTextBaseline(b){this.textBaseline_=b}setBackgroundFill(b){this.backgroundFill_=b}setBackgroundStroke(b){this.backgroundStroke_=b}setPadding(b){this.padding_=b}}const U=$},4092:(jt,ut,o)=>{"use strict";function V(T,y,m,d){return void 0!==d?(d[0]=T,d[1]=y,d[2]=m,d):[T,y,m]}function k(T,y,m){return T+"/"+y+"/"+m}function J(T){return k(T[0],T[1],T[2])}function $(T){const[y,m,d]=T.substring(T.lastIndexOf("/")+1,T.length).split(",").map(Number);return k(y,m,d)}function U(T){return T.split("/").map(Number)}function S(T){return(T[1]<<T[0])+T[2]}function b(T,y){const m=T[0],d=T[1],l=T[2];if(y.getMinZoom()>m||m>y.getMaxZoom())return!1;const n=y.getFullTileRange(m);return!n||n.containsXY(d,l)}o.d(ut,{MY:()=>$,T9:()=>V,Ul:()=>U,km:()=>J,lg:()=>k,tE:()=>b,vp:()=>S})},6971:(jt,ut,o)=>{"use strict";o.d(ut,{Cf:()=>b,Tl:()=>l,X$:()=>S,dl:()=>y});var V=o(4876),k=o(1821),J=o(7704),$=o(77),U=o(7195);function S(n){let h=n.getDefaultTileGrid();return h||(h=function d(n,h,s,f){return function T(n,h,s,f){f=void 0!==f?f:"top-left";const g=m(n,h,s);return new V.Z({extent:n,origin:(0,$.g0)(n,f),resolutions:g,tileSize:s})}(l(n),h,s,f)}(n),n.setDefaultTileGrid(h)),h}function b(n,h,s){const f=h[0],g=n.getTileCoordCenter(h),a=l(s);if(!(0,$.b8)(a,g)){const I=(0,$.dz)(a),p=Math.ceil((a[0]-g[0])/I);return g[0]+=I*p,n.getTileCoordForCoordAndZ(g,f)}return h}function y(n){const h=n||{},s=h.extent||(0,J.U2)("EPSG:3857").getExtent(),f={extent:s,minZoom:h.minZoom,tileSize:h.tileSize,resolutions:m(s,h.maxZoom,h.tileSize,h.maxResolution)};return new V.Z(f)}function m(n,h,s,f){h=void 0!==h?h:k.e,s=(0,U.Pq)(void 0!==s?s:k.S);const g=(0,$.Cr)(n),a=(0,$.dz)(n);f=f>0?f:Math.max(a/s[0],g/s[1]);const I=h+1,p=new Array(I);for(let E=0;E<I;++E)p[E]=f/Math.pow(2,E);return p}function l(n){let h=(n=(0,J.U2)(n)).getExtent();if(!h){const s=180*J.Wm.degrees/n.getMetersPerUnit();h=(0,$.T9)(-s,-s,s,s)}return h}},4876:(jt,ut,o)=>{"use strict";o.d(ut,{Z:()=>n});var V=o(8702),k=o(1821),J=o(9418),$=o(6868),U=o(77),S=o(4092),b=o(8599),T=o(5959),y=o(7195);const m=[0,0,0],n=class l{constructor(s){let f;if(this.minZoom=void 0!==s.minZoom?s.minZoom:0,this.resolutions_=s.resolutions,(0,J.h)((0,T.pT)(this.resolutions_,(a,I)=>I-a,!0),"`resolutions` must be sorted in descending order"),!s.origins)for(let a=0,I=this.resolutions_.length-1;a<I;++a)if(f){if(this.resolutions_[a]/this.resolutions_[a+1]!==f){f=void 0;break}}else f=this.resolutions_[a]/this.resolutions_[a+1];this.zoomFactor_=f,this.maxZoom=this.resolutions_.length-1,this.origin_=void 0!==s.origin?s.origin:null,this.origins_=null,void 0!==s.origins&&(this.origins_=s.origins,(0,J.h)(this.origins_.length==this.resolutions_.length,"Number of `origins` and `resolutions` must be equal"));const g=s.extent;void 0!==g&&!this.origin_&&!this.origins_&&(this.origin_=(0,U.rL)(g)),(0,J.h)(!this.origin_&&this.origins_||this.origin_&&!this.origins_,"Either `origin` or `origins` must be configured, never both"),this.tileSizes_=null,void 0!==s.tileSizes&&(this.tileSizes_=s.tileSizes,(0,J.h)(this.tileSizes_.length==this.resolutions_.length,"Number of `tileSizes` and `resolutions` must be equal")),this.tileSize_=void 0!==s.tileSize?s.tileSize:this.tileSizes_?null:k.S,(0,J.h)(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,"Either `tileSize` or `tileSizes` must be configured, never both"),this.extent_=void 0!==g?g:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],this.tmpExtent_=[0,0,0,0],void 0!==s.sizes?this.fullTileRanges_=s.sizes.map((a,I)=>{const p=new V.Z(Math.min(0,a[0]),Math.max(a[0]-1,-1),Math.min(0,a[1]),Math.max(a[1]-1,-1));if(g){const E=this.getTileRangeForExtentAndZ(g,I);p.minX=Math.max(E.minX,p.minX),p.maxX=Math.min(E.maxX,p.maxX),p.minY=Math.max(E.minY,p.minY),p.maxY=Math.min(E.maxY,p.maxY)}return p}):g&&this.calculateTileRanges_(g)}forEachTileCoord(s,f,g){const a=this.getTileRangeForExtentAndZ(s,f);for(let I=a.minX,p=a.maxX;I<=p;++I)for(let E=a.minY,F=a.maxY;E<=F;++E)g([f,I,E])}forEachTileCoordParentTileRange(s,f,g,a){let I,p,E,F=null,w=s[0]-1;for(2===this.zoomFactor_?(p=s[1],E=s[2]):F=this.getTileCoordExtent(s,a);w>=this.minZoom;){if(void 0!==p&&void 0!==E?(p=Math.floor(p/2),E=Math.floor(E/2),I=(0,V.T)(p,p,E,E,g)):I=this.getTileRangeForExtentAndZ(F,w,g),f(w,I))return!0;--w}return!1}getExtent(){return this.extent_}getMaxZoom(){return this.maxZoom}getMinZoom(){return this.minZoom}getOrigin(s){return this.origin_?this.origin_:this.origins_[s]}getResolution(s){return this.resolutions_[s]}getResolutions(){return this.resolutions_}getTileCoordChildTileRange(s,f,g){if(s[0]<this.maxZoom){if(2===this.zoomFactor_){const I=2*s[1],p=2*s[2];return(0,V.T)(I,I+1,p,p+1,f)}const a=this.getTileCoordExtent(s,g||this.tmpExtent_);return this.getTileRangeForExtentAndZ(a,s[0]+1,f)}return null}getTileRangeForTileCoordAndZ(s,f,g){if(f>this.maxZoom||f<this.minZoom)return null;const a=s[0],I=s[1],p=s[2];if(f===a)return(0,V.T)(I,p,I,p,g);if(this.zoomFactor_){const F=Math.pow(this.zoomFactor_,f-a),w=Math.floor(I*F),K=Math.floor(p*F);if(f<a)return(0,V.T)(w,w,K,K,g);const O=Math.floor(F*(I+1))-1,M=Math.floor(F*(p+1))-1;return(0,V.T)(w,O,K,M,g)}const E=this.getTileCoordExtent(s,this.tmpExtent_);return this.getTileRangeForExtentAndZ(E,f,g)}getTileRangeForExtentAndZ(s,f,g){this.getTileCoordForXYAndZ_(s[0],s[3],f,!1,m);const a=m[1],I=m[2];return this.getTileCoordForXYAndZ_(s[2],s[1],f,!0,m),(0,V.T)(a,m[1],I,m[2],g)}getTileCoordCenter(s){const f=this.getOrigin(s[0]),g=this.getResolution(s[0]),a=(0,y.Pq)(this.getTileSize(s[0]),this.tmpSize_);return[f[0]+(s[1]+.5)*a[0]*g,f[1]-(s[2]+.5)*a[1]*g]}getTileCoordExtent(s,f){const g=this.getOrigin(s[0]),a=this.getResolution(s[0]),I=(0,y.Pq)(this.getTileSize(s[0]),this.tmpSize_),p=g[0]+s[1]*I[0]*a,E=g[1]-(s[2]+1)*I[1]*a;return(0,U.T9)(p,E,p+I[0]*a,E+I[1]*a,f)}getTileCoordForCoordAndResolution(s,f,g){return this.getTileCoordForXYAndResolution_(s[0],s[1],f,!1,g)}getTileCoordForXYAndResolution_(s,f,g,a,I){const p=this.getZForResolution(g),E=g/this.getResolution(p),F=this.getOrigin(p),w=(0,y.Pq)(this.getTileSize(p),this.tmpSize_);let K=E*(s-F[0])/g/w[0],O=E*(F[1]-f)/g/w[1];return a?(K=(0,$.mD)(K,5)-1,O=(0,$.mD)(O,5)-1):(K=(0,$.GW)(K,5),O=(0,$.GW)(O,5)),(0,S.T9)(p,K,O,I)}getTileCoordForXYAndZ_(s,f,g,a,I){const p=this.getOrigin(g),E=this.getResolution(g),F=(0,y.Pq)(this.getTileSize(g),this.tmpSize_);let w=(s-p[0])/E/F[0],K=(p[1]-f)/E/F[1];return a?(w=(0,$.mD)(w,5)-1,K=(0,$.mD)(K,5)-1):(w=(0,$.GW)(w,5),K=(0,$.GW)(K,5)),(0,S.T9)(g,w,K,I)}getTileCoordForCoordAndZ(s,f,g){return this.getTileCoordForXYAndZ_(s[0],s[1],f,!1,g)}getTileCoordResolution(s){return this.resolutions_[s[0]]}getTileSize(s){return this.tileSize_?this.tileSize_:this.tileSizes_[s]}getFullTileRange(s){return this.fullTileRanges_?this.fullTileRanges_[s]:this.extent_?this.getTileRangeForExtentAndZ(this.extent_,s):null}getZForResolution(s,f){const g=(0,T.h7)(this.resolutions_,s,f||0);return(0,$.uZ)(g,this.minZoom,this.maxZoom)}tileCoordIntersectsViewport(s,f){return(0,b.mV)(f,0,f.length,2,this.getTileCoordExtent(s))}calculateTileRanges_(s){const f=this.resolutions_.length,g=new Array(f);for(let a=this.minZoom;a<f;++a)g[a]=this.getTileRangeForExtentAndZ(s,a);this.fullTileRanges_=g}}},1821:(jt,ut,o)=>{"use strict";o.d(ut,{S:()=>k,e:()=>V});const V=42,k=256},3824:(jt,ut,o)=>{"use strict";o.d(ut,{Gk:()=>b,Un:()=>U,uR:()=>$});var V=o(6868),k=o(4092);function J(T,y){const m=/\{z\}/g,d=/\{x\}/g,l=/\{y\}/g,n=/\{-y\}/g;return function(h,s,f){if(h)return T.replace(m,h[0].toString()).replace(d,h[1].toString()).replace(l,h[2].toString()).replace(n,function(){const a=y.getFullTileRange(h[0]);if(!a)throw new Error("The {-y} placeholder requires a tile grid with extent");return(a.getHeight()-h[2]-1).toString()})}}function $(T,y){const m=T.length,d=new Array(m);for(let l=0;l<m;++l)d[l]=J(T[l],y);return U(d)}function U(T){return 1===T.length?T[0]:function(y,m,d){if(!y)return;const l=(0,k.vp)(y),n=(0,V.$W)(l,T.length);return T[n](y,m,d)}}function b(T){const y=[];let m=/\{([a-z])-([a-z])\}/.exec(T);if(m){const d=m[1].charCodeAt(0),l=m[2].charCodeAt(0);let n;for(n=d;n<=l;++n)y.push(T.replace(m[0],String.fromCharCode(n)));return y}if(m=/\{(\d+)-(\d+)\}/.exec(T),m){const d=parseInt(m[2],10);for(let l=parseInt(m[1],10);l<=d;l++)y.push(T.replace(m[0],l.toString()));return y}return y.push(T),y}},4836:(jt,ut,o)=>{"use strict";o.d(ut,{BB:()=>I,Iu:()=>l,Jp:()=>U,Ue:()=>J,bA:()=>m,lk:()=>b,mc:()=>$,nb:()=>f,nn:()=>T,qC:()=>n});var V=o(9418);const k=new Array(6);function J(){return[1,0,0,1,0,0]}function $(p){return S(p,1,0,0,1,0,0)}function U(p,E){const F=p[0],w=p[1],K=p[2],O=p[3],M=p[4],B=p[5],Y=E[0],C=E[1],L=E[2],A=E[3],P=E[4],R=E[5];return p[0]=F*Y+K*C,p[1]=w*Y+O*C,p[2]=F*L+K*A,p[3]=w*L+O*A,p[4]=F*P+K*R+M,p[5]=w*P+O*R+B,p}function S(p,E,F,w,K,O,M){return p[0]=E,p[1]=F,p[2]=w,p[3]=K,p[4]=O,p[5]=M,p}function b(p,E){return p[0]=E[0],p[1]=E[1],p[2]=E[2],p[3]=E[3],p[4]=E[4],p[5]=E[5],p}function T(p,E){const F=E[0],w=E[1];return E[0]=p[0]*F+p[2]*w+p[4],E[1]=p[1]*F+p[3]*w+p[5],E}function m(p,E,F){return U(p,S(k,E,0,0,F,0,0))}function l(p,E,F){return U(p,S(k,1,0,0,1,E,F))}function n(p,E,F,w,K,O,M,B){const Y=Math.sin(O),C=Math.cos(O);return p[0]=w*C,p[1]=K*Y,p[2]=-w*Y,p[3]=K*C,p[4]=M*w*C-B*w*Y+E,p[5]=M*K*Y+B*K*C+F,p}function f(p,E){const F=function g(p){return p[0]*p[3]-p[1]*p[2]}(E);(0,V.h)(0!==F,"Transformation matrix cannot be inverted");const w=E[0],K=E[1],O=E[2],M=E[3],B=E[4],Y=E[5];return p[0]=M/F,p[1]=-K/F,p[2]=-O/F,p[3]=w/F,p[4]=(O*Y-M*B)/F,p[5]=-(w*Y-K*B)/F,p}const a=[1e6,1e6,1e6,1e6,2,2];function I(p){return"matrix("+p.map((F,w)=>Math.round(F*a[w])/a[w]).join(", ")+")"}},8428:(jt,ut,o)=>{"use strict";function V(k,J){const $=[];Object.keys(J).forEach(function(S){null!=J[S]&&$.push(S+"="+encodeURIComponent(J[S]))});const U=$.join("&");return k=k.replace(/[?&]$/,""),(k+=k.includes("?")?"&":"?")+U}o.d(ut,{B:()=>V})},1293:(jt,ut,o)=>{"use strict";function V(){throw new Error("Unimplemented abstract method.")}o.d(ut,{O3:()=>V,sq:()=>J});let k=0;function J(U){return U.ol_uid||(U.ol_uid=String(++k))}},3229:(jt,ut,o)=>{"use strict";o.d(ut,{A4:()=>h,C5:()=>I,Ei:()=>m,G3:()=>f,Me:()=>C,O:()=>E,Pr:()=>n,Qc:()=>T,RA:()=>a,T3:()=>p,Ve:()=>$,ZL:()=>w,c:()=>J,fJ:()=>k,hg:()=>g,ke:()=>l,pc:()=>y,qk:()=>S,xc:()=>M,z:()=>d});var V=o(5959);const k="http://www.w3.org/2001/XMLSchema-instance";function J(L,A){return C().createElementNS(L,A)}function $(L,A){return U(L,A,[]).join("")}function U(L,A,P){if(L.nodeType==Node.CDATA_SECTION_NODE||L.nodeType==Node.TEXT_NODE)P.push(A?String(L.nodeValue).replace(/(\r\n|\r|\n)/g,""):L.nodeValue);else{let R;for(R=L.firstChild;R;R=R.nextSibling)U(R,A,P)}return P}function S(L){return"documentElement"in L}function T(L){return(new DOMParser).parseFromString(L,"application/xml")}function y(L,A){return function(P,R){const N=L.call(void 0!==A?A:this,P,R);void 0!==N&&(0,V.l7)(R[R.length-1],N)}}function m(L,A){return function(P,R){const N=L.call(void 0!==A?A:this,P,R);void 0!==N&&R[R.length-1].push(N)}}function d(L,A){return function(P,R){const N=L.call(void 0!==A?A:this,P,R);void 0!==N&&(R[R.length-1]=N)}}function l(L,A,P){return function(R,N){const Q=L.call(void 0!==P?P:this,R,N);if(void 0!==Q){const et=N[N.length-1],H=void 0!==A?A:R.localName;let ot;H in et?ot=et[H]:(ot=[],et[H]=ot),ot.push(Q)}}}function n(L,A,P){return function(R,N){const Q=L.call(void 0!==P?P:this,R,N);void 0!==Q&&(N[N.length-1][void 0!==A?A:R.localName]=Q)}}function h(L,A){return function(P,R,N){L.call(void 0!==A?A:this,P,R,N),N[N.length-1].node.appendChild(P)}}function f(L,A){return function(P,R,N){let H=L;return void 0===H&&(H=N),J(void 0!==A?A:R[R.length-1].node.namespaceURI,H)}}const g=f();function a(L,A){const P=A.length,R=new Array(P);for(let N=0;N<P;++N)R[N]=L[A[N]];return R}function I(L,A,P){let R,N;for(P=void 0!==P?P:{},R=0,N=L.length;R<N;++R)P[L[R]]=A;return P}function p(L,A,P,R){let N;for(N=A.firstElementChild;N;N=N.nextElementSibling){const Q=L[N.namespaceURI];if(void 0!==Q){const et=Q[N.localName];void 0!==et&&et.call(R,N,P)}}}function E(L,A,P,R,N){return R.push(L),p(A,P,R,N),R.pop()}function w(L,A,P,R,N,Q,et){return N.push(L),function F(L,A,P,R,N,Q){const et=(void 0!==N?N:P).length;let H,ot;for(let ht=0;ht<et;++ht)H=P[ht],void 0!==H&&(ot=A.call(void 0!==Q?Q:this,H,R,void 0!==N?N[ht]:void 0),void 0!==ot&&L[ot.namespaceURI][ot.localName].call(Q,ot,H,R))}(A,P,R,N,Q,et),N.pop()}let K,B;function M(){return void 0===K&&typeof XMLSerializer<"u"&&(K=new XMLSerializer),K}function C(){return void 0===B&&typeof document<"u"&&(B=document.implementation.createDocument("","",null)),B}}}]);