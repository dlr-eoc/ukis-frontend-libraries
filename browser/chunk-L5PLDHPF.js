import{a as Pe}from"./chunk-GH7CIMZO.js";import{a as N}from"./chunk-FLO4QXS2.js";import{a as ke,c as x}from"./chunk-MUCYVQLL.js";import"./chunk-CVWQF2EP.js";import{a as we,b as _e,d as Ce,e as b,f as Me,g as D,h as V,i as be,j as Le}from"./chunk-P62NUZ5D.js";import{P as xe,Q as Ee,R as Te,S as Ie,eb as L,fb as Oe}from"./chunk-OTRZYAA2.js";import{k as he,l as Se,m as v,o as G,p as w,q as R,s as C,u as M,v as Fe,w as Ge}from"./chunk-RM6VSO6X.js";import{$a as Q,C as h,Dc as ce,E as p,Ec as me,Fc as de,G as S,Ga as Z,Gc as ue,Hc as ye,I as g,Ic as ge,J as P,Kc as ve,M as z,Oa as K,P as c,S as H,T as J,X as i,Y as s,Ya as F,Z as m,ba as u,ca as q,dc as oe,ec as ie,hd as fe,la as l,lc as ae,na as $,ob as X,oc as ne,pc as se,q as k,qc as le,sa as Y,sb as ee,sc as pe,vb as te,xb as re}from"./chunk-G5LJQFAD.js";import"./chunk-FJYW2LMB.js";function Re(o,_,r){let e=o.layer.getSource(),t=o.mapEvent,n=_.map.getView().getResolution(),d=e.getFeatureInfoUrl(t.coordinate,n,_.EPSG,{INFO_FORMAT:"application/json"});fetch(d).then(y=>y.json()).catch(y=>{console.log(y)}).then(y=>{if(y.features.length){let f=_.createPopupHtml(y.features[0].properties);r(f)}else r("<p>No Data!</p>")})}var De={type:"FeatureCollection",poperties:{description:"This are a few test cities and locations collected with geojson.io"},features:[{type:"Feature",properties:{name:"Munich"},geometry:{type:"Point",coordinates:[11.575899124145508,48.137740422322295]}},{type:"Feature",properties:{name:"Landshut"},geometry:{type:"Point",coordinates:[12.152938842773436,48.5370678355958]}},{type:"Feature",properties:{name:"Ulm"},geometry:{type:"Point",coordinates:[9.986572265624998,48.40003249610685]}},{type:"Feature",properties:{name:"Ingolstadt"},geometry:{type:"Point",coordinates:[11.42578125,48.75618876280552]}},{type:"Feature",properties:{name:"Paris"},geometry:{type:"Point",coordinates:[2.3291015625,48.83579746243093]}},{type:"Feature",properties:{name:"Dreux"},geometry:{type:"Point",coordinates:[1.3677978515625,48.73445537176822]}},{type:"Feature",properties:{name:"Meaux"},geometry:{type:"Point",coordinates:[2.8729248046875,48.95497369808868]}},{type:"Feature",properties:{name:"Rome"},geometry:{type:"Point",coordinates:[12.480468749999998,41.86956082699455]}},{type:"Feature",properties:{name:"Anzio"},geometry:{type:"Point",coordinates:[12.6287841796875,41.4509614012039]}},{type:"Feature",properties:{name:"Berlin"},geometry:{type:"Point",coordinates:[13.403320312499998,52.50953477032727]}},{type:"Feature",properties:{name:"Potsdam"},geometry:{type:"Point",coordinates:[13.058624267578125,52.40074312027673]}}]};var B=(()=>{class o{constructor(){}ngOnInit(){}static{this.\u0275fac=function(e){return new(e||o)}}static{this.\u0275cmp=g({type:o,selectors:[["app-example-layer-description"]],inputs:{layer:"layer",description:"description"},decls:9,vars:1,consts:[[1,"custom-description"]],template:function(e,t){e&1&&(i(0,"div",0),l(1),i(2,"p"),l(3," This description was styled with a dynamic component as the layer.description. "),s(),i(4,"p"),l(5," Keep in mind that this breaks @dlr-eoc/services-ogc generateResourceFromLayer() for this layer when exporting a "),i(6,"b"),l(7,"IOwsContext"),s(),l(8,". "),s()()),e&2&&(p(),$(" ",t.description,". "))},styles:[".custom-description[_ngcontent-%COMP%]{word-break:normal;color:#0072a3}.custom-description[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{word-break:normal;color:#ffa52e}"]})}}return o})();var Ve=(()=>{class o{constructor(){this.legendImages=[]}ngOnInit(){this.legendImages=this.group.layers.filter(r=>r.legendImg&&typeof r.legendImg=="string").map(r=>({url:r.legendImg})).reverse()}static{this.\u0275fac=function(e){return new(e||o)}}static{this.\u0275cmp=g({type:o,selectors:[["app-example-group-legend"]],inputs:{group:"group"},decls:6,vars:4,consts:[[1,"wrapper"],["width","256","height","256",1,"stacked",3,"src"],["usemap","#legendmap",3,"src"],["name","legendmap"],["shape","rect","coords","0,0,256,128","alt","top","title","Show full Image overlay","target","_blank",3,"href"],["shape","rect","coords","0,128,256,256","alt","below","title","Show full Image base","target","_blank",3,"href"]],template:function(e,t){e&1&&(i(0,"div",0),m(1,"img",1)(2,"img",2),i(3,"map",3),m(4,"area",4)(5,"area",5),s()()),e&2&&(p(),c("src",t.legendImages[0].url,h),p(),c("src",t.legendImages[1].url,h),p(2),c("href",t.legendImages[0].url,h),p(),c("href",t.legendImages[1].url,h))},styles:[".wrapper[_ngcontent-%COMP%]{position:relative}.wrapper[_ngcontent-%COMP%]   .stacked[_ngcontent-%COMP%]{position:absolute;pointer-events:none}"]})}}return o})();var Ne=(()=>{class o{constructor(){this.fillColor="rgba(196, 203, 205, 1)",this.fillChanged=!1}ngOnInit(){let r=this.layer;if(r){let e=r.options.style,t=e.layers.findIndex(n=>n.id==="water");this.fillChanged=e.layers[t].paint["fill-color"]!==this.fillColor}}switchWater(r){let e=this.layer,t=e.options.style,n=t.layers.findIndex(d=>d.id==="water");this.fillChanged?(t.layers[n].paint["fill-color"]=this.fillColor,this.fillChanged=!1):(t.layers[n].paint["fill-color"]="rgba(0, 0, 0, 1)",this.fillChanged=!0),this.layersSvc.updateLayer(e)}static{this.\u0275fac=function(e){return new(e||o)}}static{this.\u0275cmp=g({type:o,selectors:[["app-vtile-layer-action"]],inputs:{layer:"layer",layersSvc:"layersSvc"},decls:4,vars:2,consts:[["type","checkbox","name","switch_water","clrCheckbox","",3,"change","value","checked"]],template:function(e,t){e&1&&(i(0,"clr-checkbox-wrapper")(1,"label"),l(2," Change Water color "),s(),i(3,"input",0),u("change",function(d){return t.switchWater(d)}),s()()),e&2&&(p(3),c("value",t.fillChanged)("checked",t.fillChanged))},dependencies:[pe,ae,le,se,ne],encapsulation:2})}}return o})();function He(o,_){if(o&1&&m(0,"ukis-map-ol",1),o&2){let r=q();c("layersSvc",r.layersSvc)("mapState",r.mapStateSvc)("controls",r.controls)}}K.addIcons(re,ee,Q,te,X);var A=(()=>{class o{constructor(r,e,t,n){this.layersSvc=r,this.mapStateSvc=e,this.mapSvc=t,this.wmsSvc=n,this.class="content-container",this.showMap=!0,this.controls={attribution:!0,scaleLine:!0}}ngOnInit(){this.mapSvc.map.addControl(new ke),this.addBaseLayers(),this.addLayers(),this.addOverlays(),this.setExtent()}setExtent(){this.mapStateSvc.setExtent([-14,33,40,57])}setRotation(){this.mapStateSvc.setRotation(90)}resetRotation(){this.mapStateSvc.setRotation(0)}parseCapabilities(){this.wmsSvc.getCapabilities("https://geoservice.dlr.de/eoc/basemap/wms").subscribe(r=>{let e=this.wmsSvc.getLayerFromCapabilities("basemap",r);console.log(e)})}addBaseLayers(){let r=new v({name:"Transparenter Hintergrund",id:"blank",type:"geojson"}),e=new Ce({tileSize:512}),t=new D,n=new G({id:"eocLiteAndOverlay",name:"EOC Lite with Overlay",description:"merged/stacked Layers EOC Lite with Overlay",legendImg:e.legendImg,layers:[e,t],visible:!0}),d=new R({type:"wmts",url:"https://tiles.geoservice.dlr.de/service/wmts",name:"Relief",id:"world_relief_bw",params:{layer:"eoc:world_relief_bw",style:"_empty",matrixSetOptions:{matrixSet:"EPSG:3857",tileMatrixPrefix:"EPSG:3857"}},visible:!1,description:{component:B,inputs:{description:"eoc:world_relief_bw as web map tile service"}},attribution:'Relief: <a src="https://www.dlr.de/eoc">DLR/EOC</>',legendImg:""}),y=new we({id:"OSM_Base"}),f=new v({name:"Open Map Styles",id:"planet_eoc_vector_tiles",attribution:'\xA9 <a href="http://openmaptiles.org/" target="_blank">OpenMapTiles</a> \xA9 <a href="https://www.openstreetmap.org/copyright" target="_blank"> OpenStreetMap contributors</a>',description:'EOC-Geoservice TMS-Service, Vector Tiles with OpenMapTiles and customised <a href="https://openmaptiles.org/styles/#positron">positron</a> Style.',type:"tms",url:"https://{s}.tiles.geoservice.dlr.de/service/tms/1.0.0/planet_eoc@EPSG%3A900913@pbf/{z}/{x}/{y}.pbf?flipy=true",subdomains:["a","b","c","d"],options:{style:Pe,styleSource:"planet_eoc"},visible:!1,action:{component:Ne,inputs:{layersSvc:this.layersSvc}}});[n,y,r,d,f].map(I=>this.layersSvc.addLayer(I,"Baselayers"))}addLayers(){let r=new Se({type:"wms",url:"https://geoservice.dlr.de/eoc/land/wms",name:"GUF Mosaic",id:"GUF28_DLR_v1_Mosaic",params:{LAYERS:"GUF28_DLR_v1_Mosaic",STYLES:"guf_8bit"},tileSize:512,visible:!1,description:"GUF28_DLR_v1_Mosaic",attribution:' | GUF\xAE: <a href="https://www.dlr.de/eoc/en/desktopdefault.aspx/tabid-9628/16557_read-40454/">DLR License</a>',legendImg:"",popup:{asyncPopup:(a,O)=>{Re(a,this.mapSvc,O)}}}),e=new R({type:"wmts",url:"https://tiles.geoservice.dlr.de/service/wmts",name:"TDM90 DEM",id:"TDM90_DEM",params:{layer:"TDM90_DEM",style:"default",matrixSetOptions:{matrixSet:"EPSG:3857",tileMatrixPrefix:"EPSG:3857"},format:"image/png"},visible:!1,description:"TDM90_DEM maxZoom: 8",attribution:' | TDM90 Data \xA9: <a href="http://www.dlr.de" target="_blank">DLR</a>  licensed for <a rel="license" target="_blank" href="https://geoservice.dlr.de/resources/licenses/tdm90/License_for_the_Utilization_of_90m_DEM_for_Scientific_Use.pdf">scientific use</a>',legendImg:"https://tiles.geoservice.dlr.de/service/wmts?layer=TDM90_DEM&style=default&tilematrixset=EPSG%3A3857&Service=WMTS&Request=GetTile&Version=1.0.0&Format=image%2Fpng&TileMatrix=EPSG%3A3857%3A4&TileCol=8&TileRow=5",cssClass:"custom-layer"}),t=new v({id:"geojson_test",name:"GeoJSON Vector Layer",attribution:"\xA9 DLR GeoJSON",type:"geojson",data:{type:"FeatureCollection",features:[{type:"Feature",properties:{title:"Polygon"},geometry:{type:"Polygon",coordinates:[[[11.53564453125,48.80686346108517],[11.42578125,48.61838518688487],[11.97509765625,48.516604348867475],[12.2607421875,48.69096039092549],[12.0849609375,48.99463598353405],[11.53564453125,48.80686346108517]]]}},{type:"Feature",properties:{title:"Rectangle"},geometry:{type:"Polygon",coordinates:[[[10.986328125,43.89789239125797],[11.755371093749998,43.89789239125797],[11.755371093749998,44.41808794374846],[10.986328125,44.41808794374846],[10.986328125,43.89789239125797]]]}},{type:"Feature",properties:{title:"Line"},geometry:{type:"LineString",coordinates:[[13.29345703125,48.268569112964336],[15.073242187499998,47.56170075451973],[14.1064453125,46.40756396630067],[15.886230468750002,44.94924926661153]]}},{type:"Feature",properties:{title:"Point"},geometry:{type:"Point",coordinates:[11.513671874999998,46.42271253466717]}}]},visible:!1,popup:{event:"move",dynamicPopup:{component:N,getAttributes:a=>({data:a.properties})}}}),n=new v({id:"geojson_test_3",name:"GeoJSON Point Layer",type:"geojson",data:{type:"FeatureCollection",features:[{type:"Feature",properties:{title:"Munich",type:"City",image:"https://en.wikipedia.org/wiki/Munich#/media/File:Stadtbild_M%C3%BCnchen.jpg",wiki:"https://en.wikipedia.org/wiki/Munich"},geometry:{type:"Point",coordinates:[11.557617187499998,48.151428143221224]}}]},visible:!1,popup:{properties:{title:"Title",type:"Type"}}}),d=new v({id:"geojson_test_2",name:"Vector Layer in Group",type:"geojson",data:{type:"FeatureCollection",features:[{type:"Feature",properties:{type:"Polygon",name:"Vector Layer in Group",data:"geojson"},geometry:{type:"Polygon",coordinates:[[[-4.9658203125,41.09591205639546],[-6.459960937499999,39.52099229357195],[-5.009765625,38.42777351132902],[-1.8896484375,38.77121637244273],[-.68115234375,40.84706035607122],[-2.900390625,41.65649719441145],[-4.9658203125,41.09591205639546]]]}}]},visible:!1,popup:["type","name"],actions:[{title:"download",icon:"download-cloud",action:a=>{console.log(a)}}]}),y=new v({id:"geojson_test_cluster",name:"Cluster - GeoJSON Vector Layer",type:"geojson",cluster:{distance:20},data:De,visible:!0,actions:[{title:"update Layer",icon:"sync",action:a=>{a.cluster.distance=25,a.options||(a.options={}),a.options.style=O=>{let U=O.get("features").length;return new Ie({image:new xe({radius:U<=1?6:10,stroke:new Te({color:"#fff"}),fill:new Ee({color:U<=1?"green":"red"})})})},this.layersSvc.updateLayer(a)}}],popup:{popupFunction:a=>`<div>${JSON.stringify(a.properties)} </div>`},expanded:{tab:"settings",expanded:!1}}),f=new v({id:"WfsLayer",name:"WFS Pennsylvania",type:"wfs",visible:!1,url:"https://ahocevar.com/geoserver/wfs?service=WFS&request=GetFeature&outputFormat=application/json&version=1.1.0&srsname=EPSG:3857&typenames=usa:states&cql_filter=STATE_NAME='Pennsylvania'",bbox:[-83.1005859375,38.37611542403604,-72.50976562499999,43.03677585761058],popup:{dynamicPopup:{component:N,getAttributes:a=>({data:a})}}}),T=new Me;T.cssClass="hide";let I=new D,j=new b;j.legendImg="https://tiles.geoservice.dlr.de/service/wmts?layer=eoc%3Aliteoverlay&style=_empty&tilematrixset=EPSG%3A3857&Service=WMTS&Request=GetTile&Version=1.0.0&Format=image%2Fpng&TileMatrix=EPSG%3A3857%3A4&TileCol=8&TileRow=5";let Be=new w({id:"group_1",name:"Test Group",layers:[T,I,j],description:"This is a group with a hidden eocBasemap (layer.cssClass = hide), eocBaseoverlay and a eocLiteoverlay",expanded:{tab:"description"},actions:[{title:"download",icon:"download-cloud",action:a=>{console.log(a)}}]}),W=new b;W.id="eoc_Liteoverlay_2";let Ae=new w({id:"group_2",name:"Test Group 2",description:{component:B,inputs:{description:"A LayerGroup with a hidden vectorLayer2."}},legendImg:{component:Ve},cssClass:"custom-layer-group",layers:[e,d,W]}),je=new w({id:"group_3",name:"Test Group Vector-Data",expanded:!1,layers:[t,n,f]}),We=new Le({popup:{popupFunction:a=>`
            <table>
              <tbody>
                <tr>
                  <td style="vertical-align: top; padding-right: 7px;"><b>Name: ${a.properties.name}</b></td>
                  <td></td>
                </tr>
                <tr>
                  <td style="vertical-align: top; padding-right: 7px;"><b>type: ${a.properties.type}</b></td>
                  <td></td>
                </tr>
              </tbody>
            </table>
            <img src="${a.properties.legendImg}">
            `}});[r,We,je,Ae,Be,y].map(a=>{a instanceof he?this.layersSvc.addLayer(a,"Layers"):a instanceof w&&this.layersSvc.addLayerGroup(a)})}addOverlays(){let r=new V({crossOrigin:"anonymous"}),e=new _e({crossOrigin:"anonymous"});this.layersSvc.addLayer(r,"Overlays"),this.layersSvc.addLayer(e,"Overlays");let t=new V({id:"merge_BlueMarble"}),n=new b({id:"merge_Liteoverlay"}),d=new G({id:"BlueMarbleTile_Overlay",name:"BlueMarble with Overlay",visible:!1,legendImg:t.legendImg,description:"merged/stacked Layers BlueMarble with Overlay",layers:[t,n]});this.layersSvc.addLayer(d,"Overlays")}updateLayerGroup(){let r=this.layersSvc.getLayerOrGroupById("group_1");r.expanded=!0,r.layers[1].cssClass=null,this.layersSvc.updateLayerGroup(r);let e=this.layersSvc.getLayerOrGroupById("group_2");e.layers[1].visible=!0,this.layersSvc.updateLayerGroup(e)}addLayerToGroup(){let r=this.layersSvc.getLayerOrGroupById("group_2"),e=new be;this.layersSvc.addLayerToGroup(e,r)}removeAllLayers(){this.layersSvc.removeLayers()}toggleMap(){this.showMap=!this.showMap}static{this.\u0275fac=function(e){return new(e||o)(S(C),S(M),S(L),S(x))}}static{this.\u0275cmp=g({type:o,selectors:[["app-route-map"]],hostVars:2,hostBindings:function(e,t){e&2&&H(t.class)},features:[Y([C,M,L,x])],decls:38,vars:14,consts:[[1,"content-area","map-view"],["id","olMap",3,"layersSvc","mapState","controls"],[1,"right",3,"clrVerticalNavCollapsible","clr-nav-level"],[1,"layers",3,"clrVerticalNavGroupExpanded"],["shape","world","title","Overlays","clrVerticalNavIcon",""],[1,"padding","title-ellipsis"],[3,"layersSvc","mapStateSvc","layerfilter"],["shape","layers","clrVerticalNavIcon","","title","layers"],[3,"layersSvc","mapStateSvc"],["shape","world","title","Baselayers","clrVerticalNavIcon",""],["shape","cog","title","Actions","clrVerticalNavIcon",""],[1,"btn","btn-primary",3,"click"]],template:function(e,t){e&1&&(i(0,"main",0),z(1,He,1,3,"ukis-map-ol",1),s(),i(2,"clr-vertical-nav",2)(3,"clr-vertical-nav-group",3),m(4,"cds-icon",4),l(5," Overlays "),i(6,"clr-vertical-nav-group-children",5),m(7,"ukis-layer-control",6),s()(),i(8,"clr-vertical-nav-group",3),m(9,"cds-icon",7),l(10," Layers "),i(11,"clr-vertical-nav-group-children",5),m(12,"ukis-layer-control",8),s()(),i(13,"clr-vertical-nav-group",3),m(14,"cds-icon",9),l(15," Baselayers "),i(16,"clr-vertical-nav-group-children",5),m(17,"ukis-base-layer-control",8),s()(),i(18,"clr-vertical-nav-group",3),m(19,"cds-icon",10),l(20," Actions "),i(21,"clr-vertical-nav-group-children",5)(22,"button",11),u("click",function(){return t.updateLayerGroup()}),l(23,"update LayerGroup"),s(),i(24,"button",11),u("click",function(){return t.addLayerToGroup()}),l(25,"add Layer to LayerGroup"),s(),i(26,"button",11),u("click",function(){return t.removeAllLayers()}),l(27,"remove All Layers"),s(),i(28,"button",11),u("click",function(){return t.setExtent()}),l(29,"set Extent"),s(),i(30,"button",11),u("click",function(){return t.setRotation()}),l(31,"set Rotation"),s(),i(32,"button",11),u("click",function(){return t.resetRotation()}),l(33,"reset Rotation"),s(),i(34,"button",11),u("click",function(){return t.parseCapabilities()}),l(35,"Parse WMS capabilities"),s(),i(36,"button",11),u("click",function(){return t.toggleMap()}),l(37,"toggle Map"),s()()()()),e&2&&(p(),J(t.showMap?1:-1),p(),c("clrVerticalNavCollapsible",!0)("clr-nav-level",2),p(),c("clrVerticalNavGroupExpanded",!0),p(4),c("layersSvc",t.layersSvc)("mapStateSvc",t.mapStateSvc)("layerfilter","Overlays"),p(),c("clrVerticalNavGroupExpanded",!0),p(4),c("layersSvc",t.layersSvc)("mapStateSvc",t.mapStateSvc),p(),c("clrVerticalNavGroupExpanded",!0),p(4),c("layersSvc",t.layersSvc)("mapStateSvc",t.mapStateSvc),p(),c("clrVerticalNavGroupExpanded",!0))},dependencies:[Oe,ve,de,ue,ye,ge,oe,me,ce,ie,Fe,Ge],styles:["[_nghost-%COMP%]     .custom-layer-group .head>.title{color:#660f00}[_nghost-%COMP%]     .custom-layer .head>.title{color:#b87d00}[_nghost-%COMP%]     .zoom-number{bottom:2.5em;left:8px}"]})}}return o})();var Je=[{path:"",component:A}],qe=(()=>{class o{static{this.\u0275fac=function(e){return new(e||o)}}static{this.\u0275mod=P({type:o})}static{this.\u0275inj=k({imports:[F.forChild(Je),F]})}}return o})(),Rt=(()=>{class o{static{this.\u0275fac=function(e){return new(e||o)}}static{this.\u0275mod=P({type:o})}static{this.\u0275inj=k({imports:[Z,qe,fe,A]})}}return o})();export{Rt as RouteMapModule,qe as RouteMapRoutingModule};
