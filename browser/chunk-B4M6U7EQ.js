import{eb as ae,w as F,y as k}from"./chunk-OTRZYAA2.js";import{E as s,G as D,I as h,Ib as y,Kb as b,Lb as K,Lc as O,M as B,Mc as L,Nb as Q,Nc as V,O as A,Oa as Y,P as c,Pb as w,Qb as R,Rb as N,Rc as ne,Sc as oe,T as G,Tc as re,U as v,V as f,Vb as U,W as S,Wb as $,X as a,Xb as j,Y as o,Yb as I,Z,Zb as E,aa as H,ab as q,ba as m,bb as J,ca as _,dc as ee,ec as te,fa as X,la as p,lc as T,ma as P,mc as ie,na as C,oc as x,pa as u,qa as d,ra as g,v as W,w as z}from"./chunk-G5LJQFAD.js";function me(r,M){if(r&1&&(a(0,"option",7),p(1),o()),r&2){let i=M.$implicit;c("value",i.value),s(),P(i.title)}}var _e=(()=>{class r{constructor(i){this.mapSvc=i,this.mapCoordinates=[0,0],this.zoom=0,this.precision=2,this.x="Lon",this.y="Lat",this.mapMoveSubscription=t=>{t.coordinate&&(this.mapCoordinates=k(t.coordinate,this.mapProjection,F(this.selectedProjection)))},this.mapOnMoveend=t=>{let e=t.map.getView().getZoom();this.zoom!==e&&(this.zoom=e)},this.mapSub=this.mapSvc.projectionChange.subscribe(t=>{this.mapProjection=t,this.setProjection(t)})}ngOnInit(){this.mapSvc.map.on("pointermove",this.mapMoveSubscription),this.mapSvc.map.on("moveend",this.mapOnMoveend)}setProjection(i){let t=i.getCode();t==="EPSG:4326"?this.projections=[{title:t,value:t}]:this.projections=[{title:"EPSG:4326",value:"EPSG:4326"},{title:t,value:t}],this.selectedProjection=this.projections[0].value}ngOnDestroy(){this.mapSvc.map.un("pointermove",this.mapMoveSubscription),this.mapSvc.map.un("moveend",this.mapOnMoveend),this.mapSub.unsubscribe()}onChangeProj(i){let t=i.target.value;t==="EPSG:4326"?(this.x="Lon",this.y="Lat"):(this.x="X",this.y="Y");let e=this.selectedProjection;this.selectedProjection=t,this.mapCoordinates=k(this.mapCoordinates,F(e),F(this.selectedProjection))}toPrecision(i,t){return i.toFixed(t)}static{this.\u0275fac=function(t){return new(t||r)(D(ae))}}static{this.\u0275cmp=h({type:r,selectors:[["ukis-mouse-position"]],decls:28,vars:6,consts:[[1,"mouse-position-control"],[1,"clr-row"],[1,"clr-col-7"],[1,"output-container"],[1,"clr-col-5"],[1,"input-container"],["clrSelect","",3,"change"],[3,"value"],["type","number","min","0","max","12","name","precision","clrNumberInput","",3,"ngModelChange","ngModel"]],template:function(t,e){t&1&&(a(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div")(5,"b"),p(6),o(),p(7),o(),a(8,"div")(9,"b"),p(10),o(),p(11),o(),a(12,"div")(13,"b"),p(14,"Zoom"),o(),p(15),o()()(),a(16,"div",4)(17,"div",5)(18,"clr-select-container")(19,"label"),p(20,"Projection "),o(),a(21,"select",6),m("change",function(n){return e.onChangeProj(n)}),f(22,me,2,2,"option",7,v),o()(),a(24,"clr-number-input-container")(25,"label"),p(26,"Precision "),o(),a(27,"input",8),g("ngModelChange",function(n){return d(e.precision,n)||(e.precision=n),n}),o()()()()()()),t&2&&(s(6),P(e.x),s(),C(" ",e.toPrecision(e.mapCoordinates[0],e.precision),""),s(3),P(e.y),s(),C(" ",e.toPrecision(e.mapCoordinates[1],e.precision),""),s(4),C(" ",e.toPrecision(e.zoom,e.precision),""),s(7),S(e.projections),s(5),u("ngModel",e.precision))},dependencies:[re,T,oe,ne,x,E,U,$,y,N,b,I,j,w,V,L,O],styles:[".mouse-position-control[_ngcontent-%COMP%]{margin-left:.2rem;padding-bottom:.4rem}.mouse-position-control[_ngcontent-%COMP%]   .output-container[_ngcontent-%COMP%]{line-height:1.6rem}.mouse-position-control[_ngcontent-%COMP%]   .input-container[_ngcontent-%COMP%]   .clr-form-control[_ngcontent-%COMP%]:first-child{margin-top:0rem}"]})}}return r})();var Se=(()=>{class r{constructor(){this.inputStep=.01,this.precision=2}ngOnInit(){this.subscription=this.mapState.getMapState().subscribe(i=>{this.mapstate=i})}ngOnDestroy(){this.subscription.unsubscribe()}zoomIn(){this.mapstate.zoom++,this.setNewState(this.mapstate)}zoomOut(){this.mapstate.zoom--,this.setNewState(this.mapstate)}setNewState(i){i.options.notifier="user",this.mapState.setMapState(i)}stateChange(i){this.setNewState(this.mapstate)}setInputStep(i){let t=Array.from(Array(i),(e,l)=>"0").join("");this.inputStep=1/+`1${t}`}toPrecision(i,t){return i.toFixed(t)}static{this.\u0275fac=function(t){return new(t||r)}}static{this.\u0275cmp=h({type:r,selectors:[["ukis-map-navigator"]],inputs:{mapState:"mapState"},decls:22,vars:7,consts:[[1,"clr-row"],[1,"clr-col-9"],[1,"output-container"],["clrForm",""],["clrNumberInput","","type","number","name","lon",3,"ngModelChange","ngModel","step"],["clrNumberInput","","type","number","name","lat",3,"ngModelChange","ngModel","step"],["clrNumberInput","","type","number","name","zoom",3,"ngModelChange","ngModel","step"],[1,"clr-col-3"],[1,"input-container"],["type","number","min","0","max","8","step","1","name","precision","clrNumberInput","",3,"ngModelChange","ngModel"]],template:function(t,e){t&1&&(a(0,"div",0)(1,"div",1)(2,"div",2)(3,"form",3)(4,"clr-number-input-container")(5,"label"),p(6,"Lon"),o(),a(7,"input",4),g("ngModelChange",function(n){return d(e.mapstate.center.lon,n)||(e.mapstate.center.lon=n),n}),m("ngModelChange",function(n){return e.stateChange(n)}),o()(),a(8,"clr-number-input-container")(9,"label"),p(10,"Lat"),o(),a(11,"input",5),g("ngModelChange",function(n){return d(e.mapstate.center.lat,n)||(e.mapstate.center.lat=n),n}),m("ngModelChange",function(n){return e.stateChange(n)}),o()(),a(12,"clr-number-input-container")(13,"label"),p(14,"Zoom"),o(),a(15,"input",6),g("ngModelChange",function(n){return d(e.mapstate.zoom,n)||(e.mapstate.zoom=n),n}),m("ngModelChange",function(n){return e.stateChange(n)}),o()()()()(),a(16,"div",7)(17,"div",8)(18,"clr-number-input-container")(19,"label"),p(20,"Precision "),o(),a(21,"input",9),g("ngModelChange",function(n){return d(e.precision,n)||(e.precision=n),n}),m("ngModelChange",function(n){return e.setInputStep(n)}),o()()()()()),t&2&&(s(7),u("ngModel",e.mapstate.center.lon),c("step",e.inputStep),s(4),u("ngModel",e.mapstate.center.lat),c("step",e.inputStep),s(4),u("ngModel",e.mapstate.zoom),c("step",e.inputStep),s(6),u("ngModel",e.precision))},dependencies:[E,R,y,N,b,K,I,j,w,Q,x,T,ie,V,L,O],styles:[".output-container[_ngcontent-%COMP%]   .clr-form-control[_ngcontent-%COMP%]:first-child{margin-top:0rem}.output-container[_ngcontent-%COMP%]   .clr-input[_ngcontent-%COMP%]{width:90%}"]})}}return r})();function ce(r,M){if(r&1){let i=H();a(0,"div",0),m("click",function(){let e=W(i).$implicit,l=_(2);return z(l.setNewProjection(e))}),a(1,"div",1)(2,"div",2)(3,"span",3),m("click",function(){let e=W(i).$implicit,l=_(2);return z(l.setNewProjection(e))}),p(4),o(),Z(5,"cds-icon",4),o()()()}if(r&2){let i=M.$implicit,t=_(2);s(3),c("title",i.title),s(),C(" ",i.title||i.code," "),s(),X("title",i.code),A("solid",i===t.selectedProj)("shape",i===t.selectedProj?"eye":"eye-hide")}}function ue(r,M){if(r&1&&(a(0,"div"),f(1,ce,6,5,"div",null,v),o()),r&2){let i=_();s(),S(i.projList)}}Y.addIcons(q,J);var we=(()=>{class r{constructor(){this.fitViewToNewExtent=!1}ngOnInit(){this.projList[0]&&this.setNewProjection(this.projList[0])}setNewProjection(i){this.mapSvc.registerProjection(i);let t=this.mapSvc.getOlProjection(i);this.mapSvc.setProjection(t),this.fitViewToNewExtent&&this.mapStateSvc.setExtent(i.worldExtent),this.selectedProj=i}static{this.\u0275fac=function(t){return new(t||r)}}static{this.\u0275cmp=h({type:r,selectors:[["ukis-projection-switch"]],inputs:{mapSvc:"mapSvc",mapStateSvc:"mapStateSvc",projList:[0,"projectionList","projList"],fitViewToNewExtent:"fitViewToNewExtent"},decls:1,vars:1,consts:[[3,"click"],[1,"layergroup"],[1,"head"],[1,"title",3,"click","title"],[1,"iconButton",3,"title"]],template:function(t,e){t&1&&B(0,ue,3,0,"div"),t&2&&G(e.projList?0:-1)},dependencies:[te,ee],encapsulation:2})}}return r})();export{_e as a,Se as b,we as c};
