(self.webpackChunkdemo_maps=self.webpackChunkdemo_maps||[]).push([[179],{394:(Un,Vn,ct)=>{Un=ct.nmd(Un);var Lt=function(Ie,ue,Ee){var C={singleFile:!0,Util:{}};return C.Util.extend=function(w,R){if(w=w||{},R){for(var O in R){var k=R[O];void 0!==k&&(w[O]=k)}!(typeof window<"u"&&null!==window&&"function"==typeof window.Event&&R instanceof window.Event)&&R.hasOwnProperty&&R.hasOwnProperty("toString")&&(w.toString=R.toString)}return w},C.Class=function(){for(var k,j,X,w=function(){this.initialize.apply(this,arguments)},R={},O=function(){},ee=0,$=arguments.length;ee<$;++ee)"function"==typeof(X=arguments[ee])?(0===ee&&$>1&&(j=X.prototype.initialize,X.prototype.initialize=O,R=new X,void 0===j?delete X.prototype.initialize:X.prototype.initialize=j),k=X.prototype):k=X,C.Util.extend(R,k);return w.prototype=R,w},C.XML={XMLNS_NS:"http://www.w3.org/2000/xmlns/",XMLNS_P:"xmlns"},C.DOM={isDomImplementationAvailable:function(){return typeof Ie<"u"||!!(typeof document<"u"&&C.Util.Type.exists(document.implementation)&&C.Util.Type.isFunction(document.implementation.createDocument))},createDocument:function(){if(typeof Ie<"u")return(new Ie.DOMImplementation).createDocument();if(typeof document<"u"&&C.Util.Type.exists(document.implementation)&&C.Util.Type.isFunction(document.implementation.createDocument))return document.implementation.createDocument("","",null);if(typeof ActiveXObject<"u")return new ActiveXObject("MSXML2.DOMDocument");throw new Error("Error created the DOM document.")},serialize:function(w){if(C.Util.Ensure.ensureExists(w),typeof Ie<"u")return(new Ie.XMLSerializer).serializeToString(w);if(C.Util.Type.exists(XMLSerializer))return(new XMLSerializer).serializeToString(w);if(C.Util.Type.exists(w.xml))return w.xml;throw new Error("Could not serialize the node, neither XMLSerializer nor the [xml] property were found.")},parse:function(w){if(C.Util.Ensure.ensureExists(w),typeof Ie<"u")return(new Ie.DOMParser).parseFromString(w,"application/xml");if(typeof DOMParser<"u")return(new DOMParser).parseFromString(w,"application/xml");if(typeof ActiveXObject<"u"){var R=C.DOM.createDocument("","");return R.loadXML(w),R}var O="data:text/xml;charset=utf-8,"+encodeURIComponent(w),k=new XMLHttpRequest;return k.open("GET",O,!1),k.overrideMimeType&&k.overrideMimeType("text/xml"),k.send(null),k.responseXML},load:function(w,R,O){C.Request.INSTANCE.issue(w,function(j){var X;if(C.Util.Type.exists(j.responseXML)&&C.Util.Type.exists(j.responseXML.documentElement))X=j.responseXML;else{if(!C.Util.Type.isString(j.responseText))throw new Error("Response does not have valid [responseXML] or [responseText].");X=C.DOM.parse(j.responseText)}R(X)},function(j){throw new Error("Could not retrieve XML from URL ["+w+"].")},O)},xlinkFixRequired:null,isXlinkFixRequired:function(){if(null===C.DOM.xlinkFixRequired)if(typeof navigator>"u")C.DOM.xlinkFixRequired=!1;else if(navigator.userAgent&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)){var w=C.DOM.createDocument(),R=w.createElement("test");R.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href","urn:test"),w.appendChild(R);var O=C.DOM.serialize(w);C.DOM.xlinkFixRequired=-1===O.indexOf("xmlns:xlink")}else C.DOM.xlinkFixRequired=!1;return C.DOM.xlinkFixRequired}},C.Request=C.Class({factories:[function(){return new XMLHttpRequest},function(){return new ActiveXObject("Msxml2.XMLHTTP")},function(){return new ActiveXObject("Msxml2.XMLHTTP.6.0")},function(){return new ActiveXObject("Msxml2.XMLHTTP.3.0")},function(){return new ActiveXObject("Microsoft.XMLHTTP")},function(){return typeof ue<"u"?new(0,ue.XMLHttpRequest):null}],initialize:function(){},issue:function(w,R,O,k){C.Util.Ensure.ensureString(w),C.Util.Type.exists(R)?C.Util.Ensure.ensureFunction(R):R=function(){},C.Util.Type.exists(O)?C.Util.Ensure.ensureFunction(O):O=function(){},C.Util.Type.exists(k)?C.Util.Ensure.ensureObject(k):k={};var j=this.createTransport(),X=C.Util.Type.isString(k.method)?k.method:"GET",ee=!C.Util.Type.isBoolean(k.async)||k.async,$=C.Util.Type.isString(k.proxy)?k.proxy:C.Request.PROXY,re=C.Util.Type.isString(k.user)?k.user:null,ge=C.Util.Type.isString(k.password)?k.password:null;if(C.Util.Type.isString($)&&0===w.indexOf("http")&&(w=$+encodeURIComponent(w)),C.Util.Type.isString(re)?j.open(X,w,ee,re,ge):j.open(X,w,ee),C.Util.Type.isObject(k.headers))for(var Le in k.headers)k.headers.hasOwnProperty(Le)&&j.setRequestHeader(Le,k.headers[Le]);var Ge=C.Util.Type.exists(k.data)?k.data:null;if(ee){var ft=this;typeof window<"u"?(j.onreadystatechange=function(){ft.handleTransport(j,R,O)},window.setTimeout(function(){j.send(Ge)},0)):(j.onreadystatechange=function(){ft.handleTransport(j,R,O)},j.send(Ge))}else j.send(Ge),this.handleTransport(j,R,O);return j},handleTransport:function(w,R,O){4==w.readyState&&((!w.status||w.status>=200&&w.status<300)&&R(w),w.status&&(w.status<200||w.status>=300)&&O(w))},createTransport:function(){for(var w=0,R=this.factories.length;w<R;w++)try{var O=this.factories[w]();if(null!==O)return O}catch{}throw new Error("Could not create XML HTTP transport.")},CLASS_NAME:"Jsonix.Request"}),C.Request.INSTANCE=new C.Request,C.Request.PROXY=null,C.Schema={},C.Model={},C.Util.Type={exists:function(w){return typeof w<"u"&&null!==w},isUndefined:function(w){return typeof w>"u"},isString:function(w){return"string"==typeof w},isBoolean:function(w){return"boolean"==typeof w},isObject:function(w){return"object"==typeof w},isFunction:function(w){return"function"==typeof w},isNumber:function(w){return"number"==typeof w&&!isNaN(w)},isNumberOrNaN:function(w){return w===+w||"[object Number]"===Object.prototype.toString.call(w)},isNaN:function(w){return C.Util.Type.isNumberOrNaN(w)&&isNaN(w)},isArray:function(w){return!(!(w&&w.concat&&w.unshift)||w.callee)},isDate:function(w){return!!(w&&w.getTimezoneOffset&&w.setUTCFullYear)},isRegExp:function(w){return!(!(w&&w.test&&w.exec)||!w.ignoreCase&&!1!==w.ignoreCase)},isNode:function(w){return"object"==typeof Node||"function"==typeof Node?w instanceof Node:w&&"object"==typeof w&&"number"==typeof w.nodeType&&"string"==typeof w.nodeName},isEqual:function(w,R,O){var k=C.Util.Type.isFunction(O),X=Object.keys||function(xn){if(C.Util.Type.isArray(xn))return function(xn,Sr,xr){for(var Jr=slice.call(arguments),Ke=Jr.length<=1,Y=Ke?0:Jr[0],ve=Jr[2]||1,un=Math.max(Math.ceil(((Ke?Jr[0]:Jr[1])-Y)/ve),0),on=0,An=new Array(un);on<un;)An[on++]=Y,Y+=ve;return An}(0,xn.length);var Sr=[];for(var xr in xn)xn.hasOwnProperty(xr)&&(Sr[Sr.length]=xr);return Sr};if(w===R||C.Util.Type.isNaN(w)&&C.Util.Type.isNaN(R))return!0;var ee=typeof w,$=typeof R;if(ee!=$)return k&&O("Types differ ["+ee+"], ["+$+"]."),!1;if(w==R)return!0;if(!w&&R||w&&!R)return k&&O("One is falsy, the other is truthy."),!1;if(C.Util.Type.isDate(w)&&C.Util.Type.isDate(R))return w.getTime()===R.getTime();if(C.Util.Type.isNaN(w)&&C.Util.Type.isNaN(R))return!1;if(C.Util.Type.isRegExp(w)&&C.Util.Type.isRegExp(R))return w.source===R.source&&w.global===R.global&&w.ignoreCase===R.ignoreCase&&w.multiline===R.multiline;if(C.Util.Type.isNode(w)&&C.Util.Type.isNode(R)){var re=C.DOM.serialize(w),ge=C.DOM.serialize(R);return re===ge||(k&&(O("Nodes differ."),O("A="+re),O("B="+ge)),!1)}if("object"!==ee)return!1;if(C.Util.Type.isArray(w)&&w.length!==R.length)return k&&(O("Lengths differ."),O("A.length="+w.length),O("B.length="+R.length)),!1;var Le=X(w),Ge=X(R);if(Le.length!==Ge.length){k&&O("Different number of properties ["+Le.length+"], ["+Ge.length+"].");for(var ft=0;ft<Le.length;ft++)k&&O("A ["+Le[ft]+"]="+w[Le[ft]]);for(var xt=0;xt<Ge.length;xt++)k&&O("B ["+Ge[xt]+"]="+R[Ge[xt]]);return!1}for(var wt=0;wt<Le.length;wt++){var gn=Le[wt];if(!(gn in R)||!C.Util.Type.isEqual(w[gn],R[gn],O))return k&&(O("One of the properties differ."),O("Key: ["+gn+"]."),O("Left: ["+w[gn]+"]."),O("Right: ["+R[gn]+"].")),!1}return!0},cloneObject:function(w,R){for(var O in R=R||{},w)w.hasOwnProperty(O)&&(R[O]=w[O]);return R},defaultValue:function(){var w=arguments;if(0!==w.length){for(var R=w[w.length-1],O=typeof R,k=0;k<w.length-1;k++){var j=w[k];if(typeof j===O)return j}return R}}},C.Util.NumberUtils={isInteger:function(w){return C.Util.Type.isNumber(w)&&w%1==0}},C.Util.StringUtils={trim:String.prototype.trim?function(w){return C.Util.Ensure.ensureString(w),w.trim()}:function(w){return C.Util.Ensure.ensureString(w),w.replace(/^\s\s*/,"").replace(/\s\s*$/,"")},isEmpty:function(w){var R=w.length;if(!R)return!0;for(var O=0;O<R;O++){var k=w[O];if(" "!==k){if(k>"\r"&&k<"\x85")return!1;if(k<"\xa0"){if(k<"\t")return!1;if(k>"\x85")return!1}else if(k>"\xa0")if(k<"\u2028"){if(k<"\u180e"){if(k<"\u1680")return!1;if(k>"\u1680")return!1}else if(k>"\u180e"){if(k<"\u2000")return!1;if(k>"\u200a")return!1}}else if(k>"\u2029")if(k<"\u205f"){if(k<"\u202f")return!1;if(k>"\u202f")return!1}else if(k>"\u205f"){if(k<"\u3000")return!1;if(k>"\u3000")return!1}}}return!0},isNotBlank:function(w){return C.Util.Type.isString(w)&&!C.Util.StringUtils.isEmpty(w)},whitespaceCharacters:"\t\n\v\f\r \x85\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u2028\u2029\u202f\u205f\u3000",whitespaceCharactersMap:{"\t":!0,"\n":!0,"\v":!0,"\f":!0,"\r":!0," ":!0,"\x85":!0,"\xa0":!0,"\u1680":!0,"\u180e":!0,"\u2000":!0,"\u2001":!0,"\u2002":!0,"\u2003":!0,"\u2004":!0,"\u2005":!0,"\u2006":!0,"\u2007":!0,"\u2008":!0,"\u2009":!0,"\u200a":!0,"\u2028":!0,"\u2029":!0,"\u202f":!0,"\u205f":!0,"\u3000":!0},splitBySeparatorChars:function(w,R){C.Util.Ensure.ensureString(w),C.Util.Ensure.ensureString(R);var O=w.length;if(0===O)return[];if(1===R.length)return w.split(R);for(var k=[],j=1,X=0,ee=0,$=!1;X<O;)R.indexOf(w.charAt(X))>=0?(!!$&&(-1==j++&&(X=O),k.push(w.substring(ee,X)),$=!1),ee=++X):($=!0,X++);return!!$&&k.push(w.substring(ee,X)),k}},C.Util.Ensure={ensureBoolean:function(w){if(!C.Util.Type.isBoolean(w))throw new Error("Argument ["+w+"] must be a boolean.")},ensureString:function(w){if(!C.Util.Type.isString(w))throw new Error("Argument ["+w+"] must be a string.")},ensureNumber:function(w){if(!C.Util.Type.isNumber(w))throw new Error("Argument ["+w+"] must be a number.")},ensureNumberOrNaN:function(w){if(!C.Util.Type.isNumberOrNaN(w))throw new Error("Argument ["+w+"] must be a number or NaN.")},ensureInteger:function(w){if(!C.Util.Type.isNumber(w))throw new Error("Argument ["+w+"] must be an integer, but it is not a number.");if(!C.Util.NumberUtils.isInteger(w))throw new Error("Argument ["+w+"] must be an integer.")},ensureDate:function(w){if(!(w instanceof Date))throw new Error("Argument ["+w+"] must be a date.")},ensureObject:function(w){if(!C.Util.Type.isObject(w))throw new Error("Argument ["+w+"] must be an object.")},ensureArray:function(w){if(!C.Util.Type.isArray(w))throw new Error("Argument ["+w+"] must be an array.")},ensureFunction:function(w){if(!C.Util.Type.isFunction(w))throw new Error("Argument ["+w+"] must be a function.")},ensureExists:function(w){if(!C.Util.Type.exists(w))throw new Error("Argument ["+w+"] does not exist.")}},C.XML.QName=C.Class({key:null,namespaceURI:null,localPart:null,prefix:null,string:null,initialize:function(w,R,O){var k,j,X;if(C.Util.Type.exists(R))if(C.Util.Type.exists(O))k=C.Util.Type.exists(w)?w:"",j=R,X=C.Util.Type.exists(O)?O:"";else{k=C.Util.Type.exists(w)?w:"",j=R;var re=R.indexOf(":");re>0&&re<R.length?(X=R.substring(0,re),j=R.substring(re+1)):(X="",j=R)}else k="",j=w,X="";this.namespaceURI=k,this.localPart=j,this.prefix=X,this.key=(""!==k?"{"+k+"}":"")+j,this.string=(""!==k?"{"+k+"}":"")+(""!==X?X+":":"")+j},toString:function(){return this.string},toCanonicalString:function(w){return w&&w.getPrefix(this.namespaceURI,this.prefix),this.prefix+(""===this.prefix?"":":")+this.localPart},clone:function(){return new C.XML.QName(this.namespaceURI,this.localPart,this.prefix)},equals:function(w){return!!w&&this.namespaceURI==w.namespaceURI&&this.localPart==w.localPart},CLASS_NAME:"Jsonix.XML.QName"}),C.XML.QName.fromString=function(w,R,O){var X,ee,k=w.indexOf("{"),j=w.lastIndexOf("}");0===k&&j>0&&j<w.length?(X=w.substring(1,j),ee=w.substring(j+1)):(X=null,ee=w);var re,ge,$=ee.indexOf(":");return $>0&&$<ee.length?(re=ee.substring(0,$),ge=ee.substring($+1)):(re="",ge=ee),null===X&&(""===re&&C.Util.Type.isString(O)?X=O:R&&(X=R.getNamespaceURI(re))),C.Util.Type.isString(X)||(X=O||""),new C.XML.QName(X,ge,re)},C.XML.QName.fromObject=function(w){if(C.Util.Ensure.ensureObject(w),w instanceof C.XML.QName||C.Util.Type.isString(w.CLASS_NAME)&&"Jsonix.XML.QName"===w.CLASS_NAME)return w;var R=w.localPart||w.lp||null;return C.Util.Ensure.ensureString(R),new C.XML.QName(w.namespaceURI||w.ns||"",R,w.prefix||w.p||"")},C.XML.QName.fromObjectOrString=function(w,R,O){return C.Util.Type.isString(w)?C.XML.QName.fromString(w,R,O):C.XML.QName.fromObject(w)},C.XML.QName.key=function(w,R){if(C.Util.Ensure.ensureString(R),w){var O=R.indexOf(":");return"{"+w+"}"+(O>0&&O<R.length?R.substring(O+1):R)}return R},C.XML.Calendar=C.Class({year:NaN,month:NaN,day:NaN,hour:NaN,minute:NaN,second:NaN,fractionalSecond:NaN,timezone:NaN,date:null,initialize:function(w){C.Util.Ensure.ensureObject(w),C.Util.Type.exists(w.year)?(C.Util.Ensure.ensureInteger(w.year),C.XML.Calendar.validateYear(w.year),this.year=w.year):this.year=NaN,C.Util.Type.exists(w.month)?(C.Util.Ensure.ensureInteger(w.month),C.XML.Calendar.validateMonth(w.month),this.month=w.month):this.month=NaN,C.Util.Type.exists(w.day)?(C.Util.Ensure.ensureInteger(w.day),C.Util.NumberUtils.isInteger(w.year)&&C.Util.NumberUtils.isInteger(w.month)?C.XML.Calendar.validateYearMonthDay(w.year,w.month,w.day):C.Util.NumberUtils.isInteger(w.month)?C.XML.Calendar.validateMonthDay(w.month,w.day):C.XML.Calendar.validateDay(w.day),this.day=w.day):this.day=NaN,C.Util.Type.exists(w.hour)?(C.Util.Ensure.ensureInteger(w.hour),C.XML.Calendar.validateHour(w.hour),this.hour=w.hour):this.hour=NaN,C.Util.Type.exists(w.minute)?(C.Util.Ensure.ensureInteger(w.minute),C.XML.Calendar.validateMinute(w.minute),this.minute=w.minute):this.minute=NaN,C.Util.Type.exists(w.second)?(C.Util.Ensure.ensureInteger(w.second),C.XML.Calendar.validateSecond(w.second),this.second=w.second):this.second=NaN,C.Util.Type.exists(w.fractionalSecond)?(C.Util.Ensure.ensureNumber(w.fractionalSecond),C.XML.Calendar.validateFractionalSecond(w.fractionalSecond),this.fractionalSecond=w.fractionalSecond):this.fractionalSecond=NaN,C.Util.Type.exists(w.timezone)?C.Util.Type.isNaN(w.timezone)?this.timezone=NaN:(C.Util.Ensure.ensureInteger(w.timezone),C.XML.Calendar.validateTimezone(w.timezone),this.timezone=w.timezone):this.timezone=NaN;var R=new Date(0);R.setUTCFullYear(this.year||1970),R.setUTCMonth(this.month-1||0),R.setUTCDate(this.day||1),R.setUTCHours(this.hour||0),R.setUTCMinutes(this.minute||0),R.setUTCSeconds(this.second||0),R.setUTCMilliseconds(1e3*(this.fractionalSecond||0));var O=-6e4*(this.timezone||0);this.date=new Date(R.getTime()+O)},CLASS_NAME:"Jsonix.XML.Calendar"}),C.XML.Calendar.MIN_TIMEZONE=-840,C.XML.Calendar.MAX_TIMEZONE=840,C.XML.Calendar.DAYS_IN_MONTH=[31,29,31,30,31,30,31,31,30,31,30,31],C.XML.Calendar.fromObject=function(w){return C.Util.Ensure.ensureObject(w),C.Util.Type.isString(w.CLASS_NAME)&&"Jsonix.XML.Calendar"===w.CLASS_NAME?w:new C.XML.Calendar(w)},C.XML.Calendar.validateYear=function(w){if(0===w)throw new Error("Invalid year ["+w+"]. Year must not be [0].")},C.XML.Calendar.validateMonth=function(w){if(w<1||w>12)throw new Error("Invalid month ["+w+"]. Month must be in range [1, 12].")},C.XML.Calendar.validateDay=function(w){if(w<1||w>31)throw new Error("Invalid day ["+w+"]. Day must be in range [1, 31].")},C.XML.Calendar.validateMonthDay=function(w,R){if(C.XML.Calendar.validateMonth(w),R<1||R>C.XML.Calendar.DAYS_IN_MONTH[w-1])throw new Error("Invalid day ["+R+"]. Day must be in range [1, "+C.XML.Calendar.DAYS_IN_MONTH[w-1]+"].")},C.XML.Calendar.validateYearMonthDay=function(w,R,O){C.XML.Calendar.validateYear(w),C.XML.Calendar.validateMonthDay(R,O)},C.XML.Calendar.validateHour=function(w){if(w<0||w>23)throw new Error("Invalid hour ["+w+"]. Hour must be in range [0, 23].")},C.XML.Calendar.validateMinute=function(w){if(w<0||w>59)throw new Error("Invalid minute ["+w+"]. Minute must be in range [0, 59].")},C.XML.Calendar.validateSecond=function(w){if(w<0||w>59)throw new Error("Invalid second ["+w+"]. Second must be in range [0, 59].")},C.XML.Calendar.validateFractionalSecond=function(w){if(w<0||w>59)throw new Error("Invalid fractional second ["+w+"]. Fractional second must be in range [0, 1).")},C.XML.Calendar.validateTimezone=function(w){if(w<C.XML.Calendar.MIN_TIMEZONE||w>C.XML.Calendar.MAX_TIMEZONE)throw new Error("Invalid timezone ["+w+"]. Timezone must not be in range ["+C.XML.Calendar.MIN_TIMEZONE+", "+C.XML.Calendar.MAX_TIMEZONE+"].")},C.XML.Input=C.Class({root:null,node:null,attributes:null,eventType:null,pns:null,initialize:function(w){C.Util.Ensure.ensureExists(w),this.root=w;var R={"":""};R[C.XML.XMLNS_P]=C.XML.XMLNS_NS,this.pns=[R]},hasNext:function(){if(null===this.node)return!0;if(this.node===this.root){var w=this.node.nodeType;return!(9===w&&8===this.eventType||1===w&&2===this.eventType)}return!0},next:function(){if(null===this.eventType)return this.enter(this.root);if(7===this.eventType){var w=this.node.documentElement;return w?this.enter(w):this.leave(this.node)}if(1===this.eventType){var R=this.node.firstChild;return R?this.enter(R):this.leave(this.node)}if(2===this.eventType){var O=this.node.nextSibling;return O?this.enter(O):this.leave(this.node)}return this.leave(this.node)},enter:function(w){var R=w.nodeType;if(this.node=w,this.attributes=null,1===R)return this.eventType=1,this.pushNS(w),this.eventType;if(2===R)return this.eventType=10,this.eventType;if(3===R)return this.eventType=C.Util.StringUtils.isEmpty(w.nodeValue)?6:4,this.eventType;if(4===R)return this.eventType=12,this.eventType;if(5===R)return this.eventType=9,this.eventType;if(6===R)return this.eventType=15,this.eventType;if(7===R)return this.eventType=3,this.eventType;if(8===R)return this.eventType=5,this.eventType;if(9===R)return this.eventType=7,this.eventType;if(10===R)return this.eventType=12,this.eventType;if(12===R)return this.eventType=14,this.eventType;throw new Error("Node type ["+R+"] is not supported.")},leave:function(w){if(9===w.nodeType){if(8==this.eventType)throw new Error("Invalid state.");return this.node=w,this.attributes=null,this.eventType=8,this.eventType}if(1===w.nodeType){if(2!=this.eventType)return this.node=w,this.attributes=null,this.eventType=2,this.popNS(),this.eventType;var R=w.nextSibling;if(R)return this.enter(R)}var O=w.nextSibling;if(O)return this.enter(O);var k=w.parentNode;return this.node=k,this.attributes=null,this.eventType=9===k.nodeType?8:2,this.eventType},getName:function(){var w=this.node;return C.Util.Type.isString(w.nodeName)?C.Util.Type.isString(w.namespaceURI)?new C.XML.QName(w.namespaceURI,w.nodeName):new C.XML.QName(w.nodeName):null},getNameKey:function(){var w=this.node;return C.Util.Type.isString(w.nodeName)?C.XML.QName.key(w.namespaceURI,w.nodeName):null},getText:function(){return this.node.nodeValue},nextTag:function(){for(var w=this.next();7===w||4===w||12===w||6===w||3===w||5===w;)w=this.next();if(1!==w&&2!==w)throw new Error("Expected start or end tag.");return w},skipElement:function(){if(this.eventType!==C.XML.Input.START_ELEMENT)throw new Error("Parser must be on START_ELEMENT to skip element.");var R,w=1;do{w+=(R=this.nextTag())===C.XML.Input.START_ELEMENT?1:-1}while(w>0);return R},getElementText:function(){if(1!=this.eventType)throw new Error("Parser must be on START_ELEMENT to read next text.");for(var w=this.next(),R="";2!==w;){if(4===w||12===w||6===w||9===w)R+=this.getText();else if(3!==w&&5!==w)throw 8===w?new Error("Unexpected end of document when reading element text content."):1===w?new Error("Element text content may not contain START_ELEMENT."):new Error("Unexpected event type ["+w+"].");w=this.next()}return R},retrieveElement:function(){var w;if(1===this.eventType)w=this.node;else{if(10!==this.eventType)throw new Error("Element can only be retrieved for START_ELEMENT or ATTRIBUTE nodes.");w=this.node.parentNode}return w},retrieveAttributes:function(){var w;if(this.attributes)w=this.attributes;else if(1===this.eventType)this.attributes=w=this.node.attributes;else{if(10!==this.eventType)throw new Error("Attributes can only be retrieved for START_ELEMENT or ATTRIBUTE nodes.");this.attributes=w=this.node.parentNode.attributes}return w},getAttributeCount:function(){return this.retrieveAttributes().length},getAttributeName:function(w){var R=this.retrieveAttributes();if(w<0||w>=R.length)throw new Error("Invalid attribute index ["+w+"].");var O=R[w];return C.Util.Type.isString(O.namespaceURI)?new C.XML.QName(O.namespaceURI,O.nodeName):new C.XML.QName(O.nodeName)},getAttributeNameKey:function(w){var R=this.retrieveAttributes();if(w<0||w>=R.length)throw new Error("Invalid attribute index ["+w+"].");var O=R[w];return C.XML.QName.key(O.namespaceURI,O.nodeName)},getAttributeValue:function(w){var R=this.retrieveAttributes();if(w<0||w>=R.length)throw new Error("Invalid attribute index ["+w+"].");return R[w].value},getAttributeValueNS:null,getAttributeValueNSViaElement:function(w,R){return this.retrieveElement().getAttributeNS(w,R)},getAttributeValueNSViaAttribute:function(w,R){var O=this.getAttributeNodeNS(w,R);return C.Util.Type.exists(O)?O.nodeValue:null},getAttributeNodeNS:null,getAttributeNodeNSViaElement:function(w,R){return this.retrieveElement().getAttributeNodeNS(w,R)},getAttributeNodeNSViaAttributes:function(w,R){for(var j,O=null,k=this.retrieveAttributes(),ee=0,$=k.length;ee<$;++ee)if((j=k[ee]).namespaceURI===w&&(j.prefix?j.prefix+":"+R:R)===j.nodeName){O=j;break}return O},getElement:function(){if(1===this.eventType||2===this.eventType)return this.eventType=2,this.node;throw new Error("Parser must be on START_ELEMENT or END_ELEMENT to return current element.")},pushNS:function(w){var R=this.pns.length-1,O=this.pns[R],k=C.Util.Type.isObject(O)?R:O;this.pns.push(k),R++;var j=!0;if(w.attributes){var X=w.attributes,ee=X.length;if(ee>0)for(var $=0;$<ee;$++){var re=X[$],ge=re.nodeName,Le=null,Ge=null,ft=!1;"xmlns"===ge?(Le="",Ge=re.value,ft=!0):"xmlns:"===ge.substring(0,6)&&(Le=ge.substring(6),Ge=re.value,ft=!0),ft&&(j&&(k=C.Util.Type.cloneObject(this.pns[k],{}),this.pns[R]=k,j=!1),k[Le]=Ge)}}},popNS:function(){this.pns.pop()},getNamespaceURI:function(w){var O=this.pns[this.pns.length-1];return(O=C.Util.Type.isObject(O)?O:this.pns[O])[w]},CLASS_NAME:"Jsonix.XML.Input"}),C.XML.Input.prototype.getAttributeValueNS=C.DOM.isDomImplementationAvailable()?C.XML.Input.prototype.getAttributeValueNSViaElement:C.XML.Input.prototype.getAttributeValueNSViaAttribute,C.XML.Input.prototype.getAttributeNodeNS=C.DOM.isDomImplementationAvailable()?C.XML.Input.prototype.getAttributeNodeNSViaElement:C.XML.Input.prototype.getAttributeNodeNSViaAttributes,C.XML.Input.START_ELEMENT=1,C.XML.Input.END_ELEMENT=2,C.XML.Input.PROCESSING_INSTRUCTION=3,C.XML.Input.CHARACTERS=4,C.XML.Input.COMMENT=5,C.XML.Input.SPACE=6,C.XML.Input.START_DOCUMENT=7,C.XML.Input.END_DOCUMENT=8,C.XML.Input.ENTITY_REFERENCE=9,C.XML.Input.ATTRIBUTE=10,C.XML.Input.DTD=11,C.XML.Input.CDATA=12,C.XML.Input.NAMESPACE=13,C.XML.Input.NOTATION_DECLARATION=14,C.XML.Input.ENTITY_DECLARATION=15,C.XML.Output=C.Class({document:null,documentElement:null,node:null,nodes:null,nsp:null,pns:null,namespacePrefixIndex:0,xmldom:null,initialize:function(w){this.xmldom=typeof ActiveXObject<"u"?new ActiveXObject("Microsoft.XMLDOM"):null,this.nodes=[];var R={"":""};R[C.XML.XMLNS_NS]=C.XML.XMLNS_P,C.Util.Type.isObject(w)&&C.Util.Type.isObject(w.namespacePrefixes)&&C.Util.Type.cloneObject(w.namespacePrefixes,R),this.nsp=[R];var O={"":""};O[C.XML.XMLNS_P]=C.XML.XMLNS_NS,this.pns=[O]},destroy:function(){this.xmldom=null},writeStartDocument:function(){var w=C.DOM.createDocument();return this.document=w,this.push(w)},writeEndDocument:function(){return this.pop()},writeStartElement:function(w){C.Util.Ensure.ensureObject(w);var R=w.localPart||w.lp||null;C.Util.Ensure.ensureString(R);var $,O=w.namespaceURI||w.ns||null,k=C.Util.Type.isString(O)?O:"",X=this.getPrefix(k,w.prefix||w.p),ee=X?X+":"+R:R;if(C.Util.Type.isFunction(this.document.createElementNS))$=this.document.createElementNS(k,ee);else{if(!this.xmldom)throw new Error("Could not create an element node.");$=this.xmldom.createNode(1,ee,k)}return this.peek().appendChild($),this.push($),this.declareNamespace(k,X),null===this.documentElement&&(this.documentElement=$,this.declareNamespaces()),$},writeEndElement:function(){return this.pop()},writeCharacters:function(w){var R;if(C.Util.Type.isFunction(this.document.createTextNode))R=this.document.createTextNode(w);else{if(!this.xmldom)throw new Error("Could not create a text node.");R=this.xmldom.createTextNode(w)}return this.peek().appendChild(R),R},writeCdata:function(w){for(var R=w.split("]]>"),O=0;O<R.length;O++)O+1<R.length&&(R[O]=R[O]+"]]",R[O+1]=">"+R[O+1]);for(var k,j=0;j<R.length;j++)k=this.writeCdataWithoutCdend(R[j]);return k},writeCdataWithoutCdend:function(w){var R;if(C.Util.Type.isFunction(this.document.createCDATASection))R=this.document.createCDATASection(w);else{if(!this.xmldom)throw new Error("Could not create a CDATA section node.");R=this.xmldom.createCDATASection(w)}return this.peek().appendChild(R),R},writeAttribute:function(w,R){C.Util.Ensure.ensureString(R),C.Util.Ensure.ensureObject(w);var O=w.localPart||w.lp||null;C.Util.Ensure.ensureString(O);var k=w.namespaceURI||w.ns||null,j=C.Util.Type.isString(k)?k:"",ee=this.getPrefix(j,w.prefix||w.p||null),$=ee?ee+":"+O:O,re=this.peek();if(""===j)re.setAttribute($,R);else{if(re.setAttributeNS)re.setAttributeNS(j,$,R);else if(this.xmldom){var ge=this.document.createNode(2,$,j);ge.nodeValue=R,re.setAttributeNode(ge)}else{if(j!==C.XML.XMLNS_NS)throw new Error("The [setAttributeNS] method is not implemented");re.setAttribute($,R)}this.declareNamespace(j,ee)}},writeNode:function(w){var R;return R=C.Util.Type.exists(this.document.importNode)?this.document.importNode(w,!0):w,this.peek().appendChild(R),R},push:function(w){return this.nodes.push(w),this.pushNS(),w},peek:function(){return this.nodes[this.nodes.length-1]},pop:function(){return this.popNS(),this.nodes.pop()},pushNS:function(){var w=this.nsp.length-1,R=this.pns.length-1,O=this.nsp[w],k=this.pns[R],j=C.Util.Type.isObject(O)?w:O,X=C.Util.Type.isObject(k)?R:k;this.nsp.push(j),this.pns.push(X)},popNS:function(){this.nsp.pop(),this.pns.pop()},declareNamespaces:function(){var O,R=this.nsp[this.nsp.length-1];for(O in R=C.Util.Type.isNumber(R)?this.nsp[R]:R)R.hasOwnProperty(O)&&this.declareNamespace(O,R[O])},declareNamespace:function(w,R){var j,O=this.pns.length-1,k=this.pns[O];C.Util.Type.isNumber(k)?(j=!0,k=this.pns[k]):j=!1,k[R]!==w&&(this.writeAttribute(""===R?{lp:C.XML.XMLNS_P}:{ns:C.XML.XMLNS_NS,lp:R,p:C.XML.XMLNS_P},w),j&&(k=C.Util.Type.cloneObject(k,{}),this.pns[O]=k),k[R]=w)},getPrefix:function(w,R){var j,O=this.nsp.length-1,k=this.nsp[O];return C.Util.Type.isNumber(k)?(j=!0,k=this.nsp[k]):j=!1,C.Util.Type.isString(R)?R===k[w]||(j&&(k=C.Util.Type.cloneObject(k,{}),this.nsp[O]=k),k[w]=R):C.Util.Type.exists(R=k[w])||(R="p"+this.namespacePrefixIndex++,j&&(k=C.Util.Type.cloneObject(k,{}),this.nsp[O]=k),k[w]=R),R},getNamespaceURI:function(w){var O=this.pns[this.pns.length-1];return(O=C.Util.Type.isObject(O)?O:this.pns[O])[w]},CLASS_NAME:"Jsonix.XML.Output"}),C.Mapping={},C.Mapping.Style=C.Class({marshaller:null,unmarshaller:null,module:null,elementInfo:null,classInfo:null,enumLeafInfo:null,anyAttributePropertyInfo:null,anyElementPropertyInfo:null,attributePropertyInfo:null,elementMapPropertyInfo:null,elementPropertyInfo:null,elementsPropertyInfo:null,elementRefPropertyInfo:null,elementRefsPropertyInfo:null,valuePropertyInfo:null,initialize:function(){},CLASS_NAME:"Jsonix.Mapping.Style"}),C.Mapping.Style.STYLES={},C.Mapping.Styled=C.Class({mappingStyle:null,initialize:function(w){if(C.Util.Type.exists(w))if(C.Util.Ensure.ensureObject(w),C.Util.Type.isString(w.mappingStyle)){var R=C.Mapping.Style.STYLES[w.mappingStyle];if(!R)throw new Error("Mapping style ["+w.mappingStyle+"] is not known.");this.mappingStyle=R}else C.Util.Type.isObject(w.mappingStyle)&&(this.mappingStyle=w.mappingStyle);this.mappingStyle||(this.mappingStyle=C.Mapping.Style.STYLES.standard)},CLASS_NAME:"Jsonix.Mapping.Styled"}),C.Binding={},C.Binding.Marshalls={},C.Binding.Marshalls.Element=C.Class({marshalElement:function(w,R,O,k){var j=this.convertToTypedNamedValue(w,R,O,k),X=j.typeInfo,ee=void 0;if(R.supportXsiType&&C.Util.Type.exists(j.value)){var $=R.getTypeInfoByValue(j.value);$&&$.typeName&&(ee=$)}var re=ee||X;if(!re)throw new Error("Element ["+j.name.key+"] is not known in this context, could not determine its type.");if(O.writeStartElement(j.name),ee&&X!==ee){var Le=C.Schema.XSD.QName.INSTANCE.print(ee.typeName,R,O,k);O.writeAttribute(C.Schema.XSI.TYPE_QNAME,Le)}C.Util.Type.exists(j.value)&&re.marshal(j.value,R,O,k),O.writeEndElement()},getTypeInfoByElementName:function(w,R,O){var k=R.getElementInfo(w,O);if(C.Util.Type.exists(k))return k.typeInfo}}),C.Binding.Marshalls.Element.AsElementRef=C.Class({convertToTypedNamedValue:function(w,R,O,k){C.Util.Ensure.ensureObject(w);var j=this.convertToNamedValue(w,R,O,k);return{name:j.name,value:j.value,typeInfo:this.getTypeInfoByElementName(j.name,R,k)}},convertToNamedValue:function(w,R,O,k){if(C.Util.Type.exists(w.name)&&!C.Util.Type.isUndefined(w.value))return{name:C.XML.QName.fromObjectOrString(w.name,R),value:C.Util.Type.exists(w.value)?w.value:null};for(var ee in w)if(w.hasOwnProperty(ee))return{name:C.XML.QName.fromObjectOrString(ee,R),value:w[ee]};throw new Error("Invalid element value ["+w+"]. Element values must either have {name:'myElementName', value: elementValue} or {myElementName:elementValue} structure.")}}),C.Binding.Unmarshalls={},C.Binding.Unmarshalls.WrapperElement=C.Class({mixed:!1,unmarshalWrapperElement:function(w,R,O,k){for(var j=R.next();j!==C.XML.Input.END_ELEMENT;){if(j===C.XML.Input.START_ELEMENT)this.unmarshalElement(w,R,O,k);else if(!this.mixed||j!==C.XML.Input.CHARACTERS&&j!==C.XML.Input.CDATA&&j!==C.XML.Input.ENTITY_REFERENCE){if(j!==C.XML.Input.SPACE&&j!==C.XML.Input.COMMENT&&j!==C.XML.Input.PROCESSING_INSTRUCTION)throw new Error("Illegal state: unexpected event type ["+j+"].")}else k(R.getText());j=R.next()}}}),C.Binding.Unmarshalls.Element=C.Class({allowTypedObject:!0,allowDom:!1,unmarshalElement:function(w,R,O,k){if(1!=R.eventType)throw new Error("Parser must be on START_ELEMENT to read next element.");var ee,j=this.getTypeInfoByInputElement(w,R,O),X=R.getName();if(this.allowTypedObject)if(C.Util.Type.exists(j)){var $=j.unmarshal(w,R,O);ee=this.convertFromTypedNamedValue({name:X,value:$,typeInfo:j},w,R,O)}else{if(!this.allowDom)throw new Error("Element ["+X.toString()+"] could not be unmarshalled as is not known in this context and the property does not allow DOM content.");ee=R.getElement()}else{if(!this.allowDom)throw new Error("Element ["+X.toString()+"] could not be unmarshalled as the property neither allows typed objects nor DOM as content. This is a sign of invalid mappings, do not use [allowTypedObject : false] and [allowDom : false] at the same time.");ee=R.getElement()}k(ee)},getTypeInfoByInputElement:function(w,R,O){var k=null;if(w.supportXsiType){var j=R.getAttributeValueNS(C.Schema.XSI.NAMESPACE_URI,C.Schema.XSI.TYPE);if(C.Util.StringUtils.isNotBlank(j)){var X=C.Schema.XSD.QName.INSTANCE.parse(j,w,R,O);k=w.getTypeInfoByTypeNameKey(X.key)}}var ee=R.getName();return k||this.getTypeInfoByElementName(ee,w,O)},getTypeInfoByElementName:function(w,R,O){var k=R.getElementInfo(w,O);if(C.Util.Type.exists(k))return k.typeInfo}}),C.Binding.Unmarshalls.Element.AsElementRef=C.Class({convertFromTypedNamedValue:function(w,R,O,k){return{name:w.name,value:w.value}}}),C.Binding.Unmarshalls.Element.AsSimplifiedElementRef=C.Class({convertFromTypedNamedValue:function(w,R,O,k){var X={};return X[w.name.toCanonicalString(R)]=w.value,X}}),C.Binding.Marshaller=C.Class(C.Binding.Marshalls.Element,C.Binding.Marshalls.Element.AsElementRef,{context:null,initialize:function(w){C.Util.Ensure.ensureObject(w),this.context=w},marshalString:function(w){var R=this.marshalDocument(w);return C.DOM.serialize(R)},marshalDocument:function(w){var R=new C.XML.Output({namespacePrefixes:this.context.namespacePrefixes}),O=R.writeStartDocument();return this.marshalElement(w,this.context,R,void 0),R.writeEndDocument(),O},CLASS_NAME:"Jsonix.Binding.Marshaller"}),C.Binding.Marshaller.Simplified=C.Class(C.Binding.Marshaller,{CLASS_NAME:"Jsonix.Binding.Marshaller.Simplified"}),C.Binding.Unmarshaller=C.Class(C.Binding.Unmarshalls.Element,C.Binding.Unmarshalls.Element.AsElementRef,{context:null,allowTypedObject:!0,allowDom:!1,initialize:function(w){C.Util.Ensure.ensureObject(w),this.context=w},unmarshalString:function(w){C.Util.Ensure.ensureString(w);var R=C.DOM.parse(w);return this.unmarshalDocument(R)},unmarshalURL:function(w,R,O){C.Util.Ensure.ensureString(w),C.Util.Ensure.ensureFunction(R),C.Util.Type.exists(O)&&C.Util.Ensure.ensureObject(O),that=this,C.DOM.load(w,function(k){R(that.unmarshalDocument(k))},O)},unmarshalFile:function(w,R,O){if(typeof Ee>"u")throw new Error("File unmarshalling is only available in environments which support file systems.");C.Util.Ensure.ensureString(w),C.Util.Ensure.ensureFunction(R),C.Util.Type.exists(O)&&C.Util.Ensure.ensureObject(O),that=this,Ee.readFile(w,O,function(j,X){if(j)throw j;var ee=X.toString(),$=C.DOM.parse(ee);R(that.unmarshalDocument($))})},unmarshalDocument:function(w,R){var O=new C.XML.Input(w),k=null;return O.nextTag(),this.unmarshalElement(this.context,O,R,function(X){k=X}),k},CLASS_NAME:"Jsonix.Binding.Unmarshaller"}),C.Binding.Unmarshaller.Simplified=C.Class(C.Binding.Unmarshaller,C.Binding.Unmarshalls.Element.AsSimplifiedElementRef,{CLASS_NAME:"Jsonix.Binding.Unmarshaller.Simplified"}),C.Model.TypeInfo=C.Class({module:null,name:null,baseTypeInfo:null,initialize:function(){},isBasedOn:function(w){for(var R=this;R;){if(w===R)return!0;R=R.baseTypeInfo}return!1},CLASS_NAME:"Jsonix.Model.TypeInfo"}),C.Model.ClassInfo=C.Class(C.Model.TypeInfo,C.Mapping.Styled,{name:null,localName:null,typeName:null,instanceFactory:null,properties:null,propertiesMap:null,structure:null,targetNamespace:"",defaultElementNamespaceURI:"",defaultAttributeNamespaceURI:"",built:!1,initialize:function(w,R){C.Model.TypeInfo.prototype.initialize.apply(this,[]),C.Mapping.Styled.prototype.initialize.apply(this,[R]),C.Util.Ensure.ensureObject(w);var O=w.name||w.n||void 0;C.Util.Ensure.ensureString(O),this.name=O;var k=w.localName||w.ln||null;this.localName=k,this.defaultElementNamespaceURI=w.defaultElementNamespaceURI||w.dens||w.targetNamespace||w.tns||"";var X=w.targetNamespace||w.tns||w.defaultElementNamespaceURI||w.dens||this.defaultElementNamespaceURI;this.targetNamespace=X,this.defaultAttributeNamespaceURI=w.defaultAttributeNamespaceURI||w.dans||"",this.baseTypeInfo=w.baseTypeInfo||w.bti||null;var re=w.instanceFactory||w.inF||void 0;C.Util.Type.exists(re)&&(C.Util.Ensure.ensureFunction(re),this.instanceFactory=re);var ge=w.typeName||w.tn||void 0;C.Util.Type.exists(ge)?this.typeName=C.Util.Type.isString(ge)?new C.XML.QName(this.targetNamespace,ge):C.XML.QName.fromObject(ge):C.Util.Type.exists(k)&&(this.typeName=new C.XML.QName(X,k)),this.properties=[],this.propertiesMap={};var Le=w.propertyInfos||w.ps||[];C.Util.Ensure.ensureArray(Le);for(var Ge=0;Ge<Le.length;Ge++)this.p(Le[Ge])},getPropertyInfoByName:function(w){return this.propertiesMap[w]},destroy:function(){},build:function(w){if(!this.built){this.baseTypeInfo=w.resolveTypeInfo(this.baseTypeInfo,this.module),C.Util.Type.exists(this.baseTypeInfo)&&this.baseTypeInfo.build(w);for(var R=0;R<this.properties.length;R++)this.properties[R].build(w,this.module);var k={elements:null,attributes:{},anyAttribute:null,value:null,any:null};this.buildStructure(w,k),this.structure=k}},buildStructure:function(w,R){C.Util.Type.exists(this.baseTypeInfo)&&this.baseTypeInfo.buildStructure(w,R);for(var O=0;O<this.properties.length;O++)this.properties[O].buildStructure(w,R)},unmarshal:function(w,R){var O;if(this.build(w),O=this.instanceFactory?new this.instanceFactory:{TYPE_NAME:this.name},1!==R.eventType)throw new Error("Parser must be on START_ELEMENT to read a class info.");if(C.Util.Type.exists(this.structure.attributes)){var k=R.getAttributeCount();if(0!==k)for(var j=0;j<k;j++){var X=R.getAttributeNameKey(j);if(C.Util.Type.exists(this.structure.attributes[X])){var ee=R.getAttributeValue(j);C.Util.Type.isString(ee)&&this.unmarshalPropertyValue(w,R,this.structure.attributes[X],O,ee)}}}if(C.Util.Type.exists(this.structure.anyAttribute)&&this.unmarshalProperty(w,R,this.structure.anyAttribute,O),C.Util.Type.exists(this.structure.elements))for(var ge=R.next();ge!==C.XML.Input.END_ELEMENT;){if(ge===C.XML.Input.START_ELEMENT){var Le=R.getNameKey();C.Util.Type.exists(this.structure.elements[Le])?this.unmarshalProperty(w,R,this.structure.elements[Le],O):C.Util.Type.exists(this.structure.any)?this.unmarshalProperty(w,R,this.structure.any,O):ge=R.skipElement()}else if(ge===C.XML.Input.CHARACTERS||ge===C.XML.Input.CDATA||ge===C.XML.Input.ENTITY_REFERENCE)C.Util.Type.exists(this.structure.mixed)&&this.unmarshalProperty(w,R,this.structure.mixed,O);else if(ge!==C.XML.Input.SPACE&&ge!==C.XML.Input.COMMENT&&ge!==C.XML.Input.PROCESSING_INSTRUCTION)throw new Error("Illegal state: unexpected event type ["+ge+"].");ge=R.next()}else C.Util.Type.exists(this.structure.value)?this.unmarshalProperty(w,R,this.structure.value,O):R.nextTag();if(2!==R.eventType)throw new Error("Illegal state: must be END_ELEMENT.");return O},unmarshalProperty:function(w,R,O,k){var j=O.unmarshal(w,R,this);O.setProperty(k,j)},unmarshalPropertyValue:function(w,R,O,k,j){var X=O.unmarshalValue(j,w,R,this);O.setProperty(k,X)},marshal:function(w,R,O,k){if(this.isMarshallable(w,R,k)){C.Util.Type.exists(this.baseTypeInfo)&&this.baseTypeInfo.marshal(w,R,O);for(var j=0;j<this.properties.length;j++){var X=this.properties[j],ee=w[X.name];C.Util.Type.exists(ee)&&X.marshal(ee,R,O,this)}}else if(this.structure.value)this.structure.value.marshal(w,R,O,this);else{if(1!==this.properties.length)throw new Error("The passed value ["+w+"] is not an object and there is no single suitable property to marshal it.");this.properties[0].marshal(w,R,O,this)}},isMarshallable:function(w,R,O){return this.isInstance(w,R,O)||C.Util.Type.isObject(w)&&!C.Util.Type.isArray(w)},isInstance:function(w,R,O){return this.instanceFactory?w instanceof this.instanceFactory:C.Util.Type.isObject(w)&&C.Util.Type.isString(w.TYPE_NAME)&&w.TYPE_NAME===this.name},b:function(w){return C.Util.Ensure.ensureObject(w),this.baseTypeInfo=w,this},ps:function(){return this},p:function(w){if(C.Util.Ensure.ensureObject(w),w instanceof C.Model.PropertyInfo)this.addProperty(w);else{var R=(w=C.Util.Type.cloneObject(w)).type||w.t||"element";if(!C.Util.Type.isFunction(this.propertyInfoCreators[R]))throw new Error("Unknown property info type ["+R+"].");this.propertyInfoCreators[R].call(this,w)}},aa:function(w){return this.addDefaultNamespaces(w),this.addProperty(new this.mappingStyle.anyAttributePropertyInfo(w,{mappingStyle:this.mappingStyle}))},ae:function(w){return this.addDefaultNamespaces(w),this.addProperty(new this.mappingStyle.anyElementPropertyInfo(w,{mappingStyle:this.mappingStyle}))},a:function(w){return this.addDefaultNamespaces(w),this.addProperty(new this.mappingStyle.attributePropertyInfo(w,{mappingStyle:this.mappingStyle}))},em:function(w){return this.addDefaultNamespaces(w),this.addProperty(new this.mappingStyle.elementMapPropertyInfo(w,{mappingStyle:this.mappingStyle}))},e:function(w){return this.addDefaultNamespaces(w),this.addProperty(new this.mappingStyle.elementPropertyInfo(w,{mappingStyle:this.mappingStyle}))},es:function(w){return this.addDefaultNamespaces(w),this.addProperty(new this.mappingStyle.elementsPropertyInfo(w,{mappingStyle:this.mappingStyle}))},er:function(w){return this.addDefaultNamespaces(w),this.addProperty(new this.mappingStyle.elementRefPropertyInfo(w,{mappingStyle:this.mappingStyle}))},ers:function(w){return this.addDefaultNamespaces(w),this.addProperty(new this.mappingStyle.elementRefsPropertyInfo(w,{mappingStyle:this.mappingStyle}))},v:function(w){return this.addDefaultNamespaces(w),this.addProperty(new this.mappingStyle.valuePropertyInfo(w,{mappingStyle:this.mappingStyle}))},addDefaultNamespaces:function(w){C.Util.Type.isObject(w)&&(C.Util.Type.isString(w.defaultElementNamespaceURI)||(w.defaultElementNamespaceURI=this.defaultElementNamespaceURI),C.Util.Type.isString(w.defaultAttributeNamespaceURI)||(w.defaultAttributeNamespaceURI=this.defaultAttributeNamespaceURI))},addProperty:function(w){return this.properties.push(w),this.propertiesMap[w.name]=w,this},CLASS_NAME:"Jsonix.Model.ClassInfo"}),C.Model.ClassInfo.prototype.propertyInfoCreators={aa:C.Model.ClassInfo.prototype.aa,anyAttribute:C.Model.ClassInfo.prototype.aa,ae:C.Model.ClassInfo.prototype.ae,anyElement:C.Model.ClassInfo.prototype.ae,a:C.Model.ClassInfo.prototype.a,attribute:C.Model.ClassInfo.prototype.a,em:C.Model.ClassInfo.prototype.em,elementMap:C.Model.ClassInfo.prototype.em,e:C.Model.ClassInfo.prototype.e,element:C.Model.ClassInfo.prototype.e,es:C.Model.ClassInfo.prototype.es,elements:C.Model.ClassInfo.prototype.es,er:C.Model.ClassInfo.prototype.er,elementRef:C.Model.ClassInfo.prototype.er,ers:C.Model.ClassInfo.prototype.ers,elementRefs:C.Model.ClassInfo.prototype.ers,v:C.Model.ClassInfo.prototype.v,value:C.Model.ClassInfo.prototype.v},C.Model.EnumLeafInfo=C.Class(C.Model.TypeInfo,{name:null,baseTypeInfo:"String",entries:null,keys:null,values:null,built:!1,initialize:function(w){C.Model.TypeInfo.prototype.initialize.apply(this,[]),C.Util.Ensure.ensureObject(w);var R=w.name||w.n||void 0;C.Util.Ensure.ensureString(R),this.name=R,this.baseTypeInfo=w.baseTypeInfo||w.bti||"String";var k=w.values||w.vs||void 0;if(C.Util.Ensure.ensureExists(k),!C.Util.Type.isObject(k)&&!C.Util.Type.isArray(k))throw new Error("Enum values must be either an array or an object.");this.entries=k},build:function(w){if(!this.built){this.baseTypeInfo=w.resolveTypeInfo(this.baseTypeInfo,this.module),this.baseTypeInfo.build(w);var ee,$,R=this.entries,O={},k=[],j=[],X=0;if(C.Util.Type.isArray(R))for(X=0;X<R.length;X++){if(C.Util.Type.isString($=R[X])){if(ee=$,!C.Util.Type.isFunction(this.baseTypeInfo.parse))throw new Error("Enum value is provided as string but the base type ["+this.baseTypeInfo.name+"] of the enum info ["+this.name+"] does not implement the parse method.");$=this.baseTypeInfo.parse($,w,null,this)}else{if(!this.baseTypeInfo.isInstance($,w,this))throw new Error("Enum value ["+$+"] is not an instance of the enum base type ["+this.baseTypeInfo.name+"].");if(!C.Util.Type.isFunction(this.baseTypeInfo.print))throw new Error("The base type ["+this.baseTypeInfo.name+"] of the enum info ["+this.name+"] does not implement the print method, unable to produce the enum key as string.");ee=this.baseTypeInfo.print($,w,null,this)}O[ee]=$,k[X]=ee,j[X]=$}else{if(!C.Util.Type.isObject(R))throw new Error("Enum values must be either an array or an object.");for(ee in R)if(R.hasOwnProperty(ee)){if(C.Util.Type.isString($=R[ee])){if(!C.Util.Type.isFunction(this.baseTypeInfo.parse))throw new Error("Enum value is provided as string but the base type ["+this.baseTypeInfo.name+"] of the enum info ["+this.name+"] does not implement the parse method.");$=this.baseTypeInfo.parse($,w,null,this)}else if(!this.baseTypeInfo.isInstance($,w,this))throw new Error("Enum value ["+$+"] is not an instance of the enum base type ["+this.baseTypeInfo.name+"].");O[ee]=$,k[X]=ee,j[X]=$,X++}}this.entries=O,this.keys=k,this.values=j,this.built=!0}},unmarshal:function(w,R,O){var k=R.getElementText();return this.parse(k,w,R,O)},marshal:function(w,R,O,k){C.Util.Type.exists(w)&&O.writeCharacters(this.reprint(w,R,O,k))},reprint:function(w,R,O,k){return C.Util.Type.isString(w)&&!this.isInstance(w,R,k)?this.print(this.parse(w,R,null,k),R,O,k):this.print(w,R,O,k)},print:function(w,R,O,k){for(var j=0;j<this.values.length;j++)if(this.values[j]===w)return this.keys[j];throw new Error("Value ["+w+"] is invalid for the enum type ["+this.name+"].")},parse:function(w,R,O,k){if(C.Util.Ensure.ensureString(w),this.entries.hasOwnProperty(w))return this.entries[w];throw new Error("Value ["+w+"] is invalid for the enum type ["+this.name+"].")},isInstance:function(w,R,O){for(var k=0;k<this.values.length;k++)if(this.values[k]===w)return!0;return!1},CLASS_NAME:"Jsonix.Model.EnumLeafInfo"}),C.Model.ElementInfo=C.Class({module:null,elementName:null,typeInfo:null,substitutionHead:null,scope:null,built:!1,initialize:function(w){C.Util.Ensure.ensureObject(w),this.defaultElementNamespaceURI=w.defaultElementNamespaceURI||w.dens||"";var O=w.elementName||w.en||void 0;C.Util.Type.isObject(O)?this.elementName=C.XML.QName.fromObject(O):(C.Util.Ensure.ensureString(O),this.elementName=new C.XML.QName(this.defaultElementNamespaceURI,O)),this.typeInfo=w.typeInfo||w.ti||"String",this.substitutionHead=w.substitutionHead||w.sh||null,this.scope=w.scope||w.sc||null},build:function(w){this.built||(this.typeInfo=w.resolveTypeInfo(this.typeInfo,this.module),this.scope=w.resolveTypeInfo(this.scope,this.module),this.built=!0)},CLASS_NAME:"Jsonix.Model.ElementInfo"}),C.Model.PropertyInfo=C.Class({name:null,collection:!1,targetNamespace:"",defaultElementNamespaceURI:"",defaultAttributeNamespaceURI:"",built:!1,initialize:function(w){C.Util.Ensure.ensureObject(w);var $,re,R=w.name||w.n||void 0;C.Util.Ensure.ensureString(R),this.name=R,this.defaultElementNamespaceURI=w.defaultElementNamespaceURI||w.dens||w.targetNamespace||w.tns||"",this.targetNamespace=w.targetNamespace||w.tns||w.defaultElementNamespaceURI||w.dens||this.defaultElementNamespaceURI,this.defaultAttributeNamespaceURI=w.defaultAttributeNamespaceURI||w.dans||"",this.collection=w.collection||w.col||!1,this.required=w.required||w.rq||!1,this.collection&&($=C.Util.Type.isNumber(w.minOccurs)?w.minOccurs:C.Util.Type.isNumber(w.mno)?w.mno:1,this.minOccurs=$,re=C.Util.Type.isNumber(w.maxOccurs)?w.maxOccurs:C.Util.Type.isNumber(w.mxo)?w.mxo:null,this.maxOccurs=re)},build:function(w,R){this.built||(this.doBuild(w,R),this.built=!0)},doBuild:function(w,R){throw new Error("Abstract method [doBuild].")},buildStructure:function(w,R){throw new Error("Abstract method [buildStructure].")},setProperty:function(w,R){if(C.Util.Type.exists(R))if(this.collection){C.Util.Ensure.ensureArray(R,"Collection property requires an array value."),C.Util.Type.exists(w[this.name])||(w[this.name]=[]);for(var O=0;O<R.length;O++)w[this.name].push(R[O])}else w[this.name]=R},CLASS_NAME:"Jsonix.Model.PropertyInfo"}),C.Model.AnyAttributePropertyInfo=C.Class(C.Model.PropertyInfo,{initialize:function(w){C.Util.Ensure.ensureObject(w),C.Model.PropertyInfo.prototype.initialize.apply(this,[w])},unmarshal:function(w,R,O){var k=R.getAttributeCount();if(0===k)return null;for(var j={},X=0;X<k;X++){var ee=R.getAttributeValue(X);C.Util.Type.isString(ee)&&(j[this.convertFromAttributeName(R.getAttributeName(X),w,R,O)]=ee)}return j},marshal:function(w,R,O,k){if(C.Util.Type.isObject(w))for(var j in w)if(w.hasOwnProperty(j)){var X=w[j];if(C.Util.Type.isString(X)){var ee=this.convertToAttributeName(j,R,O,k);O.writeAttribute(ee,X)}}},convertFromAttributeName:function(w,R,O,k){return w.key},convertToAttributeName:function(w,R,O,k){return C.XML.QName.fromObjectOrString(w,R)},doBuild:function(w,R){},buildStructure:function(w,R){C.Util.Ensure.ensureObject(R),R.anyAttribute=this},CLASS_NAME:"Jsonix.Model.AnyAttributePropertyInfo"}),C.Model.AnyAttributePropertyInfo.Simplified=C.Class(C.Model.AnyAttributePropertyInfo,{convertFromAttributeName:function(w,R,O,k){return w.toCanonicalString(R)}}),C.Model.SingleTypePropertyInfo=C.Class(C.Model.PropertyInfo,{typeInfo:"String",initialize:function(w){C.Util.Ensure.ensureObject(w),C.Model.PropertyInfo.prototype.initialize.apply(this,[w]),this.typeInfo=w.typeInfo||w.ti||"String"},doBuild:function(w,R){this.typeInfo=w.resolveTypeInfo(this.typeInfo,R)},unmarshalValue:function(w,R,O,k){return this.parse(w,R,O,k)},parse:function(w,R,O,k){return this.typeInfo.parse(w,R,O,k)},print:function(w,R,O,k){return this.typeInfo.reprint(w,R,O,k)},CLASS_NAME:"Jsonix.Model.SingleTypePropertyInfo"}),C.Model.AttributePropertyInfo=C.Class(C.Model.SingleTypePropertyInfo,{attributeName:null,initialize:function(w){C.Util.Ensure.ensureObject(w),C.Model.SingleTypePropertyInfo.prototype.initialize.apply(this,[w]);var R=w.attributeName||w.an||void 0;this.attributeName=C.Util.Type.isObject(R)?C.XML.QName.fromObject(R):C.Util.Type.isString(R)?new C.XML.QName(this.defaultAttributeNamespaceURI,R):new C.XML.QName(this.defaultAttributeNamespaceURI,this.name)},unmarshal:function(w,R,O){for(var k=R.getAttributeCount(),j=null,X=0;X<k;X++){var ee=R.getAttributeNameKey(X);if(this.attributeName.key===ee){var $=R.getAttributeValue(X);C.Util.Type.isString($)&&(j=this.unmarshalValue($,w,R,O))}}return j},marshal:function(w,R,O,k){C.Util.Type.exists(w)&&O.writeAttribute(this.attributeName,this.print(w,R,O,k))},buildStructure:function(w,R){C.Util.Ensure.ensureObject(R),C.Util.Ensure.ensureObject(R.attributes),R.attributes[this.attributeName.key]=this},CLASS_NAME:"Jsonix.Model.AttributePropertyInfo"}),C.Model.ValuePropertyInfo=C.Class(C.Model.SingleTypePropertyInfo,{initialize:function(w){C.Util.Ensure.ensureObject(w),C.Model.SingleTypePropertyInfo.prototype.initialize.apply(this,[w]),this.asCDATA=w.asCDATA||w.cdata||!1},unmarshal:function(w,R,O){var k=R.getElementText();return this.unmarshalValue(k,w,R,O)},marshal:function(w,R,O,k){!C.Util.Type.exists(w)||(this.asCDATA?O.writeCdata(this.print(w,R,O,k)):O.writeCharacters(this.print(w,R,O,k)))},buildStructure:function(w,R){if(C.Util.Ensure.ensureObject(R),C.Util.Type.exists(R.elements))throw new Error("The structure already defines element mappings, it cannot define a value property.");R.value=this},CLASS_NAME:"Jsonix.Model.ValuePropertyInfo"}),C.Model.AbstractElementsPropertyInfo=C.Class(C.Binding.Unmarshalls.Element,C.Binding.Unmarshalls.WrapperElement,C.Model.PropertyInfo,{wrapperElementName:null,allowDom:!1,allowTypedObject:!0,mixed:!1,initialize:function(w){C.Util.Ensure.ensureObject(w),C.Model.PropertyInfo.prototype.initialize.apply(this,[w]);var R=w.wrapperElementName||w.wen||void 0;this.wrapperElementName=C.Util.Type.isObject(R)?C.XML.QName.fromObject(R):C.Util.Type.isString(R)?new C.XML.QName(this.defaultElementNamespaceURI,R):null},unmarshal:function(w,R,O){var k=null,j=this,X=function(ee){if(j.collection)null===k&&(k=[]),k.push(ee);else{if(null!==k)throw new Error("Value already set.");k=ee}};return C.Util.Type.exists(this.wrapperElementName)?this.unmarshalWrapperElement(w,R,O,X):this.unmarshalElement(w,R,O,X),k},marshal:function(w,R,O,k){if(C.Util.Type.exists(w)){if(C.Util.Type.exists(this.wrapperElementName)&&O.writeStartElement(this.wrapperElementName),this.collection){C.Util.Ensure.ensureArray(w);for(var j=0;j<w.length;j++)this.marshalElement(w[j],R,O,k)}else this.marshalElement(w,R,O,k);C.Util.Type.exists(this.wrapperElementName)&&O.writeEndElement()}},convertFromTypedNamedValue:function(w,R,O,k){return w.value},buildStructure:function(w,R){if(C.Util.Ensure.ensureObject(R),C.Util.Type.exists(R.value))throw new Error("The structure already defines a value property.");C.Util.Type.exists(R.elements)||(R.elements={}),C.Util.Type.exists(this.wrapperElementName)?R.elements[this.wrapperElementName.key]=this:this.buildStructureElements(w,R)},buildStructureElements:function(w,R){throw new Error("Abstract method [buildStructureElements].")},CLASS_NAME:"Jsonix.Model.AbstractElementsPropertyInfo"}),C.Model.ElementPropertyInfo=C.Class(C.Model.AbstractElementsPropertyInfo,C.Binding.Marshalls.Element,{typeInfo:"String",elementName:null,initialize:function(w){C.Util.Ensure.ensureObject(w),C.Model.AbstractElementsPropertyInfo.prototype.initialize.apply(this,[w]);var R=w.typeInfo||w.ti||"String";C.Util.Type.isObject(R)||C.Util.Ensure.ensureString(R),this.typeInfo=R;var O=w.elementName||w.en||void 0;this.elementName=C.Util.Type.isObject(O)?C.XML.QName.fromObject(O):C.Util.Type.isString(O)?new C.XML.QName(this.defaultElementNamespaceURI,O):new C.XML.QName(this.defaultElementNamespaceURI,this.name)},getTypeInfoByElementName:function(w,R,O){return this.typeInfo},convertToTypedNamedValue:function(w,R,O,k){return{name:this.elementName,value:w,typeInfo:this.typeInfo}},doBuild:function(w,R){this.typeInfo=w.resolveTypeInfo(this.typeInfo,R)},buildStructureElements:function(w,R){R.elements[this.elementName.key]=this},CLASS_NAME:"Jsonix.Model.ElementPropertyInfo"}),C.Model.ElementsPropertyInfo=C.Class(C.Model.AbstractElementsPropertyInfo,C.Binding.Marshalls.Element,{elementTypeInfos:null,elementTypeInfosMap:null,initialize:function(w){C.Util.Ensure.ensureObject(w),C.Model.AbstractElementsPropertyInfo.prototype.initialize.apply(this,[w]);var R=w.elementTypeInfos||w.etis||[];C.Util.Ensure.ensureArray(R),this.elementTypeInfos=[];for(var O=0;O<R.length;O++)this.elementTypeInfos[O]=C.Util.Type.cloneObject(R[O])},getTypeInfoByElementName:function(w,R,O){return this.elementTypeInfosMap[w.key]},convertToTypedNamedValue:function(w,R,O,k){for(var j=0;j<this.elementTypeInfos.length;j++){var X=this.elementTypeInfos[j],ee=X.typeInfo;if(ee.isInstance(w,R,k))return{name:X.elementName,value:w,typeInfo:ee}}if(R.supportXsiType){var re=R.getTypeInfoByValue(w);if(re&&re.typeName)for(var ge=0;ge<this.elementTypeInfos.length;ge++){var Le=this.elementTypeInfos[ge],Ge=Le.typeInfo;if(re.isBasedOn(Ge))return{name:Le.elementName,value:w,typeInfo:Ge}}}throw new Error("Could not find an element with type info supporting the value ["+w+"].")},doBuild:function(w,R){this.elementTypeInfosMap={};for(var j=0;j<this.elementTypeInfos.length;j++){var X=this.elementTypeInfos[j];C.Util.Ensure.ensureObject(X),X.typeInfo=w.resolveTypeInfo(X.typeInfo||X.ti||"String",R),X.elementName=C.XML.QName.fromObjectOrString(X.elementName||X.en||void 0,w,this.defaultElementNamespaceURI),this.elementTypeInfosMap[X.elementName.key]=X.typeInfo}},buildStructureElements:function(w,R){for(var O=0;O<this.elementTypeInfos.length;O++)R.elements[this.elementTypeInfos[O].elementName.key]=this},CLASS_NAME:"Jsonix.Model.ElementsPropertyInfo"}),C.Model.ElementMapPropertyInfo=C.Class(C.Model.AbstractElementsPropertyInfo,{elementName:null,key:null,value:null,entryTypeInfo:null,initialize:function(w){C.Util.Ensure.ensureObject(w),C.Model.AbstractElementsPropertyInfo.prototype.initialize.apply(this,[w]);var R=w.key||w.k||void 0;C.Util.Ensure.ensureObject(R);var O=w.value||w.v||void 0;C.Util.Ensure.ensureObject(O);var k=w.elementName||w.en||void 0;this.elementName=C.Util.Type.isObject(k)?C.XML.QName.fromObject(k):C.Util.Type.isString(k)?new C.XML.QName(this.defaultElementNamespaceURI,k):new C.XML.QName(this.defaultElementNamespaceURI,this.name),this.entryTypeInfo=new C.Model.ClassInfo({name:"Map<"+R.name+","+O.name+">",propertyInfos:[R,O]})},unmarshal:function(w,R,O){var k=null,j=this,X=function(ee){if(C.Util.Type.exists(ee))for(var $ in C.Util.Ensure.ensureObject(ee,"Map property requires an object."),C.Util.Type.exists(k)||(k={}),ee)if(ee.hasOwnProperty($)){var re=ee[$];if(j.collection)C.Util.Type.exists(k[$])||(k[$]=[]),k[$].push(re);else{if(C.Util.Type.exists(k[$]))throw new Error("Value was already set.");k[$]=re}}};return C.Util.Type.exists(this.wrapperElementName)?this.unmarshalWrapperElement(w,R,O,X):this.unmarshalElement(w,R,O,X),k},getTypeInfoByInputElement:function(w,R,O){return this.entryTypeInfo},convertFromTypedNamedValue:function(w,R,O,k){var j=w.value,X={};return C.Util.Type.isString(j[this.key.name])&&(X[j[this.key.name]]=j[this.value.name]),X},marshal:function(w,R,O,k){!C.Util.Type.exists(w)||(C.Util.Type.exists(this.wrapperElementName)&&O.writeStartElement(this.wrapperElementName),this.marshalElement(w,R,O,k),C.Util.Type.exists(this.wrapperElementName)&&O.writeEndElement())},marshalElement:function(w,R,O,k){if(w)for(var j in w)if(w.hasOwnProperty(j)){var X=w[j];if(this.collection)for(var $=0;$<X.length;$++){var re={};re[this.key.name]=j,re[this.value.name]=X[$],O.writeStartElement(this.elementName),this.entryTypeInfo.marshal(re,R,O,k),O.writeEndElement()}else{var ee={};ee[this.key.name]=j,ee[this.value.name]=X,O.writeStartElement(this.elementName),this.entryTypeInfo.marshal(ee,R,O,k),O.writeEndElement()}}},doBuild:function(w,R){this.entryTypeInfo.build(w,R),this.key=this.entryTypeInfo.properties[0],this.value=this.entryTypeInfo.properties[1]},buildStructureElements:function(w,R){R.elements[this.elementName.key]=this},setProperty:function(w,R){if(C.Util.Type.exists(R)){C.Util.Ensure.ensureObject(R,"Map property requires an object."),C.Util.Type.exists(w[this.name])||(w[this.name]={});var O=w[this.name];for(var k in R)if(R.hasOwnProperty(k)){var j=R[k];if(this.collection){C.Util.Type.exists(O[k])||(O[k]=[]);for(var X=0;X<j.length;X++)O[k].push(j[X])}else O[k]=j}}},CLASS_NAME:"Jsonix.Model.ElementMapPropertyInfo"}),C.Model.AbstractElementRefsPropertyInfo=C.Class(C.Binding.Marshalls.Element,C.Binding.Marshalls.Element.AsElementRef,C.Binding.Unmarshalls.Element,C.Binding.Unmarshalls.WrapperElement,C.Binding.Unmarshalls.Element.AsElementRef,C.Model.PropertyInfo,{wrapperElementName:null,allowDom:!0,allowTypedObject:!0,mixed:!0,initialize:function(w){C.Util.Ensure.ensureObject(w,"Mapping must be an object."),C.Model.PropertyInfo.prototype.initialize.apply(this,[w]);var R=w.wrapperElementName||w.wen||void 0;this.wrapperElementName=C.Util.Type.isObject(R)?C.XML.QName.fromObject(R):C.Util.Type.isString(R)?new C.XML.QName(this.defaultElementNamespaceURI,R):null;var O=C.Util.Type.defaultValue(w.allowDom,w.dom,!0),k=C.Util.Type.defaultValue(w.allowTypedObject,w.typed,!0),j=C.Util.Type.defaultValue(w.mixed,w.mx,!0);this.allowDom=O,this.allowTypedObject=k,this.mixed=j},unmarshal:function(w,R,O){var k=null,j=this,X=function($){if(j.collection)null===k&&(k=[]),k.push($);else{if(null!==k)throw new Error("Value already set.");k=$}},ee=R.eventType;if(ee===C.XML.Input.START_ELEMENT)C.Util.Type.exists(this.wrapperElementName)?this.unmarshalWrapperElement(w,R,O,X):this.unmarshalElement(w,R,O,X);else if(!this.mixed||ee!==C.XML.Input.CHARACTERS&&ee!==C.XML.Input.CDATA&&ee!==C.XML.Input.ENTITY_REFERENCE){if(ee!==C.XML.Input.SPACE&&ee!==C.XML.Input.COMMENT&&ee!==C.XML.Input.PROCESSING_INSTRUCTION)throw new Error("Illegal state: unexpected event type ["+ee+"].")}else X(R.getText());return k},marshal:function(w,R,O,k){if(C.Util.Type.exists(w)){if(C.Util.Type.exists(this.wrapperElementName)&&O.writeStartElement(this.wrapperElementName),this.collection){C.Util.Ensure.ensureArray(w,"Collection property requires an array value.");for(var j=0;j<w.length;j++)this.marshalItem(w[j],R,O,k)}else this.marshalItem(w,R,O,k);C.Util.Type.exists(this.wrapperElementName)&&O.writeEndElement()}},marshalItem:function(w,R,O,k){if(C.Util.Type.isString(w)){if(!this.mixed)throw new Error("Property is not mixed, can't handle string values.");O.writeCharacters(w)}else if(this.allowDom&&C.Util.Type.exists(w.nodeType))O.writeNode(w);else{if(!C.Util.Type.isObject(w))throw this.mixed?new Error("Unsupported content type, either objects or strings are supported."):new Error("Unsupported content type, only objects are supported.");this.marshalElement(w,R,O,k)}},getTypeInfoByElementName:function(w,R,O){var k=this.getPropertyElementTypeInfo(w,R);if(C.Util.Type.exists(k))return k.typeInfo;var j=R.getElementInfo(w,O);return C.Util.Type.exists(j)?j.typeInfo:void 0},getPropertyElementTypeInfo:function(w,R){throw new Error("Abstract method [getPropertyElementTypeInfo].")},buildStructure:function(w,R){if(C.Util.Ensure.ensureObject(R),C.Util.Type.exists(R.value))throw new Error("The structure already defines a value property.");C.Util.Type.exists(R.elements)||(R.elements={}),C.Util.Type.exists(this.wrapperElementName)?R.elements[this.wrapperElementName.key]=this:this.buildStructureElements(w,R),(this.allowDom||this.allowTypedObject)&&(R.any=this),this.mixed&&!C.Util.Type.exists(this.wrapperElementName)&&(R.mixed=this)},buildStructureElements:function(w,R){throw new Error("Abstract method [buildStructureElements].")},buildStructureElementTypeInfos:function(w,R,O){R.elements[O.elementName.key]=this;var k=w.getSubstitutionMembers(O.elementName);if(C.Util.Type.isArray(k))for(var j=0;j<k.length;j++)this.buildStructureElementTypeInfos(w,R,k[j])},CLASS_NAME:"Jsonix.Model.AbstractElementRefsPropertyInfo"}),C.Model.ElementRefPropertyInfo=C.Class(C.Model.AbstractElementRefsPropertyInfo,{typeInfo:"String",elementName:null,initialize:function(w){C.Util.Ensure.ensureObject(w),C.Model.AbstractElementRefsPropertyInfo.prototype.initialize.apply(this,[w]);var R=w.typeInfo||w.ti||"String";C.Util.Type.isObject(R)||C.Util.Ensure.ensureString(R),this.typeInfo=R;var O=w.elementName||w.en||void 0;this.elementName=C.Util.Type.isObject(O)?C.XML.QName.fromObject(O):C.Util.Type.isString(O)?new C.XML.QName(this.defaultElementNamespaceURI,O):new C.XML.QName(this.defaultElementNamespaceURI,this.name)},getPropertyElementTypeInfo:function(w,R){return C.XML.QName.fromObjectOrString(w,R).key===this.elementName.key?this:null},doBuild:function(w,R){this.typeInfo=w.resolveTypeInfo(this.typeInfo,R)},buildStructureElements:function(w,R){this.buildStructureElementTypeInfos(w,R,this)},CLASS_NAME:"Jsonix.Model.ElementRefPropertyInfo"}),C.Model.ElementRefPropertyInfo.Simplified=C.Class(C.Model.ElementRefPropertyInfo,C.Binding.Unmarshalls.Element.AsSimplifiedElementRef,{CLASS_NAME:"Jsonix.Model.ElementRefPropertyInfo.Simplified"}),C.Model.ElementRefsPropertyInfo=C.Class(C.Model.AbstractElementRefsPropertyInfo,{elementTypeInfos:null,elementTypeInfosMap:null,initialize:function(w){C.Util.Ensure.ensureObject(w),C.Model.AbstractElementRefsPropertyInfo.prototype.initialize.apply(this,[w]);var R=w.elementTypeInfos||w.etis||[];C.Util.Ensure.ensureArray(R),this.elementTypeInfos=[];for(var O=0;O<R.length;O++)this.elementTypeInfos[O]=C.Util.Type.cloneObject(R[O])},getPropertyElementTypeInfo:function(w,R){var O=C.XML.QName.fromObjectOrString(w,R),k=this.elementTypeInfosMap[O.key];return C.Util.Type.exists(k)?{elementName:O,typeInfo:k}:null},doBuild:function(w,R){this.elementTypeInfosMap={};for(var j=0;j<this.elementTypeInfos.length;j++){var X=this.elementTypeInfos[j];C.Util.Ensure.ensureObject(X),X.typeInfo=w.resolveTypeInfo(X.typeInfo||X.ti||"String",R),X.elementName=C.XML.QName.fromObjectOrString(X.elementName||X.en||void 0,w,this.defaultElementNamespaceURI),this.elementTypeInfosMap[X.elementName.key]=X.typeInfo}},buildStructureElements:function(w,R){for(var O=0;O<this.elementTypeInfos.length;O++)this.buildStructureElementTypeInfos(w,R,this.elementTypeInfos[O])},CLASS_NAME:"Jsonix.Model.ElementRefsPropertyInfo"}),C.Model.ElementRefsPropertyInfo.Simplified=C.Class(C.Model.ElementRefsPropertyInfo,C.Binding.Unmarshalls.Element.AsSimplifiedElementRef,{CLASS_NAME:"Jsonix.Model.ElementRefsPropertyInfo.Simplified"}),C.Model.AnyElementPropertyInfo=C.Class(C.Binding.Marshalls.Element,C.Binding.Marshalls.Element.AsElementRef,C.Binding.Unmarshalls.Element,C.Binding.Unmarshalls.Element.AsElementRef,C.Model.PropertyInfo,{allowDom:!0,allowTypedObject:!0,mixed:!0,initialize:function(w){C.Util.Ensure.ensureObject(w),C.Model.PropertyInfo.prototype.initialize.apply(this,[w]);var R=C.Util.Type.defaultValue(w.allowDom,w.dom,!0),O=C.Util.Type.defaultValue(w.allowTypedObject,w.typed,!0),k=C.Util.Type.defaultValue(w.mixed,w.mx,!0);this.allowDom=R,this.allowTypedObject=O,this.mixed=k},unmarshal:function(w,R,O){var k=null,j=this,X=function($){if(j.collection)null===k&&(k=[]),k.push($);else{if(null!==k)throw new Error("Value already set.");k=$}},ee=R.eventType;if(ee===C.XML.Input.START_ELEMENT)this.unmarshalElement(w,R,O,X);else if(!this.mixed||ee!==C.XML.Input.CHARACTERS&&ee!==C.XML.Input.CDATA&&ee!==C.XML.Input.ENTITY_REFERENCE){if((!this.mixed||ee!==C.XML.Input.SPACE)&&ee!==C.XML.Input.COMMENT&&ee!==C.XML.Input.PROCESSING_INSTRUCTION)throw new Error("Illegal state: unexpected event type ["+ee+"].")}else X(R.getText());return k},marshal:function(w,R,O,k){if(C.Util.Type.exists(w))if(this.collection){C.Util.Ensure.ensureArray(w);for(var j=0;j<w.length;j++)this.marshalItem(w[j],R,O,k)}else this.marshalItem(w,R,O,k)},marshalItem:function(w,R,O,k){this.mixed&&C.Util.Type.isString(w)?O.writeCharacters(w):this.allowDom&&C.Util.Type.exists(w.nodeType)?O.writeNode(w):this.allowTypedObject&&this.marshalElement(w,R,O,k)},doBuild:function(w,R){},buildStructure:function(w,R){if(C.Util.Ensure.ensureObject(R),C.Util.Type.exists(R.value))throw new Error("The structure already defines a value property.");C.Util.Type.exists(R.elements)||(R.elements={}),(this.allowDom||this.allowTypedObject)&&(R.any=this),this.mixed&&(R.mixed=this)},CLASS_NAME:"Jsonix.Model.AnyElementPropertyInfo"}),C.Model.AnyElementPropertyInfo.Simplified=C.Class(C.Model.AnyElementPropertyInfo,C.Binding.Unmarshalls.Element.AsSimplifiedElementRef,{CLASS_NAME:"Jsonix.Model.AnyElementPropertyInfo.Simplified"}),C.Model.Module=C.Class(C.Mapping.Styled,{name:null,typeInfos:null,elementInfos:null,targetNamespace:"",defaultElementNamespaceURI:"",defaultAttributeNamespaceURI:"",initialize:function(w,R){if(C.Mapping.Styled.prototype.initialize.apply(this,[R]),this.typeInfos=[],this.elementInfos=[],typeof w<"u"){C.Util.Ensure.ensureObject(w),this.name=w.name||w.n||null,this.defaultElementNamespaceURI=w.defaultElementNamespaceURI||w.dens||w.targetNamespace||w.tns||"",this.targetNamespace=w.targetNamespace||w.tns||w.defaultElementNamespaceURI||w.dens||this.defaultElementNamespaceURI,this.defaultAttributeNamespaceURI=w.defaultAttributeNamespaceURI||w.dans||"";var ee=w.typeInfos||w.tis||[];for(var $ in this.initializeTypeInfos(ee),w)w.hasOwnProperty($)&&w[$]instanceof this.mappingStyle.classInfo&&this.typeInfos.push(w[$]);this.initializeElementInfos(w.elementInfos||w.eis||[])}},initializeTypeInfos:function(w){var R,k;for(C.Util.Ensure.ensureArray(w),R=0;R<w.length;R++)k=this.createTypeInfo(w[R]),this.typeInfos.push(k)},initializeElementInfos:function(w){var R,k;for(C.Util.Ensure.ensureArray(w),R=0;R<w.length;R++)k=this.createElementInfo(w[R]),this.elementInfos.push(k)},createTypeInfo:function(w){var R;if(C.Util.Ensure.ensureObject(w),w instanceof C.Model.TypeInfo)R=w;else{var O=(w=C.Util.Type.cloneObject(w)).type||w.t||"classInfo";if(!C.Util.Type.isFunction(this.typeInfoCreators[O]))throw new Error("Unknown type info type ["+O+"].");R=this.typeInfoCreators[O].call(this,w)}return R},initializeNames:function(w){var R=w.localName||w.ln||null;if(w.localName=R,w.name=w.name||w.n||null,C.Util.Type.isString(w.name))w.name.length>0&&"."===w.name.charAt(0)&&C.Util.Type.isString(this.name)&&(w.name=this.name+w.name);else{if(!C.Util.Type.isString(R))throw new Error("Neither [name/n] nor [localName/ln] was provided for the class info.");w.name=C.Util.Type.isString(this.name)?this.name+"."+R:R}},createClassInfo:function(w){C.Util.Ensure.ensureObject(w),w.defaultElementNamespaceURI=w.defaultElementNamespaceURI||w.dens||this.defaultElementNamespaceURI,w.targetNamespace=w.targetNamespace||w.tns||this.targetNamespace,w.defaultAttributeNamespaceURI=w.defaultAttributeNamespaceURI||w.dans||this.defaultAttributeNamespaceURI,this.initializeNames(w);var j=new this.mappingStyle.classInfo(w,{mappingStyle:this.mappingStyle});return j.module=this,j},createEnumLeafInfo:function(w){C.Util.Ensure.ensureObject(w),this.initializeNames(w);var R=new this.mappingStyle.enumLeafInfo(w,{mappingStyle:this.mappingStyle});return R.module=this,R},createList:function(w){C.Util.Ensure.ensureObject(w);var R=w.baseTypeInfo||w.typeInfo||w.bti||w.ti||"String",O=w.typeName||w.tn||null;C.Util.Type.exists(O)&&(O=C.Util.Type.isString(O)?new C.XML.QName(this.targetNamespace,O):C.XML.QName.fromObject(O));var k=w.separator||w.sep||" ";C.Util.Ensure.ensureExists(R);var j=new C.Schema.XSD.List(R,O,k);return j.module=this,j},createElementInfo:function(w){C.Util.Ensure.ensureObject(w),(w=C.Util.Type.cloneObject(w)).defaultElementNamespaceURI=w.defaultElementNamespaceURI||w.dens||this.defaultElementNamespaceURI;var O=w.elementName||w.en||void 0;C.Util.Ensure.ensureExists(O);var k=w.typeInfo||w.ti||"String";if(C.Util.Ensure.ensureExists(k),w.typeInfo=k,C.Util.Type.isObject(O))w.elementName=C.XML.QName.fromObject(O);else{if(!C.Util.Type.isString(O))throw new Error("Element info ["+w+"] must provide an element name.");w.elementName=new C.XML.QName(this.defaultElementNamespaceURI,O)}var j=w.substitutionHead||w.sh||null;C.Util.Type.exists(j)&&(C.Util.Type.isObject(j)?w.substitutionHead=C.XML.QName.fromObject(j):(C.Util.Ensure.ensureString(j),w.substitutionHead=new C.XML.QName(this.defaultElementNamespaceURI,j)));var X=new this.mappingStyle.elementInfo(w,{mappingStyle:this.mappingStyle});return X.module=this,X},registerTypeInfos:function(w){for(var R=0;R<this.typeInfos.length;R++)w.registerTypeInfo(this.typeInfos[R],this)},buildTypeInfos:function(w){for(var R=0;R<this.typeInfos.length;R++)this.typeInfos[R].build(w,this)},registerElementInfos:function(w){for(var R=0;R<this.elementInfos.length;R++)w.registerElementInfo(this.elementInfos[R],this)},buildElementInfos:function(w){for(var R=0;R<this.elementInfos.length;R++)this.elementInfos[R].build(w,this)},cs:function(){return this},es:function(){return this},CLASS_NAME:"Jsonix.Model.Module"}),C.Model.Module.prototype.typeInfoCreators={classInfo:C.Model.Module.prototype.createClassInfo,c:C.Model.Module.prototype.createClassInfo,enumInfo:C.Model.Module.prototype.createEnumLeafInfo,enum:C.Model.Module.prototype.createEnumLeafInfo,list:C.Model.Module.prototype.createList,l:C.Model.Module.prototype.createList},C.Mapping.Style.Standard=C.Class(C.Mapping.Style,{marshaller:C.Binding.Marshaller,unmarshaller:C.Binding.Unmarshaller,module:C.Model.Module,elementInfo:C.Model.ElementInfo,classInfo:C.Model.ClassInfo,enumLeafInfo:C.Model.EnumLeafInfo,anyAttributePropertyInfo:C.Model.AnyAttributePropertyInfo,anyElementPropertyInfo:C.Model.AnyElementPropertyInfo,attributePropertyInfo:C.Model.AttributePropertyInfo,elementMapPropertyInfo:C.Model.ElementMapPropertyInfo,elementPropertyInfo:C.Model.ElementPropertyInfo,elementsPropertyInfo:C.Model.ElementsPropertyInfo,elementRefPropertyInfo:C.Model.ElementRefPropertyInfo,elementRefsPropertyInfo:C.Model.ElementRefsPropertyInfo,valuePropertyInfo:C.Model.ValuePropertyInfo,initialize:function(){C.Mapping.Style.prototype.initialize.apply(this)},CLASS_NAME:"Jsonix.Mapping.Style.Standard"}),C.Mapping.Style.STYLES.standard=new C.Mapping.Style.Standard,C.Mapping.Style.Simplified=C.Class(C.Mapping.Style,{marshaller:C.Binding.Marshaller.Simplified,unmarshaller:C.Binding.Unmarshaller.Simplified,module:C.Model.Module,elementInfo:C.Model.ElementInfo,classInfo:C.Model.ClassInfo,enumLeafInfo:C.Model.EnumLeafInfo,anyAttributePropertyInfo:C.Model.AnyAttributePropertyInfo.Simplified,anyElementPropertyInfo:C.Model.AnyElementPropertyInfo.Simplified,attributePropertyInfo:C.Model.AttributePropertyInfo,elementMapPropertyInfo:C.Model.ElementMapPropertyInfo,elementPropertyInfo:C.Model.ElementPropertyInfo,elementsPropertyInfo:C.Model.ElementsPropertyInfo,elementRefPropertyInfo:C.Model.ElementRefPropertyInfo.Simplified,elementRefsPropertyInfo:C.Model.ElementRefsPropertyInfo.Simplified,valuePropertyInfo:C.Model.ValuePropertyInfo,initialize:function(){C.Mapping.Style.prototype.initialize.apply(this)},CLASS_NAME:"Jsonix.Mapping.Style.Simplified"}),C.Mapping.Style.STYLES.simplified=new C.Mapping.Style.Simplified,C.Schema.XSD={},C.Schema.XSD.NAMESPACE_URI="http://www.w3.org/2001/XMLSchema",C.Schema.XSD.PREFIX="xsd",C.Schema.XSD.qname=function(w){return C.Util.Ensure.ensureString(w),new C.XML.QName(C.Schema.XSD.NAMESPACE_URI,w,C.Schema.XSD.PREFIX)},C.Schema.XSD.AnyType=C.Class(C.Model.ClassInfo,{typeName:C.Schema.XSD.qname("anyType"),initialize:function(){C.Model.ClassInfo.prototype.initialize.call(this,{name:"AnyType",propertyInfos:[{type:"anyAttribute",name:"attributes"},{type:"anyElement",name:"content",collection:!0}]})},CLASS_NAME:"Jsonix.Schema.XSD.AnyType"}),C.Schema.XSD.AnyType.INSTANCE=new C.Schema.XSD.AnyType,C.Schema.XSD.AnySimpleType=C.Class(C.Model.TypeInfo,{name:"AnySimpleType",typeName:C.Schema.XSD.qname("anySimpleType"),initialize:function(){C.Model.TypeInfo.prototype.initialize.apply(this,[])},print:function(w,R,O,k){return w},parse:function(w,R,O,k){return w},isInstance:function(w,R,O){return!0},reprint:function(w,R,O,k){return C.Util.Type.isString(w)&&!this.isInstance(w,R,k)?this.print(this.parse(w,R,null,k),R,O,k):this.print(w,R,O,k)},unmarshal:function(w,R,O){var k=R.getElementText();return C.Util.StringUtils.isNotBlank(k)?this.parse(k,w,R,O):null},marshal:function(w,R,O,k){C.Util.Type.exists(w)&&O.writeCharacters(this.reprint(w,R,O,k))},build:function(w,R){},CLASS_NAME:"Jsonix.Schema.XSD.AnySimpleType"}),C.Schema.XSD.AnySimpleType.INSTANCE=new C.Schema.XSD.AnySimpleType,C.Schema.XSD.List=C.Class(C.Schema.XSD.AnySimpleType,{name:null,typeName:null,typeInfo:null,separator:" ",trimmedSeparator:C.Util.StringUtils.whitespaceCharacters,simpleType:!0,built:!1,initialize:function(w,R,O){C.Util.Ensure.ensureExists(w),this.typeInfo=w,C.Util.Type.exists(this.name)||(this.name=w.name+"*"),C.Util.Type.exists(R)&&(this.typeName=R),this.separator=C.Util.Type.isString(O)?O:" ";var k=C.Util.StringUtils.trim(this.separator);this.trimmedSeparator=0===k.length?C.Util.StringUtils.whitespaceCharacters:k},build:function(w){this.built||(this.typeInfo=w.resolveTypeInfo(this.typeInfo,this.module),this.built=!0)},print:function(w,R,O,k){if(!C.Util.Type.exists(w))return null;C.Util.Ensure.ensureArray(w);for(var j="",X=0;X<w.length;X++)X>0&&(j+=this.separator),j+=this.typeInfo.reprint(w[X],R,O,k);return j},parse:function(w,R,O,k){C.Util.Ensure.ensureString(w);for(var j=C.Util.StringUtils.splitBySeparatorChars(w,this.trimmedSeparator),X=[],ee=0;ee<j.length;ee++)X.push(this.typeInfo.parse(C.Util.StringUtils.trim(j[ee]),R,O,k));return X},CLASS_NAME:"Jsonix.Schema.XSD.List"}),C.Schema.XSD.String=C.Class(C.Schema.XSD.AnySimpleType,{name:"String",typeName:C.Schema.XSD.qname("string"),unmarshal:function(w,R,O){var k=R.getElementText();return this.parse(k,w,R,O)},print:function(w,R,O,k){return C.Util.Ensure.ensureString(w),w},parse:function(w,R,O,k){return C.Util.Ensure.ensureString(w),w},isInstance:function(w,R,O){return C.Util.Type.isString(w)},CLASS_NAME:"Jsonix.Schema.XSD.String"}),C.Schema.XSD.String.INSTANCE=new C.Schema.XSD.String,C.Schema.XSD.String.INSTANCE.LIST=new C.Schema.XSD.List(C.Schema.XSD.String.INSTANCE),C.Schema.XSD.Strings=C.Class(C.Schema.XSD.List,{name:"Strings",initialize:function(){C.Schema.XSD.List.prototype.initialize.apply(this,[C.Schema.XSD.String.INSTANCE,C.Schema.XSD.qname("strings")," "])},CLASS_NAME:"Jsonix.Schema.XSD.Strings"}),C.Schema.XSD.Strings.INSTANCE=new C.Schema.XSD.Strings,C.Schema.XSD.NormalizedString=C.Class(C.Schema.XSD.String,{name:"NormalizedString",typeName:C.Schema.XSD.qname("normalizedString"),CLASS_NAME:"Jsonix.Schema.XSD.NormalizedString"}),C.Schema.XSD.NormalizedString.INSTANCE=new C.Schema.XSD.NormalizedString,C.Schema.XSD.NormalizedString.INSTANCE.LIST=new C.Schema.XSD.List(C.Schema.XSD.NormalizedString.INSTANCE),C.Schema.XSD.Token=C.Class(C.Schema.XSD.NormalizedString,{name:"Token",typeName:C.Schema.XSD.qname("token"),CLASS_NAME:"Jsonix.Schema.XSD.Token"}),C.Schema.XSD.Token.INSTANCE=new C.Schema.XSD.Token,C.Schema.XSD.Token.INSTANCE.LIST=new C.Schema.XSD.List(C.Schema.XSD.Token.INSTANCE),C.Schema.XSD.Language=C.Class(C.Schema.XSD.Token,{name:"Language",typeName:C.Schema.XSD.qname("language"),CLASS_NAME:"Jsonix.Schema.XSD.Language"}),C.Schema.XSD.Language.INSTANCE=new C.Schema.XSD.Language,C.Schema.XSD.Language.INSTANCE.LIST=new C.Schema.XSD.List(C.Schema.XSD.Language.INSTANCE),C.Schema.XSD.Name=C.Class(C.Schema.XSD.Token,{name:"Name",typeName:C.Schema.XSD.qname("Name"),CLASS_NAME:"Jsonix.Schema.XSD.Name"}),C.Schema.XSD.Name.INSTANCE=new C.Schema.XSD.Name,C.Schema.XSD.Name.INSTANCE.LIST=new C.Schema.XSD.List(C.Schema.XSD.Name.INSTANCE),C.Schema.XSD.NCName=C.Class(C.Schema.XSD.Name,{name:"NCName",typeName:C.Schema.XSD.qname("NCName"),CLASS_NAME:"Jsonix.Schema.XSD.NCName"}),C.Schema.XSD.NCName.INSTANCE=new C.Schema.XSD.NCName,C.Schema.XSD.NCName.INSTANCE.LIST=new C.Schema.XSD.List(C.Schema.XSD.NCName.INSTANCE),C.Schema.XSD.NMToken=C.Class(C.Schema.XSD.Token,{name:"NMToken",typeName:C.Schema.XSD.qname("NMTOKEN"),CLASS_NAME:"Jsonix.Schema.XSD.NMToken"}),C.Schema.XSD.NMToken.INSTANCE=new C.Schema.XSD.NMToken,C.Schema.XSD.NMTokens=C.Class(C.Schema.XSD.List,{name:"NMTokens",initialize:function(){C.Schema.XSD.List.prototype.initialize.apply(this,[C.Schema.XSD.NMToken.INSTANCE,C.Schema.XSD.qname("NMTOKEN")," "])},CLASS_NAME:"Jsonix.Schema.XSD.NMTokens"}),C.Schema.XSD.NMTokens.INSTANCE=new C.Schema.XSD.NMTokens,C.Schema.XSD.Boolean=C.Class(C.Schema.XSD.AnySimpleType,{name:"Boolean",typeName:C.Schema.XSD.qname("boolean"),print:function(w,R,O,k){return C.Util.Ensure.ensureBoolean(w),w?"true":"false"},parse:function(w,R,O,k){if(C.Util.Ensure.ensureString(w),"true"===w||"1"===w)return!0;if("false"===w||"0"===w)return!1;throw new Error("Either [true], [1], [0] or [false] expected as boolean value.")},isInstance:function(w,R,O){return C.Util.Type.isBoolean(w)},CLASS_NAME:"Jsonix.Schema.XSD.Boolean"}),C.Schema.XSD.Boolean.INSTANCE=new C.Schema.XSD.Boolean,C.Schema.XSD.Boolean.INSTANCE.LIST=new C.Schema.XSD.List(C.Schema.XSD.Boolean.INSTANCE),C.Schema.XSD.Base64Binary=C.Class(C.Schema.XSD.AnySimpleType,{name:"Base64Binary",typeName:C.Schema.XSD.qname("base64Binary"),charToByte:{},byteToChar:[],initialize:function(){C.Schema.XSD.AnySimpleType.prototype.initialize.apply(this);for(var w="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",R=0;R<w.length;R++){var O=w.charAt(R);w.charCodeAt(R),this.byteToChar[R]=O,this.charToByte[O]=R}},print:function(w,R,O,k){return C.Util.Ensure.ensureArray(w),this.encode(w)},parse:function(w,R,O,k){return C.Util.Ensure.ensureString(w),this.decode(w)},encode:function(w){var O,k,j,ee,$,re,R="",ge=0,Ge=w.length;for(ge=0;ge<Ge;ge+=3)O=255&w[ge],ge+1<Ge?(ee=this.byteToChar[(3&O)<<4|(k=255&w[ge+1])>>4],ge+2<Ge?($=this.byteToChar[(15&k)<<2|(j=255&w[ge+2])>>6],re=this.byteToChar[63&j]):($=this.byteToChar[(15&k)<<2],re="=")):(ee=this.byteToChar[(3&O)<<4],$="=",re="="),R=R+this.byteToChar[O>>2]+ee+$+re;return R},decode:function(w){input=w.replace(/[^A-Za-z0-9\+\/\=]/g,"");var R=Math.floor(input.length/4*3);"="===input.charAt(input.length-1)&&R--,"="===input.charAt(input.length-2)&&R--;var j,X,ee,$,re,ge,O=new Array(R),Le=0,Ge=0;for(Le=0;Le<R;Le+=3)ee=this.charToByte[input.charAt(Ge++)],j=(15&($=this.charToByte[input.charAt(Ge++)]))<<4|(re=this.charToByte[input.charAt(Ge++)])>>2,X=(3&re)<<6|(ge=this.charToByte[input.charAt(Ge++)]),O[Le]=ee<<2|$>>4,64!=re&&(O[Le+1]=j),64!=ge&&(O[Le+2]=X);return O},isInstance:function(w,R,O){return C.Util.Type.isArray(w)},CLASS_NAME:"Jsonix.Schema.XSD.Base64Binary"}),C.Schema.XSD.Base64Binary.INSTANCE=new C.Schema.XSD.Base64Binary,C.Schema.XSD.Base64Binary.INSTANCE.LIST=new C.Schema.XSD.List(C.Schema.XSD.Base64Binary.INSTANCE),C.Schema.XSD.HexBinary=C.Class(C.Schema.XSD.AnySimpleType,{name:"HexBinary",typeName:C.Schema.XSD.qname("hexBinary"),charToQuartet:{},byteToDuplet:[],initialize:function(){C.Schema.XSD.AnySimpleType.prototype.initialize.apply(this);var O,w="0123456789ABCDEF",R=w.toLowerCase();for(O=0;O<16;O++)this.charToQuartet[w.charAt(O)]=O,O>=10&&(this.charToQuartet[R.charAt(O)]=O);for(O=0;O<256;O++)this.byteToDuplet[O]=w[O>>4]+w[15&O]},print:function(w,R,O,k){return C.Util.Ensure.ensureArray(w),this.encode(w)},parse:function(w,R,O,k){return C.Util.Ensure.ensureString(w),this.decode(w)},encode:function(w){for(var R="",O=0;O<w.length;O++)R+=this.byteToDuplet[255&w[O]];return R},decode:function(w){for(var R=w.replace(/[^A-Fa-f0-9]/g,""),O=R.length>>1,k=new Array(O),j=0;j<O;j++){var X=R.charAt(2*j),ee=R.charAt(2*j+1);k[j]=this.charToQuartet[X]<<4|this.charToQuartet[ee]}return k},isInstance:function(w,R,O){return C.Util.Type.isArray(w)},CLASS_NAME:"Jsonix.Schema.XSD.HexBinary"}),C.Schema.XSD.HexBinary.INSTANCE=new C.Schema.XSD.HexBinary,C.Schema.XSD.HexBinary.INSTANCE.LIST=new C.Schema.XSD.List(C.Schema.XSD.HexBinary.INSTANCE),C.Schema.XSD.Number=C.Class(C.Schema.XSD.AnySimpleType,{name:"Number",typeName:C.Schema.XSD.qname("number"),print:function(w,R,O,k){return C.Util.Ensure.ensureNumberOrNaN(w),C.Util.Type.isNaN(w)?"NaN":w===1/0?"INF":w===-1/0?"-INF":String(w)},parse:function(w,R,O,k){if(C.Util.Ensure.ensureString(w),"-INF"===w)return-1/0;if("INF"===w)return 1/0;if("NaN"===w)return NaN;var j=Number(w);return C.Util.Ensure.ensureNumber(j),j},isInstance:function(w,R,O){return C.Util.Type.isNumberOrNaN(w)},CLASS_NAME:"Jsonix.Schema.XSD.Number"}),C.Schema.XSD.Number.INSTANCE=new C.Schema.XSD.Number,C.Schema.XSD.Number.INSTANCE.LIST=new C.Schema.XSD.List(C.Schema.XSD.Number.INSTANCE),C.Schema.XSD.Float=C.Class(C.Schema.XSD.Number,{name:"Float",typeName:C.Schema.XSD.qname("float"),isInstance:function(w,R,O){return C.Util.Type.isNaN(w)||w===-1/0||w===1/0||C.Util.Type.isNumber(w)&&w>=this.MIN_VALUE&&w<=this.MAX_VALUE},MIN_VALUE:-34028235e31,MAX_VALUE:34028235e31,CLASS_NAME:"Jsonix.Schema.XSD.Float"}),C.Schema.XSD.Float.INSTANCE=new C.Schema.XSD.Float,C.Schema.XSD.Float.INSTANCE.LIST=new C.Schema.XSD.List(C.Schema.XSD.Float.INSTANCE),C.Schema.XSD.Decimal=C.Class(C.Schema.XSD.AnySimpleType,{name:"Decimal",typeName:C.Schema.XSD.qname("decimal"),print:function(w,R,O,k){return C.Util.Ensure.ensureNumber(w),String(w)},parse:function(w,R,O,k){C.Util.Ensure.ensureString(w);var j=Number(w);return C.Util.Ensure.ensureNumber(j),j},isInstance:function(w,R,O){return C.Util.Type.isNumber(w)},CLASS_NAME:"Jsonix.Schema.XSD.Decimal"}),C.Schema.XSD.Decimal.INSTANCE=new C.Schema.XSD.Decimal,C.Schema.XSD.Decimal.INSTANCE.LIST=new C.Schema.XSD.List(C.Schema.XSD.Decimal.INSTANCE),C.Schema.XSD.Integer=C.Class(C.Schema.XSD.AnySimpleType,{name:"Integer",typeName:C.Schema.XSD.qname("integer"),print:function(w,R,O,k){return C.Util.Ensure.ensureInteger(w),String(w)},parse:function(w,R,O,k){C.Util.Ensure.ensureString(w);var j=Number(w);return C.Util.Ensure.ensureInteger(j),j},isInstance:function(w,R,O){return C.Util.NumberUtils.isInteger(w)&&w>=this.MIN_VALUE&&w<=this.MAX_VALUE},MIN_VALUE:-0x8000000000000000,MAX_VALUE:0x8000000000000000,CLASS_NAME:"Jsonix.Schema.XSD.Integer"}),C.Schema.XSD.Integer.INSTANCE=new C.Schema.XSD.Integer,C.Schema.XSD.Integer.INSTANCE.LIST=new C.Schema.XSD.List(C.Schema.XSD.Integer.INSTANCE),C.Schema.XSD.NonPositiveInteger=C.Class(C.Schema.XSD.Integer,{name:"NonPositiveInteger",typeName:C.Schema.XSD.qname("nonPositiveInteger"),MIN_VALUE:-0x8000000000000000,MAX_VALUE:0,CLASS_NAME:"Jsonix.Schema.XSD.NonPositiveInteger"}),C.Schema.XSD.NonPositiveInteger.INSTANCE=new C.Schema.XSD.NonPositiveInteger,C.Schema.XSD.NonPositiveInteger.INSTANCE.LIST=new C.Schema.XSD.List(C.Schema.XSD.NonPositiveInteger.INSTANCE),C.Schema.XSD.NegativeInteger=C.Class(C.Schema.XSD.NonPositiveInteger,{name:"NegativeInteger",typeName:C.Schema.XSD.qname("negativeInteger"),MIN_VALUE:-0x8000000000000000,MAX_VALUE:-1,CLASS_NAME:"Jsonix.Schema.XSD.NegativeInteger"}),C.Schema.XSD.NegativeInteger.INSTANCE=new C.Schema.XSD.NegativeInteger,C.Schema.XSD.NegativeInteger.INSTANCE.LIST=new C.Schema.XSD.List(C.Schema.XSD.NegativeInteger.INSTANCE),C.Schema.XSD.Long=C.Class(C.Schema.XSD.Integer,{name:"Long",typeName:C.Schema.XSD.qname("long"),MIN_VALUE:-0x8000000000000000,MAX_VALUE:0x8000000000000000,CLASS_NAME:"Jsonix.Schema.XSD.Long"}),C.Schema.XSD.Long.INSTANCE=new C.Schema.XSD.Long,C.Schema.XSD.Long.INSTANCE.LIST=new C.Schema.XSD.List(C.Schema.XSD.Long.INSTANCE),C.Schema.XSD.Int=C.Class(C.Schema.XSD.Long,{name:"Int",typeName:C.Schema.XSD.qname("int"),MIN_VALUE:-2147483648,MAX_VALUE:2147483647,CLASS_NAME:"Jsonix.Schema.XSD.Int"}),C.Schema.XSD.Int.INSTANCE=new C.Schema.XSD.Int,C.Schema.XSD.Int.INSTANCE.LIST=new C.Schema.XSD.List(C.Schema.XSD.Int.INSTANCE),C.Schema.XSD.Short=C.Class(C.Schema.XSD.Int,{name:"Short",typeName:C.Schema.XSD.qname("short"),MIN_VALUE:-32768,MAX_VALUE:32767,CLASS_NAME:"Jsonix.Schema.XSD.Short"}),C.Schema.XSD.Short.INSTANCE=new C.Schema.XSD.Short,C.Schema.XSD.Short.INSTANCE.LIST=new C.Schema.XSD.List(C.Schema.XSD.Short.INSTANCE),C.Schema.XSD.Byte=C.Class(C.Schema.XSD.Short,{name:"Byte",typeName:C.Schema.XSD.qname("byte"),MIN_VALUE:-128,MAX_VALUE:127,CLASS_NAME:"Jsonix.Schema.XSD.Byte"}),C.Schema.XSD.Byte.INSTANCE=new C.Schema.XSD.Byte,C.Schema.XSD.Byte.INSTANCE.LIST=new C.Schema.XSD.List(C.Schema.XSD.Byte.INSTANCE),C.Schema.XSD.NonNegativeInteger=C.Class(C.Schema.XSD.Integer,{name:"NonNegativeInteger",typeName:C.Schema.XSD.qname("nonNegativeInteger"),MIN_VALUE:0,MAX_VALUE:0x8000000000000000,CLASS_NAME:"Jsonix.Schema.XSD.NonNegativeInteger"}),C.Schema.XSD.NonNegativeInteger.INSTANCE=new C.Schema.XSD.NonNegativeInteger,C.Schema.XSD.NonNegativeInteger.INSTANCE.LIST=new C.Schema.XSD.List(C.Schema.XSD.NonNegativeInteger.INSTANCE),C.Schema.XSD.UnsignedLong=C.Class(C.Schema.XSD.NonNegativeInteger,{name:"UnsignedLong",typeName:C.Schema.XSD.qname("unsignedLong"),MIN_VALUE:0,MAX_VALUE:0x10000000000000000,CLASS_NAME:"Jsonix.Schema.XSD.UnsignedLong"}),C.Schema.XSD.UnsignedLong.INSTANCE=new C.Schema.XSD.UnsignedLong,C.Schema.XSD.UnsignedLong.INSTANCE.LIST=new C.Schema.XSD.List(C.Schema.XSD.UnsignedLong.INSTANCE),C.Schema.XSD.UnsignedInt=C.Class(C.Schema.XSD.UnsignedLong,{name:"UnsignedInt",typeName:C.Schema.XSD.qname("unsignedInt"),MIN_VALUE:0,MAX_VALUE:4294967295,CLASS_NAME:"Jsonix.Schema.XSD.UnsignedInt"}),C.Schema.XSD.UnsignedInt.INSTANCE=new C.Schema.XSD.UnsignedInt,C.Schema.XSD.UnsignedInt.INSTANCE.LIST=new C.Schema.XSD.List(C.Schema.XSD.UnsignedInt.INSTANCE),C.Schema.XSD.UnsignedShort=C.Class(C.Schema.XSD.UnsignedInt,{name:"UnsignedShort",typeName:C.Schema.XSD.qname("unsignedShort"),MIN_VALUE:0,MAX_VALUE:65535,CLASS_NAME:"Jsonix.Schema.XSD.UnsignedShort"}),C.Schema.XSD.UnsignedShort.INSTANCE=new C.Schema.XSD.UnsignedShort,C.Schema.XSD.UnsignedShort.INSTANCE.LIST=new C.Schema.XSD.List(C.Schema.XSD.UnsignedShort.INSTANCE),C.Schema.XSD.UnsignedByte=C.Class(C.Schema.XSD.UnsignedShort,{name:"UnsignedByte",typeName:C.Schema.XSD.qname("unsignedByte"),MIN_VALUE:0,MAX_VALUE:255,CLASS_NAME:"Jsonix.Schema.XSD.UnsignedByte"}),C.Schema.XSD.UnsignedByte.INSTANCE=new C.Schema.XSD.UnsignedByte,C.Schema.XSD.UnsignedByte.INSTANCE.LIST=new C.Schema.XSD.List(C.Schema.XSD.UnsignedByte.INSTANCE),C.Schema.XSD.PositiveInteger=C.Class(C.Schema.XSD.NonNegativeInteger,{name:"PositiveInteger",typeName:C.Schema.XSD.qname("positiveInteger"),MIN_VALUE:1,MAX_VALUE:0x8000000000000000,CLASS_NAME:"Jsonix.Schema.XSD.PositiveInteger"}),C.Schema.XSD.PositiveInteger.INSTANCE=new C.Schema.XSD.PositiveInteger,C.Schema.XSD.PositiveInteger.INSTANCE.LIST=new C.Schema.XSD.List(C.Schema.XSD.PositiveInteger.INSTANCE),C.Schema.XSD.Double=C.Class(C.Schema.XSD.Number,{name:"Double",typeName:C.Schema.XSD.qname("double"),isInstance:function(w,R,O){return C.Util.Type.isNaN(w)||w===-1/0||w===1/0||C.Util.Type.isNumber(w)&&w>=this.MIN_VALUE&&w<=this.MAX_VALUE},MIN_VALUE:-17976931348623157e292,MAX_VALUE:17976931348623157e292,CLASS_NAME:"Jsonix.Schema.XSD.Double"}),C.Schema.XSD.Double.INSTANCE=new C.Schema.XSD.Double,C.Schema.XSD.Double.INSTANCE.LIST=new C.Schema.XSD.List(C.Schema.XSD.Double.INSTANCE),C.Schema.XSD.AnyURI=C.Class(C.Schema.XSD.AnySimpleType,{name:"AnyURI",typeName:C.Schema.XSD.qname("anyURI"),print:function(w,R,O,k){return C.Util.Ensure.ensureString(w),w},parse:function(w,R,O,k){return C.Util.Ensure.ensureString(w),w},isInstance:function(w,R,O){return C.Util.Type.isString(w)},CLASS_NAME:"Jsonix.Schema.XSD.AnyURI"}),C.Schema.XSD.AnyURI.INSTANCE=new C.Schema.XSD.AnyURI,C.Schema.XSD.AnyURI.INSTANCE.LIST=new C.Schema.XSD.List(C.Schema.XSD.AnyURI.INSTANCE),C.Schema.XSD.QName=C.Class(C.Schema.XSD.AnySimpleType,{name:"QName",typeName:C.Schema.XSD.qname("QName"),print:function(w,R,O,k){var X,j=C.XML.QName.fromObject(w),ee=j.localPart;return O?(X=O.getPrefix(j.namespaceURI,j.prefix||null),O.declareNamespace(j.namespaceURI,X)):X=j.prefix,X?X+":"+ee:ee},parse:function(w,R,O,k){C.Util.Ensure.ensureString(w);var j,X,ee=(w=C.Util.StringUtils.trim(w)).indexOf(":");if(-1===ee)j="",X=w;else{if(!(ee>0&&ee<w.length-1))throw new Error("Invalid QName ["+w+"].");j=w.substring(0,ee),X=w.substring(ee+1)}var $=O||R||null;if($){var re=$.getNamespaceURI(j);if(C.Util.Type.isString(re))return new C.XML.QName(re,X,j);throw new Error("Prefix ["+j+"] of the QName ["+w+"] is not bound in this context.")}return w},isInstance:function(w,R,O){return w instanceof C.XML.QName||C.Util.Type.isObject(w)&&C.Util.Type.isString(w.localPart||w.lp)},CLASS_NAME:"Jsonix.Schema.XSD.QName"}),C.Schema.XSD.QName.INSTANCE=new C.Schema.XSD.QName,C.Schema.XSD.QName.INSTANCE.LIST=new C.Schema.XSD.List(C.Schema.XSD.QName.INSTANCE),C.Schema.XSD.Calendar=C.Class(C.Schema.XSD.AnySimpleType,{name:"Calendar",typeName:C.Schema.XSD.qname("calendar"),parse:function(w,R,O,k){if(C.Util.Ensure.ensureString(w),w.match(new RegExp("^"+C.Schema.XSD.Calendar.DATETIME_PATTERN+"$")))return this.parseDateTime(w,R,O,k);if(w.match(new RegExp("^"+C.Schema.XSD.Calendar.DATE_PATTERN+"$")))return this.parseDate(w,R,O,k);if(w.match(new RegExp("^"+C.Schema.XSD.Calendar.TIME_PATTERN+"$")))return this.parseTime(w,R,O,k);if(w.match(new RegExp("^"+C.Schema.XSD.Calendar.GYEAR_MONTH_PATTERN+"$")))return this.parseGYearMonth(w,R,O,k);if(w.match(new RegExp("^"+C.Schema.XSD.Calendar.GYEAR_PATTERN+"$")))return this.parseGYear(w,R,O,k);if(w.match(new RegExp("^"+C.Schema.XSD.Calendar.GMONTH_DAY_PATTERN+"$")))return this.parseGMonthDay(w,R,O,k);if(w.match(new RegExp("^"+C.Schema.XSD.Calendar.GMONTH_PATTERN+"$")))return this.parseGMonth(w,R,O,k);if(w.match(new RegExp("^"+C.Schema.XSD.Calendar.GDAY_PATTERN+"$")))return this.parseGDay(w,R,O,k);throw new Error("Value ["+w+"] does not match xs:dateTime, xs:date, xs:time, xs:gYearMonth, xs:gYear, xs:gMonthDay, xs:gMonth or xs:gDay patterns.")},parseGYearMonth:function(w,R,O,k){var j=new RegExp("^"+C.Schema.XSD.Calendar.GYEAR_MONTH_PATTERN+"$"),X=w.match(j);if(null!==X){var ee={year:parseInt(X[1],10),month:parseInt(X[5],10),timezone:this.parseTimezoneString(X[7])};return new C.XML.Calendar(ee)}throw new Error("Value ["+w+"] does not match the xs:gYearMonth pattern.")},parseGYear:function(w,R,O,k){var j=new RegExp("^"+C.Schema.XSD.Calendar.GYEAR_PATTERN+"$"),X=w.match(j);if(null!==X){var ee={year:parseInt(X[1],10),timezone:this.parseTimezoneString(X[5])};return new C.XML.Calendar(ee)}throw new Error("Value ["+w+"] does not match the xs:gYear pattern.")},parseGMonthDay:function(w,R,O,k){var j=new RegExp("^"+C.Schema.XSD.Calendar.GMONTH_DAY_PATTERN+"$"),X=w.match(j);if(null!==X){var ee={month:parseInt(X[2],10),day:parseInt(X[3],10),timezone:this.parseTimezoneString(X[5])};return new C.XML.Calendar(ee)}throw new Error("Value ["+w+"] does not match the xs:gMonthDay pattern.")},parseGMonth:function(w,R,O,k){var j=new RegExp("^"+C.Schema.XSD.Calendar.GMONTH_PATTERN+"$"),X=w.match(j);if(null!==X){var ee={month:parseInt(X[2],10),timezone:this.parseTimezoneString(X[3])};return new C.XML.Calendar(ee)}throw new Error("Value ["+w+"] does not match the xs:gMonth pattern.")},parseGDay:function(w,R,O,k){var j=new RegExp("^"+C.Schema.XSD.Calendar.GDAY_PATTERN+"$"),X=w.match(j);if(null!==X){var ee={day:parseInt(X[2],10),timezone:this.parseTimezoneString(X[3])};return new C.XML.Calendar(ee)}throw new Error("Value ["+w+"] does not match the xs:gDay pattern.")},parseDateTime:function(w,R,O,k){C.Util.Ensure.ensureString(w);var j=new RegExp("^"+C.Schema.XSD.Calendar.DATETIME_PATTERN+"$"),X=w.match(j);if(null!==X){var ee={year:parseInt(X[1],10),month:parseInt(X[5],10),day:parseInt(X[7],10),hour:parseInt(X[9],10),minute:parseInt(X[10],10),second:parseInt(X[11],10),fractionalSecond:X[12]?parseFloat(X[12]):0,timezone:this.parseTimezoneString(X[14])};return new C.XML.Calendar(ee)}throw new Error("Value ["+w+"] does not match the xs:date pattern.")},parseDate:function(w,R,O,k){C.Util.Ensure.ensureString(w);var j=new RegExp("^"+C.Schema.XSD.Calendar.DATE_PATTERN+"$"),X=w.match(j);if(null!==X){var ee={year:parseInt(X[1],10),month:parseInt(X[5],10),day:parseInt(X[7],10),timezone:this.parseTimezoneString(X[9])};return new C.XML.Calendar(ee)}throw new Error("Value ["+w+"] does not match the xs:date pattern.")},parseTime:function(w,R,O,k){C.Util.Ensure.ensureString(w);var j=new RegExp("^"+C.Schema.XSD.Calendar.TIME_PATTERN+"$"),X=w.match(j);if(null!==X){var ee={hour:parseInt(X[1],10),minute:parseInt(X[2],10),second:parseInt(X[3],10),fractionalSecond:X[4]?parseFloat(X[4]):0,timezone:this.parseTimezoneString(X[6])};return new C.XML.Calendar(ee)}throw new Error("Value ["+w+"] does not match the xs:time pattern.")},parseTimezoneString:function(w){if(C.Util.Type.isString(w)){if(""===w)return NaN;if("Z"===w)return 0;if("+14:00"===w)return 840;if("-14:00"===w)return-840;var R=new RegExp("^"+C.Schema.XSD.Calendar.TIMEZONE_PATTERN+"$"),O=w.match(R);if(null!==O)return("+"===O[1]?1:-1)*(60*parseInt(O[4],10)+parseInt(O[5],10));throw new Error("Value ["+w+"] does not match the timezone pattern.")}return NaN},print:function(w,R,O,k){if(C.Util.Ensure.ensureObject(w),C.Util.NumberUtils.isInteger(w.year)&&C.Util.NumberUtils.isInteger(w.month)&&C.Util.NumberUtils.isInteger(w.day)&&C.Util.NumberUtils.isInteger(w.hour)&&C.Util.NumberUtils.isInteger(w.minute)&&C.Util.NumberUtils.isInteger(w.second))return this.printDateTime(w);if(C.Util.NumberUtils.isInteger(w.year)&&C.Util.NumberUtils.isInteger(w.month)&&C.Util.NumberUtils.isInteger(w.day))return this.printDate(w);if(C.Util.NumberUtils.isInteger(w.hour)&&C.Util.NumberUtils.isInteger(w.minute)&&C.Util.NumberUtils.isInteger(w.second))return this.printTime(w);if(C.Util.NumberUtils.isInteger(w.year)&&C.Util.NumberUtils.isInteger(w.month))return this.printGYearMonth(w);if(C.Util.NumberUtils.isInteger(w.month)&&C.Util.NumberUtils.isInteger(w.day))return this.printGMonthDay(w);if(C.Util.NumberUtils.isInteger(w.year))return this.printGYear(w);if(C.Util.NumberUtils.isInteger(w.month))return this.printGMonth(w);if(C.Util.NumberUtils.isInteger(w.day))return this.printGDay(w);throw new Error("Value ["+w+"] is not recognized as dateTime, date or time.")},printDateTime:function(w){C.Util.Ensure.ensureObject(w),C.Util.Ensure.ensureInteger(w.year),C.Util.Ensure.ensureInteger(w.month),C.Util.Ensure.ensureInteger(w.day),C.Util.Ensure.ensureInteger(w.hour),C.Util.Ensure.ensureInteger(w.minute),C.Util.Ensure.ensureNumber(w.second),C.Util.Type.exists(w.fractionalString)&&C.Util.Ensure.ensureNumber(w.fractionalString),C.Util.Type.exists(w.timezone)&&!C.Util.Type.isNaN(w.timezone)&&C.Util.Ensure.ensureInteger(w.timezone);var R=this.printDateString(w);return R+="T",R+=this.printTimeString(w),C.Util.Type.exists(w.timezone)&&(R+=this.printTimezoneString(w.timezone)),R},printDate:function(w){C.Util.Ensure.ensureObject(w),C.Util.Ensure.ensureNumber(w.year),C.Util.Ensure.ensureNumber(w.month),C.Util.Ensure.ensureNumber(w.day),C.Util.Type.exists(w.timezone)&&!C.Util.Type.isNaN(w.timezone)&&C.Util.Ensure.ensureInteger(w.timezone);var R=this.printDateString(w);return C.Util.Type.exists(w.timezone)&&(R+=this.printTimezoneString(w.timezone)),R},printTime:function(w){C.Util.Ensure.ensureObject(w),C.Util.Ensure.ensureNumber(w.hour),C.Util.Ensure.ensureNumber(w.minute),C.Util.Ensure.ensureNumber(w.second),C.Util.Type.exists(w.fractionalString)&&C.Util.Ensure.ensureNumber(w.fractionalString),C.Util.Type.exists(w.timezone)&&!C.Util.Type.isNaN(w.timezone)&&C.Util.Ensure.ensureInteger(w.timezone);var R=this.printTimeString(w);return C.Util.Type.exists(w.timezone)&&(R+=this.printTimezoneString(w.timezone)),R},printDateString:function(w){return C.Util.Ensure.ensureObject(w),C.Util.Ensure.ensureInteger(w.year),C.Util.Ensure.ensureInteger(w.month),C.Util.Ensure.ensureInteger(w.day),(w.year<0?"-"+this.printYear(-w.year):this.printYear(w.year))+"-"+this.printMonth(w.month)+"-"+this.printDay(w.day)},printTimeString:function(w){C.Util.Ensure.ensureObject(w),C.Util.Ensure.ensureInteger(w.hour),C.Util.Ensure.ensureInteger(w.minute),C.Util.Ensure.ensureInteger(w.second),C.Util.Type.exists(w.fractionalSecond)&&C.Util.Ensure.ensureNumber(w.fractionalSecond);var R=this.printHour(w.hour);return R+=":",R+=this.printMinute(w.minute),R+=":",R+=this.printSecond(w.second),C.Util.Type.exists(w.fractionalSecond)&&(R+=this.printFractionalSecond(w.fractionalSecond)),R},printTimezoneString:function(w){if(!C.Util.Type.exists(w)||C.Util.Type.isNaN(w))return"";C.Util.Ensure.ensureInteger(w);var X,R=w<0?-1:w>0?1:0,O=w*R,k=O%60,j=Math.floor(O/60);return 0===R?"Z":(R>0?X="+":R<0&&(X="-"),X+=this.printHour(j),X+=":",X+=this.printMinute(k))},printGDay:function(w,R,O,k){C.Util.Ensure.ensureObject(w);var j=void 0,X=void 0;return w instanceof Date?j=w.getDate():(C.Util.Ensure.ensureInteger(w.day),j=w.day,X=w.timezone),C.XML.Calendar.validateDay(j),C.XML.Calendar.validateTimezone(X),"---"+this.printDay(j)+this.printTimezoneString(X)},printGMonth:function(w,R,O,k){C.Util.Ensure.ensureObject(w);var j=void 0,X=void 0;return w instanceof Date?j=w.getMonth()+1:(C.Util.Ensure.ensureInteger(w.month),j=w.month,X=w.timezone),C.XML.Calendar.validateMonth(j),C.XML.Calendar.validateTimezone(X),"--"+this.printMonth(j)+this.printTimezoneString(X)},printGMonthDay:function(w,R,O,k){C.Util.Ensure.ensureObject(w);var j=void 0,X=void 0,ee=void 0;return w instanceof Date?(j=w.getMonth()+1,X=w.getDate()):(C.Util.Ensure.ensureInteger(w.month),C.Util.Ensure.ensureInteger(w.day),j=w.month,X=w.day,ee=w.timezone),C.XML.Calendar.validateMonthDay(j,X),C.XML.Calendar.validateTimezone(ee),"--"+this.printMonth(j)+"-"+this.printDay(X)+this.printTimezoneString(ee)},printGYear:function(w,R,O,k){C.Util.Ensure.ensureObject(w);var j=void 0,X=void 0;return w instanceof Date?j=w.getFullYear():(C.Util.Ensure.ensureInteger(w.year),j=w.year,X=w.timezone),C.XML.Calendar.validateYear(j),C.XML.Calendar.validateTimezone(X),this.printSignedYear(j)+this.printTimezoneString(X)},printGYearMonth:function(w,R,O,k){C.Util.Ensure.ensureObject(w);var j=void 0,X=void 0,ee=void 0;return w instanceof Date?(j=w.getFullYear(),X=w.getMonth()+1):(C.Util.Ensure.ensureInteger(w.year),j=w.year,X=w.month,ee=w.timezone),C.XML.Calendar.validateYear(j),C.XML.Calendar.validateMonth(X),C.XML.Calendar.validateTimezone(ee),this.printSignedYear(j)+"-"+this.printMonth(X)+this.printTimezoneString(ee)},printSignedYear:function(w){return w<0?"-"+this.printYear(-1*w):this.printYear(w)},printYear:function(w){return this.printInteger(w,4)},printMonth:function(w){return this.printInteger(w,2)},printDay:function(w){return this.printInteger(w,2)},printHour:function(w){return this.printInteger(w,2)},printMinute:function(w){return this.printInteger(w,2)},printSecond:function(w){return this.printInteger(w,2)},printFractionalSecond:function(w){if(C.Util.Ensure.ensureNumber(w),w<0||w>=1)throw new Error("Fractional second ["+w+"] must be between 0 and 1.");if(0===w)return"";var R=String(w),O=R.indexOf(".");return O<0?"":R.substring(O)},printInteger:function(w,R){if(C.Util.Ensure.ensureInteger(w),C.Util.Ensure.ensureInteger(R),R<=0)throw new Error("Length ["+w+"] must be positive.");if(w<0)throw new Error("Value ["+w+"] must not be negative.");for(var O=String(w),k=O.length;k<R;k++)O="0"+O;return O},isInstance:function(w,R,O){return C.Util.Type.isObject(w)&&(C.Util.NumberUtils.isInteger(w.year)&&C.Util.NumberUtils.isInteger(w.month)&&C.Util.NumberUtils.isInteger(w.day)||C.Util.NumberUtils.isInteger(w.hour)&&C.Util.NumberUtils.isInteger(w.minute)&&C.Util.NumberUtils.isInteger(w.second))},CLASS_NAME:"Jsonix.Schema.XSD.Calendar"}),C.Schema.XSD.Calendar.YEAR_PATTERN="-?([1-9][0-9]*)?((?!(0000))[0-9]{4})",C.Schema.XSD.Calendar.TIMEZONE_PATTERN="Z|([\\-\\+])(((0[0-9]|1[0-3]):([0-5][0-9]))|(14:00))",C.Schema.XSD.Calendar.MONTH_PATTERN="(0[1-9]|1[0-2])",C.Schema.XSD.Calendar.SINGLE_MONTH_PATTERN="\\-\\-"+C.Schema.XSD.Calendar.MONTH_PATTERN,C.Schema.XSD.Calendar.DAY_PATTERN="(0[1-9]|[12][0-9]|3[01])",C.Schema.XSD.Calendar.SINGLE_DAY_PATTERN="\\-\\-\\-"+C.Schema.XSD.Calendar.DAY_PATTERN,C.Schema.XSD.Calendar.GYEAR_PATTERN="("+C.Schema.XSD.Calendar.YEAR_PATTERN+")("+C.Schema.XSD.Calendar.TIMEZONE_PATTERN+")?",C.Schema.XSD.Calendar.GMONTH_PATTERN="("+C.Schema.XSD.Calendar.SINGLE_MONTH_PATTERN+")("+C.Schema.XSD.Calendar.TIMEZONE_PATTERN+")?",C.Schema.XSD.Calendar.GDAY_PATTERN="("+C.Schema.XSD.Calendar.SINGLE_DAY_PATTERN+")("+C.Schema.XSD.Calendar.TIMEZONE_PATTERN+")?",C.Schema.XSD.Calendar.GYEAR_MONTH_PATTERN="("+C.Schema.XSD.Calendar.YEAR_PATTERN+")-("+C.Schema.XSD.Calendar.DAY_PATTERN+")("+C.Schema.XSD.Calendar.TIMEZONE_PATTERN+")?",C.Schema.XSD.Calendar.GMONTH_DAY_PATTERN="("+C.Schema.XSD.Calendar.SINGLE_MONTH_PATTERN+")-("+C.Schema.XSD.Calendar.DAY_PATTERN+")("+C.Schema.XSD.Calendar.TIMEZONE_PATTERN+")?",C.Schema.XSD.Calendar.DATE_PART_PATTERN="("+C.Schema.XSD.Calendar.YEAR_PATTERN+")-("+C.Schema.XSD.Calendar.MONTH_PATTERN+")-("+C.Schema.XSD.Calendar.DAY_PATTERN+")",C.Schema.XSD.Calendar.TIME_PART_PATTERN="([0-1][0-9]|2[0-3]):([0-5][0-9]):([0-5][0-9])(\\.([0-9]+))?",C.Schema.XSD.Calendar.TIME_PATTERN=C.Schema.XSD.Calendar.TIME_PART_PATTERN+"("+C.Schema.XSD.Calendar.TIMEZONE_PATTERN+")?",C.Schema.XSD.Calendar.DATE_PATTERN=C.Schema.XSD.Calendar.DATE_PART_PATTERN+"("+C.Schema.XSD.Calendar.TIMEZONE_PATTERN+")?",C.Schema.XSD.Calendar.DATETIME_PATTERN=C.Schema.XSD.Calendar.DATE_PART_PATTERN+"T"+C.Schema.XSD.Calendar.TIME_PART_PATTERN+"("+C.Schema.XSD.Calendar.TIMEZONE_PATTERN+")?",C.Schema.XSD.Calendar.INSTANCE=new C.Schema.XSD.Calendar,C.Schema.XSD.Calendar.INSTANCE.LIST=new C.Schema.XSD.List(C.Schema.XSD.Calendar.INSTANCE),C.Schema.XSD.Duration=C.Class(C.Schema.XSD.AnySimpleType,{name:"Duration",typeName:C.Schema.XSD.qname("duration"),isInstance:function(w,R,O){return C.Util.Type.isObject(w)&&((!C.Util.Type.exists(w.sign)||-1===w.sign||1===w.sign)(C.Util.NumberUtils.isInteger(w.years)&&w.years>=0)||C.Util.NumberUtils.isInteger(w.months)&&w.months>=0||C.Util.NumberUtils.isInteger(w.days)&&w.days>=0||C.Util.NumberUtils.isInteger(w.hours)&&w.hours>=0||C.Util.NumberUtils.isInteger(w.minutes)&&w.minutes>=0||C.Util.Type.isNumber(w.seconds)&&w.seconds>=0)},validate:function(w){if(C.Util.Ensure.ensureObject(w),C.Util.Type.exists(w.sign)&&1!==w.sign&&-1!==w.sign)throw new Error("Sign of the duration ["+w.sign+"] must be either [1] or [-1].");var R=!0,O=function(j,X){if(C.Util.Type.exists(j)){if(C.Util.NumberUtils.isInteger(j)&&j>=0)return!0;throw new Error(X.replace("{0}",j))}return!1};if(R=(R=(R=(R=(R=(R=R&&!O(w.years,"Number of years [{0}] must be an unsigned integer."))&&!O(w.months,"Number of months [{0}] must be an unsigned integer."))&&!O(w.days,"Number of days [{0}] must be an unsigned integer."))&&!O(w.hours,"Number of hours [{0}] must be an unsigned integer."))&&!O(w.minutes,"Number of minutes [{0}] must be an unsigned integer."))&&!function(j,X){if(C.Util.Type.exists(j)){if(C.Util.Type.isNumber(j)&&j>=0)return!0;throw new Error("Number of seconds [{0}] must be an unsigned number.".replace("{0}",j))}return!1}(w.seconds))throw new Error("At least one of the components (years, months, days, hours, minutes, seconds) must be set.")},print:function(w,R,O,k){this.validate(w);var j="";return-1===w.sign&&(j+="-"),j+="P",C.Util.Type.exists(w.years)&&(j+=w.years+"Y"),C.Util.Type.exists(w.months)&&(j+=w.months+"M"),C.Util.Type.exists(w.days)&&(j+=w.days+"D"),(C.Util.Type.exists(w.hours)||C.Util.Type.exists(w.minutes)||C.Util.Type.exists(w.seconds))&&(j+="T",C.Util.Type.exists(w.hours)&&(j+=w.hours+"H"),C.Util.Type.exists(w.minutes)&&(j+=w.minutes+"M"),C.Util.Type.exists(w.seconds)&&(j+=w.seconds+"S")),j},parse:function(w,R,O,k){var j=new RegExp("^"+C.Schema.XSD.Duration.PATTERN+"$"),X=w.match(j);if(null!==X){var $={};return X[1]&&($.sign=-1),X[3]&&($.years=parseInt(X[3],10)),X[5]&&($.months=parseInt(X[5],10)),X[7]&&($.days=parseInt(X[7],10)),X[10]&&($.hours=parseInt(X[10],10)),X[12]&&($.minutes=parseInt(X[12],10)),X[14]&&($.seconds=Number(X[14])),$}throw new Error("Value ["+w+"] does not match the duration pattern.")},CLASS_NAME:"Jsonix.Schema.XSD.Duration"}),C.Schema.XSD.Duration.PATTERN="(-)?P(([0-9]+)Y)?(([0-9]+)M)?(([0-9]+)D)?(T(([0-9]+)H)?(([0-9]+)M)?(([0-9]+(\\.[0-9]+)?)S)?)?",C.Schema.XSD.Duration.INSTANCE=new C.Schema.XSD.Duration,C.Schema.XSD.Duration.INSTANCE.LIST=new C.Schema.XSD.List(C.Schema.XSD.Duration.INSTANCE),C.Schema.XSD.DateTime=C.Class(C.Schema.XSD.Calendar,{name:"DateTime",typeName:C.Schema.XSD.qname("dateTime"),parse:function(w,R,O,k){return this.parseDateTime(w)},print:function(w,R,O,k){return this.printDateTime(w)},CLASS_NAME:"Jsonix.Schema.XSD.DateTime"}),C.Schema.XSD.DateTime.INSTANCE=new C.Schema.XSD.DateTime,C.Schema.XSD.DateTime.INSTANCE.LIST=new C.Schema.XSD.List(C.Schema.XSD.DateTime.INSTANCE),C.Schema.XSD.DateTimeAsDate=C.Class(C.Schema.XSD.Calendar,{name:"DateTimeAsDate",typeName:C.Schema.XSD.qname("dateTime"),parse:function(w,R,O,k){var j=this.parseDateTime(w),X=new Date;X.setFullYear(j.year),X.setMonth(j.month-1),X.setDate(j.day),X.setHours(j.hour),X.setMinutes(j.minute),X.setSeconds(j.second),C.Util.Type.isNumber(j.fractionalSecond)&&X.setMilliseconds(Math.floor(1e3*j.fractionalSecond));var ee,$,re=-X.getTimezoneOffset();C.Util.NumberUtils.isInteger(j.timezone)?(ee=j.timezone,$=!1):(ee=re,$=!0);var ge=new Date(X.getTime()+6e4*(-ee+re));return ge.originalTimezone=$?null:j.timezone,ge},print:function(w,R,O,k){C.Util.Ensure.ensureDate(w);var j,ee,X=-w.getTimezoneOffset();return null===w.originalTimezone?this.printDateTime(new C.XML.Calendar({year:w.getFullYear(),month:w.getMonth()+1,day:w.getDate(),hour:w.getHours(),minute:w.getMinutes(),second:w.getSeconds(),fractionalSecond:w.getMilliseconds()/1e3})):(C.Util.NumberUtils.isInteger(w.originalTimezone)?(j=w.originalTimezone,ee=new Date(w.getTime()-6e4*(-j+X))):(j=X,ee=w),this.printDateTime(new C.XML.Calendar({year:ee.getFullYear(),month:ee.getMonth()+1,day:ee.getDate(),hour:ee.getHours(),minute:ee.getMinutes(),second:ee.getSeconds(),fractionalSecond:ee.getMilliseconds()/1e3,timezone:j})))},isInstance:function(w,R,O){return C.Util.Type.isDate(w)},CLASS_NAME:"Jsonix.Schema.XSD.DateTimeAsDate"}),C.Schema.XSD.DateTimeAsDate.INSTANCE=new C.Schema.XSD.DateTimeAsDate,C.Schema.XSD.DateTimeAsDate.INSTANCE.LIST=new C.Schema.XSD.List(C.Schema.XSD.DateTimeAsDate.INSTANCE),C.Schema.XSD.Time=C.Class(C.Schema.XSD.Calendar,{name:"Time",typeName:C.Schema.XSD.qname("time"),parse:function(w,R,O,k){return this.parseTime(w)},print:function(w,R,O,k){return this.printTime(w)},CLASS_NAME:"Jsonix.Schema.XSD.Time"}),C.Schema.XSD.Time.INSTANCE=new C.Schema.XSD.Time,C.Schema.XSD.Time.INSTANCE.LIST=new C.Schema.XSD.List(C.Schema.XSD.Time.INSTANCE),C.Schema.XSD.TimeAsDate=C.Class(C.Schema.XSD.Calendar,{name:"TimeAsDate",typeName:C.Schema.XSD.qname("time"),parse:function(w,R,O,k){var j=this.parseTime(w),X=new Date;X.setFullYear(1970),X.setMonth(0),X.setDate(1),X.setHours(j.hour),X.setMinutes(j.minute),X.setSeconds(j.second),C.Util.Type.isNumber(j.fractionalSecond)&&X.setMilliseconds(Math.floor(1e3*j.fractionalSecond));var ee,$,re=-X.getTimezoneOffset();C.Util.NumberUtils.isInteger(j.timezone)?(ee=j.timezone,$=!1):(ee=re,$=!0);var ge=new Date(X.getTime()+6e4*(-ee+re));return ge.originalTimezone=$?null:ee,ge},print:function(w,R,O,k){C.Util.Ensure.ensureDate(w);var j=w.getTime();if(j<=-864e5&&j>=864e5)throw new Error("Invalid time ["+w+"].");if(null===w.originalTimezone)return this.printTime(new C.XML.Calendar({hour:w.getHours(),minute:w.getMinutes(),second:w.getSeconds(),fractionalSecond:w.getMilliseconds()/1e3}));var X,ee,$=-w.getTimezoneOffset();C.Util.NumberUtils.isInteger(w.originalTimezone)?(ee=w.originalTimezone,X=new Date(w.getTime()-6e4*(-ee+$))):(ee=$,X=w);var re=X.getTime();if(re>=6e4*-$)return this.printTime(new C.XML.Calendar({hour:X.getHours(),minute:X.getMinutes(),second:X.getSeconds(),fractionalSecond:X.getMilliseconds()/1e3,timezone:ee}));var ge=Math.ceil(-re/36e5),Le=X.getSeconds()+60*X.getMinutes()+3600*X.getHours()+3600*ge-60*ee;return this.printTime(new C.XML.Calendar({hour:Le%86400,minute:Le%3600,second:Le%60,fractionalSecond:X.getMilliseconds()/1e3,timezone:60*ge}))},isInstance:function(w,R,O){return C.Util.Type.isDate(w)&&w.getTime()>-864e5&&w.getTime()<864e5},CLASS_NAME:"Jsonix.Schema.XSD.TimeAsDate"}),C.Schema.XSD.TimeAsDate.INSTANCE=new C.Schema.XSD.TimeAsDate,C.Schema.XSD.TimeAsDate.INSTANCE.LIST=new C.Schema.XSD.List(C.Schema.XSD.TimeAsDate.INSTANCE),C.Schema.XSD.Date=C.Class(C.Schema.XSD.Calendar,{name:"Date",typeName:C.Schema.XSD.qname("date"),parse:function(w,R,O,k){return this.parseDate(w)},print:function(w,R,O,k){return this.printDate(w)},CLASS_NAME:"Jsonix.Schema.XSD.Date"}),C.Schema.XSD.Date.INSTANCE=new C.Schema.XSD.Date,C.Schema.XSD.Date.INSTANCE.LIST=new C.Schema.XSD.List(C.Schema.XSD.Date.INSTANCE),C.Schema.XSD.DateAsDate=C.Class(C.Schema.XSD.Calendar,{name:"DateAsDate",typeName:C.Schema.XSD.qname("date"),parse:function(w,R,O,k){var j=this.parseDate(w),X=new Date;X.setFullYear(j.year),X.setMonth(j.month-1),X.setDate(j.day),X.setHours(0),X.setMinutes(0),X.setSeconds(0),X.setMilliseconds(0),C.Util.Type.isNumber(j.fractionalSecond)&&X.setMilliseconds(Math.floor(1e3*j.fractionalSecond));var ee,$,re=-X.getTimezoneOffset();C.Util.NumberUtils.isInteger(j.timezone)?(ee=j.timezone,$=!1):(ee=re,$=!0);var ge=new Date(X.getTime()+6e4*(-ee+re));return ge.originalTimezone=$?null:ee,ge},print:function(w,R,O,k){C.Util.Ensure.ensureDate(w);var j=new Date(w.getTime());if(j.setHours(0),j.setMinutes(0),j.setSeconds(0),j.setMilliseconds(0),null===w.originalTimezone)return this.printDate(new C.XML.Calendar({year:w.getFullYear(),month:w.getMonth()+1,day:w.getDate()}));if(C.Util.NumberUtils.isInteger(w.originalTimezone)){var X=new Date(w.getTime()-6e4*(-w.originalTimezone-w.getTimezoneOffset()));return this.printDate(new C.XML.Calendar({year:X.getFullYear(),month:X.getMonth()+1,day:X.getDate(),timezone:w.originalTimezone}))}var ee=-w.getTime()+j.getTime();if(0===ee)return this.printDate(new C.XML.Calendar({year:w.getFullYear(),month:w.getMonth()+1,day:w.getDate()}));var $=ee-6e4*w.getTimezoneOffset();if($>=-432e5)return this.printDate(new C.XML.Calendar({year:w.getFullYear(),month:w.getMonth()+1,day:w.getDate(),timezone:Math.floor($/6e4)}));var re=new Date(w.getTime()+864e5);return this.printDate(new C.XML.Calendar({year:re.getFullYear(),month:re.getMonth()+1,day:re.getDate(),timezone:Math.floor($/6e4)+1440}))},isInstance:function(w,R,O){return C.Util.Type.isDate(w)},CLASS_NAME:"Jsonix.Schema.XSD.DateAsDate"}),C.Schema.XSD.DateAsDate.INSTANCE=new C.Schema.XSD.DateAsDate,C.Schema.XSD.DateAsDate.INSTANCE.LIST=new C.Schema.XSD.List(C.Schema.XSD.DateAsDate.INSTANCE),C.Schema.XSD.GYearMonth=C.Class(C.Schema.XSD.Calendar,{name:"GYearMonth",typeName:C.Schema.XSD.qname("gYearMonth"),CLASS_NAME:"Jsonix.Schema.XSD.GYearMonth",parse:function(w,R,O,k){return this.parseGYearMonth(w,R,O,k)},print:function(w,R,O,k){return this.printGYearMonth(w,R,O,k)}}),C.Schema.XSD.GYearMonth.INSTANCE=new C.Schema.XSD.GYearMonth,C.Schema.XSD.GYearMonth.INSTANCE.LIST=new C.Schema.XSD.List(C.Schema.XSD.GYearMonth.INSTANCE),C.Schema.XSD.GYear=C.Class(C.Schema.XSD.Calendar,{name:"GYear",typeName:C.Schema.XSD.qname("gYear"),CLASS_NAME:"Jsonix.Schema.XSD.GYear",parse:function(w,R,O,k){return this.parseGYear(w,R,O,k)},print:function(w,R,O,k){return this.printGYear(w,R,O,k)}}),C.Schema.XSD.GYear.INSTANCE=new C.Schema.XSD.GYear,C.Schema.XSD.GYear.INSTANCE.LIST=new C.Schema.XSD.List(C.Schema.XSD.GYear.INSTANCE),C.Schema.XSD.GMonthDay=C.Class(C.Schema.XSD.Calendar,{name:"GMonthDay",typeName:C.Schema.XSD.qname("gMonthDay"),CLASS_NAME:"Jsonix.Schema.XSD.GMonthDay",parse:function(w,R,O,k){return this.parseGMonthDay(w,R,O,k)},print:function(w,R,O,k){return this.printGMonthDay(w,R,O,k)}}),C.Schema.XSD.GMonthDay.INSTANCE=new C.Schema.XSD.GMonthDay,C.Schema.XSD.GMonthDay.INSTANCE.LIST=new C.Schema.XSD.List(C.Schema.XSD.GMonthDay.INSTANCE),C.Schema.XSD.GDay=C.Class(C.Schema.XSD.Calendar,{name:"GDay",typeName:C.Schema.XSD.qname("gDay"),CLASS_NAME:"Jsonix.Schema.XSD.GDay",parse:function(w,R,O,k){return this.parseGDay(w,R,O,k)},print:function(w,R,O,k){return this.printGDay(w,R,O,k)}}),C.Schema.XSD.GDay.INSTANCE=new C.Schema.XSD.GDay,C.Schema.XSD.GDay.INSTANCE.LIST=new C.Schema.XSD.List(C.Schema.XSD.GDay.INSTANCE),C.Schema.XSD.GMonth=C.Class(C.Schema.XSD.Calendar,{name:"GMonth",typeName:C.Schema.XSD.qname("gMonth"),CLASS_NAME:"Jsonix.Schema.XSD.GMonth",parse:function(w,R,O,k){return this.parseGMonth(w,R,O,k)},print:function(w,R,O,k){return this.printGMonth(w,R,O,k)}}),C.Schema.XSD.GMonth.INSTANCE=new C.Schema.XSD.GMonth,C.Schema.XSD.GMonth.INSTANCE.LIST=new C.Schema.XSD.List(C.Schema.XSD.GMonth.INSTANCE),C.Schema.XSD.ID=C.Class(C.Schema.XSD.String,{name:"ID",typeName:C.Schema.XSD.qname("ID"),CLASS_NAME:"Jsonix.Schema.XSD.ID"}),C.Schema.XSD.ID.INSTANCE=new C.Schema.XSD.ID,C.Schema.XSD.ID.INSTANCE.LIST=new C.Schema.XSD.List(C.Schema.XSD.ID.INSTANCE),C.Schema.XSD.IDREF=C.Class(C.Schema.XSD.String,{name:"IDREF",typeName:C.Schema.XSD.qname("IDREF"),CLASS_NAME:"Jsonix.Schema.XSD.IDREF"}),C.Schema.XSD.IDREF.INSTANCE=new C.Schema.XSD.IDREF,C.Schema.XSD.IDREF.INSTANCE.LIST=new C.Schema.XSD.List(C.Schema.XSD.IDREF.INSTANCE),C.Schema.XSD.IDREFS=C.Class(C.Schema.XSD.List,{name:"IDREFS",initialize:function(){C.Schema.XSD.List.prototype.initialize.apply(this,[C.Schema.XSD.IDREF.INSTANCE,C.Schema.XSD.qname("IDREFS")," "])},CLASS_NAME:"Jsonix.Schema.XSD.IDREFS"}),C.Schema.XSD.IDREFS.INSTANCE=new C.Schema.XSD.IDREFS,C.Schema.XSI={},C.Schema.XSI.NAMESPACE_URI="http://www.w3.org/2001/XMLSchema-instance",C.Schema.XSI.PREFIX="xsi",C.Schema.XSI.TYPE="type",C.Schema.XSI.NIL="nil",C.Schema.XSI.qname=function(w){return C.Util.Ensure.ensureString(w),new C.XML.QName(C.Schema.XSI.NAMESPACE_URI,w,C.Schema.XSI.PREFIX)},C.Schema.XSI.TYPE_QNAME=C.Schema.XSI.qname(C.Schema.XSI.TYPE),C.Context=C.Class(C.Mapping.Styled,{modules:[],typeInfos:null,typeNameKeyToTypeInfo:null,elementInfos:null,options:null,substitutionMembersMap:null,scopedElementInfosMap:null,supportXsiType:!0,initialize:function(w,R){for(var O in C.Mapping.Styled.prototype.initialize.apply(this,[R]),this.modules=[],this.elementInfos=[],this.typeInfos={},this.typeNameKeyToTypeInfo={},this.registerBuiltinTypeInfos(),this.namespacePrefixes={},this.prefixNamespaces={},this.substitutionMembersMap={},this.scopedElementInfosMap={},C.Util.Type.exists(R)&&(C.Util.Ensure.ensureObject(R),C.Util.Type.isObject(R.namespacePrefixes)&&(this.namespacePrefixes=C.Util.Type.cloneObject(R.namespacePrefixes,{})),C.Util.Type.isBoolean(R.supportXsiType)&&(this.supportXsiType=R.supportXsiType)),this.namespacePrefixes)this.namespacePrefixes.hasOwnProperty(O)&&(p=this.namespacePrefixes[O],this.prefixNamespaces[p]=O);var k,X;if(C.Util.Type.exists(w))for(C.Util.Ensure.ensureArray(w),k=0;k<w.length;k++)X=this.createModule(w[k]),this.modules[k]=X;this.processModules()},createModule:function(w){var R;return w instanceof this.mappingStyle.module?R=w:(w=C.Util.Type.cloneObject(w),R=new this.mappingStyle.module(w,{mappingStyle:this.mappingStyle})),R},registerBuiltinTypeInfos:function(){for(var w=0;w<this.builtinTypeInfos.length;w++)this.registerTypeInfo(this.builtinTypeInfos[w])},processModules:function(){var w;for(w=0;w<this.modules.length;w++)this.modules[w].registerTypeInfos(this);for(w=0;w<this.modules.length;w++)this.modules[w].registerElementInfos(this);for(w=0;w<this.modules.length;w++)this.modules[w].buildTypeInfos(this);for(w=0;w<this.modules.length;w++)this.modules[w].buildElementInfos(this)},registerTypeInfo:function(w){C.Util.Ensure.ensureObject(w);var R=w.name||w.n||null;C.Util.Ensure.ensureString(R),this.typeInfos[R]=w,w.typeName&&w.typeName.key&&(this.typeNameKeyToTypeInfo[w.typeName.key]=w)},resolveTypeInfo:function(w,R){if(C.Util.Type.exists(w)){if(w instanceof C.Model.TypeInfo)return w;if(C.Util.Type.isString(w)){var O;if(w.length>0&&"."===w.charAt(0)){var k=R.name||R.n||void 0;C.Util.Ensure.ensureObject(R,"Type info mapping can only be resolved if module is provided."),C.Util.Ensure.ensureString(k,"Type info mapping can only be resolved if module name is provided."),O=k+w}else O=w;if(this.typeInfos[O])return this.typeInfos[O];throw new Error("Type info ["+O+"] is not known in this context.")}C.Util.Ensure.ensureObject(R,"Type info mapping can only be resolved if module is provided.");var j=R.createTypeInfo(w);return j.build(this,R),j}return null},registerElementInfo:function(w,R){if(C.Util.Ensure.ensureObject(w),this.elementInfos.push(w),C.Util.Type.exists(w.substitutionHead)){var k=w.substitutionHead.key,j=this.substitutionMembersMap[k];C.Util.Type.isArray(j)||(this.substitutionMembersMap[k]=j=[]),j.push(w)}var X;X=C.Util.Type.exists(w.scope)?this.resolveTypeInfo(w.scope,R).name:"##global";var ee=this.scopedElementInfosMap[X];C.Util.Type.isObject(ee)||(this.scopedElementInfosMap[X]=ee={}),ee[w.elementName.key]=w},getTypeInfoByValue:function(w){if(C.Util.Type.exists(w)&&C.Util.Type.isObject(w)){var R=w.TYPE_NAME;if(C.Util.Type.isString(R)){var O=this.getTypeInfoByName(R);if(O)return O}}},getTypeInfoByName:function(w){return this.typeInfos[w]},getTypeInfoByTypeName:function(w){var R=C.XML.QName.fromObjectOrString(w,this);return this.typeNameKeyToTypeInfo[R.key]},getTypeInfoByTypeNameKey:function(w){return this.typeNameKeyToTypeInfo[w]},getElementInfo:function(w,R){if(C.Util.Type.exists(R)){var k=this.scopedElementInfosMap[R.name];if(C.Util.Type.exists(k)){var j=k[w.key];if(C.Util.Type.exists(j))return j}}var ee=this.scopedElementInfosMap["##global"];if(C.Util.Type.exists(ee)){var $=ee[w.key];if(C.Util.Type.exists($))return $}return null},getSubstitutionMembers:function(w){return this.substitutionMembersMap[C.XML.QName.fromObject(w).key]},createMarshaller:function(){return new this.mappingStyle.marshaller(this)},createUnmarshaller:function(){return new this.mappingStyle.unmarshaller(this)},getNamespaceURI:function(w){return C.Util.Ensure.ensureString(w),this.prefixNamespaces[w]},getPrefix:function(w,R){C.Util.Ensure.ensureString(w);var O=this.namespacePrefixes[w];return C.Util.Type.isString(O)?O:R},builtinTypeInfos:[C.Schema.XSD.AnyType.INSTANCE,C.Schema.XSD.AnySimpleType.INSTANCE,C.Schema.XSD.AnyURI.INSTANCE,C.Schema.XSD.Base64Binary.INSTANCE,C.Schema.XSD.Boolean.INSTANCE,C.Schema.XSD.Byte.INSTANCE,C.Schema.XSD.Calendar.INSTANCE,C.Schema.XSD.DateAsDate.INSTANCE,C.Schema.XSD.Date.INSTANCE,C.Schema.XSD.DateTimeAsDate.INSTANCE,C.Schema.XSD.DateTime.INSTANCE,C.Schema.XSD.Decimal.INSTANCE,C.Schema.XSD.Double.INSTANCE,C.Schema.XSD.Duration.INSTANCE,C.Schema.XSD.Float.INSTANCE,C.Schema.XSD.GDay.INSTANCE,C.Schema.XSD.GMonth.INSTANCE,C.Schema.XSD.GMonthDay.INSTANCE,C.Schema.XSD.GYear.INSTANCE,C.Schema.XSD.GYearMonth.INSTANCE,C.Schema.XSD.HexBinary.INSTANCE,C.Schema.XSD.ID.INSTANCE,C.Schema.XSD.IDREF.INSTANCE,C.Schema.XSD.IDREFS.INSTANCE,C.Schema.XSD.Int.INSTANCE,C.Schema.XSD.Integer.INSTANCE,C.Schema.XSD.Language.INSTANCE,C.Schema.XSD.Long.INSTANCE,C.Schema.XSD.Name.INSTANCE,C.Schema.XSD.NCName.INSTANCE,C.Schema.XSD.NegativeInteger.INSTANCE,C.Schema.XSD.NMToken.INSTANCE,C.Schema.XSD.NMTokens.INSTANCE,C.Schema.XSD.NonNegativeInteger.INSTANCE,C.Schema.XSD.NonPositiveInteger.INSTANCE,C.Schema.XSD.NormalizedString.INSTANCE,C.Schema.XSD.Number.INSTANCE,C.Schema.XSD.PositiveInteger.INSTANCE,C.Schema.XSD.QName.INSTANCE,C.Schema.XSD.Short.INSTANCE,C.Schema.XSD.String.INSTANCE,C.Schema.XSD.Strings.INSTANCE,C.Schema.XSD.TimeAsDate.INSTANCE,C.Schema.XSD.Time.INSTANCE,C.Schema.XSD.Token.INSTANCE,C.Schema.XSD.UnsignedByte.INSTANCE,C.Schema.XSD.UnsignedInt.INSTANCE,C.Schema.XSD.UnsignedLong.INSTANCE,C.Schema.XSD.UnsignedShort.INSTANCE],CLASS_NAME:"Jsonix.Context"}),{Jsonix:C}};if("function"!=typeof qe)if(typeof window>"u"&&!process.browser){var qe=ct(255)(Un);qe(["xmldom","xmlhttprequest","fs"],Lt)}else Un.exports=Lt();else qe([],Lt)},255:(Un,Vn,ct)=>{"use strict";Un.exports=function Lt(qe,Pt){var w,R,Ie={},ue={},Ee=!1,C=ct(324);function k(re,ge){var Le;return re&&"."===re.charAt(0)&&ge&&(function O(re){var ge,Le;for(ge=0;re[ge];ge+=1)if("."===(Le=re[ge]))re.splice(ge,1),ge-=1;else if(".."===Le){if(1===ge&&(".."===re[2]||".."===re[0]))break;ge>0&&(re.splice(ge-1,2),ge-=2)}}(Le=(Le=(Le=ge.split("/")).slice(0,Le.length-1)).concat(re.split("/"))),re=Le.join("/")),re}function ee(re,ge,Le){var Ge,ft,xt,wt;if(re)ft=ue[re]={},xt={id:re,uri:__filename,exports:ft},Ge=w(Pt,ft,xt,re);else{if(Ee)throw new Error("amdefine with no module ID cannot be called more than once per file.");Ee=!0,Ge=w(Pt,ft=qe.exports,xt=qe,qe.id)}ge&&(ge=ge.map(function(gn){return Ge(gn)})),void 0!==(wt="function"==typeof Le?Le.apply(xt.exports,ge):Le)&&(xt.exports=wt,re&&(ue[re]=xt.exports))}function $(re,ge,Le){Array.isArray(re)?(Le=ge,ge=re,re=void 0):"string"!=typeof re&&(Le=re,re=ge=void 0),ge&&!Array.isArray(ge)&&(Le=ge,ge=void 0),ge||(ge=["require","exports","module"]),re?Ie[re]=[re,ge,Le]:ee(re,ge,Le)}return w=function(re,ge,Le,Ge){function ft(xt,wt){if("string"==typeof xt)return R(re,ge,Le,xt,Ge);xt=xt.map(function(gn){return R(re,ge,Le,gn,Ge)}),wt&&process.nextTick(function(){wt.apply(null,xt)})}return ft.toUrl=function(xt){return 0===xt.indexOf(".")?k(xt,C.dirname(Le.filename)):xt},ft},Pt=Pt||function(){return qe.require.apply(qe,arguments)},R=function(re,ge,Le,Ge,ft){var gn,xn,xt=Ge.indexOf("!"),wt=Ge;if(-1===xt){if("require"===(Ge=k(Ge,ft)))return w(re,ge,Le,ft);if("exports"===Ge)return ge;if("module"===Ge)return Le;if(ue.hasOwnProperty(Ge))return ue[Ge];if(Ie[Ge])return ee.apply(null,Ie[Ge]),ue[Ge];if(re)return re(wt);throw new Error("No module with ID: "+Ge)}return gn=Ge.substring(0,xt),Ge=Ge.substring(xt+1,Ge.length),Ge=(xn=R(re,ge,Le,gn,ft)).normalize?xn.normalize(Ge,function j(re){return function(ge){return k(ge,re)}}(ft)):k(Ge,ft),ue[Ge]||xn.load(Ge,w(re,ge,Le,ft),function X(re){function ge(Le){ue[re]=Le}return ge.fromText=function(Le,Ge){throw new Error("amdefine does not implement load.fromText")},ge}(Ge),{}),ue[Ge]},$.require=function(re){return ue[re]?ue[re]:Ie[re]?(ee.apply(null,Ie[re]),ue[re]):void 0},$.amd={},$}},658:(Un,Vn)=>{Vn.read=function(ct,Lt,qe,Pt,Ie){var ue,Ee,C=8*Ie-Pt-1,w=(1<<C)-1,R=w>>1,O=-7,k=qe?Ie-1:0,j=qe?-1:1,X=ct[Lt+k];for(k+=j,ue=X&(1<<-O)-1,X>>=-O,O+=C;O>0;ue=256*ue+ct[Lt+k],k+=j,O-=8);for(Ee=ue&(1<<-O)-1,ue>>=-O,O+=Pt;O>0;Ee=256*Ee+ct[Lt+k],k+=j,O-=8);if(0===ue)ue=1-R;else{if(ue===w)return Ee?NaN:1/0*(X?-1:1);Ee+=Math.pow(2,Pt),ue-=R}return(X?-1:1)*Ee*Math.pow(2,ue-Pt)},Vn.write=function(ct,Lt,qe,Pt,Ie,ue){var Ee,C,w,R=8*ue-Ie-1,O=(1<<R)-1,k=O>>1,j=23===Ie?Math.pow(2,-24)-Math.pow(2,-77):0,X=Pt?0:ue-1,ee=Pt?1:-1,$=Lt<0||0===Lt&&1/Lt<0?1:0;for(Lt=Math.abs(Lt),isNaN(Lt)||Lt===1/0?(C=isNaN(Lt)?1:0,Ee=O):(Ee=Math.floor(Math.log(Lt)/Math.LN2),Lt*(w=Math.pow(2,-Ee))<1&&(Ee--,w*=2),(Lt+=Ee+k>=1?j/w:j*Math.pow(2,1-k))*w>=2&&(Ee++,w/=2),Ee+k>=O?(C=0,Ee=O):Ee+k>=1?(C=(Lt*w-1)*Math.pow(2,Ie),Ee+=k):(C=Lt*Math.pow(2,k-1)*Math.pow(2,Ie),Ee=0));Ie>=8;ct[qe+X]=255&C,X+=ee,C/=256,Ie-=8);for(Ee=Ee<<Ie|C,R+=Ie;R>0;ct[qe+X]=255&Ee,X+=ee,Ee/=256,R-=8);ct[qe+X-ee]|=128*$}},578:(Un,Vn)=>{var ct,qe;void 0!==(qe="function"==typeof(ct=function(){return{GML_3_1_1:{n:"GML_3_1_1",dens:"http://www.opengis.net/gml",dans:"http://www.w3.org/1999/xlink",deps:["SMIL_2_0_Language","XLink_1_0"],tis:[{ln:"PointPropertyType",ps:[{n:"point",rq:!0,en:"Point",ti:".PointType"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"TopoPrimitiveArrayAssociationType",ps:[{n:"topoPrimitive",mno:0,col:!0,mx:!1,dom:!1,en:"_TopoPrimitive",ti:".AbstractTopoPrimitiveType",t:"er"}]},{ln:"CurveArrayPropertyType",ps:[{n:"curve",mno:0,col:!0,mx:!1,dom:!1,en:"_Curve",ti:".AbstractCurveType",t:"er"}]},{ln:"BaseUnitType",bti:".UnitDefinitionType",ps:[{n:"unitsSystem",rq:!0,ti:".ReferenceType"}]},{ln:"TimeNodeType",bti:".AbstractTimeTopologyPrimitiveType",ps:[{n:"previousEdge",mno:0,col:!0,ti:".TimeEdgePropertyType"},{n:"nextEdge",mno:0,col:!0,ti:".TimeEdgePropertyType"},{n:"position",ti:".TimeInstantPropertyType"}]},{ln:"DirectedEdgePropertyType",ps:[{n:"edge",rq:!0,en:"Edge",ti:".EdgeType"},{n:"orientation",an:{lp:"orientation"},t:"a"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"BagType",bti:".AbstractGMLType",ps:[{n:"member",mno:0,col:!0,ti:".AssociationType"},{n:"members",ti:".ArrayAssociationType"}]},{ln:"DatumRefType",ps:[{n:"datum",rq:!0,mx:!1,dom:!1,en:"_Datum",ti:".AbstractDatumType",t:"er"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"StyleVariationType",ps:[{n:"value",t:"v"},{n:"styleProperty",rq:!0,an:{lp:"styleProperty"},t:"a"},{n:"featurePropertyRange",an:{lp:"featurePropertyRange"},t:"a"}]},{ln:"CurvePropertyType",ps:[{n:"curve",rq:!0,mx:!1,dom:!1,en:"_Curve",ti:".AbstractCurveType",t:"er"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"GeographicCRSType",bti:".AbstractReferenceSystemType",ps:[{n:"usesEllipsoidalCS",rq:!0,ti:".EllipsoidalCSRefType"},{n:"usesGeodeticDatum",rq:!0,ti:".GeodeticDatumRefType"}]},{ln:"MultiSurfaceType",bti:".AbstractGeometricAggregateType",ps:[{n:"surfaceMember",mno:0,col:!0,ti:".SurfacePropertyType"},{n:"surfaceMembers",ti:".SurfaceArrayPropertyType"}]},{ln:"AbstractStyleType",bti:".AbstractGMLType"},{ln:"OperationParameterBaseType",bti:".AbstractGeneralOperationParameterType"},{ln:"TopoPointType",bti:".AbstractTopologyType",ps:[{n:"directedNode",rq:!0,ti:".DirectedNodePropertyType"}]},{ln:"AbstractGeneralDerivedCRSType",bti:".AbstractReferenceSystemType",ps:[{n:"baseCRS",rq:!0,ti:".CoordinateReferenceSystemRefType"},{n:"definedByConversion",rq:!0,ti:".GeneralConversionRefType"}]},{ln:"EllipsoidRefType",ps:[{n:"ellipsoid",rq:!0,en:"Ellipsoid",ti:".EllipsoidType"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"TinType.ControlPoint",tn:null,ps:[{n:"posList",rq:!0,ti:".DirectPositionListType"},{n:"geometricPositionGroup",rq:!0,mno:3,col:!0,etis:[{en:"pos",ti:".DirectPositionType"},{en:"pointProperty",ti:".PointPropertyType"}],t:"es"}]},{ln:"PointArrayPropertyType",ps:[{n:"point",mno:0,col:!0,en:"Point",ti:".PointType"}]},{ln:"CoordinatesType",ps:[{n:"value",t:"v"},{n:"decimal",an:{lp:"decimal"},t:"a"},{n:"cs",an:{lp:"cs"},t:"a"},{n:"ts",an:{lp:"ts"},t:"a"}]},{ln:"AbstractDatumType",bti:".AbstractDatumBaseType",ps:[{n:"datumID",mno:0,col:!0,ti:".IdentifierType"},{n:"remarks",ti:".StringOrRefType"},{n:"anchorPoint",ti:".CodeType"},{n:"realizationEpoch",ti:"Date"},{n:"validArea",ti:".ExtentType"},{n:"scope"}]},{ln:"LabelStyleType",bti:".BaseStyleDescriptorType",ps:[{n:"style",rq:!0},{n:"label",rq:!0,ti:".LabelType"}]},{ln:"OperationParameterType",bti:".OperationParameterBaseType",ps:[{n:"parameterID",mno:0,col:!0,ti:".IdentifierType"},{n:"remarks",ti:".StringOrRefType"}]},{ln:"CartesianCSType",bti:".AbstractCoordinateSystemType"},{ln:"ConversionToPreferredUnitType",bti:".UnitOfMeasureType",ps:[{n:"factor",rq:!0,ti:"Double"},{n:"formula",rq:!0,ti:".FormulaType"}]},{ln:"AbstractParametricCurveSurfaceType",bti:".AbstractSurfacePatchType"},{ln:"ProjectedCRSRefType",ps:[{n:"projectedCRS",rq:!0,en:"ProjectedCRS",ti:".ProjectedCRSType"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"TimePeriodType",bti:".AbstractTimeGeometricPrimitiveType",ps:[{n:"beginPosition",rq:!0,ti:".TimePositionType"},{n:"begin",rq:!0,ti:".TimeInstantPropertyType"},{n:"endPosition",rq:!0,ti:".TimePositionType"},{n:"end",rq:!0,ti:".TimeInstantPropertyType"},{n:"duration",rq:!0,ti:"Duration"},{n:"timeInterval",rq:!0,ti:".TimeIntervalLengthType"}]},{ln:"SurfacePatchArrayPropertyType",ps:[{n:"surfacePatch",mno:0,col:!0,mx:!1,dom:!1,en:"_SurfacePatch",ti:".AbstractSurfacePatchType",t:"er"}]},{ln:"AreaType",bti:".MeasureType"},{ln:"ArcStringType",bti:".AbstractCurveSegmentType",ps:[{n:"posOrPointPropertyOrPointRep",rq:!0,mno:3,col:!0,mx:!1,dom:!1,etis:[{en:"pointRep",ti:".PointPropertyType"},{en:"pointProperty",ti:".PointPropertyType"},{en:"pos",ti:".DirectPositionType"}],t:"ers"},{n:"posList",rq:!0,ti:".DirectPositionListType"},{n:"coordinates",rq:!0,ti:".CoordinatesType"},{n:"interpolation",an:{lp:"interpolation"},t:"a"},{n:"numArc",ti:"Integer",an:{lp:"numArc"},t:"a"}]},{ln:"TopoSolidType",bti:".AbstractTopoPrimitiveType",ps:[{n:"directedFace",rq:!0,col:!0,ti:".DirectedFacePropertyType"}]},{ln:"RangeParametersType",ps:[{n:"_boolean",rq:!0,en:"Boolean",ti:"Boolean"},{n:"category",rq:!0,en:"Category",ti:".CodeType"},{n:"quantity",rq:!0,en:"Quantity",ti:".MeasureType"},{n:"count",rq:!0,en:"Count",ti:"Integer"},{n:"booleanList",rq:!0,en:"BooleanList",ti:{t:"l"}},{n:"categoryList",rq:!0,en:"CategoryList",ti:".CodeOrNullListType"},{n:"quantityList",rq:!0,en:"QuantityList",ti:".MeasureOrNullListType"},{n:"countList",rq:!0,en:"CountList",ti:{t:"l"}},{n:"categoryExtent",rq:!0,en:"CategoryExtent",ti:".CategoryExtentType"},{n:"quantityExtent",rq:!0,en:"QuantityExtent",ti:".QuantityExtentType"},{n:"countExtent",rq:!0,en:"CountExtent",ti:{t:"l"}},{n:"compositeValue",rq:!0,mx:!1,dom:!1,en:"CompositeValue",ti:".CompositeValueType",t:"er"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"MultiPolygonPropertyType",ps:[{n:"multiPolygon",rq:!0,en:"MultiPolygon",ti:".MultiPolygonType"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"GeometryStyleType",bti:".BaseStyleDescriptorType",ps:[{n:"symbol",rq:!0,ti:".SymbolType"},{n:"style",rq:!0},{n:"labelStyle",ti:".LabelStylePropertyType"},{n:"geometryProperty",an:{lp:"geometryProperty"},t:"a"},{n:"geometryType",an:{lp:"geometryType"},t:"a"}]},{ln:"ExtentType",ps:[{n:"description",ti:".StringOrRefType"},{n:"boundingBox",mno:0,col:!0,ti:".EnvelopeType"},{n:"boundingPolygon",mno:0,col:!0,ti:".PolygonType"},{n:"verticalExtent",mno:0,col:!0,ti:".EnvelopeType"},{n:"temporalExtent",mno:0,col:!0,ti:".TimePeriodType"}]},{ln:"UserDefinedCSType",bti:".AbstractCoordinateSystemType"},{ln:"OrientableSurfaceType",bti:".AbstractSurfaceType",ps:[{n:"baseSurface",rq:!0,ti:".SurfacePropertyType"},{n:"orientation",an:{lp:"orientation"},t:"a"}]},{ln:"TemporalDatumRefType",ps:[{n:"temporalDatum",rq:!0,en:"TemporalDatum",ti:".TemporalDatumType"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"KnotPropertyType",ps:[{n:"knot",rq:!0,en:"Knot",ti:".KnotType"}]},{ln:"DefinitionProxyType",bti:".DefinitionType",ps:[{n:"definitionRef",rq:!0,ti:".ReferenceType"}]},{ln:"ArcByBulgeType",bti:".ArcStringByBulgeType"},{ln:"GeometricComplexPropertyType",ps:[{n:"geometricComplex",rq:!0,en:"GeometricComplex",ti:".GeometricComplexType"},{n:"compositeCurve",rq:!0,en:"CompositeCurve",ti:".CompositeCurveType"},{n:"compositeSurface",rq:!0,en:"CompositeSurface",ti:".CompositeSurfaceType"},{n:"compositeSolid",rq:!0,en:"CompositeSolid",ti:".CompositeSolidType"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"CompositeCurvePropertyType",ps:[{n:"compositeCurve",rq:!0,en:"CompositeCurve",ti:".CompositeCurveType"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"OperationParameterGroupBaseType",bti:".AbstractGeneralOperationParameterType"},{ln:"MultiPointCoverageType",bti:".AbstractDiscreteCoverageType"},{ln:"ReferenceType",ps:[{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"ImageCRSRefType",ps:[{n:"imageCRS",rq:!0,en:"ImageCRS",ti:".ImageCRSType"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"DefaultStylePropertyType",ps:[{n:"style",mx:!1,dom:!1,en:"_Style",ti:".AbstractStyleType",t:"er"},{n:"about",an:{lp:"about"},t:"a"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"AbstractTimeReferenceSystemType",bti:".DefinitionType",ps:[{n:"domainOfValidity"}]},{ln:"AbsoluteExternalPositionalAccuracyType",bti:".AbstractPositionalAccuracyType",ps:[{n:"result",rq:!0,ti:".MeasureType"}]},{ln:"TopoPrimitiveMemberType",ps:[{n:"topoPrimitive",mx:!1,dom:!1,en:"_TopoPrimitive",ti:".AbstractTopoPrimitiveType",t:"er"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"TimeOrdinalReferenceSystemType",bti:".AbstractTimeReferenceSystemType",ps:[{n:"component",rq:!0,col:!0,ti:".TimeOrdinalEraPropertyType"}]},{ln:"CompositeSolidType",bti:".AbstractSolidType",ps:[{n:"solidMember",rq:!0,col:!0,ti:".SolidPropertyType"}]},{ln:"GeocentricCRSRefType",ps:[{n:"geocentricCRS",rq:!0,en:"GeocentricCRS",ti:".GeocentricCRSType"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"MultiCurveType",bti:".AbstractGeometricAggregateType",ps:[{n:"curveMember",mno:0,col:!0,ti:".CurvePropertyType"},{n:"curveMembers",ti:".CurveArrayPropertyType"}]},{ln:"UnitDefinitionType",bti:".DefinitionType",ps:[{n:"quantityType",rq:!0,ti:".StringOrRefType"},{n:"catalogSymbol",ti:".CodeType"}]},{ln:"CurveSegmentArrayPropertyType",ps:[{n:"curveSegment",mno:0,col:!0,mx:!1,dom:!1,en:"_CurveSegment",ti:".AbstractCurveSegmentType",t:"er"}]},{ln:"AbstractTimePrimitiveType",bti:".AbstractTimeObjectType",ps:[{n:"relatedTime",mno:0,col:!0,ti:".RelatedTimeType"}]},{ln:"MultiPointType",bti:".AbstractGeometricAggregateType",ps:[{n:"pointMember",mno:0,col:!0,ti:".PointPropertyType"},{n:"pointMembers",ti:".PointArrayPropertyType"}]},{ln:"MultiPointPropertyType",ps:[{n:"multiPoint",rq:!0,en:"MultiPoint",ti:".MultiPointType"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"AbstractTimeTopologyPrimitiveType",bti:".AbstractTimePrimitiveType",ps:[{n:"complex",ti:".ReferenceType"}]},{ln:"KnotType",ps:[{n:"value",rq:!0,ti:"Double"},{n:"multiplicity",rq:!0,ti:"NonNegativeInteger"},{n:"weight",rq:!0,ti:"Double"}]},{ln:"CodeType",ps:[{n:"value",t:"v"},{n:"codeSpace",an:{lp:"codeSpace"},t:"a"}]},{ln:"AbstractTimeSliceType",bti:".AbstractGMLType",ps:[{n:"validTime",rq:!0,ti:".TimePrimitivePropertyType"},{n:"dataSource",ti:".StringOrRefType"}]},{ln:"DynamicFeatureType",bti:".AbstractFeatureType",ps:[{n:"validTime",ti:".TimePrimitivePropertyType"},{n:"history",mx:!1,dom:!1,ti:".HistoryPropertyType",t:"er"},{n:"dataSource",ti:".StringOrRefType"}]},{ln:"RingPropertyType",ps:[{n:"ring",rq:!0,en:"Ring",ti:".RingType"}]},{ln:"EngineeringCRSType",bti:".AbstractReferenceSystemType",ps:[{n:"usesCS",rq:!0,ti:".CoordinateSystemRefType"},{n:"usesEngineeringDatum",rq:!0,ti:".EngineeringDatumRefType"}]},{ln:"BooleanPropertyType",bti:".ValuePropertyType"},{ln:"VerticalCRSRefType",ps:[{n:"verticalCRS",rq:!0,en:"VerticalCRS",ti:".VerticalCRSType"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"FormulaType",ps:[{n:"a",ti:"Double"},{n:"b",rq:!0,ti:"Double"},{n:"c",rq:!0,ti:"Double"},{n:"d",ti:"Double"}]},{ln:"EngineeringDatumRefType",ps:[{n:"engineeringDatum",rq:!0,en:"EngineeringDatum",ti:".EngineeringDatumType"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"DirectedObservationAtDistanceType",bti:".DirectedObservationType",ps:[{n:"distance",rq:!0,ti:".MeasureType"}]},{ln:"AbstractMetaDataType",ps:[{n:"content",col:!0,dom:!1,t:"ers"},{n:"id",ti:"ID",an:{lp:"id",ns:"http://www.opengis.net/gml"},t:"a"}]},{ln:"AbstractCurveSegmentType",ps:[{n:"numDerivativesAtStart",ti:"Integer",an:{lp:"numDerivativesAtStart"},t:"a"},{n:"numDerivativesAtEnd",ti:"Integer",an:{lp:"numDerivativesAtEnd"},t:"a"},{n:"numDerivativeInterior",ti:"Integer",an:{lp:"numDerivativeInterior"},t:"a"}]},{ln:"RelatedTimeType",bti:".TimePrimitivePropertyType",ps:[{n:"relativePosition",an:{lp:"relativePosition"},t:"a"}]},{ln:"OperationParameterGroupRefType",ps:[{n:"operationParameterGroup",rq:!0,en:"OperationParameterGroup",ti:".OperationParameterGroupType"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"GridType",bti:".AbstractGeometryType",ps:[{n:"limits",rq:!0,ti:".GridLimitsType"},{n:"axisName",rq:!0,col:!0},{n:"dimension",rq:!0,ti:"PositiveInteger",an:{lp:"dimension"},t:"a"}]},{ln:"IndexMapType",bti:".GridFunctionType",ps:[{n:"lookUpTable",rq:!0,ti:{t:"l",bti:"Integer"}}]},{ln:"AbstractCurveType",bti:".AbstractGeometricPrimitiveType"},{ln:"MultiGeometryPropertyType",ps:[{n:"geometricAggregate",rq:!0,mx:!1,dom:!1,en:"_GeometricAggregate",ti:".AbstractGeometricAggregateType",t:"er"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"GridCoverageType",bti:".AbstractDiscreteCoverageType"},{ln:"DerivedCRSTypeType",bti:".CodeType"},{ln:"ArrayType",bti:".AbstractGMLType",ps:[{n:"members",ti:".ArrayAssociationType"}]},{ln:"AbstractGriddedSurfaceType",bti:".AbstractParametricCurveSurfaceType",ps:[{n:"row",rq:!0,col:!0,ti:".AbstractGriddedSurfaceType.Row"},{n:"rows",ti:"Integer"},{n:"columns",ti:"Integer"}]},{ln:"AbstractTimeGeometricPrimitiveType",bti:".AbstractTimePrimitiveType",ps:[{n:"frame",an:{lp:"frame"},t:"a"}]},{ln:"ArrayAssociationType",ps:[{n:"object",mno:0,col:!0,mx:!1,dom:!1,en:"_Object",ti:"AnyType",t:"er"}]},{ln:"PassThroughOperationRefType",ps:[{n:"passThroughOperation",rq:!0,en:"PassThroughOperation",ti:".PassThroughOperationType"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"PolygonPatchType",bti:".AbstractSurfacePatchType",ps:[{n:"exterior",mx:!1,dom:!1,ti:".AbstractRingPropertyType",t:"er"},{n:"interior",mno:0,col:!0,mx:!1,dom:!1,ti:".AbstractRingPropertyType",t:"er"},{n:"interpolation",an:{lp:"interpolation"},t:"a"}]},{ln:"GeneralTransformationRefType",ps:[{n:"generalTransformation",rq:!0,mx:!1,dom:!1,en:"_GeneralTransformation",ti:".AbstractGeneralTransformationType",t:"er"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"TransformationRefType",ps:[{n:"transformation",rq:!0,en:"Transformation",ti:".TransformationType"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"ValueArrayType",bti:".CompositeValueType",ps:[{n:"codeSpace",an:{lp:"codeSpace"},t:"a"},{n:"uom",an:{lp:"uom"},t:"a"}]},{ln:"TimeClockPropertyType",ps:[{n:"timeClock",rq:!0,en:"TimeClock",ti:".TimeClockType"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"CylinderType",bti:".AbstractGriddedSurfaceType",ps:[{n:"horizontalCURVETYPE",an:{lp:"horizontalCurveType"},t:"a"},{n:"verticalCURVETYPE",an:{lp:"verticalCurveType"},t:"a"}]},{ln:"MultiSurfaceCoverageType",bti:".AbstractDiscreteCoverageType"},{ln:"VerticalDatumTypeType",bti:".CodeType"},{ln:"GeometryArrayPropertyType",ps:[{n:"geometry",mno:0,col:!0,mx:!1,dom:!1,en:"_Geometry",ti:".AbstractGeometryType",t:"er"}]},{ln:"MultiCurvePropertyType",ps:[{n:"multiCurve",rq:!0,en:"MultiCurve",ti:".MultiCurveType"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"DirectedFacePropertyType",ps:[{n:"face",rq:!0,en:"Face",ti:".FaceType"},{n:"orientation",an:{lp:"orientation"},t:"a"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"GridFunctionType",ps:[{n:"sequenceRule",ti:".SequenceRuleType"},{n:"startPoint",ti:{t:"l",bti:"Integer"}}]},{ln:"DMSAngleType",ps:[{n:"degrees",rq:!0,ti:".DegreesType"},{n:"decimalMinutes",rq:!0,ti:"Decimal"},{n:"minutes",rq:!0,ti:"NonNegativeInteger"},{n:"seconds",ti:"Decimal"}]},{ln:"AbstractTimeComplexType",bti:".AbstractTimeObjectType"},{ln:"LocationPropertyType",ps:[{n:"geometry",rq:!0,mx:!1,dom:!1,en:"_Geometry",ti:".AbstractGeometryType",t:"er"},{n:"locationKeyWord",rq:!0,en:"LocationKeyWord",ti:".CodeType"},{n:"locationString",rq:!0,en:"LocationString",ti:".StringOrRefType"},{n:"_null",rq:!0,en:"Null",ti:{t:"l"}},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"SurfaceType",bti:".AbstractSurfaceType",ps:[{n:"patches",rq:!0,mx:!1,dom:!1,ti:".SurfacePatchArrayPropertyType",t:"er"}]},{ln:"LabelType",ps:[{n:"content",col:!0,dom:!1,en:"LabelExpression",t:"er"},{n:"transform",an:{lp:"transform",ns:"http://www.opengis.net/gml"},t:"a"}]},{ln:"OperationParameterRefType",ps:[{n:"operationParameter",rq:!0,en:"OperationParameter",ti:".OperationParameterType"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"AbstractSolidType",bti:".AbstractGeometricPrimitiveType"},{ln:"GenericMetaDataType",bti:".AbstractMetaDataType",ps:[{n:"contentOverrideForGenericMetaDataType",t:"ae"}]},{ln:"CoordinateOperationRefType",ps:[{n:"coordinateOperation",rq:!0,mx:!1,dom:!1,en:"_CoordinateOperation",ti:".AbstractCoordinateOperationType",t:"er"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"DataBlockType",ps:[{n:"rangeParameters",rq:!0,ti:".RangeParametersType"},{n:"tupleList",rq:!0,ti:".CoordinatesType"},{n:"doubleOrNullTupleList",rq:!0,ti:{t:"l"}}]},{ln:"TopoComplexType",bti:".AbstractTopologyType",ps:[{n:"maximalComplex",rq:!0,ti:".TopoComplexMemberType"},{n:"superComplex",mno:0,col:!0,ti:".TopoComplexMemberType"},{n:"subComplex",mno:0,col:!0,ti:".TopoComplexMemberType"},{n:"topoPrimitiveMember",mno:0,col:!0,ti:".TopoPrimitiveMemberType"},{n:"topoPrimitiveMembers",ti:".TopoPrimitiveArrayAssociationType"},{n:"isMaximal",ti:"Boolean",an:{lp:"isMaximal"},t:"a"}]},{ln:"NodeType",bti:".AbstractTopoPrimitiveType",ps:[{n:"directedEdge",mno:0,col:!0,ti:".DirectedEdgePropertyType"},{n:"pointProperty",ti:".PointPropertyType"}]},{ln:"PolarCSRefType",ps:[{n:"polarCS",rq:!0,en:"PolarCS",ti:".PolarCSType"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"AbstractTopologyType",bti:".AbstractGMLType"},{ln:"ClothoidType",bti:".AbstractCurveSegmentType",ps:[{n:"refLocation",rq:!0,ti:".ClothoidType.RefLocation"},{n:"scaleFactor",rq:!0,ti:"Decimal"},{n:"startParameter",rq:!0,ti:"Double"},{n:"endParameter",rq:!0,ti:"Double"}]},{ln:"MetaDataPropertyType",ps:[{n:"any",rq:!0,mx:!1,t:"ae"},{n:"about",an:{lp:"about"},t:"a"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"ArcByCenterPointType",bti:".AbstractCurveSegmentType",ps:[{n:"pos",rq:!0,ti:".DirectPositionType"},{n:"pointProperty",rq:!0,ti:".PointPropertyType"},{n:"pointRep",rq:!0,ti:".PointPropertyType"},{n:"posList",rq:!0,ti:".DirectPositionListType"},{n:"coordinates",rq:!0,ti:".CoordinatesType"},{n:"radius",rq:!0,ti:".LengthType"},{n:"startAngle",ti:".AngleType"},{n:"endAngle",ti:".AngleType"},{n:"interpolation",an:{lp:"interpolation"},t:"a"},{n:"numARC",rq:!0,ti:"Integer",an:{lp:"numArc"},t:"a"}]},{ln:"ConversionRefType",ps:[{n:"conversion",rq:!0,en:"Conversion",ti:".ConversionType"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"DegreesType",ps:[{n:"value",ti:"NonNegativeInteger",t:"v"},{n:"direction",an:{lp:"direction"},t:"a"}]},{ln:"MultiSurfaceDomainType",bti:".DomainSetType"},{ln:"ConcatenatedOperationRefType",ps:[{n:"concatenatedOperation",rq:!0,en:"ConcatenatedOperation",ti:".ConcatenatedOperationType"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"OperationMethodType",bti:".OperationMethodBaseType",ps:[{n:"methodID",mno:0,col:!0,ti:".IdentifierType"},{n:"remarks",ti:".StringOrRefType"},{n:"methodFormula",rq:!0,ti:".CodeType"},{n:"sourceDimensions",rq:!0,ti:"PositiveInteger"},{n:"targetDimensions",rq:!0,ti:"PositiveInteger"},{n:"usesParameter",mno:0,col:!0,ti:".AbstractGeneralOperationParameterRefType"}]},{ln:"EllipsoidalCSType",bti:".AbstractCoordinateSystemType"},{ln:"SpeedType",bti:".MeasureType"},{ln:"PolygonType",bti:".AbstractSurfaceType",ps:[{n:"exterior",mx:!1,dom:!1,ti:".AbstractRingPropertyType",t:"er"},{n:"interior",mno:0,col:!0,mx:!1,dom:!1,ti:".AbstractRingPropertyType",t:"er"}]},{ln:"AbstractTopoPrimitiveType",bti:".AbstractTopologyType",ps:[{n:"isolated",mno:0,col:!0,ti:".IsolatedPropertyType"},{n:"container",ti:".ContainerPropertyType"}]},{ln:"BSplineType",bti:".AbstractCurveSegmentType",ps:[{n:"posOrPointPropertyOrPointRep",mno:0,col:!0,mx:!1,dom:!1,etis:[{en:"pointRep",ti:".PointPropertyType"},{en:"pointProperty",ti:".PointPropertyType"},{en:"pos",ti:".DirectPositionType"}],t:"ers"},{n:"posList",rq:!0,ti:".DirectPositionListType"},{n:"coordinates",rq:!0,ti:".CoordinatesType"},{n:"degree",rq:!0,ti:"NonNegativeInteger"},{n:"knot",rq:!0,mno:2,col:!0,ti:".KnotPropertyType"},{n:"interpolation",an:{lp:"interpolation"},t:"a"},{n:"isPolynomial",ti:"Boolean",an:{lp:"isPolynomial"},t:"a"},{n:"knotType",an:{lp:"knotType"},t:"a"}]},{ln:"FileType",ps:[{n:"rangeParameters",rq:!0,ti:".RangeParametersType"},{n:"fileName",rq:!0},{n:"fileStructure",rq:!0},{n:"mimeType"},{n:"compression"}]},{ln:"RectifiedGridType",bti:".GridType",ps:[{n:"origin",rq:!0,ti:".PointPropertyType"},{n:"offsetVector",rq:!0,col:!0,ti:".VectorType"}]},{ln:"TimePeriodPropertyType",ps:[{n:"timePeriod",rq:!0,en:"TimePeriod",ti:".TimePeriodType"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"RingType",bti:".AbstractRingType",ps:[{n:"curveMember",rq:!0,col:!0,ti:".CurvePropertyType"}]},{ln:"ClothoidType.RefLocation",tn:null,ps:[{n:"affinePlacement",rq:!0,en:"AffinePlacement",ti:".AffinePlacementType"}]},{ln:"GeometryStylePropertyType",ps:[{n:"geometryStyle",en:"GeometryStyle",ti:".GeometryStyleType"},{n:"about",an:{lp:"about"},t:"a"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"EnvelopeWithTimePeriodType",bti:".EnvelopeType",ps:[{n:"timePosition",rq:!0,mno:2,mxo:2,col:!0,ti:".TimePositionType"},{n:"frame",an:{lp:"frame"},t:"a"}]},{ln:"ValuePropertyType",ps:[{n:"_boolean",rq:!0,en:"Boolean",ti:"Boolean"},{n:"category",rq:!0,en:"Category",ti:".CodeType"},{n:"quantity",rq:!0,en:"Quantity",ti:".MeasureType"},{n:"count",rq:!0,en:"Count",ti:"Integer"},{n:"booleanList",rq:!0,en:"BooleanList",ti:{t:"l"}},{n:"categoryList",rq:!0,en:"CategoryList",ti:".CodeOrNullListType"},{n:"quantityList",rq:!0,en:"QuantityList",ti:".MeasureOrNullListType"},{n:"countList",rq:!0,en:"CountList",ti:{t:"l"}},{n:"categoryExtent",rq:!0,en:"CategoryExtent",ti:".CategoryExtentType"},{n:"quantityExtent",rq:!0,en:"QuantityExtent",ti:".QuantityExtentType"},{n:"countExtent",rq:!0,en:"CountExtent",ti:{t:"l"}},{n:"compositeValue",rq:!0,mx:!1,dom:!1,en:"CompositeValue",ti:".CompositeValueType",t:"er"},{n:"object",rq:!0,mx:!1,dom:!1,en:"_Object",ti:"AnyType",t:"er"},{n:"_null",rq:!0,en:"Null",ti:{t:"l"}},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"GeodesicStringType",bti:".AbstractCurveSegmentType",ps:[{n:"posList",rq:!0,ti:".DirectPositionListType"},{n:"geometricPositionGroup",rq:!0,mno:2,col:!0,etis:[{en:"pos",ti:".DirectPositionType"},{en:"pointProperty",ti:".PointPropertyType"}],t:"es"},{n:"interpolation",an:{lp:"interpolation"},t:"a"}]},{ln:"AbstractDatumBaseType",bti:".DefinitionType"},{ln:"TemporalCRSRefType",ps:[{n:"temporalCRS",rq:!0,en:"TemporalCRS",ti:".TemporalCRSType"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"MultiGeometryType",bti:".AbstractGeometricAggregateType",ps:[{n:"geometryMember",mno:0,col:!0,ti:".GeometryPropertyType"},{n:"geometryMembers",ti:".GeometryArrayPropertyType"}]},{ln:"TimeInstantPropertyType",ps:[{n:"timeInstant",rq:!0,en:"TimeInstant",ti:".TimeInstantType"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"CompoundCRSRefType",ps:[{n:"compoundCRS",rq:!0,en:"CompoundCRS",ti:".CompoundCRSType"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"TrianglePatchArrayPropertyType",bti:".SurfacePatchArrayPropertyType"},{ln:"DomainSetType",ps:[{n:"geometry",rq:!0,mx:!1,dom:!1,en:"_Geometry",ti:".AbstractGeometryType",t:"er"},{n:"timeObject",rq:!0,mx:!1,dom:!1,en:"_TimeObject",ti:".AbstractTimeObjectType",t:"er"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"TemporalCSRefType",ps:[{n:"temporalCS",rq:!0,en:"TemporalCS",ti:".TemporalCSType"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"MultiPolygonType",bti:".AbstractGeometricAggregateType",ps:[{n:"polygonMember",mno:0,col:!0,ti:".PolygonPropertyType"}]},{ln:"StyleType",bti:".AbstractStyleType",ps:[{n:"featureStyle",rq:!0,col:!0,ti:".FeatureStylePropertyType"},{n:"graphStyle",ti:".GraphStylePropertyType"}]},{ln:"DynamicFeatureCollectionType",bti:".FeatureCollectionType",ps:[{n:"validTime",ti:".TimePrimitivePropertyType"},{n:"history",mx:!1,dom:!1,ti:".HistoryPropertyType",t:"er"},{n:"dataSource",ti:".StringOrRefType"}]},{ln:"PrimeMeridianBaseType",bti:".DefinitionType"},{ln:"AbstractGriddedSurfaceType.Row",tn:null,ps:[{n:"posList",rq:!0,ti:".DirectPositionListType"},{n:"geometricPositionGroup",rq:!0,col:!0,etis:[{en:"pos",ti:".DirectPositionType"},{en:"pointProperty",ti:".PointPropertyType"}],t:"es"}]},{ln:"DictionaryType",bti:".DefinitionType",ps:[{n:"dictionaryEntryOrIndirectEntry",mno:0,col:!0,mx:!1,dom:!1,etis:[{en:"indirectEntry",ti:".IndirectEntryType"},{en:"dictionaryEntry",ti:".DictionaryEntryType"}],t:"ers"}]},{ln:"CoordType",ps:[{n:"x",rq:!0,en:"X",ti:"Decimal"},{n:"y",en:"Y",ti:"Decimal"},{n:"z",en:"Z",ti:"Decimal"}]},{ln:"RectangleType",bti:".AbstractSurfacePatchType",ps:[{n:"exterior",rq:!0,mx:!1,dom:!1,ti:".AbstractRingPropertyType",t:"er"},{n:"interpolation",an:{lp:"interpolation"},t:"a"}]},{ln:"DirectionPropertyType",ps:[{n:"directionVector",rq:!0,en:"DirectionVector",ti:".DirectionVectorType"},{n:"compassPoint",rq:!0,en:"CompassPoint"},{n:"directionKeyword",rq:!0,en:"DirectionKeyword",ti:".CodeType"},{n:"directionString",rq:!0,en:"DirectionString",ti:".StringOrRefType"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"AbstractFeatureCollectionType",bti:".AbstractFeatureType",ps:[{n:"featureMember",mno:0,col:!0,ti:".FeaturePropertyType"},{n:"featureMembers",ti:".FeatureArrayPropertyType"}]},{ln:"PrimeMeridianType",bti:".PrimeMeridianBaseType",ps:[{n:"meridianID",mno:0,col:!0,ti:".IdentifierType"},{n:"remarks",ti:".StringOrRefType"},{n:"greenwichLongitude",rq:!0,ti:".AngleChoiceType"}]},{ln:"SolidPropertyType",ps:[{n:"solid",rq:!0,mx:!1,dom:!1,en:"_Solid",ti:".AbstractSolidType",t:"er"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"FeatureStylePropertyType",ps:[{n:"featureStyle",en:"FeatureStyle",ti:".FeatureStyleType"},{n:"about",an:{lp:"about"},t:"a"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"TimeCalendarType",bti:".AbstractTimeReferenceSystemType",ps:[{n:"referenceFrame",rq:!0,col:!0,ti:".TimeCalendarEraPropertyType"}]},{ln:"AbstractGeneralOperationParameterType",bti:".DefinitionType",ps:[{n:"minimumOccurs",ti:"NonNegativeInteger"}]},{ln:"DerivedCRSType",bti:".AbstractGeneralDerivedCRSType",ps:[{n:"derivedCRSType",rq:!0,ti:".DerivedCRSTypeType"},{n:"usesCS",rq:!0,ti:".CoordinateSystemRefType"}]},{ln:"TimeType",bti:".MeasureType"},{ln:"CylindricalCSType",bti:".AbstractCoordinateSystemType"},{ln:"UnitOfMeasureType",ps:[{n:"uom",rq:!0,an:{lp:"uom"},t:"a"}]},{ln:"GeneralConversionRefType",ps:[{n:"generalConversion",rq:!0,mx:!1,dom:!1,en:"_GeneralConversion",ti:".AbstractGeneralConversionType",t:"er"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"AffinePlacementType",ps:[{n:"location",rq:!0,ti:".DirectPositionType"},{n:"refDirection",rq:!0,col:!0,ti:".VectorType"},{n:"inDimension",rq:!0,ti:"PositiveInteger"},{n:"outDimension",rq:!0,ti:"PositiveInteger"}]},{ln:"PolyhedralSurfaceType",bti:".SurfaceType"},{ln:"IsolatedPropertyType",ps:[{n:"node",rq:!0,en:"Node",ti:".NodeType"},{n:"edge",rq:!0,en:"Edge",ti:".EdgeType"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"SolidType",bti:".AbstractSolidType",ps:[{n:"exterior",ti:".SurfacePropertyType"},{n:"interior",mno:0,col:!0,ti:".SurfacePropertyType"}]},{ln:"VerticalCSType",bti:".AbstractCoordinateSystemType"},{ln:"ArcType",bti:".ArcStringType"},{ln:"GeometricPrimitivePropertyType",ps:[{n:"geometricPrimitive",rq:!0,mx:!1,dom:!1,en:"_GeometricPrimitive",ti:".AbstractGeometricPrimitiveType",t:"er"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"AbstractSurfacePatchType"},{ln:"EllipsoidalCSRefType",ps:[{n:"ellipsoidalCS",rq:!0,en:"EllipsoidalCS",ti:".EllipsoidalCSType"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"LineStringSegmentType",bti:".AbstractCurveSegmentType",ps:[{n:"posOrPointPropertyOrPointRep",rq:!0,mno:2,col:!0,mx:!1,dom:!1,etis:[{en:"pointRep",ti:".PointPropertyType"},{en:"pointProperty",ti:".PointPropertyType"},{en:"pos",ti:".DirectPositionType"}],t:"ers"},{n:"posList",rq:!0,ti:".DirectPositionListType"},{n:"coordinates",rq:!0,ti:".CoordinatesType"},{n:"interpolation",an:{lp:"interpolation"},t:"a"}]},{ln:"IdentifierType",ps:[{n:"name",rq:!0,mx:!1,dom:!1,ti:".CodeType",t:"er"},{n:"version"},{n:"remarks",ti:".StringOrRefType"}]},{ln:"AbstractGeneralTransformationType",bti:".AbstractCoordinateOperationType"},{ln:"TimeCoordinateSystemType",bti:".AbstractTimeReferenceSystemType",ps:[{n:"originPosition",rq:!0,ti:".TimePositionType"},{n:"origin",rq:!0,ti:".TimeInstantPropertyType"},{n:"interval",rq:!0,ti:".TimeIntervalLengthType"}]},{ln:"TemporalDatumBaseType",bti:".AbstractDatumType"},{ln:"GridLengthType",bti:".MeasureType"},{ln:"IndirectEntryType",ps:[{n:"definitionProxy",rq:!0,en:"DefinitionProxy",ti:".DefinitionProxyType"}]},{ln:"PolygonPatchArrayPropertyType",bti:".SurfacePatchArrayPropertyType"},{ln:"HistoryPropertyType",ps:[{n:"timeSlice",rq:!0,col:!0,mx:!1,dom:!1,en:"_TimeSlice",ti:".AbstractTimeSliceType",t:"er"}]},{ln:"EnvelopeType",ps:[{n:"lowerCorner",rq:!0,ti:".DirectPositionType"},{n:"upperCorner",rq:!0,ti:".DirectPositionType"},{n:"coord",rq:!0,mno:2,mxo:2,col:!0,ti:".CoordType"},{n:"pos",rq:!0,mno:2,mxo:2,col:!0,ti:".DirectPositionType"},{n:"coordinates",rq:!0,ti:".CoordinatesType"},{n:"srsName",an:{lp:"srsName"},t:"a"},{n:"srsDimension",ti:"PositiveInteger",an:{lp:"srsDimension"},t:"a"},{n:"axisLabels",ti:{t:"l",bti:"NCName"},an:{lp:"axisLabels"},t:"a"},{n:"uomLabels",ti:{t:"l",bti:"NCName"},an:{lp:"uomLabels"},t:"a"}]},{ln:"CountPropertyType",bti:".ValuePropertyType"},{ln:"ConversionType",bti:".AbstractGeneralConversionType",ps:[{n:"usesMethod",rq:!0,ti:".OperationMethodRefType"},{n:"usesValue",mno:0,col:!0,ti:".ParameterValueType"}]},{ln:"UserDefinedCSRefType",ps:[{n:"userDefinedCS",rq:!0,en:"UserDefinedCS",ti:".UserDefinedCSType"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"LabelStylePropertyType",ps:[{n:"labelStyle",en:"LabelStyle",ti:".LabelStyleType"},{n:"about",an:{lp:"about"},t:"a"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"BaseStyleDescriptorType",bti:".AbstractGMLType",ps:[{n:"spatialResolution",ti:".ScaleType"},{n:"styleVariation",mno:0,col:!0,ti:".StyleVariationType"},{n:"animate",mno:0,col:!0,en:{lp:"animate",ns:"http://www.w3.org/2001/SMIL20/"},ti:"SMIL_2_0_Language.AnimateType"},{n:"animateMotion",mno:0,col:!0,en:{lp:"animateMotion",ns:"http://www.w3.org/2001/SMIL20/"},ti:"SMIL_2_0_Language.AnimateMotionType"},{n:"animateColor",mno:0,col:!0,en:{lp:"animateColor",ns:"http://www.w3.org/2001/SMIL20/"},ti:"SMIL_2_0_Language.AnimateColorType"},{n:"set",mno:0,col:!0,en:{lp:"set",ns:"http://www.w3.org/2001/SMIL20/"},ti:"SMIL_2_0_Language.SetType"}]},{ln:"SphericalCSRefType",ps:[{n:"sphericalCS",rq:!0,en:"SphericalCS",ti:".SphericalCSType"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"GeodeticDatumType",bti:".AbstractDatumType",ps:[{n:"usesPrimeMeridian",rq:!0,ti:".PrimeMeridianRefType"},{n:"usesEllipsoid",rq:!0,ti:".EllipsoidRefType"}]},{ln:"OperationMethodBaseType",bti:".DefinitionType"},{ln:"LineStringSegmentArrayPropertyType",ps:[{n:"lineStringSegment",mno:0,col:!0,en:"LineStringSegment",ti:".LineStringSegmentType"}]},{ln:"MeasureListType",ps:[{n:"value",ti:{t:"l",bti:"Double"},t:"v"},{n:"uom",rq:!0,an:{lp:"uom"},t:"a"}]},{ln:"EngineeringDatumType",bti:".AbstractDatumType"},{ln:"ScalarValuePropertyType",bti:".ValuePropertyType"},{ln:"TopoVolumeType",bti:".AbstractTopologyType",ps:[{n:"directedTopoSolid",rq:!0,col:!0,ti:".DirectedTopoSolidPropertyType"}]},{ln:"TopoCurvePropertyType",ps:[{n:"topoCurve",rq:!0,en:"TopoCurve",ti:".TopoCurveType"}]},{ln:"TransformationType",bti:".AbstractGeneralTransformationType",ps:[{n:"usesMethod",rq:!0,ti:".OperationMethodRefType"},{n:"usesValue",mno:0,col:!0,ti:".ParameterValueType"}]},{ln:"ParameterValueType",bti:".AbstractGeneralParameterValueType",ps:[{n:"value",rq:!0,ti:".MeasureType"},{n:"dmsAngleValue",rq:!0,ti:".DMSAngleType"},{n:"stringValue",rq:!0},{n:"integerValue",rq:!0,ti:"PositiveInteger"},{n:"booleanValue",rq:!0,ti:"Boolean"},{n:"valueList",rq:!0,ti:".MeasureListType"},{n:"integerValueList",rq:!0,ti:{t:"l",bti:"Integer"}},{n:"valueFile",rq:!0},{n:"valueOfParameter",rq:!0,ti:".OperationParameterRefType"}]},{ln:"TimeGeometricPrimitivePropertyType",ps:[{n:"timeGeometricPrimitive",rq:!0,mx:!1,dom:!1,en:"_TimeGeometricPrimitive",ti:".AbstractTimeGeometricPrimitiveType",t:"er"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"TimeClockType",bti:".AbstractTimeReferenceSystemType",ps:[{n:"referenceEvent",rq:!0,ti:".StringOrRefType"},{n:"referenceTime",rq:!0,ti:"Time"},{n:"utcReference",rq:!0,ti:"Time"},{n:"dateBasis",mno:0,col:!0,ti:".TimeCalendarPropertyType"}]},{ln:"CubicSplineType",bti:".AbstractCurveSegmentType",ps:[{n:"posOrPointPropertyOrPointRep",rq:!0,mno:2,col:!0,mx:!1,dom:!1,etis:[{en:"pointRep",ti:".PointPropertyType"},{en:"pointProperty",ti:".PointPropertyType"},{en:"pos",ti:".DirectPositionType"}],t:"ers"},{n:"posList",rq:!0,ti:".DirectPositionListType"},{n:"coordinates",rq:!0,ti:".CoordinatesType"},{n:"vectorAtStart",rq:!0,ti:".VectorType"},{n:"vectorAtEnd",rq:!0,ti:".VectorType"},{n:"interpolation",an:{lp:"interpolation"},t:"a"},{n:"degree",ti:"Integer",an:{lp:"degree"},t:"a"}]},{ln:"OperationMethodRefType",ps:[{n:"operationMethod",rq:!0,en:"OperationMethod",ti:".OperationMethodType"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"LineStringPropertyType",ps:[{n:"lineString",rq:!0,en:"LineString",ti:".LineStringType"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"AbstractCoverageType",bti:".AbstractFeatureType",ps:[{n:"domainSet",rq:!0,mx:!1,dom:!1,ti:".DomainSetType",t:"er"},{n:"rangeSet",rq:!0,ti:".RangeSetType"},{n:"dimension",ti:"PositiveInteger",an:{lp:"dimension"},t:"a"}]},{ln:"TargetPropertyType",ps:[{n:"feature",rq:!0,mx:!1,en:"_Feature",ti:".AbstractFeatureType",t:"er"},{n:"geometry",rq:!0,mx:!1,dom:!1,en:"_Geometry",ti:".AbstractGeometryType",t:"er"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"TimePrimitivePropertyType",ps:[{n:"timePrimitive",rq:!0,mx:!1,dom:!1,en:"_TimePrimitive",ti:".AbstractTimePrimitiveType",t:"er"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"CategoryPropertyType",bti:".ValuePropertyType"},{ln:"LineStringType",bti:".AbstractCurveType",ps:[{n:"posOrPointPropertyOrPointRep",rq:!0,mno:2,col:!0,mx:!1,dom:!1,etis:[{en:"pointRep",ti:".PointPropertyType"},{en:"pointProperty",ti:".PointPropertyType"},{en:"coord",ti:".CoordType"},{en:"pos",ti:".DirectPositionType"}],t:"ers"},{n:"posList",rq:!0,ti:".DirectPositionListType"},{n:"coordinates",rq:!0,ti:".CoordinatesType"}]},{ln:"DerivationUnitTermType",bti:".UnitOfMeasureType",ps:[{n:"exponent",ti:"Integer",an:{lp:"exponent"},t:"a"}]},{ln:"TinType",bti:".TriangulatedSurfaceType",ps:[{n:"stopLines",mno:0,col:!0,ti:".LineStringSegmentArrayPropertyType"},{n:"breakLines",mno:0,col:!0,ti:".LineStringSegmentArrayPropertyType"},{n:"maxLength",rq:!0,ti:".LengthType"},{n:"controlPoint",rq:!0,ti:".TinType.ControlPoint"}]},{ln:"GeodeticDatumRefType",ps:[{n:"geodeticDatum",rq:!0,en:"GeodeticDatum",ti:".GeodeticDatumType"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"TimePositionType",ps:[{n:"value",ti:{t:"l"},t:"v"},{n:"frame",an:{lp:"frame"},t:"a"},{n:"calendarEraName",an:{lp:"calendarEraName"},t:"a"},{n:"indeterminatePosition",an:{lp:"indeterminatePosition"},t:"a"}]},{ln:"PrimeMeridianRefType",ps:[{n:"primeMeridian",rq:!0,en:"PrimeMeridian",ti:".PrimeMeridianType"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"VolumeType",bti:".MeasureType"},{ln:"TimeIntervalLengthType",ps:[{n:"value",ti:"Decimal",t:"v"},{n:"unit",rq:!0,an:{lp:"unit"},t:"a"},{n:"radix",ti:"PositiveInteger",an:{lp:"radix"},t:"a"},{n:"factor",ti:"Integer",an:{lp:"factor"},t:"a"}]},{ln:"ParameterValueGroupType",bti:".AbstractGeneralParameterValueType",ps:[{n:"includesValue",rq:!0,mno:2,col:!0,ti:".AbstractGeneralParameterValueType"},{n:"valuesOfGroup",rq:!0,ti:".OperationParameterGroupRefType"}]},{ln:"CartesianCSRefType",ps:[{n:"cartesianCS",rq:!0,en:"CartesianCS",ti:".CartesianCSType"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"TimeEdgePropertyType",ps:[{n:"timeEdge",rq:!0,en:"TimeEdge",ti:".TimeEdgeType"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"TopoPointPropertyType",ps:[{n:"topoPoint",rq:!0,en:"TopoPoint",ti:".TopoPointType"}]},{ln:"ProjectedCRSType",bti:".AbstractGeneralDerivedCRSType",ps:[{n:"usesCartesianCS",rq:!0,ti:".CartesianCSRefType"}]},{ln:"MultiCurveDomainType",bti:".DomainSetType"},{ln:"AbstractReferenceSystemBaseType",bti:".DefinitionType"},{ln:"PolygonPropertyType",ps:[{n:"polygon",rq:!0,en:"Polygon",ti:".PolygonType"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"PolarCSType",bti:".AbstractCoordinateSystemType"},{ln:"AbstractGeometricPrimitiveType",bti:".AbstractGeometryType"},{ln:"MultiSolidDomainType",bti:".DomainSetType"},{ln:"TopoVolumePropertyType",ps:[{n:"topoVolume",rq:!0,en:"TopoVolume",ti:".TopoVolumeType"}]},{ln:"CircleType",bti:".ArcType"},{ln:"ValueArrayPropertyType",ps:[{n:"value",rq:!0,col:!0,mx:!1,dom:!1,etis:[{en:"CountExtent",ti:{t:"l"}},{en:"Quantity",ti:".MeasureType"},{en:"Null",ti:{t:"l"}},{en:"CountList",ti:{t:"l"}},{en:"Count",ti:"Integer"},{en:"QuantityExtent",ti:".QuantityExtentType"},{en:"_Object",ti:"AnyType"},{en:"CategoryList",ti:".CodeOrNullListType"},{en:"CompositeValue",ti:".CompositeValueType"},{en:"CategoryExtent",ti:".CategoryExtentType"},{en:"Category",ti:".CodeType"},{en:"BooleanList",ti:{t:"l"}},{en:"QuantityList",ti:".MeasureOrNullListType"},{en:"Boolean",ti:"Boolean"}],t:"ers"}]},{ln:"GraphStyleType",bti:".BaseStyleDescriptorType",ps:[{n:"planar",ti:"Boolean"},{n:"directed",ti:"Boolean"},{n:"grid",ti:"Boolean"},{n:"minDistance",ti:"Double"},{n:"minAngle",ti:"Double"},{n:"graphType"},{n:"drawingType"},{n:"lineType"},{n:"aestheticCriteria",mno:0,col:!0}]},{ln:"AbstractGeneralConversionType",bti:".AbstractCoordinateOperationType"},{ln:"TopoSurfaceType",bti:".AbstractTopologyType",ps:[{n:"directedFace",rq:!0,col:!0,ti:".DirectedFacePropertyType"}]},{ln:"MultiPointDomainType",bti:".DomainSetType"},{ln:"CircleByCenterPointType",bti:".ArcByCenterPointType"},{ln:"CompositeSurfaceType",bti:".AbstractSurfaceType",ps:[{n:"surfaceMember",rq:!0,col:!0,ti:".SurfacePropertyType"}]},{ln:"MultiCurveCoverageType",bti:".AbstractDiscreteCoverageType"},{ln:"MultiLineStringType",bti:".AbstractGeometricAggregateType",ps:[{n:"lineStringMember",mno:0,col:!0,ti:".LineStringPropertyType"}]},{ln:"ImageCRSType",bti:".AbstractReferenceSystemType",ps:[{n:"usesCartesianCS",rq:!0,ti:".CartesianCSRefType"},{n:"usesObliqueCartesianCS",rq:!0,ti:".ObliqueCartesianCSRefType"},{n:"usesImageDatum",rq:!0,ti:".ImageDatumRefType"}]},{ln:"FeaturePropertyType",ps:[{n:"feature",rq:!0,mx:!1,en:"_Feature",ti:".AbstractFeatureType",t:"er"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"CoordinateSystemAxisBaseType",bti:".DefinitionType"},{ln:"GeodesicType",bti:".GeodesicStringType"},{ln:"CovarianceElementType",ps:[{n:"rowIndex",rq:!0,ti:"PositiveInteger"},{n:"columnIndex",rq:!0,ti:"PositiveInteger"},{n:"covariance",rq:!0,ti:"Double"}]},{ln:"DerivedUnitType",bti:".UnitDefinitionType",ps:[{n:"derivationUnitTerm",rq:!0,col:!0,ti:".DerivationUnitTermType"}]},{ln:"EdgeType",bti:".AbstractTopoPrimitiveType",ps:[{n:"directedNode",rq:!0,mno:2,mxo:2,col:!0,ti:".DirectedNodePropertyType"},{n:"directedFace",mno:0,col:!0,ti:".DirectedFacePropertyType"},{n:"curveProperty",ti:".CurvePropertyType"}]},{ln:"CompositeSolidPropertyType",ps:[{n:"compositeSolid",rq:!0,en:"CompositeSolid",ti:".CompositeSolidType"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"CRSRefType",ps:[{n:"crs",rq:!0,mx:!1,dom:!1,en:"_CRS",ti:".AbstractReferenceSystemType",t:"er"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"AssociationType",ps:[{n:"object",rq:!0,mx:!1,dom:!1,en:"_Object",ti:"AnyType",t:"er"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"TimeOrdinalEraPropertyType",ps:[{n:"timeOrdinalEra",rq:!0,en:"TimeOrdinalEra",ti:".TimeOrdinalEraType"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"AbstractCoordinateSystemType",bti:".AbstractCoordinateSystemBaseType",ps:[{n:"csID",mno:0,col:!0,ti:".IdentifierType"},{n:"remarks",ti:".StringOrRefType"},{n:"usesAxis",rq:!0,col:!0,ti:".CoordinateSystemAxisRefType"}]},{ln:"GridDomainType",bti:".DomainSetType"},{ln:"SolidArrayPropertyType",ps:[{n:"solid",mno:0,col:!0,mx:!1,dom:!1,en:"_Solid",ti:".AbstractSolidType",t:"er"}]},{ln:"ConventionalUnitType",bti:".UnitDefinitionType",ps:[{n:"conversionToPreferredUnit",rq:!0,ti:".ConversionToPreferredUnitType"},{n:"roughConversionToPreferredUnit",rq:!0,ti:".ConversionToPreferredUnitType"},{n:"derivationUnitTerm",mno:0,col:!0,ti:".DerivationUnitTermType"}]},{ln:"OrientableCurveType",bti:".AbstractCurveType",ps:[{n:"baseCurve",rq:!0,ti:".CurvePropertyType"},{n:"orientation",an:{lp:"orientation"},t:"a"}]},{ln:"SphereType",bti:".AbstractGriddedSurfaceType",ps:[{n:"horizontalCURVETYPE",an:{lp:"horizontalCurveType"},t:"a"},{n:"verticalCURVETYPE",an:{lp:"verticalCurveType"},t:"a"}]},{ln:"AbstractGeometricAggregateType",bti:".AbstractGeometryType"},{ln:"CurveType",bti:".AbstractCurveType",ps:[{n:"segments",rq:!0,ti:".CurveSegmentArrayPropertyType"}]},{ln:"GridEnvelopeType",ps:[{n:"low",rq:!0,ti:{t:"l",bti:"Integer"}},{n:"high",rq:!0,ti:{t:"l",bti:"Integer"}}]},{ln:"ObservationType",bti:".AbstractFeatureType",ps:[{n:"validTime",rq:!0,ti:".TimePrimitivePropertyType"},{n:"using",ti:".FeaturePropertyType"},{n:"target",mx:!1,dom:!1,ti:".TargetPropertyType",t:"er"},{n:"resultOf",rq:!0,ti:".AssociationType"}]},{ln:"BoundedFeatureType",bti:".AbstractFeatureType"},{ln:"TopoCurveType",bti:".AbstractTopologyType",ps:[{n:"directedEdge",rq:!0,col:!0,ti:".DirectedEdgePropertyType"}]},{ln:"CovarianceMatrixType",bti:".AbstractPositionalAccuracyType",ps:[{n:"unitOfMeasure",rq:!0,col:!0,ti:".UnitOfMeasureType"},{n:"includesElement",rq:!0,col:!0,ti:".CovarianceElementType"}]},{ln:"ConcatenatedOperationType",bti:".AbstractCoordinateOperationType",ps:[{n:"usesSingleOperation",rq:!0,mno:2,col:!0,ti:".SingleOperationRefType"}]},{ln:"AbstractGeneralOperationParameterRefType",ps:[{n:"generalOperationParameter",rq:!0,mx:!1,dom:!1,en:"_GeneralOperationParameter",ti:".AbstractGeneralOperationParameterType",t:"er"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"MultiSolidCoverageType",bti:".AbstractDiscreteCoverageType"},{ln:"GeographicCRSRefType",ps:[{n:"geographicCRS",rq:!0,en:"GeographicCRS",ti:".GeographicCRSType"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"SymbolType",ps:[{n:"any",mno:0,col:!0,typed:!1,mx:!1,t:"ae"},{n:"symbolType",rq:!0,an:{lp:"symbolType"},t:"a"},{n:"transform",an:{lp:"transform",ns:"http://www.opengis.net/gml"},t:"a"},{n:"about",an:{lp:"about"},t:"a"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"DirectedTopoSolidPropertyType",ps:[{n:"topoSolid",rq:!0,en:"TopoSolid",ti:".TopoSolidType"},{n:"orientation",an:{lp:"orientation"},t:"a"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"QuantityPropertyType",bti:".ValuePropertyType"},{ln:"SurfacePropertyType",ps:[{n:"surface",rq:!0,mx:!1,dom:!1,en:"_Surface",ti:".AbstractSurfaceType",t:"er"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"TemporalCRSType",bti:".AbstractReferenceSystemType",ps:[{n:"usesTemporalCS",rq:!0,ti:".TemporalCSRefType"},{n:"usesTemporalDatum",rq:!0,ti:".TemporalDatumRefType"}]},{ln:"FeatureStyleType",bti:".AbstractGMLType",ps:[{n:"featureConstraint"},{n:"geometryStyle",mno:0,col:!0,ti:".GeometryStylePropertyType"},{n:"topologyStyle",mno:0,col:!0,ti:".TopologyStylePropertyType"},{n:"labelStyle",ti:".LabelStylePropertyType"},{n:"featureType",an:{lp:"featureType"},t:"a"},{n:"baseType",an:{lp:"baseType"},t:"a"},{n:"queryGrammar",an:{lp:"queryGrammar"},t:"a"}]},{ln:"AbstractSurfaceType",bti:".AbstractGeometricPrimitiveType"},{ln:"AbstractDiscreteCoverageType",bti:".AbstractCoverageType",ps:[{n:"coverageFunction",ti:".CoverageFunctionType"}]},{ln:"MeasureOrNullListType",ps:[{n:"value",ti:{t:"l"},t:"v"},{n:"uom",rq:!0,an:{lp:"uom"},t:"a"}]},{ln:"TopologyStyleType",bti:".BaseStyleDescriptorType",ps:[{n:"symbol",rq:!0,ti:".SymbolType"},{n:"style",rq:!0},{n:"labelStyle",ti:".LabelStylePropertyType"},{n:"topologyProperty",an:{lp:"topologyProperty"},t:"a"},{n:"topologyType",an:{lp:"topologyType"},t:"a"}]},{ln:"DictionaryEntryType",ps:[{n:"definition",rq:!0,mx:!1,dom:!1,en:"Definition",ti:".DefinitionType",t:"er"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"CompositeSurfacePropertyType",ps:[{n:"compositeSurface",rq:!0,en:"CompositeSurface",ti:".CompositeSurfaceType"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"MultiLineStringPropertyType",ps:[{n:"multiLineString",rq:!0,en:"MultiLineString",ti:".MultiLineStringType"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"MeasureType",ps:[{n:"value",ti:"Double",t:"v"},{n:"uom",rq:!0,an:{lp:"uom"},t:"a"}]},{ln:"TopologyStylePropertyType",ps:[{n:"topologyStyle",en:"TopologyStyle",ti:".TopologyStyleType"},{n:"about",an:{lp:"about"},t:"a"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"OffsetCurveType",bti:".AbstractCurveSegmentType",ps:[{n:"offsetBase",rq:!0,ti:".CurvePropertyType"},{n:"distance",rq:!0,ti:".LengthType"},{n:"refDirection",ti:".VectorType"}]},{ln:"StringOrRefType",ps:[{n:"value",t:"v"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"VerticalCRSType",bti:".AbstractReferenceSystemType",ps:[{n:"usesVerticalCS",rq:!0,ti:".VerticalCSRefType"},{n:"usesVerticalDatum",rq:!0,ti:".VerticalDatumRefType"}]},{ln:"AngleType",bti:".MeasureType"},{ln:"BoundingShapeType",ps:[{n:"envelope",rq:!0,mx:!1,dom:!1,en:"Envelope",ti:".EnvelopeType",t:"er"},{n:"_null",rq:!0,en:"Null",ti:{t:"l"}}]},{ln:"TemporalCSType",bti:".AbstractCoordinateSystemType"},{ln:"GridLimitsType",ps:[{n:"gridEnvelope",rq:!0,en:"GridEnvelope",ti:".GridEnvelopeType"}]},{ln:"LinearCSType",bti:".AbstractCoordinateSystemType"},{ln:"AbstractGeneralParameterValueType"},{ln:"DirectedNodePropertyType",ps:[{n:"node",rq:!0,en:"Node",ti:".NodeType"},{n:"orientation",an:{lp:"orientation"},t:"a"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"SurfaceArrayPropertyType",ps:[{n:"surface",mno:0,col:!0,mx:!1,dom:!1,en:"_Surface",ti:".AbstractSurfaceType",t:"er"}]},{ln:"SecondDefiningParameterType",ps:[{n:"inverseFlattening",rq:!0,ti:".MeasureType"},{n:"semiMinorAxis",rq:!0,ti:".MeasureType"},{n:"isSphere",rq:!0}]},{ln:"AbstractGeometryType",bti:".AbstractGMLType",ps:[{n:"gid",an:{lp:"gid"},t:"a"},{n:"srsName",an:{lp:"srsName"},t:"a"},{n:"srsDimension",ti:"PositiveInteger",an:{lp:"srsDimension"},t:"a"},{n:"axisLabels",ti:{t:"l",bti:"NCName"},an:{lp:"axisLabels"},t:"a"},{n:"uomLabels",ti:{t:"l",bti:"NCName"},an:{lp:"uomLabels"},t:"a"}]},{ln:"PassThroughOperationType",bti:".AbstractCoordinateOperationType",ps:[{n:"modifiedCoordinate",rq:!0,col:!0,ti:"PositiveInteger"},{n:"usesOperation",rq:!0,ti:".OperationRefType"}]},{ln:"AbstractCoordinateOperationBaseType",bti:".DefinitionType"},{ln:"ArcStringByBulgeType",bti:".AbstractCurveSegmentType",ps:[{n:"posOrPointPropertyOrPointRep",rq:!0,mno:2,col:!0,mx:!1,dom:!1,etis:[{en:"pointRep",ti:".PointPropertyType"},{en:"pointProperty",ti:".PointPropertyType"},{en:"pos",ti:".DirectPositionType"}],t:"ers"},{n:"posList",rq:!0,ti:".DirectPositionListType"},{n:"coordinates",rq:!0,ti:".CoordinatesType"},{n:"bulge",rq:!0,col:!0,ti:"Double"},{n:"normal",rq:!0,col:!0,ti:".VectorType"},{n:"interpolation",an:{lp:"interpolation"},t:"a"},{n:"numArc",ti:"Integer",an:{lp:"numArc"},t:"a"}]},{ln:"MovingObjectStatusType",bti:".AbstractTimeSliceType",ps:[{n:"location",rq:!0,mx:!1,dom:!1,ti:".LocationPropertyType",t:"er"},{n:"speed",ti:".MeasureType"},{n:"bearing",ti:".DirectionPropertyType"},{n:"acceleration",ti:".MeasureType"},{n:"elevation",ti:".MeasureType"},{n:"status",ti:".StringOrRefType"}]},{ln:"FeatureArrayPropertyType",ps:[{n:"feature",mno:0,col:!0,mx:!1,en:"_Feature",ti:".AbstractFeatureType",t:"er"}]},{ln:"CoordinateSystemAxisRefType",ps:[{n:"coordinateSystemAxis",rq:!0,en:"CoordinateSystemAxis",ti:".CoordinateSystemAxisType"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"FeatureCollectionType",bti:".AbstractFeatureCollectionType"},{ln:"TimeEdgeType",bti:".AbstractTimeTopologyPrimitiveType",ps:[{n:"start",rq:!0,ti:".TimeNodePropertyType"},{n:"end",rq:!0,ti:".TimeNodePropertyType"},{n:"extent",ti:".TimePeriodPropertyType"}]},{ln:"OperationRefType",ps:[{n:"operation",rq:!0,mx:!1,dom:!1,en:"_Operation",ti:".AbstractCoordinateOperationType",t:"er"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"RelativeInternalPositionalAccuracyType",bti:".AbstractPositionalAccuracyType",ps:[{n:"result",rq:!0,ti:".MeasureType"}]},{ln:"DirectedObservationType",bti:".ObservationType",ps:[{n:"direction",rq:!0,ti:".DirectionPropertyType"}]},{ln:"CompositeValueType",bti:".AbstractGMLType",ps:[{n:"valueComponent",mno:0,col:!0,ti:".ValuePropertyType"},{n:"valueComponents",ti:".ValueArrayPropertyType"}]},{ln:"TriangleType",bti:".AbstractSurfacePatchType",ps:[{n:"exterior",rq:!0,mx:!1,dom:!1,ti:".AbstractRingPropertyType",t:"er"},{n:"interpolation",an:{lp:"interpolation"},t:"a"}]},{ln:"RangeSetType",ps:[{n:"valueArray",rq:!0,col:!0,en:"ValueArray",ti:".ValueArrayType"},{n:"scalarValueList",rq:!0,col:!0,mx:!1,dom:!1,etis:[{en:"CategoryList",ti:".CodeOrNullListType"},{en:"CountList",ti:{t:"l"}},{en:"QuantityList",ti:".MeasureOrNullListType"},{en:"BooleanList",ti:{t:"l"}}],t:"ers"},{n:"dataBlock",rq:!0,en:"DataBlock",ti:".DataBlockType"},{n:"file",rq:!0,en:"File",ti:".FileType"}]},{ln:"PriorityLocationPropertyType",bti:".LocationPropertyType",ps:[{n:"priority",an:{lp:"priority"},t:"a"}]},{ln:"TriangulatedSurfaceType",bti:".SurfaceType"},{ln:"VerticalCSRefType",ps:[{n:"verticalCS",rq:!0,en:"VerticalCS",ti:".VerticalCSType"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"MultiSurfacePropertyType",ps:[{n:"multiSurface",rq:!0,en:"MultiSurface",ti:".MultiSurfaceType"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"ReferenceSystemRefType",ps:[{n:"referenceSystem",rq:!0,mx:!1,dom:!1,en:"_ReferenceSystem",ti:".AbstractReferenceSystemType",t:"er"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"TimeCalendarPropertyType",ps:[{n:"timeCalendar",rq:!0,en:"TimeCalendar",ti:".TimeCalendarType"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"CodeOrNullListType",ps:[{n:"value",ti:{t:"l"},t:"v"},{n:"codeSpace",an:{lp:"codeSpace"},t:"a"}]},{ln:"AbstractPositionalAccuracyType",ps:[{n:"measureDescription",ti:".CodeType"}]},{ln:"GeocentricCRSType",bti:".AbstractReferenceSystemType",ps:[{n:"usesCartesianCS",rq:!0,ti:".CartesianCSRefType"},{n:"usesSphericalCS",rq:!0,ti:".SphericalCSRefType"},{n:"usesGeodeticDatum",rq:!0,ti:".GeodeticDatumRefType"}]},{ln:"VectorType",ps:[{n:"value",ti:{t:"l",bti:"Double"},t:"v"},{n:"srsName",an:{lp:"srsName"},t:"a"},{n:"srsDimension",ti:"PositiveInteger",an:{lp:"srsDimension"},t:"a"},{n:"axisLabels",ti:{t:"l",bti:"NCName"},an:{lp:"axisLabels"},t:"a"},{n:"uomLabels",ti:{t:"l",bti:"NCName"},an:{lp:"uomLabels"},t:"a"}]},{ln:"LinearRingType",bti:".AbstractRingType",ps:[{n:"posOrPointPropertyOrPointRep",rq:!0,mno:4,col:!0,mx:!1,dom:!1,etis:[{en:"pointRep",ti:".PointPropertyType"},{en:"pointProperty",ti:".PointPropertyType"},{en:"pos",ti:".DirectPositionType"}],t:"ers"},{n:"posList",rq:!0,ti:".DirectPositionListType"},{n:"coordinates",rq:!0,ti:".CoordinatesType"},{n:"coord",rq:!0,mno:4,col:!0,ti:".CoordType"}]},{ln:"GeometricComplexType",bti:".AbstractGeometryType",ps:[{n:"element",rq:!0,col:!0,ti:".GeometricPrimitivePropertyType"}]},{ln:"SequenceRuleType",ps:[{n:"value",t:"v"},{n:"order",an:{lp:"order"},t:"a"}]},{ln:"CompositeCurveType",bti:".AbstractCurveType",ps:[{n:"curveMember",rq:!0,col:!0,ti:".CurvePropertyType"}]},{ln:"ConeType",bti:".AbstractGriddedSurfaceType",ps:[{n:"horizontalCURVETYPE",an:{lp:"horizontalCurveType"},t:"a"},{n:"verticalCURVETYPE",an:{lp:"verticalCurveType"},t:"a"}]},{ln:"PixelInCellType",bti:".CodeType"},{ln:"VerticalDatumType",bti:".AbstractDatumType",ps:[{n:"verticalDatumType",ti:".VerticalDatumTypeType"}]},{ln:"TrackType",bti:".HistoryPropertyType"},{ln:"ContainerPropertyType",ps:[{n:"face",rq:!0,en:"Face",ti:".FaceType"},{n:"topoSolid",rq:!0,en:"TopoSolid",ti:".TopoSolidType"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"ImageDatumRefType",ps:[{n:"imageDatum",rq:!0,en:"ImageDatum",ti:".ImageDatumType"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"PointType",bti:".AbstractGeometricPrimitiveType",ps:[{n:"pos",rq:!0,ti:".DirectPositionType"},{n:"coordinates",rq:!0,ti:".CoordinatesType"},{n:"coord",rq:!0,ti:".CoordType"}]},{ln:"AbstractGMLType",ps:[{n:"metaDataProperty",mno:0,col:!0,ti:".MetaDataPropertyType"},{n:"description",ti:".StringOrRefType"},{n:"name",mno:0,col:!0,mx:!1,dom:!1,ti:".CodeType",t:"er"},{n:"id",ti:"ID",an:{lp:"id",ns:"http://www.opengis.net/gml"},t:"a"}]},{ln:"EllipsoidBaseType",bti:".DefinitionType"},{ln:"BezierType",bti:".BSplineType"},{ln:"CoordinateReferenceSystemRefType",ps:[{n:"coordinateReferenceSystem",rq:!0,mx:!1,dom:!1,en:"_CoordinateReferenceSystem",ti:".AbstractReferenceSystemType",t:"er"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"GeometryPropertyType",ps:[{n:"geometry",rq:!0,mx:!1,dom:!1,en:"_Geometry",ti:".AbstractGeometryType",t:"er"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"AngleChoiceType",ps:[{n:"angle",rq:!0,ti:".MeasureType"},{n:"dmsAngle",rq:!0,ti:".DMSAngleType"}]},{ln:"GraphStylePropertyType",ps:[{n:"graphStyle",en:"GraphStyle",ti:".GraphStyleType"},{n:"about",an:{lp:"about"},t:"a"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"TopoSurfacePropertyType",ps:[{n:"topoSurface",rq:!0,en:"TopoSurface",ti:".TopoSurfaceType"}]},{ln:"TimeOrdinalEraType",bti:".DefinitionType",ps:[{n:"relatedTime",mno:0,col:!0,ti:".RelatedTimeType"},{n:"start",rq:!0,ti:".TimeNodePropertyType"},{n:"end",rq:!0,ti:".TimeNodePropertyType"},{n:"extent",ti:".TimePeriodPropertyType"},{n:"member",mno:0,col:!0,ti:".TimeOrdinalEraPropertyType"},{n:"group",ti:".ReferenceType"}]},{ln:"DirectPositionType",ps:[{n:"value",ti:{t:"l",bti:"Double"},t:"v"},{n:"srsName",an:{lp:"srsName"},t:"a"},{n:"srsDimension",ti:"PositiveInteger",an:{lp:"srsDimension"},t:"a"},{n:"axisLabels",ti:{t:"l",bti:"NCName"},an:{lp:"axisLabels"},t:"a"},{n:"uomLabels",ti:{t:"l",bti:"NCName"},an:{lp:"uomLabels"},t:"a"}]},{ln:"CompoundCRSType",bti:".AbstractReferenceSystemType",ps:[{n:"includesCRS",rq:!0,mno:2,col:!0,ti:".CoordinateReferenceSystemRefType"}]},{ln:"AbstractCoordinateSystemBaseType",bti:".DefinitionType"},{ln:"CategoryExtentType",bti:".CodeOrNullListType"},{ln:"RectifiedGridCoverageType",bti:".AbstractDiscreteCoverageType"},{ln:"CoordinateSystemRefType",ps:[{n:"coordinateSystem",rq:!0,mx:!1,dom:!1,en:"_CoordinateSystem",ti:".AbstractCoordinateSystemType",t:"er"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"AbstractFeatureType",bti:".AbstractGMLType",ps:[{n:"boundedBy",ti:".BoundingShapeType"},{n:"location",mx:!1,dom:!1,ti:".LocationPropertyType",t:"er"}]},{ln:"TemporalDatumType",bti:".TemporalDatumBaseType",ps:[{n:"origin",rq:!0,ti:"DateTime"}]},{ln:"AbstractTimeObjectType",bti:".AbstractGMLType"},{ln:"TimeTopologyComplexPropertyType",ps:[{n:"timeTopologyComplex",rq:!0,en:"TimeTopologyComplex",ti:".TimeTopologyComplexType"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"DirectPositionListType",ps:[{n:"value",ti:{t:"l",bti:"Double"},t:"v"},{n:"count",ti:"PositiveInteger",an:{lp:"count"},t:"a"},{n:"srsName",an:{lp:"srsName"},t:"a"},{n:"srsDimension",ti:"PositiveInteger",an:{lp:"srsDimension"},t:"a"},{n:"axisLabels",ti:{t:"l",bti:"NCName"},an:{lp:"axisLabels"},t:"a"},{n:"uomLabels",ti:{t:"l",bti:"NCName"},an:{lp:"uomLabels"},t:"a"}]},{ln:"TimeCalendarEraPropertyType",ps:[{n:"timeCalendarEra",rq:!0,en:"TimeCalendarEra",ti:".TimeCalendarEraType"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"ObliqueCartesianCSType",bti:".AbstractCoordinateSystemType"},{ln:"ImageDatumType",bti:".AbstractDatumType",ps:[{n:"pixelInCell",rq:!0,ti:".PixelInCellType"}]},{ln:"QuantityExtentType",bti:".MeasureOrNullListType"},{ln:"CodeListType",ps:[{n:"value",ti:{t:"l",bti:"Name"},t:"v"},{n:"codeSpace",an:{lp:"codeSpace"},t:"a"}]},{ln:"AbstractContinuousCoverageType",bti:".AbstractCoverageType",ps:[{n:"coverageFunction",ti:".CoverageFunctionType"}]},{ln:"LengthType",bti:".MeasureType"},{ln:"OperationParameterGroupType",bti:".OperationParameterGroupBaseType",ps:[{n:"groupID",mno:0,col:!0,ti:".IdentifierType"},{n:"remarks",ti:".StringOrRefType"},{n:"maximumOccurs",ti:"PositiveInteger"},{n:"includesParameter",rq:!0,mno:2,col:!0,ti:".AbstractGeneralOperationParameterRefType"}]},{ln:"AbstractCoordinateOperationType",bti:".AbstractCoordinateOperationBaseType",ps:[{n:"coordinateOperationID",mno:0,col:!0,ti:".IdentifierType"},{n:"remarks",ti:".StringOrRefType"},{n:"operationVersion"},{n:"validArea",ti:".ExtentType"},{n:"scope"},{n:"positionalAccuracy",mno:0,col:!0,mx:!1,dom:!1,en:"_positionalAccuracy",ti:".AbstractPositionalAccuracyType",t:"er"},{n:"sourceCRS",ti:".CRSRefType"},{n:"targetCRS",ti:".CRSRefType"}]},{ln:"LinearCSRefType",ps:[{n:"linearCS",rq:!0,en:"LinearCS",ti:".LinearCSType"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"VerticalDatumRefType",ps:[{n:"verticalDatum",rq:!0,en:"VerticalDatum",ti:".VerticalDatumType"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"DerivedCRSRefType",ps:[{n:"derivedCRS",rq:!0,en:"DerivedCRS",ti:".DerivedCRSType"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"MultiSolidType",bti:".AbstractGeometricAggregateType",ps:[{n:"solidMember",mno:0,col:!0,ti:".SolidPropertyType"},{n:"solidMembers",ti:".SolidArrayPropertyType"}]},{ln:"TimeInstantType",bti:".AbstractTimeGeometricPrimitiveType",ps:[{n:"timePosition",rq:!0,ti:".TimePositionType"}]},{ln:"ObliqueCartesianCSRefType",ps:[{n:"obliqueCartesianCS",rq:!0,en:"ObliqueCartesianCS",ti:".ObliqueCartesianCSType"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"AbstractRingType",bti:".AbstractGeometryType"},{ln:"SphericalCSType",bti:".AbstractCoordinateSystemType"},{ln:"RectifiedGridDomainType",bti:".DomainSetType"},{ln:"MultiSolidPropertyType",ps:[{n:"multiSolid",rq:!0,en:"MultiSolid",ti:".MultiSolidType"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"DefinitionType",bti:".AbstractGMLType"},{ln:"FaceType",bti:".AbstractTopoPrimitiveType",ps:[{n:"directedEdge",rq:!0,col:!0,ti:".DirectedEdgePropertyType"},{n:"directedTopoSolid",mno:0,mxo:2,col:!0,ti:".DirectedTopoSolidPropertyType"},{n:"surfaceProperty",ti:".SurfacePropertyType"}]},{ln:"CylindricalCSRefType",ps:[{n:"cylindricalCS",rq:!0,en:"CylindricalCS",ti:".CylindricalCSType"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"AbstractReferenceSystemType",bti:".AbstractReferenceSystemBaseType",ps:[{n:"srsID",mno:0,col:!0,ti:".IdentifierType"},{n:"remarks",ti:".StringOrRefType"},{n:"validArea",ti:".ExtentType"},{n:"scope"}]},{ln:"SingleOperationRefType",ps:[{n:"singleOperation",rq:!0,mx:!1,dom:!1,en:"_SingleOperation",ti:".AbstractCoordinateOperationType",t:"er"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"TimeTopologyPrimitivePropertyType",ps:[{n:"timeTopologyPrimitive",rq:!0,mx:!1,dom:!1,en:"_TimeTopologyPrimitive",ti:".AbstractTimeTopologyPrimitiveType",t:"er"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"EngineeringCRSRefType",ps:[{n:"engineeringCRS",rq:!0,en:"EngineeringCRS",ti:".EngineeringCRSType"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"ScaleType",bti:".MeasureType"},{ln:"TimeCalendarEraType",bti:".DefinitionType",ps:[{n:"referenceEvent",rq:!0,ti:".StringOrRefType"},{n:"referenceDate",ti:"Date"},{n:"julianReference",rq:!0,ti:"Decimal"},{n:"epochOfUse",rq:!0,ti:".TimePeriodPropertyType"}]},{ln:"CoordinateSystemAxisType",bti:".CoordinateSystemAxisBaseType",ps:[{n:"axisID",mno:0,col:!0,ti:".IdentifierType"},{n:"remarks",ti:".StringOrRefType"},{n:"axisAbbrev",rq:!0,ti:".CodeType"},{n:"axisDirection",rq:!0,ti:".CodeType"},{n:"uom",rq:!0,an:{lp:"uom",ns:"http://www.opengis.net/gml"},t:"a"}]},{ln:"EllipsoidType",bti:".EllipsoidBaseType",ps:[{n:"ellipsoidID",mno:0,col:!0,ti:".IdentifierType"},{n:"remarks",ti:".StringOrRefType"},{n:"semiMajorAxis",rq:!0,ti:".MeasureType"},{n:"secondDefiningParameter",rq:!0,ti:".SecondDefiningParameterType"}]},{ln:"TopoComplexMemberType",ps:[{n:"topoComplex",en:"TopoComplex",ti:".TopoComplexType"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"CoverageFunctionType",ps:[{n:"mappingRule",rq:!0,en:"MappingRule",ti:".StringOrRefType"},{n:"gridFunction",rq:!0,mx:!1,dom:!1,en:"GridFunction",ti:".GridFunctionType",t:"er"}]},{ln:"TimeNodePropertyType",ps:[{n:"timeNode",rq:!0,en:"TimeNode",ti:".TimeNodeType"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"AbstractRingPropertyType",ps:[{n:"ring",rq:!0,mx:!1,dom:!1,en:"_Ring",ti:".AbstractRingType",t:"er"}]},{ln:"LinearRingPropertyType",ps:[{n:"linearRing",rq:!0,en:"LinearRing",ti:".LinearRingType"}]},{ln:"DirectionVectorType",ps:[{n:"vector",rq:!0,ti:".VectorType"},{n:"horizontalAngle",rq:!0,ti:".AngleType"},{n:"verticalAngle",rq:!0,ti:".AngleType"}]},{ln:"TimeTopologyComplexType",bti:".AbstractTimeComplexType",ps:[{n:"primitive",rq:!0,col:!0,ti:".TimeTopologyPrimitivePropertyType"}]},{t:"enum",ln:"SignType",vs:["-","+"]},{t:"enum",ln:"CompassPointEnumeration",vs:["N","NNE","NE","ENE","E","ESE","SE","SSE","S","SSW","SW","WSW","W","WNW","NW","NNW"]},{t:"enum",ln:"AesheticCriteriaType",vs:["MIN_CROSSINGS","MIN_AREA","MIN_BENDS","MAX_BENDS","UNIFORM_BENDS","MIN_SLOPES","MIN_EDGE_LENGTH","MAX_EDGE_LENGTH","UNIFORM_EDGE_LENGTH","MAX_ANGULAR_RESOLUTION","MIN_ASPECT_RATIO","MAX_SYMMETRIES"]},{t:"enum",ln:"IncrementOrder",vs:["+x+y","+y+x","+x-y","-x-y"]},{t:"enum",ln:"KnotTypesType",vs:["uniform","quasiUniform","piecewiseBezier"]},{t:"enum",ln:"TimeIndeterminateValueType",vs:["after","before","now","unknown"]},{t:"enum",ln:"CurveInterpolationType",vs:["linear","geodesic","circularArc3Points","circularArc2PointWithBulge","circularArcCenterPointWithRadius","elliptical","clothoid","conic","polynomialSpline","cubicSpline","rationalSpline"]},{t:"enum",ln:"GraphTypeType",vs:["TREE","BICONNECTED"]},{t:"enum",ln:"SuccessionType",vs:["substitution","division","fusion","initiation"]},{t:"enum",ln:"SurfaceInterpolationType",vs:["none","planar","spherical","elliptical","conic","tin","parametricCurve","polynomialSpline","rationalSpline","triangulatedSpline"]},{t:"enum",ln:"QueryGrammarEnumeration",vs:["xpath","xquery","other"]},{t:"enum",ln:"DrawingTypeType",vs:["POLYLINE","ORTHOGONAL"]},{t:"enum",ln:"SequenceRuleNames",vs:["Linear","Boustrophedonic","Cantor-diagonal","Spiral","Morton","Hilbert"]},{t:"enum",ln:"SymbolTypeEnumeration",vs:["svg","xpath","other"]},{t:"enum",ln:"LineTypeType",vs:["STRAIGHT","BENT"]},{t:"enum",ln:"FileValueModelType",vs:["Record Interleaved"]}],eis:[{en:"topoPointProperty",ti:".TopoPointPropertyType"},{en:"CartesianCS",ti:".CartesianCSType",sh:"_CoordinateSystem"},{en:"solidMembers",ti:".SolidArrayPropertyType"},{en:"sourceCRS",ti:".CRSRefType"},{en:"version"},{en:"DerivedCRS",ti:".DerivedCRSType",sh:"_GeneralDerivedCRS"},{en:"Face",ti:".FaceType",sh:"_TopoPrimitive"},{en:"boundedBy",ti:".BoundingShapeType"},{en:"_TopoPrimitive",ti:".AbstractTopoPrimitiveType",sh:"_Topology"},{en:"usesEllipsoidalCS",ti:".EllipsoidalCSRefType"},{en:"usesTemporalDatum",ti:".TemporalDatumRefType"},{en:"srsID",ti:".IdentifierType"},{en:"multiCurveProperty",ti:".MultiCurvePropertyType"},{en:"RectifiedGrid",ti:".RectifiedGridType",sh:"_ImplicitGeometry"},{en:"degrees",ti:".DegreesType"},{en:"obliqueCartesianCSRef",ti:".ObliqueCartesianCSRefType"},{en:"usesEngineeringDatum",ti:".EngineeringDatumRefType"},{en:"domainSet",ti:".DomainSetType"},{en:"ConcatenatedOperation",ti:".ConcatenatedOperationType",sh:"_CoordinateOperation"},{en:"operationMethodRef",ti:".OperationMethodRefType"},{en:"sourceDimensions",ti:"PositiveInteger"},{en:"GraphStyle",ti:".GraphStyleType",sh:"_GML"},{en:"TimePeriod",ti:".TimePeriodType",sh:"_TimeGeometricPrimitive"},{en:"doubleOrNullTupleList",ti:{t:"l"}},{en:"surfaceMember",ti:".SurfacePropertyType"},{en:"Cone",ti:".ConeType",sh:"_GriddedSurface"},{en:"polygonProperty",ti:".PolygonPropertyType"},{en:"pointMember",ti:".PointPropertyType"},{en:"integerValue",ti:"PositiveInteger"},{en:"_Ring",ti:".AbstractRingType",sh:"_Geometry"},{en:"CompositeValue",ti:".CompositeValueType"},{en:"temporalDatumRef",ti:".TemporalDatumRefType"},{en:"semiMinorAxis",ti:".MeasureType"},{en:"geometryMembers",ti:".GeometryArrayPropertyType"},{en:"coordinateSystemAxisRef",ti:".CoordinateSystemAxisRefType"},{en:"polarCSRef",ti:".PolarCSRefType"},{en:"_ParametricCurveSurface",ti:".AbstractParametricCurveSurfaceType",sh:"_SurfacePatch"},{en:"TimeCalendar",ti:".TimeCalendarType",sh:"_TimeReferenceSystem"},{en:"Ring",ti:".RingType",sh:"_Ring"},{en:"verticalDatumRef",ti:".VerticalDatumRefType"},{en:"temporalExtent",ti:".TimePeriodType"},{en:"relativeInternalPositionalAccuracy",ti:".RelativeInternalPositionalAccuracyType",sh:"_positionalAccuracy"},{en:"Quantity",ti:".MeasureType"},{en:"Sphere",ti:".SphereType",sh:"_GriddedSurface"},{en:"multiEdgeOf",ti:".MultiCurvePropertyType"},{en:"_GeometricAggregate",ti:".AbstractGeometricAggregateType",sh:"_Geometry"},{en:"symbol",ti:".SymbolType"},{en:"graphStyle",ti:".GraphStylePropertyType"},{en:"cylindricalCSRef",ti:".CylindricalCSRefType"},{en:"geographicCRSRef",ti:".GeographicCRSRefType"},{en:"parameterValueGroup",ti:".ParameterValueGroupType",sh:"_generalParameterValue"},{en:"coordinateSystemRef",ti:".CoordinateSystemRefType"},{en:"_strictAssociation",ti:".AssociationType"},{en:"DefinitionCollection",ti:".DictionaryType",sh:"Definition"},{en:"GeometricComplex",ti:".GeometricComplexType",sh:"_Geometry"},{en:"FeatureCollection",ti:".FeatureCollectionType",sh:"_Feature"},{en:"Clothoid",ti:".ClothoidType",sh:"_CurveSegment"},{en:"methodFormula",ti:".CodeType"},{en:"Edge",ti:".EdgeType",sh:"_TopoPrimitive"},{en:"polygonPatches",ti:".PolygonPatchArrayPropertyType",sh:"patches"},{en:"meridianName",ti:".CodeType",sh:"name"},{en:"CategoryList",ti:".CodeOrNullListType"},{en:"integerValueList",ti:{t:"l",bti:"Integer"}},{en:"usesParameter",ti:".AbstractGeneralOperationParameterRefType"},{en:"track",ti:".TrackType",sh:"history"},{en:"ImageCRS",ti:".ImageCRSType",sh:"_CoordinateReferenceSystem"},{en:"temporalCRSRef",ti:".TemporalCRSRefType"},{en:"dmsAngle",ti:".DMSAngleType"},{en:"columnIndex",ti:"PositiveInteger"},{en:"target",ti:".TargetPropertyType"},{en:"DerivedUnit",ti:".DerivedUnitType",sh:"UnitDefinition"},{en:"outerBoundaryIs",ti:".AbstractRingPropertyType",sh:"exterior"},{en:"ProjectedCRS",ti:".ProjectedCRSType",sh:"_GeneralDerivedCRS"},{en:"duration",ti:"Duration"},{en:"indirectEntry",ti:".IndirectEntryType"},{en:"pointArrayProperty",ti:".PointArrayPropertyType"},{en:"GridCoverage",ti:".GridCoverageType",sh:"_DiscreteCoverage"},{en:"solidMember",ti:".SolidPropertyType"},{en:"MultiPointCoverage",ti:".MultiPointCoverageType",sh:"_DiscreteCoverage"},{en:"verticalCSRef",ti:".VerticalCSRefType"},{en:"featureProperty",ti:".FeaturePropertyType"},{en:"cartesianCSRef",ti:".CartesianCSRefType"},{en:"concatenatedOperationRef",ti:".ConcatenatedOperationRefType"},{en:"Polygon",ti:".PolygonType",sh:"_Surface"},{en:"Style",ti:".StyleType",sh:"_Style"},{en:"TopoSolid",ti:".TopoSolidType",sh:"_TopoPrimitive"},{en:"engineeringCRSRef",ti:".EngineeringCRSRefType"},{en:"segments",ti:".CurveSegmentArrayPropertyType"},{en:"derivedCRSRef",ti:".DerivedCRSRefType"},{en:"BaseUnit",ti:".BaseUnitType",sh:"UnitDefinition"},{en:"DirectedObservationAtDistance",ti:".DirectedObservationAtDistanceType",sh:"DirectedObservation"},{en:"LineStringSegment",ti:".LineStringSegmentType",sh:"_CurveSegment"},{en:"coord",ti:".CoordType"},{en:"CoordinateSystemAxis",ti:".CoordinateSystemAxisType",sh:"Definition"},{en:"MultiSolidCoverage",ti:".MultiSolidCoverageType",sh:"_DiscreteCoverage"},{en:"dataSource",ti:".StringOrRefType"},{en:"subComplex",ti:".TopoComplexMemberType"},{en:"featureMember",ti:".FeaturePropertyType"},{en:"TopoVolume",ti:".TopoVolumeType"},{en:"rectifiedGridDomain",ti:".RectifiedGridDomainType",sh:"domainSet"},{en:"rowIndex",ti:"PositiveInteger"},{en:"LabelStyle",ti:".LabelStyleType",sh:"_GML"},{en:"TimeInstant",ti:".TimeInstantType",sh:"_TimeGeometricPrimitive"},{en:"trianglePatches",ti:".TrianglePatchArrayPropertyType",sh:"patches"},{en:"_SingleOperation",ti:".AbstractCoordinateOperationType",sh:"_CoordinateOperation"},{en:"IndexMap",ti:".IndexMapType",sh:"GridFunction"},{en:"OperationMethod",ti:".OperationMethodType",sh:"Definition"},{en:"ellipsoidalCSRef",ti:".EllipsoidalCSRefType"},{en:"directedNode",ti:".DirectedNodePropertyType"},{en:"TopologyStyle",ti:".TopologyStyleType",sh:"_GML"},{en:"generalConversionRef",ti:".GeneralConversionRefType"},{en:"crsRef",ti:".CRSRefType"},{en:"CountList",ti:{t:"l"}},{en:"dictionaryEntry",ti:".DictionaryEntryType"},{en:"description",ti:".StringOrRefType"},{en:"GeocentricCRS",ti:".GeocentricCRSType",sh:"_CoordinateReferenceSystem"},{en:"TemporalDatum",ti:".TemporalDatumType",sh:"_Datum"},{en:"position",ti:".PointPropertyType"},{en:"_GeometricPrimitive",ti:".AbstractGeometricPrimitiveType",sh:"_Geometry"},{en:"OrientableCurve",ti:".OrientableCurveType",sh:"_Curve"},{en:"ArcString",ti:".ArcStringType",sh:"_CurveSegment"},{en:"pixelInCell",ti:".PixelInCellType"},{en:"patches",ti:".SurfacePatchArrayPropertyType"},{en:"_Solid",ti:".AbstractSolidType",sh:"_GeometricPrimitive"},{en:"featureMembers",ti:".FeatureArrayPropertyType"},{en:"verticalDatumType",ti:".VerticalDatumTypeType"},{en:"_SurfacePatch",ti:".AbstractSurfacePatchType"},{en:"directedFace",ti:".DirectedFacePropertyType"},{en:"File",ti:".FileType"},{en:"includesValue",ti:".AbstractGeneralParameterValueType",sh:"_generalParameterValue"},{en:"temporalCSRef",ti:".TemporalCSRefType"},{en:"MultiPolygon",ti:".MultiPolygonType",sh:"_GeometricAggregate"},{en:"result",ti:".MeasureType"},{en:"Count",ti:"Integer"},{en:"RectifiedGridCoverage",ti:".RectifiedGridCoverageType",sh:"_DiscreteCoverage"},{en:"_Geometry",ti:".AbstractGeometryType",sh:"_GML"},{en:"minimumOccurs",ti:"NonNegativeInteger"},{en:"stringValue"},{en:"multiPosition",ti:".MultiPointPropertyType"},{en:"datumID",ti:".IdentifierType"},{en:"decimalMinutes",ti:"Decimal"},{en:"MultiSurface",ti:".MultiSurfaceType",sh:"_GeometricAggregate"},{en:"defaultStyle",ti:".DefaultStylePropertyType"},{en:"Definition",ti:".DefinitionType",sh:"_GML"},{en:"engineeringDatumRef",ti:".EngineeringDatumRefType"},{en:"CountExtent",ti:{t:"l"}},{en:"operationRef",ti:".OperationRefType"},{en:"PolyhedralSurface",ti:".PolyhedralSurfaceType",sh:"Surface"},{en:"projectedCRSRef",ti:".ProjectedCRSRefType"},{en:"methodID",ti:".IdentifierType"},{en:"_Datum",ti:".AbstractDatumType",sh:"Definition"},{en:"innerBoundaryIs",ti:".AbstractRingPropertyType",sh:"interior"},{en:"inverseFlattening",ti:".MeasureType"},{en:"operationParameterGroupRef",ti:".OperationParameterRefType"},{en:"isolated",ti:".IsolatedPropertyType"},{en:"FeatureStyle",ti:".FeatureStyleType",sh:"_GML"},{en:"TemporalCS",ti:".TemporalCSType",sh:"_CoordinateSystem"},{en:"gridDomain",ti:".GridDomainType",sh:"domainSet"},{en:"derivedCRSType",ti:".DerivedCRSTypeType"},{en:"Node",ti:".NodeType",sh:"_TopoPrimitive"},{en:"definitionMember",ti:".DictionaryEntryType",sh:"dictionaryEntry"},{en:"coordinateOperationName",ti:".CodeType",sh:"name"},{en:"TopoComplex",ti:".TopoComplexType",sh:"_Topology"},{en:"lineStringMember",ti:".LineStringPropertyType"},{en:"DefinitionProxy",ti:".DefinitionProxyType",sh:"Definition"},{en:"modifiedCoordinate",ti:"PositiveInteger"},{en:"groupName",ti:".CodeType",sh:"name"},{en:"EngineeringCRS",ti:".EngineeringCRSType",sh:"_CoordinateReferenceSystem"},{en:"groupID",ti:".IdentifierType"},{en:"_GeneralDerivedCRS",ti:".AbstractGeneralDerivedCRSType",sh:"_CoordinateReferenceSystem"},{en:"CylindricalCS",ti:".CylindricalCSType",sh:"_CoordinateSystem"},{en:"directedEdge",ti:".DirectedEdgePropertyType"},{en:"multiCurveDomain",ti:".MultiCurveDomainType",sh:"domainSet"},{en:"topoPrimitiveMembers",ti:".TopoPrimitiveArrayAssociationType"},{en:"OperationParameterGroup",ti:".OperationParameterGroupType",sh:"_GeneralOperationParameter"},{en:"GeographicCRS",ti:".GeographicCRSType",sh:"_CoordinateReferenceSystem"},{en:"coordinates",ti:".CoordinatesType"},{en:"QuantityExtent",ti:".QuantityExtentType"},{en:"pointMembers",ti:".PointArrayPropertyType"},{en:"LineString",ti:".LineStringType",sh:"_Curve"},{en:"LocationKeyWord",ti:".CodeType"},{en:"_TimePrimitive",ti:".AbstractTimePrimitiveType",sh:"_TimeObject"},{en:"MultiCurve",ti:".MultiCurveType",sh:"_GeometricAggregate"},{en:"featureStyle",ti:".FeatureStylePropertyType"},{en:"booleanValue",ti:"Boolean"},{en:"_FeatureCollection",ti:".AbstractFeatureCollectionType",sh:"_Feature"},{en:"Solid",ti:".SolidType",sh:"_Solid"},{en:"Geodesic",ti:".GeodesicType",sh:"GeodesicString"},{en:"metaDataProperty",ti:".MetaDataPropertyType"},{en:"Bag",ti:".BagType",sh:"_GML"},{en:"multiCoverage",ti:".MultiSurfacePropertyType"},{en:"usesValue",ti:".ParameterValueType"},{en:"tupleList",ti:".CoordinatesType"},{en:"PassThroughOperation",ti:".PassThroughOperationType",sh:"_SingleOperation"},{en:"LabelExpression",sc:".LabelType"},{en:"multiPointProperty",ti:".MultiPointPropertyType"},{en:"parameterID",ti:".IdentifierType"},{en:"superComplex",ti:".TopoComplexMemberType"},{en:"Surface",ti:".SurfaceType",sh:"_Surface"},{en:"EngineeringDatum",ti:".EngineeringDatumType",sh:"_Datum"},{en:"_ContinuousCoverage",ti:".AbstractContinuousCoverageType",sh:"_Coverage"},{en:"greenwichLongitude",ti:".AngleChoiceType"},{en:"sphericalCSRef",ti:".SphericalCSRefType"},{en:"OffsetCurve",ti:".OffsetCurveType",sh:"_CurveSegment"},{en:"EllipsoidalCS",ti:".EllipsoidalCSType",sh:"_CoordinateSystem"},{en:"VerticalDatum",ti:".VerticalDatumType",sh:"_Datum"},{en:"baseCRS",ti:".CoordinateReferenceSystemRefType"},{en:"SphericalCS",ti:".SphericalCSType",sh:"_CoordinateSystem"},{en:"boundingBox",ti:".EnvelopeType"},{en:"definedByConversion",ti:".GeneralConversionRefType"},{en:"_Surface",ti:".AbstractSurfaceType",sh:"_GeometricPrimitive"},{en:"_generalParameterValue",ti:".AbstractGeneralParameterValueType"},{en:"DirectionVector",ti:".DirectionVectorType"},{en:"_association",ti:".AssociationType"},{en:"_GML",ti:".AbstractGMLType",sh:"_Object"},{en:"multiExtentOf",ti:".MultiSurfacePropertyType"},{en:"datumRef",ti:".DatumRefType"},{en:"passThroughOperationRef",ti:".PassThroughOperationRefType"},{en:"referenceSystemRef",ti:".ReferenceSystemRefType"},{en:"_GeneralOperationParameter",ti:".AbstractGeneralOperationParameterType",sh:"Definition"},{en:"_CurveSegment",ti:".AbstractCurveSegmentType"},{en:"geocentricCRSRef",ti:".GeocentricCRSRefType"},{en:"geometryMember",ti:".GeometryPropertyType"},{en:"surfaceMembers",ti:".SurfaceArrayPropertyType"},{en:"TimeOrdinalEra",ti:".TimeOrdinalEraType"},{en:"_reference",ti:".ReferenceType"},{en:"ellipsoidName",ti:".CodeType",sh:"name"},{en:"_TimeComplex",ti:".AbstractTimeComplexType",sh:"_TimeObject"},{en:"boundingPolygon",ti:".PolygonType"},{en:"subject",ti:".TargetPropertyType",sh:"target"},{en:"Rectangle",ti:".RectangleType",sh:"_SurfacePatch"},{en:"Cylinder",ti:".CylinderType",sh:"_GriddedSurface"},{en:"multiSurfaceProperty",ti:".MultiSurfacePropertyType"},{en:"_Style",ti:".AbstractStyleType",sh:"_GML"},{en:"generalTransformationRef",ti:".GeneralTransformationRefType"},{en:"CompositeSurface",ti:".CompositeSurfaceType",sh:"_Surface"},{en:"validArea",ti:".ExtentType"},{en:"MultiGeometry",ti:".MultiGeometryType",sh:"_GeometricAggregate"},{en:"timeInterval",ti:".TimeIntervalLengthType"},{en:"maximalComplex",ti:".TopoComplexMemberType"},{en:"Point",ti:".PointType",sh:"_GeometricPrimitive"},{en:"VerticalCS",ti:".VerticalCSType",sh:"_CoordinateSystem"},{en:"usesSingleOperation",ti:".SingleOperationRefType"},{en:"catalogSymbol",ti:".CodeType"},{en:"transformationRef",ti:".TransformationRefType"},{en:"Envelope",ti:".EnvelopeType"},{en:"CompoundCRS",ti:".CompoundCRSType",sh:"_CRS"},{en:"value",ti:".MeasureType"},{en:"Boolean",ti:"Boolean"},{en:"primeMeridianRef",ti:".PrimeMeridianRefType"},{en:"includesElement",ti:".CovarianceElementType"},{en:"Ellipsoid",ti:".EllipsoidType",sh:"Definition"},{en:"topoSurfaceProperty",ti:".TopoSurfacePropertyType"},{en:"surfaceProperty",ti:".SurfacePropertyType"},{en:"pos",ti:".DirectPositionType"},{en:"PrimeMeridian",ti:".PrimeMeridianType",sh:"Definition"},{en:"_Curve",ti:".AbstractCurveType",sh:"_GeometricPrimitive"},{en:"definitionRef",ti:".ReferenceType"},{en:"axisAbbrev",ti:".CodeType"},{en:"LinearCS",ti:".LinearCSType",sh:"_CoordinateSystem"},{en:"TimeClock",ti:".TimeClockType",sh:"_TimeReferenceSystem"},{en:"multiCenterLineOf",ti:".MultiCurvePropertyType"},{en:"UserDefinedCS",ti:".UserDefinedCSType",sh:"_CoordinateSystem"},{en:"TimeNode",ti:".TimeNodeType",sh:"_TimeTopologyPrimitive"},{en:"_TimeSlice",ti:".AbstractTimeSliceType",sh:"_GML"},{en:"valueList",ti:".MeasureListType"},{en:"targetCRS",ti:".CRSRefType"},{en:"isSphere"},{en:"direction",ti:".DirectionPropertyType"},{en:"geometryStyle",ti:".GeometryStylePropertyType"},{en:"rangeParameters",ti:".RangeParametersType"},{en:"Bezier",ti:".BezierType",sh:"BSpline"},{en:"includesCRS",ti:".CoordinateReferenceSystemRefType"},{en:"linearCSRef",ti:".LinearCSRefType"},{en:"compoundCRSRef",ti:".CompoundCRSRefType"},{en:"CompositeSolid",ti:".CompositeSolidType",sh:"_Solid"},{en:"usesTemporalCS",ti:".TemporalCSRefType"},{en:"csID",ti:".IdentifierType"},{en:"usesSphericalCS",ti:".SphericalCSRefType"},{en:"geodeticDatumRef",ti:".GeodeticDatumRefType"},{en:"multiSolidDomain",ti:".MultiSolidDomainType",sh:"domainSet"},{en:"directedTopoSolid",ti:".DirectedTopoSolidPropertyType"},{en:"userDefinedCSRef",ti:".UserDefinedCSRefType"},{en:"measure",ti:".MeasureType"},{en:"origin",ti:"DateTime"},{en:"dmsAngleValue",ti:".DMSAngleType"},{en:"MultiSolid",ti:".MultiSolidType",sh:"_GeometricAggregate"},{en:"Array",ti:".ArrayType",sh:"_GML"},{en:"parameterValue",ti:".ParameterValueType",sh:"_generalParameterValue"},{en:"maximumOccurs",ti:"PositiveInteger"},{en:"CircleByCenterPoint",ti:".CircleByCenterPointType",sh:"ArcByCenterPoint"},{en:"roughConversionToPreferredUnit",ti:".ConversionToPreferredUnitType"},{en:"remarks",ti:".StringOrRefType"},{en:"Null",ti:{t:"l"}},{en:"Transformation",ti:".TransformationType",sh:"_GeneralTransformation"},{en:"PolygonPatch",ti:".PolygonPatchType",sh:"_SurfacePatch"},{en:"topologyStyle",ti:".TopologyStylePropertyType"},{en:"ImageDatum",ti:".ImageDatumType",sh:"_Datum"},{en:"CategoryExtent",ti:".CategoryExtentType"},{en:"coordinateReferenceSystemRef",ti:".CoordinateReferenceSystemRefType"},{en:"multiLocation",ti:".MultiPointPropertyType"},{en:"TimeCoordinateSystem",ti:".TimeCoordinateSystemType",sh:"_TimeReferenceSystem"},{en:"interior",ti:".AbstractRingPropertyType"},{en:"MovingObjectStatus",ti:".MovingObjectStatusType",sh:"_TimeSlice"},{en:"secondDefiningParameter",ti:".SecondDefiningParameterType"},{en:"polygonMember",ti:".PolygonPropertyType"},{en:"PolarCS",ti:".PolarCSType",sh:"_CoordinateSystem"},{en:"usesEllipsoid",ti:".EllipsoidRefType"},{en:"_Operation",ti:".AbstractCoordinateOperationType",sh:"_SingleOperation"},{en:"multiPointDomain",ti:".MultiPointDomainType",sh:"domainSet"},{en:"timePosition",ti:".TimePositionType"},{en:"coordinateOperationRef",ti:".CoordinateOperationRefType"},{en:"usesCartesianCS",ti:".CartesianCSRefType"},{en:"absoluteExternalPositionalAccuracy",ti:".AbsoluteExternalPositionalAccuracyType",sh:"_positionalAccuracy"},{en:"coverageFunction",ti:".CoverageFunctionType"},{en:"usesVerticalCS",ti:".VerticalCSRefType"},{en:"operationParameterRef",ti:".OperationParameterRefType"},{en:"meridianID",ti:".IdentifierType"},{en:"ArcStringByBulge",ti:".ArcStringByBulgeType",sh:"_CurveSegment"},{en:"LocationString",ti:".StringOrRefType"},{en:"MultiSurfaceCoverage",ti:".MultiSurfaceCoverageType",sh:"_DiscreteCoverage"},{en:"Grid",ti:".GridType",sh:"_ImplicitGeometry"},{en:"CompassPoint"},{en:"location",ti:".LocationPropertyType"},{en:"imageDatumRef",ti:".ImageDatumRefType"},{en:"labelStyle",ti:".LabelStylePropertyType"},{en:"targetDimensions",ti:"PositiveInteger"},{en:"OrientableSurface",ti:".OrientableSurfaceType",sh:"_Surface"},{en:"CubicSpline",ti:".CubicSplineType",sh:"_CurveSegment"},{en:"baseSurface",ti:".SurfacePropertyType"},{en:"Category",ti:".CodeType"},{en:"MappingRule",ti:".StringOrRefType"},{en:"DataBlock",ti:".DataBlockType"},{en:"verticalExtent",ti:".EnvelopeType"},{en:"BooleanList",ti:{t:"l"}},{en:"usesMethod",ti:".OperationMethodRefType"},{en:"_TimeObject",ti:".AbstractTimeObjectType",sh:"_GML"},{en:"methodName",ti:".CodeType",sh:"name"},{en:"valueComponents",ti:".ValueArrayPropertyType"},{en:"members",ti:".ArrayAssociationType"},{en:"container",ti:".ContainerPropertyType"},{en:"lineStringProperty",ti:".LineStringPropertyType"},{en:"vector",ti:".VectorType"},{en:"singleOperationRef",ti:".SingleOperationRefType"},{en:"TimeTopologyComplex",ti:".TimeTopologyComplexType",sh:"_TimeComplex"},{en:"curveArrayProperty",ti:".CurveArrayPropertyType"},{en:"axisID",ti:".IdentifierType"},{en:"usesAxis",ti:".CoordinateSystemAxisRefType"},{en:"name",ti:".CodeType"},{en:"CompositeCurve",ti:".CompositeCurveType",sh:"_Curve"},{en:"solidProperty",ti:".SolidPropertyType"},{en:"valueProperty",ti:".ValuePropertyType"},{en:"GeodesicString",ti:".GeodesicStringType",sh:"_CurveSegment"},{en:"usesVerticalDatum",ti:".VerticalDatumRefType"},{en:"_GriddedSurface",ti:".AbstractGriddedSurfaceType",sh:"_ParametricCurveSurface"},{en:"resultOf",ti:".AssociationType"},{en:"_positionalAccuracy",ti:".AbstractPositionalAccuracyType"},{en:"_Feature",ti:".AbstractFeatureType",sh:"_GML"},{en:"ArcByCenterPoint",ti:".ArcByCenterPointType",sh:"_CurveSegment"},{en:"_CoordinateReferenceSystem",ti:".AbstractReferenceSystemType",sh:"_CRS"},{en:"covariance",ti:"Double"},{en:"multiSurfaceDomain",ti:".MultiSurfaceDomainType",sh:"domainSet"},{en:"usesCS",ti:".CoordinateSystemRefType"},{en:"ArcByBulge",ti:".ArcByBulgeType",sh:"ArcStringByBulge"},{en:"angle",ti:".MeasureType"},{en:"covarianceMatrix",ti:".CovarianceMatrixType",sh:"_positionalAccuracy"},{en:"_Object",ti:"AnyType"},{en:"EnvelopeWithTimePeriod",ti:".EnvelopeWithTimePeriodType",sh:"Envelope"},{en:"ObliqueCartesianCS",ti:".ObliqueCartesianCSType",sh:"_CoordinateSystem"},{en:"Observation",ti:".ObservationType",sh:"_Feature"},{en:"status",ti:".StringOrRefType"},{en:"centerLineOf",ti:".CurvePropertyType"},{en:"topoPrimitiveMember",ti:".TopoPrimitiveMemberType"},{en:"_MetaData",ti:".AbstractMetaDataType",sh:"_Object"},{en:"TimeOrdinalReferenceSystem",ti:".TimeOrdinalReferenceSystemType",sh:"_TimeReferenceSystem"},{en:"srsName",ti:".CodeType",sh:"name"},{en:"unitOfMeasure",ti:".UnitOfMeasureType"},{en:"VerticalCRS",ti:".VerticalCRSType",sh:"_CoordinateReferenceSystem"},{en:"centerOf",ti:".PointPropertyType"},{en:"_GeneralTransformation",ti:".AbstractGeneralTransformationType",sh:"_Operation"},{en:"multiSolidProperty",ti:".MultiSolidPropertyType"},{en:"_CoordinateSystem",ti:".AbstractCoordinateSystemType",sh:"Definition"},{en:"solidArrayProperty",ti:".SolidArrayPropertyType"},{en:"_Topology",ti:".AbstractTopologyType",sh:"_GML"},{en:"seconds",ti:"Decimal"},{en:"imageCRSRef",ti:".ImageCRSRefType"},{en:"Arc",ti:".ArcType",sh:"ArcString"},{en:"baseCurve",ti:".CurvePropertyType"},{en:"Triangle",ti:".TriangleType",sh:"_SurfacePatch"},{en:"valueFile"},{en:"TopoSurface",ti:".TopoSurfaceType"},{en:"TopoCurve",ti:".TopoCurveType"},{en:"csName",ti:".CodeType",sh:"name"},{en:"usesImageDatum",ti:".ImageDatumRefType"},{en:"derivationUnitTerm",ti:".DerivationUnitTermType"},{en:"usesObliqueCartesianCS",ti:".ObliqueCartesianCSRefType"},{en:"curveMembers",ti:".CurveArrayPropertyType"},{en:"curveProperty",ti:".CurvePropertyType"},{en:"QuantityList",ti:".MeasureOrNullListType"},{en:"Circle",ti:".CircleType",sh:"Arc"},{en:"anchorPoint",ti:".CodeType"},{en:"Curve",ti:".CurveType",sh:"_Curve"},{en:"MultiCurveCoverage",ti:".MultiCurveCoverageType",sh:"_DiscreteCoverage"},{en:"TimeEdge",ti:".TimeEdgeType",sh:"_TimeTopologyPrimitive"},{en:"MultiPoint",ti:".MultiPointType",sh:"_GeometricAggregate"},{en:"GridFunction",ti:".GridFunctionType"},{en:"semiMajorAxis",ti:".MeasureType"},{en:"history",ti:".HistoryPropertyType"},{en:"valueComponent",ti:".ValuePropertyType"},{en:"topoCurveProperty",ti:".TopoCurvePropertyType"},{en:"DirectedObservation",ti:".DirectedObservationType",sh:"Observation"},{en:"OperationParameter",ti:".OperationParameterType",sh:"_GeneralOperationParameter"},{en:"UnitDefinition",ti:".UnitDefinitionType",sh:"Definition"},{en:"pointRep",ti:".PointPropertyType"},{en:"_TimeReferenceSystem",ti:".AbstractTimeReferenceSystemType",sh:"Definition"},{en:"quantityType",ti:".StringOrRefType"},{en:"valueOfParameter",ti:".OperationParameterRefType"},{en:"_CoordinateOperation",ti:".AbstractCoordinateOperationType",sh:"Definition"},{en:"GeodeticDatum",ti:".GeodeticDatumType",sh:"_Datum"},{en:"_CRS",ti:".AbstractReferenceSystemType",sh:"_ReferenceSystem"},{en:"usesOperation",ti:".OperationRefType"},{en:"minutes",ti:"NonNegativeInteger"},{en:"datumName",ti:".CodeType",sh:"name"},{en:"LinearRing",ti:".LinearRingType",sh:"_Ring"},{en:"abstractGeneralOperationParameterRef",ti:".AbstractGeneralOperationParameterRefType"},{en:"usesGeodeticDatum",ti:".GeodeticDatumRefType"},{en:"edgeOf",ti:".CurvePropertyType"},{en:"using",ti:".FeaturePropertyType"},{en:"GeometryStyle",ti:".GeometryStyleType",sh:"_GML"},{en:"curveMember",ti:".CurvePropertyType"},{en:"conversionToPreferredUnit",ti:".ConversionToPreferredUnitType"},{en:"_DiscreteCoverage",ti:".AbstractDiscreteCoverageType",sh:"_Coverage"},{en:"posList",ti:".DirectPositionListType"},{en:"_TimeGeometricPrimitive",ti:".AbstractTimeGeometricPrimitiveType",sh:"_TimePrimitive"},{en:"conversionRef",ti:".ConversionRefType"},{en:"surfaceArrayProperty",ti:".SurfaceArrayPropertyType"},{en:"rangeSet",ti:".RangeSetType"},{en:"valuesOfGroup",ti:".OperationParameterGroupRefType"},{en:"axisDirection",ti:".CodeType"},{en:"coordinateOperationID",ti:".IdentifierType"},{en:"TemporalCRS",ti:".TemporalCRSType",sh:"_CoordinateReferenceSystem"},{en:"_GeneralConversion",ti:".AbstractGeneralConversionType",sh:"_Operation"},{en:"multiCenterOf",ti:".MultiPointPropertyType"},{en:"includesParameter",ti:".AbstractGeneralOperationParameterRefType"},{en:"BSpline",ti:".BSplineType",sh:"_CurveSegment"},{en:"TimeCalendarEra",ti:".TimeCalendarEraType",sh:"Definition"},{en:"priorityLocation",ti:".PriorityLocationPropertyType",sh:"location"},{en:"usesPrimeMeridian",ti:".PrimeMeridianRefType"},{en:"TopoPoint",ti:".TopoPointType"},{en:"ValueArray",ti:".ValueArrayType",sh:"CompositeValue"},{en:"Dictionary",ti:".DictionaryType",sh:"Definition"},{en:"_ImplicitGeometry",ti:".AbstractGeometryType",sh:"_Geometry"},{en:"scope"},{en:"AffinePlacement",ti:".AffinePlacementType"},{en:"multiGeometryProperty",ti:".MultiGeometryPropertyType"},{en:"topoComplexProperty",ti:".TopoComplexMemberType"},{en:"GenericMetaData",ti:".GenericMetaDataType",sh:"_MetaData"},{en:"validTime",ti:".TimePrimitivePropertyType"},{en:"_ReferenceSystem",ti:".AbstractReferenceSystemType",sh:"Definition"},{en:"member",ti:".AssociationType"},{en:"ellipsoidID",ti:".IdentifierType"},{en:"ellipsoidRef",ti:".EllipsoidRefType"},{en:"MultiLineString",ti:".MultiLineStringType",sh:"_GeometricAggregate"},{en:"_TimeTopologyPrimitive",ti:".AbstractTimeTopologyPrimitiveType",sh:"_TimePrimitive"},{en:"parameterName",ti:".CodeType",sh:"name"},{en:"measureDescription",ti:".CodeType"},{en:"ConventionalUnit",ti:".ConventionalUnitType",sh:"UnitDefinition"},{en:"extentOf",ti:".SurfacePropertyType"},{en:"_Coverage",ti:".AbstractCoverageType",sh:"_Feature"},{en:"TriangulatedSurface",ti:".TriangulatedSurfaceType",sh:"Surface"},{en:"Tin",ti:".TinType",sh:"TriangulatedSurface"},{en:"operationVersion"},{en:"pointProperty",ti:".PointPropertyType"},{en:"Conversion",ti:".ConversionType",sh:"_GeneralConversion"},{en:"verticalCRSRef",ti:".VerticalCRSRefType"},{en:"topoVolumeProperty",ti:".TopoVolumePropertyType"},{en:"exterior",ti:".AbstractRingPropertyType"},{en:"realizationEpoch",ti:"Date"}]}}})?ct.apply(Vn,[]):ct)&&(Un.exports=qe)},723:(Un,Vn)=>{var ct,qe;void 0!==(qe="function"==typeof(ct=function(){return{OWS_1_1_0:{n:"OWS_1_1_0",dens:"http://www.opengis.net/ows/1.1",dans:"http://www.w3.org/1999/xlink",deps:["XLink_1_0"],tis:[{ln:"OperationsMetadata",tn:null,ps:[{n:"operation",rq:!0,mno:2,col:!0,en:"Operation",ti:".Operation"},{n:"parameter",mno:0,col:!0,en:"Parameter",ti:".DomainType"},{n:"constraint",mno:0,col:!0,en:"Constraint",ti:".DomainType"},{n:"extendedCapabilities",en:"ExtendedCapabilities",ti:"AnyType"}]},{ln:"IdentificationType",bti:".BasicIdentificationType",ps:[{n:"boundingBox",mno:0,col:!0,mx:!1,dom:!1,en:"BoundingBox",ti:".BoundingBoxType",t:"er"},{n:"outputFormat",mno:0,col:!0,en:"OutputFormat"},{n:"availableCRS",mno:0,col:!0,mx:!1,dom:!1,en:"AvailableCRS",t:"er"}]},{ln:"ResponsiblePartySubsetType",ps:[{n:"individualName",en:"IndividualName"},{n:"positionName",en:"PositionName"},{n:"contactInfo",en:"ContactInfo",ti:".ContactType"},{n:"role",en:"Role",ti:".CodeType"}]},{ln:"AnyValue",tn:null},{ln:"DomainType",bti:".UnNamedDomainType",ps:[{n:"name",rq:!0,an:{lp:"name"},t:"a"}]},{ln:"AcceptVersionsType",ps:[{n:"version",rq:!0,col:!0,en:"Version"}]},{ln:"DCP",tn:null,ps:[{n:"http",rq:!0,en:"HTTP",ti:".HTTP"}]},{ln:"ManifestType",bti:".BasicIdentificationType",ps:[{n:"referenceGroup",rq:!0,col:!0,en:"ReferenceGroup",ti:".ReferenceGroupType"}]},{ln:"ExceptionType",ps:[{n:"exceptionText",mno:0,col:!0,en:"ExceptionText"},{n:"exceptionCode",rq:!0,an:{lp:"exceptionCode"},t:"a"},{n:"locator",an:{lp:"locator"},t:"a"}]},{ln:"RequestMethodType",bti:".OnlineResourceType",ps:[{n:"constraint",mno:0,col:!0,en:"Constraint",ti:".DomainType"}]},{ln:"SectionsType",ps:[{n:"section",mno:0,col:!0,en:"Section"}]},{ln:"UnNamedDomainType",ps:[{n:"allowedValues",rq:!0,en:"AllowedValues",ti:".AllowedValues"},{n:"anyValue",rq:!0,en:"AnyValue",ti:".AnyValue"},{n:"noValues",rq:!0,en:"NoValues",ti:".NoValues"},{n:"valuesReference",rq:!0,en:"ValuesReference",ti:".ValuesReference"},{n:"defaultValue",en:"DefaultValue",ti:".ValueType"},{n:"meaning",en:"Meaning",ti:".DomainMetadataType"},{n:"dataType",en:"DataType",ti:".DomainMetadataType"},{n:"uom",rq:!0,en:"UOM",ti:".DomainMetadataType"},{n:"referenceSystem",rq:!0,en:"ReferenceSystem",ti:".DomainMetadataType"},{n:"metadata",mno:0,col:!0,en:"Metadata",ti:".MetadataType"}]},{ln:"HTTP",tn:null,ps:[{n:"getOrPost",rq:!0,col:!0,mx:!1,dom:!1,etis:[{en:"Post",ti:".RequestMethodType"},{en:"Get",ti:".RequestMethodType"}],t:"ers"}]},{ln:"ServiceReferenceType",bti:".ReferenceType",ps:[{n:"requestMessage",rq:!0,en:"RequestMessage",ti:"AnyType"},{n:"requestMessageReference",rq:!0,en:"RequestMessageReference"}]},{ln:"KeywordsType",ps:[{n:"keyword",rq:!0,col:!0,en:"Keyword",ti:".LanguageStringType"},{n:"type",en:"Type",ti:".CodeType"}]},{ln:"AllowedValues",tn:null,ps:[{n:"valueOrRange",rq:!0,col:!0,etis:[{en:"Value",ti:".ValueType"},{en:"Range",ti:".RangeType"}],t:"es"}]},{ln:"TelephoneType",ps:[{n:"voice",mno:0,col:!0,en:"Voice"},{n:"facsimile",mno:0,col:!0,en:"Facsimile"}]},{ln:"ReferenceType",bti:".AbstractReferenceBaseType",ps:[{n:"identifier",en:"Identifier",ti:".CodeType"},{n:"_abstract",mno:0,col:!0,en:"Abstract",ti:".LanguageStringType"},{n:"format",en:"Format"},{n:"metadata",mno:0,col:!0,en:"Metadata",ti:".MetadataType"}]},{ln:"ExceptionReport",tn:null,ps:[{n:"exception",rq:!0,col:!0,en:"Exception",ti:".ExceptionType"},{n:"version",rq:!0,an:{lp:"version"},t:"a"},{n:"lang",an:{lp:"lang",ns:"http://www.w3.org/XML/1998/namespace"},t:"a"}]},{ln:"GetResourceByIdType",ps:[{n:"resourceID",mno:0,col:!0,en:"ResourceID"},{n:"outputFormat",en:"OutputFormat"},{n:"service",rq:!0,an:{lp:"service"},t:"a"},{n:"version",rq:!0,an:{lp:"version"},t:"a"}]},{ln:"RangeType",ps:[{n:"minimumValue",en:"MinimumValue",ti:".ValueType"},{n:"maximumValue",en:"MaximumValue",ti:".ValueType"},{n:"spacing",en:"Spacing",ti:".ValueType"},{n:"rangeClosure",ti:{t:"l"},an:{lp:"rangeClosure",ns:"http://www.opengis.net/ows/1.1"},t:"a"}]},{ln:"LanguageStringType",ps:[{n:"value",t:"v"},{n:"lang",an:{lp:"lang",ns:"http://www.w3.org/XML/1998/namespace"},t:"a"}]},{ln:"DescriptionType",ps:[{n:"title",mno:0,col:!0,en:"Title",ti:".LanguageStringType"},{n:"_abstract",mno:0,col:!0,en:"Abstract",ti:".LanguageStringType"},{n:"keywords",mno:0,col:!0,en:"Keywords",ti:".KeywordsType"}]},{ln:"BoundingBoxType",ps:[{n:"lowerCorner",rq:!0,en:"LowerCorner",ti:{t:"l",bti:"Double"}},{n:"upperCorner",rq:!0,en:"UpperCorner",ti:{t:"l",bti:"Double"}},{n:"crs",an:{lp:"crs"},t:"a"},{n:"dimensions",ti:"PositiveInteger",an:{lp:"dimensions"},t:"a"}]},{ln:"ContentsBaseType",ps:[{n:"datasetDescriptionSummary",mno:0,col:!0,mx:!1,dom:!1,en:"DatasetDescriptionSummary",ti:".DatasetDescriptionSummaryBaseType",t:"er"},{n:"otherSource",mno:0,col:!0,mx:!1,dom:!1,en:"OtherSource",ti:".MetadataType",t:"er"}]},{ln:"BasicIdentificationType",bti:".DescriptionType",ps:[{n:"identifier",en:"Identifier",ti:".CodeType"},{n:"metadata",mno:0,col:!0,en:"Metadata",ti:".MetadataType"}]},{ln:"ReferenceGroupType",bti:".BasicIdentificationType",ps:[{n:"abstractReferenceBase",rq:!0,col:!0,mx:!1,dom:!1,en:"AbstractReferenceBase",ti:".AbstractReferenceBaseType",t:"er"}]},{ln:"ResponsiblePartyType",ps:[{n:"individualName",en:"IndividualName"},{n:"organisationName",en:"OrganisationName"},{n:"positionName",en:"PositionName"},{n:"contactInfo",en:"ContactInfo",ti:".ContactType"},{n:"role",rq:!0,en:"Role",ti:".CodeType"}]},{ln:"ValuesReference",tn:null,ps:[{n:"value",t:"v"},{n:"reference",rq:!0,an:{lp:"reference",ns:"http://www.opengis.net/ows/1.1"},t:"a"}]},{ln:"DatasetDescriptionSummaryBaseType",bti:".DescriptionType",ps:[{n:"wgs84BoundingBox",mno:0,col:!0,en:"WGS84BoundingBox",ti:".WGS84BoundingBoxType"},{n:"identifier",rq:!0,en:"Identifier",ti:".CodeType"},{n:"boundingBox",mno:0,col:!0,mx:!1,dom:!1,en:"BoundingBox",ti:".BoundingBoxType",t:"er"},{n:"metadata",mno:0,col:!0,en:"Metadata",ti:".MetadataType"},{n:"datasetDescriptionSummary",mno:0,col:!0,mx:!1,dom:!1,en:"DatasetDescriptionSummary",ti:".DatasetDescriptionSummaryBaseType",t:"er"}]},{ln:"ServiceIdentification",tn:null,bti:".DescriptionType",ps:[{n:"serviceType",rq:!0,en:"ServiceType",ti:".CodeType"},{n:"serviceTypeVersion",rq:!0,col:!0,en:"ServiceTypeVersion"},{n:"profile",mno:0,col:!0,en:"Profile"},{n:"fees",en:"Fees"},{n:"accessConstraints",mno:0,col:!0,en:"AccessConstraints"}]},{ln:"AcceptFormatsType",ps:[{n:"outputFormat",mno:0,col:!0,en:"OutputFormat"}]},{ln:"NoValues",tn:null},{ln:"Operation",tn:null,ps:[{n:"dcp",rq:!0,col:!0,en:"DCP",ti:".DCP"},{n:"parameter",mno:0,col:!0,en:"Parameter",ti:".DomainType"},{n:"constraint",mno:0,col:!0,en:"Constraint",ti:".DomainType"},{n:"metadata",mno:0,col:!0,en:"Metadata",ti:".MetadataType"},{n:"name",rq:!0,an:{lp:"name"},t:"a"}]},{ln:"AbstractReferenceBaseType",ps:[{n:"type",an:{lp:"type",ns:"http://www.opengis.net/ows/1.1"},t:"a"},{n:"href",rq:!0,t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"AddressType",ps:[{n:"deliveryPoint",mno:0,col:!0,en:"DeliveryPoint"},{n:"city",en:"City"},{n:"administrativeArea",en:"AdministrativeArea"},{n:"postalCode",en:"PostalCode"},{n:"country",en:"Country"},{n:"electronicMailAddress",mno:0,col:!0,en:"ElectronicMailAddress"}]},{ln:"ValueType",ps:[{n:"value",t:"v"}]},{ln:"MetadataType",ps:[{n:"abstractMetaData",en:"AbstractMetaData",ti:"AnyType"},{n:"about",an:{lp:"about"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"OnlineResourceType",ps:[{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"DomainMetadataType",ps:[{n:"value",t:"v"},{n:"reference",an:{lp:"reference",ns:"http://www.opengis.net/ows/1.1"},t:"a"}]},{ln:"WGS84BoundingBoxType",bti:".BoundingBoxType"},{ln:"ContactType",ps:[{n:"phone",en:"Phone",ti:".TelephoneType"},{n:"address",en:"Address",ti:".AddressType"},{n:"onlineResource",en:"OnlineResource",ti:".OnlineResourceType"},{n:"hoursOfService",en:"HoursOfService"},{n:"contactInstructions",en:"ContactInstructions"}]},{ln:"CapabilitiesBaseType",ps:[{n:"serviceIdentification",en:"ServiceIdentification",ti:".ServiceIdentification"},{n:"serviceProvider",en:"ServiceProvider",ti:".ServiceProvider"},{n:"operationsMetadata",en:"OperationsMetadata",ti:".OperationsMetadata"},{n:"version",rq:!0,an:{lp:"version"},t:"a"},{n:"updateSequence",an:{lp:"updateSequence"},t:"a"}]},{ln:"ServiceProvider",tn:null,ps:[{n:"providerName",rq:!0,en:"ProviderName"},{n:"providerSite",en:"ProviderSite",ti:".OnlineResourceType"},{n:"serviceContact",rq:!0,en:"ServiceContact",ti:".ResponsiblePartySubsetType"}]},{ln:"CodeType",ps:[{n:"value",t:"v"},{n:"codeSpace",an:{lp:"codeSpace"},t:"a"}]},{ln:"GetCapabilitiesType",ps:[{n:"acceptVersions",en:"AcceptVersions",ti:".AcceptVersionsType"},{n:"sections",en:"Sections",ti:".SectionsType"},{n:"acceptFormats",en:"AcceptFormats",ti:".AcceptFormatsType"},{n:"updateSequence",an:{lp:"updateSequence"},t:"a"}]}],eis:[{en:"Metadata",ti:".MetadataType"},{en:"DCP",ti:".DCP"},{en:"AbstractReferenceBase",ti:".AbstractReferenceBaseType"},{en:"Language",ti:"Language"},{en:"Role",ti:".CodeType"},{en:"GetResourceByID",ti:".GetResourceByIdType"},{en:"Meaning",ti:".DomainMetadataType"},{en:"AvailableCRS"},{en:"OperationResponse",ti:".ManifestType"},{en:"OutputFormat"},{en:"MaximumValue",ti:".ValueType"},{en:"Range",ti:".RangeType"},{en:"OrganisationName"},{en:"IndividualName"},{en:"Post",ti:".RequestMethodType",sc:".HTTP"},{en:"Resource",ti:"AnyType"},{en:"NoValues",ti:".NoValues"},{en:"ServiceReference",ti:".ServiceReferenceType",sh:"Reference"},{en:"DatasetDescriptionSummaryExtension",ti:".DatasetDescriptionSummaryBaseType",sh:"DatasetDescriptionSummary"},{en:"InputData",ti:".ManifestType"},{en:"ServiceIdentification",ti:".ServiceIdentification"},{en:"AccessConstraints"},{en:"ContactInfo",ti:".ContactType"},{en:"ExceptionReport",ti:".ExceptionReport"},{en:"Operation",ti:".Operation"},{en:"Title",ti:".LanguageStringType"},{en:"ReferenceSystem",ti:".DomainMetadataType"},{en:"Exception",ti:".ExceptionType"},{en:"Value",ti:".ValueType"},{en:"Keywords",ti:".KeywordsType"},{en:"Get",ti:".RequestMethodType",sc:".HTTP"},{en:"DatasetDescriptionSummary",ti:".DatasetDescriptionSummaryBaseType"},{en:"PositionName"},{en:"AllowedValues",ti:".AllowedValues"},{en:"Manifest",ti:".ManifestType"},{en:"Identifier",ti:".CodeType"},{en:"AbstractMetaData",ti:"AnyType"},{en:"AnyValue",ti:".AnyValue"},{en:"ServiceProvider",ti:".ServiceProvider"},{en:"DefaultValue",ti:".ValueType"},{en:"OtherSourceExtension",ti:".MetadataType",sh:"OtherSource"},{en:"OperationsMetadata",ti:".OperationsMetadata"},{en:"Fees"},{en:"BoundingBox",ti:".BoundingBoxType"},{en:"DataType",ti:".DomainMetadataType"},{en:"Abstract",ti:".LanguageStringType"},{en:"Spacing",ti:".ValueType"},{en:"GetCapabilities",ti:".GetCapabilitiesType"},{en:"HTTP",ti:".HTTP"},{en:"UOM",ti:".DomainMetadataType"},{en:"OtherSource",ti:".MetadataType"},{en:"WGS84BoundingBox",ti:".WGS84BoundingBoxType",sh:"BoundingBox"},{en:"MinimumValue",ti:".ValueType"},{en:"Reference",ti:".ReferenceType",sh:"AbstractReferenceBase"},{en:"ReferenceGroup",ti:".ReferenceGroupType"},{en:"ExtendedCapabilities",ti:"AnyType"},{en:"PointOfContact",ti:".ResponsiblePartyType"},{en:"ValuesReference",ti:".ValuesReference"},{en:"SupportedCRS",sh:"AvailableCRS"}]}}})?ct.apply(Vn,[]):ct)&&(Un.exports=qe)},815:(Un,Vn)=>{var ct,qe;void 0!==(qe="function"==typeof(ct=function(){return{OWS_2_0:{n:"OWS_2_0",dens:"http://www.opengis.net/ows/2.0",dans:"http://www.w3.org/1999/xlink",deps:["XLink_1_0"],tis:[{ln:"GetResourceByIdType",ps:[{n:"resourceID",mno:0,col:!0,en:"ResourceID"},{n:"outputFormat",en:"OutputFormat"},{n:"service",rq:!0,an:{lp:"service"},t:"a"},{n:"version",rq:!0,an:{lp:"version"},t:"a"}]},{ln:"DCP",tn:null,ps:[{n:"http",rq:!0,en:"HTTP",ti:".HTTP"}]},{ln:"DomainMetadataType",ps:[{n:"value",t:"v"},{n:"reference",an:{lp:"reference",ns:"http://www.opengis.net/ows/2.0"},t:"a"}]},{ln:"SectionsType",ps:[{n:"section",mno:0,col:!0,en:"Section"}]},{ln:"CapabilitiesBaseType",ps:[{n:"serviceIdentification",en:"ServiceIdentification",ti:".ServiceIdentification"},{n:"serviceProvider",en:"ServiceProvider",ti:".ServiceProvider"},{n:"operationsMetadata",en:"OperationsMetadata",ti:".OperationsMetadata"},{n:"languages",en:"Languages",ti:".CapabilitiesBaseType.Languages"},{n:"version",rq:!0,an:{lp:"version"},t:"a"},{n:"updateSequence",an:{lp:"updateSequence"},t:"a"}]},{ln:"BasicIdentificationType",bti:".DescriptionType",ps:[{n:"identifier",en:"Identifier",ti:".CodeType"},{n:"metadata",mno:0,col:!0,mx:!1,dom:!1,en:"Metadata",ti:".MetadataType",t:"er"}]},{ln:"RangeType",ps:[{n:"minimumValue",en:"MinimumValue",ti:".ValueType"},{n:"maximumValue",en:"MaximumValue",ti:".ValueType"},{n:"spacing",en:"Spacing",ti:".ValueType"},{n:"rangeClosure",ti:{t:"l"},an:{lp:"rangeClosure",ns:"http://www.opengis.net/ows/2.0"},t:"a"}]},{ln:"ServiceProvider",tn:null,ps:[{n:"providerName",rq:!0,en:"ProviderName"},{n:"providerSite",en:"ProviderSite",ti:".OnlineResourceType"},{n:"serviceContact",rq:!0,en:"ServiceContact",ti:".ResponsiblePartySubsetType"}]},{ln:"AcceptFormatsType",ps:[{n:"outputFormat",mno:0,col:!0,en:"OutputFormat"}]},{ln:"MetadataType",ps:[{n:"abstractMetaData",mx:!1,dom:!1,en:"AbstractMetaData",ti:"AnyType",t:"er"},{n:"about",an:{lp:"about"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"ReferenceGroupType",bti:".BasicIdentificationType",ps:[{n:"abstractReferenceBase",rq:!0,col:!0,mx:!1,dom:!1,en:"AbstractReferenceBase",ti:".AbstractReferenceBaseType",t:"er"}]},{ln:"ValuesReference",tn:null,ps:[{n:"value",t:"v"},{n:"reference",rq:!0,an:{lp:"reference",ns:"http://www.opengis.net/ows/2.0"},t:"a"}]},{ln:"AdditionalParametersBaseType",bti:".MetadataType"},{ln:"ResponsiblePartySubsetType",ps:[{n:"individualName",en:"IndividualName"},{n:"positionName",en:"PositionName"},{n:"contactInfo",en:"ContactInfo",ti:".ContactType"},{n:"role",en:"Role",ti:".CodeType"}]},{ln:"NoValues",tn:null},{ln:"AnyValue",tn:null},{ln:"CodeType",ps:[{n:"value",t:"v"},{n:"codeSpace",an:{lp:"codeSpace"},t:"a"}]},{ln:"IdentificationType",bti:".BasicIdentificationType",ps:[{n:"boundingBox",mno:0,col:!0,mx:!1,dom:!1,en:"BoundingBox",ti:".BoundingBoxType",t:"er"},{n:"outputFormat",mno:0,col:!0,en:"OutputFormat"},{n:"availableCRS",mno:0,col:!0,mx:!1,dom:!1,en:"AvailableCRS",t:"er"}]},{ln:"UnNamedDomainType",ps:[{n:"allowedValues",rq:!0,en:"AllowedValues",ti:".AllowedValues"},{n:"anyValue",rq:!0,en:"AnyValue",ti:".AnyValue"},{n:"noValues",rq:!0,en:"NoValues",ti:".NoValues"},{n:"valuesReference",rq:!0,en:"ValuesReference",ti:".ValuesReference"},{n:"defaultValue",en:"DefaultValue",ti:".ValueType"},{n:"meaning",en:"Meaning",ti:".DomainMetadataType"},{n:"dataType",en:"DataType",ti:".DomainMetadataType"},{n:"uom",rq:!0,en:"UOM",ti:".DomainMetadataType"},{n:"referenceSystem",rq:!0,en:"ReferenceSystem",ti:".DomainMetadataType"},{n:"metadata",mno:0,col:!0,mx:!1,dom:!1,en:"Metadata",ti:".MetadataType",t:"er"}]},{ln:"ServiceReferenceType",bti:".ReferenceType",ps:[{n:"requestMessage",rq:!0,en:"RequestMessage",ti:"AnyType"},{n:"requestMessageReference",rq:!0,en:"RequestMessageReference"}]},{ln:"ReferenceType",bti:".AbstractReferenceBaseType",ps:[{n:"identifier",en:"Identifier",ti:".CodeType"},{n:"_abstract",mno:0,col:!0,en:"Abstract",ti:".LanguageStringType"},{n:"format",en:"Format"},{n:"metadata",mno:0,col:!0,mx:!1,dom:!1,en:"Metadata",ti:".MetadataType",t:"er"}]},{ln:"ManifestType",bti:".BasicIdentificationType",ps:[{n:"referenceGroup",rq:!0,col:!0,en:"ReferenceGroup",ti:".ReferenceGroupType"}]},{ln:"TelephoneType",ps:[{n:"voice",mno:0,col:!0,en:"Voice"},{n:"facsimile",mno:0,col:!0,en:"Facsimile"}]},{ln:"ContactType",ps:[{n:"phone",en:"Phone",ti:".TelephoneType"},{n:"address",en:"Address",ti:".AddressType"},{n:"onlineResource",en:"OnlineResource",ti:".OnlineResourceType"},{n:"hoursOfService",en:"HoursOfService"},{n:"contactInstructions",en:"ContactInstructions"}]},{ln:"ExceptionReport",tn:null,ps:[{n:"exception",rq:!0,col:!0,en:"Exception",ti:".ExceptionType"},{n:"version",rq:!0,an:{lp:"version"},t:"a"},{n:"lang",an:{lp:"lang",ns:"http://www.w3.org/XML/1998/namespace"},t:"a"}]},{ln:"OperationsMetadata",tn:null,ps:[{n:"operation",rq:!0,mno:2,col:!0,en:"Operation",ti:".Operation"},{n:"parameter",mno:0,col:!0,en:"Parameter",ti:".DomainType"},{n:"constraint",mno:0,col:!0,en:"Constraint",ti:".DomainType"},{n:"extendedCapabilities",en:"ExtendedCapabilities",ti:"AnyType"}]},{ln:"WGS84BoundingBoxType",bti:".BoundingBoxType"},{ln:"ValueType",ps:[{n:"value",t:"v"}]},{ln:"AddressType",ps:[{n:"deliveryPoint",mno:0,col:!0,en:"DeliveryPoint"},{n:"city",en:"City"},{n:"administrativeArea",en:"AdministrativeArea"},{n:"postalCode",en:"PostalCode"},{n:"country",en:"Country"},{n:"electronicMailAddress",mno:0,col:!0,en:"ElectronicMailAddress"}]},{ln:"GetCapabilitiesType",ps:[{n:"acceptVersions",en:"AcceptVersions",ti:".AcceptVersionsType"},{n:"sections",en:"Sections",ti:".SectionsType"},{n:"acceptFormats",en:"AcceptFormats",ti:".AcceptFormatsType"},{n:"acceptLanguages",en:"AcceptLanguages",ti:".GetCapabilitiesType.AcceptLanguages"},{n:"updateSequence",an:{lp:"updateSequence"},t:"a"}]},{ln:"AcceptVersionsType",ps:[{n:"version",rq:!0,col:!0,en:"Version"}]},{ln:"AdditionalParametersType",bti:".AdditionalParametersBaseType"},{ln:"NilValueType",bti:".CodeType",ps:[{n:"nilReason",an:{lp:"nilReason"},t:"a"}]},{ln:"ExceptionType",ps:[{n:"exceptionText",mno:0,col:!0,en:"ExceptionText"},{n:"exceptionCode",rq:!0,an:{lp:"exceptionCode"},t:"a"},{n:"locator",an:{lp:"locator"},t:"a"}]},{ln:"BoundingBoxType",ps:[{n:"lowerCorner",rq:!0,en:"LowerCorner",ti:{t:"l",bti:"Double"}},{n:"upperCorner",rq:!0,en:"UpperCorner",ti:{t:"l",bti:"Double"}},{n:"crs",an:{lp:"crs"},t:"a"},{n:"dimensions",ti:"PositiveInteger",an:{lp:"dimensions"},t:"a"}]},{ln:"DomainType",bti:".UnNamedDomainType",ps:[{n:"name",rq:!0,an:{lp:"name"},t:"a"}]},{ln:"KeywordsType",ps:[{n:"keyword",rq:!0,col:!0,en:"Keyword",ti:".LanguageStringType"},{n:"type",en:"Type",ti:".CodeType"}]},{ln:"DescriptionType",ps:[{n:"title",mno:0,col:!0,en:"Title",ti:".LanguageStringType"},{n:"_abstract",mno:0,col:!0,en:"Abstract",ti:".LanguageStringType"},{n:"keywords",mno:0,col:!0,en:"Keywords",ti:".KeywordsType"}]},{ln:"Operation",tn:null,ps:[{n:"dcp",rq:!0,col:!0,en:"DCP",ti:".DCP"},{n:"parameter",mno:0,col:!0,en:"Parameter",ti:".DomainType"},{n:"constraint",mno:0,col:!0,en:"Constraint",ti:".DomainType"},{n:"metadata",mno:0,col:!0,mx:!1,dom:!1,en:"Metadata",ti:".MetadataType",t:"er"},{n:"name",rq:!0,an:{lp:"name"},t:"a"}]},{ln:"ContentsBaseType",ps:[{n:"datasetDescriptionSummary",mno:0,col:!0,en:"DatasetDescriptionSummary",ti:".DatasetDescriptionSummaryBaseType"},{n:"otherSource",mno:0,col:!0,en:"OtherSource",ti:".MetadataType"}]},{ln:"ServiceIdentification",tn:null,bti:".DescriptionType",ps:[{n:"serviceType",rq:!0,en:"ServiceType",ti:".CodeType"},{n:"serviceTypeVersion",rq:!0,col:!0,en:"ServiceTypeVersion"},{n:"profile",mno:0,col:!0,en:"Profile"},{n:"fees",en:"Fees"},{n:"accessConstraints",mno:0,col:!0,en:"AccessConstraints"}]},{ln:"ResponsiblePartyType",ps:[{n:"individualName",en:"IndividualName"},{n:"organisationName",en:"OrganisationName"},{n:"positionName",en:"PositionName"},{n:"contactInfo",en:"ContactInfo",ti:".ContactType"},{n:"role",rq:!0,en:"Role",ti:".CodeType"}]},{ln:"DatasetDescriptionSummaryBaseType",bti:".DescriptionType",ps:[{n:"wgs84BoundingBox",mno:0,col:!0,en:"WGS84BoundingBox",ti:".WGS84BoundingBoxType"},{n:"identifier",rq:!0,en:"Identifier",ti:".CodeType"},{n:"boundingBox",mno:0,col:!0,mx:!1,dom:!1,en:"BoundingBox",ti:".BoundingBoxType",t:"er"},{n:"metadata",mno:0,col:!0,mx:!1,dom:!1,en:"Metadata",ti:".MetadataType",t:"er"},{n:"datasetDescriptionSummary",mno:0,col:!0,en:"DatasetDescriptionSummary",ti:".DatasetDescriptionSummaryBaseType"}]},{ln:"RequestMethodType",bti:".OnlineResourceType",ps:[{n:"constraint",mno:0,col:!0,en:"Constraint",ti:".DomainType"}]},{ln:"LanguageStringType",ps:[{n:"value",t:"v"},{n:"lang",an:{lp:"lang",ns:"http://www.w3.org/XML/1998/namespace"},t:"a"}]},{ln:"AllowedValues",tn:null,ps:[{n:"valueOrRange",rq:!0,col:!0,etis:[{en:"Value",ti:".ValueType"},{en:"Range",ti:".RangeType"}],t:"es"}]},{ln:"GetCapabilitiesType.AcceptLanguages",tn:null,ps:[{n:"language",rq:!0,col:!0,en:"Language",ti:"Language"}]},{ln:"OnlineResourceType",ps:[{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"CapabilitiesBaseType.Languages",tn:null,ps:[{n:"language",rq:!0,col:!0,en:"Language",ti:"Language"}]},{ln:"HTTP",tn:null,ps:[{n:"getOrPost",rq:!0,col:!0,mx:!1,dom:!1,etis:[{en:"Post",ti:".RequestMethodType"},{en:"Get",ti:".RequestMethodType"}],t:"ers"}]},{ln:"AbstractReferenceBaseType",ps:[{n:"type",an:{lp:"type",ns:"http://www.opengis.net/ows/2.0"},t:"a"},{n:"href",rq:!0,t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"AdditionalParameter",tn:null,ps:[{n:"name",rq:!0,en:"Name",ti:".CodeType"},{n:"value",rq:!0,col:!0,en:"Value",ti:"AnyType"}]}],eis:[{en:"Operation",ti:".Operation"},{en:"OtherSource",ti:".MetadataType"},{en:"AdditionalParameter",ti:".AdditionalParameter",sh:"AbstractMetaData"},{en:"AdditionalParameters",ti:".AdditionalParametersType",sh:"Metadata"},{en:"NoValues",ti:".NoValues"},{en:"ServiceReference",ti:".ServiceReferenceType",sh:"Reference"},{en:"MinimumValue",ti:".ValueType"},{en:"AbstractReferenceBase",ti:".AbstractReferenceBaseType"},{en:"Metadata",ti:".MetadataType"},{en:"GetResourceByID",ti:".GetResourceByIdType"},{en:"AbstractMetaData",ti:"AnyType"},{en:"Abstract",ti:".LanguageStringType"},{en:"OperationsMetadata",ti:".OperationsMetadata"},{en:"DatasetDescriptionSummary",ti:".DatasetDescriptionSummaryBaseType"},{en:"AvailableCRS"},{en:"GetCapabilities",ti:".GetCapabilitiesType"},{en:"OrganisationName"},{en:"ContactInfo",ti:".ContactType"},{en:"Manifest",ti:".ManifestType"},{en:"PointOfContact",ti:".ResponsiblePartyType"},{en:"DefaultValue",ti:".ValueType"},{en:"HTTP",ti:".HTTP"},{en:"Exception",ti:".ExceptionType"},{en:"ExtendedCapabilities",ti:"AnyType"},{en:"AnyValue",ti:".AnyValue"},{en:"Spacing",ti:".ValueType"},{en:"Resource",ti:"AnyType"},{en:"OperationResponse",ti:".ManifestType"},{en:"DataType",ti:".DomainMetadataType"},{en:"Identifier",ti:".CodeType"},{en:"nilValue",ti:".NilValueType"},{en:"Language",ti:"Language"},{en:"AllowedValues",ti:".AllowedValues"},{en:"Post",ti:".RequestMethodType",sc:".HTTP"},{en:"SupportedCRS",sh:"AvailableCRS"},{en:"Role",ti:".CodeType"},{en:"ReferenceGroup",ti:".ReferenceGroupType"},{en:"Meaning",ti:".DomainMetadataType"},{en:"Value",ti:".ValueType"},{en:"DCP",ti:".DCP"},{en:"Range",ti:".RangeType"},{en:"Fees"},{en:"InputData",ti:".ManifestType"},{en:"OutputFormat"},{en:"AccessConstraints"},{en:"ServiceProvider",ti:".ServiceProvider"},{en:"UOM",ti:".DomainMetadataType"},{en:"IndividualName"},{en:"Title",ti:".LanguageStringType"},{en:"MaximumValue",ti:".ValueType"},{en:"ValuesReference",ti:".ValuesReference"},{en:"ReferenceSystem",ti:".DomainMetadataType"},{en:"PositionName"},{en:"Keywords",ti:".KeywordsType"},{en:"WGS84BoundingBox",ti:".WGS84BoundingBoxType",sh:"BoundingBox"},{en:"BoundingBox",ti:".BoundingBoxType"},{en:"Reference",ti:".ReferenceType",sh:"AbstractReferenceBase"},{en:"ServiceIdentification",ti:".ServiceIdentification"},{en:"Get",ti:".RequestMethodType",sc:".HTTP"},{en:"ExceptionReport",ti:".ExceptionReport"}]}}})?ct.apply(Vn,[]):ct)&&(Un.exports=qe)},955:(Un,Vn)=>{var ct,qe;void 0!==(qe="function"==typeof(ct=function(){return{SMIL_2_0:{n:"SMIL_2_0",dens:"http://www.w3.org/2001/SMIL20/",deps:["SMIL_2_0_Language"],tis:[{ln:"AnimateMotionPrototype",tn:"animateMotionPrototype",ps:[{n:"origin",an:{lp:"origin"},t:"a"},{n:"from",an:{lp:"from"},t:"a"},{n:"by",an:{lp:"by"},t:"a"},{n:"values",an:{lp:"values"},t:"a"},{n:"to",an:{lp:"to"},t:"a"},{n:"additive",an:{lp:"additive"},t:"a"},{n:"accumulate",an:{lp:"accumulate"},t:"a"}]},{ln:"SetPrototype",tn:"setPrototype",ps:[{n:"attributeName",rq:!0,an:{lp:"attributeName"},t:"a"},{n:"attributeType",an:{lp:"attributeType"},t:"a"},{n:"to",an:{lp:"to"},t:"a"}]},{ln:"AnimateColorPrototype",tn:"animateColorPrototype",ps:[{n:"additive",an:{lp:"additive"},t:"a"},{n:"accumulate",an:{lp:"accumulate"},t:"a"},{n:"attributeName",rq:!0,an:{lp:"attributeName"},t:"a"},{n:"attributeType",an:{lp:"attributeType"},t:"a"},{n:"from",an:{lp:"from"},t:"a"},{n:"by",an:{lp:"by"},t:"a"},{n:"values",an:{lp:"values"},t:"a"},{n:"to",an:{lp:"to"},t:"a"}]},{ln:"AnimatePrototype",tn:"animatePrototype",ps:[{n:"additive",an:{lp:"additive"},t:"a"},{n:"accumulate",an:{lp:"accumulate"},t:"a"},{n:"from",an:{lp:"from"},t:"a"},{n:"by",an:{lp:"by"},t:"a"},{n:"values",an:{lp:"values"},t:"a"},{n:"to",an:{lp:"to"},t:"a"},{n:"attributeName",rq:!0,an:{lp:"attributeName"},t:"a"},{n:"attributeType",an:{lp:"attributeType"},t:"a"}]},{t:"enum",ln:"SyncBehaviorDefaultType",vs:["canSlip","locked","independent","inherit"]},{t:"enum",ln:"SyncBehaviorType",vs:["canSlip","locked","independent","default"]},{t:"enum",ln:"FillTimingAttrsType",vs:["remove","freeze","hold","auto","default","transition"]},{t:"enum",ln:"RestartDefaultType",vs:["never","always","whenNotActive","inherit"]},{t:"enum",ln:"FillDefaultType",vs:["remove","freeze","hold","auto","inherit","transition"]},{t:"enum",ln:"RestartTimingType",vs:["never","always","whenNotActive","default"]}],eis:[{en:"set",ti:"SMIL_2_0_Language.SetType",sh:{lp:"set",ns:"http://www.w3.org/2001/SMIL20/Language"}},{en:"animate",ti:"SMIL_2_0_Language.AnimateType",sh:{lp:"animate",ns:"http://www.w3.org/2001/SMIL20/Language"}},{en:"animateMotion",ti:"SMIL_2_0_Language.AnimateMotionType",sh:{lp:"animateMotion",ns:"http://www.w3.org/2001/SMIL20/Language"}},{en:"animateColor",ti:"SMIL_2_0_Language.AnimateColorType",sh:{lp:"animateColor",ns:"http://www.w3.org/2001/SMIL20/Language"}}]}}})?ct.apply(Vn,[]):ct)&&(Un.exports=qe)},535:(Un,Vn)=>{var ct,qe;void 0!==(qe="function"==typeof(ct=function(){return{SMIL_2_0_Language:{n:"SMIL_2_0_Language",dens:"http://www.w3.org/2001/SMIL20/Language",deps:["SMIL_2_0"],tis:[{ln:"AnimateColorType",tn:"animateColorType",bti:"SMIL_2_0.AnimateColorPrototype",ps:[{n:"otherAttributes",t:"aa"},{n:"any",mno:0,col:!0,mx:!1,t:"ae"},{n:"syncBehaviorDefault",an:{lp:"syncBehaviorDefault"},t:"a"},{n:"syncToleranceDefault",an:{lp:"syncToleranceDefault"},t:"a"},{n:"min",an:{lp:"min"},t:"a"},{n:"max",an:{lp:"max"},t:"a"},{n:"begin",an:{lp:"begin"},t:"a"},{n:"end",an:{lp:"end"},t:"a"},{n:"repeatDur",an:{lp:"repeatDur"},t:"a"},{n:"repeatCount",ti:"Decimal",an:{lp:"repeatCount"},t:"a"},{n:"dur",an:{lp:"dur"},t:"a"},{n:"repeat",ti:"NonNegativeInteger",an:{lp:"repeat"},t:"a"},{n:"fillDefault",an:{lp:"fillDefault"},t:"a"},{n:"restart",an:{lp:"restart"},t:"a"},{n:"restartDefault",an:{lp:"restartDefault"},t:"a"},{n:"syncBehavior",an:{lp:"syncBehavior"},t:"a"},{n:"syncTolerance",an:{lp:"syncTolerance"},t:"a"},{n:"fill",an:{lp:"fill"},t:"a"},{n:"skipContent",ti:"Boolean",an:{lp:"skip-content"},t:"a"},{n:"alt",an:{lp:"alt"},t:"a"},{n:"longdesc",an:{lp:"longdesc"},t:"a"},{n:"id",ti:"ID",an:{lp:"id"},t:"a"},{n:"clazz",an:{lp:"class"},t:"a"},{n:"lang",an:{lp:"lang",ns:"http://www.w3.org/XML/1998/namespace"},t:"a"},{n:"targetElement",ti:"IDREF",an:{lp:"targetElement"},t:"a"},{n:"calcMode",an:{lp:"calcMode"},t:"a"}]},{ln:"SetType",tn:"setType",bti:"SMIL_2_0.SetPrototype",ps:[{n:"otherAttributes",t:"aa"},{n:"any",mno:0,col:!0,mx:!1,t:"ae"},{n:"targetElement",ti:"IDREF",an:{lp:"targetElement"},t:"a"},{n:"skipContent",ti:"Boolean",an:{lp:"skip-content"},t:"a"},{n:"alt",an:{lp:"alt"},t:"a"},{n:"longdesc",an:{lp:"longdesc"},t:"a"},{n:"id",ti:"ID",an:{lp:"id"},t:"a"},{n:"clazz",an:{lp:"class"},t:"a"},{n:"lang",an:{lp:"lang",ns:"http://www.w3.org/XML/1998/namespace"},t:"a"},{n:"syncBehaviorDefault",an:{lp:"syncBehaviorDefault"},t:"a"},{n:"syncToleranceDefault",an:{lp:"syncToleranceDefault"},t:"a"},{n:"min",an:{lp:"min"},t:"a"},{n:"max",an:{lp:"max"},t:"a"},{n:"begin",an:{lp:"begin"},t:"a"},{n:"end",an:{lp:"end"},t:"a"},{n:"repeatDur",an:{lp:"repeatDur"},t:"a"},{n:"repeatCount",ti:"Decimal",an:{lp:"repeatCount"},t:"a"},{n:"dur",an:{lp:"dur"},t:"a"},{n:"repeat",ti:"NonNegativeInteger",an:{lp:"repeat"},t:"a"},{n:"fillDefault",an:{lp:"fillDefault"},t:"a"},{n:"restart",an:{lp:"restart"},t:"a"},{n:"restartDefault",an:{lp:"restartDefault"},t:"a"},{n:"syncBehavior",an:{lp:"syncBehavior"},t:"a"},{n:"syncTolerance",an:{lp:"syncTolerance"},t:"a"},{n:"fill",an:{lp:"fill"},t:"a"}]},{ln:"AnimateType",tn:"animateType",bti:"SMIL_2_0.AnimatePrototype",ps:[{n:"otherAttributes",t:"aa"},{n:"any",mno:0,col:!0,mx:!1,t:"ae"},{n:"skipContent",ti:"Boolean",an:{lp:"skip-content"},t:"a"},{n:"calcMode",an:{lp:"calcMode"},t:"a"},{n:"alt",an:{lp:"alt"},t:"a"},{n:"longdesc",an:{lp:"longdesc"},t:"a"},{n:"id",ti:"ID",an:{lp:"id"},t:"a"},{n:"clazz",an:{lp:"class"},t:"a"},{n:"lang",an:{lp:"lang",ns:"http://www.w3.org/XML/1998/namespace"},t:"a"},{n:"targetElement",ti:"IDREF",an:{lp:"targetElement"},t:"a"},{n:"syncBehaviorDefault",an:{lp:"syncBehaviorDefault"},t:"a"},{n:"syncToleranceDefault",an:{lp:"syncToleranceDefault"},t:"a"},{n:"min",an:{lp:"min"},t:"a"},{n:"max",an:{lp:"max"},t:"a"},{n:"begin",an:{lp:"begin"},t:"a"},{n:"end",an:{lp:"end"},t:"a"},{n:"repeatDur",an:{lp:"repeatDur"},t:"a"},{n:"repeatCount",ti:"Decimal",an:{lp:"repeatCount"},t:"a"},{n:"dur",an:{lp:"dur"},t:"a"},{n:"repeat",ti:"NonNegativeInteger",an:{lp:"repeat"},t:"a"},{n:"fillDefault",an:{lp:"fillDefault"},t:"a"},{n:"restart",an:{lp:"restart"},t:"a"},{n:"restartDefault",an:{lp:"restartDefault"},t:"a"},{n:"syncBehavior",an:{lp:"syncBehavior"},t:"a"},{n:"syncTolerance",an:{lp:"syncTolerance"},t:"a"},{n:"fill",an:{lp:"fill"},t:"a"}]},{ln:"AnimateMotionType",tn:"animateMotionType",bti:"SMIL_2_0.AnimateMotionPrototype",ps:[{n:"otherAttributes",t:"aa"},{n:"any",mno:0,col:!0,mx:!1,t:"ae"},{n:"targetElement",ti:"IDREF",an:{lp:"targetElement"},t:"a"},{n:"alt",an:{lp:"alt"},t:"a"},{n:"longdesc",an:{lp:"longdesc"},t:"a"},{n:"id",ti:"ID",an:{lp:"id"},t:"a"},{n:"clazz",an:{lp:"class"},t:"a"},{n:"lang",an:{lp:"lang",ns:"http://www.w3.org/XML/1998/namespace"},t:"a"},{n:"skipContent",ti:"Boolean",an:{lp:"skip-content"},t:"a"},{n:"calcMode",an:{lp:"calcMode"},t:"a"},{n:"syncBehaviorDefault",an:{lp:"syncBehaviorDefault"},t:"a"},{n:"syncToleranceDefault",an:{lp:"syncToleranceDefault"},t:"a"},{n:"min",an:{lp:"min"},t:"a"},{n:"max",an:{lp:"max"},t:"a"},{n:"begin",an:{lp:"begin"},t:"a"},{n:"end",an:{lp:"end"},t:"a"},{n:"repeatDur",an:{lp:"repeatDur"},t:"a"},{n:"repeatCount",ti:"Decimal",an:{lp:"repeatCount"},t:"a"},{n:"dur",an:{lp:"dur"},t:"a"},{n:"repeat",ti:"NonNegativeInteger",an:{lp:"repeat"},t:"a"},{n:"fillDefault",an:{lp:"fillDefault"},t:"a"},{n:"restart",an:{lp:"restart"},t:"a"},{n:"restartDefault",an:{lp:"restartDefault"},t:"a"},{n:"syncBehavior",an:{lp:"syncBehavior"},t:"a"},{n:"syncTolerance",an:{lp:"syncTolerance"},t:"a"},{n:"fill",an:{lp:"fill"},t:"a"}]}],eis:[{en:"animate",ti:".AnimateType"},{en:"animateMotion",ti:".AnimateMotionType"},{en:"animateColor",ti:".AnimateColorType"},{en:"set",ti:".SetType"}]}}})?ct.apply(Vn,[]):ct)&&(Un.exports=qe)},788:(Un,Vn)=>{var ct,qe;void 0!==(qe="function"==typeof(ct=function(){return{WMTS_1_0:{n:"WMTS_1_0",dens:"http://www.opengis.net/wmts/1.0",deps:["OWS_1_1_0","GML_3_1_1"],tis:[{ln:"GetCapabilities",tn:null,bti:"OWS_1_1_0.GetCapabilitiesType",ps:[{n:"service",rq:!0,an:{lp:"service"},t:"a"}]},{ln:"LegendURL",tn:null,bti:"OWS_1_1_0.OnlineResourceType",ps:[{n:"format",an:{lp:"format"},t:"a"},{n:"minScaleDenominator",ti:"Double",an:{lp:"minScaleDenominator"},t:"a"},{n:"maxScaleDenominator",ti:"Double",an:{lp:"maxScaleDenominator"},t:"a"},{n:"width",ti:"PositiveInteger",an:{lp:"width"},t:"a"},{n:"height",ti:"PositiveInteger",an:{lp:"height"},t:"a"}]},{ln:"Themes",tn:null,ps:[{n:"theme",mno:0,col:!0,en:"Theme",ti:".Theme"}]},{ln:"URLTemplateType",ps:[{n:"format",rq:!0,an:{lp:"format"},t:"a"},{n:"resourceType",rq:!0,an:{lp:"resourceType"},t:"a"},{n:"template",rq:!0,an:{lp:"template"},t:"a"}]},{ln:"Style",tn:null,bti:"OWS_1_1_0.DescriptionType",ps:[{n:"identifier",rq:!0,en:{lp:"Identifier",ns:"http://www.opengis.net/ows/1.1"},ti:"OWS_1_1_0.CodeType"},{n:"legendURL",mno:0,col:!0,en:"LegendURL",ti:".LegendURL"},{n:"isDefault",ti:"Boolean",an:{lp:"isDefault"},t:"a"}]},{ln:"TileMatrixSet",tn:null,bti:"OWS_1_1_0.DescriptionType",ps:[{n:"identifier",rq:!0,en:{lp:"Identifier",ns:"http://www.opengis.net/ows/1.1"},ti:"OWS_1_1_0.CodeType"},{n:"boundingBox",mx:!1,dom:!1,en:{lp:"BoundingBox",ns:"http://www.opengis.net/ows/1.1"},ti:"OWS_1_1_0.BoundingBoxType",t:"er"},{n:"supportedCRS",rq:!0,en:{lp:"SupportedCRS",ns:"http://www.opengis.net/ows/1.1"}},{n:"wellKnownScaleSet",en:"WellKnownScaleSet"},{n:"tileMatrix",rq:!0,col:!0,en:"TileMatrix",ti:".TileMatrix"}]},{ln:"FeatureInfoResponse",tn:null,ps:[{n:"featureCollection",rq:!0,en:{lp:"_FeatureCollection",ns:"http://www.opengis.net/gml"},ti:"GML_3_1_1.AbstractFeatureCollectionType"},{n:"textPayload",rq:!0,en:"TextPayload",ti:".TextPayload"},{n:"binaryPayload",rq:!0,en:"BinaryPayload",ti:".BinaryPayload"},{n:"anyContent",rq:!0,en:"AnyContent",ti:"AnyType"}]},{ln:"Dimension",tn:null,bti:"OWS_1_1_0.DescriptionType",ps:[{n:"identifier",rq:!0,en:{lp:"Identifier",ns:"http://www.opengis.net/ows/1.1"},ti:"OWS_1_1_0.CodeType"},{n:"uom",en:{lp:"UOM",ns:"http://www.opengis.net/ows/1.1"},ti:"OWS_1_1_0.DomainMetadataType"},{n:"unitSymbol",en:"UnitSymbol"},{n:"_default",en:"Default"},{n:"current",en:"Current",ti:"Boolean"},{n:"value",rq:!0,col:!0,en:"Value"}]},{ln:"TileMatrixSetLink",tn:null,ps:[{n:"tileMatrixSet",rq:!0,en:"TileMatrixSet"},{n:"tileMatrixSetLimits",en:"TileMatrixSetLimits",ti:".TileMatrixSetLimits"}]},{ln:"TileMatrixLimits",tn:null,ps:[{n:"tileMatrix",rq:!0,en:"TileMatrix"},{n:"minTileRow",rq:!0,en:"MinTileRow",ti:"PositiveInteger"},{n:"maxTileRow",rq:!0,en:"MaxTileRow",ti:"PositiveInteger"},{n:"minTileCol",rq:!0,en:"MinTileCol",ti:"PositiveInteger"},{n:"maxTileCol",rq:!0,en:"MaxTileCol",ti:"PositiveInteger"}]},{ln:"LayerType",bti:"OWS_1_1_0.DatasetDescriptionSummaryBaseType",ps:[{n:"style",rq:!0,col:!0,en:"Style",ti:".Style"},{n:"format",rq:!0,col:!0,en:"Format"},{n:"infoFormat",mno:0,col:!0,en:"InfoFormat"},{n:"dimension",mno:0,col:!0,en:"Dimension",ti:".Dimension"},{n:"tileMatrixSetLink",rq:!0,col:!0,en:"TileMatrixSetLink",ti:".TileMatrixSetLink"},{n:"resourceURL",mno:0,col:!0,en:"ResourceURL",ti:".URLTemplateType"}]},{ln:"TileMatrix",tn:null,bti:"OWS_1_1_0.DescriptionType",ps:[{n:"identifier",rq:!0,en:{lp:"Identifier",ns:"http://www.opengis.net/ows/1.1"},ti:"OWS_1_1_0.CodeType"},{n:"scaleDenominator",rq:!0,en:"ScaleDenominator",ti:"Double"},{n:"topLeftCorner",rq:!0,en:"TopLeftCorner",ti:{t:"l",bti:"Double"}},{n:"tileWidth",rq:!0,en:"TileWidth",ti:"PositiveInteger"},{n:"tileHeight",rq:!0,en:"TileHeight",ti:"PositiveInteger"},{n:"matrixWidth",rq:!0,en:"MatrixWidth",ti:"PositiveInteger"},{n:"matrixHeight",rq:!0,en:"MatrixHeight",ti:"PositiveInteger"}]},{ln:"GetFeatureInfo",tn:null,ps:[{n:"getTile",rq:!0,en:"GetTile",ti:".GetTile"},{n:"j",rq:!0,en:"J",ti:"NonNegativeInteger"},{n:"i",rq:!0,en:"I",ti:"NonNegativeInteger"},{n:"infoFormat",rq:!0,en:"InfoFormat"},{n:"service",rq:!0,an:{lp:"service"},t:"a"},{n:"version",rq:!0,an:{lp:"version"},t:"a"}]},{ln:"TextPayload",tn:null,ps:[{n:"format",rq:!0,en:"Format"},{n:"textContent",rq:!0,en:"TextContent"}]},{ln:"Capabilities",tn:null,bti:"OWS_1_1_0.CapabilitiesBaseType",ps:[{n:"contents",en:"Contents",ti:".ContentsType"},{n:"themes",mno:0,col:!0,en:"Themes",ti:".Themes"},{n:"wsdl",mno:0,col:!0,en:"WSDL",ti:"OWS_1_1_0.OnlineResourceType"},{n:"serviceMetadataURL",mno:0,col:!0,en:"ServiceMetadataURL",ti:"OWS_1_1_0.OnlineResourceType"}]},{ln:"BinaryPayload",tn:null,ps:[{n:"format",rq:!0,en:"Format"},{n:"binaryContent",rq:!0,en:"BinaryContent",ti:"Base64Binary"}]},{ln:"GetTile",tn:null,ps:[{n:"layer",rq:!0,en:"Layer"},{n:"style",rq:!0,en:"Style"},{n:"format",rq:!0,en:"Format"},{n:"dimensionNameValue",mno:0,col:!0,en:"DimensionNameValue",ti:".DimensionNameValue"},{n:"tileMatrixSet",rq:!0,en:"TileMatrixSet"},{n:"tileMatrix",rq:!0,en:"TileMatrix"},{n:"tileRow",rq:!0,en:"TileRow",ti:"NonNegativeInteger"},{n:"tileCol",rq:!0,en:"TileCol",ti:"NonNegativeInteger"},{n:"service",rq:!0,an:{lp:"service"},t:"a"},{n:"version",rq:!0,an:{lp:"version"},t:"a"}]},{ln:"DimensionNameValue",tn:null,ps:[{n:"value",t:"v"},{n:"name",rq:!0,an:{lp:"name"},t:"a"}]},{ln:"TileMatrixSetLimits",tn:null,ps:[{n:"tileMatrixLimits",rq:!0,col:!0,en:"TileMatrixLimits",ti:".TileMatrixLimits"}]},{ln:"ContentsType",bti:"OWS_1_1_0.ContentsBaseType",ps:[{n:"tileMatrixSet",mno:0,col:!0,en:"TileMatrixSet",ti:".TileMatrixSet"}]},{ln:"Theme",tn:null,bti:"OWS_1_1_0.DescriptionType",ps:[{n:"identifier",rq:!0,en:{lp:"Identifier",ns:"http://www.opengis.net/ows/1.1"},ti:"OWS_1_1_0.CodeType"},{n:"theme",mno:0,col:!0,en:"Theme",ti:".Theme"},{n:"layerRef",mno:0,col:!0,en:"LayerRef"}]},{t:"enum",ln:"RequestServiceType",vs:["WMTS"]},{t:"enum",ln:"GetTileValueType",vs:["GetTile"]},{t:"enum",ln:"GetCapabilitiesValueType",vs:["GetCapabilities"]},{t:"enum",ln:"GetFeatureInfoValueType",vs:["GetFeatureInfo"]},{t:"enum",ln:"VersionType",vs:["1.0.0"]}],eis:[{en:"TileMatrixSet",ti:".TileMatrixSet"},{en:"LegendURL",ti:".LegendURL"},{en:"Dimension",ti:".Dimension"},{en:"GetTile",ti:".GetTile"},{en:"TileMatrixSetLimits",ti:".TileMatrixSetLimits"},{en:"DimensionNameValue",ti:".DimensionNameValue"},{en:"Layer",ti:".LayerType",sh:{lp:"DatasetDescriptionSummary",ns:"http://www.opengis.net/ows/1.1"}},{en:"Style",ti:".Style"},{en:"GetFeatureInfo",ti:".GetFeatureInfo"},{en:"TileMatrixLimits",ti:".TileMatrixLimits"},{en:"GetCapabilities",ti:".GetCapabilities"},{en:"TileMatrix",ti:".TileMatrix"},{en:"TileMatrixSetLink",ti:".TileMatrixSetLink"},{en:"Theme",ti:".Theme"},{en:"FeatureInfoResponse",ti:".FeatureInfoResponse"},{en:"BinaryPayload",ti:".BinaryPayload"},{en:"TextPayload",ti:".TextPayload"},{en:"Capabilities",ti:".Capabilities"},{en:"Themes",ti:".Themes"}]}}})?ct.apply(Vn,[]):ct)&&(Un.exports=qe)},10:(Un,Vn)=>{var ct,qe;void 0!==(qe="function"==typeof(ct=function(){return{WPS_1_0_0:{n:"WPS_1_0_0",dens:"http://www.opengis.net/wps/1.0.0",deps:["OWS_1_1_0"],tis:[{ln:"LiteralInputType",bti:".LiteralOutputType",ps:[{n:"allowedValues",rq:!0,en:{lp:"AllowedValues",ns:"http://www.opengis.net/ows/1.1"},ti:"OWS_1_1_0.AllowedValues"},{n:"anyValue",rq:!0,en:{lp:"AnyValue",ns:"http://www.opengis.net/ows/1.1"},ti:"OWS_1_1_0.AnyValue"},{n:"valuesReference",rq:!0,en:{lp:"ValuesReference"},ti:".ValuesReferenceType"},{n:"defaultValue",en:{lp:"DefaultValue"}}]},{ln:"OutputReferenceType",ps:[{n:"href",rq:!0,an:{lp:"href"},t:"a"},{n:"mimeType",an:{lp:"mimeType"},t:"a"},{n:"encoding",an:{lp:"encoding"},t:"a"},{n:"schema",an:{lp:"schema"},t:"a"}]},{ln:"ResponseFormType",ps:[{n:"responseDocument",rq:!0,en:"ResponseDocument",ti:".ResponseDocumentType"},{n:"rawDataOutput",rq:!0,en:"RawDataOutput",ti:".OutputDefinitionType"}]},{ln:"DataType",ps:[{n:"complexData",rq:!0,en:"ComplexData",ti:".ComplexDataType"},{n:"literalData",rq:!0,en:"LiteralData",ti:".LiteralDataType"},{n:"boundingBoxData",rq:!0,en:"BoundingBoxData",ti:"OWS_1_1_0.BoundingBoxType"}]},{ln:"ComplexDataCombinationsType",ps:[{n:"format",rq:!0,col:!0,en:{lp:"Format"},ti:".ComplexDataDescriptionType"}]},{ln:"ResponseDocumentType",ps:[{n:"output",rq:!0,col:!0,en:"Output",ti:".DocumentOutputDefinitionType"},{n:"storeExecuteResponse",ti:"Boolean",an:{lp:"storeExecuteResponse"},t:"a"},{n:"lineage",ti:"Boolean",an:{lp:"lineage"},t:"a"},{n:"status",ti:"Boolean",an:{lp:"status"},t:"a"}]},{ln:"ProcessDescriptionType.ProcessOutputs",tn:null,ps:[{n:"output",rq:!0,col:!0,en:{lp:"Output"},ti:".OutputDescriptionType"}]},{ln:"InputReferenceType.Header",tn:null,ps:[{n:"key",rq:!0,an:{lp:"key"},t:"a"},{n:"value",rq:!0,an:{lp:"value"},t:"a"}]},{ln:"ProcessOfferings",tn:null,ps:[{n:"process",rq:!0,col:!0,en:"Process",ti:".ProcessBriefType"}]},{ln:"SupportedComplexDataInputType",bti:".SupportedComplexDataType",ps:[{n:"maximumMegabytes",ti:"Integer",an:{lp:"maximumMegabytes"},t:"a"}]},{ln:"SupportedComplexDataType",ps:[{n:"_default",rq:!0,en:{lp:"Default"},ti:".ComplexDataCombinationType"},{n:"supported",rq:!0,en:{lp:"Supported"},ti:".ComplexDataCombinationsType"}]},{ln:"ValuesReferenceType",ps:[{n:"reference",an:{lp:"reference",ns:"http://www.opengis.net/ows/1.1"},t:"a"},{n:"valuesForm",an:{lp:"valuesForm"},t:"a"}]},{ln:"ComplexDataType",ps:[{n:"otherAttributes",t:"aa"},{n:"content",col:!0,t:"ae"},{n:"mimeType",an:{lp:"mimeType"},t:"a"},{n:"encoding",an:{lp:"encoding"},t:"a"},{n:"schema",an:{lp:"schema"},t:"a"}]},{ln:"ProcessBriefType",bti:".DescriptionType",ps:[{n:"profile",mno:0,col:!0,en:"Profile"},{n:"wsdl",en:"WSDL",ti:".WSDL"},{n:"processVersion",rq:!0,an:{lp:"processVersion",ns:"http://www.opengis.net/wps/1.0.0"},t:"a"}]},{ln:"Languages",tn:null,ps:[{n:"_default",rq:!0,en:"Default",ti:".Languages.Default"},{n:"supported",rq:!0,en:"Supported",ti:".LanguagesType"}]},{ln:"ExecuteResponse.ProcessOutputs",tn:null,ps:[{n:"output",rq:!0,col:!0,en:"Output",ti:".OutputDataType"}]},{ln:"DescriptionType",ps:[{n:"identifier",rq:!0,en:{lp:"Identifier",ns:"http://www.opengis.net/ows/1.1"},ti:"OWS_1_1_0.CodeType"},{n:"title",rq:!0,en:{lp:"Title",ns:"http://www.opengis.net/ows/1.1"},ti:"OWS_1_1_0.LanguageStringType"},{n:"_abstract",en:{lp:"Abstract",ns:"http://www.opengis.net/ows/1.1"},ti:"OWS_1_1_0.LanguageStringType"},{n:"metadata",mno:0,col:!0,en:{lp:"Metadata",ns:"http://www.opengis.net/ows/1.1"},ti:"OWS_1_1_0.MetadataType"}]},{ln:"WPSCapabilitiesType",bti:"OWS_1_1_0.CapabilitiesBaseType",ps:[{n:"processOfferings",rq:!0,en:"ProcessOfferings",ti:".ProcessOfferings"},{n:"languages",rq:!0,en:"Languages",ti:".Languages"},{n:"wsdl",en:"WSDL",ti:".WSDL"},{n:"service",rq:!0,ti:"AnySimpleType",an:{lp:"service"},t:"a"},{n:"lang",rq:!0,an:{lp:"lang",ns:"http://www.w3.org/XML/1998/namespace"},t:"a"}]},{ln:"ProcessStartedType",ps:[{n:"value",t:"v"},{n:"percentCompleted",ti:"Int",an:{lp:"percentCompleted"},t:"a"}]},{ln:"DescribeProcess",tn:null,bti:".RequestBaseType",ps:[{n:"identifier",rq:!0,col:!0,en:{lp:"Identifier",ns:"http://www.opengis.net/ows/1.1"},ti:"OWS_1_1_0.CodeType"}]},{ln:"OutputDescriptionType",bti:".DescriptionType",ps:[{n:"complexOutput",rq:!0,en:{lp:"ComplexOutput"},ti:".SupportedComplexDataType"},{n:"literalOutput",rq:!0,en:{lp:"LiteralOutput"},ti:".LiteralOutputType"},{n:"boundingBoxOutput",rq:!0,en:{lp:"BoundingBoxOutput"},ti:".SupportedCRSsType"}]},{ln:"ProcessDescriptions",tn:null,bti:".ResponseBaseType",ps:[{n:"processDescription",rq:!0,col:!0,en:{lp:"ProcessDescription"},ti:".ProcessDescriptionType"}]},{ln:"InputDescriptionType",bti:".DescriptionType",ps:[{n:"complexData",rq:!0,en:{lp:"ComplexData"},ti:".SupportedComplexDataInputType"},{n:"literalData",rq:!0,en:{lp:"LiteralData"},ti:".LiteralInputType"},{n:"boundingBoxData",rq:!0,en:{lp:"BoundingBoxData"},ti:".SupportedCRSsType"},{n:"minOccurs",rq:!0,ti:"NonNegativeInteger",an:{lp:"minOccurs"},t:"a"},{n:"maxOccurs",rq:!0,ti:"PositiveInteger",an:{lp:"maxOccurs"},t:"a"}]},{ln:"RequestBaseType",ps:[{n:"service",rq:!0,an:{lp:"service"},t:"a"},{n:"version",rq:!0,an:{lp:"version"},t:"a"},{n:"language",an:{lp:"language"},t:"a"}]},{ln:"InputReferenceType",ps:[{n:"header",mno:0,col:!0,en:"Header",ti:".InputReferenceType.Header"},{n:"body",rq:!0,en:"Body",ti:"AnyType"},{n:"bodyReference",rq:!0,en:"BodyReference",ti:".InputReferenceType.BodyReference"},{n:"href",rq:!0,an:{lp:"href",ns:"http://www.w3.org/1999/xlink"},t:"a"},{n:"method",an:{lp:"method"},t:"a"},{n:"mimeType",an:{lp:"mimeType"},t:"a"},{n:"encoding",an:{lp:"encoding"},t:"a"},{n:"schema",an:{lp:"schema"},t:"a"}]},{ln:"LiteralOutputType",ps:[{n:"dataType",en:{lp:"DataType",ns:"http://www.opengis.net/ows/1.1"},ti:"OWS_1_1_0.DomainMetadataType"},{n:"uoMs",en:{lp:"UOMs"},ti:".SupportedUOMsType"}]},{ln:"ProcessDescriptionType",bti:".ProcessBriefType",ps:[{n:"dataInputs",en:{lp:"DataInputs"},ti:".ProcessDescriptionType.DataInputs"},{n:"processOutputs",rq:!0,en:{lp:"ProcessOutputs"},ti:".ProcessDescriptionType.ProcessOutputs"},{n:"storeSupported",ti:"Boolean",an:{lp:"storeSupported"},t:"a"},{n:"statusSupported",ti:"Boolean",an:{lp:"statusSupported"},t:"a"}]},{ln:"StatusType",ps:[{n:"processAccepted",rq:!0,en:"ProcessAccepted"},{n:"processStarted",rq:!0,en:"ProcessStarted",ti:".ProcessStartedType"},{n:"processPaused",rq:!0,en:"ProcessPaused",ti:".ProcessStartedType"},{n:"processSucceeded",rq:!0,en:"ProcessSucceeded"},{n:"processFailed",rq:!0,en:"ProcessFailed",ti:".ProcessFailedType"},{n:"creationTime",rq:!0,ti:"DateTime",an:{lp:"creationTime"},t:"a"}]},{ln:"UOMsType",ps:[{n:"uom",rq:!0,col:!0,en:{lp:"UOM",ns:"http://www.opengis.net/ows/1.1"},ti:"OWS_1_1_0.DomainMetadataType"}]},{ln:"ComplexDataCombinationType",ps:[{n:"format",rq:!0,en:{lp:"Format"},ti:".ComplexDataDescriptionType"}]},{ln:"CRSsType",ps:[{n:"crs",rq:!0,col:!0,en:{lp:"CRS"}}]},{ln:"LiteralDataType",ps:[{n:"value",t:"v"},{n:"dataType",an:{lp:"dataType"},t:"a"},{n:"uom",an:{lp:"uom"},t:"a"}]},{ln:"Execute",tn:null,bti:".RequestBaseType",ps:[{n:"identifier",rq:!0,en:{lp:"Identifier",ns:"http://www.opengis.net/ows/1.1"},ti:"OWS_1_1_0.CodeType"},{n:"dataInputs",en:"DataInputs",ti:".DataInputsType"},{n:"responseForm",en:"ResponseForm",ti:".ResponseFormType"}]},{ln:"ComplexDataDescriptionType",ps:[{n:"mimeType",rq:!0,en:{lp:"MimeType"}},{n:"encoding",en:{lp:"Encoding"}},{n:"schema",en:{lp:"Schema"}}]},{ln:"SupportedCRSsType.Default",tn:null,ps:[{n:"crs",rq:!0,en:{lp:"CRS"}}]},{ln:"ExecuteResponse",tn:null,bti:".ResponseBaseType",ps:[{n:"process",rq:!0,en:"Process",ti:".ProcessBriefType"},{n:"status",rq:!0,en:"Status",ti:".StatusType"},{n:"dataInputs",en:"DataInputs",ti:".DataInputsType"},{n:"outputDefinitions",en:"OutputDefinitions",ti:".OutputDefinitionsType"},{n:"processOutputs",en:"ProcessOutputs",ti:".ExecuteResponse.ProcessOutputs"},{n:"serviceInstance",rq:!0,an:{lp:"serviceInstance"},t:"a"},{n:"statusLocation",an:{lp:"statusLocation"},t:"a"}]},{ln:"SupportedUOMsType.Default",tn:null,ps:[{n:"uom",rq:!0,en:{lp:"UOM",ns:"http://www.opengis.net/ows/1.1"},ti:"OWS_1_1_0.DomainMetadataType"}]},{ln:"ProcessFailedType",ps:[{n:"exceptionReport",rq:!0,en:{lp:"ExceptionReport",ns:"http://www.opengis.net/ows/1.1"},ti:"OWS_1_1_0.ExceptionReport"}]},{ln:"LanguagesType",ps:[{n:"language",rq:!0,col:!0,en:{lp:"Language",ns:"http://www.opengis.net/ows/1.1"},ti:"Language"}]},{ln:"OutputDefinitionsType",ps:[{n:"output",rq:!0,col:!0,en:"Output",ti:".DocumentOutputDefinitionType"}]},{ln:"WSDL",tn:null,ps:[{n:"href",rq:!0,an:{lp:"href",ns:"http://www.w3.org/1999/xlink"},t:"a"}]},{ln:"SupportedUOMsType",ps:[{n:"_default",rq:!0,en:{lp:"Default"},ti:".SupportedUOMsType.Default"},{n:"supported",rq:!0,en:{lp:"Supported"},ti:".UOMsType"}]},{ln:"InputReferenceType.BodyReference",tn:null,ps:[{n:"href",rq:!0,an:{lp:"href",ns:"http://www.w3.org/1999/xlink"},t:"a"}]},{ln:"DataInputsType",ps:[{n:"input",rq:!0,col:!0,en:"Input",ti:".InputType"}]},{ln:"SupportedCRSsType",ps:[{n:"_default",rq:!0,en:{lp:"Default"},ti:".SupportedCRSsType.Default"},{n:"supported",rq:!0,en:{lp:"Supported"},ti:".CRSsType"}]},{ln:"Languages.Default",tn:null,ps:[{n:"language",rq:!0,en:{lp:"Language",ns:"http://www.opengis.net/ows/1.1"},ti:"Language"}]},{ln:"DocumentOutputDefinitionType",bti:".OutputDefinitionType",ps:[{n:"title",en:{lp:"Title",ns:"http://www.opengis.net/ows/1.1"},ti:"OWS_1_1_0.LanguageStringType"},{n:"_abstract",en:{lp:"Abstract",ns:"http://www.opengis.net/ows/1.1"},ti:"OWS_1_1_0.LanguageStringType"},{n:"asReference",ti:"Boolean",an:{lp:"asReference"},t:"a"}]},{ln:"ProcessDescriptionType.DataInputs",tn:null,ps:[{n:"input",rq:!0,col:!0,en:{lp:"Input"},ti:".InputDescriptionType"}]},{ln:"OutputDefinitionType",ps:[{n:"identifier",rq:!0,en:{lp:"Identifier",ns:"http://www.opengis.net/ows/1.1"},ti:"OWS_1_1_0.CodeType"},{n:"uom",an:{lp:"uom"},t:"a"},{n:"mimeType",an:{lp:"mimeType"},t:"a"},{n:"encoding",an:{lp:"encoding"},t:"a"},{n:"schema",an:{lp:"schema"},t:"a"}]},{ln:"OutputDataType",bti:".DescriptionType",ps:[{n:"reference",rq:!0,en:"Reference",ti:".OutputReferenceType"},{n:"data",rq:!0,en:"Data",ti:".DataType"}]},{ln:"InputType",ps:[{n:"identifier",rq:!0,en:{lp:"Identifier",ns:"http://www.opengis.net/ows/1.1"},ti:"OWS_1_1_0.CodeType"},{n:"title",en:{lp:"Title",ns:"http://www.opengis.net/ows/1.1"},ti:"OWS_1_1_0.LanguageStringType"},{n:"_abstract",en:{lp:"Abstract",ns:"http://www.opengis.net/ows/1.1"},ti:"OWS_1_1_0.LanguageStringType"},{n:"reference",rq:!0,en:"Reference",ti:".InputReferenceType"},{n:"data",rq:!0,en:"Data",ti:".DataType"}]},{ln:"ResponseBaseType",ps:[{n:"service",rq:!0,an:{lp:"service"},t:"a"},{n:"version",rq:!0,an:{lp:"version"},t:"a"},{n:"lang",rq:!0,an:{lp:"lang",ns:"http://www.w3.org/XML/1998/namespace"},t:"a"}]},{ln:"GetCapabilities",tn:null,ps:[{n:"acceptVersions",en:"AcceptVersions",ti:"OWS_1_1_0.AcceptVersionsType"},{n:"service",rq:!0,an:{lp:"service"},t:"a"},{n:"language",an:{lp:"language"},t:"a"}]}],eis:[{en:"ExecuteResponse",ti:".ExecuteResponse"},{en:"WSDL",ti:".WSDL"},{en:"Languages",ti:".Languages"},{en:"Capabilities",ti:".WPSCapabilitiesType"},{en:"GetCapabilities",ti:".GetCapabilities"},{en:"ProcessDescriptions",ti:".ProcessDescriptions"},{en:"Execute",ti:".Execute"},{en:"ProcessOfferings",ti:".ProcessOfferings"},{en:"DescribeProcess",ti:".DescribeProcess"}]}}})?ct.apply(Vn,[]):ct)&&(Un.exports=qe)},731:(Un,Vn)=>{var ct,qe;void 0!==(qe="function"==typeof(ct=function(){return{WPS_2_0:{n:"WPS_2_0",dens:"http://www.opengis.net/wps/2.0",deps:["OWS_2_0"],tis:[{ln:"OutputDescriptionType",bti:".DescriptionType",ps:[{n:"dataDescription",rq:!0,mx:!1,dom:!1,en:"DataDescription",ti:".DataDescriptionType",t:"er"},{n:"output",rq:!0,col:!0,en:"Output",ti:".OutputDescriptionType"}]},{ln:"DataOutputType",ps:[{n:"data",rq:!0,en:"Data",ti:".Data"},{n:"reference",rq:!0,en:"Reference",ti:".ReferenceType"},{n:"output",rq:!0,en:"Output",ti:".DataOutputType"},{n:"id",rq:!0,an:{lp:"id"},t:"a"}]},{ln:"WPSCapabilitiesType.Extension",tn:null,ps:[{n:"any",mno:0,col:!0,mx:!1,t:"ae"}]},{ln:"Dismiss",tn:null,bti:".RequestBaseType",ps:[{n:"jobID",rq:!0,en:"JobID"}]},{ln:"LiteralDataType",bti:".DataDescriptionType",ps:[{n:"literalDataDomain",rq:!0,col:!0,en:{lp:"LiteralDataDomain"},ti:".LiteralDataType.LiteralDataDomain"}]},{ln:"GetCapabilitiesType",bti:"OWS_2_0.GetCapabilitiesType",ps:[{n:"service",rq:!0,an:{lp:"service"},t:"a"}]},{ln:"Contents",tn:null,ps:[{n:"processSummary",rq:!0,col:!0,en:"ProcessSummary",ti:".ProcessSummaryType"}]},{ln:"DataInputType",ps:[{n:"data",rq:!0,en:"Data",ti:".Data"},{n:"reference",rq:!0,en:"Reference",ti:".ReferenceType"},{n:"input",rq:!0,col:!0,en:"Input",ti:".DataInputType"},{n:"id",rq:!0,an:{lp:"id"},t:"a"}]},{ln:"GetResult",tn:null,bti:".RequestBaseType",ps:[{n:"jobID",rq:!0,en:"JobID"}]},{ln:"SupportedCRS",tn:null,ps:[{n:"value",t:"v"},{n:"_default",ti:"Boolean",an:{lp:"default"},t:"a"}]},{ln:"LiteralDataDomainType",ps:[{n:"allowedValues",rq:!0,en:{lp:"AllowedValues",ns:"http://www.opengis.net/ows/2.0"},ti:"OWS_2_0.AllowedValues"},{n:"anyValue",rq:!0,en:{lp:"AnyValue",ns:"http://www.opengis.net/ows/2.0"},ti:"OWS_2_0.AnyValue"},{n:"valuesReference",rq:!0,en:{lp:"ValuesReference",ns:"http://www.opengis.net/ows/2.0"},ti:"OWS_2_0.ValuesReference"},{n:"dataType",en:{lp:"DataType",ns:"http://www.opengis.net/ows/2.0"},ti:"OWS_2_0.DomainMetadataType"},{n:"uom",en:{lp:"UOM",ns:"http://www.opengis.net/ows/2.0"},ti:"OWS_2_0.DomainMetadataType"},{n:"defaultValue",en:{lp:"DefaultValue",ns:"http://www.opengis.net/ows/2.0"},ti:"OWS_2_0.ValueType"}]},{ln:"DataDescriptionType",ps:[{n:"format",rq:!0,col:!0,en:"Format",ti:".Format"}]},{ln:"StatusInfo",tn:null,ps:[{n:"jobID",rq:!0,en:"JobID"},{n:"status",rq:!0,en:"Status"},{n:"expirationDate",en:"ExpirationDate",ti:"DateTime"},{n:"estimatedCompletion",en:"EstimatedCompletion",ti:"DateTime"},{n:"nextPoll",en:"NextPoll",ti:"DateTime"},{n:"percentCompleted",en:"PercentCompleted",ti:"Int"}]},{ln:"OutputDefinitionType",ps:[{n:"output",en:"Output",ti:".OutputDefinitionType"},{n:"id",rq:!0,an:{lp:"id"},t:"a"},{n:"transmission",an:{lp:"transmission"},t:"a"},{n:"mimeType",an:{lp:"mimeType"},t:"a"},{n:"encoding",an:{lp:"encoding"},t:"a"},{n:"schema",an:{lp:"schema"},t:"a"}]},{ln:"LiteralValue",tn:null,bti:"OWS_2_0.ValueType",ps:[{n:"dataType",an:{lp:"dataType"},t:"a"},{n:"uom",an:{lp:"uom"},t:"a"}]},{ln:"RequestBaseType",ps:[{n:"extension",mno:0,col:!0,en:"Extension",ti:"AnyType"},{n:"service",rq:!0,an:{lp:"service"},t:"a"},{n:"version",rq:!0,an:{lp:"version"},t:"a"}]},{ln:"LiteralDataType.LiteralDataDomain",tn:null,bti:".LiteralDataDomainType",ps:[{n:"_default",ti:"Boolean",an:{lp:"default"},t:"a"}]},{ln:"DescribeProcess",tn:null,bti:".RequestBaseType",ps:[{n:"identifier",rq:!0,col:!0,en:{lp:"Identifier",ns:"http://www.opengis.net/ows/2.0"},ti:"OWS_2_0.CodeType"},{n:"lang",an:{lp:"lang",ns:"http://www.w3.org/XML/1998/namespace"},t:"a"}]},{ln:"Result",tn:null,ps:[{n:"jobID",en:"JobID"},{n:"expirationDate",en:"ExpirationDate",ti:"DateTime"},{n:"output",rq:!0,col:!0,en:"Output",ti:".DataOutputType"}]},{ln:"GenericInputType",bti:".DescriptionType",ps:[{n:"input",mno:0,col:!0,en:"Input",ti:".GenericInputType"},{n:"minOccurs",ti:"NonNegativeInteger",an:{lp:"minOccurs"},t:"a"},{n:"maxOccurs",an:{lp:"maxOccurs"},t:"a"}]},{ln:"Data",tn:null,ps:[{n:"otherAttributes",t:"aa"},{n:"content",col:!0,t:"ae"},{n:"mimeType",an:{lp:"mimeType"},t:"a"},{n:"encoding",an:{lp:"encoding"},t:"a"},{n:"schema",an:{lp:"schema"},t:"a"}]},{ln:"Format",tn:null,ps:[{n:"mimeType",an:{lp:"mimeType"},t:"a"},{n:"encoding",an:{lp:"encoding"},t:"a"},{n:"schema",an:{lp:"schema"},t:"a"},{n:"maximumMegabytes",ti:"PositiveInteger",an:{lp:"maximumMegabytes"},t:"a"},{n:"_default",ti:"Boolean",an:{lp:"default"},t:"a"}]},{ln:"BoundingBoxData",tn:null,bti:".DataDescriptionType",ps:[{n:"supportedCRS",rq:!0,col:!0,en:"SupportedCRS",ti:".SupportedCRS"}]},{ln:"ProcessDescriptionType",bti:".DescriptionType",ps:[{n:"input",mno:0,col:!0,en:"Input",ti:".InputDescriptionType"},{n:"output",rq:!0,col:!0,en:"Output",ti:".OutputDescriptionType"},{n:"lang",an:{lp:"lang",ns:"http://www.w3.org/XML/1998/namespace"},t:"a"}]},{ln:"InputDescriptionType",bti:".DescriptionType",ps:[{n:"dataDescription",rq:!0,mx:!1,dom:!1,en:"DataDescription",ti:".DataDescriptionType",t:"er"},{n:"input",rq:!0,col:!0,en:"Input",ti:".InputDescriptionType"},{n:"minOccurs",ti:"NonNegativeInteger",an:{lp:"minOccurs"},t:"a"},{n:"maxOccurs",an:{lp:"maxOccurs"},t:"a"}]},{ln:"ProcessSummaryType",bti:".DescriptionType",ps:[{n:"jobControlOptions",rq:!0,ti:{t:"l"},an:{lp:"jobControlOptions"},t:"a"},{n:"outputTransmission",ti:{t:"l"},an:{lp:"outputTransmission"},t:"a"},{n:"processVersion",an:{lp:"processVersion"},t:"a"},{n:"processModel",an:{lp:"processModel"},t:"a"}]},{ln:"ReferenceType.BodyReference",tn:null,ps:[{n:"href",rq:!0,an:{lp:"href",ns:"http://www.w3.org/1999/xlink"},t:"a"}]},{ln:"ProcessOfferings",tn:null,ps:[{n:"processOffering",rq:!0,col:!0,en:"ProcessOffering",ti:".ProcessOffering"}]},{ln:"GenericOutputType",bti:".DescriptionType",ps:[{n:"output",mno:0,col:!0,en:"Output",ti:".GenericOutputType"}]},{ln:"ComplexDataType",bti:".DataDescriptionType",ps:[{n:"any",mno:0,col:!0,mx:!1,t:"ae"}]},{ln:"GenericProcessType",bti:".DescriptionType",ps:[{n:"input",mno:0,col:!0,en:"Input",ti:".GenericInputType"},{n:"output",rq:!0,col:!0,en:"Output",ti:".GenericOutputType"}]},{ln:"ReferenceType",ps:[{n:"body",rq:!0,en:"Body",ti:"AnyType"},{n:"bodyReference",rq:!0,en:"BodyReference",ti:".ReferenceType.BodyReference"},{n:"href",rq:!0,an:{lp:"href",ns:"http://www.w3.org/1999/xlink"},t:"a"},{n:"mimeType",an:{lp:"mimeType"},t:"a"},{n:"encoding",an:{lp:"encoding"},t:"a"},{n:"schema",an:{lp:"schema"},t:"a"}]},{ln:"GetStatus",tn:null,bti:".RequestBaseType",ps:[{n:"jobID",rq:!0,en:"JobID"}]},{ln:"ProcessOffering",tn:null,ps:[{n:"process",rq:!0,en:"Process",ti:".ProcessDescriptionType"},{n:"any",rq:!0,mx:!1,t:"ae"},{n:"jobControlOptions",rq:!0,ti:{t:"l"},an:{lp:"jobControlOptions"},t:"a"},{n:"outputTransmission",ti:{t:"l"},an:{lp:"outputTransmission"},t:"a"},{n:"processVersion",an:{lp:"processVersion"},t:"a"},{n:"processModel",an:{lp:"processModel"},t:"a"}]},{ln:"DescriptionType",bti:"OWS_2_0.BasicIdentificationType"},{ln:"ExecuteRequestType",bti:".RequestBaseType",ps:[{n:"identifier",rq:!0,en:{lp:"Identifier",ns:"http://www.opengis.net/ows/2.0"},ti:"OWS_2_0.CodeType"},{n:"input",mno:0,col:!0,en:"Input",ti:".DataInputType"},{n:"output",rq:!0,col:!0,en:"Output",ti:".OutputDefinitionType"},{n:"mode",rq:!0,an:{lp:"mode"},t:"a"},{n:"response",rq:!0,an:{lp:"response"},t:"a"}]},{ln:"WPSCapabilitiesType",bti:"OWS_2_0.CapabilitiesBaseType",ps:[{n:"contents",rq:!0,en:"Contents",ti:".Contents"},{n:"extension",en:"Extension",ti:".WPSCapabilitiesType.Extension"},{n:"service",rq:!0,ti:"AnySimpleType",an:{lp:"service"},t:"a"}]},{t:"enum",ln:"DataTransmissionModeType",vs:["value","reference"]}],eis:[{en:"BoundingBoxData",ti:".BoundingBoxData",sh:"DataDescription"},{en:"DataDescription",ti:".DataDescriptionType"},{en:"SupportedCRS",ti:".SupportedCRS"},{en:"ProcessOffering",ti:".ProcessOffering"},{en:"ExpirationDate",ti:"DateTime"},{en:"GetCapabilities",ti:".GetCapabilitiesType"},{en:"Process",ti:".ProcessDescriptionType"},{en:"LiteralValue",ti:".LiteralValue"},{en:"Result",ti:".Result"},{en:"LiteralData",ti:".LiteralDataType",sh:"DataDescription"},{en:"Contents",ti:".Contents"},{en:"DescribeProcess",ti:".DescribeProcess"},{en:"GenericProcess",ti:".GenericProcessType"},{en:"Execute",ti:".ExecuteRequestType"},{en:"GetStatus",ti:".GetStatus"},{en:"JobID"},{en:"Data",ti:".Data"},{en:"Capabilities",ti:".WPSCapabilitiesType"},{en:"Reference",ti:".ReferenceType"},{en:"ComplexData",ti:".ComplexDataType",sh:"DataDescription"},{en:"StatusInfo",ti:".StatusInfo"},{en:"Format",ti:".Format"},{en:"GetResult",ti:".GetResult"},{en:"Dismiss",ti:".Dismiss"},{en:"ProcessOfferings",ti:".ProcessOfferings"}]}}})?ct.apply(Vn,[]):ct)&&(Un.exports=qe)},324:Un=>{"use strict";function Vn(Pt){if("string"!=typeof Pt)throw new TypeError("Path must be a string. Received "+JSON.stringify(Pt))}function ct(Pt,Ie){for(var R,ue="",Ee=0,C=-1,w=0,O=0;O<=Pt.length;++O){if(O<Pt.length)R=Pt.charCodeAt(O);else{if(47===R)break;R=47}if(47===R){if(C!==O-1&&1!==w)if(C!==O-1&&2===w){if(ue.length<2||2!==Ee||46!==ue.charCodeAt(ue.length-1)||46!==ue.charCodeAt(ue.length-2))if(ue.length>2){var k=ue.lastIndexOf("/");if(k!==ue.length-1){-1===k?(ue="",Ee=0):Ee=(ue=ue.slice(0,k)).length-1-ue.lastIndexOf("/"),C=O,w=0;continue}}else if(2===ue.length||1===ue.length){ue="",Ee=0,C=O,w=0;continue}Ie&&(ue.length>0?ue+="/..":ue="..",Ee=2)}else ue.length>0?ue+="/"+Pt.slice(C+1,O):ue=Pt.slice(C+1,O),Ee=O-C-1;C=O,w=0}else 46===R&&-1!==w?++w:w=-1}return ue}var qe={resolve:function(){for(var Ee,Ie="",ue=!1,C=arguments.length-1;C>=-1&&!ue;C--){var w;C>=0?w=arguments[C]:(void 0===Ee&&(Ee=process.cwd()),w=Ee),Vn(w),0!==w.length&&(Ie=w+"/"+Ie,ue=47===w.charCodeAt(0))}return Ie=ct(Ie,!ue),ue?Ie.length>0?"/"+Ie:"/":Ie.length>0?Ie:"."},normalize:function(Ie){if(Vn(Ie),0===Ie.length)return".";var ue=47===Ie.charCodeAt(0),Ee=47===Ie.charCodeAt(Ie.length-1);return 0===(Ie=ct(Ie,!ue)).length&&!ue&&(Ie="."),Ie.length>0&&Ee&&(Ie+="/"),ue?"/"+Ie:Ie},isAbsolute:function(Ie){return Vn(Ie),Ie.length>0&&47===Ie.charCodeAt(0)},join:function(){if(0===arguments.length)return".";for(var Ie,ue=0;ue<arguments.length;++ue){var Ee=arguments[ue];Vn(Ee),Ee.length>0&&(void 0===Ie?Ie=Ee:Ie+="/"+Ee)}return void 0===Ie?".":qe.normalize(Ie)},relative:function(Ie,ue){if(Vn(Ie),Vn(ue),Ie===ue||(Ie=qe.resolve(Ie))===(ue=qe.resolve(ue)))return"";for(var Ee=1;Ee<Ie.length&&47===Ie.charCodeAt(Ee);++Ee);for(var C=Ie.length,w=C-Ee,R=1;R<ue.length&&47===ue.charCodeAt(R);++R);for(var k=ue.length-R,j=w<k?w:k,X=-1,ee=0;ee<=j;++ee){if(ee===j){if(k>j){if(47===ue.charCodeAt(R+ee))return ue.slice(R+ee+1);if(0===ee)return ue.slice(R+ee)}else w>j&&(47===Ie.charCodeAt(Ee+ee)?X=ee:0===ee&&(X=0));break}var $=Ie.charCodeAt(Ee+ee);if($!==ue.charCodeAt(R+ee))break;47===$&&(X=ee)}var ge="";for(ee=Ee+X+1;ee<=C;++ee)(ee===C||47===Ie.charCodeAt(ee))&&(ge+=0===ge.length?"..":"/..");return ge.length>0?ge+ue.slice(R+X):(47===ue.charCodeAt(R+=X)&&++R,ue.slice(R))},_makeLong:function(Ie){return Ie},dirname:function(Ie){if(Vn(Ie),0===Ie.length)return".";for(var ue=Ie.charCodeAt(0),Ee=47===ue,C=-1,w=!0,R=Ie.length-1;R>=1;--R)if(47===(ue=Ie.charCodeAt(R))){if(!w){C=R;break}}else w=!1;return-1===C?Ee?"/":".":Ee&&1===C?"//":Ie.slice(0,C)},basename:function(Ie,ue){if(void 0!==ue&&"string"!=typeof ue)throw new TypeError('"ext" argument must be a string');Vn(Ie);var R,Ee=0,C=-1,w=!0;if(void 0!==ue&&ue.length>0&&ue.length<=Ie.length){if(ue.length===Ie.length&&ue===Ie)return"";var O=ue.length-1,k=-1;for(R=Ie.length-1;R>=0;--R){var j=Ie.charCodeAt(R);if(47===j){if(!w){Ee=R+1;break}}else-1===k&&(w=!1,k=R+1),O>=0&&(j===ue.charCodeAt(O)?-1==--O&&(C=R):(O=-1,C=k))}return Ee===C?C=k:-1===C&&(C=Ie.length),Ie.slice(Ee,C)}for(R=Ie.length-1;R>=0;--R)if(47===Ie.charCodeAt(R)){if(!w){Ee=R+1;break}}else-1===C&&(w=!1,C=R+1);return-1===C?"":Ie.slice(Ee,C)},extname:function(Ie){Vn(Ie);for(var ue=-1,Ee=0,C=-1,w=!0,R=0,O=Ie.length-1;O>=0;--O){var k=Ie.charCodeAt(O);if(47!==k)-1===C&&(w=!1,C=O+1),46===k?-1===ue?ue=O:1!==R&&(R=1):-1!==ue&&(R=-1);else if(!w){Ee=O+1;break}}return-1===ue||-1===C||0===R||1===R&&ue===C-1&&ue===Ee+1?"":Ie.slice(ue,C)},format:function(Ie){if(null===Ie||"object"!=typeof Ie)throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof Ie);return function Lt(Pt,Ie){var ue=Ie.dir||Ie.root,Ee=Ie.base||(Ie.name||"")+(Ie.ext||"");return ue?ue===Ie.root?ue+Ee:ue+Pt+Ee:Ee}("/",Ie)},parse:function(Ie){Vn(Ie);var ue={root:"",dir:"",base:"",ext:"",name:""};if(0===Ie.length)return ue;var w,Ee=Ie.charCodeAt(0),C=47===Ee;C?(ue.root="/",w=1):w=0;for(var R=-1,O=0,k=-1,j=!0,X=Ie.length-1,ee=0;X>=w;--X)if(47!==(Ee=Ie.charCodeAt(X)))-1===k&&(j=!1,k=X+1),46===Ee?-1===R?R=X:1!==ee&&(ee=1):-1!==R&&(ee=-1);else if(!j){O=X+1;break}return-1===R||-1===k||0===ee||1===ee&&R===k-1&&R===O+1?-1!==k&&(ue.base=ue.name=Ie.slice(0===O&&C?1:O,k)):(0===O&&C?(ue.name=Ie.slice(1,R),ue.base=Ie.slice(1,k)):(ue.name=Ie.slice(O,R),ue.base=Ie.slice(O,k)),ue.ext=Ie.slice(R,k)),O>0?ue.dir=Ie.slice(0,O-1):C&&(ue.dir="/"),ue},sep:"/",delimiter:":",win32:null,posix:null};qe.posix=qe,Un.exports=qe},697:(Un,Vn,ct)=>{"use strict";Un.exports=qe;var Lt=ct(658);function qe(Y){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(Y)?Y:new Uint8Array(Y||0),this.pos=0,this.type=0,this.length=this.buf.length}qe.Varint=0,qe.Fixed64=1,qe.Bytes=2,qe.Fixed32=5;var Pt=4294967296,Ie=1/Pt,Ee=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function w(Y){return Y.type===qe.Bytes?Y.readVarint()+Y.pos:Y.pos+1}function X(Y,Se,ve){var un=Se<=16383?1:Se<=2097151?2:Se<=268435455?3:Math.floor(Math.log(Se)/(7*Math.LN2));ve.realloc(un);for(var on=ve.pos-1;on>=Y;on--)ve.buf[on+un]=ve.buf[on]}function ee(Y,Se){for(var ve=0;ve<Y.length;ve++)Se.writeVarint(Y[ve])}function $(Y,Se){for(var ve=0;ve<Y.length;ve++)Se.writeSVarint(Y[ve])}function re(Y,Se){for(var ve=0;ve<Y.length;ve++)Se.writeFloat(Y[ve])}function ge(Y,Se){for(var ve=0;ve<Y.length;ve++)Se.writeDouble(Y[ve])}function Le(Y,Se){for(var ve=0;ve<Y.length;ve++)Se.writeBoolean(Y[ve])}function Ge(Y,Se){for(var ve=0;ve<Y.length;ve++)Se.writeFixed32(Y[ve])}function ft(Y,Se){for(var ve=0;ve<Y.length;ve++)Se.writeSFixed32(Y[ve])}function xt(Y,Se){for(var ve=0;ve<Y.length;ve++)Se.writeFixed64(Y[ve])}function wt(Y,Se){for(var ve=0;ve<Y.length;ve++)Se.writeSFixed64(Y[ve])}function gn(Y,Se){return(Y[Se]|Y[Se+1]<<8|Y[Se+2]<<16)+16777216*Y[Se+3]}function xn(Y,Se,ve){Y[ve]=Se,Y[ve+1]=Se>>>8,Y[ve+2]=Se>>>16,Y[ve+3]=Se>>>24}function Sr(Y,Se){return(Y[Se]|Y[Se+1]<<8|Y[Se+2]<<16)+(Y[Se+3]<<24)}qe.prototype={destroy:function(){this.buf=null},readFields:function(Y,Se,ve){for(ve=ve||this.length;this.pos<ve;){var un=this.readVarint(),on=un>>3,An=this.pos;this.type=7&un,Y(on,Se,this),this.pos===An&&this.skip(un)}return Se},readMessage:function(Y,Se){return this.readFields(Y,Se,this.readVarint()+this.pos)},readFixed32:function(){var Y=gn(this.buf,this.pos);return this.pos+=4,Y},readSFixed32:function(){var Y=Sr(this.buf,this.pos);return this.pos+=4,Y},readFixed64:function(){var Y=gn(this.buf,this.pos)+gn(this.buf,this.pos+4)*Pt;return this.pos+=8,Y},readSFixed64:function(){var Y=gn(this.buf,this.pos)+Sr(this.buf,this.pos+4)*Pt;return this.pos+=8,Y},readFloat:function(){var Y=Lt.read(this.buf,this.pos,!0,23,4);return this.pos+=4,Y},readDouble:function(){var Y=Lt.read(this.buf,this.pos,!0,52,8);return this.pos+=8,Y},readVarint:function(Y){var ve,un,Se=this.buf;return ve=127&(un=Se[this.pos++]),un<128||(ve|=(127&(un=Se[this.pos++]))<<7,un<128)||(ve|=(127&(un=Se[this.pos++]))<<14,un<128)||(ve|=(127&(un=Se[this.pos++]))<<21,un<128)?ve:function C(Y,Se,ve){var on,An,un=ve.buf;if(on=(112&(An=un[ve.pos++]))>>4,An<128||(on|=(127&(An=un[ve.pos++]))<<3,An<128)||(on|=(127&(An=un[ve.pos++]))<<10,An<128)||(on|=(127&(An=un[ve.pos++]))<<17,An<128)||(on|=(127&(An=un[ve.pos++]))<<24,An<128)||(on|=(1&(An=un[ve.pos++]))<<31,An<128))return function R(Y,Se,ve){return ve?4294967296*Se+(Y>>>0):4294967296*(Se>>>0)+(Y>>>0)}(Y,on,Se);throw new Error("Expected varint not more than 10 bytes")}(ve|=(15&(un=Se[this.pos]))<<28,Y,this)},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var Y=this.readVarint();return Y%2==1?(Y+1)/-2:Y/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var Y=this.readVarint()+this.pos,Se=this.pos;return this.pos=Y,Y-Se>=12&&Ee?function Jr(Y,Se,ve){return Ee.decode(Y.subarray(Se,ve))}(this.buf,Se,Y):function xr(Y,Se,ve){for(var un="",on=Se;on<ve;){var va,pp,K_,An=Y[on],Mr=null,Qu=An>239?4:An>223?3:An>191?2:1;if(on+Qu>ve)break;1===Qu?An<128&&(Mr=An):2===Qu?128==(192&(va=Y[on+1]))&&(Mr=(31&An)<<6|63&va)<=127&&(Mr=null):3===Qu?(pp=Y[on+2],128==(192&(va=Y[on+1]))&&128==(192&pp)&&((Mr=(15&An)<<12|(63&va)<<6|63&pp)<=2047||Mr>=55296&&Mr<=57343)&&(Mr=null)):4===Qu&&(pp=Y[on+2],K_=Y[on+3],128==(192&(va=Y[on+1]))&&128==(192&pp)&&128==(192&K_)&&((Mr=(15&An)<<18|(63&va)<<12|(63&pp)<<6|63&K_)<=65535||Mr>=1114112)&&(Mr=null)),null===Mr?(Mr=65533,Qu=1):Mr>65535&&(Mr-=65536,un+=String.fromCharCode(Mr>>>10&1023|55296),Mr=56320|1023&Mr),un+=String.fromCharCode(Mr),on+=Qu}return un}(this.buf,Se,Y)},readBytes:function(){var Y=this.readVarint()+this.pos,Se=this.buf.subarray(this.pos,Y);return this.pos=Y,Se},readPackedVarint:function(Y,Se){if(this.type!==qe.Bytes)return Y.push(this.readVarint(Se));var ve=w(this);for(Y=Y||[];this.pos<ve;)Y.push(this.readVarint(Se));return Y},readPackedSVarint:function(Y){if(this.type!==qe.Bytes)return Y.push(this.readSVarint());var Se=w(this);for(Y=Y||[];this.pos<Se;)Y.push(this.readSVarint());return Y},readPackedBoolean:function(Y){if(this.type!==qe.Bytes)return Y.push(this.readBoolean());var Se=w(this);for(Y=Y||[];this.pos<Se;)Y.push(this.readBoolean());return Y},readPackedFloat:function(Y){if(this.type!==qe.Bytes)return Y.push(this.readFloat());var Se=w(this);for(Y=Y||[];this.pos<Se;)Y.push(this.readFloat());return Y},readPackedDouble:function(Y){if(this.type!==qe.Bytes)return Y.push(this.readDouble());var Se=w(this);for(Y=Y||[];this.pos<Se;)Y.push(this.readDouble());return Y},readPackedFixed32:function(Y){if(this.type!==qe.Bytes)return Y.push(this.readFixed32());var Se=w(this);for(Y=Y||[];this.pos<Se;)Y.push(this.readFixed32());return Y},readPackedSFixed32:function(Y){if(this.type!==qe.Bytes)return Y.push(this.readSFixed32());var Se=w(this);for(Y=Y||[];this.pos<Se;)Y.push(this.readSFixed32());return Y},readPackedFixed64:function(Y){if(this.type!==qe.Bytes)return Y.push(this.readFixed64());var Se=w(this);for(Y=Y||[];this.pos<Se;)Y.push(this.readFixed64());return Y},readPackedSFixed64:function(Y){if(this.type!==qe.Bytes)return Y.push(this.readSFixed64());var Se=w(this);for(Y=Y||[];this.pos<Se;)Y.push(this.readSFixed64());return Y},skip:function(Y){var Se=7&Y;if(Se===qe.Varint)for(;this.buf[this.pos++]>127;);else if(Se===qe.Bytes)this.pos=this.readVarint()+this.pos;else if(Se===qe.Fixed32)this.pos+=4;else{if(Se!==qe.Fixed64)throw new Error("Unimplemented type: "+Se);this.pos+=8}},writeTag:function(Y,Se){this.writeVarint(Y<<3|Se)},realloc:function(Y){for(var Se=this.length||16;Se<this.pos+Y;)Se*=2;if(Se!==this.length){var ve=new Uint8Array(Se);ve.set(this.buf),this.buf=ve,this.length=Se}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(Y){this.realloc(4),xn(this.buf,Y,this.pos),this.pos+=4},writeSFixed32:function(Y){this.realloc(4),xn(this.buf,Y,this.pos),this.pos+=4},writeFixed64:function(Y){this.realloc(8),xn(this.buf,-1&Y,this.pos),xn(this.buf,Math.floor(Y*Ie),this.pos+4),this.pos+=8},writeSFixed64:function(Y){this.realloc(8),xn(this.buf,-1&Y,this.pos),xn(this.buf,Math.floor(Y*Ie),this.pos+4),this.pos+=8},writeVarint:function(Y){(Y=+Y||0)>268435455||Y<0?function O(Y,Se){var ve,un;if(Y>=0?(ve=Y%4294967296|0,un=Y/4294967296|0):(un=~(-Y/4294967296),4294967295^(ve=~(-Y%4294967296))?ve=ve+1|0:(ve=0,un=un+1|0)),Y>=0x10000000000000000||Y<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");Se.realloc(10),function k(Y,Se,ve){ve.buf[ve.pos++]=127&Y|128,Y>>>=7,ve.buf[ve.pos++]=127&Y|128,Y>>>=7,ve.buf[ve.pos++]=127&Y|128,Y>>>=7,ve.buf[ve.pos++]=127&Y|128,ve.buf[ve.pos]=127&(Y>>>=7)}(ve,0,Se),function j(Y,Se){var ve=(7&Y)<<4;Se.buf[Se.pos++]|=ve|((Y>>>=3)?128:0),Y&&(Se.buf[Se.pos++]=127&Y|((Y>>>=7)?128:0),Y&&(Se.buf[Se.pos++]=127&Y|((Y>>>=7)?128:0),Y&&(Se.buf[Se.pos++]=127&Y|((Y>>>=7)?128:0),Y&&(Se.buf[Se.pos++]=127&Y|((Y>>>=7)?128:0),Y&&(Se.buf[Se.pos++]=127&Y)))))}(un,Se)}(Y,this):(this.realloc(4),this.buf[this.pos++]=127&Y|(Y>127?128:0),!(Y<=127)&&(this.buf[this.pos++]=127&(Y>>>=7)|(Y>127?128:0),!(Y<=127)&&(this.buf[this.pos++]=127&(Y>>>=7)|(Y>127?128:0),!(Y<=127)&&(this.buf[this.pos++]=Y>>>7&127))))},writeSVarint:function(Y){this.writeVarint(Y<0?2*-Y-1:2*Y)},writeBoolean:function(Y){this.writeVarint(Boolean(Y))},writeString:function(Y){Y=String(Y),this.realloc(4*Y.length),this.pos++;var Se=this.pos;this.pos=function Ke(Y,Se,ve){for(var on,An,un=0;un<Se.length;un++){if((on=Se.charCodeAt(un))>55295&&on<57344){if(!An){on>56319||un+1===Se.length?(Y[ve++]=239,Y[ve++]=191,Y[ve++]=189):An=on;continue}if(on<56320){Y[ve++]=239,Y[ve++]=191,Y[ve++]=189,An=on;continue}on=An-55296<<10|on-56320|65536,An=null}else An&&(Y[ve++]=239,Y[ve++]=191,Y[ve++]=189,An=null);on<128?Y[ve++]=on:(on<2048?Y[ve++]=on>>6|192:(on<65536?Y[ve++]=on>>12|224:(Y[ve++]=on>>18|240,Y[ve++]=on>>12&63|128),Y[ve++]=on>>6&63|128),Y[ve++]=63&on|128)}return ve}(this.buf,Y,this.pos);var ve=this.pos-Se;ve>=128&&X(Se,ve,this),this.pos=Se-1,this.writeVarint(ve),this.pos+=ve},writeFloat:function(Y){this.realloc(4),Lt.write(this.buf,Y,this.pos,!0,23,4),this.pos+=4},writeDouble:function(Y){this.realloc(8),Lt.write(this.buf,Y,this.pos,!0,52,8),this.pos+=8},writeBytes:function(Y){var Se=Y.length;this.writeVarint(Se),this.realloc(Se);for(var ve=0;ve<Se;ve++)this.buf[this.pos++]=Y[ve]},writeRawMessage:function(Y,Se){this.pos++;var ve=this.pos;Y(Se,this);var un=this.pos-ve;un>=128&&X(ve,un,this),this.pos=ve-1,this.writeVarint(un),this.pos+=un},writeMessage:function(Y,Se,ve){this.writeTag(Y,qe.Bytes),this.writeRawMessage(Se,ve)},writePackedVarint:function(Y,Se){Se.length&&this.writeMessage(Y,ee,Se)},writePackedSVarint:function(Y,Se){Se.length&&this.writeMessage(Y,$,Se)},writePackedBoolean:function(Y,Se){Se.length&&this.writeMessage(Y,Le,Se)},writePackedFloat:function(Y,Se){Se.length&&this.writeMessage(Y,re,Se)},writePackedDouble:function(Y,Se){Se.length&&this.writeMessage(Y,ge,Se)},writePackedFixed32:function(Y,Se){Se.length&&this.writeMessage(Y,Ge,Se)},writePackedSFixed32:function(Y,Se){Se.length&&this.writeMessage(Y,ft,Se)},writePackedFixed64:function(Y,Se){Se.length&&this.writeMessage(Y,xt,Se)},writePackedSFixed64:function(Y,Se){Se.length&&this.writeMessage(Y,wt,Se)},writeBytesField:function(Y,Se){this.writeTag(Y,qe.Bytes),this.writeBytes(Se)},writeFixed32Field:function(Y,Se){this.writeTag(Y,qe.Fixed32),this.writeFixed32(Se)},writeSFixed32Field:function(Y,Se){this.writeTag(Y,qe.Fixed32),this.writeSFixed32(Se)},writeFixed64Field:function(Y,Se){this.writeTag(Y,qe.Fixed64),this.writeFixed64(Se)},writeSFixed64Field:function(Y,Se){this.writeTag(Y,qe.Fixed64),this.writeSFixed64(Se)},writeVarintField:function(Y,Se){this.writeTag(Y,qe.Varint),this.writeVarint(Se)},writeSVarintField:function(Y,Se){this.writeTag(Y,qe.Varint),this.writeSVarint(Se)},writeStringField:function(Y,Se){this.writeTag(Y,qe.Bytes),this.writeString(Se)},writeFloatField:function(Y,Se){this.writeTag(Y,qe.Fixed32),this.writeFloat(Se)},writeDoubleField:function(Y,Se){this.writeTag(Y,qe.Fixed64),this.writeDouble(Se)},writeBooleanField:function(Y,Se){this.writeVarintField(Y,Boolean(Se))}}},36:function(Un){Un.exports=function(){"use strict";function Vn($,re,ge,Le,Ge){!function ft(xt,wt,gn,xn,Sr){for(;xn>gn;){if(xn-gn>600){var xr=xn-gn+1,Jr=wt-gn+1,Ke=Math.log(xr),Y=.5*Math.exp(2*Ke/3),Se=.5*Math.sqrt(Ke*Y*(xr-Y)/xr)*(Jr-xr/2<0?-1:1);ft(xt,wt,Math.max(gn,Math.floor(wt-Jr*Y/xr+Se)),Math.min(xn,Math.floor(wt+(xr-Jr)*Y/xr+Se)),Sr)}var on=xt[wt],An=gn,Mr=xn;for(ct(xt,gn,wt),Sr(xt[xn],on)>0&&ct(xt,gn,xn);An<Mr;){for(ct(xt,An,Mr),An++,Mr--;Sr(xt[An],on)<0;)An++;for(;Sr(xt[Mr],on)>0;)Mr--}0===Sr(xt[gn],on)?ct(xt,gn,Mr):ct(xt,++Mr,xn),Mr<=wt&&(gn=Mr+1),wt<=Mr&&(xn=Mr-1)}}($,re,ge||0,Le||$.length-1,Ge||Lt)}function ct($,re,ge){var Le=$[re];$[re]=$[ge],$[ge]=Le}function Lt($,re){return $<re?-1:$>re?1:0}var qe=function($){void 0===$&&($=9),this._maxEntries=Math.max(4,$),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function Pt($,re,ge){if(!ge)return re.indexOf($);for(var Le=0;Le<re.length;Le++)if(ge($,re[Le]))return Le;return-1}function Ie($,re){ue($,0,$.children.length,re,$)}function ue($,re,ge,Le,Ge){Ge||(Ge=X(null)),Ge.minX=1/0,Ge.minY=1/0,Ge.maxX=-1/0,Ge.maxY=-1/0;for(var ft=re;ft<ge;ft++){var xt=$.children[ft];Ee(Ge,$.leaf?Le(xt):xt)}return Ge}function Ee($,re){return $.minX=Math.min($.minX,re.minX),$.minY=Math.min($.minY,re.minY),$.maxX=Math.max($.maxX,re.maxX),$.maxY=Math.max($.maxY,re.maxY),$}function C($,re){return $.minX-re.minX}function w($,re){return $.minY-re.minY}function R($){return($.maxX-$.minX)*($.maxY-$.minY)}function O($){return $.maxX-$.minX+($.maxY-$.minY)}function k($,re){return $.minX<=re.minX&&$.minY<=re.minY&&re.maxX<=$.maxX&&re.maxY<=$.maxY}function j($,re){return re.minX<=$.maxX&&re.minY<=$.maxY&&re.maxX>=$.minX&&re.maxY>=$.minY}function X($){return{children:$,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function ee($,re,ge,Le,Ge){for(var ft=[re,ge];ft.length;)if(!((ge=ft.pop())-(re=ft.pop())<=Le)){var xt=re+Math.ceil((ge-re)/Le/2)*Le;Vn($,xt,re,ge,Ge),ft.push(re,xt,xt,ge)}}return qe.prototype.all=function(){return this._all(this.data,[])},qe.prototype.search=function($){var re=this.data,ge=[];if(!j($,re))return ge;for(var Le=this.toBBox,Ge=[];re;){for(var ft=0;ft<re.children.length;ft++){var xt=re.children[ft],wt=re.leaf?Le(xt):xt;j($,wt)&&(re.leaf?ge.push(xt):k($,wt)?this._all(xt,ge):Ge.push(xt))}re=Ge.pop()}return ge},qe.prototype.collides=function($){var re=this.data;if(!j($,re))return!1;for(var ge=[];re;){for(var Le=0;Le<re.children.length;Le++){var Ge=re.children[Le],ft=re.leaf?this.toBBox(Ge):Ge;if(j($,ft)){if(re.leaf||k($,ft))return!0;ge.push(Ge)}}re=ge.pop()}return!1},qe.prototype.load=function($){if(!$||!$.length)return this;if($.length<this._minEntries){for(var re=0;re<$.length;re++)this.insert($[re]);return this}var ge=this._build($.slice(),0,$.length-1,0);if(this.data.children.length)if(this.data.height===ge.height)this._splitRoot(this.data,ge);else{if(this.data.height<ge.height){var Le=this.data;this.data=ge,ge=Le}this._insert(ge,this.data.height-ge.height-1,!0)}else this.data=ge;return this},qe.prototype.insert=function($){return $&&this._insert($,this.data.height-1),this},qe.prototype.clear=function(){return this.data=X([]),this},qe.prototype.remove=function($,re){if(!$)return this;for(var ge,Le,Ge,ft=this.data,xt=this.toBBox($),wt=[],gn=[];ft||wt.length;){if(ft||(ft=wt.pop(),Le=wt[wt.length-1],ge=gn.pop(),Ge=!0),ft.leaf){var xn=Pt($,ft.children,re);if(-1!==xn)return ft.children.splice(xn,1),wt.push(ft),this._condense(wt),this}Ge||ft.leaf||!k(ft,xt)?Le?(ge++,ft=Le.children[ge],Ge=!1):ft=null:(wt.push(ft),gn.push(ge),ge=0,Le=ft,ft=ft.children[0])}return this},qe.prototype.toBBox=function($){return $},qe.prototype.compareMinX=function($,re){return $.minX-re.minX},qe.prototype.compareMinY=function($,re){return $.minY-re.minY},qe.prototype.toJSON=function(){return this.data},qe.prototype.fromJSON=function($){return this.data=$,this},qe.prototype._all=function($,re){for(var ge=[];$;)$.leaf?re.push.apply(re,$.children):ge.push.apply(ge,$.children),$=ge.pop();return re},qe.prototype._build=function($,re,ge,Le){var Ge,ft=ge-re+1,xt=this._maxEntries;if(ft<=xt)return Ie(Ge=X($.slice(re,ge+1)),this.toBBox),Ge;Le||(Le=Math.ceil(Math.log(ft)/Math.log(xt)),xt=Math.ceil(ft/Math.pow(xt,Le-1))),(Ge=X([])).leaf=!1,Ge.height=Le;var wt=Math.ceil(ft/xt),gn=wt*Math.ceil(Math.sqrt(xt));ee($,re,ge,gn,this.compareMinX);for(var xn=re;xn<=ge;xn+=gn){var Sr=Math.min(xn+gn-1,ge);ee($,xn,Sr,wt,this.compareMinY);for(var xr=xn;xr<=Sr;xr+=wt){var Jr=Math.min(xr+wt-1,Sr);Ge.children.push(this._build($,xr,Jr,Le-1))}}return Ie(Ge,this.toBBox),Ge},qe.prototype._chooseSubtree=function($,re,ge,Le){for(;Le.push(re),!re.leaf&&Le.length-1!==ge;){for(var Ge=1/0,ft=1/0,xt=void 0,wt=0;wt<re.children.length;wt++){var gn=re.children[wt],xn=R(gn),Sr=(xr=$,Jr=gn,(Math.max(Jr.maxX,xr.maxX)-Math.min(Jr.minX,xr.minX))*(Math.max(Jr.maxY,xr.maxY)-Math.min(Jr.minY,xr.minY))-xn);Sr<ft?(ft=Sr,Ge=xn<Ge?xn:Ge,xt=gn):Sr===ft&&xn<Ge&&(Ge=xn,xt=gn)}re=xt||re.children[0]}var xr,Jr;return re},qe.prototype._insert=function($,re,ge){var Le=ge?$:this.toBBox($),Ge=[],ft=this._chooseSubtree(Le,this.data,re,Ge);for(ft.children.push($),Ee(ft,Le);re>=0&&Ge[re].children.length>this._maxEntries;)this._split(Ge,re),re--;this._adjustParentBBoxes(Le,Ge,re)},qe.prototype._split=function($,re){var ge=$[re],Le=ge.children.length,Ge=this._minEntries;this._chooseSplitAxis(ge,Ge,Le);var ft=this._chooseSplitIndex(ge,Ge,Le),xt=X(ge.children.splice(ft,ge.children.length-ft));xt.height=ge.height,xt.leaf=ge.leaf,Ie(ge,this.toBBox),Ie(xt,this.toBBox),re?$[re-1].children.push(xt):this._splitRoot(ge,xt)},qe.prototype._splitRoot=function($,re){this.data=X([$,re]),this.data.height=$.height+1,this.data.leaf=!1,Ie(this.data,this.toBBox)},qe.prototype._chooseSplitIndex=function($,re,ge){for(var Le,Ge,ft,xt,wt,gn,xn,Sr=1/0,xr=1/0,Jr=re;Jr<=ge-re;Jr++){var Ke=ue($,0,Jr,this.toBBox),Y=ue($,Jr,ge,this.toBBox),Se=(Ge=Ke,ft=Y,void 0,void 0,void 0,void 0,xt=Math.max(Ge.minX,ft.minX),wt=Math.max(Ge.minY,ft.minY),gn=Math.min(Ge.maxX,ft.maxX),xn=Math.min(Ge.maxY,ft.maxY),Math.max(0,gn-xt)*Math.max(0,xn-wt)),ve=R(Ke)+R(Y);Se<Sr?(Sr=Se,Le=Jr,xr=ve<xr?ve:xr):Se===Sr&&ve<xr&&(xr=ve,Le=Jr)}return Le||ge-re},qe.prototype._chooseSplitAxis=function($,re,ge){var Le=$.leaf?this.compareMinX:C,Ge=$.leaf?this.compareMinY:w;this._allDistMargin($,re,ge,Le)<this._allDistMargin($,re,ge,Ge)&&$.children.sort(Le)},qe.prototype._allDistMargin=function($,re,ge,Le){$.children.sort(Le);for(var Ge=this.toBBox,ft=ue($,0,re,Ge),xt=ue($,ge-re,ge,Ge),wt=O(ft)+O(xt),gn=re;gn<ge-re;gn++){var xn=$.children[gn];Ee(ft,$.leaf?Ge(xn):xn),wt+=O(ft)}for(var Sr=ge-re-1;Sr>=re;Sr--){var xr=$.children[Sr];Ee(xt,$.leaf?Ge(xr):xr),wt+=O(xt)}return wt},qe.prototype._adjustParentBBoxes=function($,re,ge){for(var Le=ge;Le>=0;Le--)Ee(re[Le],$)},qe.prototype._condense=function($){for(var re=$.length-1,ge=void 0;re>=0;re--)0===$[re].children.length?re>0?(ge=$[re-1].children).splice(ge.indexOf($[re]),1):this.clear():Ie($[re],this.toBBox)},qe}()},856:(Un,Vn)=>{var ct,qe;void 0!==(qe="function"==typeof(ct=function(){return{XLink_1_0:{n:"XLink_1_0",dens:"http://www.w3.org/1999/xlink",dans:"http://www.w3.org/1999/xlink",tis:[{ln:"ResourceType",tn:"resourceType",ps:[{n:"content",col:!0,t:"ae"},{n:"type",rq:!0,ti:"Token",t:"a"},{n:"role",t:"a"},{n:"title",t:"a"},{n:"label",ti:"NCName",t:"a"}]},{ln:"LocatorType",tn:"locatorType",ps:[{n:"locatorTitle",mno:0,col:!0,en:"title",ti:".TitleEltType"},{n:"type",rq:!0,ti:"Token",t:"a"},{n:"href",rq:!0,t:"a"},{n:"role",t:"a"},{n:"title",t:"a"},{n:"label",ti:"NCName",t:"a"}]},{ln:"Extended",tn:"extended",ps:[{n:"extendedModel",mno:0,col:!0,etis:[{en:"title",ti:".TitleEltType"},{en:"resource",ti:".ResourceType"},{en:"locator",ti:".LocatorType"},{en:"arc",ti:".ArcType"}],t:"es"},{n:"type",rq:!0,ti:"Token",t:"a"},{n:"role",t:"a"},{n:"title",t:"a"}]},{ln:"Simple",tn:"simple",ps:[{n:"content",col:!0,t:"ae"},{n:"type",ti:"Token",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"Token",t:"a"},{n:"actuate",ti:"Token",t:"a"}]},{ln:"TitleEltType",tn:"titleEltType",ps:[{n:"content",col:!0,t:"ae"},{n:"type",rq:!0,ti:"Token",t:"a"},{n:"lang",an:{lp:"lang",ns:"http://www.w3.org/XML/1998/namespace"},t:"a"}]},{ln:"ArcType",tn:"arcType",ps:[{n:"locatorTitle",mno:0,col:!0,en:"title",ti:".TitleEltType"},{n:"type",rq:!0,ti:"Token",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"Token",t:"a"},{n:"actuate",ti:"Token",t:"a"},{n:"from",ti:"NCName",t:"a"},{n:"to",ti:"NCName",t:"a"}]},{t:"enum",ln:"TypeType",bti:"Token",vs:["simple","extended","title","resource","locator","arc"]},{t:"enum",ln:"ShowType",bti:"Token",vs:["new","replace","embed","other","none"]},{t:"enum",ln:"ActuateType",bti:"Token",vs:["onLoad","onRequest","other","none"]}],eis:[{en:"arc",ti:".ArcType"},{en:"resource",ti:".ResourceType"},{en:"locator",ti:".LocatorType"},{en:"title",ti:".TitleEltType"}]}}})?ct.apply(Vn,[]):ct)&&(Un.exports=qe)},402:function(Un,Vn){var qe;void 0!==(qe=function(){var C=function($){var re=$.tagName;return"http://www.w3.org/1999/xhtml"===$.namespaceURI&&(re=re.toLowerCase()),re},R=function($){return Array.prototype.map.call($.childNodes,function(re){return ee(re)}).join("")},O=function($,re){var ge="<"+C($);return ge+=function($,re){return Array.prototype.map.call($.attributes||$.attrs,function(Le){return Le.name}).indexOf("xmlns")>=0||!re&&$.namespaceURI===$.parentNode.namespaceURI?"":' xmlns="'+$.namespaceURI+'"'}($,re),Array.prototype.forEach.call($.attributes||$.attrs,function(Le){ge+=function($){return" "+$.name+'="'+function($){return $.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")}($.value)+'"'}(Le)}),$.childNodes.length>0?(ge+=">",ge+=R($),ge+="</"+C($)+">"):ge+="/>",ge},ee=function($,re){var ge=re&&re.rootNode;return"#document"===$.nodeName||"#document-fragment"===$.nodeName?R($):$.tagName?O($,ge):"#text"===$.nodeName?function($){return function($){return $.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}($.nodeValue||$.value||"")}($):"#comment"===$.nodeName?function($){return"\x3c!--"+$.data.replace(/-/g,"&#45;")+"--\x3e"}($):"#cdata-section"===$.nodeName?function($){return"<![CDATA["+$.nodeValue+"]]>"}($):void 0};return{serializeToString:function($){return function($){return $.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F]/g,"")}(ee($,{rootNode:!0}))}}}.apply(Vn,[]))&&(Un.exports=qe)},628:(Un,Vn,ct)=>{"use strict";function Lt(c){return"function"==typeof c}let qe=!1;const Pt={Promise:void 0,set useDeprecatedSynchronousErrorHandling(c){if(c){const l=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+l.stack)}else qe&&console.log("RxJS: Back to a better error behavior. Thank you. <3");qe=c},get useDeprecatedSynchronousErrorHandling(){return qe}};function Ie(c){setTimeout(()=>{throw c},0)}const ue={closed:!0,next(c){},error(c){if(Pt.useDeprecatedSynchronousErrorHandling)throw c;Ie(c)},complete(){}},Ee=Array.isArray||(c=>c&&"number"==typeof c.length);function C(c){return null!==c&&"object"==typeof c}const R=(()=>{function c(l){return Error.call(this),this.message=l?`${l.length} errors occurred during unsubscription:\n${l.map((a,h)=>`${h+1}) ${a.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=l,this}return c.prototype=Object.create(Error.prototype),c})();class O{constructor(l){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,l&&(this._ctorUnsubscribe=!0,this._unsubscribe=l)}unsubscribe(){let l;if(this.closed)return;let{_parentOrParents:a,_ctorUnsubscribe:h,_unsubscribe:d,_subscriptions:f}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,a instanceof O)a.remove(this);else if(null!==a)for(let m=0;m<a.length;++m)a[m].remove(this);if(Lt(d)){h&&(this._unsubscribe=void 0);try{d.call(this)}catch(m){l=m instanceof R?k(m.errors):[m]}}if(Ee(f)){let m=-1,g=f.length;for(;++m<g;){const y=f[m];if(C(y))try{y.unsubscribe()}catch(v){l=l||[],v instanceof R?l=l.concat(k(v.errors)):l.push(v)}}}if(l)throw new R(l)}add(l){let a=l;if(!l)return O.EMPTY;switch(typeof l){case"function":a=new O(l);case"object":if(a===this||a.closed||"function"!=typeof a.unsubscribe)return a;if(this.closed)return a.unsubscribe(),a;if(!(a instanceof O)){const f=a;a=new O,a._subscriptions=[f]}break;default:throw new Error("unrecognized teardown "+l+" added to Subscription.")}let{_parentOrParents:h}=a;if(null===h)a._parentOrParents=this;else if(h instanceof O){if(h===this)return a;a._parentOrParents=[h,this]}else{if(-1!==h.indexOf(this))return a;h.push(this)}const d=this._subscriptions;return null===d?this._subscriptions=[a]:d.push(a),a}remove(l){const a=this._subscriptions;if(a){const h=a.indexOf(l);-1!==h&&a.splice(h,1)}}}var c;function k(c){return c.reduce((l,a)=>l.concat(a instanceof R?a.errors:a),[])}O.EMPTY=((c=new O).closed=!0,c);const j="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random();class ee extends O{constructor(l,a,h){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=ue;break;case 1:if(!l){this.destination=ue;break}if("object"==typeof l){l instanceof ee?(this.syncErrorThrowable=l.syncErrorThrowable,this.destination=l,l.add(this)):(this.syncErrorThrowable=!0,this.destination=new $(this,l));break}default:this.syncErrorThrowable=!0,this.destination=new $(this,l,a,h)}}[j](){return this}static create(l,a,h){const d=new ee(l,a,h);return d.syncErrorThrowable=!1,d}next(l){this.isStopped||this._next(l)}error(l){this.isStopped||(this.isStopped=!0,this._error(l))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(l){this.destination.next(l)}_error(l){this.destination.error(l),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:l}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=l,this}}class $ extends ee{constructor(l,a,h,d){super(),this._parentSubscriber=l;let f,m=this;Lt(a)?f=a:a&&(f=a.next,h=a.error,d=a.complete,a!==ue&&(m=Object.create(a),Lt(m.unsubscribe)&&this.add(m.unsubscribe.bind(m)),m.unsubscribe=this.unsubscribe.bind(this))),this._context=m,this._next=f,this._error=h,this._complete=d}next(l){if(!this.isStopped&&this._next){const{_parentSubscriber:a}=this;Pt.useDeprecatedSynchronousErrorHandling&&a.syncErrorThrowable?this.__tryOrSetError(a,this._next,l)&&this.unsubscribe():this.__tryOrUnsub(this._next,l)}}error(l){if(!this.isStopped){const{_parentSubscriber:a}=this,{useDeprecatedSynchronousErrorHandling:h}=Pt;if(this._error)h&&a.syncErrorThrowable?(this.__tryOrSetError(a,this._error,l),this.unsubscribe()):(this.__tryOrUnsub(this._error,l),this.unsubscribe());else if(a.syncErrorThrowable)h?(a.syncErrorValue=l,a.syncErrorThrown=!0):Ie(l),this.unsubscribe();else{if(this.unsubscribe(),h)throw l;Ie(l)}}}complete(){if(!this.isStopped){const{_parentSubscriber:l}=this;if(this._complete){const a=()=>this._complete.call(this._context);Pt.useDeprecatedSynchronousErrorHandling&&l.syncErrorThrowable?(this.__tryOrSetError(l,a),this.unsubscribe()):(this.__tryOrUnsub(a),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(l,a){try{l.call(this._context,a)}catch(h){if(this.unsubscribe(),Pt.useDeprecatedSynchronousErrorHandling)throw h;Ie(h)}}__tryOrSetError(l,a,h){if(!Pt.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{a.call(this._context,h)}catch(d){return Pt.useDeprecatedSynchronousErrorHandling?(l.syncErrorValue=d,l.syncErrorThrown=!0,!0):(Ie(d),!0)}return!1}_unsubscribe(){const{_parentSubscriber:l}=this;this._context=null,this._parentSubscriber=null,l.unsubscribe()}}const Le="function"==typeof Symbol&&Symbol.observable||"@@observable";function Ge(c){return c}function xt(c){return 0===c.length?Ge:1===c.length?c[0]:function(a){return c.reduce((h,d)=>d(h),a)}}let wt=(()=>{class c{constructor(a){this._isScalar=!1,a&&(this._subscribe=a)}lift(a){const h=new c;return h.source=this,h.operator=a,h}subscribe(a,h,d){const{operator:f}=this,m=function ge(c,l,a){if(c){if(c instanceof ee)return c;if(c[j])return c[j]()}return c||l||a?new ee(c,l,a):new ee(ue)}(a,h,d);if(m.add(f?f.call(m,this.source):this.source||Pt.useDeprecatedSynchronousErrorHandling&&!m.syncErrorThrowable?this._subscribe(m):this._trySubscribe(m)),Pt.useDeprecatedSynchronousErrorHandling&&m.syncErrorThrowable&&(m.syncErrorThrowable=!1,m.syncErrorThrown))throw m.syncErrorValue;return m}_trySubscribe(a){try{return this._subscribe(a)}catch(h){Pt.useDeprecatedSynchronousErrorHandling&&(a.syncErrorThrown=!0,a.syncErrorValue=h),function re(c){for(;c;){const{closed:l,destination:a,isStopped:h}=c;if(l||h)return!1;c=a&&a instanceof ee?a:null}return!0}(a)?a.error(h):console.warn(h)}}forEach(a,h){return new(h=gn(h))((d,f)=>{let m;m=this.subscribe(g=>{try{a(g)}catch(y){f(y),m&&m.unsubscribe()}},f,d)})}_subscribe(a){const{source:h}=this;return h&&h.subscribe(a)}[Le](){return this}pipe(...a){return 0===a.length?this:xt(a)(this)}toPromise(a){return new(a=gn(a))((h,d)=>{let f;this.subscribe(m=>f=m,m=>d(m),()=>h(f))})}}return c.create=l=>new c(l),c})();function gn(c){if(c||(c=Pt.Promise||Promise),!c)throw new Error("no Promise impl found");return c}const Sr=(()=>{function c(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return c.prototype=Object.create(Error.prototype),c})();class xr extends O{constructor(l,a){super(),this.subject=l,this.subscriber=a,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const l=this.subject,a=l.observers;if(this.subject=null,!a||0===a.length||l.isStopped||l.closed)return;const h=a.indexOf(this.subscriber);-1!==h&&a.splice(h,1)}}class Jr extends ee{constructor(l){super(l),this.destination=l}}let Ke=(()=>{class c extends wt{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[j](){return new Jr(this)}lift(a){const h=new Y(this,this);return h.operator=a,h}next(a){if(this.closed)throw new Sr;if(!this.isStopped){const{observers:h}=this,d=h.length,f=h.slice();for(let m=0;m<d;m++)f[m].next(a)}}error(a){if(this.closed)throw new Sr;this.hasError=!0,this.thrownError=a,this.isStopped=!0;const{observers:h}=this,d=h.length,f=h.slice();for(let m=0;m<d;m++)f[m].error(a);this.observers.length=0}complete(){if(this.closed)throw new Sr;this.isStopped=!0;const{observers:a}=this,h=a.length,d=a.slice();for(let f=0;f<h;f++)d[f].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(a){if(this.closed)throw new Sr;return super._trySubscribe(a)}_subscribe(a){if(this.closed)throw new Sr;return this.hasError?(a.error(this.thrownError),O.EMPTY):this.isStopped?(a.complete(),O.EMPTY):(this.observers.push(a),new xr(this,a))}asObservable(){const a=new wt;return a.source=this,a}}return c.create=(l,a)=>new Y(l,a),c})();class Y extends Ke{constructor(l,a){super(),this.destination=l,this.source=a}next(l){const{destination:a}=this;a&&a.next&&a.next(l)}error(l){const{destination:a}=this;a&&a.error&&this.destination.error(l)}complete(){const{destination:l}=this;l&&l.complete&&this.destination.complete()}_subscribe(l){const{source:a}=this;return a?this.source.subscribe(l):O.EMPTY}}function Se(c){return c&&"function"==typeof c.schedule}function ve(c,l){return function(h){if("function"!=typeof c)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return h.lift(new un(c,l))}}class un{constructor(l,a){this.project=l,this.thisArg=a}call(l,a){return a.subscribe(new on(l,this.project,this.thisArg))}}class on extends ee{constructor(l,a,h){super(l),this.project=a,this.count=0,this.thisArg=h||this}_next(l){let a;try{a=this.project.call(this.thisArg,l,this.count++)}catch(h){return void this.destination.error(h)}this.destination.next(a)}}const An=c=>l=>{for(let a=0,h=c.length;a<h&&!l.closed;a++)l.next(c[a]);l.complete()},va=function Qu(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}(),$B=c=>c&&"number"==typeof c.length&&"function"!=typeof c;function YB(c){return!!c&&"function"!=typeof c.subscribe&&"function"==typeof c.then}const KA=c=>{if(c&&"function"==typeof c[Le])return(c=>l=>{const a=c[Le]();if("function"!=typeof a.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return a.subscribe(l)})(c);if($B(c))return An(c);if(YB(c))return(c=>l=>(c.then(a=>{l.closed||(l.next(a),l.complete())},a=>l.error(a)).then(null,Ie),l))(c);if(c&&"function"==typeof c[va])return(c=>l=>{const a=c[va]();for(;;){let h;try{h=a.next()}catch(d){return l.error(d),l}if(h.done){l.complete();break}if(l.next(h.value),l.closed)break}return"function"==typeof a.return&&l.add(()=>{a.return&&a.return()}),l})(c);{const a=`You provided ${C(c)?"an invalid object":`'${c}'`} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`;throw new TypeError(a)}};function QA(c,l){return new wt(a=>{const h=new O;let d=0;return h.add(l.schedule(function(){d!==c.length?(a.next(c[d++]),a.closed||h.add(this.schedule())):a.complete()})),h})}function Ls(c,l){return l?function $ie(c,l){if(null!=c){if(function Xie(c){return c&&"function"==typeof c[Le]}(c))return function Hie(c,l){return new wt(a=>{const h=new O;return h.add(l.schedule(()=>{const d=c[Le]();h.add(d.subscribe({next(f){h.add(l.schedule(()=>a.next(f)))},error(f){h.add(l.schedule(()=>a.error(f)))},complete(){h.add(l.schedule(()=>a.complete()))}}))})),h})}(c,l);if(YB(c))return function jie(c,l){return new wt(a=>{const h=new O;return h.add(l.schedule(()=>c.then(d=>{h.add(l.schedule(()=>{a.next(d),h.add(l.schedule(()=>a.complete()))}))},d=>{h.add(l.schedule(()=>a.error(d)))}))),h})}(c,l);if($B(c))return QA(c,l);if(function qie(c){return c&&"function"==typeof c[va]}(c)||"string"==typeof c)return function Wie(c,l){if(!c)throw new Error("Iterable cannot be null");return new wt(a=>{const h=new O;let d;return h.add(()=>{d&&"function"==typeof d.return&&d.return()}),h.add(l.schedule(()=>{d=c[va](),h.add(l.schedule(function(){if(a.closed)return;let f,m;try{const g=d.next();f=g.value,m=g.done}catch(g){return void a.error(g)}m?a.complete():(a.next(f),this.schedule())}))})),h})}(c,l)}throw new TypeError((null!==c&&typeof c||c)+" is not observable")}(c,l):c instanceof wt?c:new wt(KA(c))}class lg extends ee{constructor(l){super(),this.parent=l}_next(l){this.parent.notifyNext(l)}_error(l){this.parent.notifyError(l),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class cg extends ee{notifyNext(l){this.destination.next(l)}notifyError(l){this.destination.error(l)}notifyComplete(){this.destination.complete()}}function ug(c,l){if(l.closed)return;if(c instanceof wt)return c.subscribe(l);let a;try{a=KA(c)(l)}catch(h){l.error(h)}return a}function gs(c,l,a=Number.POSITIVE_INFINITY){return"function"==typeof l?h=>h.pipe(gs((d,f)=>Ls(c(d,f)).pipe(ve((m,g)=>l(d,m,f,g))),a)):("number"==typeof l&&(a=l),h=>h.lift(new Yie(c,a)))}class Yie{constructor(l,a=Number.POSITIVE_INFINITY){this.project=l,this.concurrent=a}call(l,a){return a.subscribe(new Zie(l,this.project,this.concurrent))}}class Zie extends cg{constructor(l,a,h=Number.POSITIVE_INFINITY){super(l),this.project=a,this.concurrent=h,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(l){this.active<this.concurrent?this._tryNext(l):this.buffer.push(l)}_tryNext(l){let a;const h=this.index++;try{a=this.project(l,h)}catch(d){return void this.destination.error(d)}this.active++,this._innerSub(a)}_innerSub(l){const a=new lg(this),h=this.destination;h.add(a);const d=ug(l,a);d!==a&&h.add(d)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(l){this.destination.next(l)}notifyComplete(){const l=this.buffer;this.active--,l.length>0?this._next(l.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}function hg(c=Number.POSITIVE_INFINITY){return gs(Ge,c)}function JA(c,l){return l?QA(c,l):new wt(An(c))}function eI(...c){let l=Number.POSITIVE_INFINITY,a=null,h=c[c.length-1];return Se(h)?(a=c.pop(),c.length>1&&"number"==typeof c[c.length-1]&&(l=c.pop())):"number"==typeof h&&(l=c.pop()),null===a&&1===c.length&&c[0]instanceof wt?c[0]:hg(l)(JA(c,a))}function N1(){return function(l){return l.lift(new Kie(l))}}class Kie{constructor(l){this.connectable=l}call(l,a){const{connectable:h}=this;h._refCount++;const d=new Qie(l,h),f=a.subscribe(d);return d.closed||(d.connection=h.connect()),f}}class Qie extends ee{constructor(l,a){super(l),this.connectable=a}_unsubscribe(){const{connectable:l}=this;if(!l)return void(this.connection=null);this.connectable=null;const a=l._refCount;if(a<=0)return void(this.connection=null);if(l._refCount=a-1,a>1)return void(this.connection=null);const{connection:h}=this,d=l._connection;this.connection=null,d&&(!h||d===h)&&d.unsubscribe()}}class tI extends wt{constructor(l,a){super(),this.source=l,this.subjectFactory=a,this._refCount=0,this._isComplete=!1}_subscribe(l){return this.getSubject().subscribe(l)}getSubject(){const l=this._subject;return(!l||l.isStopped)&&(this._subject=this.subjectFactory()),this._subject}connect(){let l=this._connection;return l||(this._isComplete=!1,l=this._connection=new O,l.add(this.source.subscribe(new ese(this.getSubject(),this))),l.closed&&(this._connection=null,l=O.EMPTY)),l}refCount(){return N1()(this)}}const Jie=(()=>{const c=tI.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:c._subscribe},_isComplete:{value:c._isComplete,writable:!0},getSubject:{value:c.getSubject},connect:{value:c.connect},refCount:{value:c.refCount}}})();class ese extends Jr{constructor(l,a){super(l),this.connectable=a}_error(l){this._unsubscribe(),super._error(l)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const l=this.connectable;if(l){this.connectable=null;const a=l._connection;l._refCount=0,l._subject=null,l._connection=null,a&&a.unsubscribe()}}}class rse{constructor(l,a){this.subjectFactory=l,this.selector=a}call(l,a){const{selector:h}=this,d=this.subjectFactory(),f=h(d).subscribe(l);return f.add(a.subscribe(d)),f}}function ise(){return new Ke}function ZB(){return c=>N1()(function nse(c,l){return function(h){let d;if(d="function"==typeof c?c:function(){return c},"function"==typeof l)return h.lift(new rse(d,l));const f=Object.create(h,Jie);return f.source=h,f.subjectFactory=d,f}}(ise)(c))}function li(c){for(let l in c)if(c[l]===li)return l;throw Error("Could not find renamed property on target object.")}function nI(c,l){for(const a in l)l.hasOwnProperty(a)&&!c.hasOwnProperty(a)&&(c[a]=l[a])}function ci(c){if("string"==typeof c)return c;if(Array.isArray(c))return"["+c.map(ci).join(", ")+"]";if(null==c)return""+c;if(c.overriddenName)return`${c.overriddenName}`;if(c.name)return`${c.name}`;const l=c.toString();if(null==l)return""+l;const a=l.indexOf("\n");return-1===a?l:l.substring(0,a)}function rI(c,l){return null==c||""===c?null===l?"":l:null==l||""===l?c:c+" "+l}const sse=li({__forward_ref__:li});function fi(c){return c.__forward_ref__=fi,c.toString=function(){return ci(this())},c}function On(c){return iI(c)?c():c}function iI(c){return"function"==typeof c&&c.hasOwnProperty(sse)&&c.__forward_ref__===fi}class it extends Error{constructor(l,a){super(function F1(c,l){return`NG0${Math.abs(c)}${l?": "+l.trim():""}`}(l,a)),this.code=l}}function Hn(c){return"string"==typeof c?c:null==c?"":String(c)}function k1(c,l){throw new it(-201,!1)}function Ba(c,l){null==c&&function Xr(c,l,a,h){throw new Error(`ASSERTION ERROR: ${c}`+(null==h?"":` [Expected=> ${a} ${h} ${l} <=Actual]`))}(l,c,null,"!=")}function Oe(c){return{token:c.token,providedIn:c.providedIn||null,factory:c.factory,value:void 0}}function kt(c){return{providers:c.providers||[],imports:c.imports||[]}}function sI(c){return KB(c,V1)||KB(c,JB)}function KB(c,l){return c.hasOwnProperty(l)?c[l]:null}function QB(c){return c&&(c.hasOwnProperty(oI)||c.hasOwnProperty(fse))?c[oI]:null}const V1=li({\u0275prov:li}),oI=li({\u0275inj:li}),JB=li({ngInjectableDef:li}),fse=li({ngInjectorDef:li});var En=(()=>((En=En||{})[En.Default=0]="Default",En[En.Host=1]="Host",En[En.Self=2]="Self",En[En.SkipSelf=4]="SkipSelf",En[En.Optional=8]="Optional",En))();let aI;function wl(c){const l=aI;return aI=c,l}function e4(c,l,a){const h=sI(c);return h&&"root"==h.providedIn?void 0===h.value?h.value=h.factory():h.value:a&En.Optional?null:void 0!==l?l:void k1(ci(c))}function gd(c){return{toString:c}.toString()}var tc=(()=>((tc=tc||{})[tc.OnPush=0]="OnPush",tc[tc.Default=1]="Default",tc))(),nc=(()=>(function(c){c[c.Emulated=0]="Emulated",c[c.None=2]="None",c[c.ShadowDom=3]="ShadowDom"}(nc||(nc={})),nc))();const si=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),dg={},Br=[],B1=li({\u0275cmp:li}),lI=li({\u0275dir:li}),cI=li({\u0275pipe:li}),t4=li({\u0275mod:li}),eh=li({\u0275fac:li}),Q_=li({__NG_ELEMENT_ID__:li});let mse=0;function Be(c){return gd(()=>{const a=!0===c.standalone,h={},d={type:c.type,providersResolver:null,decls:c.decls,vars:c.vars,factory:null,template:c.template||null,consts:c.consts||null,ngContentSelectors:c.ngContentSelectors,hostBindings:c.hostBindings||null,hostVars:c.hostVars||0,hostAttrs:c.hostAttrs||null,contentQueries:c.contentQueries||null,declaredInputs:h,inputs:null,outputs:null,exportAs:c.exportAs||null,onPush:c.changeDetection===tc.OnPush,directiveDefs:null,pipeDefs:null,standalone:a,dependencies:a&&c.dependencies||null,getStandaloneInjector:null,selectors:c.selectors||Br,viewQuery:c.viewQuery||null,features:c.features||null,data:c.data||{},encapsulation:c.encapsulation||nc.Emulated,id:"c"+mse++,styles:c.styles||Br,_:null,setInput:null,schemas:c.schemas||null,tView:null},f=c.dependencies,m=c.features;return d.inputs=i4(c.inputs,h),d.outputs=i4(c.outputs),m&&m.forEach(g=>g(d)),d.directiveDefs=f?()=>("function"==typeof f?f():f).map(n4).filter(r4):null,d.pipeDefs=f?()=>("function"==typeof f?f():f).map(Wo).filter(r4):null,d})}function n4(c){return ei(c)||jo(c)}function r4(c){return null!==c}const yse={};function Ut(c){return gd(()=>{const l={type:c.type,bootstrap:c.bootstrap||Br,declarations:c.declarations||Br,imports:c.imports||Br,exports:c.exports||Br,transitiveCompileScopes:null,schemas:c.schemas||null,id:c.id||null};return null!=c.id&&(yse[c.id]=c.type),l})}function i4(c,l){if(null==c)return dg;const a={};for(const h in c)if(c.hasOwnProperty(h)){let d=c[h],f=d;Array.isArray(d)&&(f=d[1],d=d[0]),a[d]=h,l&&(l[d]=f)}return a}const We=Be;function bo(c){return{type:c.type,name:c.name,factory:null,pure:!1!==c.pure,standalone:!0===c.standalone,onDestroy:c.type.prototype.ngOnDestroy||null}}function ei(c){return c[B1]||null}function jo(c){return c[lI]||null}function Wo(c){return c[cI]||null}function Ua(c,l){const a=c[t4]||null;if(!a&&!0===l)throw new Error(`Type ${ci(c)} does not have '\u0275mod' property.`);return a}function _a(c){return Array.isArray(c)&&"object"==typeof c[1]}function ic(c){return Array.isArray(c)&&!0===c[1]}function dI(c){return 0!=(8&c.flags)}function H1(c){return 2==(2&c.flags)}function j1(c){return 1==(1&c.flags)}function sc(c){return null!==c.template}function Tse(c){return 0!=(256&c[2])}function _p(c,l){return c.hasOwnProperty(eh)?c[eh]:null}class xse{constructor(l,a,h){this.previousValue=l,this.currentValue=a,this.firstChange=h}isFirstChange(){return this.firstChange}}function ys(){return a4}function a4(c){return c.type.prototype.ngOnChanges&&(c.setInput=Mse),Ese}function Ese(){const c=c4(this),l=c?.current;if(l){const a=c.previous;if(a===dg)c.previous=l;else for(let h in l)a[h]=l[h];c.current=null,this.ngOnChanges(l)}}function Mse(c,l,a,h){const d=c4(c)||function Dse(c,l){return c[l4]=l}(c,{previous:dg,current:null}),f=d.current||(d.current={}),m=d.previous,g=this.declaredInputs[a],y=m[g];f[g]=new xse(y&&y.currentValue,l,m===dg),c[h]=l}ys.ngInherit=!0;const l4="__ngSimpleChanges__";function c4(c){return c[l4]||null}function vs(c){for(;Array.isArray(c);)c=c[0];return c}function W1(c,l){return vs(l[c])}function El(c,l){return vs(l[c.index])}function yI(c,l){return c.data[l]}function yg(c,l){return c[l]}function za(c,l){const a=l[c];return _a(a)?a:a[0]}function u4(c){return 4==(4&c[2])}function vI(c){return 64==(64&c[2])}function yd(c,l){return null==l?null:c[l]}function h4(c){c[18]=0}function _I(c,l){c[5]+=l;let a=c,h=c[3];for(;null!==h&&(1===l&&1===a[5]||-1===l&&0===a[5]);)h[5]+=l,a=h,h=h[3]}const Gn={lFrame:S4(null),bindingsEnabled:!0};function f4(){return Gn.bindingsEnabled}function ot(){return Gn.lFrame.lView}function Ir(){return Gn.lFrame.tView}function vt(c){return Gn.lFrame.contextLView=c,c[8]}function _t(c){return Gn.lFrame.contextLView=null,c}function Os(){let c=p4();for(;null!==c&&64===c.type;)c=c.parent;return c}function p4(){return Gn.lFrame.currentTNode}function Jc(c,l){const a=Gn.lFrame;a.currentTNode=c,a.isParent=l}function SI(){return Gn.lFrame.isParent}function bI(){Gn.lFrame.isParent=!1}function Xo(){const c=Gn.lFrame;let l=c.bindingRootIndex;return-1===l&&(l=c.bindingRootIndex=c.tView.bindingStartIndex),l}function vg(){return Gn.lFrame.bindingIndex++}function nh(c){const l=Gn.lFrame,a=l.bindingIndex;return l.bindingIndex=l.bindingIndex+c,a}function zse(c,l){const a=Gn.lFrame;a.bindingIndex=a.bindingRootIndex=c,TI(l)}function TI(c){Gn.lFrame.currentDirectiveIndex=c}function wI(c){const l=Gn.lFrame.currentDirectiveIndex;return-1===l?null:c[l]}function y4(){return Gn.lFrame.currentQueryIndex}function CI(c){Gn.lFrame.currentQueryIndex=c}function jse(c){const l=c[1];return 2===l.type?l.declTNode:1===l.type?c[6]:null}function v4(c,l,a){if(a&En.SkipSelf){let d=l,f=c;for(;!(d=d.parent,null!==d||a&En.Host||(d=jse(f),null===d||(f=f[15],10&d.type))););if(null===d)return!1;l=d,c=f}const h=Gn.lFrame=_4();return h.currentTNode=l,h.lView=c,!0}function xI(c){const l=_4(),a=c[1];Gn.lFrame=l,l.currentTNode=a.firstChild,l.lView=c,l.tView=a,l.contextLView=c,l.bindingIndex=a.bindingStartIndex,l.inI18n=!1}function _4(){const c=Gn.lFrame,l=null===c?null:c.child;return null===l?S4(c):l}function S4(c){const l={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:c,child:null,inI18n:!1};return null!==c&&(c.child=l),l}function b4(){const c=Gn.lFrame;return Gn.lFrame=c.parent,c.currentTNode=null,c.lView=null,c}const T4=b4;function EI(){const c=b4();c.isParent=!0,c.tView=null,c.selectedIndex=-1,c.contextLView=null,c.elementDepthCount=0,c.currentDirectiveIndex=-1,c.currentNamespace=null,c.bindingRootIndex=-1,c.bindingIndex=-1,c.currentQueryIndex=0}function qo(){return Gn.lFrame.selectedIndex}function vd(c){Gn.lFrame.selectedIndex=c}function Yi(){const c=Gn.lFrame;return yI(c.tView,c.selectedIndex)}function q1(c,l){for(let a=l.directiveStart,h=l.directiveEnd;a<h;a++){const f=c.data[a].type.prototype,{ngAfterContentInit:m,ngAfterContentChecked:g,ngAfterViewInit:y,ngAfterViewChecked:v,ngOnDestroy:_}=f;m&&(c.contentHooks||(c.contentHooks=[])).push(-a,m),g&&((c.contentHooks||(c.contentHooks=[])).push(a,g),(c.contentCheckHooks||(c.contentCheckHooks=[])).push(a,g)),y&&(c.viewHooks||(c.viewHooks=[])).push(-a,y),v&&((c.viewHooks||(c.viewHooks=[])).push(a,v),(c.viewCheckHooks||(c.viewCheckHooks=[])).push(a,v)),null!=_&&(c.destroyHooks||(c.destroyHooks=[])).push(a,_)}}function $1(c,l,a){w4(c,l,3,a)}function Y1(c,l,a,h){(3&c[2])===a&&w4(c,l,a,h)}function MI(c,l){let a=c[2];(3&a)===l&&(a&=2047,a+=1,c[2]=a)}function w4(c,l,a,h){const f=h??-1,m=l.length-1;let g=0;for(let y=void 0!==h?65535&c[18]:0;y<m;y++)if("number"==typeof l[y+1]){if(g=l[y],null!=h&&g>=h)break}else l[y]<0&&(c[18]+=65536),(g<f||-1==f)&&(Jse(c,a,l,y),c[18]=(4294901760&c[18])+y+2),y++}function Jse(c,l,a,h){const d=a[h]<0,f=a[h+1],g=c[d?-a[h]:a[h]];if(d){if(c[2]>>11<c[18]>>16&&(3&c[2])===l){c[2]+=2048;try{f.call(g)}finally{}}}else try{f.call(g)}finally{}}class r0{constructor(l,a,h){this.factory=l,this.resolving=!1,this.canSeeViewProviders=a,this.injectImpl=h}}function Z1(c,l,a){let h=0;for(;h<a.length;){const d=a[h];if("number"==typeof d){if(0!==d)break;h++;const f=a[h++],m=a[h++],g=a[h++];c.setAttribute(l,m,g,f)}else{const f=d,m=a[++h];x4(f)?c.setProperty(l,f,m):c.setAttribute(l,f,m),h++}}return h}function C4(c){return 3===c||4===c||6===c}function x4(c){return 64===c.charCodeAt(0)}function K1(c,l){if(null!==l&&0!==l.length)if(null===c||0===c.length)c=l.slice();else{let a=-1;for(let h=0;h<l.length;h++){const d=l[h];"number"==typeof d?a=d:0===a||E4(c,a,d,null,-1===a||2===a?l[++h]:null)}}return c}function E4(c,l,a,h,d){let f=0,m=c.length;if(-1===l)m=-1;else for(;f<c.length;){const g=c[f++];if("number"==typeof g){if(g===l){m=-1;break}if(g>l){m=f-1;break}}}for(;f<c.length;){const g=c[f];if("number"==typeof g)break;if(g===a){if(null===h)return void(null!==d&&(c[f+1]=d));if(h===c[f+1])return void(c[f+2]=d)}f++,null!==h&&f++,null!==d&&f++}-1!==m&&(c.splice(m,0,l),f=m+1),c.splice(f++,0,a),null!==h&&c.splice(f++,0,h),null!==d&&c.splice(f++,0,d)}function M4(c){return-1!==c}function _g(c){return 32767&c}function Sg(c,l){let a=function ioe(c){return c>>16}(c),h=l;for(;a>0;)h=h[15],a--;return h}let AI=!0;function Q1(c){const l=AI;return AI=c,l}let soe=0;const eu={};function o0(c,l){const a=RI(c,l);if(-1!==a)return a;const h=l[1];h.firstCreatePass&&(c.injectorIndex=l.length,II(h.data,c),II(l,null),II(h.blueprint,null));const d=J1(c,l),f=c.injectorIndex;if(M4(d)){const m=_g(d),g=Sg(d,l),y=g[1].data;for(let v=0;v<8;v++)l[f+v]=g[m+v]|y[m+v]}return l[f+8]=d,f}function II(c,l){c.push(0,0,0,0,0,0,0,0,l)}function RI(c,l){return-1===c.injectorIndex||c.parent&&c.parent.injectorIndex===c.injectorIndex||null===l[c.injectorIndex+8]?-1:c.injectorIndex}function J1(c,l){if(c.parent&&-1!==c.parent.injectorIndex)return c.parent.injectorIndex;let a=0,h=null,d=l;for(;null!==d;){if(h=F4(d),null===h)return-1;if(a++,d=d[15],-1!==h.injectorIndex)return h.injectorIndex|a<<16}return-1}function ew(c,l,a){!function ooe(c,l,a){let h;"string"==typeof a?h=a.charCodeAt(0)||0:a.hasOwnProperty(Q_)&&(h=a[Q_]),null==h&&(h=a[Q_]=soe++);const d=255&h;l.data[c+(d>>5)]|=1<<d}(c,l,a)}function I4(c,l,a){if(a&En.Optional)return c;k1()}function R4(c,l,a,h){if(a&En.Optional&&void 0===h&&(h=null),0==(a&(En.Self|En.Host))){const d=c[9],f=wl(void 0);try{return d?d.get(l,h,a&En.Optional):e4(l,h,a&En.Optional)}finally{wl(f)}}return I4(h,0,a)}function P4(c,l,a,h=En.Default,d){if(null!==c){if(1024&l[2]){const m=function hoe(c,l,a,h,d){let f=c,m=l;for(;null!==f&&null!==m&&1024&m[2]&&!(256&m[2]);){const g=L4(f,m,a,h|En.Self,eu);if(g!==eu)return g;let y=f.parent;if(!y){const v=m[21];if(v){const _=v.get(a,eu,h);if(_!==eu)return _}y=F4(m),m=m[15]}f=y}return d}(c,l,a,h,eu);if(m!==eu)return m}const f=L4(c,l,a,h,eu);if(f!==eu)return f}return R4(l,a,h,d)}function L4(c,l,a,h,d){const f=function coe(c){if("string"==typeof c)return c.charCodeAt(0)||0;const l=c.hasOwnProperty(Q_)?c[Q_]:void 0;return"number"==typeof l?l>=0?255&l:uoe:l}(a);if("function"==typeof f){if(!v4(l,c,h))return h&En.Host?I4(d,0,h):R4(l,a,h,d);try{const m=f(h);if(null!=m||h&En.Optional)return m;k1()}finally{T4()}}else if("number"==typeof f){let m=null,g=RI(c,l),y=-1,v=h&En.Host?l[16][6]:null;for((-1===g||h&En.SkipSelf)&&(y=-1===g?J1(c,l):l[g+8],-1!==y&&N4(h,!1)?(m=l[1],g=_g(y),l=Sg(y,l)):g=-1);-1!==g;){const _=l[1];if(O4(f,g,_.data)){const S=loe(g,l,a,m,h,v);if(S!==eu)return S}y=l[g+8],-1!==y&&N4(h,l[1].data[g+8]===v)&&O4(f,g,l)?(m=_,g=_g(y),l=Sg(y,l)):g=-1}}return d}function loe(c,l,a,h,d,f){const m=l[1],g=m.data[c+8],_=tw(g,m,a,null==h?H1(g)&&AI:h!=m&&0!=(3&g.type),d&En.Host&&f===g);return null!==_?a0(l,m,_,g):eu}function tw(c,l,a,h,d){const f=c.providerIndexes,m=l.data,g=1048575&f,y=c.directiveStart,_=f>>20,b=d?g+_:c.directiveEnd;for(let T=h?g:g+_;T<b;T++){const x=m[T];if(T<y&&a===x||T>=y&&x.type===a)return T}if(d){const T=m[y];if(T&&sc(T)&&T.type===a)return y}return null}function a0(c,l,a,h){let d=c[a];const f=l.data;if(function eoe(c){return c instanceof r0}(d)){const m=d;m.resolving&&function ose(c,l){const a=l?`. Dependency path: ${l.join(" > ")} > ${c}`:"";throw new it(-200,`Circular dependency in DI detected for ${c}${a}`)}(function Vr(c){return"function"==typeof c?c.name||c.toString():"object"==typeof c&&null!=c&&"function"==typeof c.type?c.type.name||c.type.toString():Hn(c)}(f[a]));const g=Q1(m.canSeeViewProviders);m.resolving=!0;const y=m.injectImpl?wl(m.injectImpl):null;v4(c,h,En.Default);try{d=c[a]=m.factory(void 0,f,c,h),l.firstCreatePass&&a>=h.directiveStart&&function Qse(c,l,a){const{ngOnChanges:h,ngOnInit:d,ngDoCheck:f}=l.type.prototype;if(h){const m=a4(l);(a.preOrderHooks||(a.preOrderHooks=[])).push(c,m),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(c,m)}d&&(a.preOrderHooks||(a.preOrderHooks=[])).push(0-c,d),f&&((a.preOrderHooks||(a.preOrderHooks=[])).push(c,f),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(c,f))}(a,f[a],l)}finally{null!==y&&wl(y),Q1(g),m.resolving=!1,T4()}}return d}function O4(c,l,a){return!!(a[l+(c>>5)]&1<<c)}function N4(c,l){return!(c&En.Self||c&En.Host&&l)}class bg{constructor(l,a){this._tNode=l,this._lView=a}get(l,a,h){return P4(this._tNode,this._lView,l,h,a)}}function uoe(){return new bg(Os(),ot())}function Ri(c){return gd(()=>{const l=c.prototype.constructor,a=l[eh]||PI(l),h=Object.prototype;let d=Object.getPrototypeOf(c.prototype).constructor;for(;d&&d!==h;){const f=d[eh]||PI(d);if(f&&f!==a)return f;d=Object.getPrototypeOf(d)}return f=>new f})}function PI(c){return iI(c)?()=>{const l=PI(On(c));return l&&l()}:_p(c)}function F4(c){const l=c[1],a=l.type;return 2===a?l.declTNode:1===a?c[6]:null}function Tg(c){return function aoe(c,l){if("class"===l)return c.classes;if("style"===l)return c.styles;const a=c.attrs;if(a){const h=a.length;let d=0;for(;d<h;){const f=a[d];if(C4(f))break;if(0===f)d+=2;else if("number"==typeof f)for(d++;d<h&&"string"==typeof a[d];)d++;else{if(f===l)return a[d+1];d+=2}}}return null}(Os(),c)}const Cg="__parameters__";function Eg(c,l,a){return gd(()=>{const h=function LI(c){return function(...a){if(c){const h=c(...a);for(const d in h)this[d]=h[d]}}}(l);function d(...f){if(this instanceof d)return h.apply(this,f),this;const m=new d(...f);return g.annotation=m,g;function g(y,v,_){const S=y.hasOwnProperty(Cg)?y[Cg]:Object.defineProperty(y,Cg,{value:[]})[Cg];for(;S.length<=_;)S.push(null);return(S[_]=S[_]||[]).push(m),y}}return a&&(d.prototype=Object.create(a.prototype)),d.prototype.ngMetadataName=c,d.annotationCls=d,d})}class Vt{constructor(l,a){this._desc=l,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof a?this.__NG_ELEMENT_ID__=a:void 0!==a&&(this.\u0275prov=Oe({token:this,providedIn:a.providedIn||"root",factory:a.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const nw=Function;function Ha(c,l){void 0===l&&(l=c);for(let a=0;a<c.length;a++){let h=c[a];Array.isArray(h)?(l===c&&(l=c.slice(0,a)),Ha(h,l)):l!==c&&l.push(h)}return l}function rh(c,l){c.forEach(a=>Array.isArray(a)?rh(a,l):l(a))}function V4(c,l,a){l>=c.length?c.push(a):c.splice(l,0,a)}function rw(c,l){return l>=c.length-1?c.pop():c.splice(l,1)[0]}function u0(c,l){const a=[];for(let h=0;h<c;h++)a.push(l);return a}function ja(c,l,a){let h=Mg(c,l);return h>=0?c[1|h]=a:(h=~h,function moe(c,l,a,h){let d=c.length;if(d==l)c.push(a,h);else if(1===d)c.push(h,c[0]),c[0]=a;else{for(d--,c.push(c[d-1],c[d]);d>l;)c[d]=c[d-2],d--;c[l]=a,c[l+1]=h}}(c,h,l,a)),h}function OI(c,l){const a=Mg(c,l);if(a>=0)return c[1|a]}function Mg(c,l){return function G4(c,l,a){let h=0,d=c.length>>a;for(;d!==h;){const f=h+(d-h>>1),m=c[f<<a];if(l===m)return f<<a;m>l?d=f:h=f+1}return~(d<<a)}(c,l,1)}const h0={},FI="__NG_DI_FLAG__",sw="ngTempTokenPath",woe=/\n/gm,z4="__source";let d0;function Dg(c){const l=d0;return d0=c,l}function xoe(c,l=En.Default){if(void 0===d0)throw new it(-203,!1);return null===d0?e4(c,void 0,l):d0.get(c,l&En.Optional?null:void 0,l)}function Ae(c,l=En.Default){return(function pse(){return aI}()||xoe)(On(c),l)}function Zi(c,l=En.Default){return"number"!=typeof l&&(l=0|(l.optional&&8)|(l.host&&1)|(l.self&&2)|(l.skipSelf&&4)),Ae(c,l)}function kI(c){const l=[];for(let a=0;a<c.length;a++){const h=On(c[a]);if(Array.isArray(h)){if(0===h.length)throw new it(900,!1);let d,f=En.Default;for(let m=0;m<h.length;m++){const g=h[m],y=Eoe(g);"number"==typeof y?-1===y?d=g.token:f|=y:d=g}l.push(Ae(d,f))}else l.push(Ae(h))}return l}function f0(c,l){return c[FI]=l,c.prototype[FI]=l,c}function Eoe(c){return c[FI]}const Sd=f0(Eg("Optional"),8),bd=f0(Eg("SkipSelf"),4);let BI,lw,cw;function Ig(c){return function UI(){if(void 0===lw&&(lw=null,si.trustedTypes))try{lw=si.trustedTypes.createPolicy("angular",{createHTML:c=>c,createScript:c=>c,createScriptURL:c=>c})}catch{}return lw}()?.createHTML(c)||c}function Q4(c){return function GI(){if(void 0===cw&&(cw=null,si.trustedTypes))try{cw=si.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:c=>c,createScript:c=>c,createScriptURL:c=>c})}catch{}return cw}()?.createHTML(c)||c}class t5{constructor(l){this.changingThisBreaksApplicationSecurity=l}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function Td(c){return c instanceof t5?c.changingThisBreaksApplicationSecurity:c}function g0(c,l){const a=function Xoe(c){return c instanceof t5&&c.getTypeName()||null}(c);if(null!=a&&a!==l){if("ResourceURL"===a&&"URL"===l)return!0;throw new Error(`Required a safe ${l}, got a ${a} (see https://g.co/ng/security#xss)`)}return a===l}class qoe{constructor(l){this.inertDocumentHelper=l}getInertBodyElement(l){l="<body><remove></remove>"+l;try{const a=(new window.DOMParser).parseFromString(Ig(l),"text/html").body;return null===a?this.inertDocumentHelper.getInertBodyElement(l):(a.removeChild(a.firstChild),a)}catch{return null}}}class $oe{constructor(l){if(this.defaultDoc=l,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const a=this.inertDocument.createElement("html");this.inertDocument.appendChild(a);const h=this.inertDocument.createElement("body");a.appendChild(h)}}getInertBodyElement(l){const a=this.inertDocument.createElement("template");if("content"in a)return a.innerHTML=Ig(l),a;const h=this.inertDocument.createElement("body");return h.innerHTML=Ig(l),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(h),h}stripCustomNsAttrs(l){const a=l.attributes;for(let d=a.length-1;0<d;d--){const m=a.item(d).name;("xmlns:ns1"===m||0===m.indexOf("ns1:"))&&l.removeAttribute(m)}let h=l.firstChild;for(;h;)h.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(h),h=h.nextSibling}}const Zoe=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,Koe=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function uw(c){return(c=String(c)).match(Zoe)||c.match(Koe)?c:"unsafe:"+c}function r5(c){return(c=String(c)).split(",").map(l=>uw(l.trim())).join(", ")}function tu(c){const l={};for(const a of c.split(","))l[a]=!0;return l}function y0(...c){const l={};for(const a of c)for(const h in a)a.hasOwnProperty(h)&&(l[h]=!0);return l}const s5=tu("area,br,col,hr,img,wbr"),o5=tu("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),a5=tu("rp,rt"),zI=y0(s5,y0(o5,tu("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),y0(a5,tu("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),y0(a5,o5)),HI=tu("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),jI=tu("srcset"),l5=y0(HI,jI,tu("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),tu("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),Qoe=tu("script,style,template");class Joe{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(l){let a=l.firstChild,h=!0;for(;a;)if(a.nodeType===Node.ELEMENT_NODE?h=this.startElement(a):a.nodeType===Node.TEXT_NODE?this.chars(a.nodeValue):this.sanitizedSomething=!0,h&&a.firstChild)a=a.firstChild;else for(;a;){a.nodeType===Node.ELEMENT_NODE&&this.endElement(a);let d=this.checkClobberedElement(a,a.nextSibling);if(d){a=d;break}a=this.checkClobberedElement(a,a.parentNode)}return this.buf.join("")}startElement(l){const a=l.nodeName.toLowerCase();if(!zI.hasOwnProperty(a))return this.sanitizedSomething=!0,!Qoe.hasOwnProperty(a);this.buf.push("<"),this.buf.push(a);const h=l.attributes;for(let d=0;d<h.length;d++){const f=h.item(d),m=f.name,g=m.toLowerCase();if(!l5.hasOwnProperty(g)){this.sanitizedSomething=!0;continue}let y=f.value;HI[g]&&(y=uw(y)),jI[g]&&(y=r5(y)),this.buf.push(" ",m,'="',c5(y),'"')}return this.buf.push(">"),!0}endElement(l){const a=l.nodeName.toLowerCase();zI.hasOwnProperty(a)&&!s5.hasOwnProperty(a)&&(this.buf.push("</"),this.buf.push(a),this.buf.push(">"))}chars(l){this.buf.push(c5(l))}checkClobberedElement(l,a){if(a&&(l.compareDocumentPosition(a)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${l.outerHTML}`);return a}}const eae=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,tae=/([^\#-~ |!])/g;function c5(c){return c.replace(/&/g,"&amp;").replace(eae,function(l){return"&#"+(1024*(l.charCodeAt(0)-55296)+(l.charCodeAt(1)-56320)+65536)+";"}).replace(tae,function(l){return"&#"+l.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let hw;function WI(c){return"content"in c&&function rae(c){return c.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===c.nodeName}(c)?c.content:null}var _s=(()=>((_s=_s||{})[_s.NONE=0]="NONE",_s[_s.HTML=1]="HTML",_s[_s.STYLE=2]="STYLE",_s[_s.SCRIPT=3]="SCRIPT",_s[_s.URL=4]="URL",_s[_s.RESOURCE_URL=5]="RESOURCE_URL",_s))();function dw(c){const l=v0();return l?Q4(l.sanitize(_s.HTML,c)||""):g0(c,"HTML")?Q4(Td(c)):function nae(c,l){let a=null;try{hw=hw||function n5(c){const l=new $oe(c);return function Yoe(){try{return!!(new window.DOMParser).parseFromString(Ig(""),"text/html")}catch{return!1}}()?new qoe(l):l}(c);let h=l?String(l):"";a=hw.getInertBodyElement(h);let d=5,f=h;do{if(0===d)throw new Error("Failed to sanitize html because the input is unstable");d--,h=f,f=a.innerHTML,a=hw.getInertBodyElement(h)}while(h!==f);return Ig((new Joe).sanitizeChildren(WI(a)||a))}finally{if(a){const h=WI(a)||a;for(;h.firstChild;)h.removeChild(h.firstChild)}}}(function K4(){return void 0!==BI?BI:typeof document<"u"?document:void 0}(),Hn(c))}function Wa(c){const l=v0();return l?l.sanitize(_s.URL,c)||"":g0(c,"URL")?Td(c):uw(Hn(c))}function v0(){const c=ot();return c&&c[12]}const XI=new Vt("ENVIRONMENT_INITIALIZER"),h5=new Vt("INJECTOR",-1),d5=new Vt("INJECTOR_DEF_TYPES");class f5{get(l,a=h0){if(a===h0){const h=new Error(`NullInjectorError: No provider for ${ci(l)}!`);throw h.name="NullInjectorError",h}return a}}function uae(...c){return{\u0275providers:p5(0,c)}}function p5(c,...l){const a=[],h=new Set;let d;return rh(l,f=>{const m=f;qI(m,a,[],h)&&(d||(d=[]),d.push(m))}),void 0!==d&&m5(d,a),a}function m5(c,l){for(let a=0;a<c.length;a++){const{providers:d}=c[a];rh(d,f=>{l.push(f)})}}function qI(c,l,a,h){if(!(c=On(c)))return!1;let d=null,f=QB(c);const m=!f&&ei(c);if(f||m){if(m&&!m.standalone)return!1;d=c}else{const y=c.ngModule;if(f=QB(y),!f)return!1;d=y}const g=h.has(d);if(m){if(g)return!1;if(h.add(d),m.dependencies){const y="function"==typeof m.dependencies?m.dependencies():m.dependencies;for(const v of y)qI(v,l,a,h)}}else{if(!f)return!1;{if(null!=f.imports&&!g){let v;h.add(d);try{rh(f.imports,_=>{qI(_,l,a,h)&&(v||(v=[]),v.push(_))})}finally{}void 0!==v&&m5(v,l)}if(!g){const v=_p(d)||(()=>new d);l.push({provide:d,useFactory:v,deps:Br},{provide:d5,useValue:d,multi:!0},{provide:XI,useValue:()=>Ae(d),multi:!0})}const y=f.providers;null==y||g||rh(y,_=>{l.push(_)})}}return d!==c&&void 0!==c.providers}const hae=li({provide:String,useValue:li});function $I(c){return null!==c&&"object"==typeof c&&hae in c}function Sp(c){return"function"==typeof c}const YI=new Vt("Set Injector scope."),fw={},fae={};let ZI;function pw(){return void 0===ZI&&(ZI=new f5),ZI}class wd{}class v5 extends wd{constructor(l,a,h,d){super(),this.parent=a,this.source=h,this.scopes=d,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,QI(l,m=>this.processProvider(m)),this.records.set(h5,Rg(void 0,this)),d.has("environment")&&this.records.set(wd,Rg(void 0,this));const f=this.records.get(YI);null!=f&&"string"==typeof f.value&&this.scopes.add(f.value),this.injectorDefTypes=new Set(this.get(d5.multi,Br,En.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const l of this._ngOnDestroyHooks)l.ngOnDestroy();for(const l of this._onDestroyHooks)l()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(l){this._onDestroyHooks.push(l)}runInContext(l){this.assertNotDestroyed();const a=Dg(this),h=wl(void 0);try{return l()}finally{Dg(a),wl(h)}}get(l,a=h0,h=En.Default){this.assertNotDestroyed();const d=Dg(this),f=wl(void 0);try{if(!(h&En.SkipSelf)){let g=this.records.get(l);if(void 0===g){const y=function vae(c){return"function"==typeof c||"object"==typeof c&&c instanceof Vt}(l)&&sI(l);g=y&&this.injectableDefInScope(y)?Rg(KI(l),fw):null,this.records.set(l,g)}if(null!=g)return this.hydrate(l,g)}return(h&En.Self?pw():this.parent).get(l,a=h&En.Optional&&a===h0?null:a)}catch(m){if("NullInjectorError"===m.name){if((m[sw]=m[sw]||[]).unshift(ci(l)),d)throw m;return function Moe(c,l,a,h){const d=c[sw];throw l[z4]&&d.unshift(l[z4]),c.message=function Doe(c,l,a,h=null){c=c&&"\n"===c.charAt(0)&&"\u0275"==c.charAt(1)?c.slice(2):c;let d=ci(l);if(Array.isArray(l))d=l.map(ci).join(" -> ");else if("object"==typeof l){let f=[];for(let m in l)if(l.hasOwnProperty(m)){let g=l[m];f.push(m+":"+("string"==typeof g?JSON.stringify(g):ci(g)))}d=`{${f.join(", ")}}`}return`${a}${h?"("+h+")":""}[${d}]: ${c.replace(woe,"\n  ")}`}("\n"+c.message,d,a,h),c.ngTokenPath=d,c[sw]=null,c}(m,l,"R3InjectorError",this.source)}throw m}finally{wl(f),Dg(d)}}resolveInjectorInitializers(){const l=Dg(this),a=wl(void 0);try{const h=this.get(XI.multi,Br,En.Self);for(const d of h)d()}finally{Dg(l),wl(a)}}toString(){const l=[],a=this.records;for(const h of a.keys())l.push(ci(h));return`R3Injector[${l.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new it(205,!1)}processProvider(l){let a=Sp(l=On(l))?l:On(l&&l.provide);const h=function mae(c){return $I(c)?Rg(void 0,c.useValue):Rg(_5(c),fw)}(l);if(Sp(l)||!0!==l.multi)this.records.get(a);else{let d=this.records.get(a);d||(d=Rg(void 0,fw,!0),d.factory=()=>kI(d.multi),this.records.set(a,d)),a=l,d.multi.push(l)}this.records.set(a,h)}hydrate(l,a){return a.value===fw&&(a.value=fae,a.value=a.factory()),"object"==typeof a.value&&a.value&&function yae(c){return null!==c&&"object"==typeof c&&"function"==typeof c.ngOnDestroy}(a.value)&&this._ngOnDestroyHooks.add(a.value),a.value}injectableDefInScope(l){if(!l.providedIn)return!1;const a=On(l.providedIn);return"string"==typeof a?"any"===a||this.scopes.has(a):this.injectorDefTypes.has(a)}}function KI(c){const l=sI(c),a=null!==l?l.factory:_p(c);if(null!==a)return a;if(c instanceof Vt)throw new it(204,!1);if(c instanceof Function)return function pae(c){const l=c.length;if(l>0)throw u0(l,"?"),new it(204,!1);const a=function hse(c){const l=c&&(c[V1]||c[JB]);if(l){const a=function dse(c){if(c.hasOwnProperty("name"))return c.name;const l=(""+c).match(/^function\s*([^\s(]+)/);return null===l?"":l[1]}(c);return console.warn(`DEPRECATED: DI is instantiating a token "${a}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${a}" class.`),l}return null}(c);return null!==a?()=>a.factory(c):()=>new c}(c);throw new it(204,!1)}function _5(c,l,a){let h;if(Sp(c)){const d=On(c);return _p(d)||KI(d)}if($I(c))h=()=>On(c.useValue);else if(function y5(c){return!(!c||!c.useFactory)}(c))h=()=>c.useFactory(...kI(c.deps||[]));else if(function g5(c){return!(!c||!c.useExisting)}(c))h=()=>Ae(On(c.useExisting));else{const d=On(c&&(c.useClass||c.provide));if(!function gae(c){return!!c.deps}(c))return _p(d)||KI(d);h=()=>new d(...kI(c.deps))}return h}function Rg(c,l,a=!1){return{factory:c,value:l,multi:a?[]:void 0}}function _ae(c){return!!c.\u0275providers}function QI(c,l){for(const a of c)Array.isArray(a)?QI(a,l):_ae(a)?QI(a.\u0275providers,l):l(a)}class S5{}class Tae{resolveComponentFactory(l){throw function bae(c){const l=Error(`No component factory found for ${ci(c)}. Did you add it to @NgModule.entryComponents?`);return l.ngComponent=c,l}(l)}}let nu=(()=>{class c{}return c.NULL=new Tae,c})();function wae(){return Pg(Os(),ot())}function Pg(c,l){return new zt(El(c,l))}let zt=(()=>{class c{constructor(a){this.nativeElement=a}}return c.__NG_ELEMENT_ID__=wae,c})();function Cae(c){return c instanceof zt?c.nativeElement:c}class Lg{}let Fn=(()=>{class c{}return c.__NG_ELEMENT_ID__=()=>function xae(){const c=ot(),a=za(Os().index,c);return(_a(a)?a:c)[11]}(),c})(),Eae=(()=>{class c{}return c.\u0275prov=Oe({token:c,providedIn:"root",factory:()=>null}),c})();class _0{constructor(l){this.full=l,this.major=l.split(".")[0],this.minor=l.split(".")[1],this.patch=l.split(".").slice(2).join(".")}}const Mae=new _0("14.1.1"),JI={};function iR(c){return c.ngOriginalError}class Og{constructor(){this._console=console}handleError(l){const a=this._findOriginalError(l);this._console.error("ERROR",l),a&&this._console.error("ORIGINAL ERROR",a)}_findOriginalError(l){let a=l&&iR(l);for(;a&&iR(a);)a=iR(a);return a||null}}const sR=new Map;let Bae=0;const aR="__ngContext__";function Co(c,l){_a(l)?(c[aR]=l[20],function Gae(c){sR.set(c[20],c)}(l)):c[aR]=l}function S0(c){const l=c[aR];return"number"==typeof l?function M5(c){return sR.get(c)||null}(l):l||null}function lR(c){const l=S0(c);return l?_a(l)?l:l.lView:null}const Zae=(()=>(typeof requestAnimationFrame<"u"&&requestAnimationFrame||setTimeout).bind(si))();function cR(c){return c.ownerDocument.defaultView}function b0(c){return c.ownerDocument}function ih(c){return c instanceof Function?c():c}var Sa=(()=>((Sa=Sa||{})[Sa.Important=1]="Important",Sa[Sa.DashCase=2]="DashCase",Sa))();function hR(c,l){return undefined(c,l)}function T0(c){const l=c[3];return ic(l)?l[3]:l}function dR(c){return F5(c[13])}function fR(c){return F5(c[4])}function F5(c){for(;null!==c&&!ic(c);)c=c[4];return c}function Fg(c,l,a,h,d){if(null!=h){let f,m=!1;ic(h)?f=h:_a(h)&&(m=!0,h=h[0]);const g=vs(h);0===c&&null!==a?null==d?z5(l,a,g):bp(l,a,g,d||null,!0):1===c&&null!==a?bp(l,a,g,d||null,!0):2===c?function Y5(c,l,a){const h=mw(c,l);h&&function hle(c,l,a,h){c.removeChild(l,a,h)}(c,h,l,a)}(l,g,m):3===c&&l.destroyNode(g),null!=f&&function ple(c,l,a,h,d){const f=a[7];f!==vs(a)&&Fg(l,c,h,f,d);for(let g=10;g<a.length;g++){const y=a[g];w0(y[1],y,c,l,h,f)}}(l,c,f,a,d)}}function mR(c,l,a){return c.createElement(l,a)}function V5(c,l){const a=c[9],h=a.indexOf(l),d=l[3];512&l[2]&&(l[2]&=-513,_I(d,-1)),a.splice(h,1)}function gR(c,l){if(c.length<=10)return;const a=10+l,h=c[a];if(h){const d=h[17];null!==d&&d!==c&&V5(d,h),l>0&&(c[a-1][4]=h[4]);const f=rw(c,10+l);!function rle(c,l){w0(c,l,l[11],2,null,null),l[0]=null,l[6]=null}(h[1],h);const m=f[19];null!==m&&m.detachView(f[1]),h[3]=null,h[4]=null,h[2]&=-65}return h}function B5(c,l){if(!(128&l[2])){const a=l[11];a.destroyNode&&w0(c,l,a,3,null,null),function ole(c){let l=c[13];if(!l)return yR(c[1],c);for(;l;){let a=null;if(_a(l))a=l[13];else{const h=l[10];h&&(a=h)}if(!a){for(;l&&!l[4]&&l!==c;)_a(l)&&yR(l[1],l),l=l[3];null===l&&(l=c),_a(l)&&yR(l[1],l),a=l&&l[4]}l=a}}(l)}}function yR(c,l){if(!(128&l[2])){l[2]&=-65,l[2]|=128,function ule(c,l){let a;if(null!=c&&null!=(a=c.destroyHooks))for(let h=0;h<a.length;h+=2){const d=l[a[h]];if(!(d instanceof r0)){const f=a[h+1];if(Array.isArray(f))for(let m=0;m<f.length;m+=2){const g=d[f[m]],y=f[m+1];try{y.call(g)}finally{}}else try{f.call(d)}finally{}}}}(c,l),function cle(c,l){const a=c.cleanup,h=l[7];let d=-1;if(null!==a)for(let f=0;f<a.length-1;f+=2)if("string"==typeof a[f]){const m=a[f+1],g="function"==typeof m?m(l):vs(l[m]),y=h[d=a[f+2]],v=a[f+3];"boolean"==typeof v?g.removeEventListener(a[f],y,v):v>=0?h[d=v]():h[d=-v].unsubscribe(),f+=2}else{const m=h[d=a[f+1]];a[f].call(m)}if(null!==h){for(let f=d+1;f<h.length;f++)(0,h[f])();l[7]=null}}(c,l),1===l[1].type&&l[11].destroy();const a=l[17];if(null!==a&&ic(l[3])){a!==l[3]&&V5(a,l);const h=l[19];null!==h&&h.detachView(c)}!function zae(c){sR.delete(c[20])}(l)}}function U5(c,l,a){return function G5(c,l,a){let h=l;for(;null!==h&&40&h.type;)h=(l=h).parent;if(null===h)return a[0];if(2&h.flags){const d=c.data[h.directiveStart].encapsulation;if(d===nc.None||d===nc.Emulated)return null}return El(h,a)}(c,l.parent,a)}function bp(c,l,a,h,d){c.insertBefore(l,a,h,d)}function z5(c,l,a){c.appendChild(l,a)}function H5(c,l,a,h,d){null!==h?bp(c,l,a,h,d):z5(c,l,a)}function mw(c,l){return c.parentNode(l)}function j5(c,l,a){return X5(c,l,a)}let X5=function W5(c,l,a){return 40&c.type?El(c,a):null};function gw(c,l,a,h){const d=U5(c,h,l),f=l[11],g=j5(h.parent||l[6],h,l);if(null!=d)if(Array.isArray(a))for(let y=0;y<a.length;y++)H5(f,d,a[y],g,!1);else H5(f,d,a,g,!1)}function yw(c,l){if(null!==l){const a=l.type;if(3&a)return El(l,c);if(4&a)return _R(-1,c[l.index]);if(8&a){const h=l.child;if(null!==h)return yw(c,h);{const d=c[l.index];return ic(d)?_R(-1,d):vs(d)}}if(32&a)return hR(l,c)()||vs(c[l.index]);{const h=$5(c,l);return null!==h?Array.isArray(h)?h[0]:yw(T0(c[16]),h):yw(c,l.next)}}return null}function $5(c,l){return null!==l?c[16][6].projection[l.projection]:null}function _R(c,l){const a=10+c+1;if(a<l.length){const h=l[a],d=h[1].firstChild;if(null!==d)return yw(h,d)}return l[7]}function SR(c,l,a,h,d,f,m){for(;null!=a;){const g=h[a.index],y=a.type;if(m&&0===l&&(g&&Co(vs(g),h),a.flags|=4),64!=(64&a.flags))if(8&y)SR(c,l,a.child,h,d,f,!1),Fg(l,c,d,g,f);else if(32&y){const v=hR(a,h);let _;for(;_=v();)Fg(l,c,d,_,f);Fg(l,c,d,g,f)}else 16&y?Z5(c,l,h,a,d,f):Fg(l,c,d,g,f);a=m?a.projectionNext:a.next}}function w0(c,l,a,h,d,f){SR(a,h,c.firstChild,l,d,f,!1)}function Z5(c,l,a,h,d,f){const m=a[16],y=m[6].projection[h.projection];if(Array.isArray(y))for(let v=0;v<y.length;v++)Fg(l,c,d,y[v],f);else SR(c,l,y,m[3],d,f,!0)}function K5(c,l,a){c.setAttribute(l,"style",a)}function bR(c,l,a){""===a?c.removeAttribute(l,"class"):c.setAttribute(l,"class",a)}function Q5(c,l,a){let h=c.length;for(;;){const d=c.indexOf(l,a);if(-1===d)return d;if(0===d||c.charCodeAt(d-1)<=32){const f=l.length;if(d+f===h||c.charCodeAt(d+f)<=32)return d}a=d+1}}const J5="ng-template";function gle(c,l,a){let h=0;for(;h<c.length;){let d=c[h++];if(a&&"class"===d){if(d=c[h],-1!==Q5(d.toLowerCase(),l,0))return!0}else if(1===d){for(;h<c.length&&"string"==typeof(d=c[h++]);)if(d.toLowerCase()===l)return!0;return!1}}return!1}function eU(c){return 4===c.type&&c.value!==J5}function yle(c,l,a){return l===(4!==c.type||a?c.value:J5)}function vle(c,l,a){let h=4;const d=c.attrs||[],f=function ble(c){for(let l=0;l<c.length;l++)if(C4(c[l]))return l;return c.length}(d);let m=!1;for(let g=0;g<l.length;g++){const y=l[g];if("number"!=typeof y){if(!m)if(4&h){if(h=2|1&h,""!==y&&!yle(c,y,a)||""===y&&1===l.length){if(oc(h))return!1;m=!0}}else{const v=8&h?y:l[++g];if(8&h&&null!==c.attrs){if(!gle(c.attrs,v,a)){if(oc(h))return!1;m=!0}continue}const S=_le(8&h?"class":y,d,eU(c),a);if(-1===S){if(oc(h))return!1;m=!0;continue}if(""!==v){let b;b=S>f?"":d[S+1].toLowerCase();const T=8&h?b:null;if(T&&-1!==Q5(T,v,0)||2&h&&v!==b){if(oc(h))return!1;m=!0}}}}else{if(!m&&!oc(h)&&!oc(y))return!1;if(m&&oc(y))continue;m=!1,h=y|1&h}}return oc(h)||m}function oc(c){return 0==(1&c)}function _le(c,l,a,h){if(null===l)return-1;let d=0;if(h||!a){let f=!1;for(;d<l.length;){const m=l[d];if(m===c)return d;if(3===m||6===m)f=!0;else{if(1===m||2===m){let g=l[++d];for(;"string"==typeof g;)g=l[++d];continue}if(4===m)break;if(0===m){d+=4;continue}}d+=f?1:2}return-1}return function Tle(c,l){let a=c.indexOf(4);if(a>-1)for(a++;a<c.length;){const h=c[a];if("number"==typeof h)return-1;if(h===l)return a;a++}return-1}(l,c)}function tU(c,l,a=!1){for(let h=0;h<l.length;h++)if(vle(c,l[h],a))return!0;return!1}function wle(c,l){e:for(let a=0;a<l.length;a++){const h=l[a];if(c.length===h.length){for(let d=0;d<c.length;d++)if(c[d]!==h[d])continue e;return!0}}return!1}function nU(c,l){return c?":not("+l.trim()+")":l}function Cle(c){let l=c[0],a=1,h=2,d="",f=!1;for(;a<c.length;){let m=c[a];if("string"==typeof m)if(2&h){const g=c[++a];d+="["+m+(g.length>0?'="'+g+'"':"")+"]"}else 8&h?d+="."+m:4&h&&(d+=" "+m);else""!==d&&!oc(m)&&(l+=nU(f,d),d=""),h=m,f=f||!oc(h);a++}return""!==d&&(l+=nU(f,d)),l}const jn={};function B(c){rU(Ir(),ot(),qo()+c,!1)}function rU(c,l,a,h){if(!h)if(3==(3&l[2])){const f=c.preOrderCheckHooks;null!==f&&$1(l,f,a)}else{const f=c.preOrderHooks;null!==f&&Y1(l,f,0,a)}vd(a)}function aU(c,l=null,a=null,h){const d=lU(c,l,a,h);return d.resolveInjectorInitializers(),d}function lU(c,l=null,a=null,h,d=new Set){const f=[a||Br,uae(c)];return h=h||("object"==typeof c?void 0:ci(c)),new v5(f,l||pw(),h||null,d)}let ti=(()=>{class c{static create(a,h){if(Array.isArray(a))return aU({name:""},h,a,"");{const d=a.name??"";return aU({name:d},a.parent,a.providers,d)}}}return c.THROW_IF_NOT_FOUND=h0,c.NULL=new f5,c.\u0275prov=Oe({token:c,providedIn:"any",factory:()=>Ae(h5)}),c.__NG_ELEMENT_ID__=-1,c})();function N(c,l=En.Default){const a=ot();return null===a?Ae(c,l):P4(Os(),a,On(c),l)}function _w(){throw new Error("invalid")}function Sw(c,l){return c<<17|l<<2}function ac(c){return c>>17&32767}function ER(c){return 2|c}function sh(c){return(131068&c)>>2}function MR(c,l){return-131069&c|l<<2}function DR(c){return 1|c}function xU(c,l){const a=c.contentQueries;if(null!==a)for(let h=0;h<a.length;h+=2){const d=a[h],f=a[h+1];if(-1!==f){const m=c.data[f];CI(d),m.contentQueries(2,l[f],f)}}}function ww(c,l,a,h,d,f,m,g,y,v,_){const S=l.blueprint.slice();return S[0]=d,S[2]=76|h,(null!==_||c&&1024&c[2])&&(S[2]|=1024),h4(S),S[3]=S[15]=c,S[8]=a,S[10]=m||c&&c[10],S[11]=g||c&&c[11],S[12]=y||c&&c[12]||null,S[9]=v||c&&c[9]||null,S[6]=f,S[20]=function Uae(){return Bae++}(),S[21]=_,S[16]=2==l.type?c[16]:S,S}function Vg(c,l,a,h,d){let f=c.data[l];if(null===f)f=function kR(c,l,a,h,d){const f=p4(),m=SI(),y=c.data[l]=function ace(c,l,a,h,d,f){return{type:a,index:h,insertBeforeIndex:null,injectorIndex:l?l.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:d,attrs:f,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:l,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,m?f:f&&f.parent,a,l,h,d);return null===c.firstChild&&(c.firstChild=y),null!==f&&(m?null==f.child&&null!==y.parent&&(f.child=y):null===f.next&&(f.next=y)),y}(c,l,a,h,d),function Gse(){return Gn.lFrame.inI18n}()&&(f.flags|=64);else if(64&f.type){f.type=a,f.value=h,f.attrs=d;const m=function n0(){const c=Gn.lFrame,l=c.currentTNode;return c.isParent?l:l.parent}();f.injectorIndex=null===m?-1:m.injectorIndex}return Jc(f,!0),f}function Bg(c,l,a,h){if(0===a)return-1;const d=l.length;for(let f=0;f<a;f++)l.push(h),c.blueprint.push(h),c.data.push(null);return d}function Cw(c,l,a){xI(l);try{const h=c.viewQuery;null!==h&&XR(1,h,a);const d=c.template;null!==d&&EU(c,l,d,1,a),c.firstCreatePass&&(c.firstCreatePass=!1),c.staticContentQueries&&xU(c,l),c.staticViewQueries&&XR(2,c.viewQuery,a);const f=c.components;null!==f&&function rce(c,l){for(let a=0;a<l.length;a++)wce(c,l[a])}(l,f)}catch(h){throw c.firstCreatePass&&(c.incompleteFirstPass=!0,c.firstCreatePass=!1),h}finally{l[2]&=-5,EI()}}function C0(c,l,a,h){const d=l[2];if(128!=(128&d)){xI(l);try{h4(l),function m4(c){return Gn.lFrame.bindingIndex=c}(c.bindingStartIndex),null!==a&&EU(c,l,a,2,h);const m=3==(3&d);if(m){const v=c.preOrderCheckHooks;null!==v&&$1(l,v,null)}else{const v=c.preOrderHooks;null!==v&&Y1(l,v,0,null),MI(l,0)}if(function bce(c){for(let l=dR(c);null!==l;l=fR(l)){if(!l[2])continue;const a=l[9];for(let h=0;h<a.length;h++){const d=a[h],f=d[3];0==(512&d[2])&&_I(f,1),d[2]|=512}}}(l),function Sce(c){for(let l=dR(c);null!==l;l=fR(l))for(let a=10;a<l.length;a++){const h=l[a],d=h[1];vI(h)&&C0(d,h,d.template,h[8])}}(l),null!==c.contentQueries&&xU(c,l),m){const v=c.contentCheckHooks;null!==v&&$1(l,v)}else{const v=c.contentHooks;null!==v&&Y1(l,v,1),MI(l,1)}!function tce(c,l){const a=c.hostBindingOpCodes;if(null!==a)try{for(let h=0;h<a.length;h++){const d=a[h];if(d<0)vd(~d);else{const f=d,m=a[++h],g=a[++h];zse(m,f),g(2,l[f])}}}finally{vd(-1)}}(c,l);const g=c.components;null!==g&&function nce(c,l){for(let a=0;a<l.length;a++)Tce(c,l[a])}(l,g);const y=c.viewQuery;if(null!==y&&XR(2,y,h),m){const v=c.viewCheckHooks;null!==v&&$1(l,v)}else{const v=c.viewHooks;null!==v&&Y1(l,v,2),MI(l,2)}!0===c.firstUpdatePass&&(c.firstUpdatePass=!1),l[2]&=-41,512&l[2]&&(l[2]&=-513,_I(l[3],-1))}finally{EI()}}}function ice(c,l,a,h){const d=l[10],m=u4(l);try{!m&&d.begin&&d.begin(),m&&Cw(c,l,h),C0(c,l,a,h)}finally{!m&&d.end&&d.end()}}function EU(c,l,a,h,d){const f=qo(),m=2&h;try{vd(-1),m&&l.length>22&&rU(c,l,22,!1),a(h,d)}finally{vd(f)}}function MU(c,l,a){if(dI(l)){const d=l.directiveEnd;for(let f=l.directiveStart;f<d;f++){const m=c.data[f];m.contentQueries&&m.contentQueries(1,a[f],f)}}}function VR(c,l,a){!f4()||(function dce(c,l,a,h){const d=a.directiveStart,f=a.directiveEnd;c.firstCreatePass||o0(a,l),Co(h,l);const m=a.initialInputs;for(let g=d;g<f;g++){const y=c.data[g],v=sc(y);v&&yce(l,a,y);const _=a0(l,c,g,a);Co(_,l),null!==m&&vce(0,g-d,_,y,0,m),v&&(za(a.index,l)[8]=_)}}(c,l,a,El(a,l)),128==(128&a.flags)&&function fce(c,l,a){const h=a.directiveStart,d=a.directiveEnd,f=a.index,m=function Hse(){return Gn.lFrame.currentDirectiveIndex}();try{vd(f);for(let g=h;g<d;g++){const y=c.data[g],v=l[g];TI(g),(null!==y.hostBindings||0!==y.hostVars||null!==y.hostAttrs)&&OU(y,v)}}finally{vd(-1),TI(m)}}(c,l,a))}function BR(c,l,a=El){const h=l.localNames;if(null!==h){let d=l.index+1;for(let f=0;f<h.length;f+=2){const m=h[f+1],g=-1===m?a(l,c):c[m];c[d++]=g}}}function DU(c){const l=c.tView;return null===l||l.incompleteFirstPass?c.tView=UR(1,null,c.template,c.decls,c.vars,c.directiveDefs,c.pipeDefs,c.viewQuery,c.schemas,c.consts):l}function UR(c,l,a,h,d,f,m,g,y,v){const _=22+h,S=_+d,b=function sce(c,l){const a=[];for(let h=0;h<l;h++)a.push(h<c?null:jn);return a}(_,S),T="function"==typeof v?v():v;return b[1]={type:c,blueprint:b,template:a,queries:null,viewQuery:g,declTNode:l,data:b.slice().fill(null,_),bindingStartIndex:_,expandoStartIndex:S,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof f?f():f,pipeRegistry:"function"==typeof m?m():m,firstChild:null,schemas:y,consts:T,incompleteFirstPass:!1}}function AU(c,l,a,h){const d=GU(l);null===a?d.push(h):(d.push(a),c.firstCreatePass&&zU(c).push(h,d.length-1))}function IU(c,l,a){for(let h in c)if(c.hasOwnProperty(h)){const d=c[h];(a=null===a?{}:a).hasOwnProperty(h)?a[h].push(l,d):a[h]=[l,d]}return a}function RU(c,l){const h=l.directiveEnd,d=c.data,f=l.attrs,m=[];let g=null,y=null;for(let v=l.directiveStart;v<h;v++){const _=d[v],S=_.inputs,b=null===f||eU(l)?null:_ce(S,f);m.push(b),g=IU(S,v,g),y=IU(_.outputs,v,y)}null!==g&&(g.hasOwnProperty("class")&&(l.flags|=16),g.hasOwnProperty("style")&&(l.flags|=32)),l.initialInputs=m,l.inputs=g,l.outputs=y}function Xa(c,l,a,h,d,f,m,g){const y=El(l,a);let _,v=l.inputs;!g&&null!=v&&(_=v[h])?(qR(c,a,_,h,d),H1(l)&&PU(a,l.index)):3&l.type&&(h=function lce(c){return"class"===c?"className":"for"===c?"htmlFor":"formaction"===c?"formAction":"innerHtml"===c?"innerHTML":"readonly"===c?"readOnly":"tabindex"===c?"tabIndex":c}(h),d=null!=m?m(d,l.value||"",h):d,f.setProperty(y,h,d))}function PU(c,l){const a=za(l,c);16&a[2]||(a[2]|=32)}function GR(c,l,a,h){let d=!1;if(f4()){const f=function pce(c,l,a){const h=c.directiveRegistry;let d=null;if(h)for(let f=0;f<h.length;f++){const m=h[f];tU(a,m.selectors,!1)&&(d||(d=[]),ew(o0(a,l),c,m.type),sc(m)?(NU(c,a),d.unshift(m)):d.push(m))}return d}(c,l,a),m=null===h?null:{"":-1};if(null!==f){d=!0,FU(a,c.data.length,f.length);for(let _=0;_<f.length;_++){const S=f[_];S.providersResolver&&S.providersResolver(S)}let g=!1,y=!1,v=Bg(c,l,f.length,null);for(let _=0;_<f.length;_++){const S=f[_];a.mergedAttrs=K1(a.mergedAttrs,S.hostAttrs),kU(c,a,l,v,S),gce(v,S,m),null!==S.contentQueries&&(a.flags|=8),(null!==S.hostBindings||null!==S.hostAttrs||0!==S.hostVars)&&(a.flags|=128);const b=S.type.prototype;!g&&(b.ngOnChanges||b.ngOnInit||b.ngDoCheck)&&((c.preOrderHooks||(c.preOrderHooks=[])).push(a.index),g=!0),!y&&(b.ngOnChanges||b.ngDoCheck)&&((c.preOrderCheckHooks||(c.preOrderCheckHooks=[])).push(a.index),y=!0),v++}RU(c,a)}m&&function mce(c,l,a){if(l){const h=c.localNames=[];for(let d=0;d<l.length;d+=2){const f=a[l[d+1]];if(null==f)throw new it(-301,!1);h.push(l[d],f)}}}(a,h,m)}return a.mergedAttrs=K1(a.mergedAttrs,a.attrs),d}function LU(c,l,a,h,d,f){const m=f.hostBindings;if(m){let g=c.hostBindingOpCodes;null===g&&(g=c.hostBindingOpCodes=[]);const y=~l.index;(function hce(c){let l=c.length;for(;l>0;){const a=c[--l];if("number"==typeof a&&a<0)return a}return 0})(g)!=y&&g.push(y),g.push(h,d,m)}}function OU(c,l){null!==c.hostBindings&&c.hostBindings(1,l)}function NU(c,l){l.flags|=2,(c.components||(c.components=[])).push(l.index)}function gce(c,l,a){if(a){if(l.exportAs)for(let h=0;h<l.exportAs.length;h++)a[l.exportAs[h]]=c;sc(l)&&(a[""]=c)}}function FU(c,l,a){c.flags|=1,c.directiveStart=l,c.directiveEnd=l+a,c.providerIndexes=l}function kU(c,l,a,h,d){c.data[h]=d;const f=d.factory||(d.factory=_p(d.type)),m=new r0(f,sc(d),N);c.blueprint[h]=m,a[h]=m,LU(c,l,0,h,Bg(c,a,d.hostVars,jn),d)}function yce(c,l,a){const h=El(l,c),d=DU(a),f=c[10],m=xw(c,ww(c,d,null,a.onPush?32:16,h,l,f,f.createRenderer(h,a),null,null,null));c[l.index]=m}function ru(c,l,a,h,d,f){const m=El(c,l);!function zR(c,l,a,h,d,f,m){if(null==f)c.removeAttribute(l,d,a);else{const g=null==m?Hn(f):m(f,h||"",d);c.setAttribute(l,d,g,a)}}(l[11],m,f,c.value,a,h,d)}function vce(c,l,a,h,d,f){const m=f[l];if(null!==m){const g=h.setInput;for(let y=0;y<m.length;){const v=m[y++],_=m[y++],S=m[y++];null!==g?h.setInput(a,S,v,_):a[_]=S}}}function _ce(c,l){let a=null,h=0;for(;h<l.length;){const d=l[h];if(0!==d)if(5!==d){if("number"==typeof d)break;c.hasOwnProperty(d)&&(null===a&&(a=[]),a.push(d,c[d],l[h+1])),h+=2}else h+=2;else h+=4}return a}function VU(c,l,a,h){return new Array(c,!0,!1,l,null,0,h,a,null,null)}function Tce(c,l){const a=za(l,c);if(vI(a)){const h=a[1];48&a[2]?C0(h,a,h.template,a[8]):a[5]>0&&HR(a)}}function HR(c){for(let h=dR(c);null!==h;h=fR(h))for(let d=10;d<h.length;d++){const f=h[d];if(512&f[2]){const m=f[1];C0(m,f,m.template,f[8])}else f[5]>0&&HR(f)}const a=c[1].components;if(null!==a)for(let h=0;h<a.length;h++){const d=za(a[h],c);vI(d)&&d[5]>0&&HR(d)}}function wce(c,l){const a=za(l,c),h=a[1];(function Cce(c,l){for(let a=l.length;a<c.blueprint.length;a++)l.push(c.blueprint[a])})(h,a),Cw(h,a,a[8])}function xw(c,l){return c[13]?c[14][4]=l:c[13]=l,c[14]=l,l}function jR(c){for(;c;){c[2]|=32;const l=T0(c);if(Tse(c)&&!l)return c;c=l}return null}function UU(c){!function BU(c){for(let l=0;l<c.components.length;l++){const a=c.components[l],h=lR(a);if(null!==h){const d=h[1];ice(d,h,d.template,a)}}}(c[8])}function XR(c,l,a){CI(0),l(c,a)}const Ece=(()=>Promise.resolve(null))();function GU(c){return c[7]||(c[7]=[])}function zU(c){return c.cleanup||(c.cleanup=[])}function HU(c,l,a){return(null===c||sc(c))&&(a=function Pse(c){for(;Array.isArray(c);){if("object"==typeof c[1])return c;c=c[0]}return null}(a[l.index])),a[11]}function jU(c,l){const a=c[9],h=a?a.get(Og,null):null;h&&h.handleError(l)}function qR(c,l,a,h,d){for(let f=0;f<a.length;){const m=a[f++],g=a[f++],y=l[m],v=c.data[m];null!==v.setInput?v.setInput(y,d,h,g):y[g]=d}}function oh(c,l,a){const h=W1(l,c);!function k5(c,l,a){c.setValue(l,a)}(c[11],h,a)}function Ew(c,l,a){let h=a?c.styles:null,d=a?c.classes:null,f=0;if(null!==l)for(let m=0;m<l.length;m++){const g=l[m];"number"==typeof g?f=g:1==f?d=rI(d,g):2==f&&(h=rI(h,g+": "+l[++m]+";"))}a?c.styles=h:c.stylesWithoutHost=h,a?c.classes=d:c.classesWithoutHost=d}function Mw(c,l,a,h,d=!1){for(;null!==a;){const f=l[a.index];if(null!==f&&h.push(vs(f)),ic(f))for(let g=10;g<f.length;g++){const y=f[g],v=y[1].firstChild;null!==v&&Mw(y[1],y,v,h)}const m=a.type;if(8&m)Mw(c,l,a.child,h);else if(32&m){const g=hR(a,l);let y;for(;y=g();)h.push(y)}else if(16&m){const g=$5(l,a);if(Array.isArray(g))h.push(...g);else{const y=T0(l[16]);Mw(y[1],y,g,h,!0)}}a=d?a.projectionNext:a.next}return h}class x0{constructor(l,a){this._lView=l,this._cdRefInjectingView=a,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const l=this._lView,a=l[1];return Mw(a,l,a.firstChild,[])}get context(){return this._lView[8]}set context(l){this._lView[8]=l}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const l=this._lView[3];if(ic(l)){const a=l[8],h=a?a.indexOf(this):-1;h>-1&&(gR(l,h),rw(a,h))}this._attachedToViewContainer=!1}B5(this._lView[1],this._lView)}onDestroy(l){AU(this._lView[1],this._lView,null,l)}markForCheck(){jR(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){!function WR(c,l,a){const h=l[10];h.begin&&h.begin();try{C0(c,l,c.template,a)}catch(d){throw jU(l,d),d}finally{h.end&&h.end()}}(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new it(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function sle(c,l){w0(c,l,l[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(l){if(this._attachedToViewContainer)throw new it(902,!1);this._appRef=l}}class Mce extends x0{constructor(l){super(l),this._view=l}detectChanges(){UU(this._view)}checkNoChanges(){}get context(){return null}}class $R extends nu{constructor(l){super(),this.ngModule=l}resolveComponentFactory(l){const a=ei(l);return new E0(a,this.ngModule)}}function WU(c){const l=[];for(let a in c)c.hasOwnProperty(a)&&l.push({propName:c[a],templateName:a});return l}class Ace{constructor(l,a){this.injector=l,this.parentInjector=a}get(l,a,h){const d=this.injector.get(l,JI,h);return d!==JI||a===JI?d:this.parentInjector.get(l,a,h)}}class E0 extends S5{constructor(l,a){super(),this.componentDef=l,this.ngModule=a,this.componentType=l.type,this.selector=function xle(c){return c.map(Cle).join(",")}(l.selectors),this.ngContentSelectors=l.ngContentSelectors?l.ngContentSelectors:[],this.isBoundToModule=!!a}get inputs(){return WU(this.componentDef.inputs)}get outputs(){return WU(this.componentDef.outputs)}create(l,a,h,d){let f=(d=d||this.ngModule)instanceof wd?d:d?.injector;f&&null!==this.componentDef.getStandaloneInjector&&(f=this.componentDef.getStandaloneInjector(f)||f);const m=f?new Ace(l,f):l,g=m.get(Lg,null);if(null===g)throw new it(407,!1);const y=m.get(Eae,null),v=g.createRenderer(null,this.componentDef),_=this.componentDef.selectors[0][0]||"div",S=h?function oce(c,l,a){return c.selectRootElement(l,a===nc.ShadowDom)}(v,h,this.componentDef.encapsulation):mR(g.createRenderer(null,this.componentDef),_,function Dce(c){const l=c.toLowerCase();return"svg"===l?"svg":"math"===l?"math":null}(_)),b=this.componentDef.onPush?288:272,T=function Oce(c,l){return{components:[],scheduler:c||Zae,clean:Ece,playerHandler:l||null,flags:0}}(),x=UR(0,null,null,1,0,null,null,null,null,null),E=ww(null,x,T,b,null,null,g,v,y,m,null);let D,I;xI(E);try{const M=function Pce(c,l,a,h,d,f){const m=a[1];a[22]=c;const y=Vg(m,22,2,"#host",null),v=y.mergedAttrs=l.hostAttrs;null!==v&&(Ew(y,v,!0),null!==c&&(Z1(d,c,v),null!==y.classes&&bR(d,c,y.classes),null!==y.styles&&K5(d,c,y.styles)));const _=h.createRenderer(c,l),S=ww(a,DU(l),null,l.onPush?32:16,a[22],y,h,_,f||null,null,null);return m.firstCreatePass&&(ew(o0(y,a),m,l.type),NU(m,y),FU(y,a.length,1)),xw(a,S),a[22]=S}(S,this.componentDef,E,g,v);if(S)if(h)Z1(v,S,["ng-version",Mae.full]);else{const{attrs:L,classes:P}=function Ele(c){const l=[],a=[];let h=1,d=2;for(;h<c.length;){let f=c[h];if("string"==typeof f)2===d?""!==f&&l.push(f,c[++h]):8===d&&a.push(f);else{if(!oc(d))break;d=f}h++}return{attrs:l,classes:a}}(this.componentDef.selectors[0]);L&&Z1(v,S,L),P&&P.length>0&&bR(v,S,P.join(" "))}if(I=yI(x,22),void 0!==a){const L=I.projection=[];for(let P=0;P<this.ngContentSelectors.length;P++){const F=a[P];L.push(null!=F?Array.from(F):null)}}D=function Lce(c,l,a,h,d){const f=a[1],m=function uce(c,l,a){const h=Os();c.firstCreatePass&&(a.providersResolver&&a.providersResolver(a),kU(c,h,l,Bg(c,l,1,null),a),RU(c,h));const d=a0(l,c,h.directiveStart,h);Co(d,l);const f=El(h,l);return f&&Co(f,l),d}(f,a,l);if(h.components.push(m),c[8]=m,null!==d)for(const y of d)y(m,l);if(l.contentQueries){const y=Os();l.contentQueries(1,m,y.directiveStart)}const g=Os();return!f.firstCreatePass||null===l.hostBindings&&null===l.hostAttrs||(vd(g.index),LU(a[1],g,0,g.directiveStart,g.directiveEnd,l),OU(l,m)),m}(M,this.componentDef,E,T,[Nce]),Cw(x,E,null)}finally{EI()}return new Rce(this.componentType,D,Pg(I,E),E,I)}}class Rce extends class Sae{}{constructor(l,a,h,d,f){super(),this.location=h,this._rootLView=d,this._tNode=f,this.instance=a,this.hostView=this.changeDetectorRef=new Mce(d),this.componentType=l}setInput(l,a){const h=this._tNode.inputs;let d;if(null!==h&&(d=h[l])){const f=this._rootLView;qR(f[1],f,d,l,a),PU(f,this._tNode.index)}}get injector(){return new bg(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(l){this.hostView.onDestroy(l)}}function Nce(){const c=Os();q1(ot()[1],c)}function Qt(c){let l=function XU(c){return Object.getPrototypeOf(c.prototype).constructor}(c.type),a=!0;const h=[c];for(;l;){let d;if(sc(c))d=l.\u0275cmp||l.\u0275dir;else{if(l.\u0275cmp)throw new it(903,!1);d=l.\u0275dir}if(d){if(a){h.push(d);const m=c;m.inputs=YR(c.inputs),m.declaredInputs=YR(c.declaredInputs),m.outputs=YR(c.outputs);const g=d.hostBindings;g&&Bce(c,g);const y=d.viewQuery,v=d.contentQueries;if(y&&kce(c,y),v&&Vce(c,v),nI(c.inputs,d.inputs),nI(c.declaredInputs,d.declaredInputs),nI(c.outputs,d.outputs),sc(d)&&d.data.animation){const _=c.data;_.animation=(_.animation||[]).concat(d.data.animation)}}const f=d.features;if(f)for(let m=0;m<f.length;m++){const g=f[m];g&&g.ngInherit&&g(c),g===Qt&&(a=!1)}}l=Object.getPrototypeOf(l)}!function Fce(c){let l=0,a=null;for(let h=c.length-1;h>=0;h--){const d=c[h];d.hostVars=l+=d.hostVars,d.hostAttrs=K1(d.hostAttrs,a=K1(a,d.hostAttrs))}}(h)}function YR(c){return c===dg?{}:c===Br?[]:c}function kce(c,l){const a=c.viewQuery;c.viewQuery=a?(h,d)=>{l(h,d),a(h,d)}:l}function Vce(c,l){const a=c.contentQueries;c.contentQueries=a?(h,d,f)=>{l(h,d,f),a(h,d,f)}:l}function Bce(c,l){const a=c.hostBindings;c.hostBindings=a?(h,d)=>{l(h,d),a(h,d)}:l}let Dw=null;function Tp(){if(!Dw){const c=si.Symbol;if(c&&c.iterator)Dw=c.iterator;else{const l=Object.getOwnPropertyNames(Map.prototype);for(let a=0;a<l.length;++a){const h=l[a];"entries"!==h&&"size"!==h&&Map.prototype[h]===Map.prototype.entries&&(Dw=h)}}}return Dw}function M0(c){return!!ZR(c)&&(Array.isArray(c)||!(c instanceof Map)&&Tp()in c)}function ZR(c){return null!==c&&("function"==typeof c||"object"==typeof c)}function iu(c,l,a){return c[l]=a}function xo(c,l,a){return!Object.is(c[l],a)&&(c[l]=a,!0)}function wp(c,l,a,h){const d=xo(c,l,a);return xo(c,l+1,h)||d}function Ne(c,l,a,h){const d=ot();return xo(d,vg(),l)&&(Ir(),ru(Yi(),d,c,l,a,h)),Ne}function Gg(c,l,a,h){return xo(c,vg(),a)?l+Hn(a)+h:jn}function zg(c,l,a,h,d,f){const g=wp(c,function th(){return Gn.lFrame.bindingIndex}(),a,d);return nh(2),g?l+Hn(a)+h+Hn(d)+f:jn}function le(c,l,a,h,d,f,m,g){const y=ot(),v=Ir(),_=c+22,S=v.firstCreatePass?function $ce(c,l,a,h,d,f,m,g,y){const v=l.consts,_=Vg(l,c,4,m||null,yd(v,g));GR(l,a,_,yd(v,y)),q1(l,_);const S=_.tViews=UR(2,_,h,d,f,l.directiveRegistry,l.pipeRegistry,null,l.schemas,v);return null!==l.queries&&(l.queries.template(l,_),S.queries=l.queries.embeddedTView(_)),_}(_,v,y,l,a,h,d,f,m):v.data[_];Jc(S,!1);const b=y[11].createComment("");gw(v,y,b,S),Co(b,y),xw(y,y[_]=VU(b,y,b,S)),j1(S)&&VR(v,y,S),null!=m&&BR(y,S,g)}function Ki(c){return yg(function Use(){return Gn.lFrame.contextLView}(),22+c)}function G(c,l,a){const h=ot();return xo(h,vg(),l)&&Xa(Ir(),Yi(),h,c,l,h[11],a,!1),G}function KR(c,l,a,h,d){const m=d?"class":"style";qR(c,a,l.inputs[m],m,h)}function U(c,l,a,h){const d=ot(),f=Ir(),m=22+c,g=d[11],y=d[m]=mR(g,l,function Kse(){return Gn.lFrame.currentNamespace}()),v=f.firstCreatePass?function Zce(c,l,a,h,d,f,m){const g=l.consts,v=Vg(l,c,2,d,yd(g,f));return GR(l,a,v,yd(g,m)),null!==v.attrs&&Ew(v,v.attrs,!1),null!==v.mergedAttrs&&Ew(v,v.mergedAttrs,!0),null!==l.queries&&l.queries.elementStart(l,v),v}(m,f,d,0,l,a,h):f.data[m];Jc(v,!0);const _=v.mergedAttrs;null!==_&&Z1(g,y,_);const S=v.classes;null!==S&&bR(g,y,S);const b=v.styles;return null!==b&&K5(g,y,b),64!=(64&v.flags)&&gw(f,d,y,v),0===function Nse(){return Gn.lFrame.elementDepthCount}()&&Co(y,d),function Fse(){Gn.lFrame.elementDepthCount++}(),j1(v)&&(VR(f,d,v),MU(f,v,d)),null!==h&&BR(d,v),U}function H(){let c=Os();SI()?bI():(c=c.parent,Jc(c,!1));const l=c;!function kse(){Gn.lFrame.elementDepthCount--}();const a=Ir();return a.firstCreatePass&&(q1(a,c),dI(c)&&a.queries.elementEnd(c)),null!=l.classesWithoutHost&&function noe(c){return 0!=(16&c.flags)}(l)&&KR(a,l,ot(),l.classesWithoutHost,!0),null!=l.stylesWithoutHost&&function roe(c){return 0!=(32&c.flags)}(l)&&KR(a,l,ot(),l.stylesWithoutHost,!1),H}function xe(c,l,a,h){return U(c,l,a,h),H(),xe}function er(c,l,a){const h=ot(),d=Ir(),f=c+22,m=d.firstCreatePass?function Kce(c,l,a,h,d){const f=l.consts,m=yd(f,h),g=Vg(l,c,8,"ng-container",m);return null!==m&&Ew(g,m,!0),GR(l,a,g,yd(f,d)),null!==l.queries&&l.queries.elementStart(l,g),g}(f,d,h,l,a):d.data[f];Jc(m,!0);const g=h[f]=h[11].createComment("");return gw(d,h,g,m),Co(g,h),j1(m)&&(VR(d,h,m),MU(d,m,h)),null!=a&&BR(h,m),er}function tr(){let c=Os();const l=Ir();return SI()?bI():(c=c.parent,Jc(c,!1)),l.firstCreatePass&&(q1(l,c),dI(c)&&l.queries.elementEnd(c)),tr}function ba(c,l,a){return er(c,l,a),tr(),ba}function Xt(){return ot()}function A0(c){return!!c&&"function"==typeof c.then}function nG(c){return!!c&&"function"==typeof c.subscribe}const QR=nG;function Me(c,l,a,h){const d=ot(),f=Ir(),m=Os();return rG(f,d,d[11],m,c,l,0,h),Me}function JR(c,l){const a=Os(),h=ot(),d=Ir();return rG(d,h,HU(wI(d.data),a,h),a,c,l),JR}function rG(c,l,a,h,d,f,m,g){const y=j1(h),_=c.firstCreatePass&&zU(c),S=l[8],b=GU(l);let T=!0;if(3&h.type||g){const D=El(h,l),I=g?g(D):D,M=b.length,L=g?F=>g(vs(F[h.index])):h.index;let P=null;if(!g&&y&&(P=function Qce(c,l,a,h){const d=c.cleanup;if(null!=d)for(let f=0;f<d.length-1;f+=2){const m=d[f];if(m===a&&d[f+1]===h){const g=l[7],y=d[f+2];return g.length>y?g[y]:null}"string"==typeof m&&(f+=2)}return null}(c,l,d,h.index)),null!==P)(P.__ngLastListenerFn__||P).__ngNextListenerFn__=f,P.__ngLastListenerFn__=f,T=!1;else{f=sG(h,l,S,f,!1);const F=a.listen(I,d,f);b.push(f,F),_&&_.push(d,L,M,M+1)}}else f=sG(h,l,S,f,!1);const x=h.outputs;let E;if(T&&null!==x&&(E=x[d])){const D=E.length;if(D)for(let I=0;I<D;I+=2){const V=l[E[I]][E[I+1]].subscribe(f),z=b.length;b.push(f,V),_&&_.push(d,h.index,z,-(z+1))}}}function iG(c,l,a,h){try{return!1!==a(h)}catch(d){return jU(c,d),!1}}function sG(c,l,a,h,d){return function f(m){if(m===Function)return h;jR(2&c.flags?za(c.index,l):l);let y=iG(l,0,h,m),v=f.__ngNextListenerFn__;for(;v;)y=iG(l,0,v,m)&&y,v=v.__ngNextListenerFn__;return d&&!1===y&&(m.preventDefault(),m.returnValue=!1),y}}function de(c=1){return function Wse(c){return(Gn.lFrame.contextLView=function Xse(c,l){for(;c>0;)l=l[15],c--;return l}(c,Gn.lFrame.contextLView))[8]}(c)}function Jce(c,l){let a=null;const h=function Sle(c){const l=c.attrs;if(null!=l){const a=l.indexOf(5);if(0==(1&a))return l[a+1]}return null}(c);for(let d=0;d<l.length;d++){const f=l[d];if("*"!==f){if(null===h?tU(c,f,!0):wle(h,f))return d}else a=d}return a}function Et(c){const l=ot()[16][6];if(!l.projection){const h=l.projection=u0(c?c.length:1,null),d=h.slice();let f=l.child;for(;null!==f;){const m=c?Jce(f,c):0;null!==m&&(d[m]?d[m].projectionNext=f:h[m]=f,d[m]=f),f=f.next}}}function ke(c,l=0,a){const h=ot(),d=Ir(),f=Vg(d,22+c,16,null,a||null);null===f.projection&&(f.projection=l),bI(),64!=(64&f.flags)&&function fle(c,l,a){Z5(l[11],0,l,a,U5(c,a,l),j5(a.parent||l[6],a,l))}(d,h,f)}function Eo(c,l,a){return Yg(c,"",l,"",a),Eo}function Yg(c,l,a,h,d){const f=ot(),m=Gg(f,l,a,h);return m!==jn&&Xa(Ir(),Yi(),f,c,m,f[11],d,!1),Yg}function pG(c,l,a,h,d){const f=c[a+1],m=null===l;let g=h?ac(f):sh(f),y=!1;for(;0!==g&&(!1===y||m);){const _=c[g+1];nue(c[g],l)&&(y=!0,c[g+1]=h?DR(_):ER(_)),g=h?ac(_):sh(_)}y&&(c[a+1]=h?ER(f):DR(f))}function nue(c,l){return null===c||null==l||(Array.isArray(c)?c[1]:c)===l||!(!Array.isArray(c)||"string"!=typeof l)&&Mg(c,l)>=0}const Fs={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function mG(c){return c.substring(Fs.key,Fs.keyEnd)}function gG(c,l){const a=Fs.textEnd;return a===l?-1:(l=Fs.keyEnd=function oue(c,l,a){for(;l<a&&c.charCodeAt(l)>32;)l++;return l}(c,Fs.key=l,a),Zg(c,l,a))}function Zg(c,l,a){for(;l<a&&c.charCodeAt(l)<=32;)l++;return l}function Kg(c,l,a){return lc(c,l,a,!1),Kg}function st(c,l){return lc(c,l,null,!0),st}function Yo(c){!function cc(c,l,a,h){const d=Ir(),f=nh(2);d.firstUpdatePass&&TG(d,null,f,h);const m=ot();if(a!==jn&&xo(m,f,a)){const g=d.data[qo()];if(EG(g,h)&&!bG(d,f)){let y=h?g.classesWithoutHost:g.stylesWithoutHost;null!==y&&(a=rI(y,a||"")),KR(d,g,m,a,h)}else!function mue(c,l,a,h,d,f,m,g){d===jn&&(d=Br);let y=0,v=0,_=0<d.length?d[0]:null,S=0<f.length?f[0]:null;for(;null!==_||null!==S;){const b=y<d.length?d[y+1]:void 0,T=v<f.length?f[v+1]:void 0;let E,x=null;_===S?(y+=2,v+=2,b!==T&&(x=S,E=T)):null===S||null!==_&&_<S?(y+=2,x=_):(v+=2,x=S,E=T),null!==x&&CG(c,l,a,h,x,E,m,g),_=y<d.length?d[y]:null,S=v<f.length?f[v]:null}}(d,g,m,m[11],m[f+1],m[f+1]=function pue(c,l,a){if(null==a||""===a)return Br;const h=[],d=Td(a);if(Array.isArray(d))for(let f=0;f<d.length;f++)c(h,d[f],!0);else if("object"==typeof d)for(const f in d)d.hasOwnProperty(f)&&c(h,f,d[f]);else"string"==typeof d&&l(h,d);return h}(c,l,a),h,f)}}(ja,ou,c,!0)}function ou(c,l){for(let a=function iue(c){return function vG(c){Fs.key=0,Fs.keyEnd=0,Fs.value=0,Fs.valueEnd=0,Fs.textEnd=c.length}(c),gG(c,Zg(c,0,Fs.textEnd))}(l);a>=0;a=gG(l,a))ja(c,mG(l),!0)}function lc(c,l,a,h){const d=ot(),f=Ir(),m=nh(2);f.firstUpdatePass&&TG(f,c,m,h),l!==jn&&xo(d,m,l)&&CG(f,f.data[qo()],d,d[11],c,d[m+1]=function gue(c,l){return null==c||("string"==typeof l?c+=l:"object"==typeof c&&(c=ci(Td(c)))),c}(l,a),h,m)}function bG(c,l){return l>=c.expandoStartIndex}function TG(c,l,a,h){const d=c.data;if(null===d[a+1]){const f=d[qo()],m=bG(c,a);EG(f,h)&&null===l&&!m&&(l=!1),l=function uue(c,l,a,h){const d=wI(c);let f=h?l.residualClasses:l.residualStyles;if(null===d)0===(h?l.classBindings:l.styleBindings)&&(a=I0(a=eP(null,c,l,a,h),l.attrs,h),f=null);else{const m=l.directiveStylingLast;if(-1===m||c[m]!==d)if(a=eP(d,c,l,a,h),null===f){let y=function hue(c,l,a){const h=a?l.classBindings:l.styleBindings;if(0!==sh(h))return c[ac(h)]}(c,l,h);void 0!==y&&Array.isArray(y)&&(y=eP(null,c,l,y[1],h),y=I0(y,l.attrs,h),function due(c,l,a,h){c[ac(a?l.classBindings:l.styleBindings)]=h}(c,l,h,y))}else f=function fue(c,l,a){let h;const d=l.directiveEnd;for(let f=1+l.directiveStylingLast;f<d;f++)h=I0(h,c[f].hostAttrs,a);return I0(h,l.attrs,a)}(c,l,h)}return void 0!==f&&(h?l.residualClasses=f:l.residualStyles=f),a}(d,f,l,h),function eue(c,l,a,h,d,f){let m=f?l.classBindings:l.styleBindings,g=ac(m),y=sh(m);c[h]=a;let _,v=!1;if(Array.isArray(a)){const S=a;_=S[1],(null===_||Mg(S,_)>0)&&(v=!0)}else _=a;if(d)if(0!==y){const b=ac(c[g+1]);c[h+1]=Sw(b,g),0!==b&&(c[b+1]=MR(c[b+1],h)),c[g+1]=function Wle(c,l){return 131071&c|l<<17}(c[g+1],h)}else c[h+1]=Sw(g,0),0!==g&&(c[g+1]=MR(c[g+1],h)),g=h;else c[h+1]=Sw(y,0),0===g?g=h:c[y+1]=MR(c[y+1],h),y=h;v&&(c[h+1]=ER(c[h+1])),pG(c,_,h,!0),pG(c,_,h,!1),function tue(c,l,a,h,d){const f=d?c.residualClasses:c.residualStyles;null!=f&&"string"==typeof l&&Mg(f,l)>=0&&(a[h+1]=DR(a[h+1]))}(l,_,c,h,f),m=Sw(g,y),f?l.classBindings=m:l.styleBindings=m}(d,f,l,a,m,h)}}function eP(c,l,a,h,d){let f=null;const m=a.directiveEnd;let g=a.directiveStylingLast;for(-1===g?g=a.directiveStart:g++;g<m&&(f=l[g],h=I0(h,f.hostAttrs,d),f!==c);)g++;return null!==c&&(a.directiveStylingLast=g),h}function I0(c,l,a){const h=a?1:2;let d=-1;if(null!==l)for(let f=0;f<l.length;f++){const m=l[f];"number"==typeof m?d=m:d===h&&(Array.isArray(c)||(c=void 0===c?[]:["",c]),ja(c,m,!!a||l[++f]))}return void 0===c?null:c}function CG(c,l,a,h,d,f,m,g){if(!(3&l.type))return;const y=c.data,v=y[g+1];Iw(function yU(c){return 1==(1&c)}(v)?xG(y,l,a,d,sh(v),m):void 0)||(Iw(f)||function gU(c){return 2==(2&c)}(v)&&(f=xG(y,null,a,d,g,m)),function mle(c,l,a,h,d){if(l)d?c.addClass(a,h):c.removeClass(a,h);else{let f=-1===h.indexOf("-")?void 0:Sa.DashCase;null==d?c.removeStyle(a,h,f):("string"==typeof d&&d.endsWith("!important")&&(d=d.slice(0,-10),f|=Sa.Important),c.setStyle(a,h,d,f))}}(h,m,W1(qo(),a),d,f))}function xG(c,l,a,h,d,f){const m=null===l;let g;for(;d>0;){const y=c[d],v=Array.isArray(y),_=v?y[1]:y,S=null===_;let b=a[d+1];b===jn&&(b=S?Br:void 0);let T=S?OI(b,h):_===h?b:void 0;if(v&&!Iw(T)&&(T=OI(y,h)),Iw(T)&&(g=T,m))return g;const x=c[d+1];d=m?ac(x):sh(x)}if(null!==l){let y=f?l.residualClasses:l.residualStyles;null!=y&&(g=OI(y,h))}return g}function Iw(c){return void 0!==c}function EG(c,l){return 0!=(c.flags&(l?16:32))}function ye(c,l=""){const a=ot(),h=Ir(),d=c+22,f=h.firstCreatePass?Vg(h,d,1,l,null):h.data[d],m=a[d]=function pR(c,l){return c.createText(l)}(a[11],l);gw(h,a,m,f),Jc(f,!1)}function Zt(c){return mi("",c,""),Zt}function mi(c,l,a){const h=ot(),d=Gg(h,c,l,a);return d!==jn&&oh(h,qo(),d),mi}function R0(c,l,a,h,d){const f=ot(),m=zg(f,c,l,a,h,d);return m!==jn&&oh(f,qo(),m),R0}function au(c,l,a){const h=ot();return xo(h,vg(),l)&&Xa(Ir(),Yi(),h,c,l,h[11],a,!0),au}function Rw(c,l,a){const h=ot();if(xo(h,vg(),l)){const f=Ir(),m=Yi();Xa(f,m,h,c,l,HU(wI(f.data),m,h),a,!0)}return Rw}const Jg="en-US";let jG=Jg;function iP(c,l,a,h,d){if(c=On(c),Array.isArray(c))for(let f=0;f<c.length;f++)iP(c[f],l,a,h,d);else{const f=Ir(),m=ot();let g=Sp(c)?c:On(c.provide),y=_5(c);const v=Os(),_=1048575&v.providerIndexes,S=v.directiveStart,b=v.providerIndexes>>20;if(Sp(c)||!c.multi){const T=new r0(y,d,N),x=oP(g,l,d?_:_+b,S);-1===x?(ew(o0(v,m),f,g),sP(f,c,l.length),l.push(g),v.directiveStart++,v.directiveEnd++,d&&(v.providerIndexes+=1048576),a.push(T),m.push(T)):(a[x]=T,m[x]=T)}else{const T=oP(g,l,_+b,S),x=oP(g,l,_,_+b),E=T>=0&&a[T],D=x>=0&&a[x];if(d&&!D||!d&&!E){ew(o0(v,m),f,g);const I=function Ohe(c,l,a,h,d){const f=new r0(c,a,N);return f.multi=[],f.index=l,f.componentProviders=0,mz(f,d,h&&!a),f}(d?Lhe:Phe,a.length,d,h,y);!d&&D&&(a[x].providerFactory=I),sP(f,c,l.length,0),l.push(g),v.directiveStart++,v.directiveEnd++,d&&(v.providerIndexes+=1048576),a.push(I),m.push(I)}else sP(f,c,T>-1?T:x,mz(a[d?x:T],y,!d&&h));!d&&h&&D&&a[x].componentProviders++}}}function sP(c,l,a,h){const d=Sp(l),f=function dae(c){return!!c.useClass}(l);if(d||f){const y=(f?On(l.useClass):l).prototype.ngOnDestroy;if(y){const v=c.destroyHooks||(c.destroyHooks=[]);if(!d&&l.multi){const _=v.indexOf(a);-1===_?v.push(a,[h,y]):v[_+1].push(h,y)}else v.push(a,y)}}}function mz(c,l,a){return a&&c.componentProviders++,c.multi.push(l)-1}function oP(c,l,a,h){for(let d=a;d<h;d++)if(l[d]===c)return d;return-1}function Phe(c,l,a,h){return aP(this.multi,[])}function Lhe(c,l,a,h){const d=this.multi;let f;if(this.providerFactory){const m=this.providerFactory.componentProviders,g=a0(a,a[1],this.providerFactory.index,h);f=g.slice(0,m),aP(d,f);for(let y=m;y<g.length;y++)f.push(g[y])}else f=[],aP(d,f);return f}function aP(c,l){for(let a=0;a<c.length;a++)l.push((0,c[a])());return l}function Mt(c,l=[]){return a=>{a.providersResolver=(h,d)=>function Rhe(c,l,a){const h=Ir();if(h.firstCreatePass){const d=sc(c);iP(a,h.data,h.blueprint,d,!0),iP(l,h.data,h.blueprint,d,!1)}}(h,d?d(c):c,l)}}class xp{}class gz{}class yz extends xp{constructor(l,a){super(),this._parent=a,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new $R(this);const h=Ua(l);this._bootstrapComponents=ih(h.bootstrap),this._r3Injector=lU(l,a,[{provide:xp,useValue:this},{provide:nu,useValue:this.componentFactoryResolver}],ci(l),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(l)}get injector(){return this._r3Injector}destroy(){const l=this._r3Injector;!l.destroyed&&l.destroy(),this.destroyCbs.forEach(a=>a()),this.destroyCbs=null}onDestroy(l){this.destroyCbs.push(l)}}class lP extends gz{constructor(l){super(),this.moduleType=l}create(l){return new yz(this.moduleType,l)}}class Fhe extends xp{constructor(l,a,h){super(),this.componentFactoryResolver=new $R(this),this.instance=null;const d=new v5([...l,{provide:xp,useValue:this},{provide:nu,useValue:this.componentFactoryResolver}],a||pw(),h,new Set(["environment"]));this.injector=d,d.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(l){this.injector.onDestroy(l)}}function Fw(c,l,a=null){return new Fhe(c,l,a).injector}function ty(c,l,a){const h=Xo()+c,d=ot();return d[h]===jn?iu(d,h,a?l.call(a):l()):function D0(c,l){return c[l]}(d,h)}function gi(c,l,a,h){return Cz(ot(),Xo(),c,l,a,h)}function F0(c,l){const a=c[l];return a===jn?void 0:a}function Cz(c,l,a,h,d,f){const m=l+a;return xo(c,m,d)?iu(c,m+1,f?h.call(f,d):h(d)):F0(c,m+1)}function rs(c,l){const a=Ir();let h;const d=c+22;a.firstCreatePass?(h=function tde(c,l){if(l)for(let a=l.length-1;a>=0;a--){const h=l[a];if(c===h.name)return h}}(l,a.pipeRegistry),a.data[d]=h,h.onDestroy&&(a.destroyHooks||(a.destroyHooks=[])).push(d,h.onDestroy)):h=a.data[d];const f=h.factory||(h.factory=_p(h.type)),m=wl(N);try{const g=Q1(!1),y=f();return Q1(g),function Yce(c,l,a,h){a>=c.data.length&&(c.data[a]=null,c.blueprint[a]=null),l[a]=h}(a,ot(),d,y),y}finally{wl(m)}}function oo(c,l,a){const h=c+22,d=ot(),f=yg(d,h);return V0(d,h)?Cz(d,Xo(),l,f.transform,a,f):f.transform(a)}function k0(c,l,a,h){const d=c+22,f=ot(),m=yg(f,d);return V0(f,d)?function xz(c,l,a,h,d,f,m){const g=l+a;return wp(c,g,d,f)?iu(c,g+2,m?h.call(m,d,f):h(d,f)):F0(c,g+2)}(f,Xo(),l,m.transform,a,h,m):m.transform(a,h)}function V0(c,l){return c[1].data[l].pure}function uP(c){return l=>{setTimeout(c,void 0,l)}}const rt=class sde extends Ke{constructor(l=!1){super(),this.__isAsync=l}emit(l){super.next(l)}subscribe(l,a,h){let d=l,f=a||(()=>null),m=h;if(l&&"object"==typeof l){const y=l;d=y.next?.bind(y),f=y.error?.bind(y),m=y.complete?.bind(y)}this.__isAsync&&(f=uP(f),d&&(d=uP(d)),m&&(m=uP(m)));const g=super.subscribe({next:d,error:f,complete:m});return l instanceof O&&l.add(g),g}};function ode(){return this._results[Tp()]()}class hP{constructor(l=!1){this._emitDistinctChangesOnly=l,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const a=Tp(),h=hP.prototype;h[a]||(h[a]=ode)}get changes(){return this._changes||(this._changes=new rt)}get(l){return this._results[l]}map(l){return this._results.map(l)}filter(l){return this._results.filter(l)}find(l){return this._results.find(l)}reduce(l,a){return this._results.reduce(l,a)}forEach(l){this._results.forEach(l)}some(l){return this._results.some(l)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(l,a){const h=this;h.dirty=!1;const d=Ha(l);(this._changesDetected=!function foe(c,l,a){if(c.length!==l.length)return!1;for(let h=0;h<c.length;h++){let d=c[h],f=l[h];if(a&&(d=a(d),f=a(f)),f!==d)return!1}return!0}(h._results,d,a))&&(h._results=d,h.length=d.length,h.last=d[this.length-1],h.first=d[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let Vi=(()=>{class c{}return c.__NG_ELEMENT_ID__=cde,c})();const ade=Vi,lde=class extends ade{constructor(l,a,h){super(),this._declarationLView=l,this._declarationTContainer=a,this.elementRef=h}createEmbeddedView(l,a){const h=this._declarationTContainer.tViews,d=ww(this._declarationLView,h,l,16,null,h.declTNode,null,null,null,null,a||null);d[17]=this._declarationLView[this._declarationTContainer.index];const m=this._declarationLView[19];return null!==m&&(d[19]=m.createEmbeddedView(h)),Cw(h,d,l),new x0(d)}};function cde(){return kw(Os(),ot())}function kw(c,l){return 4&c.type?new lde(l,c,Pg(c,l)):null}let Zn=(()=>{class c{}return c.__NG_ELEMENT_ID__=ude,c})();function ude(){return Rz(Os(),ot())}const hde=Zn,Az=class extends hde{constructor(l,a,h){super(),this._lContainer=l,this._hostTNode=a,this._hostLView=h}get element(){return Pg(this._hostTNode,this._hostLView)}get injector(){return new bg(this._hostTNode,this._hostLView)}get parentInjector(){const l=J1(this._hostTNode,this._hostLView);if(M4(l)){const a=Sg(l,this._hostLView),h=_g(l);return new bg(a[1].data[h+8],a)}return new bg(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(l){const a=Iz(this._lContainer);return null!==a&&a[l]||null}get length(){return this._lContainer.length-10}createEmbeddedView(l,a,h){let d,f;"number"==typeof h?d=h:null!=h&&(d=h.index,f=h.injector);const m=l.createEmbeddedView(a||{},f);return this.insert(m,d),m}createComponent(l,a,h,d,f){const m=l&&!function c0(c){return"function"==typeof c}(l);let g;if(m)g=a;else{const S=a||{};g=S.index,h=S.injector,d=S.projectableNodes,f=S.environmentInjector||S.ngModuleRef}const y=m?l:new E0(ei(l)),v=h||this.parentInjector;if(!f&&null==y.ngModule){const b=(m?v:this.parentInjector).get(wd,null);b&&(f=b)}const _=y.create(v,d,void 0,f);return this.insert(_.hostView,g),_}insert(l,a){const h=l._lView,d=h[1];if(function Ose(c){return ic(c[3])}(h)){const _=this.indexOf(l);if(-1!==_)this.detach(_);else{const S=h[3],b=new Az(S,S[6],S[3]);b.detach(b.indexOf(l))}}const f=this._adjustIndex(a),m=this._lContainer;!function ale(c,l,a,h){const d=10+h,f=a.length;h>0&&(a[d-1][4]=l),h<f-10?(l[4]=a[d],V4(a,10+h,l)):(a.push(l),l[4]=null),l[3]=a;const m=l[17];null!==m&&a!==m&&function lle(c,l){const a=c[9];l[16]!==l[3][3][16]&&(c[2]=!0),null===a?c[9]=[l]:a.push(l)}(m,l);const g=l[19];null!==g&&g.insertView(c),l[2]|=64}(d,h,m,f);const g=_R(f,m),y=h[11],v=mw(y,m[7]);return null!==v&&function ile(c,l,a,h,d,f){h[0]=d,h[6]=l,w0(c,h,a,1,d,f)}(d,m[6],y,h,v,g),l.attachToViewContainerRef(),V4(dP(m),f,l),l}move(l,a){return this.insert(l,a)}indexOf(l){const a=Iz(this._lContainer);return null!==a?a.indexOf(l):-1}remove(l){const a=this._adjustIndex(l,-1),h=gR(this._lContainer,a);h&&(rw(dP(this._lContainer),a),B5(h[1],h))}detach(l){const a=this._adjustIndex(l,-1),h=gR(this._lContainer,a);return h&&null!=rw(dP(this._lContainer),a)?new x0(h):null}_adjustIndex(l,a=0){return l??this.length+a}};function Iz(c){return c[8]}function dP(c){return c[8]||(c[8]=[])}function Rz(c,l){let a;const h=l[c.index];if(ic(h))a=h;else{let d;if(8&c.type)d=vs(h);else{const f=l[11];d=f.createComment("");const m=El(c,l);bp(f,mw(f,m),d,function dle(c,l){return c.nextSibling(l)}(f,m),!1)}l[c.index]=a=VU(h,l,d,c),xw(l,a)}return new Az(a,c,l)}class fP{constructor(l){this.queryList=l,this.matches=null}clone(){return new fP(this.queryList)}setDirty(){this.queryList.setDirty()}}class pP{constructor(l=[]){this.queries=l}createEmbeddedView(l){const a=l.queries;if(null!==a){const h=null!==l.contentQueries?l.contentQueries[0]:a.length,d=[];for(let f=0;f<h;f++){const m=a.getByIndex(f);d.push(this.queries[m.indexInDeclarationView].clone())}return new pP(d)}return null}insertView(l){this.dirtyQueriesWithMatches(l)}detachView(l){this.dirtyQueriesWithMatches(l)}dirtyQueriesWithMatches(l){for(let a=0;a<this.queries.length;a++)null!==Fz(l,a).matches&&this.queries[a].setDirty()}}class Pz{constructor(l,a,h=null){this.predicate=l,this.flags=a,this.read=h}}class mP{constructor(l=[]){this.queries=l}elementStart(l,a){for(let h=0;h<this.queries.length;h++)this.queries[h].elementStart(l,a)}elementEnd(l){for(let a=0;a<this.queries.length;a++)this.queries[a].elementEnd(l)}embeddedTView(l){let a=null;for(let h=0;h<this.length;h++){const d=null!==a?a.length:0,f=this.getByIndex(h).embeddedTView(l,d);f&&(f.indexInDeclarationView=h,null!==a?a.push(f):a=[f])}return null!==a?new mP(a):null}template(l,a){for(let h=0;h<this.queries.length;h++)this.queries[h].template(l,a)}getByIndex(l){return this.queries[l]}get length(){return this.queries.length}track(l){this.queries.push(l)}}class gP{constructor(l,a=-1){this.metadata=l,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=a}elementStart(l,a){this.isApplyingToNode(a)&&this.matchTNode(l,a)}elementEnd(l){this._declarationNodeIndex===l.index&&(this._appliesToNextNode=!1)}template(l,a){this.elementStart(l,a)}embeddedTView(l,a){return this.isApplyingToNode(l)?(this.crossesNgTemplate=!0,this.addMatch(-l.index,a),new gP(this.metadata)):null}isApplyingToNode(l){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const a=this._declarationNodeIndex;let h=l.parent;for(;null!==h&&8&h.type&&h.index!==a;)h=h.parent;return a===(null!==h?h.index:-1)}return this._appliesToNextNode}matchTNode(l,a){const h=this.metadata.predicate;if(Array.isArray(h))for(let d=0;d<h.length;d++){const f=h[d];this.matchTNodeWithReadOption(l,a,pde(a,f)),this.matchTNodeWithReadOption(l,a,tw(a,l,f,!1,!1))}else h===Vi?4&a.type&&this.matchTNodeWithReadOption(l,a,-1):this.matchTNodeWithReadOption(l,a,tw(a,l,h,!1,!1))}matchTNodeWithReadOption(l,a,h){if(null!==h){const d=this.metadata.read;if(null!==d)if(d===zt||d===Zn||d===Vi&&4&a.type)this.addMatch(a.index,-2);else{const f=tw(a,l,d,!1,!1);null!==f&&this.addMatch(a.index,f)}else this.addMatch(a.index,h)}}addMatch(l,a){null===this.matches?this.matches=[l,a]:this.matches.push(l,a)}}function pde(c,l){const a=c.localNames;if(null!==a)for(let h=0;h<a.length;h+=2)if(a[h]===l)return a[h+1];return null}function gde(c,l,a,h){return-1===a?function mde(c,l){return 11&c.type?Pg(c,l):4&c.type?kw(c,l):null}(l,c):-2===a?function yde(c,l,a){return a===zt?Pg(l,c):a===Vi?kw(l,c):a===Zn?Rz(l,c):void 0}(c,l,h):a0(c,c[1],a,l)}function Lz(c,l,a,h){const d=l[19].queries[h];if(null===d.matches){const f=c.data,m=a.matches,g=[];for(let y=0;y<m.length;y+=2){const v=m[y];g.push(v<0?null:gde(l,f[v],m[y+1],a.metadata.read))}d.matches=g}return d.matches}function yP(c,l,a,h){const d=c.queries.getByIndex(a),f=d.matches;if(null!==f){const m=Lz(c,l,d,a);for(let g=0;g<f.length;g+=2){const y=f[g];if(y>0)h.push(m[g/2]);else{const v=f[g+1],_=l[-y];for(let S=10;S<_.length;S++){const b=_[S];b[17]===b[3]&&yP(b[1],b,v,h)}if(null!==_[9]){const S=_[9];for(let b=0;b<S.length;b++){const T=S[b];yP(T[1],T,v,h)}}}}}return h}function mt(c){const l=ot(),a=Ir(),h=y4();CI(h+1);const d=Fz(a,h);if(c.dirty&&u4(l)===(2==(2&d.metadata.flags))){if(null===d.matches)c.reset([]);else{const f=d.crossesNgTemplate?yP(a,l,h,[]):Lz(a,l,d,h);c.reset(f,Cae),c.notifyOnChanges()}return!0}return!1}function hr(c,l,a){const h=Ir();h.firstCreatePass&&(Nz(h,new Pz(c,l,a),-1),2==(2&l)&&(h.staticViewQueries=!0)),Oz(h,ot(),l)}function yn(c,l,a,h){const d=Ir();if(d.firstCreatePass){const f=Os();Nz(d,new Pz(l,a,h),f.index),function _de(c,l){const a=c.contentQueries||(c.contentQueries=[]);l!==(a.length?a[a.length-1]:-1)&&a.push(c.queries.length-1,l)}(d,c),2==(2&a)&&(d.staticContentQueries=!0)}Oz(d,ot(),a)}function gt(){return function vde(c,l){return c[19].queries[l].queryList}(ot(),y4())}function Oz(c,l,a){const h=new hP(4==(4&a));AU(c,l,h,h.destroy),null===l[19]&&(l[19]=new pP),l[19].queries.push(new fP(h))}function Nz(c,l,a){null===c.queries&&(c.queries=new mP),c.queries.track(new gP(l,a))}function Fz(c,l){return c.queries.getByIndex(l)}function qs(c,l){return kw(c,l)}function Bw(...c){}const Uw=new Vt("Application Initializer");let Gw=(()=>{class c{constructor(a){this.appInits=a,this.resolve=Bw,this.reject=Bw,this.initialized=!1,this.done=!1,this.donePromise=new Promise((h,d)=>{this.resolve=h,this.reject=d})}runInitializers(){if(this.initialized)return;const a=[],h=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let d=0;d<this.appInits.length;d++){const f=this.appInits[d]();if(A0(f))a.push(f);else if(QR(f)){const m=new Promise((g,y)=>{f.subscribe({complete:g,error:y})});a.push(m)}}Promise.all(a).then(()=>{h()}).catch(d=>{this.reject(d)}),0===a.length&&h(),this.initialized=!0}}return c.\u0275fac=function(a){return new(a||c)(Ae(Uw,8))},c.\u0275prov=Oe({token:c,factory:c.\u0275fac,providedIn:"root"}),c})();const U0=new Vt("AppId",{providedIn:"root",factory:function t8(){return`${TP()}${TP()}${TP()}`}});function TP(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const n8=new Vt("Platform Initializer"),wi=new Vt("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),r8=new Vt("appBootstrapListener"),i8=new Vt("AnimationModuleType");let Bde=(()=>{class c{log(a){console.log(a)}warn(a){console.warn(a)}}return c.\u0275fac=function(a){return new(a||c)},c.\u0275prov=Oe({token:c,factory:c.\u0275fac,providedIn:"platform"}),c})();const lu=new Vt("LocaleId",{providedIn:"root",factory:()=>Zi(lu,En.Optional|En.SkipSelf)||function Ude(){return typeof $localize<"u"&&$localize.locale||Jg}()});class zde{constructor(l,a){this.ngModuleFactory=l,this.componentFactories=a}}let wP=(()=>{class c{compileModuleSync(a){return new lP(a)}compileModuleAsync(a){return Promise.resolve(this.compileModuleSync(a))}compileModuleAndAllComponentsSync(a){const h=this.compileModuleSync(a),f=ih(Ua(a).declarations).reduce((m,g)=>{const y=ei(g);return y&&m.push(new E0(y)),m},[]);return new zde(h,f)}compileModuleAndAllComponentsAsync(a){return Promise.resolve(this.compileModuleAndAllComponentsSync(a))}clearCache(){}clearCacheFor(a){}getModuleId(a){}}return c.\u0275fac=function(a){return new(a||c)},c.\u0275prov=Oe({token:c,factory:c.\u0275fac,providedIn:"root"}),c})();const Wde=(()=>Promise.resolve(0))();function CP(c){typeof Zone>"u"?Wde.then(()=>{c&&c.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",c)}class kn{constructor({enableLongStackTrace:l=!1,shouldCoalesceEventChangeDetection:a=!1,shouldCoalesceRunChangeDetection:h=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new rt(!1),this.onMicrotaskEmpty=new rt(!1),this.onStable=new rt(!1),this.onError=new rt(!1),typeof Zone>"u")throw new it(908,!1);Zone.assertZonePatched();const d=this;if(d._nesting=0,d._outer=d._inner=Zone.current,Zone.AsyncStackTaggingZoneSpec){const f=Zone.AsyncStackTaggingZoneSpec;d._inner=d._inner.fork(new f("Angular"))}Zone.TaskTrackingZoneSpec&&(d._inner=d._inner.fork(new Zone.TaskTrackingZoneSpec)),l&&Zone.longStackTraceZoneSpec&&(d._inner=d._inner.fork(Zone.longStackTraceZoneSpec)),d.shouldCoalesceEventChangeDetection=!h&&a,d.shouldCoalesceRunChangeDetection=h,d.lastRequestAnimationFrameId=-1,d.nativeRequestAnimationFrame=function Xde(){let c=si.requestAnimationFrame,l=si.cancelAnimationFrame;if(typeof Zone<"u"&&c&&l){const a=c[Zone.__symbol__("OriginalDelegate")];a&&(c=a);const h=l[Zone.__symbol__("OriginalDelegate")];h&&(l=h)}return{nativeRequestAnimationFrame:c,nativeCancelAnimationFrame:l}}().nativeRequestAnimationFrame,function Yde(c){const l=()=>{!function $de(c){c.isCheckStableRunning||-1!==c.lastRequestAnimationFrameId||(c.lastRequestAnimationFrameId=c.nativeRequestAnimationFrame.call(si,()=>{c.fakeTopEventTask||(c.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{c.lastRequestAnimationFrameId=-1,EP(c),c.isCheckStableRunning=!0,xP(c),c.isCheckStableRunning=!1},void 0,()=>{},()=>{})),c.fakeTopEventTask.invoke()}),EP(c))}(c)};c._inner=c._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(a,h,d,f,m,g)=>{try{return a8(c),a.invokeTask(d,f,m,g)}finally{(c.shouldCoalesceEventChangeDetection&&"eventTask"===f.type||c.shouldCoalesceRunChangeDetection)&&l(),l8(c)}},onInvoke:(a,h,d,f,m,g,y)=>{try{return a8(c),a.invoke(d,f,m,g,y)}finally{c.shouldCoalesceRunChangeDetection&&l(),l8(c)}},onHasTask:(a,h,d,f)=>{a.hasTask(d,f),h===d&&("microTask"==f.change?(c._hasPendingMicrotasks=f.microTask,EP(c),xP(c)):"macroTask"==f.change&&(c.hasPendingMacrotasks=f.macroTask))},onHandleError:(a,h,d,f)=>(a.handleError(d,f),c.runOutsideAngular(()=>c.onError.emit(f)),!1)})}(d)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!kn.isInAngularZone())throw new it(909,!1)}static assertNotInAngularZone(){if(kn.isInAngularZone())throw new it(909,!1)}run(l,a,h){return this._inner.run(l,a,h)}runTask(l,a,h,d){const f=this._inner,m=f.scheduleEventTask("NgZoneEvent: "+d,l,qde,Bw,Bw);try{return f.runTask(m,a,h)}finally{f.cancelTask(m)}}runGuarded(l,a,h){return this._inner.runGuarded(l,a,h)}runOutsideAngular(l){return this._outer.run(l)}}const qde={};function xP(c){if(0==c._nesting&&!c.hasPendingMicrotasks&&!c.isStable)try{c._nesting++,c.onMicrotaskEmpty.emit(null)}finally{if(c._nesting--,!c.hasPendingMicrotasks)try{c.runOutsideAngular(()=>c.onStable.emit(null))}finally{c.isStable=!0}}}function EP(c){c.hasPendingMicrotasks=!!(c._hasPendingMicrotasks||(c.shouldCoalesceEventChangeDetection||c.shouldCoalesceRunChangeDetection)&&-1!==c.lastRequestAnimationFrameId)}function a8(c){c._nesting++,c.isStable&&(c.isStable=!1,c.onUnstable.emit(null))}function l8(c){c._nesting--,xP(c)}class Zde{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new rt,this.onMicrotaskEmpty=new rt,this.onStable=new rt,this.onError=new rt}run(l,a,h){return l.apply(a,h)}runGuarded(l,a,h){return l.apply(a,h)}runOutsideAngular(l){return l()}runTask(l,a,h,d){return l.apply(a,h)}}const c8=new Vt(""),zw=new Vt("");let AP,MP=(()=>{class c{constructor(a,h,d){this._ngZone=a,this.registry=h,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,AP||(function Kde(c){AP=c}(d),d.addToWindow(h)),this._watchAngularEvents(),a.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{kn.assertNotInAngularZone(),CP(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())CP(()=>{for(;0!==this._callbacks.length;){let a=this._callbacks.pop();clearTimeout(a.timeoutId),a.doneCb(this._didWork)}this._didWork=!1});else{let a=this.getPendingTasks();this._callbacks=this._callbacks.filter(h=>!h.updateCb||!h.updateCb(a)||(clearTimeout(h.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(a=>({source:a.source,creationLocation:a.creationLocation,data:a.data})):[]}addCallback(a,h,d){let f=-1;h&&h>0&&(f=setTimeout(()=>{this._callbacks=this._callbacks.filter(m=>m.timeoutId!==f),a(this._didWork,this.getPendingTasks())},h)),this._callbacks.push({doneCb:a,timeoutId:f,updateCb:d})}whenStable(a,h,d){if(d&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(a,h,d),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(a){this.registry.registerApplication(a,this)}unregisterApplication(a){this.registry.unregisterApplication(a)}findProviders(a,h,d){return[]}}return c.\u0275fac=function(a){return new(a||c)(Ae(kn),Ae(DP),Ae(zw))},c.\u0275prov=Oe({token:c,factory:c.\u0275fac}),c})(),DP=(()=>{class c{constructor(){this._applications=new Map}registerApplication(a,h){this._applications.set(a,h)}unregisterApplication(a){this._applications.delete(a)}unregisterAllApplications(){this._applications.clear()}getTestability(a){return this._applications.get(a)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(a,h=!0){return AP?.findTestabilityInTree(this,a,h)??null}}return c.\u0275fac=function(a){return new(a||c)},c.\u0275prov=Oe({token:c,factory:c.\u0275fac,providedIn:"platform"}),c})(),Ed=null;const u8=new Vt("AllowMultipleToken"),IP=new Vt("PlatformDestroyListeners");class h8{constructor(l,a){this.name=l,this.token=a}}function f8(c,l,a=[]){const h=`Platform: ${l}`,d=new Vt(h);return(f=[])=>{let m=RP();if(!m||m.injector.get(u8,!1)){const g=[...a,...f,{provide:d,useValue:!0}];c?c(g):function efe(c){if(Ed&&!Ed.get(u8,!1))throw new it(400,!1);Ed=c;const l=c.get(m8);(function d8(c){const l=c.get(n8,null);l&&l.forEach(a=>a())})(c)}(function p8(c=[],l){return ti.create({name:l,providers:[{provide:YI,useValue:"platform"},{provide:IP,useValue:new Set([()=>Ed=null])},...c]})}(g,h))}return function nfe(c){const l=RP();if(!l)throw new it(401,!1);return l}()}}function RP(){return Ed?.get(m8)??null}let m8=(()=>{class c{constructor(a){this._injector=a,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(a,h){const d=function rfe(c,l){let a;return a="noop"===c?new Zde:("zone.js"===c?void 0:c)||new kn(l),a}(h?.ngZone,function g8(c){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!c||!c.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!c||!c.ngZoneRunCoalescing)||!1}}(h)),f=[{provide:kn,useValue:d}];return d.run(()=>{const m=ti.create({providers:f,parent:this.injector,name:a.moduleType.name}),g=a.create(m),y=g.injector.get(Og,null);if(!y)throw new it(402,!1);return d.runOutsideAngular(()=>{const v=d.onError.subscribe({next:_=>{y.handleError(_)}});g.onDestroy(()=>{Hw(this._modules,g),v.unsubscribe()})}),function y8(c,l,a){try{const h=a();return A0(h)?h.catch(d=>{throw l.runOutsideAngular(()=>c.handleError(d)),d}):h}catch(h){throw l.runOutsideAngular(()=>c.handleError(h)),h}}(y,d,()=>{const v=g.injector.get(Gw);return v.runInitializers(),v.donePromise.then(()=>(function WG(c){Ba(c,"Expected localeId to be defined"),"string"==typeof c&&(jG=c.toLowerCase().replace(/_/g,"-"))}(g.injector.get(lu,Jg)||Jg),this._moduleDoBootstrap(g),g))})})}bootstrapModule(a,h=[]){const d=v8({},h);return function Qde(c,l,a){const h=new lP(a);return Promise.resolve(h)}(0,0,a).then(f=>this.bootstrapModuleFactory(f,d))}_moduleDoBootstrap(a){const h=a.injector.get(sy);if(a._bootstrapComponents.length>0)a._bootstrapComponents.forEach(d=>h.bootstrap(d));else{if(!a.instance.ngDoBootstrap)throw new it(403,!1);a.instance.ngDoBootstrap(h)}this._modules.push(a)}onDestroy(a){this._destroyListeners.push(a)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new it(404,!1);this._modules.slice().forEach(h=>h.destroy()),this._destroyListeners.forEach(h=>h());const a=this._injector.get(IP,null);a&&(a.forEach(h=>h()),a.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return c.\u0275fac=function(a){return new(a||c)(Ae(ti))},c.\u0275prov=Oe({token:c,factory:c.\u0275fac,providedIn:"platform"}),c})();function v8(c,l){return Array.isArray(l)?l.reduce(v8,c):{...c,...l}}let sy=(()=>{class c{constructor(a,h,d){this._zone=a,this._injector=h,this._exceptionHandler=d,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const f=new wt(g=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{g.next(this._stable),g.complete()})}),m=new wt(g=>{let y;this._zone.runOutsideAngular(()=>{y=this._zone.onStable.subscribe(()=>{kn.assertNotInAngularZone(),CP(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,g.next(!0))})})});const v=this._zone.onUnstable.subscribe(()=>{kn.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{g.next(!1)}))});return()=>{y.unsubscribe(),v.unsubscribe()}});this.isStable=eI(f,m.pipe(ZB()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(a,h){const d=a instanceof S5;if(!this._injector.get(Gw).done)throw!d&&function ry(c){const l=ei(c)||jo(c)||Wo(c);return null!==l&&l.standalone}(a),new it(405,false);let m;m=d?a:this._injector.get(nu).resolveComponentFactory(a),this.componentTypes.push(m.componentType);const g=function Jde(c){return c.isBoundToModule}(m)?void 0:this._injector.get(xp),v=m.create(ti.NULL,[],h||m.selector,g),_=v.location.nativeElement,S=v.injector.get(c8,null);return S?.registerApplication(_),v.onDestroy(()=>{this.detachView(v.hostView),Hw(this.components,v),S?.unregisterApplication(_)}),this._loadComponent(v),v}tick(){if(this._runningTick)throw new it(101,!1);try{this._runningTick=!0;for(let a of this._views)a.detectChanges()}catch(a){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(a))}finally{this._runningTick=!1}}attachView(a){const h=a;this._views.push(h),h.attachToAppRef(this)}detachView(a){const h=a;Hw(this._views,h),h.detachFromAppRef()}_loadComponent(a){this.attachView(a.hostView),this.tick(),this.components.push(a),this._injector.get(r8,[]).concat(this._bootstrapListeners).forEach(d=>d(a))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(a=>a()),this._views.slice().forEach(a=>a.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(a){return this._destroyListeners.push(a),()=>Hw(this._destroyListeners,a)}destroy(){if(this._destroyed)throw new it(406,!1);const a=this._injector;a.destroy&&!a.destroyed&&a.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return c.\u0275fac=function(a){return new(a||c)(Ae(kn),Ae(wd),Ae(Og))},c.\u0275prov=Oe({token:c,factory:c.\u0275fac,providedIn:"root"}),c})();function Hw(c,l){const a=c.indexOf(l);a>-1&&c.splice(a,1)}let S8=!0,Ss=(()=>{class c{}return c.__NG_ELEMENT_ID__=ofe,c})();function ofe(c){return function afe(c,l,a){if(H1(c)&&!a){const h=za(c.index,l);return new x0(h,h)}return 47&c.type?new x0(l[16],l):null}(Os(),ot(),16==(16&c))}class x8{constructor(){}supports(l){return M0(l)}create(l){return new ffe(l)}}const dfe=(c,l)=>l;class ffe{constructor(l){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=l||dfe}forEachItem(l){let a;for(a=this._itHead;null!==a;a=a._next)l(a)}forEachOperation(l){let a=this._itHead,h=this._removalsHead,d=0,f=null;for(;a||h;){const m=!h||a&&a.currentIndex<M8(h,d,f)?a:h,g=M8(m,d,f),y=m.currentIndex;if(m===h)d--,h=h._nextRemoved;else if(a=a._next,null==m.previousIndex)d++;else{f||(f=[]);const v=g-d,_=y-d;if(v!=_){for(let b=0;b<v;b++){const T=b<f.length?f[b]:f[b]=0,x=T+b;_<=x&&x<v&&(f[b]=T+1)}f[m.previousIndex]=_-v}}g!==y&&l(m,g,y)}}forEachPreviousItem(l){let a;for(a=this._previousItHead;null!==a;a=a._nextPrevious)l(a)}forEachAddedItem(l){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)l(a)}forEachMovedItem(l){let a;for(a=this._movesHead;null!==a;a=a._nextMoved)l(a)}forEachRemovedItem(l){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)l(a)}forEachIdentityChange(l){let a;for(a=this._identityChangesHead;null!==a;a=a._nextIdentityChange)l(a)}diff(l){if(null==l&&(l=[]),!M0(l))throw new it(900,!1);return this.check(l)?this:null}onDestroy(){}check(l){this._reset();let d,f,m,a=this._itHead,h=!1;if(Array.isArray(l)){this.length=l.length;for(let g=0;g<this.length;g++)f=l[g],m=this._trackByFn(g,f),null!==a&&Object.is(a.trackById,m)?(h&&(a=this._verifyReinsertion(a,f,m,g)),Object.is(a.item,f)||this._addIdentityChange(a,f)):(a=this._mismatch(a,f,m,g),h=!0),a=a._next}else d=0,function jce(c,l){if(Array.isArray(c))for(let a=0;a<c.length;a++)l(c[a]);else{const a=c[Tp()]();let h;for(;!(h=a.next()).done;)l(h.value)}}(l,g=>{m=this._trackByFn(d,g),null!==a&&Object.is(a.trackById,m)?(h&&(a=this._verifyReinsertion(a,g,m,d)),Object.is(a.item,g)||this._addIdentityChange(a,g)):(a=this._mismatch(a,g,m,d),h=!0),a=a._next,d++}),this.length=d;return this._truncate(a),this.collection=l,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let l;for(l=this._previousItHead=this._itHead;null!==l;l=l._next)l._nextPrevious=l._next;for(l=this._additionsHead;null!==l;l=l._nextAdded)l.previousIndex=l.currentIndex;for(this._additionsHead=this._additionsTail=null,l=this._movesHead;null!==l;l=l._nextMoved)l.previousIndex=l.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(l,a,h,d){let f;return null===l?f=this._itTail:(f=l._prev,this._remove(l)),null!==(l=null===this._unlinkedRecords?null:this._unlinkedRecords.get(h,null))?(Object.is(l.item,a)||this._addIdentityChange(l,a),this._reinsertAfter(l,f,d)):null!==(l=null===this._linkedRecords?null:this._linkedRecords.get(h,d))?(Object.is(l.item,a)||this._addIdentityChange(l,a),this._moveAfter(l,f,d)):l=this._addAfter(new pfe(a,h),f,d),l}_verifyReinsertion(l,a,h,d){let f=null===this._unlinkedRecords?null:this._unlinkedRecords.get(h,null);return null!==f?l=this._reinsertAfter(f,l._prev,d):l.currentIndex!=d&&(l.currentIndex=d,this._addToMoves(l,d)),l}_truncate(l){for(;null!==l;){const a=l._next;this._addToRemovals(this._unlink(l)),l=a}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(l,a,h){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(l);const d=l._prevRemoved,f=l._nextRemoved;return null===d?this._removalsHead=f:d._nextRemoved=f,null===f?this._removalsTail=d:f._prevRemoved=d,this._insertAfter(l,a,h),this._addToMoves(l,h),l}_moveAfter(l,a,h){return this._unlink(l),this._insertAfter(l,a,h),this._addToMoves(l,h),l}_addAfter(l,a,h){return this._insertAfter(l,a,h),this._additionsTail=null===this._additionsTail?this._additionsHead=l:this._additionsTail._nextAdded=l,l}_insertAfter(l,a,h){const d=null===a?this._itHead:a._next;return l._next=d,l._prev=a,null===d?this._itTail=l:d._prev=l,null===a?this._itHead=l:a._next=l,null===this._linkedRecords&&(this._linkedRecords=new E8),this._linkedRecords.put(l),l.currentIndex=h,l}_remove(l){return this._addToRemovals(this._unlink(l))}_unlink(l){null!==this._linkedRecords&&this._linkedRecords.remove(l);const a=l._prev,h=l._next;return null===a?this._itHead=h:a._next=h,null===h?this._itTail=a:h._prev=a,l}_addToMoves(l,a){return l.previousIndex===a||(this._movesTail=null===this._movesTail?this._movesHead=l:this._movesTail._nextMoved=l),l}_addToRemovals(l){return null===this._unlinkedRecords&&(this._unlinkedRecords=new E8),this._unlinkedRecords.put(l),l.currentIndex=null,l._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=l,l._prevRemoved=null):(l._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=l),l}_addIdentityChange(l,a){return l.item=a,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=l:this._identityChangesTail._nextIdentityChange=l,l}}class pfe{constructor(l,a){this.item=l,this.trackById=a,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class mfe{constructor(){this._head=null,this._tail=null}add(l){null===this._head?(this._head=this._tail=l,l._nextDup=null,l._prevDup=null):(this._tail._nextDup=l,l._prevDup=this._tail,l._nextDup=null,this._tail=l)}get(l,a){let h;for(h=this._head;null!==h;h=h._nextDup)if((null===a||a<=h.currentIndex)&&Object.is(h.trackById,l))return h;return null}remove(l){const a=l._prevDup,h=l._nextDup;return null===a?this._head=h:a._nextDup=h,null===h?this._tail=a:h._prevDup=a,null===this._head}}class E8{constructor(){this.map=new Map}put(l){const a=l.trackById;let h=this.map.get(a);h||(h=new mfe,this.map.set(a,h)),h.add(l)}get(l,a){const d=this.map.get(l);return d?d.get(l,a):null}remove(l){const a=l.trackById;return this.map.get(a).remove(l)&&this.map.delete(a),l}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function M8(c,l,a){const h=c.previousIndex;if(null===h)return h;let d=0;return a&&h<a.length&&(d=a[h]),h+l+d}class D8{constructor(){}supports(l){return l instanceof Map||ZR(l)}create(){return new gfe}}class gfe{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(l){let a;for(a=this._mapHead;null!==a;a=a._next)l(a)}forEachPreviousItem(l){let a;for(a=this._previousMapHead;null!==a;a=a._nextPrevious)l(a)}forEachChangedItem(l){let a;for(a=this._changesHead;null!==a;a=a._nextChanged)l(a)}forEachAddedItem(l){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)l(a)}forEachRemovedItem(l){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)l(a)}diff(l){if(l){if(!(l instanceof Map||ZR(l)))throw new it(900,!1)}else l=new Map;return this.check(l)?this:null}onDestroy(){}check(l){this._reset();let a=this._mapHead;if(this._appendAfter=null,this._forEach(l,(h,d)=>{if(a&&a.key===d)this._maybeAddToChanges(a,h),this._appendAfter=a,a=a._next;else{const f=this._getOrCreateRecordForKey(d,h);a=this._insertBeforeOrAppend(a,f)}}),a){a._prev&&(a._prev._next=null),this._removalsHead=a;for(let h=a;null!==h;h=h._nextRemoved)h===this._mapHead&&(this._mapHead=null),this._records.delete(h.key),h._nextRemoved=h._next,h.previousValue=h.currentValue,h.currentValue=null,h._prev=null,h._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(l,a){if(l){const h=l._prev;return a._next=l,a._prev=h,l._prev=a,h&&(h._next=a),l===this._mapHead&&(this._mapHead=a),this._appendAfter=l,l}return this._appendAfter?(this._appendAfter._next=a,a._prev=this._appendAfter):this._mapHead=a,this._appendAfter=a,null}_getOrCreateRecordForKey(l,a){if(this._records.has(l)){const d=this._records.get(l);this._maybeAddToChanges(d,a);const f=d._prev,m=d._next;return f&&(f._next=m),m&&(m._prev=f),d._next=null,d._prev=null,d}const h=new yfe(l);return this._records.set(l,h),h.currentValue=a,this._addToAdditions(h),h}_reset(){if(this.isDirty){let l;for(this._previousMapHead=this._mapHead,l=this._previousMapHead;null!==l;l=l._next)l._nextPrevious=l._next;for(l=this._changesHead;null!==l;l=l._nextChanged)l.previousValue=l.currentValue;for(l=this._additionsHead;null!=l;l=l._nextAdded)l.previousValue=l.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(l,a){Object.is(a,l.currentValue)||(l.previousValue=l.currentValue,l.currentValue=a,this._addToChanges(l))}_addToAdditions(l){null===this._additionsHead?this._additionsHead=this._additionsTail=l:(this._additionsTail._nextAdded=l,this._additionsTail=l)}_addToChanges(l){null===this._changesHead?this._changesHead=this._changesTail=l:(this._changesTail._nextChanged=l,this._changesTail=l)}_forEach(l,a){l instanceof Map?l.forEach(a):Object.keys(l).forEach(h=>a(l[h],h))}}class yfe{constructor(l){this.key=l,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function A8(){return new oy([new x8])}let oy=(()=>{class c{constructor(a){this.factories=a}static create(a,h){if(null!=h){const d=h.factories.slice();a=a.concat(d)}return new c(a)}static extend(a){return{provide:c,useFactory:h=>c.create(a,h||A8()),deps:[[c,new bd,new Sd]]}}find(a){const h=this.factories.find(d=>d.supports(a));if(null!=h)return h;throw new it(901,!1)}}return c.\u0275prov=Oe({token:c,providedIn:"root",factory:A8}),c})();function I8(){return new G0([new D8])}let G0=(()=>{class c{constructor(a){this.factories=a}static create(a,h){if(h){const d=h.factories.slice();a=a.concat(d)}return new c(a)}static extend(a){return{provide:c,useFactory:h=>c.create(a,h||I8()),deps:[[c,new bd,new Sd]]}}find(a){const h=this.factories.find(d=>d.supports(a));if(h)return h;throw new it(901,!1)}}return c.\u0275prov=Oe({token:c,providedIn:"root",factory:I8}),c})();const Sfe=f8(null,"core",[]);let bfe=(()=>{class c{constructor(a){}}return c.\u0275fac=function(a){return new(a||c)(Ae(sy))},c.\u0275mod=Ut({type:c}),c.\u0275inj=kt({}),c})();function lh(c){return"boolean"==typeof c?c:null!=c&&"false"!==c}let Xw=null;function cu(){return Xw}const Er=new Vt("DocumentToken");let FP=(()=>{class c{historyGo(a){throw new Error("Not implemented")}}return c.\u0275fac=function(a){return new(a||c)},c.\u0275prov=Oe({token:c,factory:function(){return function xfe(){return Ae(R8)}()},providedIn:"platform"}),c})();const Efe=new Vt("Location Initialized");let R8=(()=>{class c extends FP{constructor(a){super(),this._doc=a,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return cu().getBaseHref(this._doc)}onPopState(a){const h=cu().getGlobalEventTarget(this._doc,"window");return h.addEventListener("popstate",a,!1),()=>h.removeEventListener("popstate",a)}onHashChange(a){const h=cu().getGlobalEventTarget(this._doc,"window");return h.addEventListener("hashchange",a,!1),()=>h.removeEventListener("hashchange",a)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(a){this.location.pathname=a}pushState(a,h,d){P8()?this._history.pushState(a,h,d):this.location.hash=d}replaceState(a,h,d){P8()?this._history.replaceState(a,h,d):this.location.hash=d}forward(){this._history.forward()}back(){this._history.back()}historyGo(a=0){this._history.go(a)}getState(){return this._history.state}}return c.\u0275fac=function(a){return new(a||c)(Ae(Er))},c.\u0275prov=Oe({token:c,factory:function(){return function Mfe(){return new R8(Ae(Er))}()},providedIn:"platform"}),c})();function P8(){return!!window.history.pushState}function kP(c,l){if(0==c.length)return l;if(0==l.length)return c;let a=0;return c.endsWith("/")&&a++,l.startsWith("/")&&a++,2==a?c+l.substring(1):1==a?c+l:c+"/"+l}function L8(c){const l=c.match(/#|\?|$/),a=l&&l.index||c.length;return c.slice(0,a-("/"===c[a-1]?1:0))+c.slice(a)}function ch(c){return c&&"?"!==c[0]?"?"+c:c}let Mp=(()=>{class c{historyGo(a){throw new Error("Not implemented")}}return c.\u0275fac=function(a){return new(a||c)},c.\u0275prov=Oe({token:c,factory:function(){return Zi(N8)},providedIn:"root"}),c})();const O8=new Vt("appBaseHref");let N8=(()=>{class c extends Mp{constructor(a,h){super(),this._platformLocation=a,this._removeListenerFns=[],this._baseHref=h??this._platformLocation.getBaseHrefFromDOM()??Zi(Er).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(a){this._removeListenerFns.push(this._platformLocation.onPopState(a),this._platformLocation.onHashChange(a))}getBaseHref(){return this._baseHref}prepareExternalUrl(a){return kP(this._baseHref,a)}path(a=!1){const h=this._platformLocation.pathname+ch(this._platformLocation.search),d=this._platformLocation.hash;return d&&a?`${h}${d}`:h}pushState(a,h,d,f){const m=this.prepareExternalUrl(d+ch(f));this._platformLocation.pushState(a,h,m)}replaceState(a,h,d,f){const m=this.prepareExternalUrl(d+ch(f));this._platformLocation.replaceState(a,h,m)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(a=0){this._platformLocation.historyGo?.(a)}}return c.\u0275fac=function(a){return new(a||c)(Ae(FP),Ae(O8,8))},c.\u0275prov=Oe({token:c,factory:c.\u0275fac,providedIn:"root"}),c})(),Dfe=(()=>{class c extends Mp{constructor(a,h){super(),this._platformLocation=a,this._baseHref="",this._removeListenerFns=[],null!=h&&(this._baseHref=h)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(a){this._removeListenerFns.push(this._platformLocation.onPopState(a),this._platformLocation.onHashChange(a))}getBaseHref(){return this._baseHref}path(a=!1){let h=this._platformLocation.hash;return null==h&&(h="#"),h.length>0?h.substring(1):h}prepareExternalUrl(a){const h=kP(this._baseHref,a);return h.length>0?"#"+h:h}pushState(a,h,d,f){let m=this.prepareExternalUrl(d+ch(f));0==m.length&&(m=this._platformLocation.pathname),this._platformLocation.pushState(a,h,m)}replaceState(a,h,d,f){let m=this.prepareExternalUrl(d+ch(f));0==m.length&&(m=this._platformLocation.pathname),this._platformLocation.replaceState(a,h,m)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(a=0){this._platformLocation.historyGo?.(a)}}return c.\u0275fac=function(a){return new(a||c)(Ae(FP),Ae(O8,8))},c.\u0275prov=Oe({token:c,factory:c.\u0275fac}),c})(),VP=(()=>{class c{constructor(a){this._subject=new rt,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=a;const h=this._locationStrategy.getBaseHref();this._baseHref=L8(F8(h)),this._locationStrategy.onPopState(d=>{this._subject.emit({url:this.path(!0),pop:!0,state:d.state,type:d.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(a=!1){return this.normalize(this._locationStrategy.path(a))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(a,h=""){return this.path()==this.normalize(a+ch(h))}normalize(a){return c.stripTrailingSlash(function Ife(c,l){return c&&l.startsWith(c)?l.substring(c.length):l}(this._baseHref,F8(a)))}prepareExternalUrl(a){return a&&"/"!==a[0]&&(a="/"+a),this._locationStrategy.prepareExternalUrl(a)}go(a,h="",d=null){this._locationStrategy.pushState(d,"",a,h),this._notifyUrlChangeListeners(this.prepareExternalUrl(a+ch(h)),d)}replaceState(a,h="",d=null){this._locationStrategy.replaceState(d,"",a,h),this._notifyUrlChangeListeners(this.prepareExternalUrl(a+ch(h)),d)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(a=0){this._locationStrategy.historyGo?.(a)}onUrlChange(a){return this._urlChangeListeners.push(a),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(h=>{this._notifyUrlChangeListeners(h.url,h.state)})),()=>{const h=this._urlChangeListeners.indexOf(a);this._urlChangeListeners.splice(h,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(a="",h){this._urlChangeListeners.forEach(d=>d(a,h))}subscribe(a,h,d){return this._subject.subscribe({next:a,error:h,complete:d})}}return c.normalizeQueryParams=ch,c.joinWithSlash=kP,c.stripTrailingSlash=L8,c.\u0275fac=function(a){return new(a||c)(Ae(Mp))},c.\u0275prov=Oe({token:c,factory:function(){return function Afe(){return new VP(Ae(Mp))}()},providedIn:"root"}),c})();function F8(c){return c.replace(/\/index.html$/,"")}function W8(c,l){l=encodeURIComponent(l);for(const a of c.split(";")){const h=a.indexOf("="),[d,f]=-1==h?[a,""]:[a.slice(0,h),a.slice(h+1)];if(d.trim()===l)return decodeURIComponent(f)}return null}let $s=(()=>{class c{constructor(a,h,d,f){this._iterableDiffers=a,this._keyValueDiffers=h,this._ngEl=d,this._renderer=f,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(a){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof a?a.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(a){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof a?a.split(/\s+/):a,this._rawClass&&(M0(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const a=this._iterableDiffer.diff(this._rawClass);a&&this._applyIterableChanges(a)}else if(this._keyValueDiffer){const a=this._keyValueDiffer.diff(this._rawClass);a&&this._applyKeyValueChanges(a)}}_applyKeyValueChanges(a){a.forEachAddedItem(h=>this._toggleClass(h.key,h.currentValue)),a.forEachChangedItem(h=>this._toggleClass(h.key,h.currentValue)),a.forEachRemovedItem(h=>{h.previousValue&&this._toggleClass(h.key,!1)})}_applyIterableChanges(a){a.forEachAddedItem(h=>{if("string"!=typeof h.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${ci(h.item)}`);this._toggleClass(h.item,!0)}),a.forEachRemovedItem(h=>this._toggleClass(h.item,!1))}_applyClasses(a){a&&(Array.isArray(a)||a instanceof Set?a.forEach(h=>this._toggleClass(h,!0)):Object.keys(a).forEach(h=>this._toggleClass(h,!!a[h])))}_removeClasses(a){a&&(Array.isArray(a)||a instanceof Set?a.forEach(h=>this._toggleClass(h,!1)):Object.keys(a).forEach(h=>this._toggleClass(h,!1)))}_toggleClass(a,h){(a=a.trim())&&a.split(/\s+/g).forEach(d=>{h?this._renderer.addClass(this._ngEl.nativeElement,d):this._renderer.removeClass(this._ngEl.nativeElement,d)})}}return c.\u0275fac=function(a){return new(a||c)(N(oy),N(G0),N(zt),N(Fn))},c.\u0275dir=We({type:c,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0}),c})();class fpe{constructor(l,a,h,d){this.$implicit=l,this.ngForOf=a,this.index=h,this.count=d}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let vi=(()=>{class c{constructor(a,h,d){this._viewContainer=a,this._template=h,this._differs=d,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(a){this._ngForOf=a,this._ngForOfDirty=!0}set ngForTrackBy(a){this._trackByFn=a}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(a){a&&(this._template=a)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const a=this._ngForOf;!this._differ&&a&&(this._differ=this._differs.find(a).create(this.ngForTrackBy))}if(this._differ){const a=this._differ.diff(this._ngForOf);a&&this._applyChanges(a)}}_applyChanges(a){const h=this._viewContainer;a.forEachOperation((d,f,m)=>{if(null==d.previousIndex)h.createEmbeddedView(this._template,new fpe(d.item,this._ngForOf,-1,-1),null===m?void 0:m);else if(null==m)h.remove(null===f?void 0:f);else if(null!==f){const g=h.get(f);h.move(g,m),$8(g,d)}});for(let d=0,f=h.length;d<f;d++){const g=h.get(d).context;g.index=d,g.count=f,g.ngForOf=this._ngForOf}a.forEachIdentityChange(d=>{$8(h.get(d.currentIndex),d)})}static ngTemplateContextGuard(a,h){return!0}}return c.\u0275fac=function(a){return new(a||c)(N(Zn),N(Vi),N(oy))},c.\u0275dir=We({type:c,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),c})();function $8(c,l){c.context.$implicit=l.item}let vn=(()=>{class c{constructor(a,h){this._viewContainer=a,this._context=new mpe,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=h}set ngIf(a){this._context.$implicit=this._context.ngIf=a,this._updateView()}set ngIfThen(a){Y8("ngIfThen",a),this._thenTemplateRef=a,this._thenViewRef=null,this._updateView()}set ngIfElse(a){Y8("ngIfElse",a),this._elseTemplateRef=a,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(a,h){return!0}}return c.\u0275fac=function(a){return new(a||c)(N(Zn),N(Vi))},c.\u0275dir=We({type:c,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),c})();class mpe{constructor(){this.$implicit=null,this.ngIf=null}}function Y8(c,l){if(l&&!l.createEmbeddedView)throw new Error(`${c} must be a TemplateRef, but received '${ci(l)}'.`)}let KP=(()=>{class c{constructor(a,h,d){this._ngEl=a,this._differs=h,this._renderer=d,this._ngStyle=null,this._differ=null}set ngStyle(a){this._ngStyle=a,!this._differ&&a&&(this._differ=this._differs.find(a).create())}ngDoCheck(){if(this._differ){const a=this._differ.diff(this._ngStyle);a&&this._applyChanges(a)}}_setStyle(a,h){const[d,f]=a.split("."),m=-1===d.indexOf("-")?void 0:Sa.DashCase;null!=h?this._renderer.setStyle(this._ngEl.nativeElement,d,f?`${h}${f}`:h,m):this._renderer.removeStyle(this._ngEl.nativeElement,d,m)}_applyChanges(a){a.forEachRemovedItem(h=>this._setStyle(h.key,null)),a.forEachAddedItem(h=>this._setStyle(h.key,h.currentValue)),a.forEachChangedItem(h=>this._setStyle(h.key,h.currentValue))}}return c.\u0275fac=function(a){return new(a||c)(N(zt),N(G0),N(Fn))},c.\u0275dir=We({type:c,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"},standalone:!0}),c})(),hh=(()=>{class c{constructor(a){this._viewContainerRef=a,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null,this.ngTemplateOutletInjector=null}ngOnChanges(a){if(a.ngTemplateOutlet||a.ngTemplateOutletInjector){const h=this._viewContainerRef;if(this._viewRef&&h.remove(h.indexOf(this._viewRef)),this.ngTemplateOutlet){const{ngTemplateOutlet:d,ngTemplateOutletContext:f,ngTemplateOutletInjector:m}=this;this._viewRef=h.createEmbeddedView(d,f,m?{injector:m}:void 0)}else this._viewRef=null}else this._viewRef&&a.ngTemplateOutletContext&&this.ngTemplateOutletContext&&(this._viewRef.context=this.ngTemplateOutletContext)}}return c.\u0275fac=function(a){return new(a||c)(N(Zn))},c.\u0275dir=We({type:c,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},standalone:!0,features:[ys]}),c})();class vpe{createSubscription(l,a){return l.subscribe({next:a,error:h=>{throw h}})}dispose(l){l.unsubscribe()}}class _pe{createSubscription(l,a){return l.then(a,h=>{throw h})}dispose(l){}}const Spe=new _pe,bpe=new vpe;let W0=(()=>{class c{constructor(a){this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null,this._ref=a}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(a){return this._obj?a!==this._obj?(this._dispose(),this.transform(a)):this._latestValue:(a&&this._subscribe(a),this._latestValue)}_subscribe(a){this._obj=a,this._strategy=this._selectStrategy(a),this._subscription=this._strategy.createSubscription(a,h=>this._updateLatestValue(a,h))}_selectStrategy(a){if(A0(a))return Spe;if(nG(a))return bpe;throw function dc(c,l){return new it(2100,!1)}()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(a,h){a===this._obj&&(this._latestValue=h,this._ref.markForCheck())}}return c.\u0275fac=function(a){return new(a||c)(N(Ss,16))},c.\u0275pipe=bo({name:"async",type:c,pure:!1,standalone:!0}),c})(),nC=(()=>{class c{constructor(a){this.differs=a,this.keyValues=[],this.compareFn=Q8}transform(a,h=Q8){if(!a||!(a instanceof Map)&&"object"!=typeof a)return null;this.differ||(this.differ=this.differs.find(a).create());const d=this.differ.diff(a),f=h!==this.compareFn;return d&&(this.keyValues=[],d.forEachItem(m=>{this.keyValues.push(function Ppe(c,l){return{key:c,value:l}}(m.key,m.currentValue))})),(d||f)&&(this.keyValues.sort(h),this.compareFn=h),this.keyValues}}return c.\u0275fac=function(a){return new(a||c)(N(G0,16))},c.\u0275pipe=bo({name:"keyvalue",type:c,pure:!1,standalone:!0}),c})();function Q8(c,l){const a=c.key,h=l.key;if(a===h)return 0;if(void 0===a)return 1;if(void 0===h)return-1;if(null===a)return 1;if(null===h)return-1;if("string"==typeof a&&"string"==typeof h)return a<h?-1:1;if("number"==typeof a&&"number"==typeof h)return a-h;if("boolean"==typeof a&&"boolean"==typeof h)return a<h?-1:1;const d=String(a),f=String(h);return d==f?0:d<f?-1:1}let Nn=(()=>{class c{}return c.\u0275fac=function(a){return new(a||c)},c.\u0275mod=Ut({type:c}),c.\u0275inj=kt({}),c})();const J8="browser";function Dr(c){return c===J8}let Upe=(()=>{class c{}return c.\u0275prov=Oe({token:c,providedIn:"root",factory:()=>new Gpe(Ae(Er),window)}),c})();class Gpe{constructor(l,a){this.document=l,this.window=a,this.offset=()=>[0,0]}setOffset(l){this.offset=Array.isArray(l)?()=>l:l}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(l){this.supportsScrolling()&&this.window.scrollTo(l[0],l[1])}scrollToAnchor(l){if(!this.supportsScrolling())return;const a=function zpe(c,l){const a=c.getElementById(l)||c.getElementsByName(l)[0];if(a)return a;if("function"==typeof c.createTreeWalker&&c.body&&(c.body.createShadowRoot||c.body.attachShadow)){const h=c.createTreeWalker(c.body,NodeFilter.SHOW_ELEMENT);let d=h.currentNode;for(;d;){const f=d.shadowRoot;if(f){const m=f.getElementById(l)||f.querySelector(`[name="${l}"]`);if(m)return m}d=h.nextNode()}}return null}(this.document,l);a&&(this.scrollToElement(a),a.focus())}setHistoryScrollRestoration(l){if(this.supportScrollRestoration()){const a=this.window.history;a&&a.scrollRestoration&&(a.scrollRestoration=l)}}scrollToElement(l){const a=l.getBoundingClientRect(),h=a.left+this.window.pageXOffset,d=a.top+this.window.pageYOffset,f=this.offset();this.window.scrollTo(h-f[0],d-f[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const l=e6(this.window.history)||e6(Object.getPrototypeOf(this.window.history));return!(!l||!l.writable&&!l.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function e6(c){return Object.getOwnPropertyDescriptor(c,"scrollRestoration")}class t6{}class eL extends class Hpe extends class Cfe{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function wfe(c){Xw||(Xw=c)}(new eL)}onAndCancel(l,a,h){return l.addEventListener(a,h,!1),()=>{l.removeEventListener(a,h,!1)}}dispatchEvent(l,a){l.dispatchEvent(a)}remove(l){l.parentNode&&l.parentNode.removeChild(l)}createElement(l,a){return(a=a||this.getDefaultDocument()).createElement(l)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(l){return l.nodeType===Node.ELEMENT_NODE}isShadowRoot(l){return l instanceof DocumentFragment}getGlobalEventTarget(l,a){return"window"===a?window:"document"===a?l:"body"===a?l.body:null}getBaseHref(l){const a=function jpe(){return X0=X0||document.querySelector("base"),X0?X0.getAttribute("href"):null}();return null==a?null:function Wpe(c){rC=rC||document.createElement("a"),rC.setAttribute("href",c);const l=rC.pathname;return"/"===l.charAt(0)?l:`/${l}`}(a)}resetBaseElement(){X0=null}getUserAgent(){return window.navigator.userAgent}getCookie(l){return W8(document.cookie,l)}}let rC,X0=null;const n6=new Vt("TRANSITION_ID"),qpe=[{provide:Uw,useFactory:function Xpe(c,l,a){return()=>{a.get(Gw).donePromise.then(()=>{const h=cu(),d=l.querySelectorAll(`style[ng-transition="${c}"]`);for(let f=0;f<d.length;f++)h.remove(d[f])})}},deps:[n6,Er,ti],multi:!0}];let Ype=(()=>{class c{build(){return new XMLHttpRequest}}return c.\u0275fac=function(a){return new(a||c)},c.\u0275prov=Oe({token:c,factory:c.\u0275fac}),c})();const iC=new Vt("EventManagerPlugins");let sC=(()=>{class c{constructor(a,h){this._zone=h,this._eventNameToPlugin=new Map,a.forEach(d=>d.manager=this),this._plugins=a.slice().reverse()}addEventListener(a,h,d){return this._findPluginFor(h).addEventListener(a,h,d)}addGlobalEventListener(a,h,d){return this._findPluginFor(h).addGlobalEventListener(a,h,d)}getZone(){return this._zone}_findPluginFor(a){const h=this._eventNameToPlugin.get(a);if(h)return h;const d=this._plugins;for(let f=0;f<d.length;f++){const m=d[f];if(m.supports(a))return this._eventNameToPlugin.set(a,m),m}throw new Error(`No event manager plugin found for event ${a}`)}}return c.\u0275fac=function(a){return new(a||c)(Ae(iC),Ae(kn))},c.\u0275prov=Oe({token:c,factory:c.\u0275fac}),c})();class r6{constructor(l){this._doc=l}addGlobalEventListener(l,a,h){const d=cu().getGlobalEventTarget(this._doc,l);if(!d)throw new Error(`Unsupported event target ${d} for event ${a}`);return this.addEventListener(d,a,h)}}let i6=(()=>{class c{constructor(){this._stylesSet=new Set}addStyles(a){const h=new Set;a.forEach(d=>{this._stylesSet.has(d)||(this._stylesSet.add(d),h.add(d))}),this.onStylesAdded(h)}onStylesAdded(a){}getAllStyles(){return Array.from(this._stylesSet)}}return c.\u0275fac=function(a){return new(a||c)},c.\u0275prov=Oe({token:c,factory:c.\u0275fac}),c})(),q0=(()=>{class c extends i6{constructor(a){super(),this._doc=a,this._hostNodes=new Map,this._hostNodes.set(a.head,[])}_addStylesToHost(a,h,d){a.forEach(f=>{const m=this._doc.createElement("style");m.textContent=f,d.push(h.appendChild(m))})}addHost(a){const h=[];this._addStylesToHost(this._stylesSet,a,h),this._hostNodes.set(a,h)}removeHost(a){const h=this._hostNodes.get(a);h&&h.forEach(s6),this._hostNodes.delete(a)}onStylesAdded(a){this._hostNodes.forEach((h,d)=>{this._addStylesToHost(a,d,h)})}ngOnDestroy(){this._hostNodes.forEach(a=>a.forEach(s6))}}return c.\u0275fac=function(a){return new(a||c)(Ae(Er))},c.\u0275prov=Oe({token:c,factory:c.\u0275fac}),c})();function s6(c){cu().remove(c)}const tL={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},nL=/%COMP%/g;function oC(c,l,a){for(let h=0;h<l.length;h++){let d=l[h];Array.isArray(d)?oC(c,d,a):(d=d.replace(nL,c),a.push(d))}return a}function l6(c){return l=>{if("__ngUnwrap__"===l)return c;!1===c(l)&&(l.preventDefault(),l.returnValue=!1)}}let aC=(()=>{class c{constructor(a,h,d){this.eventManager=a,this.sharedStylesHost=h,this.appId=d,this.rendererByCompId=new Map,this.defaultRenderer=new rL(a)}createRenderer(a,h){if(!a||!h)return this.defaultRenderer;switch(h.encapsulation){case nc.Emulated:{let d=this.rendererByCompId.get(h.id);return d||(d=new tme(this.eventManager,this.sharedStylesHost,h,this.appId),this.rendererByCompId.set(h.id,d)),d.applyToHost(a),d}case 1:case nc.ShadowDom:return new nme(this.eventManager,this.sharedStylesHost,a,h);default:if(!this.rendererByCompId.has(h.id)){const d=oC(h.id,h.styles,[]);this.sharedStylesHost.addStyles(d),this.rendererByCompId.set(h.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return c.\u0275fac=function(a){return new(a||c)(Ae(sC),Ae(q0),Ae(U0))},c.\u0275prov=Oe({token:c,factory:c.\u0275fac}),c})();class rL{constructor(l){this.eventManager=l,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(l,a){return a?document.createElementNS(tL[a]||a,l):document.createElement(l)}createComment(l){return document.createComment(l)}createText(l){return document.createTextNode(l)}appendChild(l,a){(u6(l)?l.content:l).appendChild(a)}insertBefore(l,a,h){l&&(u6(l)?l.content:l).insertBefore(a,h)}removeChild(l,a){l&&l.removeChild(a)}selectRootElement(l,a){let h="string"==typeof l?document.querySelector(l):l;if(!h)throw new Error(`The selector "${l}" did not match any elements`);return a||(h.textContent=""),h}parentNode(l){return l.parentNode}nextSibling(l){return l.nextSibling}setAttribute(l,a,h,d){if(d){a=d+":"+a;const f=tL[d];f?l.setAttributeNS(f,a,h):l.setAttribute(a,h)}else l.setAttribute(a,h)}removeAttribute(l,a,h){if(h){const d=tL[h];d?l.removeAttributeNS(d,a):l.removeAttribute(`${h}:${a}`)}else l.removeAttribute(a)}addClass(l,a){l.classList.add(a)}removeClass(l,a){l.classList.remove(a)}setStyle(l,a,h,d){d&(Sa.DashCase|Sa.Important)?l.style.setProperty(a,h,d&Sa.Important?"important":""):l.style[a]=h}removeStyle(l,a,h){h&Sa.DashCase?l.style.removeProperty(a):l.style[a]=""}setProperty(l,a,h){l[a]=h}setValue(l,a){l.nodeValue=a}listen(l,a,h){return"string"==typeof l?this.eventManager.addGlobalEventListener(l,a,l6(h)):this.eventManager.addEventListener(l,a,l6(h))}}function u6(c){return"TEMPLATE"===c.tagName&&void 0!==c.content}class tme extends rL{constructor(l,a,h,d){super(l),this.component=h;const f=oC(d+"-"+h.id,h.styles,[]);a.addStyles(f),this.contentAttr=function Qpe(c){return"_ngcontent-%COMP%".replace(nL,c)}(d+"-"+h.id),this.hostAttr=function Jpe(c){return"_nghost-%COMP%".replace(nL,c)}(d+"-"+h.id)}applyToHost(l){super.setAttribute(l,this.hostAttr,"")}createElement(l,a){const h=super.createElement(l,a);return super.setAttribute(h,this.contentAttr,""),h}}class nme extends rL{constructor(l,a,h,d){super(l),this.sharedStylesHost=a,this.hostEl=h,this.shadowRoot=h.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const f=oC(d.id,d.styles,[]);for(let m=0;m<f.length;m++){const g=document.createElement("style");g.textContent=f[m],this.shadowRoot.appendChild(g)}}nodeOrShadowRoot(l){return l===this.hostEl?this.shadowRoot:l}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(l,a){return super.appendChild(this.nodeOrShadowRoot(l),a)}insertBefore(l,a,h){return super.insertBefore(this.nodeOrShadowRoot(l),a,h)}removeChild(l,a){return super.removeChild(this.nodeOrShadowRoot(l),a)}parentNode(l){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(l)))}}let rme=(()=>{class c extends r6{constructor(a){super(a)}supports(a){return!0}addEventListener(a,h,d){return a.addEventListener(h,d,!1),()=>this.removeEventListener(a,h,d)}removeEventListener(a,h,d){return a.removeEventListener(h,d)}}return c.\u0275fac=function(a){return new(a||c)(Ae(Er))},c.\u0275prov=Oe({token:c,factory:c.\u0275fac}),c})();const h6=["alt","control","meta","shift"],sme={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},d6={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},ome={alt:c=>c.altKey,control:c=>c.ctrlKey,meta:c=>c.metaKey,shift:c=>c.shiftKey};let ame=(()=>{class c extends r6{constructor(a){super(a)}supports(a){return null!=c.parseEventName(a)}addEventListener(a,h,d){const f=c.parseEventName(h),m=c.eventCallback(f.fullKey,d,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>cu().onAndCancel(a,f.domEventName,m))}static parseEventName(a){const h=a.toLowerCase().split("."),d=h.shift();if(0===h.length||"keydown"!==d&&"keyup"!==d)return null;const f=c._normalizeKey(h.pop());let m="";if(h6.forEach(y=>{const v=h.indexOf(y);v>-1&&(h.splice(v,1),m+=y+".")}),m+=f,0!=h.length||0===f.length)return null;const g={};return g.domEventName=d,g.fullKey=m,g}static getEventFullKey(a){let h="",d=function lme(c){let l=c.key;if(null==l){if(l=c.keyIdentifier,null==l)return"Unidentified";l.startsWith("U+")&&(l=String.fromCharCode(parseInt(l.substring(2),16)),3===c.location&&d6.hasOwnProperty(l)&&(l=d6[l]))}return sme[l]||l}(a);return d=d.toLowerCase()," "===d?d="space":"."===d&&(d="dot"),h6.forEach(f=>{f!=d&&(0,ome[f])(a)&&(h+=f+".")}),h+=d,h}static eventCallback(a,h,d){return f=>{c.getEventFullKey(f)===a&&d.runGuarded(()=>h(f))}}static _normalizeKey(a){return"esc"===a?"escape":a}}return c.\u0275fac=function(a){return new(a||c)(Ae(Er))},c.\u0275prov=Oe({token:c,factory:c.\u0275fac}),c})();const f6=[{provide:wi,useValue:J8},{provide:n8,useValue:function cme(){eL.makeCurrent()},multi:!0},{provide:Er,useFactory:function hme(){return function Voe(c){BI=c}(document),document},deps:[]}],dme=f8(Sfe,"browser",f6),p6=new Vt(""),m6=[{provide:zw,useClass:class $pe{addToWindow(l){si.getAngularTestability=(h,d=!0)=>{const f=l.findTestabilityInTree(h,d);if(null==f)throw new Error("Could not find testability for element.");return f},si.getAllAngularTestabilities=()=>l.getAllTestabilities(),si.getAllAngularRootElements=()=>l.getAllRootElements(),si.frameworkStabilizers||(si.frameworkStabilizers=[]),si.frameworkStabilizers.push(h=>{const d=si.getAllAngularTestabilities();let f=d.length,m=!1;const g=function(y){m=m||y,f--,0==f&&h(m)};d.forEach(function(y){y.whenStable(g)})})}findTestabilityInTree(l,a,h){return null==a?null:l.getTestability(a)??(h?cu().isShadowRoot(a)?this.findTestabilityInTree(l,a.host,!0):this.findTestabilityInTree(l,a.parentElement,!0):null)}},deps:[]},{provide:c8,useClass:MP,deps:[kn,DP,zw]},{provide:MP,useClass:MP,deps:[kn,DP,zw]}],g6=[{provide:YI,useValue:"root"},{provide:Og,useFactory:function ume(){return new Og},deps:[]},{provide:iC,useClass:rme,multi:!0,deps:[Er,kn,wi]},{provide:iC,useClass:ame,multi:!0,deps:[Er]},{provide:aC,useClass:aC,deps:[sC,q0,U0]},{provide:Lg,useExisting:aC},{provide:i6,useExisting:q0},{provide:q0,useClass:q0,deps:[Er]},{provide:sC,useClass:sC,deps:[iC,kn]},{provide:t6,useClass:Ype,deps:[]},[]];let y6=(()=>{class c{constructor(a){}static withServerTransition(a){return{ngModule:c,providers:[{provide:U0,useValue:a.appId},{provide:n6,useExisting:U0},qpe]}}}return c.\u0275fac=function(a){return new(a||c)(Ae(p6,12))},c.\u0275mod=Ut({type:c}),c.\u0275inj=kt({providers:[...g6,...m6],imports:[Nn,bfe]}),c})(),v6=(()=>{class c{constructor(a){this._doc=a}getTitle(){return this._doc.title}setTitle(a){this._doc.title=a||""}}return c.\u0275fac=function(a){return new(a||c)(Ae(Er))},c.\u0275prov=Oe({token:c,factory:function(a){let h=null;return h=a?new a:function pme(){return new v6(Ae(Er))}(),h},providedIn:"root"}),c})();function St(...c){let l=c[c.length-1];return Se(l)?(c.pop(),QA(c,l)):JA(c)}typeof window<"u"&&window;class Nr extends Ke{constructor(l){super(),this._value=l}get value(){return this.getValue()}_subscribe(l){const a=super._subscribe(l);return a&&!a.closed&&l.next(this._value),a}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new Sr;return this._value}next(l){super.next(this._value=l)}}class Tme extends ee{notifyNext(l,a,h,d,f){this.destination.next(a)}notifyError(l,a){this.destination.error(l)}notifyComplete(l){this.destination.complete()}}class wme extends ee{constructor(l,a,h){super(),this.parent=l,this.outerValue=a,this.outerIndex=h,this.index=0}_next(l){this.parent.notifyNext(this.outerValue,l,this.outerIndex,this.index++,this)}_error(l){this.parent.notifyError(l,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}function Cme(c,l,a,h,d=new wme(c,a,h)){if(!d.closed)return l instanceof wt?l.subscribe(d):KA(l)(d)}const b6={};function lC(...c){let l,a;return Se(c[c.length-1])&&(a=c.pop()),"function"==typeof c[c.length-1]&&(l=c.pop()),1===c.length&&Ee(c[0])&&(c=c[0]),JA(c,a).lift(new xme(l))}class xme{constructor(l){this.resultSelector=l}call(l,a){return a.subscribe(new Eme(l,this.resultSelector))}}class Eme extends Tme{constructor(l,a){super(l),this.resultSelector=a,this.active=0,this.values=[],this.observables=[]}_next(l){this.values.push(b6),this.observables.push(l)}_complete(){const l=this.observables,a=l.length;if(0===a)this.destination.complete();else{this.active=a,this.toRespond=a;for(let h=0;h<a;h++)this.add(Cme(this,l[h],void 0,h))}}notifyComplete(l){0==(this.active-=1)&&this.destination.complete()}notifyNext(l,a,h){const d=this.values,m=this.toRespond?d[h]===b6?--this.toRespond:this.toRespond:0;d[h]=a,0===m&&(this.resultSelector?this._tryResultSelector(d):this.destination.next(d.slice()))}_tryResultSelector(l){let a;try{a=this.resultSelector.apply(this,l)}catch(h){return void this.destination.error(h)}this.destination.next(a)}}function cC(...c){return function Mme(){return hg(1)}()(St(...c))}const ay=new wt(c=>c.complete());function uC(c){return c?function Dme(c){return new wt(l=>c.schedule(()=>l.complete()))}(c):ay}function T6(c){return new wt(l=>{let a;try{a=c()}catch(d){return void l.error(d)}return(a?Ls(a):uC()).subscribe(l)})}function ly(c,l){return new wt(l?a=>l.schedule(Ame,0,{error:c,subscriber:a}):a=>a.error(c))}function Ame({error:c,subscriber:l}){l.error(c)}const cy=(()=>{function c(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return c.prototype=Object.create(Error.prototype),c})();function wa(c,l){return"function"==typeof l?a=>a.pipe(wa((h,d)=>Ls(c(h,d)).pipe(ve((f,m)=>l(h,f,d,m))))):a=>a.lift(new Ime(c))}class Ime{constructor(l){this.project=l}call(l,a){return a.subscribe(new Rme(l,this.project))}}class Rme extends cg{constructor(l,a){super(l),this.project=a,this.index=0}_next(l){let a;const h=this.index++;try{a=this.project(l,h)}catch(d){return void this.destination.error(d)}this._innerSub(a)}_innerSub(l){const a=this.innerSubscription;a&&a.unsubscribe();const h=new lg(this),d=this.destination;d.add(h),this.innerSubscription=ug(l,h),this.innerSubscription!==h&&d.add(this.innerSubscription)}_complete(){const{innerSubscription:l}=this;(!l||l.closed)&&super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=void 0}notifyComplete(){this.innerSubscription=void 0,this.isStopped&&super._complete()}notifyNext(l){this.destination.next(l)}}const w6=(()=>{function c(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return c.prototype=Object.create(Error.prototype),c})();function dh(c){return l=>0===c?uC():l.lift(new Pme(c))}class Pme{constructor(l){if(this.total=l,this.total<0)throw new w6}call(l,a){return a.subscribe(new Lme(l,this.total))}}class Lme extends ee{constructor(l,a){super(l),this.total=a,this.count=0}_next(l){const a=this.total,h=++this.count;h<=a&&(this.destination.next(l),h===a&&(this.destination.complete(),this.unsubscribe()))}}function Dd(...c){const l=c[c.length-1];return Se(l)?(c.pop(),a=>cC(c,a,l)):a=>cC(c,a)}function qr(c,l){return function(h){return h.lift(new Ome(c,l))}}class Ome{constructor(l,a){this.predicate=l,this.thisArg=a}call(l,a){return a.subscribe(new Nme(l,this.predicate,this.thisArg))}}class Nme extends ee{constructor(l,a,h){super(l),this.predicate=a,this.thisArg=h,this.count=0}_next(l){let a;try{a=this.predicate.call(this.thisArg,l,this.count++)}catch(h){return void this.destination.error(h)}a&&this.destination.next(l)}}function hC(c=null){return l=>l.lift(new Fme(c))}class Fme{constructor(l){this.defaultValue=l}call(l,a){return a.subscribe(new kme(l,this.defaultValue))}}class kme extends ee{constructor(l,a){super(l),this.defaultValue=a,this.isEmpty=!0}_next(l){this.isEmpty=!1,this.destination.next(l)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}function C6(c=Ume){return l=>l.lift(new Vme(c))}class Vme{constructor(l){this.errorFactory=l}call(l,a){return a.subscribe(new Bme(l,this.errorFactory))}}class Bme extends ee{constructor(l,a){super(l),this.errorFactory=a,this.hasValue=!1}_next(l){this.hasValue=!0,this.destination.next(l)}_complete(){if(this.hasValue)return this.destination.complete();{let l;try{l=this.errorFactory()}catch(a){l=a}this.destination.error(l)}}}function Ume(){return new cy}function qa(c,l){const a=arguments.length>=2;return h=>h.pipe(c?qr((d,f)=>c(d,f,h)):Ge,dh(1),a?hC(l):C6(()=>new cy))}function Ad(c,l){return gs(c,l,1)}function Id(){}function Li(c,l,a){return function(d){return d.lift(new Gme(c,l,a))}}class Gme{constructor(l,a,h){this.nextOrObserver=l,this.error=a,this.complete=h}call(l,a){return a.subscribe(new zme(l,this.nextOrObserver,this.error,this.complete))}}class zme extends ee{constructor(l,a,h,d){super(l),this._tapNext=Id,this._tapError=Id,this._tapComplete=Id,this._tapError=h||Id,this._tapComplete=d||Id,Lt(a)?(this._context=this,this._tapNext=a):a&&(this._context=a,this._tapNext=a.next||Id,this._tapError=a.error||Id,this._tapComplete=a.complete||Id)}_next(l){try{this._tapNext.call(this._context,l)}catch(a){return void this.destination.error(a)}this.destination.next(l)}_error(l){try{this._tapError.call(this._context,l)}catch(a){return void this.destination.error(a)}this.destination.error(l)}_complete(){try{this._tapComplete.call(this._context)}catch(l){return void this.destination.error(l)}return this.destination.complete()}}function Rd(c){return function(a){const h=new Hme(c),d=a.lift(h);return h.caught=d}}class Hme{constructor(l){this.selector=l}call(l,a){return a.subscribe(new jme(l,this.selector,this.caught))}}class jme extends cg{constructor(l,a,h){super(l),this.selector=a,this.caught=h}error(l){if(!this.isStopped){let a;try{a=this.selector(l,this.caught)}catch(f){return void super.error(f)}this._unsubscribeAndRecycle();const h=new lg(this);this.add(h);const d=ug(a,h);d!==h&&this.add(d)}}}function x6(c,l){let a=!1;return arguments.length>=2&&(a=!0),function(d){return d.lift(new Wme(c,l,a))}}class Wme{constructor(l,a,h=!1){this.accumulator=l,this.seed=a,this.hasSeed=h}call(l,a){return a.subscribe(new Xme(l,this.accumulator,this.seed,this.hasSeed))}}class Xme extends ee{constructor(l,a,h,d){super(l),this.accumulator=a,this._seed=h,this.hasSeed=d,this.index=0}get seed(){return this._seed}set seed(l){this.hasSeed=!0,this._seed=l}_next(l){if(this.hasSeed)return this._tryNext(l);this.seed=l,this.destination.next(l)}_tryNext(l){const a=this.index++;let h;try{h=this.accumulator(this.seed,l,a)}catch(d){this.destination.error(d)}this.seed=h,this.destination.next(h)}}function oL(c){return function(a){return 0===c?uC():a.lift(new qme(c))}}class qme{constructor(l){if(this.total=l,this.total<0)throw new w6}call(l,a){return a.subscribe(new $me(l,this.total))}}class $me extends ee{constructor(l,a){super(l),this.total=a,this.ring=new Array,this.count=0}_next(l){const a=this.ring,h=this.total,d=this.count++;a.length<h?a.push(l):a[d%h]=l}_complete(){const l=this.destination;let a=this.count;if(a>0){const h=this.count>=this.total?this.total:this.count,d=this.ring;for(let f=0;f<h;f++){const m=a++%h;l.next(d[m])}}l.complete()}}function E6(c,l){const a=arguments.length>=2;return h=>h.pipe(c?qr((d,f)=>c(d,f,h)):Ge,oL(1),a?hC(l):C6(()=>new cy))}class Zme{constructor(l,a){this.predicate=l,this.inclusive=a}call(l,a){return a.subscribe(new Kme(l,this.predicate,this.inclusive))}}class Kme extends ee{constructor(l,a,h){super(l),this.predicate=a,this.inclusive=h,this.index=0}_next(l){const a=this.destination;let h;try{h=this.predicate(l,this.index++)}catch(d){return void a.error(d)}this.nextOrComplete(l,h)}nextOrComplete(l,a){const h=this.destination;Boolean(a)?h.next(l):(this.inclusive&&h.next(l),h.complete())}}class Jme{constructor(l){this.value=l}call(l,a){return a.subscribe(new ege(l,this.value))}}class ege extends ee{constructor(l,a){super(l),this.value=a}_next(l){this.destination.next(this.value)}}function aL(c){return l=>l.lift(new tge(c))}class tge{constructor(l){this.callback=l}call(l,a){return a.subscribe(new nge(l,this.callback))}}class nge extends ee{constructor(l,a){super(l),this.add(new O(a))}}const dr="primary";class rge{constructor(l){this.params=l||{}}has(l){return Object.prototype.hasOwnProperty.call(this.params,l)}get(l){if(this.has(l)){const a=this.params[l];return Array.isArray(a)?a[0]:a}return null}getAll(l){if(this.has(l)){const a=this.params[l];return Array.isArray(a)?a:[a]}return[]}get keys(){return Object.keys(this.params)}}function uy(c){return new rge(c)}function ige(c,l,a){const h=a.path.split("/");if(h.length>c.length||"full"===a.pathMatch&&(l.hasChildren()||h.length<c.length))return null;const d={};for(let f=0;f<h.length;f++){const m=h[f],g=c[f];if(m.startsWith(":"))d[m.substring(1)]=g;else if(m!==g.path)return null}return{consumed:c.slice(0,h.length),posParams:d}}function uu(c,l){const a=c?Object.keys(c):void 0,h=l?Object.keys(l):void 0;if(!a||!h||a.length!=h.length)return!1;let d;for(let f=0;f<a.length;f++)if(d=a[f],!M6(c[d],l[d]))return!1;return!0}function M6(c,l){if(Array.isArray(c)&&Array.isArray(l)){if(c.length!==l.length)return!1;const a=[...c].sort(),h=[...l].sort();return a.every((d,f)=>h[f]===d)}return c===l}function D6(c){return Array.prototype.concat.apply([],c)}function A6(c){return c.length>0?c[c.length-1]:null}function ao(c,l){for(const a in c)c.hasOwnProperty(a)&&l(c[a],a)}function fh(c){return QR(c)?c:A0(c)?Ls(Promise.resolve(c)):St(c)}const age={exact:function P6(c,l,a){if(!Ap(c.segments,l.segments)||!dC(c.segments,l.segments,a)||c.numberOfChildren!==l.numberOfChildren)return!1;for(const h in l.children)if(!c.children[h]||!P6(c.children[h],l.children[h],a))return!1;return!0},subset:L6},I6={exact:function lge(c,l){return uu(c,l)},subset:function cge(c,l){return Object.keys(l).length<=Object.keys(c).length&&Object.keys(l).every(a=>M6(c[a],l[a]))},ignored:()=>!0};function R6(c,l,a){return age[a.paths](c.root,l.root,a.matrixParams)&&I6[a.queryParams](c.queryParams,l.queryParams)&&!("exact"===a.fragment&&c.fragment!==l.fragment)}function L6(c,l,a){return O6(c,l,l.segments,a)}function O6(c,l,a,h){if(c.segments.length>a.length){const d=c.segments.slice(0,a.length);return!(!Ap(d,a)||l.hasChildren()||!dC(d,a,h))}if(c.segments.length===a.length){if(!Ap(c.segments,a)||!dC(c.segments,a,h))return!1;for(const d in l.children)if(!c.children[d]||!L6(c.children[d],l.children[d],h))return!1;return!0}{const d=a.slice(0,c.segments.length),f=a.slice(c.segments.length);return!!(Ap(c.segments,d)&&dC(c.segments,d,h)&&c.children[dr])&&O6(c.children[dr],l,f,h)}}function dC(c,l,a){return l.every((h,d)=>I6[a](c[d].parameters,h.parameters))}class Dp{constructor(l,a,h){this.root=l,this.queryParams=a,this.fragment=h}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=uy(this.queryParams)),this._queryParamMap}toString(){return dge.serialize(this)}}class vr{constructor(l,a){this.segments=l,this.children=a,this.parent=null,ao(a,(h,d)=>h.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return fC(this)}}class $0{constructor(l,a){this.path=l,this.parameters=a}get parameterMap(){return this._parameterMap||(this._parameterMap=uy(this.parameters)),this._parameterMap}toString(){return B6(this)}}function Ap(c,l){return c.length===l.length&&c.every((a,h)=>a.path===l[h].path)}class N6{}class F6{parse(l){const a=new bge(l);return new Dp(a.parseRootSegment(),a.parseQueryParams(),a.parseFragment())}serialize(l){const a=`/${Y0(l.root,!0)}`,h=function mge(c){const l=Object.keys(c).map(a=>{const h=c[a];return Array.isArray(h)?h.map(d=>`${pC(a)}=${pC(d)}`).join("&"):`${pC(a)}=${pC(h)}`}).filter(a=>!!a);return l.length?`?${l.join("&")}`:""}(l.queryParams),d="string"==typeof l.fragment?`#${function fge(c){return encodeURI(c)}(l.fragment)}`:"";return`${a}${h}${d}`}}const dge=new F6;function fC(c){return c.segments.map(l=>B6(l)).join("/")}function Y0(c,l){if(!c.hasChildren())return fC(c);if(l){const a=c.children[dr]?Y0(c.children[dr],!1):"",h=[];return ao(c.children,(d,f)=>{f!==dr&&h.push(`${f}:${Y0(d,!1)}`)}),h.length>0?`${a}(${h.join("//")})`:a}{const a=function hge(c,l){let a=[];return ao(c.children,(h,d)=>{d===dr&&(a=a.concat(l(h,d)))}),ao(c.children,(h,d)=>{d!==dr&&(a=a.concat(l(h,d)))}),a}(c,(h,d)=>d===dr?[Y0(c.children[dr],!1)]:[`${d}:${Y0(h,!1)}`]);return 1===Object.keys(c.children).length&&null!=c.children[dr]?`${fC(c)}/${a[0]}`:`${fC(c)}/(${a.join("//")})`}}function k6(c){return encodeURIComponent(c).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function pC(c){return k6(c).replace(/%3B/gi,";")}function cL(c){return k6(c).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function mC(c){return decodeURIComponent(c)}function V6(c){return mC(c.replace(/\+/g,"%20"))}function B6(c){return`${cL(c.path)}${function pge(c){return Object.keys(c).map(l=>`;${cL(l)}=${cL(c[l])}`).join("")}(c.parameters)}`}const gge=/^[^\/()?;=#]+/;function gC(c){const l=c.match(gge);return l?l[0]:""}const yge=/^[^=?&#]+/,_ge=/^[^&#]+/;class bge{constructor(l){this.url=l,this.remaining=l}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new vr([],{}):new vr([],this.parseChildren())}parseQueryParams(){const l={};if(this.consumeOptional("?"))do{this.parseQueryParam(l)}while(this.consumeOptional("&"));return l}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const l=[];for(this.peekStartsWith("(")||l.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),l.push(this.parseSegment());let a={};this.peekStartsWith("/(")&&(this.capture("/"),a=this.parseParens(!0));let h={};return this.peekStartsWith("(")&&(h=this.parseParens(!1)),(l.length>0||Object.keys(a).length>0)&&(h[dr]=new vr(l,a)),h}parseSegment(){const l=gC(this.remaining);if(""===l&&this.peekStartsWith(";"))throw new it(4009,!1);return this.capture(l),new $0(mC(l),this.parseMatrixParams())}parseMatrixParams(){const l={};for(;this.consumeOptional(";");)this.parseParam(l);return l}parseParam(l){const a=gC(this.remaining);if(!a)return;this.capture(a);let h="";if(this.consumeOptional("=")){const d=gC(this.remaining);d&&(h=d,this.capture(h))}l[mC(a)]=mC(h)}parseQueryParam(l){const a=function vge(c){const l=c.match(yge);return l?l[0]:""}(this.remaining);if(!a)return;this.capture(a);let h="";if(this.consumeOptional("=")){const m=function Sge(c){const l=c.match(_ge);return l?l[0]:""}(this.remaining);m&&(h=m,this.capture(h))}const d=V6(a),f=V6(h);if(l.hasOwnProperty(d)){let m=l[d];Array.isArray(m)||(m=[m],l[d]=m),m.push(f)}else l[d]=f}parseParens(l){const a={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const h=gC(this.remaining),d=this.remaining[h.length];if("/"!==d&&")"!==d&&";"!==d)throw new it(4010,!1);let f;h.indexOf(":")>-1?(f=h.slice(0,h.indexOf(":")),this.capture(f),this.capture(":")):l&&(f=dr);const m=this.parseChildren();a[f]=1===Object.keys(m).length?m[dr]:new vr([],m),this.consumeOptional("//")}return a}peekStartsWith(l){return this.remaining.startsWith(l)}consumeOptional(l){return!!this.peekStartsWith(l)&&(this.remaining=this.remaining.substring(l.length),!0)}capture(l){if(!this.consumeOptional(l))throw new it(4011,!1)}}function uL(c){return c.segments.length>0?new vr([],{[dr]:c}):c}function yC(c){const l={};for(const h of Object.keys(c.children)){const f=yC(c.children[h]);(f.segments.length>0||f.hasChildren())&&(l[h]=f)}return function Tge(c){if(1===c.numberOfChildren&&c.children[dr]){const l=c.children[dr];return new vr(c.segments.concat(l.segments),l.children)}return c}(new vr(c.segments,l))}function Ip(c){return c instanceof Dp}function xge(c,l,a,h,d){if(0===a.length)return hy(l.root,l.root,l.root,h,d);const f=function z6(c){if("string"==typeof c[0]&&1===c.length&&"/"===c[0])return new G6(!0,0,c);let l=0,a=!1;const h=c.reduce((d,f,m)=>{if("object"==typeof f&&null!=f){if(f.outlets){const g={};return ao(f.outlets,(y,v)=>{g[v]="string"==typeof y?y.split("/"):y}),[...d,{outlets:g}]}if(f.segmentPath)return[...d,f.segmentPath]}return"string"!=typeof f?[...d,f]:0===m?(f.split("/").forEach((g,y)=>{0==y&&"."===g||(0==y&&""===g?a=!0:".."===g?l++:""!=g&&d.push(g))}),d):[...d,f]},[]);return new G6(a,l,h)}(a);return f.toRoot()?hy(l.root,l.root,new vr([],{}),h,d):function m(y){const v=function Mge(c,l,a,h){if(c.isAbsolute)return new dy(l.root,!0,0);if(-1===h)return new dy(a,a===l.root,0);return function H6(c,l,a){let h=c,d=l,f=a;for(;f>d;){if(f-=d,h=h.parent,!h)throw new it(4005,!1);d=h.segments.length}return new dy(h,!1,d-f)}(a,h+(Z0(c.commands[0])?0:1),c.numberOfDoubleDots)}(f,l,c.snapshot?._urlSegment,y),_=v.processChildren?Q0(v.segmentGroup,v.index,f.commands):dL(v.segmentGroup,v.index,f.commands);return hy(l.root,v.segmentGroup,_,h,d)}(c.snapshot?._lastPathIndex)}function Z0(c){return"object"==typeof c&&null!=c&&!c.outlets&&!c.segmentPath}function K0(c){return"object"==typeof c&&null!=c&&c.outlets}function hy(c,l,a,h,d){let m,f={};h&&ao(h,(y,v)=>{f[v]=Array.isArray(y)?y.map(_=>`${_}`):`${y}`}),m=c===l?a:U6(c,l,a);const g=uL(yC(m));return new Dp(g,f,d)}function U6(c,l,a){const h={};return ao(c.children,(d,f)=>{h[f]=d===l?a:U6(d,l,a)}),new vr(c.segments,h)}class G6{constructor(l,a,h){if(this.isAbsolute=l,this.numberOfDoubleDots=a,this.commands=h,l&&h.length>0&&Z0(h[0]))throw new it(4003,!1);const d=h.find(K0);if(d&&d!==A6(h))throw new it(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class dy{constructor(l,a,h){this.segmentGroup=l,this.processChildren=a,this.index=h}}function dL(c,l,a){if(c||(c=new vr([],{})),0===c.segments.length&&c.hasChildren())return Q0(c,l,a);const h=function Age(c,l,a){let h=0,d=l;const f={match:!1,pathIndex:0,commandIndex:0};for(;d<c.segments.length;){if(h>=a.length)return f;const m=c.segments[d],g=a[h];if(K0(g))break;const y=`${g}`,v=h<a.length-1?a[h+1]:null;if(d>0&&void 0===y)break;if(y&&v&&"object"==typeof v&&void 0===v.outlets){if(!W6(y,v,m))return f;h+=2}else{if(!W6(y,{},m))return f;h++}d++}return{match:!0,pathIndex:d,commandIndex:h}}(c,l,a),d=a.slice(h.commandIndex);if(h.match&&h.pathIndex<c.segments.length){const f=new vr(c.segments.slice(0,h.pathIndex),{});return f.children[dr]=new vr(c.segments.slice(h.pathIndex),c.children),Q0(f,0,d)}return h.match&&0===d.length?new vr(c.segments,{}):h.match&&!c.hasChildren()?fL(c,l,a):h.match?Q0(c,0,d):fL(c,l,a)}function Q0(c,l,a){if(0===a.length)return new vr(c.segments,{});{const h=function Dge(c){return K0(c[0])?c[0].outlets:{[dr]:c}}(a),d={};return ao(h,(f,m)=>{"string"==typeof f&&(f=[f]),null!==f&&(d[m]=dL(c.children[m],l,f))}),ao(c.children,(f,m)=>{void 0===h[m]&&(d[m]=f)}),new vr(c.segments,d)}}function fL(c,l,a){const h=c.segments.slice(0,l);let d=0;for(;d<a.length;){const f=a[d];if(K0(f)){const y=Ige(f.outlets);return new vr(h,y)}if(0===d&&Z0(a[0])){h.push(new $0(c.segments[l].path,j6(a[0]))),d++;continue}const m=K0(f)?f.outlets[dr]:`${f}`,g=d<a.length-1?a[d+1]:null;m&&g&&Z0(g)?(h.push(new $0(m,j6(g))),d+=2):(h.push(new $0(m,{})),d++)}return new vr(h,{})}function Ige(c){const l={};return ao(c,(a,h)=>{"string"==typeof a&&(a=[a]),null!==a&&(l[h]=fL(new vr([],{}),0,a))}),l}function j6(c){const l={};return ao(c,(a,h)=>l[h]=`${a}`),l}function W6(c,l,a){return c==a.path&&uu(l,a.parameters)}class ph{constructor(l,a){this.id=l,this.url=a}}class vC extends ph{constructor(l,a,h="imperative",d=null){super(l,a),this.type=0,this.navigationTrigger=h,this.restoredState=d}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Pd extends ph{constructor(l,a,h){super(l,a),this.urlAfterRedirects=h,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class _C extends ph{constructor(l,a,h,d){super(l,a),this.reason=h,this.code=d,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class X6 extends ph{constructor(l,a,h,d){super(l,a),this.error=h,this.target=d,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Rge extends ph{constructor(l,a,h,d){super(l,a),this.urlAfterRedirects=h,this.state=d,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Pge extends ph{constructor(l,a,h,d){super(l,a),this.urlAfterRedirects=h,this.state=d,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Lge extends ph{constructor(l,a,h,d,f){super(l,a),this.urlAfterRedirects=h,this.state=d,this.shouldActivate=f,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Oge extends ph{constructor(l,a,h,d){super(l,a),this.urlAfterRedirects=h,this.state=d,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Nge extends ph{constructor(l,a,h,d){super(l,a),this.urlAfterRedirects=h,this.state=d,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Fge{constructor(l){this.route=l,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class kge{constructor(l){this.route=l,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Vge{constructor(l){this.snapshot=l,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Bge{constructor(l){this.snapshot=l,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Uge{constructor(l){this.snapshot=l,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Gge{constructor(l){this.snapshot=l,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class q6{constructor(l,a,h){this.routerEvent=l,this.position=a,this.anchor=h,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class $6{constructor(l){this._root=l}get root(){return this._root.value}parent(l){const a=this.pathFromRoot(l);return a.length>1?a[a.length-2]:null}children(l){const a=pL(l,this._root);return a?a.children.map(h=>h.value):[]}firstChild(l){const a=pL(l,this._root);return a&&a.children.length>0?a.children[0].value:null}siblings(l){const a=mL(l,this._root);return a.length<2?[]:a[a.length-2].children.map(d=>d.value).filter(d=>d!==l)}pathFromRoot(l){return mL(l,this._root).map(a=>a.value)}}function pL(c,l){if(c===l.value)return l;for(const a of l.children){const h=pL(c,a);if(h)return h}return null}function mL(c,l){if(c===l.value)return[l];for(const a of l.children){const h=mL(c,a);if(h.length)return h.unshift(l),h}return[]}class mh{constructor(l,a){this.value=l,this.children=a}toString(){return`TreeNode(${this.value})`}}function fy(c){const l={};return c&&c.children.forEach(a=>l[a.value.outlet]=a),l}class Y6 extends $6{constructor(l,a){super(l),this.snapshot=a,gL(this,l)}toString(){return this.snapshot.toString()}}function Z6(c,l){const a=function Hge(c,l){const m=new SC([],{},{},"",{},dr,l,null,c.root,-1,{});return new Q6("",new mh(m,[]))}(c,l),h=new Nr([new $0("",{})]),d=new Nr({}),f=new Nr({}),m=new Nr({}),g=new Nr(""),y=new Rp(h,d,m,g,f,dr,l,a.root);return y.snapshot=a.root,new Y6(new mh(y,[]),a)}class Rp{constructor(l,a,h,d,f,m,g,y){this.url=l,this.params=a,this.queryParams=h,this.fragment=d,this.data=f,this.outlet=m,this.component=g,this._futureSnapshot=y}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(ve(l=>uy(l)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(ve(l=>uy(l)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function K6(c,l="emptyOnly"){const a=c.pathFromRoot;let h=0;if("always"!==l)for(h=a.length-1;h>=1;){const d=a[h],f=a[h-1];if(d.routeConfig&&""===d.routeConfig.path)h--;else{if(f.component)break;h--}}return function jge(c){return c.reduce((l,a)=>({params:{...l.params,...a.params},data:{...l.data,...a.data},resolve:{...a.data,...l.resolve,...a.routeConfig?.data,...a._resolvedData}}),{params:{},data:{},resolve:{}})}(a.slice(h))}class SC{constructor(l,a,h,d,f,m,g,y,v,_,S,b){this.url=l,this.params=a,this.queryParams=h,this.fragment=d,this.data=f,this.outlet=m,this.component=g,this.routeConfig=y,this._urlSegment=v,this._lastPathIndex=_,this._correctedLastPathIndex=b??_,this._resolve=S}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=uy(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=uy(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(h=>h.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Q6 extends $6{constructor(l,a){super(a),this.url=l,gL(this,a)}toString(){return J6(this._root)}}function gL(c,l){l.value._routerState=c,l.children.forEach(a=>gL(c,a))}function J6(c){const l=c.children.length>0?` { ${c.children.map(J6).join(", ")} } `:"";return`${c.value}${l}`}function yL(c){if(c.snapshot){const l=c.snapshot,a=c._futureSnapshot;c.snapshot=a,uu(l.queryParams,a.queryParams)||c.queryParams.next(a.queryParams),l.fragment!==a.fragment&&c.fragment.next(a.fragment),uu(l.params,a.params)||c.params.next(a.params),function sge(c,l){if(c.length!==l.length)return!1;for(let a=0;a<c.length;++a)if(!uu(c[a],l[a]))return!1;return!0}(l.url,a.url)||c.url.next(a.url),uu(l.data,a.data)||c.data.next(a.data)}else c.snapshot=c._futureSnapshot,c.data.next(c._futureSnapshot.data)}function vL(c,l){const a=uu(c.params,l.params)&&function uge(c,l){return Ap(c,l)&&c.every((a,h)=>uu(a.parameters,l[h].parameters))}(c.url,l.url);return a&&!(!c.parent!=!l.parent)&&(!c.parent||vL(c.parent,l.parent))}function J0(c,l,a){if(a&&c.shouldReuseRoute(l.value,a.value.snapshot)){const h=a.value;h._futureSnapshot=l.value;const d=function Xge(c,l,a){return l.children.map(h=>{for(const d of a.children)if(c.shouldReuseRoute(h.value,d.value.snapshot))return J0(c,h,d);return J0(c,h)})}(c,l,a);return new mh(h,d)}{if(c.shouldAttach(l.value)){const f=c.retrieve(l.value);if(null!==f){const m=f.route;return m.value._futureSnapshot=l.value,m.children=l.children.map(g=>J0(c,g)),m}}const h=function qge(c){return new Rp(new Nr(c.url),new Nr(c.params),new Nr(c.queryParams),new Nr(c.fragment),new Nr(c.data),c.outlet,c.component,c)}(l.value),d=l.children.map(f=>J0(c,f));return new mh(h,d)}}const _L="ngNavigationCancelingError";function eH(c,l){const{redirectTo:a,navigationBehaviorOptions:h}=Ip(l)?{redirectTo:l,navigationBehaviorOptions:void 0}:l,d=tH(!1,0,l);return d.url=a,d.navigationBehaviorOptions=h,d}function tH(c,l,a){const h=new Error("NavigationCancelingError: "+(c||""));return h[_L]=!0,h.cancellationCode=l,a&&(h.url=a),h}function nH(c){return rH(c)&&Ip(c.url)}function rH(c){return c&&c[_L]}class $ge{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new eS,this.attachRef=null}}class eS{constructor(){this.contexts=new Map}onChildOutletCreated(l,a){const h=this.getOrCreateContext(l);h.outlet=a,this.contexts.set(l,h)}onChildOutletDestroyed(l){const a=this.getContext(l);a&&(a.outlet=null,a.attachRef=null)}onOutletDeactivated(){const l=this.contexts;return this.contexts=new Map,l}onOutletReAttached(l){this.contexts=l}getOrCreateContext(l){let a=this.getContext(l);return a||(a=new $ge,this.contexts.set(l,a)),a}getContext(l){return this.contexts.get(l)||null}}const bC=!1;let SL=(()=>{class c{constructor(a,h,d,f,m){this.parentContexts=a,this.location=h,this.changeDetector=f,this.environmentInjector=m,this.activated=null,this._activatedRoute=null,this.activateEvents=new rt,this.deactivateEvents=new rt,this.attachEvents=new rt,this.detachEvents=new rt,this.name=d||dr,a.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.getContext(this.name)?.outlet===this&&this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const a=this.parentContexts.getContext(this.name);a&&a.route&&(a.attachRef?this.attach(a.attachRef,a.route):this.activateWith(a.route,a.injector))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new it(4012,bC);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new it(4012,bC);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new it(4012,bC);this.location.detach();const a=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(a.instance),a}attach(a,h){this.activated=a,this._activatedRoute=h,this.location.insert(a.hostView),this.attachEvents.emit(a.instance)}deactivate(){if(this.activated){const a=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(a)}}activateWith(a,h){if(this.isActivated)throw new it(4013,bC);this._activatedRoute=a;const d=this.location,m=a._futureSnapshot.component,g=this.parentContexts.getOrCreateContext(this.name).children,y=new Yge(a,g,d.injector);if(h&&function Zge(c){return!!c.resolveComponentFactory}(h)){const v=h.resolveComponentFactory(m);this.activated=d.createComponent(v,d.length,y)}else this.activated=d.createComponent(m,{index:d.length,injector:y,environmentInjector:h??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return c.\u0275fac=function(a){return new(a||c)(N(eS),N(Zn),Tg("name"),N(Ss),N(wd))},c.\u0275dir=We({type:c,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),c})();class Yge{constructor(l,a,h){this.route=l,this.childContexts=a,this.parent=h}get(l,a){return l===Rp?this.route:l===eS?this.childContexts:this.parent.get(l,a)}}let iH=(()=>{class c{}return c.\u0275fac=function(a){return new(a||c)},c.\u0275cmp=Be({type:c,selectors:[["ng-component"]],decls:1,vars:0,template:function(a,h){1&a&&xe(0,"router-outlet")},dependencies:[SL],encapsulation:2}),c})();function sH(c,l){return c.providers&&!c._injector&&(c._injector=Fw(c.providers,l,`Route: ${c.path}`)),c._injector??l}function TL(c){const l=c.children&&c.children.map(TL),a=l?{...c,children:l}:{...c};return!a.component&&!a.loadComponent&&(l||a.loadChildren)&&a.outlet&&a.outlet!==dr&&(a.component=iH),a}function Il(c){return c.outlet||dr}function oH(c,l){const a=c.filter(h=>Il(h)===l);return a.push(...c.filter(h=>Il(h)!==l)),a}function aH(c){if(!c)return null;if(c.routeConfig?._injector)return c.routeConfig._injector;for(let l=c.parent;l;l=l.parent){const a=l.routeConfig;if(a?._loadedInjector)return a._loadedInjector;if(a?._injector)return a._injector}return null}class tye{constructor(l,a,h,d){this.routeReuseStrategy=l,this.futureState=a,this.currState=h,this.forwardEvent=d}activate(l){const a=this.futureState._root,h=this.currState?this.currState._root:null;this.deactivateChildRoutes(a,h,l),yL(this.futureState.root),this.activateChildRoutes(a,h,l)}deactivateChildRoutes(l,a,h){const d=fy(a);l.children.forEach(f=>{const m=f.value.outlet;this.deactivateRoutes(f,d[m],h),delete d[m]}),ao(d,(f,m)=>{this.deactivateRouteAndItsChildren(f,h)})}deactivateRoutes(l,a,h){const d=l.value,f=a?a.value:null;if(d===f)if(d.component){const m=h.getContext(d.outlet);m&&this.deactivateChildRoutes(l,a,m.children)}else this.deactivateChildRoutes(l,a,h);else f&&this.deactivateRouteAndItsChildren(a,h)}deactivateRouteAndItsChildren(l,a){l.value.component&&this.routeReuseStrategy.shouldDetach(l.value.snapshot)?this.detachAndStoreRouteSubtree(l,a):this.deactivateRouteAndOutlet(l,a)}detachAndStoreRouteSubtree(l,a){const h=a.getContext(l.value.outlet),d=h&&l.value.component?h.children:a,f=fy(l);for(const m of Object.keys(f))this.deactivateRouteAndItsChildren(f[m],d);if(h&&h.outlet){const m=h.outlet.detach(),g=h.children.onOutletDeactivated();this.routeReuseStrategy.store(l.value.snapshot,{componentRef:m,route:l,contexts:g})}}deactivateRouteAndOutlet(l,a){const h=a.getContext(l.value.outlet),d=h&&l.value.component?h.children:a,f=fy(l);for(const m of Object.keys(f))this.deactivateRouteAndItsChildren(f[m],d);h&&h.outlet&&(h.outlet.deactivate(),h.children.onOutletDeactivated(),h.attachRef=null,h.resolver=null,h.route=null)}activateChildRoutes(l,a,h){const d=fy(a);l.children.forEach(f=>{this.activateRoutes(f,d[f.value.outlet],h),this.forwardEvent(new Gge(f.value.snapshot))}),l.children.length&&this.forwardEvent(new Bge(l.value.snapshot))}activateRoutes(l,a,h){const d=l.value,f=a?a.value:null;if(yL(d),d===f)if(d.component){const m=h.getOrCreateContext(d.outlet);this.activateChildRoutes(l,a,m.children)}else this.activateChildRoutes(l,a,h);else if(d.component){const m=h.getOrCreateContext(d.outlet);if(this.routeReuseStrategy.shouldAttach(d.snapshot)){const g=this.routeReuseStrategy.retrieve(d.snapshot);this.routeReuseStrategy.store(d.snapshot,null),m.children.onOutletReAttached(g.contexts),m.attachRef=g.componentRef,m.route=g.route.value,m.outlet&&m.outlet.attach(g.componentRef,g.route.value),yL(g.route.value),this.activateChildRoutes(l,null,m.children)}else{const g=aH(d.snapshot),y=g?.get(nu)??null;m.attachRef=null,m.route=d,m.resolver=y,m.injector=g,m.outlet&&m.outlet.activateWith(d,m.injector),this.activateChildRoutes(l,null,m.children)}}else this.activateChildRoutes(l,null,h)}}class lH{constructor(l){this.path=l,this.route=this.path[this.path.length-1]}}class TC{constructor(l,a){this.component=l,this.route=a}}function nye(c,l,a){const h=c._root;return tS(h,l?l._root:null,a,[h.value])}function wC(c,l,a){return(aH(l)??a).get(c)}function tS(c,l,a,h,d={canDeactivateChecks:[],canActivateChecks:[]}){const f=fy(l);return c.children.forEach(m=>{(function iye(c,l,a,h,d={canDeactivateChecks:[],canActivateChecks:[]}){const f=c.value,m=l?l.value:null,g=a?a.getContext(c.value.outlet):null;if(m&&f.routeConfig===m.routeConfig){const y=function sye(c,l,a){if("function"==typeof a)return a(c,l);switch(a){case"pathParamsChange":return!Ap(c.url,l.url);case"pathParamsOrQueryParamsChange":return!Ap(c.url,l.url)||!uu(c.queryParams,l.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!vL(c,l)||!uu(c.queryParams,l.queryParams);default:return!vL(c,l)}}(m,f,f.routeConfig.runGuardsAndResolvers);y?d.canActivateChecks.push(new lH(h)):(f.data=m.data,f._resolvedData=m._resolvedData),tS(c,l,f.component?g?g.children:null:a,h,d),y&&g&&g.outlet&&g.outlet.isActivated&&d.canDeactivateChecks.push(new TC(g.outlet.component,m))}else m&&nS(l,g,d),d.canActivateChecks.push(new lH(h)),tS(c,null,f.component?g?g.children:null:a,h,d)})(m,f[m.value.outlet],a,h.concat([m.value]),d),delete f[m.value.outlet]}),ao(f,(m,g)=>nS(m,a.getContext(g),d)),d}function nS(c,l,a){const h=fy(c),d=c.value;ao(h,(f,m)=>{nS(f,d.component?l?l.children.getContext(m):null:l,a)}),a.canDeactivateChecks.push(new TC(d.component&&l&&l.outlet&&l.outlet.isActivated?l.outlet.component:null,d))}function rS(c){return"function"==typeof c}const CC=Symbol("INITIAL_VALUE");function py(){return wa(c=>lC(c.map(l=>l.pipe(dh(1),Dd(CC)))).pipe(ve(l=>{for(const a of l)if(!0!==a){if(a===CC)return CC;if(!1===a||a instanceof Dp)return a}return!0}),qr(l=>l!==CC),dh(1)))}function cH(c){return function ft(...c){return xt(c)}(Li(l=>{if(Ip(l))throw eH(0,l)}),ve(l=>!0===l))}const wL={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function uH(c,l,a,h,d){const f=CL(c,l,a);return f.matched?function Tye(c,l,a,h){const d=l.canMatch;return d&&0!==d.length?St(d.map(m=>{const g=c.get(m),y=function hye(c){return c&&rS(c.canMatch)}(g)?g.canMatch(l,a):g(l,a);return fh(y)})).pipe(py(),cH()):St(!0)}(h=sH(l,h),l,a).pipe(ve(m=>!0===m?f:{...wL})):St(f)}function CL(c,l,a){if(""===l.path)return"full"===l.pathMatch&&(c.hasChildren()||a.length>0)?{...wL}:{matched:!0,consumedSegments:[],remainingSegments:a,parameters:{},positionalParamSegments:{}};const d=(l.matcher||ige)(a,c,l);if(!d)return{...wL};const f={};ao(d.posParams,(g,y)=>{f[y]=g.path});const m=d.consumed.length>0?{...f,...d.consumed[d.consumed.length-1].parameters}:f;return{matched:!0,consumedSegments:d.consumed,remainingSegments:a.slice(d.consumed.length),parameters:m,positionalParamSegments:d.posParams??{}}}function xC(c,l,a,h,d="corrected"){if(a.length>0&&function xye(c,l,a){return a.some(h=>EC(c,l,h)&&Il(h)!==dr)}(c,a,h)){const m=new vr(l,function Cye(c,l,a,h){const d={};d[dr]=h,h._sourceSegment=c,h._segmentIndexShift=l.length;for(const f of a)if(""===f.path&&Il(f)!==dr){const m=new vr([],{});m._sourceSegment=c,m._segmentIndexShift=l.length,d[Il(f)]=m}return d}(c,l,h,new vr(a,c.children)));return m._sourceSegment=c,m._segmentIndexShift=l.length,{segmentGroup:m,slicedSegments:[]}}if(0===a.length&&function Eye(c,l,a){return a.some(h=>EC(c,l,h))}(c,a,h)){const m=new vr(c.segments,function wye(c,l,a,h,d,f){const m={};for(const g of h)if(EC(c,a,g)&&!d[Il(g)]){const y=new vr([],{});y._sourceSegment=c,y._segmentIndexShift="legacy"===f?c.segments.length:l.length,m[Il(g)]=y}return{...d,...m}}(c,l,a,h,c.children,d));return m._sourceSegment=c,m._segmentIndexShift=l.length,{segmentGroup:m,slicedSegments:a}}const f=new vr(c.segments,c.children);return f._sourceSegment=c,f._segmentIndexShift=l.length,{segmentGroup:f,slicedSegments:a}}function EC(c,l,a){return(!(c.hasChildren()||l.length>0)||"full"!==a.pathMatch)&&""===a.path}function hH(c,l,a,h){return!!(Il(c)===h||h!==dr&&EC(l,a,c))&&("**"===c.path||CL(l,c,a).matched)}function dH(c,l,a){return 0===l.length&&!c.children[a]}const MC=!1;class DC{constructor(l){this.segmentGroup=l||null}}class fH{constructor(l){this.urlTree=l}}function iS(c){return ly(new DC(c))}function pH(c){return ly(new fH(c))}class Iye{constructor(l,a,h,d,f){this.injector=l,this.configLoader=a,this.urlSerializer=h,this.urlTree=d,this.config=f,this.allowRedirects=!0}apply(){const l=xC(this.urlTree.root,[],[],this.config).segmentGroup,a=new vr(l.segments,l.children);return this.expandSegmentGroup(this.injector,this.config,a,dr).pipe(ve(f=>this.createUrlTree(yC(f),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Rd(f=>{if(f instanceof fH)return this.allowRedirects=!1,this.match(f.urlTree);throw f instanceof DC?this.noMatchError(f):f}))}match(l){return this.expandSegmentGroup(this.injector,this.config,l.root,dr).pipe(ve(d=>this.createUrlTree(yC(d),l.queryParams,l.fragment))).pipe(Rd(d=>{throw d instanceof DC?this.noMatchError(d):d}))}noMatchError(l){return new it(4002,MC)}createUrlTree(l,a,h){const d=uL(l);return new Dp(d,a,h)}expandSegmentGroup(l,a,h,d){return 0===h.segments.length&&h.hasChildren()?this.expandChildren(l,a,h).pipe(ve(f=>new vr([],f))):this.expandSegment(l,h,a,h.segments,d,!0)}expandChildren(l,a,h){const d=[];for(const f of Object.keys(h.children))"primary"===f?d.unshift(f):d.push(f);return Ls(d).pipe(Ad(f=>{const m=h.children[f],g=oH(a,f);return this.expandSegmentGroup(l,g,m,f).pipe(ve(y=>({segment:y,outlet:f})))}),x6((f,m)=>(f[m.outlet]=m.segment,f),{}),E6())}expandSegment(l,a,h,d,f,m){return Ls(h).pipe(Ad(g=>this.expandSegmentAgainstRoute(l,a,h,g,d,f,m).pipe(Rd(v=>{if(v instanceof DC)return St(null);throw v}))),qa(g=>!!g),Rd((g,y)=>{if(g instanceof cy||"EmptyError"===g.name)return dH(a,d,f)?St(new vr([],{})):iS(a);throw g}))}expandSegmentAgainstRoute(l,a,h,d,f,m,g){return hH(d,a,f,m)?void 0===d.redirectTo?this.matchSegmentAgainstRoute(l,a,d,f,m):g&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(l,a,h,d,f,m):iS(a):iS(a)}expandSegmentAgainstRouteUsingRedirect(l,a,h,d,f,m){return"**"===d.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(l,h,d,m):this.expandRegularSegmentAgainstRouteUsingRedirect(l,a,h,d,f,m)}expandWildCardWithParamsAgainstRouteUsingRedirect(l,a,h,d){const f=this.applyRedirectCommands([],h.redirectTo,{});return h.redirectTo.startsWith("/")?pH(f):this.lineralizeSegments(h,f).pipe(gs(m=>{const g=new vr(m,{});return this.expandSegment(l,g,a,m,d,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(l,a,h,d,f,m){const{matched:g,consumedSegments:y,remainingSegments:v,positionalParamSegments:_}=CL(a,d,f);if(!g)return iS(a);const S=this.applyRedirectCommands(y,d.redirectTo,_);return d.redirectTo.startsWith("/")?pH(S):this.lineralizeSegments(d,S).pipe(gs(b=>this.expandSegment(l,a,h,b.concat(v),m,!1)))}matchSegmentAgainstRoute(l,a,h,d,f){return"**"===h.path?(l=sH(h,l),h.loadChildren?(h._loadedRoutes?St({routes:h._loadedRoutes,injector:h._loadedInjector}):this.configLoader.loadChildren(l,h)).pipe(ve(g=>(h._loadedRoutes=g.routes,h._loadedInjector=g.injector,new vr(d,{})))):St(new vr(d,{}))):uH(a,h,d,l).pipe(wa(({matched:m,consumedSegments:g,remainingSegments:y})=>m?this.getChildConfig(l=h._injector??l,h,d).pipe(gs(_=>{const S=_.injector??l,b=_.routes,{segmentGroup:T,slicedSegments:x}=xC(a,g,y,b),E=new vr(T.segments,T.children);if(0===x.length&&E.hasChildren())return this.expandChildren(S,b,E).pipe(ve(L=>new vr(g,L)));if(0===b.length&&0===x.length)return St(new vr(g,{}));const D=Il(h)===f;return this.expandSegment(S,E,b,x,D?dr:f,!0).pipe(ve(M=>new vr(g.concat(M.segments),M.children)))})):iS(a)))}getChildConfig(l,a,h){return a.children?St({routes:a.children,injector:l}):a.loadChildren?void 0!==a._loadedRoutes?St({routes:a._loadedRoutes,injector:a._loadedInjector}):function bye(c,l,a,h){const d=l.canLoad;return void 0===d||0===d.length?St(!0):St(d.map(m=>{const g=c.get(m),y=function aye(c){return c&&rS(c.canLoad)}(g)?g.canLoad(l,a):g(l,a);return fh(y)})).pipe(py(),cH())}(l,a,h).pipe(gs(d=>d?this.configLoader.loadChildren(l,a).pipe(Li(f=>{a._loadedRoutes=f.routes,a._loadedInjector=f.injector})):function Dye(c){return ly(tH(MC,3))}())):St({routes:[],injector:l})}lineralizeSegments(l,a){let h=[],d=a.root;for(;;){if(h=h.concat(d.segments),0===d.numberOfChildren)return St(h);if(d.numberOfChildren>1||!d.children[dr])return ly(new it(4e3,MC));d=d.children[dr]}}applyRedirectCommands(l,a,h){return this.applyRedirectCreateUrlTree(a,this.urlSerializer.parse(a),l,h)}applyRedirectCreateUrlTree(l,a,h,d){const f=this.createSegmentGroup(l,a.root,h,d);return new Dp(f,this.createQueryParams(a.queryParams,this.urlTree.queryParams),a.fragment)}createQueryParams(l,a){const h={};return ao(l,(d,f)=>{if("string"==typeof d&&d.startsWith(":")){const g=d.substring(1);h[f]=a[g]}else h[f]=d}),h}createSegmentGroup(l,a,h,d){const f=this.createSegments(l,a.segments,h,d);let m={};return ao(a.children,(g,y)=>{m[y]=this.createSegmentGroup(l,g,h,d)}),new vr(f,m)}createSegments(l,a,h,d){return a.map(f=>f.path.startsWith(":")?this.findPosParam(l,f,d):this.findOrReturn(f,h))}findPosParam(l,a,h){const d=h[a.path.substring(1)];if(!d)throw new it(4001,MC);return d}findOrReturn(l,a){let h=0;for(const d of a){if(d.path===l.path)return a.splice(h),d;h++}return l}}class Pye{}class Nye{constructor(l,a,h,d,f,m,g,y){this.injector=l,this.rootComponentType=a,this.config=h,this.urlTree=d,this.url=f,this.paramsInheritanceStrategy=m,this.relativeLinkResolution=g,this.urlSerializer=y}recognize(){const l=xC(this.urlTree.root,[],[],this.config.filter(a=>void 0===a.redirectTo),this.relativeLinkResolution).segmentGroup;return this.processSegmentGroup(this.injector,this.config,l,dr).pipe(ve(a=>{if(null===a)return null;const h=new SC([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},dr,this.rootComponentType,null,this.urlTree.root,-1,{}),d=new mh(h,a),f=new Q6(this.url,d);return this.inheritParamsAndData(f._root),f}))}inheritParamsAndData(l){const a=l.value,h=K6(a,this.paramsInheritanceStrategy);a.params=Object.freeze(h.params),a.data=Object.freeze(h.data),l.children.forEach(d=>this.inheritParamsAndData(d))}processSegmentGroup(l,a,h,d){return 0===h.segments.length&&h.hasChildren()?this.processChildren(l,a,h):this.processSegment(l,a,h,h.segments,d)}processChildren(l,a,h){return Ls(Object.keys(h.children)).pipe(Ad(d=>{const f=h.children[d],m=oH(a,d);return this.processSegmentGroup(l,m,f,d)}),x6((d,f)=>d&&f?(d.push(...f),d):null),function Yme(c,l=!1){return a=>a.lift(new Zme(c,l))}(d=>null!==d),hC(null),E6(),ve(d=>{if(null===d)return null;const f=mH(d);return function Fye(c){c.sort((l,a)=>l.value.outlet===dr?-1:a.value.outlet===dr?1:l.value.outlet.localeCompare(a.value.outlet))}(f),f}))}processSegment(l,a,h,d,f){return Ls(a).pipe(Ad(m=>this.processSegmentAgainstRoute(m._injector??l,m,h,d,f)),qa(m=>!!m),Rd(m=>{if(m instanceof cy)return dH(h,d,f)?St([]):St(null);throw m}))}processSegmentAgainstRoute(l,a,h,d,f){if(a.redirectTo||!hH(a,h,d,f))return St(null);let m;if("**"===a.path){const g=d.length>0?A6(d).parameters:{},y=yH(h)+d.length;m=St({snapshot:new SC(d,g,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,_H(a),Il(a),a.component??a._loadedComponent??null,a,gH(h),y,SH(a),y),consumedSegments:[],remainingSegments:[]})}else m=uH(h,a,d,l).pipe(ve(({matched:g,consumedSegments:y,remainingSegments:v,parameters:_})=>{if(!g)return null;const S=yH(h)+y.length;return{snapshot:new SC(y,_,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,_H(a),Il(a),a.component??a._loadedComponent??null,a,gH(h),S,SH(a),S),consumedSegments:y,remainingSegments:v}}));return m.pipe(wa(g=>{if(null===g)return St(null);const{snapshot:y,consumedSegments:v,remainingSegments:_}=g;l=a._injector??l;const S=a._loadedInjector??l,b=function kye(c){return c.children?c.children:c.loadChildren?c._loadedRoutes:[]}(a),{segmentGroup:T,slicedSegments:x}=xC(h,v,_,b.filter(D=>void 0===D.redirectTo),this.relativeLinkResolution);if(0===x.length&&T.hasChildren())return this.processChildren(S,b,T).pipe(ve(D=>null===D?null:[new mh(y,D)]));if(0===b.length&&0===x.length)return St([new mh(y,[])]);const E=Il(a)===f;return this.processSegment(S,b,T,x,E?dr:f).pipe(ve(D=>null===D?null:[new mh(y,D)]))}))}}function Vye(c){const l=c.value.routeConfig;return l&&""===l.path&&void 0===l.redirectTo}function mH(c){const l=[],a=new Set;for(const h of c){if(!Vye(h)){l.push(h);continue}const d=l.find(f=>h.value.routeConfig===f.value.routeConfig);void 0!==d?(d.children.push(...h.children),a.add(d)):l.push(h)}for(const h of a){const d=mH(h.children);l.push(new mh(h.value,d))}return l.filter(h=>!a.has(h))}function gH(c){let l=c;for(;l._sourceSegment;)l=l._sourceSegment;return l}function yH(c){let l=c,a=l._segmentIndexShift??0;for(;l._sourceSegment;)l=l._sourceSegment,a+=l._segmentIndexShift??0;return a-1}function _H(c){return c.data||{}}function SH(c){return c.resolve||{}}const xL=Symbol("RouteTitle");function bH(c){return"string"==typeof c.title||null===c.title}function EL(c){return wa(l=>{const a=c(l);return a?Ls(a).pipe(ve(()=>l)):St(l)})}let TH=(()=>{class c{buildTitle(a){let h,d=a.root;for(;void 0!==d;)h=this.getResolvedTitleForRoute(d)??h,d=d.children.find(f=>f.outlet===dr);return h}getResolvedTitleForRoute(a){return a.data[xL]}}return c.\u0275fac=function(a){return new(a||c)},c.\u0275prov=Oe({token:c,factory:function(){return Zi(wH)},providedIn:"root"}),c})(),wH=(()=>{class c extends TH{constructor(a){super(),this.title=a}updateTitle(a){const h=this.buildTitle(a);void 0!==h&&this.title.setTitle(h)}}return c.\u0275fac=function(a){return new(a||c)(Ae(v6))},c.\u0275prov=Oe({token:c,factory:c.\u0275fac,providedIn:"root"}),c})();class Xye{}class $ye extends class qye{shouldDetach(l){return!1}store(l,a){}shouldAttach(l){return!1}retrieve(l){return null}shouldReuseRoute(l,a){return l.routeConfig===a.routeConfig}}{}const ML=new Vt("",{providedIn:"root",factory:()=>({})}),DL=new Vt("ROUTES");let AL=(()=>{class c{constructor(a,h){this.injector=a,this.compiler=h,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(a){if(this.componentLoaders.get(a))return this.componentLoaders.get(a);if(a._loadedComponent)return St(a._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(a);const h=fh(a.loadComponent()).pipe(Li(f=>{this.onLoadEndListener&&this.onLoadEndListener(a),a._loadedComponent=f}),aL(()=>{this.componentLoaders.delete(a)})),d=new tI(h,()=>new Ke).pipe(N1());return this.componentLoaders.set(a,d),d}loadChildren(a,h){if(this.childrenLoaders.get(h))return this.childrenLoaders.get(h);if(h._loadedRoutes)return St({routes:h._loadedRoutes,injector:h._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(h);const f=this.loadModuleFactoryOrRoutes(h.loadChildren).pipe(ve(g=>{this.onLoadEndListener&&this.onLoadEndListener(h);let y,v,_=!1;Array.isArray(g)?v=g:(y=g.create(a).injector,v=D6(y.get(DL,[],En.Self|En.Optional)));return{routes:v.map(TL),injector:y}}),aL(()=>{this.childrenLoaders.delete(h)})),m=new tI(f,()=>new Ke).pipe(N1());return this.childrenLoaders.set(h,m),m}loadModuleFactoryOrRoutes(a){return fh(a()).pipe(gs(h=>h instanceof gz||Array.isArray(h)?St(h):Ls(this.compiler.compileModuleAsync(h))))}}return c.\u0275fac=function(a){return new(a||c)(Ae(ti),Ae(wP))},c.\u0275prov=Oe({token:c,factory:c.\u0275fac}),c})();class Zye{}class Kye{shouldProcessUrl(l){return!0}extract(l){return l}merge(l,a){return l}}function Qye(c){throw c}function Jye(c,l,a){return l.parse("/")}const eve={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},tve={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};function xH(){const c=Zi(N6),l=Zi(eS),a=Zi(VP),h=Zi(ti),d=Zi(wP),f=Zi(DL,{optional:!0})??[],m=Zi(ML,{optional:!0})??{},g=Zi(wH),y=Zi(TH,{optional:!0}),v=Zi(Zye,{optional:!0}),_=Zi(Xye,{optional:!0}),S=new lo(null,c,l,a,h,d,D6(f));return v&&(S.urlHandlingStrategy=v),_&&(S.routeReuseStrategy=_),S.titleStrategy=y??g,function nve(c,l){c.errorHandler&&(l.errorHandler=c.errorHandler),c.malformedUriErrorHandler&&(l.malformedUriErrorHandler=c.malformedUriErrorHandler),c.onSameUrlNavigation&&(l.onSameUrlNavigation=c.onSameUrlNavigation),c.paramsInheritanceStrategy&&(l.paramsInheritanceStrategy=c.paramsInheritanceStrategy),c.relativeLinkResolution&&(l.relativeLinkResolution=c.relativeLinkResolution),c.urlUpdateStrategy&&(l.urlUpdateStrategy=c.urlUpdateStrategy),c.canceledNavigationResolution&&(l.canceledNavigationResolution=c.canceledNavigationResolution)}(m,S),S}let lo=(()=>{class c{constructor(a,h,d,f,m,g,y){this.rootComponentType=a,this.urlSerializer=h,this.rootContexts=d,this.location=f,this.config=y,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new Ke,this.errorHandler=Qye,this.malformedUriErrorHandler=Jye,this.navigated=!1,this.lastSuccessfulId=-1,this.afterPreactivation=()=>St(void 0),this.urlHandlingStrategy=new Kye,this.routeReuseStrategy=new $ye,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.configLoader=m.get(AL),this.configLoader.onLoadEndListener=b=>this.triggerEvent(new kge(b)),this.configLoader.onLoadStartListener=b=>this.triggerEvent(new Fge(b)),this.ngModule=m.get(xp),this.console=m.get(Bde);const S=m.get(kn);this.isNgZoneEnabled=S instanceof kn&&kn.isInAngularZone(),this.resetConfig(y),this.currentUrlTree=function oge(){return new Dp(new vr([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=Z6(this.currentUrlTree,this.rootComponentType),this.transitions=new Nr({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){return this.location.getState()?.\u0275routerPageId}setupNavigations(a){const h=this.events;return a.pipe(qr(d=>0!==d.id),ve(d=>({...d,extractedUrl:this.urlHandlingStrategy.extract(d.rawUrl)})),wa(d=>{let f=!1,m=!1;return St(d).pipe(Li(g=>{this.currentNavigation={id:g.id,initialUrl:g.rawUrl,extractedUrl:g.extractedUrl,trigger:g.source,extras:g.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),wa(g=>{const y=this.browserUrlTree.toString(),v=!this.navigated||g.extractedUrl.toString()!==y||y!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||v)&&this.urlHandlingStrategy.shouldProcessUrl(g.rawUrl))return EH(g.source)&&(this.browserUrlTree=g.extractedUrl),St(g).pipe(wa(S=>{const b=this.transitions.getValue();return h.next(new vC(S.id,this.serializeUrl(S.extractedUrl),S.source,S.restoredState)),b!==this.transitions.getValue()?ay:Promise.resolve(S)}),function Rye(c,l,a,h){return wa(d=>function Aye(c,l,a,h,d){return new Iye(c,l,a,h,d).apply()}(c,l,a,d.extractedUrl,h).pipe(ve(f=>({...d,urlAfterRedirects:f}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),Li(S=>{this.currentNavigation={...this.currentNavigation,finalUrl:S.urlAfterRedirects},d.urlAfterRedirects=S.urlAfterRedirects}),function Uye(c,l,a,h,d,f){return gs(m=>function Oye(c,l,a,h,d,f,m="emptyOnly",g="legacy"){return new Nye(c,l,a,h,d,m,g,f).recognize().pipe(wa(y=>null===y?function Lye(c){return new wt(l=>l.error(c))}(new Pye):St(y)))}(c,l,a,m.urlAfterRedirects,h.serialize(m.urlAfterRedirects),h,d,f).pipe(ve(g=>({...m,targetSnapshot:g}))))}(this.ngModule.injector,this.rootComponentType,this.config,this.urlSerializer,this.paramsInheritanceStrategy,this.relativeLinkResolution),Li(S=>{if(d.targetSnapshot=S.targetSnapshot,"eager"===this.urlUpdateStrategy){if(!S.extras.skipLocationChange){const T=this.urlHandlingStrategy.merge(S.urlAfterRedirects,S.rawUrl);this.setBrowserUrl(T,S)}this.browserUrlTree=S.urlAfterRedirects}const b=new Rge(S.id,this.serializeUrl(S.extractedUrl),this.serializeUrl(S.urlAfterRedirects),S.targetSnapshot);h.next(b)}));if(v&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:b,extractedUrl:T,source:x,restoredState:E,extras:D}=g,I=new vC(b,this.serializeUrl(T),x,E);h.next(I);const M=Z6(T,this.rootComponentType).snapshot;return St(d={...g,targetSnapshot:M,urlAfterRedirects:T,extras:{...D,skipLocationChange:!1,replaceUrl:!1}})}return this.rawUrlTree=g.rawUrl,g.resolve(null),ay}),Li(g=>{const y=new Pge(g.id,this.serializeUrl(g.extractedUrl),this.serializeUrl(g.urlAfterRedirects),g.targetSnapshot);this.triggerEvent(y)}),ve(g=>d={...g,guards:nye(g.targetSnapshot,g.currentSnapshot,this.rootContexts)}),function fye(c,l){return gs(a=>{const{targetSnapshot:h,currentSnapshot:d,guards:{canActivateChecks:f,canDeactivateChecks:m}}=a;return 0===m.length&&0===f.length?St({...a,guardsResult:!0}):function pye(c,l,a,h){return Ls(c).pipe(gs(d=>function Sye(c,l,a,h,d){const f=l&&l.routeConfig?l.routeConfig.canDeactivate:null;return f&&0!==f.length?St(f.map(g=>{const y=wC(g,l,d);return fh(function uye(c){return c&&rS(c.canDeactivate)}(y)?y.canDeactivate(c,l,a,h):y(c,l,a,h)).pipe(qa())})).pipe(py()):St(!0)}(d.component,d.route,a,l,h)),qa(d=>!0!==d,!0))}(m,h,d,c).pipe(gs(g=>g&&function oye(c){return"boolean"==typeof c}(g)?function mye(c,l,a,h){return Ls(l).pipe(Ad(d=>cC(function yye(c,l){return null!==c&&l&&l(new Vge(c)),St(!0)}(d.route.parent,h),function gye(c,l){return null!==c&&l&&l(new Uge(c)),St(!0)}(d.route,h),function _ye(c,l,a){const h=l[l.length-1],f=l.slice(0,l.length-1).reverse().map(m=>function rye(c){const l=c.routeConfig?c.routeConfig.canActivateChild:null;return l&&0!==l.length?{node:c,guards:l}:null}(m)).filter(m=>null!==m).map(m=>T6(()=>St(m.guards.map(y=>{const v=wC(y,m.node,a);return fh(function cye(c){return c&&rS(c.canActivateChild)}(v)?v.canActivateChild(h,c):v(h,c)).pipe(qa())})).pipe(py())));return St(f).pipe(py())}(c,d.path,a),function vye(c,l,a){const h=l.routeConfig?l.routeConfig.canActivate:null;if(!h||0===h.length)return St(!0);const d=h.map(f=>T6(()=>{const m=wC(f,l,a);return fh(function lye(c){return c&&rS(c.canActivate)}(m)?m.canActivate(l,c):m(l,c)).pipe(qa())}));return St(d).pipe(py())}(c,d.route,a))),qa(d=>!0!==d,!0))}(h,f,c,l):St(g)),ve(g=>({...a,guardsResult:g})))})}(this.ngModule.injector,g=>this.triggerEvent(g)),Li(g=>{if(d.guardsResult=g.guardsResult,Ip(g.guardsResult))throw eH(0,g.guardsResult);const y=new Lge(g.id,this.serializeUrl(g.extractedUrl),this.serializeUrl(g.urlAfterRedirects),g.targetSnapshot,!!g.guardsResult);this.triggerEvent(y)}),qr(g=>!!g.guardsResult||(this.restoreHistory(g),this.cancelNavigationTransition(g,"",3),!1)),EL(g=>{if(g.guards.canActivateChecks.length)return St(g).pipe(Li(y=>{const v=new Oge(y.id,this.serializeUrl(y.extractedUrl),this.serializeUrl(y.urlAfterRedirects),y.targetSnapshot);this.triggerEvent(v)}),wa(y=>{let v=!1;return St(y).pipe(function Gye(c,l){return gs(a=>{const{targetSnapshot:h,guards:{canActivateChecks:d}}=a;if(!d.length)return St(a);let f=0;return Ls(d).pipe(Ad(m=>function zye(c,l,a,h){const d=c.routeConfig,f=c._resolve;return void 0!==d?.title&&!bH(d)&&(f[xL]=d.title),function Hye(c,l,a,h){const d=function jye(c){return[...Object.keys(c),...Object.getOwnPropertySymbols(c)]}(c);if(0===d.length)return St({});const f={};return Ls(d).pipe(gs(m=>function Wye(c,l,a,h){const d=wC(c,l,h);return fh(d.resolve?d.resolve(l,a):d(l,a))}(c[m],l,a,h).pipe(qa(),Li(g=>{f[m]=g}))),oL(1),function Qme(c){return l=>l.lift(new Jme(c))}(f),Rd(m=>m instanceof cy?ay:ly(m)))}(f,c,l,h).pipe(ve(m=>(c._resolvedData=m,c.data=K6(c,a).resolve,d&&bH(d)&&(c.data[xL]=d.title),null)))}(m.route,h,c,l)),Li(()=>f++),oL(1),gs(m=>f===d.length?St(a):ay))})}(this.paramsInheritanceStrategy,this.ngModule.injector),Li({next:()=>v=!0,complete:()=>{v||(this.restoreHistory(y),this.cancelNavigationTransition(y,"",2))}}))}),Li(y=>{const v=new Nge(y.id,this.serializeUrl(y.extractedUrl),this.serializeUrl(y.urlAfterRedirects),y.targetSnapshot);this.triggerEvent(v)}))}),EL(g=>{const y=v=>{const _=[];v.routeConfig?.loadComponent&&!v.routeConfig._loadedComponent&&_.push(this.configLoader.loadComponent(v.routeConfig).pipe(Li(S=>{v.component=S}),ve(()=>{})));for(const S of v.children)_.push(...y(S));return _};return lC(y(g.targetSnapshot.root)).pipe(hC(),dh(1))}),EL(()=>this.afterPreactivation()),ve(g=>{const y=function Wge(c,l,a){const h=J0(c,l._root,a?a._root:void 0);return new Y6(h,l)}(this.routeReuseStrategy,g.targetSnapshot,g.currentRouterState);return d={...g,targetRouterState:y}}),Li(g=>{this.currentUrlTree=g.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(g.urlAfterRedirects,g.rawUrl),this.routerState=g.targetRouterState,"deferred"===this.urlUpdateStrategy&&(g.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,g),this.browserUrlTree=g.urlAfterRedirects)}),((c,l,a)=>ve(h=>(new tye(l,h.targetRouterState,h.currentRouterState,a).activate(c),h)))(this.rootContexts,this.routeReuseStrategy,g=>this.triggerEvent(g)),Li({next(){f=!0},complete(){f=!0}}),aL(()=>{f||m||this.cancelNavigationTransition(d,"",1),this.currentNavigation?.id===d.id&&(this.currentNavigation=null)}),Rd(g=>{if(m=!0,rH(g)){nH(g)||(this.navigated=!0,this.restoreHistory(d,!0));const y=new _C(d.id,this.serializeUrl(d.extractedUrl),g.message,g.cancellationCode);if(h.next(y),nH(g)){const v=this.urlHandlingStrategy.merge(g.url,this.rawUrlTree),_={skipLocationChange:d.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||EH(d.source)};this.scheduleNavigation(v,"imperative",null,_,{resolve:d.resolve,reject:d.reject,promise:d.promise})}else d.resolve(!1)}else{this.restoreHistory(d,!0);const y=new X6(d.id,this.serializeUrl(d.extractedUrl),g,d.targetSnapshot??void 0);h.next(y);try{d.resolve(this.errorHandler(g))}catch(v){d.reject(v)}}return ay}))}))}resetRootComponentType(a){this.rootComponentType=a,this.routerState.root.component=this.rootComponentType}setTransition(a){this.transitions.next({...this.transitions.value,...a})}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(a=>{const h="popstate"===a.type?"popstate":"hashchange";"popstate"===h&&setTimeout(()=>{const d={replaceUrl:!0},f=a.state?.navigationId?a.state:null;if(f){const g={...f};delete g.navigationId,delete g.\u0275routerPageId,0!==Object.keys(g).length&&(d.state=g)}const m=this.parseUrl(a.url);this.scheduleNavigation(m,h,f,d)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(a){this.events.next(a)}resetConfig(a){this.config=a.map(TL),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(a,h={}){const{relativeTo:d,queryParams:f,fragment:m,queryParamsHandling:g,preserveFragment:y}=h,v=d||this.routerState.root,_=y?this.currentUrlTree.fragment:m;let S=null;switch(g){case"merge":S={...this.currentUrlTree.queryParams,...f};break;case"preserve":S=this.currentUrlTree.queryParams;break;default:S=f||null}return null!==S&&(S=this.removeEmptyProps(S)),xge(v,this.currentUrlTree,a,S,_??null)}navigateByUrl(a,h={skipLocationChange:!1}){const d=Ip(a)?a:this.parseUrl(a),f=this.urlHandlingStrategy.merge(d,this.rawUrlTree);return this.scheduleNavigation(f,"imperative",null,h)}navigate(a,h={skipLocationChange:!1}){return function rve(c){for(let l=0;l<c.length;l++){if(null==c[l])throw new it(4008,false)}}(a),this.navigateByUrl(this.createUrlTree(a,h),h)}serializeUrl(a){return this.urlSerializer.serialize(a)}parseUrl(a){let h;try{h=this.urlSerializer.parse(a)}catch(d){h=this.malformedUriErrorHandler(d,this.urlSerializer,a)}return h}isActive(a,h){let d;if(d=!0===h?{...eve}:!1===h?{...tve}:h,Ip(a))return R6(this.currentUrlTree,a,d);const f=this.parseUrl(a);return R6(this.currentUrlTree,f,d)}removeEmptyProps(a){return Object.keys(a).reduce((h,d)=>{const f=a[d];return null!=f&&(h[d]=f),h},{})}processNavigations(){this.navigations.subscribe(a=>{this.navigated=!0,this.lastSuccessfulId=a.id,this.currentPageId=a.targetPageId,this.events.next(new Pd(a.id,this.serializeUrl(a.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.titleStrategy?.updateTitle(this.routerState.snapshot),a.resolve(!0)},a=>{this.console.warn(`Unhandled Navigation Error: ${a}`)})}scheduleNavigation(a,h,d,f,m){if(this.disposed)return Promise.resolve(!1);let g,y,v;m?(g=m.resolve,y=m.reject,v=m.promise):v=new Promise((b,T)=>{g=b,y=T});const _=++this.navigationId;let S;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(d=this.location.getState()),S=d&&d.\u0275routerPageId?d.\u0275routerPageId:f.replaceUrl||f.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1):S=0,this.setTransition({id:_,targetPageId:S,source:h,restoredState:d,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:a,extras:f,resolve:g,reject:y,promise:v,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),v.catch(b=>Promise.reject(b))}setBrowserUrl(a,h){const d=this.urlSerializer.serialize(a),f={...h.extras.state,...this.generateNgRouterState(h.id,h.targetPageId)};this.location.isCurrentPathEqualTo(d)||h.extras.replaceUrl?this.location.replaceState(d,"",f):this.location.go(d,"",f)}restoreHistory(a,h=!1){if("computed"===this.canceledNavigationResolution){const d=this.currentPageId-a.targetPageId;"popstate"!==a.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.currentNavigation?.finalUrl||0===d?this.currentUrlTree===this.currentNavigation?.finalUrl&&0===d&&(this.resetState(a),this.browserUrlTree=a.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(d)}else"replace"===this.canceledNavigationResolution&&(h&&this.resetState(a),this.resetUrlToCurrentUrlTree())}resetState(a){this.routerState=a.currentRouterState,this.currentUrlTree=a.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,a.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(a,h,d){const f=new _C(a.id,this.serializeUrl(a.extractedUrl),h,d);this.triggerEvent(f),a.resolve(!1)}generateNgRouterState(a,h){return"computed"===this.canceledNavigationResolution?{navigationId:a,\u0275routerPageId:h}:{navigationId:a}}}return c.\u0275fac=function(a){_w()},c.\u0275prov=Oe({token:c,factory:function(){return xH()},providedIn:"root"}),c})();function EH(c){return"imperative"!==c}let IL=(()=>{class c{constructor(a,h,d,f,m){this.router=a,this.route=h,this.tabIndexAttribute=d,this.renderer=f,this.el=m,this.commands=null,this.onChanges=new Ke,this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(a){if(null!=this.tabIndexAttribute)return;const h=this.renderer,d=this.el.nativeElement;null!==a?h.setAttribute(d,"tabindex",a):h.removeAttribute(d,"tabindex")}ngOnChanges(a){this.onChanges.next(this)}set routerLink(a){null!=a?(this.commands=Array.isArray(a)?a:[a],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(){if(null===this.urlTree)return!0;const a={skipLocationChange:lh(this.skipLocationChange),replaceUrl:lh(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,a),!0}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:lh(this.preserveFragment)})}}return c.\u0275fac=function(a){return new(a||c)(N(lo),N(Rp),Tg("tabindex"),N(Fn),N(zt))},c.\u0275dir=We({type:c,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(a,h){1&a&&Me("click",function(){return h.onClick()})},inputs:{queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[ys]}),c})(),my=(()=>{class c{constructor(a,h,d){this.router=a,this.route=h,this.locationStrategy=d,this.commands=null,this.href=null,this.onChanges=new Ke,this.subscription=a.events.subscribe(f=>{f instanceof Pd&&this.updateTargetUrlAndHref()})}set routerLink(a){this.commands=null!=a?Array.isArray(a)?a:[a]:null}ngOnChanges(a){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(a,h,d,f,m){if(0!==a||h||d||f||m||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)return!0;const g={skipLocationChange:lh(this.skipLocationChange),replaceUrl:lh(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,g),!1}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:lh(this.preserveFragment)})}}return c.\u0275fac=function(a){return new(a||c)(N(lo),N(Rp),N(Mp))},c.\u0275dir=We({type:c,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(a,h){1&a&&Me("click",function(f){return h.onClick(f.button,f.ctrlKey,f.shiftKey,f.altKey,f.metaKey)}),2&a&&Ne("target",h.target)("href",h.href,Wa)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[ys]}),c})(),RC=(()=>{class c{constructor(a,h,d,f,m,g){this.router=a,this.element=h,this.renderer=d,this.cdr=f,this.link=m,this.linkWithHref=g,this.classes=[],this.isActive=!1,this.routerLinkActiveOptions={exact:!1},this.isActiveChange=new rt,this.routerEventsSubscription=a.events.subscribe(y=>{y instanceof Pd&&this.update()})}ngAfterContentInit(){St(this.links.changes,this.linksWithHrefs.changes,St(null)).pipe(hg()).subscribe(a=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();const a=[...this.links.toArray(),...this.linksWithHrefs.toArray(),this.link,this.linkWithHref].filter(h=>!!h).map(h=>h.onChanges);this.linkInputChangesSubscription=Ls(a).pipe(hg()).subscribe(h=>{this.isActive!==this.isLinkActive(this.router)(h)&&this.update()})}set routerLinkActive(a){const h=Array.isArray(a)?a:a.split(" ");this.classes=h.filter(d=>!!d)}ngOnChanges(a){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.linksWithHrefs||!this.router.navigated||Promise.resolve().then(()=>{const a=this.hasActiveLinks();this.isActive!==a&&(this.isActive=a,this.cdr.markForCheck(),this.classes.forEach(h=>{a?this.renderer.addClass(this.element.nativeElement,h):this.renderer.removeClass(this.element.nativeElement,h)}),a&&void 0!==this.ariaCurrentWhenActive?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this.isActiveChange.emit(a))})}isLinkActive(a){const h=function ive(c){return!!c.paths}(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return d=>!!d.urlTree&&a.isActive(d.urlTree,h)}hasActiveLinks(){const a=this.isLinkActive(this.router);return this.link&&a(this.link)||this.linkWithHref&&a(this.linkWithHref)||this.links.some(a)||this.linksWithHrefs.some(a)}}return c.\u0275fac=function(a){return new(a||c)(N(lo),N(zt),N(Fn),N(Ss),N(IL,8),N(my,8))},c.\u0275dir=We({type:c,selectors:[["","routerLinkActive",""]],contentQueries:function(a,h,d){if(1&a&&(yn(d,IL,5),yn(d,my,5)),2&a){let f;mt(f=gt())&&(h.links=f),mt(f=gt())&&(h.linksWithHrefs=f)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],features:[ys]}),c})();class MH{}let sve=(()=>{class c{preload(a,h){return h().pipe(Rd(()=>St(null)))}}return c.\u0275fac=function(a){return new(a||c)},c.\u0275prov=Oe({token:c,factory:c.\u0275fac,providedIn:"root"}),c})(),DH=(()=>{class c{constructor(a,h,d,f,m){this.router=a,this.injector=d,this.preloadingStrategy=f,this.loader=m}setUpPreloading(){this.subscription=this.router.events.pipe(qr(a=>a instanceof Pd),Ad(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(a,h){const d=[];for(const f of h){f.providers&&!f._injector&&(f._injector=Fw(f.providers,a,`Route: ${f.path}`));const m=f._injector??a,g=f._loadedInjector??m;f.loadChildren&&!f._loadedRoutes&&void 0===f.canLoad||f.loadComponent&&!f._loadedComponent?d.push(this.preloadConfig(m,f)):(f.children||f._loadedRoutes)&&d.push(this.processRoutes(g,f.children??f._loadedRoutes))}return Ls(d).pipe(hg())}preloadConfig(a,h){return this.preloadingStrategy.preload(h,()=>{let d;d=h.loadChildren&&void 0===h.canLoad?this.loader.loadChildren(a,h):St(null);const f=d.pipe(gs(m=>null===m?St(void 0):(h._loadedRoutes=m.routes,h._loadedInjector=m.injector,this.processRoutes(m.injector??a,m.routes))));return h.loadComponent&&!h._loadedComponent?Ls([f,this.loader.loadComponent(h)]).pipe(hg()):f})}}return c.\u0275fac=function(a){return new(a||c)(Ae(lo),Ae(wP),Ae(wd),Ae(MH),Ae(AL))},c.\u0275prov=Oe({token:c,factory:c.\u0275fac}),c})();const AH=new Vt("");let ove=(()=>{class c{constructor(a,h,d={}){this.router=a,this.viewportScroller=h,this.options=d,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},d.scrollPositionRestoration=d.scrollPositionRestoration||"disabled",d.anchorScrolling=d.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(a=>{a instanceof vC?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=a.navigationTrigger,this.restoredId=a.restoredState?a.restoredState.navigationId:0):a instanceof Pd&&(this.lastId=a.id,this.scheduleScrollEvent(a,this.router.parseUrl(a.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(a=>{a instanceof q6&&(a.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(a.position):a.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(a.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(a,h){this.router.triggerEvent(new q6(a,"popstate"===this.lastSource?this.store[this.restoredId]:null,h))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return c.\u0275fac=function(a){_w()},c.\u0275prov=Oe({token:c,factory:c.\u0275fac}),c})();const IH=new Vt("ROUTER_FORROOT_GUARD"),RH=new Vt(""),ave=[VP,{provide:N6,useClass:F6},{provide:lo,useFactory:xH},eS,{provide:Rp,useFactory:function lve(c){return c.routerState.root},deps:[lo]},AL];function cve(){return new h8("Router",lo)}let PH=(()=>{class c{constructor(a){}static forRoot(a,h){return{ngModule:c,providers:[ave,[],LH(a),{provide:IH,useFactory:fve,deps:[[lo,new Sd,new bd]]},{provide:ML,useValue:h||{}},h?.useHash?{provide:Mp,useClass:Dfe}:{provide:Mp,useClass:N8},{provide:AH,useFactory:()=>{const c=Zi(lo),l=Zi(Upe),a=Zi(ML);return a.scrollOffset&&l.setOffset(a.scrollOffset),new ove(c,l,a)}},h?.preloadingStrategy?Sve(h.preloadingStrategy):[],{provide:h8,multi:!0,useFactory:cve},h?.initialNavigation?mve(h):[],[{provide:OH,useFactory:pve},{provide:r8,multi:!0,useExisting:OH}]]}}static forChild(a){return{ngModule:c,providers:[LH(a)]}}}return c.\u0275fac=function(a){return new(a||c)(Ae(IH,8))},c.\u0275mod=Ut({type:c}),c.\u0275inj=kt({}),c})();function fve(c){return"guarded"}function LH(c){return[{provide:DL,multi:!0,useValue:c}]}function pve(){const c=Zi(ti);return l=>{const a=c.get(sy);if(l!==a.components[0])return;const h=c.get(lo),d=c.get(NH);1===c.get(RL)&&h.initialNavigation(),c.get(RH,null,En.Optional)?.setUpPreloading(),c.get(AH,null,En.Optional)?.init(),h.resetRootComponentType(a.componentTypes[0]),d.next(),d.complete()}}const OH=new Vt("");function mve(c){return["disabled"===c.initialNavigation?[{provide:Uw,multi:!0,useFactory:()=>{const c=Zi(lo);return()=>{c.setUpLocationChangeListener()}}},{provide:RL,useValue:2}]:[],"enabledBlocking"===c.initialNavigation?[{provide:RL,useValue:0},{provide:Uw,multi:!0,deps:[ti],useFactory:c=>{const l=c.get(Efe,Promise.resolve(null));let a=!1;return()=>l.then(()=>new Promise(d=>{const f=c.get(lo),m=c.get(NH);(function h(d){c.get(lo).events.pipe(qr(m=>m instanceof Pd||m instanceof _C||m instanceof X6),ve(m=>m instanceof Pd||m instanceof _C&&(0===m.code||1===m.code)&&null),qr(m=>null!==m),dh(1)).subscribe(()=>{d()})})(()=>{d(!0),a=!0}),f.afterPreactivation=()=>(d(!0),a||m.closed?St(void 0):m),f.initialNavigation()}))}}]:[]]}const NH=new Vt("",{factory:()=>new Ke}),RL=new Vt("",{providedIn:"root",factory:()=>1});function Sve(c){return[DH,{provide:RH,useExisting:DH},{provide:MH,useExisting:c}]}const Rl="tms",fc="wms",pc="wmts",Od="xyz",hu="geojson",gh="kml",yh="wfs",FH="stacked",Pl={Baselayers:"Baselayers",Overlays:"Overlays",Layers:"Layers"};class Ys{constructor(l){this.name="",this.id="",this.opacity=1,this.visible=!0,this.removable=!1,this.filtertype="Layers",this.continuousWorld=!1,this.expanded=!1,Object.assign(this,l)}get time(){return this.protTime}set time(l){this.protTime=l}}class Ko extends Ys{constructor(l){if(super(l),this.styles&&this.styles.length>0){let a=this.styles.find(h=>h.default);a||(a=this.styles[0]),this.legendImg=a.legendURL,this.params?(this.type===fc?this.params.STYLES=a.name:this.type===pc&&(this.params.style=a.name),this.params.STYLES=a.name):this.type===pc&&(this.params||(this.params={}),this.params.style=a.name)}}set time(l){this.params&&(this.params.TIME=l),this.protTime=l}get time(){return this.protTime}}class is extends Ys{constructor(l){super(l)}}class _i extends Ys{constructor(l){super(l),this.type="custom",this.custom_layer={},Object.assign(this,l)}}class PC extends Ys{constructor(l){super(l),this.type=FH,this.layers=[],Object.assign(this,l)}}class Oi{constructor(l){this.filtertype="Layers",this.removable=!0,this.layerRemovable=!0,this.expanded=!1,l&&void 0!==l.visible&&l.layers&&l.layers.length&&(l.layers=l.layers.map(a=>(a.visible=l.visible,a))),Object.assign(this,l)}get visible(){return this.layers&&this.layers.length&&(this.protVisible=this.layers.filter(l=>l.visible).length>0),this.protVisible}set visible(l){this.protVisible=l,this.layers&&this.layers.length&&(this.layers=this.layers.map(a=>(a.visible=l,a)))}}class Ca extends Ko{constructor(l){super(l)}}class gy extends Ko{constructor(l){super(l)}}let Vs=(()=>{class c{constructor(){this.store=new Nr(Array()),this.baseLayers=new Nr(Array()),this.overlays=new Nr(Array()),this.layers=new Nr(Array())}addLayer(a,h,d){if(this.isInLayergroups(a))console.error(`layer or Group with id: ${a.id} already exists!`);else{h?a.filtertype=h:h=a.filtertype;const f=this.store.getValue();d||(f.push(a),this.store.next(f)),this.filterFiltertype(h)}}removeLayer(a,h,d){this.isInLayergroups(a)?d?(console.log(`layer: ${a.id} is removed with force!`),this._removeLayer(a,h)):a.removable?this._removeLayer(a,h):a.removable||console.log(`layer: ${a.id} is not removable!`):console.error(`layer with id: ${a.id} not in storeItems!`)}_removeLayer(a,h){h?h!==a.filtertype&&console.error(`the layer with id: ${a.id} you want to remove from ${h} is from filtertype: ${a.filtertype}`):h=a.filtertype;const d=this.store.getValue().filter(f=>f instanceof Ys?f.id!==a.id:f);this.store.next(d),this.filterFiltertype(h)}updateLayer(a,h){this.isInLayergroups(a)?(h?h!==a.filtertype&&console.error(`the layer with id: ${a.id} you want to update is from filtertype: ${a.filtertype} and not from ${h} `):h=a.filtertype,"Overlays"===a.filtertype&&(this.updateLayerOrGroupInStore(a),this.filterFiltertype(a.filtertype)),"Layers"===a.filtertype&&(this.updateLayerOrGroupInStore(a),this.filterFiltertype(a.filtertype)),"Baselayers"===a.filtertype&&(this.updateLayerOrGroupInStore(a),this.filterFiltertype(a.filtertype))):console.error(`layer with id: ${a.id} you want to update not in storeItems!`)}updateLayerOrGroupInStore(a){this.store.getValue().filter((h,d,f)=>{h instanceof Ys&&a instanceof Ys?h.id===a.id&&(f[d]=a,this.store.next(f)):h instanceof Oi&&a instanceof Oi&&h.id===a.id&&(f[d]=a,this.store.next(f))})}removeLayerOrGroupById(a,h,d){this.store.getValue().filter(f=>{f instanceof Ys?f.id===a&&this.removeLayer(f,f.filtertype||"Layers",d):f instanceof Oi&&(f.id===a?this.removeLayerGroup(f,d):f.layers.forEach(m=>{m.id===a&&this.removeLayerFromGroup(m,f,h,d)}))})}addLayerToGroup(a,h){this.isInLayergroups(a)?console.error(`layer with id: ${a.id} already exists!`):(a.filtertype!==h.filtertype&&(a.filtertype=h.filtertype),this.isInLayergroups(a,[h])?console.error(`layer with id: ${a.id} already exists in ${h.id}!`,h):(h.layers.push(a),this.updateLayerGroup(h)))}addLayerToGroupById(a,h){this.store.getValue().forEach(d=>{d instanceof Oi&&d.id===h&&this.addLayerToGroup(a,d)})}removeLayerFromGroup(a,h,d=!0,f){h.layers=h.layers.filter(m=>m.id!==a.id),this.updateLayerGroup(h),this.filterFiltertype(a.filtertype),0===h.layers.length&&d&&this.removeLayerGroup(h,f)}setLayerIndexInGroup(a,h,d){const f=d.layers.indexOf(a);switch(h){case"up":if(0===f)break;this.arrayMove(d.layers,f,f-1);break;case"down":if(f===d.layers.length-1)break;this.arrayMove(d.layers,f,f+1)}this.updateLayer(a,d.filtertype||"Layers")}addLayerGroup(a,h){if(!this.isInLayergroups(a)){h?a.filtertype=h:h=a.filtertype;const d=this.store.getValue();this.isInLayergroups(a,a.layers)&&(a.layers=a.layers.filter(f=>f.id!==a.id)),a.layers=a.layers.map(f=>(f.filtertype=a.filtertype,f)),d.push(a),this.store.next(d),this.updateLayerGroup(a)}}removeLayerGroup(a,h){this.isInLayergroups(a)?h?(console.log(`layerGroup: ${a.id} is removed with force!`),this._removeLayerGroup(a)):a.removable?this._removeLayerGroup(a):a.removable||console.log(`layerGroup: ${a.id} is not removable!`):console.error(`layer or Group with id: ${a.id} not in storeItems!`)}_removeLayerGroup(a){for(const f of a.layers)this.removeLayerFromGroup(f,a);const d=this.store.getValue().filter(function(f,m){return f.id!==a.id});this.store.next(d)}updateLayerGroup(a,h=!1){h&&(a=this.sortLayerGroup(a)),this.updateLayerOrGroupInStore(a);for(const d of a.layers)this.updateLayer(d,a.filtertype||"Layers")}arrayMove(a,h,d){a.splice(d<0?a.length+d:d,0,a.splice(h,1)[0])}setGroupLayerIndex(a,h){let d;if((a instanceof Ys&&a.filtertype||a instanceof Oi)&&(d=this.getNumOfGroups(a.filtertype)),d>1){const f=this.store.getValue(),m=f.indexOf(a);(!this.isGroupFirst(a)||!this.isGroupLast(a))&&("number"==typeof h?this.arrayMove(f,m,h):"up"===h?this.arrayMove(f,m,m-1):"down"===h&&this.arrayMove(f,m,m+1)),this.store.next(f),this.baseLayers.next(this.filterBaseLayers()),this.layers.next(this.filterLayers()),this.overlays.next(this.filterOverlays())}}getNumOfGroups(a){let h=0;const d=this.store.getValue();for(const f of d)f.filtertype===a&&h++;return h}isGroupFirst(a,h,d){let f=!1,m=this.store.getValue();return h&&(m=h),d&&(m=m.filter(g=>g.filtertype===d)),0===m.indexOf(a)&&(f=!0),f}isGroupLast(a,h,d){let f=!1,m=this.store.getValue();return h&&(m=h),d&&(m=m.filter(g=>g.filtertype===d)),m.indexOf(a)===m.length-1&&(f=!0),f}isInLayergroups(a,h){let f,d=!1;f=a instanceof Ys||a instanceof Oi?a.id:a;const m=this.getLayerOrGroupById(f,h);return(m&&m instanceof Ys||m instanceof Oi)&&(d=!0),d}getLayerOrGroupById(a,h){const d=[];let f=this.store.getValue();return h&&(f=h),f.map(m=>{m instanceof Oi?m.id===a?d.push(m):m.layers.map(g=>{g.id===a&&d.push(g)}):m instanceof Ys&&m.id===a&&d.push(m)}),d.length?1===d.length?d[0]:void(d.length>1&&console.log("there is a duplicate ID in the Layer Groups!")):null}getLayerById(a,h){let d,f=this.flattenDeepArray(this.store.getValue());return h&&(f=h),f.map(m=>{m.id===a&&(d=m)}),d}getBaseLayers(){return this.baseLayers.asObservable()}removeBaseLayers(a){let h=this.filterBaseLayers();return a&&(h=h.filter(a)),h.forEach(d=>{this.removeLayerOrGroupById(d.id)}),this.baseLayers.asObservable()}getBaseLayersCount(){return this.baseLayers.getValue().length}getOverlays(){return this.overlays.asObservable()}removeOverlays(a){let h=this.filterOverlays();return a&&(h=h.filter(a)),h.forEach(d=>{this.removeLayerOrGroupById(d.id)}),this.overlays.asObservable()}getOverlaysCount(){return this.overlays.getValue().length}getLayers(){return this.layers.asObservable()}removeLayers(a){let h=this.filterLayers();return a&&(h=h.filter(a)),h.forEach(d=>{this.removeLayerOrGroupById(d.id)}),this.layers.asObservable()}getLayersCount(){return this.layers.getValue().length}getLayerGroups(){return this.store.asObservable()}setLayerGroups(a,h){return a.length>0&&a.map(d=>{d instanceof Oi&&d.layers.length>0&&(d.layers=d.layers.map(f=>(f.filtertype=d.filtertype,f)))}),h?("Baselayers"===h?this.removeBaseLayers():"Layers"===h?this.removeLayers():"Overlays"===h&&this.removeOverlays(),a.map(d=>{d instanceof Ys?this.addLayer(d,h):d instanceof Oi&&this.addLayerGroup(d,h)})):(this.store.next(a),this.baseLayers.next(this.filterBaseLayers()),this.layers.next(this.filterLayers()),this.overlays.next(this.filterOverlays())),this.store.asObservable()}getLayerGroupsCount(){return this.store.getValue().length}flattenDeepArray(a){return a.reduce((h,d)=>d instanceof Oi&&Array.isArray(d.layers)?h.concat(this.flattenDeepArray(d.layers)):h.concat(d),[])}filterOverlays(){const a=this.store.getValue();return this.flattenDeepArray(a.filter(d=>"Overlays"===d.filtertype))}filterBaseLayers(){const a=this.store.getValue();return this.flattenDeepArray(a.filter(d=>"Baselayers"===d.filtertype))}filterLayers(){const a=this.store.getValue();return this.flattenDeepArray(a.filter(d=>"Layers"===d.filtertype))}filterFiltertype(a){"Baselayers"===a?this.baseLayers.next(this.filterBaseLayers()):"Overlays"===a?this.overlays.next(this.filterOverlays()):"Layers"===a&&this.layers.next(this.filterLayers())}sortLayerGroup(a){return a.layers.sort((h,d)=>{let f=0;return h instanceof Ko?f=1:d instanceof Ko&&(f=-1),f}),a}}return c.\u0275fac=function(a){return new(a||c)},c.\u0275prov=Oe({token:c,factory:c.\u0275fac,providedIn:"root"}),c})();class yy{constructor(l,a,h,d=[-180,-90,180,90],f=(new Date).toISOString()){this.zoom=l,this.center=a,this.extent=d,this.time=f,this.options=Object.assign({maxzoom:0,minzoom:0,notifier:"map"},h)}sameCenter(l){return this.center.lat===l.lat&&this.center.lon===l.lon}sameZoom(l){return this.zoom===l}sameExtent(l){let h=!1;return this.extent.length===l.length&&(h=this.extent.every((d,f)=>l[f]===d)),h}sameNotifier(l){return this.options.notifier===l}}const wve=new yy(0,{lat:0,lon:0});let Zs=(()=>{class c{constructor(){this.mapState=new Nr(wve),this.lastAction=new Nr(null)}getMapState(){return this.mapState}setMapState(a){if(a)if(this.lastAction.next("setState"),a instanceof yy){const h=new yy(a.zoom,a.center,a.options,a.extent,a.time);this.mapState.next(h)}else{const h={notifier:"user",...a.options},d=new yy(a.zoom,a.center,h,a.extent,a.time);this.mapState.next(d)}}getExtent(){return this.mapState.pipe(ve(a=>a.extent))}setExtent(a,h="user"){if(!a)return;this.lastAction.next("setExtent");const d=this.getMapState().getValue();d.options.notifier=h;const f=new yy(d.zoom,d.center,d.options,a);this.mapState.next(f)}setTime(a){const h=this.getMapState().getValue();h.time=a instanceof Date?a.toISOString():a,this.setMapState(h)}getLastAction(){return this.lastAction}}return c.\u0275fac=function(a){return new(a||c)},c.\u0275prov=Oe({token:c,factory:c.\u0275fac,providedIn:"root"}),c})();class vy extends Ko{constructor(l){const a={name:"OpenStreetMap",displayName:"OpenStreetMap",id:"osm",visible:!1,type:"xyz",url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",subdomains:["a","b","c"],attribution:'&copy, <a href="https://www.openstreetmap.org">OpenStreetMap</a> contributors',continuousWorld:!1,legendImg:"https://a.tile.openstreetmap.org/3/4/3.png",description:"OpenStreetMap z-x-y Tiles",opacity:1};l&&Object.assign(a,l),super(a)}}class Cve extends Ko{constructor(l){const a={name:"OpenSeaMap",displayName:"OpenSeaMap",id:"OpenSeaMap",visible:!1,type:"xyz",removable:!1,url:"https://{s}.openseamap.org/seamark/{z}/{x}/{y}.png",subdomains:["t1"],attribution:'&copy, <a href="https://map.openseamap.org/legend.php?lang=de&page=license">OpenSeaMap</a>',continuousWorld:!1,legendImg:"https://t1.openseamap.org/seamark/10/554/321.png",description:"http://map.openseamap.org/",opacity:1};l&&Object.assign(a,l),super(a)}}class PL extends gy{constructor(l){const a={name:"EOC Litemap",displayName:"EOC Litemap",id:"eoc_litemap",visible:!1,type:"wms",removable:!1,params:{LAYERS:"litemap",FORMAT:"image/png",TRANSPARENT:!0},url:"https://geoservice.dlr.de/eoc/basemap/wms",attribution:'&copy, <a href="//geoservice.dlr.de/eoc/basemap/">DLR</a>',continuousWorld:!1,legendImg:"https://geoservice.dlr.de/eoc/basemap/wms?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetMap&FORMAT=image%2Fpng&TRANSPARENT=true&LAYERS=litemap&ATTRIBUTION=&WIDTH=256&HEIGHT=256&CRS=EPSG%3A3857&STYLES=&BBOX=0%2C0%2C10018754.171394622%2C10018754.171394622",description:"http://www.naturalearthdata.com/about/",opacity:1};l&&Object.assign(a,l),super(a)}}class xve extends Ca{constructor(l){const a={name:"EOC Litemap Tile",displayName:"EOC Litemap Tile",id:"eoc_litemap_tile",visible:!1,type:"wmts",removable:!1,params:{layer:"eoc:litemap",format:"image/png",style:"_empty",matrixSetOptions:{matrixSet:"EPSG:3857",tileMatrixPrefix:"EPSG:3857"}},url:"https://tiles.geoservice.dlr.de/service/wmts",attribution:'&copy, <a href="//geoservice.dlr.de/eoc/basemap/">DLR</a>',continuousWorld:!1,legendImg:"https://tiles.geoservice.dlr.de/service/wmts?layer=eoc%3Alitemap&style=_empty&tilematrixset=EPSG%3A3857&Service=WMTS&Request=GetTile&Version=1.0.0&Format=image%2Fpng&TileMatrix=EPSG%3A3857%3A5&TileCol=18&TileRow=11",description:"EOC Litemap as web map tile service",opacity:1};l&&Object.assign(a,l),super(a)}}class LL extends Ca{constructor(l){const a={name:"EOC Liteoverlay Tile",displayName:"EOC LiteoverlayTile",id:"eoc_Liteoverlay_tile",visible:!1,type:"wmts",removable:!1,params:{layer:"eoc:liteoverlay",format:"image/png",style:"_empty",matrixSetOptions:{matrixSet:"EPSG:3857",tileMatrixPrefix:"EPSG:3857"}},url:"https://tiles.geoservice.dlr.de/service/wmts",attribution:'&copy, <a href="//geoservice.dlr.de/eoc/basemap/">DLR</a>',continuousWorld:!1,legendImg:"https://tiles.geoservice.dlr.de/service/wmts?layer=eoc%3Aliteoverlay&style=_empty&tilematrixset=EPSG%3A3857&Service=WMTS&Request=GetTile&Version=1.0.0&Format=image%2Fpng&TileMatrix=EPSG%3A3857%3A5&TileCol=18&TileRow=11",description:"This is the liteoverlay provided for EOC Service Portals",opacity:1};l&&Object.assign(a,l),super(a)}}class Eve extends Ca{constructor(l){const a={name:"EOC Basemap Tile",displayName:"EOC Basemap Tile",id:"eoc_basemap_tile",visible:!1,type:"wmts",removable:!1,params:{layer:"eoc:basemap",format:"image/png",style:"_empty",matrixSetOptions:{matrixSet:"EPSG:3857",tileMatrixPrefix:"EPSG:3857"}},url:"https://tiles.geoservice.dlr.de/service/wmts",attribution:'&copy, <a href="//geoservice.dlr.de/eoc/basemap/">DLR</a>',continuousWorld:!1,legendImg:"https://tiles.geoservice.dlr.de/service/wmts?layer=eoc%3Abasemap&style=_empty&tilematrixset=EPSG%3A3857&Service=WMTS&Request=GetTile&Version=1.0.0&Format=image%2Fpng&TileMatrix=EPSG%3A3857%3A5&TileCol=18&TileRow=11",description:"This is the basemap for DLR Service Portals",opacity:1};l&&Object.assign(a,l),super(a)}}class kH extends Ca{constructor(l){const a={name:"EOC Baseoverlay Tile",displayName:"EOC Baseoverlay Tile",id:"eoc_Baseoverlay_tile",visible:!1,type:"wmts",removable:!1,params:{layer:"eoc:baseoverlay",format:"image/png",style:"_empty",matrixSetOptions:{matrixSet:"EPSG:3857",tileMatrixPrefix:"EPSG:3857"}},url:"https://tiles.geoservice.dlr.de/service/wmts",attribution:'&copy, <a href="//geoservice.dlr.de/eoc/basemap/">DLR</a>',continuousWorld:!1,legendImg:"https://tiles.geoservice.dlr.de/service/wmts?layer=eoc%3Abaseoverlay&style=_empty&tilematrixset=EPSG%3A3857&Service=WMTS&Request=GetTile&Version=1.0.0&Format=image%2Fpng&TileMatrix=EPSG%3A3857%3A5&TileCol=18&TileRow=11",description:"This is the basemap for DLR Service Portals",opacity:1};l&&Object.assign(a,l),super(a)}}class VH extends Ca{constructor(l){const a={name:"BlueMarble Tile",displayName:"BlueMarble Tile",id:"blueMarble_tile",visible:!1,type:"wmts",removable:!1,params:{layer:"bmng_topo_bathy",format:"image/png",style:"_empty",matrixSetOptions:{matrixSet:"EPSG:3857",tileMatrixPrefix:"EPSG:3857"}},url:"https://tiles.geoservice.dlr.de/service/wmts",attribution:'&copy, <a href="//geoservice.dlr.de/eoc/basemap/">DLR</a>',continuousWorld:!1,legendImg:"https://tiles.geoservice.dlr.de/service/wmts?layer=bmng_topo_bathy&style=_empty&tilematrixset=EPSG%3A3857&Service=WMTS&Request=GetTile&Version=1.0.0&Format=image%2Fpng&TileMatrix=EPSG%3A3857%3A5&TileCol=18&TileRow=11",description:"Blue Marble NG dataset with topography and bathymetry",opacity:1};l&&Object.assign(a,l),super(a)}}class BH extends Ca{constructor(l){const a={name:"World Relief B/W Tile",displayName:"World Relief B/W Tile",id:"eoc:world_relief_bw",visible:!1,type:"wmts",removable:!1,params:{layer:"eoc:world_relief_bw",format:"image/png",style:"_empty",matrixSetOptions:{matrixSet:"EPSG:3857",tileMatrixPrefix:"EPSG:3857"}},url:"https://tiles.geoservice.dlr.de/service/wmts",attribution:'&copy, <a href="//geoservice.dlr.de/eoc/basemap/">DLR</a>',continuousWorld:!1,legendImg:"https://tiles.geoservice.dlr.de/service/wmts?layer=eoc%3Aworld_relief_bw&style=_empty&tilematrixset=EPSG%3A3857&Service=WMTS&Request=GetTile&Version=1.0.0&Format=image%2Fpng&TileMatrix=EPSG%3A3857%3A5&TileCol=18&TileRow=11",description:"World Relief Black / White",opacity:1};l&&Object.assign(a,l),super(a)}}class Mve extends Ca{constructor(l){const a={name:"Hillshade Tile",displayName:"Hillshade Tile",id:"eoc_hillshade",visible:!1,type:"wmts",removable:!1,params:{layer:"hillshade",format:"image/png",style:"_empty",matrixSetOptions:{matrixSet:"EPSG:3857",tileMatrixPrefix:"EPSG:3857"}},url:"https://tiles.geoservice.dlr.de/service/wmts",attribution:'&copy, <a href="//geoservice.dlr.de/eoc/basemap/">DLR</a>',continuousWorld:!1,legendImg:"https://tiles.geoservice.dlr.de/service/wmts?layer=hillshade&style=_empty&tilematrixset=EPSG%3A3857&Service=WMTS&Request=GetTile&Version=1.0.0&Format=image%2Fpng&TileMatrix=EPSG%3A3857%3A5&TileCol=18&TileRow=11",description:"Global Hillshade based on GMTED2010",opacity:1};l&&Object.assign(a,l),super(a)}}var Dve=function(){function c(){this.disposed=!1}return c.prototype.dispose=function(){this.disposed||(this.disposed=!0,this.disposeInternal())},c.prototype.disposeInternal=function(){},c}();const oS=Dve;function Pp(c,l){return c>l?1:c<l?-1:0}function Nd(c,l){return c.indexOf(l)>=0}function LC(c,l,a){var h=c.length;if(c[0]<=l)return 0;if(l<=c[h-1])return h-1;var d=void 0;if(a>0){for(d=1;d<h;++d)if(c[d]<l)return d-1}else if(a<0){for(d=1;d<h;++d)if(c[d]<=l)return d}else for(d=1;d<h;++d){if(c[d]==l)return d;if(c[d]<l)return"function"==typeof a?a(l,c[d-1],c[d])>0?d-1:d:c[d-1]-l<l-c[d]?d-1:d}return h-1}function Ive(c,l,a){for(;l<a;){var h=c[l];c[l]=c[a],c[a]=h,++l,--a}}function xi(c,l){for(var a=Array.isArray(l)?l:[l],h=a.length,d=0;d<h;d++)c[c.length]=a[d]}function Fd(c,l){var a=c.length;if(a!==l.length)return!1;for(var h=0;h<a;h++)if(c[h]!==l[h])return!1;return!0}function _y(){return!0}function OC(){return!1}function Lp(){}function _n(){return function(){throw new Error("Unimplemented abstract method.")}()}var Lve=0;function tn(c){return c.ol_uid||(c.ol_uid=String(++Lve))}var kd=typeof navigator<"u"&&typeof navigator.userAgent<"u"?navigator.userAgent.toLowerCase():"",Ove=-1!==kd.indexOf("firefox"),Fve=-1!==kd.indexOf("safari")&&-1==kd.indexOf("chrom")&&!!(kd.indexOf("version/15.4")>=0||kd.match(/cpu (os|iphone os) 15_4 like mac os x/)),kve=-1!==kd.indexOf("webkit")&&-1==kd.indexOf("edge"),Vve=-1!==kd.indexOf("macintosh"),UH=typeof devicePixelRatio<"u"?devicePixelRatio:1,NC=typeof WorkerGlobalScope<"u"&&typeof OffscreenCanvas<"u"&&self instanceof WorkerGlobalScope,Bve=typeof Image<"u"&&Image.prototype.decode,GH=function(){var c=!1;try{var l=Object.defineProperty({},"passive",{get:function(){c=!0}});window.addEventListener("_",null,l),window.removeEventListener("_",null,l)}catch{}return c}(),Uve=function(){var c=function(l,a){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,d){h.__proto__=d}||function(h,d){for(var f in d)Object.prototype.hasOwnProperty.call(d,f)&&(h[f]=d[f])})(l,a)};return function(l,a){if("function"!=typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");function h(){this.constructor=l}c(l,a),l.prototype=null===a?Object.create(a):(h.prototype=a.prototype,new h)}}(),Gve=function(c){function l(a){var h=this,f="Assertion failed. See https://openlayers.org/en/v"+"6.14.1".split("-")[0]+"/doc/errors/#"+a+" for details.";return(h=c.call(this,f)||this).code=a,h.name="AssertionError",h.message=f,h}return Uve(l,c),l}(Error);const zH=Gve;function bn(c,l){if(!c)throw new zH(l)}var HH,NL=new Array(6);function aS(c){return lS(c,1,0,0,1,0,0)}function Sy(c,l){var a=c[0],h=c[1],d=c[2],f=c[3],m=c[4],g=c[5],y=l[0],v=l[1],_=l[2],S=l[3],b=l[4],T=l[5];return c[0]=a*y+d*v,c[1]=h*y+f*v,c[2]=a*_+d*S,c[3]=h*_+f*S,c[4]=a*b+d*T+m,c[5]=h*b+f*T+g,c}function lS(c,l,a,h,d,f,m){return c[0]=l,c[1]=a,c[2]=h,c[3]=d,c[4]=f,c[5]=m,c}function ni(c,l){var a=l[0],h=l[1];return l[0]=c[0]*a+c[2]*h+c[4],l[1]=c[1]*a+c[3]*h+c[5],l}function FC(c,l,a){return Sy(c,lS(NL,l,0,0,a,0,0))}function Do(c,l,a,h,d,f,m,g){var y=Math.sin(f),v=Math.cos(f);return c[0]=h*v,c[1]=d*y,c[2]=-h*y,c[3]=d*v,c[4]=m*h*v-g*h*y+l,c[5]=m*d*y+g*d*v+a,c}function by(c,l){var a=function Xve(c){return c[0]*c[3]-c[1]*c[2]}(l);bn(0!==a,32);var h=l[0],d=l[1],f=l[2],m=l[3],g=l[4],y=l[5];return c[0]=m/a,c[1]=-d/a,c[2]=-f/a,c[3]=h/a,c[4]=(f*y-m*g)/a,c[5]=-(h*y-d*g)/a,c}function kC(c){var l="matrix("+c.join(", ")+")";if(NC)return l;var a=HH||(HH=document.createElement("div"));return a.style.transform=l,a.style.transform}function FL(c){for(var l=[1/0,1/0,-1/0,-1/0],a=0,h=c.length;a<h;++a)Ty(l,c[a]);return l}function $a(c,l,a){return a?(a[0]=c[0]-l,a[1]=c[1]-l,a[2]=c[2]+l,a[3]=c[3]+l,a):[c[0]-l,c[1]-l,c[2]+l,c[3]+l]}function jH(c,l){return l?(l[0]=c[0],l[1]=c[1],l[2]=c[2],l[3]=c[3],l):c.slice()}function Op(c,l,a){var h,d;return(h=l<c[0]?c[0]-l:c[2]<l?l-c[2]:0)*h+(d=a<c[1]?c[1]-a:c[3]<a?a-c[3]:0)*d}function Ll(c,l){return uS(c,l[0],l[1])}function xa(c,l){return c[0]<=l[0]&&l[2]<=c[2]&&c[1]<=l[1]&&l[3]<=c[3]}function uS(c,l,a){return c[0]<=l&&l<=c[2]&&c[1]<=a&&a<=c[3]}function kL(c,l){var m=l[0],g=l[1],y=0;return m<c[0]?y|=16:m>c[2]&&(y|=4),g<c[1]?y|=8:g>c[3]&&(y|=2),0===y&&(y=1),y}function du(c,l,a,h,d){return d?(d[0]=c,d[1]=l,d[2]=a,d[3]=h,d):[c,l,a,h]}function Np(c){return du(1/0,1/0,-1/0,-1/0,c)}function VL(c,l){var a=c[0],h=c[1];return du(a,h,a,h,l)}function BL(c,l,a,h,d){return XH(Np(d),c,l,a,h)}function Ol(c,l){return c[0]==l[0]&&c[2]==l[2]&&c[1]==l[1]&&c[3]==l[3]}function UL(c,l){return l[0]<c[0]&&(c[0]=l[0]),l[2]>c[2]&&(c[2]=l[2]),l[1]<c[1]&&(c[1]=l[1]),l[3]>c[3]&&(c[3]=l[3]),c}function Ty(c,l){l[0]<c[0]&&(c[0]=l[0]),l[0]>c[2]&&(c[2]=l[0]),l[1]<c[1]&&(c[1]=l[1]),l[1]>c[3]&&(c[3]=l[1])}function XH(c,l,a,h,d){for(;a<h;a+=d)Zve(c,l[a],l[a+1]);return c}function Zve(c,l,a){c[0]=Math.min(c[0],l),c[1]=Math.min(c[1],a),c[2]=Math.max(c[2],l),c[3]=Math.max(c[3],a)}function qH(c,l){var a;return!!((a=l(BC(c)))||(a=l(hS(c)),a)||(a=l(UC(c)),a)||(a=l(fu(c)),a))&&a}function VC(c){var l=0;return Cy(c)||(l=fr(c)*Ei(c)),l}function BC(c){return[c[0],c[1]]}function hS(c){return[c[2],c[1]]}function Jo(c){return[(c[0]+c[2])/2,(c[1]+c[3])/2]}function Kve(c,l){var a;return"bottom-left"===l?a=BC(c):"bottom-right"===l?a=hS(c):"top-left"===l?a=fu(c):"top-right"===l?a=UC(c):bn(!1,13),a}function wy(c,l,a,h,d){var f=l*h[0]/2,m=l*h[1]/2,g=Math.cos(a),y=Math.sin(a),v=f*g,_=f*y,S=m*g,b=m*y,T=c[0],x=c[1],E=T-v+b,D=T-v-b,I=T+v-b,M=T+v+b,L=x-_-S,P=x-_+S,F=x+_+S,V=x+_-S;return du(Math.min(E,D,I,M),Math.min(L,P,F,V),Math.max(E,D,I,M),Math.max(L,P,F,V),d)}function Ei(c){return c[3]-c[1]}function mc(c,l,a){var h=a||[1/0,1/0,-1/0,-1/0];return Mi(c,l)?(h[0]=c[0]>l[0]?c[0]:l[0],h[1]=c[1]>l[1]?c[1]:l[1],h[2]=c[2]<l[2]?c[2]:l[2],h[3]=c[3]<l[3]?c[3]:l[3]):Np(h),h}function fu(c){return[c[0],c[3]]}function UC(c){return[c[2],c[3]]}function fr(c){return c[2]-c[0]}function Mi(c,l){return c[0]<=l[2]&&c[2]>=l[0]&&c[1]<=l[3]&&c[3]>=l[1]}function Cy(c){return c[2]<c[0]||c[3]<c[1]}function GL(c,l){var a=(c[2]-c[0])/2*(l-1),h=(c[3]-c[1])/2*(l-1);c[0]-=a,c[2]+=a,c[1]-=h,c[3]+=h}function GC(c,l,a,h){var d=[];if(h>1)for(var f=c[2]-c[0],m=c[3]-c[1],g=0;g<h;++g)d.push(c[0]+f*g/h,c[1],c[2],c[1]+m*g/h,c[2]-f*g/h,c[3],c[0],c[3]-m*g/h);else d=[c[0],c[1],c[2],c[1],c[2],c[3],c[0],c[3]];l(d,d,2);for(var y=[],v=[],_=(g=0,d.length);g<_;g+=2)y.push(d[g]),v.push(d[g+1]);return function qve(c,l,a){return du(Math.min.apply(null,c),Math.min.apply(null,l),Math.max.apply(null,c),Math.max.apply(null,l),a)}(y,v,a)}function $H(c,l){var a=l.getExtent(),h=Jo(c);if(l.canWrapX()&&(h[0]<a[0]||h[0]>=a[2])){var d=fr(a),m=Math.floor((h[0]-a[0])/d)*d;c[0]-=m,c[2]-=m}return c}function qn(c,l,a){return Math.min(Math.max(c,l),a)}var e_e="cosh"in Math?Math.cosh:function(l){var a=Math.exp(l);return(a+1/a)/2},t_e="log2"in Math?Math.log2:function(l){return Math.log(l)*Math.LOG2E};function YH(c,l,a,h,d,f){var m=d-a,g=f-h;if(0!==m||0!==g){var y=((c-a)*m+(l-h)*g)/(m*m+g*g);y>1?(a=d,h=f):y>0&&(a+=m*y,h+=g*y)}return Fp(c,l,a,h)}function Fp(c,l,a,h){var d=a-c,f=h-l;return d*d+f*f}function dS(c){return c*Math.PI/180}function Vd(c,l){var a=c%l;return a*l<0?a+l:a}function vh(c,l,a){return c+a*(l-c)}function zL(c,l){var a=Math.pow(10,l);return Math.round(c*a)/a}function ZH(c,l){return Math.round(zL(c,l))}function xy(c,l){return Math.floor(zL(c,l))}function Bd(c,l){return Math.ceil(zL(c,l))}var KH=/^#([a-f0-9]{3}|[a-f0-9]{4}(?:[a-f0-9]{2}){0,2})$/i,QH=/^([a-z]*)$|^hsla?\(.*\)$/i;function JH(c){return"string"==typeof c?c:n9(c)}var l,a,r_e=(l={},a=0,function(h){var d;if(l.hasOwnProperty(h))d=l[h];else{if(a>=1024){var f=0;for(var m in l)0==(3&f++)&&(delete l[m],--a)}d=function i_e(c){var l,a,h,d,f;if(QH.exec(c)&&(c=function e9(c){var l=document.createElement("div");if(l.style.color=c,""!==l.style.color){document.body.appendChild(l);var a=getComputedStyle(l).color;return document.body.removeChild(l),a}return""}(c)),KH.exec(c)){var g,m=c.length-1;g=m<=4?1:2;var y=4===m||8===m;l=parseInt(c.substr(1+0*g,g),16),a=parseInt(c.substr(1+1*g,g),16),h=parseInt(c.substr(1+2*g,g),16),d=y?parseInt(c.substr(1+3*g,g),16):255,1==g&&(l=(l<<4)+l,a=(a<<4)+a,h=(h<<4)+h,y&&(d=(d<<4)+d)),f=[l,a,h,d/255]}else 0==c.indexOf("rgba(")?t9(f=c.slice(5,-1).split(",").map(Number)):0==c.indexOf("rgb(")?((f=c.slice(4,-1).split(",").map(Number)).push(1),t9(f)):bn(!1,14);return f}(h),l[h]=d,++a}return d});function fS(c){return Array.isArray(c)?c:r_e(c)}function t9(c){return c[0]=qn(c[0]+.5|0,0,255),c[1]=qn(c[1]+.5|0,0,255),c[2]=qn(c[2]+.5|0,0,255),c[3]=qn(c[3],0,1),c}function n9(c){var l=c[0];l!=(0|l)&&(l=l+.5|0);var a=c[1];a!=(0|a)&&(a=a+.5|0);var h=c[2];return h!=(0|h)&&(h=h+.5|0),"rgba("+l+","+a+","+h+","+(void 0===c[3]?1:Math.round(100*c[3])/100)+")"}var s_e=function(){function c(){this.cache_={},this.cacheSize_=0,this.maxCacheSize_=32}return c.prototype.clear=function(){this.cache_={},this.cacheSize_=0},c.prototype.canExpireCache=function(){return this.cacheSize_>this.maxCacheSize_},c.prototype.expire=function(){if(this.canExpireCache()){var l=0;for(var a in this.cache_)0==(3&l++)&&!this.cache_[a].hasListener()&&(delete this.cache_[a],--this.cacheSize_)}},c.prototype.get=function(l,a,h){var d=r9(l,a,h);return d in this.cache_?this.cache_[d]:null},c.prototype.set=function(l,a,h,d){var f=r9(l,a,h);this.cache_[f]=d,++this.cacheSize_},c.prototype.setSize=function(l){this.maxCacheSize_=l,this.expire()},c}();function r9(c,l,a){return l+":"+c+":"+(a?JH(a):"null")}var zC=new s_e,o_e=function(){function c(l){this.type=l,this.target=null}return c.prototype.preventDefault=function(){this.defaultPrevented=!0},c.prototype.stopPropagation=function(){this.propagationStopped=!0},c}();const gc=o_e;var $n="function"==typeof Object.assign?Object.assign:function(c,l){if(null==c)throw new TypeError("Cannot convert undefined or null to object");for(var a=Object(c),h=1,d=arguments.length;h<d;++h){var f=arguments[h];if(null!=f)for(var m in f)f.hasOwnProperty(m)&&(a[m]=f[m])}return a};function Ey(c){for(var l in c)delete c[l]}var i9="function"==typeof Object.values?Object.values:function(c){var l=[];for(var a in c)l.push(c[a]);return l};function Vp(c){var l;for(l in c)return!1;return!l}var a_e=function(){var c=function(l,a){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,d){h.__proto__=d}||function(h,d){for(var f in d)Object.prototype.hasOwnProperty.call(d,f)&&(h[f]=d[f])})(l,a)};return function(l,a){if("function"!=typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");function h(){this.constructor=l}c(l,a),l.prototype=null===a?Object.create(a):(h.prototype=a.prototype,new h)}}(),l_e=function(c){function l(a){var h=c.call(this)||this;return h.eventTarget_=a,h.pendingRemovals_=null,h.dispatching_=null,h.listeners_=null,h}return a_e(l,c),l.prototype.addEventListener=function(a,h){if(a&&h){var d=this.listeners_||(this.listeners_={}),f=d[a]||(d[a]=[]);-1===f.indexOf(h)&&f.push(h)}},l.prototype.dispatchEvent=function(a){var h="string"==typeof a,d=h?a:a.type,f=this.listeners_&&this.listeners_[d];if(f){var m=h?new gc(a):a;m.target||(m.target=this.eventTarget_||this);var g=this.dispatching_||(this.dispatching_={}),y=this.pendingRemovals_||(this.pendingRemovals_={});d in g||(g[d]=0,y[d]=0),++g[d];for(var v,_=0,S=f.length;_<S;++_)if(!1===(v="handleEvent"in f[_]?f[_].handleEvent(m):f[_].call(this,m))||m.propagationStopped){v=!1;break}if(0==--g[d]){var b=y[d];for(delete y[d];b--;)this.removeEventListener(d,Lp);delete g[d]}return v}},l.prototype.disposeInternal=function(){this.listeners_&&Ey(this.listeners_)},l.prototype.getListeners=function(a){return this.listeners_&&this.listeners_[a]||void 0},l.prototype.hasListener=function(a){return!!this.listeners_&&(a?a in this.listeners_:Object.keys(this.listeners_).length>0)},l.prototype.removeEventListener=function(a,h){var d=this.listeners_&&this.listeners_[a];if(d){var f=d.indexOf(h);-1!==f&&(this.pendingRemovals_&&a in this.pendingRemovals_?(d[f]=Lp,++this.pendingRemovals_[a]):(d.splice(f,1),0===d.length&&delete this.listeners_[a]))}},l}(oS);const My=l_e;function zn(c,l,a,h,d){if(h&&h!==c&&(a=a.bind(h)),d){var f=a;a=function(){c.removeEventListener(l,a),f.apply(this,arguments)}}var m={target:c,type:l,listener:a};return c.addEventListener(l,a),m}function pS(c,l,a,h){return zn(c,l,a,h,!0)}function ri(c){c&&c.target&&(c.target.removeEventListener(c.type,c.listener),Ey(c))}var c_e=function(){var c=function(l,a){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,d){h.__proto__=d}||function(h,d){for(var f in d)Object.prototype.hasOwnProperty.call(d,f)&&(h[f]=d[f])})(l,a)};return function(l,a){if("function"!=typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");function h(){this.constructor=l}c(l,a),l.prototype=null===a?Object.create(a):(h.prototype=a.prototype,new h)}}(),HC=function(c){function l(){var a=c.call(this)||this;return a.on=a.onInternal,a.once=a.onceInternal,a.un=a.unInternal,a.revision_=0,a}return c_e(l,c),l.prototype.changed=function(){++this.revision_,this.dispatchEvent("change")},l.prototype.getRevision=function(){return this.revision_},l.prototype.onInternal=function(a,h){if(Array.isArray(a)){for(var d=a.length,f=new Array(d),m=0;m<d;++m)f[m]=zn(this,a[m],h);return f}return zn(this,a,h)},l.prototype.onceInternal=function(a,h){var d;if(Array.isArray(a)){var f=a.length;d=new Array(f);for(var m=0;m<f;++m)d[m]=pS(this,a[m],h)}else d=pS(this,a,h);return h.ol_key=d,d},l.prototype.unInternal=function(a,h){var d=h.ol_key;if(d)s9(d);else if(Array.isArray(a))for(var f=0,m=a.length;f<m;++f)this.removeEventListener(a[f],h);else this.removeEventListener(a,h)},l}(My);function s9(c){if(Array.isArray(c))for(var l=0,a=c.length;l<a;++l)ri(c[l]);else ri(c)}const o9=HC;var a9=function(){var c=function(l,a){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,d){h.__proto__=d}||function(h,d){for(var f in d)Object.prototype.hasOwnProperty.call(d,f)&&(h[f]=d[f])})(l,a)};return function(l,a){if("function"!=typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");function h(){this.constructor=l}c(l,a),l.prototype=null===a?Object.create(a):(h.prototype=a.prototype,new h)}}(),l9=function(c){function l(a,h,d){var f=c.call(this,a)||this;return f.key=h,f.oldValue=d,f}return a9(l,c),l}(gc),u_e=function(c){function l(a){var h=c.call(this)||this;return tn(h),h.values_=null,void 0!==a&&h.setProperties(a),h}return a9(l,c),l.prototype.get=function(a){var h;return this.values_&&this.values_.hasOwnProperty(a)&&(h=this.values_[a]),h},l.prototype.getKeys=function(){return this.values_&&Object.keys(this.values_)||[]},l.prototype.getProperties=function(){return this.values_&&$n({},this.values_)||{}},l.prototype.hasProperties=function(){return!!this.values_},l.prototype.notify=function(a,h){var d;d="change:".concat(a),this.hasListener(d)&&this.dispatchEvent(new l9(d,a,h)),this.hasListener(d="propertychange")&&this.dispatchEvent(new l9(d,a,h))},l.prototype.addChangeListener=function(a,h){this.addEventListener("change:".concat(a),h)},l.prototype.removeChangeListener=function(a,h){this.removeEventListener("change:".concat(a),h)},l.prototype.set=function(a,h,d){var f=this.values_||(this.values_={});if(d)f[a]=h;else{var m=f[a];f[a]=h,m!==h&&this.notify(a,m)}},l.prototype.setProperties=function(a,h){for(var d in a)this.set(d,a[d],h)},l.prototype.applyProperties=function(a){!a.values_||$n(this.values_||(this.values_={}),a.values_)},l.prototype.unset=function(a,h){if(this.values_&&a in this.values_){var d=this.values_[a];delete this.values_[a],Vp(this.values_)&&(this.values_=null),h||this.notify(a,d)}},l}(o9);const yc=u_e;var h_e=function(){var c=function(l,a){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,d){h.__proto__=d}||function(h,d){for(var f in d)Object.prototype.hasOwnProperty.call(d,f)&&(h[f]=d[f])})(l,a)};return function(l,a){if("function"!=typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");function h(){this.constructor=l}c(l,a),l.prototype=null===a?Object.create(a):(h.prototype=a.prototype,new h)}}(),d_e=function(c){function l(a){var h=c.call(this)||this;h.background_=a.background;var d=$n({},a);return"object"==typeof a.properties&&(delete d.properties,$n(d,a.properties)),d.opacity=void 0!==a.opacity?a.opacity:1,bn("number"==typeof d.opacity,64),d.visible=void 0===a.visible||a.visible,d.zIndex=a.zIndex,d.maxResolution=void 0!==a.maxResolution?a.maxResolution:1/0,d.minResolution=void 0!==a.minResolution?a.minResolution:0,d.minZoom=void 0!==a.minZoom?a.minZoom:-1/0,d.maxZoom=void 0!==a.maxZoom?a.maxZoom:1/0,h.className_=void 0!==d.className?d.className:"ol-layer",delete d.className,h.setProperties(d),h.state_=null,h}return h_e(l,c),l.prototype.getBackground=function(){return this.background_},l.prototype.getClassName=function(){return this.className_},l.prototype.getLayerState=function(a){var h=this.state_||{layer:this,managed:void 0===a||a},d=this.getZIndex();return h.opacity=qn(Math.round(100*this.getOpacity())/100,0,1),h.visible=this.getVisible(),h.extent=this.getExtent(),h.zIndex=void 0!==d||h.managed?d:1/0,h.maxResolution=this.getMaxResolution(),h.minResolution=Math.max(this.getMinResolution(),0),h.minZoom=this.getMinZoom(),h.maxZoom=this.getMaxZoom(),this.state_=h,h},l.prototype.getLayersArray=function(a){return _n()},l.prototype.getLayerStatesArray=function(a){return _n()},l.prototype.getExtent=function(){return this.get("extent")},l.prototype.getMaxResolution=function(){return this.get("maxResolution")},l.prototype.getMinResolution=function(){return this.get("minResolution")},l.prototype.getMinZoom=function(){return this.get("minZoom")},l.prototype.getMaxZoom=function(){return this.get("maxZoom")},l.prototype.getOpacity=function(){return this.get("opacity")},l.prototype.getSourceState=function(){return _n()},l.prototype.getVisible=function(){return this.get("visible")},l.prototype.getZIndex=function(){return this.get("zIndex")},l.prototype.setBackground=function(a){this.background_=a,this.changed()},l.prototype.setExtent=function(a){this.set("extent",a)},l.prototype.setMaxResolution=function(a){this.set("maxResolution",a)},l.prototype.setMinResolution=function(a){this.set("minResolution",a)},l.prototype.setMaxZoom=function(a){this.set("maxZoom",a)},l.prototype.setMinZoom=function(a){this.set("minZoom",a)},l.prototype.setOpacity=function(a){bn("number"==typeof a,64),this.set("opacity",a)},l.prototype.setVisible=function(a){this.set("visible",a)},l.prototype.setZIndex=function(a){this.set("zIndex",a)},l.prototype.disposeInternal=function(){this.state_&&(this.state_.layer=null,this.state_=null),c.prototype.disposeInternal.call(this)},l}(yc);const HL=d_e;var f_e=function(){var c=function(l,a){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,d){h.__proto__=d}||function(h,d){for(var f in d)Object.prototype.hasOwnProperty.call(d,f)&&(h[f]=d[f])})(l,a)};return function(l,a){if("function"!=typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");function h(){this.constructor=l}c(l,a),l.prototype=null===a?Object.create(a):(h.prototype=a.prototype,new h)}}(),p_e=function(c){function l(a){var h=this,d=$n({},a);return delete d.source,(h=c.call(this,d)||this).mapPrecomposeKey_=null,h.mapRenderKey_=null,h.sourceChangeKey_=null,h.renderer_=null,h.rendered=!1,a.render&&(h.render=a.render),a.map&&h.setMap(a.map),h.addChangeListener("source",h.handleSourcePropertyChange_),h.setSource(a.source?a.source:null),h}return f_e(l,c),l.prototype.getLayersArray=function(a){var h=a||[];return h.push(this),h},l.prototype.getLayerStatesArray=function(a){var h=a||[];return h.push(this.getLayerState()),h},l.prototype.getSource=function(){return this.get("source")||null},l.prototype.getRenderSource=function(){return this.getSource()},l.prototype.getSourceState=function(){var a=this.getSource();return a?a.getState():"undefined"},l.prototype.handleSourceChange_=function(){this.changed()},l.prototype.handleSourcePropertyChange_=function(){this.sourceChangeKey_&&(ri(this.sourceChangeKey_),this.sourceChangeKey_=null);var a=this.getSource();a&&(this.sourceChangeKey_=zn(a,"change",this.handleSourceChange_,this)),this.changed()},l.prototype.getFeatures=function(a){return this.renderer_?this.renderer_.getFeatures(a):new Promise(function(h){return h([])})},l.prototype.getData=function(a){return this.renderer_&&this.rendered?this.renderer_.getData(a):null},l.prototype.render=function(a,h){var d=this.getRenderer();if(d.prepareFrame(a))return this.rendered=!0,d.renderFrame(a,h)},l.prototype.unrender=function(){this.rendered=!1},l.prototype.setMapInternal=function(a){a||this.unrender(),this.set("map",a)},l.prototype.getMapInternal=function(){return this.get("map")},l.prototype.setMap=function(a){this.mapPrecomposeKey_&&(ri(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),a||this.changed(),this.mapRenderKey_&&(ri(this.mapRenderKey_),this.mapRenderKey_=null),a&&(this.mapPrecomposeKey_=zn(a,"precompose",function(h){var f=h.frameState.layerStatesArray,m=this.getLayerState(!1);bn(!f.some(function(g){return g.layer===m.layer}),67),f.push(m)},this),this.mapRenderKey_=zn(this,"change",a.render,a),this.changed())},l.prototype.setSource=function(a){this.set("source",a)},l.prototype.getRenderer=function(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_},l.prototype.hasRenderer=function(){return!!this.renderer_},l.prototype.createRenderer=function(){return null},l.prototype.disposeInternal=function(){this.renderer_&&(this.renderer_.dispose(),delete this.renderer_),this.setSource(null),c.prototype.disposeInternal.call(this)},l}(HL);function jC(c,l){if(!c.visible)return!1;var a=l.resolution;if(a<c.minResolution||a>=c.maxResolution)return!1;var h=l.zoom;return h>c.minZoom&&h<=c.maxZoom}const Ao=p_e;function c9(c,l,a){var h=void 0!==a?c.toFixed(a):""+c,d=h.indexOf(".");return(d=-1===d?h.length:d)>l?h:new Array(1+l-d).join("0")+h}function u9(c,l){for(var a=(""+c).split("."),h=(""+l).split("."),d=0;d<Math.max(a.length,h.length);d++){var f=parseInt(a[d]||"0",10),m=parseInt(h[d]||"0",10);if(f>m)return 1;if(m>f)return-1}return 0}function h9(c,l){return c[0]+=+l[0],c[1]+=+l[1],c}function WC(c,l,a){var h=Vd(l+180,360)-180,d=Math.abs(3600*h),f=a||0,m=Math.pow(10,f),g=Math.floor(d/3600),y=Math.floor((d-3600*g)/60),v=d-3600*g-60*y;return(v=Math.ceil(v*m)/m)>=60&&(v=0,y+=1),y>=60&&(y=0,g+=1),g+"\xb0 "+c9(y,2)+"\u2032 "+c9(v,2,f)+"\u2033"+(0==h?"":" "+c.charAt(h<0?1:0))}function XC(c,l){for(var a=!0,h=c.length-1;h>=0;--h)if(c[h]!=l[h]){a=!1;break}return a}function jL(c,l){var a=Math.cos(l),h=Math.sin(l),f=c[1]*a+c[0]*h;return c[0]=c[0]*a-c[1]*h,c[1]=f,c}function d9(c,l){return c[0]*=l,c[1]*=l,c}function WL(c,l){if(l.canWrapX()){var a=fr(l.getExtent()),h=m9(c,l,a);h&&(c[0]-=h*a)}return c}function m9(c,l,a){var h=l.getExtent(),d=0;if(l.canWrapX()&&(c[0]<h[0]||c[0]>h[2])){var f=a||fr(h);d=Math.floor((c[0]-h[0])/f)}return d}var y_e=function(){var c=function(l,a){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,d){h.__proto__=d}||function(h,d){for(var f in d)Object.prototype.hasOwnProperty.call(d,f)&&(h[f]=d[f])})(l,a)};return function(l,a){if("function"!=typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");function h(){this.constructor=l}c(l,a),l.prototype=null===a?Object.create(a):(h.prototype=a.prototype,new h)}}(),v_e=function(c){function l(a){var h=c.call(this)||this;return h.map_=a,h}return y_e(l,c),l.prototype.dispatchRenderEvent=function(a,h){_n()},l.prototype.calculateMatrices2D=function(a){var h=a.viewState,d=a.coordinateToPixelTransform,f=a.pixelToCoordinateTransform;Do(d,a.size[0]/2,a.size[1]/2,1/h.resolution,-1/h.resolution,-h.rotation,-h.center[0],-h.center[1]),by(f,d)},l.prototype.forEachFeatureAtCoordinate=function(a,h,d,f,m,g,y,v){var _,S=h.viewState;function b(he,J,ce,be){return m.call(g,J,he?ce:null,be)}var T=S.projection,x=WL(a.slice(),T),E=[[0,0]];if(T.canWrapX()&&f){var I=fr(T.getExtent());E.push([-I,0],[I,0])}for(var M=h.layerStatesArray,L=M.length,P=[],F=[],V=0;V<E.length;V++)for(var z=L-1;z>=0;--z){var q=M[z],K=q.layer;if(K.hasRenderer()&&jC(q,S)&&y.call(v,K)){var se=K.getRenderer(),W=K.getSource();if(se&&W){var Q=W.getWrapX()?x:a,ie=b.bind(null,q.managed);F[0]=Q[0]+E[V][0],F[1]=Q[1]+E[V][1],_=se.forEachFeatureAtCoordinate(F,h,d,ie,P)}if(_)return _}}if(0!==P.length){var ae=1/P.length;return P.forEach(function(he,J){return he.distanceSq+=J*ae}),P.sort(function(he,J){return he.distanceSq-J.distanceSq}),P.some(function(he){return _=he.callback(he.feature,he.layer,he.geometry)}),_}},l.prototype.forEachLayerAtPixel=function(a,h,d,f,m){return _n()},l.prototype.hasFeatureAtCoordinate=function(a,h,d,f,m,g){return void 0!==this.forEachFeatureAtCoordinate(a,h,d,f,_y,this,m,g)},l.prototype.getMap=function(){return this.map_},l.prototype.renderFrame=function(a){_n()},l.prototype.scheduleExpireIconCache=function(a){zC.canExpireCache()&&a.postRenderFunctions.push(__e)},l}(oS);function __e(c,l){zC.expire()}const S_e=v_e;var b_e=function(){var c=function(l,a){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,d){h.__proto__=d}||function(h,d){for(var f in d)Object.prototype.hasOwnProperty.call(d,f)&&(h[f]=d[f])})(l,a)};return function(l,a){if("function"!=typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");function h(){this.constructor=l}c(l,a),l.prototype=null===a?Object.create(a):(h.prototype=a.prototype,new h)}}(),T_e=function(c){function l(a,h,d,f){var m=c.call(this,a)||this;return m.inversePixelTransform=h,m.frameState=d,m.context=f,m}return b_e(l,c),l}(gc);const mS=T_e;var qC="ol-hidden",Bp="ol-unselectable",g9="ol-unsupported",gS="ol-control",$C="ol-collapsed",C_e=new RegExp(["^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)","(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?","(?:small|large)|medium|smaller|larger|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))","(?:\\s*\\/\\s*(normal|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])?))","?\\s*([-,\\\"\\'\\sa-z]+?)\\s*$"].join(""),"i"),y9=["style","variant","weight","size","lineHeight","family"],v9=function(c){var l=c.match(C_e);if(!l)return null;for(var a={lineHeight:"normal",size:"1.2em",style:"normal",weight:"normal",variant:"normal"},h=0,d=y9.length;h<d;++h){var f=l[h+1];void 0!==f&&(a[y9[h]]=f)}return a.families=a.family.split(/,\s?/),a};function _9(c){return 1===c?"":String(Math.round(100*c)/100)}function Qs(c,l,a,h){var d;return d=a&&a.length?a.shift():NC?new OffscreenCanvas(c||300,l||300):document.createElement("canvas"),c&&(d.width=c),l&&(d.height=l),d.getContext("2d",h)}function x_e(c){var l=c.offsetWidth,a=getComputedStyle(c);return l+(parseInt(a.marginLeft,10)+parseInt(a.marginRight,10))}function E_e(c){var l=c.offsetHeight,a=getComputedStyle(c);return l+(parseInt(a.marginTop,10)+parseInt(a.marginBottom,10))}function Dy(c,l){var a=l.parentNode;a&&a.replaceChild(c,l)}function YC(c){return c&&c.parentNode?c.parentNode.removeChild(c):null}function S9(c){for(;c.lastChild;)c.removeChild(c.lastChild)}function XL(c,l){for(var a=c.childNodes,h=0;;++h){var d=a[h],f=l[h];if(!d&&!f)break;if(d!==f){if(!d){c.appendChild(f);continue}if(!f){c.removeChild(d),--h;continue}c.insertBefore(f,d)}}}var b9="10px sans-serif",_h="#000",ZC="round",yS=[],Ay="round",SS="#000",bS="center",KC="middle",Up=[0,0,0,0],pu=new yc;(new My).setSize=function(){console.warn("labelCache is deprecated.")};var qL,Iy=null,$L={},T9=function(){var f,m,l="32px ",a=["monospace","serif"],h=a.length,d="wmytzilWMYTZIL@#/&?$%10\uf013";function g(v,_,S){for(var b=!0,T=0;T<h;++T){var x=a[T];if(m=QC(v+" "+_+" "+l+x,d),S!=x){var E=QC(v+" "+_+" "+l+S+","+x,d);b=b&&E!=m}}return!!b}function y(){for(var v=!0,_=pu.getKeys(),S=0,b=_.length;S<b;++S){var T=_[S];pu.get(T)<100&&(g.apply(this,T.split("\n"))?(Ey($L),Iy=null,qL=void 0,pu.set(T,100)):(pu.set(T,pu.get(T)+1,!0),v=!1))}v&&(clearInterval(f),f=void 0)}return function(v){var _=v9(v);if(_)for(var S=_.families,b=0,T=S.length;b<T;++b){var x=S[b],E=_.style+"\n"+_.weight+"\n"+x;void 0===pu.get(E)&&(pu.set(E,100,!0),g(_.style,_.weight,x)||(pu.set(E,0,!0),void 0===f&&(f=setInterval(y,32))))}}}(),D_e=function(){var c;return function(l){var a=$L[l];if(null==a){if(NC){var h=v9(l),d=w9(l,"\u017dg");a=(isNaN(Number(h.lineHeight))?1.2:Number(h.lineHeight))*(d.actualBoundingBoxAscent+d.actualBoundingBoxDescent)}else c||((c=document.createElement("div")).innerHTML="M",c.style.minHeight="0",c.style.maxHeight="none",c.style.height="auto",c.style.padding="0",c.style.border="none",c.style.position="absolute",c.style.display="block",c.style.left="-99999px"),c.style.font=l,document.body.appendChild(c),a=c.offsetHeight,document.body.removeChild(c);$L[l]=a}return a}}();function w9(c,l){return Iy||(Iy=Qs(1,1)),c!=qL&&(Iy.font=c,qL=Iy.font),Iy.measureText(l)}function QC(c,l){return w9(c,l).width}function C9(c,l,a){if(l in a)return a[l];var h=QC(c,l);return a[l]=h,h}var P_e=function(){var c=function(l,a){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,d){h.__proto__=d}||function(h,d){for(var f in d)Object.prototype.hasOwnProperty.call(d,f)&&(h[f]=d[f])})(l,a)};return function(l,a){if("function"!=typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");function h(){this.constructor=l}c(l,a),l.prototype=null===a?Object.create(a):(h.prototype=a.prototype,new h)}}(),L_e=function(c){function l(a){var h=c.call(this,a)||this;h.fontChangeListenerKey_=zn(pu,"propertychange",a.redrawText.bind(a)),h.element_=document.createElement("div");var d=h.element_.style;d.position="absolute",d.width="100%",d.height="100%",d.zIndex="0",h.element_.className=Bp+" ol-layers";var f=a.getViewport();return f.insertBefore(h.element_,f.firstChild||null),h.children_=[],h.renderedVisible_=!0,h}return P_e(l,c),l.prototype.dispatchRenderEvent=function(a,h){var d=this.getMap();if(d.hasListener(a)){var f=new mS(a,void 0,h);d.dispatchEvent(f)}},l.prototype.disposeInternal=function(){ri(this.fontChangeListenerKey_),this.element_.parentNode.removeChild(this.element_),c.prototype.disposeInternal.call(this)},l.prototype.renderFrame=function(a){if(a){this.calculateMatrices2D(a),this.dispatchRenderEvent("precompose",a);var h=a.layerStatesArray.sort(function(T,x){return T.zIndex-x.zIndex}),d=a.viewState;this.children_.length=0;for(var f=[],m=null,g=0,y=h.length;g<y;++g){var v=h[g];a.layerIndex=g;var _=v.layer,S=_.getSourceState();if(!jC(v,d)||"ready"!=S&&"undefined"!=S)_.unrender();else{var b=_.render(a,m);!b||(b!==m&&(this.children_.push(b),m=b),"getDeclutter"in _&&f.push(_))}}for(g=f.length-1;g>=0;--g)f[g].renderDeclutter(a);XL(this.element_,this.children_),this.dispatchRenderEvent("postcompose",a),this.renderedVisible_||(this.element_.style.display="",this.renderedVisible_=!0),this.scheduleExpireIconCache(a)}else this.renderedVisible_&&(this.element_.style.display="none",this.renderedVisible_=!1)},l.prototype.forEachLayerAtPixel=function(a,h,d,f,m){for(var g=h.viewState,y=h.layerStatesArray,_=y.length-1;_>=0;--_){var S=y[_],b=S.layer;if(b.hasRenderer()&&jC(S,g)&&m(b)){var x=b.getRenderer().getDataAtPixel(a,h,d);if(x){var E=f(b,x);if(E)return E}}}},l}(S_e);const x9=L_e;var E9=function(){var c=function(l,a){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,d){h.__proto__=d}||function(h,d){for(var f in d)Object.prototype.hasOwnProperty.call(d,f)&&(h[f]=d[f])})(l,a)};return function(l,a){if("function"!=typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");function h(){this.constructor=l}c(l,a),l.prototype=null===a?Object.create(a):(h.prototype=a.prototype,new h)}}(),JC=function(c){function l(a,h,d){var f=c.call(this,a)||this;return f.element=h,f.index=d,f}return E9(l,c),l}(gc),O_e=function(c){function l(a,h){var d=c.call(this)||this;if(d.unique_=!!(h||{}).unique,d.array_=a||[],d.unique_)for(var m=0,g=d.array_.length;m<g;++m)d.assertUnique_(d.array_[m],m);return d.updateLength_(),d}return E9(l,c),l.prototype.clear=function(){for(;this.getLength()>0;)this.pop()},l.prototype.extend=function(a){for(var h=0,d=a.length;h<d;++h)this.push(a[h]);return this},l.prototype.forEach=function(a){for(var h=this.array_,d=0,f=h.length;d<f;++d)a(h[d],d,h)},l.prototype.getArray=function(){return this.array_},l.prototype.item=function(a){return this.array_[a]},l.prototype.getLength=function(){return this.get("length")},l.prototype.insertAt=function(a,h){this.unique_&&this.assertUnique_(h),this.array_.splice(a,0,h),this.updateLength_(),this.dispatchEvent(new JC("add",h,a))},l.prototype.pop=function(){return this.removeAt(this.getLength()-1)},l.prototype.push=function(a){this.unique_&&this.assertUnique_(a);var h=this.getLength();return this.insertAt(h,a),this.getLength()},l.prototype.remove=function(a){for(var h=this.array_,d=0,f=h.length;d<f;++d)if(h[d]===a)return this.removeAt(d)},l.prototype.removeAt=function(a){var h=this.array_[a];return this.array_.splice(a,1),this.updateLength_(),this.dispatchEvent(new JC("remove",h,a)),h},l.prototype.setAt=function(a,h){var d=this.getLength();if(a<d){this.unique_&&this.assertUnique_(h,a);var f=this.array_[a];this.array_[a]=h,this.dispatchEvent(new JC("remove",f,a)),this.dispatchEvent(new JC("add",h,a))}else{for(var m=d;m<a;++m)this.insertAt(m,void 0);this.insertAt(a,h)}},l.prototype.updateLength_=function(){this.set("length",this.array_.length)},l.prototype.assertUnique_=function(a,h){for(var d=0,f=this.array_.length;d<f;++d)if(this.array_[d]===a&&d!==h)throw new zH(58)},l}(yc);const co=O_e;var D9=function(){var c=function(l,a){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,d){h.__proto__=d}||function(h,d){for(var f in d)Object.prototype.hasOwnProperty.call(d,f)&&(h[f]=d[f])})(l,a)};return function(l,a){if("function"!=typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");function h(){this.constructor=l}c(l,a),l.prototype=null===a?Object.create(a):(h.prototype=a.prototype,new h)}}(),Ud=function(c){function l(a,h){var d=c.call(this,a)||this;return d.layer=h,d}return D9(l,c),l}(gc),N_e=function(c){function l(a){var h=this,d=a||{},f=$n({},d);delete f.layers;var m=d.layers;return(h=c.call(this,f)||this).layersListenerKeys_=[],h.listenerKeys_={},h.addChangeListener("layers",h.handleLayersChanged_),m?Array.isArray(m)?m=new co(m.slice(),{unique:!0}):bn("function"==typeof m.getArray,43):m=new co(void 0,{unique:!0}),h.setLayers(m),h}return D9(l,c),l.prototype.handleLayerChange_=function(){this.changed()},l.prototype.handleLayersChanged_=function(){this.layersListenerKeys_.forEach(ri),this.layersListenerKeys_.length=0;var a=this.getLayers();for(var h in this.layersListenerKeys_.push(zn(a,"add",this.handleLayersAdd_,this),zn(a,"remove",this.handleLayersRemove_,this)),this.listenerKeys_)this.listenerKeys_[h].forEach(ri);Ey(this.listenerKeys_);for(var d=a.getArray(),f=0,m=d.length;f<m;f++){var g=d[f];this.registerLayerListeners_(g),this.dispatchEvent(new Ud("addlayer",g))}this.changed()},l.prototype.registerLayerListeners_=function(a){var h=[zn(a,"propertychange",this.handleLayerChange_,this),zn(a,"change",this.handleLayerChange_,this)];a instanceof l&&h.push(zn(a,"addlayer",this.handleLayerGroupAdd_,this),zn(a,"removelayer",this.handleLayerGroupRemove_,this)),this.listenerKeys_[tn(a)]=h},l.prototype.handleLayerGroupAdd_=function(a){this.dispatchEvent(new Ud("addlayer",a.layer))},l.prototype.handleLayerGroupRemove_=function(a){this.dispatchEvent(new Ud("removelayer",a.layer))},l.prototype.handleLayersAdd_=function(a){var h=a.element;this.registerLayerListeners_(h),this.dispatchEvent(new Ud("addlayer",h)),this.changed()},l.prototype.handleLayersRemove_=function(a){var h=a.element,d=tn(h);this.listenerKeys_[d].forEach(ri),delete this.listenerKeys_[d],this.dispatchEvent(new Ud("removelayer",h)),this.changed()},l.prototype.getLayers=function(){return this.get("layers")},l.prototype.setLayers=function(a){var h=this.getLayers();if(h)for(var d=h.getArray(),f=0,m=d.length;f<m;++f)this.dispatchEvent(new Ud("removelayer",d[f]));this.set("layers",a)},l.prototype.getLayersArray=function(a){var h=void 0!==a?a:[];return this.getLayers().forEach(function(d){d.getLayersArray(h)}),h},l.prototype.getLayerStatesArray=function(a){var h=void 0!==a?a:[],d=h.length;this.getLayers().forEach(function(_){_.getLayerStatesArray(h)});var f=this.getLayerState(),m=f.zIndex;!a&&void 0===f.zIndex&&(m=0);for(var g=d,y=h.length;g<y;g++){var v=h[g];v.opacity*=f.opacity,v.visible=v.visible&&f.visible,v.maxResolution=Math.min(v.maxResolution,f.maxResolution),v.minResolution=Math.max(v.minResolution,f.minResolution),v.minZoom=Math.max(v.minZoom,f.minZoom),v.maxZoom=Math.min(v.maxZoom,f.maxZoom),void 0!==f.extent&&(v.extent=void 0!==v.extent?mc(v.extent,f.extent):f.extent),void 0===v.zIndex&&(v.zIndex=m)}return h},l.prototype.getSourceState=function(){return"ready"},l}(HL);const Ui=N_e;var F_e=function(){var c=function(l,a){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,d){h.__proto__=d}||function(h,d){for(var f in d)Object.prototype.hasOwnProperty.call(d,f)&&(h[f]=d[f])})(l,a)};return function(l,a){if("function"!=typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");function h(){this.constructor=l}c(l,a),l.prototype=null===a?Object.create(a):(h.prototype=a.prototype,new h)}}(),k_e=function(c){function l(a,h,d){var f=c.call(this,a)||this;return f.map=h,f.frameState=void 0!==d?d:null,f}return F_e(l,c),l}(gc);const Ry=k_e;var V_e=function(){var c=function(l,a){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,d){h.__proto__=d}||function(h,d){for(var f in d)Object.prototype.hasOwnProperty.call(d,f)&&(h[f]=d[f])})(l,a)};return function(l,a){if("function"!=typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");function h(){this.constructor=l}c(l,a),l.prototype=null===a?Object.create(a):(h.prototype=a.prototype,new h)}}(),B_e=function(c){function l(a,h,d,f,m){var g=c.call(this,a,h,m)||this;return g.originalEvent=d,g.pixel_=null,g.coordinate_=null,g.dragging=void 0!==f&&f,g}return V_e(l,c),Object.defineProperty(l.prototype,"pixel",{get:function(){return this.pixel_||(this.pixel_=this.map.getEventPixel(this.originalEvent)),this.pixel_},set:function(a){this.pixel_=a},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"coordinate",{get:function(){return this.coordinate_||(this.coordinate_=this.map.getCoordinateFromPixel(this.pixel)),this.coordinate_},set:function(a){this.coordinate_=a},enumerable:!1,configurable:!0}),l.prototype.preventDefault=function(){c.prototype.preventDefault.call(this),"preventDefault"in this.originalEvent&&this.originalEvent.preventDefault()},l.prototype.stopPropagation=function(){c.prototype.stopPropagation.call(this),"stopPropagation"in this.originalEvent&&this.originalEvent.stopPropagation()},l}(Ry);const Gd=B_e,Di={SINGLECLICK:"singleclick",CLICK:"click",DBLCLICK:"dblclick",POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"};var U_e=function(){var c=function(l,a){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,d){h.__proto__=d}||function(h,d){for(var f in d)Object.prototype.hasOwnProperty.call(d,f)&&(h[f]=d[f])})(l,a)};return function(l,a){if("function"!=typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");function h(){this.constructor=l}c(l,a),l.prototype=null===a?Object.create(a):(h.prototype=a.prototype,new h)}}(),G_e=function(c){function l(a,h){var d=c.call(this,a)||this;d.map_=a,d.emulateClicks_=!1,d.dragging_=!1,d.dragListenerKeys_=[],d.moveTolerance_=void 0===h?1:h,d.down_=null;var f=d.map_.getViewport();return d.activePointers_=0,d.trackedTouches_={},d.element_=f,d.pointerdownListenerKey_=zn(f,"pointerdown",d.handlePointerDown_,d),d.relayedListenerKey_=zn(f,"pointermove",d.relayEvent_,d),d.boundHandleTouchMove_=d.handleTouchMove_.bind(d),d.element_.addEventListener("touchmove",d.boundHandleTouchMove_,!!GH&&{passive:!1}),d}return U_e(l,c),l.prototype.emulateClick_=function(a){var h=new Gd(Di.CLICK,this.map_,a);this.dispatchEvent(h),void 0!==this.clickTimeoutId_?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=void 0,h=new Gd(Di.DBLCLICK,this.map_,a),this.dispatchEvent(h)):this.clickTimeoutId_=setTimeout(function(){this.clickTimeoutId_=void 0;var d=new Gd(Di.SINGLECLICK,this.map_,a);this.dispatchEvent(d)}.bind(this),250)},l.prototype.updateActivePointers_=function(a){var h=a;h.type==Di.POINTERUP||h.type==Di.POINTERCANCEL?delete this.trackedTouches_[h.pointerId]:h.type==Di.POINTERDOWN&&(this.trackedTouches_[h.pointerId]=!0),this.activePointers_=Object.keys(this.trackedTouches_).length},l.prototype.handlePointerUp_=function(a){this.updateActivePointers_(a);var h=new Gd(Di.POINTERUP,this.map_,a);this.dispatchEvent(h),this.emulateClicks_&&!h.defaultPrevented&&!this.dragging_&&this.isMouseActionButton_(a)&&this.emulateClick_(this.down_),0===this.activePointers_&&(this.dragListenerKeys_.forEach(ri),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null)},l.prototype.isMouseActionButton_=function(a){return 0===a.button},l.prototype.handlePointerDown_=function(a){this.emulateClicks_=0===this.activePointers_,this.updateActivePointers_(a);var h=new Gd(Di.POINTERDOWN,this.map_,a);for(var d in this.dispatchEvent(h),this.down_={},a){var f=a[d];this.down_[d]="function"==typeof f?Lp:f}if(0===this.dragListenerKeys_.length){var m=this.map_.getOwnerDocument();this.dragListenerKeys_.push(zn(m,Di.POINTERMOVE,this.handlePointerMove_,this),zn(m,Di.POINTERUP,this.handlePointerUp_,this),zn(this.element_,Di.POINTERCANCEL,this.handlePointerUp_,this)),this.element_.getRootNode&&this.element_.getRootNode()!==m&&this.dragListenerKeys_.push(zn(this.element_.getRootNode(),Di.POINTERUP,this.handlePointerUp_,this))}},l.prototype.handlePointerMove_=function(a){if(this.isMoving_(a)){this.dragging_=!0;var h=new Gd(Di.POINTERDRAG,this.map_,a,this.dragging_);this.dispatchEvent(h)}},l.prototype.relayEvent_=function(a){this.originalPointerMoveEvent_=a;var h=!(!this.down_||!this.isMoving_(a));this.dispatchEvent(new Gd(a.type,this.map_,a,h))},l.prototype.handleTouchMove_=function(a){var h=this.originalPointerMoveEvent_;(!h||h.defaultPrevented)&&("boolean"!=typeof a.cancelable||!0===a.cancelable)&&a.preventDefault()},l.prototype.isMoving_=function(a){return this.dragging_||Math.abs(a.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(a.clientY-this.down_.clientY)>this.moveTolerance_},l.prototype.disposeInternal=function(){this.relayedListenerKey_&&(ri(this.relayedListenerKey_),this.relayedListenerKey_=null),this.element_.removeEventListener("touchmove",this.boundHandleTouchMove_),this.pointerdownListenerKey_&&(ri(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(ri),this.dragListenerKeys_.length=0,this.element_=null,c.prototype.disposeInternal.call(this)},l}(My);const z_e=G_e;var ex=1/0,H_e=function(){function c(l,a){this.priorityFunction_=l,this.keyFunction_=a,this.elements_=[],this.priorities_=[],this.queuedElements_={}}return c.prototype.clear=function(){this.elements_.length=0,this.priorities_.length=0,Ey(this.queuedElements_)},c.prototype.dequeue=function(){var l=this.elements_,a=this.priorities_,h=l[0];1==l.length?(l.length=0,a.length=0):(l[0]=l.pop(),a[0]=a.pop(),this.siftUp_(0));var d=this.keyFunction_(h);return delete this.queuedElements_[d],h},c.prototype.enqueue=function(l){bn(!(this.keyFunction_(l)in this.queuedElements_),31);var a=this.priorityFunction_(l);return a!=ex&&(this.elements_.push(l),this.priorities_.push(a),this.queuedElements_[this.keyFunction_(l)]=!0,this.siftDown_(0,this.elements_.length-1),!0)},c.prototype.getCount=function(){return this.elements_.length},c.prototype.getLeftChildIndex_=function(l){return 2*l+1},c.prototype.getRightChildIndex_=function(l){return 2*l+2},c.prototype.getParentIndex_=function(l){return l-1>>1},c.prototype.heapify_=function(){var l;for(l=(this.elements_.length>>1)-1;l>=0;l--)this.siftUp_(l)},c.prototype.isEmpty=function(){return 0===this.elements_.length},c.prototype.isKeyQueued=function(l){return l in this.queuedElements_},c.prototype.isQueued=function(l){return this.isKeyQueued(this.keyFunction_(l))},c.prototype.siftUp_=function(l){for(var a=this.elements_,h=this.priorities_,d=a.length,f=a[l],m=h[l],g=l;l<d>>1;){var y=this.getLeftChildIndex_(l),v=this.getRightChildIndex_(l),_=v<d&&h[v]<h[y]?v:y;a[l]=a[_],h[l]=h[_],l=_}a[l]=f,h[l]=m,this.siftDown_(g,l)},c.prototype.siftDown_=function(l,a){for(var h=this.elements_,d=this.priorities_,f=h[a],m=d[a];a>l;){var g=this.getParentIndex_(a);if(!(d[g]>m))break;h[a]=h[g],d[a]=d[g],a=g}h[a]=f,d[a]=m},c.prototype.reprioritize=function(){var m,g,y,l=this.priorityFunction_,a=this.elements_,h=this.priorities_,d=0,f=a.length;for(g=0;g<f;++g)(y=l(m=a[g]))==ex?delete this.queuedElements_[this.keyFunction_(m)]:(h[d]=y,a[d++]=m);a.length=d,h.length=d,this.heapify_()},c}();const j_e=H_e;var W_e=function(){var c=function(l,a){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,d){h.__proto__=d}||function(h,d){for(var f in d)Object.prototype.hasOwnProperty.call(d,f)&&(h[f]=d[f])})(l,a)};return function(l,a){if("function"!=typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");function h(){this.constructor=l}c(l,a),l.prototype=null===a?Object.create(a):(h.prototype=a.prototype,new h)}}(),X_e=function(c){function l(a,h){var d=c.call(this,function(f){return a.apply(null,f)},function(f){return f[0].getKey()})||this;return d.boundHandleTileChange_=d.handleTileChange.bind(d),d.tileChangeCallback_=h,d.tilesLoading_=0,d.tilesLoadingKeys_={},d}return W_e(l,c),l.prototype.enqueue=function(a){var h=c.prototype.enqueue.call(this,a);return h&&a[0].addEventListener("change",this.boundHandleTileChange_),h},l.prototype.getTilesLoading=function(){return this.tilesLoading_},l.prototype.handleTileChange=function(a){var h=a.target,d=h.getState();if(2===d||3===d||4===d){h.removeEventListener("change",this.boundHandleTileChange_);var f=h.getKey();f in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[f],--this.tilesLoading_),this.tileChangeCallback_()}},l.prototype.loadMoreTiles=function(a,h){for(var m,g,d=0;this.tilesLoading_<a&&d<h&&this.getCount()>0;)g=(m=this.dequeue()[0]).getKey(),0===m.getState()&&!(g in this.tilesLoadingKeys_)&&(this.tilesLoadingKeys_[g]=!0,++this.tilesLoading_,++d,m.load())},l}(j_e);const A9=X_e;var _c={RADIANS:"radians",DEGREES:"degrees",FEET:"ft",METERS:"m",PIXELS:"pixels",TILE_PIXELS:"tile-pixels",USFEET:"us-ft"},Ya={};Ya[_c.RADIANS]=6370997/(2*Math.PI),Ya[_c.DEGREES]=2*Math.PI*6370997/360,Ya[_c.FEET]=.3048,Ya[_c.METERS]=1,Ya[_c.USFEET]=1200/3937;const ta=_c,Za={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"};var Y_e=function(){function c(l){this.code_=l.code,this.units_=l.units,this.extent_=void 0!==l.extent?l.extent:null,this.worldExtent_=void 0!==l.worldExtent?l.worldExtent:null,this.axisOrientation_=void 0!==l.axisOrientation?l.axisOrientation:"enu",this.global_=void 0!==l.global&&l.global,this.canWrapX_=!(!this.global_||!this.extent_),this.getPointResolutionFunc_=l.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=l.metersPerUnit}return c.prototype.canWrapX=function(){return this.canWrapX_},c.prototype.getCode=function(){return this.code_},c.prototype.getExtent=function(){return this.extent_},c.prototype.getUnits=function(){return this.units_},c.prototype.getMetersPerUnit=function(){return this.metersPerUnit_||Ya[this.units_]},c.prototype.getWorldExtent=function(){return this.worldExtent_},c.prototype.getAxisOrientation=function(){return this.axisOrientation_},c.prototype.isGlobal=function(){return this.global_},c.prototype.setGlobal=function(l){this.global_=l,this.canWrapX_=!(!l||!this.extent_)},c.prototype.getDefaultTileGrid=function(){return this.defaultTileGrid_},c.prototype.setDefaultTileGrid=function(l){this.defaultTileGrid_=l},c.prototype.setExtent=function(l){this.extent_=l,this.canWrapX_=!(!this.global_||!l)},c.prototype.setWorldExtent=function(l){this.worldExtent_=l},c.prototype.setGetPointResolution=function(l){this.getPointResolutionFunc_=l},c.prototype.getPointResolutionFunc=function(){return this.getPointResolutionFunc_},c}();const Gp=Y_e;var Z_e=function(){var c=function(l,a){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,d){h.__proto__=d}||function(h,d){for(var f in d)Object.prototype.hasOwnProperty.call(d,f)&&(h[f]=d[f])})(l,a)};return function(l,a){if("function"!=typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");function h(){this.constructor=l}c(l,a),l.prototype=null===a?Object.create(a):(h.prototype=a.prototype,new h)}}(),CS=6378137,Py=Math.PI*CS,K_e=[-Py,-Py,Py,Py],Q_e=[-180,-85,180,85],nx=CS*Math.log(Math.tan(Math.PI/2)),Ly=function(c){function l(a){return c.call(this,{code:a,units:ta.METERS,extent:K_e,global:!0,worldExtent:Q_e,getPointResolution:function(h,d){return h/e_e(d[1]/CS)}})||this}return Z_e(l,c),l}(Gp),R9=[new Ly("EPSG:3857"),new Ly("EPSG:102100"),new Ly("EPSG:102113"),new Ly("EPSG:900913"),new Ly("http://www.opengis.net/def/crs/EPSG/0/3857"),new Ly("http://www.opengis.net/gml/srs/epsg.xml#3857")];function J_e(c,l,a){var h=c.length,d=a>1?a:2,f=l;void 0===f&&(f=d>2?c.slice():new Array(h));for(var m=0;m<h;m+=d){f[m]=Py*c[m]/180;var g=CS*Math.log(Math.tan(Math.PI*(+c[m+1]+90)/360));g>nx?g=nx:g<-nx&&(g=-nx),f[m+1]=g}return f}function e0e(c,l,a){var h=c.length,d=a>1?a:2,f=l;void 0===f&&(f=d>2?c.slice():new Array(h));for(var m=0;m<h;m+=d)f[m]=180*c[m]/Py,f[m+1]=360*Math.atan(Math.exp(c[m+1]/CS))/Math.PI-90;return f}var t0e=function(){var c=function(l,a){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,d){h.__proto__=d}||function(h,d){for(var f in d)Object.prototype.hasOwnProperty.call(d,f)&&(h[f]=d[f])})(l,a)};return function(l,a){if("function"!=typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");function h(){this.constructor=l}c(l,a),l.prototype=null===a?Object.create(a):(h.prototype=a.prototype,new h)}}(),P9=[-180,-90,180,90],r0e=6378137*Math.PI/180,zp=function(c){function l(a,h){return c.call(this,{code:a,units:ta.DEGREES,extent:P9,axisOrientation:h,global:!0,metersPerUnit:r0e,worldExtent:P9})||this}return t0e(l,c),l}(Gp),L9=[new zp("CRS:84"),new zp("EPSG:4326","neu"),new zp("urn:ogc:def:crs:OGC:1.3:CRS84"),new zp("urn:ogc:def:crs:OGC:2:84"),new zp("http://www.opengis.net/def/crs/OGC/1.3/CRS84"),new zp("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new zp("http://www.opengis.net/def/crs/EPSG/0/4326","neu")],rx={},Sc={};function Oy(c,l,a){var h=c.getCode(),d=l.getCode();h in Sc||(Sc[h]={}),Sc[h][d]=a}function O9(c,l){var a;return c in Sc&&l in Sc[c]&&(a=Sc[c][l]),a}function ZL(c,l,a){var h=a||6371008.8,d=dS(c[1]),f=dS(l[1]),m=(f-d)/2,g=dS(l[0]-c[0])/2,y=Math.sin(m)*Math.sin(m)+Math.sin(g)*Math.sin(g)*Math.cos(d)*Math.cos(f);return 2*h*Math.atan2(Math.sqrt(y),Math.sqrt(1-y))}var QL=!0;function N9(c){QL=!(void 0===c||c)}function JL(c,l,a){var h;if(void 0!==l){for(var d=0,f=c.length;d<f;++d)l[d]=c[d];h=l}else h=c.slice();return h}function e2(c,l,a){if(void 0!==l&&c!==l){for(var h=0,d=c.length;h<d;++h)l[h]=c[h];c=l}return c}function F9(c){(function s0e(c,l){rx[c]=l})(c.getCode(),c),Oy(c,c,JL)}function cn(c){return"string"==typeof c?function i0e(c){return rx[c]||rx[c.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\w+)$/,"EPSG:$3")]||null}(c):c||null}function ox(c,l,a,h){var d,f=(c=cn(c)).getPointResolutionFunc();if(f)d=f(l,a),h&&h!==c.getUnits()&&(m=c.getMetersPerUnit())&&(d=d*m/Ya[h]);else{var g=c.getUnits();if(g==ta.DEGREES&&!h||h==ta.DEGREES)d=l;else{var m,y=Sh(c,cn("EPSG:4326"));if(y===e2&&g!==ta.DEGREES)d=l*c.getMetersPerUnit();else{var v=[a[0]-l/2,a[1],a[0]+l/2,a[1],a[0],a[1]-l/2,a[0],a[1]+l/2];d=(ZL((v=y(v,v,2)).slice(0,2),v.slice(2,4))+ZL(v.slice(4,6),v.slice(6,8)))/2}void 0!==(m=h?Ya[h]:c.getMetersPerUnit())&&(d/=m)}}return d}function t2(c){(function l0e(c){c.forEach(F9)})(c),c.forEach(function(l){c.forEach(function(a){l!==a&&Oy(l,a,JL)})})}function n2(c,l){return c?"string"==typeof c?cn(c):c:cn(l)}function k9(c){return function(l,a,h){for(var d=l.length,f=void 0!==h?h:2,m=void 0!==a?a:new Array(d),g=0;g<d;g+=f){var y=c([l[g],l[g+1]]);m[g]=y[0],m[g+1]=y[1];for(var v=f-1;v>=2;--v)m[g+v]=l[g+v]}return m}}function u0e(c,l,a,h){var d=cn(c),f=cn(l);Oy(d,f,k9(a)),Oy(f,d,k9(h))}function V9(c,l){return N9(),Ka(c,"EPSG:4326",void 0!==l?l:"EPSG:3857")}function bc(c,l){if(c===l)return!0;var a=c.getUnits()===l.getUnits();return(c.getCode()===l.getCode()||Sh(c,l)===JL)&&a}function Sh(c,l){var d=O9(c.getCode(),l.getCode());return d||(d=e2),d}function gu(c,l){return Sh(cn(c),cn(l))}function Ka(c,l,a){return gu(l,a)(c,void 0,c.length)}function bh(c,l,a,h){return GC(c,gu(l,a),void 0,h)}var na=null;function xS(){return na}function r2(c,l){return c}function Th(c,l){return QL&&!XC(c,[0,0])&&c[0]>=-180&&c[0]<=180&&c[1]>=-90&&c[1]<=90&&(QL=!1,console.warn("Call useGeographic() from ol/proj once to work with [longitude, latitude] coordinates.")),c}function s2(c,l){return c}function wh(c,l){return c}function d0e(c,l){return c}function B9(c,l,a){return function(h){var m,g,d=h[0],f=h[1];if(c.canWrapX()){var y=c.getExtent(),v=fr(y);(g=m9(h,c,v))&&(d-=g*v),d=qn(d,y[0],y[2]),f=qn(f,y[1],y[3]),m=a([d,f])}else m=a(h);return g&&l.canWrapX()&&(m[0]+=g*fr(l.getExtent())),m}}function U9(c,l,a){return function(h,d,f,m,g){if(h){if(!d&&!l)return h;var y=l?0:f[0]*d,v=l?0:f[1]*d,_=g?g[0]:0,S=g?g[1]:0,b=c[0]+y/2+_,T=c[2]-y/2+_,x=c[1]+v/2+S,E=c[3]-v/2+S;b>T&&(T=b=(T+b)/2),x>E&&(E=x=(E+x)/2);var D=qn(h[0],b,T),I=qn(h[1],x,E);if(m&&a&&d){var M=30*d;D+=-M*Math.log(1+Math.max(0,b-h[0])/M)+M*Math.log(1+Math.max(0,h[0]-T)/M),I+=-M*Math.log(1+Math.max(0,x-h[1])/M)+M*Math.log(1+Math.max(0,h[1]-E)/M)}return[D,I]}}}function p0e(c){return c}function o2(c,l,a,h){var d=fr(l)/a[0],f=Ei(l)/a[1];return h?Math.min(c,Math.max(d,f)):Math.min(c,Math.min(d,f))}function a2(c,l,a){var h=Math.min(c,l);return h*=Math.log(1+50*Math.max(0,c/l-1))/50+1,a&&(h=Math.max(h,a),h/=Math.log(1+50*Math.max(0,a/c-1))/50+1),qn(h,a/2,2*l)}function G9(c,l,a,h,d){return function(f,m,g,y){if(void 0!==f){var v=h?o2(c,h,g,d):c;return(void 0===a||a)&&y?a2(f,v,l):qn(f,l,v)}}}function l2(c){if(void 0!==c)return 0}function z9(c){if(void 0!==c)return c}function H9(c){return Math.pow(c,3)}function Hp(c){return 1-H9(1-c)}function c2(c){return 3*c*c-2*c*c*c}function _0e(c){return c}!function f0e(){t2(R9),t2(L9),function c0e(c,l,a,h){c.forEach(function(d){l.forEach(function(f){Oy(d,f,a),Oy(f,d,h)})})}(L9,R9,J_e,e0e)}();function zd(c,l,a,h,d,f){for(var m=f||[],g=0,y=l;y<a;y+=h){var v=c[y],_=c[y+1];m[g++]=d[0]*v+d[2]*_+d[4],m[g++]=d[1]*v+d[3]*_+d[5]}return f&&m.length!=g&&(m.length=g),m}function j9(c,l,a,h,d,f,m){for(var g=m||[],y=Math.cos(d),v=Math.sin(d),_=f[0],S=f[1],b=0,T=l;T<a;T+=h){var x=c[T]-_,E=c[T+1]-S;g[b++]=_+x*y-E*v,g[b++]=S+x*v+E*y;for(var D=T+2;D<T+h;++D)g[b++]=c[D]}return m&&g.length!=b&&(g.length=b),g}var T0e=function(){var c=function(l,a){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,d){h.__proto__=d}||function(h,d){for(var f in d)Object.prototype.hasOwnProperty.call(d,f)&&(h[f]=d[f])})(l,a)};return function(l,a){if("function"!=typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");function h(){this.constructor=l}c(l,a),l.prototype=null===a?Object.create(a):(h.prototype=a.prototype,new h)}}(),W9=[1,0,0,1,0,0],w0e=function(c){function l(){var a=c.call(this)||this;return a.extent_=[1/0,1/0,-1/0,-1/0],a.extentRevision_=-1,a.simplifiedGeometryMaxMinSquaredTolerance=0,a.simplifiedGeometryRevision=0,a.simplifyTransformedInternal=function Pve(c){var a,h,d,l=!1;return function(){var f=Array.prototype.slice.call(arguments);return(!l||this!==d||!Fd(f,h))&&(l=!0,d=this,h=f,a=c.apply(this,arguments)),a}}(function(h,d,f){if(!f)return this.getSimplifiedGeometry(d);var m=this.clone();return m.applyTransform(f),m.getSimplifiedGeometry(d)}),a}return T0e(l,c),l.prototype.simplifyTransformed=function(a,h){return this.simplifyTransformedInternal(this.getRevision(),a,h)},l.prototype.clone=function(){return _n()},l.prototype.closestPointXY=function(a,h,d,f){return _n()},l.prototype.containsXY=function(a,h){var d=this.getClosestPoint([a,h]);return d[0]===a&&d[1]===h},l.prototype.getClosestPoint=function(a,h){var d=h||[NaN,NaN];return this.closestPointXY(a[0],a[1],d,1/0),d},l.prototype.intersectsCoordinate=function(a){return this.containsXY(a[0],a[1])},l.prototype.computeExtent=function(a){return _n()},l.prototype.getExtent=function(a){if(this.extentRevision_!=this.getRevision()){var h=this.computeExtent(this.extent_);(isNaN(h[0])||isNaN(h[1]))&&Np(h),this.extentRevision_=this.getRevision()}return function Qve(c,l){return l?(l[0]=c[0],l[1]=c[1],l[2]=c[2],l[3]=c[3],l):c}(this.extent_,a)},l.prototype.rotate=function(a,h){_n()},l.prototype.scale=function(a,h,d){_n()},l.prototype.simplify=function(a){return this.getSimplifiedGeometry(a*a)},l.prototype.getSimplifiedGeometry=function(a){return _n()},l.prototype.getType=function(){return _n()},l.prototype.applyTransform=function(a){_n()},l.prototype.intersectsExtent=function(a){return _n()},l.prototype.translate=function(a,h){_n()},l.prototype.transform=function(a,h){var d=cn(a),f=d.getUnits()==ta.TILE_PIXELS?function(m,g,y){var v=d.getExtent(),_=d.getWorldExtent(),S=Ei(_)/Ei(v);return Do(W9,_[0],_[3],S,-S,0,0,0),zd(m,0,m.length,y,W9,g),gu(d,h)(m,g,y)}:gu(d,h);return this.applyTransform(f),this},l}(yc);const X9=w0e;var C0e=function(){var c=function(l,a){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,d){h.__proto__=d}||function(h,d){for(var f in d)Object.prototype.hasOwnProperty.call(d,f)&&(h[f]=d[f])})(l,a)};return function(l,a){if("function"!=typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");function h(){this.constructor=l}c(l,a),l.prototype=null===a?Object.create(a):(h.prototype=a.prototype,new h)}}(),x0e=function(c){function l(){var a=c.call(this)||this;return a.layout="XY",a.stride=2,a.flatCoordinates=null,a}return C0e(l,c),l.prototype.computeExtent=function(a){return BL(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,a)},l.prototype.getCoordinates=function(){return _n()},l.prototype.getFirstCoordinate=function(){return this.flatCoordinates.slice(0,this.stride)},l.prototype.getFlatCoordinates=function(){return this.flatCoordinates},l.prototype.getLastCoordinate=function(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)},l.prototype.getLayout=function(){return this.layout},l.prototype.getSimplifiedGeometry=function(a){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),a<0||0!==this.simplifiedGeometryMaxMinSquaredTolerance&&a<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;var h=this.getSimplifiedGeometryInternal(a);return h.getFlatCoordinates().length<this.flatCoordinates.length?h:(this.simplifiedGeometryMaxMinSquaredTolerance=a,this)},l.prototype.getSimplifiedGeometryInternal=function(a){return this},l.prototype.getStride=function(){return this.stride},l.prototype.setFlatCoordinates=function(a,h){this.stride=q9(a),this.layout=a,this.flatCoordinates=h},l.prototype.setCoordinates=function(a,h){_n()},l.prototype.setLayout=function(a,h,d){var f;if(a)f=q9(a);else{for(var m=0;m<d;++m){if(0===h.length)return this.layout="XY",void(this.stride=2);h=h[0]}a=function E0e(c){var l;return 2==c?l="XY":3==c?l="XYZ":4==c&&(l="XYZM"),l}(f=h.length)}this.layout=a,this.stride=f},l.prototype.applyTransform=function(a){this.flatCoordinates&&(a(this.flatCoordinates,this.flatCoordinates,this.stride),this.changed())},l.prototype.rotate=function(a,h){var d=this.getFlatCoordinates();if(d){var f=this.getStride();j9(d,0,d.length,f,a,h,d),this.changed()}},l.prototype.scale=function(a,h,d){var f=h;void 0===f&&(f=a);var m=d;m||(m=Jo(this.getExtent()));var g=this.getFlatCoordinates();if(g){var y=this.getStride();(function S0e(c,l,a,h,d,f,m,g){for(var y=g||[],v=m[0],_=m[1],S=0,b=l;b<a;b+=h){var x=c[b+1]-_;y[S++]=v+d*(c[b]-v),y[S++]=_+f*x;for(var E=b+2;E<b+h;++E)y[S++]=c[E]}g&&y.length!=S&&(y.length=S)})(g,0,g.length,y,a,f,m,g),this.changed()}},l.prototype.translate=function(a,h){var d=this.getFlatCoordinates();if(d){var f=this.getStride();(function b0e(c,l,a,h,d,f,m){for(var g=m||[],y=0,v=l;v<a;v+=h){g[y++]=c[v]+d,g[y++]=c[v+1]+f;for(var _=v+2;_<v+h;++_)g[y++]=c[_]}m&&g.length!=y&&(g.length=y)})(d,0,d.length,f,a,h,d),this.changed()}},l}(X9);function q9(c){var l;return"XY"==c?l=2:"XYZ"==c||"XYM"==c?l=3:"XYZM"==c&&(l=4),l}const jp=x0e;function $9(c,l,a,h,d,f,m){var S,g=c[l],y=c[l+1],v=c[a]-g,_=c[a+1]-y;if(0===v&&0===_)S=l;else{var b=((d-g)*v+(f-y)*_)/(v*v+_*_);if(b>1)S=a;else{if(b>0){for(var T=0;T<h;++T)m[T]=vh(c[l+T],c[a+T],b);return void(m.length=h)}S=l}}for(T=0;T<h;++T)m[T]=c[S+T];m.length=h}function u2(c,l,a,h,d){var f=c[l],m=c[l+1];for(l+=h;l<a;l+=h){var g=c[l],y=c[l+1],v=Fp(f,m,g,y);v>d&&(d=v),f=g,m=y}return d}function h2(c,l,a,h,d){for(var f=0,m=a.length;f<m;++f){var g=a[f];d=u2(c,l,g,h,d),l=g}return d}function d2(c,l,a,h,d,f,m,g,y,v,_){if(l==a)return v;var S,b;if(0===d){if((b=Fp(m,g,c[l],c[l+1]))<v){for(S=0;S<h;++S)y[S]=c[l+S];return y.length=h,b}return v}for(var T=_||[NaN,NaN],x=l+h;x<a;)if($9(c,x-h,x,h,m,g,T),(b=Fp(m,g,T[0],T[1]))<v){for(v=b,S=0;S<h;++S)y[S]=T[S];y.length=h,x+=h}else x+=h*Math.max((Math.sqrt(b)-Math.sqrt(v))/d|0,1);if(f&&($9(c,a-h,l,h,m,g,T),(b=Fp(m,g,T[0],T[1]))<v)){for(v=b,S=0;S<h;++S)y[S]=T[S];y.length=h}return v}function f2(c,l,a,h,d,f,m,g,y,v,_){for(var S=_||[NaN,NaN],b=0,T=a.length;b<T;++b){var x=a[b];v=d2(c,l,x,h,d,f,m,g,y,v,S),l=x}return v}function ax(c,l,a,h){for(var d=0,f=a.length;d<f;++d)for(var m=a[d],g=0;g<h;++g)c[l++]=m[g];return l}function p2(c,l,a,h,d){for(var f=d||[],m=0,g=0,y=a.length;g<y;++g){var v=ax(c,l,a[g],h);f[m++]=v,l=v}return f.length=m,f}function lx(c,l,a,h,d,f,m){var g=(a-l)/h;if(g<3){for(;l<a;l+=h)f[m++]=c[l],f[m++]=c[l+1];return m}var y=new Array(g);y[0]=1,y[g-1]=1;for(var v=[l,a-h],_=0;v.length>0;){for(var S=v.pop(),b=v.pop(),T=0,x=c[b],E=c[b+1],D=c[S],I=c[S+1],M=b+h;M<S;M+=h){var F=YH(c[M],c[M+1],x,E,D,I);F>T&&(_=M,T=F)}T>d&&(y[(_-l)/h]=1,b+h<_&&v.push(b,_),_+h<S&&v.push(_,S))}for(M=0;M<g;++M)y[M]&&(f[m++]=c[l+M*h],f[m++]=c[l+M*h+1]);return m}function Wp(c,l){return l*Math.round(c/l)}function L0e(c,l,a,h,d,f,m){if(l==a)return m;var v,_,g=Wp(c[l],d),y=Wp(c[l+1],d);l+=h,f[m++]=g,f[m++]=y;do{if(v=Wp(c[l],d),_=Wp(c[l+1],d),(l+=h)==a)return f[m++]=v,f[m++]=_,m}while(v==g&&_==y);for(;l<a;){var S=Wp(c[l],d),b=Wp(c[l+1],d);if(l+=h,S!=v||b!=_){var T=v-g,x=_-y,E=S-g,D=b-y;if(T*D==x*E&&(T<0&&E<T||T==E||T>0&&E>T)&&(x<0&&D<x||x==D||x>0&&D>x)){v=S,_=b;continue}f[m++]=v,f[m++]=_,g=v,y=_,v=S,_=b}}return f[m++]=v,f[m++]=_,m}function Z9(c,l,a,h,d,f,m,g){for(var y=0,v=a.length;y<v;++y){var _=a[y];m=L0e(c,l,_,h,d,f,m),g.push(m),l=_}return m}function Hd(c,l,a,h,d){for(var f=void 0!==d?d:[],m=0,g=l;g<a;g+=h)f[m++]=c.slice(g,g+h);return f.length=m,f}function ES(c,l,a,h,d){for(var f=void 0!==d?d:[],m=0,g=0,y=a.length;g<y;++g){var v=a[g];f[m++]=Hd(c,l,v,h,f[m]),l=v}return f.length=m,f}function m2(c,l,a,h,d){for(var f=void 0!==d?d:[],m=0,g=0,y=a.length;g<y;++g){var v=a[g];f[m++]=ES(c,l,v,h,f[m]),l=v[v.length-1]}return f.length=m,f}function K9(c,l,a,h){for(var d=0,f=c[a-h],m=c[a-h+1];l<a;l+=h){var g=c[l],y=c[l+1];d+=m*g-f*y,f=g,m=y}return d/2}function Q9(c,l,a,h){for(var d=0,f=0,m=a.length;f<m;++f){var g=a[f];d+=K9(c,l,g,h),l=g}return d}var F0e=function(){var c=function(l,a){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,d){h.__proto__=d}||function(h,d){for(var f in d)Object.prototype.hasOwnProperty.call(d,f)&&(h[f]=d[f])})(l,a)};return function(l,a){if("function"!=typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");function h(){this.constructor=l}c(l,a),l.prototype=null===a?Object.create(a):(h.prototype=a.prototype,new h)}}(),k0e=function(c){function l(a,h){var d=c.call(this)||this;return d.maxDelta_=-1,d.maxDeltaRevision_=-1,void 0===h||Array.isArray(a[0])?d.setCoordinates(a,h):d.setFlatCoordinates(h,a),d}return F0e(l,c),l.prototype.clone=function(){return new l(this.flatCoordinates.slice(),this.layout)},l.prototype.closestPointXY=function(a,h,d,f){return f<Op(this.getExtent(),a,h)?f:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(u2(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),d2(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,a,h,d,f))},l.prototype.getArea=function(){return K9(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},l.prototype.getCoordinates=function(){return Hd(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},l.prototype.getSimplifiedGeometryInternal=function(a){var h=[];return h.length=lx(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,a,h,0),new l(h,"XY")},l.prototype.getType=function(){return"LinearRing"},l.prototype.intersectsExtent=function(a){return!1},l.prototype.setCoordinates=function(a,h){this.setLayout(h,a,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=ax(this.flatCoordinates,0,a,this.stride),this.changed()},l}(jp);const J9=k0e;var V0e=function(){var c=function(l,a){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,d){h.__proto__=d}||function(h,d){for(var f in d)Object.prototype.hasOwnProperty.call(d,f)&&(h[f]=d[f])})(l,a)};return function(l,a){if("function"!=typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");function h(){this.constructor=l}c(l,a),l.prototype=null===a?Object.create(a):(h.prototype=a.prototype,new h)}}(),B0e=function(c){function l(a,h){var d=c.call(this)||this;return d.setCoordinates(a,h),d}return V0e(l,c),l.prototype.clone=function(){var a=new l(this.flatCoordinates.slice(),this.layout);return a.applyProperties(this),a},l.prototype.closestPointXY=function(a,h,d,f){var m=this.flatCoordinates,g=Fp(a,h,m[0],m[1]);if(g<f){for(var y=this.stride,v=0;v<y;++v)d[v]=m[v];return d.length=y,g}return f},l.prototype.getCoordinates=function(){return this.flatCoordinates?this.flatCoordinates.slice():[]},l.prototype.computeExtent=function(a){return VL(this.flatCoordinates,a)},l.prototype.getType=function(){return"Point"},l.prototype.intersectsExtent=function(a){return uS(a,this.flatCoordinates[0],this.flatCoordinates[1])},l.prototype.setCoordinates=function(a,h){this.setLayout(h,a,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=function I0e(c,l,a,h){for(var d=0,f=a.length;d<f;++d)c[l++]=a[d];return l}(this.flatCoordinates,0,a),this.changed()},l}(jp);const yu=B0e;function U0e(c,l,a,h,d){return!qH(d,function(m){return!Xp(c,l,a,h,m[0],m[1])})}function Xp(c,l,a,h,d,f){for(var m=0,g=c[a-h],y=c[a-h+1];l<a;l+=h){var v=c[l],_=c[l+1];y<=f?_>f&&(v-g)*(f-y)-(d-g)*(_-y)>0&&m++:_<=f&&(v-g)*(f-y)-(d-g)*(_-y)<0&&m--,g=v,y=_}return 0!==m}function g2(c,l,a,h,d,f){if(0===a.length||!Xp(c,l,a[0],h,d,f))return!1;for(var m=1,g=a.length;m<g;++m)if(Xp(c,a[m-1],a[m],h,d,f))return!1;return!0}function y2(c,l,a,h,d,f,m){for(var g,y,v,_,S,b,T,x=d[f+1],E=[],D=0,I=a.length;D<I;++D){var M=a[D];for(_=c[M-h],b=c[M-h+1],g=l;g<M;g+=h)S=c[g],T=c[g+1],(x<=b&&T<=x||b<=x&&x<=T)&&E.push(v=(x-b)/(T-b)*(S-_)+_),_=S,b=T}var L=NaN,P=-1/0;for(E.sort(Pp),_=E[0],g=1,y=E.length;g<y;++g){S=E[g];var F=Math.abs(S-_);F>P&&g2(c,l,a,h,v=(_+S)/2,x)&&(L=v,P=F),_=S}return isNaN(L)&&(L=d[f]),m?(m.push(L,x,P),m):[L,x,P]}function e7(c,l,a,h,d){for(var f=[],m=0,g=a.length;m<g;++m){var y=a[m];f=y2(c,l,y,h,d,2*m,f),l=y[y.length-1]}return f}function t7(c,l,a,h,d){var f;for(l+=h;l<a;l+=h)if(f=d(c.slice(l-h,l),c.slice(l,l+h)))return f;return!1}function cx(c,l,a,h,d){var f=XH([1/0,1/0,-1/0,-1/0],c,l,a,h);return!!Mi(d,f)&&(!!(xa(d,f)||f[0]>=d[0]&&f[2]<=d[2]||f[1]>=d[1]&&f[3]<=d[3])||t7(c,l,a,h,function(m,g){return function Jve(c,l,a){var h=!1,d=kL(c,l),f=kL(c,a);if(1===d||1===f)h=!0;else{var m=c[0],g=c[1],y=c[2],v=c[3],b=a[0],T=a[1],x=(T-l[1])/(b-l[0]),E=void 0,D=void 0;!!(2&f)&&!(2&d)&&(h=(E=b-(T-v)/x)>=m&&E<=y),h||!(4&f)||4&d||(h=(D=T-(b-y)*x)>=g&&D<=v),h||!(8&f)||8&d||(h=(E=b-(T-g)/x)>=m&&E<=y),!h&&16&f&&!(16&d)&&(h=(D=T-(b-m)*x)>=g&&D<=v)}return h}(d,m,g)}))}function n7(c,l,a,h,d){if(!function H0e(c,l,a,h,d){return!!(cx(c,l,a,h,d)||Xp(c,l,a,h,d[0],d[1])||Xp(c,l,a,h,d[0],d[3])||Xp(c,l,a,h,d[2],d[1])||Xp(c,l,a,h,d[2],d[3]))}(c,l,a[0],h,d))return!1;if(1===a.length)return!0;for(var f=1,m=a.length;f<m;++f)if(U0e(c,a[f-1],a[f],h,d)&&!cx(c,a[f-1],a[f],h,d))return!1;return!0}function W0e(c,l,a,h){for(;l<a-h;){for(var d=0;d<h;++d){var f=c[l+d];c[l+d]=c[a-h+d],c[a-h+d]=f}l+=h,a-=h}}function v2(c,l,a,h){for(var d=0,f=c[a-h],m=c[a-h+1];l<a;l+=h){var g=c[l],y=c[l+1];d+=(g-f)*(y+m),f=g,m=y}return 0===d?void 0:d>0}function r7(c,l,a,h,d){for(var f=void 0!==d&&d,m=0,g=a.length;m<g;++m){var y=a[m],v=v2(c,l,y,h);if(0===m){if(f&&v||!f&&!v)return!1}else if(f&&!v||!f&&v)return!1;l=y}return!0}function _2(c,l,a,h,d){for(var f=void 0!==d&&d,m=0,g=a.length;m<g;++m){var y=a[m],v=v2(c,l,y,h);(0===m?f&&v||!f&&!v:f&&!v||!f&&v)&&W0e(c,l,y,h),l=y}return l}function i7(c,l,a,h,d){for(var f=0,m=a.length;f<m;++f)l=_2(c,l,a[f],h,d);return l}var $0e=function(){var c=function(l,a){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,d){h.__proto__=d}||function(h,d){for(var f in d)Object.prototype.hasOwnProperty.call(d,f)&&(h[f]=d[f])})(l,a)};return function(l,a){if("function"!=typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");function h(){this.constructor=l}c(l,a),l.prototype=null===a?Object.create(a):(h.prototype=a.prototype,new h)}}(),ux=function(c){function l(a,h,d){var f=c.call(this)||this;return f.ends_=[],f.flatInteriorPointRevision_=-1,f.flatInteriorPoint_=null,f.maxDelta_=-1,f.maxDeltaRevision_=-1,f.orientedRevision_=-1,f.orientedFlatCoordinates_=null,void 0!==h&&d?(f.setFlatCoordinates(h,a),f.ends_=d):f.setCoordinates(a,h),f}return $0e(l,c),l.prototype.appendLinearRing=function(a){this.flatCoordinates?xi(this.flatCoordinates,a.getFlatCoordinates()):this.flatCoordinates=a.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()},l.prototype.clone=function(){var a=new l(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return a.applyProperties(this),a},l.prototype.closestPointXY=function(a,h,d,f){return f<Op(this.getExtent(),a,h)?f:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(h2(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),f2(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,a,h,d,f))},l.prototype.containsXY=function(a,h){return g2(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,a,h)},l.prototype.getArea=function(){return Q9(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)},l.prototype.getCoordinates=function(a){var h;return void 0!==a?_2(h=this.getOrientedFlatCoordinates().slice(),0,this.ends_,this.stride,a):h=this.flatCoordinates,ES(h,0,this.ends_,this.stride)},l.prototype.getEnds=function(){return this.ends_},l.prototype.getFlatInteriorPoint=function(){if(this.flatInteriorPointRevision_!=this.getRevision()){var a=Jo(this.getExtent());this.flatInteriorPoint_=y2(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,a,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_},l.prototype.getInteriorPoint=function(){return new yu(this.getFlatInteriorPoint(),"XYM")},l.prototype.getLinearRingCount=function(){return this.ends_.length},l.prototype.getLinearRing=function(a){return a<0||this.ends_.length<=a?null:new J9(this.flatCoordinates.slice(0===a?0:this.ends_[a-1],this.ends_[a]),this.layout)},l.prototype.getLinearRings=function(){for(var a=this.layout,h=this.flatCoordinates,d=this.ends_,f=[],m=0,g=0,y=d.length;g<y;++g){var v=d[g],_=new J9(h.slice(m,v),a);f.push(_),m=v}return f},l.prototype.getOrientedFlatCoordinates=function(){if(this.orientedRevision_!=this.getRevision()){var a=this.flatCoordinates;r7(a,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=a:(this.orientedFlatCoordinates_=a.slice(),this.orientedFlatCoordinates_.length=_2(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_},l.prototype.getSimplifiedGeometryInternal=function(a){var h=[],d=[];return h.length=Z9(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(a),h,0,d),new l(h,"XY",d)},l.prototype.getType=function(){return"Polygon"},l.prototype.intersectsExtent=function(a){return n7(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,a)},l.prototype.setCoordinates=function(a,h){this.setLayout(h,a,2),this.flatCoordinates||(this.flatCoordinates=[]);var d=p2(this.flatCoordinates,0,a,this.stride,this.ends_);this.flatCoordinates.length=0===d.length?0:d[d.length-1],this.changed()},l}(jp);const vu=ux;function S2(c){var l=c[0],a=c[1],h=c[2],d=c[3],f=[l,a,l,d,h,d,h,a,l,a];return new ux(f,"XY",[f.length])}var Z0e=function(){var c=function(l,a){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,d){h.__proto__=d}||function(h,d){for(var f in d)Object.prototype.hasOwnProperty.call(d,f)&&(h[f]=d[f])})(l,a)};return function(l,a){if("function"!=typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");function h(){this.constructor=l}c(l,a),l.prototype=null===a?Object.create(a):(h.prototype=a.prototype,new h)}}(),K0e=function(c){function l(a){var h=c.call(this)||this,d=$n({},a);return h.hints_=[0,0],h.animations_=[],h.projection_=n2(d.projection,"EPSG:3857"),h.viewportSize_=[100,100],h.targetCenter_=null,h.nextCenter_=null,h.cancelAnchor_=void 0,d.projection&&N9(),d.center&&(d.center=Th(d.center)),d.extent&&(d.extent=wh(d.extent)),h.applyOptions_(d),h}return Z0e(l,c),l.prototype.applyOptions_=function(a){var h=$n({},a);for(var d in Za)delete h[d];this.setProperties(h,!0);var f=function J0e(c){var l,a,h,m=void 0!==c.minZoom?c.minZoom:0,g=void 0!==c.maxZoom?c.maxZoom:28,y=void 0!==c.zoomFactor?c.zoomFactor:2,v=void 0!==c.multiWorld&&c.multiWorld,_=void 0===c.smoothResolutionConstraint||c.smoothResolutionConstraint,S=void 0!==c.showFullExtent&&c.showFullExtent,b=n2(c.projection,"EPSG:3857"),T=b.getExtent(),x=c.constrainOnlyCenter,E=c.extent;if(!v&&!E&&b.isGlobal()&&(x=!1,E=T),void 0!==c.resolutions){var D=c.resolutions;a=D[m],h=void 0!==D[g]?D[g]:D[D.length-1],l=c.constrainResolution?function m0e(c,l,a,h){return function(d,f,m,g){if(void 0!==d){var y=c[0],v=c[c.length-1],_=a?o2(y,a,m,h):y;if(g)return void 0===l||l?a2(d,_,v):qn(d,v,_);var b=Math.min(_,d),T=Math.floor(LC(c,b,f));return c[T]>_&&T<c.length-1?c[T+1]:c[T]}}}(D,_,!x&&E,S):G9(a,h,_,!x&&E,S)}else{var M=(T?Math.max(fr(T),Ei(T)):360*Ya[ta.DEGREES]/b.getMetersPerUnit())/256/Math.pow(2,0),L=M/Math.pow(2,28);void 0!==(a=c.maxResolution)?m=0:a=M/Math.pow(y,m),void 0===(h=c.minResolution)&&(h=void 0!==c.maxZoom?void 0!==c.maxResolution?a/Math.pow(y,g):M/Math.pow(y,g):L),g=m+Math.floor(Math.log(a/h)/Math.log(y)),h=a/Math.pow(y,g-m),l=c.constrainResolution?function g0e(c,l,a,h,d,f){return function(m,g,y,v){if(void 0!==m){var _=d?o2(l,d,y,f):l,S=void 0!==a?a:0;if(v)return void 0===h||h?a2(m,_,S):qn(m,S,_);var x=Math.ceil(Math.log(l/_)/Math.log(c)-1e-9),E=-g*(.5-1e-9)+.5,D=Math.min(_,m),I=Math.floor(Math.log(l/D)/Math.log(c)+E),M=Math.max(x,I);return qn(l/Math.pow(c,M),S,_)}}}(y,a,h,_,!x&&E,S):G9(a,h,_,!x&&E,S)}return{constraint:l,maxResolution:a,minResolution:h,minZoom:m,zoomFactor:y}}(a);this.maxResolution_=f.maxResolution,this.minResolution_=f.minResolution,this.zoomFactor_=f.zoomFactor,this.resolutions_=a.resolutions,this.padding_=a.padding,this.minZoom_=f.minZoom;var m=function Q0e(c){if(void 0!==c.extent)return U9(c.extent,c.constrainOnlyCenter,void 0===c.smoothExtentConstraint||c.smoothExtentConstraint);var a=n2(c.projection,"EPSG:3857");if(!0!==c.multiWorld&&a.isGlobal()){var h=a.getExtent().slice();return h[0]=-1/0,h[2]=1/0,U9(h,!1,!1)}return p0e}(a),g=f.constraint,y=function eSe(c){if(void 0===c.enableRotation||c.enableRotation){var a=c.constrainRotation;return void 0===a||!0===a?function v0e(c){var l=c||dS(5);return function(a,h){return h?a:void 0!==a?Math.abs(a)<=l?0:a:void 0}}():!1===a?z9:"number"==typeof a?function y0e(c){var l=2*Math.PI/c;return function(a,h){return h?a:void 0!==a?a=Math.floor(a/l+.5)*l:void 0}}(a):z9}return l2}(a);this.constraints_={center:m,resolution:g,rotation:y},this.setRotation(void 0!==a.rotation?a.rotation:0),this.setCenterInternal(void 0!==a.center?a.center:null),void 0!==a.resolution?this.setResolution(a.resolution):void 0!==a.zoom&&this.setZoom(a.zoom)},Object.defineProperty(l.prototype,"padding",{get:function(){return this.padding_},set:function(a){var h=this.padding_;this.padding_=a;var d=this.getCenter();if(d){var f=a||[0,0,0,0];h=h||[0,0,0,0];var m=this.getResolution();this.setCenterInternal([d[0]+m/2*(f[3]-h[3]+h[1]-f[1]),d[1]-m/2*(f[0]-h[0]+h[2]-f[2])])}},enumerable:!1,configurable:!0}),l.prototype.getUpdatedOptions_=function(a){var h=this.getProperties();return void 0!==h.resolution?h.resolution=this.getResolution():h.zoom=this.getZoom(),h.center=this.getCenterInternal(),h.rotation=this.getRotation(),$n({},h,a)},l.prototype.animate=function(a){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);for(var h=new Array(arguments.length),d=0;d<h.length;++d){var f=arguments[d];f.center&&((f=$n({},f)).center=Th(f.center,this.getProjection())),f.anchor&&((f=$n({},f)).anchor=Th(f.anchor,this.getProjection())),h[d]=f}this.animateInternal.apply(this,h)},l.prototype.animateInternal=function(a){var d,h=arguments.length;h>1&&"function"==typeof arguments[h-1]&&(d=arguments[h-1],--h);for(var f=0;f<h&&!this.isDef();++f){var m=arguments[f];m.center&&this.setCenterInternal(m.center),void 0!==m.zoom?this.setZoom(m.zoom):m.resolution&&this.setResolution(m.resolution),void 0!==m.rotation&&this.setRotation(m.rotation)}if(f!==h){for(var g=Date.now(),y=this.targetCenter_.slice(),v=this.targetResolution_,_=this.targetRotation_,S=[];f<h;++f){var b=arguments[f],T={start:g,complete:!1,anchor:b.anchor,duration:void 0!==b.duration?b.duration:1e3,easing:b.easing||c2,callback:d};if(b.center&&(T.sourceCenter=y,T.targetCenter=b.center.slice(),y=T.targetCenter),void 0!==b.zoom?(T.sourceResolution=v,T.targetResolution=this.getResolutionForZoom(b.zoom),v=T.targetResolution):b.resolution&&(T.sourceResolution=v,T.targetResolution=b.resolution,v=T.targetResolution),void 0!==b.rotation){T.sourceRotation=_;var x=Vd(b.rotation-_+Math.PI,2*Math.PI)-Math.PI;T.targetRotation=_+x,_=T.targetRotation}tSe(T)?T.complete=!0:g+=T.duration,S.push(T)}this.animations_.push(S),this.setHint(0,1),this.updateAnimations_()}else d&&hx(d,!0)},l.prototype.getAnimating=function(){return this.hints_[0]>0},l.prototype.getInteracting=function(){return this.hints_[1]>0},l.prototype.cancelAnimations=function(){this.setHint(0,-this.hints_[0]);for(var a,h=0,d=this.animations_.length;h<d;++h){var f=this.animations_[h];if(f[0].callback&&hx(f[0].callback,!1),!a)for(var m=0,g=f.length;m<g;++m){var y=f[m];if(!y.complete){a=y.anchor;break}}}this.animations_.length=0,this.cancelAnchor_=a,this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN},l.prototype.updateAnimations_=function(){if(void 0!==this.updateAnimationKey_&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),this.getAnimating()){for(var a=Date.now(),h=!1,d=this.animations_.length-1;d>=0;--d){for(var f=this.animations_[d],m=!0,g=0,y=f.length;g<y;++g){var v=f[g];if(!v.complete){var S=v.duration>0?(a-v.start)/v.duration:1;S>=1?(v.complete=!0,S=1):m=!1;var b=v.easing(S);if(v.sourceCenter){var T=v.sourceCenter[0],x=v.sourceCenter[1],E=v.targetCenter[0],D=v.targetCenter[1];this.nextCenter_=v.targetCenter,this.targetCenter_=[T+b*(E-T),x+b*(D-x)]}if(v.sourceResolution&&v.targetResolution){var L=1===b?v.targetResolution:v.sourceResolution+b*(v.targetResolution-v.sourceResolution);if(v.anchor){var P=this.getViewportSize_(this.getRotation()),F=this.constraints_.resolution(L,0,P,!0);this.targetCenter_=this.calculateCenterZoom(F,v.anchor)}this.nextResolution_=v.targetResolution,this.targetResolution_=L,this.applyTargetState_(!0)}if(void 0!==v.sourceRotation&&void 0!==v.targetRotation){var V=1===b?Vd(v.targetRotation+Math.PI,2*Math.PI)-Math.PI:v.sourceRotation+b*(v.targetRotation-v.sourceRotation);if(v.anchor){var z=this.constraints_.rotation(V,!0);this.targetCenter_=this.calculateCenterRotate(z,v.anchor)}this.nextRotation_=v.targetRotation,this.targetRotation_=V}if(this.applyTargetState_(!0),h=!0,!v.complete)break}}if(m){this.animations_[d]=null,this.setHint(0,-1),this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN;var q=f[0].callback;q&&hx(q,!0)}}this.animations_=this.animations_.filter(Boolean),h&&void 0===this.updateAnimationKey_&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)))}},l.prototype.calculateCenterRotate=function(a,h){var d,f=this.getCenterInternal();return void 0!==f&&(jL(d=[f[0]-h[0],f[1]-h[1]],a-this.getRotation()),h9(d,h)),d},l.prototype.calculateCenterZoom=function(a,h){var d,f=this.getCenterInternal(),m=this.getResolution();return void 0!==f&&void 0!==m&&(d=[h[0]-a*(h[0]-f[0])/m,h[1]-a*(h[1]-f[1])/m]),d},l.prototype.getViewportSize_=function(a){var h=this.viewportSize_;if(a){var d=h[0],f=h[1];return[Math.abs(d*Math.cos(a))+Math.abs(f*Math.sin(a)),Math.abs(d*Math.sin(a))+Math.abs(f*Math.cos(a))]}return h},l.prototype.setViewportSize=function(a){this.viewportSize_=Array.isArray(a)?a.slice():[100,100],this.getAnimating()||this.resolveConstraints(0)},l.prototype.getCenter=function(){var a=this.getCenterInternal();return a&&r2(a,this.getProjection())},l.prototype.getCenterInternal=function(){return this.get(Za.CENTER)},l.prototype.getConstraints=function(){return this.constraints_},l.prototype.getConstrainResolution=function(){return this.get("constrainResolution")},l.prototype.getHints=function(a){return void 0!==a?(a[0]=this.hints_[0],a[1]=this.hints_[1],a):this.hints_.slice()},l.prototype.calculateExtent=function(a){return s2(this.calculateExtentInternal(a),this.getProjection())},l.prototype.calculateExtentInternal=function(a){var h=a||this.getViewportSizeMinusPadding_(),d=this.getCenterInternal();bn(d,1);var f=this.getResolution();bn(void 0!==f,2);var m=this.getRotation();return bn(void 0!==m,3),wy(d,f,m,h)},l.prototype.getMaxResolution=function(){return this.maxResolution_},l.prototype.getMinResolution=function(){return this.minResolution_},l.prototype.getMaxZoom=function(){return this.getZoomForResolution(this.minResolution_)},l.prototype.setMaxZoom=function(a){this.applyOptions_(this.getUpdatedOptions_({maxZoom:a}))},l.prototype.getMinZoom=function(){return this.getZoomForResolution(this.maxResolution_)},l.prototype.setMinZoom=function(a){this.applyOptions_(this.getUpdatedOptions_({minZoom:a}))},l.prototype.setConstrainResolution=function(a){this.applyOptions_(this.getUpdatedOptions_({constrainResolution:a}))},l.prototype.getProjection=function(){return this.projection_},l.prototype.getResolution=function(){return this.get(Za.RESOLUTION)},l.prototype.getResolutions=function(){return this.resolutions_},l.prototype.getResolutionForExtent=function(a,h){return this.getResolutionForExtentInternal(wh(a,this.getProjection()),h)},l.prototype.getResolutionForExtentInternal=function(a,h){var d=h||this.getViewportSizeMinusPadding_(),f=fr(a)/d[0],m=Ei(a)/d[1];return Math.max(f,m)},l.prototype.getResolutionForValueFunction=function(a){var h=a||2,d=this.getConstrainedResolution(this.maxResolution_),m=Math.log(d/this.minResolution_)/Math.log(h);return function(g){return d/Math.pow(h,g*m)}},l.prototype.getRotation=function(){return this.get(Za.ROTATION)},l.prototype.getValueForResolutionFunction=function(a){var h=Math.log(a||2),d=this.getConstrainedResolution(this.maxResolution_),m=Math.log(d/this.minResolution_)/h;return function(g){return Math.log(d/g)/h/m}},l.prototype.getViewportSizeMinusPadding_=function(a){var h=this.getViewportSize_(a),d=this.padding_;return d&&(h=[h[0]-d[1]-d[3],h[1]-d[0]-d[2]]),h},l.prototype.getState=function(){var a=this.getProjection(),h=this.getResolution(),d=this.getRotation(),f=this.getCenterInternal(),m=this.padding_;if(m){var g=this.getViewportSizeMinusPadding_();f=T2(f,this.getViewportSize_(),[g[0]/2+m[3],g[1]/2+m[0]],h,d)}return{center:f.slice(0),projection:void 0!==a?a:null,resolution:h,nextCenter:this.nextCenter_,nextResolution:this.nextResolution_,nextRotation:this.nextRotation_,rotation:d,zoom:this.getZoom()}},l.prototype.getZoom=function(){var a,h=this.getResolution();return void 0!==h&&(a=this.getZoomForResolution(h)),a},l.prototype.getZoomForResolution=function(a){var d,f,h=this.minZoom_||0;if(this.resolutions_){var m=LC(this.resolutions_,a,1);h=m,d=this.resolutions_[m],f=m==this.resolutions_.length-1?2:d/this.resolutions_[m+1]}else d=this.maxResolution_,f=this.zoomFactor_;return h+Math.log(d/a)/Math.log(f)},l.prototype.getResolutionForZoom=function(a){if(this.resolutions_){if(this.resolutions_.length<=1)return 0;var h=qn(Math.floor(a),0,this.resolutions_.length-2);return this.resolutions_[h]/Math.pow(this.resolutions_[h]/this.resolutions_[h+1],qn(a-h,0,1))}return this.maxResolution_/Math.pow(this.zoomFactor_,a-this.minZoom_)},l.prototype.fit=function(a,h){var d;if(bn(Array.isArray(a)||"function"==typeof a.getSimplifiedGeometry,24),Array.isArray(a))bn(!Cy(a),25),d=S2(f=wh(a,this.getProjection()));else if("Circle"===a.getType()){var f;(d=S2(f=wh(a.getExtent(),this.getProjection()))).rotate(this.getRotation(),Jo(f))}else{var m=xS();d=m?a.clone().transform(m,this.getProjection()):a}this.fitInternal(d,h)},l.prototype.rotatedExtentForGeometry=function(a){for(var h=this.getRotation(),d=Math.cos(h),f=Math.sin(-h),m=a.getFlatCoordinates(),g=a.getStride(),y=1/0,v=1/0,_=-1/0,S=-1/0,b=0,T=m.length;b<T;b+=g){var x=m[b]*d-m[b+1]*f,E=m[b]*f+m[b+1]*d;y=Math.min(y,x),v=Math.min(v,E),_=Math.max(_,x),S=Math.max(S,E)}return[y,v,_,S]},l.prototype.fitInternal=function(a,h){var d=h||{},f=d.size;f||(f=this.getViewportSizeMinusPadding_());var y,m=void 0!==d.padding?d.padding:[0,0,0,0],g=void 0!==d.nearest&&d.nearest;y=void 0!==d.minResolution?d.minResolution:void 0!==d.maxZoom?this.getResolutionForZoom(d.maxZoom):0;var v=this.rotatedExtentForGeometry(a),_=this.getResolutionForExtentInternal(v,[f[0]-m[1]-m[3],f[1]-m[0]-m[2]]);_=isNaN(_)?y:Math.max(_,y),_=this.getConstrainedResolution(_,g?0:1);var S=this.getRotation(),b=Math.sin(S),T=Math.cos(S),x=Jo(v);x[0]+=(m[1]-m[3])/2*_,x[1]+=(m[0]-m[2])/2*_;var I=this.getConstrainedCenter([x[0]*T-x[1]*b,x[1]*T+x[0]*b],_),M=d.callback?d.callback:Lp;void 0!==d.duration?this.animateInternal({resolution:_,center:I,duration:d.duration,easing:d.easing},M):(this.targetResolution_=_,this.targetCenter_=I,this.applyTargetState_(!1,!0),hx(M,!0))},l.prototype.centerOn=function(a,h,d){this.centerOnInternal(Th(a,this.getProjection()),h,d)},l.prototype.centerOnInternal=function(a,h,d){this.setCenterInternal(T2(a,h,d,this.getResolution(),this.getRotation()))},l.prototype.calculateCenterShift=function(a,h,d,f){var m,g=this.padding_;if(g&&a){var y=this.getViewportSizeMinusPadding_(-d),v=T2(a,f,[y[0]/2+g[3],y[1]/2+g[0]],h,d);m=[a[0]-v[0],a[1]-v[1]]}return m},l.prototype.isDef=function(){return!!this.getCenterInternal()&&void 0!==this.getResolution()},l.prototype.adjustCenter=function(a){var h=r2(this.targetCenter_,this.getProjection());this.setCenter([h[0]+a[0],h[1]+a[1]])},l.prototype.adjustCenterInternal=function(a){var h=this.targetCenter_;this.setCenterInternal([h[0]+a[0],h[1]+a[1]])},l.prototype.adjustResolution=function(a,h){var d=h&&Th(h,this.getProjection());this.adjustResolutionInternal(a,d)},l.prototype.adjustResolutionInternal=function(a,h){var d=this.getAnimating()||this.getInteracting(),f=this.getViewportSize_(this.getRotation()),m=this.constraints_.resolution(this.targetResolution_*a,0,f,d);h&&(this.targetCenter_=this.calculateCenterZoom(m,h)),this.targetResolution_*=a,this.applyTargetState_()},l.prototype.adjustZoom=function(a,h){this.adjustResolution(Math.pow(this.zoomFactor_,-a),h)},l.prototype.adjustRotation=function(a,h){h&&(h=Th(h,this.getProjection())),this.adjustRotationInternal(a,h)},l.prototype.adjustRotationInternal=function(a,h){var d=this.getAnimating()||this.getInteracting(),f=this.constraints_.rotation(this.targetRotation_+a,d);h&&(this.targetCenter_=this.calculateCenterRotate(f,h)),this.targetRotation_+=a,this.applyTargetState_()},l.prototype.setCenter=function(a){this.setCenterInternal(a&&Th(a,this.getProjection()))},l.prototype.setCenterInternal=function(a){this.targetCenter_=a,this.applyTargetState_()},l.prototype.setHint=function(a,h){return this.hints_[a]+=h,this.changed(),this.hints_[a]},l.prototype.setResolution=function(a){this.targetResolution_=a,this.applyTargetState_()},l.prototype.setRotation=function(a){this.targetRotation_=a,this.applyTargetState_()},l.prototype.setZoom=function(a){this.setResolution(this.getResolutionForZoom(a))},l.prototype.applyTargetState_=function(a,h){var d=this.getAnimating()||this.getInteracting()||h,f=this.constraints_.rotation(this.targetRotation_,d),m=this.getViewportSize_(f),g=this.constraints_.resolution(this.targetResolution_,0,m,d),y=this.constraints_.center(this.targetCenter_,g,m,d,this.calculateCenterShift(this.targetCenter_,g,f,m));this.get(Za.ROTATION)!==f&&this.set(Za.ROTATION,f),this.get(Za.RESOLUTION)!==g&&(this.set(Za.RESOLUTION,g),this.set("zoom",this.getZoom(),!0)),(!y||!this.get(Za.CENTER)||!XC(this.get(Za.CENTER),y))&&this.set(Za.CENTER,y),this.getAnimating()&&!a&&this.cancelAnimations(),this.cancelAnchor_=void 0},l.prototype.resolveConstraints=function(a,h,d){var f=void 0!==a?a:200,m=h||0,g=this.constraints_.rotation(this.targetRotation_),y=this.getViewportSize_(g),v=this.constraints_.resolution(this.targetResolution_,m,y),_=this.constraints_.center(this.targetCenter_,v,y,!1,this.calculateCenterShift(this.targetCenter_,v,g,y));if(0===f&&!this.cancelAnchor_)return this.targetResolution_=v,this.targetRotation_=g,this.targetCenter_=_,void this.applyTargetState_();var S=d||(0===f?this.cancelAnchor_:void 0);this.cancelAnchor_=void 0,(this.getResolution()!==v||this.getRotation()!==g||!this.getCenterInternal()||!XC(this.getCenterInternal(),_))&&(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:g,center:_,resolution:v,duration:f,easing:Hp,anchor:S}))},l.prototype.beginInteraction=function(){this.resolveConstraints(0),this.setHint(1,1)},l.prototype.endInteraction=function(a,h,d){var f=d&&Th(d,this.getProjection());this.endInteractionInternal(a,h,f)},l.prototype.endInteractionInternal=function(a,h,d){this.setHint(1,-1),this.resolveConstraints(a,h,d)},l.prototype.getConstrainedCenter=function(a,h){var d=this.getViewportSize_(this.getRotation());return this.constraints_.center(a,h||this.getResolution(),d)},l.prototype.getConstrainedZoom=function(a,h){var d=this.getResolutionForZoom(a);return this.getZoomForResolution(this.getConstrainedResolution(d,h))},l.prototype.getConstrainedResolution=function(a,h){var d=h||0,f=this.getViewportSize_(this.getRotation());return this.constraints_.resolution(a,d,f)},l}(yc);function hx(c,l){setTimeout(function(){c(l)},0)}function tSe(c){return!(c.sourceCenter&&c.targetCenter&&!XC(c.sourceCenter,c.targetCenter)||c.sourceResolution!==c.targetResolution||c.sourceRotation!==c.targetRotation)}function T2(c,l,a,h,d){var f=Math.cos(-d),m=Math.sin(-d),g=c[0]*f-c[1]*m,y=c[1]*f+c[0]*m;return[(g+=(l[0]/2-a[0])*h)*f-(y+=(a[1]-l[1]/2)*h)*(m=-m),y*f+g*m]}const Tc=K0e;function s7(c,l,a){return void 0===a&&(a=[0,0]),a[0]=c[0]+2*l,a[1]=c[1]+2*l,a}function o7(c){return c[0]>0&&c[1]>0}function a7(c,l,a){return void 0===a&&(a=[0,0]),a[0]=c[0]*l+.5|0,a[1]=c[1]*l+.5|0,a}function uo(c,l){return Array.isArray(c)?c:(void 0===l?l=[c,c]:(l[0]=c,l[1]=c),l)}var nSe=function(){var c=function(l,a){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,d){h.__proto__=d}||function(h,d){for(var f in d)Object.prototype.hasOwnProperty.call(d,f)&&(h[f]=d[f])})(l,a)};return function(l,a){if("function"!=typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");function h(){this.constructor=l}c(l,a),l.prototype=null===a?Object.create(a):(h.prototype=a.prototype,new h)}}();function l7(c){c instanceof Ao?c.setMapInternal(null):c instanceof Ui&&c.getLayers().forEach(l7)}function c7(c,l){if(c instanceof Ao)c.setMapInternal(l);else if(c instanceof Ui)for(var a=c.getLayers().getArray(),h=0,d=a.length;h<d;++h)c7(a[h],l)}var rSe=function(c){function l(a){var h=c.call(this)||this,d=function iSe(c){var l=null;void 0!==c.keyboardEventTarget&&(l="string"==typeof c.keyboardEventTarget?document.getElementById(c.keyboardEventTarget):c.keyboardEventTarget);var d,f,m,a={},h=c.layers&&"function"==typeof c.layers.getLayers?c.layers:new Ui({layers:c.layers});return a.layergroup=h,a.target=c.target,a.view=c.view instanceof Tc?c.view:new Tc,void 0!==c.controls&&(Array.isArray(c.controls)?d=new co(c.controls.slice()):(bn("function"==typeof c.controls.getArray,47),d=c.controls)),void 0!==c.interactions&&(Array.isArray(c.interactions)?f=new co(c.interactions.slice()):(bn("function"==typeof c.interactions.getArray,48),f=c.interactions)),void 0!==c.overlays?Array.isArray(c.overlays)?m=new co(c.overlays.slice()):(bn("function"==typeof c.overlays.getArray,49),m=c.overlays):m=new co,{controls:d,interactions:f,keyboardEventTarget:l,overlays:m,values:a}}(a);h.loaded_=!0,h.boundHandleBrowserEvent_=h.handleBrowserEvent.bind(h),h.maxTilesLoading_=void 0!==a.maxTilesLoading?a.maxTilesLoading:16,h.pixelRatio_=void 0!==a.pixelRatio?a.pixelRatio:UH,h.animationDelay_=function(){this.animationDelayKey_=void 0,this.renderFrame_(Date.now())}.bind(h),h.coordinateToPixelTransform_=[1,0,0,1,0,0],h.pixelToCoordinateTransform_=[1,0,0,1,0,0],h.frameIndex_=0,h.frameState_=null,h.previousExtent_=null,h.viewPropertyListenerKey_=null,h.viewChangeListenerKey_=null,h.layerGroupPropertyListenerKeys_=null,h.viewport_=document.createElement("div"),h.viewport_.className="ol-viewport"+("ontouchstart"in window?" ol-touch":""),h.viewport_.style.position="relative",h.viewport_.style.overflow="hidden",h.viewport_.style.width="100%",h.viewport_.style.height="100%",h.overlayContainer_=document.createElement("div"),h.overlayContainer_.style.position="absolute",h.overlayContainer_.style.zIndex="0",h.overlayContainer_.style.width="100%",h.overlayContainer_.style.height="100%",h.overlayContainer_.style.pointerEvents="none",h.overlayContainer_.className="ol-overlaycontainer",h.viewport_.appendChild(h.overlayContainer_),h.overlayContainerStopEvent_=document.createElement("div"),h.overlayContainerStopEvent_.style.position="absolute",h.overlayContainerStopEvent_.style.zIndex="0",h.overlayContainerStopEvent_.style.width="100%",h.overlayContainerStopEvent_.style.height="100%",h.overlayContainerStopEvent_.style.pointerEvents="none",h.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent",h.viewport_.appendChild(h.overlayContainerStopEvent_),h.mapBrowserEventHandler_=null,h.moveTolerance_=a.moveTolerance,h.keyboardEventTarget_=d.keyboardEventTarget,h.targetChangeHandlerKeys_=null,h.controls=d.controls||new co,h.interactions=d.interactions||new co,h.overlays_=d.overlays,h.overlayIdIndex_={},h.renderer_=null,h.postRenderFunctions_=[],h.tileQueue_=new A9(h.getTilePriority.bind(h),h.handleTileChange_.bind(h)),h.addChangeListener("layergroup",h.handleLayerGroupChanged_),h.addChangeListener("view",h.handleViewChanged_),h.addChangeListener("size",h.handleSizeChanged_),h.addChangeListener("target",h.handleTargetChanged_),h.setProperties(d.values);var f=h;return a.view&&!(a.view instanceof Tc)&&a.view.then(function(m){f.setView(new Tc(m))}),h.controls.addEventListener("add",function(m){m.element.setMap(this)}.bind(h)),h.controls.addEventListener("remove",function(m){m.element.setMap(null)}.bind(h)),h.interactions.addEventListener("add",function(m){m.element.setMap(this)}.bind(h)),h.interactions.addEventListener("remove",function(m){m.element.setMap(null)}.bind(h)),h.overlays_.addEventListener("add",function(m){this.addOverlayInternal_(m.element)}.bind(h)),h.overlays_.addEventListener("remove",function(m){var y=m.element.getId();void 0!==y&&delete this.overlayIdIndex_[y.toString()],m.element.setMap(null)}.bind(h)),h.controls.forEach(function(m){m.setMap(this)}.bind(h)),h.interactions.forEach(function(m){m.setMap(this)}.bind(h)),h.overlays_.forEach(h.addOverlayInternal_.bind(h)),h}return nSe(l,c),l.prototype.createRenderer=function(){throw new Error("Use a map type that has a createRenderer method")},l.prototype.addControl=function(a){this.getControls().push(a)},l.prototype.addInteraction=function(a){this.getInteractions().push(a)},l.prototype.addLayer=function(a){this.getLayerGroup().getLayers().push(a)},l.prototype.handleLayerAdd_=function(a){c7(a.layer,this)},l.prototype.addOverlay=function(a){this.getOverlays().push(a)},l.prototype.addOverlayInternal_=function(a){var h=a.getId();void 0!==h&&(this.overlayIdIndex_[h.toString()]=a),a.setMap(this)},l.prototype.disposeInternal=function(){this.setTarget(null),c.prototype.disposeInternal.call(this)},l.prototype.forEachFeatureAtPixel=function(a,h,d){if(this.frameState_&&this.renderer_){var f=this.getCoordinateFromPixelInternal(a);return this.renderer_.forEachFeatureAtCoordinate(f,this.frameState_,void 0!==(d=void 0!==d?d:{}).hitTolerance?d.hitTolerance:0,!1!==d.checkWrapped,h,null,void 0!==d.layerFilter?d.layerFilter:_y,null)}},l.prototype.getFeaturesAtPixel=function(a,h){var d=[];return this.forEachFeatureAtPixel(a,function(f){d.push(f)},h),d},l.prototype.getAllLayers=function(){var a=[];return function h(d){d.forEach(function(f){f instanceof Ui?h(f.getLayers()):a.push(f)})}(this.getLayers()),a},l.prototype.forEachLayerAtPixel=function(a,h,d){if(this.frameState_&&this.renderer_){var f=d||{};return this.renderer_.forEachLayerAtPixel(a,this.frameState_,void 0!==f.hitTolerance?f.hitTolerance:0,h,f.layerFilter||_y)}},l.prototype.hasFeatureAtPixel=function(a,h){if(!this.frameState_||!this.renderer_)return!1;var d=this.getCoordinateFromPixelInternal(a);return this.renderer_.hasFeatureAtCoordinate(d,this.frameState_,void 0!==(h=void 0!==h?h:{}).hitTolerance?h.hitTolerance:0,!1!==h.checkWrapped,void 0!==h.layerFilter?h.layerFilter:_y,null)},l.prototype.getEventCoordinate=function(a){return this.getCoordinateFromPixel(this.getEventPixel(a))},l.prototype.getEventCoordinateInternal=function(a){return this.getCoordinateFromPixelInternal(this.getEventPixel(a))},l.prototype.getEventPixel=function(a){var h=this.viewport_.getBoundingClientRect(),d="changedTouches"in a?a.changedTouches[0]:a;return[d.clientX-h.left,d.clientY-h.top]},l.prototype.getTarget=function(){return this.get("target")},l.prototype.getTargetElement=function(){var a=this.getTarget();return void 0!==a?"string"==typeof a?document.getElementById(a):a:null},l.prototype.getCoordinateFromPixel=function(a){return r2(this.getCoordinateFromPixelInternal(a),this.getView().getProjection())},l.prototype.getCoordinateFromPixelInternal=function(a){var h=this.frameState_;return h?ni(h.pixelToCoordinateTransform,a.slice()):null},l.prototype.getControls=function(){return this.controls},l.prototype.getOverlays=function(){return this.overlays_},l.prototype.getOverlayById=function(a){var h=this.overlayIdIndex_[a.toString()];return void 0!==h?h:null},l.prototype.getInteractions=function(){return this.interactions},l.prototype.getLayerGroup=function(){return this.get("layergroup")},l.prototype.setLayers=function(a){var h=this.getLayerGroup();if(a instanceof co)h.setLayers(a);else{var d=h.getLayers();d.clear(),d.extend(a)}},l.prototype.getLayers=function(){return this.getLayerGroup().getLayers()},l.prototype.getLoadingOrNotReady=function(){for(var a=this.getLayerGroup().getLayerStatesArray(),h=0,d=a.length;h<d;++h){var f=a[h];if(f.visible){var m=f.layer.getRenderer();if(m&&!m.ready)return!0;var g=f.layer.getSource();if(g&&g.loading)return!0}}return!1},l.prototype.getPixelFromCoordinate=function(a){var h=Th(a,this.getView().getProjection());return this.getPixelFromCoordinateInternal(h)},l.prototype.getPixelFromCoordinateInternal=function(a){var h=this.frameState_;return h?ni(h.coordinateToPixelTransform,a.slice(0,2)):null},l.prototype.getRenderer=function(){return this.renderer_},l.prototype.getSize=function(){return this.get("size")},l.prototype.getView=function(){return this.get("view")},l.prototype.getViewport=function(){return this.viewport_},l.prototype.getOverlayContainer=function(){return this.overlayContainer_},l.prototype.getOverlayContainerStopEvent=function(){return this.overlayContainerStopEvent_},l.prototype.getOwnerDocument=function(){var a=this.getTargetElement();return a?a.ownerDocument:document},l.prototype.getTilePriority=function(a,h,d,f){return function q_e(c,l,a,h,d){if(!c||!(a in c.wantedTiles)||!c.wantedTiles[a][l.getKey()])return ex;var f=c.viewState.center,m=h[0]-f[0],g=h[1]-f[1];return 65536*Math.log(d)+Math.sqrt(m*m+g*g)/d}(this.frameState_,a,h,d,f)},l.prototype.handleBrowserEvent=function(a,h){var f=new Gd(h||a.type,this,a);this.handleMapBrowserEvent(f)},l.prototype.handleMapBrowserEvent=function(a){if(this.frameState_){var h=a.originalEvent,d=h.type;if("pointerdown"===d||"wheel"===d||"keydown"===d){var f=this.getOwnerDocument(),m=this.viewport_.getRootNode?this.viewport_.getRootNode():f,g=h.target;if(this.overlayContainerStopEvent_.contains(g)||!(m===f?f.documentElement:m).contains(g))return}if(a.frameState=this.frameState_,!1!==this.dispatchEvent(a))for(var y=this.getInteractions().getArray().slice(),v=y.length-1;v>=0;v--){var _=y[v];if(_.getMap()===this&&_.getActive()&&this.getTargetElement()&&(!_.handleEvent(a)||a.propagationStopped))break}}},l.prototype.handlePostRender=function(){var a=this.frameState_,h=this.tileQueue_;if(!h.isEmpty()){var d=this.maxTilesLoading_,f=d;if(a){var m=a.viewHints;if(m[0]||m[1]){var g=Date.now()-a.time>8;d=g?0:8,f=g?0:2}}h.getTilesLoading()<d&&(h.reprioritize(),h.loadMoreTiles(d,f))}a&&this.renderer_&&!a.animate&&(!0===this.renderComplete_?(this.hasListener("rendercomplete")&&this.renderer_.dispatchRenderEvent("rendercomplete",a),!1===this.loaded_&&(this.loaded_=!0,this.dispatchEvent(new Ry("loadend",this,a)))):!0===this.loaded_&&(this.loaded_=!1,this.dispatchEvent(new Ry("loadstart",this,a))));for(var y=this.postRenderFunctions_,v=0,_=y.length;v<_;++v)y[v](this,a);y.length=0},l.prototype.handleSizeChanged_=function(){this.getView()&&!this.getView().getAnimating()&&this.getView().resolveConstraints(0),this.render()},l.prototype.handleTargetChanged_=function(){if(this.mapBrowserEventHandler_){for(var a=0,h=this.targetChangeHandlerKeys_.length;a<h;++a)ri(this.targetChangeHandlerKeys_[a]);this.targetChangeHandlerKeys_=null,this.viewport_.removeEventListener("contextmenu",this.boundHandleBrowserEvent_),this.viewport_.removeEventListener("wheel",this.boundHandleBrowserEvent_),this.mapBrowserEventHandler_.dispose(),this.mapBrowserEventHandler_=null,YC(this.viewport_)}var d=this.getTargetElement();if(d){for(var f in d.appendChild(this.viewport_),this.renderer_||(this.renderer_=this.createRenderer()),this.mapBrowserEventHandler_=new z_e(this,this.moveTolerance_),Di)this.mapBrowserEventHandler_.addEventListener(Di[f],this.handleMapBrowserEvent.bind(this));this.viewport_.addEventListener("contextmenu",this.boundHandleBrowserEvent_,!1),this.viewport_.addEventListener("wheel",this.boundHandleBrowserEvent_,!!GH&&{passive:!1});var m=this.getOwnerDocument().defaultView,g=this.keyboardEventTarget_?this.keyboardEventTarget_:d;this.targetChangeHandlerKeys_=[zn(g,"keydown",this.handleBrowserEvent,this),zn(g,"keypress",this.handleBrowserEvent,this),zn(m,"resize",this.updateSize,this)]}else this.renderer_&&(clearTimeout(this.postRenderTimeoutHandle_),this.postRenderTimeoutHandle_=void 0,this.postRenderFunctions_.length=0,this.renderer_.dispose(),this.renderer_=null),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0);this.updateSize()},l.prototype.handleTileChange_=function(){this.render()},l.prototype.handleViewPropertyChanged_=function(){this.render()},l.prototype.handleViewChanged_=function(){this.viewPropertyListenerKey_&&(ri(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&(ri(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);var a=this.getView();a&&(this.updateViewportSize_(),this.viewPropertyListenerKey_=zn(a,"propertychange",this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=zn(a,"change",this.handleViewPropertyChanged_,this),a.resolveConstraints(0)),this.render()},l.prototype.handleLayerGroupChanged_=function(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(ri),this.layerGroupPropertyListenerKeys_=null);var a=this.getLayerGroup();a&&(this.handleLayerAdd_(new Ud("addlayer",a)),this.layerGroupPropertyListenerKeys_=[zn(a,"propertychange",this.render,this),zn(a,"change",this.render,this),zn(a,"addlayer",this.handleLayerAdd_,this),zn(a,"removelayer",this.handleLayerRemove_,this)]),this.render()},l.prototype.isRendered=function(){return!!this.frameState_},l.prototype.renderSync=function(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()},l.prototype.redrawText=function(){for(var a=this.getLayerGroup().getLayerStatesArray(),h=0,d=a.length;h<d;++h){var f=a[h].layer;f.hasRenderer()&&f.getRenderer().handleFontsChanged()}},l.prototype.render=function(){this.renderer_&&void 0===this.animationDelayKey_&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))},l.prototype.removeControl=function(a){return this.getControls().remove(a)},l.prototype.removeInteraction=function(a){return this.getInteractions().remove(a)},l.prototype.removeLayer=function(a){return this.getLayerGroup().getLayers().remove(a)},l.prototype.handleLayerRemove_=function(a){l7(a.layer)},l.prototype.removeOverlay=function(a){return this.getOverlays().remove(a)},l.prototype.renderFrame_=function(a){var h=this,d=this.getSize(),f=this.getView(),m=this.frameState_,g=null;if(void 0!==d&&o7(d)&&f&&f.isDef()){var y=f.getHints(this.frameState_?this.frameState_.viewHints:void 0),v=f.getState();if(g={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,declutterTree:null,extent:wy(v.center,v.resolution,v.rotation,d),index:this.frameIndex_++,layerIndex:0,layerStatesArray:this.getLayerGroup().getLayerStatesArray(),pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:d,tileQueue:this.tileQueue_,time:a,usedTiles:{},viewState:v,viewHints:y,wantedTiles:{},mapId:tn(this),renderTargets:{}},v.nextCenter&&v.nextResolution){var _=isNaN(v.nextRotation)?v.rotation:v.nextRotation;g.nextExtent=wy(v.nextCenter,v.nextResolution,_,d)}}this.frameState_=g,this.renderer_.renderFrame(g),g&&(g.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,g.postRenderFunctions),m&&(!this.previousExtent_||!Cy(this.previousExtent_)&&!Ol(g.extent,this.previousExtent_))&&(this.dispatchEvent(new Ry("movestart",this,m)),this.previousExtent_=Np(this.previousExtent_)),this.previousExtent_&&!g.viewHints[0]&&!g.viewHints[1]&&!Ol(g.extent,this.previousExtent_)&&(this.dispatchEvent(new Ry("moveend",this,g)),jH(g.extent,this.previousExtent_))),this.dispatchEvent(new Ry("postrender",this,g)),this.renderComplete_=this.hasListener("loadstart")||this.hasListener("loadend")||this.hasListener("rendercomplete")?!this.tileQueue_.getTilesLoading()&&!this.tileQueue_.getCount()&&!this.getLoadingOrNotReady():void 0,this.postRenderTimeoutHandle_||(this.postRenderTimeoutHandle_=setTimeout(function(){h.postRenderTimeoutHandle_=void 0,h.handlePostRender()},0))},l.prototype.setLayerGroup=function(a){var h=this.getLayerGroup();h&&this.handleLayerRemove_(new Ud("removelayer",h)),this.set("layergroup",a)},l.prototype.setSize=function(a){this.set("size",a)},l.prototype.setTarget=function(a){this.set("target",a)},l.prototype.setView=function(a){if(!a||a instanceof Tc)this.set("view",a);else{this.set("view",new Tc);var h=this;a.then(function(d){h.setView(new Tc(d))})}},l.prototype.updateSize=function(){var a=this.getTargetElement(),h=void 0;if(a){var d=getComputedStyle(a),f=a.offsetWidth-parseFloat(d.borderLeftWidth)-parseFloat(d.paddingLeft)-parseFloat(d.paddingRight)-parseFloat(d.borderRightWidth),m=a.offsetHeight-parseFloat(d.borderTopWidth)-parseFloat(d.paddingTop)-parseFloat(d.paddingBottom)-parseFloat(d.borderBottomWidth);!isNaN(f)&&!isNaN(m)&&!o7(h=[f,m])&&(a.offsetWidth||a.offsetHeight||a.getClientRects().length)&&console.warn("No map visible because the map container's width or height are 0.")}this.setSize(h),this.updateViewportSize_()},l.prototype.updateViewportSize_=function(){var a=this.getView();if(a){var h=void 0,d=getComputedStyle(this.viewport_);d.width&&d.height&&(h=[parseInt(d.width,10),parseInt(d.height,10)]),a.setViewportSize(h)}},l}(yc);const u7=rSe;var sSe=function(){var c=function(l,a){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,d){h.__proto__=d}||function(h,d){for(var f in d)Object.prototype.hasOwnProperty.call(d,f)&&(h[f]=d[f])})(l,a)};return function(l,a){if("function"!=typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");function h(){this.constructor=l}c(l,a),l.prototype=null===a?Object.create(a):(h.prototype=a.prototype,new h)}}(),oSe=function(c){function l(a){var h=c.call(this)||this,d=a.element;return d&&!a.target&&!d.style.pointerEvents&&(d.style.pointerEvents="auto"),h.element=d||null,h.target_=null,h.map_=null,h.listenerKeys=[],a.render&&(h.render=a.render),a.target&&h.setTarget(a.target),h}return sSe(l,c),l.prototype.disposeInternal=function(){YC(this.element),c.prototype.disposeInternal.call(this)},l.prototype.getMap=function(){return this.map_},l.prototype.setMap=function(a){this.map_&&YC(this.element);for(var h=0,d=this.listenerKeys.length;h<d;++h)ri(this.listenerKeys[h]);this.listenerKeys.length=0,this.map_=a,a&&((this.target_?this.target_:a.getOverlayContainerStopEvent()).appendChild(this.element),this.render!==Lp&&this.listenerKeys.push(zn(a,"postrender",this.render,this)),a.render())},l.prototype.render=function(a){},l.prototype.setTarget=function(a){this.target_="string"==typeof a?document.getElementById(a):a},l}(yc);const jd=oSe;var aSe=function(){var c=function(l,a){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,d){h.__proto__=d}||function(h,d){for(var f in d)Object.prototype.hasOwnProperty.call(d,f)&&(h[f]=d[f])})(l,a)};return function(l,a){if("function"!=typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");function h(){this.constructor=l}c(l,a),l.prototype=null===a?Object.create(a):(h.prototype=a.prototype,new h)}}(),lSe=function(c){function l(a){var h=this,d=a||{};(h=c.call(this,{element:document.createElement("div"),render:d.render,target:d.target})||this).ulElement_=document.createElement("ul"),h.collapsed_=void 0===d.collapsed||d.collapsed,h.userCollapsed_=h.collapsed_,h.overrideCollapsible_=void 0!==d.collapsible,h.collapsible_=void 0===d.collapsible||d.collapsible,h.collapsible_||(h.collapsed_=!1);var f=void 0!==d.className?d.className:"ol-attribution",m=void 0!==d.tipLabel?d.tipLabel:"Attributions",g=void 0!==d.expandClassName?d.expandClassName:f+"-expand",y=void 0!==d.collapseLabel?d.collapseLabel:"\u203a",v=void 0!==d.collapseClassName?d.collapseClassName:f+"-collapse";"string"==typeof y?(h.collapseLabel_=document.createElement("span"),h.collapseLabel_.textContent=y,h.collapseLabel_.className=v):h.collapseLabel_=y;var _=void 0!==d.label?d.label:"i";"string"==typeof _?(h.label_=document.createElement("span"),h.label_.textContent=_,h.label_.className=g):h.label_=_;var S=h.collapsible_&&!h.collapsed_?h.collapseLabel_:h.label_;h.toggleButton_=document.createElement("button"),h.toggleButton_.setAttribute("type","button"),h.toggleButton_.setAttribute("aria-expanded",String(!h.collapsed_)),h.toggleButton_.title=m,h.toggleButton_.appendChild(S),h.toggleButton_.addEventListener("click",h.handleClick_.bind(h),!1);var T=h.element;return T.className=f+" "+Bp+" "+gS+(h.collapsed_&&h.collapsible_?" "+$C:"")+(h.collapsible_?"":" ol-uncollapsible"),T.appendChild(h.toggleButton_),T.appendChild(h.ulElement_),h.renderedAttributions_=[],h.renderedVisible_=!0,h}return aSe(l,c),l.prototype.collectSourceAttributions_=function(a){for(var h={},d=[],f=!0,m=a.layerStatesArray,g=0,y=m.length;g<y;++g){var v=m[g];if(jC(v,a.viewState)){var _=v.layer.getSource();if(_){var S=_.getAttributions();if(S){var b=S(a);if(b)if(f=f&&!1!==_.getAttributionsCollapsible(),Array.isArray(b))for(var T=0,x=b.length;T<x;++T)b[T]in h||(d.push(b[T]),h[b[T]]=!0);else b in h||(d.push(b),h[b]=!0)}}}}return this.overrideCollapsible_||this.setCollapsible(f),d},l.prototype.updateElement_=function(a){if(a){var h=this.collectSourceAttributions_(a),d=h.length>0;if(this.renderedVisible_!=d&&(this.element.style.display=d?"":"none",this.renderedVisible_=d),!Fd(h,this.renderedAttributions_)){S9(this.ulElement_);for(var f=0,m=h.length;f<m;++f){var g=document.createElement("li");g.innerHTML=h[f],this.ulElement_.appendChild(g)}this.renderedAttributions_=h}}else this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1)},l.prototype.handleClick_=function(a){a.preventDefault(),this.handleToggle_(),this.userCollapsed_=this.collapsed_},l.prototype.handleToggle_=function(){this.element.classList.toggle($C),this.collapsed_?Dy(this.collapseLabel_,this.label_):Dy(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_,this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_))},l.prototype.getCollapsible=function(){return this.collapsible_},l.prototype.setCollapsible=function(a){this.collapsible_!==a&&(this.collapsible_=a,this.element.classList.toggle("ol-uncollapsible"),this.userCollapsed_&&this.handleToggle_())},l.prototype.setCollapsed=function(a){this.userCollapsed_=a,this.collapsible_&&this.collapsed_!==a&&this.handleToggle_()},l.prototype.getCollapsed=function(){return this.collapsed_},l.prototype.render=function(a){this.updateElement_(a.frameState)},l}(jd);const h7=lSe;var cSe=function(){var c=function(l,a){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,d){h.__proto__=d}||function(h,d){for(var f in d)Object.prototype.hasOwnProperty.call(d,f)&&(h[f]=d[f])})(l,a)};return function(l,a){if("function"!=typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");function h(){this.constructor=l}c(l,a),l.prototype=null===a?Object.create(a):(h.prototype=a.prototype,new h)}}(),uSe=function(c){function l(a){var h=this,d=a||{};h=c.call(this,{element:document.createElement("div"),render:d.render,target:d.target})||this;var f=void 0!==d.className?d.className:"ol-rotate",m=void 0!==d.label?d.label:"\u21e7",g=void 0!==d.compassClassName?d.compassClassName:"ol-compass";h.label_=null,"string"==typeof m?(h.label_=document.createElement("span"),h.label_.className=g,h.label_.textContent=m):(h.label_=m,h.label_.classList.add(g));var y=d.tipLabel?d.tipLabel:"Reset rotation",v=document.createElement("button");v.className=f+"-reset",v.setAttribute("type","button"),v.title=y,v.appendChild(h.label_),v.addEventListener("click",h.handleClick_.bind(h),!1);var S=h.element;return S.className=f+" "+Bp+" "+gS,S.appendChild(v),h.callResetNorth_=d.resetNorth?d.resetNorth:void 0,h.duration_=void 0!==d.duration?d.duration:250,h.autoHide_=void 0===d.autoHide||d.autoHide,h.rotation_=void 0,h.autoHide_&&h.element.classList.add(qC),h}return cSe(l,c),l.prototype.handleClick_=function(a){a.preventDefault(),void 0!==this.callResetNorth_?this.callResetNorth_():this.resetNorth_()},l.prototype.resetNorth_=function(){var h=this.getMap().getView();if(h){var d=h.getRotation();void 0!==d&&(this.duration_>0&&d%(2*Math.PI)!=0?h.animate({rotation:0,duration:this.duration_,easing:Hp}):h.setRotation(0))}},l.prototype.render=function(a){var h=a.frameState;if(h){var d=h.viewState.rotation;if(d!=this.rotation_){var f="rotate("+d+"rad)";if(this.autoHide_){var m=this.element.classList.contains(qC);m||0!==d?m&&0!==d&&this.element.classList.remove(qC):this.element.classList.add(qC)}this.label_.style.transform=f}this.rotation_=d}},l}(jd);const d7=uSe;var hSe=function(){var c=function(l,a){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,d){h.__proto__=d}||function(h,d){for(var f in d)Object.prototype.hasOwnProperty.call(d,f)&&(h[f]=d[f])})(l,a)};return function(l,a){if("function"!=typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");function h(){this.constructor=l}c(l,a),l.prototype=null===a?Object.create(a):(h.prototype=a.prototype,new h)}}(),dSe=function(c){function l(a){var h=this,d=a||{};h=c.call(this,{element:document.createElement("div"),target:d.target})||this;var f=void 0!==d.className?d.className:"ol-zoom",m=void 0!==d.delta?d.delta:1,g=void 0!==d.zoomInClassName?d.zoomInClassName:f+"-in",y=void 0!==d.zoomOutClassName?d.zoomOutClassName:f+"-out",v=void 0!==d.zoomInLabel?d.zoomInLabel:"+",_=void 0!==d.zoomOutLabel?d.zoomOutLabel:"\u2013",S=void 0!==d.zoomInTipLabel?d.zoomInTipLabel:"Zoom in",b=void 0!==d.zoomOutTipLabel?d.zoomOutTipLabel:"Zoom out",T=document.createElement("button");T.className=g,T.setAttribute("type","button"),T.title=S,T.appendChild("string"==typeof v?document.createTextNode(v):v),T.addEventListener("click",h.handleClick_.bind(h,m),!1);var x=document.createElement("button");x.className=y,x.setAttribute("type","button"),x.title=b,x.appendChild("string"==typeof _?document.createTextNode(_):_),x.addEventListener("click",h.handleClick_.bind(h,-m),!1);var D=h.element;return D.className=f+" "+Bp+" "+gS,D.appendChild(T),D.appendChild(x),h.duration_=void 0!==d.duration?d.duration:250,h}return hSe(l,c),l.prototype.handleClick_=function(a,h){h.preventDefault(),this.zoomByDelta_(a)},l.prototype.zoomByDelta_=function(a){var d=this.getMap().getView();if(d){var f=d.getZoom();if(void 0!==f){var m=d.getConstrainedZoom(f+a);this.duration_>0?(d.getAnimating()&&d.cancelAnimations(),d.animate({zoom:m,duration:this.duration_,easing:Hp})):d.setZoom(m)}}},l}(jd);const f7=dSe;var pSe=function(){var c=function(l,a){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,d){h.__proto__=d}||function(h,d){for(var f in d)Object.prototype.hasOwnProperty.call(d,f)&&(h[f]=d[f])})(l,a)};return function(l,a){if("function"!=typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");function h(){this.constructor=l}c(l,a),l.prototype=null===a?Object.create(a):(h.prototype=a.prototype,new h)}}(),mSe=function(c){function l(a){var h=c.call(this)||this;return a&&a.handleEvent&&(h.handleEvent=a.handleEvent),h.map_=null,h.setActive(!0),h}return pSe(l,c),l.prototype.getActive=function(){return this.get("active")},l.prototype.getMap=function(){return this.map_},l.prototype.handleEvent=function(a){return!0},l.prototype.setActive=function(a){this.set("active",a)},l.prototype.setMap=function(a){this.map_=a},l}(yc);function w2(c,l,a,h){var d=c.getZoom();if(void 0!==d){var f=c.getConstrainedZoom(d+l),m=c.getResolutionForZoom(f);c.getAnimating()&&c.cancelAnimations(),c.animate({resolution:m,anchor:a,duration:void 0!==h?h:250,easing:Hp})}}const MS=mSe;var ySe=function(){var c=function(l,a){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,d){h.__proto__=d}||function(h,d){for(var f in d)Object.prototype.hasOwnProperty.call(d,f)&&(h[f]=d[f])})(l,a)};return function(l,a){if("function"!=typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");function h(){this.constructor=l}c(l,a),l.prototype=null===a?Object.create(a):(h.prototype=a.prototype,new h)}}(),vSe=function(c){function l(a){var h=c.call(this)||this,d=a||{};return h.delta_=d.delta?d.delta:1,h.duration_=void 0!==d.duration?d.duration:250,h}return ySe(l,c),l.prototype.handleEvent=function(a){var h=!1;if(a.type==Di.DBLCLICK){var d=a.originalEvent,m=a.coordinate,g=d.shiftKey?-this.delta_:this.delta_;w2(a.map.getView(),g,m,this.duration_),d.preventDefault(),h=!0}return!h},l}(MS);const _Se=vSe;var SSe=function(){var c=function(l,a){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,d){h.__proto__=d}||function(h,d){for(var f in d)Object.prototype.hasOwnProperty.call(d,f)&&(h[f]=d[f])})(l,a)};return function(l,a){if("function"!=typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");function h(){this.constructor=l}c(l,a),l.prototype=null===a?Object.create(a):(h.prototype=a.prototype,new h)}}(),bSe=function(c){function l(a){var h=this,d=a||{};return h=c.call(this,d)||this,d.handleDownEvent&&(h.handleDownEvent=d.handleDownEvent),d.handleDragEvent&&(h.handleDragEvent=d.handleDragEvent),d.handleMoveEvent&&(h.handleMoveEvent=d.handleMoveEvent),d.handleUpEvent&&(h.handleUpEvent=d.handleUpEvent),d.stopDown&&(h.stopDown=d.stopDown),h.handlingDownUpSequence=!1,h.trackedPointers_={},h.targetPointers=[],h}return SSe(l,c),l.prototype.getPointerCount=function(){return this.targetPointers.length},l.prototype.handleDownEvent=function(a){return!1},l.prototype.handleDragEvent=function(a){},l.prototype.handleEvent=function(a){if(!a.originalEvent)return!0;var h=!1;if(this.updateTrackedPointers_(a),this.handlingDownUpSequence){if(a.type==Di.POINTERDRAG)this.handleDragEvent(a),a.originalEvent.preventDefault();else if(a.type==Di.POINTERUP){var d=this.handleUpEvent(a);this.handlingDownUpSequence=d&&this.targetPointers.length>0}}else if(a.type==Di.POINTERDOWN){var f=this.handleDownEvent(a);this.handlingDownUpSequence=f,h=this.stopDown(f)}else a.type==Di.POINTERMOVE&&this.handleMoveEvent(a);return!h},l.prototype.handleMoveEvent=function(a){},l.prototype.handleUpEvent=function(a){return!1},l.prototype.stopDown=function(a){return a},l.prototype.updateTrackedPointers_=function(a){if(function TSe(c){var l=c.type;return l===Di.POINTERDOWN||l===Di.POINTERDRAG||l===Di.POINTERUP}(a)){var h=a.originalEvent,d=h.pointerId.toString();a.type==Di.POINTERUP?delete this.trackedPointers_[d]:(a.type==Di.POINTERDOWN||d in this.trackedPointers_)&&(this.trackedPointers_[d]=h),this.targetPointers=i9(this.trackedPointers_)}},l}(MS);function C2(c){for(var l=c.length,a=0,h=0,d=0;d<l;d++)a+=c[d].clientX,h+=c[d].clientY;return[a/l,h/l]}const DS=bSe;function x2(c){var l=arguments;return function(a){for(var h=!0,d=0,f=l.length;d<f&&(h=h&&l[d](a));++d);return h}}var wSe=function(c){var l=c.originalEvent;return l.altKey&&!(l.metaKey||l.ctrlKey)&&l.shiftKey},m7=function(c){return!c.map.getTargetElement().hasAttribute("tabindex")||function(c){var l=c.map.getTargetElement(),a=c.map.getOwnerDocument().activeElement;return l.contains(a)}(c)},xSe=_y,g7=function(c){var l=c.originalEvent;return 0==l.button&&!(kve&&Vve&&l.ctrlKey)},y7=function(c){var l=c.originalEvent;return!l.altKey&&!(l.metaKey||l.ctrlKey)&&!l.shiftKey},ESe=function(c){var l=c.originalEvent;return!l.altKey&&!(l.metaKey||l.ctrlKey)&&l.shiftKey},v7=function(c){var a=c.originalEvent.target.tagName;return"INPUT"!==a&&"SELECT"!==a&&"TEXTAREA"!==a},E2=function(c){var l=c.originalEvent;return bn(void 0!==l,56),"mouse"==l.pointerType},MSe=function(c){var l=c.originalEvent;return bn(void 0!==l,56),l.isPrimary&&0===l.button},DSe=function(){var c=function(l,a){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,d){h.__proto__=d}||function(h,d){for(var f in d)Object.prototype.hasOwnProperty.call(d,f)&&(h[f]=d[f])})(l,a)};return function(l,a){if("function"!=typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");function h(){this.constructor=l}c(l,a),l.prototype=null===a?Object.create(a):(h.prototype=a.prototype,new h)}}(),ASe=function(c){function l(a){var h=c.call(this,{stopDown:OC})||this,d=a||{};h.kinetic_=d.kinetic,h.lastCentroid=null,h.panning_=!1;var f=d.condition?d.condition:x2(y7,MSe);return h.condition_=d.onFocusOnly?x2(m7,f):f,h.noKinetic_=!1,h}return DSe(l,c),l.prototype.handleDragEvent=function(a){this.panning_||(this.panning_=!0,this.getMap().getView().beginInteraction());var h=this.targetPointers,d=C2(h);if(h.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(d[0],d[1]),this.lastCentroid){var f=[this.lastCentroid[0]-d[0],d[1]-this.lastCentroid[1]],g=a.map.getView();d9(f,g.getResolution()),jL(f,g.getRotation()),g.adjustCenterInternal(f)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=d,this.lastPointersCount_=h.length,a.originalEvent.preventDefault()},l.prototype.handleUpEvent=function(a){var h=a.map,d=h.getView();if(0===this.targetPointers.length){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){var f=this.kinetic_.getDistance(),m=this.kinetic_.getAngle(),g=d.getCenterInternal(),y=h.getPixelFromCoordinateInternal(g),v=h.getCoordinateFromPixelInternal([y[0]-f*Math.cos(m),y[1]-f*Math.sin(m)]);d.animateInternal({center:d.getConstrainedCenter(v),duration:500,easing:Hp})}return this.panning_&&(this.panning_=!1,d.endInteraction()),!1}return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0},l.prototype.handleDownEvent=function(a){if(this.targetPointers.length>0&&this.condition_(a)){var d=a.map.getView();return this.lastCentroid=null,d.getAnimating()&&d.cancelAnimations(),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}return!1},l}(DS);const ISe=ASe;var RSe=function(){var c=function(l,a){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,d){h.__proto__=d}||function(h,d){for(var f in d)Object.prototype.hasOwnProperty.call(d,f)&&(h[f]=d[f])})(l,a)};return function(l,a){if("function"!=typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");function h(){this.constructor=l}c(l,a),l.prototype=null===a?Object.create(a):(h.prototype=a.prototype,new h)}}(),PSe=function(c){function l(a){var h=this,d=a||{};return(h=c.call(this,{stopDown:OC})||this).condition_=d.condition?d.condition:wSe,h.lastAngle_=void 0,h.duration_=void 0!==d.duration?d.duration:250,h}return RSe(l,c),l.prototype.handleDragEvent=function(a){if(E2(a)){var h=a.map,d=h.getView();if(d.getConstraints().rotation!==l2){var f=h.getSize(),m=a.pixel,g=Math.atan2(f[1]/2-m[1],m[0]-f[0]/2);void 0!==this.lastAngle_&&d.adjustRotationInternal(-(g-this.lastAngle_)),this.lastAngle_=g}}},l.prototype.handleUpEvent=function(a){return!E2(a)||(a.map.getView().endInteraction(this.duration_),!1)},l.prototype.handleDownEvent=function(a){return!(!E2(a)||!g7(a)||!this.condition_(a)||(a.map.getView().beginInteraction(),this.lastAngle_=void 0,0))},l}(DS);const LSe=PSe;var OSe=function(){var c=function(l,a){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,d){h.__proto__=d}||function(h,d){for(var f in d)Object.prototype.hasOwnProperty.call(d,f)&&(h[f]=d[f])})(l,a)};return function(l,a){if("function"!=typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");function h(){this.constructor=l}c(l,a),l.prototype=null===a?Object.create(a):(h.prototype=a.prototype,new h)}}(),NSe=function(c){function l(a){var h=c.call(this)||this;return h.geometry_=null,h.element_=document.createElement("div"),h.element_.style.position="absolute",h.element_.style.pointerEvents="auto",h.element_.className="ol-box "+a,h.map_=null,h.startPixel_=null,h.endPixel_=null,h}return OSe(l,c),l.prototype.disposeInternal=function(){this.setMap(null)},l.prototype.render_=function(){var a=this.startPixel_,h=this.endPixel_,d="px",f=this.element_.style;f.left=Math.min(a[0],h[0])+d,f.top=Math.min(a[1],h[1])+d,f.width=Math.abs(h[0]-a[0])+d,f.height=Math.abs(h[1]-a[1])+d},l.prototype.setMap=function(a){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);var h=this.element_.style;h.left="inherit",h.top="inherit",h.width="inherit",h.height="inherit"}this.map_=a,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)},l.prototype.setPixels=function(a,h){this.startPixel_=a,this.endPixel_=h,this.createOrUpdateGeometry(),this.render_()},l.prototype.createOrUpdateGeometry=function(){var a=this.startPixel_,h=this.endPixel_,f=[a,[a[0],h[1]],h,[h[0],a[1]]].map(this.map_.getCoordinateFromPixelInternal,this.map_);f[4]=f[0].slice(),this.geometry_?this.geometry_.setCoordinates([f]):this.geometry_=new vu([f])},l.prototype.getGeometry=function(){return this.geometry_},l}(oS);const FSe=NSe;var _7=function(){var c=function(l,a){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,d){h.__proto__=d}||function(h,d){for(var f in d)Object.prototype.hasOwnProperty.call(d,f)&&(h[f]=d[f])})(l,a)};return function(l,a){if("function"!=typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");function h(){this.constructor=l}c(l,a),l.prototype=null===a?Object.create(a):(h.prototype=a.prototype,new h)}}(),M2=function(c){function l(a,h,d){var f=c.call(this,a)||this;return f.coordinate=h,f.mapBrowserEvent=d,f}return _7(l,c),l}(gc),kSe=function(c){function l(a){var h=c.call(this)||this,d=a||{};return h.box_=new FSe(d.className||"ol-dragbox"),h.minArea_=void 0!==d.minArea?d.minArea:64,d.onBoxEnd&&(h.onBoxEnd=d.onBoxEnd),h.startPixel_=null,h.condition_=d.condition?d.condition:g7,h.boxEndCondition_=d.boxEndCondition?d.boxEndCondition:h.defaultBoxEndCondition,h}return _7(l,c),l.prototype.defaultBoxEndCondition=function(a,h,d){var f=d[0]-h[0],m=d[1]-h[1];return f*f+m*m>=this.minArea_},l.prototype.getGeometry=function(){return this.box_.getGeometry()},l.prototype.handleDragEvent=function(a){this.box_.setPixels(this.startPixel_,a.pixel),this.dispatchEvent(new M2("boxdrag",a.coordinate,a))},l.prototype.handleUpEvent=function(a){this.box_.setMap(null);var h=this.boxEndCondition_(a,this.startPixel_,a.pixel);return h&&this.onBoxEnd(a),this.dispatchEvent(new M2(h?"boxend":"boxcancel",a.coordinate,a)),!1},l.prototype.handleDownEvent=function(a){return!!this.condition_(a)&&(this.startPixel_=a.pixel,this.box_.setMap(a.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new M2("boxstart",a.coordinate,a)),!0)},l.prototype.onBoxEnd=function(a){},l}(DS);const S7=kSe;var VSe=function(){var c=function(l,a){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,d){h.__proto__=d}||function(h,d){for(var f in d)Object.prototype.hasOwnProperty.call(d,f)&&(h[f]=d[f])})(l,a)};return function(l,a){if("function"!=typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");function h(){this.constructor=l}c(l,a),l.prototype=null===a?Object.create(a):(h.prototype=a.prototype,new h)}}(),BSe=function(c){function l(a){var h=this,d=a||{};return(h=c.call(this,{condition:d.condition?d.condition:ESe,className:d.className||"ol-dragzoom",minArea:d.minArea})||this).duration_=void 0!==d.duration?d.duration:200,h.out_=void 0!==d.out&&d.out,h}return VSe(l,c),l.prototype.onBoxEnd=function(a){var d=this.getMap().getView(),f=this.getGeometry();if(this.out_){var m=d.rotatedExtentForGeometry(f),g=d.getResolutionForExtentInternal(m),y=d.getResolution()/g;(f=f.clone()).scale(y*y)}d.fitInternal(f,{duration:this.duration_,easing:Hp})},l}(S7);const USe=BSe;var GSe=function(){var c=function(l,a){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,d){h.__proto__=d}||function(h,d){for(var f in d)Object.prototype.hasOwnProperty.call(d,f)&&(h[f]=d[f])})(l,a)};return function(l,a){if("function"!=typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");function h(){this.constructor=l}c(l,a),l.prototype=null===a?Object.create(a):(h.prototype=a.prototype,new h)}}(),zSe=function(c){function l(a){var h=c.call(this)||this,d=a||{};return h.defaultCondition_=function(f){return y7(f)&&v7(f)},h.condition_=void 0!==d.condition?d.condition:h.defaultCondition_,h.duration_=void 0!==d.duration?d.duration:100,h.pixelDelta_=void 0!==d.pixelDelta?d.pixelDelta:128,h}return GSe(l,c),l.prototype.handleEvent=function(a){var h=!1;if("keydown"==a.type){var d=a.originalEvent,f=d.keyCode;if(this.condition_(a)&&(40==f||37==f||39==f||38==f)){var g=a.map.getView(),y=g.getResolution()*this.pixelDelta_,v=0,_=0;40==f?_=-y:37==f?v=-y:39==f?v=y:_=y;var S=[v,_];jL(S,g.getRotation()),function gSe(c,l,a){var h=c.getCenterInternal();h&&c.animateInternal({duration:void 0!==a?a:250,easing:_0e,center:c.getConstrainedCenter([h[0]+l[0],h[1]+l[1]])})}(g,S,this.duration_),d.preventDefault(),h=!0}}return!h},l}(MS);const HSe=zSe;var jSe=function(){var c=function(l,a){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,d){h.__proto__=d}||function(h,d){for(var f in d)Object.prototype.hasOwnProperty.call(d,f)&&(h[f]=d[f])})(l,a)};return function(l,a){if("function"!=typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");function h(){this.constructor=l}c(l,a),l.prototype=null===a?Object.create(a):(h.prototype=a.prototype,new h)}}(),WSe=function(c){function l(a){var h=c.call(this)||this,d=a||{};return h.condition_=d.condition?d.condition:v7,h.delta_=d.delta?d.delta:1,h.duration_=void 0!==d.duration?d.duration:100,h}return jSe(l,c),l.prototype.handleEvent=function(a){var h=!1;if("keydown"==a.type||"keypress"==a.type){var d=a.originalEvent,f=d.charCode;if(this.condition_(a)&&(f=="+".charCodeAt(0)||f=="-".charCodeAt(0))){var m=a.map,g=f=="+".charCodeAt(0)?this.delta_:-this.delta_;w2(m.getView(),g,void 0,this.duration_),d.preventDefault(),h=!0}}return!h},l}(MS);const XSe=WSe;var qSe=function(){function c(l,a,h){this.decay_=l,this.minVelocity_=a,this.delay_=h,this.points_=[],this.angle_=0,this.initialVelocity_=0}return c.prototype.begin=function(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0},c.prototype.update=function(l,a){this.points_.push(l,a,Date.now())},c.prototype.end=function(){if(this.points_.length<6)return!1;var l=Date.now()-this.delay_,a=this.points_.length-3;if(this.points_[a+2]<l)return!1;for(var h=a-3;h>0&&this.points_[h+2]>l;)h-=3;var d=this.points_[a+2]-this.points_[h+2];if(d<1e3/60)return!1;var f=this.points_[a]-this.points_[h],m=this.points_[a+1]-this.points_[h+1];return this.angle_=Math.atan2(m,f),this.initialVelocity_=Math.sqrt(f*f+m*m)/d,this.initialVelocity_>this.minVelocity_},c.prototype.getDistance=function(){return(this.minVelocity_-this.initialVelocity_)/this.decay_},c.prototype.getAngle=function(){return this.angle_},c}();const $Se=qSe;var YSe=function(){var c=function(l,a){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,d){h.__proto__=d}||function(h,d){for(var f in d)Object.prototype.hasOwnProperty.call(d,f)&&(h[f]=d[f])})(l,a)};return function(l,a){if("function"!=typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");function h(){this.constructor=l}c(l,a),l.prototype=null===a?Object.create(a):(h.prototype=a.prototype,new h)}}(),ZSe=function(c){function l(a){var h=this,d=a||{};(h=c.call(this,d)||this).totalDelta_=0,h.lastDelta_=0,h.maxDelta_=void 0!==d.maxDelta?d.maxDelta:1,h.duration_=void 0!==d.duration?d.duration:250,h.timeout_=void 0!==d.timeout?d.timeout:80,h.useAnchor_=void 0===d.useAnchor||d.useAnchor,h.constrainResolution_=void 0!==d.constrainResolution&&d.constrainResolution;var f=d.condition?d.condition:xSe;return h.condition_=d.onFocusOnly?x2(m7,f):f,h.lastAnchor_=null,h.startTime_=void 0,h.mode_=void 0,h.trackpadEventGap_=400,h.deltaPerZoom_=300,h}return YSe(l,c),l.prototype.endInteraction_=function(){this.trackpadTimeoutId_=void 0,this.getMap().getView().endInteraction(void 0,this.lastDelta_?this.lastDelta_>0?1:-1:0,this.lastAnchor_)},l.prototype.handleEvent=function(a){if(!this.condition_(a))return!0;if("wheel"!==a.type)return!0;var m,d=a.map,f=a.originalEvent;if(f.preventDefault(),this.useAnchor_&&(this.lastAnchor_=a.coordinate),"wheel"==a.type&&(m=f.deltaY,Ove&&f.deltaMode===WheelEvent.DOM_DELTA_PIXEL&&(m/=UH),f.deltaMode===WheelEvent.DOM_DELTA_LINE&&(m*=40)),0===m)return!1;this.lastDelta_=m;var g=Date.now();void 0===this.startTime_&&(this.startTime_=g),(!this.mode_||g-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(m)<4?"trackpad":"wheel");var y=d.getView();if("trackpad"===this.mode_&&!y.getConstrainResolution()&&!this.constrainResolution_)return this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):(y.getAnimating()&&y.cancelAnimations(),y.beginInteraction()),this.trackpadTimeoutId_=setTimeout(this.endInteraction_.bind(this),this.timeout_),y.adjustZoom(-m/this.deltaPerZoom_,this.lastAnchor_),this.startTime_=g,!1;this.totalDelta_+=m;var v=Math.max(this.timeout_-(g-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,d),v),!1},l.prototype.handleWheelZoom_=function(a){var h=a.getView();h.getAnimating()&&h.cancelAnimations();var d=-qn(this.totalDelta_,-this.maxDelta_*this.deltaPerZoom_,this.maxDelta_*this.deltaPerZoom_)/this.deltaPerZoom_;(h.getConstrainResolution()||this.constrainResolution_)&&(d=d?d>0?1:-1:0),w2(h,d,this.lastAnchor_,this.duration_),this.mode_=void 0,this.totalDelta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0},l.prototype.setMouseAnchor=function(a){this.useAnchor_=a,a||(this.lastAnchor_=null)},l}(MS);const KSe=ZSe;var QSe=function(){var c=function(l,a){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,d){h.__proto__=d}||function(h,d){for(var f in d)Object.prototype.hasOwnProperty.call(d,f)&&(h[f]=d[f])})(l,a)};return function(l,a){if("function"!=typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");function h(){this.constructor=l}c(l,a),l.prototype=null===a?Object.create(a):(h.prototype=a.prototype,new h)}}(),JSe=function(c){function l(a){var h=this,d=a||{},f=d;return f.stopDown||(f.stopDown=OC),(h=c.call(this,f)||this).anchor_=null,h.lastAngle_=void 0,h.rotating_=!1,h.rotationDelta_=0,h.threshold_=void 0!==d.threshold?d.threshold:.3,h.duration_=void 0!==d.duration?d.duration:250,h}return QSe(l,c),l.prototype.handleDragEvent=function(a){var h=0,d=this.targetPointers[0],f=this.targetPointers[1],m=Math.atan2(f.clientY-d.clientY,f.clientX-d.clientX);if(void 0!==this.lastAngle_){var g=m-this.lastAngle_;this.rotationDelta_+=g,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),h=g}this.lastAngle_=m;var y=a.map,v=y.getView();if(v.getConstraints().rotation!==l2){var _=y.getViewport().getBoundingClientRect(),S=C2(this.targetPointers);S[0]-=_.left,S[1]-=_.top,this.anchor_=y.getCoordinateFromPixelInternal(S),this.rotating_&&(y.render(),v.adjustRotationInternal(h,this.anchor_))}},l.prototype.handleUpEvent=function(a){return!(this.targetPointers.length<2&&(a.map.getView().endInteraction(this.duration_),1))},l.prototype.handleDownEvent=function(a){if(this.targetPointers.length>=2){var h=a.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||h.getView().beginInteraction(),!0}return!1},l}(DS);const ebe=JSe;var tbe=function(){var c=function(l,a){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,d){h.__proto__=d}||function(h,d){for(var f in d)Object.prototype.hasOwnProperty.call(d,f)&&(h[f]=d[f])})(l,a)};return function(l,a){if("function"!=typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");function h(){this.constructor=l}c(l,a),l.prototype=null===a?Object.create(a):(h.prototype=a.prototype,new h)}}(),nbe=function(c){function l(a){var h=this,d=a||{},f=d;return f.stopDown||(f.stopDown=OC),(h=c.call(this,f)||this).anchor_=null,h.duration_=void 0!==d.duration?d.duration:400,h.lastDistance_=void 0,h.lastScaleDelta_=1,h}return tbe(l,c),l.prototype.handleDragEvent=function(a){var h=1,d=this.targetPointers[0],f=this.targetPointers[1],m=d.clientX-f.clientX,g=d.clientY-f.clientY,y=Math.sqrt(m*m+g*g);void 0!==this.lastDistance_&&(h=this.lastDistance_/y),this.lastDistance_=y;var v=a.map,_=v.getView();1!=h&&(this.lastScaleDelta_=h);var S=v.getViewport().getBoundingClientRect(),b=C2(this.targetPointers);b[0]-=S.left,b[1]-=S.top,this.anchor_=v.getCoordinateFromPixelInternal(b),v.render(),_.adjustResolutionInternal(h,this.anchor_)},l.prototype.handleUpEvent=function(a){return!(this.targetPointers.length<2&&(a.map.getView().endInteraction(this.duration_,this.lastScaleDelta_>1?1:-1),1))},l.prototype.handleDownEvent=function(a){if(this.targetPointers.length>=2){var h=a.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||h.getView().beginInteraction(),!0}return!1},l}(DS);const rbe=nbe;var sbe=function(){var c=function(l,a){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,d){h.__proto__=d}||function(h,d){for(var f in d)Object.prototype.hasOwnProperty.call(d,f)&&(h[f]=d[f])})(l,a)};return function(l,a){if("function"!=typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");function h(){this.constructor=l}c(l,a),l.prototype=null===a?Object.create(a):(h.prototype=a.prototype,new h)}}(),obe=function(c){function l(a){return(a=$n({},a)).controls||(a.controls=function fSe(c){var l=c||{},a=new co;return(void 0===l.zoom||l.zoom)&&a.push(new f7(l.zoomOptions)),(void 0===l.rotate||l.rotate)&&a.push(new d7(l.rotateOptions)),(void 0===l.attribution||l.attribution)&&a.push(new h7(l.attributionOptions)),a}()),a.interactions||(a.interactions=function ibe(c){var l=c||{},a=new co,h=new $Se(-.005,.05,100);return(void 0===l.altShiftDragRotate||l.altShiftDragRotate)&&a.push(new LSe),(void 0===l.doubleClickZoom||l.doubleClickZoom)&&a.push(new _Se({delta:l.zoomDelta,duration:l.zoomDuration})),(void 0===l.dragPan||l.dragPan)&&a.push(new ISe({onFocusOnly:l.onFocusOnly,kinetic:h})),(void 0===l.pinchRotate||l.pinchRotate)&&a.push(new ebe),(void 0===l.pinchZoom||l.pinchZoom)&&a.push(new rbe({duration:l.zoomDuration})),(void 0===l.keyboard||l.keyboard)&&(a.push(new HSe),a.push(new XSe({delta:l.zoomDelta,duration:l.zoomDuration}))),(void 0===l.mouseWheelZoom||l.mouseWheelZoom)&&a.push(new KSe({onFocusOnly:l.onFocusOnly,duration:l.zoomDuration})),(void 0===l.shiftDragZoom||l.shiftDragZoom)&&a.push(new USe({duration:l.zoomDuration})),a}({onFocusOnly:!0})),c.call(this,a)||this}return sbe(l,c),l.prototype.createRenderer=function(){return new x9(this)},l}(u7);const abe=obe;var lbe=function(){var c=function(l,a){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,d){h.__proto__=d}||function(h,d){for(var f in d)Object.prototype.hasOwnProperty.call(d,f)&&(h[f]=d[f])})(l,a)};return function(l,a){if("function"!=typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");function h(){this.constructor=l}c(l,a),l.prototype=null===a?Object.create(a):(h.prototype=a.prototype,new h)}}(),cbe=function(c){function l(a){var h=c.call(this)||this;h.options=a,h.id=a.id,h.insertFirst=void 0===a.insertFirst||a.insertFirst,h.stopEvent=void 0===a.stopEvent||a.stopEvent,h.element=document.createElement("div"),h.element.className=void 0!==a.className?a.className:"ol-overlay-container ol-selectable",h.element.style.position="absolute",h.element.style.pointerEvents="auto";var d=a.autoPan;return d&&"object"!=typeof d&&(d={animation:a.autoPanAnimation,margin:a.autoPanMargin}),h.autoPan=d||!1,h.rendered={transform_:"",visible:!0},h.mapPostrenderListenerKey=null,h.addChangeListener("element",h.handleElementChanged),h.addChangeListener("map",h.handleMapChanged),h.addChangeListener("offset",h.handleOffsetChanged),h.addChangeListener("position",h.handlePositionChanged),h.addChangeListener("positioning",h.handlePositioningChanged),void 0!==a.element&&h.setElement(a.element),h.setOffset(void 0!==a.offset?a.offset:[0,0]),h.setPositioning(void 0!==a.positioning?a.positioning:"top-left"),void 0!==a.position&&h.setPosition(a.position),h}return lbe(l,c),l.prototype.getElement=function(){return this.get("element")},l.prototype.getId=function(){return this.id},l.prototype.getMap=function(){return this.get("map")||null},l.prototype.getOffset=function(){return this.get("offset")},l.prototype.getPosition=function(){return this.get("position")},l.prototype.getPositioning=function(){return this.get("positioning")},l.prototype.handleElementChanged=function(){S9(this.element);var a=this.getElement();a&&this.element.appendChild(a)},l.prototype.handleMapChanged=function(){this.mapPostrenderListenerKey&&(YC(this.element),ri(this.mapPostrenderListenerKey),this.mapPostrenderListenerKey=null);var a=this.getMap();if(a){this.mapPostrenderListenerKey=zn(a,"postrender",this.render,this),this.updatePixelPosition();var h=this.stopEvent?a.getOverlayContainerStopEvent():a.getOverlayContainer();this.insertFirst?h.insertBefore(this.element,h.childNodes[0]||null):h.appendChild(this.element),this.performAutoPan()}},l.prototype.render=function(){this.updatePixelPosition()},l.prototype.handleOffsetChanged=function(){this.updatePixelPosition()},l.prototype.handlePositionChanged=function(){this.updatePixelPosition(),this.performAutoPan()},l.prototype.handlePositioningChanged=function(){this.updatePixelPosition()},l.prototype.setElement=function(a){this.set("element",a)},l.prototype.setMap=function(a){this.set("map",a)},l.prototype.setOffset=function(a){this.set("offset",a)},l.prototype.setPosition=function(a){this.set("position",a)},l.prototype.performAutoPan=function(){this.autoPan&&this.panIntoView(this.autoPan)},l.prototype.panIntoView=function(a){var h=this.getMap();if(h&&h.getTargetElement()&&this.get("position")){var d=this.getRect(h.getTargetElement(),h.getSize()),f=this.getElement(),m=this.getRect(f,[x_e(f),E_e(f)]),g=a||{},y=void 0===g.margin?20:g.margin;if(!xa(d,m)){var v=m[0]-d[0],_=d[2]-m[2],S=m[1]-d[1],b=d[3]-m[3],T=[0,0];if(v<0?T[0]=v-y:_<0&&(T[0]=Math.abs(_)+y),S<0?T[1]=S-y:b<0&&(T[1]=Math.abs(b)+y),0!==T[0]||0!==T[1]){var x=h.getView().getCenterInternal(),E=h.getPixelFromCoordinateInternal(x);if(!E)return;var D=[E[0]+T[0],E[1]+T[1]],I=g.animation||{};h.getView().animateInternal({center:h.getCoordinateFromPixelInternal(D),duration:I.duration,easing:I.easing})}}}},l.prototype.getRect=function(a,h){var d=a.getBoundingClientRect(),f=d.left+window.pageXOffset,m=d.top+window.pageYOffset;return[f,m,f+h[0],m+h[1]]},l.prototype.setPositioning=function(a){this.set("positioning",a)},l.prototype.setVisible=function(a){this.rendered.visible!==a&&(this.element.style.display=a?"":"none",this.rendered.visible=a)},l.prototype.updatePixelPosition=function(){var a=this.getMap(),h=this.getPosition();if(a&&a.isRendered()&&h){var d=a.getPixelFromCoordinate(h),f=a.getSize();this.updateRenderedPosition(d,f)}else this.setVisible(!1)},l.prototype.updateRenderedPosition=function(a,h){var d=this.element.style,f=this.getOffset(),m=this.getPositioning();this.setVisible(!0);var g=Math.round(a[0]+f[0])+"px",y=Math.round(a[1]+f[1])+"px",v="0%",_="0%";"bottom-right"==m||"center-right"==m||"top-right"==m?v="-100%":("bottom-center"==m||"center-center"==m||"top-center"==m)&&(v="-50%"),"bottom-left"==m||"bottom-center"==m||"bottom-right"==m?_="-100%":("center-left"==m||"center-center"==m||"center-right"==m)&&(_="-50%");var S="translate(".concat(v,", ").concat(_,") translate(").concat(g,", ").concat(y,")");this.rendered.transform_!=S&&(this.rendered.transform_=S,d.transform=S,d.msTransform=S)},l.prototype.getOptions=function(){return this.options},l}(yc);const b7=cbe;var ube=function(){var c=function(l,a){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,d){h.__proto__=d}||function(h,d){for(var f in d)Object.prototype.hasOwnProperty.call(d,f)&&(h[f]=d[f])})(l,a)};return function(l,a){if("function"!=typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");function h(){this.constructor=l}c(l,a),l.prototype=null===a?Object.create(a):(h.prototype=a.prototype,new h)}}(),hbe=function(c){function l(a){var h=this,d=a||{},f=$n({},d);return delete f.preload,delete f.useInterimTilesOnError,(h=c.call(this,f)||this).setPreload(void 0!==d.preload?d.preload:0),h.setUseInterimTilesOnError(void 0===d.useInterimTilesOnError||d.useInterimTilesOnError),h}return ube(l,c),l.prototype.getPreload=function(){return this.get("preload")},l.prototype.setPreload=function(a){this.set("preload",a)},l.prototype.getUseInterimTilesOnError=function(){return this.get("useInterimTilesOnError")},l.prototype.setUseInterimTilesOnError=function(a){this.set("useInterimTilesOnError",a)},l.prototype.getData=function(a){return c.prototype.getData.call(this,a)},l}(Ao);const T7=hbe;var A2=ct(36);var dbe=function(){function c(l){this.opacity_=l.opacity,this.rotateWithView_=l.rotateWithView,this.rotation_=l.rotation,this.scale_=l.scale,this.scaleArray_=uo(l.scale),this.displacement_=l.displacement}return c.prototype.clone=function(){var l=this.getScale();return new c({opacity:this.getOpacity(),scale:Array.isArray(l)?l.slice():l,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice()})},c.prototype.getOpacity=function(){return this.opacity_},c.prototype.getRotateWithView=function(){return this.rotateWithView_},c.prototype.getRotation=function(){return this.rotation_},c.prototype.getScale=function(){return this.scale_},c.prototype.getScaleArray=function(){return this.scaleArray_},c.prototype.getDisplacement=function(){return this.displacement_},c.prototype.getAnchor=function(){return _n()},c.prototype.getImage=function(l){return _n()},c.prototype.getHitDetectionImage=function(){return _n()},c.prototype.getPixelRatio=function(l){return 1},c.prototype.getImageState=function(){return _n()},c.prototype.getImageSize=function(){return _n()},c.prototype.getOrigin=function(){return _n()},c.prototype.getSize=function(){return _n()},c.prototype.setDisplacement=function(l){this.displacement_=l},c.prototype.setOpacity=function(l){this.opacity_=l},c.prototype.setRotateWithView=function(l){this.rotateWithView_=l},c.prototype.setRotation=function(l){this.rotation_=l},c.prototype.setScale=function(l){this.scale_=l,this.scaleArray_=uo(l)},c.prototype.listenImageChange=function(l){_n()},c.prototype.load=function(){_n()},c.prototype.unlistenImageChange=function(l){_n()},c}();const w7=dbe;function _u(c){return Array.isArray(c)?n9(c):c}var fbe=function(){var c=function(l,a){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,d){h.__proto__=d}||function(h,d){for(var f in d)Object.prototype.hasOwnProperty.call(d,f)&&(h[f]=d[f])})(l,a)};return function(l,a){if("function"!=typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");function h(){this.constructor=l}c(l,a),l.prototype=null===a?Object.create(a):(h.prototype=a.prototype,new h)}}(),pbe=function(c){function l(a){var h=this;return(h=c.call(this,{opacity:1,rotateWithView:void 0!==a.rotateWithView&&a.rotateWithView,rotation:void 0!==a.rotation?a.rotation:0,scale:void 0!==a.scale?a.scale:1,displacement:void 0!==a.displacement?a.displacement:[0,0]})||this).canvas_=void 0,h.hitDetectionCanvas_=null,h.fill_=void 0!==a.fill?a.fill:null,h.origin_=[0,0],h.points_=a.points,h.radius_=void 0!==a.radius?a.radius:a.radius1,h.radius2_=a.radius2,h.angle_=void 0!==a.angle?a.angle:0,h.stroke_=void 0!==a.stroke?a.stroke:null,h.size_=null,h.renderOptions_=null,h.render(),h}return fbe(l,c),l.prototype.clone=function(){var a=this.getScale(),h=new l({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(a)?a.slice():a,displacement:this.getDisplacement().slice()});return h.setOpacity(this.getOpacity()),h},l.prototype.getAnchor=function(){var a=this.size_;if(!a)return null;var h=this.getDisplacement();return[a[0]/2-h[0],a[1]/2+h[1]]},l.prototype.getAngle=function(){return this.angle_},l.prototype.getFill=function(){return this.fill_},l.prototype.getHitDetectionImage=function(){return this.hitDetectionCanvas_||this.createHitDetectionCanvas_(this.renderOptions_),this.hitDetectionCanvas_},l.prototype.getImage=function(a){var h=this.canvas_[a];if(!h){var d=this.renderOptions_,f=Qs(d.size*a,d.size*a);this.draw_(d,f,a),this.canvas_[a]=h=f.canvas}return h},l.prototype.getPixelRatio=function(a){return a},l.prototype.getImageSize=function(){return this.size_},l.prototype.getImageState=function(){return 2},l.prototype.getOrigin=function(){return this.origin_},l.prototype.getPoints=function(){return this.points_},l.prototype.getRadius=function(){return this.radius_},l.prototype.getRadius2=function(){return this.radius2_},l.prototype.getSize=function(){return this.size_},l.prototype.getStroke=function(){return this.stroke_},l.prototype.listenImageChange=function(a){},l.prototype.load=function(){},l.prototype.unlistenImageChange=function(a){},l.prototype.calculateLineJoinSize_=function(a,h,d){if(0===h||this.points_===1/0||"bevel"!==a&&"miter"!==a)return h;var f=this.radius_,m=void 0===this.radius2_?f:this.radius2_;if(f<m){var g=f;f=m,m=g}var v=2*Math.PI/(void 0===this.radius2_?this.points_:2*this.points_),_=m*Math.sin(v),b=f-Math.sqrt(m*m-_*_),T=Math.sqrt(_*_+b*b),x=T/_;if("miter"===a&&x<=d)return x*h;var E=h/2/x,D=h/2*(b/T),M=Math.sqrt((f+E)*(f+E)+D*D)-f;if(void 0===this.radius2_||"bevel"===a)return 2*M;var L=f*Math.sin(v),F=m-Math.sqrt(f*f-L*L),z=Math.sqrt(L*L+F*F)/L;return z<=d?2*Math.max(M,z*h/2-m-f):2*M},l.prototype.createRenderOptions=function(){var m,a=Ay,h=0,d=null,f=0,g=0;this.stroke_&&(null===(m=this.stroke_.getColor())&&(m=SS),m=_u(m),void 0===(g=this.stroke_.getWidth())&&(g=1),d=this.stroke_.getLineDash(),f=this.stroke_.getLineDashOffset(),void 0===(a=this.stroke_.getLineJoin())&&(a=Ay),void 0===(h=this.stroke_.getMiterLimit())&&(h=10));var y=this.calculateLineJoinSize_(a,g,h),v=Math.max(this.radius_,this.radius2_||0);return{strokeStyle:m,strokeWidth:g,size:Math.ceil(2*v+y),lineDash:d,lineDashOffset:f,lineJoin:a,miterLimit:h}},l.prototype.render=function(){this.renderOptions_=this.createRenderOptions();var a=this.renderOptions_.size;this.canvas_={},this.size_=[a,a]},l.prototype.draw_=function(a,h,d){if(h.scale(d,d),h.translate(a.size/2,a.size/2),this.createPath_(h),this.fill_){var f=this.fill_.getColor();null===f&&(f=_h),h.fillStyle=_u(f),h.fill()}this.stroke_&&(h.strokeStyle=a.strokeStyle,h.lineWidth=a.strokeWidth,h.setLineDash&&a.lineDash&&(h.setLineDash(a.lineDash),h.lineDashOffset=a.lineDashOffset),h.lineJoin=a.lineJoin,h.miterLimit=a.miterLimit,h.stroke())},l.prototype.createHitDetectionCanvas_=function(a){if(this.fill_){var h=this.fill_.getColor(),d=0;if("string"==typeof h&&(h=fS(h)),null===h?d=1:Array.isArray(h)&&(d=4===h.length?h[3]:1),0===d){var f=Qs(a.size,a.size);this.hitDetectionCanvas_=f.canvas,this.drawHitDetectionCanvas_(a,f)}}this.hitDetectionCanvas_||(this.hitDetectionCanvas_=this.getImage(1))},l.prototype.createPath_=function(a){var h=this.points_,d=this.radius_;if(h===1/0)a.arc(0,0,d,0,2*Math.PI);else{var f=void 0===this.radius2_?d:this.radius2_;void 0!==this.radius2_&&(h*=2);for(var m=this.angle_-Math.PI/2,g=2*Math.PI/h,y=0;y<h;y++){var v=m+y*g,_=y%2==0?d:f;a.lineTo(_*Math.cos(v),_*Math.sin(v))}a.closePath()}},l.prototype.drawHitDetectionCanvas_=function(a,h){h.translate(a.size/2,a.size/2),this.createPath_(h),h.fillStyle=_h,h.fill(),this.stroke_&&(h.strokeStyle=a.strokeStyle,h.lineWidth=a.strokeWidth,a.lineDash&&(h.setLineDash(a.lineDash),h.lineDashOffset=a.lineDashOffset),h.lineJoin=a.lineJoin,h.miterLimit=a.miterLimit,h.stroke())},l}(w7);const mbe=pbe;var gbe=function(){var c=function(l,a){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,d){h.__proto__=d}||function(h,d){for(var f in d)Object.prototype.hasOwnProperty.call(d,f)&&(h[f]=d[f])})(l,a)};return function(l,a){if("function"!=typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");function h(){this.constructor=l}c(l,a),l.prototype=null===a?Object.create(a):(h.prototype=a.prototype,new h)}}(),ybe=function(c){function l(a){var h=a||{};return c.call(this,{points:1/0,fill:h.fill,radius:h.radius,stroke:h.stroke,scale:void 0!==h.scale?h.scale:1,rotation:void 0!==h.rotation?h.rotation:0,rotateWithView:void 0!==h.rotateWithView&&h.rotateWithView,displacement:void 0!==h.displacement?h.displacement:[0,0]})||this}return gbe(l,c),l.prototype.clone=function(){var a=this.getScale(),h=new l({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),scale:Array.isArray(a)?a.slice():a,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice()});return h.setOpacity(this.getOpacity()),h},l.prototype.setRadius=function(a){this.radius_=a,this.render()},l}(mbe);const Ny=ybe;var vbe=function(){function c(l){var a=l||{};this.color_=void 0!==a.color?a.color:null}return c.prototype.clone=function(){var l=this.getColor();return new c({color:Array.isArray(l)?l.slice():l||void 0})},c.prototype.getColor=function(){return this.color_},c.prototype.setColor=function(l){this.color_=l},c}();const Si=vbe;var _be=function(){function c(l){var a=l||{};this.color_=void 0!==a.color?a.color:null,this.lineCap_=a.lineCap,this.lineDash_=void 0!==a.lineDash?a.lineDash:null,this.lineDashOffset_=a.lineDashOffset,this.lineJoin_=a.lineJoin,this.miterLimit_=a.miterLimit,this.width_=a.width}return c.prototype.clone=function(){var l=this.getColor();return new c({color:Array.isArray(l)?l.slice():l||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})},c.prototype.getColor=function(){return this.color_},c.prototype.getLineCap=function(){return this.lineCap_},c.prototype.getLineDash=function(){return this.lineDash_},c.prototype.getLineDashOffset=function(){return this.lineDashOffset_},c.prototype.getLineJoin=function(){return this.lineJoin_},c.prototype.getMiterLimit=function(){return this.miterLimit_},c.prototype.getWidth=function(){return this.width_},c.prototype.setColor=function(l){this.color_=l},c.prototype.setLineCap=function(l){this.lineCap_=l},c.prototype.setLineDash=function(l){this.lineDash_=l},c.prototype.setLineDashOffset=function(l){this.lineDashOffset_=l},c.prototype.setLineJoin=function(l){this.lineJoin_=l},c.prototype.setMiterLimit=function(l){this.miterLimit_=l},c.prototype.setWidth=function(l){this.width_=l},c}();const ws=_be;var Fy=function(){function c(l){var a=l||{};this.geometry_=null,this.geometryFunction_=C7,void 0!==a.geometry&&this.setGeometry(a.geometry),this.fill_=void 0!==a.fill?a.fill:null,this.image_=void 0!==a.image?a.image:null,this.renderer_=void 0!==a.renderer?a.renderer:null,this.hitDetectionRenderer_=void 0!==a.hitDetectionRenderer?a.hitDetectionRenderer:null,this.stroke_=void 0!==a.stroke?a.stroke:null,this.text_=void 0!==a.text?a.text:null,this.zIndex_=a.zIndex}return c.prototype.clone=function(){var l=this.getGeometry();return l&&"object"==typeof l&&(l=l.clone()),new c({geometry:l,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,renderer:this.getRenderer(),stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})},c.prototype.getRenderer=function(){return this.renderer_},c.prototype.setRenderer=function(l){this.renderer_=l},c.prototype.setHitDetectionRenderer=function(l){this.hitDetectionRenderer_=l},c.prototype.getHitDetectionRenderer=function(){return this.hitDetectionRenderer_},c.prototype.getGeometry=function(){return this.geometry_},c.prototype.getGeometryFunction=function(){return this.geometryFunction_},c.prototype.getFill=function(){return this.fill_},c.prototype.setFill=function(l){this.fill_=l},c.prototype.getImage=function(){return this.image_},c.prototype.setImage=function(l){this.image_=l},c.prototype.getStroke=function(){return this.stroke_},c.prototype.setStroke=function(l){this.stroke_=l},c.prototype.getText=function(){return this.text_},c.prototype.setText=function(l){this.text_=l},c.prototype.getZIndex=function(){return this.zIndex_},c.prototype.setGeometry=function(l){"function"==typeof l?this.geometryFunction_=l:"string"==typeof l?this.geometryFunction_=function(a){return a.get(l)}:l?void 0!==l&&(this.geometryFunction_=function(){return l}):this.geometryFunction_=C7,this.geometry_=l},c.prototype.setZIndex=function(l){this.zIndex_=l},c}(),I2=null;function bbe(c,l){if(!I2){var a=new Si({color:"rgba(255,255,255,0.4)"}),h=new ws({color:"#3399CC",width:1.25});I2=[new Fy({image:new Ny({fill:a,stroke:h,radius:5}),fill:a,stroke:h})]}return I2}function C7(c){return c.getGeometry()}const ui=Fy;var Tbe=function(){var c=function(l,a){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,d){h.__proto__=d}||function(h,d){for(var f in d)Object.prototype.hasOwnProperty.call(d,f)&&(h[f]=d[f])})(l,a)};return function(l,a){if("function"!=typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");function h(){this.constructor=l}c(l,a),l.prototype=null===a?Object.create(a):(h.prototype=a.prototype,new h)}}(),wbe=function(c){function l(a){var h=this,d=a||{},f=$n({},d);return delete f.style,delete f.renderBuffer,delete f.updateWhileAnimating,delete f.updateWhileInteracting,(h=c.call(this,f)||this).declutter_=void 0!==d.declutter&&d.declutter,h.renderBuffer_=void 0!==d.renderBuffer?d.renderBuffer:100,h.style_=null,h.styleFunction_=void 0,h.setStyle(d.style),h.updateWhileAnimating_=void 0!==d.updateWhileAnimating&&d.updateWhileAnimating,h.updateWhileInteracting_=void 0!==d.updateWhileInteracting&&d.updateWhileInteracting,h}return Tbe(l,c),l.prototype.getDeclutter=function(){return this.declutter_},l.prototype.getFeatures=function(a){return c.prototype.getFeatures.call(this,a)},l.prototype.getRenderBuffer=function(){return this.renderBuffer_},l.prototype.getRenderOrder=function(){return this.get("renderOrder")},l.prototype.getStyle=function(){return this.style_},l.prototype.getStyleFunction=function(){return this.styleFunction_},l.prototype.getUpdateWhileAnimating=function(){return this.updateWhileAnimating_},l.prototype.getUpdateWhileInteracting=function(){return this.updateWhileInteracting_},l.prototype.renderDeclutter=function(a){a.declutterTree||(a.declutterTree=new A2(9)),this.getRenderer().renderDeclutter(a)},l.prototype.setRenderOrder=function(a){this.set("renderOrder",a)},l.prototype.setStyle=function(a){this.style_=void 0!==a?a:bbe,this.styleFunction_=null===a?void 0:function Sbe(c){var l,a;"function"==typeof c?l=c:(Array.isArray(c)?a=c:(bn("function"==typeof c.getZIndex,41),a=[c]),l=function(){return a});return l}(this.style_),this.changed()},l}(Ao);const $p=wbe;var Cbe=function(){var c=function(l,a){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,d){h.__proto__=d}||function(h,d){for(var f in d)Object.prototype.hasOwnProperty.call(d,f)&&(h[f]=d[f])})(l,a)};return function(l,a){if("function"!=typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");function h(){this.constructor=l}c(l,a),l.prototype=null===a?Object.create(a):(h.prototype=a.prototype,new h)}}(),xbe=function(c){function l(a){return c.call(this,a||{})||this}return Cbe(l,c),l}(Ao);const E7=xbe;var Ebe=function(){var c=function(l,a){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,d){h.__proto__=d}||function(h,d){for(var f in d)Object.prototype.hasOwnProperty.call(d,f)&&(h[f]=d[f])})(l,a)};return function(l,a){if("function"!=typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");function h(){this.constructor=l}c(l,a),l.prototype=null===a?Object.create(a):(h.prototype=a.prototype,new h)}}(),Mbe=function(c){function l(a){var h=c.call(this)||this;return h.ready=!0,h.boundHandleImageChange_=h.handleImageChange_.bind(h),h.layer_=a,h.declutterExecutorGroup=null,h}return Ebe(l,c),l.prototype.getFeatures=function(a){return _n()},l.prototype.getData=function(a){return null},l.prototype.prepareFrame=function(a){return _n()},l.prototype.renderFrame=function(a,h){return _n()},l.prototype.loadedTileCallback=function(a,h,d){a[h]||(a[h]={}),a[h][d.tileCoord.toString()]=d},l.prototype.createLoadedTileFinder=function(a,h,d){return function(f,m){var g=this.loadedTileCallback.bind(this,d,f);return a.forEachLoadedTile(h,f,m,g)}.bind(this)},l.prototype.forEachFeatureAtCoordinate=function(a,h,d,f,m){},l.prototype.getDataAtPixel=function(a,h,d){return null},l.prototype.getLayer=function(){return this.layer_},l.prototype.handleFontsChanged=function(){},l.prototype.handleImageChange_=function(a){2===a.target.getState()&&this.renderIfReadyAndVisible()},l.prototype.loadImage=function(a){var h=a.getState();return 2!=h&&3!=h&&a.addEventListener("change",this.boundHandleImageChange_),0==h&&(a.load(),h=a.getState()),2==h},l.prototype.renderIfReadyAndVisible=function(){var a=this.getLayer();a.getVisible()&&"ready"==a.getSourceState()&&a.changed()},l.prototype.disposeInternal=function(){delete this.layer_,c.prototype.disposeInternal.call(this)},l}(o9);const AS=Mbe;var Dbe=function(){var c=function(l,a){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,d){h.__proto__=d}||function(h,d){for(var f in d)Object.prototype.hasOwnProperty.call(d,f)&&(h[f]=d[f])})(l,a)};return function(l,a){if("function"!=typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");function h(){this.constructor=l}c(l,a),l.prototype=null===a?Object.create(a):(h.prototype=a.prototype,new h)}}(),IS=null,Ibe=function(c){function l(a){var h=c.call(this,a)||this;return h.container=null,h.tempTransform=[1,0,0,1,0,0],h.pixelTransform=[1,0,0,1,0,0],h.inversePixelTransform=[1,0,0,1,0,0],h.context=null,h.containerReused=!1,h.pixelContext_=null,h.frameState=null,h}return Dbe(l,c),l.prototype.getImageData=function(a,h,d){var f;IS||function Abe(){var c=document.createElement("canvas");c.width=1,c.height=1,IS=c.getContext("2d")}(),IS.clearRect(0,0,1,1);try{IS.drawImage(a,h,d,1,1,0,0,1,1),f=IS.getImageData(0,0,1,1).data}catch{return null}return f},l.prototype.getBackground=function(a){var d=this.getLayer().getBackground();return"function"==typeof d&&(d=d(a.viewState.resolution)),d||void 0},l.prototype.useContainer=function(a,h,d,f){var g,y,m=this.getLayer().getClassName();if(a&&a.className===m&&""===a.style.opacity&&1===d&&(!f||a.style.backgroundColor&&Fd(fS(a.style.backgroundColor),fS(f)))&&(v=a.firstElementChild)instanceof HTMLCanvasElement&&(y=v.getContext("2d")),y&&y.canvas.style.transform===h?(this.container=a,this.context=y,this.containerReused=!0):this.containerReused&&(this.container=null,this.context=null,this.containerReused=!1),!this.container){(g=document.createElement("div")).className=m;var v,_=g.style;_.position="absolute",_.width="100%",_.height="100%",f&&(_.backgroundColor=f),y=Qs(),g.appendChild(v=y.canvas),(_=v.style).position="absolute",_.left="0",_.transformOrigin="top left",this.container=g,this.context=y}},l.prototype.clipUnrotated=function(a,h,d){var f=fu(d),m=UC(d),g=hS(d),y=BC(d);ni(h.coordinateToPixelTransform,f),ni(h.coordinateToPixelTransform,m),ni(h.coordinateToPixelTransform,g),ni(h.coordinateToPixelTransform,y);var v=this.inversePixelTransform;ni(v,f),ni(v,m),ni(v,g),ni(v,y),a.save(),a.beginPath(),a.moveTo(Math.round(f[0]),Math.round(f[1])),a.lineTo(Math.round(m[0]),Math.round(m[1])),a.lineTo(Math.round(g[0]),Math.round(g[1])),a.lineTo(Math.round(y[0]),Math.round(y[1])),a.clip()},l.prototype.dispatchRenderEvent_=function(a,h,d){var f=this.getLayer();if(f.hasListener(a)){var m=new mS(a,this.inversePixelTransform,d,h);f.dispatchEvent(m)}},l.prototype.preRender=function(a,h){this.frameState=h,this.dispatchRenderEvent_("prerender",a,h)},l.prototype.postRender=function(a,h){this.dispatchRenderEvent_("postrender",a,h)},l.prototype.getRenderTransform=function(a,h,d,f,m,g,y){var S=f/h;return Do(this.tempTransform,m/2,g/2,S,-S,-d,-a[0]+y,-a[1])},l.prototype.getDataAtPixel=function(a,h,d){var f=ni(this.inversePixelTransform,a.slice()),m=this.context,y=this.getLayer().getExtent();if(y&&!Ll(y,ni(h.pixelToCoordinateTransform,a.slice())))return null;var x,_=Math.round(f[0]),S=Math.round(f[1]),b=this.pixelContext_;if(!b){var T=document.createElement("canvas");T.width=1,T.height=1,b=T.getContext("2d"),this.pixelContext_=b}b.clearRect(0,0,1,1);try{b.drawImage(m.canvas,_,S,1,1,0,0,1,1),x=b.getImageData(0,0,1,1).data}catch(E){return"SecurityError"===E.name?(this.pixelContext_=null,new Uint8Array):x}return 0===x[3]?null:x},l.prototype.disposeInternal=function(){delete this.frameState,c.prototype.disposeInternal.call(this)},l}(AS);const R2=Ibe;var RS={imageSmoothingEnabled:!1,msImageSmoothingEnabled:!1},D7={imageSmoothingEnabled:!0,msImageSmoothingEnabled:!0},Rbe=function(){var c=function(l,a){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,d){h.__proto__=d}||function(h,d){for(var f in d)Object.prototype.hasOwnProperty.call(d,f)&&(h[f]=d[f])})(l,a)};return function(l,a){if("function"!=typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");function h(){this.constructor=l}c(l,a),l.prototype=null===a?Object.create(a):(h.prototype=a.prototype,new h)}}(),Pbe=function(c){function l(a){var h=c.call(this,a)||this;return h.image_=null,h}return Rbe(l,c),l.prototype.getImage=function(){return this.image_?this.image_.getImage():null},l.prototype.prepareFrame=function(a){var h=a.layerStatesArray[a.layerIndex],d=a.pixelRatio,f=a.viewState,m=f.resolution,g=this.getLayer().getSource(),y=a.viewHints,v=a.extent;if(void 0!==h.extent&&(v=mc(v,wh(h.extent))),!y[0]&&!y[1]&&!Cy(v))if(g){var b=g.getImage(v,m,d,f.projection);b&&(this.loadImage(b)?this.image_=b:4===b.getState()&&(this.image_=null))}else this.image_=null;return!!this.image_},l.prototype.getData=function(a){var h=this.frameState;if(!h)return null;var d=this.getLayer(),f=ni(h.pixelToCoordinateTransform,a.slice()),m=d.getExtent();if(m&&!Ll(m,f))return null;var g=this.image_.getExtent(),y=this.image_.getImage(),v=fr(g),_=Math.floor(y.width*((f[0]-g[0])/v));if(_<0||_>=y.width)return null;var S=Ei(g),b=Math.floor(y.height*((g[3]-f[1])/S));return b<0||b>=y.height?null:this.getImageData(y,_,b)},l.prototype.renderFrame=function(a,h){var d=this.image_,f=d.getExtent(),m=d.getResolution(),g=d.getPixelRatio(),y=a.layerStatesArray[a.layerIndex],v=a.pixelRatio,_=a.viewState,S=_.center,T=a.size,x=v*m/(_.resolution*g),E=Math.round(T[0]*v),D=Math.round(T[1]*v),I=_.rotation;if(I){var M=Math.round(Math.sqrt(E*E+D*D));E=M,D=M}Do(this.pixelTransform,a.size[0]/2,a.size[1]/2,1/v,1/v,I,-E/2,-D/2),by(this.inversePixelTransform,this.pixelTransform);var L=kC(this.pixelTransform);this.useContainer(h,L,y.opacity,this.getBackground(a));var P=this.context,F=P.canvas;F.width!=E||F.height!=D?(F.width=E,F.height=D):this.containerReused||P.clearRect(0,0,E,D);var V=!1,z=!0;if(y.extent){var q=wh(y.extent);(V=(z=Mi(q,a.extent))&&!xa(q,a.extent))&&this.clipUnrotated(P,a,q)}var K=d.getImage(),se=Do(this.tempTransform,E/2,D/2,x,x,0,g*(f[0]-S[0])/m,g*(S[1]-f[3])/m);this.renderedResolution=m*v/g;var W=K.width*se[0],Q=K.height*se[3];if(this.getLayer().getSource().getInterpolate()||$n(P,RS),this.preRender(P,a),z&&W>=.5&&Q>=.5){var ie=se[4],ae=se[5],he=y.opacity,J=void 0;1!==he&&(J=P.globalAlpha,P.globalAlpha=he),P.drawImage(K,0,0,+K.width,+K.height,Math.round(ie),Math.round(ae),Math.round(W),Math.round(Q)),1!==he&&(P.globalAlpha=J)}return this.postRender(P,a),V&&P.restore(),$n(P,D7),L!==F.style.transform&&(F.style.transform=L),this.container},l}(R2);const A7=Pbe;var Lbe=function(){var c=function(l,a){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,d){h.__proto__=d}||function(h,d){for(var f in d)Object.prototype.hasOwnProperty.call(d,f)&&(h[f]=d[f])})(l,a)};return function(l,a){if("function"!=typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");function h(){this.constructor=l}c(l,a),l.prototype=null===a?Object.create(a):(h.prototype=a.prototype,new h)}}(),Obe=function(c){function l(a){return c.call(this,a)||this}return Lbe(l,c),l.prototype.createRenderer=function(){return new A7(this)},l.prototype.getData=function(a){return c.prototype.getData.call(this,a)},l}(E7);const Xd=Obe;var Nbe=function(){var c=function(l,a){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,d){h.__proto__=d}||function(h,d){for(var f in d)Object.prototype.hasOwnProperty.call(d,f)&&(h[f]=d[f])})(l,a)};return function(l,a){if("function"!=typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");function h(){this.constructor=l}c(l,a),l.prototype=null===a?Object.create(a):(h.prototype=a.prototype,new h)}}(),Fbe=function(c){function l(a,h,d){var f=c.call(this)||this,m=d||{};return f.tileCoord=a,f.state=h,f.interimTile=null,f.key="",f.transition_=void 0===m.transition?250:m.transition,f.transitionStarts_={},f.interpolate=!!m.interpolate,f}return Nbe(l,c),l.prototype.changed=function(){this.dispatchEvent("change")},l.prototype.release=function(){},l.prototype.getKey=function(){return this.key+"/"+this.tileCoord},l.prototype.getInterimTile=function(){if(!this.interimTile)return this;var a=this.interimTile;do{if(2==a.getState())return this.transition_=0,a;a=a.interimTile}while(a);return this},l.prototype.refreshInterimChain=function(){if(this.interimTile){var a=this.interimTile,h=this;do{if(2==a.getState()){a.interimTile=null;break}1==a.getState()?h=a:0==a.getState()?h.interimTile=a.interimTile:h=a,a=h.interimTile}while(a)}},l.prototype.getTileCoord=function(){return this.tileCoord},l.prototype.getState=function(){return this.state},l.prototype.setState=function(a){if(3!==this.state&&this.state>a)throw new Error("Tile load sequence violation");this.state=a,this.changed()},l.prototype.load=function(){_n()},l.prototype.getAlpha=function(a,h){if(!this.transition_)return 1;var d=this.transitionStarts_[a];if(d){if(-1===d)return 1}else this.transitionStarts_[a]=d=h;var f=h-d+1e3/60;return f>=this.transition_?1:H9(f/this.transition_)},l.prototype.inTransition=function(a){return!!this.transition_&&-1!==this.transitionStarts_[a]},l.prototype.endTransition=function(a){this.transition_&&(this.transitionStarts_[a]=-1)},l}(My);const fx=Fbe;var kbe=function(){var c=function(l,a){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,d){h.__proto__=d}||function(h,d){for(var f in d)Object.prototype.hasOwnProperty.call(d,f)&&(h[f]=d[f])})(l,a)};return function(l,a){if("function"!=typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");function h(){this.constructor=l}c(l,a),l.prototype=null===a?Object.create(a):(h.prototype=a.prototype,new h)}}(),Vbe=function(c){function l(a,h,d,f){var m=c.call(this)||this;return m.extent=a,m.pixelRatio_=d,m.resolution=h,m.state=f,m}return kbe(l,c),l.prototype.changed=function(){this.dispatchEvent("change")},l.prototype.getExtent=function(){return this.extent},l.prototype.getImage=function(){return _n()},l.prototype.getPixelRatio=function(){return this.pixelRatio_},l.prototype.getResolution=function(){return this.resolution},l.prototype.getState=function(){return this.state},l.prototype.load=function(){_n()},l}(My);const P2=Vbe;var Bbe=function(){var c=function(l,a){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,d){h.__proto__=d}||function(h,d){for(var f in d)Object.prototype.hasOwnProperty.call(d,f)&&(h[f]=d[f])})(l,a)};return function(l,a){if("function"!=typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");function h(){this.constructor=l}c(l,a),l.prototype=null===a?Object.create(a):(h.prototype=a.prototype,new h)}}(),Ube=function(c){function l(a,h,d,f,m,g){var y=c.call(this,a,h,d,0)||this;return y.src_=f,y.image_=new Image,null!==m&&(y.image_.crossOrigin=m),y.unlisten_=null,y.state=0,y.imageLoadFunction_=g,y}return Bbe(l,c),l.prototype.getImage=function(){return this.image_},l.prototype.handleImageError_=function(){this.state=3,this.unlistenImage_(),this.changed()},l.prototype.handleImageLoad_=function(){void 0===this.resolution&&(this.resolution=Ei(this.extent)/this.image_.height),this.state=2,this.unlistenImage_(),this.changed()},l.prototype.load=function(){(0==this.state||3==this.state)&&(this.state=1,this.changed(),this.imageLoadFunction_(this,this.src_),this.unlisten_=L2(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))},l.prototype.setImage=function(a){this.image_=a,this.resolution=Ei(this.extent)/this.image_.height},l.prototype.unlistenImage_=function(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)},l}(P2);function L2(c,l,a){var h=c,d=!0,f=!1,m=!1,g=[pS(h,"load",function(){m=!0,f||l()})];return h.src&&Bve?(f=!0,h.decode().then(function(){d&&l()}).catch(function(y){d&&(m?l():a())})):g.push(pS(h,"error",a)),function(){d=!1,g.forEach(ri)}}const I7=Ube;var Gbe=function(){var c=function(l,a){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,d){h.__proto__=d}||function(h,d){for(var f in d)Object.prototype.hasOwnProperty.call(d,f)&&(h[f]=d[f])})(l,a)};return function(l,a){if("function"!=typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");function h(){this.constructor=l}c(l,a),l.prototype=null===a?Object.create(a):(h.prototype=a.prototype,new h)}}(),zbe=function(c){function l(a,h,d,f,m,g){var y=c.call(this,a,h,g)||this;return y.crossOrigin_=f,y.src_=d,y.key=d,y.image_=new Image,null!==f&&(y.image_.crossOrigin=f),y.unlisten_=null,y.tileLoadFunction_=m,y}return Gbe(l,c),l.prototype.getImage=function(){return this.image_},l.prototype.setImage=function(a){this.image_=a,this.state=2,this.unlistenImage_(),this.changed()},l.prototype.handleImageError_=function(){this.state=3,this.unlistenImage_(),this.image_=function Hbe(){var c=Qs(1,1);return c.fillStyle="rgba(0,0,0,0)",c.fillRect(0,0,1,1),c.canvas}(),this.changed()},l.prototype.handleImageLoad_=function(){var a=this.image_;this.state=a.naturalWidth&&a.naturalHeight?2:4,this.unlistenImage_(),this.changed()},l.prototype.load=function(){3==this.state&&(this.state=0,this.image_=new Image,null!==this.crossOrigin_&&(this.image_.crossOrigin=this.crossOrigin_)),0==this.state&&(this.state=1,this.changed(),this.tileLoadFunction_(this,this.src_),this.unlisten_=L2(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))},l.prototype.unlistenImage_=function(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)},l}(fx);const R7=zbe;var Wbe=function(){function c(l,a,h,d,f,m){this.sourceProj_=l,this.targetProj_=a;var g={},y=gu(this.targetProj_,this.sourceProj_);this.transformInv_=function(L){var P=L[0]+"/"+L[1];return g[P]||(g[P]=y(L)),g[P]},this.maxSourceExtent_=d,this.errorThresholdSquared_=f*f,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!d&&!!this.sourceProj_.getExtent()&&fr(d)==fr(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?fr(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?fr(this.targetProj_.getExtent()):null;var v=fu(h),_=UC(h),S=hS(h),b=BC(h),T=this.transformInv_(v),x=this.transformInv_(_),E=this.transformInv_(S),D=this.transformInv_(b),I=10+(m?Math.max(0,Math.ceil(t_e(VC(h)/(m*m*256*256)))):0);if(this.addQuad_(v,_,S,b,T,x,E,D,I),this.wrapsXInSource_){var M=1/0;this.triangles_.forEach(function(L,P,F){M=Math.min(M,L.source[0][0],L.source[1][0],L.source[2][0])}),this.triangles_.forEach(function(L){if(Math.max(L.source[0][0],L.source[1][0],L.source[2][0])-M>this.sourceWorldWidth_/2){var P=[[L.source[0][0],L.source[0][1]],[L.source[1][0],L.source[1][1]],[L.source[2][0],L.source[2][1]]];P[0][0]-M>this.sourceWorldWidth_/2&&(P[0][0]-=this.sourceWorldWidth_),P[1][0]-M>this.sourceWorldWidth_/2&&(P[1][0]-=this.sourceWorldWidth_),P[2][0]-M>this.sourceWorldWidth_/2&&(P[2][0]-=this.sourceWorldWidth_);var F=Math.min(P[0][0],P[1][0],P[2][0]);Math.max(P[0][0],P[1][0],P[2][0])-F<this.sourceWorldWidth_/2&&(L.source=P)}}.bind(this))}g={}}return c.prototype.addTriangle_=function(l,a,h,d,f,m){this.triangles_.push({source:[d,f,m],target:[l,a,h]})},c.prototype.addQuad_=function(l,a,h,d,f,m,g,y,v){var _=FL([f,m,g,y]),S=this.sourceWorldWidth_?fr(_)/this.sourceWorldWidth_:null,b=this.sourceWorldWidth_,T=this.sourceProj_.canWrapX()&&S>.5&&S<1,x=!1;if(v>0&&(this.targetProj_.isGlobal()&&this.targetWorldWidth_&&(x=fr(FL([l,a,h,d]))/this.targetWorldWidth_>.25||x),!T&&this.sourceProj_.isGlobal()&&S&&(x=S>.25||x)),!(!x&&this.maxSourceExtent_&&isFinite(_[0])&&isFinite(_[1])&&isFinite(_[2])&&isFinite(_[3]))||Mi(_,this.maxSourceExtent_)){var I=0;if(!(x||isFinite(f[0])&&isFinite(f[1])&&isFinite(m[0])&&isFinite(m[1])&&isFinite(g[0])&&isFinite(g[1])&&isFinite(y[0])&&isFinite(y[1])))if(v>0)x=!0;else if(1!=(I=(isFinite(f[0])&&isFinite(f[1])?0:8)+(isFinite(m[0])&&isFinite(m[1])?0:4)+(isFinite(g[0])&&isFinite(g[1])?0:2)+(isFinite(y[0])&&isFinite(y[1])?0:1))&&2!=I&&4!=I&&8!=I)return;if(v>0){if(!x){var L=this.transformInv_([(l[0]+h[0])/2,(l[1]+h[1])/2]),P=void 0;P=T?(Vd(f[0],b)+Vd(g[0],b))/2-Vd(L[0],b):(f[0]+g[0])/2-L[0];var V=(f[1]+g[1])/2-L[1];x=P*P+V*V>this.errorThresholdSquared_}if(x){if(Math.abs(l[0]-h[0])<=Math.abs(l[1]-h[1])){var q=[(a[0]+h[0])/2,(a[1]+h[1])/2],K=this.transformInv_(q),se=[(d[0]+l[0])/2,(d[1]+l[1])/2],W=this.transformInv_(se);this.addQuad_(l,a,q,se,f,m,K,W,v-1),this.addQuad_(se,q,h,d,W,K,g,y,v-1)}else{var Q=[(l[0]+a[0])/2,(l[1]+a[1])/2],ie=this.transformInv_(Q),ae=[(h[0]+d[0])/2,(h[1]+d[1])/2],he=this.transformInv_(ae);this.addQuad_(l,Q,ae,d,f,ie,he,y,v-1),this.addQuad_(Q,a,h,ae,ie,m,g,he,v-1)}return}}if(T){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}0==(11&I)&&this.addTriangle_(l,h,d,f,g,y),0==(14&I)&&this.addTriangle_(l,h,a,f,g,m),I&&(0==(13&I)&&this.addTriangle_(a,d,l,m,y,f),0==(7&I)&&this.addTriangle_(a,d,h,m,y,g))}},c.prototype.calculateSourceExtent=function(){var l=[1/0,1/0,-1/0,-1/0];return this.triangles_.forEach(function(a,h,d){var f=a.source;Ty(l,f[0]),Ty(l,f[1]),Ty(l,f[2])}),l},c.prototype.getTriangles=function(){return this.triangles_},c}();const L7=Wbe;var O2;function O7(c,l,a,h,d){c.beginPath(),c.moveTo(0,0),c.lineTo(l,a),c.lineTo(h,d),c.closePath(),c.save(),c.clip(),c.fillRect(0,0,Math.max(l,h)+1,Math.max(a,d)),c.restore()}function N2(c,l){return Math.abs(c[4*l]-210)>2||Math.abs(c[4*l+3]-191.25)>2}function PS(c,l,a,h){var d=Ka(a,l,c),f=ox(l,h,a),m=l.getMetersPerUnit();void 0!==m&&(f*=m);var g=c.getMetersPerUnit();void 0!==g&&(f/=g);var y=c.getExtent();if(!y||Ll(y,d)){var v=ox(c,f,d)/f;isFinite(v)&&v>0&&(f/=v)}return f}function N7(c,l,a,h,d,f,m,g,y,v,_,S){var b=Qs(Math.round(a*c),Math.round(a*l));if(S||$n(b,RS),0===y.length)return b.canvas;function T(P){return Math.round(P*a)/a}b.scale(a,a),b.globalCompositeOperation="lighter";var x=[1/0,1/0,-1/0,-1/0];y.forEach(function(P,F,V){UL(x,P.extent)});var E=fr(x),D=Ei(x),I=Qs(Math.round(a*E/h),Math.round(a*D/h));S||$n(I,RS);var M=a/h;y.forEach(function(P,F,V){var z=P.extent[0]-x[0],q=-(P.extent[3]-x[3]),K=fr(P.extent),se=Ei(P.extent);P.image.width>0&&P.image.height>0&&I.drawImage(P.image,v,v,P.image.width-2*v,P.image.height-2*v,z*M,q*M,K*M,se*M)});var L=fu(m);return g.getTriangles().forEach(function(P,F,V){var z=P.source,q=P.target,K=z[0][0],se=z[0][1],W=z[1][0],Q=z[1][1],ie=z[2][0],ae=z[2][1],he=T((q[0][0]-L[0])/f),J=T(-(q[0][1]-L[1])/f),ce=T((q[1][0]-L[0])/f),be=T(-(q[1][1]-L[1])/f),we=T((q[2][0]-L[0])/f),Ce=T(-(q[2][1]-L[1])/f),Te=K,fe=se;K=0,se=0;var Ve=function n_e(c){for(var l=c.length,a=0;a<l;a++){for(var h=a,d=Math.abs(c[a][a]),f=a+1;f<l;f++){var m=Math.abs(c[f][a]);m>d&&(d=m,h=f)}if(0===d)return null;var g=c[h];c[h]=c[a],c[a]=g;for(var y=a+1;y<l;y++)for(var v=-c[y][a]/c[a][a],_=a;_<l+1;_++)a==_?c[y][_]=0:c[y][_]+=v*c[a][_]}for(var S=new Array(l),b=l-1;b>=0;b--){S[b]=c[b][l]/c[b][b];for(var T=b-1;T>=0;T--)c[T][l]-=c[T][b]*S[b]}return S}([[W-=Te,Q-=fe,0,0,ce-he],[ie-=Te,ae-=fe,0,0,we-he],[0,0,W,Q,be-J],[0,0,ie,ae,Ce-J]]);if(Ve){if(b.save(),b.beginPath(),function Xbe(){if(void 0===O2){var c=document.createElement("canvas").getContext("2d");c.globalCompositeOperation="lighter",c.fillStyle="rgba(210, 0, 0, 0.75)",O7(c,4,5,4,0),O7(c,4,5,0,5);var l=c.getImageData(0,0,3,3).data;O2=N2(l,0)||N2(l,4)||N2(l,8)}return O2}()||!S){b.moveTo(ce,be);for(var en=he-ce,ut=J-be,Fe=0;Fe<4;Fe++)b.lineTo(ce+T((Fe+1)*en/4),be+T(Fe*ut/3)),3!=Fe&&b.lineTo(ce+T((Fe+1)*en/4),be+T((Fe+1)*ut/3));b.lineTo(we,Ce)}else b.moveTo(ce,be),b.lineTo(he,J),b.lineTo(we,Ce);b.clip(),b.transform(Ve[0],Ve[2],Ve[1],Ve[3],he,J),b.translate(x[0]-Te,x[3]-fe),b.scale(h/a,-h/a),b.drawImage(I.canvas,0,0),b.restore()}}),_&&(b.save(),b.globalCompositeOperation="source-over",b.strokeStyle="black",b.lineWidth=1,g.getTriangles().forEach(function(P,F,V){var z=P.target,q=(z[0][0]-L[0])/f,K=-(z[0][1]-L[1])/f,se=(z[1][0]-L[0])/f,W=-(z[1][1]-L[1])/f,Q=(z[2][0]-L[0])/f,ie=-(z[2][1]-L[1])/f;b.beginPath(),b.moveTo(se,W),b.lineTo(q,K),b.lineTo(Q,ie),b.closePath(),b.stroke()}),b.restore()),b.canvas}var $be=function(){var c=function(l,a){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,d){h.__proto__=d}||function(h,d){for(var f in d)Object.prototype.hasOwnProperty.call(d,f)&&(h[f]=d[f])})(l,a)};return function(l,a){if("function"!=typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");function h(){this.constructor=l}c(l,a),l.prototype=null===a?Object.create(a):(h.prototype=a.prototype,new h)}}(),Ybe=function(c){function l(a,h,d,f,m,g,y,v,_,S,b,T){var x=c.call(this,m,0,{interpolate:!!T})||this;x.renderEdges_=void 0!==b&&b,x.pixelRatio_=y,x.gutter_=v,x.canvas_=null,x.sourceTileGrid_=h,x.targetTileGrid_=f,x.wrappedTileCoord_=g||m,x.sourceTiles_=[],x.sourcesListenerKeys_=null,x.sourceZ_=0;var E=f.getTileCoordExtent(x.wrappedTileCoord_),D=x.targetTileGrid_.getExtent(),I=x.sourceTileGrid_.getExtent(),M=D?mc(E,D):E;if(0===VC(M))return x.state=4,x;var L=a.getExtent();L&&(I=I?mc(I,L):L);var P=f.getResolution(x.wrappedTileCoord_[0]),F=function qbe(c,l,a,h){var d=Jo(a),f=PS(c,l,d,h);return(!isFinite(f)||f<=0)&&qH(a,function(m){return f=PS(c,l,m,h),isFinite(f)&&f>0}),f}(a,d,M,P);if(!isFinite(F)||F<=0)return x.state=4,x;if(x.triangulation_=new L7(a,d,M,I,F*(void 0!==S?S:.5),P),0===x.triangulation_.getTriangles().length)return x.state=4,x;x.sourceZ_=h.getZForResolution(F);var z=x.triangulation_.calculateSourceExtent();if(I&&(a.canWrapX()?(z[1]=qn(z[1],I[1],I[3]),z[3]=qn(z[3],I[1],I[3])):z=mc(z,I)),VC(z)){for(var q=h.getTileRangeForExtentAndZ(z,x.sourceZ_),K=q.minX;K<=q.maxX;K++)for(var se=q.minY;se<=q.maxY;se++){var W=_(x.sourceZ_,K,se,y);W&&x.sourceTiles_.push(W)}0===x.sourceTiles_.length&&(x.state=4)}else x.state=4;return x}return $be(l,c),l.prototype.getImage=function(){return this.canvas_},l.prototype.reproject_=function(){var a=[];if(this.sourceTiles_.forEach(function(_,S,b){_&&2==_.getState()&&a.push({extent:this.sourceTileGrid_.getTileCoordExtent(_.tileCoord),image:_.getImage()})}.bind(this)),this.sourceTiles_.length=0,0===a.length)this.state=3;else{var h=this.wrappedTileCoord_[0],d=this.targetTileGrid_.getTileSize(h),f="number"==typeof d?d:d[0],m="number"==typeof d?d:d[1],g=this.targetTileGrid_.getResolution(h),y=this.sourceTileGrid_.getResolution(this.sourceZ_),v=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=N7(f,m,this.pixelRatio_,y,this.sourceTileGrid_.getExtent(),g,v,this.triangulation_,a,this.gutter_,this.renderEdges_,this.interpolate),this.state=2}this.changed()},l.prototype.load=function(){if(0==this.state){this.state=1,this.changed();var a=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(function(h,d,f){var m=h.getState();if(0==m||1==m){a++;var g=zn(h,"change",function(y){var v=h.getState();(2==v||3==v||4==v)&&(ri(g),0==--a&&(this.unlistenSources_(),this.reproject_()))},this);this.sourcesListenerKeys_.push(g)}}.bind(this)),0===a?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach(function(h,d,f){0==h.getState()&&h.load()})}},l.prototype.unlistenSources_=function(){this.sourcesListenerKeys_.forEach(ri),this.sourcesListenerKeys_=null},l}(fx);const F7=Ybe;var k7=function(){function c(l,a,h,d){this.minX=l,this.maxX=a,this.minY=h,this.maxY=d}return c.prototype.contains=function(l){return this.containsXY(l[1],l[2])},c.prototype.containsTileRange=function(l){return this.minX<=l.minX&&l.maxX<=this.maxX&&this.minY<=l.minY&&l.maxY<=this.maxY},c.prototype.containsXY=function(l,a){return this.minX<=l&&l<=this.maxX&&this.minY<=a&&a<=this.maxY},c.prototype.equals=function(l){return this.minX==l.minX&&this.minY==l.minY&&this.maxX==l.maxX&&this.maxY==l.maxY},c.prototype.extend=function(l){l.minX<this.minX&&(this.minX=l.minX),l.maxX>this.maxX&&(this.maxX=l.maxX),l.minY<this.minY&&(this.minY=l.minY),l.maxY>this.maxY&&(this.maxY=l.maxY)},c.prototype.getHeight=function(){return this.maxY-this.minY+1},c.prototype.getSize=function(){return[this.getWidth(),this.getHeight()]},c.prototype.getWidth=function(){return this.maxX-this.minX+1},c.prototype.intersects=function(l){return this.minX<=l.maxX&&this.maxX>=l.minX&&this.minY<=l.maxY&&this.maxY>=l.minY},c}();function ky(c,l,a,h,d){return void 0!==d?(d.minX=c,d.maxX=l,d.minY=a,d.maxY=h,d):new k7(c,l,a,h)}const V7=k7;var Zbe=function(){var c=function(l,a){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,d){h.__proto__=d}||function(h,d){for(var f in d)Object.prototype.hasOwnProperty.call(d,f)&&(h[f]=d[f])})(l,a)};return function(l,a){if("function"!=typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");function h(){this.constructor=l}c(l,a),l.prototype=null===a?Object.create(a):(h.prototype=a.prototype,new h)}}(),Kbe=function(c){function l(a){var h=c.call(this,a)||this;return h.extentChanged=!0,h.renderedExtent_=null,h.renderedProjection=null,h.renderedTiles=[],h.newTiles_=!1,h.tmpExtent=[1/0,1/0,-1/0,-1/0],h.tmpTileRange_=new V7(0,0,0,0),h}return Zbe(l,c),l.prototype.isDrawableTile=function(a){var h=this.getLayer(),d=a.getState(),f=h.getUseInterimTilesOnError();return 2==d||4==d||3==d&&!f},l.prototype.getTile=function(a,h,d,f){var m=f.pixelRatio,g=f.viewState.projection,y=this.getLayer(),_=y.getSource().getTile(a,h,d,m,g);return 3==_.getState()&&(y.getUseInterimTilesOnError()?y.getPreload()>0&&(this.newTiles_=!0):_.setState(2)),this.isDrawableTile(_)||(_=_.getInterimTile()),_},l.prototype.getData=function(a){var h=this.frameState;if(!h)return null;var d=this.getLayer(),f=ni(h.pixelToCoordinateTransform,a.slice()),m=d.getExtent();if(m&&!Ll(m,f))return null;for(var g=h.pixelRatio,y=h.viewState.projection,v=h.viewState,_=d.getRenderSource(),S=_.getTileGridForProjection(v.projection),b=_.getTilePixelRatio(h.pixelRatio),T=S.getZForResolution(v.resolution);T>=S.getMinZoom();--T){var x=S.getTileCoordForCoordAndZ(f,T),E=_.getTile(T,x[1],x[2],g,y);if(!(E instanceof R7||E instanceof F7))return null;if(2===E.getState()){var D=S.getOrigin(T),I=uo(S.getTileSize(T)),M=S.getResolution(T),L=Math.floor(b*((f[0]-D[0])/M-x[1]*I[0])),P=Math.floor(b*((D[1]-f[1])/M-x[2]*I[1]));return this.getImageData(E.getImage(),L,P)}}return null},l.prototype.loadedTileCallback=function(a,h,d){return!!this.isDrawableTile(d)&&c.prototype.loadedTileCallback.call(this,a,h,d)},l.prototype.prepareFrame=function(a){return!!this.getLayer().getSource()},l.prototype.renderFrame=function(a,h){var d=a.layerStatesArray[a.layerIndex],f=a.viewState,m=f.projection,g=f.resolution,y=f.center,v=f.rotation,_=a.pixelRatio,S=this.getLayer(),b=S.getSource(),T=b.getRevision(),x=b.getTileGridForProjection(m),E=x.getZForResolution(g,b.zDirection),D=x.getResolution(E),I=a.extent,M=d.extent&&wh(d.extent);M&&(I=mc(I,wh(d.extent)));var L=b.getTilePixelRatio(_),P=Math.round(a.size[0]*L),F=Math.round(a.size[1]*L);if(v){var V=Math.round(Math.sqrt(P*P+F*F));P=V,F=V}var z=D*P/2/L,q=D*F/2/L,K=[y[0]-z,y[1]-q,y[0]+z,y[1]+q],se=x.getTileRangeForExtentAndZ(I,E),W={};W[E]={};var Q=this.createLoadedTileFinder(b,m,W),ie=this.tmpExtent,ae=this.tmpTileRange_;this.newTiles_=!1;for(var he=se.minX;he<=se.maxX;++he)for(var J=se.minY;J<=se.maxY;++J){var ce=this.getTile(E,he,J,a);if(this.isDrawableTile(ce)){var be=tn(this);if(2==ce.getState()){W[E][ce.tileCoord.toString()]=ce;var we=ce.inTransition(be);!this.newTiles_&&(we||-1===this.renderedTiles.indexOf(ce))&&(this.newTiles_=!0)}if(1===ce.getAlpha(be,a.time))continue}var Ce=x.getTileCoordChildTileRange(ce.tileCoord,ae,ie),Te=!1;Ce&&(Te=Q(E+1,Ce)),Te||x.forEachTileCoordParentTileRange(ce.tileCoord,Q,ae,ie)}var fe=D/g;Do(this.pixelTransform,a.size[0]/2,a.size[1]/2,1/L,1/L,v,-P/2,-F/2);var $e=kC(this.pixelTransform);this.useContainer(h,$e,d.opacity,this.getBackground(a));var Ve=this.context,De=Ve.canvas;by(this.inversePixelTransform,this.pixelTransform),Do(this.tempTransform,P/2,F/2,fe,fe,0,-P/2,-F/2),De.width!=P||De.height!=F?(De.width=P,De.height=F):this.containerReused||Ve.clearRect(0,0,P,F),M&&this.clipUnrotated(Ve,a,M),b.getInterpolate()||$n(Ve,RS),this.preRender(Ve,a),this.renderedTiles.length=0;var ut,Fe,ht,en=Object.keys(W).map(Number);en.sort(Pp),1!==d.opacity||this.containerReused&&!b.getOpaque(a.viewState.projection)?(ut=[],Fe=[]):en=en.reverse();for(var an=en.length-1;an>=0;--an){var Wt=en[an],Qe=b.getTilePixelSize(Wt,_,m),at=x.getResolution(Wt)/D,Rt=Qe[0]*at*fe,bt=Qe[1]*at*fe,Jt=x.getTileCoordForCoordAndZ(fu(K),Wt),Ye=x.getTileCoordExtent(Jt),Cn=ni(this.tempTransform,[L*(Ye[0]-K[0])/D,L*(K[3]-Ye[3])/D]),ar=L*b.getGutterForProjection(m),lr=W[Wt];for(var pe in lr){var ne=(ce=lr[pe]).tileCoord,ze=Jt[1]-ne[1],Ct=Math.round(Cn[0]-(ze-1)*Rt),$t=Jt[2]-ne[2],Xe=Math.round(Cn[1]-($t-1)*bt),qt=Ct-(he=Math.round(Cn[0]-ze*Rt)),me=Xe-(J=Math.round(Cn[1]-$t*bt)),je=E===Wt,lt=!1;if(!(we=je&&1!==ce.getAlpha(tn(this),a.time)))if(ut){ht=[he,J,he+qt,J,he+qt,J+me,he,J+me];for(var yt=0,_e=ut.length;yt<_e;++yt)if(E!==Wt&&Wt<Fe[yt]){var Tt=ut[yt];Mi([he,J,he+qt,J+me],[Tt[0],Tt[3],Tt[4],Tt[7]])&&(lt||(Ve.save(),lt=!0),Ve.beginPath(),Ve.moveTo(ht[0],ht[1]),Ve.lineTo(ht[2],ht[3]),Ve.lineTo(ht[4],ht[5]),Ve.lineTo(ht[6],ht[7]),Ve.moveTo(Tt[6],Tt[7]),Ve.lineTo(Tt[4],Tt[5]),Ve.lineTo(Tt[2],Tt[3]),Ve.lineTo(Tt[0],Tt[1]),Ve.clip())}ut.push(ht),Fe.push(Wt)}else Ve.clearRect(he,J,qt,me);this.drawTileImage(ce,a,he,J,qt,me,ar,je),ut&&!we?(lt&&Ve.restore(),this.renderedTiles.unshift(ce)):this.renderedTiles.push(ce),this.updateUsedTiles(a.usedTiles,b,ce)}}this.renderedRevision=T,this.renderedResolution=D,this.extentChanged=!this.renderedExtent_||!Ol(this.renderedExtent_,K),this.renderedExtent_=K,this.renderedPixelRatio=_,this.renderedProjection=m,this.manageTilePyramid(a,b,x,_,m,I,E,S.getPreload()),this.scheduleExpireCache(a,b),this.postRender(Ve,a),d.extent&&Ve.restore(),$n(Ve,D7),$e!==De.style.transform&&(De.style.transform=$e);var It=_9(d.opacity),sn=this.container;return It!==sn.style.opacity&&(sn.style.opacity=It),this.container},l.prototype.drawTileImage=function(a,h,d,f,m,g,y,v){var _=this.getTileImage(a);if(_){var S=tn(this),b=v?a.getAlpha(S,h.time):1,T=b!==this.context.globalAlpha;T&&(this.context.save(),this.context.globalAlpha=b),this.context.drawImage(_,y,y,_.width-2*y,_.height-2*y,d,f,m,g),T&&this.context.restore(),1!==b?h.animate=!0:v&&a.endTransition(S)}},l.prototype.getImage=function(){var a=this.context;return a?a.canvas:null},l.prototype.getTileImage=function(a){return a.getImage()},l.prototype.scheduleExpireCache=function(a,h){if(h.canExpireCache()){var d=function(f,m,g){var y=tn(f);y in g.usedTiles&&f.expireCache(g.viewState.projection,g.usedTiles[y])}.bind(null,h);a.postRenderFunctions.push(d)}},l.prototype.updateUsedTiles=function(a,h,d){var f=tn(h);f in a||(a[f]={}),a[f][d.getKey()]=!0},l.prototype.manageTilePyramid=function(a,h,d,f,m,g,y,v,_){var S=tn(h);S in a.wantedTiles||(a.wantedTiles[S]={});var D,I,M,L,P,F,b=a.wantedTiles[S],T=a.tileQueue,E=0;for(F=d.getMinZoom();F<=y;++F)for(I=d.getTileRangeForExtentAndZ(g,F,I),M=d.getResolution(F),L=I.minX;L<=I.maxX;++L)for(P=I.minY;P<=I.maxY;++P)y-F<=v?(++E,0==(D=h.getTile(F,L,P,f,m)).getState()&&(b[D.getKey()]=!0,T.isKeyQueued(D.getKey())||T.enqueue([D,S,d.getTileCoordCenter(D.tileCoord),M])),void 0!==_&&_(D)):h.useTile(F,L,P,m);h.updateCacheSize(E,m)},l}(R2);const B7=Kbe;var Qbe=function(){var c=function(l,a){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,d){h.__proto__=d}||function(h,d){for(var f in d)Object.prototype.hasOwnProperty.call(d,f)&&(h[f]=d[f])})(l,a)};return function(l,a){if("function"!=typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");function h(){this.constructor=l}c(l,a),l.prototype=null===a?Object.create(a):(h.prototype=a.prototype,new h)}}(),Jbe=function(c){function l(a){return c.call(this,a)||this}return Qbe(l,c),l.prototype.createRenderer=function(){return new B7(this)},l}(T7);const Su=Jbe;var LS={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},px=[LS.FILL],qd=[LS.STROKE],Yp=[LS.BEGIN_PATH],U7=[LS.CLOSE_PATH];const Rn=LS;var eTe=function(){function c(){}return c.prototype.drawCustom=function(l,a,h,d){},c.prototype.drawGeometry=function(l){},c.prototype.setStyle=function(l){},c.prototype.drawCircle=function(l,a){},c.prototype.drawFeature=function(l,a){},c.prototype.drawGeometryCollection=function(l,a){},c.prototype.drawLineString=function(l,a){},c.prototype.drawMultiLineString=function(l,a){},c.prototype.drawMultiPoint=function(l,a){},c.prototype.drawMultiPolygon=function(l,a){},c.prototype.drawPoint=function(l,a){},c.prototype.drawPolygon=function(l,a){},c.prototype.drawText=function(l,a){},c.prototype.setFillStrokeStyle=function(l,a){},c.prototype.setImageStyle=function(l,a){},c.prototype.setTextStyle=function(l,a){},c}();const G7=eTe;var tTe=function(){var c=function(l,a){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,d){h.__proto__=d}||function(h,d){for(var f in d)Object.prototype.hasOwnProperty.call(d,f)&&(h[f]=d[f])})(l,a)};return function(l,a){if("function"!=typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");function h(){this.constructor=l}c(l,a),l.prototype=null===a?Object.create(a):(h.prototype=a.prototype,new h)}}(),nTe=function(c){function l(a,h,d,f){var m=c.call(this)||this;return m.tolerance=a,m.maxExtent=h,m.pixelRatio=f,m.maxLineWidth=0,m.resolution=d,m.beginGeometryInstruction1_=null,m.beginGeometryInstruction2_=null,m.bufferedMaxExtent_=null,m.instructions=[],m.coordinates=[],m.tmpCoordinate_=[],m.hitDetectionInstructions=[],m.state={},m}return tTe(l,c),l.prototype.applyPixelRatio=function(a){var h=this.pixelRatio;return 1==h?a:a.map(function(d){return d*h})},l.prototype.appendFlatPointCoordinates=function(a,h){for(var d=this.getBufferedMaxExtent(),f=this.tmpCoordinate_,m=this.coordinates,g=m.length,y=0,v=a.length;y<v;y+=h)f[0]=a[y],f[1]=a[y+1],Ll(d,f)&&(m[g++]=f[0],m[g++]=f[1]);return g},l.prototype.appendFlatLineCoordinates=function(a,h,d,f,m,g){var y=this.coordinates,v=y.length,_=this.getBufferedMaxExtent();g&&(h+=f);var E,D,I,S=a[h],b=a[h+1],T=this.tmpCoordinate_,x=!0;for(E=h+f;E<d;E+=f)T[0]=a[E],T[1]=a[E+1],(I=kL(_,T))!==D?(x&&(y[v++]=S,y[v++]=b,x=!1),y[v++]=T[0],y[v++]=T[1]):1===I?(y[v++]=T[0],y[v++]=T[1],x=!1):x=!0,S=T[0],b=T[1],D=I;return(m&&x||E===h+f)&&(y[v++]=S,y[v++]=b),v},l.prototype.drawCustomCoordinates_=function(a,h,d,f,m){for(var g=0,y=d.length;g<y;++g){var v=d[g],_=this.appendFlatLineCoordinates(a,h,v,f,!1,!1);m.push(_),h=v}return h},l.prototype.drawCustom=function(a,h,d,f){this.beginGeometry(a,h);var v,_,S,b,T,m=a.getType(),g=a.getStride(),y=this.coordinates.length;switch(m){case"MultiPolygon":v=a.getOrientedFlatCoordinates(),b=[];var x=a.getEndss();T=0;for(var E=0,D=x.length;E<D;++E){var I=[];T=this.drawCustomCoordinates_(v,T,x[E],g,I),b.push(I)}this.instructions.push([Rn.CUSTOM,y,b,a,d,m2]),this.hitDetectionInstructions.push([Rn.CUSTOM,y,b,a,f||d,m2]);break;case"Polygon":case"MultiLineString":S=[],v="Polygon"==m?a.getOrientedFlatCoordinates():a.getFlatCoordinates(),T=this.drawCustomCoordinates_(v,0,a.getEnds(),g,S),this.instructions.push([Rn.CUSTOM,y,S,a,d,ES]),this.hitDetectionInstructions.push([Rn.CUSTOM,y,S,a,f||d,ES]);break;case"LineString":case"Circle":v=a.getFlatCoordinates(),_=this.appendFlatLineCoordinates(v,0,v.length,g,!1,!1),this.instructions.push([Rn.CUSTOM,y,_,a,d,Hd]),this.hitDetectionInstructions.push([Rn.CUSTOM,y,_,a,f||d,Hd]);break;case"MultiPoint":v=a.getFlatCoordinates(),(_=this.appendFlatPointCoordinates(v,g))>y&&(this.instructions.push([Rn.CUSTOM,y,_,a,d,Hd]),this.hitDetectionInstructions.push([Rn.CUSTOM,y,_,a,f||d,Hd]));break;case"Point":v=a.getFlatCoordinates(),this.coordinates.push(v[0],v[1]),this.instructions.push([Rn.CUSTOM,y,_=this.coordinates.length,a,d]),this.hitDetectionInstructions.push([Rn.CUSTOM,y,_,a,f||d])}this.endGeometry(h)},l.prototype.beginGeometry=function(a,h){this.beginGeometryInstruction1_=[Rn.BEGIN_GEOMETRY,h,0,a],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[Rn.BEGIN_GEOMETRY,h,0,a],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)},l.prototype.finish=function(){return{instructions:this.instructions,hitDetectionInstructions:this.hitDetectionInstructions,coordinates:this.coordinates}},l.prototype.reverseHitDetectionInstructions=function(){var a=this.hitDetectionInstructions;a.reverse();var h,f,m,d=a.length,g=-1;for(h=0;h<d;++h)(m=(f=a[h])[0])==Rn.END_GEOMETRY?g=h:m==Rn.BEGIN_GEOMETRY&&(f[2]=h,Ive(this.hitDetectionInstructions,g,h),g=-1)},l.prototype.setFillStrokeStyle=function(a,h){var d=this.state;if(a){var f=a.getColor();d.fillStyle=_u(f||_h)}else d.fillStyle=void 0;if(h){var m=h.getColor();d.strokeStyle=_u(m||SS);var g=h.getLineCap();d.lineCap=void 0!==g?g:ZC;var y=h.getLineDash();d.lineDash=y?y.slice():yS;var v=h.getLineDashOffset();d.lineDashOffset=v||0;var _=h.getLineJoin();d.lineJoin=void 0!==_?_:Ay;var S=h.getWidth();d.lineWidth=void 0!==S?S:1;var b=h.getMiterLimit();d.miterLimit=void 0!==b?b:10,d.lineWidth>this.maxLineWidth&&(this.maxLineWidth=d.lineWidth,this.bufferedMaxExtent_=null)}else d.strokeStyle=void 0,d.lineCap=void 0,d.lineDash=null,d.lineDashOffset=void 0,d.lineJoin=void 0,d.lineWidth=void 0,d.miterLimit=void 0},l.prototype.createFill=function(a){var h=a.fillStyle,d=[Rn.SET_FILL_STYLE,h];return"string"!=typeof h&&d.push(!0),d},l.prototype.applyStroke=function(a){this.instructions.push(this.createStroke(a))},l.prototype.createStroke=function(a){return[Rn.SET_STROKE_STYLE,a.strokeStyle,a.lineWidth*this.pixelRatio,a.lineCap,a.lineJoin,a.miterLimit,this.applyPixelRatio(a.lineDash),a.lineDashOffset*this.pixelRatio]},l.prototype.updateFillStyle=function(a,h){var d=a.fillStyle;("string"!=typeof d||a.currentFillStyle!=d)&&(void 0!==d&&this.instructions.push(h.call(this,a)),a.currentFillStyle=d)},l.prototype.updateStrokeStyle=function(a,h){var d=a.strokeStyle,f=a.lineCap,m=a.lineDash,g=a.lineDashOffset,y=a.lineJoin,v=a.lineWidth,_=a.miterLimit;(a.currentStrokeStyle!=d||a.currentLineCap!=f||m!=a.currentLineDash&&!Fd(a.currentLineDash,m)||a.currentLineDashOffset!=g||a.currentLineJoin!=y||a.currentLineWidth!=v||a.currentMiterLimit!=_)&&(void 0!==d&&h.call(this,a),a.currentStrokeStyle=d,a.currentLineCap=f,a.currentLineDash=m,a.currentLineDashOffset=g,a.currentLineJoin=y,a.currentLineWidth=v,a.currentMiterLimit=_)},l.prototype.endGeometry=function(a){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;var h=[Rn.END_GEOMETRY,a];this.instructions.push(h),this.hitDetectionInstructions.push(h)},l.prototype.getBufferedMaxExtent=function(){return!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=jH(this.maxExtent),this.maxLineWidth>0)&&$a(this.bufferedMaxExtent_,this.resolution*(this.maxLineWidth+1)/2,this.bufferedMaxExtent_),this.bufferedMaxExtent_},l}(G7);const OS=nTe;var rTe=function(){var c=function(l,a){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,d){h.__proto__=d}||function(h,d){for(var f in d)Object.prototype.hasOwnProperty.call(d,f)&&(h[f]=d[f])})(l,a)};return function(l,a){if("function"!=typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");function h(){this.constructor=l}c(l,a),l.prototype=null===a?Object.create(a):(h.prototype=a.prototype,new h)}}(),iTe=function(c){function l(a,h,d,f){var m=c.call(this,a,h,d,f)||this;return m.hitDetectionImage_=null,m.image_=null,m.imagePixelRatio_=void 0,m.anchorX_=void 0,m.anchorY_=void 0,m.height_=void 0,m.opacity_=void 0,m.originX_=void 0,m.originY_=void 0,m.rotateWithView_=void 0,m.rotation_=void 0,m.scale_=void 0,m.width_=void 0,m.declutterImageWithText_=void 0,m}return rTe(l,c),l.prototype.drawPoint=function(a,h){if(this.image_){this.beginGeometry(a,h);var d=a.getFlatCoordinates(),f=a.getStride(),m=this.coordinates.length,g=this.appendFlatPointCoordinates(d,f);this.instructions.push([Rn.DRAW_IMAGE,m,g,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterImageWithText_]),this.hitDetectionInstructions.push([Rn.DRAW_IMAGE,m,g,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterImageWithText_]),this.endGeometry(h)}},l.prototype.drawMultiPoint=function(a,h){if(this.image_){this.beginGeometry(a,h);var d=a.getFlatCoordinates(),f=a.getStride(),m=this.coordinates.length,g=this.appendFlatPointCoordinates(d,f);this.instructions.push([Rn.DRAW_IMAGE,m,g,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterImageWithText_]),this.hitDetectionInstructions.push([Rn.DRAW_IMAGE,m,g,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterImageWithText_]),this.endGeometry(h)}},l.prototype.finish=function(){return this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0,c.prototype.finish.call(this)},l.prototype.setImageStyle=function(a,h){var d=a.getAnchor(),f=a.getSize(),m=a.getHitDetectionImage(),g=a.getImage(this.pixelRatio),y=a.getOrigin();this.imagePixelRatio_=a.getPixelRatio(this.pixelRatio),this.anchorX_=d[0],this.anchorY_=d[1],this.hitDetectionImage_=m,this.image_=g,this.height_=f[1],this.opacity_=a.getOpacity(),this.originX_=y[0]*this.imagePixelRatio_,this.originY_=y[1]*this.imagePixelRatio_,this.rotateWithView_=a.getRotateWithView(),this.rotation_=a.getRotation(),this.scale_=a.getScaleArray(),this.width_=f[0],this.declutterImageWithText_=h},l}(OS);const sTe=iTe;var oTe=function(){var c=function(l,a){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,d){h.__proto__=d}||function(h,d){for(var f in d)Object.prototype.hasOwnProperty.call(d,f)&&(h[f]=d[f])})(l,a)};return function(l,a){if("function"!=typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");function h(){this.constructor=l}c(l,a),l.prototype=null===a?Object.create(a):(h.prototype=a.prototype,new h)}}(),aTe=function(c){function l(a,h,d,f){return c.call(this,a,h,d,f)||this}return oTe(l,c),l.prototype.drawFlatCoordinates_=function(a,h,d,f){var m=this.coordinates.length,g=this.appendFlatLineCoordinates(a,h,d,f,!1,!1),y=[Rn.MOVE_TO_LINE_TO,m,g];return this.instructions.push(y),this.hitDetectionInstructions.push(y),d},l.prototype.drawLineString=function(a,h){var d=this.state;if(void 0!==d.strokeStyle&&void 0!==d.lineWidth){this.updateStrokeStyle(d,this.applyStroke),this.beginGeometry(a,h),this.hitDetectionInstructions.push([Rn.SET_STROKE_STYLE,d.strokeStyle,d.lineWidth,d.lineCap,d.lineJoin,d.miterLimit,yS,0],Yp);var g=a.getFlatCoordinates(),y=a.getStride();this.drawFlatCoordinates_(g,0,g.length,y),this.hitDetectionInstructions.push(qd),this.endGeometry(h)}},l.prototype.drawMultiLineString=function(a,h){var d=this.state;if(void 0!==d.strokeStyle&&void 0!==d.lineWidth){this.updateStrokeStyle(d,this.applyStroke),this.beginGeometry(a,h),this.hitDetectionInstructions.push([Rn.SET_STROKE_STYLE,d.strokeStyle,d.lineWidth,d.lineCap,d.lineJoin,d.miterLimit,d.lineDash,d.lineDashOffset],Yp);for(var g=a.getEnds(),y=a.getFlatCoordinates(),v=a.getStride(),_=0,S=0,b=g.length;S<b;++S)_=this.drawFlatCoordinates_(y,_,g[S],v);this.hitDetectionInstructions.push(qd),this.endGeometry(h)}},l.prototype.finish=function(){var a=this.state;return null!=a.lastStroke&&a.lastStroke!=this.coordinates.length&&this.instructions.push(qd),this.reverseHitDetectionInstructions(),this.state=null,c.prototype.finish.call(this)},l.prototype.applyStroke=function(a){null!=a.lastStroke&&a.lastStroke!=this.coordinates.length&&(this.instructions.push(qd),a.lastStroke=this.coordinates.length),a.lastStroke=0,c.prototype.applyStroke.call(this,a),this.instructions.push(Yp)},l}(OS);const lTe=aTe;var cTe=function(){var c=function(l,a){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,d){h.__proto__=d}||function(h,d){for(var f in d)Object.prototype.hasOwnProperty.call(d,f)&&(h[f]=d[f])})(l,a)};return function(l,a){if("function"!=typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");function h(){this.constructor=l}c(l,a),l.prototype=null===a?Object.create(a):(h.prototype=a.prototype,new h)}}(),uTe=function(c){function l(a,h,d,f){return c.call(this,a,h,d,f)||this}return cTe(l,c),l.prototype.drawFlatCoordinatess_=function(a,h,d,f){var m=this.state,g=void 0!==m.fillStyle,y=void 0!==m.strokeStyle,v=d.length;this.instructions.push(Yp),this.hitDetectionInstructions.push(Yp);for(var _=0;_<v;++_){var S=d[_],b=this.coordinates.length,T=this.appendFlatLineCoordinates(a,h,S,f,!0,!y),x=[Rn.MOVE_TO_LINE_TO,b,T];this.instructions.push(x),this.hitDetectionInstructions.push(x),y&&(this.instructions.push(U7),this.hitDetectionInstructions.push(U7)),h=S}return g&&(this.instructions.push(px),this.hitDetectionInstructions.push(px)),y&&(this.instructions.push(qd),this.hitDetectionInstructions.push(qd)),h},l.prototype.drawCircle=function(a,h){var d=this.state;if(void 0!==d.fillStyle||void 0!==d.strokeStyle){this.setFillStrokeStyles_(),this.beginGeometry(a,h),void 0!==d.fillStyle&&this.hitDetectionInstructions.push([Rn.SET_FILL_STYLE,_h]),void 0!==d.strokeStyle&&this.hitDetectionInstructions.push([Rn.SET_STROKE_STYLE,d.strokeStyle,d.lineWidth,d.lineCap,d.lineJoin,d.miterLimit,d.lineDash,d.lineDashOffset]);var g=a.getFlatCoordinates(),y=a.getStride(),v=this.coordinates.length;this.appendFlatLineCoordinates(g,0,g.length,y,!1,!1);var _=[Rn.CIRCLE,v];this.instructions.push(Yp,_),this.hitDetectionInstructions.push(Yp,_),void 0!==d.fillStyle&&(this.instructions.push(px),this.hitDetectionInstructions.push(px)),void 0!==d.strokeStyle&&(this.instructions.push(qd),this.hitDetectionInstructions.push(qd)),this.endGeometry(h)}},l.prototype.drawPolygon=function(a,h){var d=this.state;if(void 0!==d.fillStyle||void 0!==d.strokeStyle){this.setFillStrokeStyles_(),this.beginGeometry(a,h),void 0!==d.fillStyle&&this.hitDetectionInstructions.push([Rn.SET_FILL_STYLE,_h]),void 0!==d.strokeStyle&&this.hitDetectionInstructions.push([Rn.SET_STROKE_STYLE,d.strokeStyle,d.lineWidth,d.lineCap,d.lineJoin,d.miterLimit,d.lineDash,d.lineDashOffset]);var g=a.getEnds(),y=a.getOrientedFlatCoordinates(),v=a.getStride();this.drawFlatCoordinatess_(y,0,g,v),this.endGeometry(h)}},l.prototype.drawMultiPolygon=function(a,h){var d=this.state;if(void 0!==d.fillStyle||void 0!==d.strokeStyle){this.setFillStrokeStyles_(),this.beginGeometry(a,h),void 0!==d.fillStyle&&this.hitDetectionInstructions.push([Rn.SET_FILL_STYLE,_h]),void 0!==d.strokeStyle&&this.hitDetectionInstructions.push([Rn.SET_STROKE_STYLE,d.strokeStyle,d.lineWidth,d.lineCap,d.lineJoin,d.miterLimit,d.lineDash,d.lineDashOffset]);for(var g=a.getEndss(),y=a.getOrientedFlatCoordinates(),v=a.getStride(),_=0,S=0,b=g.length;S<b;++S)_=this.drawFlatCoordinatess_(y,_,g[S],v);this.endGeometry(h)}},l.prototype.finish=function(){this.reverseHitDetectionInstructions(),this.state=null;var a=this.tolerance;if(0!==a)for(var h=this.coordinates,d=0,f=h.length;d<f;++d)h[d]=Wp(h[d],a);return c.prototype.finish.call(this)},l.prototype.setFillStrokeStyles_=function(){var a=this.state;void 0!==a.fillStyle&&this.updateFillStyle(a,this.createFill),void 0!==a.strokeStyle&&this.updateStrokeStyle(a,this.applyStroke)},l}(OS);const z7=uTe;function hTe(c,l,a,h,d){var S,b,T,x,E,D,I,M,L,f=a,m=a,g=0,y=0,v=a;for(S=a;S<h;S+=d){var P=l[S],F=l[S+1];void 0!==x&&(M=P-x,L=F-E,T=Math.sqrt(M*M+L*L),void 0!==D&&(y+=b,Math.acos((D*M+I*L)/(b*T))>c&&(y>g&&(g=y,f=v,m=S),y=0,v=S-d)),b=T,D=M,I=L),x=P,E=F}return(y+=T)>g?[v,S]:[f,m]}var dTe=function(){var c=function(l,a){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,d){h.__proto__=d}||function(h,d){for(var f in d)Object.prototype.hasOwnProperty.call(d,f)&&(h[f]=d[f])})(l,a)};return function(l,a){if("function"!=typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");function h(){this.constructor=l}c(l,a),l.prototype=null===a?Object.create(a):(h.prototype=a.prototype,new h)}}(),mx={left:0,end:0,center:.5,right:1,start:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1},fTe=function(c){function l(a,h,d,f){var m=c.call(this,a,h,d,f)||this;return m.labels_=null,m.text_="",m.textOffsetX_=0,m.textOffsetY_=0,m.textRotateWithView_=void 0,m.textRotation_=0,m.textFillState_=null,m.fillStates={},m.textStrokeState_=null,m.strokeStates={},m.textState_={},m.textStates={},m.textKey_="",m.fillKey_="",m.strokeKey_="",m.declutterImageWithText_=void 0,m}return dTe(l,c),l.prototype.finish=function(){var a=c.prototype.finish.call(this);return a.textStates=this.textStates,a.fillStates=this.fillStates,a.strokeStates=this.strokeStates,a},l.prototype.drawText=function(a,h){var m=this.textState_;if(""!==this.text_&&m&&(this.textFillState_||this.textStrokeState_)){var g=this.coordinates,y=g.length,v=a.getType(),_=null,S=a.getStride();if("line"!==m.placement||"LineString"!=v&&"MultiLineString"!=v&&"Polygon"!=v&&"MultiPolygon"!=v){var z=m.overflow?null:[];switch(v){case"Point":case"MultiPoint":_=a.getFlatCoordinates();break;case"LineString":_=a.getFlatMidpoint();break;case"Circle":_=a.getCenter();break;case"MultiLineString":_=a.getFlatMidpoints(),S=2;break;case"Polygon":_=a.getFlatInteriorPoint(),m.overflow||z.push(_[2]/this.resolution),S=3;break;case"MultiPolygon":var q=a.getFlatInteriorPoints();for(_=[],x=0,E=q.length;x<E;x+=3)m.overflow||z.push(q[x+2]/this.resolution),_.push(q[x],q[x+1]);if(0===_.length)return;S=2}if((V=this.appendFlatPointCoordinates(_,S))===y)return;if(z&&(V-y)/2!=_.length/S){var K=y/2;z=z.filter(function(be,we){var Ce=g[2*(K+we)]===_[we*S]&&g[2*(K+we)+1]===_[we*S+1];return Ce||--K,Ce})}this.saveTextStates_(),(m.backgroundFill||m.backgroundStroke)&&(this.setFillStrokeStyle(m.backgroundFill,m.backgroundStroke),m.backgroundFill&&(this.updateFillStyle(this.state,this.createFill),this.hitDetectionInstructions.push(this.createFill(this.state))),m.backgroundStroke&&(this.updateStrokeStyle(this.state,this.applyStroke),this.hitDetectionInstructions.push(this.createStroke(this.state)))),this.beginGeometry(a,h);var se=m.padding;if(se!=Up&&(m.scale[0]<0||m.scale[1]<0)){var W=m.padding[0],Q=m.padding[1],ie=m.padding[2],ae=m.padding[3];m.scale[0]<0&&(Q=-Q,ae=-ae),m.scale[1]<0&&(W=-W,ie=-ie),se=[W,Q,ie,ae]}var he=this.pixelRatio;this.instructions.push([Rn.DRAW_IMAGE,y,V,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[1,1],NaN,this.declutterImageWithText_,se==Up?Up:se.map(function(be){return be*he}),!!m.backgroundFill,!!m.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,z]);var J=1/he;this.hitDetectionInstructions.push([Rn.DRAW_IMAGE,y,V,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[J,J],NaN,this.declutterImageWithText_,se,!!m.backgroundFill,!!m.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,z]),this.endGeometry(h)}else{if(!Mi(this.getBufferedMaxExtent(),a.getExtent()))return;var b=void 0;if(_=a.getFlatCoordinates(),"LineString"==v)b=[_.length];else if("MultiLineString"==v)b=a.getEnds();else if("Polygon"==v)b=a.getEnds().slice(0,1);else if("MultiPolygon"==v){var T=a.getEndss();b=[];for(var x=0,E=T.length;x<E;++x)b.push(T[x][0])}this.beginGeometry(a,h);for(var D=m.textAlign,I=0,M=void 0,L=0,P=b.length;L<P;++L){if(null==D){var F=hTe(m.maxAngle,_,I,b[L],S);I=F[0],M=F[1]}else M=b[L];for(x=I;x<M;x+=S)g.push(_[x],_[x+1]);var V;I=b[L],this.drawChars_(y,V=g.length),y=V}this.endGeometry(h)}}},l.prototype.saveTextStates_=function(){var a=this.textStrokeState_,h=this.textState_,d=this.textFillState_,f=this.strokeKey_;a&&(f in this.strokeStates||(this.strokeStates[f]={strokeStyle:a.strokeStyle,lineCap:a.lineCap,lineDashOffset:a.lineDashOffset,lineWidth:a.lineWidth,lineJoin:a.lineJoin,miterLimit:a.miterLimit,lineDash:a.lineDash}));var m=this.textKey_;m in this.textStates||(this.textStates[m]={font:h.font,textAlign:h.textAlign||bS,textBaseline:h.textBaseline||KC,scale:h.scale});var g=this.fillKey_;d&&(g in this.fillStates||(this.fillStates[g]={fillStyle:d.fillStyle}))},l.prototype.drawChars_=function(a,h){var d=this.textStrokeState_,f=this.textState_,m=this.strokeKey_,g=this.textKey_,y=this.fillKey_;this.saveTextStates_();var v=this.pixelRatio,_=mx[f.textBaseline],S=this.textOffsetY_*v,b=this.text_,T=d?d.lineWidth*Math.abs(f.scale[0])/2:0;this.instructions.push([Rn.DRAW_CHARS,a,h,_,f.overflow,y,f.maxAngle,v,S,m,T*v,b,g,1]),this.hitDetectionInstructions.push([Rn.DRAW_CHARS,a,h,_,f.overflow,y,f.maxAngle,1,S,m,T,b,g,1/v])},l.prototype.setTextStyle=function(a,h){var d,f,m;if(a){var g=a.getFill();g?((f=this.textFillState_)||(this.textFillState_=f={}),f.fillStyle=_u(g.getColor()||_h)):this.textFillState_=f=null;var y=a.getStroke();if(y){(m=this.textStrokeState_)||(this.textStrokeState_=m={});var v=y.getLineDash(),_=y.getLineDashOffset(),S=y.getWidth(),b=y.getMiterLimit();m.lineCap=y.getLineCap()||ZC,m.lineDash=v?v.slice():yS,m.lineDashOffset=void 0===_?0:_,m.lineJoin=y.getLineJoin()||Ay,m.lineWidth=void 0===S?1:S,m.miterLimit=void 0===b?10:b,m.strokeStyle=_u(y.getColor()||SS)}else this.textStrokeState_=m=null;d=this.textState_;var T=a.getFont()||b9;T9(T);var x=a.getScaleArray();d.overflow=a.getOverflow(),d.font=T,d.maxAngle=a.getMaxAngle(),d.placement=a.getPlacement(),d.textAlign=a.getTextAlign(),d.textBaseline=a.getTextBaseline()||KC,d.backgroundFill=a.getBackgroundFill(),d.backgroundStroke=a.getBackgroundStroke(),d.padding=a.getPadding()||Up,d.scale=void 0===x?[1,1]:x;var E=a.getOffsetX(),D=a.getOffsetY(),I=a.getRotateWithView(),M=a.getRotation();this.text_=a.getText()||"",this.textOffsetX_=void 0===E?0:E,this.textOffsetY_=void 0===D?0:D,this.textRotateWithView_=void 0!==I&&I,this.textRotation_=void 0===M?0:M,this.strokeKey_=m?("string"==typeof m.strokeStyle?m.strokeStyle:tn(m.strokeStyle))+m.lineCap+m.lineDashOffset+"|"+m.lineWidth+m.lineJoin+m.miterLimit+"["+m.lineDash.join()+"]":"",this.textKey_=d.font+d.scale+(d.textAlign||"?")+(d.textBaseline||"?"),this.fillKey_=f?"string"==typeof f.fillStyle?f.fillStyle:"|"+tn(f.fillStyle):""}else this.text_="";this.declutterImageWithText_=h},l}(OS),pTe={Circle:z7,Default:OS,Image:sTe,LineString:lTe,Polygon:z7,Text:fTe},mTe=function(){function c(l,a,h,d){this.tolerance_=l,this.maxExtent_=a,this.pixelRatio_=d,this.resolution_=h,this.buildersByZIndex_={}}return c.prototype.finish=function(){var l={};for(var a in this.buildersByZIndex_){l[a]=l[a]||{};var h=this.buildersByZIndex_[a];for(var d in h){var f=h[d].finish();l[a][d]=f}}return l},c.prototype.getBuilder=function(l,a){var h=void 0!==l?l.toString():"0",d=this.buildersByZIndex_[h];void 0===d&&(this.buildersByZIndex_[h]=d={});var f=d[a];return void 0===f&&(f=new(0,pTe[a])(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_),d[a]=f),f},c}();const gx=mTe;function gTe(c,l,a,h,d,f,m,g,y,v,_,S){var b=c[l],T=c[l+1],x=0,E=0,D=0,I=0;function M(){x=b,E=T,b=c[l+=h],T=c[l+1],I+=D,D=Math.sqrt((b-x)*(b-x)+(T-E)*(T-E))}do{M()}while(l<a-h&&I+D<f);for(var L=0===D?0:(f-I)/D,P=vh(x,b,L),F=vh(E,T,L),V=l-h,z=I,q=f+g*y(v,d,_);l<a-h&&I+D<q;)M();var W,K=vh(x,b,L=0===D?0:(q-I)/D),se=vh(E,T,L);if(S){var Q=[P,F,K,se];j9(Q,0,4,2,S,Q,Q),W=Q[0]>Q[2]}else W=P>K;var J,ie=Math.PI,ae=[],he=V+h===l;if(D=0,I=z,b=c[l=V],T=c[l+1],he)return M(),J=Math.atan2(T-E,b-x),W&&(J+=J>0?-ie:ie),ae[0]=[ce=(K+P)/2,be=(se+F)/2,(q-f)/2,J,d],ae;for(var we=0,Ce=d.length;we<Ce;){M();var Te=Math.atan2(T-E,b-x);if(W&&(Te+=Te>0?-ie:ie),void 0!==J){var fe=Te-J;if(fe+=fe>ie?-2*ie:fe<-ie?2*ie:0,Math.abs(fe)>m)return null}J=Te;for(var $e=we,Ve=0;we<Ce;++we){var en=g*y(v,d[W?Ce-we-1:we],_);if(l+h<a&&I+D<f+Ve+en/2)break;Ve+=en}if(we!==$e){var ut=W?d.substring(Ce-$e,Ce-we):d.substring($e,we),ce=vh(x,b,L=0===D?0:(f+Ve/2-I)/D),be=vh(E,T,L);ae.push([ce,be,Ve/2,Te,ut]),f+=Ve}}return ae}function F2(c,l,a,h){for(var d=c[l],f=c[l+1],m=0,g=l+h;g<a;g+=h){var y=c[g],v=c[g+1];m+=Math.sqrt((y-d)*(y-d)+(v-f)*(v-f)),d=y,f=v}return m}var Vy=[1/0,1/0,-1/0,-1/0],$d=[],Ch=[],xh=[],Yd=[];function j7(c){return c[3].declutterBox}var yTe=new RegExp("["+String.fromCharCode(1425)+"-"+String.fromCharCode(2303)+String.fromCharCode(64285)+"-"+String.fromCharCode(65023)+String.fromCharCode(65136)+"-"+String.fromCharCode(65276)+String.fromCharCode(67584)+"-"+String.fromCharCode(69631)+String.fromCharCode(124928)+"-"+String.fromCharCode(126975)+"]");function W7(c,l){return("start"===l||"end"===l)&&!yTe.test(c)&&(l="start"===l?"left":"right"),mx[l]}function vTe(c,l,a){return a>0&&c.push("\n",""),c.push(l,""),c}var _Te=function(){function c(l,a,h,d){this.overlaps=h,this.pixelRatio=a,this.resolution=l,this.instructions=d.instructions,this.coordinates=d.coordinates,this.coordinateCache_={},this.renderedTransform_=[1,0,0,1,0,0],this.hitDetectionInstructions=d.hitDetectionInstructions,this.pixelCoordinates_=null,this.viewRotation_=0,this.fillStates=d.fillStates||{},this.strokeStates=d.strokeStates||{},this.textStates=d.textStates||{},this.widths_={},this.labels_={}}return c.prototype.createLabel=function(l,a,h,d){var f=l+a+h+d;if(this.labels_[f])return this.labels_[f];var m=d?this.strokeStates[d]:null,g=h?this.fillStates[h]:null,y=this.textStates[a],v=this.pixelRatio,_=[y.scale[0]*v,y.scale[1]*v],S=Array.isArray(l),b=W7(S?l[0]:l,y.textAlign||bS),T=d&&m.lineWidth?m.lineWidth:0,x=S?l:l.split("\n").reduce(vTe,[]),E=function A_e(c,l){for(var a=[],h=[],d=[],f=0,m=0,g=0,y=0,v=0,_=l.length;v<=_;v+=2){var S=l[v];if("\n"!==S&&v!==_){var b=l[v+1]||c.font,T=QC(b,S);a.push(T),m+=T;var x=D_e(b);h.push(x),y=Math.max(y,x)}else f=Math.max(f,m),d.push(m),m=0,g+=y}return{width:f,height:g,widths:a,heights:h,lineWidths:d}}(y,x),M=E.widths,L=E.heights,P=E.lineWidths,F=E.width+T,V=[],z=(F+2)*_[0],q=(E.height+T)*_[1],K={width:z<0?Math.floor(z):Math.ceil(z),height:q<0?Math.floor(q):Math.ceil(q),contextInstructions:V};(1!=_[0]||1!=_[1])&&V.push("scale",_),d&&(V.push("strokeStyle",m.strokeStyle),V.push("lineWidth",T),V.push("lineCap",m.lineCap),V.push("lineJoin",m.lineJoin),V.push("miterLimit",m.miterLimit),(NC?OffscreenCanvasRenderingContext2D:CanvasRenderingContext2D).prototype.setLineDash&&(V.push("setLineDash",[m.lineDash]),V.push("lineDashOffset",m.lineDashOffset))),h&&V.push("fillStyle",g.fillStyle),V.push("textBaseline","middle"),V.push("textAlign","center");for(var we,W=.5-b,Q=b*F+W*T,ie=[],ae=[],he=0,J=0,ce=0,be=0,Ce=0,Te=x.length;Ce<Te;Ce+=2){var fe=x[Ce];if("\n"!==fe){var $e=x[Ce+1]||y.font;$e!==we&&(d&&ie.push("font",$e),h&&ae.push("font",$e),we=$e),he=Math.max(he,L[ce]);var Ve=[fe,Q+W*M[ce]+b*(M[ce]-P[be]),.5*(T+he)+J];Q+=M[ce],d&&ie.push("strokeText",Ve),h&&ae.push("fillText",Ve),++ce}else J+=he,he=0,Q=b*F+W*T,++be}return Array.prototype.push.apply(V,ie),Array.prototype.push.apply(V,ae),this.labels_[f]=K,K},c.prototype.replayTextBackground_=function(l,a,h,d,f,m,g){l.beginPath(),l.moveTo.apply(l,a),l.lineTo.apply(l,h),l.lineTo.apply(l,d),l.lineTo.apply(l,f),l.lineTo.apply(l,a),m&&(this.alignFill_=m[2],this.fill_(l)),g&&(this.setStrokeStyle_(l,g),l.stroke())},c.prototype.calculateImageOrLabelDimensions_=function(l,a,h,d,f,m,g,y,v,_,S,b,T,x,E,D){var K,I=h-(g*=b[0]),M=d-(y*=b[1]),L=f+v>l?l-v:f,P=m+_>a?a-_:m,F=x[3]+L*b[0]+x[1],V=x[0]+P*b[1]+x[2],z=I-x[3],q=M-x[0];return(E||0!==S)&&($d[0]=z,Yd[0]=z,$d[1]=q,Ch[1]=q,Ch[0]=z+F,xh[0]=Ch[0],xh[1]=q+V,Yd[1]=xh[1]),0!==S?(ni(K=Do([1,0,0,1,0,0],h,d,1,1,S,-h,-d),$d),ni(K,Ch),ni(K,xh),ni(K,Yd),du(Math.min($d[0],Ch[0],xh[0],Yd[0]),Math.min($d[1],Ch[1],xh[1],Yd[1]),Math.max($d[0],Ch[0],xh[0],Yd[0]),Math.max($d[1],Ch[1],xh[1],Yd[1]),Vy)):du(Math.min(z,z+F),Math.min(q,q+V),Math.max(z,z+F),Math.max(q,q+V),Vy),T&&(I=Math.round(I),M=Math.round(M)),{drawImageX:I,drawImageY:M,drawImageW:L,drawImageH:P,originX:v,originY:_,declutterBox:{minX:Vy[0],minY:Vy[1],maxX:Vy[2],maxY:Vy[3],value:D},canvasTransform:K,scale:b}},c.prototype.replayImageOrLabel_=function(l,a,h,d,f,m,g){var v=d.declutterBox,_=l.canvas,S=g?g[2]*d.scale[0]/2:0;return v.minX-S<=_.width/a&&v.maxX+S>=0&&v.minY-S<=_.height/a&&v.maxY+S>=0&&(!(!m&&!g)&&this.replayTextBackground_(l,$d,Ch,xh,Yd,m,g),function I_e(c,l,a,h,d,f,m,g,y,v,_){c.save(),1!==a&&(c.globalAlpha*=a),l&&c.setTransform.apply(c,l),h.contextInstructions?(c.translate(y,v),c.scale(_[0],_[1]),function R_e(c,l){for(var a=c.contextInstructions,h=0,d=a.length;h<d;h+=2)Array.isArray(a[h+1])?l[a[h]].apply(l,a[h+1]):l[a[h]]=a[h+1]}(h,c)):_[0]<0||_[1]<0?(c.translate(y,v),c.scale(_[0],_[1]),c.drawImage(h,d,f,m,g,0,0,m,g)):c.drawImage(h,d,f,m,g,y,v,m*_[0],g*_[1]),c.restore()}(l,d.canvasTransform,f,h,d.originX,d.originY,d.drawImageW,d.drawImageH,d.drawImageX,d.drawImageY,d.scale)),!0},c.prototype.fill_=function(l){if(this.alignFill_){var a=ni(this.renderedTransform_,[0,0]),h=512*this.pixelRatio;l.save(),l.translate(a[0]%h,a[1]%h),l.rotate(this.viewRotation_)}l.fill(),this.alignFill_&&l.restore()},c.prototype.setStrokeStyle_=function(l,a){l.strokeStyle=a[1],l.lineWidth=a[2],l.lineCap=a[3],l.lineJoin=a[4],l.miterLimit=a[5],l.setLineDash&&(l.lineDashOffset=a[7],l.setLineDash(a[6]))},c.prototype.drawLabelWithPointPlacement_=function(l,a,h,d){var f=this.textStates[a],m=this.createLabel(l,a,d,h),g=this.strokeStates[h],y=this.pixelRatio,v=W7(Array.isArray(l)?l[0]:l,f.textAlign||bS),_=mx[f.textBaseline||KC],S=g&&g.lineWidth?g.lineWidth:0;return{label:m,anchorX:v*(m.width/y-2*f.scale[0])+2*(.5-v)*S,anchorY:_*m.height/y+2*(.5-_)*S}},c.prototype.execute_=function(l,a,h,d,f,m,g,y){var v;this.pixelCoordinates_&&Fd(h,this.renderedTransform_)?v=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),v=zd(this.coordinates,0,this.coordinates.length,2,h,this.pixelCoordinates_),function zve(c,l){c[0]=l[0],c[1]=l[1],c[2]=l[2],c[3]=l[3],c[4]=l[4],c[5]=l[5]}(this.renderedTransform_,h));for(var T,x,E,D,I,M,L,P,F,V,z,q,be,we,Ce,Te,_=0,S=d.length,b=0,K=0,se=0,W=null,Q=null,ie=this.coordinateCache_,ae=this.viewRotation_,he=Math.round(1e12*Math.atan2(-h[1],h[0]))/1e12,J={context:l,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:ae},ce=this.instructions!=d||this.overlaps?0:200;_<S;){var fe=d[_];switch(fe[0]){case Rn.BEGIN_GEOMETRY:Te=fe[3],(be=fe[1]).getGeometry()?void 0===g||Mi(g,Te.getExtent())?++_:_=fe[2]+1:_=fe[2];break;case Rn.BEGIN_PATH:K>ce&&(this.fill_(l),K=0),se>ce&&(l.stroke(),se=0),!K&&!se&&(l.beginPath(),D=NaN,I=NaN),++_;break;case Rn.CIRCLE:var Ve=v[b=fe[1]],De=v[b+1],Fe=v[b+2]-Ve,ht=v[b+3]-De,an=Math.sqrt(Fe*Fe+ht*ht);l.moveTo(Ve+an,De),l.arc(Ve,De,an,0,2*Math.PI,!0),++_;break;case Rn.CLOSE_PATH:l.closePath(),++_;break;case Rn.CUSTOM:b=fe[1],T=fe[2];var Qe=fe[4],dt=6==fe.length?fe[5]:void 0;J.geometry=fe[3],J.feature=be,_ in ie||(ie[_]=[]);var at=ie[_];dt?dt(v,b,T,2,at):(at[0]=v[b],at[1]=v[b+1],at.length=2),Qe(at,J),++_;break;case Rn.DRAW_IMAGE:b=fe[1],T=fe[2],x=fe[4],E=fe[5];var Rt=fe[6],bt=fe[7],Jt=fe[8],Ye=fe[9],Cn=fe[10],ar=fe[11],lr=fe[12],pe=fe[13],ne=fe[14];if(!(P=fe[3])&&fe.length>=19){var ze=this.drawLabelWithPointPlacement_(F=fe[18],V=fe[19],z=fe[20],q=fe[21]);fe[3]=P=ze.label,fe[4]=x=(ze.anchorX-fe[22])*this.pixelRatio,fe[5]=E=(ze.anchorY-fe[23])*this.pixelRatio,fe[6]=Rt=P.height,fe[13]=pe=P.width}var Xe=void 0;fe.length>24&&(Xe=fe[24]);var qt=void 0,me=void 0,je=void 0;fe.length>16?(qt=fe[15],me=fe[16],je=fe[17]):(qt=Up,me=!1,je=!1),Cn&&he?ar+=ae:!Cn&&!he&&(ar-=ae);for(var lt=0;b<T;b+=2)if(!(Xe&&Xe[lt++]<pe/this.pixelRatio)){var _e=[l,a,P,yt=this.calculateImageOrLabelDimensions_(P.width,P.height,v[b],v[b+1],pe,Rt,x,E,Jt,Ye,ar,lr,f,qt,me||je,be),bt,me?W:null,je?Q:null],Tt=void 0,It=void 0;if(y&&ne){var sn=T-b;if(!ne[sn]){ne[sn]=_e;continue}if(Tt=ne[sn],delete ne[sn],It=j7(Tt),y.collides(It))continue}y&&y.collides(yt.declutterBox)||(Tt&&(y&&y.insert(It),this.replayImageOrLabel_.apply(this,Tt)),y&&y.insert(yt.declutterBox),this.replayImageOrLabel_.apply(this,_e))}++_;break;case Rn.DRAW_CHARS:var He=fe[1],Yt=fe[2],sr=fe[3],kr=fe[4];q=fe[5];var So=fe[6],Qr=fe[7],js=fe[8];z=fe[9];var Ps=fe[10];F=fe[11];var fd=[fe[13],fe[13]],pd=this.textStates[V=fe[12]],Sl=pd.font,Ql=[pd.scale[0]*Qr,pd.scale[1]*Qr],Kc=void 0;Sl in this.widths_?Kc=this.widths_[Sl]:this.widths_[Sl]=Kc={};var $_=F2(v,He,Yt,2),Y_=Math.abs(Ql[0])*C9(Sl,F,Kc);if(kr||Y_<=$_){var Ue=gTe(v,He,Yt,2,F,($_-Y_)*mx[this.textStates[V].textAlign],So,Math.abs(Ql[0]),C9,Sl,Kc,he?0:this.viewRotation_);e:if(Ue){var Pe=[],Ze=void 0,dn=void 0,fn=void 0,pn=void 0;if(z)for(Ze=0,dn=Ue.length;Ze<dn;++Ze){fn=this.createLabel((pn=Ue[Ze])[4],V,"",z);var yt=this.calculateImageOrLabelDimensions_(fn.width,fn.height,pn[0],pn[1],fn.width,fn.height,x=pn[2]+(Ql[0]<0?-Ps:Ps),E=sr*fn.height+2*(.5-sr)*Ps*Ql[1]/Ql[0]-js,0,0,pn[3],fd,!1,Up,!1,be);if(y&&y.collides(yt.declutterBox))break e;Pe.push([l,a,fn,yt,1,null,null])}if(q)for(Ze=0,dn=Ue.length;Ze<dn;++Ze){if(fn=this.createLabel((pn=Ue[Ze])[4],V,q,""),yt=this.calculateImageOrLabelDimensions_(fn.width,fn.height,pn[0],pn[1],fn.width,fn.height,x=pn[2],E=sr*fn.height-js,0,0,pn[3],fd,!1,Up,!1,be),y&&y.collides(yt.declutterBox))break e;Pe.push([l,a,fn,yt,1,null,null])}y&&y.load(Pe.map(j7));for(var Cr=0,yr=Pe.length;Cr<yr;++Cr)this.replayImageOrLabel_.apply(this,Pe[Cr])}}++_;break;case Rn.END_GEOMETRY:if(void 0!==m){var _r=m(be=fe[1],Te);if(_r)return _r}++_;break;case Rn.FILL:ce?K++:this.fill_(l),++_;break;case Rn.MOVE_TO_LINE_TO:for(T=fe[2],L=(Ce=v[(b=fe[1])+1])+.5|0,((M=(we=v[b])+.5|0)!==D||L!==I)&&(l.moveTo(we,Ce),D=M,I=L),b+=2;b<T;b+=2)M=(we=v[b])+.5|0,L=(Ce=v[b+1])+.5|0,(b==T-2||M!==D||L!==I)&&(l.lineTo(we,Ce),D=M,I=L);++_;break;case Rn.SET_FILL_STYLE:W=fe,this.alignFill_=fe[2],K&&(this.fill_(l),K=0,se&&(l.stroke(),se=0)),l.fillStyle=fe[1],++_;break;case Rn.SET_STROKE_STYLE:Q=fe,se&&(l.stroke(),se=0),this.setStrokeStyle_(l,fe),++_;break;case Rn.STROKE:ce?se++:l.stroke(),++_;break;default:++_}}K&&this.fill_(l),se&&l.stroke()},c.prototype.execute=function(l,a,h,d,f,m){this.viewRotation_=d,this.execute_(l,a,h,this.instructions,f,void 0,void 0,m)},c.prototype.executeHitDetection=function(l,a,h,d,f){return this.viewRotation_=h,this.execute_(l,1,a,this.hitDetectionInstructions,!0,d,f)},c}();const STe=_Te;var k2=["Polygon","Circle","LineString","Image","Text","Default"],bTe=function(){function c(l,a,h,d,f,m){this.maxExtent_=l,this.overlaps_=d,this.pixelRatio_=h,this.resolution_=a,this.renderBuffer_=m,this.executorsByZIndex_={},this.hitDetectionContext_=null,this.hitDetectionTransform_=[1,0,0,1,0,0],this.createExecutors_(f)}return c.prototype.clip=function(l,a){var h=this.getClipCoords(a);l.beginPath(),l.moveTo(h[0],h[1]),l.lineTo(h[2],h[3]),l.lineTo(h[4],h[5]),l.lineTo(h[6],h[7]),l.clip()},c.prototype.createExecutors_=function(l){for(var a in l){var h=this.executorsByZIndex_[a];void 0===h&&(this.executorsByZIndex_[a]=h={});var d=l[a];for(var f in d)h[f]=new STe(this.resolution_,this.pixelRatio_,this.overlaps_,d[f])}},c.prototype.hasExecutors=function(l){for(var a in this.executorsByZIndex_)for(var h=this.executorsByZIndex_[a],d=0,f=l.length;d<f;++d)if(l[d]in h)return!0;return!1},c.prototype.forEachFeatureAtCoordinate=function(l,a,h,d,f,m){var g=2*(d=Math.round(d))+1,y=Do(this.hitDetectionTransform_,d+.5,d+.5,1/a,-1/a,-h,-l[0],-l[1]),v=!this.hitDetectionContext_;v&&(this.hitDetectionContext_=Qs(g,g));var S,_=this.hitDetectionContext_;_.canvas.width!==g||_.canvas.height!==g?(_.canvas.width=g,_.canvas.height=g):v||_.clearRect(0,0,g,g),void 0!==this.renderBuffer_&&(Ty(S=[1/0,1/0,-1/0,-1/0],l),$a(S,a*(this.renderBuffer_+d),S));var T,b=function TTe(c){if(void 0!==V2[c])return V2[c];for(var l=2*c+1,a=c*c,h=new Array(a+1),d=0;d<=c;++d)for(var f=0;f<=c;++f){var m=d*d+f*f;if(m>a)break;var g=h[m];g||(h[m]=g=[]),g.push(4*((c+d)*l+(c+f))+3),d>0&&g.push(4*((c-d)*l+(c+f))+3),f>0&&(g.push(4*((c+d)*l+(c-f))+3),d>0&&g.push(4*((c-d)*l+(c-f))+3))}for(var y=[],v=(d=0,h.length);d<v;++d)h[d]&&y.push.apply(y,h[d]);return V2[c]=y,y}(d);function x(V,z){for(var q=_.getImageData(0,0,g,g).data,K=0,se=b.length;K<se;K++)if(q[b[K]]>0){if(!m||"Image"!==T&&"Text"!==T||-1!==m.indexOf(V)){var W=(b[K]-3)/4,Q=d-W%g,ie=d-(W/g|0),ae=f(V,z,Q*Q+ie*ie);if(ae)return ae}_.clearRect(0,0,g,g);break}}var D,I,M,L,P,E=Object.keys(this.executorsByZIndex_).map(Number);for(E.sort(Pp),D=E.length-1;D>=0;--D){var F=E[D].toString();for(M=this.executorsByZIndex_[F],I=k2.length-1;I>=0;--I)if(void 0!==(L=M[T=k2[I]])&&(P=L.executeHitDetection(_,y,h,x,S)))return P}},c.prototype.getClipCoords=function(l){var a=this.maxExtent_;if(!a)return null;var h=a[0],d=a[1],f=a[2],m=a[3],g=[h,d,h,m,f,m,f,d];return zd(g,0,8,2,l,g),g},c.prototype.isEmpty=function(){return Vp(this.executorsByZIndex_)},c.prototype.execute=function(l,a,h,d,f,m,g){var y=Object.keys(this.executorsByZIndex_).map(Number);y.sort(Pp),this.maxExtent_&&(l.save(),this.clip(l,h));var _,S,b,T,x,E,v=m||k2;for(g&&y.reverse(),_=0,S=y.length;_<S;++_){var D=y[_].toString();for(x=this.executorsByZIndex_[D],b=0,T=v.length;b<T;++b)void 0!==(E=x[v[b]])&&E.execute(l,a,h,d,f,g)}this.maxExtent_&&l.restore()},c}(),V2={};const yx=bTe;var wTe=function(){var c=function(l,a){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,d){h.__proto__=d}||function(h,d){for(var f in d)Object.prototype.hasOwnProperty.call(d,f)&&(h[f]=d[f])})(l,a)};return function(l,a){if("function"!=typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");function h(){this.constructor=l}c(l,a),l.prototype=null===a?Object.create(a):(h.prototype=a.prototype,new h)}}(),CTe=function(c){function l(a,h,d,f,m,g,y){var v=c.call(this)||this;return v.context_=a,v.pixelRatio_=h,v.extent_=d,v.transform_=f,v.viewRotation_=m,v.squaredTolerance_=g,v.userTransform_=y,v.contextFillState_=null,v.contextStrokeState_=null,v.contextTextState_=null,v.fillState_=null,v.strokeState_=null,v.image_=null,v.imageAnchorX_=0,v.imageAnchorY_=0,v.imageHeight_=0,v.imageOpacity_=0,v.imageOriginX_=0,v.imageOriginY_=0,v.imageRotateWithView_=!1,v.imageRotation_=0,v.imageScale_=[0,0],v.imageWidth_=0,v.text_="",v.textOffsetX_=0,v.textOffsetY_=0,v.textRotateWithView_=!1,v.textRotation_=0,v.textScale_=[0,0],v.textFillState_=null,v.textStrokeState_=null,v.textState_=null,v.pixelCoordinates_=[],v.tmpLocalTransform_=[1,0,0,1,0,0],v}return wTe(l,c),l.prototype.drawImages_=function(a,h,d,f){if(this.image_){var m=zd(a,h,d,f,this.transform_,this.pixelCoordinates_),g=this.context_,y=this.tmpLocalTransform_,v=g.globalAlpha;1!=this.imageOpacity_&&(g.globalAlpha=v*this.imageOpacity_);var _=this.imageRotation_;this.imageRotateWithView_&&(_+=this.viewRotation_);for(var S=0,b=m.length;S<b;S+=2){var T=m[S]-this.imageAnchorX_,x=m[S+1]-this.imageAnchorY_;if(0!==_||1!=this.imageScale_[0]||1!=this.imageScale_[1]){var E=T+this.imageAnchorX_,D=x+this.imageAnchorY_;Do(y,E,D,1,1,_,-E,-D),g.setTransform.apply(g,y),g.translate(E,D),g.scale(this.imageScale_[0],this.imageScale_[1]),g.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,-this.imageAnchorX_,-this.imageAnchorY_,this.imageWidth_,this.imageHeight_),g.setTransform(1,0,0,1,0,0)}else g.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,T,x,this.imageWidth_,this.imageHeight_)}1!=this.imageOpacity_&&(g.globalAlpha=v)}},l.prototype.drawText_=function(a,h,d,f){if(this.textState_&&""!==this.text_){this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);var m=zd(a,h,d,f,this.transform_,this.pixelCoordinates_),g=this.context_,y=this.textRotation_;for(this.textRotateWithView_&&(y+=this.viewRotation_);h<d;h+=f){var v=m[h]+this.textOffsetX_,_=m[h+1]+this.textOffsetY_;if(0!==y||1!=this.textScale_[0]||1!=this.textScale_[1]){var S=Do(this.tmpLocalTransform_,v,_,1,1,y,-v,-_);g.setTransform.apply(g,S),g.translate(v,_),g.scale(this.textScale_[0],this.textScale_[1]),this.textStrokeState_&&g.strokeText(this.text_,0,0),this.textFillState_&&g.fillText(this.text_,0,0),g.setTransform(1,0,0,1,0,0)}else this.textStrokeState_&&g.strokeText(this.text_,v,_),this.textFillState_&&g.fillText(this.text_,v,_)}}},l.prototype.moveToLineTo_=function(a,h,d,f,m){var g=this.context_,y=zd(a,h,d,f,this.transform_,this.pixelCoordinates_);g.moveTo(y[0],y[1]);var v=y.length;m&&(v-=2);for(var _=2;_<v;_+=2)g.lineTo(y[_],y[_+1]);return m&&g.closePath(),d},l.prototype.drawRings_=function(a,h,d,f){for(var m=0,g=d.length;m<g;++m)h=this.moveToLineTo_(a,h,d[m],f,!0);return h},l.prototype.drawCircle=function(a){if(Mi(this.extent_,a.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);var h=function M0e(c,l,a){var h=c.getFlatCoordinates();if(h){var d=c.getStride();return zd(h,0,h.length,d,l,a)}return null}(a,this.transform_,this.pixelCoordinates_),d=h[2]-h[0],f=h[3]-h[1],m=Math.sqrt(d*d+f*f),g=this.context_;g.beginPath(),g.arc(h[0],h[1],m,0,2*Math.PI),this.fillState_&&g.fill(),this.strokeState_&&g.stroke()}""!==this.text_&&this.drawText_(a.getCenter(),0,2,2)}},l.prototype.setStyle=function(a){this.setFillStrokeStyle(a.getFill(),a.getStroke()),this.setImageStyle(a.getImage()),this.setTextStyle(a.getText())},l.prototype.setTransform=function(a){this.transform_=a},l.prototype.drawGeometry=function(a){switch(a.getType()){case"Point":this.drawPoint(a);break;case"LineString":this.drawLineString(a);break;case"Polygon":this.drawPolygon(a);break;case"MultiPoint":this.drawMultiPoint(a);break;case"MultiLineString":this.drawMultiLineString(a);break;case"MultiPolygon":this.drawMultiPolygon(a);break;case"GeometryCollection":this.drawGeometryCollection(a);break;case"Circle":this.drawCircle(a)}},l.prototype.drawFeature=function(a,h){var d=h.getGeometryFunction()(a);!d||!Mi(this.extent_,d.getExtent())||(this.setStyle(h),this.drawGeometry(d))},l.prototype.drawGeometryCollection=function(a){for(var h=a.getGeometriesArray(),d=0,f=h.length;d<f;++d)this.drawGeometry(h[d])},l.prototype.drawPoint=function(a){this.squaredTolerance_&&(a=a.simplifyTransformed(this.squaredTolerance_,this.userTransform_));var h=a.getFlatCoordinates(),d=a.getStride();this.image_&&this.drawImages_(h,0,h.length,d),""!==this.text_&&this.drawText_(h,0,h.length,d)},l.prototype.drawMultiPoint=function(a){this.squaredTolerance_&&(a=a.simplifyTransformed(this.squaredTolerance_,this.userTransform_));var h=a.getFlatCoordinates(),d=a.getStride();this.image_&&this.drawImages_(h,0,h.length,d),""!==this.text_&&this.drawText_(h,0,h.length,d)},l.prototype.drawLineString=function(a){if(this.squaredTolerance_&&(a=a.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),Mi(this.extent_,a.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);var h=this.context_,d=a.getFlatCoordinates();h.beginPath(),this.moveToLineTo_(d,0,d.length,a.getStride(),!1),h.stroke()}if(""!==this.text_){var f=a.getFlatMidpoint();this.drawText_(f,0,2,2)}}},l.prototype.drawMultiLineString=function(a){this.squaredTolerance_&&(a=a.simplifyTransformed(this.squaredTolerance_,this.userTransform_));var h=a.getExtent();if(Mi(this.extent_,h)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);var d=this.context_,f=a.getFlatCoordinates(),m=0,g=a.getEnds(),y=a.getStride();d.beginPath();for(var v=0,_=g.length;v<_;++v)m=this.moveToLineTo_(f,m,g[v],y,!1);d.stroke()}if(""!==this.text_){var S=a.getFlatMidpoints();this.drawText_(S,0,S.length,2)}}},l.prototype.drawPolygon=function(a){if(this.squaredTolerance_&&(a=a.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),Mi(this.extent_,a.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);var h=this.context_;h.beginPath(),this.drawRings_(a.getOrientedFlatCoordinates(),0,a.getEnds(),a.getStride()),this.fillState_&&h.fill(),this.strokeState_&&h.stroke()}if(""!==this.text_){var d=a.getFlatInteriorPoint();this.drawText_(d,0,2,2)}}},l.prototype.drawMultiPolygon=function(a){if(this.squaredTolerance_&&(a=a.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),Mi(this.extent_,a.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);var h=this.context_,d=a.getOrientedFlatCoordinates(),f=0,m=a.getEndss(),g=a.getStride();h.beginPath();for(var y=0,v=m.length;y<v;++y)f=this.drawRings_(d,f,m[y],g);this.fillState_&&h.fill(),this.strokeState_&&h.stroke()}if(""!==this.text_){var S=a.getFlatInteriorPoints();this.drawText_(S,0,S.length,2)}}},l.prototype.setContextFillState_=function(a){var h=this.context_,d=this.contextFillState_;d?d.fillStyle!=a.fillStyle&&(d.fillStyle=a.fillStyle,h.fillStyle=a.fillStyle):(h.fillStyle=a.fillStyle,this.contextFillState_={fillStyle:a.fillStyle})},l.prototype.setContextStrokeState_=function(a){var h=this.context_,d=this.contextStrokeState_;d?(d.lineCap!=a.lineCap&&(d.lineCap=a.lineCap,h.lineCap=a.lineCap),h.setLineDash&&(Fd(d.lineDash,a.lineDash)||h.setLineDash(d.lineDash=a.lineDash),d.lineDashOffset!=a.lineDashOffset&&(d.lineDashOffset=a.lineDashOffset,h.lineDashOffset=a.lineDashOffset)),d.lineJoin!=a.lineJoin&&(d.lineJoin=a.lineJoin,h.lineJoin=a.lineJoin),d.lineWidth!=a.lineWidth&&(d.lineWidth=a.lineWidth,h.lineWidth=a.lineWidth),d.miterLimit!=a.miterLimit&&(d.miterLimit=a.miterLimit,h.miterLimit=a.miterLimit),d.strokeStyle!=a.strokeStyle&&(d.strokeStyle=a.strokeStyle,h.strokeStyle=a.strokeStyle)):(h.lineCap=a.lineCap,h.setLineDash&&(h.setLineDash(a.lineDash),h.lineDashOffset=a.lineDashOffset),h.lineJoin=a.lineJoin,h.lineWidth=a.lineWidth,h.miterLimit=a.miterLimit,h.strokeStyle=a.strokeStyle,this.contextStrokeState_={lineCap:a.lineCap,lineDash:a.lineDash,lineDashOffset:a.lineDashOffset,lineJoin:a.lineJoin,lineWidth:a.lineWidth,miterLimit:a.miterLimit,strokeStyle:a.strokeStyle})},l.prototype.setContextTextState_=function(a){var h=this.context_,d=this.contextTextState_,f=a.textAlign?a.textAlign:bS;d?(d.font!=a.font&&(d.font=a.font,h.font=a.font),d.textAlign!=f&&(d.textAlign=f,h.textAlign=f),d.textBaseline!=a.textBaseline&&(d.textBaseline=a.textBaseline,h.textBaseline=a.textBaseline)):(h.font=a.font,h.textAlign=f,h.textBaseline=a.textBaseline,this.contextTextState_={font:a.font,textAlign:f,textBaseline:a.textBaseline})},l.prototype.setFillStrokeStyle=function(a,h){var d=this;if(a){var f=a.getColor();this.fillState_={fillStyle:_u(f||_h)}}else this.fillState_=null;if(h){var m=h.getColor(),g=h.getLineCap(),y=h.getLineDash(),v=h.getLineDashOffset(),_=h.getLineJoin(),S=h.getWidth(),b=h.getMiterLimit(),T=y||yS;this.strokeState_={lineCap:void 0!==g?g:ZC,lineDash:1===this.pixelRatio_?T:T.map(function(x){return x*d.pixelRatio_}),lineDashOffset:(v||0)*this.pixelRatio_,lineJoin:void 0!==_?_:Ay,lineWidth:(void 0!==S?S:1)*this.pixelRatio_,miterLimit:void 0!==b?b:10,strokeStyle:_u(m||SS)}}else this.strokeState_=null},l.prototype.setImageStyle=function(a){var h;if(a&&(h=a.getSize())){var d=a.getAnchor(),f=a.getOrigin();this.image_=a.getImage(this.pixelRatio_),this.imageAnchorX_=d[0]*this.pixelRatio_,this.imageAnchorY_=d[1]*this.pixelRatio_,this.imageHeight_=h[1]*this.pixelRatio_,this.imageOpacity_=a.getOpacity(),this.imageOriginX_=f[0],this.imageOriginY_=f[1],this.imageRotateWithView_=a.getRotateWithView(),this.imageRotation_=a.getRotation(),this.imageScale_=a.getScaleArray(),this.imageWidth_=h[0]*this.pixelRatio_}else this.image_=null},l.prototype.setTextStyle=function(a){if(a){var h=a.getFill();if(h){var d=h.getColor();this.textFillState_={fillStyle:_u(d||_h)}}else this.textFillState_=null;var f=a.getStroke();if(f){var m=f.getColor(),g=f.getLineCap(),y=f.getLineDash(),v=f.getLineDashOffset(),_=f.getLineJoin(),S=f.getWidth(),b=f.getMiterLimit();this.textStrokeState_={lineCap:void 0!==g?g:ZC,lineDash:y||yS,lineDashOffset:v||0,lineJoin:void 0!==_?_:Ay,lineWidth:void 0!==S?S:1,miterLimit:void 0!==b?b:10,strokeStyle:_u(m||SS)}}else this.textStrokeState_=null;var T=a.getFont(),x=a.getOffsetX(),E=a.getOffsetY(),D=a.getRotateWithView(),I=a.getRotation(),M=a.getScaleArray(),L=a.getText(),P=a.getTextAlign(),F=a.getTextBaseline();this.textState_={font:void 0!==T?T:b9,textAlign:void 0!==P?P:bS,textBaseline:void 0!==F?F:KC},this.text_=void 0!==L?Array.isArray(L)?L.reduce(function(V,z,q){return V+(q%2?" ":z)},""):L:"",this.textOffsetX_=void 0!==x?this.pixelRatio_*x:0,this.textOffsetY_=void 0!==E?this.pixelRatio_*E:0,this.textRotateWithView_=void 0!==D&&D,this.textRotation_=void 0!==I?I:0,this.textScale_=[this.pixelRatio_*M[0],this.pixelRatio_*M[1]]}else this.text_=""},l}(G7);const X7=CTe;var xTe=function(){var c=function(l,a){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,d){h.__proto__=d}||function(h,d){for(var f in d)Object.prototype.hasOwnProperty.call(d,f)&&(h[f]=d[f])})(l,a)};return function(l,a){if("function"!=typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");function h(){this.constructor=l}c(l,a),l.prototype=null===a?Object.create(a):(h.prototype=a.prototype,new h)}}(),NS=null,ETe=function(c){function l(a,h,d,f,m,g){var y=c.call(this)||this;return y.hitDetectionImage_=null,y.image_=a||new Image,null!==f&&(y.image_.crossOrigin=f),y.canvas_={},y.color_=g,y.unlisten_=null,y.imageState_=m,y.size_=d,y.src_=h,y}return xTe(l,c),l.prototype.isTainted_=function(){if(void 0===this.tainted_&&2===this.imageState_){NS||(NS=Qs(1,1)),NS.drawImage(this.image_,0,0);try{NS.getImageData(0,0,1,1),this.tainted_=!1}catch{NS=null,this.tainted_=!0}}return!0===this.tainted_},l.prototype.dispatchChangeEvent_=function(){this.dispatchEvent("change")},l.prototype.handleImageError_=function(){this.imageState_=3,this.unlistenImage_(),this.dispatchChangeEvent_()},l.prototype.handleImageLoad_=function(){this.imageState_=2,this.size_?(this.image_.width=this.size_[0],this.image_.height=this.size_[1]):this.size_=[this.image_.width,this.image_.height],this.unlistenImage_(),this.dispatchChangeEvent_()},l.prototype.getImage=function(a){return this.replaceColor_(a),this.canvas_[a]?this.canvas_[a]:this.image_},l.prototype.getPixelRatio=function(a){return this.replaceColor_(a),this.canvas_[a]?a:1},l.prototype.getImageState=function(){return this.imageState_},l.prototype.getHitDetectionImage=function(){if(!this.hitDetectionImage_)if(this.isTainted_()){var a=this.size_[0],h=this.size_[1],d=Qs(a,h);d.fillRect(0,0,a,h),this.hitDetectionImage_=d.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_},l.prototype.getSize=function(){return this.size_},l.prototype.getSrc=function(){return this.src_},l.prototype.load=function(){if(0==this.imageState_){this.imageState_=1;try{this.image_.src=this.src_}catch{this.handleImageError_()}this.unlisten_=L2(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this))}},l.prototype.replaceColor_=function(a){if(this.color_&&!this.canvas_[a]&&2===this.imageState_){var h=document.createElement("canvas");this.canvas_[a]=h,h.width=Math.ceil(this.image_.width*a),h.height=Math.ceil(this.image_.height*a);var d=h.getContext("2d");if(d.scale(a,a),d.drawImage(this.image_,0,0),d.globalCompositeOperation="multiply","multiply"===d.globalCompositeOperation||this.isTainted_())d.fillStyle=JH(this.color_),d.fillRect(0,0,h.width/a,h.height/a),d.globalCompositeOperation="destination-in",d.drawImage(this.image_,0,0);else{for(var f=d.getImageData(0,0,h.width,h.height),m=f.data,g=this.color_[0]/255,y=this.color_[1]/255,v=this.color_[2]/255,_=this.color_[3],S=0,b=m.length;S<b;S+=4)m[S]*=g,m[S+1]*=y,m[S+2]*=v,m[S+3]*=_;d.putImageData(f,0,0)}}},l.prototype.unlistenImage_=function(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)},l}(My),DTe=function(){var c=function(l,a){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,d){h.__proto__=d}||function(h,d){for(var f in d)Object.prototype.hasOwnProperty.call(d,f)&&(h[f]=d[f])})(l,a)};return function(l,a){if("function"!=typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");function h(){this.constructor=l}c(l,a),l.prototype=null===a?Object.create(a):(h.prototype=a.prototype,new h)}}(),ATe=function(c){function l(a){var h=this,d=a||{};(h=c.call(this,{opacity:void 0!==d.opacity?d.opacity:1,rotation:void 0!==d.rotation?d.rotation:0,scale:void 0!==d.scale?d.scale:1,displacement:void 0!==d.displacement?d.displacement:[0,0],rotateWithView:void 0!==d.rotateWithView&&d.rotateWithView})||this).anchor_=void 0!==d.anchor?d.anchor:[.5,.5],h.normalizedAnchor_=null,h.anchorOrigin_=void 0!==d.anchorOrigin?d.anchorOrigin:"top-left",h.anchorXUnits_=void 0!==d.anchorXUnits?d.anchorXUnits:"fraction",h.anchorYUnits_=void 0!==d.anchorYUnits?d.anchorYUnits:"fraction",h.crossOrigin_=void 0!==d.crossOrigin?d.crossOrigin:null;var v=void 0!==d.img?d.img:null;h.imgSize_=d.imgSize;var _=d.src;bn(!(void 0!==_&&v),4),bn(!v||v&&h.imgSize_,5),(void 0===_||0===_.length)&&v&&(_=v.src||tn(v)),bn(void 0!==_&&_.length>0,6);var S=void 0!==d.src?0:2;return h.color_=void 0!==d.color?fS(d.color):null,h.iconImage_=function MTe(c,l,a,h,d,f){var m=zC.get(l,h,f);return m||(m=new ETe(c,l,a,h,d,f),zC.set(l,h,f,m)),m}(v,_,void 0!==h.imgSize_?h.imgSize_:null,h.crossOrigin_,S,h.color_),h.offset_=void 0!==d.offset?d.offset:[0,0],h.offsetOrigin_=void 0!==d.offsetOrigin?d.offsetOrigin:"top-left",h.origin_=null,h.size_=void 0!==d.size?d.size:null,h}return DTe(l,c),l.prototype.clone=function(){var a=this.getScale();return new l({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,crossOrigin:this.crossOrigin_,imgSize:this.imgSize_,offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,opacity:this.getOpacity(),rotateWithView:this.getRotateWithView(),rotation:this.getRotation(),scale:Array.isArray(a)?a.slice():a,size:null!==this.size_?this.size_.slice():void 0,src:this.getSrc()})},l.prototype.getAnchor=function(){var a=this.normalizedAnchor_;if(!a){a=this.anchor_;var h=this.getSize();if("fraction"==this.anchorXUnits_||"fraction"==this.anchorYUnits_){if(!h)return null;a=this.anchor_.slice(),"fraction"==this.anchorXUnits_&&(a[0]*=h[0]),"fraction"==this.anchorYUnits_&&(a[1]*=h[1])}if("top-left"!=this.anchorOrigin_){if(!h)return null;a===this.anchor_&&(a=this.anchor_.slice()),("top-right"==this.anchorOrigin_||"bottom-right"==this.anchorOrigin_)&&(a[0]=-a[0]+h[0]),("bottom-left"==this.anchorOrigin_||"bottom-right"==this.anchorOrigin_)&&(a[1]=-a[1]+h[1])}this.normalizedAnchor_=a}var d=this.getDisplacement();return[a[0]-d[0],a[1]+d[1]]},l.prototype.setAnchor=function(a){this.anchor_=a,this.normalizedAnchor_=null},l.prototype.getColor=function(){return this.color_},l.prototype.getImage=function(a){return this.iconImage_.getImage(a)},l.prototype.getPixelRatio=function(a){return this.iconImage_.getPixelRatio(a)},l.prototype.getImageSize=function(){return this.iconImage_.getSize()},l.prototype.getImageState=function(){return this.iconImage_.getImageState()},l.prototype.getHitDetectionImage=function(){return this.iconImage_.getHitDetectionImage()},l.prototype.getOrigin=function(){if(this.origin_)return this.origin_;var a=this.offset_;if("top-left"!=this.offsetOrigin_){var h=this.getSize(),d=this.iconImage_.getSize();if(!h||!d)return null;a=a.slice(),("top-right"==this.offsetOrigin_||"bottom-right"==this.offsetOrigin_)&&(a[0]=d[0]-h[0]-a[0]),("bottom-left"==this.offsetOrigin_||"bottom-right"==this.offsetOrigin_)&&(a[1]=d[1]-h[1]-a[1])}return this.origin_=a,this.origin_},l.prototype.getSrc=function(){return this.iconImage_.getSrc()},l.prototype.getSize=function(){return this.size_?this.size_:this.iconImage_.getSize()},l.prototype.listenImageChange=function(a){this.iconImage_.addEventListener("change",a)},l.prototype.load=function(){this.iconImage_.load()},l.prototype.unlistenImageChange=function(a){this.iconImage_.removeEventListener("change",a)},l}(w7);const vx=ATe;var Qa=.5;function q7(c,l,a,h,d,f,m){var v=Qs(c[0]*Qa,c[1]*Qa);v.imageSmoothingEnabled=!1;for(var _=v.canvas,S=new X7(v,Qa,d,null,m),b=a.length,T=Math.floor(16777215/b),x={},E=1;E<=b;++E){var D=a[E-1],I=D.getStyleFunction()||h;if(h){var M=I(D,f);if(M){Array.isArray(M)||(M=[M]);for(var P="#"+("000000"+(E*T).toString(16)).slice(-6),F=0,V=M.length;F<V;++F){var z=M[F],q=z.getGeometryFunction()(D);if(q&&Mi(d,q.getExtent())){var K=z.clone(),se=K.getFill();se&&se.setColor(P);var W=K.getStroke();W&&(W.setColor(P),W.setLineDash(null)),K.setText(void 0);var Q=z.getImage();if(Q&&0!==Q.getOpacity()){var ie=Q.getImageSize();if(!ie)continue;var ae=Qs(ie[0],ie[1],void 0,{alpha:!1}),he=ae.canvas;ae.fillStyle=P,ae.fillRect(0,0,he.width,he.height),K.setImage(new vx({img:he,imgSize:ie,anchor:Q.getAnchor(),anchorXUnits:"pixels",anchorYUnits:"pixels",offset:Q.getOrigin(),opacity:1,size:Q.getSize(),scale:Q.getScale(),rotation:Q.getRotation(),rotateWithView:Q.getRotateWithView()}))}var J=K.getZIndex()||0;(ce=x[J])||(x[J]=ce={},ce.Polygon=[],ce.Circle=[],ce.LineString=[],ce.Point=[]),ce[q.getType().replace("Multi","")].push(q,K)}}}}}for(var be=Object.keys(x).map(Number).sort(Pp),we=(E=0,be.length);E<we;++E){var ce=x[be[E]];for(var Ce in ce){var Te=ce[Ce];for(F=0,V=Te.length;F<V;F+=2){S.setStyle(Te[F+1]);for(var fe=0,$e=l.length;fe<$e;++fe)S.setTransform(l[fe]),S.drawGeometry(Te[F])}}}return v.getImageData(0,0,_.width,_.height)}function $7(c,l,a){var h=[];if(a){var d=Math.floor(Math.round(c[0])*Qa),f=Math.floor(Math.round(c[1])*Qa),m=4*(qn(d,0,a.width-1)+qn(f,0,a.height-1)*a.width),_=a.data[m+2]+256*(a.data[m+1]+256*a.data[m]),S=Math.floor(16777215/l.length);_&&_%S==0&&h.push(l[_/S-1])}return h}var Y7={Point:function VTe(c,l,a,h,d){var g,f=a.getImage(),m=a.getText();if(d&&(c=d,g=f&&m&&m.getText()?{}:void 0),f){if(2!=f.getImageState())return;var y=c.getBuilder(a.getZIndex(),"Image");y.setImageStyle(f,g),y.drawPoint(l,h)}if(m&&m.getText()){var v=c.getBuilder(a.getZIndex(),"Text");v.setTextStyle(m,g),v.drawText(l,h)}},LineString:function NTe(c,l,a,h,d){var f=a.getStroke();if(f){var m=c.getBuilder(a.getZIndex(),"LineString");m.setFillStrokeStyle(null,f),m.drawLineString(l,h)}var g=a.getText();if(g&&g.getText()){var y=(d||c).getBuilder(a.getZIndex(),"Text");y.setTextStyle(g),y.drawText(l,h)}},Polygon:function UTe(c,l,a,h,d){var f=a.getFill(),m=a.getStroke();if(f||m){var g=c.getBuilder(a.getZIndex(),"Polygon");g.setFillStrokeStyle(f,m),g.drawPolygon(l,h)}var y=a.getText();if(y&&y.getText()){var v=(d||c).getBuilder(a.getZIndex(),"Text");v.setTextStyle(y),v.drawText(l,h)}},MultiPoint:function BTe(c,l,a,h,d){var g,f=a.getImage(),m=a.getText();if(d&&(c=d,g=f&&m&&m.getText()?{}:void 0),f){if(2!=f.getImageState())return;var y=c.getBuilder(a.getZIndex(),"Image");y.setImageStyle(f,g),y.drawMultiPoint(l,h)}if(m&&m.getText()){var v=(d||c).getBuilder(a.getZIndex(),"Text");v.setTextStyle(m,g),v.drawText(l,h)}},MultiLineString:function FTe(c,l,a,h,d){var f=a.getStroke();if(f){var m=c.getBuilder(a.getZIndex(),"LineString");m.setFillStrokeStyle(null,f),m.drawMultiLineString(l,h)}var g=a.getText();if(g&&g.getText()){var y=(d||c).getBuilder(a.getZIndex(),"Text");y.setTextStyle(g),y.drawText(l,h)}},MultiPolygon:function kTe(c,l,a,h,d){var f=a.getFill(),m=a.getStroke();if(m||f){var g=c.getBuilder(a.getZIndex(),"Polygon");g.setFillStrokeStyle(f,m),g.drawMultiPolygon(l,h)}var y=a.getText();if(y&&y.getText()){var v=(d||c).getBuilder(a.getZIndex(),"Text");v.setTextStyle(y),v.drawText(l,h)}},GeometryCollection:function OTe(c,l,a,h,d){var m,g,f=l.getGeometriesArray();for(m=0,g=f.length;m<g;++m)(0,Y7[f[m].getType()])(c,f[m],a,h,d)},Circle:function PTe(c,l,a,h,d){var f=a.getFill(),m=a.getStroke();if(f||m){var g=c.getBuilder(a.getZIndex(),"Circle");g.setFillStrokeStyle(f,m),g.drawCircle(l,h)}var y=a.getText();if(y&&y.getText()){var v=(d||c).getBuilder(a.getZIndex(),"Text");v.setTextStyle(y),v.drawText(l,h)}}};function RTe(c,l){return parseInt(tn(c),10)-parseInt(tn(l),10)}function B2(c,l){var a=U2(c,l);return a*a}function U2(c,l){return.5*c/l}function _x(c,l,a,h,d,f,m){var g=!1,y=a.getImage();if(y){var v=y.getImageState();2==v||3==v?y.unlistenImageChange(d):(0==v&&y.load(),v=y.getImageState(),y.listenImageChange(d),g=!0)}return function LTe(c,l,a,h,d,f){var m=a.getGeometryFunction()(l);if(m){var g=m.simplifyTransformed(h,d);a.getRenderer()?Z7(c,g,a,l):(0,Y7[g.getType()])(c,g,a,l,f)}}(c,l,a,h,f,m),g}function Z7(c,l,a,h){if("GeometryCollection"!=l.getType())c.getBuilder(a.getZIndex(),"Default").drawCustom(l,h,a.getRenderer(),a.getHitDetectionRenderer());else for(var d=l.getGeometries(),f=0,m=d.length;f<m;++f)Z7(c,d[f],a,h)}var GTe=function(){var c=function(l,a){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,d){h.__proto__=d}||function(h,d){for(var f in d)Object.prototype.hasOwnProperty.call(d,f)&&(h[f]=d[f])})(l,a)};return function(l,a){if("function"!=typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");function h(){this.constructor=l}c(l,a),l.prototype=null===a?Object.create(a):(h.prototype=a.prototype,new h)}}(),zTe=function(c){function l(a){var h=c.call(this,a)||this;return h.boundHandleStyleImageChange_=h.handleStyleImageChange_.bind(h),h.dirty_=!1,h.hitDetectionImageData_=null,h.renderedFeatures_=null,h.renderedRevision_=-1,h.renderedResolution_=NaN,h.renderedExtent_=[1/0,1/0,-1/0,-1/0],h.wrappedRenderedExtent_=[1/0,1/0,-1/0,-1/0],h.renderedCenter_=null,h.renderedProjection_=null,h.renderedRenderOrder_=null,h.replayGroup_=null,h.replayGroupChanged=!0,h.declutterExecutorGroup=null,h.clipping=!0,h}return GTe(l,c),l.prototype.renderWorlds=function(a,h,d){var f=h.extent,m=h.viewState,g=m.center,y=m.resolution,v=m.projection,_=m.rotation,S=v.getExtent(),b=this.getLayer().getSource(),T=h.pixelRatio,x=h.viewHints,E=!(x[0]||x[1]),D=this.context,I=Math.round(h.size[0]*T),M=Math.round(h.size[1]*T),L=b.getWrapX()&&v.canWrapX(),P=L?fr(S):null,F=L?Math.ceil((f[2]-S[2])/P)+1:1,V=L?Math.floor((f[0]-S[0])/P):0;do{var z=this.getRenderTransform(g,y,_,T,I,M,V*P);a.execute(D,1,z,_,E,void 0,d)}while(++V<F)},l.prototype.renderDeclutter=function(a){this.declutterExecutorGroup&&this.renderWorlds(this.declutterExecutorGroup,a,a.declutterTree)},l.prototype.renderFrame=function(a,h){var d=a.pixelRatio,f=a.layerStatesArray[a.layerIndex];(function jve(c,l,a){lS(c,l,0,0,a,0,0)})(this.pixelTransform,1/d,1/d),by(this.inversePixelTransform,this.pixelTransform);var m=kC(this.pixelTransform);this.useContainer(h,m,f.opacity,this.getBackground(a));var g=this.context,y=g.canvas,v=this.replayGroup_,_=this.declutterExecutorGroup;if((!v||v.isEmpty())&&(!_||_.isEmpty()))return null;var S=Math.round(a.size[0]*d),b=Math.round(a.size[1]*d);y.width!=S||y.height!=b?(y.width=S,y.height=b,y.style.transform!==m&&(y.style.transform=m)):this.containerReused||g.clearRect(0,0,S,b),this.preRender(g,a);var T=a.viewState,E=!1,D=!0;if(f.extent&&this.clipping){var I=wh(f.extent);(E=(D=Mi(I,a.extent))&&!xa(I,a.extent))&&this.clipUnrotated(g,a,I)}D&&this.renderWorlds(v,a),E&&g.restore(),this.postRender(g,a);var M=_9(f.opacity),L=this.container;return M!==L.style.opacity&&(L.style.opacity=M),this.renderedRotation_!==T.rotation&&(this.renderedRotation_=T.rotation,this.hitDetectionImageData_=null),this.container},l.prototype.getFeatures=function(a){return new Promise(function(h){if(!this.hitDetectionImageData_&&!this.animatingOrInteracting_){var d=[this.context.canvas.width,this.context.canvas.height];ni(this.pixelTransform,d);var f=this.renderedCenter_,m=this.renderedResolution_,g=this.renderedRotation_,y=this.renderedProjection_,v=this.wrappedRenderedExtent_,_=this.getLayer(),S=[],b=d[0]*Qa,T=d[1]*Qa;S.push(this.getRenderTransform(f,m,g,Qa,b,T,0).slice());var x=_.getSource(),E=y.getExtent();if(x.getWrapX()&&y.canWrapX()&&!xa(E,v)){for(var D=v[0],I=fr(E),M=0;D<E[0];)--M,S.push(this.getRenderTransform(f,m,g,Qa,b,T,I*M).slice()),D+=I;for(M=0,D=v[2];D>E[2];)++M,S.push(this.getRenderTransform(f,m,g,Qa,b,T,I*M).slice()),D-=I}this.hitDetectionImageData_=q7(d,S,this.renderedFeatures_,_.getStyleFunction(),v,m,g)}h($7(a,this.renderedFeatures_,this.hitDetectionImageData_))}.bind(this))},l.prototype.forEachFeatureAtCoordinate=function(a,h,d,f,m){var g=this;if(this.replayGroup_){var T,y=h.viewState.resolution,v=h.viewState.rotation,_=this.getLayer(),S={},b=function(E,D,I){var M=tn(E),L=S[M];if(L){if(!0!==L&&I<L.distanceSq){if(0===I)return S[M]=!0,m.splice(m.lastIndexOf(L),1),f(E,_,D);L.geometry=D,L.distanceSq=I}}else{if(0===I)return S[M]=!0,f(E,_,D);m.push(S[M]={feature:E,layer:_,geometry:D,distanceSq:I,callback:f})}},x=[this.replayGroup_];return this.declutterExecutorGroup&&x.push(this.declutterExecutorGroup),x.some(function(E){return T=E.forEachFeatureAtCoordinate(a,y,v,d,b,E===g.declutterExecutorGroup&&h.declutterTree?h.declutterTree.all().map(function(D){return D.value}):null)}),T}},l.prototype.handleFontsChanged=function(){var a=this.getLayer();a.getVisible()&&this.replayGroup_&&a.changed()},l.prototype.handleStyleImageChange_=function(a){this.renderIfReadyAndVisible()},l.prototype.prepareFrame=function(a){var h=this.getLayer(),d=h.getSource();if(!d)return!1;var f=a.viewHints[0],m=a.viewHints[1],g=h.getUpdateWhileAnimating(),y=h.getUpdateWhileInteracting();if(!this.dirty_&&!g&&f||!y&&m)return this.animatingOrInteracting_=!0,!0;this.animatingOrInteracting_=!1;var v=a.extent,_=a.viewState,S=_.projection,b=_.resolution,T=a.pixelRatio,x=h.getRevision(),E=h.getRenderBuffer(),D=h.getRenderOrder();void 0===D&&(D=RTe);var I=_.center.slice(),M=$a(v,E*b),L=M.slice(),P=[M.slice()],F=S.getExtent();if(d.getWrapX()&&S.canWrapX()&&!xa(F,a.extent)){var V=fr(F),z=Math.max(fr(M)/2,V);M[0]=F[0]-z,M[2]=F[2]+z,WL(I,S);var q=$H(P[0],S);q[0]<F[0]&&q[2]<F[2]?P.push([q[0]+V,q[1],q[2]+V,q[3]]):q[0]>F[0]&&q[2]>F[2]&&P.push([q[0]-V,q[1],q[2]-V,q[3]])}if(!this.dirty_&&this.renderedResolution_==b&&this.renderedRevision_==x&&this.renderedRenderOrder_==D&&xa(this.wrappedRenderedExtent_,M))return Fd(this.renderedExtent_,L)||(this.hitDetectionImageData_=null,this.renderedExtent_=L),this.renderedCenter_=I,this.replayGroupChanged=!1,!0;this.replayGroup_=null,this.dirty_=!1;var se,K=new gx(U2(b,T),M,b,T);this.getLayer().getDeclutter()&&(se=new gx(U2(b,T),M,b,T));var Q,W=xS();if(W){for(var ie=0,ae=P.length;ie<ae;++ie){var J=s2(P[ie]);d.loadFeatures(J,d0e(b),W)}Q=Sh(W,S)}else for(ie=0,ae=P.length;ie<ae;++ie)d.loadFeatures(P[ie],b,S);var ce=B2(b,T),be=function($e){var Ve,De=$e.getStyleFunction()||h.getStyleFunction();if(De&&(Ve=De($e,b)),Ve){var en=this.renderFeature($e,ce,Ve,K,Q,se);this.dirty_=this.dirty_||en}}.bind(this),we=s2(M),Ce=d.getFeaturesInExtent(we);for(D&&Ce.sort(D),ie=0,ae=Ce.length;ie<ae;++ie)be(Ce[ie]);this.renderedFeatures_=Ce;var Te=K.finish(),fe=new yx(M,b,T,d.getOverlaps(),Te,h.getRenderBuffer());return se&&(this.declutterExecutorGroup=new yx(M,b,T,d.getOverlaps(),se.finish(),h.getRenderBuffer())),this.renderedResolution_=b,this.renderedRevision_=x,this.renderedRenderOrder_=D,this.renderedExtent_=L,this.wrappedRenderedExtent_=M,this.renderedCenter_=I,this.renderedProjection_=S,this.replayGroup_=fe,this.hitDetectionImageData_=null,this.replayGroupChanged=!0,!0},l.prototype.renderFeature=function(a,h,d,f,m,g){if(!d)return!1;var y=!1;if(Array.isArray(d))for(var v=0,_=d.length;v<_;++v)y=_x(f,a,d[v],h,this.boundHandleStyleImageChange_,m,g)||y;else y=_x(f,a,d,h,this.boundHandleStyleImageChange_,m,g);return y},l}(R2);const G2=zTe;var HTe=function(){var c=function(l,a){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,d){h.__proto__=d}||function(h,d){for(var f in d)Object.prototype.hasOwnProperty.call(d,f)&&(h[f]=d[f])})(l,a)};return function(l,a){if("function"!=typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");function h(){this.constructor=l}c(l,a),l.prototype=null===a?Object.create(a):(h.prototype=a.prototype,new h)}}(),jTe=function(c){function l(a){return c.call(this,a)||this}return HTe(l,c),l.prototype.createRenderer=function(){return new G2(this)},l}($p);const bu=jTe;var WTe=function(){var c=function(l,a){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,d){h.__proto__=d}||function(h,d){for(var f in d)Object.prototype.hasOwnProperty.call(d,f)&&(h[f]=d[f])})(l,a)};return function(l,a){if("function"!=typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");function h(){this.constructor=l}c(l,a),l.prototype=null===a?Object.create(a):(h.prototype=a.prototype,new h)}}(),XTe=function(c){function l(a,h,d,f,m,g){var y=c.call(this,a,h,g)||this;return y.extent=null,y.format_=f,y.features_=null,y.projection=null,y.tileLoadFunction_=m,y.url_=d,y.key=d,y}return WTe(l,c),l.prototype.getFormat=function(){return this.format_},l.prototype.getFeatures=function(){return this.features_},l.prototype.load=function(){0==this.state&&(this.setState(1),this.tileLoadFunction_(this,this.url_),this.loader_&&this.loader_(this.extent,this.resolution,this.projection))},l.prototype.onLoad=function(a,h){this.setFeatures(a)},l.prototype.onError=function(){this.setState(3)},l.prototype.setFeatures=function(a){this.features_=a,this.setState(2)},l.prototype.setLoader=function(a){this.loader_=a},l}(fx);const qTe=XTe;var $Te=function(){function c(l){this.highWaterMark=void 0!==l?l:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}return c.prototype.canExpireCache=function(){return this.highWaterMark>0&&this.getCount()>this.highWaterMark},c.prototype.expireCache=function(l){for(;this.canExpireCache();)this.pop()},c.prototype.clear=function(){this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null},c.prototype.containsKey=function(l){return this.entries_.hasOwnProperty(l)},c.prototype.forEach=function(l){for(var a=this.oldest_;a;)l(a.value_,a.key_,this),a=a.newer},c.prototype.get=function(l,a){var h=this.entries_[l];return bn(void 0!==h,15),h===this.newest_||(h===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(h.newer.older=h.older,h.older.newer=h.newer),h.newer=null,h.older=this.newest_,this.newest_.newer=h,this.newest_=h),h.value_},c.prototype.remove=function(l){var a=this.entries_[l];return bn(void 0!==a,15),a===this.newest_?(this.newest_=a.older,this.newest_&&(this.newest_.newer=null)):a===this.oldest_?(this.oldest_=a.newer,this.oldest_&&(this.oldest_.older=null)):(a.newer.older=a.older,a.older.newer=a.newer),delete this.entries_[l],--this.count_,a.value_},c.prototype.getCount=function(){return this.count_},c.prototype.getKeys=function(){var h,l=new Array(this.count_),a=0;for(h=this.newest_;h;h=h.older)l[a++]=h.key_;return l},c.prototype.getValues=function(){var h,l=new Array(this.count_),a=0;for(h=this.newest_;h;h=h.older)l[a++]=h.value_;return l},c.prototype.peekLast=function(){return this.oldest_.value_},c.prototype.peekLastKey=function(){return this.oldest_.key_},c.prototype.peekFirstKey=function(){return this.newest_.key_},c.prototype.pop=function(){var l=this.oldest_;return delete this.entries_[l.key_],l.newer&&(l.newer.older=null),this.oldest_=l.newer,this.oldest_||(this.newest_=null),--this.count_,l.value_},c.prototype.replace=function(l,a){this.get(l),this.entries_[l].value_=a},c.prototype.set=function(l,a){bn(!(l in this.entries_),16);var h={key_:l,newer:null,older:this.newest_,value_:a};this.newest_?this.newest_.newer=h:this.oldest_=h,this.newest_=h,this.entries_[l]=h,++this.count_},c.prototype.setSize=function(l){this.highWaterMark=l},c}();const YTe=$Te;function K7(c,l,a,h){return void 0!==h?(h[0]=c,h[1]=l,h[2]=a,h):[c,l,a]}function By(c,l,a){return c+"/"+l+"/"+a}function Q7(c){return By(c[0],c[1],c[2])}function J7(c){return c.split("/").map(Number)}function ej(c){return(c[1]<<c[0])+c[2]}var QTe=function(){var c=function(l,a){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,d){h.__proto__=d}||function(h,d){for(var f in d)Object.prototype.hasOwnProperty.call(d,f)&&(h[f]=d[f])})(l,a)};return function(l,a){if("function"!=typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");function h(){this.constructor=l}c(l,a),l.prototype=null===a?Object.create(a):(h.prototype=a.prototype,new h)}}(),JTe=function(c){function l(){return null!==c&&c.apply(this,arguments)||this}return QTe(l,c),l.prototype.expireCache=function(a){for(;this.canExpireCache()&&!(this.peekLast().getKey()in a);)this.pop().release()},l.prototype.pruneExceptNewestZ=function(){if(0!==this.getCount()){var d=J7(this.peekFirstKey())[0];this.forEach(function(f){f.tileCoord[0]!==d&&(this.remove(Q7(f.tileCoord)),f.release())}.bind(this))}},l}(YTe);const z2=JTe;var e1e=function(){var c=function(l,a){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,d){h.__proto__=d}||function(h,d){for(var f in d)Object.prototype.hasOwnProperty.call(d,f)&&(h[f]=d[f])})(l,a)};return function(l,a){if("function"!=typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");function h(){this.constructor=l}c(l,a),l.prototype=null===a?Object.create(a):(h.prototype=a.prototype,new h)}}(),t1e=function(c){function l(a){var h=c.call(this)||this;h.projection=cn(a.projection),h.attributions_=tj(a.attributions),h.attributionsCollapsible_=void 0===a.attributionsCollapsible||a.attributionsCollapsible,h.loading=!1,h.state_=void 0!==a.state?a.state:"ready",h.wrapX_=void 0!==a.wrapX&&a.wrapX,h.interpolate_=!!a.interpolate,h.viewResolver=null,h.viewRejector=null;var d=h;return h.viewPromise_=new Promise(function(f,m){d.viewResolver=f,d.viewRejector=m}),h}return e1e(l,c),l.prototype.getAttributions=function(){return this.attributions_},l.prototype.getAttributionsCollapsible=function(){return this.attributionsCollapsible_},l.prototype.getProjection=function(){return this.projection},l.prototype.getResolutions=function(){return _n()},l.prototype.getView=function(){return this.viewPromise_},l.prototype.getState=function(){return this.state_},l.prototype.getWrapX=function(){return this.wrapX_},l.prototype.getInterpolate=function(){return this.interpolate_},l.prototype.refresh=function(){this.changed()},l.prototype.setAttributions=function(a){this.attributions_=tj(a),this.changed()},l.prototype.setState=function(a){this.state_=a,this.changed()},l}(yc);function tj(c){return c?Array.isArray(c)?function(l){return c}:"function"==typeof c?c:function(l){return[c]}:null}const FS=t1e;var n1e=[0,0,0],r1e=function(){function c(l){var a;if(this.minZoom=void 0!==l.minZoom?l.minZoom:0,this.resolutions_=l.resolutions,bn(function Rve(c,l,a){var h=l||Pp;return c.every(function(d,f){if(0===f)return!0;var m=h(c[f-1],d);return!(m>0||a&&0===m)})}(this.resolutions_,function(m,g){return g-m},!0),17),!l.origins)for(var h=0,d=this.resolutions_.length-1;h<d;++h)if(a){if(this.resolutions_[h]/this.resolutions_[h+1]!==a){a=void 0;break}}else a=this.resolutions_[h]/this.resolutions_[h+1];this.zoomFactor_=a,this.maxZoom=this.resolutions_.length-1,this.origin_=void 0!==l.origin?l.origin:null,this.origins_=null,void 0!==l.origins&&(this.origins_=l.origins,bn(this.origins_.length==this.resolutions_.length,20));var f=l.extent;void 0!==f&&!this.origin_&&!this.origins_&&(this.origin_=fu(f)),bn(!this.origin_&&this.origins_||this.origin_&&!this.origins_,18),this.tileSizes_=null,void 0!==l.tileSizes&&(this.tileSizes_=l.tileSizes,bn(this.tileSizes_.length==this.resolutions_.length,19)),this.tileSize_=void 0!==l.tileSize?l.tileSize:this.tileSizes_?null:256,bn(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,22),this.extent_=void 0!==f?f:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],this.tmpExtent_=[0,0,0,0],void 0!==l.sizes?this.fullTileRanges_=l.sizes.map(function(m,g){var y=new V7(Math.min(0,m[0]),Math.max(m[0]-1,-1),Math.min(0,m[1]),Math.max(m[1]-1,-1));if(f){var v=this.getTileRangeForExtentAndZ(f,g);y.minX=Math.max(v.minX,y.minX),y.maxX=Math.min(v.maxX,y.maxX),y.minY=Math.max(v.minY,y.minY),y.maxY=Math.min(v.maxY,y.maxY)}return y},this):f&&this.calculateTileRanges_(f)}return c.prototype.forEachTileCoord=function(l,a,h){for(var d=this.getTileRangeForExtentAndZ(l,a),f=d.minX,m=d.maxX;f<=m;++f)for(var g=d.minY,y=d.maxY;g<=y;++g)h([a,f,g])},c.prototype.forEachTileCoordParentTileRange=function(l,a,h,d){var m,g,y=null,v=l[0]-1;for(2===this.zoomFactor_?(m=l[1],g=l[2]):y=this.getTileCoordExtent(l,d);v>=this.minZoom;){if(a(v,2===this.zoomFactor_?ky(m=Math.floor(m/2),m,g=Math.floor(g/2),g,h):this.getTileRangeForExtentAndZ(y,v,h)))return!0;--v}return!1},c.prototype.getExtent=function(){return this.extent_},c.prototype.getMaxZoom=function(){return this.maxZoom},c.prototype.getMinZoom=function(){return this.minZoom},c.prototype.getOrigin=function(l){return this.origin_?this.origin_:this.origins_[l]},c.prototype.getResolution=function(l){return this.resolutions_[l]},c.prototype.getResolutions=function(){return this.resolutions_},c.prototype.getTileCoordChildTileRange=function(l,a,h){if(l[0]<this.maxZoom){if(2===this.zoomFactor_){var d=2*l[1],f=2*l[2];return ky(d,d+1,f,f+1,a)}var m=this.getTileCoordExtent(l,h||this.tmpExtent_);return this.getTileRangeForExtentAndZ(m,l[0]+1,a)}return null},c.prototype.getTileRangeForTileCoordAndZ=function(l,a,h){if(a>this.maxZoom||a<this.minZoom)return null;var d=l[0],f=l[1],m=l[2];if(a===d)return ky(f,m,f,m,h);if(this.zoomFactor_){var g=Math.pow(this.zoomFactor_,a-d),y=Math.floor(f*g),v=Math.floor(m*g);return a<d?ky(y,y,v,v,h):ky(y,Math.floor(g*(f+1))-1,v,Math.floor(g*(m+1))-1,h)}var b=this.getTileCoordExtent(l,this.tmpExtent_);return this.getTileRangeForExtentAndZ(b,a,h)},c.prototype.getTileRangeExtent=function(l,a,h){var d=this.getOrigin(l),f=this.getResolution(l),m=uo(this.getTileSize(l),this.tmpSize_);return du(d[0]+a.minX*m[0]*f,d[1]+a.minY*m[1]*f,d[0]+(a.maxX+1)*m[0]*f,d[1]+(a.maxY+1)*m[1]*f,h)},c.prototype.getTileRangeForExtentAndZ=function(l,a,h){var d=n1e;this.getTileCoordForXYAndZ_(l[0],l[3],a,!1,d);var f=d[1],m=d[2];return this.getTileCoordForXYAndZ_(l[2],l[1],a,!0,d),ky(f,d[1],m,d[2],h)},c.prototype.getTileCoordCenter=function(l){var a=this.getOrigin(l[0]),h=this.getResolution(l[0]),d=uo(this.getTileSize(l[0]),this.tmpSize_);return[a[0]+(l[1]+.5)*d[0]*h,a[1]-(l[2]+.5)*d[1]*h]},c.prototype.getTileCoordExtent=function(l,a){var h=this.getOrigin(l[0]),d=this.getResolution(l[0]),f=uo(this.getTileSize(l[0]),this.tmpSize_),m=h[0]+l[1]*f[0]*d,g=h[1]-(l[2]+1)*f[1]*d;return du(m,g,m+f[0]*d,g+f[1]*d,a)},c.prototype.getTileCoordForCoordAndResolution=function(l,a,h){return this.getTileCoordForXYAndResolution_(l[0],l[1],a,!1,h)},c.prototype.getTileCoordForXYAndResolution_=function(l,a,h,d,f){var m=this.getZForResolution(h),g=h/this.getResolution(m),y=this.getOrigin(m),v=uo(this.getTileSize(m),this.tmpSize_),_=g*(l-y[0])/h/v[0],S=g*(y[1]-a)/h/v[1];return d?(_=Bd(_,5)-1,S=Bd(S,5)-1):(_=xy(_,5),S=xy(S,5)),K7(m,_,S,f)},c.prototype.getTileCoordForXYAndZ_=function(l,a,h,d,f){var m=this.getOrigin(h),g=this.getResolution(h),y=uo(this.getTileSize(h),this.tmpSize_),v=(l-m[0])/g/y[0],_=(m[1]-a)/g/y[1];return d?(v=Bd(v,5)-1,_=Bd(_,5)-1):(v=xy(v,5),_=xy(_,5)),K7(h,v,_,f)},c.prototype.getTileCoordForCoordAndZ=function(l,a,h){return this.getTileCoordForXYAndZ_(l[0],l[1],a,!1,h)},c.prototype.getTileCoordResolution=function(l){return this.resolutions_[l[0]]},c.prototype.getTileSize=function(l){return this.tileSize_?this.tileSize_:this.tileSizes_[l]},c.prototype.getFullTileRange=function(l){return this.fullTileRanges_?this.fullTileRanges_[l]:this.extent_?this.getTileRangeForExtentAndZ(this.extent_,l):null},c.prototype.getZForResolution=function(l,a){return qn(LC(this.resolutions_,l,a||0),this.minZoom,this.maxZoom)},c.prototype.calculateTileRanges_=function(l){for(var a=this.resolutions_.length,h=new Array(a),d=this.minZoom;d<a;++d)h[d]=this.getTileRangeForExtentAndZ(l,d);this.fullTileRanges_=h},c}();const kS=r1e;function nj(c){var l=c.getDefaultTileGrid();return l||(l=ij(c),c.setDefaultTileGrid(l)),l}function Sx(c){var l=c||{},a=l.extent||cn("EPSG:3857").getExtent(),h={extent:a,minZoom:l.minZoom,tileSize:l.tileSize,resolutions:rj(a,l.maxZoom,l.tileSize,l.maxResolution)};return new kS(h)}function rj(c,l,a,h){for(var d=void 0!==l?l:42,f=Ei(c),m=fr(c),g=uo(void 0!==a?a:256),y=h>0?h:Math.max(m/g[0],f/g[1]),v=d+1,_=new Array(v),S=0;S<v;++S)_[S]=y/Math.pow(2,S);return _}function ij(c,l,a,h){return function s1e(c,l,a,h){var d=void 0!==h?h:"top-left",f=rj(c,l,a);return new kS({extent:c,origin:Kve(c,d),resolutions:f,tileSize:a})}(VS(c),l,a,h)}function VS(c){var l=(c=cn(c)).getExtent();if(!l){var a=180*Ya[ta.DEGREES]/c.getMetersPerUnit();l=du(-a,-a,a,a)}return l}var sj=function(){var c=function(l,a){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,d){h.__proto__=d}||function(h,d){for(var f in d)Object.prototype.hasOwnProperty.call(d,f)&&(h[f]=d[f])})(l,a)};return function(l,a){if("function"!=typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");function h(){this.constructor=l}c(l,a),l.prototype=null===a?Object.create(a):(h.prototype=a.prototype,new h)}}(),o1e=function(c){function l(a){var h=c.call(this,{attributions:a.attributions,attributionsCollapsible:a.attributionsCollapsible,projection:a.projection,state:a.state,wrapX:a.wrapX,interpolate:a.interpolate})||this;return h.opaque_=void 0!==a.opaque&&a.opaque,h.tilePixelRatio_=void 0!==a.tilePixelRatio?a.tilePixelRatio:1,h.tileGrid=void 0!==a.tileGrid?a.tileGrid:null,h.tileGrid&&uo(h.tileGrid.getTileSize(h.tileGrid.getMinZoom()),[256,256]),h.tileCache=new z2(a.cacheSize||0),h.tmpSize=[0,0],h.key_=a.key||"",h.tileOptions={transition:a.transition,interpolate:a.interpolate},h.zDirection=a.zDirection?a.zDirection:0,h}return sj(l,c),l.prototype.canExpireCache=function(){return this.tileCache.canExpireCache()},l.prototype.expireCache=function(a,h){var d=this.getTileCacheForProjection(a);d&&d.expireCache(h)},l.prototype.forEachLoadedTile=function(a,h,d,f){var m=this.getTileCacheForProjection(a);if(!m)return!1;for(var y,v,_,g=!0,S=d.minX;S<=d.maxX;++S)for(var b=d.minY;b<=d.maxY;++b)v=By(h,S,b),_=!1,m.containsKey(v)&&(_=2===(y=m.get(v)).getState())&&(_=!1!==f(y)),_||(g=!1);return g},l.prototype.getGutterForProjection=function(a){return 0},l.prototype.getKey=function(){return this.key_},l.prototype.setKey=function(a){this.key_!==a&&(this.key_=a,this.changed())},l.prototype.getOpaque=function(a){return this.opaque_},l.prototype.getResolutions=function(){return this.tileGrid?this.tileGrid.getResolutions():null},l.prototype.getTile=function(a,h,d,f,m){return _n()},l.prototype.getTileGrid=function(){return this.tileGrid},l.prototype.getTileGridForProjection=function(a){return this.tileGrid?this.tileGrid:nj(a)},l.prototype.getTileCacheForProjection=function(a){return bn(bc(this.getProjection(),a),68),this.tileCache},l.prototype.getTilePixelRatio=function(a){return this.tilePixelRatio_},l.prototype.getTilePixelSize=function(a,h,d){var f=this.getTileGridForProjection(d),m=this.getTilePixelRatio(h),g=uo(f.getTileSize(a),this.tmpSize);return 1==m?g:a7(g,m,this.tmpSize)},l.prototype.getTileCoordForTileUrlFunction=function(a,h){var d=void 0!==h?h:this.getProjection(),f=this.getTileGridForProjection(d);return this.getWrapX()&&d.isGlobal()&&(a=function i1e(c,l,a){var h=l[0],d=c.getTileCoordCenter(l),f=VS(a);if(Ll(f,d))return l;var m=fr(f),g=Math.ceil((f[0]-d[0])/m);return d[0]+=m*g,c.getTileCoordForCoordAndZ(d,h)}(f,a,d)),function KTe(c,l){var a=c[0],h=c[1],d=c[2];if(l.getMinZoom()>a||a>l.getMaxZoom())return!1;var f=l.getFullTileRange(a);return!f||f.containsXY(h,d)}(a,f)?a:null},l.prototype.clear=function(){this.tileCache.clear()},l.prototype.refresh=function(){this.clear(),c.prototype.refresh.call(this)},l.prototype.updateCacheSize=function(a,h){var d=this.getTileCacheForProjection(h);a>d.highWaterMark&&(d.highWaterMark=a)},l.prototype.useTile=function(a,h,d,f){},l}(FS),a1e=function(c){function l(a,h){var d=c.call(this,a)||this;return d.tile=h,d}return sj(l,c),l}(gc);const j2=o1e;function l1e(c,l){var a=/\{z\}/g,h=/\{x\}/g,d=/\{y\}/g,f=/\{-y\}/g;return function(m,g,y){if(m)return c.replace(a,m[0].toString()).replace(h,m[1].toString()).replace(d,m[2].toString()).replace(f,function(){var _=l.getFullTileRange(m[0]);return bn(_,55),(_.getHeight()-m[2]-1).toString()})}}function oj(c,l){for(var a=c.length,h=new Array(a),d=0;d<a;++d)h[d]=l1e(c[d],l);return W2(h)}function W2(c){return 1===c.length?c[0]:function(l,a,h){if(l){var f=Vd(ej(l),c.length);return c[f](l,a,h)}}}function aj(c){var l=[],a=/\{([a-z])-([a-z])\}/.exec(c);if(a){var h=a[1].charCodeAt(0),d=a[2].charCodeAt(0),f=void 0;for(f=h;f<=d;++f)l.push(c.replace(a[0],String.fromCharCode(f)));return l}if(a=/\{(\d+)-(\d+)\}/.exec(c)){for(var m=parseInt(a[2],10),g=parseInt(a[1],10);g<=m;g++)l.push(c.replace(a[0],g.toString()));return l}return l.push(c),l}var c1e=function(){var c=function(l,a){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,d){h.__proto__=d}||function(h,d){for(var f in d)Object.prototype.hasOwnProperty.call(d,f)&&(h[f]=d[f])})(l,a)};return function(l,a){if("function"!=typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");function h(){this.constructor=l}c(l,a),l.prototype=null===a?Object.create(a):(h.prototype=a.prototype,new h)}}(),u1e=function(c){function l(a){var h=c.call(this,{attributions:a.attributions,cacheSize:a.cacheSize,opaque:a.opaque,projection:a.projection,state:a.state,tileGrid:a.tileGrid,tilePixelRatio:a.tilePixelRatio,wrapX:a.wrapX,transition:a.transition,interpolate:a.interpolate,key:a.key,attributionsCollapsible:a.attributionsCollapsible,zDirection:a.zDirection})||this;return h.generateTileUrlFunction_=h.tileUrlFunction===l.prototype.tileUrlFunction,h.tileLoadFunction=a.tileLoadFunction,a.tileUrlFunction&&(h.tileUrlFunction=a.tileUrlFunction),h.urls=null,a.urls?h.setUrls(a.urls):a.url&&h.setUrl(a.url),h.tileLoadingKeys_={},h}return c1e(l,c),l.prototype.getTileLoadFunction=function(){return this.tileLoadFunction},l.prototype.getTileUrlFunction=function(){return Object.getPrototypeOf(this).tileUrlFunction===this.tileUrlFunction?this.tileUrlFunction.bind(this):this.tileUrlFunction},l.prototype.getUrls=function(){return this.urls},l.prototype.handleTileChange=function(a){var m,h=a.target,d=tn(h),f=h.getState();1==f?(this.tileLoadingKeys_[d]=!0,m="tileloadstart"):d in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[d],m=3==f?"tileloaderror":2==f?"tileloadend":void 0),null!=m&&this.dispatchEvent(new a1e(m,h))},l.prototype.setTileLoadFunction=function(a){this.tileCache.clear(),this.tileLoadFunction=a,this.changed()},l.prototype.setTileUrlFunction=function(a,h){this.tileUrlFunction=a,this.tileCache.pruneExceptNewestZ(),typeof h<"u"?this.setKey(h):this.changed()},l.prototype.setUrl=function(a){var h=aj(a);this.urls=h,this.setUrls(h)},l.prototype.setUrls=function(a){this.urls=a;var h=a.join("\n");this.generateTileUrlFunction_?this.setTileUrlFunction(oj(a,this.tileGrid),h):this.setKey(h)},l.prototype.tileUrlFunction=function(a,h,d){},l.prototype.useTile=function(a,h,d){var f=By(a,h,d);this.tileCache.containsKey(f)&&this.tileCache.get(f)},l}(j2);const lj=u1e;var h1e=function(){var c=function(l,a){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,d){h.__proto__=d}||function(h,d){for(var f in d)Object.prototype.hasOwnProperty.call(d,f)&&(h[f]=d[f])})(l,a)};return function(l,a){if("function"!=typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");function h(){this.constructor=l}c(l,a),l.prototype=null===a?Object.create(a):(h.prototype=a.prototype,new h)}}(),cj=[],d1e=function(c){function l(a,h,d,f){var m=c.call(this,a,h,{transition:0})||this;return m.context_={},m.executorGroups={},m.declutterExecutorGroups={},m.loadingSourceTiles=0,m.hitDetectionImageData={},m.replayState_={},m.sourceTiles=[],m.errorTileKeys={},m.getSourceTiles=f.bind(void 0,m),m.wrappedTileCoord=d,m}return h1e(l,c),l.prototype.getContext=function(a){var h=tn(a);return h in this.context_||(this.context_[h]=Qs(1,1,cj)),this.context_[h]},l.prototype.hasContext=function(a){return tn(a)in this.context_},l.prototype.getImage=function(a){return this.hasContext(a)?this.getContext(a).canvas:null},l.prototype.getReplayState=function(a){var h=tn(a);return h in this.replayState_||(this.replayState_[h]={dirty:!1,renderedRenderOrder:null,renderedResolution:NaN,renderedRevision:-1,renderedTileResolution:NaN,renderedTileRevision:-1,renderedTileZ:-1}),this.replayState_[h]},l.prototype.load=function(){this.getSourceTiles()},l.prototype.release=function(){for(var a in this.context_)cj.push(this.context_[a].canvas),delete this.context_[a];c.prototype.release.call(this)},l}(fx);const f1e=d1e;function hj(c,l,a,h,d,f,m){var g=new XMLHttpRequest;g.open("GET","function"==typeof c?c(a,h,d):c,!0),"arraybuffer"==l.getType()&&(g.responseType="arraybuffer"),g.withCredentials=false,g.onload=function(y){if(!g.status||g.status>=200&&g.status<300){var v=l.getType(),_=void 0;"json"==v||"text"==v?_=g.responseText:"xml"==v?(_=g.responseXML)||(_=(new DOMParser).parseFromString(g.responseText,"application/xml")):"arraybuffer"==v&&(_=g.response),_?f(l.readFeatures(_,{extent:a,featureProjection:d}),l.readProjection(_)):m()}else m()},g.onerror=m,g.send()}function dj(c,l){return function(a,h,d,f,m){var g=this;hj(c,l,a,h,d,function(y,v){g.addFeatures(y),void 0!==f&&f(y)},m||Lp)}}var p1e=function(){var c=function(l,a){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,d){h.__proto__=d}||function(h,d){for(var f in d)Object.prototype.hasOwnProperty.call(d,f)&&(h[f]=d[f])})(l,a)};return function(l,a){if("function"!=typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");function h(){this.constructor=l}c(l,a),l.prototype=null===a?Object.create(a):(h.prototype=a.prototype,new h)}}(),m1e=function(c){function l(a){var h=this,d=a.projection||"EPSG:3857",f=a.extent||VS(d),m=a.tileGrid||Sx({extent:f,maxResolution:a.maxResolution,maxZoom:void 0!==a.maxZoom?a.maxZoom:22,minZoom:a.minZoom,tileSize:a.tileSize||512});return(h=c.call(this,{attributions:a.attributions,attributionsCollapsible:a.attributionsCollapsible,cacheSize:a.cacheSize,interpolate:!0,opaque:!1,projection:d,state:a.state,tileGrid:m,tileLoadFunction:a.tileLoadFunction?a.tileLoadFunction:fj,tileUrlFunction:a.tileUrlFunction,url:a.url,urls:a.urls,wrapX:void 0===a.wrapX||a.wrapX,transition:a.transition,zDirection:void 0===a.zDirection?1:a.zDirection})||this).format_=a.format?a.format:null,h.sourceTileCache=new z2(h.tileCache.highWaterMark),h.overlaps_=a.overlaps??!0,h.tileClass=a.tileClass?a.tileClass:qTe,h.tileGrids_={},h}return p1e(l,c),l.prototype.getFeaturesInExtent=function(a){var h=[],d=this.tileCache;if(0===d.getCount())return h;var f=J7(d.peekFirstKey())[0],m=this.tileGrid;return d.forEach(function(g){if(g.tileCoord[0]===f&&2===g.getState())for(var y=g.getSourceTiles(),v=0,_=y.length;v<_;++v){var S=y[v];if(Mi(a,m.getTileCoordExtent(S.tileCoord))){var T=S.getFeatures();if(T)for(var x=0,E=T.length;x<E;++x){var D=T[x],I=D.getGeometry();Mi(a,I.getExtent())&&h.push(D)}}}}),h},l.prototype.getOverlaps=function(){return this.overlaps_},l.prototype.clear=function(){this.tileCache.clear(),this.sourceTileCache.clear()},l.prototype.expireCache=function(a,h){var d=this.getTileCacheForProjection(a),f=Object.keys(h).reduce(function(m,g){var y=function ZTe(c){var l=c.substring(c.lastIndexOf("/")+1,c.length).split(",").map(Number);return By(l[0],l[1],l[2])}(g);if(d.containsKey(y))for(var v=d.get(y).sourceTiles,_=0,S=v.length;_<S;++_)m[v[_].getKey()]=!0;return m},{});c.prototype.expireCache.call(this,a,h),this.sourceTileCache.expireCache(f)},l.prototype.getSourceTiles=function(a,h,d){var f=this;if(0===d.getState()){d.setState(1);var m=d.wrappedTileCoord,g=this.getTileGridForProjection(h),y=g.getTileCoordExtent(m),_=g.getResolution(m[0]);$a(y,-_,y);var S=this.tileGrid,b=S.getExtent();b&&mc(y,b,y);var T=S.getZForResolution(_,1);S.forEachTileCoord(y,T,function(x){var E=f.tileUrlFunction(x,a,h),D=f.sourceTileCache.containsKey(E)?f.sourceTileCache.get(E):new f.tileClass(x,E?0:4,E,f.format_,f.tileLoadFunction);d.sourceTiles.push(D);var I=D.getState();if(I<2){var M=function(L){f.handleTileChange(L);var P=D.getState();if(2===P||3===P){var F=D.getKey();F in d.errorTileKeys?2===D.getState()&&delete d.errorTileKeys[F]:d.loadingSourceTiles--,3===P?d.errorTileKeys[F]=!0:D.removeEventListener("change",M),0===d.loadingSourceTiles&&d.setState(Vp(d.errorTileKeys)?2:3)}};D.addEventListener("change",M),d.loadingSourceTiles++}0===I&&(D.extent=S.getTileCoordExtent(x),D.projection=h,D.resolution=S.getResolution(x[0]),f.sourceTileCache.set(E,D),D.load())}),d.loadingSourceTiles||d.setState(d.sourceTiles.some(function(x){return 3===x.getState()})?3:2)}return d.sourceTiles},l.prototype.getTile=function(a,h,d,f,m){var v,g=By(a,h,d),y=this.getKey();if(this.tileCache.containsKey(g)&&(v=this.tileCache.get(g)).key===y)return v;var _=[a,h,d],S=this.getTileCoordForTileUrlFunction(_,m),b=this.getTileGrid().getExtent(),T=this.getTileGridForProjection(m);if(S&&b){var x=T.getTileCoordExtent(S);$a(x,-T.getResolution(a),x),Mi(b,x)||(S=null)}var E=!0;if(null!==S){var D=this.tileGrid,I=T.getResolution(a),M=D.getZForResolution(I,1),L=T.getTileCoordExtent(S);$a(L,-I,L),D.forEachTileCoord(L,M,function(F){E=E&&!this.tileUrlFunction(F,f,m)}.bind(this))}var P=new f1e(_,E?4:0,S,this.getSourceTiles.bind(this,f,m));return P.key=y,v?(P.interimTile=v,P.refreshInterimChain(),this.tileCache.replace(g,P)):this.tileCache.set(g,P),P},l.prototype.getTileGridForProjection=function(a){var h=a.getCode(),d=this.tileGrids_[h];if(!d){var f=this.tileGrid;d=ij(a,void 0,f?f.getTileSize(f.getMinZoom()):void 0),this.tileGrids_[h]=d}return d},l.prototype.getTilePixelRatio=function(a){return a},l.prototype.getTilePixelSize=function(a,h,d){var m=uo(this.getTileGridForProjection(d).getTileSize(a),this.tmpSize);return[Math.round(m[0]*h),Math.round(m[1]*h)]},l.prototype.updateCacheSize=function(a,h){c.prototype.updateCacheSize.call(this,2*a,h),this.sourceTileCache.highWaterMark=this.getTileCacheForProjection(h).highWaterMark},l}(lj);const BS=m1e;function fj(c,l){c.setLoader(function(a,h,d){hj(l,c.getFormat(),a,h,d,c.onLoad.bind(c),c.onError.bind(c))})}var g1e=function(){var c=function(l,a){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,d){h.__proto__=d}||function(h,d){for(var f in d)Object.prototype.hasOwnProperty.call(d,f)&&(h[f]=d[f])})(l,a)};return function(l,a){if("function"!=typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");function h(){this.constructor=l}c(l,a),l.prototype=null===a?Object.create(a):(h.prototype=a.prototype,new h)}}(),y1e={image:["Polygon","Circle","LineString","Image","Text"],hybrid:["Polygon","LineString"],vector:[]},v1e={hybrid:["Image","Text","Default"],vector:["Polygon","Circle","LineString","Image","Text","Default"]},_1e=function(c){function l(a){var h=c.call(this,a)||this;return h.boundHandleStyleImageChange_=h.handleStyleImageChange_.bind(h),h.dirty_=!1,h.renderedPixelToCoordinateTransform_=null,h.tmpTransform_=[1,0,0,1,0,0],h}return g1e(l,c),l.prototype.prepareTile=function(a,h,d){var f,m=a.getState();return(2===m||3===m)&&(this.updateExecutorGroup_(a,h,d),this.tileImageNeedsRender_(a)&&(f=!0)),f},l.prototype.getTile=function(a,h,d,f){var m=f.pixelRatio,g=f.viewState,y=g.resolution,v=g.projection,_=this.getLayer(),S=_.getSource().getTile(a,h,d,m,v),b=f.viewHints,T=!(b[0]||b[1]);return(T||!S.wantedResolution)&&(S.wantedResolution=y),this.prepareTile(S,m,v)&&(T||Date.now()-f.time<8)&&"vector"!==_.getRenderMode()&&this.renderTileImage_(S,f),c.prototype.getTile.call(this,a,h,d,f)},l.prototype.isDrawableTile=function(a){var h=this.getLayer();return c.prototype.isDrawableTile.call(this,a)&&("vector"===h.getRenderMode()?tn(h)in a.executorGroups:a.hasContext(h))},l.prototype.getTileImage=function(a){return a.getImage(this.getLayer())},l.prototype.prepareFrame=function(a){var h=this.getLayer().getRevision();return this.renderedLayerRevision_!=h&&(this.renderedTiles.length=0),this.renderedLayerRevision_=h,c.prototype.prepareFrame.call(this,a)},l.prototype.updateExecutorGroup_=function(a,h,d){var f=this.getLayer(),m=f.getRevision(),g=f.getRenderOrder()||null,y=a.wantedResolution,v=a.getReplayState(f);if(v.dirty||v.renderedResolution!==y||v.renderedRevision!=m||v.renderedRenderOrder!=g){var _=f.getSource(),S=f.getDeclutter(),b=_.getTileGrid(),x=_.getTileGridForProjection(d).getTileCoordExtent(a.wrappedTileCoord),E=_.getSourceTiles(h,d,a),D=tn(f);delete a.hitDetectionImageData[D],a.executorGroups[D]=[],S&&(a.declutterExecutorGroups[D]=[]);for(var I=function(F,V){var z=E[F];if(2!=z.getState())return"continue";var K=b.getTileCoordExtent(z.tileCoord),se=mc(x,K),W=$a(se,f.getRenderBuffer()*y,M.tmpExtent),Q=Ol(K,se)?null:W;v.dirty=!1;var ie=new gx(0,W,y,h),ae=S?new gx(0,se,y,h):void 0,he=B2(y,h),J=function(De){var en,ut=De.getStyleFunction()||f.getStyleFunction();if(ut&&(en=ut(De,y)),en){var Fe=this.renderFeature(De,he,en,ie,ae);this.dirty_=this.dirty_||Fe,v.dirty=v.dirty||Fe}},ce=z.getFeatures();g&&g!==v.renderedRenderOrder&&ce.sort(g);for(var be=0,we=ce.length;be<we;++be){var Ce=ce[be];(!Q||Mi(Q,Ce.getGeometry().getExtent()))&&J.call(M,Ce)}var Te=ie.finish(),fe="vector"!==f.getRenderMode()&&S&&1===E.length?null:se,$e=new yx(fe,y,h,_.getOverlaps(),Te,f.getRenderBuffer());if(a.executorGroups[D].push($e),ae){var Ve=new yx(null,y,h,_.getOverlaps(),ae.finish(),f.getRenderBuffer());a.declutterExecutorGroups[D].push(Ve)}},M=this,L=0,P=E.length;L<P;++L)I(L);v.renderedRevision=m,v.renderedRenderOrder=g,v.renderedResolution=y}},l.prototype.forEachFeatureAtCoordinate=function(a,h,d,f,m){var g=h.viewState.resolution,y=h.viewState.rotation;d=d??0;var v=this.getLayer(),S=v.getSource().getTileGridForProjection(h.viewState.projection),b=FL([a]);$a(b,g*d,b);for(var D,T={},x=function(P,F,V){var z=P.getId();void 0===z&&(z=tn(P));var q=T[z];if(q){if(!0!==q&&V<q.distanceSq){if(0===V)return T[z]=!0,m.splice(m.lastIndexOf(q),1),f(P,v,F);q.geometry=F,q.distanceSq=V}}else{if(0===V)return T[z]=!0,f(P,v,F);m.push(T[z]={feature:P,layer:v,geometry:F,distanceSq:V,callback:f})}},E=this.renderedTiles,I=function(P,F){var V=E[P];if(!Mi(S.getTileCoordExtent(V.wrappedTileCoord),b))return"continue";var q=tn(v),K=[V.executorGroups[q]],se=V.declutterExecutorGroups[q];se&&K.push(se),K.some(function(W){for(var Q=W===se?h.declutterTree.all().map(function(J){return J.value}):null,ie=0,ae=W.length;ie<ae;++ie)if(D=W[ie].forEachFeatureAtCoordinate(a,g,y,d,x,Q))return!0})},M=0,L=E.length;!D&&M<L;++M)I(M);return D},l.prototype.getFeatures=function(a){return new Promise(function(h,d){for(var x,f=this.getLayer(),m=tn(f),g=f.getSource(),y=this.renderedProjection,v=y.getExtent(),_=this.renderedResolution,S=g.getTileGridForProjection(y),b=ni(this.renderedPixelToCoordinateTransform_,a.slice()),T=S.getTileCoordForCoordAndResolution(b,_),E=0,D=this.renderedTiles.length;E<D;++E)if(T.toString()===this.renderedTiles[E].tileCoord.toString()){if(2===(x=this.renderedTiles[E]).getState()){var I=S.getTileCoordExtent(x.tileCoord);g.getWrapX()&&y.canWrapX()&&!xa(v,I)&&WL(b,y);break}x=void 0}if(!x||x.loadingSourceTiles>0)h([]);else{var L=fu(S.getTileCoordExtent(x.wrappedTileCoord)),P=[(b[0]-L[0])/_,(L[1]-b[1])/_],F=x.getSourceTiles().reduce(function(se,W){return se.concat(W.getFeatures())},[]),V=x.hitDetectionImageData[m];if(!V&&!this.animatingOrInteracting_){var z=uo(S.getTileSize(S.getZForResolution(_))),q=this.renderedRotation_;V=q7(z,[this.getRenderTransform(S.getTileCoordCenter(x.wrappedTileCoord),_,0,Qa,z[0]*Qa,z[1]*Qa,0)],F,f.getStyleFunction(),S.getTileCoordExtent(x.wrappedTileCoord),x.getReplayState(f).renderedResolution,q),x.hitDetectionImageData[m]=V}h($7(P,F,V))}}.bind(this))},l.prototype.handleFontsChanged=function(){var a=this.getLayer();a.getVisible()&&void 0!==this.renderedLayerRevision_&&a.changed()},l.prototype.handleStyleImageChange_=function(a){this.renderIfReadyAndVisible()},l.prototype.renderDeclutter=function(a){var h=this.context,d=h.globalAlpha;h.globalAlpha=this.getLayer().getOpacity();for(var f=a.viewHints,m=!(f[0]||f[1]),g=this.renderedTiles,y=0,v=g.length;y<v;++y){var _=g[y],S=_.declutterExecutorGroups[tn(this.getLayer())];if(S)for(var b=S.length-1;b>=0;--b)S[b].execute(this.context,1,this.getTileRenderTransform(_,a),a.viewState.rotation,m,void 0,a.declutterTree)}h.globalAlpha=d},l.prototype.getTileRenderTransform=function(a,h){var d=h.pixelRatio,f=h.viewState,m=f.center,g=f.resolution,y=f.rotation,v=h.size,_=Math.round(v[0]*d),S=Math.round(v[1]*d),T=this.getLayer().getSource().getTileGridForProjection(h.viewState.projection),x=a.tileCoord,E=T.getTileCoordExtent(a.wrappedTileCoord),D=T.getTileCoordExtent(x,this.tmpExtent)[0]-E[0];return Sy(FC(this.inversePixelTransform.slice(),1/d,1/d),this.getRenderTransform(m,g,y,d,_,S,D))},l.prototype.renderFrame=function(a,h){var d=a.viewHints,f=!(d[0]||d[1]);c.prototype.renderFrame.call(this,a,h),this.renderedPixelToCoordinateTransform_=a.pixelToCoordinateTransform.slice(),this.renderedRotation_=a.viewState.rotation;var m=this.getLayer(),g=m.getRenderMode(),y=this.context,v=y.globalAlpha;y.globalAlpha=m.getOpacity();for(var _=v1e[g],S=a.viewState,b=S.rotation,T=m.getSource(),E=T.getTileGridForProjection(S.projection).getZForResolution(S.resolution,T.zDirection),D=this.renderedTiles,I=[],M=[],L=D.length-1;L>=0;--L){var P=D[L],F=P.executorGroups[tn(m)].filter(function(J){return J.hasExecutors(_)});if(0!==F.length){for(var V=this.getTileRenderTransform(P,a),z=P.tileCoord[0],q=!1,K=F[0].getClipCoords(V),se=0,W=I.length;se<W;++se)if(E!==z&&z<M[se]){var Q=I[se];Mi([K[0],K[3],K[4],K[7]],[Q[0],Q[3],Q[4],Q[7]])&&(q||(y.save(),q=!0),y.beginPath(),y.moveTo(K[0],K[1]),y.lineTo(K[2],K[3]),y.lineTo(K[4],K[5]),y.lineTo(K[6],K[7]),y.moveTo(Q[6],Q[7]),y.lineTo(Q[4],Q[5]),y.lineTo(Q[2],Q[3]),y.lineTo(Q[0],Q[1]),y.clip())}I.push(K),M.push(z);for(var ie=0,ae=F.length;ie<ae;++ie)F[ie].execute(y,1,V,b,f,_);q&&y.restore()}}return y.globalAlpha=v,this.container},l.prototype.renderFeature=function(a,h,d,f,m){if(!d)return!1;var g=!1;if(Array.isArray(d))for(var y=0,v=d.length;y<v;++y)g=_x(f,a,d[y],h,this.boundHandleStyleImageChange_,void 0,m)||g;else g=_x(f,a,d,h,this.boundHandleStyleImageChange_,void 0,m);return g},l.prototype.tileImageNeedsRender_=function(a){var h=this.getLayer();if("vector"===h.getRenderMode())return!1;var d=a.getReplayState(h),f=h.getRevision();return d.renderedTileResolution!==a.wantedResolution||d.renderedTileRevision!==f},l.prototype.renderTileImage_=function(a,h){var d=this.getLayer(),f=a.getReplayState(d),m=d.getRevision(),g=a.executorGroups[tn(d)];f.renderedTileRevision=m;var y=a.wrappedTileCoord,v=y[0],_=d.getSource(),S=h.pixelRatio,T=h.viewState.projection,x=_.getTileGridForProjection(T),E=x.getResolution(a.tileCoord[0]),D=h.pixelRatio/a.wantedResolution*E,I=x.getResolution(v),M=a.getContext(d);S=Math.round(Math.max(S,D/S));var L=_.getTilePixelSize(v,S,T);M.canvas.width=L[0],M.canvas.height=L[1];var P=S/D;if(1!==P){var F=aS(this.tmpTransform_);FC(F,P,P),M.setTransform.apply(M,F)}var V=x.getTileCoordExtent(y,this.tmpExtent),z=D/I,q=aS(this.tmpTransform_);FC(q,z,-z),function Wve(c,l,a){Sy(c,lS(NL,1,0,0,1,l,a))}(q,-V[0],-V[3]);for(var K=0,se=g.length;K<se;++K)g[K].execute(M,P,q,0,!0,y1e[d.getRenderMode()]);f.renderedTileResolution=a.wantedResolution},l}(B7);const S1e=_1e;var b1e=function(){var c=function(l,a){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,d){h.__proto__=d}||function(h,d){for(var f in d)Object.prototype.hasOwnProperty.call(d,f)&&(h[f]=d[f])})(l,a)};return function(l,a){if("function"!=typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");function h(){this.constructor=l}c(l,a),l.prototype=null===a?Object.create(a):(h.prototype=a.prototype,new h)}}(),T1e=function(c){function l(a){var h=this,d=a||{},f=$n({},d);delete f.preload,delete f.useInterimTilesOnError,h=c.call(this,f)||this,"image"===d.renderMode&&(console.warn('renderMode: "image" is deprecated. Option ignored.'),d.renderMode=void 0);var m=d.renderMode||"hybrid";return bn("hybrid"==m||"vector"==m,28),h.renderMode_=m,h.setPreload(d.preload?d.preload:0),h.setUseInterimTilesOnError(void 0===d.useInterimTilesOnError||d.useInterimTilesOnError),h}return b1e(l,c),l.prototype.createRenderer=function(){return new S1e(this)},l.prototype.getFeatures=function(a){return c.prototype.getFeatures.call(this,a)},l.prototype.getRenderMode=function(){return this.renderMode_},l.prototype.getPreload=function(){return this.get("preload")},l.prototype.getUseInterimTilesOnError=function(){return this.get("useInterimTilesOnError")},l.prototype.setPreload=function(a){this.set("preload",a)},l.prototype.setUseInterimTilesOnError=function(a){this.set("useInterimTilesOnError",a)},l}($p);const Uy=T1e;function bx(c,l,a,h,d,f,m){var g,y,v=(a-l)/h;if(1===v)g=l;else if(2===v)g=l,y=d;else if(0!==v){for(var _=c[l],S=c[l+1],b=0,T=[0],x=l+h;x<a;x+=h){var E=c[x],D=c[x+1];b+=Math.sqrt((E-_)*(E-_)+(D-S)*(D-S)),T.push(b),_=E,S=D}var I=d*b,M=function Ave(c,l,a){for(var h,d,f=a||Pp,m=0,g=c.length,y=!1;m<g;)(d=+f(c[h=m+(g-m>>1)],l))<0?m=h+1:(g=h,y=!d);return y?m:~m}(T,I);M<0?(y=(I-T[-M-2])/(T[-M-1]-T[-M-2]),g=l+(-M-2)*h):g=l+M*h}var L=m>1?m:2,P=f||new Array(L);for(x=0;x<L;++x)P[x]=void 0===g?NaN:void 0===y?c[g+x]:vh(c[g+x],c[g+h+x],y);return P}function X2(c,l,a,h,d,f){if(a==l)return null;var m;if(d<c[l+h-1])return f?((m=c.slice(l,l+h))[h-1]=d,m):null;if(c[a-1]<d)return f?((m=c.slice(a-h,a))[h-1]=d,m):null;if(d==c[l+h-1])return c.slice(l,l+h);for(var g=l/h,y=a/h;g<y;){var v=g+y>>1;d<c[(v+1)*h-1]?y=v:g=v+1}var _=c[g*h-1];if(d==_)return c.slice((g-1)*h,(g-1)*h+h);var b=(d-_)/(c[(g+1)*h-1]-_);m=[];for(var T=0;T<h-1;++T)m.push(vh(c[(g-1)*h+T],c[g*h+T],b));return m.push(d),m}function pj(c,l,a,h){for(var d=[],f=[1/0,1/0,-1/0,-1/0],m=0,g=a.length;m<g;++m){var y=a[m];f=BL(c,l,y[0],h),d.push((f[0]+f[2])/2,(f[1]+f[3])/2),l=y[y.length-1]}return d}var mj=[1,0,0,1,0,0],US=function(){function c(l,a,h,d,f){this.id_=f,this.type_=l,this.flatCoordinates_=a,this.flatInteriorPoints_=null,this.flatMidpoints_=null,this.ends_=h,this.properties_=d}return c.prototype.get=function(l){return this.properties_[l]},c.prototype.getExtent=function(){return this.extent_||(this.extent_="Point"===this.type_?VL(this.flatCoordinates_):BL(this.flatCoordinates_,0,this.flatCoordinates_.length,2)),this.extent_},c.prototype.getFlatInteriorPoint=function(){if(!this.flatInteriorPoints_){var l=Jo(this.getExtent());this.flatInteriorPoints_=y2(this.flatCoordinates_,0,this.ends_,2,l,0)}return this.flatInteriorPoints_},c.prototype.getFlatInteriorPoints=function(){if(!this.flatInteriorPoints_){var l=pj(this.flatCoordinates_,0,this.ends_,2);this.flatInteriorPoints_=e7(this.flatCoordinates_,0,this.ends_,2,l)}return this.flatInteriorPoints_},c.prototype.getFlatMidpoint=function(){return this.flatMidpoints_||(this.flatMidpoints_=bx(this.flatCoordinates_,0,this.flatCoordinates_.length,2,.5)),this.flatMidpoints_},c.prototype.getFlatMidpoints=function(){if(!this.flatMidpoints_){this.flatMidpoints_=[];for(var l=this.flatCoordinates_,a=0,h=this.ends_,d=0,f=h.length;d<f;++d){var m=h[d],g=bx(l,a,m,2,.5);xi(this.flatMidpoints_,g),a=m}}return this.flatMidpoints_},c.prototype.getId=function(){return this.id_},c.prototype.getOrientedFlatCoordinates=function(){return this.flatCoordinates_},c.prototype.getGeometry=function(){return this},c.prototype.getSimplifiedGeometry=function(l){return this},c.prototype.simplifyTransformed=function(l,a){return this},c.prototype.getProperties=function(){return this.properties_},c.prototype.getStride=function(){return 2},c.prototype.getStyleFunction=function(){return this.styleFunction},c.prototype.getType=function(){return this.type_},c.prototype.transform=function(l){var a=(l=cn(l)).getExtent(),h=l.getWorldExtent();if(a&&h){var d=Ei(h)/Ei(a);Do(mj,h[0],h[3],d,-d,0,0,0),zd(this.flatCoordinates_,0,this.flatCoordinates_.length,2,mj,this.flatCoordinates_)}},c.prototype.getEnds=function(){return this.ends_},c}();US.prototype.getEndss=US.prototype.getEnds,US.prototype.getFlatCoordinates=US.prototype.getOrientedFlatCoordinates;const q2=US;var E1e=function(){function c(l){var a=l||{};this.font_=a.font,this.rotation_=a.rotation,this.rotateWithView_=a.rotateWithView,this.scale_=a.scale,this.scaleArray_=uo(void 0!==a.scale?a.scale:1),this.text_=a.text,this.textAlign_=a.textAlign,this.textBaseline_=a.textBaseline,this.fill_=void 0!==a.fill?a.fill:new Si({color:"#333"}),this.maxAngle_=void 0!==a.maxAngle?a.maxAngle:Math.PI/4,this.placement_=void 0!==a.placement?a.placement:"point",this.overflow_=!!a.overflow,this.stroke_=void 0!==a.stroke?a.stroke:null,this.offsetX_=void 0!==a.offsetX?a.offsetX:0,this.offsetY_=void 0!==a.offsetY?a.offsetY:0,this.backgroundFill_=a.backgroundFill?a.backgroundFill:null,this.backgroundStroke_=a.backgroundStroke?a.backgroundStroke:null,this.padding_=void 0===a.padding?null:a.padding}return c.prototype.clone=function(){var l=this.getScale();return new c({font:this.getFont(),placement:this.getPlacement(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(l)?l.slice():l,text:this.getText(),textAlign:this.getTextAlign(),textBaseline:this.getTextBaseline(),fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():void 0,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0,padding:this.getPadding()||void 0})},c.prototype.getOverflow=function(){return this.overflow_},c.prototype.getFont=function(){return this.font_},c.prototype.getMaxAngle=function(){return this.maxAngle_},c.prototype.getPlacement=function(){return this.placement_},c.prototype.getOffsetX=function(){return this.offsetX_},c.prototype.getOffsetY=function(){return this.offsetY_},c.prototype.getFill=function(){return this.fill_},c.prototype.getRotateWithView=function(){return this.rotateWithView_},c.prototype.getRotation=function(){return this.rotation_},c.prototype.getScale=function(){return this.scale_},c.prototype.getScaleArray=function(){return this.scaleArray_},c.prototype.getStroke=function(){return this.stroke_},c.prototype.getText=function(){return this.text_},c.prototype.getTextAlign=function(){return this.textAlign_},c.prototype.getTextBaseline=function(){return this.textBaseline_},c.prototype.getBackgroundFill=function(){return this.backgroundFill_},c.prototype.getBackgroundStroke=function(){return this.backgroundStroke_},c.prototype.getPadding=function(){return this.padding_},c.prototype.setOverflow=function(l){this.overflow_=l},c.prototype.setFont=function(l){this.font_=l},c.prototype.setMaxAngle=function(l){this.maxAngle_=l},c.prototype.setOffsetX=function(l){this.offsetX_=l},c.prototype.setOffsetY=function(l){this.offsetY_=l},c.prototype.setPlacement=function(l){this.placement_=l},c.prototype.setRotateWithView=function(l){this.rotateWithView_=l},c.prototype.setFill=function(l){this.fill_=l},c.prototype.setRotation=function(l){this.rotation_=l},c.prototype.setScale=function(l){this.scale_=l,this.scaleArray_=uo(void 0!==l?l:1)},c.prototype.setStroke=function(l){this.stroke_=l},c.prototype.setText=function(l){this.text_=l},c.prototype.setTextAlign=function(l){this.textAlign_=l},c.prototype.setTextBaseline=function(l){this.textBaseline_=l},c.prototype.setBackgroundFill=function(l){this.backgroundFill_=l},c.prototype.setBackgroundStroke=function(l){this.backgroundStroke_=l},c.prototype.setPadding=function(l){this.padding_=l},c}();const Zp=E1e;var M1e=function(){var c=function(l,a){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,d){h.__proto__=d}||function(h,d){for(var f in d)Object.prototype.hasOwnProperty.call(d,f)&&(h[f]=d[f])})(l,a)};return function(l,a){if("function"!=typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");function h(){this.constructor=l}c(l,a),l.prototype=null===a?Object.create(a):(h.prototype=a.prototype,new h)}}(),D1e=function(c){function l(a){var h=c.call(this)||this;return h.id_=void 0,h.geometryName_="geometry",h.style_=null,h.styleFunction_=void 0,h.geometryChangeKey_=null,h.addChangeListener(h.geometryName_,h.handleGeometryChanged_),a&&("function"==typeof a.getSimplifiedGeometry?h.setGeometry(a):h.setProperties(a)),h}return M1e(l,c),l.prototype.clone=function(){var a=new l(this.hasProperties()?this.getProperties():null);a.setGeometryName(this.getGeometryName());var h=this.getGeometry();h&&a.setGeometry(h.clone());var d=this.getStyle();return d&&a.setStyle(d),a},l.prototype.getGeometry=function(){return this.get(this.geometryName_)},l.prototype.getId=function(){return this.id_},l.prototype.getGeometryName=function(){return this.geometryName_},l.prototype.getStyle=function(){return this.style_},l.prototype.getStyleFunction=function(){return this.styleFunction_},l.prototype.handleGeometryChange_=function(){this.changed()},l.prototype.handleGeometryChanged_=function(){this.geometryChangeKey_&&(ri(this.geometryChangeKey_),this.geometryChangeKey_=null);var a=this.getGeometry();a&&(this.geometryChangeKey_=zn(a,"change",this.handleGeometryChange_,this)),this.changed()},l.prototype.setGeometry=function(a){this.set(this.geometryName_,a)},l.prototype.setStyle=function(a){this.style_=a,this.styleFunction_=a?function A1e(c){return"function"==typeof c?c:(Array.isArray(c)?l=c:(bn("function"==typeof c.getZIndex,41),l=[c]),function(){return l});var l}(a):void 0,this.changed()},l.prototype.setId=function(a){this.id_=a,this.changed()},l.prototype.setGeometryName=function(a){this.removeChangeListener(this.geometryName_,this.handleGeometryChanged_),this.geometryName_=a,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),this.handleGeometryChanged_()},l}(yc);const Gy=D1e;var I1e=function(){var c=function(l,a){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,d){h.__proto__=d}||function(h,d){for(var f in d)Object.prototype.hasOwnProperty.call(d,f)&&(h[f]=d[f])})(l,a)};return function(l,a){if("function"!=typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");function h(){this.constructor=l}c(l,a),l.prototype=null===a?Object.create(a):(h.prototype=a.prototype,new h)}}(),R1e=function(c){function l(a){var h=c.call(this)||this;return h.geometries_=a||null,h.changeEventsKeys_=[],h.listenGeometriesChange_(),h}return I1e(l,c),l.prototype.unlistenGeometriesChange_=function(){this.changeEventsKeys_.forEach(ri),this.changeEventsKeys_.length=0},l.prototype.listenGeometriesChange_=function(){if(this.geometries_)for(var a=0,h=this.geometries_.length;a<h;++a)this.changeEventsKeys_.push(zn(this.geometries_[a],"change",this.changed,this))},l.prototype.clone=function(){var a=new l(null);return a.setGeometries(this.geometries_),a.applyProperties(this),a},l.prototype.closestPointXY=function(a,h,d,f){if(f<Op(this.getExtent(),a,h))return f;for(var m=this.geometries_,g=0,y=m.length;g<y;++g)f=m[g].closestPointXY(a,h,d,f);return f},l.prototype.containsXY=function(a,h){for(var d=this.geometries_,f=0,m=d.length;f<m;++f)if(d[f].containsXY(a,h))return!0;return!1},l.prototype.computeExtent=function(a){Np(a);for(var h=this.geometries_,d=0,f=h.length;d<f;++d)UL(a,h[d].getExtent());return a},l.prototype.getGeometries=function(){return gj(this.geometries_)},l.prototype.getGeometriesArray=function(){return this.geometries_},l.prototype.getGeometriesArrayRecursive=function(){for(var a=[],h=this.geometries_,d=0,f=h.length;d<f;++d)h[d].getType()===this.getType()?a=a.concat(h[d].getGeometriesArrayRecursive()):a.push(h[d]);return a},l.prototype.getSimplifiedGeometry=function(a){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),a<0||0!==this.simplifiedGeometryMaxMinSquaredTolerance&&a<this.simplifiedGeometryMaxMinSquaredTolerance)return this;for(var h=[],d=this.geometries_,f=!1,m=0,g=d.length;m<g;++m){var y=d[m],v=y.getSimplifiedGeometry(a);h.push(v),v!==y&&(f=!0)}if(f){var _=new l(null);return _.setGeometriesArray(h),_}return this.simplifiedGeometryMaxMinSquaredTolerance=a,this},l.prototype.getType=function(){return"GeometryCollection"},l.prototype.intersectsExtent=function(a){for(var h=this.geometries_,d=0,f=h.length;d<f;++d)if(h[d].intersectsExtent(a))return!0;return!1},l.prototype.isEmpty=function(){return 0===this.geometries_.length},l.prototype.rotate=function(a,h){for(var d=this.geometries_,f=0,m=d.length;f<m;++f)d[f].rotate(a,h);this.changed()},l.prototype.scale=function(a,h,d){var f=d;f||(f=Jo(this.getExtent()));for(var m=this.geometries_,g=0,y=m.length;g<y;++g)m[g].scale(a,h,f);this.changed()},l.prototype.setGeometries=function(a){this.setGeometriesArray(gj(a))},l.prototype.setGeometriesArray=function(a){this.unlistenGeometriesChange_(),this.geometries_=a,this.listenGeometriesChange_(),this.changed()},l.prototype.applyTransform=function(a){for(var h=this.geometries_,d=0,f=h.length;d<f;++d)h[d].applyTransform(a);this.changed()},l.prototype.translate=function(a,h){for(var d=this.geometries_,f=0,m=d.length;f<m;++f)d[f].translate(a,h);this.changed()},l.prototype.disposeInternal=function(){this.unlistenGeometriesChange_(),c.prototype.disposeInternal.call(this)},l}(X9);function gj(c){for(var l=[],a=0,h=c.length;a<h;++a)l.push(c[a].clone());return l}const Jd=R1e;var P1e=function(){function c(){this.dataProjection=void 0,this.defaultFeatureProjection=void 0,this.supportedMediaTypes=null}return c.prototype.getReadOptions=function(l,a){var h;if(a){var d=a.dataProjection?cn(a.dataProjection):this.readProjection(l);a.extent&&d&&d.getUnits()===ta.TILE_PIXELS&&(d=cn(d)).setWorldExtent(a.extent),h={dataProjection:d,featureProjection:a.featureProjection}}return this.adaptOptions(h)},c.prototype.adaptOptions=function(l){return $n({dataProjection:this.dataProjection,featureProjection:this.defaultFeatureProjection},l)},c.prototype.getType=function(){return _n()},c.prototype.readFeature=function(l,a){return _n()},c.prototype.readFeatures=function(l,a){return _n()},c.prototype.readGeometry=function(l,a){return _n()},c.prototype.readProjection=function(l){return _n()},c.prototype.writeFeature=function(l,a){return _n()},c.prototype.writeFeatures=function(l,a){return _n()},c.prototype.writeGeometry=function(l,a){return _n()},c}();const $2=P1e;function zy(c,l,a){var f,h=a?cn(a.featureProjection):null,d=a?cn(a.dataProjection):null;if(f=h&&d&&!bc(h,d)?(l?c.clone():c).transform(l?h:d,l?d:h):c,l&&a&&void 0!==a.decimals){var m=Math.pow(10,a.decimals);f===c&&(f=c.clone()),f.applyTransform(function(y){for(var v=0,_=y.length;v<_;++v)y[v]=Math.round(y[v]*m)/m;return y})}return f}var L1e=function(){var c=function(l,a){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,d){h.__proto__=d}||function(h,d){for(var f in d)Object.prototype.hasOwnProperty.call(d,f)&&(h[f]=d[f])})(l,a)};return function(l,a){if("function"!=typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");function h(){this.constructor=l}c(l,a),l.prototype=null===a?Object.create(a):(h.prototype=a.prototype,new h)}}(),O1e=function(c){function l(){return c.call(this)||this}return L1e(l,c),l.prototype.getType=function(){return"json"},l.prototype.readFeature=function(a,h){return this.readFeatureFromObject(Tx(a),this.getReadOptions(a,h))},l.prototype.readFeatures=function(a,h){return this.readFeaturesFromObject(Tx(a),this.getReadOptions(a,h))},l.prototype.readFeatureFromObject=function(a,h){return _n()},l.prototype.readFeaturesFromObject=function(a,h){return _n()},l.prototype.readGeometry=function(a,h){return this.readGeometryFromObject(Tx(a),this.getReadOptions(a,h))},l.prototype.readGeometryFromObject=function(a,h){return _n()},l.prototype.readProjection=function(a){return this.readProjectionFromObject(Tx(a))},l.prototype.readProjectionFromObject=function(a){return _n()},l.prototype.writeFeature=function(a,h){return JSON.stringify(this.writeFeatureObject(a,h))},l.prototype.writeFeatureObject=function(a,h){return _n()},l.prototype.writeFeatures=function(a,h){return JSON.stringify(this.writeFeaturesObject(a,h))},l.prototype.writeFeaturesObject=function(a,h){return _n()},l.prototype.writeGeometry=function(a,h){return JSON.stringify(this.writeGeometryObject(a,h))},l.prototype.writeGeometryObject=function(a,h){return _n()},l}($2);function Tx(c){return"string"==typeof c?JSON.parse(c)||null:null!==c?c:null}const yj=O1e;var N1e=function(){var c=function(l,a){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,d){h.__proto__=d}||function(h,d){for(var f in d)Object.prototype.hasOwnProperty.call(d,f)&&(h[f]=d[f])})(l,a)};return function(l,a){if("function"!=typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");function h(){this.constructor=l}c(l,a),l.prototype=null===a?Object.create(a):(h.prototype=a.prototype,new h)}}(),F1e=function(c){function l(a,h){var d=c.call(this)||this;return d.flatMidpoint_=null,d.flatMidpointRevision_=-1,d.maxDelta_=-1,d.maxDeltaRevision_=-1,void 0===h||Array.isArray(a[0])?d.setCoordinates(a,h):d.setFlatCoordinates(h,a),d}return N1e(l,c),l.prototype.appendCoordinate=function(a){this.flatCoordinates?xi(this.flatCoordinates,a):this.flatCoordinates=a.slice(),this.changed()},l.prototype.clone=function(){var a=new l(this.flatCoordinates.slice(),this.layout);return a.applyProperties(this),a},l.prototype.closestPointXY=function(a,h,d,f){return f<Op(this.getExtent(),a,h)?f:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(u2(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),d2(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!1,a,h,d,f))},l.prototype.forEachSegment=function(a){return t7(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,a)},l.prototype.getCoordinateAtM=function(a,h){return"XYM"!=this.layout&&"XYZM"!=this.layout?null:X2(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,a,void 0!==h&&h)},l.prototype.getCoordinates=function(){return Hd(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},l.prototype.getCoordinateAt=function(a,h){return bx(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,a,h,this.stride)},l.prototype.getLength=function(){return F2(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},l.prototype.getFlatMidpoint=function(){return this.flatMidpointRevision_!=this.getRevision()&&(this.flatMidpoint_=this.getCoordinateAt(.5,this.flatMidpoint_),this.flatMidpointRevision_=this.getRevision()),this.flatMidpoint_},l.prototype.getSimplifiedGeometryInternal=function(a){var h=[];return h.length=lx(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,a,h,0),new l(h,"XY")},l.prototype.getType=function(){return"LineString"},l.prototype.intersectsExtent=function(a){return cx(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,a)},l.prototype.setCoordinates=function(a,h){this.setLayout(h,a,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=ax(this.flatCoordinates,0,a,this.stride),this.changed()},l}(jp);const Eh=F1e;var k1e=function(){var c=function(l,a){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,d){h.__proto__=d}||function(h,d){for(var f in d)Object.prototype.hasOwnProperty.call(d,f)&&(h[f]=d[f])})(l,a)};return function(l,a){if("function"!=typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");function h(){this.constructor=l}c(l,a),l.prototype=null===a?Object.create(a):(h.prototype=a.prototype,new h)}}(),V1e=function(c){function l(a,h,d){var f=c.call(this)||this;if(f.ends_=[],f.maxDelta_=-1,f.maxDeltaRevision_=-1,Array.isArray(a[0]))f.setCoordinates(a,h);else if(void 0!==h&&d)f.setFlatCoordinates(h,a),f.ends_=d;else{for(var m=f.getLayout(),g=a,y=[],v=[],_=0,S=g.length;_<S;++_){var b=g[_];0===_&&(m=b.getLayout()),xi(y,b.getFlatCoordinates()),v.push(y.length)}f.setFlatCoordinates(m,y),f.ends_=v}return f}return k1e(l,c),l.prototype.appendLineString=function(a){this.flatCoordinates?xi(this.flatCoordinates,a.getFlatCoordinates().slice()):this.flatCoordinates=a.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()},l.prototype.clone=function(){var a=new l(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return a.applyProperties(this),a},l.prototype.closestPointXY=function(a,h,d,f){return f<Op(this.getExtent(),a,h)?f:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(h2(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),f2(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!1,a,h,d,f))},l.prototype.getCoordinateAtM=function(a,h,d){return"XYM"!=this.layout&&"XYZM"!=this.layout||0===this.flatCoordinates.length?null:function w1e(c,l,a,h,d,f,m){if(m)return X2(c,l,a[a.length-1],h,d,f);var g;if(d<c[h-1])return f?((g=c.slice(0,h))[h-1]=d,g):null;if(c[c.length-1]<d)return f?((g=c.slice(c.length-h))[h-1]=d,g):null;for(var y=0,v=a.length;y<v;++y){var _=a[y];if(l!=_){if(d<c[l+h-1])return null;if(d<=c[_-1])return X2(c,l,_,h,d,!1);l=_}}return null}(this.flatCoordinates,0,this.ends_,this.stride,a,void 0!==h&&h,void 0!==d&&d)},l.prototype.getCoordinates=function(){return ES(this.flatCoordinates,0,this.ends_,this.stride)},l.prototype.getEnds=function(){return this.ends_},l.prototype.getLineString=function(a){return a<0||this.ends_.length<=a?null:new Eh(this.flatCoordinates.slice(0===a?0:this.ends_[a-1],this.ends_[a]),this.layout)},l.prototype.getLineStrings=function(){for(var a=this.flatCoordinates,h=this.ends_,d=this.layout,f=[],m=0,g=0,y=h.length;g<y;++g){var v=h[g],_=new Eh(a.slice(m,v),d);f.push(_),m=v}return f},l.prototype.getFlatMidpoints=function(){for(var a=[],h=this.flatCoordinates,d=0,f=this.ends_,m=this.stride,g=0,y=f.length;g<y;++g){var v=f[g];xi(a,bx(h,d,v,m,.5)),d=v}return a},l.prototype.getSimplifiedGeometryInternal=function(a){var h=[],d=[];return h.length=function Y9(c,l,a,h,d,f,m,g){for(var y=0,v=a.length;y<v;++y){var _=a[y];m=lx(c,l,_,h,d,f,m),g.push(m),l=_}return m}(this.flatCoordinates,0,this.ends_,this.stride,a,h,0,d),new l(h,"XY",d)},l.prototype.getType=function(){return"MultiLineString"},l.prototype.intersectsExtent=function(a){return function z0e(c,l,a,h,d){for(var f=0,m=a.length;f<m;++f){if(cx(c,l,a[f],h,d))return!0;l=a[f]}return!1}(this.flatCoordinates,0,this.ends_,this.stride,a)},l.prototype.setCoordinates=function(a,h){this.setLayout(h,a,2),this.flatCoordinates||(this.flatCoordinates=[]);var d=p2(this.flatCoordinates,0,a,this.stride,this.ends_);this.flatCoordinates.length=0===d.length?0:d[d.length-1],this.changed()},l}(jp);const GS=V1e;var B1e=function(){var c=function(l,a){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,d){h.__proto__=d}||function(h,d){for(var f in d)Object.prototype.hasOwnProperty.call(d,f)&&(h[f]=d[f])})(l,a)};return function(l,a){if("function"!=typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");function h(){this.constructor=l}c(l,a),l.prototype=null===a?Object.create(a):(h.prototype=a.prototype,new h)}}(),U1e=function(c){function l(a,h){var d=c.call(this)||this;return h&&!Array.isArray(a[0])?d.setFlatCoordinates(h,a):d.setCoordinates(a,h),d}return B1e(l,c),l.prototype.appendPoint=function(a){this.flatCoordinates?xi(this.flatCoordinates,a.getFlatCoordinates()):this.flatCoordinates=a.getFlatCoordinates().slice(),this.changed()},l.prototype.clone=function(){var a=new l(this.flatCoordinates.slice(),this.layout);return a.applyProperties(this),a},l.prototype.closestPointXY=function(a,h,d,f){if(f<Op(this.getExtent(),a,h))return f;for(var m=this.flatCoordinates,g=this.stride,y=0,v=m.length;y<v;y+=g){var _=Fp(a,h,m[y],m[y+1]);if(_<f){f=_;for(var S=0;S<g;++S)d[S]=m[y+S];d.length=g}}return f},l.prototype.getCoordinates=function(){return Hd(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},l.prototype.getPoint=function(a){return a<0||(this.flatCoordinates?this.flatCoordinates.length/this.stride:0)<=a?null:new yu(this.flatCoordinates.slice(a*this.stride,(a+1)*this.stride),this.layout)},l.prototype.getPoints=function(){for(var a=this.flatCoordinates,h=this.layout,d=this.stride,f=[],m=0,g=a.length;m<g;m+=d){var y=new yu(a.slice(m,m+d),h);f.push(y)}return f},l.prototype.getType=function(){return"MultiPoint"},l.prototype.intersectsExtent=function(a){for(var h=this.flatCoordinates,d=this.stride,f=0,m=h.length;f<m;f+=d)if(uS(a,h[f],h[f+1]))return!0;return!1},l.prototype.setCoordinates=function(a,h){this.setLayout(h,a,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=ax(this.flatCoordinates,0,a,this.stride),this.changed()},l}(jp);const zS=U1e;var G1e=function(){var c=function(l,a){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,d){h.__proto__=d}||function(h,d){for(var f in d)Object.prototype.hasOwnProperty.call(d,f)&&(h[f]=d[f])})(l,a)};return function(l,a){if("function"!=typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");function h(){this.constructor=l}c(l,a),l.prototype=null===a?Object.create(a):(h.prototype=a.prototype,new h)}}(),z1e=function(c){function l(a,h,d){var f=c.call(this)||this;if(f.endss_=[],f.flatInteriorPointsRevision_=-1,f.flatInteriorPoints_=null,f.maxDelta_=-1,f.maxDeltaRevision_=-1,f.orientedRevision_=-1,f.orientedFlatCoordinates_=null,!d&&!Array.isArray(a[0])){for(var m=f.getLayout(),g=a,y=[],v=[],_=0,S=g.length;_<S;++_){var b=g[_];0===_&&(m=b.getLayout());for(var T=y.length,x=b.getEnds(),E=0,D=x.length;E<D;++E)x[E]+=T;xi(y,b.getFlatCoordinates()),v.push(x)}h=m,a=y,d=v}return void 0!==h&&d?(f.setFlatCoordinates(h,a),f.endss_=d):f.setCoordinates(a,h),f}return G1e(l,c),l.prototype.appendPolygon=function(a){var h;if(this.flatCoordinates){var d=this.flatCoordinates.length;xi(this.flatCoordinates,a.getFlatCoordinates());for(var f=0,m=(h=a.getEnds().slice()).length;f<m;++f)h[f]+=d}else this.flatCoordinates=a.getFlatCoordinates().slice(),h=a.getEnds().slice(),this.endss_.push();this.endss_.push(h),this.changed()},l.prototype.clone=function(){for(var a=this.endss_.length,h=new Array(a),d=0;d<a;++d)h[d]=this.endss_[d].slice();var f=new l(this.flatCoordinates.slice(),this.layout,h);return f.applyProperties(this),f},l.prototype.closestPointXY=function(a,h,d,f){return f<Op(this.getExtent(),a,h)?f:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(function D0e(c,l,a,h,d){for(var f=0,m=a.length;f<m;++f){var g=a[f];d=h2(c,l,g,h,d),l=g[g.length-1]}return d}(this.flatCoordinates,0,this.endss_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),function A0e(c,l,a,h,d,f,m,g,y,v,_){for(var S=_||[NaN,NaN],b=0,T=a.length;b<T;++b){var x=a[b];v=f2(c,l,x,h,d,f,m,g,y,v,S),l=x[x.length-1]}return v}(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,this.maxDelta_,!0,a,h,d,f))},l.prototype.containsXY=function(a,h){return function G0e(c,l,a,h,d,f){if(0===a.length)return!1;for(var m=0,g=a.length;m<g;++m){var y=a[m];if(g2(c,l,y,h,d,f))return!0;l=y[y.length-1]}return!1}(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,a,h)},l.prototype.getArea=function(){return function N0e(c,l,a,h){for(var d=0,f=0,m=a.length;f<m;++f){var g=a[f];d+=Q9(c,l,g,h),l=g[g.length-1]}return d}(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride)},l.prototype.getCoordinates=function(a){var h;return void 0!==a?i7(h=this.getOrientedFlatCoordinates().slice(),0,this.endss_,this.stride,a):h=this.flatCoordinates,m2(h,0,this.endss_,this.stride)},l.prototype.getEndss=function(){return this.endss_},l.prototype.getFlatInteriorPoints=function(){if(this.flatInteriorPointsRevision_!=this.getRevision()){var a=pj(this.flatCoordinates,0,this.endss_,this.stride);this.flatInteriorPoints_=e7(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,a),this.flatInteriorPointsRevision_=this.getRevision()}return this.flatInteriorPoints_},l.prototype.getInteriorPoints=function(){return new zS(this.getFlatInteriorPoints().slice(),"XYM")},l.prototype.getOrientedFlatCoordinates=function(){if(this.orientedRevision_!=this.getRevision()){var a=this.flatCoordinates;!function X0e(c,l,a,h,d){for(var f=0,m=a.length;f<m;++f){var g=a[f];if(!r7(c,l,g,h,d))return!1;g.length&&(l=g[g.length-1])}return!0}(a,0,this.endss_,this.stride)?(this.orientedFlatCoordinates_=a.slice(),this.orientedFlatCoordinates_.length=i7(this.orientedFlatCoordinates_,0,this.endss_,this.stride)):this.orientedFlatCoordinates_=a,this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_},l.prototype.getSimplifiedGeometryInternal=function(a){var h=[],d=[];return h.length=function O0e(c,l,a,h,d,f,m,g){for(var y=0,v=a.length;y<v;++y){var _=a[y],S=[];m=Z9(c,l,_,h,d,f,m,S),g.push(S),l=_[_.length-1]}return m}(this.flatCoordinates,0,this.endss_,this.stride,Math.sqrt(a),h,0,d),new l(h,"XY",d)},l.prototype.getPolygon=function(a){if(a<0||this.endss_.length<=a)return null;var h;if(0===a)h=0;else{var d=this.endss_[a-1];h=d[d.length-1]}var f=this.endss_[a].slice(),m=f[f.length-1];if(0!==h)for(var g=0,y=f.length;g<y;++g)f[g]-=h;return new vu(this.flatCoordinates.slice(h,m),this.layout,f)},l.prototype.getPolygons=function(){for(var a=this.layout,h=this.flatCoordinates,d=this.endss_,f=[],m=0,g=0,y=d.length;g<y;++g){var v=d[g].slice(),_=v[v.length-1];if(0!==m)for(var S=0,b=v.length;S<b;++S)v[S]-=m;var T=new vu(h.slice(m,_),a,v);f.push(T),m=_}return f},l.prototype.getType=function(){return"MultiPolygon"},l.prototype.intersectsExtent=function(a){return function j0e(c,l,a,h,d){for(var f=0,m=a.length;f<m;++f){var g=a[f];if(n7(c,l,g,h,d))return!0;l=g[g.length-1]}return!1}(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,a)},l.prototype.setCoordinates=function(a,h){this.setLayout(h,a,3),this.flatCoordinates||(this.flatCoordinates=[]);var d=function R0e(c,l,a,h,d){for(var f=d||[],m=0,g=0,y=a.length;g<y;++g){var v=p2(c,l,a[g],h,f[m]);f[m++]=v,l=v[v.length-1]}return f.length=m,f}(this.flatCoordinates,0,a,this.stride,this.endss_);if(0===d.length)this.flatCoordinates.length=0;else{var f=d[d.length-1];this.flatCoordinates.length=0===f.length?0:f[f.length-1]}this.changed()},l}(jp);const wx=z1e;var H1e=function(){var c=function(l,a){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,d){h.__proto__=d}||function(h,d){for(var f in d)Object.prototype.hasOwnProperty.call(d,f)&&(h[f]=d[f])})(l,a)};return function(l,a){if("function"!=typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");function h(){this.constructor=l}c(l,a),l.prototype=null===a?Object.create(a):(h.prototype=a.prototype,new h)}}(),j1e=function(c){function l(a){var h=this,d=a||{};return(h=c.call(this)||this).dataProjection=cn(d.dataProjection?d.dataProjection:"EPSG:4326"),d.featureProjection&&(h.defaultFeatureProjection=cn(d.featureProjection)),h.geometryName_=d.geometryName,h.extractGeometryName_=d.extractGeometryName,h.supportedMediaTypes=["application/geo+json","application/vnd.geo+json"],h}return H1e(l,c),l.prototype.readFeatureFromObject=function(a,h){var d,f=Y2((d="Feature"===a.type?a:{type:"Feature",geometry:a,properties:null}).geometry,h),m=new Gy;return this.geometryName_?m.setGeometryName(this.geometryName_):this.extractGeometryName_&&"geometry_name"in d!==void 0&&m.setGeometryName(d.geometry_name),m.setGeometry(f),"id"in d&&m.setId(d.id),d.properties&&m.setProperties(d.properties,!0),m},l.prototype.readFeaturesFromObject=function(a,h){var f=null;if("FeatureCollection"===a.type){f=[];for(var g=a.features,y=0,v=g.length;y<v;++y)f.push(this.readFeatureFromObject(g[y],h))}else f=[this.readFeatureFromObject(a,h)];return f},l.prototype.readGeometryFromObject=function(a,h){return Y2(a,h)},l.prototype.readProjectionFromObject=function(a){var d,h=a.crs;return h?"name"==h.type?d=cn(h.properties.name):"EPSG"===h.type?d=cn("EPSG:"+h.properties.code):bn(!1,36):d=this.dataProjection,d},l.prototype.writeFeatureObject=function(a,h){h=this.adaptOptions(h);var d={type:"Feature",geometry:null,properties:null},f=a.getId();if(void 0!==f&&(d.id=f),!a.hasProperties())return d;var m=a.getProperties(),g=a.getGeometry();return g&&(d.geometry=Z2(g,h),delete m[a.getGeometryName()]),Vp(m)||(d.properties=m),d},l.prototype.writeFeaturesObject=function(a,h){h=this.adaptOptions(h);for(var d=[],f=0,m=a.length;f<m;++f)d.push(this.writeFeatureObject(a[f],h));return{type:"FeatureCollection",features:d}},l.prototype.writeGeometryObject=function(a,h){return Z2(a,this.adaptOptions(h))},l}(yj);function Y2(c,l){if(!c)return null;var a;switch(c.type){case"Point":a=function X1e(c){return new yu(c.coordinates)}(c);break;case"LineString":a=function q1e(c){return new Eh(c.coordinates)}(c);break;case"Polygon":a=function K1e(c){return new vu(c.coordinates)}(c);break;case"MultiPoint":a=function Y1e(c){return new zS(c.coordinates)}(c);break;case"MultiLineString":a=function $1e(c){return new GS(c.coordinates)}(c);break;case"MultiPolygon":a=function Z1e(c){return new wx(c.coordinates)}(c);break;case"GeometryCollection":a=function W1e(c,l){var a=c.geometries.map(function(h){return Y2(h,l)});return new Jd(a)}(c);break;default:throw new Error("Unsupported GeoJSON type: "+c.type)}return zy(a,!1,l)}function Z2(c,l){var h,a=(c=zy(c,!0,l)).getType();switch(a){case"Point":h=function rwe(c,l){return{type:"Point",coordinates:c.getCoordinates()}}(c);break;case"LineString":h=function J1e(c,l){return{type:"LineString",coordinates:c.getCoordinates()}}(c);break;case"Polygon":h=function iwe(c,l){var a;return l&&(a=l.rightHanded),{type:"Polygon",coordinates:c.getCoordinates(a)}}(c,l);break;case"MultiPoint":h=function twe(c,l){return{type:"MultiPoint",coordinates:c.getCoordinates()}}(c);break;case"MultiLineString":h=function ewe(c,l){return{type:"MultiLineString",coordinates:c.getCoordinates()}}(c);break;case"MultiPolygon":h=function nwe(c,l){var a;return l&&(a=l.rightHanded),{type:"MultiPolygon",coordinates:c.getCoordinates(a)}}(c,l);break;case"GeometryCollection":h=function Q1e(c,l){var a=c.getGeometriesArray().map(function(h){var d=$n({},l);return delete d.featureProjection,Z2(h,d)});return{type:"GeometryCollection",geometries:a}}(c,l);break;case"Circle":h={type:"GeometryCollection",geometries:[]};break;default:throw new Error("Unsupported geometry type: "+a)}return h}const Ma=j1e;var swe=ct(697),owe=function(){var c=function(l,a){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,d){h.__proto__=d}||function(h,d){for(var f in d)Object.prototype.hasOwnProperty.call(d,f)&&(h[f]=d[f])})(l,a)};return function(l,a){if("function"!=typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");function h(){this.constructor=l}c(l,a),l.prototype=null===a?Object.create(a):(h.prototype=a.prototype,new h)}}(),awe=function(c){function l(a){var h=c.call(this)||this,d=a||{};return h.dataProjection=new Gp({code:"",units:ta.TILE_PIXELS}),h.featureClass_=d.featureClass?d.featureClass:q2,h.geometryName_=d.geometryName,h.layerName_=d.layerName?d.layerName:"layer",h.layers_=d.layers?d.layers:null,h.idProperty_=d.idProperty,h.supportedMediaTypes=["application/vnd.mapbox-vector-tile","application/x-protobuf"],h}return owe(l,c),l.prototype.readRawGeometry_=function(a,h,d,f){a.pos=h.geometry;for(var m=a.readVarint()+a.pos,g=1,y=0,v=0,_=0,S=0,b=0;a.pos<m;){if(!y){var T=a.readVarint();g=7&T,y=T>>3}y--,1===g||2===g?(v+=a.readSVarint(),_+=a.readSVarint(),1===g&&S>b&&(f.push(S),b=S),d.push(v,_),S+=2):7===g?S>b&&(d.push(d[b],d[b+1]),S+=2):bn(!1,59)}S>b&&(f.push(S),b=S)},l.prototype.createFeature_=function(a,h,d){var f=h.type;if(0===f)return null;var m,y,g=h.properties;this.idProperty_?(y=g[this.idProperty_],delete g[this.idProperty_]):y=h.id,g[this.layerName_]=h.layer.name;var v=[],_=[];this.readRawGeometry_(a,h,v,_);var S=function dwe(c,l){var a;return 1===c?a=1===l?"Point":"MultiPoint":2===c?a=1===l?"LineString":"MultiLineString":3===c&&(a="Polygon"),a}(f,_.length);if(this.featureClass_===q2)(m=new this.featureClass_(S,v,_,g,y)).transform(d.dataProjection);else{var b=void 0;if("Polygon"==S){var T=function q0e(c,l){for(var a=[],h=0,d=0,f=0,m=l.length;f<m;++f){var g=l[f];if(v2(c,h,g,2)){if(0===a.length)continue;a[a.length-1].push(l[d])}else a.push(l.slice(d,f+1));d=f+1,h=g}return a}(v,_);b=T.length>1?new wx(v,"XY",T):new vu(v,"XY",_)}else b="Point"===S?new yu(v,"XY"):"LineString"===S?new Eh(v,"XY"):"Polygon"===S?new vu(v,"XY",_):"MultiPoint"===S?new zS(v,"XY"):"MultiLineString"===S?new GS(v,"XY",_):null;m=new(0,this.featureClass_),this.geometryName_&&m.setGeometryName(this.geometryName_);var E=zy(b,!1,d);m.setGeometry(E),void 0!==y&&m.setId(y),m.setProperties(g,!0)}return m},l.prototype.getType=function(){return"arraybuffer"},l.prototype.readFeatures=function(a,h){var d=this.layers_,f=this.adaptOptions(h),m=cn(f.dataProjection);m.setWorldExtent(f.extent),f.dataProjection=m;var g=new swe(a),y=g.readFields(lwe,{}),v=[];for(var _ in y)if(!d||-1!=d.indexOf(_)){var S=y[_];m.setExtent(S?[0,0,S.extent,S.extent]:null);for(var T=0,x=S.length;T<x;++T){var E=hwe(g,S,T),D=this.createFeature_(g,E,f);null!==D&&v.push(D)}}return v},l.prototype.readProjection=function(a){return this.dataProjection},l.prototype.setLayers=function(a){this.layers_=a},l}($2);function lwe(c,l,a){if(3===c){var h={keys:[],values:[],features:[]},d=a.readVarint()+a.pos;a.readFields(cwe,h,d),h.length=h.features.length,h.length&&(l[h.name]=h)}}function cwe(c,l,a){if(15===c)l.version=a.readVarint();else if(1===c)l.name=a.readString();else if(5===c)l.extent=a.readVarint();else if(2===c)l.features.push(a.pos);else if(3===c)l.keys.push(a.readString());else if(4===c){for(var h=null,d=a.readVarint()+a.pos;a.pos<d;)h=1==(c=a.readVarint()>>3)?a.readString():2===c?a.readFloat():3===c?a.readDouble():4===c?a.readVarint64():5===c?a.readVarint():6===c?a.readSVarint():7===c?a.readBoolean():null;l.values.push(h)}}function uwe(c,l,a){if(1==c)l.id=a.readVarint();else if(2==c)for(var h=a.readVarint()+a.pos;a.pos<h;){var d=l.layer.keys[a.readVarint()],f=l.layer.values[a.readVarint()];l.properties[d]=f}else 3==c?l.type=a.readVarint():4==c&&(l.geometry=a.pos)}function hwe(c,l,a){c.pos=l.features[a];var h=c.readVarint()+c.pos,d={layer:l,type:0,properties:{}};return c.readFields(uwe,d,h),d}const Cx=awe;var fwe=function(){var c=function(l,a){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,d){h.__proto__=d}||function(h,d){for(var f in d)Object.prototype.hasOwnProperty.call(d,f)&&(h[f]=d[f])})(l,a)};return function(l,a){if("function"!=typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");function h(){this.constructor=l}c(l,a),l.prototype=null===a?Object.create(a):(h.prototype=a.prototype,new h)}}(),pwe=function(c){function l(a){var h=this,d=void 0===a.imageSmoothing||a.imageSmoothing;return void 0!==a.interpolate&&(d=a.interpolate),(h=c.call(this,{attributions:a.attributions,cacheSize:a.cacheSize,opaque:a.opaque,projection:a.projection,state:a.state,tileGrid:a.tileGrid,tileLoadFunction:a.tileLoadFunction?a.tileLoadFunction:mwe,tilePixelRatio:a.tilePixelRatio,tileUrlFunction:a.tileUrlFunction,url:a.url,urls:a.urls,wrapX:a.wrapX,transition:a.transition,interpolate:d,key:a.key,attributionsCollapsible:a.attributionsCollapsible,zDirection:a.zDirection})||this).crossOrigin=void 0!==a.crossOrigin?a.crossOrigin:null,h.tileClass=void 0!==a.tileClass?a.tileClass:R7,h.tileCacheForProjection={},h.tileGridForProjection={},h.reprojectionErrorThreshold_=a.reprojectionErrorThreshold,h.renderReprojectionEdges_=!1,h}return fwe(l,c),l.prototype.canExpireCache=function(){if(this.tileCache.canExpireCache())return!0;for(var a in this.tileCacheForProjection)if(this.tileCacheForProjection[a].canExpireCache())return!0;return!1},l.prototype.expireCache=function(a,h){var d=this.getTileCacheForProjection(a);for(var f in this.tileCache.expireCache(this.tileCache==d?h:{}),this.tileCacheForProjection){var m=this.tileCacheForProjection[f];m.expireCache(m==d?h:{})}},l.prototype.getGutterForProjection=function(a){return this.getProjection()&&a&&!bc(this.getProjection(),a)?0:this.getGutter()},l.prototype.getGutter=function(){return 0},l.prototype.getKey=function(){var a=c.prototype.getKey.call(this);return this.getInterpolate()||(a+=":disable-interpolation"),a},l.prototype.getOpaque=function(a){return!(this.getProjection()&&a&&!bc(this.getProjection(),a))&&c.prototype.getOpaque.call(this,a)},l.prototype.getTileGridForProjection=function(a){var h=this.getProjection();if(this.tileGrid&&(!h||bc(h,a)))return this.tileGrid;var d=tn(a);return d in this.tileGridForProjection||(this.tileGridForProjection[d]=nj(a)),this.tileGridForProjection[d]},l.prototype.getTileCacheForProjection=function(a){var h=this.getProjection();if(!h||bc(h,a))return this.tileCache;var d=tn(a);return d in this.tileCacheForProjection||(this.tileCacheForProjection[d]=new z2(this.tileCache.highWaterMark)),this.tileCacheForProjection[d]},l.prototype.createTile_=function(a,h,d,f,m,g){var y=[a,h,d],v=this.getTileCoordForTileUrlFunction(y,m),_=v?this.tileUrlFunction(v,f,m):void 0,S=new this.tileClass(y,void 0!==_?0:4,void 0!==_?_:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return S.key=g,S.addEventListener("change",this.handleTileChange.bind(this)),S},l.prototype.getTile=function(a,h,d,f,m){var g=this.getProjection();if(!g||!m||bc(g,m))return this.getTileInternal(a,h,d,f,g||m);var y=this.getTileCacheForProjection(m),v=[a,h,d],_=void 0,S=Q7(v);y.containsKey(S)&&(_=y.get(S));var b=this.getKey();if(_&&_.key==b)return _;var T=this.getTileGridForProjection(g),x=this.getTileGridForProjection(m),E=this.getTileCoordForTileUrlFunction(v,m),D=new F7(g,T,m,x,v,E,this.getTilePixelRatio(f),this.getGutter(),function(I,M,L,P){return this.getTileInternal(I,M,L,P,g)}.bind(this),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_,this.getInterpolate());return D.key=b,_?(D.interimTile=_,D.refreshInterimChain(),y.replace(S,D)):y.set(S,D),D},l.prototype.getTileInternal=function(a,h,d,f,m){var g=null,y=By(a,h,d),v=this.getKey();if(this.tileCache.containsKey(y)){if((g=this.tileCache.get(y)).key!=v){var _=g;(g=this.createTile_(a,h,d,f,m,v)).interimTile=0==_.getState()?_.interimTile:_,g.refreshInterimChain(),this.tileCache.replace(y,g)}}else g=this.createTile_(a,h,d,f,m,v),this.tileCache.set(y,g);return g},l.prototype.setRenderReprojectionEdges=function(a){if(this.renderReprojectionEdges_!=a){for(var h in this.renderReprojectionEdges_=a,this.tileCacheForProjection)this.tileCacheForProjection[h].clear();this.changed()}},l.prototype.setTileGridForProjection=function(a,h){var d=cn(a);if(d){var f=tn(d);f in this.tileGridForProjection||(this.tileGridForProjection[f]=h)}},l}(lj);function mwe(c,l){c.getImage().src=l}const HS=pwe;var vj=function(){var c=function(l,a){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,d){h.__proto__=d}||function(h,d){for(var f in d)Object.prototype.hasOwnProperty.call(d,f)&&(h[f]=d[f])})(l,a)};return function(l,a){if("function"!=typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");function h(){this.constructor=l}c(l,a),l.prototype=null===a?Object.create(a):(h.prototype=a.prototype,new h)}}();(function(c){vj(function l(a){var h=this;return(h=c.call(this,"Unexpected response status: "+a.status)||this).name="ResponseError",h.response=a,h},c)})(Error),function(c){vj(function l(a){var h=c.call(this,"Failed to issue request")||this;return h.name="ClientError",h.client=a,h},c)}(Error);var _we=function(){var c=function(l,a){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,d){h.__proto__=d}||function(h,d){for(var f in d)Object.prototype.hasOwnProperty.call(d,f)&&(h[f]=d[f])})(l,a)};return function(l,a){if("function"!=typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");function h(){this.constructor=l}c(l,a),l.prototype=null===a?Object.create(a):(h.prototype=a.prototype,new h)}}(),Swe=function(c){function l(a){var h=this,d=void 0===a.imageSmoothing||a.imageSmoothing;if(void 0!==a.interpolate&&(d=a.interpolate),(h=c.call(this,{attributions:a.attributions,cacheSize:a.cacheSize,crossOrigin:a.crossOrigin,interpolate:d,projection:cn("EPSG:3857"),reprojectionErrorThreshold:a.reprojectionErrorThreshold,state:"loading",tileLoadFunction:a.tileLoadFunction,wrapX:void 0===a.wrapX||a.wrapX,transition:a.transition,zDirection:a.zDirection})||this).tileJSON_=null,h.tileSize_=a.tileSize,a.url)if(a.jsonp)!function gwe(c,l,a,h){var d=document.createElement("script"),f="olc_"+tn(l);function m(){delete window[f],d.parentNode.removeChild(d)}d.async=!0,d.src=c+(-1==c.indexOf("?")?"?":"&")+(h||"callback")+"="+f;var g=setTimeout(function(){m(),a&&a()},1e4);window[f]=function(y){clearTimeout(g),m(),l(y)},document.getElementsByTagName("head")[0].appendChild(d)}(a.url,h.handleTileJSONResponse.bind(h),h.handleTileJSONError.bind(h));else{var f=new XMLHttpRequest;f.addEventListener("load",h.onXHRLoad_.bind(h)),f.addEventListener("error",h.onXHRError_.bind(h)),f.open("GET",a.url),f.send()}else a.tileJSON?h.handleTileJSONResponse(a.tileJSON):bn(!1,51);return h}return _we(l,c),l.prototype.onXHRLoad_=function(a){var h=a.target;if(!h.status||h.status>=200&&h.status<300){var d=void 0;try{d=JSON.parse(h.responseText)}catch{return void this.handleTileJSONError()}this.handleTileJSONResponse(d)}else this.handleTileJSONError()},l.prototype.onXHRError_=function(a){this.handleTileJSONError()},l.prototype.getTileJSON=function(){return this.tileJSON_},l.prototype.handleTileJSONResponse=function(a){var f,h=cn("EPSG:4326"),d=this.getProjection();if(void 0!==a.bounds){var m=Sh(h,d);f=GC(a.bounds,m)}var g=VS(d),_=Sx({extent:g,maxZoom:a.maxzoom||22,minZoom:a.minzoom||0,tileSize:this.tileSize_});if(this.tileGrid=_,this.tileUrlFunction=oj(a.tiles,_),void 0!==a.attribution&&!this.getAttributions()){var S=void 0!==f?f:g;this.setAttributions(function(b){return Mi(S,b.extent)?[a.attribution]:null})}this.tileJSON_=a,this.setState("ready")},l.prototype.handleTileJSONError=function(){this.setState("error")},l}(HS);const bwe=Swe;var Twe=function(){function c(l){this.rbush_=new A2(l),this.items_={}}return c.prototype.insert=function(l,a){var h={minX:l[0],minY:l[1],maxX:l[2],maxY:l[3],value:a};this.rbush_.insert(h),this.items_[tn(a)]=h},c.prototype.load=function(l,a){for(var h=new Array(a.length),d=0,f=a.length;d<f;d++){var m=l[d],g=a[d],y={minX:m[0],minY:m[1],maxX:m[2],maxY:m[3],value:g};h[d]=y,this.items_[tn(g)]=y}this.rbush_.load(h)},c.prototype.remove=function(l){var a=tn(l),h=this.items_[a];return delete this.items_[a],null!==this.rbush_.remove(h)},c.prototype.update=function(l,a){var h=this.items_[tn(a)];Ol([h.minX,h.minY,h.maxX,h.maxY],l)||(this.remove(a),this.insert(l,a))},c.prototype.getAll=function(){return this.rbush_.all().map(function(a){return a.value})},c.prototype.getInExtent=function(l){return this.rbush_.search({minX:l[0],minY:l[1],maxX:l[2],maxY:l[3]}).map(function(d){return d.value})},c.prototype.forEach=function(l){return this.forEach_(this.getAll(),l)},c.prototype.forEachInExtent=function(l,a){return this.forEach_(this.getInExtent(l),a)},c.prototype.forEach_=function(l,a){for(var h,d=0,f=l.length;d<f;d++)if(h=a(l[d]))return h;return h},c.prototype.isEmpty=function(){return Vp(this.items_)},c.prototype.clear=function(){this.rbush_.clear(),this.items_={}},c.prototype.getExtent=function(l){var a=this.rbush_.toJSON();return du(a.minX,a.minY,a.maxX,a.maxY,l)},c.prototype.concat=function(l){for(var a in this.rbush_.load(l.rbush_.all()),l.items_)this.items_[a]=l.items_[a]},c}();const Sj=Twe;function bj(c,l){return[[-1/0,-1/0,1/0,1/0]]}function K2(c,l){return[c]}var Tj=function(){var c=function(l,a){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,d){h.__proto__=d}||function(h,d){for(var f in d)Object.prototype.hasOwnProperty.call(d,f)&&(h[f]=d[f])})(l,a)};return function(l,a){if("function"!=typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");function h(){this.constructor=l}c(l,a),l.prototype=null===a?Object.create(a):(h.prototype=a.prototype,new h)}}(),ef=function(c){function l(a,h,d){var f=c.call(this,a)||this;return f.feature=h,f.features=d,f}return Tj(l,c),l}(gc),wwe=function(c){function l(a){var h=this,d=a||{};(h=c.call(this,{attributions:d.attributions,interpolate:!0,projection:void 0,state:"ready",wrapX:void 0===d.wrapX||d.wrapX})||this).loader_=Lp,h.format_=d.format,h.overlaps_=void 0===d.overlaps||d.overlaps,h.url_=d.url,void 0!==d.loader?h.loader_=d.loader:void 0!==h.url_&&(bn(h.format_,7),h.loader_=dj(h.url_,h.format_)),h.strategy_=void 0!==d.strategy?d.strategy:bj;var m,g,f=void 0===d.useSpatialIndex||d.useSpatialIndex;return h.featuresRtree_=f?new Sj:null,h.loadedExtentsRtree_=new Sj,h.loadingExtentsCount_=0,h.nullGeometryFeatures_={},h.idIndex_={},h.uidIndex_={},h.featureChangeKeys_={},h.featuresCollection_=null,Array.isArray(d.features)?g=d.features:d.features&&(g=(m=d.features).getArray()),!f&&void 0===m&&(m=new co(g)),void 0!==g&&h.addFeaturesInternal(g),void 0!==m&&h.bindFeaturesCollection_(m),h}return Tj(l,c),l.prototype.addFeature=function(a){this.addFeatureInternal(a),this.changed()},l.prototype.addFeatureInternal=function(a){var h=tn(a);if(this.addToIndex_(h,a)){this.setupChangeEvents_(h,a);var d=a.getGeometry();if(d){var f=d.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(f,a)}else this.nullGeometryFeatures_[h]=a;this.dispatchEvent(new ef("addfeature",a))}else this.featuresCollection_&&this.featuresCollection_.remove(a)},l.prototype.setupChangeEvents_=function(a,h){this.featureChangeKeys_[a]=[zn(h,"change",this.handleFeatureChange_,this),zn(h,"propertychange",this.handleFeatureChange_,this)]},l.prototype.addToIndex_=function(a,h){var d=!0,f=h.getId();return void 0!==f&&(f.toString()in this.idIndex_?d=!1:this.idIndex_[f.toString()]=h),d&&(bn(!(a in this.uidIndex_),30),this.uidIndex_[a]=h),d},l.prototype.addFeatures=function(a){this.addFeaturesInternal(a),this.changed()},l.prototype.addFeaturesInternal=function(a){for(var h=[],d=[],f=[],m=0,g=a.length;m<g;m++){var v=tn(y=a[m]);this.addToIndex_(v,y)&&d.push(y)}m=0;for(var _=d.length;m<_;m++){var y;v=tn(y=d[m]),this.setupChangeEvents_(v,y);var S=y.getGeometry();if(S){var b=S.getExtent();h.push(b),f.push(y)}else this.nullGeometryFeatures_[v]=y}if(this.featuresRtree_&&this.featuresRtree_.load(h,f),this.hasListener("addfeature")){m=0;for(var T=d.length;m<T;m++)this.dispatchEvent(new ef("addfeature",d[m]))}},l.prototype.bindFeaturesCollection_=function(a){var h=!1;this.addEventListener("addfeature",function(d){h||(h=!0,a.push(d.feature),h=!1)}),this.addEventListener("removefeature",function(d){h||(h=!0,a.remove(d.feature),h=!1)}),a.addEventListener("add",function(d){h||(h=!0,this.addFeature(d.element),h=!1)}.bind(this)),a.addEventListener("remove",function(d){h||(h=!0,this.removeFeature(d.element),h=!1)}.bind(this)),this.featuresCollection_=a},l.prototype.clear=function(a){if(a){for(var h in this.featureChangeKeys_)this.featureChangeKeys_[h].forEach(ri);this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.uidIndex_={})}else if(this.featuresRtree_){var f=function(y){this.removeFeatureInternal(y)}.bind(this);for(var m in this.featuresRtree_.forEach(f),this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[m])}this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.nullGeometryFeatures_={};var g=new ef("clear");this.dispatchEvent(g),this.changed()},l.prototype.forEachFeature=function(a){if(this.featuresRtree_)return this.featuresRtree_.forEach(a);this.featuresCollection_&&this.featuresCollection_.forEach(a)},l.prototype.forEachFeatureAtCoordinateDirect=function(a,h){return this.forEachFeatureInExtent([a[0],a[1],a[0],a[1]],function(f){if(f.getGeometry().intersectsCoordinate(a))return h(f)})},l.prototype.forEachFeatureInExtent=function(a,h){if(this.featuresRtree_)return this.featuresRtree_.forEachInExtent(a,h);this.featuresCollection_&&this.featuresCollection_.forEach(h)},l.prototype.forEachFeatureIntersectingExtent=function(a,h){return this.forEachFeatureInExtent(a,function(d){if(d.getGeometry().intersectsExtent(a)){var m=h(d);if(m)return m}})},l.prototype.getFeaturesCollection=function(){return this.featuresCollection_},l.prototype.getFeatures=function(){var a;return this.featuresCollection_?a=this.featuresCollection_.getArray().slice(0):this.featuresRtree_&&(a=this.featuresRtree_.getAll(),Vp(this.nullGeometryFeatures_)||xi(a,i9(this.nullGeometryFeatures_))),a},l.prototype.getFeaturesAtCoordinate=function(a){var h=[];return this.forEachFeatureAtCoordinateDirect(a,function(d){h.push(d)}),h},l.prototype.getFeaturesInExtent=function(a){return this.featuresRtree_?this.featuresRtree_.getInExtent(a):this.featuresCollection_?this.featuresCollection_.getArray().slice(0):[]},l.prototype.getClosestFeatureToCoordinate=function(a,h){var d=a[0],f=a[1],m=null,g=[NaN,NaN],y=1/0,v=[-1/0,-1/0,1/0,1/0],_=h||_y;return this.featuresRtree_.forEachInExtent(v,function(S){if(_(S)){var b=S.getGeometry(),T=y;if((y=b.closestPointXY(d,f,g,y))<T){m=S;var x=Math.sqrt(y);v[0]=d-x,v[1]=f-x,v[2]=d+x,v[3]=f+x}}}),m},l.prototype.getExtent=function(a){return this.featuresRtree_.getExtent(a)},l.prototype.getFeatureById=function(a){var h=this.idIndex_[a.toString()];return void 0!==h?h:null},l.prototype.getFeatureByUid=function(a){var h=this.uidIndex_[a];return void 0!==h?h:null},l.prototype.getFormat=function(){return this.format_},l.prototype.getOverlaps=function(){return this.overlaps_},l.prototype.getUrl=function(){return this.url_},l.prototype.handleFeatureChange_=function(a){var h=a.target,d=tn(h),f=h.getGeometry();if(f){var m=f.getExtent();d in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[d],this.featuresRtree_&&this.featuresRtree_.insert(m,h)):this.featuresRtree_&&this.featuresRtree_.update(m,h)}else d in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(h),this.nullGeometryFeatures_[d]=h);var g=h.getId();if(void 0!==g){var y=g.toString();this.idIndex_[y]!==h&&(this.removeFromIdIndex_(h),this.idIndex_[y]=h)}else this.removeFromIdIndex_(h),this.uidIndex_[d]=h;this.changed(),this.dispatchEvent(new ef("changefeature",h))},l.prototype.hasFeature=function(a){var h=a.getId();return void 0!==h?h in this.idIndex_:tn(a)in this.uidIndex_},l.prototype.isEmpty=function(){return this.featuresRtree_?this.featuresRtree_.isEmpty()&&Vp(this.nullGeometryFeatures_):!this.featuresCollection_||0===this.featuresCollection_.getLength()},l.prototype.loadFeatures=function(a,h,d){for(var f=this.loadedExtentsRtree_,m=this.strategy_(a,h,d),g=function(S,b){var T=m[S];f.forEachInExtent(T,function(E){return xa(E.extent,T)})||(++y.loadingExtentsCount_,y.dispatchEvent(new ef("featuresloadstart")),y.loader_.call(y,T,h,d,function(E){--this.loadingExtentsCount_,this.dispatchEvent(new ef("featuresloadend",void 0,E))}.bind(y),function(){--this.loadingExtentsCount_,this.dispatchEvent(new ef("featuresloaderror"))}.bind(y)),f.insert(T,{extent:T.slice()}))},y=this,v=0,_=m.length;v<_;++v)g(v);this.loading=!(this.loader_.length<4)&&this.loadingExtentsCount_>0},l.prototype.refresh=function(){this.clear(!0),this.loadedExtentsRtree_.clear(),c.prototype.refresh.call(this)},l.prototype.removeLoadedExtent=function(a){var d,h=this.loadedExtentsRtree_;h.forEachInExtent(a,function(f){if(Ol(f.extent,a))return d=f,!0}),d&&h.remove(d)},l.prototype.removeFeature=function(a){if(a){var h=tn(a);h in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[h]:this.featuresRtree_&&this.featuresRtree_.remove(a),this.removeFeatureInternal(a)&&this.changed()}},l.prototype.removeFeatureInternal=function(a){var h=tn(a),d=this.featureChangeKeys_[h];if(d){d.forEach(ri),delete this.featureChangeKeys_[h];var f=a.getId();return void 0!==f&&delete this.idIndex_[f.toString()],delete this.uidIndex_[h],this.dispatchEvent(new ef("removefeature",a)),a}},l.prototype.removeFromIdIndex_=function(a){var h=!1;for(var d in this.idIndex_)if(this.idIndex_[d]===a){delete this.idIndex_[d],h=!0;break}return h},l.prototype.setLoader=function(a){this.loader_=a},l.prototype.setUrl=function(a){bn(this.format_,7),this.url_=a,this.setLoader(dj(a,this.format_))},l}(FS);const hi=wwe;var wj,Cj={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function jS(c){return(c=Math.round(c))<0?0:c>255?255:c}function Q2(c){return jS("%"===c[c.length-1]?parseFloat(c)/100*255:parseInt(c))}function xx(c){return function xj(c){return c<0?0:c>1?1:c}("%"===c[c.length-1]?parseFloat(c)/100:parseFloat(c))}function J2(c,l,a){return a<0?a+=1:a>1&&(a-=1),6*a<1?c+(l-c)*a*6:2*a<1?l:3*a<2?c+(l-c)*(2/3-a)*6:c}try{wj={}.parseCSSColor=function xwe(c){var a,l=c.replace(/ /g,"").toLowerCase();if(l in Cj)return Cj[l].slice();if("#"===l[0])return 4===l.length?(a=parseInt(l.substr(1),16))>=0&&a<=4095?[(3840&a)>>4|(3840&a)>>8,240&a|(240&a)>>4,15&a|(15&a)<<4,1]:null:7===l.length&&(a=parseInt(l.substr(1),16))>=0&&a<=16777215?[(16711680&a)>>16,(65280&a)>>8,255&a,1]:null;var h=l.indexOf("("),d=l.indexOf(")");if(-1!==h&&d+1===l.length){var f=l.substr(0,h),m=l.substr(h+1,d-(h+1)).split(","),g=1;switch(f){case"rgba":if(4!==m.length)return null;g=xx(m.pop());case"rgb":return 3!==m.length?null:[Q2(m[0]),Q2(m[1]),Q2(m[2]),g];case"hsla":if(4!==m.length)return null;g=xx(m.pop());case"hsl":if(3!==m.length)return null;var y=(parseFloat(m[0])%360+360)%360/360,v=xx(m[1]),_=xx(m[2]),S=_<=.5?_*(v+1):_+v-_*v,b=2*_-S;return[jS(255*J2(b,S,y+1/3)),jS(255*J2(b,S,y)),jS(255*J2(b,S,y-1/3)),g];default:return null}}return null}}catch{}var Ur=function(l,a,h,d){void 0===d&&(d=1),this.r=l,this.g=a,this.b=h,this.a=d};function WS(c){return"object"==typeof c?["literal",c]:c}function eO(c){switch(c.colorSpace){case"hcl":return"interpolate-hcl";case"lab":return"interpolate-lab";default:return"interpolate"}}function Ej(c,l){var a=WS(function Awe(c,l){return void 0!==c?c:void 0!==l?l:void 0}(c.default,l.default));return void 0===a&&"resolvedImage"===l.type?"":a}function tO(c,l,a){var h=rO(c,l),d=["get",c.property];if("categorical"===h&&"boolean"==typeof a[0][0]){for(var f=["case"],m=0,g=a;m<g.length;m+=1){var y=g[m];f.push(["==",d,y[0]],y[1])}return f.push(Ej(c,l)),f}if("categorical"===h){for(var v=["match",d],_=0,S=a;_<S.length;_+=1){var b=S[_];Hy(v,b[0],b[1],!1)}return v.push(Ej(c,l)),v}if("interval"===h){for(var T=["step",["number",d]],x=0,E=a;x<E.length;x+=1){var D=E[x];Hy(T,D[0],D[1],!0)}return nO(T),void 0===c.default?T:["case",["==",["typeof",d],"number"],T,WS(c.default)]}if("exponential"===h){for(var I=void 0!==c.base?c.base:1,M=[eO(c),1===I?["linear"]:["exponential",I],["number",d]],L=0,P=a;L<P.length;L+=1){var F=P[L];Hy(M,F[0],F[1],!1)}return void 0===c.default?M:["case",["==",["typeof",d],"number"],M,WS(c.default)]}throw new Error("Unknown property function type "+h)}function nO(c){"step"===c[0]&&3===c.length&&(c.push(0),c.push(c[3]))}function Hy(c,l,a,h){c.length>3&&l===c[c.length-2]||(h&&2===c.length||c.push(l),c.push(a))}function rO(c,l){return c.type?c.type:l.expression.interpolated?"exponential":"interval"}function Rwe(c){for(var l=["concat"],a=/{([^{}]+)}/g,h=0,d=a.exec(c);null!==d;d=a.exec(c)){var f=c.slice(h,a.lastIndex-d[0].length);h=a.lastIndex,f.length>0&&l.push(f),l.push(["get",d[1]])}if(1===l.length)return c;if(h<c.length)l.push(c.slice(h));else if(2===l.length)return["to-string",l[1]];return l}Ur.parse=function(l){if(l){if(l instanceof Ur)return l;if("string"==typeof l){var a=wj(l);if(a)return new Ur(a[0]/255*a[3],a[1]/255*a[3],a[2]/255*a[3],a[3])}}},Ur.prototype.toString=function(){var l=this.toArray(),h=l[1],d=l[2],f=l[3];return"rgba("+Math.round(l[0])+","+Math.round(h)+","+Math.round(d)+","+f+")"},Ur.prototype.toArray=function(){var l=this,f=l.a;return 0===f?[0,0,0,0]:[255*l.r/f,255*l.g/f,255*l.b/f,f]},Ur.prototype.toArray01=function(){var l=this,f=l.a;return 0===f?[0,0,0,0]:[l.r/f,l.g/f,l.b/f,f]},Ur.prototype.toArray01PremultipliedAlpha=function(){var l=this;return[l.r,l.g,l.b,l.a]},Ur.black=new Ur(0,0,0,1),Ur.white=new Ur(1,1,1,1),Ur.transparent=new Ur(0,0,0,0),Ur.red=new Ur(1,0,0,1),Ur.blue=new Ur(0,0,1,1);var Tu=function(c){function l(a,h){c.call(this,h),this.message=h,this.key=a}return c&&(l.__proto__=c),(l.prototype=Object.create(c&&c.prototype)).constructor=l,l}(Error),XS=function(l,a){void 0===a&&(a=[]),this.parent=l,this.bindings={};for(var h=0,d=a;h<d.length;h+=1){var f=d[h];this.bindings[f[0]]=f[1]}};XS.prototype.concat=function(l){return new XS(this,l)},XS.prototype.get=function(l){if(this.bindings[l])return this.bindings[l];if(this.parent)return this.parent.get(l);throw new Error(l+" not found in scope.")},XS.prototype.has=function(l){return!!this.bindings[l]||!!this.parent&&this.parent.has(l)};var Ex={kind:"null"},Dt={kind:"number"},mr={kind:"string"},Kn={kind:"boolean"},Mh={kind:"color"},jy={kind:"object"},Qn={kind:"value"},Mx={kind:"collator"},Dx={kind:"formatted"},qS={kind:"resolvedImage"};function Nl(c,l){return{kind:"array",itemType:c,N:l}}function Ni(c){if("array"===c.kind){var l=Ni(c.itemType);return"number"==typeof c.N?"array<"+l+", "+c.N+">":"value"===c.itemType.kind?"array":"array<"+l+">"}return c.kind}var Lwe=[Ex,Dt,mr,Kn,Mh,Dx,jy,Nl(Qn),qS];function $S(c,l){if("error"===l.kind)return null;if("array"===c.kind){if("array"===l.kind&&(0===l.N&&"value"===l.itemType.kind||!$S(c.itemType,l.itemType))&&("number"!=typeof c.N||c.N===l.N))return null}else{if(c.kind===l.kind)return null;if("value"===c.kind)for(var a=0,h=Lwe;a<h.length;a+=1)if(!$S(h[a],l))return null}return"Expected "+Ni(c)+" but found "+Ni(l)+" instead."}function iO(c,l){return l.some(function(a){return a.kind===c.kind})}function YS(c,l){return l.some(function(a){return"null"===a?null===c:"array"===a?Array.isArray(c):"object"===a?c&&!Array.isArray(c)&&"object"==typeof c:a===typeof c})}var ZS=function(l,a,h){this.sensitivity=l?a?"variant":"case":a?"accent":"base",this.locale=h,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})};ZS.prototype.compare=function(l,a){return this.collator.compare(l,a)},ZS.prototype.resolvedLocale=function(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale};var sO=function(l,a,h,d,f){this.text=l.normalize?l.normalize():l,this.image=a,this.scale=h,this.fontStack=d,this.textColor=f},Da=function(l){this.sections=l};Da.fromString=function(l){return new Da([new sO(l,null,null,null,null)])},Da.prototype.isEmpty=function(){return 0===this.sections.length||!this.sections.some(function(l){return 0!==l.text.length||l.image&&0!==l.image.name.length})},Da.factory=function(l){return l instanceof Da?l:Da.fromString(l)},Da.prototype.toString=function(){return 0===this.sections.length?"":this.sections.map(function(l){return l.text}).join("")},Da.prototype.serialize=function(){for(var l=["format"],a=0,h=this.sections;a<h.length;a+=1){var d=h[a];if(d.image)l.push(["image",d.image.name]);else{l.push(d.text);var f={};d.fontStack&&(f["text-font"]=["literal",d.fontStack.split(",")]),d.scale&&(f["font-scale"]=d.scale),d.textColor&&(f["text-color"]=["rgba"].concat(d.textColor.toArray())),l.push(f)}}return l};var wu=function(l){this.name=l.name,this.available=l.available};function Mj(c,l,a,h){return"number"==typeof c&&c>=0&&c<=255&&"number"==typeof l&&l>=0&&l<=255&&"number"==typeof a&&a>=0&&a<=255?typeof h>"u"||"number"==typeof h&&h>=0&&h<=1?null:"Invalid rgba value ["+[c,l,a,h].join(", ")+"]: 'a' must be between 0 and 1.":"Invalid rgba value ["+("number"==typeof h?[c,l,a,h]:[c,l,a]).join(", ")+"]: 'r', 'g', and 'b' must be between 0 and 255."}function Ax(c){if(null===c)return!0;if("string"==typeof c)return!0;if("boolean"==typeof c)return!0;if("number"==typeof c)return!0;if(c instanceof Ur)return!0;if(c instanceof ZS)return!0;if(c instanceof Da)return!0;if(c instanceof wu)return!0;if(Array.isArray(c)){for(var l=0,a=c;l<a.length;l+=1)if(!Ax(a[l]))return!1;return!0}if("object"==typeof c){for(var d in c)if(!Ax(c[d]))return!1;return!0}return!1}function Us(c){if(null===c)return Ex;if("string"==typeof c)return mr;if("boolean"==typeof c)return Kn;if("number"==typeof c)return Dt;if(c instanceof Ur)return Mh;if(c instanceof ZS)return Mx;if(c instanceof Da)return Dx;if(c instanceof wu)return qS;if(Array.isArray(c)){for(var a,l=c.length,h=0,d=c;h<d.length;h+=1){var m=Us(d[h]);if(a){if(a===m)continue;a=Qn;break}a=m}return Nl(a||Qn,l)}return jy}function KS(c){var l=typeof c;return null===c?"":"string"===l||"number"===l||"boolean"===l?String(c):c instanceof Ur||c instanceof Da||c instanceof wu?c.toString():JSON.stringify(c)}wu.prototype.toString=function(){return this.name},wu.fromString=function(l){return l?new wu({name:l,available:!1}):null},wu.prototype.serialize=function(){return["image",this.name]};var Cu=function(l,a){this.type=l,this.value=a};Cu.parse=function(l,a){if(2!==l.length)return a.error("'literal' expression requires exactly one argument, but found "+(l.length-1)+" instead.");if(!Ax(l[1]))return a.error("invalid value");var h=l[1],d=Us(h),f=a.expectedType;return"array"===d.kind&&0===d.N&&f&&"array"===f.kind&&("number"!=typeof f.N||0===f.N)&&(d=f),new Cu(d,h)},Cu.prototype.evaluate=function(){return this.value},Cu.prototype.eachChild=function(){},Cu.prototype.outputDefined=function(){return!0},Cu.prototype.serialize=function(){return"array"===this.type.kind||"object"===this.type.kind?["literal",this.value]:this.value instanceof Ur?["rgba"].concat(this.value.toArray()):this.value instanceof Da?this.value.serialize():this.value};var Js=function(l){this.name="ExpressionEvaluationError",this.message=l};Js.prototype.toJSON=function(){return this.message};var oO={string:mr,number:Dt,boolean:Kn,object:jy},oa=function(l,a){this.type=l,this.args=a};oa.parse=function(l,a){if(l.length<2)return a.error("Expected at least one argument.");var d,h=1,f=l[0];if("array"===f){var m,y;if(l.length>2){var g=l[1];if("string"!=typeof g||!(g in oO)||"object"===g)return a.error('The item type argument of "array" must be one of string, number, boolean',1);m=oO[g],h++}else m=Qn;if(l.length>3){if(null!==l[2]&&("number"!=typeof l[2]||l[2]<0||l[2]!==Math.floor(l[2])))return a.error('The length argument to "array" must be a positive integer literal',2);y=l[2],h++}d=Nl(m,y)}else d=oO[f];for(var v=[];h<l.length;h++){var _=a.parse(l[h],h,Qn);if(!_)return null;v.push(_)}return new oa(d,v)},oa.prototype.evaluate=function(l){for(var a=0;a<this.args.length;a++){var h=this.args[a].evaluate(l);if(!$S(this.type,Us(h)))return h;if(a===this.args.length-1)throw new Js("Expected value to be of type "+Ni(this.type)+", but found "+Ni(Us(h))+" instead.")}return null},oa.prototype.eachChild=function(l){this.args.forEach(l)},oa.prototype.outputDefined=function(){return this.args.every(function(l){return l.outputDefined()})},oa.prototype.serialize=function(){var l=this.type,a=[l.kind];if("array"===l.kind){var h=l.itemType;if("string"===h.kind||"number"===h.kind||"boolean"===h.kind){a.push(h.kind);var d=l.N;("number"==typeof d||this.args.length>1)&&a.push(d)}}return a.concat(this.args.map(function(f){return f.serialize()}))};var tf=function(l){this.type=Dx,this.sections=l};tf.parse=function(l,a){if(l.length<2)return a.error("Expected at least one argument.");var h=l[1];if(!Array.isArray(h)&&"object"==typeof h)return a.error("First argument must be an image or text section.");for(var d=[],f=!1,m=1;m<=l.length-1;++m){var g=l[m];if(f&&"object"==typeof g&&!Array.isArray(g)){f=!1;var y=null;if(g["font-scale"]&&!(y=a.parse(g["font-scale"],1,Dt)))return null;var v=null;if(g["text-font"]&&!(v=a.parse(g["text-font"],1,Nl(mr))))return null;var _=null;if(g["text-color"]&&!(_=a.parse(g["text-color"],1,Mh)))return null;var S=d[d.length-1];S.scale=y,S.font=v,S.textColor=_}else{var b=a.parse(l[m],1,Qn);if(!b)return null;var T=b.type.kind;if("string"!==T&&"value"!==T&&"null"!==T&&"resolvedImage"!==T)return a.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");f=!0,d.push({content:b,scale:null,font:null,textColor:null})}}return new tf(d)},tf.prototype.evaluate=function(l){return new Da(this.sections.map(function(h){var d=h.content.evaluate(l);return Us(d)===qS?new sO("",d,null,null,null):new sO(KS(d),null,h.scale?h.scale.evaluate(l):null,h.font?h.font.evaluate(l).join(","):null,h.textColor?h.textColor.evaluate(l):null)}))},tf.prototype.eachChild=function(l){for(var a=0,h=this.sections;a<h.length;a+=1){var d=h[a];l(d.content),d.scale&&l(d.scale),d.font&&l(d.font),d.textColor&&l(d.textColor)}},tf.prototype.outputDefined=function(){return!1},tf.prototype.serialize=function(){for(var l=["format"],a=0,h=this.sections;a<h.length;a+=1){var d=h[a];l.push(d.content.serialize());var f={};d.scale&&(f["font-scale"]=d.scale.serialize()),d.font&&(f["text-font"]=d.font.serialize()),d.textColor&&(f["text-color"]=d.textColor.serialize()),l.push(f)}return l};var nf=function(l){this.type=qS,this.input=l};nf.parse=function(l,a){if(2!==l.length)return a.error("Expected two arguments.");var h=a.parse(l[1],1,mr);return h?new nf(h):a.error("No image name provided.")},nf.prototype.evaluate=function(l){var a=this.input.evaluate(l),h=wu.fromString(a);return h&&l.availableImages&&(h.available=l.availableImages.indexOf(a)>-1),h},nf.prototype.eachChild=function(l){l(this.input)},nf.prototype.outputDefined=function(){return!1},nf.prototype.serialize=function(){return["image",this.input.serialize()]};var Owe={"to-boolean":Kn,"to-color":Mh,"to-number":Dt,"to-string":mr},Fl=function(l,a){this.type=l,this.args=a};Fl.parse=function(l,a){if(l.length<2)return a.error("Expected at least one argument.");var h=l[0];if(("to-boolean"===h||"to-string"===h)&&2!==l.length)return a.error("Expected one argument.");for(var d=Owe[h],f=[],m=1;m<l.length;m++){var g=a.parse(l[m],m,Qn);if(!g)return null;f.push(g)}return new Fl(d,f)},Fl.prototype.evaluate=function(l){if("boolean"===this.type.kind)return Boolean(this.args[0].evaluate(l));if("color"===this.type.kind){for(var a,h,d=0,f=this.args;d<f.length;d+=1){if(h=null,(a=f[d].evaluate(l))instanceof Ur)return a;if("string"==typeof a){var g=l.parseColor(a);if(g)return g}else if(Array.isArray(a)&&!(h=a.length<3||a.length>4?"Invalid rbga value "+JSON.stringify(a)+": expected an array containing either three or four numeric values.":Mj(a[0],a[1],a[2],a[3])))return new Ur(a[0]/255,a[1]/255,a[2]/255,a[3])}throw new Js(h||"Could not parse color from value '"+("string"==typeof a?a:String(JSON.stringify(a)))+"'")}if("number"===this.type.kind){for(var y=null,v=0,_=this.args;v<_.length;v+=1){if(null===(y=_[v].evaluate(l)))return 0;var b=Number(y);if(!isNaN(b))return b}throw new Js("Could not convert "+JSON.stringify(y)+" to number.")}return"formatted"===this.type.kind?Da.fromString(KS(this.args[0].evaluate(l))):"resolvedImage"===this.type.kind?wu.fromString(KS(this.args[0].evaluate(l))):KS(this.args[0].evaluate(l))},Fl.prototype.eachChild=function(l){this.args.forEach(l)},Fl.prototype.outputDefined=function(){return this.args.every(function(l){return l.outputDefined()})},Fl.prototype.serialize=function(){if("formatted"===this.type.kind)return new tf([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if("resolvedImage"===this.type.kind)return new nf(this.args[0]).serialize();var l=["to-"+this.type.kind];return this.eachChild(function(a){l.push(a.serialize())}),l};var Nwe=["Unknown","Point","LineString","Polygon"],Dh=function(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null,this.featureTileCoord=null,this.featureDistanceData=null};Dh.prototype.id=function(){return this.feature&&"id"in this.feature&&this.feature.id?this.feature.id:null},Dh.prototype.geometryType=function(){return this.feature?"number"==typeof this.feature.type?Nwe[this.feature.type]:this.feature.type:null},Dh.prototype.geometry=function(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null},Dh.prototype.canonicalID=function(){return this.canonical},Dh.prototype.properties=function(){return this.feature&&this.feature.properties||{}},Dh.prototype.distanceFromCenter=function(){if(this.featureTileCoord&&this.featureDistanceData){var l=this.featureDistanceData.center,a=this.featureDistanceData.scale,h=this.featureTileCoord;return this.featureDistanceData.bearing[0]*(h.x*a-l[0])+this.featureDistanceData.bearing[1]*(h.y*a-l[1])}return 0},Dh.prototype.parseColor=function(l){var a=this._parseColorCache[l];return a||(a=this._parseColorCache[l]=Ur.parse(l)),a};var Ro=function(l,a,h,d){this.name=l,this.type=a,this._evaluate=h,this.args=d};Ro.prototype.evaluate=function(l){return this._evaluate(l,this.args)},Ro.prototype.eachChild=function(l){this.args.forEach(l)},Ro.prototype.outputDefined=function(){return!1},Ro.prototype.serialize=function(){return[this.name].concat(this.args.map(function(l){return l.serialize()}))},Ro.parse=function(l,a){var h,d=l[0],f=Ro.definitions[d];if(!f)return a.error('Unknown expression "'+d+'". If you wanted a literal array, use ["literal", [...]].',0);for(var m=Array.isArray(f)?f[0]:f.type,g=Array.isArray(f)?[[f[1],f[2]]]:f.overloads,y=g.filter(function(ie){var ae=ie[0];return!Array.isArray(ae)||ae.length===l.length-1}),v=null,_=0,S=y;_<S.length;_+=1){var b=S[_],T=b[0],x=b[1];v=new lf(a.registry,a.path,null,a.scope);for(var E=[],D=!1,I=1;I<l.length;I++){var M=l[I],L=Array.isArray(T)?T[I-1]:T.type,P=v.parse(M,1+E.length,L);if(!P){D=!0;break}E.push(P)}if(!D){if(Array.isArray(T)&&T.length!==E.length){v.error("Expected "+T.length+" arguments, but found "+E.length+" instead.");continue}for(var F=0;F<E.length;F++){var V=Array.isArray(T)?T[F]:T.type,z=E[F];v.concat(F+1).checkSubtype(V,z.type)}if(0===v.errors.length)return new Ro(d,m,x,E)}}if(1===y.length)(h=a.errors).push.apply(h,v.errors);else{for(var K=(y.length?y:g).map(function(ie){return function Fwe(c){return Array.isArray(c)?"("+c.map(Ni).join(", ")+")":"("+Ni(c.type)+"...)"}(ie[0])}).join(" | "),se=[],W=1;W<l.length;W++){var Q=a.parse(l[W],1+se.length);if(!Q)return null;se.push(Ni(Q.type))}a.error("Expected arguments of type "+K+", but found ("+se.join(", ")+") instead.")}return null},Ro.register=function(l,a){for(var h in Ro.definitions=a,a)l[h]=Ro};var rf=function(l,a,h){this.type=Mx,this.locale=h,this.caseSensitive=l,this.diacriticSensitive=a};rf.parse=function(l,a){if(2!==l.length)return a.error("Expected one argument.");var h=l[1];if("object"!=typeof h||Array.isArray(h))return a.error("Collator options argument must be an object.");var d=a.parse(void 0!==h["case-sensitive"]&&h["case-sensitive"],1,Kn);if(!d)return null;var f=a.parse(void 0!==h["diacritic-sensitive"]&&h["diacritic-sensitive"],1,Kn);if(!f)return null;var m=null;return h.locale&&!(m=a.parse(h.locale,1,mr))?null:new rf(d,f,m)},rf.prototype.evaluate=function(l){return new ZS(this.caseSensitive.evaluate(l),this.diacriticSensitive.evaluate(l),this.locale?this.locale.evaluate(l):null)},rf.prototype.eachChild=function(l){l(this.caseSensitive),l(this.diacriticSensitive),this.locale&&l(this.locale)},rf.prototype.outputDefined=function(){return!1},rf.prototype.serialize=function(){var l={};return l["case-sensitive"]=this.caseSensitive.serialize(),l["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(l.locale=this.locale.serialize()),["collator",l]};var sf=8192;function aO(c,l){c[0]=Math.min(c[0],l[0]),c[1]=Math.min(c[1],l[1]),c[2]=Math.max(c[2],l[0]),c[3]=Math.max(c[3],l[1])}function Ix(c,l){return!(c[0]<=l[0]||c[2]>=l[2]||c[1]<=l[1]||c[3]>=l[3])}function Bwe(c,l){var a=function kwe(c){return(180+c)/360}(c[0]),h=function Vwe(c){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+c*Math.PI/360)))/360}(c[1]),d=Math.pow(2,l.z);return[Math.round(a*d*sf),Math.round(h*d*sf)]}function Uwe(c,l,a){var h=c[0]-l[0],d=c[1]-l[1],f=c[0]-a[0],m=c[1]-a[1];return h*m-f*d==0&&h*f<=0&&d*m<=0}function Gwe(c,l,a){return l[1]>c[1]!=a[1]>c[1]&&c[0]<(a[0]-l[0])*(c[1]-l[1])/(a[1]-l[1])+l[0]}function lO(c,l){for(var a=!1,h=0,d=l.length;h<d;h++)for(var f=l[h],m=0,g=f.length;m<g-1;m++){if(Uwe(c,f[m],f[m+1]))return!1;Gwe(c,f[m],f[m+1])&&(a=!a)}return a}function zwe(c,l){for(var a=0;a<l.length;a++)if(lO(c,l[a]))return!0;return!1}function Dj(c,l,a,h){var y=h[0]-a[0],v=h[1]-a[1],_=(c[0]-a[0])*v-y*(c[1]-a[1]),S=(l[0]-a[0])*v-y*(l[1]-a[1]);return _>0&&S<0||_<0&&S>0}function jwe(c,l,a,h){return 0!==function Hwe(c,l){return c[0]*l[1]-c[1]*l[0]}([h[0]-a[0],h[1]-a[1]],[l[0]-c[0],l[1]-c[1]])&&!(!Dj(c,l,a,h)||!Dj(a,h,c,l))}function Wwe(c,l,a){for(var h=0,d=a;h<d.length;h+=1)for(var f=d[h],m=0;m<f.length-1;++m)if(jwe(c,l,f[m],f[m+1]))return!0;return!1}function Aj(c,l){for(var a=0;a<c.length;++a)if(!lO(c[a],l))return!1;for(var h=0;h<c.length-1;++h)if(Wwe(c[h],c[h+1],l))return!1;return!0}function Xwe(c,l){for(var a=0;a<l.length;a++)if(Aj(c,l[a]))return!0;return!1}function cO(c,l,a){for(var h=[],d=0;d<c.length;d++){for(var f=[],m=0;m<c[d].length;m++){var g=Bwe(c[d][m],a);aO(l,g),f.push(g)}h.push(f)}return h}function Ij(c,l,a){for(var h=[],d=0;d<c.length;d++){var f=cO(c[d],l,a);h.push(f)}return h}function Rj(c,l,a,h){if(c[0]<a[0]||c[0]>a[2]){var d=.5*h,f=c[0]-a[0]>d?-h:a[0]-c[0]>d?h:0;0===f&&(f=c[0]-a[2]>d?-h:a[2]-c[0]>d?h:0),c[0]+=f}aO(l,c)}function Pj(c,l,a,h){var d=Math.pow(2,h.z)*sf,f=[h.x*sf,h.y*sf],m=[];if(!c)return m;for(var g=0,y=c;g<y.length;g+=1)for(var _=0,S=y[g];_<S.length;_+=1){var b=S[_],T=[b.x+f[0],b.y+f[1]];Rj(T,l,a,d),m.push(T)}return m}function Lj(c,l,a,h){var d=Math.pow(2,h.z)*sf,f=[h.x*sf,h.y*sf],m=[];if(!c)return m;for(var g=0,y=c;g<y.length;g+=1){for(var _=[],S=0,b=y[g];S<b.length;S+=1){var T=b[S],x=[T.x+f[0],T.y+f[1]];aO(l,x),_.push(x)}m.push(_)}if(l[2]-l[0]<=d/2){!function qwe(c){c[0]=c[1]=1/0,c[2]=c[3]=-1/0}(l);for(var E=0,D=m;E<D.length;E+=1)for(var M=0,L=D[E];M<L.length;M+=1)Rj(L[M],l,a,d)}return m}var Cc=function(l,a){this.type=Kn,this.geojson=l,this.geometries=a};function Rx(c){if(c instanceof Ro){if("get"===c.name&&1===c.args.length)return!1;if("feature-state"===c.name)return!1;if("has"===c.name&&1===c.args.length)return!1;if("properties"===c.name||"geometry-type"===c.name||"id"===c.name)return!1;if(/^filter-/.test(c.name))return!1}if(c instanceof Cc)return!1;var l=!0;return c.eachChild(function(a){l&&!Rx(a)&&(l=!1)}),l}function uO(c){if(c instanceof Ro&&"feature-state"===c.name)return!1;var l=!0;return c.eachChild(function(a){l&&!uO(a)&&(l=!1)}),l}function hO(c,l){if(c instanceof Ro&&l.indexOf(c.name)>=0)return!1;var a=!0;return c.eachChild(function(h){a&&!hO(h,l)&&(a=!1)}),a}Cc.parse=function(l,a){if(2!==l.length)return a.error("'within' expression requires exactly one argument, but found "+(l.length-1)+" instead.");if(Ax(l[1])){var h=l[1];if("FeatureCollection"===h.type)for(var d=0;d<h.features.length;++d){var f=h.features[d].geometry.type;if("Polygon"===f||"MultiPolygon"===f)return new Cc(h,h.features[d].geometry)}else if("Feature"===h.type){var m=h.geometry.type;if("Polygon"===m||"MultiPolygon"===m)return new Cc(h,h.geometry)}else if("Polygon"===h.type||"MultiPolygon"===h.type)return new Cc(h,h)}return a.error("'within' expression requires valid geojson object that contains polygon geometry type.")},Cc.prototype.evaluate=function(l){if(null!=l.geometry()&&null!=l.canonicalID()){if("Point"===l.geometryType())return function $we(c,l){var a=[1/0,1/0,-1/0,-1/0],h=[1/0,1/0,-1/0,-1/0],d=c.canonicalID();if(!d)return!1;if("Polygon"===l.type){var f=cO(l.coordinates,h,d),m=Pj(c.geometry(),a,h,d);if(!Ix(a,h))return!1;for(var g=0,y=m;g<y.length;g+=1)if(!lO(y[g],f))return!1}if("MultiPolygon"===l.type){var _=Ij(l.coordinates,h,d),S=Pj(c.geometry(),a,h,d);if(!Ix(a,h))return!1;for(var b=0,T=S;b<T.length;b+=1)if(!zwe(T[b],_))return!1}return!0}(l,this.geometries);if("LineString"===l.geometryType())return function Ywe(c,l){var a=[1/0,1/0,-1/0,-1/0],h=[1/0,1/0,-1/0,-1/0],d=c.canonicalID();if(!d)return!1;if("Polygon"===l.type){var f=cO(l.coordinates,h,d),m=Lj(c.geometry(),a,h,d);if(!Ix(a,h))return!1;for(var g=0,y=m;g<y.length;g+=1)if(!Aj(y[g],f))return!1}if("MultiPolygon"===l.type){var _=Ij(l.coordinates,h,d),S=Lj(c.geometry(),a,h,d);if(!Ix(a,h))return!1;for(var b=0,T=S;b<T.length;b+=1)if(!Xwe(T[b],_))return!1}return!0}(l,this.geometries)}return!1},Cc.prototype.eachChild=function(){},Cc.prototype.outputDefined=function(){return!0},Cc.prototype.serialize=function(){return["within",this.geojson]};var af=function(l,a){this.type=a.type,this.name=l,this.boundExpression=a};af.parse=function(l,a){if(2!==l.length||"string"!=typeof l[1])return a.error("'var' expression requires exactly one string literal argument.");var h=l[1];return a.scope.has(h)?new af(h,a.scope.get(h)):a.error('Unknown variable "'+h+'". Make sure "'+h+'" has been bound in an enclosing "let" expression before using it.',1)},af.prototype.evaluate=function(l){return this.boundExpression.evaluate(l)},af.prototype.eachChild=function(){},af.prototype.outputDefined=function(){return!1},af.prototype.serialize=function(){return["var",this.name]};var lf=function(l,a,h,d,f){void 0===a&&(a=[]),void 0===d&&(d=new XS),void 0===f&&(f=[]),this.registry=l,this.path=a,this.key=a.map(function(m){return"["+m+"]"}).join(""),this.scope=d,this.errors=f,this.expectedType=h};function dO(c){if(c instanceof af)return dO(c.boundExpression);if(c instanceof Ro&&"error"===c.name)return!1;if(c instanceof rf)return!1;if(c instanceof Cc)return!1;var l=c instanceof Fl||c instanceof oa,a=!0;return c.eachChild(function(h){a=l?a&&dO(h):a&&h instanceof Cu}),!!a&&Rx(c)&&hO(c,["zoom","heatmap-density","line-progress","sky-radial-progress","accumulated","is-supported-script","pitch","distance-from-center"])}function Oj(c,l){for(var m,a=c.length-1,h=0,d=a,f=0;h<=d;)if((m=c[f=Math.floor((h+d)/2)])<=l){if(f===a||l<c[f+1])return f;h=f+1}else{if(!(m>l))throw new Js("Input is not a number.");d=f-1}return 0}lf.prototype.parse=function(l,a,h,d,f){return void 0===f&&(f={}),a?this.concat(a,h,d)._parse(l,f):this._parse(l,f)},lf.prototype._parse=function(l,a){function h(_,S,b){return"assert"===b?new oa(S,[_]):"coerce"===b?new Fl(S,[_]):_}if((null===l||"string"==typeof l||"boolean"==typeof l||"number"==typeof l)&&(l=["literal",l]),Array.isArray(l)){if(0===l.length)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');var d=l[0];if("string"!=typeof d)return this.error("Expression name must be a string, but found "+typeof d+' instead. If you wanted a literal array, use ["literal", [...]].',0),null;var f=this.registry[d];if(f){var m=f.parse(l,this);if(!m)return null;if(this.expectedType){var g=this.expectedType,y=m.type;if("string"!==g.kind&&"number"!==g.kind&&"boolean"!==g.kind&&"object"!==g.kind&&"array"!==g.kind||"value"!==y.kind)if("color"!==g.kind&&"formatted"!==g.kind&&"resolvedImage"!==g.kind||"value"!==y.kind&&"string"!==y.kind){if(this.checkSubtype(g,y))return null}else m=h(m,g,a.typeAnnotation||"coerce");else m=h(m,g,a.typeAnnotation||"assert")}if(!(m instanceof Cu)&&"resolvedImage"!==m.type.kind&&dO(m)){var v=new Dh;try{m=new Cu(m.type,m.evaluate(v))}catch(_){return this.error(_.message),null}}return m}return this.error('Unknown expression "'+d+'". If you wanted a literal array, use ["literal", [...]].',0)}return this.error(typeof l>"u"?"'undefined' value invalid. Use null instead.":"object"==typeof l?'Bare objects invalid. Use ["literal", {...}] instead.':"Expected an array, but found "+typeof l+" instead.")},lf.prototype.concat=function(l,a,h){var d="number"==typeof l?this.path.concat(l):this.path,f=h?this.scope.concat(h):this.scope;return new lf(this.registry,d,a||null,f,this.errors)},lf.prototype.error=function(l){for(var a=[],h=arguments.length-1;h-- >0;)a[h]=arguments[h+1];var d=""+this.key+a.map(function(f){return"["+f+"]"}).join("");this.errors.push(new Tu(d,l))},lf.prototype.checkSubtype=function(l,a){var h=$S(l,a);return h&&this.error(h),h};var cf=function(l,a,h){this.type=l,this.input=a,this.labels=[],this.outputs=[];for(var d=0,f=h;d<f.length;d+=1){var m=f[d],y=m[1];this.labels.push(m[0]),this.outputs.push(y)}};cf.parse=function(l,a){if(l.length-1<4)return a.error("Expected at least 4 arguments, but found only "+(l.length-1)+".");if((l.length-1)%2!=0)return a.error("Expected an even number of arguments.");var h=a.parse(l[1],1,Dt);if(!h)return null;var d=[],f=null;a.expectedType&&"value"!==a.expectedType.kind&&(f=a.expectedType);for(var m=1;m<l.length;m+=2){var g=1===m?-1/0:l[m],y=l[m+1],v=m,_=m+1;if("number"!=typeof g)return a.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',v);if(d.length&&d[d.length-1][0]>=g)return a.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',v);var S=a.parse(y,_,f);if(!S)return null;f=f||S.type,d.push([g,S])}return new cf(f,h,d)},cf.prototype.evaluate=function(l){var a=this.labels,h=this.outputs;if(1===a.length)return h[0].evaluate(l);var d=this.input.evaluate(l);if(d<=a[0])return h[0].evaluate(l);var f=a.length;return d>=a[f-1]?h[f-1].evaluate(l):h[Oj(a,d)].evaluate(l)},cf.prototype.eachChild=function(l){l(this.input);for(var a=0,h=this.outputs;a<h.length;a+=1)l(h[a])},cf.prototype.outputDefined=function(){return this.outputs.every(function(l){return l.outputDefined()})},cf.prototype.serialize=function(){for(var l=["step",this.input.serialize()],a=0;a<this.labels.length;a++)a>0&&l.push(this.labels[a]),l.push(this.outputs[a].serialize());return l};var Zwe=Wy;function Wy(c,l,a,h){this.cx=3*c,this.bx=3*(a-c)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*l,this.by=3*(h-l)-this.cy,this.ay=1-this.cy-this.by,this.p1x=c,this.p1y=h,this.p2x=a,this.p2y=h}function Ja(c,l,a){return c*(1-a)+l*a}Wy.prototype.sampleCurveX=function(c){return((this.ax*c+this.bx)*c+this.cx)*c},Wy.prototype.sampleCurveY=function(c){return((this.ay*c+this.by)*c+this.cy)*c},Wy.prototype.sampleCurveDerivativeX=function(c){return(3*this.ax*c+2*this.bx)*c+this.cx},Wy.prototype.solveCurveX=function(c,l){var a,h,d,f,m;for(typeof l>"u"&&(l=1e-6),d=c,m=0;m<8;m++){if(f=this.sampleCurveX(d)-c,Math.abs(f)<l)return d;var g=this.sampleCurveDerivativeX(d);if(Math.abs(g)<1e-6)break;d-=f/g}if((d=c)<(a=0))return a;if(d>(h=1))return h;for(;a<h;){if(f=this.sampleCurveX(d),Math.abs(f-c)<l)return d;c>f?a=d:h=d,d=.5*(h-a)+a}return d},Wy.prototype.solve=function(c,l){return this.sampleCurveY(this.solveCurveX(c,l))};var Jwe=Object.freeze({__proto__:null,number:Ja,color:function Kwe(c,l,a){return new Ur(Ja(c.r,l.r,a),Ja(c.g,l.g,a),Ja(c.b,l.b,a),Ja(c.a,l.a,a))},array:function Qwe(c,l,a){return c.map(function(h,d){return Ja(h,l[d],a)})}}),Vj=4/29,Xy=6/29,Bj=3*Xy*Xy,tCe=Math.PI/180,nCe=180/Math.PI;function fO(c){return c>.008856451679035631?Math.pow(c,1/3):c/Bj+Vj}function pO(c){return c>Xy?c*c*c:Bj*(c-Vj)}function mO(c){return 255*(c<=.0031308?12.92*c:1.055*Math.pow(c,1/2.4)-.055)}function gO(c){return(c/=255)<=.04045?c/12.92:Math.pow((c+.055)/1.055,2.4)}function Uj(c){var l=gO(c.r),a=gO(c.g),h=gO(c.b),d=fO((.4124564*l+.3575761*a+.1804375*h)/.95047),f=fO((.2126729*l+.7151522*a+.072175*h)/1);return{l:116*f-16,a:500*(d-f),b:200*(f-fO((.0193339*l+.119192*a+.9503041*h)/1.08883)),alpha:c.a}}function Gj(c){var l=(c.l+16)/116,a=isNaN(c.a)?l:l+c.a/500,h=isNaN(c.b)?l:l-c.b/200;return l=1*pO(l),a=.95047*pO(a),h=1.08883*pO(h),new Ur(mO(3.2404542*a-1.5371385*l-.4985314*h),mO(-.969266*a+1.8760108*l+.041556*h),mO(.0556434*a-.2040259*l+1.0572252*h),c.alpha)}function oCe(c,l,a){var h=l-c;return c+a*(h>180||h<-180?h-360*Math.round(h/360):h)}var Px={forward:Uj,reverse:Gj,interpolate:function rCe(c,l,a){return{l:Ja(c.l,l.l,a),a:Ja(c.a,l.a,a),b:Ja(c.b,l.b,a),alpha:Ja(c.alpha,l.alpha,a)}}},Lx_forward=function iCe(c){var l=Uj(c),a=l.l,h=l.a,d=l.b,f=Math.atan2(d,h)*nCe;return{h:f<0?f+360:f,c:Math.sqrt(h*h+d*d),l:a,alpha:c.a}},Lx_reverse=function sCe(c){var l=c.h*tCe,a=c.c;return Gj({l:c.l,a:Math.cos(l)*a,b:Math.sin(l)*a,alpha:c.alpha})},Lx_interpolate=function aCe(c,l,a){return{h:oCe(c.h,l.h,a),c:Ja(c.c,l.c,a),l:Ja(c.l,l.l,a),alpha:Ja(c.alpha,l.alpha,a)}},aa=function(l,a,h,d,f){this.type=l,this.operator=a,this.interpolation=h,this.input=d,this.labels=[],this.outputs=[];for(var m=0,g=f;m<g.length;m+=1){var y=g[m],_=y[1];this.labels.push(y[0]),this.outputs.push(_)}};function yO(c,l,a,h){var d=h-a,f=c-a;return 0===d?0:1===l?f/d:(Math.pow(l,f)-1)/(Math.pow(l,d)-1)}aa.interpolationFactor=function(l,a,h,d){var f=0;if("exponential"===l.name)f=yO(a,l.base,h,d);else if("linear"===l.name)f=yO(a,1,h,d);else if("cubic-bezier"===l.name){var m=l.controlPoints;f=new Zwe(m[0],m[1],m[2],m[3]).solve(yO(a,1,h,d))}return f},aa.parse=function(l,a){var h=l[0],d=l[1],f=l[2],m=l.slice(3);if(!Array.isArray(d)||0===d.length)return a.error("Expected an interpolation type expression.",1);if("linear"===d[0])d={name:"linear"};else if("exponential"===d[0]){var g=d[1];if("number"!=typeof g)return a.error("Exponential interpolation requires a numeric base.",1,1);d={name:"exponential",base:g}}else{if("cubic-bezier"!==d[0])return a.error("Unknown interpolation type "+String(d[0]),1,0);var y=d.slice(1);if(4!==y.length||y.some(function(I){return"number"!=typeof I||I<0||I>1}))return a.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);d={name:"cubic-bezier",controlPoints:y}}if(l.length-1<4)return a.error("Expected at least 4 arguments, but found only "+(l.length-1)+".");if((l.length-1)%2!=0)return a.error("Expected an even number of arguments.");if(!(f=a.parse(f,2,Dt)))return null;var v=[],_=null;"interpolate-hcl"===h||"interpolate-lab"===h?_=Mh:a.expectedType&&"value"!==a.expectedType.kind&&(_=a.expectedType);for(var S=0;S<m.length;S+=2){var b=m[S],T=m[S+1],x=S+3,E=S+4;if("number"!=typeof b)return a.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',x);if(v.length&&v[v.length-1][0]>=b)return a.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',x);var D=a.parse(T,E,_);if(!D)return null;_=_||D.type,v.push([b,D])}return"number"===_.kind||"color"===_.kind||"array"===_.kind&&"number"===_.itemType.kind&&"number"==typeof _.N?new aa(_,h,d,f,v):a.error("Type "+Ni(_)+" is not interpolatable.")},aa.prototype.evaluate=function(l){var a=this.labels,h=this.outputs;if(1===a.length)return h[0].evaluate(l);var d=this.input.evaluate(l);if(d<=a[0])return h[0].evaluate(l);var f=a.length;if(d>=a[f-1])return h[f-1].evaluate(l);var m=Oj(a,d),v=aa.interpolationFactor(this.interpolation,d,a[m],a[m+1]),_=h[m].evaluate(l),S=h[m+1].evaluate(l);return"interpolate"===this.operator?Jwe[this.type.kind.toLowerCase()](_,S,v):"interpolate-hcl"===this.operator?Lx_reverse(Lx_interpolate(Lx_forward(_),Lx_forward(S),v)):Px.reverse(Px.interpolate(Px.forward(_),Px.forward(S),v))},aa.prototype.eachChild=function(l){l(this.input);for(var a=0,h=this.outputs;a<h.length;a+=1)l(h[a])},aa.prototype.outputDefined=function(){return this.outputs.every(function(l){return l.outputDefined()})},aa.prototype.serialize=function(){var l;l="linear"===this.interpolation.name?["linear"]:"exponential"===this.interpolation.name?1===this.interpolation.base?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);for(var a=[this.operator,l,this.input.serialize()],h=0;h<this.labels.length;h++)a.push(this.labels[h],this.outputs[h].serialize());return a};var Ah=function(l,a){this.type=l,this.args=a};Ah.parse=function(l,a){if(l.length<2)return a.error("Expectected at least one argument.");var h=null,d=a.expectedType;d&&"value"!==d.kind&&(h=d);for(var f=[],m=0,g=l.slice(1);m<g.length;m+=1){var v=a.parse(g[m],1+f.length,h,void 0,{typeAnnotation:"omit"});if(!v)return null;h=h||v.type,f.push(v)}var _=d&&f.some(function(S){return $S(d,S.type)});return new Ah(_?Qn:h,f)},Ah.prototype.evaluate=function(l){for(var d,a=null,h=0,f=0,m=this.args;f<m.length;f+=1){if(h++,(a=m[f].evaluate(l))&&a instanceof wu&&!a.available&&(d||(d=a),a=null,h===this.args.length))return d;if(null!==a)break}return a},Ah.prototype.eachChild=function(l){this.args.forEach(l)},Ah.prototype.outputDefined=function(){return this.args.every(function(l){return l.outputDefined()})},Ah.prototype.serialize=function(){var l=["coalesce"];return this.eachChild(function(a){l.push(a.serialize())}),l};var uf=function(l,a){this.type=a.type,this.bindings=[].concat(l),this.result=a};uf.prototype.evaluate=function(l){return this.result.evaluate(l)},uf.prototype.eachChild=function(l){for(var a=0,h=this.bindings;a<h.length;a+=1)l(h[a][1]);l(this.result)},uf.parse=function(l,a){if(l.length<4)return a.error("Expected at least 3 arguments, but found "+(l.length-1)+" instead.");for(var h=[],d=1;d<l.length-1;d+=2){var f=l[d];if("string"!=typeof f)return a.error("Expected string, but found "+typeof f+" instead.",d);if(/[^a-zA-Z0-9_]/.test(f))return a.error("Variable names must contain only alphanumeric characters or '_'.",d);var m=a.parse(l[d+1],d+1);if(!m)return null;h.push([f,m])}var g=a.parse(l[l.length-1],l.length-1,a.expectedType,h);return g?new uf(h,g):null},uf.prototype.outputDefined=function(){return this.result.outputDefined()},uf.prototype.serialize=function(){for(var l=["let"],a=0,h=this.bindings;a<h.length;a+=1){var d=h[a];l.push(d[0],d[1].serialize())}return l.push(this.result.serialize()),l};var Kp=function(l,a,h){this.type=l,this.index=a,this.input=h};Kp.parse=function(l,a){if(3!==l.length)return a.error("Expected 2 arguments, but found "+(l.length-1)+" instead.");var h=a.parse(l[1],1,Dt),d=a.parse(l[2],2,Nl(a.expectedType||Qn));return h&&d?new Kp(d.type.itemType,h,d):null},Kp.prototype.evaluate=function(l){var a=this.index.evaluate(l),h=this.input.evaluate(l);if(a<0)throw new Js("Array index out of bounds: "+a+" < 0.");if(a>=h.length)throw new Js("Array index out of bounds: "+a+" > "+(h.length-1)+".");if(a!==Math.floor(a))throw new Js("Array index must be an integer, but found "+a+" instead.");return h[a]},Kp.prototype.eachChild=function(l){l(this.index),l(this.input)},Kp.prototype.outputDefined=function(){return!1},Kp.prototype.serialize=function(){return["at",this.index.serialize(),this.input.serialize()]};var Qp=function(l,a){this.type=Kn,this.needle=l,this.haystack=a};Qp.parse=function(l,a){if(3!==l.length)return a.error("Expected 2 arguments, but found "+(l.length-1)+" instead.");var h=a.parse(l[1],1,Qn),d=a.parse(l[2],2,Qn);return h&&d?iO(h.type,[Kn,mr,Dt,Ex,Qn])?new Qp(h,d):a.error("Expected first argument to be of type boolean, string, number or null, but found "+Ni(h.type)+" instead"):null},Qp.prototype.evaluate=function(l){var a=this.needle.evaluate(l),h=this.haystack.evaluate(l);if(null==h)return!1;if(!YS(a,["boolean","string","number","null"]))throw new Js("Expected first argument to be of type boolean, string, number or null, but found "+Ni(Us(a))+" instead.");if(!YS(h,["string","array"]))throw new Js("Expected second argument to be of type array or string, but found "+Ni(Us(h))+" instead.");return h.indexOf(a)>=0},Qp.prototype.eachChild=function(l){l(this.needle),l(this.haystack)},Qp.prototype.outputDefined=function(){return!0},Qp.prototype.serialize=function(){return["in",this.needle.serialize(),this.haystack.serialize()]};var hf=function(l,a,h){this.type=Dt,this.needle=l,this.haystack=a,this.fromIndex=h};hf.parse=function(l,a){if(l.length<=2||l.length>=5)return a.error("Expected 3 or 4 arguments, but found "+(l.length-1)+" instead.");var h=a.parse(l[1],1,Qn),d=a.parse(l[2],2,Qn);if(!h||!d)return null;if(!iO(h.type,[Kn,mr,Dt,Ex,Qn]))return a.error("Expected first argument to be of type boolean, string, number or null, but found "+Ni(h.type)+" instead");if(4===l.length){var f=a.parse(l[3],3,Dt);return f?new hf(h,d,f):null}return new hf(h,d)},hf.prototype.evaluate=function(l){var a=this.needle.evaluate(l),h=this.haystack.evaluate(l);if(!YS(a,["boolean","string","number","null"]))throw new Js("Expected first argument to be of type boolean, string, number or null, but found "+Ni(Us(a))+" instead.");if(!YS(h,["string","array"]))throw new Js("Expected second argument to be of type array or string, but found "+Ni(Us(h))+" instead.");if(this.fromIndex){var d=this.fromIndex.evaluate(l);return h.indexOf(a,d)}return h.indexOf(a)},hf.prototype.eachChild=function(l){l(this.needle),l(this.haystack),this.fromIndex&&l(this.fromIndex)},hf.prototype.outputDefined=function(){return!1},hf.prototype.serialize=function(){if(null!=this.fromIndex&&void 0!==this.fromIndex){var l=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),l]}return["index-of",this.needle.serialize(),this.haystack.serialize()]};var Jp=function(l,a,h,d,f,m){this.inputType=l,this.type=a,this.input=h,this.cases=d,this.outputs=f,this.otherwise=m};Jp.parse=function(l,a){if(l.length<5)return a.error("Expected at least 4 arguments, but found only "+(l.length-1)+".");if(l.length%2!=1)return a.error("Expected an even number of arguments.");var h,d;a.expectedType&&"value"!==a.expectedType.kind&&(d=a.expectedType);for(var f={},m=[],g=2;g<l.length-1;g+=2){var y=l[g],v=l[g+1];Array.isArray(y)||(y=[y]);var _=a.concat(g);if(0===y.length)return _.error("Expected at least one branch label.");for(var S=0,b=y;S<b.length;S+=1){var T=b[S];if("number"!=typeof T&&"string"!=typeof T)return _.error("Branch labels must be numbers or strings.");if("number"==typeof T&&Math.abs(T)>Number.MAX_SAFE_INTEGER)return _.error("Branch labels must be integers no larger than "+Number.MAX_SAFE_INTEGER+".");if("number"==typeof T&&Math.floor(T)!==T)return _.error("Numeric branch labels must be integer values.");if(h){if(_.checkSubtype(h,Us(T)))return null}else h=Us(T);if(typeof f[String(T)]<"u")return _.error("Branch labels must be unique.");f[String(T)]=m.length}var x=a.parse(v,g,d);if(!x)return null;d=d||x.type,m.push(x)}var E=a.parse(l[1],1,Qn);if(!E)return null;var D=a.parse(l[l.length-1],l.length-1,d);return!D||"value"!==E.type.kind&&a.concat(1).checkSubtype(h,E.type)?null:new Jp(h,d,E,f,m,D)},Jp.prototype.evaluate=function(l){var a=this.input.evaluate(l);return(Us(a)===this.inputType&&this.outputs[this.cases[a]]||this.otherwise).evaluate(l)},Jp.prototype.eachChild=function(l){l(this.input),this.outputs.forEach(l),l(this.otherwise)},Jp.prototype.outputDefined=function(){return this.outputs.every(function(l){return l.outputDefined()})&&this.otherwise.outputDefined()},Jp.prototype.serialize=function(){for(var l=this,a=["match",this.input.serialize()],d=[],f={},m=0,g=Object.keys(this.cases).sort();m<g.length;m+=1){var y=g[m];void 0===(v=f[this.cases[y]])?(f[this.cases[y]]=d.length,d.push([this.cases[y],[y]])):d[v][1].push(y)}for(var _=function(E){return"number"===l.inputType.kind?Number(E):E},S=0,b=d;S<b.length;S+=1){var T=b[S],v=T[0],x=T[1];a.push(1===x.length?_(x[0]):x.map(_)),a.push(this.outputs[outputIndex$1].serialize())}return a.push(this.otherwise.serialize()),a};var em=function(l,a,h){this.type=l,this.branches=a,this.otherwise=h};em.parse=function(l,a){if(l.length<4)return a.error("Expected at least 3 arguments, but found only "+(l.length-1)+".");if(l.length%2!=0)return a.error("Expected an odd number of arguments.");var h;a.expectedType&&"value"!==a.expectedType.kind&&(h=a.expectedType);for(var d=[],f=1;f<l.length-1;f+=2){var m=a.parse(l[f],f,Kn);if(!m)return null;var g=a.parse(l[f+1],f+1,h);if(!g)return null;d.push([m,g]),h=h||g.type}var y=a.parse(l[l.length-1],l.length-1,h);return y?new em(h,d,y):null},em.prototype.evaluate=function(l){for(var a=0,h=this.branches;a<h.length;a+=1){var d=h[a],m=d[1];if(d[0].evaluate(l))return m.evaluate(l)}return this.otherwise.evaluate(l)},em.prototype.eachChild=function(l){for(var a=0,h=this.branches;a<h.length;a+=1){var d=h[a],m=d[1];l(d[0]),l(m)}l(this.otherwise)},em.prototype.outputDefined=function(){return this.branches.every(function(l){return l[1].outputDefined()})&&this.otherwise.outputDefined()},em.prototype.serialize=function(){var l=["case"];return this.eachChild(function(a){l.push(a.serialize())}),l};var df=function(l,a,h,d){this.type=l,this.input=a,this.beginIndex=h,this.endIndex=d};function zj(c,l){return"=="===c||"!="===c?"boolean"===l.kind||"string"===l.kind||"number"===l.kind||"null"===l.kind||"value"===l.kind:"string"===l.kind||"number"===l.kind||"value"===l.kind}function Hj(c,l,a,h){return 0===h.compare(l,a)}function qy(c,l,a){var h="=="!==c&&"!="!==c;return function(){function d(f,m,g){this.type=Kn,this.lhs=f,this.rhs=m,this.collator=g,this.hasUntypedArgument="value"===f.type.kind||"value"===m.type.kind}return d.parse=function(m,g){if(3!==m.length&&4!==m.length)return g.error("Expected two or three arguments.");var y=m[0],v=g.parse(m[1],1,Qn);if(!v)return null;if(!zj(y,v.type))return g.concat(1).error('"'+y+"\" comparisons are not supported for type '"+Ni(v.type)+"'.");var _=g.parse(m[2],2,Qn);if(!_)return null;if(!zj(y,_.type))return g.concat(2).error('"'+y+"\" comparisons are not supported for type '"+Ni(_.type)+"'.");if(v.type.kind!==_.type.kind&&"value"!==v.type.kind&&"value"!==_.type.kind)return g.error("Cannot compare types '"+Ni(v.type)+"' and '"+Ni(_.type)+"'.");h&&("value"===v.type.kind&&"value"!==_.type.kind?v=new oa(_.type,[v]):"value"!==v.type.kind&&"value"===_.type.kind&&(_=new oa(v.type,[_])));var S=null;if(4===m.length){if("string"!==v.type.kind&&"string"!==_.type.kind&&"value"!==v.type.kind&&"value"!==_.type.kind)return g.error("Cannot use collator to compare non-string types.");if(!(S=g.parse(m[3],3,Mx)))return null}return new d(v,_,S)},d.prototype.evaluate=function(m){var g=this.lhs.evaluate(m),y=this.rhs.evaluate(m);if(h&&this.hasUntypedArgument){var v=Us(g),_=Us(y);if(v.kind!==_.kind||"string"!==v.kind&&"number"!==v.kind)throw new Js('Expected arguments for "'+c+'" to be (string, string) or (number, number), but found ('+v.kind+", "+_.kind+") instead.")}if(this.collator&&!h&&this.hasUntypedArgument){var S=Us(g),b=Us(y);if("string"!==S.kind||"string"!==b.kind)return l(m,g,y)}return this.collator?a(m,g,y,this.collator.evaluate(m)):l(m,g,y)},d.prototype.eachChild=function(m){m(this.lhs),m(this.rhs),this.collator&&m(this.collator)},d.prototype.outputDefined=function(){return!0},d.prototype.serialize=function(){var m=[c];return this.eachChild(function(g){m.push(g.serialize())}),m},d}()}df.parse=function(l,a){if(l.length<=2||l.length>=5)return a.error("Expected 3 or 4 arguments, but found "+(l.length-1)+" instead.");var h=a.parse(l[1],1,Qn),d=a.parse(l[2],2,Dt);if(!h||!d)return null;if(!iO(h.type,[Nl(Qn),mr,Qn]))return a.error("Expected first argument to be of type array or string, but found "+Ni(h.type)+" instead");if(4===l.length){var f=a.parse(l[3],3,Dt);return f?new df(h.type,h,d,f):null}return new df(h.type,h,d)},df.prototype.evaluate=function(l){var a=this.input.evaluate(l),h=this.beginIndex.evaluate(l);if(!YS(a,["string","array"]))throw new Js("Expected first argument to be of type array or string, but found "+Ni(Us(a))+" instead.");if(this.endIndex){var d=this.endIndex.evaluate(l);return a.slice(h,d)}return a.slice(h)},df.prototype.eachChild=function(l){l(this.input),l(this.beginIndex),this.endIndex&&l(this.endIndex)},df.prototype.outputDefined=function(){return!1},df.prototype.serialize=function(){if(null!=this.endIndex&&void 0!==this.endIndex){var l=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),l]}return["slice",this.input.serialize(),this.beginIndex.serialize()]};var _Ce=qy("==",function lCe(c,l,a){return l===a},Hj),SCe=qy("!=",function cCe(c,l,a){return l!==a},function pCe(c,l,a,h){return!Hj(0,l,a,h)}),bCe=qy("<",function uCe(c,l,a){return l<a},function mCe(c,l,a,h){return h.compare(l,a)<0}),TCe=qy(">",function hCe(c,l,a){return l>a},function gCe(c,l,a,h){return h.compare(l,a)>0}),wCe=qy("<=",function dCe(c,l,a){return l<=a},function yCe(c,l,a,h){return h.compare(l,a)<=0}),CCe=qy(">=",function fCe(c,l,a){return l>=a},function vCe(c,l,a,h){return h.compare(l,a)>=0}),tm=function(l,a,h,d,f){this.type=mr,this.number=l,this.locale=a,this.currency=h,this.minFractionDigits=d,this.maxFractionDigits=f};tm.parse=function(l,a){if(3!==l.length)return a.error("Expected two arguments.");var h=a.parse(l[1],1,Dt);if(!h)return null;var d=l[2];if("object"!=typeof d||Array.isArray(d))return a.error("NumberFormat options argument must be an object.");var f=null;if(d.locale&&!(f=a.parse(d.locale,1,mr)))return null;var m=null;if(d.currency&&!(m=a.parse(d.currency,1,mr)))return null;var g=null;if(d["min-fraction-digits"]&&!(g=a.parse(d["min-fraction-digits"],1,Dt)))return null;var y=null;return d["max-fraction-digits"]&&!(y=a.parse(d["max-fraction-digits"],1,Dt))?null:new tm(h,f,m,g,y)},tm.prototype.evaluate=function(l){return new Intl.NumberFormat(this.locale?this.locale.evaluate(l):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(l):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(l):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(l):void 0}).format(this.number.evaluate(l))},tm.prototype.eachChild=function(l){l(this.number),this.locale&&l(this.locale),this.currency&&l(this.currency),this.minFractionDigits&&l(this.minFractionDigits),this.maxFractionDigits&&l(this.maxFractionDigits)},tm.prototype.outputDefined=function(){return!1},tm.prototype.serialize=function(){var l={};return this.locale&&(l.locale=this.locale.serialize()),this.currency&&(l.currency=this.currency.serialize()),this.minFractionDigits&&(l["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(l["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),l]};var nm=function(l){this.type=Dt,this.input=l};nm.parse=function(l,a){if(2!==l.length)return a.error("Expected 1 argument, but found "+(l.length-1)+" instead.");var h=a.parse(l[1],1);return h?"array"!==h.type.kind&&"string"!==h.type.kind&&"value"!==h.type.kind?a.error("Expected argument of type string or array, but found "+Ni(h.type)+" instead."):new nm(h):null},nm.prototype.evaluate=function(l){var a=this.input.evaluate(l);if("string"==typeof a)return a.length;if(Array.isArray(a))return a.length;throw new Js("Expected value to be of type string or array, but found "+Ni(Us(a))+" instead.")},nm.prototype.eachChild=function(l){l(this.input)},nm.prototype.outputDefined=function(){return!1},nm.prototype.serialize=function(){var l=["length"];return this.eachChild(function(a){l.push(a.serialize())}),l};var vO={"==":_Ce,"!=":SCe,">":TCe,"<":bCe,">=":CCe,"<=":wCe,array:oa,at:Kp,boolean:oa,case:em,coalesce:Ah,collator:rf,format:tf,image:nf,in:Qp,"index-of":hf,interpolate:aa,"interpolate-hcl":aa,"interpolate-lab":aa,length:nm,let:uf,literal:Cu,match:Jp,number:oa,"number-format":tm,object:oa,slice:df,step:cf,string:oa,"to-boolean":Fl,"to-color":Fl,"to-number":Fl,"to-string":Fl,var:af,within:Cc};function jj(c,l){var a=l[0],h=l[1],d=l[2],f=l[3];a=a.evaluate(c),h=h.evaluate(c),d=d.evaluate(c);var m=f?f.evaluate(c):1,g=Mj(a,h,d,m);if(g)throw new Js(g);return new Ur(a/255*m,h/255*m,d/255*m,m)}function Wj(c,l){return c in l}function _O(c,l){var a=l[c];return typeof a>"u"?null:a}function rm(c){return{type:c}}function SO(c){return{result:"success",value:c}}function $y(c){return{result:"error",value:c}}function Xj(c){return"object"==typeof c&&null!==c&&!Array.isArray(c)}Ro.register(vO,{error:[{kind:"error"},[mr],function(c,l){throw new Js(l[0].evaluate(c))}],typeof:[mr,[Qn],function(c,l){return Ni(Us(l[0].evaluate(c)))}],"to-rgba":[Nl(Dt,4),[Mh],function(c,l){return l[0].evaluate(c).toArray()}],rgb:[Mh,[Dt,Dt,Dt],jj],rgba:[Mh,[Dt,Dt,Dt,Dt],jj],has:{type:Kn,overloads:[[[mr],function(c,l){return Wj(l[0].evaluate(c),c.properties())}],[[mr,jy],function(c,l){var h=l[1];return Wj(l[0].evaluate(c),h.evaluate(c))}]]},get:{type:Qn,overloads:[[[mr],function(c,l){return _O(l[0].evaluate(c),c.properties())}],[[mr,jy],function(c,l){var h=l[1];return _O(l[0].evaluate(c),h.evaluate(c))}]]},"feature-state":[Qn,[mr],function(c,l){return _O(l[0].evaluate(c),c.featureState||{})}],properties:[jy,[],function(c){return c.properties()}],"geometry-type":[mr,[],function(c){return c.geometryType()}],id:[Qn,[],function(c){return c.id()}],zoom:[Dt,[],function(c){return c.globals.zoom}],pitch:[Dt,[],function(c){return c.globals.pitch||0}],"distance-from-center":[Dt,[],function(c){return c.distanceFromCenter()}],"heatmap-density":[Dt,[],function(c){return c.globals.heatmapDensity||0}],"line-progress":[Dt,[],function(c){return c.globals.lineProgress||0}],"sky-radial-progress":[Dt,[],function(c){return c.globals.skyRadialProgress||0}],accumulated:[Qn,[],function(c){return void 0===c.globals.accumulated?null:c.globals.accumulated}],"+":[Dt,rm(Dt),function(c,l){for(var a=0,h=0,d=l;h<d.length;h+=1)a+=d[h].evaluate(c);return a}],"*":[Dt,rm(Dt),function(c,l){for(var a=1,h=0,d=l;h<d.length;h+=1)a*=d[h].evaluate(c);return a}],"-":{type:Dt,overloads:[[[Dt,Dt],function(c,l){var h=l[1];return l[0].evaluate(c)-h.evaluate(c)}],[[Dt],function(c,l){return-l[0].evaluate(c)}]]},"/":[Dt,[Dt,Dt],function(c,l){var h=l[1];return l[0].evaluate(c)/h.evaluate(c)}],"%":[Dt,[Dt,Dt],function(c,l){var h=l[1];return l[0].evaluate(c)%h.evaluate(c)}],ln2:[Dt,[],function(){return Math.LN2}],pi:[Dt,[],function(){return Math.PI}],e:[Dt,[],function(){return Math.E}],"^":[Dt,[Dt,Dt],function(c,l){var h=l[1];return Math.pow(l[0].evaluate(c),h.evaluate(c))}],sqrt:[Dt,[Dt],function(c,l){return Math.sqrt(l[0].evaluate(c))}],log10:[Dt,[Dt],function(c,l){return Math.log(l[0].evaluate(c))/Math.LN10}],ln:[Dt,[Dt],function(c,l){return Math.log(l[0].evaluate(c))}],log2:[Dt,[Dt],function(c,l){return Math.log(l[0].evaluate(c))/Math.LN2}],sin:[Dt,[Dt],function(c,l){return Math.sin(l[0].evaluate(c))}],cos:[Dt,[Dt],function(c,l){return Math.cos(l[0].evaluate(c))}],tan:[Dt,[Dt],function(c,l){return Math.tan(l[0].evaluate(c))}],asin:[Dt,[Dt],function(c,l){return Math.asin(l[0].evaluate(c))}],acos:[Dt,[Dt],function(c,l){return Math.acos(l[0].evaluate(c))}],atan:[Dt,[Dt],function(c,l){return Math.atan(l[0].evaluate(c))}],min:[Dt,rm(Dt),function(c,l){return Math.min.apply(Math,l.map(function(a){return a.evaluate(c)}))}],max:[Dt,rm(Dt),function(c,l){return Math.max.apply(Math,l.map(function(a){return a.evaluate(c)}))}],abs:[Dt,[Dt],function(c,l){return Math.abs(l[0].evaluate(c))}],round:[Dt,[Dt],function(c,l){var h=l[0].evaluate(c);return h<0?-Math.round(-h):Math.round(h)}],floor:[Dt,[Dt],function(c,l){return Math.floor(l[0].evaluate(c))}],ceil:[Dt,[Dt],function(c,l){return Math.ceil(l[0].evaluate(c))}],"filter-==":[Kn,[mr,Qn],function(c,l){var a=l[0],h=l[1];return c.properties()[a.value]===h.value}],"filter-id-==":[Kn,[Qn],function(c,l){var a=l[0];return c.id()===a.value}],"filter-type-==":[Kn,[mr],function(c,l){var a=l[0];return c.geometryType()===a.value}],"filter-<":[Kn,[mr,Qn],function(c,l){var a=l[0],h=l[1],d=c.properties()[a.value],f=h.value;return typeof d==typeof f&&d<f}],"filter-id-<":[Kn,[Qn],function(c,l){var a=l[0],h=c.id(),d=a.value;return typeof h==typeof d&&h<d}],"filter->":[Kn,[mr,Qn],function(c,l){var a=l[0],h=l[1],d=c.properties()[a.value],f=h.value;return typeof d==typeof f&&d>f}],"filter-id->":[Kn,[Qn],function(c,l){var a=l[0],h=c.id(),d=a.value;return typeof h==typeof d&&h>d}],"filter-<=":[Kn,[mr,Qn],function(c,l){var a=l[0],h=l[1],d=c.properties()[a.value],f=h.value;return typeof d==typeof f&&d<=f}],"filter-id-<=":[Kn,[Qn],function(c,l){var a=l[0],h=c.id(),d=a.value;return typeof h==typeof d&&h<=d}],"filter->=":[Kn,[mr,Qn],function(c,l){var a=l[0],h=l[1],d=c.properties()[a.value],f=h.value;return typeof d==typeof f&&d>=f}],"filter-id->=":[Kn,[Qn],function(c,l){var a=l[0],h=c.id(),d=a.value;return typeof h==typeof d&&h>=d}],"filter-has":[Kn,[Qn],function(c,l){return l[0].value in c.properties()}],"filter-has-id":[Kn,[],function(c){return null!==c.id()&&void 0!==c.id()}],"filter-type-in":[Kn,[Nl(mr)],function(c,l){return l[0].value.indexOf(c.geometryType())>=0}],"filter-id-in":[Kn,[Nl(Qn)],function(c,l){return l[0].value.indexOf(c.id())>=0}],"filter-in-small":[Kn,[mr,Nl(Qn)],function(c,l){var a=l[0];return l[1].value.indexOf(c.properties()[a.value])>=0}],"filter-in-large":[Kn,[mr,Nl(Qn)],function(c,l){var a=l[0],h=l[1];return function xCe(c,l,a,h){for(;a<=h;){var d=a+h>>1;if(l[d]===c)return!0;l[d]>c?h=d-1:a=d+1}return!1}(c.properties()[a.value],h.value,0,h.value.length-1)}],all:{type:Kn,overloads:[[[Kn,Kn],function(c,l){var h=l[1];return l[0].evaluate(c)&&h.evaluate(c)}],[rm(Kn),function(c,l){for(var a=0,h=l;a<h.length;a+=1)if(!h[a].evaluate(c))return!1;return!0}]]},any:{type:Kn,overloads:[[[Kn,Kn],function(c,l){var h=l[1];return l[0].evaluate(c)||h.evaluate(c)}],[rm(Kn),function(c,l){for(var a=0,h=l;a<h.length;a+=1)if(h[a].evaluate(c))return!0;return!1}]]},"!":[Kn,[Kn],function(c,l){return!l[0].evaluate(c)}],"is-supported-script":[Kn,[mr],function(c,l){var h=c.globals&&c.globals.isSupportedScript;return!h||h(l[0].evaluate(c))}],upcase:[mr,[mr],function(c,l){return l[0].evaluate(c).toUpperCase()}],downcase:[mr,[mr],function(c,l){return l[0].evaluate(c).toLowerCase()}],concat:[mr,rm(Qn),function(c,l){return l.map(function(a){return KS(a.evaluate(c))}).join("")}],"resolved-locale":[mr,[Mx],function(c,l){return l[0].evaluate(c).resolvedLocale()}]});var bO=function(l,a){this.expression=l,this._warningHistory={},this._evaluator=new Dh,this._defaultValue=a?function PCe(c){return"color"===c.type&&(Xj(c.default)||Array.isArray(c.default))?new Ur(0,0,0,0):"color"===c.type?Ur.parse(c.default)||null:void 0===c.default?null:c.default}(a):null,this._enumValues=a&&"enum"===a.type?a.values:null};function TO(c,l){var a=new lf(vO,[],l?function RCe(c){var l={color:Mh,string:mr,number:Dt,enum:mr,boolean:Kn,formatted:Dx,resolvedImage:qS};return"array"===c.type?Nl(l[c.value]||Qn,c.length):l[c.type]}(l):void 0),h=a.parse(c,void 0,void 0,void 0,l&&"string"===l.type?{typeAnnotation:"coerce"}:void 0);return h?SO(new bO(h,l)):$y(a.errors)}bO.prototype.evaluateWithoutErrorHandling=function(l,a,h,d,f,m,g,y){return this._evaluator.globals=l,this._evaluator.feature=a,this._evaluator.featureState=h,this._evaluator.canonical=d||null,this._evaluator.availableImages=f||null,this._evaluator.formattedSection=m,this._evaluator.featureTileCoord=g||null,this._evaluator.featureDistanceData=y||null,this.expression.evaluate(this._evaluator)},bO.prototype.evaluate=function(l,a,h,d,f,m,g,y){this._evaluator.globals=l,this._evaluator.feature=a||null,this._evaluator.featureState=h||null,this._evaluator.canonical=d||null,this._evaluator.availableImages=f||null,this._evaluator.formattedSection=m||null,this._evaluator.featureTileCoord=g||null,this._evaluator.featureDistanceData=y||null;try{var v=this.expression.evaluate(this._evaluator);if(null==v||"number"==typeof v&&v!=v)return this._defaultValue;if(this._enumValues&&!(v in this._enumValues))throw new Js("Expected value to be one of "+Object.keys(this._enumValues).map(function(_){return JSON.stringify(_)}).join(", ")+", but found "+JSON.stringify(v)+" instead.");return v}catch(_){return this._warningHistory[_.message]||(this._warningHistory[_.message]=!0,typeof console<"u"&&console.warn(_.message)),this._defaultValue}};var Ox=function(l,a){this.kind=l,this._styleExpression=a,this.isStateDependent="constant"!==l&&!uO(a.expression)};Ox.prototype.evaluateWithoutErrorHandling=function(l,a,h,d,f,m){return this._styleExpression.evaluateWithoutErrorHandling(l,a,h,d,f,m)},Ox.prototype.evaluate=function(l,a,h,d,f,m){return this._styleExpression.evaluate(l,a,h,d,f,m)};var QS=function(l,a,h,d){this.kind=l,this.zoomStops=h,this._styleExpression=a,this.isStateDependent="camera"!==l&&!uO(a.expression),this.interpolationType=d};function ICe(c,l){if("error"===(c=TO(c,l)).result)return c;var a=c.value.expression,h=Rx(a);if(!h&&!function ECe(c){return"data-driven"===c["property-type"]||"cross-faded-data-driven"===c["property-type"]}(l))return $y([new Tu("","data expressions not supported")]);var d=hO(a,["zoom","pitch","distance-from-center"]);if(!d&&!function MCe(c){return!!c.expression&&c.expression.parameters.indexOf("zoom")>-1}(l))return $y([new Tu("","zoom expressions not supported")]);var f=Nx(a);return f||d?f instanceof Tu?$y([f]):f instanceof aa&&!function DCe(c){return!!c.expression&&c.expression.interpolated}(l)?$y([new Tu("",'"interpolate" expressions cannot be used with this property')]):SO(f?new QS(h?"camera":"composite",c.value,f.labels,f instanceof aa?f.interpolation:void 0):new Ox(h?"constant":"source",c.value)):$y([new Tu("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}function Nx(c){var l=null;if(c instanceof uf)l=Nx(c.result);else if(c instanceof Ah)for(var a=0,h=c.args;a<h.length&&!(l=Nx(h[a]));a+=1);else(c instanceof cf||c instanceof aa)&&c.input instanceof Ro&&"zoom"===c.input.name&&(l=c);return l instanceof Tu||c.eachChild(function(f){var m=Nx(f);m instanceof Tu?l=m:!l&&m?l=new Tu("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):l&&m&&l!==m&&(l=new Tu("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),l}function wO(c){if(Array.isArray(c))return c.map(wO);if(c instanceof Object&&!(c instanceof Number||c instanceof String||c instanceof Boolean)){var l={};for(var a in c)l[a]=wO(c[a]);return l}return function LCe(c){return c instanceof Number||c instanceof String||c instanceof Boolean?c.valueOf():c}(c)}QS.prototype.evaluateWithoutErrorHandling=function(l,a,h,d,f,m){return this._styleExpression.evaluateWithoutErrorHandling(l,a,h,d,f,m)},QS.prototype.evaluate=function(l,a,h,d,f,m){return this._styleExpression.evaluate(l,a,h,d,f,m)},QS.prototype.interpolationFactor=function(l,a,h){return this.interpolationType?aa.interpolationFactor(this.interpolationType,l,a,h):0};var qj={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},terrain:{type:"terrain"},fog:{type:"fog"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},projection:{type:"projection"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{},sky:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background","layout_sky"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_sky:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_symbol:{type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature","pitch","distance-from-center"]}},filter_fill:{type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},filter_line:{type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},filter_circle:{type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},"filter_fill-extrusion":{type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},filter_heatmap:{type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},expression_name:{type:"enum",values:{let:{group:"Variable binding"},var:{group:"Variable binding"},literal:{group:"Types"},array:{group:"Types"},at:{group:"Lookup"},in:{group:"Lookup"},"index-of":{group:"Lookup"},slice:{group:"Lookup"},case:{group:"Decision"},match:{group:"Decision"},coalesce:{group:"Decision"},step:{group:"Ramps, scales, curves"},interpolate:{group:"Ramps, scales, curves"},"interpolate-hcl":{group:"Ramps, scales, curves"},"interpolate-lab":{group:"Ramps, scales, curves"},ln2:{group:"Math"},pi:{group:"Math"},e:{group:"Math"},typeof:{group:"Types"},string:{group:"Types"},number:{group:"Types"},boolean:{group:"Types"},object:{group:"Types"},collator:{group:"Types"},format:{group:"Types"},image:{group:"Types"},"number-format":{group:"Types"},"to-string":{group:"Types"},"to-number":{group:"Types"},"to-boolean":{group:"Types"},"to-rgba":{group:"Color"},"to-color":{group:"Types"},rgb:{group:"Color"},rgba:{group:"Color"},get:{group:"Lookup"},has:{group:"Lookup"},length:{group:"Lookup"},properties:{group:"Feature data"},"feature-state":{group:"Feature data"},"geometry-type":{group:"Feature data"},id:{group:"Feature data"},zoom:{group:"Camera"},pitch:{group:"Camera"},"distance-from-center":{group:"Camera"},"heatmap-density":{group:"Heatmap"},"line-progress":{group:"Feature data"},"sky-radial-progress":{group:"sky"},accumulated:{group:"Feature data"},"+":{group:"Math"},"*":{group:"Math"},"-":{group:"Math"},"/":{group:"Math"},"%":{group:"Math"},"^":{group:"Math"},sqrt:{group:"Math"},log10:{group:"Math"},ln:{group:"Math"},log2:{group:"Math"},sin:{group:"Math"},cos:{group:"Math"},tan:{group:"Math"},asin:{group:"Math"},acos:{group:"Math"},atan:{group:"Math"},min:{group:"Math"},max:{group:"Math"},round:{group:"Math"},abs:{group:"Math"},ceil:{group:"Math"},floor:{group:"Math"},distance:{group:"Math"},"==":{group:"Decision"},"!=":{group:"Decision"},">":{group:"Decision"},"<":{group:"Decision"},">=":{group:"Decision"},"<=":{group:"Decision"},all:{group:"Decision"},any:{group:"Decision"},"!":{group:"Decision"},within:{group:"Decision"},"is-supported-script":{group:"String"},upcase:{group:"String"},downcase:{group:"String"},concat:{group:"String"},"resolved-locale":{group:"String"}}},fog:{range:{type:"array",default:[.5,10],minimum:-20,maximum:20,length:2,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"high-color":{type:"color","property-type":"data-constant",default:"#245cdf",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"space-color":{type:"color","property-type":"data-constant",default:["interpolate",["linear"],["zoom"],4,"#010b19",7,"#367ab9"],expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-blend":{type:"number","property-type":"data-constant",default:["interpolate",["linear"],["zoom"],4,.2,7,.1],minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"star-intensity":{type:"number","property-type":"data-constant",default:["interpolate",["linear"],["zoom"],5,.35,6,0],minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},projection:{name:{type:"enum",values:{albers:{},equalEarth:{},equirectangular:{},lambertConformalConic:{},mercator:{},naturalEarth:{},winkelTripel:{},globe:{}},default:"mercator",required:!0},center:{type:"array",length:2,value:"number","property-type":"data-constant",minimum:[-180,-90],maximum:[180,90],transition:!1,requires:[{name:["albers","lambertConformalConic"]}]},parallels:{type:"array",length:2,value:"number","property-type":"data-constant",minimum:[-90,-90],maximum:[90,90],transition:!1,requires:[{name:["albers","lambertConformalConic"]}]}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number","property-type":"data-constant",default:1,minimum:0,maximum:1e3,expression:{interpolated:!0,parameters:["zoom"]},transition:!0,requires:["source"]}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background","paint_sky"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"},"line-trim-offset":{type:"array",value:"number",length:2,default:[0,0],minimum:[0,0],maximum:[1,1],transition:!1,requires:[{source:"geojson",has:{lineMetrics:!0}}],"property-type":"constant"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_sky:{"sky-type":{type:"enum",values:{gradient:{},atmosphere:{}},default:"atmosphere",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun":{type:"array",value:"number",length:2,units:"degrees",minimum:[0,0],maximum:[360,180],transition:!1,requires:[{"sky-type":"atmosphere"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun-intensity":{type:"number",requires:[{"sky-type":"atmosphere"}],default:10,minimum:0,maximum:100,transition:!1,"property-type":"data-constant"},"sky-gradient-center":{type:"array",requires:[{"sky-type":"gradient"}],value:"number",default:[0,0],length:2,units:"degrees",minimum:[0,0],maximum:[360,180],transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-gradient-radius":{type:"number",requires:[{"sky-type":"gradient"}],default:90,minimum:0,maximum:180,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-gradient":{type:"color",default:["interpolate",["linear"],["sky-radial-progress"],.8,"#87ceeb",1,"white"],transition:!1,requires:[{"sky-type":"gradient"}],expression:{interpolated:!0,parameters:["sky-radial-progress"]},"property-type":"color-ramp"},"sky-atmosphere-halo-color":{type:"color",default:"white",transition:!1,requires:[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-atmosphere-color":{type:"color",default:"white",transition:!1,requires:[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};function $j(c){if(!0===c||!1===c)return!0;if(!Array.isArray(c)||0===c.length)return!1;switch(c[0]){case"has":return c.length>=2&&"$id"!==c[1]&&"$type"!==c[1];case"in":return c.length>=3&&("string"!=typeof c[1]||Array.isArray(c[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return 3!==c.length||Array.isArray(c[1])||Array.isArray(c[2]);case"any":case"all":for(var l=0,a=c.slice(1);l<a.length;l+=1){var h=a[l];if(!$j(h)&&"boolean"!=typeof h)return!1}return!0;default:return!0}}function OCe(c,l){if(void 0===l&&(l="fill"),null==c)return{filter:function(){return!0},needGeometry:!1,needFeature:!1};$j(c)||(c=Fx(c));var a=c,h=!0;try{h=function NCe(c){if(!Yy(c))return c;var l=wO(c);return Zj(l),Yj(l)}(a)}catch{console.warn("Failed to extract static filter. Filter will continue working, but at higher memory usage and slower framerate.\nThis is most likely a bug, please report this via https://github.com/mapbox/mapbox-gl-js/issues/new?assignees=&labels=&template=Bug_report.md\nand paste the contents of this message in the report.\nThank you!\nFilter Expression:\n"+JSON.stringify(a,null,2)+"\n        ")}var m,d=qj["filter_"+l],f=TO(h,d);if("error"===f.result)throw new Error(f.value.map(function(S){return S.key+": "+S.message}).join(", "));m=function(S,b,T){return f.value.evaluate(S,b,{},T)};var g=null,y=null;if(h!==a){var v=TO(a,d);if("error"===v.result)throw new Error(v.value.map(function(S){return S.key+": "+S.message}).join(", "));g=function(S,b,T,x,E){return v.value.evaluate(S,b,{},T,void 0,void 0,x,E)},y=!Rx(v.value.expression)}return{filter:m,dynamicFilter:g||void 0,needGeometry:Kj(h),needFeature:!!y}}function Yj(c){if(!Array.isArray(c))return c;var l=function VCe(c){if(kCe.has(c[0]))for(var l=1;l<c.length;l++)if(Yy(c[l]))return!0;return c}(c);return!0===l?l:l.map(function(a){return Yj(a)})}function Zj(c){var l=!1,a=[];if("case"===c[0]){for(var h=1;h<c.length-1;h+=2)l=l||Yy(c[h]),a.push(c[h+1]);a.push(c[c.length-1])}else if("match"===c[0]){l=l||Yy(c[1]);for(var d=2;d<c.length-1;d+=2)a.push(c[d+1]);a.push(c[c.length-1])}else if("step"===c[0]){l=l||Yy(c[1]);for(var f=1;f<c.length-1;f+=2)a.push(c[f+1])}l&&(c.length=0,c.push.apply(c,["any"].concat(a)));for(var m=1;m<c.length;m++)Zj(c[m])}function Yy(c){if(!Array.isArray(c))return!1;if(function FCe(c){return"pitch"===c||"distance-from-center"===c}(c[0]))return!0;for(var l=1;l<c.length;l++)if(Yy(c[l]))return!0;return!1}var kCe=new Set(["in","==","!=",">",">=","<","<=","to-boolean"]);function BCe(c,l){return c<l?-1:c>l?1:0}function Kj(c){if(!Array.isArray(c))return!1;if("within"===c[0])return!0;for(var l=1;l<c.length;l++)if(Kj(c[l]))return!0;return!1}function Fx(c){if(!c)return!0;var l=c[0];return c.length<=1?"any"!==l:"=="===l?CO(c[1],c[2],"=="):"!="===l?kx(CO(c[1],c[2],"==")):"<"===l||">"===l||"<="===l||">="===l?CO(c[1],c[2],l):"any"===l?function UCe(c){return["any"].concat(c.map(Fx))}(c.slice(1)):"all"===l?["all"].concat(c.slice(1).map(Fx)):"none"===l?["all"].concat(c.slice(1).map(Fx).map(kx)):"in"===l?Qj(c[1],c.slice(2)):"!in"===l?kx(Qj(c[1],c.slice(2))):"has"===l?Jj(c[1]):"!has"===l?kx(Jj(c[1])):"within"!==l||c}function CO(c,l,a){switch(c){case"$type":return["filter-type-"+a,l];case"$id":return["filter-id-"+a,l];default:return["filter-"+a,c,l]}}function Qj(c,l){if(0===l.length)return!1;switch(c){case"$type":return["filter-type-in",["literal",l]];case"$id":return["filter-id-in",["literal",l]];default:return l.length>200&&!l.some(function(a){return typeof a!=typeof l[0]})?["filter-in-large",c,["literal",l.sort(BCe)]]:["filter-in-small",c,["literal",l]]}}function Jj(c){switch(c){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",c]}}function kx(c){return["!",c]}var GCe=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function zCe(c,l){var a={};for(var h in c)"ref"!==h&&(a[h]=c[h]);return GCe.forEach(function(d){d in l&&(a[d]=l[d])}),a}var eW={thin:100,hairline:100,"ultra-light":100,"extra-light":100,light:200,book:300,regular:400,normal:400,plain:400,roman:400,standard:400,medium:500,"semi-bold":600,"demi-bold":600,bold:700,heavy:800,black:800,"extra-bold":800,"ultra-black":900,"extra-black":900,"ultra-bold":900,"heavy-black":900,fat:900,poster:900},tW=/(italic|oblique)$/i,nW={},xO=function(c,l,a){var h=nW[c];if(!h){Array.isArray(c)||(c=[c]);for(var d=400,f="normal",m=[],v=0,_=c.length;v<_;++v){var b=c[v].split(" "),T=b[b.length-1].toLowerCase();for(var x in"normal"==T||"italic"==T||"oblique"==T?(f=T,b.pop(),T=b[b.length-1].toLowerCase()):tW.test(T)&&(T=T.replace(tW,""),f=b[b.length-1].replace(T,"")),eW){var E=b.length>1?b[b.length-2].toLowerCase():"";if(T==x||T==x.replace("-","")||E+"-"+T==x){d=eW[x],b.pop(),E&&x.startsWith(E)&&b.pop();break}}"number"==typeof T&&(d=T);var D=b.join(" ").replace("Klokantech Noto Sans","Noto Sans");-1!==D.indexOf(" ")&&(D='"'+D+'"'),m.push(D)}h=nW[c]=[f,d,m]}return h[0]+" "+h[1]+" "+l+"px"+(a?"/"+a:"")+" "+h[2]},rW="https://api.mapbox.com";function EO(c){var l="mapbox://";return 0!==c.indexOf(l)?"":c.slice(l.length)}function Vx(c,l){var a=EO(c);if(!a)return decodeURI(new URL(c,location.href).href);var h="styles/";if(0!==a.indexOf(h))throw new Error("unexpected style url: "+c);var d=a.slice(h.length);return rW+"/styles/v1/"+d+"?&access_token="+l}function Bx(c,l,a,h){var d=new URL(c,h),f=EO(c);return f?"https://{a-d}.tiles.mapbox.com/v4/"+f+"/{z}/{x}/{y}.vector.pbf?access_token="+l:(l&&d.searchParams.set(a,l),decodeURI(d.href))}function MO(c){return c*Math.PI/180}var Zy=function(){for(var c=[],l=78271.51696402048;c.length<=24;l/=2)c.push(l);return c}();function iW(c,l){if(typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof OffscreenCanvas<"u")return new OffscreenCanvas(c,l);var a=document.createElement("canvas");return a.width=c,a.height=l,a}var eb={};function Ux(c,l,a){if(void 0===a&&(a={}),l in eb)return eb[l];var h=a.transformRequest&&a.transformRequest(l,c)||new Request(l);h.headers.get("Accept")||h.headers.set("Accept","application/json");var d=fetch(h).then(function(f){return delete eb[l],f.ok?f.json():Promise.reject(new Error("Error fetching source "+l))}).catch(function(f){return delete eb[l],Promise.reject(new Error("Error fetching source "+l))});return eb[l]=d,d}var sW={};var IO,XCe=Array(256).join("\u200a");function AO(c,l){if(l>=.05){for(var a="",h=c.split("\n"),d=XCe.slice(0,Math.round(l/.1)),f=0,m=h.length;f<m;++f)f>0&&(a+="\n"),a+=h[f].split("").join(d);return a}return c}function aW(){return IO||(IO=iW(1,1).getContext("2d")),IO}function im(c,l){return aW().measureText(c).width+(c.length-1)*l}var lW={};function RO(c,l,a,h){if(-1!==c.indexOf("\n")){for(var d=c.split("\n"),f=[],m=0,g=d.length;m<g;++m)f.push(RO(d[m],l,a,h));return f.join("\n")}var y=a+","+l+","+c+","+h,v=lW[y];if(!v){var _=c.split(" ");if(_.length>1){var S=aW();S.font=l;for(var T=S.measureText("M").width*a,x="",E=[],D=0,I=_.length;D<I;++D){var M=_[D],L=x+(x?" ":"")+M;im(L,h)<=T?x=L:(x&&E.push(x),x=M)}x&&E.push(x);for(var P=0,F=E.length;P<F&&F>1;++P){var V=E[P];if(im(V,h)<.35*T){var z=P>0?im(E[P-1],h):1/0,q=P<F-1?im(E[P+1],h):1/0;E.splice(P,1),F-=1,z<q?(E[P-1]+=" "+V,P-=1):E[P]=V+" "+E[P]}}for(var K=0,se=E.length-1;K<se;++K){var W=E[K],Q=E[K+1];if(im(W,h)>.7*T&&im(Q,h)<.6*T){var ie=W.split(" "),ae=ie.pop();im(ae,h)<.2*T&&(E[K]=ie.join(" "),E[K+1]=ae+" "+Q),se-=1}}v=E.join("\n")}else v=c;v=AO(v,h),lW[y]=v}return v}var Gx,qCe=/font-family: ?([^;]*);/,$Ce=/("|')/g;function YCe(c){if(!Gx){Gx={};for(var l=document.styleSheets,a=0,h=l.length;a<h;++a){var d=l[a];try{var f=d.rules||d.cssRules;if(f)for(var m=0,g=f.length;m<g;++m){var y=f[m];if(5==y.type){var v=y.cssText.match(qCe);Gx[v[1].replace($Ce,"")]=!0}}}catch{}}}return c in Gx}var PO={};function ZCe(c){var l=c.toString();if(l in PO)return PO[l];for(var a=[],h=0,d=c.length;h<d;++h){c[h]=c[h].replace("Arial Unicode MS","Arial");var m=xO(c[h],1);T9(m);var g=m.split(" ");a.push([g.slice(3).join(" ").replace(/"/g,""),g[1],g[0]])}for(var y=0,v=a.length;y<v;++y){var _=a[y],S=_[0];if(!YCe(S)&&100!==pu.get(_[2]+"\n"+_[1]+" \n"+S)){var b="https://fonts.googleapis.com/css?family="+S.replace(/ /g,"+")+":"+_[1]+_[2];if(!document.querySelector('link[href="'+b+'"]')){var T=document.createElement("link");T.href=b,T.rel="stylesheet",document.head.appendChild(T)}}}return PO[l]=c,c}var Hx,OO,KCe={Point:1,MultiPoint:1,LineString:2,MultiLineString:2,Polygon:3,MultiPolygon:3},QCe={center:[.5,.5],left:[0,.5],right:[1,.5],top:[.5,0],bottom:[.5,1],"top-left":[0,0],"top-right":[1,0],"bottom-left":[0,1],"bottom-right":[1,1]},LO={},zx={zoom:0};function Pn(c,l,a,h,d,f,m){var g=c.id;f||(f={},console.warn("No functionCache provided to getValue()")),f[g]||(f[g]={});var y=f[g];if(!y[a]){var v=(c[l]||LO)[a],_=qj[l+"_"+c.type][a];void 0===v&&(v=_.default);var S=function ACe(c){return Array.isArray(c)&&c.length>0&&"string"==typeof c[0]&&c[0]in vO}(v);if(!S&&Xj(v)&&(v=function Ewe(c,l){var a=c.stops;if(!a)return function Mwe(c,l){var a=["get",c.property];if(void 0===c.default)return"string"===l.type?["string",a]:a;if("enum"===l.type)return["match",a,Object.keys(l.values),a,c.default];var h=["color"===l.type?"to-color":l.type,a,WS(c.default)];return"array"===l.type&&h.splice(1,0,l.value,l.length||null),h}(c,l);var h=a&&"object"==typeof a[0][0],d=h||void 0!==c.property,f=h||!d;return a=a.map(function(m){return!d&&l.tokens&&"string"==typeof m[1]?[m[0],Rwe(m[1])]:[m[0],WS(m[1])]}),h?function Dwe(c,l,a){for(var h={},d={},f=[],m=0;m<a.length;m++){var g=a[m],y=g[0].zoom;void 0===h[y]&&(h[y]={zoom:y,type:c.type,property:c.property,default:c.default},d[y]=[],f.push(y)),d[y].push([g[0].value,g[1]])}if("exponential"===rO({},l)){for(var _=[eO(c),["linear"],["zoom"]],S=0,b=f;S<b.length;S+=1){var T=b[S];Hy(_,T,tO(h[T],l,d[T]),!1)}return _}for(var E=["step",["zoom"]],D=0,I=f;D<I.length;D+=1){var M=I[D];Hy(E,M,tO(h[M],l,d[M]),!0)}return nO(E),E}(c,l,a):f?function Iwe(c,l,a,h){void 0===h&&(h=["zoom"]);var f,d=rO(c,l),m=!1;if("interval"===d)f=["step",h],m=!0;else{if("exponential"!==d)throw new Error('Unknown zoom function type "'+d+'"');var g=void 0!==c.base?c.base:1;f=[eO(c),1===g?["linear"]:["exponential",g],h]}for(var y=0,v=a;y<v.length;y+=1){var _=v[y];Hy(f,_[0],_[1],m)}return nO(f),f}(c,l,a):tO(c,l,a)}(v,_),S=!0),S){var b=function(c,l){var a=ICe(c,l);if("error"===a.result)throw new Error(a.value.map(function(h){return h.key+": "+h.message}).join(", "));return a.value}(v,_);y[a]=b.evaluate.bind(b)}else"color"==_.type&&(v=Ur.parse(v)),y[a]=function(){return v}}return zx.zoom=h,y[a](zx,d,m)}function exe(c,l,a,h){return Pn(c,"layout","icon-allow-overlap",l,a,h)?Pn(c,"layout","icon-ignore-placement",l,a,h)?"none":"obstacle":"declutter"}function txe(c,l,a,h,d){return d||console.warn("No filterCache provided to evaluateFilter()"),c in d||(d[c]=OCe(l).filter),zx.zoom=h,d[c](zx,a)}function ff(c,l){if(c){if(0===c.a||0===l)return;var a=c.a;return l=void 0===l?1:l,0===a?"transparent":"rgba("+Math.round(255*c.r/a)+","+Math.round(255*c.g/a)+","+Math.round(255*c.b/a)+","+a*l+")"}return c}var nxe=/\{[^{}}]*\}/g;function NO(c,l){return c.replace(nxe,function(a){return l[a.slice(1,-1)]||""})}function dW(c,l,a,h,d){var f,m,g;return void 0===a&&(a=""),void 0===h&&(h={}),void 0===d&&(d=void 0),"string"==typeof h?(f=h,g={}):(f=h.styleUrl,g=h),d||(d=g.resolutions),!f&&"string"==typeof l&&!l.trim().startsWith("{")&&(f=l),f&&(f=f.startsWith("data:")?location.href:Vx(f,g.accessToken),g=function hW(c,l){return l.accessToken||(l=Object.assign({},l),new URL(c).searchParams.forEach(function(h,d){l.accessToken=h,l.accessTokenParam=d})),l}(f,g)),new Promise(function(y,v){(function DO(c,l){if("string"!=typeof c)return Promise.resolve(c);if(!c.trim().startsWith("{"))return Ux("Style",c=Vx(c,l.accessToken),l);try{var a=JSON.parse(c);return Promise.resolve(a)}catch(h){return Promise.reject(h)}})(l,g).then(function(_){if(8!=_.version)return v(new Error("glStyle version 8 required."));if(!(c instanceof bu||c instanceof Uy))return v(new Error("Can only apply to VectorLayer or VectorTileLayer"));var x,E,D,S=c instanceof Uy?"vector":"geojson";if(a?m=Array.isArray(a)?_.layers.find(function(F){return F.id===a[0]}).source:a:(m=Object.keys(_.sources).find(function(F){return _.sources[F].type===S}),a=m),!m)return v(new Error("No "+S+" source found in the glStyle."));function b(){if(c instanceof Uy)return function gW(c,l,a){return new Promise(function(h,d){(function oW(c,l,a){void 0===a&&(a={});var h=[l,JSON.stringify(c)].toString(),d=sW[h];if(!d||a.transformRequest){var f=c.url;if(f&&!c.tiles){var m=Bx(f,a.accessToken,a.accessTokenParam||"access_token",l||location.href);d=f.startsWith("mapbox://")?Promise.resolve(Object.assign({},c,{url:void 0,tiles:m})):Ux("Source",m,a).then(function(g){for(var y=0,v=g.tiles.length;y<v;++y){var _=g.tiles[y];if(a.transformRequest){var S=a.transformRequest(m,"Source");S&&(m=S.url)}var b=Bx(_,a.accessToken,a.accessTokenParam||"access_token",m);if(a.transformRequest){var T=a.transformRequest(b,"Tiles");T instanceof Request&&(b=decodeURI(T.url))}g.tiles[y]=b}return Promise.resolve(g)})}else c=Object.assign({},c,{tiles:c.tiles.map(function(g){return Bx(g,a.accessToken,a.accessTokenParam||"access_token",l||location.href)})}),d=Promise.resolve(Object.assign({},c));sW[h]=d}return d})(c,l,a).then(function(f){var m=new bwe({tileJSON:f}),g=m.getTileJSON(),y=m.getTileGrid(),v=function mW(c){var l=c.bounds;if(l){var a=V9([l[0],l[1]]),h=V9([l[2],l[3]]);return[a[0],a[1],h[0],h[1]]}}(g),_=g.minzoom||0,S=g.maxzoom||22,b={attributions:m.getAttributions(),format:new Cx,tileGrid:new kS({origin:y.getOrigin(0),extent:v||y.getExtent(),minZoom:_,resolutions:Zy.slice(0,S+1),tileSize:512})};Array.isArray(g.tiles)?b.urls=g.tiles:b.url=g.tiles,f.olSourceOptions&&Object.assign(b,f.olSourceOptions),h(new BS(b))}).catch(d)})}(_.sources[m],f,g).then(function(q){var K=c.getSource();if(K?q!==K&&(K.setTileUrlFunction(q.getTileUrlFunction()),K.format_||(K.format_=q.format_),K.getAttributions()||K.setAttributions(q.getAttributions()),K.getTileLoadFunction()===fj&&K.setTileLoadFunction(q.getTileLoadFunction()),bc(K.getProjection(),q.getProjection())&&(K.tileGrid=q.getTileGrid())):c.setSource(q),!isFinite(c.getMaxResolution())&&!isFinite(c.getMinZoom())){var se=c.getSource().getTileGrid();c.setMaxResolution(se.getResolution(se.getMinZoom()))}});var F=_.sources[m],V=c.getSource();(!V||V.get("mapbox-source")!==F)&&(V=function vW(c,l,a){var h=c.data,d={};if("string"==typeof h){var f=Bx(h,a.accessToken,a.accessTokenParam||"access_token",l||location.href);if(a.transformRequest){var m=a.transformRequest(f,"GeoJSON");m instanceof Request&&(f=encodeURI(m.url))}d.url=f}else d.features=yW.readFeatures(h,{featureProjection:xS()||"EPSG:3857"});var g=new hi(Object.assign({attributions:c.attribution,format:yW},d));return g.set("mapbox-source",c),g}(F,f,g));var z=c.getSource();return z?V!==z&&(z.getAttributions()||z.setAttributions(V.getAttributions()),z.format_||(z.format_=V.getFormat()),z.url_=V.getUrl()):c.setSource(V),Promise.resolve()}function I(){D||_.sprite&&!x?D?(c.setStyle(D),b().then(y).catch(v)):v(new Error("Something went wrong trying to apply style.")):(D=function rxe(c,l,a,h,d,f,m){if(void 0===h&&(h=Zy),void 0===d&&(d=void 0),void 0===f&&(f=void 0),void 0===m&&(m=void 0),"string"==typeof l&&(l=JSON.parse(l)),8!=l.version)throw new Error("glStyle version 8 required.");var g,y;if(f)if(typeof Image<"u"){var v=new Image;v.crossOrigin="anonymous",v.onload=function(){g=v,y=[v.width,v.height],c.changed(),v.onload=null},v.src=f}else if(typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope){var _=self;_.postMessage({action:"loadImage",src:f}),_.addEventListener("message",function(J){"imageLoaded"===J.data.action&&J.data.src===f&&(y=[(g=J.data.image).width,g.height])})}for(var M,S=function HCe(c){c=c.slice();for(var l=Object.create(null),a=0;a<c.length;a++)l[c[a].id]=c[a];for(var h=0;h<c.length;h++)"ref"in c[h]&&(c[h]=zCe(c[h],l[c[h].ref]));return c}(l.layers),b={},T=[],x={},E={},D={},I={},L=0,P=S.length;L<P;++L){var F=S[L],V=F.id;if("string"==typeof a&&F.source==a||-1!==a.indexOf(V)){var z=F["source-layer"];if(M){if(F.source!==M)throw new Error('Layer "'+V+'" does not use source "'+M)}else{var q=l.sources[M=F.source];if(!q)throw new Error('Source "'+M+'" is not defined');var K=q.type;if("vector"!==K&&"geojson"!==K)throw new Error('Source "'+M+'" is not of type "vector" or "geojson", but "'+K+'"')}var se=b[z];se||(b[z]=se=[]),se.push({layer:F,index:L}),T.push(V)}}var W=new ws,Q=new Si,ie=[],ae=function(he,J){var ce=he.getProperties(),be=b[ce.layer];if(be){var we=h.indexOf(J);-1==we&&(we=function WCe(c,l){for(var a=0,h=l.length;a<h;++a)if(l[a]<c&&a+1<h){var f=l[a]/l[a+1];return a+Math.log(l[a]/c)/Math.log(f)}return h-1}(J,h));for(var Ce=KCe[he.getGeometry().getType()],Te={properties:ce,type:Ce},fe=c.get("mapbox-featurestate")[he.getId()],$e=-1,De=0,en=be.length;De<en;++De){var ut=be[De],Fe=ut.layer,an=Fe.layout||LO,Wt=Fe.paint||LO;if(!("none"===an.visibility||"minzoom"in Fe&&we<Fe.minzoom||"maxzoom"in Fe&&we>=Fe.maxzoom)){var Qe=Fe.filter;if(!Qe||txe(Fe.id,Qe,Te,we,I)){var dt=void 0,at=void 0,Rt=void 0,bt=void 0,Jt=void 0,Ye=void 0,Cn=ut.index;if(3==Ce&&("fill"==Fe.type||"fill-extrusion"==Fe.type))if(at=Pn(Fe,"paint",Fe.type+"-opacity",we,Te,D,fe),Fe.type+"-pattern"in Wt){var ar=Pn(Fe,"paint",Fe.type+"-pattern",we,Te,D,fe);if(ar){var lr="string"==typeof ar?NO(ar,ce):ar.toString();if(g&&d&&d[lr]){++$e,(!(Ye=ie[$e])||!Ye.getFill()||Ye.getStroke()||Ye.getText())&&(Ye=new ui({fill:new Si}),ie[$e]=Ye),Rt=Ye.getFill(),Ye.setZIndex(Cn);var pe=lr+"."+at,ne=E[pe];if(!ne){var ze=d[lr],Ct=iW(ze.width,ze.height),$t=Ct.getContext("2d");$t.globalAlpha=at,$t.drawImage(g,ze.x,ze.y,ze.width,ze.height,0,0,ze.width,ze.height),ne=$t.createPattern(Ct,"repeat"),E[pe]=ne}Rt.setColor(ne)}}}else dt=ff(Pn(Fe,"paint",Fe.type+"-color",we,Te,D,fe),at),Fe.type+"-outline-color"in Wt&&(Jt=ff(Pn(Fe,"paint",Fe.type+"-outline-color",we,Te,D,fe),at)),Jt||(Jt=dt),(dt||Jt)&&(++$e,(!(Ye=ie[$e])||dt&&!Ye.getFill()||!dt&&Ye.getFill()||Jt&&!Ye.getStroke()||!Jt&&Ye.getStroke()||Ye.getText())&&(Ye=new ui({fill:dt?new Si:void 0,stroke:Jt?new ws:void 0}),ie[$e]=Ye),dt&&(Rt=Ye.getFill()).setColor(dt),Jt&&((bt=Ye.getStroke()).setColor(Jt),bt.setWidth(.5)),Ye.setZIndex(Cn));if(1!=Ce&&"line"==Fe.type){dt=!("line-pattern"in Wt)&&"line-color"in Wt?ff(Pn(Fe,"paint","line-color",we,Te,D,fe),Pn(Fe,"paint","line-opacity",we,Te,D,fe)):void 0;var Xe=Pn(Fe,"paint","line-width",we,Te,D,fe);dt&&Xe>0&&(++$e,(!(Ye=ie[$e])||!Ye.getStroke()||Ye.getFill()||Ye.getText())&&(Ye=new ui({stroke:new ws}),ie[$e]=Ye),(bt=Ye.getStroke()).setLineCap(Pn(Fe,"layout","line-cap",we,Te,D,fe)),bt.setLineJoin(Pn(Fe,"layout","line-join",we,Te,D,fe)),bt.setMiterLimit(Pn(Fe,"layout","line-miter-limit",we,Te,D,fe)),bt.setColor(dt),bt.setWidth(Xe),bt.setLineDash(Wt["line-dasharray"]?Pn(Fe,"paint","line-dasharray",we,Te,D,fe).map(function(Ho){return Ho*Xe}):null),Ye.setZIndex(Cn))}var qt=!1,me=null,je=0,lt=void 0,yt=void 0,_e=void 0;if((1==Ce||2==Ce)&&"icon-image"in an){var Tt=Pn(Fe,"layout","icon-image",we,Te,D,fe);if(Tt){lt="string"==typeof Tt?NO(Tt,ce):Tt.toString();var It=void 0;if(g&&d&&d[lt]){var sn=Pn(Fe,"layout","icon-rotation-alignment",we,Te,D,fe);if(2==Ce){var He=he.getGeometry();if(He.getFlatMidpoint||He.getFlatMidpoints){var Yt=He.getExtent();if(Math.sqrt(Math.max(Math.pow((Yt[2]-Yt[0])/J,2),Math.pow((Yt[3]-Yt[1])/J,2)))>150){var kr="MultiLineString"===He.getType()?He.getFlatMidpoints():He.getFlatMidpoint();if(OO||(OO=new q2("Point",Hx=[NaN,NaN],[],{},null)),It=OO,Hx[0]=kr[0],Hx[1]=kr[1],"line"===Pn(Fe,"layout","symbol-placement",we,Te,D,fe)&&"map"===sn)for(var Qr=He.getStride(),js=He.getFlatCoordinates(),Ps=0,fd=js.length-Qr;Ps<fd;Ps+=Qr){var pd=js[Ps],Sl=js[Ps+1],Ql=js[Ps+Qr],Kc=js[Ps+Qr+1],$_=Math.min(pd,Ql),Y_=Math.min(Sl,Kc),oe=Math.max(pd,Ql),Re=Math.max(Sl,Kc);if(kr[0]>=$_&&kr[0]<=oe&&kr[1]>=Y_&&kr[1]<=Re){je=Math.atan2(Sl-Kc,Ql-pd);break}}}}}if(2!==Ce||It){var Ue=Pn(Fe,"layout","icon-size",we,Te,D,fe),Pe=void 0!==Wt["icon-color"]?Pn(Fe,"paint","icon-color",we,Te,D,fe):null;if(!Pe||0!==Pe.a){var Ze=lt+"."+Ue;if(null!==Pe&&(Ze+="."+Pe),!(yt=x[Ze])){var dn=d[lt],Dn=exe(Fe,we,Te,D);yt=new vx({color:Pe?[255*Pe.r,255*Pe.g,255*Pe.b,Pe.a]:void 0,img:g,imgSize:y,size:[dn.width,dn.height],offset:[dn.x,dn.y],rotateWithView:"map"===sn,scale:Ue/dn.pixelRatio,displacement:"icon-offset"in an?Pn(Fe,"layout","icon-offset",we,Te,D,fe).map(function(Ho){return-Ho*dn.pixelRatio}):void 0,declutterMode:Dn}),x[Ze]=yt}}yt&&(++$e,(!(Ye=ie[$e])||!Ye.getImage()||Ye.getFill()||Ye.getStroke())&&(Ye=new ui,ie[$e]=Ye),Ye.setGeometry(It),yt.setRotation(je+MO(Pn(Fe,"layout","icon-rotate",we,Te,D,fe))),yt.setOpacity(Pn(Fe,"paint","icon-opacity",we,Te,D,fe)),yt.setAnchor(QCe[Pn(Fe,"layout","icon-anchor",we,Te,D,fe)]),Ye.setImage(yt),me=Ye.getText(),Ye.setText(void 0),Ye.setZIndex(Cn),qt=!0,_e=!1)}else _e=!0}}}if(1==Ce&&"circle"===Fe.type){++$e,(!(Ye=ie[$e])||!Ye.getImage()||Ye.getFill()||Ye.getStroke())&&(Ye=new ui,ie[$e]=Ye);var fn="circle-radius"in Wt?Pn(Fe,"paint","circle-radius",we,Te,D,fe):5,pn=ff(Pn(Fe,"paint","circle-stroke-color",we,Te,D,fe),Pn(Fe,"paint","circle-stroke-opacity",we,Te,D,fe)),Cr=ff(Pn(Fe,"paint","circle-color",we,Te,D,fe),Pn(Fe,"paint","circle-opacity",we,Te,D,fe)),yr=Pn(Fe,"paint","circle-stroke-width",we,Te,D,fe),_r=fn+"."+pn+"."+Cr+"."+yr;(yt=x[_r])||(yt=new Ny({radius:fn,stroke:pn&&yr>0?new ws({width:yr,color:pn}):void 0,fill:Cr?new Si({color:Cr}):void 0,declutterMode:"none"}),x[_r]=yt),Ye.setImage(yt),me=Ye.getText(),Ye.setText(void 0),Ye.setGeometry(void 0),Ye.setZIndex(Cn),qt=!0}var cr=void 0,bl=void 0,Jl=void 0,ur=void 0,zo=void 0,qi=void 0;if("text-field"in an){ur=Math.round(Pn(Fe,"layout","text-size",we,Te,D,fe));var ka=Pn(Fe,"layout","text-font",we,Te,D,fe);Jl=Pn(Fe,"layout","text-line-height",we,Te,D,fe),(bl=xO(m?m(ka):ka,ur,Jl)).includes("sans-serif")||(bl+=",sans-serif"),zo=Pn(Fe,"layout","text-letter-spacing",we,Te,D,fe),qi=Pn(Fe,"layout","text-max-width",we,Te,D,fe);var Qc=Pn(Fe,"layout","text-field",we,Te,D,fe);cr="object"==typeof Qc&&Qc.sections?1===Qc.sections.length?Qc.toString():Qc.sections.reduce(function(Ho,fp,eSt){var Gie=fp.fontStack?fp.fontStack.split(","):ka,qB=xO(m?m(Gie):Gie,ur*(fp.scale||1),Jl),Z_=fp.text;if("\n"===Z_)return Ho.push("\n",""),Ho;if(2!=Ce){for(var ZA=0,ptt=(Z_=RO(Z_,qB,qi,zo).split("\n")).length;ZA<ptt;++ZA)ZA>0&&Ho.push("\n",""),Ho.push(Z_[ZA],qB);return Ho}Ho.push(AO(Z_,zo),qB)},[]):NO(Qc,ce).trim(),at=Pn(Fe,"paint","text-opacity",we,Te,D,fe)}if(cr&&at&&!_e){qt||(++$e,(!(Ye=ie[$e])||!Ye.getText()||Ye.getFill()||Ye.getStroke())&&(Ye=new ui,ie[$e]=Ye),Ye.setImage(void 0),Ye.setGeometry(void 0)),Ye.getText()||Ye.setText(me||new Zp({padding:[2,2,2,2]})),me=Ye.getText();var Tl=an["text-transform"];"uppercase"==Tl?cr=Array.isArray(cr)?cr.map(function(Ho,fp){return fp%2?Ho:Ho.toUpperCase()}):cr.toUpperCase():"lowercase"==Tl&&(cr=Array.isArray(cr)?cr.map(function(Ho,fp){return fp%2?Ho:Ho.toLowerCase()}):cr.toLowerCase());var ec=Array.isArray(cr)?cr:2==Ce?AO(cr,zo):RO(cr,bl,qi,zo);me.setText(ec),me.setFont(bl),me.setRotation(MO(Pn(Fe,"layout","text-rotate",we,Te,D,fe)));var ms=Pn(Fe,"layout","text-anchor",we,Te,D,fe),md=qt||1==Ce?"point":Pn(Fe,"layout","symbol-placement",we,Te,D,fe);me.setPlacement(md),me.setOverflow("point"===md);var Ws=Pn(Fe,"paint","text-halo-width",we,Te,D,fe),kie=Pn(Fe,"layout","text-offset",we,Te,D,fe),Vie=Pn(Fe,"paint","text-translate",we,Te,D,fe),HB=0,jB=0;if("point"==md){var WB="center";-1!==ms.indexOf("left")?(WB="left",jB=Ws):-1!==ms.indexOf("right")&&(WB="right",jB=-Ws),me.setTextAlign(WB);var ftt=Pn(Fe,"layout","text-rotation-alignment",we,Te,D,fe);me.setRotateWithView("map"==ftt)}else me.setMaxAngle(MO(Pn(Fe,"layout","text-max-angle",we,Te,D,fe))*cr.length/ec.length),me.setTextAlign(),me.setRotateWithView(!1);var XB="middle";0==ms.indexOf("bottom")?(XB="bottom",HB=-Ws-.5*(Jl-1)*ur):0==ms.indexOf("top")&&(XB="top",HB=Ws+.5*(Jl-1)*ur),me.setTextBaseline(XB),me.setOffsetX(kie[0]*ur+jB+Vie[0]),me.setOffsetY(kie[1]*ur+HB+Vie[1]),Q.setColor(ff(Pn(Fe,"paint","text-color",we,Te,D,fe),at)),me.setFill(Q);var Bie=ff(Pn(Fe,"paint","text-halo-color",we,Te,D,fe),at);if(Bie){W.setColor(Bie);var Uie=.5*ur;W.setWidth((Ws*=2)<=Uie?Ws:Uie),me.setStroke(W)}else me.setStroke(void 0);var L1=Pn(Fe,"layout","text-padding",we,Te,D,fe),O1=me.getPadding();L1!==O1[0]&&(O1[0]=L1,O1[1]=L1,O1[2]=L1,O1[3]=L1),Ye.setZIndex(Cn)}}}}if($e>-1)return ie.length=$e+1,ie}};return c.setStyle(ae),c.set("mapbox-source",M),c.set("mapbox-layers",T),c.set("mapbox-featurestate",{}),ae}(c,_,a,d,x,E,ZCe),c.getStyle()?b().then(y).catch(v):v(new Error("Nothing to show for source ["+m+"]")))}if(_.sprite){var M=new URL(function jCe(c,l,a){var h=EO(c);if(!h)return decodeURI(new URL(c,a).href);var d="sprites/";if(0!==h.indexOf(d))throw new Error("unexpected sprites url: "+c);var f=h.slice(d.length);return rW+"/styles/v1/"+f+"/sprite?access_token="+l}(_.sprite,g.accessToken,f||location.href)),L=.5==(window.devicePixelRatio>=1.5?.5:1)?"@2x":"",P=M.origin+M.pathname+L+".json"+M.search;new Promise(function(F,V){Ux("Sprite",P,g).then(F).catch(function(z){Ux("Sprite",P=M.origin+M.pathname+".json"+M.search,g).then(F).catch(V)})}).then(function(F){if(void 0===F&&v(new Error("No sprites found.")),x=F,E=M.origin+M.pathname+L+".png"+M.search,g.transformRequest){var V=g.transformRequest(E,"SpriteImage");V instanceof Request&&(E=encodeURI(V.url))}I()}).catch(function(F){v(new Error("Sprites cannot be loaded: "+P+": "+F.message))})}else I()}).catch(v)})}var yW=new Ma;var lxe=function(){var c=function(l,a){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,d){h.__proto__=d}||function(h,d){for(var f in d)Object.prototype.hasOwnProperty.call(d,f)&&(h[f]=d[f])})(l,a)};return function(l,a){if("function"!=typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");function h(){this.constructor=l}c(l,a),l.prototype=null===a?Object.create(a):(h.prototype=a.prototype,new h)}}(),cxe=function(c){function l(a){var h=a||{},d=void 0===h.imageSmoothing||h.imageSmoothing;void 0!==h.interpolate&&(d=h.interpolate);var f=void 0!==h.projection?h.projection:"EPSG:3857",m=void 0!==h.tileGrid?h.tileGrid:Sx({extent:VS(f),maxResolution:h.maxResolution,maxZoom:h.maxZoom,minZoom:h.minZoom,tileSize:h.tileSize});return c.call(this,{attributions:h.attributions,cacheSize:h.cacheSize,crossOrigin:h.crossOrigin,interpolate:d,opaque:h.opaque,projection:f,reprojectionErrorThreshold:h.reprojectionErrorThreshold,tileGrid:m,tileLoadFunction:h.tileLoadFunction,tilePixelRatio:h.tilePixelRatio,tileUrlFunction:h.tileUrlFunction,url:h.url,urls:h.urls,wrapX:void 0===h.wrapX||h.wrapX,transition:h.transition,attributionsCollapsible:h.attributionsCollapsible,zDirection:h.zDirection})||this}return lxe(l,c),l}(HS);const wW=cxe;var pf="1.3.0";function Ky(c,l){var a=[];Object.keys(l).forEach(function(d){null!=l[d]&&a.push(d+"="+encodeURIComponent(l[d]))});var h=a.join("&");return(c=-1===(c=c.replace(/[?&]$/,"")).indexOf("?")?c+"?":c+"&")+h}var uxe=function(){var c=function(l,a){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,d){h.__proto__=d}||function(h,d){for(var f in d)Object.prototype.hasOwnProperty.call(d,f)&&(h[f]=d[f])})(l,a)};return function(l,a){if("function"!=typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");function h(){this.constructor=l}c(l,a),l.prototype=null===a?Object.create(a):(h.prototype=a.prototype,new h)}}(),hxe=function(c){function l(a){var h=this,d=a||{},f=void 0===d.imageSmoothing||d.imageSmoothing;void 0!==d.interpolate&&(f=d.interpolate);var m=d.params||{};return(h=c.call(this,{attributions:d.attributions,attributionsCollapsible:d.attributionsCollapsible,cacheSize:d.cacheSize,crossOrigin:d.crossOrigin,interpolate:f,opaque:!(!("TRANSPARENT"in m)||m.TRANSPARENT),projection:d.projection,reprojectionErrorThreshold:d.reprojectionErrorThreshold,tileClass:d.tileClass,tileGrid:d.tileGrid,tileLoadFunction:d.tileLoadFunction,url:d.url,urls:d.urls,wrapX:void 0===d.wrapX||d.wrapX,transition:d.transition,zDirection:d.zDirection})||this).gutter_=void 0!==d.gutter?d.gutter:0,h.params_=m,h.v13_=!0,h.serverType_=d.serverType,h.hidpi_=void 0===d.hidpi||d.hidpi,h.tmpExtent_=[1/0,1/0,-1/0,-1/0],h.updateV13_(),h.setKey(h.getKeyForParams_()),h}return uxe(l,c),l.prototype.getFeatureInfoUrl=function(a,h,d,f){var m=cn(d),g=this.getProjection(),y=this.getTileGrid();y||(y=this.getTileGridForProjection(m));var v=y.getZForResolution(h,this.zDirection),_=y.getTileCoordForCoordAndZ(a,v);if(!(y.getResolutions().length<=_[0])){var S=y.getResolution(_[0]),b=y.getTileCoordExtent(_,this.tmpExtent_),T=uo(y.getTileSize(_[0]),this.tmpSize),x=this.gutter_;0!==x&&(T=s7(T,x,this.tmpSize),b=$a(b,S*x,b)),g&&g!==m&&(S=PS(g,m,a,S),b=bh(b,m,g),a=Ka(a,m,g));var E={SERVICE:"WMS",VERSION:pf,REQUEST:"GetFeatureInfo",FORMAT:"image/png",TRANSPARENT:!0,QUERY_LAYERS:this.params_.LAYERS};$n(E,this.params_,f);var D=Math.floor((a[0]-b[0])/S),I=Math.floor((b[3]-a[1])/S);return E[this.v13_?"I":"X"]=D,E[this.v13_?"J":"Y"]=I,this.getRequestUrl_(_,T,b,1,g||m,E)}},l.prototype.getLegendUrl=function(a,h){if(void 0!==this.urls[0]){var d={SERVICE:"WMS",VERSION:pf,REQUEST:"GetLegendGraphic",FORMAT:"image/png"};if(void 0===h||void 0===h.LAYER){var f=this.params_.LAYERS;if(Array.isArray(f)&&1!==f.length)return;d.LAYER=f}if(void 0!==a){var g=this.getProjection()?this.getProjection().getMetersPerUnit():1;d.SCALE=a*g/28e-5}return $n(d,h),Ky(this.urls[0],d)}},l.prototype.getGutter=function(){return this.gutter_},l.prototype.getParams=function(){return this.params_},l.prototype.getRequestUrl_=function(a,h,d,f,m,g){var y=this.urls;if(y){if(g.WIDTH=h[0],g.HEIGHT=h[1],g[this.v13_?"CRS":"SRS"]=m.getCode(),"STYLES"in this.params_||(g.STYLES=""),1!=f)switch(this.serverType_){case"geoserver":var v=90*f+.5|0;"FORMAT_OPTIONS"in g?g.FORMAT_OPTIONS+=";dpi:"+v:g.FORMAT_OPTIONS="dpi:"+v;break;case"mapserver":g.MAP_RESOLUTION=90*f;break;case"carmentaserver":case"qgis":g.DPI=90*f;break;default:bn(!1,52)}var _=m.getAxisOrientation(),S=d;if(this.v13_&&"ne"==_.substr(0,2)){var b=void 0;b=d[0],S[0]=d[1],S[1]=b,b=d[2],S[2]=d[3],S[3]=b}return g.BBOX=S.join(","),Ky(1==y.length?y[0]:y[Vd(ej(a),y.length)],g)}},l.prototype.getTilePixelRatio=function(a){return this.hidpi_&&void 0!==this.serverType_?a:1},l.prototype.getKeyForParams_=function(){var a=0,h=[];for(var d in this.params_)h[a++]=d+"-"+this.params_[d];return h.join("/")},l.prototype.updateParams=function(a){$n(this.params_,a),this.updateV13_(),this.setKey(this.getKeyForParams_())},l.prototype.updateV13_=function(){this.v13_=u9(this.params_.VERSION||pf,"1.3")>=0},l.prototype.tileUrlFunction=function(a,h,d){var f=this.getTileGrid();if(f||(f=this.getTileGridForProjection(d)),!(f.getResolutions().length<=a[0])){1!=h&&(!this.hidpi_||void 0===this.serverType_)&&(h=1);var m=f.getResolution(a[0]),g=f.getTileCoordExtent(a,this.tmpExtent_),y=uo(f.getTileSize(a[0]),this.tmpSize),v=this.gutter_;0!==v&&(y=s7(y,v,this.tmpSize),g=$a(g,m*v,g)),1!=h&&(y=a7(y,h,this.tmpSize));var _={SERVICE:"WMS",VERSION:pf,REQUEST:"GetMap",FORMAT:"image/png",TRANSPARENT:!0};return $n(_,this.params_),this.getRequestUrl_(a,y,g,h,d,_)}},l}(HS);const tb=hxe;var dxe=function(){var c=function(l,a){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,d){h.__proto__=d}||function(h,d){for(var f in d)Object.prototype.hasOwnProperty.call(d,f)&&(h[f]=d[f])})(l,a)};return function(l,a){if("function"!=typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");function h(){this.constructor=l}c(l,a),l.prototype=null===a?Object.create(a):(h.prototype=a.prototype,new h)}}(),fxe=function(c){function l(a,h,d,f,m,g,y){var v=this,_=a.getExtent(),S=h.getExtent(),b=S?mc(d,S):d,x=PS(a,h,Jo(b),f),D=new L7(a,h,b,_,.5*x,f),M=g(D.calculateSourceExtent(),x,m),L=M?0:4,P=M?M.getPixelRatio():1;return(v=c.call(this,d,f,P,L)||this).targetProj_=h,v.maxSourceExtent_=_,v.triangulation_=D,v.targetResolution_=f,v.targetExtent_=d,v.sourceImage_=M,v.sourcePixelRatio_=P,v.interpolate_=y,v.canvas_=null,v.sourceListenerKey_=null,v}return dxe(l,c),l.prototype.disposeInternal=function(){1==this.state&&this.unlistenSource_(),c.prototype.disposeInternal.call(this)},l.prototype.getImage=function(){return this.canvas_},l.prototype.getProjection=function(){return this.targetProj_},l.prototype.reproject_=function(){var a=this.sourceImage_.getState();if(2==a){var h=fr(this.targetExtent_)/this.targetResolution_,d=Ei(this.targetExtent_)/this.targetResolution_;this.canvas_=N7(h,d,this.sourcePixelRatio_,this.sourceImage_.getResolution(),0,this.targetResolution_,this.targetExtent_,this.triangulation_,[{extent:this.sourceImage_.getExtent(),image:this.sourceImage_.getImage()}],0,void 0,this.interpolate_)}this.state=a,this.changed()},l.prototype.load=function(){if(0==this.state){this.state=1,this.changed();var a=this.sourceImage_.getState();2==a||3==a?this.reproject_():(this.sourceListenerKey_=zn(this.sourceImage_,"change",function(h){var d=this.sourceImage_.getState();(2==d||3==d)&&(this.unlistenSource_(),this.reproject_())},this),this.sourceImage_.load())}},l.prototype.unlistenSource_=function(){ri(this.sourceListenerKey_),this.sourceListenerKey_=null},l}(P2);const pxe=fxe;var CW=function(){var c=function(l,a){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,d){h.__proto__=d}||function(h,d){for(var f in d)Object.prototype.hasOwnProperty.call(d,f)&&(h[f]=d[f])})(l,a)};return function(l,a){if("function"!=typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");function h(){this.constructor=l}c(l,a),l.prototype=null===a?Object.create(a):(h.prototype=a.prototype,new h)}}(),mxe=function(c){function l(a,h){var d=c.call(this,a)||this;return d.image=h,d}return CW(l,c),l}(gc),gxe=function(c){function l(a){var h=this,d=void 0===a.imageSmoothing||a.imageSmoothing;return void 0!==a.interpolate&&(d=a.interpolate),(h=c.call(this,{attributions:a.attributions,projection:a.projection,state:a.state,interpolate:d})||this).resolutions_=void 0!==a.resolutions?a.resolutions:null,h.reprojectedImage_=null,h.reprojectedRevision_=0,h}return CW(l,c),l.prototype.getResolutions=function(){return this.resolutions_},l.prototype.findNearestResolution=function(a){if(this.resolutions_){var h=LC(this.resolutions_,a,0);a=this.resolutions_[h]}return a},l.prototype.getImage=function(a,h,d,f){var m=this.getProjection();if(!m||!f||bc(m,f))return m&&(f=m),this.getImageInternal(a,h,d,f);if(this.reprojectedImage_){if(this.reprojectedRevision_==this.getRevision()&&bc(this.reprojectedImage_.getProjection(),f)&&this.reprojectedImage_.getResolution()==h&&Ol(this.reprojectedImage_.getExtent(),a))return this.reprojectedImage_;this.reprojectedImage_.dispose(),this.reprojectedImage_=null}return this.reprojectedImage_=new pxe(m,f,a,h,d,function(g,y,v){return this.getImageInternal(g,y,v,m)}.bind(this),this.getInterpolate()),this.reprojectedRevision_=this.getRevision(),this.reprojectedImage_},l.prototype.getImageInternal=function(a,h,d,f){return _n()},l.prototype.handleImageChange=function(a){var d,h=a.target;switch(h.getState()){case 1:this.loading=!0,d="imageloadstart";break;case 2:this.loading=!1,d="imageloadend";break;case 3:this.loading=!1,d="imageloaderror";break;default:return}this.hasListener(d)&&this.dispatchEvent(new mxe(d,h))},l}(FS);function xW(c,l){c.getImage().src=l}const Qy=gxe;var yxe=function(){var c=function(l,a){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,d){h.__proto__=d}||function(h,d){for(var f in d)Object.prototype.hasOwnProperty.call(d,f)&&(h[f]=d[f])})(l,a)};return function(l,a){if("function"!=typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");function h(){this.constructor=l}c(l,a),l.prototype=null===a?Object.create(a):(h.prototype=a.prototype,new h)}}(),EW=[101,101],vxe=function(c){function l(a){var h=this,d=a||{},f=void 0===d.imageSmoothing||d.imageSmoothing;return void 0!==d.interpolate&&(f=d.interpolate),(h=c.call(this,{attributions:d.attributions,interpolate:f,projection:d.projection,resolutions:d.resolutions})||this).crossOrigin_=void 0!==d.crossOrigin?d.crossOrigin:null,h.url_=d.url,h.imageLoadFunction_=void 0!==d.imageLoadFunction?d.imageLoadFunction:xW,h.params_=d.params||{},h.v13_=!0,h.updateV13_(),h.serverType_=d.serverType,h.hidpi_=void 0===d.hidpi||d.hidpi,h.image_=null,h.imageSize_=[0,0],h.renderedRevision_=0,h.ratio_=void 0!==d.ratio?d.ratio:1.5,h}return yxe(l,c),l.prototype.getFeatureInfoUrl=function(a,h,d,f){if(void 0!==this.url_){var m=cn(d),g=this.getProjection();g&&g!==m&&(h=PS(g,m,a,h),a=Ka(a,m,g));var y=wy(a,h,0,EW),v={SERVICE:"WMS",VERSION:pf,REQUEST:"GetFeatureInfo",FORMAT:"image/png",TRANSPARENT:!0,QUERY_LAYERS:this.params_.LAYERS};$n(v,this.params_,f);var _=xy((a[0]-y[0])/h,4),S=xy((y[3]-a[1])/h,4);return v[this.v13_?"I":"X"]=_,v[this.v13_?"J":"Y"]=S,this.getRequestUrl_(y,EW,1,g||m,v)}},l.prototype.getLegendUrl=function(a,h){if(void 0!==this.url_){var d={SERVICE:"WMS",VERSION:pf,REQUEST:"GetLegendGraphic",FORMAT:"image/png"};if(void 0===h||void 0===h.LAYER){var f=this.params_.LAYERS;if(Array.isArray(f)&&1!==f.length)return;d.LAYER=f}if(void 0!==a){var g=this.getProjection()?this.getProjection().getMetersPerUnit():1;d.SCALE=a*g/28e-5}return $n(d,h),Ky(this.url_,d)}},l.prototype.getParams=function(){return this.params_},l.prototype.getImageInternal=function(a,h,d,f){if(void 0===this.url_)return null;h=this.findNearestResolution(h),1!=d&&(!this.hidpi_||void 0===this.serverType_)&&(d=1);var m=h/d,g=Jo(a),_=wy(g,m,0,[Bd(fr(a)/m,4),Bd(Ei(a)/m,4)]),T=wy(g,m,0,[Bd(this.ratio_*fr(a)/m,4),Bd(this.ratio_*Ei(a)/m,4)]),x=this.image_;if(x&&this.renderedRevision_==this.getRevision()&&x.getResolution()==h&&x.getPixelRatio()==d&&xa(x.getExtent(),_))return x;var E={SERVICE:"WMS",VERSION:pf,REQUEST:"GetMap",FORMAT:"image/png",TRANSPARENT:!0};$n(E,this.params_),this.imageSize_[0]=ZH(fr(T)/m,4),this.imageSize_[1]=ZH(Ei(T)/m,4);var D=this.getRequestUrl_(T,this.imageSize_,d,f,E);return this.image_=new I7(T,h,d,D,this.crossOrigin_,this.imageLoadFunction_),this.renderedRevision_=this.getRevision(),this.image_.addEventListener("change",this.handleImageChange.bind(this)),this.image_},l.prototype.getImageLoadFunction=function(){return this.imageLoadFunction_},l.prototype.getRequestUrl_=function(a,h,d,f,m){if(bn(void 0!==this.url_,9),m[this.v13_?"CRS":"SRS"]=f.getCode(),"STYLES"in this.params_||(m.STYLES=""),1!=d)switch(this.serverType_){case"geoserver":var g=90*d+.5|0;"FORMAT_OPTIONS"in m?m.FORMAT_OPTIONS+=";dpi:"+g:m.FORMAT_OPTIONS="dpi:"+g;break;case"mapserver":m.MAP_RESOLUTION=90*d;break;case"carmentaserver":case"qgis":m.DPI=90*d;break;default:bn(!1,8)}m.WIDTH=h[0],m.HEIGHT=h[1];var v,y=f.getAxisOrientation();return v=this.v13_&&"ne"==y.substr(0,2)?[a[1],a[0],a[3],a[2]]:a,m.BBOX=v.join(","),Ky(this.url_,m)},l.prototype.getUrl=function(){return this.url_},l.prototype.setImageLoadFunction=function(a){this.image_=null,this.imageLoadFunction_=a,this.changed()},l.prototype.setUrl=function(a){a!=this.url_&&(this.url_=a,this.image_=null,this.changed())},l.prototype.updateParams=function(a){$n(this.params_,a),this.updateV13_(),this.image_=null,this.changed()},l.prototype.updateV13_=function(){this.v13_=u9(this.params_.VERSION||pf,"1.3")>=0},l}(Qy);const VO=vxe;var _xe=function(){var c=function(l,a){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,d){h.__proto__=d}||function(h,d){for(var f in d)Object.prototype.hasOwnProperty.call(d,f)&&(h[f]=d[f])})(l,a)};return function(l,a){if("function"!=typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");function h(){this.constructor=l}c(l,a),l.prototype=null===a?Object.create(a):(h.prototype=a.prototype,new h)}}(),Sxe=function(c){function l(a){var h=this,d=void 0===a.imageSmoothing||a.imageSmoothing;void 0!==a.interpolate&&(d=a.interpolate);var f=void 0!==a.requestEncoding?a.requestEncoding:"KVP",m=a.tileGrid,g=a.urls;return void 0===g&&void 0!==a.url&&(g=aj(a.url)),(h=c.call(this,{attributions:a.attributions,attributionsCollapsible:a.attributionsCollapsible,cacheSize:a.cacheSize,crossOrigin:a.crossOrigin,interpolate:d,projection:a.projection,reprojectionErrorThreshold:a.reprojectionErrorThreshold,tileClass:a.tileClass,tileGrid:m,tileLoadFunction:a.tileLoadFunction,tilePixelRatio:a.tilePixelRatio,urls:g,wrapX:void 0!==a.wrapX&&a.wrapX,transition:a.transition,zDirection:a.zDirection})||this).version_=void 0!==a.version?a.version:"1.0.0",h.format_=void 0!==a.format?a.format:"image/jpeg",h.dimensions_=void 0!==a.dimensions?a.dimensions:{},h.layer_=a.layer,h.matrixSet_=a.matrixSet,h.style_=a.style,h.requestEncoding_=f,h.setKey(h.getKeyForDimensions_()),g&&g.length>0&&(h.tileUrlFunction=W2(g.map(h.createFromWMTSTemplate.bind(h)))),h}return _xe(l,c),l.prototype.setUrls=function(a){this.urls=a;var h=a.join("\n");this.setTileUrlFunction(W2(a.map(this.createFromWMTSTemplate.bind(this))),h)},l.prototype.getDimensions=function(){return this.dimensions_},l.prototype.getFormat=function(){return this.format_},l.prototype.getLayer=function(){return this.layer_},l.prototype.getMatrixSet=function(){return this.matrixSet_},l.prototype.getRequestEncoding=function(){return this.requestEncoding_},l.prototype.getStyle=function(){return this.style_},l.prototype.getVersion=function(){return this.version_},l.prototype.getKeyForDimensions_=function(){var a=0,h=[];for(var d in this.dimensions_)h[a++]=d+"-"+this.dimensions_[d];return h.join("/")},l.prototype.updateDimensions=function(a){$n(this.dimensions_,a),this.setKey(this.getKeyForDimensions_())},l.prototype.createFromWMTSTemplate=function(a){var h=this.requestEncoding_,d={layer:this.layer_,style:this.style_,tilematrixset:this.matrixSet_};"KVP"==h&&$n(d,{Service:"WMTS",Request:"GetTile",Version:this.version_,Format:this.format_}),a="KVP"==h?Ky(a,d):a.replace(/\{(\w+?)\}/g,function(g,y){return y.toLowerCase()in d?d[y.toLowerCase()]:g});var f=this.tileGrid,m=this.dimensions_;return function(g,y,v){if(g){var _={TileMatrix:f.getMatrixId(g[0]),TileCol:g[1],TileRow:g[2]};$n(_,m);var S=a;return"KVP"==h?Ky(S,_):S.replace(/\{(\w+?)\}/g,function(b,T){return _[T]})}}},l}(HS);const bxe=Sxe;var Txe=function(){var c=function(l,a){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,d){h.__proto__=d}||function(h,d){for(var f in d)Object.prototype.hasOwnProperty.call(d,f)&&(h[f]=d[f])})(l,a)};return function(l,a){if("function"!=typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");function h(){this.constructor=l}c(l,a),l.prototype=null===a?Object.create(a):(h.prototype=a.prototype,new h)}}(),MW=function(c){function l(a){var h=c.call(this,{extent:a.extent,origin:a.origin,origins:a.origins,resolutions:a.resolutions,tileSize:a.tileSize,tileSizes:a.tileSizes,sizes:a.sizes})||this;return h.matrixIds_=a.matrixIds,h}return Txe(l,c),l.prototype.getMatrixId=function(a){return this.matrixIds_[a]},l.prototype.getMatrixIds=function(){return this.matrixIds_},l}(kS);const wxe=MW;var Cxe=function(){var c=function(l,a){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,d){h.__proto__=d}||function(h,d){for(var f in d)Object.prototype.hasOwnProperty.call(d,f)&&(h[f]=d[f])})(l,a)};return function(l,a){if("function"!=typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");function h(){this.constructor=l}c(l,a),l.prototype=null===a?Object.create(a):(h.prototype=a.prototype,new h)}}(),xxe=function(c){function l(a,h,d,f,m){var g=this;return(g=c.call(this,a,h,d,void 0!==m?0:2)||this).loader_=void 0!==m?m:null,g.canvas_=f,g.error_=null,g}return Cxe(l,c),l.prototype.getError=function(){return this.error_},l.prototype.handleLoad_=function(a){a?(this.error_=a,this.state=3):this.state=2,this.changed()},l.prototype.load=function(){0==this.state&&(this.state=1,this.changed(),this.loader_(this.handleLoad_.bind(this)))},l.prototype.getImage=function(){return this.canvas_},l}(P2);const BO=xxe;var GO,UO=function(){var c=function(l,a){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,d){h.__proto__=d}||function(h,d){for(var f in d)Object.prototype.hasOwnProperty.call(d,f)&&(h[f]=d[f])})(l,a)};return function(l,a){if("function"!=typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");function h(){this.constructor=l}c(l,a),l.prototype=null===a?Object.create(a):(h.prototype=a.prototype,new h)}}(),DW=!0;try{new ImageData(10,10)}catch{DW=!1}function AW(c){var l=!0;try{new ImageData(10,10)}catch{l=!1}function a(h,d,f){return l?new ImageData(h,d,f):{data:h,width:d,height:f}}return function(h){var d=h.buffers,f=h.meta,g=h.width,y=h.height,v=d.length,_=d[0].byteLength;if(h.imageOps){for(var S=new Array(v),b=0;b<v;++b)S[b]=a(new Uint8ClampedArray(d[b]),g,y);return c(S,f).data.buffer}var x=new Uint8ClampedArray(_),E=new Array(v),D=new Array(v);for(b=0;b<v;++b)E[b]=new Uint8ClampedArray(d[b]),D[b]=[0,0,0,0];for(var I=0;I<_;I+=4){for(var M=0;M<v;++M){var L=E[M];D[M][0]=L[I],D[M][1]=L[I+1],D[M][2]=L[I+2],D[M][3]=L[I+3]}var P=c(D,f);x[I]=P[0],x[I+1]=P[1],x[I+2]=P[2],x[I+3]=P[3]}return x.buffer}}function Mxe(c,l){var h=Object.keys(c.lib||{}).map(function(f){return"var "+f+" = "+c.lib[f].toString()+";"}).concat(["var __minion__ = ("+AW.toString()+")(",c.operation.toString(),");",'self.addEventListener("message", function(event) {',"  var buffer = __minion__(event.data);","  self.postMessage({buffer: buffer, meta: event.data.meta}, [buffer]);","});"]),d=new Worker(typeof Blob>"u"?"data:text/javascript;base64,"+Buffer.from(h.join("\n"),"binary").toString("base64"):URL.createObjectURL(new Blob(h,{type:"text/javascript"})));return d.addEventListener("message",l),d}var Axe=function(c){function l(a){var d,h=c.call(this)||this;h._imageOps=!!a.imageOps,d=0===a.threads?0:h._imageOps?1:a.threads||1;var f=new Array(d);if(d)for(var m=0;m<d;++m)f[m]=Mxe(a,h._onWorkerMessage.bind(h,m));else f[0]=function Dxe(c,l){var a=AW(c.operation),h=!1;return{postMessage:function(d){setTimeout(function(){h||l({data:{buffer:a(d),meta:d.meta}})},0)},terminate:function(){h=!0}}}(a,h._onWorkerMessage.bind(h,0));return h._workers=f,h._queue=[],h._maxQueueLength=a.queue||1/0,h._running=0,h._dataLookup={},h._job=null,h}return UO(l,c),l.prototype.process=function(a,h,d){this._enqueue({inputs:a,meta:h,callback:d}),this._dispatch()},l.prototype._enqueue=function(a){for(this._queue.push(a);this._queue.length>this._maxQueueLength;)this._queue.shift().callback(null,null)},l.prototype._dispatch=function(){if(!this._running&&0!==this._queue.length){var a=this._queue.shift();this._job=a;var h=a.inputs[0].width,d=a.inputs[0].height,f=a.inputs.map(function(x){return x.data.buffer}),m=this._workers.length;if(this._running=m,1===m)return void this._workers[0].postMessage({buffers:f,meta:a.meta,imageOps:this._imageOps,width:h,height:d},f);for(var y=4*Math.ceil(a.inputs[0].data.length/4/m),v=0;v<m;++v){for(var _=v*y,S=[],b=0,T=f.length;b<T;++b)S.push(f[b].slice(_,_+y));this._workers[v].postMessage({buffers:S,meta:a.meta,imageOps:this._imageOps,width:h,height:d},S)}}},l.prototype._onWorkerMessage=function(a,h){this.disposed||(this._dataLookup[a]=h.data,--this._running,0===this._running&&this._resolveJob())},l.prototype._resolveJob=function(){var d,f,a=this._job,h=this._workers.length;if(1===h)d=new Uint8ClampedArray(this._dataLookup[0].buffer),f=this._dataLookup[0].meta;else{var m=a.inputs[0].data.length;d=new Uint8ClampedArray(m),f=new Array(h);for(var g=4*Math.ceil(m/4/h),y=0;y<h;++y){var _=y*g;d.set(new Uint8ClampedArray(this._dataLookup[y].buffer),_),f[y]=this._dataLookup[y].meta}}this._job=null,this._dataLookup={},a.callback(null,function Exe(c,l,a){if(DW)return new ImageData(c,l,a);GO||(GO=document.createElement("canvas").getContext("2d"));var h=GO.createImageData(l,a);return h.data.set(c),h}(d,a.inputs[0].width,a.inputs[0].height),f),this._dispatch()},l.prototype.disposeInternal=function(){for(var a=0;a<this._workers.length;++a)this._workers[a].terminate();this._workers.length=0},l}(oS),PW=function(c){function l(a,h,d){var f=c.call(this,a)||this;return f.extent=h.extent,f.resolution=h.viewState.resolution/h.pixelRatio,f.data=d,f}return UO(l,c),l}(gc),LW=function(c){function l(a){var h=c.call(this,{projection:null})||this;h.processor_=null,h.operationType_=void 0!==a.operationType?a.operationType:"pixel",h.threads_=void 0!==a.threads?a.threads:1,h.layers_=function Pxe(c){for(var l=c.length,a=new Array(l),h=0;h<l;++h)a[h]=Lxe(c[h]);return a}(a.sources);for(var d=h.changed.bind(h),f=0,m=h.layers_.length;f<m;++f)h.layers_[f].addEventListener("change",d);return h.tileQueue_=new A9(function(){return 1},h.changed.bind(h)),h.renderedImageCanvas_=null,h.frameState_={animate:!1,coordinateToPixelTransform:[1,0,0,1,0,0],declutterTree:null,extent:null,index:0,layerIndex:0,layerStatesArray:Rxe(h.layers_),pixelRatio:1,pixelToCoordinateTransform:[1,0,0,1,0,0],postRenderFunctions:[],size:[0,0],tileQueue:h.tileQueue_,time:Date.now(),usedTiles:{},viewState:{rotation:0},viewHints:[],wantedTiles:{},mapId:tn(h),renderTargets:{}},h.setAttributions(function(g){for(var y=[],v=0,_=a.sources.length;v<_;++v){var S=a.sources[v],T=(S instanceof FS?S:S.getSource()).getAttributions();if("function"==typeof T){var x=T(g);y.push.apply(y,x)}}return 0!==y.length?y:null}),void 0!==a.operation&&h.setOperation(a.operation,a.lib),h}return UO(l,c),l.prototype.setOperation=function(a,h){this.processor_&&this.processor_.dispose(),this.processor_=new Axe({operation:a,imageOps:"image"===this.operationType_,queue:1,lib:h,threads:this.threads_}),this.changed()},l.prototype.updateFrameState_=function(a,h,d){var f=$n({},this.frameState_);f.viewState=$n({},f.viewState);var m=Jo(a);f.extent=a.slice(),f.size[0]=Math.round(fr(a)/h),f.size[1]=Math.round(Ei(a)/h),f.time=Date.now();var g=f.viewState;return g.center=m,g.projection=d,g.resolution=h,f},l.prototype.allSourcesReady_=function(){for(var a=!0,d=0,f=this.layers_.length;d<f;++d)if("ready"!==this.layers_[d].getSource().getState()){a=!1;break}return a},l.prototype.getImage=function(a,h,d,f){if(!this.allSourcesReady_())return null;var m=this.updateFrameState_(a,h,f);if(this.requestedFrameState_=m,this.renderedImageCanvas_){var g=this.renderedImageCanvas_.getResolution(),y=this.renderedImageCanvas_.getExtent();(h!==g||!Ol(a,y))&&(this.renderedImageCanvas_=null)}return(!this.renderedImageCanvas_||this.getRevision()!==this.renderedRevision_)&&this.processSources_(),m.tileQueue.loadMoreTiles(16,16),m.animate&&requestAnimationFrame(this.changed.bind(this)),this.renderedImageCanvas_},l.prototype.processSources_=function(){for(var a=this.requestedFrameState_,h=this.layers_.length,d=new Array(h),f=0;f<h;++f){a.layerIndex=f;var m=Ixe(this.layers_[f],a);if(!m)return;d[f]=m}var g={};this.dispatchEvent(new PW("beforeoperations",a,g)),this.processor_.process(d,g,this.onWorkerComplete_.bind(this,a))},l.prototype.onWorkerComplete_=function(a,h,d,f){if(!h&&d){var y,m=a.extent,g=a.viewState.resolution;if(g===this.requestedFrameState_.viewState.resolution&&Ol(m,this.requestedFrameState_.extent))this.renderedImageCanvas_?y=this.renderedImageCanvas_.getImage().getContext("2d"):(y=Qs(Math.round(fr(m)/g),Math.round(Ei(m)/g)),this.renderedImageCanvas_=new BO(m,g,1,y.canvas)),y.putImageData(d,0,0),this.changed(),this.renderedRevision_=this.getRevision(),this.dispatchEvent(new PW("afteroperations",a,f)),a.animate&&requestAnimationFrame(this.changed.bind(this))}},l.prototype.disposeInternal=function(){this.processor_&&this.processor_.dispose(),c.prototype.disposeInternal.call(this)},l}(Qy),sm=null;function Ixe(c,l){var a=c.getRenderer();if(!a)throw new Error("Unsupported layer type: "+c);if(!a.prepareFrame(l))return null;var h=l.size[0],d=l.size[1];if(0===h||0===d)return null;var m,f=a.renderFrame(l,null);if(f instanceof HTMLCanvasElement)m=f;else{if(f&&(m=f.firstElementChild),!(m instanceof HTMLCanvasElement))throw new Error("Unsupported rendered element: "+m);if(m.width===h&&m.height===d)return m.getContext("2d").getImageData(0,0,h,d)}if(sm){var y=sm.canvas;y.width!==h||y.height!==d?sm=Qs(h,d):sm.clearRect(0,0,h,d)}else sm=Qs(h,d);return sm.drawImage(m,0,0,h,d),sm.getImageData(0,0,h,d)}function Rxe(c){return c.map(function(l){return l.getLayerState()})}function Lxe(c){var l;return c instanceof FS?c instanceof j2?l=new Su({source:c}):c instanceof Qy&&(l=new Xd({source:c})):l=c,l}const nb=LW;var Oxe=function(){var c=function(l,a){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,d){h.__proto__=d}||function(h,d){for(var f in d)Object.prototype.hasOwnProperty.call(d,f)&&(h[f]=d[f])})(l,a)};return function(l,a){if("function"!=typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");function h(){this.constructor=l}c(l,a),l.prototype=null===a?Object.create(a):(h.prototype=a.prototype,new h)}}(),Nxe=function(c){function l(a){var h=c.call(this,{attributions:a.attributions,wrapX:a.wrapX})||this;return h.resolution=void 0,h.distance=void 0!==a.distance?a.distance:20,h.minDistance=a.minDistance||0,h.interpolationRatio=0,h.features=[],h.geometryFunction=a.geometryFunction||function(d){var f=d.getGeometry();return bn("Point"==f.getType(),10),f},h.createCustomCluster_=a.createCluster,h.source=null,h.boundRefresh_=h.refresh.bind(h),h.updateDistance(h.distance,h.minDistance),h.setSource(a.source||null),h}return Oxe(l,c),l.prototype.clear=function(a){this.features.length=0,c.prototype.clear.call(this,a)},l.prototype.getDistance=function(){return this.distance},l.prototype.getSource=function(){return this.source},l.prototype.loadFeatures=function(a,h,d){this.source.loadFeatures(a,h,d),h!==this.resolution&&(this.resolution=h,this.refresh())},l.prototype.setDistance=function(a){this.updateDistance(a,this.minDistance)},l.prototype.setMinDistance=function(a){this.updateDistance(this.distance,a)},l.prototype.getMinDistance=function(){return this.minDistance},l.prototype.setSource=function(a){this.source&&this.source.removeEventListener("change",this.boundRefresh_),this.source=a,a&&a.addEventListener("change",this.boundRefresh_),this.refresh()},l.prototype.refresh=function(){this.clear(),this.cluster(),this.addFeatures(this.features)},l.prototype.updateDistance=function(a,h){var d=0===a?0:Math.min(h,a)/a,f=a!==this.distance||this.interpolationRatio!==d;this.distance=a,this.minDistance=h,this.interpolationRatio=d,f&&this.refresh()},l.prototype.cluster=function(){if(void 0!==this.resolution&&this.source)for(var a=[1/0,1/0,-1/0,-1/0],h=this.distance*this.resolution,d=this.source.getFeatures(),f={},m=0,g=d.length;m<g;m++){var y=d[m];if(!(tn(y)in f)){var v=this.geometryFunction(y);if(v){VL(v.getCoordinates(),a),$a(a,h,a);var S=this.source.getFeaturesInExtent(a).filter(function(b){var T=tn(b);return!(T in f)&&(f[T]=!0,!0)});this.features.push(this.createCluster(S,a))}}}},l.prototype.createCluster=function(a,h){for(var d=[0,0],f=a.length-1;f>=0;--f){var m=this.geometryFunction(a[f]);m?h9(d,m.getCoordinates()):a.splice(f,1)}d9(d,1/a.length);var g=Jo(h),y=this.interpolationRatio,v=new yu([d[0]*(1-y)+g[0]*y,d[1]*(1-y)+g[1]*y]);return this.createCustomCluster_?this.createCustomCluster_(v,a):new Gy({geometry:v,features:a})},l}(hi);const yf=Nxe;var OW="http://www.w3.org/2001/XMLSchema-instance";function rb(c,l){return qx().createElementNS(c,l)}function xu(c,l){return NW(c,l,[]).join("")}function NW(c,l,a){if(c.nodeType==Node.CDATA_SECTION_NODE||c.nodeType==Node.TEXT_NODE)a.push(l?String(c.nodeValue).replace(/(\r\n|\r|\n)/g,""):c.nodeValue);else{var h=void 0;for(h=c.firstChild;h;h=h.nextSibling)NW(h,l,a)}return a}function vf(c){return"documentElement"in c}function _f(c){return(new DOMParser).parseFromString(c,"application/xml")}function FW(c,l){return function(a,h){var d=c.call(void 0!==l?l:this,a,h);void 0!==d&&xi(h[h.length-1],d)}}function Eu(c,l){return function(a,h){var d=c.call(void 0!==l?l:this,a,h);void 0!==d&&h[h.length-1].push(d)}}function zO(c,l){return function(a,h){var d=c.call(void 0!==l?l:this,a,h);void 0!==d&&(h[h.length-1]=d)}}function el(c,l,a){return function(h,d){var f=c.call(void 0!==a?a:this,h,d);if(void 0!==f){var m=d[d.length-1],g=void 0!==l?l:h.localName,y=void 0;g in m?y=m[g]:m[g]=y=[],y.push(f)}}}function tt(c,l,a){return function(h,d){var f=c.call(void 0!==a?a:this,h,d);void 0!==f&&(d[d.length-1][void 0!==l?l:h.localName]=f)}}function Tn(c,l){return function(a,h,d){c.call(void 0!==l?l:this,a,h,d),d[d.length-1].node.appendChild(a)}}function Mu(c,l){var a=c;return function(h,d,f){var y=a;return void 0===y&&(y=f),rb(void 0!==l?l:d[d.length-1].node.namespaceURI,y)}}var kl=Mu();function xc(c,l){for(var a=l.length,h=new Array(a),d=0;d<a;++d)h[d]=c[l[d]];return h}function jt(c,l,a){var d,f,h=void 0!==a?a:{};for(d=0,f=c.length;d<f;++d)h[c[d]]=l;return h}function Jy(c,l,a,h){var d;for(d=l.firstElementChild;d;d=d.nextElementSibling){var f=c[d.namespaceURI];if(void 0!==f){var m=f[d.localName];void 0!==m&&m.call(h,d,a)}}}function Wn(c,l,a,h,d){return h.push(c),Jy(l,a,h,d),h.pop()}function os(c,l,a,h,d,f,m){return d.push(c),function kW(c,l,a,h,d,f){for(var g,y,m=(void 0!==d?d:a).length,v=0;v<m;++v)void 0!==(g=a[v])&&void 0!==(y=l.call(void 0!==f?f:this,g,h,void 0!==d?d[v]:void 0))&&c[y.namespaceURI][y.localName].call(f,y,g,h)}(l,a,h,d,f,m),d.pop()}var Wx=void 0,Xx=void 0;function qx(){return void 0===Xx&&typeof document<"u"&&(Xx=document.implementation.createDocument("","",null)),Xx}var kxe=function(){var c=function(l,a){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,d){h.__proto__=d}||function(h,d){for(var f in d)Object.prototype.hasOwnProperty.call(d,f)&&(h[f]=d[f])})(l,a)};return function(l,a){if("function"!=typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");function h(){this.constructor=l}c(l,a),l.prototype=null===a?Object.create(a):(h.prototype=a.prototype,new h)}}(),Vxe=function(c){function l(){var a=c.call(this)||this;return a.xmlSerializer_=function Fxe(){return void 0===Wx&&typeof XMLSerializer<"u"&&(Wx=new XMLSerializer),Wx}(),a}return kxe(l,c),l.prototype.getType=function(){return"xml"},l.prototype.readFeature=function(a,h){if(a){if("string"==typeof a){var d=_f(a);return this.readFeatureFromDocument(d,h)}return vf(a)?this.readFeatureFromDocument(a,h):this.readFeatureFromNode(a,h)}return null},l.prototype.readFeatureFromDocument=function(a,h){var d=this.readFeaturesFromDocument(a,h);return d.length>0?d[0]:null},l.prototype.readFeatureFromNode=function(a,h){return null},l.prototype.readFeatures=function(a,h){if(a){if("string"==typeof a){var d=_f(a);return this.readFeaturesFromDocument(d,h)}return vf(a)?this.readFeaturesFromDocument(a,h):this.readFeaturesFromNode(a,h)}return[]},l.prototype.readFeaturesFromDocument=function(a,h){for(var d=[],f=a.firstChild;f;f=f.nextSibling)f.nodeType==Node.ELEMENT_NODE&&xi(d,this.readFeaturesFromNode(f,h));return d},l.prototype.readFeaturesFromNode=function(a,h){return _n()},l.prototype.readGeometry=function(a,h){if(a){if("string"==typeof a){var d=_f(a);return this.readGeometryFromDocument(d,h)}return vf(a)?this.readGeometryFromDocument(a,h):this.readGeometryFromNode(a,h)}return null},l.prototype.readGeometryFromDocument=function(a,h){return null},l.prototype.readGeometryFromNode=function(a,h){return null},l.prototype.readProjection=function(a){if(a){if("string"==typeof a){var h=_f(a);return this.readProjectionFromDocument(h)}return vf(a)?this.readProjectionFromDocument(a):this.readProjectionFromNode(a)}return null},l.prototype.readProjectionFromDocument=function(a){return this.dataProjection},l.prototype.readProjectionFromNode=function(a){return this.dataProjection},l.prototype.writeFeature=function(a,h){var d=this.writeFeatureNode(a,h);return this.xmlSerializer_.serializeToString(d)},l.prototype.writeFeatureNode=function(a,h){return null},l.prototype.writeFeatures=function(a,h){var d=this.writeFeaturesNode(a,h);return this.xmlSerializer_.serializeToString(d)},l.prototype.writeFeaturesNode=function(a,h){return null},l.prototype.writeGeometry=function(a,h){var d=this.writeGeometryNode(a,h);return this.xmlSerializer_.serializeToString(d)},l.prototype.writeGeometryNode=function(a,h){return null},l}($2);const Bxe=Vxe;function Sf(c){return om(xu(c,!1))}function om(c){var l=/^\s*(true|1)|(false|0)\s*$/.exec(c);if(l)return void 0!==l[1]||!1}function Gi(c){return Ih(xu(c,!1))}function Ih(c){var l=/^\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)\s*$/i.exec(c);if(l)return parseFloat(l[1])}function HO(c){return $x(xu(c,!1))}function $x(c){var l=/^\s*(\d+)\s*$/.exec(c);if(l)return parseInt(l[1],10)}function Bn(c){return xu(c,!1).trim()}function ev(c,l){Ec(c,l?"1":"0")}function am(c,l){var a=l.toPrecision();c.appendChild(qx().createTextNode(a))}function Ec(c,l){c.appendChild(qx().createTextNode(l))}var tv,jO,sb,ob,ab,Yx,WO,XO,eE,Gxe=function(){var c=function(l,a){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,d){h.__proto__=d}||function(h,d){for(var f in d)Object.prototype.hasOwnProperty.call(d,f)&&(h[f]=d[f])})(l,a)};return function(l,a){if("function"!=typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");function h(){this.constructor=l}c(l,a),l.prototype=null===a?Object.create(a):(h.prototype=a.prototype,new h)}}(),Rh=["http://www.google.com/kml/ext/2.2"],ln=[null,"http://earth.google.com/kml/2.0","http://earth.google.com/kml/2.1","http://earth.google.com/kml/2.2","http://www.opengis.net/kml/2.2"],VW={fraction:"fraction",pixels:"pixels",insetPixels:"pixels"},Hxe=jt(ln,{ExtendedData:JW,Region:eX,MultiGeometry:tt(ZW,"geometry"),LineString:tt($W,"geometry"),LinearRing:tt(YW,"geometry"),Point:tt(KW,"geometry"),Polygon:tt(QW,"geometry"),Style:tt(YO),StyleMap:function xEe(c,l){var a=WW.call(this,c,l);if(a){var h=l[l.length-1];Array.isArray(a)?h.Style=a:"string"==typeof a?h.styleUrl=a:bn(!1,38)}},address:tt(Bn),description:tt(Bn),name:tt(Bn),open:tt(Sf),phoneNumber:tt(Bn),styleUrl:tt(HW),visibility:tt(Sf)},jt(Rh,{MultiTrack:tt(function dEe(c,l){var a=Wn([],hEe,c,l);if(a)return new GS(a)},"geometry"),Track:tt(qW,"geometry")})),jxe=jt(ln,{ExtendedData:JW,Region:eX,Link:function kEe(c,l){Jy(Wxe,c,l)},address:tt(Bn),description:tt(Bn),name:tt(Bn),open:tt(Sf),phoneNumber:tt(Bn),visibility:tt(Sf)}),Wxe=jt(ln,{href:tt(zW)}),BW=jt(ln,{LatLonAltBox:function IEe(c,l){var a=Wn({},AEe,c,l);if(a){var h=l[l.length-1],d=[parseFloat(a.west),parseFloat(a.south),parseFloat(a.east),parseFloat(a.north)];h.extent=d,h.altitudeMode=a.altitudeMode,h.minAltitude=parseFloat(a.minAltitude),h.maxAltitude=parseFloat(a.maxAltitude)}},Lod:function PEe(c,l){var a=Wn({},REe,c,l);if(a){var h=l[l.length-1];h.minLodPixels=parseFloat(a.minLodPixels),h.maxLodPixels=parseFloat(a.maxLodPixels),h.minFadeExtent=parseFloat(a.minFadeExtent),h.maxFadeExtent=parseFloat(a.maxFadeExtent)}}}),Xxe=jt(ln,["Document","Placemark"]),qxe=jt(ln,{Document:Tn(function WEe(c,l,a){os({node:c},HEe,jEe,l,a,void 0,this)}),Placemark:Tn(oX)}),ib=null,Zx=null,Kx=null,bf=null,qO=null,Qx=null;function Jx(c){return 32/Math.min(c[0],c[1])}function Yxe(c){return c}var Zxe=function(c){function l(a){var h=c.call(this)||this,d=a||{};return Qx||function $xe(){ib=new Si({color:tv=[255,255,255,1]}),Yx="https://maps.google.com/mapfiles/kml/pushpin/ylw-pushpin.png",Zx=new vx({anchor:jO=[20,2],anchorOrigin:"bottom-left",anchorXUnits:sb="pixels",anchorYUnits:ob="pixels",crossOrigin:"anonymous",rotation:0,scale:Jx(ab=[64,64]),size:ab,src:Yx}),WO="NO_IMAGE",Kx=new ws({color:tv,width:1}),XO=new ws({color:[51,51,51,1],width:2}),bf=new Zp({font:"bold 16px Helvetica",fill:ib,stroke:XO,scale:.8}),qO=new ui({fill:ib,image:Zx,text:bf,stroke:Kx,zIndex:0}),Qx=[qO]}(),h.dataProjection=cn("EPSG:4326"),h.defaultStyle_=d.defaultStyle?d.defaultStyle:Qx,h.extractStyles_=void 0===d.extractStyles||d.extractStyles,h.writeStyles_=void 0===d.writeStyles||d.writeStyles,h.sharedStyles_={},h.showPointNames_=void 0===d.showPointNames||d.showPointNames,h.crossOrigin_=void 0!==d.crossOrigin?d.crossOrigin:"anonymous",h.iconUrlFunction_=d.iconUrlFunction?d.iconUrlFunction:Yxe,h.supportedMediaTypes=["application/vnd.google-earth.kml+xml"],h}return Gxe(l,c),l.prototype.readDocumentOrFolder_=function(a,h){var f=Wn([],jt(ln,{Document:FW(this.readDocumentOrFolder_,this),Folder:FW(this.readDocumentOrFolder_,this),Placemark:Eu(this.readPlacemark_,this),Style:this.readSharedStyle_.bind(this),StyleMap:this.readSharedStyleMap_.bind(this)}),a,h,this);if(f)return f},l.prototype.readPlacemark_=function(a,h){var d=Wn({geometry:null},Hxe,a,h,this);if(d){var f=new Gy,m=a.getAttribute("id");null!==m&&f.setId(m);var y=d.geometry;if(y&&zy(y,!1,h[0]),f.setGeometry(y),delete d.geometry,this.extractStyles_){var S=function Qxe(c,l,a,h,d){return function(f,m){var g=d,y="",v=[];if(g){var _=f.getGeometry();if(_)if(_ instanceof Jd)g=(v=_.getGeometriesArrayRecursive().filter(function(E){var D=E.getType();return"Point"===D||"MultiPoint"===D})).length>0;else{var S=_.getType();g="Point"===S||"MultiPoint"===S}}g&&(y=f.get("name"),(g=g&&!!y)&&y.search(/&[^&]+;/)>-1&&(eE||(eE=document.createElement("textarea")),eE.innerHTML=y,y=eE.value));var b=a;if(c?b=c:l&&(b=UW(l,a,h)),g){var T=function Kxe(c,l){var a=[0,0],h="start",d=c.getImage();if(d){var f=d.getSize();if(f&&2==f.length){var m=d.getScaleArray(),g=d.getAnchor();a[0]=m[0]*(f[0]-g[0]),a[1]=m[1]*(f[1]/2-g[1]),h="left"}}var y=c.getText();return y?((y=y.clone()).setFont(y.getFont()||bf.getFont()),y.setScale(y.getScale()||bf.getScale()),y.setFill(y.getFill()||bf.getFill()),y.setStroke(y.getStroke()||XO)):y=bf.clone(),y.setText(l),y.setOffsetX(a[0]),y.setOffsetY(a[1]),y.setTextAlign(h),new ui({image:d,text:y})}(b[0],y);return v.length>0?(T.setGeometry(new Jd(v)),[T,new ui({geometry:b[0].getGeometry(),image:null,fill:b[0].getFill(),stroke:b[0].getStroke(),text:null})].concat(b.slice(1))):T}return b}}(d.Style,d.styleUrl,this.defaultStyle_,this.sharedStyles_,this.showPointNames_);f.setStyle(S)}return delete d.Style,f.setProperties(d,!0),f}},l.prototype.readSharedStyle_=function(a,h){var d=a.getAttribute("id");if(null!==d){var f=YO.call(this,a,h);if(f){var m=void 0,g=a.baseURI;(!g||"about:blank"==g)&&(g=window.location.href),m=g?new URL("#"+d,g).href:"#"+d,this.sharedStyles_[m]=f}}},l.prototype.readSharedStyleMap_=function(a,h){var d=a.getAttribute("id");if(null!==d){var f=WW.call(this,a,h);if(f){var m,g=a.baseURI;(!g||"about:blank"==g)&&(g=window.location.href),m=g?new URL("#"+d,g).href:"#"+d,this.sharedStyles_[m]=f}}},l.prototype.readFeatureFromNode=function(a,h){return Nd(ln,a.namespaceURI)&&this.readPlacemark_(a,[this.getReadOptions(a,h)])||null},l.prototype.readFeaturesFromNode=function(a,h){if(!Nd(ln,a.namespaceURI))return[];var d,f=a.localName;if("Document"==f||"Folder"==f)return(d=this.readDocumentOrFolder_(a,[this.getReadOptions(a,h)]))||[];if("Placemark"==f){var m=this.readPlacemark_(a,[this.getReadOptions(a,h)]);return m?[m]:[]}if("kml"==f){d=[];for(var g=a.firstElementChild;g;g=g.nextElementSibling){var y=this.readFeaturesFromNode(g,h);y&&xi(d,y)}return d}return[]},l.prototype.readName=function(a){if(a){if("string"==typeof a){var h=_f(a);return this.readNameFromDocument(h)}return vf(a)?this.readNameFromDocument(a):this.readNameFromNode(a)}},l.prototype.readNameFromDocument=function(a){for(var h=a.firstChild;h;h=h.nextSibling)if(h.nodeType==Node.ELEMENT_NODE){var d=this.readNameFromNode(h);if(d)return d}},l.prototype.readNameFromNode=function(a){for(var h=a.firstElementChild;h;h=h.nextElementSibling)if(Nd(ln,h.namespaceURI)&&"name"==h.localName)return Bn(h);for(h=a.firstElementChild;h;h=h.nextElementSibling){var d=h.localName;if(Nd(ln,h.namespaceURI)&&("Document"==d||"Folder"==d||"Placemark"==d||"kml"==d)){var f=this.readNameFromNode(h);if(f)return f}}},l.prototype.readNetworkLinks=function(a){var h=[];if("string"==typeof a){var d=_f(a);xi(h,this.readNetworkLinksFromDocument(d))}else vf(a)?xi(h,this.readNetworkLinksFromDocument(a)):xi(h,this.readNetworkLinksFromNode(a));return h},l.prototype.readNetworkLinksFromDocument=function(a){for(var h=[],d=a.firstChild;d;d=d.nextSibling)d.nodeType==Node.ELEMENT_NODE&&xi(h,this.readNetworkLinksFromNode(d));return h},l.prototype.readNetworkLinksFromNode=function(a){for(var h=[],d=a.firstElementChild;d;d=d.nextElementSibling)if(Nd(ln,d.namespaceURI)&&"NetworkLink"==d.localName){var f=Wn({},jxe,d,[]);h.push(f)}for(d=a.firstElementChild;d;d=d.nextElementSibling){var m=d.localName;Nd(ln,d.namespaceURI)&&("Document"==m||"Folder"==m||"kml"==m)&&xi(h,this.readNetworkLinksFromNode(d))}return h},l.prototype.readRegion=function(a){var h=[];if("string"==typeof a){var d=_f(a);xi(h,this.readRegionFromDocument(d))}else vf(a)?xi(h,this.readRegionFromDocument(a)):xi(h,this.readRegionFromNode(a));return h},l.prototype.readRegionFromDocument=function(a){for(var h=[],d=a.firstChild;d;d=d.nextSibling)d.nodeType==Node.ELEMENT_NODE&&xi(h,this.readRegionFromNode(d));return h},l.prototype.readRegionFromNode=function(a){for(var h=[],d=a.firstElementChild;d;d=d.nextElementSibling)if(Nd(ln,d.namespaceURI)&&"Region"==d.localName){var f=Wn({},BW,d,[]);h.push(f)}for(d=a.firstElementChild;d;d=d.nextElementSibling){var m=d.localName;Nd(ln,d.namespaceURI)&&("Document"==m||"Folder"==m||"kml"==m)&&xi(h,this.readRegionFromNode(d))}return h},l.prototype.writeFeaturesNode=function(a,h){h=this.adaptOptions(h);var d=rb(ln[4],"kml"),f="http://www.w3.org/2000/xmlns/";d.setAttributeNS(f,"xmlns:gx",Rh[0]),d.setAttributeNS(f,"xmlns:xsi",OW),d.setAttributeNS(OW,"xsi:schemaLocation","http://www.opengis.net/kml/2.2 https://developers.google.com/kml/schema/kml22gx.xsd");var m={node:d},g={};a.length>1?g.Document=a:1==a.length&&(g.Placemark=a[0]);var y=Xxe[d.namespaceURI],v=xc(g,y);return os(m,qxe,kl,v,[h],y,this),d},l}(Bxe);function UW(c,l,a){return Array.isArray(c)?c:"string"==typeof c?UW(a[c],l,a):l}function tE(c){var l=xu(c,!1),a=/^\s*#?\s*([0-9A-Fa-f]{8})\s*$/.exec(l);if(a){var h=a[1];return[parseInt(h.substr(6,2),16),parseInt(h.substr(4,2),16),parseInt(h.substr(2,2),16),parseInt(h.substr(0,2),16)/255]}}function GW(c){var l=xu(c,!1),a=[];l=l.replace(/\s*,\s*/g,",");for(var d,h=/^\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?),([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)(?:\s+|,|$)(?:([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)(?:\s+|$))?\s*/i;d=h.exec(l);){var f=parseFloat(d[1]),m=parseFloat(d[2]),g=d[3]?parseFloat(d[3]):0;a.push(f,m,g),l=l.substr(d[0].length)}if(""===l)return a}function zW(c){var l=xu(c,!1).trim(),a=c.baseURI;return(!a||"about:blank"==a)&&(a=window.location.href),a?new URL(l,a).href:l}function HW(c){var l=xu(c,!1).trim().replace(/^(?!.*#)/,"#"),a=c.baseURI;return(!a||"about:blank"==a)&&(a=window.location.href),a?new URL(l,a).href:l}function jW(c){return Gi(c)}var eEe=jt(ln,{Pair:function CEe(c,l){var a=Wn({},wEe,c,l,this);if(a){var h=a.key;if(h&&"normal"==h){var d=a.styleUrl;d&&(l[l.length-1]=d);var f=a.Style;f&&(l[l.length-1]=f)}}}});function WW(c,l){return Wn(void 0,eEe,c,l,this)}var tEe=jt(ln,{Icon:tt(function mEe(c,l){return Wn({},pEe,c,l)||null}),color:tt(tE),heading:tt(Gi),hotSpot:tt(function Jxe(c){var h,l=c.getAttribute("xunits"),a=c.getAttribute("yunits");return h="insetPixels"!==l?"insetPixels"!==a?"bottom-left":"top-left":"insetPixels"!==a?"bottom-right":"top-right",{x:parseFloat(c.getAttribute("x")),xunits:VW[l],y:parseFloat(c.getAttribute("y")),yunits:VW[a],origin:h}}),scale:tt(jW)}),rEe=jt(ln,{color:tt(tE),scale:tt(jW)}),sEe=jt(ln,{color:tt(tE),width:tt(Gi)}),aEe=jt(ln,{color:tt(tE),fill:tt(Sf),outline:tt(Sf)}),cEe=jt(ln,{coordinates:zO(GW)});function XW(c,l){return Wn(null,cEe,c,l)}var hEe=jt(Rh,{Track:Eu(qW)}),fEe=jt(ln,{when:function VEe(c,l){var h=l[l.length-1].whens,d=xu(c,!1),f=Date.parse(d);h.push(isNaN(f)?0:f)}},jt(Rh,{coord:function uEe(c,l){var h=l[l.length-1].coordinates,d=xu(c,!1),m=/^\s*([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s+([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s+([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s*$/i.exec(d);if(m){var g=parseFloat(m[1]),y=parseFloat(m[2]),v=parseFloat(m[3]);h.push([g,y,v])}else h.push([])}}));function qW(c,l){var a=Wn({coordinates:[],whens:[]},fEe,c,l);if(a){for(var h=[],d=a.coordinates,f=a.whens,m=0,g=Math.min(d.length,f.length);m<g;++m)3==d[m].length&&h.push(d[m][0],d[m][1],d[m][2],f[m]);return new Eh(h,"XYZM")}}var pEe=jt(ln,{href:tt(zW)},jt(Rh,{x:tt(Gi),y:tt(Gi),w:tt(Gi),h:tt(Gi)})),gEe=jt(ln,{coordinates:zO(GW)});function $O(c,l){return Wn(null,gEe,c,l)}var nE=jt(ln,{extrude:tt(Sf),tessellate:tt(Sf),altitudeMode:tt(Bn)});function $W(c,l){var a=Wn({},nE,c,l),h=$O(c,l);if(h){var d=new Eh(h,"XYZ");return d.setProperties(a,!0),d}}function YW(c,l){var a=Wn({},nE,c,l),h=$O(c,l);if(h){var d=new vu(h,"XYZ",[h.length]);return d.setProperties(a,!0),d}}var yEe=jt(ln,{LineString:Eu($W),LinearRing:Eu(YW),MultiGeometry:Eu(ZW),Point:Eu(KW),Polygon:Eu(QW)});function ZW(c,l){var a=Wn([],yEe,c,l);if(!a)return null;if(0===a.length)return new Jd(a);for(var h,d=!0,f=a[0].getType(),g=1,y=a.length;g<y;++g)if(a[g].getType()!=f){d=!1;break}if(d){var v=void 0,_=void 0;if("Point"==f){var S=a[0];for(v=S.getLayout(),_=S.getFlatCoordinates(),g=1,y=a.length;g<y;++g)xi(_,a[g].getFlatCoordinates());ZO(h=new zS(_,v),a)}else"LineString"==f?ZO(h=new GS(a),a):"Polygon"==f?ZO(h=new wx(a),a):"GeometryCollection"==f?h=new Jd(a):bn(!1,37)}else h=new Jd(a);return h}function KW(c,l){var a=Wn({},nE,c,l),h=$O(c,l);if(h){var d=new yu(h,"XYZ");return d.setProperties(a,!0),d}}var vEe=jt(ln,{innerBoundaryIs:function OEe(c,l){var a=Wn([],LEe,c,l);if(a.length>0){var h=l[l.length-1];h.push.apply(h,a)}},outerBoundaryIs:function FEe(c,l){var a=Wn(void 0,NEe,c,l);a&&(l[l.length-1][0]=a)}});function QW(c,l){var a=Wn({},nE,c,l),h=Wn([null],vEe,c,l);if(h&&h[0]){for(var d=h[0],f=[d.length],m=1,g=h.length;m<g;++m)xi(d,h[m]),f.push(d.length);var y=new vu(d,"XYZ",f);return y.setProperties(a,!0),y}}var _Ee=jt(ln,{IconStyle:function nEe(c,l){var a=Wn({},tEe,c,l);if(a){var m,h=l[l.length-1],d="Icon"in a?a.Icon:{},f=!("Icon"in a)||Object.keys(d).length>0,g=d.href;g?m=g:f&&(m=Yx);var y,v,_,S="bottom-left",b=a.hotSpot;b?(y=[b.x,b.y],v=b.xunits,_=b.yunits,S=b.origin):/^http:\/\/maps\.(?:google|gstatic)\.com\//.test(m)&&(/pushpin/.test(m)?(y=jO,v=sb,_=ob):/arrow-reverse/.test(m)?(y=[54,42],v=sb,_=ob):/paddle/.test(m)&&(y=[32,1],v=sb,_=ob));var T,x=d.x,E=d.y;void 0!==x&&void 0!==E&&(T=[x,E]);var D,I=d.w,M=d.h;void 0!==I&&void 0!==M&&(D=[I,M]);var L,P=a.heading;void 0!==P&&(L=dS(P));var V=a.color;if(f){m==Yx&&(D=ab);var z=new vx({anchor:y,anchorOrigin:S,anchorXUnits:v,anchorYUnits:_,crossOrigin:this.crossOrigin_,offset:T,offsetOrigin:"bottom-left",rotation:L,scale:a.scale,size:D,src:this.iconUrlFunction_(m),color:V}),q=z.getScaleArray()[0],K=z.getSize();if(null===K){var se=z.getImageState();if(0===se||1===se){var W=function(){var ie=z.getImageState();if(0!==ie&&1!==ie){var ae=z.getSize();if(ae&&2==ae.length){var he=Jx(ae);z.setScale(q*he)}z.unlistenImageChange(W)}};z.listenImageChange(W),0===se&&z.load()}}else if(2==K.length){var Q=Jx(K);z.setScale(q*Q)}h.imageStyle=z}else h.imageStyle=WO}},LabelStyle:function iEe(c,l){var a=Wn({},rEe,c,l);if(a){var h=l[l.length-1],d=new Zp({fill:new Si({color:"color"in a?a.color:tv}),scale:a.scale});h.textStyle=d}},LineStyle:function oEe(c,l){var a=Wn({},sEe,c,l);if(a){var h=l[l.length-1],d=new ws({color:"color"in a?a.color:tv,width:"width"in a?a.width:1});h.strokeStyle=d}},PolyStyle:function lEe(c,l){var a=Wn({},aEe,c,l);if(a){var h=l[l.length-1],d=new Si({color:"color"in a?a.color:tv});h.fillStyle=d;var f=a.fill;void 0!==f&&(h.fill=f);var m=a.outline;void 0!==m&&(h.outline=m)}}});function YO(c,l){var a=Wn({},_Ee,c,l,this);if(!a)return null;var f,h="fillStyle"in a?a.fillStyle:ib,d=a.fill;void 0!==d&&!d&&(h=null),"imageStyle"in a?a.imageStyle!=WO&&(f=a.imageStyle):f=Zx;var m="textStyle"in a?a.textStyle:bf,g="strokeStyle"in a?a.strokeStyle:Kx,y=a.outline;return void 0===y||y?[new ui({fill:h,image:f,stroke:g,text:m,zIndex:void 0})]:[new ui({geometry:function(v){var _=v.getGeometry(),S=_.getType();return"GeometryCollection"===S?new Jd(_.getGeometriesArrayRecursive().filter(function(T){var x=T.getType();return"Polygon"!==x&&"MultiPolygon"!==x})):"Polygon"!==S&&"MultiPolygon"!==S?_:void 0},fill:h,image:f,stroke:g,text:m,zIndex:void 0}),new ui({geometry:function(v){var _=v.getGeometry(),S=_.getType();return"GeometryCollection"===S?new Jd(_.getGeometriesArrayRecursive().filter(function(T){var x=T.getType();return"Polygon"===x||"MultiPolygon"===x})):"Polygon"===S||"MultiPolygon"===S?_:void 0},fill:h,stroke:null,zIndex:void 0})]}function ZO(c,l){var m,g,y,a=l.length,h=new Array(l.length),d=new Array(l.length),f=new Array(l.length);m=!1,g=!1,y=!1;for(var v=0;v<a;++v){var _=l[v];h[v]=_.get("extrude"),d[v]=_.get("tessellate"),f[v]=_.get("altitudeMode"),m=m||void 0!==h[v],g=g||void 0!==d[v],y=y||f[v]}m&&c.set("extrude",h),g&&c.set("tessellate",d),y&&c.set("altitudeMode",f)}var SEe=jt(ln,{displayName:tt(Bn),value:tt(Bn)}),TEe=jt(ln,{Data:function bEe(c,l){var a=c.getAttribute("name");Jy(SEe,c,l);var h=l[l.length-1];a&&h.displayName?h[a]={value:h.value,displayName:h.displayName,toString:function(){return h.value}}:null!==a?h[a]=h.value:null!==h.displayName&&(h[h.displayName]=h.value),delete h.value},SchemaData:function MEe(c,l){Jy(EEe,c,l)}});function JW(c,l){Jy(TEe,c,l)}function eX(c,l){Jy(BW,c,l)}var wEe=jt(ln,{Style:tt(YO),key:tt(Bn),styleUrl:tt(HW)}),EEe=jt(ln,{SimpleData:function DEe(c,l){var a=c.getAttribute("name");if(null!==a){var h=Bn(c);l[l.length-1][a]=h}}}),AEe=jt(ln,{altitudeMode:tt(Bn),minAltitude:tt(Gi),maxAltitude:tt(Gi),north:tt(Gi),south:tt(Gi),east:tt(Gi),west:tt(Gi)}),REe=jt(ln,{minLodPixels:tt(Gi),maxLodPixels:tt(Gi),minFadeExtent:tt(Gi),maxFadeExtent:tt(Gi)}),LEe=jt(ln,{LinearRing:Eu(XW)}),NEe=jt(ln,{LinearRing:zO(XW)});function rE(c,l){for(var a=fS(l),d=[255*(4==a.length?a[3]:1),a[2],a[1],a[0]],f=0;f<4;++f){var m=Math.floor(d[f]).toString(16);d[f]=1==m.length?"0"+m:m}Ec(c,d.join(""))}var iE=jt(ln,{Data:Tn(function UEe(c,l,a){c.setAttribute("name",l.name);var h={node:c},d=l.value;"object"==typeof d?(null!==d&&d.displayName&&os(h,iE,kl,[d.displayName],a,["displayName"]),null!==d&&d.value&&os(h,iE,kl,[d.value],a,["value"])):os(h,iE,kl,[d],a,["value"])}),value:Tn(function zEe(c,l){Ec(c,l)}),displayName:Tn(function GEe(c,l){!function Uxe(c,l){c.appendChild(qx().createCDATASection(l))}(c,l)})}),HEe=jt(ln,{Placemark:Tn(oX)}),jEe=function(c,l,a){return rb(l[l.length-1].node.namespaceURI,"Placemark")},XEe=Mu("Data"),tX=jt(ln,["href"],jt(Rh,["x","y","w","h"])),nX=jt(ln,{href:Tn(Ec)},jt(Rh,{x:Tn(am),y:Tn(am),w:Tn(am),h:Tn(am)})),$Ee=function(c,l,a){return rb(Rh[0],"gx:"+a)},ZEe=jt(ln,["scale","heading","Icon","color","hotSpot"]),KEe=jt(ln,{Icon:Tn(function YEe(c,l,a){var h={node:c},f=tX[a[a.length-1].node.namespaceURI],m=xc(l,f);os(h,nX,kl,m,a,f),m=xc(l,f=tX[Rh[0]]),os(h,nX,$Ee,m,a,f)}),color:Tn(rE),heading:Tn(am),hotSpot:Tn(function CMe(c,l){c.setAttribute("x",String(l.x)),c.setAttribute("y",String(l.y)),c.setAttribute("xunits",l.xunits),c.setAttribute("yunits",l.yunits)}),scale:Tn(cX)}),JEe=jt(ln,["color","scale"]),eMe=jt(ln,{color:Tn(rE),scale:Tn(cX)}),nMe=jt(ln,["color","width"]),rMe=jt(ln,{color:Tn(rE),width:Tn(am)}),sMe={Point:"Point",LineString:"LineString",LinearRing:"LinearRing",Polygon:"Polygon",MultiPoint:"MultiGeometry",MultiLineString:"MultiGeometry",MultiPolygon:"MultiGeometry",GeometryCollection:"MultiGeometry"},rX=function(c,l,a){if(c)return rb(l[l.length-1].node.namespaceURI,sMe[c.getType()])},oMe=Mu("Point"),aMe=Mu("LineString"),lMe=Mu("LinearRing"),cMe=Mu("Polygon"),uMe=jt(ln,{LineString:Tn(nv),Point:Tn(nv),Polygon:Tn(lX),GeometryCollection:Tn(iX)});function iX(c,l,a){var m,h={node:c},d=l.getType(),f=[];"GeometryCollection"===d?(l.getGeometriesArrayRecursive().forEach(function(g){var y=g.getType();"MultiPoint"===y?f=f.concat(g.getPoints()):"MultiLineString"===y?f=f.concat(g.getLineStrings()):"MultiPolygon"===y?f=f.concat(g.getPolygons()):"Point"===y||"LineString"===y||"Polygon"===y?f.push(g):bn(!1,39)}),m=rX):"MultiPoint"===d?(f=l.getPoints(),m=oMe):"MultiLineString"===d?(f=l.getLineStrings(),m=aMe):"MultiPolygon"===d?(f=l.getPolygons(),m=cMe):bn(!1,39),os(h,uMe,m,f,a)}var hMe=jt(ln,{LinearRing:Tn(nv)});function sX(c,l,a){os({node:c},hMe,lMe,[l],a)}var KO=jt(ln,{ExtendedData:Tn(function qEe(c,l,a){for(var h={node:c},d=l.names,f=l.values,m=d.length,g=0;g<m;g++)os(h,iE,XEe,[{name:d[g],value:f[g]}],a)}),MultiGeometry:Tn(iX),LineString:Tn(nv),LinearRing:Tn(nv),Point:Tn(nv),Polygon:Tn(lX),Style:Tn(function wMe(c,l,a){var g,h={node:c},d={};if(l.pointStyles.length){var f=l.pointStyles[0].getText();f&&(d.LabelStyle=f);var m=l.pointStyles[0].getImage();m&&"function"==typeof m.getSrc&&(d.IconStyle=m)}(l.lineStyles.length&&(g=l.lineStyles[0].getStroke())&&(d.LineStyle=g),l.polyStyles.length)&&((g=l.polyStyles[0].getStroke())&&!d.LineStyle&&(d.LineStyle=g),d.PolyStyle=l.polyStyles[0]);var v=bMe[a[a.length-1].node.namespaceURI],_=xc(d,v);os(h,TMe,kl,_,a,v)}),address:Tn(Ec),description:Tn(Ec),name:Tn(Ec),open:Tn(ev),phoneNumber:Tn(Ec),styleUrl:Tn(Ec),visibility:Tn(ev)}),dMe=jt(ln,["name","open","visibility","address","phoneNumber","description","styleUrl","Style"]),fMe=Mu("ExtendedData");function oX(c,l,a){var h={node:c};l.getId()&&c.setAttribute("id",l.getId());var d=l.getProperties(),f={address:1,description:1,name:1,open:1,phoneNumber:1,styleUrl:1,visibility:1};f[l.getGeometryName()]=1;var m=Object.keys(d||{}).sort().filter(function(F){return!f[F]}),g=l.getStyleFunction();if(g){var y=g(l,0);if(y){var v=Array.isArray(y)?y:[y],_=v;if(l.getGeometry()&&(_=v.filter(function(F){var V=F.getGeometryFunction()(l);if(V){var z=V.getType();return"GeometryCollection"===z?V.getGeometriesArrayRecursive().filter(function(q){var K=q.getType();return"Point"===K||"MultiPoint"===K}).length:"Point"===z||"MultiPoint"===z}})),this.writeStyles_){var S=v,b=v;l.getGeometry()&&(S=v.filter(function(F){var V=F.getGeometryFunction()(l);if(V){var z=V.getType();return"GeometryCollection"===z?V.getGeometriesArrayRecursive().filter(function(q){var K=q.getType();return"LineString"===K||"MultiLineString"===K}).length:"LineString"===z||"MultiLineString"===z}}),b=v.filter(function(F){var V=F.getGeometryFunction()(l);if(V){var z=V.getType();return"GeometryCollection"===z?V.getGeometriesArrayRecursive().filter(function(q){var K=q.getType();return"Polygon"===K||"MultiPolygon"===K}).length:"Polygon"===z||"MultiPolygon"===z}})),d.Style={pointStyles:_,lineStyles:S,polyStyles:b}}if(_.length&&void 0===d.name){var T=_[0].getText();T&&(d.name=T.getText())}}}var E=dMe[a[a.length-1].node.namespaceURI],D=xc(d,E);if(os(h,KO,kl,D,a,E),m.length>0){var I=xc(d,m);os(h,KO,fMe,[{names:m,values:I}],a)}var L=a[0],P=l.getGeometry();P&&(P=zy(P,!0,L)),os(h,KO,rX,[P],a)}var pMe=jt(ln,["extrude","tessellate","altitudeMode","coordinates"]),mMe=jt(ln,{extrude:Tn(ev),tessellate:Tn(ev),altitudeMode:Tn(Ec),coordinates:Tn(function BEe(c,l,a){var m,h=a[a.length-1],d=h.layout,f=h.stride;"XY"==d||"XYM"==d?m=2:"XYZ"==d||"XYZM"==d?m=3:bn(!1,34);var g=l.length,y="";if(g>0){y+=l[0];for(var v=1;v<m;++v)y+=","+l[v];for(var _=f;_<g;_+=f)for(y+=" "+l[_],v=1;v<m;++v)y+=","+l[_+v]}Ec(c,y)})});function nv(c,l,a){var h=l.getFlatCoordinates(),d={node:c};d.layout=l.getLayout(),d.stride=l.getStride();var f=l.getProperties();f.coordinates=h;var g=pMe[a[a.length-1].node.namespaceURI],y=xc(f,g);os(d,mMe,kl,y,a,g)}var gMe=jt(ln,["color","fill","outline"]),aX=jt(ln,{outerBoundaryIs:Tn(sX),innerBoundaryIs:Tn(sX)}),yMe=Mu("innerBoundaryIs"),vMe=Mu("outerBoundaryIs");function lX(c,l,a){var h=l.getLinearRings(),d=h.shift(),f={node:c};os(f,aX,yMe,h,a),os(f,aX,vMe,[d],a)}var _Me=jt(ln,{color:Tn(rE),fill:Tn(ev),outline:Tn(ev)});function cX(c,l){am(c,Math.round(1e6*l)/1e6)}var bMe=jt(ln,["IconStyle","LabelStyle","LineStyle","PolyStyle"]),TMe=jt(ln,{IconStyle:Tn(function QEe(c,l,a){var h={node:c},d={},f=l.getSrc(),m=l.getSize(),g=l.getImageSize(),y={href:f};if(m){y.w=m[0],y.h=m[1];var v=l.getAnchor(),_=l.getOrigin();_&&g&&0!==_[0]&&_[1]!==m[1]&&(y.x=_[0],y.y=g[1]-(_[1]+m[1])),!v||v[0]===m[0]/2&&v[1]===m[1]/2||(d.hotSpot={x:v[0],xunits:"pixels",y:m[1]-v[1],yunits:"pixels"})}d.Icon=y;var b=l.getScaleArray()[0],T=m;null===T&&(T=ab),2==T.length&&(b/=Jx(T)),1!==b&&(d.scale=b);var E=l.getRotation();0!==E&&(d.heading=E);var D=l.getColor();D&&(d.color=D);var M=ZEe[a[a.length-1].node.namespaceURI],L=xc(d,M);os(h,KEe,kl,L,a,M)}),LabelStyle:Tn(function tMe(c,l,a){var h={node:c},d={},f=l.getFill();f&&(d.color=f.getColor());var m=l.getScale();m&&1!==m&&(d.scale=m);var y=JEe[a[a.length-1].node.namespaceURI],v=xc(d,y);os(h,eMe,kl,v,a,y)}),LineStyle:Tn(function iMe(c,l,a){var h={node:c},d={color:l.getColor(),width:Number(l.getWidth())||1},m=nMe[a[a.length-1].node.namespaceURI],g=xc(d,m);os(h,rMe,kl,g,a,m)}),PolyStyle:Tn(function SMe(c,l,a){var h={node:c},d=l.getFill(),f=l.getStroke(),m={color:d?d.getColor():void 0,fill:!!d&&void 0,outline:!!f&&void 0},y=gMe[a[a.length-1].node.namespaceURI],v=xc(m,y);os(h,_Me,kl,v,a,y)})});const sE=Zxe;function uX(c){var h,d,l=Object.keys(c.defs),a=l.length;for(h=0;h<a;++h){var f=l[h];if(!cn(f)){var m=c.defs(f),g=m.units;!g&&"longlat"===m.projName&&(g=ta.DEGREES),F9(new Gp({code:f,axisOrientation:m.axis,metersPerUnit:m.to_meter,units:g}))}}for(h=0;h<a;++h){var y=l[h],v=cn(y);for(d=0;d<a;++d){var _=l[d],S=cn(_);if(!O9(y,_))if(c.defs[y]===c.defs[_])t2([v,S]);else{var b=c(y,_);u0e(v,S,B9(v,S,b.forward),B9(S,v,b.inverse))}}}}var dX=.0066943799901413165,lb=484813681109536e-20,pt=Math.PI/2,Bt=1e-10,ho=.017453292519943295,Du=57.29577951308232,Yr=Math.PI/4,cb=2*Math.PI,as=3.14159265359,Aa={greenwich:0,lisbon:-9.131906111111,paris:2.337229166667,bogota:-74.080916666667,madrid:-3.687938888889,rome:12.452333333333,bern:7.439583333333,jakarta:106.807719444444,ferro:-17.666666666667,brussels:4.367975,stockholm:18.058277777778,athens:23.7163375,oslo:10.722916666667};const RMe={ft:{to_meter:.3048},"us-ft":{to_meter:1200/3937}};var fX=/[\s_\-\/\(\)]/g;function Tf(c,l){if(c[l])return c[l];for(var f,a=Object.keys(c),h=l.toLowerCase().replace(fX,""),d=-1;++d<a.length;)if((f=a[d]).toLowerCase().replace(fX,"")===h)return c[f]}function JO(c){var h,d,f,l={},a=c.split("+").map(function(g){return g.trim()}).filter(function(g){return g}).reduce(function(g,y){var v=y.split("=");return v.push(!0),g[v[0].toLowerCase()]=v[1],g},{}),m={proj:"projName",datum:"datumCode",rf:function(g){l.rf=parseFloat(g)},lat_0:function(g){l.lat0=g*ho},lat_1:function(g){l.lat1=g*ho},lat_2:function(g){l.lat2=g*ho},lat_ts:function(g){l.lat_ts=g*ho},lon_0:function(g){l.long0=g*ho},lon_1:function(g){l.long1=g*ho},lon_2:function(g){l.long2=g*ho},alpha:function(g){l.alpha=parseFloat(g)*ho},gamma:function(g){l.rectified_grid_angle=parseFloat(g)},lonc:function(g){l.longc=g*ho},x_0:function(g){l.x0=parseFloat(g)},y_0:function(g){l.y0=parseFloat(g)},k_0:function(g){l.k0=parseFloat(g)},k:function(g){l.k0=parseFloat(g)},a:function(g){l.a=parseFloat(g)},b:function(g){l.b=parseFloat(g)},r_a:function(){l.R_A=!0},zone:function(g){l.zone=parseInt(g,10)},south:function(){l.utmSouth=!0},towgs84:function(g){l.datum_params=g.split(",").map(function(y){return parseFloat(y)})},to_meter:function(g){l.to_meter=parseFloat(g)},units:function(g){l.units=g;var y=Tf(RMe,g);y&&(l.to_meter=y.to_meter)},from_greenwich:function(g){l.from_greenwich=g*ho},pm:function(g){var y=Tf(Aa,g);l.from_greenwich=(y||parseFloat(g))*ho},nadgrids:function(g){"@null"===g?l.datumCode="none":l.nadgrids=g},axis:function(g){var y="ewnsud";3===g.length&&-1!==y.indexOf(g.substr(0,1))&&-1!==y.indexOf(g.substr(1,1))&&-1!==y.indexOf(g.substr(2,1))&&(l.axis=g)},approx:function(){l.approx=!0}};for(h in a)d=a[h],h in m?"function"==typeof(f=m[h])?f(d):l[f]=d:l[h]=d;return"string"==typeof l.datumCode&&"WGS84"!==l.datumCode&&(l.datumCode=l.datumCode.toLowerCase()),l}var LMe=/\s/,OMe=/[A-Za-z]/,NMe=/[A-Za-z84]/,lE=/[,\]]/,yX=/[\d\.E\-\+]/;function Ph(c){if("string"!=typeof c)throw new Error("not a string");this.text=c.trim(),this.level=0,this.place=0,this.root=null,this.stack=[],this.currentObject=null,this.state=1}function vX(c,l,a){Array.isArray(l)&&(a.unshift(l),l=null);var d=a.reduce(function(f,m){return rv(m,f),f},l?{}:c);l&&(c[l]=d)}function rv(c,l){if(Array.isArray(c)){var a=c.shift();if("PARAMETER"===a&&(a=c.shift()),1===c.length)return Array.isArray(c[0])?(l[a]={},void rv(c[0],l[a])):void(l[a]=c[0]);if(c.length)if("TOWGS84"!==a){if("AXIS"===a)return a in l||(l[a]=[]),void l[a].push(c);var h;switch(Array.isArray(a)||(l[a]={}),a){case"UNIT":case"PRIMEM":case"VERT_DATUM":return l[a]={name:c[0].toLowerCase(),convert:c[1]},void(3===c.length&&rv(c[2],l[a]));case"SPHEROID":case"ELLIPSOID":return l[a]={name:c[0],a:c[1],rf:c[2]},void(4===c.length&&rv(c[3],l[a]));case"PROJECTEDCRS":case"PROJCRS":case"GEOGCS":case"GEOCCS":case"PROJCS":case"LOCAL_CS":case"GEODCRS":case"GEODETICCRS":case"GEODETICDATUM":case"EDATUM":case"ENGINEERINGDATUM":case"VERT_CS":case"VERTCRS":case"VERTICALCRS":case"COMPD_CS":case"COMPOUNDCRS":case"ENGINEERINGCRS":case"ENGCRS":case"FITTED_CS":case"LOCAL_DATUM":case"DATUM":return c[0]=["name",c[0]],void vX(l,a,c);default:for(h=-1;++h<c.length;)if(!Array.isArray(c[h]))return rv(c,l[a]);return vX(l,a,c)}}else l[a]=c;else l[a]=!0}else l[c]=!0}function Lh(c){return.017453292519943295*c}function _X(c){var l=function FMe(c){return new Ph(c).output()}(c),a=l.shift(),h=l.shift();l.unshift(["name",h]),l.unshift(["type",a]);var d={};return rv(l,d),function BMe(c){if("GEOGCS"===c.type?c.projName="longlat":"LOCAL_CS"===c.type?(c.projName="identity",c.local=!0):c.projName="object"==typeof c.PROJECTION?Object.keys(c.PROJECTION)[0]:c.PROJECTION,c.AXIS){for(var l="",a=0,h=c.AXIS.length;a<h;++a){var d=[c.AXIS[a][0].toLowerCase(),c.AXIS[a][1].toLowerCase()];-1!==d[0].indexOf("north")||("y"===d[0]||"lat"===d[0])&&"north"===d[1]?l+="n":-1!==d[0].indexOf("south")||("y"===d[0]||"lat"===d[0])&&"south"===d[1]?l+="s":-1!==d[0].indexOf("east")||("x"===d[0]||"lon"===d[0])&&"east"===d[1]?l+="e":(-1!==d[0].indexOf("west")||("x"===d[0]||"lon"===d[0])&&"west"===d[1])&&(l+="w")}2===l.length&&(l+="u"),3===l.length&&(c.axis=l)}c.UNIT&&(c.units=c.UNIT.name.toLowerCase(),"metre"===c.units&&(c.units="meter"),c.UNIT.convert&&("GEOGCS"===c.type?c.DATUM&&c.DATUM.SPHEROID&&(c.to_meter=c.UNIT.convert*c.DATUM.SPHEROID.a):c.to_meter=c.UNIT.convert));var f=c.GEOGCS;function m(v){return v*(c.to_meter||1)}"GEOGCS"===c.type&&(f=c),f&&(c.datumCode=f.DATUM?f.DATUM.name.toLowerCase():f.name.toLowerCase(),"d_"===c.datumCode.slice(0,2)&&(c.datumCode=c.datumCode.slice(2)),("new_zealand_geodetic_datum_1949"===c.datumCode||"new_zealand_1949"===c.datumCode)&&(c.datumCode="nzgd49"),("wgs_1984"===c.datumCode||"world_geodetic_system_1984"===c.datumCode)&&("Mercator_Auxiliary_Sphere"===c.PROJECTION&&(c.sphere=!0),c.datumCode="wgs84"),"_ferro"===c.datumCode.slice(-6)&&(c.datumCode=c.datumCode.slice(0,-6)),"_jakarta"===c.datumCode.slice(-8)&&(c.datumCode=c.datumCode.slice(0,-8)),~c.datumCode.indexOf("belge")&&(c.datumCode="rnb72"),f.DATUM&&f.DATUM.SPHEROID&&(c.ellps=f.DATUM.SPHEROID.name.replace("_19","").replace(/[Cc]larke\_18/,"clrk"),"international"===c.ellps.toLowerCase().slice(0,13)&&(c.ellps="intl"),c.a=f.DATUM.SPHEROID.a,c.rf=parseFloat(f.DATUM.SPHEROID.rf,10)),f.DATUM&&f.DATUM.TOWGS84&&(c.datum_params=f.DATUM.TOWGS84),~c.datumCode.indexOf("osgb_1936")&&(c.datumCode="osgb36"),~c.datumCode.indexOf("osni_1952")&&(c.datumCode="osni52"),(~c.datumCode.indexOf("tm65")||~c.datumCode.indexOf("geodetic_datum_of_1965"))&&(c.datumCode="ire65"),"ch1903+"===c.datumCode&&(c.datumCode="ch1903"),~c.datumCode.indexOf("israel")&&(c.datumCode="isr93")),c.b&&!isFinite(c.b)&&(c.b=c.a),[["standard_parallel_1","Standard_Parallel_1"],["standard_parallel_1","Latitude of 1st standard parallel"],["standard_parallel_2","Standard_Parallel_2"],["standard_parallel_2","Latitude of 2nd standard parallel"],["false_easting","False_Easting"],["false_easting","False easting"],["false-easting","Easting at false origin"],["false_northing","False_Northing"],["false_northing","False northing"],["false_northing","Northing at false origin"],["central_meridian","Central_Meridian"],["central_meridian","Longitude of natural origin"],["central_meridian","Longitude of false origin"],["latitude_of_origin","Latitude_Of_Origin"],["latitude_of_origin","Central_Parallel"],["latitude_of_origin","Latitude of natural origin"],["latitude_of_origin","Latitude of false origin"],["scale_factor","Scale_Factor"],["k0","scale_factor"],["latitude_of_center","Latitude_Of_Center"],["latitude_of_center","Latitude_of_center"],["lat0","latitude_of_center",Lh],["longitude_of_center","Longitude_Of_Center"],["longitude_of_center","Longitude_of_center"],["longc","longitude_of_center",Lh],["x0","false_easting",m],["y0","false_northing",m],["long0","central_meridian",Lh],["lat0","latitude_of_origin",Lh],["lat0","standard_parallel_1",Lh],["lat1","standard_parallel_1",Lh],["lat2","standard_parallel_2",Lh],["azimuth","Azimuth"],["alpha","azimuth",Lh],["srsCode","name"]].forEach(function(v){return function VMe(c,l){var a=l[0],h=l[1];!(a in c)&&h in c&&(c[a]=c[h],3===l.length&&(c[a]=l[2](c[a])))}(c,v)}),!c.long0&&c.longc&&("Albers_Conic_Equal_Area"===c.projName||"Lambert_Azimuthal_Equal_Area"===c.projName)&&(c.long0=c.longc),!c.lat_ts&&c.lat1&&("Stereographic_South_Pole"===c.projName||"Polar Stereographic (variant B)"===c.projName)&&(c.lat0=Lh(c.lat1>0?90:-90),c.lat_ts=c.lat1)}(d),d}function Vl(c){var l=this;if(2===arguments.length){var a=arguments[1];Vl[c]="string"==typeof a?"+"===a.charAt(0)?JO(arguments[1]):_X(arguments[1]):a}else if(1===arguments.length){if(Array.isArray(c))return c.map(function(h){Array.isArray(h)?Vl.apply(l,h):Vl(h)});if("string"==typeof c){if(c in Vl)return Vl[c]}else"EPSG"in c?Vl["EPSG:"+c.EPSG]=c:"ESRI"in c?Vl["ESRI:"+c.ESRI]=c:"IAU2000"in c?Vl["IAU2000:"+c.IAU2000]=c:console.log(c);return}}Ph.prototype.readCharicter=function(){var c=this.text[this.place++];if(4!==this.state)for(;LMe.test(c);){if(this.place>=this.text.length)return;c=this.text[this.place++]}switch(this.state){case 1:return this.neutral(c);case 2:return this.keyword(c);case 4:return this.quoted(c);case 5:return this.afterquote(c);case 3:return this.number(c);case-1:return}},Ph.prototype.afterquote=function(c){if('"'===c)return this.word+='"',void(this.state=4);if(lE.test(c))return this.word=this.word.trim(),void this.afterItem(c);throw new Error("havn't handled \""+c+'" in afterquote yet, index '+this.place)},Ph.prototype.afterItem=function(c){return","===c?(null!==this.word&&this.currentObject.push(this.word),this.word=null,void(this.state=1)):"]"===c?(this.level--,null!==this.word&&(this.currentObject.push(this.word),this.word=null),this.state=1,this.currentObject=this.stack.pop(),void(this.currentObject||(this.state=-1))):void 0},Ph.prototype.number=function(c){if(!yX.test(c)){if(lE.test(c))return this.word=parseFloat(this.word),void this.afterItem(c);throw new Error("havn't handled \""+c+'" in number yet, index '+this.place)}this.word+=c},Ph.prototype.quoted=function(c){'"'!==c?this.word+=c:this.state=5},Ph.prototype.keyword=function(c){if(NMe.test(c))this.word+=c;else{if("["===c){var l=[];return l.push(this.word),this.level++,null===this.root?this.root=l:this.currentObject.push(l),this.stack.push(this.currentObject),this.currentObject=l,void(this.state=1)}if(!lE.test(c))throw new Error("havn't handled \""+c+'" in keyword yet, index '+this.place);this.afterItem(c)}},Ph.prototype.neutral=function(c){if(OMe.test(c))return this.word=c,void(this.state=2);if('"'===c)return this.word="",void(this.state=4);if(yX.test(c))return this.word=c,void(this.state=3);if(!lE.test(c))throw new Error("havn't handled \""+c+'" in neutral yet, index '+this.place);this.afterItem(c)},Ph.prototype.output=function(){for(;this.place<this.text.length;)this.readCharicter();if(-1===this.state)return this.root;throw new Error('unable to parse string "'+this.text+'". State is '+this.state)},function xMe(c){c("EPSG:4326","+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees"),c("EPSG:4269","+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees"),c("EPSG:3857","+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs"),c.WGS84=c["EPSG:4326"],c["EPSG:3785"]=c["EPSG:3857"],c.GOOGLE=c["EPSG:3857"],c["EPSG:900913"]=c["EPSG:3857"],c["EPSG:102113"]=c["EPSG:3857"]}(Vl);const cE=Vl;var zMe=["PROJECTEDCRS","PROJCRS","GEOGCS","GEOCCS","PROJCS","LOCAL_CS","GEODCRS","GEODETICCRS","GEODETICDATUM","ENGCRS","ENGINEERINGCRS"],jMe=["3857","900913","3785","102113"];function SX(c,l){var a,h;if(c=c||{},!l)return c;for(h in l)void 0!==(a=l[h])&&(c[h]=a);return c}function Au(c,l,a){var h=c*l;return a/Math.sqrt(1-h*h)}function hb(c){return c<0?-1:1}function Kt(c){return Math.abs(c)<=as?c:c-hb(c)*cb}function Mc(c,l,a){var h=c*a;return h=Math.pow((1-h)/(1+h),.5*c),Math.tan(.5*(pt-l))/h}function db(c,l){for(var h,d,a=.5*c,f=pt-2*Math.atan(l),m=0;m<=15;m++)if(h=c*Math.sin(f),f+=d=pt-2*Math.atan(l*Math.pow((1-h)/(1+h),a))-f,Math.abs(d)<=1e-10)return f;return-9999}const eDe={init:function ZMe(){var c=this.b/this.a;this.es=1-c*c,"x0"in this||(this.x0=0),"y0"in this||(this.y0=0),this.e=Math.sqrt(this.es),this.lat_ts?this.k0=this.sphere?Math.cos(this.lat_ts):Au(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)):this.k0||(this.k0=this.k?this.k:1)},forward:function KMe(c){var h,d,l=c.x,a=c.y;if(a*Du>90&&a*Du<-90&&l*Du>180&&l*Du<-180)return null;if(Math.abs(Math.abs(a)-pt)<=Bt)return null;if(this.sphere)h=this.x0+this.a*this.k0*Kt(l-this.long0),d=this.y0+this.a*this.k0*Math.log(Math.tan(Yr+.5*a));else{var f=Math.sin(a),m=Mc(this.e,a,f);h=this.x0+this.a*this.k0*Kt(l-this.long0),d=this.y0-this.a*this.k0*Math.log(m)}return c.x=h,c.y=d,c},inverse:function QMe(c){var h,d,l=c.x-this.x0,a=c.y-this.y0;if(this.sphere)d=pt-2*Math.atan(Math.exp(-a/(this.a*this.k0)));else{var f=Math.exp(-a/(this.a*this.k0));if(-9999===(d=db(this.e,f)))return null}return h=Kt(this.long0+l/(this.a*this.k0)),c.x=h,c.y=d,c},names:["Mercator","Popular Visualisation Pseudo Mercator","Mercator_1SP","Mercator_Auxiliary_Sphere","merc"]};function bX(c){return c}var rDe=[eDe,{init:function tDe(){},forward:bX,inverse:bX,names:["longlat","identity"]}],uE={},hE=[];function TX(c,l){var a=hE.length;return c.names?(hE[a]=c,c.names.forEach(function(h){uE[h.toLowerCase()]=a}),this):(console.log(l),!0)}const oDe={start:function sDe(){rDe.forEach(TX)},add:TX,get:function iDe(c){if(!c)return!1;var l=c.toLowerCase();return typeof uE[l]<"u"&&hE[uE[l]]?hE[uE[l]]:void 0}};var Xn={MERIT:{a:6378137,rf:298.257,ellipseName:"MERIT 1983"},SGS85:{a:6378136,rf:298.257,ellipseName:"Soviet Geodetic System 85"},GRS80:{a:6378137,rf:298.257222101,ellipseName:"GRS 1980(IUGG, 1980)"},IAU76:{a:6378140,rf:298.257,ellipseName:"IAU 1976"},airy:{a:6377563.396,b:6356256.91,ellipseName:"Airy 1830"},APL4:{a:6378137,rf:298.25,ellipseName:"Appl. Physics. 1965"},NWL9D:{a:6378145,rf:298.25,ellipseName:"Naval Weapons Lab., 1965"},mod_airy:{a:6377340.189,b:6356034.446,ellipseName:"Modified Airy"},andrae:{a:6377104.43,rf:300,ellipseName:"Andrae 1876 (Den., Iclnd.)"},aust_SA:{a:6378160,rf:298.25,ellipseName:"Australian Natl & S. Amer. 1969"},GRS67:{a:6378160,rf:298.247167427,ellipseName:"GRS 67(IUGG 1967)"},bessel:{a:6377397.155,rf:299.1528128,ellipseName:"Bessel 1841"},bess_nam:{a:6377483.865,rf:299.1528128,ellipseName:"Bessel 1841 (Namibia)"},clrk66:{a:6378206.4,b:6356583.8,ellipseName:"Clarke 1866"},clrk80:{a:6378249.145,rf:293.4663,ellipseName:"Clarke 1880 mod."},clrk58:{a:6378293.645208759,rf:294.2606763692654,ellipseName:"Clarke 1858"},CPM:{a:6375738.7,rf:334.29,ellipseName:"Comm. des Poids et Mesures 1799"},delmbr:{a:6376428,rf:311.5,ellipseName:"Delambre 1810 (Belgium)"},engelis:{a:6378136.05,rf:298.2566,ellipseName:"Engelis 1985"},evrst30:{a:6377276.345,rf:300.8017,ellipseName:"Everest 1830"},evrst48:{a:6377304.063,rf:300.8017,ellipseName:"Everest 1948"},evrst56:{a:6377301.243,rf:300.8017,ellipseName:"Everest 1956"},evrst69:{a:6377295.664,rf:300.8017,ellipseName:"Everest 1969"},evrstSS:{a:6377298.556,rf:300.8017,ellipseName:"Everest (Sabah & Sarawak)"},fschr60:{a:6378166,rf:298.3,ellipseName:"Fischer (Mercury Datum) 1960"},fschr60m:{a:6378155,rf:298.3,ellipseName:"Fischer 1960"},fschr68:{a:6378150,rf:298.3,ellipseName:"Fischer 1968"},helmert:{a:6378200,rf:298.3,ellipseName:"Helmert 1906"},hough:{a:6378270,rf:297,ellipseName:"Hough"},intl:{a:6378388,rf:297,ellipseName:"International 1909 (Hayford)"},kaula:{a:6378163,rf:298.24,ellipseName:"Kaula 1961"},lerch:{a:6378139,rf:298.257,ellipseName:"Lerch 1979"},mprts:{a:6397300,rf:191,ellipseName:"Maupertius 1738"},new_intl:{a:6378157.5,b:6356772.2,ellipseName:"New International 1967"},plessis:{a:6376523,rf:6355863,ellipseName:"Plessis 1817 (France)"},krass:{a:6378245,rf:298.3,ellipseName:"Krassovsky, 1942"},SEasia:{a:6378155,b:6356773.3205,ellipseName:"Southeast Asia"},walbeck:{a:6376896,b:6355834.8467,ellipseName:"Walbeck"},WGS60:{a:6378165,rf:298.3,ellipseName:"WGS 60"},WGS66:{a:6378145,rf:298.25,ellipseName:"WGS 66"},WGS7:{a:6378135,rf:298.26,ellipseName:"WGS 72"}},aDe=Xn.WGS84={a:6378137,rf:298.257223563,ellipseName:"WGS 84"};Xn.sphere={a:6370997,b:6370997,ellipseName:"Normal Sphere (r=6370997)"};var eo={wgs84:{towgs84:"0,0,0",ellipse:"WGS84",datumName:"WGS84"},ch1903:{towgs84:"674.374,15.056,405.346",ellipse:"bessel",datumName:"swiss"},ggrs87:{towgs84:"-199.87,74.79,246.62",ellipse:"GRS80",datumName:"Greek_Geodetic_Reference_System_1987"},nad83:{towgs84:"0,0,0",ellipse:"GRS80",datumName:"North_American_Datum_1983"},nad27:{nadgrids:"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat",ellipse:"clrk66",datumName:"North_American_Datum_1927"},potsdam:{towgs84:"598.1,73.7,418.2,0.202,0.045,-2.455,6.7",ellipse:"bessel",datumName:"Potsdam Rauenberg 1950 DHDN"},carthage:{towgs84:"-263.0,6.0,431.0",ellipse:"clark80",datumName:"Carthage 1934 Tunisia"},hermannskogel:{towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Hermannskogel"},osni52:{towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"airy",datumName:"Irish National"},ire65:{towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"mod_airy",datumName:"Ireland 1965"},rassadiran:{towgs84:"-133.63,-157.5,-158.62",ellipse:"intl",datumName:"Rassadiran"},nzgd49:{towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993",ellipse:"intl",datumName:"New Zealand Geodetic Datum 1949"},osgb36:{towgs84:"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894",ellipse:"airy",datumName:"Airy 1830"},s_jtsk:{towgs84:"589,76,480",ellipse:"bessel",datumName:"S-JTSK (Ferro)"},beduaram:{towgs84:"-106,-87,188",ellipse:"clrk80",datumName:"Beduaram"},gunung_segara:{towgs84:"-403,684,41",ellipse:"bessel",datumName:"Gunung Segara Jakarta"},rnb72:{towgs84:"106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1",ellipse:"intl",datumName:"Reseau National Belge 1972"}};var wX={};function pDe(c){if(0===c.length)return null;var l="@"===c[0];return l&&(c=c.slice(1)),"null"===c?{name:"null",mandatory:!l,grid:null,isNull:!0}:{name:c,mandatory:!l,grid:wX[c]||null,isNull:!1}}function iv(c){return c/3600*Math.PI/180}function tN(c,l,a){return String.fromCharCode.apply(null,new Uint8Array(c.buffer.slice(l,a)))}function vDe(c){return c.map(function(l){return[iv(l.longitudeShift),iv(l.latitudeShift)]})}function _De(c,l,a){return{name:tN(c,l+8,l+16).trim(),parent:tN(c,l+24,l+24+8).trim(),lowerLatitude:c.getFloat64(l+72,a),upperLatitude:c.getFloat64(l+88,a),lowerLongitude:c.getFloat64(l+104,a),upperLongitude:c.getFloat64(l+120,a),latitudeInterval:c.getFloat64(l+136,a),longitudeInterval:c.getFloat64(l+152,a),gridNodeCount:c.getInt32(l+168,a)}}function SDe(c,l,a,h){for(var d=l+176,m=[],g=0;g<a.gridNodeCount;g++){var y={latitudeShift:c.getFloat32(d+16*g,h),longitudeShift:c.getFloat32(d+16*g+4,h),latitudeAccuracy:c.getFloat32(d+16*g+8,h),longitudeAccuracy:c.getFloat32(d+16*g+12,h)};m.push(y)}return m}function sv(c,l){if(!(this instanceof sv))return new sv(c);l=l||function(v){if(v)throw v};var a=function $Me(c){if(!function UMe(c){return"string"==typeof c}(c))return c;if(function GMe(c){return c in cE}(c))return cE[c];if(function HMe(c){return zMe.some(function(l){return c.indexOf(l)>-1})}(c)){var l=_X(c);if(function WMe(c){var l=Tf(c,"authority");if(l){var a=Tf(l,"epsg");return a&&jMe.indexOf(a)>-1}}(l))return cE["EPSG:3857"];var a=function XMe(c){var l=Tf(c,"extension");if(l)return Tf(l,"proj4")}(l);return a?JO(a):l}return function qMe(c){return"+"===c[0]}(c)?JO(c):void 0}(c);if("object"==typeof a){var h=sv.projections.get(a.projName);if(h){if(a.datumCode&&"none"!==a.datumCode){var d=Tf(eo,a.datumCode);d&&(a.datum_params=a.datum_params||(d.towgs84?d.towgs84.split(","):null),a.ellps=d.ellipse,a.datumName=d.datumName?d.datumName:a.datumCode)}a.k0=a.k0||1,a.axis=a.axis||"enu",a.ellps=a.ellps||"wgs84",a.lat1=a.lat1||a.lat0;var f=function cDe(c,l,a,h,d){if(!c){var f=Tf(Xn,h);f||(f=aDe),c=f.a,l=f.b,a=f.rf}return a&&!l&&(l=(1-1/a)*c),(0===a||Math.abs(c-l)<Bt)&&(d=!0,l=c),{a:c,b:l,rf:a,sphere:d}}(a.a,a.b,a.rf,a.ellps,a.sphere),m=function lDe(c,l,a,h){var d=c*c,f=l*l,m=(d-f)/d,g=0;return h?(d=(c*=1-m*(.16666666666666666+m*(.04722222222222222+.022156084656084655*m)))*c,m=0):g=Math.sqrt(m),{es:m,e:g,ep2:(d-f)/f}}(f.a,f.b,0,a.R_A),g=function fDe(c){return void 0===c?null:c.split(",").map(pDe)}(a.nadgrids),y=a.datum||function uDe(c,l,a,h,d,f,m){var g={};return g.datum_type=void 0===c||"none"===c?5:4,l&&(g.datum_params=l.map(parseFloat),(0!==g.datum_params[0]||0!==g.datum_params[1]||0!==g.datum_params[2])&&(g.datum_type=1),g.datum_params.length>3&&(0!==g.datum_params[3]||0!==g.datum_params[4]||0!==g.datum_params[5]||0!==g.datum_params[6])&&(g.datum_type=2,g.datum_params[3]*=lb,g.datum_params[4]*=lb,g.datum_params[5]*=lb,g.datum_params[6]=g.datum_params[6]/1e6+1)),m&&(g.datum_type=3,g.grids=m),g.a=a,g.b=h,g.es=d,g.ep2=f,g}(a.datumCode,a.datum_params,f.a,f.b,m.es,m.ep2,g);SX(this,a),SX(this,h),this.a=f.a,this.b=f.b,this.rf=f.rf,this.sphere=f.sphere,this.es=m.es,this.e=m.e,this.ep2=m.ep2,this.datum=y,this.init(),l(null,this)}else l(c)}else l(c)}(sv.projections=oDe).start();const fb=sv;function CX(c,l,a){var m,g,v,h=c.x,d=c.y,f=c.z?c.z:0;if(d<-pt&&d>-1.001*pt)d=-pt;else if(d>pt&&d<1.001*pt)d=pt;else{if(d<-pt)return{x:-1/0,y:-1/0,z:c.z};if(d>pt)return{x:1/0,y:1/0,z:c.z}}return h>Math.PI&&(h-=2*Math.PI),g=Math.sin(d),v=Math.cos(d),{x:((m=a/Math.sqrt(1-l*(g*g)))+f)*v*Math.cos(h),y:(m+f)*v*Math.sin(h),z:(m*(1-l)+f)*g}}function xX(c,l,a,h){var g,y,v,_,S,b,T,x,E,D,I,M,L,z,K,P=c.x,F=c.y,V=c.z?c.z:0;if(g=Math.sqrt(P*P+F*F),y=Math.sqrt(P*P+F*F+V*V),g/a<1e-12){if(z=0,y/a<1e-12)return K=-h,{x:c.x,y:c.y,z:c.z}}else z=Math.atan2(F,P);v=V/y,x=(_=g/y)*(1-l)*(S=1/Math.sqrt(1-l*(2-l)*_*_)),E=v*S,L=0;do{L++,b=l*(T=a/Math.sqrt(1-l*E*E))/(T+(K=g*x+V*E-T*(1-l*E*E))),M=(I=v*(S=1/Math.sqrt(1-b*(2-b)*_*_)))*x-(D=_*(1-b)*S)*E,x=D,E=I}while(M*M>1e-24&&L<30);return{x:z,y:Math.atan(I/Math.abs(D)),z:K}}function dE(c){return 1===c||2===c}function EX(c,l,a){if(null===c.grids||0===c.grids.length)return console.log("Grid shift grids not found"),-1;for(var h={x:-a.x,y:a.y},d={x:Number.NaN,y:Number.NaN},m=[],g=0;g<c.grids.length;g++){var y=c.grids[g];if(m.push(y.name),y.isNull){d=h;break}if(null!==y.grid){var v=y.grid.subgrids[0],_=(Math.abs(v.del[1])+Math.abs(v.del[0]))/1e4;if(!(v.ll[1]-_>h.y||v.ll[0]-_>h.x||v.ll[1]+(v.lim[1]-1)*v.del[1]+_<h.y||v.ll[0]+(v.lim[0]-1)*v.del[0]+_<h.x||(d=xDe(h,l,v),isNaN(d.x))))break}else if(y.mandatory)return console.log("Unable to find mandatory grid '"+y.name+"'"),-1}return isNaN(d.x)?(console.log("Failed to find a grid shift table for location '"+-h.x*Du+" "+h.y*Du+" tried: '"+m+"'"),-1):(a.x=-d.x,a.y=d.y,0)}function xDe(c,l,a){var h={x:Number.NaN,y:Number.NaN};if(isNaN(c.x))return h;var d={x:c.x,y:c.y};d.x-=a.ll[0],d.y-=a.ll[1],d.x=Kt(d.x-Math.PI)+Math.PI;var f=MX(d,a);if(l){if(isNaN(f.x))return h;f.x=d.x-f.x,f.y=d.y-f.y;var y,v,m=9;do{if(v=MX(f,a),isNaN(v.x)){console.log("Inverse grid shift iteration failed, presumably at grid edge.  Using first approximation.");break}f.x+=(y={x:d.x-(v.x+f.x),y:d.y-(v.y+f.y)}).x,f.y+=y.y}while(m--&&Math.abs(y.x)>1e-12&&Math.abs(y.y)>1e-12);if(m<0)return console.log("Inverse grid shift iterator failed to converge."),h;h.x=Kt(f.x+a.ll[0]),h.y=f.y+a.ll[1]}else isNaN(f.x)||(h.x=c.x+f.x,h.y=c.y+f.y);return h}function MX(c,l){var m,a={x:c.x/l.del[0],y:c.y/l.del[1]},h_x=Math.floor(a.x),h_y=Math.floor(a.y),d_x=a.x-1*h_x,d_y=a.y-1*h_y,f={x:Number.NaN,y:Number.NaN};if(h_x<0||h_x>=l.lim[0]||h_y<0||h_y>=l.lim[1])return f;var g_x=l.cvs[m=h_y*l.lim[0]+h_x][0],g_y=l.cvs[m][1];m++;var y_x=l.cvs[m][0],y_y=l.cvs[m][1],v_x=l.cvs[m+=l.lim[0]][0],v_y=l.cvs[m][1];m--;var __y=l.cvs[m][1],S=d_x*d_y,b=d_x*(1-d_y),T=(1-d_x)*(1-d_y),x=(1-d_x)*d_y;return f.x=T*g_x+b*y_x+x*l.cvs[m][0]+S*v_x,f.y=T*g_y+b*y_y+x*__y+S*v_y,f}function DX(c,l,a){var m,g,y,h=a.x,d=a.y,f=a.z||0,v={};for(y=0;y<3;y++)if(!l||2!==y||void 0!==a.z)switch(0===y?(m=h,g=-1!=="ew".indexOf(c.axis[y])?"x":"y"):1===y?(m=d,g=-1!=="ns".indexOf(c.axis[y])?"y":"x"):(m=f,g="z"),c.axis[y]){case"e":case"n":v[g]=m;break;case"w":case"s":v[g]=-m;break;case"u":void 0!==a[g]&&(v.z=m);break;case"d":void 0!==a[g]&&(v.z=-m);break;default:return null}return v}function AX(c){var l={x:c[0],y:c[1]};return c.length>2&&(l.z=c[2]),c.length>3&&(l.m=c[3]),l}function IX(c){if("function"==typeof Number.isFinite){if(Number.isFinite(c))return;throw new TypeError("coordinates must be finite numbers")}if("number"!=typeof c||c!=c||!isFinite(c))throw new TypeError("coordinates must be finite numbers")}function fE(c,l,a,h){var d;if(Array.isArray(a)&&(a=AX(a)),function EDe(c){IX(c.x),IX(c.y)}(a),c.datum&&l.datum&&function MDe(c,l){return(1===c.datum.datum_type||2===c.datum.datum_type)&&"WGS84"!==l.datumCode||(1===l.datum.datum_type||2===l.datum.datum_type)&&"WGS84"!==c.datumCode}(c,l)&&(a=fE(c,d=new fb("WGS84"),a,h),c=d),h&&"enu"!==c.axis&&(a=DX(c,!1,a)),"longlat"===c.projName)a={x:a.x*ho,y:a.y*ho,z:a.z||0};else if(c.to_meter&&(a={x:a.x*c.to_meter,y:a.y*c.to_meter,z:a.z||0}),!(a=c.inverse(a)))return;if(c.from_greenwich&&(a.x+=c.from_greenwich),a=function CDe(c,l,a){if(function bDe(c,l){return!(c.datum_type!==l.datum_type||c.a!==l.a||Math.abs(c.es-l.es)>5e-11)&&(1===c.datum_type?c.datum_params[0]===l.datum_params[0]&&c.datum_params[1]===l.datum_params[1]&&c.datum_params[2]===l.datum_params[2]:2!==c.datum_type||c.datum_params[0]===l.datum_params[0]&&c.datum_params[1]===l.datum_params[1]&&c.datum_params[2]===l.datum_params[2]&&c.datum_params[3]===l.datum_params[3]&&c.datum_params[4]===l.datum_params[4]&&c.datum_params[5]===l.datum_params[5]&&c.datum_params[6]===l.datum_params[6])}(c,l)||5===c.datum_type||5===l.datum_type)return a;var h=c.a,d=c.es;if(3===c.datum_type){if(0!==EX(c,!1,a))return;h=6378137,d=dX}var m=l.a,g=l.b,y=l.es;return 3===l.datum_type&&(m=6378137,g=6356752.314,y=dX),d!==y||h!==m||dE(c.datum_type)||dE(l.datum_type)?(a=CX(a,d,h),dE(c.datum_type)&&(a=function TDe(c,l,a){if(1===l)return{x:c.x+a[0],y:c.y+a[1],z:c.z+a[2]};if(2===l){var m=a[3],g=a[4],y=a[5],v=a[6];return{x:v*(c.x-y*c.y+g*c.z)+a[0],y:v*(y*c.x+c.y-m*c.z)+a[1],z:v*(-g*c.x+m*c.y+c.z)+a[2]}}}(a,c.datum_type,c.datum_params)),dE(l.datum_type)&&(a=function wDe(c,l,a){if(1===l)return{x:c.x-a[0],y:c.y-a[1],z:c.z-a[2]};if(2===l){var m=a[3],g=a[4],y=a[5],v=a[6],_=(c.x-a[0])/v,S=(c.y-a[1])/v,b=(c.z-a[2])/v;return{x:_+y*S-g*b,y:-y*_+S+m*b,z:g*_-m*S+b}}}(a,l.datum_type,l.datum_params)),a=xX(a,y,m,g),3!==l.datum_type||0===EX(l,!0,a)?a:void 0):a}(c.datum,l.datum,a))return l.from_greenwich&&(a={x:a.x-l.from_greenwich,y:a.y,z:a.z||0}),"longlat"===l.projName?a={x:a.x*Du,y:a.y*Du,z:a.z||0}:(a=l.forward(a),l.to_meter&&(a={x:a.x/l.to_meter,y:a.y/l.to_meter,z:a.z||0})),h&&"enu"!==l.axis?DX(l,!0,a):a}var RX=fb("WGS84");function nN(c,l,a,h){var d,f,m;return Array.isArray(a)?(d=fE(c,l,a,h)||{x:NaN,y:NaN},a.length>2?typeof c.name<"u"&&"geocent"===c.name||typeof l.name<"u"&&"geocent"===l.name?"number"==typeof d.z?[d.x,d.y,d.z].concat(a.splice(3)):[d.x,d.y,a[2]].concat(a.splice(3)):[d.x,d.y].concat(a.splice(2)):[d.x,d.y]):(f=fE(c,l,a,h),2===(m=Object.keys(a)).length||m.forEach(function(g){if(typeof c.name<"u"&&"geocent"===c.name||typeof l.name<"u"&&"geocent"===l.name){if("x"===g||"y"===g||"z"===g)return}else if("x"===g||"y"===g)return;f[g]=a[g]}),f)}function PX(c){return c instanceof fb?c:c.oProj?c.oProj:fb(c)}const tl=function DDe(c,l,a){c=PX(c);var d,h=!1;return typeof l>"u"?(l=c,c=RX,h=!0):(typeof l.x<"u"||Array.isArray(l))&&(a=l,l=c,c=RX,h=!0),l=PX(l),a?nN(c,l,a):(d={forward:function(f,m){return nN(c,l,f,m)},inverse:function(f,m){return nN(l,c,f,m)}},h&&(d.oProj=l),d)};const ADe={forward:FX,inverse:function IDe(c){var l=iN(UX(c.toUpperCase()));return l.lat&&l.lon?[l.lon,l.lat,l.lon,l.lat]:[l.left,l.bottom,l.right,l.top]},toPoint:kX};function FX(c,l){return l=l||5,function LDe(c,l){var a="00000"+c.easting,h="00000"+c.northing;return c.zoneNumber+c.zoneLetter+function ODe(c,l,a){var h=BX(a);return function NDe(c,l,a){var h=a-1,d="AJSAJS".charCodeAt(h),f="AFAFAF".charCodeAt(h),m=d+c-1,g=f+l,y=!1;return m>90&&(m=m-90+65-1,y=!0),(73===m||d<73&&m>73||(m>73||d<73)&&y)&&m++,(79===m||d<79&&m>79||(m>79||d<79)&&y)&&73==++m&&m++,m>90&&(m=m-90+65-1),g>86?(g=g-86+65-1,y=!0):y=!1,(73===g||f<73&&g>73||(g>73||f<73)&&y)&&g++,(79===g||f<79&&g>79||(g>79||f<79)&&y)&&73==++g&&g++,g>86&&(g=g-86+65-1),String.fromCharCode(m)+String.fromCharCode(g)}(Math.floor(c/1e5),Math.floor(l/1e5)%20,h)}(c.easting,c.northing,c.zoneNumber)+a.substr(a.length-5,l)+h.substr(h.length-5,l)}(function RDe(c){var g,y,v,_,S,E,D,l=c.lat,a=c.lon,h=6378137,d=.00669438,f=.9996,T=rN(l),x=rN(a);D=Math.floor((a+180)/6)+1,180===a&&(D=60),l>=56&&l<64&&a>=3&&a<12&&(D=32),l>=72&&l<84&&(a>=0&&a<9?D=31:a>=9&&a<21?D=33:a>=21&&a<33?D=35:a>=33&&a<42&&(D=37)),E=rN(6*(D-1)-180+3),g=d/(1-d),y=h/Math.sqrt(1-d*Math.sin(T)*Math.sin(T)),v=Math.tan(T)*Math.tan(T),_=g*Math.cos(T)*Math.cos(T);var I=f*y*((S=Math.cos(T)*(x-E))+(1-v+_)*S*S*S/6+(5-18*v+v*v+72*_-58*g)*S*S*S*S*S/120)+5e5,M=f*(h*(.9983242984503243*T-.002514607064228144*Math.sin(2*T)+2639046602129982e-21*Math.sin(4*T)-35*d*d*d/3072*Math.sin(6*T))+y*Math.tan(T)*(S*S/2+(5-v+9*_+4*_*_)*S*S*S*S/24+(61-58*v+v*v+600*_-330*g)*S*S*S*S*S*S/720));return l<0&&(M+=1e7),{northing:Math.round(M),easting:Math.round(I),zoneNumber:D,zoneLetter:PDe(l)}}({lat:c[1],lon:c[0]}),l)}function kX(c){var l=iN(UX(c.toUpperCase()));return l.lat&&l.lon?[l.lon,l.lat]:[(l.left+l.right)/2,(l.top+l.bottom)/2]}function rN(c){return c*(Math.PI/180)}function VX(c){return c/Math.PI*180}function iN(c){var l=c.northing,a=c.easting,h=c.zoneLetter,d=c.zoneNumber;if(d<0||d>60)return null;var y,_,S,b,T,x,D,I,M,f=.9996,m=6378137,g=.00669438,v=(1-Math.sqrt(1-g))/(1+Math.sqrt(1-g)),L=a-5e5,P=l;h<"N"&&(P-=1e7),D=6*(d-1)-180+3,y=g/(1-g),M=(I=P/f/6367449.145945056)+(3*v/2-27*v*v*v/32)*Math.sin(2*I)+(21*v*v/16-55*v*v*v*v/32)*Math.sin(4*I)+151*v*v*v/96*Math.sin(6*I),_=m/Math.sqrt(1-g*Math.sin(M)*Math.sin(M)),S=Math.tan(M)*Math.tan(M),b=y*Math.cos(M)*Math.cos(M),T=m*(1-g)/Math.pow(1-g*Math.sin(M)*Math.sin(M),1.5),x=L/(_*f);var F=M-_*Math.tan(M)/T*(x*x/2-(5+3*S+10*b-4*b*b-9*y)*x*x*x*x/24+(61+90*S+298*b+45*S*S-252*y-3*b*b)*x*x*x*x*x*x/720);F=VX(F);var z,V=(x-(1+2*S+b)*x*x*x/6+(5-2*b+28*S-3*b*b+8*y+24*S*S)*x*x*x*x*x/120)/Math.cos(M);if(V=D+VX(V),c.accuracy){var q=iN({northing:c.northing+c.accuracy,easting:c.easting+c.accuracy,zoneLetter:c.zoneLetter,zoneNumber:c.zoneNumber});z={top:q.lat,right:q.lon,bottom:F,left:V}}else z={lat:F,lon:V};return z}function PDe(c){var l="Z";return 84>=c&&c>=72?l="X":72>c&&c>=64?l="W":64>c&&c>=56?l="V":56>c&&c>=48?l="U":48>c&&c>=40?l="T":40>c&&c>=32?l="S":32>c&&c>=24?l="R":24>c&&c>=16?l="Q":16>c&&c>=8?l="P":8>c&&c>=0?l="N":0>c&&c>=-8?l="M":-8>c&&c>=-16?l="L":-16>c&&c>=-24?l="K":-24>c&&c>=-32?l="J":-32>c&&c>=-40?l="H":-40>c&&c>=-48?l="G":-48>c&&c>=-56?l="F":-56>c&&c>=-64?l="E":-64>c&&c>=-72?l="D":-72>c&&c>=-80&&(l="C"),l}function BX(c){var l=c%6;return 0===l&&(l=6),l}function UX(c){if(c&&0===c.length)throw"MGRSPoint coverting from nothing";for(var d,l=c.length,a=null,h="",f=0;!/[A-Z]/.test(d=c.charAt(f));){if(f>=2)throw"MGRSPoint bad conversion from: "+c;h+=d,f++}var m=parseInt(h,10);if(0===f||f+3>l)throw"MGRSPoint bad conversion from: "+c;var g=c.charAt(f++);if(g<="A"||"B"===g||"Y"===g||g>="Z"||"I"===g||"O"===g)throw"MGRSPoint zone letter "+g+" not handled: "+c;a=c.substring(f,f+=2);for(var y=BX(m),v=function FDe(c,l){for(var a="AJSAJS".charCodeAt(l-1),h=1e5,d=!1;a!==c.charCodeAt(0);){if(73==++a&&a++,79===a&&a++,a>90){if(d)throw"Bad character: "+c;a=65,d=!0}h+=1e5}return h}(a.charAt(0),y),_=function kDe(c,l){if(c>"V")throw"MGRSPoint given invalid Northing "+c;for(var a="AFAFAF".charCodeAt(l-1),h=0,d=!1;a!==c.charCodeAt(0);){if(73==++a&&a++,79===a&&a++,a>86){if(d)throw"Bad character: "+c;a=65,d=!0}h+=1e5}return h}(a.charAt(1),y);_<VDe(g);)_+=2e6;var S=l-f;if(S%2!=0)throw"MGRSPoint has to have an even number \nof digits after the zone letter and two 100km letters - front \nhalf for easting meters, second half for \nnorthing meters"+c;var E,D,I,b=S/2,T=0,x=0;return b>0&&(E=1e5/Math.pow(10,b),D=c.substring(f,f+b),T=parseFloat(D)*E,I=c.substring(f+b),x=parseFloat(I)*E),{easting:T+v,northing:x+_,zoneLetter:g,zoneNumber:m,accuracy:E}}function VDe(c){var l;switch(c){case"C":l=11e5;break;case"D":l=2e6;break;case"E":l=28e5;break;case"F":l=37e5;break;case"G":l=46e5;break;case"H":l=55e5;break;case"J":l=64e5;break;case"K":l=73e5;break;case"L":l=82e5;break;case"M":l=91e5;break;case"N":l=0;break;case"P":l=8e5;break;case"Q":l=17e5;break;case"R":l=26e5;break;case"S":l=35e5;break;case"T":l=44e5;break;case"U":l=53e5;break;case"V":l=62e5;break;case"W":l=7e6;break;case"X":l=79e5;break;default:l=-1}if(l>=0)return l;throw"Invalid zone letter: "+c}function av(c,l,a){if(!(this instanceof av))return new av(c,l,a);if(Array.isArray(c))this.x=c[0],this.y=c[1],this.z=c[2]||0;else if("object"==typeof c)this.x=c.x,this.y=c.y,this.z=c.z||0;else if("string"==typeof c&&typeof l>"u"){var h=c.split(",");this.x=parseFloat(h[0],10),this.y=parseFloat(h[1],10),this.z=parseFloat(h[2],10)||0}else this.x=c,this.y=l,this.z=a||0;console.warn("proj4.Point will be removed in version 3, use proj4.toPoint")}av.fromMGRS=function(c){return new av(kX(c))},av.prototype.toMGRS=function(c){return FX([this.x,this.y],c)};const BDe=av;var zX=.01953125,HX=.01068115234375;function jX(c){var l=[];l[0]=1-c*(.25+c*(.046875+c*(zX+c*HX))),l[1]=c*(.75-c*(.046875+c*(zX+c*HX)));var a=c*c;return l[2]=a*(.46875-c*(.013020833333333334+.007120768229166667*c)),l[3]=(a*=c)*(.3645833333333333-.005696614583333333*c),l[4]=a*c*.3076171875,l}function pE(c,l,a,h){return h[0]*c-(a*=l)*(h[1]+(l*=l)*(h[2]+l*(h[3]+l*h[4])))}function WX(c,l,a){for(var h=1/(1-l),d=c,f=20;f;--f){var m=Math.sin(d),g=1-l*m*m;if(d-=g=(pE(d,m,Math.cos(d),a)-c)*(g*Math.sqrt(g))*h,Math.abs(g)<Bt)return d}return d}const mE={init:function ZDe(){this.x0=void 0!==this.x0?this.x0:0,this.y0=void 0!==this.y0?this.y0:0,this.long0=void 0!==this.long0?this.long0:0,this.lat0=void 0!==this.lat0?this.lat0:0,this.es&&(this.en=jX(this.es),this.ml0=pE(this.lat0,Math.sin(this.lat0),Math.cos(this.lat0),this.en))},forward:function KDe(c){var d,f,m,a=c.y,h=Kt(c.x-this.long0),g=Math.sin(a),y=Math.cos(a);if(this.es){var _=y*h,S=Math.pow(_,2),b=this.ep2*Math.pow(y,2),T=Math.pow(b,2),x=Math.abs(y)>Bt?Math.tan(a):0,E=Math.pow(x,2),D=Math.pow(E,2);d=1-this.es*Math.pow(g,2),_/=Math.sqrt(d);var I=pE(a,g,y,this.en);f=this.a*(this.k0*_*(1+S/6*(1-E+b+S/20*(5-18*E+D+14*b-58*E*b+S/42*(61+179*D-D*E-479*E)))))+this.x0,m=this.a*(this.k0*(I-this.ml0+g*h*_/2*(1+S/12*(5-E+9*b+4*T+S/30*(61+D-58*E+270*b-330*E*b+S/56*(1385+543*D-D*E-3111*E))))))+this.y0}else{var v=y*Math.sin(h);if(Math.abs(Math.abs(v)-1)<Bt)return 93;if(f=.5*this.a*this.k0*Math.log((1+v)/(1-v))+this.x0,m=y*Math.cos(h)/Math.sqrt(1-Math.pow(v,2)),(v=Math.abs(m))>=1){if(v-1>Bt)return 93;m=0}else m=Math.acos(m);a<0&&(m=-m),m=this.a*this.k0*(m-this.lat0)+this.y0}return c.x=f,c.y=m,c},inverse:function QDe(c){var l,a,h,d,f=1/this.a*(c.x-this.x0),m=1/this.a*(c.y-this.y0);if(this.es)if(a=WX(l=this.ml0+m/this.k0,this.es,this.en),Math.abs(a)<pt){var S=Math.sin(a),b=Math.cos(a),T=Math.abs(b)>Bt?Math.tan(a):0,x=this.ep2*Math.pow(b,2),E=Math.pow(x,2),D=Math.pow(T,2),I=Math.pow(D,2);l=1-this.es*Math.pow(S,2);var M=f*Math.sqrt(l)/this.k0,L=Math.pow(M,2);h=a-(l*=T)*L/(1-this.es)*.5*(1-L/12*(5+3*D-9*x*D+x-4*E-L/30*(61+90*D-252*x*D+45*I+46*x-L/56*(1385+3633*D+4095*I+1574*I*D)))),d=Kt(this.long0+M*(1-L/6*(1+2*D+x-L/20*(5+28*D+24*I+8*x*D+6*x-L/42*(61+662*D+1320*I+720*I*D))))/b)}else h=pt*hb(m),d=0;else{var g=Math.exp(f/this.k0),y=.5*(g-1/g),_=Math.cos(this.lat0+m/this.k0);l=Math.sqrt((1-Math.pow(_,2))/(1+Math.pow(y,2))),h=Math.asin(l),m<0&&(h=-h),d=0===y&&0===_?0:Kt(Math.atan2(y,_)+this.long0)}return c.x=d,c.y=h,c},names:["Fast_Transverse_Mercator","Fast Transverse Mercator"]};function XX(c){var l=Math.exp(c);return(l-1/l)/2}function Dc(c,l){c=Math.abs(c),l=Math.abs(l);var a=Math.max(c,l),h=Math.min(c,l)/(a||1);return a*Math.sqrt(1+Math.pow(h,2))}function sN(c,l){for(var m,a=2*Math.cos(2*l),h=c.length-1,d=c[h],f=0;--h>=0;)m=a*d-f+c[h],f=d,d=m;return l+m*Math.sin(2*l)}function qX(c,l,a){for(var x,E,h=Math.sin(l),d=Math.cos(l),f=XX(a),m=function rAe(c){var l=Math.exp(c);return(l+1/l)/2}(a),g=2*d*m,y=-2*h*f,v=c.length-1,_=c[v],S=0,b=0,T=0;--v>=0;)x=b,E=S,_=g*(b=_)-x-y*(S=T)+c[v],T=y*b-E+g*S;return[(g=h*m)*_-(y=d*f)*T,g*T+y*_]}const gE={init:function iAe(){if(!this.approx&&(isNaN(this.es)||this.es<=0))throw new Error('Incorrect elliptical usage. Try using the +approx option in the proj string, or PROJECTION["Fast_Transverse_Mercator"] in the WKT.');this.approx&&(mE.init.apply(this),this.forward=mE.forward,this.inverse=mE.inverse),this.x0=void 0!==this.x0?this.x0:0,this.y0=void 0!==this.y0?this.y0:0,this.long0=void 0!==this.long0?this.long0:0,this.lat0=void 0!==this.lat0?this.lat0:0,this.cgb=[],this.cbg=[],this.utg=[],this.gtu=[];var c=this.es/(1+Math.sqrt(1-this.es)),l=c/(2-c),a=l;this.cgb[0]=l*(2+l*(-2/3+l*(l*(116/45+l*(26/45+l*(-2854/675)))-2))),this.cbg[0]=l*(l*(2/3+l*(4/3+l*(-82/45+l*(32/45+l*(4642/4725)))))-2),this.cgb[1]=(a*=l)*(7/3+l*(l*(-227/45+l*(2704/315+l*(2323/945)))-1.6)),this.cbg[1]=a*(5/3+l*(-16/15+l*(-13/9+l*(904/315+l*(-1522/945))))),this.cgb[2]=(a*=l)*(56/15+l*(-136/35+l*(-1262/105+l*(73814/2835)))),this.cbg[2]=a*(-26/15+l*(34/21+l*(1.6+l*(-12686/2835)))),this.cgb[3]=(a*=l)*(4279/630+l*(-332/35+l*(-399572/14175))),this.cbg[3]=a*(1237/630+l*(l*(-24832/14175)-2.4)),this.cgb[4]=(a*=l)*(4174/315+l*(-144838/6237)),this.cbg[4]=a*(-734/315+l*(109598/31185)),this.cgb[5]=(a*=l)*(601676/22275),this.cbg[5]=a*(444337/155925),a=Math.pow(l,2),this.Qn=this.k0/(1+l)*(1+a*(1/4+a*(1/64+a/256))),this.utg[0]=l*(l*(2/3+l*(-37/96+l*(1/360+l*(81/512+l*(-96199/604800)))))-.5),this.gtu[0]=l*(.5+l*(-2/3+l*(5/16+l*(41/180+l*(-127/288+l*(7891/37800)))))),this.utg[1]=a*(-1/48+l*(-1/15+l*(437/1440+l*(-46/105+l*(1118711/3870720))))),this.gtu[1]=a*(13/48+l*(l*(557/1440+l*(281/630+l*(-1983433/1935360)))-.6)),this.utg[2]=(a*=l)*(-17/480+l*(37/840+l*(209/4480+l*(-5569/90720)))),this.gtu[2]=a*(61/240+l*(-103/140+l*(15061/26880+l*(167603/181440)))),this.utg[3]=(a*=l)*(-4397/161280+l*(11/504+l*(830251/7257600))),this.gtu[3]=a*(49561/161280+l*(-179/168+l*(6601661/7257600))),this.utg[4]=(a*=l)*(-4583/161280+l*(108847/3991680)),this.gtu[4]=a*(34729/80640+l*(-3418889/1995840)),this.utg[5]=(a*=l)*(-20648693/638668800),this.gtu[5]=.6650675310896665*a;var h=sN(this.cbg,this.lat0);this.Zb=-this.Qn*(h+function nAe(c,l){for(var m,a=2*Math.cos(l),h=c.length-1,d=c[h],f=0;--h>=0;)m=a*d-f+c[h],f=d,d=m;return Math.sin(l)*m}(this.gtu,2*h))},forward:function sAe(c){var l=Kt(c.x-this.long0),a=c.y;a=sN(this.cbg,a);var h=Math.sin(a),d=Math.cos(a),f=Math.sin(l),m=Math.cos(l);a=Math.atan2(h,m*d),l=Math.atan2(f*d,Dc(h,d*m)),l=function tAe(c){var l=Math.abs(c);return l=function eAe(c){var l=1+c,a=l-1;return 0===a?c:c*Math.log(l)/a}(l*(1+l/(Dc(1,l)+1))),c<0?-l:l}(Math.tan(l));var y,v,g=qX(this.gtu,2*a,2*l);return a+=g[0],l+=g[1],Math.abs(l)<=2.623395162778?(y=this.a*(this.Qn*l)+this.x0,v=this.a*(this.Qn*a+this.Zb)+this.y0):(y=1/0,v=1/0),c.x=y,c.y=v,c},inverse:function oAe(c){var h,d,l=1/this.a*(c.x-this.x0),a=1/this.a*(c.y-this.y0);if(a=(a-this.Zb)/this.Qn,l/=this.Qn,Math.abs(l)<=2.623395162778){var f=qX(this.utg,2*a,2*l);a+=f[0],l+=f[1],l=Math.atan(XX(l));var m=Math.sin(a),g=Math.cos(a),y=Math.sin(l),v=Math.cos(l);a=Math.atan2(m*v,Dc(y,v*g)),h=Kt((l=Math.atan2(y,v*g))+this.long0),d=sN(this.cgb,a)}else h=1/0,d=1/0;return c.x=h,c.y=d,c},names:["Extended_Transverse_Mercator","Extended Transverse Mercator","etmerc","Transverse_Mercator","Transverse Mercator","tmerc"]},dAe={init:function uAe(){var c=function lAe(c,l){if(void 0===c){if((c=Math.floor(30*(Kt(l)+Math.PI)/Math.PI)+1)<0)return 0;if(c>60)return 60}return c}(this.zone,this.long0);if(void 0===c)throw new Error("unknown utm zone");this.lat0=0,this.long0=(6*Math.abs(c)-183)*ho,this.x0=5e5,this.y0=this.utmSouth?1e7:0,this.k0=.9996,gE.init.apply(this),this.forward=gE.forward,this.inverse=gE.inverse},names:["Universal Transverse Mercator System","utm"],dependsOn:"etmerc"};function oN(c,l){return Math.pow((1-c)/(1+c),l)}const aN={init:function pAe(){var c=Math.sin(this.lat0),l=Math.cos(this.lat0);l*=l,this.rc=Math.sqrt(1-this.es)/(1-this.es*c*c),this.C=Math.sqrt(1+this.es*l*l/(1-this.es)),this.phic0=Math.asin(c/this.C),this.ratexp=.5*this.C*this.e,this.K=Math.tan(.5*this.phic0+Yr)/(Math.pow(Math.tan(.5*this.lat0+Yr),this.C)*oN(this.e*c,this.ratexp))},forward:function mAe(c){var l=c.x,a=c.y;return c.y=2*Math.atan(this.K*Math.pow(Math.tan(.5*a+Yr),this.C)*oN(this.e*Math.sin(a),this.ratexp))-pt,c.x=this.C*l,c},inverse:function gAe(c){for(var a=c.x/this.C,h=c.y,d=Math.pow(Math.tan(.5*h+Yr)/this.K,1/this.C),f=20;f>0&&(h=2*Math.atan(d*oN(this.e*Math.sin(c.y),-.5*this.e))-pt,!(Math.abs(h-c.y)<1e-14));--f)c.y=h;return f?(c.x=a,c.y=h,c):null},names:["gauss"]},TAe={init:function vAe(){aN.init.apply(this),this.rc&&(this.sinc0=Math.sin(this.phic0),this.cosc0=Math.cos(this.phic0),this.R2=2*this.rc,this.title||(this.title="Oblique Stereographic Alternative"))},forward:function _Ae(c){var l,a,h,d;return c.x=Kt(c.x-this.long0),aN.forward.apply(this,[c]),l=Math.sin(c.y),a=Math.cos(c.y),h=Math.cos(c.x),c.x=(d=this.k0*this.R2/(1+this.sinc0*l+this.cosc0*a*h))*a*Math.sin(c.x),c.y=d*(this.cosc0*l-this.sinc0*a*h),c.x=this.a*c.x+this.x0,c.y=this.a*c.y+this.y0,c},inverse:function SAe(c){var l,a,h,d,f;if(c.x=(c.x-this.x0)/this.a,c.y=(c.y-this.y0)/this.a,c.x/=this.k0,c.y/=this.k0,f=Math.sqrt(c.x*c.x+c.y*c.y)){var m=2*Math.atan2(f,this.R2);l=Math.sin(m),a=Math.cos(m),d=Math.asin(a*this.sinc0+c.y*l*this.cosc0/f),h=Math.atan2(c.x*l,f*this.cosc0*a-c.y*this.sinc0*l)}else d=this.phic0,h=0;return c.x=h,c.y=d,aN.inverse.apply(this,[c]),c.x=Kt(c.x+this.long0),c},names:["Stereographic_North_Pole","Oblique_Stereographic","Polar_Stereographic","sterea","Oblique Stereographic Alternative","Double_Stereographic"]},DAe={init:function CAe(){this.coslat0=Math.cos(this.lat0),this.sinlat0=Math.sin(this.lat0),this.sphere?1===this.k0&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=Bt&&(this.k0=.5*(1+hb(this.lat0)*Math.sin(this.lat_ts))):(Math.abs(this.coslat0)<=Bt&&(this.con=this.lat0>0?1:-1),this.cons=Math.sqrt(Math.pow(1+this.e,1+this.e)*Math.pow(1-this.e,1-this.e)),1===this.k0&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=Bt&&(this.k0=.5*this.cons*Au(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts))/Mc(this.e,this.con*this.lat_ts,this.con*Math.sin(this.lat_ts))),this.ms1=Au(this.e,this.sinlat0,this.coslat0),this.X0=2*Math.atan(this.ssfn_(this.lat0,this.sinlat0,this.e))-pt,this.cosX0=Math.cos(this.X0),this.sinX0=Math.sin(this.X0))},forward:function xAe(c){var f,m,g,y,v,_,l=c.x,a=c.y,h=Math.sin(a),d=Math.cos(a),S=Kt(l-this.long0);return Math.abs(Math.abs(l-this.long0)-Math.PI)<=Bt&&Math.abs(a+this.lat0)<=Bt?(c.x=NaN,c.y=NaN,c):this.sphere?(f=2*this.k0/(1+this.sinlat0*h+this.coslat0*d*Math.cos(S)),c.x=this.a*f*d*Math.sin(S)+this.x0,c.y=this.a*f*(this.coslat0*h-this.sinlat0*d*Math.cos(S))+this.y0,c):(m=2*Math.atan(this.ssfn_(a,h,this.e))-pt,y=Math.cos(m),g=Math.sin(m),Math.abs(this.coslat0)<=Bt?(v=Mc(this.e,a*this.con,this.con*h),c.x=this.x0+(_=2*this.a*this.k0*v/this.cons)*Math.sin(l-this.long0),c.y=this.y0-this.con*_*Math.cos(l-this.long0),c):(Math.abs(this.sinlat0)<Bt?(f=2*this.a*this.k0/(1+y*Math.cos(S)),c.y=f*g):(f=2*this.a*this.k0*this.ms1/(this.cosX0*(1+this.sinX0*g+this.cosX0*y*Math.cos(S))),c.y=f*(this.cosX0*g-this.sinX0*y*Math.cos(S))+this.y0),c.x=f*y*Math.sin(S)+this.x0,c))},inverse:function EAe(c){c.x-=this.x0,c.y-=this.y0;var l,a,d,f,m=Math.sqrt(c.x*c.x+c.y*c.y);if(this.sphere){var g=2*Math.atan(m/(2*this.a*this.k0));return l=this.long0,a=this.lat0,m<=Bt?(c.x=l,c.y=a,c):(a=Math.asin(Math.cos(g)*this.sinlat0+c.y*Math.sin(g)*this.coslat0/m),l=Math.abs(this.coslat0)<Bt?Kt(this.lat0>0?this.long0+Math.atan2(c.x,-1*c.y):this.long0+Math.atan2(c.x,c.y)):Kt(this.long0+Math.atan2(c.x*Math.sin(g),m*this.coslat0*Math.cos(g)-c.y*this.sinlat0*Math.sin(g))),c.x=l,c.y=a,c)}if(Math.abs(this.coslat0)<=Bt){if(m<=Bt)return a=this.lat0,c.x=l=this.long0,c.y=a,c;c.x*=this.con,c.y*=this.con,a=this.con*db(this.e,m*this.cons/(2*this.a*this.k0)),l=this.con*Kt(this.con*this.long0+Math.atan2(c.x,-1*c.y))}else d=2*Math.atan(m*this.cosX0/(2*this.a*this.k0*this.ms1)),l=this.long0,m<=Bt?f=this.X0:(f=Math.asin(Math.cos(d)*this.sinX0+c.y*Math.sin(d)*this.cosX0/m),l=Kt(this.long0+Math.atan2(c.x*Math.sin(d),m*this.cosX0*Math.cos(d)-c.y*this.sinX0*Math.sin(d)))),a=-1*db(this.e,Math.tan(.5*(pt+f)));return c.x=l,c.y=a,c},names:["stere","Stereographic_South_Pole","Polar Stereographic (variant B)"],ssfn_:function wAe(c,l,a){return l*=a,Math.tan(.5*(pt+c))*Math.pow((1-l)/(1+l),.5*a)}},LAe={init:function AAe(){var c=this.lat0;this.lambda0=this.long0;var l=Math.sin(c),a=this.a,d=1/this.rf,f=2*d-Math.pow(d,2),m=this.e=Math.sqrt(f);this.R=this.k0*a*Math.sqrt(1-f)/(1-f*Math.pow(l,2)),this.alpha=Math.sqrt(1+f/(1-f)*Math.pow(Math.cos(c),4)),this.b0=Math.asin(l/this.alpha);var g=Math.log(Math.tan(Math.PI/4+this.b0/2)),y=Math.log(Math.tan(Math.PI/4+c/2)),v=Math.log((1+m*l)/(1-m*l));this.K=g-this.alpha*y+this.alpha*m/2*v},forward:function IAe(c){var l=Math.log(Math.tan(Math.PI/4-c.y/2)),a=this.e/2*Math.log((1+this.e*Math.sin(c.y))/(1-this.e*Math.sin(c.y))),d=2*(Math.atan(Math.exp(-this.alpha*(l+a)+this.K))-Math.PI/4),f=this.alpha*(c.x-this.lambda0),m=Math.atan(Math.sin(f)/(Math.sin(this.b0)*Math.tan(d)+Math.cos(this.b0)*Math.cos(f))),g=Math.asin(Math.cos(this.b0)*Math.sin(d)-Math.sin(this.b0)*Math.cos(d)*Math.cos(f));return c.y=this.R/2*Math.log((1+Math.sin(g))/(1-Math.sin(g)))+this.y0,c.x=this.R*m+this.x0,c},inverse:function RAe(c){for(var h=(c.x-this.x0)/this.R,d=2*(Math.atan(Math.exp((c.y-this.y0)/this.R))-Math.PI/4),f=Math.asin(Math.cos(this.b0)*Math.sin(d)+Math.sin(this.b0)*Math.cos(d)*Math.cos(h)),m=Math.atan(Math.sin(h)/(Math.cos(this.b0)*Math.cos(h)-Math.sin(this.b0)*Math.tan(d))),g=this.lambda0+m/this.alpha,y=0,v=f,_=-1e3,S=0;Math.abs(v-_)>1e-7;){if(++S>20)return;y=1/this.alpha*(Math.log(Math.tan(Math.PI/4+f/2))-this.K)+this.e*Math.log(Math.tan(Math.PI/4+Math.asin(this.e*Math.sin(v))/2)),_=v,v=2*Math.atan(Math.exp(y))-Math.PI/2}return c.x=g,c.y=v,c},names:["somerc"]};var lv=1e-7;const BAe={init:function NAe(){var c,l,a,h,d,f,m,g,y,v,S,_=0,b=0,T=0,x=0,E=0,D=0,I=0;this.no_off=function OAe(c){var a="object"==typeof c.PROJECTION?Object.keys(c.PROJECTION)[0]:c.PROJECTION;return"no_uoff"in c||"no_off"in c||-1!==["Hotine_Oblique_Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin"].indexOf(a)}(this),this.no_rot="no_rot"in this;var L=!1;"alpha"in this&&(L=!0);var P=!1;if("rectified_grid_angle"in this&&(P=!0),L&&(I=this.alpha),P&&(_=this.rectified_grid_angle*ho),L||P)b=this.longc;else if(T=this.long1,E=this.lat1,x=this.long2,D=this.lat2,Math.abs(E-D)<=lv||(c=Math.abs(E))<=lv||Math.abs(c-pt)<=lv||Math.abs(Math.abs(this.lat0)-pt)<=lv||Math.abs(Math.abs(D)-pt)<=lv)throw new Error;var F=1-this.es;l=Math.sqrt(F),Math.abs(this.lat0)>Bt?(g=Math.sin(this.lat0),a=Math.cos(this.lat0),c=1-this.es*g*g,this.B=a*a,this.B=Math.sqrt(1+this.es*this.B*this.B/F),this.A=this.B*this.k0*l/c,(d=(h=this.B*l/(a*Math.sqrt(c)))*h-1)<=0?d=0:(d=Math.sqrt(d),this.lat0<0&&(d=-d)),this.E=d+=h,this.E*=Math.pow(Mc(this.e,this.lat0,g),this.B)):(this.B=1/l,this.A=this.k0,this.E=h=d=1),L||P?(L?(S=Math.asin(Math.sin(I)/h),P||(_=I)):(S=_,I=Math.asin(h*Math.sin(S))),this.lam0=b-Math.asin(.5*(d-1/d)*Math.tan(S))/this.B):(f=Math.pow(Mc(this.e,E,Math.sin(E)),this.B),m=Math.pow(Mc(this.e,D,Math.sin(D)),this.B),d=this.E/f,y=(m-f)/(m+f),v=((v=this.E*this.E)-m*f)/(v+m*f),(c=T-x)<-Math.pi?x-=cb:c>Math.pi&&(x+=cb),this.lam0=Kt(.5*(T+x)-Math.atan(v*Math.tan(.5*this.B*(T-x))/y)/this.B),S=Math.atan(2*Math.sin(this.B*Kt(T-this.lam0))/(d-1/d)),_=I=Math.asin(h*Math.sin(S))),this.singam=Math.sin(S),this.cosgam=Math.cos(S),this.sinrot=Math.sin(_),this.cosrot=Math.cos(_),this.rB=1/this.B,this.ArB=this.A*this.rB,this.BrA=1/this.ArB,this.no_off?this.u_0=0:(this.u_0=Math.abs(this.ArB*Math.atan(Math.sqrt(h*h-1)/Math.cos(I))),this.lat0<0&&(this.u_0=-this.u_0)),d=.5*S,this.v_pole_n=this.ArB*Math.log(Math.tan(Yr-d)),this.v_pole_s=this.ArB*Math.log(Math.tan(Yr+d))},forward:function FAe(c){var a,h,d,f,m,g,y,v,l={};if(c.x=c.x-this.lam0,Math.abs(Math.abs(c.y)-pt)>Bt){if(a=.5*((m=this.E/Math.pow(Mc(this.e,c.y,Math.sin(c.y)),this.B))-(g=1/m)),h=.5*(m+g),f=Math.sin(this.B*c.x),d=(a*this.singam-f*this.cosgam)/h,Math.abs(Math.abs(d)-1)<Bt)throw new Error;v=.5*this.ArB*Math.log((1-d)/(1+d)),g=Math.cos(this.B*c.x),y=Math.abs(g)<lv?this.A*c.x:this.ArB*Math.atan2(a*this.cosgam+f*this.singam,g)}else v=c.y>0?this.v_pole_n:this.v_pole_s,y=this.ArB*c.y;return this.no_rot?(l.x=y,l.y=v):(l.x=v*this.cosrot+(y-=this.u_0)*this.sinrot,l.y=y*this.cosrot-v*this.sinrot),l.x=this.a*l.x+this.x0,l.y=this.a*l.y+this.y0,l},inverse:function kAe(c){var l,a,h,d,f,m,g,y={};if(c.x=1/this.a*(c.x-this.x0),c.y=1/this.a*(c.y-this.y0),this.no_rot?(a=c.y,l=c.x):(a=c.x*this.cosrot-c.y*this.sinrot,l=c.y*this.cosrot+c.x*this.sinrot+this.u_0),d=.5*((h=Math.exp(-this.BrA*a))-1/h),f=.5*(h+1/h),g=((m=Math.sin(this.BrA*l))*this.cosgam+d*this.singam)/f,Math.abs(Math.abs(g)-1)<Bt)y.x=0,y.y=g<0?-pt:pt;else{if(y.y=this.E/Math.sqrt((1+g)/(1-g)),y.y=db(this.e,Math.pow(y.y,1/this.B)),y.y===1/0)throw new Error;y.x=-this.rB*Math.atan2(d*this.cosgam-m*this.singam,Math.cos(this.BrA*l))}return y.x+=this.lam0,y},names:["Hotine_Oblique_Mercator","Hotine Oblique Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin","Hotine_Oblique_Mercator_Two_Point_Natural_Origin","Hotine_Oblique_Mercator_Azimuth_Center","Oblique_Mercator","omerc"]},jAe={init:function UAe(){if(this.lat2||(this.lat2=this.lat1),this.k0||(this.k0=1),this.x0=this.x0||0,this.y0=this.y0||0,!(Math.abs(this.lat1+this.lat2)<Bt)){var c=this.b/this.a;this.e=Math.sqrt(1-c*c);var l=Math.sin(this.lat1),a=Math.cos(this.lat1),h=Au(this.e,l,a),d=Mc(this.e,this.lat1,l),f=Math.sin(this.lat2),m=Math.cos(this.lat2),g=Au(this.e,f,m),y=Mc(this.e,this.lat2,f),v=Mc(this.e,this.lat0,Math.sin(this.lat0));this.ns=Math.abs(this.lat1-this.lat2)>Bt?Math.log(h/g)/Math.log(d/y):l,isNaN(this.ns)&&(this.ns=l),this.f0=h/(this.ns*Math.pow(d,this.ns)),this.rh=this.a*this.f0*Math.pow(v,this.ns),this.title||(this.title="Lambert Conformal Conic")}},forward:function GAe(c){var l=c.x,a=c.y;Math.abs(2*Math.abs(a)-Math.PI)<=Bt&&(a=hb(a)*(pt-2*Bt));var d,f,h=Math.abs(Math.abs(a)-pt);if(h>Bt)d=Mc(this.e,a,Math.sin(a)),f=this.a*this.f0*Math.pow(d,this.ns);else{if((h=a*this.ns)<=0)return null;f=0}var m=this.ns*Kt(l-this.long0);return c.x=this.k0*(f*Math.sin(m))+this.x0,c.y=this.k0*(this.rh-f*Math.cos(m))+this.y0,c},inverse:function zAe(c){var l,a,h,d,f,m=(c.x-this.x0)/this.k0,g=this.rh-(c.y-this.y0)/this.k0;this.ns>0?(l=Math.sqrt(m*m+g*g),a=1):(l=-Math.sqrt(m*m+g*g),a=-1);var y=0;if(0!==l&&(y=Math.atan2(a*m,a*g)),0!==l||this.ns>0){if(a=1/this.ns,h=Math.pow(l/(this.a*this.f0),a),-9999===(d=db(this.e,h)))return null}else d=-pt;return f=Kt(y/this.ns+this.long0),c.x=f,c.y=d,c},names:["Lambert Tangential Conformal Conic Projection","Lambert_Conformal_Conic","Lambert_Conformal_Conic_1SP","Lambert_Conformal_Conic_2SP","lcc","Lambert Conic Conformal (1SP)","Lambert Conic Conformal (2SP)"]},YAe={init:function WAe(){this.a=6377397.155,this.es=.006674372230614,this.e=Math.sqrt(this.es),this.lat0||(this.lat0=.863937979737193),this.long0||(this.long0=.4334234309119251),this.k0||(this.k0=.9999),this.s45=.785398163397448,this.s90=2*this.s45,this.fi0=this.lat0,this.e2=this.es,this.e=Math.sqrt(this.e2),this.alfa=Math.sqrt(1+this.e2*Math.pow(Math.cos(this.fi0),4)/(1-this.e2)),this.uq=1.04216856380474,this.u0=Math.asin(Math.sin(this.fi0)/this.alfa),this.g=Math.pow((1+this.e*Math.sin(this.fi0))/(1-this.e*Math.sin(this.fi0)),this.alfa*this.e/2),this.k=Math.tan(this.u0/2+this.s45)/Math.pow(Math.tan(this.fi0/2+this.s45),this.alfa)*this.g,this.k1=this.k0,this.n0=this.a*Math.sqrt(1-this.e2)/(1-this.e2*Math.pow(Math.sin(this.fi0),2)),this.s0=1.37008346281555,this.n=Math.sin(this.s0),this.ro0=this.k1*this.n0/Math.tan(this.s0),this.ad=this.s90-this.uq},forward:function XAe(c){var l,a,h,d,f,m,g,v=c.y,_=Kt(c.x-this.long0);return l=Math.pow((1+this.e*Math.sin(v))/(1-this.e*Math.sin(v)),this.alfa*this.e/2),a=2*(Math.atan(this.k*Math.pow(Math.tan(v/2+this.s45),this.alfa)/l)-this.s45),h=-_*this.alfa,d=Math.asin(Math.cos(this.ad)*Math.sin(a)+Math.sin(this.ad)*Math.cos(a)*Math.cos(h)),f=Math.asin(Math.cos(a)*Math.sin(h)/Math.cos(d)),m=this.n*f,g=this.ro0*Math.pow(Math.tan(this.s0/2+this.s45),this.n)/Math.pow(Math.tan(d/2+this.s45),this.n),c.y=g*Math.cos(m)/1,c.x=g*Math.sin(m)/1,this.czech||(c.y*=-1,c.x*=-1),c},inverse:function qAe(c){var l,a,h,d,m,g,y,v=c.x;c.x=c.y,c.y=v,this.czech||(c.y*=-1,c.x*=-1),m=Math.sqrt(c.x*c.x+c.y*c.y),d=Math.atan2(c.y,c.x)/Math.sin(this.s0),h=2*(Math.atan(Math.pow(this.ro0/m,1/this.n)*Math.tan(this.s0/2+this.s45))-this.s45),l=Math.asin(Math.cos(this.ad)*Math.sin(h)-Math.sin(this.ad)*Math.cos(h)*Math.cos(d)),a=Math.asin(Math.cos(h)*Math.sin(d)/Math.cos(l)),c.x=this.long0-a/this.alfa,g=l,y=0;var _=0;do{c.y=2*(Math.atan(Math.pow(this.k,-1/this.alfa)*Math.pow(Math.tan(l/2+this.s45),1/this.alfa)*Math.pow((1+this.e*Math.sin(g))/(1-this.e*Math.sin(g)),this.e/2))-this.s45),Math.abs(g-c.y)<1e-10&&(y=1),g=c.y,_+=1}while(0===y&&_<15);return _>=15?null:c},names:["Krovak","krovak"]};function la(c,l,a,h,d){return c*d-l*Math.sin(2*d)+a*Math.sin(4*d)-h*Math.sin(6*d)}function gb(c){return 1-.25*c*(1+c/16*(3+1.25*c))}function yb(c){return.375*c*(1+.25*c*(1+.46875*c))}function vb(c){return.05859375*c*c*(1+.75*c)}function _b(c){return c*c*c*(35/3072)}function cv(c,l,a){var h=l*a;return c/Math.sqrt(1-h*h)}function uv(c){return Math.abs(c)<pt?c:c-hb(c)*Math.PI}function yE(c,l,a,h,d){var f,m;f=c/l;for(var g=0;g<15;g++)if(f+=m=(c-(l*f-a*Math.sin(2*f)+h*Math.sin(4*f)-d*Math.sin(6*f)))/(l-2*a*Math.cos(2*f)+4*h*Math.cos(4*f)-6*d*Math.cos(6*f)),Math.abs(m)<=1e-10)return f;return NaN}const eIe={init:function ZAe(){this.sphere||(this.e0=gb(this.es),this.e1=yb(this.es),this.e2=vb(this.es),this.e3=_b(this.es),this.ml0=this.a*la(this.e0,this.e1,this.e2,this.e3,this.lat0))},forward:function KAe(c){var l,a,h=c.x,d=c.y;if(h=Kt(h-this.long0),this.sphere)l=this.a*Math.asin(Math.cos(d)*Math.sin(h)),a=this.a*(Math.atan2(Math.tan(d),Math.cos(h))-this.lat0);else{var f=Math.sin(d),m=Math.cos(d),g=cv(this.a,this.e,f),y=Math.tan(d)*Math.tan(d),v=h*Math.cos(d),_=v*v,S=this.es*m*m/(1-this.es);l=g*v*(1-_*y*(1/6-(8-y+8*S)*_/120)),a=this.a*la(this.e0,this.e1,this.e2,this.e3,d)-this.ml0+g*f/m*_*(.5+(5-y+6*S)*_/24)}return c.x=l+this.x0,c.y=a+this.y0,c},inverse:function QAe(c){c.x-=this.x0,c.y-=this.y0;var h,d,l=c.x/this.a,a=c.y/this.a;if(this.sphere){var f=a+this.lat0;h=Math.asin(Math.sin(f)*Math.cos(l)),d=Math.atan2(Math.tan(l),Math.cos(f))}else{var g=yE(this.ml0/this.a+a,this.e0,this.e1,this.e2,this.e3);if(Math.abs(Math.abs(g)-pt)<=Bt)return c.x=this.long0,c.y=pt,a<0&&(c.y*=-1),c;var y=cv(this.a,this.e,Math.sin(g)),v=y*y*y/this.a/this.a*(1-this.es),_=Math.pow(Math.tan(g),2),S=l*this.a/y,b=S*S;h=g-y*Math.tan(g)/v*S*S*(.5-(1+3*_)*S*S/24),d=S*(1-b*(_/3+(1+3*_)*_*b/15))/Math.cos(g)}return c.x=Kt(d+this.long0),c.y=uv(h),c},names:["Cassini","Cassini_Soldner","cass"]};function wf(c,l){var a;return c>1e-7?(1-c*c)*(l/(1-(a=c*l)*a)-.5/c*Math.log((1-a)/(1+a))):2*l}const yIe={init:function sIe(){var l,c=Math.abs(this.lat0);if(this.mode=Math.abs(c-pt)<Bt?this.lat0<0?this.S_POLE:this.N_POLE:Math.abs(c)<Bt?this.EQUIT:this.OBLIQ,this.es>0)switch(this.qp=wf(this.e,1),this.mmf=.5/(1-this.es),this.apa=function pIe(c){var l,a=[];return a[0]=.3333333333333333*c,a[0]+=.17222222222222222*(l=c*c),a[1]=.06388888888888888*l,a[0]+=.10257936507936508*(l*=c),a[1]+=.0664021164021164*l,a[2]=.016415012942191543*l,a}(this.es),this.mode){case this.N_POLE:case this.S_POLE:this.dd=1;break;case this.EQUIT:this.rq=Math.sqrt(.5*this.qp),this.dd=1/this.rq,this.xmf=1,this.ymf=.5*this.qp;break;case this.OBLIQ:this.rq=Math.sqrt(.5*this.qp),l=Math.sin(this.lat0),this.sinb1=wf(this.e,l)/this.qp,this.cosb1=Math.sqrt(1-this.sinb1*this.sinb1),this.dd=Math.cos(this.lat0)/(Math.sqrt(1-this.es*l*l)*this.rq*this.cosb1),this.ymf=(this.xmf=this.rq)/this.dd,this.xmf*=this.dd}else this.mode===this.OBLIQ&&(this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0))},forward:function oIe(c){var l,a,h,d,f,m,g,y,v,_,S=c.x,b=c.y;if(S=Kt(S-this.long0),this.sphere){if(f=Math.sin(b),_=Math.cos(b),h=Math.cos(S),this.mode===this.OBLIQ||this.mode===this.EQUIT){if((a=this.mode===this.EQUIT?1+_*h:1+this.sinph0*f+this.cosph0*_*h)<=Bt)return null;l=(a=Math.sqrt(2/a))*_*Math.sin(S),a*=this.mode===this.EQUIT?f:this.cosph0*f-this.sinph0*_*h}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(h=-h),Math.abs(b+this.lat0)<Bt)return null;a=Yr-.5*b,l=(a=2*(this.mode===this.S_POLE?Math.cos(a):Math.sin(a)))*Math.sin(S),a*=h}}else{switch(g=0,y=0,v=0,h=Math.cos(S),d=Math.sin(S),f=Math.sin(b),m=wf(this.e,f),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(g=m/this.qp,y=Math.sqrt(1-g*g)),this.mode){case this.OBLIQ:v=1+this.sinb1*g+this.cosb1*y*h;break;case this.EQUIT:v=1+y*h;break;case this.N_POLE:v=pt+b,m=this.qp-m;break;case this.S_POLE:v=b-pt,m=this.qp+m}if(Math.abs(v)<Bt)return null;switch(this.mode){case this.OBLIQ:case this.EQUIT:v=Math.sqrt(2/v),a=this.mode===this.OBLIQ?this.ymf*v*(this.cosb1*g-this.sinb1*y*h):(v=Math.sqrt(2/(1+y*h)))*g*this.ymf,l=this.xmf*v*y*d;break;case this.N_POLE:case this.S_POLE:m>=0?(l=(v=Math.sqrt(m))*d,a=h*(this.mode===this.S_POLE?v:-v)):l=a=0}}return c.x=this.a*l+this.x0,c.y=this.a*a+this.y0,c},inverse:function aIe(c){c.x-=this.x0,c.y-=this.y0;var h,d,f,m,g,y,v,l=c.x/this.a,a=c.y/this.a;if(this.sphere){var S,_=0,b=0;if((d=.5*(S=Math.sqrt(l*l+a*a)))>1)return null;switch(d=2*Math.asin(d),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(b=Math.sin(d),_=Math.cos(d)),this.mode){case this.EQUIT:d=Math.abs(S)<=Bt?0:Math.asin(a*b/S),l*=b,a=_*S;break;case this.OBLIQ:d=Math.abs(S)<=Bt?this.lat0:Math.asin(_*this.sinph0+a*b*this.cosph0/S),l*=b*this.cosph0,a=(_-Math.sin(d)*this.sinph0)*S;break;case this.N_POLE:a=-a,d=pt-d;break;case this.S_POLE:d-=pt}h=0!==a||this.mode!==this.EQUIT&&this.mode!==this.OBLIQ?Math.atan2(l,a):0}else{if(v=0,this.mode===this.OBLIQ||this.mode===this.EQUIT){if(l/=this.dd,a*=this.dd,(y=Math.sqrt(l*l+a*a))<Bt)return c.x=this.long0,c.y=this.lat0,c;m=2*Math.asin(.5*y/this.rq),f=Math.cos(m),l*=m=Math.sin(m),this.mode===this.OBLIQ?(g=this.qp*(v=f*this.sinb1+a*m*this.cosb1/y),a=y*this.cosb1*f-a*this.sinb1*m):(g=this.qp*(v=a*m/y),a=y*f)}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(a=-a),!(g=l*l+a*a))return c.x=this.long0,c.y=this.lat0,c;v=1-g/this.qp,this.mode===this.S_POLE&&(v=-v)}h=Math.atan2(l,a),d=function mIe(c,l){var a=c+c;return c+l[0]*Math.sin(a)+l[1]*Math.sin(a+a)+l[2]*Math.sin(a+a+a)}(Math.asin(v),this.apa)}return c.x=Kt(this.long0+h),c.y=d,c},names:["Lambert Azimuthal Equal Area","Lambert_Azimuthal_Equal_Area","laea"],S_POLE:1,N_POLE:2,EQUIT:3,OBLIQ:4};function Cf(c){return Math.abs(c)>1&&(c=c>1?1:-1),Math.asin(c)}const wIe={init:function vIe(){Math.abs(this.lat1+this.lat2)<Bt||(this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e3=Math.sqrt(this.es),this.sin_po=Math.sin(this.lat1),this.cos_po=Math.cos(this.lat1),this.t1=this.sin_po,this.con=this.sin_po,this.ms1=Au(this.e3,this.sin_po,this.cos_po),this.qs1=wf(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat2),this.cos_po=Math.cos(this.lat2),this.t2=this.sin_po,this.ms2=Au(this.e3,this.sin_po,this.cos_po),this.qs2=wf(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat0),this.cos_po=Math.cos(this.lat0),this.t3=this.sin_po,this.qs0=wf(this.e3,this.sin_po),this.ns0=Math.abs(this.lat1-this.lat2)>Bt?(this.ms1*this.ms1-this.ms2*this.ms2)/(this.qs2-this.qs1):this.con,this.c=this.ms1*this.ms1+this.ns0*this.qs1,this.rh=this.a*Math.sqrt(this.c-this.ns0*this.qs0)/this.ns0)},forward:function _Ie(c){var l=c.x,a=c.y;this.sin_phi=Math.sin(a),this.cos_phi=Math.cos(a);var h=wf(this.e3,this.sin_phi),d=this.a*Math.sqrt(this.c-this.ns0*h)/this.ns0,f=this.ns0*Kt(l-this.long0),m=d*Math.sin(f)+this.x0,g=this.rh-d*Math.cos(f)+this.y0;return c.x=m,c.y=g,c},inverse:function SIe(c){var l,h,d,f,m;return c.x-=this.x0,c.y=this.rh-c.y+this.y0,this.ns0>=0?(l=Math.sqrt(c.x*c.x+c.y*c.y),h=1):(l=-Math.sqrt(c.x*c.x+c.y*c.y),h=-1),d=0,0!==l&&(d=Math.atan2(h*c.x,h*c.y)),h=l*this.ns0/this.a,m=this.sphere?Math.asin((this.c-h*h)/(2*this.ns0)):this.phi1z(this.e3,(this.c-h*h)/this.ns0),f=Kt(d/this.ns0+this.long0),c.x=f,c.y=m,c},names:["Albers_Conic_Equal_Area","Albers","aea"],phi1z:function bIe(c,l){var a,d,f,m,g=Cf(.5*l);if(c<Bt)return g;for(var y=c*c,v=1;v<=25;v++)if(g+=m=.5*(f=1-(d=c*(a=Math.sin(g)))*d)*f/Math.cos(g)*(l/(1-y)-a/f+.5/c*Math.log((1-d)/(1+d))),Math.abs(m)<=1e-7)return g;return null}},DIe={init:function CIe(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0),this.infinity_dist=1e3*this.a,this.rc=1},forward:function xIe(c){var l,a,h,d,m,g,y,_=c.y;return h=Kt(c.x-this.long0),l=Math.sin(_),a=Math.cos(_),d=Math.cos(h),(m=this.sin_p14*l+this.cos_p14*a*d)>0||Math.abs(m)<=Bt?(g=this.x0+1*this.a*a*Math.sin(h)/m,y=this.y0+1*this.a*(this.cos_p14*l-this.sin_p14*a*d)/m):(g=this.x0+this.infinity_dist*a*Math.sin(h),y=this.y0+this.infinity_dist*(this.cos_p14*l-this.sin_p14*a*d)),c.x=g,c.y=y,c},inverse:function EIe(c){var l,a,h,d,f,m;return c.x=(c.x-this.x0)/this.a,c.y=(c.y-this.y0)/this.a,c.x/=this.k0,c.y/=this.k0,(l=Math.sqrt(c.x*c.x+c.y*c.y))?(d=Math.atan2(l,this.rc),a=Math.sin(d),m=Cf((h=Math.cos(d))*this.sin_p14+c.y*a*this.cos_p14/l),f=Math.atan2(c.x*a,l*this.cos_p14*h-c.y*this.sin_p14*a),f=Kt(this.long0+f)):(m=this.phic0,f=0),c.x=f,c.y=m,c},names:["gnom"]},OIe={init:function IIe(){this.sphere||(this.k0=Au(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)))},forward:function RIe(c){var h,d,a=c.y,f=Kt(c.x-this.long0);if(this.sphere)h=this.x0+this.a*f*Math.cos(this.lat_ts),d=this.y0+this.a*Math.sin(a)/Math.cos(this.lat_ts);else{var m=wf(this.e,Math.sin(a));h=this.x0+this.a*this.k0*f,d=this.y0+this.a*m*.5/this.k0}return c.x=h,c.y=d,c},inverse:function PIe(c){var l,a;return c.x-=this.x0,c.y-=this.y0,this.sphere?(l=Kt(this.long0+c.x/this.a/Math.cos(this.lat_ts)),a=Math.asin(c.y/this.a*Math.cos(this.lat_ts))):(a=function AIe(c,l){var a=1-(1-c*c)/(2*c)*Math.log((1-c)/(1+c));if(Math.abs(Math.abs(l)-a)<1e-6)return l<0?-1*pt:pt;for(var d,f,m,g,h=Math.asin(.5*l),y=0;y<30;y++)if(f=Math.sin(h),m=Math.cos(h),g=c*f,h+=d=Math.pow(1-g*g,2)/(2*m)*(l/(1-c*c)-f/(1-g*g)+.5/c*Math.log((1-g)/(1+g))),Math.abs(d)<=1e-10)return h;return NaN}(this.e,2*c.y*this.k0/this.a),l=Kt(this.long0+c.x/(this.a*this.k0))),c.x=l,c.y=a,c},names:["cea"]},BIe={init:function NIe(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Equidistant Cylindrical (Plate Carre)",this.rc=Math.cos(this.lat_ts)},forward:function FIe(c){var a=c.y,h=Kt(c.x-this.long0),d=uv(a-this.lat0);return c.x=this.x0+this.a*h*this.rc,c.y=this.y0+this.a*d,c},inverse:function kIe(c){var a=c.y;return c.x=Kt(this.long0+(c.x-this.x0)/(this.a*this.rc)),c.y=uv(this.lat0+(a-this.y0)/this.a),c},names:["Equirectangular","Equidistant_Cylindrical","eqc"]},jIe={init:function UIe(){this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=gb(this.es),this.e1=yb(this.es),this.e2=vb(this.es),this.e3=_b(this.es),this.ml0=this.a*la(this.e0,this.e1,this.e2,this.e3,this.lat0)},forward:function GIe(c){var h,d,f,a=c.y,m=Kt(c.x-this.long0);if(f=m*Math.sin(a),this.sphere)Math.abs(a)<=Bt?(h=this.a*m,d=-1*this.a*this.lat0):(h=this.a*Math.sin(f)/Math.tan(a),d=this.a*(uv(a-this.lat0)+(1-Math.cos(f))/Math.tan(a)));else if(Math.abs(a)<=Bt)h=this.a*m,d=-1*this.ml0;else{var g=cv(this.a,this.e,Math.sin(a))/Math.tan(a);h=g*Math.sin(f),d=this.a*la(this.e0,this.e1,this.e2,this.e3,a)-this.ml0+g*(1-Math.cos(f))}return c.x=h+this.x0,c.y=d+this.y0,c},inverse:function zIe(c){var l,a,h,d,f,m,g,y,v;if(h=c.x-this.x0,d=c.y-this.y0,this.sphere)if(Math.abs(d+this.a*this.lat0)<=Bt)l=Kt(h/this.a+this.long0),a=0;else{var _;for(g=h*h/this.a/this.a+(m=this.lat0+d/this.a)*m,y=m,f=20;f;--f)if(y+=v=-1*(m*(y*(_=Math.tan(y))+1)-y-.5*(y*y+g)*_)/((y-m)/_-1),Math.abs(v)<=Bt){a=y;break}l=Kt(this.long0+Math.asin(h*Math.tan(y)/this.a)/Math.sin(a))}else if(Math.abs(d+this.ml0)<=Bt)a=0,l=Kt(this.long0+h/this.a);else{var S,b,T,x,E;for(g=h*h/this.a/this.a+(m=(this.ml0+d)/this.a)*m,y=m,f=20;f;--f)if(E=this.e*Math.sin(y),S=Math.sqrt(1-E*E)*Math.tan(y),b=this.a*la(this.e0,this.e1,this.e2,this.e3,y),T=this.e0-2*this.e1*Math.cos(2*y)+4*this.e2*Math.cos(4*y)-6*this.e3*Math.cos(6*y),y-=v=(m*(S*(x=b/this.a)+1)-x-.5*S*(x*x+g))/(this.es*Math.sin(2*y)*(x*x+g-2*m*x)/(4*S)+(m-x)*(S*T-2/Math.sin(2*y))-T),Math.abs(v)<=Bt){a=y;break}S=Math.sqrt(1-this.es*Math.pow(Math.sin(a),2))*Math.tan(a),l=Kt(this.long0+Math.asin(h*S/this.a)/Math.sin(a))}return c.x=l,c.y=a,c},names:["Polyconic","poly"]},YIe={init:function WIe(){this.A=[],this.A[1]=.6399175073,this.A[2]=-.1358797613,this.A[3]=.063294409,this.A[4]=-.02526853,this.A[5]=.0117879,this.A[6]=-.0055161,this.A[7]=.0026906,this.A[8]=-.001333,this.A[9]=67e-5,this.A[10]=-34e-5,this.B_re=[],this.B_im=[],this.B_re[1]=.7557853228,this.B_im[1]=0,this.B_re[2]=.249204646,this.B_im[2]=.003371507,this.B_re[3]=-.001541739,this.B_im[3]=.04105856,this.B_re[4]=-.10162907,this.B_im[4]=.01727609,this.B_re[5]=-.26623489,this.B_im[5]=-.36249218,this.B_re[6]=-.6870983,this.B_im[6]=-1.1651967,this.C_re=[],this.C_im=[],this.C_re[1]=1.3231270439,this.C_im[1]=0,this.C_re[2]=-.577245789,this.C_im[2]=-.007809598,this.C_re[3]=.508307513,this.C_im[3]=-.112208952,this.C_re[4]=-.15094762,this.C_im[4]=.18200602,this.C_re[5]=1.01418179,this.C_im[5]=1.64497696,this.C_re[6]=1.9660549,this.C_im[6]=2.5127645,this.D=[],this.D[1]=1.5627014243,this.D[2]=.5185406398,this.D[3]=-.03333098,this.D[4]=-.1052906,this.D[5]=-.0368594,this.D[6]=.007317,this.D[7]=.0122,this.D[8]=.00394,this.D[9]=-.0013},forward:function XIe(c){var l,m=(c.y-this.lat0)/lb*1e-5,g=c.x-this.long0,y=1,v=0;for(l=1;l<=10;l++)v+=this.A[l]*(y*=m);var E,_=v,S=g,b=1,T=0,D=0,I=0;for(l=1;l<=6;l++)E=T*_+b*S,D=D+this.B_re[l]*(b=b*_-T*S)-this.B_im[l]*(T=E),I=I+this.B_im[l]*b+this.B_re[l]*T;return c.x=I*this.a+this.x0,c.y=D*this.a+this.y0,c},inverse:function qIe(c){var l,S,m=(c.y-this.y0)/this.a,g=(c.x-this.x0)/this.a,y=1,v=0,b=0,T=0;for(l=1;l<=6;l++)S=v*m+y*g,b=b+this.C_re[l]*(y=y*m-v*g)-this.C_im[l]*(v=S),T=T+this.C_im[l]*y+this.C_re[l]*v;for(var x=0;x<this.iterations;x++){var M,E=b,D=T,L=m,P=g;for(l=2;l<=6;l++)M=D*b+E*T,L+=(l-1)*(this.B_re[l]*(E=E*b-D*T)-this.B_im[l]*(D=M)),P+=(l-1)*(this.B_im[l]*E+this.B_re[l]*D);E=1,D=0;var F=this.B_re[1],V=this.B_im[1];for(l=2;l<=6;l++)M=D*b+E*T,F+=l*(this.B_re[l]*(E=E*b-D*T)-this.B_im[l]*(D=M)),V+=l*(this.B_im[l]*E+this.B_re[l]*D);var z=F*F+V*V;b=(L*F+P*V)/z,T=(P*F-L*V)/z}var q=b,K=T,se=1,W=0;for(l=1;l<=9;l++)W+=this.D[l]*(se*=q);var Q=this.lat0+W*lb*1e5;return c.x=this.long0+K,c.y=Q,c},names:["New_Zealand_Map_Grid","nzmg"]},eRe={init:function ZIe(){},forward:function KIe(c){var a=c.y,h=Kt(c.x-this.long0),d=this.x0+this.a*h,f=this.y0+this.a*Math.log(Math.tan(Math.PI/4+a/2.5))*1.25;return c.x=d,c.y=f,c},inverse:function QIe(c){c.x-=this.x0,c.y-=this.y0;var l=Kt(this.long0+c.x/this.a),a=2.5*(Math.atan(Math.exp(.8*c.y/this.a))-Math.PI/4);return c.x=l,c.y=a,c},names:["Miller_Cylindrical","mill"]},oRe={init:function nRe(){this.sphere?(this.n=1,this.m=0,this.es=0,this.C_y=Math.sqrt((this.m+1)/this.n),this.C_x=this.C_y/(this.m+1)):this.en=jX(this.es)},forward:function rRe(c){var l,a,h=c.x,d=c.y;if(h=Kt(h-this.long0),this.sphere){if(this.m)for(var f=this.n*Math.sin(d),m=20;m;--m){var g=(this.m*d+Math.sin(d)-f)/(this.m+Math.cos(d));if(d-=g,Math.abs(g)<Bt)break}else d=1!==this.n?Math.asin(this.n*Math.sin(d)):d;l=this.a*this.C_x*h*(this.m+Math.cos(d)),a=this.a*this.C_y*d}else{var y=Math.sin(d),v=Math.cos(d);a=this.a*pE(d,y,v,this.en),l=this.a*h*v/Math.sqrt(1-this.es*y*y)}return c.x=l,c.y=a,c},inverse:function iRe(c){var l,h,d;return c.x-=this.x0,h=c.x/this.a,c.y-=this.y0,l=c.y/this.a,this.sphere?(l/=this.C_y,h/=this.C_x*(this.m+Math.cos(l)),this.m?l=Cf((this.m*l+Math.sin(l))/this.n):1!==this.n&&(l=Cf(Math.sin(l)/this.n)),h=Kt(h+this.long0),l=uv(l)):(l=WX(c.y/this.a,this.es,this.en),(d=Math.abs(l))<pt?(d=Math.sin(l),h=Kt(this.long0+c.x*Math.sqrt(1-this.es*d*d)/(this.a*Math.cos(l)))):d-Bt<pt&&(h=this.long0)),c.x=h,c.y=l,c},names:["Sinusoidal","sinu"]},hRe={init:function aRe(){},forward:function lRe(c){for(var a=c.y,h=Kt(c.x-this.long0),d=a,f=Math.PI*Math.sin(a);;){var m=-(d+Math.sin(d)-f)/(1+Math.cos(d));if(d+=m,Math.abs(m)<Bt)break}d/=2,Math.PI/2-Math.abs(a)<Bt&&(h=0);var g=.900316316158*this.a*h*Math.cos(d)+this.x0,y=1.4142135623731*this.a*Math.sin(d)+this.y0;return c.x=g,c.y=y,c},inverse:function cRe(c){var l,a;c.x-=this.x0,c.y-=this.y0,a=c.y/(1.4142135623731*this.a),Math.abs(a)>.999999999999&&(a=.999999999999),l=Math.asin(a);var h=Kt(this.long0+c.x/(.900316316158*this.a*Math.cos(l)));h<-Math.PI&&(h=-Math.PI),h>Math.PI&&(h=Math.PI),a=(2*l+Math.sin(2*l))/Math.PI,Math.abs(a)>1&&(a=1);var d=Math.asin(a);return c.x=h,c.y=d,c},names:["Mollweide","moll"]},gRe={init:function dRe(){Math.abs(this.lat1+this.lat2)<Bt||(this.lat2=this.lat2||this.lat1,this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=gb(this.es),this.e1=yb(this.es),this.e2=vb(this.es),this.e3=_b(this.es),this.sinphi=Math.sin(this.lat1),this.cosphi=Math.cos(this.lat1),this.ms1=Au(this.e,this.sinphi,this.cosphi),this.ml1=la(this.e0,this.e1,this.e2,this.e3,this.lat1),Math.abs(this.lat1-this.lat2)<Bt?this.ns=this.sinphi:(this.sinphi=Math.sin(this.lat2),this.cosphi=Math.cos(this.lat2),this.ms2=Au(this.e,this.sinphi,this.cosphi),this.ml2=la(this.e0,this.e1,this.e2,this.e3,this.lat2),this.ns=(this.ms1-this.ms2)/(this.ml2-this.ml1)),this.g=this.ml1+this.ms1/this.ns,this.ml0=la(this.e0,this.e1,this.e2,this.e3,this.lat0),this.rh=this.a*(this.g-this.ml0))},forward:function fRe(c){var h,l=c.x,a=c.y;if(this.sphere)h=this.a*(this.g-a);else{var d=la(this.e0,this.e1,this.e2,this.e3,a);h=this.a*(this.g-d)}var f=this.ns*Kt(l-this.long0),m=this.x0+h*Math.sin(f),g=this.y0+this.rh-h*Math.cos(f);return c.x=m,c.y=g,c},inverse:function pRe(c){var l,a,h,d;c.x-=this.x0,c.y=this.rh-c.y+this.y0,this.ns>=0?(a=Math.sqrt(c.x*c.x+c.y*c.y),l=1):(a=-Math.sqrt(c.x*c.x+c.y*c.y),l=-1);var f=0;return 0!==a&&(f=Math.atan2(l*c.x,l*c.y)),this.sphere?(d=Kt(this.long0+f/this.ns),h=uv(this.g-a/this.a),c.x=d,c.y=h,c):(h=yE(this.g-a/this.a,this.e0,this.e1,this.e2,this.e3),d=Kt(this.long0+f/this.ns),c.x=d,c.y=h,c)},names:["Equidistant_Conic","eqdc"]},bRe={init:function yRe(){this.R=this.a},forward:function vRe(c){var d,f,a=c.y,h=Kt(c.x-this.long0);Math.abs(a)<=Bt&&(d=this.x0+this.R*h,f=this.y0);var m=Cf(2*Math.abs(a/Math.PI));(Math.abs(h)<=Bt||Math.abs(Math.abs(a)-pt)<=Bt)&&(d=this.x0,f=a>=0?this.y0+Math.PI*this.R*Math.tan(.5*m):this.y0+Math.PI*this.R*-Math.tan(.5*m));var g=.5*Math.abs(Math.PI/h-h/Math.PI),y=g*g,v=Math.sin(m),_=Math.cos(m),S=_/(v+_-1),T=S*(2/v-1),x=T*T,E=Math.PI*this.R*(g*(S-x)+Math.sqrt(y*(S-x)*(S-x)-(x+y)*(S*S-x)))/(x+y);h<0&&(E=-E),d=this.x0+E;var D=y+S;return E=Math.PI*this.R*(T*D-g*Math.sqrt((x+y)*(y+1)-D*D))/(x+y),f=a>=0?this.y0+E:this.y0-E,c.x=d,c.y=f,c},inverse:function _Re(c){var l,a,h,d,f,m,g,y,v,_,S,b;return c.x-=this.x0,c.y-=this.y0,S=Math.PI*this.R,f=(h=c.x/S)*h+(d=c.y/S)*d,S=3*(d*d/(y=-2*(m=-Math.abs(d)*(1+f))+1+2*d*d+f*f)+(2*(g=m-2*d*d+h*h)*g*g/y/y/y-9*m*g/y/y)/27)/(v=(m-g*g/3/y)/y)/(_=2*Math.sqrt(-v/3)),Math.abs(S)>1&&(S=S>=0?1:-1),b=Math.acos(S)/3,a=c.y>=0?(-_*Math.cos(b+Math.PI/3)-g/3/y)*Math.PI:-(-_*Math.cos(b+Math.PI/3)-g/3/y)*Math.PI,l=Math.abs(h)<Bt?this.long0:Kt(this.long0+Math.PI*(f-1+Math.sqrt(1+2*(h*h-d*d)+f*f))/2/h),c.x=l,c.y=a,c},names:["Van_der_Grinten_I","VanDerGrinten","vandg"]},ERe={init:function TRe(){this.sin_p12=Math.sin(this.lat0),this.cos_p12=Math.cos(this.lat0)},forward:function wRe(c){var m,g,y,v,_,S,b,T,x,E,D,I,M,L,P,F,V,z,q,K,se,W,l=c.x,a=c.y,h=Math.sin(c.y),d=Math.cos(c.y),f=Kt(l-this.long0);return this.sphere?Math.abs(this.sin_p12-1)<=Bt?(c.x=this.x0+this.a*(pt-a)*Math.sin(f),c.y=this.y0-this.a*(pt-a)*Math.cos(f),c):Math.abs(this.sin_p12+1)<=Bt?(c.x=this.x0+this.a*(pt+a)*Math.sin(f),c.y=this.y0+this.a*(pt+a)*Math.cos(f),c):(z=this.sin_p12*h+this.cos_p12*d*Math.cos(f),V=(F=Math.acos(z))?F/Math.sin(F):1,c.x=this.x0+this.a*V*d*Math.sin(f),c.y=this.y0+this.a*V*(this.cos_p12*h-this.sin_p12*d*Math.cos(f)),c):(m=gb(this.es),g=yb(this.es),y=vb(this.es),v=_b(this.es),Math.abs(this.sin_p12-1)<=Bt?(_=this.a*la(m,g,y,v,pt),S=this.a*la(m,g,y,v,a),c.x=this.x0+(_-S)*Math.sin(f),c.y=this.y0-(_-S)*Math.cos(f),c):Math.abs(this.sin_p12+1)<=Bt?(_=this.a*la(m,g,y,v,pt),S=this.a*la(m,g,y,v,a),c.x=this.x0+(_+S)*Math.sin(f),c.y=this.y0+(_+S)*Math.cos(f),c):(b=h/d,T=cv(this.a,this.e,this.sin_p12),x=cv(this.a,this.e,h),E=Math.atan((1-this.es)*b+this.es*T*this.sin_p12/(x*d)),q=0===(D=Math.atan2(Math.sin(f),this.cos_p12*Math.tan(E)-this.sin_p12*Math.cos(f)))?Math.asin(this.cos_p12*Math.sin(E)-this.sin_p12*Math.cos(E)):Math.abs(Math.abs(D)-Math.PI)<=Bt?-Math.asin(this.cos_p12*Math.sin(E)-this.sin_p12*Math.cos(E)):Math.asin(Math.sin(f)*Math.cos(E)/Math.sin(D)),I=this.e*this.sin_p12/Math.sqrt(1-this.es),M=this.e*this.cos_p12*Math.cos(D)/Math.sqrt(1-this.es),c.x=this.x0+(F=T*q*(1-(K=q*q)*(P=M*M)*(1-P)/6+(se=K*q)/8*(L=I*M)*(1-2*P)+(W=se*q)/120*(P*(4-7*P)-3*I*I*(1-7*P))-W*q/48*L))*Math.sin(D),c.y=this.y0+F*Math.cos(D),c))},inverse:function CRe(c){var l,a,h,d,f,m,g,y,v,_,S,b,x,E,D,I,M,L,P,F,V,z,q;return c.x-=this.x0,c.y-=this.y0,this.sphere?(l=Math.sqrt(c.x*c.x+c.y*c.y))>2*pt*this.a?void 0:(a=l/this.a,h=Math.sin(a),d=Math.cos(a),f=this.long0,Math.abs(l)<=Bt?m=this.lat0:(m=Cf(d*this.sin_p12+c.y*h*this.cos_p12/l),g=Math.abs(this.lat0)-pt,f=Math.abs(g)<=Bt?Kt(this.lat0>=0?this.long0+Math.atan2(c.x,-c.y):this.long0-Math.atan2(-c.x,c.y)):Kt(this.long0+Math.atan2(c.x*h,l*this.cos_p12*d-c.y*this.sin_p12*h))),c.x=f,c.y=m,c):(y=gb(this.es),v=yb(this.es),_=vb(this.es),S=_b(this.es),Math.abs(this.sin_p12-1)<=Bt?(m=yE(((b=this.a*la(y,v,_,S,pt))-(l=Math.sqrt(c.x*c.x+c.y*c.y)))/this.a,y,v,_,S),f=Kt(this.long0+Math.atan2(c.x,-1*c.y)),c.x=f,c.y=m,c):Math.abs(this.sin_p12+1)<=Bt?(b=this.a*la(y,v,_,S,pt),m=yE(((l=Math.sqrt(c.x*c.x+c.y*c.y))-b)/this.a,y,v,_,S),f=Kt(this.long0+Math.atan2(c.x,c.y)),c.x=f,c.y=m,c):(l=Math.sqrt(c.x*c.x+c.y*c.y),D=Math.atan2(c.x,c.y),x=cv(this.a,this.e,this.sin_p12),I=Math.cos(D),P=3*this.es*(1-(L=-(M=this.e*this.cos_p12*I)*M/(1-this.es)))*this.sin_p12*this.cos_p12*I/(1-this.es),z=1-L*(V=(F=l/x)-L*(1+L)*Math.pow(F,3)/6-P*(1+3*L)*Math.pow(F,4)/24)*V/2-F*V*V*V/6,E=Math.asin(this.sin_p12*Math.cos(V)+this.cos_p12*Math.sin(V)*I),f=Kt(this.long0+Math.asin(Math.sin(D)*Math.sin(V)/Math.cos(E))),q=Math.sin(E),m=Math.atan2((q-this.es*z*this.sin_p12)*Math.tan(E),q*(1-this.es)),c.x=f,c.y=m,c))},names:["Azimuthal_Equidistant","aeqd"]},RRe={init:function MRe(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0)},forward:function DRe(c){var l,a,h,d,m,g,y,_=c.y;return h=Kt(c.x-this.long0),l=Math.sin(_),a=Math.cos(_),d=Math.cos(h),((m=this.sin_p14*l+this.cos_p14*a*d)>0||Math.abs(m)<=Bt)&&(g=1*this.a*a*Math.sin(h),y=this.y0+1*this.a*(this.cos_p14*l-this.sin_p14*a*d)),c.x=g,c.y=y,c},inverse:function ARe(c){var l,a,h,d,f,m,g;return c.x-=this.x0,c.y-=this.y0,a=Cf((l=Math.sqrt(c.x*c.x+c.y*c.y))/this.a),h=Math.sin(a),d=Math.cos(a),m=this.long0,Math.abs(l)<=Bt?(g=this.lat0,c.x=m,c.y=g,c):(g=Cf(d*this.sin_p14+c.y*h*this.cos_p14/l),f=Math.abs(this.lat0)-pt,Math.abs(f)<=Bt?(m=Kt(this.lat0>=0?this.long0+Math.atan2(c.x,-c.y):this.long0-Math.atan2(-c.x,c.y)),c.x=m,c.y=g,c):(m=Kt(this.long0+Math.atan2(c.x*h,l*this.cos_p14*d-c.y*this.sin_p14*h)),c.x=m,c.y=g,c))},names:["ortho"]};function vE(c,l,a,h){var d;return c<Bt?(h.value=1,d=0):(d=Math.atan2(l,a),Math.abs(d)<=Yr?h.value=1:d>Yr&&d<=pt+Yr?(h.value=2,d-=pt):d>pt+Yr||d<=-(pt+Yr)?(h.value=3,d=d>=0?d-as:d+as):(h.value=4,d+=pt)),d}function hv(c,l){var a=c+l;return a<-as?a+=cb:a>+as&&(a-=cb),a}const FRe={init:function PRe(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Quadrilateralized Spherical Cube",this.face=this.lat0>=pt-Yr/2?5:this.lat0<=-(pt-Yr/2)?6:Math.abs(this.long0)<=Yr?1:Math.abs(this.long0)<=pt+Yr?this.long0>0?2:4:3,0!==this.es&&(this.one_minus_f=1-(this.a-this.b)/this.a,this.one_minus_f_squared=this.one_minus_f*this.one_minus_f)},forward:function LRe(c){var a,h,d,f,m,g,l={x:0,y:0},y={value:0};if(c.x-=this.long0,a=0!==this.es?Math.atan(this.one_minus_f_squared*Math.tan(c.y)):c.y,h=c.x,5===this.face)f=pt-a,h>=Yr&&h<=pt+Yr?(y.value=1,d=h-pt):h>pt+Yr||h<=-(pt+Yr)?(y.value=2,d=h>0?h-as:h+as):h>-(pt+Yr)&&h<=-Yr?(y.value=3,d=h+pt):(y.value=4,d=h);else if(6===this.face)f=pt+a,h>=Yr&&h<=pt+Yr?(y.value=1,d=-h+pt):h<Yr&&h>=-Yr?(y.value=2,d=-h):h<-Yr&&h>=-(pt+Yr)?(y.value=3,d=-h-pt):(y.value=4,d=h>0?-h+as:-h-as);else{var v,_,S,b,T,x;2===this.face?h=hv(h,+pt):3===this.face?h=hv(h,+as):4===this.face&&(h=hv(h,-pt)),b=Math.sin(a),T=Math.cos(a),x=Math.sin(h),v=T*Math.cos(h),_=T*x,S=b,1===this.face?d=vE(f=Math.acos(v),S,_,y):2===this.face?d=vE(f=Math.acos(_),S,-v,y):3===this.face?d=vE(f=Math.acos(-v),S,-_,y):4===this.face?d=vE(f=Math.acos(-_),S,v,y):(f=d=0,y.value=1)}return g=Math.atan(12/as*(d+Math.acos(Math.sin(d)*Math.cos(Yr))-pt)),m=Math.sqrt((1-Math.cos(f))/(Math.cos(g)*Math.cos(g))/(1-Math.cos(Math.atan(1/Math.cos(d))))),2===y.value?g+=pt:3===y.value?g+=as:4===y.value&&(g+=1.5*as),l.x=m*Math.cos(g),l.y=m*Math.sin(g),l.x=l.x*this.a+this.x0,l.y=l.y*this.a+this.y0,c.x=l.x,c.y=l.y,c},inverse:function ORe(c){var a,h,d,f,m,g,y,v,_,E,D,I,l={lam:0,phi:0},S={value:0};if(c.x=(c.x-this.x0)/this.a,c.y=(c.y-this.y0)/this.a,h=Math.atan(Math.sqrt(c.x*c.x+c.y*c.y)),a=Math.atan2(c.y,c.x),c.x>=0&&c.x>=Math.abs(c.y)?S.value=1:c.y>=0&&c.y>=Math.abs(c.x)?(S.value=2,a-=pt):c.x<0&&-c.x>=Math.abs(c.y)?(S.value=3,a=a<0?a+as:a-as):(S.value=4,a+=pt),_=as/12*Math.tan(a),m=Math.sin(_)/(Math.cos(_)-1/Math.sqrt(2)),g=Math.atan(m),(y=1-(d=Math.cos(a))*d*(f=Math.tan(h))*f*(1-Math.cos(Math.atan(1/Math.cos(g)))))<-1?y=-1:y>1&&(y=1),5===this.face)v=Math.acos(y),l.phi=pt-v,l.lam=1===S.value?g+pt:2===S.value?g<0?g+as:g-as:3===S.value?g-pt:g;else if(6===this.face)v=Math.acos(y),l.phi=v-pt,l.lam=1===S.value?-g+pt:2===S.value?-g:3===S.value?-g-pt:g<0?-g-as:-g+as;else{var b,T,x;_=(b=y)*b,T=(_+=(x=_>=1?0:Math.sqrt(1-_)*Math.sin(g))*x)>=1?0:Math.sqrt(1-_),2===S.value?(_=T,T=-x,x=_):3===S.value?(T=-T,x=-x):4===S.value&&(_=T,T=x,x=-_),2===this.face?(_=b,b=-T,T=_):3===this.face?(b=-b,T=-T):4===this.face&&(_=b,b=T,T=-_),l.phi=Math.acos(-x)-pt,l.lam=Math.atan2(T,b),2===this.face?l.lam=hv(l.lam,-pt):3===this.face?l.lam=hv(l.lam,-as):4===this.face&&(l.lam=hv(l.lam,+pt))}return 0!==this.es&&(E=l.phi<0?1:0,D=Math.tan(l.phi),I=this.b/Math.sqrt(D*D+this.one_minus_f_squared),l.phi=Math.atan(Math.sqrt(this.a*this.a-I*I)/(this.one_minus_f*I)),E&&(l.phi=-l.phi)),l.lam+=this.long0,c.x=l.lam,c.y=l.phi,c},names:["Quadrilateralized Spherical Cube","Quadrilateralized_Spherical_Cube","qsc"]};var lN=[[1,22199e-21,-715515e-10,31103e-10],[.9986,-482243e-9,-24897e-9,-13309e-10],[.9954,-83103e-8,-448605e-10,-9.86701e-7],[.99,-.00135364,-59661e-9,36777e-10],[.9822,-.00167442,-449547e-11,-572411e-11],[.973,-.00214868,-903571e-10,1.8736e-8],[.96,-.00305085,-900761e-10,164917e-11],[.9427,-.00382792,-653386e-10,-26154e-10],[.9216,-.00467746,-10457e-8,481243e-11],[.8962,-.00536223,-323831e-10,-543432e-11],[.8679,-.00609363,-113898e-9,332484e-11],[.835,-.00698325,-640253e-10,9.34959e-7],[.7986,-.00755338,-500009e-10,9.35324e-7],[.7597,-.00798324,-35971e-9,-227626e-11],[.7186,-.00851367,-701149e-10,-86303e-10],[.6732,-.00986209,-199569e-9,191974e-10],[.6213,-.010418,883923e-10,624051e-11],[.5722,-.00906601,182e-6,624051e-11],[.5322,-.00677797,275608e-9,624051e-11]],Sb=[[-520417e-23,.0124,121431e-23,-845284e-16],[.062,.0124,-1.26793e-9,4.22642e-10],[.124,.0124,5.07171e-9,-1.60604e-9],[.186,.0123999,-1.90189e-8,6.00152e-9],[.248,.0124002,7.10039e-8,-2.24e-8],[.31,.0123992,-2.64997e-7,8.35986e-8],[.372,.0124029,9.88983e-7,-3.11994e-7],[.434,.0123893,-369093e-11,-4.35621e-7],[.4958,.0123198,-102252e-10,-3.45523e-7],[.5571,.0121916,-154081e-10,-5.82288e-7],[.6176,.0119938,-241424e-10,-5.25327e-7],[.6769,.011713,-320223e-10,-5.16405e-7],[.7346,.0113541,-397684e-10,-6.09052e-7],[.7903,.0109107,-489042e-10,-104739e-11],[.8435,.0103431,-64615e-9,-1.40374e-9],[.8936,.00969686,-64636e-9,-8547e-9],[.9394,.00840947,-192841e-9,-42106e-10],[.9761,.00616527,-256e-6,-42106e-10],[1,.00328947,-319159e-9,-42106e-10]],_E=function(c,l){return c[0]+l*(c[1]+l*(c[2]+l*c[3]))};const jRe={init:function URe(){this.x0=this.x0||0,this.y0=this.y0||0,this.long0=this.long0||0,this.es=0,this.title=this.title||"Robinson"},forward:function GRe(c){var l=Kt(c.x-this.long0),a=Math.abs(c.y),h=Math.floor(11.459155902616464*a);h<0?h=0:h>=18&&(h=17);var d={x:_E(lN[h],a=Du*(a-.08726646259971647*h))*l,y:_E(Sb[h],a)};return c.y<0&&(d.y=-d.y),d.x=d.x*this.a*.8487+this.x0,d.y=d.y*this.a*1.3523+this.y0,d},inverse:function zRe(c){var l={x:(c.x-this.x0)/(.8487*this.a),y:Math.abs(c.y-this.y0)/(1.3523*this.a)};if(l.y>=1)l.x/=lN[18][0],l.y=c.y<0?-pt:pt;else{var a=Math.floor(18*l.y);for(a<0?a=0:a>=18&&(a=17);;)if(Sb[a][0]>l.y)--a;else{if(!(Sb[a+1][0]<=l.y))break;++a}var h=Sb[a],d=5*(l.y-h[0])/(Sb[a+1][0]-h[0]);d=function BRe(c,l,a,h){for(var d=l;h;--h){var f=c(d);if(d-=f,Math.abs(f)<a)break}return d}(function(f){return(_E(h,f)-l.y)/function(c,l){return c[1]+l*(2*c[2]+3*l*c[3])}(h,f)},d,Bt,100),l.x/=_E(lN[a],d),l.y=(5*a+d)*ho,c.y<0&&(l.y=-l.y)}return l.x=Kt(l.x+this.long0),l},names:["Robinson","robin"]},YRe={init:function WRe(){this.name="geocent"},forward:function XRe(c){return CX(c,this.es,this.a)},inverse:function qRe(c){return xX(c,this.es,this.a,this.b)},names:["Geocentric","geocentric","geocent","Geocent"]};var bb={h:{def:1e5,num:!0},azi:{def:0,num:!0,degrees:!0},tilt:{def:0,num:!0,degrees:!0},long0:{def:0,num:!0},lat0:{def:0,num:!0}};const ePe={init:function ZRe(){if(Object.keys(bb).forEach(function(a){if(typeof this[a]>"u")this[a]=bb[a].def;else{if(bb[a].num&&isNaN(this[a]))throw new Error("Invalid parameter value, must be numeric "+a+" = "+this[a]);bb[a].num&&(this[a]=parseFloat(this[a]))}bb[a].degrees&&(this[a]=this[a]*ho)}.bind(this)),Math.abs(Math.abs(this.lat0)-pt)<Bt?this.mode=this.lat0<0?1:0:Math.abs(this.lat0)<Bt?this.mode=2:(this.mode=3,this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0)),this.pn1=this.h/this.a,this.pn1<=0||this.pn1>1e10)throw new Error("Invalid height");this.p=1+this.pn1,this.rp=1/this.p,this.h1=1/this.pn1,this.pfact=(this.p+1)*this.h1,this.es=0;var c=this.tilt,l=this.azi;this.cg=Math.cos(l),this.sg=Math.sin(l),this.cw=Math.cos(c),this.sw=Math.sin(c)},forward:function KRe(c){c.x-=this.long0;var d,f,m,g,l=Math.sin(c.y),a=Math.cos(c.y),h=Math.cos(c.x);switch(this.mode){case 3:f=this.sinph0*l+this.cosph0*a*h;break;case 2:f=a*h;break;case 1:f=-l;break;case 0:f=l}switch(d=(f=this.pn1/(this.p-f))*a*Math.sin(c.x),this.mode){case 3:f*=this.cosph0*l-this.sinph0*a*h;break;case 2:f*=l;break;case 0:f*=-a*h;break;case 1:f*=a*h}return d=(d*this.cg-f*this.sg)*this.cw*(g=1/((m=f*this.cg+d*this.sg)*this.sw*this.h1+this.cw)),f=m*g,c.x=d*this.a,c.y=f*this.a,c},inverse:function QRe(c){c.x/=this.a,c.y/=this.a;var a,h,d,l={x:c.x,y:c.y};c.x=(a=this.pn1*c.x*(d=1/(this.pn1-c.y*this.sw)))*this.cg+(h=this.pn1*c.y*this.cw*d)*this.sg,c.y=h*this.cg-a*this.sg;var f=Dc(c.x,c.y);if(Math.abs(f)<Bt)l.x=0,l.y=c.y;else{var m,g;switch(g=1-f*f*this.pfact,g=(this.p-Math.sqrt(g))/(this.pn1/f+f/this.pn1),m=Math.sqrt(1-g*g),this.mode){case 3:l.y=Math.asin(m*this.sinph0+c.y*g*this.cosph0/f),c.y=(m-this.sinph0*Math.sin(l.y))*f,c.x*=g*this.cosph0;break;case 2:l.y=Math.asin(c.y*g/f),c.y=m*f,c.x*=g;break;case 0:l.y=Math.asin(m),c.y=-c.y;break;case 1:l.y=-Math.asin(m)}l.x=Math.atan2(c.x,c.y)}return c.x=l.x+this.long0,c.y=l.y,c},names:["Tilted_Perspective","tpers"]},sPe={init:function tPe(){if(this.flip_axis="x"===this.sweep?1:0,this.h=Number(this.h),this.radius_g_1=this.h/this.a,this.radius_g_1<=0||this.radius_g_1>1e10)throw new Error;if(this.radius_g=1+this.radius_g_1,this.C=this.radius_g*this.radius_g-1,0!==this.es){var c=1-this.es,l=1/c;this.radius_p=Math.sqrt(c),this.radius_p2=c,this.radius_p_inv2=l,this.shape="ellipse"}else this.radius_p=1,this.radius_p2=1,this.radius_p_inv2=1,this.shape="sphere";this.title||(this.title="Geostationary Satellite View")},forward:function nPe(c){var h,d,f,m,l=c.x,a=c.y;if(l-=this.long0,"ellipse"===this.shape){a=Math.atan(this.radius_p2*Math.tan(a));var g=this.radius_p/Dc(this.radius_p*Math.cos(a),Math.sin(a));if(d=g*Math.cos(l)*Math.cos(a),f=g*Math.sin(l)*Math.cos(a),m=g*Math.sin(a),(this.radius_g-d)*d-f*f-m*m*this.radius_p_inv2<0)return c.x=Number.NaN,c.y=Number.NaN,c;h=this.radius_g-d,this.flip_axis?(c.x=this.radius_g_1*Math.atan(f/Dc(m,h)),c.y=this.radius_g_1*Math.atan(m/h)):(c.x=this.radius_g_1*Math.atan(f/h),c.y=this.radius_g_1*Math.atan(m/Dc(f,h)))}else"sphere"===this.shape&&(h=Math.cos(a),d=Math.cos(l)*h,f=Math.sin(l)*h,m=Math.sin(a),h=this.radius_g-d,this.flip_axis?(c.x=this.radius_g_1*Math.atan(f/Dc(m,h)),c.y=this.radius_g_1*Math.atan(m/h)):(c.x=this.radius_g_1*Math.atan(f/h),c.y=this.radius_g_1*Math.atan(m/Dc(f,h))));return c.x=c.x*this.a,c.y=c.y*this.a,c},inverse:function rPe(c){var d,f,m,g,l=-1,a=0,h=0;if(c.x=c.x/this.a,c.y=c.y/this.a,"ellipse"===this.shape){this.flip_axis?(h=Math.tan(c.y/this.radius_g_1),a=Math.tan(c.x/this.radius_g_1)*Dc(1,h)):(a=Math.tan(c.x/this.radius_g_1),h=Math.tan(c.y/this.radius_g_1)*Dc(1,a));var y=h/this.radius_p;if((m=(f=2*this.radius_g*l)*f-4*(d=a*a+y*y+l*l)*this.C)<0)return c.x=Number.NaN,c.y=Number.NaN,c;g=(-f-Math.sqrt(m))/(2*d),l=this.radius_g+g*l,a*=g,h*=g,c.x=Math.atan2(a,l),c.y=Math.atan(h*Math.cos(c.x)/l),c.y=Math.atan(this.radius_p_inv2*Math.tan(c.y))}else if("sphere"===this.shape){if(this.flip_axis?(h=Math.tan(c.y/this.radius_g_1),a=Math.tan(c.x/this.radius_g_1)*Math.sqrt(1+h*h)):(a=Math.tan(c.x/this.radius_g_1),h=Math.tan(c.y/this.radius_g_1)*Math.sqrt(1+a*a)),(m=(f=2*this.radius_g*l)*f-4*(d=a*a+h*h+l*l)*this.C)<0)return c.x=Number.NaN,c.y=Number.NaN,c;g=(-f-Math.sqrt(m))/(2*d),l=this.radius_g+g*l,a*=g,h*=g,c.x=Math.atan2(a,l),c.y=Math.atan(h*Math.cos(c.x)/l)}return c.x=c.x+this.long0,c},names:["Geostationary Satellite View","Geostationary_Satellite","geos"]};tl.defaultDatum="WGS84",tl.Proj=fb,tl.WGS84=new tl.Proj("WGS84"),tl.Point=BDe,tl.toPoint=AX,tl.defs=cE,tl.nadgrid=function dDe(c,l){var a=new DataView(l),h=function mDe(c){var l=c.getInt32(8,!1);return 11!==l&&(11!==(l=c.getInt32(8,!0))&&console.warn("Failed to detect nadgrid endian-ness, defaulting to little-endian"),!0)}(a),d=function gDe(c,l){return{nFields:c.getInt32(8,l),nSubgridFields:c.getInt32(24,l),nSubgrids:c.getInt32(40,l),shiftType:tN(c,56,64).trim(),fromSemiMajorAxis:c.getFloat64(120,l),fromSemiMinorAxis:c.getFloat64(136,l),toSemiMajorAxis:c.getFloat64(152,l),toSemiMinorAxis:c.getFloat64(168,l)}}(a,h);d.nSubgrids>1&&console.log("Only single NTv2 subgrids are currently supported, subsequent sub grids are ignored");var f=function yDe(c,l,a){for(var d=[],f=0;f<l.nSubgrids;f++){var m=_De(c,176,a),g=SDe(c,176,m,a),y=Math.round(1+(m.upperLongitude-m.lowerLongitude)/m.longitudeInterval),v=Math.round(1+(m.upperLatitude-m.lowerLatitude)/m.latitudeInterval);d.push({ll:[iv(m.lowerLongitude),iv(m.lowerLatitude)],del:[iv(m.longitudeInterval),iv(m.latitudeInterval)],lim:[y,v],count:m.gridNodeCount,cvs:vDe(g)})}return d}(a,d,h),m={header:d,subgrids:f};return wX[c]=m,m},tl.transform=fE,tl.mgrs=ADe,tl.version="__VERSION__",function oPe(c){c.Proj.projections.add(mE),c.Proj.projections.add(gE),c.Proj.projections.add(dAe),c.Proj.projections.add(TAe),c.Proj.projections.add(DAe),c.Proj.projections.add(LAe),c.Proj.projections.add(BAe),c.Proj.projections.add(jAe),c.Proj.projections.add(YAe),c.Proj.projections.add(eIe),c.Proj.projections.add(yIe),c.Proj.projections.add(wIe),c.Proj.projections.add(DIe),c.Proj.projections.add(OIe),c.Proj.projections.add(BIe),c.Proj.projections.add(jIe),c.Proj.projections.add(YIe),c.Proj.projections.add(eRe),c.Proj.projections.add(oRe),c.Proj.projections.add(hRe),c.Proj.projections.add(gRe),c.Proj.projections.add(bRe),c.Proj.projections.add(ERe),c.Proj.projections.add(RRe),c.Proj.projections.add(FRe),c.Proj.projections.add(jRe),c.Proj.projections.add(YRe),c.Proj.projections.add(ePe),c.Proj.projections.add(sPe)}(tl);const SE=tl;function cN(c){let l=[];for(const a of c)if(a instanceof Ui){const d=cN(a.getLayers().getArray());l=Array.prototype.concat(l,d)}else l.push(a);return l}const ca=c=>{let l=[];for(const a of c){let h;h=Array.isArray(a[0])?ca(a):a,l=Array.prototype.concat(l,h)}return l},JX=(c,l)=>Math.log(c)/Math.log(l),bE=(c,l)=>JX(c,l)%1==0,eq=(c,l,a)=>{const h=c.createShader(l);if(!h)throw new Error("No shader was created");if(c.shaderSource(h,a),c.compileShader(h),!c.getShaderParameter(h,c.COMPILE_STATUS))throw c.deleteShader(h),new Error(`An error occurred compiling the shader: ${c.getShaderInfoLog(h)}.    \n\n Shader code: ${a}`);return h},tq=(c,l)=>{c.useProgram(l)},mPe=(c,l,a)=>{c.bindBuffer(c.ARRAY_BUFFER,a.buffer),c.enableVertexAttribArray(l),c.vertexAttribPointer(l,a.vectorSize,a.type,a.normalize,a.stride,a.offset)},TPe=(c,l,a,h)=>{if(a>c.getParameter(c.MAX_COMBINED_TEXTURE_IMAGE_UNITS))throw new Error(`There are only ${c.getParameter(c.MAX_COMBINED_TEXTURE_IMAGE_UNITS)} texture bind points, but you tried to bind to point nr. ${a}.`);7===a&&console.error(`You are about to bind to the dedicated texture-construction bind point (nr. ${a}).\n        If after this call another texture is built, your shader will now use that new texture instead of this one!\n        Consider using another bind point.`),c.activeTexture(c.TEXTURE0+a),c.bindTexture(c.TEXTURE_2D,l),c.uniform1i(h,a)},uN=(c,l,a)=>{const h=c.getUniformLocation(l,a);if(null===h)throw new Error(`Couldn't find uniform ${a} in program.`);return h},DPe=(c,l,a,h)=>{switch(a){case"bool":case"int":c.uniform1i(l,h[0]);break;case"bvec2":case"ivec2":c.uniform2i(l,h[0],h[1]);break;case"bvec3":case"ivec3":c.uniform3i(l,h[0],h[1],h[2]);break;case"bvec4":case"ivec4":c.uniform4i(l,h[0],h[1],h[2],h[3]);break;case"bool[]":case"int[]":c.uniform1iv(l,h);break;case"bvec2[]":case"ivec2[]":c.uniform2iv(l,h);break;case"bvec3[]":case"ivec3[]":c.uniform3iv(l,h);break;case"bvec4[]":case"ivec4[]":c.uniform4iv(l,h);break;case"float":c.uniform1f(l,h[0]);break;case"vec2":c.uniform2f(l,h[0],h[1]);break;case"vec3":c.uniform3f(l,h[0],h[1],h[2]);break;case"vec4":c.uniform4f(l,h[0],h[1],h[2],h[3]);break;case"float[]":c.uniform1fv(l,h);break;case"vec2[]":c.uniform2fv(l,h);break;case"vec3[]":c.uniform3fv(l,h);break;case"vec4[]":c.uniform4fv(l,h);break;case"mat2":c.uniformMatrix2fv(l,!1,h);break;case"mat3":c.uniformMatrix3fv(l,!1,h);break;case"mat4":c.uniformMatrix4fv(l,!1,h);break;default:throw Error(`Type ${a} not implemented.`)}};class TE{constructor(l,a,h){this.vertexShaderSource=a,this.fragmentShaderSource=h,this.program=((c,l,a)=>{const h=c.createProgram();if(!h)throw new Error("No program was created");const d=eq(c,c.VERTEX_SHADER,l),f=eq(c,c.FRAGMENT_SHADER,a);if(c.attachShader(h,d),c.attachShader(h,f),c.linkProgram(h),c.detachShader(h,d),c.detachShader(h,f),c.deleteShader(d),c.deleteShader(f),!c.getProgramParameter(h,c.LINK_STATUS))throw c.deleteProgram(h),new Error("Unable to initialize the shader program: "+c.getProgramInfoLog(h));return h})(l,a,h),this.id=function(c){let l=0;for(const a of c)l+=a.charCodeAt(0);return`${l}`}(a+h)}}class Lo{constructor(l,a,h,d,f){this.location=uN(l,a.program,h),this.type=d,this.value=f,this.variableName=h}}class hN{constructor(l,a,h,d,f){this.location=uN(l,a.program,h),this.texture=d instanceof HTMLImageElement||d instanceof HTMLCanvasElement?((c,l)=>{const a=c.createTexture();if(!a)throw new Error("No texture was created");c.activeTexture(c.TEXTURE0+7),c.bindTexture(c.TEXTURE_2D,a);const d=c.RGBA,f=c.RGBA,m=c.UNSIGNED_BYTE;let g,y;return c.texImage2D(c.TEXTURE_2D,0,d,f,m,l),c.generateMipmap(c.TEXTURE_2D),c.bindTexture(c.TEXTURE_2D,null),l instanceof HTMLImageElement?(g=l.naturalWidth,y=l.naturalHeight):(g=l.width,y=l.height),{texture:a,level:0,internalformat:d,format:f,type:m,width:g,height:y,border:0}})(l,d):d,this.bindPoint=f,this.variableName=h}}class RPe{constructor(l,a,h,d,f){this.location=uN(l,a.program,h),this.texture=((c,l)=>{const a=l.length,h=l[0].length,d=l[0][0].length;if(!bE(h,2)||!bE(a,2))throw new Error(`Texture-data-dimensions must be a power of two, but are ${h} x ${a}`);if(4!==d)throw new Error(`Expecting 4 channels, but ${d} provided`);const f=c.createTexture();if(!f)throw new Error("No texture was created");c.activeTexture(c.TEXTURE0+7),c.bindTexture(c.TEXTURE_2D,f);const y=c.RGBA,v=c.RGBA,_=c.UNSIGNED_BYTE,S=new Uint8Array(ca(l));return 4!==d&&c.pixelStorei(c.UNPACK_ALIGNMENT,1),c.texImage2D(c.TEXTURE_2D,0,y,h,a,0,v,_,S),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,c.CLAMP_TO_EDGE),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,c.CLAMP_TO_EDGE),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,c.NEAREST),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MAG_FILTER,c.NEAREST),c.bindTexture(c.TEXTURE_2D,null),{texture:f,level:0,internalformat:y,format:v,type:_,width:h,height:a,border:0}})(l,d),this.bindPoint=f,this.variableName=h}}class xf{constructor(l,a,h,d,f="triangles"){let m;switch(f){case"triangles":m=l.TRIANGLES;break;case"lines":m=l.LINES;break;case"points":m=l.POINTS;break;default:throw new Error(`Invalid drawing mode ${f}`)}this.location=((c,l,a)=>{const h=c.getAttribLocation(l,a);if(-1===h)throw new Error(`Couldn't find attribute ${a} in program.`);return h})(l,a.program,h),this.value=((c,l,a=c.TRIANGLES)=>{const h=new Float32Array(ca(l)),d=c.createBuffer();if(!d)throw new Error("No buffer was created");return c.bindBuffer(c.ARRAY_BUFFER,d),c.bufferData(c.ARRAY_BUFFER,h,c.STATIC_DRAW),c.bindBuffer(c.ARRAY_BUFFER,null),{buffer:d,vectorSize:l[0].length,vectorCount:l.length,type:c.FLOAT,normalize:!1,stride:0,offset:0,drawingMode:a}})(l,d,m),this.variableName=h,this.drawingMode=m}}class PPe{constructor(l,a,h="triangles"){let d;switch(h){case"triangles":d=l.TRIANGLES;break;case"lines":d=l.LINES;break;case"points":d=l.POINTS;break;default:throw new Error(`Invalid drawing mode ${h}`)}this.index=((c,l,a=c.TRIANGLES)=>{const h=new Uint16Array(ca(l)),d=c.createBuffer();if(!d)throw new Error("No buffer was created");return c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,d),c.bufferData(c.ELEMENT_ARRAY_BUFFER,h,c.STATIC_DRAW),c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,null),{buffer:d,count:h.length,type:c.UNSIGNED_SHORT,offset:0,drawingMode:a}})(l,a,d)}}function dN(c,l){for(const a of c)if(l(a))return a;return null}class wE{constructor(l,a,h,d,f){this.program=l,this.attributes=a,this.uniforms=h,this.textures=d,this.index=f;const[m,g,y,v]=function LPe(c){const l=/^\s*attribute (int|float|vec2|vec3|vec4|mat2|mat3|mat4) (\w*);/gm,a=/^\s*uniform (int|float|vec2|vec3|vec4|mat2|mat3|mat4) (\w*)(\[\d\])*;/gm,h=/^\s*uniform sampler2D (\w*);/gm,d=/^\s*precision (\w*) float;/gm,f=c.fragmentShaderSource+"\n\n\n"+c.vertexShaderSource,m=[];let g;for(;null!==(g=l.exec(f));)m.push(g[2]);const y=[];let v;for(;null!==(v=a.exec(f));)y.push(v[2]);const _=[];let S;for(;null!==(S=h.exec(f));)_.push(S[1]);const b=[];let T;for(;null!==(T=d.exec(f));)b.push(T[1]);return[m,y,_,b]}(l);for(const S of m){const b=a.filter(T=>T.variableName===S);if(1!==b.length)throw new Error(`Provided ${b.length} values for shader's attribute ${S}.`)}for(const S of g){const b=h.filter(T=>T.variableName===S);if(1!==b.length)throw new Error(`Provided ${b.length} values for shader's uniform ${S}.`)}for(const S of y){const b=d.filter(T=>T.variableName===S);if(1!==b.length)throw new Error(`Provided ${b.length} values for shader's texture ${S}.`)}1===v.length&&console.warn("You have only provided one precision qualifier.\n            This can cause issues when you want to use a uniform in both the vertex- and the fragment-shader.");const _=this.attributes.map(S=>S.value.vectorCount);if(Math.min(..._)!==Math.max(..._))throw new Error("Your attributes are not of the same length!")}bind(l){tq(l,this.program.program);for(const a of this.attributes)mPe(l,a.location,a.value);for(const a of this.uniforms)DPe(l,a.location,a.type,a.value);for(const a of this.textures)TPe(l,a.texture.texture,a.bindPoint,a.location);this.index&&((c,l)=>{c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,this.index.index.buffer)})(l)}render(l,a,h,d){h?((c,l,a)=>{c.bindFramebuffer(c.FRAMEBUFFER,l.framebuffer),a?(l.width/l.height!=a[2]/a[3]&&console.warn("Your viewport-aspect is different from the framebuffer-aspect."),c.viewport(...a)):c.viewport(0,0,l.width,l.height)})(l,h,d):((c,l)=>{c.bindFramebuffer(c.FRAMEBUFFER,null),l?(c.canvas.width/c.canvas.height!=l[2]/l[3]&&console.warn("Your viewport-aspect is different from the canvas-aspect."),c.viewport(...l)):c.viewport(0,0,c.canvas.width,c.canvas.height)})(l,d),a&&((c,l)=>{c.clearColor(l[0],l[1],l[2],l[3]),c.clearDepth(1),c.clear(c.COLOR_BUFFER_BIT|c.DEPTH_BUFFER_BIT)})(l,a),this.index?((c,l)=>{c.drawElements(l.drawingMode,l.count,l.type,l.offset)})(l,this.index.index):((c,l)=>{c.drawArrays(l.drawingMode,l.offset,l.vectorCount)})(l,this.attributes[0].value)}updateAttributeData(l,a,h){const d=dN(this.attributes,f=>f.variableName===a);if(!d)throw new Error(`No such attribute ${a} to be updated.`);((c,l,a)=>{const h=new Float32Array(ca(a));c.bindBuffer(c.ARRAY_BUFFER,l.buffer),c.bufferData(c.ARRAY_BUFFER,h,c.STATIC_DRAW),c.bindBuffer(c.ARRAY_BUFFER,null)})(l,d.value,h)}updateUniformData(l,a,h){const d=dN(this.uniforms,f=>f.variableName===a);if(!d)throw new Error(`No such uniform ${a} to be updated.`);d.value=h}updateTextureData(l,a,h){const d=dN(this.textures,m=>m.variableName===a);if(!d)throw new Error(`No such texture ${a} to be updated.`);const f=((c,l,a)=>{if(c.activeTexture(c.TEXTURE0+7),c.bindTexture(c.TEXTURE_2D,l.texture),a instanceof HTMLImageElement||a instanceof HTMLCanvasElement)c.texImage2D(c.TEXTURE_2D,0,c.RGBA,c.RGBA,c.UNSIGNED_BYTE,a);else{const h=a[0].length,d=a.length;if(!bE(h,2)||!bE(d,2))throw new Error(`Texture-data-dimensions must be a power of two, but are ${d} x ${h}`);const f=new Uint8Array(ca(a));c.texImage2D(c.TEXTURE_2D,l.level,l.internalformat,l.width,l.height,l.border,l.format,l.type,f)}return c.generateMipmap(c.TEXTURE_2D),c.bindTexture(c.TEXTURE_2D,null),a instanceof HTMLImageElement?(l.width=a.naturalWidth,l.height=a.naturalHeight):a instanceof HTMLCanvasElement?(l.width=a.width,l.height=a.height):(l.width=a[0].length,l.height=a.length),l})(l,d.texture,h);d.texture=f}}class rq{constructor(l,a,h){const d=(c=>{const l=c.createFramebuffer();if(!l)throw new Error("Error creating framebuffer");return l})(l),f=((c,l,a)=>{if(l<=0||a<=0)throw new Error("Width and height must be positive.");const h=c.createTexture();if(!h)throw new Error("No texture was created");return c.activeTexture(c.TEXTURE0+7),c.bindTexture(c.TEXTURE_2D,h),c.texImage2D(c.TEXTURE_2D,0,c.RGBA,l,a,0,c.RGBA,c.UNSIGNED_BYTE,null),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,c.CLAMP_TO_EDGE),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,c.CLAMP_TO_EDGE),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,c.NEAREST),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MAG_FILTER,c.NEAREST),c.bindTexture(c.TEXTURE_2D,null),{texture:h,level:0,internalformat:c.RGBA,format:c.RGBA,type:c.UNSIGNED_BYTE,width:l,height:a,border:0}})(l,a,h),m=((c,l,a)=>{if(c.bindFramebuffer(c.FRAMEBUFFER,a),c.framebufferTexture2D(c.FRAMEBUFFER,c.COLOR_ATTACHMENT0,c.TEXTURE_2D,l.texture,0),c.checkFramebufferStatus(c.FRAMEBUFFER)!==c.FRAMEBUFFER_COMPLETE)throw new Error(`Error creating framebuffer: framebuffer-status: ${c.checkFramebufferStatus(c.FRAMEBUFFER)} ; error-code: ${c.getError()}`);return c.bindFramebuffer(c.FRAMEBUFFER,null),{framebuffer:a,texture:l,width:l.width,height:l.height}})(l,f,d);this.fbo=m}}const wb=(c,l)=>({vertices:[[-c/2,l/2,0],[-c/2,-l/2,0],[c/2,-l/2,0],[-c/2,l/2,0],[c/2,-l/2,0],[c/2,l/2,0]],texturePositions:[[0,1],[0,0],[1,0],[0,1],[1,0],[1,1]]});class kPe extends Xd{constructor(l){super(l)}createRenderer(){return this.renderer=new VPe(this),this.renderer}updateSunAngle(l){this.renderer.updateSunAngle(l)}}class VPe extends AS{constructor(l){super(l),this.state="loading";const a=document.createElement("canvas");a.width=1200,a.height=800,a.style.position="absolute";const h=a.getContext("webgl"),d=l.getSource(),f=d.getProjection(),m=d.getImageExtent(),g=this.bboxOntoRectangle(2,2,m),y=((c,l=256,a=256,h="red")=>{const d=document.createElement("canvas").getContext("2d");if(!d)throw new Error("no context");return d.canvas.width=l,d.canvas.height=a,d.font=`bold ${5*a/6|0}px sans-serif`,d.textAlign="center",d.textBaseline="middle",d.fillStyle=h,d.fillText(c,l/2,a/2),d.canvas})("test",2048,2048,"red"),v=new TE(h,"\n            attribute vec3 a_position;\n            attribute vec2 a_texturePosition;\n            uniform mat3 u_world2pix;\n            uniform mat3 u_pix2canv;\n            varying vec2 v_texturePosition;\n            void main() {\n                vec3 pixelPosition = u_world2pix * vec3(a_position.x, a_position.y, 1.);\n                vec3 canvasPosition = u_pix2canv * pixelPosition;\n                gl_Position = vec4(canvasPosition.x, canvasPosition.y, 0., 1.);\n                v_texturePosition = a_texturePosition;\n            }\n        ","\n            precision mediump float;\n            uniform sampler2D u_srtm;\n            uniform float u_imageSize;\n            uniform vec3 u_sun;\n            varying vec2 v_texturePosition;\n            void main() {\n                float delta = 4. / u_imageSize;\n                float top = texture2D(u_srtm, vec2(v_texturePosition.x,         1. - v_texturePosition.y + delta)).r;\n                float bot = texture2D(u_srtm, vec2(v_texturePosition.x,         1. - v_texturePosition.y - delta)).r;\n                float lft = texture2D(u_srtm, vec2(v_texturePosition.x + delta, 1. - v_texturePosition.y        )).r;\n                float rgt = texture2D(u_srtm, vec2(v_texturePosition.x - delta, 1. - v_texturePosition.y        )).r;\n\n                vec3 surfaceNormal = vec3(\n                    lft - rgt,\n                    bot - top,\n                    2. * delta\n                );\n                surfaceNormal = normalize(surfaceNormal);\n                vec3 sunNormal = normalize(u_sun);\n                float alignment = abs(dot(sunNormal, surfaceNormal));\n\n                gl_FragColor = vec4(0., 0., 0., 0.5 * alignment);\n            }\n        ");tq(h,v.program);const _=new wE(v,[new xf(h,v,"a_position",g.vertices),new xf(h,v,"a_texturePosition",g.texturePositions)],[new Lo(h,v,"u_imageSize","float",[2048]),new Lo(h,v,"u_sun","vec3",[0,0,1]),new Lo(h,v,"u_world2pix","mat3",ca([[1,0,0],[0,1,0],[0,0,1]])),new Lo(h,v,"u_pix2canv","mat3",ca([[1/(a.width/2),0,0],[0,-1/(a.height/2),0],[-1,1,1]]))],[new hN(h,v,"u_srtm",y,0)]);_.bind(h),this.shader=_,this.canvas=a,this.gl=h,this.projection=f;const S=d.getImage(m,.02197265625,2.440000295639038,f);S.addEventListener("change",b=>{const T=S.getImage();this.shader.updateTextureData(this.gl,"u_srtm",T),this.shader.bind(this.gl),this.state="ready",super.getLayer().changed()}),S.load()}prepareFrame(l){if("ready"===this.state){const a=l.coordinateToPixelTransform;this.shader.updateUniformData(this.gl,"u_world2pix",ca([[a[0],a[1],0],[a[2],a[3],0],[a[4],a[5],1]])),this.shader.bind(this.gl),l.viewState.projection!==this.projection&&this.reprojectImage(l.viewState.projection)}return!0}renderFrame(l,a){return"ready"===this.state&&(this.shader.render(this.gl),this.transformCanvas(l)),this.canvas}renderDeclutter(l){}updateSunAngle(l){this.shader.updateUniformData(this.gl,"u_sun",[l[0],l[1],1]),this.shader.bind(this.gl),this.shader.render(this.gl)}bboxOntoRectangle(l,a,h){const d=wb(l,a);for(const f of d.vertices){const g=f[1];f[0]=f[0]===l/2?h[2]:h[0],f[1]=g===a/2?h[3]:h[1]}return d}reprojectImage(l){const a=super.getLayer().getSource(),h=a.getProjection(),f=bh(a.getImageExtent(),h,l),m=this.bboxOntoRectangle(2,2,f);this.shader.updateAttributeData(this.gl,"a_position",m.vertices),this.shader.bind(this.gl)}transformCanvas(l){const a=l.layerStatesArray[l.layerIndex],h=l.pixelRatio,d=l.size,f=Math.round(d[0]*h),m=Math.round(d[1]*h),g=a.opacity;this.canvas.width=f,this.canvas.height=m,this.canvas.style.opacity=`${g}`,this.shader.updateUniformData(this.gl,"u_pix2canv",ca([[1/(this.canvas.width/2),0,0],[0,-1/(this.canvas.height/2),0],[-1,1,1]]))}}class BPe extends bu{constructor(l){super(l),this.options=l}createRenderer(){return new UPe(this,this.options.renderSettings)}updateParas(l,a,h){const d={colorRamp:this.options.renderSettings.colorRamp,maxEdgeLength:this.options.renderSettings.maxEdgeLength,storeInterpolatedPixelData:this.options.renderSettings.storeInterpolatedPixelData,valueProperty:this.options.renderSettings.valueProperty,power:l,showLabels:h,smooth:a};super.getRenderer().updateSettings(d),this.options.renderSettings=d}}class UPe extends AS{constructor(l,a){super(l),this.settings=a,this.container=document.createElement("div"),this.container.classList.add("ol-layer"),this.container.style.setProperty("position","absolute"),this.container.style.setProperty("width","100%"),this.container.style.setProperty("height","100%"),this.webGlCanvas=document.createElement("canvas"),this.webGlCanvas.style.setProperty("position","absolute"),this.webGlCanvas.style.setProperty("left","0px"),this.webGlCanvas.style.setProperty("top","0px"),this.webGlCanvas.style.setProperty("width","100%"),this.webGlCanvas.style.setProperty("height","100%"),this.webGlCanvas.width=1e3,this.webGlCanvas.height=1e3,this.gl=this.webGlCanvas.getContext("webgl"),this.container.appendChild(this.webGlCanvas),this.pointRenderer=new G2(l);const h=l.getSource();this.projection=h.getProjection();const{coords:d,values:f,bboxDelta:m,maxVal:g}=this.parseData(h,this.settings.valueProperty,this.settings.maxEdgeLength),{observationsBbox:y,maxEdgeLengthBbox:v}=this.parseDataBbox(m,d,f,g,this.settings.maxEdgeLength);this.bbox=m;const _=[[1,0,0],[0,1,0],[0,0,1]];this.interpolationShader=zPe(this.gl,y,g,this.settings.power,v),this.valueFb=new rq(this.gl,this.webGlCanvas.width,this.webGlCanvas.height),this.colorizationShader=HPe(this.gl,this.settings.colorRamp,g,this.settings.smooth,this.valueFb),this.colorFb=new rq(this.gl,this.webGlCanvas.width,this.webGlCanvas.height),this.arrangementShader=jPe(this.gl,_,_,m,this.colorFb),this.runInterpolationShader(this.valueFb.fbo),this.runColorizationShader(this.colorFb.fbo)}prepareFrame(l){if(this.webGlCanvas.style.opacity=`${l.layerStatesArray[l.layerIndex].opacity}`,l.viewState.projection!==this.projection){this.projection=l.viewState.projection;const d=super.getLayer().getSource(),{coords:f,values:m,bboxDelta:g,maxVal:y}=this.parseData(d,this.settings.valueProperty,this.settings.maxEdgeLength),{observationsBbox:v,maxEdgeLengthBbox:_}=this.parseDataBbox(g,f,m,y,this.settings.maxEdgeLength);this.updateInterpolationShader(this.settings.power,v,_),this.runInterpolationShader(this.valueFb.fbo),this.runColorizationShader(this.colorFb.fbo),this.bbox=g}return this.updateArrangementShader(l.coordinateToPixelTransform,l.size[0],l.size[1],this.bbox),this.pointRenderer.prepareFrame(l),!0}renderFrame(l,a){if(this.runArrangementShader(),this.settings.showLabels){const h=this.pointRenderer.renderFrame(l,this.container);XL(this.container,[this.webGlCanvas,h])}else XL(this.container,[this.webGlCanvas]);return this.container}renderDeclutter(l){}updateSettings(l){const a=this.settings;this.settings=l,l.power!==a.power?(this.updateInterpolationShader(l.power),this.runInterpolationShader(this.valueFb.fbo),this.updateColorizationShader(l.smooth),this.runColorizationShader(this.colorFb.fbo)):l.smooth!==a.smooth&&(this.updateColorizationShader(l.smooth),this.runColorizationShader(this.colorFb.fbo)),super.getLayer().changed()}updateArrangementShader(l,a,h,d){const m=[[1/(a/2),0,0],[0,-1/(h/2),0],[-1,1,1]];this.arrangementShader.updateUniformData(this.gl,"u_world2pix",ca([[l[0],l[1],0],[l[2],l[3],0],[l[4],l[5],1]])),this.arrangementShader.updateUniformData(this.gl,"u_pix2clip",ca(m)),this.arrangementShader.updateUniformData(this.gl,"u_bbox",d)}runArrangementShader(l){this.arrangementShader.bind(this.gl),this.arrangementShader.render(this.gl,[0,0,0,0],l)}updateInterpolationShader(l,a,h){this.interpolationShader.updateUniformData(this.gl,"u_power",[l]),a&&this.interpolationShader.updateTextureData(this.gl,"u_dataTexture",[a]),h&&this.interpolationShader.updateUniformData(this.gl,"u_maxDistance",[h])}runInterpolationShader(l){this.interpolationShader.bind(this.gl),this.interpolationShader.render(this.gl,[0,0,0,0],l),this.settings.storeInterpolatedPixelData&&(this.interpolatedValues=(c=>{const l=c.getContext("webgl");if(!l)throw new Error("no context");const a=l.getParameter(l.IMPLEMENTATION_COLOR_READ_FORMAT),h=l.getParameter(l.IMPLEMENTATION_COLOR_READ_TYPE);let d;if(h===l.UNSIGNED_BYTE)d=new Uint8Array(l.drawingBufferWidth*l.drawingBufferHeight*4);else if(h===l.UNSIGNED_SHORT_5_6_5||h===l.UNSIGNED_SHORT_4_4_4_4||h===l.UNSIGNED_SHORT_5_5_5_1)d=new Uint16Array(l.drawingBufferWidth*l.drawingBufferHeight*4);else{if(h!==l.FLOAT)throw new Error(`Did not understand pixel data type ${h} for format ${a}`);d=new Float32Array(l.drawingBufferWidth*l.drawingBufferHeight*4)}return l.readPixels(0,0,c.width,c.height,a,h,d),d})(this.webGlCanvas))}updateColorizationShader(l){this.colorizationShader.updateUniformData(this.gl,"u_smooth",[l?1:0])}runColorizationShader(l){this.colorizationShader.bind(this.gl),this.colorizationShader.render(this.gl,[0,0,0,0],l)}parseData(l,a,h){let d=l.getFeatures();d=l instanceof yf?l.getSource().getFeatures():l.getFeatures();const f=d.map(x=>x.getGeometry().getCoordinates()),m=d.map(x=>parseFloat(x.getProperties()[a])),g=WPe(f),y=g[2]-g[0],v=g[3]-g[1];let _,S;y>v?(S=y-v,_=0):(S=0,_=v-y);const b=[g[0]-h,g[1]-h,g[2]+_+h,g[3]+S+h],T=m.reduce((x,E)=>E>x?E:x,0);return{coords:f,values:m,bboxDelta:b,maxVal:T}}parseDataBbox(l,a,h,d,f){const m=XPe(a,h).map(b=>{const T=GPe([b[0],b[1]],l);return[255*(T[0]+1)/2,255*(T[1]+1)/2,255*b[2]/d,255]}),g=m.length,y=((c,l)=>{const a=Math.ceil(JX(c,2));return Math.pow(2,a)})(g);for(let b=0;b<y-g;b++)m.push([0,0,0,0]);return{observationsBbox:m,maxEdgeLengthBbox:f/Math.max(l[2]-l[0],l[3]-l[1])}}}const GPe=(c,l)=>[(c[0]-l[0])/(l[2]-l[0])*2-1,(c[1]-l[1])/(l[3]-l[1])*2-1],zPe=(c,l,a,h,d)=>{const m=new TE(c,"\n            precision mediump float;\n            attribute vec3 a_position;\n            attribute vec2 a_texturePosition;\n            varying vec2 v_position;\n            varying vec2 v_texturePosition;\n\n            void main() {\n                v_position = a_position.xy;\n                v_texturePosition = a_texturePosition;\n                gl_Position = vec4(a_position.xy, 0.0, 1.0);\n            }\n        ","\n            precision mediump float;\n            uniform float u_power;\n            uniform sampler2D u_dataTexture;\n            uniform int u_nrDataPoints;\n            uniform float u_maxValue;\n            uniform float u_maxDistance;\n            varying vec2 v_position;\n            varying vec2 v_texturePosition;\n\n            void main() {\n\n                float valSum = 0.0;\n                float wSum = 0.0;\n                float minD = 10000.0;\n                for (int i = 0; i < 10000; i++) {\n                    if (i > u_nrDataPoints) {\n                        break;\n                    }\n                    vec4 dataPoint = texture2D(u_dataTexture, vec2(float(i) / float(u_nrDataPoints), 0.5));\n                    if (dataPoint.w > 0.0) {  // texture is padded to next power of two with transparent 0-values.\n                        vec2 coords = dataPoint.xy * 2.0 - 1.0;  // transforming coords from [0, 1] to [-1, 1]\n                        float value = dataPoint.z * u_maxValue;  // transforming value from [0, 1] to [0, maxValue]\n\n                        float d = distance(v_position, coords);\n                        float w = 1.0 / pow(d, u_power);\n                        valSum += value * w;\n                        wSum += w;\n                        if (d < minD) {\n                            minD = d;\n                        }\n                    }\n                }\n                float interpolatedValue = valSum / wSum;\n                float alpha = 1.0;\n                if (minD > u_maxDistance) {\n                    alpha = 0.0;\n                }\n                vec4 color = vec4(interpolatedValue / u_maxValue, 0.0, 0.0, alpha);\n\n                gl_FragColor = color;\n            }\n        "),g={vertices:[[-1,1,0],[-1,-1,0],[1,-1,0],[1,1,0]],texturePositions:[[0,1],[0,0],[1,0],[1,1]],vertexIndices:[[0,1,2],[0,2,3]]};return new wE(m,[new xf(c,m,"a_position",g.vertices),new xf(c,m,"a_texturePosition",g.texturePositions)],[new Lo(c,m,"u_power","float",[h]),new Lo(c,m,"u_nrDataPoints","int",[l.length]),new Lo(c,m,"u_maxValue","float",[a]),new Lo(c,m,"u_maxDistance","float",[d])],[new RPe(c,m,"u_dataTexture",[l],0)],new PPe(c,g.vertexIndices))},HPe=(c,l,a,h,d)=>{const m=new TE(c,"\n            precision mediump float;\n            attribute vec2 a_position;\n            attribute vec2 a_textureCoord;\n            varying vec2 v_textureCoord;\n\n            void main() {\n                v_textureCoord = a_textureCoord;\n                gl_Position = vec4(a_position.xy, 0.0, 1.0);\n            }\n        ","\n            precision mediump float;\n            uniform float u_colorRampValues[15];\n            uniform vec3 u_colorRampColors[15];\n            uniform int u_nrColorRampValues;\n            uniform float u_maxValue;\n            uniform bool u_smooth;\n            uniform sampler2D u_valueTexture;\n            varying vec2 v_textureCoord;\n\n            vec3 valueToSmoothColor(in float value) {\n                if (value < u_colorRampValues[0]) {\n                    return u_colorRampColors[0];\n                }\n                for (int i = 1; i < 15; i++) {\n                    if (i > u_nrColorRampValues) {\n                        break;\n                    }\n                    if (value < u_colorRampValues[i]) {\n                        float alpha = (value - u_colorRampValues[i-1]) / (u_colorRampValues[i] - u_colorRampValues[i-1]);\n                        vec3 color = alpha * (u_colorRampColors[i] - u_colorRampColors[i-1]) + u_colorRampColors[i-1];\n                        return color;\n                    }\n                    if (i == u_nrColorRampValues) {\n                        return u_colorRampColors[i];\n                    }\n                }\n            }\n\n            vec3 valueToStepColor(in float value) {\n                for (int i = 0; i < 15; i++) {\n                    if (i > u_nrColorRampValues) {\n                        break;\n                    }\n                    if (value < u_colorRampValues[i]) {\n                        return u_colorRampColors[i];\n                    }\n                    if (i == u_nrColorRampValues) {\n                        return u_colorRampColors[i];\n                    }\n                }\n            }\n\n            void main() {\n                vec4 pixelData = texture2D(u_valueTexture, v_textureCoord);\n                float val = pixelData.r * u_maxValue;\n                float alpha = pixelData.w;\n                vec3 rgb = vec3(0.0, 0.0, 0.0);\n                if (alpha > 0.01) {\n                    if (u_smooth) {\n                        rgb = valueToSmoothColor(val);\n                    } else {\n                        rgb = valueToStepColor(val);\n                    }\n                }\n                gl_FragColor = vec4(rgb.x / 255.0, rgb.y / 255.0, rgb.z / 255.0, alpha);\n            }\n        ");return new wE(m,[new xf(c,m,"a_position",wb(2,2).vertices),new xf(c,m,"a_textureCoord",wb(2,2).texturePositions)],[new Lo(c,m,"u_colorRampValues","float[]",l.map(y=>y.val)),new Lo(c,m,"u_colorRampColors","vec3[]",ca(l.map(y=>y.rgb))),new Lo(c,m,"u_nrColorRampValues","int",[l.length]),new Lo(c,m,"u_maxValue","float",[a]),new Lo(c,m,"u_smooth","bool",[h?1:0])],[new hN(c,m,"u_valueTexture",d.fbo.texture,0)])},jPe=(c,l,a,h,d)=>{const f=new TE(c,"\n            precision mediump float;\n            attribute vec3 a_pos;\n            attribute vec2 a_posTexture;\n            uniform mat3 u_world2pix;\n            uniform mat3 u_pix2clip;\n            uniform vec4 u_bbox;\n            varying vec2 v_posTexture;\n\n            vec2 clipBbx2worldCoords(vec2 clipCoords, vec4 bbox) {\n                float xPerct = ( clipCoords.x + 1.0 ) / 2.0;\n                float yPerct = ( clipCoords.y + 1.0 ) / 2.0;\n                float xWorld = xPerct * (bbox.z - bbox.x) + bbox.x;\n                float yWorld = yPerct * (bbox.w - bbox.y) + bbox.y;\n                return vec2(xWorld, yWorld);\n            }\n\n            void main() {\n                v_posTexture = a_posTexture;\n                vec2 worldPos = clipBbx2worldCoords(a_pos.xy, u_bbox);\n                vec3 clipPos = u_pix2clip * u_world2pix * vec3(worldPos.xy, 1.0);\n                gl_Position = vec4(clipPos.xy, 0.0, 1.0);\n            }\n        ","\n            precision mediump float;\n            uniform sampler2D u_texture;\n            varying vec2 v_posTexture;\n\n            void main() {\n                gl_FragColor = texture2D(u_texture, v_posTexture);\n            }\n        ");return new wE(f,[new xf(c,f,"a_pos",wb(2,2).vertices),new xf(c,f,"a_posTexture",wb(2,2).texturePositions)],[new Lo(c,f,"u_world2pix","mat3",ca(l)),new Lo(c,f,"u_pix2clip","mat3",ca(a)),new Lo(c,f,"u_bbox","vec4",h)],[new hN(c,f,"u_texture",d.fbo.texture,0)])},WPe=c=>{const l=c.map(g=>g[0]),a=c.map(g=>g[1]),h=Math.min(...l),d=Math.max(...l);return[h,Math.min(...a),d,Math.max(...a)]},XPe=(c,l)=>{const a=[];for(let h=0;h<c.length;h++)a.push(c[h].concat(l[h]));return a},fN="type",ua="filtertype",um="id",pN="title",Ul="EPSG:4326";let Cs=(()=>{class c{constructor(a,h,d){this.crf=a,this.app=h,this.injector=d,this.hitTolerance=0,this.hitLayerCurr=null,this.hitLayerPrev=null,this.projectionChange=new Ke,this.dynamicPopupComponents=new Map,this.filterLayerNoPopup=f=>{const m=f.get("popup");let g=!0;return m&&this.isPopupObj(m)&&!0===m.filterLayer&&(g=!1),g},this.map=new abe({controls:[]}),this.view=new Tc,this.EPSG="EPSG:3857"}createMap(a){const f=new Ui({layers:[]});f.set(ua,"baselayers"),f.set(pN,"Base maps"),f.set(um,"ID_filtertype_baselayers");const m=new Ui({layers:[]});m.set(ua,"layers"),m.set(pN,"Layers"),m.set(um,"ID_filtertype_layers");const g=new Ui({layers:[]});g.set(ua,"overlays"),g.set(pN,"Overlays"),g.set(um,"ID_filtertype_overlays"),this.viewOptions={center:Ka([0,0],Ul,this.EPSG),zoom:0,projection:cn(this.EPSG)},this.view.constrainRotation&&(this.viewOptions.constrainRotation=this.view.constrainRotation),this.view.enableRotation&&(this.viewOptions.enableRotation=this.view.enableRotation),this.view.extent&&(this.viewOptions.extent=this.view.extent),this.view.constrainOnlyCenter&&(this.viewOptions.constrainOnlyCenter=this.view.constrainOnlyCenter),this.view.smoothExtentConstraint&&(this.viewOptions.smoothExtentConstraint=this.view.smoothExtentConstraint),this.view.getMaxResolution()&&(this.viewOptions.maxResolution=this.view.getMaxResolution()),this.view.getMinResolution()&&(this.viewOptions.minResolution=this.view.getMinResolution()),this.view.getMaxZoom()&&(this.viewOptions.maxZoom=this.view.getMaxZoom()),this.view.getMinZoom()&&(this.viewOptions.minZoom=this.view.getMinZoom()),this.view.multiWorld&&(this.viewOptions.multiWorld=this.view.multiWorld),this.view.constrainResolution&&(this.viewOptions.constrainResolution=this.view.constrainResolution),this.view.smoothResolutionConstraint&&(this.viewOptions.smoothResolutionConstraint=this.view.smoothResolutionConstraint),this.view.getResolution()&&(this.viewOptions.resolution=this.view.getResolution()),this.view.getResolutions()&&(this.viewOptions.resolutions=this.view.getResolutions()),this.view.rotation&&(this.viewOptions.rotation=this.view.rotation),this.view.zoomFactor&&(this.viewOptions.zoomFactor=this.view.zoomFactor);const y=new Tc(this.viewOptions);return[f,m,g].map(v=>this.map.addLayer(v)),this.map.setView(y),this.view=this.map.getView(),this.setProjection(this.EPSG),a&&this.map.setTarget(a),{map:this.map,view:this.view}}setHitTolerance(a){this.hitTolerance=a}getHitTolerance(){return this.hitTolerance}addBboxSelection(a,h,d,f){Object.assign({className:"ol-drag-select",condition:a},f);const g=new S7(f);return h&&g.on("boxstart",y=>{h(y)}),d&&g.on("boxend",y=>{const v=g.getGeometry().getExtent();d(v,y)}),this.map.addInteraction(g),g}getLayers(a){const h=a.toLowerCase();let d;return this.map.getLayers().getArray().forEach(f=>{f.get(ua)===h&&(d=f.getLayers().getArray())}),d}getLayersFromGroup(a,h,d=!1){const f=a.getLayers().getArray();let m=f;if(d){let g=[].concat(f);f.forEach(y=>{y instanceof Ui&&(g=g.concat(this.getLayersFromGroup(y,h,!0)))}),m=g}return h?m.filter(g=>g.get(ua)&&g.get(ua).toLowerCase()===h.toLowerCase()):m}getLayerByKey(a,h){const f=cN(this.getLayersFromGroup(this.map.getLayerGroup(),h)),m=[];if(f.forEach(g=>{g.get(a.key)&&g.get(a.key)===a.value&&-1===m.indexOf(g)&&m.push(g)}),!m.length){const g=this.getLayersFromGroup(this.map.getLayerGroup(),h,!0);g.length&&g.forEach(y=>{y.get(a.key)&&y.get(a.key)===a.value&&-1===m.indexOf(y)&&m.push(y)})}return 1===m.length?m[0]:null}setRecursiveKey(a,h,d=ua){a.set(d,h),a instanceof Ui&&a.getLayers().forEach(f=>{this.setRecursiveKey(f,h,d)})}addLayer(a,h){const d=h.toLowerCase();let f;return this.map.getLayers().getArray().forEach(m=>{m.get(ua)===d&&(this.isLayerInGroup(a,m)||(f=m.getLayers().getArray(),this.setRecursiveKey(a,d,ua),f.push(a),m.setLayers(new co(f))))}),f}isLayerInGroup(a,h){return!!h.getLayers().getArray().filter(m=>m.get("id")===a.get("id")).length}getLayerGroups(a){const h=[];return this.map.getLayers().forEach(d=>{d instanceof Ui&&(a?d.get(ua)&&d.get(ua).toLowerCase()===a.toLowerCase()&&h.push(d):h.push(d))}),h}addLayers(a,h){const d=h.toLocaleLowerCase();let f;return this.getLayerGroups(d).forEach(g=>{g.getLayers().getLength()>0?(f=g.getLayers().getArray(),a.map(v=>{this.isLayerInGroup(v,g)||f.push(v)})):f=a,f.forEach(v=>{v instanceof Ui&&this.setRecursiveKey(v,d,ua)}),g.setLayers(new co(f))}),f}setLayers(a,h){const d=h.toLocaleLowerCase(),f=this.getLayerGroups(d);return a.forEach(m=>{m instanceof Ui&&this.setRecursiveKey(m,h.toLocaleLowerCase(),ua)}),f.forEach(m=>{this.cleanUpEventListeners(m,a),m.setLayers(new co(a))}),a}cleanUpEventListeners(a,h){const d=a.getLayers().getArray().filter(f=>!h.map(m=>m.get("id")).includes(f.get("id")));this.removeListenersFromOldLayers(d),d.forEach(f=>a.getLayers().remove(f))}addEventsToLayer(a,h,d){a.events&&(a.events.layer&&a.events.layer.forEach(f=>{h.getListeners(f.event)||h.on(f.event,f.listener)}),a.events.source&&a.events.source.forEach(f=>{d.getListeners(f.event)||d.on(f.event,f.listener)}))}removeListenersFromOldLayers(a){const h=d=>{if("function"==typeof d.getSource){const f=d.getSource();f&&(f instanceof nb&&f.dispose(),f.hasListener()&&f.disposeInternal())}d.hasListener()&&d.disposeInternal()};a.forEach(d=>{d instanceof Ui?d.getLayers().forEach(f=>{h(f)}):d instanceof HL&&h(d)})}getLayerGroupForLayer(a){const h=this.getLayersFromGroup(this.map.getLayerGroup(),null,!0);h.push(this.map.getLayerGroup());let d=null;return h.forEach(f=>{if(f instanceof Ui){const g=this.getLayersFromGroup(f).find(y=>y===a);g&&(d={group:f,layer:g})}}),d}removeLayerByKey(a,h){const d=h.toLocaleLowerCase(),f=this.getLayerByKey(a,d);if(f){const m=this.getLayerGroupForLayer(f);if(m.group){const g=this.getLayersFromGroup(m.group).filter(y=>y!==f);m.group.setLayers(new co(g))}}}updateLayerByKey(a,h,d){const f=d.toLocaleLowerCase();this.map.getLayers().forEach(m=>{if(m.get(ua)===f){const g=m.getLayers();g.forEach((y,v)=>{if(y.get(a.key)&&y.get(a.key)===a.value){const _=h.getProperties(),S=h.getExtent(),b=h.getMaxZoom(),T=h.getMinZoom(),x=h.getOpacity(),E=h.getVisible(),D=h.getZIndex();if(y instanceof Ao&&h instanceof Ao){const I=h.getSource();y.setSource(I)}_&&y.setProperties(_),S&&y.setExtent(S),b&&y.setMaxZoom(b),T&&y.setMinZoom(T),x&&y.setOpacity(x),E&&y.setVisible(E),D&&y.setZIndex(D),y.changed(),g.setAt(v,y)}}),m.setLayers(g)}})}removeAllLayers(a){const h=a.toLowerCase();let d;this.map.getLayers().getArray().forEach(f=>{f.get(ua)===h&&(d=f.getLayers(),d.clear())})}setUkisLayers(a,h){const d=h.toLowerCase(),f=[];if(a.length<1&&"baselayers"!==d?this.removeAllLayers(d):a.forEach(m=>{const g=this.create_layers(m);g&&f.push(g)}),f.length>0)return this.setLayers(f,d),{type:d,layers:f}}setUkisLayer(a,h){h||(h=a.filtertype);const d=h.toLowerCase(),m=this.getLayers(d).find(y=>y.get("id")===a.id),g=this.create_layers(a);m?(this.removeLayerByKey({key:um,value:m.get(um)},h),this.addLayer(g,h)):this.addLayer(g,h)}updateUkisLayer(a,h){h||(h=a.filtertype);const d=h.toLowerCase(),m=this.getLayers(d).find(y=>y.get("id")===a.id),g=this.create_layers(a);g&&this.updateLayerByKey({key:um,value:m.get(um)},g,h)}create_layers(a){let h;switch(a.type){case Od:h=this.create_xyz_layer(a);break;case fc:h=this.create_wms_layer(a);break;case pc:h=this.create_wmts_layer(a);break;case Rl:h=this.create_tms_layer(a);break;case hu:h=this.create_geojson_layer(a);break;case gh:h=this.create_kml_layer(a);break;case yh:h=this.create_wfs_layer(a);break;case"custom":h=this.create_custom_layer(a);break;case FH:h=this.create_stacked_layer(a)}return h}createOlLayerOptions(a,h,d){d&&(a.attribution&&d.setAttributions([a.attribution]),a.continuousWorld&&(d.wrapX_=a.continuousWorld),a.popup&&!a.crossOrigin&&null!==a.crossOrigin&&this.sourceSetCross(d),(a.crossOrigin||null===a.crossOrigin)&&this.sourceSetCross(d));const f={opacity:a.opacity||1,visible:a.visible,zIndex:1,id:a.id,name:a.name,filtertype:a.filtertype,type:h,legendImg:a.legendImg};return d&&(f.source=d),a.popup&&(f.popup=a.popup,f.className=a.id),a.maxResolution&&(f.maxResolution=a.maxResolution),a.minResolution&&(f.minResolution=a.minResolution),a.maxZoom&&(f.maxZoom=a.maxZoom),a.minZoom&&(f.minZoom=a.minZoom),a.bbox&&(f.extent=bh(a.bbox.slice(0,4),Ul,this.getProjection().getCode())),f}create_xyz_layer(a){const h={wrapX:!1};a.crossOrigin&&(h.crossOrigin=a.crossOrigin);const d=new wW(h),f=this.createOlLayerOptions(a,"xyz",d),g=new Su(Object.assign(f,{preload:0,useInterimTilesOnError:!0}));return this.setSubdomains(a,g),this.setCrossOrigin(a,g),this.addEventsToLayer(a,g,d),g}create_tms_layer(a){let h=null;if(a instanceof Ko)return h=this.create_xyz_layer(a),h.set("type","tms"),h;if(a instanceof is){const d=new BS({format:new Cx,tileGrid:Sx({minZoom:a.minZoom||void 0,maxZoom:a.maxZoom||void 0}),url:a.url,wrapX:!1}),f=this.createOlLayerOptions(a,"tms",d);h=new Uy(Object.assign(f,{declutter:!0,renderMode:"hybrid"})),this.setCrossOrigin(a,h),this.addEventsToLayer(a,h,d);const g=a?.options?.style,y=a?.options?.styleSource;return g&&y&&dW(h,g,y).then(v=>{this.setSubdomains(a,h)}),h}}create_wms_layer(a){let h;return"true"===a.params?.TILED||null==a.params?.TILED?h=this.create_tiled_wms_layer(a):"false"===a.params?.TILED&&(h=this.create_image_wms_layer(a)),h}create_tiled_wms_layer(a){const h={params:Object.assign({},this.keysToUppercase(a.params)),wrapX:!1};a.tileSize&&(h.tileGrid=this.getTileGrid("default",null,a.tileSize),delete h.params.tileSize),a.crossOrigin&&(h.crossOrigin=a.crossOrigin);const d=new tb(h),m=this.createOlLayerOptions(a,"wms",d),g=new Su(Object.assign(m,{preload:0,useInterimTilesOnError:!0}));return this.setSubdomains(a,g),this.addEventsToLayer(a,g,d),g}create_image_wms_layer(a){const h={params:Object.assign({},this.keysToUppercase(a.params)),url:a.url},d=new VO(h),f=this.createOlLayerOptions(a,"wms",d),g=new Xd(Object.assign(f,{}));return this.addEventsToLayer(a,g,d),g}create_wmts_layer(a){if(a instanceof Ca){let h=this.getTileGrid("wmts"),d=this.EPSG;a.params.matrixSetOptions&&(d=a.params.matrixSetOptions.matrixSet,"resolutions"in a.params.matrixSetOptions?h=this.getTileGrid("wmts",null,a.tileSize,null,a.params.matrixSetOptions.resolutions):("resolutionLevels"in a.params.matrixSetOptions||"tileMatrixPrefix"in a.params.matrixSetOptions)&&(h=this.getTileGrid("wmts",a.params.matrixSetOptions.resolutionLevels,a.tileSize,a.params.matrixSetOptions.tileMatrixPrefix,null)),"matrixIds"in a.params.matrixSetOptions&&(h=this.getTileGrid("wmts",null,a.tileSize,null,null,a.params.matrixSetOptions.matrixIds)));let f={url:a.url,tileGrid:h,matrixSet:d,wrapX:!1,layer:a.params.layer,style:a.params.style};f=Object.assign({},f,a.params),a.crossOrigin&&(f.crossOrigin=a.crossOrigin);const m=new bxe(f),g=this.createOlLayerOptions(a,"wmts",m),v=new Su(Object.assign(g,{}));return this.setSubdomains(a,v),this.setCrossOrigin(a,v),this.addEventsToLayer(a,v,m),v}console.error(`layer with id: ${a.id} and type ${a.type} is no instanceof WmtsLayer!`)}create_wfs_layer(a){let h=null;h=0===a.url.indexOf("http://")||0===a.url.indexOf("https://")?new URL(a.url):new URL(a.url,window.location.origin),h.searchParams.set("srsname",this.EPSG);const d=new hi({format:new Ma,url:h.toString()}),f=this.createOlLayerOptions(a,"wfs",d),m={};a.options&&Object.assign(m,a.options);const g=new bu(Object.assign(f,m));return a.cluster&&this.setCluster(a,g,d,{}),this.setSubdomains(a,g),this.setCrossOrigin(a,g),this.addEventsToLayer(a,g,d),g}create_geojson_layer(a){let h;a.data?h=new hi({features:this.geoJsonToFeatures(a.data),format:new Ma,wrapX:!1}):a.url&&(h=new hi({url:a.url,format:new Ma({dataProjection:Ul,featureProjection:this.EPSG}),wrapX:!1}));const d=this.createOlLayerOptions(a,"geojson",h),f={};a.options&&Object.assign(f,a.options);const m=new bu(Object.assign(d,f));return a.cluster&&this.setCluster(a,m,h,{}),this.setCrossOrigin(a,m),this.addEventsToLayer(a,m,h),m}create_kml_layer(a){let h;a.data?h=new hi({features:new sE({extractStyles:!0}).readFeatures(a.data,{dataProjection:Ul,featureProjection:this.EPSG}),format:new sE,wrapX:!1}):a.url&&(h=new hi({url:a.url,format:new sE({extractStyles:!0,crossOrigin:a.crossOrigin&&null===a.crossOrigin?a.crossOrigin:"anonymous"}),wrapX:!1}));const d=this.createOlLayerOptions(a,"kml",h),f={};a.options&&Object.assign(f,a.options);const m=new bu(Object.assign(d,f));return a.cluster&&this.setCluster(a,m,h,{}),this.setCrossOrigin(a,m),this.addEventsToLayer(a,m,d.source),m}setCrossOrigin(a,h){if(h instanceof Ao){const d=h.getSource();a.popup&&!a.crossOrigin&&null!==a.crossOrigin&&this.sourceSetCross(d),(a.crossOrigin||null===a.crossOrigin)&&this.sourceSetCross(d)}}setCluster(a,h,d,f){if(a.cluster){const m={};"object"==typeof a.cluster&&Object.assign(m,a.cluster),m.source=d;const g=new yf(m);h.setSource(g),h.setStyle(y=>{const v=y.get("features").length;let _=f[v];return _||(_=new ui({image:new Ny({radius:10,stroke:new ws({color:"#fff"}),fill:new Si({color:"#3399CC"})}),text:new Zp({text:v.toString(),fill:new Si({color:"#fff"})})}),f[v]=_),_})}}setSubdomains(a,h){if(a instanceof is||a instanceof Ko){const d=h.getSource();if(a.subdomains){if("wfs"===a.type&&d instanceof hi)a.url=a.url.replace("{s}",`${a.subdomains[0]}-${a.subdomains[a.subdomains.length-1]}`),d.setUrl(a.url);else if(!(d instanceof hi)){const f=a.subdomains.map(m=>a.url.replace("{s}",`${m}`));d.setUrls(f)}}else d.setUrl(a.url)}}sourceSetCross(a){(a instanceof Qy||a instanceof HS||a instanceof j2)&&(a.crossOrigin="anonymous",a.crossOrigin_="anonymous")}create_custom_layer(a){if(a.custom_layer){const h=a.custom_layer;if(h instanceof Ao){const f=h.getSource();a.attribution&&f.setAttributions([a.attribution]),f.wrapX_=!!a.continuousWorld&&a.continuousWorld,this.setCrossOrigin(a,h),this.addEventsToLayer(a,h,f),f instanceof nb&&h.on("change:source",m=>{m.oldValue.dispose()})}else h instanceof Ui?h.getLayers().forEach(f=>{const m=`${a.id}_${tn(f)}`;f.get("id")||f.set("id",m),f instanceof Ao&&(this.setCrossOrigin(a,f),this.addEventsToLayer(a,f,f.getSource())),a.popup&&!f.get("popup")&&(f.set("popup",a.popup),"ol-layer"===f.getClassName()&&(f.className_=m))}):console.error(`The custom_layer of ${a.id} in not a openlayers Layer`);a.maxResolution&&h.setMaxResolution(a.maxResolution),a.minResolution&&h.setMinResolution(a.minResolution),a.maxZoom&&h.setMaxZoom(a.maxZoom),a.minZoom&&h.setMinZoom(a.minZoom);const d={type:"custom",name:a.name,id:a.id,visible:a.visible,legendImg:a.legendImg,opacity:a.opacity||1,zIndex:1};if(a.popup&&!(h instanceof Ui)&&(d.popup=a.popup,h.className_=a.id),a.bbox){const f=bh(a.bbox.slice(0,4),Ul,this.getProjection().getCode());h.setExtent(f)}return h.setProperties(d),h}console.log("attribute custom_layer not set on layer type custom!",a)}create_stacked_layer(a){if(a instanceof PC){const h=a.layers.map(g=>(g.visible=!0,g.popup=a.popup,g.events=a.events,this.create_layers(g))),d=this.createOlLayerOptions(a,"custom");return new Ui(Object.assign(d,{layers:h}))}console.log("layer is not of type StackedLayer!",a)}resolutionsFromExtent(a,h,d){const f=h,m=Ei(a),g=fr(a),y=Math.max(g/d,m/d),v=f+1,_=new Array(v);for(let S=0;S<v;++S)_[S]=y/Math.pow(2,S);return _}matrixIdsFromResolutions(a,h){return Array.from(Array(a).keys()).map(d=>h?`${h}:${d}`:d)}getTileGrid(a="default",h,d,f,m,g){const y=h||42,v=d||256,_=f||"",S=this.getProjection().getExtent(),b=this.resolutionsFromExtent(S,y,v),T=this.matrixIdsFromResolutions(b.length,_),x={extent:S,origin:fu(S),resolutions:m||b,tileSize:[v,v]};return"wmts"===a?(x.matrixIds=g||T,new wxe(x)):"default"===a?new kS(x):void 0}isPopupObj(a){return a&&"object"==typeof a&&!Array.isArray(a)}isPopupObjMove(a){return this.isPopupObj(a)&&"move"===a.event}isPopupObjClick(a){return this.isPopupObj(a)&&"click"===a.event}isPopupObjArray(a){return Array.isArray(a)&&a.length&&this.isPopupObj(a[0])}isPopupStringArray(a){return Array.isArray(a)&&a.length&&"string"==typeof a[0]}eventIsBrowserEvent(a,h){return"move"===a&&"pointermove"===h.type||"click"===a&&"click"===h.type||void 0}layersOnMapEvent(a){let h=!1;const d=this.map.forEachLayerAtPixel(a.pixel,(f,m)=>({layer:f,color:m}),{layerFilter:this.filterLayerNoPopup});if(d){const f=d.layer.get("popup");f&&(this.hitLayerCurr=d.layer.get("id"),this.hitLayerPrev||(this.hitLayerPrev=this.hitLayerCurr),d.color&&(h=!0),this.hitLayerPrev&&this.hitLayerPrev!==this.hitLayerCurr&&(h=!1,this.hitLayerPrev=this.hitLayerCurr),this.topLayerCheckEvent(a,f)&&this.layerOnEvent(a,d.layer,d.color))}h?this.map.getTargetElement().style.cursor="pointer":(this.removeAllPopups(f=>"pointermove"===f.get("addEvent")),this.map.getTargetElement().style.cursor="")}topLayerCheckEvent(a,h){let d=null;const f=(m,g)=>{g.event?this.eventIsBrowserEvent(g.event,m)&&this.isPopupObjClick(g)?d="click":this.eventIsBrowserEvent(g.event,m)&&this.isPopupObjMove(g)&&(d="move"):"click"===m.type&&(d="click")};return"boolean"==typeof h?!0===h&&"click"===a.type&&(d="click"):this.isPopupStringArray(h)?"click"===a.type&&(d="click"):this.isPopupObjArray(h)?h.map(m=>{f(a,m)}):f(a,h),d}checkIsRaster(a){return a instanceof E7||a instanceof T7}checkIsVector(a){return a instanceof $p&&!this.checkIsRaster(a)}layerOnEvent(a,h,d){this.checkIsRaster(h)?this.rasterOnEvent(a,h,d):this.checkIsVector(h)&&this.vectorOnEvent(a)}vectorOnEvent(a){let h=!1;const d=this.map.forEachFeatureAtPixel(a.pixel,(f,m)=>(h=!0,{feature:f,layer:m}),{layerFilter:f=>{let m=!0;if(f instanceof $p){const v=f.getSource();m=v instanceof yf?v.getSource()instanceof hi:v instanceof hi||v instanceof BS}!1===this.filterLayerNoPopup(f)&&(m=!1);const y=f.getExtent();return y&&(Ll(y,this.map.getCoordinateFromPixel(a.pixel))||(m=!1)),m},hitTolerance:this.hitTolerance});if(d){const f=d.layer.get("popup");if(f){const m=d.layer,g=d.feature;let y={};const v=g.getProperties().features;if(v&&1===v.length)y=v[0].getProperties();else{if(v&&v.length>1){if("click"===a.type){const _=this.getFeaturesExtent(g.getProperties().features);return this.setExtent(_),!1}return!0}y=g.getProperties()}this.prepareAddPopup(y,m,g,a,f)}}this.map.getTargetElement().style.cursor=h?"pointer":""}rasterOnEvent(a,h,d){const f=h.get("popup");let m={};f&&(m=h.getProperties(),m.evt=a,d&&(m.color=d),this.prepareAddPopup(m,h,null,a,f))}prepareAddPopup(a,h,d,f,m){const g={modelName:a.id,properties:a,layer:h,feature:d,event:f};let y=Object.assign({},a);y.geometry&&delete y.geometry;const v=b=>{b&&b.filterkeys&&(y=Object.keys(y).filter(T=>b.filterkeys.includes(T)).reduce((T,x)=>(T[x]=y[x],T),{}))};this.isPopupStringArray(m)?y=Object.keys(y).filter(b=>m.includes(b)).reduce((b,T)=>(b[T]=y[T],b),{}):this.isPopupObjArray(m)?v(m.find(T=>this.eventIsBrowserEvent(T.event,f))):this.isPopupObj(m)&&v(m);const _=b=>{if(b.properties){const T=Object.keys(b.properties);Array.isArray(T)&&(y=Object.keys(y).reduce((x,E)=>{const D=b.properties[E];return D?x[D]=y[E]:x[E]=y[E],x},{}))}};this.isPopupObjArray(m)?m.forEach(b=>{this.eventIsBrowserEvent(b.event,f)&&_(b)}):this.isPopupObj(m)&&_(m);const S=b=>{"asyncPopup"in b?b.asyncPopup(y,T=>{this.addPopup(g,null,T,b.event,b.single)}):(b.popupFunction?g.popupFn=b.popupFunction:b.dynamicPopup&&(g.dynamicPopup=b.dynamicPopup),this.addPopup(g,y,null,b.event,b.single))};"boolean"==typeof m||this.isPopupStringArray(m)?this.addPopup(g,y,null):this.isPopupObjArray(m)?m.forEach(b=>{this.eventIsBrowserEvent(b.event,f)&&S(b)}):m&&S(m)}addPopup(a,h,d,f,m){const g=a.layer.get("popup"),y=a.layer.get("id"),v="popup_move_ID",_="move_ID_L_F",S=this.getPopups().find(x=>x.getId()===v),b=a.event;let T=null;if("move"===f&&(a.properties?.color?T=`${y}:${a.properties?.color.toString()}`:a.feature?T=`${y}:${tn(a.feature)}`:a.layer&&(T=`${y}:${tn(a.layer)}`)),"move"===f&&"pointermove"===b.type&&S){let x;if(x=a.properties&&a.properties.geometry&&"Point"===a.properties.geometry.getType()?a.properties.geometry.getCoordinates():b.coordinate,T!==S.get(_)){const E=this.createPopupContainer(S,a,h,d,f);S.setElement(E)}S.setPosition(x),S.getElement().parentElement.style.zIndex="1"}else if("pointermove"!==b.type||f)if("pointermove"===b.type&&"click"===f)S&&this.removeAllPopups(x=>"pointermove"===x.get("addEvent"));else{let x=null;x="move"===f?v:a.feature?`${y}:${tn(a.feature)}`:a.layer?`${y}:${tn(a.layer)}`:`${y}:popup_${(new Date).getTime()}`;const E={autoPan:!0,id:x,autoPanAnimation:{duration:250},positioning:"bottom-center",stopEvent:!0,insertFirst:!1};let D=E;if(this.isPopupObjArray(g)){const F=g.find(V=>this.eventIsBrowserEvent(V.event,b));F.options&&(D=Object.assign(E,F.options))}else this.isPopupObj(g)&&g.options&&(D=Object.assign(E,g.options));const I=new b7(D);T&&I.set(_,T),m&&this.removeAllPopups(F=>{const z=F.getId().toString().split(":")[0];return!z||(y===z?y===z:void 0)});const M=this.getPopups().find(F=>F.getId()===I.getId()&&I.getId()!==v);M&&(this.map.removeOverlay(M),this.destroyDynamicPopupComponent(M.getId().toString()));const L=this.createPopupContainer(I,a,h,d,f);let P;I.getId()===v?I.set("addEvent","pointermove"):I.set("addEvent",b.type),I.set(fN,"popup"),I.setElement(L),P=a.properties&&a.properties.geometry&&"Point"===a.properties.geometry.getType()?a.properties.geometry.getCoordinates():b.coordinate,I.setPosition(P),S&&"move"===f||this.map.addOverlay(I)}else S&&this.removeAllPopups(x=>"pointermove"===x.get("addEvent"))}createPopupContainer(a,h,d,f,m){const g=document.createElement("div");g.className="ol-popup-content";let y="";if(y=h.popupFn?h.popupFn(d):!f||d&&0!==Object.keys(d).length?this.createPopupHtml(d):f,g.innerHTML=y,h.dynamicPopup){const _=a.getId().toString();this.destroyDynamicPopupComponent(_),this.createDynamicPopupComponent(_,g,{event:h.event,layer:h.layer,feature:h.feature||null,dynamicPopup:h.dynamicPopup,properties:d})}const v=document.createElement("div");if(v.className="ol-popup",v.id=a.getId().toString(),v.style.display="block",!m||"move"!==m){const _=document.createElement("a");_.className="ol-popup-closer",v.appendChild(_);const S=()=>{_.removeEventListener("click",S,!1),this.map.removeOverlay(a),this.destroyDynamicPopupComponent(a.getId().toString())};_.addEventListener("click",S,!1)}return v.appendChild(g),v}removeAllPopups(a){let h=this.getPopups();a&&(h=this.getPopups().filter(a)),h.forEach(d=>{"popup"===d.get(fN)&&(this.map.removeOverlay(d),this.destroyDynamicPopupComponent(d.getId().toString()))})}createPopupHtml(a){let h="<table>";for(const d in a)a.hasOwnProperty(d)&&(h+='<tr><td style="vertical-align: top; padding-right: 7px;"><b>'+d+": </b></td><td>"+a[d]+"</td></tr>");return h+="</table>",h}getPopups(){const a=[];return this.map.getOverlays().getArray().slice(0).forEach(h=>{"popup"===h.get(fN)&&a.push(h)}),a}destroyDynamicPopupComponent(a){this.dynamicPopupComponents.has(a)&&(this.dynamicPopupComponents.get(a).destroy(),this.dynamicPopupComponents.delete(a))}createDynamicPopupComponent(a,h,d){const m=this.crf.resolveComponentFactory(d.dynamicPopup.component).create(this.injector,[],h);if(d.dynamicPopup.getAttributes){const g=d.dynamicPopup.getAttributes(d);for(const y in g)"undefined"!==g[y]&&(m.instance[y]=g[y])}this.app.attachView(m.hostView),this.dynamicPopupComponents.set(a,m)}setExtent(a,h,d){const f=cn(h?Ul:this.EPSG),m=bh(a.slice(0,4),f,this.getProjection().getCode()),g={size:this.map.getSize()};return d&&Object.assign(g,d),this.map.getView().fit(m,d),m}setCenter(a,h){const f=Ka(a,cn(h?Ul:this.EPSG),this.getProjection().getCode());return this.map.getView().setCenter(f),f}getCenter(a){const h=cn(a?Ul:this.EPSG),d=cn(this.getProjection().getCode());return Ka(this.map.getView().getCenter(),d,h)}getFeaturesExtent(a,h){const d=a[0].getGeometry().getExtent().slice(0);if(a.forEach(f=>{UL(d,f.getGeometry().getExtent())}),h){const f=cn(Ul);return bh(d,this.getProjection().getCode(),f)}return d}getCurrentExtent(a){const h=cn(a?Ul:this.EPSG);return bh(this.map.getView().calculateExtent(),this.getProjection().getCode(),h)}setZoom(a,h){this.map.getView().setZoom(a)}getZoom(){return this.map.getView().getZoom()}zoomInOut(a){const h=this.map.getView();if(!h)return;const f="+"===a?1:-1,m=h.getZoom();if(void 0!==m){const g=h.getConstrainedZoom(m+f);h.getAnimating()&&h.cancelAnimations(),h.animate({zoom:g,duration:250,easing:Hp})}}geoJsonToFeature(a){return new Ma({dataProjection:Ul,featureProjection:this.EPSG}).readFeature(a)}geoJsonToFeatures(a){return new Ma({dataProjection:Ul,featureProjection:this.EPSG}).readFeatures(a)}getProjection(){return this.map.getView().getProjection()}reprojectFeatures(a,h,d){a.getFeatures().forEach(f=>{f.getGeometry().transform(h,d)})}setProjection(a){if(a){let h={};if(this.viewOptions&&(h=this.viewOptions,h.minResolution=void 0,h.maxResolution=void 0,h.resolution=void 0,h.resolutions=void 0),a instanceof Gp){h.projection=a;const m=Ka(this.map.getView().getCenter(),this.map.getView().getProjection(),a);h.center=m,h.zoom=this.map.getView().getZoom()}else"string"==typeof a&&(h.projection=a,h.center=this.map.getView().getCenter(),h.zoom=this.map.getView().getZoom());const d=new Tc(h),f=this.EPSG;this.EPSG=d.getProjection().getCode(),this.map.setView(d),this.view=this.map.getView(),this.map.getLayers().getArray().forEach(m=>{m.getLayers().getArray().forEach(g=>{if(g instanceof Ao){let y=g.getSource();for(;y.source;)y=y.source;y instanceof hi&&this.reprojectFeatures(y,f,this.EPSG)}})}),this.projectionChange.next(this.getProjection())}}registerProjection(a){SE.defs(a.code,a.proj4js),uX(SE)}getOlProjection(a){return new Gp({code:a.code,extent:a.extent?a.extent:void 0,worldExtent:a.worldExtent?a.worldExtent:void 0,global:!!a.global&&a.global,units:a.units?a.units:void 0})}keysToUppercase(a){return Object.keys(a).forEach(h=>{const d=h.toUpperCase();d!==h&&(a[d]=a[h],delete a[h])}),a}}return c.\u0275fac=function(a){return new(a||c)(Ae(nu),Ae(sy),Ae(ti))},c.\u0275prov=Oe({token:c,factory:c.\u0275fac,providedIn:"root"}),c})();class JPe{constructor(l){this.total=l}call(l,a){return a.subscribe(new eLe(l,this.total))}}class eLe extends ee{constructor(l,a){super(l),this.total=a,this.count=0}_next(l){++this.count>this.total&&this.destination.next(l)}}var tLe=function(){var c=function(l,a){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,d){h.__proto__=d}||function(h,d){for(var f in d)Object.prototype.hasOwnProperty.call(d,f)&&(h[f]=d[f])})(l,a)};return function(l,a){if("function"!=typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");function h(){this.constructor=l}c(l,a),l.prototype=null===a?Object.create(a):(h.prototype=a.prototype,new h)}}(),mN="units",nLe=[1,2,5],gN=25.4/.28,rLe=function(c){function l(a){var h=this,d=a||{},f=void 0!==d.className?d.className:d.bar?"ol-scale-bar":"ol-scale-line";return(h=c.call(this,{element:document.createElement("div"),render:d.render,target:d.target})||this).innerElement_=document.createElement("div"),h.innerElement_.className=f+"-inner",h.element.className=f+" "+Bp,h.element.appendChild(h.innerElement_),h.viewState_=null,h.minWidth_=void 0!==d.minWidth?d.minWidth:64,h.renderedVisible_=!1,h.renderedWidth_=void 0,h.renderedHTML_="",h.addChangeListener(mN,h.handleUnitsChanged_),h.setUnits(d.units||"metric"),h.scaleBar_=d.bar||!1,h.scaleBarSteps_=d.steps||4,h.scaleBarText_=d.text||!1,h.dpi_=d.dpi||void 0,h}return tLe(l,c),l.prototype.getUnits=function(){return this.get(mN)},l.prototype.handleUnitsChanged_=function(){this.updateElement_()},l.prototype.setUnits=function(a){this.set(mN,a)},l.prototype.setDpi=function(a){this.dpi_=a},l.prototype.updateElement_=function(){var a=this.viewState_;if(a){var I,h=a.center,d=a.projection,f=this.getUnits(),g=ox(d,a.resolution,h,"degrees"==f?ta.DEGREES:ta.METERS),y=this.minWidth_*(this.dpi_||gN)/gN,v=y*g,_="";if("degrees"==f){var S=Ya[ta.DEGREES];(v*=S)<S/60?(_="\u2033",g*=3600):v<S?(_="\u2032",g*=60):_="\xb0"}else"imperial"==f?v<.9144?(_="in",g/=.0254):v<1609.344?(_="ft",g/=.3048):(_="mi",g/=1609.344):"nautical"==f?(g/=1852,_="nm"):"metric"==f?v<.001?(_="\u03bcm",g*=1e6):v<1?(_="mm",g*=1e3):v<1e3?_="m":(_="km",g/=1e3):"us"==f?v<.9144?(_="in",g*=39.37):v<1609.344?(_="ft",g/=.30480061):(_="mi",g/=1609.3472):bn(!1,33);for(var T,x,E,b=3*Math.floor(Math.log(y*g)/Math.log(10));;){E=Math.floor(b/3);var D=Math.pow(10,E);if(T=nLe[(b%3+3)%3]*D,x=Math.round(T/g),isNaN(x))return this.element.style.display="none",void(this.renderedVisible_=!1);if(x>=y)break;++b}I=this.scaleBar_?this.createScaleBar(x,T,_):T.toFixed(E<0?-E:0)+" "+_,this.renderedHTML_!=I&&(this.innerElement_.innerHTML=I,this.renderedHTML_=I),this.renderedWidth_!=x&&(this.innerElement_.style.width=x+"px",this.renderedWidth_=x),this.renderedVisible_||(this.element.style.display="",this.renderedVisible_=!0)}else this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1)},l.prototype.createScaleBar=function(a,h,d){for(var f="1 : "+Math.round(this.getScaleForResolution()).toLocaleString(),m=[],g=a/this.scaleBarSteps_,y="#ffffff",v=0;v<this.scaleBarSteps_;v++)0===v&&m.push(this.createMarker("absolute",v)),m.push('<div><div class="ol-scale-singlebar" style="width: '+g+"px;background-color: "+y+';"></div>'+this.createMarker("relative",v)+(v%2==0||2===this.scaleBarSteps_?this.createStepText(v,a,!1,h,d):"")+"</div>"),v===this.scaleBarSteps_-1&&m.push(this.createStepText(v+1,a,!0,h,d)),y="#ffffff"===y?"#000000":"#ffffff";return'<div style="display: flex;">'+(this.scaleBarText_?'<div class="ol-scale-text" style="width: '+a+'px;">'+f+"</div>":"")+m.join("")+"</div>"},l.prototype.createMarker=function(a,h){return'<div class="ol-scale-step-marker" style="position: '+a+";top: "+("absolute"===a?3:-10)+'px;"></div>'},l.prototype.createStepText=function(a,h,d,f,m){var g=0===a?0:Math.round(f/this.scaleBarSteps_*a*100)/100;return'<div class="ol-scale-step-text" style="margin-left: '+(0===a?-3:h/this.scaleBarSteps_*-1)+"px;text-align: "+(0===a?"left":"center")+"; min-width: "+(0===a?0:h/this.scaleBarSteps_*2)+"px;left: "+(d?h+"px":"unset")+';">'+g+(0===a?"":" "+m)+"</div>"},l.prototype.getScaleForResolution=function(){var a=ox(this.viewState_.projection,this.viewState_.resolution,this.viewState_.center,ta.METERS),h=this.dpi_||gN;return parseFloat(a.toString())*(1e3/25.4)*h},l.prototype.render=function(a){var h=a.frameState;this.viewState_=h?h.viewState:null,this.updateElement_()},l}(jd);const iLe=rLe;var sLe=function(){var c=function(l,a){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,d){h.__proto__=d}||function(h,d){for(var f in d)Object.prototype.hasOwnProperty.call(d,f)&&(h[f]=d[f])})(l,a)};return function(l,a){if("function"!=typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");function h(){this.constructor=l}c(l,a),l.prototype=null===a?Object.create(a):(h.prototype=a.prototype,new h)}}(),yN="projection",iq="coordinateFormat",oLe=function(c){function l(a){var h=this,d=a||{},f=document.createElement("div");f.className=void 0!==d.className?d.className:"ol-mouse-position",(h=c.call(this,{element:f,render:d.render,target:d.target})||this).addChangeListener(yN,h.handleProjectionChanged_),d.coordinateFormat&&h.setCoordinateFormat(d.coordinateFormat),d.projection&&h.setProjection(d.projection);var m=!0,g="&#160;";return"undefinedHTML"in d?(void 0!==d.undefinedHTML&&(g=d.undefinedHTML),m=!!g):"placeholder"in d&&(!1===d.placeholder?m=!1:g=String(d.placeholder)),h.placeholder_=g,h.renderOnMouseOut_=m,h.renderedHTML_=f.innerHTML,h.mapProjection_=null,h.transform_=null,h}return sLe(l,c),l.prototype.handleProjectionChanged_=function(){this.transform_=null},l.prototype.getCoordinateFormat=function(){return this.get(iq)},l.prototype.getProjection=function(){return this.get(yN)},l.prototype.handleMouseMove=function(a){var h=this.getMap();this.updateHTML_(h.getEventPixel(a))},l.prototype.handleMouseOut=function(a){this.updateHTML_(null)},l.prototype.setMap=function(a){if(c.prototype.setMap.call(this,a),a){var h=a.getViewport();this.listenerKeys.push(zn(h,"pointermove",this.handleMouseMove,this)),this.renderOnMouseOut_&&this.listenerKeys.push(zn(h,"pointerout",this.handleMouseOut,this)),this.updateHTML_(null)}},l.prototype.setCoordinateFormat=function(a){this.set(iq,a)},l.prototype.setProjection=function(a){this.set(yN,cn(a))},l.prototype.updateHTML_=function(a){var h=this.placeholder_;if(a&&this.mapProjection_){if(!this.transform_){var d=this.getProjection();this.transform_=d?Sh(this.mapProjection_,d):e2}var m=this.getMap().getCoordinateFromPixelInternal(a);if(m){var g=xS();g&&(this.transform_=Sh(this.mapProjection_,g)),this.transform_(m,m);var y=this.getCoordinateFormat();h=y?y(m):m.toString()}}(!this.renderedHTML_||h!==this.renderedHTML_)&&(this.element.innerHTML=h,this.renderedHTML_=h)},l.prototype.render=function(a){var h=a.frameState;h?this.mapProjection_!=h.viewState.projection&&(this.mapProjection_=h.viewState.projection,this.transform_=null):this.mapProjection_=null},l}(jd);const aLe=oLe;var lLe=function(){var c=function(l,a){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,d){h.__proto__=d}||function(h,d){for(var f in d)Object.prototype.hasOwnProperty.call(d,f)&&(h[f]=d[f])})(l,a)};return function(l,a){if("function"!=typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");function h(){this.constructor=l}c(l,a),l.prototype=null===a?Object.create(a):(h.prototype=a.prototype,new h)}}(),sq=["fullscreenchange","webkitfullscreenchange","MSFullscreenChange"],cLe=function(c){function l(a){var h=this,d=a||{};(h=c.call(this,{element:document.createElement("div"),target:d.target})||this).keys_=void 0!==d.keys&&d.keys,h.source_=d.source,h.isInFullscreen_=!1,h.boundHandleMapTargetChange_=h.handleMapTargetChange_.bind(h),h.cssClassName_=void 0!==d.className?d.className:"ol-full-screen",h.documentListeners_=[],h.activeClassName_=void 0!==d.activeClassName?d.activeClassName.split(" "):[h.cssClassName_+"-true"],h.inactiveClassName_=void 0!==d.inactiveClassName?d.inactiveClassName.split(" "):[h.cssClassName_+"-false"];var f=void 0!==d.label?d.label:"\u2922";h.labelNode_="string"==typeof f?document.createTextNode(f):f;var m=void 0!==d.labelActive?d.labelActive:"\xd7";h.labelActiveNode_="string"==typeof m?document.createTextNode(m):m;var g=d.tipLabel?d.tipLabel:"Toggle full-screen";return h.button_=document.createElement("button"),h.button_.title=g,h.button_.setAttribute("type","button"),h.button_.appendChild(h.labelNode_),h.button_.addEventListener("click",h.handleClick_.bind(h),!1),h.setClassName_(h.button_,h.isInFullscreen_),h.element.className="".concat(h.cssClassName_," ").concat(Bp," ").concat(gS),h.element.appendChild(h.button_),h}return lLe(l,c),l.prototype.handleClick_=function(a){a.preventDefault(),this.handleFullScreen_()},l.prototype.handleFullScreen_=function(){var a=this.getMap();if(a){var h=a.getOwnerDocument();if(aq(h))if(lq(h))!function hLe(c){c.exitFullscreen?c.exitFullscreen():c.msExitFullscreen?c.msExitFullscreen():c.webkitExitFullscreen&&c.webkitExitFullscreen()}(h);else{var d;d=this.source_?"string"==typeof this.source_?h.getElementById(this.source_):this.source_:a.getTargetElement(),this.keys_?function uLe(c){c.webkitRequestFullscreen?c.webkitRequestFullscreen():cq(c)}(d):cq(d)}}},l.prototype.handleFullScreenChange_=function(){var a=this.getMap();if(a){var h=this.isInFullscreen_;this.isInFullscreen_=lq(a.getOwnerDocument()),h!==this.isInFullscreen_&&(this.setClassName_(this.button_,this.isInFullscreen_),this.isInFullscreen_?(Dy(this.labelActiveNode_,this.labelNode_),this.dispatchEvent("enterfullscreen")):(Dy(this.labelNode_,this.labelActiveNode_),this.dispatchEvent("leavefullscreen")),a.updateSize())}},l.prototype.setClassName_=function(a,h){var d,f,m,g;h?((d=a.classList).remove.apply(d,this.inactiveClassName_),(f=a.classList).add.apply(f,this.activeClassName_)):((m=a.classList).remove.apply(m,this.activeClassName_),(g=a.classList).add.apply(g,this.inactiveClassName_))},l.prototype.setMap=function(a){var h=this.getMap();h&&h.removeChangeListener("target",this.boundHandleMapTargetChange_),c.prototype.setMap.call(this,a),this.handleMapTargetChange_(),a&&a.addChangeListener("target",this.boundHandleMapTargetChange_)},l.prototype.handleMapTargetChange_=function(){for(var a=this.documentListeners_,h=0,d=a.length;h<d;++h)ri(a[h]);a.length=0;var f=this.getMap();if(f){var m=f.getOwnerDocument();for(aq(m)?this.element.classList.remove(g9):this.element.classList.add(g9),h=0,d=sq.length;h<d;++h)a.push(zn(m,sq[h],this.handleFullScreenChange_,this));this.handleFullScreenChange_()}},l}(jd);function aq(c){var l=c.body;return!!(l.webkitRequestFullscreen||l.msRequestFullscreen&&c.msFullscreenEnabled||l.requestFullscreen&&c.fullscreenEnabled)}function lq(c){return!!(c.webkitIsFullScreen||c.msFullscreenElement||c.fullscreenElement)}function cq(c){c.requestFullscreen?c.requestFullscreen():c.msRequestFullscreen?c.msRequestFullscreen():c.webkitRequestFullscreen&&c.webkitRequestFullscreen()}const dLe=cLe;var uq=function(){var c=function(l,a){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,d){h.__proto__=d}||function(h,d){for(var f in d)Object.prototype.hasOwnProperty.call(d,f)&&(h[f]=d[f])})(l,a)};return function(l,a){if("function"!=typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");function h(){this.constructor=l}c(l,a),l.prototype=null===a?Object.create(a):(h.prototype=a.prototype,new h)}}(),fLe=function(c){function l(){return null!==c&&c.apply(this,arguments)||this}return uq(l,c),l.prototype.createRenderer=function(){return new x9(this)},l}(u7),pLe=function(c){function l(a){var h=this,d=a||{};(h=c.call(this,{element:document.createElement("div"),render:d.render,target:d.target})||this).boundHandleRotationChanged_=h.handleRotationChanged_.bind(h),h.collapsed_=void 0===d.collapsed||d.collapsed,h.collapsible_=void 0===d.collapsible||d.collapsible,h.collapsible_||(h.collapsed_=!1),h.rotateWithView_=void 0!==d.rotateWithView&&d.rotateWithView,h.viewExtent_=void 0;var f=void 0!==d.className?d.className:"ol-overviewmap",m=void 0!==d.tipLabel?d.tipLabel:"Overview map",g=void 0!==d.collapseLabel?d.collapseLabel:"\u2039";"string"==typeof g?(h.collapseLabel_=document.createElement("span"),h.collapseLabel_.textContent=g):h.collapseLabel_=g;var y=void 0!==d.label?d.label:"\u203a";"string"==typeof y?(h.label_=document.createElement("span"),h.label_.textContent=y):h.label_=y;var v=h.collapsible_&&!h.collapsed_?h.collapseLabel_:h.label_,_=document.createElement("button");_.setAttribute("type","button"),_.title=m,_.appendChild(v),_.addEventListener("click",h.handleClick_.bind(h),!1),h.ovmapDiv_=document.createElement("div"),h.ovmapDiv_.className="ol-overviewmap-map",h.view_=d.view,h.ovmap_=new fLe({view:d.view});var S=h.ovmap_;d.layers&&d.layers.forEach(function(F){S.addLayer(F)});var b=document.createElement("div");b.className="ol-overviewmap-box",b.style.boxSizing="border-box",h.boxOverlay_=new b7({position:[0,0],positioning:"center-center",element:b}),h.ovmap_.addOverlay(h.boxOverlay_);var x=h.element;x.className=f+" "+Bp+" "+gS+(h.collapsed_&&h.collapsible_?" "+$C:"")+(h.collapsible_?"":" ol-uncollapsible"),x.appendChild(h.ovmapDiv_),x.appendChild(_);var E=h,D=h.boxOverlay_,I=h.boxOverlay_.getElement(),L=function(F){var V=function(F){return{clientX:F.clientX,clientY:F.clientY}}(F),z=S.getEventCoordinateInternal(V);D.setPosition(z)},P=function(F){var V=S.getEventCoordinateInternal(F);E.getMap().getView().setCenterInternal(V),window.removeEventListener("mousemove",L),window.removeEventListener("mouseup",P)};return I.addEventListener("mousedown",function(){window.addEventListener("mousemove",L),window.addEventListener("mouseup",P)}),h}return uq(l,c),l.prototype.setMap=function(a){var h=this.getMap();if(a!==h){if(h){var d=h.getView();d&&this.unbindView_(d),this.ovmap_.setTarget(null)}if(c.prototype.setMap.call(this,a),a){this.ovmap_.setTarget(this.ovmapDiv_),this.listenerKeys.push(zn(a,"propertychange",this.handleMapPropertyChange_,this));var f=a.getView();f&&(this.bindView_(f),f.isDef()&&(this.ovmap_.updateSize(),this.resetExtent_())),this.ovmap_.isRendered()||this.updateBoxAfterOvmapIsRendered_()}}},l.prototype.handleMapPropertyChange_=function(a){if("view"===a.key){var h=a.oldValue;h&&this.unbindView_(h);var d=this.getMap().getView();this.bindView_(d)}else!this.ovmap_.isRendered()&&("target"===a.key||"size"===a.key)&&this.ovmap_.updateSize()},l.prototype.bindView_=function(a){if(!this.view_){var h=new Tc({projection:a.getProjection()});this.ovmap_.setView(h)}a.addChangeListener(Za.ROTATION,this.boundHandleRotationChanged_),this.handleRotationChanged_()},l.prototype.unbindView_=function(a){a.removeChangeListener(Za.ROTATION,this.boundHandleRotationChanged_)},l.prototype.handleRotationChanged_=function(){this.rotateWithView_&&this.ovmap_.getView().setRotation(this.getMap().getView().getRotation())},l.prototype.validateExtent_=function(){var a=this.getMap(),h=this.ovmap_;if(a.isRendered()&&h.isRendered()){var d=a.getSize(),m=a.getView().calculateExtentInternal(d);if(!this.viewExtent_||!Ol(m,this.viewExtent_)){this.viewExtent_=m;var g=h.getSize(),v=h.getView().calculateExtentInternal(g),_=h.getPixelFromCoordinateInternal(fu(m)),S=h.getPixelFromCoordinateInternal(hS(m)),b=Math.abs(_[0]-S[0]),T=Math.abs(_[1]-S[1]),x=g[0],E=g[1];b<.1*x||T<.1*E||b>.75*x||T>.75*E?this.resetExtent_():xa(v,m)||this.recenter_()}}},l.prototype.resetExtent_=function(){var a=this.getMap(),h=this.ovmap_,d=a.getSize(),m=a.getView().calculateExtentInternal(d),g=h.getView(),y=Math.log(7.5)/Math.LN2;GL(m,1/(.1*Math.pow(2,y/2))),g.fitInternal(S2(m))},l.prototype.recenter_=function(){var a=this.getMap(),h=this.ovmap_,d=a.getView();h.getView().setCenterInternal(d.getCenterInternal())},l.prototype.updateBox_=function(){var a=this.getMap(),h=this.ovmap_;if(a.isRendered()&&h.isRendered()){var d=a.getSize(),f=a.getView(),m=h.getView(),g=this.rotateWithView_?0:-f.getRotation(),y=this.boxOverlay_,v=this.boxOverlay_.getElement(),_=f.getCenterInternal(),S=f.getResolution(),b=m.getResolution(),T=d[0]*S/b,x=d[1]*S/b;y.setPosition(_),v&&(v.style.width=T+"px",v.style.height=x+"px",v.style.transform="rotate("+g+"rad)")}},l.prototype.updateBoxAfterOvmapIsRendered_=function(){this.ovmapPostrenderKey_||(this.ovmapPostrenderKey_=pS(this.ovmap_,"postrender",function(a){delete this.ovmapPostrenderKey_,this.updateBox_()},this))},l.prototype.handleClick_=function(a){a.preventDefault(),this.handleToggle_()},l.prototype.handleToggle_=function(){this.element.classList.toggle($C),this.collapsed_?Dy(this.collapseLabel_,this.label_):Dy(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_;var a=this.ovmap_;if(!this.collapsed_){if(a.isRendered())return this.viewExtent_=void 0,void a.render();a.updateSize(),this.resetExtent_(),this.updateBoxAfterOvmapIsRendered_()}},l.prototype.getCollapsible=function(){return this.collapsible_},l.prototype.setCollapsible=function(a){this.collapsible_!==a&&(this.collapsible_=a,this.element.classList.toggle("ol-uncollapsible"),!a&&this.collapsed_&&this.handleToggle_())},l.prototype.setCollapsed=function(a){!this.collapsible_||this.collapsed_===a||this.handleToggle_()},l.prototype.getCollapsed=function(){return this.collapsed_},l.prototype.getRotateWithView=function(){return this.rotateWithView_},l.prototype.setRotateWithView=function(a){this.rotateWithView_!==a&&(this.rotateWithView_=a,0!==this.getMap().getView().getRotation()&&(this.rotateWithView_?this.handleRotationChanged_():this.ovmap_.getView().setRotation(0),this.viewExtent_=void 0,this.validateExtent_(),this.updateBox_()))},l.prototype.getOverviewMap=function(){return this.ovmap_},l.prototype.render=function(a){this.validateExtent_(),this.updateBox_()},l}(jd);const mLe=pLe;var gLe=function(){var c=function(l,a){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,d){h.__proto__=d}||function(h,d){for(var f in d)Object.prototype.hasOwnProperty.call(d,f)&&(h[f]=d[f])})(l,a)};return function(l,a){if("function"!=typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");function h(){this.constructor=l}c(l,a),l.prototype=null===a?Object.create(a):(h.prototype=a.prototype,new h)}}(),vLe=function(c){function l(a){var h=a||{},d=void 0===h.imageSmoothing||h.imageSmoothing;return void 0!==h.interpolate&&(d=h.interpolate),c.call(this,{attributions:void 0!==h.attributions?h.attributions:['&#169; <a href="https://www.openstreetmap.org/copyright" target="_blank">OpenStreetMap</a> contributors.'],attributionsCollapsible:!1,cacheSize:h.cacheSize,crossOrigin:void 0!==h.crossOrigin?h.crossOrigin:"anonymous",interpolate:d,maxZoom:void 0!==h.maxZoom?h.maxZoom:19,opaque:void 0===h.opaque||h.opaque,reprojectionErrorThreshold:h.reprojectionErrorThreshold,tileLoadFunction:h.tileLoadFunction,transition:h.transition,url:void 0!==h.url?h.url:"https://{a-c}.tile.openstreetmap.org/{z}/{x}/{y}.png",wrapX:h.wrapX,zDirection:h.zDirection})||this}return gLe(l,c),l}(wW);const xE=vLe,_Le=["mapDiv"];function SLe(c,l){1&c&&(U(0,"div",3),ye(1,"+"),H())}let Oh=(()=>{class c{constructor(a,h){this.mapSvc=a,this.ngZone=h,this.subs=[],this.privMapwidth=0,this.removePopupsOnMouseLeave=d=>{this.mapSvc.removeAllPopups(f=>"pointermove"===f.get("addEvent"))}}get mapwidth(){return this.privMapwidth}set mapwidth(a){this.privMapwidth=a,this.map.updateSize()}ngOnInit(){this.subscribeToMapState(),this.initMap(),this.subscribeToLayers()}ngAfterViewInit(){this.map.setTarget(this.mapDivView.nativeElement);const a=this.mapStateSvc.getMapState().getValue();this.setMapState(a),this.subscribeToMapEvents(),this.map.getTargetElement().addEventListener("mouseleave",this.removePopupsOnMouseLeave)}ngAfterViewChecked(){if(this.mapDivView){const a=this.mapDivView.nativeElement.offsetWidth;a!==this.mapwidth&&this.ngZone.runOutsideAngular(()=>{setTimeout(()=>{this.mapwidth=a},100)})}}ngOnDestroy(){this.subs.forEach(a=>a.unsubscribe()),this.map&&(this.map.un("moveend",this.mapOnMoveend),this.map.un("click",this.mapOnClickMove),this.map.un("dblclick",this.mapOnDclick),this.map.getTargetElement().removeEventListener("mouseleave",this.removePopupsOnMouseLeave),this.map.getInteractions().forEach(a=>{this.map.removeInteraction(a)}))}addUpdateLayers(a,h,d){let f=0;if(d.forEach(m=>{f+=this.mapSvc.getLayers(m).length}),a.length!==this.mapSvc.getLayers(h).length){if(this.mapSvc.setUkisLayers(a,h),f>0)for(const m of a){const g=this.mapSvc.getLayerByKey({key:"id",value:m.id},h);g&&g.getZIndex()!==a.indexOf(m)+f&&(g.setZIndex(a.indexOf(m)+f),this.setZIndexForGroup(g,a,m,f))}}else for(const m of a){const g=this.mapSvc.getLayerByKey({key:"id",value:m.id},h);if(g){if(g.getVisible()!==m.visible&&g.setVisible(m.visible),g.getOpacity()!==m.opacity&&g.setOpacity(m.opacity),m instanceof _i&&g instanceof Ao){const y=m.custom_layer.getSource(),v=g.getSource();y&&tn(v)!==tn(y)&&(g.setSource(y),v instanceof nb&&v.dispose())}else if(m instanceof _i&&m.custom_layer instanceof Ui&&g instanceof Ui){const y=m.custom_layer.getLayers().getArray();g.getLayers().getArray().forEach((_,S)=>{const b=y[S];if(_ instanceof Ao&&b instanceof Ao){const T=_.getSource(),x=b.getSource();x&&tn(T)!==tn(x)&&_.setSource(x)}})}f>0?g.getZIndex()!==a.indexOf(m)+f&&(g.setZIndex(a.indexOf(m)+f),this.setZIndexForGroup(g,a,m,f)):g.getZIndex()!==a.indexOf(m)&&(g.setZIndex(a.indexOf(m)),this.setZIndexForGroup(g,a,m)),this.updateLayerParamsWith(g,m)}}}setZIndexForGroup(a,h,d,f){a instanceof Ui&&a.getLayers().forEach(m=>{m.setZIndex(f?h.indexOf(d)+f:h.indexOf(d))})}updateLayerParamsWith(a,h){switch(h.type){case fc:this.updateWmsLayerParamsWith(a,h);break;case pc:this.updateWmtsLayerParamsWith(a,h);break;case hu:this.updateGeojsonLayerParamsWith(a,h);break;case yh:this.updateWfsLayerParamsWith(a,h)}}updateWfsLayerParamsWith(a,h){h.options&&h.options.style!==a.getStyle()&&a.setStyle(h.options.style),a.getSource().getUrl()!==h.url&&a.getSource().setUrl(h.url)}updateGeojsonLayerParamsWith(a,h){const d=a.getSource();if(d){if(h.data){const f=this.mapSvc.geoJsonToFeatures(h.data);if(d instanceof yf){const m=d.getSource();m.clear(),m.addFeatures(f)}else d.clear(),d.addFeatures(f)}else h.url&&(d instanceof yf?d.getSource().setUrl(h.url):d.setUrl(h.url));"object"==typeof h?.cluster&&"distance"in h.cluster&&d instanceof yf&&d.setDistance(h.cluster.distance)}h?.options?.style&&a.setStyle(h.options.style)}updateWmsLayerParamsWith(a,h){if(a instanceof Ao){const f=a.getSource().getParams(),m=h.params;this.shallowEqual(f,m)||a.getSource().updateParams(m)}}updateWmtsLayerParamsWith(a,h){if(a instanceof Ao){const d=a.getSource(),f=d.getStyle(),m=d.getFormat(),g=d.getVersion(),y=d.getMatrixSet(),v=h.params.style,_=h.params.format,S=h.params.version,b=h.params.matrixSetOptions.matrixSet;if(void 0!==v&&f!==v||void 0!==_&&m!==_||void 0!==S&&g!==S||void 0!==b&&y!==b){const T=h.filtertype.toLowerCase();this.mapSvc.updateUkisLayer(h,T)}}}shallowEqual(a,h){const d=Object.getOwnPropertyNames(a),f=Object.getOwnPropertyNames(h);if(d.length!==f.length)return!1;for(const m of d)if(a[m]!==h[m])return!1;return!0}addUpdateBaseLayers(a){if(a.length!==this.mapSvc.getLayers("baselayers").length){const h=a.filter(d=>!0===d.visible);0===h.length?a[0].visible=!0:h.length>1&&(a.forEach(d=>d.visible=!1),a[0].visible=!0),this.mapSvc.setUkisLayers(a,"baselayers")}else for(const h of a){const d=this.mapSvc.getLayerByKey({key:"id",value:h.id},"baselayers");d&&(d.getVisible()!==h.visible&&d.setVisible(h.visible),d.getZIndex()!==a.indexOf(h)&&d.setZIndex(a.indexOf(h)),d.getOpacity()!==h.opacity&&d.setOpacity(h.opacity))}}subscribeToLayers(){if(this.layersSvc){const a=this.layersSvc.getBaseLayers().subscribe(f=>this.addUpdateBaseLayers(f));this.subs.push(a);const h=this.layersSvc.getLayers().subscribe(f=>this.addUpdateLayers(f,"layers",["baselayers"]));this.subs.push(h);const d=this.layersSvc.getOverlays().subscribe(f=>this.addUpdateLayers(f,"overlays",["baselayers","layers"]));this.subs.push(d)}}setMapState(a){const h=this.mapStateSvc.getLastAction().getValue();"user"===a.options.notifier&&("setExtent"===h?this.mapSvc.setExtent(a.extent,!0):"setState"===h&&(this.mapSvc.setZoom(a.zoom,a.options.notifier),this.mapSvc.setCenter([a.center.lon,a.center.lat],!0)))}subscribeToMapState(){if(this.mapStateSvc){const a=this.mapStateSvc.getMapState().pipe(function QPe(c){return l=>l.lift(new JPe(c))}(1)).subscribe(h=>this.setMapState(h));this.subs.push(a)}}subscribeToMapEvents(){this.mapOnMoveend=a=>{const h=this.mapSvc.getZoom(),d=this.mapSvc.getCenter(!0),f=this.mapSvc.getCurrentExtent(!0),m={lat:parseFloat(d[1]),lon:parseFloat(d[0])},g=new yy(h,m,{notifier:"map"},f);this.mapStateSvc.setMapState(g)},this.map.on("moveend",this.mapOnMoveend),this.mapOnClickMove=a=>{this.mapSvc.layersOnMapEvent(a)},this.map.on(["click","pointermove"],this.mapOnClickMove),this.mapOnDclick=a=>{this.mapSvc.removeAllPopups()},this.map.on("dblclick",this.mapOnDclick)}initMap(){const a=this.mapSvc.createMap();this.map=a.map,this.setControls(),this.layersSvc||console.log("there is no layersSvc as defined!"),this.mapStateSvc||console.log("there is no mapStateSvc as defined!")}setControls(){const a=[],h=[];if(this.map&&(this.map.getControls().getArray().forEach(f=>h.push(f)),this.map.getControls().clear()),this.controls&&this.map){if(!1!==this.controls.attribution){let d={collapsible:!0,collapsed:!1};"object"==typeof this.controls.attribution&&(d=Object.assign(d,this.controls.attribution));const f=new h7(d);a.push(f)}if(this.controls.scaleLine){let d={};"object"==typeof this.controls.scaleLine&&(d=Object.assign(d,this.controls.scaleLine));const f=new iLe(d);a.push(f)}if(!1!==this.controls.zoom){let d={};"object"==typeof this.controls.zoom&&(d=Object.assign(d,this.controls.zoom));const f=new f7(d);a.push(f)}if(this.controls.mousePosition){let d={coordinateFormat:m=>function p9(c,l){return function g_e(c,l,a){return c?l.replace("{x}",c[0].toFixed(a)).replace("{y}",c[1].toFixed(a)):""}(c,"{x}, {y}",l)}(m,2),projection:"EPSG:4326"};"object"==typeof this.controls.mousePosition&&(d=Object.assign(d,this.controls.mousePosition));const f=new aLe(d);a.push(f)}if(this.controls.fullScreen){let d={};"object"==typeof this.controls.fullScreen&&(d=Object.assign(d,this.controls.fullScreen));const f=new dLe(d);a.push(f)}if(this.controls.overviewMap){const d=document.createElement("spawn");d.innerHTML='<clr-icon shape="world"></clr-icon>';let f={layers:[new Su({source:new xE})],label:d};"object"==typeof this.controls.overviewMap&&(f=Object.assign(f,this.controls.overviewMap));const m=new mLe(f);a.push(m)}if(this.controls.rotate){let d={};"object"==typeof this.controls.rotate&&(d=Object.assign(d,this.controls.rotate));const f=new d7(d);a.push(f)}a.length&&(h.filter(f=>!a.includes(f)).forEach(f=>a.push(f)),this.map.getControls().extend(a))}}}return c.\u0275fac=function(a){return new(a||c)(N(Cs),N(kn))},c.\u0275cmp=Be({type:c,selectors:[["ukis-map-ol"]],viewQuery:function(a,h){if(1&a&&hr(_Le,5),2&a){let d;mt(d=gt())&&(h.mapDivView=d.first)}},inputs:{layersSvc:"layersSvc",mapStateSvc:["mapState","mapStateSvc"],controls:"controls"},decls:3,vars:1,consts:[["id","map","ref","map",1,"map"],["mapDiv",""],["id","crosshair","class","crosshair",4,"ngIf"],["id","crosshair",1,"crosshair"]],template:function(a,h){1&a&&(U(0,"div",0,1),le(2,SLe,2,0,"div",2),H()),2&a&&(B(2),G("ngIf",h.controls&&h.controls.crosshair))},dependencies:[vn],styles:['@charset "UTF-8";.ol-box{box-sizing:border-box;border-radius:2px;border:1.5px solid rgb(179,197,219);background-color:#fff6}.ol-mouse-position{top:8px;right:8px;position:absolute}.ol-scale-line{background:rgba(0,60,136,.3);border-radius:4px;bottom:8px;left:8px;padding:2px;position:absolute}.ol-scale-line-inner{border:1px solid #eee;border-top:none;color:#eee;font-size:10px;text-align:center;margin:1px;will-change:contents,width;transition:all .25s}.ol-scale-bar{position:absolute;bottom:8px;left:8px}.ol-scale-step-marker{width:1px;height:15px;background-color:#000;float:right;z-index:10}.ol-scale-step-text{position:absolute;bottom:-5px;font-size:12px;z-index:11;color:#000;text-shadow:-2px 0 #FFFFFF,0 2px #FFFFFF,2px 0 #FFFFFF,0 -2px #FFFFFF}.ol-scale-text{position:absolute;font-size:14px;text-align:center;bottom:25px;color:#000;text-shadow:-2px 0 #FFFFFF,0 2px #FFFFFF,2px 0 #FFFFFF,0 -2px #FFFFFF}.ol-scale-singlebar{position:relative;height:10px;z-index:9;box-sizing:border-box;border:1px solid black}.ol-unsupported{display:none}.ol-viewport,.ol-unselectable{-webkit-touch-callout:none;-webkit-user-select:none;user-select:none;-webkit-tap-highlight-color:rgba(0,0,0,0)}.ol-viewport canvas{all:unset}.ol-selectable{-webkit-touch-callout:default;-webkit-user-select:text;user-select:text}.ol-grabbing{cursor:grabbing}.ol-grab{cursor:move;cursor:grab}.ol-control{position:absolute;background-color:#fff6;border-radius:4px;padding:2px}.ol-control:hover{background-color:#fff9}.ol-zoom{top:.5em;left:.5em}.ol-rotate{top:.5em;right:.5em;transition:opacity .25s linear,visibility 0s linear}.ol-rotate.ol-hidden{opacity:0;visibility:hidden;transition:opacity .25s linear,visibility 0s linear .25s}.ol-zoom-extent{top:4.643em;left:.5em}.ol-full-screen{right:.5em;top:.5em}.ol-control button{display:block;margin:1px;padding:0;color:#fff;font-weight:700;text-decoration:none;font-size:inherit;text-align:center;height:1.375em;width:1.375em;line-height:.4em;background-color:#003c8880;border:none;border-radius:2px}.ol-control button::-moz-focus-inner{border:none;padding:0}.ol-zoom-extent button{line-height:1.4em}.ol-compass{display:block;font-weight:400;font-size:1.2em;will-change:transform}.ol-touch .ol-control button{font-size:1.5em}.ol-touch .ol-zoom-extent{top:5.5em}.ol-control button:hover,.ol-control button:focus{text-decoration:none;background-color:#003c88b3}.ol-zoom .ol-zoom-in{border-radius:2px 2px 0 0}.ol-zoom .ol-zoom-out{border-radius:0 0 2px 2px}.ol-attribution{text-align:right;bottom:.5em;right:.5em;max-width:calc(100% - 1.3em);display:flex;flex-flow:row-reverse;align-items:center}.ol-attribution a{color:#003c88b3;text-decoration:none}.ol-attribution ul{margin:0;padding:1px .5em;color:#000;text-shadow:0 0 2px #fff;font-size:12px}.ol-attribution li{display:inline;list-style:none}.ol-attribution li:not(:last-child):after{content:" "}.ol-attribution img{max-height:2em;max-width:inherit;vertical-align:middle}.ol-attribution button{flex-shrink:0}.ol-attribution.ol-collapsed ul{display:none}.ol-attribution:not(.ol-collapsed){background:rgba(255,255,255,.8)}.ol-attribution.ol-uncollapsible{bottom:0;right:0;border-radius:4px 0 0}.ol-attribution.ol-uncollapsible img{margin-top:-.2em;max-height:1.6em}.ol-attribution.ol-uncollapsible button{display:none}.ol-zoomslider{top:4.5em;left:.5em;height:200px}.ol-zoomslider button{position:relative;height:10px}.ol-touch .ol-zoomslider{top:5.5em}.ol-overviewmap{left:.5em;bottom:.5em}.ol-overviewmap.ol-uncollapsible{bottom:0;left:0;border-radius:0 4px 0 0}.ol-overviewmap .ol-overviewmap-map,.ol-overviewmap button{display:block}.ol-overviewmap .ol-overviewmap-map{border:1px solid #7b98bc;height:150px;margin:2px;width:150px}.ol-overviewmap:not(.ol-collapsed) button{bottom:2px;left:2px;position:absolute}.ol-overviewmap.ol-collapsed .ol-overviewmap-map,.ol-overviewmap.ol-uncollapsible button{display:none}.ol-overviewmap:not(.ol-collapsed){background:rgba(255,255,255,.8)}.ol-overviewmap-box{border:2px dotted rgba(0,60,136,.7)}.ol-overviewmap .ol-overviewmap-box:hover{cursor:move}:root{--ukis-crosshair-color: #ff0004;--ukis-popup-bg-color: rgb(238, 238, 238);--ukis-drop-shadow: drop-shadow(0 1px 4px rgba(0, 0, 0, .2));--ukis-ol-bbox-bg-color: rgba(255, 255, 255, .4);--ukis-ol-bbox-border-color: rgba(87, 87, 87, .4);--ukis-ol-overviewmap-left: .5em;--ukis-ol-overviewmap-bottom: 3em;--ukis-ol-control-bg-color: rgba(87, 87, 87, .6);--ukis-ol-control-border-color: rgba(87, 87, 87, .4)}.map{width:100%;height:100%;position:relative}.ol-popup{position:absolute;background-color:var(--ukis-popup-bg-color);filter:var(--ukis-drop-shadow);padding:15px;border-radius:2px;bottom:12px;left:-50px;min-width:280px;display:none;z-index:1000000}.ol-popup .ol-popup-closer{text-decoration:none;position:absolute;top:0px;right:8px;cursor:pointer}.ol-popup .ol-popup-closer:after{content:"\\2716"}.ol-popup:after,.ol-popup:before{top:100%;border:solid transparent;content:" ";height:0;width:0;position:absolute;pointer-events:none}.ol-popup:after{border-top-color:var(--ukis-popup-bg-color);border-width:10px;left:48px;margin-left:-10px}.ol-popup:before{border-width:11px;left:48px;margin-left:-11px}.crosshair{top:50%;left:50%;font-size:large;color:var(--ukis-crosshair-color);z-index:1;position:absolute;cursor:default}.ol-control button{cursor:pointer;background-color:var(--ukis-ol-control-bg-color)}.ol-control button:focus{background-color:var(--ukis-ol-control-bg-color)}.ol-control button:hover{background-color:var(--ukis-ol-control-border-color)}.ol-scale-line{background:rgba(255,255,255,.4);line-height:1.375em}.ol-scale-line .ol-scale-line-inner{background:var(--ukis-ol-control-bg-color);border-color:var(--ukis-ol-control-bg-color)}.ol-attribution ul{font-size:.5rem}.ol-box{background-color:var(--ukis-ol-bbox-bg-color);border-color:var(--ukis-ol-bbox-border-color)!important}.ol-box.ol-drag-select{border-color:var(--clr-color-action-600, var(--fallback-color-no-clr))!important}.ol-overviewmap{left:var(--ukis-ol-overviewmap-left)!important;bottom:var(--ukis-ol-overviewmap-bottom)!important}\n'],encapsulation:2}),c})(),bLe=(()=>{class c{}return c.\u0275fac=function(a){return new(a||c)},c.\u0275mod=Ut({type:c}),c.\u0275inj=kt({providers:[Cs],imports:[Nn]}),c})();class hq extends jd{constructor(l={}){const a=l;super({element:document.createElement("div"),target:a.target}),this.toggle="zoom";const h=void 0!==a.className?a.className:"zoom-number ol-unselectable ol-control",d=document.createElement("button");d.className=h+"-reset",d.setAttribute("type","button"),d.innerHTML="Z",d.addEventListener("click",this.toggleZoomResolution.bind(this),!1);const m=this.element;m.className=h+" ",m.appendChild(d)}setMap(l){super.setMap(l),l&&this.listenerKeys.push(zn(l,"moveend",this.handleMapMoveend_,this))}getMapZoom(){return this.getMap().getView().getZoom()}getMapResolution(){return this.getMap().getView().getResolution()}toggleZoomResolution(){this.toggle="zoom"===this.toggle?"resolution":"zoom",this.handleMapMoveend_()}handleMapMoveend_(){if(this.element instanceof HTMLElement&&this.element.firstElementChild instanceof HTMLElement)if("zoom"===this.toggle){const l=this.getMapZoom();this.element.firstElementChild.innerHTML=""+Math.round(1*l)/1,this.element.firstElementChild.title=`z: ${l}`}else{const l=this.getMapResolution();this.element.firstElementChild.innerHTML=""+Math.round(1*l)/1,this.element.firstElementChild.title=`r: ${l}`}}}class wLe{constructor(l,a){this.fn=l,this.subscriptions=a}unsubscribe(){const l=this.subscriptions.indexOf(this);-1!==l&&this.subscriptions.splice(l,1)}}function Ef(c){return null!=c&&"object"==typeof c&&!0===c["@@functional/placeholder"]}function Iu(c){return function l(a){return 0===arguments.length||Ef(a)?l:c.apply(this,arguments)}}function Ru(c){return function l(a,h){switch(arguments.length){case 0:return l;case 1:return Ef(a)?l:Iu(function(d){return c(a,d)});default:return Ef(a)&&Ef(h)?l:Ef(a)?Iu(function(d){return c(d,h)}):Ef(h)?Iu(function(d){return c(a,d)}):c(a,h)}}}var xLe=Ru(function(l,a){return a instanceof l||null!=a&&(a.constructor===l||"Object"===l.name&&"object"==typeof a)});const EE=xLe;function ME(c,l){return Object.prototype.hasOwnProperty.call(l,c)}var dq=Object.prototype.toString,ELe=function(){return"[object Arguments]"===dq.call(arguments)?function(l){return"[object Arguments]"===dq.call(l)}:function(l){return ME("callee",l)}}();const fq=ELe,_N=Array.isArray||function(l){return null!=l&&l.length>=0&&"[object Array]"===Object.prototype.toString.call(l)};function SN(c){return"[object String]"===Object.prototype.toString.call(c)}var DLe=Iu(function(l){return null!=l&&"function"==typeof l["fantasy-land/empty"]?l["fantasy-land/empty"]():null!=l&&null!=l.constructor&&"function"==typeof l.constructor["fantasy-land/empty"]?l.constructor["fantasy-land/empty"]():null!=l&&"function"==typeof l.empty?l.empty():null!=l&&null!=l.constructor&&"function"==typeof l.constructor.empty?l.constructor.empty():_N(l)?[]:SN(l)?"":function pq(c){return"[object Object]"===Object.prototype.toString.call(c)}(l)?{}:fq(l)?function(){return arguments}():function MLe(c){var l=Object.prototype.toString.call(c);return"[object Uint8ClampedArray]"===l||"[object Int8Array]"===l||"[object Uint8Array]"===l||"[object Int16Array]"===l||"[object Uint16Array]"===l||"[object Int32Array]"===l||"[object Uint32Array]"===l||"[object Float32Array]"===l||"[object Float64Array]"===l||"[object BigInt64Array]"===l||"[object BigUint64Array]"===l}(l)?l.constructor.from(""):void 0});const ALe=DLe;function mq(c){for(var a,l=[];!(a=c.next()).done;)l.push(a.value);return l}function gq(c,l,a){for(var h=0,d=a.length;h<d;){if(c(l,a[h]))return!0;h+=1}return!1}const bN="function"==typeof Object.is?Object.is:function RLe(c,l){return c===l?0!==c||1/c==1/l:c!=c&&l!=l};var PLe=!{toString:null}.propertyIsEnumerable("toString"),yq=["constructor","valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],vq=function(){return arguments.propertyIsEnumerable("length")}(),LLe=function(l,a){for(var h=0;h<l.length;){if(l[h]===a)return!0;h+=1}return!1},OLe=Iu("function"!=typeof Object.keys||vq?function(l){if(Object(l)!==l)return[];var a,h,d=[],f=vq&&fq(l);for(a in l)ME(a,l)&&(!f||"length"!==a)&&(d[d.length]=a);if(PLe)for(h=yq.length-1;h>=0;)ME(a=yq[h],l)&&!LLe(d,a)&&(d[d.length]=a),h-=1;return d}:function(l){return Object(l)!==l?[]:Object.keys(l)});const TN=OLe;var NLe=Iu(function(l){return null===l?"Null":void 0===l?"Undefined":Object.prototype.toString.call(l).slice(8,-1)});const _q=NLe;function Sq(c,l,a,h){var d=mq(c);function m(g,y){return wN(g,y,a.slice(),h.slice())}return!gq(function(g,y){return!gq(m,y,g)},mq(l),d)}function wN(c,l,a,h){if(bN(c,l))return!0;var d=_q(c);if(d!==_q(l))return!1;if("function"==typeof c["fantasy-land/equals"]||"function"==typeof l["fantasy-land/equals"])return"function"==typeof c["fantasy-land/equals"]&&c["fantasy-land/equals"](l)&&"function"==typeof l["fantasy-land/equals"]&&l["fantasy-land/equals"](c);if("function"==typeof c.equals||"function"==typeof l.equals)return"function"==typeof c.equals&&c.equals(l)&&"function"==typeof l.equals&&l.equals(c);switch(d){case"Arguments":case"Array":case"Object":if("function"==typeof c.constructor&&"Promise"===function ILe(c){var l=String(c).match(/^function (\w*)/);return null==l?"":l[1]}(c.constructor))return c===l;break;case"Boolean":case"Number":case"String":if(typeof c!=typeof l||!bN(c.valueOf(),l.valueOf()))return!1;break;case"Date":if(!bN(c.valueOf(),l.valueOf()))return!1;break;case"Error":return c.name===l.name&&c.message===l.message;case"RegExp":if(c.source!==l.source||c.global!==l.global||c.ignoreCase!==l.ignoreCase||c.multiline!==l.multiline||c.sticky!==l.sticky||c.unicode!==l.unicode)return!1}for(var f=a.length-1;f>=0;){if(a[f]===c)return h[f]===l;f-=1}switch(d){case"Map":return c.size===l.size&&Sq(c.entries(),l.entries(),a.concat([c]),h.concat([l]));case"Set":return c.size===l.size&&Sq(c.values(),l.values(),a.concat([c]),h.concat([l]));case"Arguments":case"Array":case"Object":case"Boolean":case"Number":case"String":case"Date":case"Error":case"RegExp":case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"ArrayBuffer":break;default:return!1}var m=TN(c);if(m.length!==TN(l).length)return!1;var g=a.concat([c]),y=h.concat([l]);for(f=m.length-1;f>=0;){var v=m[f];if(!ME(v,l)||!wN(l[v],c[v],g,y))return!1;f-=1}return!0}var FLe=Ru(function(l,a){return wN(l,a,[],[])});const bq=FLe;var kLe=Iu(function(l){return null!=l&&bq(l,ALe(l))});const Tq=kLe;function xb(c){return null==c}function Mf(c){return xb(c)||Tq(c)}function CN(c){return EE(String,c)}function DE(c){return EE(Object,c)}function Cq(c){return EE(Map,c)}function xq(c,l){return c!==l}function Eq(c,l){return JSON.stringify(c)===JSON.stringify(l)}function Mq(c){const l=new Map;for(const[a,h]of c)Cq(h)?l.set(a,Mq(h)):l.set(a,h);return l}function HLe(c){switch(!0){case Cq(c):return Mq(c);case DE(c)&&!Array.isArray(c):return dm({},c);default:return JSON.parse(JSON.stringify(c))}}function dm(...c){const l={};return c.map(a=>DE(a)?{...a}:{}).forEach(a=>{Object.keys(a).forEach(h=>{const d=a[h];l[h]=Array.isArray(d)?Array.from(d):DE(d)?dm(l[h]||{},d):d})}),l}function Aq(c=window){return!xb(c)}let AE,Iq,xN,EN;function Rq(c=!0){if(!c||!AE){const l=document&&document.querySelector("[ng-version]");AE=l?""+l.getAttribute("ng-version"):void 0}return AE}function $Le(c=!0){return c&&AE||(Iq=window?.angular?.version?.full),Iq}function Pq(c=!0){return c&&xN||(xN=window?.CDS?._react?.version?window.CDS._react.version:document.querySelector("[data-reactroot], [data-reactid]")?"unknown version":void 0),xN}function Lq(c=!0){if(!c||!EN){const l=document.querySelectorAll("*");let a;for(let h=0;h<l.length;h++)if(l[h].__vue__){a=l[h];break}EN=a?"unknown version":void 0}return EN}function fm(c){return c.replace(/[A-Z]/g,l=>"-"+l.toLowerCase())}function Fq(c){return c.charAt(0).toUpperCase()+c.slice(1)}const t2e=new class{constructor(){if(this.supports={js:!0},!document.body.hasAttribute("cds-supports")||"no-js"===document.body.getAttribute("cds-supports")){const c=fm(Object.keys(this.supports).reduce((l,a)=>`${l} ${this.supports[a]?a:"no-"+a}`,"")).trim();document.body.setAttribute("cds-supports",c)}}};function DN(c,l){switch(c){case 0:return function(){return l.apply(this,arguments)};case 1:return function(a){return l.apply(this,arguments)};case 2:return function(a,h){return l.apply(this,arguments)};case 3:return function(a,h,d){return l.apply(this,arguments)};case 4:return function(a,h,d,f){return l.apply(this,arguments)};case 5:return function(a,h,d,f,m){return l.apply(this,arguments)};case 6:return function(a,h,d,f,m,g){return l.apply(this,arguments)};case 7:return function(a,h,d,f,m,g,y){return l.apply(this,arguments)};case 8:return function(a,h,d,f,m,g,y,v){return l.apply(this,arguments)};case 9:return function(a,h,d,f,m,g,y,v,_){return l.apply(this,arguments)};case 10:return function(a,h,d,f,m,g,y,v,_,S){return l.apply(this,arguments)};default:throw new Error("First argument to _arity must be a non-negative integer no greater than ten")}}function Bq(c,l,a){return function(){for(var h=[],d=0,f=c,m=0;m<l.length||d<arguments.length;){var g;m<l.length&&(!Ef(l[m])||d>=arguments.length)?g=l[m]:(g=arguments[d],d+=1),h[m]=g,Ef(g)||(f-=1),m+=1}return f<=0?a.apply(this,h):DN(f,Bq(c,h,a))}}var n2e=Ru(function(l,a){return 1===l?Iu(a):DN(l,Bq(l,[],a))});const Uq=n2e,r2e=Number.isInteger||function(l){return l<<0===l};var i2e=Ru(function(l,a){var h=l<0?a.length+l:l;return SN(a)?a.charAt(h):a[h]});const s2e=i2e;var o2e=Ru(function(l,a){return l.map(function(h){for(var m,d=a,f=0;f<h.length;){if(null==d)return;d=r2e(m=h[f])?s2e(m,d):d[m],f+=1}return d})});const a2e=o2e;var l2e=Ru(function(l,a){return a2e([l],a)[0]});const c2e=l2e,h2e=Uq(2,(c,l)=>void 0!==c2e(c,l)),Gq=h2e({"@@functional/placeholder":!0},window);class pm{static log(...l){IN()&&AN()&&console.log(...l)}static warn(...l){IN()&&AN()&&console.warn(...l)}static error(...l){IN()&&AN()&&console.error(...l)}}function AN(){return!Gq(["jasmine"])}function IN(){return!window.CDS.environment.production}function zq(){Aq()&&(window.CDS=window.CDS||{_version:[],_react:{version:void 0},_supports:t2e.supports,_isStateProxied:!1,_state:{focusTrapItems:[],layerElements:[],i18nRegistry:{},elementRegistry:{},iconRegistry:{},motionRegistry:{}},environment:{production:!1},getDetails:Hq,logDetails:f2e},function(){const c="6.1.0";window.CDS._version.indexOf(c)<0&&(window.CDS._version.push(c),document.querySelector("body")?.setAttribute("cds-version",window.CDS._version.join(" "))),window.CDS._version.length>1&&pm.warn("Running more than one version of Clarity can cause unexpected issues. Please ensure only one version is loaded.")}(),window.CDS._isStateProxied||(window.CDS._isStateProxied=!0,window.CDS._state=new Proxy(window.CDS._state,{set:(c,l,a)=>{const h={key:l,prev:window.CDS._state[l],current:a};return c[l]=a,document.dispatchEvent(new CustomEvent("CDS_STATE_UPDATE",{detail:h})),!0}})))}function Hq(){return{versions:window.CDS._version,environment:window.CDS.environment,userAgent:navigator.userAgent,supports:window.CDS._supports,angularVersion:Rq(!1),angularJSVersion:$Le(!1),reactVersion:Pq(!1),vueVersion:Lq(!1),state:{...window.CDS._state,iconRegistry:Object.keys(window.CDS._state.iconRegistry),motionRegistry:Object.keys(window.CDS._state.motionRegistry),focusTrapRegistry:Object.keys(window.CDS._state.focusTrapItems.map(c=>c.focusTrapId))}}}function f2e(){pm.log(JSON.stringify(Hq(),null,2))}const RN=new class CLe{constructor(){this.subscriptions=[]}subscribe(l){const a=new wLe(l,this.subscriptions);return this.subscriptions.push(a),a}emit(l){this.subscriptions.forEach(a=>a.fn(l))}toEventObservable(){return this}};RN.listener=document.addEventListener("CDS_STATE_UPDATE",c=>RN.emit(c.detail));class ls{static get state(){return zq(),window.CDS._state}static getValue(l){return ls.state[l]}static setValue(l,a){ls.state[l]=a}static log(){pm.log(JSON.stringify(ls.state,null,2))}}ls.stateUpdates=RN.toEventObservable();const p2e=["unknown",{outline:'<circle class="cds-internal-dot-3" cx="31.1" cy="18" r="2.9"/><circle class="cds-internal-dot-2" cx="18" cy="18" r="2.9"/><circle class="cds-internal-dot-1" cx="4.9" cy="18" r="2.9"/>'}];class Rr{static get registry(){return{unknown:p2e[1],...ls.state.iconRegistry}}static addIcons(...l){ls.state.iconRegistry={...ls.state.iconRegistry,...Object.fromEntries(l.filter(([a])=>!Rr.registry[a]))}}static addAliases(...l){const a=l.filter(([h])=>Rr.registry[h]).flatMap(([h,d])=>d.map(f=>[f,Rr.registry[h]]));ls.state.iconRegistry={...ls.state.iconRegistry,...Object.fromEntries(a)}}static getIconNameFromShape(l){return l[0]}}const fv=["angle",{outline:'<path d="M29.52,22.52,18,10.6,6.48,22.52a1.7,1.7,0,0,0,2.45,2.36L18,15.49l9.08,9.39a1.7,1.7,0,0,0,2.45-2.36Z"/>'}],nl=["exclamation-circle",{outline:'<path d="M18,6A12,12,0,1,0,30,18,12,12,0,0,0,18,6Zm0,22A10,10,0,1,1,28,18,10,10,0,0,1,18,28Z"/><path d="M18,20.07a1.3,1.3,0,0,1-1.3-1.3v-6a1.3,1.3,0,1,1,2.6,0v6A1.3,1.3,0,0,1,18,20.07Z"/><circle cx="17.95" cy="23.02" r="1.5"/>',solid:'<path d="M18,6A12,12,0,1,0,30,18,12,12,0,0,0,18,6Zm-1.49,6a1.49,1.49,0,0,1,3,0v6.89a1.49,1.49,0,1,1-3,0ZM18,25.5a1.72,1.72,0,1,1,1.72-1.72A1.72,1.72,0,0,1,18,25.5Z"/>'}],rl=["check-circle",{outline:'<path d="M18,6A12,12,0,1,0,30,18,12,12,0,0,0,18,6Zm0,22A10,10,0,1,1,28,18,10,10,0,0,1,18,28Z"/><path d="M16.34,23.74l-5-5a1,1,0,0,1,1.41-1.41l3.59,3.59,6.78-6.78a1,1,0,0,1,1.41,1.41Z"/>',solid:'<path d="M30,18A12,12,0,1,1,18,6,12,12,0,0,1,30,18Zm-4.77-2.16a1.4,1.4,0,0,0-2-2l-6.77,6.77L13,17.16a1.4,1.4,0,0,0-2,2l5.45,5.45Z"/>'}],jq=["ellipsis-horizontal",{outline:'<circle cx="31.1" cy="18" r="2.9"/><circle cx="18" cy="18" r="2.9"/><circle cx="4.9" cy="18" r="2.9"/>',outlineBadged:'<circle cx="31.1" cy="18" r="2.9"/><circle cx="18" cy="18" r="2.9"/><circle cx="4.9" cy="18" r="2.9"/>'}],Eb=["window-close",{outline:'<path d="M19.41,18l7.29-7.29a1,1,0,0,0-1.41-1.41L18,16.59,10.71,9.29a1,1,0,0,0-1.41,1.41L16.59,18,9.29,25.29a1,1,0,1,0,1.41,1.41L18,19.41l7.29,7.29a1,1,0,0,0,1.41-1.41Z"/>'}],m2e=["event",{outline:'<path d="M16.17,25.86,10.81,20.5a1,1,0,0,1,1.41-1.41L16.17,23l8.64-8.64a1,1,0,0,1,1.41,1.41Z"/><path d="M32.25,6H29V8h3V30H4V8H7V6H3.75A1.78,1.78,0,0,0,2,7.81V30.19A1.78,1.78,0,0,0,3.75,32h28.5A1.78,1.78,0,0,0,34,30.19V7.81A1.78,1.78,0,0,0,32.25,6Z"/><path d="M10,10a1,1,0,0,0,1-1V3A1,1,0,0,0,9,3V9A1,1,0,0,0,10,10Z"/><path d="M26,10a1,1,0,0,0,1-1V3a1,1,0,0,0-2,0V9A1,1,0,0,0,26,10Z"/><rect x="13" y="6" width="10" height="2"/>',outlineAlerted:'<path d="M10,10a1,1,0,0,0,1-1V3A1,1,0,0,0,9,3V9A1,1,0,0,0,10,10Z"/><path d="M10.81,20.5l5.36,5.36L26.22,15.81a1,1,0,0,0,.23-.41H23.8L16.17,23l-3.94-3.94a1,1,0,0,0-1.41,1.41Z"/><polygon points="21.29 6 13 6 13 8 20.14 8 21.29 6"/><path d="M33.68,15.4H32V30H4V8H7V6H3.75A1.78,1.78,0,0,0,2,7.81V30.19A1.78,1.78,0,0,0,3.75,32h28.5A1.78,1.78,0,0,0,34,30.19V15.38Z"/>',outlineBadged:'<path d="M10.81,20.5l5.36,5.36L26.22,15.81a1,1,0,0,0-1.41-1.41L16.17,23l-3.94-3.94a1,1,0,0,0-1.41,1.41Z"/><path d="M10,10a1,1,0,0,0,1-1V3A1,1,0,0,0,9,3V9A1,1,0,0,0,10,10Z"/><path d="M32,13.22V30H4V8H7V6H3.75A1.78,1.78,0,0,0,2,7.81V30.19A1.78,1.78,0,0,0,3.75,32h28.5A1.78,1.78,0,0,0,34,30.19V12.34A7.45,7.45,0,0,1,32,13.22Z"/><path d="M22.5,6H13V8h9.78A7.49,7.49,0,0,1,22.5,6Z"/>',solid:'<path d="M10,10a1,1,0,0,0,1-1V3A1,1,0,0,0,9,3V9A1,1,0,0,0,10,10Z"/><path d="M26,10a1,1,0,0,0,1-1V3a1,1,0,0,0-2,0V9A1,1,0,0,0,26,10Z"/><path d="M32.25,6h-4V9a2.2,2.2,0,0,1-4.4,0V6H12.2V9A2.2,2.2,0,0,1,7.8,9V6h-4A1.78,1.78,0,0,0,2,7.81V30.19A1.78,1.78,0,0,0,3.75,32h28.5A1.78,1.78,0,0,0,34,30.19V7.81A1.78,1.78,0,0,0,32.25,6ZM25.94,16.58l-9.67,9.67L11,20.94A1.36,1.36,0,0,1,12.9,19l3.38,3.38L24,14.66a1.36,1.36,0,1,1,1.93,1.93Z"/>',solidAlerted:'<path d="M10,10a1,1,0,0,0,1-1V3A1,1,0,0,0,9,3V9A1,1,0,0,0,10,10Z"/><path d="M33.68,15.4H26.3a1.34,1.34,0,0,1-.36,1.18l-9.67,9.67L11,20.94A1.36,1.36,0,0,1,12.9,19l3.38,3.38,7-7h-1A3.68,3.68,0,0,1,19,9.89L21.29,6H12.2V9A2.2,2.2,0,0,1,7.8,9V6h-4A1.78,1.78,0,0,0,2,7.81V30.19A1.78,1.78,0,0,0,3.75,32h28.5A1.78,1.78,0,0,0,34,30.19V15.38Z"/>',solidBadged:'<path d="M10,10a1,1,0,0,0,1-1V3A1,1,0,0,0,9,3V9A1,1,0,0,0,10,10Z"/><path d="M30,13.5A7.5,7.5,0,0,1,22.5,6H12.2V9A2.2,2.2,0,0,1,7.8,9V6h-4A1.78,1.78,0,0,0,2,7.81V30.19A1.78,1.78,0,0,0,3.75,32h28.5A1.78,1.78,0,0,0,34,30.19V12.34A7.45,7.45,0,0,1,30,13.5Zm-4.06,3.08-9.67,9.67L11,20.94A1.36,1.36,0,0,1,12.9,19l3.38,3.38L24,14.66a1.36,1.36,0,1,1,1.93,1.93Z"/>'}],g2e=["calendar",{outline:'<path d="M32.25,6H29V8h3V30H4V8H7V6H3.75A1.78,1.78,0,0,0,2,7.81V30.19A1.78,1.78,0,0,0,3.75,32h28.5A1.78,1.78,0,0,0,34,30.19V7.81A1.78,1.78,0,0,0,32.25,6Z"/><rect x="8" y="14" width="2" height="2"/><rect x="14" y="14" width="2" height="2"/><rect x="20" y="14" width="2" height="2"/><rect x="26" y="14" width="2" height="2"/><rect x="8" y="19" width="2" height="2"/><rect x="14" y="19" width="2" height="2"/><rect x="20" y="19" width="2" height="2"/><rect x="26" y="19" width="2" height="2"/><rect x="8" y="24" width="2" height="2"/><rect" x="14" y="24" width="2" height="2"/><rect x="20" y="24" width="2" height="2"/><rect x="26" y="24" width="2" height="2"/><path d="M10,10a1,1,0,0,0,1-1V3A1,1,0,0,0,9,3V9A1,1,0,0,0,10,10Z"/><path d="M26,10a1,1,0,0,0,1-1V3a1,1,0,0,0-2,0V9A1,1,0,0,0,26,10Z"/><rect x="13" y="6" width="10" height="2"/>',outlineAlerted:'<path d="M33.68,15.4H32V30H4V8H7V6H3.75A1.78,1.78,0,0,0,2,7.81V30.19A1.78,1.78,0,0,0,3.75,32h28.5A1.78,1.78,0,0,0,34,30.19V15.38Z"/><rect x="8" y="14" width="2" height="2"/><rect x="14" y="14" width="2" height="2"/><rect x="8" y="19" width="2" height="2"/><rect x="14" y="19" width="2" height="2"/><rect x="20" y="19" width="2" height="2"/><rect x="26" y="19" width="2" height="2"/><rect x="8" y="24" width="2" height="2"/><rect x="14" y="24" width="2" height="2"/><rect x="20" y="24" width="2" height="2"/><rect x="26" y="24" width="2" height="2"/><path d="M10,10a1,1,0,0,0,1-1V3A1,1,0,0,0,9,3V9A1,1,0,0,0,10,10Z"/><polygon points="21.29 6 13 6 13 8 20.14 8 21.29 6"/>',outlineBadged:'<path d="M32,13.22V30H4V8H7V6H3.75A1.78,1.78,0,0,0,2,7.81V30.19A1.78,1.78,0,0,0,3.75,32h28.5A1.78,1.78,0,0,0,34,30.19V12.34A7.45,7.45,0,0,1,32,13.22Z"/><rect x="8" y="14" width="2" height="2"/><rect x="14" y="14" width="2" height="2"/><rect x="20" y="14" width="2" height="2"/><rect x="26" y="14" width="2" height="2"/><rect x="8" y="19" width="2" height="2"/><rect x="14" y="19" width="2" height="2"/><rect x="20" y="19" width="2" height="2"/><rect x="26" y="19" width="2" height="2"/><rect x="8" y="24" width="2" height="2"/><rect x="14" y="24" width="2" height="2"/><rect x="20" y="24" width="2" height="2"/><rect x="26" y="24" width="2" height="2"/><path d="M10,10a1,1,0,0,0,1-1V3A1,1,0,0,0,9,3V9A1,1,0,0,0,10,10Z"/><path d="M22.5,6H13V8h9.78A7.49,7.49,0,0,1,22.5,6Z"/>',solid:'<path d="M32.25,6h-4V9a2.2,2.2,0,1,1-4.4,0V6H12.2V9A2.2,2.2,0,0,1,7.8,9V6h-4A1.78,1.78,0,0,0,2,7.81V30.19A1.78,1.78,0,0,0,3.75,32h28.5A1.78,1.78,0,0,0,34,30.19V7.81A1.78,1.78,0,0,0,32.25,6ZM10,26H8V24h2Zm0-5H8V19h2Zm0-5H8V14h2Zm6,10H14V24h2Zm0-5H14V19h2Zm0-5H14V14h2Zm6,10H20V24h2Zm0-5H20V19h2Zm0-5H20V14h2Zm6,10H26V24h2Zm0-5H26V19h2Zm0-5H26V14h2Z"/><path d="M10,10a1,1,0,0,0,1-1V3A1,1,0,0,0,9,3V9A1,1,0,0,0,10,10Z"/><path d="M26,10a1,1,0,0,0,1-1V3a1,1,0,0,0-2,0V9A1,1,0,0,0,26,10Z"/>',solidAlerted:'<path d="M33.68,15.4H22.23A3.68,3.68,0,0,1,19,9.89L21.29,6H12.2V9A2.2,2.2,0,0,1,7.8,9V6h-4A1.78,1.78,0,0,0,2,7.81V30.19A1.78,1.78,0,0,0,3.75,32h28.5A1.78,1.78,0,0,0,34,30.19V15.38ZM10,26H8V24h2Zm0-5H8V19h2Zm0-5H8V14h2Zm6,10H14V24h2Zm0-5H14V19h2Zm0-5H14V14h2Zm6,10H20V24h2Zm0-5H20V19h2Zm6,5H26V24h2Zm0-5H26V19h2Z"/><path d="M10,10a1,1,0,0,0,1-1V3A1,1,0,0,0,9,3V9A1,1,0,0,0,10,10Z"/>',solidBadged:'<path d="M10,10a1,1,0,0,0,1-1V3A1,1,0,0,0,9,3V9A1,1,0,0,0,10,10Z"/><path d="M30,13.5A7.5,7.5,0,0,1,22.5,6H12.2V9A2.2,2.2,0,0,1,7.8,9V6h-4A1.78,1.78,0,0,0,2,7.81V30.19A1.78,1.78,0,0,0,3.75,32h28.5A1.78,1.78,0,0,0,34,30.19V12.34A7.45,7.45,0,0,1,30,13.5ZM10,26H8V24h2Zm0-5H8V19h2Zm0-5H8V14h2Zm6,10H14V24h2Zm0-5H14V19h2Zm0-5H14V14h2Zm6,10H20V24h2Zm0-5H20V19h2Zm0-5H20V14h2Zm6,10H26V24h2Zm0-5H26V19h2Zm0-5H26V14h2Z"/>'}],y2e=["eye-hide",{outline:'<path d="M25.19,20.4A6.78,6.78,0,0,0,25.62,18a6.86,6.86,0,0,0-6.86-6.86,6.79,6.79,0,0,0-2.37.43L18,13.23a4.78,4.78,0,0,1,.74-.06A4.87,4.87,0,0,1,23.62,18a4.79,4.79,0,0,1-.06.74Z"/><path d="M34.29,17.53c-3.37-6.23-9.28-10-15.82-10a16.82,16.82,0,0,0-5.24.85L14.84,10a14.78,14.78,0,0,1,3.63-.47c5.63,0,10.75,3.14,13.8,8.43a17.75,17.75,0,0,1-4.37,5.1l1.42,1.42a19.93,19.93,0,0,0,5-6l.26-.48Z"/><path d="M4.87,5.78l4.46,4.46a19.52,19.52,0,0,0-6.69,7.29L2.38,18l.26.48c3.37,6.23,9.28,10,15.82,10a16.93,16.93,0,0,0,7.37-1.69l5,5,1.75-1.5-26-26Zm9.75,9.75,6.65,6.65a4.81,4.81,0,0,1-2.5.72A4.87,4.87,0,0,1,13.9,18,4.81,4.81,0,0,1,14.62,15.53Zm-1.45-1.45a6.85,6.85,0,0,0,9.55,9.55l1.6,1.6a14.91,14.91,0,0,1-5.86,1.2c-5.63,0-10.75-3.14-13.8-8.43a17.29,17.29,0,0,1,6.12-6.3Z"/>',solid:'<path d="M18.37,11.17A6.79,6.79,0,0,0,16,11.6l8.8,8.8A6.78,6.78,0,0,0,25.23,18,6.86,6.86,0,0,0,18.37,11.17Z"/><path d="M34.29,17.53c-3.37-6.23-9.28-10-15.82-10a16.82,16.82,0,0,0-5.24.85L14.84,10a14.78,14.78,0,0,1,3.63-.47c5.63,0,10.75,3.14,13.8,8.43a17.75,17.75,0,0,1-4.37,5.1l1.42,1.42a19.93,19.93,0,0,0,5-6l.26-.48Z"/><path d="M4.87,5.78l4.46,4.46a19.52,19.52,0,0,0-6.69,7.29L2.38,18l.26.48c3.37,6.23,9.28,10,15.82,10a16.93,16.93,0,0,0,7.37-1.69l5,5,1.75-1.5-26-26Zm8.3,8.3a6.85,6.85,0,0,0,9.55,9.55l1.6,1.6a14.91,14.91,0,0,1-5.86,1.2c-5.63,0-10.75-3.14-13.8-8.43a17.29,17.29,0,0,1,6.12-6.3Z"/>'}],v2e=["eye",{outline:'<path d="M33.62,17.53c-3.37-6.23-9.28-10-15.82-10S5.34,11.3,2,17.53L1.72,18l.26.48c3.37,6.23,9.28,10,15.82,10s12.46-3.72,15.82-10l.26-.48ZM17.8,26.43C12.17,26.43,7,23.29,4,18c3-5.29,8.17-8.43,13.8-8.43S28.54,12.72,31.59,18C28.54,23.29,23.42,26.43,17.8,26.43Z"/><path d="M18.09,11.17A6.86,6.86,0,1,0,25,18,6.86,6.86,0,0,0,18.09,11.17Zm0,11.72A4.86,4.86,0,1,1,23,18,4.87,4.87,0,0,1,18.09,22.89Z"/>',solid:'<path d="M33.62,17.53c-3.37-6.23-9.28-10-15.82-10S5.34,11.3,2,17.53L1.72,18l.26.48c3.37,6.23,9.28,10,15.82,10s12.46-3.72,15.82-10l.26-.48ZM17.8,26.43C12.17,26.43,7,23.29,4,18c3-5.29,8.17-8.43,13.8-8.43S28.54,12.72,31.59,18C28.54,23.29,23.42,26.43,17.8,26.43Z"/><circle cx="18.09" cy="18.03" r="6.86"/>'}],_2e=["ellipsis-vertical",{outline:'<circle cx="18" cy="4.9" r="2.9"/><circle cx="18" cy="18" r="2.9"/><circle cx="18" cy="31.1" r="2.9"/>',outlineBadged:'<circle cx="18" cy="4.9" r="2.9"/><circle cx="18" cy="18" r="2.9"/><circle cx="18" cy="31.1" r="2.9"/>'}],S2e=["view-columns",{outline:'<path d="M31,5H5A2,2,0,0,0,3,7V29a2,2,0,0,0,2,2H31a2,2,0,0,0,2-2V7A2,2,0,0,0,31,5ZM13,29H5V7h8Zm10,0H15V7h8Z"/>'}],b2e=["arrow",{outline:'<path d="M27.66,15.61,18,6,8.34,15.61A1,1,0,1,0,9.75,17L17,9.81V28.94a1,1,0,1,0,2,0V9.81L26.25,17a1,1,0,0,0,1.41-1.42Z"/>'}],Wq=["times",{outline:'<path d="M19.41,18l8.29-8.29a1,1,0,0,0-1.41-1.41L18,16.59,9.71,8.29A1,1,0,0,0,8.29,9.71L16.59,18,8.29,26.29a1,1,0,1,0,1.41,1.41L18,19.41l8.29,8.29a1,1,0,0,0,1.41-1.41Z"/>'}],T2e=["step-forward-2",{outline:'<path d="M7.08,6.52a1.68,1.68,0,0,0,0,2.4L16.51,18,7.12,27.08a1.7,1.7,0,0,0,2.36,2.44h0L21.4,18,9.48,6.47A1.69,1.69,0,0,0,7.08,6.52Z"/><path d="M26.49,5a1.7,1.7,0,0,0-1.7,1.7V29.3a1.7,1.7,0,0,0,3.4,0V6.7A1.7,1.7,0,0,0,26.49,5Z"/>'}],Xq=["angle-double",{outline:'<path d="M29,19.41a1,1,0,0,1-.71-.29L18,8.83,7.71,19.12a1,1,0,0,1-1.41-1.41L18,6,29.71,17.71A1,1,0,0,1,29,19.41Z"/><path d="M29,30.41a1,1,0,0,1-.71-.29L18,19.83,7.71,30.12a1,1,0,0,1-1.41-1.41L18,17,29.71,28.71A1,1,0,0,1,29,30.41Z"/>'}],w2e=["filter-grid-circle",{outline:'<path d="M15,25.86l2,1V20.27a1,1,0,0,0-.29-.7L10.23,13H25.79l-6.47,6.57a1,1,0,0,0-.29.7L19,28l2,1V20.68L27.58,14A1.46,1.46,0,0,0,28,13V12a1,1,0,0,0-1-1H9a1,1,0,0,0-1,1v1a1.46,1.46,0,0,0,.42,1L15,20.68Z"/><path d="M18,2A16,16,0,1,0,34,18,16,16,0,0,0,18,2Zm0,30A14,14,0,1,1,32,18,14,14,0,0,1,18,32Z"/>',solid:'<path d="M18,2A16,16,0,1,0,34,18,16,16,0,0,0,18,2Zm0,30A14,14,0,1,1,32,18,14,14,0,0,1,18,32Z"/><path d="M8,11v1.12a.5.5,0,0,0,.15.35l7.28,7.36a.5.5,0,0,1,.15.35v6.89a.5.5,0,0,0,.28.45l3.95,1.41a.5.5,0,0,0,.72-.45l0-8.39a.54.54,0,0,1,.18-.35l7.12-7.25a.5.5,0,0,0,.15-.35V11Z"/>'}],C2e=["filter-grid",{outline:'<path d="M15,25.86l2,1V20.27a1,1,0,0,0-.29-.7L10.23,13H25.79l-6.47,6.57a1,1,0,0,0-.29.7L19,28l2,1V20.68L27.58,14A1.46,1.46,0,0,0,28,13V12a1,1,0,0,0-1-1H9a1,1,0,0,0-1,1v1a1.46,1.46,0,0,0,.42,1L15,20.68Z"/>',solid:'<path d="M8,11v1.12a.5.5,0,0,0,.15.35l7.28,7.36a.5.5,0,0,1,.15.35v6.89a.5.5,0,0,0,.28.45l3.95,1.41a.5.5,0,0,0,.72-.45l0-8.39a.54.54,0,0,1,.18-.35l7.12-7.25a.5.5,0,0,0,.15-.35V11Z"/>'}],qq=["info-circle",{outline:'<circle cx="17.93" cy="11.9" r="1.4"/><path d="M21,23H19V15H16a1,1,0,0,0,0,2h1v6H15a1,1,0,1,0,0,2h6a1,1,0,0,0,0-2Z"/><path d="M18,6A12,12,0,1,0,30,18,12,12,0,0,0,18,6Zm0,22A10,10,0,1,1,28,18,10,10,0,0,1,18,28Z"/>',solid:'<path d="M18,6A12,12,0,1,0,30,18,12,12,0,0,0,18,6Zm-2,5.15a2,2,0,1,1,2,2A2,2,0,0,1,15.9,11.15ZM23,24a1,1,0,0,1-1,1H15a1,1,0,1,1,0-2h2V17H16a1,1,0,0,1,0-2h4v8h2A1,1,0,0,1,23,24Z"/>'}],x2e=["exclamation-triangle",{outline:'<path d="M18,21.32a1.3,1.3,0,0,0,1.3-1.3V14a1.3,1.3,0,1,0-2.6,0v6A1.3,1.3,0,0,0,18,21.32Z"/><circle cx="17.95" cy="24.27" r="1.5"/><path d="M30.33,25.54,20.59,7.6a3,3,0,0,0-5.27,0L5.57,25.54A3,3,0,0,0,8.21,30H27.69a3,3,0,0,0,2.64-4.43Zm-1.78,1.94a1,1,0,0,1-.86.49H8.21a1,1,0,0,1-.88-1.48L17.07,8.55a1,1,0,0,1,1.76,0l9.74,17.94A1,1,0,0,1,28.55,27.48Z"/>',solid:'<path d="M30.33,25.54,20.59,7.6a3,3,0,0,0-5.27,0L5.57,25.54A3,3,0,0,0,8.21,30H27.69a3,3,0,0,0,2.64-4.43ZM16.46,12.74a1.49,1.49,0,0,1,3,0v6.89a1.49,1.49,0,1,1-3,0ZM18,26.25a1.72,1.72,0,1,1,1.72-1.72A1.72,1.72,0,0,1,18,26.25Z"/>'}],E2e=["circle",{outline:'<path d="M18,34A16,16,0,1,1,34,18,16,16,0,0,1,18,34ZM18,4A14,14,0,1,0,32,18,14,14,0,0,0,18,4Z"/>',solid:'<path d="M18,34A16,16,0,1,1,34,18,16,16,0,0,1,18,34Z"/>'}],M2e=["dot-circle",{outline:'<path d="M18,11a7,7,0,1,1-7,7,7,7,0,0,1,7-7"/><path d="M18,34A16,16,0,1,1,34,18,16,16,0,0,1,18,34ZM18,4A14,14,0,1,0,32,18,14,14,0,0,0,18,4Z"/>'}],$q=["error-standard",{outline:'<circle cx="18" cy="26.06" r="1.33"/><path d="M18,22.61a1,1,0,0,1-1-1v-12a1,1,0,1,1,2,0v12A1,1,0,0,1,18,22.61Z"/><path d="M18,34A16,16,0,1,1,34,18,16,16,0,0,1,18,34ZM18,4A14,14,0,1,0,32,18,14,14,0,0,0,18,4Z"/>',solid:'<path d="M18,2.1a16,16,0,1,0,16,16A16,16,0,0,0,18,2.1ZM16.6,8.8a1.4,1.4,0,0,1,2.8,0v12a1.4,1.4,0,0,1-2.8,0ZM18,28.6a1.8,1.8,0,1,1,1.8-1.8A1.8,1.8,0,0,1,18,28.6Z"/>'}],D2e=["success-standard",{outline:'<path d="M18,2A16,16,0,1,0,34,18,16,16,0,0,0,18,2Zm0,30A14,14,0,1,1,32,18,14,14,0,0,1,18,32Z"/><path d="M28,12.1a1,1,0,0,0-1.41,0L15.49,23.15l-6-6A1,1,0,0,0,8,18.53L15.49,26,28,13.52A1,1,0,0,0,28,12.1Z"/>',solid:'<path d="M18,2A16,16,0,1,0,34,18,16,16,0,0,0,18,2ZM28.45,12.63,15.31,25.76,7.55,18a1.4,1.4,0,0,1,2-2l5.78,5.78L26.47,10.65a1.4,1.4,0,1,1,2,2Z"/>'}];class N2e extends O{constructor(l,a){super()}schedule(l,a=0){return this}}class IE extends N2e{constructor(l,a){super(l,a),this.scheduler=l,this.work=a,this.pending=!1}schedule(l,a=0){if(this.closed)return this;this.state=l;const h=this.id,d=this.scheduler;return null!=h&&(this.id=this.recycleAsyncId(d,h,a)),this.pending=!0,this.delay=a,this.id=this.id||this.requestAsyncId(d,this.id,a),this}requestAsyncId(l,a,h=0){return setInterval(l.flush.bind(l,this),h)}recycleAsyncId(l,a,h=0){if(null!==h&&this.delay===h&&!1===this.pending)return a;clearInterval(a)}execute(l,a){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const h=this._execute(l,a);if(h)return h;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(l,a){let d,h=!1;try{this.work(l)}catch(f){h=!0,d=!!f&&f||new Error(f)}if(h)return this.unsubscribe(),d}_unsubscribe(){const l=this.id,a=this.scheduler,h=a.actions,d=h.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==d&&h.splice(d,1),null!=l&&(this.id=this.recycleAsyncId(a,l,null)),this.delay=null}}let Yq=(()=>{class c{constructor(a,h=c.now){this.SchedulerAction=a,this.now=h}schedule(a,h=0,d){return new this.SchedulerAction(this,a).schedule(d,h)}}return c.now=()=>Date.now(),c})();class Ac extends Yq{constructor(l,a=Yq.now){super(l,()=>Ac.delegate&&Ac.delegate!==this?Ac.delegate.now():a()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(l,a=0,h){return Ac.delegate&&Ac.delegate!==this?Ac.delegate.schedule(l,a,h):super.schedule(l,a,h)}flush(l){const{actions:a}=this;if(this.active)return void a.push(l);let h;this.active=!0;do{if(h=l.execute(l.state,l.delay))break}while(l=a.shift());if(this.active=!1,h){for(;l=a.shift();)l.unsubscribe();throw h}}}const pv=new Ac(IE);function mv(c,l=pv){return a=>a.lift(new F2e(c,l))}class F2e{constructor(l,a){this.dueTime=l,this.scheduler=a}call(l,a){return a.subscribe(new k2e(l,this.dueTime,this.scheduler))}}class k2e extends ee{constructor(l,a,h){super(l),this.dueTime=a,this.scheduler=h,this.debouncedSubscription=null,this.lastValue=null,this.hasValue=!1}_next(l){this.clearDebounce(),this.lastValue=l,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(V2e,this.dueTime,this))}_complete(){this.debouncedNext(),this.destination.complete()}debouncedNext(){if(this.clearDebounce(),this.hasValue){const{lastValue:l}=this;this.lastValue=null,this.hasValue=!1,this.destination.next(l)}}clearDebounce(){const l=this.debouncedSubscription;null!==l&&(this.remove(l),l.unsubscribe(),this.debouncedSubscription=null)}}function V2e(c){c.debouncedNext()}function Nh(c){return l=>l.lift(new B2e(c))}class B2e{constructor(l){this.notifier=l}call(l,a){const h=new U2e(l),d=ug(this.notifier,new lg(h));return d&&!h.seenValue?(h.add(d),a.subscribe(h)):h}}class U2e extends cg{constructor(l){super(l),this.seenValue=!1}notifyNext(){this.seenValue=!0,this.complete()}notifyComplete(){}}function Pu(c,l,a,h){return Lt(a)&&(h=a,a=void 0),h?Pu(c,l,a).pipe(ve(d=>Ee(d)?h(...d):h(d))):new wt(d=>{Zq(c,l,function f(m){d.next(arguments.length>1?Array.prototype.slice.call(arguments):m)},d,a)})}function Zq(c,l,a,h,d){let f;if(function H2e(c){return c&&"function"==typeof c.addEventListener&&"function"==typeof c.removeEventListener}(c)){const m=c;c.addEventListener(l,a,d),f=()=>m.removeEventListener(l,a,d)}else if(function z2e(c){return c&&"function"==typeof c.on&&"function"==typeof c.off}(c)){const m=c;c.on(l,a),f=()=>m.off(l,a)}else if(function G2e(c){return c&&"function"==typeof c.addListener&&"function"==typeof c.removeListener}(c)){const m=c;c.addListener(l,a),f=()=>m.removeListener(l,a)}else{if(!c||!c.length)throw new TypeError("Invalid event target");for(let m=0,g=c.length;m<g;m++)Zq(c[m],l,a,h,d)}h.add(f)}const X2e=new class W2e extends Ac{}(class j2e extends IE{constructor(l,a){super(l,a),this.scheduler=l,this.work=a}schedule(l,a=0){return a>0?super.schedule(l,a):(this.delay=a,this.state=l,this.scheduler.flush(this),this)}execute(l,a){return a>0||this.closed?super.execute(l,a):this._execute(l,a)}requestAsyncId(l,a,h=0){return null!==h&&h>0||null===h&&this.delay>0?super.requestAsyncId(l,a,h):l.flush(this)}});class Ra{constructor(l,a,h){this.kind=l,this.value=a,this.error=h,this.hasValue="N"===l}observe(l){switch(this.kind){case"N":return l.next&&l.next(this.value);case"E":return l.error&&l.error(this.error);case"C":return l.complete&&l.complete()}}do(l,a,h){switch(this.kind){case"N":return l&&l(this.value);case"E":return a&&a(this.error);case"C":return h&&h()}}accept(l,a,h){return l&&"function"==typeof l.next?this.observe(l):this.do(l,a,h)}toObservable(){switch(this.kind){case"N":return St(this.value);case"E":return ly(this.error);case"C":return uC()}throw new Error("unexpected notification kind value")}static createNext(l){return typeof l<"u"?new Ra("N",l):Ra.undefinedValueNotification}static createError(l){return new Ra("E",void 0,l)}static createComplete(){return Ra.completeNotification}}Ra.completeNotification=new Ra("C"),Ra.undefinedValueNotification=new Ra("N",void 0);class RE extends ee{constructor(l,a,h=0){super(l),this.scheduler=a,this.delay=h}static dispatch(l){const{notification:a,destination:h}=l;a.observe(h),this.unsubscribe()}scheduleMessage(l){this.destination.add(this.scheduler.schedule(RE.dispatch,this.delay,new $2e(l,this.destination)))}_next(l){this.scheduleMessage(Ra.createNext(l))}_error(l){this.scheduleMessage(Ra.createError(l)),this.unsubscribe()}_complete(){this.scheduleMessage(Ra.createComplete()),this.unsubscribe()}}class $2e{constructor(l,a){this.notification=l,this.destination=a}}class PN extends Ke{constructor(l=Number.POSITIVE_INFINITY,a=Number.POSITIVE_INFINITY,h){super(),this.scheduler=h,this._events=[],this._infiniteTimeWindow=!1,this._bufferSize=l<1?1:l,this._windowTime=a<1?1:a,a===Number.POSITIVE_INFINITY?(this._infiniteTimeWindow=!0,this.next=this.nextInfiniteTimeWindow):this.next=this.nextTimeWindow}nextInfiniteTimeWindow(l){if(!this.isStopped){const a=this._events;a.push(l),a.length>this._bufferSize&&a.shift()}super.next(l)}nextTimeWindow(l){this.isStopped||(this._events.push(new Y2e(this._getNow(),l)),this._trimBufferThenGetEvents()),super.next(l)}_subscribe(l){const a=this._infiniteTimeWindow,h=a?this._events:this._trimBufferThenGetEvents(),d=this.scheduler,f=h.length;let m;if(this.closed)throw new Sr;if(this.isStopped||this.hasError?m=O.EMPTY:(this.observers.push(l),m=new xr(this,l)),d&&l.add(l=new RE(l,d)),a)for(let g=0;g<f&&!l.closed;g++)l.next(h[g]);else for(let g=0;g<f&&!l.closed;g++)l.next(h[g].value);return this.hasError?l.error(this.thrownError):this.isStopped&&l.complete(),m}_getNow(){return(this.scheduler||X2e).now()}_trimBufferThenGetEvents(){const l=this._getNow(),a=this._bufferSize,h=this._windowTime,d=this._events,f=d.length;let m=0;for(;m<f&&!(l-d[m].time<h);)m++;return f>a&&(m=Math.max(m,f-a)),m>0&&d.splice(0,m),d}}class Y2e{constructor(l,a){this.time=l,this.value=a}}class Qq{}const Fh="*";function il(c,l){return{type:7,name:c,definitions:l,options:{}}}function fo(c,l=null){return{type:4,styles:l,timings:c}}function Jq(c,l=null){return{type:2,steps:c,options:l}}function gr(c){return{type:6,styles:c,offset:null}}function PE(c,l,a){return{type:0,name:c,styles:l,options:a}}function xs(c,l,a=null){return{type:1,expr:c,animation:l,options:a}}function e$(c){Promise.resolve(null).then(c)}class Mb{constructor(l=0,a=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=l+a}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(l=>l()),this._onDoneFns=[])}onStart(l){this._originalOnStartFns.push(l),this._onStartFns.push(l)}onDone(l){this._originalOnDoneFns.push(l),this._onDoneFns.push(l)}onDestroy(l){this._onDestroyFns.push(l)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){e$(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(l=>l()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(l=>l()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(l){this._position=this.totalTime?l*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(l){const a="start"==l?this._onStartFns:this._onDoneFns;a.forEach(h=>h()),a.length=0}}class t${constructor(l){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=l;let a=0,h=0,d=0;const f=this.players.length;0==f?e$(()=>this._onFinish()):this.players.forEach(m=>{m.onDone(()=>{++a==f&&this._onFinish()}),m.onDestroy(()=>{++h==f&&this._onDestroy()}),m.onStart(()=>{++d==f&&this._onStart()})}),this.totalTime=this.players.reduce((m,g)=>Math.max(m,g.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(l=>l()),this._onDoneFns=[])}init(){this.players.forEach(l=>l.init())}onStart(l){this._onStartFns.push(l)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(l=>l()),this._onStartFns=[])}onDone(l){this._onDoneFns.push(l)}onDestroy(l){this._onDestroyFns.push(l)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(l=>l.play())}pause(){this.players.forEach(l=>l.pause())}restart(){this.players.forEach(l=>l.restart())}finish(){this._onFinish(),this.players.forEach(l=>l.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(l=>l.destroy()),this._onDestroyFns.forEach(l=>l()),this._onDestroyFns=[])}reset(){this.players.forEach(l=>l.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(l){const a=l*this.totalTime;this.players.forEach(h=>{const d=h.totalTime?Math.min(1,a/h.totalTime):1;h.setPosition(d)})}getPosition(){const l=this.players.reduce((a,h)=>null===a||h.totalTime>a.totalTime?h:a,null);return null!=l?l.getPosition():0}beforeDestroy(){this.players.forEach(l=>{l.beforeDestroy&&l.beforeDestroy()})}triggerCallback(l){const a="start"==l?this._onStartFns:this._onDoneFns;a.forEach(h=>h()),a.length=0}}function LE(...c){if(1===c.length){const l=c[0];if(Ee(l))return OE(l,null);if(C(l)&&Object.getPrototypeOf(l)===Object.prototype){const a=Object.keys(l);return OE(a.map(h=>l[h]),a)}}if("function"==typeof c[c.length-1]){const l=c.pop();return OE(c=1===c.length&&Ee(c[0])?c[0]:c,null).pipe(ve(a=>l(...a)))}return OE(c,null)}function OE(c,l){return new wt(a=>{const h=c.length;if(0===h)return void a.complete();const d=new Array(h);let f=0,m=0;for(let g=0;g<h;g++){const y=Ls(c[g]);let v=!1;a.add(y.subscribe({next:_=>{v||(v=!0,m++),d[g]=_},error:_=>a.error(_),complete:()=>{f++,(f===h||!v)&&(m===h&&a.next(l?l.reduce((_,S,b)=>(_[S]=d[b],_),{}):d),a.complete())}}))}})}let n$=(()=>{class c{constructor(a,h){this._renderer=a,this._elementRef=h,this.onChange=d=>{},this.onTouched=()=>{}}setProperty(a,h){this._renderer.setProperty(this._elementRef.nativeElement,a,h)}registerOnTouched(a){this.onTouched=a}registerOnChange(a){this.onChange=a}setDisabledState(a){this.setProperty("disabled",a)}}return c.\u0275fac=function(a){return new(a||c)(N(Fn),N(zt))},c.\u0275dir=We({type:c}),c})(),mm=(()=>{class c extends n${}return c.\u0275fac=function(){let l;return function(h){return(l||(l=Ri(c)))(h||c)}}(),c.\u0275dir=We({type:c,features:[Qt]}),c})();const Lu=new Vt("NgValueAccessor"),Q2e={provide:Lu,useExisting:fi(()=>gv),multi:!0};let gv=(()=>{class c extends mm{writeValue(a){this.setProperty("checked",a)}}return c.\u0275fac=function(){let l;return function(h){return(l||(l=Ri(c)))(h||c)}}(),c.\u0275dir=We({type:c,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(a,h){1&a&&Me("change",function(f){return h.onChange(f.target.checked)})("blur",function(){return h.onTouched()})},features:[Mt([Q2e]),Qt]}),c})();const J2e={provide:Lu,useExisting:fi(()=>Gl),multi:!0},tOe=new Vt("CompositionEventMode");let Gl=(()=>{class c extends n${constructor(a,h,d){super(a,h),this._compositionMode=d,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function eOe(){const c=cu()?cu().getUserAgent():"";return/android (\d+)/.test(c.toLowerCase())}())}writeValue(a){this.setProperty("value",a??"")}_handleInput(a){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(a)}_compositionStart(){this._composing=!0}_compositionEnd(a){this._composing=!1,this._compositionMode&&this.onChange(a)}}return c.\u0275fac=function(a){return new(a||c)(N(Fn),N(zt),N(tOe,8))},c.\u0275dir=We({type:c,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(a,h){1&a&&Me("input",function(f){return h._handleInput(f.target.value)})("blur",function(){return h.onTouched()})("compositionstart",function(){return h._compositionStart()})("compositionend",function(f){return h._compositionEnd(f.target.value)})},features:[Mt([J2e]),Qt]}),c})();function Df(c){return null==c||("string"==typeof c||Array.isArray(c))&&0===c.length}function r$(c){return null!=c&&"number"==typeof c.length}const Oo=new Vt("NgValidators"),Af=new Vt("NgAsyncValidators"),rOe=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class Db{static min(l){return i$(l)}static max(l){return s$(l)}static required(l){return function o$(c){return Df(c.value)?{required:!0}:null}(l)}static requiredTrue(l){return function a$(c){return!0===c.value?null:{required:!0}}(l)}static email(l){return function l$(c){return Df(c.value)||rOe.test(c.value)?null:{email:!0}}(l)}static minLength(l){return function c$(c){return l=>Df(l.value)||!r$(l.value)?null:l.value.length<c?{minlength:{requiredLength:c,actualLength:l.value.length}}:null}(l)}static maxLength(l){return function u$(c){return l=>r$(l.value)&&l.value.length>c?{maxlength:{requiredLength:c,actualLength:l.value.length}}:null}(l)}static pattern(l){return function h$(c){if(!c)return NE;let l,a;return"string"==typeof c?(a="","^"!==c.charAt(0)&&(a+="^"),a+=c,"$"!==c.charAt(c.length-1)&&(a+="$"),l=new RegExp(a)):(a=c.toString(),l=c),h=>{if(Df(h.value))return null;const d=h.value;return l.test(d)?null:{pattern:{requiredPattern:a,actualValue:d}}}}(l)}static nullValidator(l){return null}static compose(l){return y$(l)}static composeAsync(l){return v$(l)}}function i$(c){return l=>{if(Df(l.value)||Df(c))return null;const a=parseFloat(l.value);return!isNaN(a)&&a<c?{min:{min:c,actual:l.value}}:null}}function s$(c){return l=>{if(Df(l.value)||Df(c))return null;const a=parseFloat(l.value);return!isNaN(a)&&a>c?{max:{max:c,actual:l.value}}:null}}function NE(c){return null}function d$(c){return null!=c}function f$(c){return A0(c)?Ls(c):c}function p$(c){let l={};return c.forEach(a=>{l=null!=a?{...l,...a}:l}),0===Object.keys(l).length?null:l}function m$(c,l){return l.map(a=>a(c))}function g$(c){return c.map(l=>function iOe(c){return!c.validate}(l)?l:a=>l.validate(a))}function y$(c){if(!c)return null;const l=c.filter(d$);return 0==l.length?null:function(a){return p$(m$(a,l))}}function ON(c){return null!=c?y$(g$(c)):null}function v$(c){if(!c)return null;const l=c.filter(d$);return 0==l.length?null:function(a){return LE(m$(a,l).map(f$)).pipe(ve(p$))}}function NN(c){return null!=c?v$(g$(c)):null}function _$(c,l){return null===c?[l]:Array.isArray(c)?[...c,l]:[c,l]}function S$(c){return c._rawValidators}function b$(c){return c._rawAsyncValidators}function FN(c){return c?Array.isArray(c)?c:[c]:[]}function FE(c,l){return Array.isArray(c)?c.includes(l):c===l}function T$(c,l){const a=FN(l);return FN(c).forEach(d=>{FE(a,d)||a.push(d)}),a}function w$(c,l){return FN(l).filter(a=>!FE(c,a))}class C${constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(l){this._rawValidators=l||[],this._composedValidatorFn=ON(this._rawValidators)}_setAsyncValidators(l){this._rawAsyncValidators=l||[],this._composedAsyncValidatorFn=NN(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(l){this._onDestroyCallbacks.push(l)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(l=>l()),this._onDestroyCallbacks=[]}reset(l){this.control&&this.control.reset(l)}hasError(l,a){return!!this.control&&this.control.hasError(l,a)}getError(l,a){return this.control?this.control.getError(l,a):null}}class ha extends C${get formDirective(){return null}get path(){return null}}class da extends C${constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class x${constructor(l){this._cd=l}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let Pa=(()=>{class c extends x${constructor(a){super(a)}}return c.\u0275fac=function(a){return new(a||c)(N(da,2))},c.\u0275dir=We({type:c,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(a,h){2&a&&st("ng-untouched",h.isUntouched)("ng-touched",h.isTouched)("ng-pristine",h.isPristine)("ng-dirty",h.isDirty)("ng-valid",h.isValid)("ng-invalid",h.isInvalid)("ng-pending",h.isPending)},features:[Qt]}),c})(),kE=(()=>{class c extends x${constructor(a){super(a)}}return c.\u0275fac=function(a){return new(a||c)(N(ha,10))},c.\u0275dir=We({type:c,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(a,h){2&a&&st("ng-untouched",h.isUntouched)("ng-touched",h.isTouched)("ng-pristine",h.isPristine)("ng-dirty",h.isDirty)("ng-valid",h.isValid)("ng-invalid",h.isInvalid)("ng-pending",h.isPending)("ng-submitted",h.isSubmitted)},features:[Qt]}),c})();const Ab="VALID",BE="INVALID",yv="PENDING",Ib="DISABLED";function UN(c){return(UE(c)?c.validators:c)||null}function M$(c){return Array.isArray(c)?ON(c):c||null}function GN(c,l){return(UE(l)?l.asyncValidators:c)||null}function D$(c){return Array.isArray(c)?NN(c):c||null}function UE(c){return null!=c&&!Array.isArray(c)&&"object"==typeof c}class R${constructor(l,a){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=l,this._rawAsyncValidators=a,this._composedValidatorFn=M$(this._rawValidators),this._composedAsyncValidatorFn=D$(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(l){this._rawValidators=this._composedValidatorFn=l}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(l){this._rawAsyncValidators=this._composedAsyncValidatorFn=l}get parent(){return this._parent}get valid(){return this.status===Ab}get invalid(){return this.status===BE}get pending(){return this.status==yv}get disabled(){return this.status===Ib}get enabled(){return this.status!==Ib}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(l){this._rawValidators=l,this._composedValidatorFn=M$(l)}setAsyncValidators(l){this._rawAsyncValidators=l,this._composedAsyncValidatorFn=D$(l)}addValidators(l){this.setValidators(T$(l,this._rawValidators))}addAsyncValidators(l){this.setAsyncValidators(T$(l,this._rawAsyncValidators))}removeValidators(l){this.setValidators(w$(l,this._rawValidators))}removeAsyncValidators(l){this.setAsyncValidators(w$(l,this._rawAsyncValidators))}hasValidator(l){return FE(this._rawValidators,l)}hasAsyncValidator(l){return FE(this._rawAsyncValidators,l)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(l={}){this.touched=!0,this._parent&&!l.onlySelf&&this._parent.markAsTouched(l)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(l=>l.markAllAsTouched())}markAsUntouched(l={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(a=>{a.markAsUntouched({onlySelf:!0})}),this._parent&&!l.onlySelf&&this._parent._updateTouched(l)}markAsDirty(l={}){this.pristine=!1,this._parent&&!l.onlySelf&&this._parent.markAsDirty(l)}markAsPristine(l={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(a=>{a.markAsPristine({onlySelf:!0})}),this._parent&&!l.onlySelf&&this._parent._updatePristine(l)}markAsPending(l={}){this.status=yv,!1!==l.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!l.onlySelf&&this._parent.markAsPending(l)}disable(l={}){const a=this._parentMarkedDirty(l.onlySelf);this.status=Ib,this.errors=null,this._forEachChild(h=>{h.disable({...l,onlySelf:!0})}),this._updateValue(),!1!==l.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...l,skipPristineCheck:a}),this._onDisabledChange.forEach(h=>h(!0))}enable(l={}){const a=this._parentMarkedDirty(l.onlySelf);this.status=Ab,this._forEachChild(h=>{h.enable({...l,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:l.emitEvent}),this._updateAncestors({...l,skipPristineCheck:a}),this._onDisabledChange.forEach(h=>h(!1))}_updateAncestors(l){this._parent&&!l.onlySelf&&(this._parent.updateValueAndValidity(l),l.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(l){this._parent=l}getRawValue(){return this.value}updateValueAndValidity(l={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Ab||this.status===yv)&&this._runAsyncValidator(l.emitEvent)),!1!==l.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!l.onlySelf&&this._parent.updateValueAndValidity(l)}_updateTreeValidity(l={emitEvent:!0}){this._forEachChild(a=>a._updateTreeValidity(l)),this.updateValueAndValidity({onlySelf:!0,emitEvent:l.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Ib:Ab}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(l){if(this.asyncValidator){this.status=yv,this._hasOwnPendingAsyncValidator=!0;const a=f$(this.asyncValidator(this));this._asyncValidationSubscription=a.subscribe(h=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(h,{emitEvent:l})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(l,a={}){this.errors=l,this._updateControlsErrors(!1!==a.emitEvent)}get(l){let a=l;return null==a||(Array.isArray(a)||(a=a.split(".")),0===a.length)?null:a.reduce((h,d)=>h&&h._find(d),this)}getError(l,a){const h=a?this.get(a):this;return h&&h.errors?h.errors[l]:null}hasError(l,a){return!!this.getError(l,a)}get root(){let l=this;for(;l._parent;)l=l._parent;return l}_updateControlsErrors(l){this.status=this._calculateStatus(),l&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(l)}_initObservables(){this.valueChanges=new rt,this.statusChanges=new rt}_calculateStatus(){return this._allControlsDisabled()?Ib:this.errors?BE:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(yv)?yv:this._anyControlsHaveStatus(BE)?BE:Ab}_anyControlsHaveStatus(l){return this._anyControls(a=>a.status===l)}_anyControlsDirty(){return this._anyControls(l=>l.dirty)}_anyControlsTouched(){return this._anyControls(l=>l.touched)}_updatePristine(l={}){this.pristine=!this._anyControlsDirty(),this._parent&&!l.onlySelf&&this._parent._updatePristine(l)}_updateTouched(l={}){this.touched=this._anyControlsTouched(),this._parent&&!l.onlySelf&&this._parent._updateTouched(l)}_registerOnCollectionChange(l){this._onCollectionChange=l}_setUpdateStrategy(l){UE(l)&&null!=l.updateOn&&(this._updateOn=l.updateOn)}_parentMarkedDirty(l){return!l&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(l){return null}}class vv extends R${constructor(l,a,h){super(UN(a),GN(h,a)),this.controls=l,this._initObservables(),this._setUpdateStrategy(a),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(l,a){return this.controls[l]?this.controls[l]:(this.controls[l]=a,a.setParent(this),a._registerOnCollectionChange(this._onCollectionChange),a)}addControl(l,a,h={}){this.registerControl(l,a),this.updateValueAndValidity({emitEvent:h.emitEvent}),this._onCollectionChange()}removeControl(l,a={}){this.controls[l]&&this.controls[l]._registerOnCollectionChange(()=>{}),delete this.controls[l],this.updateValueAndValidity({emitEvent:a.emitEvent}),this._onCollectionChange()}setControl(l,a,h={}){this.controls[l]&&this.controls[l]._registerOnCollectionChange(()=>{}),delete this.controls[l],a&&this.registerControl(l,a),this.updateValueAndValidity({emitEvent:h.emitEvent}),this._onCollectionChange()}contains(l){return this.controls.hasOwnProperty(l)&&this.controls[l].enabled}setValue(l,a={}){(function I$(c,l,a){c._forEachChild((h,d)=>{if(void 0===a[d])throw new it(1002,"")})})(this,0,l),Object.keys(l).forEach(h=>{(function A$(c,l,a){const h=c.controls;if(!(l?Object.keys(h):h).length)throw new it(1e3,"");if(!h[a])throw new it(1001,"")})(this,!0,h),this.controls[h].setValue(l[h],{onlySelf:!0,emitEvent:a.emitEvent})}),this.updateValueAndValidity(a)}patchValue(l,a={}){null!=l&&(Object.keys(l).forEach(h=>{const d=this.controls[h];d&&d.patchValue(l[h],{onlySelf:!0,emitEvent:a.emitEvent})}),this.updateValueAndValidity(a))}reset(l={},a={}){this._forEachChild((h,d)=>{h.reset(l[d],{onlySelf:!0,emitEvent:a.emitEvent})}),this._updatePristine(a),this._updateTouched(a),this.updateValueAndValidity(a)}getRawValue(){return this._reduceChildren({},(l,a,h)=>(l[h]=a.getRawValue(),l))}_syncPendingControls(){let l=this._reduceChildren(!1,(a,h)=>!!h._syncPendingControls()||a);return l&&this.updateValueAndValidity({onlySelf:!0}),l}_forEachChild(l){Object.keys(this.controls).forEach(a=>{const h=this.controls[a];h&&l(h,a)})}_setUpControls(){this._forEachChild(l=>{l.setParent(this),l._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(l){for(const[a,h]of Object.entries(this.controls))if(this.contains(a)&&l(h))return!0;return!1}_reduceValue(){return this._reduceChildren({},(a,h,d)=>((h.enabled||this.disabled)&&(a[d]=h.value),a))}_reduceChildren(l,a){let h=l;return this._forEachChild((d,f)=>{h=a(h,d,f)}),h}_allControlsDisabled(){for(const l of Object.keys(this.controls))if(this.controls[l].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(l){return this.controls.hasOwnProperty(l)?this.controls[l]:null}}function GE(c,l){return[...l.path,c]}function Rb(c,l){zN(c,l),l.valueAccessor.writeValue(c.value),c.disabled&&l.valueAccessor.setDisabledState?.(!0),function fOe(c,l){l.valueAccessor.registerOnChange(a=>{c._pendingValue=a,c._pendingChange=!0,c._pendingDirty=!0,"change"===c.updateOn&&P$(c,l)})}(c,l),function mOe(c,l){const a=(h,d)=>{l.valueAccessor.writeValue(h),d&&l.viewToModelUpdate(h)};c.registerOnChange(a),l._registerOnDestroy(()=>{c._unregisterOnChange(a)})}(c,l),function pOe(c,l){l.valueAccessor.registerOnTouched(()=>{c._pendingTouched=!0,"blur"===c.updateOn&&c._pendingChange&&P$(c,l),"submit"!==c.updateOn&&c.markAsTouched()})}(c,l),function dOe(c,l){if(l.valueAccessor.setDisabledState){const a=h=>{l.valueAccessor.setDisabledState(h)};c.registerOnDisabledChange(a),l._registerOnDestroy(()=>{c._unregisterOnDisabledChange(a)})}}(c,l)}function zE(c,l,a=!0){const h=()=>{};l.valueAccessor&&(l.valueAccessor.registerOnChange(h),l.valueAccessor.registerOnTouched(h)),jE(c,l),c&&(l._invokeOnDestroyCallbacks(),c._registerOnCollectionChange(()=>{}))}function HE(c,l){c.forEach(a=>{a.registerOnValidatorChange&&a.registerOnValidatorChange(l)})}function zN(c,l){const a=S$(c);null!==l.validator?c.setValidators(_$(a,l.validator)):"function"==typeof a&&c.setValidators([a]);const h=b$(c);null!==l.asyncValidator?c.setAsyncValidators(_$(h,l.asyncValidator)):"function"==typeof h&&c.setAsyncValidators([h]);const d=()=>c.updateValueAndValidity();HE(l._rawValidators,d),HE(l._rawAsyncValidators,d)}function jE(c,l){let a=!1;if(null!==c){if(null!==l.validator){const d=S$(c);if(Array.isArray(d)&&d.length>0){const f=d.filter(m=>m!==l.validator);f.length!==d.length&&(a=!0,c.setValidators(f))}}if(null!==l.asyncValidator){const d=b$(c);if(Array.isArray(d)&&d.length>0){const f=d.filter(m=>m!==l.asyncValidator);f.length!==d.length&&(a=!0,c.setAsyncValidators(f))}}}const h=()=>{};return HE(l._rawValidators,h),HE(l._rawAsyncValidators,h),a}function P$(c,l){c._pendingDirty&&c.markAsDirty(),c.setValue(c._pendingValue,{emitModelToViewChange:!1}),l.viewToModelUpdate(c._pendingValue),c._pendingChange=!1}function L$(c,l){zN(c,l)}function HN(c,l){if(!c.hasOwnProperty("model"))return!1;const a=c.model;return!!a.isFirstChange()||!Object.is(l,a.currentValue)}function N$(c,l){c._syncPendingControls(),l.forEach(a=>{const h=a.control;"submit"===h.updateOn&&h._pendingChange&&(a.viewToModelUpdate(h._pendingValue),h._pendingChange=!1)})}function jN(c,l){if(!l)return null;let a,h,d;return Array.isArray(l),l.forEach(f=>{f.constructor===Gl?a=f:function vOe(c){return Object.getPrototypeOf(c.constructor)===mm}(f)?h=f:d=f}),d||h||a||null}const SOe={provide:ha,useExisting:fi(()=>Lb)},Pb=(()=>Promise.resolve(null))();let Lb=(()=>{class c extends ha{constructor(a,h){super(),this.submitted=!1,this._directives=new Set,this.ngSubmit=new rt,this.form=new vv({},ON(a),NN(h))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(a){Pb.then(()=>{const h=this._findContainer(a.path);a.control=h.registerControl(a.name,a.control),Rb(a.control,a),a.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(a)})}getControl(a){return this.form.get(a.path)}removeControl(a){Pb.then(()=>{const h=this._findContainer(a.path);h&&h.removeControl(a.name),this._directives.delete(a)})}addFormGroup(a){Pb.then(()=>{const h=this._findContainer(a.path),d=new vv({});L$(d,a),h.registerControl(a.name,d),d.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(a){Pb.then(()=>{const h=this._findContainer(a.path);h&&h.removeControl(a.name)})}getFormGroup(a){return this.form.get(a.path)}updateModel(a,h){Pb.then(()=>{this.form.get(a.path).setValue(h)})}setValue(a){this.control.setValue(a)}onSubmit(a){return this.submitted=!0,N$(this.form,this._directives),this.ngSubmit.emit(a),!1}onReset(){this.resetForm()}resetForm(a){this.form.reset(a),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(a){return a.pop(),a.length?this.form.get(a):this.form}}return c.\u0275fac=function(a){return new(a||c)(N(Oo,10),N(Af,10))},c.\u0275dir=We({type:c,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(a,h){1&a&&Me("submit",function(f){return h.onSubmit(f)})("reset",function(){return h.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[Mt([SOe]),Qt]}),c})();function F$(c,l){const a=c.indexOf(l);a>-1&&c.splice(a,1)}function k$(c){return"object"==typeof c&&null!==c&&2===Object.keys(c).length&&"value"in c&&"disabled"in c}const If=class extends R${constructor(l=null,a,h){super(UN(a),GN(h,a)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(l),this._setUpdateStrategy(a),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),UE(a)&&(a.nonNullable||a.initialValueIsDefault)&&(this.defaultValue=k$(l)?l.value:l)}setValue(l,a={}){this.value=this._pendingValue=l,this._onChange.length&&!1!==a.emitModelToViewChange&&this._onChange.forEach(h=>h(this.value,!1!==a.emitViewToModelChange)),this.updateValueAndValidity(a)}patchValue(l,a={}){this.setValue(l,a)}reset(l=this.defaultValue,a={}){this._applyFormState(l),this.markAsPristine(a),this.markAsUntouched(a),this.setValue(this.value,a),this._pendingChange=!1}_updateValue(){}_anyControls(l){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(l){this._onChange.push(l)}_unregisterOnChange(l){F$(this._onChange,l)}registerOnDisabledChange(l){this._onDisabledChange.push(l)}_unregisterOnDisabledChange(l){F$(this._onDisabledChange,l)}_forEachChild(l){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(l){k$(l)?(this.value=this._pendingValue=l.value,l.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=l}},wOe={provide:da,useExisting:fi(()=>sl)},B$=(()=>Promise.resolve(null))();let sl=(()=>{class c extends da{constructor(a,h,d,f,m){super(),this._changeDetectorRef=m,this.control=new If,this._registered=!1,this.update=new rt,this._parent=a,this._setValidators(h),this._setAsyncValidators(d),this.valueAccessor=jN(0,f)}ngOnChanges(a){if(this._checkForErrors(),!this._registered||"name"in a){if(this._registered&&(this._checkName(),this.formDirective)){const h=a.name.previousValue;this.formDirective.removeControl({name:h,path:this._getPath(h)})}this._setUpControl()}"isDisabled"in a&&this._updateDisabled(a),HN(a,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(a){this.viewModel=a,this.update.emit(a)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){Rb(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(a){B$.then(()=>{this.control.setValue(a,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(a){const h=a.isDisabled.currentValue,d=0!==h&&lh(h);B$.then(()=>{d&&!this.control.disabled?this.control.disable():!d&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(a){return this._parent?GE(a,this._parent):[a]}}return c.\u0275fac=function(a){return new(a||c)(N(ha,9),N(Oo,10),N(Af,10),N(Lu,10),N(Ss,8))},c.\u0275dir=We({type:c,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[Mt([wOe]),Qt,ys]}),c})(),WE=(()=>{class c{}return c.\u0275fac=function(a){return new(a||c)},c.\u0275dir=We({type:c,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),c})();const COe={provide:Lu,useExisting:fi(()=>Ob),multi:!0};let Ob=(()=>{class c extends mm{writeValue(a){this.setProperty("value",a??"")}registerOnChange(a){this.onChange=h=>{a(""==h?null:parseFloat(h))}}}return c.\u0275fac=function(){let l;return function(h){return(l||(l=Ri(c)))(h||c)}}(),c.\u0275dir=We({type:c,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(a,h){1&a&&Me("input",function(f){return h.onChange(f.target.value)})("blur",function(){return h.onTouched()})},features:[Mt([COe]),Qt]}),c})();const xOe={provide:Lu,useExisting:fi(()=>XN),multi:!0};let U$=(()=>{class c{}return c.\u0275fac=function(a){return new(a||c)},c.\u0275mod=Ut({type:c}),c.\u0275inj=kt({}),c})(),EOe=(()=>{class c{constructor(){this._accessors=[]}add(a,h){this._accessors.push([a,h])}remove(a){for(let h=this._accessors.length-1;h>=0;--h)if(this._accessors[h][1]===a)return void this._accessors.splice(h,1)}select(a){this._accessors.forEach(h=>{this._isSameGroup(h,a)&&h[1]!==a&&h[1].fireUncheck(a.value)})}_isSameGroup(a,h){return!!a[0].control&&a[0]._parent===h._control._parent&&a[1].name===h.name}}return c.\u0275fac=function(a){return new(a||c)},c.\u0275prov=Oe({token:c,factory:c.\u0275fac,providedIn:U$}),c})(),XN=(()=>{class c extends mm{constructor(a,h,d,f){super(a,h),this._registry=d,this._injector=f,this.onChange=()=>{}}ngOnInit(){this._control=this._injector.get(da),this._checkName(),this._registry.add(this._control,this)}ngOnDestroy(){this._registry.remove(this)}writeValue(a){this._state=a===this.value,this.setProperty("checked",this._state)}registerOnChange(a){this._fn=a,this.onChange=()=>{a(this.value),this._registry.select(this)}}fireUncheck(a){this.writeValue(a)}_checkName(){!this.name&&this.formControlName&&(this.name=this.formControlName)}}return c.\u0275fac=function(a){return new(a||c)(N(Fn),N(zt),N(EOe),N(ti))},c.\u0275dir=We({type:c,selectors:[["input","type","radio","formControlName",""],["input","type","radio","formControl",""],["input","type","radio","ngModel",""]],hostBindings:function(a,h){1&a&&Me("change",function(){return h.onChange()})("blur",function(){return h.onTouched()})},inputs:{name:"name",formControlName:"formControlName",value:"value"},features:[Mt([xOe]),Qt]}),c})();const MOe={provide:Lu,useExisting:fi(()=>Nb),multi:!0};let Nb=(()=>{class c extends mm{writeValue(a){this.setProperty("value",parseFloat(a))}registerOnChange(a){this.onChange=h=>{a(""==h?null:parseFloat(h))}}}return c.\u0275fac=function(){let l;return function(h){return(l||(l=Ri(c)))(h||c)}}(),c.\u0275dir=We({type:c,selectors:[["input","type","range","formControlName",""],["input","type","range","formControl",""],["input","type","range","ngModel",""]],hostBindings:function(a,h){1&a&&Me("change",function(f){return h.onChange(f.target.value)})("input",function(f){return h.onChange(f.target.value)})("blur",function(){return h.onTouched()})},features:[Mt([MOe]),Qt]}),c})();const qN=new Vt("NgModelWithFormControlWarning"),AOe={provide:ha,useExisting:fi(()=>_v)};let _v=(()=>{class c extends ha{constructor(a,h){super(),this.validators=a,this.asyncValidators=h,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new rt,this._setValidators(a),this._setAsyncValidators(h)}ngOnChanges(a){this._checkFormPresent(),a.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(jE(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(a){const h=this.form.get(a.path);return Rb(h,a),h.updateValueAndValidity({emitEvent:!1}),this.directives.push(a),h}getControl(a){return this.form.get(a.path)}removeControl(a){zE(a.control||null,a,!1),function _Oe(c,l){const a=c.indexOf(l);a>-1&&c.splice(a,1)}(this.directives,a)}addFormGroup(a){this._setUpFormContainer(a)}removeFormGroup(a){this._cleanUpFormContainer(a)}getFormGroup(a){return this.form.get(a.path)}addFormArray(a){this._setUpFormContainer(a)}removeFormArray(a){this._cleanUpFormContainer(a)}getFormArray(a){return this.form.get(a.path)}updateModel(a,h){this.form.get(a.path).setValue(h)}onSubmit(a){return this.submitted=!0,N$(this.form,this.directives),this.ngSubmit.emit(a),!1}onReset(){this.resetForm()}resetForm(a){this.form.reset(a),this.submitted=!1}_updateDomValue(){this.directives.forEach(a=>{const h=a.control,d=this.form.get(a.path);h!==d&&(zE(h||null,a),(c=>c instanceof If)(d)&&(Rb(d,a),a.control=d))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(a){const h=this.form.get(a.path);L$(h,a),h.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(a){if(this.form){const h=this.form.get(a.path);h&&function gOe(c,l){return jE(c,l)}(h,a)&&h.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){zN(this.form,this),this._oldForm&&jE(this._oldForm,this)}_checkFormPresent(){}}return c.\u0275fac=function(a){return new(a||c)(N(Oo,10),N(Af,10))},c.\u0275dir=We({type:c,selectors:[["","formGroup",""]],hostBindings:function(a,h){1&a&&Me("submit",function(f){return h.onSubmit(f)})("reset",function(){return h.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[Mt([AOe]),Qt,ys]}),c})();const POe={provide:da,useExisting:fi(()=>qE)};let qE=(()=>{class c extends da{constructor(a,h,d,f,m){super(),this._ngModelWarningConfig=m,this._added=!1,this.update=new rt,this._ngModelWarningSent=!1,this._parent=a,this._setValidators(h),this._setAsyncValidators(d),this.valueAccessor=jN(0,f)}set isDisabled(a){}ngOnChanges(a){this._added||this._setUpControl(),HN(a,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(a){this.viewModel=a,this.update.emit(a)}get path(){return GE(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}}return c._ngModelWarningSentOnce=!1,c.\u0275fac=function(a){return new(a||c)(N(ha,13),N(Oo,10),N(Af,10),N(Lu,10),N(qN,8))},c.\u0275dir=We({type:c,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[Mt([POe]),Qt,ys]}),c})();const LOe={provide:Lu,useExisting:fi(()=>Fb),multi:!0};function H$(c,l){return null==c?`${l}`:(l&&"object"==typeof l&&(l="Object"),`${c}: ${l}`.slice(0,50))}let Fb=(()=>{class c extends mm{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(a){this._compareWith=a}writeValue(a){this.value=a;const d=H$(this._getOptionId(a),a);this.setProperty("value",d)}registerOnChange(a){this.onChange=h=>{this.value=this._getOptionValue(h),a(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(a){for(const h of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(h),a))return h;return null}_getOptionValue(a){const h=function OOe(c){return c.split(":")[0]}(a);return this._optionMap.has(h)?this._optionMap.get(h):a}}return c.\u0275fac=function(){let l;return function(h){return(l||(l=Ri(c)))(h||c)}}(),c.\u0275dir=We({type:c,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(a,h){1&a&&Me("change",function(f){return h.onChange(f.target.value)})("blur",function(){return h.onTouched()})},inputs:{compareWith:"compareWith"},features:[Mt([LOe]),Qt]}),c})(),$E=(()=>{class c{constructor(a,h,d){this._element=a,this._renderer=h,this._select=d,this._select&&(this.id=this._select._registerOption())}set ngValue(a){null!=this._select&&(this._select._optionMap.set(this.id,a),this._setElementValue(H$(this.id,a)),this._select.writeValue(this._select.value))}set value(a){this._setElementValue(a),this._select&&this._select.writeValue(this._select.value)}_setElementValue(a){this._renderer.setProperty(this._element.nativeElement,"value",a)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return c.\u0275fac=function(a){return new(a||c)(N(zt),N(Fn),N(Fb,9))},c.\u0275dir=We({type:c,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),c})();const NOe={provide:Lu,useExisting:fi(()=>kb),multi:!0};function j$(c,l){return null==c?`${l}`:("string"==typeof l&&(l=`'${l}'`),l&&"object"==typeof l&&(l="Object"),`${c}: ${l}`.slice(0,50))}let kb=(()=>{class c extends mm{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(a){this._compareWith=a}writeValue(a){let h;if(this.value=a,Array.isArray(a)){const d=a.map(f=>this._getOptionId(f));h=(f,m)=>{f._setSelected(d.indexOf(m.toString())>-1)}}else h=(d,f)=>{d._setSelected(!1)};this._optionMap.forEach(h)}registerOnChange(a){this.onChange=h=>{const d=[],f=h.selectedOptions;if(void 0!==f){const m=f;for(let g=0;g<m.length;g++){const v=this._getOptionValue(m[g].value);d.push(v)}}else{const m=h.options;for(let g=0;g<m.length;g++){const y=m[g];if(y.selected){const v=this._getOptionValue(y.value);d.push(v)}}}this.value=d,a(d)}}_registerOption(a){const h=(this._idCounter++).toString();return this._optionMap.set(h,a),h}_getOptionId(a){for(const h of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(h)._value,a))return h;return null}_getOptionValue(a){const h=function FOe(c){return c.split(":")[0]}(a);return this._optionMap.has(h)?this._optionMap.get(h)._value:a}}return c.\u0275fac=function(){let l;return function(h){return(l||(l=Ri(c)))(h||c)}}(),c.\u0275dir=We({type:c,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(a,h){1&a&&Me("change",function(f){return h.onChange(f.target)})("blur",function(){return h.onTouched()})},inputs:{compareWith:"compareWith"},features:[Mt([NOe]),Qt]}),c})(),YE=(()=>{class c{constructor(a,h,d){this._element=a,this._renderer=h,this._select=d,this._select&&(this.id=this._select._registerOption(this))}set ngValue(a){null!=this._select&&(this._value=a,this._setElementValue(j$(this.id,a)),this._select.writeValue(this._select.value))}set value(a){this._select?(this._value=a,this._setElementValue(j$(this.id,a)),this._select.writeValue(this._select.value)):this._setElementValue(a)}_setElementValue(a){this._renderer.setProperty(this._element.nativeElement,"value",a)}_setSelected(a){this._renderer.setProperty(this._element.nativeElement,"selected",a)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return c.\u0275fac=function(a){return new(a||c)(N(zt),N(Fn),N(kb,9))},c.\u0275dir=We({type:c,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),c})();function X$(c){return"number"==typeof c?c:parseFloat(c)}let gm=(()=>{class c{constructor(){this._validator=NE}ngOnChanges(a){if(this.inputName in a){const h=this.normalizeInput(a[this.inputName].currentValue);this._enabled=this.enabled(h),this._validator=this._enabled?this.createValidator(h):NE,this._onChange&&this._onChange()}}validate(a){return this._validator(a)}registerOnValidatorChange(a){this._onChange=a}enabled(a){return null!=a}}return c.\u0275fac=function(a){return new(a||c)},c.\u0275dir=We({type:c,features:[ys]}),c})();const kOe={provide:Oo,useExisting:fi(()=>ZE),multi:!0};let ZE=(()=>{class c extends gm{constructor(){super(...arguments),this.inputName="max",this.normalizeInput=a=>X$(a),this.createValidator=a=>s$(a)}}return c.\u0275fac=function(){let l;return function(h){return(l||(l=Ri(c)))(h||c)}}(),c.\u0275dir=We({type:c,selectors:[["input","type","number","max","","formControlName",""],["input","type","number","max","","formControl",""],["input","type","number","max","","ngModel",""]],hostVars:1,hostBindings:function(a,h){2&a&&Ne("max",h._enabled?h.max:null)},inputs:{max:"max"},features:[Mt([kOe]),Qt]}),c})();const VOe={provide:Oo,useExisting:fi(()=>KE),multi:!0};let KE=(()=>{class c extends gm{constructor(){super(...arguments),this.inputName="min",this.normalizeInput=a=>X$(a),this.createValidator=a=>i$(a)}}return c.\u0275fac=function(){let l;return function(h){return(l||(l=Ri(c)))(h||c)}}(),c.\u0275dir=We({type:c,selectors:[["input","type","number","min","","formControlName",""],["input","type","number","min","","formControl",""],["input","type","number","min","","ngModel",""]],hostVars:1,hostBindings:function(a,h){2&a&&Ne("min",h._enabled?h.min:null)},inputs:{min:"min"},features:[Mt([VOe]),Qt]}),c})(),Q$=(()=>{class c{}return c.\u0275fac=function(a){return new(a||c)},c.\u0275mod=Ut({type:c}),c.\u0275inj=kt({imports:[U$]}),c})(),Ou=(()=>{class c{}return c.\u0275fac=function(a){return new(a||c)},c.\u0275mod=Ut({type:c}),c.\u0275inj=kt({imports:[Q$]}),c})(),WOe=(()=>{class c{static withConfig(a){return{ngModule:c,providers:[{provide:qN,useValue:a.warnOnNgModelWithFormControl}]}}}return c.\u0275fac=function(a){return new(a||c)},c.\u0275mod=Ut({type:c}),c.\u0275inj=kt({imports:[Q$]}),c})();function qOe(c){this.wrapped=c}function QE(c){var l,a;function d(m,g){try{var y=c[m](g),v=y.value,_=v instanceof qOe;Promise.resolve(_?v.wrapped:v).then(function(S){_?d("return"===m?"return":"next",S):f(y.done?"return":"normal",S)},function(S){d("throw",S)})}catch(S){f("throw",S)}}function f(m,g){switch(m){case"return":l.resolve({value:g,done:!0});break;case"throw":l.reject(g);break;default:l.resolve({value:g,done:!1})}(l=l.next)?d(l.key,l.arg):a=null}this._invoke=function h(m,g){return new Promise(function(y,v){var _={key:m,arg:g,resolve:y,reject:v,next:null};a?a=a.next=_:(l=a=_,d(m,g))})},"function"!=typeof c.return&&(this.return=void 0)}QE.prototype["function"==typeof Symbol&&Symbol.asyncIterator||"@@asyncIterator"]=function(){return this},QE.prototype.next=function(c){return this._invoke("next",c)},QE.prototype.throw=function(c){return this._invoke("throw",c)},QE.prototype.return=function(c){return this._invoke("return",c)},typeof Symbol<"u"&&Symbol;class JE{static getTrapElements(){return[...ls.state.focusTrapItems]}static setTrapElements(l){const a=document.querySelector("html");null!==a&&function KN(c,...l){c&&l.forEach(([a,h])=>{!1===h||null===h?c.removeAttribute(a):c.setAttribute(a,h+"")})}(a,["cds-focus-trap",!!l.length&&""]),ls.state.focusTrapItems=[...l]}static removeTrapElement(l){this.getTrapElements().length<1||this.setTrapElements([...this.getTrapElements().filter(a=>a.focusTrapId!==l.focusTrapId)])}static setCurrent(l){l?.focusTrapId&&this.setTrapElements([...this.getTrapElements().filter(a=>a.focusTrapId!==l.focusTrapId),l])}static activatePreviousCurrent(){this.setTrapElements([...this.getTrapElements()].slice(0,-1))}static getCurrent(){return function $Oe(c){return c.length?c[c.length-1]:void 0}(this.getTrapElements())||null}}const _Ne=Uq(3,(c,l,a)=>{!function d2e(c,l){return l||(l=window&&window.customElements),!l||!!l.get(c)}(c)||function YLe(){return window?.location?.href?.includes("localhost:6006")}()?(a.define(c,l),zq(),window&&!Object.keys(window.CDS._state.elementRegistry).some(h=>h===c)&&(window.CDS._state.elementRegistry={...window.CDS._state.elementRegistry,[c]:{}})):pm.warn(c+" has already been registered")});function iY(c,l){Aq()&&Gq(["customElements"])&&_Ne(c,l,window.customElements)}function Ai(c,l,a,h){var m,d=arguments.length,f=d<3?l:null===h?h=Object.getOwnPropertyDescriptor(l,a):h;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)f=Reflect.decorate(c,l,a,h);else for(var g=c.length-1;g>=0;g--)(m=c[g])&&(f=(d<3?m(f):d>3?m(l,a,f):m(l,a))||f);return d>3&&f&&Object.defineProperty(l,a,f),f}let lY=!1;function TNe(c){if((c=Math.trunc(c)||0)<0&&(c+=this.length),!(c<0||c>=this.length))return this[c]}if(!lY){lY=!0;const c=Reflect.getPrototypeOf(Int8Array);for(const l of[Array,String,c])Object.defineProperty(l.prototype,"at",{value:TNe,writable:!0,enumerable:!1,configurable:!0})}let cY=!1,uY=!1;function hY(c,l,a){Object.defineProperty(c,a,{configurable:!0,enumerable:!0,get:function(){return this.hasAttribute(l)?this.getAttribute(l):null},set:function(h){null!==h?this.setAttribute(l,h):this.removeAttribute(l)}})}function dY(c,l,a,h,d,f,m){try{var g=c[f](m),y=g.value}catch(v){return void a(v)}g.done?l(y):Promise.resolve(y).then(h,d)}function ym(c){return function(){var l=this,a=arguments;return new Promise(function(h,d){var f=c.apply(l,a);function m(y){dY(f,h,d,m,g,"next",y)}function g(y){dY(f,h,d,m,g,"throw",y)}m(void 0)})}}cY||Element.prototype.hasOwnProperty("role")||(hY(Element.prototype,"role","role"),cY=!0),uY||Element.prototype.hasOwnProperty("ariaLabel")||(uY=!0,["ActiveDescendant","Atomic","AutoComplete","Busy","Checked","ColCount","ColIndex","ColSpan","Controls","Current","DescribedBy","Details","Disabled","ErrorMessage","Expanded","FlowTo","HasPopup","Hidden","Invalid","KeyShortcuts","Label","LabelledBy","Level","Live","Modal","MultiLine","MultiSelectable","Orientation","Owns","Placeholder","PosInSet","Pressed","ReadOnly","Relevant","Required","RoleDescription","RowCount","RowIndex","RowSpan","Selected","SetSize","Sort","ValueMax","ValueMin","ValueNow","ValueText"].forEach(c=>hY(Element.prototype,"aria-"+c.toLowerCase(),"aria"+c)));const JN=window.ShadowRoot&&(void 0===window.ShadyCSS||window.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,eF=Symbol(),fY=new Map;class pY{constructor(l,a){if(this._$cssResult$=!0,a!==eF)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=l}get styleSheet(){let l=fY.get(this.cssText);return JN&&void 0===l&&(fY.set(this.cssText,l=new CSSStyleSheet),l.replaceSync(this.cssText)),l}toString(){return this.cssText}}const tF=(c,...l)=>{const a=1===c.length?c[0]:l.reduce((h,d,f)=>h+(m=>{if(!0===m._$cssResult$)return m.cssText;if("number"==typeof m)return m;throw Error("Value passed to 'css' function must be a 'css' function result: "+m+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(d)+c[f+1],c[0]);return new pY(a,eF)},mY=JN?c=>c:c=>c instanceof CSSStyleSheet?(l=>{let a="";for(const h of l.cssRules)a+=h.cssText;return(c=>new pY("string"==typeof c?c:c+"",eF))(a)})(c):c;var nF;const gY=window.trustedTypes,xNe=gY?gY.emptyScript:"",yY=window.reactiveElementPolyfillSupport,rF={toAttribute(c,l){switch(l){case Boolean:c=c?xNe:null;break;case Object:case Array:c=null==c?c:JSON.stringify(c)}return c},fromAttribute(c,l){let a=c;switch(l){case Boolean:a=null!==c;break;case Number:a=null===c?null:Number(c);break;case Object:case Array:try{a=JSON.parse(c)}catch{a=null}}return a}},vY=(c,l)=>l!==c&&(l==l||c==c),iF={attribute:!0,type:String,converter:rF,reflect:!1,hasChanged:vY};class Sv extends HTMLElement{constructor(){super(),this._$Et=new Map,this.isUpdatePending=!1,this.hasUpdated=!1,this._$Ei=null,this.o()}static addInitializer(l){var a;null!==(a=this.l)&&void 0!==a||(this.l=[]),this.l.push(l)}static get observedAttributes(){this.finalize();const l=[];return this.elementProperties.forEach((a,h)=>{const d=this._$Eh(h,a);void 0!==d&&(this._$Eu.set(d,h),l.push(d))}),l}static createProperty(l,a=iF){if(a.state&&(a.attribute=!1),this.finalize(),this.elementProperties.set(l,a),!a.noAccessor&&!this.prototype.hasOwnProperty(l)){const h="symbol"==typeof l?Symbol():"__"+l,d=this.getPropertyDescriptor(l,h,a);void 0!==d&&Object.defineProperty(this.prototype,l,d)}}static getPropertyDescriptor(l,a,h){return{get(){return this[a]},set(d){const f=this[l];this[a]=d,this.requestUpdate(l,f,h)},configurable:!0,enumerable:!0}}static getPropertyOptions(l){return this.elementProperties.get(l)||iF}static finalize(){if(this.hasOwnProperty("finalized"))return!1;this.finalized=!0;const l=Object.getPrototypeOf(this);if(l.finalize(),this.elementProperties=new Map(l.elementProperties),this._$Eu=new Map,this.hasOwnProperty("properties")){const a=this.properties,h=[...Object.getOwnPropertyNames(a),...Object.getOwnPropertySymbols(a)];for(const d of h)this.createProperty(d,a[d])}return this.elementStyles=this.finalizeStyles(this.styles),!0}static finalizeStyles(l){const a=[];if(Array.isArray(l)){const h=new Set(l.flat(1/0).reverse());for(const d of h)a.unshift(mY(d))}else void 0!==l&&a.push(mY(l));return a}static _$Eh(l,a){const h=a.attribute;return!1===h?void 0:"string"==typeof h?h:"string"==typeof l?l.toLowerCase():void 0}o(){var l;this._$Ep=new Promise(a=>this.enableUpdating=a),this._$AL=new Map,this._$Em(),this.requestUpdate(),null===(l=this.constructor.l)||void 0===l||l.forEach(a=>a(this))}addController(l){var a,h;(null!==(a=this._$Eg)&&void 0!==a?a:this._$Eg=[]).push(l),void 0!==this.renderRoot&&this.isConnected&&(null===(h=l.hostConnected)||void 0===h||h.call(l))}removeController(l){var a;null===(a=this._$Eg)||void 0===a||a.splice(this._$Eg.indexOf(l)>>>0,1)}_$Em(){this.constructor.elementProperties.forEach((l,a)=>{this.hasOwnProperty(a)&&(this._$Et.set(a,this[a]),delete this[a])})}createRenderRoot(){var l;const a=null!==(l=this.shadowRoot)&&void 0!==l?l:this.attachShadow(this.constructor.shadowRootOptions);return((c,l)=>{JN?c.adoptedStyleSheets=l.map(a=>a instanceof CSSStyleSheet?a:a.styleSheet):l.forEach(a=>{const h=document.createElement("style"),d=window.litNonce;void 0!==d&&h.setAttribute("nonce",d),h.textContent=a.cssText,c.appendChild(h)})})(a,this.constructor.elementStyles),a}connectedCallback(){var l;void 0===this.renderRoot&&(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),null===(l=this._$Eg)||void 0===l||l.forEach(a=>{var h;return null===(h=a.hostConnected)||void 0===h?void 0:h.call(a)})}enableUpdating(l){}disconnectedCallback(){var l;null===(l=this._$Eg)||void 0===l||l.forEach(a=>{var h;return null===(h=a.hostDisconnected)||void 0===h?void 0:h.call(a)})}attributeChangedCallback(l,a,h){this._$AK(l,h)}_$ES(l,a,h=iF){var d,f;const m=this.constructor._$Eh(l,h);if(void 0!==m&&!0===h.reflect){const g=(null!==(f=null===(d=h.converter)||void 0===d?void 0:d.toAttribute)&&void 0!==f?f:rF.toAttribute)(a,h.type);this._$Ei=l,null==g?this.removeAttribute(m):this.setAttribute(m,g),this._$Ei=null}}_$AK(l,a){var h,d,f;const m=this.constructor,g=m._$Eu.get(l);if(void 0!==g&&this._$Ei!==g){const y=m.getPropertyOptions(g),v=y.converter,_=null!==(f=null!==(d=null===(h=v)||void 0===h?void 0:h.fromAttribute)&&void 0!==d?d:"function"==typeof v?v:null)&&void 0!==f?f:rF.fromAttribute;this._$Ei=g,this[g]=_(a,y.type),this._$Ei=null}}requestUpdate(l,a,h){let d=!0;void 0!==l&&(((h=h||this.constructor.getPropertyOptions(l)).hasChanged||vY)(this[l],a)?(this._$AL.has(l)||this._$AL.set(l,a),!0===h.reflect&&this._$Ei!==l&&(void 0===this._$EC&&(this._$EC=new Map),this._$EC.set(l,h))):d=!1),!this.isUpdatePending&&d&&(this._$Ep=this._$E_())}_$E_(){var l=this;return ym(function*(){l.isUpdatePending=!0;try{yield l._$Ep}catch(h){Promise.reject(h)}const a=l.scheduleUpdate();return null!=a&&(yield a),!l.isUpdatePending})()}scheduleUpdate(){return this.performUpdate()}performUpdate(){var l;if(!this.isUpdatePending)return;this._$Et&&(this._$Et.forEach((d,f)=>this[f]=d),this._$Et=void 0);let a=!1;const h=this._$AL;try{a=this.shouldUpdate(h),a?(this.willUpdate(h),null===(l=this._$Eg)||void 0===l||l.forEach(d=>{var f;return null===(f=d.hostUpdate)||void 0===f?void 0:f.call(d)}),this.update(h)):this._$EU()}catch(d){throw a=!1,this._$EU(),d}a&&this._$AE(h)}willUpdate(l){}_$AE(l){var a;null===(a=this._$Eg)||void 0===a||a.forEach(h=>{var d;return null===(d=h.hostUpdated)||void 0===d?void 0:d.call(h)}),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(l)),this.updated(l)}_$EU(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$Ep}shouldUpdate(l){return!0}update(l){void 0!==this._$EC&&(this._$EC.forEach((a,h)=>this._$ES(h,this[h],a)),this._$EC=void 0),this._$EU()}updated(l){}firstUpdated(l){}}var sF;Sv.finalized=!0,Sv.elementProperties=new Map,Sv.elementStyles=[],Sv.shadowRootOptions={mode:"open"},yY?.({ReactiveElement:Sv}),(null!==(nF=globalThis.reactiveElementVersions)&&void 0!==nF?nF:globalThis.reactiveElementVersions=[]).push("1.3.2");const bv=globalThis.trustedTypes,_Y=bv?bv.createPolicy("lit-html",{createHTML:c=>c}):void 0,kh=`lit$${(Math.random()+"").slice(9)}$`,oF="?"+kh,ENe=`<${oF}>`,Tv=document,Vb=(c="")=>Tv.createComment(c),Bb=c=>null===c||"object"!=typeof c&&"function"!=typeof c,SY=Array.isArray,Ub=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,TY=/-->/g,wY=/>/g,vm=/>|[ \x09\n\x0c\r](?:([^\s"'>=/]+)([ \x09\n\x0c\r]*=[ \x09\n\x0c\r]*(?:[^ \x09\n\x0c\r"'`<>=]|("|')|))|$)/g,CY=/'/g,xY=/"/g,EY=/^(?:script|style|textarea|title)$/i,MY=c=>(l,...a)=>({_$litType$:c,strings:l,values:a}),aF=MY(1),MNe=MY(2),wv=Symbol.for("lit-noChange"),Gs=Symbol.for("lit-nothing"),DY=new WeakMap,AY=(c,l,a)=>{var h,d;const f=null!==(h=a?.renderBefore)&&void 0!==h?h:l;let m=f._$litPart$;if(void 0===m){const g=null!==(d=a?.renderBefore)&&void 0!==d?d:null;f._$litPart$=m=new xv(l.insertBefore(Vb(),g),g,void 0,a??{})}return m._$AI(c),m},Cv=Tv.createTreeWalker(Tv,129,null,!1);class Gb{constructor({strings:l,_$litType$:a},h){let d;this.parts=[];let f=0,m=0;const g=l.length-1,y=this.parts,[v,_]=((c,l)=>{const a=c.length-1,h=[];let d,f=2===l?"<svg>":"",m=Ub;for(let y=0;y<a;y++){const v=c[y];let _,S,b=-1,T=0;for(;T<v.length&&(m.lastIndex=T,S=m.exec(v),null!==S);)T=m.lastIndex,m===Ub?"!--"===S[1]?m=TY:void 0!==S[1]?m=wY:void 0!==S[2]?(EY.test(S[2])&&(d=RegExp("</"+S[2],"g")),m=vm):void 0!==S[3]&&(m=vm):m===vm?">"===S[0]?(m=d??Ub,b=-1):void 0===S[1]?b=-2:(b=m.lastIndex-S[2].length,_=S[1],m=void 0===S[3]?vm:'"'===S[3]?xY:CY):m===xY||m===CY?m=vm:m===TY||m===wY?m=Ub:(m=vm,d=void 0);const x=m===vm&&c[y+1].startsWith("/>")?" ":"";f+=m===Ub?v+ENe:b>=0?(h.push(_),v.slice(0,b)+"$lit$"+v.slice(b)+kh+x):v+kh+(-2===b?(h.push(void 0),y):x)}const g=f+(c[a]||"<?>")+(2===l?"</svg>":"");if(!Array.isArray(c)||!c.hasOwnProperty("raw"))throw Error("invalid template strings array");return[void 0!==_Y?_Y.createHTML(g):g,h]})(l,a);if(this.el=Gb.createElement(v,h),Cv.currentNode=this.el.content,2===a){const S=this.el.content,b=S.firstChild;b.remove(),S.append(...b.childNodes)}for(;null!==(d=Cv.nextNode())&&y.length<g;){if(1===d.nodeType){if(d.hasAttributes()){const S=[];for(const b of d.getAttributeNames())if(b.endsWith("$lit$")||b.startsWith(kh)){const T=_[m++];if(S.push(b),void 0!==T){const x=d.getAttribute(T.toLowerCase()+"$lit$").split(kh),E=/([.?@])?(.*)/.exec(T);y.push({type:1,index:f,name:E[2],strings:x,ctor:"."===E[1]?PY:"?"===E[1]?LY:"@"===E[1]?OY:zb})}else y.push({type:6,index:f})}for(const b of S)d.removeAttribute(b)}if(EY.test(d.tagName)){const S=d.textContent.split(kh),b=S.length-1;if(b>0){d.textContent=bv?bv.emptyScript:"";for(let T=0;T<b;T++)d.append(S[T],Vb()),Cv.nextNode(),y.push({type:2,index:++f});d.append(S[b],Vb())}}}else if(8===d.nodeType)if(d.data===oF)y.push({type:2,index:f});else{let S=-1;for(;-1!==(S=d.data.indexOf(kh,S+1));)y.push({type:7,index:f}),S+=kh.length-1}f++}}static createElement(l,a){const h=Tv.createElement("template");return h.innerHTML=l,h}}function _m(c,l,a=c,h){var d,f,m,g;if(l===wv)return l;let y=void 0!==h?null===(d=a._$Cl)||void 0===d?void 0:d[h]:a._$Cu;const v=Bb(l)?void 0:l._$litDirective$;return y?.constructor!==v&&(null===(f=y?._$AO)||void 0===f||f.call(y,!1),void 0===v?y=void 0:(y=new v(c),y._$AT(c,a,h)),void 0!==h?(null!==(m=(g=a)._$Cl)&&void 0!==m?m:g._$Cl=[])[h]=y:a._$Cu=y),void 0!==y&&(l=_m(c,y._$AS(c,l.values),y,h)),l}class RY{constructor(l,a){this.v=[],this._$AN=void 0,this._$AD=l,this._$AM=a}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}p(l){var a;const{el:{content:h},parts:d}=this._$AD,f=(null!==(a=l?.creationScope)&&void 0!==a?a:Tv).importNode(h,!0);Cv.currentNode=f;let m=Cv.nextNode(),g=0,y=0,v=d[0];for(;void 0!==v;){if(g===v.index){let _;2===v.type?_=new xv(m,m.nextSibling,this,l):1===v.type?_=new v.ctor(m,v.name,v.strings,this,l):6===v.type&&(_=new NY(m,this,l)),this.v.push(_),v=d[++y]}g!==v?.index&&(m=Cv.nextNode(),g++)}return f}m(l){let a=0;for(const h of this.v)void 0!==h&&(void 0!==h.strings?(h._$AI(l,h,a),a+=h.strings.length-2):h._$AI(l[a])),a++}}class xv{constructor(l,a,h,d){var f;this.type=2,this._$AH=Gs,this._$AN=void 0,this._$AA=l,this._$AB=a,this._$AM=h,this.options=d,this._$Cg=null===(f=d?.isConnected)||void 0===f||f}get _$AU(){var l,a;return null!==(a=null===(l=this._$AM)||void 0===l?void 0:l._$AU)&&void 0!==a?a:this._$Cg}get parentNode(){let l=this._$AA.parentNode;const a=this._$AM;return void 0!==a&&11===l.nodeType&&(l=a.parentNode),l}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(l,a=this){l=_m(this,l,a),Bb(l)?l===Gs||null==l||""===l?(this._$AH!==Gs&&this._$AR(),this._$AH=Gs):l!==this._$AH&&l!==wv&&this.$(l):void 0!==l._$litType$?this.T(l):void 0!==l.nodeType?this.k(l):(c=>{var l;return SY(c)||"function"==typeof(null===(l=c)||void 0===l?void 0:l[Symbol.iterator])})(l)?this.S(l):this.$(l)}M(l,a=this._$AB){return this._$AA.parentNode.insertBefore(l,a)}k(l){this._$AH!==l&&(this._$AR(),this._$AH=this.M(l))}$(l){this._$AH!==Gs&&Bb(this._$AH)?this._$AA.nextSibling.data=l:this.k(Tv.createTextNode(l)),this._$AH=l}T(l){var a;const{values:h,_$litType$:d}=l,f="number"==typeof d?this._$AC(l):(void 0===d.el&&(d.el=Gb.createElement(d.h,this.options)),d);if((null===(a=this._$AH)||void 0===a?void 0:a._$AD)===f)this._$AH.m(h);else{const m=new RY(f,this),g=m.p(this.options);m.m(h),this.k(g),this._$AH=m}}_$AC(l){let a=DY.get(l.strings);return void 0===a&&DY.set(l.strings,a=new Gb(l)),a}S(l){SY(this._$AH)||(this._$AH=[],this._$AR());const a=this._$AH;let h,d=0;for(const f of l)d===a.length?a.push(h=new xv(this.M(Vb()),this.M(Vb()),this,this.options)):h=a[d],h._$AI(f),d++;d<a.length&&(this._$AR(h&&h._$AB.nextSibling,d),a.length=d)}_$AR(l=this._$AA.nextSibling,a){var h;for(null===(h=this._$AP)||void 0===h||h.call(this,!1,!0,a);l&&l!==this._$AB;){const d=l.nextSibling;l.remove(),l=d}}setConnected(l){var a;void 0===this._$AM&&(this._$Cg=l,null===(a=this._$AP)||void 0===a||a.call(this,l))}}class zb{constructor(l,a,h,d,f){this.type=1,this._$AH=Gs,this._$AN=void 0,this.element=l,this.name=a,this._$AM=d,this.options=f,h.length>2||""!==h[0]||""!==h[1]?(this._$AH=Array(h.length-1).fill(new String),this.strings=h):this._$AH=Gs}get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}_$AI(l,a=this,h,d){const f=this.strings;let m=!1;if(void 0===f)l=_m(this,l,a,0),m=!Bb(l)||l!==this._$AH&&l!==wv,m&&(this._$AH=l);else{const g=l;let y,v;for(l=f[0],y=0;y<f.length-1;y++)v=_m(this,g[h+y],a,y),v===wv&&(v=this._$AH[y]),m||(m=!Bb(v)||v!==this._$AH[y]),v===Gs?l=Gs:l!==Gs&&(l+=(v??"")+f[y+1]),this._$AH[y]=v}m&&!d&&this.C(l)}C(l){l===Gs?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,l??"")}}class PY extends zb{constructor(){super(...arguments),this.type=3}C(l){this.element[this.name]=l===Gs?void 0:l}}const DNe=bv?bv.emptyScript:"";class LY extends zb{constructor(){super(...arguments),this.type=4}C(l){l&&l!==Gs?this.element.setAttribute(this.name,DNe):this.element.removeAttribute(this.name)}}class OY extends zb{constructor(l,a,h,d,f){super(l,a,h,d,f),this.type=5}_$AI(l,a=this){var h;if((l=null!==(h=_m(this,l,a,0))&&void 0!==h?h:Gs)===wv)return;const d=this._$AH,f=l===Gs&&d!==Gs||l.capture!==d.capture||l.once!==d.once||l.passive!==d.passive,m=l!==Gs&&(d===Gs||f);f&&this.element.removeEventListener(this.name,this,d),m&&this.element.addEventListener(this.name,this,l),this._$AH=l}handleEvent(l){var a,h;"function"==typeof this._$AH?this._$AH.call(null!==(h=null===(a=this.options)||void 0===a?void 0:a.host)&&void 0!==h?h:this.element,l):this._$AH.handleEvent(l)}}class NY{constructor(l,a,h){this.element=l,this.type=6,this._$AN=void 0,this._$AM=a,this.options=h}get _$AU(){return this._$AM._$AU}_$AI(l){_m(this,l)}}var lF,cF;(0,window.litHtmlPolyfillSupport)?.(Gb,xv),(null!==(sF=globalThis.litHtmlVersions)&&void 0!==sF?sF:globalThis.litHtmlVersions=[]).push("2.2.3");class Ev extends Sv{constructor(){super(...arguments),this.renderOptions={host:this},this._$Dt=void 0}createRenderRoot(){var l,a;const h=super.createRenderRoot();return null!==(l=(a=this.renderOptions).renderBefore)&&void 0!==l||(a.renderBefore=h.firstChild),h}update(l){const a=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(l),this._$Dt=AY(a,this.renderRoot,this.renderOptions)}connectedCallback(){var l;super.connectedCallback(),null===(l=this._$Dt)||void 0===l||l.setConnected(!0)}disconnectedCallback(){var l;super.disconnectedCallback(),null===(l=this._$Dt)||void 0===l||l.setConnected(!1)}render(){return wv}}Ev.finalized=!0,Ev._$litElement$=!0,null===(lF=globalThis.litElementHydrateSupport)||void 0===lF||lF.call(globalThis,{LitElement:Ev}),(0,globalThis.litElementPolyfillSupport)?.({LitElement:Ev}),(null!==(cF=globalThis.litElementVersions)&&void 0!==cF?cF:globalThis.litElementVersions=[]).push("3.2.0");const VY=tF`@charset "UTF-8";:host,:root{--2:var(--cds-global-layout-space-xxs, calc(4 * 1rem / var(--cds-global-base, 20)));--3:var(--cds-global-layout-space-xs, calc(8 * 1rem / var(--cds-global-base, 20)));--4:var(--cds-global-layout-space-sm, calc(12 * 1rem / var(--cds-global-base, 20)));--5:var(--cds-global-layout-space-md, calc(16 * 1rem / var(--cds-global-base, 20)));--6:var(--cds-global-layout-space-lg, calc(24 * 1rem / var(--cds-global-base, 20)));--7:var(--cds-global-layout-space-xl, calc(32 * 1rem / var(--cds-global-base, 20)))}[cds-layout~="wrap:none"]{flex-wrap:nowrap!important}[cds-layout*="align:stretch"]{flex-grow:1!important}[cds-layout*="align:shrink"]{flex-shrink:1!important;flex-grow:0!important}[cds-layout~=horizontal]{display:flex;flex-direction:row;flex-wrap:wrap;justify-items:flex-start;align-items:flex-start;width:100%;margin:0;min-height:0}[cds-layout~=horizontal]>[cds-layout~=horizontal],[cds-layout~=horizontal]>[cds-layout~=vertical],[cds-layout~=horizontal]>[cds-text]{width:initial!important}[cds-layout~=horizontal][cds-layout*="align:top"]{align-items:flex-start}[cds-layout~=horizontal][cds-layout*="align:left"]{justify-content:flex-start}[cds-layout~=horizontal][cds-layout*="align:right"]{justify-content:flex-end}[cds-layout~=horizontal][cds-layout*="align:vertical-center"]{align-items:center;align-content:center}[cds-layout~=horizontal][cds-layout*="align:horizontal-center"]{justify-content:center}[cds-layout~=horizontal][cds-layout*="align:center"]{align-items:center;align-content:center;justify-content:center}[cds-layout~=horizontal][cds-layout*="order:reverse"]{flex-direction:row-reverse}[cds-layout~=horizontal][cds-layout*="align:horizontal-stretch"]{justify-content:stretch;flex-grow:1}[cds-layout~=horizontal][cds-layout*="align:horizontal-stretch"]>*{flex-grow:1}[cds-layout~=horizontal][cds-layout*="align:stretch"]{align-items:stretch;align-content:stretch;flex-grow:1}[cds-layout~=horizontal][cds-layout*="align:stretch"]>*{flex-grow:1}[cds-layout~=horizontal]>[cds-layout*="align:center"],[cds-layout~=horizontal]>[cds-layout*="align:vertical-center"]{align-self:center}[cds-layout~=horizontal]>[cds-layout*="align:center"],[cds-layout~=horizontal]>[cds-layout*="align:horizontal-center"]{margin-left:auto!important;margin-right:auto!important}[cds-layout~=horizontal]>[cds-layout*="align:top"]{align-self:flex-start}[cds-layout~=horizontal]>[cds-layout*="align:right"]{margin-left:auto!important}[cds-layout~=horizontal]>[cds-layout*="align:left"]{margin-right:auto!important}[cds-layout~=vertical]{width:100%;display:flex;flex-direction:column;align-items:flex-start}[cds-layout~=vertical],[cds-layout~=vertical][cds-layout*="align:top"]{justify-content:flex-start}[cds-layout~=vertical][cds-layout*="align:left"]{align-items:flex-start}[cds-layout~=vertical][cds-layout*="align:right"]{align-items:flex-end}[cds-layout~=vertical][cds-layout*="align:vertical-center"]{justify-content:center}[cds-layout~=vertical][cds-layout*="align:horizontal-center"]{align-items:center}[cds-layout~=vertical][cds-layout*="align:center"]{align-items:center;justify-content:center}[cds-layout~=vertical][cds-layout*="order:reverse"]{flex-direction:column-reverse}[cds-layout~=vertical][cds-layout*="align:horizontal-stretch"]{align-items:stretch}[cds-layout~=vertical][cds-layout*="align:stretch"]{align-items:stretch;justify-content:stretch}[cds-layout~=vertical][cds-layout*="align:stretch"]>*{flex-grow:1}[cds-layout~=vertical]>[cds-layout*="align:center"],[cds-layout~=vertical]>[cds-layout*="align:vertical-center"]{margin-top:auto;margin-bottom:auto}[cds-layout~=vertical]>[cds-layout*="align:center"],[cds-layout~=vertical]>[cds-layout*="align:horizontal-center"]{align-self:center}[cds-layout~=vertical]>[cds-layout*="align:top"]{margin-bottom:auto!important}[cds-layout~=vertical]>[cds-layout*="align:right"]{margin-left:auto}[cds-layout~=vertical]>[cds-layout*="align:left"]{margin-right:auto}[cds-layout~=grid]{display:grid;align-items:start;align-content:start;grid-template-columns:repeat(var(--cds-global-layout-grid-cols,12),1fr);width:100%}[cds-layout~=grid][cds-layout*=rows]{grid-template-rows:repeat(12,auto)}[cds-layout~=grid]>[cds-layout*=row]{align-self:stretch}[cds-layout~=grid][cds-layout*="align:top"]{align-content:start}[cds-layout~=grid][cds-layout*="align:right"]{justify-content:end}[cds-layout~=grid][cds-layout*="align:left"]{justify-content:start}[cds-layout~=grid][cds-layout*="align:horizontal-stretch"]{justify-items:stretch;justify-content:stretch}[cds-layout~=grid][cds-layout*="align:stretch"]{align-items:stretch;align-content:stretch;justify-items:stretch;justify-content:stretch}[cds-layout~=grid][cds-layout*="align:vertical-center"]{align-items:center;align-content:center}[cds-layout~=grid][cds-layout*="align:horizontal-center"]{justify-items:center;justify-content:center}[cds-layout~=grid][cds-layout*="align:center"]{align-items:center;align-content:center;justify-items:center;justify-content:center}::slotted([cds-layout~="display:screen-reader-only"]),[cds-layout~="display:screen-reader-only"]{position:absolute!important;clip:rect(1px,1px,1px,1px);clip-path:inset(50%);padding:0;border:0;height:1px;width:1px;overflow:hidden;white-space:nowrap;top:0;left:0;display:block!important}[cds-layout*="gap:none"]{gap:0}[cds-layout*="gap:xxs"]{gap:var(--2)}[cds-layout*="gap:xs"]{gap:var(--3)}[cds-layout*="gap:sm"]{gap:var(--4)}[cds-layout*="gap:md"]{gap:var(--5)}[cds-layout*="gap:lg"]{gap:var(--6)}[cds-layout~="p:none"]{padding:0!important}[cds-layout~="p:xxs"]{padding:var(--2)!important}[cds-layout~="p:xs"]{padding:var(--3)!important}[cds-layout~="p:sm"]{padding:var(--4)!important}[cds-layout~="p:md"]{padding:var(--5)!important}[cds-layout~="m:md"]{margin:var(--5)!important}[cds-layout~="p:lg"]{padding:var(--6)!important}[cds-layout~="p-y:xs"]{padding-top:var(--3)!important;padding-bottom:var(--3)!important}[cds-layout~="p-x:lg"]{padding-left:var(--6)!important;padding-right:var(--6)!important}[cds-layout~="p-l:md"]{padding-left:var(--5)!important}[cds-layout~="p-t:lg"]{padding-top:var(--6)!important}[cds-layout~="p-b:lg"]{padding-bottom:var(--6)!important}@media (min-width:992px){[cds-layout*="gap@md:lg"]{gap:var(--6)}[cds-layout~="p@md:lg"]{padding:var(--6)!important}[cds-layout~="m@md:xl"]{margin:var(--7)!important}}[cds-layout~=fill]{width:100%!important}*,:after,:before{box-sizing:border-box}[cds-layout~=horizontal][cds-layout*="align:horizontal-stretch"]>::slotted(*),[cds-layout~=horizontal][cds-layout*="align:stretch"]>::slotted(*),[cds-layout~=vertical][cds-layout*="align:stretch"]>::slotted(*){flex-grow:1}[cds-layout~=vertical] ::slotted([cds-layout*="align:center"]),[cds-layout~=vertical] ::slotted([cds-layout*="align:vertical-center"]){margin-top:auto;margin-bottom:auto}[cds-layout~=vertical] ::slotted([cds-layout*="align:center"]),[cds-layout~=vertical] ::slotted([cds-layout*="align:horizontal-center"]){align-self:center}[cds-layout~=vertical] ::slotted([cds-layout*="align:top"]){margin-bottom:auto!important}[cds-layout~=vertical] ::slotted([cds-layout*="align:bottom"]){margin-top:auto!important}[cds-layout~=vertical] ::slotted([cds-layout*="align:right"]){margin-left:auto}[cds-layout~=vertical] ::slotted([cds-layout*="align:left"]),[cds-layout~=vertical]>[cds-layout*="align:left"]{margin-right:auto}@media (min-width:576px){[cds-layout~=vertical] ::slotted([cds-layout*="align@xs:center"]),[cds-layout~=vertical] ::slotted([cds-layout*="align@xs:vertical-center"]){margin-top:auto;margin-bottom:auto}[cds-layout~=vertical] ::slotted([cds-layout*="align@xs:center"]),[cds-layout~=vertical] ::slotted([cds-layout*="align@xs:horizontal-center"]){align-self:center}[cds-layout~=vertical] ::slotted([cds-layout*="align@xs:top"]){margin-bottom:auto!important}[cds-layout~=vertical] ::slotted([cds-layout*="align@xs:bottom"]){margin-top:auto!important}[cds-layout~=vertical] ::slotted([cds-layout*="align@xs:right"]){margin-left:auto}[cds-layout~=vertical] ::slotted([cds-layout*="align@xs:left"]){margin-right:auto}}@media (min-width:768px){[cds-layout~=vertical] ::slotted([cds-layout*="align@sm:center"]),[cds-layout~=vertical] ::slotted([cds-layout*="align@sm:vertical-center"]){margin-top:auto;margin-bottom:auto}[cds-layout~=vertical] ::slotted([cds-layout*="align@sm:center"]),[cds-layout~=vertical] ::slotted([cds-layout*="align@sm:horizontal-center"]){align-self:center}[cds-layout~=vertical] ::slotted([cds-layout*="align@sm:top"]){margin-bottom:auto!important}[cds-layout~=vertical] ::slotted([cds-layout*="align@sm:bottom"]){margin-top:auto!important}[cds-layout~=vertical] ::slotted([cds-layout*="align@sm:right"]){margin-left:auto}[cds-layout~=vertical] ::slotted([cds-layout*="align@sm:left"]){margin-right:auto}}@media (min-width:992px){[cds-layout~=vertical] ::slotted([cds-layout*="align@md:center"]),[cds-layout~=vertical] ::slotted([cds-layout*="align@md:vertical-center"]){margin-top:auto;margin-bottom:auto}[cds-layout~=vertical] ::slotted([cds-layout*="align@md:center"]),[cds-layout~=vertical] ::slotted([cds-layout*="align@md:horizontal-center"]){align-self:center}[cds-layout~=vertical] ::slotted([cds-layout*="align@md:top"]){margin-bottom:auto!important}[cds-layout~=vertical] ::slotted([cds-layout*="align@md:bottom"]){margin-top:auto!important}[cds-layout~=vertical] ::slotted([cds-layout*="align@md:right"]){margin-left:auto}[cds-layout~=vertical] ::slotted([cds-layout*="align@md:left"]){margin-right:auto}}@media (min-width:1200px){[cds-layout~=vertical] ::slotted([cds-layout*="align@lg:center"]),[cds-layout~=vertical] ::slotted([cds-layout*="align@lg:vertical-center"]){margin-top:auto;margin-bottom:auto}[cds-layout~=vertical] ::slotted([cds-layout*="align@lg:center"]),[cds-layout~=vertical] ::slotted([cds-layout*="align@lg:horizontal-center"]){align-self:center}[cds-layout~=vertical] ::slotted([cds-layout*="align@lg:top"]){margin-bottom:auto!important}[cds-layout~=vertical] ::slotted([cds-layout*="align@lg:bottom"]){margin-top:auto!important}[cds-layout~=vertical] ::slotted([cds-layout*="align@lg:right"]){margin-left:auto}[cds-layout~=vertical] ::slotted([cds-layout*="align@lg:left"]){margin-right:auto}}@media (min-width:1440px){[cds-layout~=vertical] ::slotted([cds-layout*="align@xl:center"]),[cds-layout~=vertical] ::slotted([cds-layout*="align@xl:vertical-center"]){margin-top:auto;margin-bottom:auto}[cds-layout~=vertical] ::slotted([cds-layout*="align@xl:center"]),[cds-layout~=vertical] ::slotted([cds-layout*="align@xl:horizontal-center"]){align-self:center}[cds-layout~=vertical] ::slotted([cds-layout*="align@xl:top"]){margin-bottom:auto!important}[cds-layout~=vertical] ::slotted([cds-layout*="align@xl:bottom"]){margin-top:auto!important}[cds-layout~=vertical] ::slotted([cds-layout*="align@xl:right"]){margin-left:auto}[cds-layout~=vertical] ::slotted([cds-layout*="align@xl:left"]){margin-right:auto}}[cds-layout~=horizontal] ::slotted([cds-layout*="align:center"]),[cds-layout~=horizontal] ::slotted([cds-layout*="align:vertical-center"]){align-self:center}[cds-layout~=horizontal] ::slotted([cds-layout*="align:center"]),[cds-layout~=horizontal] ::slotted([cds-layout*="align:horizontal-center"]){margin-left:auto!important;margin-right:auto!important}[cds-layout~=horizontal] ::slotted([cds-layout*="align:top"]){align-self:flex-start}[cds-layout~=horizontal] ::slotted([cds-layout*="align:bottom"]){align-self:flex-end}[cds-layout~=horizontal] ::slotted([cds-layout*="align:right"]){margin-left:auto!important}[cds-layout~=horizontal] ::slotted([cds-layout*="align:left"]){margin-right:auto!important}@media (min-width:576px){[cds-layout~=horizontal] ::slotted([cds-layout*="align@xs:center"]),[cds-layout~=horizontal] ::slotted([cds-layout*="align@xs:vertical-center"]){align-self:center}[cds-layout~=horizontal] ::slotted([cds-layout*="align@xs:center"]),[cds-layout~=horizontal] ::slotted([cds-layout*="align@xs:horizontal-center"]){margin-left:auto!important;margin-right:auto!important}[cds-layout~=horizontal] ::slotted([cds-layout*="align@xs:top"]){align-self:flex-start}[cds-layout~=horizontal] ::slotted([cds-layout*="align@xs:bottom"]){align-self:flex-end}[cds-layout~=horizontal] ::slotted([cds-layout*="align@xs:right"]){margin-left:auto!important}[cds-layout~=horizontal] ::slotted([cds-layout*="align@xs:left"]){margin-right:auto!important}}@media (min-width:768px){[cds-layout~=horizontal] ::slotted([cds-layout*="align@sm:center"]),[cds-layout~=horizontal] ::slotted([cds-layout*="align@sm:vertical-center"]){align-self:center}[cds-layout~=horizontal] ::slotted([cds-layout*="align@sm:center"]),[cds-layout~=horizontal] ::slotted([cds-layout*="align@sm:horizontal-center"]){margin-left:auto!important;margin-right:auto!important}[cds-layout~=horizontal] ::slotted([cds-layout*="align@sm:top"]){align-self:flex-start}[cds-layout~=horizontal] ::slotted([cds-layout*="align@sm:bottom"]){align-self:flex-end}[cds-layout~=horizontal] ::slotted([cds-layout*="align@sm:right"]){margin-left:auto!important}[cds-layout~=horizontal] ::slotted([cds-layout*="align@sm:left"]){margin-right:auto!important}}@media (min-width:992px){[cds-layout~=horizontal] ::slotted([cds-layout*="align@md:center"]),[cds-layout~=horizontal] ::slotted([cds-layout*="align@md:vertical-center"]){align-self:center}[cds-layout~=horizontal] ::slotted([cds-layout*="align@md:center"]),[cds-layout~=horizontal] ::slotted([cds-layout*="align@md:horizontal-center"]){margin-left:auto!important;margin-right:auto!important}[cds-layout~=horizontal] ::slotted([cds-layout*="align@md:top"]){align-self:flex-start}[cds-layout~=horizontal] ::slotted([cds-layout*="align@md:bottom"]){align-self:flex-end}[cds-layout~=horizontal] ::slotted([cds-layout*="align@md:right"]){margin-left:auto!important}[cds-layout~=horizontal] ::slotted([cds-layout*="align@md:left"]){margin-right:auto!important}}@media (min-width:1200px){[cds-layout~=horizontal] ::slotted([cds-layout*="align@lg:center"]),[cds-layout~=horizontal] ::slotted([cds-layout*="align@lg:vertical-center"]){align-self:center}[cds-layout~=horizontal] ::slotted([cds-layout*="align@lg:center"]),[cds-layout~=horizontal] ::slotted([cds-layout*="align@lg:horizontal-center"]){margin-left:auto!important;margin-right:auto!important}[cds-layout~=horizontal] ::slotted([cds-layout*="align@lg:top"]){align-self:flex-start}[cds-layout~=horizontal] ::slotted([cds-layout*="align@lg:bottom"]){align-self:flex-end}[cds-layout~=horizontal] ::slotted([cds-layout*="align@lg:right"]){margin-left:auto!important}[cds-layout~=horizontal] ::slotted([cds-layout*="align@lg:left"]){margin-right:auto!important}}@media (min-width:1440px){[cds-layout~=horizontal] ::slotted([cds-layout*="align@xl:center"]),[cds-layout~=horizontal] ::slotted([cds-layout*="align@xl:vertical-center"]){align-self:center}[cds-layout~=horizontal] ::slotted([cds-layout*="align@xl:center"]),[cds-layout~=horizontal] ::slotted([cds-layout*="align@xl:horizontal-center"]){margin-left:auto!important;margin-right:auto!important}[cds-layout~=horizontal] ::slotted([cds-layout*="align@xl:top"]){align-self:flex-start}[cds-layout~=horizontal] ::slotted([cds-layout*="align@xl:bottom"]){align-self:flex-end}[cds-layout~=horizontal] ::slotted([cds-layout*="align@xl:right"]){margin-left:auto!important}[cds-layout~=horizontal] ::slotted([cds-layout*="align@xl:left"]){margin-right:auto!important}}[cds-text]{font-family:var(--cds-global-typography-font-family, "Clarity City", "Avenir Next", sans-serif);margin-top:0;margin-bottom:0}[cds-text][cds-layout~=grid]::after,[cds-text][cds-layout~=grid]::before,[cds-text][cds-layout~=horizontal]::after,[cds-text][cds-layout~=horizontal]::before,[cds-text][cds-layout~=vertical]::after,[cds-text][cds-layout~=vertical]::before{display:none}[cds-text*=display],[cds-text*=section],[cds-text*=subsection],[cds-text*=title]{font-family:var(--cds-global-typography-header-font-family, "Clarity City", "Avenir Next", sans-serif);color:var(--cds-global-typography-color-400,var(--cds-global-color-construction-900,#21333b))}[cds-text*=body],[cds-text*=message],[cds-text*=secondary]{color:var(--cds-global-typography-color-500,var(--cds-global-color-black,#000))}[cds-text*=inline]{width:auto!important;display:inline-block!important}[cds-text*=display]{font-size:var(--cds-global-typography-display-font-size,calc(40 * 1rem / var(--cds-global-base,20)));font-weight:var(--cds-global-typography-display-font-weight,400);line-height:var(--cds-global-typography-display-line-height,1.1em);letter-spacing:var(--cds-global-typography-display-letter-spacing,-.0125em)}[cds-text*=display]::before{content:"";display:block;height:0;width:0;margin-bottom:calc(((var(--cds-global-typography-top-gap-height,.1475em) + calc((var(--cds-global-typography-display-line-height,1.1em) - 1em)/ 2))*-1) + .037em)}[cds-text*=display]::after{content:"";display:block;height:0;width:0;margin-top:calc((((1em - var(--cds-global-typography-top-gap-height,.1475em) - var(--cds-global-typography-ascender-height,.1703em) - var(--cds-global-typography-x-height,.517em)) + calc((var(--cds-global-typography-display-line-height,1.1em) - 1em)/ 2))*-1) - .044em)}[cds-text*=title]{font-size:var(--cds-global-typography-title-font-size,calc(24 * 1rem / var(--cds-global-base,20)));font-weight:var(--cds-global-typography-title-font-weight,400);line-height:var(--cds-global-typography-title-line-height,1.16667em);letter-spacing:var(--cds-global-typography-title-letter-spacing,-.008333em)}[cds-text*=title]::before{content:"";display:block;height:0;width:0;margin-bottom:calc(((var(--cds-global-typography-top-gap-height,.1475em) + calc((var(--cds-global-typography-title-line-height,1.16667em) - 1em)/ 2))*-1) + .037em)}[cds-text*=title]::after{content:"";display:block;height:0;width:0;margin-top:calc((((1em - var(--cds-global-typography-top-gap-height,.1475em) - var(--cds-global-typography-ascender-height,.1703em) - var(--cds-global-typography-x-height,.517em)) + calc((var(--cds-global-typography-title-line-height,1.16667em) - 1em)/ 2))*-1) - .044em)}[cds-text*=section]{font-size:var(--cds-global-typography-section-font-size,calc(20 * 1rem / var(--cds-global-base,20)));font-weight:var(--cds-global-typography-section-font-weight,400);line-height:var(--cds-global-typography-section-line-height,1.2em);letter-spacing:var(--cds-global-typography-section-letter-spacing,-.01em)}[cds-text*=section]::before{content:"";display:block;height:0;width:0;margin-bottom:calc(((var(--cds-global-typography-top-gap-height,.1475em) + calc((var(--cds-global-typography-section-line-height,1.2em) - 1em)/ 2))*-1) + .037em)}[cds-text*=section]::after{content:"";display:block;height:0;width:0;margin-top:calc((((1em - var(--cds-global-typography-top-gap-height,.1475em) - var(--cds-global-typography-ascender-height,.1703em) - var(--cds-global-typography-x-height,.517em)) + calc((var(--cds-global-typography-section-line-height,1.2em) - 1em)/ 2))*-1) - .044em)}[cds-text*=subsection]{font-size:var(--cds-global-typography-subsection-font-size,calc(16 * 1rem / var(--cds-global-base,20)));font-weight:var(--cds-global-typography-subsection-font-weight,400);line-height:var(--cds-global-typography-subsection-line-height,1.25em);letter-spacing:var(--cds-global-typography-subsection-letter-spacing,-.0125em)}[cds-text*=subsection]::before{content:"";display:block;height:0;width:0;margin-bottom:calc(((var(--cds-global-typography-top-gap-height,.1475em) + calc((var(--cds-global-typography-subsection-line-height,1.25em) - 1em)/ 2))*-1) + .037em)}[cds-text*=subsection]::after{content:"";display:block;height:0;width:0;margin-top:calc((((1em - var(--cds-global-typography-top-gap-height,.1475em) - var(--cds-global-typography-ascender-height,.1703em) - var(--cds-global-typography-x-height,.517em)) + calc((var(--cds-global-typography-subsection-line-height,1.25em) - 1em)/ 2))*-1) - .044em)}[cds-text*=body]{font-weight:var(--cds-global-typography-body-font-weight,400);font-size:var(--cds-global-typography-body-font-size,calc(14 * 1rem / var(--cds-global-base,20)));letter-spacing:var(--cds-global-typography-body-letter-spacing,-.014286em);line-height:var(--cds-global-typography-body-line-height,1.42857em)}[cds-text*=body]::before{content:"";display:block;height:0;width:0;margin-bottom:calc(((var(--cds-global-typography-top-gap-height,.1475em) + calc((var(--cds-global-typography-body-line-height,1.42857em) - 1em)/ 2))*-1) + .1em)}[cds-text*=body]::after{content:"";display:block;height:0;width:0;margin-top:calc((((1em - var(--cds-global-typography-top-gap-height,.1475em) - var(--cds-global-typography-ascender-height,.1703em) - var(--cds-global-typography-x-height,.517em)) + calc((var(--cds-global-typography-body-line-height,1.42857em) - 1em)/ 2))*-1) - .044em)}[cds-text*=message]{font-size:var(--cds-global-typography-message-font-size,calc(16 * 1rem / var(--cds-global-base,20)));font-weight:var(--cds-global-typography-message-font-weight,calc(400 * 1rem / var(--cds-global-base,20)));line-height:var(--cds-global-typography-message-line-height,1.25em);letter-spacing:var(--cds-global-typography-message-letter-spacing,-.0125em)}[cds-text*=message]::before{content:"";display:block;height:0;width:0;margin-bottom:calc(((var(--cds-global-typography-top-gap-height,.1475em) + calc((var(--cds-global-typography-message-line-height,1.25em) - 1em)/ 2))*-1) + .037em)}[cds-text*=message]::after{content:"";display:block;height:0;width:0;margin-top:calc((((1em - var(--cds-global-typography-top-gap-height,.1475em) - var(--cds-global-typography-ascender-height,.1703em) - var(--cds-global-typography-x-height,.517em)) + calc((var(--cds-global-typography-message-line-height,1.25em) - 1em)/ 2))*-1) - .044em)}[cds-text*=secondary]{font-size:var(--cds-global-typography-secondary-font-size,calc(13 * 1rem / var(--cds-global-base,20)));font-weight:var(--cds-global-typography-secondary-font-weight,400);line-height:var(--cds-global-typography-secondary-line-height,1.23077em);letter-spacing:var(--cds-global-typography-secondary-letter-spacing,-.007692em)}[cds-text*=secondary]::before{content:"";display:block;height:0;width:0;margin-bottom:calc(((var(--cds-global-typography-top-gap-height,.1475em) + calc((var(--cds-global-typography-secondary-line-height,1.23077em) - 1em)/ 2))*-1) + .037em)}[cds-text*=secondary]::after{content:"";display:block;height:0;width:0;margin-top:calc((((1em - var(--cds-global-typography-top-gap-height,.1475em) - var(--cds-global-typography-ascender-height,.1703em) - var(--cds-global-typography-x-height,.517em)) + calc((var(--cds-global-typography-secondary-line-height,1.23077em) - 1em)/ 2))*-1) - .044em)}[cds-text~=link]{color:var(--cds-global-typography-link-color,var(--cds-global-color-blue-800,#00608a))!important;text-decoration:underline!important;line-height:inherit!important;font-size:inherit!important}[cds-text~=link]:focus{outline:var(--cds-alias-object-interaction-outline,Highlight solid 2px);outline-offset:var(--cds-alias-object-interaction-outline-offset,1px)}[cds-text~=link]:hover{color:var(--cds-global-typography-link-color-hover,var(--cds-global-color-blue-900,#004b6b))!important}[cds-text~=link]:visited:not([cds-text~=static]){color:var(--cds-global-typography-link-color-visited,var(--cds-global-color-lavender-600,#3b40ce))!important}[cds-text~=link]:visited:not([cds-text~=static]):hover{color:var(--cds-global-typography-link-color-visited-hover,var(--cds-global-color-lavender-700,#2429c2))!important}@media (-webkit-min-device-pixel-ratio:0){[cds-text=link]:focus{outline:var(--cds-alias-object-interaction-outline-webkit,5px auto -webkit-focus-ring-color)}}[cds-text~=code]{color:var(--cds-alias-status-danger,var(--cds-global-color-red-700,#e02200));font-family:monospace;font-size:1.1em}[cds-divider]{display:block;height:var(--cds-alias-object-border-width-100,calc(1 * 1rem / var(--cds-global-base,20)));overflow:hidden;box-shadow:var(--cds-alias-object-border-color,var(--cds-global-color-construction-200,#cbd4d8)) 0 0 0 var(--cds-alias-object-border-width-100,calc(1 * 1rem / var(--cds-global-base,20))) inset}[cds-text~=light]{font-weight:var(--cds-global-typography-font-weight-light,300)!important}[cds-text~=justify]{text-align:justify!important}[cds-text~=left]{text-align:left!important}[cds-text~=right]{text-align:right!important}[cds-text~=center]{text-align:center!important}[cds-text~=lhe]{padding:.05px 0}[cds-text~=lhe]::before{content:"";margin-top:-.124em;display:block;height:0}[cds-text~=lhe]::after{content:"";margin-bottom:-.221em;display:block;height:0}[cds-text*=h2],[cds-text*=h3]{font-family:var(--cds-global-typography-header-font-family, "Clarity City", "Avenir Next", sans-serif);font-size:1.4rem;font-weight:200;color:var(--cds-global-typography-color-400);line-height:1.7143em;letter-spacing:-.017857em}[cds-text*=h2]::before{content:"";display:block;height:0;width:0;margin-bottom:calc(((var(--cds-global-typography-top-gap-height,.1475em) + calc((1.7143em - 1em)/ 2))*-1) + .037em)}[cds-text*=h2]::after{content:"";display:block;height:0;width:0;margin-top:calc((((1em - var(--cds-global-typography-top-gap-height,.1475em) - var(--cds-global-typography-ascender-height,.1703em) - var(--cds-global-typography-x-height,.517em)) + calc((1.7143em - 1em)/ 2))*-1) - .044em)}[cds-text*=h3]{font-size:1.1rem;line-height:1.0909em;letter-spacing:-.013636em}[cds-text*=h3]::before{content:"";display:block;height:0;width:0;margin-bottom:calc(((var(--cds-global-typography-top-gap-height,.1475em) + calc((1.0909em - 1em)/ 2))*-1) + .037em)}[cds-text*=h3]::after{content:"";display:block;height:0;width:0;margin-top:calc((((1em - var(--cds-global-typography-top-gap-height,.1475em) - var(--cds-global-typography-ascender-height,.1703em) - var(--cds-global-typography-x-height,.517em)) + calc((1.0909em - 1em)/ 2))*-1) - .044em)}:host{all:initial;display:block;visibility:inherit;font-family:var(--cds-global-typography-font-family, "Clarity City", "Avenir Next", sans-serif);contain:layout;box-sizing:border-box!important;-webkit-appearance:none!important}*,:after,:before{box-sizing:inherit!important}slot{font-family:var(--cds-global-typography-font-family, "Clarity City", "Avenir Next", sans-serif);display:contents!important}::slotted(*){font-family:inherit;box-sizing:inherit}::slotted(*)::placeholder{color:var(--cds-global-typography-color-200,var(--cds-global-color-construction-600,#4f6169))}:host([_is-anchor]),:host([role=button]){cursor:pointer!important}:host([_is-anchor]) ::slotted(*),:host([role=button]) ::slotted(*){cursor:pointer!important}:host([role=button][disabled]){cursor:not-allowed!important}:host([role=button][disabled]) ::slotted(*){cursor:not-allowed!important;pointer-events:none}:host([hidden]),[hidden]{display:none!important}:host([hidden*=false]){display:block!important}:host([role=dialog][hidden]),:host([role=dialog][hidden]) ::slotted(*){display:block!important;visibility:hidden!important}:host([role=dialog][hidden*=false]),:host([role=dialog][hidden*=false]) ::slotted(*){visibility:visible!important}:host([_focused]) .input,:host([_focused]) [focusable],:host([tabindex="0"]:focus),:host([tabindex="0"]:focus) [focusable],[tabindex="0"][focusable]:focus{outline:Highlight solid 2px;outline:5px auto -webkit-focus-ring-color;outline-offset:var(--cds-alias-object-interaction-outline-offset,1px)}`;function uF(c){return`calc((${c} / var(--cds-global-base)) * 1rem)`}const LNe=(c,l)=>"method"===l.kind&&l.descriptor&&!("value"in l.descriptor)?{...l,finisher(a){a.createProperty(l.key,c)}}:{kind:"field",key:Symbol(),placement:"own",descriptor:{},originalKey:l.key,initializer(){"function"==typeof l.initializer&&(this[l.key]=l.initializer.call(this))},finisher(a){a.createProperty(l.key,c)}};function BY(c){return(l,a)=>void 0!==a?void l.constructor.createProperty(a,c):LNe(c,l)}function UY(c,l){switch(l&&l.type){case Array:case Object:return{reflect:!1,...l};case String:return{reflect:!0,attribute:fm(c),converter:{toAttribute:a=>a||null},...l};case Number:return{reflect:!0,attribute:fm(c),...l};case Boolean:return{reflect:!0,attribute:fm(c),converter:{toAttribute:a=>a?"":null,fromAttribute:a=>function vNe(c){return null!=c&&""+c!="false"}(a)},...l};case Date:return{reflect:!1,converter:{fromAttribute:a=>new Date(a)},...l};default:return{...l}}}function Ji(c){return(l,a)=>(c?.required&&function ONe(c,l,a){const h=c.firstUpdated;c.firstUpdated=function(d){if(a&&a.required&&Mf(this[l])){const f=a.requiredMessage||function(m="warning",g,y){const v=y.toLocaleLowerCase();return`${Fq(m)}: ${g} is required to use ${v} component. Set the JS Property or HTML Attribute.\n\n`+(Rq()?`Angular: <${v} [${g}]="..."></${v}>\n`:"")+(Lq()?`Vue: <${v} :${g}="..."></${v}>\n`:"")+(Pq()?`React: <${function KLe(c){return Fq(function ZLe(c){return c.split("-").map((l,a)=>a?l.charAt(0).toUpperCase()+l.slice(1).toLowerCase():l).join("")}(c))}(v)} ${_=g,_.startsWith("aria")?fm(_):_}={...} />\n`:"")+`HTML: <${v} ${fm(g)}="..."></${v}>\nJavaScript: document.querySelector('${v}').${g} = '...';\n\n`;var _}(a.required,l,this.tagName);if("error"===a.required)throw Error(f);pm.warn(f,this)}h&&h.call(this,d)}}(l,a,c),BY(UY(a,c))(l,a))}function GY(c){return(l,a)=>{const h=UY(a,c);return h&&(h.reflect=!!c?.reflect&&c.reflect,h.reflect&&!c?.attribute&&(h.attribute="_"+fm(a))),BY(h)(l,a)}}var Nu,kNe=tF`@keyframes fadeInAndOut{0%,to{opacity:0}75%{opacity:1}}:host{--color:currentColor;display:inline-block;height:var(--cds-global-space-7,calc(16 * 1rem / var(--cds-global-base,20)));width:var(--cds-global-space-7,calc(16 * 1rem / var(--cds-global-base,20)));min-height:var(--cds-global-space-7,calc(16 * 1rem / var(--cds-global-base,20)));min-width:var(--cds-global-space-7,calc(16 * 1rem / var(--cds-global-base,20)));margin:0;vertical-align:middle;fill:var(--color);color:var(--color);contain:strict;cursor:inherit}svg{display:block}:host([size*=xs]){height:var(--cds-global-space-5,calc(8 * 1rem / var(--cds-global-base,20)));width:var(--cds-global-space-5,calc(8 * 1rem / var(--cds-global-base,20)));min-height:var(--cds-global-space-5,calc(8 * 1rem / var(--cds-global-base,20)));min-width:var(--cds-global-space-5,calc(8 * 1rem / var(--cds-global-base,20)))}:host([size*=sm]){height:var(--cds-global-space-7,calc(16 * 1rem / var(--cds-global-base,20)));width:var(--cds-global-space-7,calc(16 * 1rem / var(--cds-global-base,20)));min-height:var(--cds-global-space-7,calc(16 * 1rem / var(--cds-global-base,20)));min-width:var(--cds-global-space-7,calc(16 * 1rem / var(--cds-global-base,20)))}:host([size*=md]){height:var(--cds-global-space-9,calc(24 * 1rem / var(--cds-global-base,20)));width:var(--cds-global-space-9,calc(24 * 1rem / var(--cds-global-base,20)));min-height:var(--cds-global-space-9,calc(24 * 1rem / var(--cds-global-base,20)));min-width:var(--cds-global-space-9,calc(24 * 1rem / var(--cds-global-base,20)))}:host([size*=lg]){height:var(--cds-global-space-11,calc(36 * 1rem / var(--cds-global-base,20)));width:var(--cds-global-space-11,calc(36 * 1rem / var(--cds-global-base,20)));min-height:var(--cds-global-space-11,calc(36 * 1rem / var(--cds-global-base,20)));min-width:var(--cds-global-space-11,calc(36 * 1rem / var(--cds-global-base,20)))}:host([size*=xl]){height:var(--cds-global-space-12,calc(48 * 1rem / var(--cds-global-base,20)));width:var(--cds-global-space-12,calc(48 * 1rem / var(--cds-global-base,20)));min-height:var(--cds-global-space-12,calc(48 * 1rem / var(--cds-global-base,20)));min-width:var(--cds-global-space-12,calc(48 * 1rem / var(--cds-global-base,20)))}:host([size*=xxl]){height:calc(var(--cds-global-space-13,calc(64 * 1rem / var(--cds-global-base,20))) - var(--cds-global-space-5,calc(8 * 1rem / var(--cds-global-base,20))));width:calc(var(--cds-global-space-13,calc(64 * 1rem / var(--cds-global-base,20))) - var(--cds-global-space-5,calc(8 * 1rem / var(--cds-global-base,20))));min-height:calc(var(--cds-global-space-13,calc(64 * 1rem / var(--cds-global-base,20))) - var(--cds-global-space-5,calc(8 * 1rem / var(--cds-global-base,20))));min-width:calc(var(--cds-global-space-13,calc(64 * 1rem / var(--cds-global-base,20))) - var(--cds-global-space-5,calc(8 * 1rem / var(--cds-global-base,20))))}:host([size*=fit]){height:auto;width:auto;contain:layout}:host([status=success]){--color:var(--cds-alias-status-success, var(--cds-global-color-green-700, #42810e))}:host([status=danger]){--color:var(--cds-alias-status-danger, var(--cds-global-color-red-700, #e02200))}:host([status=warning]){--color:var(--cds-alias-status-warning-dark, var(--cds-global-color-ochre-800, #a36500))}:host([status=info]){--color:var(--cds-alias-status-info-shade, var(--cds-global-color-blue-800, #00608a))}:host([inverse]){--color:var(--cds-global-color-construction-200, #cbd4d8)}:host([direction=up]){transform:rotate(0)}:host([direction=down]){transform:rotate(180deg)}:host([direction=right]){transform:rotate(90deg)}:host([direction=left]){transform:rotate(270deg)}:host([flip=horizontal]){transform:scale(-1) rotateX(180deg)}:host([flip=vertical]){transform:scale(-1) rotateY(180deg)}.alert,.badge{fill:var(--badge-color,var(--cds-alias-status-danger,var(--cds-global-color-red-700,#e02200)))}:host([badge=success]){--badge-color:var(--cds-alias-status-success, var(--cds-global-color-green-700, #42810e))}:host([badge=danger]){--badge-color:var(--cds-alias-status-danger, var(--cds-global-color-red-700, #e02200))}:host([badge*=warning]){--badge-color:var(--cds-alias-status-warning-dark, var(--cds-global-color-ochre-800, #a36500))}:host([badge=inherit]){--badge-color:currentColor}:host([badge=info]){--badge-color:var(--cds-alias-status-info, var(--cds-global-color-blue-700, #0079ad))}:host([badge=inherit-triangle]){--badge-color:currentColor}:host([badge][inverse]){--badge-color:var(--cds-alias-status-danger, var(--cds-global-color-red-700, #e02200))}:host([badge=success][inverse]){--badge-color:var(--cds-alias-status-success, var(--cds-global-color-green-700, #42810e))}:host([badge*=warning][inverse]){--badge-color:var(--cds-alias-status-warning-dark, var(--cds-global-color-ochre-800, #a36500))}:host([badge*=inherit][inverse]){--badge-color:currentColor}:host([badge=info][inverse]){--badge-color:var(--cds-alias-status-info, var(--cds-global-color-blue-700, #0079ad))}.cds-internal-dot-1{animation:fadeInAndOut 1.8s ease-in 0s infinite}.cds-internal-dot-2{animation:fadeInAndOut 1.8s ease-out .422s infinite}.cds-internal-dot-3{animation:fadeInAndOut 1.8s ease-out .675s infinite}@media (prefers-reduced-motion){.cds-internal-dot-1,.cds-internal-dot-2,.cds-internal-dot-3{animation:none}}`;function GNe(c,l){let a="";switch(function VNe(c){switch(!0){case Mf(c):return Nu.NilSizeValue;case function zY(c){return["xxs","xs","sm","md","lg","xl","xxl"].indexOf(c)>-1}(c):return Nu.ValidSizeString;case function wq(c){return CN(c)&&!Tq(c.trim())&&+c==+c}(c):return Nu.ValidNumericString;default:return Nu.BadSizeValue}}(function BNe(c){return Mf(c)?"":function QLe(c,l,a=""){const h=c.split(" "),d=""===a?h.filter(f=>f!==l):h.map(f=>f===l?a:f);return d.length>0?d.join(" "):""}(c,"fit")}(l))){case Nu.ValidNumericString:return a=uF(parseInt(l)),void function RNe(c,...l){l.forEach(([a,h])=>{c.style[a]=h})}(c,...function UNe(c,l){return!xb(c)&&c.indexOf("fit")>-1?[["width","auto"],["height","auto"],["min-width",l],["min-height",l]]:[["width",l],["height",l],["min-width",l],["min-height",l]]}(l,a));case Nu.ValidSizeString:case Nu.NilSizeValue:return void function PNe(c,...l){l.forEach(a=>{c.style[a]=""})}(c,"width","height","min-width","min-height");default:return}}function hF(c){return c.badge&&("inherit-triangle"===c.badge||"warning-triangle"===c.badge)}!function(c){c.BadSizeValue="bad-value",c.ValidSizeString="value-is-string",c.ValidNumericString="value-is-numeric",c.NilSizeValue="value-is-nil"}(Nu||(Nu={}));class Ic extends Ev{constructor(){super(...arguments),this._shape="unknown",this.solid=!1,this.inverse=!1}static get styles(){return[VY,kNe]}get shape(){return this._shape}set shape(l){if(function ULe(c,l){return!Mf(c)&&xq(c,l)}(l,this._shape)){const a=this._shape;this._shape=l,this.requestUpdate("shape",a)}}get size(){return this._size}set size(l){if(function BLe(c,l){return function VLe(c){return EE(String,c)||xb(c)}(c)&&xq(c,l)}(l,this._size)){const a=this._size;this._size=l,GNe(this,l),this.requestUpdate("size",a)}}updated(l){if(l.has("innerOffset")&&this.innerOffset>0){const a=uF(-1*this.innerOffset),h=`calc(100% + ${uF(2*this.innerOffset)})`;this.svg.style.width=h,this.svg.style.height=h,this.svg.style.margin=`${a} 0 0 ${a}`}}firstUpdated(l){if(super.firstUpdated(l),this.isConnected){let a="unknown";this.subscription=ls.stateUpdates.subscribe(h=>{"iconRegistry"===h.key&&Rr.registry[this.shape]&&a!==this.shape&&(a=this.shape,this.requestUpdate("shape"))})}}disconnectedCallback(){super.disconnectedCallback(),this.subscription?.unsubscribe()}render(){return CN(Rr.registry[this.shape])?aF`<span .innerHTML="${Rr.registry[this.shape]}"></span>`:MNe`<svg .innerHTML="${function HNe(c){const l=Rr.registry[c.shape]??Rr.registry.unknown;let a=c.solid&&l.solid?l.solid:l.outline;return c.badge&&!hF(c)&&(a=c.solid?l.solidBadged??a:l.outlineBadged??a),hF(c)&&(a=c.solid?l.solidAlerted??a:l.outlineAlerted??a),a}(this)+function zNe(c){let l="";return c.badge&&hF(c)?l='<path d="M26.85 1.14L21.13 11a1.28 1.28 0 001.1 2h11.45a1.28 1.28 0 001.1-2l-5.72-9.86a1.28 1.28 0 00-2.21 0z" class="alert" />':c.badge&&(l='<circle cx="30" cy="6" r="5" class="badge" />'),l}(this)}" viewBox="0 0 36 36" xmlns="http://www.w3.org/2000/svg" aria-hidden="true"></svg>`}}Ai([Ji({type:String})],Ic.prototype,"shape",null),Ai([Ji({type:String})],Ic.prototype,"size",null),Ai([Ji({type:String})],Ic.prototype,"direction",void 0),Ai([Ji({type:String})],Ic.prototype,"flip",void 0),Ai([Ji({type:Boolean})],Ic.prototype,"solid",void 0),Ai([Ji({type:String})],Ic.prototype,"status",void 0),Ai([Ji({type:Boolean})],Ic.prototype,"inverse",void 0),Ai([Ji({type:String})],Ic.prototype,"badge",void 0),Ai([GY({type:Number})],Ic.prototype,"innerOffset",void 0),Ai([function FNe(c,l){return(({finisher:c,descriptor:l})=>(a,h)=>{var d;if(void 0===h){const f=null!==(d=a.originalKey)&&void 0!==d?d:a.key,m=null!=l?{kind:"method",placement:"prototype",key:f,descriptor:l(a.key)}:{...a,key:f};return null!=c&&(m.finisher=function(g){c(g,f)}),m}{const f=a.constructor;void 0!==l&&Object.defineProperty(a,h,l(h)),c?.(f,h)}})({descriptor:a=>{const h={get(){var d,f;return null!==(f=null===(d=this.renderRoot)||void 0===d?void 0:d.querySelector(c))&&void 0!==f?f:null},enumerable:!0,configurable:!0};if(l){const d="symbol"==typeof a?Symbol():"__"+a;h.get=function(){var f,m;return void 0===this[d]&&(this[d]=null!==(m=null===(f=this.renderRoot)||void 0===f?void 0:f.querySelector(c))&&void 0!==m?m:null),this[d]}}return h}})}("svg")],Ic.prototype,"svg",void 0),iY("cds-icon",Ic);class WNe{constructor(l){this.host=l,this.host.addController(this)}hostConnected(){var l=this;return ym(function*(){yield l.host.updateComplete,l.host.addEventListener("keydown",a=>l.emulateActive(a)),l.host.addEventListener("mousedown",a=>l.emulateActive(a)),l.host.addEventListener("keyup",()=>l.emulateInactive()),l.host.addEventListener("blur",()=>l.emulateInactive()),l.host.addEventListener("mouseup",()=>l.emulateInactive())})()}emulateActive(l){this.host.disabled||this.host?.setAttribute("cds-active",""),"Space"===l.code&&l.target===this.host&&l.preventDefault()}emulateInactive(){this.host.removeAttribute("cds-active")}}class qNe{constructor(l){this.host=l,this.host.addController(this)}hostConnected(){this.host.popup&&(this.host.ariaControls=this.host.popup,this.host.ariaHasPopup="true",this.host.ariaExpanded="false")}}class YNe{constructor(l){this.host=l,this.host.addController(this)}hostUpdated(){null!==this.host.disabled&&(this.host.ariaDisabled=this.host.disabled),this.host.readonly&&(this.host.ariaDisabled=null)}}class KNe{constructor(l){this.host=l,this.host.addController(this)}hostUpdated(){null!=this.host.pressed&&(this.host.ariaPressed=this.host.pressed?"true":"false"),this.host.readonly&&(this.host.ariaPressed=null)}}class JNe{constructor(l){this.host=l,this.host.addController(this)}hostConnected(){this.host.tabIndex=0}hostUpdated(){this.host.role=this.host.readonly?null:"button",this.host.tabIndex=this.host.disabled?-1:0,this.host.readonly&&this.host.removeAttribute("tabindex")}}class tFe{constructor(l){this.host=l,this.host.addController(this)}get currentAnchor(){return"A"===this.host.parentElement?.tagName?this.host.parentElement:null}hostConnected(){this.setAnchor()}hostUpdated(){this.setAnchor()}setAnchor(){this.currentAnchor&&this.currentAnchor!==this.previousAnchor&&(this.previousAnchor=this.currentAnchor,this.host.readonly=!0,this.currentAnchor.style.lineHeight="0",this.currentAnchor.style.textDecoration="none")}}const dF=c=>c??Gs;function HY(c){c.preventDefault(),c.stopPropagation()}const fF=new Map([["arrow-left","ArrowLeft"],["arrow-right","ArrowRight"],["arrow-up","ArrowUp"],["arrow-down","ArrowDown"],["tab","Tab"],["enter","Enter"],["escape","Escape"],["space"," "],["home","Home"],["end","End"]]);var Fu;!function(c){c.ArrowUp="ArrowUp",c.ArrowDown="ArrowDown",c.ArrowLeft="ArrowLeft",c.ArrowRight="ArrowRight",c.End="End",c.Home="Home",c.PageUp="PageUp",c.PageDown="PageDown"}(Fu||(Fu={}));class hFe{constructor(l){this.host=l,this.triggerNativeButtonBehaviorHandler=this.triggerNativeButtonBehavior.bind(this),this.emulateKeyBoardEventBehaviorHandler=this.emulateKeyBoardEventBehavior.bind(this),this.host.addController(this)}hostUpdated(){this.setButtonType(),this.setupNativeButtonBehavior()}setButtonType(){!this.host.type&&this.host.closest("form")&&(this.host.type="submit")}setupNativeButtonBehavior(){this.host.readonly||this.host.disabled?(this.host.removeEventListener("click",this.triggerNativeButtonBehaviorHandler),this.host.removeEventListener("keyup",this.emulateKeyBoardEventBehaviorHandler)):(this.host.addEventListener("click",this.triggerNativeButtonBehaviorHandler),this.host.addEventListener("keyup",this.emulateKeyBoardEventBehaviorHandler))}emulateKeyBoardEventBehavior(l){!function sFe(c,l,a){c.filter(h=>function pF(c,l){return class rFe{static get keycodes(){return HLe(fF)}static add(l,a){fF.set(l,a)}static has(l){return fF.has(l)}static getCode(l,a=this.keycodes){return function iFe(c,l){return l.get(c)||""}(l,a)}}.getCode(l)===c.key}(l,h)).length>0&&a()}(["enter","space"],l,()=>{"submit"===this.host.type?this.triggerNativeButtonBehavior(l):this.host.click(),HY(l)})}triggerNativeButtonBehavior(l){if(this.host.disabled)HY(l);else if(!l.defaultPrevented){const a=function cFe(c,l,a){const h=document.createElement("div");l.appendChild(h),AY(c,l,{renderBefore:h,...a});const d=h.previousSibling;return h.remove(),d}(aF`<button aria-hidden="true" role="presentation" ?disabled="${this.host.disabled}" tabindex="-1" style="display:none!important" value="${dF(this.host.value)}" name="${dF(this.host.name)}" type="${dF(this.host.type)}"></button>`,this.host);a?.dispatchEvent(new MouseEvent("click",{relatedTarget:this.host,composed:!0})),a?.remove()}}}class fFe{constructor(l){this.host=l,this.host.addController(this)}hostUpdated(){null!=this.host.expanded&&(this.host.ariaExpanded=this.host.expanded?"true":"false"),this.host.readonly&&(this.host.ariaExpanded=null)}}let Rc=class extends Ev{constructor(){super(...arguments),this.disabled=!1}};Ai([Ji({type:Boolean})],Rc.prototype,"pressed",void 0),Ai([Ji({type:Boolean})],Rc.prototype,"expanded",void 0),Ai([Ji({type:Boolean})],Rc.prototype,"readonly",void 0),Ai([Ji({type:String})],Rc.prototype,"type",void 0),Ai([Ji({type:String})],Rc.prototype,"name",void 0),Ai([Ji({type:String})],Rc.prototype,"value",void 0),Ai([Ji({type:Boolean})],Rc.prototype,"disabled",void 0),Ai([Ji({type:String})],Rc.prototype,"popup",void 0),Rc=Ai([function jNe(){return c=>c.addInitializer(l=>new WNe(l))}(),function QNe(){return c=>c.addInitializer(l=>new JNe(l))}(),function ZNe(){return c=>c.addInitializer(l=>new KNe(l))}(),function dFe(){return c=>c.addInitializer(l=>new fFe(l))}(),function $Ne(){return c=>c.addInitializer(l=>new YNe(l))}(),function XNe(){return c=>c.addInitializer(l=>new qNe(l))}(),function uFe(){return c=>c.addInitializer(l=>new hFe(l))}(),function eFe(){return c=>c.addInitializer(l=>new tFe(l))}()],Rc);const tM={actions:{sort:"Sort",expand:"Expand",close:"Close",resize:"Resize",filter:"Filter"},alert:{closeButtonAriaLabel:"Close",loading:"Loading",info:"Info",success:"Success",warning:"Warning",danger:"Error"},dropdown:{open:"Open"},file:{browse:"browse",files:"files",removeFile:"remove file"},modal:{closeButtonAriaLabel:"Close modal",contentStart:"Beginning of modal content",contentBox:"Scrollable modal body",contentEnd:"End of modal content"},navigation:{navigationElement:"navigation",navigationLabel:"navigation menu",navigationAbridgedText:"View abridged menu",navigationUnabridgedText:"View unabridged menu"},overlay:{closeButtonAriaLabel:"Close dialog",contentStart:"Beginning of dialog content",contentEnd:"End of dialog content"},popup:{closeButtonAriaLabel:"Close popup",contentStart:"Beginning of popup content",contentEnd:"End of popup content"},password:{showButtonAriaLabel:"Show password",hideButtonAriaLabel:"Hide password"},progress:{loading:"Loading",looping:"Loading"},treeview:{loading:"Loading"},grid:{resizeColumn:"Resize Column",closeDetails:"Close Details",noData:"No Results Found",rowDetailStart:"Start of row details",rowDetailEnd:"End of row details",footerEnd:"End of grid rows",action:"Action",dropTarget:"Drop Item",pagination:{label:"grid pagination",firstPage:"go to first page",previousPage:"go to previous page",nextPage:"go to next page",lastPage:"go to last page",pageSize:"rows per page",page:"page"}}};class Sm{static get keys(){return 0===Object.keys(ls.state.i18nRegistry).length&&(ls.state.i18nRegistry=dm(tM,ls.state.i18nRegistry)),dm(tM,ls.state.i18nRegistry)}static findKey(l){const a=Sm.keys;return Object.keys(a).find(h=>Eq(a[h],l))}static get(l){return l&&Sm.keys[l]||{}}static reset(){ls.state.i18nRegistry=dm({},tM)}static hydrate(l,a){return JSON.parse(function e2e(c,l,a){return c.replace(/\$\{.+?\}/g,h=>function zLe(c,l,a=`\${${c}}`){return c.split(".").reduce((h,d)=>{try{const f=h[d];switch(!0){case null===f:case!1===f:case""===f:case 0===f:return f;default:return f||a}}catch{return a}},l)}(h.substr(2,h.length-3).trim(),l,a))}(JSON.stringify(l),a))}static localize(l){ls.state.i18nRegistry=dm(tM,ls.state.i18nRegistry,l)}}var yFe=tF`:host{--icon-width:var(--cds-global-space-7, calc(16 * 1rem / var(--cds-global-base, 20)));--icon-height:var(--cds-global-space-7, calc(16 * 1rem / var(--cds-global-base, 20)));--width:var(--icon-width);--height:var(--icon-width);--cursor:pointer;--color:var(--cds-global-typography-color-300, var(--cds-global-color-construction-800, #2d4048));--font-size:var(--cds-global-typography-font-size-3, calc(13 * 1rem / var(--cds-global-base, 20)));--background:transparent;--padding:0;--outline:var(--cds-alias-object-interaction-outline, Highlight solid 2px);--outline-offset:calc(var(--cds-alias-object-interaction-outline-offset, 1px) * -1);pointer-events:none;display:inline-block;outline:0!important}:host([role=button]){pointer-events:initial;cursor:var(--cursor)!important}:host([status=active]){--color:var(--cds-alias-status-info, var(--cds-global-color-blue-700, #0079ad))}::slotted([shape=close]),::slotted([shape=info-circle]),::slotted([shape=times]),:host([shape=close]),:host([shape=info-circle]){--icon-width:var(--cds-global-space-8, calc(18 * 1rem / var(--cds-global-base, 20)));--icon-height:var(--cds-global-space-8, calc(18 * 1rem / var(--cds-global-base, 20)))}:host(:hover){--color:var(--cds-alias-object-interaction-color-hover, var(--cds-global-color-construction-1000, #1b2b32))}:host(:active){--color:var(--cds-alias-object-interaction-color-active, var(--cds-global-color-construction-1000, #1b2b32))}:host(:active) .private-host{transform:translateY(calc(var(--cds-global-space-1,calc(1 * 1rem / var(--cds-global-base,20)))/ 2))}:host([disabled]){--color:var(--cds-alias-object-interaction-color-disabled, var(--cds-global-color-construction-300, #aeb8bc))}.private-host{--icon-color:var(--color);background:var(--background);padding:var(--padding);color:var(--color);font-size:var(--font-size);display:flex;justify-content:center;align-items:center;min-width:var(--width);min-height:var(--height)}::slotted(cds-icon),cds-icon{width:var(--icon-width);height:var(--icon-height);pointer-events:none}::slotted(cds-icon:not([status])),cds-icon{--color:var(--icon-color)}:host([disabled]:active){pointer-events:none!important}.private-host::after{content:"";position:absolute;left:calc(-1*var(--width) - 1);top:calc(-1*var(--height) - 1);width:var(--cds-alias-object-interaction-touch-target,calc(36 * 1rem / var(--cds-global-base,20)));height:var(--cds-alias-object-interaction-touch-target,calc(36 * 1rem / var(--cds-global-base,20)))}:host([disabled]) .private-host::after{outline:0!important}:host(:focus) .private-host::after{outline:var(--outline);outline-offset:var(--outline-offset)}@media (-webkit-min-device-pixel-ratio:0){:host(:focus) .private-host::after{outline-color:-webkit-focus-ring-color}}`;class bm extends Rc{constructor(){super(...arguments),this.i18n=Sm.keys.actions,this.cdsButtonAction=!0}render(){return aF`<div class="private-host"><slot><cds-icon .shape="${this.shape?this.shape:"ellipsis-vertical"}" .size="${this.iconSize}" ?solid="${this.pressed||this.expanded}" inner-offset="${1}"></cds-icon></slot></div>`}updated(l){super.updated(l),this.ariaLabel||this.readonly||pm.warn("A aria-label is required for interactive cds-button-action type",this),l.has("readonly")&&(this.ariaHidden=this.readonly&&!this.hasAttribute("aria-label")?"true":null)}}bm.styles=[VY,yFe],Ai([Ji({type:String})],bm.prototype,"shape",void 0),Ai([Ji({type:String,reflect:!0})],bm.prototype,"action",void 0),Ai([Ji({type:String})],bm.prototype,"iconSize",void 0),Ai([function pFe(){return(c,l)=>{const a=c.connectedCallback,h=c.disconnectedCallback;c.connectedCallback=function(){c.__i18nSub=ls.stateUpdates.subscribe(f=>{"i18nRegistry"===f.key&&this.requestUpdate(l)}),a&&a.apply(this)},c.disconnectedCallback=function(){c.__i18nSub.unsubscribe(),h&&h.apply(this)};const d={get(){const f=dm(Sm.keys[this.__i18nKey],this.__i18n||{});return Sm.hydrate(f,this)},set(f){const m=function mFe(c,l){if(Mf(c)){let a={};if(l.hasAttribute("cds-i18n")){const h=l.getAttribute("cds-i18n")+"";if(Mf(h))a={};else try{a=JSON.parse(h)}catch{pm.warn("Clarity i18n: Invalid JSON passed to cds-i18n"),a={}}}return a}return c}(f,this),g=function gFe(c,l,a,h){return Mf(c)?Eq(a,h)?{update:!1}:{update:!0,values:a}:c===l?{update:!1,values:{}}:{update:!0,key:c,values:{}}}(Sm.findKey(m)||"",this.__i18nKey,m,this.__i18n);void 0!==g.key&&(this.__i18nKey=g.key+""),void 0!==g.values&&(this.__i18n={...g.values}),!0===g.update&&this.requestUpdate(),this.requestUpdate(l)},enumerable:!0,configurable:!0};return void 0!==l?function(f,m,g){const y=Object.defineProperty(m,g,f);return Ji({type:Object,attribute:"cds-i18n"})(y,g)}(d,c,l):function(f,m){const g={kind:"method",placement:"prototype",key:m.key,descriptor:f};return Ji({type:Object})(g)}(d,c)}}()],bm.prototype,"i18n",void 0),Ai([GY({type:Boolean,reflect:!0,attribute:"cds-button-action"})],bm.prototype,"cdsButtonAction",void 0);class WY extends bm{constructor(){super(...arguments),this.shape="close"}connectedCallback(){super.connectedCallback(),this.ariaLabel=this.ariaLabel?this.ariaLabel:this.i18n.close}}Ai([Ji({type:String})],WY.prototype,"shape",void 0),iY("cds-internal-close-button",WY),Rr.addIcons(Wq),Rr.addAliases(["times",["close"]]);const hn=["*"];function $Fe(c,l){1&c&&xe(0,"label")}const YFe=[[["","clrCheckbox",""],["","clrToggle",""]],[["label"]]],ZFe=["[clrCheckbox],[clrToggle]","label"];function KFe(c,l){1&c&&xe(0,"label")}function QFe(c,l){1&c&&ke(0,2,["*ngIf","showHelper"])}function JFe(c,l){1&c&&xe(0,"cds-icon",5)}function eke(c,l){1&c&&xe(0,"cds-icon",6)}function tke(c,l){1&c&&ke(0,3,["*ngIf","showInvalid"])}function nke(c,l){1&c&&ke(0,4,["*ngIf","showValid"])}const rke=[[["label"]],[["clr-checkbox-wrapper"],["clr-toggle-wrapper"]],[["clr-control-helper"]],[["clr-control-error"]],[["clr-control-success"]]],ike=["label","clr-checkbox-wrapper,clr-toggle-wrapper","clr-control-helper","clr-control-error","clr-control-success"];function uke(c,l){1&c&&xe(0,"label")}function hke(c,l){1&c&&xe(0,"cds-icon",5)}function dke(c,l){1&c&&xe(0,"cds-icon",6)}function fke(c,l){1&c&&ke(0,2,["*ngIf","showHelper"])}function pke(c,l){1&c&&ke(0,3,["*ngIf","showInvalid"])}function mke(c,l){1&c&&ke(0,4,["*ngIf","showValid"])}const gke=[[["label"]],[["","clrInput",""]],[["clr-control-helper"]],[["clr-control-error"]],[["clr-control-success"]]],yke=["label","[clrInput]","clr-control-helper","clr-control-error","clr-control-success"];function kke(c,l){1&c&&xe(0,"label")}const Vke=[[["","clrRadio",""]],[["label"]]],Bke=["[clrRadio]","label"];function Uke(c,l){1&c&&xe(0,"label")}function Gke(c,l){1&c&&xe(0,"span",6),2&c&&Kg("width",de().getRangeProgressFillWidth())}function zke(c,l){1&c&&xe(0,"cds-icon",7)}function Hke(c,l){1&c&&xe(0,"cds-icon",8)}function jke(c,l){1&c&&ke(0,2,["*ngIf","showHelper"])}function Wke(c,l){1&c&&ke(0,3,["*ngIf","showInvalid"])}function Xke(c,l){1&c&&ke(0,4,["*ngIf","showValid"])}const qke=[[["label"]],[["","clrRange",""]],[["clr-control-helper"]],[["clr-control-error"]],[["clr-control-success"]]],$ke=["label","[clrRange]","clr-control-helper","clr-control-error","clr-control-success"];function Yke(c,l){1&c&&xe(0,"label")}function Zke(c,l){1&c&&xe(0,"cds-icon",5)}function Kke(c,l){1&c&&xe(0,"cds-icon",6)}function Qke(c,l){1&c&&ke(0,2,["*ngIf","showHelper"])}function Jke(c,l){1&c&&ke(0,3,["*ngIf","showInvalid"])}function e3e(c,l){1&c&&ke(0,4,["*ngIf","showValid"])}const t3e=[[["label"]],[["","clrSelect",""]],[["clr-control-helper"]],[["clr-control-error"]],[["clr-control-success"]]],n3e=["label","[clrSelect]","clr-control-helper","clr-control-error","clr-control-success"],r3e=["anchor"];function i3e(c,l){if(1&c&&(U(0,"div",4)(1,"div",5)(2,"button",6),xe(3,"cds-icon",7),H()(),ke(4),H()),2&c){const a=de();G("id",a.popoverId),Ne("aria-label",a.commonStrings.keys.datagridFilterDialogAriaLabel),B(3),Ne("title",a.commonStrings.keys.close)}}const s3e=["input_low"],o3e=["input"],a3e=["columnPortal"];function l3e(c,l){1&c&&ke(0)}const c3e=["resizeTracker"],u3e=["columnHandle"];function h3e(c,l){1&c&&ba(0)}function d3e(c,l){1&c&&xe(0,"cds-icon",10),2&c&&Ne("direction",de(2).sortDirection)}function f3e(c,l){if(1&c){const a=Xt();U(0,"button",7),Me("click",function(){return vt(a),_t(de().sort())}),le(1,h3e,1,0,"ng-container",8),le(2,d3e,1,1,"cds-icon",9),H()}if(2&c){const a=de(),h=Ki(6);B(1),G("ngTemplateOutlet",h),B(1),G("ngIf",a.sortDirection)}}function p3e(c,l){if(1&c){const a=Xt();U(0,"clr-dg-string-filter",11),Me("clrFilterValueChange",function(d){return vt(a),_t(de().filterValue=d)}),H()}if(2&c){const a=de();G("clrFilterPlaceholder",a.filterStringPlaceholderValue)("clrDgStringFilter",a.registered)("clrFilterValue",a.filterValue)}}function m3e(c,l){if(1&c){const a=Xt();U(0,"clr-dg-numeric-filter",12),Me("clrFilterValueChange",function(d){return vt(a),_t(de().filterValue=d)}),H()}if(2&c){const a=de();G("clrFilterMaxPlaceholder",a.filterMaxPlaceholderValue)("clrFilterMinPlaceholder",a.filterMinPlaceholderValue)("clrDgNumericFilter",a.registered)("clrFilterValue",a.filterValue)}}function g3e(c,l){1&c&&ke(0,1)}function y3e(c,l){1&c&&ba(0)}function v3e(c,l){if(1&c&&(U(0,"span",13),le(1,y3e,1,0,"ng-container",8),H()),2&c){de();const a=Ki(6);B(1),G("ngTemplateOutlet",a)}}function _3e(c,l){1&c&&xe(0,"clr-dg-column-separator")}const S3e=[[["clr-dg-filter"],["clr-dg-string-filter"],["clr-dg-numeric-filter"]],"*"],b3e=["clr-dg-filter, clr-dg-string-filter, clr-dg-numeric-filter","*"];function T3e(c,l){1&c&&xe(0,"div",4)}function w3e(c,l){1&c&&ke(0,0,["*ngIf","emptyDatagrid"])}function C3e(c,l){if(1&c&&(er(0),U(1,"button",1),xe(2,"cds-icon",2),H(),tr()),2&c){const a=de();B(2),Ne("title",a.commonStrings.keys.info)}}const x3e=["cellPortal"];function E3e(c,l){1&c&&ke(0)}const M3e=["rowPortal"];function D3e(c,l){1&c&&ke(0)}const A3e=["detailButton"],I3e=["stickyCells"],R3e=["scrollableCells"],P3e=["calculatedCells"];function L3e(c,l){}function O3e(c,l){if(1&c&&(U(0,"clr-expandable-animation",7),le(1,L3e,0,0,"ng-template",8),H()),2&c){const a=de(2),h=Ki(6);G("clrExpandTrigger",a.expandAnimationTrigger),B(1),G("ngTemplateOutlet",h)}}function N3e(c,l){}function F3e(c,l){1&c&&le(0,N3e,0,0,"ng-template",8),2&c&&(de(2),G("ngTemplateOutlet",Ki(6)))}function k3e(c,l){if(1&c){const a=Xt();U(0,"label",6),Me("mousedown",function(d){return vt(a),_t(de().clearRanges(d))}),le(1,O3e,2,2,"clr-expandable-animation",1),le(2,F3e,1,1,null,2),H()}if(2&c){const a=de();B(1),G("ngIf",a.expand.expandable),B(1),G("ngIf",!a.expand.expandable)}}function V3e(c,l){}function B3e(c,l){if(1&c&&(U(0,"clr-expandable-animation",7),le(1,V3e,0,0,"ng-template",8),H()),2&c){const a=de(),h=Ki(6);G("clrExpandTrigger",a.expandAnimationTrigger),B(1),G("ngTemplateOutlet",h)}}function U3e(c,l){}function G3e(c,l){1&c&&le(0,U3e,0,0,"ng-template",8),2&c&&(de(),G("ngTemplateOutlet",Ki(6)))}function z3e(c,l){1&c&&ke(0)}const $Y=function(c){return{"clr-form-control-disabled":c}};function H3e(c,l){if(1&c){const a=Xt();U(0,"div",19)(1,"div",20)(2,"input",21),Me("ngModelChange",function(d){return vt(a),_t(de(2).toggle(d))}),H(),U(3,"label",22),Me("click",function(d){return vt(a),_t(de(2).clearRanges(d))}),U(4,"span",23),ye(5),H()()()()}if(2&c){const a=de(2);G("ngClass",gi(8,$Y,!a.clrDgSelectable)),B(2),G("ngModel",a.selected)("id",a.checkboxId),Ne("disabled",!a.clrDgSelectable||null)("aria-disabled",!a.clrDgSelectable||null)("aria-label",a.clrDgRowAriaLabel),B(1),G("for",a.checkboxId),B(2),Zt(a.commonStrings.keys.select)}}function j3e(c,l){if(1&c){const a=Xt();U(0,"div",19)(1,"input",24),Me("ngModelChange",function(d){return vt(a),_t(de(2).selection.currentSingle=d)}),H()()}if(2&c){const a=de(2);G("ngClass",gi(9,$Y,!a.clrDgSelectable)),B(1),G("id",a.radioId)("name",a.selection.id+"-radio")("value",a.item)("ngModel",a.selection.currentSingle)("checked",a.selection.currentSingle===a.item),Ne("disabled",!a.clrDgSelectable||null)("aria-disabled",!a.clrDgSelectable||null)("aria-label",a.clrDgRowAriaLabel)}}function W3e(c,l){1&c&&(U(0,"div",25),ke(1,2),H())}function X3e(c,l){if(1&c){const a=Xt();U(0,"button",29),Me("click",function(){return vt(a),_t(de(4).toggleExpand())}),xe(1,"cds-icon",30),H()}if(2&c){const a=de(4);Ne("aria-expanded",a.expand.expanded)("aria-label",a.expand.expanded?a.clrDgDetailCloseLabel:a.clrDgDetailOpenLabel)("aria-controls",a.expandableId),B(1),Ne("direction",a.expand.expanded?"down":"right")("title",a.expand.expanded?a.commonStrings.keys.collapse:a.commonStrings.keys.expand)}}function q3e(c,l){if(1&c&&(U(0,"clr-spinner",31),ye(1),H()),2&c){const a=de(4);B(1),Zt(a.commonStrings.keys.loading)}}function $3e(c,l){if(1&c&&(er(0),le(1,X3e,2,5,"button",27),le(2,q3e,2,1,"clr-spinner",28),tr()),2&c){const a=de(3);B(1),G("ngIf",!a.expand.loading),B(1),G("ngIf",a.expand.loading)}}function Y3e(c,l){if(1&c&&(U(0,"div",26),le(1,$3e,3,2,"ng-container",2),H()),2&c){const a=de(2);B(1),G("ngIf",a.expand.expandable)}}function Z3e(c,l){if(1&c){const a=Xt();U(0,"div",32)(1,"button",33,34),Me("click",function(){vt(a);const d=Ki(2),f=de(2);return _t(f.detailService.toggle(f.item,d))}),xe(3,"cds-icon",35),H()()}if(2&c){const a=de(2);B(1),st("is-open",a.detailService.isRowOpen(a.item)),Ne("aria-label",a.detailService.isRowOpen(a.item)?a.clrDgDetailCloseLabel:a.clrDgDetailOpenLabel)("aria-expanded",a.detailService.isOpen)("aria-controls",a.detailService.id),B(2),Ne("direction",a.detailService.isRowOpen(a.item)?"left":"right")("title",a.detailService.isRowOpen(a.item)?a.commonStrings.keys.close:a.commonStrings.keys.open)}}function K3e(c,l){}function Q3e(c,l){1&c&&le(0,K3e,0,0,"ng-template",8),2&c&&(de(2),G("ngTemplateOutlet",Ki(4)))}function J3e(c,l){}function eVe(c,l){1&c&&le(0,J3e,0,0,"ng-template",8),2&c&&(de(2),G("ngTemplateOutlet",Ki(4)))}const tVe=function(c){return{"is-replaced":c}};function nVe(c,l){if(1&c&&(U(0,"div",9)(1,"div",10),er(2,null,11),le(4,H3e,6,10,"div",12),le(5,j3e,2,11,"div",12),le(6,W3e,2,0,"div",13),le(7,Y3e,2,1,"div",14),le(8,Z3e,4,7,"div",15),tr(),H(),U(9,"div",16)(10,"div",17),ke(11,1),ba(12,null,18),H(),le(14,Q3e,1,1,null,2),le(15,eVe,1,1,null,2),H()()),2&c){const a=de();st("datagrid-row-detail-open",a.detailService.isRowOpen(a.item)),G("id",a.id),B(4),G("ngIf",a.selection.selectionType===a.SELECTION_TYPE.Multi),B(1),G("ngIf",a.selection.selectionType===a.SELECTION_TYPE.Single),B(1),G("ngIf",a.rowActionService.hasActionableRow),B(1),G("ngIf",a.globalExpandable.hasExpandableRow),B(1),G("ngIf",a.detailService.enabled),B(1),G("ngClass",gi(11,tVe,a.replaced&&a.expanded)),B(5),G("ngIf",a.replaced&&!a.expand.loading),B(1),G("ngIf",!a.replaced&&!a.expand.loading)}}const rVe=[[["clr-dg-row-detail"]],[["clr-dg-cell"]],[["clr-dg-action-overflow"]]],iVe=["clr-dg-row-detail","clr-dg-cell","clr-dg-action-overflow"],sVe=["scrollableColumns"],oVe=["datagridTable"],aVe=["projectedDisplayColumns"],lVe=["projectedCalculationColumns"],cVe=["displayedRows"],uVe=["calculationRows"];function hVe(c,l){if(1&c){const a=Xt();U(0,"div",24),Me("keydown.space",function(d){vt(a);const f=de();return f.allSelected=!f.allSelected,_t(d.preventDefault())}),U(1,"div",25)(2,"input",26),Me("ngModelChange",function(d){return vt(a),_t(de().allSelected=d)}),H(),U(3,"label",27)(4,"span",28),ye(5),H()()(),xe(6,"div",29),H()}if(2&c){const a=de();B(2),G("id",a.selectAllId)("ngModel",a.allSelected),Ne("aria-label",a.commonStrings.keys.selectAll),B(1),G("for",a.selectAllId),B(2),Zt(a.commonStrings.keys.selectAll)}}function dVe(c,l){1&c&&(U(0,"div",30),xe(1,"div",29),H()),2&c&&Ne("aria-label",de().clrDgSingleSelectionAriaLabel)}function fVe(c,l){1&c&&(U(0,"div",31),xe(1,"div",29),H()),2&c&&Ne("aria-label",de().clrDgSingleActionableAriaLabel)}function pVe(c,l){1&c&&(U(0,"div",32),xe(1,"div",29),H()),2&c&&Ne("aria-label",de().clrDetailExpandableAriaLabel)}function mVe(c,l){1&c&&xe(0,"clr-dg-placeholder")}function gVe(c,l){1&c&&(U(0,"div",33)(1,"clr-spinner",34),ye(2,"Loading"),H()())}const yVe=[[["clr-dg-action-bar"]],[["clr-dg-placeholder"]],[["clr-dg-footer"]],[["","clrIfDetail",""],["clr-dg-detail"]]],vVe=["clr-dg-action-bar","clr-dg-placeholder","clr-dg-footer","[clrIfDetail],clr-dg-detail"],SVe=["allSelected"];function bVe(c,l){if(1&c&&(er(0),U(1,"h2"),ye(2),H(),tr()),2&c){const a=de(2);B(2),Zt(a.commonStrings.keys.showColumns)}}function TVe(c,l){}function wVe(c,l){if(1&c){const a=Xt();U(0,"li")(1,"clr-checkbox-wrapper")(2,"input",15),Me("ngModelChange",function(d){const m=vt(a).$implicit;return _t(de(2).toggleColumnState(m,!d))}),H(),U(3,"label"),le(4,TVe,0,0,"ng-template",16),H()()()}if(2&c){const a=l.$implicit,h=de(2);B(2),G("disabled",h.hasOnlyOneVisibleColumn&&!a.hidden)("ngModel",!a.hidden),B(2),G("ngTemplateOutlet",a.titleTemplateRef)}}function CVe(c,l){if(1&c){const a=Xt();U(0,"clr-dg-column-toggle-button",17),Me("clrAllSelected",function(){return vt(a),_t(de(2).allColumnsSelected())}),ye(1),H()}if(2&c){const a=de(2);B(1),mi(" ",a.commonStrings.keys.selectAll," ")}}function xVe(c,l){if(1&c&&(U(0,"div",4)(1,"div",5)(2,"div",6,7),ye(4),H(),le(5,bVe,3,1,"ng-container",8),ke(6),U(7,"button",9),xe(8,"cds-icon",10),U(9,"span",2),ye(10),H()()(),U(11,"ul",11),le(12,wVe,5,3,"li",12),H(),U(13,"div",13),ke(14,1),le(15,CVe,2,1,"clr-dg-column-toggle-button",14),H()()),2&c){const a=de();G("id",a.popoverId),Ne("aria-label",a.commonStrings.keys.showColumnsMenuDescription),B(4),Zt(a.commonStrings.keys.allColumnsSelected),B(1),G("ngIf",!a.customToggleTitle),B(2),Ne("aria-label",a.commonStrings.keys.close),B(1),Ne("title",a.commonStrings.keys.close),B(2),Zt(a.commonStrings.keys.close),B(2),G("ngForOf",a.hideableColumnStates)("ngForTrackBy",a.trackByFn),B(3),G("ngIf",!a.customToggleButton)}}const EVe=[[["clr-dg-column-toggle-title"]],[["clr-dg-column-toggle-button"]]],MVe=["clr-dg-column-toggle-title","clr-dg-column-toggle-button"];function IVe(c,l){if(1&c&&(er(0),U(1,"div",1)(2,"clr-checkbox-wrapper",2),xe(3,"input",3),U(4,"label"),ye(5),H(),U(6,"span",4),ye(7),H()()(),tr()),2&c){const a=de();B(5),Zt(a.selection.current.length),B(2),Zt(a.commonStrings.keys.selectedRows)}}function RVe(c,l){1&c&&xe(0,"clr-dg-column-toggle")}function PVe(c,l){if(1&c&&(er(0),ke(1,1),le(2,RVe,1,0,"clr-dg-column-toggle",0),U(3,"div",5),ke(4,2),H(),tr()),2&c){const a=de();B(2),G("ngIf",a.hasHideableColumns&&!a.toggle)}}const LVe=[[["clr-dg-pagination"]],[["clr-dg-column-toggle"]],"*"],OVe=["clr-dg-pagination","clr-dg-column-toggle","*"];function wBe(c,l){if(1&c){const a=Xt();U(0,"button",3),Me("click",function(){vt(a);const d=de();return _t(d.openNav(d.responsiveNavCodes.NAV_LEVEL_1))}),xe(1,"span"),H()}if(2&c){const a=de();Ne("aria-label",a.responsiveNavCommonString)("aria-expanded",1===a.openNavLevel?"true":"false")}}function CBe(c,l){if(1&c){const a=Xt();U(0,"button",4),Me("click",function(){vt(a);const d=de();return _t(d.openNav(d.responsiveNavCodes.NAV_LEVEL_2))}),xe(1,"span"),H()}if(2&c){const a=de();Ne("aria-label",a.responsiveOverflowCommonString)("aria-expanded",2===a.openNavLevel?"true":"false")}}function NBe(c,l){if(1&c){const a=Xt();U(0,"button",3),Me("click",function(){return vt(a),_t(de().toggleByButton())}),xe(1,"cds-icon",4),H()}if(2&c){const a=de();st("on-collapse",a.collapsed),Ne("aria-expanded",a.ariaExpanded)("aria-label",a.commonStrings.keys.verticalNavToggle),B(1),Ne("direction",a.collapsed?"right":"left")("title",a.collapsed?a.commonStrings.keys.expand:a.commonStrings.keys.collapse)}}function FBe(c,l){if(1&c){const a=Xt();U(0,"button",5),Me("click",function(){return vt(a),_t(de().collapsed=!1)}),H()}2&c&&Ne("aria-label",de().commonStrings.keys.verticalNavToggle)}const kBe=[[["","clrVerticalNavLink",""]],[["","clrVerticalNavIcon",""]],"*",[["","clrIfExpanded",""],["clr-vertical-nav-group-children"]]],VBe=["[clrVerticalNavLink]","[clrVerticalNavIcon]","*","[clrIfExpanded], clr-vertical-nav-group-children"];let fa=(()=>{class c{}return c.\u0275fac=function(a){return new(a||c)},c.\u0275dir=We({type:c,selectors:[["clr-icon"]]}),c})(),Gr=(()=>{class c{}return c.\u0275fac=function(a){return new(a||c)},c.\u0275dir=We({type:c,selectors:[["cds-icon"]]}),c})(),zr=(()=>{class c{}return c.\u0275fac=function(a){return new(a||c)},c.\u0275mod=Ut({type:c}),c.\u0275inj=kt({imports:[[Nn]]}),c})();class Hb{}var po=(()=>(function(c){c[c.DEFAULT=0]="DEFAULT",c[c.LOADING=1]="LOADING",c[c.SUCCESS=2]="SUCCESS",c[c.ERROR=3]="ERROR"}(po||(po={})),po))();let pa=(()=>{class c{constructor(){this.expandable=0,this._loading=!1,this._expanded=!1,this._expandChange=new Ke}get loading(){return this._loading}set loading(a){(a=!!a)!==this._loading&&(this._loading=a)}get expanded(){return this._expanded}set expanded(a){(a=!!a)!==this._expanded&&(this._expanded=a,this._expandChange.next(a))}toggle(){this.expanded=!this._expanded}get expandChange(){return this._expandChange.asObservable()}loadingStateChange(a){this.loading=a===po.LOADING}}return c.\u0275fac=function(a){return new(a||c)},c.\u0275prov=Oe({token:c,factory:c.\u0275fac}),c})(),g4e=0;const cs=new Vt("UNIQUE_ID"),mo={provide:cs,useFactory:function y4e(){return"clr-id-"+g4e++}},Lc="0.2s ease-in-out",mF=(il("skipInitialRender",[xs(":enter",[])]),il("toggle",[xs("void => *",[gr({display:"block",height:0}),fo(Lc,gr({height:"*"}))])]),il("skipInitialRender",[xs(":enter",[])]),il("toggle",[xs("void => *",[gr({display:"block",height:0}),fo(Lc,gr({height:"*"}))]),xs("* => void",[gr({display:"block"}),fo(Lc,gr({height:0,display:"none"}))])]),{open:"Open",close:"Close",show:"Show",hide:"Hide",expand:"Expand",collapse:"Collapse",more:"More",select:"Select",selectAll:"Select All",previous:"Previous",next:"Next",current:"Jump to current",info:"Info",success:"Success",warning:"Warning",danger:"Error",rowActions:"Available actions",pickColumns:"Show or hide columns",showColumns:"Show Columns",sortColumn:"Sort Column",firstPage:"First Page",lastPage:"Last Page",nextPage:"Next Page",previousPage:"Previous Page",currentPage:"Current Page",totalPages:"Total Pages",filterItems:"Filter items",minValue:"Min value",maxValue:"Max value",modalContentStart:"Beginning of Modal Content",modalContentEnd:"End of Modal Content",showColumnsMenuDescription:"Show or hide columns menu",allColumnsSelected:"All columns selected",signpostToggle:"Signpost Toggle",signpostClose:"Signpost Close",loading:"Loading",detailPaneStart:"Start of row details",detailPaneEnd:"End of row details",singleSelectionAriaLabel:"Single selection header",singleActionableAriaLabel:"Single actionable header",detailExpandableAriaLabel:"Toggle more row content",datagridFilterAriaLabel:"Filter dialog",datagridFilterDialogAriaLabel:"Toggle column filter",columnSeparatorAriaLabel:"Column resize handle",columnSeparatorDescription:"Use left or right key to resize the column",alertCloseButtonAriaLabel:"Close alert",datepickerDialogLabel:"Choose date",datepickerToggle:"Toggle datepicker",datepickerToggleChooseDateLabel:"Choose date",datepickerToggleChangeDateLabel:"Change date, {SELECTED_DATE}",datepickerPreviousMonth:"Previous month",datepickerCurrentMonth:"Current month",datepickerNextMonth:"Next month",datepickerPreviousDecade:"Previous decade",datepickerNextDecade:"Next decade",datepickerCurrentDecade:"Current decade",datepickerSelectMonthText:"Select month, the current month is {CALENDAR_MONTH}",datepickerSelectYearText:"Select year, the current year is {CALENDAR_YEAR}",datepickerSelectedLabel:"{FULL_DATE} - Selected",stackViewChanged:"Value changed.",responsiveNavToggleOpen:"Navigation menu",responsiveNavToggleClose:"Navigation menu",responsiveNavOverflowOpen:"Navigation overflow menu",responsiveNavOverflowClose:"Navigation overflow menu",verticalNavGroupToggle:"Toggle vertical navigation group",verticalNavToggle:"Toggle vertical navigation",timelineStepNotStarted:"Not started",timelineStepCurrent:"Current",timelineStepSuccess:"Completed",timelineStepError:"Error",timelineStepProcessing:"In progress",comboboxDelete:"Delete selected option",comboboxSearching:'Searching for matches for "{INPUT}"',comboboxSelection:"Selection",comboboxSelected:"Selected",comboboxNoResults:"No results",comboboxOpen:"Show options",datagridExpandableBeginningOf:"Beginning of",datagridExpandableEndOf:"End of",datagridExpandableRowContent:"Expandable row content",datagridExpandableRowsHelperText:"Screen reader table commands may not work for viewing expanded content, please use your screen reader's browse mode to read the content exposed by this button",wizardStepSuccess:"Completed",wizardStepError:"Error",passwordHide:"Hide password",passwordShow:"Show password",selectedRows:"Selected rows"});let br=(()=>{class c{constructor(){this._strings=mF}localize(a){this._strings={...this._strings,...a}}get keys(){return this._strings}parse(a,h={}){const d=Object.keys(h);let f=a;return d.length&&d.forEach(m=>{f=f.replace(`{${m}}`,h[m])}),f}}return c.\u0275fac=function(a){return new(a||c)},c.\u0275prov=Oe({token:c,factory:c.\u0275fac,providedIn:"root"}),c})(),Mv=(()=>{class c{constructor(){this._chocolate=new Ke,this.disableChocolateCheck=!1}get chocolate(){return this._chocolate.asObservable()}ngAfterViewChecked(){this.disableChocolateCheck||this._chocolate.next()}}return c.\u0275fac=function(a){return new(a||c)},c.\u0275dir=We({type:c}),c})(),Dv=(()=>{class c{constructor(a,h){this.subscription=h.chocolate.subscribe(()=>{this.latestFlavor!==this.flavor&&(h.disableChocolateCheck=!0,a.detectChanges(),h.disableChocolateCheck=!1)})}ngAfterContentChecked(){this.latestFlavor=this.flavor}ngOnDestroy(){this.subscription.unsubscribe()}}return c.\u0275fac=function(a){return new(a||c)(N(Ss),N(Mv))},c.\u0275dir=We({type:c}),c})(),QY=(()=>{class c{constructor(){Rr.addIcons(fv,nl,rl)}}return c.\u0275fac=function(a){return new(a||c)},c.\u0275mod=Ut({type:c}),c.\u0275inj=kt({imports:[[Nn,zr]]}),c})(),A4e=(()=>{class c{}return c.\u0275fac=function(a){return new(a||c)},c.\u0275mod=Ut({type:c}),c.\u0275inj=kt({imports:[[Nn,zr,QY],QY]}),c})();var Ln=(()=>(function(c){c.ArrowLeft="ArrowLeft",c.ArrowUp="ArrowUp",c.ArrowRight="ArrowRight",c.ArrowDown="ArrowDown",c.Backspace="Backspace",c.Tab="Tab",c.Enter="Enter",c.Escape="Escape",c.Space="Space",c.Spacebar=" ",c.Home="Home",c.End="End"}(Ln||(Ln={})),Ln))(),Oc=(()=>(function(c){c.ArrowUp="Up",c.ArrowDown="Down",c.ArrowRight="Right",c.ArrowLeft="Left",c.Space="Spacebar",c.Escape="Esc",c.Home="Home",c.End="End",c.Enter="Enter",c.Tab="Tab"}(Oc||(Oc={})),Oc))();function qb(c){return c===Ln.ArrowUp||c===Oc.ArrowUp?Ln.ArrowUp:c===Ln.ArrowDown||c===Oc.ArrowDown?Ln.ArrowDown:c===Ln.ArrowRight||c===Oc.ArrowRight?Ln.ArrowRight:c===Ln.ArrowLeft||c===Oc.ArrowLeft?Ln.ArrowLeft:c===Ln.Space||c===Oc.Space?Ln.Space:c===Ln.Escape||c===Oc.Escape?Ln.Escape:c}let Hr=(()=>{class c{constructor(){this._open=!1,this._openChange=new Ke,this._openEventChange=new Ke,this._popoverAligned=new Ke}get openChange(){return this._openChange.asObservable()}set openEvent(a){this._openEvent=a,this._openEventChange.next(a)}get openEvent(){return this._openEvent}getEventChange(){return this._openEventChange.asObservable()}set open(a){this._open!==(a=!!a)&&(this._open=a,this._openChange.next(a))}get open(){return this._open}get originalEvent(){return this._openEvent}toggleWithEvent(a){(function vF(c){const l=qb(c.key);(l===Ln.ArrowUp||l===Ln.ArrowDown||l===Ln.ArrowLeft||l===Ln.ArrowRight)&&c.preventDefault()})(a),this.openEvent=a,this.open=!this.open}get popoverAligned(){return this._popoverAligned.asObservable()}popoverAlignedEmit(a){this._popoverAligned.next(a)}}return c.\u0275fac=function(a){return new(a||c)},c.\u0275prov=Oe({token:c,factory:c.\u0275fac}),c})(),Vh=(()=>{class c{constructor(a,h,d){this.renderer=a,this.smartOpenService=h,this.document=d,this.outsideClickClose=!0,this.scrollToClose=!0,this.subscriptions=[],this.subscriptions.push(h.openChange.subscribe(f=>{f?(this.addEscapeListener(),this.addClickListener(),this.addScrollListener()):this.removeAllEventListeners()}),h.getEventChange().subscribe(f=>{this.ignoredEvent=f}))}addScrollListener(){this.scrollToClose&&(this.documentScroller=Pu(this.document,"scroll",{capture:!0}),this.scrollSubscription=this.documentScroller.pipe(qr(this.testForSmartPopoverContentContainer)).subscribe(()=>{this.smartOpenService.open=!1,this.setAnchorFocus()}))}removeScrollListener(){this.documentScroller&&(this.scrollSubscription.unsubscribe(),delete this.documentScroller)}testForSmartPopoverContentContainer(a){let h=a.target;for(;h.classList&&"body"!==h.parentElement.localName;)h=h.parentElement;return!!h.classList&&!h.classList.contains("clr-popover-content")}addClickListener(){this.outsideClickClose&&(this.documentClickListener=this.renderer.listen(this.document,"click",a=>{a===this.ignoredEvent?delete this.ignoredEvent:(this.smartOpenService.open=!1,a.target.focus())}))}removeClickListener(){this.outsideClickClose&&(delete this.ignoredEvent,this.documentClickListener&&(this.documentClickListener(),delete this.documentClickListener))}addEscapeListener(){this.escapeListener=this.renderer.listen(this.document,"keydown.escape",()=>{this.smartOpenService.open=!1,this.setAnchorFocus()})}removeEscapeListener(){this.escapeListener&&(this.escapeListener(),delete this.escapeListener)}set anchorButtonRef(a){this._anchorButtonRef=a}get anchorButtonRef(){return this._anchorButtonRef}set closeButtonRef(a){this._closeButtonRef=a}get closeButtonRef(){return this._closeButtonRef}setCloseFocus(){this._closeButtonRef.nativeElement.focus()}setAnchorFocus(){this.anchorButtonRef.nativeElement.focus()}set contentRef(a){this._contentRef=a}get contentRef(){return this._contentRef}removeAllEventListeners(){this.removeScrollListener(),this.removeClickListener(),this.removeEscapeListener()}ngOnDestroy(){this.subscriptions.forEach(a=>a.unsubscribe()),this.removeAllEventListeners()}}return c.\u0275fac=function(a){return new(a||c)(Ae(Fn),Ae(Hr),Ae(Er))},c.\u0275prov=Oe({token:c,factory:c.\u0275fac}),c})(),$b=(()=>{class c{constructor(a,h){a.anchorButtonRef=h}}return c.\u0275fac=function(a){return new(a||c)(N(Vh),N(zt))},c.\u0275dir=We({type:c,selectors:[["","clrPopoverAnchor",""]],hostVars:2,hostBindings:function(a,h){2&a&&st("clr-anchor",!0)}}),c})(),tZ=(()=>{class c{constructor(a,h,d){this.elementRef=a,this.smartEventsService=h,this.smartOpenService=d,this.subscriptions=[],this.closeChange=new rt,this.subscriptions.push(d.openChange.pipe(qr(f=>!f)).subscribe(()=>{this.closeChange.next()}))}handleClick(a){this.smartOpenService.toggleWithEvent(a),this.smartEventsService.setAnchorFocus()}ngAfterViewInit(){this.smartEventsService.closeButtonRef=this.elementRef,this.smartEventsService.setCloseFocus()}ngOnDestroy(){this.subscriptions.forEach(a=>a.unsubscribe())}}return c.\u0275fac=function(a){return new(a||c)(N(zt),N(Vh),N(Hr))},c.\u0275dir=We({type:c,selectors:[["","clrPopoverCloseButton",""]],hostVars:2,hostBindings:function(a,h){1&a&&Me("click",function(f){return h.handleClick(f)}),2&a&&st("clr-smart-close-button",!0)},outputs:{closeChange:"clrPopoverOnCloseChange"}}),c})();var to=(()=>(function(c){c[c.VERTICAL=0]="VERTICAL",c[c.HORIZONTAL=1]="HORIZONTAL"}(to||(to={})),to))(),Tr=(()=>(function(c){c[c.START=0]="START",c[c.CENTER=.5]="CENTER",c[c.END=1]="END"}(Tr||(Tr={})),Tr))(),wm=(()=>(function(c){c[c.BOTTOM=0]="BOTTOM",c[c.LEFT=1]="LEFT",c[c.RIGHT=2]="RIGHT",c[c.TOP=3]="TOP"}(wm||(wm={})),wm))();const Rf=c=>({...c,side:-1*c.side}),Bh=(c,l)=>{const a=c.content+(l?.5:-.5);return a<0||a>1?c:{...c,content:a}};function Av(c,l,a){return h=>l(c(h),a)}function ol(c,l,a){let h=l.left,d=l.top;switch(c.axis+c.side){case-1:h+=nZ(c,l,a),d-=a.height;break;case 1:h+=nZ(c,l,a),d+=l.height;break;case 0:h-=a.width,d+=rZ(c,l,a);break;case 2:h+=l.width,d+=rZ(c,l,a)}return{xOffset:h,yOffset:d}}function nZ(c,l,a){let h=0;switch(c.anchor){case Tr.START:break;case Tr.CENTER:h+=l.width/2;break;case Tr.END:h+=l.width}switch(c.content){case Tr.START:break;case Tr.CENTER:h-=a.width/2;break;case Tr.END:h-=a.width}return h}function rZ(c,l,a){let h=0;switch(c.anchor){case Tr.START:break;case Tr.CENTER:h+=l.height/2;break;case Tr.END:h+=l.height}switch(c.content){case Tr.START:break;case Tr.CENTER:h-=a.height/2;break;case Tr.END:h-=a.height}return h}let Iv=(()=>{class c{constructor(a,h){this.eventService=a,this.platformId=h,this._shouldRealign=new Ke,this.shouldRealign=this._shouldRealign.asObservable()}realign(){this._shouldRealign.next()}set position(a){this._position=a}get position(){return this._position}alignContent(a){if(!Dr(this.platformId))return{xOffset:0,yOffset:0};this.currentAnchorCoords=this.eventService.anchorButtonRef.nativeElement.getBoundingClientRect(),this.currentContentCoords=a.getBoundingClientRect(),this.contentOffsets=ol(this.position,this.currentAnchorCoords,this.currentContentCoords);const h=function R4e(c,l){const a=[],h_bottom=c.yOffset+l.height,h_left=c.xOffset,h_right=c.xOffset+l.width;return c.yOffset>=0||a.push(wm.TOP),h_left>=0||a.push(wm.LEFT),h_bottom<=(window.innerHeight||document.documentElement.clientHeight)||a.push(wm.BOTTOM),h_right<=(window.innerWidth||document.documentElement.clientWidth)||a.push(wm.RIGHT),a}(this.contentOffsets,this.currentContentCoords),d=h.reduce((f,m)=>f+m,0);return 1===h.length&&this.position.axis===to.VERTICAL?this.handleVerticalAxisOneViolation(d):1===h.length&&this.position.axis===to.HORIZONTAL?this.handleHorizontalAxisOneViolation(d):2===h.length&&this.position.axis===to.VERTICAL?this.handleVerticalAxisTwoViolations(d):2===h.length&&this.position.axis===to.HORIZONTAL&&this.handleHorizontalAxisTwoViolations(d),this.contentOffsets}handleVerticalAxisOneViolation(a){switch(a){case 0:case 3:this.contentOffsets=ol(Rf(this.position),this.currentAnchorCoords,this.currentContentCoords);break;case 1:this.contentOffsets=ol(this.position,this.currentAnchorCoords,this.currentContentCoords),this.contentOffsets.xOffset<0&&(this.contentOffsets.xOffset=10);break;case 2:this.contentOffsets=ol(Bh(this.position,!0),this.currentAnchorCoords,this.currentContentCoords)}}handleVerticalAxisTwoViolations(a){switch(a){case 5:{const h=Av(Rf,Bh,!0);this.contentOffsets=ol(h(this.position),this.currentAnchorCoords,this.currentContentCoords);break}case 4:{const h=Av(Rf,Bh,!1);this.contentOffsets=ol(h(this.position),this.currentAnchorCoords,this.currentContentCoords);break}case 3:default:break;case 2:{const h=Av(Rf,Bh,!0);this.contentOffsets=ol(h(this.position),this.currentAnchorCoords,this.currentContentCoords);break}case 1:{const h=Av(Rf,Bh,!1);this.contentOffsets=ol(h(this.position),this.currentAnchorCoords,this.currentContentCoords);break}}}handleHorizontalAxisOneViolation(a){switch(a){case 1:case 2:this.contentOffsets=ol(Rf(this.position),this.currentAnchorCoords,this.currentContentCoords);break;case 0:this.contentOffsets=ol(Bh(this.position,!0),this.currentAnchorCoords,this.currentContentCoords);break;case 3:this.contentOffsets=ol(Bh(this.position),this.currentAnchorCoords,this.currentContentCoords)}}handleHorizontalAxisTwoViolations(a){switch(a){case 5:case 4:{const h=Av(Rf,Bh,!1);this.contentOffsets=ol(h(this.position),this.currentAnchorCoords,this.currentContentCoords);break}case 3:default:break;case 2:case 1:{const h=Av(Rf,Bh,!0);this.contentOffsets=ol(h(this.position),this.currentAnchorCoords,this.currentContentCoords);break}}}}return c.\u0275fac=function(a){return new(a||c)(Ae(Vh),Ae(wi))},c.\u0275prov=Oe({token:c,factory:c.\u0275fac}),c})(),Yb=(()=>{class c{constructor(a,h,d,f,m,g,y){this.document=a,this.container=h,this.template=d,this.renderer=f,this.smartPositionService=m,this.smartEventsService=g,this.smartOpenService=y,this.subscriptions=[],this.removeClickListenerFn=null,this.shouldRealign=!1,this.checkCollector=new rt}set open(a){this.smartOpenService.open=!!a}set contentAt(a){this.smartPositionService.position=a}set outsideClickClose(a){this.smartEventsService.outsideClickClose=!!a}set scrollToClose(a){this.smartEventsService.scrollToClose=!!a}ngAfterViewInit(){this.subscriptions.push(this.smartOpenService.openChange.subscribe(a=>{a?this.addContent():this.removeContent()}),this.smartPositionService.shouldRealign.subscribe(()=>{this.shouldRealign=!0,this.view&&this.renderer.setStyle(this.view.rootNodes[0],"opacity","0")}),this.checkCollector.pipe(mv(0)).subscribe(()=>{this.alignContent(),this.shouldRealign=!1,this.view&&this.renderer.setStyle(this.view.rootNodes[0],"opacity","1")}))}ngOnDestroy(){this.removeContent(),this.subscriptions.forEach(a=>a.unsubscribe())}removeContent(){!this.view||(this.removeClickListenerFn&&(this.removeClickListenerFn(),this.removeClickListenerFn=null),this.view.rootNodes.forEach(a=>this.renderer.removeChild(this.document.body,a)),this.container.clear(),delete this.view)}addContent(){this.view=this.container.createEmbeddedView(this.template);const[a]=this.view.rootNodes;this.smartEventsService.contentRef=a,this.renderer.addClass(a,"clr-popover-content"),this.renderer.setStyle(a,"top","0px"),this.renderer.setStyle(a,"left","0px"),this.renderer.setStyle(a,"opacity","0"),this.removeClickListenerFn=this.renderer.listen(a,"click",h=>{this.smartOpenService.openEvent=h}),this.view.rootNodes.forEach(h=>{this.renderer.appendChild(this.document.body,h)}),this.shouldRealign=!0}ngAfterContentChecked(){this.smartOpenService.open&&this.view&&this.shouldRealign&&this.checkCollector.emit()}alignContent(){if(!this.view)return;const a=this.smartPositionService.alignContent(this.view.rootNodes[0]);this.renderer.setStyle(this.view.rootNodes[0],"top",`${a.yOffset}px`),this.renderer.setStyle(this.view.rootNodes[0],"left",`${a.xOffset}px`),this.smartOpenService.popoverAlignedEmit(this.view.rootNodes[0])}}return c.\u0275fac=function(a){return new(a||c)(N(Er),N(Zn),N(Vi),N(Fn),N(Iv),N(Vh),N(Hr))},c.\u0275dir=We({type:c,selectors:[["","clrPopoverContent",""]],inputs:{open:["clrPopoverContent","open"],contentAt:["clrPopoverContentAt","contentAt"],outsideClickClose:["clrPopoverContentOutsideClickToClose","outsideClickClose"],scrollToClose:["clrPopoverContentScrollToClose","scrollToClose"]}}),c})(),Zb=(()=>{class c{constructor(a){this.smartOpenService=a,this.subscriptions=[],this.openCloseChange=new rt,this.subscriptions.push(this.smartOpenService.openChange.subscribe(h=>{this.openCloseChange.next(h)}))}handleClick(a){this.smartOpenService.toggleWithEvent(a)}ngOnDestroy(){this.subscriptions.forEach(a=>a.unsubscribe())}}return c.\u0275fac=function(a){return new(a||c)(N(Hr))},c.\u0275dir=We({type:c,selectors:[["","clrPopoverOpenCloseButton",""]],hostVars:2,hostBindings:function(a,h){1&a&&Me("click",function(f){return h.handleClick(f)}),2&a&&st("clr-smart-open-close",!0)},outputs:{openCloseChange:"clrPopoverOpenCloseChange"}}),c})(),Kb=(()=>{class c{}return c.\u0275fac=function(a){return new(a||c)},c.\u0275mod=Ut({type:c}),c.\u0275inj=kt({imports:[[]]}),c})();var La=(()=>(function(c){c[c.BEFORE=-1]="BEFORE",c[c.AFTER=1]="AFTER"}(La||(La={})),La))();class Oa{}Oa["top-right"]={axis:to.VERTICAL,side:La.BEFORE,anchor:Tr.END,content:Tr.END},Oa["top-left"]={axis:to.VERTICAL,side:La.BEFORE,anchor:Tr.START,content:Tr.START},Oa["bottom-right"]={axis:to.VERTICAL,side:La.AFTER,anchor:Tr.END,content:Tr.END},Oa["bottom-left"]={axis:to.VERTICAL,side:La.AFTER,anchor:Tr.START,content:Tr.START},Oa["right-top"]={axis:to.HORIZONTAL,side:La.AFTER,anchor:Tr.CENTER,content:Tr.END},Oa["right-bottom"]={axis:to.HORIZONTAL,side:La.AFTER,anchor:Tr.START,content:Tr.START},Oa["left-top"]={axis:to.HORIZONTAL,side:La.BEFORE,anchor:Tr.CENTER,content:Tr.END},Oa["left-bottom"]={axis:to.HORIZONTAL,side:La.BEFORE,anchor:Tr.START,content:Tr.START};let P4e=(()=>{class c{}return c.\u0275fac=function(a){return new(a||c)},c.\u0275mod=Ut({type:c}),c.\u0275inj=kt({imports:[[Nn,zr,Kb]]}),c})(),O4e=(()=>{class c{}return c.\u0275fac=function(a){return new(a||c)},c.\u0275mod=Ut({type:c}),c.\u0275inj=kt({imports:[[Nn]]}),c})(),N4e=(()=>{class c{constructor(){Rr.addIcons(jq)}}return c.\u0275fac=function(a){return new(a||c)},c.\u0275mod=Ut({type:c}),c.\u0275inj=kt({imports:[O4e,P4e]}),c})(),F4e=(()=>{class c{}return c.\u0275fac=function(a){return new(a||c)},c.\u0275cmp=Be({type:c,selectors:[["ng-component"]],decls:0,vars:0,template:function(a,h){},encapsulation:2}),c})(),nM=(()=>{class c{}return c.\u0275fac=function(a){return new(a||c)},c.\u0275mod=Ut({type:c}),c.\u0275inj=kt({}),c})(),k4e=0,al=(()=>{class c{constructor(){this._id="clr-form-control-"+ ++k4e,this._idChange=new Nr(this._id)}get id(){return this._id}set id(a){this._id=a,this._idChange.next(a)}get idChange(){return this._idChange.asObservable()}}return c.\u0275fac=function(a){return new(a||c)},c.\u0275prov=Oe({token:c,factory:c.\u0275fac}),c})(),V4e=0,Rv=(()=>{class c{constructor(){this._id="clr-form-container-"+ ++V4e,this._idChange=new Nr(this._id)}get id(){return this._id}set id(a){this._id=a,this._idChange.next(a)}get idChange(){return this._idChange.asObservable()}}return c.\u0275fac=function(a){return new(a||c)},c.\u0275prov=Oe({token:c,factory:c.\u0275fac}),c})();let SF=(()=>{class c{constructor(a,h){this.controlIdService=a,this.containerIdService=h,this.controlIdSuffix="abstract"}get id(){return this.containerIdService?`${this.containerIdService.id}-${this.controlIdSuffix}`:this.controlIdService?`${this.controlIdService.id}-${this.controlIdSuffix}`:null}}return c.\u0275fac=function(a){return new(a||c)(N(al,8),N(Rv,8))},c.\u0275dir=We({type:c}),c})(),B4e=(()=>{class c extends SF{constructor(a,h){super(a,h),this.controlIdService=a,this.containerIdService=h,this.controlIdSuffix="error"}}return c.\u0275fac=function(a){return new(a||c)(N(al,8),N(Rv,8))},c.\u0275cmp=Be({type:c,selectors:[["clr-control-error"]],hostVars:3,hostBindings:function(a,h){2&a&&(Ne("id",h.id),st("clr-subtext",!0))},features:[Qt],ngContentSelectors:hn,decls:1,vars:0,template:function(a,h){1&a&&(Et(),ke(0))},encapsulation:2}),c})(),rM=(()=>{class c extends SF{constructor(a,h){super(a,h),this.controlIdService=a,this.containerIdService=h,this.controlIdSuffix="helper"}}return c.\u0275fac=function(a){return new(a||c)(N(al,8),N(Rv,8))},c.\u0275cmp=Be({type:c,selectors:[["clr-control-helper"]],hostVars:3,hostBindings:function(a,h){2&a&&(Ne("id",h.id),st("clr-subtext",!0))},features:[Qt],ngContentSelectors:hn,decls:1,vars:0,template:function(a,h){1&a&&(Et(),ke(0))},encapsulation:2}),c})(),ll=(()=>{class c{constructor(){this._controlChanges=new Ke,this._helpers=new Ke}get controlChanges(){return this._controlChanges.asObservable()}setControl(a){this._controlChanges.next(a)}get helpersChange(){return this._helpers.asObservable()}setHelpers(a){this._helpers.next(a)}}return c.\u0275fac=function(a){return new(a||c)},c.\u0275prov=Oe({token:c,factory:c.\u0275fac}),c})();var No=(()=>(function(c){c.NONE="NONE",c.VALID="VALID",c.INVALID="INVALID"}(No||(No={})),No))();let Nc=(()=>{class c{constructor(a){this.ngControlService=a,this.subscriptions=[],this._statusChanges=new Nr(No.NONE),this.subscriptions.push(this.ngControlService.controlChanges.subscribe(h=>{h&&(this.control=h,this.subscriptions.push(this.control.statusChanges.subscribe(()=>{this.triggerStatusChange()})))}))}get statusChanges(){return this._statusChanges.asObservable()}triggerStatusChange(){if(this.control){const a=No[this.control.status];this._statusChanges.next(this.control.touched&&["VALID","INVALID"].includes(a)?a:No.NONE)}}ngOnDestroy(){this.subscriptions.forEach(a=>a.unsubscribe())}}return c.\u0275fac=function(a){return new(a||c)(Ae(ll))},c.\u0275prov=Oe({token:c,factory:c.\u0275fac}),c})();var Uh=(()=>(function(c){c.VERTICAL="vertical",c.HORIZONTAL="horizontal",c.COMPACT="compact"}(Uh||(Uh={})),Uh))();let ku=(()=>{class c{constructor(){this.minLabelSize=1,this.maxLabelSize=12,this.layout=Uh.HORIZONTAL,this.layoutValues=Object.keys(Uh).map(a=>Uh[a]),this._labelSize=2}set labelSize(a){this.labelSizeIsValid(a)&&(this._labelSize=a)}get labelSize(){return this._labelSize}isVertical(){return this.layout===Uh.VERTICAL}isHorizontal(){return this.layout===Uh.HORIZONTAL}isCompact(){return this.layout===Uh.COMPACT}get layoutClass(){return`clr-form-${this.layout}`}isValid(a){return this.layoutValues.indexOf(a)>-1}labelSizeIsValid(a){return Number.isInteger(a)&&a>=this.minLabelSize&&a<=this.maxLabelSize}}return c.\u0275fac=function(a){return new(a||c)},c.\u0275prov=Oe({token:c,factory:c.\u0275fac}),c})(),es=(()=>{class c{constructor(a,h,d,f,m){this.controlIdService=a,this.layoutService=h,this.ngControlService=d,this.renderer=f,this.el=m,this.subscriptions=[],this.enableGrid=!0}get labelText(){return this.el.nativeElement&&this.el.nativeElement.textContent}ngOnInit(){(this.controlIdService||this.ngControlService)&&this.renderer.addClass(this.el.nativeElement,"clr-control-label"),this.enableGrid&&this.layoutService&&!this.layoutService.isVertical()&&this.el.nativeElement&&this.el.nativeElement.className.indexOf("clr-col")<0&&(this.renderer.addClass(this.el.nativeElement,"clr-col-12"),this.renderer.addClass(this.el.nativeElement,`clr-col-md-${this.layoutService.labelSize}`)),this.controlIdService&&!this.forAttr&&this.subscriptions.push(this.controlIdService.idChange.subscribe(a=>this.forAttr=a))}disableGrid(){this.enableGrid=!1}ngOnDestroy(){this.subscriptions.forEach(a=>a.unsubscribe())}}return c.\u0275fac=function(a){return new(a||c)(N(al,8),N(ku,8),N(ll,8),N(Fn),N(zt))},c.\u0275dir=We({type:c,selectors:[["label"]],hostVars:1,hostBindings:function(a,h){2&a&&Ne("for",h.forAttr)},inputs:{forAttr:["for","forAttr"]}}),c})(),U4e=(()=>{class c extends SF{constructor(a,h){super(a,h),this.controlIdService=a,this.containerIdService=h,this.controlIdSuffix="success"}}return c.\u0275fac=function(a){return new(a||c)(N(al,8),N(Rv,8))},c.\u0275cmp=Be({type:c,selectors:[["clr-control-success"]],hostVars:3,hostBindings:function(a,h){2&a&&(Ne("id",h.id),st("clr-subtext",!0))},features:[Qt],ngContentSelectors:hn,decls:1,vars:0,template:function(a,h){1&a&&(Et(),ke(0))},encapsulation:2}),c})(),Fc=(()=>{class c{constructor(a){this.layoutService=a,this.className=""}controlClass(a=No.NONE,h=!1,d=""){const f=[this.className,d];switch(a){case No.VALID:f.push("clr-success");break;case No.INVALID:f.push("clr-error")}return h&&this.layoutService&&-1===this.className.indexOf("clr-col")&&f.push(`clr-col-md-${this.layoutService.maxLabelSize-this.layoutService.labelSize} clr-col-12`),f.join(" ").trim()}initControlClass(a,h){h&&h.className&&(this.className=h.className,h.className.split(" ").forEach(f=>{f.startsWith("clr-col")&&a.removeClass(h,f)}))}}return c.\u0275fac=function(a){return new(a||c)(Ae(ku,8))},c.\u0275prov=Oe({token:c,factory:c.\u0275fac}),c})(),Qb=(()=>{class c{constructor(a,h,d,f){this.ifControlStateService=a,this.layoutService=h,this.controlClassService=d,this.ngControlService=f,this.subscriptions=[],this._dynamic=!1,this.subscriptions.push(this.ifControlStateService.statusChanges.subscribe(m=>{this.state=m,this.updateHelpers()})),this.subscriptions.push(this.ngControlService.controlChanges.subscribe(m=>{this.control=m}))}get showHelper(){return!!this.controlHelperComponent&&(!!this.controlHelperComponent&&this.state===No.NONE||!this.controlSuccessComponent&&this.state===No.VALID||!this.controlErrorComponent&&this.state===No.INVALID)}get showValid(){return this.state===No.VALID&&!!this.controlSuccessComponent}get showInvalid(){return this.state===No.INVALID&&!!this.controlErrorComponent}ngAfterContentInit(){this.updateHelpers()}ngOnDestroy(){this.subscriptions.forEach(a=>a.unsubscribe())}controlClass(){return this.controlClassService.controlClass(this.controlSuccessComponent||this.state!==No.VALID?this.state:No.NONE,this.addGrid())}addGrid(){return this.layoutService&&!this.layoutService.isVertical()}updateHelpers(){this.ngControlService&&this.ngControlService.setHelpers({show:this.showInvalid||this.showHelper||this.showValid,showInvalid:this.showInvalid,showHelper:this.showHelper,showValid:this.showValid})}}return c.\u0275fac=function(a){return new(a||c)(N(Nc),N(ku,8),N(Fc),N(ll))},c.\u0275dir=We({type:c,contentQueries:function(a,h,d){if(1&a&&(yn(d,es,5),yn(d,U4e,5),yn(d,B4e,5),yn(d,rM,5)),2&a){let f;mt(f=gt())&&(h.label=f.first),mt(f=gt())&&(h.controlSuccessComponent=f.first),mt(f=gt())&&(h.controlErrorComponent=f.first),mt(f=gt())&&(h.controlHelperComponent=f.first)}}}),c})();class iM{constructor(l,a,h=0){if(this.injector=a.injector,!this.injector.get(l,null)){const d=this.injector.get(nu),f=this.injector.get(zt);a.createComponent(d.resolveComponentFactory(F4e));const m=d.resolveComponentFactory(l),g=[];g[h]=[f.nativeElement];const y=a.createComponent(m,void 0,void 0,g);a.remove(0),y.instance._dynamic=!0,this.injector=y.injector}}get(l,a){return this.injector.get(l,a)}}let bF=(()=>{class c{constructor(){this._touched=new Ke}get touchedChange(){return this._touched.asObservable()}markAsTouched(){this._touched.next()}}return c.\u0275fac=function(a){return new(a||c)},c.\u0275prov=Oe({token:c,factory:c.\u0275fac}),c})(),Lv=(()=>{class c{constructor(a,h,d,f,m,g){this.vcr=a,this.wrapperType=h,this.ngControl=f,this.subscriptions=[],this.index=0,this.renderer=m,this.el=g;try{this.ngControlService=d.get(ll),this.ifControlStateService=d.get(Nc),this.controlClassService=d.get(Fc),this.markControlService=d.get(bF)}catch{}this.controlClassService&&this.controlClassService.initControlClass(m,g.nativeElement),this.markControlService&&this.subscriptions.push(this.markControlService.touchedChange.subscribe(()=>{this.markAsTouched()})),this.ngControlService&&this.subscriptions.push(this.ngControlService.helpersChange.subscribe(y=>{this.setAriaDescribedBy(y)}))}get id(){return this._id}set id(a){this._id=a,this.controlIdService&&(this.controlIdService.id=a)}triggerValidation(){this.ifControlStateService&&(this.ngControl&&!this.ngControl.touched&&this.markAsTouched(),this.ifControlStateService.triggerStatusChange())}markAsTouched(){this.ngControl.control.markAsTouched(),this.ngControl.control.updateValueAndValidity()}getProviderFromContainer(a,h){try{return this._containerInjector.get(a,h)}catch{return h}}ngOnInit(){this._containerInjector=new iM(this.wrapperType,this.vcr,this.index),this.controlIdService=this._containerInjector.get(al);try{this.containerIdService=this._containerInjector.get(Rv)}catch{}this._id?this.controlIdService.id=this._id:this._id=this.controlIdService.id,this.ngControlService&&this.ngControlService.setControl(this.ngControl)}ngOnDestroy(){this.subscriptions.forEach(a=>a.unsubscribe())}setAriaDescribedBy(a){if(a.show){const h=this.getAriaDescribedById(a);if(null!==h)return void this.renderer.setAttribute(this.el.nativeElement,"aria-describedby",h)}this.renderer.removeAttribute(this.el.nativeElement,"aria-describedby")}getAriaDescribedById(a){let h="helper";return a.showInvalid?h="error":a.showValid&&(h="success"),this.containerIdService?this.containerIdService.id.concat("-",h):this.controlIdService?this.controlIdService.id.concat("-",h):null}}return c.\u0275fac=function(a){return new(a||c)(N(Zn),N(nw),N(ti),N(da),N(Fn),N(zt))},c.\u0275dir=We({type:c,hostVars:1,hostBindings:function(a,h){1&a&&Me("blur",function(){return h.triggerValidation()}),2&a&&au("id",h.id)},inputs:{id:"id"}}),c})(),TF=(()=>{class c{constructor(a,h){this.layoutService=a,this.markControlService=h}set labelSize(a){const h=parseInt(a,10)||2;this.layoutService.labelSize=h}markAsTouched(){this.markControlService.markAsTouched()}onFormSubmit(){this.markAsTouched()}}return c.\u0275fac=function(a){return new(a||c)(N(ku),N(bF))},c.\u0275dir=We({type:c,selectors:[["","clrForm",""]],contentQueries:function(a,h,d){if(1&a&&yn(d,es,5),2&a){let f;mt(f=gt())&&(h.labels=f)}},hostVars:6,hostBindings:function(a,h){1&a&&Me("submit",function(){return h.onFormSubmit()}),2&a&&st("clr-form",!0)("clr-form-horizontal",h.layoutService.isHorizontal())("clr-form-compact",h.layoutService.isCompact())},inputs:{labelSize:["clrLabelSize","labelSize"]},features:[Mt([ku,bF])]}),c})(),oZ=(()=>{class c{constructor(a){this.layoutService=a}ngOnInit(){this.layout&&this.layoutService.isValid(this.layout)&&(this.layoutService.layout=this.layout)}}return c.\u0275fac=function(a){return new(a||c)(N(ku))},c.\u0275dir=We({type:c,selectors:[["","clrForm","","clrLayout",""]],inputs:{layout:["clrLayout","layout"]}}),c})(),no=(()=>{class c{constructor(){Rr.addIcons(nl,rl)}}return c.\u0275fac=function(a){return new(a||c)},c.\u0275mod=Ut({type:c}),c.\u0275inj=kt({imports:[[Nn,zr]]}),c})();const wF=new Vt("IS_TOGGLE"),j4e={provide:wF,useFactory:function H4e(){return new Nr(!1)}};let sM=(()=>{class c{constructor(a){this._dynamic=!1,this.toggle=!1,this.subscriptions=[],this.subscriptions.push(a.subscribe(h=>{this.toggle=h}))}ngOnInit(){this.label&&this.label.disableGrid()}ngOnDestroy(){this.subscriptions.forEach(a=>a.unsubscribe())}}return c.\u0275fac=function(a){return new(a||c)(N(wF))},c.\u0275cmp=Be({type:c,selectors:[["clr-checkbox-wrapper"],["clr-toggle-wrapper"]],contentQueries:function(a,h,d){if(1&a&&yn(d,es,7),2&a){let f;mt(f=gt())&&(h.label=f.first)}},hostVars:4,hostBindings:function(a,h){2&a&&st("clr-checkbox-wrapper",!h.toggle)("clr-toggle-wrapper",h.toggle)},features:[Mt([al,j4e])],ngContentSelectors:ZFe,decls:3,vars:1,consts:[[4,"ngIf"]],template:function(a,h){1&a&&(Et(YFe),ke(0),ke(1,1),le(2,$Fe,1,0,"label",0)),2&a&&(B(2),G("ngIf",!h.label))},dependencies:[vn,es],encapsulation:2}),c})(),oM=(()=>{class c extends Lv{constructor(a,h,d,f,m,g){super(a,sM,h,d,f,m),this.toggle=g}ngOnInit(){super.ngOnInit();const a=this.getProviderFromContainer(wF,null);a&&null!==this.toggle&&a.next(!0)}}return c.\u0275fac=function(a){return new(a||c)(N(Zn),N(ti),N(da,10),N(Fn),N(zt),Tg("clrToggle"))},c.\u0275dir=We({type:c,selectors:[["","clrCheckbox",""],["","clrToggle",""]],features:[Qt]}),c})(),W4e=(()=>{class c extends Qb{constructor(a,h,d,f){super(f,a,h,d),this.layoutService=a,this.controlClassService=h,this.ngControlService=d,this.ifControlStateService=f,this.inline=!1}set clrInline(a){this.inline="string"==typeof a?"false"!==a:!!a}get clrInline(){return this.inline}ngAfterContentInit(){this.setAriaRoles()}setAriaRoles(){this.role=this.checkboxes.length?"group":null}}return c.\u0275fac=function(a){return new(a||c)(N(ku,8),N(Fc),N(ll),N(Nc))},c.\u0275cmp=Be({type:c,selectors:[["clr-checkbox-container"],["clr-toggle-container"]],contentQueries:function(a,h,d){if(1&a&&yn(d,oM,5),2&a){let f;mt(f=gt())&&(h.checkboxes=f)}},hostVars:7,hostBindings:function(a,h){2&a&&(Ne("role",h.role),st("clr-form-control",!0)("clr-form-control-disabled",null==h.control?null:h.control.disabled)("clr-row",h.addGrid()))},inputs:{clrInline:"clrInline"},features:[Mt([Nc,ll,Fc,Rv]),Qt],ngContentSelectors:ike,decls:10,vars:9,consts:[[4,"ngIf"],[1,"clr-control-container",3,"ngClass"],[1,"clr-subtext-wrapper"],["class","clr-validate-icon","status","danger","shape","exclamation-circle","aria-hidden","true",4,"ngIf"],["class","clr-validate-icon","status","success","shape","check-circle","aria-hidden","true",4,"ngIf"],["status","danger","shape","exclamation-circle","aria-hidden","true",1,"clr-validate-icon"],["status","success","shape","check-circle","aria-hidden","true",1,"clr-validate-icon"]],template:function(a,h){1&a&&(Et(rke),ke(0),le(1,KFe,1,0,"label",0),U(2,"div",1),ke(3,1),U(4,"div",2),le(5,QFe,1,0,"ng-content",0),le(6,JFe,1,0,"cds-icon",3),le(7,eke,1,0,"cds-icon",4),le(8,tke,1,0,"ng-content",0),le(9,nke,1,0,"ng-content",0),H()()),2&a&&(B(1),G("ngIf",!h.label&&h.addGrid()),B(1),st("clr-control-inline",h.clrInline),G("ngClass",h.controlClass()),B(3),G("ngIf",h.showHelper),B(1),G("ngIf",h.showInvalid),B(1),G("ngIf",h.showValid),B(1),G("ngIf",h.showInvalid),B(1),G("ngIf",h.showValid))},dependencies:[vn,es,$s,Gr],encapsulation:2}),c})(),X4e=(()=>{class c{constructor(){Rr.addIcons(nl,rl)}}return c.\u0275fac=function(a){return new(a||c)},c.\u0275mod=Ut({type:c}),c.\u0275inj=kt({imports:[[Nn,zr,no,nM],no]}),c})();function zl(c){return null!==c&&("string"==typeof c?c.length>=0:"boolean"==typeof c&&c)}let Jb=(()=>{class c{get spinnerClass(){return!0}get inlineClass(){return this._inline}set clrInline(a){this._inline=zl(a)}get inverseClass(){return this._inverse}set clrInverse(a){this._inverse=zl(a)}get smallClass(){return this._small}set clrSmall(a){this._small=zl(a)}get mediumClass(){return!this._small&&this._medium}set clrMedium(a){this._medium=zl(a)}}return c.\u0275fac=function(a){return new(a||c)},c.\u0275cmp=Be({type:c,selectors:[["clr-spinner"]],hostVars:11,hostBindings:function(a,h){2&a&&(Ne("aria-busy",!0),st("spinner",h.spinnerClass)("spinner-inline",h.inlineClass)("spinner-inverse",h.inverseClass)("spinner-sm",h.smallClass)("spinner-md",h.mediumClass))},inputs:{clrInline:"clrInline",clrInverse:"clrInverse",clrSmall:"clrSmall",clrMedium:"clrMedium"},ngContentSelectors:hn,decls:1,vars:0,template:function(a,h){1&a&&(Et(),ke(0))},encapsulation:2}),c})(),eT=(()=>{class c{}return c.\u0275fac=function(a){return new(a||c)},c.\u0275mod=Ut({type:c}),c.\u0275inj=kt({imports:[[Nn]]}),c})();new Vt("IF_ACTIVE_ID");let aM=(()=>{class c{constructor(a,h,d){this.toggleService=a,this.template=h,this.container=d,this.openChange=new rt(!1),this.subscription=this.toggleService.openChange.subscribe(f=>{this.updateView(f),this.openChange.emit(f)})}set open(a){this.toggleService.open=a}get open(){return this.toggleService.open}updateView(a){a?this.container.createEmbeddedView(this.template):this.container.clear()}ngOnDestroy(){this.subscription.unsubscribe()}}return c.\u0275fac=function(a){return new(a||c)(N(Hr),N(Vi),N(Zn))},c.\u0275dir=We({type:c,selectors:[["","clrIfOpen",""]],inputs:{open:["clrIfOpen","open"]},outputs:{openChange:"clrIfOpenChange"}}),c})(),Hl=(()=>{class c{}return c.\u0275fac=function(a){return new(a||c)},c.\u0275mod=Ut({type:c}),c.\u0275inj=kt({imports:[[Nn]]}),c})(),CF=(()=>{class c{}return c.\u0275fac=function(a){return new(a||c)},c.\u0275mod=Ut({type:c}),c.\u0275inj=kt({imports:[[Nn]]}),c})();const Fv=new Vt("POPOVER_HOST_ANCHOR");var ma=(()=>(function(c){c.UP="up",c.DOWN="down",c.LEFT="left",c.RIGHT="right"}(ma||(ma={})),ma))();let lM=(()=>{class c{constructor(a){this.renderer=a,this._unlistenFuncs=[]}get current(){return this._current}reset(a){this._current=a}listenToArrowKeys(a){this._unlistenFuncs.push(this.renderer.listen(a,"keydown.arrowup",()=>!this.move(ma.UP))),this._unlistenFuncs.push(this.renderer.listen(a,"keydown.arrowdown",()=>!this.move(ma.DOWN))),this._unlistenFuncs.push(this.renderer.listen(a,"keydown.arrowleft",()=>!this.move(ma.LEFT))),this._unlistenFuncs.push(this.renderer.listen(a,"keydown.arrowright",()=>!this.move(ma.RIGHT)))}registerContainer(a){this.renderer.setAttribute(a,"tabindex","0"),this.listenToArrowKeys(a),this._unlistenFuncs.push(this.renderer.listen(a,"keydown.space",()=>!this.activateCurrent())),this._unlistenFuncs.push(this.renderer.listen(a,"keydown.enter",()=>!this.activateCurrent()))}moveTo(a){void 0!==a&&(this.current&&this.current.blur(),a.focus(),this._current=a)}move(a){let h=!1;if(this.current){const d=this.current[a];d&&(function Kq(c){return!!c&&(c instanceof wt||"function"==typeof c.lift&&"function"==typeof c.subscribe)}(d)?d:St(d)).subscribe(m=>{m&&(this.moveTo(m),h=!0)})}return h}activateCurrent(){return!(!this.current||!this.current.activate||(this.current.activate(),0))}detachListeners(){this._unlistenFuncs.forEach(a=>a())}}return c.\u0275fac=function(a){return new(a||c)(Ae(Fn))},c.\u0275prov=Oe({token:c,factory:c.\u0275fac}),c})();new Sd,new bd;class cM{}function lZ(c){return[mo,c,{provide:cM,useExisting:c}]}class n5e extends class t5e{containsItem(l){return this.model===l}select(l){this.model=l}unselect(l){this.containsItem(l)&&(this.model=null)}isEmpty(){return!this.model}pop(){const l=this.model;return this.model=null,l}toString(l){return this.model?l&&this.model[l]?this.model[l]:this.model.toString():""}}{constructor(){super(...arguments),this._focusChanged=new Nr(null)}get focusChanged(){return this._focusChanged.asObservable()}select(l){this.model!==l&&(this.model=l,this._focusChanged.next(l))}}let r5e=(()=>{class c{constructor(){this.loading=!1,this._currentInput="",this._inputChanged=new Nr(""),this.inputChanged=this._inputChanged.asObservable(),this._selectionChanged=new PN(1)}get currentInput(){return this._currentInput}set currentInput(a){""===a&&!this.multiselectable&&this.setSelectionValue(null),this._currentInput=a,this._inputChanged.next(a)}get selectionChanged(){return this._selectionChanged.asObservable()}select(a){null==a||this.selectionModel.containsItem(a)||(this.selectionModel.select(a),this._selectionChanged.next(this.selectionModel))}toggle(a){null!=a&&(this.selectionModel.containsItem(a)?this.selectionModel.unselect(a):this.selectionModel.select(a),this._selectionChanged.next(this.selectionModel))}unselect(a){null==a||!this.selectionModel.containsItem(a)||(this.selectionModel.unselect(a),this._selectionChanged.next(this.selectionModel))}get multiselectable(){return this.selectionModel instanceof class e5e{containsItem(l){return!!this.model&&this.model.includes(l)}select(l){this.addItem(l)}unselect(l){this.removeItem(l)}isEmpty(){return!(this.model&&this.model.length>0)}pop(){let l;return this.model&&this.model.length>0&&(l=this.model[this.model.length-1],this.removeItem(l)),l}toString(l,a=-1){let h="";return this.model&&(a>-1?this.model[a]&&(h+=l&&this.model[a][l]?this.model[a][l]:this.model[a].toString()):this.model.forEach(d=>{h+=l&&d[l]?d[l]:d.toString(),h+=" "})),h.trim()}addItem(l){this.containsItem(l)||(this.model=this.model||[],this.model.push(l))}removeItem(l){if(null==this.model)return;const a=this.model.indexOf(l);a>-1&&this.model.splice(a,1),0===this.model.length&&(this.model=null)}}}setSelectionValue(a){!this.selectionModel||this.selectionModel.model===a||!this.selectionModel.model&&!a||(this.selectionModel.model=a,this._selectionChanged.next(this.selectionModel))}}return c.\u0275fac=function(a){return new(a||c)},c.\u0275prov=Oe({token:c,factory:c.\u0275fac}),c})();lZ((()=>{class c{constructor(a,h,d,f,m){this.id=a,this.toggleService=d,this.selectionService=f,this.platformId=m,this.pseudoFocus=new n5e,this.optionData=[],this.handleFocusSubscription(),this.renderer=h.createRenderer(null,null)}handleFocusSubscription(){this.toggleService.openChange.subscribe(a=>{a||(this.pseudoFocus.model=null)})}get trigger(){return this._trigger}set trigger(a){this._trigger=a,this.addFocusOnBlurListener(a)}get listbox(){return this._listbox}set listbox(a){this._listbox=a,this.addFocusOnBlurListener(a)}get textInput(){return this._textInput}set textInput(a){this._textInput=a,this.renderer.listen(a,"keydown",h=>!this.handleTextInput(h)),this.addFocusOnBlurListener(a)}moveFocusTo(a){let h=this.optionData.findIndex(d=>d.equals(this.pseudoFocus.model));a===ma.UP?-1===h||0===h?h=this.optionData.length-1:h--:a===ma.DOWN&&(-1===h||h===this.optionData.length-1?h=0:h++),this.pseudoFocus.select(this.optionData[h]),this.pseudoFocus.model&&this.pseudoFocus.model.el&&this.pseudoFocus.model.el.scrollIntoView({behavior:"smooth",block:"center",inline:"nearest"})}openAndMoveTo(a){this.toggleService.open?this.moveFocusTo(a):(this.toggleService.openChange.pipe(dh(1)).subscribe(h=>{h&&this.moveFocusTo(a)}),this.toggleService.open=!0)}handleTextInput(a){let h=!1;const d=qb(a.key);if(a)switch(d){case Ln.Enter:this.toggleService.open&&this.pseudoFocus.model&&(this.selectionService.multiselectable?this.selectionService.toggle(this.pseudoFocus.model.value):this.selectionService.select(this.pseudoFocus.model.value),h=!0);break;case Ln.Space:this.toggleService.open||(this.toggleService.open=!0,h=!0);break;case Ln.ArrowUp:this.preventViewportScrolling(a),this.openAndMoveTo(ma.UP),h=!0;break;case Ln.ArrowDown:this.preventViewportScrolling(a),this.openAndMoveTo(ma.DOWN),h=!0;break;default:a.key!==Ln.Tab&&(!this.selectionService.multiselectable||a.key!==Ln.Backspace)&&a.key!==Ln.Escape&&!this.toggleService.open&&(this.toggleService.open=!0)}return h}preventViewportScrolling(a){a.preventDefault(),a.stopImmediatePropagation()}focusInput(){this.textInput&&Dr(this.platformId)&&this.textInput.focus()}addFocusOnBlurListener(a){Dr(this.platformId)&&this.renderer.listen(a,"blur",h=>{this.focusOutOfComponent(h)&&(this.toggleService.open=!1,this.componentCdRef&&this.componentCdRef.detectChanges())})}focusOutOfComponent(a){const h=a.relatedTarget||document.activeElement;return!(this.textInput.contains(h)||this.trigger.contains(h)||this.listbox.contains(h))}focusFirstActive(){if(this.optionData.length>0)if(this.selectionService.selectionModel.isEmpty())this.pseudoFocus.select(this.optionData[0]);else{let a;a=this.selectionService.multiselectable?this.selectionService.selectionModel.model[0]:this.selectionService.selectionModel.model;const h=this.optionData.find(d=>d.value===a);this.pseudoFocus.select(h||this.optionData[0])}}addOptionValues(a){this.optionData=a}}return c.\u0275fac=function(a){return new(a||c)(Ae(cs),Ae(Lg),Ae(Hr),Ae(r5e),Ae(wi))},c.\u0275prov=Oe({token:c,factory:c.\u0275fac}),c})());let i5e=(()=>{class c{constructor(){Rr.addIcons(nl,rl,fv,Eb)}}return c.\u0275fac=function(a){return new(a||c)},c.\u0275mod=Ut({type:c}),c.\u0275inj=kt({imports:[[Nn,Ou,zr,CF,no,Hl,Kb,eT],no,Hl]}),c})(),tT=(()=>{class c extends Qb{}return c.\u0275fac=function(){let l;return function(h){return(l||(l=Ri(c)))(h||c)}}(),c.\u0275cmp=Be({type:c,selectors:[["clr-input-container"]],hostVars:6,hostBindings:function(a,h){2&a&&st("clr-form-control",!0)("clr-form-control-disabled",null==h.control?null:h.control.disabled)("clr-row",h.addGrid())},features:[Mt([Nc,ll,al,Fc]),Qt],ngContentSelectors:yke,decls:10,vars:7,consts:[[4,"ngIf"],[1,"clr-control-container",3,"ngClass"],[1,"clr-input-wrapper"],["class","clr-validate-icon","shape","exclamation-circle","aria-hidden","true",4,"ngIf"],["class","clr-validate-icon","shape","check-circle","status","success","aria-hidden","true",4,"ngIf"],["shape","exclamation-circle","aria-hidden","true",1,"clr-validate-icon"],["shape","check-circle","status","success","aria-hidden","true",1,"clr-validate-icon"]],template:function(a,h){1&a&&(Et(gke),ke(0),le(1,uke,1,0,"label",0),U(2,"div",1)(3,"div",2),ke(4,1),le(5,hke,1,0,"cds-icon",3),le(6,dke,1,0,"cds-icon",4),H(),le(7,fke,1,0,"ng-content",0),le(8,pke,1,0,"ng-content",0),le(9,mke,1,0,"ng-content",0),H()),2&a&&(B(1),G("ngIf",!h.label&&h.addGrid()),B(1),G("ngClass",h.controlClass()),B(3),G("ngIf",h.showInvalid),B(1),G("ngIf",h.showValid),B(1),G("ngIf",h.showHelper),B(1),G("ngIf",h.showInvalid),B(1),G("ngIf",h.showValid))},dependencies:[vn,es,$s,Gr],encapsulation:2}),c})(),uM=(()=>{class c extends Lv{constructor(a,h,d,f,m){super(a,tT,h,d,f,m),this.index=1}}return c.\u0275fac=function(a){return new(a||c)(N(Zn),N(ti),N(da,10),N(Fn),N(zt))},c.\u0275dir=We({type:c,selectors:[["","clrInput",""]],hostVars:2,hostBindings:function(a,h){2&a&&st("clr-input",!0)},features:[Qt]}),c})(),cZ=(()=>{class c{constructor(){Rr.addIcons(nl,rl)}}return c.\u0275fac=function(a){return new(a||c)},c.\u0275mod=Ut({type:c}),c.\u0275inj=kt({imports:[[Nn,Ou,zr,no],no]}),c})(),s5e=(()=>{class c{constructor(){Rr.addIcons(nl,rl)}}return c.\u0275fac=function(a){return new(a||c)},c.\u0275mod=Ut({type:c}),c.\u0275inj=kt({imports:[[Nn,cZ,zr]]}),c})(),o5e=(()=>{class c{constructor(){this._previousFocusTraps=[]}get current(){return this._current}set current(a){this._previousFocusTraps.push(this._current),this._current=a}get nbFocusTrappers(){return this._previousFocusTraps.length}activatePreviousTrapper(){this._current=this._previousFocusTraps.pop()}}return c.\u0275fac=function(a){return new(a||c)},c.\u0275prov=Oe({token:c,factory:c.\u0275fac,providedIn:"root"}),c})(),Pf=(()=>{class c{constructor(a,h,d,f,m){this.el=a,this.injector=h,this.focusTrapsTracker=d,this.renderer=f,this.platformId=m,this.localFocusEscaped=!1,this._config={strict:!0},this.document=this.injector.get(Er),this.focusTrapsTracker.current=this}set config(a){this._config=Object.assign(this._config,""===a?{}:a)}onFocusIn(a){const h=this.el.nativeElement;this.focusTrapsTracker.current!==this||!Dr(this.platformId)||this.localFocusEscaped||h.contains(a.target)||(a.target===this.topReboundEl&&h.contains(a.relatedTarget)?(this.focusLastFocusable(),this.focusTrapElIfOutside()):a.target===this.bottomReboundEl&&h.contains(a.relatedTarget)?(this.focusFirstFocusable(),this.focusTrapElIfOutside()):this._config.strict?this.el.nativeElement.focus():this.localFocusEscaped=!0)}createFocusableOffScreenEl(){const a=this.document.createElement("span");return this.renderer.setAttribute(a,"tabindex","0"),this.renderer.addClass(a,"offscreen-focus-rebounder"),a}addReboundEls(){if(Dr(this.platformId)){this.topReboundEl=this.createFocusableOffScreenEl(),this.bottomReboundEl=this.createFocusableOffScreenEl();const a=this.el.nativeElement;this.renderer.insertBefore(a.parentElement,this.topReboundEl,a),a.nextSibling?this.renderer.insertBefore(a.parentNode,this.bottomReboundEl,a.nextSibling):this.renderer.appendChild(a.parentNode,this.bottomReboundEl)}}removeReboundEls(){Dr(this.platformId)&&this.topReboundEl&&this.bottomReboundEl&&(this.parentElement.removeChild(this.topReboundEl),this.parentElement.removeChild(this.bottomReboundEl),delete this.topReboundEl,delete this.bottomReboundEl)}setPreviousFocus(){this.previousActiveElement&&this.previousActiveElement.focus&&this.previousActiveElement.focus()}ngOnInit(){Dr(this.platformId)&&(this.renderer.setAttribute(this.el.nativeElement,"tabindex","-1"),this.el.nativeElement.focus())}ngAfterViewInit(){Dr(this.platformId)&&(this.previousActiveElement=this.document.activeElement,this.parentElement=this.el.nativeElement.parentElement),this.addReboundEls()}get potentiallyFocusableEls(){return[...this.el.nativeElement.querySelectorAll('[href]:not([tabindex="-1"]), button:not([disabled]):not([tabindex="-1"]), input:not([disabled]):not([tabindex="-1"]), select:not([disabled]):not([tabindex="-1"]), textarea:not([disabled]):not([tabindex="-1"]), [contenteditable="true"]:not([tabindex="-1"]), [tabindex]:not([tabindex="-1"]) ')]}focusFirstFocusable(){for(let a=0;a<this.potentiallyFocusableEls.length&&(this.firstFocusableEl=this.focusElement(this.potentiallyFocusableEls[a]),!this.firstFocusableEl);a++);}focusLastFocusable(){for(let a=this.potentiallyFocusableEls.length-1;a>=0&&(this.lastFocusableEl=this.focusElement(this.potentiallyFocusableEls[a]),!this.lastFocusableEl);a--);}focusTrapElIfOutside(){this.el.nativeElement.contains(document.activeElement)||this.el.nativeElement.focus()}focusElement(a){return a&&a.focus&&(a.focus(),document.activeElement===a)?a:null}ngOnDestroy(){this.removeReboundEls(),this.setPreviousFocus(),this.focusTrapsTracker.activatePreviousTrapper()}}return c.\u0275fac=function(a){return new(a||c)(N(zt),N(ti),N(o5e),N(Fn),N(wi))},c.\u0275dir=We({type:c,selectors:[["","clrFocusTrap",""]],hostBindings:function(a,h){1&a&&Me("focusin",function(f){return h.onFocusIn(f)},0,b0)},inputs:{config:["clrFocusTrap","config"]}}),c})(),hM=(()=>{class c{}return c.\u0275fac=function(a){return new(a||c)},c.\u0275mod=Ut({type:c}),c.\u0275inj=kt({imports:[[Nn]]}),c})(),w5e=(()=>{class c{constructor(){Rr.addIcons(nl,rl,fv,m2e,g2e)}}return c.\u0275fac=function(a){return new(a||c)},c.\u0275mod=Ut({type:c}),c.\u0275inj=kt({imports:[[Nn,nM,Hl,Kb,zr,hM,no]]}),c})();new Vt(void 0);let E5e=(()=>{class c{constructor(){Rr.addIcons(y2e,v2e,nl,rl)}}return c.\u0275fac=function(a){return new(a||c)},c.\u0275mod=Ut({type:c}),c.\u0275inj=kt({imports:[[Nn,Ou,zr,no],no]}),c})(),M5e=(()=>{class c{constructor(){this._dynamic=!1}ngOnInit(){this.label&&this.label.disableGrid()}}return c.\u0275fac=function(a){return new(a||c)},c.\u0275cmp=Be({type:c,selectors:[["clr-radio-wrapper"]],contentQueries:function(a,h,d){if(1&a&&yn(d,es,7),2&a){let f;mt(f=gt())&&(h.label=f.first)}},hostVars:2,hostBindings:function(a,h){2&a&&st("clr-radio-wrapper",!0)},features:[Mt([al])],ngContentSelectors:Bke,decls:3,vars:1,consts:[[4,"ngIf"]],template:function(a,h){1&a&&(Et(Vke),ke(0),ke(1,1),le(2,kke,1,0,"label",0)),2&a&&(B(2),G("ngIf",!h.label))},dependencies:[vn,es],encapsulation:2}),c})(),D5e=(()=>{class c extends Lv{constructor(a,h,d,f,m){super(a,M5e,h,d,f,m)}}return c.\u0275fac=function(a){return new(a||c)(N(Zn),N(ti),N(da,10),N(Fn),N(zt))},c.\u0275dir=We({type:c,selectors:[["","clrRadio",""]],features:[Qt]}),c})(),A5e=(()=>{class c{constructor(){Rr.addIcons(nl,rl)}}return c.\u0275fac=function(a){return new(a||c)},c.\u0275mod=Ut({type:c}),c.\u0275inj=kt({imports:[[Nn,no,nM,zr],no]}),c})(),_Z=(()=>{class c extends Qb{constructor(a,h,d,f,m,g){super(g,a,h,d),this.renderer=f,this.idService=m,this.ifControlStateService=g,this._hasProgress=!1}set hasProgress(a){const h=!!a;h!==this._hasProgress&&(this._hasProgress=h)}get hasProgress(){return this._hasProgress}getRangeProgressFillWidth(){const a=this.renderer.selectRootElement("[clrRange]#"+this.idService.id),d=+a.min;let f=+a.max;return 0===d&&0===f&&(f=100),100*((this.control&&void 0!==this.control.value?this.control.value:(d+f)/2)-d)/(f-d)*a.offsetWidth/100+"px"}}return c.\u0275fac=function(a){return new(a||c)(N(ku,8),N(Fc),N(ll),N(Fn),N(al),N(Nc))},c.\u0275cmp=Be({type:c,selectors:[["clr-range-container"]],hostVars:6,hostBindings:function(a,h){2&a&&st("clr-form-control",!0)("clr-form-control-disabled",null==h.control?null:h.control.disabled)("clr-row",h.addGrid())},inputs:{hasProgress:["clrRangeHasProgress","hasProgress"]},features:[Mt([Nc,ll,al,Fc]),Qt],ngContentSelectors:$ke,decls:11,vars:10,consts:[[4,"ngIf"],[1,"clr-control-container",3,"ngClass"],[1,"clr-range-wrapper"],["class","fill-input",3,"width",4,"ngIf"],["class","clr-validate-icon","status","danger","shape","exclamation-circle","aria-hidden","true",4,"ngIf"],["class","clr-validate-icon","shape","check-circle","status","success","aria-hidden","true",4,"ngIf"],[1,"fill-input"],["status","danger","shape","exclamation-circle","aria-hidden","true",1,"clr-validate-icon"],["shape","check-circle","status","success","aria-hidden","true",1,"clr-validate-icon"]],template:function(a,h){1&a&&(Et(qke),ke(0),le(1,Uke,1,0,"label",0),U(2,"div",1)(3,"div",2),ke(4,1),le(5,Gke,1,2,"span",3),le(6,zke,1,0,"cds-icon",4),le(7,Hke,1,0,"cds-icon",5),H(),le(8,jke,1,0,"ng-content",0),le(9,Wke,1,0,"ng-content",0),le(10,Xke,1,0,"ng-content",0),H()),2&a&&(B(1),G("ngIf",!h.label&&h.addGrid()),B(1),G("ngClass",h.controlClass()),B(1),st("progress-fill",h.hasProgress),B(2),G("ngIf",h.hasProgress),B(1),G("ngIf",h.showInvalid),B(1),G("ngIf",h.showValid),B(1),G("ngIf",h.showHelper),B(1),G("ngIf",h.showInvalid),B(1),G("ngIf",h.showValid))},dependencies:[vn,es,$s,Gr],encapsulation:2}),c})(),I5e=(()=>{class c extends Lv{constructor(a,h,d,f,m){super(a,_Z,h,d,f,m)}}return c.\u0275fac=function(a){return new(a||c)(N(Zn),N(ti),N(da,10),N(Fn),N(zt))},c.\u0275dir=We({type:c,selectors:[["","clrRange",""]],hostVars:2,hostBindings:function(a,h){2&a&&st("clr-range",!0)},features:[Qt]}),c})(),R5e=(()=>{class c{constructor(){Rr.addIcons(nl,rl)}}return c.\u0275fac=function(a){return new(a||c)},c.\u0275mod=Ut({type:c}),c.\u0275inj=kt({imports:[[Nn,no,nM,zr],no]}),c})(),SZ=(()=>{class c extends Qb{constructor(a,h,d,f){super(f,a,h,d),this.layoutService=a,this.controlClassService=h,this.ngControlService=d,this.ifControlStateService=f,this.multi=!1}ngOnInit(){this.subscriptions.push(this.ngControlService.controlChanges.subscribe(a=>{a&&(this.multi=a.valueAccessor instanceof kb,this.control=a)}))}wrapperClass(){return this.multi?"clr-multiselect-wrapper":"clr-select-wrapper"}}return c.\u0275fac=function(a){return new(a||c)(N(ku,8),N(Fc),N(ll),N(Nc))},c.\u0275cmp=Be({type:c,selectors:[["clr-select-container"]],contentQueries:function(a,h,d){if(1&a&&yn(d,kb,5),2&a){let f;mt(f=gt())&&(h.multiple=f.first)}},hostVars:6,hostBindings:function(a,h){2&a&&st("clr-form-control",!0)("clr-form-control-disabled",null==h.control?null:h.control.disabled)("clr-row",h.addGrid())},features:[Mt([Nc,ll,al,Fc]),Qt],ngContentSelectors:n3e,decls:10,vars:8,consts:[[4,"ngIf"],[1,"clr-control-container",3,"ngClass"],[3,"ngClass"],["class","clr-validate-icon","status","danger","shape","exclamation-circle","aria-hidden","true",4,"ngIf"],["class","clr-validate-icon","shape","check-circle","status","success","aria-hidden","true",4,"ngIf"],["status","danger","shape","exclamation-circle","aria-hidden","true",1,"clr-validate-icon"],["shape","check-circle","status","success","aria-hidden","true",1,"clr-validate-icon"]],template:function(a,h){1&a&&(Et(t3e),ke(0),le(1,Yke,1,0,"label",0),U(2,"div",1)(3,"div",2),ke(4,1),le(5,Zke,1,0,"cds-icon",3),le(6,Kke,1,0,"cds-icon",4),H(),le(7,Qke,1,0,"ng-content",0),le(8,Jke,1,0,"ng-content",0),le(9,e3e,1,0,"ng-content",0),H()),2&a&&(B(1),G("ngIf",!h.label&&h.addGrid()),B(1),G("ngClass",h.controlClass()),B(1),G("ngClass",h.wrapperClass()),B(2),G("ngIf",h.showInvalid),B(1),G("ngIf",h.showValid),B(1),G("ngIf",h.showHelper),B(1),G("ngIf",h.showInvalid),B(1),G("ngIf",h.showValid))},dependencies:[vn,es,$s,Gr],encapsulation:2}),c})(),bZ=(()=>{class c extends Lv{constructor(a,h,d,f,m){super(a,SZ,h,d,f,m),this.index=1}}return c.\u0275fac=function(a){return new(a||c)(N(Zn),N(ti),N(da,10),N(Fn),N(zt))},c.\u0275dir=We({type:c,selectors:[["","clrSelect",""]],hostVars:2,hostBindings:function(a,h){2&a&&st("clr-select",!0)},features:[Qt]}),c})(),P5e=(()=>{class c{constructor(){Rr.addIcons(nl,rl)}}return c.\u0275fac=function(a){return new(a||c)},c.\u0275mod=Ut({type:c}),c.\u0275inj=kt({imports:[[Nn,Ou,zr,no],no]}),c})(),L5e=(()=>{class c{constructor(){Rr.addIcons(nl,rl)}}return c.\u0275fac=function(a){return new(a||c)},c.\u0275mod=Ut({type:c}),c.\u0275inj=kt({imports:[[Nn,Ou,zr,no],no]}),c})(),TZ=(()=>{class c{}return c.\u0275fac=function(a){return new(a||c)},c.\u0275mod=Ut({type:c}),c.\u0275inj=kt({imports:[[Nn],no,X4e,i5e,w5e,cZ,E5e,A5e,P5e,L5e,R5e,s5e]}),c})(),ul=(()=>{class c{userDefinedWidth(a){a.classList.add("datagrid-cell-width-zero");const h=this.clientRect(a).width;return a.classList.remove("datagrid-cell-width-zero"),h}scrollBarWidth(a){return a.offsetWidth-a.clientWidth}scrollWidth(a){return a.scrollWidth||0}computedHeight(a){return parseInt(getComputedStyle(a).getPropertyValue("height"),10)}clientRect(a){const h=a.getBoundingClientRect();return{top:parseInt(h.top,10),bottom:parseInt(h.bottom,10),left:parseInt(h.left,10),right:parseInt(h.right,10),width:parseInt(h.width,10),height:parseInt(h.height,10)}}minWidth(a){return parseInt(getComputedStyle(a).getPropertyValue("min-width"),10)}focus(a){a.focus()}}return c.\u0275fac=function(a){return new(a||c)},c.\u0275prov=Oe({token:c,factory:c.\u0275fac}),c})(),pM=(()=>{class c{constructor(a,h){this.element=a,this.domAdapter=h,this.startHeight=0}get expandAnimation(){return{value:this.clrExpandTrigger,params:{startHeight:this.startHeight}}}animationDone(){this.updateStartHeight()}updateStartHeight(){this.startHeight=this.domAdapter.computedHeight(this.element.nativeElement)||0}}return c.\u0275fac=function(a){return new(a||c)(N(zt),N(ul))},c.\u0275cmp=Be({type:c,selectors:[["clr-expandable-animation"]],hostVars:1,hostBindings:function(a,h){1&a&&JR("@expandAnimation.done",function(){return h.animationDone()}),2&a&&Rw("@expandAnimation",h.expandAnimation)},inputs:{clrExpandTrigger:"clrExpandTrigger"},features:[Mt([ul])],ngContentSelectors:hn,decls:1,vars:0,template:function(a,h){1&a&&(Et(),ke(0))},styles:["[_nghost-%COMP%]{display:block}"],data:{animation:[il("expandAnimation",[xs("true <=> false",[gr({height:"{{startHeight}}px",overflow:"hidden"}),fo("0.2s ease-in-out",gr({height:"*"}))])])]}}),c})(),wZ=(()=>{class c{}return c.\u0275fac=function(a){return new(a||c)},c.\u0275mod=Ut({type:c}),c.\u0275inj=kt({imports:[[Nn]]}),c})();var Fo=(()=>(function(c){c[c.DRAG_START=0]="DRAG_START",c[c.DRAG_MOVE=1]="DRAG_MOVE",c[c.DRAG_END=2]="DRAG_END",c[c.DRAG_ENTER=3]="DRAG_ENTER",c[c.DRAG_LEAVE=4]="DRAG_LEAVE",c[c.DROP=5]="DROP"}(Fo||(Fo={})),Fo))();let CZ=(()=>{class c{constructor(){this.dragStart=new Ke,this.dragMove=new Ke,this.dragEnd=new Ke,this.drop=new Ke}get dragStarted(){return this.dragStart.asObservable()}get dragMoved(){return this.dragMove.asObservable()}get dragEnded(){return this.dragEnd.asObservable()}get dropped(){return this.drop.asObservable()}broadcast(a){switch(a.type){case Fo.DRAG_START:this.dragStart.next(a);break;case Fo.DRAG_MOVE:this.dragMove.next(a);break;case Fo.DRAG_END:this.dragEnd.next(a);break;case Fo.DROP:this.drop.next(a)}}}return c.\u0275fac=function(a){return new(a||c)},c.\u0275prov=Oe({token:c,factory:c.\u0275fac,providedIn:"root"}),c})(),oT=(()=>{class c{constructor(a,h,d){this.ngZone=a,this.renderer=h,this.eventBus=d,this.listeners=[],this.dragStart=new Ke,this.dragMove=new Ke,this.dragEnd=new Ke,this.hasDragStarted=!1,this.dragStartDelay=0}get dragStarted(){return this.dragStart.asObservable()}get dragMoved(){return this.dragMove.asObservable()}get dragEnded(){return this.dragEnd.asObservable()}get dragStartPosition(){return this.initialPosition}attachDragListeners(a){this.draggableEl=a,this.listeners.push(this.customDragEvent(this.draggableEl,"mousedown","mousemove","mouseup")),this.listeners.push(this.customDragEvent(this.draggableEl,"touchstart","touchmove","touchend"))}detachDragListeners(){this.listeners&&this.listeners.map(a=>a()),this.nestedListeners&&this.nestedListeners.map(a=>a()),this.checkDragStartBoundaryListener&&this.checkDragStartBoundaryListener()}getNativeEventObject(a){return Object.prototype.hasOwnProperty.call(a,"changedTouches")?a.changedTouches[0]:a}customDragEvent(a,h,d,f){return this.renderer.listen(a,h,m=>{this.initialPosition={pageX:this.getNativeEventObject(m).pageX,pageY:this.getNativeEventObject(m).pageY},this.nestedListeners=[],this.ngZone.runOutsideAngular(()=>{this.nestedListeners.push(this.renderer.listen("document","selectstart",g=>{g.preventDefault(),g.stopImmediatePropagation()})),this.checkDragStartBoundary(d),this.dragStartDelayTimeout=setTimeout(()=>{this.checkDragStartBoundaryListener&&this.checkDragStartBoundaryListener(),this.hasDragStarted=!0,this.broadcast(m,Fo.DRAG_START),this.nestedListeners.push(this.renderer.listen("document",d,g=>{g.stopImmediatePropagation(),this.hasDragStarted&&this.broadcast(g,Fo.DRAG_MOVE)}))},this.dragStartDelay)}),this.nestedListeners.push(this.renderer.listen("document",f,g=>{this.hasDragStarted&&(this.hasDragStarted=!1,this.broadcast(g,Fo.DRAG_END)),clearTimeout(this.dragStartDelayTimeout),this.nestedListeners.map(y=>y()),this.checkDragStartBoundaryListener&&this.checkDragStartBoundaryListener()}))})}checkDragStartBoundary(a){this.checkDragStartBoundaryListener=this.renderer.listen("document",a,h=>{const d=Math.abs(this.getNativeEventObject(h).pageX-this.initialPosition.pageX),f=Math.abs(this.getNativeEventObject(h).pageY-this.initialPosition.pageY);(d>1||f>1)&&(clearTimeout(this.dragStartDelayTimeout),this.checkDragStartBoundaryListener&&this.checkDragStartBoundaryListener())})}broadcast(a,h){const d=this.generateDragEvent(a,h);switch(d.type){case Fo.DRAG_START:this.dragStart.next(d);break;case Fo.DRAG_MOVE:this.dragMove.next(d);break;case Fo.DRAG_END:this.dragEnd.next(d)}d.ghostElement=this.ghostElement,d.dropPointPosition=this.dropPointPosition,this.eventBus.broadcast(d)}generateDragEvent(a,h){const d=this.getNativeEventObject(a);return{type:h,dragPosition:{pageX:d.pageX,pageY:d.pageY,moveX:d.pageX-this.initialPosition.pageX,moveY:d.pageY-this.initialPosition.pageY},group:this.group,dragDataTransfer:this.dragDataTransfer,ghostElement:this.ghostElement}}}return c.\u0275fac=function(a){return new(a||c)(Ae(kn),Ae(Fn),Ae(CZ))},c.\u0275prov=Oe({token:c,factory:c.\u0275fac}),c})(),kF=(()=>{class c{constructor(a,h){this.dragEventListener=a,this.renderer=h}get defaultHandleEl(){return this._defaultHandleEl}set defaultHandleEl(a){this._defaultHandleEl=a,this._customHandleEl||this.makeElementHandle(this._defaultHandleEl)}makeElementHandle(a){this._defaultHandleEl&&this._defaultHandleEl!==a&&this.renderer.removeClass(this._defaultHandleEl,"drag-handle"),this.dragEventListener.attachDragListeners(a),this.renderer.addClass(a,"drag-handle")}get customHandleEl(){return this._customHandleEl}registerCustomHandle(a){this.dragEventListener.detachDragListeners(),this._customHandleEl=a,this.makeElementHandle(this._customHandleEl)}unregisterCustomHandle(){this.dragEventListener.detachDragListeners(),this.renderer.removeClass(this._customHandleEl,"drag-handle"),delete this._customHandleEl,this._defaultHandleEl&&this.makeElementHandle(this._defaultHandleEl)}}return c.\u0275fac=function(a){return new(a||c)(Ae(oT),Ae(Fn))},c.\u0275prov=Oe({token:c,factory:c.\u0275fac}),c})(),VF=(()=>{class c{constructor(a){this.domAdapter=a}capture(a,h){this.draggableElClientRect=this.domAdapter.clientRect(a),this.snapshotDragEvent=h}discard(){delete this.draggableElClientRect,delete this.snapshotDragEvent}get hasDraggableState(){return!!this.snapshotDragEvent&&!!this.draggableElClientRect}get clientRect(){return this.draggableElClientRect}get dragEvent(){return this.snapshotDragEvent}}return c.\u0275fac=function(a){return new(a||c)(Ae(ul))},c.\u0275prov=Oe({token:c,factory:c.\u0275fac}),c})(),xZ=(()=>{class c{constructor(a,h,d,f,m){if(this.el=a,this.dragEventListener=h,this.draggableSnapshot=d,this.renderer=f,this.ngZone=m,this.subscriptions=[],this.leaveAnimConfig={value:0,params:{top:"0px",left:"0px"}},!this.dragEventListener||!this.draggableSnapshot)throw new Error("The clr-draggable-ghost component can only be used inside of a clrDraggable directive.");this.draggableGhostEl=this.el.nativeElement,this.renderer.addClass(this.draggableGhostEl,"draggable-ghost"),this.dragEventListener.ghostElement=this.draggableGhostEl,this.setDefaultGhostSize(this.draggableGhostEl);const g={top:this.draggableSnapshot.hasDraggableState?this.draggableSnapshot.dragEvent.dragPosition.pageY-this.draggableSnapshot.clientRect.top:0,left:this.draggableSnapshot.hasDraggableState?this.draggableSnapshot.dragEvent.dragPosition.pageX-this.draggableSnapshot.clientRect.left:0};let y=!1;this.subscriptions.push(this.dragEventListener.dragMoved.subscribe(v=>{y||(this.draggableSnapshot.hasDraggableState?this.animateToOnLeave(`${this.draggableSnapshot.clientRect.top}px`,`${this.draggableSnapshot.clientRect.left}px`):this.animateToOnLeave(`${this.dragEventListener.dragStartPosition.pageY}px`,`${this.dragEventListener.dragStartPosition.pageY}px`),y=!0);const _=this.findTopLeftPosition(v.dragPosition,g);this.setPositionStyle(this.draggableGhostEl,_.pageX,_.pageY),this.dragEventListener.dropPointPosition=this.findDropPointPosition(_)}))}setDefaultGhostSize(a){this.draggableSnapshot.hasDraggableState&&this.setSizeStyle(a,this.draggableSnapshot.clientRect.width,this.draggableSnapshot.clientRect.height)}animateToOnLeave(a,h){this.ngZone.run(()=>{this.leaveAnimConfig={value:0,params:{top:a,left:h}}})}findTopLeftPosition(a,h){return{pageX:a.pageX-h.left,pageY:a.pageY-h.top}}findDropPointPosition(a){return this.draggableSnapshot.hasDraggableState?{pageX:a.pageX+this.draggableSnapshot.clientRect.width/2,pageY:a.pageY+this.draggableSnapshot.clientRect.height/2}:a}setSizeStyle(a,h,d){this.renderer.setStyle(a,"width",`${h}px`),this.renderer.setStyle(a,"height",`${d}px`)}setPositionStyle(a,h,d){this.renderer.setStyle(a,"left",`${h}px`),this.renderer.setStyle(a,"top",`${d}px`),this.renderer.setStyle(a,"visibility","visible")}ngOnDestroy(){this.subscriptions.forEach(a=>a.unsubscribe())}}return c.\u0275fac=function(a){return new(a||c)(N(zt),N(oT,8),N(VF,8),N(Fn),N(kn))},c.\u0275cmp=Be({type:c,selectors:[["clr-draggable-ghost"]],hostVars:1,hostBindings:function(a,h){2&a&&Rw("@leaveAnimation",h.leaveAnimConfig)},ngContentSelectors:hn,decls:1,vars:0,template:function(a,h){1&a&&(Et(),ke(0))},encapsulation:2,data:{animation:[il("leaveAnimation",[xs(":leave",[gr({left:"*",top:"*"}),fo("0.2s ease-in-out",gr({top:"{{top}}",left:"{{left}}"}))])])]}}),c})();class zh{constructor(l){this.dragPosition=l.dragPosition,this.group=l.group,this.dragDataTransfer=l.dragDataTransfer,this.dropPointPosition=l.dropPointPosition}}let EZ=(()=>{class c{constructor(a,h,d){if(this.template=a,this.container=h,this.dragEventListener=d,this.subscriptions=[],!this.dragEventListener||!this.container)throw new Error("The *clrIfDragged directive can only be used inside of a clrDraggable directive.");this.subscriptions.push(this.dragEventListener.dragStarted.subscribe(()=>{this.container.createEmbeddedView(this.template)})),this.subscriptions.push(this.dragEventListener.dragEnded.subscribe(()=>{this.container.clear()}))}ngOnDestroy(){this.subscriptions.forEach(a=>a.unsubscribe())}}return c.\u0275fac=function(a){return new(a||c)(N(Vi),N(Zn,12),N(oT,8))},c.\u0275dir=We({type:c,selectors:[["","clrIfDragged",""]]}),c})(),MZ=(()=>{class c{constructor(a){this.renderer=a}enter(){this.renderer.addClass(document.body,"in-drag")}exit(){this.renderer.removeClass(document.body,"in-drag")}}return c.\u0275fac=function(a){return new(a||c)(Ae(Fn))},c.\u0275prov=Oe({token:c,factory:c.\u0275fac}),c})(),DZ=(()=>{class c{constructor(a,h,d,f,m,g,y,v){this.el=a,this.dragEventListener=h,this.dragHandleRegistrar=d,this.viewContainerRef=f,this.cfr=m,this.injector=g,this.draggableSnapshot=y,this.globalDragMode=v,this.subscriptions=[],this.dragOn=!1,this.dragStartEmitter=new rt,this.dragMoveEmitter=new rt,this.dragEndEmitter=new rt,this.draggableEl=this.el.nativeElement,this.componentFactory=this.cfr.resolveComponentFactory(xZ)}set dataTransfer(a){this.dragEventListener.dragDataTransfer=a}set group(a){this.dragEventListener.group=a}set dragStartDelay(a){"number"==typeof a?this.dragEventListener.dragStartDelay=a:"string"==typeof a&&(this.dragEventListener.dragStartDelay=parseInt(a,10)||0)}createDefaultGhost(a){this.draggableSnapshot.capture(this.draggableEl,a),this.viewContainerRef.createComponent(this.componentFactory,0,this.injector,[[this.draggableEl.cloneNode(!0)]])}destroyDefaultGhost(){this.viewContainerRef.clear(),this.draggableSnapshot.discard()}ngAfterContentInit(){this.dragHandleRegistrar.defaultHandleEl=this.draggableEl,this.subscriptions.push(this.dragEventListener.dragStarted.subscribe(a=>{this.globalDragMode.enter(),this.dragOn=!0,this.customGhost||this.createDefaultGhost(a),this.dragStartEmitter.emit(new zh(a))})),this.subscriptions.push(this.dragEventListener.dragMoved.subscribe(a=>{this.dragMoveEmitter.emit(new zh(a))})),this.subscriptions.push(this.dragEventListener.dragEnded.subscribe(a=>{this.globalDragMode.exit(),this.dragOn=!1,this.customGhost||this.destroyDefaultGhost(),this.dragEndEmitter.emit(new zh(a))}))}ngOnDestroy(){this.subscriptions.forEach(a=>a.unsubscribe()),this.dragEventListener.detachDragListeners()}}return c.\u0275fac=function(a){return new(a||c)(N(zt),N(oT),N(kF),N(Zn),N(nu),N(ti),N(VF),N(MZ))},c.\u0275dir=We({type:c,selectors:[["","clrDraggable",""]],contentQueries:function(a,h,d){if(1&a&&yn(d,EZ,5),2&a){let f;mt(f=gt())&&(h.customGhost=f.first)}},hostVars:4,hostBindings:function(a,h){2&a&&st("draggable",!0)("being-dragged",h.dragOn)},inputs:{dataTransfer:["clrDraggable","dataTransfer"],group:["clrGroup","group"],dragStartDelay:["clrDragStartDelay","dragStartDelay"]},outputs:{dragStartEmitter:"clrDragStart",dragMoveEmitter:"clrDragMove",dragEndEmitter:"clrDragEnd"},features:[Mt([oT,kF,VF,MZ,ul])]}),c})(),AZ=(()=>{class c{}return c.\u0275fac=function(a){return new(a||c)},c.\u0275mod=Ut({type:c}),c.\u0275inj=kt({imports:[[Nn]]}),c})();const N5e={provide:new Vt("FOCUS_ON_VIEW_INIT"),useValue:!0};let xm=(()=>{class c{}return c.\u0275fac=function(a){return new(a||c)},c.\u0275mod=Ut({type:c}),c.\u0275inj=kt({providers:[N5e],imports:[[Nn]]}),c})(),UF=(()=>{class c{}return c.\u0275fac=function(a){return new(a||c)},c.\u0275mod=Ut({type:c}),c.\u0275inj=kt({imports:[[Nn]]}),c})(),F5e=(()=>{class c{}return c.\u0275fac=function(a){return new(a||c)},c.\u0275mod=Ut({type:c}),c.\u0275inj=kt({imports:[[Nn]]}),c})();class mM{}let aT=(()=>{class c{constructor(){this._change=new Ke,this.nbChanges=0}get change(){return this._change.asObservable()}changeStart(){this.nbChanges++}changeDone(){0==--this.nbChanges&&this._change.next()}}return c.\u0275fac=function(a){return new(a||c)},c.\u0275prov=Oe({token:c,factory:c.\u0275fac}),c})(),Lf=(()=>{class c{constructor(a){this.stateDebouncer=a,this.preventEmit=!1,this.activated=!1,this._size=0,this._change=new Ke,this._sizeChange=new Ke,this._current=1}get size(){return this._size}set size(a){const h=this._size;a!==h&&(this.preventEmit||this.stateDebouncer.changeStart(),this._size=a,this._current=0===a?1:Math.floor(h/a*(this._current-1))+1,this.preventEmit||(this._change.next(this._current),this._sizeChange.next(this._size),this.stateDebouncer.changeDone())),this.preventEmit=!1}get totalItems(){return this._totalItems||0}set totalItems(a){this._totalItems=a,this.current>this.last&&(this.current=this.last)}get last(){return this._last?this._last:this.size>0&&this.totalItems?Math.ceil(this.totalItems/this.size):1}set last(a){this._last=a}get change(){return this._change.asObservable()}get sizeChange(){return this._sizeChange.asObservable()}get current(){return this._current}set current(a){a!==this._current&&(this.stateDebouncer.changeStart(),this._current=a,this._change.next(a),this.stateDebouncer.changeDone())}previous(){this.current>1&&this.current--}next(){this.current<this.last&&this.current++}get firstItem(){return 0===this._totalItems?-1:0===this.size?0:(this.current-1)*this.size}get lastItem(){if(0===this._totalItems)return-1;if(0===this.size)return this.totalItems-1;let a=this.current*this.size-1;return this.totalItems&&(a=Math.min(a,this.totalItems-1)),a}resetPageSize(a=!1){this.preventEmit=a,this.size=0}}return c.\u0275fac=function(a){return new(a||c)(Ae(aT))},c.\u0275prov=Oe({token:c,factory:c.\u0275fac}),c})(),Hh=(()=>{class c{constructor(a,h){this._page=a,this.stateDebouncer=h,this._change=new Ke,this._all=[]}get change(){return this._change.asObservable()}hasActiveFilters(){for(const{filter:a}of this._all)if(a&&a.isActive())return!0;return!1}getActiveFilters(){const a=[];for(const{filter:h}of this._all)h&&h.isActive()&&a.push(h);return a}add(a){const h=a.changes.subscribe(()=>this.resetPageAndEmitFilterChange([a]));let d=!1;const f=new gM(a,()=>{if(d)return;h.unsubscribe();const m=this._all.findIndex(g=>g.filter===a);m>=0&&this._all.splice(m,1),a.isActive()&&this.resetPageAndEmitFilterChange([]),d=!0});return this._all.push(f),a.isActive()&&this.resetPageAndEmitFilterChange([a]),f}accepts(a){for(const{filter:h}of this._all)if(h&&h.isActive()&&!h.accepts(a))return!1;return!0}resetPageAndEmitFilterChange(a){this.stateDebouncer.changeStart(),this._page.current=1,this._change.next(a),this.stateDebouncer.changeDone()}}return c.\u0275fac=function(a){return new(a||c)(Ae(Lf),Ae(aT))},c.\u0275prov=Oe({token:c,factory:c.\u0275fac}),c})();class gM{constructor(l,a){this.filter=l,this.unregister=a}}let yM=(()=>{class c{constructor(a){this.filters=a}get filter(){return this.registered&&this.registered.filter}setFilter(a){this.deleteFilter(),a instanceof gM?this.registered=a:a&&(this.registered=this.filters.add(a))}deleteFilter(){this.registered&&(this.registered.unregister(),delete this.registered)}ngOnDestroy(){this.deleteFilter()}}return c.\u0275fac=function(a){return new(a||c)(N(Hh))},c.\u0275dir=We({type:c}),c})(),lT=(()=>{class c extends yM{constructor(a,h,d,f,m){super(a),this.commonStrings=h,this.smartToggleService=d,this.platformId=f,this.popoverId=m,this.subs=[],this.ariaExpanded=!1,this.smartPosition={axis:to.VERTICAL,side:La.AFTER,anchor:Tr.END,content:Tr.END},this._open=!1,this.openChange=new rt(!1),this.subs.push(d.openChange.subscribe(g=>{this.open=g,this.ariaExpanded=g}))}get open(){return this._open}set open(a){this.open!==(a=!!a)&&(this.smartToggleService.open=a,this.openChange.emit(a),!a&&Dr(this.platformId)&&this.anchor.nativeElement.focus(),this._open=a)}set customFilter(a){this.setFilter(a)}get active(){return!!this.filter&&this.filter.isActive()}ngOnDestroy(){super.ngOnDestroy(),this.subs.forEach(a=>a.unsubscribe())}}return c.\u0275fac=function(a){return new(a||c)(N(Hh),N(br),N(Hr),N(wi),N(cs))},c.\u0275cmp=Be({type:c,selectors:[["clr-dg-filter"]],viewQuery:function(a,h){if(1&a&&hr(r3e,5,zt),2&a){let d;mt(d=gt())&&(h.anchor=d.first)}},inputs:{open:["clrDgFilterOpen","open"],customFilter:["clrDgFilter","customFilter"]},outputs:{openChange:"clrDgFilterOpenChange"},features:[Mt([{provide:mM,useExisting:c},mo]),Qt],ngContentSelectors:hn,decls:4,vars:13,consts:[["type","button","clrPopoverAnchor","","clrPopoverOpenCloseButton","",1,"datagrid-filter-toggle"],["anchor",""],["solid",""],["class","datagrid-filter","clrFocusTrap","","role","dialog",3,"id",4,"clrPopoverContent","clrPopoverContentAt","clrPopoverContentOutsideClickToClose","clrPopoverContentScrollToClose"],["clrFocusTrap","","role","dialog",1,"datagrid-filter",3,"id"],[1,"datagrid-filter-close-wrapper"],["type","button","clrPopoverCloseButton","",1,"close"],["shape","window-close"]],template:function(a,h){1&a&&(Et(),U(0,"button",0,1),xe(2,"cds-icon",2),H(),le(3,i3e,5,3,"div",3)),2&a&&(st("datagrid-filter-open",h.open)("datagrid-filtered",h.active),Ne("aria-label",h.commonStrings.keys.datagridFilterAriaLabel)("aria-expanded",h.ariaExpanded)("aria-controls",h.popoverId),B(2),Ne("status",h.active?"info":null)("shape",h.active?"filter-grid-circle":"filter-grid"),B(1),G("clrPopoverContent",h.open)("clrPopoverContentAt",h.smartPosition)("clrPopoverContentOutsideClickToClose",!0)("clrPopoverContentScrollToClose",!0))},dependencies:[$b,Zb,Gr,Yb,Pf,tZ],encapsulation:2}),c})();class GF{constructor(l){this.prop=l,l.indexOf(".")>=0&&(this.splitProp=l.split("."))}getPropValue(l){if(this.splitProp){let a=l;for(const h of this.splitProp){if(null===a||typeof a>"u"||typeof a[h]>"u")return;a=a[h]}return a}return l[this.prop]}}class vM{constructor(l,a=!1){this.prop=l,this.exact=a,this.nestedProp=new GF(l)}accepts(l,a,h){const d=this.nestedProp.getPropValue(l);return!(null!==a&&d<a||null!==h&&d>h)}}class Em{constructor(l){this.filterFn=l,this._changes=new Ke,this._low=null,this._high=null}get changes(){return this._changes.asObservable()}get value(){return[this._low,this._high]}set value(l){const a=l[0],h=l[1];(a!==this._low||h!==this._high)&&(this._low=a,this._high=h,this._changes.next([this._low,this._high]))}get low(){return this._low}set low(l){l!==this._low&&(this._low=l,this._changes.next([this._low,this._high]))}get high(){return this._high}set high(l){l!==this._high&&(this._high=l,this._changes.next([this._low,this._high]))}isActive(){return null!==this._low||null!==this.high}accepts(l){return this.filterFn.accepts(l,this._low,this._high)}get state(){return this.filterFn instanceof vM?{property:this.filterFn.prop,low:this._low,high:this._high}:this}equals(l){return l instanceof Em&&(l.filterFn instanceof vM?this.filterFn instanceof vM&&l.filterFn.prop===this.filterFn.prop&&l.low===this._low&&l.high===this._high:l===this)}}let RZ=(()=>{class c extends yM{constructor(a,h,d,f,m){super(a),this.domAdapter=h,this.commonStrings=d,this.popoverToggleService=f,this.ngZone=m,this.subscriptions=[],this.open=!1,this.filterValueChange=new rt}ngOnDestroy(){super.ngOnDestroy(),this.subscriptions.forEach(a=>{a.unsubscribe()})}get maxPlaceholderValue(){return this.maxPlaceholder||this.commonStrings.keys.maxValue}get minPlaceholderValue(){return this.minPlaceholder||this.commonStrings.keys.minValue}set customNumericFilter(a){this.setFilter(a instanceof gM?a:new Em(a)),this.initFilterValues&&(this.value=this.initFilterValues,delete this.initFilterValues)}ngAfterViewInit(){this.subscriptions.push(this.popoverToggleService.openChange.subscribe(a=>{this.open=a,this.ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this.domAdapter.focus(this.input.nativeElement)})})}))}get value(){return[this.filter.low,this.filter.high]}set value(a){this.filter&&Array.isArray(a)?a&&(a[0]!==this.filter.low||a[1]!==this.filter.high)&&(this.filter.low="number"==typeof a[0]?a[0]:null,this.filter.high="number"==typeof a[1]?a[1]:null,this.filterValueChange.emit(a)):this.initFilterValues=a}get low(){return"number"==typeof this.filter.low&&isFinite(this.filter.low)?this.filter.low:null}set low(a){"number"==typeof a&&a!==this.filter.low?(this.filter.low=a,this.filterValueChange.emit([this.filter.low,this.filter.high])):"number"!=typeof a&&(this.filter.low=null,this.filterValueChange.emit([this.filter.low,this.filter.high]))}get high(){return"number"==typeof this.filter.high&&isFinite(this.filter.high)?this.filter.high:null}set high(a){"number"==typeof a&&a!==this.filter.high?(this.filter.high=a,this.filterValueChange.emit([this.filter.low,this.filter.high])):"number"!=typeof a&&(this.filter.high=null,this.filterValueChange.emit([this.filter.low,this.filter.high]))}}return c.\u0275fac=function(a){return new(a||c)(N(Hh),N(ul),N(br),N(Hr),N(kn))},c.\u0275cmp=Be({type:c,selectors:[["clr-dg-numeric-filter"]],viewQuery:function(a,h){if(1&a&&(hr(s3e,5),hr(lT,5)),2&a){let d;mt(d=gt())&&(h.input=d.first),mt(d=gt())&&(h.filterContainer=d.first)}},inputs:{maxPlaceholder:["clrFilterMaxPlaceholder","maxPlaceholder"],minPlaceholder:["clrFilterMinPlaceholder","minPlaceholder"],customNumericFilter:["clrDgNumericFilter","customNumericFilter"],value:["clrFilterValue","value"]},outputs:{filterValueChange:"clrFilterValueChange"},features:[Mt([{provide:mM,useExisting:c}]),Qt],decls:6,vars:8,consts:[[3,"clrDgFilter","clrDgFilterOpen","clrDgFilterOpenChange"],["type","number","name","low",1,"datagrid-numeric-filter-input",3,"ngModel","placeholder","ngModelChange"],["input_low",""],[1,"datagrid-filter-input-spacer"],["type","number","name","high",1,"datagrid-numeric-filter-input",3,"ngModel","placeholder","ngModelChange"],["input_high",""]],template:function(a,h){1&a&&(U(0,"clr-dg-filter",0),Me("clrDgFilterOpenChange",function(f){return h.open=f}),U(1,"input",1,2),Me("ngModelChange",function(f){return h.low=f}),H(),xe(3,"span",3),U(4,"input",4,5),Me("ngModelChange",function(f){return h.high=f}),H()()),2&a&&(G("clrDgFilter",h.registered)("clrDgFilterOpen",h.open),B(1),G("ngModel",h.low)("placeholder",h.minPlaceholderValue),Ne("aria-label",h.minPlaceholderValue),B(3),G("ngModel",h.high)("placeholder",h.maxPlaceholderValue),Ne("aria-label",h.maxPlaceholderValue))},dependencies:[lT,Ob,Gl,Pa,sl],encapsulation:2}),c})();class _M{constructor(l,a=!1){this.prop=l,this.exact=a,this.nestedProp=new GF(l)}accepts(l,a){const h=this.nestedProp.getPropValue(l);return!(typeof h>"u")&&(this.exact?(""+h).toLowerCase()===a:(""+h).toLowerCase().indexOf(a)>=0)}}class Mm{constructor(l){this.filterFn=l,this._changes=new Ke,this._lowerCaseValue="",this._rawValue=""}get changes(){return this._changes.asObservable()}get lowerCaseValue(){return this._lowerCaseValue}get value(){return this._rawValue}set value(l){l||(l=""),l!==this._rawValue&&(this._rawValue=l,this._lowerCaseValue=l.toLowerCase().trim(),this._changes.next(l))}isActive(){return!!this.value}accepts(l){return this.filterFn.accepts(l,this.lowerCaseValue)}get state(){return this.filterFn instanceof _M?{property:this.filterFn.prop,value:this.value}:this}equals(l){return l instanceof Mm&&(l.filterFn instanceof _M?this.filterFn instanceof _M&&l.filterFn.prop===this.filterFn.prop&&l.value===this.value:l===this)}}let PZ=(()=>{class c extends yM{constructor(a,h,d,f,m){super(a),this.domAdapter=h,this.commonStrings=d,this.smartToggleService=f,this.ngZone=m,this.subs=[],this.open=!1,this.filterValueChange=new rt}get placeholderValue(){return this.placeholder||this.commonStrings.keys.filterItems}set customStringFilter(a){this.setFilter(a instanceof gM?a:new Mm(a)),this.initFilterValue&&(this.value=this.initFilterValue,delete this.initFilterValue)}ngAfterViewInit(){this.subs.push(this.smartToggleService.openChange.subscribe(a=>{this.open=a,this.ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this.domAdapter.focus(this.input.nativeElement)})})}))}ngOnDestroy(){super.ngOnDestroy(),this.subs.forEach(a=>a.unsubscribe())}get value(){return this.filter.value}set value(a){this.filter&&"string"==typeof a?(a||(a=""),a!==this.filter.value&&(this.filter.value=a,this.filterValueChange.emit(a))):this.initFilterValue=a}}return c.\u0275fac=function(a){return new(a||c)(N(Hh),N(ul),N(br),N(Hr),N(kn))},c.\u0275cmp=Be({type:c,selectors:[["clr-dg-string-filter"]],viewQuery:function(a,h){if(1&a&&(hr(o3e,5),hr(lT,5)),2&a){let d;mt(d=gt())&&(h.input=d.first),mt(d=gt())&&(h.filterContainer=d.first)}},inputs:{placeholder:["clrFilterPlaceholder","placeholder"],customStringFilter:["clrDgStringFilter","customStringFilter"],value:["clrFilterValue","value"]},outputs:{filterValueChange:"clrFilterValueChange"},features:[Mt([{provide:mM,useExisting:c}]),Qt],decls:3,vars:5,consts:[[3,"clrDgFilter","clrDgFilterOpen","clrDgFilterOpenChange"],["type","text","name","search",1,"clr-input",3,"ngModel","placeholder","ngModelChange"],["input",""]],template:function(a,h){1&a&&(U(0,"clr-dg-filter",0),Me("clrDgFilterOpenChange",function(f){return h.open=f}),U(1,"input",1,2),Me("ngModelChange",function(f){return h.value=f}),H()()),2&a&&(G("clrDgFilter",h.registered)("clrDgFilterOpen",h.open),B(1),G("ngModel",h.value)("placeholder",h.placeholderValue),Ne("aria-label",h.placeholderValue))},dependencies:[lT,Gl,Pa,sl],encapsulation:2}),c})(),cT=(()=>{class c extends Mv{}return c.\u0275fac=function(){let l;return function(h){return(l||(l=Ri(c)))(h||c)}}(),c.\u0275dir=We({type:c,selectors:[["clr-datagrid"]],features:[Qt]}),c})(),Uv=(()=>{class c{constructor(){this.actionableCount=0}register(){this.actionableCount++}unregister(){this.actionableCount--}get hasActionableRow(){return this.actionableCount>0}}return c.\u0275fac=function(a){return new(a||c)},c.\u0275prov=Oe({token:c,factory:c.\u0275fac}),c})(),zF=(()=>{class c extends Dv{constructor(a,h,d){if(!h)throw new Error("clr-dg-row should only be used inside of a clr-datagrid");super(a,h),this.rowActions=d}get flavor(){return this.rowActions.hasActionableRow}}return c.\u0275fac=function(a){return new(a||c)(N(Ss),N(cT,8),N(Uv))},c.\u0275dir=We({type:c,selectors:[["clr-datagrid"],["clr-dg-row"]],features:[Qt]}),c})(),Vc=(()=>{class c{constructor(){this.toggleState=!1,this._state=new Nr(this.toggleState),this._enabled=!1}get enabled(){return this._enabled}set enabled(a){this._enabled=a}get stateChange(){return this._state.asObservable()}close(){this.toggleState=!1,this._state.next(this.toggleState),this.button&&(this.button.focus(),this.button=null)}open(a,h){this.cache=a,this.button=h,this.toggleState=!0,this._state.next(this.toggleState)}toggle(a,h){this.isRowOpen(a)||!a?this.close():this.open(a,h)}get state(){return this.cache}isRowOpen(a){return!(!this.toggleState||this.cache!==a)}get isOpen(){return!0===this.toggleState}}return c.\u0275fac=function(a){return new(a||c)},c.\u0275prov=Oe({token:c,factory:c.\u0275fac}),c})(),Gv=(()=>{class c{constructor(a){this.detailService=a,this.expandableCount=0}register(){this.expandableCount++}unregister(){this.expandableCount--}get hasExpandableRow(){return!this.detailService.enabled&&this.expandableCount>0}}return c.\u0275fac=function(a){return new(a||c)(Ae(Vc))},c.\u0275prov=Oe({token:c,factory:c.\u0275fac}),c})(),HF=(()=>{class c extends Dv{constructor(a,h,d){if(!h)throw new Error("clr-dg-row should only be used inside of a clr-datagrid");super(a,h),this.expandableCount=d}get flavor(){return this.expandableCount.hasExpandableRow}}return c.\u0275fac=function(a){return new(a||c)(N(Ss),N(cT,8),N(Gv))},c.\u0275dir=We({type:c,selectors:[["clr-datagrid"],["clr-dg-row"]],features:[Qt]}),c})();class SM{constructor(l){this.prop=l,this.nestedProp=new GF(l)}compare(l,a){let h=this.nestedProp.getPropValue(l),d=this.nestedProp.getPropValue(a);return"string"==typeof h&&(h=h.toLowerCase()),"string"==typeof d&&(d=d.toLowerCase()),typeof h>"u"||null===h?typeof d>"u"||null===d?0:1:typeof d>"u"||null===d||h<d?-1:h>d?1:0}}var ko=(()=>(function(c){c[c.UNSORTED=0]="UNSORTED",c[c.ASC=1]="ASC",c[c.DESC=-1]="DESC"}(ko||(ko={})),ko))();let jF=(()=>{class c{constructor(){this._dynamic=!1}ngAfterViewInit(){this.columnView=this.templateRef.createEmbeddedView(null)}ngOnDestroy(){this.columnView.destroy()}}return c.\u0275fac=function(a){return new(a||c)},c.\u0275cmp=Be({type:c,selectors:[["dg-wrapped-column"]],viewQuery:function(a,h){if(1&a&&hr(a3e,5),2&a){let d;mt(d=gt())&&(h.templateRef=d.first)}},ngContentSelectors:hn,decls:2,vars:0,consts:[["columnPortal",""]],template:function(a,h){1&a&&(Et(),le(0,l3e,1,0,"ng-template",null,0,qs))},encapsulation:2}),c})(),bM=(()=>{class c{constructor(a){this.stateDebouncer=a,this._reverse=!1,this._change=new Ke}get comparator(){return this._comparator}set comparator(a){this.stateDebouncer.changeStart(),this._comparator=a,this.emitChange(),this.stateDebouncer.changeDone()}get reverse(){return this._reverse}set reverse(a){this.stateDebouncer.changeStart(),this._reverse=a,this.emitChange(),this.stateDebouncer.changeDone()}emitChange(){this._change.next(this)}get change(){return this._change.asObservable()}toggle(a,h){this.stateDebouncer.changeStart(),this.comparator===a?this._reverse=typeof h<"u"&&h||!this._reverse:(this._comparator=a,this._reverse=typeof h<"u"&&h),this.emitChange(),this.stateDebouncer.changeDone()}clear(){this.comparator=null}compare(a,h){return(this.reverse?-1:1)*this.comparator.compare(a,h)}}return c.\u0275fac=function(a){return new(a||c)(Ae(aT))},c.\u0275prov=Oe({token:c,factory:c.\u0275fac}),c})();var hl=(()=>(function(c){c[c.ALIGN_COLUMNS=0]="ALIGN_COLUMNS",c[c.CALCULATE_MODE_ON=1]="CALCULATE_MODE_ON",c[c.CALCULATE_MODE_OFF=2]="CALCULATE_MODE_OFF",c[c.CLEAR_WIDTHS=3]="CLEAR_WIDTHS",c[c.COMPUTE_COLUMN_WIDTHS=4]="COMPUTE_COLUMN_WIDTHS"}(hl||(hl={})),hl))();let Dm=(()=>{class c{constructor(){this._renderStep=new Ke,this.alreadySized=!1}get renderStep(){return this._renderStep.asObservable()}filterRenderSteps(a){return this.renderStep.pipe(qr(h=>a===h))}resize(){this._renderStep.next(hl.CALCULATE_MODE_ON),this.alreadySized&&this._renderStep.next(hl.CLEAR_WIDTHS),this._renderStep.next(hl.COMPUTE_COLUMN_WIDTHS),this._renderStep.next(hl.ALIGN_COLUMNS),this.alreadySized=!0,this._renderStep.next(hl.CALCULATE_MODE_OFF)}}return c.\u0275fac=function(a){return new(a||c)},c.\u0275prov=Oe({token:c,factory:c.\u0275fac}),c})(),WF=(()=>{class c{constructor(a,h,d){this.el=a,this.domAdapter=h,this.organizer=d,this._resizedBy=0}get resizedBy(){return this._resizedBy}get minColumnWidth(){return this.domAdapter.minWidth(this.el.nativeElement)||96}get maxResizeRange(){return this.widthBeforeResize-this.minColumnWidth}startResize(){this._resizedBy=0,this.isWithinMaxResizeRange=!0,this.widthBeforeResize=this.domAdapter.clientRect(this.el.nativeElement).width}endResize(){this.organizer.resize()}get widthAfterResize(){return this.widthBeforeResize+this._resizedBy}calculateResize(a){a<-this.maxResizeRange?(this._resizedBy=-this.maxResizeRange,this.isWithinMaxResizeRange=!1):(this._resizedBy=a,this.isWithinMaxResizeRange=!0)}}return c.\u0275fac=function(a){return new(a||c)(Ae(zt),Ae(ul),Ae(Dm))},c.\u0275prov=Oe({token:c,factory:c.\u0275fac}),c})(),XF=(()=>{class c{constructor(a){this.platformId=a}get tableRef(){return this._tableRef}set tableRef(a){this._tableRef=a}set table(a){Dr(this.platformId)&&a.nativeElement&&(this.tableRef=a.nativeElement.querySelector(".datagrid-table"))}getColumnDragHeight(){return this.tableRef?`${this.tableRef.clientHeight}px`:null}}return c.\u0275fac=function(a){return new(a||c)(Ae(wi))},c.\u0275prov=Oe({token:c,factory:c.\u0275fac}),c})(),OZ=(()=>{class c{constructor(a,h,d,f,m,g,y){this.columnResizerService=a,this.renderer=h,this.ngZone=d,this.tableSizeService=f,this.commonString=m,this.document=g,this.columnSeparatorId=y,this.resizeStartedOnKeyDown=!1,this.unlisteners=[]}get resizeTrackerEl(){return this.resizeTrackerRef.nativeElement}get columnHandleEl(){return this.columnHandleRef.nativeElement}ngAfterViewInit(){this.ngZone.runOutsideAngular(()=>{this.unlisteners.push(this.renderer.listen(this.columnHandleEl,"keydown",a=>{this.showTrackerOnFirstKeyDown(a),this.moveTrackerOnKeyDown(a)})),this.unlisteners.push(this.renderer.listen(this.columnHandleEl,"keyup",a=>{this.hideTrackerOnKeyUp(a)}))})}get descriptionId(){return`${this.columnSeparatorId}-aria-describedby`}showTracker(){this.columnResizerService.startResize();const a=this.tableSizeService.getColumnDragHeight();this.renderer.setStyle(this.resizeTrackerEl,"height",a),this.renderer.setStyle(this.resizeTrackerEl,"display","block")}moveTracker(a){this.columnResizerService.calculateResize(a),this.renderer.setStyle(this.resizeTrackerEl,"transform",`translateX(${this.columnResizerService.resizedBy}px)`),this.renderer.setStyle(this.document.body,"cursor","col-resize"),this.redFlagTracker()}hideTracker(){this.columnResizerService.endResize(),this.renderer.setStyle(this.resizeTrackerEl,"display","none"),this.renderer.setStyle(this.resizeTrackerEl,"transform","translateX(0px)"),this.renderer.setStyle(this.document.body,"cursor","auto")}showTrackerOnFirstKeyDown(a){!this.resizeStartedOnKeyDown&&(this.isArrowLeftKeyEvent(a)||this.isArrowRightKeyEvent(a))&&(this.resizeStartedOnKeyDown=!0,this.renderer.addClass(this.resizeTrackerEl,"on-arrow-key-resize"),this.showTracker())}moveTrackerOnKeyDown(a){this.isArrowLeftKeyEvent(a)?this.moveTracker(this.columnResizerService.resizedBy-12):this.isArrowRightKeyEvent(a)&&this.moveTracker(this.columnResizerService.resizedBy+12)}hideTrackerOnKeyUp(a){this.resizeStartedOnKeyDown&&(this.isArrowLeftKeyEvent(a)||this.isArrowRightKeyEvent(a))&&(this.resizeStartedOnKeyDown=!1,this.renderer.removeClass(this.resizeTrackerEl,"on-arrow-key-resize"),this.hideTracker(),this.columnHandleEl.focus())}redFlagTracker(){this.isWithinMaxResizeRange!==this.columnResizerService.isWithinMaxResizeRange&&(this.isWithinMaxResizeRange=this.columnResizerService.isWithinMaxResizeRange,this.isWithinMaxResizeRange?this.renderer.removeClass(this.resizeTrackerEl,"exceeded-max"):this.renderer.addClass(this.resizeTrackerEl,"exceeded-max"))}isArrowLeftKeyEvent(a){return a.key===Ln.ArrowLeft||a.key===Oc.ArrowLeft}isArrowRightKeyEvent(a){return a.key===Ln.ArrowRight||a.key===Oc.ArrowRight}ngOnDestroy(){this.unlisteners.forEach(a=>a())}}return c.\u0275fac=function(a){return new(a||c)(N(WF),N(Fn),N(kn),N(XF),N(br),N(Er),N(cs))},c.\u0275cmp=Be({type:c,selectors:[["clr-dg-column-separator"]],viewQuery:function(a,h){if(1&a&&(hr(c3e,5),hr(u3e,5)),2&a){let d;mt(d=gt())&&(h.resizeTrackerRef=d.first),mt(d=gt())&&(h.columnHandleRef=d.first)}},hostVars:2,hostBindings:function(a,h){2&a&&st("datagrid-column-separator",!0)},features:[Mt([mo])],decls:6,vars:5,consts:[["type","button","clrDraggable","",1,"datagrid-column-handle",3,"clrGroup","clrDragStart","clrDragMove","clrDragEnd"],["columnHandle",""],[1,"clr-sr-only"],[1,"datagrid-column-resize-tracker"],["resizeTracker",""]],template:function(a,h){1&a&&(U(0,"button",0,1),Me("clrDragStart",function(){return h.showTracker()})("clrDragMove",function(f){return h.moveTracker(f.dragPosition.moveX)})("clrDragEnd",function(){return h.hideTracker()}),H(),U(2,"span",2),ye(3),H(),xe(4,"div",3,4)),2&a&&(G("clrGroup",h.columnSeparatorId),Ne("aria-label",h.commonString.keys.columnSeparatorAriaLabel)("aria-describedby",h.descriptionId),B(2),Ne("id",h.descriptionId),B(1),mi(" ",h.commonString.keys.columnSeparatorDescription," "))},dependencies:[DZ],encapsulation:2}),c})(),TM=(()=>{class c extends yM{constructor(a,h,d,f,m,g){super(h),this._sort=a,this.vcr=d,this.detailService=f,this.changeDetectorRef=m,this.commonStrings=g,this.showSeparator=!0,this.subscriptions=[],this._colType="string",this._sorted=!1,this.sortedChange=new rt,this._sortOrder=ko.UNSORTED,this.sortOrderChange=new rt,this.customFilter=!1,this.filterValueChange=new rt,this.subscriptions.push(this.listenForSortingChanges()),this.subscriptions.push(this.listenForDetailPaneChanges())}ngOnDestroy(){super.ngOnDestroy(),this.subscriptions.forEach(a=>a.unsubscribe())}listenForDetailPaneChanges(){return this.detailService.stateChange.subscribe(a=>{this.showSeparator!==!a&&(this.showSeparator=!a,this.changeDetectorRef.markForCheck())})}listenForSortingChanges(){return this._sort.change.subscribe(a=>{this.changeDetectorRef.markForCheck(),this.sortOrder!==ko.UNSORTED&&a.comparator!==this._sortBy&&(this._sortOrder=ko.UNSORTED,this.sortOrderChange.emit(this._sortOrder),this.sortIcon=null,this._sortDirection=null),this.sorted&&a.comparator!==this._sortBy&&(this._sorted=!1,this.sortedChange.emit(!1))})}get colType(){return this._colType}set colType(a){this._colType=a}get field(){return this._field}set field(a){"string"==typeof a&&(this._field=a,this._sortBy||(this._sortBy=new SM(a)))}setupDefaultFilter(a,h){"number"===h?this.setFilter(new Em(new vM(a))):"string"===h&&this.setFilter(new Mm(new _M(a))),this.filter&&this.initFilterValue&&(this.updateFilterValue=this.initFilterValue,delete this.initFilterValue)}ngOnChanges(a){a.colType&&a.colType.currentValue&&a.colType.currentValue!==a.colType.previousValue&&!this.customFilter&&!this.filter&&this.colType&&this.field&&this.setupDefaultFilter(this.field,this.colType),a.field&&a.field.currentValue&&a.field.currentValue!==a.field.previousValue&&!this.customFilter&&this.colType&&this.setupDefaultFilter(this.field,this.colType)}get sortBy(){return this._sortBy}set sortBy(a){"string"==typeof a?this._sortBy=new SM(a):a?this._sortBy=a:this.field?this._sortBy=new SM(this.field):delete this._sortBy}get sortable(){return!!this._sortBy}get sorted(){return this._sorted}set sorted(a){!a&&this.sorted?(this._sorted=!1,this._sort.clear()):a&&!this.sorted&&this.sort()}get sortOrder(){return this._sortOrder}set sortOrder(a){if(!(typeof a>"u")&&this._sortOrder!==a)switch(a){default:case ko.UNSORTED:this._sort.clear();break;case ko.ASC:this.sort(!1);break;case ko.DESC:this.sort(!0)}}get ariaSort(){switch(this._sortOrder){default:case ko.UNSORTED:return"none";case ko.ASC:return"ascending";case ko.DESC:return"descending"}}get sortDirection(){return this._sortDirection}sort(a){!this.sortable||(this._sort.toggle(this._sortBy,a),this._sortOrder=this._sort.reverse?ko.DESC:ko.ASC,this._sortDirection=this._sortOrder===ko.DESC?"down":"up",this.sortIcon=this._sortOrder===ko.DESC?"arrow down":"arrow",this.sortOrderChange.emit(this._sortOrder),this._sorted=!0,this.sortedChange.emit(!0))}set projectedFilter(a){a&&(this.deleteFilter(),this.customFilter=!0)}get filterStringPlaceholderValue(){return this.filterStringPlaceholder||this.commonStrings.keys.filterItems}get filterNumberMaxPlaceholderValue(){return this.filterNumberMaxPlaceholder||this.commonStrings.keys.maxValue}get filterNumberMinPlaceholderValue(){return this.filterNumberMinPlaceholder||this.commonStrings.keys.minValue}set updateFilterValue(a){this.filter?this.filter instanceof Mm?((!a||"string"!=typeof a)&&(a=""),a!==this.filter.value&&(this.filter.value=a)):this.filter instanceof Em&&((!a||!(a instanceof Array))&&(a=[null,null]),2===a.length&&(a[0]!==this.filter.value[0]||a[1]!==this.filter.value[1])&&(this.filter.value=a)):this.initFilterValue=a}get filterValue(){return this.filter instanceof Mm||this.filter instanceof Em?this.filter.value:null}set filterValue(a){(this.filter instanceof Mm||this.filter instanceof Em)&&(this.updateFilterValue=a,this.filterValueChange.emit(this.filter.value))}ngOnInit(){this.wrappedInjector=new iM(jF,this.vcr)}get _view(){return this.wrappedInjector.get(jF,this.vcr).columnView}}return c.\u0275fac=function(a){return new(a||c)(N(bM),N(Hh),N(Zn),N(Vc),N(Ss),N(br))},c.\u0275cmp=Be({type:c,selectors:[["clr-dg-column"]],contentQueries:function(a,h,d){if(1&a&&yn(d,mM,5),2&a){let f;mt(f=gt())&&(h.projectedFilter=f.first)}},hostAttrs:["role","columnheader"],hostVars:3,hostBindings:function(a,h){2&a&&(Ne("aria-sort",h.ariaSort),st("datagrid-column",!0))},inputs:{colType:["clrDgColType","colType"],field:["clrDgField","field"],sortBy:["clrDgSortBy","sortBy"],sorted:["clrDgSorted","sorted"],sortOrder:["clrDgSortOrder","sortOrder"],filterStringPlaceholder:["clrFilterStringPlaceholder","filterStringPlaceholder"],filterNumberMaxPlaceholder:["clrFilterNumberMaxPlaceholder","filterNumberMaxPlaceholder"],filterNumberMinPlaceholder:["clrFilterNumberMinPlaceholder","filterNumberMinPlaceholder"],updateFilterValue:["clrFilterValue","updateFilterValue"]},outputs:{sortedChange:"clrDgSortedChange",sortOrderChange:"clrDgSortOrderChange",filterValueChange:"clrFilterValueChange"},features:[Mt([Iv,Vh,Hr]),Qt,ys],ngContentSelectors:b3e,decls:9,vars:5,consts:[[1,"datagrid-column-flex"],["class","datagrid-column-title","type","button",3,"click",4,"ngIf"],[3,"clrFilterPlaceholder","clrDgStringFilter","clrFilterValue","clrFilterValueChange",4,"ngIf"],[3,"clrFilterMaxPlaceholder","clrFilterMinPlaceholder","clrDgNumericFilter","clrFilterValue","clrFilterValueChange",4,"ngIf"],["columnTitle",""],["class","datagrid-column-title",4,"ngIf"],[4,"ngIf"],["type","button",1,"datagrid-column-title",3,"click"],[4,"ngTemplateOutlet"],["shape","arrow","aria-hidden","true","class","sort-icon",4,"ngIf"],["shape","arrow","aria-hidden","true",1,"sort-icon"],[3,"clrFilterPlaceholder","clrDgStringFilter","clrFilterValue","clrFilterValueChange"],[3,"clrFilterMaxPlaceholder","clrFilterMinPlaceholder","clrDgNumericFilter","clrFilterValue","clrFilterValueChange"],[1,"datagrid-column-title"]],template:function(a,h){1&a&&(Et(S3e),U(0,"div",0),le(1,f3e,3,2,"button",1),ke(2),le(3,p3e,1,3,"clr-dg-string-filter",2),le(4,m3e,1,4,"clr-dg-numeric-filter",3),le(5,g3e,1,0,"ng-template",null,4,qs),le(7,v3e,2,1,"span",5),le(8,_3e,1,0,"clr-dg-column-separator",6),H()),2&a&&(B(1),G("ngIf",h.sortable),B(2),G("ngIf",h.field&&!h.customFilter&&"string"==h.colType),B(1),G("ngIf",h.field&&!h.customFilter&&"number"==h.colType),B(3),G("ngIf",!h.sortable),B(1),G("ngIf",h.showSeparator))},dependencies:[PZ,RZ,OZ,vn,hh,Gr],encapsulation:2,changeDetection:0}),c})(),Of=(()=>{class c{constructor(a,h,d){this._filters=a,this._sort=h,this._page=d,this.loading=!1,this.trackBy=(f,m)=>m,this._smart=!1,this._displayed=[],this._change=new Ke,this._allChanges=new Ke}destroy(){this._filtersSub&&this._filtersSub.unsubscribe(),this._sortSub&&this._sortSub.unsubscribe(),this._pageSub&&this._pageSub.unsubscribe()}get smart(){return this._smart}smartenUp(){this._smart=!0,this._filtersSub=this._filters.change.subscribe(()=>this._filterItems()),this._sortSub=this._sort.change.subscribe(()=>{this._sort.comparator?this._sortItems():this._filterItems()}),this._pageSub=this._page.change.subscribe(()=>this._changePage())}get all(){return this._all}set all(a){this._all=a,this.emitAllChanges(a),this.smart?this._filterItems():(this._displayed=a,this.emitChange())}refresh(){this.smart&&this._filterItems()}get displayed(){return this._displayed}emitChange(){this._change.next(this.displayed)}get change(){return this._change.asObservable()}emitAllChanges(a){this._allChanges.next(a)}get allChanges(){return this._allChanges.asObservable()}get uninitialized(){return!this._all}_filterItems(){this.uninitialized||(this._filtered=this._filters.hasActiveFilters()?this._all.filter(a=>this._filters.accepts(a)):this._all.slice(),this._page.totalItems=this._filtered.length,this._sortItems())}_sortItems(){this.uninitialized||(this._sort.comparator&&this._filtered.sort((a,h)=>this._sort.compare(a,h)),this._changePage())}_changePage(){this.uninitialized||this._page.activated&&0===this._page.size||(this._displayed=this._page.size>0?this._filtered.slice(this._page.firstItem,this._page.lastItem+1):this._filtered,this.emitChange())}}return c.\u0275fac=function(a){return new(a||c)(Ae(Hh),Ae(bM),Ae(Lf))},c.\u0275prov=Oe({token:c,factory:c.\u0275fac}),c})(),NZ=(()=>{class c{constructor(a,h,d,f){this.template=a,this.differs=h,this.items=d,this.vcr=f,this.differ=null,this.subscriptions=[],d.smartenUp(),this.iterableProxy=new vi(this.vcr,this.template,this.differs),this.subscriptions.push(d.change.subscribe(m=>{this.iterableProxy.ngForOf=m,this.iterableProxy.ngDoCheck()}))}set rawItems(a){this._rawItems=a||[]}set trackBy(a){this.items.trackBy=a,this.iterableProxy.ngForTrackBy=a}ngDoCheck(){this.differ||(this.differ=this.differs.find(this._rawItems).create(this.iterableProxy.ngForTrackBy)),this.differ&&this.differ.diff(this._rawItems)&&(this.items.all=this._rawItems)}ngOnDestroy(){this.subscriptions.forEach(a=>a.unsubscribe())}}return c.\u0275fac=function(a){return new(a||c)(N(Vi),N(oy),N(Of),N(Zn))},c.\u0275dir=We({type:c,selectors:[["","clrDgItems","","clrDgItemsOf",""]],inputs:{rawItems:["clrDgItemsOf","rawItems"],trackBy:["clrDgItemsTrackBy","trackBy"]}}),c})(),qF=(()=>{class c{constructor(a){this.items=a}get emptyDatagrid(){return!(this.items.loading||this.items.displayed&&0!==this.items.displayed.length)}}return c.\u0275fac=function(a){return new(a||c)(N(Of))},c.\u0275cmp=Be({type:c,selectors:[["clr-dg-placeholder"]],hostVars:2,hostBindings:function(a,h){2&a&&st("datagrid-placeholder-container",!0)},ngContentSelectors:hn,decls:4,vars:4,consts:[["role","row",1,"datagrid-placeholder"],["class","datagrid-placeholder-image",4,"ngIf"],["role","gridcell",1,"datagrid-placeholder-content"],[4,"ngIf"],[1,"datagrid-placeholder-image"]],template:function(a,h){1&a&&(Et(),U(0,"div",0),le(1,T3e,1,0,"div",1),U(2,"span",2),le(3,w3e,1,0,"ng-content",3),H()()),2&a&&(st("datagrid-empty",h.emptyDatagrid),B(1),G("ngIf",h.emptyDatagrid),B(2),G("ngIf",h.emptyDatagrid))},dependencies:[vn],encapsulation:2}),c})(),$F=(()=>{class c{set triggerEl(a){this._triggerEl=a}focusTrigger(){this._triggerEl&&this._triggerEl.focus()}}return c.\u0275fac=function(a){return new(a||c)},c.\u0275prov=Oe({token:c,factory:c.\u0275fac}),c})(),YF=(()=>{class c{constructor(){this._id=new Ke}setId(a){this._id.next(a)}get id(){return this._id.asObservable()}}return c.\u0275fac=function(a){return new(a||c)},c.\u0275prov=Oe({token:c,factory:c.\u0275fac}),c})(),ZF=(()=>{class c{constructor(a,h,d,f,m,g,y){this.toggleService=a,this.el=h,this.commonStrings=d,this.signpostIdService=f,this.signpostFocusManager=m,this.platformId=y,this.subscriptions=[],this.document=g}ngOnInit(){this.signpostFocusManager.triggerEl=this.el.nativeElement,this.subscriptions.push(this.toggleService.openChange.subscribe(a=>{this.ariaExpanded=a;const h=this.isOpen;this.isOpen=a,!this.isOpen&&h&&this.focusOnClose()}),this.signpostIdService.id.subscribe(a=>this.ariaControl=a)),this.addDefaultAriaLabel(this.el.nativeElement)}addDefaultAriaLabel(a){a.hasAttribute("aria-label")||a.setAttribute("aria-label",this.commonStrings.keys.signpostToggle)}focusOnClose(){!Dr(this.platformId)||!this.isOpen&&this.document.activeElement===this.document.body&&this.signpostFocusManager.focusTrigger()}ngOnDestroy(){this.subscriptions.forEach(a=>a.unsubscribe())}onSignpostTriggerClick(a){this.toggleService.toggleWithEvent(a)}}return c.\u0275fac=function(a){return new(a||c)(N(Hr),N(zt),N(br),N(YF),N($F),N(Er),N(wi))},c.\u0275dir=We({type:c,selectors:[["","clrSignpostTrigger",""]],hostAttrs:[1,"signpost-trigger"],hostVars:4,hostBindings:function(a,h){1&a&&Me("click",function(f){return h.onSignpostTriggerClick(f)}),2&a&&(Ne("aria-expanded",h.ariaExpanded)("aria-controls",h.ariaControl),st("active",h.isOpen))}}),c})(),uT=(()=>{class c{constructor(a){this.commonStrings=a,this.useCustomTrigger=!1}set customTrigger(a){this.useCustomTrigger=!!a}}return c.\u0275fac=function(a){return new(a||c)(N(br))},c.\u0275cmp=Be({type:c,selectors:[["clr-signpost"]],contentQueries:function(a,h,d){if(1&a&&yn(d,ZF,5),2&a){let f;mt(f=gt())&&(h.customTrigger=f.first)}},hostVars:2,hostBindings:function(a,h){2&a&&st("signpost",!0)},features:[Mt([Hr,$F,{provide:Fv,useExisting:zt},YF])],ngContentSelectors:hn,decls:2,vars:1,consts:[[4,"ngIf"],["type","button","clrSignpostTrigger","",1,"signpost-action","btn","btn-small","btn-link"],["shape","info-circle"]],template:function(a,h){1&a&&(Et(),le(0,C3e,3,1,"ng-container",0),ke(1)),2&a&&G("ngIf",!h.useCustomTrigger)},dependencies:[vn,ZF,Gr],encapsulation:2}),c})(),KF=(()=>{class c{constructor(){this._dynamic=!1}ngAfterViewInit(){this.cellView=this.templateRef.createEmbeddedView(null)}ngOnDestroy(){this.cellView.destroy()}}return c.\u0275fac=function(a){return new(a||c)},c.\u0275cmp=Be({type:c,selectors:[["dg-wrapped-cell"]],viewQuery:function(a,h){if(1&a&&hr(x3e,5),2&a){let d;mt(d=gt())&&(h.templateRef=d.first)}},ngContentSelectors:hn,decls:2,vars:0,consts:[["cellPortal",""]],template:function(a,h){1&a&&(Et(),le(0,E3e,1,0,"ng-template",null,0,qs))},encapsulation:2}),c})(),hT=(()=>{class c{constructor(a){this.vcr=a}ngOnInit(){this.wrappedInjector=new iM(KF,this.vcr)}get _view(){return this.wrappedInjector.get(KF,this.vcr).cellView}}return c.\u0275fac=function(a){return new(a||c)(N(Zn))},c.\u0275cmp=Be({type:c,selectors:[["clr-dg-cell"]],contentQueries:function(a,h,d){if(1&a&&yn(d,uT,4),2&a){let f;mt(f=gt())&&(h.signpost=f)}},hostAttrs:["role","gridcell"],hostVars:4,hostBindings:function(a,h){2&a&&st("datagrid-cell",!0)("datagrid-signpost-trigger",h.signpost.length>0)},ngContentSelectors:hn,decls:1,vars:0,template:function(a,h){1&a&&(Et(),ke(0))},encapsulation:2}),c})(),FZ=0,dT=(()=>{class c extends pa{constructor(){super(),this.expandableId="",this._replace=new Nr(!1),this._animate=new Ke,FZ++,this.expandableId="clr-dg-expandable-row-"+FZ}get expanded(){return this._expanded}set expanded(a){(a=!!a)!==this._expanded&&(this._expanded=a,this._animate.next(),this._expandChange.next(a))}loadingStateChange(a){super.loadingStateChange(a),a!==po.LOADING&&this._animate.next()}get replace(){return this._replace.asObservable()}setReplace(a){this._replace.next(a)}get animate(){return this._animate.asObservable()}}return c.\u0275fac=function(a){return new(a||c)},c.\u0275prov=Oe({token:c,factory:c.\u0275fac}),c})();var Nf=(()=>(function(c){c[c.DISPLAY=0]="DISPLAY",c[c.CALCULATE=1]="CALCULATE"}(Nf||(Nf={})),Nf))(),Lr=(()=>(function(c){c[c.None=0]="None",c[c.Single=1]="Single",c[c.Multi=2]="Multi"}(Lr||(Lr={})),Lr))();let QF=(()=>{class c{constructor(){this._dynamic=!1}ngAfterViewInit(){this.rowView=this.templateRef.createEmbeddedView(null)}ngOnDestroy(){this.rowView.destroy()}}return c.\u0275fac=function(a){return new(a||c)},c.\u0275cmp=Be({type:c,selectors:[["dg-wrapped-row"]],viewQuery:function(a,h){if(1&a&&hr(M3e,5),2&a){let d;mt(d=gt())&&(h.templateRef=d.first)}},ngContentSelectors:hn,decls:2,vars:0,consts:[["rowPortal",""]],template:function(a,h){1&a&&(Et(),le(0,D3e,1,0,"ng-template",null,0,qs))},encapsulation:2}),c})(),V5e=0,fT=(()=>{class c{constructor(a,h,d){this._items=a,this._filters=h,this._zone=d,this.preserveSelection=!1,this.prevSelectionRefs=[],this.lockedRefs=[],this._selectionType=Lr.None,this.rowSelectionMode=!1,this.subscriptions=[],this.shiftPressed=!1,this.valueCollector=new Ke,this._change=new Ke,this.id="clr-dg-selection"+V5e++,this.subscriptions.push(this._filters.change.subscribe(()=>{!this._selectable||this.preserveSelection||this.clearSelection()})),this.subscriptions.push(this._items.allChanges.subscribe(f=>{const m=[];switch(this.selectionType){case Lr.None:break;case Lr.Single:{let g;const y=this._items.trackBy;let v=!1;if(this.currentSingle&&!this.prevSingleSelectionRef&&this._items.all&&this._items.trackBy){const _=this._items.all.findIndex(S=>S===this.currentSingle);this.prevSingleSelectionRef=this._items.trackBy(_,this.currentSingle)}f.forEach((_,S)=>{const b=y(S,_);this.prevSingleSelectionRef===b&&(g=_,v=!0),this.lockedRefs.indexOf(b)>-1&&m.push(b)}),this._items.smart&&!g&&(v=!0),setTimeout(()=>{v&&(this.currentSingle=g)},0);break}case Lr.Multi:{let g=this.current.slice();const y=this._items.trackBy;let v=!1;this.current.length>0&&this.prevSelectionRefs.length!==this.current.length&&this._items.all&&this._items.trackBy&&(this.prevSelectionRefs=[],this.current.forEach(_=>{const S=this._items.all.findIndex(b=>b===_);this.prevSelectionRefs.push(this._items.trackBy(S,_))})),f.forEach((_,S)=>{const b=y(S,_);this.lockedRefs.indexOf(b)>-1&&m.push(b)}),g.length>0&&(f.forEach((_,S)=>{const b=y(S,_),T=this.prevSelectionRefs.indexOf(b);T>-1&&(g[T]=_,v=!0)}),this._items.smart&&(g=g.filter(_=>f.indexOf(_)>-1),this.current.length!==g.length&&(v=!0)),setTimeout(()=>{v&&(this.current=g)},0));break}}this.lockedRefs=m})),this.subscriptions.push(this.valueCollector.pipe(mv(0)).subscribe(()=>this.emitChange()))}clearSelection(){this._current=[],this.prevSelectionRefs=[],this.prevSingleSelectionRef=null,this._currentSingle=null,this.emitChange()}get selectionType(){return this._selectionType}set selectionType(a){a!==this.selectionType&&(this._selectionType=a,a===Lr.None?delete this.current:this.updateCurrent([],!1))}get _selectable(){return this._selectionType===Lr.Multi||this._selectionType===Lr.Single}destroy(){this.subscriptions.forEach(a=>a.unsubscribe())}get currentSingle(){return this._currentSingle}set currentSingle(a){if(a!==this._currentSingle){if(this._currentSingle=a,this._items.all&&this._items.trackBy&&a){const h=this._items.all.findIndex(d=>d===a);this.prevSingleSelectionRef=this._items.trackBy(h,a)}this.emitChange()}}get current(){return this._current}set current(a){this.updateCurrent(a,!0)}updateCurrent(a,h){this._current=a,h&&this.valueCollector.next(a)}emitChange(){this._selectionType===Lr.Single?this._change.next(this.currentSingle):this._selectionType===Lr.Multi&&this._change.next(this.current)}get change(){return this._change.asObservable()}isSelected(a){return this._selectionType===Lr.Single?this.currentSingle===a:this._selectionType===Lr.Multi&&this.current.indexOf(a)>=0}selectItem(a){if(this.current=this.current.concat(a),this._items.trackBy&&this._items.all){const h=this._items.all.findIndex(d=>d===a);this.prevSelectionRefs.push(this._items.trackBy(h,a))}}deselectItem(a){if(this.current=this.current.slice(0,a).concat(this.current.slice(a+1)),this._items.trackBy&&a<this.prevSelectionRefs.length){const h=this.prevSelectionRefs.splice(a,1);this.lockedRefs=this.lockedRefs.filter(d=>d!==h[0])}}setSelected(a,h){const d=this.current?this.current.indexOf(a):-1;switch(this._selectionType){case Lr.None:case Lr.Single:break;case Lr.Multi:d>=0&&!h?this.deselectItem(d):d<0&&h&&this.selectItem(a)}}isAllSelected(){if(this._selectionType!==Lr.Multi||!this._items.displayed)return!1;const a=this._items.displayed.filter(f=>!1===this.isLocked(f));return!(a.length<1)&&a.filter(f=>this.current.indexOf(f)>-1).length===a.length}canItBeLocked(){return this._selectionType!==Lr.None&&Array.isArray(this._items.all)}lockItem(a,h){if(this.canItBeLocked()){const d=this._items.trackBy(this._items.all.findIndex(f=>f===a),a);!0===h?this.lockedRefs.push(d):this.lockedRefs=this.lockedRefs.filter(f=>d!==f)}}isLocked(a){if(this.canItBeLocked()){const h=this._items.trackBy(this._items.all.findIndex(d=>d===a),a);return this.lockedRefs.indexOf(h)>-1}return!1}toggleAll(){this._selectionType===Lr.None||this._selectionType===Lr.Single||(this.isAllSelected()?this._items.displayed.forEach(a=>{const h=this.current.indexOf(a);h>-1&&!1===this.isLocked(a)&&this.deselectItem(h)}):this._items.displayed.forEach(a=>{this.current.indexOf(a)<0&&!1===this.isLocked(a)&&this.selectItem(a)}))}}return c.\u0275fac=function(a){return new(a||c)(Ae(Of),Ae(Hh),Ae(kn))},c.\u0275prov=Oe({token:c,factory:c.\u0275fac}),c})(),JF=(()=>{class c{constructor(a){this.subscriptions=[],this._view=new Nr(Nf.DISPLAY),this.subscriptions.push(a.filterRenderSteps(hl.CALCULATE_MODE_ON).subscribe(()=>this._view.next(Nf.CALCULATE))),this.subscriptions.push(a.filterRenderSteps(hl.CALCULATE_MODE_OFF).subscribe(()=>this._view.next(Nf.DISPLAY)))}get view(){return this._view.asObservable()}ngOnDestroy(){this.subscriptions.forEach(a=>a.unsubscribe())}}return c.\u0275fac=function(a){return new(a||c)(Ae(Dm))},c.\u0275prov=Oe({token:c,factory:c.\u0275fac}),c})(),wM=0,CM=(()=>{class c{constructor(a,h,d,f,m,g,y,v,_,S,b,T){this.selection=a,this.rowActionService=h,this.globalExpandable=d,this.expand=f,this.detailService=m,this.displayMode=g,this.vcr=y,this.renderer=v,this.el=_,this.commonStrings=S,this.items=b,this.document=T,this.SELECTION_TYPE=Lr,this.expandAnimationTrigger=!1,this._selected=!1,this.selectedChanged=new rt(!1),this.expandedChange=new rt(!1),this._detailOpenLabel="",this._detailCloseLabel="",this._rowAriaLabel="",this.subscriptions=[],this.displayCells=!1,wM++,this.id="clr-dg-row"+wM,this.radioId="clr-dg-row-rd"+wM,this.checkboxId="clr-dg-row-cb"+wM,this.expandableId=f.expandableId,this.subscriptions.push(lC(this.expand.replace,this.expand.expandChange).subscribe(([x,E])=>{x&&E?(this.replaced=!0,this.renderer.addClass(this.el.nativeElement,"datagrid-row-replaced")):(this.replaced=!1,this.renderer.removeClass(this.el.nativeElement,"datagrid-row-replaced"))}))}clearRanges(a){a.shiftKey&&(this.document.getSelection().removeAllRanges(),-1!==window.navigator.userAgent.indexOf("Firefox")&&(a.preventDefault(),this.toggle(!0)))}get selected(){return this.selection.selectionType===Lr.None?this._selected:this.selection.isSelected(this.item)}set selected(a){this.selection.selectionType===Lr.None?this._selected=a:(a&&this.selection.selectionType===Lr.Multi?this.rangeSelect():this.selection.rangeStart=null,this.selection.setSelected(this.item,a))}set clrDgSelectable(a){this.selection.lockItem(this.item,!1===a)}get clrDgSelectable(){return!this.selection.isLocked(this.item)}toggle(a=!this.selected){a!==this.selected&&(this.selected=a,this.selectedChanged.emit(a))}get expanded(){return this.expand.expanded}set expanded(a){this.expand.expanded=a}toggleExpand(){this.expand.expandable&&(this.expandAnimation.updateStartHeight(),this.expanded=!this.expanded,this.expandedChange.emit(this.expanded))}set clrDgDetailOpenLabel(a){this._detailOpenLabel=a}get clrDgDetailOpenLabel(){return this._detailOpenLabel?this._detailOpenLabel:this.commonStrings.keys.open}set clrDgDetailCloseLabel(a){this._detailCloseLabel=a}get clrDgDetailCloseLabel(){return this._detailCloseLabel?this._detailCloseLabel:this.commonStrings.keys.close}set clrDgRowAriaLabel(a){this._rowAriaLabel=a}get clrDgRowAriaLabel(){return this._rowAriaLabel?this._rowAriaLabel:this.commonStrings.keys.select}ngAfterContentInit(){this.dgCells.changes.subscribe(()=>{this.dgCells.forEach(a=>{a._view.destroyed||this._scrollableCells.insert(a._view)})})}ngAfterViewInit(){this.subscriptions.push(this.displayMode.view.subscribe(a=>{for(let h=this._scrollableCells.length;h>0;h--)this._scrollableCells.detach();for(let h=this._calculatedCells.length;h>0;h--)this._calculatedCells.detach();a===Nf.CALCULATE?(this.displayCells=!1,this.dgCells.forEach(h=>{h._view.destroyed||this._calculatedCells.insert(h._view)})):(this.displayCells=!0,this.dgCells.forEach(h=>{h._view.destroyed||this._scrollableCells.insert(h._view)}))}),this.expand.animate.subscribe(()=>{this.expandAnimationTrigger=!this.expandAnimationTrigger}))}rangeSelect(){const a=this.items.displayed;if(!a)return;const h=a.indexOf(this.selection.rangeStart);if(this.selection.rangeStart&&this.selection.current.includes(this.selection.rangeStart)&&this.selection.shiftPressed&&-1!==h){const d=a.indexOf(this.item),f=new Set(this.selection.current.concat(a.slice(Math.min(h,d),Math.max(h,d)+1)));this.selection.clearSelection(),this.selection.current.push(...f)}else this.selection.rangeStart=this.item}ngOnDestroy(){this.subscriptions.forEach(a=>a.unsubscribe())}ngOnInit(){this.wrappedInjector=new iM(QF,this.vcr),this.selection.lockItem(this.item,!1===this.clrDgSelectable)}get _view(){return this.wrappedInjector.get(QF,this.vcr).rowView}}return c.\u0275fac=function(a){return new(a||c)(N(fT),N(Uv),N(Gv),N(dT),N(Vc),N(JF),N(Zn),N(Fn),N(zt),N(br),N(Of),N(Er))},c.\u0275cmp=Be({type:c,selectors:[["clr-dg-row"]],contentQueries:function(a,h,d){if(1&a&&yn(d,hT,4),2&a){let f;mt(f=gt())&&(h.dgCells=f)}},viewQuery:function(a,h){if(1&a&&(hr(pM,5),hr(A3e,5),hr(I3e,5,Zn),hr(R3e,5,Zn),hr(P3e,5,Zn)),2&a){let d;mt(d=gt())&&(h.expandAnimation=d.first),mt(d=gt())&&(h.detailButton=d.first),mt(d=gt())&&(h._stickyCells=d.first),mt(d=gt())&&(h._scrollableCells=d.first),mt(d=gt())&&(h._calculatedCells=d.first)}},hostAttrs:["role","rowgroup"],hostVars:5,hostBindings:function(a,h){2&a&&(Ne("aria-owns",h.id),st("datagrid-row",!0)("datagrid-selected",h.selected))},inputs:{item:["clrDgItem","item"],selected:["clrDgSelected","selected"],clrDgSelectable:"clrDgSelectable",expanded:["clrDgExpanded","expanded"],clrDgDetailOpenLabel:"clrDgDetailOpenLabel",clrDgDetailCloseLabel:"clrDgDetailCloseLabel",clrDgRowAriaLabel:"clrDgRowAriaLabel"},outputs:{selectedChanged:"clrDgSelectedChange",expandedChange:"clrDgExpandedChange"},features:[Mt([dT,{provide:pa,useExisting:dT},{provide:Hb,useExisting:dT}])],ngContentSelectors:iVe,decls:9,vars:3,consts:[["class","datagrid-row-clickable",3,"mousedown",4,"ngIf"],[3,"clrExpandTrigger",4,"ngIf"],[4,"ngIf"],["detail",""],["rowContent",""],["calculatedCells",""],[1,"datagrid-row-clickable",3,"mousedown"],[3,"clrExpandTrigger"],[3,"ngTemplateOutlet"],["role","row",1,"datagrid-row-master","datagrid-row-flex",3,"id"],[1,"datagrid-row-sticky"],["stickyCells",""],["class","datagrid-select datagrid-fixed-column datagrid-cell","role","gridcell",3,"ngClass",4,"ngIf"],["class","datagrid-row-actions datagrid-fixed-column datagrid-cell","role","gridcell",4,"ngIf"],["class","datagrid-expandable-caret datagrid-fixed-column datagrid-cell","role","gridcell",4,"ngIf"],["class","datagrid-detail-caret datagrid-fixed-column datagrid-cell",4,"ngIf"],[1,"datagrid-row-scrollable",3,"ngClass"],[1,"datagrid-scrolling-cells"],["scrollableCells",""],["role","gridcell",1,"datagrid-select","datagrid-fixed-column","datagrid-cell",3,"ngClass"],[1,"clr-checkbox-wrapper"],["type","checkbox",3,"ngModel","id","ngModelChange"],[1,"clr-control-label","clr-col-null",3,"for","click"],[1,"clr-sr-only"],["type","radio","clrRadio","",3,"id","name","value","ngModel","checked","ngModelChange"],["role","gridcell",1,"datagrid-row-actions","datagrid-fixed-column","datagrid-cell"],["role","gridcell",1,"datagrid-expandable-caret","datagrid-fixed-column","datagrid-cell"],["type","button","class","datagrid-expandable-caret-button",3,"click",4,"ngIf"],["clrSmall","",4,"ngIf"],["type","button",1,"datagrid-expandable-caret-button",3,"click"],["shape","angle",1,"datagrid-expandable-caret-icon"],["clrSmall",""],[1,"datagrid-detail-caret","datagrid-fixed-column","datagrid-cell"],["type","button","aria-haspopup","dialog",1,"datagrid-detail-caret-button",3,"click"],["detailButton",""],["shape","angle-double",1,"datagrid-detail-caret-icon"]],template:function(a,h){1&a&&(Et(rVe),le(0,k3e,3,2,"label",0),le(1,B3e,2,2,"clr-expandable-animation",1),le(2,G3e,1,1,null,2),le(3,z3e,1,0,"ng-template",null,3,qs),le(5,nVe,16,13,"ng-template",null,4,qs),ba(7,null,5)),2&a&&(G("ngIf",h.selection.rowSelectionMode),B(1),G("ngIf",!h.selection.rowSelectionMode&&h.expand.expandable),B(1),G("ngIf",!h.selection.rowSelectionMode&&!h.expand.expandable))},dependencies:[pM,Jb,vn,es,hh,$s,gv,Pa,sl,XN,Gl,D5e,Gr],encapsulation:2}),c})();var Vo=(()=>(function(c){c[c.WIDTH=0]="WIDTH",c[c.HIDDEN=1]="HIDDEN"}(Vo||(Vo={})),Vo))();const kZ=Object.keys(Vo).map(c=>Vo[c]).filter(c=>c===parseInt(c,10));let jh=(()=>{class c{constructor(){this.columns=[],this._cache=[]}cache(){this._cache=this.columns.map(a=>{const h={...a.value};return delete h.changes,h})}hasCache(){return!!this._cache.length}resetToLastCache(){this._cache.forEach((a,h)=>{this.columns[h].next({...a,changes:kZ})}),this._cache=[]}get columnStates(){return this.columns.map(a=>a.value)}get hasHideableColumns(){return this.columnStates.filter(a=>a.hideable).length>0}emitStateChangeAt(a,h){!this.columns[a]||this.emitStateChange(this.columns[a],h)}emitStateChange(a,h){a.next({...a.value,...h})}}return c.\u0275fac=function(a){return new(a||c)},c.\u0275prov=Oe({token:c,factory:c.\u0275fac}),c})(),VZ=(()=>{class c{constructor(a,h,d,f){this.filters=a,this.sort=h,this.page=d,this.debouncer=f,this.change=this.debouncer.change.pipe(ve(()=>this.state))}get state(){const a={};this.page.size>0&&(a.page={from:this.page.firstItem,to:this.page.lastItem,size:this.page.size,current:this.page.current}),this.sort.comparator&&(a.sort=this.sort.comparator instanceof SM?{by:this.sort.comparator.prop,reverse:this.sort.reverse}:{by:this.sort.comparator,reverse:this.sort.reverse});const h=this.filters.getActiveFilters();if(h.length>0){a.filters=[];for(const d of h)a.filters.push(d.state?d.state:d)}return a}}return c.\u0275fac=function(a){return new(a||c)(Ae(Hh),Ae(bM),Ae(Lf),Ae(aT))},c.\u0275prov=Oe({token:c,factory:c.\u0275fac}),c})(),BZ=(()=>{class c{constructor(a){this.zone=a,this.listenersAdded=!1,this.destroy$=new Ke,this.config={keyGridRows:"[role=row]:not(.datagrid-placeholder)",keyGridCells:"[role=gridcell]:not(.datagrid-hidden-column):not(.datagrid-placeholder-content), [role=columnheader]:not(.datagrid-hidden-column):not(.datagrid-placeholder-content), .datagrid-detail-caret",keyGrid:"[role=grid]"}}get grid(){return this.host?.querySelector(this.config.keyGrid)}get rows(){return this.host?.querySelectorAll(this.config.keyGridRows)}get cells(){return this.host?.querySelectorAll(this.config.keyGridCells)}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}addListeners(){this.listenersAdded||(this.zone.runOutsideAngular(()=>{Pu(this.grid,"mousedown").pipe(Nh(this.destroy$)).subscribe(a=>{if(1===a.buttons&&!a.ctrlKey){const h=this.cells?Array.from(this.cells).find(d=>d===a.target||d===a.target.closest(this.config.keyGridCells)):null;h&&this.setActiveCell(h)}}),Pu(this.grid,"keydown").pipe(Nh(this.destroy$)).subscribe(a=>{if((!a.target.classList.contains("drag-handle")||"ArrowLeft"!==a.code&&"ArrowRight"!==a.code)&&("ArrowUp"===a.code||"ArrowDown"===a.code||"ArrowLeft"===a.code||"ArrowRight"===a.code||"End"===a.code||"Home"===a.code||"PageUp"===a.code||"PageDown"===a.code)){const{x:h,y:d}=this.getNextItemCoordinate(a),f=this.rows?Array.from(this.rows[d].querySelectorAll(this.config.keyGridCells))[h]:null;f&&this.setActiveCell(f),a.preventDefault()}})}),this.listenersAdded=!0)}initializeKeyGrid(a){this.host=a,this.addListeners(),this.resetKeyGrid()}resetKeyGrid(){this.cells?.forEach(h=>h.setAttribute("tabindex","-1")),(this.cells?this.cells[0]:null)?.setAttribute("tabindex","0")}setActiveCell(a){const h=this.cells?Array.from(this.cells).find(m=>"0"===m.getAttribute("tabindex")):null;h&&h.setAttribute("tabindex","-1"),a.setAttribute("tabindex","0");const d=function B5e(c){const l=["a[href]","area[href]","input:not([disabled])","button:not([disabled])","select:not([disabled])","textarea:not([disabled])","iframe","object","embed","*[tabindex]","*[contenteditable=true]","[role=button]:not([disabled])"].join(",");return Array.from(c.querySelectorAll(l))}(a);("columnheader"!==a.getAttribute("role")&&d[0]?d[0]:a).focus()}getNextItemCoordinate(a){let h=this.cells?Array.from(this.cells).find(T=>"0"===T.getAttribute("tabindex")):null;"Tab"===a.code&&(h=document.activeElement);const d=this.rows&&h?Array.from(this.rows).find(T=>T.contains(h)):null,f=this.rows?this.rows.length-1:0,m=this.cells?this.cells.length/this.rows.length-1:0;let g=d&&h?Array.from(d.querySelectorAll(this.config.keyGridCells)).indexOf(h):0,y=d&&h&&this.rows?Array.from(this.rows).indexOf(d):0;const v=this.host.dir,_="rtl"===v?"ArrowRight":"ArrowLeft",S="rtl"===v?"ArrowLeft":"ArrowRight",b=Math.floor(this.host?.querySelector(".datagrid").clientHeight/this.rows[0].clientHeight)-1||0;return"ArrowUp"===a.code&&0!==y?y-=1:"ArrowDown"===a.code&&y<f?y+=1:a.code===_&&0!==g?g-=1:a.code===S&&g<m?g+=1:"End"===a.code?(g=m,a.ctrlKey&&(y=f)):"Home"===a.code?(g=0,a.ctrlKey&&(y=0)):"PageUp"===a.code?y=y-b>0?y-b:0:"PageDown"===a.code&&(y=y+b<f?y+b:f),{x:g,y}}}return c.\u0275fac=function(a){return new(a||c)(Ae(kn))},c.\u0275prov=Oe({token:c,factory:c.\u0275fac}),c})(),ek=(()=>{class c{constructor(a,h,d,f,m,g,y,v,_,S,b,T,x,E,D,I,M){this.organizer=a,this.items=h,this.expandableRows=d,this.selection=f,this.rowActionService=m,this.stateProvider=g,this.displayMode=y,this.renderer=v,this.detailService=_,this.document=b,this.el=T,this.page=x,this.commonStrings=E,this.columnsService=D,this.keyNavigation=I,this.zone=M,this.SELECTION_TYPE=Lr,this.refresh=new rt(!1),this.selectedChanged=new rt(!1),this.singleSelectedChanged=new rt(!1),this.clrDgSingleSelectionAriaLabel=this.commonStrings.keys.singleSelectionAriaLabel,this.clrDgSingleActionableAriaLabel=this.commonStrings.keys.singleActionableAriaLabel,this.clrDetailExpandableAriaLabel=this.commonStrings.keys.detailExpandableAriaLabel,this.clrDgDisablePageFocus=!1,this._subscriptions=[],this.selectAllId="clr-dg-select-all-"+S,this.detailService.id=S}get loading(){return this.items.loading}set loading(a){this.items.loading=a}dataChanged(){this.items.refresh()}set selected(a){this.selection.selectionType=a?Lr.Multi:Lr.None,this.selection.updateCurrent(a,!1)}set singleSelected(a){this.selection.selectionType=Lr.Single,a?this.selection.currentSingle=a:this.selection.currentSingle&&(this.selection.currentSingle=null)}set clrDgPreserveSelection(a){this.selection.preserveSelection=a}set rowSelectionMode(a){this.selection.rowSelectionMode=a}get allSelected(){return this.selection.isAllSelected()}set allSelected(a){this.selection.toggleAll()}ngAfterContentInit(){this.items.smart||(this.items.all=this.rows.map(a=>a.item)),this._subscriptions.push(this.rows.changes.subscribe(()=>{this.items.smart||(this.items.all=this.rows.map(a=>a.item));for(let a=this._displayedRows.length-1;a>=0;a--)this._displayedRows.get(a).destroyed&&this._displayedRows.remove(a);if(this.rows.forEach(a=>{this._displayedRows.insert(a._view)}),this.detailService.state&&this.detailService.isOpen){const a=this.rows.find((h,d)=>this.items.trackBy(d,h.item)===this.items.trackBy(d,this.detailService.state));a?this.detailService.open(a.item,a.detailButton.nativeElement):this.detailService.close()}}))}ngAfterViewInit(){this.keyNavigation.initializeKeyGrid(this.el.nativeElement),this.refresh.emit(this.stateProvider.state),this._subscriptions.push(this.stateProvider.change.subscribe(a=>this.refresh.emit(a)),this.selection.change.subscribe(a=>{this.selection.selectionType===Lr.Single?this.singleSelectedChanged.emit(a):this.selection.selectionType===Lr.Multi&&this.selectedChanged.emit(a)}),this.page.change.subscribe(()=>{this.keyNavigation.resetKeyGrid(),this.clrDgDisablePageFocus||this.datagridTable.nativeElement.focus()}),lC(this.columnsService.columns).subscribe(()=>this.keyNavigation?.resetKeyGrid()),this.displayMode.view.subscribe(a=>{for(let h=this._projectedDisplayColumns.length;h>0;h--)this._projectedDisplayColumns.detach();for(let h=this._projectedCalculationColumns.length;h>0;h--)this._projectedCalculationColumns.detach();for(let h=this._calculationRows.length;h>0;h--)this._calculationRows.detach();for(let h=this._displayedRows.length;h>0;h--)this._displayedRows.detach();a===Nf.DISPLAY?(this.renderer.removeClass(this.el.nativeElement,"datagrid-calculate-mode"),this.columns.forEach(h=>{this._projectedDisplayColumns.insert(h._view)}),this.rows.forEach(h=>{this._displayedRows.insert(h._view)})):(this.renderer.addClass(this.el.nativeElement,"datagrid-calculate-mode"),this.columns.forEach(h=>{this._projectedCalculationColumns.insert(h._view)}),this.rows.forEach(h=>{this._calculationRows.insert(h._view)}))})),this.zone.runOutsideAngular(()=>{this._subscriptions.push(Pu(this.document.body,"keydown").subscribe(a=>{"Shift"===a.key&&(this.selection.shiftPressed=!0)}),Pu(this.document.body,"keyup").subscribe(a=>{"Shift"===a.key&&(this.selection.shiftPressed=!1)}))})}ngOnDestroy(){this._subscriptions.forEach(a=>a.unsubscribe())}resize(){this.organizer.resize()}}return c.\u0275fac=function(a){return new(a||c)(N(Dm),N(Of),N(Gv),N(fT),N(Uv),N(VZ),N(JF),N(Fn),N(Vc),N(cs),N(Er),N(zt),N(Lf),N(br),N(jh),N(BZ),N(kn))},c.\u0275cmp=Be({type:c,selectors:[["clr-datagrid"]],contentQueries:function(a,h,d){if(1&a&&(yn(d,NZ,5),yn(d,qF,5),yn(d,TM,4),yn(d,CM,4)),2&a){let f;mt(f=gt())&&(h.iterator=f.first),mt(f=gt())&&(h.placeholder=f.first),mt(f=gt())&&(h.columns=f),mt(f=gt())&&(h.rows=f)}},viewQuery:function(a,h){if(1&a&&(hr(sVe,5,Zn),hr(oVe,5,zt),hr(aVe,5,Zn),hr(lVe,5,Zn),hr(cVe,5,Zn),hr(uVe,5,Zn)),2&a){let d;mt(d=gt())&&(h.scrollableColumns=d.first),mt(d=gt())&&(h.datagridTable=d.first),mt(d=gt())&&(h._projectedDisplayColumns=d.first),mt(d=gt())&&(h._projectedCalculationColumns=d.first),mt(d=gt())&&(h._displayedRows=d.first),mt(d=gt())&&(h._calculationRows=d.first)}},hostVars:4,hostBindings:function(a,h){2&a&&st("datagrid-host",!0)("datagrid-detail-open",h.detailService.isOpen)},inputs:{loading:["clrDgLoading","loading"],selected:["clrDgSelected","selected"],singleSelected:["clrDgSingleSelected","singleSelected"],clrDgSingleSelectionAriaLabel:"clrDgSingleSelectionAriaLabel",clrDgSingleActionableAriaLabel:"clrDgSingleActionableAriaLabel",clrDetailExpandableAriaLabel:"clrDetailExpandableAriaLabel",clrDgDisablePageFocus:"clrDgDisablePageFocus",clrDgPreserveSelection:"clrDgPreserveSelection",rowSelectionMode:["clrDgRowSelection","rowSelectionMode"]},outputs:{refresh:"clrDgRefresh",selectedChanged:"clrDgSelectedChange",singleSelectedChanged:"clrDgSingleSelectedChange"},features:[Mt([fT,bM,Hh,Lf,Of,Dm,Uv,Gv,aT,Vc,mo,VZ,XF,jh,JF,BZ])],ngContentSelectors:vVe,decls:32,vars:7,consts:[[1,"datagrid-outer-wrapper"],[1,"datagrid-inner-wrapper"],[1,"datagrid"],["datagrid",""],[1,"datagrid-table-wrapper"],["role","grid","tabindex","-1",1,"datagrid-table"],["datagridTable",""],["role","rowgroup",1,"datagrid-header"],["role","row",1,"datagrid-row"],[1,"datagrid-row-master","datagrid-row-flex"],[1,"datagrid-row-sticky"],["role","columnheader","class","datagrid-column datagrid-select datagrid-fixed-column",3,"keydown.space",4,"ngIf"],["role","columnheader","class","datagrid-column datagrid-select datagrid-fixed-column",4,"ngIf"],["role","columnheader","class","datagrid-column datagrid-row-actions datagrid-fixed-column",4,"ngIf"],["role","columnheader","class","datagrid-column datagrid-expandable-caret datagrid-fixed-column",4,"ngIf"],[1,"datagrid-row-scrollable"],["projectedDisplayColumns",""],["displayedRows",""],[4,"ngIf"],["class","datagrid-spinner",4,"ngIf"],[1,"datagrid-calculation-table"],[1,"datagrid-calculation-header"],["projectedCalculationColumns",""],["calculationRows",""],["role","columnheader",1,"datagrid-column","datagrid-select","datagrid-fixed-column",3,"keydown.space"],[1,"clr-checkbox-wrapper"],["type","checkbox","tabindex","-1",3,"id","ngModel","ngModelChange"],[1,"clr-control-label","clr-col-null",3,"for"],[1,"clr-sr-only"],[1,"datagrid-column-separator"],["role","columnheader",1,"datagrid-column","datagrid-select","datagrid-fixed-column"],["role","columnheader",1,"datagrid-column","datagrid-row-actions","datagrid-fixed-column"],["role","columnheader",1,"datagrid-column","datagrid-expandable-caret","datagrid-fixed-column"],[1,"datagrid-spinner"],["clrMedium",""]],template:function(a,h){1&a&&(Et(yVe),ke(0),U(1,"div",0)(2,"div",1)(3,"div",2,3)(5,"div",4)(6,"div",5,6)(8,"div",7)(9,"div",8)(10,"div",9)(11,"div",10),le(12,hVe,7,5,"div",11),le(13,dVe,2,1,"div",12),le(14,fVe,2,1,"div",13),le(15,pVe,2,1,"div",14),H(),U(16,"div",15),ba(17,null,16),H()()()(),ba(19,null,17),ke(21,1),le(22,mVe,1,0,"clr-dg-placeholder",18),H()()(),ke(23,2),le(24,gVe,3,0,"div",19),H(),ke(25,3),H(),U(26,"div",20)(27,"div",21),ba(28,null,22),H(),ba(30,null,23),H()),2&a&&(B(3),Ne("aria-hidden",!!h.detailService.isOpen||null),B(9),G("ngIf",h.selection.selectionType===h.SELECTION_TYPE.Multi),B(1),G("ngIf",h.selection.selectionType===h.SELECTION_TYPE.Single),B(1),G("ngIf",h.rowActionService.hasActionableRow),B(1),G("ngIf",h.expandableRows.hasExpandableRow||h.detailService.enabled),B(7),G("ngIf",!h.placeholder),B(2),G("ngIf",h.loading))},dependencies:[qF,Jb,vn,gv,Pa,sl,es],encapsulation:2}),c})(),tk=(()=>{class c{constructor(a){this.columnsService=a,this.allSelected=new rt}get clrAllSelected(){return this.allSelected.asObservable()}hideableColumns(){return this.columnsService.columns.filter(a=>a.value.hideable)}get allHideablesVisible(){return 0===this.hideableColumns().filter(a=>a.value.hidden).length}selectAll(){this.hideableColumns().forEach(a=>this.columnsService.emitStateChange(a,{hidden:!1,changes:[Vo.HIDDEN]})),this.allSelected.next(!0)}}return c.\u0275fac=function(a){return new(a||c)(N(jh))},c.\u0275cmp=Be({type:c,selectors:[["clr-dg-column-toggle-button"]],outputs:{clrAllSelected:"clrAllSelected"},ngContentSelectors:hn,decls:2,vars:1,consts:[["type","button",1,"btn","btn-sm","btn-link","switch-button",3,"disabled","click"]],template:function(a,h){1&a&&(Et(),U(0,"button",0),Me("click",function(){return h.selectAll()}),ke(1),H()),2&a&&G("disabled",h.allHideablesVisible)},encapsulation:2}),c})(),UZ=(()=>{class c{}return c.\u0275fac=function(a){return new(a||c)},c.\u0275cmp=Be({type:c,selectors:[["clr-dg-column-toggle-title"]],ngContentSelectors:hn,decls:1,vars:0,template:function(a,h){1&a&&(Et(),ke(0))},encapsulation:2}),c})(),GZ=(()=>{class c{constructor(a){this._items=a}set trackBy(a){this._items&&(this._items.trackBy=a)}}return c.\u0275fac=function(a){return new(a||c)(N(Of,8))},c.\u0275dir=We({type:c,selectors:[["","ngForTrackBy",""]],inputs:{trackBy:["ngForTrackBy","trackBy"]}}),c})(),nk=(()=>{class c{constructor(a,h,d,f,m,g,y){this.commonStrings=a,this.columnsService=h,this.columnSwitchId=d,this.platformId=f,this.zone=m,this.popoverId=g,this.popoverToggleService=y,this.smartPosition={axis:to.VERTICAL,side:La.BEFORE,anchor:Tr.START,content:Tr.START},this.subscription=y.openChange.subscribe(v=>this.openState=v)}get allColumnsVisible(){return this._allColumnsVisible}set allColumnsVisible(a){this._allColumnsVisible=a}ngOnDestroy(){this.subscription.unsubscribe()}get hideableColumnStates(){return this.columnsService.columns.filter(h=>h.value.hideable).map(h=>h.value)}get hasOnlyOneVisibleColumn(){return this.columnsService.columns.length-this.hideableColumnStates.length==0&&1===this.hideableColumnStates.filter(h=>!h.hidden).length}toggleColumnState(a,h){const d=this.columnsService.columns.filter(f=>f.value===a)[0];this.columnsService.emitStateChange(d,{hidden:h,changes:[Vo.HIDDEN]})}toggleSwitchPanel(){this.openState=!this.openState}allColumnsSelected(){this.allSelectedElement.nativeElement.focus()}trackByFn(a){return a}}return c.\u0275fac=function(a){return new(a||c)(N(br),N(jh),N(cs),N(wi),N(kn),N(cs),N(Hr))},c.\u0275cmp=Be({type:c,selectors:[["clr-dg-column-toggle"]],contentQueries:function(a,h,d){if(1&a&&(yn(d,UZ,5),yn(d,tk,5)),2&a){let f;mt(f=gt())&&(h.customToggleTitle=f.first),mt(f=gt())&&(h.customToggleButton=f.first)}},viewQuery:function(a,h){if(1&a&&hr(SVe,5,zt),2&a){let d;mt(d=gt())&&(h.allSelectedElement=d.first)}},hostVars:4,hostBindings:function(a,h){2&a&&st("column-switch-wrapper",!0)("active",h.openState)},features:[Mt([mo,Vh,Iv,Hr])],ngContentSelectors:MVe,decls:5,vars:9,consts:[["role","button","type","button","clrPopoverAnchor","","clrPopoverOpenCloseButton","",1,"btn","btn-sm","btn-link","column-toggle--action"],["shape","view-columns","aria-hidden","true"],[1,"clr-sr-only"],["class","column-switch","role","dialog","clrFocusTrap","",3,"id",4,"clrPopoverContent","clrPopoverContentAt","clrPopoverContentOutsideClickToClose","clrPopoverContentScrollToClose"],["role","dialog","clrFocusTrap","",1,"column-switch",3,"id"],[1,"switch-header"],["tabindex","-1",1,"clr-sr-only"],["allSelected",""],[4,"ngIf"],["clrPopoverCloseButton","","type","button",1,"btn","btn-sm","btn-link","toggle-switch-close-button"],["shape","window-close","aria-hidden","true"],[1,"switch-content","list-unstyled"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"switch-footer"],[3,"clrAllSelected",4,"ngIf"],["clrCheckbox","","type","checkbox",3,"disabled","ngModel","ngModelChange"],[3,"ngTemplateOutlet"],[3,"clrAllSelected"]],template:function(a,h){1&a&&(Et(EVe),U(0,"button",0),xe(1,"cds-icon",1),U(2,"span",2),ye(3),H()(),le(4,xVe,16,10,"div",3)),2&a&&(Ne("aria-controls",h.popoverId)("aria-owns",h.popoverId)("aria-expanded",h.openState),B(1),Ne("title",h.commonStrings.keys.pickColumns),B(2),Zt(h.commonStrings.keys.pickColumns),B(1),G("clrPopoverContent",h.openState)("clrPopoverContentAt",h.smartPosition)("clrPopoverContentOutsideClickToClose",!0)("clrPopoverContentScrollToClose",!0))},dependencies:[sM,tk,$b,Zb,Gr,Yb,Pf,vn,tZ,vi,GZ,gv,oM,Pa,sl,es,hh],encapsulation:2}),c})(),q5e=(()=>{class c{}return c.\u0275fac=function(a){return new(a||c)},c.\u0275mod=Ut({type:c}),c.\u0275inj=kt({imports:[[Nn]]}),c})(),HZ=(()=>{class c{constructor(a,h,d,f){this.selection=a,this.detailService=h,this.columnsService=d,this.commonStrings=f,this.SELECTION_TYPE=Lr}get hasHideableColumns(){return this.columnsService.hasHideableColumns}}return c.\u0275fac=function(a){return new(a||c)(N(fT),N(Vc),N(jh),N(br))},c.\u0275cmp=Be({type:c,selectors:[["clr-dg-footer"]],contentQueries:function(a,h,d){if(1&a&&yn(d,nk,5),2&a){let f;mt(f=gt())&&(h.toggle=f.first)}},hostVars:2,hostBindings:function(a,h){2&a&&st("datagrid-footer",!0)},ngContentSelectors:OVe,decls:3,vars:2,consts:[[4,"ngIf"],[1,"clr-form-control-disabled"],[1,"datagrid-footer-select"],["clrCheckbox","","type","checkbox","checked","checked","disabled",""],[1,"clr-sr-only"],[1,"datagrid-footer-description"]],template:function(a,h){1&a&&(Et(LVe),le(0,IVe,8,2,"ng-container",0),le(1,PVe,5,1,"ng-container",0),ke(2)),2&a&&(G("ngIf",h.selection.selectionType===h.SELECTION_TYPE.Multi&&h.selection.current.length>0),B(1),G("ngIf",!h.detailService.isOpen))},dependencies:[sM,nk,vn,oM,es],encapsulation:2}),c})();const rk=new Vt("COLUMN_STATE"),Y5e={provide:rk,useFactory:function $5e(){return new Nr({changes:[]})}},zv="datagrid-fixed-width",xM="datagrid-hidden-column";let EM=(()=>{class c{constructor(a,h,d){this.el=a,this.renderer=h,this.subscriptions=[],this.subscriptions.push(d.filterRenderSteps(hl.CLEAR_WIDTHS).subscribe(()=>this.clearWidth()))}set columnState(a){this.stateSubscription&&this.stateSubscription.unsubscribe(),this.runAllChanges=kZ,this.stateSubscription=a.subscribe(h=>this.stateChanges(h))}ngOnDestroy(){this.subscriptions.forEach(a=>a.unsubscribe()),this.stateSubscription&&this.stateSubscription.unsubscribe()}stateChanges(a){this.runAllChanges&&(a.changes=this.runAllChanges,delete this.runAllChanges),a.changes&&a.changes.length&&a.changes.forEach(h=>{switch(h){case Vo.WIDTH:this.setWidth(a);break;case Vo.HIDDEN:this.setHidden(a)}})}clearWidth(){this.renderer.removeClass(this.el.nativeElement,zv),this.renderer.setStyle(this.el.nativeElement,"width",null)}setWidth(a){a.strictWidth?this.renderer.addClass(this.el.nativeElement,zv):this.renderer.removeClass(this.el.nativeElement,zv),this.renderer.setStyle(this.el.nativeElement,"width",a.width+"px")}setHidden(a){a.hidden?this.renderer.addClass(this.el.nativeElement,xM):this.renderer.removeClass(this.el.nativeElement,xM)}}return c.\u0275fac=function(a){return new(a||c)(N(zt),N(Fn),N(Dm))},c.\u0275dir=We({type:c,selectors:[["clr-dg-cell"]]}),c})(),MM=(()=>{class c{constructor(a,h,d,f,m,g,y){this.el=a,this.renderer=h,this.organizer=d,this.domAdapter=f,this.columnResizerService=m,this.columnsService=g,this.columnState=y,this.resizeEmitter=new rt,this.widthSet=!1,this.autoSet=!1,this.subscriptions=[],this.subscriptions.push(this.organizer.filterRenderSteps(hl.CLEAR_WIDTHS).subscribe(()=>this.clearWidth())),this.subscriptions.push(y.subscribe(v=>this.stateChanges(v)))}ngOnDestroy(){this.subscriptions.forEach(a=>a.unsubscribe())}stateChanges(a){a.changes&&a.changes.length&&a.changes.forEach(h=>{switch(h){case Vo.WIDTH:this.setWidth(a);break;case Vo.HIDDEN:this.setHidden(a)}})}clearWidth(){this.widthSet&&!this.columnResizerService.resizedBy&&this.renderer.setStyle(this.el.nativeElement,"width",null),this.autoSet&&this.renderer.removeClass(this.el.nativeElement,zv)}detectStrictWidth(){return this.columnResizerService.resizedBy?this.columnResizerService.widthAfterResize:this.autoSet?0:this.domAdapter.userDefinedWidth(this.el.nativeElement)}computeWidth(a){let h=a;return h||(h=this.domAdapter.scrollWidth(this.el.nativeElement)),h}getColumnWidthState(){const a=this.detectStrictWidth();return{width:this.computeWidth(a),strictWidth:a}}setColumnState(a){this.columnsService.columns[a]=this.columnState}setWidth(a){a.strictWidth?(this.columnResizerService.resizedBy&&(this.resizeEmitter.emit(a.width),this.renderer.setStyle(this.el.nativeElement,"width",a.width+"px"),this.widthSet=!1),this.renderer.addClass(this.el.nativeElement,zv),this.autoSet=!1):(this.renderer.removeClass(this.el.nativeElement,zv),this.renderer.setStyle(this.el.nativeElement,"width",a.width+"px"),this.widthSet=!0,this.autoSet=!0)}setHidden(a){a.hidden?this.renderer.addClass(this.el.nativeElement,xM):this.renderer.removeClass(this.el.nativeElement,xM)}}return c.\u0275fac=function(a){return new(a||c)(N(zt),N(Fn),N(Dm),N(ul),N(WF),N(jh),N(rk))},c.\u0275dir=We({type:c,selectors:[["clr-dg-column"]],outputs:{resizeEmitter:"clrDgColumnResize"},features:[Mt([WF,Y5e])]}),c})(),eUe=(()=>{class c{userDefinedWidth(a){return 0}scrollBarWidth(a){return 0}scrollWidth(a){return 0}computedHeight(a){return 0}clientRect(a){return{top:0,bottom:0,left:0,right:0,width:0,height:0}}minWidth(a){return 0}focus(a){}}return c.\u0275fac=function(a){return new(a||c)},c.\u0275prov=Oe({token:c,factory:c.\u0275fac}),c})(),DM=(()=>{class c{constructor(a){this.columnsService=a,this.subscriptions=[]}ngAfterContentInit(){this.setColumnState(),this.subscriptions.push(this.cells.changes.subscribe(()=>{this.setColumnState()}))}ngOnDestroy(){this.subscriptions.forEach(a=>a.unsubscribe())}setColumnState(){this.cells.length===this.columnsService.columns.length&&this.cells.forEach((a,h)=>{this.columnsService.columns[h]&&(a.columnState=this.columnsService.columns[h])})}}return c.\u0275fac=function(a){return new(a||c)(N(jh))},c.\u0275dir=We({type:c,selectors:[["clr-dg-row"],["clr-dg-row-detail"]],contentQueries:function(a,h,d){if(1&a&&yn(d,EM,4),2&a){let f;mt(f=gt())&&(h.cells=f)}}}),c})();const tUe=c=>Dr(c)?new ul:new eUe;let ik=(()=>{class c{constructor(a,h,d,f,m,g,y,v,_,S){this.organizer=a,this.items=h,this.page=d,this.domAdapter=f,this.el=m,this.renderer=g,this.detailService=y,this.tableSizeService=v,this.columnsService=_,this.ngZone=S,this._heightSet=!1,this.subscriptions=[],this.columnsSizesStable=!1,this.shouldStabilizeColumns=!0,this.subscriptions.push(this.organizer.filterRenderSteps(hl.COMPUTE_COLUMN_WIDTHS).subscribe(()=>this.computeHeadersWidth())),this.subscriptions.push(this.page.sizeChange.subscribe(()=>{this._heightSet&&this.resetDatagridHeight()})),this.subscriptions.push(this.detailService.stateChange.subscribe(b=>this.toggleDetailPane(b))),this.subscriptions.push(this.items.change.subscribe(()=>this.shouldStabilizeColumns=!0))}ngAfterContentInit(){this.setupColumns(),this.subscriptions.push(this.headers.changes.subscribe(()=>{this.setupColumns(),this.columnsSizesStable=!1,this.stabilizeColumns()}))}ngAfterViewInit(){this.tableSizeService.table=this.el}ngAfterViewChecked(){this.shouldStabilizeColumns&&this.stabilizeColumns(),this.shouldComputeHeight()&&this.ngZone.runOutsideAngular(()=>{setTimeout(()=>{this.computeDatagridHeight()})})}setupColumns(){this.headers.forEach((a,h)=>a.setColumnState(h)),this.columnsService.columns.splice(this.headers.length),this.rows.forEach(a=>a.setColumnState())}shouldComputeHeight(){return!this._heightSet&&this.page.size>0&&this.items.displayed.length===this.page.size}toggleDetailPane(a){this.headers&&(a&&!this.columnsService.hasCache()?(this.columnsService.cache(),this.headers.forEach((h,d)=>{d>0&&this.columnsService.emitStateChangeAt(d,{changes:[Vo.HIDDEN],hidden:a})})):a||this.columnsService.resetToLastCache())}computeDatagridHeight(){const a=this.domAdapter.clientRect(this.el.nativeElement).height;this.renderer.setStyle(this.el.nativeElement,"height",a+"px"),this._heightSet=!0}resetDatagridHeight(){this.renderer.setStyle(this.el.nativeElement,"height",""),this._heightSet=!1}ngOnDestroy(){this.subscriptions.forEach(a=>a.unsubscribe())}computeHeadersWidth(){const a=this.headers.length;let h=!0;this.headers.forEach((d,f)=>{const m={changes:[Vo.WIDTH],...d.getColumnWidthState()};m.strictWidth||(h=!1),a===f+1&&h&&(m.strictWidth=0),this.columnsService.emitStateChangeAt(f,m)})}stabilizeColumns(){this.shouldStabilizeColumns=!1,!this.columnsSizesStable&&this.items.displayed.length>0&&(this.organizer.resize(),this.columnsSizesStable=!0)}}return c.\u0275fac=function(a){return new(a||c)(N(Dm),N(Of),N(Lf),N(ul),N(zt),N(Fn),N(Vc),N(XF),N(jh),N(kn))},c.\u0275dir=We({type:c,selectors:[["clr-datagrid"]],contentQueries:function(a,h,d){if(1&a&&(yn(d,MM,4),yn(d,DM,5)),2&a){let f;mt(f=gt())&&(h.headers=f),mt(f=gt())&&(h.rows=f)}},features:[Mt([{provide:ul,useFactory:tUe,deps:[wi]}])]}),c})(),nUe=(()=>{class c{constructor(){Rr.addIcons(_2e,S2e,Eb,b2e,Wq,T2e,Xq,w2e,C2e)}}return c.\u0275fac=function(a){return new(a||c)},c.\u0275mod=Ut({type:c}),c.\u0275inj=kt({imports:[[Nn,zr,TZ,Ou,UF,Hl,F5e,wZ,AZ,eT,Kb,CF,hM,xm]]}),c})(),aUe=(()=>{class c{constructor(){Rr.addIcons(fv)}}return c.\u0275fac=function(a){return new(a||c)},c.\u0275mod=Ut({type:c}),c.\u0275inj=kt({imports:[[Nn,Ou,zr,wZ]]}),c})();new Sd,new bd;let pUe=(()=>{class c{constructor(){Rr.addIcons(fv)}}return c.\u0275fac=function(a){return new(a||c)},c.\u0275mod=Ut({type:c}),c.\u0275inj=kt({imports:[[Nn,zr,UF]]}),c})(),mUe=(()=>{class c{}return c.\u0275fac=function(a){return new(a||c)},c.\u0275mod=Ut({type:c}),c.\u0275inj=kt({imports:[nUe,aUe,pUe]}),c})();class QZ{static linkParent(l,a,h){l.forEach(d=>d[h]=a)}static linkVertical(l,a=!0){l.forEach((h,d)=>{d>0&&(h.up=l[d-1]),d<l.length-1&&(h.down=l[d+1])}),a&&l.length>1&&(l[0].up=l[l.length-1],l[l.length-1].down=l[0])}}function JZ(c,l,a){return wt.create(h=>{l(h);const d=c.subscribe(h);return()=>{d.unsubscribe(),a&&a(h)}})}let ok=(()=>{class c{constructor(a,h,d,f,m,g){this.id=a,this.renderer=h,this.parent=d,this.toggleService=f,this.focusService=m,this.platformId=g,this._unlistenFuncs=[],this.focusBackOnTrigger=!1,this.resetChildren(),this.moveToFirstItemWhenOpen(),this.parent||this.handleRootFocus()}moveToFirstItemWhenOpen(){const a=this.toggleService.openChange.subscribe(h=>{h&&this.toggleService.originalEvent&&setTimeout(()=>{this.focusService.moveTo(this),this.focusService.move(this.parent?ma.RIGHT:ma.DOWN)})});this._unlistenFuncs.push(()=>a.unsubscribe())}handleRootFocus(){const a=this.toggleService.openChange.subscribe(h=>{h||(this.focusService.reset(this),this.focusBackOnTrigger&&this.focus()),this.focusBackOnTrigger=h});this._unlistenFuncs.push(()=>a.unsubscribe())}get trigger(){return this._trigger}set trigger(a){this._trigger=a,this.parent?this._unlistenFuncs.push(this.renderer.listen(a,"keydown.arrowright",h=>this.toggleService.toggleWithEvent(h))):(this._unlistenFuncs.push(this.renderer.listen(a,"keydown.arrowup",h=>this.toggleService.toggleWithEvent(h))),this._unlistenFuncs.push(this.renderer.listen(a,"keydown.arrowdown",h=>this.toggleService.toggleWithEvent(h))),this.focusService.listenToArrowKeys(a))}get container(){return this._container}set container(a){this._container=a,this._unlistenFuncs.push(this.renderer.listen(a,"keydown.tab",h=>this.toggleService.toggleWithEvent(h))),this.parent?this._unlistenFuncs.push(this.renderer.listen(a,"keydown.esc",h=>{this.focusService.move(ma.LEFT),h.stopPropagation()})):(this.focusService.registerContainer(a),this._unlistenFuncs.push(this.renderer.listen(a,"keydown.esc",h=>this.toggleService.toggleWithEvent(h))),this._unlistenFuncs.push(this.renderer.listen(a,"blur",h=>{this.children.pipe(dh(1)).subscribe(f=>f.forEach(m=>m.blur()));const d=h.relatedTarget||document.activeElement;d&&Dr(this.platformId)&&(a.contains(d)||d===this.trigger)||(this.focusBackOnTrigger=!1,this.toggleService.open=!1)})))}focus(){this.trigger&&Dr(this.platformId)&&this.trigger.focus()}blur(){this.trigger&&Dr(this.platformId)&&this.trigger.blur()}activate(){Dr(this.platformId)&&this.trigger.click()}openAndGetChildren(){return JZ(this.children,()=>this.toggleService.open=!0)}closeAndGetThis(){return JZ(St(this),()=>this.toggleService.open=!1)}resetChildren(){this.children=new PN(1),this.parent?this.right=this.openAndGetChildren().pipe(ve(a=>a[0])):(this.down=this.openAndGetChildren().pipe(ve(a=>a[0])),this.up=this.openAndGetChildren().pipe(ve(a=>a[a.length-1])))}addChildren(a){QZ.linkVertical(a),this.parent&&QZ.linkParent(a,this.closeAndGetThis(),ma.LEFT),this.children.next(a)}ngOnDestroy(){this._unlistenFuncs.forEach(a=>a()),this.focusService.detachListeners()}}return c.\u0275fac=function(a){return new(a||c)(Ae(cs),Ae(Fn),Ae(c,12),Ae(Hr),Ae(lM),Ae(wi))},c.\u0275prov=Oe({token:c,factory:c.\u0275fac}),c})();lZ(ok);new Sd,new bd;var nt=(()=>(function(c){c[c.RIGHT_CENTER=0]="RIGHT_CENTER",c[c.RIGHT_TOP=1]="RIGHT_TOP",c[c.RIGHT_BOTTOM=2]="RIGHT_BOTTOM",c[c.TOP_CENTER=3]="TOP_CENTER",c[c.TOP_RIGHT=4]="TOP_RIGHT",c[c.TOP_LEFT=5]="TOP_LEFT",c[c.BOTTOM_CENTER=6]="BOTTOM_CENTER",c[c.BOTTOM_RIGHT=7]="BOTTOM_RIGHT",c[c.BOTTOM_LEFT=8]="BOTTOM_LEFT",c[c.LEFT_CENTER=9]="LEFT_CENTER",c[c.LEFT_TOP=10]="LEFT_TOP",c[c.LEFT_BOTTOM=11]="LEFT_BOTTOM"}(nt||(nt={})),nt))();const eK="absolute";class wUe{constructor(l){this.element=l,this.scrollableElements=[],this.boundOnScrollListener=this.emitScrollEvent.bind(this),l.style.position=eK,l.style.top=0,l.style.bottom="auto",l.style.left=0,l.style.right="auto"}anchor(l,a,h,{offsetX:d=0,offsetY:f=0,useAnchorParent:m=!1}={}){this.addScrollEventListeners(l),m&&(l=l.parentNode),l.style.position="static";const g=l.getBoundingClientRect(),y=this.element.getBoundingClientRect();let v=g.left-y.left+d,_=g.top-y.top+f;switch(a){case nt.LEFT_TOP:case nt.TOP_LEFT:break;case nt.TOP_CENTER:v+=g.width/2;break;case nt.TOP_RIGHT:case nt.RIGHT_TOP:v+=g.width;break;case nt.LEFT_BOTTOM:case nt.BOTTOM_LEFT:_+=g.height;break;case nt.BOTTOM_CENTER:_+=g.height,v+=g.width/2;break;case nt.BOTTOM_RIGHT:case nt.RIGHT_BOTTOM:_+=g.height,v+=g.width;break;case nt.LEFT_CENTER:_+=g.height/2;break;case nt.RIGHT_CENTER:_+=g.height/2,v+=g.width}switch(h){case nt.LEFT_TOP:case nt.TOP_LEFT:break;case nt.TOP_CENTER:v-=y.width/2;break;case nt.TOP_RIGHT:case nt.RIGHT_TOP:v-=y.width;break;case nt.LEFT_BOTTOM:case nt.BOTTOM_LEFT:_-=y.height;break;case nt.BOTTOM_CENTER:_-=y.height,v-=y.width/2;break;case nt.BOTTOM_RIGHT:case nt.RIGHT_BOTTOM:_-=y.height,v-=y.width;break;case nt.LEFT_CENTER:_-=y.height/2;break;case nt.RIGHT_CENTER:_-=y.height/2,v-=y.width}const S=getComputedStyle(this.element),b=parseInt(S.marginLeft,10),T=parseInt(S.marginRight,10),x=parseInt(S.marginTop,10),E=parseInt(S.marginBottom,10);switch(a){case nt.LEFT_TOP:case nt.TOP_LEFT:case nt.TOP_RIGHT:case nt.RIGHT_TOP:(h===nt.BOTTOM_RIGHT||h===nt.RIGHT_BOTTOM)&&(_-=E,v-=T),(h===nt.BOTTOM_LEFT||h===nt.LEFT_BOTTOM)&&(_-=x,v+=b),(h===nt.TOP_LEFT||h===nt.LEFT_TOP)&&(_+=x,v+=b),(h===nt.TOP_RIGHT||h===nt.RIGHT_TOP)&&(_+=x,v-=T);break;case nt.LEFT_BOTTOM:case nt.BOTTOM_LEFT:case nt.BOTTOM_RIGHT:case nt.RIGHT_BOTTOM:(h===nt.BOTTOM_LEFT||h===nt.LEFT_BOTTOM)&&(_-=E,v+=b),(h===nt.BOTTOM_RIGHT||h===nt.RIGHT_BOTTOM)&&(_-=E,v-=T),(h===nt.TOP_LEFT||h===nt.LEFT_TOP)&&(_+=x,v+=b),(h===nt.TOP_RIGHT||h===nt.RIGHT_TOP)&&(_+=x,v-=T);break;case nt.TOP_CENTER:_-=E,v+=b,v-=T;break;case nt.BOTTOM_CENTER:_+=x,v+=b,v-=T;break;case nt.LEFT_CENTER:_+=x,_-=E,v-=T;break;case nt.RIGHT_CENTER:_+=x,_-=E,v+=b}return this.element.style.transform=`translateX(${Math.round(v)}px) translateY(${Math.round(_)}px)`,this._scroll.asObservable()}release(){this.element.style.transform="",this.removeScrollEventListeners()}isPositioned(l){const a=getComputedStyle(l).position;return"relative"===a||a===eK||"fixed"===a}emitScrollEvent(){this._scroll.next()}addScrollEventListeners(l){this._scroll=new Ke;const a=l;let h=l;for(;h&&h!==document&&(this.scrolls(h)&&(h.addEventListener("scroll",this.boundOnScrollListener),this.scrollableElements.push(h)),h===a||!this.isPositioned(h));)h=h.parentNode}removeScrollEventListeners(){for(const l of this.scrollableElements)l.removeEventListener("scroll",this.boundOnScrollListener);this.scrollableElements.length=0,this._scroll&&(this._scroll.complete(),delete this._scroll)}scrolls(l){const a=getComputedStyle(l);return"scroll"===a.overflowX||"auto"===a.overflowX||"scroll"===a.overflowY||"auto"===a.overflowY}}let lk=(()=>{class c{constructor(a,h){this.parentHost=h,this.updateAnchor=!1,this.popoverOptions={},this.closeOnOutsideClick=!1,this.documentESCListener=null,this.closeOnOutsideClickCallback=d=>{this.anchorElem.contains(d.target)||(this.toggleService.open=!1)},this.el=a.get(zt),this.toggleService=a.get(Hr),this.renderer=a.get(Fn),this.ngZone=a.get(kn),this.ref=a.get(Ss),this.anchorElem=h.nativeElement,this.popoverInstance=new wUe(this.el.nativeElement),this.subscription=this.toggleService.openChange.subscribe(d=>{d?(this.anchor(),this.attachESCListener()):(this.release(),this.detachESCListener())}),this.toggleService.open&&(this.anchor(),this.attachESCListener())}anchor(){this.updateAnchor=!0}release(){this.detachOutsideClickListener(),this.popoverInstance.release()}ngAfterViewChecked(){this.updateAnchor&&(this.updateAnchor=!1,this.popoverInstance.anchor(this.anchorElem,this.anchorPoint,this.popoverPoint,this.popoverOptions).subscribe(()=>{this.toggleService.open=!1}),this.attachOutsideClickListener())}ngOnDestroy(){this.release(),this.detachESCListener(),this.subscription.unsubscribe()}get isOffScreen(){return!this.toggleService.open}attachESCListener(){this.popoverOptions.ignoreGlobalESCListener||this.ngZone.runOutsideAngular(()=>{this.documentESCListener=this.renderer.listen("document","keydown",a=>{a&&a.key&&("Escape"===a.key||"Esc"===a.key)&&this.ngZone.run(()=>{this.toggleService.open=!1,this.ref.markForCheck()})})})}detachESCListener(){this.documentESCListener&&(this.documentESCListener(),this.documentESCListener=null)}attachOutsideClickListener(){this.closeOnOutsideClick&&this.toggleService.open&&document&&document.addEventListener&&document.addEventListener("click",this.closeOnOutsideClickCallback,!0)}detachOutsideClickListener(){this.closeOnOutsideClick&&document&&document.removeEventListener&&document.removeEventListener("click",this.closeOnOutsideClickCallback,!0)}}return c.\u0275fac=function(a){return new(a||c)(N(ti),N(zt,4))},c.\u0275dir=We({type:c,hostVars:2,hostBindings:function(a,h){2&a&&st("is-off-screen",h.isOffScreen)}}),c})(),ck=(()=>{class c{}return c.\u0275fac=function(a){return new(a||c)},c.\u0275mod=Ut({type:c}),c.\u0275inj=kt({imports:[[Nn],Hl,zr]}),c})(),hk=(()=>{class c{}return c.\u0275fac=function(a){return new(a||c)},c.\u0275dir=We({type:c,selectors:[["",8,"alert-text"]]}),c})(),sK=(()=>{class c{constructor(){Rr.addIcons(rl,qq,nl,x2e,Eb)}}return c.\u0275fac=function(a){return new(a||c)},c.\u0275mod=Ut({type:c}),c.\u0275inj=kt({imports:[[Nn,zr,ck]]}),c})(),EUe=(()=>{class c{}return c.\u0275fac=function(a){return new(a||c)},c.\u0275mod=Ut({type:c}),c.\u0275inj=kt({imports:[sK]}),c})(),Fr=(()=>{class c{}return c.NAV_LEVEL_1=1,c.NAV_LEVEL_2=2,c.NAV_CLOSE_ALL="NAV_CLOSE_ALL",c.NAV_OPEN="NAV_OPEN",c.NAV_CLOSE="NAV_CLOSE",c.NAV_TOGGLE="NAV_TOGGLE",c.NAV_CLASS_HAMBURGER_MENU="open-hamburger-menu",c.NAV_CLASS_OVERFLOW_MENU="open-overflow-menu",c.NAV_CLASS_TRIGGER_1="header-hamburger-trigger",c.NAV_CLASS_TRIGGER_2="header-overflow-trigger",c.NAV_CLASS_LEVEL_1="clr-nav-level-1",c.NAV_CLASS_LEVEL_2="clr-nav-level-2",c})();class oK{constructor(l,a){this._controlCode=l,this._navLevel=a}get controlCode(){return this._controlCode}get navLevel(){return this._navLevel}}let RM=(()=>{class c{constructor(){this.responsiveNavList=[],this.registerNavSubject=new PN,this.controlNavSubject=new Ke,this.closeAllNavs()}get registeredNavs(){return this.registerNavSubject.asObservable()}get navControl(){return this.controlNavSubject.asObservable()}registerNav(a){!a||this.isNavRegistered(a)||(this.responsiveNavList.push(a),this.registerNavSubject.next(this.responsiveNavList))}isNavRegistered(a){return this.responsiveNavList.indexOf(a)>-1&&(console.error("Multiple clr-nav-level "+a+" attributes found. Please make sure that only one exists"),!0)}unregisterNav(a){const h=this.responsiveNavList.indexOf(a);h>-1&&(this.responsiveNavList.splice(h,1),this.registerNavSubject.next(this.responsiveNavList))}sendControlMessage(a,h){const d=new oK(a,h);this.controlNavSubject.next(d)}closeAllNavs(){const a=new oK(Fr.NAV_CLOSE_ALL,-999);this.controlNavSubject.next(a)}}return c.\u0275fac=function(a){return new(a||c)},c.\u0275prov=Oe({token:c,factory:c.\u0275fac,providedIn:"root"}),c})(),aK=(()=>{class c{constructor(a,h){this.elRef=a,this.responsiveNavService=h}ngOnInit(){this._classList=this.elRef.nativeElement.classList,this._subscription=this.responsiveNavService.navControl.subscribe({next:a=>{this.processMessage(a)}})}processMessage(a){let h=Fr.NAV_CLASS_HAMBURGER_MENU;a.controlCode===Fr.NAV_CLOSE_ALL?(this._classList.remove(Fr.NAV_CLASS_HAMBURGER_MENU),this._classList.remove(Fr.NAV_CLASS_OVERFLOW_MENU)):a.navLevel===Fr.NAV_LEVEL_1?this.controlNav(a.controlCode,h):a.navLevel===Fr.NAV_LEVEL_2&&(h=Fr.NAV_CLASS_OVERFLOW_MENU,this.controlNav(a.controlCode,h))}controlNav(a,h){a===Fr.NAV_OPEN?this._classList.add(h):a===Fr.NAV_CLOSE?this._classList.remove(h):a===Fr.NAV_TOGGLE&&this._classList.toggle(h)}ngOnDestroy(){this._subscription.unsubscribe()}}return c.\u0275fac=function(a){return new(a||c)(N(zt),N(RM))},c.\u0275dir=We({type:c,selectors:[["clr-main-container"]],hostVars:2,hostBindings:function(a,h){2&a&&st("main-container",!0)}}),c})(),MUe=(()=>{class c{}return c.\u0275fac=function(a){return new(a||c)},c.\u0275mod=Ut({type:c}),c.\u0275inj=kt({imports:[[Nn,zr]]}),c})(),dk=(()=>{class c extends Mv{}return c.\u0275fac=function(){let l;return function(h){return(l||(l=Ri(c)))(h||c)}}(),c.\u0275dir=We({type:c,selectors:[["clr-main-container"]],features:[Qt]}),c})(),lK=(()=>{class c extends Dv{constructor(a,h,d){if(!h)throw new Error("clr-header should only be used inside of a clr-main-container");super(a,h),this.responsiveNavService=d}get flavor(){return this.responsiveNavService.responsiveNavList.reduce((a,h)=>a+h,0)}}return c.\u0275fac=function(a){return new(a||c)(N(Ss),N(dk,8),N(RM))},c.\u0275dir=We({type:c,selectors:[["clr-header"]],features:[Qt]}),c})(),cK=(()=>{class c{constructor(a,h){this.responsiveNavService=a,this.commonStrings=h,this.isNavLevel1OnPage=!1,this.isNavLevel2OnPage=!1,this.openNavLevel=null,this.responsiveNavCodes=Fr,this._subscription=this.responsiveNavService.registeredNavs.subscribe({next:d=>{this.initializeNavTriggers(d)}}),this._subscription.add(this.responsiveNavService.navControl.pipe(qr(({controlCode:d})=>d===Fr.NAV_CLOSE||d===Fr.NAV_CLOSE_ALL)).subscribe(()=>{this.openNavLevel=null}))}get responsiveNavCommonString(){const a=this.commonStrings.keys;return this.openNavLevel!==this.responsiveNavCodes.NAV_LEVEL_1?a.responsiveNavToggleOpen:a.responsiveNavToggleClose}get responsiveOverflowCommonString(){const a=this.commonStrings.keys;return this.openNavLevel!==this.responsiveNavCodes.NAV_LEVEL_2?a.responsiveNavOverflowOpen:a.responsiveNavOverflowClose}resetNavTriggers(){this.isNavLevel1OnPage=!1,this.isNavLevel2OnPage=!1}initializeNavTriggers(a){this.resetNavTriggers(),a.length>2?console.error("More than 2 Nav Levels detected."):a.forEach(h=>{h===Fr.NAV_LEVEL_1?this.isNavLevel1OnPage=!0:h===Fr.NAV_LEVEL_2&&(this.isNavLevel2OnPage=!0)})}closeOpenNav(){this.responsiveNavService.closeAllNavs()}toggleNav(a){this.openNavLevel!==a?this.openNav(a):this.responsiveNavService.sendControlMessage(Fr.NAV_CLOSE,a)}openNav(a){this.openNavLevel=a,this.responsiveNavService.sendControlMessage(Fr.NAV_OPEN,a)}ngOnDestroy(){this._subscription.unsubscribe()}}return c.\u0275fac=function(a){return new(a||c)(N(RM),N(br))},c.\u0275cmp=Be({type:c,selectors:[["clr-header"]],hostVars:2,hostBindings:function(a,h){2&a&&st("header",!0)},ngContentSelectors:hn,decls:4,vars:2,consts:[["type","button","class","header-hamburger-trigger",3,"click",4,"ngIf"],["type","button","class","header-overflow-trigger",3,"click",4,"ngIf"],[1,"header-backdrop",3,"click"],["type","button",1,"header-hamburger-trigger",3,"click"],["type","button",1,"header-overflow-trigger",3,"click"]],template:function(a,h){1&a&&(Et(),le(0,wBe,2,2,"button",0),ke(1),le(2,CBe,2,2,"button",1),U(3,"div",2),Me("click",function(){return h.closeOpenNav()}),H()),2&a&&(G("ngIf",h.isNavLevel1OnPage),B(2),G("ngIf",h.isNavLevel2OnPage))},dependencies:[vn],encapsulation:2}),c})();function uK(c){const l=c.createElement("span");return l.setAttribute("tabindex","0"),l.classList.add("offscreen-focus-rebounder"),l}let LUe=(()=>{class c{constructor(a,h,d,f){this.renderer=a,this.active=!1,Dr(d)&&(this._document=h.get(Er)),f.focusTrapId||(f.focusTrapId=function GLe(c="_"){return`${c}${Math.random().toString(36).substr(2,9)}`}()),this.focusTrapElement=f}enableFocusTrap(){const a=this.focusTrapElement,h=a.querySelector("[cds-first-focus]"),d=this._document.activeElement;if(JE.getCurrent()===a)throw new Error("Focus trap is already enabled for this instance.");this.firstFocusElement=h||this.focusTrapElement,function RUe(c,l){if(l&&!l.topReboundElement&&!l.bottomReboundElement){l.topReboundElement=uK(c),l.bottomReboundElement=uK(c);const a=l.parentElement,h=l.nextSibling;a&&(a.insertBefore(l.topReboundElement,l),h?a.insertBefore(l.bottomReboundElement,h):a.appendChild(l.bottomReboundElement))}}(this._document,a),function dNe(c){switch(c.tagName.toLowerCase()){case"input":return"hidden"!==c.getAttribute("type")&&!c.hasAttribute("disabled")&&!c.hasAttribute("readonly");case"button":case"select":case"textarea":return!c.hasAttribute("disabled");case"iframe":case"embed":case"object":return!0;case"a":case"area":return c.hasAttribute("href");case"audio":case"video":return c.hasAttribute("controls");default:return c.hasAttribute("tabindex")||"true"===c.getAttribute("contenteditable")||"button"===c.getAttribute("role")&&!c.hasAttribute("disabled")}}(a)||a.setAttribute("tabindex","-1"),d&&function mNe(c){return!!c&&c instanceof HTMLElement}(d)&&(this.previousFocus=d),JE.setCurrent(a);const f=setTimeout(()=>{this.firstFocusElement.focus(),clearTimeout(f)},10);this.onFocusInEvent=this.onFocusIn.bind(this),this.unlisten=this.renderer.listen(this._document,"focusin",this.onFocusInEvent),this.active=!0}removeFocusTrap(){this.unlisten&&this.unlisten(),function PUe(c){if(c){const l=c.parentElement;if(l){const a=c.topReboundElement,h=c.bottomReboundElement;a&&l.removeChild(a),h&&l.removeChild(h)}delete c.topReboundElement,delete c.bottomReboundElement}}(this.focusTrapElement),this.renderer.removeAttribute(this.focusTrapElement,"tabindex"),JE.activatePreviousCurrent(),this.active=!1,this.previousFocus&&this.previousFocus.focus()}onFocusIn(a){!function AUe(c,l,a){const h=JE.getCurrent()===l,d=function IUe(c,l){return c===l.topReboundElement||c===l.bottomReboundElement||!(l.contains(c)||null!==l&&l.contains(c))}(c,l);h&&d?(a=a||l).focus():c.focus()}(a.composedPath()[0],this.focusTrapElement,this.firstFocusElement)}}return c.\u0275fac=function(a){_w()},c.\u0275prov=Oe({token:c,factory:c.\u0275fac}),c})(),Bc=(()=>{class c extends LUe{constructor(a,h,d,f,m){super(f,m,a,d.nativeElement),this.responsiveNavService=h,this.elementRef=d,this._isOpen=!1,Dr(a)&&(this._document=m.get(Er)),this._subscription=h.navControl.pipe(qr(g=>g.navLevel===this.level),qr(({controlCode:g})=>g===Fr.NAV_OPEN&&!this.isOpen||g===Fr.NAV_CLOSE&&this.isOpen)).subscribe(({controlCode:g})=>{g!==Fr.NAV_OPEN?this.close():this.open()}),this._subscription.add(h.navControl.pipe(qr(({controlCode:g})=>g===Fr.NAV_CLOSE_ALL)).subscribe(()=>this.close()))}ngOnInit(){this.closeButtonAriaLabel||(this.closeButtonAriaLabel=this._level===Fr.NAV_LEVEL_1?mF.responsiveNavToggleClose:mF.responsiveNavOverflowClose),this.level===Fr.NAV_LEVEL_1||this.level===Fr.NAV_LEVEL_2?(this.responsiveNavService.registerNav(this.level),this.addNavClass(this.level)):console.error("Nav Level can only be 1 or 2")}ngAfterViewInit(){const a=((c,l)=>{const a=this._document.createElement("cds-internal-close-button");return a.setAttribute("icon-size","32"),a.setAttribute("aria-label",l),a.setAttribute("aria-hidden","true"),a.setAttribute("type","button"),a.setAttribute("hidden","true"),a.className="clr-nav-close",a})(0,this.closeButtonAriaLabel);this.renderer.listen(a,"click",this.close.bind(this)),this.renderer.insertBefore(this.elementRef.nativeElement,a,this.elementRef.nativeElement.firstChild),this._document.body.clientWidth<992&&this.close()}addNavClass(a){const h=this.elementRef.nativeElement.classList;a===Fr.NAV_LEVEL_1?h.add(Fr.NAV_CLASS_LEVEL_1):a===Fr.NAV_LEVEL_2&&h.add(Fr.NAV_CLASS_LEVEL_2)}get level(){return this._level}get responsiveNavCodes(){return Fr}get isOpen(){return this._isOpen}onResize(a){a.target.innerWidth<992&&this.isOpen?this.close():this.showNavigation()}open(){this._isOpen=!0,this.showNavigation(),this.enableFocusTrap(),this.showCloseButton(),this.responsiveNavService.sendControlMessage(Fr.NAV_OPEN,this.level)}close(){this._isOpen=!1,this.hideNavigation(),this.removeFocusTrap(),this.hideCloseButton(),this.responsiveNavService.sendControlMessage(Fr.NAV_CLOSE,this.level)}onMouseClick(a){let h=a;const d=this.elementRef.nativeElement;for(;h;){if(h===d)return;if(h.classList.contains("nav-link")&&this._document.body.clientWidth<992)return void this.close();h=h.parentNode}}hideNavigation(){this.renderer.setAttribute(this.elementRef.nativeElement,"aria-hidden","true"),this.renderer.setAttribute(this.elementRef.nativeElement,"hidden","true")}showNavigation(){this.renderer.setAttribute(this.elementRef.nativeElement,"aria-hidden","false"),this.renderer.removeAttribute(this.elementRef.nativeElement,"hidden")}hideCloseButton(){this.renderer.setAttribute(this.elementRef.nativeElement,"aria-hidden","true"),this.renderer.setAttribute(this.elementRef.nativeElement.querySelector(".clr-nav-close"),"hidden","true")}showCloseButton(){this.renderer.setAttribute(this.elementRef.nativeElement.querySelector(".clr-nav-close"),"aria-hidden","false"),this.renderer.removeAttribute(this.elementRef.nativeElement.querySelector(".clr-nav-close"),"hidden")}ngOnDestroy(){this.responsiveNavService.unregisterNav(this.level),this._subscription.unsubscribe()}}return c.\u0275fac=function(a){return new(a||c)(N(wi),N(RM),N(zt),N(Fn),N(ti))},c.\u0275dir=We({type:c,selectors:[["","clr-nav-level",""]],hostBindings:function(a,h){1&a&&Me("resize",function(f){return h.onResize(f)},0,cR)("click",function(f){return h.onMouseClick(f.target)})},inputs:{_level:["clr-nav-level","_level"],closeButtonAriaLabel:["closeAriaLabel","closeButtonAriaLabel"]},features:[Qt]}),c})(),NUe=(()=>{class c{}return c.\u0275fac=function(a){return new(a||c)},c.\u0275mod=Ut({type:c}),c.\u0275inj=kt({imports:[[Nn,zr,ck]]}),c})(),FUe=(()=>{class c{}return c.\u0275fac=function(a){return new(a||c)},c.\u0275mod=Ut({type:c}),c.\u0275inj=kt({imports:[[Nn]]}),c})();new Vt("TABS_ID");let HUe=(()=>{class c{constructor(){Rr.addIcons(jq)}}return c.\u0275fac=function(a){return new(a||c)},c.\u0275mod=Ut({type:c}),c.\u0275inj=kt({imports:[[Nn,Hl,zr,FUe,CF],Hl]}),c})(),mk=(()=>{class c{constructor(){this.navGroupCount=0}registerNavGroup(){this.navGroupCount++}unregisterNavGroup(){this.navGroupCount--}}return c.\u0275fac=function(a){return new(a||c)},c.\u0275prov=Oe({token:c,factory:c.\u0275fac}),c})(),gk=(()=>{class c{constructor(){this._icons=0}get hasIcons(){return this._icons>0}registerIcon(){this._icons++}unregisterIcon(){this._icons--}}return c.\u0275fac=function(a){return new(a||c)},c.\u0275prov=Oe({token:c,factory:c.\u0275fac}),c})(),yk=(()=>{class c{constructor(){this._animateOnCollapsed=new Ke,this._collapsedChanged=new Ke,this._collapsed=!1,this._collapsible=!1}get animateOnCollapsed(){return this._animateOnCollapsed.asObservable()}get collapsedChanged(){return this._collapsedChanged.asObservable()}get collapsed(){return this._collapsed}set collapsed(a){a=!!a,this.collapsible&&this._collapsed!==a&&this.updateCollapseBehavior(a)}get collapsible(){return this._collapsible}set collapsible(a){this._collapsible!==(a=!!a)&&(!a&&this.collapsed&&this.updateCollapseBehavior(!1),this._collapsible=a)}updateCollapseBehavior(a){this._animateOnCollapsed.next(a),this._collapsed=a,this._collapsedChanged.next(a)}}return c.\u0275fac=function(a){return new(a||c)},c.\u0275prov=Oe({token:c,factory:c.\u0275fac}),c})(),Bu=(()=>{class c{constructor(a,h,d,f){this._navService=a,this._navIconService=h,this._navGroupRegistrationService=d,this.commonStrings=f,this._collapsedChanged=new rt(!0),this._sub=this._navService.collapsedChanged.subscribe(m=>{this._collapsedChanged.emit(m)})}get collapsible(){return this._navService.collapsible}set collapsible(a){this._navService.collapsible=a}get collapsed(){return this._navService.collapsed}set collapsed(a){this._navService.collapsed=a}get hasNavGroups(){return this._navGroupRegistrationService.navGroupCount>0}get hasIcons(){return this._navIconService.hasIcons}get ariaExpanded(){return this.collapsible?this.collapsed?"false":"true":null}toggleByButton(){this.collapsed=!this.collapsed}ngOnDestroy(){this._sub.unsubscribe()}}return c.\u0275fac=function(a){return new(a||c)(N(yk),N(gk),N(mk),N(br))},c.\u0275cmp=Be({type:c,selectors:[["clr-vertical-nav"]],hostAttrs:[1,"clr-vertical-nav"],hostVars:6,hostBindings:function(a,h){2&a&&st("is-collapsed",h.collapsed)("has-nav-groups",h.hasNavGroups)("has-icons",h.hasIcons)},inputs:{collapsible:["clrVerticalNavCollapsible","collapsible"],collapsed:["clrVerticalNavCollapsed","collapsed"]},outputs:{_collapsedChanged:"clrVerticalNavCollapsedChange"},features:[Mt([yk,gk,mk])],ngContentSelectors:hn,decls:4,vars:2,consts:[["type","button","class","nav-trigger",3,"on-collapse","click",4,"ngIf"],[1,"nav-content"],["class","nav-btn","aria-hidden","true","tabindex","-1",3,"click",4,"ngIf"],["type","button",1,"nav-trigger",3,"click"],["shape","angle-double",1,"nav-trigger-icon"],["aria-hidden","true","tabindex","-1",1,"nav-btn",3,"click"]],template:function(a,h){1&a&&(Et(),le(0,NBe,2,6,"button",0),U(1,"div",1),ke(2),le(3,FBe,1,1,"button",2),H()),2&a&&(G("ngIf",h.collapsible),B(3),G("ngIf",h.collapsible&&h.collapsed))},dependencies:[vn,Gr],encapsulation:2}),c})(),vk=(()=>{class c{constructor(){this._expandChange=new Ke}get expandChange(){return this._expandChange.asObservable()}expand(){this._expandChange.next(!0)}}return c.\u0275fac=function(a){return new(a||c)},c.\u0275prov=Oe({token:c,factory:c.\u0275fac}),c})();const yT="expanded",Xh="collapsed";let Uu=(()=>{class c{constructor(a,h,d,f,m){this._itemExpand=a,this._navGroupRegistrationService=h,this._navGroupService=d,this._navService=f,this.commonStrings=m,this.wasExpanded=!1,this.groupLabel=this.commonStrings.keys.verticalNavGroupToggle,this.expandedChange=new rt(!0),this._subscriptions=[],this._expandAnimationState=Xh,this._navGroupRegistrationService.registerNavGroup(),this._subscriptions.push(this._itemExpand.expandChange.subscribe(g=>{g&&this.expandAnimationState===Xh?(this._navService.collapsed&&(this._navService.collapsed=!1),this.expandAnimationState=yT):!g&&this.expandAnimationState===yT&&(this.expandAnimationState=Xh)})),this._subscriptions.push(this._navService.animateOnCollapsed.subscribe(g=>{g&&this.expanded?(this.wasExpanded=!0,this.expandAnimationState=Xh):!g&&this.wasExpanded&&(this.expandGroup(),this.wasExpanded=!1)})),this._subscriptions.push(this._navGroupService.expandChange.subscribe(g=>{g&&!this.expanded&&this.expandGroup()}))}get expanded(){return this._itemExpand.expanded}set expanded(a){this._itemExpand.expanded!==a&&(this._itemExpand.expanded=a,this.expandedChange.emit(a))}set userExpandedInput(a){this.expanded!==(a=!!a)&&this.toggleExpand()}expandGroup(){this.expanded=!0,this.expandAnimationState=yT}collapseGroup(){this.expandAnimationState=Xh}expandAnimationDone(a){a.toState===Xh&&(this.expanded=!1)}get expandAnimationState(){return this._expandAnimationState}set expandAnimationState(a){a!==this._expandAnimationState&&(this._expandAnimationState=a)}toggleExpand(){this.expanded?this.collapseGroup():(this._navService.collapsed&&(this._navService.collapsed=!1),this.expandGroup())}ngAfterContentInit(){this._navService.collapsed&&this.expanded&&(this.wasExpanded=!0,this.expandAnimationState=Xh)}ngOnDestroy(){this._subscriptions.forEach(a=>a.unsubscribe()),this._navGroupRegistrationService.unregisterNavGroup()}}return c.\u0275fac=function(a){return new(a||c)(N(pa),N(mk),N(vk),N(yk),N(br))},c.\u0275cmp=Be({type:c,selectors:[["clr-vertical-nav-group"]],hostAttrs:[1,"nav-group"],hostVars:2,hostBindings:function(a,h){2&a&&st("is-expanded",h.expanded)},inputs:{groupLabel:["clrVerticalNavGroupLabel","groupLabel"],userExpandedInput:["clrVerticalNavGroupExpanded","userExpandedInput"]},outputs:{expandedChange:"clrVerticalNavGroupExpandedChange"},features:[Mt([pa,vk])],ngContentSelectors:VBe,decls:9,vars:5,consts:[[1,"nav-group-content"],["type","button",1,"nav-group-trigger",3,"click"],[1,"nav-group-text"],["shape","angle",1,"nav-group-trigger-icon"],[1,"nav-group-children"]],template:function(a,h){1&a&&(Et(kBe),U(0,"div",0),ke(1),U(2,"button",1),Me("click",function(){return h.toggleExpand()}),ke(3,1),U(4,"div",2),ke(5,2),H(),xe(6,"cds-icon",3),H()(),U(7,"div",4),Me("@clrExpand.done",function(f){return h.expandAnimationDone(f)}),ke(8,3),H()),2&a&&(B(2),Ne("aria-expanded",h.expanded)("aria-label",h.groupLabel),B(4),Ne("direction",h.expanded?"down":"right")("title",h.expanded?h.commonStrings.keys.collapse:h.commonStrings.keys.expand),B(1),G("@clrExpand",h.expandAnimationState))},dependencies:[Gr],encapsulation:2,data:{animation:[il("clrExpand",[PE(yT,gr({height:"*"})),PE(Xh,gr({height:0,"overflow-y":"hidden",visibility:"hidden"})),xs(`${yT} <=> ${Xh}`,fo("0.2s ease-in-out"))])]}}),c})(),Gu=(()=>{class c{}return c.\u0275fac=function(a){return new(a||c)},c.\u0275cmp=Be({type:c,selectors:[["clr-vertical-nav-group-children"]],ngContentSelectors:hn,decls:1,vars:0,template:function(a,h){1&a&&(Et(),ke(0))},encapsulation:2}),c})(),zu=(()=>{class c{constructor(a){this._verticalNavIconService=a,this._verticalNavIconService.registerIcon()}ngOnDestroy(){this._verticalNavIconService.unregisterIcon()}}return c.\u0275fac=function(a){return new(a||c)(N(gk))},c.\u0275dir=We({type:c,selectors:[["","clrVerticalNavIcon",""]],hostAttrs:[1,"nav-icon"]}),c})(),jUe=(()=>{class c{constructor(){Rr.addIcons(fv,Xq)}}return c.\u0275fac=function(a){return new(a||c)},c.\u0275mod=Ut({type:c}),c.\u0275inj=kt({imports:[[Nn,zr,Hl,xm],Hl,zr,xm]}),c})(),WUe=(()=>{class c{}return c.\u0275fac=function(a){return new(a||c)},c.\u0275mod=Ut({type:c}),c.\u0275inj=kt({imports:[MUe,NUe,HUe,jUe]}),c})(),_K=(()=>{class c{constructor(){Rr.addIcons(Eb)}}return c.\u0275fac=function(a){return new(a||c)},c.\u0275mod=Ut({type:c}),c.\u0275inj=kt({imports:[[Nn,zr,hM,xm],zr,xm]}),c})();const XUe={"top-left":{anchorPoint:nt.TOP_CENTER,popoverPoint:nt.BOTTOM_RIGHT,offsetY:-10,offsetX:0},"top-middle":{anchorPoint:nt.TOP_CENTER,popoverPoint:nt.BOTTOM_CENTER,offsetY:-10,offsetX:0},"top-right":{anchorPoint:nt.TOP_CENTER,popoverPoint:nt.BOTTOM_LEFT,offsetY:-10,offsetX:0},"right-top":{anchorPoint:nt.RIGHT_CENTER,popoverPoint:nt.LEFT_BOTTOM,offsetY:2,offsetX:14},"right-middle":{anchorPoint:nt.RIGHT_CENTER,popoverPoint:nt.LEFT_CENTER,offsetY:6,offsetX:14},"right-bottom":{anchorPoint:nt.RIGHT_CENTER,popoverPoint:nt.LEFT_TOP,offsetY:-1,offsetX:14},"bottom-right":{anchorPoint:nt.BOTTOM_CENTER,popoverPoint:nt.TOP_LEFT,offsetY:9,offsetX:-1},"bottom-middle":{anchorPoint:nt.BOTTOM_CENTER,popoverPoint:nt.TOP_CENTER,offsetY:9,offsetX:12},"bottom-left":{anchorPoint:nt.BOTTOM_CENTER,popoverPoint:nt.TOP_RIGHT,offsetY:9,offsetX:0},"left-bottom":{anchorPoint:nt.LEFT_CENTER,popoverPoint:nt.RIGHT_TOP,offsetY:0,offsetX:-14},"left-middle":{anchorPoint:nt.LEFT_CENTER,popoverPoint:nt.RIGHT_CENTER,offsetY:4,offsetX:-14},"left-top":{anchorPoint:nt.LEFT_CENTER,popoverPoint:nt.RIGHT_BOTTOM,offsetY:0,offsetX:-14},default:{anchorPoint:nt.RIGHT_CENTER,popoverPoint:nt.LEFT_CENTER,offsetY:6,offsetX:14}},qUe=["top-left","top-middle","top-right","right-top","right-middle","right-bottom","bottom-right","bottom-middle","bottom-left","left-bottom","left-middle","left-top"];let PM=(()=>{class c extends lk{constructor(a,h,d,f,m,g,y,v){if(super(a,h),this.commonStrings=d,this.signpostContentId=f,this.signpostIdService=m,this.signpostFocusManager=g,this.platformId=y,!h)throw new Error("clr-signpost-content should only be used inside of a clr-signpost");this.position="right-middle",this.closeOnOutsideClick=!0,this.signpostIdService.setId(f),this.document=v}close(){this.toggleService.open=!1}get position(){return this._position}set position(a){this.renderer.removeClass(this.el.nativeElement,this.position),this._position=a&&qUe.indexOf(a)>-1?a:"right-middle",this.renderer.addClass(this.el.nativeElement,this.position);const h=XUe[this.position];this.anchorPoint=h.anchorPoint,this.popoverPoint=h.popoverPoint,this.popoverOptions.offsetY=h.offsetY,this.popoverOptions.offsetX=h.offsetX}ngOnDestroy(){super.ngOnDestroy(),Dr(this.platformId)&&this.el.nativeElement.contains(this.document.activeElement)&&this.signpostFocusManager.focusTrigger()}}return c.\u0275fac=function(a){return new(a||c)(N(ti),N(Fv,8),N(br),N(cs),N(YF),N($F),N(wi),N(Er))},c.\u0275cmp=Be({type:c,selectors:[["clr-signpost-content"]],hostVars:3,hostBindings:function(a,h){2&a&&(au("id",h.signpostContentId),st("signpost-content",!0))},inputs:{position:["clrPosition","position"]},features:[Mt([mo]),Qt],ngContentSelectors:hn,decls:7,vars:3,consts:[[1,"signpost-wrap"],[1,"popover-pointer"],[1,"signpost-content-header"],["type","button",1,"signpost-action","close",3,"click"],["shape","window-close"],[1,"signpost-content-body"]],template:function(a,h){1&a&&(Et(),U(0,"div",0),xe(1,"div",1),U(2,"div",2)(3,"button",3),Me("click",function(){return h.close()}),xe(4,"cds-icon",4),H()(),U(5,"div",5),ke(6),H()()),2&a&&(B(3),Ne("aria-label",h.commonStrings.keys.signpostClose)("aria-controls",h.signpostContentId),B(1),Ne("title",h.commonStrings.keys.close))},dependencies:[Gr],encapsulation:2}),c})(),$Ue=(()=>{class c{constructor(){Rr.addIcons(Eb,qq)}}return c.\u0275fac=function(a){return new(a||c)},c.\u0275mod=Ut({type:c}),c.\u0275inj=kt({imports:[[Nn,zr,xm],Hl]}),c})(),JUe=(()=>{class c{}return c.\u0275fac=function(a){return new(a||c)},c.\u0275mod=Ut({type:c}),c.\u0275inj=kt({imports:[[Nn],Hl,zr]}),c})(),eGe=(()=>{class c{}return c.\u0275fac=function(a){return new(a||c)},c.\u0275mod=Ut({type:c}),c.\u0275inj=kt({imports:[ck,$Ue,JUe]}),c})(),tGe=(()=>{class c{}return c.\u0275fac=function(a){return new(a||c)},c.\u0275mod=Ut({type:c}),c.\u0275inj=kt({imports:[[Nn]]}),c})(),rGe=(()=>{class c{constructor(){Rr.addIcons(E2e,M2e,$q,D2e)}}return c.\u0275fac=function(a){return new(a||c)},c.\u0275mod=Ut({type:c}),c.\u0275inj=kt({imports:[[Nn,zr,eT],zr,eT]}),c})(),lGe=(()=>{class c{constructor(){Rr.addIcons($q)}}return c.\u0275fac=function(a){return new(a||c)},c.\u0275mod=Ut({type:c}),c.\u0275inj=kt({imports:[[Nn,_K,sK]]}),c})(),LM=(()=>{class c{}return c.\u0275fac=function(a){return new(a||c)},c.\u0275mod=Ut({type:c}),c.\u0275inj=kt({imports:[EUe,mUe,zr,_K,UF,Hl,hM,xm,q5e,N4e,TZ,WUe,eGe,lGe,AZ,A4e,eT,tGe,Kb,rGe]}),c})();function cGe(c,l){if(1&c&&(U(0,"clr-dg-column"),ye(1),H()),2&c){const a=l.$implicit;B(1),Zt(a.key)}}function uGe(c,l){if(1&c&&(U(0,"clr-dg-cell"),ye(1),H()),2&c){const a=l.$implicit;B(1),Zt(a.value)}}let Sk=(()=>{class c{constructor(){}ngOnInit(){}}return c.\u0275fac=function(a){return new(a||c)},c.\u0275cmp=Be({type:c,selectors:[["app-table-popup"]],inputs:{data:"data"},decls:6,vars:6,consts:[[4,"ngFor","ngForOf"]],template:function(a,h){1&a&&(U(0,"clr-datagrid"),le(1,cGe,2,1,"clr-dg-column",0),rs(2,"keyvalue"),U(3,"clr-dg-row"),le(4,uGe,2,1,"clr-dg-cell",0),rs(5,"keyvalue"),H()()),2&a&&(B(1),G("ngForOf",oo(2,2,h.data)),B(3),G("ngForOf",oo(5,4,h.data)))},dependencies:[vi,ek,TM,CM,hT,ik,MM,DM,EM,cT,zF,HF,nC]}),c})();const hGe=JSON.parse('{"type":"FeatureCollection","poperties":{"description":"This are a few test cities and locations collected with geojson.io"},"features":[{"type":"Feature","properties":{"name":"Munich"},"geometry":{"type":"Point","coordinates":[11.575899124145508,48.137740422322295]}},{"type":"Feature","properties":{"name":"Landshut"},"geometry":{"type":"Point","coordinates":[12.152938842773436,48.5370678355958]}},{"type":"Feature","properties":{"name":"Ulm"},"geometry":{"type":"Point","coordinates":[9.986572265624998,48.40003249610685]}},{"type":"Feature","properties":{"name":"Ingolstadt"},"geometry":{"type":"Point","coordinates":[11.42578125,48.75618876280552]}},{"type":"Feature","properties":{"name":"Paris"},"geometry":{"type":"Point","coordinates":[2.3291015625,48.83579746243093]}},{"type":"Feature","properties":{"name":"Dreux"},"geometry":{"type":"Point","coordinates":[1.3677978515625,48.73445537176822]}},{"type":"Feature","properties":{"name":"Meaux"},"geometry":{"type":"Point","coordinates":[2.8729248046875,48.95497369808868]}},{"type":"Feature","properties":{"name":"Rome"},"geometry":{"type":"Point","coordinates":[12.480468749999998,41.86956082699455]}},{"type":"Feature","properties":{"name":"Anzio"},"geometry":{"type":"Point","coordinates":[12.6287841796875,41.4509614012039]}},{"type":"Feature","properties":{"name":"Berlin"},"geometry":{"type":"Point","coordinates":[13.403320312499998,52.50953477032727]}},{"type":"Feature","properties":{"name":"Potsdam"},"geometry":{"type":"Point","coordinates":[13.058624267578125,52.40074312027673]}}]}');let OK=(()=>{class c{constructor(){}ngOnInit(){}}return c.\u0275fac=function(a){return new(a||c)},c.\u0275cmp=Be({type:c,selectors:[["app-example-layer-description"]],inputs:{layer:"layer",description:"description"},decls:9,vars:1,consts:[[1,"custom-description"]],template:function(a,h){1&a&&(U(0,"div",0),ye(1),U(2,"p"),ye(3," This description was styled with a dynamic component as the layer.description. "),H(),U(4,"p"),ye(5," Keep in mind that this breaks @dlr-eoc/services-ogc generateResourceFromLayer() for this layer when exporting a "),U(6,"b"),ye(7,"IOwsContext"),H(),ye(8,". "),H()()),2&a&&(B(1),mi(" ",h.description,". "))},styles:[".custom-description[_ngcontent-%COMP%]{word-break:normal;color:#0072a3}.custom-description[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{word-break:normal;color:#ffa52e}"]}),c})(),dGe=(()=>{class c{constructor(){this.legendImages=[]}ngOnInit(){this.legendImages=this.group.layers.filter(a=>a.legendImg&&"string"==typeof a.legendImg).map(a=>({url:a.legendImg})).reverse()}}return c.\u0275fac=function(a){return new(a||c)},c.\u0275cmp=Be({type:c,selectors:[["app-example-group-legend"]],inputs:{group:"group"},decls:6,vars:4,consts:[[1,"wrapper"],["width","256","height","256",1,"stacked",3,"src"],["usemap","#legendmap",3,"src"],["name","legendmap"],["shape","rect","coords","0,0,256,128","alt","top","title","Show full Image overlay","target","_blank",3,"href"],["shape","rect","coords","0,128,256,256","alt","below","title","Show full Image base","target","_blank",3,"href"]],template:function(a,h){1&a&&(U(0,"div",0),xe(1,"img",1)(2,"img",2),U(3,"map",3),xe(4,"area",4)(5,"area",5),H()()),2&a&&(B(1),G("src",h.legendImages[0].url,Wa),B(1),G("src",h.legendImages[1].url,Wa),B(2),G("href",h.legendImages[0].url,Wa),B(1),G("href",h.legendImages[1].url,Wa))},styles:[".wrapper[_ngcontent-%COMP%]{position:relative}.wrapper[_ngcontent-%COMP%]   .stacked[_ngcontent-%COMP%]{position:absolute;pointer-events:none}"]}),c})();class NK{}class FK{}class Hu{constructor(l){this.normalizedNames=new Map,this.lazyUpdate=null,l?this.lazyInit="string"==typeof l?()=>{this.headers=new Map,l.split("\n").forEach(a=>{const h=a.indexOf(":");if(h>0){const d=a.slice(0,h),f=d.toLowerCase(),m=a.slice(h+1).trim();this.maybeSetNormalizedName(d,f),this.headers.has(f)?this.headers.get(f).push(m):this.headers.set(f,[m])}})}:()=>{this.headers=new Map,Object.keys(l).forEach(a=>{let h=l[a];const d=a.toLowerCase();"string"==typeof h&&(h=[h]),h.length>0&&(this.headers.set(d,h),this.maybeSetNormalizedName(a,d))})}:this.headers=new Map}has(l){return this.init(),this.headers.has(l.toLowerCase())}get(l){this.init();const a=this.headers.get(l.toLowerCase());return a&&a.length>0?a[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(l){return this.init(),this.headers.get(l.toLowerCase())||null}append(l,a){return this.clone({name:l,value:a,op:"a"})}set(l,a){return this.clone({name:l,value:a,op:"s"})}delete(l,a){return this.clone({name:l,value:a,op:"d"})}maybeSetNormalizedName(l,a){this.normalizedNames.has(a)||this.normalizedNames.set(a,l)}init(){this.lazyInit&&(this.lazyInit instanceof Hu?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(l=>this.applyUpdate(l)),this.lazyUpdate=null))}copyFrom(l){l.init(),Array.from(l.headers.keys()).forEach(a=>{this.headers.set(a,l.headers.get(a)),this.normalizedNames.set(a,l.normalizedNames.get(a))})}clone(l){const a=new Hu;return a.lazyInit=this.lazyInit&&this.lazyInit instanceof Hu?this.lazyInit:this,a.lazyUpdate=(this.lazyUpdate||[]).concat([l]),a}applyUpdate(l){const a=l.name.toLowerCase();switch(l.op){case"a":case"s":let h=l.value;if("string"==typeof h&&(h=[h]),0===h.length)return;this.maybeSetNormalizedName(l.name,a);const d=("a"===l.op?this.headers.get(a):void 0)||[];d.push(...h),this.headers.set(a,d);break;case"d":const f=l.value;if(f){let m=this.headers.get(a);if(!m)return;m=m.filter(g=>-1===f.indexOf(g)),0===m.length?(this.headers.delete(a),this.normalizedNames.delete(a)):this.headers.set(a,m)}else this.headers.delete(a),this.normalizedNames.delete(a)}}forEach(l){this.init(),Array.from(this.normalizedNames.keys()).forEach(a=>l(this.normalizedNames.get(a),this.headers.get(a)))}}class fGe{encodeKey(l){return kK(l)}encodeValue(l){return kK(l)}decodeKey(l){return decodeURIComponent(l)}decodeValue(l){return decodeURIComponent(l)}}const mGe=/%(\d[a-f0-9])/gi,gGe={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function kK(c){return encodeURIComponent(c).replace(mGe,(l,a)=>gGe[a]??l)}function OM(c){return`${c}`}class Ff{constructor(l={}){if(this.updates=null,this.cloneFrom=null,this.encoder=l.encoder||new fGe,l.fromString){if(l.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function pGe(c,l){const a=new Map;return c.length>0&&c.replace(/^\?/,"").split("&").forEach(d=>{const f=d.indexOf("="),[m,g]=-1==f?[l.decodeKey(d),""]:[l.decodeKey(d.slice(0,f)),l.decodeValue(d.slice(f+1))],y=a.get(m)||[];y.push(g),a.set(m,y)}),a}(l.fromString,this.encoder)}else l.fromObject?(this.map=new Map,Object.keys(l.fromObject).forEach(a=>{const h=l.fromObject[a],d=Array.isArray(h)?h.map(OM):[OM(h)];this.map.set(a,d)})):this.map=null}has(l){return this.init(),this.map.has(l)}get(l){this.init();const a=this.map.get(l);return a?a[0]:null}getAll(l){return this.init(),this.map.get(l)||null}keys(){return this.init(),Array.from(this.map.keys())}append(l,a){return this.clone({param:l,value:a,op:"a"})}appendAll(l){const a=[];return Object.keys(l).forEach(h=>{const d=l[h];Array.isArray(d)?d.forEach(f=>{a.push({param:h,value:f,op:"a"})}):a.push({param:h,value:d,op:"a"})}),this.clone(a)}set(l,a){return this.clone({param:l,value:a,op:"s"})}delete(l,a){return this.clone({param:l,value:a,op:"d"})}toString(){return this.init(),this.keys().map(l=>{const a=this.encoder.encodeKey(l);return this.map.get(l).map(h=>a+"="+this.encoder.encodeValue(h)).join("&")}).filter(l=>""!==l).join("&")}clone(l){const a=new Ff({encoder:this.encoder});return a.cloneFrom=this.cloneFrom||this,a.updates=(this.updates||[]).concat(l),a}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(l=>this.map.set(l,this.cloneFrom.map.get(l))),this.updates.forEach(l=>{switch(l.op){case"a":case"s":const a=("a"===l.op?this.map.get(l.param):void 0)||[];a.push(OM(l.value)),this.map.set(l.param,a);break;case"d":if(void 0===l.value){this.map.delete(l.param);break}{let h=this.map.get(l.param)||[];const d=h.indexOf(OM(l.value));-1!==d&&h.splice(d,1),h.length>0?this.map.set(l.param,h):this.map.delete(l.param)}}}),this.cloneFrom=this.updates=null)}}class yGe{constructor(){this.map=new Map}set(l,a){return this.map.set(l,a),this}get(l){return this.map.has(l)||this.map.set(l,l.defaultValue()),this.map.get(l)}delete(l){return this.map.delete(l),this}has(l){return this.map.has(l)}keys(){return this.map.keys()}}function VK(c){return typeof ArrayBuffer<"u"&&c instanceof ArrayBuffer}function BK(c){return typeof Blob<"u"&&c instanceof Blob}function UK(c){return typeof FormData<"u"&&c instanceof FormData}class ST{constructor(l,a,h,d){let f;if(this.url=a,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=l.toUpperCase(),function vGe(c){switch(c){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||d?(this.body=void 0!==h?h:null,f=d):f=h,f&&(this.reportProgress=!!f.reportProgress,this.withCredentials=!!f.withCredentials,f.responseType&&(this.responseType=f.responseType),f.headers&&(this.headers=f.headers),f.context&&(this.context=f.context),f.params&&(this.params=f.params)),this.headers||(this.headers=new Hu),this.context||(this.context=new yGe),this.params){const m=this.params.toString();if(0===m.length)this.urlWithParams=a;else{const g=a.indexOf("?");this.urlWithParams=a+(-1===g?"?":g<a.length-1?"&":"")+m}}else this.params=new Ff,this.urlWithParams=a}serializeBody(){return null===this.body?null:VK(this.body)||BK(this.body)||UK(this.body)||function _Ge(c){return typeof URLSearchParams<"u"&&c instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof Ff?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||UK(this.body)?null:BK(this.body)?this.body.type||null:VK(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Ff?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(l={}){const a=l.method||this.method,h=l.url||this.url,d=l.responseType||this.responseType,f=void 0!==l.body?l.body:this.body,m=void 0!==l.withCredentials?l.withCredentials:this.withCredentials,g=void 0!==l.reportProgress?l.reportProgress:this.reportProgress;let y=l.headers||this.headers,v=l.params||this.params;const _=l.context??this.context;return void 0!==l.setHeaders&&(y=Object.keys(l.setHeaders).reduce((S,b)=>S.set(b,l.setHeaders[b]),y)),l.setParams&&(v=Object.keys(l.setParams).reduce((S,b)=>S.set(b,l.setParams[b]),v)),new ST(a,h,f,{params:v,headers:y,context:_,reportProgress:g,responseType:d,withCredentials:m})}}var Es=(()=>((Es=Es||{})[Es.Sent=0]="Sent",Es[Es.UploadProgress=1]="UploadProgress",Es[Es.ResponseHeader=2]="ResponseHeader",Es[Es.DownloadProgress=3]="DownloadProgress",Es[Es.Response=4]="Response",Es[Es.User=5]="User",Es))();class bk{constructor(l,a=200,h="OK"){this.headers=l.headers||new Hu,this.status=void 0!==l.status?l.status:a,this.statusText=l.statusText||h,this.url=l.url||null,this.ok=this.status>=200&&this.status<300}}class Tk extends bk{constructor(l={}){super(l),this.type=Es.ResponseHeader}clone(l={}){return new Tk({headers:l.headers||this.headers,status:void 0!==l.status?l.status:this.status,statusText:l.statusText||this.statusText,url:l.url||this.url||void 0})}}class NM extends bk{constructor(l={}){super(l),this.type=Es.Response,this.body=void 0!==l.body?l.body:null}clone(l={}){return new NM({body:void 0!==l.body?l.body:this.body,headers:l.headers||this.headers,status:void 0!==l.status?l.status:this.status,statusText:l.statusText||this.statusText,url:l.url||this.url||void 0})}}class GK extends bk{constructor(l){super(l,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${l.url||"(unknown url)"}`:`Http failure response for ${l.url||"(unknown url)"}: ${l.status} ${l.statusText}`,this.error=l.error||null}}function wk(c,l){return{body:l,headers:c.headers,context:c.context,observe:c.observe,params:c.params,reportProgress:c.reportProgress,responseType:c.responseType,withCredentials:c.withCredentials}}let qh=(()=>{class c{constructor(a){this.handler=a}request(a,h,d={}){let f;if(a instanceof ST)f=a;else{let y,v;y=d.headers instanceof Hu?d.headers:new Hu(d.headers),d.params&&(v=d.params instanceof Ff?d.params:new Ff({fromObject:d.params})),f=new ST(a,h,void 0!==d.body?d.body:null,{headers:y,context:d.context,params:v,reportProgress:d.reportProgress,responseType:d.responseType||"json",withCredentials:d.withCredentials})}const m=St(f).pipe(Ad(y=>this.handler.handle(y)));if(a instanceof ST||"events"===d.observe)return m;const g=m.pipe(qr(y=>y instanceof NM));switch(d.observe||"body"){case"body":switch(f.responseType){case"arraybuffer":return g.pipe(ve(y=>{if(null!==y.body&&!(y.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return y.body}));case"blob":return g.pipe(ve(y=>{if(null!==y.body&&!(y.body instanceof Blob))throw new Error("Response is not a Blob.");return y.body}));case"text":return g.pipe(ve(y=>{if(null!==y.body&&"string"!=typeof y.body)throw new Error("Response is not a string.");return y.body}));default:return g.pipe(ve(y=>y.body))}case"response":return g;default:throw new Error(`Unreachable: unhandled observe type ${d.observe}}`)}}delete(a,h={}){return this.request("DELETE",a,h)}get(a,h={}){return this.request("GET",a,h)}head(a,h={}){return this.request("HEAD",a,h)}jsonp(a,h){return this.request("JSONP",a,{params:(new Ff).append(h,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(a,h={}){return this.request("OPTIONS",a,h)}patch(a,h,d={}){return this.request("PATCH",a,wk(d,h))}post(a,h,d={}){return this.request("POST",a,wk(d,h))}put(a,h,d={}){return this.request("PUT",a,wk(d,h))}}return c.\u0275fac=function(a){return new(a||c)(Ae(NK))},c.\u0275prov=Oe({token:c,factory:c.\u0275fac}),c})();class zK{constructor(l,a){this.next=l,this.interceptor=a}handle(l){return this.interceptor.intercept(l,this.next)}}const HK=new Vt("HTTP_INTERCEPTORS");let SGe=(()=>{class c{intercept(a,h){return h.handle(a)}}return c.\u0275fac=function(a){return new(a||c)},c.\u0275prov=Oe({token:c,factory:c.\u0275fac}),c})();const bGe=/^\)\]\}',?\n/;let jK=(()=>{class c{constructor(a){this.xhrFactory=a}handle(a){if("JSONP"===a.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new wt(h=>{const d=this.xhrFactory.build();if(d.open(a.method,a.urlWithParams),a.withCredentials&&(d.withCredentials=!0),a.headers.forEach((T,x)=>d.setRequestHeader(T,x.join(","))),a.headers.has("Accept")||d.setRequestHeader("Accept","application/json, text/plain, */*"),!a.headers.has("Content-Type")){const T=a.detectContentTypeHeader();null!==T&&d.setRequestHeader("Content-Type",T)}if(a.responseType){const T=a.responseType.toLowerCase();d.responseType="json"!==T?T:"text"}const f=a.serializeBody();let m=null;const g=()=>{if(null!==m)return m;const T=d.statusText||"OK",x=new Hu(d.getAllResponseHeaders()),E=function TGe(c){return"responseURL"in c&&c.responseURL?c.responseURL:/^X-Request-URL:/m.test(c.getAllResponseHeaders())?c.getResponseHeader("X-Request-URL"):null}(d)||a.url;return m=new Tk({headers:x,status:d.status,statusText:T,url:E}),m},y=()=>{let{headers:T,status:x,statusText:E,url:D}=g(),I=null;204!==x&&(I=typeof d.response>"u"?d.responseText:d.response),0===x&&(x=I?200:0);let M=x>=200&&x<300;if("json"===a.responseType&&"string"==typeof I){const L=I;I=I.replace(bGe,"");try{I=""!==I?JSON.parse(I):null}catch(P){I=L,M&&(M=!1,I={error:P,text:I})}}M?(h.next(new NM({body:I,headers:T,status:x,statusText:E,url:D||void 0})),h.complete()):h.error(new GK({error:I,headers:T,status:x,statusText:E,url:D||void 0}))},v=T=>{const{url:x}=g(),E=new GK({error:T,status:d.status||0,statusText:d.statusText||"Unknown Error",url:x||void 0});h.error(E)};let _=!1;const S=T=>{_||(h.next(g()),_=!0);let x={type:Es.DownloadProgress,loaded:T.loaded};T.lengthComputable&&(x.total=T.total),"text"===a.responseType&&!!d.responseText&&(x.partialText=d.responseText),h.next(x)},b=T=>{let x={type:Es.UploadProgress,loaded:T.loaded};T.lengthComputable&&(x.total=T.total),h.next(x)};return d.addEventListener("load",y),d.addEventListener("error",v),d.addEventListener("timeout",v),d.addEventListener("abort",v),a.reportProgress&&(d.addEventListener("progress",S),null!==f&&d.upload&&d.upload.addEventListener("progress",b)),d.send(f),h.next({type:Es.Sent}),()=>{d.removeEventListener("error",v),d.removeEventListener("abort",v),d.removeEventListener("load",y),d.removeEventListener("timeout",v),a.reportProgress&&(d.removeEventListener("progress",S),null!==f&&d.upload&&d.upload.removeEventListener("progress",b)),d.readyState!==d.DONE&&d.abort()}})}}return c.\u0275fac=function(a){return new(a||c)(Ae(t6))},c.\u0275prov=Oe({token:c,factory:c.\u0275fac}),c})();const Ck=new Vt("XSRF_COOKIE_NAME"),xk=new Vt("XSRF_HEADER_NAME");class WK{}let wGe=(()=>{class c{constructor(a,h,d){this.doc=a,this.platform=h,this.cookieName=d,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const a=this.doc.cookie||"";return a!==this.lastCookieString&&(this.parseCount++,this.lastToken=W8(a,this.cookieName),this.lastCookieString=a),this.lastToken}}return c.\u0275fac=function(a){return new(a||c)(Ae(Er),Ae(wi),Ae(Ck))},c.\u0275prov=Oe({token:c,factory:c.\u0275fac}),c})(),Ek=(()=>{class c{constructor(a,h){this.tokenService=a,this.headerName=h}intercept(a,h){const d=a.url.toLowerCase();if("GET"===a.method||"HEAD"===a.method||d.startsWith("http://")||d.startsWith("https://"))return h.handle(a);const f=this.tokenService.getToken();return null!==f&&!a.headers.has(this.headerName)&&(a=a.clone({headers:a.headers.set(this.headerName,f)})),h.handle(a)}}return c.\u0275fac=function(a){return new(a||c)(Ae(WK),Ae(xk))},c.\u0275prov=Oe({token:c,factory:c.\u0275fac}),c})(),CGe=(()=>{class c{constructor(a,h){this.backend=a,this.injector=h,this.chain=null}handle(a){if(null===this.chain){const h=this.injector.get(HK,[]);this.chain=h.reduceRight((d,f)=>new zK(d,f),this.backend)}return this.chain.handle(a)}}return c.\u0275fac=function(a){return new(a||c)(Ae(FK),Ae(ti))},c.\u0275prov=Oe({token:c,factory:c.\u0275fac}),c})(),xGe=(()=>{class c{static disable(){return{ngModule:c,providers:[{provide:Ek,useClass:SGe}]}}static withOptions(a={}){return{ngModule:c,providers:[a.cookieName?{provide:Ck,useValue:a.cookieName}:[],a.headerName?{provide:xk,useValue:a.headerName}:[]]}}}return c.\u0275fac=function(a){return new(a||c)},c.\u0275mod=Ut({type:c}),c.\u0275inj=kt({providers:[Ek,{provide:HK,useExisting:Ek,multi:!0},{provide:WK,useClass:wGe},{provide:Ck,useValue:"XSRF-TOKEN"},{provide:xk,useValue:"X-XSRF-TOKEN"}]}),c})(),EGe=(()=>{class c{}return c.\u0275fac=function(a){return new(a||c)},c.\u0275mod=Ut({type:c}),c.\u0275inj=kt({providers:[qh,{provide:NK,useClass:CGe},jK,{provide:FK,useExisting:jK}],imports:[xGe.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]}),c})();var XK=ct(394),qK=ct(856),$K=ct(723),MGe=ct(955),DGe=ct(535),AGe=ct(578),IGe=ct(788);const RGe=qK.XLink_1_0,PGe=$K.OWS_1_1_0,LGe=MGe.SMIL_2_0,OGe=DGe.SMIL_2_0_Language,NGe=AGe.GML_3_1_1,FGe=IGe.WMTS_1_0;let YK=(()=>{class c{constructor(a){this.http=a;const h=new XK.Jsonix.Context([LGe,OGe,NGe,RGe,PGe,FGe]);this.xmlunmarshaller=h.createUnmarshaller(),this.xmlmarshaller=h.createMarshaller()}getCapabilities(a,h="1.1.0"){const d=`${a}?SERVICE=WMTS&REQUEST=GetCapabilities&VERSION=${h}`,f=new Hu({"Content-Type":"text/xml",Accept:"text/xml, application/xml"});return this.http.get(d,{headers:f,responseType:"text"}).pipe(ve(m=>this.xmlunmarshaller.unmarshalString(m)))}}return c.\u0275fac=function(a){return new(a||c)(Ae(qh))},c.\u0275prov=Oe({token:c,factory:c.\u0275fac,providedIn:"root"}),c})();var kGe=ct(530),VGe=ct(496),BGe=ct(815),UGe=ct(10),GGe=ct(731);function Mk(c){return!Ee(c)&&c-parseFloat(c)+1>=0}function ZK(c=0,l,a){let h=-1;return Mk(l)?h=Number(l)<1?1:Number(l):Se(l)&&(a=l),Se(a)||(a=pv),new wt(d=>{const f=Mk(c)?c:+c-a.now();return a.schedule(zGe,f,{index:0,period:h,subscriber:d})})}function zGe(c){const{index:l,period:a,subscriber:h}=c;if(h.next(l),!h.closed){if(-1===a)return h.complete();c.index=l+1,this.schedule(c,a)}}class jGe{constructor(l,a){this.notifier=l,this.source=a}call(l,a){return a.subscribe(new WGe(l,this.notifier,this.source))}}class WGe extends cg{constructor(l,a,h){super(l),this.notifier=a,this.source=h}error(l){if(!this.isStopped){let a=this.errors,h=this.retries,d=this.retriesSubscription;if(h)this.errors=void 0,this.retriesSubscription=void 0;else{a=new Ke;try{const{notifier:f}=this;h=f(a)}catch(f){return super.error(f)}d=ug(h,new lg(this))}this._unsubscribeAndRecycle(),this.errors=a,this.retries=h,this.retriesSubscription=d,a.next(l)}}_unsubscribe(){const{errors:l,retriesSubscription:a}=this;l&&(l.unsubscribe(),this.errors=void 0),a&&(a.unsubscribe(),this.retriesSubscription=void 0),this.retries=void 0}notifyNext(){const{_unsubscribe:l}=this;this._unsubscribe=null,this._unsubscribeAndRecycle(),this._unsubscribe=l,this.source.subscribe(this)}}class $Ge{constructor(l,a){this.delay=l,this.scheduler=a}call(l,a){return a.subscribe(new Dk(l,this.delay,this.scheduler))}}class Dk extends ee{constructor(l,a,h){super(l),this.delay=a,this.scheduler=h,this.queue=[],this.active=!1,this.errored=!1}static dispatch(l){const a=l.source,h=a.queue,d=l.scheduler,f=l.destination;for(;h.length>0&&h[0].time-d.now()<=0;)h.shift().notification.observe(f);if(h.length>0){const m=Math.max(0,h[0].time-d.now());this.schedule(l,m)}else this.unsubscribe(),a.active=!1}_schedule(l){this.active=!0,this.destination.add(l.schedule(Dk.dispatch,this.delay,{source:this,destination:this.destination,scheduler:l}))}scheduleNotification(l){if(!0===this.errored)return;const a=this.scheduler,h=new YGe(a.now()+this.delay,l);this.queue.push(h),!1===this.active&&this._schedule(a)}_next(l){this.scheduleNotification(Ra.createNext(l))}_error(l){this.errored=!0,this.queue=[],this.destination.error(l),this.unsubscribe()}_complete(){this.scheduleNotification(Ra.createComplete()),this.unsubscribe()}}class YGe{constructor(l,a){this.time=l,this.notification=a}}function Ak(c,l=3){let a=1;return h=>h.pipe(function HGe(c){return l=>l.lift(new jGe(c,l))}(d=>d.pipe(function qGe(c,l=pv){const h=function XGe(c){return c instanceof Date&&!isNaN(+c)}(c)?+c-l.now():Math.abs(c);return d=>d.lift(new $Ge(h,l))}(c),gs(f=>{if(f.status&&400===f.status)throw f;if(a<=l)return console.log("http-error. Retrying ..."),a+=1,St(f);throw console.log(`Persistent http-errors after ${a} attempts. Giving up.`),f}))))}class KGe{set(l,a){return St(!0)}get(l){return St(null)}}const KK=qK.XLink_1_0,QGe=$K.OWS_1_1_0,JGe=BGe.OWS_2_0,eze=UGe.WPS_1_0_0,tze=GGe.WPS_2_0,QK=XK.Jsonix;var rze=function(){function c(){}return c.prototype.read=function(l){if(l){if("string"==typeof l){var a=_f(l);return this.readFromDocument(a)}return vf(l)?this.readFromDocument(l):this.readFromNode(l)}return null},c.prototype.readFromDocument=function(l){for(var a=l.firstChild;a;a=a.nextSibling)if(a.nodeType==Node.ELEMENT_NODE)return this.readFromNode(a);return null},c.prototype.readFromNode=function(l){},c}();const ize=rze;function Ik(c){return c.getAttributeNS("http://www.w3.org/1999/xlink","href")}var oze=function(){var c=function(l,a){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,d){h.__proto__=d}||function(h,d){for(var f in d)Object.prototype.hasOwnProperty.call(d,f)&&(h[f]=d[f])})(l,a)};return function(l,a){if("function"!=typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");function h(){this.constructor=l}c(l,a),l.prototype=null===a?Object.create(a):(h.prototype=a.prototype,new h)}}(),go=[null,"http://www.opengis.net/wms"],aze=jt(go,{Service:tt(function Dze(c,l){return Wn({},uze,c,l)}),Capability:tt(function Mze(c,l){return Wn({},lze,c,l)})}),lze=jt(go,{Request:tt(function Nze(c,l){return Wn({},yze,c,l)}),Exception:tt(function Pze(c,l){return Wn([],pze,c,l)}),Layer:tt(function Lze(c,l){var a=Wn({},JK,c,l);return void 0===a.Layer?Object.assign(a,eQ(c,l)):a})}),cze=function(c){function l(){var a=c.call(this)||this;return a.version=void 0,a}return oze(l,c),l.prototype.readFromNode=function(a){return this.version=a.getAttribute("version").trim(),Wn({version:this.version},aze,a,[])||null},l}(ize),uze=jt(go,{Name:tt(Bn),Title:tt(Bn),Abstract:tt(Bn),KeywordList:tt(nQ),OnlineResource:tt(Ik),ContactInformation:tt(function Aze(c,l){return Wn({},hze,c,l)}),Fees:tt(Bn),AccessConstraints:tt(Bn),LayerLimit:tt(HO),MaxWidth:tt(HO),MaxHeight:tt(HO)}),hze=jt(go,{ContactPersonPrimary:tt(function Ize(c,l){return Wn({},dze,c,l)}),ContactPosition:tt(Bn),ContactAddress:tt(function Rze(c,l){return Wn({},fze,c,l)}),ContactVoiceTelephone:tt(Bn),ContactFacsimileTelephone:tt(Bn),ContactElectronicMailAddress:tt(Bn)}),dze=jt(go,{ContactPerson:tt(Bn),ContactOrganization:tt(Bn)}),fze=jt(go,{AddressType:tt(Bn),Address:tt(Bn),City:tt(Bn),StateOrProvince:tt(Bn),PostCode:tt(Bn),Country:tt(Bn)}),pze=jt(go,{Format:Eu(Bn)}),JK=jt(go,{Name:tt(Bn),Title:tt(Bn),Abstract:tt(Bn),KeywordList:tt(nQ),CRS:el(Bn),EX_GeographicBoundingBox:tt(function Eze(c,l){var a=Wn({},gze,c,l);if(a){var h=a.westBoundLongitude,d=a.southBoundLatitude,f=a.eastBoundLongitude,m=a.northBoundLatitude;if(void 0!==h&&void 0!==d&&void 0!==f&&void 0!==m)return[h,d,f,m]}}),BoundingBox:el(function xze(c,l){var a=[Ih(c.getAttribute("minx")),Ih(c.getAttribute("miny")),Ih(c.getAttribute("maxx")),Ih(c.getAttribute("maxy"))],h=[Ih(c.getAttribute("resx")),Ih(c.getAttribute("resy"))];return{crs:c.getAttribute("CRS"),extent:a,res:h}}),Dimension:el(function Oze(c,l){return{name:c.getAttribute("name"),units:c.getAttribute("units"),unitSymbol:c.getAttribute("unitSymbol"),default:c.getAttribute("default"),multipleValues:om(c.getAttribute("multipleValues")),nearestValue:om(c.getAttribute("nearestValue")),current:om(c.getAttribute("current")),values:Bn(c)}}),Attribution:tt(function Cze(c,l){return Wn({},mze,c,l)}),AuthorityURL:el(function Vze(c,l){var a=$h(c,l);if(a)return a.name=c.getAttribute("name"),a}),Identifier:el(Bn),MetadataURL:el(function Bze(c,l){var a=$h(c,l);if(a)return a.type=c.getAttribute("type"),a}),DataURL:el($h),FeatureListURL:el($h),Style:el(function Uze(c,l){return Wn({},bze,c,l)}),MinScaleDenominator:tt(Gi),MaxScaleDenominator:tt(Gi),Layer:el(eQ)}),mze=jt(go,{Title:tt(Bn),OnlineResource:tt(Ik),LogoURL:tt(tQ)}),gze=jt(go,{westBoundLongitude:tt(Gi),eastBoundLongitude:tt(Gi),southBoundLatitude:tt(Gi),northBoundLatitude:tt(Gi)}),yze=jt(go,{GetCapabilities:tt(Rk),GetMap:tt(Rk),GetFeatureInfo:tt(Rk)}),vze=jt(go,{Format:el(Bn),DCPType:el(function Fze(c,l){return Wn({},_ze,c,l)})}),_ze=jt(go,{HTTP:tt(function kze(c,l){return Wn({},Sze,c,l)})}),Sze=jt(go,{Get:tt($h),Post:tt($h)}),bze=jt(go,{Name:tt(Bn),Title:tt(Bn),Abstract:tt(Bn),LegendURL:el(tQ),StyleSheetURL:tt($h),StyleURL:tt($h)}),Tze=jt(go,{Format:tt(Bn),OnlineResource:tt(Ik)}),wze=jt(go,{Keyword:Eu(Bn)});function eQ(c,l){var a=l[l.length-1],h=Wn({},JK,c,l);if(h){var d=om(c.getAttribute("queryable"));void 0===d&&(d=a.queryable),h.queryable=void 0!==d&&d;var f=$x(c.getAttribute("cascaded"));void 0===f&&(f=a.cascaded),h.cascaded=f;var m=om(c.getAttribute("opaque"));void 0===m&&(m=a.opaque),h.opaque=void 0!==m&&m;var g=om(c.getAttribute("noSubsets"));void 0===g&&(g=a.noSubsets),h.noSubsets=void 0!==g&&g;var y=Ih(c.getAttribute("fixedWidth"));y||(y=a.fixedWidth),h.fixedWidth=y;var v=Ih(c.getAttribute("fixedHeight"));return v||(v=a.fixedHeight),h.fixedHeight=v,["Style","CRS","AuthorityURL"].forEach(function(b){b in a&&(h[b]=(h[b]||[]).concat(a[b]))}),["EX_GeographicBoundingBox","BoundingBox","Dimension","Attribution","MinScaleDenominator","MaxScaleDenominator"].forEach(function(b){b in h||(h[b]=a[b])}),h}}function $h(c,l){return Wn({},Tze,c,l)}function Rk(c,l){return Wn({},vze,c,l)}function tQ(c,l){var a=$h(c,l);if(a){var h=[$x(c.getAttribute("width")),$x(c.getAttribute("height"))];return a.size=h,a}}function nQ(c,l){return Wn([],wze,c,l)}const Gze=cze;let rQ=(()=>{class c extends class zze{constructor(l){this.http=l,this.parser=new Gze}getCapabilities(l,a="1.1.0"){return this.http.get(`${l}?SERVICE=WMS&REQUEST=GetCapabilities&VERSION=${a}`,{headers:{"Content-Type":"text/xml",Accept:"text/xml, application/xml"},responseType:"text"}).pipe(ve(d=>this.parser.read(d)))}getLayerFromCapabilities(l,a){return this.getLayerFromCapabilitiesLayer(l,a.Capability.Layer)}getLayerFromCapabilitiesLayer(l,a){const h=a;return h?h.Name&&h.Name===l?h:h.Layer&&Array.isArray(h.Layer)?h.Layer.find(d=>this.getLayerFromCapabilitiesLayer(l,d)):h.Layer&&h.Layer.Name&&h.Layer.Name===l?h.Layer:void 0:null}getTimeDimensionFromLayer(l){return l.Dimension?.find(a=>"time"===a.name)}}{constructor(a){super(a)}}return c.\u0275fac=function(a){return new(a||c)(Ae(qh))},c.\u0275prov=Oe({token:c,factory:c.\u0275fac}),c})(),Hze=(()=>{class c extends class nze{constructor(l="1.0.0",a,h){let d;if(this.webclient=a,this.cache=new KGe,this.version=l,h&&(this.cache=h),"1.0.0"===this.version)this.wpsmarshaller=new kGe.m,d=new QK.Context([KK,QGe,eze]);else{if("2.0.0"!==this.version)throw new Error("You entered a WPS version other than 1.0.0 or 2.0.0.");this.wpsmarshaller=new VGe.Y,d=new QK.Context([KK,JGe,tze])}this.xmlunmarshaller=d.createUnmarshaller(),this.xmlmarshaller=d.createMarshaller()}getCapabilities(l){const a=this.wpsmarshaller.getCapabilitiesUrl(l);return this.getRaw(a).pipe(ve(h=>{const d=this.xmlunmarshaller.unmarshalString(h);return this.wpsmarshaller.unmarshalCapabilities(d.value)}))}describeProcess(l,a){const h=this.wpsmarshaller.getDescribeProcessUrl(l,a);return this.getRaw(h).pipe(ve(d=>{const f=this.xmlunmarshaller.unmarshalString(d);return this.wpsmarshaller.unmarshalProcessDescription(f.value)}))}executeAsync(l,a,h,d,f=1e3,m,g){const v=this.executeAsyncBasic(l,a,h,d).pipe(gs(_=>function ZGe(c,l,a,h=1e3){a&&a(null);const m=LE(c.pipe(Li(g=>{a&&a(g)})),ZK(h)).pipe(ve(g=>g[0])).pipe(gs(g=>l(g)?St(g):m));return m}(this.getNextState(_,l,a,h,d),T=>{if("Failed"===T.status)throw new Error(`Error during execution of process ${a}: `+T.statusLocation);return"Succeeded"===T.status},m,f)),gs(_=>this.fetchResults(_,l,a,h,d,g)),Li(_=>{for(const S of _)if("error"===S.description.type)throw console.log("server responded with 200, but body contained an error-result: ",S),new Error(S.value)}));return this.cachedQuery(l,a,h,d,v)}cachedQuery(l,a,h,d,f){return this.cache.get({url:l,processId:a,inputs:h,outputs:d}).pipe(wa(g=>g?St(g):f.pipe(Li(y=>{this.cache.set({url:l,processId:a,inputs:h,outputs:d},y).subscribe(v=>{console.log("set data in cache",v)})}))))}getNextState(l,a,h,d,f){let m;if("1.0.0"===this.version){if(!l.statusLocation)throw Error("No status location");m=this.getRaw(l.statusLocation)}else{if("2.0.0"!==this.version)throw new Error(`'GetStatus' has not yet been implemented for this WPS-Version (${this.version}).`);{if(!l.jobID)throw Error("No job-Id");const y=this.wpsmarshaller.marshallGetStatusBody(a,h,l.jobID),v=this.xmlmarshaller.marshalString(y);m=this.postRaw(a,v)}}return m.pipe(Ak(2e3,2),ve(y=>{const v=this.xmlunmarshaller.unmarshalString(y);return this.wpsmarshaller.unmarshalGetStateResponse(v,a,h,d,f)}))}fetchResults(l,a,h,d,f,m){if(l.results){let g;return g=m?m(l.results):this.wpsmarshaller.unmarshalSyncExecuteResponse(l.results,a,h,d,f),St(g)}{if(!l.jobID)throw new Error("You want me to get a result, but I can't find a jobId. I don't know what to do now!");const g=this.wpsmarshaller.marshallGetResultBody(a,h,l.jobID),y=this.xmlmarshaller.marshalString(g);return this.postRaw(a,y).pipe(ve(v=>{const _=this.xmlunmarshaller.unmarshalString(v);let S;return S=m?m(_):this.wpsmarshaller.unmarshalSyncExecuteResponse(_,a,h,d,f),S}))}}executeAsyncBasic(l,a,h,d){const f=this.wpsmarshaller.executeUrl(l,a),m=this.wpsmarshaller.marshalExecBody(a,h,d,!0),g=this.xmlmarshaller.marshalString(m);return this.postRaw(f,g).pipe(ve(y=>{const v=this.xmlunmarshaller.unmarshalString(y);return this.wpsmarshaller.unmarshalAsyncExecuteResponse(v,l,a,h,d)}))}execute(l,a,h,d,f){const m=this.wpsmarshaller.executeUrl(l,a),g=this.wpsmarshaller.marshalExecBody(a,h,d,!1),y=this.xmlmarshaller.marshalString(g);return this.postRaw(m,y).pipe(ve(v=>{const _=this.xmlunmarshaller.unmarshalString(v);return f?f(_):this.wpsmarshaller.unmarshalSyncExecuteResponse(_,l,a,h,d)}))}dismiss(l,a,h){const d=this.wpsmarshaller.dismissUrl(l,a,h),f=this.wpsmarshaller.marshalDismissBody(h),m=this.xmlmarshaller.marshalString(f);return this.postRaw(d,m).pipe(ve(g=>{const y=this.xmlunmarshaller.unmarshalString(g);return this.wpsmarshaller.unmarshalDismissResponse(y,l,a)}))}postRaw(l,a){return this.webclient.post(l,a,{headers:{"Content-Type":"text/xml",Accept:"text/xml, application/xml"},responseType:"text"}).pipe(Ak(2e3,2),Li(d=>{this.parseResponseForErrors(l,d)}),ZB())}getRaw(l){return this.webclient.get(l,{headers:{Accept:"text/xml, application/xml"},responseType:"text"}).pipe(Ak(2e3,2),Li(h=>{this.parseResponseForErrors(l,h)}))}parseResponseForErrors(l,a){if(a.match("<title>404 Not Found</title>")||a.match("ows:ExceptionReport"))throw new Error(`From ${l}:  `+a)}setCache(l){this.cache=l}}{constructor(a="1.0.0",h,d){super(a,h,d),this.webClient=h}}return c.\u0275fac=function(a){return new(a||c)(Ae("WPS_VERSION"),Ae(qh),Ae("WPS_CACHE"))},c.\u0275prov=Oe({token:c,factory:c.\u0275fac}),c})();const iQ="http://www.opengis.net/spec/owc-geojson/1.0/req/wms",sQ="http://www.opengis.net/spec/owc-geojson/1.0/req/wfs",oQ="http://www.opengis.net/spec/owc-geojson/1.0/req/wmts",aQ="http://www.opengis.net/spec/owc-geojson/1.0/req/kml",lQ="http://www.opengis.net/spec/owc-geojson/1.0/req/geojson",cQ="http://www.opengis.net/spec/owc-geojson/1.0/req/xyz",uQ="http://www.opengis.net/spec/owc-geojson/1.0/req/tms",Pk="GetMap",FM="GetFeature",Lk="GetTile",bT="REST",Ok="GetCapabilities",hQ="GetFeatureInfo";function Fk(c){return"type"in c}function kk(c){return c===iQ}function dQ(c){return c===sQ}function Vk(c){return c===oQ}function fQ(c){return c===cQ}function kM(c){return c===uQ}class Im extends Error{}class e8e extends Im{constructor(l){super(`Invalid DateTime: ${l.toMessage()}`)}}class t8e extends Im{constructor(l){super(`Invalid Interval: ${l.toMessage()}`)}}class n8e extends Im{constructor(l){super(`Invalid Duration: ${l.toMessage()}`)}}class TT extends Im{}class pQ extends Im{constructor(l){super(`Invalid unit ${l}`)}}class jl extends Im{}class kf extends Im{constructor(){super("Zone is an abstract class")}}const Nt="numeric",Gc="short",dl="long",Bk={year:Nt,month:Nt,day:Nt},mQ={year:Nt,month:Gc,day:Nt},r8e={year:Nt,month:Gc,day:Nt,weekday:Gc},gQ={year:Nt,month:dl,day:Nt},yQ={year:Nt,month:dl,day:Nt,weekday:dl},vQ={hour:Nt,minute:Nt},_Q={hour:Nt,minute:Nt,second:Nt},SQ={hour:Nt,minute:Nt,second:Nt,timeZoneName:Gc},bQ={hour:Nt,minute:Nt,second:Nt,timeZoneName:dl},TQ={hour:Nt,minute:Nt,hourCycle:"h23"},wQ={hour:Nt,minute:Nt,second:Nt,hourCycle:"h23"},CQ={hour:Nt,minute:Nt,second:Nt,hourCycle:"h23",timeZoneName:Gc},xQ={hour:Nt,minute:Nt,second:Nt,hourCycle:"h23",timeZoneName:dl},EQ={year:Nt,month:Nt,day:Nt,hour:Nt,minute:Nt},MQ={year:Nt,month:Nt,day:Nt,hour:Nt,minute:Nt,second:Nt},DQ={year:Nt,month:Gc,day:Nt,hour:Nt,minute:Nt},AQ={year:Nt,month:Gc,day:Nt,hour:Nt,minute:Nt,second:Nt},i8e={year:Nt,month:Gc,day:Nt,weekday:Gc,hour:Nt,minute:Nt},IQ={year:Nt,month:dl,day:Nt,hour:Nt,minute:Nt,timeZoneName:Gc},RQ={year:Nt,month:dl,day:Nt,hour:Nt,minute:Nt,second:Nt,timeZoneName:Gc},PQ={year:Nt,month:dl,day:Nt,weekday:dl,hour:Nt,minute:Nt,timeZoneName:dl},LQ={year:Nt,month:dl,day:Nt,weekday:dl,hour:Nt,minute:Nt,second:Nt,timeZoneName:dl};function Pr(c){return typeof c>"u"}function Rm(c){return"number"==typeof c}function VM(c){return"number"==typeof c&&c%1==0}function OQ(){try{return typeof Intl<"u"&&!!Intl.RelativeTimeFormat}catch{return!1}}function NQ(c,l,a){if(0!==c.length)return c.reduce((h,d)=>{const f=[l(d),d];return h&&a(h[0],f[0])===h[0]?h:f},null)[1]}function Xv(c,l){return Object.prototype.hasOwnProperty.call(c,l)}function Yh(c,l,a){return VM(c)&&c>=l&&c<=a}function Ms(c,l=2){let h;return h=c<0?"-"+(""+-c).padStart(l,"0"):(""+c).padStart(l,"0"),h}function Vf(c){if(!Pr(c)&&null!==c&&""!==c)return parseInt(c,10)}function Pm(c){if(!Pr(c)&&null!==c&&""!==c)return parseFloat(c)}function Uk(c){if(!Pr(c)&&null!==c&&""!==c){const l=1e3*parseFloat("0."+c);return Math.floor(l)}}function Gk(c,l,a=!1){const h=10**l;return(a?Math.trunc:Math.round)(c*h)/h}function wT(c){return c%4==0&&(c%100!=0||c%400==0)}function CT(c){return wT(c)?366:365}function BM(c,l){const a=function c8e(c,l){return c-l*Math.floor(c/l)}(l-1,12)+1;return 2===a?wT(c+(l-a)/12)?29:28:[31,null,31,30,31,30,31,31,30,31,30,31][a-1]}function zk(c){let l=Date.UTC(c.year,c.month-1,c.day,c.hour,c.minute,c.second,c.millisecond);return c.year<100&&c.year>=0&&(l=new Date(l),l.setUTCFullYear(l.getUTCFullYear()-1900)),+l}function UM(c){const l=(c+Math.floor(c/4)-Math.floor(c/100)+Math.floor(c/400))%7,a=c-1,h=(a+Math.floor(a/4)-Math.floor(a/100)+Math.floor(a/400))%7;return 4===l||3===h?53:52}function Hk(c){return c>99?c:c>60?1900+c:2e3+c}function FQ(c,l,a,h=null){const d=new Date(c),f={hourCycle:"h23",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"};h&&(f.timeZone=h);const m={timeZoneName:l,...f},g=new Intl.DateTimeFormat(a,m).formatToParts(d).find(y=>"timezonename"===y.type.toLowerCase());return g?g.value:null}function GM(c,l){let a=parseInt(c,10);Number.isNaN(a)&&(a=0);const h=parseInt(l,10)||0;return 60*a+(a<0||Object.is(a,-0)?-h:h)}function kQ(c){const l=Number(c);if("boolean"==typeof c||""===c||Number.isNaN(l))throw new jl(`Invalid unit value ${c}`);return l}function zM(c,l){const a={};for(const h in c)if(Xv(c,h)){const d=c[h];if(null==d)continue;a[l(h)]=kQ(d)}return a}function xT(c,l){const a=Math.trunc(Math.abs(c/60)),h=Math.trunc(Math.abs(c%60)),d=c>=0?"+":"-";switch(l){case"short":return`${d}${Ms(a,2)}:${Ms(h,2)}`;case"narrow":return`${d}${a}${h>0?`:${h}`:""}`;case"techie":return`${d}${Ms(a,2)}${Ms(h,2)}`;default:throw new RangeError(`Value format ${l} is out of range for property format`)}}function HM(c){return function l8e(c,l){return l.reduce((a,h)=>(a[h]=c[h],a),{})}(c,["hour","minute","second","millisecond"])}const VQ=/[A-Za-z_+-]{1,256}(?::?\/[A-Za-z0-9_+-]{1,256}(?:\/[A-Za-z0-9_+-]{1,256})?)?/,u8e=["January","February","March","April","May","June","July","August","September","October","November","December"],BQ=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],h8e=["J","F","M","A","M","J","J","A","S","O","N","D"];function UQ(c){switch(c){case"narrow":return[...h8e];case"short":return[...BQ];case"long":return[...u8e];case"numeric":return["1","2","3","4","5","6","7","8","9","10","11","12"];case"2-digit":return["01","02","03","04","05","06","07","08","09","10","11","12"];default:return null}}const GQ=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],zQ=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],d8e=["M","T","W","T","F","S","S"];function HQ(c){switch(c){case"narrow":return[...d8e];case"short":return[...zQ];case"long":return[...GQ];case"numeric":return["1","2","3","4","5","6","7"];default:return null}}const jQ=["AM","PM"],f8e=["Before Christ","Anno Domini"],p8e=["BC","AD"],m8e=["B","A"];function WQ(c){switch(c){case"narrow":return[...m8e];case"short":return[...p8e];case"long":return[...f8e];default:return null}}function XQ(c,l){let a="";for(const h of c)a+=h.literal?h.val:l(h.val);return a}const b8e={D:Bk,DD:mQ,DDD:gQ,DDDD:yQ,t:vQ,tt:_Q,ttt:SQ,tttt:bQ,T:TQ,TT:wQ,TTT:CQ,TTTT:xQ,f:EQ,ff:DQ,fff:IQ,ffff:PQ,F:MQ,FF:AQ,FFF:RQ,FFFF:LQ};class Na{static create(l,a={}){return new Na(l,a)}static parseFormat(l){let a=null,h="",d=!1;const f=[];for(let m=0;m<l.length;m++){const g=l.charAt(m);"'"===g?(h.length>0&&f.push({literal:d,val:h}),a=null,h="",d=!d):d||g===a?h+=g:(h.length>0&&f.push({literal:!1,val:h}),h=g,a=g)}return h.length>0&&f.push({literal:d,val:h}),f}static macroTokenToFormatOpts(l){return b8e[l]}constructor(l,a){this.opts=a,this.loc=l,this.systemLoc=null}formatWithSystemDefault(l,a){return null===this.systemLoc&&(this.systemLoc=this.loc.redefaultToSystem()),this.systemLoc.dtFormatter(l,{...this.opts,...a}).format()}formatDateTime(l,a={}){return this.loc.dtFormatter(l,{...this.opts,...a}).format()}formatDateTimeParts(l,a={}){return this.loc.dtFormatter(l,{...this.opts,...a}).formatToParts()}resolvedOptions(l,a={}){return this.loc.dtFormatter(l,{...this.opts,...a}).resolvedOptions()}num(l,a=0){if(this.opts.forceSimple)return Ms(l,a);const h={...this.opts};return a>0&&(h.padTo=a),this.loc.numberFormatter(h).format(l)}formatDateTimeFromString(l,a){const h="en"===this.loc.listingMode(),d=this.loc.outputCalendar&&"gregory"!==this.loc.outputCalendar,f=(T,x)=>this.loc.extract(l,T,x),m=T=>l.isOffsetFixed&&0===l.offset&&T.allowZ?"Z":l.isValid?l.zone.formatOffset(l.ts,T.format):"",y=(T,x)=>h?function v8e(c,l){return UQ(l)[c.month-1]}(l,T):f(x?{month:T}:{month:T,day:"numeric"},"month"),v=(T,x)=>h?function y8e(c,l){return HQ(l)[c.weekday-1]}(l,T):f(x?{weekday:T}:{weekday:T,month:"long",day:"numeric"},"weekday"),_=T=>{const x=Na.macroTokenToFormatOpts(T);return x?this.formatWithSystemDefault(l,x):T},S=T=>h?function _8e(c,l){return WQ(l)[c.year<0?0:1]}(l,T):f({era:T},"era");return XQ(Na.parseFormat(a),T=>{switch(T){case"S":return this.num(l.millisecond);case"u":case"SSS":return this.num(l.millisecond,3);case"s":return this.num(l.second);case"ss":return this.num(l.second,2);case"uu":return this.num(Math.floor(l.millisecond/10),2);case"uuu":return this.num(Math.floor(l.millisecond/100));case"m":return this.num(l.minute);case"mm":return this.num(l.minute,2);case"h":return this.num(l.hour%12==0?12:l.hour%12);case"hh":return this.num(l.hour%12==0?12:l.hour%12,2);case"H":return this.num(l.hour);case"HH":return this.num(l.hour,2);case"Z":return m({format:"narrow",allowZ:this.opts.allowZ});case"ZZ":return m({format:"short",allowZ:this.opts.allowZ});case"ZZZ":return m({format:"techie",allowZ:this.opts.allowZ});case"ZZZZ":return l.zone.offsetName(l.ts,{format:"short",locale:this.loc.locale});case"ZZZZZ":return l.zone.offsetName(l.ts,{format:"long",locale:this.loc.locale});case"z":return l.zoneName;case"a":return h?function g8e(c){return jQ[c.hour<12?0:1]}(l):f({hour:"numeric",hourCycle:"h12"},"dayperiod");case"d":return d?f({day:"numeric"},"day"):this.num(l.day);case"dd":return d?f({day:"2-digit"},"day"):this.num(l.day,2);case"c":case"E":return this.num(l.weekday);case"ccc":return v("short",!0);case"cccc":return v("long",!0);case"ccccc":return v("narrow",!0);case"EEE":return v("short",!1);case"EEEE":return v("long",!1);case"EEEEE":return v("narrow",!1);case"L":return d?f({month:"numeric",day:"numeric"},"month"):this.num(l.month);case"LL":return d?f({month:"2-digit",day:"numeric"},"month"):this.num(l.month,2);case"LLL":return y("short",!0);case"LLLL":return y("long",!0);case"LLLLL":return y("narrow",!0);case"M":return d?f({month:"numeric"},"month"):this.num(l.month);case"MM":return d?f({month:"2-digit"},"month"):this.num(l.month,2);case"MMM":return y("short",!1);case"MMMM":return y("long",!1);case"MMMMM":return y("narrow",!1);case"y":return d?f({year:"numeric"},"year"):this.num(l.year);case"yy":return d?f({year:"2-digit"},"year"):this.num(l.year.toString().slice(-2),2);case"yyyy":return d?f({year:"numeric"},"year"):this.num(l.year,4);case"yyyyyy":return d?f({year:"numeric"},"year"):this.num(l.year,6);case"G":return S("short");case"GG":return S("long");case"GGGGG":return S("narrow");case"kk":return this.num(l.weekYear.toString().slice(-2),2);case"kkkk":return this.num(l.weekYear,4);case"W":return this.num(l.weekNumber);case"WW":return this.num(l.weekNumber,2);case"o":return this.num(l.ordinal);case"ooo":return this.num(l.ordinal,3);case"q":return this.num(l.quarter);case"qq":return this.num(l.quarter,2);case"X":return this.num(Math.floor(l.ts/1e3));case"x":return this.num(l.ts);default:return _(T)}})}formatDurationFromString(l,a){const h=y=>{switch(y[0]){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":return"hour";case"d":return"day";case"w":return"week";case"M":return"month";case"y":return"year";default:return null}},f=Na.parseFormat(a),m=f.reduce((y,{literal:v,val:_})=>v?y:y.concat(_),[]);return XQ(f,(y=>v=>{const _=h(v);return _?this.num(y.get(_),v.length):v})(l.shiftTo(...m.map(h).filter(y=>y))))}}class zc{constructor(l,a){this.reason=l,this.explanation=a}toMessage(){return this.explanation?`${this.reason}: ${this.explanation}`:this.reason}}class ET{get type(){throw new kf}get name(){throw new kf}get ianaName(){return this.name}get isUniversal(){throw new kf}offsetName(l,a){throw new kf}formatOffset(l,a){throw new kf}offset(l){throw new kf}equals(l){throw new kf}get isValid(){throw new kf}}let jk=null;class Wk extends ET{static get instance(){return null===jk&&(jk=new Wk),jk}get type(){return"system"}get name(){return(new Intl.DateTimeFormat).resolvedOptions().timeZone}get isUniversal(){return!1}offsetName(l,{format:a,locale:h}){return FQ(l,a,h)}formatOffset(l,a){return xT(this.offset(l),a)}offset(l){return-new Date(l).getTimezoneOffset()}equals(l){return"system"===l.type}get isValid(){return!0}}let jM={};const w8e={year:0,month:1,day:2,era:3,hour:4,minute:5,second:6};let WM={};class Zh extends ET{static create(l){return WM[l]||(WM[l]=new Zh(l)),WM[l]}static resetCache(){WM={},jM={}}static isValidSpecifier(l){return this.isValidZone(l)}static isValidZone(l){if(!l)return!1;try{return new Intl.DateTimeFormat("en-US",{timeZone:l}).format(),!0}catch{return!1}}constructor(l){super(),this.zoneName=l,this.valid=Zh.isValidZone(l)}get type(){return"iana"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(l,{format:a,locale:h}){return FQ(l,a,h,this.name)}formatOffset(l,a){return xT(this.offset(l),a)}offset(l){const a=new Date(l);if(isNaN(a))return NaN;const h=function T8e(c){return jM[c]||(jM[c]=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:c,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",era:"short"})),jM[c]}(this.name);let[d,f,m,g,y,v,_]=h.formatToParts?function x8e(c,l){const a=c.formatToParts(l),h=[];for(let d=0;d<a.length;d++){const{type:f,value:m}=a[d],g=w8e[f];"era"===f?h[g]=m:Pr(g)||(h[g]=parseInt(m,10))}return h}(h,a):function C8e(c,l){const a=c.format(l).replace(/\u200E/g,""),h=/(\d+)\/(\d+)\/(\d+) (AD|BC),? (\d+):(\d+):(\d+)/.exec(a),[,d,f,m,g,y,v,_]=h;return[m,d,f,g,y,v,_]}(h,a);"BC"===g&&(d=1-Math.abs(d));let T=+a;const x=T%1e3;return T-=x>=0?x:1e3+x,(zk({year:d,month:f,day:m,hour:24===y?0:y,minute:v,second:_,millisecond:0})-T)/6e4}equals(l){return"iana"===l.type&&l.name===this.name}get isValid(){return this.valid}}let Xk=null;class ga extends ET{static get utcInstance(){return null===Xk&&(Xk=new ga(0)),Xk}static instance(l){return 0===l?ga.utcInstance:new ga(l)}static parseSpecifier(l){if(l){const a=l.match(/^utc(?:([+-]\d{1,2})(?::(\d{2}))?)?$/i);if(a)return new ga(GM(a[1],a[2]))}return null}constructor(l){super(),this.fixed=l}get type(){return"fixed"}get name(){return 0===this.fixed?"UTC":`UTC${xT(this.fixed,"narrow")}`}get ianaName(){return 0===this.fixed?"Etc/UTC":`Etc/GMT${xT(-this.fixed,"narrow")}`}offsetName(){return this.name}formatOffset(l,a){return xT(this.fixed,a)}get isUniversal(){return!0}offset(){return this.fixed}equals(l){return"fixed"===l.type&&l.fixed===this.fixed}get isValid(){return!0}}class E8e extends ET{constructor(l){super(),this.zoneName=l}get type(){return"invalid"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(){return null}formatOffset(){return""}offset(){return NaN}equals(){return!1}get isValid(){return!1}}function Bf(c,l){if(Pr(c)||null===c)return l;if(c instanceof ET)return c;if(function s8e(c){return"string"==typeof c}(c)){const h=c.toLowerCase();return"local"===h||"system"===h?l:"utc"===h||"gmt"===h?ga.utcInstance:ga.parseSpecifier(h)||Zh.create(c)}return Rm(c)?ga.instance(c):"object"==typeof c&&c.offset&&"number"==typeof c.offset?c:new E8e(c)}let QQ,qQ=()=>Date.now(),$Q="system",YQ=null,ZQ=null,KQ=null;class zs{static get now(){return qQ}static set now(l){qQ=l}static set defaultZone(l){$Q=l}static get defaultZone(){return Bf($Q,Wk.instance)}static get defaultLocale(){return YQ}static set defaultLocale(l){YQ=l}static get defaultNumberingSystem(){return ZQ}static set defaultNumberingSystem(l){ZQ=l}static get defaultOutputCalendar(){return KQ}static set defaultOutputCalendar(l){KQ=l}static get throwOnInvalid(){return QQ}static set throwOnInvalid(l){QQ=l}static resetCaches(){ji.resetCache(),Zh.resetCache()}}let JQ={},qk={};function $k(c,l={}){const a=JSON.stringify([c,l]);let h=qk[a];return h||(h=new Intl.DateTimeFormat(c,l),qk[a]=h),h}let Yk={},Zk={},MT=null;function XM(c,l,a,h,d){const f=c.listingMode(a);return"error"===f?null:"en"===f?h(l):d(l)}class F8e{constructor(l,a,h){this.padTo=h.padTo||0,this.floor=h.floor||!1;const{padTo:d,floor:f,...m}=h;if(!a||Object.keys(m).length>0){const g={useGrouping:!1,...h};h.padTo>0&&(g.minimumIntegerDigits=h.padTo),this.inf=function D8e(c,l={}){const a=JSON.stringify([c,l]);let h=Yk[a];return h||(h=new Intl.NumberFormat(c,l),Yk[a]=h),h}(l,g)}}format(l){if(this.inf){const a=this.floor?Math.floor(l):l;return this.inf.format(a)}return Ms(this.floor?Math.floor(l):Gk(l,3),this.padTo)}}class k8e{constructor(l,a,h){let d;if(this.opts=h,l.zone.isUniversal){const m=l.offset/60*-1,g=m>=0?`Etc/GMT+${m}`:`Etc/GMT${m}`;0!==l.offset&&Zh.create(g).valid?(d=g,this.dt=l):(d="UTC",this.dt=h.timeZoneName||0===l.offset?l:Jn.fromMillis(l.ts+60*l.offset*1e3))}else"system"===l.zone.type?this.dt=l:(this.dt=l,d=l.zone.name);const f={...this.opts};d&&(f.timeZone=d),this.dtf=$k(a,f)}format(){return this.dtf.format(this.dt.toJSDate())}formatToParts(){return this.dtf.formatToParts(this.dt.toJSDate())}resolvedOptions(){return this.dtf.resolvedOptions()}}class V8e{constructor(l,a,h){this.opts={style:"long",...h},!a&&OQ()&&(this.rtf=function A8e(c,l={}){const{base:a,...h}=l,d=JSON.stringify([c,h]);let f=Zk[d];return f||(f=new Intl.RelativeTimeFormat(c,l),Zk[d]=f),f}(l,h))}format(l,a){return this.rtf?this.rtf.format(l,a):function S8e(c,l,a="always",h=!1){const d={years:["year","yr."],quarters:["quarter","qtr."],months:["month","mo."],weeks:["week","wk."],days:["day","day","days"],hours:["hour","hr."],minutes:["minute","min."],seconds:["second","sec."]},f=-1===["hours","minutes","seconds"].indexOf(c);if("auto"===a&&f){const S="days"===c;switch(l){case 1:return S?"tomorrow":`next ${d[c][0]}`;case-1:return S?"yesterday":`last ${d[c][0]}`;case 0:return S?"today":`this ${d[c][0]}`}}const m=Object.is(l,-0)||l<0,g=Math.abs(l),y=1===g,v=d[c],_=h?y?v[1]:v[2]||v[1]:y?d[c][0]:c;return m?`${g} ${_} ago`:`in ${g} ${_}`}(a,l,this.opts.numeric,"long"!==this.opts.style)}formatToParts(l,a){return this.rtf?this.rtf.formatToParts(l,a):[]}}class ji{static fromOpts(l){return ji.create(l.locale,l.numberingSystem,l.outputCalendar,l.defaultToEN)}static create(l,a,h,d=!1){const f=l||zs.defaultLocale,m=f||(d?"en-US":function I8e(){return MT||(MT=(new Intl.DateTimeFormat).resolvedOptions().locale,MT)}());return new ji(m,a||zs.defaultNumberingSystem,h||zs.defaultOutputCalendar,f)}static resetCache(){MT=null,qk={},Yk={},Zk={}}static fromObject({locale:l,numberingSystem:a,outputCalendar:h}={}){return ji.create(l,a,h)}constructor(l,a,h,d){const[f,m,g]=function R8e(c){const l=c.indexOf("-u-");if(-1===l)return[c];{let a;const h=c.substring(0,l);try{a=$k(c).resolvedOptions()}catch{a=$k(h).resolvedOptions()}const{numberingSystem:d,calendar:f}=a;return[h,d,f]}}(l);this.locale=f,this.numberingSystem=a||m||null,this.outputCalendar=h||g||null,this.intl=function P8e(c,l,a){return(a||l)&&(c+="-u",a&&(c+=`-ca-${a}`),l&&(c+=`-nu-${l}`)),c}(this.locale,this.numberingSystem,this.outputCalendar),this.weekdaysCache={format:{},standalone:{}},this.monthsCache={format:{},standalone:{}},this.meridiemCache=null,this.eraCache={},this.specifiedLocale=d,this.fastNumbersCached=null}get fastNumbers(){return null==this.fastNumbersCached&&(this.fastNumbersCached=function N8e(c){return(!c.numberingSystem||"latn"===c.numberingSystem)&&("latn"===c.numberingSystem||!c.locale||c.locale.startsWith("en")||"latn"===new Intl.DateTimeFormat(c.intl).resolvedOptions().numberingSystem)}(this)),this.fastNumbersCached}listingMode(){return this.isEnglish()&&!(null!==this.numberingSystem&&"latn"!==this.numberingSystem||null!==this.outputCalendar&&"gregory"!==this.outputCalendar)?"en":"intl"}clone(l){return l&&0!==Object.getOwnPropertyNames(l).length?ji.create(l.locale||this.specifiedLocale,l.numberingSystem||this.numberingSystem,l.outputCalendar||this.outputCalendar,l.defaultToEN||!1):this}redefaultToEN(l={}){return this.clone({...l,defaultToEN:!0})}redefaultToSystem(l={}){return this.clone({...l,defaultToEN:!1})}months(l,a=!1,h=!0){return XM(this,l,h,UQ,()=>{const d=a?{month:l,day:"numeric"}:{month:l},f=a?"format":"standalone";return this.monthsCache[f][l]||(this.monthsCache[f][l]=function L8e(c){const l=[];for(let a=1;a<=12;a++){const h=Jn.utc(2016,a,1);l.push(c(h))}return l}(m=>this.extract(m,d,"month"))),this.monthsCache[f][l]})}weekdays(l,a=!1,h=!0){return XM(this,l,h,HQ,()=>{const d=a?{weekday:l,year:"numeric",month:"long",day:"numeric"}:{weekday:l},f=a?"format":"standalone";return this.weekdaysCache[f][l]||(this.weekdaysCache[f][l]=function O8e(c){const l=[];for(let a=1;a<=7;a++){const h=Jn.utc(2016,11,13+a);l.push(c(h))}return l}(m=>this.extract(m,d,"weekday"))),this.weekdaysCache[f][l]})}meridiems(l=!0){return XM(this,void 0,l,()=>jQ,()=>{if(!this.meridiemCache){const a={hour:"numeric",hourCycle:"h12"};this.meridiemCache=[Jn.utc(2016,11,13,9),Jn.utc(2016,11,13,19)].map(h=>this.extract(h,a,"dayperiod"))}return this.meridiemCache})}eras(l,a=!0){return XM(this,l,a,WQ,()=>{const h={era:l};return this.eraCache[l]||(this.eraCache[l]=[Jn.utc(-40,1,1),Jn.utc(2017,1,1)].map(d=>this.extract(d,h,"era"))),this.eraCache[l]})}extract(l,a,h){const m=this.dtFormatter(l,a).formatToParts().find(g=>g.type.toLowerCase()===h);return m?m.value:null}numberFormatter(l={}){return new F8e(this.intl,l.forceSimple||this.fastNumbers,l)}dtFormatter(l,a={}){return new k8e(l,this.intl,a)}relFormatter(l={}){return new V8e(this.intl,this.isEnglish(),l)}listFormatter(l={}){return function M8e(c,l={}){const a=JSON.stringify([c,l]);let h=JQ[a];return h||(h=new Intl.ListFormat(c,l),JQ[a]=h),h}(this.intl,l)}isEnglish(){return"en"===this.locale||"en-us"===this.locale.toLowerCase()||new Intl.DateTimeFormat(this.intl).resolvedOptions().locale.startsWith("en-us")}equals(l){return this.locale===l.locale&&this.numberingSystem===l.numberingSystem&&this.outputCalendar===l.outputCalendar}}function qv(...c){const l=c.reduce((a,h)=>a+h.source,"");return RegExp(`^${l}$`)}function $v(...c){return l=>c.reduce(([a,h,d],f)=>{const[m,g,y]=f(l,d);return[{...a,...m},g||h,y]},[{},null,1]).slice(0,2)}function Yv(c,...l){if(null==c)return[null,null];for(const[a,h]of l){const d=a.exec(c);if(d)return h(d)}return[null,null]}function eJ(...c){return(l,a)=>{const h={};let d;for(d=0;d<c.length;d++)h[c[d]]=Vf(l[a+d]);return[h,null,a+d]}}const tJ=/(?:(Z)|([+-]\d\d)(?::?(\d\d))?)/,Kk=/(\d\d)(?::?(\d\d)(?::?(\d\d)(?:[.,](\d{1,30}))?)?)?/,nJ=RegExp(`${Kk.source}(?:${tJ.source}?(?:\\[(${VQ.source})\\])?)?`),Qk=RegExp(`(?:T${nJ.source})?`),H8e=eJ("weekYear","weekNumber","weekDay"),j8e=eJ("year","ordinal"),rJ=RegExp(`${Kk.source} ?(?:${tJ.source}|(${VQ.source}))?`),X8e=RegExp(`(?: ${rJ.source})?`);function Zv(c,l,a){const h=c[l];return Pr(h)?a:Vf(h)}function Kv(c,l){return[{hours:Zv(c,l,0),minutes:Zv(c,l+1,0),seconds:Zv(c,l+2,0),milliseconds:Uk(c[l+3])},null,l+4]}function DT(c,l){const a=!c[l]&&!c[l+1],h=GM(c[l+1],c[l+2]);return[{},a?null:ga.instance(h),l+3]}function AT(c,l){return[{},c[l]?Zh.create(c[l]):null,l+1]}const $8e=RegExp(`^T?${Kk.source}$`),Y8e=/^-?P(?:(?:(-?\d{1,20}(?:\.\d{1,20})?)Y)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20}(?:\.\d{1,20})?)W)?(?:(-?\d{1,20}(?:\.\d{1,20})?)D)?(?:T(?:(-?\d{1,20}(?:\.\d{1,20})?)H)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20})(?:[.,](-?\d{1,20}))?S)?)?)$/;function Z8e(c){const[l,a,h,d,f,m,g,y,v]=c,_="-"===l[0],S=y&&"-"===y[0],b=(T,x=!1)=>void 0!==T&&(x||T&&_)?-T:T;return[{years:b(Pm(a)),months:b(Pm(h)),weeks:b(Pm(d)),days:b(Pm(f)),hours:b(Pm(m)),minutes:b(Pm(g)),seconds:b(Pm(y),"-0"===y),milliseconds:b(Uk(v),S)}]}const K8e={GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};function Jk(c,l,a,h,d,f,m){const g={year:2===l.length?Hk(Vf(l)):Vf(l),month:BQ.indexOf(a)+1,day:Vf(h),hour:Vf(d),minute:Vf(f)};return m&&(g.second=Vf(m)),c&&(g.weekday=c.length>3?GQ.indexOf(c)+1:zQ.indexOf(c)+1),g}const Q8e=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|(?:([+-]\d\d)(\d\d)))$/;function J8e(c){const[,l,a,h,d,f,m,g,y,v,_,S]=c,b=Jk(l,d,h,a,f,m,g);let T;return T=y?K8e[y]:v?0:GM(_,S),[b,new ga(T)]}const t6e=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d\d) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d\d):(\d\d):(\d\d) GMT$/,n6e=/^(Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d\d)-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d\d) (\d\d):(\d\d):(\d\d) GMT$/,r6e=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( \d|\d\d) (\d\d):(\d\d):(\d\d) (\d{4})$/;function iJ(c){const[,l,a,h,d,f,m,g]=c;return[Jk(l,d,h,a,f,m,g),ga.utcInstance]}function i6e(c){const[,l,a,h,d,f,m,g]=c;return[Jk(l,g,a,h,d,f,m),ga.utcInstance]}const s6e=qv(/([+-]\d{6}|\d{4})(?:-?(\d\d)(?:-?(\d\d))?)?/,Qk),o6e=qv(/(\d{4})-?W(\d\d)(?:-?(\d))?/,Qk),a6e=qv(/(\d{4})-?(\d{3})/,Qk),l6e=qv(nJ),sJ=$v(function q8e(c,l){return[{year:Zv(c,l),month:Zv(c,l+1,1),day:Zv(c,l+2,1)},null,l+3]},Kv,DT,AT),c6e=$v(H8e,Kv,DT,AT),u6e=$v(j8e,Kv,DT,AT),h6e=$v(Kv,DT,AT),g6e=$v(Kv),v6e=qv(/(\d{4})-(\d\d)-(\d\d)/,X8e),_6e=qv(rJ),S6e=$v(Kv,DT,AT),oJ={weeks:{days:7,hours:168,minutes:10080,seconds:604800,milliseconds:6048e5},days:{hours:24,minutes:1440,seconds:86400,milliseconds:864e5},hours:{minutes:60,seconds:3600,milliseconds:36e5},minutes:{seconds:60,milliseconds:6e4},seconds:{milliseconds:1e3}},w6e={years:{quarters:4,months:12,weeks:52,days:365,hours:8760,minutes:525600,seconds:31536e3,milliseconds:31536e6},quarters:{months:3,weeks:13,days:91,hours:2184,minutes:131040,seconds:7862400,milliseconds:78624e5},months:{weeks:4,days:30,hours:720,minutes:43200,seconds:2592e3,milliseconds:2592e6},...oJ},Wl=365.2425,Qv=30.436875,C6e={years:{quarters:4,months:12,weeks:Wl/7,days:Wl,hours:24*Wl,minutes:525949.2,seconds:525949.2*60,milliseconds:525949.2*60*1e3},quarters:{months:3,weeks:Wl/28,days:Wl/4,hours:24*Wl/4,minutes:131487.3,seconds:525949.2*60/4,milliseconds:7889237999.999999},months:{weeks:Qv/7,days:Qv,hours:24*Qv,minutes:43829.1,seconds:2629746,milliseconds:2629746e3},...oJ},Lm=["years","quarters","months","weeks","days","hours","minutes","seconds","milliseconds"],x6e=Lm.slice(0).reverse();function Om(c,l,a=!1){const h={values:a?l.values:{...c.values,...l.values||{}},loc:c.loc.clone(l.loc),conversionAccuracy:l.conversionAccuracy||c.conversionAccuracy};return new Or(h)}function aJ(c,l,a,h,d){const f=c[d][a],m=l[a]/f,y=Math.sign(m)!==Math.sign(h[d])&&0!==h[d]&&Math.abs(m)<=1?function E6e(c){return c<0?Math.floor(c):Math.ceil(c)}(m):Math.trunc(m);h[d]+=y,l[a]-=y*f}class Or{constructor(l){const a="longterm"===l.conversionAccuracy||!1;this.values=l.values,this.loc=l.loc||ji.create(),this.conversionAccuracy=a?"longterm":"casual",this.invalid=l.invalid||null,this.matrix=a?C6e:w6e,this.isLuxonDuration=!0}static fromMillis(l,a){return Or.fromObject({milliseconds:l},a)}static fromObject(l,a={}){if(null==l||"object"!=typeof l)throw new jl("Duration.fromObject: argument expected to be an object, got "+(null===l?"null":typeof l));return new Or({values:zM(l,Or.normalizeUnit),loc:ji.fromObject(a),conversionAccuracy:a.conversionAccuracy})}static fromDurationLike(l){if(Rm(l))return Or.fromMillis(l);if(Or.isDuration(l))return l;if("object"==typeof l)return Or.fromObject(l);throw new jl(`Unknown duration argument ${l} of type ${typeof l}`)}static fromISO(l,a){const[h]=function m6e(c){return Yv(c,[Y8e,Z8e])}(l);return h?Or.fromObject(h,a):Or.invalid("unparsable",`the input "${l}" can't be parsed as ISO 8601`)}static fromISOTime(l,a){const[h]=function y6e(c){return Yv(c,[$8e,g6e])}(l);return h?Or.fromObject(h,a):Or.invalid("unparsable",`the input "${l}" can't be parsed as ISO 8601`)}static invalid(l,a=null){if(!l)throw new jl("need to specify a reason the Duration is invalid");const h=l instanceof zc?l:new zc(l,a);if(zs.throwOnInvalid)throw new n8e(h);return new Or({invalid:h})}static normalizeUnit(l){const a={year:"years",years:"years",quarter:"quarters",quarters:"quarters",month:"months",months:"months",week:"weeks",weeks:"weeks",day:"days",days:"days",hour:"hours",hours:"hours",minute:"minutes",minutes:"minutes",second:"seconds",seconds:"seconds",millisecond:"milliseconds",milliseconds:"milliseconds"}[l&&l.toLowerCase()];if(!a)throw new pQ(l);return a}static isDuration(l){return l&&l.isLuxonDuration||!1}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}toFormat(l,a={}){const h={...a,floor:!1!==a.round&&!1!==a.floor};return this.isValid?Na.create(this.loc,h).formatDurationFromString(this,l):"Invalid Duration"}toHuman(l={}){const a=Lm.map(h=>{const d=this.values[h];return Pr(d)?null:this.loc.numberFormatter({style:"unit",unitDisplay:"long",...l,unit:h.slice(0,-1)}).format(d)}).filter(h=>h);return this.loc.listFormatter({type:"conjunction",style:l.listStyle||"narrow",...l}).format(a)}toObject(){return this.isValid?{...this.values}:{}}toISO(){if(!this.isValid)return null;let l="P";return 0!==this.years&&(l+=this.years+"Y"),(0!==this.months||0!==this.quarters)&&(l+=this.months+3*this.quarters+"M"),0!==this.weeks&&(l+=this.weeks+"W"),0!==this.days&&(l+=this.days+"D"),(0!==this.hours||0!==this.minutes||0!==this.seconds||0!==this.milliseconds)&&(l+="T"),0!==this.hours&&(l+=this.hours+"H"),0!==this.minutes&&(l+=this.minutes+"M"),(0!==this.seconds||0!==this.milliseconds)&&(l+=Gk(this.seconds+this.milliseconds/1e3,3)+"S"),"P"===l&&(l+="T0S"),l}toISOTime(l={}){if(!this.isValid)return null;const a=this.toMillis();if(a<0||a>=864e5)return null;l={suppressMilliseconds:!1,suppressSeconds:!1,includePrefix:!1,format:"extended",...l};const h=this.shiftTo("hours","minutes","seconds","milliseconds");let d="basic"===l.format?"hhmm":"hh:mm";(!l.suppressSeconds||0!==h.seconds||0!==h.milliseconds)&&(d+="basic"===l.format?"ss":":ss",(!l.suppressMilliseconds||0!==h.milliseconds)&&(d+=".SSS"));let f=h.toFormat(d);return l.includePrefix&&(f="T"+f),f}toJSON(){return this.toISO()}toString(){return this.toISO()}toMillis(){return this.as("milliseconds")}valueOf(){return this.toMillis()}plus(l){if(!this.isValid)return this;const a=Or.fromDurationLike(l),h={};for(const d of Lm)(Xv(a.values,d)||Xv(this.values,d))&&(h[d]=a.get(d)+this.get(d));return Om(this,{values:h},!0)}minus(l){if(!this.isValid)return this;const a=Or.fromDurationLike(l);return this.plus(a.negate())}mapUnits(l){if(!this.isValid)return this;const a={};for(const h of Object.keys(this.values))a[h]=kQ(l(this.values[h],h));return Om(this,{values:a},!0)}get(l){return this[Or.normalizeUnit(l)]}set(l){return this.isValid?Om(this,{values:{...this.values,...zM(l,Or.normalizeUnit)}}):this}reconfigure({locale:l,numberingSystem:a,conversionAccuracy:h}={}){const f={loc:this.loc.clone({locale:l,numberingSystem:a})};return h&&(f.conversionAccuracy=h),Om(this,f)}as(l){return this.isValid?this.shiftTo(l).get(l):NaN}normalize(){if(!this.isValid)return this;const l=this.toObject();return function M6e(c,l){x6e.reduce((a,h)=>Pr(l[h])?a:(a&&aJ(c,l,a,l,h),h),null)}(this.matrix,l),Om(this,{values:l},!0)}shiftTo(...l){if(!this.isValid)return this;if(0===l.length)return this;l=l.map(m=>Or.normalizeUnit(m));const a={},h={},d=this.toObject();let f;for(const m of Lm)if(l.indexOf(m)>=0){f=m;let g=0;for(const v in h)g+=this.matrix[v][m]*h[v],h[v]=0;Rm(d[m])&&(g+=d[m]);const y=Math.trunc(g);a[m]=y,h[m]=(1e3*g-1e3*y)/1e3;for(const v in d)Lm.indexOf(v)>Lm.indexOf(m)&&aJ(this.matrix,d,v,a,m)}else Rm(d[m])&&(h[m]=d[m]);for(const m in h)0!==h[m]&&(a[f]+=m===f?h[m]:h[m]/this.matrix[f][m]);return Om(this,{values:a},!0).normalize()}negate(){if(!this.isValid)return this;const l={};for(const a of Object.keys(this.values))l[a]=0===this.values[a]?0:-this.values[a];return Om(this,{values:l},!0)}get years(){return this.isValid?this.values.years||0:NaN}get quarters(){return this.isValid?this.values.quarters||0:NaN}get months(){return this.isValid?this.values.months||0:NaN}get weeks(){return this.isValid?this.values.weeks||0:NaN}get days(){return this.isValid?this.values.days||0:NaN}get hours(){return this.isValid?this.values.hours||0:NaN}get minutes(){return this.isValid?this.values.minutes||0:NaN}get seconds(){return this.isValid?this.values.seconds||0:NaN}get milliseconds(){return this.isValid?this.values.milliseconds||0:NaN}get isValid(){return null===this.invalid}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}equals(l){if(!this.isValid||!l.isValid||!this.loc.equals(l.loc))return!1;function a(h,d){return void 0===h||0===h?void 0===d||0===d:h===d}for(const h of Lm)if(!a(this.values[h],l.values[h]))return!1;return!0}}const IT="Invalid Interval";class Wi{constructor(l){this.s=l.start,this.e=l.end,this.invalid=l.invalid||null,this.isLuxonInterval=!0}static invalid(l,a=null){if(!l)throw new jl("need to specify a reason the Interval is invalid");const h=l instanceof zc?l:new zc(l,a);if(zs.throwOnInvalid)throw new t8e(h);return new Wi({invalid:h})}static fromDateTimes(l,a){const h=LT(l),d=LT(a),f=function D6e(c,l){return c&&c.isValid?l&&l.isValid?l<c?Wi.invalid("end before start",`The end of an interval must be after its start, but you had start=${c.toISO()} and end=${l.toISO()}`):null:Wi.invalid("missing or invalid end"):Wi.invalid("missing or invalid start")}(h,d);return f??new Wi({start:h,end:d})}static after(l,a){const h=Or.fromDurationLike(a),d=LT(l);return Wi.fromDateTimes(d,d.plus(h))}static before(l,a){const h=Or.fromDurationLike(a),d=LT(l);return Wi.fromDateTimes(d.minus(h),d)}static fromISO(l,a){const[h,d]=(l||"").split("/",2);if(h&&d){let f,m,g,y;try{f=Jn.fromISO(h,a),m=f.isValid}catch{m=!1}try{g=Jn.fromISO(d,a),y=g.isValid}catch{y=!1}if(m&&y)return Wi.fromDateTimes(f,g);if(m){const v=Or.fromISO(d,a);if(v.isValid)return Wi.after(f,v)}else if(y){const v=Or.fromISO(h,a);if(v.isValid)return Wi.before(g,v)}}return Wi.invalid("unparsable",`the input "${l}" can't be parsed as ISO 8601`)}static isInterval(l){return l&&l.isLuxonInterval||!1}get start(){return this.isValid?this.s:null}get end(){return this.isValid?this.e:null}get isValid(){return null===this.invalidReason}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}length(l="milliseconds"){return this.isValid?this.toDuration(l).get(l):NaN}count(l="milliseconds"){if(!this.isValid)return NaN;const a=this.start.startOf(l),h=this.end.startOf(l);return Math.floor(h.diff(a,l).get(l))+1}hasSame(l){return!!this.isValid&&(this.isEmpty()||this.e.minus(1).hasSame(this.s,l))}isEmpty(){return this.s.valueOf()===this.e.valueOf()}isAfter(l){return!!this.isValid&&this.s>l}isBefore(l){return!!this.isValid&&this.e<=l}contains(l){return!!this.isValid&&this.s<=l&&this.e>l}set({start:l,end:a}={}){return this.isValid?Wi.fromDateTimes(l||this.s,a||this.e):this}splitAt(...l){if(!this.isValid)return[];const a=l.map(LT).filter(m=>this.contains(m)).sort(),h=[];let{s:d}=this,f=0;for(;d<this.e;){const m=a[f]||this.e,g=+m>+this.e?this.e:m;h.push(Wi.fromDateTimes(d,g)),d=g,f+=1}return h}splitBy(l){const a=Or.fromDurationLike(l);if(!this.isValid||!a.isValid||0===a.as("milliseconds"))return[];let f,{s:h}=this,d=1;const m=[];for(;h<this.e;){const g=this.start.plus(a.mapUnits(y=>y*d));f=+g>+this.e?this.e:g,m.push(Wi.fromDateTimes(h,f)),h=f,d+=1}return m}divideEqually(l){return this.isValid?this.splitBy(this.length()/l).slice(0,l):[]}overlaps(l){return this.e>l.s&&this.s<l.e}abutsStart(l){return!!this.isValid&&+this.e==+l.s}abutsEnd(l){return!!this.isValid&&+l.e==+this.s}engulfs(l){return!!this.isValid&&this.s<=l.s&&this.e>=l.e}equals(l){return!(!this.isValid||!l.isValid)&&this.s.equals(l.s)&&this.e.equals(l.e)}intersection(l){if(!this.isValid)return this;const a=this.s>l.s?this.s:l.s,h=this.e<l.e?this.e:l.e;return a>=h?null:Wi.fromDateTimes(a,h)}union(l){return this.isValid?Wi.fromDateTimes(this.s<l.s?this.s:l.s,this.e>l.e?this.e:l.e):this}static merge(l){const[a,h]=l.sort((d,f)=>d.s-f.s).reduce(([d,f],m)=>f?f.overlaps(m)||f.abutsStart(m)?[d,f.union(m)]:[d.concat([f]),m]:[d,m],[[],null]);return h&&a.push(h),a}static xor(l){let a=null,h=0;const d=[],f=l.map(y=>[{time:y.s,type:"s"},{time:y.e,type:"e"}]),g=Array.prototype.concat(...f).sort((y,v)=>y.time-v.time);for(const y of g)h+="s"===y.type?1:-1,1===h?a=y.time:(a&&+a!=+y.time&&d.push(Wi.fromDateTimes(a,y.time)),a=null);return Wi.merge(d)}difference(...l){return Wi.xor([this].concat(l)).map(a=>this.intersection(a)).filter(a=>a&&!a.isEmpty())}toString(){return this.isValid?`[${this.s.toISO()} \u2013 ${this.e.toISO()})`:IT}toISO(l){return this.isValid?`${this.s.toISO(l)}/${this.e.toISO(l)}`:IT}toISODate(){return this.isValid?`${this.s.toISODate()}/${this.e.toISODate()}`:IT}toISOTime(l){return this.isValid?`${this.s.toISOTime(l)}/${this.e.toISOTime(l)}`:IT}toFormat(l,{separator:a=" \u2013 "}={}){return this.isValid?`${this.s.toFormat(l)}${a}${this.e.toFormat(l)}`:IT}toDuration(l,a){return this.isValid?this.e.diff(this.s,l,a):Or.invalid(this.invalidReason)}mapEndpoints(l){return Wi.fromDateTimes(l(this.s),l(this.e))}}class qM{static hasDST(l=zs.defaultZone){const a=Jn.now().setZone(l).set({month:12});return!l.isUniversal&&a.offset!==a.set({month:6}).offset}static isValidIANAZone(l){return Zh.isValidZone(l)}static normalizeZone(l){return Bf(l,zs.defaultZone)}static months(l="long",{locale:a=null,numberingSystem:h=null,locObj:d=null,outputCalendar:f="gregory"}={}){return(d||ji.create(a,h,f)).months(l)}static monthsFormat(l="long",{locale:a=null,numberingSystem:h=null,locObj:d=null,outputCalendar:f="gregory"}={}){return(d||ji.create(a,h,f)).months(l,!0)}static weekdays(l="long",{locale:a=null,numberingSystem:h=null,locObj:d=null}={}){return(d||ji.create(a,h,null)).weekdays(l)}static weekdaysFormat(l="long",{locale:a=null,numberingSystem:h=null,locObj:d=null}={}){return(d||ji.create(a,h,null)).weekdays(l,!0)}static meridiems({locale:l=null}={}){return ji.create(l).meridiems()}static eras(l="short",{locale:a=null}={}){return ji.create(a,null,"gregory").eras(l)}static features(){return{relative:OQ()}}}function lJ(c,l){const a=d=>d.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf(),h=a(l)-a(c);return Math.floor(Or.fromMillis(h).as("days"))}const e3={arab:"[\u0660-\u0669]",arabext:"[\u06f0-\u06f9]",bali:"[\u1b50-\u1b59]",beng:"[\u09e6-\u09ef]",deva:"[\u0966-\u096f]",fullwide:"[\uff10-\uff19]",gujr:"[\u0ae6-\u0aef]",hanidec:"[\u3007|\u4e00|\u4e8c|\u4e09|\u56db|\u4e94|\u516d|\u4e03|\u516b|\u4e5d]",khmr:"[\u17e0-\u17e9]",knda:"[\u0ce6-\u0cef]",laoo:"[\u0ed0-\u0ed9]",limb:"[\u1946-\u194f]",mlym:"[\u0d66-\u0d6f]",mong:"[\u1810-\u1819]",mymr:"[\u1040-\u1049]",orya:"[\u0b66-\u0b6f]",tamldec:"[\u0be6-\u0bef]",telu:"[\u0c66-\u0c6f]",thai:"[\u0e50-\u0e59]",tibt:"[\u0f20-\u0f29]",latn:"\\d"},cJ={arab:[1632,1641],arabext:[1776,1785],bali:[6992,7001],beng:[2534,2543],deva:[2406,2415],fullwide:[65296,65303],gujr:[2790,2799],khmr:[6112,6121],knda:[3302,3311],laoo:[3792,3801],limb:[6470,6479],mlym:[3430,3439],mong:[6160,6169],mymr:[4160,4169],orya:[2918,2927],tamldec:[3046,3055],telu:[3174,3183],thai:[3664,3673],tibt:[3872,3881]},R6e=e3.hanidec.replace(/[\[|\]]/g,"").split("");function Hc({numberingSystem:c},l=""){return new RegExp(`${e3[c||"latn"]}${l}`)}function jr(c,l=(a=>a)){return{regex:c,deser:([a])=>l(function P6e(c){let l=parseInt(c,10);if(isNaN(l)){l="";for(let a=0;a<c.length;a++){const h=c.charCodeAt(a);if(-1!==c[a].search(e3.hanidec))l+=R6e.indexOf(c[a]);else for(const d in cJ){const[f,m]=cJ[d];h>=f&&h<=m&&(l+=h-f)}}return parseInt(l,10)}return l}(a))}}const uJ=`[ ${String.fromCharCode(160)}]`,hJ=new RegExp(uJ,"g");function O6e(c){return c.replace(/\./g,"\\.?").replace(hJ,uJ)}function dJ(c){return c.replace(/\./g,"").replace(hJ," ").toLowerCase()}function jc(c,l){return null===c?null:{regex:RegExp(c.map(O6e).join("|")),deser:([a])=>c.findIndex(h=>dJ(a)===dJ(h))+l}}function fJ(c,l){return{regex:c,deser:([,a,h])=>GM(a,h),groups:l}}function t3(c){return{regex:c,deser:([l])=>l}}function N6e(c){return c.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}const k6e={year:{"2-digit":"yy",numeric:"yyyyy"},month:{numeric:"M","2-digit":"MM",short:"MMM",long:"MMMM"},day:{numeric:"d","2-digit":"dd"},weekday:{short:"EEE",long:"EEEE"},dayperiod:"a",dayPeriod:"a",hour:{numeric:"h","2-digit":"hh"},minute:{numeric:"m","2-digit":"mm"},second:{numeric:"s","2-digit":"ss"}};let n3=null;function pJ(c,l,a){const h=function j6e(c,l){return Array.prototype.concat(...c.map(a=>function H6e(c,l){if(c.literal)return c;const a=Na.macroTokenToFormatOpts(c.val);if(!a)return c;const f=Na.create(l,a).formatDateTimeParts(function z6e(){return n3||(n3=Jn.fromMillis(1555555555555)),n3}()).map(m=>function V6e(c,l,a){const{type:h,value:d}=c;if("literal"===h)return{literal:!0,val:d};let m=k6e[h];return"object"==typeof m&&(m=m[a[h]]),m?{literal:!1,val:m}:void 0}(m,0,a));return f.includes(void 0)?c:f}(a,l)))}(Na.parseFormat(a),c),d=h.map(m=>function F6e(c,l){const a=Hc(l),h=Hc(l,"{2}"),d=Hc(l,"{3}"),f=Hc(l,"{4}"),m=Hc(l,"{6}"),g=Hc(l,"{1,2}"),y=Hc(l,"{1,3}"),v=Hc(l,"{1,6}"),_=Hc(l,"{1,9}"),S=Hc(l,"{2,4}"),b=Hc(l,"{4,6}"),T=D=>({regex:RegExp(N6e(D.val)),deser:([I])=>I,literal:!0}),E=(D=>{if(c.literal)return T(D);switch(D.val){case"G":return jc(l.eras("short",!1),0);case"GG":return jc(l.eras("long",!1),0);case"y":return jr(v);case"yy":case"kk":return jr(S,Hk);case"yyyy":case"kkkk":return jr(f);case"yyyyy":return jr(b);case"yyyyyy":return jr(m);case"M":case"L":case"d":case"H":case"h":case"m":case"q":case"s":case"W":return jr(g);case"MM":case"LL":case"dd":case"HH":case"hh":case"mm":case"qq":case"ss":case"WW":return jr(h);case"MMM":return jc(l.months("short",!0,!1),1);case"MMMM":return jc(l.months("long",!0,!1),1);case"LLL":return jc(l.months("short",!1,!1),1);case"LLLL":return jc(l.months("long",!1,!1),1);case"o":case"S":return jr(y);case"ooo":case"SSS":return jr(d);case"u":return t3(_);case"uu":return t3(g);case"uuu":case"E":case"c":return jr(a);case"a":return jc(l.meridiems(),0);case"EEE":return jc(l.weekdays("short",!1,!1),1);case"EEEE":return jc(l.weekdays("long",!1,!1),1);case"ccc":return jc(l.weekdays("short",!0,!1),1);case"cccc":return jc(l.weekdays("long",!0,!1),1);case"Z":case"ZZ":return fJ(new RegExp(`([+-]${g.source})(?::(${h.source}))?`),2);case"ZZZ":return fJ(new RegExp(`([+-]${g.source})(${h.source})?`),2);case"z":return t3(/[a-z_+-/]{1,256}?/i);default:return T(D)}})(c)||{invalidReason:"missing Intl.DateTimeFormat.formatToParts support"};return E.token=c,E}(m,c)),f=d.find(m=>m.invalidReason);if(f)return{input:l,tokens:h,invalidReason:f.invalidReason};{const[m,g]=function B6e(c){return[`^${c.map(a=>a.regex).reduce((a,h)=>`${a}(${h.source})`,"")}$`,c]}(d),y=RegExp(m,"i"),[v,_]=function U6e(c,l,a){const h=c.match(l);if(h){const d={};let f=1;for(const m in a)if(Xv(a,m)){const g=a[m],y=g.groups?g.groups+1:1;!g.literal&&g.token&&(d[g.token.val[0]]=g.deser(h.slice(f,f+y))),f+=y}return[h,d]}return[h,{}]}(l,y,g),[S,b,T]=_?function G6e(c){let h,a=null;return Pr(c.z)||(a=Zh.create(c.z)),Pr(c.Z)||(a||(a=new ga(c.Z)),h=c.Z),Pr(c.q)||(c.M=3*(c.q-1)+1),Pr(c.h)||(c.h<12&&1===c.a?c.h+=12:12===c.h&&0===c.a&&(c.h=0)),0===c.G&&c.y&&(c.y=-c.y),Pr(c.u)||(c.S=Uk(c.u)),[Object.keys(c).reduce((f,m)=>{const g=(f=>{switch(f){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":case"H":return"hour";case"d":return"day";case"o":return"ordinal";case"L":case"M":return"month";case"y":return"year";case"E":case"c":return"weekday";case"W":return"weekNumber";case"k":return"weekYear";case"q":return"quarter";default:return null}})(m);return g&&(f[g]=c[m]),f},{}),a,h]}(_):[null,null,void 0];if(Xv(_,"a")&&Xv(_,"H"))throw new TT("Can't include meridiem when specifying 24-hour format");return{input:l,tokens:h,regex:y,rawMatches:v,matches:_,result:S,zone:b,specificOffset:T}}}const mJ=[0,31,59,90,120,151,181,212,243,273,304,334],gJ=[0,31,60,91,121,152,182,213,244,274,305,335];function Xl(c,l){return new zc("unit out of range",`you specified ${l} (of type ${typeof l}) as a ${c}, which is invalid`)}function yJ(c,l,a){const h=new Date(Date.UTC(c,l-1,a));c<100&&c>=0&&h.setUTCFullYear(h.getUTCFullYear()-1900);const d=h.getUTCDay();return 0===d?7:d}function vJ(c,l,a){return a+(wT(c)?gJ:mJ)[l-1]}function _J(c,l){const a=wT(c)?gJ:mJ,h=a.findIndex(f=>f<l);return{month:h+1,day:l-a[h]}}function r3(c){const{year:l,month:a,day:h}=c,d=vJ(l,a,h),f=yJ(l,a,h);let g,m=Math.floor((d-f+10)/7);return m<1?(g=l-1,m=UM(g)):m>UM(l)?(g=l+1,m=1):g=l,{weekYear:g,weekNumber:m,weekday:f,...HM(c)}}function SJ(c){const{weekYear:l,weekNumber:a,weekday:h}=c,d=yJ(l,1,4),f=CT(l);let g,m=7*a+h-d-3;m<1?(g=l-1,m+=CT(g)):m>f?(g=l+1,m-=CT(l)):g=l;const{month:y,day:v}=_J(g,m);return{year:g,month:y,day:v,...HM(c)}}function i3(c){const{year:l,month:a,day:h}=c;return{year:l,ordinal:vJ(l,a,h),...HM(c)}}function bJ(c){const{year:l,ordinal:a}=c,{month:h,day:d}=_J(l,a);return{year:l,month:h,day:d,...HM(c)}}function TJ(c){const l=VM(c.year),a=Yh(c.month,1,12),h=Yh(c.day,1,BM(c.year,c.month));return l?a?!h&&Xl("day",c.day):Xl("month",c.month):Xl("year",c.year)}function wJ(c){const{hour:l,minute:a,second:h,millisecond:d}=c,f=Yh(l,0,23)||24===l&&0===a&&0===h&&0===d,m=Yh(a,0,59),g=Yh(h,0,59),y=Yh(d,0,999);return f?m?g?!y&&Xl("millisecond",d):Xl("second",h):Xl("minute",a):Xl("hour",l)}const s3="Invalid DateTime",CJ=864e13;function $M(c){return new zc("unsupported zone",`the zone "${c.name}" is not supported`)}function o3(c){return null===c.weekData&&(c.weekData=r3(c.c)),c.weekData}function RT(c,l){const a={ts:c.ts,zone:c.zone,c:c.c,o:c.o,loc:c.loc,invalid:c.invalid};return new Jn({...a,...l,old:a})}function xJ(c,l,a){let h=c-60*l*1e3;const d=a.offset(h);if(l===d)return[h,l];h-=60*(d-l)*1e3;const f=a.offset(h);return d===f?[h,d]:[c-60*Math.min(d,f)*1e3,Math.max(d,f)]}function EJ(c,l){const a=new Date(c+=60*l*1e3);return{year:a.getUTCFullYear(),month:a.getUTCMonth()+1,day:a.getUTCDate(),hour:a.getUTCHours(),minute:a.getUTCMinutes(),second:a.getUTCSeconds(),millisecond:a.getUTCMilliseconds()}}function YM(c,l,a){return xJ(zk(c),l,a)}function MJ(c,l){const a=c.o,h=c.c.year+Math.trunc(l.years),d=c.c.month+Math.trunc(l.months)+3*Math.trunc(l.quarters),f={...c.c,year:h,month:d,day:Math.min(c.c.day,BM(h,d))+Math.trunc(l.days)+7*Math.trunc(l.weeks)},m=Or.fromObject({years:l.years-Math.trunc(l.years),quarters:l.quarters-Math.trunc(l.quarters),months:l.months-Math.trunc(l.months),weeks:l.weeks-Math.trunc(l.weeks),days:l.days-Math.trunc(l.days),hours:l.hours,minutes:l.minutes,seconds:l.seconds,milliseconds:l.milliseconds}).as("milliseconds"),g=zk(f);let[y,v]=xJ(g,a,c.zone);return 0!==m&&(y+=m,v=c.zone.offset(y)),{ts:y,o:v}}function PT(c,l,a,h,d,f){const{setZone:m,zone:g}=a;if(c&&0!==Object.keys(c).length){const y=l||g,v=Jn.fromObject(c,{...a,zone:y,specificOffset:f});return m?v:v.setZone(g)}return Jn.invalid(new zc("unparsable",`the input "${d}" can't be parsed as ${h}`))}function ZM(c,l,a=!0){return c.isValid?Na.create(ji.create("en-US"),{allowZ:a,forceSimple:!0}).formatDateTimeFromString(c,l):null}function a3(c,l){const a=c.c.year>9999||c.c.year<0;let h="";return a&&c.c.year>=0&&(h+="+"),h+=Ms(c.c.year,a?6:4),l?(h+="-",h+=Ms(c.c.month),h+="-",h+=Ms(c.c.day)):(h+=Ms(c.c.month),h+=Ms(c.c.day)),h}function DJ(c,l,a,h,d,f){let m=Ms(c.c.hour);return l?(m+=":",m+=Ms(c.c.minute),(0!==c.c.second||!a)&&(m+=":")):m+=Ms(c.c.minute),(0!==c.c.second||!a)&&(m+=Ms(c.c.second),(0!==c.c.millisecond||!h)&&(m+=".",m+=Ms(c.c.millisecond,3))),d&&(c.isOffsetFixed&&0===c.offset&&!f?m+="Z":c.o<0?(m+="-",m+=Ms(Math.trunc(-c.o/60)),m+=":",m+=Ms(Math.trunc(-c.o%60))):(m+="+",m+=Ms(Math.trunc(c.o/60)),m+=":",m+=Ms(Math.trunc(c.o%60)))),f&&(m+="["+c.zone.ianaName+"]"),m}const AJ={month:1,day:1,hour:0,minute:0,second:0,millisecond:0},$6e={weekNumber:1,weekday:1,hour:0,minute:0,second:0,millisecond:0},Y6e={ordinal:1,hour:0,minute:0,second:0,millisecond:0},IJ=["year","month","day","hour","minute","second","millisecond"],Z6e=["weekYear","weekNumber","weekday","hour","minute","second","millisecond"],K6e=["year","ordinal","hour","minute","second","millisecond"];function RJ(c){const l={year:"year",years:"year",month:"month",months:"month",day:"day",days:"day",hour:"hour",hours:"hour",minute:"minute",minutes:"minute",quarter:"quarter",quarters:"quarter",second:"second",seconds:"second",millisecond:"millisecond",milliseconds:"millisecond",weekday:"weekday",weekdays:"weekday",weeknumber:"weekNumber",weeksnumber:"weekNumber",weeknumbers:"weekNumber",weekyear:"weekYear",weekyears:"weekYear",ordinal:"ordinal"}[c.toLowerCase()];if(!l)throw new pQ(c);return l}function PJ(c,l){const a=Bf(l.zone,zs.defaultZone),h=ji.fromObject(l),d=zs.now();let f,m;if(Pr(c.year))f=d;else{for(const v of IJ)Pr(c[v])&&(c[v]=AJ[v]);const g=TJ(c)||wJ(c);if(g)return Jn.invalid(g);const y=a.offset(d);[f,m]=YM(c,y,a)}return new Jn({ts:f,zone:a,loc:h,o:m})}function LJ(c,l,a){const h=!!Pr(a.round)||a.round,d=(m,g)=>(m=Gk(m,h||a.calendary?0:2,!0),l.loc.clone(a).relFormatter(a).format(m,g)),f=m=>a.calendary?l.hasSame(c,m)?0:l.startOf(m).diff(c.startOf(m),m).get(m):l.diff(c,m).get(m);if(a.unit)return d(f(a.unit),a.unit);for(const m of a.units){const g=f(m);if(Math.abs(g)>=1)return d(g,m)}return d(c>l?-0:0,a.units[a.units.length-1])}function OJ(c){let a,l={};return c.length>0&&"object"==typeof c[c.length-1]?(l=c[c.length-1],a=Array.from(c).slice(0,c.length-1)):a=Array.from(c),[l,a]}class Jn{constructor(l){const a=l.zone||zs.defaultZone;let h=l.invalid||(Number.isNaN(l.ts)?new zc("invalid input"):null)||(a.isValid?null:$M(a));this.ts=Pr(l.ts)?zs.now():l.ts;let d=null,f=null;if(!h)if(l.old&&l.old.ts===this.ts&&l.old.zone.equals(a))[d,f]=[l.old.c,l.old.o];else{const g=a.offset(this.ts);d=EJ(this.ts,g),h=Number.isNaN(d.year)?new zc("invalid input"):null,d=h?null:d,f=h?null:g}this._zone=a,this.loc=l.loc||ji.create(),this.invalid=h,this.weekData=null,this.c=d,this.o=f,this.isLuxonDateTime=!0}static now(){return new Jn({})}static local(){const[l,a]=OJ(arguments),[h,d,f,m,g,y,v]=a;return PJ({year:h,month:d,day:f,hour:m,minute:g,second:y,millisecond:v},l)}static utc(){const[l,a]=OJ(arguments),[h,d,f,m,g,y,v]=a;return l.zone=ga.utcInstance,PJ({year:h,month:d,day:f,hour:m,minute:g,second:y,millisecond:v},l)}static fromJSDate(l,a={}){const h=function o8e(c){return"[object Date]"===Object.prototype.toString.call(c)}(l)?l.valueOf():NaN;if(Number.isNaN(h))return Jn.invalid("invalid input");const d=Bf(a.zone,zs.defaultZone);return d.isValid?new Jn({ts:h,zone:d,loc:ji.fromObject(a)}):Jn.invalid($M(d))}static fromMillis(l,a={}){if(Rm(l))return l<-CJ||l>CJ?Jn.invalid("Timestamp out of range"):new Jn({ts:l,zone:Bf(a.zone,zs.defaultZone),loc:ji.fromObject(a)});throw new jl(`fromMillis requires a numerical input, but received a ${typeof l} with value ${l}`)}static fromSeconds(l,a={}){if(Rm(l))return new Jn({ts:1e3*l,zone:Bf(a.zone,zs.defaultZone),loc:ji.fromObject(a)});throw new jl("fromSeconds requires a numerical input")}static fromObject(l,a={}){l=l||{};const h=Bf(a.zone,zs.defaultZone);if(!h.isValid)return Jn.invalid($M(h));const d=zs.now(),f=Pr(a.specificOffset)?h.offset(d):a.specificOffset,m=zM(l,RJ),g=!Pr(m.ordinal),y=!Pr(m.year),v=!Pr(m.month)||!Pr(m.day),_=y||v,S=m.weekYear||m.weekNumber,b=ji.fromObject(a);if((_||g)&&S)throw new TT("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(v&&g)throw new TT("Can't mix ordinal dates with month/day");const T=S||m.weekday&&!_;let x,E,D=EJ(d,f);T?(x=Z6e,E=$6e,D=r3(D)):g?(x=K6e,E=Y6e,D=i3(D)):(x=IJ,E=AJ);let I=!1;for(const q of x)Pr(m[q])?m[q]=I?E[q]:D[q]:I=!0;const M=T?function X6e(c){const l=VM(c.weekYear),a=Yh(c.weekNumber,1,UM(c.weekYear)),h=Yh(c.weekday,1,7);return l?a?!h&&Xl("weekday",c.weekday):Xl("week",c.week):Xl("weekYear",c.weekYear)}(m):g?function q6e(c){const l=VM(c.year),a=Yh(c.ordinal,1,CT(c.year));return l?!a&&Xl("ordinal",c.ordinal):Xl("year",c.year)}(m):TJ(m),L=M||wJ(m);if(L)return Jn.invalid(L);const P=T?SJ(m):g?bJ(m):m,[F,V]=YM(P,f,h),z=new Jn({ts:F,zone:h,o:V,loc:b});return m.weekday&&_&&l.weekday!==z.weekday?Jn.invalid("mismatched weekday",`you can't specify both a weekday of ${m.weekday} and a date of ${z.toISO()}`):z}static fromISO(l,a={}){const[h,d]=function d6e(c){return Yv(c,[s6e,sJ],[o6e,c6e],[a6e,u6e],[l6e,h6e])}(l);return PT(h,d,a,"ISO 8601",l)}static fromRFC2822(l,a={}){const[h,d]=function f6e(c){return Yv(function e6e(c){return c.replace(/\([^)]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim()}(c),[Q8e,J8e])}(l);return PT(h,d,a,"RFC 2822",l)}static fromHTTP(l,a={}){const[h,d]=function p6e(c){return Yv(c,[t6e,iJ],[n6e,iJ],[r6e,i6e])}(l);return PT(h,d,a,"HTTP",a)}static fromFormat(l,a,h={}){if(Pr(l)||Pr(a))throw new jl("fromFormat requires an input string and a format");const{locale:d=null,numberingSystem:f=null}=h,m=ji.fromOpts({locale:d,numberingSystem:f,defaultToEN:!0}),[g,y,v,_]=function W6e(c,l,a){const{result:h,zone:d,specificOffset:f,invalidReason:m}=pJ(c,l,a);return[h,d,f,m]}(m,l,a);return _?Jn.invalid(_):PT(g,y,h,`format ${a}`,l,v)}static fromString(l,a,h={}){return Jn.fromFormat(l,a,h)}static fromSQL(l,a={}){const[h,d]=function b6e(c){return Yv(c,[v6e,sJ],[_6e,S6e])}(l);return PT(h,d,a,"SQL",l)}static invalid(l,a=null){if(!l)throw new jl("need to specify a reason the DateTime is invalid");const h=l instanceof zc?l:new zc(l,a);if(zs.throwOnInvalid)throw new e8e(h);return new Jn({invalid:h})}static isDateTime(l){return l&&l.isLuxonDateTime||!1}get(l){return this[l]}get isValid(){return null===this.invalid}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}get outputCalendar(){return this.isValid?this.loc.outputCalendar:null}get zone(){return this._zone}get zoneName(){return this.isValid?this.zone.name:null}get year(){return this.isValid?this.c.year:NaN}get quarter(){return this.isValid?Math.ceil(this.c.month/3):NaN}get month(){return this.isValid?this.c.month:NaN}get day(){return this.isValid?this.c.day:NaN}get hour(){return this.isValid?this.c.hour:NaN}get minute(){return this.isValid?this.c.minute:NaN}get second(){return this.isValid?this.c.second:NaN}get millisecond(){return this.isValid?this.c.millisecond:NaN}get weekYear(){return this.isValid?o3(this).weekYear:NaN}get weekNumber(){return this.isValid?o3(this).weekNumber:NaN}get weekday(){return this.isValid?o3(this).weekday:NaN}get ordinal(){return this.isValid?i3(this.c).ordinal:NaN}get monthShort(){return this.isValid?qM.months("short",{locObj:this.loc})[this.month-1]:null}get monthLong(){return this.isValid?qM.months("long",{locObj:this.loc})[this.month-1]:null}get weekdayShort(){return this.isValid?qM.weekdays("short",{locObj:this.loc})[this.weekday-1]:null}get weekdayLong(){return this.isValid?qM.weekdays("long",{locObj:this.loc})[this.weekday-1]:null}get offset(){return this.isValid?+this.o:NaN}get offsetNameShort(){return this.isValid?this.zone.offsetName(this.ts,{format:"short",locale:this.locale}):null}get offsetNameLong(){return this.isValid?this.zone.offsetName(this.ts,{format:"long",locale:this.locale}):null}get isOffsetFixed(){return this.isValid?this.zone.isUniversal:null}get isInDST(){return!this.isOffsetFixed&&(this.offset>this.set({month:1,day:1}).offset||this.offset>this.set({month:5}).offset)}get isInLeapYear(){return wT(this.year)}get daysInMonth(){return BM(this.year,this.month)}get daysInYear(){return this.isValid?CT(this.year):NaN}get weeksInWeekYear(){return this.isValid?UM(this.weekYear):NaN}resolvedLocaleOptions(l={}){const{locale:a,numberingSystem:h,calendar:d}=Na.create(this.loc.clone(l),l).resolvedOptions(this);return{locale:a,numberingSystem:h,outputCalendar:d}}toUTC(l=0,a={}){return this.setZone(ga.instance(l),a)}toLocal(){return this.setZone(zs.defaultZone)}setZone(l,{keepLocalTime:a=!1,keepCalendarTime:h=!1}={}){if((l=Bf(l,zs.defaultZone)).equals(this.zone))return this;if(l.isValid){let d=this.ts;if(a||h){const f=l.offset(this.ts),m=this.toObject();[d]=YM(m,f,l)}return RT(this,{ts:d,zone:l})}return Jn.invalid($M(l))}reconfigure({locale:l,numberingSystem:a,outputCalendar:h}={}){return RT(this,{loc:this.loc.clone({locale:l,numberingSystem:a,outputCalendar:h})})}setLocale(l){return this.reconfigure({locale:l})}set(l){if(!this.isValid)return this;const a=zM(l,RJ),h=!Pr(a.weekYear)||!Pr(a.weekNumber)||!Pr(a.weekday),d=!Pr(a.ordinal),f=!Pr(a.year),m=!Pr(a.month)||!Pr(a.day);if((f||m||d)&&(a.weekYear||a.weekNumber))throw new TT("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(m&&d)throw new TT("Can't mix ordinal dates with month/day");let v;h?v=SJ({...r3(this.c),...a}):Pr(a.ordinal)?(v={...this.toObject(),...a},Pr(a.day)&&(v.day=Math.min(BM(v.year,v.month),v.day))):v=bJ({...i3(this.c),...a});const[_,S]=YM(v,this.o,this.zone);return RT(this,{ts:_,o:S})}plus(l){return this.isValid?RT(this,MJ(this,Or.fromDurationLike(l))):this}minus(l){return this.isValid?RT(this,MJ(this,Or.fromDurationLike(l).negate())):this}startOf(l){if(!this.isValid)return this;const a={},h=Or.normalizeUnit(l);switch(h){case"years":a.month=1;case"quarters":case"months":a.day=1;case"weeks":case"days":a.hour=0;case"hours":a.minute=0;case"minutes":a.second=0;case"seconds":a.millisecond=0}if("weeks"===h&&(a.weekday=1),"quarters"===h){const d=Math.ceil(this.month/3);a.month=3*(d-1)+1}return this.set(a)}endOf(l){return this.isValid?this.plus({[l]:1}).startOf(l).minus(1):this}toFormat(l,a={}){return this.isValid?Na.create(this.loc.redefaultToEN(a)).formatDateTimeFromString(this,l):s3}toLocaleString(l=Bk,a={}){return this.isValid?Na.create(this.loc.clone(a),l).formatDateTime(this):s3}toLocaleParts(l={}){return this.isValid?Na.create(this.loc.clone(l),l).formatDateTimeParts(this):[]}toISO({format:l="extended",suppressSeconds:a=!1,suppressMilliseconds:h=!1,includeOffset:d=!0,extendedZone:f=!1}={}){if(!this.isValid)return null;const m="extended"===l;let g=a3(this,m);return g+="T",g+=DJ(this,m,a,h,d,f),g}toISODate({format:l="extended"}={}){return this.isValid?a3(this,"extended"===l):null}toISOWeekDate(){return ZM(this,"kkkk-'W'WW-c")}toISOTime({suppressMilliseconds:l=!1,suppressSeconds:a=!1,includeOffset:h=!0,includePrefix:d=!1,extendedZone:f=!1,format:m="extended"}={}){return this.isValid?(d?"T":"")+DJ(this,"extended"===m,a,l,h,f):null}toRFC2822(){return ZM(this,"EEE, dd LLL yyyy HH:mm:ss ZZZ",!1)}toHTTP(){return ZM(this.toUTC(),"EEE, dd LLL yyyy HH:mm:ss 'GMT'")}toSQLDate(){return this.isValid?a3(this,!0):null}toSQLTime({includeOffset:l=!0,includeZone:a=!1,includeOffsetSpace:h=!0}={}){let d="HH:mm:ss.SSS";return(a||l)&&(h&&(d+=" "),a?d+="z":l&&(d+="ZZ")),ZM(this,d,!0)}toSQL(l={}){return this.isValid?`${this.toSQLDate()} ${this.toSQLTime(l)}`:null}toString(){return this.isValid?this.toISO():s3}valueOf(){return this.toMillis()}toMillis(){return this.isValid?this.ts:NaN}toSeconds(){return this.isValid?this.ts/1e3:NaN}toUnixInteger(){return this.isValid?Math.floor(this.ts/1e3):NaN}toJSON(){return this.toISO()}toBSON(){return this.toJSDate()}toObject(l={}){if(!this.isValid)return{};const a={...this.c};return l.includeConfig&&(a.outputCalendar=this.outputCalendar,a.numberingSystem=this.loc.numberingSystem,a.locale=this.loc.locale),a}toJSDate(){return new Date(this.isValid?this.ts:NaN)}diff(l,a="milliseconds",h={}){if(!this.isValid||!l.isValid)return Or.invalid("created by diffing an invalid DateTime");const d={locale:this.locale,numberingSystem:this.numberingSystem,...h},f=function a8e(c){return Array.isArray(c)?c:[c]}(a).map(Or.normalizeUnit),m=l.valueOf()>this.valueOf(),v=function I6e(c,l,a,h){let[d,f,m,g]=function A6e(c,l,a){const h=[["years",(g,y)=>y.year-g.year],["quarters",(g,y)=>y.quarter-g.quarter],["months",(g,y)=>y.month-g.month+12*(y.year-g.year)],["weeks",(g,y)=>{const v=lJ(g,y);return(v-v%7)/7}],["days",lJ]],d={};let f,m;for(const[g,y]of h)if(a.indexOf(g)>=0){f=g;let v=y(c,l);m=c.plus({[g]:v}),m>l?(c=c.plus({[g]:v-1}),v-=1):c=m,d[g]=v}return[c,d,m,f]}(c,l,a);const y=l-d,v=a.filter(S=>["hours","minutes","seconds","milliseconds"].indexOf(S)>=0);0===v.length&&(m<l&&(m=d.plus({[g]:1})),m!==d&&(f[g]=(f[g]||0)+y/(m-d)));const _=Or.fromObject(f,h);return v.length>0?Or.fromMillis(y,h).shiftTo(...v).plus(_):_}(m?this:l,m?l:this,f,d);return m?v.negate():v}diffNow(l="milliseconds",a={}){return this.diff(Jn.now(),l,a)}until(l){return this.isValid?Wi.fromDateTimes(this,l):this}hasSame(l,a){if(!this.isValid)return!1;const h=l.valueOf(),d=this.setZone(l.zone,{keepLocalTime:!0});return d.startOf(a)<=h&&h<=d.endOf(a)}equals(l){return this.isValid&&l.isValid&&this.valueOf()===l.valueOf()&&this.zone.equals(l.zone)&&this.loc.equals(l.loc)}toRelative(l={}){if(!this.isValid)return null;const a=l.base||Jn.fromObject({},{zone:this.zone}),h=l.padding?this<a?-l.padding:l.padding:0;let d=["years","months","days","hours","minutes","seconds"],f=l.unit;return Array.isArray(l.unit)&&(d=l.unit,f=void 0),LJ(a,this.plus(h),{...l,numeric:"always",units:d,unit:f})}toRelativeCalendar(l={}){return this.isValid?LJ(l.base||Jn.fromObject({},{zone:this.zone}),this,{...l,numeric:"auto",units:["years","months","days"],calendary:!0}):null}static min(...l){if(!l.every(Jn.isDateTime))throw new jl("min requires all arguments be DateTimes");return NQ(l,a=>a.valueOf(),Math.min)}static max(...l){if(!l.every(Jn.isDateTime))throw new jl("max requires all arguments be DateTimes");return NQ(l,a=>a.valueOf(),Math.max)}static fromFormatExplain(l,a,h={}){const{locale:d=null,numberingSystem:f=null}=h;return pJ(ji.fromOpts({locale:d,numberingSystem:f,defaultToEN:!0}),l,a)}static fromStringExplain(l,a,h={}){return Jn.fromFormatExplain(l,a,h)}static get DATE_SHORT(){return Bk}static get DATE_MED(){return mQ}static get DATE_MED_WITH_WEEKDAY(){return r8e}static get DATE_FULL(){return gQ}static get DATE_HUGE(){return yQ}static get TIME_SIMPLE(){return vQ}static get TIME_WITH_SECONDS(){return _Q}static get TIME_WITH_SHORT_OFFSET(){return SQ}static get TIME_WITH_LONG_OFFSET(){return bQ}static get TIME_24_SIMPLE(){return TQ}static get TIME_24_WITH_SECONDS(){return wQ}static get TIME_24_WITH_SHORT_OFFSET(){return CQ}static get TIME_24_WITH_LONG_OFFSET(){return xQ}static get DATETIME_SHORT(){return EQ}static get DATETIME_SHORT_WITH_SECONDS(){return MQ}static get DATETIME_MED(){return DQ}static get DATETIME_MED_WITH_SECONDS(){return AQ}static get DATETIME_MED_WITH_WEEKDAY(){return i8e}static get DATETIME_FULL(){return IQ}static get DATETIME_FULL_WITH_SECONDS(){return RQ}static get DATETIME_HUGE(){return PQ}static get DATETIME_HUGE_WITH_SECONDS(){return LQ}}function LT(c){if(Jn.isDateTime(c))return c;if(c&&c.valueOf&&Rm(c.valueOf()))return Jn.fromJSDate(c);if(c&&"object"==typeof c)return Jn.fromObject(c);throw new jl(`Unknown datetime argument: ${c}, of type ${typeof c}`)}function NJ(c){if(!c)return;const l=[],a=c.split(",");for(const h in a)if(a[h]){const d=a[h].split("-");if(1===d.length)l.push(a[h]);else if(2===d.length){const f=d[0].charCodeAt(0),m=d[1].charCodeAt(0);if(f<=m)for(let g=f;g<=m;g++)l.push(String.fromCharCode(g).toLowerCase());else for(let g=f;g>=m;g--)l.push(String.fromCharCode(g).toLowerCase())}}return l}let FJ=(()=>{class c{constructor(a,h){this.wmtsClient=a,this.http=h}checkContext(a){return function Wze(c){let l;return c?.properties?.links&&(l=c.properties.links.profiles.find(a=>"http://www.opengis.net/spec/owc-geojson/1.0/req/core"===a.href)),!!l||(console.error("this is not a valid OWS Context v1.0!"),!1)}(a)}getContextTitle(a){return a.properties.title}getContextPublisher(a){return a.properties.publisher?a.properties.publisher:null}getContextExtent(a){return a.bbox?a.bbox:null}getResources(a){return a.features}getGroupResources(a){return a.features.filter(d=>{const f=this.getLayerGroupFromFolder(d);return f&&!Object.keys(Pl).includes(f)})}getSingleResources(a){return a.features.filter(d=>{const f=this.getLayerGroupFromFolder(d);return!f||Object.keys(Pl).includes(f)})}getResourceTitle(a){return a.properties.title}getResourceFolder(a){return a.properties.folder}getLayerGroupFromFolder(a){const h=this.getResourceFolder(a);if(h){const d=h.split("/");if(1===d.length){if(!Pl[h])return h}else{if(2===d.length)return Pl[d[0]]||console.warn(`Folder (${h}) should be named like: ${Object.keys(Pl).map(m=>`${m}/<FolderName>`).join(" | ")}`),d[1];console.log("only one Folder hierarchy is implemented",d)}}}getFilterType(a){if(a.properties.folder){const d=a.properties.folder.split("/")[0];if(Pl[d])return d}}getResourceUpdated(a){return a.properties.updated}getResourceDate(a){return a.properties.date?a.properties.date:null}getResourceOfferings(a){return a.properties.offerings?a.properties.offerings:null}isActive(a){let h=!0;return(!1===a.properties.active||a.properties?.active)&&(h=a.properties.active),h}getResourceDescription(a){let h="";return a.properties.abstract&&(h=a.properties.abstract),h}getResourceOpacity(a){let h=1;return a.properties?.opacity&&(h=a.properties.opacity),h}getResourceAttribution(a){let h="";return a.properties?.attribution?h=a.properties.attribution:a.properties.rights&&(h=a.properties.rights),h}getResourceShards(a){if(a.properties?.shards)return a.properties.shards}getResourceMinMaxZoom(a,h="EPSG:4326"){const d={minZoom:null,maxZoom:null};return a.properties.minZoom?d.minZoom=a.properties.minZoom:a.properties.maxscaledenominator&&(d.minZoom=this.scaleDenominatorToZoom(a.properties.maxscaledenominator,h)||null),a.properties.maxZoom?d.maxZoom=a.properties.maxZoom:a.properties.minscaledenominator&&(d.maxZoom=this.scaleDenominatorToZoom(a.properties.minscaledenominator,h)||null),d}getTimeValueFromDimensions(a,h){if(null!==a)if(/,/g.test(a)){const f=a.split(",");if(f.length>0){const m=[];for(const g of f){const y=this.parseSingleTimeOrPeriod(g);"object"==typeof y&&y.interval&&(!y.periodicity&&h?y.periodicity=h:!y.periodicity&&!h&&console.warn("Interval without a period",a,h)),m.push(y)}return m}}else{const f=this.parseSingleTimeOrPeriod(a);if("object"==typeof f&&f.interval)return!f.periodicity&&h?f.periodicity=h:!f.periodicity&&!h&&console.warn("Interval without a period",a,h),f;if("string"==typeof f)return[f]}}parseSingleTimeOrPeriod(a){const h=Jn.fromISO(a);if(h.isValid)return h.toUTC().toISO();{const d=Wi.fromISO(a);return d.isValid?{periodicity:this.parseISO8601Period(a),interval:`${d.start.toUTC().toISO()}/${d.end.toUTC().toISO()}`}:(console.warn("no Interval or not valid",a),null)}}parseISO8601Period(a){const h=a.match(/P\d*[YMWD](T\d\d[HMS])*/);if(h)return h[0]}getResourceDimensions(a){if(!a.properties.dimensions)return;const h={};for(const d of a.properties.dimensions){const f=d.name;"time"===f?(h.time=this.getTimeDimensions(a.properties.dimensions),null===h.time.values&&console.log("check to get time dimensions value from OGC Service later!!",a)):"elevation"===f?(h.elevation=this.getElevationDimension(a.properties.dimensions),null===h.elevation.values&&console.log("check to get elevation dimensions value from OGC Service later!!",a)):h[f]=d}return h}getTimeDimensions(a){let h={values:null,units:null};const d=a.find(m=>"time"===m.name);if(!d)return;const f=this.getTimeValueFromDimensions(d.values,d?.display?.period);return h={values:null,units:d.units,display:{}},Array.isArray(f)?h.values=f:f&&"string"!=typeof f&&f.interval&&f.periodicity&&(h.values=f,f.periodicity&&(h.display.period=f.periodicity)),d?.display?.format&&(h.display.format=d.display.format),h}getElevationDimension(a){const h={values:null,units:null},d=a.find(f=>"elevation"===f.name);if(d)return h.values=d.value,h.units=d.units,d.display&&(h.display=d.display),h}getLayertypeFromOfferingCode(a){return kk(a.code)?fc:Vk(a.code)?pc:dQ(a.code)?yh:function Qze(c){return c===aQ}(a.code)?gh:function Jze(c){return c===lQ}(a.code)?hu:fQ(a.code)?Od:kM(a.code)?Rl:a.code}checkIfServiceOffering(a){return!(a.contents||!a.operations)}checkIfDataOffering(a){return!(!a.contents||a.operations)}getLegendUrl(a){let h="";if(a.styles){const d=a.styles.find(f=>f.default);if(d)return d.legendURL}else a.legendUrl&&(h=a.legendUrl);return h}getLayers(a,h){const d=[],f=this.getResources(a),m=[];return f.forEach(g=>{const y=this.createLayerOrGroupFromResource(g,a,h,m);d.push(y)}),LE(d).pipe(ve(g=>g.filter(y=>y))).pipe(ve(g=>g.reverse()))}createLayerOrGroupFromResource(a,h,d,f){const m=this.getGroupResources(h),g=this.getLayerGroupFromFolder(a);if(g){if(f.includes(g))return St(null);{f.push(g);const y=m.filter(_=>this.getLayerGroupFromFolder(_)===g).reverse();return this.createLayerGroup(g,y,h,d)}}return this.createLayerFromDefaultOffering(a,h,d)}createLayerGroup(a,h,d,f){const m=[];let g=null;for(const v of h)g=this.getFilterType(v),m.push(this.createLayerFromDefaultOffering(v,d,f));return LE(m).pipe(ve(v=>v.filter(_=>_))).pipe(ve(v=>{if(v.length){if(g===Pl.Baselayers){const _=v.filter(E=>E.description),S=_.map(E=>E.description),b=v.map(E=>E.legendImg).filter(E=>E),T={id:`${a}_${v.map(E=>E.id).join(" ")}`.replace(/\s/g,"_"),name:a,layers:v,filtertype:Pl.Baselayers};return S.length&&(T.description=S.map((E,D)=>this.generateAbstractFromLayerDescription(E,_[D].id)).join(";\r\n")),b&&(T.legendImg=b[0]),new PC(T)}return new Oi({id:`${a}_${v.map(S=>S.id).join(" ")}`.replace(/\s/g,"_"),name:a,layers:v,filtertype:v[0].filtertype})}})).pipe(qr(v=>v instanceof Oi||v instanceof Ys))}createLayerFromDefaultOffering(a,h,d){const f=a.properties?.offerings;if(f){const m=f.find(g=>kk(g.code))||f.find(g=>Vk(g.code))||f.find(g=>dQ(g.code))||f.find(g=>kM(g.code))||f[0];return this.createLayerFromOffering(m,a,h,d)}return St(null)}createLayerFromOffering(a,h,d,f){const m=this.getLayertypeFromOfferingCode(a);return this.isRasterLayerType(m)&&this.isVectorLayerType(m)?cC(this.createRasterLayerFromOffering(a,h,d,f),this.createVectorLayerFromOffering(a,h,d,f)).pipe(qr(_=>_ instanceof Ys)):this.isRasterLayerType(m)?this.createRasterLayerFromOffering(a,h,d,f):this.isVectorLayerType(m)?this.createVectorLayerFromOffering(a,h,d,f):(console.warn(`This type of service (${m}) has not been implemented yet.`,a),St(null))}createVectorLayerFromOffering(a,h,d,f){const m=this.getLayertypeFromOfferingCode(a);let g=St(null);switch(m){case yh:g=this.createWfsLayerFromOffering(a,h,d);break;case Rl:g=this.createVectorTileLayerFromOffering(a,h,d,f);break;case hu:case gh:g=this.createDataVectorLayerFromOffering(a,h,d);break;default:console.warn(`This type of layer '${m}' / offering '${a.code}' cannot be converted into a VectorLayer`,a)}return g}isVectorLayerType(a){return[yh,gh,hu,Rl].includes(a)}getVectorLayerOptions(a,h,d,f){const m=this.getLayerOptions(a,h,d);if(this.isVectorLayerType(m.type)){const{minZoom:g,maxZoom:y}=this.getResourceMinMaxZoom(h,f),v=NJ(this.getResourceShards(h));return{...m,type:m.type,subdomains:v,maxZoom:y,minZoom:g}}console.error(`The layer ${m.id} is not a VectorLayer`,m)}getWfsOptions(a){let d=null;if(a.operations.find(f=>f.code===FM)){const{url:f,searchParams:m}=this.checkWfsParams(a);f&&m&&(d=`${f}?${m.toString()}`)}return d}checkWfsParams(a){const{url:h,searchParams:d}=this.parseOperationUrl(a,FM),f_typeNames=d.get("TYPENAME")||d.get("TYPENAMES"),f_version=d.get("VERSION"),f_service=d.get("SERVICE"),f_request=d.get("REQUEST");return(f_typeNames||f_version)&&f_service&&f_request?{url:h,searchParams:d}:(console.warn(`URL does not contain the minimum required arguments for a WFS typeName: ${f_typeNames}, version: ${f_version}, service: ${f_service}, request: ${f_request}`,`${h}?${d.toString()}`),{url:null,searchParams:null})}createRasterLayerFromOffering(a,h,d,f){const m=this.getLayertypeFromOfferingCode(a);let g=St(null);switch(m){case fc:g=this.createWmsLayerFromOffering(a,h,d,f);break;case pc:g=this.createWmtsLayerFromOffering(a,h,d,f);break;case Od:g=this.createXyzLayerFromOffering(a,h,d,f);break;case Rl:g=this.createTmsRasterLayerFromOffering(a,h,d,f);break;default:console.warn(`This type of offering '${a.code}' cannot be converted into a RasterLayer.`,a)}return g}isRasterLayerType(a){return[fc,pc,Od,Rl].includes(a)}createVectorTileLayerFromOffering(a,h,d,f){if(!kM(a.code))return St(null);if(!a.operations.find(g=>"application/vnd.mapbox-vector-tile"===g.type))return St(null);{const g=this.getVectorLayerOptions(a,h,d),y=a.operations.find(v=>v.code===bT).href;if(g.url=y,!a.styles||"OpenMapStyle"!==a.styles[0]?.content.type)return St(new is(g));{const v=a.styles[0].content;if(v?.styleSource){let _;return g.options?g.options.style||(g.options.style={},g.options.styleSource=v.styleSource):g.options={styleSource:v.styleSource,style:null},v?.content?_=St("string"==typeof v.content?JSON.parse(v.content):v.content):v?.href?_=this.http.get(v.href):console.warn("Couldn't find style for Tms-Offering",a),_?_.pipe(ve(S=>(g.options.style=S,new is(g)))):St(new is(g))}}}}createWfsLayerFromOffering(a,h,d){let f;if(a.operations){f=this.getWfsOptions(a);const m=this.getVectorLayerOptions(a,h,d);m.url=f;const g=new is(m);return h.bbox?g.bbox=h.bbox:d&&d.bbox&&(g.bbox=d.bbox),St(g)}if(null===f)return St(null)}createDataVectorLayerFromOffering(a,h,d){if(a.contents){let f,m;a.contents.forEach(v=>{v?.content?"application/geo+json"===v.type?f="string"==typeof v.content?JSON.parse(v.content):v.content:"application/vnd.google-earth.kml+xml"===v.type&&(f=v.content):v?.href&&(m=v.href)});const g=this.getVectorLayerOptions(a,h,d);return f?g.data=f:m&&(g.url=m),h.bbox?g.bbox=h.bbox:d&&d.bbox&&(g.bbox=d.bbox),St(new is(g))}return St(null)}createTmsRasterLayerFromOffering(a,h,d,f){if(kM(a.code)){if(a.operations.find(g=>"image/png"===g.type||"image/jpeg"===g.type)){const g=this.getRasterLayerOptions(a,h,d,f);return g.type="xyz",St(new Ko(g))}return St(null)}return St(null)}createWmtsLayerFromOffering(a,h,d,f){return Vk(a.code)?this.getWmtsOptions(a,h,d,f).pipe(ve(m=>new Ca(m))):St(null)}createWmsLayerFromOffering(a,h,d,f){if(kk(a.code)){const m=this.getWmsOptions(a,h,d,f);return St(new gy(m))}return St(null)}createXyzLayerFromOffering(a,h,d,f){if(fQ(a.code)){const m=this.getRasterLayerOptions(a,h,d,f);return m.type="xyz",St(new Ko(m))}return St(null)}getWmtsOptions(a,h,d,f){const m=this.getRasterLayerOptions(a,h,d,f),{searchParams:g}=this.parseOperationUrl(a,Lk),y={layer:g.get("LAYER"),style:"default",projection:f},v=a?.styles?.find(_=>_.default);return v&&v.name?y.style=v.name:g.has("STYLE")&&(y.style=g.get("STYLE")),g.has("FORMAT")&&(y.format=g.get("FORMAT")),g.has("VERSION")&&(y.version=g.get("VERSION")),this.getMatrixSetForWMTS(a,f).pipe(ve(_=>{const S={...m,type:"wmts",params:y};return _&&(S.params.matrixSetOptions={matrixSet:_.matrixSet,matrixIds:_.matrixIds,resolutions:_.resolutions}),S}))}parseOperationUrl(a,h){const d={url:null,searchParams:null};if(a.operations){const f=a.operations.find(m=>m.code===h);if(f){const{url:m,searchParams:g}=this.getJsonFromUri(f.href);d.url=m,d.searchParams=g}else console.error(`There is no ${h} -operation in the offering ${a.code}.`,a)}else console.error(`The offering ${a.code} has no operations.`,a);return d}getMatrixSetForWMTS(a,h){if(a?.matrixSets)return St(a.matrixSets.find(f=>f.srs===h));if(null===a.matrixSets)return St(null);{const d=this.parseOperationUrl(a,"GetCapabilities").url;return this.wmtsClient.getCapabilities(d).pipe(ve(f=>{const m=f.value.contents.tileMatrixSet;let g=m.find(v=>v.identifier.value===h);if(!g&&"EPSG:3857"===h){const v="EPSG:900913";g=m.find(_=>_.identifier.value===v)}return{srs:h,matrixSet:g.identifier.value,matrixIds:g.tileMatrix.map(v=>v.identifier.value),resolutions:g.tileMatrix.map(v=>v.scaleDenominator),origin:{x:g.tileMatrix[0].topLeftCorner[1],y:g.tileMatrix[0].topLeftCorner[0]},tilesize:g.tileMatrix[0].tileHeight}}))}}getWmsOptions(a,h,d,f){const m=this.getRasterLayerOptions(a,h,d,f);if(m?.type===fc){const{searchParams:g}=this.parseOperationUrl(a,Pk),y={LAYERS:g.get("LAYERS"),TRANSPARENT:!0},v=a?.styles?.find(S=>S.default);return v&&v.name?y.STYLES=v.name:g.has("STYLES")&&(y.STYLES=g.get("STYLES")),g.has("FORMAT")&&(y.FORMAT=g.get("FORMAT")),g.has("TIME")&&(y.TIME=g.get("TIME")),g.has("VERSION")&&(y.VERSION=g.get("VERSION")),g.has("TILED")&&(y.TILED=g.get("TILED")),g.has("CQL_FILTER")&&(y.CQL_FILTER=g.get("CQL_FILTER")),g.has("FILTER")&&(y.FILTER=g.get("FILTER")),{...m,type:"wms",params:y}}console.warn(`resource ${h.id} cannot be converted into a WMS - Layer`,a)}getRasterLayerOptions(a,h,d,f){const m=this.getLayerOptions(a,h,d);if(this.isRasterLayerType(m.type)){let g,y;const v=h.properties?.dimensions;v&&(g=this.getTimeDimensions(v),y=this.getElevationDimension(v));const{minZoom:_,maxZoom:S}=this.getResourceMinMaxZoom(h,f),b=NJ(this.getResourceShards(h)),T=a.operations.find(x=>function Zze(c){return!!function Nk(c){return"code"in c&&"method"in c&&(!c.request||Fk(c.request))&&(!c.result||Fk(c.result))}(c)&&[Pk,Lk,bT].includes(c.code)}(x));if(T){const x={...m,type:m.type,url:this.getJsonFromUri(T.href).url};return _&&(x.minZoom=_),S&&(x.maxZoom=S),b?.length&&(x.subdomains=b),g&&(x.dimensions||(x.dimensions={}),x.dimensions.time=g),y&&(x.dimensions||(x.dimensions={}),x.dimensions.elevation=y),x}console.warn("There is no Raster operation for the offering",a)}else console.error(`The layer ${m.id} is not a RasterLayer`,m)}getLayerOptions(a,h,d){const f={id:h.id,type:this.getLayertypeFromOfferingCode(a),name:this.getResourceTitle(h),removable:!0,continuousWorld:!1,opacity:this.getResourceOpacity(h),displayName:this.getResourceTitle(h),visible:this.isActive(h),attribution:this.getResourceAttribution(h),dimensions:this.getResourceDimensions(h),legendImg:this.getLegendUrl(a),styles:a.styles,description:this.getResourceDescription(h)};h.bbox?f.bbox=h.bbox:d&&d.bbox&&(f.bbox=d.bbox),h.properties?.folder===Pl.Baselayers&&!h.bbox&&(f.bbox=null);const m=this.getFilterType(h);return m&&(f.filtertype=m),f}scaleDenominatorToZoom(a,h){const d=cn(h);if(!d)return console.error(`The projection '${h}' is unknown.You'll have to manually register it with 'proj4.defs'.`),null;if(!d.getWorldExtent())return console.error(`No world extent given for projection '${h}'.`),null;const f=1/d.getMetersPerUnit(),m=d.getWorldExtent(),v=Math.max(m[2]-m[0],m[3]-m[1]);return Math.log2(v/(a*f/2571.42*256))}getJsonFromUri(a){let h=null;h=0===a.indexOf("http://")||0===a.indexOf("https://")?new URL(a):new URL(a,window.location.origin);const d=new URLSearchParams;h.searchParams.forEach((m,g)=>{d.set(g.toUpperCase(),m)});const f=-1!==a.indexOf("?")?a.indexOf("?"):a.length;return{url:a.substring(0,f),searchParams:d}}generateOwsContextFrom(a,h,d,f){const m=[],g=[],y=[];h.forEach(b=>{b.filtertype===Pl.Overlays?m.push(b):b.filtertype===Pl.Layers?g.push(b):b.filtertype===Pl.Baselayers&&y.push(b)});const v=[...m.reverse(),...g.reverse(),...y.reverse()];let _={links:{profiles:[{href:"http://www.opengis.net/spec/owc-geojson/1.0/req/core"}]},lang:"en",title:"This is an automatically created context",updated:(new Date).toISOString(),subtitle:`Context created from ${v.map(b=>`Layer:${b.id}`).join(", ")}`};f&&(_=Object.assign(_,f));const S={id:a,type:"FeatureCollection",properties:_,features:[]};return d&&(S.bbox=d),v.forEach(b=>{if(b instanceof Oi){const T=b.name;[...b.layers].reverse().forEach(E=>{const D=this.generateResourceFromLayer(E,T);S.features.push(D)})}else{const T=this.generateResourceFromLayer(b);S.features.push(T)}}),S}generateAbstractFromLayerDescription(a,h){return"string"==typeof a?a:a.inputs?.description?JSON.stringify(a):`Could not generate description from layer: ${h} - dynamic component`}generateResourceFromLayer(a,h){const d={id:a.id,properties:{title:a.displayName||a.name,opacity:a.opacity,active:a.visible,abstract:this.generateAbstractFromLayerDescription(a.description,a.id),rights:a.attribution,minZoom:a.minZoom,maxZoom:a.maxZoom,updated:(new Date).toISOString(),offerings:[this.generateOfferingFromLayer(a)]},bbox:a.bbox,type:"Feature",geometry:null};return d.properties.folder=h?`${a.filtertype}/${h}`:`${a.filtertype}`,(a instanceof Ko&&a.subdomains||a instanceof is&&a.subdomains)&&(d.properties.shards=`${a.subdomains[0]}-${a.subdomains[a.subdomains.length-1]}`),a.dimensions&&(d.properties.dimensions=this.generateDimensionsFromLayer(a)),d}generateOfferingFromLayer(a){const h={code:this.getOfferingCodeFromLayer(a),title:a.name,styles:[]};return a.type===hu||a.type===gh?h.contents=this.getContentsFromLayer(a):h.operations=this.getOperationsFromLayer(a),a instanceof Ko?(a?.params?.STYLES||a?.params?.style||a.legendImg)&&h.styles.push({name:a?.params?.STYLES||a?.params?.style||null,title:`${a.name}-StyleTitle`,default:!!(a?.params?.STYLES||a?.params?.style||a.legendImg),legendURL:"string"==typeof a.legendImg?a.legendImg:null}):a instanceof is&&"tms"===a.type?a?.options?.style&&a?.options?.styleSource&&h.styles.push({name:null,title:`${a.name}-StyleTitle`,default:!0,legendURL:"string"==typeof a.legendImg?a.legendImg:null,content:{type:"OpenMapStyle",styleSource:a.options.styleSource,content:a.options.style}}):h.styles.push({name:null,title:`${a.name}-StyleTitle`,default:!0,legendURL:"string"==typeof a.legendImg?a.legendImg:null}),h.styles.length||delete h.styles,h}getOfferingCodeFromLayer(a){switch(a.type){case fc:return iQ;case pc:return oQ;case hu:return lQ;case Od:return cQ;case yh:return sQ;case gh:return aQ;case Rl:return uQ;default:return console.warn(`This type of layer (${a.type}) has not been implemented yet.`,a),null}}getContentsFromLayer(a){const h=[];switch(a.type){case hu:a.data?h.push({type:"application/geo+json",content:JSON.stringify(a.data)}):a.url&&h.push({type:"application/geo+json",href:a.url});break;case gh:a.data?h.push({type:"application/vnd.google-earth.kml+xml",content:a.data}):a.url&&h.push({type:"application/vnd.google-earth.kml+xml",href:a.url});break;default:console.warn(`Cannot get contents for this type of VectorLayer: (${a.type})`,a)}return h}getOperationsFromLayer(a){if(a instanceof Ko)switch(a.type){case fc:return this.getWmsOperationsFromLayer(a);case pc:return this.getWmtsOperationsFromLayer(a);case Od:return this.getXyzOperationsFromLayer(a);case Rl:return this.getTMSRasterOperationsFromLayer(a);default:return console.warn(`Cannot get operations for this type of layer: (${a.type})`,a),[]}else if(a instanceof is)switch(a.type){case yh:return this.getWfsOperationsFromLayer(a);case Rl:return this.getTMSVectorOperationsFromLayer(a);default:return console.warn(`Cannot get operations for this type of layer: (${a.type})`,a),[]}}getXyzOperationsFromLayer(a){return[{code:bT,method:"GET",type:"image/png",href:`${a.url}`}]}getTMSRasterOperationsFromLayer(a){return[{code:bT,method:"GET",type:"image/png",href:`${a.url}`}]}getWfsOperationsFromLayer(a){const h=a.options?.version?a.options.version:"1.1.0",{url:d,searchParams:f}=this.getJsonFromUri(a.url),m=f.get("TYPENAME")||f.get("TYPENAMES");return m?[{code:FM,method:"GET",type:"application/json",href:`${d}?${f.toString()}`},{code:Ok,method:"GET",type:"application/xml",href:`${d}?service=WFS&request=GetCapabilities`},{code:"DescribeFeatureType",method:"GET",type:"application/json",href:`${d}?service=WFS&request=DescribeFeatureType&version=${h}&typeNames=${m}&outputFormat=application/json`}]:(console.warn(`URL does not contain the minimum required arguments for a WFS typeName: ${m}`,d),[])}getTMSVectorOperationsFromLayer(a){return[{code:bT,method:"GET",type:"application/vnd.mapbox-vector-tile",href:`${a.url}`}]}getWmsOperationsFromLayer(a){let h=a.url;h.endsWith("?")&&(h=h.substr(0,h.length-1));const d=new URLSearchParams;return Object.keys(a.params).forEach(v=>{const _=a.params[v];_&&d.set(v,_)}),d.set("REQUEST","GetMap"),d.set("SERVICE","WMS"),d.get("FORMAT")||d.set("FORMAT","image/png"),[{code:Pk,method:"GET",type:d.get("FORMAT"),href:`${h}?${d.toString()}`},{code:Ok,method:"GET",type:"application/xml",href:`${h}?service=WMS&version=${d.get("VERSION")}&request=GetCapabilities`},{code:hQ,method:"GET",type:"application/json",href:`${h}?service=WMS&version=${d.get("VERSION")}&request=GetFeatureInfo&TRANSPARENT=TRUE&LAYERS=${d.get("LAYERS")}&INFO_FORMAT=application/json`}]}getWmtsOperationsFromLayer(a){let h=a.url;h.endsWith("?")&&(h=h.substr(0,h.length-1));const d=new URLSearchParams;return Object.keys(a.params).forEach(v=>{const _=a.params[v];_&&d.set(v.toUpperCase(),_)}),d.set("REQUEST","GetTile"),d.set("SERVICE","WMTS"),d.get("FORMAT")||d.set("FORMAT","image/png"),d.has("MATRIXSETOPTIONS")&&d.delete("MATRIXSETOPTIONS"),[{code:Lk,href:`${h}?${d.toString()}`,method:"GET",type:d.get("FORMAT")},{code:Ok,href:`${h}?SERVICE=WMTS&REQUEST=GetCapabilities&VERSION=${d.get("VERSION")}`,method:"GET",type:"application/xml"},{code:hQ,href:`${h}?SERVICE=WMS&REQUEST=GetFeatureInfo&VERSION=${d.get("VERSION")}`,method:"GET",type:"text/html"}]}generateDimensionsFromLayer(a){const h=[];if(a?.dimensions?.time){const d={name:"time",values:null,units:"ISO8601"};a.dimensions.time.display&&(d.display=a.dimensions.time.display),d.values=Array.isArray(a.dimensions.time.values)?"string"==typeof a.dimensions.time.values[0]?a.dimensions.time.values.join(","):a.dimensions.time.values.map(f=>`${f.interval}/${f.periodicity}`).join(","):`${a.dimensions.time.values.interval}/${a.dimensions.time.values.periodicity}`,h.push(d)}if(a?.dimensions?.elevation){const d={name:"elevation",value:a.dimensions.elevation.values,units:a.dimensions.elevation.units};a.dimensions.elevation.display&&(d.display=a.dimensions.elevation.display),h.push(d)}return h.length?h:null}}return c.\u0275fac=function(a){return new(a||c)(Ae(YK),Ae(qh))},c.\u0275prov=Oe({token:c,factory:c.\u0275fac,providedIn:"root"}),c})(),Q6e=(()=>{class c{}return c.\u0275fac=function(a){return new(a||c)},c.\u0275mod=Ut({type:c}),c.\u0275inj=kt({providers:[YK,rQ,FJ,Hze]}),c})();function Jv(c){return null!=c&&"false"!=`${c}`}function kJ(c,l=0){return function J6e(c){return!isNaN(parseFloat(c))&&!isNaN(Number(c))}(c)?Number(c):l}function Fa(c){return c instanceof zt?c.nativeElement:c}const VJ=new class nHe extends Ac{flush(l){this.active=!0,this.scheduled=void 0;const{actions:a}=this;let h,d=-1,f=a.length;l=l||a.shift();do{if(h=l.execute(l.state,l.delay))break}while(++d<f&&(l=a.shift()));if(this.active=!1,h){for(;++d<f&&(l=a.shift());)l.unsubscribe();throw h}}}(class tHe extends IE{constructor(l,a){super(l,a),this.scheduler=l,this.work=a}requestAsyncId(l,a,h=0){return null!==h&&h>0?super.requestAsyncId(l,a,h):(l.actions.push(this),l.scheduled||(l.scheduled=requestAnimationFrame(()=>l.flush(null))))}recycleAsyncId(l,a,h=0){if(null!==h&&h>0||null===h&&this.delay>0)return super.recycleAsyncId(l,a,h);0===l.actions.length&&(cancelAnimationFrame(a),l.scheduled=void 0)}});let rHe=1;const iHe=Promise.resolve(),KM={};function BJ(c){return c in KM&&(delete KM[c],!0)}const UJ={setImmediate(c){const l=rHe++;return KM[l]=!0,iHe.then(()=>BJ(l)&&c()),l},clearImmediate(c){BJ(c)}};new class oHe extends Ac{flush(l){this.active=!0,this.scheduled=void 0;const{actions:a}=this;let h,d=-1,f=a.length;l=l||a.shift();do{if(h=l.execute(l.state,l.delay))break}while(++d<f&&(l=a.shift()));if(this.active=!1,h){for(;++d<f&&(l=a.shift());)l.unsubscribe();throw h}}}(class sHe extends IE{constructor(l,a){super(l,a),this.scheduler=l,this.work=a}requestAsyncId(l,a,h=0){return null!==h&&h>0?super.requestAsyncId(l,a,h):(l.actions.push(this),l.scheduled||(l.scheduled=UJ.setImmediate(l.flush.bind(l,null))))}recycleAsyncId(l,a,h=0){if(null!==h&&h>0||null===h&&this.delay>0)return super.recycleAsyncId(l,a,h);0===l.actions.length&&(UJ.clearImmediate(a),l.scheduled=void 0)}});class cHe{constructor(l){this.durationSelector=l}call(l,a){return a.subscribe(new uHe(l,this.durationSelector))}}class uHe extends cg{constructor(l,a){super(l),this.durationSelector=a,this.hasValue=!1}_next(l){if(this.value=l,this.hasValue=!0,!this.throttled){let a;try{const{durationSelector:d}=this;a=d(l)}catch(d){return this.destination.error(d)}const h=ug(a,new lg(this));!h||h.closed?this.clearThrottle():this.add(this.throttled=h)}}clearThrottle(){const{value:l,hasValue:a,throttled:h}=this;h&&(this.remove(h),this.throttled=void 0,h.unsubscribe()),a&&(this.value=void 0,this.hasValue=!1,this.destination.next(l))}notifyNext(){this.clearThrottle()}notifyComplete(){this.clearThrottle()}}function GJ(c,l=pv){return function lHe(c){return function(a){return a.lift(new cHe(c))}}(()=>ZK(c,l))}let l3;try{l3=typeof Intl<"u"&&Intl.v8BreakIterator}catch{l3=!1}let OT,c3,zJ=(()=>{class c{constructor(a){this._platformId=a,this.isBrowser=this._platformId?Dr(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!l3)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return c.\u0275fac=function(a){return new(a||c)(Ae(wi))},c.\u0275prov=Oe({token:c,factory:c.\u0275fac,providedIn:"root"}),c})();function NT(c){return function hHe(){if(null==OT&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>OT=!0}))}finally{OT=OT||!1}return OT}()?c:!!c.capture}function jJ(c){if(function dHe(){if(null==c3){const c=typeof document<"u"?document.head:null;c3=!(!c||!c.createShadowRoot&&!c.attachShadow)}return c3}()){const l=c.getRootNode?c.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&l instanceof ShadowRoot)return l}return null}function JM(c){return c.composedPath?c.composedPath()[0]:c.target}let pHe=(()=>{class c{constructor(a,h,d){this._ngZone=a,this._platform=h,this._scrolled=new Ke,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=d}register(a){this.scrollContainers.has(a)||this.scrollContainers.set(a,a.elementScrolled().subscribe(()=>this._scrolled.next(a)))}deregister(a){const h=this.scrollContainers.get(a);h&&(h.unsubscribe(),this.scrollContainers.delete(a))}scrolled(a=20){return this._platform.isBrowser?new wt(h=>{this._globalSubscription||this._addGlobalListener();const d=a>0?this._scrolled.pipe(GJ(a)).subscribe(h):this._scrolled.subscribe(h);return this._scrolledCount++,()=>{d.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):St()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((a,h)=>this.deregister(h)),this._scrolled.complete()}ancestorScrolled(a,h){const d=this.getAncestorScrollContainers(a);return this.scrolled(h).pipe(qr(f=>!f||d.indexOf(f)>-1))}getAncestorScrollContainers(a){const h=[];return this.scrollContainers.forEach((d,f)=>{this._scrollableContainsElement(f,a)&&h.push(f)}),h}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(a,h){let d=Fa(h),f=a.getElementRef().nativeElement;do{if(d==f)return!0}while(d=d.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>Pu(this._getWindow().document,"scroll").subscribe(()=>this._scrolled.next()))}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}}return c.\u0275fac=function(a){return new(a||c)(Ae(kn),Ae(zJ),Ae(Er,8))},c.\u0275prov=Oe({token:c,factory:c.\u0275fac,providedIn:"root"}),c})(),gHe=(()=>{class c{constructor(a,h,d){this._platform=a,this._change=new Ke,this._changeListener=f=>{this._change.next(f)},this._document=d,h.runOutsideAngular(()=>{if(a.isBrowser){const f=this._getWindow();f.addEventListener("resize",this._changeListener),f.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){const a=this._getWindow();a.removeEventListener("resize",this._changeListener),a.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const a={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),a}getViewportRect(){const a=this.getViewportScrollPosition(),{width:h,height:d}=this.getViewportSize();return{top:a.top,left:a.left,bottom:a.top+d,right:a.left+h,height:d,width:h}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const a=this._document,h=this._getWindow(),d=a.documentElement,f=d.getBoundingClientRect();return{top:-f.top||a.body.scrollTop||h.scrollY||d.scrollTop||0,left:-f.left||a.body.scrollLeft||h.scrollX||d.scrollLeft||0}}change(a=20){return a>0?this._change.pipe(GJ(a)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const a=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:a.innerWidth,height:a.innerHeight}:{width:0,height:0}}}return c.\u0275fac=function(a){return new(a||c)(Ae(zJ),Ae(kn),Ae(Er,8))},c.\u0275prov=Oe({token:c,factory:c.\u0275fac,providedIn:"root"}),c})(),yHe=(()=>{class c{}return c.\u0275fac=function(a){return new(a||c)},c.\u0275mod=Ut({type:c}),c.\u0275inj=kt({}),c})();function OHe(c){const{subscriber:l,counter:a,period:h}=c;l.next(a),this.schedule({subscriber:l,counter:a+1,period:h},h)}const NHe=new Vt("cdk-dir-doc",{providedIn:"root",factory:function FHe(){return Zi(Er)}}),kHe=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;let $J=(()=>{class c{constructor(a){if(this.value="ltr",this.change=new rt,a){const d=a.documentElement?a.documentElement.dir:null;this.value=function VHe(c){const l=c?.toLowerCase()||"";return"auto"===l&&typeof navigator<"u"&&navigator?.language?kHe.test(navigator.language)?"rtl":"ltr":"rtl"===l?"rtl":"ltr"}((a.body?a.body.dir:null)||d||"ltr")}}ngOnDestroy(){this.change.complete()}}return c.\u0275fac=function(a){return new(a||c)(Ae(NHe,8))},c.\u0275prov=Oe({token:c,factory:c.\u0275fac,providedIn:"root"}),c})();function u3(c,l,a){for(let h in l)if(l.hasOwnProperty(h)){const d=l[h];d?c.setProperty(h,d,a?.has(h)?"important":""):c.removeProperty(h)}return c}function t_(c,l){const a=l?"":"none";u3(c.style,{"touch-action":l?"":"none","-webkit-user-drag":l?"":"none","-webkit-tap-highlight-color":l?"":"transparent","user-select":a,"-ms-user-select":a,"-webkit-user-select":a,"-moz-user-select":a})}function YJ(c,l,a){u3(c.style,{position:l?"":"fixed",top:l?"":"0",opacity:l?"":"0",left:l?"":"-999em"},a)}function eD(c,l){return l&&"none"!=l?c+" "+l:c}function ZJ(c){const l=c.toLowerCase().indexOf("ms")>-1?1:1e3;return parseFloat(c)*l}function h3(c,l){return c.getPropertyValue(l).split(",").map(h=>h.trim())}function d3(c){const l=c.getBoundingClientRect();return{top:l.top,right:l.right,bottom:l.bottom,left:l.left,width:l.width,height:l.height,x:l.x,y:l.y}}function f3(c,l,a){const{top:h,bottom:d,left:f,right:m}=c;return a>=h&&a<=d&&l>=f&&l<=m}function FT(c,l,a){c.top+=l,c.bottom=c.top+c.height,c.left+=a,c.right=c.left+c.width}function KJ(c,l,a,h){const{top:d,right:f,bottom:m,left:g,width:y,height:v}=c,_=y*l,S=v*l;return h>d-S&&h<m+S&&a>g-_&&a<f+_}class QJ{constructor(l){this._document=l,this.positions=new Map}clear(){this.positions.clear()}cache(l){this.clear(),this.positions.set(this._document,{scrollPosition:this.getViewportScrollPosition()}),l.forEach(a=>{this.positions.set(a,{scrollPosition:{top:a.scrollTop,left:a.scrollLeft},clientRect:d3(a)})})}handleScroll(l){const a=JM(l),h=this.positions.get(a);if(!h)return null;const d=h.scrollPosition;let f,m;if(a===this._document){const v=this.getViewportScrollPosition();f=v.top,m=v.left}else f=a.scrollTop,m=a.scrollLeft;const g=d.top-f,y=d.left-m;return this.positions.forEach((v,_)=>{v.clientRect&&a!==_&&a.contains(_)&&FT(v.clientRect,g,y)}),d.top=f,d.left=m,{top:g,left:y}}getViewportScrollPosition(){return{top:window.scrollY,left:window.scrollX}}}function JJ(c){const l=c.cloneNode(!0),a=l.querySelectorAll("[id]"),h=c.nodeName.toLowerCase();l.removeAttribute("id");for(let d=0;d<a.length;d++)a[d].removeAttribute("id");return"canvas"===h?nee(c,l):("input"===h||"select"===h||"textarea"===h)&&tee(c,l),eee("canvas",c,l,nee),eee("input, textarea, select",c,l,tee),l}function eee(c,l,a,h){const d=l.querySelectorAll(c);if(d.length){const f=a.querySelectorAll(c);for(let m=0;m<d.length;m++)h(d[m],f[m])}}let UHe=0;function tee(c,l){"file"!==l.type&&(l.value=c.value),"radio"===l.type&&l.name&&(l.name=`mat-clone-${l.name}-${UHe++}`)}function nee(c,l){const a=l.getContext("2d");if(a)try{a.drawImage(c,0,0)}catch{}}const ree=NT({passive:!0}),tD=NT({passive:!1}),p3=new Set(["position"]);class zHe{constructor(l,a,h,d,f,m){this._config=a,this._document=h,this._ngZone=d,this._viewportRuler=f,this._dragDropRegistry=m,this._passiveTransform={x:0,y:0},this._activeTransform={x:0,y:0},this._hasStartedDragging=!1,this._moveEvents=new Ke,this._pointerMoveSubscription=O.EMPTY,this._pointerUpSubscription=O.EMPTY,this._scrollSubscription=O.EMPTY,this._resizeSubscription=O.EMPTY,this._boundaryElement=null,this._nativeInteractionsEnabled=!0,this._handles=[],this._disabledHandles=new Set,this._direction="ltr",this.dragStartDelay=0,this._disabled=!1,this.beforeStarted=new Ke,this.started=new Ke,this.released=new Ke,this.ended=new Ke,this.entered=new Ke,this.exited=new Ke,this.dropped=new Ke,this.moved=this._moveEvents,this._pointerDown=g=>{if(this.beforeStarted.next(),this._handles.length){const y=this._getTargetHandle(g);y&&!this._disabledHandles.has(y)&&!this.disabled&&this._initializeDragSequence(y,g)}else this.disabled||this._initializeDragSequence(this._rootElement,g)},this._pointerMove=g=>{const y=this._getPointerPositionOnPage(g);if(!this._hasStartedDragging){if(Math.abs(y.x-this._pickupPositionOnPage.x)+Math.abs(y.y-this._pickupPositionOnPage.y)>=this._config.dragStartThreshold){const T=Date.now()>=this._dragStartTime+this._getDragStartDelay(g),x=this._dropContainer;if(!T)return void this._endDragSequence(g);(!x||!x.isDragging()&&!x.isReceiving())&&(g.preventDefault(),this._hasStartedDragging=!0,this._ngZone.run(()=>this._startDragSequence(g)))}return}g.preventDefault();const v=this._getConstrainedPointerPosition(y);if(this._hasMoved=!0,this._lastKnownPointerPosition=y,this._updatePointerDirectionDelta(v),this._dropContainer)this._updateActiveDropContainer(v,y);else{const _=this.constrainPosition?this._initialClientRect:this._pickupPositionOnPage,S=this._activeTransform;S.x=v.x-_.x+this._passiveTransform.x,S.y=v.y-_.y+this._passiveTransform.y,this._applyRootElementTransform(S.x,S.y)}this._moveEvents.observers.length&&this._ngZone.run(()=>{this._moveEvents.next({source:this,pointerPosition:v,event:g,distance:this._getDragDistance(v),delta:this._pointerDirectionDelta})})},this._pointerUp=g=>{this._endDragSequence(g)},this._nativeDragStart=g=>{if(this._handles.length){const y=this._getTargetHandle(g);y&&!this._disabledHandles.has(y)&&!this.disabled&&g.preventDefault()}else this.disabled||g.preventDefault()},this.withRootElement(l).withParent(a.parentDragRef||null),this._parentPositions=new QJ(h),m.registerDragItem(this)}get disabled(){return this._disabled||!(!this._dropContainer||!this._dropContainer.disabled)}set disabled(l){const a=Jv(l);a!==this._disabled&&(this._disabled=a,this._toggleNativeDragInteractions(),this._handles.forEach(h=>t_(h,a)))}getPlaceholderElement(){return this._placeholder}getRootElement(){return this._rootElement}getVisibleElement(){return this.isDragging()?this.getPlaceholderElement():this.getRootElement()}withHandles(l){this._handles=l.map(h=>Fa(h)),this._handles.forEach(h=>t_(h,this.disabled)),this._toggleNativeDragInteractions();const a=new Set;return this._disabledHandles.forEach(h=>{this._handles.indexOf(h)>-1&&a.add(h)}),this._disabledHandles=a,this}withPreviewTemplate(l){return this._previewTemplate=l,this}withPlaceholderTemplate(l){return this._placeholderTemplate=l,this}withRootElement(l){const a=Fa(l);return a!==this._rootElement&&(this._rootElement&&this._removeRootElementListeners(this._rootElement),this._ngZone.runOutsideAngular(()=>{a.addEventListener("mousedown",this._pointerDown,tD),a.addEventListener("touchstart",this._pointerDown,ree),a.addEventListener("dragstart",this._nativeDragStart,tD)}),this._initialTransform=void 0,this._rootElement=a),typeof SVGElement<"u"&&this._rootElement instanceof SVGElement&&(this._ownerSVGElement=this._rootElement.ownerSVGElement),this}withBoundaryElement(l){return this._boundaryElement=l?Fa(l):null,this._resizeSubscription.unsubscribe(),l&&(this._resizeSubscription=this._viewportRuler.change(10).subscribe(()=>this._containInsideBoundaryOnResize())),this}withParent(l){return this._parentDragRef=l,this}dispose(){this._removeRootElementListeners(this._rootElement),this.isDragging()&&this._rootElement?.remove(),this._anchor?.remove(),this._destroyPreview(),this._destroyPlaceholder(),this._dragDropRegistry.removeDragItem(this),this._removeSubscriptions(),this.beforeStarted.complete(),this.started.complete(),this.released.complete(),this.ended.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this._moveEvents.complete(),this._handles=[],this._disabledHandles.clear(),this._dropContainer=void 0,this._resizeSubscription.unsubscribe(),this._parentPositions.clear(),this._boundaryElement=this._rootElement=this._ownerSVGElement=this._placeholderTemplate=this._previewTemplate=this._anchor=this._parentDragRef=null}isDragging(){return this._hasStartedDragging&&this._dragDropRegistry.isDragging(this)}reset(){this._rootElement.style.transform=this._initialTransform||"",this._activeTransform={x:0,y:0},this._passiveTransform={x:0,y:0}}disableHandle(l){!this._disabledHandles.has(l)&&this._handles.indexOf(l)>-1&&(this._disabledHandles.add(l),t_(l,!0))}enableHandle(l){this._disabledHandles.has(l)&&(this._disabledHandles.delete(l),t_(l,this.disabled))}withDirection(l){return this._direction=l,this}_withDropContainer(l){this._dropContainer=l}getFreeDragPosition(){const l=this.isDragging()?this._activeTransform:this._passiveTransform;return{x:l.x,y:l.y}}setFreeDragPosition(l){return this._activeTransform={x:0,y:0},this._passiveTransform.x=l.x,this._passiveTransform.y=l.y,this._dropContainer||this._applyRootElementTransform(l.x,l.y),this}withPreviewContainer(l){return this._previewContainer=l,this}_sortFromLastPointerPosition(){const l=this._lastKnownPointerPosition;l&&this._dropContainer&&this._updateActiveDropContainer(this._getConstrainedPointerPosition(l),l)}_removeSubscriptions(){this._pointerMoveSubscription.unsubscribe(),this._pointerUpSubscription.unsubscribe(),this._scrollSubscription.unsubscribe()}_destroyPreview(){this._preview?.remove(),this._previewRef?.destroy(),this._preview=this._previewRef=null}_destroyPlaceholder(){this._placeholder?.remove(),this._placeholderRef?.destroy(),this._placeholder=this._placeholderRef=null}_endDragSequence(l){if(this._dragDropRegistry.isDragging(this)&&(this._removeSubscriptions(),this._dragDropRegistry.stopDragging(this),this._toggleNativeDragInteractions(),this._handles&&(this._rootElement.style.webkitTapHighlightColor=this._rootElementTapHighlight),this._hasStartedDragging))if(this.released.next({source:this,event:l}),this._dropContainer)this._dropContainer._stopScrolling(),this._animatePreviewToPlaceholder().then(()=>{this._cleanupDragArtifacts(l),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this)});else{this._passiveTransform.x=this._activeTransform.x;const a=this._getPointerPositionOnPage(l);this._passiveTransform.y=this._activeTransform.y,this._ngZone.run(()=>{this.ended.next({source:this,distance:this._getDragDistance(a),dropPoint:a,event:l})}),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this)}}_startDragSequence(l){kT(l)&&(this._lastTouchEventTime=Date.now()),this._toggleNativeDragInteractions();const a=this._dropContainer;if(a){const h=this._rootElement,d=h.parentNode,f=this._placeholder=this._createPlaceholderElement(),m=this._anchor=this._anchor||this._document.createComment(""),g=this._getShadowRoot();d.insertBefore(m,h),this._initialTransform=h.style.transform||"",this._preview=this._createPreviewElement(),YJ(h,!1,p3),this._document.body.appendChild(d.replaceChild(f,h)),this._getPreviewInsertionPoint(d,g).appendChild(this._preview),this.started.next({source:this,event:l}),a.start(),this._initialContainer=a,this._initialIndex=a.getItemIndex(this)}else this.started.next({source:this,event:l}),this._initialContainer=this._initialIndex=void 0;this._parentPositions.cache(a?a.getScrollableParents():[])}_initializeDragSequence(l,a){this._parentDragRef&&a.stopPropagation();const h=this.isDragging(),d=kT(a),f=!d&&0!==a.button,m=this._rootElement,g=JM(a),y=!d&&this._lastTouchEventTime&&this._lastTouchEventTime+800>Date.now(),v=d?function RHe(c){const l=c.touches&&c.touches[0]||c.changedTouches&&c.changedTouches[0];return!(!l||-1!==l.identifier||null!=l.radiusX&&1!==l.radiusX||null!=l.radiusY&&1!==l.radiusY)}(a):function IHe(c){return 0===c.buttons||0===c.offsetX&&0===c.offsetY}(a);if(g&&g.draggable&&"mousedown"===a.type&&a.preventDefault(),h||f||y||v)return;if(this._handles.length){const b=m.style;this._rootElementTapHighlight=b.webkitTapHighlightColor||"",b.webkitTapHighlightColor="transparent"}this._hasStartedDragging=this._hasMoved=!1,this._removeSubscriptions(),this._initialClientRect=this._rootElement.getBoundingClientRect(),this._pointerMoveSubscription=this._dragDropRegistry.pointerMove.subscribe(this._pointerMove),this._pointerUpSubscription=this._dragDropRegistry.pointerUp.subscribe(this._pointerUp),this._scrollSubscription=this._dragDropRegistry.scrolled(this._getShadowRoot()).subscribe(b=>this._updateOnScroll(b)),this._boundaryElement&&(this._boundaryRect=d3(this._boundaryElement));const _=this._previewTemplate;this._pickupPositionInElement=_&&_.template&&!_.matchSize?{x:0,y:0}:this._getPointerPositionInElement(this._initialClientRect,l,a);const S=this._pickupPositionOnPage=this._lastKnownPointerPosition=this._getPointerPositionOnPage(a);this._pointerDirectionDelta={x:0,y:0},this._pointerPositionAtLastDirectionChange={x:S.x,y:S.y},this._dragStartTime=Date.now(),this._dragDropRegistry.startDragging(this,a)}_cleanupDragArtifacts(l){YJ(this._rootElement,!0,p3),this._anchor.parentNode.replaceChild(this._rootElement,this._anchor),this._destroyPreview(),this._destroyPlaceholder(),this._initialClientRect=this._boundaryRect=this._previewRect=this._initialTransform=void 0,this._ngZone.run(()=>{const a=this._dropContainer,h=a.getItemIndex(this),d=this._getPointerPositionOnPage(l),f=this._getDragDistance(d),m=a._isOverContainer(d.x,d.y);this.ended.next({source:this,distance:f,dropPoint:d,event:l}),this.dropped.next({item:this,currentIndex:h,previousIndex:this._initialIndex,container:a,previousContainer:this._initialContainer,isPointerOverContainer:m,distance:f,dropPoint:d,event:l}),a.drop(this,h,this._initialIndex,this._initialContainer,m,f,d),this._dropContainer=this._initialContainer})}_updateActiveDropContainer({x:l,y:a},{x:h,y:d}){let f=this._initialContainer._getSiblingContainerFromPosition(this,l,a);!f&&this._dropContainer!==this._initialContainer&&this._initialContainer._isOverContainer(l,a)&&(f=this._initialContainer),f&&f!==this._dropContainer&&this._ngZone.run(()=>{this.exited.next({item:this,container:this._dropContainer}),this._dropContainer.exit(this),this._dropContainer=f,this._dropContainer.enter(this,l,a,f===this._initialContainer&&f.sortingDisabled?this._initialIndex:void 0),this.entered.next({item:this,container:f,currentIndex:f.getItemIndex(this)})}),this.isDragging()&&(this._dropContainer._startScrollingIfNecessary(h,d),this._dropContainer._sortItem(this,l,a,this._pointerDirectionDelta),this.constrainPosition?this._applyPreviewTransform(l,a):this._applyPreviewTransform(l-this._pickupPositionInElement.x,a-this._pickupPositionInElement.y))}_createPreviewElement(){const l=this._previewTemplate,a=this.previewClass,h=l?l.template:null;let d;if(h&&l){const f=l.matchSize?this._initialClientRect:null,m=l.viewContainer.createEmbeddedView(h,l.context);m.detectChanges(),d=see(m,this._document),this._previewRef=m,l.matchSize?oee(d,f):d.style.transform=nD(this._pickupPositionOnPage.x,this._pickupPositionOnPage.y)}else d=JJ(this._rootElement),oee(d,this._initialClientRect),this._initialTransform&&(d.style.transform=this._initialTransform);return u3(d.style,{"pointer-events":"none",margin:"0",position:"fixed",top:"0",left:"0","z-index":`${this._config.zIndex||1e3}`},p3),t_(d,!1),d.classList.add("cdk-drag-preview"),d.setAttribute("dir",this._direction),a&&(Array.isArray(a)?a.forEach(f=>d.classList.add(f)):d.classList.add(a)),d}_animatePreviewToPlaceholder(){if(!this._hasMoved)return Promise.resolve();const l=this._placeholder.getBoundingClientRect();this._preview.classList.add("cdk-drag-animating"),this._applyPreviewTransform(l.left,l.top);const a=function BHe(c){const l=getComputedStyle(c),a=h3(l,"transition-property"),h=a.find(g=>"transform"===g||"all"===g);if(!h)return 0;const d=a.indexOf(h),f=h3(l,"transition-duration"),m=h3(l,"transition-delay");return ZJ(f[d])+ZJ(m[d])}(this._preview);return 0===a?Promise.resolve():this._ngZone.runOutsideAngular(()=>new Promise(h=>{const d=m=>{(!m||JM(m)===this._preview&&"transform"===m.propertyName)&&(this._preview?.removeEventListener("transitionend",d),h(),clearTimeout(f))},f=setTimeout(d,1.5*a);this._preview.addEventListener("transitionend",d)}))}_createPlaceholderElement(){const l=this._placeholderTemplate,a=l?l.template:null;let h;return a?(this._placeholderRef=l.viewContainer.createEmbeddedView(a,l.context),this._placeholderRef.detectChanges(),h=see(this._placeholderRef,this._document)):h=JJ(this._rootElement),h.style.pointerEvents="none",h.classList.add("cdk-drag-placeholder"),h}_getPointerPositionInElement(l,a,h){const d=a===this._rootElement?null:a,f=d?d.getBoundingClientRect():l,m=kT(h)?h.targetTouches[0]:h,g=this._getViewportScrollPosition();return{x:f.left-l.left+(m.pageX-f.left-g.left),y:f.top-l.top+(m.pageY-f.top-g.top)}}_getPointerPositionOnPage(l){const a=this._getViewportScrollPosition(),h=kT(l)?l.touches[0]||l.changedTouches[0]||{pageX:0,pageY:0}:l,d=h.pageX-a.left,f=h.pageY-a.top;if(this._ownerSVGElement){const m=this._ownerSVGElement.getScreenCTM();if(m){const g=this._ownerSVGElement.createSVGPoint();return g.x=d,g.y=f,g.matrixTransform(m.inverse())}}return{x:d,y:f}}_getConstrainedPointerPosition(l){const a=this._dropContainer?this._dropContainer.lockAxis:null;let{x:h,y:d}=this.constrainPosition?this.constrainPosition(l,this,this._initialClientRect,this._pickupPositionInElement):l;if("x"===this.lockAxis||"x"===a?d=this._pickupPositionOnPage.y:("y"===this.lockAxis||"y"===a)&&(h=this._pickupPositionOnPage.x),this._boundaryRect){const{x:f,y:m}=this._pickupPositionInElement,g=this._boundaryRect,{width:y,height:v}=this._getPreviewRect(),_=g.top+m,S=g.bottom-(v-m);h=iee(h,g.left+f,g.right-(y-f)),d=iee(d,_,S)}return{x:h,y:d}}_updatePointerDirectionDelta(l){const{x:a,y:h}=l,d=this._pointerDirectionDelta,f=this._pointerPositionAtLastDirectionChange,m=Math.abs(a-f.x),g=Math.abs(h-f.y);return m>this._config.pointerDirectionChangeThreshold&&(d.x=a>f.x?1:-1,f.x=a),g>this._config.pointerDirectionChangeThreshold&&(d.y=h>f.y?1:-1,f.y=h),d}_toggleNativeDragInteractions(){if(!this._rootElement||!this._handles)return;const l=this._handles.length>0||!this.isDragging();l!==this._nativeInteractionsEnabled&&(this._nativeInteractionsEnabled=l,t_(this._rootElement,l))}_removeRootElementListeners(l){l.removeEventListener("mousedown",this._pointerDown,tD),l.removeEventListener("touchstart",this._pointerDown,ree),l.removeEventListener("dragstart",this._nativeDragStart,tD)}_applyRootElementTransform(l,a){const h=nD(l,a),d=this._rootElement.style;null==this._initialTransform&&(this._initialTransform=d.transform&&"none"!=d.transform?d.transform:""),d.transform=eD(h,this._initialTransform)}_applyPreviewTransform(l,a){const h=this._previewTemplate?.template?void 0:this._initialTransform,d=nD(l,a);this._preview.style.transform=eD(d,h)}_getDragDistance(l){const a=this._pickupPositionOnPage;return a?{x:l.x-a.x,y:l.y-a.y}:{x:0,y:0}}_cleanupCachedDimensions(){this._boundaryRect=this._previewRect=void 0,this._parentPositions.clear()}_containInsideBoundaryOnResize(){let{x:l,y:a}=this._passiveTransform;if(0===l&&0===a||this.isDragging()||!this._boundaryElement)return;const h=this._rootElement.getBoundingClientRect(),d=this._boundaryElement.getBoundingClientRect();if(0===d.width&&0===d.height||0===h.width&&0===h.height)return;const f=d.left-h.left,m=h.right-d.right,g=d.top-h.top,y=h.bottom-d.bottom;d.width>h.width?(f>0&&(l+=f),m>0&&(l-=m)):l=0,d.height>h.height?(g>0&&(a+=g),y>0&&(a-=y)):a=0,(l!==this._passiveTransform.x||a!==this._passiveTransform.y)&&this.setFreeDragPosition({y:a,x:l})}_getDragStartDelay(l){const a=this.dragStartDelay;return"number"==typeof a?a:kT(l)?a.touch:a?a.mouse:0}_updateOnScroll(l){const a=this._parentPositions.handleScroll(l);if(a){const h=JM(l);this._boundaryRect&&h!==this._boundaryElement&&h.contains(this._boundaryElement)&&FT(this._boundaryRect,a.top,a.left),this._pickupPositionOnPage.x+=a.left,this._pickupPositionOnPage.y+=a.top,this._dropContainer||(this._activeTransform.x-=a.left,this._activeTransform.y-=a.top,this._applyRootElementTransform(this._activeTransform.x,this._activeTransform.y))}}_getViewportScrollPosition(){return this._parentPositions.positions.get(this._document)?.scrollPosition||this._parentPositions.getViewportScrollPosition()}_getShadowRoot(){return void 0===this._cachedShadowRoot&&(this._cachedShadowRoot=jJ(this._rootElement)),this._cachedShadowRoot}_getPreviewInsertionPoint(l,a){const h=this._previewContainer||"global";if("parent"===h)return l;if("global"===h){const d=this._document;return a||d.fullscreenElement||d.webkitFullscreenElement||d.mozFullScreenElement||d.msFullscreenElement||d.body}return Fa(h)}_getPreviewRect(){return(!this._previewRect||!this._previewRect.width&&!this._previewRect.height)&&(this._previewRect=this._preview?this._preview.getBoundingClientRect():this._initialClientRect),this._previewRect}_getTargetHandle(l){return this._handles.find(a=>l.target&&(l.target===a||a.contains(l.target)))}}function nD(c,l){return`translate3d(${Math.round(c)}px, ${Math.round(l)}px, 0)`}function iee(c,l,a){return Math.max(l,Math.min(a,c))}function kT(c){return"t"===c.type[0]}function see(c,l){const a=c.rootNodes;if(1===a.length&&a[0].nodeType===l.ELEMENT_NODE)return a[0];const h=l.createElement("div");return a.forEach(d=>h.appendChild(d)),h}function oee(c,l){c.style.width=`${l.width}px`,c.style.height=`${l.height}px`,c.style.transform=nD(l.left,l.top)}function aee(c,l,a){const h=VT(l,c.length-1),d=VT(a,c.length-1);if(h===d)return;const f=c[h],m=d<h?-1:1;for(let g=h;g!==d;g+=m)c[g]=c[g+m];c[d]=f}function VT(c,l){return Math.max(0,Math.min(l,c))}class HHe{constructor(l,a){this._element=l,this._dragDropRegistry=a,this._itemPositions=[],this.orientation="vertical",this._previousSwap={drag:null,delta:0,overlaps:!1}}start(l){this.withItems(l)}sort(l,a,h,d){const f=this._itemPositions,m=this._getItemIndexFromPointerPosition(l,a,h,d);if(-1===m&&f.length>0)return null;const g="horizontal"===this.orientation,y=f.findIndex(D=>D.drag===l),v=f[m],S=v.clientRect,b=y>m?1:-1,T=this._getItemOffsetPx(f[y].clientRect,S,b),x=this._getSiblingOffsetPx(y,f,b),E=f.slice();return aee(f,y,m),f.forEach((D,I)=>{if(E[I]===D)return;const M=D.drag===l,L=M?T:x,P=M?l.getPlaceholderElement():D.drag.getRootElement();D.offset+=L,g?(P.style.transform=eD(`translate3d(${Math.round(D.offset)}px, 0, 0)`,D.initialTransform),FT(D.clientRect,0,L)):(P.style.transform=eD(`translate3d(0, ${Math.round(D.offset)}px, 0)`,D.initialTransform),FT(D.clientRect,L,0))}),this._previousSwap.overlaps=f3(S,a,h),this._previousSwap.drag=v.drag,this._previousSwap.delta=g?d.x:d.y,{previousIndex:y,currentIndex:m}}enter(l,a,h,d){const f=null==d||d<0?this._getItemIndexFromPointerPosition(l,a,h):d,m=this._activeDraggables,g=m.indexOf(l),y=l.getPlaceholderElement();let v=m[f];if(v===l&&(v=m[f+1]),!v&&(null==f||-1===f||f<m.length-1)&&this._shouldEnterAsFirstChild(a,h)&&(v=m[0]),g>-1&&m.splice(g,1),v&&!this._dragDropRegistry.isDragging(v)){const _=v.getRootElement();_.parentElement.insertBefore(y,_),m.splice(f,0,l)}else Fa(this._element).appendChild(y),m.push(l);y.style.transform="",this._cacheItemPositions()}withItems(l){this._activeDraggables=l.slice(),this._cacheItemPositions()}withSortPredicate(l){this._sortPredicate=l}reset(){this._activeDraggables.forEach(l=>{const a=l.getRootElement();if(a){const h=this._itemPositions.find(d=>d.drag===l)?.initialTransform;a.style.transform=h||""}}),this._itemPositions=[],this._activeDraggables=[],this._previousSwap.drag=null,this._previousSwap.delta=0,this._previousSwap.overlaps=!1}getActiveItemsSnapshot(){return this._activeDraggables}getItemIndex(l){return("horizontal"===this.orientation&&"rtl"===this.direction?this._itemPositions.slice().reverse():this._itemPositions).findIndex(h=>h.drag===l)}updateOnScroll(l,a){this._itemPositions.forEach(({clientRect:h})=>{FT(h,l,a)}),this._itemPositions.forEach(({drag:h})=>{this._dragDropRegistry.isDragging(h)&&h._sortFromLastPointerPosition()})}_cacheItemPositions(){const l="horizontal"===this.orientation;this._itemPositions=this._activeDraggables.map(a=>{const h=a.getVisibleElement();return{drag:a,offset:0,initialTransform:h.style.transform||"",clientRect:d3(h)}}).sort((a,h)=>l?a.clientRect.left-h.clientRect.left:a.clientRect.top-h.clientRect.top)}_getItemOffsetPx(l,a,h){const d="horizontal"===this.orientation;let f=d?a.left-l.left:a.top-l.top;return-1===h&&(f+=d?a.width-l.width:a.height-l.height),f}_getSiblingOffsetPx(l,a,h){const d="horizontal"===this.orientation,f=a[l].clientRect,m=a[l+-1*h];let g=f[d?"width":"height"]*h;if(m){const y=d?"left":"top",v=d?"right":"bottom";-1===h?g-=m.clientRect[y]-f[v]:g+=f[y]-m.clientRect[v]}return g}_shouldEnterAsFirstChild(l,a){if(!this._activeDraggables.length)return!1;const h=this._itemPositions,d="horizontal"===this.orientation;if(h[0].drag!==this._activeDraggables[0]){const m=h[h.length-1].clientRect;return d?l>=m.right:a>=m.bottom}{const m=h[0].clientRect;return d?l<=m.left:a<=m.top}}_getItemIndexFromPointerPosition(l,a,h,d){const f="horizontal"===this.orientation,m=this._itemPositions.findIndex(({drag:g,clientRect:y})=>{if(g===l)return!1;if(d){const v=f?d.x:d.y;if(g===this._previousSwap.drag&&this._previousSwap.overlaps&&v===this._previousSwap.delta)return!1}return f?a>=Math.floor(y.left)&&a<Math.floor(y.right):h>=Math.floor(y.top)&&h<Math.floor(y.bottom)});return-1!==m&&this._sortPredicate(m,l)?m:-1}}class jHe{constructor(l,a,h,d,f){this._dragDropRegistry=a,this._ngZone=d,this._viewportRuler=f,this.disabled=!1,this.sortingDisabled=!1,this.autoScrollDisabled=!1,this.autoScrollStep=2,this.enterPredicate=()=>!0,this.sortPredicate=()=>!0,this.beforeStarted=new Ke,this.entered=new Ke,this.exited=new Ke,this.dropped=new Ke,this.sorted=new Ke,this._isDragging=!1,this._draggables=[],this._siblings=[],this._activeSiblings=new Set,this._viewportScrollSubscription=O.EMPTY,this._verticalScrollDirection=0,this._horizontalScrollDirection=0,this._stopScrollTimers=new Ke,this._cachedShadowRoot=null,this._startScrollInterval=()=>{this._stopScrolling(),function LHe(c=0,l=pv){return(!Mk(c)||c<0)&&(c=0),(!l||"function"!=typeof l.schedule)&&(l=pv),new wt(a=>(a.add(l.schedule(OHe,c,{subscriber:a,counter:0,period:c})),a))}(0,VJ).pipe(Nh(this._stopScrollTimers)).subscribe(()=>{const m=this._scrollNode,g=this.autoScrollStep;1===this._verticalScrollDirection?m.scrollBy(0,-g):2===this._verticalScrollDirection&&m.scrollBy(0,g),1===this._horizontalScrollDirection?m.scrollBy(-g,0):2===this._horizontalScrollDirection&&m.scrollBy(g,0)})},this.element=Fa(l),this._document=h,this.withScrollableParents([this.element]),a.registerDropContainer(this),this._parentPositions=new QJ(h),this._sortStrategy=new HHe(this.element,a),this._sortStrategy.withSortPredicate((m,g)=>this.sortPredicate(m,g,this))}dispose(){this._stopScrolling(),this._stopScrollTimers.complete(),this._viewportScrollSubscription.unsubscribe(),this.beforeStarted.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this.sorted.complete(),this._activeSiblings.clear(),this._scrollNode=null,this._parentPositions.clear(),this._dragDropRegistry.removeDropContainer(this)}isDragging(){return this._isDragging}start(){this._draggingStarted(),this._notifyReceivingSiblings()}enter(l,a,h,d){this._draggingStarted(),null==d&&this.sortingDisabled&&(d=this._draggables.indexOf(l)),this._sortStrategy.enter(l,a,h,d),this._cacheParentPositions(),this._notifyReceivingSiblings(),this.entered.next({item:l,container:this,currentIndex:this.getItemIndex(l)})}exit(l){this._reset(),this.exited.next({item:l,container:this})}drop(l,a,h,d,f,m,g,y={}){this._reset(),this.dropped.next({item:l,currentIndex:a,previousIndex:h,container:this,previousContainer:d,isPointerOverContainer:f,distance:m,dropPoint:g,event:y})}withItems(l){const a=this._draggables;return this._draggables=l,l.forEach(h=>h._withDropContainer(this)),this.isDragging()&&(a.filter(d=>d.isDragging()).every(d=>-1===l.indexOf(d))?this._reset():this._sortStrategy.withItems(this._draggables)),this}withDirection(l){return this._sortStrategy.direction=l,this}connectedTo(l){return this._siblings=l.slice(),this}withOrientation(l){return this._sortStrategy.orientation=l,this}withScrollableParents(l){const a=Fa(this.element);return this._scrollableElements=-1===l.indexOf(a)?[a,...l]:l.slice(),this}getScrollableParents(){return this._scrollableElements}getItemIndex(l){return this._isDragging?this._sortStrategy.getItemIndex(l):this._draggables.indexOf(l)}isReceiving(){return this._activeSiblings.size>0}_sortItem(l,a,h,d){if(this.sortingDisabled||!this._clientRect||!KJ(this._clientRect,.05,a,h))return;const f=this._sortStrategy.sort(l,a,h,d);f&&this.sorted.next({previousIndex:f.previousIndex,currentIndex:f.currentIndex,container:this,item:l})}_startScrollingIfNecessary(l,a){if(this.autoScrollDisabled)return;let h,d=0,f=0;if(this._parentPositions.positions.forEach((m,g)=>{g===this._document||!m.clientRect||h||KJ(m.clientRect,.05,l,a)&&([d,f]=function WHe(c,l,a,h){const d=uee(l,h),f=hee(l,a);let m=0,g=0;if(d){const y=c.scrollTop;1===d?y>0&&(m=1):c.scrollHeight-y>c.clientHeight&&(m=2)}if(f){const y=c.scrollLeft;1===f?y>0&&(g=1):c.scrollWidth-y>c.clientWidth&&(g=2)}return[m,g]}(g,m.clientRect,l,a),(d||f)&&(h=g))}),!d&&!f){const{width:m,height:g}=this._viewportRuler.getViewportSize(),y={width:m,height:g,top:0,right:m,bottom:g,left:0};d=uee(y,a),f=hee(y,l),h=window}h&&(d!==this._verticalScrollDirection||f!==this._horizontalScrollDirection||h!==this._scrollNode)&&(this._verticalScrollDirection=d,this._horizontalScrollDirection=f,this._scrollNode=h,(d||f)&&h?this._ngZone.runOutsideAngular(this._startScrollInterval):this._stopScrolling())}_stopScrolling(){this._stopScrollTimers.next()}_draggingStarted(){const l=Fa(this.element).style;this.beforeStarted.next(),this._isDragging=!0,this._initialScrollSnap=l.msScrollSnapType||l.scrollSnapType||"",l.scrollSnapType=l.msScrollSnapType="none",this._sortStrategy.start(this._draggables),this._cacheParentPositions(),this._viewportScrollSubscription.unsubscribe(),this._listenToScrollEvents()}_cacheParentPositions(){const l=Fa(this.element);this._parentPositions.cache(this._scrollableElements),this._clientRect=this._parentPositions.positions.get(l).clientRect}_reset(){this._isDragging=!1;const l=Fa(this.element).style;l.scrollSnapType=l.msScrollSnapType=this._initialScrollSnap,this._siblings.forEach(a=>a._stopReceiving(this)),this._sortStrategy.reset(),this._stopScrolling(),this._viewportScrollSubscription.unsubscribe(),this._parentPositions.clear()}_isOverContainer(l,a){return null!=this._clientRect&&f3(this._clientRect,l,a)}_getSiblingContainerFromPosition(l,a,h){return this._siblings.find(d=>d._canReceive(l,a,h))}_canReceive(l,a,h){if(!this._clientRect||!f3(this._clientRect,a,h)||!this.enterPredicate(l,this))return!1;const d=this._getShadowRoot().elementFromPoint(a,h);if(!d)return!1;const f=Fa(this.element);return d===f||f.contains(d)}_startReceiving(l,a){const h=this._activeSiblings;!h.has(l)&&a.every(d=>this.enterPredicate(d,this)||this._draggables.indexOf(d)>-1)&&(h.add(l),this._cacheParentPositions(),this._listenToScrollEvents())}_stopReceiving(l){this._activeSiblings.delete(l),this._viewportScrollSubscription.unsubscribe()}_listenToScrollEvents(){this._viewportScrollSubscription=this._dragDropRegistry.scrolled(this._getShadowRoot()).subscribe(l=>{if(this.isDragging()){const a=this._parentPositions.handleScroll(l);a&&this._sortStrategy.updateOnScroll(a.top,a.left)}else this.isReceiving()&&this._cacheParentPositions()})}_getShadowRoot(){if(!this._cachedShadowRoot){const l=jJ(Fa(this.element));this._cachedShadowRoot=l||this._document}return this._cachedShadowRoot}_notifyReceivingSiblings(){const l=this._sortStrategy.getActiveItemsSnapshot().filter(a=>a.isDragging());this._siblings.forEach(a=>a._startReceiving(this,l))}}function uee(c,l){const{top:a,bottom:h,height:d}=c,f=.05*d;return l>=a-f&&l<=a+f?1:l>=h-f&&l<=h+f?2:0}function hee(c,l){const{left:a,right:h,width:d}=c,f=.05*d;return l>=a-f&&l<=a+f?1:l>=h-f&&l<=h+f?2:0}const rD=NT({passive:!1,capture:!0});let XHe=(()=>{class c{constructor(a,h){this._ngZone=a,this._dropInstances=new Set,this._dragInstances=new Set,this._activeDragInstances=[],this._globalListeners=new Map,this._draggingPredicate=d=>d.isDragging(),this.pointerMove=new Ke,this.pointerUp=new Ke,this.scroll=new Ke,this._preventDefaultWhileDragging=d=>{this._activeDragInstances.length>0&&d.preventDefault()},this._persistentTouchmoveListener=d=>{this._activeDragInstances.length>0&&(this._activeDragInstances.some(this._draggingPredicate)&&d.preventDefault(),this.pointerMove.next(d))},this._document=h}registerDropContainer(a){this._dropInstances.has(a)||this._dropInstances.add(a)}registerDragItem(a){this._dragInstances.add(a),1===this._dragInstances.size&&this._ngZone.runOutsideAngular(()=>{this._document.addEventListener("touchmove",this._persistentTouchmoveListener,rD)})}removeDropContainer(a){this._dropInstances.delete(a)}removeDragItem(a){this._dragInstances.delete(a),this.stopDragging(a),0===this._dragInstances.size&&this._document.removeEventListener("touchmove",this._persistentTouchmoveListener,rD)}startDragging(a,h){if(!(this._activeDragInstances.indexOf(a)>-1)&&(this._activeDragInstances.push(a),1===this._activeDragInstances.length)){const d=h.type.startsWith("touch");this._globalListeners.set(d?"touchend":"mouseup",{handler:f=>this.pointerUp.next(f),options:!0}).set("scroll",{handler:f=>this.scroll.next(f),options:!0}).set("selectstart",{handler:this._preventDefaultWhileDragging,options:rD}),d||this._globalListeners.set("mousemove",{handler:f=>this.pointerMove.next(f),options:rD}),this._ngZone.runOutsideAngular(()=>{this._globalListeners.forEach((f,m)=>{this._document.addEventListener(m,f.handler,f.options)})})}}stopDragging(a){const h=this._activeDragInstances.indexOf(a);h>-1&&(this._activeDragInstances.splice(h,1),0===this._activeDragInstances.length&&this._clearGlobalListeners())}isDragging(a){return this._activeDragInstances.indexOf(a)>-1}scrolled(a){const h=[this.scroll];return a&&a!==this._document&&h.push(new wt(d=>this._ngZone.runOutsideAngular(()=>{const m=g=>{this._activeDragInstances.length&&d.next(g)};return a.addEventListener("scroll",m,!0),()=>{a.removeEventListener("scroll",m,!0)}}))),eI(...h)}ngOnDestroy(){this._dragInstances.forEach(a=>this.removeDragItem(a)),this._dropInstances.forEach(a=>this.removeDropContainer(a)),this._clearGlobalListeners(),this.pointerMove.complete(),this.pointerUp.complete()}_clearGlobalListeners(){this._globalListeners.forEach((a,h)=>{this._document.removeEventListener(h,a.handler,a.options)}),this._globalListeners.clear()}}return c.\u0275fac=function(a){return new(a||c)(Ae(kn),Ae(Er))},c.\u0275prov=Oe({token:c,factory:c.\u0275fac,providedIn:"root"}),c})();const qHe={dragStartThreshold:5,pointerDirectionChangeThreshold:5};let m3=(()=>{class c{constructor(a,h,d,f){this._document=a,this._ngZone=h,this._viewportRuler=d,this._dragDropRegistry=f}createDrag(a,h=qHe){return new zHe(a,h,this._document,this._ngZone,this._viewportRuler,this._dragDropRegistry)}createDropList(a){return new jHe(a,this._dragDropRegistry,this._document,this._ngZone,this._viewportRuler)}}return c.\u0275fac=function(a){return new(a||c)(Ae(Er),Ae(kn),Ae(gHe),Ae(XHe))},c.\u0275prov=Oe({token:c,factory:c.\u0275fac,providedIn:"root"}),c})();const g3=new Vt("CDK_DRAG_PARENT"),dee=new Vt("CdkDropListGroup"),fee=new Vt("CDK_DRAG_CONFIG");let $He=0;const pee=new Vt("CdkDropList");let mee=(()=>{class c{constructor(a,h,d,f,m,g,y){this.element=a,this._changeDetectorRef=d,this._scrollDispatcher=f,this._dir=m,this._group=g,this._destroyed=new Ke,this.connectedTo=[],this.id="cdk-drop-list-"+$He++,this.enterPredicate=()=>!0,this.sortPredicate=()=>!0,this.dropped=new rt,this.entered=new rt,this.exited=new rt,this.sorted=new rt,this._unsortedItems=new Set,this._dropListRef=h.createDropList(a),this._dropListRef.data=this,y&&this._assignDefaults(y),this._dropListRef.enterPredicate=(v,_)=>this.enterPredicate(v.data,_.data),this._dropListRef.sortPredicate=(v,_,S)=>this.sortPredicate(v,_.data,S.data),this._setupInputSyncSubscription(this._dropListRef),this._handleEvents(this._dropListRef),c._dropLists.push(this),g&&g._items.add(this)}get disabled(){return this._disabled||!!this._group&&this._group.disabled}set disabled(a){this._dropListRef.disabled=this._disabled=Jv(a)}addItem(a){this._unsortedItems.add(a),this._dropListRef.isDragging()&&this._syncItemsWithRef()}removeItem(a){this._unsortedItems.delete(a),this._dropListRef.isDragging()&&this._syncItemsWithRef()}getSortedItems(){return Array.from(this._unsortedItems).sort((a,h)=>a._dragRef.getVisibleElement().compareDocumentPosition(h._dragRef.getVisibleElement())&Node.DOCUMENT_POSITION_FOLLOWING?-1:1)}ngOnDestroy(){const a=c._dropLists.indexOf(this);a>-1&&c._dropLists.splice(a,1),this._group&&this._group._items.delete(this),this._unsortedItems.clear(),this._dropListRef.dispose(),this._destroyed.next(),this._destroyed.complete()}_setupInputSyncSubscription(a){this._dir&&this._dir.change.pipe(Dd(this._dir.value),Nh(this._destroyed)).subscribe(h=>a.withDirection(h)),a.beforeStarted.subscribe(()=>{const h=function eHe(c){return Array.isArray(c)?c:[c]}(this.connectedTo).map(d=>"string"==typeof d?c._dropLists.find(m=>m.id===d):d);if(this._group&&this._group._items.forEach(d=>{-1===h.indexOf(d)&&h.push(d)}),!this._scrollableParentsResolved){const d=this._scrollDispatcher.getAncestorScrollContainers(this.element).map(f=>f.getElementRef().nativeElement);this._dropListRef.withScrollableParents(d),this._scrollableParentsResolved=!0}a.disabled=this.disabled,a.lockAxis=this.lockAxis,a.sortingDisabled=Jv(this.sortingDisabled),a.autoScrollDisabled=Jv(this.autoScrollDisabled),a.autoScrollStep=kJ(this.autoScrollStep,2),a.connectedTo(h.filter(d=>d&&d!==this).map(d=>d._dropListRef)).withOrientation(this.orientation)})}_handleEvents(a){a.beforeStarted.subscribe(()=>{this._syncItemsWithRef(),this._changeDetectorRef.markForCheck()}),a.entered.subscribe(h=>{this.entered.emit({container:this,item:h.item.data,currentIndex:h.currentIndex})}),a.exited.subscribe(h=>{this.exited.emit({container:this,item:h.item.data}),this._changeDetectorRef.markForCheck()}),a.sorted.subscribe(h=>{this.sorted.emit({previousIndex:h.previousIndex,currentIndex:h.currentIndex,container:this,item:h.item.data})}),a.dropped.subscribe(h=>{this.dropped.emit({previousIndex:h.previousIndex,currentIndex:h.currentIndex,previousContainer:h.previousContainer.data,container:h.container.data,item:h.item.data,isPointerOverContainer:h.isPointerOverContainer,distance:h.distance,dropPoint:h.dropPoint,event:h.event}),this._changeDetectorRef.markForCheck()})}_assignDefaults(a){const{lockAxis:h,draggingDisabled:d,sortingDisabled:f,listAutoScrollDisabled:m,listOrientation:g}=a;this.disabled=d??!1,this.sortingDisabled=f??!1,this.autoScrollDisabled=m??!1,this.orientation=g||"vertical",h&&(this.lockAxis=h)}_syncItemsWithRef(){this._dropListRef.withItems(this.getSortedItems().map(a=>a._dragRef))}}return c._dropLists=[],c.\u0275fac=function(a){return new(a||c)(N(zt),N(m3),N(Ss),N(pHe),N($J,8),N(dee,12),N(fee,8))},c.\u0275dir=We({type:c,selectors:[["","cdkDropList",""],["cdk-drop-list"]],hostAttrs:[1,"cdk-drop-list"],hostVars:7,hostBindings:function(a,h){2&a&&(Ne("id",h.id),st("cdk-drop-list-disabled",h.disabled)("cdk-drop-list-dragging",h._dropListRef.isDragging())("cdk-drop-list-receiving",h._dropListRef.isReceiving()))},inputs:{connectedTo:["cdkDropListConnectedTo","connectedTo"],data:["cdkDropListData","data"],orientation:["cdkDropListOrientation","orientation"],id:"id",lockAxis:["cdkDropListLockAxis","lockAxis"],disabled:["cdkDropListDisabled","disabled"],sortingDisabled:["cdkDropListSortingDisabled","sortingDisabled"],enterPredicate:["cdkDropListEnterPredicate","enterPredicate"],sortPredicate:["cdkDropListSortPredicate","sortPredicate"],autoScrollDisabled:["cdkDropListAutoScrollDisabled","autoScrollDisabled"],autoScrollStep:["cdkDropListAutoScrollStep","autoScrollStep"]},outputs:{dropped:"cdkDropListDropped",entered:"cdkDropListEntered",exited:"cdkDropListExited",sorted:"cdkDropListSorted"},exportAs:["cdkDropList"],features:[Mt([{provide:dee,useValue:void 0},{provide:pee,useExisting:c}])]}),c})();const y3=new Vt("CdkDragHandle");let gee=(()=>{class c{constructor(a,h){this.element=a,this._stateChanges=new Ke,this._disabled=!1,this._parentDrag=h}get disabled(){return this._disabled}set disabled(a){this._disabled=Jv(a),this._stateChanges.next(this)}ngOnDestroy(){this._stateChanges.complete()}}return c.\u0275fac=function(a){return new(a||c)(N(zt),N(g3,12))},c.\u0275dir=We({type:c,selectors:[["","cdkDragHandle",""]],hostAttrs:[1,"cdk-drag-handle"],inputs:{disabled:["cdkDragHandleDisabled","disabled"]},features:[Mt([{provide:y3,useExisting:c}])]}),c})();const YHe=new Vt("CdkDragPlaceholder"),ZHe=new Vt("CdkDragPreview");let yee=(()=>{class c{constructor(a,h,d,f,m,g,y,v,_,S,b){this.element=a,this.dropContainer=h,this._ngZone=f,this._viewContainerRef=m,this._dir=y,this._changeDetectorRef=_,this._selfHandle=S,this._parentDrag=b,this._destroyed=new Ke,this.started=new rt,this.released=new rt,this.ended=new rt,this.entered=new rt,this.exited=new rt,this.dropped=new rt,this.moved=new wt(T=>{const x=this._dragRef.moved.pipe(ve(E=>({source:this,pointerPosition:E.pointerPosition,event:E.event,delta:E.delta,distance:E.distance}))).subscribe(T);return()=>{x.unsubscribe()}}),this._dragRef=v.createDrag(a,{dragStartThreshold:g&&null!=g.dragStartThreshold?g.dragStartThreshold:5,pointerDirectionChangeThreshold:g&&null!=g.pointerDirectionChangeThreshold?g.pointerDirectionChangeThreshold:5,zIndex:g?.zIndex}),this._dragRef.data=this,c._dragInstances.push(this),g&&this._assignDefaults(g),h&&(this._dragRef._withDropContainer(h._dropListRef),h.addItem(this)),this._syncInputs(this._dragRef),this._handleEvents(this._dragRef)}get disabled(){return this._disabled||this.dropContainer&&this.dropContainer.disabled}set disabled(a){this._disabled=Jv(a),this._dragRef.disabled=this._disabled}getPlaceholderElement(){return this._dragRef.getPlaceholderElement()}getRootElement(){return this._dragRef.getRootElement()}reset(){this._dragRef.reset()}getFreeDragPosition(){return this._dragRef.getFreeDragPosition()}setFreeDragPosition(a){this._dragRef.setFreeDragPosition(a)}ngAfterViewInit(){this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.pipe(dh(1),Nh(this._destroyed)).subscribe(()=>{this._updateRootElement(),this._setupHandlesListener(),this.freeDragPosition&&this._dragRef.setFreeDragPosition(this.freeDragPosition)})})}ngOnChanges(a){const h=a.rootElementSelector,d=a.freeDragPosition;h&&!h.firstChange&&this._updateRootElement(),d&&!d.firstChange&&this.freeDragPosition&&this._dragRef.setFreeDragPosition(this.freeDragPosition)}ngOnDestroy(){this.dropContainer&&this.dropContainer.removeItem(this);const a=c._dragInstances.indexOf(this);a>-1&&c._dragInstances.splice(a,1),this._ngZone.runOutsideAngular(()=>{this._destroyed.next(),this._destroyed.complete(),this._dragRef.dispose()})}_updateRootElement(){const a=this.element.nativeElement;let h=a;this.rootElementSelector&&(h=void 0!==a.closest?a.closest(this.rootElementSelector):a.parentElement?.closest(this.rootElementSelector)),this._dragRef.withRootElement(h||a)}_getBoundaryElement(){const a=this.boundaryElement;return a?"string"==typeof a?this.element.nativeElement.closest(a):Fa(a):null}_syncInputs(a){a.beforeStarted.subscribe(()=>{if(!a.isDragging()){const h=this._dir,d=this.dragStartDelay,f=this._placeholderTemplate?{template:this._placeholderTemplate.templateRef,context:this._placeholderTemplate.data,viewContainer:this._viewContainerRef}:null,m=this._previewTemplate?{template:this._previewTemplate.templateRef,context:this._previewTemplate.data,matchSize:this._previewTemplate.matchSize,viewContainer:this._viewContainerRef}:null;a.disabled=this.disabled,a.lockAxis=this.lockAxis,a.dragStartDelay="object"==typeof d&&d?d:kJ(d),a.constrainPosition=this.constrainPosition,a.previewClass=this.previewClass,a.withBoundaryElement(this._getBoundaryElement()).withPlaceholderTemplate(f).withPreviewTemplate(m).withPreviewContainer(this.previewContainer||"global"),h&&a.withDirection(h.value)}}),a.beforeStarted.pipe(dh(1)).subscribe(()=>{if(this._parentDrag)return void a.withParent(this._parentDrag._dragRef);let h=this.element.nativeElement.parentElement;for(;h;){if(h.classList.contains("cdk-drag")){a.withParent(c._dragInstances.find(d=>d.element.nativeElement===h)?._dragRef||null);break}h=h.parentElement}})}_handleEvents(a){a.started.subscribe(h=>{this.started.emit({source:this,event:h.event}),this._changeDetectorRef.markForCheck()}),a.released.subscribe(h=>{this.released.emit({source:this,event:h.event})}),a.ended.subscribe(h=>{this.ended.emit({source:this,distance:h.distance,dropPoint:h.dropPoint,event:h.event}),this._changeDetectorRef.markForCheck()}),a.entered.subscribe(h=>{this.entered.emit({container:h.container.data,item:this,currentIndex:h.currentIndex})}),a.exited.subscribe(h=>{this.exited.emit({container:h.container.data,item:this})}),a.dropped.subscribe(h=>{this.dropped.emit({previousIndex:h.previousIndex,currentIndex:h.currentIndex,previousContainer:h.previousContainer.data,container:h.container.data,isPointerOverContainer:h.isPointerOverContainer,item:this,distance:h.distance,dropPoint:h.dropPoint,event:h.event})})}_assignDefaults(a){const{lockAxis:h,dragStartDelay:d,constrainPosition:f,previewClass:m,boundaryElement:g,draggingDisabled:y,rootElementSelector:v,previewContainer:_}=a;this.disabled=y??!1,this.dragStartDelay=d||0,h&&(this.lockAxis=h),f&&(this.constrainPosition=f),m&&(this.previewClass=m),g&&(this.boundaryElement=g),v&&(this.rootElementSelector=v),_&&(this.previewContainer=_)}_setupHandlesListener(){this._handles.changes.pipe(Dd(this._handles),Li(a=>{const h=a.filter(d=>d._parentDrag===this).map(d=>d.element);this._selfHandle&&this.rootElementSelector&&h.push(this.element),this._dragRef.withHandles(h)}),wa(a=>eI(...a.map(h=>h._stateChanges.pipe(Dd(h))))),Nh(this._destroyed)).subscribe(a=>{const h=this._dragRef,d=a.element.nativeElement;a.disabled?h.disableHandle(d):h.enableHandle(d)})}}return c._dragInstances=[],c.\u0275fac=function(a){return new(a||c)(N(zt),N(pee,12),N(Er),N(kn),N(Zn),N(fee,8),N($J,8),N(m3),N(Ss),N(y3,10),N(g3,12))},c.\u0275dir=We({type:c,selectors:[["","cdkDrag",""]],contentQueries:function(a,h,d){if(1&a&&(yn(d,ZHe,5),yn(d,YHe,5),yn(d,y3,5)),2&a){let f;mt(f=gt())&&(h._previewTemplate=f.first),mt(f=gt())&&(h._placeholderTemplate=f.first),mt(f=gt())&&(h._handles=f)}},hostAttrs:[1,"cdk-drag"],hostVars:4,hostBindings:function(a,h){2&a&&st("cdk-drag-disabled",h.disabled)("cdk-drag-dragging",h._dragRef.isDragging())},inputs:{data:["cdkDragData","data"],lockAxis:["cdkDragLockAxis","lockAxis"],rootElementSelector:["cdkDragRootElement","rootElementSelector"],boundaryElement:["cdkDragBoundary","boundaryElement"],dragStartDelay:["cdkDragStartDelay","dragStartDelay"],freeDragPosition:["cdkDragFreeDragPosition","freeDragPosition"],disabled:["cdkDragDisabled","disabled"],constrainPosition:["cdkDragConstrainPosition","constrainPosition"],previewClass:["cdkDragPreviewClass","previewClass"],previewContainer:["cdkDragPreviewContainer","previewContainer"]},outputs:{started:"cdkDragStarted",released:"cdkDragReleased",ended:"cdkDragEnded",entered:"cdkDragEntered",exited:"cdkDragExited",dropped:"cdkDragDropped",moved:"cdkDragMoved"},exportAs:["cdkDrag"],features:[Mt([{provide:g3,useExisting:c}]),ys]}),c})(),QHe=(()=>{class c{}return c.\u0275fac=function(a){return new(a||c)},c.\u0275mod=Ut({type:c}),c.\u0275inj=kt({providers:[m3],imports:[yHe]}),c})();function JHe(c,l){}let vee=(()=>{class c{constructor(a){this.viewContainerRef=a}}return c.\u0275fac=function(a){return new(a||c)(N(Zn))},c.\u0275dir=We({type:c,selectors:[["","ukisAddHost",""]]}),c})(),_ee=(()=>{class c{constructor(a){this.componentFactoryResolver=a,this.dynamicComponentChange=new rt}loadComponent(){if(this.dynamicComponent){this.subs=[];const a=this.componentFactoryResolver.resolveComponentFactory(this.dynamicComponent.component),h=this.ukisAddHost.viewContainerRef;h.clear(),this.componentRef=h.createComponent(a),this.setInputOutputs()}}setInputOutputs(){this.componentRef&&this.dynamicComponent.inputs&&Object.keys(this.dynamicComponent.inputs).map(h=>{const d=h;if(this.dynamicComponent.inputs){this.componentRef.instance[d]=this.dynamicComponent.inputs[d];const f=`${d}Change`;if(this.componentRef.instance[f]&&this.componentRef.instance[f]instanceof rt){const m=this.componentRef.instance[f].subscribe(g=>{this.dynamicComponent.inputs&&(this.dynamicComponent.inputs[d]=g),this.dynamicComponent.outputs&&this.dynamicComponent.outputs[f]&&this.dynamicComponent.outputs[f](g),this.dynamicComponentChange.emit(this.dynamicComponent)});this.subs.push(m)}}})}ngOnChanges(a){a.dynamicComponent&&(Array.isArray(this.subs)&&this.subs.map(h=>h.unsubscribe()),this.setInputOutputs())}ngOnInit(){this.loadComponent()}ngOnDestroy(){this.componentRef&&(this.subs.map(a=>a.unsubscribe()),this.componentRef.destroy(),this.componentRef=null)}}return c.\u0275fac=function(a){return new(a||c)(N(nu))},c.\u0275cmp=Be({type:c,selectors:[["ukis-dynamic-component"]],viewQuery:function(a,h){if(1&a&&hr(vee,7),2&a){let d;mt(d=gt())&&(h.ukisAddHost=d.first)}},inputs:{dynamicComponent:"dynamicComponent"},outputs:{dynamicComponentChange:"dynamicComponentChange"},features:[ys],decls:1,vars:0,consts:[["ukisAddHost",""]],template:function(a,h){1&a&&le(0,JHe,0,0,"ng-template",0)},dependencies:[vee],encapsulation:2}),c})();const v3=function(c){return{disabled:c}};function e9e(c,l){if(1&c){const a=Xt();U(0,"clr-icon",12),Me("click",function(){return vt(a),_t(de().showProperties())}),H()}if(2&c){const a=de();G("ngStyle",a.getExpandShape())("ngClass",gi(2,v3,a.is_expandable()))}}function t9e(c,l){if(1&c){const a=Xt();U(0,"span",13),Me("click",function(){return vt(a),_t(de().showProperties())}),ye(1),H()}if(2&c){const a=de();G("title",a.getLayerName(a.layer)),B(1),mi(" ",a.getLayerName(a.layer)," ")}}function n9e(c,l){if(1&c){const a=Xt();U(0,"span")(1,"clr-icon",14),Me("click",function(){vt(a);const d=de();return _t(d.setLayerIndex(d.layer,"down",d.group))}),H(),U(2,"clr-icon",15),Me("click",function(){vt(a);const d=de();return _t(d.setLayerIndex(d.layer,"up",d.group))}),H()()}if(2&c){const a=de();B(1),G("hidden",a.layerGroups&&1==a.layerGroups.length)("ngClass",gi(4,v3,a.isLast(a.layer))),B(1),G("hidden",a.layerGroups&&1==a.layerGroups.length)("ngClass",gi(6,v3,a.isFirst(a.layer)))}}const See=function(c){return{"is-solid":c}};function r9e(c,l){if(1&c&&xe(0,"clr-icon",16),2&c){const a=de();Eo("title",a.layer.visible?"Choose another layer":"Show layer"),G("ngClass",gi(3,See,a.layer.visible)),Ne("shape",a.layer.visible?"dot-circle":"circle")}}function i9e(c,l){if(1&c&&xe(0,"clr-icon",16),2&c){const a=de();Eo("title",a.layer.visible?"Hide layer":"Show layer"),G("ngClass",gi(3,See,a.layer.visible)),Ne("shape",a.layer.visible?"eye":"eye-hide")}}const _3=function(c){return{active:c}};function s9e(c,l){if(1&c){const a=Xt();U(0,"clr-icon",26),Me("click",function(){return vt(a),_t(de(2).switchTab("settings"))}),H()}if(2&c){const a=de(2);G("ngClass",gi(1,_3,a.activeTabs.settings))}}function o9e(c,l){if(1&c){const a=Xt();U(0,"clr-icon",27),Me("click",function(){return vt(a),_t(de(2).switchTab("legend"))}),H()}if(2&c){const a=de(2);G("ngClass",gi(1,_3,a.activeTabs.legend))}}function a9e(c,l){if(1&c){const a=Xt();U(0,"clr-icon",28),Me("click",function(){return vt(a),_t(de(2).switchTab("description"))}),H()}if(2&c){const a=de(2);G("ngClass",gi(1,_3,a.activeTabs.description))}}function l9e(c,l){if(1&c){const a=Xt();U(0,"clr-icon",29),Me("click",function(){const f=vt(a).$implicit,m=de(2);return _t(f.action(m.layer))}),H()}if(2&c){const a=l.$implicit;G("title",a.title),Ne("shape",a.icon)}}function c9e(c,l){if(1&c){const a=Xt();U(0,"clr-icon",30),Me("click",function(){vt(a);const d=de(2);return _t(d.zoomTo(d.layer))}),H()}}function u9e(c,l){if(1&c){const a=Xt();U(0,"clr-icon",31),Me("click",function(){vt(a);const d=de(2);return _t(d.removeLayer(d.group,d.layer))}),H()}}function h9e(c,l){if(1&c){const a=Xt();U(0,"div",36)(1,"label",8),ye(2,"Opacity:"),H(),U(3,"input",37),Me("change",function(){vt(a);const d=de(4);return _t(d.setLayerOpacity(d.layer))})("ngModelChange",function(d){return vt(a),_t(de(4).layer.opacity=d)}),H(),U(4,"span"),ye(5),H()()}if(2&c){const a=de(4);B(1),G("for","layer_transparency_slider_"+a.layer.id),B(2),G("id","layer_transparency_slider_"+a.layer.id)("value",a.layer.opacity)("min",0)("max",1)("step",.1)("ngModel",a.layer.opacity),B(2),Zt(" "+a.layer.opacity)}}function d9e(c,l){if(1&c&&(U(0,"option",40),ye(1),H()),2&c){const a=l.$implicit,h=de(5);G("value",a.name),Ne("selected",!!h.isSelectedStyle(a.name)||null),B(1),Zt(a.title)}}function f9e(c,l){if(1&c){const a=Xt();er(0),U(1,"select",38),Me("change",function(d){return vt(a),_t(de(4).executeChangeStyle(d))}),le(2,d9e,2,3,"option",39),H(),tr()}if(2&c){const a=de(4);B(2),G("ngForOf",a.layer.styles)}}function p9e(c,l){if(1&c){const a=Xt();er(0),U(1,"ukis-dynamic-component",41),Me("dynamicComponentChange",function(d){return vt(a),_t(de(4).dynamicComponents.action=d)}),H(),tr()}if(2&c){const a=de(4);B(1),G("dynamicComponent",a.dynamicComponents.action)}}function m9e(c,l){if(1&c&&(U(0,"div",34),le(1,h9e,6,8,"div",35),le(2,f9e,3,1,"ng-container",6),le(3,p9e,2,1,"ng-container",6),H()),2&c){const a=de(3);B(1),G("ngIf",!a.checkBaselayer(a.layer,a.group)),B(1),G("ngIf",a.layer.styles&&(null==a.layer.styles?null:a.layer.styles.length)>1),B(1),G("ngIf",a.checkIsComponentItem(a.layer,"action"))}}function g9e(c,l){if(1&c){const a=Xt();er(0),U(1,"ukis-dynamic-component",41),Me("dynamicComponentChange",function(d){return vt(a),_t(de(4).dynamicComponents.legendImg=d)}),H(),tr()}if(2&c){const a=de(4);B(1),G("dynamicComponent",a.dynamicComponents.legendImg)}}function y9e(c,l){if(1&c&&(U(0,"a",44),xe(1,"img",45),H()),2&c){const a=de(4);G("href",a.layer.legendImg,Wa),B(1),G("src",a.layer.legendImg,Wa)}}function v9e(c,l){if(1&c&&(U(0,"div"),le(1,g9e,2,1,"ng-container",42),le(2,y9e,2,2,"ng-template",null,43,qs),H()),2&c){const a=Ki(3),h=de(3);B(1),G("ngIf",h.checkIsComponentItem(h.layer,"legendImg"))("ngIfElse",a)}}function _9e(c,l){if(1&c){const a=Xt();er(0),U(1,"ukis-dynamic-component",41),Me("dynamicComponentChange",function(d){return vt(a),_t(de(4).dynamicComponents.description=d)}),H(),tr()}if(2&c){const a=de(4);B(1),G("dynamicComponent",a.dynamicComponents.description)}}function S9e(c,l){1&c&&xe(0,"span",47),2&c&&G("innerHTML",de(4).layer.description,dw)}function b9e(c,l){if(1&c&&(U(0,"div"),le(1,_9e,2,1,"ng-container",42),le(2,S9e,1,1,"ng-template",null,46,qs),H()),2&c){const a=Ki(3),h=de(3);B(1),G("ngIf",h.checkIsComponentItem(h.layer,"description"))("ngIfElse",a)}}function T9e(c,l){if(1&c&&(U(0,"div",32),le(1,m9e,4,3,"div",33),le(2,v9e,4,2,"div",6),le(3,b9e,4,2,"div",6),H()),2&c){const a=de(2);B(1),G("ngIf",a.activeTabs.settings),B(1),G("ngIf",a.activeTabs.legend&&a.layer.legendImg),B(1),G("ngIf",a.activeTabs.description&&a.layer.description)}}function w9e(c,l){if(1&c&&(U(0,"div",17)(1,"div",18),le(2,s9e,1,3,"clr-icon",19),le(3,o9e,1,3,"clr-icon",20),le(4,a9e,1,3,"clr-icon",21),le(5,l9e,1,2,"clr-icon",22),xe(6,"span"),le(7,c9e,1,0,"clr-icon",23),le(8,u9e,1,0,"clr-icon",24),H(),le(9,T9e,4,3,"div",25),H()),2&c){const a=de();B(2),G("ngIf",!a.checkBaselayer(a.layer,a.group)||a.layer.action),B(1),G("ngIf",a.layer.legendImg),B(1),G("ngIf",a.layer.description),B(1),G("ngForOf",a.layer.actions),B(2),G("ngIf",a.canZoomToLayer),B(1),G("ngIf",a.layer.removable),B(1),G("ngIf",a.hasTabsbody)}}const C9e=["*"];let S3=(()=>{class c{constructor(){this.expandable=!0,this.update=new rt,this.canZoomToLayer=!1,this.activeTabs={settings:!1,legend:!0,description:!1},this.hasTabsbody=!0,this.dynamicComponents={legendImg:null,action:null,description:null}}get visible(){return this.layer.visible}get cssClass(){return this.layer.cssClass}set expanded(a){this.layer&&(this.layer.expanded=a)}get expanded(){return!!this.layer&&this.layer.expanded}checkIsComponentItem(a,h){const d=a[h];let f=!1;if(d&&"object"==typeof d&&"component"in d){const m=d.component;d.inputs?d.inputs&&!d.inputs.layer?this.dynamicComponents[h]={component:d.component,inputs:Object.assign({},d.inputs,{layer:a})}:d.inputs&&d.inputs.layer&&(this.dynamicComponents[h]={component:d.component,inputs:Object.assign({},d.inputs)}):this.dynamicComponents[h]={component:m,inputs:{layer:a}},d.outputs&&(this.dynamicComponents[h].outputs=Object.assign({},d.outputs)),f=!0}return f}getLayerName(a){return a.displayName?a.displayName:a.name}ngOnInit(){this.layersSvc||console.error("you need to provide a layersService!"),this.layer.legendImg||(this.activeTabs.description=!0,this.activeTabs.legend=!1,this.activeTabs.settings=!1),!this.layer.legendImg&&!this.layer.description&&(this.activeTabs.description=!1,this.activeTabs.legend=!1,this.activeTabs.settings=!0),this.layer.bbox&&this.layer.bbox.length>=4&&(this.canZoomToLayer=!0),"Baselayers"!==this.layer.filtertype||this.layer.legendImg||this.layer.description||this.layer.action||this.layer.actions||this.layer.styles||this.layer.styles?.length>1||(this.hasTabsbody=!1)}setLayerVisibility(a,h){if(h){if(h.layers.length>0)if("Baselayers"===h.filtertype){for(const d of h.layers)d.visible=d===a;this.update.emit({layer:this.layer})}else{const d=h.visible;a.visible=!a.visible,d!==h.visible?this.update.emit({layer:this.layer}):this.layersSvc.updateLayer(a,a.filtertype||"Layers")}}else if("Baselayers"===a.filtertype){a.visible=!a.visible;const d=this.layerGroups.filter(f=>"Baselayers"===f.filtertype);for(const f of d)f instanceof Ys&&f.id!==a.id&&(f.visible=!a.visible,this.layersSvc.updateLayer(f,f.filtertype||"Baselayers"))}else a.visible=!a.visible,this.layersSvc.updateLayer(a,a.filtertype||"Layers")}setLayerIndex(a,h,d){d?this.layersSvc.setLayerIndexInGroup(a,h,d):this.layersSvc.setGroupLayerIndex(a,h)}removeLayer(a,h){a?this.layersSvc.removeLayerFromGroup(h,a):this.layersSvc.removeLayer(h,h.filtertype)}zoomTo(a){this.mapState&&a.bbox&&a.bbox.length>=4&&this.mapState.setExtent(a.bbox)}setLayerOpacity(a){this.group?this.update.emit({layer:a}):this.layersSvc.updateLayer(a,a.filtertype||"Layers")}checkBaselayer(a,h){return!!("Baselayers"===a.filtertype||h&&"Baselayers"===h.filtertype)}is_expandable(){return this.group?!this.layer.legendImg&&"Baselayers"===this.group.filtertype:!this.hasTabsbody}showProperties(){this.is_expandable()||(this.expanded=!this.expanded)}switchTab(a){for(const h of Object.keys(this.activeTabs))this.activeTabs[h]=a===h}isSelectedStyle(a){return this.layer instanceof gy?this.layer.params.STYLES===a:this.layer instanceof Ca&&this.layer.params.style===a}executeChangeStyle(a){const h=a.target.value;if(this.layer.styles){const d=this.layer.styles.find(f=>f.name===h);d&&(this.layer.legendImg=d.legendURL,this.layer instanceof gy?this.layer.params.STYLES=d.name:this.layer instanceof Ca&&(this.layer.params.style=d.name),this.layersSvc.updateLayer(this.layer,this.layer.filtertype))}}isFirst(a){return this.group?this.layersSvc.isGroupFirst(a,this.group.layers):this.layersSvc.isGroupFirst(a,null,a.filtertype)}isLast(a){return this.group?this.layersSvc.isGroupLast(a,this.group.layers):this.layersSvc.isGroupLast(a,null,a.filtertype)}getExpandShape(){return this.expanded?{transform:"rotate(180deg)"}:{transform:"rotate(90deg)"}}}return c.\u0275fac=function(a){return new(a||c)},c.\u0275cmp=Be({type:c,selectors:[["ukis-layerentry"]],hostVars:4,hostBindings:function(a,h){2&a&&(Yo(h.cssClass),st("layer-visible",h.visible))},inputs:{layersSvc:"layersSvc",mapState:"mapState",layer:"layer",group:"group",layerGroups:"layerGroups",expanded:"expanded",expandable:"expandable"},outputs:{update:"update"},ngContentSelectors:C9e,decls:14,vars:12,consts:[[1,"layer"],[1,"head"],["shape","angle","class","iconButton","title","Details",3,"ngStyle","ngClass","click",4,"ngIf"],[1,"item-title-replacement","title",3,"title","click"],["ref",""],["class","title",3,"title","click",4,"ngIf"],[4,"ngIf"],[1,"hide",3,"type","name","id","checked","change"],[3,"for"],["class","iconButton",3,"ngClass","title",4,"ngIf","ngIfElse"],["notBaselayer",""],["class","body",4,"ngIf"],["shape","angle","title","Details",1,"iconButton",3,"ngStyle","ngClass","click"],[1,"title",3,"title","click"],["shape","arrow","title","up",1,"iconButton",3,"hidden","ngClass","click"],["shape","arrow","title","down","dir","down",1,"iconButton",3,"hidden","ngClass","click"],[1,"iconButton",3,"ngClass","title"],[1,"body"],[1,"tools"],["title","Layer settings","shape","cog","class","iconButton",3,"ngClass","click",4,"ngIf"],["title","Layer Legend","shape","image","class","iconButton",3,"ngClass","click",4,"ngIf"],["title","Layer info","shape","info-standard","class","iconButton",3,"ngClass","click",4,"ngIf"],["class","iconButton",3,"title","click",4,"ngFor","ngForOf"],["shape","zoom-in","class","iconButton","title","Zoom to layer",3,"click",4,"ngIf"],["shape","trash","class","iconButton","title","Remove layer",3,"click",4,"ngIf"],["class","tabsbody",4,"ngIf"],["title","Layer settings","shape","cog",1,"iconButton",3,"ngClass","click"],["title","Layer Legend","shape","image",1,"iconButton",3,"ngClass","click"],["title","Layer info","shape","info-standard",1,"iconButton",3,"ngClass","click"],[1,"iconButton",3,"title","click"],["shape","zoom-in","title","Zoom to layer",1,"iconButton",3,"click"],["shape","trash","title","Remove layer",1,"iconButton",3,"click"],[1,"tabsbody"],["class","layersettings",4,"ngIf"],[1,"layersettings"],["class","form-group",4,"ngIf"],[1,"form-group"],["type","range","name","points",1,"ukis-range-input","opacity-input",3,"id","value","min","max","step","ngModel","change","ngModelChange"],["clrSelect","",3,"change"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[3,"dynamicComponent","dynamicComponentChange"],[4,"ngIf","ngIfElse"],["imageUrl",""],["target","_blank","title","Show full Image",3,"href"],[3,"src"],["descriptionText",""],[3,"innerHTML"]],template:function(a,h){if(1&a&&(Et(),U(0,"div",0)(1,"div",1),le(2,e9e,1,4,"clr-icon",2),U(3,"div",3,4),Me("click",function(){return h.showProperties()}),ke(5),H(),le(6,t9e,2,2,"span",5),le(7,n9e,3,8,"span",6),U(8,"input",7),Me("change",function(){return h.setLayerVisibility(h.layer,h.group)}),H(),U(9,"label",8),le(10,r9e,1,5,"clr-icon",9),le(11,i9e,1,5,"ng-template",null,10,qs),H()(),le(13,w9e,10,7,"div",11),H()),2&a){const d=Ki(4),f=Ki(12);B(2),G("ngIf",h.hasTabsbody),B(1),G("title",h.getLayerName(h.layer)),B(3),G("ngIf",0==d.children.length),B(1),G("ngIf",!h.checkBaselayer(h.layer,h.group)),B(1),G("type",h.checkBaselayer(h.layer,h.group)?"radio":"checkbox")("name","layer")("id",h.layer.id)("checked",h.layer.visible),B(1),G("for",h.layer.id),B(1),G("ngIf",h.checkBaselayer(h.layer,h.group))("ngIfElse",f),B(3),G("ngIf",h.expandable&&h.expanded)}},dependencies:[$s,vi,vn,KP,fa,es,bZ,$E,YE,Gl,Nb,Pa,sl,_ee],styles:[".title[_ngcontent-%COMP%]{cursor:pointer}.item-title-replacement[_ngcontent-%COMP%]:empty{display:none}.body[_ngcontent-%COMP%]{cursor:default}.tabsbody[_ngcontent-%COMP%]{overflow:hidden;word-break:break-all}.tabsbody[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:auto;max-width:100%}"]}),c})(),bee=(()=>{class c{transform(a,h){return a.filter(h)}}return c.\u0275fac=function(a){return new(a||c)},c.\u0275pipe=bo({name:"itemsfilter",type:c,pure:!1}),c})(),b3=(()=>{class c{transform(a){return"string"==typeof a?a.split("").reverse().join(""):Array.isArray(a)?a.slice().reverse():a}}return c.\u0275fac=function(a){return new(a||c)},c.\u0275pipe=bo({name:"reverse",type:c,pure:!1}),c})();function x9e(c,l){if(1&c){const a=Xt();U(0,"span",8),Me("click",function(){return vt(a),_t(de().showProperties())}),ye(1),H()}if(2&c){const a=de();G("title",a.getLayerName(a.group)),B(1),mi(" ",a.getLayerName(a.group)," ")}}const Tee=function(c){return{disabled:c}};function E9e(c,l){if(1&c){const a=Xt();U(0,"span")(1,"clr-icon",9),Me("click",function(){vt(a);const d=de();return _t(d.setLayerGroupIndex(d.group,"down"))}),H(),U(2,"clr-icon",10),Me("click",function(){vt(a);const d=de();return _t(d.setLayerGroupIndex(d.group,"up"))}),H()()}if(2&c){const a=de();B(1),G("ngClass",gi(2,Tee,a.isLast(a.group))),B(1),G("ngClass",gi(4,Tee,a.isFirst(a.group)))}}const BT=function(c){return{"is-solid":c}};function M9e(c,l){if(1&c){const a=Xt();U(0,"span")(1,"input",11),Me("change",function(){return vt(a),_t(de().setGroupLayersVisibility())}),H(),U(2,"label",12),xe(3,"clr-icon",13),H()()}if(2&c){const a=de();B(1),G("type","checkbox")("checked",a.group.visible)("name","group")("id",a.group.id),B(1),G("for",a.group.id),B(1),Eo("title",a.group.visible?"Hide Group":"Show Group"),G("ngClass",gi(8,BT,a.group.visible)),Ne("shape",a.group.visible?"eye":"eye-hide")}}function D9e(c,l){if(1&c){const a=Xt();U(0,"clr-icon",26),Me("click",function(){return vt(a),_t(de(2).switchTab("settings"))}),H()}if(2&c){const a=de(2);Eo("title",a.activeTabs.settings?"Hide settings":"Show settings"),G("ngClass",gi(2,BT,a.activeTabs.settings))}}function A9e(c,l){if(1&c){const a=Xt();U(0,"clr-icon",27),Me("click",function(){return vt(a),_t(de(2).switchTab("legend"))}),H()}if(2&c){const a=de(2);Eo("title",a.activeTabs.legend?"Hide Legend":"Show Legend"),G("ngClass",gi(2,BT,a.activeTabs.legend))}}function I9e(c,l){if(1&c){const a=Xt();U(0,"clr-icon",28),Me("click",function(){return vt(a),_t(de(2).switchTab("description"))}),H()}if(2&c){const a=de(2);Eo("title",a.activeTabs.description?"Hide Info":"Show Info"),G("ngClass",gi(2,BT,a.activeTabs.description))}}function R9e(c,l){if(1&c){const a=Xt();U(0,"clr-icon",2),Me("click",function(){const f=vt(a).$implicit,m=de(2);return _t(f.action(m.group))}),H()}if(2&c){const a=l.$implicit;G("title",a.title),Ne("shape",a.icon)}}function P9e(c,l){if(1&c){const a=Xt();U(0,"clr-icon",29),Me("click",function(){vt(a);const d=de(2);return _t(d.zoomTo(d.group))}),H()}}function L9e(c,l){if(1&c){const a=Xt();U(0,"clr-icon",30),Me("click",function(){vt(a);const d=de(2);return _t(d.removeLayerGroup(d.group))}),H()}}function O9e(c,l){if(1&c){const a=Xt();er(0),U(1,"ukis-dynamic-component",34),Me("dynamicComponentChange",function(d){return vt(a),_t(de(3).dynamicComponents.description=d)}),H(),tr()}if(2&c){const a=de(3);B(1),G("dynamicComponent",a.dynamicComponents.description)}}function N9e(c,l){1&c&&xe(0,"span",35),2&c&&G("innerHTML",de(3).group.description,dw)}function F9e(c,l){if(1&c&&(U(0,"div",31),le(1,O9e,2,1,"ng-container",32),le(2,N9e,1,1,"ng-template",null,33,qs),H()),2&c){const a=Ki(3),h=de(2);B(1),G("ngIf",h.checkIsComponentItem(h.group,"description"))("ngIfElse",a)}}function k9e(c,l){if(1&c){const a=Xt();er(0),U(1,"ukis-dynamic-component",34),Me("dynamicComponentChange",function(d){return vt(a),_t(de(3).group.action=d)}),H(),tr()}if(2&c){const a=de(3);B(1),G("dynamicComponent",a.group.action)}}function V9e(c,l){if(1&c&&(U(0,"div",31),le(1,k9e,2,1,"ng-container",6),H()),2&c){const a=de(2);B(1),G("ngIf",a.checkIsComponentItem(a.group,"action"))}}function B9e(c,l){if(1&c){const a=Xt();er(0),U(1,"ukis-dynamic-component",34),Me("dynamicComponentChange",function(d){return vt(a),_t(de(3).dynamicComponents.legendImg=d)}),H(),tr()}if(2&c){const a=de(3);B(1),G("dynamicComponent",a.dynamicComponents.legendImg)}}function U9e(c,l){if(1&c&&(U(0,"a",37),xe(1,"img",38),H()),2&c){const a=de(3);G("href",a.group.legendImg,Wa),B(1),G("src",a.group.legendImg,Wa)}}function G9e(c,l){if(1&c&&(U(0,"div",31),le(1,B9e,2,1,"ng-container",32),le(2,U9e,2,2,"ng-template",null,36,qs),H()),2&c){const a=Ki(3),h=de(2);B(1),G("ngIf",h.checkIsComponentItem(h.group,"legendImg"))("ngIfElse",a)}}const z9e=function(c){return{id:c}};function H9e(c,l){if(1&c){const a=Xt();er(0),U(1,"div",39)(2,"ukis-layerentry",40),Me("update",function(d){vt(a);const f=de(2);return _t(f.layerUpdate(d,f.group))}),U(3,"span",41),ye(4),H()()(),tr()}if(2&c){const a=l.$implicit,h=de(2);B(1),G("cdkDragData",gi(7,z9e,a.id)),B(1),G("expanded",h.openAllLayersProperties)("layersSvc",h.layersSvc)("mapState",h.mapState)("layer",a)("group",h.group),B(2),mi(" ",a.displayName||a.name," ")}}function j9e(c,l){if(1&c){const a=Xt();U(0,"div",14)(1,"div",15),le(2,D9e,1,4,"clr-icon",16),le(3,A9e,1,4,"clr-icon",17),le(4,I9e,1,4,"clr-icon",18),U(5,"clr-icon",19),Me("click",function(){return vt(a),_t(de().showHideAllDetails())}),H(),le(6,R9e,1,2,"clr-icon",20),xe(7,"span"),le(8,P9e,1,0,"clr-icon",21),le(9,L9e,1,0,"clr-icon",22),H(),le(10,F9e,4,2,"div",23),le(11,V9e,2,1,"div",23),le(12,G9e,4,2,"div",23),U(13,"div",24),Me("cdkDropListDropped",function(d){return vt(a),_t(de().drop(d))}),rs(14,"reverse"),rs(15,"itemsfilter"),le(16,H9e,5,9,"ng-container",25),rs(17,"reverse"),rs(18,"itemsfilter"),H()()}if(2&c){const a=de();B(2),G("ngIf",a.group.action),B(1),G("ngIf",a.group.legendImg),B(1),G("ngIf",a.group.description),B(1),Eo("title",a.openAllLayersProperties?"Hide all layers details":"Show all layers details"),G("ngClass",gi(23,BT,a.openAllLayersProperties)),B(1),G("ngForOf",a.group.actions),B(2),G("ngIf",a.canZoomToGroup),B(1),G("ngIf",a.group.removable),B(1),G("ngIf",a.group.description&&a.activeTabs.description),B(1),G("ngIf",a.group.action&&a.activeTabs.settings),B(1),G("ngIf",a.group.legendImg&&a.activeTabs.legend),B(1),G("cdkDropListData",oo(14,13,k0(15,15,a.group.layers,a.checkClassHide))),B(3),G("ngForOf",oo(17,18,k0(18,20,a.group.layers,a.checkClassHide)))}}const W9e=["*"];let wee=(()=>{class c{constructor(){this.canZoomToGroup=!1,this.activeTabs={settings:!1,legend:!0,description:!1},this.dynamicComponents={legendImg:null,action:null,description:null}}get visible(){return this.group.visible}get cssClass(){return this.group.cssClass}set openAllLayersProperties(a){this.group&&this.group.layers.length&&this.group.layers.forEach(h=>h.expanded=a)}get openAllLayersProperties(){return!(!this.group||!this.group.layers.length)&&this.group.layers.filter(a=>!0===a.expanded).length===this.group.layers.length}ngOnInit(){this.group.bbox&&this.group.bbox.length>=4&&(this.canZoomToGroup=!0),this.group?.action||(this.activeTabs.settings=!1)}checkIsComponentItem(a,h){const d=a[h];let f=!1;if(d&&"object"==typeof d&&"component"in d){const m=d.component;d.inputs?d.inputs&&!d.inputs.group?this.dynamicComponents[h]={component:d.component,inputs:Object.assign({},d.inputs,{group:a})}:d.inputs&&d.inputs.group&&(this.dynamicComponents[h]={component:d.component,inputs:Object.assign({},d.inputs)}):this.dynamicComponents[h]={component:m,inputs:{group:a}},d.outputs&&(this.dynamicComponents[h].outputs=Object.assign({},d.outputs)),f=!0}return f}checkBaselayer(a){return!(!a||"Baselayers"!==a.filtertype)}checkClassHide(a){return!a?.cssClass?.includes("hide")}getLayerName(a){return a.displayName?a.displayName:a.name}setLayerGroupIndex(a,h){this.layersSvc.setGroupLayerIndex(a,h)}setGroupLayersVisibility(){this.group.visible=!this.group.visible,this.layersSvc.updateLayerGroup(this.group)}removeLayerGroup(a){this.layersSvc.removeLayerGroup(a)}zoomTo(a){this.mapState&&a.bbox&&a.bbox.length>=4&&this.mapState.setExtent(a.bbox)}layerUpdate(a,h){this.layersSvc.updateLayerGroup(h)}showProperties(){this.group.expanded=!this.group.expanded}switchTab(a,h=!0){for(const d of Object.keys(this.activeTabs)){const f=a===d;this.activeTabs[d]=(!this.activeTabs[d]||!h)&&f}}showHideAllDetails(){if(this.openAllLayersProperties){this.openAllLayersProperties=!1;for(const a of Object.keys(this.activeTabs))this.activeTabs[a]=!1}else this.openAllLayersProperties=!0,this.group.legendImg?this.switchTab("legend",!1):this.group.description?this.switchTab("description",!1):this.group.action&&this.switchTab("settings",!1)}isFirst(a){return this.layersSvc.isGroupFirst(a,this.layerGroups,a.filtertype)}isLast(a){return this.layersSvc.isGroupLast(a,this.layerGroups,a.filtertype)}drop(a){const h=this.group.layers,d=h.length,f=a.container.data;let g,y;if(d===f.length)g=d-a.previousIndex-1,y=d-a.currentIndex-1;else{const v=f[a.currentIndex],_=h.findIndex(b=>b.id===a.item.data.id);let S=h.findIndex(b=>b.id===v.id);a.previousIndex===a.currentIndex&&(S=_),g=_,y=S}aee(this.group.layers,g,y),this.layersSvc.updateLayerGroup(this.group)}}return c.\u0275fac=function(a){return new(a||c)},c.\u0275cmp=Be({type:c,selectors:[["ukis-layerentry-group"]],hostVars:4,hostBindings:function(a,h){2&a&&(Yo(h.cssClass),st("group-visible",h.visible))},inputs:{layersSvc:"layersSvc",mapState:"mapState",group:"group",layerGroups:"layerGroups"},ngContentSelectors:W9e,decls:10,vars:7,consts:[[1,"layergroup"],[1,"head"],[1,"iconButton",3,"title","click"],[1,"item-title-replacement","title",3,"title","click"],["ref",""],["class","title",3,"title","click",4,"ngIf"],[4,"ngIf"],["class","body",4,"ngIf"],[1,"title",3,"title","click"],["shape","arrow","title","up",1,"iconButton","move-item",3,"ngClass","click"],["shape","arrow","title","down","dir","down",1,"iconButton","move-item",3,"ngClass","click"],[1,"hide",3,"type","checked","name","id","change"],[3,"for"],[1,"iconButton",3,"ngClass","title"],[1,"body"],[1,"tools"],["shape","cog","class","iconButton",3,"ngClass","title","click",4,"ngIf"],["shape","image","class","iconButton",3,"title","ngClass","click",4,"ngIf"],["shape","info-standard","class","iconButton",3,"ngClass","title","click",4,"ngIf"],["shape","details",1,"iconButton",3,"ngClass","title","click"],["class","iconButton",3,"title","click",4,"ngFor","ngForOf"],["shape","zoom-in","class","iconButton","title","Zoom to group",3,"click",4,"ngIf"],["shape","trash","class","iconButton","title","Remove group",3,"click",4,"ngIf"],["class","tabsbody",4,"ngIf"],["cdkDropList","",3,"cdkDropListData","cdkDropListDropped"],[4,"ngFor","ngForOf"],["shape","cog",1,"iconButton",3,"ngClass","title","click"],["shape","image",1,"iconButton",3,"title","ngClass","click"],["shape","info-standard",1,"iconButton",3,"ngClass","title","click"],["shape","zoom-in","title","Zoom to group",1,"iconButton",3,"click"],["shape","trash","title","Remove group",1,"iconButton",3,"click"],[1,"tabsbody"],[4,"ngIf","ngIfElse"],["descriptionText",""],[3,"dynamicComponent","dynamicComponentChange"],[3,"innerHTML"],["imageUrl",""],["target","_blank","title","Show full Image",3,"href"],[3,"src"],["cdkDragLockAxis","y","cdkDrag","",1,"sublayers",3,"cdkDragData"],[3,"expanded","layersSvc","mapState","layer","group","update"],["cdkDragHandle","",1,"move-item"]],template:function(a,h){if(1&a&&(Et(),U(0,"div",0)(1,"div",1)(2,"clr-icon",2),Me("click",function(){return h.showProperties()}),H(),U(3,"div",3,4),Me("click",function(){return h.showProperties()}),ke(5),H(),le(6,x9e,2,2,"span",5),le(7,E9e,3,6,"span",6),le(8,M9e,4,10,"span",6),H(),le(9,j9e,19,25,"div",7),H()),2&a){const d=Ki(4);B(2),Eo("title",h.group.expanded?"Close":"Open"),Ne("shape",h.group.expanded?"folder-open":"folder"),B(1),G("title",h.getLayerName(h.group)),B(3),G("ngIf",0==d.children.length),B(1),G("ngIf",h.layerGroups.length>1),B(1),G("ngIf",!h.checkBaselayer(h.group)),B(1),G("ngIf",h.group.expanded)}},dependencies:[$s,vi,vn,fa,es,mee,yee,gee,_ee,S3,bee,b3],styles:[".title[_ngcontent-%COMP%]{cursor:pointer}.item-title-replacement[_ngcontent-%COMP%]:empty{display:none}.cdk-drag-preview[_ngcontent-%COMP%]{display:flex;align-items:center;padding:0 10px;box-sizing:border-box;border-radius:2px;box-shadow:0 5px 5px -3px #0003,0 8px 10px 1px #00000024,0 3px 14px 2px #0000001f;overflow:hidden}.cdk-drag-placeholder[_ngcontent-%COMP%]{opacity:.2}.cdk-drag-animating[_ngcontent-%COMP%]{transition:transform .25s cubic-bezier(0,0,.2,1)}.example-box[_ngcontent-%COMP%]:last-child{border:none}.cdk-drop-list-dragging[_ngcontent-%COMP%]   .sublayers[_ngcontent-%COMP%]:not(.cdk-drag-placeholder){transition:transform .25s cubic-bezier(0,0,.2,1)}.info[_ngcontent-%COMP%]{padding-left:.2rem}.tabsbody[_ngcontent-%COMP%]{overflow:hidden;word-break:break-all}.tabsbody[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:auto;max-width:100%}"]}),c})();function X9e(c,l){if(1&c&&(U(0,"ukis-layerentry-group",5)(1,"span",6),ye(2),H()()),2&c){const a=de().$implicit,h=de();G("layersSvc",h.layersSvc)("mapState",h.mapStateSvc)("group",a)("layerGroups",h.layergroups),B(2),mi(" ",a.displayName||a.name," ")}}function q9e(c,l){if(1&c&&(U(0,"ukis-layerentry",7)(1,"span",6),ye(2),H()()),2&c){const a=de().$implicit,h=de();G("layerGroups",h.layergroups)("expanded",!1)("layersSvc",h.layersSvc)("mapState",h.mapStateSvc)("layer",a)("group",null),B(2),mi(" ",a.displayName||a.name," ")}}const $9e=function(c){return{id:c}};function Y9e(c,l){if(1&c&&(er(0),U(1,"div",2),le(2,X9e,3,5,"ukis-layerentry-group",3),le(3,q9e,3,7,"ukis-layerentry",4),H(),tr()),2&c){const a=l.$implicit,h=de();B(1),G("cdkDragData",gi(3,$9e,a.id)),B(1),G("ngIf",h.isLayerGroup(a)&&a.filtertype===h.layerfilter),B(1),G("ngIf",!h.isLayerGroup(a)&&a.filtertype===h.layerfilter)}}let Kh=(()=>{class c{constructor(){this.layerfilter="Layers",this.layergroups=[]}ngOnInit(){this.layerGroupsSubscription=this.layersSvc.getLayerGroups().subscribe(a=>{this.layergroups=a})}isLayerGroup(a){return a instanceof Oi}ngOnDestroy(){this.layerGroupsSubscription.unsubscribe()}drop(a){const h=this.layergroups,d=h.length,f=a.container.data;let g,y;if(d===f.length)g=d-a.previousIndex-1,y=d-a.currentIndex-1;else{const v=f[a.currentIndex],_=h.findIndex(b=>b.id===a.item.data.id);let S=h.findIndex(b=>b.id===v.id);a.previousIndex===a.currentIndex&&(S=_),g=_,y=S}this.layersSvc.arrayMove(this.layergroups,g,y),this.layersSvc.setLayerGroups(this.layergroups)}checkBaselayer(a,h){return!!("Baselayers"===a.filtertype||h&&"Baselayers"===h.filtertype)}checkClassHide(a){return!a?.cssClass?.includes("hide")}}return c.\u0275fac=function(a){return new(a||c)},c.\u0275cmp=Be({type:c,selectors:[["ukis-layer-control"]],inputs:{layersSvc:"layersSvc",mapStateSvc:"mapStateSvc",layerfilter:"layerfilter"},decls:6,vars:12,consts:[["cdkDropList","",3,"cdkDropListData","cdkDropListDropped"],[4,"ngFor","ngForOf"],["cdkDragLockAxis","y","cdkDrag","",1,"list-item",3,"cdkDragData"],[3,"layersSvc","mapState","group","layerGroups",4,"ngIf"],[3,"layerGroups","expanded","layersSvc","mapState","layer","group",4,"ngIf"],[3,"layersSvc","mapState","group","layerGroups"],["cdkDragHandle","",1,"move-item"],[3,"layerGroups","expanded","layersSvc","mapState","layer","group"]],template:function(a,h){1&a&&(U(0,"div",0),Me("cdkDropListDropped",function(f){return h.drop(f)}),rs(1,"reverse"),rs(2,"itemsfilter"),le(3,Y9e,4,5,"ng-container",1),rs(4,"reverse"),rs(5,"itemsfilter"),H()),2&a&&(G("cdkDropListData",oo(1,2,k0(2,4,h.layergroups,h.checkClassHide))),B(3),G("ngForOf",oo(4,7,k0(5,9,h.layergroups,h.checkClassHide))))},dependencies:[vi,vn,mee,yee,gee,S3,wee,bee,b3],styles:[".list-item[_ngcontent-%COMP%]{cursor:pointer}.move-item[_ngcontent-%COMP%]{cursor:move}.cdk-drag-preview[_ngcontent-%COMP%]{display:flex;align-items:center;padding:15px 10px;box-sizing:border-box;border-radius:2px;box-shadow:0 5px 5px -3px #0003,0 8px 10px 1px #00000024,0 3px 14px 2px #0000001f;overflow:hidden}.cdk-drag-placeholder[_ngcontent-%COMP%]{opacity:.2}.cdk-drag-animating[_ngcontent-%COMP%]{transition:transform .25s cubic-bezier(0,0,.2,1)}.example-box[_ngcontent-%COMP%]:last-child{border:none}.cdk-drop-list-dragging[_ngcontent-%COMP%]   .list-item[_ngcontent-%COMP%]:not(.cdk-drag-placeholder){transition:transform .25s cubic-bezier(0,0,.2,1)}"]}),c})();function Z9e(c,l){if(1&c&&xe(0,"ukis-layerentry-group",4),2&c){const a=de().$implicit,h=de();G("layersSvc",h.layersSvc)("mapState",h.mapStateSvc)("group",a)("layerGroups",h.layergroups)}}function K9e(c,l){if(1&c&&xe(0,"ukis-layerentry",5),2&c){const a=de().$implicit,h=de();G("layerGroups",h.layergroups)("expanded",!1)("layersSvc",h.layersSvc)("mapState",h.mapStateSvc)("layer",a)("group",null)}}function Q9e(c,l){if(1&c&&(U(0,"div",1),le(1,Z9e,1,4,"ukis-layerentry-group",2),le(2,K9e,1,6,"ukis-layerentry",3),H()),2&c){const a=l.$implicit,h=de();B(1),G("ngIf",h.isLayerGroup(a)),B(1),G("ngIf",!h.isLayerGroup(a))}}let iD=(()=>{class c{constructor(){this.layergroups=[]}ngOnInit(){this.layerGroupsSubscription=this.layersSvc.getLayerGroups().subscribe(a=>{this.layergroups=a.filter(h=>"Baselayers"===h.filtertype)})}isLayerGroup(a){return a instanceof Oi}ngOnDestroy(){this.layerGroupsSubscription.unsubscribe()}}return c.\u0275fac=function(a){return new(a||c)},c.\u0275cmp=Be({type:c,selectors:[["ukis-base-layer-control"]],inputs:{layersSvc:"layersSvc",mapStateSvc:"mapStateSvc"},decls:2,vars:3,consts:[["class","list-item",4,"ngFor","ngForOf"],[1,"list-item"],[3,"layersSvc","mapState","group","layerGroups",4,"ngIf"],[3,"layerGroups","expanded","layersSvc","mapState","layer","group",4,"ngIf"],[3,"layersSvc","mapState","group","layerGroups"],[3,"layerGroups","expanded","layersSvc","mapState","layer","group"]],template:function(a,h){1&a&&(le(0,Q9e,3,2,"div",0),rs(1,"reverse")),2&a&&G("ngForOf",oo(1,1,h.layergroups))},dependencies:[vi,vn,S3,wee,b3]}),c})(),J9e=(()=>{class c{constructor(a,h,d,f){this.layersSvc=a,this.mapStateSvc=h,this.mapSvc=d,this.wmsSvc=f,this.class="content-container",this.controls={attribution:!0,scaleLine:!0}}ngOnInit(){this.mapSvc.map.addControl(new hq),this.addBaseLayers(),this.addLayers(),this.addOverlays(),this.setExtent()}setExtent(){this.mapStateSvc.setExtent([-14,33,40,57])}parseCapabilities(){this.wmsSvc.getCapabilities("https://geoservice.dlr.de/eoc/land/wms").subscribe(a=>{const h=this.wmsSvc.getLayerFromCapabilities("AGRODE_S2_EVI_P1M",a);console.log(h)})}addBaseLayers(){const a=new is({name:"Transparenter Hintergrund",id:"blank",type:"geojson"}),h=new xve({tileSize:512}),d=new kH,f=new PC({id:"eocLiteAndOverlay",name:"EOC Lite with Overlay",description:"merged/stacked Layers EOC Lite with Overlay",legendImg:h.legendImg,layers:[h,d],visible:!0}),m=new Ca({type:"wmts",url:"https://tiles.geoservice.dlr.de/service/wmts",name:"Relief",id:"world_relief_bw",params:{layer:"eoc:world_relief_bw",style:"_empty",matrixSetOptions:{matrixSet:"EPSG:3857",tileMatrixPrefix:"EPSG:3857"}},visible:!1,description:{component:OK,inputs:{description:"eoc:world_relief_bw as web map tile service"}},attribution:'Relief: <a src="https://www.dlr.de/eoc">DLR/EOC</>',legendImg:""});[f,new vy({id:"OSM_Base"}),a,m].map(v=>this.layersSvc.addLayer(v,"Baselayers"))}addLayers(){const a=new Ko({type:"wms",url:"https://geoservice.dlr.de/eoc/land/wms",name:"GUF Mosaic",id:"GUF28_DLR_v1_Mosaic",params:{LAYERS:"GUF28_DLR_v1_Mosaic",STYLES:"guf_8bit"},tileSize:512,visible:!1,description:"GUF28_DLR_v1_Mosaic",attribution:' | GUF\xae: <a href="https://www.dlr.de/eoc/en/desktopdefault.aspx/tabid-9628/16557_read-40454/">DLR License</a>',legendImg:"",popup:{asyncPopup:(M,L)=>{!function TLe(c,l,a){const h=c.source,d=c.evt,f=l.map.getView().getResolution(),m=h.getFeatureInfoUrl(d.coordinate,f,l.EPSG,{INFO_FORMAT:"application/json"});fetch(m).then(g=>g.json()).catch(g=>{console.log(g)}).then(g=>{if(g.features.length){const y=l.createPopupHtml(g.features[0].properties);a(y)}else a("<p>No Data!</p>")})}(M,this.mapSvc,L)}}}),h=new Ca({type:"wmts",url:"https://tiles.geoservice.dlr.de/service/wmts",name:"TDM90 DEM",id:"TDM90_DEM",params:{layer:"TDM90_DEM",style:"default",matrixSetOptions:{matrixSet:"EPSG:3857",tileMatrixPrefix:"EPSG:3857"},format:"image/png"},visible:!1,description:"TDM90_DEM maxZoom: 8",attribution:' | TDM90 Data \xa9: <a href="http://www.dlr.de" target="_blank">DLR</a>  licensed for <a rel="license" target="_blank" href="https://geoservice.dlr.de/resources/licenses/tdm90/License_for_the_Utilization_of_90m_DEM_for_Scientific_Use.pdf">scientific use</a>',legendImg:"https://tiles.geoservice.dlr.de/service/wmts?layer=TDM90_DEM&style=default&tilematrixset=EPSG%3A3857&Service=WMTS&Request=GetTile&Version=1.0.0&Format=image%2Fpng&TileMatrix=EPSG%3A3857%3A4&TileCol=8&TileRow=5",cssClass:"custom-layer"}),d=new is({id:"geojson_test",name:"GeoJSON Vector Layer",attribution:"\xa9 DLR GeoJSON",type:"geojson",data:{type:"FeatureCollection",features:[{type:"Feature",properties:{title:"Polygon"},geometry:{type:"Polygon",coordinates:[[[11.53564453125,48.80686346108517],[11.42578125,48.61838518688487],[11.97509765625,48.516604348867475],[12.2607421875,48.69096039092549],[12.0849609375,48.99463598353405],[11.53564453125,48.80686346108517]]]}},{type:"Feature",properties:{title:"Rectangle"},geometry:{type:"Polygon",coordinates:[[[10.986328125,43.89789239125797],[11.755371093749998,43.89789239125797],[11.755371093749998,44.41808794374846],[10.986328125,44.41808794374846],[10.986328125,43.89789239125797]]]}},{type:"Feature",properties:{title:"Line"},geometry:{type:"LineString",coordinates:[[13.29345703125,48.268569112964336],[15.073242187499998,47.56170075451973],[14.1064453125,46.40756396630067],[15.886230468750002,44.94924926661153]]}},{type:"Feature",properties:{title:"Point"},geometry:{type:"Point",coordinates:[11.513671874999998,46.42271253466717]}}]},visible:!1,popup:{event:"move",dynamicPopup:{component:Sk,getAttributes:M=>({data:M.properties})}}}),f=new is({id:"geojson_test_3",name:"GeoJSON Point Layer",type:"geojson",data:{type:"FeatureCollection",features:[{type:"Feature",properties:{title:"Munich",type:"City",image:"https://en.wikipedia.org/wiki/Munich#/media/File:Stadtbild_M%C3%BCnchen.jpg",wiki:"https://en.wikipedia.org/wiki/Munich"},geometry:{type:"Point",coordinates:[11.557617187499998,48.151428143221224]}}]},visible:!1,popup:{properties:{title:"Title",type:"Type"}}}),m=new is({id:"geojson_test_2",name:"Vector Layer in Group",type:"geojson",data:{type:"FeatureCollection",features:[{type:"Feature",properties:{type:"Polygon",name:"Vector Layer in Group",data:"geojson"},geometry:{type:"Polygon",coordinates:[[[-4.9658203125,41.09591205639546],[-6.459960937499999,39.52099229357195],[-5.009765625,38.42777351132902],[-1.8896484375,38.77121637244273],[-.68115234375,40.84706035607122],[-2.900390625,41.65649719441145],[-4.9658203125,41.09591205639546]]]}}]},visible:!1,cssClass:"hide",popup:["type","name"],actions:[{title:"download",icon:"download-cloud",action:M=>{console.log(M)}}]}),g=new is({id:"geojson_test_cluster",name:"Cluster - GeoJSON Vector Layer",type:"geojson",cluster:{distance:20},data:hGe,visible:!0,actions:[{title:"update Layer",icon:"sync",action:M=>{M.cluster.distance=25,M.options||(M.options={}),M.options.style=L=>{const P=L.get("features").length;return new ui({image:new Ny({radius:P<=1?6:10,stroke:new ws({color:"#fff"}),fill:new Si({color:P<=1?"green":"red"})})})},this.layersSvc.updateLayer(M)}}],popup:{popupFunction:M=>`<div>${JSON.stringify(M)} </div>`}}),y=new is({id:"WfsLayer",name:"WFS Pennsylvania",type:"wfs",visible:!1,url:"https://ahocevar.com/geoserver/wfs?service=WFS&request=GetFeature&outputFormat=application/json&version=1.1.0&srsname=EPSG:3857&typenames=usa:states&cql_filter=STATE_NAME='Pennsylvania'",bbox:[-83.1005859375,38.37611542403604,-72.50976562499999,43.03677585761058],popup:{dynamicPopup:{component:Sk,getAttributes:M=>({data:M})}}}),v=new Eve;v.cssClass="hide";const _=new kH,S=new LL;S.legendImg="https://tiles.geoservice.dlr.de/service/wmts?layer=eoc%3Aliteoverlay&style=_empty&tilematrixset=EPSG%3A3857&Service=WMTS&Request=GetTile&Version=1.0.0&Format=image%2Fpng&TileMatrix=EPSG%3A3857%3A4&TileCol=8&TileRow=5";const b=new vy,T=new Oi({id:"group_1",name:"Test Group",layers:[b,v,_],description:"this is a group with OsmLayer, eocBasemap, eocBaseoverlay",expanded:!0,actions:[{title:"download",icon:"download-cloud",action:M=>{console.log(M)}}]}),x=new Oi({id:"group_2",name:"Test Group 2",description:{component:OK,inputs:{description:"A LayerGroup with a hidden vectorLayer2."}},legendImg:{component:dGe},cssClass:"custom-layer-group",layers:[h,m,S]}),E=new Oi({id:"group_3",name:"Test Group Vector-Data",expanded:!1,layers:[d,f,y]});[a,new Mve({popup:{popupFunction:M=>`\n            <table>\n              <tbody>\n                <tr>\n                  <td style="vertical-align: top; padding-right: 7px;"><b>Name: ${M.name}</b></td>\n                  <td></td>\n                </tr>\n                <tr>\n                  <td style="vertical-align: top; padding-right: 7px;"><b>type: ${M.type}</b></td>\n                  <td></td>\n                </tr>\n              </tbody>\n            </table>\n            <img src="${M.legendImg}">\n            `}}),E,x,T,g].map(M=>{M instanceof Ys?this.layersSvc.addLayer(M,"Layers"):M instanceof Oi&&this.layersSvc.addLayerGroup(M)})}addOverlays(){const a=new VH({crossOrigin:"anonymous"}),h=new Cve({crossOrigin:"anonymous"});this.layersSvc.addLayer(a,"Overlays"),this.layersSvc.addLayer(h,"Overlays");const d=new VH({id:"merge_BlueMarble"}),f=new LL({id:"merge_Liteoverlay"}),m=new PC({id:"BlueMarbleTile_Overlay",name:"BlueMarble with Overlay",visible:!1,legendImg:d.legendImg,description:"merged/stacked Layers BlueMarble with Overlay",layers:[d,f]});this.layersSvc.addLayer(m,"Overlays")}updateLayerGroup(){const a=this.layersSvc.getLayerOrGroupById("group_1");a.expanded=!0,a.layers[1].cssClass=null,this.layersSvc.updateLayerGroup(a);const h=this.layersSvc.getLayerOrGroupById("group_2");h.layers[1].visible=!0,this.layersSvc.updateLayerGroup(h)}addLayerToGroup(){const a=this.layersSvc.getLayerOrGroupById("group_2"),h=new BH;this.layersSvc.addLayerToGroup(h,a)}removeAllLayers(){this.layersSvc.removeLayers()}}return c.\u0275fac=function(a){return new(a||c)(N(Vs),N(Zs),N(Cs),N(rQ))},c.\u0275cmp=Be({type:c,selectors:[["app-route-map"]],hostVars:2,hostBindings:function(a,h){2&a&&Yo(h.class)},features:[Mt([Vs,Zs,Cs])],decls:32,vars:16,consts:[[1,"content-area"],["id","olMap",3,"layersSvc","mapState","controls"],[1,"right",3,"clrVerticalNavCollapsible","clr-nav-level"],[1,"layers",3,"clrVerticalNavGroupExpanded"],["shape","world","title","Overlays","clrVerticalNavIcon",""],[1,"padding","title-ellipsis"],[3,"layersSvc","mapStateSvc","layerfilter"],["shape","layers","clrVerticalNavIcon","","title","layers"],[3,"layersSvc","mapStateSvc"],["shape","world","title","Baselayers","clrVerticalNavIcon",""],["shape","cog","title","Actions","clrVerticalNavIcon",""],[1,"btn","btn-primary",3,"click"]],template:function(a,h){1&a&&(U(0,"main",0),xe(1,"ukis-map-ol",1),H(),U(2,"clr-vertical-nav",2)(3,"clr-vertical-nav-group",3),xe(4,"clr-icon",4),ye(5," Overlays "),U(6,"clr-vertical-nav-group-children",5),xe(7,"ukis-layer-control",6),H()(),U(8,"clr-vertical-nav-group",3),xe(9,"clr-icon",7),ye(10," Layers "),U(11,"clr-vertical-nav-group-children",5),xe(12,"ukis-layer-control",8),H()(),U(13,"clr-vertical-nav-group",3),xe(14,"clr-icon",9),ye(15," Baselayers "),U(16,"clr-vertical-nav-group-children",5),xe(17,"ukis-base-layer-control",8),H()(),U(18,"clr-vertical-nav-group",3),xe(19,"clr-icon",10),ye(20," Actions "),U(21,"clr-vertical-nav-group-children",5)(22,"button",11),Me("click",function(){return h.updateLayerGroup()}),ye(23,"update LayerGroup"),H(),U(24,"button",11),Me("click",function(){return h.addLayerToGroup()}),ye(25,"add Layer to LayerGroup"),H(),U(26,"button",11),Me("click",function(){return h.removeAllLayers()}),ye(27,"remove All Layers"),H(),U(28,"button",11),Me("click",function(){return h.setExtent()}),ye(29,"set Extent"),H(),U(30,"button",11),Me("click",function(){return h.parseCapabilities()}),ye(31,"Parse WMS capabilities"),H()()()()),2&a&&(B(1),G("layersSvc",h.layersSvc)("mapState",h.mapStateSvc)("controls",h.controls),B(1),G("clrVerticalNavCollapsible",!0)("clr-nav-level",2),B(1),G("clrVerticalNavGroupExpanded",!0),B(4),G("layersSvc",h.layersSvc)("mapStateSvc",h.mapStateSvc)("layerfilter","Overlays"),B(1),G("clrVerticalNavGroupExpanded",!0),B(4),G("layersSvc",h.layersSvc)("mapStateSvc",h.mapStateSvc),B(1),G("clrVerticalNavGroupExpanded",!0),B(4),G("layersSvc",h.layersSvc)("mapStateSvc",h.mapStateSvc),B(1),G("clrVerticalNavGroupExpanded",!0))},dependencies:[fa,Bc,Bu,Uu,Gu,zu,Oh,Kh,iD],styles:["[_nghost-%COMP%]     .custom-layer-group .head>.title{color:#660f00}[_nghost-%COMP%]     .custom-layer .head>.title{color:#b87d00}[_nghost-%COMP%]     .zoom-number{bottom:2.5em;left:8px}"]}),c})(),e7e=(()=>{class c{constructor(){this.inputStep=.01,this.precision=2}ngOnInit(){this.subscription=this.mapState.getMapState().subscribe(a=>{this.mapstate=a})}ngOnDestroy(){this.subscription.unsubscribe()}zoomIn(){this.mapstate.zoom++,this.setNewState(this.mapstate)}zoomOut(){this.mapstate.zoom--,this.setNewState(this.mapstate)}setNewState(a){a.options.notifier="user",this.mapState.setMapState(a)}stateChange(a){this.setNewState(this.mapstate)}setInputStep(a){const h=Array.from(Array(a),(d,f)=>"0").join("");this.inputStep=1/Number(`1${h}`)}toPrecision(a,h){return a.toFixed(h)}}return c.\u0275fac=function(a){return new(a||c)},c.\u0275cmp=Be({type:c,selectors:[["ukis-map-navigator"]],inputs:{mapState:"mapState"},decls:22,vars:7,consts:[[1,"clr-row"],[1,"clr-col-9"],[1,"output-container"],["clrForm",""],["clrInput","","type","number","name","lon",3,"ngModel","step","ngModelChange"],["clrInput","","type","number","name","lat",3,"ngModel","step","ngModelChange"],["clrInput","","type","number","name","zoom",3,"ngModel","step","ngModelChange"],[1,"clr-col-3"],[1,"input-container"],["type","number","min","0","max","8","step","1","name","precision","clrInput","",3,"ngModel","ngModelChange"]],template:function(a,h){1&a&&(U(0,"div",0)(1,"div",1)(2,"div",2)(3,"form",3)(4,"clr-input-container")(5,"label"),ye(6,"Lon"),H(),U(7,"input",4),Me("ngModelChange",function(f){return h.mapstate.center.lon=f})("ngModelChange",function(f){return h.stateChange(f)}),H()(),U(8,"clr-input-container")(9,"label"),ye(10,"Lat"),H(),U(11,"input",5),Me("ngModelChange",function(f){return h.mapstate.center.lat=f})("ngModelChange",function(f){return h.stateChange(f)}),H()(),U(12,"clr-input-container")(13,"label"),ye(14,"Zoom"),H(),U(15,"input",6),Me("ngModelChange",function(f){return h.mapstate.zoom=f})("ngModelChange",function(f){return h.stateChange(f)}),H()()()()(),U(16,"div",7)(17,"div",8)(18,"clr-input-container")(19,"label"),ye(20,"Precision "),H(),U(21,"input",9),Me("ngModelChange",function(f){return h.precision=f})("ngModelChange",function(f){return h.setInputStep(f)}),H()()()()()),2&a&&(B(7),G("ngModel",h.mapstate.center.lon)("step",h.inputStep),B(4),G("ngModel",h.mapstate.center.lat)("step",h.inputStep),B(4),G("ngModel",h.mapstate.zoom)("step",h.inputStep),B(6),G("ngModel",h.precision))},dependencies:[WE,Gl,Ob,Pa,kE,KE,ZE,sl,Lb,es,TF,uM,tT],styles:[".output-container[_ngcontent-%COMP%]   .clr-form-control[_ngcontent-%COMP%]:first-child{margin-top:0rem}.output-container[_ngcontent-%COMP%]   .clr-input[_ngcontent-%COMP%]{width:90%}"]}),c})();function t7e(c,l){if(1&c&&(U(0,"option",9),ye(1),H()),2&c){const a=l.$implicit;G("value",a.value),B(1),Zt(a.title)}}let Cee=(()=>{class c{constructor(a){this.mapSvc=a,this.mapCoordinates=[0,0],this.zoom=0,this.precision=2,this.x="Lon",this.y="Lat",this.mapMoveSubscription=h=>{h.coordinate&&(this.mapCoordinates=Ka(h.coordinate,this.mapProjection,cn(this.selectedProjection)))},this.mapOnMoveend=h=>{const d=h.map.getView().getZoom();this.zoom!==d&&(this.zoom=d)},this.mapSub=this.mapSvc.projectionChange.subscribe(h=>{this.mapProjection=h,this.setProjection(h)})}ngOnInit(){this.mapSvc.map.on("pointermove",this.mapMoveSubscription),this.mapSvc.map.on("moveend",this.mapOnMoveend)}setProjection(a){const h=a.getCode();this.projections="EPSG:4326"===h?[{title:h,value:h}]:[{title:"EPSG:4326",value:"EPSG:4326"},{title:h,value:h}],this.selectedProjection=this.projections[0].value}ngOnDestroy(){this.mapSvc.map.un("pointermove",this.mapMoveSubscription),this.mapSvc.map.un("moveend",this.mapOnMoveend),this.mapSub.unsubscribe()}onChangeProj(a){const h=a.target.value;"EPSG:4326"===h?(this.x="Lon",this.y="Lat"):(this.x="X",this.y="Y");const d=this.selectedProjection;this.selectedProjection=h,this.mapCoordinates=Ka(this.mapCoordinates,cn(d),cn(this.selectedProjection))}toPrecision(a,h){return a.toFixed(h)}}return c.\u0275fac=function(a){return new(a||c)(N(Cs))},c.\u0275cmp=Be({type:c,selectors:[["ukis-mouse-position"]],decls:27,vars:7,consts:[[1,"mouse-position-control"],[1,"clr-row"],[1,"clr-col-7"],[1,"output-container"],[1,"clr-col-5"],[1,"input-container"],["clrSelect","",3,"change"],[3,"value",4,"ngFor","ngForOf"],["type","number","min","0","max","12","name","precision","clrInput","",3,"ngModel","ngModelChange"],[3,"value"]],template:function(a,h){1&a&&(U(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div")(5,"b"),ye(6),H(),ye(7),H(),U(8,"div")(9,"b"),ye(10),H(),ye(11),H(),U(12,"div")(13,"b"),ye(14,"Zoom"),H(),ye(15),H()()(),U(16,"div",4)(17,"div",5)(18,"clr-select-container")(19,"label"),ye(20,"Projection "),H(),U(21,"select",6),Me("change",function(f){return h.onChangeProj(f)}),le(22,t7e,2,2,"option",7),H()(),U(23,"clr-input-container")(24,"label"),ye(25,"Precision "),H(),U(26,"input",8),Me("ngModelChange",function(f){return h.precision=f}),H()()()()()()),2&a&&(B(6),Zt(h.x),B(1),mi(" ",h.toPrecision(h.mapCoordinates[0],h.precision),""),B(3),Zt(h.y),B(1),mi(" ",h.toPrecision(h.mapCoordinates[1],h.precision),""),B(4),mi(" ",h.toPrecision(h.zoom,h.precision),""),B(7),G("ngForOf",h.projections),B(4),G("ngModel",h.precision))},dependencies:[vi,$E,YE,Gl,Ob,Pa,KE,ZE,sl,es,uM,tT,bZ,SZ],styles:[".mouse-position-control[_ngcontent-%COMP%]{margin-left:.2rem;padding-bottom:.4rem}.mouse-position-control[_ngcontent-%COMP%]   .output-container[_ngcontent-%COMP%]{line-height:1.6rem}.mouse-position-control[_ngcontent-%COMP%]   .input-container[_ngcontent-%COMP%]   .clr-form-control[_ngcontent-%COMP%]:first-child{margin-top:0rem}"]}),c})();const n7e=function(c){return{"is-solid":c}};function r7e(c,l){if(1&c){const a=Xt();U(0,"div",2),Me("click",function(){const f=vt(a).$implicit;return _t(de(2).setNewProjection(f))}),U(1,"div",3)(2,"div",4)(3,"span",5),Me("click",function(){const f=vt(a).$implicit;return _t(de(2).setNewProjection(f))}),ye(4),H(),xe(5,"clr-icon",6),H()()()}if(2&c){const a=l.$implicit,h=de(2);B(3),G("title",a.title),B(1),mi(" ",a.title||a.code," "),B(1),Eo("title",a.code),G("ngClass",gi(5,n7e,a===h.selectedProj)),Ne("shape",a===h.selectedProj?"eye":"eye-hide")}}function i7e(c,l){if(1&c&&(U(0,"div"),le(1,r7e,6,7,"div",1),H()),2&c){const a=de();B(1),G("ngForOf",a.projList)}}let s7e=(()=>{class c{constructor(){}ngOnInit(){this.projList[0]&&this.setNewProjection(this.projList[0])}setNewProjection(a){this.mapSvc.registerProjection(a);const h=this.mapSvc.getOlProjection(a);this.mapSvc.setProjection(h),this.selectedProj=a}}return c.\u0275fac=function(a){return new(a||c)},c.\u0275cmp=Be({type:c,selectors:[["ukis-projection-switch"]],inputs:{mapSvc:"mapSvc",projList:["projectionList","projList"]},decls:1,vars:1,consts:[[4,"ngIf"],[3,"click",4,"ngFor","ngForOf"],[3,"click"],[1,"layergroup"],[1,"head"],[1,"title",3,"title","click"],[1,"iconButton",3,"ngClass","title"]],template:function(a,h){1&a&&le(0,i7e,2,1,"div",0),2&a&&G("ngIf",h.projList)},dependencies:[$s,vi,vn,fa],encapsulation:2}),c})(),o7e=(()=>{class c{constructor(a,h,d){this.layersSvc=a,this.mapStateSvc=h,this.mapSvc=d,this.class="content-container",this.controls={attribution:!0,scaleLine:!0},this.projections=[{code:"EPSG:3857",proj4js:"+proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +wktext  +no_defs",title:"Spherical Mercator",extent:[-20026376.39,-20048966.1,20026376.39,20048966.1],worldExtent:[-180,-85.06,180,85.06],global:!0,units:"m"},{code:"EPSG:3995",proj4js:"+proj=stere +lat_0=90 +lat_ts=71 +lon_0=0 +k=1 +x_0=0 +y_0=0 +datum=WGS84 +units=m +no_defs",title:"Arctic Polar Stereographic",extent:[-20048966.1,-20048966.1,20048966.1,20048966.1],worldExtent:[-180,60,180,90],global:!1,units:"m"},{code:"EPSG:3031",proj4js:"+proj=stere +lat_0=-90 +lat_ts=-71 +lon_0=0 +k=1 +x_0=0 +y_0=0 +datum=WGS84 +units=m +no_defs",title:"Antarctic Polar Stereographic",extent:[-20048966.1,-20048966.1,20048966.1,20048966.1],worldExtent:[-180,-90,180,-60],global:!1,units:"m"}],this.addOverlays(),this.mapStateSvc.setExtent([-14,33,40,57])}ngOnInit(){}addOverlays(){[new vy({removable:!0,legendImg:null,visible:!0,id:"osm"}),new Ko({type:"wms",url:"https://geoservice.dlr.de/eoc/land/wms",name:"GUF Mosaic",id:"GUF28_DLR_v1_Mosaic",params:{layers:"GUF28_DLR_v1_Mosaic",styles:"guf_8bit"},visible:!1,description:"GUF28_DLR_v1_Mosaic",attribution:' | GUF\xae: <a href="https://www.dlr.de/eoc/en/desktopdefault.aspx/tabid-9628/16557_read-40454/">DLR License</a>',legendImg:""}),new is({id:"geojson_test",name:"GeoJSON Vector Layer",type:"geojson",data:{type:"FeatureCollection",features:[{type:"Feature",properties:{},geometry:{type:"Polygon",coordinates:[[[12.65625,49.61070993807422],[20.698242187499996,46.830133640447386],[22.5,49.781264058178344],[15.161132812500002,51.508742458803326],[12.65625,49.61070993807422]]]}}]},visible:!0})].map(m=>this.layersSvc.addLayer(m,"Layers"))}}return c.\u0275fac=function(a){return new(a||c)(N(Vs),N(Zs),N(Cs))},c.\u0275cmp=Be({type:c,selectors:[["app-route-map2"]],hostVars:2,hostBindings:function(a,h){2&a&&Yo(h.class)},features:[Mt([Vs,Zs,Cs])],decls:23,vars:14,consts:[[1,"content-area"],["id","olMap",3,"layersSvc","mapState","controls"],[1,"right",3,"clrVerticalNavCollapsible","clr-nav-level"],[1,"layers",3,"clrVerticalNavGroupExpanded"],["shape","layers","clrVerticalNavIcon","","title","layers"],[1,"padding","title-ellipsis"],[3,"layersSvc","mapStateSvc"],["title","Projection",1,"layers",3,"clrVerticalNavGroupExpanded"],["shape","map","clrVerticalNavIcon",""],[3,"mapSvc","projectionList"],["title","Coordinates",1,"layers",3,"clrVerticalNavGroupExpanded"],["shape","compass","clrVerticalNavIcon",""],["title","Navigator",1,"layers",3,"clrVerticalNavGroupExpanded"],[3,"mapState"]],template:function(a,h){1&a&&(U(0,"main",0),xe(1,"ukis-map-ol",1),H(),U(2,"clr-vertical-nav",2)(3,"clr-vertical-nav-group",3),xe(4,"clr-icon",4),ye(5," Layers "),U(6,"clr-vertical-nav-group-children",5),xe(7,"ukis-layer-control",6),H()(),U(8,"clr-vertical-nav-group",7),xe(9,"clr-icon",8),ye(10," Projection "),U(11,"clr-vertical-nav-group-children",5),xe(12,"ukis-projection-switch",9),H()(),U(13,"clr-vertical-nav-group",10),xe(14,"clr-icon",11),ye(15," Coordinates "),U(16,"clr-vertical-nav-group-children",5),xe(17,"ukis-mouse-position"),H()(),U(18,"clr-vertical-nav-group",12),xe(19,"clr-icon",11),ye(20," Navigator "),U(21,"clr-vertical-nav-group-children",5),xe(22,"ukis-map-navigator",13),H()()()),2&a&&(B(1),G("layersSvc",h.layersSvc)("mapState",h.mapStateSvc)("controls",h.controls),B(1),G("clrVerticalNavCollapsible",!0)("clr-nav-level",2),B(1),G("clrVerticalNavGroupExpanded",!0),B(4),G("layersSvc",h.layersSvc)("mapStateSvc",h.mapStateSvc),B(1),G("clrVerticalNavGroupExpanded",!0),B(4),G("mapSvc",h.mapSvc)("projectionList",h.projections),B(1),G("clrVerticalNavGroupExpanded",!0),B(5),G("clrVerticalNavGroupExpanded",!0),B(4),G("mapState",h.mapStateSvc))},dependencies:[fa,Bc,Bu,Uu,Gu,zu,Oh,Kh,e7e,Cee,s7e]}),c})();var a7e=function(){var c=function(l,a){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,d){h.__proto__=d}||function(h,d){for(var f in d)Object.prototype.hasOwnProperty.call(d,f)&&(h[f]=d[f])})(l,a)};return function(l,a){if("function"!=typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");function h(){this.constructor=l}c(l,a),l.prototype=null===a?Object.create(a):(h.prototype=a.prototype,new h)}}(),l7e=function(c){function l(a){var h=c.call(this,a)||this;return h.vectorRenderer_=new G2(a),h.layerImageRatio_=a.getImageRatio(),h.coordinateToVectorPixelTransform_=[1,0,0,1,0,0],h.renderedPixelToCoordinateTransform_=null,h}return a7e(l,c),l.prototype.disposeInternal=function(){this.vectorRenderer_.dispose(),c.prototype.disposeInternal.call(this)},l.prototype.getFeatures=function(a){if(!this.vectorRenderer_)return new Promise(function(d){return d([])});var h=ni(this.coordinateToVectorPixelTransform_,ni(this.renderedPixelToCoordinateTransform_,a.slice()));return this.vectorRenderer_.getFeatures(h)},l.prototype.handleFontsChanged=function(){this.vectorRenderer_.handleFontsChanged()},l.prototype.prepareFrame=function(a){var h=a.pixelRatio,d=a.viewState,f=d.resolution,m=a.viewHints,g=this.vectorRenderer_,y=a.extent;1!==this.layerImageRatio_&&GL(y=y.slice(0),this.layerImageRatio_);var v=fr(y)/f,_=Ei(y)/f;if(!m[0]&&!m[1]&&!Cy(y)){g.useContainer(null,null,1);var S=g.context,b=$n({},a,{declutterTree:new A2(9),extent:y,size:[v,_],viewState:$n({},a.viewState,{rotation:0})}),T=!0,x=new BO(y,f,h,S.canvas,function(E){g.prepareFrame(b)&&g.replayGroupChanged&&(g.clipping=!1,g.renderFrame(b,null)&&(g.renderDeclutter(b),T=!1),E())});x.addEventListener("change",function(){if(2===x.getState()){this.image_=T?null:x;var E=x.getResolution(),D=x.getPixelRatio(),I=E*h/D;this.renderedResolution=I,this.coordinateToVectorPixelTransform_=Do(this.coordinateToVectorPixelTransform_,v/2,_/2,1/I,-1/I,0,-d.center[0],-d.center[1])}}.bind(this)),x.load()}return this.image_&&(this.renderedPixelToCoordinateTransform_=a.pixelToCoordinateTransform.slice()),!!this.image_},l.prototype.preRender=function(){},l.prototype.postRender=function(){},l.prototype.renderDeclutter=function(){},l.prototype.forEachFeatureAtCoordinate=function(a,h,d,f,m){return this.vectorRenderer_?this.vectorRenderer_.forEachFeatureAtCoordinate(a,h,d,f,m):c.prototype.forEachFeatureAtCoordinate.call(this,a,h,d,f,m)},l}(A7);const c7e=l7e;var u7e=function(){var c=function(l,a){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,d){h.__proto__=d}||function(h,d){for(var f in d)Object.prototype.hasOwnProperty.call(d,f)&&(h[f]=d[f])})(l,a)};return function(l,a){if("function"!=typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");function h(){this.constructor=l}c(l,a),l.prototype=null===a?Object.create(a):(h.prototype=a.prototype,new h)}}(),h7e=function(c){function l(a){var h=this,d=a||{},f=$n({},d);return delete f.imageRatio,(h=c.call(this,f)||this).imageRatio_=void 0!==d.imageRatio?d.imageRatio:1,h}return u7e(l,c),l.prototype.getImageRatio=function(){return this.imageRatio_},l.prototype.createRenderer=function(){return new c7e(this)},l}($p);const UT=h7e,xee=JSON.parse('{"type":"FeatureCollection","features":[{"type":"Feature","properties":{"title":"Polygon 1"},"geometry":{"type":"Polygon","coordinates":[[[-178.59375,15.961329081596647],[-166.640625,15.961329081596647],[-166.640625,27.994401411046148],[-178.59375,27.994401411046148],[-178.59375,15.961329081596647]]]}},{"type":"Feature","properties":{"title":"Polygon 2"},"geometry":{"type":"Polygon","coordinates":[[[-179.296875,-1.4061088354351594],[-168.75,-1.4061088354351594],[-168.75,10.487811882056695],[-179.296875,10.487811882056695],[-179.296875,-1.4061088354351594]]]}},{"type":"Feature","properties":{"title":"Polygon 3"},"geometry":{"type":"Polygon","coordinates":[[[-158.203125,5.61598581915534],[-146.25,5.61598581915534],[-146.25,22.59372606392931],[-158.203125,22.59372606392931],[-158.203125,5.61598581915534]]]}},{"type":"Feature","properties":{"title":"Polygon 4"},"geometry":{"type":"Polygon","coordinates":[[[-162.0703125,-13.2399454992863],[-150.82031249999997,-13.2399454992863],[-150.82031249999997,-1.0546279422758742],[-162.0703125,-1.0546279422758742],[-162.0703125,-13.2399454992863]]]}},{"type":"Feature","properties":{"title":"Polygon 5"},"geometry":{"type":"Polygon","coordinates":[[[-142.3828125,-20.632784250388013],[-131.1328125,-20.632784250388013],[-131.1328125,-2.108898659243126],[-142.3828125,-2.108898659243126],[-142.3828125,-20.632784250388013]]]}},{"type":"Feature","properties":{"title":"Polygon 6"},"geometry":{"type":"Polygon","coordinates":[[[-106.171875,44.08758502824516],[-100.8984375,39.90973623453719],[-95.625,42.8115217450979],[-101.25,46.800059446787316],[-106.171875,44.08758502824516]]]}}]}');function sD(c,l){return ni(c.inversePixelTransform,l.slice(0))}let T3=(()=>{class c{constructor(){this.alertSource=new Ke,this.alert$=this.alertSource.asObservable()}alert(a){this.alertSource.next(a)}}return c.\u0275fac=function(a){return new(a||c)},c.\u0275prov=Oe({token:c,factory:c.\u0275fac,providedIn:"root"}),c})(),w3=(()=>{class c{constructor(){this.progressSource=new Ke,this.progress$=this.progressSource.asObservable()}progress(a){this.progressSource.next(a)}}return c.\u0275fac=function(a){return new(a||c)},c.\u0275prov=Oe({token:c,factory:c.\u0275fac,providedIn:"root"}),c})(),p7e=(()=>{class c{constructor(a,h,d,f,m,g){this.layersSvc=a,this.mapStateSvc=h,this.mapSvc=d,this.alertSvc=f,this.progressService=m,this.route=g,this.class="content-container",this.subs=[],this.startBbox=null,this.updateLayerOnZoom=y=>{const v=this.mapStateSvc.getMapState().getValue(),b="gridLayer",E=((c,l,a,h,d)=>{const f=[];let m=80;a>1&&(m=40),a>2&&(m=20),a>3&&(m=10),a>4&&(m=6),a>5&&(m=4),a>6&&(m=3),a>7&&(m=2),a>8&&(m=1);const g=.5*m;let y=10;y>10&&(y=10),d=$a(d,g);const v=c[0]+y,_=c[1]+y,x=c[3]-y-_,E=Math.floor((c[2]-y-v)/g),D=Math.floor(x/g);let I=v;for(let M=E;M>0;M--){let L=_;for(let P=D;P>0;P--){const F=I+g,V=L+g,z=[I,L],W=[[z,[I,V],[F,V],[F,L],z]];if(console.log(),uS(d,I,L)&&uS(d,F,V)){const ie=new vu(W).transform("EPSG:4326",h),ae=new Gy({geometry:ie,column:M,row:P,id:f.length+1});f.push(ae)}L+=g}I+=g}return f})([-180,-90,180,90],0,v.zoom,this.mapSvc.EPSG,v.extent),D=new hi({features:E,wrapX:!1}),I=new UT({source:D});I.set("id",b);const M=this.layersSvc.getLayerById(b);if(M)M.custom_layer=I,this.layersSvc.updateLayer(M,M.filtertype);else{const L=new _i({id:b,name:"gridLayer",type:"custom",opacity:.3,custom_layer:I});this.layersSvc.addLayer(L,"Layers")}},this.controls={attribution:!0,scaleLine:!0}}ngOnInit(){this.addLayers(),this.subscribeToLayers(),this.subscribeToMapState(),this.subscribeToRoute(),this.startBbox&&this.mapStateSvc.setExtent(this.startBbox)}ngAfterViewInit(){this.mapSvc.map.on("moveend",this.updateLayerOnZoom)}ngOnDestroy(){this.subs.map(a=>a.unsubscribe()),this.mapSvc.map.un("moveend",this.updateLayerOnZoom)}addLayers(){const a=new vy({visible:!1}),h=new PL({visible:!0,tileSize:512}),d=new VO({url:"https://ahocevar.com/geoserver/wms",params:{LAYERS:"topp:states"},serverType:"geoserver"});d.on("imageloadstart",()=>{this.progressService.progress({indeterminate:!0})}),d.on("imageloadend",()=>{this.progressService.progress(null)}),d.on("imageloaderror",()=>{this.progressService.progress(null)});const f=new _i({id:"event_layer",name:"Image load Layer",type:"custom",custom_layer:new Xd({source:d}),visible:!1,bbox:[-133.9453125,18.979025953255267,-60.46875,52.908902047770255]}),m=new is({id:"updatable_feature_layer",name:"Updatable feature layer",type:"geojson",visible:!1,data:{type:"FeatureCollection",features:[{type:"Feature",properties:{},geometry:{type:"Polygon",coordinates:[[[-192.48046875,-24.686952411999144],[-88.06640625,-24.686952411999144],[-88.06640625,50.28933925329178],[-192.48046875,50.28933925329178],[-192.48046875,-24.686952411999144]]]}}]},actions:[{action:y=>{m.data=xee,this.layersSvc.updateLayer(m)},icon:"download",title:"Load data"}]});[h,a,f,m].forEach(y=>this.layersSvc.addLayer(y,"Layers"))}removeLayer(){this.layersSvc.removeLayerOrGroupById("event_layer2")}addLayer(){const a=new Ke,h=new Ke,d=new Su({source:new tb({url:"https://geoservice.dlr.de/eoc/land/wms",params:{LAYERS:"GUF28_DLR_v1_Mosaic"}})}),f=y=>{var v=y.context,_=this.mapSvc.map.getSize(),S=.5*_[0],b=sD(y,[S,0]),T=sD(y,[_[0],0]),x=sD(y,[S,_[1]]),E=sD(y,_);v.save(),v.beginPath(),v.moveTo(b[0],b[1]),v.lineTo(x[0],x[1]),v.lineTo(E[0],E[1]),v.lineTo(T[0],T[1]),v.closePath(),v.clip()};d.on("prerender",y=>{f(y)}),d.on("postrender",y=>{(y=>{y.context.restore()})(y)});const g=new _i({id:"event_layer2",name:"Image load Layer 2",type:"custom",custom_layer:new Ui({layers:[d]}),visible:!0,removable:!0,events:{source:[{event:"tileloadstart",listener:y=>{a.next(y)}},{event:"tileloadend",listener:y=>{h.next(y)}}],layer:[{event:"prerender",listener:y=>{f(y)}},{event:"postrender",listener:y=>{f(y)}}]}});a.subscribe(y=>this.progressService.progress({indeterminate:!0})),h.pipe(mv(200)).subscribe(y=>this.progressService.progress(null)),this.layersSvc.addLayer(g,"Layers")}getSearchParamsHashRouting(a=window.location.href){-1===a.indexOf("http")&&(a=new URL(a,`${window.location.origin}${window.location.pathname}`).toString());const h=new URL(window.location.href,window.location.origin),[d,f]=h.hash.split("?");let m=new URLSearchParams;return f&&(m=new URLSearchParams(f)),{query:m,urlHashRouting:h,hash:d}}updateSearchParamsHashRouting(a){const{query:h,urlHashRouting:d,hash:f}=this.getSearchParamsHashRouting();Object.keys(a).map(y=>{h.set(y,a[y])});const m=decodeURIComponent(`${h}`);return`${d.protocol}//${d.host}${d.pathname||"/"}${f||"#/"}?${m}`}subscribeToMapState(){const a=this.mapStateSvc.getMapState().subscribe(h=>{if(history.pushState){const d=h.extent.map(m=>m.toFixed(3)),f=this.updateSearchParamsHashRouting({bbox:d.join(","),zoom:h.zoom.toString()});window.history.pushState({path:f},"",f)}});this.subs.push(a)}subscribeToRoute(){const a=this.route.queryParams.pipe(qa()).subscribe(h=>{if(Object.keys(h).length>0&&h.bbox){const d=h.bbox.split(",").map(f=>parseFloat(f));4===d.length&&(this.startBbox=d)}});this.subs.push(a)}subscribeToLayers(){if(this.layersSvc){const a=this.layersSvc.getLayers().subscribe(h=>{h.filter(f=>!0===f.visible).forEach(f=>{"updatable_feature_layer"===f.id&&f.data.features.length<=1&&this.alertSvc.alert({type:"info",text:"Click the layer setting down arrow icon to load new features.",closeable:!0})})});this.subs.push(a)}}}return c.\u0275fac=function(a){return new(a||c)(N(Vs),N(Zs),N(Cs),N(T3),N(w3),N(Rp))},c.\u0275cmp=Be({type:c,selectors:[["app-route-map3"]],hostVars:2,hostBindings:function(a,h){2&a&&Yo(h.class)},features:[Mt([Vs,Zs,Cs])],decls:21,vars:10,consts:[[1,"content-area"],["id","olMap",3,"layersSvc","mapState","controls"],[1,"right",3,"clrVerticalNavCollapsible","clr-nav-level"],[1,"layers",3,"clrVerticalNavGroupExpanded"],["shape","layers","clrVerticalNavIcon","","title","layers"],[1,"padding","title-ellipsis"],[3,"layersSvc","mapStateSvc"],["title","Coordinates",1,"layers",3,"clrVerticalNavGroupExpanded"],["shape","compass","clrVerticalNavIcon",""],["title","Test",1,"layers",3,"clrVerticalNavGroupExpanded"],["shape","cog","clrVerticalNavIcon",""],[1,"btn","btn-primary",3,"click"]],template:function(a,h){1&a&&(U(0,"main",0),xe(1,"ukis-map-ol",1),H(),U(2,"clr-vertical-nav",2)(3,"clr-vertical-nav-group",3),xe(4,"clr-icon",4),ye(5," Layers "),U(6,"clr-vertical-nav-group-children",5),xe(7,"ukis-layer-control",6),H()(),U(8,"clr-vertical-nav-group",7),xe(9,"clr-icon",8),ye(10," Coordinates "),U(11,"clr-vertical-nav-group-children",5),xe(12,"ukis-mouse-position"),H()(),U(13,"clr-vertical-nav-group",9),xe(14,"clr-icon",10),ye(15," Test "),U(16,"clr-vertical-nav-group-children",5)(17,"button",11),Me("click",function(){return h.removeLayer()}),ye(18,"remove Layer"),H(),U(19,"button",11),Me("click",function(){return h.addLayer()}),ye(20,"add Layer"),H()()()()),2&a&&(B(1),G("layersSvc",h.layersSvc)("mapState",h.mapStateSvc)("controls",h.controls),B(1),G("clrVerticalNavCollapsible",!0)("clr-nav-level",2),B(1),G("clrVerticalNavGroupExpanded",!0),B(4),G("layersSvc",h.layersSvc)("mapStateSvc",h.mapStateSvc),B(1),G("clrVerticalNavGroupExpanded",!1),B(5),G("clrVerticalNavGroupExpanded",!0))},dependencies:[fa,Bc,Bu,Uu,Gu,zu,Oh,Kh,Cee]}),c})();var oD=34962,Mee=["experimental-webgl","webgl","webkit-3d","moz-webgl"];function x3(c,l){for(var a=$n({preserveDrawingBuffer:!0,antialias:!Fve},l),h=Mee.length,d=0;d<h;++d)try{var f=c.getContext(Mee[d],a);if(f)return f}catch{}return null}var b7e=function(){function c(l,a){this.array=null,this.type=l,bn(l===oD||34963===l,62),this.usage=void 0!==a?a:35044}return c.prototype.ofSize=function(l){this.array=new(M3(this.type))(l)},c.prototype.fromArray=function(l){var a=M3(this.type);this.array=a.from?a.from(l):new a(l)},c.prototype.fromArrayBuffer=function(l){this.array=new(M3(this.type))(l)},c.prototype.getType=function(){return this.type},c.prototype.getArray=function(){return this.array},c.prototype.getUsage=function(){return this.usage},c.prototype.getSize=function(){return this.array?this.array.length:0},c}();function M3(c){switch(c){case oD:return Float32Array;case 34963:return Uint32Array;default:return Float32Array}}const D3=b7e;var C7e=function(){function c(l){this.gl_=l.webGlContext;var a=this.gl_;this.scaleRatio_=l.scaleRatio||1,this.renderTargetTexture_=a.createTexture(),this.renderTargetTextureSize_=null,this.frameBuffer_=a.createFramebuffer();var h=a.createShader(a.VERTEX_SHADER);a.shaderSource(h,l.vertexShader||"\n  precision mediump float;\n  \n  attribute vec2 a_position;\n  varying vec2 v_texCoord;\n  varying vec2 v_screenCoord;\n  \n  uniform vec2 u_screenSize;\n   \n  void main() {\n    v_texCoord = a_position * 0.5 + 0.5;\n    v_screenCoord = v_texCoord * u_screenSize;\n    gl_Position = vec4(a_position, 0.0, 1.0);\n  }\n"),a.compileShader(h);var d=a.createShader(a.FRAGMENT_SHADER);a.shaderSource(d,l.fragmentShader||"\n  precision mediump float;\n   \n  uniform sampler2D u_image;\n  uniform float u_opacity;\n   \n  varying vec2 v_texCoord;\n   \n  void main() {\n    gl_FragColor = texture2D(u_image, v_texCoord) * u_opacity;\n  }\n"),a.compileShader(d),this.renderTargetProgram_=a.createProgram(),a.attachShader(this.renderTargetProgram_,h),a.attachShader(this.renderTargetProgram_,d),a.linkProgram(this.renderTargetProgram_),this.renderTargetVerticesBuffer_=a.createBuffer(),a.bindBuffer(a.ARRAY_BUFFER,this.renderTargetVerticesBuffer_),a.bufferData(a.ARRAY_BUFFER,new Float32Array([-1,-1,1,-1,-1,1,1,-1,1,1,-1,1]),a.STATIC_DRAW),this.renderTargetAttribLocation_=a.getAttribLocation(this.renderTargetProgram_,"a_position"),this.renderTargetUniformLocation_=a.getUniformLocation(this.renderTargetProgram_,"u_screenSize"),this.renderTargetOpacityLocation_=a.getUniformLocation(this.renderTargetProgram_,"u_opacity"),this.renderTargetTextureLocation_=a.getUniformLocation(this.renderTargetProgram_,"u_image"),this.uniforms_=[],l.uniforms&&Object.keys(l.uniforms).forEach(function(m){this.uniforms_.push({value:l.uniforms[m],location:a.getUniformLocation(this.renderTargetProgram_,m)})}.bind(this))}return c.prototype.getGL=function(){return this.gl_},c.prototype.init=function(l){var a=this.getGL(),h=[a.drawingBufferWidth*this.scaleRatio_,a.drawingBufferHeight*this.scaleRatio_];if(a.bindFramebuffer(a.FRAMEBUFFER,this.getFrameBuffer()),a.viewport(0,0,h[0],h[1]),!this.renderTargetTextureSize_||this.renderTargetTextureSize_[0]!==h[0]||this.renderTargetTextureSize_[1]!==h[1]){this.renderTargetTextureSize_=h;var f=a.RGBA,g=a.RGBA,y=a.UNSIGNED_BYTE;a.bindTexture(a.TEXTURE_2D,this.renderTargetTexture_),a.texImage2D(a.TEXTURE_2D,0,f,h[0],h[1],0,g,y,null),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.LINEAR),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE),a.framebufferTexture2D(a.FRAMEBUFFER,a.COLOR_ATTACHMENT0,a.TEXTURE_2D,this.renderTargetTexture_,0)}},c.prototype.apply=function(l,a,h,d){var f=this.getGL(),m=l.size;if(f.bindFramebuffer(f.FRAMEBUFFER,a?a.getFrameBuffer():null),f.activeTexture(f.TEXTURE0),f.bindTexture(f.TEXTURE_2D,this.renderTargetTexture_),!a){var g=tn(f.canvas);if(!l.renderTargets[g]){var y=f.getContextAttributes();y&&y.preserveDrawingBuffer&&(f.clearColor(0,0,0,0),f.clear(f.COLOR_BUFFER_BIT)),l.renderTargets[g]=!0}}f.enable(f.BLEND),f.blendFunc(f.ONE,f.ONE_MINUS_SRC_ALPHA),f.viewport(0,0,f.drawingBufferWidth,f.drawingBufferHeight),f.bindBuffer(f.ARRAY_BUFFER,this.renderTargetVerticesBuffer_),f.useProgram(this.renderTargetProgram_),f.enableVertexAttribArray(this.renderTargetAttribLocation_),f.vertexAttribPointer(this.renderTargetAttribLocation_,2,f.FLOAT,!1,0,0),f.uniform2f(this.renderTargetUniformLocation_,m[0],m[1]),f.uniform1i(this.renderTargetTextureLocation_,0),f.uniform1f(this.renderTargetOpacityLocation_,l.layerStatesArray[l.layerIndex].opacity),this.applyUniforms(l),h&&h(f,l),f.drawArrays(f.TRIANGLES,0,6),d&&d(f,l)},c.prototype.getFrameBuffer=function(){return this.frameBuffer_},c.prototype.applyUniforms=function(l){var h,a=this.getGL(),d=1;this.uniforms_.forEach(function(f){if((h="function"==typeof f.value?f.value(l):f.value)instanceof HTMLCanvasElement||h instanceof ImageData)f.texture||(f.texture=a.createTexture()),a.activeTexture(a["TEXTURE".concat(d)]),a.bindTexture(a.TEXTURE_2D,f.texture),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.LINEAR),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE),h instanceof ImageData?a.texImage2D(a.TEXTURE_2D,0,a.RGBA,a.RGBA,h.width,h.height,0,a.UNSIGNED_BYTE,new Uint8Array(h.data)):a.texImage2D(a.TEXTURE_2D,0,a.RGBA,a.RGBA,a.UNSIGNED_BYTE,h),a.uniform1i(f.location,d++);else if(Array.isArray(h))switch(h.length){case 2:return void a.uniform2f(f.location,h[0],h[1]);case 3:return void a.uniform3f(f.location,h[0],h[1],h[2]);case 4:return void a.uniform4f(f.location,h[0],h[1],h[2],h[3]);default:return}else"number"==typeof h&&a.uniform1f(f.location,h)})},c}();const Dee=C7e;function A3(c,l){return c[0]=l[0],c[1]=l[1],c[4]=l[2],c[5]=l[3],c[12]=l[4],c[13]=l[5],c}var E7e=function(){var c=function(l,a){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,d){h.__proto__=d}||function(h,d){for(var f in d)Object.prototype.hasOwnProperty.call(d,f)&&(h[f]=d[f])})(l,a)};return function(l,a){if("function"!=typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");function h(){this.constructor=l}c(l,a),l.prototype=null===a?Object.create(a):(h.prototype=a.prototype,new h)}}(),Wc={UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123,UNSIGNED_INT:5125,FLOAT:5126},cD={};function Aee(c){return"shared/"+c}var Iee=0,I7e=function(c){function l(a){var h=c.call(this)||this,d=a||{};h.boundHandleWebGLContextLost_=h.handleWebGLContextLost.bind(h),h.boundHandleWebGLContextRestored_=h.handleWebGLContextRestored.bind(h),h.canvasCacheKey_=d.canvasCacheKey?Aee(d.canvasCacheKey):function M7e(){var c="unique/"+Iee;return Iee+=1,c}(),h.canvas_=function D7e(c){var l=cD[c];if(!l){var a=document.createElement("canvas");a.style.position="absolute",a.style.left="0",cD[c]=l={users:0,canvas:a}}return l.users+=1,l.canvas}(h.canvasCacheKey_),h.gl_=x3(h.canvas_),h.bufferCache_={},h.extensionCache_={},h.currentProgram_=null,h.canvas_.addEventListener("webglcontextlost",h.boundHandleWebGLContextLost_),h.canvas_.addEventListener("webglcontextrestored",h.boundHandleWebGLContextRestored_),h.offsetRotateMatrix_=[1,0,0,1,0,0],h.offsetScaleMatrix_=[1,0,0,1,0,0],h.tmpMat4_=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],h.uniformLocations_={},h.attribLocations_={},h.uniforms_=[],d.uniforms&&h.setUniforms(d.uniforms);var f=h.getGL();return h.postProcessPasses_=d.postProcesses?d.postProcesses.map(function(m){return new Dee({webGlContext:f,scaleRatio:m.scaleRatio,vertexShader:m.vertexShader,fragmentShader:m.fragmentShader,uniforms:m.uniforms})}):[new Dee({webGlContext:f})],h.shaderCompileErrors_=null,h.startTime_=Date.now(),h}return E7e(l,c),l.prototype.setUniforms=function(a){for(var h in this.uniforms_=[],a)this.uniforms_.push({name:h,value:a[h]});this.uniformLocations_={}},l.prototype.canvasCacheKeyMatches=function(a){return this.canvasCacheKey_===Aee(a)},l.prototype.getExtension=function(a){if(a in this.extensionCache_)return this.extensionCache_[a];var h=this.gl_.getExtension(a);return this.extensionCache_[a]=h,h},l.prototype.bindBuffer=function(a){var h=this.getGL(),d=tn(a),f=this.bufferCache_[d];if(!f){var m=h.createBuffer();this.bufferCache_[d]=f={buffer:a,webGlBuffer:m}}h.bindBuffer(a.getType(),f.webGlBuffer)},l.prototype.flushBufferData=function(a){var h=this.getGL();this.bindBuffer(a),h.bufferData(a.getType(),a.getArray(),a.getUsage())},l.prototype.deleteBuffer=function(a){var h=this.getGL(),d=tn(a),f=this.bufferCache_[d];f&&!h.isContextLost()&&h.deleteBuffer(f.webGlBuffer),delete this.bufferCache_[d]},l.prototype.disposeInternal=function(){this.canvas_.removeEventListener("webglcontextlost",this.boundHandleWebGLContextLost_),this.canvas_.removeEventListener("webglcontextrestored",this.boundHandleWebGLContextRestored_),function A7e(c){var l=cD[c];if(l&&(l.users-=1,!(l.users>0))){var d=x3(l.canvas).getExtension("WEBGL_lose_context");d&&d.loseContext(),delete cD[c]}}(this.canvasCacheKey_),delete this.gl_,delete this.canvas_},l.prototype.prepareDraw=function(a,h){var d=this.getGL(),f=this.getCanvas(),m=a.size,g=a.pixelRatio;f.width=m[0]*g,f.height=m[1]*g,f.style.width=m[0]+"px",f.style.height=m[1]+"px",d.useProgram(this.currentProgram_);for(var y=this.postProcessPasses_.length-1;y>=0;y--)this.postProcessPasses_[y].init(a);d.bindTexture(d.TEXTURE_2D,null),d.clearColor(0,0,0,0),d.clear(d.COLOR_BUFFER_BIT),d.enable(d.BLEND),d.blendFunc(d.ONE,h?d.ZERO:d.ONE_MINUS_SRC_ALPHA),d.useProgram(this.currentProgram_),this.applyFrameState(a),this.applyUniforms(a)},l.prototype.prepareDrawToRenderTarget=function(a,h,d){var f=this.getGL(),m=h.getSize();f.bindFramebuffer(f.FRAMEBUFFER,h.getFramebuffer()),f.viewport(0,0,m[0],m[1]),f.bindTexture(f.TEXTURE_2D,h.getTexture()),f.clearColor(0,0,0,0),f.clear(f.COLOR_BUFFER_BIT),f.enable(f.BLEND),f.blendFunc(f.ONE,d?f.ZERO:f.ONE_MINUS_SRC_ALPHA),f.useProgram(this.currentProgram_),this.applyFrameState(a),this.applyUniforms(a)},l.prototype.drawElements=function(a,h){var d=this.getGL();this.getExtension("OES_element_index_uint"),d.drawElements(d.TRIANGLES,h-a,d.UNSIGNED_INT,4*a)},l.prototype.finalizeDraw=function(a,h,d){for(var f=0,m=this.postProcessPasses_.length;f<m;f++)f===m-1?this.postProcessPasses_[f].apply(a,null,h,d):this.postProcessPasses_[f].apply(a,this.postProcessPasses_[f+1])},l.prototype.getCanvas=function(){return this.canvas_},l.prototype.getGL=function(){return this.gl_},l.prototype.applyFrameState=function(a){var h=a.size,d=a.viewState.rotation,f=aS(this.offsetScaleMatrix_);FC(f,2/h[0],2/h[1]);var m=aS(this.offsetRotateMatrix_);0!==d&&function Hve(c,l){var a=Math.cos(l),h=Math.sin(l);Sy(c,lS(NL,a,h,-h,a,0,0))}(m,-d),this.setUniformMatrixValue("u_offsetScaleMatrix",A3(this.tmpMat4_,f)),this.setUniformMatrixValue("u_offsetRotateMatrix",A3(this.tmpMat4_,m)),this.setUniformFloatValue("u_time",.001*(Date.now()-this.startTime_)),this.setUniformFloatValue("u_zoom",a.viewState.zoom),this.setUniformFloatValue("u_resolution",a.viewState.resolution)},l.prototype.applyUniforms=function(a){var d,h=this.getGL(),f=0;this.uniforms_.forEach(function(m){if((d="function"==typeof m.value?m.value(a):m.value)instanceof HTMLCanvasElement||d instanceof HTMLImageElement||d instanceof ImageData)m.texture||(m.prevValue=void 0,m.texture=h.createTexture()),h.activeTexture(h["TEXTURE".concat(f)]),h.bindTexture(h.TEXTURE_2D,m.texture),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MIN_FILTER,h.LINEAR),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_WRAP_S,h.CLAMP_TO_EDGE),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_WRAP_T,h.CLAMP_TO_EDGE),(!(d instanceof HTMLImageElement)||d.complete)&&m.prevValue!==d&&(m.prevValue=d,h.texImage2D(h.TEXTURE_2D,0,h.RGBA,h.RGBA,h.UNSIGNED_BYTE,d)),h.uniform1i(this.getUniformLocation(m.name),f++);else if(Array.isArray(d)&&6===d.length)this.setUniformMatrixValue(m.name,A3(this.tmpMat4_,d));else if(Array.isArray(d)&&d.length<=4)switch(d.length){case 2:return void h.uniform2f(this.getUniformLocation(m.name),d[0],d[1]);case 3:return void h.uniform3f(this.getUniformLocation(m.name),d[0],d[1],d[2]);case 4:return void h.uniform4f(this.getUniformLocation(m.name),d[0],d[1],d[2],d[3]);default:return}else"number"==typeof d&&h.uniform1f(this.getUniformLocation(m.name),d)}.bind(this))},l.prototype.useProgram=function(a){return a!=this.currentProgram_&&(this.getGL().useProgram(a),this.currentProgram_=a,this.uniformLocations_={},this.attribLocations_={},!0)},l.prototype.compileShader=function(a,h){var d=this.getGL(),f=d.createShader(h);return d.shaderSource(f,a),d.compileShader(f),f},l.prototype.getProgram=function(a,h){var d=this.getGL(),f=this.compileShader(a,d.FRAGMENT_SHADER),m=this.compileShader(h,d.VERTEX_SHADER),g=d.createProgram();if(d.attachShader(g,f),d.attachShader(g,m),d.linkProgram(g),!d.getShaderParameter(f,d.COMPILE_STATUS)){var y="Fragment shader compliation failed: ".concat(d.getShaderInfoLog(f));throw new Error(y)}if(d.deleteShader(f),!d.getShaderParameter(m,d.COMPILE_STATUS))throw y="Vertex shader compilation failed: ".concat(d.getShaderInfoLog(m)),new Error(y);if(d.deleteShader(m),!d.getProgramParameter(g,d.LINK_STATUS))throw y="GL program linking failed: ".concat(d.getShaderInfoLog(m)),new Error(y);return g},l.prototype.getUniformLocation=function(a){return void 0===this.uniformLocations_[a]&&(this.uniformLocations_[a]=this.getGL().getUniformLocation(this.currentProgram_,a)),this.uniformLocations_[a]},l.prototype.getAttributeLocation=function(a){return void 0===this.attribLocations_[a]&&(this.attribLocations_[a]=this.getGL().getAttribLocation(this.currentProgram_,a)),this.attribLocations_[a]},l.prototype.makeProjectionTransform=function(a,h){var d=a.size,f=a.viewState.rotation,m=a.viewState.resolution,g=a.viewState.center;return aS(h),Do(h,0,0,2/(m*d[0]),2/(m*d[1]),-f,-g[0],-g[1]),h},l.prototype.setUniformFloatValue=function(a,h){this.getGL().uniform1f(this.getUniformLocation(a),h)},l.prototype.setUniformFloatVec4=function(a,h){this.getGL().uniform4fv(this.getUniformLocation(a),h)},l.prototype.setUniformMatrixValue=function(a,h){this.getGL().uniformMatrix4fv(this.getUniformLocation(a),!1,h)},l.prototype.enableAttributeArray_=function(a,h,d,f,m){var g=this.getAttributeLocation(a);g<0||(this.getGL().enableVertexAttribArray(g),this.getGL().vertexAttribPointer(g,h,d,!1,f,m))},l.prototype.enableAttributes=function(a){for(var h=function R7e(c){for(var l=0,a=0;a<c.length;a++){var h=c[a];l+=h.size*Ree(h.type)}return l}(a),d=0,f=0;f<a.length;f++){var m=a[f];this.enableAttributeArray_(m.name,m.size,m.type||5126,h,d),d+=m.size*Ree(m.type)}},l.prototype.handleWebGLContextLost=function(){Ey(this.bufferCache_),this.currentProgram_=null},l.prototype.handleWebGLContextRestored=function(){},l.prototype.createTexture=function(a,h,d){var f=this.getGL(),m=d||f.createTexture(),y=f.RGBA,_=f.RGBA,S=f.UNSIGNED_BYTE;return f.bindTexture(f.TEXTURE_2D,m),h?f.texImage2D(f.TEXTURE_2D,0,y,_,S,h):f.texImage2D(f.TEXTURE_2D,0,y,a[0],a[1],0,_,S,null),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MIN_FILTER,f.LINEAR),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_S,f.CLAMP_TO_EDGE),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_T,f.CLAMP_TO_EDGE),m},l}(oS);function Ree(c){switch(c){case Wc.UNSIGNED_BYTE:return Uint8Array.BYTES_PER_ELEMENT;case Wc.UNSIGNED_SHORT:return Uint16Array.BYTES_PER_ELEMENT;case Wc.UNSIGNED_INT:return Uint32Array.BYTES_PER_ELEMENT;default:return Float32Array.BYTES_PER_ELEMENT}}const P7e=I7e;var L7e=function(){var c=function(l,a){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,d){h.__proto__=d}||function(h,d){for(var f in d)Object.prototype.hasOwnProperty.call(d,f)&&(h[f]=d[f])})(l,a)};return function(l,a){if("function"!=typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");function h(){this.constructor=l}c(l,a),l.prototype=null===a?Object.create(a):(h.prototype=a.prototype,new h)}}(),O7e=function(c){function l(a,h){var d=c.call(this,a)||this,f=h||{};return d.inversePixelTransform_=[1,0,0,1,0,0],d.pixelContext_=null,d.postProcesses_=f.postProcesses,d.uniforms_=f.uniforms,a.addChangeListener("map",d.removeHelper.bind(d)),d.dispatchPreComposeEvent=d.dispatchPreComposeEvent.bind(d),d.dispatchPostComposeEvent=d.dispatchPostComposeEvent.bind(d),d}return L7e(l,c),l.prototype.dispatchPreComposeEvent=function(a,h){var d=this.getLayer();if(d.hasListener("precompose")){var f=new mS("precompose",void 0,h,a);d.dispatchEvent(f)}},l.prototype.dispatchPostComposeEvent=function(a,h){var d=this.getLayer();if(d.hasListener("postcompose")){var f=new mS("postcompose",void 0,h,a);d.dispatchEvent(f)}},l.prototype.reset=function(a){this.uniforms_=a.uniforms,this.helper&&this.helper.setUniforms(this.uniforms_)},l.prototype.removeHelper=function(){this.helper&&(this.helper.dispose(),delete this.helper)},l.prototype.prepareFrame=function(a){if(this.getLayer().getRenderSource()){for(var h=!0,d=-1,f=void 0,m=0,g=a.layerStatesArray.length;m<g;m++){var y=a.layerStatesArray[m].layer,v=y.getRenderer();if(v instanceof l){var _=y.getClassName();if((h||_!==f)&&(d+=1,h=!1),f=_,v===this)break}else h=!0}var S="map/"+a.mapId+"/group/"+d;(!this.helper||!this.helper.canvasCacheKeyMatches(S))&&(this.removeHelper(),this.helper=new P7e({postProcesses:this.postProcesses_,uniforms:this.uniforms_,canvasCacheKey:S}),f&&(this.helper.getCanvas().className=f),this.afterHelperCreated())}return this.prepareFrameInternal(a)},l.prototype.afterHelperCreated=function(){},l.prototype.prepareFrameInternal=function(a){return!0},l.prototype.disposeInternal=function(){this.removeHelper(),c.prototype.disposeInternal.call(this)},l.prototype.dispatchRenderEvent_=function(a,h,d){var f=this.getLayer();if(f.hasListener(a)){Do(this.inversePixelTransform_,0,0,d.pixelRatio,-d.pixelRatio,0,0,-d.size[1]);var m=new mS(a,this.inversePixelTransform_,d,h);f.dispatchEvent(m)}},l.prototype.preRender=function(a,h){this.dispatchRenderEvent_("prerender",a,h)},l.prototype.postRender=function(a,h){this.dispatchRenderEvent_("postrender",a,h)},l.prototype.getDataAtPixel=function(a,h,d){var f=ni([h.pixelRatio,0,0,h.pixelRatio,0,0],a.slice()),m=this.helper.getGL();if(!m)return null;var y=this.getLayer().getExtent();if(y&&!Ll(y,ni(h.pixelToCoordinateTransform,a.slice())))return null;var _=m.getContextAttributes();if(!_||!_.preserveDrawingBuffer)return new Uint8Array;var E,S=Math.round(f[0]),b=Math.round(f[1]),T=this.pixelContext_;if(!T){var x=document.createElement("canvas");x.width=1,x.height=1,T=x.getContext("2d"),this.pixelContext_=T}T.clearRect(0,0,1,1);try{T.drawImage(m.canvas,S,b,1,1,0,0,1,1),E=T.getImageData(0,0,1,1).data}catch{return E}return 0===E[3]?null:E},l}(AS);function F7e(c,l){var a=l||[],h=256,d=255;return a[0]=Math.floor(c/h/h/h)/d,a[1]=Math.floor(c/h/h)%h/d,a[2]=Math.floor(c/h)%h/d,a[3]=c%h/d,a}const V7e=O7e;var ju=new Uint8Array(4),B7e=function(){function c(l,a){this.helper_=l;var h=l.getGL();this.texture_=h.createTexture(),this.framebuffer_=h.createFramebuffer(),this.size_=a||[1,1],this.data_=new Uint8Array(0),this.dataCacheDirty_=!0,this.updateSize_()}return c.prototype.setSize=function(l){Fd(l,this.size_)||(this.size_[0]=l[0],this.size_[1]=l[1],this.updateSize_())},c.prototype.getSize=function(){return this.size_},c.prototype.clearCachedData=function(){this.dataCacheDirty_=!0},c.prototype.readAll=function(){if(this.dataCacheDirty_){var l=this.size_,a=this.helper_.getGL();a.bindFramebuffer(a.FRAMEBUFFER,this.framebuffer_),a.readPixels(0,0,l[0],l[1],a.RGBA,a.UNSIGNED_BYTE,this.data_),this.dataCacheDirty_=!1}return this.data_},c.prototype.readPixel=function(l,a){if(l<0||a<0||l>this.size_[0]||a>=this.size_[1])return ju[0]=0,ju[1]=0,ju[2]=0,ju[3]=0,ju;this.readAll();var h=Math.floor(l)+(this.size_[1]-Math.floor(a)-1)*this.size_[0];return ju[0]=this.data_[4*h],ju[1]=this.data_[4*h+1],ju[2]=this.data_[4*h+2],ju[3]=this.data_[4*h+3],ju},c.prototype.getTexture=function(){return this.texture_},c.prototype.getFramebuffer=function(){return this.framebuffer_},c.prototype.updateSize_=function(){var l=this.size_,a=this.helper_.getGL();this.texture_=this.helper_.createTexture(l,null,this.texture_),a.bindFramebuffer(a.FRAMEBUFFER,this.framebuffer_),a.viewport(0,0,l[0],l[1]),a.framebufferTexture2D(a.FRAMEBUFFER,a.COLOR_ATTACHMENT0,a.TEXTURE_2D,this.texture_,0),this.data_=new Uint8Array(l[0]*l[1]*4)},c}();const U7e=B7e;var z7e=function(){var c=function(l,a){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,d){h.__proto__=d}||function(h,d){for(var f in d)Object.prototype.hasOwnProperty.call(d,f)&&(h[f]=d[f])})(l,a)};return function(l,a){if("function"!=typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");function h(){this.constructor=l}c(l,a),l.prototype=null===a?Object.create(a):(h.prototype=a.prototype,new h)}}(),H7e=function(c){function l(a,h){var d=this,f=h.uniforms||{},m=[1,0,0,1,0,0];f.u_projectionMatrix=m,(d=c.call(this,a,{uniforms:f,postProcesses:h.postProcesses})||this).ready=!1,d.sourceRevision_=-1,d.verticesBuffer_=new D3(oD,35048),d.hitVerticesBuffer_=new D3(oD,35048),d.indicesBuffer_=new D3(34963,35048),d.vertexShader_=h.vertexShader,d.fragmentShader_=h.fragmentShader,d.hitDetectionEnabled_=!(!h.hitFragmentShader||!h.hitVertexShader),d.hitVertexShader_=h.hitVertexShader,d.hitFragmentShader_=h.hitFragmentShader;var g=h.attributes?h.attributes.map(function(v){return{name:"a_"+v.name,size:1,type:Wc.FLOAT}}):[];d.attributes=[{name:"a_position",size:2,type:Wc.FLOAT},{name:"a_index",size:1,type:Wc.FLOAT}].concat(g),d.hitDetectionAttributes=[{name:"a_position",size:2,type:Wc.FLOAT},{name:"a_index",size:1,type:Wc.FLOAT},{name:"a_hitColor",size:4,type:Wc.FLOAT},{name:"a_featureUid",size:1,type:Wc.FLOAT}].concat(g),d.customAttributes=h.attributes?h.attributes:[],d.previousExtent_=[1/0,1/0,-1/0,-1/0],d.currentTransform_=m,d.renderTransform_=[1,0,0,1,0,0],d.invertRenderTransform_=[1,0,0,1,0,0],d.renderInstructions_=new Float32Array(0),d.hitRenderInstructions_=new Float32Array(0),d.generateBuffersRun_=0,d.worker_=function G7e(){var c='var e="function"==typeof Object.assign?Object.assign:function(e,n){if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),r=1,o=arguments.length;r<o;++r){var i=arguments[r];if(null!=i)for(var f in i)i.hasOwnProperty(f)&&(t[f]=i[f])}return t},n="GENERATE_BUFFERS",t=[],r={vertexPosition:0,indexPosition:0};function o(e,n,t,r,o){e[n+0]=t,e[n+1]=r,e[n+2]=o}function i(e,n,i,f,s,a){var u=3+s,l=e[n+0],v=e[n+1],c=t;c.length=s;for(var g=0;g<c.length;g++)c[g]=e[n+2+g];var b=a?a.vertexPosition:0,h=a?a.indexPosition:0,d=b/u;return o(i,b,l,v,0),c.length&&i.set(c,b+3),o(i,b+=u,l,v,1),c.length&&i.set(c,b+3),o(i,b+=u,l,v,2),c.length&&i.set(c,b+3),o(i,b+=u,l,v,3),c.length&&i.set(c,b+3),b+=u,f[h++]=d,f[h++]=d+1,f[h++]=d+3,f[h++]=d+1,f[h++]=d+2,f[h++]=d+3,r.vertexPosition=b,r.indexPosition=h,r}var f=self;f.onmessage=function(t){var r=t.data;if(r.type===n){for(var o,s=r.customAttributesCount,a=2+s,u=new Float32Array(r.renderInstructions),l=u.length/a,v=4*l*(s+3),c=new Uint32Array(6*l),g=new Float32Array(v),b=0;b<u.length;b+=a)o=i(u,b,g,c,s,o);var h=e({vertexBuffer:g.buffer,indexBuffer:c.buffer,renderInstructions:u.buffer},r);f.postMessage(h,[g.buffer,c.buffer,u.buffer])}};';return new Worker(typeof Blob>"u"?"data:application/javascript;base64,"+Buffer.from(c,"binary").toString("base64"):URL.createObjectURL(new Blob([c],{type:"application/javascript"})))}(),d.worker_.addEventListener("message",function(v){var _=v.data;if("GENERATE_BUFFERS"===_.type){var S=_.projectionTransform;_.hitDetection?(this.hitVerticesBuffer_.fromArrayBuffer(_.vertexBuffer),this.helper.flushBufferData(this.hitVerticesBuffer_)):(this.verticesBuffer_.fromArrayBuffer(_.vertexBuffer),this.helper.flushBufferData(this.verticesBuffer_)),this.indicesBuffer_.fromArrayBuffer(_.indexBuffer),this.helper.flushBufferData(this.indicesBuffer_),this.renderTransform_=S,by(this.invertRenderTransform_,this.renderTransform_),_.hitDetection?this.hitRenderInstructions_=new Float32Array(v.data.renderInstructions):(this.renderInstructions_=new Float32Array(v.data.renderInstructions),_.generateBuffersRun===this.generateBuffersRun_&&(this.ready=!0)),this.getLayer().changed()}}.bind(d)),d.featureCache_={},d.featureCount_=0;var y=d.getLayer().getSource();return d.sourceListenKeys_=[zn(y,"addfeature",d.handleSourceFeatureAdded_,d),zn(y,"changefeature",d.handleSourceFeatureChanged_,d),zn(y,"removefeature",d.handleSourceFeatureDelete_,d),zn(y,"clear",d.handleSourceFeatureClear_,d)],y.forEachFeature(function(v){this.featureCache_[tn(v)]={feature:v,properties:v.getProperties(),geometry:v.getGeometry()},this.featureCount_++}.bind(d)),d}return z7e(l,c),l.prototype.afterHelperCreated=function(){this.program_=this.helper.getProgram(this.fragmentShader_,this.vertexShader_),this.hitDetectionEnabled_&&(this.hitProgram_=this.helper.getProgram(this.hitFragmentShader_,this.hitVertexShader_),this.hitRenderTarget_=new U7e(this.helper))},l.prototype.handleSourceFeatureAdded_=function(a){var h=a.feature;this.featureCache_[tn(h)]={feature:h,properties:h.getProperties(),geometry:h.getGeometry()},this.featureCount_++},l.prototype.handleSourceFeatureChanged_=function(a){var h=a.feature;this.featureCache_[tn(h)]={feature:h,properties:h.getProperties(),geometry:h.getGeometry()}},l.prototype.handleSourceFeatureDelete_=function(a){delete this.featureCache_[tn(a.feature)],this.featureCount_--},l.prototype.handleSourceFeatureClear_=function(){this.featureCache_={},this.featureCount_=0},l.prototype.renderFrame=function(a){var h=this.helper.getGL();this.preRender(h,a);var d=this.indicesBuffer_.getSize();this.helper.drawElements(0,d),this.helper.finalizeDraw(a,this.dispatchPreComposeEvent,this.dispatchPostComposeEvent);var f=this.helper.getCanvas();return this.hitDetectionEnabled_&&(this.renderHitDetection(a),this.hitRenderTarget_.clearCachedData()),this.postRender(h,a),f},l.prototype.prepareFrameInternal=function(a){var h=this.getLayer(),d=h.getSource(),f=a.viewState,m=!a.viewHints[0]&&!a.viewHints[1],g=!Ol(this.previousExtent_,a.extent),y=this.sourceRevision_<d.getRevision();if(y&&(this.sourceRevision_=d.getRevision()),m&&(g||y)){var v=f.projection,_=f.resolution,S=h instanceof $p?h.getRenderBuffer():0,b=$a(a.extent,S*_);d.loadFeatures(b,_,v),this.rebuildBuffers_(a),this.previousExtent_=a.extent.slice()}return this.helper.makeProjectionTransform(a,this.currentTransform_),Sy(this.currentTransform_,this.invertRenderTransform_),this.helper.useProgram(this.program_),this.helper.prepareDraw(a),this.helper.bindBuffer(this.verticesBuffer_),this.helper.bindBuffer(this.indicesBuffer_),this.helper.enableAttributes(this.attributes),!0},l.prototype.rebuildBuffers_=function(a){var h=[1,0,0,1,0,0];this.helper.makeProjectionTransform(a,h);var d=(2+this.customAttributes.length)*this.featureCount_;if((!this.renderInstructions_||this.renderInstructions_.length!==d)&&(this.renderInstructions_=new Float32Array(d)),this.hitDetectionEnabled_){var f=(7+this.customAttributes.length)*this.featureCount_;(!this.hitRenderInstructions_||this.hitRenderInstructions_.length!==f)&&(this.hitRenderInstructions_=new Float32Array(f))}var m,g,b,y=[],v=[],_=0,S=0;for(var T in this.featureCache_)if((g=(m=this.featureCache_[T]).geometry)&&"Point"===g.getType()){y[0]=g.getFlatCoordinates()[0],y[1]=g.getFlatCoordinates()[1],ni(h,y),b=F7e(S+6,v),this.renderInstructions_[_++]=y[0],this.renderInstructions_[_++]=y[1],this.hitDetectionEnabled_&&(this.hitRenderInstructions_[S++]=y[0],this.hitRenderInstructions_[S++]=y[1],this.hitRenderInstructions_[S++]=b[0],this.hitRenderInstructions_[S++]=b[1],this.hitRenderInstructions_[S++]=b[2],this.hitRenderInstructions_[S++]=b[3],this.hitRenderInstructions_[S++]=Number(T));for(var x=void 0,E=0;E<this.customAttributes.length;E++)x=this.customAttributes[E].callback(m.feature,m.properties),this.renderInstructions_[_++]=x,this.hitDetectionEnabled_&&(this.hitRenderInstructions_[S++]=x)}var D={type:"GENERATE_BUFFERS",renderInstructions:this.renderInstructions_.buffer,customAttributesCount:this.customAttributes.length};if(D.projectionTransform=h,D.generateBuffersRun=++this.generateBuffersRun_,this.ready=!1,this.worker_.postMessage(D,[this.renderInstructions_.buffer]),this.renderInstructions_=null,this.hitDetectionEnabled_){var I={type:"GENERATE_BUFFERS",renderInstructions:this.hitRenderInstructions_.buffer,customAttributesCount:5+this.customAttributes.length};I.projectionTransform=h,I.hitDetection=!0,this.worker_.postMessage(I,[this.hitRenderInstructions_.buffer]),this.hitRenderInstructions_=null}},l.prototype.forEachFeatureAtCoordinate=function(a,h,d,f,m){if(bn(this.hitDetectionEnabled_,66),this.hitRenderInstructions_){var g=ni(h.coordinateToPixelTransform,a.slice()),y=this.hitRenderTarget_.readPixel(g[0]/2,g[1]/2),_=function k7e(c){var l=0,a=256,h=255;return l+=Math.round(c[0]*a*a*a*h),l+=Math.round(c[1]*a*a*h),(l+=Math.round(c[2]*a*h))+Math.round(c[3]*h)}([y[0]/255,y[1]/255,y[2]/255,y[3]/255]),b=Math.floor(this.hitRenderInstructions_[_]).toString(),x=this.getLayer().getSource().getFeatureByUid(b);if(x)return f(x,this.getLayer(),null)}},l.prototype.renderHitDetection=function(a){if(this.hitVerticesBuffer_.getSize()){this.hitRenderTarget_.setSize([Math.floor(a.size[0]/2),Math.floor(a.size[1]/2)]),this.helper.useProgram(this.hitProgram_),this.helper.prepareDrawToRenderTarget(a,this.hitRenderTarget_,!0),this.helper.bindBuffer(this.hitVerticesBuffer_),this.helper.bindBuffer(this.indicesBuffer_),this.helper.enableAttributes(this.hitDetectionAttributes);var h=this.indicesBuffer_.getSize();this.helper.drawElements(0,h)}},l.prototype.disposeInternal=function(){this.worker_.terminate(),this.layer_=null,this.sourceListenKeys_.forEach(function(a){ri(a)}),this.sourceListenKeys_=null,c.prototype.disposeInternal.call(this)},l}(V7e);const j7e=H7e;var W7e=function(){var c=function(l,a){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,d){h.__proto__=d}||function(h,d){for(var f in d)Object.prototype.hasOwnProperty.call(d,f)&&(h[f]=d[f])})(l,a)};return function(l,a){if("function"!=typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");function h(){this.constructor=l}c(l,a),l.prototype=null===a?Object.create(a):(h.prototype=a.prototype,new h)}}(),X7e=["#00f","#0ff","#0f0","#ff0","#f00"],q7e=function(c){function l(a){var h=this,d=a||{},f=$n({},d);delete f.gradient,delete f.radius,delete f.blur,delete f.weight,(h=c.call(this,f)||this).gradient_=null,h.addChangeListener("gradient",h.handleGradientChanged_),h.setGradient(d.gradient?d.gradient:X7e),h.setBlur(void 0!==d.blur?d.blur:15),h.setRadius(void 0!==d.radius?d.radius:8);var m=d.weight?d.weight:"weight";return h.weightFunction_="string"==typeof m?function(g){return g.get(m)}:m,h.setRenderOrder(null),h}return W7e(l,c),l.prototype.getBlur=function(){return this.get("blur")},l.prototype.getGradient=function(){return this.get("gradient")},l.prototype.getRadius=function(){return this.get("radius")},l.prototype.handleGradientChanged_=function(){this.gradient_=function $7e(c){for(var h=Qs(1,256),d=h.createLinearGradient(0,0,1,256),f=1/(c.length-1),m=0,g=c.length;m<g;++m)d.addColorStop(m*f,c[m]);return h.fillStyle=d,h.fillRect(0,0,1,256),h.canvas}(this.getGradient())},l.prototype.setBlur=function(a){this.set("blur",a)},l.prototype.setGradient=function(a){this.set("gradient",a)},l.prototype.setRadius=function(a){this.set("radius",a)},l.prototype.createRenderer=function(){return new j7e(this,{className:this.getClassName(),attributes:[{name:"weight",callback:function(a){var h=this.weightFunction_(a);return void 0!==h?qn(h,0,1):1}.bind(this)}],vertexShader:"\n        precision mediump float;\n        uniform mat4 u_projectionMatrix;\n        uniform mat4 u_offsetScaleMatrix;\n        uniform float u_size;\n        attribute vec2 a_position;\n        attribute float a_index;\n        attribute float a_weight;\n\n        varying vec2 v_texCoord;\n        varying float v_weight;\n\n        void main(void) {\n          mat4 offsetMatrix = u_offsetScaleMatrix;\n          float offsetX = a_index == 0.0 || a_index == 3.0 ? -u_size / 2.0 : u_size / 2.0;\n          float offsetY = a_index == 0.0 || a_index == 1.0 ? -u_size / 2.0 : u_size / 2.0;\n          vec4 offsets = offsetMatrix * vec4(offsetX, offsetY, 0.0, 0.0);\n          gl_Position = u_projectionMatrix * vec4(a_position, 0.0, 1.0) + offsets;\n          float u = a_index == 0.0 || a_index == 3.0 ? 0.0 : 1.0;\n          float v = a_index == 0.0 || a_index == 1.0 ? 0.0 : 1.0;\n          v_texCoord = vec2(u, v);\n          v_weight = a_weight;\n        }",fragmentShader:"\n        precision mediump float;\n        uniform float u_blurSlope;\n\n        varying vec2 v_texCoord;\n        varying float v_weight;\n\n        void main(void) {\n          vec2 texCoord = v_texCoord * 2.0 - vec2(1.0, 1.0);\n          float sqRadius = texCoord.x * texCoord.x + texCoord.y * texCoord.y;\n          float value = (1.0 - sqrt(sqRadius)) * u_blurSlope;\n          float alpha = smoothstep(0.0, 1.0, value) * v_weight;\n          gl_FragColor = vec4(alpha, alpha, alpha, alpha);\n        }",hitVertexShader:"\n        precision mediump float;\n        uniform mat4 u_projectionMatrix;\n        uniform mat4 u_offsetScaleMatrix;\n        uniform float u_size;\n        attribute vec2 a_position;\n        attribute float a_index;\n        attribute float a_weight;\n        attribute vec4 a_hitColor;\n\n        varying vec2 v_texCoord;\n        varying float v_weight;\n        varying vec4 v_hitColor;\n\n        void main(void) {\n          mat4 offsetMatrix = u_offsetScaleMatrix;\n          float offsetX = a_index == 0.0 || a_index == 3.0 ? -u_size / 2.0 : u_size / 2.0;\n          float offsetY = a_index == 0.0 || a_index == 1.0 ? -u_size / 2.0 : u_size / 2.0;\n          vec4 offsets = offsetMatrix * vec4(offsetX, offsetY, 0.0, 0.0);\n          gl_Position = u_projectionMatrix * vec4(a_position, 0.0, 1.0) + offsets;\n          float u = a_index == 0.0 || a_index == 3.0 ? 0.0 : 1.0;\n          float v = a_index == 0.0 || a_index == 1.0 ? 0.0 : 1.0;\n          v_texCoord = vec2(u, v);\n          v_hitColor = a_hitColor;\n          v_weight = a_weight;\n        }",hitFragmentShader:"\n        precision mediump float;\n        uniform float u_blurSlope;\n\n        varying vec2 v_texCoord;\n        varying float v_weight;\n        varying vec4 v_hitColor;\n\n        void main(void) {\n          vec2 texCoord = v_texCoord * 2.0 - vec2(1.0, 1.0);\n          float sqRadius = texCoord.x * texCoord.x + texCoord.y * texCoord.y;\n          float value = (1.0 - sqrt(sqRadius)) * u_blurSlope;\n          float alpha = smoothstep(0.0, 1.0, value) * v_weight;\n          if (alpha < 0.05) {\n            discard;\n          }\n\n          gl_FragColor = v_hitColor;\n        }",uniforms:{u_size:function(){return 2*(this.get("radius")+this.get("blur"))}.bind(this),u_blurSlope:function(){return this.get("radius")/Math.max(1,this.get("blur"))}.bind(this)},postProcesses:[{fragmentShader:"\n            precision mediump float;\n\n            uniform sampler2D u_image;\n            uniform sampler2D u_gradientTexture;\n            uniform float u_opacity;\n\n            varying vec2 v_texCoord;\n\n            void main() {\n              vec4 color = texture2D(u_image, v_texCoord);\n              gl_FragColor.a = color.a * u_opacity;\n              gl_FragColor.rgb = texture2D(u_gradientTexture, vec2(0.5, color.a)).rgb;\n              gl_FragColor.rgb *= gl_FragColor.a;\n            }",uniforms:{u_gradientTexture:function(){return this.gradient_}.bind(this),u_opacity:function(){return this.getOpacity()}.bind(this)}}]})},l.prototype.renderDeclutter=function(){},l}($p);const Y7e=q7e;var Z7e=function(){var c=function(l,a){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,d){h.__proto__=d}||function(h,d){for(var f in d)Object.prototype.hasOwnProperty.call(d,f)&&(h[f]=d[f])})(l,a)};return function(l,a){if("function"!=typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");function h(){this.constructor=l}c(l,a),l.prototype=null===a?Object.create(a):(h.prototype=a.prototype,new h)}}(),K7e=function(c){function l(a){var h=this,d=void 0!==a.crossOrigin?a.crossOrigin:null,f=void 0!==a.imageLoadFunction?a.imageLoadFunction:xW,m=void 0===a.imageSmoothing||a.imageSmoothing;return void 0!==a.interpolate&&(m=a.interpolate),(h=c.call(this,{attributions:a.attributions,interpolate:m,projection:cn(a.projection)})||this).url_=a.url,h.imageExtent_=a.imageExtent,h.image_=new I7(h.imageExtent_,void 0,1,h.url_,d,f),h.imageSize_=a.imageSize?a.imageSize:null,h.image_.addEventListener("change",h.handleImageChange.bind(h)),h}return Z7e(l,c),l.prototype.getImageExtent=function(){return this.imageExtent_},l.prototype.getImageInternal=function(a,h,d,f){return Mi(a,this.image_.getExtent())?this.image_:null},l.prototype.getUrl=function(){return this.url_},l.prototype.handleImageChange=function(a){if(2==this.image_.getState()){var h=this.image_.getExtent(),d=this.image_.getImage(),f=void 0,m=void 0;this.imageSize_?(f=this.imageSize_[0],m=this.imageSize_[1]):(f=d.width,m=d.height);var g=fr(h),y=Ei(h),v=g/f,_=y/m,S=f,b=m;if(v>_?S=Math.round(g/_):b=Math.round(y/v),S!==f||b!==m){var T=Qs(S,b);this.getInterpolate()||$n(T,RS);var x=T.canvas;T.drawImage(d,0,0,f,m,0,0,x.width,x.height),this.image_.setImage(x)}}c.prototype.handleImageChange.call(this,a)},l}(Qy);const Pee=K7e;var Q7e=function(){var c=function(l,a){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,d){h.__proto__=d}||function(h,d){for(var f in d)Object.prototype.hasOwnProperty.call(d,f)&&(h[f]=d[f])})(l,a)};return function(l,a){if("function"!=typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");function h(){this.constructor=l}c(l,a),l.prototype=null===a?Object.create(a):(h.prototype=a.prototype,new h)}}(),J7e=function(c){function l(a){var h=this,d=a||{},f=void 0===d.imageSmoothing||d.imageSmoothing;return void 0!==d.interpolate&&(f=d.interpolate),(h=c.call(this,{attributions:d.attributions,interpolate:f,projection:d.projection,resolutions:d.resolutions,state:d.state})||this).canvasFunction_=d.canvasFunction,h.canvas_=null,h.renderedRevision_=0,h.ratio_=void 0!==d.ratio?d.ratio:1.5,h}return Q7e(l,c),l.prototype.getImageInternal=function(a,h,d,f){h=this.findNearestResolution(h);var m=this.canvas_;if(m&&this.renderedRevision_==this.getRevision()&&m.getResolution()==h&&m.getPixelRatio()==d&&xa(m.getExtent(),a))return m;GL(a=a.slice(),this.ratio_);var g=fr(a)/h,y=Ei(a)/h,_=this.canvasFunction_.call(this,a,h,d,[g*d,y*d],f);return _&&(m=new BO(a,h,d,_)),this.canvas_=m,this.renderedRevision_=this.getRevision(),m},l}(Qy);const eje=J7e;var tje=function(){var c=function(l,a){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,d){h.__proto__=d}||function(h,d){for(var f in d)Object.prototype.hasOwnProperty.call(d,f)&&(h[f]=d[f])})(l,a)};return function(l,a){if("function"!=typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");function h(){this.constructor=l}c(l,a),l.prototype=null===a?Object.create(a):(h.prototype=a.prototype,new h)}}(),nje=function(c){function l(a){var h=c.call(this)||this,d=a||{};return h.layerName_=d.layerName,h.layers_=d.layers?d.layers:null,h.dataProjection=cn(d.dataProjection?d.dataProjection:"EPSG:4326"),h}return tje(l,c),l.prototype.readFeaturesFromObject=function(a,h){if("Topology"==a.type){var d=a,f=void 0,m=null,g=null;d.transform&&(m=(f=d.transform).scale,g=f.translate);var y=d.arcs;f&&function hje(c,l,a){for(var h=0,d=c.length;h<d;++h)dje(c[h],l,a)}(y,m,g);var v=[],_=d.objects,S=this.layerName_;for(var T in _)this.layers_&&-1==this.layers_.indexOf(T)||("GeometryCollection"===_[T].type?v.push.apply(v,uje(_[T],y,m,g,S,T,h)):v.push(Lee(_[T],y,m,g,S,T,h)));return v}return[]},l.prototype.readProjectionFromObject=function(a){return this.dataProjection},l}(yj),rje={Point:function ije(c,l,a){var h=c.coordinates;return l&&a&&P3(h,l,a),new yu(h)},LineString:function oje(c,l){var a=hD(c.arcs,l);return new Eh(a)},Polygon:function lje(c,l){for(var a=[],h=0,d=c.arcs.length;h<d;++h)a[h]=hD(c.arcs[h],l);return new vu(a)},MultiPoint:function sje(c,l,a){var h=c.coordinates;if(l&&a)for(var d=0,f=h.length;d<f;++d)P3(h[d],l,a);return new zS(h)},MultiLineString:function aje(c,l){for(var a=[],h=0,d=c.arcs.length;h<d;++h)a[h]=hD(c.arcs[h],l);return new GS(a)},MultiPolygon:function cje(c,l){for(var a=[],h=0,d=c.arcs.length;h<d;++h){for(var f=c.arcs[h],m=[],g=0,y=f.length;g<y;++g)m[g]=hD(f[g],l);a[h]=m}return new wx(a)}};function hD(c,l){for(var h,a=[],d=0,f=c.length;d<f;++d)if(h=c[d],d>0&&a.pop(),h>=0)for(var g=0,y=(m=l[h]).length;g<y;++g)a.push(m[g].slice(0));else{var m;for(g=(m=l[~h]).length-1;g>=0;--g)a.push(m[g].slice(0))}return a}function uje(c,l,a,h,d,f,m){for(var g=c.geometries,y=[],v=0,_=g.length;v<_;++v)y[v]=Lee(g[v],l,a,h,d,f,m);return y}function Lee(c,l,a,h,d,f,m){var g=null,y=c.type;if(y){var v=rje[y];g=zy(g="Point"===y||"MultiPoint"===y?v(c,a,h):v(c,l),!1,m)}var _=new Gy({geometry:g});void 0!==c.id&&_.setId(c.id);var S=c.properties;return d&&(S||(S={}),S[d]=f),S&&_.setProperties(S,!0),_}function dje(c,l,a){for(var h=0,d=0,f=0,m=c.length;f<m;++f){var g=c[f];d+=g[1],g[0]=h+=g[0],g[1]=d,P3(g,l,a)}}function P3(c,l,a){c[0]=c[0]*l[0]+a[0],c[1]=c[1]*l[1]+a[1]}const fje=nje;let pje=(()=>{class c{constructor(){this.privValue=1,this.valueChange=new rt}set value(a){this.privValue!==a&&(this.privValue=a,this.layer?.custom_layer&&this.layer.custom_layer.setRadius(a))}get value(){return this.privValue}ngOnInit(){this.layer.custom_layer.setRadius(this.value)}changeValue(a){const h=parseInt(a.target.value,10);this.value=h,this.valueChange.emit(h),this.layer.custom_layer&&this.layer.custom_layer.setRadius(h)}}return c.\u0275fac=function(a){return new(a||c)},c.\u0275cmp=Be({type:c,selectors:[["app-example-layer-action"]],inputs:{layer:"layer",value:"value"},outputs:{valueChange:"valueChange"},decls:6,vars:2,consts:[[1,"heatmap-range"],["type","range","clrRange","","name","two","min","1","max","50","step","1",1,"ukis-range-input",3,"value","change"]],template:function(a,h){1&a&&(U(0,"clr-range-container",0)(1,"label"),ye(2,"Heatmap radius:"),H(),U(3,"input",1),Me("change",function(f){return h.changeValue(f)}),H(),U(4,"clr-control-helper"),ye(5),H()()),2&a&&(B(3),G("value",h.value),B(2),Zt(" "+h.value))},dependencies:[es,rM,I5e,_Z],styles:[".heatmap-range[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:400}"]}),c})();const Oee={type:"FeatureCollection",features:[{type:"Feature",properties:{height:2},geometry:{type:"Polygon",coordinates:[[[11.539764404296875,48.17707562779612,2],[11.53289794921875,48.13126755117026],[11.51641845703125,48.12301775410865],[11.517791748046875,48.10926514749487],[11.56036376953125,48.11384975871469],[11.564483642578125,48.12301775410865],[11.58233642578125,48.130350972491556],[11.592292785644531,48.14043243818811],[11.594696044921875,48.14730502988628],[11.602935791015625,48.15715413998257],[11.595039367675781,48.1640244926387],[11.59950256347656,48.17226770127996],[11.587142944335938,48.177533502046636],[11.572036743164062,48.177533502046636],[11.539764404296875,48.17707562779612]]]}},{type:"Feature",properties:{height:1},geometry:{type:"Polygon",coordinates:[[[11.605682373046875,48.156238023440835],[11.596412658691406,48.147534100428686],[11.59332275390625,48.13699579726703],[11.583709716796875,48.12851776605501],[11.564826965332031,48.121413473016034],[11.561737060546875,48.11247441829591],[11.575126647949217,48.11155750423242],[11.581993103027344,48.10490938797694],[11.614608764648438,48.11178673428214],[11.620101928710938,48.12462198509838],[11.614952087402344,48.12920522613733],[11.614265441894531,48.13905780942574],[11.61529541015625,48.15165719536032],[11.605682373046875,48.156238023440835]]]}},{type:"Feature",properties:{height:3},geometry:{type:"Polygon",coordinates:[[[11.516075134277344,48.12347611093252],[11.532554626464844,48.131496693283744],[11.538734436035156,48.176388808753124],[11.52191162109375,48.175701980509444],[11.511268615722656,48.17249666038475],[11.507148742675781,48.16379549570767],[11.492729187011719,48.165398452755674],[11.486892700195312,48.16379549570767],[11.458740234375,48.164482483433744],[11.457366943359375,48.15188624647704],[11.455307006835938,48.148221305921446],[11.436767578124998,48.133329793382636],[11.430244445800781,48.12874692043826],[11.443977355957031,48.12828861064926],[11.45050048828125,48.12553866602599],[11.4862060546875,48.124392812310205],[11.503028869628904,48.12553866602599],[11.516075134277344,48.12347611093252]]]}},{type:"Feature",properties:{height:0},geometry:{type:"Polygon",coordinates:[[[11.517448425292969,48.10972362702285],[11.487579345703125,48.095738161288885],[11.488265991210938,48.08381312049231],[11.485176086425781,48.075785093732456],[11.487922668457031,48.07486752519069],[11.493759155273438,48.07693203139914],[11.506805419921875,48.0762438718672],[11.517448425292969,48.06890293081563],[11.536331176757812,48.068214663899795],[11.538734436035156,48.07349114169717],[11.540107727050781,48.08427182703979],[11.548004150390625,48.09367440979962],[11.549720764160154,48.10559716402152],[11.559333801269531,48.11407897853892],[11.517448425292969,48.10972362702285]]]}}]},L3={type:"FeatureCollection",features:[{type:"Feature",properties:{pid:1},geometry:{type:"Point",coordinates:[10.9423828125,49.001843917978526]}},{type:"Feature",properties:{pid:2},geometry:{type:"Point",coordinates:[11.18408203125,49.088257784724675]}},{type:"Feature",properties:{pid:3},geometry:{type:"Point",coordinates:[11.030273437499998,49.35375571830993]}},{type:"Feature",properties:{pid:4},geometry:{type:"Point",coordinates:[10.72265625,49.24629332459796]}},{type:"Feature",properties:{pid:5},geometry:{type:"Point",coordinates:[12.76611328125,48.011975126709956]}},{type:"Feature",properties:{pid:6},geometry:{type:"Point",coordinates:[13.55712890625,49.15296965617042]}},{type:"Feature",properties:{pid:7},geometry:{type:"Point",coordinates:[13.3154296875,48.545705491847464]}},{type:"Feature",properties:{pid:8},geometry:{type:"Point",coordinates:[4.482421875,49.224772722794825]}}]},mje={type:"FeatureCollection",features:[{type:"Feature",properties:{name:"Feature 1 - Polygon"},geometry:{type:"Polygon",coordinates:[[[7.91015625,50.233151832472245],[9.140625,47.81315451752768],[13.33740234375,48.28319289548349],[13.7109375,50.17689812200107],[7.91015625,50.233151832472245]]]}}]},gje={type:"FeatureCollection",features:[{type:"Feature",id:"S1A_IW_GRDH_1SDV_20200913T165301_20200913T165326_034343_03FE2F_9368_WAVE.3",geometry:{type:"Point",coordinates:[14.354708,54.004536]},geometry_name:"geom",properties:{lat:"54.004536",lon:"14.354708",id:"3",timestamp:"2020-09-13T16:52:57Z",SWH:"1.13",plength:"209.7",windSpeed:"4.25",pdirection:"125.0"}},{type:"Feature",id:"S1A_IW_GRDH_1SDV_20200913T165301_20200913T165326_034343_03FE2F_9368_WAVE.4",geometry:{type:"Point",coordinates:[14.445045,54.013187]},geometry_name:"geom",properties:{lat:"54.013187",lon:"14.445045",id:"4",timestamp:"2020-09-13T16:52:57Z",SWH:"0.91",plength:"251.0",windSpeed:"3.75",pdirection:"11.3"}},{type:"Feature",id:"S1A_IW_GRDH_1SDV_20200913T165301_20200913T165326_034343_03FE2F_9368_WAVE.5",geometry:{type:"Point",coordinates:[14.535383,54.021835]},geometry_name:"geom",properties:{lat:"54.021835",lon:"14.535383",id:"5",timestamp:"2020-09-13T16:52:57Z",SWH:"1.08",plength:"475.4",windSpeed:"4.00",pdirection:"21.8"}},{type:"Feature",id:"S1A_IW_GRDH_1SDV_20200913T165301_20200913T165326_034343_03FE2F_9368_WAVE.6",geometry:{type:"Point",coordinates:[14.625798,54.030346]},geometry_name:"geom",properties:{lat:"54.030346",lon:"14.625798",id:"6",timestamp:"2020-09-13T16:52:57Z",SWH:"0.99",plength:"194.6",windSpeed:"4.00",pdirection:"171.3"}},{type:"Feature",id:"S1A_IW_GRDH_1SDV_20200913T165301_20200913T165326_034343_03FE2F_9368_WAVE.7",geometry:{type:"Point",coordinates:[14.716214,54.038853]},geometry_name:"geom",properties:{lat:"54.038853",lon:"14.716214",id:"7",timestamp:"2020-09-13T16:52:57Z",SWH:"0.90",plength:"475.4",windSpeed:"4.05",pdirection:"21.8"}},{type:"Feature",id:"S1A_IW_GRDH_1SDV_20200913T165301_20200913T165326_034343_03FE2F_9368_WAVE.8",geometry:{type:"Point",coordinates:[13.978081,54.022915]},geometry_name:"geom",properties:{lat:"54.022915",lon:"13.978081",id:"8",timestamp:"2020-09-13T16:52:57Z",SWH:"0.66",plength:"475.4",windSpeed:"3.50",pdirection:"21.8"}},{type:"Feature",id:"S1A_IW_GRDH_1SDV_20200913T165301_20200913T165326_034343_03FE2F_9368_WAVE.9",geometry:{type:"Point",coordinates:[14.068372,54.031853]},geometry_name:"geom",properties:{lat:"54.031853",lon:"14.068372",id:"9",timestamp:"2020-09-13T16:52:57Z",SWH:"1.03",plength:"452.5",windSpeed:"4.20",pdirection:"135.0"}},{type:"Feature",id:"S1A_IW_GRDH_1SDV_20200913T165301_20200913T165326_034343_03FE2F_9368_WAVE.10",geometry:{type:"Point",coordinates:[14.158684,54.040756]},geometry_name:"geom",properties:{lat:"54.040756",lon:"14.158684",id:"10",timestamp:"2020-09-13T16:52:57Z",SWH:"0.47",plength:"199.9",windSpeed:"4.40",pdirection:"51.3"}},{type:"Feature",id:"S1A_IW_GRDH_1SDV_20200913T165301_20200913T165326_034343_03FE2F_9368_WAVE.11",geometry:{type:"Point",coordinates:[14.249058,54.049553]},geometry_name:"geom",properties:{lat:"54.049553",lon:"14.249058",id:"11",timestamp:"2020-09-13T16:52:57Z",SWH:"1.36",plength:"420.9",windSpeed:"4.40",pdirection:"80.5"}},{type:"Feature",id:"S1A_IW_GRDH_1SDV_20200913T165301_20200913T165326_034343_03FE2F_9368_WAVE.12",geometry:{type:"Point",coordinates:[14.339441,54.058331]},geometry_name:"geom",properties:{lat:"54.058331",lon:"14.339441",id:"12",timestamp:"2020-09-13T16:52:57Z",SWH:"0.94",plength:"134.6",windSpeed:"3.95",pdirection:"3.0"}},{type:"Feature",id:"S1A_IW_GRDH_1SDV_20200913T165301_20200913T165326_034343_03FE2F_9368_WAVE.13",geometry:{type:"Point",coordinates:[14.429894,54.066982]},geometry_name:"geom",properties:{lat:"54.066982",lon:"14.429894",id:"13",timestamp:"2020-09-13T16:52:57Z",SWH:"1.01",plength:"351.6",windSpeed:"4.15",pdirection:"164.1"}},{type:"Feature",id:"S1A_IW_GRDH_1SDV_20200913T165301_20200913T165326_034343_03FE2F_9368_WAVE.14",geometry:{type:"Point",coordinates:[14.52035,54.075634]},geometry_name:"geom",properties:{lat:"54.075634",lon:"14.520350",id:"14",timestamp:"2020-09-13T16:52:57Z",SWH:"1.16",plength:"310.4",windSpeed:"4.45",pdirection:"166.0"}},{type:"Feature",id:"S1A_IW_GRDH_1SDV_20200913T165301_20200913T165326_034343_03FE2F_9368_WAVE.15",geometry:{type:"Point",coordinates:[14.610882,54.084145]},geometry_name:"geom",properties:{lat:"54.084145",lon:"14.610882",id:"15",timestamp:"2020-09-13T16:52:57Z",SWH:"1.00",plength:"210.4",windSpeed:"4.05",pdirection:"170.5"}},{type:"Feature",id:"S1A_IW_GRDH_1SDV_20200913T165301_20200913T165326_034343_03FE2F_9368_WAVE.16",geometry:{type:"Point",coordinates:[14.701414,54.092651]},geometry_name:"geom",properties:{lat:"54.092651",lon:"14.701414",id:"16",timestamp:"2020-09-13T16:52:57Z",SWH:"0.98",plength:"254.7",windSpeed:"4.40",pdirection:"174.3"}},{type:"Feature",id:"S1A_IW_GRDH_1SDV_20200913T165301_20200913T165326_034343_03FE2F_9368_WAVE.17",geometry:{type:"Point",coordinates:[14.792017,54.101032]},geometry_name:"geom",properties:{lat:"54.101032",lon:"14.792017",id:"17",timestamp:"2020-09-13T16:52:57Z",SWH:"1.10",plength:"475.4",windSpeed:"4.45",pdirection:"158.2"}},{type:"Feature",id:"S1A_IW_GRDH_1SDV_20200913T165301_20200913T165326_034343_03FE2F_9368_WAVE.18",geometry:{type:"Point",coordinates:[14.882627,54.109398]},geometry_name:"geom",properties:{lat:"54.109398",lon:"14.882627",id:"18",timestamp:"2020-09-13T16:52:57Z",SWH:"0.94",plength:"188.2",windSpeed:"4.25",pdirection:"107.1"}},{type:"Feature",id:"S1A_IW_GRDH_1SDV_20200913T165301_20200913T165326_034343_03FE2F_9368_WAVE.19",geometry:{type:"Point",coordinates:[14.973297,54.117649]},geometry_name:"geom",properties:{lat:"54.117649",lon:"14.973297",id:"19",timestamp:"2020-09-13T16:52:57Z",SWH:"0.91",plength:"404.8",windSpeed:"4.00",pdirection:"161.6"}},{type:"Feature",id:"S1A_IW_GRDH_1SDV_20200913T165301_20200913T165326_034343_03FE2F_9368_WAVE.20",geometry:{type:"Point",coordinates:[15.063984,54.12587]},geometry_name:"geom",properties:{lat:"54.125870",lon:"15.063984",id:"20",timestamp:"2020-09-13T16:52:57Z",SWH:"0.90",plength:"170.3",windSpeed:"4.10",pdirection:"176.2"}},{type:"Feature",id:"S1A_IW_GRDH_1SDV_20200913T165301_20200913T165326_034343_03FE2F_9368_WAVE.21",geometry:{type:"Point",coordinates:[15.154721,54.133991]},geometry_name:"geom",properties:{lat:"54.133991",lon:"15.154721",id:"21",timestamp:"2020-09-13T16:52:57Z",SWH:"0.69",plength:"475.4",windSpeed:"4.00",pdirection:"21.8"}},{type:"Feature",id:"S1A_IW_GRDH_1SDV_20200913T165301_20200913T165326_034343_03FE2F_9368_WAVE.22",geometry:{type:"Point",coordinates:[14.052757,54.085644]},geometry_name:"geom",properties:{lat:"54.085644",lon:"14.052757",id:"22",timestamp:"2020-09-13T16:52:57Z",SWH:"0.28",plength:"475.4",windSpeed:"4.25",pdirection:"21.8"}},{type:"Feature",id:"S1A_IW_GRDH_1SDV_20200913T165301_20200913T165326_034343_03FE2F_9368_WAVE.26",geometry:{type:"Point",coordinates:[14.414745,54.120781]},geometry_name:"geom",properties:{lat:"54.120781",lon:"14.414745",id:"26",timestamp:"2020-09-13T16:52:57Z",SWH:"1.10",plength:"129.3",windSpeed:"4.20",pdirection:"45.0"}},{type:"Feature",id:"S1A_IW_GRDH_1SDV_20200913T165301_20200913T165326_034343_03FE2F_9368_WAVE.27",geometry:{type:"Point",coordinates:[14.505316,54.129433]},geometry_name:"geom",properties:{lat:"54.129433",lon:"14.505316",id:"27",timestamp:"2020-09-13T16:52:57Z",SWH:"0.50",plength:"310.4",windSpeed:"4.60",pdirection:"14.0"}}]};let yje=(()=>{class c{constructor(){this.sunlightForm=new vv({x:new If(0,Db.required),y:new If(0,Db.required)})}ngOnInit(){this.sunlightForm.valueChanges.subscribe(a=>{this.changeHandler(parseInt(a.x.toString(),10)/100,parseInt(a.y.toString(),10)/100)})}}return c.\u0275fac=function(a){return new(a||c)},c.\u0275cmp=Be({type:c,selectors:[["app-sunlight"]],inputs:{changeHandler:"changeHandler"},decls:15,vars:1,consts:[["clrForm","","clrLayout","horizontal",3,"formGroup"],["type","range","min","-100","max","100","value","0","clrInput","","formControlName","x",1,"ukis-range-input"],["type","range","min","-100","max","100","value","0","clrInput","","formControlName","y",1,"ukis-range-input"]],template:function(a,h){1&a&&(U(0,"form",0)(1,"label"),ye(2,"Sun position"),H(),U(3,"clr-input-container")(4,"label"),ye(5,"x"),H(),xe(6,"input",1),U(7,"clr-control-helper"),ye(8,"east -> west"),H()(),U(9,"clr-input-container")(10,"label"),ye(11,"y"),H(),xe(12,"input",2),U(13,"clr-control-helper"),ye(14,"south -> north"),H()()()),2&a&&G("formGroup",h.sunlightForm)},dependencies:[es,rM,TF,oZ,uM,tT,WE,Gl,Nb,Pa,kE,_v,qE]}),c})(),vje=(()=>{class c{constructor(){this.interpolationForm=new vv({power:new If(2,Db.required),smooth:new If(!0,Db.required),labels:new If(!1,Db.required)})}ngOnInit(){this.interpolationForm.valueChanges.subscribe(a=>{this.changeHandler(a.power,a.smooth,a.labels)})}}return c.\u0275fac=function(a){return new(a||c)},c.\u0275cmp=Be({type:c,selectors:[["app-interpolation-settings"]],inputs:{changeHandler:"changeHandler"},decls:21,vars:1,consts:[["clrForm","","clrLayout","vertical",3,"formGroup"],["type","range","min","1","max","7","value","1","clrInput","","formControlName","power",1,"ukis-range-input"],["type","checkbox","clrCheckbox","","name","options","value","true","formControlName","smooth",1,"ukis-range-input"],["type","checkbox","clrCheckbox","","name","options","value","false","formControlName","labels",1,"ukis-range-input"]],template:function(a,h){1&a&&(U(0,"form",0)(1,"clr-input-container")(2,"label"),ye(3,"Power"),H(),xe(4,"input",1),U(5,"clr-control-helper"),ye(6,"inverse distance weighting power"),H()(),U(7,"clr-checkbox-container")(8,"label"),ye(9,"Smoothing"),H(),U(10,"clr-checkbox-wrapper"),xe(11,"input",2),U(12,"label"),ye(13,"Smoothing"),H()()(),U(14,"clr-checkbox-container")(15,"label"),ye(16,"Labels"),H(),U(17,"clr-checkbox-wrapper"),xe(18,"input",3),U(19,"label"),ye(20,"Show labels"),H()()()()),2&a&&G("formGroup",h.interpolationForm)},dependencies:[es,rM,TF,oZ,oM,W4e,sM,uM,tT,WE,Gl,Nb,gv,Pa,kE,_v,qE]}),c})();const Vm=1e3,yo=1001,us=1003,Fi=1006,zf=1008,Hf=1009,WT=1012,jf=1015,l_=1016,c_=1020,Bo=1023,Bm=1026,u_=1027,XT=2300,h_=2301,d_=2400,f_=2401,Wf=3e3,di=3001,qT=35044,$T=35048;class Xf{addEventListener(l,a){void 0===this._listeners&&(this._listeners={});const h=this._listeners;void 0===h[l]&&(h[l]=[]),-1===h[l].indexOf(a)&&h[l].push(a)}hasEventListener(l,a){if(void 0===this._listeners)return!1;const h=this._listeners;return void 0!==h[l]&&-1!==h[l].indexOf(a)}removeEventListener(l,a){if(void 0===this._listeners)return;const d=this._listeners[l];if(void 0!==d){const f=d.indexOf(a);-1!==f&&d.splice(f,1)}}dispatchEvent(l){if(void 0===this._listeners)return;const h=this._listeners[l.type];if(void 0!==h){l.target=this;const d=h.slice(0);for(let f=0,m=d.length;f<m;f++)d[f].call(this,l);l.target=null}}}const vo=[];for(let c=0;c<256;c++)vo[c]=(c<16?"0":"")+c.toString(16);let SD=1234567;const Gm=Math.PI/180,YT=180/Math.PI;function fl(){const c=4294967295*Math.random()|0,l=4294967295*Math.random()|0,a=4294967295*Math.random()|0,h=4294967295*Math.random()|0;return(vo[255&c]+vo[c>>8&255]+vo[c>>16&255]+vo[c>>24&255]+"-"+vo[255&l]+vo[l>>8&255]+"-"+vo[l>>16&15|64]+vo[l>>24&255]+"-"+vo[63&a|128]+vo[a>>8&255]+"-"+vo[a>>16&255]+vo[a>>24&255]+vo[255&h]+vo[h>>8&255]+vo[h>>16&255]+vo[h>>24&255]).toUpperCase()}function _o(c,l,a){return Math.max(l,Math.min(a,c))}function X3(c,l){return(c%l+l)%l}function ZT(c,l,a){return(1-a)*c+a*l}function q3(c){return 0==(c&c-1)&&0!==c}function mte(c){return Math.pow(2,Math.ceil(Math.log(c)/Math.LN2))}function gte(c){return Math.pow(2,Math.floor(Math.log(c)/Math.LN2))}var RWe=Object.freeze({__proto__:null,DEG2RAD:Gm,RAD2DEG:YT,generateUUID:fl,clamp:_o,euclideanModulo:X3,mapLinear:function vWe(c,l,a,h,d){return h+(c-l)*(d-h)/(a-l)},inverseLerp:function _We(c,l,a){return c!==l?(a-c)/(l-c):0},lerp:ZT,damp:function SWe(c,l,a,h){return ZT(c,l,1-Math.exp(-a*h))},pingpong:function bWe(c,l=1){return l-Math.abs(X3(c,2*l)-l)},smoothstep:function TWe(c,l,a){return c<=l?0:c>=a?1:(c=(c-l)/(a-l))*c*(3-2*c)},smootherstep:function wWe(c,l,a){return c<=l?0:c>=a?1:(c=(c-l)/(a-l))*c*c*(c*(6*c-15)+10)},randInt:function CWe(c,l){return c+Math.floor(Math.random()*(l-c+1))},randFloat:function xWe(c,l){return c+Math.random()*(l-c)},randFloatSpread:function EWe(c){return c*(.5-Math.random())},seededRandom:function MWe(c){return void 0!==c&&(SD=c%2147483647),SD=16807*SD%2147483647,(SD-1)/2147483646},degToRad:function DWe(c){return c*Gm},radToDeg:function AWe(c){return c*YT},isPowerOfTwo:q3,ceilPowerOfTwo:mte,floorPowerOfTwo:gte,setQuaternionFromProperEuler:function IWe(c,l,a,h,d){const f=Math.cos,m=Math.sin,g=f(a/2),y=m(a/2),v=f((l+h)/2),_=m((l+h)/2),S=f((l-h)/2),b=m((l-h)/2),T=f((h-l)/2),x=m((h-l)/2);switch(d){case"XYX":c.set(g*_,y*S,y*b,g*v);break;case"YZY":c.set(y*b,g*_,y*S,g*v);break;case"ZXZ":c.set(y*S,y*b,g*_,g*v);break;case"XZX":c.set(g*_,y*x,y*T,g*v);break;case"YXY":c.set(y*T,g*_,y*x,g*v);break;case"ZYZ":c.set(y*x,y*T,g*_,g*v);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+d)}}});class Je{constructor(l=0,a=0){this.x=l,this.y=a}get width(){return this.x}set width(l){this.x=l}get height(){return this.y}set height(l){this.y=l}set(l,a){return this.x=l,this.y=a,this}setScalar(l){return this.x=l,this.y=l,this}setX(l){return this.x=l,this}setY(l){return this.y=l,this}setComponent(l,a){switch(l){case 0:this.x=a;break;case 1:this.y=a;break;default:throw new Error("index is out of range: "+l)}return this}getComponent(l){switch(l){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+l)}}clone(){return new this.constructor(this.x,this.y)}copy(l){return this.x=l.x,this.y=l.y,this}add(l,a){return void 0!==a?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(l,a)):(this.x+=l.x,this.y+=l.y,this)}addScalar(l){return this.x+=l,this.y+=l,this}addVectors(l,a){return this.x=l.x+a.x,this.y=l.y+a.y,this}addScaledVector(l,a){return this.x+=l.x*a,this.y+=l.y*a,this}sub(l,a){return void 0!==a?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(l,a)):(this.x-=l.x,this.y-=l.y,this)}subScalar(l){return this.x-=l,this.y-=l,this}subVectors(l,a){return this.x=l.x-a.x,this.y=l.y-a.y,this}multiply(l){return this.x*=l.x,this.y*=l.y,this}multiplyScalar(l){return this.x*=l,this.y*=l,this}divide(l){return this.x/=l.x,this.y/=l.y,this}divideScalar(l){return this.multiplyScalar(1/l)}applyMatrix3(l){const a=this.x,h=this.y,d=l.elements;return this.x=d[0]*a+d[3]*h+d[6],this.y=d[1]*a+d[4]*h+d[7],this}min(l){return this.x=Math.min(this.x,l.x),this.y=Math.min(this.y,l.y),this}max(l){return this.x=Math.max(this.x,l.x),this.y=Math.max(this.y,l.y),this}clamp(l,a){return this.x=Math.max(l.x,Math.min(a.x,this.x)),this.y=Math.max(l.y,Math.min(a.y,this.y)),this}clampScalar(l,a){return this.x=Math.max(l,Math.min(a,this.x)),this.y=Math.max(l,Math.min(a,this.y)),this}clampLength(l,a){const h=this.length();return this.divideScalar(h||1).multiplyScalar(Math.max(l,Math.min(a,h)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(l){return this.x*l.x+this.y*l.y}cross(l){return this.x*l.y-this.y*l.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(l){return Math.sqrt(this.distanceToSquared(l))}distanceToSquared(l){const a=this.x-l.x,h=this.y-l.y;return a*a+h*h}manhattanDistanceTo(l){return Math.abs(this.x-l.x)+Math.abs(this.y-l.y)}setLength(l){return this.normalize().multiplyScalar(l)}lerp(l,a){return this.x+=(l.x-this.x)*a,this.y+=(l.y-this.y)*a,this}lerpVectors(l,a,h){return this.x=l.x+(a.x-l.x)*h,this.y=l.y+(a.y-l.y)*h,this}equals(l){return l.x===this.x&&l.y===this.y}fromArray(l,a=0){return this.x=l[a],this.y=l[a+1],this}toArray(l=[],a=0){return l[a]=this.x,l[a+1]=this.y,l}fromBufferAttribute(l,a,h){return void 0!==h&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=l.getX(a),this.y=l.getY(a),this}rotateAround(l,a){const h=Math.cos(a),d=Math.sin(a),f=this.x-l.x,m=this.y-l.y;return this.x=f*h-m*d+l.x,this.y=f*d+m*h+l.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}Je.prototype.isVector2=!0;class ro{constructor(){this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}set(l,a,h,d,f,m,g,y,v){const _=this.elements;return _[0]=l,_[1]=d,_[2]=g,_[3]=a,_[4]=f,_[5]=y,_[6]=h,_[7]=m,_[8]=v,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(l){const a=this.elements,h=l.elements;return a[0]=h[0],a[1]=h[1],a[2]=h[2],a[3]=h[3],a[4]=h[4],a[5]=h[5],a[6]=h[6],a[7]=h[7],a[8]=h[8],this}extractBasis(l,a,h){return l.setFromMatrix3Column(this,0),a.setFromMatrix3Column(this,1),h.setFromMatrix3Column(this,2),this}setFromMatrix4(l){const a=l.elements;return this.set(a[0],a[4],a[8],a[1],a[5],a[9],a[2],a[6],a[10]),this}multiply(l){return this.multiplyMatrices(this,l)}premultiply(l){return this.multiplyMatrices(l,this)}multiplyMatrices(l,a){const h=l.elements,d=a.elements,f=this.elements,m=h[0],g=h[3],y=h[6],v=h[1],_=h[4],S=h[7],b=h[2],T=h[5],x=h[8],E=d[0],D=d[3],I=d[6],M=d[1],L=d[4],P=d[7],F=d[2],V=d[5],z=d[8];return f[0]=m*E+g*M+y*F,f[3]=m*D+g*L+y*V,f[6]=m*I+g*P+y*z,f[1]=v*E+_*M+S*F,f[4]=v*D+_*L+S*V,f[7]=v*I+_*P+S*z,f[2]=b*E+T*M+x*F,f[5]=b*D+T*L+x*V,f[8]=b*I+T*P+x*z,this}multiplyScalar(l){const a=this.elements;return a[0]*=l,a[3]*=l,a[6]*=l,a[1]*=l,a[4]*=l,a[7]*=l,a[2]*=l,a[5]*=l,a[8]*=l,this}determinant(){const l=this.elements,a=l[0],h=l[1],d=l[2],f=l[3],m=l[4],g=l[5],y=l[6],v=l[7],_=l[8];return a*m*_-a*g*v-h*f*_+h*g*y+d*f*v-d*m*y}invert(){const l=this.elements,a=l[0],h=l[1],d=l[2],f=l[3],m=l[4],g=l[5],y=l[6],v=l[7],_=l[8],S=_*m-g*v,b=g*y-_*f,T=v*f-m*y,x=a*S+h*b+d*T;if(0===x)return this.set(0,0,0,0,0,0,0,0,0);const E=1/x;return l[0]=S*E,l[1]=(d*v-_*h)*E,l[2]=(g*h-d*m)*E,l[3]=b*E,l[4]=(_*a-d*y)*E,l[5]=(d*f-g*a)*E,l[6]=T*E,l[7]=(h*y-v*a)*E,l[8]=(m*a-h*f)*E,this}transpose(){let l;const a=this.elements;return l=a[1],a[1]=a[3],a[3]=l,l=a[2],a[2]=a[6],a[6]=l,l=a[5],a[5]=a[7],a[7]=l,this}getNormalMatrix(l){return this.setFromMatrix4(l).invert().transpose()}transposeIntoArray(l){const a=this.elements;return l[0]=a[0],l[1]=a[3],l[2]=a[6],l[3]=a[1],l[4]=a[4],l[5]=a[7],l[6]=a[2],l[7]=a[5],l[8]=a[8],this}setUvTransform(l,a,h,d,f,m,g){const y=Math.cos(f),v=Math.sin(f);return this.set(h*y,h*v,-h*(y*m+v*g)+m+l,-d*v,d*y,-d*(-v*m+y*g)+g+a,0,0,1),this}scale(l,a){const h=this.elements;return h[0]*=l,h[3]*=l,h[6]*=l,h[1]*=a,h[4]*=a,h[7]*=a,this}rotate(l){const a=Math.cos(l),h=Math.sin(l),d=this.elements,f=d[0],m=d[3],g=d[6],y=d[1],v=d[4],_=d[7];return d[0]=a*f+h*y,d[3]=a*m+h*v,d[6]=a*g+h*_,d[1]=-h*f+a*y,d[4]=-h*m+a*v,d[7]=-h*g+a*_,this}translate(l,a){const h=this.elements;return h[0]+=l*h[2],h[3]+=l*h[5],h[6]+=l*h[8],h[1]+=a*h[2],h[4]+=a*h[5],h[7]+=a*h[8],this}equals(l){const a=this.elements,h=l.elements;for(let d=0;d<9;d++)if(a[d]!==h[d])return!1;return!0}fromArray(l,a=0){for(let h=0;h<9;h++)this.elements[h]=l[h+a];return this}toArray(l=[],a=0){const h=this.elements;return l[a]=h[0],l[a+1]=h[1],l[a+2]=h[2],l[a+3]=h[3],l[a+4]=h[4],l[a+5]=h[5],l[a+6]=h[6],l[a+7]=h[7],l[a+8]=h[8],l}clone(){return(new this.constructor).fromArray(this.elements)}}function yte(c){for(let l=c.length-1;l>=0;--l)if(c[l]>65535)return!0;return!1}function KT(c){return document.createElementNS("http://www.w3.org/1999/xhtml",c)}ro.prototype.isMatrix3=!0,Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array;const vte={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},qc={h:0,s:0,l:0},bD={h:0,s:0,l:0};function $3(c,l,a){return a<0&&(a+=1),a>1&&(a-=1),a<1/6?c+6*(l-c)*a:a<.5?l:a<2/3?c+6*(l-c)*(2/3-a):c}function m_(c){return c<.04045?.0773993808*c:Math.pow(.9478672986*c+.0521327014,2.4)}function Y3(c){return c<.0031308?12.92*c:1.055*Math.pow(c,.41666)-.055}let g_,At=(()=>{class c{constructor(a,h,d){return void 0===h&&void 0===d?this.set(a):this.setRGB(a,h,d)}set(a){return a&&a.isColor?this.copy(a):"number"==typeof a?this.setHex(a):"string"==typeof a&&this.setStyle(a),this}setScalar(a){return this.r=a,this.g=a,this.b=a,this}setHex(a){return a=Math.floor(a),this.r=(a>>16&255)/255,this.g=(a>>8&255)/255,this.b=(255&a)/255,this}setRGB(a,h,d){return this.r=a,this.g=h,this.b=d,this}setHSL(a,h,d){if(a=X3(a,1),h=_o(h,0,1),d=_o(d,0,1),0===h)this.r=this.g=this.b=d;else{const f=d<=.5?d*(1+h):d+h-d*h,m=2*d-f;this.r=$3(m,f,a+1/3),this.g=$3(m,f,a),this.b=$3(m,f,a-1/3)}return this}setStyle(a){function h(f){void 0!==f&&parseFloat(f)<1&&console.warn("THREE.Color: Alpha component of "+a+" will be ignored.")}let d;if(d=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(a)){let f;const g=d[2];switch(d[1]){case"rgb":case"rgba":if(f=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(g))return this.r=Math.min(255,parseInt(f[1],10))/255,this.g=Math.min(255,parseInt(f[2],10))/255,this.b=Math.min(255,parseInt(f[3],10))/255,h(f[4]),this;if(f=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(g))return this.r=Math.min(100,parseInt(f[1],10))/100,this.g=Math.min(100,parseInt(f[2],10))/100,this.b=Math.min(100,parseInt(f[3],10))/100,h(f[4]),this;break;case"hsl":case"hsla":if(f=/^\s*(\d*\.?\d+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(g)){const y=parseFloat(f[1])/360,v=parseInt(f[2],10)/100,_=parseInt(f[3],10)/100;return h(f[4]),this.setHSL(y,v,_)}}}else if(d=/^\#([A-Fa-f\d]+)$/.exec(a)){const f=d[1],m=f.length;if(3===m)return this.r=parseInt(f.charAt(0)+f.charAt(0),16)/255,this.g=parseInt(f.charAt(1)+f.charAt(1),16)/255,this.b=parseInt(f.charAt(2)+f.charAt(2),16)/255,this;if(6===m)return this.r=parseInt(f.charAt(0)+f.charAt(1),16)/255,this.g=parseInt(f.charAt(2)+f.charAt(3),16)/255,this.b=parseInt(f.charAt(4)+f.charAt(5),16)/255,this}return a&&a.length>0?this.setColorName(a):this}setColorName(a){const h=vte[a.toLowerCase()];return void 0!==h?this.setHex(h):console.warn("THREE.Color: Unknown color "+a),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(a){return this.r=a.r,this.g=a.g,this.b=a.b,this}copySRGBToLinear(a){return this.r=m_(a.r),this.g=m_(a.g),this.b=m_(a.b),this}copyLinearToSRGB(a){return this.r=Y3(a.r),this.g=Y3(a.g),this.b=Y3(a.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0}getHexString(){return("000000"+this.getHex().toString(16)).slice(-6)}getHSL(a){const h=this.r,d=this.g,f=this.b,m=Math.max(h,d,f),g=Math.min(h,d,f);let y,v;const _=(g+m)/2;if(g===m)y=0,v=0;else{const S=m-g;switch(v=_<=.5?S/(m+g):S/(2-m-g),m){case h:y=(d-f)/S+(d<f?6:0);break;case d:y=(f-h)/S+2;break;case f:y=(h-d)/S+4}y/=6}return a.h=y,a.s=v,a.l=_,a}getStyle(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"}offsetHSL(a,h,d){return this.getHSL(qc),qc.h+=a,qc.s+=h,qc.l+=d,this.setHSL(qc.h,qc.s,qc.l),this}add(a){return this.r+=a.r,this.g+=a.g,this.b+=a.b,this}addColors(a,h){return this.r=a.r+h.r,this.g=a.g+h.g,this.b=a.b+h.b,this}addScalar(a){return this.r+=a,this.g+=a,this.b+=a,this}sub(a){return this.r=Math.max(0,this.r-a.r),this.g=Math.max(0,this.g-a.g),this.b=Math.max(0,this.b-a.b),this}multiply(a){return this.r*=a.r,this.g*=a.g,this.b*=a.b,this}multiplyScalar(a){return this.r*=a,this.g*=a,this.b*=a,this}lerp(a,h){return this.r+=(a.r-this.r)*h,this.g+=(a.g-this.g)*h,this.b+=(a.b-this.b)*h,this}lerpColors(a,h,d){return this.r=a.r+(h.r-a.r)*d,this.g=a.g+(h.g-a.g)*d,this.b=a.b+(h.b-a.b)*d,this}lerpHSL(a,h){this.getHSL(qc),a.getHSL(bD);const d=ZT(qc.h,bD.h,h),f=ZT(qc.s,bD.s,h),m=ZT(qc.l,bD.l,h);return this.setHSL(d,f,m),this}equals(a){return a.r===this.r&&a.g===this.g&&a.b===this.b}fromArray(a,h=0){return this.r=a[h],this.g=a[h+1],this.b=a[h+2],this}toArray(a=[],h=0){return a[h]=this.r,a[h+1]=this.g,a[h+2]=this.b,a}fromBufferAttribute(a,h){return this.r=a.getX(h),this.g=a.getY(h),this.b=a.getZ(h),!0===a.normalized&&(this.r/=255,this.g/=255,this.b/=255),this}toJSON(){return this.getHex()}}return c.NAMES=vte,c})();At.prototype.isColor=!0,At.prototype.r=1,At.prototype.g=1,At.prototype.b=1;class zm{static getDataURL(l){if(/^data:/i.test(l.src)||typeof HTMLCanvasElement>"u")return l.src;let a;if(l instanceof HTMLCanvasElement)a=l;else{void 0===g_&&(g_=KT("canvas")),g_.width=l.width,g_.height=l.height;const h=g_.getContext("2d");l instanceof ImageData?h.putImageData(l,0,0):h.drawImage(l,0,0,l.width,l.height),a=g_}return a.width>2048||a.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",l),a.toDataURL("image/jpeg",.6)):a.toDataURL("image/png")}static sRGBToLinear(l){if(typeof HTMLImageElement<"u"&&l instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&l instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&l instanceof ImageBitmap){const a=KT("canvas");a.width=l.width,a.height=l.height;const h=a.getContext("2d");h.drawImage(l,0,0,l.width,l.height);const d=h.getImageData(0,0,l.width,l.height),f=d.data;for(let m=0;m<f.length;m++)f[m]=255*m_(f[m]/255);return h.putImageData(d,0,0),a}if(l.data){const a=l.data.slice(0);for(let h=0;h<a.length;h++)a[h]=a instanceof Uint8Array||a instanceof Uint8ClampedArray?Math.floor(255*m_(a[h]/255)):m_(a[h]);return{data:a,width:l.width,height:l.height}}return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),l}}let LWe=0;class hs extends Xf{constructor(l=hs.DEFAULT_IMAGE,a=hs.DEFAULT_MAPPING,h=yo,d=yo,f=Fi,m=zf,g=Bo,y=Hf,v=1,_=Wf){super(),Object.defineProperty(this,"id",{value:LWe++}),this.uuid=fl(),this.name="",this.image=l,this.mipmaps=[],this.mapping=a,this.wrapS=h,this.wrapT=d,this.magFilter=f,this.minFilter=m,this.anisotropy=v,this.format=g,this.internalFormat=null,this.type=y,this.offset=new Je(0,0),this.repeat=new Je(1,1),this.center=new Je(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new ro,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=_,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return(new this.constructor).copy(this)}copy(l){return this.name=l.name,this.image=l.image,this.mipmaps=l.mipmaps.slice(0),this.mapping=l.mapping,this.wrapS=l.wrapS,this.wrapT=l.wrapT,this.magFilter=l.magFilter,this.minFilter=l.minFilter,this.anisotropy=l.anisotropy,this.format=l.format,this.internalFormat=l.internalFormat,this.type=l.type,this.offset.copy(l.offset),this.repeat.copy(l.repeat),this.center.copy(l.center),this.rotation=l.rotation,this.matrixAutoUpdate=l.matrixAutoUpdate,this.matrix.copy(l.matrix),this.generateMipmaps=l.generateMipmaps,this.premultiplyAlpha=l.premultiplyAlpha,this.flipY=l.flipY,this.unpackAlignment=l.unpackAlignment,this.encoding=l.encoding,this.userData=JSON.parse(JSON.stringify(l.userData)),this}toJSON(l){const a=void 0===l||"string"==typeof l;if(!a&&void 0!==l.textures[this.uuid])return l.textures[this.uuid];const h={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};if(void 0!==this.image){const d=this.image;if(void 0===d.uuid&&(d.uuid=fl()),!a&&void 0===l.images[d.uuid]){let f;if(Array.isArray(d)){f=[];for(let m=0,g=d.length;m<g;m++)f.push(Z3(d[m].isDataTexture?d[m].image:d[m]))}else f=Z3(d);l.images[d.uuid]={uuid:d.uuid,url:f}}h.image=d.uuid}return"{}"!==JSON.stringify(this.userData)&&(h.userData=this.userData),a||(l.textures[this.uuid]=h),h}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(l){if(300!==this.mapping)return l;if(l.applyMatrix3(this.matrix),l.x<0||l.x>1)switch(this.wrapS){case Vm:l.x=l.x-Math.floor(l.x);break;case yo:l.x=l.x<0?0:1;break;case 1002:l.x=1===Math.abs(Math.floor(l.x)%2)?Math.ceil(l.x)-l.x:l.x-Math.floor(l.x)}if(l.y<0||l.y>1)switch(this.wrapT){case Vm:l.y=l.y-Math.floor(l.y);break;case yo:l.y=l.y<0?0:1;break;case 1002:l.y=1===Math.abs(Math.floor(l.y)%2)?Math.ceil(l.y)-l.y:l.y-Math.floor(l.y)}return this.flipY&&(l.y=1-l.y),l}set needsUpdate(l){!0===l&&this.version++}}function Z3(c){return typeof HTMLImageElement<"u"&&c instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&c instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&c instanceof ImageBitmap?zm.getDataURL(c):c.data?{data:Array.prototype.slice.call(c.data),width:c.width,height:c.height,type:c.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}hs.DEFAULT_IMAGE=void 0,hs.DEFAULT_MAPPING=300,hs.prototype.isTexture=!0;class ai{constructor(l=0,a=0,h=0,d=1){this.x=l,this.y=a,this.z=h,this.w=d}get width(){return this.z}set width(l){this.z=l}get height(){return this.w}set height(l){this.w=l}set(l,a,h,d){return this.x=l,this.y=a,this.z=h,this.w=d,this}setScalar(l){return this.x=l,this.y=l,this.z=l,this.w=l,this}setX(l){return this.x=l,this}setY(l){return this.y=l,this}setZ(l){return this.z=l,this}setW(l){return this.w=l,this}setComponent(l,a){switch(l){case 0:this.x=a;break;case 1:this.y=a;break;case 2:this.z=a;break;case 3:this.w=a;break;default:throw new Error("index is out of range: "+l)}return this}getComponent(l){switch(l){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+l)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(l){return this.x=l.x,this.y=l.y,this.z=l.z,this.w=void 0!==l.w?l.w:1,this}add(l,a){return void 0!==a?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(l,a)):(this.x+=l.x,this.y+=l.y,this.z+=l.z,this.w+=l.w,this)}addScalar(l){return this.x+=l,this.y+=l,this.z+=l,this.w+=l,this}addVectors(l,a){return this.x=l.x+a.x,this.y=l.y+a.y,this.z=l.z+a.z,this.w=l.w+a.w,this}addScaledVector(l,a){return this.x+=l.x*a,this.y+=l.y*a,this.z+=l.z*a,this.w+=l.w*a,this}sub(l,a){return void 0!==a?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(l,a)):(this.x-=l.x,this.y-=l.y,this.z-=l.z,this.w-=l.w,this)}subScalar(l){return this.x-=l,this.y-=l,this.z-=l,this.w-=l,this}subVectors(l,a){return this.x=l.x-a.x,this.y=l.y-a.y,this.z=l.z-a.z,this.w=l.w-a.w,this}multiply(l){return this.x*=l.x,this.y*=l.y,this.z*=l.z,this.w*=l.w,this}multiplyScalar(l){return this.x*=l,this.y*=l,this.z*=l,this.w*=l,this}applyMatrix4(l){const a=this.x,h=this.y,d=this.z,f=this.w,m=l.elements;return this.x=m[0]*a+m[4]*h+m[8]*d+m[12]*f,this.y=m[1]*a+m[5]*h+m[9]*d+m[13]*f,this.z=m[2]*a+m[6]*h+m[10]*d+m[14]*f,this.w=m[3]*a+m[7]*h+m[11]*d+m[15]*f,this}divideScalar(l){return this.multiplyScalar(1/l)}setAxisAngleFromQuaternion(l){this.w=2*Math.acos(l.w);const a=Math.sqrt(1-l.w*l.w);return a<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=l.x/a,this.y=l.y/a,this.z=l.z/a),this}setAxisAngleFromRotationMatrix(l){let a,h,d,f;const y=l.elements,v=y[0],_=y[4],S=y[8],b=y[1],T=y[5],x=y[9],E=y[2],D=y[6],I=y[10];if(Math.abs(_-b)<.01&&Math.abs(S-E)<.01&&Math.abs(x-D)<.01){if(Math.abs(_+b)<.1&&Math.abs(S+E)<.1&&Math.abs(x+D)<.1&&Math.abs(v+T+I-3)<.1)return this.set(1,0,0,0),this;a=Math.PI;const L=(v+1)/2,P=(T+1)/2,F=(I+1)/2,V=(_+b)/4,z=(S+E)/4,q=(x+D)/4;return L>P&&L>F?L<.01?(h=0,d=.707106781,f=.707106781):(h=Math.sqrt(L),d=V/h,f=z/h):P>F?P<.01?(h=.707106781,d=0,f=.707106781):(d=Math.sqrt(P),h=V/d,f=q/d):F<.01?(h=.707106781,d=.707106781,f=0):(f=Math.sqrt(F),h=z/f,d=q/f),this.set(h,d,f,a),this}let M=Math.sqrt((D-x)*(D-x)+(S-E)*(S-E)+(b-_)*(b-_));return Math.abs(M)<.001&&(M=1),this.x=(D-x)/M,this.y=(S-E)/M,this.z=(b-_)/M,this.w=Math.acos((v+T+I-1)/2),this}min(l){return this.x=Math.min(this.x,l.x),this.y=Math.min(this.y,l.y),this.z=Math.min(this.z,l.z),this.w=Math.min(this.w,l.w),this}max(l){return this.x=Math.max(this.x,l.x),this.y=Math.max(this.y,l.y),this.z=Math.max(this.z,l.z),this.w=Math.max(this.w,l.w),this}clamp(l,a){return this.x=Math.max(l.x,Math.min(a.x,this.x)),this.y=Math.max(l.y,Math.min(a.y,this.y)),this.z=Math.max(l.z,Math.min(a.z,this.z)),this.w=Math.max(l.w,Math.min(a.w,this.w)),this}clampScalar(l,a){return this.x=Math.max(l,Math.min(a,this.x)),this.y=Math.max(l,Math.min(a,this.y)),this.z=Math.max(l,Math.min(a,this.z)),this.w=Math.max(l,Math.min(a,this.w)),this}clampLength(l,a){const h=this.length();return this.divideScalar(h||1).multiplyScalar(Math.max(l,Math.min(a,h)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(l){return this.x*l.x+this.y*l.y+this.z*l.z+this.w*l.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(l){return this.normalize().multiplyScalar(l)}lerp(l,a){return this.x+=(l.x-this.x)*a,this.y+=(l.y-this.y)*a,this.z+=(l.z-this.z)*a,this.w+=(l.w-this.w)*a,this}lerpVectors(l,a,h){return this.x=l.x+(a.x-l.x)*h,this.y=l.y+(a.y-l.y)*h,this.z=l.z+(a.z-l.z)*h,this.w=l.w+(a.w-l.w)*h,this}equals(l){return l.x===this.x&&l.y===this.y&&l.z===this.z&&l.w===this.w}fromArray(l,a=0){return this.x=l[a],this.y=l[a+1],this.z=l[a+2],this.w=l[a+3],this}toArray(l=[],a=0){return l[a]=this.x,l[a+1]=this.y,l[a+2]=this.z,l[a+3]=this.w,l}fromBufferAttribute(l,a,h){return void 0!==h&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=l.getX(a),this.y=l.getY(a),this.z=l.getZ(a),this.w=l.getW(a),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}ai.prototype.isVector4=!0;class ql extends Xf{constructor(l,a,h={}){super(),this.width=l,this.height=a,this.depth=1,this.scissor=new ai(0,0,l,a),this.scissorTest=!1,this.viewport=new ai(0,0,l,a),this.texture=new hs(void 0,h.mapping,h.wrapS,h.wrapT,h.magFilter,h.minFilter,h.format,h.type,h.anisotropy,h.encoding),this.texture.isRenderTargetTexture=!0,this.texture.image={width:l,height:a,depth:1},this.texture.generateMipmaps=void 0!==h.generateMipmaps&&h.generateMipmaps,this.texture.internalFormat=void 0!==h.internalFormat?h.internalFormat:null,this.texture.minFilter=void 0!==h.minFilter?h.minFilter:Fi,this.depthBuffer=void 0===h.depthBuffer||h.depthBuffer,this.stencilBuffer=void 0!==h.stencilBuffer&&h.stencilBuffer,this.depthTexture=void 0!==h.depthTexture?h.depthTexture:null}setTexture(l){l.image={width:this.width,height:this.height,depth:this.depth},this.texture=l}setSize(l,a,h=1){(this.width!==l||this.height!==a||this.depth!==h)&&(this.width=l,this.height=a,this.depth=h,this.texture.image.width=l,this.texture.image.height=a,this.texture.image.depth=h,this.dispose()),this.viewport.set(0,0,l,a),this.scissor.set(0,0,l,a)}clone(){return(new this.constructor).copy(this)}copy(l){return this.width=l.width,this.height=l.height,this.depth=l.depth,this.viewport.copy(l.viewport),this.texture=l.texture.clone(),this.texture.image=Object.assign({},l.texture.image),this.depthBuffer=l.depthBuffer,this.stencilBuffer=l.stencilBuffer,this.depthTexture=l.depthTexture,this}dispose(){this.dispatchEvent({type:"dispose"})}}ql.prototype.isWebGLRenderTarget=!0,class OWe extends ql{constructor(l,a,h){super(l,a);const d=this.texture;this.texture=[];for(let f=0;f<h;f++)this.texture[f]=d.clone()}setSize(l,a,h=1){if(this.width!==l||this.height!==a||this.depth!==h){this.width=l,this.height=a,this.depth=h;for(let d=0,f=this.texture.length;d<f;d++)this.texture[d].image.width=l,this.texture[d].image.height=a,this.texture[d].image.depth=h;this.dispose()}return this.viewport.set(0,0,l,a),this.scissor.set(0,0,l,a),this}copy(l){this.dispose(),this.width=l.width,this.height=l.height,this.depth=l.depth,this.viewport.set(0,0,this.width,this.height),this.scissor.set(0,0,this.width,this.height),this.depthBuffer=l.depthBuffer,this.stencilBuffer=l.stencilBuffer,this.depthTexture=l.depthTexture,this.texture.length=0;for(let a=0,h=l.texture.length;a<h;a++)this.texture[a]=l.texture[a].clone();return this}}.prototype.isWebGLMultipleRenderTargets=!0;class K3 extends ql{constructor(l,a,h={}){super(l,a,h),this.samples=4,this.ignoreDepthForMultisampleCopy=void 0===h.ignoreDepth||h.ignoreDepth,this.useRenderToTexture=void 0!==h.useRenderToTexture&&h.useRenderToTexture,this.useRenderbuffer=!1===this.useRenderToTexture}copy(l){return super.copy.call(this,l),this.samples=l.samples,this.useRenderToTexture=l.useRenderToTexture,this.useRenderbuffer=l.useRenderbuffer,this}}K3.prototype.isWebGLMultisampleRenderTarget=!0;class Hs{constructor(l=0,a=0,h=0,d=1){this._x=l,this._y=a,this._z=h,this._w=d}static slerp(l,a,h,d){return console.warn("THREE.Quaternion: Static .slerp() has been deprecated. Use qm.slerpQuaternions( qa, qb, t ) instead."),h.slerpQuaternions(l,a,d)}static slerpFlat(l,a,h,d,f,m,g){let y=h[d+0],v=h[d+1],_=h[d+2],S=h[d+3];const b=f[m+0],T=f[m+1],x=f[m+2],E=f[m+3];if(0===g)return l[a+0]=y,l[a+1]=v,l[a+2]=_,void(l[a+3]=S);if(1===g)return l[a+0]=b,l[a+1]=T,l[a+2]=x,void(l[a+3]=E);if(S!==E||y!==b||v!==T||_!==x){let D=1-g;const I=y*b+v*T+_*x+S*E,M=I>=0?1:-1,L=1-I*I;if(L>Number.EPSILON){const F=Math.sqrt(L),V=Math.atan2(F,I*M);D=Math.sin(D*V)/F,g=Math.sin(g*V)/F}const P=g*M;if(y=y*D+b*P,v=v*D+T*P,_=_*D+x*P,S=S*D+E*P,D===1-g){const F=1/Math.sqrt(y*y+v*v+_*_+S*S);y*=F,v*=F,_*=F,S*=F}}l[a]=y,l[a+1]=v,l[a+2]=_,l[a+3]=S}static multiplyQuaternionsFlat(l,a,h,d,f,m){const g=h[d],y=h[d+1],v=h[d+2],_=h[d+3],S=f[m],b=f[m+1],T=f[m+2],x=f[m+3];return l[a]=g*x+_*S+y*T-v*b,l[a+1]=y*x+_*b+v*S-g*T,l[a+2]=v*x+_*T+g*b-y*S,l[a+3]=_*x-g*S-y*b-v*T,l}get x(){return this._x}set x(l){this._x=l,this._onChangeCallback()}get y(){return this._y}set y(l){this._y=l,this._onChangeCallback()}get z(){return this._z}set z(l){this._z=l,this._onChangeCallback()}get w(){return this._w}set w(l){this._w=l,this._onChangeCallback()}set(l,a,h,d){return this._x=l,this._y=a,this._z=h,this._w=d,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(l){return this._x=l.x,this._y=l.y,this._z=l.z,this._w=l.w,this._onChangeCallback(),this}setFromEuler(l,a){if(!l||!l.isEuler)throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");const h=l._x,d=l._y,f=l._z,m=l._order,g=Math.cos,y=Math.sin,v=g(h/2),_=g(d/2),S=g(f/2),b=y(h/2),T=y(d/2),x=y(f/2);switch(m){case"XYZ":this._x=b*_*S+v*T*x,this._y=v*T*S-b*_*x,this._z=v*_*x+b*T*S,this._w=v*_*S-b*T*x;break;case"YXZ":this._x=b*_*S+v*T*x,this._y=v*T*S-b*_*x,this._z=v*_*x-b*T*S,this._w=v*_*S+b*T*x;break;case"ZXY":this._x=b*_*S-v*T*x,this._y=v*T*S+b*_*x,this._z=v*_*x+b*T*S,this._w=v*_*S-b*T*x;break;case"ZYX":this._x=b*_*S-v*T*x,this._y=v*T*S+b*_*x,this._z=v*_*x-b*T*S,this._w=v*_*S+b*T*x;break;case"YZX":this._x=b*_*S+v*T*x,this._y=v*T*S+b*_*x,this._z=v*_*x-b*T*S,this._w=v*_*S-b*T*x;break;case"XZY":this._x=b*_*S-v*T*x,this._y=v*T*S-b*_*x,this._z=v*_*x+b*T*S,this._w=v*_*S+b*T*x;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+m)}return!1!==a&&this._onChangeCallback(),this}setFromAxisAngle(l,a){const h=a/2,d=Math.sin(h);return this._x=l.x*d,this._y=l.y*d,this._z=l.z*d,this._w=Math.cos(h),this._onChangeCallback(),this}setFromRotationMatrix(l){const a=l.elements,h=a[0],d=a[4],f=a[8],m=a[1],g=a[5],y=a[9],v=a[2],_=a[6],S=a[10],b=h+g+S;if(b>0){const T=.5/Math.sqrt(b+1);this._w=.25/T,this._x=(_-y)*T,this._y=(f-v)*T,this._z=(m-d)*T}else if(h>g&&h>S){const T=2*Math.sqrt(1+h-g-S);this._w=(_-y)/T,this._x=.25*T,this._y=(d+m)/T,this._z=(f+v)/T}else if(g>S){const T=2*Math.sqrt(1+g-h-S);this._w=(f-v)/T,this._x=(d+m)/T,this._y=.25*T,this._z=(y+_)/T}else{const T=2*Math.sqrt(1+S-h-g);this._w=(m-d)/T,this._x=(f+v)/T,this._y=(y+_)/T,this._z=.25*T}return this._onChangeCallback(),this}setFromUnitVectors(l,a){let h=l.dot(a)+1;return h<Number.EPSILON?(h=0,Math.abs(l.x)>Math.abs(l.z)?(this._x=-l.y,this._y=l.x,this._z=0,this._w=h):(this._x=0,this._y=-l.z,this._z=l.y,this._w=h)):(this._x=l.y*a.z-l.z*a.y,this._y=l.z*a.x-l.x*a.z,this._z=l.x*a.y-l.y*a.x,this._w=h),this.normalize()}angleTo(l){return 2*Math.acos(Math.abs(_o(this.dot(l),-1,1)))}rotateTowards(l,a){const h=this.angleTo(l);if(0===h)return this;const d=Math.min(1,a/h);return this.slerp(l,d),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(l){return this._x*l._x+this._y*l._y+this._z*l._z+this._w*l._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let l=this.length();return 0===l?(this._x=0,this._y=0,this._z=0,this._w=1):(l=1/l,this._x=this._x*l,this._y=this._y*l,this._z=this._z*l,this._w=this._w*l),this._onChangeCallback(),this}multiply(l,a){return void 0!==a?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(l,a)):this.multiplyQuaternions(this,l)}premultiply(l){return this.multiplyQuaternions(l,this)}multiplyQuaternions(l,a){const h=l._x,d=l._y,f=l._z,m=l._w,g=a._x,y=a._y,v=a._z,_=a._w;return this._x=h*_+m*g+d*v-f*y,this._y=d*_+m*y+f*g-h*v,this._z=f*_+m*v+h*y-d*g,this._w=m*_-h*g-d*y-f*v,this._onChangeCallback(),this}slerp(l,a){if(0===a)return this;if(1===a)return this.copy(l);const h=this._x,d=this._y,f=this._z,m=this._w;let g=m*l._w+h*l._x+d*l._y+f*l._z;if(g<0?(this._w=-l._w,this._x=-l._x,this._y=-l._y,this._z=-l._z,g=-g):this.copy(l),g>=1)return this._w=m,this._x=h,this._y=d,this._z=f,this;const y=1-g*g;if(y<=Number.EPSILON){const T=1-a;return this._w=T*m+a*this._w,this._x=T*h+a*this._x,this._y=T*d+a*this._y,this._z=T*f+a*this._z,this.normalize(),this._onChangeCallback(),this}const v=Math.sqrt(y),_=Math.atan2(v,g),S=Math.sin((1-a)*_)/v,b=Math.sin(a*_)/v;return this._w=m*S+this._w*b,this._x=h*S+this._x*b,this._y=d*S+this._y*b,this._z=f*S+this._z*b,this._onChangeCallback(),this}slerpQuaternions(l,a,h){return this.copy(l).slerp(a,h)}random(){const l=Math.random(),a=Math.sqrt(1-l),h=Math.sqrt(l),d=2*Math.PI*Math.random(),f=2*Math.PI*Math.random();return this.set(a*Math.cos(d),h*Math.sin(f),h*Math.cos(f),a*Math.sin(d))}equals(l){return l._x===this._x&&l._y===this._y&&l._z===this._z&&l._w===this._w}fromArray(l,a=0){return this._x=l[a],this._y=l[a+1],this._z=l[a+2],this._w=l[a+3],this._onChangeCallback(),this}toArray(l=[],a=0){return l[a]=this._x,l[a+1]=this._y,l[a+2]=this._z,l[a+3]=this._w,l}fromBufferAttribute(l,a){return this._x=l.getX(a),this._y=l.getY(a),this._z=l.getZ(a),this._w=l.getW(a),this}_onChange(l){return this._onChangeCallback=l,this}_onChangeCallback(){}}Hs.prototype.isQuaternion=!0;class te{constructor(l=0,a=0,h=0){this.x=l,this.y=a,this.z=h}set(l,a,h){return void 0===h&&(h=this.z),this.x=l,this.y=a,this.z=h,this}setScalar(l){return this.x=l,this.y=l,this.z=l,this}setX(l){return this.x=l,this}setY(l){return this.y=l,this}setZ(l){return this.z=l,this}setComponent(l,a){switch(l){case 0:this.x=a;break;case 1:this.y=a;break;case 2:this.z=a;break;default:throw new Error("index is out of range: "+l)}return this}getComponent(l){switch(l){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+l)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(l){return this.x=l.x,this.y=l.y,this.z=l.z,this}add(l,a){return void 0!==a?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(l,a)):(this.x+=l.x,this.y+=l.y,this.z+=l.z,this)}addScalar(l){return this.x+=l,this.y+=l,this.z+=l,this}addVectors(l,a){return this.x=l.x+a.x,this.y=l.y+a.y,this.z=l.z+a.z,this}addScaledVector(l,a){return this.x+=l.x*a,this.y+=l.y*a,this.z+=l.z*a,this}sub(l,a){return void 0!==a?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(l,a)):(this.x-=l.x,this.y-=l.y,this.z-=l.z,this)}subScalar(l){return this.x-=l,this.y-=l,this.z-=l,this}subVectors(l,a){return this.x=l.x-a.x,this.y=l.y-a.y,this.z=l.z-a.z,this}multiply(l,a){return void 0!==a?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(l,a)):(this.x*=l.x,this.y*=l.y,this.z*=l.z,this)}multiplyScalar(l){return this.x*=l,this.y*=l,this.z*=l,this}multiplyVectors(l,a){return this.x=l.x*a.x,this.y=l.y*a.y,this.z=l.z*a.z,this}applyEuler(l){return l&&l.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(_te.setFromEuler(l))}applyAxisAngle(l,a){return this.applyQuaternion(_te.setFromAxisAngle(l,a))}applyMatrix3(l){const a=this.x,h=this.y,d=this.z,f=l.elements;return this.x=f[0]*a+f[3]*h+f[6]*d,this.y=f[1]*a+f[4]*h+f[7]*d,this.z=f[2]*a+f[5]*h+f[8]*d,this}applyNormalMatrix(l){return this.applyMatrix3(l).normalize()}applyMatrix4(l){const a=this.x,h=this.y,d=this.z,f=l.elements,m=1/(f[3]*a+f[7]*h+f[11]*d+f[15]);return this.x=(f[0]*a+f[4]*h+f[8]*d+f[12])*m,this.y=(f[1]*a+f[5]*h+f[9]*d+f[13])*m,this.z=(f[2]*a+f[6]*h+f[10]*d+f[14])*m,this}applyQuaternion(l){const a=this.x,h=this.y,d=this.z,f=l.x,m=l.y,g=l.z,y=l.w,v=y*a+m*d-g*h,_=y*h+g*a-f*d,S=y*d+f*h-m*a,b=-f*a-m*h-g*d;return this.x=v*y+b*-f+_*-g-S*-m,this.y=_*y+b*-m+S*-f-v*-g,this.z=S*y+b*-g+v*-m-_*-f,this}project(l){return this.applyMatrix4(l.matrixWorldInverse).applyMatrix4(l.projectionMatrix)}unproject(l){return this.applyMatrix4(l.projectionMatrixInverse).applyMatrix4(l.matrixWorld)}transformDirection(l){const a=this.x,h=this.y,d=this.z,f=l.elements;return this.x=f[0]*a+f[4]*h+f[8]*d,this.y=f[1]*a+f[5]*h+f[9]*d,this.z=f[2]*a+f[6]*h+f[10]*d,this.normalize()}divide(l){return this.x/=l.x,this.y/=l.y,this.z/=l.z,this}divideScalar(l){return this.multiplyScalar(1/l)}min(l){return this.x=Math.min(this.x,l.x),this.y=Math.min(this.y,l.y),this.z=Math.min(this.z,l.z),this}max(l){return this.x=Math.max(this.x,l.x),this.y=Math.max(this.y,l.y),this.z=Math.max(this.z,l.z),this}clamp(l,a){return this.x=Math.max(l.x,Math.min(a.x,this.x)),this.y=Math.max(l.y,Math.min(a.y,this.y)),this.z=Math.max(l.z,Math.min(a.z,this.z)),this}clampScalar(l,a){return this.x=Math.max(l,Math.min(a,this.x)),this.y=Math.max(l,Math.min(a,this.y)),this.z=Math.max(l,Math.min(a,this.z)),this}clampLength(l,a){const h=this.length();return this.divideScalar(h||1).multiplyScalar(Math.max(l,Math.min(a,h)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(l){return this.x*l.x+this.y*l.y+this.z*l.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(l){return this.normalize().multiplyScalar(l)}lerp(l,a){return this.x+=(l.x-this.x)*a,this.y+=(l.y-this.y)*a,this.z+=(l.z-this.z)*a,this}lerpVectors(l,a,h){return this.x=l.x+(a.x-l.x)*h,this.y=l.y+(a.y-l.y)*h,this.z=l.z+(a.z-l.z)*h,this}cross(l,a){return void 0!==a?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(l,a)):this.crossVectors(this,l)}crossVectors(l,a){const h=l.x,d=l.y,f=l.z,m=a.x,g=a.y,y=a.z;return this.x=d*y-f*g,this.y=f*m-h*y,this.z=h*g-d*m,this}projectOnVector(l){const a=l.lengthSq();if(0===a)return this.set(0,0,0);const h=l.dot(this)/a;return this.copy(l).multiplyScalar(h)}projectOnPlane(l){return Q3.copy(this).projectOnVector(l),this.sub(Q3)}reflect(l){return this.sub(Q3.copy(l).multiplyScalar(2*this.dot(l)))}angleTo(l){const a=Math.sqrt(this.lengthSq()*l.lengthSq());if(0===a)return Math.PI/2;const h=this.dot(l)/a;return Math.acos(_o(h,-1,1))}distanceTo(l){return Math.sqrt(this.distanceToSquared(l))}distanceToSquared(l){const a=this.x-l.x,h=this.y-l.y,d=this.z-l.z;return a*a+h*h+d*d}manhattanDistanceTo(l){return Math.abs(this.x-l.x)+Math.abs(this.y-l.y)+Math.abs(this.z-l.z)}setFromSpherical(l){return this.setFromSphericalCoords(l.radius,l.phi,l.theta)}setFromSphericalCoords(l,a,h){const d=Math.sin(a)*l;return this.x=d*Math.sin(h),this.y=Math.cos(a)*l,this.z=d*Math.cos(h),this}setFromCylindrical(l){return this.setFromCylindricalCoords(l.radius,l.theta,l.y)}setFromCylindricalCoords(l,a,h){return this.x=l*Math.sin(a),this.y=h,this.z=l*Math.cos(a),this}setFromMatrixPosition(l){const a=l.elements;return this.x=a[12],this.y=a[13],this.z=a[14],this}setFromMatrixScale(l){const a=this.setFromMatrixColumn(l,0).length(),h=this.setFromMatrixColumn(l,1).length(),d=this.setFromMatrixColumn(l,2).length();return this.x=a,this.y=h,this.z=d,this}setFromMatrixColumn(l,a){return this.fromArray(l.elements,4*a)}setFromMatrix3Column(l,a){return this.fromArray(l.elements,3*a)}equals(l){return l.x===this.x&&l.y===this.y&&l.z===this.z}fromArray(l,a=0){return this.x=l[a],this.y=l[a+1],this.z=l[a+2],this}toArray(l=[],a=0){return l[a]=this.x,l[a+1]=this.y,l[a+2]=this.z,l}fromBufferAttribute(l,a,h){return void 0!==h&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=l.getX(a),this.y=l.getY(a),this.z=l.getZ(a),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const l=2*(Math.random()-.5),a=Math.random()*Math.PI*2,h=Math.sqrt(1-l**2);return this.x=h*Math.cos(a),this.y=h*Math.sin(a),this.z=l,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}te.prototype.isVector3=!0;const Q3=new te,_te=new Hs;class pl{constructor(l=new te(1/0,1/0,1/0),a=new te(-1/0,-1/0,-1/0)){this.min=l,this.max=a}set(l,a){return this.min.copy(l),this.max.copy(a),this}setFromArray(l){let a=1/0,h=1/0,d=1/0,f=-1/0,m=-1/0,g=-1/0;for(let y=0,v=l.length;y<v;y+=3){const _=l[y],S=l[y+1],b=l[y+2];_<a&&(a=_),S<h&&(h=S),b<d&&(d=b),_>f&&(f=_),S>m&&(m=S),b>g&&(g=b)}return this.min.set(a,h,d),this.max.set(f,m,g),this}setFromBufferAttribute(l){let a=1/0,h=1/0,d=1/0,f=-1/0,m=-1/0,g=-1/0;for(let y=0,v=l.count;y<v;y++){const _=l.getX(y),S=l.getY(y),b=l.getZ(y);_<a&&(a=_),S<h&&(h=S),b<d&&(d=b),_>f&&(f=_),S>m&&(m=S),b>g&&(g=b)}return this.min.set(a,h,d),this.max.set(f,m,g),this}setFromPoints(l){this.makeEmpty();for(let a=0,h=l.length;a<h;a++)this.expandByPoint(l[a]);return this}setFromCenterAndSize(l,a){const h=Hm.copy(a).multiplyScalar(.5);return this.min.copy(l).sub(h),this.max.copy(l).add(h),this}setFromObject(l,a=!1){return this.makeEmpty(),this.expandByObject(l,a)}clone(){return(new this.constructor).copy(this)}copy(l){return this.min.copy(l.min),this.max.copy(l.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(l){return this.isEmpty()?l.set(0,0,0):l.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(l){return this.isEmpty()?l.set(0,0,0):l.subVectors(this.max,this.min)}expandByPoint(l){return this.min.min(l),this.max.max(l),this}expandByVector(l){return this.min.sub(l),this.max.add(l),this}expandByScalar(l){return this.min.addScalar(-l),this.max.addScalar(l),this}expandByObject(l,a=!1){l.updateWorldMatrix(!1,!1);const h=l.geometry;if(void 0!==h)if(a&&null!=h.attributes&&void 0!==h.attributes.position){const f=h.attributes.position;for(let m=0,g=f.count;m<g;m++)Hm.fromBufferAttribute(f,m).applyMatrix4(l.matrixWorld),this.expandByPoint(Hm)}else null===h.boundingBox&&h.computeBoundingBox(),J3.copy(h.boundingBox),J3.applyMatrix4(l.matrixWorld),this.union(J3);const d=l.children;for(let f=0,m=d.length;f<m;f++)this.expandByObject(d[f],a);return this}containsPoint(l){return!(l.x<this.min.x||l.x>this.max.x||l.y<this.min.y||l.y>this.max.y||l.z<this.min.z||l.z>this.max.z)}containsBox(l){return this.min.x<=l.min.x&&l.max.x<=this.max.x&&this.min.y<=l.min.y&&l.max.y<=this.max.y&&this.min.z<=l.min.z&&l.max.z<=this.max.z}getParameter(l,a){return a.set((l.x-this.min.x)/(this.max.x-this.min.x),(l.y-this.min.y)/(this.max.y-this.min.y),(l.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(l){return!(l.max.x<this.min.x||l.min.x>this.max.x||l.max.y<this.min.y||l.min.y>this.max.y||l.max.z<this.min.z||l.min.z>this.max.z)}intersectsSphere(l){return this.clampPoint(l.center,Hm),Hm.distanceToSquared(l.center)<=l.radius*l.radius}intersectsPlane(l){let a,h;return l.normal.x>0?(a=l.normal.x*this.min.x,h=l.normal.x*this.max.x):(a=l.normal.x*this.max.x,h=l.normal.x*this.min.x),l.normal.y>0?(a+=l.normal.y*this.min.y,h+=l.normal.y*this.max.y):(a+=l.normal.y*this.max.y,h+=l.normal.y*this.min.y),l.normal.z>0?(a+=l.normal.z*this.min.z,h+=l.normal.z*this.max.z):(a+=l.normal.z*this.max.z,h+=l.normal.z*this.min.z),a<=-l.constant&&h>=-l.constant}intersectsTriangle(l){if(this.isEmpty())return!1;this.getCenter(QT),TD.subVectors(this.max,QT),y_.subVectors(l.a,QT),v_.subVectors(l.b,QT),__.subVectors(l.c,QT),qf.subVectors(v_,y_),$f.subVectors(__,v_),jm.subVectors(y_,__);let a=[0,-qf.z,qf.y,0,-$f.z,$f.y,0,-jm.z,jm.y,qf.z,0,-qf.x,$f.z,0,-$f.x,jm.z,0,-jm.x,-qf.y,qf.x,0,-$f.y,$f.x,0,-jm.y,jm.x,0];return!(!eV(a,y_,v_,__,TD)||(a=[1,0,0,0,1,0,0,0,1],!eV(a,y_,v_,__,TD)))&&(wD.crossVectors(qf,$f),a=[wD.x,wD.y,wD.z],eV(a,y_,v_,__,TD))}clampPoint(l,a){return a.copy(l).clamp(this.min,this.max)}distanceToPoint(l){return Hm.copy(l).clamp(this.min,this.max).sub(l).length()}getBoundingSphere(l){return this.getCenter(l.center),l.radius=.5*this.getSize(Hm).length(),l}intersect(l){return this.min.max(l.min),this.max.min(l.max),this.isEmpty()&&this.makeEmpty(),this}union(l){return this.min.min(l.min),this.max.max(l.max),this}applyMatrix4(l){return this.isEmpty()||(Qh[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(l),Qh[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(l),Qh[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(l),Qh[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(l),Qh[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(l),Qh[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(l),Qh[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(l),Qh[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(l),this.setFromPoints(Qh)),this}translate(l){return this.min.add(l),this.max.add(l),this}equals(l){return l.min.equals(this.min)&&l.max.equals(this.max)}}pl.prototype.isBox3=!0;const Qh=[new te,new te,new te,new te,new te,new te,new te,new te],Hm=new te,J3=new pl,y_=new te,v_=new te,__=new te,qf=new te,$f=new te,jm=new te,QT=new te,TD=new te,wD=new te,Wm=new te;function eV(c,l,a,h,d){for(let f=0,m=c.length-3;f<=m;f+=3){Wm.fromArray(c,f);const g=d.x*Math.abs(Wm.x)+d.y*Math.abs(Wm.y)+d.z*Math.abs(Wm.z),y=l.dot(Wm),v=a.dot(Wm),_=h.dot(Wm);if(Math.max(-Math.max(y,v,_),Math.min(y,v,_))>g)return!1}return!0}const NWe=new pl,Ste=new te,CD=new te,tV=new te;class Yf{constructor(l=new te,a=-1){this.center=l,this.radius=a}set(l,a){return this.center.copy(l),this.radius=a,this}setFromPoints(l,a){const h=this.center;void 0!==a?h.copy(a):NWe.setFromPoints(l).getCenter(h);let d=0;for(let f=0,m=l.length;f<m;f++)d=Math.max(d,h.distanceToSquared(l[f]));return this.radius=Math.sqrt(d),this}copy(l){return this.center.copy(l.center),this.radius=l.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(l){return l.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(l){return l.distanceTo(this.center)-this.radius}intersectsSphere(l){const a=this.radius+l.radius;return l.center.distanceToSquared(this.center)<=a*a}intersectsBox(l){return l.intersectsSphere(this)}intersectsPlane(l){return Math.abs(l.distanceToPoint(this.center))<=this.radius}clampPoint(l,a){const h=this.center.distanceToSquared(l);return a.copy(l),h>this.radius*this.radius&&(a.sub(this.center).normalize(),a.multiplyScalar(this.radius).add(this.center)),a}getBoundingBox(l){return this.isEmpty()?(l.makeEmpty(),l):(l.set(this.center,this.center),l.expandByScalar(this.radius),l)}applyMatrix4(l){return this.center.applyMatrix4(l),this.radius=this.radius*l.getMaxScaleOnAxis(),this}translate(l){return this.center.add(l),this}expandByPoint(l){tV.subVectors(l,this.center);const a=tV.lengthSq();if(a>this.radius*this.radius){const h=Math.sqrt(a),d=.5*(h-this.radius);this.center.add(tV.multiplyScalar(d/h)),this.radius+=d}return this}union(l){return!0===this.center.equals(l.center)?CD.set(0,0,1).multiplyScalar(l.radius):CD.subVectors(l.center,this.center).normalize().multiplyScalar(l.radius),this.expandByPoint(Ste.copy(l.center).add(CD)),this.expandByPoint(Ste.copy(l.center).sub(CD)),this}equals(l){return l.center.equals(this.center)&&l.radius===this.radius}clone(){return(new this.constructor).copy(this)}}const Jh=new te,nV=new te,xD=new te,Zf=new te,rV=new te,ED=new te,iV=new te;class Xm{constructor(l=new te,a=new te(0,0,-1)){this.origin=l,this.direction=a}set(l,a){return this.origin.copy(l),this.direction.copy(a),this}copy(l){return this.origin.copy(l.origin),this.direction.copy(l.direction),this}at(l,a){return a.copy(this.direction).multiplyScalar(l).add(this.origin)}lookAt(l){return this.direction.copy(l).sub(this.origin).normalize(),this}recast(l){return this.origin.copy(this.at(l,Jh)),this}closestPointToPoint(l,a){a.subVectors(l,this.origin);const h=a.dot(this.direction);return h<0?a.copy(this.origin):a.copy(this.direction).multiplyScalar(h).add(this.origin)}distanceToPoint(l){return Math.sqrt(this.distanceSqToPoint(l))}distanceSqToPoint(l){const a=Jh.subVectors(l,this.origin).dot(this.direction);return a<0?this.origin.distanceToSquared(l):(Jh.copy(this.direction).multiplyScalar(a).add(this.origin),Jh.distanceToSquared(l))}distanceSqToSegment(l,a,h,d){nV.copy(l).add(a).multiplyScalar(.5),xD.copy(a).sub(l).normalize(),Zf.copy(this.origin).sub(nV);const f=.5*l.distanceTo(a),m=-this.direction.dot(xD),g=Zf.dot(this.direction),y=-Zf.dot(xD),v=Zf.lengthSq(),_=Math.abs(1-m*m);let S,b,T,x;if(_>0)if(S=m*y-g,b=m*g-y,x=f*_,S>=0)if(b>=-x)if(b<=x){const E=1/_;S*=E,b*=E,T=S*(S+m*b+2*g)+b*(m*S+b+2*y)+v}else b=f,S=Math.max(0,-(m*b+g)),T=-S*S+b*(b+2*y)+v;else b=-f,S=Math.max(0,-(m*b+g)),T=-S*S+b*(b+2*y)+v;else b<=-x?(S=Math.max(0,-(-m*f+g)),b=S>0?-f:Math.min(Math.max(-f,-y),f),T=-S*S+b*(b+2*y)+v):b<=x?(S=0,b=Math.min(Math.max(-f,-y),f),T=b*(b+2*y)+v):(S=Math.max(0,-(m*f+g)),b=S>0?f:Math.min(Math.max(-f,-y),f),T=-S*S+b*(b+2*y)+v);else b=m>0?-f:f,S=Math.max(0,-(m*b+g)),T=-S*S+b*(b+2*y)+v;return h&&h.copy(this.direction).multiplyScalar(S).add(this.origin),d&&d.copy(xD).multiplyScalar(b).add(nV),T}intersectSphere(l,a){Jh.subVectors(l.center,this.origin);const h=Jh.dot(this.direction),d=Jh.dot(Jh)-h*h,f=l.radius*l.radius;if(d>f)return null;const m=Math.sqrt(f-d),g=h-m,y=h+m;return g<0&&y<0?null:this.at(g<0?y:g,a)}intersectsSphere(l){return this.distanceSqToPoint(l.center)<=l.radius*l.radius}distanceToPlane(l){const a=l.normal.dot(this.direction);if(0===a)return 0===l.distanceToPoint(this.origin)?0:null;const h=-(this.origin.dot(l.normal)+l.constant)/a;return h>=0?h:null}intersectPlane(l,a){const h=this.distanceToPlane(l);return null===h?null:this.at(h,a)}intersectsPlane(l){const a=l.distanceToPoint(this.origin);return 0===a||l.normal.dot(this.direction)*a<0}intersectBox(l,a){let h,d,f,m,g,y;const v=1/this.direction.x,_=1/this.direction.y,S=1/this.direction.z,b=this.origin;return v>=0?(h=(l.min.x-b.x)*v,d=(l.max.x-b.x)*v):(h=(l.max.x-b.x)*v,d=(l.min.x-b.x)*v),_>=0?(f=(l.min.y-b.y)*_,m=(l.max.y-b.y)*_):(f=(l.max.y-b.y)*_,m=(l.min.y-b.y)*_),h>m||f>d||((f>h||h!=h)&&(h=f),(m<d||d!=d)&&(d=m),S>=0?(g=(l.min.z-b.z)*S,y=(l.max.z-b.z)*S):(g=(l.max.z-b.z)*S,y=(l.min.z-b.z)*S),h>y||g>d)||((g>h||h!=h)&&(h=g),(y<d||d!=d)&&(d=y),d<0)?null:this.at(h>=0?h:d,a)}intersectsBox(l){return null!==this.intersectBox(l,Jh)}intersectTriangle(l,a,h,d,f){rV.subVectors(a,l),ED.subVectors(h,l),iV.crossVectors(rV,ED);let g,m=this.direction.dot(iV);if(m>0){if(d)return null;g=1}else{if(!(m<0))return null;g=-1,m=-m}Zf.subVectors(this.origin,l);const y=g*this.direction.dot(ED.crossVectors(Zf,ED));if(y<0)return null;const v=g*this.direction.dot(rV.cross(Zf));if(v<0||y+v>m)return null;const _=-g*Zf.dot(iV);return _<0?null:this.at(_/m,f)}applyMatrix4(l){return this.origin.applyMatrix4(l),this.direction.transformDirection(l),this}equals(l){return l.origin.equals(this.origin)&&l.direction.equals(this.direction)}clone(){return(new this.constructor).copy(this)}}class nn{constructor(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}set(l,a,h,d,f,m,g,y,v,_,S,b,T,x,E,D){const I=this.elements;return I[0]=l,I[4]=a,I[8]=h,I[12]=d,I[1]=f,I[5]=m,I[9]=g,I[13]=y,I[2]=v,I[6]=_,I[10]=S,I[14]=b,I[3]=T,I[7]=x,I[11]=E,I[15]=D,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return(new nn).fromArray(this.elements)}copy(l){const a=this.elements,h=l.elements;return a[0]=h[0],a[1]=h[1],a[2]=h[2],a[3]=h[3],a[4]=h[4],a[5]=h[5],a[6]=h[6],a[7]=h[7],a[8]=h[8],a[9]=h[9],a[10]=h[10],a[11]=h[11],a[12]=h[12],a[13]=h[13],a[14]=h[14],a[15]=h[15],this}copyPosition(l){const a=this.elements,h=l.elements;return a[12]=h[12],a[13]=h[13],a[14]=h[14],this}setFromMatrix3(l){const a=l.elements;return this.set(a[0],a[3],a[6],0,a[1],a[4],a[7],0,a[2],a[5],a[8],0,0,0,0,1),this}extractBasis(l,a,h){return l.setFromMatrixColumn(this,0),a.setFromMatrixColumn(this,1),h.setFromMatrixColumn(this,2),this}makeBasis(l,a,h){return this.set(l.x,a.x,h.x,0,l.y,a.y,h.y,0,l.z,a.z,h.z,0,0,0,0,1),this}extractRotation(l){const a=this.elements,h=l.elements,d=1/S_.setFromMatrixColumn(l,0).length(),f=1/S_.setFromMatrixColumn(l,1).length(),m=1/S_.setFromMatrixColumn(l,2).length();return a[0]=h[0]*d,a[1]=h[1]*d,a[2]=h[2]*d,a[3]=0,a[4]=h[4]*f,a[5]=h[5]*f,a[6]=h[6]*f,a[7]=0,a[8]=h[8]*m,a[9]=h[9]*m,a[10]=h[10]*m,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,this}makeRotationFromEuler(l){l&&l.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");const a=this.elements,h=l.x,d=l.y,f=l.z,m=Math.cos(h),g=Math.sin(h),y=Math.cos(d),v=Math.sin(d),_=Math.cos(f),S=Math.sin(f);if("XYZ"===l.order){const b=m*_,T=m*S,x=g*_,E=g*S;a[0]=y*_,a[4]=-y*S,a[8]=v,a[1]=T+x*v,a[5]=b-E*v,a[9]=-g*y,a[2]=E-b*v,a[6]=x+T*v,a[10]=m*y}else if("YXZ"===l.order){const b=y*_,T=y*S,x=v*_,E=v*S;a[0]=b+E*g,a[4]=x*g-T,a[8]=m*v,a[1]=m*S,a[5]=m*_,a[9]=-g,a[2]=T*g-x,a[6]=E+b*g,a[10]=m*y}else if("ZXY"===l.order){const b=y*_,T=y*S,x=v*_,E=v*S;a[0]=b-E*g,a[4]=-m*S,a[8]=x+T*g,a[1]=T+x*g,a[5]=m*_,a[9]=E-b*g,a[2]=-m*v,a[6]=g,a[10]=m*y}else if("ZYX"===l.order){const b=m*_,T=m*S,x=g*_,E=g*S;a[0]=y*_,a[4]=x*v-T,a[8]=b*v+E,a[1]=y*S,a[5]=E*v+b,a[9]=T*v-x,a[2]=-v,a[6]=g*y,a[10]=m*y}else if("YZX"===l.order){const b=m*y,T=m*v,x=g*y,E=g*v;a[0]=y*_,a[4]=E-b*S,a[8]=x*S+T,a[1]=S,a[5]=m*_,a[9]=-g*_,a[2]=-v*_,a[6]=T*S+x,a[10]=b-E*S}else if("XZY"===l.order){const b=m*y,T=m*v,x=g*y,E=g*v;a[0]=y*_,a[4]=-S,a[8]=v*_,a[1]=b*S+E,a[5]=m*_,a[9]=T*S-x,a[2]=x*S-T,a[6]=g*_,a[10]=E*S+b}return a[3]=0,a[7]=0,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,this}makeRotationFromQuaternion(l){return this.compose(FWe,l,kWe)}lookAt(l,a,h){const d=this.elements;return ml.subVectors(l,a),0===ml.lengthSq()&&(ml.z=1),ml.normalize(),Kf.crossVectors(h,ml),0===Kf.lengthSq()&&(1===Math.abs(h.z)?ml.x+=1e-4:ml.z+=1e-4,ml.normalize(),Kf.crossVectors(h,ml)),Kf.normalize(),MD.crossVectors(ml,Kf),d[0]=Kf.x,d[4]=MD.x,d[8]=ml.x,d[1]=Kf.y,d[5]=MD.y,d[9]=ml.y,d[2]=Kf.z,d[6]=MD.z,d[10]=ml.z,this}multiply(l,a){return void 0!==a?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(l,a)):this.multiplyMatrices(this,l)}premultiply(l){return this.multiplyMatrices(l,this)}multiplyMatrices(l,a){const h=l.elements,d=a.elements,f=this.elements,m=h[0],g=h[4],y=h[8],v=h[12],_=h[1],S=h[5],b=h[9],T=h[13],x=h[2],E=h[6],D=h[10],I=h[14],M=h[3],L=h[7],P=h[11],F=h[15],V=d[0],z=d[4],q=d[8],K=d[12],se=d[1],W=d[5],Q=d[9],ie=d[13],ae=d[2],he=d[6],J=d[10],ce=d[14],be=d[3],we=d[7],Ce=d[11],Te=d[15];return f[0]=m*V+g*se+y*ae+v*be,f[4]=m*z+g*W+y*he+v*we,f[8]=m*q+g*Q+y*J+v*Ce,f[12]=m*K+g*ie+y*ce+v*Te,f[1]=_*V+S*se+b*ae+T*be,f[5]=_*z+S*W+b*he+T*we,f[9]=_*q+S*Q+b*J+T*Ce,f[13]=_*K+S*ie+b*ce+T*Te,f[2]=x*V+E*se+D*ae+I*be,f[6]=x*z+E*W+D*he+I*we,f[10]=x*q+E*Q+D*J+I*Ce,f[14]=x*K+E*ie+D*ce+I*Te,f[3]=M*V+L*se+P*ae+F*be,f[7]=M*z+L*W+P*he+F*we,f[11]=M*q+L*Q+P*J+F*Ce,f[15]=M*K+L*ie+P*ce+F*Te,this}multiplyScalar(l){const a=this.elements;return a[0]*=l,a[4]*=l,a[8]*=l,a[12]*=l,a[1]*=l,a[5]*=l,a[9]*=l,a[13]*=l,a[2]*=l,a[6]*=l,a[10]*=l,a[14]*=l,a[3]*=l,a[7]*=l,a[11]*=l,a[15]*=l,this}determinant(){const l=this.elements,a=l[0],h=l[4],d=l[8],f=l[12],m=l[1],g=l[5],y=l[9],v=l[13],_=l[2],S=l[6],b=l[10],T=l[14];return l[3]*(+f*y*S-d*v*S-f*g*b+h*v*b+d*g*T-h*y*T)+l[7]*(+a*y*T-a*v*b+f*m*b-d*m*T+d*v*_-f*y*_)+l[11]*(+a*v*S-a*g*T-f*m*S+h*m*T+f*g*_-h*v*_)+l[15]*(-d*g*_-a*y*S+a*g*b+d*m*S-h*m*b+h*y*_)}transpose(){const l=this.elements;let a;return a=l[1],l[1]=l[4],l[4]=a,a=l[2],l[2]=l[8],l[8]=a,a=l[6],l[6]=l[9],l[9]=a,a=l[3],l[3]=l[12],l[12]=a,a=l[7],l[7]=l[13],l[13]=a,a=l[11],l[11]=l[14],l[14]=a,this}setPosition(l,a,h){const d=this.elements;return l.isVector3?(d[12]=l.x,d[13]=l.y,d[14]=l.z):(d[12]=l,d[13]=a,d[14]=h),this}invert(){const l=this.elements,a=l[0],h=l[1],d=l[2],f=l[3],m=l[4],g=l[5],y=l[6],v=l[7],_=l[8],S=l[9],b=l[10],T=l[11],x=l[12],E=l[13],D=l[14],I=l[15],M=S*D*v-E*b*v+E*y*T-g*D*T-S*y*I+g*b*I,L=x*b*v-_*D*v-x*y*T+m*D*T+_*y*I-m*b*I,P=_*E*v-x*S*v+x*g*T-m*E*T-_*g*I+m*S*I,F=x*S*y-_*E*y-x*g*b+m*E*b+_*g*D-m*S*D,V=a*M+h*L+d*P+f*F;if(0===V)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const z=1/V;return l[0]=M*z,l[1]=(E*b*f-S*D*f-E*d*T+h*D*T+S*d*I-h*b*I)*z,l[2]=(g*D*f-E*y*f+E*d*v-h*D*v-g*d*I+h*y*I)*z,l[3]=(S*y*f-g*b*f-S*d*v+h*b*v+g*d*T-h*y*T)*z,l[4]=L*z,l[5]=(_*D*f-x*b*f+x*d*T-a*D*T-_*d*I+a*b*I)*z,l[6]=(x*y*f-m*D*f-x*d*v+a*D*v+m*d*I-a*y*I)*z,l[7]=(m*b*f-_*y*f+_*d*v-a*b*v-m*d*T+a*y*T)*z,l[8]=P*z,l[9]=(x*S*f-_*E*f-x*h*T+a*E*T+_*h*I-a*S*I)*z,l[10]=(m*E*f-x*g*f+x*h*v-a*E*v-m*h*I+a*g*I)*z,l[11]=(_*g*f-m*S*f-_*h*v+a*S*v+m*h*T-a*g*T)*z,l[12]=F*z,l[13]=(_*E*d-x*S*d+x*h*b-a*E*b-_*h*D+a*S*D)*z,l[14]=(x*g*d-m*E*d-x*h*y+a*E*y+m*h*D-a*g*D)*z,l[15]=(m*S*d-_*g*d+_*h*y-a*S*y-m*h*b+a*g*b)*z,this}scale(l){const a=this.elements,h=l.x,d=l.y,f=l.z;return a[0]*=h,a[4]*=d,a[8]*=f,a[1]*=h,a[5]*=d,a[9]*=f,a[2]*=h,a[6]*=d,a[10]*=f,a[3]*=h,a[7]*=d,a[11]*=f,this}getMaxScaleOnAxis(){const l=this.elements;return Math.sqrt(Math.max(l[0]*l[0]+l[1]*l[1]+l[2]*l[2],l[4]*l[4]+l[5]*l[5]+l[6]*l[6],l[8]*l[8]+l[9]*l[9]+l[10]*l[10]))}makeTranslation(l,a,h){return this.set(1,0,0,l,0,1,0,a,0,0,1,h,0,0,0,1),this}makeRotationX(l){const a=Math.cos(l),h=Math.sin(l);return this.set(1,0,0,0,0,a,-h,0,0,h,a,0,0,0,0,1),this}makeRotationY(l){const a=Math.cos(l),h=Math.sin(l);return this.set(a,0,h,0,0,1,0,0,-h,0,a,0,0,0,0,1),this}makeRotationZ(l){const a=Math.cos(l),h=Math.sin(l);return this.set(a,-h,0,0,h,a,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(l,a){const h=Math.cos(a),d=Math.sin(a),f=1-h,m=l.x,g=l.y,y=l.z,v=f*m,_=f*g;return this.set(v*m+h,v*g-d*y,v*y+d*g,0,v*g+d*y,_*g+h,_*y-d*m,0,v*y-d*g,_*y+d*m,f*y*y+h,0,0,0,0,1),this}makeScale(l,a,h){return this.set(l,0,0,0,0,a,0,0,0,0,h,0,0,0,0,1),this}makeShear(l,a,h,d,f,m){return this.set(1,h,f,0,l,1,m,0,a,d,1,0,0,0,0,1),this}compose(l,a,h){const d=this.elements,f=a._x,m=a._y,g=a._z,y=a._w,v=f+f,_=m+m,S=g+g,b=f*v,T=f*_,x=f*S,E=m*_,D=m*S,I=g*S,M=y*v,L=y*_,P=y*S,F=h.x,V=h.y,z=h.z;return d[0]=(1-(E+I))*F,d[1]=(T+P)*F,d[2]=(x-L)*F,d[3]=0,d[4]=(T-P)*V,d[5]=(1-(b+I))*V,d[6]=(D+M)*V,d[7]=0,d[8]=(x+L)*z,d[9]=(D-M)*z,d[10]=(1-(b+E))*z,d[11]=0,d[12]=l.x,d[13]=l.y,d[14]=l.z,d[15]=1,this}decompose(l,a,h){const d=this.elements;let f=S_.set(d[0],d[1],d[2]).length();const m=S_.set(d[4],d[5],d[6]).length(),g=S_.set(d[8],d[9],d[10]).length();this.determinant()<0&&(f=-f),l.x=d[12],l.y=d[13],l.z=d[14],$c.copy(this);const v=1/f,_=1/m,S=1/g;return $c.elements[0]*=v,$c.elements[1]*=v,$c.elements[2]*=v,$c.elements[4]*=_,$c.elements[5]*=_,$c.elements[6]*=_,$c.elements[8]*=S,$c.elements[9]*=S,$c.elements[10]*=S,a.setFromRotationMatrix($c),h.x=f,h.y=m,h.z=g,this}makePerspective(l,a,h,d,f,m){void 0===m&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");const g=this.elements,v=2*f/(h-d),_=(a+l)/(a-l),S=(h+d)/(h-d),b=-(m+f)/(m-f),T=-2*m*f/(m-f);return g[0]=2*f/(a-l),g[4]=0,g[8]=_,g[12]=0,g[1]=0,g[5]=v,g[9]=S,g[13]=0,g[2]=0,g[6]=0,g[10]=b,g[14]=T,g[3]=0,g[7]=0,g[11]=-1,g[15]=0,this}makeOrthographic(l,a,h,d,f,m){const g=this.elements,y=1/(a-l),v=1/(h-d),_=1/(m-f),S=(a+l)*y,b=(h+d)*v,T=(m+f)*_;return g[0]=2*y,g[4]=0,g[8]=0,g[12]=-S,g[1]=0,g[5]=2*v,g[9]=0,g[13]=-b,g[2]=0,g[6]=0,g[10]=-2*_,g[14]=-T,g[3]=0,g[7]=0,g[11]=0,g[15]=1,this}equals(l){const a=this.elements,h=l.elements;for(let d=0;d<16;d++)if(a[d]!==h[d])return!1;return!0}fromArray(l,a=0){for(let h=0;h<16;h++)this.elements[h]=l[h+a];return this}toArray(l=[],a=0){const h=this.elements;return l[a]=h[0],l[a+1]=h[1],l[a+2]=h[2],l[a+3]=h[3],l[a+4]=h[4],l[a+5]=h[5],l[a+6]=h[6],l[a+7]=h[7],l[a+8]=h[8],l[a+9]=h[9],l[a+10]=h[10],l[a+11]=h[11],l[a+12]=h[12],l[a+13]=h[13],l[a+14]=h[14],l[a+15]=h[15],l}}nn.prototype.isMatrix4=!0;const S_=new te,$c=new nn,FWe=new te(0,0,0),kWe=new te(1,1,1),Kf=new te,MD=new te,ml=new te,bte=new nn,Tte=new Hs;class b_{constructor(l=0,a=0,h=0,d=b_.DefaultOrder){this._x=l,this._y=a,this._z=h,this._order=d}get x(){return this._x}set x(l){this._x=l,this._onChangeCallback()}get y(){return this._y}set y(l){this._y=l,this._onChangeCallback()}get z(){return this._z}set z(l){this._z=l,this._onChangeCallback()}get order(){return this._order}set order(l){this._order=l,this._onChangeCallback()}set(l,a,h,d=this._order){return this._x=l,this._y=a,this._z=h,this._order=d,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(l){return this._x=l._x,this._y=l._y,this._z=l._z,this._order=l._order,this._onChangeCallback(),this}setFromRotationMatrix(l,a=this._order,h=!0){const d=l.elements,f=d[0],m=d[4],g=d[8],y=d[1],v=d[5],_=d[9],S=d[2],b=d[6],T=d[10];switch(a){case"XYZ":this._y=Math.asin(_o(g,-1,1)),Math.abs(g)<.9999999?(this._x=Math.atan2(-_,T),this._z=Math.atan2(-m,f)):(this._x=Math.atan2(b,v),this._z=0);break;case"YXZ":this._x=Math.asin(-_o(_,-1,1)),Math.abs(_)<.9999999?(this._y=Math.atan2(g,T),this._z=Math.atan2(y,v)):(this._y=Math.atan2(-S,f),this._z=0);break;case"ZXY":this._x=Math.asin(_o(b,-1,1)),Math.abs(b)<.9999999?(this._y=Math.atan2(-S,T),this._z=Math.atan2(-m,v)):(this._y=0,this._z=Math.atan2(y,f));break;case"ZYX":this._y=Math.asin(-_o(S,-1,1)),Math.abs(S)<.9999999?(this._x=Math.atan2(b,T),this._z=Math.atan2(y,f)):(this._x=0,this._z=Math.atan2(-m,v));break;case"YZX":this._z=Math.asin(_o(y,-1,1)),Math.abs(y)<.9999999?(this._x=Math.atan2(-_,v),this._y=Math.atan2(-S,f)):(this._x=0,this._y=Math.atan2(g,T));break;case"XZY":this._z=Math.asin(-_o(m,-1,1)),Math.abs(m)<.9999999?(this._x=Math.atan2(b,v),this._y=Math.atan2(g,f)):(this._x=Math.atan2(-_,T),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+a)}return this._order=a,!0===h&&this._onChangeCallback(),this}setFromQuaternion(l,a,h){return bte.makeRotationFromQuaternion(l),this.setFromRotationMatrix(bte,a,h)}setFromVector3(l,a=this._order){return this.set(l.x,l.y,l.z,a)}reorder(l){return Tte.setFromEuler(this),this.setFromQuaternion(Tte,l)}equals(l){return l._x===this._x&&l._y===this._y&&l._z===this._z&&l._order===this._order}fromArray(l){return this._x=l[0],this._y=l[1],this._z=l[2],void 0!==l[3]&&(this._order=l[3]),this._onChangeCallback(),this}toArray(l=[],a=0){return l[a]=this._x,l[a+1]=this._y,l[a+2]=this._z,l[a+3]=this._order,l}toVector3(l){return l?l.set(this._x,this._y,this._z):new te(this._x,this._y,this._z)}_onChange(l){return this._onChangeCallback=l,this}_onChangeCallback(){}}b_.prototype.isEuler=!0,b_.DefaultOrder="XYZ",b_.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"];class sV{constructor(){this.mask=1}set(l){this.mask=(1<<l|0)>>>0}enable(l){this.mask|=1<<l|0}enableAll(){this.mask=-1}toggle(l){this.mask^=1<<l|0}disable(l){this.mask&=~(1<<l|0)}disableAll(){this.mask=0}test(l){return 0!=(this.mask&l.mask)}isEnabled(l){return 0!=(this.mask&(1<<l|0))}}let VWe=0;const wte=new te,T_=new Hs,ed=new nn,DD=new te,JT=new te,BWe=new te,UWe=new Hs,Cte=new te(1,0,0),xte=new te(0,1,0),Ete=new te(0,0,1),GWe={type:"added"},Mte={type:"removed"};class Wr extends Xf{constructor(){super(),Object.defineProperty(this,"id",{value:VWe++}),this.uuid=fl(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Wr.DefaultUp.clone();const l=new te,a=new b_,h=new Hs,d=new te(1,1,1);a._onChange(function f(){h.setFromEuler(a,!1)}),h._onChange(function m(){a.setFromQuaternion(h,void 0,!1)}),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:l},rotation:{configurable:!0,enumerable:!0,value:a},quaternion:{configurable:!0,enumerable:!0,value:h},scale:{configurable:!0,enumerable:!0,value:d},modelViewMatrix:{value:new nn},normalMatrix:{value:new ro}}),this.matrix=new nn,this.matrixWorld=new nn,this.matrixAutoUpdate=Wr.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new sV,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(l){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(l),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(l){return this.quaternion.premultiply(l),this}setRotationFromAxisAngle(l,a){this.quaternion.setFromAxisAngle(l,a)}setRotationFromEuler(l){this.quaternion.setFromEuler(l,!0)}setRotationFromMatrix(l){this.quaternion.setFromRotationMatrix(l)}setRotationFromQuaternion(l){this.quaternion.copy(l)}rotateOnAxis(l,a){return T_.setFromAxisAngle(l,a),this.quaternion.multiply(T_),this}rotateOnWorldAxis(l,a){return T_.setFromAxisAngle(l,a),this.quaternion.premultiply(T_),this}rotateX(l){return this.rotateOnAxis(Cte,l)}rotateY(l){return this.rotateOnAxis(xte,l)}rotateZ(l){return this.rotateOnAxis(Ete,l)}translateOnAxis(l,a){return wte.copy(l).applyQuaternion(this.quaternion),this.position.add(wte.multiplyScalar(a)),this}translateX(l){return this.translateOnAxis(Cte,l)}translateY(l){return this.translateOnAxis(xte,l)}translateZ(l){return this.translateOnAxis(Ete,l)}localToWorld(l){return l.applyMatrix4(this.matrixWorld)}worldToLocal(l){return l.applyMatrix4(ed.copy(this.matrixWorld).invert())}lookAt(l,a,h){l.isVector3?DD.copy(l):DD.set(l,a,h);const d=this.parent;this.updateWorldMatrix(!0,!1),JT.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?ed.lookAt(JT,DD,this.up):ed.lookAt(DD,JT,this.up),this.quaternion.setFromRotationMatrix(ed),d&&(ed.extractRotation(d.matrixWorld),T_.setFromRotationMatrix(ed),this.quaternion.premultiply(T_.invert()))}add(l){if(arguments.length>1){for(let a=0;a<arguments.length;a++)this.add(arguments[a]);return this}return l===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",l),this):(l&&l.isObject3D?(null!==l.parent&&l.parent.remove(l),l.parent=this,this.children.push(l),l.dispatchEvent(GWe)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",l),this)}remove(l){if(arguments.length>1){for(let h=0;h<arguments.length;h++)this.remove(arguments[h]);return this}const a=this.children.indexOf(l);return-1!==a&&(l.parent=null,this.children.splice(a,1),l.dispatchEvent(Mte)),this}removeFromParent(){const l=this.parent;return null!==l&&l.remove(this),this}clear(){for(let l=0;l<this.children.length;l++){const a=this.children[l];a.parent=null,a.dispatchEvent(Mte)}return this.children.length=0,this}attach(l){return this.updateWorldMatrix(!0,!1),ed.copy(this.matrixWorld).invert(),null!==l.parent&&(l.parent.updateWorldMatrix(!0,!1),ed.multiply(l.parent.matrixWorld)),l.applyMatrix4(ed),this.add(l),l.updateWorldMatrix(!1,!0),this}getObjectById(l){return this.getObjectByProperty("id",l)}getObjectByName(l){return this.getObjectByProperty("name",l)}getObjectByProperty(l,a){if(this[l]===a)return this;for(let h=0,d=this.children.length;h<d;h++){const m=this.children[h].getObjectByProperty(l,a);if(void 0!==m)return m}}getWorldPosition(l){return this.updateWorldMatrix(!0,!1),l.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(l){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(JT,l,BWe),l}getWorldScale(l){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(JT,UWe,l),l}getWorldDirection(l){this.updateWorldMatrix(!0,!1);const a=this.matrixWorld.elements;return l.set(a[8],a[9],a[10]).normalize()}raycast(){}traverse(l){l(this);const a=this.children;for(let h=0,d=a.length;h<d;h++)a[h].traverse(l)}traverseVisible(l){if(!1===this.visible)return;l(this);const a=this.children;for(let h=0,d=a.length;h<d;h++)a[h].traverseVisible(l)}traverseAncestors(l){const a=this.parent;null!==a&&(l(a),a.traverseAncestors(l))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(l){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||l)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,l=!0);const a=this.children;for(let h=0,d=a.length;h<d;h++)a[h].updateMatrixWorld(l)}updateWorldMatrix(l,a){const h=this.parent;if(!0===l&&null!==h&&h.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===a){const d=this.children;for(let f=0,m=d.length;f<m;f++)d[f].updateWorldMatrix(!1,!0)}}toJSON(l){const a=void 0===l||"string"==typeof l,h={};a&&(l={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{}},h.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const d={};function f(g,y){return void 0===g[y.uuid]&&(g[y.uuid]=y.toJSON(l)),y.uuid}if(d.uuid=this.uuid,d.type=this.type,""!==this.name&&(d.name=this.name),!0===this.castShadow&&(d.castShadow=!0),!0===this.receiveShadow&&(d.receiveShadow=!0),!1===this.visible&&(d.visible=!1),!1===this.frustumCulled&&(d.frustumCulled=!1),0!==this.renderOrder&&(d.renderOrder=this.renderOrder),"{}"!==JSON.stringify(this.userData)&&(d.userData=this.userData),d.layers=this.layers.mask,d.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(d.matrixAutoUpdate=!1),this.isInstancedMesh&&(d.type="InstancedMesh",d.count=this.count,d.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(d.instanceColor=this.instanceColor.toJSON())),this.isScene)this.background&&(this.background.isColor?d.background=this.background.toJSON():this.background.isTexture&&(d.background=this.background.toJSON(l).uuid)),this.environment&&this.environment.isTexture&&(d.environment=this.environment.toJSON(l).uuid);else if(this.isMesh||this.isLine||this.isPoints){d.geometry=f(l.geometries,this.geometry);const g=this.geometry.parameters;if(void 0!==g&&void 0!==g.shapes){const y=g.shapes;if(Array.isArray(y))for(let v=0,_=y.length;v<_;v++)f(l.shapes,y[v]);else f(l.shapes,y)}}if(this.isSkinnedMesh&&(d.bindMode=this.bindMode,d.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(f(l.skeletons,this.skeleton),d.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){const g=[];for(let y=0,v=this.material.length;y<v;y++)g.push(f(l.materials,this.material[y]));d.material=g}else d.material=f(l.materials,this.material);if(this.children.length>0){d.children=[];for(let g=0;g<this.children.length;g++)d.children.push(this.children[g].toJSON(l).object)}if(this.animations.length>0){d.animations=[];for(let g=0;g<this.animations.length;g++)d.animations.push(f(l.animations,this.animations[g]))}if(a){const g=m(l.geometries),y=m(l.materials),v=m(l.textures),_=m(l.images),S=m(l.shapes),b=m(l.skeletons),T=m(l.animations);g.length>0&&(h.geometries=g),y.length>0&&(h.materials=y),v.length>0&&(h.textures=v),_.length>0&&(h.images=_),S.length>0&&(h.shapes=S),b.length>0&&(h.skeletons=b),T.length>0&&(h.animations=T)}return h.object=d,h;function m(g){const y=[];for(const v in g){const _=g[v];delete _.metadata,y.push(_)}return y}}clone(l){return(new this.constructor).copy(this,l)}copy(l,a=!0){if(this.name=l.name,this.up.copy(l.up),this.position.copy(l.position),this.rotation.order=l.rotation.order,this.quaternion.copy(l.quaternion),this.scale.copy(l.scale),this.matrix.copy(l.matrix),this.matrixWorld.copy(l.matrixWorld),this.matrixAutoUpdate=l.matrixAutoUpdate,this.matrixWorldNeedsUpdate=l.matrixWorldNeedsUpdate,this.layers.mask=l.layers.mask,this.visible=l.visible,this.castShadow=l.castShadow,this.receiveShadow=l.receiveShadow,this.frustumCulled=l.frustumCulled,this.renderOrder=l.renderOrder,this.userData=JSON.parse(JSON.stringify(l.userData)),!0===a)for(let h=0;h<l.children.length;h++)this.add(l.children[h].clone());return this}}Wr.DefaultUp=new te(0,1,0),Wr.DefaultMatrixAutoUpdate=!0,Wr.prototype.isObject3D=!0;const Yc=new te,td=new te,oV=new te,nd=new te,w_=new te,C_=new te,Dte=new te,aV=new te,lV=new te,cV=new te;class As{constructor(l=new te,a=new te,h=new te){this.a=l,this.b=a,this.c=h}static getNormal(l,a,h,d){d.subVectors(h,a),Yc.subVectors(l,a),d.cross(Yc);const f=d.lengthSq();return f>0?d.multiplyScalar(1/Math.sqrt(f)):d.set(0,0,0)}static getBarycoord(l,a,h,d,f){Yc.subVectors(d,a),td.subVectors(h,a),oV.subVectors(l,a);const m=Yc.dot(Yc),g=Yc.dot(td),y=Yc.dot(oV),v=td.dot(td),_=td.dot(oV),S=m*v-g*g;if(0===S)return f.set(-2,-1,-1);const b=1/S,T=(v*y-g*_)*b,x=(m*_-g*y)*b;return f.set(1-T-x,x,T)}static containsPoint(l,a,h,d){return this.getBarycoord(l,a,h,d,nd),nd.x>=0&&nd.y>=0&&nd.x+nd.y<=1}static getUV(l,a,h,d,f,m,g,y){return this.getBarycoord(l,a,h,d,nd),y.set(0,0),y.addScaledVector(f,nd.x),y.addScaledVector(m,nd.y),y.addScaledVector(g,nd.z),y}static isFrontFacing(l,a,h,d){return Yc.subVectors(h,a),td.subVectors(l,a),Yc.cross(td).dot(d)<0}set(l,a,h){return this.a.copy(l),this.b.copy(a),this.c.copy(h),this}setFromPointsAndIndices(l,a,h,d){return this.a.copy(l[a]),this.b.copy(l[h]),this.c.copy(l[d]),this}setFromAttributeAndIndices(l,a,h,d){return this.a.fromBufferAttribute(l,a),this.b.fromBufferAttribute(l,h),this.c.fromBufferAttribute(l,d),this}clone(){return(new this.constructor).copy(this)}copy(l){return this.a.copy(l.a),this.b.copy(l.b),this.c.copy(l.c),this}getArea(){return Yc.subVectors(this.c,this.b),td.subVectors(this.a,this.b),.5*Yc.cross(td).length()}getMidpoint(l){return l.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(l){return As.getNormal(this.a,this.b,this.c,l)}getPlane(l){return l.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(l,a){return As.getBarycoord(l,this.a,this.b,this.c,a)}getUV(l,a,h,d,f){return As.getUV(l,this.a,this.b,this.c,a,h,d,f)}containsPoint(l){return As.containsPoint(l,this.a,this.b,this.c)}isFrontFacing(l){return As.isFrontFacing(this.a,this.b,this.c,l)}intersectsBox(l){return l.intersectsTriangle(this)}closestPointToPoint(l,a){const h=this.a,d=this.b,f=this.c;let m,g;w_.subVectors(d,h),C_.subVectors(f,h),aV.subVectors(l,h);const y=w_.dot(aV),v=C_.dot(aV);if(y<=0&&v<=0)return a.copy(h);lV.subVectors(l,d);const _=w_.dot(lV),S=C_.dot(lV);if(_>=0&&S<=_)return a.copy(d);const b=y*S-_*v;if(b<=0&&y>=0&&_<=0)return m=y/(y-_),a.copy(h).addScaledVector(w_,m);cV.subVectors(l,f);const T=w_.dot(cV),x=C_.dot(cV);if(x>=0&&T<=x)return a.copy(f);const E=T*v-y*x;if(E<=0&&v>=0&&x<=0)return g=v/(v-x),a.copy(h).addScaledVector(C_,g);const D=_*x-T*S;if(D<=0&&S-_>=0&&T-x>=0)return Dte.subVectors(f,d),g=(S-_)/(S-_+(T-x)),a.copy(d).addScaledVector(Dte,g);const I=1/(D+E+b);return m=E*I,g=b*I,a.copy(h).addScaledVector(w_,m).addScaledVector(C_,g)}equals(l){return l.a.equals(this.a)&&l.b.equals(this.b)&&l.c.equals(this.c)}}let zWe=0;class Is extends Xf{constructor(){super(),Object.defineProperty(this,"id",{value:zWe++}),this.uuid=fl(),this.name="",this.type="Material",this.fog=!0,this.blending=1,this.side=0,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=204,this.blendDst=205,this.blendEquation=100,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=3,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=519,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=7680,this.stencilZFail=7680,this.stencilZPass=7680,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(l){this._alphaTest>0!=l>0&&this.version++,this._alphaTest=l}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(l){if(void 0!==l)for(const a in l){const h=l[a];if(void 0===h){console.warn("THREE.Material: '"+a+"' parameter is undefined.");continue}if("shading"===a){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=1===h;continue}const d=this[a];void 0!==d?d&&d.isColor?d.set(h):d&&d.isVector3&&h&&h.isVector3?d.copy(h):this[a]=h:console.warn("THREE."+this.type+": '"+a+"' is not a property of this material.")}}toJSON(l){const a=void 0===l||"string"==typeof l;a&&(l={textures:{},images:{}});const h={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};function d(f){const m=[];for(const g in f){const y=f[g];delete y.metadata,m.push(y)}return m}if(h.uuid=this.uuid,h.type=this.type,""!==this.name&&(h.name=this.name),this.color&&this.color.isColor&&(h.color=this.color.getHex()),void 0!==this.roughness&&(h.roughness=this.roughness),void 0!==this.metalness&&(h.metalness=this.metalness),void 0!==this.sheen&&(h.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(h.sheenColor=this.sheenColor.getHex()),void 0!==this.sheenRoughness&&(h.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(h.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(h.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(h.specular=this.specular.getHex()),void 0!==this.specularIntensity&&(h.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(h.specularColor=this.specularColor.getHex()),void 0!==this.shininess&&(h.shininess=this.shininess),void 0!==this.clearcoat&&(h.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(h.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(h.clearcoatMap=this.clearcoatMap.toJSON(l).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(h.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(l).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(h.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(l).uuid,h.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.map&&this.map.isTexture&&(h.map=this.map.toJSON(l).uuid),this.matcap&&this.matcap.isTexture&&(h.matcap=this.matcap.toJSON(l).uuid),this.alphaMap&&this.alphaMap.isTexture&&(h.alphaMap=this.alphaMap.toJSON(l).uuid),this.lightMap&&this.lightMap.isTexture&&(h.lightMap=this.lightMap.toJSON(l).uuid,h.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(h.aoMap=this.aoMap.toJSON(l).uuid,h.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(h.bumpMap=this.bumpMap.toJSON(l).uuid,h.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(h.normalMap=this.normalMap.toJSON(l).uuid,h.normalMapType=this.normalMapType,h.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(h.displacementMap=this.displacementMap.toJSON(l).uuid,h.displacementScale=this.displacementScale,h.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(h.roughnessMap=this.roughnessMap.toJSON(l).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(h.metalnessMap=this.metalnessMap.toJSON(l).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(h.emissiveMap=this.emissiveMap.toJSON(l).uuid),this.specularMap&&this.specularMap.isTexture&&(h.specularMap=this.specularMap.toJSON(l).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(h.specularIntensityMap=this.specularIntensityMap.toJSON(l).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(h.specularColorMap=this.specularColorMap.toJSON(l).uuid),this.envMap&&this.envMap.isTexture&&(h.envMap=this.envMap.toJSON(l).uuid,void 0!==this.combine&&(h.combine=this.combine)),void 0!==this.envMapIntensity&&(h.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(h.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(h.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(h.gradientMap=this.gradientMap.toJSON(l).uuid),void 0!==this.transmission&&(h.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(h.transmissionMap=this.transmissionMap.toJSON(l).uuid),void 0!==this.thickness&&(h.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(h.thicknessMap=this.thicknessMap.toJSON(l).uuid),void 0!==this.attenuationDistance&&(h.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationColor&&(h.attenuationColor=this.attenuationColor.getHex()),void 0!==this.size&&(h.size=this.size),null!==this.shadowSide&&(h.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(h.sizeAttenuation=this.sizeAttenuation),1!==this.blending&&(h.blending=this.blending),0!==this.side&&(h.side=this.side),this.vertexColors&&(h.vertexColors=!0),this.opacity<1&&(h.opacity=this.opacity),!0===this.transparent&&(h.transparent=this.transparent),h.depthFunc=this.depthFunc,h.depthTest=this.depthTest,h.depthWrite=this.depthWrite,h.colorWrite=this.colorWrite,h.stencilWrite=this.stencilWrite,h.stencilWriteMask=this.stencilWriteMask,h.stencilFunc=this.stencilFunc,h.stencilRef=this.stencilRef,h.stencilFuncMask=this.stencilFuncMask,h.stencilFail=this.stencilFail,h.stencilZFail=this.stencilZFail,h.stencilZPass=this.stencilZPass,this.rotation&&0!==this.rotation&&(h.rotation=this.rotation),!0===this.polygonOffset&&(h.polygonOffset=!0),0!==this.polygonOffsetFactor&&(h.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(h.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth&&1!==this.linewidth&&(h.linewidth=this.linewidth),void 0!==this.dashSize&&(h.dashSize=this.dashSize),void 0!==this.gapSize&&(h.gapSize=this.gapSize),void 0!==this.scale&&(h.scale=this.scale),!0===this.dithering&&(h.dithering=!0),this.alphaTest>0&&(h.alphaTest=this.alphaTest),!0===this.alphaToCoverage&&(h.alphaToCoverage=this.alphaToCoverage),!0===this.premultipliedAlpha&&(h.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(h.wireframe=this.wireframe),this.wireframeLinewidth>1&&(h.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(h.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(h.wireframeLinejoin=this.wireframeLinejoin),!0===this.flatShading&&(h.flatShading=this.flatShading),!1===this.visible&&(h.visible=!1),!1===this.toneMapped&&(h.toneMapped=!1),"{}"!==JSON.stringify(this.userData)&&(h.userData=this.userData),a){const f=d(l.textures),m=d(l.images);f.length>0&&(h.textures=f),m.length>0&&(h.images=m)}return h}clone(){return(new this.constructor).copy(this)}copy(l){this.name=l.name,this.fog=l.fog,this.blending=l.blending,this.side=l.side,this.vertexColors=l.vertexColors,this.opacity=l.opacity,this.transparent=l.transparent,this.blendSrc=l.blendSrc,this.blendDst=l.blendDst,this.blendEquation=l.blendEquation,this.blendSrcAlpha=l.blendSrcAlpha,this.blendDstAlpha=l.blendDstAlpha,this.blendEquationAlpha=l.blendEquationAlpha,this.depthFunc=l.depthFunc,this.depthTest=l.depthTest,this.depthWrite=l.depthWrite,this.stencilWriteMask=l.stencilWriteMask,this.stencilFunc=l.stencilFunc,this.stencilRef=l.stencilRef,this.stencilFuncMask=l.stencilFuncMask,this.stencilFail=l.stencilFail,this.stencilZFail=l.stencilZFail,this.stencilZPass=l.stencilZPass,this.stencilWrite=l.stencilWrite;const a=l.clippingPlanes;let h=null;if(null!==a){const d=a.length;h=new Array(d);for(let f=0;f!==d;++f)h[f]=a[f].clone()}return this.clippingPlanes=h,this.clipIntersection=l.clipIntersection,this.clipShadows=l.clipShadows,this.shadowSide=l.shadowSide,this.colorWrite=l.colorWrite,this.precision=l.precision,this.polygonOffset=l.polygonOffset,this.polygonOffsetFactor=l.polygonOffsetFactor,this.polygonOffsetUnits=l.polygonOffsetUnits,this.dithering=l.dithering,this.alphaTest=l.alphaTest,this.alphaToCoverage=l.alphaToCoverage,this.premultipliedAlpha=l.premultipliedAlpha,this.visible=l.visible,this.toneMapped=l.toneMapped,this.userData=JSON.parse(JSON.stringify(l.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(l){!0===l&&this.version++}}Is.prototype.isMaterial=!0;class gl extends Is{constructor(l){super(),this.type="MeshBasicMaterial",this.color=new At(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.setValues(l)}copy(l){return super.copy(l),this.color.copy(l.color),this.map=l.map,this.lightMap=l.lightMap,this.lightMapIntensity=l.lightMapIntensity,this.aoMap=l.aoMap,this.aoMapIntensity=l.aoMapIntensity,this.specularMap=l.specularMap,this.alphaMap=l.alphaMap,this.envMap=l.envMap,this.combine=l.combine,this.reflectivity=l.reflectivity,this.refractionRatio=l.refractionRatio,this.wireframe=l.wireframe,this.wireframeLinewidth=l.wireframeLinewidth,this.wireframeLinecap=l.wireframeLinecap,this.wireframeLinejoin=l.wireframeLinejoin,this}}gl.prototype.isMeshBasicMaterial=!0;const bi=new te,AD=new Je;class ii{constructor(l,a,h){if(Array.isArray(l))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.name="",this.array=l,this.itemSize=a,this.count=void 0!==l?l.length/a:0,this.normalized=!0===h,this.usage=qT,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}set needsUpdate(l){!0===l&&this.version++}setUsage(l){return this.usage=l,this}copy(l){return this.name=l.name,this.array=new l.array.constructor(l.array),this.itemSize=l.itemSize,this.count=l.count,this.normalized=l.normalized,this.usage=l.usage,this}copyAt(l,a,h){l*=this.itemSize,h*=a.itemSize;for(let d=0,f=this.itemSize;d<f;d++)this.array[l+d]=a.array[h+d];return this}copyArray(l){return this.array.set(l),this}copyColorsArray(l){const a=this.array;let h=0;for(let d=0,f=l.length;d<f;d++){let m=l[d];void 0===m&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",d),m=new At),a[h++]=m.r,a[h++]=m.g,a[h++]=m.b}return this}copyVector2sArray(l){const a=this.array;let h=0;for(let d=0,f=l.length;d<f;d++){let m=l[d];void 0===m&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",d),m=new Je),a[h++]=m.x,a[h++]=m.y}return this}copyVector3sArray(l){const a=this.array;let h=0;for(let d=0,f=l.length;d<f;d++){let m=l[d];void 0===m&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",d),m=new te),a[h++]=m.x,a[h++]=m.y,a[h++]=m.z}return this}copyVector4sArray(l){const a=this.array;let h=0;for(let d=0,f=l.length;d<f;d++){let m=l[d];void 0===m&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",d),m=new ai),a[h++]=m.x,a[h++]=m.y,a[h++]=m.z,a[h++]=m.w}return this}applyMatrix3(l){if(2===this.itemSize)for(let a=0,h=this.count;a<h;a++)AD.fromBufferAttribute(this,a),AD.applyMatrix3(l),this.setXY(a,AD.x,AD.y);else if(3===this.itemSize)for(let a=0,h=this.count;a<h;a++)bi.fromBufferAttribute(this,a),bi.applyMatrix3(l),this.setXYZ(a,bi.x,bi.y,bi.z);return this}applyMatrix4(l){for(let a=0,h=this.count;a<h;a++)bi.x=this.getX(a),bi.y=this.getY(a),bi.z=this.getZ(a),bi.applyMatrix4(l),this.setXYZ(a,bi.x,bi.y,bi.z);return this}applyNormalMatrix(l){for(let a=0,h=this.count;a<h;a++)bi.x=this.getX(a),bi.y=this.getY(a),bi.z=this.getZ(a),bi.applyNormalMatrix(l),this.setXYZ(a,bi.x,bi.y,bi.z);return this}transformDirection(l){for(let a=0,h=this.count;a<h;a++)bi.x=this.getX(a),bi.y=this.getY(a),bi.z=this.getZ(a),bi.transformDirection(l),this.setXYZ(a,bi.x,bi.y,bi.z);return this}set(l,a=0){return this.array.set(l,a),this}getX(l){return this.array[l*this.itemSize]}setX(l,a){return this.array[l*this.itemSize]=a,this}getY(l){return this.array[l*this.itemSize+1]}setY(l,a){return this.array[l*this.itemSize+1]=a,this}getZ(l){return this.array[l*this.itemSize+2]}setZ(l,a){return this.array[l*this.itemSize+2]=a,this}getW(l){return this.array[l*this.itemSize+3]}setW(l,a){return this.array[l*this.itemSize+3]=a,this}setXY(l,a,h){return this.array[0+(l*=this.itemSize)]=a,this.array[l+1]=h,this}setXYZ(l,a,h,d){return this.array[0+(l*=this.itemSize)]=a,this.array[l+1]=h,this.array[l+2]=d,this}setXYZW(l,a,h,d,f){return this.array[0+(l*=this.itemSize)]=a,this.array[l+1]=h,this.array[l+2]=d,this.array[l+3]=f,this}onUpload(l){return this.onUploadCallback=l,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const l={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.prototype.slice.call(this.array),normalized:this.normalized};return""!==this.name&&(l.name=this.name),this.usage!==qT&&(l.usage=this.usage),(0!==this.updateRange.offset||-1!==this.updateRange.count)&&(l.updateRange=this.updateRange),l}}ii.prototype.isBufferAttribute=!0;class uV extends ii{constructor(l,a,h){super(new Uint16Array(l),a,h)}}class hV extends ii{constructor(l,a,h){super(new Uint32Array(l),a,h)}}(class $We extends ii{constructor(l,a,h){super(new Uint16Array(l),a,h)}}).prototype.isFloat16BufferAttribute=!0;class rn extends ii{constructor(l,a,h){super(new Float32Array(l),a,h)}}let ZWe=0;const $l=new nn,dV=new Wr,x_=new te,yl=new pl,e1=new pl,io=new te;class Mn extends Xf{constructor(){super(),Object.defineProperty(this,"id",{value:ZWe++}),this.uuid=fl(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(l){return this.index=Array.isArray(l)?new(yte(l)?hV:uV)(l,1):l,this}getAttribute(l){return this.attributes[l]}setAttribute(l,a){return this.attributes[l]=a,this}deleteAttribute(l){return delete this.attributes[l],this}hasAttribute(l){return void 0!==this.attributes[l]}addGroup(l,a,h=0){this.groups.push({start:l,count:a,materialIndex:h})}clearGroups(){this.groups=[]}setDrawRange(l,a){this.drawRange.start=l,this.drawRange.count=a}applyMatrix4(l){const a=this.attributes.position;void 0!==a&&(a.applyMatrix4(l),a.needsUpdate=!0);const h=this.attributes.normal;if(void 0!==h){const f=(new ro).getNormalMatrix(l);h.applyNormalMatrix(f),h.needsUpdate=!0}const d=this.attributes.tangent;return void 0!==d&&(d.transformDirection(l),d.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}applyQuaternion(l){return $l.makeRotationFromQuaternion(l),this.applyMatrix4($l),this}rotateX(l){return $l.makeRotationX(l),this.applyMatrix4($l),this}rotateY(l){return $l.makeRotationY(l),this.applyMatrix4($l),this}rotateZ(l){return $l.makeRotationZ(l),this.applyMatrix4($l),this}translate(l,a,h){return $l.makeTranslation(l,a,h),this.applyMatrix4($l),this}scale(l,a,h){return $l.makeScale(l,a,h),this.applyMatrix4($l),this}lookAt(l){return dV.lookAt(l),dV.updateMatrix(),this.applyMatrix4(dV.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(x_).negate(),this.translate(x_.x,x_.y,x_.z),this}setFromPoints(l){const a=[];for(let h=0,d=l.length;h<d;h++){const f=l[h];a.push(f.x,f.y,f.z||0)}return this.setAttribute("position",new rn(a,3)),this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new pl);const l=this.attributes.position,a=this.morphAttributes.position;if(l&&l.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingBox.set(new te(-1/0,-1/0,-1/0),new te(1/0,1/0,1/0));if(void 0!==l){if(this.boundingBox.setFromBufferAttribute(l),a)for(let h=0,d=a.length;h<d;h++)yl.setFromBufferAttribute(a[h]),this.morphTargetsRelative?(io.addVectors(this.boundingBox.min,yl.min),this.boundingBox.expandByPoint(io),io.addVectors(this.boundingBox.max,yl.max),this.boundingBox.expandByPoint(io)):(this.boundingBox.expandByPoint(yl.min),this.boundingBox.expandByPoint(yl.max))}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new Yf);const l=this.attributes.position,a=this.morphAttributes.position;if(l&&l.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingSphere.set(new te,1/0);if(l){const h=this.boundingSphere.center;if(yl.setFromBufferAttribute(l),a)for(let f=0,m=a.length;f<m;f++)e1.setFromBufferAttribute(a[f]),this.morphTargetsRelative?(io.addVectors(yl.min,e1.min),yl.expandByPoint(io),io.addVectors(yl.max,e1.max),yl.expandByPoint(io)):(yl.expandByPoint(e1.min),yl.expandByPoint(e1.max));yl.getCenter(h);let d=0;for(let f=0,m=l.count;f<m;f++)io.fromBufferAttribute(l,f),d=Math.max(d,h.distanceToSquared(io));if(a)for(let f=0,m=a.length;f<m;f++){const g=a[f],y=this.morphTargetsRelative;for(let v=0,_=g.count;v<_;v++)io.fromBufferAttribute(g,v),y&&(x_.fromBufferAttribute(l,v),io.add(x_)),d=Math.max(d,h.distanceToSquared(io))}this.boundingSphere.radius=Math.sqrt(d),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const l=this.index,a=this.attributes;if(null===l||void 0===a.position||void 0===a.normal||void 0===a.uv)return void console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");const h=l.array,d=a.position.array,f=a.normal.array,m=a.uv.array,g=d.length/3;void 0===a.tangent&&this.setAttribute("tangent",new ii(new Float32Array(4*g),4));const y=a.tangent.array,v=[],_=[];for(let se=0;se<g;se++)v[se]=new te,_[se]=new te;const S=new te,b=new te,T=new te,x=new Je,E=new Je,D=new Je,I=new te,M=new te;function L(se,W,Q){S.fromArray(d,3*se),b.fromArray(d,3*W),T.fromArray(d,3*Q),x.fromArray(m,2*se),E.fromArray(m,2*W),D.fromArray(m,2*Q),b.sub(S),T.sub(S),E.sub(x),D.sub(x);const ie=1/(E.x*D.y-D.x*E.y);!isFinite(ie)||(I.copy(b).multiplyScalar(D.y).addScaledVector(T,-E.y).multiplyScalar(ie),M.copy(T).multiplyScalar(E.x).addScaledVector(b,-D.x).multiplyScalar(ie),v[se].add(I),v[W].add(I),v[Q].add(I),_[se].add(M),_[W].add(M),_[Q].add(M))}let P=this.groups;0===P.length&&(P=[{start:0,count:h.length}]);for(let se=0,W=P.length;se<W;++se){const Q=P[se],ie=Q.start;for(let he=ie,J=ie+Q.count;he<J;he+=3)L(h[he+0],h[he+1],h[he+2])}const F=new te,V=new te,z=new te,q=new te;function K(se){z.fromArray(f,3*se),q.copy(z);const W=v[se];F.copy(W),F.sub(z.multiplyScalar(z.dot(W))).normalize(),V.crossVectors(q,W);const ie=V.dot(_[se])<0?-1:1;y[4*se]=F.x,y[4*se+1]=F.y,y[4*se+2]=F.z,y[4*se+3]=ie}for(let se=0,W=P.length;se<W;++se){const Q=P[se],ie=Q.start;for(let he=ie,J=ie+Q.count;he<J;he+=3)K(h[he+0]),K(h[he+1]),K(h[he+2])}}computeVertexNormals(){const l=this.index,a=this.getAttribute("position");if(void 0!==a){let h=this.getAttribute("normal");if(void 0===h)h=new ii(new Float32Array(3*a.count),3),this.setAttribute("normal",h);else for(let b=0,T=h.count;b<T;b++)h.setXYZ(b,0,0,0);const d=new te,f=new te,m=new te,g=new te,y=new te,v=new te,_=new te,S=new te;if(l)for(let b=0,T=l.count;b<T;b+=3){const x=l.getX(b+0),E=l.getX(b+1),D=l.getX(b+2);d.fromBufferAttribute(a,x),f.fromBufferAttribute(a,E),m.fromBufferAttribute(a,D),_.subVectors(m,f),S.subVectors(d,f),_.cross(S),g.fromBufferAttribute(h,x),y.fromBufferAttribute(h,E),v.fromBufferAttribute(h,D),g.add(_),y.add(_),v.add(_),h.setXYZ(x,g.x,g.y,g.z),h.setXYZ(E,y.x,y.y,y.z),h.setXYZ(D,v.x,v.y,v.z)}else for(let b=0,T=a.count;b<T;b+=3)d.fromBufferAttribute(a,b+0),f.fromBufferAttribute(a,b+1),m.fromBufferAttribute(a,b+2),_.subVectors(m,f),S.subVectors(d,f),_.cross(S),h.setXYZ(b+0,_.x,_.y,_.z),h.setXYZ(b+1,_.x,_.y,_.z),h.setXYZ(b+2,_.x,_.y,_.z);this.normalizeNormals(),h.needsUpdate=!0}}merge(l,a){if(!l||!l.isBufferGeometry)return void console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",l);void 0===a&&(a=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));const h=this.attributes;for(const d in h){if(void 0===l.attributes[d])continue;const m=h[d].array,g=l.attributes[d],y=g.array,v=g.itemSize*a,_=Math.min(y.length,m.length-v);for(let S=0,b=v;S<_;S++,b++)m[b]=y[S]}return this}normalizeNormals(){const l=this.attributes.normal;for(let a=0,h=l.count;a<h;a++)io.fromBufferAttribute(l,a),io.normalize(),l.setXYZ(a,io.x,io.y,io.z)}toNonIndexed(){function l(g,y){const v=g.array,_=g.itemSize,S=g.normalized,b=new v.constructor(y.length*_);let T=0,x=0;for(let E=0,D=y.length;E<D;E++){T=g.isInterleavedBufferAttribute?y[E]*g.data.stride+g.offset:y[E]*_;for(let I=0;I<_;I++)b[x++]=v[T++]}return new ii(b,_,S)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const a=new Mn,h=this.index.array,d=this.attributes;for(const g in d){const v=l(d[g],h);a.setAttribute(g,v)}const f=this.morphAttributes;for(const g in f){const y=[],v=f[g];for(let _=0,S=v.length;_<S;_++){const T=l(v[_],h);y.push(T)}a.morphAttributes[g]=y}a.morphTargetsRelative=this.morphTargetsRelative;const m=this.groups;for(let g=0,y=m.length;g<y;g++){const v=m[g];a.addGroup(v.start,v.count,v.materialIndex)}return a}toJSON(){const l={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(l.uuid=this.uuid,l.type=this.type,""!==this.name&&(l.name=this.name),Object.keys(this.userData).length>0&&(l.userData=this.userData),void 0!==this.parameters){const y=this.parameters;for(const v in y)void 0!==y[v]&&(l[v]=y[v]);return l}l.data={attributes:{}};const a=this.index;null!==a&&(l.data.index={type:a.array.constructor.name,array:Array.prototype.slice.call(a.array)});const h=this.attributes;for(const y in h)l.data.attributes[y]=h[y].toJSON(l.data);const d={};let f=!1;for(const y in this.morphAttributes){const v=this.morphAttributes[y],_=[];for(let S=0,b=v.length;S<b;S++)_.push(v[S].toJSON(l.data));_.length>0&&(d[y]=_,f=!0)}f&&(l.data.morphAttributes=d,l.data.morphTargetsRelative=this.morphTargetsRelative);const m=this.groups;m.length>0&&(l.data.groups=JSON.parse(JSON.stringify(m)));const g=this.boundingSphere;return null!==g&&(l.data.boundingSphere={center:g.center.toArray(),radius:g.radius}),l}clone(){return(new this.constructor).copy(this)}copy(l){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const a={};this.name=l.name;const h=l.index;null!==h&&this.setIndex(h.clone(a));const d=l.attributes;for(const v in d)this.setAttribute(v,d[v].clone(a));const f=l.morphAttributes;for(const v in f){const _=[],S=f[v];for(let b=0,T=S.length;b<T;b++)_.push(S[b].clone(a));this.morphAttributes[v]=_}this.morphTargetsRelative=l.morphTargetsRelative;const m=l.groups;for(let v=0,_=m.length;v<_;v++){const S=m[v];this.addGroup(S.start,S.count,S.materialIndex)}const g=l.boundingBox;null!==g&&(this.boundingBox=g.clone());const y=l.boundingSphere;return null!==y&&(this.boundingSphere=y.clone()),this.drawRange.start=l.drawRange.start,this.drawRange.count=l.drawRange.count,this.userData=l.userData,void 0!==l.parameters&&(this.parameters=Object.assign({},l.parameters)),this}dispose(){this.dispatchEvent({type:"dispose"})}}Mn.prototype.isBufferGeometry=!0;const Ate=new nn,E_=new Xm,fV=new Yf,Qf=new te,Jf=new te,ep=new te,pV=new te,mV=new te,gV=new te,ID=new te,RD=new te,PD=new te,LD=new Je,OD=new Je,ND=new Je,yV=new te,FD=new te;class ds extends Wr{constructor(l=new Mn,a=new gl){super(),this.type="Mesh",this.geometry=l,this.material=a,this.updateMorphTargets()}copy(l){return super.copy(l),void 0!==l.morphTargetInfluences&&(this.morphTargetInfluences=l.morphTargetInfluences.slice()),void 0!==l.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},l.morphTargetDictionary)),this.material=l.material,this.geometry=l.geometry,this}updateMorphTargets(){const l=this.geometry;if(l.isBufferGeometry){const a=l.morphAttributes,h=Object.keys(a);if(h.length>0){const d=a[h[0]];if(void 0!==d){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let f=0,m=d.length;f<m;f++){const g=d[f].name||String(f);this.morphTargetInfluences.push(0),this.morphTargetDictionary[g]=f}}}}else{const a=l.morphTargets;void 0!==a&&a.length>0&&console.error("THREE.Mesh.updateMorphTargets() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}}raycast(l,a){const h=this.geometry,d=this.material,f=this.matrixWorld;if(void 0===d||(null===h.boundingSphere&&h.computeBoundingSphere(),fV.copy(h.boundingSphere),fV.applyMatrix4(f),!1===l.ray.intersectsSphere(fV))||(Ate.copy(f).invert(),E_.copy(l.ray).applyMatrix4(Ate),null!==h.boundingBox&&!1===E_.intersectsBox(h.boundingBox)))return;let m;if(h.isBufferGeometry){const g=h.index,y=h.attributes.position,v=h.morphAttributes.position,_=h.morphTargetsRelative,S=h.attributes.uv,b=h.attributes.uv2,T=h.groups,x=h.drawRange;if(null!==g)if(Array.isArray(d))for(let E=0,D=T.length;E<D;E++){const I=T[E],M=d[I.materialIndex];for(let F=Math.max(I.start,x.start),V=Math.min(g.count,Math.min(I.start+I.count,x.start+x.count));F<V;F+=3){const z=g.getX(F),q=g.getX(F+1),K=g.getX(F+2);m=kD(this,M,l,E_,y,v,_,S,b,z,q,K),m&&(m.faceIndex=Math.floor(F/3),m.face.materialIndex=I.materialIndex,a.push(m))}}else for(let I=Math.max(0,x.start),M=Math.min(g.count,x.start+x.count);I<M;I+=3){const L=g.getX(I),P=g.getX(I+1),F=g.getX(I+2);m=kD(this,d,l,E_,y,v,_,S,b,L,P,F),m&&(m.faceIndex=Math.floor(I/3),a.push(m))}else if(void 0!==y)if(Array.isArray(d))for(let E=0,D=T.length;E<D;E++){const I=T[E],M=d[I.materialIndex];for(let F=Math.max(I.start,x.start),V=Math.min(y.count,Math.min(I.start+I.count,x.start+x.count));F<V;F+=3)m=kD(this,M,l,E_,y,v,_,S,b,F,F+1,F+2),m&&(m.faceIndex=Math.floor(F/3),m.face.materialIndex=I.materialIndex,a.push(m))}else for(let I=Math.max(0,x.start),M=Math.min(y.count,x.start+x.count);I<M;I+=3)m=kD(this,d,l,E_,y,v,_,S,b,I,I+1,I+2),m&&(m.faceIndex=Math.floor(I/3),a.push(m))}else h.isGeometry&&console.error("THREE.Mesh.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}}function kD(c,l,a,h,d,f,m,g,y,v,_,S){Qf.fromBufferAttribute(d,v),Jf.fromBufferAttribute(d,_),ep.fromBufferAttribute(d,S);const b=c.morphTargetInfluences;if(f&&b){ID.set(0,0,0),RD.set(0,0,0),PD.set(0,0,0);for(let x=0,E=f.length;x<E;x++){const D=b[x],I=f[x];0!==D&&(pV.fromBufferAttribute(I,v),mV.fromBufferAttribute(I,_),gV.fromBufferAttribute(I,S),m?(ID.addScaledVector(pV,D),RD.addScaledVector(mV,D),PD.addScaledVector(gV,D)):(ID.addScaledVector(pV.sub(Qf),D),RD.addScaledVector(mV.sub(Jf),D),PD.addScaledVector(gV.sub(ep),D)))}Qf.add(ID),Jf.add(RD),ep.add(PD)}c.isSkinnedMesh&&(c.boneTransform(v,Qf),c.boneTransform(_,Jf),c.boneTransform(S,ep));const T=function KWe(c,l,a,h,d,f,m,g){let y;if(y=1===l.side?h.intersectTriangle(m,f,d,!0,g):h.intersectTriangle(d,f,m,2!==l.side,g),null===y)return null;FD.copy(g),FD.applyMatrix4(c.matrixWorld);const v=a.ray.origin.distanceTo(FD);return v<a.near||v>a.far?null:{distance:v,point:FD.clone(),object:c}}(c,l,a,h,Qf,Jf,ep,yV);if(T){g&&(LD.fromBufferAttribute(g,v),OD.fromBufferAttribute(g,_),ND.fromBufferAttribute(g,S),T.uv=As.getUV(yV,Qf,Jf,ep,LD,OD,ND,new Je)),y&&(LD.fromBufferAttribute(y,v),OD.fromBufferAttribute(y,_),ND.fromBufferAttribute(y,S),T.uv2=As.getUV(yV,Qf,Jf,ep,LD,OD,ND,new Je));const x={a:v,b:_,c:S,normal:new te,materialIndex:0};As.getNormal(Qf,Jf,ep,x.normal),T.face=x}return T}ds.prototype.isMesh=!0;class qm extends Mn{constructor(l=1,a=1,h=1,d=1,f=1,m=1){super(),this.type="BoxGeometry",this.parameters={width:l,height:a,depth:h,widthSegments:d,heightSegments:f,depthSegments:m};const g=this;d=Math.floor(d),f=Math.floor(f),m=Math.floor(m);const y=[],v=[],_=[],S=[];let b=0,T=0;function x(E,D,I,M,L,P,F,V,z,q,K){const se=P/z,W=F/q,Q=P/2,ie=F/2,ae=V/2,he=z+1,J=q+1;let ce=0,be=0;const we=new te;for(let Ce=0;Ce<J;Ce++){const Te=Ce*W-ie;for(let fe=0;fe<he;fe++)we[E]=(fe*se-Q)*M,we[D]=Te*L,we[I]=ae,v.push(we.x,we.y,we.z),we[E]=0,we[D]=0,we[I]=V>0?1:-1,_.push(we.x,we.y,we.z),S.push(fe/z),S.push(1-Ce/q),ce+=1}for(let Ce=0;Ce<q;Ce++)for(let Te=0;Te<z;Te++){const $e=b+Te+he*(Ce+1),Ve=b+(Te+1)+he*(Ce+1),De=b+(Te+1)+he*Ce;y.push(b+Te+he*Ce,$e,De),y.push($e,Ve,De),be+=6}g.addGroup(T,be,K),T+=be,b+=ce}x("z","y","x",-1,-1,h,a,l,m,f,0),x("z","y","x",1,-1,h,a,-l,m,f,1),x("x","z","y",1,1,l,h,a,d,m,2),x("x","z","y",1,-1,l,h,-a,d,m,3),x("x","y","z",1,-1,l,a,h,d,f,4),x("x","y","z",-1,-1,l,a,-h,d,f,5),this.setIndex(y),this.setAttribute("position",new rn(v,3)),this.setAttribute("normal",new rn(_,3)),this.setAttribute("uv",new rn(S,2))}static fromJSON(l){return new qm(l.width,l.height,l.depth,l.widthSegments,l.heightSegments,l.depthSegments)}}function M_(c){const l={};for(const a in c){l[a]={};for(const h in c[a]){const d=c[a][h];l[a][h]=d&&(d.isColor||d.isMatrix3||d.isMatrix4||d.isVector2||d.isVector3||d.isVector4||d.isTexture||d.isQuaternion)?d.clone():Array.isArray(d)?d.slice():d}}return l}function Uo(c){const l={};for(let a=0;a<c.length;a++){const h=M_(c[a]);for(const d in h)l[d]=h[d]}return l}const QWe={clone:M_,merge:Uo};class rd extends Is{constructor(l){super(),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,void 0!==l&&(void 0!==l.attributes&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(l))}copy(l){return super.copy(l),this.fragmentShader=l.fragmentShader,this.vertexShader=l.vertexShader,this.uniforms=M_(l.uniforms),this.defines=Object.assign({},l.defines),this.wireframe=l.wireframe,this.wireframeLinewidth=l.wireframeLinewidth,this.lights=l.lights,this.clipping=l.clipping,this.extensions=Object.assign({},l.extensions),this.glslVersion=l.glslVersion,this}toJSON(l){const a=super.toJSON(l);a.glslVersion=this.glslVersion,a.uniforms={};for(const d in this.uniforms){const m=this.uniforms[d].value;a.uniforms[d]=m&&m.isTexture?{type:"t",value:m.toJSON(l).uuid}:m&&m.isColor?{type:"c",value:m.getHex()}:m&&m.isVector2?{type:"v2",value:m.toArray()}:m&&m.isVector3?{type:"v3",value:m.toArray()}:m&&m.isVector4?{type:"v4",value:m.toArray()}:m&&m.isMatrix3?{type:"m3",value:m.toArray()}:m&&m.isMatrix4?{type:"m4",value:m.toArray()}:{value:m}}Object.keys(this.defines).length>0&&(a.defines=this.defines),a.vertexShader=this.vertexShader,a.fragmentShader=this.fragmentShader;const h={};for(const d in this.extensions)!0===this.extensions[d]&&(h[d]=!0);return Object.keys(h).length>0&&(a.extensions=h),a}}rd.prototype.isShaderMaterial=!0;class VD extends Wr{constructor(){super(),this.type="Camera",this.matrixWorldInverse=new nn,this.projectionMatrix=new nn,this.projectionMatrixInverse=new nn}copy(l,a){return super.copy(l,a),this.matrixWorldInverse.copy(l.matrixWorldInverse),this.projectionMatrix.copy(l.projectionMatrix),this.projectionMatrixInverse.copy(l.projectionMatrixInverse),this}getWorldDirection(l){this.updateWorldMatrix(!0,!1);const a=this.matrixWorld.elements;return l.set(-a[8],-a[9],-a[10]).normalize()}updateMatrixWorld(l){super.updateMatrixWorld(l),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(l,a){super.updateWorldMatrix(l,a),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return(new this.constructor).copy(this)}}VD.prototype.isCamera=!0;class Rs extends VD{constructor(l=50,a=1,h=.1,d=2e3){super(),this.type="PerspectiveCamera",this.fov=l,this.zoom=1,this.near=h,this.far=d,this.focus=10,this.aspect=a,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(l,a){return super.copy(l,a),this.fov=l.fov,this.zoom=l.zoom,this.near=l.near,this.far=l.far,this.focus=l.focus,this.aspect=l.aspect,this.view=null===l.view?null:Object.assign({},l.view),this.filmGauge=l.filmGauge,this.filmOffset=l.filmOffset,this}setFocalLength(l){const a=.5*this.getFilmHeight()/l;this.fov=2*YT*Math.atan(a),this.updateProjectionMatrix()}getFocalLength(){const l=Math.tan(.5*Gm*this.fov);return.5*this.getFilmHeight()/l}getEffectiveFOV(){return 2*YT*Math.atan(Math.tan(.5*Gm*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(l,a,h,d,f,m){this.aspect=l/a,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=l,this.view.fullHeight=a,this.view.offsetX=h,this.view.offsetY=d,this.view.width=f,this.view.height=m,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const l=this.near;let a=l*Math.tan(.5*Gm*this.fov)/this.zoom,h=2*a,d=this.aspect*h,f=-.5*d;const m=this.view;if(null!==this.view&&this.view.enabled){const y=m.fullWidth,v=m.fullHeight;f+=m.offsetX*d/y,a-=m.offsetY*h/v,d*=m.width/y,h*=m.height/v}const g=this.filmOffset;0!==g&&(f+=l*g/this.getFilmWidth()),this.projectionMatrix.makePerspective(f,f+d,a,a-h,l,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(l){const a=super.toJSON(l);return a.object.fov=this.fov,a.object.zoom=this.zoom,a.object.near=this.near,a.object.far=this.far,a.object.focus=this.focus,a.object.aspect=this.aspect,null!==this.view&&(a.object.view=Object.assign({},this.view)),a.object.filmGauge=this.filmGauge,a.object.filmOffset=this.filmOffset,a}}Rs.prototype.isPerspectiveCamera=!0;class vV extends Wr{constructor(l,a,h){if(super(),this.type="CubeCamera",!0!==h.isWebGLCubeRenderTarget)return void console.error("THREE.CubeCamera: The constructor now expects an instance of WebGLCubeRenderTarget as third parameter.");this.renderTarget=h;const d=new Rs(90,1,l,a);d.layers=this.layers,d.up.set(0,-1,0),d.lookAt(new te(1,0,0)),this.add(d);const f=new Rs(90,1,l,a);f.layers=this.layers,f.up.set(0,-1,0),f.lookAt(new te(-1,0,0)),this.add(f);const m=new Rs(90,1,l,a);m.layers=this.layers,m.up.set(0,0,1),m.lookAt(new te(0,1,0)),this.add(m);const g=new Rs(90,1,l,a);g.layers=this.layers,g.up.set(0,0,-1),g.lookAt(new te(0,-1,0)),this.add(g);const y=new Rs(90,1,l,a);y.layers=this.layers,y.up.set(0,-1,0),y.lookAt(new te(0,0,1)),this.add(y);const v=new Rs(90,1,l,a);v.layers=this.layers,v.up.set(0,-1,0),v.lookAt(new te(0,0,-1)),this.add(v)}update(l,a){null===this.parent&&this.updateMatrixWorld();const h=this.renderTarget,[d,f,m,g,y,v]=this.children,_=l.xr.enabled,S=l.getRenderTarget();l.xr.enabled=!1;const b=h.texture.generateMipmaps;h.texture.generateMipmaps=!1,l.setRenderTarget(h,0),l.render(a,d),l.setRenderTarget(h,1),l.render(a,f),l.setRenderTarget(h,2),l.render(a,m),l.setRenderTarget(h,3),l.render(a,g),l.setRenderTarget(h,4),l.render(a,y),h.texture.generateMipmaps=b,l.setRenderTarget(h,5),l.render(a,v),l.setRenderTarget(S),l.xr.enabled=_,h.texture.needsPMREMUpdate=!0}}class t1 extends hs{constructor(l,a,h,d,f,m,g,y,v,_){super(l=void 0!==l?l:[],a=void 0!==a?a:301,h,d,f,m,g,y,v,_),this.flipY=!1}get images(){return this.image}set images(l){this.image=l}}t1.prototype.isCubeTexture=!0;class _V extends ql{constructor(l,a,h){Number.isInteger(a)&&(console.warn("THREE.WebGLCubeRenderTarget: constructor signature is now WebGLCubeRenderTarget( size, options )"),a=h),super(l,l,a),this.texture=new t1(void 0,(a=a||{}).mapping,a.wrapS,a.wrapT,a.magFilter,a.minFilter,a.format,a.type,a.anisotropy,a.encoding),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=void 0!==a.generateMipmaps&&a.generateMipmaps,this.texture.minFilter=void 0!==a.minFilter?a.minFilter:Fi}fromEquirectangularTexture(l,a){this.texture.type=a.type,this.texture.format=Bo,this.texture.encoding=a.encoding,this.texture.generateMipmaps=a.generateMipmaps,this.texture.minFilter=a.minFilter,this.texture.magFilter=a.magFilter;const h_uniforms={tEquirect:{value:null}},h_vertexShader="\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t",h_fragmentShader="\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t",d=new qm(5,5,5),f=new rd({name:"CubemapFromEquirect",uniforms:M_(h_uniforms),vertexShader:h_vertexShader,fragmentShader:h_fragmentShader,side:1,blending:0});f.uniforms.tEquirect.value=a;const m=new ds(d,f),g=a.minFilter;return a.minFilter===zf&&(a.minFilter=Fi),new vV(1,10,this).update(l,m),a.minFilter=g,m.geometry.dispose(),m.material.dispose(),this}clear(l,a,h,d){const f=l.getRenderTarget();for(let m=0;m<6;m++)l.setRenderTarget(this,m),l.clear(a,h,d);l.setRenderTarget(f)}}_V.prototype.isWebGLCubeRenderTarget=!0;const SV=new te,tXe=new te,nXe=new ro;class id{constructor(l=new te(1,0,0),a=0){this.normal=l,this.constant=a}set(l,a){return this.normal.copy(l),this.constant=a,this}setComponents(l,a,h,d){return this.normal.set(l,a,h),this.constant=d,this}setFromNormalAndCoplanarPoint(l,a){return this.normal.copy(l),this.constant=-a.dot(this.normal),this}setFromCoplanarPoints(l,a,h){const d=SV.subVectors(h,a).cross(tXe.subVectors(l,a)).normalize();return this.setFromNormalAndCoplanarPoint(d,l),this}copy(l){return this.normal.copy(l.normal),this.constant=l.constant,this}normalize(){const l=1/this.normal.length();return this.normal.multiplyScalar(l),this.constant*=l,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(l){return this.normal.dot(l)+this.constant}distanceToSphere(l){return this.distanceToPoint(l.center)-l.radius}projectPoint(l,a){return a.copy(this.normal).multiplyScalar(-this.distanceToPoint(l)).add(l)}intersectLine(l,a){const h=l.delta(SV),d=this.normal.dot(h);if(0===d)return 0===this.distanceToPoint(l.start)?a.copy(l.start):null;const f=-(l.start.dot(this.normal)+this.constant)/d;return f<0||f>1?null:a.copy(h).multiplyScalar(f).add(l.start)}intersectsLine(l){const a=this.distanceToPoint(l.start),h=this.distanceToPoint(l.end);return a<0&&h>0||h<0&&a>0}intersectsBox(l){return l.intersectsPlane(this)}intersectsSphere(l){return l.intersectsPlane(this)}coplanarPoint(l){return l.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(l,a){const h=a||nXe.getNormalMatrix(l),d=this.coplanarPoint(SV).applyMatrix4(l),f=this.normal.applyMatrix3(h).normalize();return this.constant=-d.dot(f),this}translate(l){return this.constant-=l.dot(this.normal),this}equals(l){return l.normal.equals(this.normal)&&l.constant===this.constant}clone(){return(new this.constructor).copy(this)}}id.prototype.isPlane=!0;const I_=new Yf,BD=new te;class UD{constructor(l=new id,a=new id,h=new id,d=new id,f=new id,m=new id){this.planes=[l,a,h,d,f,m]}set(l,a,h,d,f,m){const g=this.planes;return g[0].copy(l),g[1].copy(a),g[2].copy(h),g[3].copy(d),g[4].copy(f),g[5].copy(m),this}copy(l){const a=this.planes;for(let h=0;h<6;h++)a[h].copy(l.planes[h]);return this}setFromProjectionMatrix(l){const a=this.planes,h=l.elements,d=h[0],f=h[1],m=h[2],g=h[3],y=h[4],v=h[5],_=h[6],S=h[7],b=h[8],T=h[9],x=h[10],E=h[11],D=h[12],I=h[13],M=h[14],L=h[15];return a[0].setComponents(g-d,S-y,E-b,L-D).normalize(),a[1].setComponents(g+d,S+y,E+b,L+D).normalize(),a[2].setComponents(g+f,S+v,E+T,L+I).normalize(),a[3].setComponents(g-f,S-v,E-T,L-I).normalize(),a[4].setComponents(g-m,S-_,E-x,L-M).normalize(),a[5].setComponents(g+m,S+_,E+x,L+M).normalize(),this}intersectsObject(l){const a=l.geometry;return null===a.boundingSphere&&a.computeBoundingSphere(),I_.copy(a.boundingSphere).applyMatrix4(l.matrixWorld),this.intersectsSphere(I_)}intersectsSprite(l){return I_.center.set(0,0,0),I_.radius=.7071067811865476,I_.applyMatrix4(l.matrixWorld),this.intersectsSphere(I_)}intersectsSphere(l){const a=this.planes,h=l.center,d=-l.radius;for(let f=0;f<6;f++)if(a[f].distanceToPoint(h)<d)return!1;return!0}intersectsBox(l){const a=this.planes;for(let h=0;h<6;h++){const d=a[h];if(BD.x=d.normal.x>0?l.max.x:l.min.x,BD.y=d.normal.y>0?l.max.y:l.min.y,BD.z=d.normal.z>0?l.max.z:l.min.z,d.distanceToPoint(BD)<0)return!1}return!0}containsPoint(l){const a=this.planes;for(let h=0;h<6;h++)if(a[h].distanceToPoint(l)<0)return!1;return!0}clone(){return(new this.constructor).copy(this)}}function Ite(){let c=null,l=!1,a=null,h=null;function d(f,m){a(f,m),h=c.requestAnimationFrame(d)}return{start:function(){!0!==l&&null!==a&&(h=c.requestAnimationFrame(d),l=!0)},stop:function(){c.cancelAnimationFrame(h),l=!1},setAnimationLoop:function(f){a=f},setContext:function(f){c=f}}}function rXe(c,l){const a=l.isWebGL2,h=new WeakMap;return{get:function m(v){return v.isInterleavedBufferAttribute&&(v=v.data),h.get(v)},remove:function g(v){v.isInterleavedBufferAttribute&&(v=v.data);const _=h.get(v);_&&(c.deleteBuffer(_.buffer),h.delete(v))},update:function y(v,_){if(v.isGLBufferAttribute){const b=h.get(v);return void((!b||b.version<v.version)&&h.set(v,{buffer:v.buffer,type:v.type,bytesPerElement:v.elementSize,version:v.version}))}v.isInterleavedBufferAttribute&&(v=v.data);const S=h.get(v);void 0===S?h.set(v,function d(v,_){const S=v.array,b=v.usage,T=c.createBuffer();c.bindBuffer(_,T),c.bufferData(_,S,b),v.onUploadCallback();let x=5126;return S instanceof Float32Array?x=5126:S instanceof Float64Array?console.warn("THREE.WebGLAttributes: Unsupported data buffer format: Float64Array."):S instanceof Uint16Array?v.isFloat16BufferAttribute?a?x=5131:console.warn("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2."):x=5123:S instanceof Int16Array?x=5122:S instanceof Uint32Array?x=5125:S instanceof Int32Array?x=5124:S instanceof Int8Array?x=5120:(S instanceof Uint8Array||S instanceof Uint8ClampedArray)&&(x=5121),{buffer:T,type:x,bytesPerElement:S.BYTES_PER_ELEMENT,version:v.version}}(v,_)):S.version<v.version&&(function f(v,_,S){const b=_.array,T=_.updateRange;c.bindBuffer(S,v),-1===T.count?c.bufferSubData(S,0,b):(a?c.bufferSubData(S,T.offset*b.BYTES_PER_ELEMENT,b,T.offset,T.count):c.bufferSubData(S,T.offset*b.BYTES_PER_ELEMENT,b.subarray(T.offset,T.offset+T.count)),T.count=-1)}(S.buffer,v,_),S.version=v.version)}}}class n1 extends Mn{constructor(l=1,a=1,h=1,d=1){super(),this.type="PlaneGeometry",this.parameters={width:l,height:a,widthSegments:h,heightSegments:d};const f=l/2,m=a/2,g=Math.floor(h),y=Math.floor(d),v=g+1,_=y+1,S=l/g,b=a/y,T=[],x=[],E=[],D=[];for(let I=0;I<_;I++){const M=I*b-m;for(let L=0;L<v;L++)x.push(L*S-f,-M,0),E.push(0,0,1),D.push(L/g),D.push(1-I/y)}for(let I=0;I<y;I++)for(let M=0;M<g;M++){const P=M+v*(I+1),F=M+1+v*(I+1),V=M+1+v*I;T.push(M+v*I,P,V),T.push(P,F,V)}this.setIndex(T),this.setAttribute("position",new rn(x,3)),this.setAttribute("normal",new rn(E,3)),this.setAttribute("uv",new rn(D,2))}static fromJSON(l){return new n1(l.width,l.height,l.widthSegments,l.heightSegments)}}const wr={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef USE_ALPHATEST\n\tif ( diffuseColor.a < alphaTest ) discard;\n#endif",alphatest_pars_fragment:"#ifdef USE_ALPHATEST\n\tuniform float alphaTest;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"vec3 transformed = vec3( position );",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"vec3 BRDF_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( f0, f90, dotVH );\n\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( V * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, 1.0, dotVH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie( float roughness, float dotNH ) {\n\tfloat alpha = pow2( roughness );\n\tfloat invAlpha = 1.0 / alpha;\n\tfloat cos2h = dotNH * dotNH;\n\tfloat sin2h = max( 1.0 - cos2h, 0.0078125 );\n\treturn ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\n}\nfloat V_Neubelt( float dotNV, float dotNL ) {\n\treturn saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\n}\nvec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat D = D_Charlie( sheenRoughness, dotNH );\n\tfloat V = V_Neubelt( dotNV, dotNL );\n\treturn sheenColor * ( D * V );\n}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\n\t\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#pragma unroll_loop_end\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#if defined( USE_COLOR_ALPHA )\n\tdiffuseColor *= vColor;\n#elif defined( USE_COLOR )\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR )\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvarying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract( sin( sn ) * c );\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal;\n#endif\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat linearToRelativeLuminance( const in vec3 color ) {\n\tvec3 weights = vec3( 0.2126, 0.7152, 0.0722 );\n\treturn dot( weights, color.rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_maxMipLevel 8.0\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_maxTileSize 256.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\tfloat texelSize = 1.0 / ( 3.0 * cubeUV_maxTileSize );\n\t\tvec2 uv = getUV( direction, face ) * ( faceSize - 1.0 ) + 0.5;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tif ( mipInt < cubeUV_maxMipLevel ) {\n\t\t\tuv.y += 2.0 * cubeUV_maxTileSize;\n\t\t}\n\t\tuv.y += filterInt * 2.0 * cubeUV_minTileSize;\n\t\tuv.x += 3.0 * max( 0.0, cubeUV_maxTileSize - 2.0 * faceSize );\n\t\tuv *= texelSize;\n\t\treturn texture2D( envMap, uv ).rgb;\n\t}\n\t#define r0 1.0\n\t#define v0 0.339\n\t#define m0 - 2.0\n\t#define r1 0.8\n\t#define v1 0.276\n\t#define m1 - 1.0\n\t#define r4 0.4\n\t#define v4 0.046\n\t#define m4 2.0\n\t#define r5 0.305\n\t#define v5 0.016\n\t#define m5 3.0\n\t#define r6 0.21\n\t#define v6 0.0038\n\t#define m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= r1 ) {\n\t\t\tmip = ( r0 - roughness ) * ( m1 - m0 ) / ( r0 - r1 ) + m0;\n\t\t} else if ( roughness >= r4 ) {\n\t\t\tmip = ( r1 - roughness ) * ( m4 - m1 ) / ( r1 - r4 ) + m1;\n\t\t} else if ( roughness >= r5 ) {\n\t\t\tmip = ( r4 - roughness ) * ( m5 - m4 ) / ( r4 - r5 ) + m4;\n\t\t} else if ( roughness >= r6 ) {\n\t\t\tmip = ( r5 - roughness ) * ( m6 - m5 ) / ( r5 - r6 ) + m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), m0, cubeUV_maxMipLevel );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_INSTANCING\n\tmat3 m = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\n\ttransformedNormal = m * transformedNormal;\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",encodings_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",encodings_pars_fragment:"vec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#if defined( USE_ENVMAP )\n\t#ifdef ENVMAP_MODE_REFRACTION\n\t\tuniform float refractionRatio;\n\t#endif\n\tvec3 getIBLIrradiance( const in vec3 normal ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n\t\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\tvec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 reflectVec;\n\t\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\t\treflectVec = reflect( - viewDir, normal );\n\t\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t\t#else\n\t\t\t\treflectVec = refract( - viewDir, normal, refractionRatio );\n\t\t\t#endif\n\t\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n\t\t\treturn envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tvFogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float vFogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float vFogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn vec3( texture2D( gradientMap, coord ).r );\n\t#else\n\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\t#endif\n}",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tlightMapIrradiance *= PI;\n\t#endif\n\treflectedLight.indirectDiffuse += lightMapIrradiance;\n#endif",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_vertex:"vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\nvIndirectFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n\tvIndirectBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\nvIndirectFront += getAmbientLightIrradiance( ambientLightColor );\nvIndirectFront += getLightProbeIrradiance( lightProbe, geometry.normal );\n#ifdef DOUBLE_SIDED\n\tvIndirectBack += getAmbientLightIrradiance( ambientLightColor );\n\tvIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry.normal );\n#endif\n#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointLightInfo( pointLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( - dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotLightInfo( spotLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( - dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalLightInfo( directionalLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( - dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry.normal );\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {\n\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\treturn irradiance;\n}\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\t#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\tif ( cutoffDistance > 0.0 ) {\n\t\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\t}\n\t\treturn distanceFalloff;\n\t#else\n\t\tif ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\t\treturn pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t\t}\n\t\treturn 1.0;\n\t#endif\n}\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\n\treturn smoothstep( coneCosine, penumbraCosine, angleCosine );\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tlight.color = directionalLight.color;\n\t\tlight.direction = directionalLight.direction;\n\t\tlight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tlight.color = pointLight.color;\n\t\tlight.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\n\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat angleCos = dot( light.direction, spotLight.direction );\n\t\tfloat spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\tif ( spotAttenuation > 0.0 ) {\n\t\t\tfloat lightDistance = length( lVector );\n\t\t\tlight.color = spotLight.color * spotAttenuation;\n\t\t\tlight.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t\t} else {\n\t\t\tlight.color = vec3( 0.0 );\n\t\t\tlight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {\n\t\tfloat dotNL = dot( normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon\n#define Material_LightProbeLOD( material )\t(0)",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;\nmaterial.roughness = min( material.roughness, 1.0 );\n#ifdef IOR\n\t#ifdef SPECULAR\n\t\tfloat specularIntensityFactor = specularIntensity;\n\t\tvec3 specularColorFactor = specularColor;\n\t\t#ifdef USE_SPECULARINTENSITYMAP\n\t\t\tspecularIntensityFactor *= texture2D( specularIntensityMap, vUv ).a;\n\t\t#endif\n\t\t#ifdef USE_SPECULARCOLORMAP\n\t\t\tspecularColorFactor *= texture2D( specularColorMap, vUv ).rgb;\n\t\t#endif\n\t\tmaterial.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );\n\t#else\n\t\tfloat specularIntensityFactor = 1.0;\n\t\tvec3 specularColorFactor = vec3( 1.0 );\n\t\tmaterial.specularF90 = 1.0;\n\t#endif\n\tmaterial.specularColor = mix( min( pow2( ( ior - 1.0 ) / ( ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.specularF90 = 1.0;\n#endif\n#ifdef USE_CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\tmaterial.clearcoatF0 = vec3( 0.04 );\n\tmaterial.clearcoatF90 = 1.0;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheenColor;\n\t#ifdef USE_SHEENCOLORMAP\n\t\tmaterial.sheenColor *= texture2D( sheenColorMap, vUv ).rgb;\n\t#endif\n\tmaterial.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );\n\t#ifdef USE_SHEENROUGHNESSMAP\n\t\tmaterial.sheenRoughness *= texture2D( sheenRoughnessMap, vUv ).a;\n\t#endif\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat roughness;\n\tvec3 specularColor;\n\tfloat specularF90;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat clearcoat;\n\t\tfloat clearcoatRoughness;\n\t\tvec3 clearcoatF0;\n\t\tfloat clearcoatF90;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tvec3 sheenColor;\n\t\tfloat sheenRoughness;\n\t#endif\n};\nvec3 clearcoatSpecular = vec3( 0.0 );\nvec3 sheenSpecular = vec3( 0.0 );\nfloat IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat r2 = roughness * roughness;\n\tfloat a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;\n\tfloat b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;\n\tfloat DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );\n\treturn saturate( DG * RECIPROCAL_PI );\n}\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;\n\treturn fab;\n}\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\treturn specularColor * fab.x + specularF90 * fab.y;\n}\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\tvec3 FssEss = specularColor * fab.x + specularF90 * fab.y;\n\tfloat Ess = fab.x + fab.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = specularColor + ( 1.0 - specularColor ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.roughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = dotNLcc * directLight.color;\n\t\tclearcoatSpecular += ccIrradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );\n\t#endif\n\treflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.roughness );\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );\n\t#endif\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\tcomputeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - ( singleScattering + multiScattering ) );\n\treflectedLight.indirectSpecular += radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\n#ifdef USE_CLEARCOAT\n\tgeometry.clearcoatNormal = clearcoatNormal;\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointLightInfo( pointLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotLightInfo( spotLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalLightInfo( directionalLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\tirradiance += getLightProbeIrradiance( lightProbe, geometry.normal );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\t\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tlightMapIrradiance *= PI;\n\t\t#endif\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getIBLIrradiance( geometry.normal );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\t#else\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\t\tgl_Position.z *= gl_Position.w;\n\t\t}\n\t#endif\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 sampledDiffuseColor = texture2D( map, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\tsampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );\n\t#endif\n\tdiffuseColor *= sampledDiffuseColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n#endif\n#ifdef USE_MAP\n\tdiffuseColor *= texture2D( map, uv );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tuniform mat3 uvTransform;\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1, 2 ) * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\t\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\t\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\t\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n\t#endif\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\tuniform float morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tuniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\t\tuniform sampler2DArray morphTargetsTexture;\n\t\tuniform vec2 morphTargetsTextureSize;\n\t\tvec3 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset, const in int stride ) {\n\t\t\tfloat texelIndex = float( vertexIndex * stride + offset );\n\t\t\tfloat y = floor( texelIndex / morphTargetsTextureSize.x );\n\t\t\tfloat x = texelIndex - y * morphTargetsTextureSize.x;\n\t\t\tvec3 morphUV = vec3( ( x + 0.5 ) / morphTargetsTextureSize.x, y / morphTargetsTextureSize.y, morphTargetIndex );\n\t\t\treturn texture( morphTargetsTexture, morphUV ).xyz;\n\t\t}\n\t#else\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\tuniform float morphTargetInfluences[ 8 ];\n\t\t#else\n\t\t\tuniform float morphTargetInfluences[ 4 ];\n\t\t#endif\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\t#ifndef USE_MORPHNORMALS\n\t\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0, 1 ) * morphTargetInfluences[ i ];\n\t\t\t#else\n\t\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0, 2 ) * morphTargetInfluences[ i ];\n\t\t\t#endif\n\t\t}\n\t#else\n\t\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\t\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\t\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\t\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\t\t\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\t\t\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\t\t\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\t\t#endif\n\t#endif\n#endif",normal_fragment_begin:"float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\t#ifdef USE_TANGENT\n\t\tvec3 tangent = normalize( vTangent );\n\t\tvec3 bitangent = normalize( vBitangent );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\ttangent = tangent * faceDirection;\n\t\t\tbitangent = bitangent * faceDirection;\n\t\t#endif\n\t\t#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tmat3 vTBN = mat3( tangent, bitangent, normal );\n\t\t#endif\n\t#endif\n#endif\nvec3 geometryNormal = normal;",normal_fragment_maps:"#ifdef OBJECTSPACE_NORMALMAP\n\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( TANGENTSPACE_NORMALMAP )\n\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\t#ifdef USE_TANGENT\n\t\tnormal = normalize( vTBN * mapN );\n\t#else\n\t\tnormal = perturbNormal2Arb( - vViewPosition, normal, mapN, faceDirection );\n\t#endif\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",normal_pars_fragment:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_pars_vertex:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_vertex:"#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef OBJECTSPACE_NORMALMAP\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {\n\t\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\n\t\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tvec3 N = surf_norm;\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );\n\t\treturn normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal = geometryNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\t#ifdef USE_TANGENT\n\t\tclearcoatNormal = normalize( vTBN * clearcoatMapN );\n\t#else\n\t\tclearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );\n\t#endif\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif",output_fragment:"#ifdef OPAQUE\ndiffuseColor.a = 1.0;\n#endif\n#ifdef USE_TRANSMISSION\ndiffuseColor.a *= transmissionAlpha + 0.1;\n#endif\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",shadowmap_pars_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0\n\t\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\tvec4 shadowWorldPosition;\n\t#endif\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\t#ifdef BONE_TEXTURE\n\t\tuniform highp sampler2D boneTexture;\n\t\tuniform int boneTextureSize;\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\t\ty = dy * ( y + 0.5 );\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\t\treturn bone;\n\t\t}\n\t#else\n\t\tuniform mat4 boneMatrices[ MAX_BONES ];\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tmat4 bone = boneMatrices[ int(i) ];\n\t\t\treturn bone;\n\t\t}\n\t#endif\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmission_fragment:"#ifdef USE_TRANSMISSION\n\tfloat transmissionAlpha = 1.0;\n\tfloat transmissionFactor = transmission;\n\tfloat thicknessFactor = thickness;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\ttransmissionFactor *= texture2D( transmissionMap, vUv ).r;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tthicknessFactor *= texture2D( thicknessMap, vUv ).g;\n\t#endif\n\tvec3 pos = vWorldPosition;\n\tvec3 v = normalize( cameraPosition - pos );\n\tvec3 n = inverseTransformDirection( normal, viewMatrix );\n\tvec4 transmission = getIBLVolumeRefraction(\n\t\tn, v, roughnessFactor, material.diffuseColor, material.specularColor, material.specularF90,\n\t\tpos, modelMatrix, viewMatrix, projectionMatrix, ior, thicknessFactor,\n\t\tattenuationColor, attenuationDistance );\n\ttotalDiffuse = mix( totalDiffuse, transmission.rgb, transmissionFactor );\n\ttransmissionAlpha = mix( transmissionAlpha, transmission.a, transmissionFactor );\n#endif",transmission_pars_fragment:"#ifdef USE_TRANSMISSION\n\tuniform float transmission;\n\tuniform float thickness;\n\tuniform float attenuationDistance;\n\tuniform vec3 attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tuniform sampler2D transmissionMap;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tuniform sampler2D thicknessMap;\n\t#endif\n\tuniform vec2 transmissionSamplerSize;\n\tuniform sampler2D transmissionSamplerMap;\n\tuniform mat4 modelMatrix;\n\tuniform mat4 projectionMatrix;\n\tvarying vec3 vWorldPosition;\n\tvec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {\n\t\tvec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\n\t\tvec3 modelScale;\n\t\tmodelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n\t\tmodelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n\t\tmodelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n\t\treturn normalize( refractionVector ) * thickness * modelScale;\n\t}\n\tfloat applyIorToRoughness( const in float roughness, const in float ior ) {\n\t\treturn roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n\t}\n\tvec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {\n\t\tfloat framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\treturn texture2DLodEXT( transmissionSamplerMap, fragCoord.xy, framebufferLod );\n\t\t#else\n\t\t\treturn texture2D( transmissionSamplerMap, fragCoord.xy, framebufferLod );\n\t\t#endif\n\t}\n\tvec3 applyVolumeAttenuation( const in vec3 radiance, const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tif ( attenuationDistance == 0.0 ) {\n\t\t\treturn radiance;\n\t\t} else {\n\t\t\tvec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\n\t\t\tvec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );\t\t\treturn transmittance * radiance;\n\t\t}\n\t}\n\tvec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,\n\t\tconst in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,\n\t\tconst in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,\n\t\tconst in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\trefractionCoords += 1.0;\n\t\trefractionCoords /= 2.0;\n\t\tvec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\n\t\tvec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );\n\t\tvec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\n\t\treturn vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );\n\t}\n#endif",uv_pars_fragment:"#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#ifdef USE_UV\n\t#ifdef UVS_VERTEX_ONLY\n\t\tvec2 vUv;\n\t#else\n\t\tvarying vec2 vUv;\n\t#endif\n\tuniform mat3 uvTransform;\n#endif",uv_vertex:"#ifdef USE_UV\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n\tuniform mat3 uv2Transform;\n#endif",uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION )\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",background_frag:"uniform sampler2D t2D;\nvarying vec2 vUv;\nvoid main() {\n\tgl_FragColor = texture2D( t2D, vUv );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",cube_frag:"#include <envmap_common_pars_fragment>\nuniform float opacity;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\tvec3 vReflect = vWorldDirection;\n\t#include <envmap_fragment>\n\tgl_FragColor = envColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#endif\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinbase_vertex>\n\t\t#include <skinnormal_vertex>\n\t\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\t\treflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;\n\t#else\n\t\treflectedLight.indirectDiffuse += vIndirectFront;\n\t#endif\n\t#include <lightmap_fragment>\n\treflectedLight.indirectDiffuse *= BRDF_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *= BRDF_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t#else\n\t\tvec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshnormal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",meshnormal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n\t#ifdef OPAQUE\n\t\tgl_FragColor.a = 1.0;\n\t#endif\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifdef USE_TRANSMISSION\n\tvarying vec3 vWorldPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n\tvWorldPosition = worldPosition.xyz;\n#endif\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define IOR\n\t#define SPECULAR\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef IOR\n\tuniform float ior;\n#endif\n#ifdef SPECULAR\n\tuniform float specularIntensity;\n\tuniform vec3 specularColor;\n\t#ifdef USE_SPECULARINTENSITYMAP\n\t\tuniform sampler2D specularIntensityMap;\n\t#endif\n\t#ifdef USE_SPECULARCOLORMAP\n\t\tuniform sampler2D specularColorMap;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheenColor;\n\tuniform float sheenRoughness;\n\t#ifdef USE_SHEENCOLORMAP\n\t\tuniform sampler2D sheenColorMap;\n\t#endif\n\t#ifdef USE_SHEENROUGHNESSMAP\n\t\tuniform sampler2D sheenRoughnessMap;\n\t#endif\n#endif\nvarying vec3 vViewPosition;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n\tvec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n\t#include <transmission_fragment>\n\tvec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n\t#ifdef USE_SHEEN\n\t\tfloat sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );\n\t\toutgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n\t\tvec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n\t\toutgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;\n\t#endif\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",shadow_vert:"#include <common>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}"},Ft={common:{diffuse:{value:new At(16777215)},opacity:{value:1},map:{value:null},uvTransform:{value:new ro},uv2Transform:{value:new ro},alphaMap:{value:null},alphaTest:{value:0}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new Je(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new At(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new At(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new ro}},sprite:{diffuse:{value:new At(16777215)},opacity:{value:1},center:{value:new Je(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new ro}}},Wu={basic:{uniforms:Uo([Ft.common,Ft.specularmap,Ft.envmap,Ft.aomap,Ft.lightmap,Ft.fog]),vertexShader:wr.meshbasic_vert,fragmentShader:wr.meshbasic_frag},lambert:{uniforms:Uo([Ft.common,Ft.specularmap,Ft.envmap,Ft.aomap,Ft.lightmap,Ft.emissivemap,Ft.fog,Ft.lights,{emissive:{value:new At(0)}}]),vertexShader:wr.meshlambert_vert,fragmentShader:wr.meshlambert_frag},phong:{uniforms:Uo([Ft.common,Ft.specularmap,Ft.envmap,Ft.aomap,Ft.lightmap,Ft.emissivemap,Ft.bumpmap,Ft.normalmap,Ft.displacementmap,Ft.fog,Ft.lights,{emissive:{value:new At(0)},specular:{value:new At(1118481)},shininess:{value:30}}]),vertexShader:wr.meshphong_vert,fragmentShader:wr.meshphong_frag},standard:{uniforms:Uo([Ft.common,Ft.envmap,Ft.aomap,Ft.lightmap,Ft.emissivemap,Ft.bumpmap,Ft.normalmap,Ft.displacementmap,Ft.roughnessmap,Ft.metalnessmap,Ft.fog,Ft.lights,{emissive:{value:new At(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:wr.meshphysical_vert,fragmentShader:wr.meshphysical_frag},toon:{uniforms:Uo([Ft.common,Ft.aomap,Ft.lightmap,Ft.emissivemap,Ft.bumpmap,Ft.normalmap,Ft.displacementmap,Ft.gradientmap,Ft.fog,Ft.lights,{emissive:{value:new At(0)}}]),vertexShader:wr.meshtoon_vert,fragmentShader:wr.meshtoon_frag},matcap:{uniforms:Uo([Ft.common,Ft.bumpmap,Ft.normalmap,Ft.displacementmap,Ft.fog,{matcap:{value:null}}]),vertexShader:wr.meshmatcap_vert,fragmentShader:wr.meshmatcap_frag},points:{uniforms:Uo([Ft.points,Ft.fog]),vertexShader:wr.points_vert,fragmentShader:wr.points_frag},dashed:{uniforms:Uo([Ft.common,Ft.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:wr.linedashed_vert,fragmentShader:wr.linedashed_frag},depth:{uniforms:Uo([Ft.common,Ft.displacementmap]),vertexShader:wr.depth_vert,fragmentShader:wr.depth_frag},normal:{uniforms:Uo([Ft.common,Ft.bumpmap,Ft.normalmap,Ft.displacementmap,{opacity:{value:1}}]),vertexShader:wr.meshnormal_vert,fragmentShader:wr.meshnormal_frag},sprite:{uniforms:Uo([Ft.sprite,Ft.fog]),vertexShader:wr.sprite_vert,fragmentShader:wr.sprite_frag},background:{uniforms:{uvTransform:{value:new ro},t2D:{value:null}},vertexShader:wr.background_vert,fragmentShader:wr.background_frag},cube:{uniforms:Uo([Ft.envmap,{opacity:{value:1}}]),vertexShader:wr.cube_vert,fragmentShader:wr.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:wr.equirect_vert,fragmentShader:wr.equirect_frag},distanceRGBA:{uniforms:Uo([Ft.common,Ft.displacementmap,{referencePosition:{value:new te},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:wr.distanceRGBA_vert,fragmentShader:wr.distanceRGBA_frag},shadow:{uniforms:Uo([Ft.lights,Ft.fog,{color:{value:new At(0)},opacity:{value:1}}]),vertexShader:wr.shadow_vert,fragmentShader:wr.shadow_frag}};function Qqe(c,l,a,h,d,f){const m=new At(0);let y,v,g=!0===d?0:1,_=null,S=0,b=null;function x(E,D){a.buffers.color.setClear(E.r,E.g,E.b,D,f)}return{getClearColor:function(){return m},setClearColor:function(E,D=1){m.set(E),g=D,x(m,g)},getClearAlpha:function(){return g},setClearAlpha:function(E){g=E,x(m,g)},render:function T(E,D){let I=!1,M=!0===D.isScene?D.background:null;M&&M.isTexture&&(M=l.get(M));const L=c.xr,P=L.getSession&&L.getSession();P&&"additive"===P.environmentBlendMode&&(M=null),null===M?x(m,g):M&&M.isColor&&(x(M,1),I=!0),(c.autoClear||I)&&c.clear(c.autoClearColor,c.autoClearDepth,c.autoClearStencil),M&&(M.isCubeTexture||306===M.mapping)?(void 0===v&&(v=new ds(new qm(1,1,1),new rd({name:"BackgroundCubeMaterial",uniforms:M_(Wu.cube.uniforms),vertexShader:Wu.cube.vertexShader,fragmentShader:Wu.cube.fragmentShader,side:1,depthTest:!1,depthWrite:!1,fog:!1})),v.geometry.deleteAttribute("normal"),v.geometry.deleteAttribute("uv"),v.onBeforeRender=function(F,V,z){this.matrixWorld.copyPosition(z.matrixWorld)},Object.defineProperty(v.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),h.update(v)),v.material.uniforms.envMap.value=M,v.material.uniforms.flipEnvMap.value=M.isCubeTexture&&!1===M.isRenderTargetTexture?-1:1,(_!==M||S!==M.version||b!==c.toneMapping)&&(v.material.needsUpdate=!0,_=M,S=M.version,b=c.toneMapping),E.unshift(v,v.geometry,v.material,0,0,null)):M&&M.isTexture&&(void 0===y&&(y=new ds(new n1(2,2),new rd({name:"BackgroundMaterial",uniforms:M_(Wu.background.uniforms),vertexShader:Wu.background.vertexShader,fragmentShader:Wu.background.fragmentShader,side:0,depthTest:!1,depthWrite:!1,fog:!1})),y.geometry.deleteAttribute("normal"),Object.defineProperty(y.material,"map",{get:function(){return this.uniforms.t2D.value}}),h.update(y)),y.material.uniforms.t2D.value=M,!0===M.matrixAutoUpdate&&M.updateMatrix(),y.material.uniforms.uvTransform.value.copy(M.matrix),(_!==M||S!==M.version||b!==c.toneMapping)&&(y.material.needsUpdate=!0,_=M,S=M.version,b=c.toneMapping),E.unshift(y,y.geometry,y.material,0,0,null))}}}function Jqe(c,l,a,h){const d=c.getParameter(34921),f=h.isWebGL2?null:l.get("OES_vertex_array_object"),m=h.isWebGL2||null!==f,g={},y=E(null);let v=y;function b(ie){return h.isWebGL2?c.bindVertexArray(ie):f.bindVertexArrayOES(ie)}function T(ie){return h.isWebGL2?c.deleteVertexArray(ie):f.deleteVertexArrayOES(ie)}function E(ie){const ae=[],he=[],J=[];for(let ce=0;ce<d;ce++)ae[ce]=0,he[ce]=0,J[ce]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:ae,enabledAttributes:he,attributeDivisors:J,object:ie,attributes:{},index:null}}function M(){const ie=v.newAttributes;for(let ae=0,he=ie.length;ae<he;ae++)ie[ae]=0}function L(ie){P(ie,0)}function P(ie,ae){const J=v.enabledAttributes,ce=v.attributeDivisors;v.newAttributes[ie]=1,0===J[ie]&&(c.enableVertexAttribArray(ie),J[ie]=1),ce[ie]!==ae&&((h.isWebGL2?c:l.get("ANGLE_instanced_arrays"))[h.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](ie,ae),ce[ie]=ae)}function F(){const ie=v.newAttributes,ae=v.enabledAttributes;for(let he=0,J=ae.length;he<J;he++)ae[he]!==ie[he]&&(c.disableVertexAttribArray(he),ae[he]=0)}function V(ie,ae,he,J,ce,be){!0!==h.isWebGL2||5124!==he&&5125!==he?c.vertexAttribPointer(ie,ae,he,J,ce,be):c.vertexAttribIPointer(ie,ae,he,ce,be)}function W(){Q(),v!==y&&(v=y,b(v.object))}function Q(){y.geometry=null,y.program=null,y.wireframe=!1}return{setup:function _(ie,ae,he,J,ce){let be=!1;if(m){const we=function x(ie,ae,he){const J=!0===he.wireframe;let ce=g[ie.id];void 0===ce&&(ce={},g[ie.id]=ce);let be=ce[ae.id];void 0===be&&(be={},ce[ae.id]=be);let we=be[J];return void 0===we&&(we=E(function S(){return h.isWebGL2?c.createVertexArray():f.createVertexArrayOES()}()),be[J]=we),we}(J,he,ae);v!==we&&(v=we,b(v.object)),be=function D(ie,ae){const he=v.attributes,J=ie.attributes;let ce=0;for(const be in J){const we=he[be],Ce=J[be];if(void 0===we||we.attribute!==Ce||we.data!==Ce.data)return!0;ce++}return v.attributesNum!==ce||v.index!==ae}(J,ce),be&&function I(ie,ae){const he={},J=ie.attributes;let ce=0;for(const be in J){const we=J[be],Ce={};Ce.attribute=we,we.data&&(Ce.data=we.data),he[be]=Ce,ce++}v.attributes=he,v.attributesNum=ce,v.index=ae}(J,ce)}else{const we=!0===ae.wireframe;(v.geometry!==J.id||v.program!==he.id||v.wireframe!==we)&&(v.geometry=J.id,v.program=he.id,v.wireframe=we,be=!0)}!0===ie.isInstancedMesh&&(be=!0),null!==ce&&a.update(ce,34963),be&&(function z(ie,ae,he,J){if(!1===h.isWebGL2&&(ie.isInstancedMesh||J.isInstancedBufferGeometry)&&null===l.get("ANGLE_instanced_arrays"))return;M();const ce=J.attributes,be=he.getAttributes(),we=ae.defaultAttributeValues;for(const Ce in be){const Te=be[Ce];if(Te.location>=0){let fe=ce[Ce];if(void 0===fe&&("instanceMatrix"===Ce&&ie.instanceMatrix&&(fe=ie.instanceMatrix),"instanceColor"===Ce&&ie.instanceColor&&(fe=ie.instanceColor)),void 0!==fe){const $e=fe.normalized,Ve=fe.itemSize,De=a.get(fe);if(void 0===De)continue;const en=De.buffer,ut=De.type,Fe=De.bytesPerElement;if(fe.isInterleavedBufferAttribute){const ht=fe.data,an=ht.stride,Wt=fe.offset;if(ht&&ht.isInstancedInterleavedBuffer){for(let Qe=0;Qe<Te.locationSize;Qe++)P(Te.location+Qe,ht.meshPerAttribute);!0!==ie.isInstancedMesh&&void 0===J._maxInstanceCount&&(J._maxInstanceCount=ht.meshPerAttribute*ht.count)}else for(let Qe=0;Qe<Te.locationSize;Qe++)L(Te.location+Qe);c.bindBuffer(34962,en);for(let Qe=0;Qe<Te.locationSize;Qe++)V(Te.location+Qe,Ve/Te.locationSize,ut,$e,an*Fe,(Wt+Ve/Te.locationSize*Qe)*Fe)}else{if(fe.isInstancedBufferAttribute){for(let ht=0;ht<Te.locationSize;ht++)P(Te.location+ht,fe.meshPerAttribute);!0!==ie.isInstancedMesh&&void 0===J._maxInstanceCount&&(J._maxInstanceCount=fe.meshPerAttribute*fe.count)}else for(let ht=0;ht<Te.locationSize;ht++)L(Te.location+ht);c.bindBuffer(34962,en);for(let ht=0;ht<Te.locationSize;ht++)V(Te.location+ht,Ve/Te.locationSize,ut,$e,Ve*Fe,Ve/Te.locationSize*ht*Fe)}}else if(void 0!==we){const $e=we[Ce];if(void 0!==$e)switch($e.length){case 2:c.vertexAttrib2fv(Te.location,$e);break;case 3:c.vertexAttrib3fv(Te.location,$e);break;case 4:c.vertexAttrib4fv(Te.location,$e);break;default:c.vertexAttrib1fv(Te.location,$e)}}}}F()}(ie,ae,he,J),null!==ce&&c.bindBuffer(34963,a.get(ce).buffer))},reset:W,resetDefaultState:Q,dispose:function q(){W();for(const ie in g){const ae=g[ie];for(const he in ae){const J=ae[he];for(const ce in J)T(J[ce].object),delete J[ce];delete ae[he]}delete g[ie]}},releaseStatesOfGeometry:function K(ie){if(void 0===g[ie.id])return;const ae=g[ie.id];for(const he in ae){const J=ae[he];for(const ce in J)T(J[ce].object),delete J[ce];delete ae[he]}delete g[ie.id]},releaseStatesOfProgram:function se(ie){for(const ae in g){const he=g[ae];if(void 0===he[ie.id])continue;const J=he[ie.id];for(const ce in J)T(J[ce].object),delete J[ce];delete he[ie.id]}},initAttributes:M,enableAttribute:L,disableUnusedAttributes:F}}function e$e(c,l,a,h){const d=h.isWebGL2;let f;this.setMode=function m(v){f=v},this.render=function g(v,_){c.drawArrays(f,v,_),a.update(_,f,1)},this.renderInstances=function y(v,_,S){if(0===S)return;let b,T;if(d)b=c,T="drawArraysInstanced";else if(b=l.get("ANGLE_instanced_arrays"),T="drawArraysInstancedANGLE",null===b)return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");b[T](f,v,_,S),a.update(_,f,S)}}function t$e(c,l,a){let h;function f(z){if("highp"===z){if(c.getShaderPrecisionFormat(35633,36338).precision>0&&c.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";z="mediump"}return"mediump"===z&&c.getShaderPrecisionFormat(35633,36337).precision>0&&c.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}const m=typeof WebGL2RenderingContext<"u"&&c instanceof WebGL2RenderingContext||typeof WebGL2ComputeRenderingContext<"u"&&c instanceof WebGL2ComputeRenderingContext;let g=void 0!==a.precision?a.precision:"highp";const y=f(g);y!==g&&(console.warn("THREE.WebGLRenderer:",g,"not supported, using",y,"instead."),g=y);const v=m||l.has("WEBGL_draw_buffers"),_=!0===a.logarithmicDepthBuffer,S=c.getParameter(34930),b=c.getParameter(35660),T=c.getParameter(3379),x=c.getParameter(34076),E=c.getParameter(34921),D=c.getParameter(36347),I=c.getParameter(36348),M=c.getParameter(36349),L=b>0,P=m||l.has("OES_texture_float");return{isWebGL2:m,drawBuffers:v,getMaxAnisotropy:function d(){if(void 0!==h)return h;if(!0===l.has("EXT_texture_filter_anisotropic")){const z=l.get("EXT_texture_filter_anisotropic");h=c.getParameter(z.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else h=0;return h},getMaxPrecision:f,precision:g,logarithmicDepthBuffer:_,maxTextures:S,maxVertexTextures:b,maxTextureSize:T,maxCubemapSize:x,maxAttributes:E,maxVertexUniforms:D,maxVaryings:I,maxFragmentUniforms:M,vertexTextures:L,floatFragmentTextures:P,floatVertexTextures:L&&P,maxSamples:m?c.getParameter(36183):0}}function n$e(c){const l=this;let a=null,h=0,d=!1,f=!1;const m=new id,g=new ro,y={value:null,needsUpdate:!1};function v(){y.value!==a&&(y.value=a,y.needsUpdate=h>0),l.numPlanes=h,l.numIntersection=0}function _(S,b,T,x){const E=null!==S?S.length:0;let D=null;if(0!==E){if(D=y.value,!0!==x||null===D){const I=T+4*E,M=b.matrixWorldInverse;g.getNormalMatrix(M),(null===D||D.length<I)&&(D=new Float32Array(I));for(let L=0,P=T;L!==E;++L,P+=4)m.copy(S[L]).applyMatrix4(M,g),m.normal.toArray(D,P),D[P+3]=m.constant}y.value=D,y.needsUpdate=!0}return l.numPlanes=E,l.numIntersection=0,D}this.uniform=y,this.numPlanes=0,this.numIntersection=0,this.init=function(S,b,T){const x=0!==S.length||b||0!==h||d;return d=b,a=_(S,T,0),h=S.length,x},this.beginShadows=function(){f=!0,_(null)},this.endShadows=function(){f=!1,v()},this.setState=function(S,b,T){const x=S.clippingPlanes,E=S.clipIntersection,D=S.clipShadows,I=c.get(S);if(!d||null===x||0===x.length||f&&!D)f?_(null):v();else{const M=f?0:h,L=4*M;let P=I.clippingState||null;y.value=P,P=_(x,b,L,T);for(let F=0;F!==L;++F)P[F]=a[F];I.clippingState=P,this.numIntersection=E?this.numPlanes:0,this.numPlanes+=M}}}function r$e(c){let l=new WeakMap;function a(m,g){return 303===g?m.mapping=301:304===g&&(m.mapping=302),m}function d(m){const g=m.target;g.removeEventListener("dispose",d);const y=l.get(g);void 0!==y&&(l.delete(g),y.dispose())}return{get:function h(m){if(m&&m.isTexture&&!1===m.isRenderTargetTexture){const g=m.mapping;if(303===g||304===g){if(l.has(m))return a(l.get(m).texture,m.mapping);{const y=m.image;if(y&&y.height>0){const v=new _V(y.height/2);return v.fromEquirectangularTexture(c,m),l.set(m,v),m.addEventListener("dispose",d),a(v.texture,m.mapping)}return null}}}return m},dispose:function f(){l=new WeakMap}}}Wu.physical={uniforms:Uo([Wu.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new Je(1,1)},clearcoatNormalMap:{value:null},sheen:{value:0},sheenColor:{value:new At(0)},sheenColorMap:{value:null},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},transmission:{value:0},transmissionMap:{value:null},transmissionSamplerSize:{value:new Je},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:0},attenuationColor:{value:new At(0)},specularIntensity:{value:1},specularIntensityMap:{value:null},specularColor:{value:new At(1,1,1)},specularColorMap:{value:null}}]),vertexShader:wr.meshphysical_vert,fragmentShader:wr.meshphysical_frag};class r1 extends VD{constructor(l=-1,a=1,h=1,d=-1,f=.1,m=2e3){super(),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=l,this.right=a,this.top=h,this.bottom=d,this.near=f,this.far=m,this.updateProjectionMatrix()}copy(l,a){return super.copy(l,a),this.left=l.left,this.right=l.right,this.top=l.top,this.bottom=l.bottom,this.near=l.near,this.far=l.far,this.zoom=l.zoom,this.view=null===l.view?null:Object.assign({},l.view),this}setViewOffset(l,a,h,d,f,m){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=l,this.view.fullHeight=a,this.view.offsetX=h,this.view.offsetY=d,this.view.width=f,this.view.height=m,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const l=(this.right-this.left)/(2*this.zoom),a=(this.top-this.bottom)/(2*this.zoom),h=(this.right+this.left)/2,d=(this.top+this.bottom)/2;let f=h-l,m=h+l,g=d+a,y=d-a;if(null!==this.view&&this.view.enabled){const v=(this.right-this.left)/this.view.fullWidth/this.zoom,_=(this.top-this.bottom)/this.view.fullHeight/this.zoom;f+=v*this.view.offsetX,m=f+v*this.view.width,g-=_*this.view.offsetY,y=g-_*this.view.height}this.projectionMatrix.makeOrthographic(f,m,g,y,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(l){const a=super.toJSON(l);return a.object.zoom=this.zoom,a.object.left=this.left,a.object.right=this.right,a.object.top=this.top,a.object.bottom=this.bottom,a.object.near=this.near,a.object.far=this.far,null!==this.view&&(a.object.view=Object.assign({},this.view)),a}}r1.prototype.isOrthographicCamera=!0;class s1 extends rd{constructor(l){super(l),this.type="RawShaderMaterial"}}s1.prototype.isRawShaderMaterial=!0;const Xu=Math.pow(2,8),Rte=[.125,.215,.35,.446,.526,.582],Pte=5+Rte.length,bV=new r1,{_lodPlanes:o1,_sizeLods:Lte,_sigmas:GD}=i$e(),Ote=new At;let TV=null;const $m=(1+Math.sqrt(5))/2,L_=1/$m,Nte=[new te(1,1,1),new te(-1,1,1),new te(1,1,-1),new te(-1,1,-1),new te(0,$m,L_),new te(0,$m,-L_),new te(L_,0,$m),new te(-L_,0,$m),new te($m,L_,0),new te(-$m,L_,0)];class Fte{constructor(l){this._renderer=l,this._pingPongRenderTarget=null,this._blurMaterial=function s$e(c){const l=new Float32Array(c),a=new te(0,1,0);return new s1({name:"SphericalGaussianBlur",defines:{n:c},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:l},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:a}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute vec3 position;\n\t\tattribute vec2 uv;\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}(20),this._equirectShader=null,this._cubemapShader=null,this._compileMaterial(this._blurMaterial)}fromScene(l,a=0,h=.1,d=100){TV=this._renderer.getRenderTarget();const f=this._allocateTargets();return this._sceneToCubeUV(l,h,d,f),a>0&&this._blur(f,0,0,a),this._applyPMREM(f),this._cleanup(f),f}fromEquirectangular(l,a=null){return this._fromTexture(l,a)}fromCubemap(l,a=null){return this._fromTexture(l,a)}compileCubemapShader(){null===this._cubemapShader&&(this._cubemapShader=Bte(),this._compileMaterial(this._cubemapShader))}compileEquirectangularShader(){null===this._equirectShader&&(this._equirectShader=Vte(),this._compileMaterial(this._equirectShader))}dispose(){this._blurMaterial.dispose(),null!==this._pingPongRenderTarget&&this._pingPongRenderTarget.dispose(),null!==this._cubemapShader&&this._cubemapShader.dispose(),null!==this._equirectShader&&this._equirectShader.dispose();for(let l=0;l<o1.length;l++)o1[l].dispose()}_cleanup(l){this._renderer.setRenderTarget(TV),l.scissorTest=!1,zD(l,0,0,l.width,l.height)}_fromTexture(l,a){TV=this._renderer.getRenderTarget();const h=a||this._allocateTargets(l);return this._textureToCubeUV(l,h),this._applyPMREM(h),this._cleanup(h),h}_allocateTargets(l){const a={magFilter:Fi,minFilter:Fi,generateMipmaps:!1,type:l_,format:Bo,encoding:Wf,depthBuffer:!1},h=kte(a);return h.depthBuffer=!l,null===this._pingPongRenderTarget&&(this._pingPongRenderTarget=kte(a)),h}_compileMaterial(l){const a=new ds(o1[0],l);this._renderer.compile(a,bV)}_sceneToCubeUV(l,a,h,d){const g=new Rs(90,1,a,h),y=[1,-1,1,1,1,1],v=[1,1,1,-1,-1,-1],_=this._renderer,S=_.autoClear,b=_.toneMapping;_.getClearColor(Ote),_.toneMapping=0,_.autoClear=!1;const T=new gl({name:"PMREM.Background",side:1,depthWrite:!1,depthTest:!1}),x=new ds(new qm,T);let E=!1;const D=l.background;D?D.isColor&&(T.color.copy(D),l.background=null,E=!0):(T.color.copy(Ote),E=!0);for(let I=0;I<6;I++){const M=I%3;0===M?(g.up.set(0,y[I],0),g.lookAt(v[I],0,0)):1===M?(g.up.set(0,0,y[I]),g.lookAt(0,v[I],0)):(g.up.set(0,y[I],0),g.lookAt(0,0,v[I])),zD(d,M*Xu,I>2?Xu:0,Xu,Xu),_.setRenderTarget(d),E&&_.render(x,g),_.render(l,g)}x.geometry.dispose(),x.material.dispose(),_.toneMapping=b,_.autoClear=S,l.background=D}_textureToCubeUV(l,a){const h=this._renderer,d=301===l.mapping||302===l.mapping;d?(null===this._cubemapShader&&(this._cubemapShader=Bte()),this._cubemapShader.uniforms.flipEnvMap.value=!1===l.isRenderTargetTexture?-1:1):null===this._equirectShader&&(this._equirectShader=Vte());const f=d?this._cubemapShader:this._equirectShader,m=new ds(o1[0],f),g=f.uniforms;g.envMap.value=l,d||g.texelSize.value.set(1/l.image.width,1/l.image.height),zD(a,0,0,3*Xu,2*Xu),h.setRenderTarget(a),h.render(m,bV)}_applyPMREM(l){const a=this._renderer,h=a.autoClear;a.autoClear=!1;for(let d=1;d<Pte;d++){const f=Math.sqrt(GD[d]*GD[d]-GD[d-1]*GD[d-1]);this._blur(l,d-1,d,f,Nte[(d-1)%Nte.length])}a.autoClear=h}_blur(l,a,h,d,f){const m=this._pingPongRenderTarget;this._halfBlur(l,m,a,h,d,"latitudinal",f),this._halfBlur(m,l,h,h,d,"longitudinal",f)}_halfBlur(l,a,h,d,f,m,g){const y=this._renderer,v=this._blurMaterial;"latitudinal"!==m&&"longitudinal"!==m&&console.error("blur direction must be either latitudinal or longitudinal!");const S=new ds(o1[d],v),b=v.uniforms,T=Lte[h]-1,x=isFinite(f)?Math.PI/(2*T):2*Math.PI/39,E=f/x,D=isFinite(f)?1+Math.floor(3*E):20;D>20&&console.warn(`sigmaRadians, ${f}, is too large and will clip, as it requested ${D} samples when the maximum is set to 20`);const I=[];let M=0;for(let V=0;V<20;++V){const z=V/E,q=Math.exp(-z*z/2);I.push(q),0===V?M+=q:V<D&&(M+=2*q)}for(let V=0;V<I.length;V++)I[V]=I[V]/M;b.envMap.value=l.texture,b.samples.value=D,b.weights.value=I,b.latitudinal.value="latitudinal"===m,g&&(b.poleAxis.value=g),b.dTheta.value=x,b.mipInt.value=8-h;const L=Lte[d];zD(a,3*Math.max(0,Xu-2*L),(0===d?0:2*Xu)+2*L*(d>4?d-8+4:0),3*L,2*L),y.setRenderTarget(a),y.render(S,bV)}}function i$e(){const c=[],l=[],a=[];let h=8;for(let d=0;d<Pte;d++){const f=Math.pow(2,h);l.push(f);let m=1/f;d>4?m=Rte[d-8+4-1]:0===d&&(m=0),a.push(m);const g=1/(f-1),y=-g/2,v=1+g/2,_=[y,y,v,y,v,v,y,y,v,v,y,v],S=6,b=6,T=3,x=2,E=1,D=new Float32Array(T*b*S),I=new Float32Array(x*b*S),M=new Float32Array(E*b*S);for(let P=0;P<S;P++){const F=P%3*2/3-1,V=P>2?0:-1;D.set([F,V,0,F+2/3,V,0,F+2/3,V+1,0,F,V,0,F+2/3,V+1,0,F,V+1,0],T*b*P),I.set(_,x*b*P),M.set([P,P,P,P,P,P],E*b*P)}const L=new Mn;L.setAttribute("position",new ii(D,T)),L.setAttribute("uv",new ii(I,x)),L.setAttribute("faceIndex",new ii(M,E)),c.push(L),h>4&&h--}return{_lodPlanes:c,_sizeLods:l,_sigmas:a}}function kte(c){const l=new ql(3*Xu,3*Xu,c);return l.texture.mapping=306,l.texture.name="PMREM.cubeUv",l.scissorTest=!0,l}function zD(c,l,a,h,d){c.viewport.set(l,a,h,d),c.scissor.set(l,a,h,d)}function Vte(){const c=new Je(1,1);return new s1({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null},texelSize:{value:c}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute vec3 position;\n\t\tattribute vec2 uv;\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform vec2 texelSize;\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tvec2 f = fract( uv / texelSize - 0.5 );\n\t\t\t\tuv -= f * texelSize;\n\t\t\t\tvec3 tl = texture2D ( envMap, uv ).rgb;\n\t\t\t\tuv.x += texelSize.x;\n\t\t\t\tvec3 tr = texture2D ( envMap, uv ).rgb;\n\t\t\t\tuv.y += texelSize.y;\n\t\t\t\tvec3 br = texture2D ( envMap, uv ).rgb;\n\t\t\t\tuv.x -= texelSize.x;\n\t\t\t\tvec3 bl = texture2D ( envMap, uv ).rgb;\n\n\t\t\t\tvec3 tm = mix( tl, tr, f.x );\n\t\t\t\tvec3 bm = mix( bl, br, f.x );\n\t\t\t\tgl_FragColor.rgb = mix( tm, bm, f.y );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}function Bte(){return new s1({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute vec3 position;\n\t\tattribute vec2 uv;\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tuniform float flipEnvMap;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}function o$e(c){let l=new WeakMap,a=null;function f(g){const y=g.target;y.removeEventListener("dispose",f);const v=l.get(y);void 0!==v&&(l.delete(y),v.dispose())}return{get:function h(g){if(g&&g.isTexture){const y=g.mapping,v=303===y||304===y,_=301===y||302===y;if(v||_){if(g.isRenderTargetTexture&&!0===g.needsPMREMUpdate){g.needsPMREMUpdate=!1;let S=l.get(g);return null===a&&(a=new Fte(c)),S=v?a.fromEquirectangular(g,S):a.fromCubemap(g,S),l.set(g,S),S.texture}if(l.has(g))return l.get(g).texture;{const S=g.image;if(v&&S&&S.height>0||_&&S&&function d(g){let y=0;for(let _=0;_<6;_++)void 0!==g[_]&&y++;return 6===y}(S)){null===a&&(a=new Fte(c));const b=v?a.fromEquirectangular(g):a.fromCubemap(g);return l.set(g,b),g.addEventListener("dispose",f),b.texture}return null}}}return g},dispose:function m(){l=new WeakMap,null!==a&&(a.dispose(),a=null)}}}function a$e(c){const l={};function a(h){if(void 0!==l[h])return l[h];let d;switch(h){case"WEBGL_depth_texture":d=c.getExtension("WEBGL_depth_texture")||c.getExtension("MOZ_WEBGL_depth_texture")||c.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":d=c.getExtension("EXT_texture_filter_anisotropic")||c.getExtension("MOZ_EXT_texture_filter_anisotropic")||c.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":d=c.getExtension("WEBGL_compressed_texture_s3tc")||c.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||c.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":d=c.getExtension("WEBGL_compressed_texture_pvrtc")||c.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:d=c.getExtension(h)}return l[h]=d,d}return{has:function(h){return null!==a(h)},init:function(h){h.isWebGL2?a("EXT_color_buffer_float"):(a("WEBGL_depth_texture"),a("OES_texture_float"),a("OES_texture_half_float"),a("OES_texture_half_float_linear"),a("OES_standard_derivatives"),a("OES_element_index_uint"),a("OES_vertex_array_object"),a("ANGLE_instanced_arrays")),a("OES_texture_float_linear"),a("EXT_color_buffer_half_float"),a("WEBGL_multisampled_render_to_texture")},get:function(h){const d=a(h);return null===d&&console.warn("THREE.WebGLRenderer: "+h+" extension not supported."),d}}}function l$e(c,l,a,h){const d={},f=new WeakMap;function m(S){const b=S.target;null!==b.index&&l.remove(b.index);for(const x in b.attributes)l.remove(b.attributes[x]);b.removeEventListener("dispose",m),delete d[b.id];const T=f.get(b);T&&(l.remove(T),f.delete(b)),h.releaseStatesOfGeometry(b),!0===b.isInstancedBufferGeometry&&delete b._maxInstanceCount,a.memory.geometries--}function v(S){const b=[],T=S.index,x=S.attributes.position;let E=0;if(null!==T){const M=T.array;E=T.version;for(let L=0,P=M.length;L<P;L+=3){const F=M[L+0],V=M[L+1],z=M[L+2];b.push(F,V,V,z,z,F)}}else{E=x.version;for(let L=0,P=x.array.length/3-1;L<P;L+=3){const F=L+0,V=L+1,z=L+2;b.push(F,V,V,z,z,F)}}const D=new(yte(b)?hV:uV)(b,1);D.version=E;const I=f.get(S);I&&l.remove(I),f.set(S,D)}return{get:function g(S,b){return!0===d[b.id]||(b.addEventListener("dispose",m),d[b.id]=!0,a.memory.geometries++),b},update:function y(S){const b=S.attributes;for(const x in b)l.update(b[x],34962);const T=S.morphAttributes;for(const x in T){const E=T[x];for(let D=0,I=E.length;D<I;D++)l.update(E[D],34962)}},getWireframeAttribute:function _(S){const b=f.get(S);if(b){const T=S.index;null!==T&&b.version<T.version&&v(S)}else v(S);return f.get(S)}}}function c$e(c,l,a,h){const d=h.isWebGL2;let f,g,y;this.setMode=function m(b){f=b},this.setIndex=function v(b){g=b.type,y=b.bytesPerElement},this.render=function _(b,T){c.drawElements(f,T,g,b*y),a.update(T,f,1)},this.renderInstances=function S(b,T,x){if(0===x)return;let E,D;if(d)E=c,D="drawElementsInstanced";else if(E=l.get("ANGLE_instanced_arrays"),D="drawElementsInstancedANGLE",null===E)return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");E[D](f,T,g,b*y,x),a.update(T,f,x)}}function u$e(c){const a={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:a,programs:null,autoReset:!0,reset:function d(){a.frame++,a.calls=0,a.triangles=0,a.points=0,a.lines=0},update:function h(f,m,g){switch(a.calls++,m){case 4:a.triangles+=g*(f/3);break;case 1:a.lines+=g*(f/2);break;case 3:a.lines+=g*(f-1);break;case 2:a.lines+=g*f;break;case 0:a.points+=g*f;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",m)}}}}class CV extends hs{constructor(l=null,a=1,h=1,d=1){super(null),this.image={data:l,width:a,height:h,depth:d},this.magFilter=us,this.minFilter=us,this.wrapR=yo,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}function h$e(c,l){return c[0]-l[0]}function d$e(c,l){return Math.abs(l[1])-Math.abs(c[1])}function Ute(c,l){let a=1;const h=l.isInterleavedBufferAttribute?l.data.array:l.array;h instanceof Int8Array?a=127:h instanceof Int16Array?a=32767:h instanceof Int32Array?a=2147483647:console.error("THREE.WebGLMorphtargets: Unsupported morph attribute data type: ",h),c.divideScalar(a)}function f$e(c,l,a){const h={},d=new Float32Array(8),f=new WeakMap,m=new te,g=[];for(let v=0;v<8;v++)g[v]=[v,0];return{update:function y(v,_,S,b){const T=v.morphTargetInfluences;if(!0===l.isWebGL2){const x=_.morphAttributes.position.length;let E=f.get(_);if(void 0===E||E.count!==x){let Q=function(){se.dispose(),f.delete(_),_.removeEventListener("dispose",Q)};void 0!==E&&E.texture.dispose();const M=void 0!==_.morphAttributes.normal,L=_.morphAttributes.position,P=_.morphAttributes.normal||[],V=!0===M?2:1;let z=_.attributes.position.count*V,q=1;z>l.maxTextureSize&&(q=Math.ceil(z/l.maxTextureSize),z=l.maxTextureSize);const K=new Float32Array(z*q*4*x),se=new CV(K,z,q,x);se.format=Bo,se.type=jf,se.needsUpdate=!0;const W=4*V;for(let ie=0;ie<x;ie++){const ae=L[ie],he=P[ie],J=z*q*4*ie;for(let ce=0;ce<ae.count;ce++){m.fromBufferAttribute(ae,ce),!0===ae.normalized&&Ute(m,ae);const be=ce*W;K[J+be+0]=m.x,K[J+be+1]=m.y,K[J+be+2]=m.z,K[J+be+3]=0,!0===M&&(m.fromBufferAttribute(he,ce),!0===he.normalized&&Ute(m,he),K[J+be+4]=m.x,K[J+be+5]=m.y,K[J+be+6]=m.z,K[J+be+7]=0)}}E={count:x,texture:se,size:new Je(z,q)},f.set(_,E),_.addEventListener("dispose",Q)}let D=0;for(let M=0;M<T.length;M++)D+=T[M];const I=_.morphTargetsRelative?1:1-D;b.getUniforms().setValue(c,"morphTargetBaseInfluence",I),b.getUniforms().setValue(c,"morphTargetInfluences",T),b.getUniforms().setValue(c,"morphTargetsTexture",E.texture,a),b.getUniforms().setValue(c,"morphTargetsTextureSize",E.size)}else{const x=void 0===T?0:T.length;let E=h[_.id];if(void 0===E||E.length!==x){E=[];for(let P=0;P<x;P++)E[P]=[P,0];h[_.id]=E}for(let P=0;P<x;P++){const F=E[P];F[0]=P,F[1]=T[P]}E.sort(d$e);for(let P=0;P<8;P++)P<x&&E[P][1]?(g[P][0]=E[P][0],g[P][1]=E[P][1]):(g[P][0]=Number.MAX_SAFE_INTEGER,g[P][1]=0);g.sort(h$e);const D=_.morphAttributes.position,I=_.morphAttributes.normal;let M=0;for(let P=0;P<8;P++){const F=g[P],V=F[0],z=F[1];V!==Number.MAX_SAFE_INTEGER&&z?(D&&_.getAttribute("morphTarget"+P)!==D[V]&&_.setAttribute("morphTarget"+P,D[V]),I&&_.getAttribute("morphNormal"+P)!==I[V]&&_.setAttribute("morphNormal"+P,I[V]),d[P]=z,M+=z):(D&&!0===_.hasAttribute("morphTarget"+P)&&_.deleteAttribute("morphTarget"+P),I&&!0===_.hasAttribute("morphNormal"+P)&&_.deleteAttribute("morphNormal"+P),d[P]=0)}const L=_.morphTargetsRelative?1:1-M;b.getUniforms().setValue(c,"morphTargetBaseInfluence",L),b.getUniforms().setValue(c,"morphTargetInfluences",d)}}}}function p$e(c,l,a,h){let d=new WeakMap;function g(y){const v=y.target;v.removeEventListener("dispose",g),a.remove(v.instanceMatrix),null!==v.instanceColor&&a.remove(v.instanceColor)}return{update:function f(y){const v=h.render.frame,S=l.get(y,y.geometry);return d.get(S)!==v&&(l.update(S),d.set(S,v)),y.isInstancedMesh&&(!1===y.hasEventListener("dispose",g)&&y.addEventListener("dispose",g),a.update(y.instanceMatrix,34962),null!==y.instanceColor&&a.update(y.instanceColor,34962)),S},dispose:function m(){d=new WeakMap}}}CV.prototype.isDataTexture2DArray=!0;class Gte extends hs{constructor(l=null,a=1,h=1,d=1){super(null),this.image={data:l,width:a,height:h,depth:d},this.magFilter=us,this.minFilter=us,this.wrapR=yo,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}Gte.prototype.isDataTexture3D=!0;const zte=new hs,Hte=new CV,jte=new Gte,Wte=new t1,Xte=[],qte=[],$te=new Float32Array(16),Yte=new Float32Array(9),Zte=new Float32Array(4);function O_(c,l,a){const h=c[0];if(h<=0||h>0)return c;const d=l*a;let f=Xte[d];if(void 0===f&&(f=new Float32Array(d),Xte[d]=f),0!==l){h.toArray(f,0);for(let m=1,g=0;m!==l;++m)g+=a,c[m].toArray(f,g)}return f}function ya(c,l){if(c.length!==l.length)return!1;for(let a=0,h=c.length;a<h;a++)if(c[a]!==l[a])return!1;return!0}function Go(c,l){for(let a=0,h=l.length;a<h;a++)c[a]=l[a]}function HD(c,l){let a=qte[l];void 0===a&&(a=new Int32Array(l),qte[l]=a);for(let h=0;h!==l;++h)a[h]=c.allocateTextureUnit();return a}function m$e(c,l){const a=this.cache;a[0]!==l&&(c.uniform1f(this.addr,l),a[0]=l)}function g$e(c,l){const a=this.cache;if(void 0!==l.x)(a[0]!==l.x||a[1]!==l.y)&&(c.uniform2f(this.addr,l.x,l.y),a[0]=l.x,a[1]=l.y);else{if(ya(a,l))return;c.uniform2fv(this.addr,l),Go(a,l)}}function y$e(c,l){const a=this.cache;if(void 0!==l.x)(a[0]!==l.x||a[1]!==l.y||a[2]!==l.z)&&(c.uniform3f(this.addr,l.x,l.y,l.z),a[0]=l.x,a[1]=l.y,a[2]=l.z);else if(void 0!==l.r)(a[0]!==l.r||a[1]!==l.g||a[2]!==l.b)&&(c.uniform3f(this.addr,l.r,l.g,l.b),a[0]=l.r,a[1]=l.g,a[2]=l.b);else{if(ya(a,l))return;c.uniform3fv(this.addr,l),Go(a,l)}}function v$e(c,l){const a=this.cache;if(void 0!==l.x)(a[0]!==l.x||a[1]!==l.y||a[2]!==l.z||a[3]!==l.w)&&(c.uniform4f(this.addr,l.x,l.y,l.z,l.w),a[0]=l.x,a[1]=l.y,a[2]=l.z,a[3]=l.w);else{if(ya(a,l))return;c.uniform4fv(this.addr,l),Go(a,l)}}function _$e(c,l){const a=this.cache,h=l.elements;if(void 0===h){if(ya(a,l))return;c.uniformMatrix2fv(this.addr,!1,l),Go(a,l)}else{if(ya(a,h))return;Zte.set(h),c.uniformMatrix2fv(this.addr,!1,Zte),Go(a,h)}}function S$e(c,l){const a=this.cache,h=l.elements;if(void 0===h){if(ya(a,l))return;c.uniformMatrix3fv(this.addr,!1,l),Go(a,l)}else{if(ya(a,h))return;Yte.set(h),c.uniformMatrix3fv(this.addr,!1,Yte),Go(a,h)}}function b$e(c,l){const a=this.cache,h=l.elements;if(void 0===h){if(ya(a,l))return;c.uniformMatrix4fv(this.addr,!1,l),Go(a,l)}else{if(ya(a,h))return;$te.set(h),c.uniformMatrix4fv(this.addr,!1,$te),Go(a,h)}}function T$e(c,l){const a=this.cache;a[0]!==l&&(c.uniform1i(this.addr,l),a[0]=l)}function w$e(c,l){const a=this.cache;ya(a,l)||(c.uniform2iv(this.addr,l),Go(a,l))}function C$e(c,l){const a=this.cache;ya(a,l)||(c.uniform3iv(this.addr,l),Go(a,l))}function x$e(c,l){const a=this.cache;ya(a,l)||(c.uniform4iv(this.addr,l),Go(a,l))}function E$e(c,l){const a=this.cache;a[0]!==l&&(c.uniform1ui(this.addr,l),a[0]=l)}function M$e(c,l){const a=this.cache;ya(a,l)||(c.uniform2uiv(this.addr,l),Go(a,l))}function D$e(c,l){const a=this.cache;ya(a,l)||(c.uniform3uiv(this.addr,l),Go(a,l))}function A$e(c,l){const a=this.cache;ya(a,l)||(c.uniform4uiv(this.addr,l),Go(a,l))}function I$e(c,l,a){const h=this.cache,d=a.allocateTextureUnit();h[0]!==d&&(c.uniform1i(this.addr,d),h[0]=d),a.safeSetTexture2D(l||zte,d)}function R$e(c,l,a){const h=this.cache,d=a.allocateTextureUnit();h[0]!==d&&(c.uniform1i(this.addr,d),h[0]=d),a.setTexture3D(l||jte,d)}function P$e(c,l,a){const h=this.cache,d=a.allocateTextureUnit();h[0]!==d&&(c.uniform1i(this.addr,d),h[0]=d),a.safeSetTextureCube(l||Wte,d)}function L$e(c,l,a){const h=this.cache,d=a.allocateTextureUnit();h[0]!==d&&(c.uniform1i(this.addr,d),h[0]=d),a.setTexture2DArray(l||Hte,d)}function N$e(c,l){c.uniform1fv(this.addr,l)}function F$e(c,l){const a=O_(l,this.size,2);c.uniform2fv(this.addr,a)}function k$e(c,l){const a=O_(l,this.size,3);c.uniform3fv(this.addr,a)}function V$e(c,l){const a=O_(l,this.size,4);c.uniform4fv(this.addr,a)}function B$e(c,l){const a=O_(l,this.size,4);c.uniformMatrix2fv(this.addr,!1,a)}function U$e(c,l){const a=O_(l,this.size,9);c.uniformMatrix3fv(this.addr,!1,a)}function G$e(c,l){const a=O_(l,this.size,16);c.uniformMatrix4fv(this.addr,!1,a)}function z$e(c,l){c.uniform1iv(this.addr,l)}function H$e(c,l){c.uniform2iv(this.addr,l)}function j$e(c,l){c.uniform3iv(this.addr,l)}function W$e(c,l){c.uniform4iv(this.addr,l)}function X$e(c,l){c.uniform1uiv(this.addr,l)}function q$e(c,l){c.uniform2uiv(this.addr,l)}function $$e(c,l){c.uniform3uiv(this.addr,l)}function Y$e(c,l){c.uniform4uiv(this.addr,l)}function Z$e(c,l,a){const h=l.length,d=HD(a,h);c.uniform1iv(this.addr,d);for(let f=0;f!==h;++f)a.safeSetTexture2D(l[f]||zte,d[f])}function K$e(c,l,a){const h=l.length,d=HD(a,h);c.uniform1iv(this.addr,d);for(let f=0;f!==h;++f)a.setTexture3D(l[f]||jte,d[f])}function Q$e(c,l,a){const h=l.length,d=HD(a,h);c.uniform1iv(this.addr,d);for(let f=0;f!==h;++f)a.safeSetTextureCube(l[f]||Wte,d[f])}function J$e(c,l,a){const h=l.length,d=HD(a,h);c.uniform1iv(this.addr,d);for(let f=0;f!==h;++f)a.setTexture2DArray(l[f]||Hte,d[f])}function tYe(c,l,a){this.id=c,this.addr=a,this.cache=[],this.setValue=function O$e(c){switch(c){case 5126:return m$e;case 35664:return g$e;case 35665:return y$e;case 35666:return v$e;case 35674:return _$e;case 35675:return S$e;case 35676:return b$e;case 5124:case 35670:return T$e;case 35667:case 35671:return w$e;case 35668:case 35672:return C$e;case 35669:case 35673:return x$e;case 5125:return E$e;case 36294:return M$e;case 36295:return D$e;case 36296:return A$e;case 35678:case 36198:case 36298:case 36306:case 35682:return I$e;case 35679:case 36299:case 36307:return R$e;case 35680:case 36300:case 36308:case 36293:return P$e;case 36289:case 36303:case 36311:case 36292:return L$e}}(l.type)}function Kte(c,l,a){this.id=c,this.addr=a,this.cache=[],this.size=l.size,this.setValue=function eYe(c){switch(c){case 5126:return N$e;case 35664:return F$e;case 35665:return k$e;case 35666:return V$e;case 35674:return B$e;case 35675:return U$e;case 35676:return G$e;case 5124:case 35670:return z$e;case 35667:case 35671:return H$e;case 35668:case 35672:return j$e;case 35669:case 35673:return W$e;case 5125:return X$e;case 36294:return q$e;case 36295:return $$e;case 36296:return Y$e;case 35678:case 36198:case 36298:case 36306:case 35682:return Z$e;case 35679:case 36299:case 36307:return K$e;case 35680:case 36300:case 36308:case 36293:return Q$e;case 36289:case 36303:case 36311:case 36292:return J$e}}(l.type)}function Qte(c){this.id=c,this.seq=[],this.map={}}Kte.prototype.updateCache=function(c){const l=this.cache;c instanceof Float32Array&&l.length!==c.length&&(this.cache=new Float32Array(c.length)),Go(l,c)},Qte.prototype.setValue=function(c,l,a){const h=this.seq;for(let d=0,f=h.length;d!==f;++d){const m=h[d];m.setValue(c,l[m.id],a)}};const xV=/(\w+)(\])?(\[|\.)?/g;function Jte(c,l){c.seq.push(l),c.map[l.id]=l}function nYe(c,l,a){const h=c.name,d=h.length;for(xV.lastIndex=0;;){const f=xV.exec(h),m=xV.lastIndex;let g=f[1];const v=f[3];if("]"===f[2]&&(g|=0),void 0===v||"["===v&&m+2===d){Jte(a,void 0===v?new tYe(g,c,l):new Kte(g,c,l));break}{let S=a.map[g];void 0===S&&(S=new Qte(g),Jte(a,S)),a=S}}}function np(c,l){this.seq=[],this.map={};const a=c.getProgramParameter(l,35718);for(let h=0;h<a;++h){const d=c.getActiveUniform(l,h);nYe(d,c.getUniformLocation(l,d.name),this)}}function ene(c,l,a){const h=c.createShader(l);return c.shaderSource(h,a),c.compileShader(h),h}np.prototype.setValue=function(c,l,a,h){const d=this.map[l];void 0!==d&&d.setValue(c,a,h)},np.prototype.setOptional=function(c,l,a){const h=l[a];void 0!==h&&this.setValue(c,a,h)},np.upload=function(c,l,a,h){for(let d=0,f=l.length;d!==f;++d){const m=l[d],g=a[m.id];!1!==g.needsUpdate&&m.setValue(c,g.value,h)}},np.seqWithValue=function(c,l){const a=[];for(let h=0,d=c.length;h!==d;++h){const f=c[h];f.id in l&&a.push(f)}return a};let rYe=0;function tne(c,l,a){const h=c.getShaderParameter(l,35713),d=c.getShaderInfoLog(l).trim();return h&&""===d?"":a.toUpperCase()+"\n\n"+d+"\n\n"+function iYe(c){const l=c.split("\n");for(let a=0;a<l.length;a++)l[a]=a+1+": "+l[a];return l.join("\n")}(c.getShaderSource(l))}function oYe(c,l){const a=function sYe(c){switch(c){case Wf:return["Linear","( value )"];case di:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",c),["Linear","( value )"]}}(l);return"vec4 "+c+"( vec4 value ) { return LinearTo"+a[0]+a[1]+"; }"}function aYe(c,l){let a;switch(l){case 1:a="Linear";break;case 2:a="Reinhard";break;case 3:a="OptimizedCineon";break;case 4:a="ACESFilmic";break;case 5:a="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",l),a="Linear"}return"vec3 "+c+"( vec3 color ) { return "+a+"ToneMapping( color ); }"}function a1(c){return""!==c}function nne(c,l){return c.replace(/NUM_DIR_LIGHTS/g,l.numDirLights).replace(/NUM_SPOT_LIGHTS/g,l.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,l.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,l.numPointLights).replace(/NUM_HEMI_LIGHTS/g,l.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,l.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS/g,l.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,l.numPointLightShadows)}function rne(c,l){return c.replace(/NUM_CLIPPING_PLANES/g,l.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,l.numClippingPlanes-l.numClipIntersection)}const hYe=/^[ \t]*#include +<([\w\d./]+)>/gm;function EV(c){return c.replace(hYe,dYe)}function dYe(c,l){const a=wr[l];if(void 0===a)throw new Error("Can not resolve #include <"+l+">");return EV(a)}const fYe=/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,pYe=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function ine(c){return c.replace(pYe,sne).replace(fYe,mYe)}function mYe(c,l,a,h){return console.warn("WebGLProgram: #pragma unroll_loop shader syntax is deprecated. Please use #pragma unroll_loop_start syntax instead."),sne(0,l,a,h)}function sne(c,l,a,h){let d="";for(let f=parseInt(l);f<parseInt(a);f++)d+=h.replace(/\[\s*i\s*\]/g,"[ "+f+" ]").replace(/UNROLLED_LOOP_INDEX/g,f);return d}function one(c){let l="precision "+c.precision+" float;\nprecision "+c.precision+" int;";return"highp"===c.precision?l+="\n#define HIGH_PRECISION":"mediump"===c.precision?l+="\n#define MEDIUM_PRECISION":"lowp"===c.precision&&(l+="\n#define LOW_PRECISION"),l}function SYe(c,l,a,h){const d=c.getContext(),f=a.defines;let m=a.vertexShader,g=a.fragmentShader;const y=function gYe(c){let l="SHADOWMAP_TYPE_BASIC";return 1===c.shadowMapType?l="SHADOWMAP_TYPE_PCF":2===c.shadowMapType?l="SHADOWMAP_TYPE_PCF_SOFT":3===c.shadowMapType&&(l="SHADOWMAP_TYPE_VSM"),l}(a),v=function yYe(c){let l="ENVMAP_TYPE_CUBE";if(c.envMap)switch(c.envMapMode){case 301:case 302:l="ENVMAP_TYPE_CUBE";break;case 306:case 307:l="ENVMAP_TYPE_CUBE_UV"}return l}(a),_=function vYe(c){let l="ENVMAP_MODE_REFLECTION";if(c.envMap)switch(c.envMapMode){case 302:case 307:l="ENVMAP_MODE_REFRACTION"}return l}(a),S=function _Ye(c){let l="ENVMAP_BLENDING_NONE";if(c.envMap)switch(c.combine){case 0:l="ENVMAP_BLENDING_MULTIPLY";break;case 1:l="ENVMAP_BLENDING_MIX";break;case 2:l="ENVMAP_BLENDING_ADD"}return l}(a),b=a.isWebGL2?"":function lYe(c){return[c.extensionDerivatives||c.envMapCubeUV||c.bumpMap||c.tangentSpaceNormalMap||c.clearcoatNormalMap||c.flatShading||"physical"===c.shaderID?"#extension GL_OES_standard_derivatives : enable":"",(c.extensionFragDepth||c.logarithmicDepthBuffer)&&c.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",c.extensionDrawBuffers&&c.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(c.extensionShaderTextureLOD||c.envMap||c.transmission)&&c.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(a1).join("\n")}(a),T=function cYe(c){const l=[];for(const a in c){const h=c[a];!1!==h&&l.push("#define "+a+" "+h)}return l.join("\n")}(f),x=d.createProgram();let E,D,I=a.glslVersion?"#version "+a.glslVersion+"\n":"";a.isRawShaderMaterial?(E=[T].filter(a1).join("\n"),E.length>0&&(E+="\n"),D=[b,T].filter(a1).join("\n"),D.length>0&&(D+="\n")):(E=[one(a),"#define SHADER_NAME "+a.shaderName,T,a.instancing?"#define USE_INSTANCING":"",a.instancingColor?"#define USE_INSTANCING_COLOR":"",a.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define MAX_BONES "+a.maxBones,a.useFog&&a.fog?"#define USE_FOG":"",a.useFog&&a.fogExp2?"#define FOG_EXP2":"",a.map?"#define USE_MAP":"",a.envMap?"#define USE_ENVMAP":"",a.envMap?"#define "+_:"",a.lightMap?"#define USE_LIGHTMAP":"",a.aoMap?"#define USE_AOMAP":"",a.emissiveMap?"#define USE_EMISSIVEMAP":"",a.bumpMap?"#define USE_BUMPMAP":"",a.normalMap?"#define USE_NORMALMAP":"",a.normalMap&&a.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",a.normalMap&&a.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",a.clearcoatMap?"#define USE_CLEARCOATMAP":"",a.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",a.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",a.displacementMap&&a.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",a.specularMap?"#define USE_SPECULARMAP":"",a.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",a.specularColorMap?"#define USE_SPECULARCOLORMAP":"",a.roughnessMap?"#define USE_ROUGHNESSMAP":"",a.metalnessMap?"#define USE_METALNESSMAP":"",a.alphaMap?"#define USE_ALPHAMAP":"",a.transmission?"#define USE_TRANSMISSION":"",a.transmissionMap?"#define USE_TRANSMISSIONMAP":"",a.thicknessMap?"#define USE_THICKNESSMAP":"",a.sheenColorMap?"#define USE_SHEENCOLORMAP":"",a.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",a.vertexTangents?"#define USE_TANGENT":"",a.vertexColors?"#define USE_COLOR":"",a.vertexAlphas?"#define USE_COLOR_ALPHA":"",a.vertexUvs?"#define USE_UV":"",a.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",a.flatShading?"#define FLAT_SHADED":"",a.skinning?"#define USE_SKINNING":"",a.useVertexTexture?"#define BONE_TEXTURE":"",a.morphTargets?"#define USE_MORPHTARGETS":"",a.morphNormals&&!1===a.flatShading?"#define USE_MORPHNORMALS":"",a.morphTargets&&a.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",a.morphTargets&&a.isWebGL2?"#define MORPHTARGETS_COUNT "+a.morphTargetsCount:"",a.doubleSided?"#define DOUBLE_SIDED":"",a.flipSided?"#define FLIP_SIDED":"",a.shadowMapEnabled?"#define USE_SHADOWMAP":"",a.shadowMapEnabled?"#define "+y:"",a.sizeAttenuation?"#define USE_SIZEATTENUATION":"",a.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",a.logarithmicDepthBuffer&&a.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","\tattribute vec4 color;","#elif defined( USE_COLOR )","\tattribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(a1).join("\n"),D=[b,one(a),"#define SHADER_NAME "+a.shaderName,T,a.useFog&&a.fog?"#define USE_FOG":"",a.useFog&&a.fogExp2?"#define FOG_EXP2":"",a.map?"#define USE_MAP":"",a.matcap?"#define USE_MATCAP":"",a.envMap?"#define USE_ENVMAP":"",a.envMap?"#define "+v:"",a.envMap?"#define "+_:"",a.envMap?"#define "+S:"",a.lightMap?"#define USE_LIGHTMAP":"",a.aoMap?"#define USE_AOMAP":"",a.emissiveMap?"#define USE_EMISSIVEMAP":"",a.bumpMap?"#define USE_BUMPMAP":"",a.normalMap?"#define USE_NORMALMAP":"",a.normalMap&&a.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",a.normalMap&&a.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",a.clearcoat?"#define USE_CLEARCOAT":"",a.clearcoatMap?"#define USE_CLEARCOATMAP":"",a.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",a.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",a.specularMap?"#define USE_SPECULARMAP":"",a.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",a.specularColorMap?"#define USE_SPECULARCOLORMAP":"",a.roughnessMap?"#define USE_ROUGHNESSMAP":"",a.metalnessMap?"#define USE_METALNESSMAP":"",a.alphaMap?"#define USE_ALPHAMAP":"",a.alphaTest?"#define USE_ALPHATEST":"",a.sheen?"#define USE_SHEEN":"",a.sheenColorMap?"#define USE_SHEENCOLORMAP":"",a.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",a.transmission?"#define USE_TRANSMISSION":"",a.transmissionMap?"#define USE_TRANSMISSIONMAP":"",a.thicknessMap?"#define USE_THICKNESSMAP":"",a.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",a.vertexTangents?"#define USE_TANGENT":"",a.vertexColors||a.instancingColor?"#define USE_COLOR":"",a.vertexAlphas?"#define USE_COLOR_ALPHA":"",a.vertexUvs?"#define USE_UV":"",a.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",a.gradientMap?"#define USE_GRADIENTMAP":"",a.flatShading?"#define FLAT_SHADED":"",a.doubleSided?"#define DOUBLE_SIDED":"",a.flipSided?"#define FLIP_SIDED":"",a.shadowMapEnabled?"#define USE_SHADOWMAP":"",a.shadowMapEnabled?"#define "+y:"",a.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",a.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",a.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",a.logarithmicDepthBuffer&&a.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"",(a.extensionShaderTextureLOD||a.envMap)&&a.rendererExtensionShaderTextureLod?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",0!==a.toneMapping?"#define TONE_MAPPING":"",0!==a.toneMapping?wr.tonemapping_pars_fragment:"",0!==a.toneMapping?aYe("toneMapping",a.toneMapping):"",a.dithering?"#define DITHERING":"",a.transparent?"":"#define OPAQUE",wr.encodings_pars_fragment,oYe("linearToOutputTexel",a.outputEncoding),a.depthPacking?"#define DEPTH_PACKING "+a.depthPacking:"","\n"].filter(a1).join("\n")),m=EV(m),m=nne(m,a),m=rne(m,a),g=EV(g),g=nne(g,a),g=rne(g,a),m=ine(m),g=ine(g),a.isWebGL2&&!0!==a.isRawShaderMaterial&&(I="#version 300 es\n",E=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+E,D=["#define varying in","300 es"===a.glslVersion?"":"layout(location = 0) out highp vec4 pc_fragColor;","300 es"===a.glslVersion?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+D);const L=I+D+g,P=ene(d,35633,I+E+m),F=ene(d,35632,L);if(d.attachShader(x,P),d.attachShader(x,F),void 0!==a.index0AttributeName?d.bindAttribLocation(x,0,a.index0AttributeName):!0===a.morphTargets&&d.bindAttribLocation(x,0,"position"),d.linkProgram(x),c.debug.checkShaderErrors){const q=d.getProgramInfoLog(x).trim(),K=d.getShaderInfoLog(P).trim(),se=d.getShaderInfoLog(F).trim();let W=!0,Q=!0;if(!1===d.getProgramParameter(x,35714)){W=!1;const ie=tne(d,P,"vertex"),ae=tne(d,F,"fragment");console.error("THREE.WebGLProgram: Shader Error "+d.getError()+" - VALIDATE_STATUS "+d.getProgramParameter(x,35715)+"\n\nProgram Info Log: "+q+"\n"+ie+"\n"+ae)}else""!==q?console.warn("THREE.WebGLProgram: Program Info Log:",q):(""===K||""===se)&&(Q=!1);Q&&(this.diagnostics={runnable:W,programLog:q,vertexShader:{log:K,prefix:E},fragmentShader:{log:se,prefix:D}})}let V,z;return d.deleteShader(P),d.deleteShader(F),this.getUniforms=function(){return void 0===V&&(V=new np(d,x)),V},this.getAttributes=function(){return void 0===z&&(z=function uYe(c,l){const a={},h=c.getProgramParameter(l,35721);for(let d=0;d<h;d++){const f=c.getActiveAttrib(l,d),m=f.name;let g=1;35674===f.type&&(g=2),35675===f.type&&(g=3),35676===f.type&&(g=4),a[m]={type:f.type,location:c.getAttribLocation(l,m),locationSize:g}}return a}(d,x)),z},this.destroy=function(){h.releaseStatesOfProgram(this),d.deleteProgram(x),this.program=void 0},this.name=a.shaderName,this.id=rYe++,this.cacheKey=l,this.usedTimes=1,this.program=x,this.vertexShader=P,this.fragmentShader=F,this}let bYe=0;class TYe{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(l){const h=l.fragmentShader,d=this._getShaderStage(l.vertexShader),f=this._getShaderStage(h),m=this._getShaderCacheForMaterial(l);return!1===m.has(d)&&(m.add(d),d.usedTimes++),!1===m.has(f)&&(m.add(f),f.usedTimes++),this}remove(l){const a=this.materialCache.get(l);for(const h of a)h.usedTimes--,0===h.usedTimes&&this.shaderCache.delete(h);return this.materialCache.delete(l),this}getVertexShaderID(l){return this._getShaderStage(l.vertexShader).id}getFragmentShaderID(l){return this._getShaderStage(l.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(l){const a=this.materialCache;return!1===a.has(l)&&a.set(l,new Set),a.get(l)}_getShaderStage(l){const a=this.shaderCache;if(!1===a.has(l)){const h=new wYe;a.set(l,h)}return a.get(l)}}class wYe{constructor(){this.id=bYe++,this.usedTimes=0}}function CYe(c,l,a,h,d,f,m){const g=new sV,y=new TYe,v=[],_=d.isWebGL2,S=d.logarithmicDepthBuffer,b=d.floatVertexTextures,T=d.maxVertexUniforms,x=d.vertexTextures;let E=d.precision;const D={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};return{getParameters:function M(W,Q,ie,ae,he){const J=ae.fog,be=(W.isMeshStandardMaterial?a:l).get(W.envMap||(W.isMeshStandardMaterial?ae.environment:null)),we=D[W.type],Ce=he.isSkinnedMesh?function I(W){const ie=W.skeleton.bones;if(b)return 1024;{const he=Math.floor((T-20)/4),J=Math.min(he,ie.length);return J<ie.length?(console.warn("THREE.WebGLRenderer: Skeleton has "+ie.length+" bones. This GPU supports "+J+"."),0):J}}(he):0;let Te,fe,$e,Ve;if(null!==W.precision&&(E=d.getMaxPrecision(W.precision),E!==W.precision&&console.warn("THREE.WebGLProgram.getParameters:",W.precision,"not supported, using",E,"instead.")),we){const ht=Wu[we];Te=ht.vertexShader,fe=ht.fragmentShader}else Te=W.vertexShader,fe=W.fragmentShader,y.update(W),$e=y.getVertexShaderID(W),Ve=y.getFragmentShaderID(W);const De=c.getRenderTarget(),ut=W.clearcoat>0;return{isWebGL2:_,shaderID:we,shaderName:W.type,vertexShader:Te,fragmentShader:fe,defines:W.defines,customVertexShaderID:$e,customFragmentShaderID:Ve,isRawShaderMaterial:!0===W.isRawShaderMaterial,glslVersion:W.glslVersion,precision:E,instancing:!0===he.isInstancedMesh,instancingColor:!0===he.isInstancedMesh&&null!==he.instanceColor,supportsVertexTextures:x,outputEncoding:null===De?c.outputEncoding:!0===De.isXRRenderTarget?De.texture.encoding:Wf,map:!!W.map,matcap:!!W.matcap,envMap:!!be,envMapMode:be&&be.mapping,envMapCubeUV:!!be&&(306===be.mapping||307===be.mapping),lightMap:!!W.lightMap,aoMap:!!W.aoMap,emissiveMap:!!W.emissiveMap,bumpMap:!!W.bumpMap,normalMap:!!W.normalMap,objectSpaceNormalMap:1===W.normalMapType,tangentSpaceNormalMap:0===W.normalMapType,decodeVideoTexture:!!W.map&&!0===W.map.isVideoTexture&&W.map.encoding===di,clearcoat:ut,clearcoatMap:ut&&!!W.clearcoatMap,clearcoatRoughnessMap:ut&&!!W.clearcoatRoughnessMap,clearcoatNormalMap:ut&&!!W.clearcoatNormalMap,displacementMap:!!W.displacementMap,roughnessMap:!!W.roughnessMap,metalnessMap:!!W.metalnessMap,specularMap:!!W.specularMap,specularIntensityMap:!!W.specularIntensityMap,specularColorMap:!!W.specularColorMap,transparent:W.transparent,alphaMap:!!W.alphaMap,alphaTest:W.alphaTest>0,gradientMap:!!W.gradientMap,sheen:W.sheen>0,sheenColorMap:!!W.sheenColorMap,sheenRoughnessMap:!!W.sheenRoughnessMap,transmission:W.transmission>0,transmissionMap:!!W.transmissionMap,thicknessMap:!!W.thicknessMap,combine:W.combine,vertexTangents:!!W.normalMap&&!!he.geometry&&!!he.geometry.attributes.tangent,vertexColors:W.vertexColors,vertexAlphas:!0===W.vertexColors&&!!he.geometry&&!!he.geometry.attributes.color&&4===he.geometry.attributes.color.itemSize,vertexUvs:!!(W.map||W.bumpMap||W.normalMap||W.specularMap||W.alphaMap||W.emissiveMap||W.roughnessMap||W.metalnessMap||W.clearcoatMap||W.clearcoatRoughnessMap||W.clearcoatNormalMap||W.displacementMap||W.transmissionMap||W.thicknessMap||W.specularIntensityMap||W.specularColorMap||W.sheenColorMap||W.sheenRoughnessMap),uvsVertexOnly:!(W.map||W.bumpMap||W.normalMap||W.specularMap||W.alphaMap||W.emissiveMap||W.roughnessMap||W.metalnessMap||W.clearcoatNormalMap||W.transmission>0||W.transmissionMap||W.thicknessMap||W.specularIntensityMap||W.specularColorMap||W.sheen>0||W.sheenColorMap||W.sheenRoughnessMap||!W.displacementMap),fog:!!J,useFog:W.fog,fogExp2:J&&J.isFogExp2,flatShading:!!W.flatShading,sizeAttenuation:W.sizeAttenuation,logarithmicDepthBuffer:S,skinning:!0===he.isSkinnedMesh&&Ce>0,maxBones:Ce,useVertexTexture:b,morphTargets:!!he.geometry&&!!he.geometry.morphAttributes.position,morphNormals:!!he.geometry&&!!he.geometry.morphAttributes.normal,morphTargetsCount:he.geometry&&he.geometry.morphAttributes.position?he.geometry.morphAttributes.position.length:0,numDirLights:Q.directional.length,numPointLights:Q.point.length,numSpotLights:Q.spot.length,numRectAreaLights:Q.rectArea.length,numHemiLights:Q.hemi.length,numDirLightShadows:Q.directionalShadowMap.length,numPointLightShadows:Q.pointShadowMap.length,numSpotLightShadows:Q.spotShadowMap.length,numClippingPlanes:m.numPlanes,numClipIntersection:m.numIntersection,dithering:W.dithering,shadowMapEnabled:c.shadowMap.enabled&&ie.length>0,shadowMapType:c.shadowMap.type,toneMapping:W.toneMapped?c.toneMapping:0,physicallyCorrectLights:c.physicallyCorrectLights,premultipliedAlpha:W.premultipliedAlpha,doubleSided:2===W.side,flipSided:1===W.side,depthPacking:void 0!==W.depthPacking&&W.depthPacking,index0AttributeName:W.index0AttributeName,extensionDerivatives:W.extensions&&W.extensions.derivatives,extensionFragDepth:W.extensions&&W.extensions.fragDepth,extensionDrawBuffers:W.extensions&&W.extensions.drawBuffers,extensionShaderTextureLOD:W.extensions&&W.extensions.shaderTextureLOD,rendererExtensionFragDepth:_||h.has("EXT_frag_depth"),rendererExtensionDrawBuffers:_||h.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:_||h.has("EXT_shader_texture_lod"),customProgramCacheKey:W.customProgramCacheKey()}},getProgramCacheKey:function L(W){const Q=[];if(W.shaderID?Q.push(W.shaderID):(Q.push(W.customVertexShaderID),Q.push(W.customFragmentShaderID)),void 0!==W.defines)for(const ie in W.defines)Q.push(ie),Q.push(W.defines[ie]);return!1===W.isRawShaderMaterial&&(function P(W,Q){W.push(Q.precision),W.push(Q.outputEncoding),W.push(Q.envMapMode),W.push(Q.combine),W.push(Q.vertexUvs),W.push(Q.fogExp2),W.push(Q.sizeAttenuation),W.push(Q.maxBones),W.push(Q.morphTargetsCount),W.push(Q.numDirLights),W.push(Q.numPointLights),W.push(Q.numSpotLights),W.push(Q.numHemiLights),W.push(Q.numRectAreaLights),W.push(Q.numDirLightShadows),W.push(Q.numPointLightShadows),W.push(Q.numSpotLightShadows),W.push(Q.shadowMapType),W.push(Q.toneMapping),W.push(Q.numClippingPlanes),W.push(Q.numClipIntersection)}(Q,W),function F(W,Q){g.disableAll(),Q.isWebGL2&&g.enable(0),Q.supportsVertexTextures&&g.enable(1),Q.instancing&&g.enable(2),Q.instancingColor&&g.enable(3),Q.map&&g.enable(4),Q.matcap&&g.enable(5),Q.envMap&&g.enable(6),Q.envMapCubeUV&&g.enable(7),Q.lightMap&&g.enable(8),Q.aoMap&&g.enable(9),Q.emissiveMap&&g.enable(10),Q.bumpMap&&g.enable(11),Q.normalMap&&g.enable(12),Q.objectSpaceNormalMap&&g.enable(13),Q.tangentSpaceNormalMap&&g.enable(14),Q.clearcoat&&g.enable(15),Q.clearcoatMap&&g.enable(16),Q.clearcoatRoughnessMap&&g.enable(17),Q.clearcoatNormalMap&&g.enable(18),Q.displacementMap&&g.enable(19),Q.specularMap&&g.enable(20),Q.roughnessMap&&g.enable(21),Q.metalnessMap&&g.enable(22),Q.gradientMap&&g.enable(23),Q.alphaMap&&g.enable(24),Q.alphaTest&&g.enable(25),Q.vertexColors&&g.enable(26),Q.vertexAlphas&&g.enable(27),Q.vertexUvs&&g.enable(28),Q.vertexTangents&&g.enable(29),Q.uvsVertexOnly&&g.enable(30),Q.fog&&g.enable(31),W.push(g.mask),g.disableAll(),Q.useFog&&g.enable(0),Q.flatShading&&g.enable(1),Q.logarithmicDepthBuffer&&g.enable(2),Q.skinning&&g.enable(3),Q.useVertexTexture&&g.enable(4),Q.morphTargets&&g.enable(5),Q.morphNormals&&g.enable(6),Q.premultipliedAlpha&&g.enable(7),Q.shadowMapEnabled&&g.enable(8),Q.physicallyCorrectLights&&g.enable(9),Q.doubleSided&&g.enable(10),Q.flipSided&&g.enable(11),Q.depthPacking&&g.enable(12),Q.dithering&&g.enable(13),Q.specularIntensityMap&&g.enable(14),Q.specularColorMap&&g.enable(15),Q.transmission&&g.enable(16),Q.transmissionMap&&g.enable(17),Q.thicknessMap&&g.enable(18),Q.sheen&&g.enable(19),Q.sheenColorMap&&g.enable(20),Q.sheenRoughnessMap&&g.enable(21),Q.decodeVideoTexture&&g.enable(22),Q.transparent&&g.enable(23),W.push(g.mask)}(Q,W),Q.push(c.outputEncoding)),Q.push(W.customProgramCacheKey),Q.join()},getUniforms:function V(W){const Q=D[W.type];let ie;return ie=Q?QWe.clone(Wu[Q].uniforms):W.uniforms,ie},acquireProgram:function z(W,Q){let ie;for(let ae=0,he=v.length;ae<he;ae++){const J=v[ae];if(J.cacheKey===Q){ie=J,++ie.usedTimes;break}}return void 0===ie&&(ie=new SYe(c,Q,W,f),v.push(ie)),ie},releaseProgram:function q(W){if(0==--W.usedTimes){const Q=v.indexOf(W);v[Q]=v[v.length-1],v.pop(),W.destroy()}},releaseShaderCache:function K(W){y.remove(W)},programs:v,dispose:function se(){y.dispose()}}}function xYe(){let c=new WeakMap;return{get:function l(f){let m=c.get(f);return void 0===m&&(m={},c.set(f,m)),m},remove:function a(f){c.delete(f)},update:function h(f,m,g){c.get(f)[m]=g},dispose:function d(){c=new WeakMap}}}function EYe(c,l){return c.groupOrder!==l.groupOrder?c.groupOrder-l.groupOrder:c.renderOrder!==l.renderOrder?c.renderOrder-l.renderOrder:c.material.id!==l.material.id?c.material.id-l.material.id:c.z!==l.z?c.z-l.z:c.id-l.id}function ane(c,l){return c.groupOrder!==l.groupOrder?c.groupOrder-l.groupOrder:c.renderOrder!==l.renderOrder?c.renderOrder-l.renderOrder:c.z!==l.z?l.z-c.z:c.id-l.id}function lne(){const c=[];let l=0;const a=[],h=[],d=[];function m(S,b,T,x,E,D){let I=c[l];return void 0===I?(I={id:S.id,object:S,geometry:b,material:T,groupOrder:x,renderOrder:S.renderOrder,z:E,group:D},c[l]=I):(I.id=S.id,I.object=S,I.geometry=b,I.material=T,I.groupOrder=x,I.renderOrder=S.renderOrder,I.z=E,I.group=D),l++,I}return{opaque:a,transmissive:h,transparent:d,init:function f(){l=0,a.length=0,h.length=0,d.length=0},push:function g(S,b,T,x,E,D){const I=m(S,b,T,x,E,D);T.transmission>0?h.push(I):!0===T.transparent?d.push(I):a.push(I)},unshift:function y(S,b,T,x,E,D){const I=m(S,b,T,x,E,D);T.transmission>0?h.unshift(I):!0===T.transparent?d.unshift(I):a.unshift(I)},finish:function _(){for(let S=l,b=c.length;S<b;S++){const T=c[S];if(null===T.id)break;T.id=null,T.object=null,T.geometry=null,T.material=null,T.group=null}},sort:function v(S,b){a.length>1&&a.sort(S||EYe),h.length>1&&h.sort(b||ane),d.length>1&&d.sort(b||ane)}}}function MYe(){let c=new WeakMap;return{get:function l(h,d){let f;return!1===c.has(h)?(f=new lne,c.set(h,[f])):d>=c.get(h).length?(f=new lne,c.get(h).push(f)):f=c.get(h)[d],f},dispose:function a(){c=new WeakMap}}}function DYe(){const c={};return{get:function(l){if(void 0!==c[l.id])return c[l.id];let a;switch(l.type){case"DirectionalLight":a={direction:new te,color:new At};break;case"SpotLight":a={position:new te,direction:new te,color:new At,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":a={position:new te,color:new At,distance:0,decay:0};break;case"HemisphereLight":a={direction:new te,skyColor:new At,groundColor:new At};break;case"RectAreaLight":a={color:new At,position:new te,halfWidth:new te,halfHeight:new te}}return c[l.id]=a,a}}}let IYe=0;function RYe(c,l){return(l.castShadow?1:0)-(c.castShadow?1:0)}function PYe(c,l){const a=new DYe,h=function AYe(){const c={};return{get:function(l){if(void 0!==c[l.id])return c[l.id];let a;switch(l.type){case"DirectionalLight":case"SpotLight":a={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Je};break;case"PointLight":a={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Je,shadowCameraNear:1,shadowCameraFar:1e3}}return c[l.id]=a,a}}}(),d={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadow:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]};for(let _=0;_<9;_++)d.probe.push(new te);const f=new te,m=new nn,g=new nn;return{setup:function y(_,S){let b=0,T=0,x=0;for(let K=0;K<9;K++)d.probe[K].set(0,0,0);let E=0,D=0,I=0,M=0,L=0,P=0,F=0,V=0;_.sort(RYe);const z=!0!==S?Math.PI:1;for(let K=0,se=_.length;K<se;K++){const W=_[K],Q=W.color,ie=W.intensity,ae=W.distance,he=W.shadow&&W.shadow.map?W.shadow.map.texture:null;if(W.isAmbientLight)b+=Q.r*ie*z,T+=Q.g*ie*z,x+=Q.b*ie*z;else if(W.isLightProbe)for(let J=0;J<9;J++)d.probe[J].addScaledVector(W.sh.coefficients[J],ie);else if(W.isDirectionalLight){const J=a.get(W);if(J.color.copy(W.color).multiplyScalar(W.intensity*z),W.castShadow){const ce=W.shadow,be=h.get(W);be.shadowBias=ce.bias,be.shadowNormalBias=ce.normalBias,be.shadowRadius=ce.radius,be.shadowMapSize=ce.mapSize,d.directionalShadow[E]=be,d.directionalShadowMap[E]=he,d.directionalShadowMatrix[E]=W.shadow.matrix,P++}d.directional[E]=J,E++}else if(W.isSpotLight){const J=a.get(W);if(J.position.setFromMatrixPosition(W.matrixWorld),J.color.copy(Q).multiplyScalar(ie*z),J.distance=ae,J.coneCos=Math.cos(W.angle),J.penumbraCos=Math.cos(W.angle*(1-W.penumbra)),J.decay=W.decay,W.castShadow){const ce=W.shadow,be=h.get(W);be.shadowBias=ce.bias,be.shadowNormalBias=ce.normalBias,be.shadowRadius=ce.radius,be.shadowMapSize=ce.mapSize,d.spotShadow[I]=be,d.spotShadowMap[I]=he,d.spotShadowMatrix[I]=W.shadow.matrix,V++}d.spot[I]=J,I++}else if(W.isRectAreaLight){const J=a.get(W);J.color.copy(Q).multiplyScalar(ie),J.halfWidth.set(.5*W.width,0,0),J.halfHeight.set(0,.5*W.height,0),d.rectArea[M]=J,M++}else if(W.isPointLight){const J=a.get(W);if(J.color.copy(W.color).multiplyScalar(W.intensity*z),J.distance=W.distance,J.decay=W.decay,W.castShadow){const ce=W.shadow,be=h.get(W);be.shadowBias=ce.bias,be.shadowNormalBias=ce.normalBias,be.shadowRadius=ce.radius,be.shadowMapSize=ce.mapSize,be.shadowCameraNear=ce.camera.near,be.shadowCameraFar=ce.camera.far,d.pointShadow[D]=be,d.pointShadowMap[D]=he,d.pointShadowMatrix[D]=W.shadow.matrix,F++}d.point[D]=J,D++}else if(W.isHemisphereLight){const J=a.get(W);J.skyColor.copy(W.color).multiplyScalar(ie*z),J.groundColor.copy(W.groundColor).multiplyScalar(ie*z),d.hemi[L]=J,L++}}M>0&&(l.isWebGL2||!0===c.has("OES_texture_float_linear")?(d.rectAreaLTC1=Ft.LTC_FLOAT_1,d.rectAreaLTC2=Ft.LTC_FLOAT_2):!0===c.has("OES_texture_half_float_linear")?(d.rectAreaLTC1=Ft.LTC_HALF_1,d.rectAreaLTC2=Ft.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),d.ambient[0]=b,d.ambient[1]=T,d.ambient[2]=x;const q=d.hash;(q.directionalLength!==E||q.pointLength!==D||q.spotLength!==I||q.rectAreaLength!==M||q.hemiLength!==L||q.numDirectionalShadows!==P||q.numPointShadows!==F||q.numSpotShadows!==V)&&(d.directional.length=E,d.spot.length=I,d.rectArea.length=M,d.point.length=D,d.hemi.length=L,d.directionalShadow.length=P,d.directionalShadowMap.length=P,d.pointShadow.length=F,d.pointShadowMap.length=F,d.spotShadow.length=V,d.spotShadowMap.length=V,d.directionalShadowMatrix.length=P,d.pointShadowMatrix.length=F,d.spotShadowMatrix.length=V,q.directionalLength=E,q.pointLength=D,q.spotLength=I,q.rectAreaLength=M,q.hemiLength=L,q.numDirectionalShadows=P,q.numPointShadows=F,q.numSpotShadows=V,d.version=IYe++)},setupView:function v(_,S){let b=0,T=0,x=0,E=0,D=0;const I=S.matrixWorldInverse;for(let M=0,L=_.length;M<L;M++){const P=_[M];if(P.isDirectionalLight){const F=d.directional[b];F.direction.setFromMatrixPosition(P.matrixWorld),f.setFromMatrixPosition(P.target.matrixWorld),F.direction.sub(f),F.direction.transformDirection(I),b++}else if(P.isSpotLight){const F=d.spot[x];F.position.setFromMatrixPosition(P.matrixWorld),F.position.applyMatrix4(I),F.direction.setFromMatrixPosition(P.matrixWorld),f.setFromMatrixPosition(P.target.matrixWorld),F.direction.sub(f),F.direction.transformDirection(I),x++}else if(P.isRectAreaLight){const F=d.rectArea[E];F.position.setFromMatrixPosition(P.matrixWorld),F.position.applyMatrix4(I),g.identity(),m.copy(P.matrixWorld),m.premultiply(I),g.extractRotation(m),F.halfWidth.set(.5*P.width,0,0),F.halfHeight.set(0,.5*P.height,0),F.halfWidth.applyMatrix4(g),F.halfHeight.applyMatrix4(g),E++}else if(P.isPointLight){const F=d.point[T];F.position.setFromMatrixPosition(P.matrixWorld),F.position.applyMatrix4(I),T++}else if(P.isHemisphereLight){const F=d.hemi[D];F.direction.setFromMatrixPosition(P.matrixWorld),F.direction.transformDirection(I),F.direction.normalize(),D++}}},state:d}}function cne(c,l){const a=new PYe(c,l),h=[],d=[];return{init:function f(){h.length=0,d.length=0},state:{lightsArray:h,shadowsArray:d,lights:a},setupLights:function y(S){a.setup(h,S)},setupLightsView:function v(S){a.setupView(h,S)},pushLight:function m(S){h.push(S)},pushShadow:function g(S){d.push(S)}}}function LYe(c,l){let a=new WeakMap;return{get:function h(f,m=0){let g;return!1===a.has(f)?(g=new cne(c,l),a.set(f,[g])):m>=a.get(f).length?(g=new cne(c,l),a.get(f).push(g)):g=a.get(f)[m],g},dispose:function d(){a=new WeakMap}}}class MV extends Is{constructor(l){super(),this.type="MeshDepthMaterial",this.depthPacking=3200,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.setValues(l)}copy(l){return super.copy(l),this.depthPacking=l.depthPacking,this.map=l.map,this.alphaMap=l.alphaMap,this.displacementMap=l.displacementMap,this.displacementScale=l.displacementScale,this.displacementBias=l.displacementBias,this.wireframe=l.wireframe,this.wireframeLinewidth=l.wireframeLinewidth,this}}MV.prototype.isMeshDepthMaterial=!0;class DV extends Is{constructor(l){super(),this.type="MeshDistanceMaterial",this.referencePosition=new te,this.nearDistance=1,this.farDistance=1e3,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.fog=!1,this.setValues(l)}copy(l){return super.copy(l),this.referencePosition.copy(l.referencePosition),this.nearDistance=l.nearDistance,this.farDistance=l.farDistance,this.map=l.map,this.alphaMap=l.alphaMap,this.displacementMap=l.displacementMap,this.displacementScale=l.displacementScale,this.displacementBias=l.displacementBias,this}}function une(c,l,a){let h=new UD;const d=new Je,f=new Je,m=new ai,g=new MV({depthPacking:3201}),y=new DV,v={},_=a.maxTextureSize,S={0:1,1:0,2:2},b=new rd({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Je},radius:{value:4}},vertexShader:"void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",fragmentShader:"uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tconst float samples = float( VSM_SAMPLES );\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\n\tfloat uvStart = samples <= 1.0 ? 0.0 : - 1.0;\n\tfor ( float i = 0.0; i < samples; i ++ ) {\n\t\tfloat uvOffset = uvStart + i * uvStride;\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean / samples;\n\tsquared_mean = squared_mean / samples;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}"}),T=b.clone();T.defines.HORIZONTAL_PASS=1;const x=new Mn;x.setAttribute("position",new ii(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const E=new ds(x,b),D=this;function I(P,F){const V=l.update(E);b.defines.VSM_SAMPLES!==P.blurSamples&&(b.defines.VSM_SAMPLES=P.blurSamples,T.defines.VSM_SAMPLES=P.blurSamples,b.needsUpdate=!0,T.needsUpdate=!0),b.uniforms.shadow_pass.value=P.map.texture,b.uniforms.resolution.value=P.mapSize,b.uniforms.radius.value=P.radius,c.setRenderTarget(P.mapPass),c.clear(),c.renderBufferDirect(F,null,V,b,E,null),T.uniforms.shadow_pass.value=P.mapPass.texture,T.uniforms.resolution.value=P.mapSize,T.uniforms.radius.value=P.radius,c.setRenderTarget(P.map),c.clear(),c.renderBufferDirect(F,null,V,T,E,null)}function M(P,F,V,z,q,K,se){let W=null;const Q=!0===z.isPointLight?P.customDistanceMaterial:P.customDepthMaterial;if(W=void 0!==Q?Q:!0===z.isPointLight?y:g,c.localClippingEnabled&&!0===V.clipShadows&&0!==V.clippingPlanes.length||V.displacementMap&&0!==V.displacementScale||V.alphaMap&&V.alphaTest>0){const ie=W.uuid,ae=V.uuid;let he=v[ie];void 0===he&&(he={},v[ie]=he);let J=he[ae];void 0===J&&(J=W.clone(),he[ae]=J),W=J}return W.visible=V.visible,W.wireframe=V.wireframe,W.side=3===se?null!==V.shadowSide?V.shadowSide:V.side:null!==V.shadowSide?V.shadowSide:S[V.side],W.alphaMap=V.alphaMap,W.alphaTest=V.alphaTest,W.clipShadows=V.clipShadows,W.clippingPlanes=V.clippingPlanes,W.clipIntersection=V.clipIntersection,W.displacementMap=V.displacementMap,W.displacementScale=V.displacementScale,W.displacementBias=V.displacementBias,W.wireframeLinewidth=V.wireframeLinewidth,W.linewidth=V.linewidth,!0===z.isPointLight&&!0===W.isMeshDistanceMaterial&&(W.referencePosition.setFromMatrixPosition(z.matrixWorld),W.nearDistance=q,W.farDistance=K),W}function L(P,F,V,z,q){if(!1===P.visible)return;if(P.layers.test(F.layers)&&(P.isMesh||P.isLine||P.isPoints)&&(P.castShadow||P.receiveShadow&&3===q)&&(!P.frustumCulled||h.intersectsObject(P))){P.modelViewMatrix.multiplyMatrices(V.matrixWorldInverse,P.matrixWorld);const W=l.update(P),Q=P.material;if(Array.isArray(Q)){const ie=W.groups;for(let ae=0,he=ie.length;ae<he;ae++){const J=ie[ae],ce=Q[J.materialIndex];if(ce&&ce.visible){const be=M(P,0,ce,z,V.near,V.far,q);c.renderBufferDirect(V,null,W,be,P,J)}}}else if(Q.visible){const ie=M(P,0,Q,z,V.near,V.far,q);c.renderBufferDirect(V,null,W,ie,P,null)}}const se=P.children;for(let W=0,Q=se.length;W<Q;W++)L(se[W],F,V,z,q)}this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=1,this.render=function(P,F,V){if(!1===D.enabled||!1===D.autoUpdate&&!1===D.needsUpdate||0===P.length)return;const z=c.getRenderTarget(),q=c.getActiveCubeFace(),K=c.getActiveMipmapLevel(),se=c.state;se.setBlending(0),se.buffers.color.setClear(1,1,1,1),se.buffers.depth.setTest(!0),se.setScissorTest(!1);for(let W=0,Q=P.length;W<Q;W++){const ie=P[W],ae=ie.shadow;if(void 0===ae){console.warn("THREE.WebGLShadowMap:",ie,"has no shadow.");continue}if(!1===ae.autoUpdate&&!1===ae.needsUpdate)continue;d.copy(ae.mapSize);const he=ae.getFrameExtents();if(d.multiply(he),f.copy(ae.mapSize),(d.x>_||d.y>_)&&(d.x>_&&(f.x=Math.floor(_/he.x),d.x=f.x*he.x,ae.mapSize.x=f.x),d.y>_&&(f.y=Math.floor(_/he.y),d.y=f.y*he.y,ae.mapSize.y=f.y)),null===ae.map&&!ae.isPointLightShadow&&3===this.type){const ce={minFilter:Fi,magFilter:Fi,format:Bo};ae.map=new ql(d.x,d.y,ce),ae.map.texture.name=ie.name+".shadowMap",ae.mapPass=new ql(d.x,d.y,ce),ae.camera.updateProjectionMatrix()}null===ae.map&&(ae.map=new ql(d.x,d.y,{minFilter:us,magFilter:us,format:Bo}),ae.map.texture.name=ie.name+".shadowMap",ae.camera.updateProjectionMatrix()),c.setRenderTarget(ae.map),c.clear();const J=ae.getViewportCount();for(let ce=0;ce<J;ce++){const be=ae.getViewport(ce);m.set(f.x*be.x,f.y*be.y,f.x*be.z,f.y*be.w),se.viewport(m),ae.updateMatrices(ie,ce),h=ae.getFrustum(),L(F,V,ae.camera,ie,this.type)}!ae.isPointLightShadow&&3===this.type&&I(ae,V),ae.needsUpdate=!1}D.needsUpdate=!1,c.setRenderTarget(z,q,K)}}function FYe(c,l,a){const h=a.isWebGL2,g=new function d(){let _e=!1;const Tt=new ai;let It=null;const sn=new ai(0,0,0,0);return{setMask:function(He){It!==He&&!_e&&(c.colorMask(He,He,He,He),It=He)},setLocked:function(He){_e=He},setClear:function(He,Yt,sr,kr,So){!0===So&&(He*=kr,Yt*=kr,sr*=kr),Tt.set(He,Yt,sr,kr),!1===sn.equals(Tt)&&(c.clearColor(He,Yt,sr,kr),sn.copy(Tt))},reset:function(){_e=!1,It=null,sn.set(-1,0,0,0)}}},y=new function f(){let _e=!1,Tt=null,It=null,sn=null;return{setTest:function(He){He?De(2929):en(2929)},setMask:function(He){Tt!==He&&!_e&&(c.depthMask(He),Tt=He)},setFunc:function(He){if(It!==He){if(He)switch(He){case 0:c.depthFunc(512);break;case 1:c.depthFunc(519);break;case 2:c.depthFunc(513);break;case 3:default:c.depthFunc(515);break;case 4:c.depthFunc(514);break;case 5:c.depthFunc(518);break;case 6:c.depthFunc(516);break;case 7:c.depthFunc(517)}else c.depthFunc(515);It=He}},setLocked:function(He){_e=He},setClear:function(He){sn!==He&&(c.clearDepth(He),sn=He)},reset:function(){_e=!1,Tt=null,It=null,sn=null}}},v=new function m(){let _e=!1,Tt=null,It=null,sn=null,He=null,Yt=null,sr=null,kr=null,So=null;return{setTest:function(Qr){_e||(Qr?De(2960):en(2960))},setMask:function(Qr){Tt!==Qr&&!_e&&(c.stencilMask(Qr),Tt=Qr)},setFunc:function(Qr,js,Ps){(It!==Qr||sn!==js||He!==Ps)&&(c.stencilFunc(Qr,js,Ps),It=Qr,sn=js,He=Ps)},setOp:function(Qr,js,Ps){(Yt!==Qr||sr!==js||kr!==Ps)&&(c.stencilOp(Qr,js,Ps),Yt=Qr,sr=js,kr=Ps)},setLocked:function(Qr){_e=Qr},setClear:function(Qr){So!==Qr&&(c.clearStencil(Qr),So=Qr)},reset:function(){_e=!1,Tt=null,It=null,sn=null,He=null,Yt=null,sr=null,kr=null,So=null}}};let _={},S={},b=new WeakMap,T=[],x=null,E=!1,D=null,I=null,M=null,L=null,P=null,F=null,V=null,z=!1,q=null,K=null,se=null,W=null,Q=null;const ie=c.getParameter(35661);let ae=!1,he=0;const J=c.getParameter(7938);-1!==J.indexOf("WebGL")?(he=parseFloat(/^WebGL (\d)/.exec(J)[1]),ae=he>=1):-1!==J.indexOf("OpenGL ES")&&(he=parseFloat(/^OpenGL ES (\d)/.exec(J)[1]),ae=he>=2);let ce=null,be={};const we=c.getParameter(3088),Ce=c.getParameter(2978),Te=(new ai).fromArray(we),fe=(new ai).fromArray(Ce);function $e(_e,Tt,It){const sn=new Uint8Array(4),He=c.createTexture();c.bindTexture(_e,He),c.texParameteri(_e,10241,9728),c.texParameteri(_e,10240,9728);for(let Yt=0;Yt<It;Yt++)c.texImage2D(Tt+Yt,0,6408,1,1,0,6408,5121,sn);return He}const Ve={};function De(_e){!0!==_[_e]&&(c.enable(_e),_[_e]=!0)}function en(_e){!1!==_[_e]&&(c.disable(_e),_[_e]=!1)}Ve[3553]=$e(3553,3553,1),Ve[34067]=$e(34067,34069,6),g.setClear(0,0,0,1),y.setClear(1),v.setClear(0),De(2929),y.setFunc(3),at(!1),Rt(1),De(2884),Qe(0);const an={100:32774,101:32778,102:32779};if(h)an[103]=32775,an[104]=32776;else{const _e=l.get("EXT_blend_minmax");null!==_e&&(an[103]=_e.MIN_EXT,an[104]=_e.MAX_EXT)}const Wt={200:0,201:1,202:768,204:770,210:776,208:774,206:772,203:769,205:771,209:775,207:773};function Qe(_e,Tt,It,sn,He,Yt,sr,kr){if(0!==_e){if(!1===E&&(De(3042),E=!0),5===_e)He=He||Tt,Yt=Yt||It,sr=sr||sn,(Tt!==I||He!==P)&&(c.blendEquationSeparate(an[Tt],an[He]),I=Tt,P=He),(It!==M||sn!==L||Yt!==F||sr!==V)&&(c.blendFuncSeparate(Wt[It],Wt[sn],Wt[Yt],Wt[sr]),M=It,L=sn,F=Yt,V=sr),D=_e,z=null;else if(_e!==D||kr!==z){if((100!==I||100!==P)&&(c.blendEquation(32774),I=100,P=100),kr)switch(_e){case 1:c.blendFuncSeparate(1,771,1,771);break;case 2:c.blendFunc(1,1);break;case 3:c.blendFuncSeparate(0,769,0,1);break;case 4:c.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",_e)}else switch(_e){case 1:c.blendFuncSeparate(770,771,1,771);break;case 2:c.blendFunc(770,1);break;case 3:c.blendFuncSeparate(0,769,0,1);break;case 4:c.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",_e)}M=null,L=null,F=null,V=null,D=_e,z=kr}}else!0===E&&(en(3042),E=!1)}function at(_e){q!==_e&&(c.frontFace(_e?2304:2305),q=_e)}function Rt(_e){0!==_e?(De(2884),_e!==K&&c.cullFace(1===_e?1029:2===_e?1028:1032)):en(2884),K=_e}function Jt(_e,Tt,It){_e?(De(32823),(W!==Tt||Q!==It)&&(c.polygonOffset(Tt,It),W=Tt,Q=It)):en(32823)}function Cn(_e){void 0===_e&&(_e=33984+ie-1),ce!==_e&&(c.activeTexture(_e),ce=_e)}return{buffers:{color:g,depth:y,stencil:v},enable:De,disable:en,bindFramebuffer:function ut(_e,Tt){return S[_e]!==Tt&&(c.bindFramebuffer(_e,Tt),S[_e]=Tt,h&&(36009===_e&&(S[36160]=Tt),36160===_e&&(S[36009]=Tt)),!0)},drawBuffers:function Fe(_e,Tt){let It=T,sn=!1;if(_e)if(It=b.get(Tt),void 0===It&&(It=[],b.set(Tt,It)),_e.isWebGLMultipleRenderTargets){const He=_e.texture;if(It.length!==He.length||36064!==It[0]){for(let Yt=0,sr=He.length;Yt<sr;Yt++)It[Yt]=36064+Yt;It.length=He.length,sn=!0}}else 36064!==It[0]&&(It[0]=36064,sn=!0);else 1029!==It[0]&&(It[0]=1029,sn=!0);sn&&(a.isWebGL2?c.drawBuffers(It):l.get("WEBGL_draw_buffers").drawBuffersWEBGL(It))},useProgram:function ht(_e){return x!==_e&&(c.useProgram(_e),x=_e,!0)},setBlending:Qe,setMaterial:function dt(_e,Tt){2===_e.side?en(2884):De(2884);let It=1===_e.side;Tt&&(It=!It),at(It),1===_e.blending&&!1===_e.transparent?Qe(0):Qe(_e.blending,_e.blendEquation,_e.blendSrc,_e.blendDst,_e.blendEquationAlpha,_e.blendSrcAlpha,_e.blendDstAlpha,_e.premultipliedAlpha),y.setFunc(_e.depthFunc),y.setTest(_e.depthTest),y.setMask(_e.depthWrite),g.setMask(_e.colorWrite);const sn=_e.stencilWrite;v.setTest(sn),sn&&(v.setMask(_e.stencilWriteMask),v.setFunc(_e.stencilFunc,_e.stencilRef,_e.stencilFuncMask),v.setOp(_e.stencilFail,_e.stencilZFail,_e.stencilZPass)),Jt(_e.polygonOffset,_e.polygonOffsetFactor,_e.polygonOffsetUnits),!0===_e.alphaToCoverage?De(32926):en(32926)},setFlipSided:at,setCullFace:Rt,setLineWidth:function bt(_e){_e!==se&&(ae&&c.lineWidth(_e),se=_e)},setPolygonOffset:Jt,setScissorTest:function Ye(_e){_e?De(3089):en(3089)},activeTexture:Cn,bindTexture:function ar(_e,Tt){null===ce&&Cn();let It=be[ce];void 0===It&&(It={type:void 0,texture:void 0},be[ce]=It),(It.type!==_e||It.texture!==Tt)&&(c.bindTexture(_e,Tt||Ve[_e]),It.type=_e,It.texture=Tt)},unbindTexture:function lr(){const _e=be[ce];void 0!==_e&&void 0!==_e.type&&(c.bindTexture(_e.type,null),_e.type=void 0,_e.texture=void 0)},compressedTexImage2D:function pe(){try{c.compressedTexImage2D.apply(c,arguments)}catch(_e){console.error("THREE.WebGLState:",_e)}},texImage2D:function qt(){try{c.texImage2D.apply(c,arguments)}catch(_e){console.error("THREE.WebGLState:",_e)}},texImage3D:function me(){try{c.texImage3D.apply(c,arguments)}catch(_e){console.error("THREE.WebGLState:",_e)}},texStorage2D:function $t(){try{c.texStorage2D.apply(c,arguments)}catch(_e){console.error("THREE.WebGLState:",_e)}},texStorage3D:function Xe(){try{c.texStorage3D.apply(c,arguments)}catch(_e){console.error("THREE.WebGLState:",_e)}},texSubImage2D:function ne(){try{c.texSubImage2D.apply(c,arguments)}catch(_e){console.error("THREE.WebGLState:",_e)}},texSubImage3D:function ze(){try{c.texSubImage3D.apply(c,arguments)}catch(_e){console.error("THREE.WebGLState:",_e)}},compressedTexSubImage2D:function Ct(){try{c.compressedTexSubImage2D.apply(c,arguments)}catch(_e){console.error("THREE.WebGLState:",_e)}},scissor:function je(_e){!1===Te.equals(_e)&&(c.scissor(_e.x,_e.y,_e.z,_e.w),Te.copy(_e))},viewport:function lt(_e){!1===fe.equals(_e)&&(c.viewport(_e.x,_e.y,_e.z,_e.w),fe.copy(_e))},reset:function yt(){c.disable(3042),c.disable(2884),c.disable(2929),c.disable(32823),c.disable(3089),c.disable(2960),c.disable(32926),c.blendEquation(32774),c.blendFunc(1,0),c.blendFuncSeparate(1,0,1,0),c.colorMask(!0,!0,!0,!0),c.clearColor(0,0,0,0),c.depthMask(!0),c.depthFunc(513),c.clearDepth(1),c.stencilMask(4294967295),c.stencilFunc(519,0,4294967295),c.stencilOp(7680,7680,7680),c.clearStencil(0),c.cullFace(1029),c.frontFace(2305),c.polygonOffset(0,0),c.activeTexture(33984),c.bindFramebuffer(36160,null),!0===h&&(c.bindFramebuffer(36009,null),c.bindFramebuffer(36008,null)),c.useProgram(null),c.lineWidth(1),c.scissor(0,0,c.canvas.width,c.canvas.height),c.viewport(0,0,c.canvas.width,c.canvas.height),_={},ce=null,be={},S={},b=new WeakMap,T=[],x=null,E=!1,D=null,I=null,M=null,L=null,P=null,F=null,V=null,z=!1,q=null,K=null,se=null,W=null,Q=null,Te.set(0,0,c.canvas.width,c.canvas.height),fe.set(0,0,c.canvas.width,c.canvas.height),g.reset(),y.reset(),v.reset()}}}function kYe(c,l,a,h,d,f,m){const g=d.isWebGL2,y=d.maxTextures,v=d.maxCubemapSize,_=d.maxTextureSize,S=d.maxSamples,T=l.has("WEBGL_multisampled_render_to_texture")?l.get("WEBGL_multisampled_render_to_texture"):void 0,x=new WeakMap;let E,D=!1;try{D=typeof OffscreenCanvas<"u"&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch{}function I(pe,ne){return D?new OffscreenCanvas(pe,ne):KT("canvas")}function M(pe,ne,ze,Ct){let $t=1;if((pe.width>Ct||pe.height>Ct)&&($t=Ct/Math.max(pe.width,pe.height)),$t<1||!0===ne){if(typeof HTMLImageElement<"u"&&pe instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&pe instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&pe instanceof ImageBitmap){const Xe=ne?gte:Math.floor,qt=Xe($t*pe.width),me=Xe($t*pe.height);void 0===E&&(E=I(qt,me));const je=ze?I(qt,me):E;return je.width=qt,je.height=me,je.getContext("2d").drawImage(pe,0,0,qt,me),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+pe.width+"x"+pe.height+") to ("+qt+"x"+me+")."),je}return"data"in pe&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+pe.width+"x"+pe.height+")."),pe}return pe}function L(pe){return q3(pe.width)&&q3(pe.height)}function F(pe,ne){return pe.generateMipmaps&&ne&&pe.minFilter!==us&&pe.minFilter!==Fi}function V(pe){c.generateMipmap(pe)}function z(pe,ne,ze,Ct,$t=!1){if(!1===g)return ne;if(null!==pe){if(void 0!==c[pe])return c[pe];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+pe+"'")}let Xe=ne;return 6403===ne&&(5126===ze&&(Xe=33326),5131===ze&&(Xe=33325),5121===ze&&(Xe=33321)),33319===ne&&(5126===ze&&(Xe=33328),5131===ze&&(Xe=33327),5121===ze&&(Xe=33323)),6408===ne&&(5126===ze&&(Xe=34836),5131===ze&&(Xe=34842),5121===ze&&(Xe=Ct===di&&!1===$t?35907:32856),32819===ze&&(Xe=32854),32820===ze&&(Xe=32855)),(33325===Xe||33326===Xe||33327===Xe||33328===Xe||34842===Xe||34836===Xe)&&l.get("EXT_color_buffer_float"),Xe}function q(pe,ne,ze){return!0===F(pe,ze)||pe.isFramebufferTexture&&pe.minFilter!==us&&pe.minFilter!==Fi?Math.log2(Math.max(ne.width,ne.height))+1:void 0!==pe.mipmaps&&pe.mipmaps.length>0?pe.mipmaps.length:pe.isCompressedTexture&&Array.isArray(pe.image)?ne.mipmaps.length:1}function K(pe){return pe===us||1004===pe||1005===pe?9728:9729}function se(pe){const ne=pe.target;ne.removeEventListener("dispose",se),function Q(pe){const ne=h.get(pe);void 0!==ne.__webglInit&&(c.deleteTexture(ne.__webglTexture),h.remove(pe))}(ne),ne.isVideoTexture&&x.delete(ne),m.memory.textures--}function W(pe){const ne=pe.target;ne.removeEventListener("dispose",W),function ie(pe){const ne=pe.texture,ze=h.get(pe),Ct=h.get(ne);if(pe){if(void 0!==Ct.__webglTexture&&(c.deleteTexture(Ct.__webglTexture),m.memory.textures--),pe.depthTexture&&pe.depthTexture.dispose(),pe.isWebGLCubeRenderTarget)for(let $t=0;$t<6;$t++)c.deleteFramebuffer(ze.__webglFramebuffer[$t]),ze.__webglDepthbuffer&&c.deleteRenderbuffer(ze.__webglDepthbuffer[$t]);else c.deleteFramebuffer(ze.__webglFramebuffer),ze.__webglDepthbuffer&&c.deleteRenderbuffer(ze.__webglDepthbuffer),ze.__webglMultisampledFramebuffer&&c.deleteFramebuffer(ze.__webglMultisampledFramebuffer),ze.__webglColorRenderbuffer&&c.deleteRenderbuffer(ze.__webglColorRenderbuffer),ze.__webglDepthRenderbuffer&&c.deleteRenderbuffer(ze.__webglDepthRenderbuffer);if(pe.isWebGLMultipleRenderTargets)for(let $t=0,Xe=ne.length;$t<Xe;$t++){const qt=h.get(ne[$t]);qt.__webglTexture&&(c.deleteTexture(qt.__webglTexture),m.memory.textures--),h.remove(ne[$t])}h.remove(ne),h.remove(pe)}}(ne)}let ae=0;function ce(pe,ne){const ze=h.get(pe);if(pe.isVideoTexture&&function bt(pe){const ne=m.render.frame;x.get(pe)!==ne&&(x.set(pe,ne),pe.update())}(pe),pe.version>0&&ze.__version!==pe.version){const Ct=pe.image;if(void 0===Ct)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined");else{if(!1!==Ct.complete)return void De(ze,pe,ne);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}a.activeTexture(33984+ne),a.bindTexture(3553,ze.__webglTexture)}function Ce(pe,ne){const ze=h.get(pe);pe.version>0&&ze.__version!==pe.version?function en(pe,ne,ze){if(6!==ne.image.length)return;Ve(pe,ne),a.activeTexture(33984+ze),a.bindTexture(34067,pe.__webglTexture),c.pixelStorei(37440,ne.flipY),c.pixelStorei(37441,ne.premultiplyAlpha),c.pixelStorei(3317,ne.unpackAlignment),c.pixelStorei(37443,0);const Ct=ne&&(ne.isCompressedTexture||ne.image[0].isCompressedTexture),$t=ne.image[0]&&ne.image[0].isDataTexture,Xe=[];for(let He=0;He<6;He++)Xe[He]=Ct||$t?$t?ne.image[He].image:ne.image[He]:M(ne.image[He],!1,!0,v),Xe[He]=Jt(ne,Xe[He]);const qt=Xe[0],me=L(qt)||g,je=f.convert(ne.format,ne.encoding),lt=f.convert(ne.type),yt=z(ne.internalFormat,je,lt,ne.encoding),_e=g&&!0!==ne.isVideoTexture,Tt=void 0===pe.__version;let sn,It=q(ne,qt,me);if($e(34067,ne,me),Ct){_e&&Tt&&a.texStorage2D(34067,It,yt,qt.width,qt.height);for(let He=0;He<6;He++){sn=Xe[He].mipmaps;for(let Yt=0;Yt<sn.length;Yt++){const sr=sn[Yt];ne.format!==Bo?null!==je?_e?a.compressedTexSubImage2D(34069+He,Yt,0,0,sr.width,sr.height,je,sr.data):a.compressedTexImage2D(34069+He,Yt,yt,sr.width,sr.height,0,sr.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):_e?a.texSubImage2D(34069+He,Yt,0,0,sr.width,sr.height,je,lt,sr.data):a.texImage2D(34069+He,Yt,yt,sr.width,sr.height,0,je,lt,sr.data)}}}else{sn=ne.mipmaps,_e&&Tt&&(sn.length>0&&It++,a.texStorage2D(34067,It,yt,Xe[0].width,Xe[0].height));for(let He=0;He<6;He++)if($t){_e?a.texSubImage2D(34069+He,0,0,0,Xe[He].width,Xe[He].height,je,lt,Xe[He].data):a.texImage2D(34069+He,0,yt,Xe[He].width,Xe[He].height,0,je,lt,Xe[He].data);for(let Yt=0;Yt<sn.length;Yt++){const kr=sn[Yt].image[He].image;_e?a.texSubImage2D(34069+He,Yt+1,0,0,kr.width,kr.height,je,lt,kr.data):a.texImage2D(34069+He,Yt+1,yt,kr.width,kr.height,0,je,lt,kr.data)}}else{_e?a.texSubImage2D(34069+He,0,0,0,je,lt,Xe[He]):a.texImage2D(34069+He,0,yt,je,lt,Xe[He]);for(let Yt=0;Yt<sn.length;Yt++){const sr=sn[Yt];_e?a.texSubImage2D(34069+He,Yt+1,0,0,je,lt,sr.image[He]):a.texImage2D(34069+He,Yt+1,yt,je,lt,sr.image[He])}}}F(ne,me)&&V(34067),pe.__version=ne.version,ne.onUpdate&&ne.onUpdate(ne)}(ze,pe,ne):(a.activeTexture(33984+ne),a.bindTexture(34067,ze.__webglTexture))}const Te={[Vm]:10497,[yo]:33071,1002:33648},fe={[us]:9728,1004:9984,1005:9986,[Fi]:9729,1007:9985,[zf]:9987};function $e(pe,ne,ze){if(ze?(c.texParameteri(pe,10242,Te[ne.wrapS]),c.texParameteri(pe,10243,Te[ne.wrapT]),(32879===pe||35866===pe)&&c.texParameteri(pe,32882,Te[ne.wrapR]),c.texParameteri(pe,10240,fe[ne.magFilter]),c.texParameteri(pe,10241,fe[ne.minFilter])):(c.texParameteri(pe,10242,33071),c.texParameteri(pe,10243,33071),(32879===pe||35866===pe)&&c.texParameteri(pe,32882,33071),(ne.wrapS!==yo||ne.wrapT!==yo)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),c.texParameteri(pe,10240,K(ne.magFilter)),c.texParameteri(pe,10241,K(ne.minFilter)),ne.minFilter!==us&&ne.minFilter!==Fi&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),!0===l.has("EXT_texture_filter_anisotropic")){const Ct=l.get("EXT_texture_filter_anisotropic");if(ne.type===jf&&!1===l.has("OES_texture_float_linear")||!1===g&&ne.type===l_&&!1===l.has("OES_texture_half_float_linear"))return;(ne.anisotropy>1||h.get(ne).__currentAnisotropy)&&(c.texParameterf(pe,Ct.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(ne.anisotropy,d.getMaxAnisotropy())),h.get(ne).__currentAnisotropy=ne.anisotropy)}}function Ve(pe,ne){void 0===pe.__webglInit&&(pe.__webglInit=!0,ne.addEventListener("dispose",se),pe.__webglTexture=c.createTexture(),m.memory.textures++)}function De(pe,ne,ze){let Ct=3553;ne.isDataTexture2DArray&&(Ct=35866),ne.isDataTexture3D&&(Ct=32879),Ve(pe,ne),a.activeTexture(33984+ze),a.bindTexture(Ct,pe.__webglTexture),c.pixelStorei(37440,ne.flipY),c.pixelStorei(37441,ne.premultiplyAlpha),c.pixelStorei(3317,ne.unpackAlignment),c.pixelStorei(37443,0);const $t=function P(pe){return!g&&(pe.wrapS!==yo||pe.wrapT!==yo||pe.minFilter!==us&&pe.minFilter!==Fi)}(ne)&&!1===L(ne.image);let Xe=M(ne.image,$t,!1,_);Xe=Jt(ne,Xe);const qt=L(Xe)||g,me=f.convert(ne.format,ne.encoding);let yt,je=f.convert(ne.type),lt=z(ne.internalFormat,me,je,ne.encoding,ne.isVideoTexture);$e(Ct,ne,qt);const _e=ne.mipmaps,Tt=g&&!0!==ne.isVideoTexture,It=void 0===pe.__version,sn=q(ne,Xe,qt);if(ne.isDepthTexture)lt=6402,g?lt=ne.type===jf?36012:1014===ne.type?33190:ne.type===c_?35056:33189:ne.type===jf&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),ne.format===Bm&&6402===lt&&ne.type!==WT&&1014!==ne.type&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),ne.type=WT,je=f.convert(ne.type)),ne.format===u_&&6402===lt&&(lt=34041,ne.type!==c_&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),ne.type=c_,je=f.convert(ne.type))),Tt&&It?a.texStorage2D(3553,1,lt,Xe.width,Xe.height):a.texImage2D(3553,0,lt,Xe.width,Xe.height,0,me,je,null);else if(ne.isDataTexture)if(_e.length>0&&qt){Tt&&It&&a.texStorage2D(3553,sn,lt,_e[0].width,_e[0].height);for(let He=0,Yt=_e.length;He<Yt;He++)yt=_e[He],Tt?a.texSubImage2D(3553,0,0,0,yt.width,yt.height,me,je,yt.data):a.texImage2D(3553,He,lt,yt.width,yt.height,0,me,je,yt.data);ne.generateMipmaps=!1}else Tt?(It&&a.texStorage2D(3553,sn,lt,Xe.width,Xe.height),a.texSubImage2D(3553,0,0,0,Xe.width,Xe.height,me,je,Xe.data)):a.texImage2D(3553,0,lt,Xe.width,Xe.height,0,me,je,Xe.data);else if(ne.isCompressedTexture){Tt&&It&&a.texStorage2D(3553,sn,lt,_e[0].width,_e[0].height);for(let He=0,Yt=_e.length;He<Yt;He++)yt=_e[He],ne.format!==Bo?null!==me?Tt?a.compressedTexSubImage2D(3553,He,0,0,yt.width,yt.height,me,yt.data):a.compressedTexImage2D(3553,He,lt,yt.width,yt.height,0,yt.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Tt?a.texSubImage2D(3553,He,0,0,yt.width,yt.height,me,je,yt.data):a.texImage2D(3553,He,lt,yt.width,yt.height,0,me,je,yt.data)}else if(ne.isDataTexture2DArray)Tt?(It&&a.texStorage3D(35866,sn,lt,Xe.width,Xe.height,Xe.depth),a.texSubImage3D(35866,0,0,0,0,Xe.width,Xe.height,Xe.depth,me,je,Xe.data)):a.texImage3D(35866,0,lt,Xe.width,Xe.height,Xe.depth,0,me,je,Xe.data);else if(ne.isDataTexture3D)Tt?(It&&a.texStorage3D(32879,sn,lt,Xe.width,Xe.height,Xe.depth),a.texSubImage3D(32879,0,0,0,0,Xe.width,Xe.height,Xe.depth,me,je,Xe.data)):a.texImage3D(32879,0,lt,Xe.width,Xe.height,Xe.depth,0,me,je,Xe.data);else if(ne.isFramebufferTexture)Tt&&It?a.texStorage2D(3553,sn,lt,Xe.width,Xe.height):a.texImage2D(3553,0,lt,Xe.width,Xe.height,0,me,je,null);else if(_e.length>0&&qt){Tt&&It&&a.texStorage2D(3553,sn,lt,_e[0].width,_e[0].height);for(let He=0,Yt=_e.length;He<Yt;He++)yt=_e[He],Tt?a.texSubImage2D(3553,He,0,0,me,je,yt):a.texImage2D(3553,He,lt,me,je,yt);ne.generateMipmaps=!1}else Tt?(It&&a.texStorage2D(3553,sn,lt,Xe.width,Xe.height),a.texSubImage2D(3553,0,0,0,me,je,Xe)):a.texImage2D(3553,0,lt,me,je,Xe);F(ne,qt)&&V(Ct),pe.__version=ne.version,ne.onUpdate&&ne.onUpdate(ne)}function ut(pe,ne,ze,Ct,$t){const Xe=f.convert(ze.format,ze.encoding),qt=f.convert(ze.type),me=z(ze.internalFormat,Xe,qt,ze.encoding);h.get(ne).__hasExternalTextures||(32879===$t||35866===$t?a.texImage3D($t,0,me,ne.width,ne.height,ne.depth,0,Xe,qt,null):a.texImage2D($t,0,me,ne.width,ne.height,0,Xe,qt,null)),a.bindFramebuffer(36160,pe),ne.useRenderToTexture?T.framebufferTexture2DMultisampleEXT(36160,Ct,$t,h.get(ze).__webglTexture,0,Rt(ne)):c.framebufferTexture2D(36160,Ct,$t,h.get(ze).__webglTexture,0),a.bindFramebuffer(36160,null)}function Fe(pe,ne,ze){if(c.bindRenderbuffer(36161,pe),ne.depthBuffer&&!ne.stencilBuffer){let Ct=33189;if(ze||ne.useRenderToTexture){const $t=ne.depthTexture;$t&&$t.isDepthTexture&&($t.type===jf?Ct=36012:1014===$t.type&&(Ct=33190));const Xe=Rt(ne);ne.useRenderToTexture?T.renderbufferStorageMultisampleEXT(36161,Xe,Ct,ne.width,ne.height):c.renderbufferStorageMultisample(36161,Xe,Ct,ne.width,ne.height)}else c.renderbufferStorage(36161,Ct,ne.width,ne.height);c.framebufferRenderbuffer(36160,36096,36161,pe)}else if(ne.depthBuffer&&ne.stencilBuffer){const Ct=Rt(ne);ze&&ne.useRenderbuffer?c.renderbufferStorageMultisample(36161,Ct,35056,ne.width,ne.height):ne.useRenderToTexture?T.renderbufferStorageMultisampleEXT(36161,Ct,35056,ne.width,ne.height):c.renderbufferStorage(36161,34041,ne.width,ne.height),c.framebufferRenderbuffer(36160,33306,36161,pe)}else{const Ct=!0===ne.isWebGLMultipleRenderTargets?ne.texture[0]:ne.texture,$t=f.convert(Ct.format,Ct.encoding),Xe=f.convert(Ct.type),qt=z(Ct.internalFormat,$t,Xe,Ct.encoding),me=Rt(ne);ze&&ne.useRenderbuffer?c.renderbufferStorageMultisample(36161,me,qt,ne.width,ne.height):ne.useRenderToTexture?T.renderbufferStorageMultisampleEXT(36161,me,qt,ne.width,ne.height):c.renderbufferStorage(36161,qt,ne.width,ne.height)}c.bindRenderbuffer(36161,null)}function an(pe){const ne=h.get(pe),ze=!0===pe.isWebGLCubeRenderTarget;if(pe.depthTexture&&!ne.__autoAllocateDepthBuffer){if(ze)throw new Error("target.depthTexture not supported in Cube render targets");!function ht(pe,ne){if(ne&&ne.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(a.bindFramebuffer(36160,pe),!ne.depthTexture||!ne.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!h.get(ne.depthTexture).__webglTexture||ne.depthTexture.image.width!==ne.width||ne.depthTexture.image.height!==ne.height)&&(ne.depthTexture.image.width=ne.width,ne.depthTexture.image.height=ne.height,ne.depthTexture.needsUpdate=!0),ce(ne.depthTexture,0);const Ct=h.get(ne.depthTexture).__webglTexture,$t=Rt(ne);if(ne.depthTexture.format===Bm)ne.useRenderToTexture?T.framebufferTexture2DMultisampleEXT(36160,36096,3553,Ct,0,$t):c.framebufferTexture2D(36160,36096,3553,Ct,0);else{if(ne.depthTexture.format!==u_)throw new Error("Unknown depthTexture format");ne.useRenderToTexture?T.framebufferTexture2DMultisampleEXT(36160,33306,3553,Ct,0,$t):c.framebufferTexture2D(36160,33306,3553,Ct,0)}}(ne.__webglFramebuffer,pe)}else if(ze){ne.__webglDepthbuffer=[];for(let Ct=0;Ct<6;Ct++)a.bindFramebuffer(36160,ne.__webglFramebuffer[Ct]),ne.__webglDepthbuffer[Ct]=c.createRenderbuffer(),Fe(ne.__webglDepthbuffer[Ct],pe,!1)}else a.bindFramebuffer(36160,ne.__webglFramebuffer),ne.__webglDepthbuffer=c.createRenderbuffer(),Fe(ne.__webglDepthbuffer,pe,!1);a.bindFramebuffer(36160,null)}function Rt(pe){return g&&(pe.useRenderbuffer||pe.useRenderToTexture)?Math.min(S,pe.samples):0}function Jt(pe,ne){const ze=pe.encoding,Ct=pe.format,$t=pe.type;return!0===pe.isCompressedTexture||!0===pe.isVideoTexture||1035===pe.format||ze!==Wf&&(ze===di?!1===g?!0===l.has("EXT_sRGB")&&Ct===Bo?(pe.format=1035,pe.minFilter=Fi,pe.generateMipmaps=!1):ne=zm.sRGBToLinear(ne):(Ct!==Bo||$t!==Hf)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture encoding:",ze)),ne}let Ye=!1,Cn=!1;this.allocateTextureUnit=function J(){const pe=ae;return pe>=y&&console.warn("THREE.WebGLTextures: Trying to use "+pe+" texture units while this GPU supports only "+y),ae+=1,pe},this.resetTextureUnits=function he(){ae=0},this.setTexture2D=ce,this.setTexture2DArray=function be(pe,ne){const ze=h.get(pe);pe.version>0&&ze.__version!==pe.version?De(ze,pe,ne):(a.activeTexture(33984+ne),a.bindTexture(35866,ze.__webglTexture))},this.setTexture3D=function we(pe,ne){const ze=h.get(pe);pe.version>0&&ze.__version!==pe.version?De(ze,pe,ne):(a.activeTexture(33984+ne),a.bindTexture(32879,ze.__webglTexture))},this.setTextureCube=Ce,this.rebindTextures=function Wt(pe,ne,ze){const Ct=h.get(pe);void 0!==ne&&ut(Ct.__webglFramebuffer,pe,pe.texture,36064,3553),void 0!==ze&&an(pe)},this.setupRenderTarget=function Qe(pe){const ne=pe.texture,ze=h.get(pe),Ct=h.get(ne);pe.addEventListener("dispose",W),!0!==pe.isWebGLMultipleRenderTargets&&(void 0===Ct.__webglTexture&&(Ct.__webglTexture=c.createTexture()),Ct.__version=ne.version,m.memory.textures++);const $t=!0===pe.isWebGLCubeRenderTarget,Xe=!0===pe.isWebGLMultipleRenderTargets,qt=ne.isDataTexture3D||ne.isDataTexture2DArray,me=L(pe)||g;if($t){ze.__webglFramebuffer=[];for(let je=0;je<6;je++)ze.__webglFramebuffer[je]=c.createFramebuffer()}else if(ze.__webglFramebuffer=c.createFramebuffer(),Xe)if(d.drawBuffers){const je=pe.texture;for(let lt=0,yt=je.length;lt<yt;lt++){const _e=h.get(je[lt]);void 0===_e.__webglTexture&&(_e.__webglTexture=c.createTexture(),m.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");else if(pe.useRenderbuffer)if(g){ze.__webglMultisampledFramebuffer=c.createFramebuffer(),ze.__webglColorRenderbuffer=c.createRenderbuffer(),c.bindRenderbuffer(36161,ze.__webglColorRenderbuffer);const je=f.convert(ne.format,ne.encoding),lt=f.convert(ne.type),yt=z(ne.internalFormat,je,lt,ne.encoding),_e=Rt(pe);c.renderbufferStorageMultisample(36161,_e,yt,pe.width,pe.height),a.bindFramebuffer(36160,ze.__webglMultisampledFramebuffer),c.framebufferRenderbuffer(36160,36064,36161,ze.__webglColorRenderbuffer),c.bindRenderbuffer(36161,null),pe.depthBuffer&&(ze.__webglDepthRenderbuffer=c.createRenderbuffer(),Fe(ze.__webglDepthRenderbuffer,pe,!0)),a.bindFramebuffer(36160,null)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.");if($t){a.bindTexture(34067,Ct.__webglTexture),$e(34067,ne,me);for(let je=0;je<6;je++)ut(ze.__webglFramebuffer[je],pe,ne,36064,34069+je);F(ne,me)&&V(34067),a.unbindTexture()}else if(Xe){const je=pe.texture;for(let lt=0,yt=je.length;lt<yt;lt++){const _e=je[lt],Tt=h.get(_e);a.bindTexture(3553,Tt.__webglTexture),$e(3553,_e,me),ut(ze.__webglFramebuffer,pe,_e,36064+lt,3553),F(_e,me)&&V(3553)}a.unbindTexture()}else{let je=3553;qt&&(g?je=ne.isDataTexture3D?32879:35866:console.warn("THREE.DataTexture3D and THREE.DataTexture2DArray only supported with WebGL2.")),a.bindTexture(je,Ct.__webglTexture),$e(je,ne,me),ut(ze.__webglFramebuffer,pe,ne,36064,je),F(ne,me)&&V(je),a.unbindTexture()}pe.depthBuffer&&an(pe)},this.updateRenderTargetMipmap=function dt(pe){const ne=L(pe)||g,ze=!0===pe.isWebGLMultipleRenderTargets?pe.texture:[pe.texture];for(let Ct=0,$t=ze.length;Ct<$t;Ct++){const Xe=ze[Ct];if(F(Xe,ne)){const qt=pe.isWebGLCubeRenderTarget?34067:3553,me=h.get(Xe).__webglTexture;a.bindTexture(qt,me),V(qt),a.unbindTexture()}}},this.updateMultisampleRenderTarget=function at(pe){if(pe.useRenderbuffer)if(g){const ne=pe.width,ze=pe.height;let Ct=16384;const $t=[36064],Xe=pe.stencilBuffer?33306:36096;pe.depthBuffer&&$t.push(Xe),pe.ignoreDepthForMultisampleCopy||(pe.depthBuffer&&(Ct|=256),pe.stencilBuffer&&(Ct|=1024));const qt=h.get(pe);a.bindFramebuffer(36008,qt.__webglMultisampledFramebuffer),a.bindFramebuffer(36009,qt.__webglFramebuffer),pe.ignoreDepthForMultisampleCopy&&(c.invalidateFramebuffer(36008,[Xe]),c.invalidateFramebuffer(36009,[Xe])),c.blitFramebuffer(0,0,ne,ze,0,0,ne,ze,Ct,9728),c.invalidateFramebuffer(36008,$t),a.bindFramebuffer(36008,null),a.bindFramebuffer(36009,qt.__webglMultisampledFramebuffer)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.")},this.setupDepthRenderbuffer=an,this.setupFrameBufferTexture=ut,this.safeSetTexture2D=function ar(pe,ne){pe&&pe.isWebGLRenderTarget&&(!1===Ye&&(console.warn("THREE.WebGLTextures.safeSetTexture2D: don't use render targets as textures. Use their .texture property instead."),Ye=!0),pe=pe.texture),ce(pe,ne)},this.safeSetTextureCube=function lr(pe,ne){pe&&pe.isWebGLCubeRenderTarget&&(!1===Cn&&(console.warn("THREE.WebGLTextures.safeSetTextureCube: don't use cube render targets as textures. Use their .texture property instead."),Cn=!0),pe=pe.texture),Ce(pe,ne)}}function VYe(c,l,a){const h=a.isWebGL2;return{convert:function d(f,m=null){let g;if(f===Hf)return 5121;if(1017===f)return 32819;if(1018===f)return 32820;if(1010===f)return 5120;if(1011===f)return 5122;if(f===WT)return 5123;if(1013===f)return 5124;if(1014===f)return 5125;if(f===jf)return 5126;if(f===l_)return h?5131:(g=l.get("OES_texture_half_float"),null!==g?g.HALF_FLOAT_OES:null);if(1021===f)return 6406;if(f===Bo)return 6408;if(1024===f)return 6409;if(1025===f)return 6410;if(f===Bm)return 6402;if(f===u_)return 34041;if(1028===f)return 6403;if(1022===f)return console.warn("THREE.WebGLRenderer: THREE.RGBFormat has been removed. Use THREE.RGBAFormat instead. https://github.com/mrdoob/three.js/pull/23228"),6408;if(1035===f)return g=l.get("EXT_sRGB"),null!==g?g.SRGB_ALPHA_EXT:null;if(1029===f)return 36244;if(1030===f)return 33319;if(1031===f)return 33320;if(1033===f)return 36249;if(33776===f||33777===f||33778===f||33779===f)if(m===di){if(g=l.get("WEBGL_compressed_texture_s3tc_srgb"),null===g)return null;if(33776===f)return g.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(33777===f)return g.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(33778===f)return g.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(33779===f)return g.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else{if(g=l.get("WEBGL_compressed_texture_s3tc"),null===g)return null;if(33776===f)return g.COMPRESSED_RGB_S3TC_DXT1_EXT;if(33777===f)return g.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(33778===f)return g.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(33779===f)return g.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(35840===f||35841===f||35842===f||35843===f){if(g=l.get("WEBGL_compressed_texture_pvrtc"),null===g)return null;if(35840===f)return g.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(35841===f)return g.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(35842===f)return g.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(35843===f)return g.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(36196===f)return g=l.get("WEBGL_compressed_texture_etc1"),null!==g?g.COMPRESSED_RGB_ETC1_WEBGL:null;if(37492===f||37496===f){if(g=l.get("WEBGL_compressed_texture_etc"),null===g)return null;if(37492===f)return m===di?g.COMPRESSED_SRGB8_ETC2:g.COMPRESSED_RGB8_ETC2;if(37496===f)return m===di?g.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:g.COMPRESSED_RGBA8_ETC2_EAC}if(37808===f||37809===f||37810===f||37811===f||37812===f||37813===f||37814===f||37815===f||37816===f||37817===f||37818===f||37819===f||37820===f||37821===f){if(g=l.get("WEBGL_compressed_texture_astc"),null===g)return null;if(37808===f)return m===di?g.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:g.COMPRESSED_RGBA_ASTC_4x4_KHR;if(37809===f)return m===di?g.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:g.COMPRESSED_RGBA_ASTC_5x4_KHR;if(37810===f)return m===di?g.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:g.COMPRESSED_RGBA_ASTC_5x5_KHR;if(37811===f)return m===di?g.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:g.COMPRESSED_RGBA_ASTC_6x5_KHR;if(37812===f)return m===di?g.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:g.COMPRESSED_RGBA_ASTC_6x6_KHR;if(37813===f)return m===di?g.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:g.COMPRESSED_RGBA_ASTC_8x5_KHR;if(37814===f)return m===di?g.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:g.COMPRESSED_RGBA_ASTC_8x6_KHR;if(37815===f)return m===di?g.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:g.COMPRESSED_RGBA_ASTC_8x8_KHR;if(37816===f)return m===di?g.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:g.COMPRESSED_RGBA_ASTC_10x5_KHR;if(37817===f)return m===di?g.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:g.COMPRESSED_RGBA_ASTC_10x6_KHR;if(37818===f)return m===di?g.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:g.COMPRESSED_RGBA_ASTC_10x8_KHR;if(37819===f)return m===di?g.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:g.COMPRESSED_RGBA_ASTC_10x10_KHR;if(37820===f)return m===di?g.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:g.COMPRESSED_RGBA_ASTC_12x10_KHR;if(37821===f)return m===di?g.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:g.COMPRESSED_RGBA_ASTC_12x12_KHR}if(36492===f){if(g=l.get("EXT_texture_compression_bptc"),null===g)return null;if(36492===f)return m===di?g.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:g.COMPRESSED_RGBA_BPTC_UNORM_EXT}return f===c_?h?34042:(g=l.get("WEBGL_depth_texture"),null!==g?g.UNSIGNED_INT_24_8_WEBGL:null):void 0}}}DV.prototype.isMeshDistanceMaterial=!0;class hne extends Rs{constructor(l=[]){super(),this.cameras=l}}hne.prototype.isArrayCamera=!0;class sd extends Wr{constructor(){super(),this.type="Group"}}sd.prototype.isGroup=!0;const BYe={type:"move"};class AV{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return null===this._hand&&(this._hand=new sd,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return null===this._targetRay&&(this._targetRay=new sd,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new te,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new te),this._targetRay}getGripSpace(){return null===this._grip&&(this._grip=new sd,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new te,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new te),this._grip}dispatchEvent(l){return null!==this._targetRay&&this._targetRay.dispatchEvent(l),null!==this._grip&&this._grip.dispatchEvent(l),null!==this._hand&&this._hand.dispatchEvent(l),this}disconnect(l){return this.dispatchEvent({type:"disconnected",data:l}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}update(l,a,h){let d=null,f=null,m=null;const g=this._targetRay,y=this._grip,v=this._hand;if(l&&"visible-blurred"!==a.session.visibilityState)if(null!==g&&(d=a.getPose(l.targetRaySpace,h),null!==d&&(g.matrix.fromArray(d.transform.matrix),g.matrix.decompose(g.position,g.rotation,g.scale),d.linearVelocity?(g.hasLinearVelocity=!0,g.linearVelocity.copy(d.linearVelocity)):g.hasLinearVelocity=!1,d.angularVelocity?(g.hasAngularVelocity=!0,g.angularVelocity.copy(d.angularVelocity)):g.hasAngularVelocity=!1,this.dispatchEvent(BYe))),v&&l.hand){m=!0;for(const E of l.hand.values()){const D=a.getJointPose(E,h);if(void 0===v.joints[E.jointName]){const M=new sd;M.matrixAutoUpdate=!1,M.visible=!1,v.joints[E.jointName]=M,v.add(M)}const I=v.joints[E.jointName];null!==D&&(I.matrix.fromArray(D.transform.matrix),I.matrix.decompose(I.position,I.rotation,I.scale),I.jointRadius=D.radius),I.visible=null!==D}const b=v.joints["index-finger-tip"].position.distanceTo(v.joints["thumb-tip"].position),T=.02,x=.005;v.inputState.pinching&&b>T+x?(v.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:l.handedness,target:this})):!v.inputState.pinching&&b<=T-x&&(v.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:l.handedness,target:this}))}else null!==y&&l.gripSpace&&(f=a.getPose(l.gripSpace,h),null!==f&&(y.matrix.fromArray(f.transform.matrix),y.matrix.decompose(y.position,y.rotation,y.scale),f.linearVelocity?(y.hasLinearVelocity=!0,y.linearVelocity.copy(f.linearVelocity)):y.hasLinearVelocity=!1,f.angularVelocity?(y.hasAngularVelocity=!0,y.angularVelocity.copy(f.angularVelocity)):y.hasAngularVelocity=!1));return null!==g&&(g.visible=null!==d),null!==y&&(y.visible=null!==f),null!==v&&(v.visible=null!==m),this}}class IV extends hs{constructor(l,a,h,d,f,m,g,y,v,_){if((_=void 0!==_?_:Bm)!==Bm&&_!==u_)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===h&&_===Bm&&(h=WT),void 0===h&&_===u_&&(h=c_),super(null,d,f,m,g,y,_,h,v),this.image={width:l,height:a},this.magFilter=void 0!==g?g:us,this.minFilter=void 0!==y?y:us,this.flipY=!1,this.generateMipmaps=!1}}IV.prototype.isDepthTexture=!0;class UYe extends Xf{constructor(l,a){super();const h=this;let d=null,f=1,m=null,g="local-floor";const y=l.extensions.has("WEBGL_multisampled_render_to_texture");let v=null,_=null,S=null,b=null,T=!1,x=null;const E=a.getContextAttributes();let D=null,I=null;const M=[],L=new Map,P=new Rs;P.layers.enable(1),P.viewport=new ai;const F=new Rs;F.layers.enable(2),F.viewport=new ai;const V=[P,F],z=new hne;z.layers.enable(1),z.layers.enable(2);let q=null,K=null;function se(Ce){const Te=L.get(Ce.inputSource);Te&&Te.dispatchEvent({type:Ce.type,data:Ce.inputSource})}function W(){L.forEach(function(Ce,Te){Ce.disconnect(Te)}),L.clear(),q=null,K=null,l.setRenderTarget(D),b=null,S=null,_=null,d=null,I=null,we.stop(),h.isPresenting=!1,h.dispatchEvent({type:"sessionend"})}function Q(Ce){const Te=d.inputSources;for(let fe=0;fe<M.length;fe++)L.set(Te[fe],M[fe]);for(let fe=0;fe<Ce.removed.length;fe++){const $e=Ce.removed[fe],Ve=L.get($e);Ve&&(Ve.dispatchEvent({type:"disconnected",data:$e}),L.delete($e))}for(let fe=0;fe<Ce.added.length;fe++){const $e=Ce.added[fe],Ve=L.get($e);Ve&&Ve.dispatchEvent({type:"connected",data:$e})}}this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(Ce){let Te=M[Ce];return void 0===Te&&(Te=new AV,M[Ce]=Te),Te.getTargetRaySpace()},this.getControllerGrip=function(Ce){let Te=M[Ce];return void 0===Te&&(Te=new AV,M[Ce]=Te),Te.getGripSpace()},this.getHand=function(Ce){let Te=M[Ce];return void 0===Te&&(Te=new AV,M[Ce]=Te),Te.getHandSpace()},this.setFramebufferScaleFactor=function(Ce){f=Ce,!0===h.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(Ce){g=Ce,!0===h.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return m},this.getBaseLayer=function(){return null!==S?S:b},this.getBinding=function(){return _},this.getFrame=function(){return x},this.getSession=function(){return d},this.setSession=function(){var Ce=ym(function*(Te){if(d=Te,null!==d){if(D=l.getRenderTarget(),d.addEventListener("select",se),d.addEventListener("selectstart",se),d.addEventListener("selectend",se),d.addEventListener("squeeze",se),d.addEventListener("squeezestart",se),d.addEventListener("squeezeend",se),d.addEventListener("end",W),d.addEventListener("inputsourceschange",Q),!0!==E.xrCompatible&&(yield a.makeXRCompatible()),void 0===d.renderState.layers||!1===l.capabilities.isWebGL2)b=new XRWebGLLayer(d,a,{antialias:void 0!==d.renderState.layers||E.antialias,alpha:E.alpha,depth:E.depth,stencil:E.stencil,framebufferScaleFactor:f}),d.updateRenderState({baseLayer:b}),I=new ql(b.framebufferWidth,b.framebufferHeight,{format:Bo,type:Hf,encoding:l.outputEncoding});else{T=E.antialias;let fe=null,$e=null,Ve=null;E.depth&&(Ve=E.stencil?35056:33190,fe=E.stencil?u_:Bm,$e=E.stencil?c_:WT);const De={colorFormat:l.outputEncoding===di?35907:32856,depthFormat:Ve,scaleFactor:f};_=new XRWebGLBinding(d,a),S=_.createProjectionLayer(De),d.updateRenderState({layers:[S]}),I=T?new K3(S.textureWidth,S.textureHeight,{format:Bo,type:Hf,depthTexture:new IV(S.textureWidth,S.textureHeight,$e,void 0,void 0,void 0,void 0,void 0,void 0,fe),stencilBuffer:E.stencil,ignoreDepth:S.ignoreDepthValues,useRenderToTexture:y,encoding:l.outputEncoding}):new ql(S.textureWidth,S.textureHeight,{format:Bo,type:Hf,depthTexture:new IV(S.textureWidth,S.textureHeight,$e,void 0,void 0,void 0,void 0,void 0,void 0,fe),stencilBuffer:E.stencil,ignoreDepth:S.ignoreDepthValues,encoding:l.outputEncoding})}I.isXRRenderTarget=!0,this.setFoveation(1),m=yield d.requestReferenceSpace(g),we.setContext(d),we.start(),h.isPresenting=!0,h.dispatchEvent({type:"sessionstart"})}});return function(Te){return Ce.apply(this,arguments)}}();const ie=new te,ae=new te;function J(Ce,Te){null===Te?Ce.matrixWorld.copy(Ce.matrix):Ce.matrixWorld.multiplyMatrices(Te.matrixWorld,Ce.matrix),Ce.matrixWorldInverse.copy(Ce.matrixWorld).invert()}this.updateCamera=function(Ce){if(null===d)return;z.near=F.near=P.near=Ce.near,z.far=F.far=P.far=Ce.far,(q!==z.near||K!==z.far)&&(d.updateRenderState({depthNear:z.near,depthFar:z.far}),q=z.near,K=z.far);const Te=Ce.parent,fe=z.cameras;J(z,Te);for(let Ve=0;Ve<fe.length;Ve++)J(fe[Ve],Te);z.matrixWorld.decompose(z.position,z.quaternion,z.scale),Ce.position.copy(z.position),Ce.quaternion.copy(z.quaternion),Ce.scale.copy(z.scale),Ce.matrix.copy(z.matrix),Ce.matrixWorld.copy(z.matrixWorld);const $e=Ce.children;for(let Ve=0,De=$e.length;Ve<De;Ve++)$e[Ve].updateMatrixWorld(!0);2===fe.length?function he(Ce,Te,fe){ie.setFromMatrixPosition(Te.matrixWorld),ae.setFromMatrixPosition(fe.matrixWorld);const $e=ie.distanceTo(ae),Ve=Te.projectionMatrix.elements,De=fe.projectionMatrix.elements,en=Ve[14]/(Ve[10]-1),ut=Ve[14]/(Ve[10]+1),Fe=(Ve[9]+1)/Ve[5],ht=(Ve[9]-1)/Ve[5],an=(Ve[8]-1)/Ve[0],Wt=(De[8]+1)/De[0],Qe=en*an,dt=en*Wt,at=$e/(-an+Wt),Rt=at*-an;Te.matrixWorld.decompose(Ce.position,Ce.quaternion,Ce.scale),Ce.translateX(Rt),Ce.translateZ(at),Ce.matrixWorld.compose(Ce.position,Ce.quaternion,Ce.scale),Ce.matrixWorldInverse.copy(Ce.matrixWorld).invert();const bt=en+at,Jt=ut+at;Ce.projectionMatrix.makePerspective(Qe-Rt,dt+($e-Rt),Fe*ut/Jt*bt,ht*ut/Jt*bt,bt,Jt)}(z,P,F):z.projectionMatrix.copy(P.projectionMatrix)},this.getCamera=function(){return z},this.getFoveation=function(){return null!==S?S.fixedFoveation:null!==b?b.fixedFoveation:void 0},this.setFoveation=function(Ce){null!==S&&(S.fixedFoveation=Ce),null!==b&&void 0!==b.fixedFoveation&&(b.fixedFoveation=Ce)};let ce=null;const we=new Ite;we.setAnimationLoop(function be(Ce,Te){if(v=Te.getViewerPose(m),x=Te,null!==v){const $e=v.views;null!==b&&(l.setRenderTargetFramebuffer(I,b.framebuffer),l.setRenderTarget(I));let Ve=!1;$e.length!==z.cameras.length&&(z.cameras.length=0,Ve=!0);for(let De=0;De<$e.length;De++){const en=$e[De];let ut=null;if(null!==b)ut=b.getViewport(en);else{const ht=_.getViewSubImage(S,en);ut=ht.viewport,0===De&&(l.setRenderTargetTextures(I,ht.colorTexture,S.ignoreDepthValues?void 0:ht.depthStencilTexture),l.setRenderTarget(I))}const Fe=V[De];Fe.matrix.fromArray(en.transform.matrix),Fe.projectionMatrix.fromArray(en.projectionMatrix),Fe.viewport.set(ut.x,ut.y,ut.width,ut.height),0===De&&z.matrix.copy(Fe.matrix),!0===Ve&&z.cameras.push(Fe)}}const fe=d.inputSources;for(let $e=0;$e<M.length;$e++)M[$e].update(fe[$e],Te,m);ce&&ce(Ce,Te),x=null}),this.setAnimationLoop=function(Ce){ce=Ce},this.dispose=function(){}}}function GYe(c){function h(I,M){I.opacity.value=M.opacity,M.color&&I.diffuse.value.copy(M.color),M.emissive&&I.emissive.value.copy(M.emissive).multiplyScalar(M.emissiveIntensity),M.map&&(I.map.value=M.map),M.alphaMap&&(I.alphaMap.value=M.alphaMap),M.specularMap&&(I.specularMap.value=M.specularMap),M.alphaTest>0&&(I.alphaTest.value=M.alphaTest);const L=c.get(M).envMap;let P,F;L&&(I.envMap.value=L,I.flipEnvMap.value=L.isCubeTexture&&!1===L.isRenderTargetTexture?-1:1,I.reflectivity.value=M.reflectivity,I.ior.value=M.ior,I.refractionRatio.value=M.refractionRatio),M.lightMap&&(I.lightMap.value=M.lightMap,I.lightMapIntensity.value=M.lightMapIntensity),M.aoMap&&(I.aoMap.value=M.aoMap,I.aoMapIntensity.value=M.aoMapIntensity),M.map?P=M.map:M.specularMap?P=M.specularMap:M.displacementMap?P=M.displacementMap:M.normalMap?P=M.normalMap:M.bumpMap?P=M.bumpMap:M.roughnessMap?P=M.roughnessMap:M.metalnessMap?P=M.metalnessMap:M.alphaMap?P=M.alphaMap:M.emissiveMap?P=M.emissiveMap:M.clearcoatMap?P=M.clearcoatMap:M.clearcoatNormalMap?P=M.clearcoatNormalMap:M.clearcoatRoughnessMap?P=M.clearcoatRoughnessMap:M.specularIntensityMap?P=M.specularIntensityMap:M.specularColorMap?P=M.specularColorMap:M.transmissionMap?P=M.transmissionMap:M.thicknessMap?P=M.thicknessMap:M.sheenColorMap?P=M.sheenColorMap:M.sheenRoughnessMap&&(P=M.sheenRoughnessMap),void 0!==P&&(P.isWebGLRenderTarget&&(P=P.texture),!0===P.matrixAutoUpdate&&P.updateMatrix(),I.uvTransform.value.copy(P.matrix)),M.aoMap?F=M.aoMap:M.lightMap&&(F=M.lightMap),void 0!==F&&(F.isWebGLRenderTarget&&(F=F.texture),!0===F.matrixAutoUpdate&&F.updateMatrix(),I.uv2Transform.value.copy(F.matrix))}function S(I,M){I.roughness.value=M.roughness,I.metalness.value=M.metalness,M.roughnessMap&&(I.roughnessMap.value=M.roughnessMap),M.metalnessMap&&(I.metalnessMap.value=M.metalnessMap),M.emissiveMap&&(I.emissiveMap.value=M.emissiveMap),M.bumpMap&&(I.bumpMap.value=M.bumpMap,I.bumpScale.value=M.bumpScale,1===M.side&&(I.bumpScale.value*=-1)),M.normalMap&&(I.normalMap.value=M.normalMap,I.normalScale.value.copy(M.normalScale),1===M.side&&I.normalScale.value.negate()),M.displacementMap&&(I.displacementMap.value=M.displacementMap,I.displacementScale.value=M.displacementScale,I.displacementBias.value=M.displacementBias),c.get(M).envMap&&(I.envMapIntensity.value=M.envMapIntensity)}return{refreshFogUniforms:function l(I,M){I.fogColor.value.copy(M.color),M.isFog?(I.fogNear.value=M.near,I.fogFar.value=M.far):M.isFogExp2&&(I.fogDensity.value=M.density)},refreshMaterialUniforms:function a(I,M,L,P,F){M.isMeshBasicMaterial?h(I,M):M.isMeshLambertMaterial?(h(I,M),function y(I,M){M.emissiveMap&&(I.emissiveMap.value=M.emissiveMap)}(I,M)):M.isMeshToonMaterial?(h(I,M),function _(I,M){M.gradientMap&&(I.gradientMap.value=M.gradientMap),M.emissiveMap&&(I.emissiveMap.value=M.emissiveMap),M.bumpMap&&(I.bumpMap.value=M.bumpMap,I.bumpScale.value=M.bumpScale,1===M.side&&(I.bumpScale.value*=-1)),M.normalMap&&(I.normalMap.value=M.normalMap,I.normalScale.value.copy(M.normalScale),1===M.side&&I.normalScale.value.negate()),M.displacementMap&&(I.displacementMap.value=M.displacementMap,I.displacementScale.value=M.displacementScale,I.displacementBias.value=M.displacementBias)}(I,M)):M.isMeshPhongMaterial?(h(I,M),function v(I,M){I.specular.value.copy(M.specular),I.shininess.value=Math.max(M.shininess,1e-4),M.emissiveMap&&(I.emissiveMap.value=M.emissiveMap),M.bumpMap&&(I.bumpMap.value=M.bumpMap,I.bumpScale.value=M.bumpScale,1===M.side&&(I.bumpScale.value*=-1)),M.normalMap&&(I.normalMap.value=M.normalMap,I.normalScale.value.copy(M.normalScale),1===M.side&&I.normalScale.value.negate()),M.displacementMap&&(I.displacementMap.value=M.displacementMap,I.displacementScale.value=M.displacementScale,I.displacementBias.value=M.displacementBias)}(I,M)):M.isMeshStandardMaterial?(h(I,M),M.isMeshPhysicalMaterial?function b(I,M,L){S(I,M),I.ior.value=M.ior,M.sheen>0&&(I.sheenColor.value.copy(M.sheenColor).multiplyScalar(M.sheen),I.sheenRoughness.value=M.sheenRoughness,M.sheenColorMap&&(I.sheenColorMap.value=M.sheenColorMap),M.sheenRoughnessMap&&(I.sheenRoughnessMap.value=M.sheenRoughnessMap)),M.clearcoat>0&&(I.clearcoat.value=M.clearcoat,I.clearcoatRoughness.value=M.clearcoatRoughness,M.clearcoatMap&&(I.clearcoatMap.value=M.clearcoatMap),M.clearcoatRoughnessMap&&(I.clearcoatRoughnessMap.value=M.clearcoatRoughnessMap),M.clearcoatNormalMap&&(I.clearcoatNormalScale.value.copy(M.clearcoatNormalScale),I.clearcoatNormalMap.value=M.clearcoatNormalMap,1===M.side&&I.clearcoatNormalScale.value.negate())),M.transmission>0&&(I.transmission.value=M.transmission,I.transmissionSamplerMap.value=L.texture,I.transmissionSamplerSize.value.set(L.width,L.height),M.transmissionMap&&(I.transmissionMap.value=M.transmissionMap),I.thickness.value=M.thickness,M.thicknessMap&&(I.thicknessMap.value=M.thicknessMap),I.attenuationDistance.value=M.attenuationDistance,I.attenuationColor.value.copy(M.attenuationColor)),I.specularIntensity.value=M.specularIntensity,I.specularColor.value.copy(M.specularColor),M.specularIntensityMap&&(I.specularIntensityMap.value=M.specularIntensityMap),M.specularColorMap&&(I.specularColorMap.value=M.specularColorMap)}(I,M,F):S(I,M)):M.isMeshMatcapMaterial?(h(I,M),function T(I,M){M.matcap&&(I.matcap.value=M.matcap),M.bumpMap&&(I.bumpMap.value=M.bumpMap,I.bumpScale.value=M.bumpScale,1===M.side&&(I.bumpScale.value*=-1)),M.normalMap&&(I.normalMap.value=M.normalMap,I.normalScale.value.copy(M.normalScale),1===M.side&&I.normalScale.value.negate()),M.displacementMap&&(I.displacementMap.value=M.displacementMap,I.displacementScale.value=M.displacementScale,I.displacementBias.value=M.displacementBias)}(I,M)):M.isMeshDepthMaterial?(h(I,M),function x(I,M){M.displacementMap&&(I.displacementMap.value=M.displacementMap,I.displacementScale.value=M.displacementScale,I.displacementBias.value=M.displacementBias)}(I,M)):M.isMeshDistanceMaterial?(h(I,M),function E(I,M){M.displacementMap&&(I.displacementMap.value=M.displacementMap,I.displacementScale.value=M.displacementScale,I.displacementBias.value=M.displacementBias),I.referencePosition.value.copy(M.referencePosition),I.nearDistance.value=M.nearDistance,I.farDistance.value=M.farDistance}(I,M)):M.isMeshNormalMaterial?(h(I,M),function D(I,M){M.bumpMap&&(I.bumpMap.value=M.bumpMap,I.bumpScale.value=M.bumpScale,1===M.side&&(I.bumpScale.value*=-1)),M.normalMap&&(I.normalMap.value=M.normalMap,I.normalScale.value.copy(M.normalScale),1===M.side&&I.normalScale.value.negate()),M.displacementMap&&(I.displacementMap.value=M.displacementMap,I.displacementScale.value=M.displacementScale,I.displacementBias.value=M.displacementBias)}(I,M)):M.isLineBasicMaterial?(function d(I,M){I.diffuse.value.copy(M.color),I.opacity.value=M.opacity}(I,M),M.isLineDashedMaterial&&function f(I,M){I.dashSize.value=M.dashSize,I.totalSize.value=M.dashSize+M.gapSize,I.scale.value=M.scale}(I,M)):M.isPointsMaterial?function m(I,M,L,P){let F;I.diffuse.value.copy(M.color),I.opacity.value=M.opacity,I.size.value=M.size*L,I.scale.value=.5*P,M.map&&(I.map.value=M.map),M.alphaMap&&(I.alphaMap.value=M.alphaMap),M.alphaTest>0&&(I.alphaTest.value=M.alphaTest),M.map?F=M.map:M.alphaMap&&(F=M.alphaMap),void 0!==F&&(!0===F.matrixAutoUpdate&&F.updateMatrix(),I.uvTransform.value.copy(F.matrix))}(I,M,L,P):M.isSpriteMaterial?function g(I,M){let L;I.diffuse.value.copy(M.color),I.opacity.value=M.opacity,I.rotation.value=M.rotation,M.map&&(I.map.value=M.map),M.alphaMap&&(I.alphaMap.value=M.alphaMap),M.alphaTest>0&&(I.alphaTest.value=M.alphaTest),M.map?L=M.map:M.alphaMap&&(L=M.alphaMap),void 0!==L&&(!0===L.matrixAutoUpdate&&L.updateMatrix(),I.uvTransform.value.copy(L.matrix))}(I,M):M.isShadowMaterial?(I.color.value.copy(M.color),I.opacity.value=M.opacity):M.isShaderMaterial&&(M.uniformsNeedUpdate=!1)}}}function Kr(c={}){const l=void 0!==c.canvas?c.canvas:function zYe(){const c=KT("canvas");return c.style.display="block",c}(),a=void 0!==c.context?c.context:null,h=void 0!==c.alpha&&c.alpha,d=void 0===c.depth||c.depth,f=void 0===c.stencil||c.stencil,m=void 0!==c.antialias&&c.antialias,g=void 0===c.premultipliedAlpha||c.premultipliedAlpha,y=void 0!==c.preserveDrawingBuffer&&c.preserveDrawingBuffer,v=void 0!==c.powerPreference?c.powerPreference:"default",_=void 0!==c.failIfMajorPerformanceCaveat&&c.failIfMajorPerformanceCaveat;let S=null,b=null;const T=[],x=[];this.domElement=l,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputEncoding=Wf,this.physicallyCorrectLights=!1,this.toneMapping=0,this.toneMappingExposure=1;const E=this;let D=!1,I=0,M=0,L=null,P=-1,F=null;const V=new ai,z=new ai;let q=null,K=l.width,se=l.height,W=1,Q=null,ie=null;const ae=new ai(0,0,K,se),he=new ai(0,0,K,se);let J=!1;const ce=new UD;let be=!1,we=!1,Ce=null;const Te=new nn,fe=new te,$e={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function Ve(){return null===L?W:1}let ut,Fe,ht,an,Wt,Qe,dt,at,Rt,bt,Jt,Ye,Cn,ar,lr,pe,ne,ze,Ct,$t,Xe,qt,me,De=a;function en(oe,Re){for(let Ue=0;Ue<oe.length;Ue++){const Ze=l.getContext(oe[Ue],Re);if(null!==Ze)return Ze}return null}try{const oe={alpha:!0,depth:d,stencil:f,antialias:m,premultipliedAlpha:g,preserveDrawingBuffer:y,powerPreference:v,failIfMajorPerformanceCaveat:_};if("setAttribute"in l&&l.setAttribute("data-engine","three.js r137"),l.addEventListener("webglcontextlost",yt,!1),l.addEventListener("webglcontextrestored",_e,!1),null===De){const Re=["webgl2","webgl","experimental-webgl"];if(!0===E.isWebGL1Renderer&&Re.shift(),De=en(Re,oe),null===De)throw en(Re)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}void 0===De.getShaderPrecisionFormat&&(De.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(oe){throw console.error("THREE.WebGLRenderer: "+oe.message),oe}function je(){ut=new a$e(De),Fe=new t$e(De,ut,c),ut.init(Fe),qt=new VYe(De,ut,Fe),ht=new FYe(De,ut,Fe),an=new u$e(De),Wt=new xYe,Qe=new kYe(De,ut,ht,Wt,Fe,qt,an),dt=new r$e(E),at=new o$e(E),Rt=new rXe(De,Fe),me=new Jqe(De,ut,Rt,Fe),bt=new l$e(De,Rt,an,me),Jt=new p$e(De,bt,Rt,an),Ct=new f$e(De,Fe,Qe),pe=new n$e(Wt),Ye=new CYe(E,dt,at,ut,Fe,me,pe),Cn=new GYe(Wt),ar=new MYe,lr=new LYe(ut,Fe),ze=new Qqe(E,dt,ht,Jt,h,g),ne=new une(E,Jt,Fe),$t=new e$e(De,ut,an,Fe),Xe=new c$e(De,ut,an,Fe),an.programs=Ye.programs,E.capabilities=Fe,E.extensions=ut,E.properties=Wt,E.renderLists=ar,E.shadowMap=ne,E.state=ht,E.info=an}je();const lt=new UYe(E,De);function yt(oe){oe.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),D=!0}function _e(){console.log("THREE.WebGLRenderer: Context Restored."),D=!1;const oe=an.autoReset,Re=ne.enabled,Ue=ne.autoUpdate,Pe=ne.needsUpdate,Ze=ne.type;je(),an.autoReset=oe,ne.enabled=Re,ne.autoUpdate=Ue,ne.needsUpdate=Pe,ne.type=Ze}function Tt(oe){const Re=oe.target;Re.removeEventListener("dispose",Tt),function It(oe){(function sn(oe){const Re=Wt.get(oe).programs;void 0!==Re&&(Re.forEach(function(Ue){Ye.releaseProgram(Ue)}),oe.isShaderMaterial&&Ye.releaseShaderCache(oe))})(oe),Wt.remove(oe)}(Re)}this.xr=lt,this.getContext=function(){return De},this.getContextAttributes=function(){return De.getContextAttributes()},this.forceContextLoss=function(){const oe=ut.get("WEBGL_lose_context");oe&&oe.loseContext()},this.forceContextRestore=function(){const oe=ut.get("WEBGL_lose_context");oe&&oe.restoreContext()},this.getPixelRatio=function(){return W},this.setPixelRatio=function(oe){void 0!==oe&&(W=oe,this.setSize(K,se,!1))},this.getSize=function(oe){return oe.set(K,se)},this.setSize=function(oe,Re,Ue){lt.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(K=oe,se=Re,l.width=Math.floor(oe*W),l.height=Math.floor(Re*W),!1!==Ue&&(l.style.width=oe+"px",l.style.height=Re+"px"),this.setViewport(0,0,oe,Re))},this.getDrawingBufferSize=function(oe){return oe.set(K*W,se*W).floor()},this.setDrawingBufferSize=function(oe,Re,Ue){K=oe,se=Re,W=Ue,l.width=Math.floor(oe*Ue),l.height=Math.floor(Re*Ue),this.setViewport(0,0,oe,Re)},this.getCurrentViewport=function(oe){return oe.copy(V)},this.getViewport=function(oe){return oe.copy(ae)},this.setViewport=function(oe,Re,Ue,Pe){oe.isVector4?ae.set(oe.x,oe.y,oe.z,oe.w):ae.set(oe,Re,Ue,Pe),ht.viewport(V.copy(ae).multiplyScalar(W).floor())},this.getScissor=function(oe){return oe.copy(he)},this.setScissor=function(oe,Re,Ue,Pe){oe.isVector4?he.set(oe.x,oe.y,oe.z,oe.w):he.set(oe,Re,Ue,Pe),ht.scissor(z.copy(he).multiplyScalar(W).floor())},this.getScissorTest=function(){return J},this.setScissorTest=function(oe){ht.setScissorTest(J=oe)},this.setOpaqueSort=function(oe){Q=oe},this.setTransparentSort=function(oe){ie=oe},this.getClearColor=function(oe){return oe.copy(ze.getClearColor())},this.setClearColor=function(){ze.setClearColor.apply(ze,arguments)},this.getClearAlpha=function(){return ze.getClearAlpha()},this.setClearAlpha=function(){ze.setClearAlpha.apply(ze,arguments)},this.clear=function(oe,Re,Ue){let Pe=0;(void 0===oe||oe)&&(Pe|=16384),(void 0===Re||Re)&&(Pe|=256),(void 0===Ue||Ue)&&(Pe|=1024),De.clear(Pe)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){l.removeEventListener("webglcontextlost",yt,!1),l.removeEventListener("webglcontextrestored",_e,!1),ar.dispose(),lr.dispose(),Wt.dispose(),dt.dispose(),at.dispose(),Jt.dispose(),me.dispose(),Ye.dispose(),lt.dispose(),lt.removeEventListener("sessionstart",sr),lt.removeEventListener("sessionend",kr),Ce&&(Ce.dispose(),Ce=null),So.stop()},this.renderBufferDirect=function(oe,Re,Ue,Pe,Ze,dn){null===Re&&(Re=$e);const Dn=Ze.isMesh&&Ze.matrixWorld.determinant()<0,fn=function Kc(oe,Re,Ue,Pe,Ze){!0!==Re.isScene&&(Re=$e),Qe.resetTextureUnits();const dn=Re.fog,fn=null===L?E.outputEncoding:!0===L.isXRRenderTarget?L.texture.encoding:Wf,pn=(Pe.isMeshStandardMaterial?at:dt).get(Pe.envMap||(Pe.isMeshStandardMaterial?Re.environment:null)),Cr=!0===Pe.vertexColors&&!!Ue.attributes.color&&4===Ue.attributes.color.itemSize,yr=!!Pe.normalMap&&!!Ue.attributes.tangent,_r=!!Ue.morphAttributes.position,cr=!!Ue.morphAttributes.normal,bl=Ue.morphAttributes.position?Ue.morphAttributes.position.length:0,Jl=Pe.toneMapped?E.toneMapping:0,ur=Wt.get(Pe),zo=b.state.lights;!0!==be||!0!==we&&oe===F||pe.setState(Pe,oe,oe===F&&Pe.id===P);let qi=!1;Pe.version===ur.__version?(ur.needsLights&&ur.lightsStateVersion!==zo.state.version||ur.outputEncoding!==fn||Ze.isInstancedMesh&&!1===ur.instancing||!Ze.isInstancedMesh&&!0===ur.instancing||Ze.isSkinnedMesh&&!1===ur.skinning||!Ze.isSkinnedMesh&&!0===ur.skinning||ur.envMap!==pn||Pe.fog&&ur.fog!==dn||void 0!==ur.numClippingPlanes&&(ur.numClippingPlanes!==pe.numPlanes||ur.numIntersection!==pe.numIntersection)||ur.vertexAlphas!==Cr||ur.vertexTangents!==yr||ur.morphTargets!==_r||ur.morphNormals!==cr||ur.toneMapping!==Jl||!0===Fe.isWebGL2&&ur.morphTargetsCount!==bl)&&(qi=!0):(qi=!0,ur.__version=Pe.version);let ka=ur.currentProgram;!0===qi&&(ka=Sl(Pe,Re,Ze));let Qc=!1,Tl=!1,ec=!1;const ms=ka.getUniforms(),md=ur.uniforms;if(ht.useProgram(ka.program)&&(Qc=!0,Tl=!0,ec=!0),Pe.id!==P&&(P=Pe.id,Tl=!0),Qc||F!==oe){if(ms.setValue(De,"projectionMatrix",oe.projectionMatrix),Fe.logarithmicDepthBuffer&&ms.setValue(De,"logDepthBufFC",2/(Math.log(oe.far+1)/Math.LN2)),F!==oe&&(F=oe,Tl=!0,ec=!0),Pe.isShaderMaterial||Pe.isMeshPhongMaterial||Pe.isMeshToonMaterial||Pe.isMeshStandardMaterial||Pe.envMap){const Ws=ms.map.cameraPosition;void 0!==Ws&&Ws.setValue(De,fe.setFromMatrixPosition(oe.matrixWorld))}(Pe.isMeshPhongMaterial||Pe.isMeshToonMaterial||Pe.isMeshLambertMaterial||Pe.isMeshBasicMaterial||Pe.isMeshStandardMaterial||Pe.isShaderMaterial)&&ms.setValue(De,"isOrthographic",!0===oe.isOrthographicCamera),(Pe.isMeshPhongMaterial||Pe.isMeshToonMaterial||Pe.isMeshLambertMaterial||Pe.isMeshBasicMaterial||Pe.isMeshStandardMaterial||Pe.isShaderMaterial||Pe.isShadowMaterial||Ze.isSkinnedMesh)&&ms.setValue(De,"viewMatrix",oe.matrixWorldInverse)}if(Ze.isSkinnedMesh){ms.setOptional(De,Ze,"bindMatrix"),ms.setOptional(De,Ze,"bindMatrixInverse");const Ws=Ze.skeleton;Ws&&(Fe.floatVertexTextures?(null===Ws.boneTexture&&Ws.computeBoneTexture(),ms.setValue(De,"boneTexture",Ws.boneTexture,Qe),ms.setValue(De,"boneTextureSize",Ws.boneTextureSize)):ms.setOptional(De,Ws,"boneMatrices"))}return!!Ue&&(void 0!==Ue.morphAttributes.position||void 0!==Ue.morphAttributes.normal)&&Ct.update(Ze,Ue,Pe,ka),(Tl||ur.receiveShadow!==Ze.receiveShadow)&&(ur.receiveShadow=Ze.receiveShadow,ms.setValue(De,"receiveShadow",Ze.receiveShadow)),Tl&&(ms.setValue(De,"toneMappingExposure",E.toneMappingExposure),ur.needsLights&&function $_(oe,Re){oe.ambientLightColor.needsUpdate=Re,oe.lightProbe.needsUpdate=Re,oe.directionalLights.needsUpdate=Re,oe.directionalLightShadows.needsUpdate=Re,oe.pointLights.needsUpdate=Re,oe.pointLightShadows.needsUpdate=Re,oe.spotLights.needsUpdate=Re,oe.spotLightShadows.needsUpdate=Re,oe.rectAreaLights.needsUpdate=Re,oe.hemisphereLights.needsUpdate=Re}(md,ec),dn&&Pe.fog&&Cn.refreshFogUniforms(md,dn),Cn.refreshMaterialUniforms(md,Pe,W,se,Ce),np.upload(De,ur.uniformsList,md,Qe)),Pe.isShaderMaterial&&!0===Pe.uniformsNeedUpdate&&(np.upload(De,ur.uniformsList,md,Qe),Pe.uniformsNeedUpdate=!1),Pe.isSpriteMaterial&&ms.setValue(De,"center",Ze.center),ms.setValue(De,"modelViewMatrix",Ze.modelViewMatrix),ms.setValue(De,"normalMatrix",Ze.normalMatrix),ms.setValue(De,"modelMatrix",Ze.matrixWorld),ka}(oe,Re,Ue,Pe,Ze);ht.setMaterial(Pe,Dn);let pn=Ue.index;const Cr=Ue.attributes.position;if(null===pn){if(void 0===Cr||0===Cr.count)return}else if(0===pn.count)return;let yr=1;!0===Pe.wireframe&&(pn=bt.getWireframeAttribute(Ue),yr=2),me.setup(Ze,Pe,fn,Ue,pn);let _r,cr=$t;null!==pn&&(_r=Rt.get(pn),cr=Xe,cr.setIndex(_r));const bl=null!==pn?pn.count:Cr.count,Jl=Ue.drawRange.start*yr,ur=Ue.drawRange.count*yr,zo=null!==dn?dn.start*yr:0,qi=null!==dn?dn.count*yr:1/0,ka=Math.max(Jl,zo),Qc=Math.min(bl,Jl+ur,zo+qi)-1,Tl=Math.max(0,Qc-ka+1);if(0!==Tl){if(Ze.isMesh)!0===Pe.wireframe?(ht.setLineWidth(Pe.wireframeLinewidth*Ve()),cr.setMode(1)):cr.setMode(4);else if(Ze.isLine){let ec=Pe.linewidth;void 0===ec&&(ec=1),ht.setLineWidth(ec*Ve()),cr.setMode(Ze.isLineSegments?1:Ze.isLineLoop?2:3)}else Ze.isPoints?cr.setMode(0):Ze.isSprite&&cr.setMode(4);if(Ze.isInstancedMesh)cr.renderInstances(ka,Tl,Ze.count);else if(Ue.isInstancedBufferGeometry){const ec=Math.min(Ue.instanceCount,Ue._maxInstanceCount);cr.renderInstances(ka,Tl,ec)}else cr.render(ka,Tl)}},this.compile=function(oe,Re){b=lr.get(oe),b.init(),x.push(b),oe.traverseVisible(function(Ue){Ue.isLight&&Ue.layers.test(Re.layers)&&(b.pushLight(Ue),Ue.castShadow&&b.pushShadow(Ue))}),b.setupLights(E.physicallyCorrectLights),oe.traverse(function(Ue){const Pe=Ue.material;if(Pe)if(Array.isArray(Pe))for(let Ze=0;Ze<Pe.length;Ze++)Sl(Pe[Ze],oe,Ue);else Sl(Pe,oe,Ue)}),x.pop(),b=null};let He=null;function sr(){So.stop()}function kr(){So.start()}const So=new Ite;function Qr(oe,Re,Ue,Pe){if(!1===oe.visible)return;if(oe.layers.test(Re.layers))if(oe.isGroup)Ue=oe.renderOrder;else if(oe.isLOD)!0===oe.autoUpdate&&oe.update(Re);else if(oe.isLight)b.pushLight(oe),oe.castShadow&&b.pushShadow(oe);else if(oe.isSprite){if(!oe.frustumCulled||ce.intersectsSprite(oe)){Pe&&fe.setFromMatrixPosition(oe.matrixWorld).applyMatrix4(Te);const Dn=Jt.update(oe),fn=oe.material;fn.visible&&S.push(oe,Dn,fn,Ue,fe.z,null)}}else if((oe.isMesh||oe.isLine||oe.isPoints)&&(oe.isSkinnedMesh&&oe.skeleton.frame!==an.render.frame&&(oe.skeleton.update(),oe.skeleton.frame=an.render.frame),!oe.frustumCulled||ce.intersectsObject(oe))){Pe&&fe.setFromMatrixPosition(oe.matrixWorld).applyMatrix4(Te);const Dn=Jt.update(oe),fn=oe.material;if(Array.isArray(fn)){const pn=Dn.groups;for(let Cr=0,yr=pn.length;Cr<yr;Cr++){const _r=pn[Cr],cr=fn[_r.materialIndex];cr&&cr.visible&&S.push(oe,Dn,cr,Ue,fe.z,_r)}}else fn.visible&&S.push(oe,Dn,fn,Ue,fe.z,null)}const dn=oe.children;for(let Dn=0,fn=dn.length;Dn<fn;Dn++)Qr(dn[Dn],Re,Ue,Pe)}function js(oe,Re,Ue,Pe){const Ze=oe.opaque,dn=oe.transmissive,Dn=oe.transparent;b.setupLightsView(Ue),dn.length>0&&function Ps(oe,Re,Ue){null===Ce&&(Ce=new(!0===m&&!0===Fe.isWebGL2?K3:ql)(1024,1024,{generateMipmaps:!0,type:null!==qt.convert(l_)?l_:Hf,minFilter:zf,magFilter:us,wrapS:yo,wrapT:yo,useRenderToTexture:ut.has("WEBGL_multisampled_render_to_texture")}));const Pe=E.getRenderTarget();E.setRenderTarget(Ce),E.clear();const Ze=E.toneMapping;E.toneMapping=0,fd(oe,Re,Ue),E.toneMapping=Ze,Qe.updateMultisampleRenderTarget(Ce),Qe.updateRenderTargetMipmap(Ce),E.setRenderTarget(Pe)}(Ze,Re,Ue),Pe&&ht.viewport(V.copy(Pe)),Ze.length>0&&fd(Ze,Re,Ue),dn.length>0&&fd(dn,Re,Ue),Dn.length>0&&fd(Dn,Re,Ue)}function fd(oe,Re,Ue){const Pe=!0===Re.isScene?Re.overrideMaterial:null;for(let Ze=0,dn=oe.length;Ze<dn;Ze++){const Dn=oe[Ze],fn=Dn.object,pn=Dn.geometry,Cr=null===Pe?Dn.material:Pe,yr=Dn.group;fn.layers.test(Ue.layers)&&pd(fn,Re,Ue,pn,Cr,yr)}}function pd(oe,Re,Ue,Pe,Ze,dn){oe.onBeforeRender(E,Re,Ue,Pe,Ze,dn),oe.modelViewMatrix.multiplyMatrices(Ue.matrixWorldInverse,oe.matrixWorld),oe.normalMatrix.getNormalMatrix(oe.modelViewMatrix),Ze.onBeforeRender(E,Re,Ue,Pe,oe,dn),!0===Ze.transparent&&2===Ze.side?(Ze.side=1,Ze.needsUpdate=!0,E.renderBufferDirect(Ue,Re,Pe,Ze,oe,dn),Ze.side=0,Ze.needsUpdate=!0,E.renderBufferDirect(Ue,Re,Pe,Ze,oe,dn),Ze.side=2):E.renderBufferDirect(Ue,Re,Pe,Ze,oe,dn),oe.onAfterRender(E,Re,Ue,Pe,Ze,dn)}function Sl(oe,Re,Ue){!0!==Re.isScene&&(Re=$e);const Pe=Wt.get(oe),Ze=b.state.lights,Dn=Ze.state.version,fn=Ye.getParameters(oe,Ze.state,b.state.shadowsArray,Re,Ue),pn=Ye.getProgramCacheKey(fn);let Cr=Pe.programs;Pe.environment=oe.isMeshStandardMaterial?Re.environment:null,Pe.fog=Re.fog,Pe.envMap=(oe.isMeshStandardMaterial?at:dt).get(oe.envMap||Pe.environment),void 0===Cr&&(oe.addEventListener("dispose",Tt),Cr=new Map,Pe.programs=Cr);let yr=Cr.get(pn);if(void 0!==yr){if(Pe.currentProgram===yr&&Pe.lightsStateVersion===Dn)return Ql(oe,fn),yr}else fn.uniforms=Ye.getUniforms(oe),oe.onBuild(Ue,fn,E),oe.onBeforeCompile(fn,E),yr=Ye.acquireProgram(fn,pn),Cr.set(pn,yr),Pe.uniforms=fn.uniforms;const _r=Pe.uniforms;(!oe.isShaderMaterial&&!oe.isRawShaderMaterial||!0===oe.clipping)&&(_r.clippingPlanes=pe.uniform),Ql(oe,fn),Pe.needsLights=function Y_(oe){return oe.isMeshLambertMaterial||oe.isMeshToonMaterial||oe.isMeshPhongMaterial||oe.isMeshStandardMaterial||oe.isShadowMaterial||oe.isShaderMaterial&&!0===oe.lights}(oe),Pe.lightsStateVersion=Dn,Pe.needsLights&&(_r.ambientLightColor.value=Ze.state.ambient,_r.lightProbe.value=Ze.state.probe,_r.directionalLights.value=Ze.state.directional,_r.directionalLightShadows.value=Ze.state.directionalShadow,_r.spotLights.value=Ze.state.spot,_r.spotLightShadows.value=Ze.state.spotShadow,_r.rectAreaLights.value=Ze.state.rectArea,_r.ltc_1.value=Ze.state.rectAreaLTC1,_r.ltc_2.value=Ze.state.rectAreaLTC2,_r.pointLights.value=Ze.state.point,_r.pointLightShadows.value=Ze.state.pointShadow,_r.hemisphereLights.value=Ze.state.hemi,_r.directionalShadowMap.value=Ze.state.directionalShadowMap,_r.directionalShadowMatrix.value=Ze.state.directionalShadowMatrix,_r.spotShadowMap.value=Ze.state.spotShadowMap,_r.spotShadowMatrix.value=Ze.state.spotShadowMatrix,_r.pointShadowMap.value=Ze.state.pointShadowMap,_r.pointShadowMatrix.value=Ze.state.pointShadowMatrix);const cr=yr.getUniforms(),bl=np.seqWithValue(cr.seq,_r);return Pe.currentProgram=yr,Pe.uniformsList=bl,yr}function Ql(oe,Re){const Ue=Wt.get(oe);Ue.outputEncoding=Re.outputEncoding,Ue.instancing=Re.instancing,Ue.skinning=Re.skinning,Ue.morphTargets=Re.morphTargets,Ue.morphNormals=Re.morphNormals,Ue.morphTargetsCount=Re.morphTargetsCount,Ue.numClippingPlanes=Re.numClippingPlanes,Ue.numIntersection=Re.numClipIntersection,Ue.vertexAlphas=Re.vertexAlphas,Ue.vertexTangents=Re.vertexTangents,Ue.toneMapping=Re.toneMapping}So.setAnimationLoop(function Yt(oe){He&&He(oe)}),typeof window<"u"&&So.setContext(window),this.setAnimationLoop=function(oe){He=oe,lt.setAnimationLoop(oe),null===oe?So.stop():So.start()},lt.addEventListener("sessionstart",sr),lt.addEventListener("sessionend",kr),this.render=function(oe,Re){if(void 0===Re||!0===Re.isCamera){if(!0!==D){if(!0===oe.autoUpdate&&oe.updateMatrixWorld(),null===Re.parent&&Re.updateMatrixWorld(),!0===lt.enabled&&!0===lt.isPresenting&&(!0===lt.cameraAutoUpdate&&lt.updateCamera(Re),Re=lt.getCamera()),!0===oe.isScene&&oe.onBeforeRender(E,oe,Re,L),b=lr.get(oe,x.length),b.init(),x.push(b),Te.multiplyMatrices(Re.projectionMatrix,Re.matrixWorldInverse),ce.setFromProjectionMatrix(Te),we=this.localClippingEnabled,be=pe.init(this.clippingPlanes,we,Re),S=ar.get(oe,T.length),S.init(),T.push(S),Qr(oe,Re,0,E.sortObjects),S.finish(),!0===E.sortObjects&&S.sort(Q,ie),!0===be&&pe.beginShadows(),ne.render(b.state.shadowsArray,oe,Re),!0===be&&pe.endShadows(),!0===this.info.autoReset&&this.info.reset(),ze.render(S,oe),b.setupLights(E.physicallyCorrectLights),Re.isArrayCamera){const Pe=Re.cameras;for(let Ze=0,dn=Pe.length;Ze<dn;Ze++){const Dn=Pe[Ze];js(S,oe,Dn,Dn.viewport)}}else js(S,oe,Re);null!==L&&(Qe.updateMultisampleRenderTarget(L),Qe.updateRenderTargetMipmap(L)),!0===oe.isScene&&oe.onAfterRender(E,oe,Re),ht.buffers.depth.setTest(!0),ht.buffers.depth.setMask(!0),ht.buffers.color.setMask(!0),ht.setPolygonOffset(!1),me.resetDefaultState(),P=-1,F=null,x.pop(),b=x.length>0?x[x.length-1]:null,T.pop(),S=T.length>0?T[T.length-1]:null}}else console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.")},this.getActiveCubeFace=function(){return I},this.getActiveMipmapLevel=function(){return M},this.getRenderTarget=function(){return L},this.setRenderTargetTextures=function(oe,Re,Ue){Wt.get(oe.texture).__webglTexture=Re,Wt.get(oe.depthTexture).__webglTexture=Ue;const Pe=Wt.get(oe);Pe.__hasExternalTextures=!0,Pe.__hasExternalTextures&&(Pe.__autoAllocateDepthBuffer=void 0===Ue,Pe.__autoAllocateDepthBuffer||oe.useRenderToTexture&&(console.warn("render-to-texture extension was disabled because an external texture was provided"),oe.useRenderToTexture=!1,oe.useRenderbuffer=!0))},this.setRenderTargetFramebuffer=function(oe,Re){const Ue=Wt.get(oe);Ue.__webglFramebuffer=Re,Ue.__useDefaultFramebuffer=void 0===Re},this.setRenderTarget=function(oe,Re=0,Ue=0){L=oe,I=Re,M=Ue;let Pe=!0;if(oe){const pn=Wt.get(oe);void 0!==pn.__useDefaultFramebuffer?(ht.bindFramebuffer(36160,null),Pe=!1):void 0===pn.__webglFramebuffer?Qe.setupRenderTarget(oe):pn.__hasExternalTextures&&Qe.rebindTextures(oe,Wt.get(oe.texture).__webglTexture,Wt.get(oe.depthTexture).__webglTexture)}let Ze=null,dn=!1,Dn=!1;if(oe){const pn=oe.texture;(pn.isDataTexture3D||pn.isDataTexture2DArray)&&(Dn=!0);const Cr=Wt.get(oe).__webglFramebuffer;oe.isWebGLCubeRenderTarget?(Ze=Cr[Re],dn=!0):Ze=oe.useRenderbuffer?Wt.get(oe).__webglMultisampledFramebuffer:Cr,V.copy(oe.viewport),z.copy(oe.scissor),q=oe.scissorTest}else V.copy(ae).multiplyScalar(W).floor(),z.copy(he).multiplyScalar(W).floor(),q=J;if(ht.bindFramebuffer(36160,Ze)&&Fe.drawBuffers&&Pe&&ht.drawBuffers(oe,Ze),ht.viewport(V),ht.scissor(z),ht.setScissorTest(q),dn){const pn=Wt.get(oe.texture);De.framebufferTexture2D(36160,36064,34069+Re,pn.__webglTexture,Ue)}else if(Dn){const pn=Wt.get(oe.texture);De.framebufferTextureLayer(36160,36064,pn.__webglTexture,Ue||0,Re||0)}P=-1},this.readRenderTargetPixels=function(oe,Re,Ue,Pe,Ze,dn,Dn){if(!oe||!oe.isWebGLRenderTarget)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let fn=Wt.get(oe).__webglFramebuffer;if(oe.isWebGLCubeRenderTarget&&void 0!==Dn&&(fn=fn[Dn]),fn){ht.bindFramebuffer(36160,fn);try{const pn=oe.texture,Cr=pn.format,yr=pn.type;if(Cr!==Bo&&qt.convert(Cr)!==De.getParameter(35739))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");const _r=yr===l_&&(ut.has("EXT_color_buffer_half_float")||Fe.isWebGL2&&ut.has("EXT_color_buffer_float"));if(!(yr===Hf||qt.convert(yr)===De.getParameter(35738)||yr===jf&&(Fe.isWebGL2||ut.has("OES_texture_float")||ut.has("WEBGL_color_buffer_float"))||_r))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");36053===De.checkFramebufferStatus(36160)?Re>=0&&Re<=oe.width-Pe&&Ue>=0&&Ue<=oe.height-Ze&&De.readPixels(Re,Ue,Pe,Ze,qt.convert(Cr),qt.convert(yr),dn):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.")}finally{const pn=null!==L?Wt.get(L).__webglFramebuffer:null;ht.bindFramebuffer(36160,pn)}}},this.copyFramebufferToTexture=function(oe,Re,Ue=0){if(!0!==Re.isFramebufferTexture)return void console.error("THREE.WebGLRenderer: copyFramebufferToTexture() can only be used with FramebufferTexture.");const Pe=Math.pow(2,-Ue),Ze=Math.floor(Re.image.width*Pe),dn=Math.floor(Re.image.height*Pe);Qe.setTexture2D(Re,0),De.copyTexSubImage2D(3553,Ue,0,0,oe.x,oe.y,Ze,dn),ht.unbindTexture()},this.copyTextureToTexture=function(oe,Re,Ue,Pe=0){const Ze=Re.image.width,dn=Re.image.height,Dn=qt.convert(Ue.format),fn=qt.convert(Ue.type);Qe.setTexture2D(Ue,0),De.pixelStorei(37440,Ue.flipY),De.pixelStorei(37441,Ue.premultiplyAlpha),De.pixelStorei(3317,Ue.unpackAlignment),Re.isDataTexture?De.texSubImage2D(3553,Pe,oe.x,oe.y,Ze,dn,Dn,fn,Re.image.data):Re.isCompressedTexture?De.compressedTexSubImage2D(3553,Pe,oe.x,oe.y,Re.mipmaps[0].width,Re.mipmaps[0].height,Dn,Re.mipmaps[0].data):De.texSubImage2D(3553,Pe,oe.x,oe.y,Dn,fn,Re.image),0===Pe&&Ue.generateMipmaps&&De.generateMipmap(3553),ht.unbindTexture()},this.copyTextureToTexture3D=function(oe,Re,Ue,Pe,Ze=0){if(E.isWebGL1Renderer)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");const dn=oe.max.x-oe.min.x+1,Dn=oe.max.y-oe.min.y+1,fn=oe.max.z-oe.min.z+1,pn=qt.convert(Pe.format),Cr=qt.convert(Pe.type);let yr;if(Pe.isDataTexture3D)Qe.setTexture3D(Pe,0),yr=32879;else{if(!Pe.isDataTexture2DArray)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");Qe.setTexture2DArray(Pe,0),yr=35866}De.pixelStorei(37440,Pe.flipY),De.pixelStorei(37441,Pe.premultiplyAlpha),De.pixelStorei(3317,Pe.unpackAlignment);const _r=De.getParameter(3314),cr=De.getParameter(32878),bl=De.getParameter(3316),Jl=De.getParameter(3315),ur=De.getParameter(32877),zo=Ue.isCompressedTexture?Ue.mipmaps[0]:Ue.image;De.pixelStorei(3314,zo.width),De.pixelStorei(32878,zo.height),De.pixelStorei(3316,oe.min.x),De.pixelStorei(3315,oe.min.y),De.pixelStorei(32877,oe.min.z),Ue.isDataTexture||Ue.isDataTexture3D?De.texSubImage3D(yr,Ze,Re.x,Re.y,Re.z,dn,Dn,fn,pn,Cr,zo.data):Ue.isCompressedTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),De.compressedTexSubImage3D(yr,Ze,Re.x,Re.y,Re.z,dn,Dn,fn,pn,zo.data)):De.texSubImage3D(yr,Ze,Re.x,Re.y,Re.z,dn,Dn,fn,pn,Cr,zo),De.pixelStorei(3314,_r),De.pixelStorei(32878,cr),De.pixelStorei(3316,bl),De.pixelStorei(3315,Jl),De.pixelStorei(32877,ur),0===Ze&&Pe.generateMipmaps&&De.generateMipmap(yr),ht.unbindTexture()},this.initTexture=function(oe){Qe.setTexture2D(oe,0),ht.unbindTexture()},this.resetState=function(){I=0,M=0,L=null,ht.reset(),me.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}Kr.prototype.isWebGLRenderer=!0,class HYe extends Kr{}.prototype.isWebGL1Renderer=!0;class jD{constructor(l,a=25e-5){this.name="",this.color=new At(l),this.density=a}clone(){return new jD(this.color,this.density)}toJSON(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}}jD.prototype.isFogExp2=!0;class WD{constructor(l,a=1,h=1e3){this.name="",this.color=new At(l),this.near=a,this.far=h}clone(){return new WD(this.color,this.near,this.far)}toJSON(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}WD.prototype.isFog=!0;class l1 extends Wr{constructor(){super(),this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(l,a){return super.copy(l,a),null!==l.background&&(this.background=l.background.clone()),null!==l.environment&&(this.environment=l.environment.clone()),null!==l.fog&&(this.fog=l.fog.clone()),null!==l.overrideMaterial&&(this.overrideMaterial=l.overrideMaterial.clone()),this.autoUpdate=l.autoUpdate,this.matrixAutoUpdate=l.matrixAutoUpdate,this}toJSON(l){const a=super.toJSON(l);return null!==this.fog&&(a.object.fog=this.fog.toJSON()),a}}l1.prototype.isScene=!0;class Ym{constructor(l,a){this.array=l,this.stride=a,this.count=void 0!==l?l.length/a:0,this.usage=qT,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=fl()}onUploadCallback(){}set needsUpdate(l){!0===l&&this.version++}setUsage(l){return this.usage=l,this}copy(l){return this.array=new l.array.constructor(l.array),this.count=l.count,this.stride=l.stride,this.usage=l.usage,this}copyAt(l,a,h){l*=this.stride,h*=a.stride;for(let d=0,f=this.stride;d<f;d++)this.array[l+d]=a.array[h+d];return this}set(l,a=0){return this.array.set(l,a),this}clone(l){void 0===l.arrayBuffers&&(l.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=fl()),void 0===l.arrayBuffers[this.array.buffer._uuid]&&(l.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const a=new this.array.constructor(l.arrayBuffers[this.array.buffer._uuid]),h=new this.constructor(a,this.stride);return h.setUsage(this.usage),h}onUpload(l){return this.onUploadCallback=l,this}toJSON(l){return void 0===l.arrayBuffers&&(l.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=fl()),void 0===l.arrayBuffers[this.array.buffer._uuid]&&(l.arrayBuffers[this.array.buffer._uuid]=Array.prototype.slice.call(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}Ym.prototype.isInterleavedBuffer=!0;const fs=new te;class rp{constructor(l,a,h,d=!1){this.name="",this.data=l,this.itemSize=a,this.offset=h,this.normalized=!0===d}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(l){this.data.needsUpdate=l}applyMatrix4(l){for(let a=0,h=this.data.count;a<h;a++)fs.x=this.getX(a),fs.y=this.getY(a),fs.z=this.getZ(a),fs.applyMatrix4(l),this.setXYZ(a,fs.x,fs.y,fs.z);return this}applyNormalMatrix(l){for(let a=0,h=this.count;a<h;a++)fs.x=this.getX(a),fs.y=this.getY(a),fs.z=this.getZ(a),fs.applyNormalMatrix(l),this.setXYZ(a,fs.x,fs.y,fs.z);return this}transformDirection(l){for(let a=0,h=this.count;a<h;a++)fs.x=this.getX(a),fs.y=this.getY(a),fs.z=this.getZ(a),fs.transformDirection(l),this.setXYZ(a,fs.x,fs.y,fs.z);return this}setX(l,a){return this.data.array[l*this.data.stride+this.offset]=a,this}setY(l,a){return this.data.array[l*this.data.stride+this.offset+1]=a,this}setZ(l,a){return this.data.array[l*this.data.stride+this.offset+2]=a,this}setW(l,a){return this.data.array[l*this.data.stride+this.offset+3]=a,this}getX(l){return this.data.array[l*this.data.stride+this.offset]}getY(l){return this.data.array[l*this.data.stride+this.offset+1]}getZ(l){return this.data.array[l*this.data.stride+this.offset+2]}getW(l){return this.data.array[l*this.data.stride+this.offset+3]}setXY(l,a,h){return this.data.array[(l=l*this.data.stride+this.offset)+0]=a,this.data.array[l+1]=h,this}setXYZ(l,a,h,d){return this.data.array[(l=l*this.data.stride+this.offset)+0]=a,this.data.array[l+1]=h,this.data.array[l+2]=d,this}setXYZW(l,a,h,d,f){return this.data.array[(l=l*this.data.stride+this.offset)+0]=a,this.data.array[l+1]=h,this.data.array[l+2]=d,this.data.array[l+3]=f,this}clone(l){if(void 0===l){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interlaved buffer attribute will deinterleave buffer data.");const a=[];for(let h=0;h<this.count;h++){const d=h*this.data.stride+this.offset;for(let f=0;f<this.itemSize;f++)a.push(this.data.array[d+f])}return new ii(new this.array.constructor(a),this.itemSize,this.normalized)}return void 0===l.interleavedBuffers&&(l.interleavedBuffers={}),void 0===l.interleavedBuffers[this.data.uuid]&&(l.interleavedBuffers[this.data.uuid]=this.data.clone(l)),new rp(l.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(l){if(void 0===l){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interlaved buffer attribute will deinterleave buffer data.");const a=[];for(let h=0;h<this.count;h++){const d=h*this.data.stride+this.offset;for(let f=0;f<this.itemSize;f++)a.push(this.data.array[d+f])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:a,normalized:this.normalized}}return void 0===l.interleavedBuffers&&(l.interleavedBuffers={}),void 0===l.interleavedBuffers[this.data.uuid]&&(l.interleavedBuffers[this.data.uuid]=this.data.toJSON(l)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}rp.prototype.isInterleavedBufferAttribute=!0;class RV extends Is{constructor(l){super(),this.type="SpriteMaterial",this.color=new At(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.setValues(l)}copy(l){return super.copy(l),this.color.copy(l.color),this.map=l.map,this.alphaMap=l.alphaMap,this.rotation=l.rotation,this.sizeAttenuation=l.sizeAttenuation,this}}let N_;RV.prototype.isSpriteMaterial=!0;const c1=new te,F_=new te,k_=new te,V_=new Je,u1=new Je,dne=new nn,XD=new te,h1=new te,qD=new te,fne=new Je,PV=new Je,pne=new Je;function $D(c,l,a,h,d,f){V_.subVectors(c,a).addScalar(.5).multiply(h),void 0!==d?(u1.x=f*V_.x-d*V_.y,u1.y=d*V_.x+f*V_.y):u1.copy(V_),c.copy(l),c.x+=u1.x,c.y+=u1.y,c.applyMatrix4(dne)}(class LV extends Wr{constructor(l){if(super(),this.type="Sprite",void 0===N_){N_=new Mn;const a=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),h=new Ym(a,5);N_.setIndex([0,1,2,0,2,3]),N_.setAttribute("position",new rp(h,3,0,!1)),N_.setAttribute("uv",new rp(h,2,3,!1))}this.geometry=N_,this.material=void 0!==l?l:new RV,this.center=new Je(.5,.5)}raycast(l,a){null===l.camera&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),F_.setFromMatrixScale(this.matrixWorld),dne.copy(l.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(l.camera.matrixWorldInverse,this.matrixWorld),k_.setFromMatrixPosition(this.modelViewMatrix),l.camera.isPerspectiveCamera&&!1===this.material.sizeAttenuation&&F_.multiplyScalar(-k_.z);const h=this.material.rotation;let d,f;0!==h&&(f=Math.cos(h),d=Math.sin(h));const m=this.center;$D(XD.set(-.5,-.5,0),k_,m,F_,d,f),$D(h1.set(.5,-.5,0),k_,m,F_,d,f),$D(qD.set(.5,.5,0),k_,m,F_,d,f),fne.set(0,0),PV.set(1,0),pne.set(1,1);let g=l.ray.intersectTriangle(XD,h1,qD,!1,c1);if(null===g&&($D(h1.set(-.5,.5,0),k_,m,F_,d,f),PV.set(0,1),g=l.ray.intersectTriangle(XD,qD,h1,!1,c1),null===g))return;const y=l.ray.origin.distanceTo(c1);y<l.near||y>l.far||a.push({distance:y,point:c1.clone(),uv:As.getUV(c1,XD,h1,qD,fne,PV,pne,new Je),face:null,object:this})}copy(l){return super.copy(l),void 0!==l.center&&this.center.copy(l.center),this.material=l.material,this}}).prototype.isSprite=!0;const gne=new te,yne=new ai,vne=new ai,WYe=new te,_ne=new nn;class ZD extends ds{constructor(l,a){super(l,a),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new nn,this.bindMatrixInverse=new nn}copy(l){return super.copy(l),this.bindMode=l.bindMode,this.bindMatrix.copy(l.bindMatrix),this.bindMatrixInverse.copy(l.bindMatrixInverse),this.skeleton=l.skeleton,this}bind(l,a){this.skeleton=l,void 0===a&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),a=this.matrixWorld),this.bindMatrix.copy(a),this.bindMatrixInverse.copy(a).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const l=new ai,a=this.geometry.attributes.skinWeight;for(let h=0,d=a.count;h<d;h++){l.x=a.getX(h),l.y=a.getY(h),l.z=a.getZ(h),l.w=a.getW(h);const f=1/l.manhattanLength();f!==1/0?l.multiplyScalar(f):l.set(1,0,0,0),a.setXYZW(h,l.x,l.y,l.z,l.w)}}updateMatrixWorld(l){super.updateMatrixWorld(l),"attached"===this.bindMode?this.bindMatrixInverse.copy(this.matrixWorld).invert():"detached"===this.bindMode?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}boneTransform(l,a){const h=this.skeleton,d=this.geometry;yne.fromBufferAttribute(d.attributes.skinIndex,l),vne.fromBufferAttribute(d.attributes.skinWeight,l),gne.copy(a).applyMatrix4(this.bindMatrix),a.set(0,0,0);for(let f=0;f<4;f++){const m=vne.getComponent(f);if(0!==m){const g=yne.getComponent(f);_ne.multiplyMatrices(h.bones[g].matrixWorld,h.boneInverses[g]),a.addScaledVector(WYe.copy(gne).applyMatrix4(_ne),m)}}return a.applyMatrix4(this.bindMatrixInverse)}}ZD.prototype.isSkinnedMesh=!0;class KD extends Wr{constructor(){super(),this.type="Bone"}}KD.prototype.isBone=!0;class B_ extends hs{constructor(l=null,a=1,h=1,d,f,m,g,y,v=us,_=us,S,b){super(null,m,g,y,v,_,d,f,S,b),this.image={data:l,width:a,height:h},this.magFilter=v,this.minFilter=_,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}B_.prototype.isDataTexture=!0;const Sne=new nn,XYe=new nn;class QD{constructor(l=[],a=[]){this.uuid=fl(),this.bones=l.slice(0),this.boneInverses=a,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.frame=-1,this.init()}init(){const l=this.bones,a=this.boneInverses;if(this.boneMatrices=new Float32Array(16*l.length),0===a.length)this.calculateInverses();else if(l.length!==a.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let h=0,d=this.bones.length;h<d;h++)this.boneInverses.push(new nn)}}calculateInverses(){this.boneInverses.length=0;for(let l=0,a=this.bones.length;l<a;l++){const h=new nn;this.bones[l]&&h.copy(this.bones[l].matrixWorld).invert(),this.boneInverses.push(h)}}pose(){for(let l=0,a=this.bones.length;l<a;l++){const h=this.bones[l];h&&h.matrixWorld.copy(this.boneInverses[l]).invert()}for(let l=0,a=this.bones.length;l<a;l++){const h=this.bones[l];h&&(h.parent&&h.parent.isBone?(h.matrix.copy(h.parent.matrixWorld).invert(),h.matrix.multiply(h.matrixWorld)):h.matrix.copy(h.matrixWorld),h.matrix.decompose(h.position,h.quaternion,h.scale))}}update(){const l=this.bones,a=this.boneInverses,h=this.boneMatrices,d=this.boneTexture;for(let f=0,m=l.length;f<m;f++)Sne.multiplyMatrices(l[f]?l[f].matrixWorld:XYe,a[f]),Sne.toArray(h,16*f);null!==d&&(d.needsUpdate=!0)}clone(){return new QD(this.bones,this.boneInverses)}computeBoneTexture(){let l=Math.sqrt(4*this.bones.length);l=mte(l),l=Math.max(l,4);const a=new Float32Array(l*l*4);a.set(this.boneMatrices);const h=new B_(a,l,l,Bo,jf);return h.needsUpdate=!0,this.boneMatrices=a,this.boneTexture=h,this.boneTextureSize=l,this}getBoneByName(l){for(let a=0,h=this.bones.length;a<h;a++){const d=this.bones[a];if(d.name===l)return d}}dispose(){null!==this.boneTexture&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(l,a){this.uuid=l.uuid;for(let h=0,d=l.bones.length;h<d;h++){const f=l.bones[h];let m=a[f];void 0===m&&(console.warn("THREE.Skeleton: No bone found with UUID:",f),m=new KD),this.bones.push(m),this.boneInverses.push((new nn).fromArray(l.boneInverses[h]))}return this.init(),this}toJSON(){const l={metadata:{version:4.5,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};l.uuid=this.uuid;const a=this.bones,h=this.boneInverses;for(let d=0,f=a.length;d<f;d++)l.bones.push(a[d].uuid),l.boneInverses.push(h[d].toArray());return l}}class U_ extends ii{constructor(l,a,h,d=1){"number"==typeof h&&(d=h,h=!1,console.error("THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument.")),super(l,a,h),this.meshPerAttribute=d}copy(l){return super.copy(l),this.meshPerAttribute=l.meshPerAttribute,this}toJSON(){const l=super.toJSON();return l.meshPerAttribute=this.meshPerAttribute,l.isInstancedBufferAttribute=!0,l}}U_.prototype.isInstancedBufferAttribute=!0;const bne=new nn,Tne=new nn,JD=[],d1=new ds;(class wne extends ds{constructor(l,a,h){super(l,a),this.instanceMatrix=new U_(new Float32Array(16*h),16),this.instanceColor=null,this.count=h,this.frustumCulled=!1}copy(l){return super.copy(l),this.instanceMatrix.copy(l.instanceMatrix),null!==l.instanceColor&&(this.instanceColor=l.instanceColor.clone()),this.count=l.count,this}getColorAt(l,a){a.fromArray(this.instanceColor.array,3*l)}getMatrixAt(l,a){a.fromArray(this.instanceMatrix.array,16*l)}raycast(l,a){const h=this.matrixWorld,d=this.count;if(d1.geometry=this.geometry,d1.material=this.material,void 0!==d1.material)for(let f=0;f<d;f++){this.getMatrixAt(f,bne),Tne.multiplyMatrices(h,bne),d1.matrixWorld=Tne,d1.raycast(l,JD);for(let m=0,g=JD.length;m<g;m++){const y=JD[m];y.instanceId=f,y.object=this,a.push(y)}JD.length=0}}setColorAt(l,a){null===this.instanceColor&&(this.instanceColor=new U_(new Float32Array(3*this.instanceMatrix.count),3)),a.toArray(this.instanceColor.array,3*l)}setMatrixAt(l,a){a.toArray(this.instanceMatrix.array,16*l)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}).prototype.isInstancedMesh=!0;class so extends Is{constructor(l){super(),this.type="LineBasicMaterial",this.color=new At(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.setValues(l)}copy(l){return super.copy(l),this.color.copy(l.color),this.linewidth=l.linewidth,this.linecap=l.linecap,this.linejoin=l.linejoin,this}}so.prototype.isLineBasicMaterial=!0;const Cne=new te,xne=new te,Ene=new nn,OV=new Xm,eA=new Yf;class ip extends Wr{constructor(l=new Mn,a=new so){super(),this.type="Line",this.geometry=l,this.material=a,this.updateMorphTargets()}copy(l){return super.copy(l),this.material=l.material,this.geometry=l.geometry,this}computeLineDistances(){const l=this.geometry;if(l.isBufferGeometry)if(null===l.index){const a=l.attributes.position,h=[0];for(let d=1,f=a.count;d<f;d++)Cne.fromBufferAttribute(a,d-1),xne.fromBufferAttribute(a,d),h[d]=h[d-1],h[d]+=Cne.distanceTo(xne);l.setAttribute("lineDistance",new rn(h,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else l.isGeometry&&console.error("THREE.Line.computeLineDistances() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");return this}raycast(l,a){const h=this.geometry,d=this.matrixWorld,f=l.params.Line.threshold,m=h.drawRange;if(null===h.boundingSphere&&h.computeBoundingSphere(),eA.copy(h.boundingSphere),eA.applyMatrix4(d),eA.radius+=f,!1===l.ray.intersectsSphere(eA))return;Ene.copy(d).invert(),OV.copy(l.ray).applyMatrix4(Ene);const g=f/((this.scale.x+this.scale.y+this.scale.z)/3),y=g*g,v=new te,_=new te,S=new te,b=new te,T=this.isLineSegments?2:1;if(h.isBufferGeometry){const x=h.index,D=h.attributes.position;if(null!==x)for(let L=Math.max(0,m.start),P=Math.min(x.count,m.start+m.count)-1;L<P;L+=T){const F=x.getX(L),V=x.getX(L+1);if(v.fromBufferAttribute(D,F),_.fromBufferAttribute(D,V),OV.distanceSqToSegment(v,_,b,S)>y)continue;b.applyMatrix4(this.matrixWorld);const q=l.ray.origin.distanceTo(b);q<l.near||q>l.far||a.push({distance:q,point:S.clone().applyMatrix4(this.matrixWorld),index:L,face:null,faceIndex:null,object:this})}else for(let L=Math.max(0,m.start),P=Math.min(D.count,m.start+m.count)-1;L<P;L+=T){if(v.fromBufferAttribute(D,L),_.fromBufferAttribute(D,L+1),OV.distanceSqToSegment(v,_,b,S)>y)continue;b.applyMatrix4(this.matrixWorld);const V=l.ray.origin.distanceTo(b);V<l.near||V>l.far||a.push({distance:V,point:S.clone().applyMatrix4(this.matrixWorld),index:L,face:null,faceIndex:null,object:this})}}else h.isGeometry&&console.error("THREE.Line.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}updateMorphTargets(){const l=this.geometry;if(l.isBufferGeometry){const a=l.morphAttributes,h=Object.keys(a);if(h.length>0){const d=a[h[0]];if(void 0!==d){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let f=0,m=d.length;f<m;f++){const g=d[f].name||String(f);this.morphTargetInfluences.push(0),this.morphTargetDictionary[g]=f}}}}else{const a=l.morphTargets;void 0!==a&&a.length>0&&console.error("THREE.Line.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}}ip.prototype.isLine=!0;const Mne=new te,Dne=new te;class od extends ip{constructor(l,a){super(l,a),this.type="LineSegments"}computeLineDistances(){const l=this.geometry;if(l.isBufferGeometry)if(null===l.index){const a=l.attributes.position,h=[];for(let d=0,f=a.count;d<f;d+=2)Mne.fromBufferAttribute(a,d),Dne.fromBufferAttribute(a,d+1),h[d]=0===d?0:h[d-1],h[d+1]=h[d]+Mne.distanceTo(Dne);l.setAttribute("lineDistance",new rn(h,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else l.isGeometry&&console.error("THREE.LineSegments.computeLineDistances() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");return this}}od.prototype.isLineSegments=!0;class NV extends ip{constructor(l,a){super(l,a),this.type="LineLoop"}}NV.prototype.isLineLoop=!0;class Zm extends Is{constructor(l){super(),this.type="PointsMaterial",this.color=new At(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.setValues(l)}copy(l){return super.copy(l),this.color.copy(l.color),this.map=l.map,this.alphaMap=l.alphaMap,this.size=l.size,this.sizeAttenuation=l.sizeAttenuation,this}}Zm.prototype.isPointsMaterial=!0;const Ane=new nn,FV=new Xm,tA=new Yf,nA=new te;class f1 extends Wr{constructor(l=new Mn,a=new Zm){super(),this.type="Points",this.geometry=l,this.material=a,this.updateMorphTargets()}copy(l){return super.copy(l),this.material=l.material,this.geometry=l.geometry,this}raycast(l,a){const h=this.geometry,d=this.matrixWorld,f=l.params.Points.threshold,m=h.drawRange;if(null===h.boundingSphere&&h.computeBoundingSphere(),tA.copy(h.boundingSphere),tA.applyMatrix4(d),tA.radius+=f,!1===l.ray.intersectsSphere(tA))return;Ane.copy(d).invert(),FV.copy(l.ray).applyMatrix4(Ane);const g=f/((this.scale.x+this.scale.y+this.scale.z)/3),y=g*g;if(h.isBufferGeometry){const v=h.index,S=h.attributes.position;if(null!==v)for(let x=Math.max(0,m.start),E=Math.min(v.count,m.start+m.count);x<E;x++){const D=v.getX(x);nA.fromBufferAttribute(S,D),Ine(nA,D,y,d,l,a,this)}else for(let x=Math.max(0,m.start),E=Math.min(S.count,m.start+m.count);x<E;x++)nA.fromBufferAttribute(S,x),Ine(nA,x,y,d,l,a,this)}else console.error("THREE.Points.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}updateMorphTargets(){const l=this.geometry;if(l.isBufferGeometry){const a=l.morphAttributes,h=Object.keys(a);if(h.length>0){const d=a[h[0]];if(void 0!==d){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let f=0,m=d.length;f<m;f++){const g=d[f].name||String(f);this.morphTargetInfluences.push(0),this.morphTargetDictionary[g]=f}}}}else{const a=l.morphTargets;void 0!==a&&a.length>0&&console.error("THREE.Points.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}}function Ine(c,l,a,h,d,f,m){const g=FV.distanceSqToPoint(c);if(g<a){const y=new te;FV.closestPointToPoint(c,y),y.applyMatrix4(h);const v=d.ray.origin.distanceTo(y);if(v<d.near||v>d.far)return;f.push({distance:v,distanceToRay:Math.sqrt(g),point:y,index:l,face:null,object:m})}}f1.prototype.isPoints=!0,class qYe extends hs{constructor(l,a,h,d,f,m,g,y,v){super(l,a,h,d,f,m,g,y,v),this.minFilter=void 0!==m?m:Fi,this.magFilter=void 0!==f?f:Fi,this.generateMipmaps=!1;const _=this;"requestVideoFrameCallback"in l&&l.requestVideoFrameCallback(function S(){_.needsUpdate=!0,l.requestVideoFrameCallback(S)})}clone(){return new this.constructor(this.image).copy(this)}update(){const l=this.image;"requestVideoFrameCallback"in l==0&&l.readyState>=l.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}.prototype.isVideoTexture=!0,class $Ye extends hs{constructor(l,a,h){super({width:l,height:a}),this.format=h,this.magFilter=us,this.minFilter=us,this.generateMipmaps=!1,this.needsUpdate=!0}}.prototype.isFramebufferTexture=!0;(class Rne extends hs{constructor(l,a,h,d,f,m,g,y,v,_,S,b){super(null,m,g,y,v,_,d,f,S,b),this.image={width:a,height:h},this.mipmaps=l,this.flipY=!1,this.generateMipmaps=!1}}).prototype.isCompressedTexture=!0;class Pne extends hs{constructor(l,a,h,d,f,m,g,y,v){super(l,a,h,d,f,m,g,y,v),this.needsUpdate=!0}}Pne.prototype.isCanvasTexture=!0,new te,new te,new te,new As;class Yl{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(l,a){const h=this.getUtoTmapping(l);return this.getPoint(h,a)}getPoints(l=5){const a=[];for(let h=0;h<=l;h++)a.push(this.getPoint(h/l));return a}getSpacedPoints(l=5){const a=[];for(let h=0;h<=l;h++)a.push(this.getPointAt(h/l));return a}getLength(){const l=this.getLengths();return l[l.length-1]}getLengths(l=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===l+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const a=[];let h,d=this.getPoint(0),f=0;a.push(0);for(let m=1;m<=l;m++)h=this.getPoint(m/l),f+=h.distanceTo(d),a.push(f),d=h;return this.cacheArcLengths=a,a}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(l,a){const h=this.getLengths();let d=0;const f=h.length;let m;m=a||l*h[f-1];let v,g=0,y=f-1;for(;g<=y;)if(d=Math.floor(g+(y-g)/2),v=h[d]-m,v<0)g=d+1;else{if(!(v>0)){y=d;break}y=d-1}if(d=y,h[d]===m)return d/(f-1);const _=h[d];return(d+(m-_)/(h[d+1]-_))/(f-1)}getTangent(l,a){let d=l-1e-4,f=l+1e-4;d<0&&(d=0),f>1&&(f=1);const m=this.getPoint(d),g=this.getPoint(f),y=a||(m.isVector2?new Je:new te);return y.copy(g).sub(m).normalize(),y}getTangentAt(l,a){const h=this.getUtoTmapping(l);return this.getTangent(h,a)}computeFrenetFrames(l,a){const h=new te,d=[],f=[],m=[],g=new te,y=new nn;for(let T=0;T<=l;T++)d[T]=this.getTangentAt(T/l,new te);f[0]=new te,m[0]=new te;let v=Number.MAX_VALUE;const _=Math.abs(d[0].x),S=Math.abs(d[0].y),b=Math.abs(d[0].z);_<=v&&(v=_,h.set(1,0,0)),S<=v&&(v=S,h.set(0,1,0)),b<=v&&h.set(0,0,1),g.crossVectors(d[0],h).normalize(),f[0].crossVectors(d[0],g),m[0].crossVectors(d[0],f[0]);for(let T=1;T<=l;T++){if(f[T]=f[T-1].clone(),m[T]=m[T-1].clone(),g.crossVectors(d[T-1],d[T]),g.length()>Number.EPSILON){g.normalize();const x=Math.acos(_o(d[T-1].dot(d[T]),-1,1));f[T].applyMatrix4(y.makeRotationAxis(g,x))}m[T].crossVectors(d[T],f[T])}if(!0===a){let T=Math.acos(_o(f[0].dot(f[l]),-1,1));T/=l,d[0].dot(g.crossVectors(f[0],f[l]))>0&&(T=-T);for(let x=1;x<=l;x++)f[x].applyMatrix4(y.makeRotationAxis(d[x],T*x)),m[x].crossVectors(d[x],f[x])}return{tangents:d,normals:f,binormals:m}}clone(){return(new this.constructor).copy(this)}copy(l){return this.arcLengthDivisions=l.arcLengthDivisions,this}toJSON(){const l={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return l.arcLengthDivisions=this.arcLengthDivisions,l.type=this.type,l}fromJSON(l){return this.arcLengthDivisions=l.arcLengthDivisions,this}}class cA extends Yl{constructor(l=0,a=0,h=1,d=1,f=0,m=2*Math.PI,g=!1,y=0){super(),this.type="EllipseCurve",this.aX=l,this.aY=a,this.xRadius=h,this.yRadius=d,this.aStartAngle=f,this.aEndAngle=m,this.aClockwise=g,this.aRotation=y}getPoint(l,a){const h=a||new Je,d=2*Math.PI;let f=this.aEndAngle-this.aStartAngle;const m=Math.abs(f)<Number.EPSILON;for(;f<0;)f+=d;for(;f>d;)f-=d;f<Number.EPSILON&&(f=m?0:d),!0===this.aClockwise&&!m&&(f===d?f=-d:f-=d);const g=this.aStartAngle+l*f;let y=this.aX+this.xRadius*Math.cos(g),v=this.aY+this.yRadius*Math.sin(g);if(0!==this.aRotation){const _=Math.cos(this.aRotation),S=Math.sin(this.aRotation),b=y-this.aX,T=v-this.aY;y=b*_-T*S+this.aX,v=b*S+T*_+this.aY}return h.set(y,v)}copy(l){return super.copy(l),this.aX=l.aX,this.aY=l.aY,this.xRadius=l.xRadius,this.yRadius=l.yRadius,this.aStartAngle=l.aStartAngle,this.aEndAngle=l.aEndAngle,this.aClockwise=l.aClockwise,this.aRotation=l.aRotation,this}toJSON(){const l=super.toJSON();return l.aX=this.aX,l.aY=this.aY,l.xRadius=this.xRadius,l.yRadius=this.yRadius,l.aStartAngle=this.aStartAngle,l.aEndAngle=this.aEndAngle,l.aClockwise=this.aClockwise,l.aRotation=this.aRotation,l}fromJSON(l){return super.fromJSON(l),this.aX=l.aX,this.aY=l.aY,this.xRadius=l.xRadius,this.yRadius=l.yRadius,this.aStartAngle=l.aStartAngle,this.aEndAngle=l.aEndAngle,this.aClockwise=l.aClockwise,this.aRotation=l.aRotation,this}}cA.prototype.isEllipseCurve=!0;class One extends cA{constructor(l,a,h,d,f,m){super(l,a,h,h,d,f,m),this.type="ArcCurve"}}function VV(){let c=0,l=0,a=0,h=0;function d(f,m,g,y){c=f,l=g,a=-3*f+3*m-2*g-y,h=2*f-2*m+g+y}return{initCatmullRom:function(f,m,g,y,v){d(m,g,v*(g-f),v*(y-m))},initNonuniformCatmullRom:function(f,m,g,y,v,_,S){let b=(m-f)/v-(g-f)/(v+_)+(g-m)/_,T=(g-m)/_-(y-m)/(_+S)+(y-g)/S;b*=_,T*=_,d(m,g,b,T)},calc:function(f){const m=f*f;return c+l*f+a*m+h*(m*f)}}}One.prototype.isArcCurve=!0;const uA=new te,BV=new VV,UV=new VV,GV=new VV;class Nne extends Yl{constructor(l=[],a=!1,h="centripetal",d=.5){super(),this.type="CatmullRomCurve3",this.points=l,this.closed=a,this.curveType=h,this.tension=d}getPoint(l,a=new te){const h=a,d=this.points,f=d.length,m=(f-(this.closed?0:1))*l;let v,_,g=Math.floor(m),y=m-g;this.closed?g+=g>0?0:(Math.floor(Math.abs(g)/f)+1)*f:0===y&&g===f-1&&(g=f-2,y=1),this.closed||g>0?v=d[(g-1)%f]:(uA.subVectors(d[0],d[1]).add(d[0]),v=uA);const S=d[g%f],b=d[(g+1)%f];if(this.closed||g+2<f?_=d[(g+2)%f]:(uA.subVectors(d[f-1],d[f-2]).add(d[f-1]),_=uA),"centripetal"===this.curveType||"chordal"===this.curveType){const T="chordal"===this.curveType?.5:.25;let x=Math.pow(v.distanceToSquared(S),T),E=Math.pow(S.distanceToSquared(b),T),D=Math.pow(b.distanceToSquared(_),T);E<1e-4&&(E=1),x<1e-4&&(x=E),D<1e-4&&(D=E),BV.initNonuniformCatmullRom(v.x,S.x,b.x,_.x,x,E,D),UV.initNonuniformCatmullRom(v.y,S.y,b.y,_.y,x,E,D),GV.initNonuniformCatmullRom(v.z,S.z,b.z,_.z,x,E,D)}else"catmullrom"===this.curveType&&(BV.initCatmullRom(v.x,S.x,b.x,_.x,this.tension),UV.initCatmullRom(v.y,S.y,b.y,_.y,this.tension),GV.initCatmullRom(v.z,S.z,b.z,_.z,this.tension));return h.set(BV.calc(y),UV.calc(y),GV.calc(y)),h}copy(l){super.copy(l),this.points=[];for(let a=0,h=l.points.length;a<h;a++)this.points.push(l.points[a].clone());return this.closed=l.closed,this.curveType=l.curveType,this.tension=l.tension,this}toJSON(){const l=super.toJSON();l.points=[];for(let a=0,h=this.points.length;a<h;a++)l.points.push(this.points[a].toArray());return l.closed=this.closed,l.curveType=this.curveType,l.tension=this.tension,l}fromJSON(l){super.fromJSON(l),this.points=[];for(let a=0,h=l.points.length;a<h;a++){const d=l.points[a];this.points.push((new te).fromArray(d))}return this.closed=l.closed,this.curveType=l.curveType,this.tension=l.tension,this}}function Fne(c,l,a,h,d){const f=.5*(h-l),m=.5*(d-a),g=c*c;return(2*a-2*h+f+m)*(c*g)+(-3*a+3*h-2*f-m)*g+f*c+a}function p1(c,l,a,h){return function YYe(c,l){const a=1-c;return a*a*l}(c,l)+function ZYe(c,l){return 2*(1-c)*c*l}(c,a)+function KYe(c,l){return c*c*l}(c,h)}function m1(c,l,a,h,d){return function QYe(c,l){const a=1-c;return a*a*a*l}(c,l)+function JYe(c,l){const a=1-c;return 3*a*a*c*l}(c,a)+function eZe(c,l){return 3*(1-c)*c*c*l}(c,h)+function tZe(c,l){return c*c*c*l}(c,d)}Nne.prototype.isCatmullRomCurve3=!0;class zV extends Yl{constructor(l=new Je,a=new Je,h=new Je,d=new Je){super(),this.type="CubicBezierCurve",this.v0=l,this.v1=a,this.v2=h,this.v3=d}getPoint(l,a=new Je){const h=a,d=this.v0,f=this.v1,m=this.v2,g=this.v3;return h.set(m1(l,d.x,f.x,m.x,g.x),m1(l,d.y,f.y,m.y,g.y)),h}copy(l){return super.copy(l),this.v0.copy(l.v0),this.v1.copy(l.v1),this.v2.copy(l.v2),this.v3.copy(l.v3),this}toJSON(){const l=super.toJSON();return l.v0=this.v0.toArray(),l.v1=this.v1.toArray(),l.v2=this.v2.toArray(),l.v3=this.v3.toArray(),l}fromJSON(l){return super.fromJSON(l),this.v0.fromArray(l.v0),this.v1.fromArray(l.v1),this.v2.fromArray(l.v2),this.v3.fromArray(l.v3),this}}zV.prototype.isCubicBezierCurve=!0;class kne extends Yl{constructor(l=new te,a=new te,h=new te,d=new te){super(),this.type="CubicBezierCurve3",this.v0=l,this.v1=a,this.v2=h,this.v3=d}getPoint(l,a=new te){const h=a,d=this.v0,f=this.v1,m=this.v2,g=this.v3;return h.set(m1(l,d.x,f.x,m.x,g.x),m1(l,d.y,f.y,m.y,g.y),m1(l,d.z,f.z,m.z,g.z)),h}copy(l){return super.copy(l),this.v0.copy(l.v0),this.v1.copy(l.v1),this.v2.copy(l.v2),this.v3.copy(l.v3),this}toJSON(){const l=super.toJSON();return l.v0=this.v0.toArray(),l.v1=this.v1.toArray(),l.v2=this.v2.toArray(),l.v3=this.v3.toArray(),l}fromJSON(l){return super.fromJSON(l),this.v0.fromArray(l.v0),this.v1.fromArray(l.v1),this.v2.fromArray(l.v2),this.v3.fromArray(l.v3),this}}kne.prototype.isCubicBezierCurve3=!0;class hA extends Yl{constructor(l=new Je,a=new Je){super(),this.type="LineCurve",this.v1=l,this.v2=a}getPoint(l,a=new Je){const h=a;return 1===l?h.copy(this.v2):(h.copy(this.v2).sub(this.v1),h.multiplyScalar(l).add(this.v1)),h}getPointAt(l,a){return this.getPoint(l,a)}getTangent(l,a){const h=a||new Je;return h.copy(this.v2).sub(this.v1).normalize(),h}copy(l){return super.copy(l),this.v1.copy(l.v1),this.v2.copy(l.v2),this}toJSON(){const l=super.toJSON();return l.v1=this.v1.toArray(),l.v2=this.v2.toArray(),l}fromJSON(l){return super.fromJSON(l),this.v1.fromArray(l.v1),this.v2.fromArray(l.v2),this}}hA.prototype.isLineCurve=!0;class HV extends Yl{constructor(l=new Je,a=new Je,h=new Je){super(),this.type="QuadraticBezierCurve",this.v0=l,this.v1=a,this.v2=h}getPoint(l,a=new Je){const h=a,d=this.v0,f=this.v1,m=this.v2;return h.set(p1(l,d.x,f.x,m.x),p1(l,d.y,f.y,m.y)),h}copy(l){return super.copy(l),this.v0.copy(l.v0),this.v1.copy(l.v1),this.v2.copy(l.v2),this}toJSON(){const l=super.toJSON();return l.v0=this.v0.toArray(),l.v1=this.v1.toArray(),l.v2=this.v2.toArray(),l}fromJSON(l){return super.fromJSON(l),this.v0.fromArray(l.v0),this.v1.fromArray(l.v1),this.v2.fromArray(l.v2),this}}HV.prototype.isQuadraticBezierCurve=!0;class jV extends Yl{constructor(l=new te,a=new te,h=new te){super(),this.type="QuadraticBezierCurve3",this.v0=l,this.v1=a,this.v2=h}getPoint(l,a=new te){const h=a,d=this.v0,f=this.v1,m=this.v2;return h.set(p1(l,d.x,f.x,m.x),p1(l,d.y,f.y,m.y),p1(l,d.z,f.z,m.z)),h}copy(l){return super.copy(l),this.v0.copy(l.v0),this.v1.copy(l.v1),this.v2.copy(l.v2),this}toJSON(){const l=super.toJSON();return l.v0=this.v0.toArray(),l.v1=this.v1.toArray(),l.v2=this.v2.toArray(),l}fromJSON(l){return super.fromJSON(l),this.v0.fromArray(l.v0),this.v1.fromArray(l.v1),this.v2.fromArray(l.v2),this}}jV.prototype.isQuadraticBezierCurve3=!0;class WV extends Yl{constructor(l=[]){super(),this.type="SplineCurve",this.points=l}getPoint(l,a=new Je){const h=a,d=this.points,f=(d.length-1)*l,m=Math.floor(f),g=f-m,y=d[0===m?m:m-1],v=d[m],_=d[m>d.length-2?d.length-1:m+1],S=d[m>d.length-3?d.length-1:m+2];return h.set(Fne(g,y.x,v.x,_.x,S.x),Fne(g,y.y,v.y,_.y,S.y)),h}copy(l){super.copy(l),this.points=[];for(let a=0,h=l.points.length;a<h;a++)this.points.push(l.points[a].clone());return this}toJSON(){const l=super.toJSON();l.points=[];for(let a=0,h=this.points.length;a<h;a++)l.points.push(this.points[a].toArray());return l}fromJSON(l){super.fromJSON(l),this.points=[];for(let a=0,h=l.points.length;a<h;a++){const d=l.points[a];this.points.push((new Je).fromArray(d))}return this}}WV.prototype.isSplineCurve=!0;var XV=Object.freeze({__proto__:null,ArcCurve:One,CatmullRomCurve3:Nne,CubicBezierCurve:zV,CubicBezierCurve3:kne,EllipseCurve:cA,LineCurve:hA,LineCurve3:class nZe extends Yl{constructor(l=new te,a=new te){super(),this.type="LineCurve3",this.isLineCurve3=!0,this.v1=l,this.v2=a}getPoint(l,a=new te){const h=a;return 1===l?h.copy(this.v2):(h.copy(this.v2).sub(this.v1),h.multiplyScalar(l).add(this.v1)),h}getPointAt(l,a){return this.getPoint(l,a)}copy(l){return super.copy(l),this.v1.copy(l.v1),this.v2.copy(l.v2),this}toJSON(){const l=super.toJSON();return l.v1=this.v1.toArray(),l.v2=this.v2.toArray(),l}fromJSON(l){return super.fromJSON(l),this.v1.fromArray(l.v1),this.v2.fromArray(l.v2),this}},QuadraticBezierCurve:HV,QuadraticBezierCurve3:jV,SplineCurve:WV});class rZe extends Yl{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(l){this.curves.push(l)}closePath(){const l=this.curves[0].getPoint(0),a=this.curves[this.curves.length-1].getPoint(1);l.equals(a)||this.curves.push(new hA(a,l))}getPoint(l,a){const h=l*this.getLength(),d=this.getCurveLengths();let f=0;for(;f<d.length;){if(d[f]>=h){const m=d[f]-h,g=this.curves[f],y=g.getLength();return g.getPointAt(0===y?0:1-m/y,a)}f++}return null}getLength(){const l=this.getCurveLengths();return l[l.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const l=[];let a=0;for(let h=0,d=this.curves.length;h<d;h++)a+=this.curves[h].getLength(),l.push(a);return this.cacheLengths=l,l}getSpacedPoints(l=40){const a=[];for(let h=0;h<=l;h++)a.push(this.getPoint(h/l));return this.autoClose&&a.push(a[0]),a}getPoints(l=12){const a=[];let h;for(let d=0,f=this.curves;d<f.length;d++){const m=f[d],y=m.getPoints(m&&m.isEllipseCurve?2*l:m&&(m.isLineCurve||m.isLineCurve3)?1:m&&m.isSplineCurve?l*m.points.length:l);for(let v=0;v<y.length;v++){const _=y[v];h&&h.equals(_)||(a.push(_),h=_)}}return this.autoClose&&a.length>1&&!a[a.length-1].equals(a[0])&&a.push(a[0]),a}copy(l){super.copy(l),this.curves=[];for(let a=0,h=l.curves.length;a<h;a++)this.curves.push(l.curves[a].clone());return this.autoClose=l.autoClose,this}toJSON(){const l=super.toJSON();l.autoClose=this.autoClose,l.curves=[];for(let a=0,h=this.curves.length;a<h;a++)l.curves.push(this.curves[a].toJSON());return l}fromJSON(l){super.fromJSON(l),this.autoClose=l.autoClose,this.curves=[];for(let a=0,h=l.curves.length;a<h;a++){const d=l.curves[a];this.curves.push((new XV[d.type]).fromJSON(d))}return this}}class dA extends rZe{constructor(l){super(),this.type="Path",this.currentPoint=new Je,l&&this.setFromPoints(l)}setFromPoints(l){this.moveTo(l[0].x,l[0].y);for(let a=1,h=l.length;a<h;a++)this.lineTo(l[a].x,l[a].y);return this}moveTo(l,a){return this.currentPoint.set(l,a),this}lineTo(l,a){const h=new hA(this.currentPoint.clone(),new Je(l,a));return this.curves.push(h),this.currentPoint.set(l,a),this}quadraticCurveTo(l,a,h,d){const f=new HV(this.currentPoint.clone(),new Je(l,a),new Je(h,d));return this.curves.push(f),this.currentPoint.set(h,d),this}bezierCurveTo(l,a,h,d,f,m){const g=new zV(this.currentPoint.clone(),new Je(l,a),new Je(h,d),new Je(f,m));return this.curves.push(g),this.currentPoint.set(f,m),this}splineThru(l){const a=[this.currentPoint.clone()].concat(l),h=new WV(a);return this.curves.push(h),this.currentPoint.copy(l[l.length-1]),this}arc(l,a,h,d,f,m){return this.absarc(l+this.currentPoint.x,a+this.currentPoint.y,h,d,f,m),this}absarc(l,a,h,d,f,m){return this.absellipse(l,a,h,h,d,f,m),this}ellipse(l,a,h,d,f,m,g,y){return this.absellipse(l+this.currentPoint.x,a+this.currentPoint.y,h,d,f,m,g,y),this}absellipse(l,a,h,d,f,m,g,y){const v=new cA(l,a,h,d,f,m,g,y);if(this.curves.length>0){const S=v.getPoint(0);S.equals(this.currentPoint)||this.lineTo(S.x,S.y)}this.curves.push(v);const _=v.getPoint(1);return this.currentPoint.copy(_),this}copy(l){return super.copy(l),this.currentPoint.copy(l.currentPoint),this}toJSON(){const l=super.toJSON();return l.currentPoint=this.currentPoint.toArray(),l}fromJSON(l){return super.fromJSON(l),this.currentPoint.fromArray(l.currentPoint),this}}class qu extends dA{constructor(l){super(l),this.uuid=fl(),this.type="Shape",this.holes=[]}getPointsHoles(l){const a=[];for(let h=0,d=this.holes.length;h<d;h++)a[h]=this.holes[h].getPoints(l);return a}extractPoints(l){return{shape:this.getPoints(l),holes:this.getPointsHoles(l)}}copy(l){super.copy(l),this.holes=[];for(let a=0,h=l.holes.length;a<h;a++)this.holes.push(l.holes[a].clone());return this}toJSON(){const l=super.toJSON();l.uuid=this.uuid,l.holes=[];for(let a=0,h=this.holes.length;a<h;a++)l.holes.push(this.holes[a].toJSON());return l}fromJSON(l){super.fromJSON(l),this.uuid=l.uuid,this.holes=[];for(let a=0,h=l.holes.length;a<h;a++){const d=l.holes[a];this.holes.push((new dA).fromJSON(d))}return this}}function Vne(c,l,a,h,d){let f,m;if(d===function SZe(c,l,a,h){let d=0;for(let f=l,m=a-h;f<a;f+=h)d+=(c[m]-c[f])*(c[f+1]+c[m+1]),m=f;return d}(c,l,a,h)>0)for(f=l;f<a;f+=h)m=Gne(f,c[f],c[f+1],m);else for(f=a-h;f>=l;f-=h)m=Gne(f,c[f],c[f+1],m);return m&&fA(m,m.next)&&(v1(m),m=m.next),m}function op(c,l){if(!c)return c;l||(l=c);let h,a=c;do{if(h=!1,a.steiner||!fA(a,a.next)&&0!==Xi(a.prev,a,a.next))a=a.next;else{if(v1(a),a=l=a.prev,a===a.next)break;h=!0}}while(h||a!==l);return l}function g1(c,l,a,h,d,f,m){if(!c)return;!m&&f&&function pZe(c,l,a,h){let d=c;do{null===d.z&&(d.z=qV(d.x,d.y,l,a,h)),d.prevZ=d.prev,d.nextZ=d.next,d=d.next}while(d!==c);d.prevZ.nextZ=null,d.prevZ=null,function mZe(c){let l,a,h,d,f,m,g,y,v=1;do{for(a=c,c=null,f=null,m=0;a;){for(m++,h=a,g=0,l=0;l<v&&(g++,h=h.nextZ,h);l++);for(y=v;g>0||y>0&&h;)0!==g&&(0===y||!h||a.z<=h.z)?(d=a,a=a.nextZ,g--):(d=h,h=h.nextZ,y--),f?f.nextZ=d:c=d,d.prevZ=f,f=d;a=h}f.nextZ=null,v*=2}while(m>1)}(d)}(c,h,d,f);let y,v,g=c;for(;c.prev!==c.next;)if(y=c.prev,v=c.next,f?oZe(c,h,d,f):sZe(c))l.push(y.i/a),l.push(c.i/a),l.push(v.i/a),v1(c),c=v.next,g=v.next;else if((c=v)===g){m?1===m?g1(c=aZe(op(c),l,a),l,a,h,d,f,2):2===m&&lZe(c,l,a,h,d,f):g1(op(c),l,a,h,d,f,1);break}}function sZe(c){const l=c.prev,a=c,h=c.next;if(Xi(l,a,h)>=0)return!1;let d=c.next.next;for(;d!==c.prev;){if(z_(l.x,l.y,a.x,a.y,h.x,h.y,d.x,d.y)&&Xi(d.prev,d,d.next)>=0)return!1;d=d.next}return!0}function oZe(c,l,a,h){const d=c.prev,f=c,m=c.next;if(Xi(d,f,m)>=0)return!1;const v=d.x>f.x?d.x>m.x?d.x:m.x:f.x>m.x?f.x:m.x,_=d.y>f.y?d.y>m.y?d.y:m.y:f.y>m.y?f.y:m.y,S=qV(d.x<f.x?d.x<m.x?d.x:m.x:f.x<m.x?f.x:m.x,d.y<f.y?d.y<m.y?d.y:m.y:f.y<m.y?f.y:m.y,l,a,h),b=qV(v,_,l,a,h);let T=c.prevZ,x=c.nextZ;for(;T&&T.z>=S&&x&&x.z<=b;){if(T!==c.prev&&T!==c.next&&z_(d.x,d.y,f.x,f.y,m.x,m.y,T.x,T.y)&&Xi(T.prev,T,T.next)>=0||(T=T.prevZ,x!==c.prev&&x!==c.next&&z_(d.x,d.y,f.x,f.y,m.x,m.y,x.x,x.y)&&Xi(x.prev,x,x.next)>=0))return!1;x=x.nextZ}for(;T&&T.z>=S;){if(T!==c.prev&&T!==c.next&&z_(d.x,d.y,f.x,f.y,m.x,m.y,T.x,T.y)&&Xi(T.prev,T,T.next)>=0)return!1;T=T.prevZ}for(;x&&x.z<=b;){if(x!==c.prev&&x!==c.next&&z_(d.x,d.y,f.x,f.y,m.x,m.y,x.x,x.y)&&Xi(x.prev,x,x.next)>=0)return!1;x=x.nextZ}return!0}function aZe(c,l,a){let h=c;do{const d=h.prev,f=h.next.next;!fA(d,f)&&Bne(d,h,h.next,f)&&y1(d,f)&&y1(f,d)&&(l.push(d.i/a),l.push(h.i/a),l.push(f.i/a),v1(h),v1(h.next),h=c=f),h=h.next}while(h!==c);return op(h)}function lZe(c,l,a,h,d,f){let m=c;do{let g=m.next.next;for(;g!==m.prev;){if(m.i!==g.i&&yZe(m,g)){let y=Une(m,g);return m=op(m,m.next),y=op(y,y.next),g1(m,l,a,h,d,f),void g1(y,l,a,h,d,f)}g=g.next}m=m.next}while(m!==c)}function uZe(c,l){return c.x-l.x}function hZe(c,l){if(l=function dZe(c,l){let a=l;const h=c.x,d=c.y;let m,f=-1/0;do{if(d<=a.y&&d>=a.next.y&&a.next.y!==a.y){const b=a.x+(d-a.y)*(a.next.x-a.x)/(a.next.y-a.y);if(b<=h&&b>f){if(f=b,b===h){if(d===a.y)return a;if(d===a.next.y)return a.next}m=a.x<a.next.x?a:a.next}}a=a.next}while(a!==l);if(!m)return null;if(h===f)return m;const g=m,y=m.x,v=m.y;let S,_=1/0;a=m;do{h>=a.x&&a.x>=y&&h!==a.x&&z_(d<v?h:f,d,y,v,d<v?f:h,d,a.x,a.y)&&(S=Math.abs(d-a.y)/(h-a.x),y1(a,c)&&(S<_||S===_&&(a.x>m.x||a.x===m.x&&fZe(m,a)))&&(m=a,_=S)),a=a.next}while(a!==g);return m}(c,l),l){const a=Une(l,c);op(l,l.next),op(a,a.next)}}function fZe(c,l){return Xi(c.prev,c,l.prev)<0&&Xi(l.next,c,c.next)<0}function qV(c,l,a,h,d){return(c=1431655765&((c=858993459&((c=252645135&((c=16711935&((c=32767*(c-a)*d)|c<<8))|c<<4))|c<<2))|c<<1))|(l=1431655765&((l=858993459&((l=252645135&((l=16711935&((l=32767*(l-h)*d)|l<<8))|l<<4))|l<<2))|l<<1))<<1}function gZe(c){let l=c,a=c;do{(l.x<a.x||l.x===a.x&&l.y<a.y)&&(a=l),l=l.next}while(l!==c);return a}function z_(c,l,a,h,d,f,m,g){return(d-m)*(l-g)-(c-m)*(f-g)>=0&&(c-m)*(h-g)-(a-m)*(l-g)>=0&&(a-m)*(f-g)-(d-m)*(h-g)>=0}function yZe(c,l){return c.next.i!==l.i&&c.prev.i!==l.i&&!function vZe(c,l){let a=c;do{if(a.i!==c.i&&a.next.i!==c.i&&a.i!==l.i&&a.next.i!==l.i&&Bne(a,a.next,c,l))return!0;a=a.next}while(a!==c);return!1}(c,l)&&(y1(c,l)&&y1(l,c)&&function _Ze(c,l){let a=c,h=!1;const d=(c.x+l.x)/2,f=(c.y+l.y)/2;do{a.y>f!=a.next.y>f&&a.next.y!==a.y&&d<(a.next.x-a.x)*(f-a.y)/(a.next.y-a.y)+a.x&&(h=!h),a=a.next}while(a!==c);return h}(c,l)&&(Xi(c.prev,c,l.prev)||Xi(c,l.prev,l))||fA(c,l)&&Xi(c.prev,c,c.next)>0&&Xi(l.prev,l,l.next)>0)}function Xi(c,l,a){return(l.y-c.y)*(a.x-l.x)-(l.x-c.x)*(a.y-l.y)}function fA(c,l){return c.x===l.x&&c.y===l.y}function Bne(c,l,a,h){const d=mA(Xi(c,l,a)),f=mA(Xi(c,l,h)),m=mA(Xi(a,h,c)),g=mA(Xi(a,h,l));return!!(d!==f&&m!==g||0===d&&pA(c,a,l)||0===f&&pA(c,h,l)||0===m&&pA(a,c,h)||0===g&&pA(a,l,h))}function pA(c,l,a){return l.x<=Math.max(c.x,a.x)&&l.x>=Math.min(c.x,a.x)&&l.y<=Math.max(c.y,a.y)&&l.y>=Math.min(c.y,a.y)}function mA(c){return c>0?1:c<0?-1:0}function y1(c,l){return Xi(c.prev,c,c.next)<0?Xi(c,l,c.next)>=0&&Xi(c,c.prev,l)>=0:Xi(c,l,c.prev)<0||Xi(c,c.next,l)<0}function Une(c,l){const a=new $V(c.i,c.x,c.y),h=new $V(l.i,l.x,l.y),d=c.next,f=l.prev;return c.next=l,l.prev=c,a.next=d,d.prev=a,h.next=a,a.prev=h,f.next=h,h.prev=f,h}function Gne(c,l,a,h){const d=new $V(c,l,a);return h?(d.next=h.next,d.prev=h,h.next.prev=d,h.next=d):(d.prev=d,d.next=d),d}function v1(c){c.next.prev=c.prev,c.prev.next=c.next,c.prevZ&&(c.prevZ.nextZ=c.nextZ),c.nextZ&&(c.nextZ.prevZ=c.prevZ)}function $V(c,l,a){this.i=c,this.x=l,this.y=a,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}class ad{static area(l){const a=l.length;let h=0;for(let d=a-1,f=0;f<a;d=f++)h+=l[d].x*l[f].y-l[f].x*l[d].y;return.5*h}static isClockWise(l){return ad.area(l)<0}static triangulateShape(l,a){const h=[],d=[],f=[];zne(l),Hne(h,l);let m=l.length;a.forEach(zne);for(let y=0;y<a.length;y++)d.push(m),m+=a[y].length,Hne(h,a[y]);const g=function(c,l,a=2){const h=l&&l.length,d=h?l[0]*a:c.length;let f=Vne(c,0,d,a,!0);const m=[];if(!f||f.next===f.prev)return m;let g,y,v,_,S,b,T;if(h&&(f=function cZe(c,l,a,h){const d=[];let f,m,g,y,v;for(f=0,m=l.length;f<m;f++)g=l[f]*h,y=f<m-1?l[f+1]*h:c.length,v=Vne(c,g,y,h,!1),v===v.next&&(v.steiner=!0),d.push(gZe(v));for(d.sort(uZe),f=0;f<d.length;f++)hZe(d[f],a),a=op(a,a.next);return a}(c,l,f,a)),c.length>80*a){g=v=c[0],y=_=c[1];for(let x=a;x<d;x+=a)S=c[x],b=c[x+1],S<g&&(g=S),b<y&&(y=b),S>v&&(v=S),b>_&&(_=b);T=Math.max(v-g,_-y),T=0!==T?1/T:0}return g1(f,m,a,g,y,T),m}(h,d);for(let y=0;y<g.length;y+=3)f.push(g.slice(y,y+3));return f}}function zne(c){const l=c.length;l>2&&c[l-1].equals(c[0])&&c.pop()}function Hne(c,l){for(let a=0;a<l.length;a++)c.push(l[a].x),c.push(l[a].y)}class ld extends Mn{constructor(l=new qu([new Je(.5,.5),new Je(-.5,.5),new Je(-.5,-.5),new Je(.5,-.5)]),a={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:l,options:a},l=Array.isArray(l)?l:[l];const h=this,d=[],f=[];for(let g=0,y=l.length;g<y;g++)m(l[g]);function m(g){const y=[],v=void 0!==a.curveSegments?a.curveSegments:12,_=void 0!==a.steps?a.steps:1;let S=void 0!==a.depth?a.depth:1,b=void 0===a.bevelEnabled||a.bevelEnabled,T=void 0!==a.bevelThickness?a.bevelThickness:.2,x=void 0!==a.bevelSize?a.bevelSize:T-.1,E=void 0!==a.bevelOffset?a.bevelOffset:0,D=void 0!==a.bevelSegments?a.bevelSegments:3;const I=a.extrudePath,M=void 0!==a.UVGenerator?a.UVGenerator:bZe;void 0!==a.amount&&(console.warn("THREE.ExtrudeBufferGeometry: amount has been renamed to depth."),S=a.amount);let L,F,V,z,q,P=!1;I&&(L=I.getSpacedPoints(_),P=!0,b=!1,F=I.computeFrenetFrames(_,!1),V=new te,z=new te,q=new te),b||(D=0,T=0,x=0,E=0);const K=g.extractPoints(v);let se=K.shape;const W=K.holes;if(!ad.isClockWise(se)){se=se.reverse();for(let Qe=0,dt=W.length;Qe<dt;Qe++){const at=W[Qe];ad.isClockWise(at)&&(W[Qe]=at.reverse())}}const ie=ad.triangulateShape(se,W),ae=se;for(let Qe=0,dt=W.length;Qe<dt;Qe++)se=se.concat(W[Qe]);function he(Qe,dt,at){return dt||console.error("THREE.ExtrudeGeometry: vec does not exist"),dt.clone().multiplyScalar(at).add(Qe)}const J=se.length,ce=ie.length;function be(Qe,dt,at){let Rt,bt,Jt;const Ye=Qe.x-dt.x,Cn=Qe.y-dt.y,ar=at.x-Qe.x,lr=at.y-Qe.y,pe=Ye*Ye+Cn*Cn;if(Math.abs(Ye*lr-Cn*ar)>Number.EPSILON){const ze=Math.sqrt(pe),Ct=Math.sqrt(ar*ar+lr*lr),$t=dt.x-Cn/ze,Xe=dt.y+Ye/ze,je=((at.x-lr/Ct-$t)*lr-(at.y+ar/Ct-Xe)*ar)/(Ye*lr-Cn*ar);Rt=$t+Ye*je-Qe.x,bt=Xe+Cn*je-Qe.y;const lt=Rt*Rt+bt*bt;if(lt<=2)return new Je(Rt,bt);Jt=Math.sqrt(lt/2)}else{let ze=!1;Ye>Number.EPSILON?ar>Number.EPSILON&&(ze=!0):Ye<-Number.EPSILON?ar<-Number.EPSILON&&(ze=!0):Math.sign(Cn)===Math.sign(lr)&&(ze=!0),ze?(Rt=-Cn,bt=Ye,Jt=Math.sqrt(pe)):(Rt=Ye,bt=Cn,Jt=Math.sqrt(pe/2))}return new Je(Rt/Jt,bt/Jt)}const we=[];for(let Qe=0,dt=ae.length,at=dt-1,Rt=Qe+1;Qe<dt;Qe++,at++,Rt++)at===dt&&(at=0),Rt===dt&&(Rt=0),we[Qe]=be(ae[Qe],ae[at],ae[Rt]);const Ce=[];let Te,fe=we.concat();for(let Qe=0,dt=W.length;Qe<dt;Qe++){const at=W[Qe];Te=[];for(let Rt=0,bt=at.length,Jt=bt-1,Ye=Rt+1;Rt<bt;Rt++,Jt++,Ye++)Jt===bt&&(Jt=0),Ye===bt&&(Ye=0),Te[Rt]=be(at[Rt],at[Jt],at[Ye]);Ce.push(Te),fe=fe.concat(Te)}for(let Qe=0;Qe<D;Qe++){const dt=Qe/D,at=T*Math.cos(dt*Math.PI/2),Rt=x*Math.sin(dt*Math.PI/2)+E;for(let bt=0,Jt=ae.length;bt<Jt;bt++){const Ye=he(ae[bt],we[bt],Rt);ut(Ye.x,Ye.y,-at)}for(let bt=0,Jt=W.length;bt<Jt;bt++){const Ye=W[bt];Te=Ce[bt];for(let Cn=0,ar=Ye.length;Cn<ar;Cn++){const lr=he(Ye[Cn],Te[Cn],Rt);ut(lr.x,lr.y,-at)}}}const $e=x+E;for(let Qe=0;Qe<J;Qe++){const dt=b?he(se[Qe],fe[Qe],$e):se[Qe];P?(z.copy(F.normals[0]).multiplyScalar(dt.x),V.copy(F.binormals[0]).multiplyScalar(dt.y),q.copy(L[0]).add(z).add(V),ut(q.x,q.y,q.z)):ut(dt.x,dt.y,0)}for(let Qe=1;Qe<=_;Qe++)for(let dt=0;dt<J;dt++){const at=b?he(se[dt],fe[dt],$e):se[dt];P?(z.copy(F.normals[Qe]).multiplyScalar(at.x),V.copy(F.binormals[Qe]).multiplyScalar(at.y),q.copy(L[Qe]).add(z).add(V),ut(q.x,q.y,q.z)):ut(at.x,at.y,S/_*Qe)}for(let Qe=D-1;Qe>=0;Qe--){const dt=Qe/D,at=T*Math.cos(dt*Math.PI/2),Rt=x*Math.sin(dt*Math.PI/2)+E;for(let bt=0,Jt=ae.length;bt<Jt;bt++){const Ye=he(ae[bt],we[bt],Rt);ut(Ye.x,Ye.y,S+at)}for(let bt=0,Jt=W.length;bt<Jt;bt++){const Ye=W[bt];Te=Ce[bt];for(let Cn=0,ar=Ye.length;Cn<ar;Cn++){const lr=he(Ye[Cn],Te[Cn],Rt);P?ut(lr.x,lr.y+L[_-1].y,L[_-1].x+at):ut(lr.x,lr.y,S+at)}}}function en(Qe,dt){let at=Qe.length;for(;--at>=0;){const Rt=at;let bt=at-1;bt<0&&(bt=Qe.length-1);for(let Jt=0,Ye=_+2*D;Jt<Ye;Jt++){const Cn=J*Jt,ar=J*(Jt+1);ht(dt+Rt+Cn,dt+bt+Cn,dt+bt+ar,dt+Rt+ar)}}}function ut(Qe,dt,at){y.push(Qe),y.push(dt),y.push(at)}function Fe(Qe,dt,at){an(Qe),an(dt),an(at);const Rt=d.length/3,bt=M.generateTopUV(h,d,Rt-3,Rt-2,Rt-1);Wt(bt[0]),Wt(bt[1]),Wt(bt[2])}function ht(Qe,dt,at,Rt){an(Qe),an(dt),an(Rt),an(dt),an(at),an(Rt);const bt=d.length/3,Jt=M.generateSideWallUV(h,d,bt-6,bt-3,bt-2,bt-1);Wt(Jt[0]),Wt(Jt[1]),Wt(Jt[3]),Wt(Jt[1]),Wt(Jt[2]),Wt(Jt[3])}function an(Qe){d.push(y[3*Qe+0]),d.push(y[3*Qe+1]),d.push(y[3*Qe+2])}function Wt(Qe){f.push(Qe.x),f.push(Qe.y)}(function Ve(){const Qe=d.length/3;if(b){let dt=0,at=J*dt;for(let Rt=0;Rt<ce;Rt++){const bt=ie[Rt];Fe(bt[2]+at,bt[1]+at,bt[0]+at)}dt=_+2*D,at=J*dt;for(let Rt=0;Rt<ce;Rt++){const bt=ie[Rt];Fe(bt[0]+at,bt[1]+at,bt[2]+at)}}else{for(let dt=0;dt<ce;dt++){const at=ie[dt];Fe(at[2],at[1],at[0])}for(let dt=0;dt<ce;dt++){const at=ie[dt];Fe(at[0]+J*_,at[1]+J*_,at[2]+J*_)}}h.addGroup(Qe,d.length/3-Qe,0)})(),function De(){const Qe=d.length/3;let dt=0;en(ae,dt),dt+=ae.length;for(let at=0,Rt=W.length;at<Rt;at++){const bt=W[at];en(bt,dt),dt+=bt.length}h.addGroup(Qe,d.length/3-Qe,1)}()}this.setAttribute("position",new rn(d,3)),this.setAttribute("uv",new rn(f,2)),this.computeVertexNormals()}toJSON(){const l=super.toJSON();return function TZe(c,l,a){if(a.shapes=[],Array.isArray(c))for(let h=0,d=c.length;h<d;h++)a.shapes.push(c[h].uuid);else a.shapes.push(c.uuid);return void 0!==l.extrudePath&&(a.options.extrudePath=l.extrudePath.toJSON()),a}(this.parameters.shapes,this.parameters.options,l)}static fromJSON(l,a){const h=[];for(let f=0,m=l.shapes.length;f<m;f++)h.push(a[l.shapes[f]]);const d=l.options.extrudePath;return void 0!==d&&(l.options.extrudePath=(new XV[d.type]).fromJSON(d)),new ld(h,l.options)}}const bZe={generateTopUV:function(c,l,a,h,d){const g=l[3*h],y=l[3*h+1],v=l[3*d],_=l[3*d+1];return[new Je(l[3*a],l[3*a+1]),new Je(g,y),new Je(v,_)]},generateSideWallUV:function(c,l,a,h,d,f){const m=l[3*a],g=l[3*a+1],y=l[3*a+2],v=l[3*h],_=l[3*h+1],S=l[3*h+2],b=l[3*d],T=l[3*d+1],x=l[3*d+2],E=l[3*f],D=l[3*f+1],I=l[3*f+2];return Math.abs(g-_)<Math.abs(m-v)?[new Je(m,1-y),new Je(v,1-S),new Je(b,1-x),new Je(E,1-I)]:[new Je(g,1-y),new Je(_,1-S),new Je(T,1-x),new Je(D,1-I)]}};class S1 extends Mn{constructor(l=new qu([new Je(0,.5),new Je(-.5,-.5),new Je(.5,-.5)]),a=12){super(),this.type="ShapeGeometry",this.parameters={shapes:l,curveSegments:a};const h=[],d=[],f=[],m=[];let g=0,y=0;if(!1===Array.isArray(l))v(l);else for(let _=0;_<l.length;_++)v(l[_]),this.addGroup(g,y,_),g+=y,y=0;function v(_){const S=d.length/3,b=_.extractPoints(a);let T=b.shape;const x=b.holes;!1===ad.isClockWise(T)&&(T=T.reverse());for(let D=0,I=x.length;D<I;D++){const M=x[D];!0===ad.isClockWise(M)&&(x[D]=M.reverse())}const E=ad.triangulateShape(T,x);for(let D=0,I=x.length;D<I;D++)T=T.concat(x[D]);for(let D=0,I=T.length;D<I;D++){const M=T[D];d.push(M.x,M.y,0),f.push(0,0,1),m.push(M.x,M.y)}for(let D=0,I=E.length;D<I;D++){const M=E[D];h.push(M[0]+S,M[1]+S,M[2]+S),y+=3}}this.setIndex(h),this.setAttribute("position",new rn(d,3)),this.setAttribute("normal",new rn(f,3)),this.setAttribute("uv",new rn(m,2))}toJSON(){const l=super.toJSON();return function wZe(c,l){if(l.shapes=[],Array.isArray(c))for(let a=0,h=c.length;a<h;a++)l.shapes.push(c[a].uuid);else l.shapes.push(c.uuid);return l}(this.parameters.shapes,l)}static fromJSON(l,a){const h=[];for(let d=0,f=l.shapes.length;d<f;d++)h.push(a[l.shapes[d]]);return new S1(h,l.curveSegments)}}(class qne extends Is{constructor(l){super(),this.type="ShadowMaterial",this.color=new At(0),this.transparent=!0,this.setValues(l)}copy(l){return super.copy(l),this.color.copy(l.color),this}}).prototype.isShadowMaterial=!0;class H_ extends Is{constructor(l){super(),this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new At(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new At(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new Je(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.setValues(l)}copy(l){return super.copy(l),this.defines={STANDARD:""},this.color.copy(l.color),this.roughness=l.roughness,this.metalness=l.metalness,this.map=l.map,this.lightMap=l.lightMap,this.lightMapIntensity=l.lightMapIntensity,this.aoMap=l.aoMap,this.aoMapIntensity=l.aoMapIntensity,this.emissive.copy(l.emissive),this.emissiveMap=l.emissiveMap,this.emissiveIntensity=l.emissiveIntensity,this.bumpMap=l.bumpMap,this.bumpScale=l.bumpScale,this.normalMap=l.normalMap,this.normalMapType=l.normalMapType,this.normalScale.copy(l.normalScale),this.displacementMap=l.displacementMap,this.displacementScale=l.displacementScale,this.displacementBias=l.displacementBias,this.roughnessMap=l.roughnessMap,this.metalnessMap=l.metalnessMap,this.alphaMap=l.alphaMap,this.envMap=l.envMap,this.envMapIntensity=l.envMapIntensity,this.refractionRatio=l.refractionRatio,this.wireframe=l.wireframe,this.wireframeLinewidth=l.wireframeLinewidth,this.wireframeLinecap=l.wireframeLinecap,this.wireframeLinejoin=l.wireframeLinejoin,this.flatShading=l.flatShading,this}}H_.prototype.isMeshStandardMaterial=!0;class ap extends H_{constructor(l){super(),this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Je(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return _o(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(a){this.ior=(1+.4*a)/(1-.4*a)}}),this.sheenColor=new At(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=0,this.attenuationColor=new At(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new At(1,1,1),this.specularColorMap=null,this._sheen=0,this._clearcoat=0,this._transmission=0,this.setValues(l)}get sheen(){return this._sheen}set sheen(l){this._sheen>0!=l>0&&this.version++,this._sheen=l}get clearcoat(){return this._clearcoat}set clearcoat(l){this._clearcoat>0!=l>0&&this.version++,this._clearcoat=l}get transmission(){return this._transmission}set transmission(l){this._transmission>0!=l>0&&this.version++,this._transmission=l}copy(l){return super.copy(l),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=l.clearcoat,this.clearcoatMap=l.clearcoatMap,this.clearcoatRoughness=l.clearcoatRoughness,this.clearcoatRoughnessMap=l.clearcoatRoughnessMap,this.clearcoatNormalMap=l.clearcoatNormalMap,this.clearcoatNormalScale.copy(l.clearcoatNormalScale),this.ior=l.ior,this.sheen=l.sheen,this.sheenColor.copy(l.sheenColor),this.sheenColorMap=l.sheenColorMap,this.sheenRoughness=l.sheenRoughness,this.sheenRoughnessMap=l.sheenRoughnessMap,this.transmission=l.transmission,this.transmissionMap=l.transmissionMap,this.thickness=l.thickness,this.thicknessMap=l.thicknessMap,this.attenuationDistance=l.attenuationDistance,this.attenuationColor.copy(l.attenuationColor),this.specularIntensity=l.specularIntensity,this.specularIntensityMap=l.specularIntensityMap,this.specularColor.copy(l.specularColor),this.specularColorMap=l.specularColorMap,this}}ap.prototype.isMeshPhysicalMaterial=!0;class YV extends Is{constructor(l){super(),this.type="MeshPhongMaterial",this.color=new At(16777215),this.specular=new At(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new At(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new Je(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.setValues(l)}copy(l){return super.copy(l),this.color.copy(l.color),this.specular.copy(l.specular),this.shininess=l.shininess,this.map=l.map,this.lightMap=l.lightMap,this.lightMapIntensity=l.lightMapIntensity,this.aoMap=l.aoMap,this.aoMapIntensity=l.aoMapIntensity,this.emissive.copy(l.emissive),this.emissiveMap=l.emissiveMap,this.emissiveIntensity=l.emissiveIntensity,this.bumpMap=l.bumpMap,this.bumpScale=l.bumpScale,this.normalMap=l.normalMap,this.normalMapType=l.normalMapType,this.normalScale.copy(l.normalScale),this.displacementMap=l.displacementMap,this.displacementScale=l.displacementScale,this.displacementBias=l.displacementBias,this.specularMap=l.specularMap,this.alphaMap=l.alphaMap,this.envMap=l.envMap,this.combine=l.combine,this.reflectivity=l.reflectivity,this.refractionRatio=l.refractionRatio,this.wireframe=l.wireframe,this.wireframeLinewidth=l.wireframeLinewidth,this.wireframeLinecap=l.wireframeLinecap,this.wireframeLinejoin=l.wireframeLinejoin,this.flatShading=l.flatShading,this}}YV.prototype.isMeshPhongMaterial=!0;(class $ne extends Is{constructor(l){super(),this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new At(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new At(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new Je(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.setValues(l)}copy(l){return super.copy(l),this.color.copy(l.color),this.map=l.map,this.gradientMap=l.gradientMap,this.lightMap=l.lightMap,this.lightMapIntensity=l.lightMapIntensity,this.aoMap=l.aoMap,this.aoMapIntensity=l.aoMapIntensity,this.emissive.copy(l.emissive),this.emissiveMap=l.emissiveMap,this.emissiveIntensity=l.emissiveIntensity,this.bumpMap=l.bumpMap,this.bumpScale=l.bumpScale,this.normalMap=l.normalMap,this.normalMapType=l.normalMapType,this.normalScale.copy(l.normalScale),this.displacementMap=l.displacementMap,this.displacementScale=l.displacementScale,this.displacementBias=l.displacementBias,this.alphaMap=l.alphaMap,this.wireframe=l.wireframe,this.wireframeLinewidth=l.wireframeLinewidth,this.wireframeLinecap=l.wireframeLinecap,this.wireframeLinejoin=l.wireframeLinejoin,this}}).prototype.isMeshToonMaterial=!0;(class Yne extends Is{constructor(l){super(),this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new Je(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.flatShading=!1,this.setValues(l)}copy(l){return super.copy(l),this.bumpMap=l.bumpMap,this.bumpScale=l.bumpScale,this.normalMap=l.normalMap,this.normalMapType=l.normalMapType,this.normalScale.copy(l.normalScale),this.displacementMap=l.displacementMap,this.displacementScale=l.displacementScale,this.displacementBias=l.displacementBias,this.wireframe=l.wireframe,this.wireframeLinewidth=l.wireframeLinewidth,this.flatShading=l.flatShading,this}}).prototype.isMeshNormalMaterial=!0;(class Zne extends Is{constructor(l){super(),this.type="MeshLambertMaterial",this.color=new At(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new At(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.setValues(l)}copy(l){return super.copy(l),this.color.copy(l.color),this.map=l.map,this.lightMap=l.lightMap,this.lightMapIntensity=l.lightMapIntensity,this.aoMap=l.aoMap,this.aoMapIntensity=l.aoMapIntensity,this.emissive.copy(l.emissive),this.emissiveMap=l.emissiveMap,this.emissiveIntensity=l.emissiveIntensity,this.specularMap=l.specularMap,this.alphaMap=l.alphaMap,this.envMap=l.envMap,this.combine=l.combine,this.reflectivity=l.reflectivity,this.refractionRatio=l.refractionRatio,this.wireframe=l.wireframe,this.wireframeLinewidth=l.wireframeLinewidth,this.wireframeLinecap=l.wireframeLinecap,this.wireframeLinejoin=l.wireframeLinejoin,this}}).prototype.isMeshLambertMaterial=!0;(class Kne extends Is{constructor(l){super(),this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new At(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new Je(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.setValues(l)}copy(l){return super.copy(l),this.defines={MATCAP:""},this.color.copy(l.color),this.matcap=l.matcap,this.map=l.map,this.bumpMap=l.bumpMap,this.bumpScale=l.bumpScale,this.normalMap=l.normalMap,this.normalMapType=l.normalMapType,this.normalScale.copy(l.normalScale),this.displacementMap=l.displacementMap,this.displacementScale=l.displacementScale,this.displacementBias=l.displacementBias,this.alphaMap=l.alphaMap,this.flatShading=l.flatShading,this}}).prototype.isMeshMatcapMaterial=!0;(class Qne extends so{constructor(l){super(),this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(l)}copy(l){return super.copy(l),this.scale=l.scale,this.dashSize=l.dashSize,this.gapSize=l.gapSize,this}}).prototype.isLineDashedMaterial=!0;const ki={arraySlice:function(c,l,a){return ki.isTypedArray(c)?new c.constructor(c.subarray(l,void 0!==a?a:c.length)):c.slice(l,a)},convertArray:function(c,l,a){return!c||!a&&c.constructor===l?c:"number"==typeof l.BYTES_PER_ELEMENT?new l(c):Array.prototype.slice.call(c)},isTypedArray:function(c){return ArrayBuffer.isView(c)&&!(c instanceof DataView)},getKeyframeOrder:function(c){const a=c.length,h=new Array(a);for(let d=0;d!==a;++d)h[d]=d;return h.sort(function l(d,f){return c[d]-c[f]}),h},sortedArray:function(c,l,a){const h=c.length,d=new c.constructor(h);for(let f=0,m=0;m!==h;++f){const g=a[f]*l;for(let y=0;y!==l;++y)d[m++]=c[g+y]}return d},flattenJSON:function(c,l,a,h){let d=1,f=c[0];for(;void 0!==f&&void 0===f[h];)f=c[d++];if(void 0===f)return;let m=f[h];if(void 0!==m)if(Array.isArray(m))do{m=f[h],void 0!==m&&(l.push(f.time),a.push.apply(a,m)),f=c[d++]}while(void 0!==f);else if(void 0!==m.toArray)do{m=f[h],void 0!==m&&(l.push(f.time),m.toArray(a,a.length)),f=c[d++]}while(void 0!==f);else do{m=f[h],void 0!==m&&(l.push(f.time),a.push(m)),f=c[d++]}while(void 0!==f)},subclip:function(c,l,a,h,d=30){const f=c.clone();f.name=l;const m=[];for(let y=0;y<f.tracks.length;++y){const v=f.tracks[y],_=v.getValueSize(),S=[],b=[];for(let T=0;T<v.times.length;++T){const x=v.times[T]*d;if(!(x<a||x>=h)){S.push(v.times[T]);for(let E=0;E<_;++E)b.push(v.values[T*_+E])}}0!==S.length&&(v.times=ki.convertArray(S,v.times.constructor),v.values=ki.convertArray(b,v.values.constructor),m.push(v))}f.tracks=m;let g=1/0;for(let y=0;y<f.tracks.length;++y)g>f.tracks[y].times[0]&&(g=f.tracks[y].times[0]);for(let y=0;y<f.tracks.length;++y)f.tracks[y].shift(-1*g);return f.resetDuration(),f},makeClipAdditive:function(c,l=0,a=c,h=30){h<=0&&(h=30);const d=a.tracks.length,f=l/h;for(let m=0;m<d;++m){const g=a.tracks[m],y=g.ValueTypeName;if("bool"===y||"string"===y)continue;const v=c.tracks.find(function(I){return I.name===g.name&&I.ValueTypeName===y});if(void 0===v)continue;let _=0;const S=g.getValueSize();g.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(_=S/3);let b=0;const T=v.getValueSize();v.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(b=T/3);const x=g.times.length-1;let E;if(f<=g.times[0])E=ki.arraySlice(g.values,_,S-_);else if(f>=g.times[x]){const I=x*S+_;E=ki.arraySlice(g.values,I,I+S-_)}else{const I=g.createInterpolant(),M=_,L=S-_;I.evaluate(f),E=ki.arraySlice(I.resultBuffer,M,L)}"quaternion"===y&&(new Hs).fromArray(E).normalize().conjugate().toArray(E);const D=v.times.length;for(let I=0;I<D;++I){const M=I*T+b;if("quaternion"===y)Hs.multiplyQuaternionsFlat(v.values,M,E,0,v.values,M);else{const L=T-2*b;for(let P=0;P<L;++P)v.values[M+P]-=E[P]}}}return c.blendMode=2501,c}};class cd{constructor(l,a,h,d){this.parameterPositions=l,this._cachedIndex=0,this.resultBuffer=void 0!==d?d:new a.constructor(h),this.sampleValues=a,this.valueSize=h,this.settings=null,this.DefaultSettings_={}}evaluate(l){const a=this.parameterPositions;let h=this._cachedIndex,d=a[h],f=a[h-1];e:{t:{let m;n:{r:if(!(l<d)){for(let g=h+2;;){if(void 0===d){if(l<f)break r;return h=a.length,this._cachedIndex=h,this.afterEnd_(h-1,l,f)}if(h===g)break;if(f=d,d=a[++h],l<d)break t}m=a.length;break n}if(l>=f)break e;{const g=a[1];l<g&&(h=2,f=g);for(let y=h-2;;){if(void 0===f)return this._cachedIndex=0,this.beforeStart_(0,l,d);if(h===y)break;if(d=f,f=a[--h-1],l>=f)break t}m=h,h=0}}for(;h<m;){const g=h+m>>>1;l<a[g]?m=g:h=g+1}if(d=a[h],f=a[h-1],void 0===f)return this._cachedIndex=0,this.beforeStart_(0,l,d);if(void 0===d)return h=a.length,this._cachedIndex=h,this.afterEnd_(h-1,f,l)}this._cachedIndex=h,this.intervalChanged_(h,f,d)}return this.interpolate_(h,f,l,d)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(l){const a=this.resultBuffer,h=this.sampleValues,d=this.valueSize,f=l*d;for(let m=0;m!==d;++m)a[m]=h[f+m];return a}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}cd.prototype.beforeStart_=cd.prototype.copySampleValue_,cd.prototype.afterEnd_=cd.prototype.copySampleValue_;class xZe extends cd{constructor(l,a,h,d){super(l,a,h,d),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:d_,endingEnd:d_}}intervalChanged_(l,a,h){const d=this.parameterPositions;let f=l-2,m=l+1,g=d[f],y=d[m];if(void 0===g)switch(this.getSettings_().endingStart){case f_:f=l,g=2*a-h;break;case 2402:f=d.length-2,g=a+d[f]-d[f+1];break;default:f=l,g=h}if(void 0===y)switch(this.getSettings_().endingEnd){case f_:m=l,y=2*h-a;break;case 2402:m=1,y=h+d[1]-d[0];break;default:m=l-1,y=a}const v=.5*(h-a),_=this.valueSize;this._weightPrev=v/(a-g),this._weightNext=v/(y-h),this._offsetPrev=f*_,this._offsetNext=m*_}interpolate_(l,a,h,d){const f=this.resultBuffer,m=this.sampleValues,g=this.valueSize,y=l*g,v=y-g,_=this._offsetPrev,S=this._offsetNext,b=this._weightPrev,T=this._weightNext,x=(h-a)/(d-a),E=x*x,D=E*x,I=-b*D+2*b*E-b*x,M=(1+b)*D+(-1.5-2*b)*E+(-.5+b)*x+1,L=(-1-T)*D+(1.5+T)*E+.5*x,P=T*D-T*E;for(let F=0;F!==g;++F)f[F]=I*m[_+F]+M*m[v+F]+L*m[y+F]+P*m[S+F];return f}}class Jne extends cd{constructor(l,a,h,d){super(l,a,h,d)}interpolate_(l,a,h,d){const f=this.resultBuffer,m=this.sampleValues,g=this.valueSize,y=l*g,v=y-g,_=(h-a)/(d-a),S=1-_;for(let b=0;b!==g;++b)f[b]=m[v+b]*S+m[y+b]*_;return f}}class EZe extends cd{constructor(l,a,h,d){super(l,a,h,d)}interpolate_(l){return this.copySampleValue_(l-1)}}class $u{constructor(l,a,h,d){if(void 0===l)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===a||0===a.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+l);this.name=l,this.times=ki.convertArray(a,this.TimeBufferType),this.values=ki.convertArray(h,this.ValueBufferType),this.setInterpolation(d||this.DefaultInterpolation)}static toJSON(l){const a=l.constructor;let h;if(a.toJSON!==this.toJSON)h=a.toJSON(l);else{h={name:l.name,times:ki.convertArray(l.times,Array),values:ki.convertArray(l.values,Array)};const d=l.getInterpolation();d!==l.DefaultInterpolation&&(h.interpolation=d)}return h.type=l.ValueTypeName,h}InterpolantFactoryMethodDiscrete(l){return new EZe(this.times,this.values,this.getValueSize(),l)}InterpolantFactoryMethodLinear(l){return new Jne(this.times,this.values,this.getValueSize(),l)}InterpolantFactoryMethodSmooth(l){return new xZe(this.times,this.values,this.getValueSize(),l)}setInterpolation(l){let a;switch(l){case XT:a=this.InterpolantFactoryMethodDiscrete;break;case h_:a=this.InterpolantFactoryMethodLinear;break;case 2302:a=this.InterpolantFactoryMethodSmooth}if(void 0===a){const h="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(l===this.DefaultInterpolation)throw new Error(h);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",h),this}return this.createInterpolant=a,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return XT;case this.InterpolantFactoryMethodLinear:return h_;case this.InterpolantFactoryMethodSmooth:return 2302}}getValueSize(){return this.values.length/this.times.length}shift(l){if(0!==l){const a=this.times;for(let h=0,d=a.length;h!==d;++h)a[h]+=l}return this}scale(l){if(1!==l){const a=this.times;for(let h=0,d=a.length;h!==d;++h)a[h]*=l}return this}trim(l,a){const h=this.times,d=h.length;let f=0,m=d-1;for(;f!==d&&h[f]<l;)++f;for(;-1!==m&&h[m]>a;)--m;if(++m,0!==f||m!==d){f>=m&&(m=Math.max(m,1),f=m-1);const g=this.getValueSize();this.times=ki.arraySlice(h,f,m),this.values=ki.arraySlice(this.values,f*g,m*g)}return this}validate(){let l=!0;const a=this.getValueSize();a-Math.floor(a)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),l=!1);const h=this.times,d=this.values,f=h.length;0===f&&(console.error("THREE.KeyframeTrack: Track is empty.",this),l=!1);let m=null;for(let g=0;g!==f;g++){const y=h[g];if("number"==typeof y&&isNaN(y)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,g,y),l=!1;break}if(null!==m&&m>y){console.error("THREE.KeyframeTrack: Out of order keys.",this,g,y,m),l=!1;break}m=y}if(void 0!==d&&ki.isTypedArray(d))for(let g=0,y=d.length;g!==y;++g){const v=d[g];if(isNaN(v)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,g,v),l=!1;break}}return l}optimize(){const l=ki.arraySlice(this.times),a=ki.arraySlice(this.values),h=this.getValueSize(),d=2302===this.getInterpolation(),f=l.length-1;let m=1;for(let g=1;g<f;++g){let y=!1;const v=l[g];if(v!==l[g+1]&&(1!==g||v!==l[0]))if(d)y=!0;else{const S=g*h,b=S-h,T=S+h;for(let x=0;x!==h;++x){const E=a[S+x];if(E!==a[b+x]||E!==a[T+x]){y=!0;break}}}if(y){if(g!==m){l[m]=l[g];const S=g*h,b=m*h;for(let T=0;T!==h;++T)a[b+T]=a[S+T]}++m}}if(f>0){l[m]=l[f];for(let g=f*h,y=m*h,v=0;v!==h;++v)a[y+v]=a[g+v];++m}return m!==l.length?(this.times=ki.arraySlice(l,0,m),this.values=ki.arraySlice(a,0,m*h)):(this.times=l,this.values=a),this}clone(){const l=ki.arraySlice(this.times,0),a=ki.arraySlice(this.values,0),d=new(0,this.constructor)(this.name,l,a);return d.createInterpolant=this.createInterpolant,d}}$u.prototype.TimeBufferType=Float32Array,$u.prototype.ValueBufferType=Float32Array,$u.prototype.DefaultInterpolation=h_;class j_ extends $u{}j_.prototype.ValueTypeName="bool",j_.prototype.ValueBufferType=Array,j_.prototype.DefaultInterpolation=XT,j_.prototype.InterpolantFactoryMethodLinear=void 0,j_.prototype.InterpolantFactoryMethodSmooth=void 0;class ere extends $u{}ere.prototype.ValueTypeName="color";class T1 extends $u{}T1.prototype.ValueTypeName="number";class MZe extends cd{constructor(l,a,h,d){super(l,a,h,d)}interpolate_(l,a,h,d){const f=this.resultBuffer,m=this.sampleValues,g=this.valueSize,y=(h-a)/(d-a);let v=l*g;for(let _=v+g;v!==_;v+=4)Hs.slerpFlat(f,0,m,v-g,m,v,y);return f}}class Km extends $u{InterpolantFactoryMethodLinear(l){return new MZe(this.times,this.values,this.getValueSize(),l)}}Km.prototype.ValueTypeName="quaternion",Km.prototype.DefaultInterpolation=h_,Km.prototype.InterpolantFactoryMethodSmooth=void 0;class W_ extends $u{}W_.prototype.ValueTypeName="string",W_.prototype.ValueBufferType=Array,W_.prototype.DefaultInterpolation=XT,W_.prototype.InterpolantFactoryMethodLinear=void 0,W_.prototype.InterpolantFactoryMethodSmooth=void 0;class w1 extends $u{}w1.prototype.ValueTypeName="vector";class C1{constructor(l,a=-1,h,d=2500){this.name=l,this.tracks=h,this.duration=a,this.blendMode=d,this.uuid=fl(),this.duration<0&&this.resetDuration()}static parse(l){const a=[],h=l.tracks,d=1/(l.fps||1);for(let m=0,g=h.length;m!==g;++m)a.push(AZe(h[m]).scale(d));const f=new this(l.name,l.duration,a,l.blendMode);return f.uuid=l.uuid,f}static toJSON(l){const a=[],h=l.tracks,d={name:l.name,duration:l.duration,tracks:a,uuid:l.uuid,blendMode:l.blendMode};for(let f=0,m=h.length;f!==m;++f)a.push($u.toJSON(h[f]));return d}static CreateFromMorphTargetSequence(l,a,h,d){const f=a.length,m=[];for(let g=0;g<f;g++){let y=[],v=[];y.push((g+f-1)%f,g,(g+1)%f),v.push(0,1,0);const _=ki.getKeyframeOrder(y);y=ki.sortedArray(y,1,_),v=ki.sortedArray(v,1,_),!d&&0===y[0]&&(y.push(f),v.push(v[0])),m.push(new T1(".morphTargetInfluences["+a[g].name+"]",y,v).scale(1/h))}return new this(l,-1,m)}static findByName(l,a){let h=l;if(!Array.isArray(l)){const d=l;h=d.geometry&&d.geometry.animations||d.animations}for(let d=0;d<h.length;d++)if(h[d].name===a)return h[d];return null}static CreateClipsFromMorphTargetSequences(l,a,h){const d={},f=/^([\w-]*?)([\d]+)$/;for(let g=0,y=l.length;g<y;g++){const v=l[g],_=v.name.match(f);if(_&&_.length>1){const S=_[1];let b=d[S];b||(d[S]=b=[]),b.push(v)}}const m=[];for(const g in d)m.push(this.CreateFromMorphTargetSequence(g,d[g],a,h));return m}static parseAnimation(l,a){if(!l)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const h=function(S,b,T,x,E){if(0!==T.length){const D=[],I=[];ki.flattenJSON(T,D,I,x),0!==D.length&&E.push(new S(b,D,I))}},d=[],f=l.name||"default",m=l.fps||30,g=l.blendMode;let y=l.length||-1;const v=l.hierarchy||[];for(let S=0;S<v.length;S++){const b=v[S].keys;if(b&&0!==b.length)if(b[0].morphTargets){const T={};let x;for(x=0;x<b.length;x++)if(b[x].morphTargets)for(let E=0;E<b[x].morphTargets.length;E++)T[b[x].morphTargets[E]]=-1;for(const E in T){const D=[],I=[];for(let M=0;M!==b[x].morphTargets.length;++M){const L=b[x];D.push(L.time),I.push(L.morphTarget===E?1:0)}d.push(new T1(".morphTargetInfluence["+E+"]",D,I))}y=T.length*(m||1)}else{const T=".bones["+a[S].name+"]";h(w1,T+".position",b,"pos",d),h(Km,T+".quaternion",b,"rot",d),h(w1,T+".scale",b,"scl",d)}}return 0===d.length?null:new this(f,y,d,g)}resetDuration(){let a=0;for(let h=0,d=this.tracks.length;h!==d;++h){const f=this.tracks[h];a=Math.max(a,f.times[f.times.length-1])}return this.duration=a,this}trim(){for(let l=0;l<this.tracks.length;l++)this.tracks[l].trim(0,this.duration);return this}validate(){let l=!0;for(let a=0;a<this.tracks.length;a++)l=l&&this.tracks[a].validate();return l}optimize(){for(let l=0;l<this.tracks.length;l++)this.tracks[l].optimize();return this}clone(){const l=[];for(let a=0;a<this.tracks.length;a++)l.push(this.tracks[a].clone());return new this.constructor(this.name,this.duration,l,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function AZe(c){if(void 0===c.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const l=function DZe(c){switch(c.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return T1;case"vector":case"vector2":case"vector3":case"vector4":return w1;case"color":return ere;case"quaternion":return Km;case"bool":case"boolean":return j_;case"string":return W_}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+c)}(c.type);if(void 0===c.times){const a=[],h=[];ki.flattenJSON(c.keys,a,h,"value"),c.times=a,c.values=h}return void 0!==l.parse?l.parse(c):new l(c.name,c.times,c.values,c.interpolation)}const X_={enabled:!1,files:{},add:function(c,l){!1!==this.enabled&&(this.files[c]=l)},get:function(c){if(!1!==this.enabled)return this.files[c]},remove:function(c){delete this.files[c]},clear:function(){this.files={}}};const IZe=new class tre{constructor(l,a,h){const d=this;let y,f=!1,m=0,g=0;const v=[];this.onStart=void 0,this.onLoad=l,this.onProgress=a,this.onError=h,this.itemStart=function(_){g++,!1===f&&void 0!==d.onStart&&d.onStart(_,m,g),f=!0},this.itemEnd=function(_){m++,void 0!==d.onProgress&&d.onProgress(_,m,g),m===g&&(f=!1,void 0!==d.onLoad&&d.onLoad())},this.itemError=function(_){void 0!==d.onError&&d.onError(_)},this.resolveURL=function(_){return y?y(_):_},this.setURLModifier=function(_){return y=_,this},this.addHandler=function(_,S){return v.push(_,S),this},this.removeHandler=function(_){const S=v.indexOf(_);return-1!==S&&v.splice(S,2),this},this.getHandler=function(_){for(let S=0,b=v.length;S<b;S+=2){const T=v[S],x=v[S+1];if(T.global&&(T.lastIndex=0),T.test(_))return x}return null}}};class ud{constructor(l){this.manager=void 0!==l?l:IZe,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(l,a){const h=this;return new Promise(function(d,f){h.load(l,d,a,f)})}parse(){}setCrossOrigin(l){return this.crossOrigin=l,this}setWithCredentials(l){return this.withCredentials=l,this}setPath(l){return this.path=l,this}setResourcePath(l){return this.resourcePath=l,this}setRequestHeader(l){return this.requestHeader=l,this}}const hd={};class Zc extends ud{constructor(l){super(l)}load(l,a,h,d){void 0===l&&(l=""),void 0!==this.path&&(l=this.path+l),l=this.manager.resolveURL(l);const f=X_.get(l);if(void 0!==f)return this.manager.itemStart(l),setTimeout(()=>{a&&a(f),this.manager.itemEnd(l)},0),f;if(void 0!==hd[l])return void hd[l].push({onLoad:a,onProgress:h,onError:d});hd[l]=[],hd[l].push({onLoad:a,onProgress:h,onError:d});const m=new Request(l,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),g=this.mimeType,y=this.responseType;fetch(m).then(v=>{if(200===v.status||0===v.status){if(0===v.status&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||void 0===v.body.getReader)return v;const _=hd[l],S=v.body.getReader(),b=v.headers.get("Content-Length"),T=b?parseInt(b):0,x=0!==T;let E=0;const D=new ReadableStream({start(I){!function M(){S.read().then(({done:L,value:P})=>{if(L)I.close();else{E+=P.byteLength;const F=new ProgressEvent("progress",{lengthComputable:x,loaded:E,total:T});for(let V=0,z=_.length;V<z;V++){const q=_[V];q.onProgress&&q.onProgress(F)}I.enqueue(P),M()}})}()}});return new Response(D)}throw Error(`fetch for "${v.url}" responded with ${v.status}: ${v.statusText}`)}).then(v=>{switch(y){case"arraybuffer":return v.arrayBuffer();case"blob":return v.blob();case"document":return v.text().then(_=>(new DOMParser).parseFromString(_,g));case"json":return v.json();default:if(void 0===g)return v.text();{const S=/charset="?([^;"\s]*)"?/i.exec(g),b=S&&S[1]?S[1].toLowerCase():void 0,T=new TextDecoder(b);return v.arrayBuffer().then(x=>T.decode(x))}}}).then(v=>{X_.add(l,v);const _=hd[l];delete hd[l];for(let S=0,b=_.length;S<b;S++){const T=_[S];T.onLoad&&T.onLoad(v)}}).catch(v=>{const _=hd[l];if(void 0===_)throw this.manager.itemError(l),v;delete hd[l];for(let S=0,b=_.length;S<b;S++){const T=_[S];T.onError&&T.onError(v)}this.manager.itemError(l)}).finally(()=>{this.manager.itemEnd(l)}),this.manager.itemStart(l)}setResponseType(l){return this.responseType=l,this}setMimeType(l){return this.mimeType=l,this}}class wA extends ud{constructor(l){super(l)}load(l,a,h,d){void 0!==this.path&&(l=this.path+l),l=this.manager.resolveURL(l);const f=this,m=X_.get(l);if(void 0!==m)return f.manager.itemStart(l),setTimeout(function(){a&&a(m),f.manager.itemEnd(l)},0),m;const g=KT("img");function y(){_(),X_.add(l,this),a&&a(this),f.manager.itemEnd(l)}function v(S){_(),d&&d(S),f.manager.itemError(l),f.manager.itemEnd(l)}function _(){g.removeEventListener("load",y,!1),g.removeEventListener("error",v,!1)}return g.addEventListener("load",y,!1),g.addEventListener("error",v,!1),"data:"!==l.substr(0,5)&&void 0!==this.crossOrigin&&(g.crossOrigin=this.crossOrigin),f.manager.itemStart(l),g.src=l,g}}class nre extends ud{constructor(l){super(l)}load(l,a,h,d){const f=new t1,m=new wA(this.manager);m.setCrossOrigin(this.crossOrigin),m.setPath(this.path);let g=0;function y(v){m.load(l[v],function(_){f.images[v]=_,g++,6===g&&(f.needsUpdate=!0,a&&a(f))},void 0,d)}for(let v=0;v<l.length;++v)y(v);return f}}class rre extends ud{constructor(l){super(l)}load(l,a,h,d){const f=new hs,m=new wA(this.manager);return m.setCrossOrigin(this.crossOrigin),m.setPath(this.path),m.load(l,function(g){f.image=g,f.needsUpdate=!0,void 0!==a&&a(f)},h,d),f}}class Yu extends Wr{constructor(l,a=1){super(),this.type="Light",this.color=new At(l),this.intensity=a}dispose(){}copy(l){return super.copy(l),this.color.copy(l.color),this.intensity=l.intensity,this}toJSON(l){const a=super.toJSON(l);return a.object.color=this.color.getHex(),a.object.intensity=this.intensity,void 0!==this.groundColor&&(a.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(a.object.distance=this.distance),void 0!==this.angle&&(a.object.angle=this.angle),void 0!==this.decay&&(a.object.decay=this.decay),void 0!==this.penumbra&&(a.object.penumbra=this.penumbra),void 0!==this.shadow&&(a.object.shadow=this.shadow.toJSON()),a}}Yu.prototype.isLight=!0;(class ire extends Yu{constructor(l,a,h){super(l,h),this.type="HemisphereLight",this.position.copy(Wr.DefaultUp),this.updateMatrix(),this.groundColor=new At(a)}copy(l){return Yu.prototype.copy.call(this,l),this.groundColor.copy(l.groundColor),this}}).prototype.isHemisphereLight=!0;const sre=new nn,ore=new te,are=new te;class ZV{constructor(l){this.camera=l,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Je(512,512),this.map=null,this.mapPass=null,this.matrix=new nn,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new UD,this._frameExtents=new Je(1,1),this._viewportCount=1,this._viewports=[new ai(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(l){const a=this.camera,h=this.matrix;ore.setFromMatrixPosition(l.matrixWorld),a.position.copy(ore),are.setFromMatrixPosition(l.target.matrixWorld),a.lookAt(are),a.updateMatrixWorld(),sre.multiplyMatrices(a.projectionMatrix,a.matrixWorldInverse),this._frustum.setFromProjectionMatrix(sre),h.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),h.multiply(a.projectionMatrix),h.multiply(a.matrixWorldInverse)}getViewport(l){return this._viewports[l]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(l){return this.camera=l.camera.clone(),this.bias=l.bias,this.radius=l.radius,this.mapSize.copy(l.mapSize),this}clone(){return(new this.constructor).copy(this)}toJSON(){const l={};return 0!==this.bias&&(l.bias=this.bias),0!==this.normalBias&&(l.normalBias=this.normalBias),1!==this.radius&&(l.radius=this.radius),(512!==this.mapSize.x||512!==this.mapSize.y)&&(l.mapSize=this.mapSize.toArray()),l.camera=this.camera.toJSON(!1).object,delete l.camera.matrix,l}}class lre extends ZV{constructor(){super(new Rs(50,1,.5,500)),this.focus=1}updateMatrices(l){const a=this.camera,h=2*YT*l.angle*this.focus,d=this.mapSize.width/this.mapSize.height,f=l.distance||a.far;(h!==a.fov||d!==a.aspect||f!==a.far)&&(a.fov=h,a.aspect=d,a.far=f,a.updateProjectionMatrix()),super.updateMatrices(l)}copy(l){return super.copy(l),this.focus=l.focus,this}}lre.prototype.isSpotLightShadow=!0;class KV extends Yu{constructor(l,a,h=0,d=Math.PI/3,f=0,m=1){super(l,a),this.type="SpotLight",this.position.copy(Wr.DefaultUp),this.updateMatrix(),this.target=new Wr,this.distance=h,this.angle=d,this.penumbra=f,this.decay=m,this.shadow=new lre}get power(){return this.intensity*Math.PI}set power(l){this.intensity=l/Math.PI}dispose(){this.shadow.dispose()}copy(l){return super.copy(l),this.distance=l.distance,this.angle=l.angle,this.penumbra=l.penumbra,this.decay=l.decay,this.target=l.target.clone(),this.shadow=l.shadow.clone(),this}}KV.prototype.isSpotLight=!0;const cre=new nn,x1=new te,QV=new te;class ure extends ZV{constructor(){super(new Rs(90,1,.5,500)),this._frameExtents=new Je(4,2),this._viewportCount=6,this._viewports=[new ai(2,1,1,1),new ai(0,1,1,1),new ai(3,1,1,1),new ai(1,1,1,1),new ai(3,0,1,1),new ai(1,0,1,1)],this._cubeDirections=[new te(1,0,0),new te(-1,0,0),new te(0,0,1),new te(0,0,-1),new te(0,1,0),new te(0,-1,0)],this._cubeUps=[new te(0,1,0),new te(0,1,0),new te(0,1,0),new te(0,1,0),new te(0,0,1),new te(0,0,-1)]}updateMatrices(l,a=0){const h=this.camera,d=this.matrix,f=l.distance||h.far;f!==h.far&&(h.far=f,h.updateProjectionMatrix()),x1.setFromMatrixPosition(l.matrixWorld),h.position.copy(x1),QV.copy(h.position),QV.add(this._cubeDirections[a]),h.up.copy(this._cubeUps[a]),h.lookAt(QV),h.updateMatrixWorld(),d.makeTranslation(-x1.x,-x1.y,-x1.z),cre.multiplyMatrices(h.projectionMatrix,h.matrixWorldInverse),this._frustum.setFromProjectionMatrix(cre)}}ure.prototype.isPointLightShadow=!0;class JV extends Yu{constructor(l,a,h=0,d=1){super(l,a),this.type="PointLight",this.distance=h,this.decay=d,this.shadow=new ure}get power(){return 4*this.intensity*Math.PI}set power(l){this.intensity=l/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(l){return super.copy(l),this.distance=l.distance,this.decay=l.decay,this.shadow=l.shadow.clone(),this}}JV.prototype.isPointLight=!0;class hre extends ZV{constructor(){super(new r1(-5,5,5,-5,.5,500))}}hre.prototype.isDirectionalLightShadow=!0;class CA extends Yu{constructor(l,a){super(l,a),this.type="DirectionalLight",this.position.copy(Wr.DefaultUp),this.updateMatrix(),this.target=new Wr,this.shadow=new hre}dispose(){this.shadow.dispose()}copy(l){return super.copy(l),this.target=l.target.clone(),this.shadow=l.shadow.clone(),this}}CA.prototype.isDirectionalLight=!0;(class dre extends Yu{constructor(l,a){super(l,a),this.type="AmbientLight"}}).prototype.isAmbientLight=!0;(class fre extends Yu{constructor(l,a,h=10,d=10){super(l,a),this.type="RectAreaLight",this.width=h,this.height=d}get power(){return this.intensity*this.width*this.height*Math.PI}set power(l){this.intensity=l/(this.width*this.height*Math.PI)}copy(l){return super.copy(l),this.width=l.width,this.height=l.height,this}toJSON(l){const a=super.toJSON(l);return a.object.width=this.width,a.object.height=this.height,a}}).prototype.isRectAreaLight=!0;class pre{constructor(){this.coefficients=[];for(let l=0;l<9;l++)this.coefficients.push(new te)}set(l){for(let a=0;a<9;a++)this.coefficients[a].copy(l[a]);return this}zero(){for(let l=0;l<9;l++)this.coefficients[l].set(0,0,0);return this}getAt(l,a){const h=l.x,d=l.y,f=l.z,m=this.coefficients;return a.copy(m[0]).multiplyScalar(.282095),a.addScaledVector(m[1],.488603*d),a.addScaledVector(m[2],.488603*f),a.addScaledVector(m[3],.488603*h),a.addScaledVector(m[4],h*d*1.092548),a.addScaledVector(m[5],d*f*1.092548),a.addScaledVector(m[6],.315392*(3*f*f-1)),a.addScaledVector(m[7],h*f*1.092548),a.addScaledVector(m[8],.546274*(h*h-d*d)),a}getIrradianceAt(l,a){const h=l.x,d=l.y,f=l.z,m=this.coefficients;return a.copy(m[0]).multiplyScalar(.886227),a.addScaledVector(m[1],1.023328*d),a.addScaledVector(m[2],1.023328*f),a.addScaledVector(m[3],1.023328*h),a.addScaledVector(m[4],.858086*h*d),a.addScaledVector(m[5],.858086*d*f),a.addScaledVector(m[6],.743125*f*f-.247708),a.addScaledVector(m[7],.858086*h*f),a.addScaledVector(m[8],.429043*(h*h-d*d)),a}add(l){for(let a=0;a<9;a++)this.coefficients[a].add(l.coefficients[a]);return this}addScaledSH(l,a){for(let h=0;h<9;h++)this.coefficients[h].addScaledVector(l.coefficients[h],a);return this}scale(l){for(let a=0;a<9;a++)this.coefficients[a].multiplyScalar(l);return this}lerp(l,a){for(let h=0;h<9;h++)this.coefficients[h].lerp(l.coefficients[h],a);return this}equals(l){for(let a=0;a<9;a++)if(!this.coefficients[a].equals(l.coefficients[a]))return!1;return!0}copy(l){return this.set(l.coefficients)}clone(){return(new this.constructor).copy(this)}fromArray(l,a=0){const h=this.coefficients;for(let d=0;d<9;d++)h[d].fromArray(l,a+3*d);return this}toArray(l=[],a=0){const h=this.coefficients;for(let d=0;d<9;d++)h[d].toArray(l,a+3*d);return l}static getBasisAt(l,a){const h=l.x,d=l.y,f=l.z;a[0]=.282095,a[1]=.488603*d,a[2]=.488603*f,a[3]=.488603*h,a[4]=1.092548*h*d,a[5]=1.092548*d*f,a[6]=.315392*(3*f*f-1),a[7]=1.092548*h*f,a[8]=.546274*(h*h-d*d)}}pre.prototype.isSphericalHarmonics3=!0;class xA extends Yu{constructor(l=new pre,a=1){super(void 0,a),this.sh=l}copy(l){return super.copy(l),this.sh.copy(l.sh),this}fromJSON(l){return this.intensity=l.intensity,this.sh.fromArray(l.sh),this}toJSON(l){const a=super.toJSON(l);return a.object.sh=this.sh.toArray(),a}}xA.prototype.isLightProbe=!0;class Zu{static decodeText(l){if(typeof TextDecoder<"u")return(new TextDecoder).decode(l);let a="";for(let h=0,d=l.length;h<d;h++)a+=String.fromCharCode(l[h]);try{return decodeURIComponent(escape(a))}catch{return a}}static extractUrlBase(l){const a=l.lastIndexOf("/");return-1===a?"./":l.substr(0,a+1)}static resolveURL(l,a){return"string"!=typeof l||""===l?"":(/^https?:\/\//i.test(a)&&/^\//.test(l)&&(a=a.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(l)||/^data:.*,.*$/i.test(l)||/^blob:.*$/i.test(l)?l:a+l)}}(class mre extends Mn{constructor(){super(),this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(l){return super.copy(l),this.instanceCount=l.instanceCount,this}clone(){return(new this.constructor).copy(this)}toJSON(){const l=super.toJSON(this);return l.instanceCount=this.instanceCount,l.isInstancedBufferGeometry=!0,l}}).prototype.isInstancedBufferGeometry=!0;class vre extends ud{constructor(l){super(l),typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(l){return this.options=l,this}load(l,a,h,d){void 0===l&&(l=""),void 0!==this.path&&(l=this.path+l),l=this.manager.resolveURL(l);const f=this,m=X_.get(l);if(void 0!==m)return f.manager.itemStart(l),setTimeout(function(){a&&a(m),f.manager.itemEnd(l)},0),m;const g={};g.credentials="anonymous"===this.crossOrigin?"same-origin":"include",g.headers=this.requestHeader,fetch(l,g).then(function(y){return y.blob()}).then(function(y){return createImageBitmap(y,Object.assign(f.options,{colorSpaceConversion:"none"}))}).then(function(y){X_.add(l,y),a&&a(y),f.manager.itemEnd(l)}).catch(function(y){d&&d(y),f.manager.itemError(l),f.manager.itemEnd(l)}),f.manager.itemStart(l)}}let EA;vre.prototype.isImageBitmapLoader=!0;class NZe extends ud{constructor(l){super(l)}load(l,a,h,d){const f=this,m=new Zc(this.manager);m.setResponseType("arraybuffer"),m.setPath(this.path),m.setRequestHeader(this.requestHeader),m.setWithCredentials(this.withCredentials),m.load(l,function(g){try{const y=g.slice(0);(void 0===EA&&(EA=new(window.AudioContext||window.webkitAudioContext)),EA).decodeAudioData(y,function(_){a(_)})}catch(y){d?d(y):console.error(y),f.manager.itemError(l)}},h,d)}}(class FZe extends xA{constructor(l,a,h=1){super(void 0,h);const d=(new At).set(l),f=(new At).set(a),m=new te(d.r,d.g,d.b),g=new te(f.r,f.g,f.b),y=Math.sqrt(Math.PI),v=y*Math.sqrt(.75);this.sh.coefficients[0].copy(m).add(g).multiplyScalar(y),this.sh.coefficients[1].copy(m).sub(g).multiplyScalar(v)}}).prototype.isHemisphereLightProbe=!0,class kZe extends xA{constructor(l,a=1){super(void 0,a);const h=(new At).set(l);this.sh.coefficients[0].set(h.r,h.g,h.b).multiplyScalar(2*Math.sqrt(Math.PI))}}.prototype.isAmbientLightProbe=!0;class HZe{constructor(l,a,h){let d,f,m;switch(this.binding=l,this.valueSize=h,a){case"quaternion":d=this._slerp,f=this._slerpAdditive,m=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(6*h),this._workIndex=5;break;case"string":case"bool":d=this._select,f=this._select,m=this._setAdditiveIdentityOther,this.buffer=new Array(5*h);break;default:d=this._lerp,f=this._lerpAdditive,m=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(5*h)}this._mixBufferRegion=d,this._mixBufferRegionAdditive=f,this._setIdentity=m,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(l,a){const h=this.buffer,d=this.valueSize,f=l*d+d;let m=this.cumulativeWeight;if(0===m){for(let g=0;g!==d;++g)h[f+g]=h[g];m=a}else m+=a,this._mixBufferRegion(h,f,0,a/m,d);this.cumulativeWeight=m}accumulateAdditive(l){const a=this.buffer,h=this.valueSize,d=h*this._addIndex;0===this.cumulativeWeightAdditive&&this._setIdentity(),this._mixBufferRegionAdditive(a,d,0,l,h),this.cumulativeWeightAdditive+=l}apply(l){const a=this.valueSize,h=this.buffer,d=l*a+a,f=this.cumulativeWeight,m=this.cumulativeWeightAdditive,g=this.binding;this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,f<1&&this._mixBufferRegion(h,d,a*this._origIndex,1-f,a),m>0&&this._mixBufferRegionAdditive(h,d,this._addIndex*a,1,a);for(let y=a,v=a+a;y!==v;++y)if(h[y]!==h[y+a]){g.setValue(h,d);break}}saveOriginalState(){const a=this.buffer,h=this.valueSize,d=h*this._origIndex;this.binding.getValue(a,d);for(let f=h,m=d;f!==m;++f)a[f]=a[d+f%h];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){this.binding.setValue(this.buffer,3*this.valueSize)}_setAdditiveIdentityNumeric(){const l=this._addIndex*this.valueSize,a=l+this.valueSize;for(let h=l;h<a;h++)this.buffer[h]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const l=this._origIndex*this.valueSize,a=this._addIndex*this.valueSize;for(let h=0;h<this.valueSize;h++)this.buffer[a+h]=this.buffer[l+h]}_select(l,a,h,d,f){if(d>=.5)for(let m=0;m!==f;++m)l[a+m]=l[h+m]}_slerp(l,a,h,d){Hs.slerpFlat(l,a,l,a,l,h,d)}_slerpAdditive(l,a,h,d,f){const m=this._workIndex*f;Hs.multiplyQuaternionsFlat(l,m,l,a,l,h),Hs.slerpFlat(l,a,l,a,l,m,d)}_lerp(l,a,h,d,f){const m=1-d;for(let g=0;g!==f;++g){const y=a+g;l[y]=l[y]*m+l[h+g]*d}}_lerpAdditive(l,a,h,d,f){for(let m=0;m!==f;++m){const g=a+m;l[g]=l[g]+l[h+m]*d}}}const eB="\\[\\]\\.:\\/",jZe=new RegExp("["+eB+"]","g"),tB="[^"+eB+"]",WZe="[^"+eB.replace("\\.","")+"]",XZe=/((?:WC+[\/:])*)/.source.replace("WC",tB),qZe=/(WCOD+)?/.source.replace("WCOD",WZe),$Ze=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",tB),YZe=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",tB),ZZe=new RegExp("^"+XZe+qZe+$Ze+YZe+"$"),KZe=["material","materials","bones"];class QZe{constructor(l,a,h){const d=h||Ti.parseTrackName(a);this._targetGroup=l,this._bindings=l.subscribe_(a,d)}getValue(l,a){this.bind();const d=this._bindings[this._targetGroup.nCachedObjects_];void 0!==d&&d.getValue(l,a)}setValue(l,a){const h=this._bindings;for(let d=this._targetGroup.nCachedObjects_,f=h.length;d!==f;++d)h[d].setValue(l,a)}bind(){const l=this._bindings;for(let a=this._targetGroup.nCachedObjects_,h=l.length;a!==h;++a)l[a].bind()}unbind(){const l=this._bindings;for(let a=this._targetGroup.nCachedObjects_,h=l.length;a!==h;++a)l[a].unbind()}}let Ti=(()=>{class c{constructor(a,h,d){this.path=h,this.parsedPath=d||c.parseTrackName(h),this.node=c.findNode(a,this.parsedPath.nodeName)||a,this.rootNode=a,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(a,h,d){return a&&a.isAnimationObjectGroup?new c.Composite(a,h,d):new c(a,h,d)}static sanitizeNodeName(a){return a.replace(/\s/g,"_").replace(jZe,"")}static parseTrackName(a){const h=ZZe.exec(a);if(!h)throw new Error("PropertyBinding: Cannot parse trackName: "+a);const d={nodeName:h[2],objectName:h[3],objectIndex:h[4],propertyName:h[5],propertyIndex:h[6]},f=d.nodeName&&d.nodeName.lastIndexOf(".");if(void 0!==f&&-1!==f){const m=d.nodeName.substring(f+1);-1!==KZe.indexOf(m)&&(d.nodeName=d.nodeName.substring(0,f),d.objectName=m)}if(null===d.propertyName||0===d.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+a);return d}static findNode(a,h){if(!h||""===h||"."===h||-1===h||h===a.name||h===a.uuid)return a;if(a.skeleton){const d=a.skeleton.getBoneByName(h);if(void 0!==d)return d}if(a.children){const d=function(m){for(let g=0;g<m.length;g++){const y=m[g];if(y.name===h||y.uuid===h)return y;const v=d(y.children);if(v)return v}return null},f=d(a.children);if(f)return f}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(a,h){a[h]=this.targetObject[this.propertyName]}_getValue_array(a,h){const d=this.resolvedProperty;for(let f=0,m=d.length;f!==m;++f)a[h++]=d[f]}_getValue_arrayElement(a,h){a[h]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(a,h){this.resolvedProperty.toArray(a,h)}_setValue_direct(a,h){this.targetObject[this.propertyName]=a[h]}_setValue_direct_setNeedsUpdate(a,h){this.targetObject[this.propertyName]=a[h],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(a,h){this.targetObject[this.propertyName]=a[h],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(a,h){const d=this.resolvedProperty;for(let f=0,m=d.length;f!==m;++f)d[f]=a[h++]}_setValue_array_setNeedsUpdate(a,h){const d=this.resolvedProperty;for(let f=0,m=d.length;f!==m;++f)d[f]=a[h++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(a,h){const d=this.resolvedProperty;for(let f=0,m=d.length;f!==m;++f)d[f]=a[h++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(a,h){this.resolvedProperty[this.propertyIndex]=a[h]}_setValue_arrayElement_setNeedsUpdate(a,h){this.resolvedProperty[this.propertyIndex]=a[h],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(a,h){this.resolvedProperty[this.propertyIndex]=a[h],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(a,h){this.resolvedProperty.fromArray(a,h)}_setValue_fromArray_setNeedsUpdate(a,h){this.resolvedProperty.fromArray(a,h),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(a,h){this.resolvedProperty.fromArray(a,h),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(a,h){this.bind(),this.getValue(a,h)}_setValue_unbound(a,h){this.bind(),this.setValue(a,h)}bind(){let a=this.node;const h=this.parsedPath,d=h.objectName,f=h.propertyName;let m=h.propertyIndex;if(a||(a=c.findNode(this.rootNode,h.nodeName)||this.rootNode,this.node=a),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!a)return void console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");if(d){let _=h.objectIndex;switch(d){case"materials":if(!a.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!a.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);a=a.material.materials;break;case"bones":if(!a.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);a=a.skeleton.bones;for(let S=0;S<a.length;S++)if(a[S].name===_){_=S;break}break;default:if(void 0===a[d])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);a=a[d]}if(void 0!==_){if(void 0===a[_])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,a);a=a[_]}}const g=a[f];if(void 0===g)return void console.error("THREE.PropertyBinding: Trying to update property for track: "+h.nodeName+"."+f+" but it wasn't found.",a);let y=this.Versioning.None;this.targetObject=a,void 0!==a.needsUpdate?y=this.Versioning.NeedsUpdate:void 0!==a.matrixWorldNeedsUpdate&&(y=this.Versioning.MatrixWorldNeedsUpdate);let v=this.BindingType.Direct;if(void 0!==m){if("morphTargetInfluences"===f){if(!a.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!a.geometry.isBufferGeometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences on THREE.Geometry. Use THREE.BufferGeometry instead.",this);if(!a.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==a.morphTargetDictionary[m]&&(m=a.morphTargetDictionary[m])}v=this.BindingType.ArrayElement,this.resolvedProperty=g,this.propertyIndex=m}else void 0!==g.fromArray&&void 0!==g.toArray?(v=this.BindingType.HasFromToArray,this.resolvedProperty=g):Array.isArray(g)?(v=this.BindingType.EntireArray,this.resolvedProperty=g):this.propertyName=f;this.getValue=this.GetterByBindingType[v],this.setValue=this.SetterByBindingTypeAndVersioning[v][y]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}return c.Composite=QZe,c})();Ti.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Ti.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},Ti.prototype.GetterByBindingType=[Ti.prototype._getValue_direct,Ti.prototype._getValue_array,Ti.prototype._getValue_arrayElement,Ti.prototype._getValue_toArray],Ti.prototype.SetterByBindingTypeAndVersioning=[[Ti.prototype._setValue_direct,Ti.prototype._setValue_direct_setNeedsUpdate,Ti.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[Ti.prototype._setValue_array,Ti.prototype._setValue_array_setNeedsUpdate,Ti.prototype._setValue_array_setMatrixWorldNeedsUpdate],[Ti.prototype._setValue_arrayElement,Ti.prototype._setValue_arrayElement_setNeedsUpdate,Ti.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[Ti.prototype._setValue_fromArray,Ti.prototype._setValue_fromArray_setNeedsUpdate,Ti.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class eKe{constructor(l,a,h=null,d=a.blendMode){this._mixer=l,this._clip=a,this._localRoot=h,this.blendMode=d;const f=a.tracks,m=f.length,g=new Array(m),y={endingStart:d_,endingEnd:d_};for(let v=0;v!==m;++v){const _=f[v].createInterpolant(null);g[v]=_,_.settings=y}this._interpolantSettings=y,this._interpolants=g,this._propertyBindings=new Array(m),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=2201,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(l){return this._startTime=l,this}setLoop(l,a){return this.loop=l,this.repetitions=a,this}setEffectiveWeight(l){return this.weight=l,this._effectiveWeight=this.enabled?l:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(l){return this._scheduleFading(l,0,1)}fadeOut(l){return this._scheduleFading(l,1,0)}crossFadeFrom(l,a,h){if(l.fadeOut(a),this.fadeIn(a),h){const d=this._clip.duration,f=l._clip.duration,g=d/f;l.warp(1,f/d,a),this.warp(g,1,a)}return this}crossFadeTo(l,a,h){return l.crossFadeFrom(this,a,h)}stopFading(){const l=this._weightInterpolant;return null!==l&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(l)),this}setEffectiveTimeScale(l){return this.timeScale=l,this._effectiveTimeScale=this.paused?0:l,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(l){return this.timeScale=this._clip.duration/l,this.stopWarping()}syncWith(l){return this.time=l.time,this.timeScale=l.timeScale,this.stopWarping()}halt(l){return this.warp(this._effectiveTimeScale,0,l)}warp(l,a,h){const d=this._mixer,f=d.time,m=this.timeScale;let g=this._timeScaleInterpolant;null===g&&(g=d._lendControlInterpolant(),this._timeScaleInterpolant=g);const y=g.parameterPositions,v=g.sampleValues;return y[0]=f,y[1]=f+h,v[0]=l/m,v[1]=a/m,this}stopWarping(){const l=this._timeScaleInterpolant;return null!==l&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(l)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(l,a,h,d){if(!this.enabled)return void this._updateWeight(l);const f=this._startTime;if(null!==f){const y=(l-f)*h;if(y<0||0===h)return;this._startTime=null,a=h*y}a*=this._updateTimeScale(l);const m=this._updateTime(a),g=this._updateWeight(l);if(g>0){const y=this._interpolants,v=this._propertyBindings;if(2501===this.blendMode)for(let _=0,S=y.length;_!==S;++_)y[_].evaluate(m),v[_].accumulateAdditive(g);else for(let _=0,S=y.length;_!==S;++_)y[_].evaluate(m),v[_].accumulate(d,g)}}_updateWeight(l){let a=0;if(this.enabled){a=this.weight;const h=this._weightInterpolant;if(null!==h){const d=h.evaluate(l)[0];a*=d,l>h.parameterPositions[1]&&(this.stopFading(),0===d&&(this.enabled=!1))}}return this._effectiveWeight=a,a}_updateTimeScale(l){let a=0;if(!this.paused){a=this.timeScale;const h=this._timeScaleInterpolant;null!==h&&(a*=h.evaluate(l)[0],l>h.parameterPositions[1]&&(this.stopWarping(),0===a?this.paused=!0:this.timeScale=a))}return this._effectiveTimeScale=a,a}_updateTime(l){const a=this._clip.duration,h=this.loop;let d=this.time+l,f=this._loopCount;const m=2202===h;if(0===l)return-1===f?d:m&&1==(1&f)?a-d:d;if(2200===h){-1===f&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(d>=a)d=a;else{if(!(d<0)){this.time=d;break e}d=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=d,this._mixer.dispatchEvent({type:"finished",action:this,direction:l<0?-1:1})}}else{if(-1===f&&(l>=0?(f=0,this._setEndings(!0,0===this.repetitions,m)):this._setEndings(0===this.repetitions,!0,m)),d>=a||d<0){const g=Math.floor(d/a);d-=a*g,f+=Math.abs(g);const y=this.repetitions-f;if(y<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,d=l>0?a:0,this.time=d,this._mixer.dispatchEvent({type:"finished",action:this,direction:l>0?1:-1});else{if(1===y){const v=l<0;this._setEndings(v,!v,m)}else this._setEndings(!1,!1,m);this._loopCount=f,this.time=d,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:g})}}else this.time=d;if(m&&1==(1&f))return a-d}return d}_setEndings(l,a,h){const d=this._interpolantSettings;h?(d.endingStart=f_,d.endingEnd=f_):(d.endingStart=l?this.zeroSlopeAtStart?f_:d_:2402,d.endingEnd=a?this.zeroSlopeAtEnd?f_:d_:2402)}_scheduleFading(l,a,h){const d=this._mixer,f=d.time;let m=this._weightInterpolant;null===m&&(m=d._lendControlInterpolant(),this._weightInterpolant=m);const g=m.parameterPositions,y=m.sampleValues;return g[0]=f,y[0]=a,g[1]=f+l,y[1]=h,this}}(class tKe extends Xf{constructor(l){super(),this._root=l,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(l,a){const h=l._localRoot||this._root,d=l._clip.tracks,f=d.length,m=l._propertyBindings,g=l._interpolants,y=h.uuid,v=this._bindingsByRootAndName;let _=v[y];void 0===_&&(_={},v[y]=_);for(let S=0;S!==f;++S){const b=d[S],T=b.name;let x=_[T];if(void 0!==x)++x.referenceCount,m[S]=x;else{if(x=m[S],void 0!==x){null===x._cacheIndex&&(++x.referenceCount,this._addInactiveBinding(x,y,T));continue}x=new HZe(Ti.create(h,T,a&&a._propertyBindings[S].binding.parsedPath),b.ValueTypeName,b.getValueSize()),++x.referenceCount,this._addInactiveBinding(x,y,T),m[S]=x}g[S].resultBuffer=x.buffer}}_activateAction(l){if(!this._isActiveAction(l)){if(null===l._cacheIndex){const h=(l._localRoot||this._root).uuid,d=l._clip.uuid,f=this._actionsByClip[d];this._bindAction(l,f&&f.knownActions[0]),this._addInactiveAction(l,d,h)}const a=l._propertyBindings;for(let h=0,d=a.length;h!==d;++h){const f=a[h];0==f.useCount++&&(this._lendBinding(f),f.saveOriginalState())}this._lendAction(l)}}_deactivateAction(l){if(this._isActiveAction(l)){const a=l._propertyBindings;for(let h=0,d=a.length;h!==d;++h){const f=a[h];0==--f.useCount&&(f.restoreOriginalState(),this._takeBackBinding(f))}this._takeBackAction(l)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const l=this;this.stats={actions:{get total(){return l._actions.length},get inUse(){return l._nActiveActions}},bindings:{get total(){return l._bindings.length},get inUse(){return l._nActiveBindings}},controlInterpolants:{get total(){return l._controlInterpolants.length},get inUse(){return l._nActiveControlInterpolants}}}}_isActiveAction(l){const a=l._cacheIndex;return null!==a&&a<this._nActiveActions}_addInactiveAction(l,a,h){const d=this._actions,f=this._actionsByClip;let m=f[a];if(void 0===m)m={knownActions:[l],actionByRoot:{}},l._byClipCacheIndex=0,f[a]=m;else{const g=m.knownActions;l._byClipCacheIndex=g.length,g.push(l)}l._cacheIndex=d.length,d.push(l),m.actionByRoot[h]=l}_removeInactiveAction(l){const a=this._actions,h=a[a.length-1],d=l._cacheIndex;h._cacheIndex=d,a[d]=h,a.pop(),l._cacheIndex=null;const f=l._clip.uuid,m=this._actionsByClip,g=m[f],y=g.knownActions,v=y[y.length-1],_=l._byClipCacheIndex;v._byClipCacheIndex=_,y[_]=v,y.pop(),l._byClipCacheIndex=null,delete g.actionByRoot[(l._localRoot||this._root).uuid],0===y.length&&delete m[f],this._removeInactiveBindingsForAction(l)}_removeInactiveBindingsForAction(l){const a=l._propertyBindings;for(let h=0,d=a.length;h!==d;++h){const f=a[h];0==--f.referenceCount&&this._removeInactiveBinding(f)}}_lendAction(l){const a=this._actions,h=l._cacheIndex,d=this._nActiveActions++,f=a[d];l._cacheIndex=d,a[d]=l,f._cacheIndex=h,a[h]=f}_takeBackAction(l){const a=this._actions,h=l._cacheIndex,d=--this._nActiveActions,f=a[d];l._cacheIndex=d,a[d]=l,f._cacheIndex=h,a[h]=f}_addInactiveBinding(l,a,h){const d=this._bindingsByRootAndName,f=this._bindings;let m=d[a];void 0===m&&(m={},d[a]=m),m[h]=l,l._cacheIndex=f.length,f.push(l)}_removeInactiveBinding(l){const a=this._bindings,h=l.binding,d=h.rootNode.uuid,f=h.path,m=this._bindingsByRootAndName,g=m[d],y=a[a.length-1],v=l._cacheIndex;y._cacheIndex=v,a[v]=y,a.pop(),delete g[f],0===Object.keys(g).length&&delete m[d]}_lendBinding(l){const a=this._bindings,h=l._cacheIndex,d=this._nActiveBindings++,f=a[d];l._cacheIndex=d,a[d]=l,f._cacheIndex=h,a[h]=f}_takeBackBinding(l){const a=this._bindings,h=l._cacheIndex,d=--this._nActiveBindings,f=a[d];l._cacheIndex=d,a[d]=l,f._cacheIndex=h,a[h]=f}_lendControlInterpolant(){const l=this._controlInterpolants,a=this._nActiveControlInterpolants++;let h=l[a];return void 0===h&&(h=new Jne(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer),h.__cacheIndex=a,l[a]=h),h}_takeBackControlInterpolant(l){const a=this._controlInterpolants,h=l.__cacheIndex,d=--this._nActiveControlInterpolants,f=a[d];l.__cacheIndex=d,a[d]=l,f.__cacheIndex=h,a[h]=f}clipAction(l,a,h){const d=a||this._root,f=d.uuid;let m="string"==typeof l?C1.findByName(d,l):l;const g=null!==m?m.uuid:l,y=this._actionsByClip[g];let v=null;if(void 0===h&&(h=null!==m?m.blendMode:2500),void 0!==y){const S=y.actionByRoot[f];if(void 0!==S&&S.blendMode===h)return S;v=y.knownActions[0],null===m&&(m=v._clip)}if(null===m)return null;const _=new eKe(this,m,a,h);return this._bindAction(_,v),this._addInactiveAction(_,g,f),_}existingAction(l,a){const h=a||this._root,d=h.uuid,f="string"==typeof l?C1.findByName(h,l):l,g=this._actionsByClip[f?f.uuid:l];return void 0!==g&&g.actionByRoot[d]||null}stopAllAction(){const l=this._actions;for(let h=this._nActiveActions-1;h>=0;--h)l[h].stop();return this}update(l){const a=this._actions,h=this._nActiveActions,d=this.time+=l*=this.timeScale,f=Math.sign(l),m=this._accuIndex^=1;for(let v=0;v!==h;++v)a[v]._update(d,l,f,m);const g=this._bindings,y=this._nActiveBindings;for(let v=0;v!==y;++v)g[v].apply(m);return this}setTime(l){this.time=0;for(let a=0;a<this._actions.length;a++)this._actions[a].time=0;return this.update(l)}getRoot(){return this._root}uncacheClip(l){const a=this._actions,h=l.uuid,d=this._actionsByClip,f=d[h];if(void 0!==f){const m=f.knownActions;for(let g=0,y=m.length;g!==y;++g){const v=m[g];this._deactivateAction(v);const _=v._cacheIndex,S=a[a.length-1];v._cacheIndex=null,v._byClipCacheIndex=null,S._cacheIndex=_,a[_]=S,a.pop(),this._removeInactiveBindingsForAction(v)}delete d[h]}}uncacheRoot(l){const a=l.uuid,h=this._actionsByClip;for(const m in h){const y=h[m].actionByRoot[a];void 0!==y&&(this._deactivateAction(y),this._removeInactiveAction(y))}const f=this._bindingsByRootAndName[a];if(void 0!==f)for(const m in f){const g=f[m];g.restoreOriginalState(),this._removeInactiveBinding(g)}}uncacheAction(l,a){const h=this.existingAction(l,a);null!==h&&(this._deactivateAction(h),this._removeInactiveAction(h))}}).prototype._controlInterpolantsResultBuffer=new Float32Array(1);class nB{constructor(l){"string"==typeof l&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),l=arguments[1]),this.value=l}clone(){return new nB(void 0===this.value.clone?this.value:this.value.clone())}}(class nKe extends Ym{constructor(l,a,h=1){super(l,a),this.meshPerAttribute=h}copy(l){return super.copy(l),this.meshPerAttribute=l.meshPerAttribute,this}clone(l){const a=super.clone(l);return a.meshPerAttribute=this.meshPerAttribute,a}toJSON(l){const a=super.toJSON(l);return a.isInstancedInterleavedBuffer=!0,a.meshPerAttribute=this.meshPerAttribute,a}}).prototype.isInstancedInterleavedBuffer=!0;class Ere{constructor(l=1,a=0,h=0){return this.radius=l,this.phi=a,this.theta=h,this}set(l,a,h){return this.radius=l,this.phi=a,this.theta=h,this}copy(l){return this.radius=l.radius,this.phi=l.phi,this.theta=l.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(l){return this.setFromCartesianCoords(l.x,l.y,l.z)}setFromCartesianCoords(l,a,h){return this.radius=Math.sqrt(l*l+a*a+h*h),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(l,h),this.phi=Math.acos(_o(a/this.radius,-1,1))),this}clone(){return(new this.constructor).copy(this)}}const Mre=new Je;class E1{constructor(l=new Je(1/0,1/0),a=new Je(-1/0,-1/0)){this.min=l,this.max=a}set(l,a){return this.min.copy(l),this.max.copy(a),this}setFromPoints(l){this.makeEmpty();for(let a=0,h=l.length;a<h;a++)this.expandByPoint(l[a]);return this}setFromCenterAndSize(l,a){const h=Mre.copy(a).multiplyScalar(.5);return this.min.copy(l).sub(h),this.max.copy(l).add(h),this}clone(){return(new this.constructor).copy(this)}copy(l){return this.min.copy(l.min),this.max.copy(l.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(l){return this.isEmpty()?l.set(0,0):l.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(l){return this.isEmpty()?l.set(0,0):l.subVectors(this.max,this.min)}expandByPoint(l){return this.min.min(l),this.max.max(l),this}expandByVector(l){return this.min.sub(l),this.max.add(l),this}expandByScalar(l){return this.min.addScalar(-l),this.max.addScalar(l),this}containsPoint(l){return!(l.x<this.min.x||l.x>this.max.x||l.y<this.min.y||l.y>this.max.y)}containsBox(l){return this.min.x<=l.min.x&&l.max.x<=this.max.x&&this.min.y<=l.min.y&&l.max.y<=this.max.y}getParameter(l,a){return a.set((l.x-this.min.x)/(this.max.x-this.min.x),(l.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(l){return!(l.max.x<this.min.x||l.min.x>this.max.x||l.max.y<this.min.y||l.min.y>this.max.y)}clampPoint(l,a){return a.copy(l).clamp(this.min,this.max)}distanceToPoint(l){return Mre.copy(l).clamp(this.min,this.max).sub(l).length()}intersect(l){return this.min.max(l.min),this.max.min(l.max),this}union(l){return this.min.min(l.min),this.max.max(l.max),this}translate(l){return this.min.add(l),this.max.add(l),this}equals(l){return l.min.equals(this.min)&&l.max.equals(this.max)}}E1.prototype.isBox2=!0;const lp=new te,DA=new nn,iB=new nn;function Ire(c){const l=[];c&&c.isBone&&l.push(c);for(let a=0;a<c.children.length;a++)l.push.apply(l,Ire(c.children[a]));return l}const Fre=new Float32Array(1);new Int32Array(Fre.buffer),Yl.create=function(c,l){return console.log("THREE.Curve.create() has been deprecated"),c.prototype=Object.create(Yl.prototype),c.prototype.constructor=c,c.prototype.getPoint=l,c},dA.prototype.fromPoints=function(c){return console.warn("THREE.Path: .fromPoints() has been renamed to .setFromPoints()."),this.setFromPoints(c)},class aKe extends od{constructor(l=10,a=10,h=4473924,d=8947848){h=new At(h),d=new At(d);const f=a/2,m=l/a,g=l/2,y=[],v=[];for(let b=0,T=0,x=-g;b<=a;b++,x+=m){y.push(-g,0,x,g,0,x),y.push(x,0,-g,x,0,g);const E=b===f?h:d;E.toArray(v,T),T+=3,E.toArray(v,T),T+=3,E.toArray(v,T),T+=3,E.toArray(v,T),T+=3}const _=new Mn;_.setAttribute("position",new rn(y,3)),_.setAttribute("color",new rn(v,3)),super(_,new so({vertexColors:!0,toneMapped:!1})),this.type="GridHelper"}}.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")},class sKe extends od{constructor(l){const a=Ire(l),h=new Mn,d=[],f=[],m=new At(0,0,1),g=new At(0,1,0);for(let v=0;v<a.length;v++){const _=a[v];_.parent&&_.parent.isBone&&(d.push(0,0,0),d.push(0,0,0),f.push(m.r,m.g,m.b),f.push(g.r,g.g,g.b))}h.setAttribute("position",new rn(d,3)),h.setAttribute("color",new rn(f,3)),super(h,new so({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0})),this.type="SkeletonHelper",this.isSkeletonHelper=!0,this.root=l,this.bones=a,this.matrix=l.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(l){const a=this.bones,h=this.geometry,d=h.getAttribute("position");iB.copy(this.root.matrixWorld).invert();for(let f=0,m=0;f<a.length;f++){const g=a[f];g.parent&&g.parent.isBone&&(DA.multiplyMatrices(iB,g.matrixWorld),lp.setFromMatrixPosition(DA),d.setXYZ(m,lp.x,lp.y,lp.z),DA.multiplyMatrices(iB,g.parent.matrixWorld),lp.setFromMatrixPosition(DA),d.setXYZ(m+1,lp.x,lp.y,lp.z),m+=2)}h.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(l)}}.prototype.update=function(){console.error("THREE.SkeletonHelper: update() no longer needs to be called.")},ud.prototype.extractUrlBase=function(c){return console.warn("THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead."),Zu.extractUrlBase(c)},ud.Handlers={add:function(){console.error("THREE.Loader: Handlers.add() has been removed. Use LoadingManager.addHandler() instead.")},get:function(){console.error("THREE.Loader: Handlers.get() has been removed. Use LoadingManager.getHandler() instead.")}},E1.prototype.center=function(c){return console.warn("THREE.Box2: .center() has been renamed to .getCenter()."),this.getCenter(c)},E1.prototype.empty=function(){return console.warn("THREE.Box2: .empty() has been renamed to .isEmpty()."),this.isEmpty()},E1.prototype.isIntersectionBox=function(c){return console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(c)},E1.prototype.size=function(c){return console.warn("THREE.Box2: .size() has been renamed to .getSize()."),this.getSize(c)},pl.prototype.center=function(c){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(c)},pl.prototype.empty=function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()},pl.prototype.isIntersectionBox=function(c){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(c)},pl.prototype.isIntersectionSphere=function(c){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(c)},pl.prototype.size=function(c){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(c)},Yf.prototype.empty=function(){return console.warn("THREE.Sphere: .empty() has been renamed to .isEmpty()."),this.isEmpty()},UD.prototype.setFromMatrix=function(c){return console.warn("THREE.Frustum: .setFromMatrix() has been renamed to .setFromProjectionMatrix()."),this.setFromProjectionMatrix(c)},ro.prototype.flattenToArrayOffset=function(c,l){return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(c,l)},ro.prototype.multiplyVector3=function(c){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),c.applyMatrix3(this)},ro.prototype.multiplyVector3Array=function(){console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")},ro.prototype.applyToBufferAttribute=function(c){return console.warn("THREE.Matrix3: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix3( matrix ) instead."),c.applyMatrix3(this)},ro.prototype.applyToVector3Array=function(){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")},ro.prototype.getInverse=function(c){return console.warn("THREE.Matrix3: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead."),this.copy(c).invert()},nn.prototype.extractPosition=function(c){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(c)},nn.prototype.flattenToArrayOffset=function(c,l){return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(c,l)},nn.prototype.getPosition=function(){return console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),(new te).setFromMatrixColumn(this,3)},nn.prototype.setRotationFromQuaternion=function(c){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(c)},nn.prototype.multiplyToArray=function(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")},nn.prototype.multiplyVector3=function(c){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead."),c.applyMatrix4(this)},nn.prototype.multiplyVector4=function(c){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),c.applyMatrix4(this)},nn.prototype.multiplyVector3Array=function(){console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")},nn.prototype.rotateAxis=function(c){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),c.transformDirection(this)},nn.prototype.crossVector=function(c){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),c.applyMatrix4(this)},nn.prototype.translate=function(){console.error("THREE.Matrix4: .translate() has been removed.")},nn.prototype.rotateX=function(){console.error("THREE.Matrix4: .rotateX() has been removed.")},nn.prototype.rotateY=function(){console.error("THREE.Matrix4: .rotateY() has been removed.")},nn.prototype.rotateZ=function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")},nn.prototype.rotateByAxis=function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")},nn.prototype.applyToBufferAttribute=function(c){return console.warn("THREE.Matrix4: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix4( matrix ) instead."),c.applyMatrix4(this)},nn.prototype.applyToVector3Array=function(){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")},nn.prototype.makeFrustum=function(c,l,a,h,d,f){return console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead."),this.makePerspective(c,l,h,a,d,f)},nn.prototype.getInverse=function(c){return console.warn("THREE.Matrix4: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead."),this.copy(c).invert()},id.prototype.isIntersectionLine=function(c){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(c)},Hs.prototype.multiplyVector3=function(c){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),c.applyQuaternion(this)},Hs.prototype.inverse=function(){return console.warn("THREE.Quaternion: .inverse() has been renamed to invert()."),this.invert()},Xm.prototype.isIntersectionBox=function(c){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(c)},Xm.prototype.isIntersectionPlane=function(c){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(c)},Xm.prototype.isIntersectionSphere=function(c){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(c)},As.prototype.area=function(){return console.warn("THREE.Triangle: .area() has been renamed to .getArea()."),this.getArea()},As.prototype.barycoordFromPoint=function(c,l){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),this.getBarycoord(c,l)},As.prototype.midpoint=function(c){return console.warn("THREE.Triangle: .midpoint() has been renamed to .getMidpoint()."),this.getMidpoint(c)},As.prototypenormal=function(c){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),this.getNormal(c)},As.prototype.plane=function(c){return console.warn("THREE.Triangle: .plane() has been renamed to .getPlane()."),this.getPlane(c)},As.barycoordFromPoint=function(c,l,a,h,d){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),As.getBarycoord(c,l,a,h,d)},As.normal=function(c,l,a,h){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),As.getNormal(c,l,a,h)},qu.prototype.extractAllPoints=function(c){return console.warn("THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead."),this.extractPoints(c)},qu.prototype.extrude=function(c){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new ld(this,c)},qu.prototype.makeGeometry=function(c){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new S1(this,c)},Je.prototype.fromAttribute=function(c,l,a){return console.warn("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(c,l,a)},Je.prototype.distanceToManhattan=function(c){return console.warn("THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(c)},Je.prototype.lengthManhattan=function(){return console.warn("THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()},te.prototype.setEulerFromRotationMatrix=function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},te.prototype.setEulerFromQuaternion=function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},te.prototype.getPositionFromMatrix=function(c){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(c)},te.prototype.getScaleFromMatrix=function(c){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(c)},te.prototype.getColumnFromMatrix=function(c,l){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(l,c)},te.prototype.applyProjection=function(c){return console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead."),this.applyMatrix4(c)},te.prototype.fromAttribute=function(c,l,a){return console.warn("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(c,l,a)},te.prototype.distanceToManhattan=function(c){return console.warn("THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(c)},te.prototype.lengthManhattan=function(){return console.warn("THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()},ai.prototype.fromAttribute=function(c,l,a){return console.warn("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(c,l,a)},ai.prototype.lengthManhattan=function(){return console.warn("THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()},Wr.prototype.getChildByName=function(c){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(c)},Wr.prototype.renderDepth=function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},Wr.prototype.translate=function(c,l){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(l,c)},Wr.prototype.getWorldRotation=function(){console.error("THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.")},Wr.prototype.applyMatrix=function(c){return console.warn("THREE.Object3D: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(c)},Object.defineProperties(Wr.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(c){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=c}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}}),ds.prototype.setDrawMode=function(){console.error("THREE.Mesh: .setDrawMode() has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")},Object.defineProperties(ds.prototype,{drawMode:{get:function(){return console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode."),0},set:function(){console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")}}}),ZD.prototype.initBones=function(){console.error("THREE.SkinnedMesh: initBones() has been removed.")},Rs.prototype.setLens=function(c,l){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),void 0!==l&&(this.filmGauge=l),this.setFocalLength(c)},Object.defineProperties(Yu.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(c){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=c}},shadowCameraLeft:{set:function(c){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=c}},shadowCameraRight:{set:function(c){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=c}},shadowCameraTop:{set:function(c){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=c}},shadowCameraBottom:{set:function(c){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=c}},shadowCameraNear:{set:function(c){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=c}},shadowCameraFar:{set:function(c){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=c}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(c){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=c}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(c){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=c}},shadowMapHeight:{set:function(c){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=c}}}),Object.defineProperties(ii.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),this.array.length}},dynamic:{get:function(){return console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.usage===$T},set:function(){console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.setUsage($T)}}}),ii.prototype.setDynamic=function(c){return console.warn("THREE.BufferAttribute: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(!0===c?$T:qT),this},ii.prototype.copyIndicesArray=function(){console.error("THREE.BufferAttribute: .copyIndicesArray() has been removed.")},ii.prototype.setArray=function(){console.error("THREE.BufferAttribute: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")},Mn.prototype.addIndex=function(c){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(c)},Mn.prototype.addAttribute=function(c,l){return console.warn("THREE.BufferGeometry: .addAttribute() has been renamed to .setAttribute()."),l&&l.isBufferAttribute||l&&l.isInterleavedBufferAttribute?"index"===c?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),this.setIndex(l),this):this.setAttribute(c,l):(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.setAttribute(c,new ii(arguments[1],arguments[2])))},Mn.prototype.addDrawCall=function(c,l,a){void 0!==a&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(c,l)},Mn.prototype.clearDrawCalls=function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()},Mn.prototype.computeOffsets=function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")},Mn.prototype.removeAttribute=function(c){return console.warn("THREE.BufferGeometry: .removeAttribute() has been renamed to .deleteAttribute()."),this.deleteAttribute(c)},Mn.prototype.applyMatrix=function(c){return console.warn("THREE.BufferGeometry: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(c)},Object.defineProperties(Mn.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}}),Ym.prototype.setDynamic=function(c){return console.warn("THREE.InterleavedBuffer: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(!0===c?$T:qT),this},Ym.prototype.setArray=function(){console.error("THREE.InterleavedBuffer: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")},ld.prototype.getArrays=function(){console.error("THREE.ExtrudeGeometry: .getArrays() has been removed.")},ld.prototype.addShapeList=function(){console.error("THREE.ExtrudeGeometry: .addShapeList() has been removed.")},ld.prototype.addShape=function(){console.error("THREE.ExtrudeGeometry: .addShape() has been removed.")},l1.prototype.dispose=function(){console.error("THREE.Scene: .dispose() has been removed.")},nB.prototype.onUpdate=function(){return console.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead."),this},Object.defineProperties(Is.prototype,{wrapAround:{get:function(){console.warn("THREE.Material: .wrapAround has been removed.")},set:function(){console.warn("THREE.Material: .wrapAround has been removed.")}},overdraw:{get:function(){console.warn("THREE.Material: .overdraw has been removed.")},set:function(){console.warn("THREE.Material: .overdraw has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE.Material: .wrapRGB has been removed."),new At}},shading:{get:function(){console.error("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.")},set:function(c){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=1===c}},stencilMask:{get:function(){return console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask},set:function(c){console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask=c}},vertexTangents:{get:function(){console.warn("THREE."+this.type+": .vertexTangents has been removed.")},set:function(){console.warn("THREE."+this.type+": .vertexTangents has been removed.")}}}),Object.defineProperties(rd.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(c){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=c}}}),Kr.prototype.clearTarget=function(c,l,a,h){console.warn("THREE.WebGLRenderer: .clearTarget() has been deprecated. Use .setRenderTarget() and .clear() instead."),this.setRenderTarget(c),this.clear(l,a,h)},Kr.prototype.animate=function(c){console.warn("THREE.WebGLRenderer: .animate() is now .setAnimationLoop()."),this.setAnimationLoop(c)},Kr.prototype.getCurrentRenderTarget=function(){return console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget()."),this.getRenderTarget()},Kr.prototype.getMaxAnisotropy=function(){return console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy()."),this.capabilities.getMaxAnisotropy()},Kr.prototype.getPrecision=function(){return console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision."),this.capabilities.precision},Kr.prototype.resetGLState=function(){return console.warn("THREE.WebGLRenderer: .resetGLState() is now .state.reset()."),this.state.reset()},Kr.prototype.supportsFloatTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")},Kr.prototype.supportsHalfFloatTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")},Kr.prototype.supportsStandardDerivatives=function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")},Kr.prototype.supportsCompressedTextureS3TC=function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")},Kr.prototype.supportsCompressedTexturePVRTC=function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")},Kr.prototype.supportsBlendMinMax=function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")},Kr.prototype.supportsVertexTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures},Kr.prototype.supportsInstancedArrays=function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")},Kr.prototype.enableScissorTest=function(c){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(c)},Kr.prototype.initMaterial=function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},Kr.prototype.addPrePlugin=function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},Kr.prototype.addPostPlugin=function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},Kr.prototype.updateShadowMap=function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")},Kr.prototype.setFaceCulling=function(){console.warn("THREE.WebGLRenderer: .setFaceCulling() has been removed.")},Kr.prototype.allocTextureUnit=function(){console.warn("THREE.WebGLRenderer: .allocTextureUnit() has been removed.")},Kr.prototype.setTexture=function(){console.warn("THREE.WebGLRenderer: .setTexture() has been removed.")},Kr.prototype.setTexture2D=function(){console.warn("THREE.WebGLRenderer: .setTexture2D() has been removed.")},Kr.prototype.setTextureCube=function(){console.warn("THREE.WebGLRenderer: .setTextureCube() has been removed.")},Kr.prototype.getActiveMipMapLevel=function(){return console.warn("THREE.WebGLRenderer: .getActiveMipMapLevel() is now .getActiveMipmapLevel()."),this.getActiveMipmapLevel()},Object.defineProperties(Kr.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(c){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=c}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(c){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=c}},shadowMapCullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")}},context:{get:function(){return console.warn("THREE.WebGLRenderer: .context has been removed. Use .getContext() instead."),this.getContext()}},vr:{get:function(){return console.warn("THREE.WebGLRenderer: .vr has been renamed to .xr"),this.xr}},gammaInput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead."),!1},set:function(){console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead.")}},gammaOutput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),!1},set:function(c){console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),this.outputEncoding=!0===c?di:Wf}},toneMappingWhitePoint:{get:function(){return console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed."),1},set:function(){console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed.")}},gammaFactor:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaFactor has been removed."),2},set:function(){console.warn("THREE.WebGLRenderer: .gammaFactor has been removed.")}}}),Object.defineProperties(une.prototype,{cullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")}},renderReverseSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")}},renderSingleSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")}}}),Object.defineProperties(ql.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(c){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=c}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(c){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=c}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(c){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=c}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(c){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=c}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(c){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=c}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(c){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=c}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(c){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=c}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(c){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=c}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(c){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=c}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(c){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=c}}}),class UZe extends Wr{constructor(l){super(),this.type="Audio",this.listener=l,this.context=l.context,this.gain=this.context.createGain(),this.gain.connect(l.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(l){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=l,this.connect(),this}setMediaElementSource(l){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(l),this.connect(),this}setMediaStreamSource(l){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(l),this.connect(),this}setBuffer(l){return this.buffer=l,this.sourceType="buffer",this.autoplay&&this.play(),this}play(l=0){if(!0===this.isPlaying)return void console.warn("THREE.Audio: Audio is already playing.");if(!1===this.hasPlaybackControl)return void console.warn("THREE.Audio: this Audio has no playback control.");this._startedAt=this.context.currentTime+l;const a=this.context.createBufferSource();return a.buffer=this.buffer,a.loop=this.loop,a.loopStart=this.loopStart,a.loopEnd=this.loopEnd,a.onended=this.onEnded.bind(this),a.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=a,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(!1!==this.hasPlaybackControl)return!0===this.isPlaying&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,!0===this.loop&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this;console.warn("THREE.Audio: this Audio has no playback control.")}stop(){if(!1!==this.hasPlaybackControl)return this._progress=0,this.source.stop(),this.source.onended=null,this.isPlaying=!1,this;console.warn("THREE.Audio: this Audio has no playback control.")}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let l=1,a=this.filters.length;l<a;l++)this.filters[l-1].connect(this.filters[l]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let l=1,a=this.filters.length;l<a;l++)this.filters[l-1].disconnect(this.filters[l]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}getFilters(){return this.filters}setFilters(l){return l||(l=[]),!0===this._connected?(this.disconnect(),this.filters=l.slice(),this.connect()):this.filters=l.slice(),this}setDetune(l){if(this.detune=l,void 0!==this.source.detune)return!0===this.isPlaying&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(l){return this.setFilters(l?[l]:[])}setPlaybackRate(l){if(!1!==this.hasPlaybackControl)return this.playbackRate=l,!0===this.isPlaying&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this;console.warn("THREE.Audio: this Audio has no playback control.")}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return!1===this.hasPlaybackControl?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(l){if(!1!==this.hasPlaybackControl)return this.loop=l,!0===this.isPlaying&&(this.source.loop=this.loop),this;console.warn("THREE.Audio: this Audio has no playback control.")}setLoopStart(l){return this.loopStart=l,this}setLoopEnd(l){return this.loopEnd=l,this}getVolume(){return this.gain.gain.value}setVolume(l){return this.gain.gain.setTargetAtTime(l,this.context.currentTime,.01),this}}.prototype.load=function(c){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");const l=this;return(new NZe).load(c,function(h){l.setBuffer(h)}),this},vV.prototype.updateCubeMap=function(c,l){return console.warn("THREE.CubeCamera: .updateCubeMap() is now .update()."),this.update(c,l)},vV.prototype.clear=function(c,l,a,h){return console.warn("THREE.CubeCamera: .clear() is now .renderTarget.clear()."),this.renderTarget.clear(c,l,a,h)},zm.crossOrigin=void 0,zm.loadTexture=function(c,l,a,h){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");const d=new rre;d.setCrossOrigin(this.crossOrigin);const f=d.load(c,a,void 0,h);return l&&(f.mapping=l),f},zm.loadTextureCube=function(c,l,a,h){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");const d=new nre;d.setCrossOrigin(this.crossOrigin);const f=d.load(c,a,void 0,h);return l&&(f.mapping=l),f},zm.loadCompressedTexture=function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")},zm.loadCompressedTextureCube=function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:"137"}})),typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__="137");const kre={type:"change"},oB={type:"start"},Vre={type:"end"};class hKe extends Xf{constructor(l,a){super(),void 0===a&&console.warn('THREE.OrbitControls: The second parameter "domElement" is now mandatory.'),a===document&&console.error('THREE.OrbitControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.'),this.object=l,this.domElement=a,this.domElement.style.touchAction="none",this.enabled=!0,this.target=new te,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},this.mouseButtons={LEFT:0,MIDDLE:1,RIGHT:2},this.touches={ONE:0,TWO:2},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this._domElementKeyEvents=null,this.getPolarAngle=function(){return g.phi},this.getAzimuthalAngle=function(){return g.theta},this.getDistance=function(){return this.object.position.distanceTo(this.target)},this.listenToKeyEvents=function(me){me.addEventListener("keydown",lr),this._domElementKeyEvents=me},this.saveState=function(){h.target0.copy(h.target),h.position0.copy(h.object.position),h.zoom0=h.object.zoom},this.reset=function(){h.target.copy(h.target0),h.object.position.copy(h.position0),h.object.zoom=h.zoom0,h.object.updateProjectionMatrix(),h.dispatchEvent(kre),h.update(),f=d.NONE},this.update=function(){const me=new te,je=(new Hs).setFromUnitVectors(l.up,new te(0,1,0)),lt=je.clone().invert(),yt=new te,_e=new Hs,Tt=2*Math.PI;return function(){const sn=h.object.position;me.copy(sn).sub(h.target),me.applyQuaternion(je),g.setFromVector3(me),h.autoRotate&&f===d.NONE&&K(function z(){return 2*Math.PI/60/60*h.autoRotateSpeed}()),h.enableDamping?(g.theta+=y.theta*h.dampingFactor,g.phi+=y.phi*h.dampingFactor):(g.theta+=y.theta,g.phi+=y.phi);let He=h.minAzimuthAngle,Yt=h.maxAzimuthAngle;return isFinite(He)&&isFinite(Yt)&&(He<-Math.PI?He+=Tt:He>Math.PI&&(He-=Tt),Yt<-Math.PI?Yt+=Tt:Yt>Math.PI&&(Yt-=Tt),g.theta=He<=Yt?Math.max(He,Math.min(Yt,g.theta)):g.theta>(He+Yt)/2?Math.max(He,g.theta):Math.min(Yt,g.theta)),g.phi=Math.max(h.minPolarAngle,Math.min(h.maxPolarAngle,g.phi)),g.makeSafe(),g.radius*=v,g.radius=Math.max(h.minDistance,Math.min(h.maxDistance,g.radius)),!0===h.enableDamping?h.target.addScaledVector(_,h.dampingFactor):h.target.add(_),me.setFromSpherical(g),me.applyQuaternion(lt),sn.copy(h.target).add(me),h.object.lookAt(h.target),!0===h.enableDamping?(y.theta*=1-h.dampingFactor,y.phi*=1-h.dampingFactor,_.multiplyScalar(1-h.dampingFactor)):(y.set(0,0,0),_.set(0,0,0)),v=1,!!(S||yt.distanceToSquared(h.object.position)>m||8*(1-_e.dot(h.object.quaternion))>m)&&(h.dispatchEvent(kre),yt.copy(h.object.position),_e.copy(h.object.quaternion),S=!1,!0)}}(),this.dispose=function(){h.domElement.removeEventListener("contextmenu",ze),h.domElement.removeEventListener("pointerdown",at),h.domElement.removeEventListener("pointercancel",Jt),h.domElement.removeEventListener("wheel",ar),h.domElement.removeEventListener("pointermove",Rt),h.domElement.removeEventListener("pointerup",bt),null!==h._domElementKeyEvents&&h._domElementKeyEvents.removeEventListener("keydown",lr)};const h=this,d={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let f=d.NONE;const m=1e-6,g=new Ere,y=new Ere;let v=1;const _=new te;let S=!1;const b=new Je,T=new Je,x=new Je,E=new Je,D=new Je,I=new Je,M=new Je,L=new Je,P=new Je,F=[],V={};function q(){return Math.pow(.95,h.zoomSpeed)}function K(me){y.theta-=me}function se(me){y.phi-=me}const W=function(){const me=new te;return function(lt,yt){me.setFromMatrixColumn(yt,0),me.multiplyScalar(-lt),_.add(me)}}(),Q=function(){const me=new te;return function(lt,yt){!0===h.screenSpacePanning?me.setFromMatrixColumn(yt,1):(me.setFromMatrixColumn(yt,0),me.crossVectors(h.object.up,me)),me.multiplyScalar(lt),_.add(me)}}(),ie=function(){const me=new te;return function(lt,yt){const _e=h.domElement;if(h.object.isPerspectiveCamera){me.copy(h.object.position).sub(h.target);let It=me.length();It*=Math.tan(h.object.fov/2*Math.PI/180),W(2*lt*It/_e.clientHeight,h.object.matrix),Q(2*yt*It/_e.clientHeight,h.object.matrix)}else h.object.isOrthographicCamera?(W(lt*(h.object.right-h.object.left)/h.object.zoom/_e.clientWidth,h.object.matrix),Q(yt*(h.object.top-h.object.bottom)/h.object.zoom/_e.clientHeight,h.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),h.enablePan=!1)}}();function ae(me){h.object.isPerspectiveCamera?v/=me:h.object.isOrthographicCamera?(h.object.zoom=Math.max(h.minZoom,Math.min(h.maxZoom,h.object.zoom*me)),h.object.updateProjectionMatrix(),S=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),h.enableZoom=!1)}function he(me){h.object.isPerspectiveCamera?v*=me:h.object.isOrthographicCamera?(h.object.zoom=Math.max(h.minZoom,Math.min(h.maxZoom,h.object.zoom/me)),h.object.updateProjectionMatrix(),S=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),h.enableZoom=!1)}function J(me){b.set(me.clientX,me.clientY)}function be(me){E.set(me.clientX,me.clientY)}function Ve(){1===F.length?b.set(F[0].pageX,F[0].pageY):b.set(.5*(F[0].pageX+F[1].pageX),.5*(F[0].pageY+F[1].pageY))}function De(){1===F.length?E.set(F[0].pageX,F[0].pageY):E.set(.5*(F[0].pageX+F[1].pageX),.5*(F[0].pageY+F[1].pageY))}function en(){const me=F[0].pageX-F[1].pageX,je=F[0].pageY-F[1].pageY,lt=Math.sqrt(me*me+je*je);M.set(0,lt)}function ht(me){if(1==F.length)T.set(me.pageX,me.pageY);else{const lt=qt(me);T.set(.5*(me.pageX+lt.x),.5*(me.pageY+lt.y))}x.subVectors(T,b).multiplyScalar(h.rotateSpeed);const je=h.domElement;K(2*Math.PI*x.x/je.clientHeight),se(2*Math.PI*x.y/je.clientHeight),b.copy(T)}function an(me){if(1===F.length)D.set(me.pageX,me.pageY);else{const je=qt(me);D.set(.5*(me.pageX+je.x),.5*(me.pageY+je.y))}I.subVectors(D,E).multiplyScalar(h.panSpeed),ie(I.x,I.y),E.copy(D)}function Wt(me){const je=qt(me),lt=me.pageX-je.x,yt=me.pageY-je.y,_e=Math.sqrt(lt*lt+yt*yt);L.set(0,_e),P.set(0,Math.pow(L.y/M.y,h.zoomSpeed)),ae(P.y),M.copy(L)}function at(me){!1!==h.enabled&&(0===F.length&&(h.domElement.setPointerCapture(me.pointerId),h.domElement.addEventListener("pointermove",Rt),h.domElement.addEventListener("pointerup",bt)),function Ct(me){F.push(me)}(me),"touch"===me.pointerType?function pe(me){switch(Xe(me),F.length){case 1:switch(h.touches.ONE){case 0:if(!1===h.enableRotate)return;Ve(),f=d.TOUCH_ROTATE;break;case 1:if(!1===h.enablePan)return;De(),f=d.TOUCH_PAN;break;default:f=d.NONE}break;case 2:switch(h.touches.TWO){case 2:if(!1===h.enableZoom&&!1===h.enablePan)return;(function ut(){h.enableZoom&&en(),h.enablePan&&De()})(),f=d.TOUCH_DOLLY_PAN;break;case 3:if(!1===h.enableZoom&&!1===h.enableRotate)return;(function Fe(){h.enableZoom&&en(),h.enableRotate&&Ve()})(),f=d.TOUCH_DOLLY_ROTATE;break;default:f=d.NONE}break;default:f=d.NONE}f!==d.NONE&&h.dispatchEvent(oB)}(me):function Ye(me){let je;switch(me.button){case 0:je=h.mouseButtons.LEFT;break;case 1:je=h.mouseButtons.MIDDLE;break;case 2:je=h.mouseButtons.RIGHT;break;default:je=-1}switch(je){case 1:if(!1===h.enableZoom)return;(function ce(me){M.set(me.clientX,me.clientY)})(me),f=d.DOLLY;break;case 0:if(me.ctrlKey||me.metaKey||me.shiftKey){if(!1===h.enablePan)return;be(me),f=d.PAN}else{if(!1===h.enableRotate)return;J(me),f=d.ROTATE}break;case 2:if(me.ctrlKey||me.metaKey||me.shiftKey){if(!1===h.enableRotate)return;J(me),f=d.ROTATE}else{if(!1===h.enablePan)return;be(me),f=d.PAN}break;default:f=d.NONE}f!==d.NONE&&h.dispatchEvent(oB)}(me))}function Rt(me){!1!==h.enabled&&("touch"===me.pointerType?function ne(me){switch(Xe(me),f){case d.TOUCH_ROTATE:if(!1===h.enableRotate)return;ht(me),h.update();break;case d.TOUCH_PAN:if(!1===h.enablePan)return;an(me),h.update();break;case d.TOUCH_DOLLY_PAN:if(!1===h.enableZoom&&!1===h.enablePan)return;(function Qe(me){h.enableZoom&&Wt(me),h.enablePan&&an(me)})(me),h.update();break;case d.TOUCH_DOLLY_ROTATE:if(!1===h.enableZoom&&!1===h.enableRotate)return;(function dt(me){h.enableZoom&&Wt(me),h.enableRotate&&ht(me)})(me),h.update();break;default:f=d.NONE}}(me):function Cn(me){if(!1!==h.enabled)switch(f){case d.ROTATE:if(!1===h.enableRotate)return;!function we(me){T.set(me.clientX,me.clientY),x.subVectors(T,b).multiplyScalar(h.rotateSpeed);const je=h.domElement;K(2*Math.PI*x.x/je.clientHeight),se(2*Math.PI*x.y/je.clientHeight),b.copy(T),h.update()}(me);break;case d.DOLLY:if(!1===h.enableZoom)return;!function Ce(me){L.set(me.clientX,me.clientY),P.subVectors(L,M),P.y>0?ae(q()):P.y<0&&he(q()),M.copy(L),h.update()}(me);break;case d.PAN:if(!1===h.enablePan)return;!function Te(me){D.set(me.clientX,me.clientY),I.subVectors(D,E).multiplyScalar(h.panSpeed),ie(I.x,I.y),E.copy(D),h.update()}(me)}}(me))}function bt(me){$t(me),0===F.length&&(h.domElement.releasePointerCapture(me.pointerId),h.domElement.removeEventListener("pointermove",Rt),h.domElement.removeEventListener("pointerup",bt)),h.dispatchEvent(Vre),f=d.NONE}function Jt(me){$t(me)}function ar(me){!1===h.enabled||!1===h.enableZoom||f!==d.NONE||(me.preventDefault(),h.dispatchEvent(oB),function fe(me){me.deltaY<0?he(q()):me.deltaY>0&&ae(q()),h.update()}(me),h.dispatchEvent(Vre))}function lr(me){!1===h.enabled||!1===h.enablePan||function $e(me){let je=!1;switch(me.code){case h.keys.UP:ie(0,h.keyPanSpeed),je=!0;break;case h.keys.BOTTOM:ie(0,-h.keyPanSpeed),je=!0;break;case h.keys.LEFT:ie(h.keyPanSpeed,0),je=!0;break;case h.keys.RIGHT:ie(-h.keyPanSpeed,0),je=!0}je&&(me.preventDefault(),h.update())}(me)}function ze(me){!1!==h.enabled&&me.preventDefault()}function $t(me){delete V[me.pointerId];for(let je=0;je<F.length;je++)if(F[je].pointerId==me.pointerId)return void F.splice(je,1)}function Xe(me){let je=V[me.pointerId];void 0===je&&(je=new Je,V[me.pointerId]=je),je.set(me.pageX,me.pageY)}function qt(me){return V[(me.pointerId===F[0].pointerId?F[1]:F[0]).pointerId]}h.domElement.addEventListener("contextmenu",ze),h.domElement.addEventListener("pointerdown",at),h.domElement.addEventListener("pointercancel",Jt),h.domElement.addEventListener("wheel",ar,{passive:!1}),this.update()}}function aB(c){const a=c.map(h=>h**2).reduce((h,d)=>h+d,0);return Math.sqrt(a)}function lB(c){return c%360*(2*Math.PI)/360}function Bre(c,l){return c/2/Math.tan(lB(l/2))}class gKe{constructor(l=360/(2*Math.PI),a=10,h){this.mapRadiusMU=l,this.mapWidthMU=2*Math.PI*l,this.mapUnitsPerSphereUnits=l/a,this.sphereRadiusSU=a,this.sphereCircumferenceSU=2*Math.PI*a,this.sphereUnitsPerMapUnits=a/l,this.fovDeg=h}mapWidth2SphereHeight(l){const h=Bre(l,this.fovDeg)*this.sphereUnitsPerMapUnits;return this.sphereRadiusSU+h}sphereHeight2mapWidth(l){return function fKe(c,l){return 2*c*Math.tan(lB(l/2))}((l-this.sphereRadiusSU)*this.mapUnitsPerSphereUnits,this.fovDeg)}sphereHeight2zoom(l){const a=this.sphereHeight2mapWidth(l);return this.widthMU2Zoom(a)}zoom2sphereHeight(l){const a=this.zoom2WidthMU(l);return this.mapWidth2SphereHeight(a)}spherePos2zoom(l,a,h){const d=aB([l,a,h]);return this.sphereHeight2zoom(d)}zoom2WidthMU(l){return function pKe(c,l){return l*Math.pow(.5,c)}(l,this.mapWidthMU)}widthMU2Zoom(l){return function mKe(c,l){return Math.log2(l/c)}(l,this.mapWidthMU)}lonLatZoom2XYZ(l,a,h){const d=this.mu2rad(l),f=this.mu2rad(a),m=this.zoom2WidthMU(h),g=this.mapWidth2SphereHeight(m);return[g*Math.cos(f)*Math.sin(d),g*Math.sin(f),g*Math.cos(f)*Math.cos(d)]}xyz2LonLatZoom(l,a,h){const d=Math.asin(a/aB([l,a,h])),f=Math.asin(l/aB([l,h])),m=180*d/Math.PI;let g=180*f/Math.PI;return h<=0&&(g=180-g),[g,m,this.spherePos2zoom(l,a,h)]}mu2rad(l){return lB(l)}rad2mu(l){return function dKe(c){return c%(2*Math.PI)*360/(2*Math.PI)}(l)}}class yKe extends ds{constructor(l,a){const h=new Pne(l);super(a,new rd({vertexShader:"\n        varying vec2 vUv;\n        uniform vec4 bbox;\n        uniform vec2 textureSize;\n\n        vec2 positionToLonLat(vec3 position) {\n          float pi = 3.141592653589793;\n\n          float latRad = asin(position.y / length(position));\n          float latDeg = 180.0 * latRad / pi;\n\n          float lonRad = asin(position.x / length(position.xz));\n          float lonDeg = 180.0 * lonRad / pi;\n          if (position.z <= 0.0) {\n            lonDeg = 180.0 - lonDeg;\n          }\n          return vec2(lonDeg, latDeg);\n        }\n\n        void main() {\n          vec2 lonLat = positionToLonLat(position);\n          float u = (lonLat.x - bbox.x) / (bbox.z - bbox.x);\n          float v = (lonLat.y - bbox.y) / (bbox.w - bbox.y);\n          if  (u < 0.0) {\n            u = ((360.0 + lonLat.x) - bbox.x) / (bbox.z - bbox.x);\n          }\n          if (u > 1.0) {\n            u = ((lonLat.x - 360.0) - bbox.x) / (bbox.z - bbox.x);\n          }\n          vUv = vec2(u, v);\n          gl_Position = projectionMatrix * viewMatrix * modelMatrix * vec4(position, 1.0);\n        }\n        ",fragmentShader:"\n        uniform sampler2D texture1;\n        varying vec2 vUv;\n\n        void main() {\n          gl_FragColor = texture2D(texture1, vUv);\n          if (vUv.x > 1.0 || vUv.x < 0.0 || vUv.y > 1.0 || vUv.y < 0.0) {\n            gl_FragColor = vec4(0.3, 0.3, 0.3, 1.0); // <-- better: retrieve texture2D from *previous* texture.\n          }\n        }\n        ",uniforms:{texture1:{value:h},bbox:{value:[-180,-90,180,90]}}}))}perspectiveChanged(l){this.material.uniforms.bbox.value=l,this.material.uniforms.texture1.value.needsUpdate=!0}}let Ure=(()=>{class c{constructor(a,h){this.mapStateSvc=a,this.zone=h,this.subs=[],this.needsResize=!1,this.skyTexturePath="assets/image/zpos.png"}initScene(a,h,d){const f=new Kr({alpha:!0,antialias:!0,canvas:a});f.setSize(a.clientWidth,a.clientHeight,!1);const m=new l1,y=new Rs(50,a.clientWidth/a.clientHeight,.01,1e5);y.lookAt(0,0,0),y.position.set(-40,40,40);const v=new hKe(y,f.domElement),S=(new nre).load(new Array(6).fill(this.skyTexturePath));m.background=S;const b=document.createElement("canvas");!function QX(c,l,a,h=!1){const d=l.getContext("2d");if(!d)throw new Error("The target-canvas needs to use a 2d-context.");if(!l.width||!l.height)throw new Error("TargetCanvas: width or height have not been set.");d.clearRect(0,0,l.width,l.height);const f=c.getSize();c.getView().getResolution(),l.width=f[0],l.height=f[1];const g=cN(c.getLayers().getArray()),y=[];for(const v of g)if(v.getVisible()&&v.getOpacity()>0){const _=v.on("postrender",S=>{const T=S.context.canvas;d.drawImage(T,0,0,T.clientWidth,T.clientHeight,0,0,l.width,l.height)});Array.isArray(_)?_.map(S=>y.push(S)):y.push(_)}h?c.on("rendercomplete",v=>{a(l)}):c.once("rendercomplete",v=>{for(const _ of y)s9(_);a(l)}),c.renderSync()}(d,b,()=>{},!0);const T=new yKe(b,h.geometry);m.add(T);const x=new gKe(360/(2*Math.PI),15,50);d.on("postrender",E=>{const D=d.getView().calculateExtent(d.getSize()),[I,M]=d.getView().getCenter(),L=d.getView().getZoom();T.perspectiveChanged(D);const[P,F,V]=x.lonLatZoom2XYZ(I,M,L);y.position.set(P,F,V),y.lookAt(0,0,0)}),v.addEventListener("change",E=>{const D=y.position,[I,M,L]=x.xyz2LonLatZoom(D.x,D.y,D.z);this.mapStateSvc.setMapState({center:{lon:I,lat:M},zoom:L})}),this.zone.runOutsideAngular(()=>{!function OPe(c,l){const a=1e3/c;let d,f,m,h=a;const g=()=>{d=window.performance.now(),l(h),f=window.performance.now(),h=f-d,m=Math.max(a-h,0),setTimeout(()=>{requestAnimationFrame(g)},m)};g()}(30,E=>{this.needsResize&&((a.clientHeight!==a.height||a.clientWidth!==a.width)&&(f.setSize(a.clientWidth,a.clientHeight,!1),y.aspect=a.clientWidth/a.clientHeight,y.updateProjectionMatrix()),this.needsResize=!1),f.render(m,y)})})}onResize(a){this.needsResize=!0}ngOnDestroy(){this.subs.map(a=>a.unsubscribe())}}return c.\u0275fac=function(a){return new(a||c)(Ae(Zs),Ae(kn))},c.\u0275prov=Oe({token:c,factory:c.\u0275fac,providedIn:"root"}),c})();class vKe extends ud{constructor(l){super(l),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(a){return new TKe(a)}),this.register(function(a){return new DKe(a)}),this.register(function(a){return new AKe(a)}),this.register(function(a){return new wKe(a)}),this.register(function(a){return new CKe(a)}),this.register(function(a){return new xKe(a)}),this.register(function(a){return new EKe(a)}),this.register(function(a){return new MKe(a)}),this.register(function(a){return new SKe(a)}),this.register(function(a){return new IKe(a)})}load(l,a,h,d){const f=this;let m;m=""!==this.resourcePath?this.resourcePath:""!==this.path?this.path:Zu.extractUrlBase(l),this.manager.itemStart(l);const g=function(v){d?d(v):console.error(v),f.manager.itemError(l),f.manager.itemEnd(l)},y=new Zc(this.manager);y.setPath(this.path),y.setResponseType("arraybuffer"),y.setRequestHeader(this.requestHeader),y.setWithCredentials(this.withCredentials),y.load(l,function(v){try{f.parse(v,m,function(_){a(_),f.manager.itemEnd(l)},g)}catch(_){g(_)}},h,g)}setDRACOLoader(l){return this.dracoLoader=l,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(l){return this.ktx2Loader=l,this}setMeshoptDecoder(l){return this.meshoptDecoder=l,this}register(l){return-1===this.pluginCallbacks.indexOf(l)&&this.pluginCallbacks.push(l),this}unregister(l){return-1!==this.pluginCallbacks.indexOf(l)&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(l),1),this}parse(l,a,h,d){let f;const m={},g={};if("string"==typeof l)f=l;else if(Zu.decodeText(new Uint8Array(l,0,4))===Gre){try{m[Ar.KHR_BINARY_GLTF]=new RKe(l)}catch(S){return void(d&&d(S))}f=m[Ar.KHR_BINARY_GLTF].content}else f=Zu.decodeText(new Uint8Array(l));const y=JSON.parse(f);if(void 0===y.asset||y.asset.version[0]<2)return void(d&&d(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported.")));const v=new HKe(y,{path:a||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});v.fileLoader.setRequestHeader(this.requestHeader);for(let _=0;_<this.pluginCallbacks.length;_++){const S=this.pluginCallbacks[_](v);g[S.name]=S,m[S.name]=!0}if(y.extensionsUsed)for(let _=0;_<y.extensionsUsed.length;++_){const S=y.extensionsUsed[_],b=y.extensionsRequired||[];switch(S){case Ar.KHR_MATERIALS_UNLIT:m[S]=new bKe;break;case Ar.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:m[S]=new OKe;break;case Ar.KHR_DRACO_MESH_COMPRESSION:m[S]=new PKe(y,this.dracoLoader);break;case Ar.KHR_TEXTURE_TRANSFORM:m[S]=new LKe;break;case Ar.KHR_MESH_QUANTIZATION:m[S]=new NKe;break;default:b.indexOf(S)>=0&&void 0===g[S]&&console.warn('THREE.GLTFLoader: Unknown extension "'+S+'".')}}v.setExtensions(m),v.setPlugins(g),v.parse(h,d)}parseAsync(l,a){const h=this;return new Promise(function(d,f){h.parse(l,a,d,f)})}}function _Ke(){let c={};return{get:function(l){return c[l]},add:function(l,a){c[l]=a},remove:function(l){delete c[l]},removeAll:function(){c={}}}}const Ar={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:"KHR_materials_pbrSpecularGlossiness",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression"};class SKe{constructor(l){this.parser=l,this.name=Ar.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const l=this.parser,a=this.parser.json.nodes||[];for(let h=0,d=a.length;h<d;h++){const f=a[h];f.extensions&&f.extensions[this.name]&&void 0!==f.extensions[this.name].light&&l._addNodeRef(this.cache,f.extensions[this.name].light)}}_loadLight(l){const a=this.parser,h="light:"+l;let d=a.cache.get(h);if(d)return d;const f=a.json,y=((f.extensions&&f.extensions[this.name]||{}).lights||[])[l];let v;const _=new At(16777215);void 0!==y.color&&_.fromArray(y.color);const S=void 0!==y.range?y.range:0;switch(y.type){case"directional":v=new CA(_),v.target.position.set(0,0,-1),v.add(v.target);break;case"point":v=new JV(_),v.distance=S;break;case"spot":v=new KV(_),v.distance=S,y.spot=y.spot||{},y.spot.innerConeAngle=void 0!==y.spot.innerConeAngle?y.spot.innerConeAngle:0,y.spot.outerConeAngle=void 0!==y.spot.outerConeAngle?y.spot.outerConeAngle:Math.PI/4,v.angle=y.spot.outerConeAngle,v.penumbra=1-y.spot.innerConeAngle/y.spot.outerConeAngle,v.target.position.set(0,0,-1),v.add(v.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+y.type)}return v.position.set(0,0,0),v.decay=2,void 0!==y.intensity&&(v.intensity=y.intensity),v.name=a.createUniqueName(y.name||"light_"+l),d=Promise.resolve(v),a.cache.add(h,d),d}createNodeAttachment(l){const a=this,h=this.parser,f=h.json.nodes[l],g=(f.extensions&&f.extensions[this.name]||{}).light;return void 0===g?null:this._loadLight(g).then(function(y){return h._getNodeRef(a.cache,g,y)})}}class bKe{constructor(){this.name=Ar.KHR_MATERIALS_UNLIT}getMaterialType(){return gl}extendParams(l,a,h){const d=[];l.color=new At(1,1,1),l.opacity=1;const f=a.pbrMetallicRoughness;if(f){if(Array.isArray(f.baseColorFactor)){const m=f.baseColorFactor;l.color.fromArray(m),l.opacity=m[3]}void 0!==f.baseColorTexture&&d.push(h.assignTexture(l,"map",f.baseColorTexture))}return Promise.all(d)}}class TKe{constructor(l){this.parser=l,this.name=Ar.KHR_MATERIALS_CLEARCOAT}getMaterialType(l){const h=this.parser.json.materials[l];return h.extensions&&h.extensions[this.name]?ap:null}extendMaterialParams(l,a){const h=this.parser,d=h.json.materials[l];if(!d.extensions||!d.extensions[this.name])return Promise.resolve();const f=[],m=d.extensions[this.name];if(void 0!==m.clearcoatFactor&&(a.clearcoat=m.clearcoatFactor),void 0!==m.clearcoatTexture&&f.push(h.assignTexture(a,"clearcoatMap",m.clearcoatTexture)),void 0!==m.clearcoatRoughnessFactor&&(a.clearcoatRoughness=m.clearcoatRoughnessFactor),void 0!==m.clearcoatRoughnessTexture&&f.push(h.assignTexture(a,"clearcoatRoughnessMap",m.clearcoatRoughnessTexture)),void 0!==m.clearcoatNormalTexture&&(f.push(h.assignTexture(a,"clearcoatNormalMap",m.clearcoatNormalTexture)),void 0!==m.clearcoatNormalTexture.scale)){const g=m.clearcoatNormalTexture.scale;a.clearcoatNormalScale=new Je(g,g)}return Promise.all(f)}}class wKe{constructor(l){this.parser=l,this.name=Ar.KHR_MATERIALS_SHEEN}getMaterialType(l){const h=this.parser.json.materials[l];return h.extensions&&h.extensions[this.name]?ap:null}extendMaterialParams(l,a){const h=this.parser,d=h.json.materials[l];if(!d.extensions||!d.extensions[this.name])return Promise.resolve();const f=[];a.sheenColor=new At(0,0,0),a.sheenRoughness=0,a.sheen=1;const m=d.extensions[this.name];return void 0!==m.sheenColorFactor&&a.sheenColor.fromArray(m.sheenColorFactor),void 0!==m.sheenRoughnessFactor&&(a.sheenRoughness=m.sheenRoughnessFactor),void 0!==m.sheenColorTexture&&f.push(h.assignTexture(a,"sheenColorMap",m.sheenColorTexture)),void 0!==m.sheenRoughnessTexture&&f.push(h.assignTexture(a,"sheenRoughnessMap",m.sheenRoughnessTexture)),Promise.all(f)}}class CKe{constructor(l){this.parser=l,this.name=Ar.KHR_MATERIALS_TRANSMISSION}getMaterialType(l){const h=this.parser.json.materials[l];return h.extensions&&h.extensions[this.name]?ap:null}extendMaterialParams(l,a){const h=this.parser,d=h.json.materials[l];if(!d.extensions||!d.extensions[this.name])return Promise.resolve();const f=[],m=d.extensions[this.name];return void 0!==m.transmissionFactor&&(a.transmission=m.transmissionFactor),void 0!==m.transmissionTexture&&f.push(h.assignTexture(a,"transmissionMap",m.transmissionTexture)),Promise.all(f)}}class xKe{constructor(l){this.parser=l,this.name=Ar.KHR_MATERIALS_VOLUME}getMaterialType(l){const h=this.parser.json.materials[l];return h.extensions&&h.extensions[this.name]?ap:null}extendMaterialParams(l,a){const h=this.parser,d=h.json.materials[l];if(!d.extensions||!d.extensions[this.name])return Promise.resolve();const f=[],m=d.extensions[this.name];a.thickness=void 0!==m.thicknessFactor?m.thicknessFactor:0,void 0!==m.thicknessTexture&&f.push(h.assignTexture(a,"thicknessMap",m.thicknessTexture)),a.attenuationDistance=m.attenuationDistance||0;const g=m.attenuationColor||[1,1,1];return a.attenuationColor=new At(g[0],g[1],g[2]),Promise.all(f)}}class EKe{constructor(l){this.parser=l,this.name=Ar.KHR_MATERIALS_IOR}getMaterialType(l){const h=this.parser.json.materials[l];return h.extensions&&h.extensions[this.name]?ap:null}extendMaterialParams(l,a){const d=this.parser.json.materials[l];if(!d.extensions||!d.extensions[this.name])return Promise.resolve();const f=d.extensions[this.name];return a.ior=void 0!==f.ior?f.ior:1.5,Promise.resolve()}}class MKe{constructor(l){this.parser=l,this.name=Ar.KHR_MATERIALS_SPECULAR}getMaterialType(l){const h=this.parser.json.materials[l];return h.extensions&&h.extensions[this.name]?ap:null}extendMaterialParams(l,a){const h=this.parser,d=h.json.materials[l];if(!d.extensions||!d.extensions[this.name])return Promise.resolve();const f=[],m=d.extensions[this.name];a.specularIntensity=void 0!==m.specularFactor?m.specularFactor:1,void 0!==m.specularTexture&&f.push(h.assignTexture(a,"specularIntensityMap",m.specularTexture));const g=m.specularColorFactor||[1,1,1];return a.specularColor=new At(g[0],g[1],g[2]),void 0!==m.specularColorTexture&&f.push(h.assignTexture(a,"specularColorMap",m.specularColorTexture).then(function(y){y.encoding=di})),Promise.all(f)}}class DKe{constructor(l){this.parser=l,this.name=Ar.KHR_TEXTURE_BASISU}loadTexture(l){const a=this.parser,h=a.json,d=h.textures[l];if(!d.extensions||!d.extensions[this.name])return null;const m=h.images[d.extensions[this.name].source],g=a.options.ktx2Loader;if(!g){if(h.extensionsRequired&&h.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return a.loadTextureImage(l,m,g)}}class AKe{constructor(l){this.parser=l,this.name=Ar.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(l){const a=this.name,h=this.parser,d=h.json,f=d.textures[l];if(!f.extensions||!f.extensions[a])return null;const g=d.images[f.extensions[a].source];let y=h.textureLoader;if(g.uri){const v=h.options.manager.getHandler(g.uri);null!==v&&(y=v)}return this.detectSupport().then(function(v){if(v)return h.loadTextureImage(l,g,y);if(d.extensionsRequired&&d.extensionsRequired.indexOf(a)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return h.loadTexture(l)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(l){const a=new Image;a.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",a.onload=a.onerror=function(){l(1===a.height)}})),this.isSupported}}class IKe{constructor(l){this.name=Ar.EXT_MESHOPT_COMPRESSION,this.parser=l}loadBufferView(l){const a=this.parser.json,h=a.bufferViews[l];if(h.extensions&&h.extensions[this.name]){const d=h.extensions[this.name],f=this.parser.getDependency("buffer",d.buffer),m=this.parser.options.meshoptDecoder;if(!m||!m.supported){if(a.extensionsRequired&&a.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return Promise.all([f,m.ready]).then(function(g){const y=d.byteOffset||0,v=d.byteLength||0,_=d.count,S=d.byteStride,b=new ArrayBuffer(_*S),T=new Uint8Array(g[0],y,v);return m.decodeGltfBuffer(new Uint8Array(b),_,S,T,d.mode,d.filter),b})}return null}}const Gre="glTF";class RKe{constructor(l){this.name=Ar.KHR_BINARY_GLTF,this.content=null,this.body=null;const a=new DataView(l,0,12);if(this.header={magic:Zu.decodeText(new Uint8Array(l.slice(0,4))),version:a.getUint32(4,!0),length:a.getUint32(8,!0)},this.header.magic!==Gre)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const h=this.header.length-12,d=new DataView(l,12);let f=0;for(;f<h;){const m=d.getUint32(f,!0);f+=4;const g=d.getUint32(f,!0);if(f+=4,1313821514===g){const y=new Uint8Array(l,12+f,m);this.content=Zu.decodeText(y)}else if(5130562===g){const y=12+f;this.body=l.slice(y,y+m)}f+=m}if(null===this.content)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class PKe{constructor(l,a){if(!a)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=Ar.KHR_DRACO_MESH_COMPRESSION,this.json=l,this.dracoLoader=a,this.dracoLoader.preload()}decodePrimitive(l,a){const h=this.json,d=this.dracoLoader,f=l.extensions[this.name].bufferView,m=l.extensions[this.name].attributes,g={},y={},v={};for(const _ in m){const S=uB[_]||_.toLowerCase();g[S]=m[_]}for(const _ in l.attributes){const S=uB[_]||_.toLowerCase();if(void 0!==m[_]){const b=h.accessors[l.attributes[_]];v[S]=D1[b.componentType],y[S]=!0===b.normalized}}return a.getDependency("bufferView",f).then(function(_){return new Promise(function(S){d.decodeDracoFile(_,function(b){for(const T in b.attributes){const x=b.attributes[T],E=y[T];void 0!==E&&(x.normalized=E)}S(b)},g,v)})})}}class LKe{constructor(){this.name=Ar.KHR_TEXTURE_TRANSFORM}extendTexture(l,a){return void 0!==a.texCoord&&console.warn('THREE.GLTFLoader: Custom UV sets in "'+this.name+'" extension not yet supported.'),void 0===a.offset&&void 0===a.rotation&&void 0===a.scale||(l=l.clone(),void 0!==a.offset&&l.offset.fromArray(a.offset),void 0!==a.rotation&&(l.rotation=a.rotation),void 0!==a.scale&&l.repeat.fromArray(a.scale),l.needsUpdate=!0),l}}class cB extends H_{constructor(l){super(),this.isGLTFSpecularGlossinessMaterial=!0;const a=["#ifdef USE_SPECULARMAP","\tuniform sampler2D specularMap;","#endif"].join("\n"),h=["#ifdef USE_GLOSSINESSMAP","\tuniform sampler2D glossinessMap;","#endif"].join("\n"),d=["vec3 specularFactor = specular;","#ifdef USE_SPECULARMAP","\tvec4 texelSpecular = texture2D( specularMap, vUv );","\t// reads channel RGB, compatible with a glTF Specular-Glossiness (RGBA) texture","\tspecularFactor *= texelSpecular.rgb;","#endif"].join("\n"),f=["float glossinessFactor = glossiness;","#ifdef USE_GLOSSINESSMAP","\tvec4 texelGlossiness = texture2D( glossinessMap, vUv );","\t// reads channel A, compatible with a glTF Specular-Glossiness (RGBA) texture","\tglossinessFactor *= texelGlossiness.a;","#endif"].join("\n"),m=["PhysicalMaterial material;","material.diffuseColor = diffuseColor.rgb * ( 1. - max( specularFactor.r, max( specularFactor.g, specularFactor.b ) ) );","vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );","float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );","material.roughness = max( 1.0 - glossinessFactor, 0.0525 ); // 0.0525 corresponds to the base mip of a 256 cubemap.","material.roughness += geometryRoughness;","material.roughness = min( material.roughness, 1.0 );","material.specularColor = specularFactor;"].join("\n"),g={specular:{value:(new At).setHex(16777215)},glossiness:{value:1},specularMap:{value:null},glossinessMap:{value:null}};this._extraUniforms=g,this.onBeforeCompile=function(y){for(const v in g)y.uniforms[v]=g[v];y.fragmentShader=y.fragmentShader.replace("uniform float roughness;","uniform vec3 specular;").replace("uniform float metalness;","uniform float glossiness;").replace("#include <roughnessmap_pars_fragment>",a).replace("#include <metalnessmap_pars_fragment>",h).replace("#include <roughnessmap_fragment>",d).replace("#include <metalnessmap_fragment>",f).replace("#include <lights_physical_fragment>",m)},Object.defineProperties(this,{specular:{get:function(){return g.specular.value},set:function(y){g.specular.value=y}},specularMap:{get:function(){return g.specularMap.value},set:function(y){g.specularMap.value=y,y?this.defines.USE_SPECULARMAP="":delete this.defines.USE_SPECULARMAP}},glossiness:{get:function(){return g.glossiness.value},set:function(y){g.glossiness.value=y}},glossinessMap:{get:function(){return g.glossinessMap.value},set:function(y){g.glossinessMap.value=y,y?(this.defines.USE_GLOSSINESSMAP="",this.defines.USE_UV=""):(delete this.defines.USE_GLOSSINESSMAP,delete this.defines.USE_UV)}}}),delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this.setValues(l)}copy(l){return super.copy(l),this.specularMap=l.specularMap,this.specular.copy(l.specular),this.glossinessMap=l.glossinessMap,this.glossiness=l.glossiness,delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this}}class OKe{constructor(){this.name=Ar.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS,this.specularGlossinessParams=["color","map","lightMap","lightMapIntensity","aoMap","aoMapIntensity","emissive","emissiveIntensity","emissiveMap","bumpMap","bumpScale","normalMap","normalMapType","displacementMap","displacementScale","displacementBias","specularMap","specular","glossinessMap","glossiness","alphaMap","envMap","envMapIntensity","refractionRatio"]}getMaterialType(){return cB}extendParams(l,a,h){const d=a.extensions[this.name];l.color=new At(1,1,1),l.opacity=1;const f=[];if(Array.isArray(d.diffuseFactor)){const m=d.diffuseFactor;l.color.fromArray(m),l.opacity=m[3]}if(void 0!==d.diffuseTexture&&f.push(h.assignTexture(l,"map",d.diffuseTexture)),l.emissive=new At(0,0,0),l.glossiness=void 0!==d.glossinessFactor?d.glossinessFactor:1,l.specular=new At(1,1,1),Array.isArray(d.specularFactor)&&l.specular.fromArray(d.specularFactor),void 0!==d.specularGlossinessTexture){const m=d.specularGlossinessTexture;f.push(h.assignTexture(l,"glossinessMap",m)),f.push(h.assignTexture(l,"specularMap",m))}return Promise.all(f)}createMaterial(l){const a=new cB(l);return a.fog=!0,a.color=l.color,a.map=void 0===l.map?null:l.map,a.lightMap=null,a.lightMapIntensity=1,a.aoMap=void 0===l.aoMap?null:l.aoMap,a.aoMapIntensity=1,a.emissive=l.emissive,a.emissiveIntensity=1,a.emissiveMap=void 0===l.emissiveMap?null:l.emissiveMap,a.bumpMap=void 0===l.bumpMap?null:l.bumpMap,a.bumpScale=1,a.normalMap=void 0===l.normalMap?null:l.normalMap,a.normalMapType=0,l.normalScale&&(a.normalScale=l.normalScale),a.displacementMap=null,a.displacementScale=1,a.displacementBias=0,a.specularMap=void 0===l.specularMap?null:l.specularMap,a.specular=l.specular,a.glossinessMap=void 0===l.glossinessMap?null:l.glossinessMap,a.glossiness=l.glossiness,a.alphaMap=null,a.envMap=void 0===l.envMap?null:l.envMap,a.envMapIntensity=1,a.refractionRatio=.98,a}}class NKe{constructor(){this.name=Ar.KHR_MESH_QUANTIZATION}}class rg extends cd{constructor(l,a,h,d){super(l,a,h,d)}copySampleValue_(l){const a=this.resultBuffer,h=this.sampleValues,d=this.valueSize,f=l*d*3+d;for(let m=0;m!==d;m++)a[m]=h[f+m];return a}}rg.prototype.beforeStart_=rg.prototype.copySampleValue_,rg.prototype.afterEnd_=rg.prototype.copySampleValue_,rg.prototype.interpolate_=function(c,l,a,h){const d=this.resultBuffer,f=this.sampleValues,m=this.valueSize,g=2*m,y=3*m,v=h-l,_=(a-l)/v,S=_*_,b=S*_,T=c*y,x=T-y,E=-2*b+3*S,D=b-S,I=1-E,M=D-S+_;for(let L=0;L!==m;L++)d[L]=I*f[x+L+m]+M*(f[x+L+g]*v)+E*f[T+L+m]+D*(f[T+L]*v);return d};const FKe=new Hs;class kKe extends rg{interpolate_(l,a,h,d){const f=super.interpolate_(l,a,h,d);return FKe.fromArray(f).normalize().toArray(f),f}}const D1={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},Hre={9728:us,9729:Fi,9984:1004,9985:1007,9986:1005,9987:zf},jre={33071:yo,33648:1002,10497:Vm},Wre={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},uB={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv2",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},cp={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},VKe={CUBICSPLINE:void 0,LINEAR:h_,STEP:XT};function BKe(c){return void 0===c.DefaultMaterial&&(c.DefaultMaterial=new H_({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:0})),c.DefaultMaterial}function A1(c,l,a){for(const h in a.extensions)void 0===c[h]&&(l.userData.gltfExtensions=l.userData.gltfExtensions||{},l.userData.gltfExtensions[h]=a.extensions[h])}function ig(c,l){void 0!==l.extras&&("object"==typeof l.extras?Object.assign(c.userData,l.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+l.extras))}function GKe(c,l){if(c.updateMorphTargets(),void 0!==l.weights)for(let a=0,h=l.weights.length;a<h;a++)c.morphTargetInfluences[a]=l.weights[a];if(l.extras&&Array.isArray(l.extras.targetNames)){const a=l.extras.targetNames;if(c.morphTargetInfluences.length===a.length){c.morphTargetDictionary={};for(let h=0,d=a.length;h<d;h++)c.morphTargetDictionary[a[h]]=h}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function zKe(c){const l=c.extensions&&c.extensions[Ar.KHR_DRACO_MESH_COMPRESSION];let a;return a=l?"draco:"+l.bufferView+":"+l.indices+":"+Xre(l.attributes):c.indices+":"+Xre(c.attributes)+":"+c.mode,a}function Xre(c){let l="";const a=Object.keys(c).sort();for(let h=0,d=a.length;h<d;h++)l+=a[h]+":"+c[a[h]]+";";return l}function dB(c){switch(c){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}class HKe{constructor(l={},a={}){this.json=l,this.extensions={},this.plugins={},this.options=a,this.cache=new _Ke,this.associations=new Map,this.primitiveCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.textureCache={},this.nodeNamesUsed={},this.textureLoader=typeof createImageBitmap<"u"&&!1===/Firefox|^((?!chrome|android).)*safari/i.test(navigator.userAgent)?new vre(this.options.manager):new rre(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new Zc(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),"use-credentials"===this.options.crossOrigin&&this.fileLoader.setWithCredentials(!0)}setExtensions(l){this.extensions=l}setPlugins(l){this.plugins=l}parse(l,a){const h=this,d=this.json,f=this.extensions;this.cache.removeAll(),this._invokeAll(function(m){return m._markDefs&&m._markDefs()}),Promise.all(this._invokeAll(function(m){return m.beforeRoot&&m.beforeRoot()})).then(function(){return Promise.all([h.getDependencies("scene"),h.getDependencies("animation"),h.getDependencies("camera")])}).then(function(m){const g={scene:m[0][d.scene||0],scenes:m[0],animations:m[1],cameras:m[2],asset:d.asset,parser:h,userData:{}};A1(f,g,d),ig(g,d),Promise.all(h._invokeAll(function(y){return y.afterRoot&&y.afterRoot(g)})).then(function(){l(g)})}).catch(a)}_markDefs(){const l=this.json.nodes||[],a=this.json.skins||[],h=this.json.meshes||[];for(let d=0,f=a.length;d<f;d++){const m=a[d].joints;for(let g=0,y=m.length;g<y;g++)l[m[g]].isBone=!0}for(let d=0,f=l.length;d<f;d++){const m=l[d];void 0!==m.mesh&&(this._addNodeRef(this.meshCache,m.mesh),void 0!==m.skin&&(h[m.mesh].isSkinnedMesh=!0)),void 0!==m.camera&&this._addNodeRef(this.cameraCache,m.camera)}}_addNodeRef(l,a){void 0!==a&&(void 0===l.refs[a]&&(l.refs[a]=l.uses[a]=0),l.refs[a]++)}_getNodeRef(l,a,h){if(l.refs[a]<=1)return h;const d=h.clone(),f=(m,g)=>{const y=this.associations.get(m);null!=y&&this.associations.set(g,y);for(const[v,_]of m.children.entries())f(_,g.children[v])};return f(h,d),d.name+="_instance_"+l.uses[a]++,d}_invokeOne(l){const a=Object.values(this.plugins);a.push(this);for(let h=0;h<a.length;h++){const d=l(a[h]);if(d)return d}return null}_invokeAll(l){const a=Object.values(this.plugins);a.unshift(this);const h=[];for(let d=0;d<a.length;d++){const f=l(a[d]);f&&h.push(f)}return h}getDependency(l,a){const h=l+":"+a;let d=this.cache.get(h);if(!d){switch(l){case"scene":d=this.loadScene(a);break;case"node":d=this.loadNode(a);break;case"mesh":d=this._invokeOne(function(f){return f.loadMesh&&f.loadMesh(a)});break;case"accessor":d=this.loadAccessor(a);break;case"bufferView":d=this._invokeOne(function(f){return f.loadBufferView&&f.loadBufferView(a)});break;case"buffer":d=this.loadBuffer(a);break;case"material":d=this._invokeOne(function(f){return f.loadMaterial&&f.loadMaterial(a)});break;case"texture":d=this._invokeOne(function(f){return f.loadTexture&&f.loadTexture(a)});break;case"skin":d=this.loadSkin(a);break;case"animation":d=this.loadAnimation(a);break;case"camera":d=this.loadCamera(a);break;default:throw new Error("Unknown type: "+l)}this.cache.add(h,d)}return d}getDependencies(l){let a=this.cache.get(l);if(!a){const h=this;a=Promise.all((this.json[l+("mesh"===l?"es":"s")]||[]).map(function(f,m){return h.getDependency(l,m)})),this.cache.add(l,a)}return a}loadBuffer(l){const a=this.json.buffers[l],h=this.fileLoader;if(a.type&&"arraybuffer"!==a.type)throw new Error("THREE.GLTFLoader: "+a.type+" buffer type is not supported.");if(void 0===a.uri&&0===l)return Promise.resolve(this.extensions[Ar.KHR_BINARY_GLTF].body);const d=this.options;return new Promise(function(f,m){h.load(Zu.resolveURL(a.uri,d.path),f,void 0,function(){m(new Error('THREE.GLTFLoader: Failed to load buffer "'+a.uri+'".'))})})}loadBufferView(l){const a=this.json.bufferViews[l];return this.getDependency("buffer",a.buffer).then(function(h){const f=a.byteOffset||0;return h.slice(f,f+(a.byteLength||0))})}loadAccessor(l){const a=this,h=this.json,d=this.json.accessors[l];if(void 0===d.bufferView&&void 0===d.sparse)return Promise.resolve(null);const f=[];return f.push(void 0!==d.bufferView?this.getDependency("bufferView",d.bufferView):null),void 0!==d.sparse&&(f.push(this.getDependency("bufferView",d.sparse.indices.bufferView)),f.push(this.getDependency("bufferView",d.sparse.values.bufferView))),Promise.all(f).then(function(m){const g=m[0],y=Wre[d.type],v=D1[d.componentType],_=v.BYTES_PER_ELEMENT,b=d.byteOffset||0,T=void 0!==d.bufferView?h.bufferViews[d.bufferView].byteStride:void 0,x=!0===d.normalized;let E,D;if(T&&T!==_*y){const I=Math.floor(b/T),M="InterleavedBuffer:"+d.bufferView+":"+d.componentType+":"+I+":"+d.count;let L=a.cache.get(M);L||(E=new v(g,I*T,d.count*T/_),L=new Ym(E,T/_),a.cache.add(M,L)),D=new rp(L,y,b%T/_,x)}else E=null===g?new v(d.count*y):new v(g,b,d.count*y),D=new ii(E,y,x);if(void 0!==d.sparse){const P=d.sparse.values.byteOffset||0,F=new(0,D1[d.sparse.indices.componentType])(m[1],d.sparse.indices.byteOffset||0,d.sparse.count*Wre.SCALAR),V=new v(m[2],P,d.sparse.count*y);null!==g&&(D=new ii(D.array.slice(),D.itemSize,D.normalized));for(let z=0,q=F.length;z<q;z++){const K=F[z];if(D.setX(K,V[z*y]),y>=2&&D.setY(K,V[z*y+1]),y>=3&&D.setZ(K,V[z*y+2]),y>=4&&D.setW(K,V[z*y+3]),y>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return D})}loadTexture(l){const a=this.json,f=a.images[a.textures[l].source];let m=this.textureLoader;if(f.uri){const g=this.options.manager.getHandler(f.uri);null!==g&&(m=g)}return this.loadTextureImage(l,f,m)}loadTextureImage(l,a,h){const d=this,f=this.json,m=this.options,g=f.textures[l],y=(a.uri||a.bufferView)+":"+g.sampler;if(this.textureCache[y])return this.textureCache[y];const v=self.URL||self.webkitURL;let _=a.uri||"",S=!1;if(void 0!==a.bufferView)_=d.getDependency("bufferView",a.bufferView).then(function(T){S=!0;const x=new Blob([T],{type:a.mimeType});return _=v.createObjectURL(x),_});else if(void 0===a.uri)throw new Error("THREE.GLTFLoader: Image "+l+" is missing URI and bufferView");const b=Promise.resolve(_).then(function(T){return new Promise(function(x,E){let D=x;!0===h.isImageBitmapLoader&&(D=function(I){const M=new hs(I);M.needsUpdate=!0,x(M)}),h.load(Zu.resolveURL(T,m.path),D,void 0,E)})}).then(function(T){!0===S&&v.revokeObjectURL(_),T.flipY=!1,g.name&&(T.name=g.name);const E=(f.samplers||{})[g.sampler]||{};return T.magFilter=Hre[E.magFilter]||Fi,T.minFilter=Hre[E.minFilter]||zf,T.wrapS=jre[E.wrapS]||Vm,T.wrapT=jre[E.wrapT]||Vm,d.associations.set(T,{textures:l}),T}).catch(function(){return console.error("THREE.GLTFLoader: Couldn't load texture",_),null});return this.textureCache[y]=b,b}assignTexture(l,a,h){const d=this;return this.getDependency("texture",h.index).then(function(f){if(void 0!==h.texCoord&&0!=h.texCoord&&!("aoMap"===a&&1==h.texCoord)&&console.warn("THREE.GLTFLoader: Custom UV set "+h.texCoord+" for texture "+a+" not yet supported."),d.extensions[Ar.KHR_TEXTURE_TRANSFORM]){const m=void 0!==h.extensions?h.extensions[Ar.KHR_TEXTURE_TRANSFORM]:void 0;if(m){const g=d.associations.get(f);f=d.extensions[Ar.KHR_TEXTURE_TRANSFORM].extendTexture(f,m),d.associations.set(f,g)}}return l[a]=f,f})}assignFinalMaterial(l){const a=l.geometry;let h=l.material;const d=void 0===a.attributes.tangent,f=void 0!==a.attributes.color,m=void 0===a.attributes.normal;if(l.isPoints){const g="PointsMaterial:"+h.uuid;let y=this.cache.get(g);y||(y=new Zm,Is.prototype.copy.call(y,h),y.color.copy(h.color),y.map=h.map,y.sizeAttenuation=!1,this.cache.add(g,y)),h=y}else if(l.isLine){const g="LineBasicMaterial:"+h.uuid;let y=this.cache.get(g);y||(y=new so,Is.prototype.copy.call(y,h),y.color.copy(h.color),this.cache.add(g,y)),h=y}if(d||f||m){let g="ClonedMaterial:"+h.uuid+":";h.isGLTFSpecularGlossinessMaterial&&(g+="specular-glossiness:"),d&&(g+="derivative-tangents:"),f&&(g+="vertex-colors:"),m&&(g+="flat-shading:");let y=this.cache.get(g);y||(y=h.clone(),f&&(y.vertexColors=!0),m&&(y.flatShading=!0),d&&(y.normalScale&&(y.normalScale.y*=-1),y.clearcoatNormalScale&&(y.clearcoatNormalScale.y*=-1)),this.cache.add(g,y),this.associations.set(y,this.associations.get(h))),h=y}h.aoMap&&void 0===a.attributes.uv2&&void 0!==a.attributes.uv&&a.setAttribute("uv2",a.attributes.uv),l.material=h}getMaterialType(){return H_}loadMaterial(l){const a=this,d=this.extensions,f=this.json.materials[l];let m;const g={},y=f.extensions||{},v=[];if(y[Ar.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS]){const S=d[Ar.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS];m=S.getMaterialType(),v.push(S.extendParams(g,f,a))}else if(y[Ar.KHR_MATERIALS_UNLIT]){const S=d[Ar.KHR_MATERIALS_UNLIT];m=S.getMaterialType(),v.push(S.extendParams(g,f,a))}else{const S=f.pbrMetallicRoughness||{};if(g.color=new At(1,1,1),g.opacity=1,Array.isArray(S.baseColorFactor)){const b=S.baseColorFactor;g.color.fromArray(b),g.opacity=b[3]}void 0!==S.baseColorTexture&&v.push(a.assignTexture(g,"map",S.baseColorTexture)),g.metalness=void 0!==S.metallicFactor?S.metallicFactor:1,g.roughness=void 0!==S.roughnessFactor?S.roughnessFactor:1,void 0!==S.metallicRoughnessTexture&&(v.push(a.assignTexture(g,"metalnessMap",S.metallicRoughnessTexture)),v.push(a.assignTexture(g,"roughnessMap",S.metallicRoughnessTexture))),m=this._invokeOne(function(b){return b.getMaterialType&&b.getMaterialType(l)}),v.push(Promise.all(this._invokeAll(function(b){return b.extendMaterialParams&&b.extendMaterialParams(l,g)})))}!0===f.doubleSided&&(g.side=2);const _=f.alphaMode||"OPAQUE";if("BLEND"===_?(g.transparent=!0,g.depthWrite=!1):(g.transparent=!1,"MASK"===_&&(g.alphaTest=void 0!==f.alphaCutoff?f.alphaCutoff:.5)),void 0!==f.normalTexture&&m!==gl&&(v.push(a.assignTexture(g,"normalMap",f.normalTexture)),g.normalScale=new Je(1,1),void 0!==f.normalTexture.scale)){const S=f.normalTexture.scale;g.normalScale.set(S,S)}return void 0!==f.occlusionTexture&&m!==gl&&(v.push(a.assignTexture(g,"aoMap",f.occlusionTexture)),void 0!==f.occlusionTexture.strength&&(g.aoMapIntensity=f.occlusionTexture.strength)),void 0!==f.emissiveFactor&&m!==gl&&(g.emissive=(new At).fromArray(f.emissiveFactor)),void 0!==f.emissiveTexture&&m!==gl&&v.push(a.assignTexture(g,"emissiveMap",f.emissiveTexture)),Promise.all(v).then(function(){let S;return S=m===cB?d[Ar.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS].createMaterial(g):new m(g),f.name&&(S.name=f.name),S.map&&(S.map.encoding=di),S.emissiveMap&&(S.emissiveMap.encoding=di),ig(S,f),a.associations.set(S,{materials:l}),f.extensions&&A1(d,S,f),S})}createUniqueName(l){const a=Ti.sanitizeNodeName(l||"");let h=a;for(let d=1;this.nodeNamesUsed[h];++d)h=a+"_"+d;return this.nodeNamesUsed[h]=!0,h}loadGeometries(l){const a=this,h=this.extensions,d=this.primitiveCache;function f(g){return h[Ar.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(g,a).then(function(y){return $re(y,g,a)})}const m=[];for(let g=0,y=l.length;g<y;g++){const v=l[g],_=zKe(v),S=d[_];if(S)m.push(S.promise);else{let b;b=v.extensions&&v.extensions[Ar.KHR_DRACO_MESH_COMPRESSION]?f(v):$re(new Mn,v,a),d[_]={primitive:v,promise:b},m.push(b)}}return Promise.all(m)}loadMesh(l){const a=this,d=this.extensions,f=this.json.meshes[l],m=f.primitives,g=[];for(let y=0,v=m.length;y<v;y++){const _=void 0===m[y].material?BKe(this.cache):this.getDependency("material",m[y].material);g.push(_)}return g.push(a.loadGeometries(m)),Promise.all(g).then(function(y){const v=y.slice(0,y.length-1),_=y[y.length-1],S=[];for(let T=0,x=_.length;T<x;T++){const E=_[T],D=m[T];let I;const M=v[T];if(4===D.mode||5===D.mode||6===D.mode||void 0===D.mode)I=!0===f.isSkinnedMesh?new ZD(E,M):new ds(E,M),!0===I.isSkinnedMesh&&!I.geometry.attributes.skinWeight.normalized&&I.normalizeSkinWeights(),5===D.mode?I.geometry=Yre(I.geometry,1):6===D.mode&&(I.geometry=Yre(I.geometry,2));else if(1===D.mode)I=new od(E,M);else if(3===D.mode)I=new ip(E,M);else if(2===D.mode)I=new NV(E,M);else{if(0!==D.mode)throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+D.mode);I=new f1(E,M)}Object.keys(I.geometry.morphAttributes).length>0&&GKe(I,f),I.name=a.createUniqueName(f.name||"mesh_"+l),ig(I,f),D.extensions&&A1(d,I,D),a.assignFinalMaterial(I),S.push(I)}for(let T=0,x=S.length;T<x;T++)a.associations.set(S[T],{meshes:l,primitives:T});if(1===S.length)return S[0];const b=new sd;a.associations.set(b,{meshes:l});for(let T=0,x=S.length;T<x;T++)b.add(S[T]);return b})}loadCamera(l){let a;const h=this.json.cameras[l],d=h[h.type];if(d)return"perspective"===h.type?a=new Rs(RWe.radToDeg(d.yfov),d.aspectRatio||1,d.znear||1,d.zfar||2e6):"orthographic"===h.type&&(a=new r1(-d.xmag,d.xmag,d.ymag,-d.ymag,d.znear,d.zfar)),h.name&&(a.name=this.createUniqueName(h.name)),ig(a,h),Promise.resolve(a);console.warn("THREE.GLTFLoader: Missing camera parameters.")}loadSkin(l){const a=this.json.skins[l],h={joints:a.joints};return void 0===a.inverseBindMatrices?Promise.resolve(h):this.getDependency("accessor",a.inverseBindMatrices).then(function(d){return h.inverseBindMatrices=d,h})}loadAnimation(l){const h=this.json.animations[l],d=[],f=[],m=[],g=[],y=[];for(let v=0,_=h.channels.length;v<_;v++){const S=h.channels[v],b=h.samplers[S.sampler],T=S.target,E=void 0!==h.parameters?h.parameters[b.input]:b.input,D=void 0!==h.parameters?h.parameters[b.output]:b.output;d.push(this.getDependency("node",void 0!==T.node?T.node:T.id)),f.push(this.getDependency("accessor",E)),m.push(this.getDependency("accessor",D)),g.push(b),y.push(T)}return Promise.all([Promise.all(d),Promise.all(f),Promise.all(m),Promise.all(g),Promise.all(y)]).then(function(v){const _=v[0],S=v[1],b=v[2],T=v[3],x=v[4],E=[];for(let I=0,M=_.length;I<M;I++){const L=_[I],P=S[I],F=b[I],V=T[I],z=x[I];if(void 0===L)continue;let q;switch(L.updateMatrix(),L.matrixAutoUpdate=!0,cp[z.path]){case cp.weights:q=T1;break;case cp.rotation:q=Km;break;default:q=w1}const K=L.name?L.name:L.uuid,se=void 0!==V.interpolation?VKe[V.interpolation]:h_,W=[];cp[z.path]===cp.weights?L.traverse(function(ie){ie.morphTargetInfluences&&W.push(ie.name?ie.name:ie.uuid)}):W.push(K);let Q=F.array;if(F.normalized){const ie=dB(Q.constructor),ae=new Float32Array(Q.length);for(let he=0,J=Q.length;he<J;he++)ae[he]=Q[he]*ie;Q=ae}for(let ie=0,ae=W.length;ie<ae;ie++){const he=new q(W[ie]+"."+cp[z.path],P.array,Q,se);"CUBICSPLINE"===V.interpolation&&(he.createInterpolant=function(ce){return new(this instanceof Km?kKe:rg)(this.times,this.values,this.getValueSize()/3,ce)},he.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0),E.push(he)}}return new C1(h.name?h.name:"animation_"+l,void 0,E)})}createNodeMesh(l){const h=this,d=this.json.nodes[l];return void 0===d.mesh?null:h.getDependency("mesh",d.mesh).then(function(f){const m=h._getNodeRef(h.meshCache,d.mesh,f);return void 0!==d.weights&&m.traverse(function(g){if(g.isMesh)for(let y=0,v=d.weights.length;y<v;y++)g.morphTargetInfluences[y]=d.weights[y]}),m})}loadNode(l){const h=this.extensions,d=this,f=this.json.nodes[l],m=f.name?d.createUniqueName(f.name):"";return function(){const g=[],y=d._invokeOne(function(v){return v.createNodeMesh&&v.createNodeMesh(l)});return y&&g.push(y),void 0!==f.camera&&g.push(d.getDependency("camera",f.camera).then(function(v){return d._getNodeRef(d.cameraCache,f.camera,v)})),d._invokeAll(function(v){return v.createNodeAttachment&&v.createNodeAttachment(l)}).forEach(function(v){g.push(v)}),Promise.all(g)}().then(function(g){let y;if(y=!0===f.isBone?new KD:g.length>1?new sd:1===g.length?g[0]:new Wr,y!==g[0])for(let v=0,_=g.length;v<_;v++)y.add(g[v]);if(f.name&&(y.userData.name=f.name,y.name=m),ig(y,f),f.extensions&&A1(h,y,f),void 0!==f.matrix){const v=new nn;v.fromArray(f.matrix),y.applyMatrix4(v)}else void 0!==f.translation&&y.position.fromArray(f.translation),void 0!==f.rotation&&y.quaternion.fromArray(f.rotation),void 0!==f.scale&&y.scale.fromArray(f.scale);return d.associations.has(y)||d.associations.set(y,{}),d.associations.get(y).nodes=l,y})}loadScene(l){const a=this.json,h=this.extensions,d=this.json.scenes[l],f=this,m=new sd;d.name&&(m.name=f.createUniqueName(d.name)),ig(m,d),d.extensions&&A1(h,m,d);const g=d.nodes||[],y=[];for(let v=0,_=g.length;v<_;v++)y.push(qre(g[v],m,a,f));return Promise.all(y).then(function(){return f.associations=(_=>{const S=new Map;for(const[b,T]of f.associations)(b instanceof Is||b instanceof hs)&&S.set(b,T);return _.traverse(b=>{const T=f.associations.get(b);null!=T&&S.set(b,T)}),S})(m),m})}}function qre(c,l,a,h){const d=a.nodes[c];return h.getDependency("node",c).then(function(f){if(void 0===d.skin)return f;let m;return h.getDependency("skin",d.skin).then(function(g){m=g;const y=[];for(let v=0,_=m.joints.length;v<_;v++)y.push(h.getDependency("node",m.joints[v]));return Promise.all(y)}).then(function(g){return f.traverse(function(y){if(!y.isMesh)return;const v=[],_=[];for(let S=0,b=g.length;S<b;S++){const T=g[S];if(T){v.push(T);const x=new nn;void 0!==m.inverseBindMatrices&&x.fromArray(m.inverseBindMatrices.array,16*S),_.push(x)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',m.joints[S])}y.bind(new QD(v,_),y.matrixWorld)}),f})}).then(function(f){l.add(f);const m=[];if(d.children){const g=d.children;for(let y=0,v=g.length;y<v;y++)m.push(qre(g[y],f,a,h))}return Promise.all(m)})}function $re(c,l,a){const h=l.attributes,d=[];function f(m,g){return a.getDependency("accessor",m).then(function(y){c.setAttribute(g,y)})}for(const m in h){const g=uB[m]||m.toLowerCase();g in c.attributes||d.push(f(h[m],g))}if(void 0!==l.indices&&!c.index){const m=a.getDependency("accessor",l.indices).then(function(g){c.setIndex(g)});d.push(m)}return ig(c,l),function jKe(c,l,a){const h=l.attributes,d=new pl;if(void 0===h.POSITION)return;{const g=a.json.accessors[h.POSITION],y=g.min,v=g.max;if(void 0===y||void 0===v)return void console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");if(d.set(new te(y[0],y[1],y[2]),new te(v[0],v[1],v[2])),g.normalized){const _=dB(D1[g.componentType]);d.min.multiplyScalar(_),d.max.multiplyScalar(_)}}const f=l.targets;if(void 0!==f){const g=new te,y=new te;for(let v=0,_=f.length;v<_;v++){const S=f[v];if(void 0!==S.POSITION){const b=a.json.accessors[S.POSITION],T=b.min,x=b.max;if(void 0!==T&&void 0!==x){if(y.setX(Math.max(Math.abs(T[0]),Math.abs(x[0]))),y.setY(Math.max(Math.abs(T[1]),Math.abs(x[1]))),y.setZ(Math.max(Math.abs(T[2]),Math.abs(x[2]))),b.normalized){const E=dB(D1[b.componentType]);y.multiplyScalar(E)}g.max(y)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}d.expandByVector(g)}c.boundingBox=d;const m=new Yf;d.getCenter(m.center),m.radius=d.min.distanceTo(d.max)/2,c.boundingSphere=m}(c,l,a),Promise.all(d).then(function(){return void 0!==l.targets?function UKe(c,l,a){let h=!1,d=!1;for(let g=0,y=l.length;g<y;g++){const v=l[g];if(void 0!==v.POSITION&&(h=!0),void 0!==v.NORMAL&&(d=!0),h&&d)break}if(!h&&!d)return Promise.resolve(c);const f=[],m=[];for(let g=0,y=l.length;g<y;g++){const v=l[g];if(h){const _=void 0!==v.POSITION?a.getDependency("accessor",v.POSITION):c.attributes.position;f.push(_)}if(d){const _=void 0!==v.NORMAL?a.getDependency("accessor",v.NORMAL):c.attributes.normal;m.push(_)}}return Promise.all([Promise.all(f),Promise.all(m)]).then(function(g){const v=g[1];return h&&(c.morphAttributes.position=g[0]),d&&(c.morphAttributes.normal=v),c.morphTargetsRelative=!0,c})}(c,l.targets,a):c})}function Yre(c,l){let a=c.getIndex();if(null===a){const m=[],g=c.getAttribute("position");if(void 0===g)return console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),c;for(let y=0;y<g.count;y++)m.push(y);c.setIndex(m),a=c.getIndex()}const h=a.count-2,d=[];if(2===l)for(let m=1;m<=h;m++)d.push(a.getX(0)),d.push(a.getX(m)),d.push(a.getX(m+1));else for(let m=0;m<h;m++)m%2==0?(d.push(a.getX(m)),d.push(a.getX(m+1)),d.push(a.getX(m+2))):(d.push(a.getX(m+2)),d.push(a.getX(m+1)),d.push(a.getX(m)));d.length/3!==h&&console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const f=c.clone();return f.setIndex(d),f}const WKe=["threeCanvas"];let XKe=(()=>{class c{constructor(a){this.mapThreeSvc=a,this.modelFilePath="https://solarsystem.nasa.gov/system/resources/gltf_files/2358_Phobos_1_1000.glb",this.modelName="phobos"}ngOnInit(){}ngAfterViewInit(){new Promise(h=>{(new vKe).load(this.modelFilePath,f=>{const m=f.scene.getObjectByName(this.modelName);if(!m)throw new Error(`No object named ${this.modelName} in glb!`);h(m)})}).then(h=>{this.mapThreeSvc.initScene(this.threeCanvas.nativeElement,h,this.mapOlSvc.map)})}onResize(a){this.mapThreeSvc.onResize(a)}}return c.\u0275fac=function(a){return new(a||c)(N(Ure))},c.\u0275cmp=Be({type:c,selectors:[["ukis-map-three"]],viewQuery:function(a,h){if(1&a&&hr(WKe,5),2&a){let d;mt(d=gt())&&(h.threeCanvas=d.first)}},hostBindings:function(a,h){1&a&&Me("resize",function(f){return h.onResize(f)},0,cR)},inputs:{mapOlSvc:"mapOlSvc",modelFilePath:"modelFilePath",modelName:"modelName"},decls:2,vars:0,consts:[["id","threeCanvas",1,"threeCanvas"],["threeCanvas",""]],template:function(a,h){1&a&&xe(0,"canvas",0,1)},styles:[".threeCanvas[_ngcontent-%COMP%]{width:100%;height:100%;margin:0;display:block}"]}),c})(),qKe=(()=>{class c{}return c.\u0275fac=function(a){return new(a||c)},c.\u0275mod=Ut({type:c}),c.\u0275inj=kt({}),c})();class $Ke extends bu{constructor(l){super(l)}createRenderer(){return new YKe(this)}}class YKe extends AS{constructor(l){super(l);const a=document.createElement("canvas");a.width=800,a.height=600,a.style.position="absolute";const d=l.getSource().getFeatures(),f=this.featuresToMeshes(d),m=new Kr({canvas:a,alpha:!0}),g=new Rs(45,a.width/a.height,.01,3e7);g.position.set(0,0,10),g.lookAt(new te(0,0,0));const y=new l1;for(const _ of f)y.add(_);const v=new CA(16777215,1);v.position.set(-1,2,4),y.add(v),this.canvas=a,this.scene=y,this.meshes=f,this.renderer=m,this.camera=g}prepareFrame(l){const a=l.pixelRatio,h=l.size,d=Math.round(h[0]*a),f=Math.round(h[1]*a),g=l.viewState.center,_=this.extent2Height(l.extent,45);return this.camera.aspect=d/f,this.camera.fov=45,this.camera.near=.01,this.camera.far=3e8,this.camera.position.set(g[0],g[1],_),this.camera.lookAt(new te(g[0],g[1],0)),this.camera.updateProjectionMatrix(),(h[0]!==this.canvas.width||h[1]!==this.canvas.height)&&(this.canvas.width=h[0],this.canvas.height=h[1],this.renderer.setSize(this.canvas.width,this.canvas.height)),this.canvas.style.opacity=""+l.layerStatesArray[l.layerIndex].opacity,!0}renderFrame(l,a){return this.renderer.render(this.scene,this.camera),this.canvas}renderDeclutter(l){}featuresToMeshes(l){const a=[];for(const h of l){const d=h.getGeometry(),f=h.get("height"),m=this.fGeom2tGeom(d,.1*f),g=new At(16777215);g.setHex(16777215*Math.random());const y=new YV({color:g}),v=new ds(m,y);a.push(v)}return a}fGeom2tGeom(l,a){const h=l.getCoordinates()[0],d=new qu;d.moveTo(h[0][0],h[0][1]);for(let f=1;f<h.length;f++){const m=h[f];d.lineTo(m[0],m[1])}return new ld(d,{depth:a,bevelEnabled:!1})}extent2Height(l,a){return Bre(l[3]-l[1],a)}}const ZKe=JSON.parse('{"type":"FeatureCollection","features":[{"type":"Feature","properties":{"name":"Polygon 1"},"geometry":{"type":"Polygon","coordinates":[[[-0.703125,56.12106042504407],[-2.197265625,49.15296965617042],[5.009765625,45.460130637921004],[16.435546875,46.37725420510028],[20.0390625,55.229023057406344],[4.658203125,58.03137242177637],[-0.703125,56.12106042504407]]]}},{"type":"Feature","properties":{"name":"Polygon 2"},"geometry":{"type":"Polygon","coordinates":[[[6.6796875,58.768200159239576],[19.86328125,56.80087831233043],[22.5,62.99515845212052],[10.01953125,64.88626540914477],[6.328125,62.062733258846514],[6.6796875,58.768200159239576]]]}},{"type":"Feature","properties":{"name":"Polygon 3"},"geometry":{"type":"Polygon","coordinates":[[[30.937499999999996,62.02152819100765],[23.994140624999996,62.062733258846514],[22.587890625,55.3791104480105],[37.79296875,55.62799595426723],[30.937499999999996,62.02152819100765]]]}},{"type":"Feature","properties":{"name":"Polygon 4"},"geometry":{"type":"Polygon","coordinates":[[[-8.876953125,39.436192999314095],[-11.689453125,28.459033019728043],[0.615234375,25.562265014427492],[8.173828125,33.137551192346145],[-0.9667968749999999,38.8225909761771],[-8.876953125,39.436192999314095]]]}},{"type":"Feature","properties":{"name":"Polygon 5"},"geometry":{"type":"Polygon","coordinates":[[[-140.44921875,-52.26815737376816],[-70.83984375,-52.26815737376816],[-70.83984375,59.17592824927136],[-140.44921875,59.17592824927136],[-140.44921875,-52.26815737376816]]]}}]}');function KKe(c,l){if(1&c&&(U(0,"li"),ye(1),H()),2&c){const a=l.$implicit,h=de();B(1),R0(" ",a,": ",h.group[a]||"undefined"," ")}}let QKe=(()=>{class c{constructor(a){this.layersSvc=a}ngOnInit(){this.groupkeys=["bbox","cssClass","displayName","filtertype","id","name","removable"]}}return c.\u0275fac=function(a){return new(a||c)(N(Vs))},c.\u0275cmp=Be({type:c,selectors:[["app-example-group-action"]],inputs:{group:"group"},decls:5,vars:1,consts:[[4,"ngFor","ngForOf"]],template:function(a,h){1&a&&(U(0,"div")(1,"span"),ye(2,"some properties of the group:"),H(),U(3,"ul"),le(4,KKe,2,2,"li",0),H()()),2&a&&(B(4),G("ngForOf",h.groupkeys))},dependencies:[vi]}),c})();function JKe(c,l){if(1&c&&(U(0,"th"),ye(1),H()),2&c){const a=l.$implicit;B(1),Zt(a.key)}}function eQe(c,l){if(1&c&&(U(0,"td"),ye(1),H()),2&c){const a=l.$implicit;B(1),Zt(a.value)}}let tQe=(()=>{class c{constructor(){}ngOnInit(){}}return c.\u0275fac=function(a){return new(a||c)},c.\u0275cmp=Be({type:c,selectors:[["app-popup2"]],inputs:{data:"data"},decls:11,vars:6,consts:[[1,"table"],[4,"ngFor","ngForOf"]],template:function(a,h){1&a&&(U(0,"table",0)(1,"caption"),ye(2," Demo for a basic Clarity table. "),H(),U(3,"thead")(4,"tr"),le(5,JKe,2,1,"th",1),rs(6,"keyvalue"),H()(),U(7,"tbody")(8,"tr"),le(9,eQe,2,1,"td",1),rs(10,"keyvalue"),H()()()),2&a&&(B(5),G("ngForOf",oo(6,2,h.data)),B(4),G("ngForOf",oo(10,4,h.data)))},dependencies:[vi,nC]}),c})(),nQe=(()=>{class c{constructor(a,h,d){this.layersSvc=a,this.mapStateSvc=h,this.mapSvc=d,this.class="content-container",this.test=[],this.inputValue={value:15},this.controls={attribution:!0,scaleLine:!0,overviewMap:!0}}ngOnInit(){this.addLayers()}setInput(){const a=this.layersSvc.getLayerById("heatmap_layer");this.inputValue.value=40,a.action.inputs.value=this.inputValue.value}addLayers(){const a=new vy({id:"OSM1",visible:!1,popup:!0}),h=new _i({id:"heatmap_layer",name:"Heatmap Layer",actions:[{title:"test",icon:"",action:ae=>{}}],action:{component:pje,inputs:this.inputValue,outputs:{valueChange:ae=>{this.inputValue.value=ae}}},custom_layer:new Y7e({source:new hi({features:this.mapSvc.geoJsonToFeatures(L3),format:new Ma}),radius:this.inputValue.value}),visible:!1}),d=new is({id:"Vector Layer1",name:"Vector Layer",type:"geojson",data:L3,visible:!0,popup:{single:!0}}),f=new _i({id:"Layer_KML",name:"KML - VectorLayer",popup:!0,custom_layer:new bu({source:new hi({url:"assets/kml/TimeZones.kml",format:new sE({extractStyles:!0})})}),visible:!1,bbox:[-180,-90,180,90]}),m=new _i({id:"topo_json_layer",name:"Topo Json - VectorImageLayer",custom_layer:new UT({source:new hi({url:"https://openlayers.org/en/latest/examples/data/topojson/world-110m.json",format:new fje({layers:["countries"]}),overlaps:!1}),style:(ae,he)=>(tn(ae),[new ui({stroke:new ws({color:"gray",width:1}),fill:new Si({color:"rgba(0, 153, 255, 0.2)"})})])}),visible:!1}),g=new _i({id:"geo_json_layer_ocean",name:"GeoJson - VectorImageLayer ocean",popup:{event:"move"},custom_layer:new UT({source:new hi({features:this.mapSvc.geoJsonToFeatures(xee)}),style:(ae,he)=>new ui({stroke:new ws({color:"gray",width:1}),fill:new Si({color:"rgba(20,20,20,0.9)"})})}),visible:!0,bbox:[-180.35156249999997,-22.268764039073968,-129.375,29.84064389983441]}),y=new _i({id:"geo_json_layer_polys",name:"GeoJson polys - VectorImageLayer",popup:[{event:"click",single:!0,options:{autoPan:!1},dynamicPopup:{component:Sk,getAttributes:ae=>({data:ae.properties})}},{event:"move",options:{autoPan:!1},dynamicPopup:{component:tQe,getAttributes:ae=>({data:ae.properties})}}],custom_layer:new UT({source:new hi({features:this.mapSvc.geoJsonToFeatures(ZKe)}),style:(ae,he)=>new ui({stroke:new ws({color:"gray",width:1}),fill:new Si({color:"rgba(51,153,51,1)"})})}),visible:!0}),v=new _i({id:"geo_json_layer_collection",name:"GeoJson Collection - VectorImageLayer",popup:{event:"click",single:!0,options:{autoPan:!1}},custom_layer:new UT({source:new hi({url:"assets/geojson/test.collection.json",format:new Ma}),style:(ae,he)=>new ui({stroke:new ws({color:"rgba(153,51,51,1)",width:2}),fill:new Si({color:"rgba(153,51,51,1)"}),image:new Ny({radius:5,fill:new Si({color:"rgba(153,51,51,1)"})})})}),visible:!0}),_=new _i({id:"static_image_layer",name:"Static Image",visible:!1,popup:{filterkeys:["id","color","name"]},custom_layer:new Xd({source:new Pee({url:"assets/image/srtm_small.png",imageExtent:[10,45,15,50],projection:"EPSG:4326"})})}),S=new _i({id:"osm_clip_layer",name:"OSM Clip",visible:!1,popup:{filterkeys:["id","color","name"]},custom_layer:new Su({source:new xE}),bbox:[-105.41888884797893,6.480590573390401,-15.540298246016693,42.53496284727569]}),b=new _i({id:"customLayerOlGroup",name:"Custom Layer OlGroup",visible:!1,opacity:.6,popup:{event:"move",filterkeys:["id","color","name"],options:{autoPan:!1}},custom_layer:new Ui({layers:[new Su({source:new tb({url:"https://geoservice.dlr.de/eoc/basemap/wms",params:{LAYERS:"litemap",TILED:!0},serverType:"geoserver",transition:0})}),new Su({source:new tb({url:"https://geoservice.dlr.de/eoc/basemap/wms",params:{LAYERS:"liteoverlay",TILED:!0},serverType:"geoserver",transition:0})})]})}),T=new _i({id:"clusterLayer",name:"cluster Layer - VectorLayer",visible:!1,popup:!0,custom_layer:new bu({source:new yf({distance:10,source:new hi({features:this.mapSvc.geoJsonToFeatures(L3)})})})}),x=new _i({id:"vectorTile",name:"VectorTileLayer",visible:!1,popup:{event:"move",filterkeys:["name","layer","class"],properties:{name:"Name"},options:{autoPan:!1}},custom_layer:new Uy({source:new BS({format:new Cx,url:"https://tiles.geoservice.dlr.de/service/tms/1.0.0/planet_eoc@EPSG%3A900913@pbf/{z}/{x}/{y}.pbf?flipy=true"}),style:(ae,he)=>{const J=ae.get("layer"),ce=ae.get("class");if(this.test.includes(J)||this.test.push(J),J){if("water"===J)return new ui({fill:new Si({color:"rgba(67,162,202,0.9)"})});if("boundary"===J)return new ui({stroke:new ws({color:"gray",width:1}),fill:new Si({color:"rgba(0,0,0,0)"})});if("landcover"===J&&ce){if("wood"===ce)return new ui({fill:new Si({color:"rgba(53,151,143,0.7)"})});if("grass"===ce)return new ui({fill:new Si({color:"rgba(168,221,181,0.7)"})})}}}})}),E=new Oi({name:"Heatmap Group",filtertype:"Layers",id:"group1",layers:[h,d],description:"This is a custom layer group with some custom angular components in the UI",action:{component:QKe}}),D=new _i({id:"image_wms",name:"Image WMS",custom_layer:new Xd({source:new VO({url:"https://ahocevar.com/geoserver/wms",params:{LAYERS:"topp:states"},serverType:"geoserver"})}),visible:!1,popup:{filterkeys:["id","color","name"]},bbox:[-133.9453125,18.979025953255267,-60.46875,52.908902047770255]}),I=new _i({id:"dtmLayer",name:"SRTM DTM",filtertype:"Layers",custom_layer:new kPe({source:new Pee({url:"assets/image/srtm_small.png",imageExtent:[10,45,15,50],projection:"EPSG:4326"})}),action:{component:yje,inputs:{changeHandler:(ae,he)=>{I.custom_layer.updateSunAngle([ae,he])}}},opacity:.6,visible:!1,description:"<p>This layer uses SRTM data to calculate surface-normals and uses them to dynamically create shades on hilltops. Things like these might be a nice illustration for time-enabled maps.</p>\n      <p>Use the controls to dynamically change the sun's angle.</p>"}),M=this.mapSvc.getProjection().getMetersPerUnit(),L=new Gp({code:"EPSG:4326",units:"degrees"}).getMetersPerUnit();Oee.features.map(ae=>ae.properties.height=ae.properties.height*L/M);const P=new _i({id:"three",name:"Bars layer",custom_layer:new $Ke({source:new hi({features:this.mapSvc.geoJsonToFeatures(Oee)})}),filtertype:"Layers",opacity:.7,visible:!1,description:"<p>This layer demonstrates how a common 3d-library, three.js, can be integrated in a 2d-map. Using three.js often yields less verbose code than calling WebGL directly.</p>"}),F=new hi({features:this.mapSvc.geoJsonToFeatures(gje)}),V=new yf({source:F,distance:25}),K=new _i({id:"interpolation",name:"Interpolation",custom_layer:new BPe({source:V,style:(ae,he)=>{const J=ae.getProperties().features;let ce;return ce=J.length>1?`${ae.getProperties().features.length}`:`${Number.parseFloat(J[0].getProperties().SWH).toPrecision(3)}`,new ui({image:new Ny({radius:13,fill:new Si({color:"rgba(0, 153, 255, 0.2)"}),stroke:new ws({color:"rgba(255, 255, 255, 0.2)",width:1})}),text:new Zp({text:ce,overflow:!0,offsetX:-5*ce.length/2,offsetY:1,textAlign:"left",fill:new Si({color:"#ffffff"})})})},renderSettings:{maxEdgeLength:15e3/M,power:2,colorRamp:[{val:0,rgb:[166,97,26]},{val:.4,rgb:[223,194,125]},{val:.8,rgb:[247,247,247]},{val:2,rgb:[128,205,193]},{val:22.5,rgb:[1,133,113]}],smooth:!0,showLabels:!1,valueProperty:"SWH",storeInterpolatedPixelData:!1}}),action:{component:vje,inputs:{changeHandler:(ae,he,J)=>{K.custom_layer.updateParas(ae,he,J)}}},filtertype:"Layers",opacity:.7,visible:!1,description:"This layer is an example of how WebGL can be used to outsource computationally expensive operations. For inverse-distance interpolation we need to account for every datapoint at every pixel."}),se=new Oi({name:"Webgl Group",filtertype:"Layers",id:"group2",layers:[I,P,K]}),W=new _i({name:"Transparenter Hintergrund",id:"blank",type:"custom",visible:!1,custom_layer:new Xd({source:new eje({canvasFunction:()=>document.createElement("canvas")})})}),Q=new _i({name:"Ol Raster Source OSM",id:"rasterSourceLayer",type:"custom",visible:!1,removable:!0,custom_layer:new Xd({source:new nb({sources:[new xE],operation:ae=>ae[0],operationType:"image"})})});[W,Q,a,x,se,T,D,f,_,S,m,y,v,E,g,b].forEach(ae=>{ae instanceof Ys?this.layersSvc.addLayer(ae,"Layers"):ae instanceof Oi&&this.layersSvc.addLayerGroup(ae)}),setTimeout(()=>{Q.visible=!0,Q.custom_layer.setSource(new nb({sources:[new xE],operation:ae=>ae[0],operationType:"image"})),this.layersSvc.updateLayer(Q)},2e3)}ngAfterViewInit(){const a=new is({id:"Vector Layer2",name:"async add Layer",type:"geojson",data:mje,visible:!1,popup:!0});setTimeout(()=>{this.layersSvc.addLayer(a,"Layers")},2e3)}}return c.\u0275fac=function(a){return new(a||c)(N(Vs),N(Zs),N(Cs))},c.\u0275cmp=Be({type:c,selectors:[["app-route-map4"]],hostVars:2,hostBindings:function(a,h){2&a&&Yo(h.class)},features:[Mt([Vs,Zs,Cs])],decls:15,vars:10,consts:[[1,"content-area"],["id","olMap",3,"layersSvc","mapState","controls"],[1,"right",3,"clrVerticalNavCollapsible","clr-nav-level"],[1,"layers",3,"clrVerticalNavGroupExpanded"],["shape","layers","clrVerticalNavIcon","","title","layers"],[1,"padding","title-ellipsis"],[3,"layersSvc","mapStateSvc"],["title","set input of dynamic component from parent when it is created or the input changed",1,"btn","btn-primary",3,"click"]],template:function(a,h){1&a&&(U(0,"main",0),xe(1,"ukis-map-ol",1),H(),U(2,"clr-vertical-nav",2)(3,"clr-vertical-nav-group",3),xe(4,"clr-icon",4),ye(5," Layers "),U(6,"clr-vertical-nav-group-children",5),xe(7,"ukis-layer-control",6),H()(),U(8,"clr-vertical-nav-group",3),xe(9,"clr-icon",4),ye(10," Test to set dynamic component "),U(11,"clr-vertical-nav-group-children",5)(12,"button",7),Me("click",function(){return h.setInput()}),ye(13,"Set Heatmap Layer radius"),H(),ye(14),H()()()),2&a&&(B(1),G("layersSvc",h.layersSvc)("mapState",h.mapStateSvc)("controls",h.controls),B(1),G("clrVerticalNavCollapsible",!0)("clr-nav-level",2),B(1),G("clrVerticalNavGroupExpanded",!0),B(4),G("layersSvc",h.layersSvc)("mapStateSvc",h.mapStateSvc),B(1),G("clrVerticalNavGroupExpanded",!0),B(6),mi(" ",h.inputValue.value," "))},dependencies:[fa,Bc,Bu,Uu,Gu,zu,Oh,Kh]}),c})();function rQe(c,l){if(1&c&&(U(0,"tr")(1,"td",16),ye(2),H(),U(3,"td"),ye(4),H(),U(5,"td"),ye(6),H(),U(7,"td"),ye(8),H()()),2&c){const a=l.$implicit;B(2),Zt(a.properties.title),B(2),Zt(a.properties.foo),B(2),Zt(a.properties.bar),B(2),Zt(a.properties.baz)}}function iQe(c,l){if(1&c&&(U(0,"table",15)(1,"thead")(2,"tr")(3,"th",16),ye(4,"Title"),H(),U(5,"th"),ye(6,"Foo"),H(),U(7,"th"),ye(8,"Bar"),H(),U(9,"th"),ye(10,"Baz"),H()()(),U(11,"tbody"),le(12,rQe,9,4,"tr",17),H()()),2&c){const a=de();B(12),G("ngForOf",a.geojsonData.features)}}const fB=function(){return{height:"95%"}},sQe=function(){return{height:"5%"}};let oQe=(()=>{class c{constructor(a,h){this.layersSvc=a,this.mapStateSvc=h,this.class="content-container",this.showTable=!1,this.subs=[],this.controls={attribution:!0,scaleLine:!0}}ngOnInit(){this.addBaseLayers(),this.addLayers(),this.addOverlays(),this.mapStateSvc.setExtent([-14,33,40,57]),this.checkVisibleLayers()}addBaseLayers(){[new PL({visible:!0}),new BH].map(f=>this.layersSvc.addLayer(f,"Baselayers"))}addLayers(){this.geojsonData={type:"FeatureCollection",features:[{type:"Feature",properties:{title:"Polygon",foo:"1",bar:"test",baz:"555"},geometry:{type:"Polygon",coordinates:[[[11.53564453125,48.80686346108517],[11.42578125,48.61838518688487],[11.97509765625,48.516604348867475],[12.2607421875,48.69096039092549],[12.0849609375,48.99463598353405],[11.53564453125,48.80686346108517]]]}},{type:"Feature",properties:{title:"Rectangle",foo:"2",bar:"test2",baz:"66667"},geometry:{type:"Polygon",coordinates:[[[10.986328125,43.89789239125797],[11.755371093749998,43.89789239125797],[11.755371093749998,44.41808794374846],[10.986328125,44.41808794374846],[10.986328125,43.89789239125797]]]}},{type:"Feature",properties:{title:"Line",foo:"3",bar:"test3",baz:"111"},geometry:{type:"LineString",coordinates:[[13.29345703125,48.268569112964336],[15.073242187499998,47.56170075451973],[14.1064453125,46.40756396630067],[15.886230468750002,44.94924926661153]]}},{type:"Feature",properties:{title:"Point",foo:"4",bar:"test4",baz:"444"},geometry:{type:"Point",coordinates:[11.513671874999998,46.42271253466717]}}]};const a=new is({id:"geojson_test",name:"GeoJSON Vector Layer",type:"geojson",data:this.geojsonData,visible:!1,popup:!0});this.layersSvc.addLayer(a,"Layers")}checkVisibleLayers(){const a=this.layersSvc.getLayers().subscribe(h=>{h.map(d=>{d&&("geojson_test"===d.id&&!0===d.visible?this.showTable=!0:"geojson_test"===d.id&&!1===d.visible&&(this.showTable=!1))})});this.subs.push(a)}addOverlays(){const a=new LL;this.layersSvc.addLayer(a,"Overlays")}ngOnDestroy(){this.subs.forEach(a=>a.unsubscribe())}}return c.\u0275fac=function(a){return new(a||c)(N(Vs),N(Zs))},c.\u0275cmp=Be({type:c,selectors:[["app-route-map5"]],hostVars:2,hostBindings:function(a,h){2&a&&Yo(h.class)},features:[Mt([Vs,Zs,Cs])],decls:27,vars:26,consts:[[1,"content-area",3,"ngStyle"],["id","olMap",3,"layersSvc","mapState","controls"],[1,"right",3,"clrVerticalNavCollapsible","clr-nav-level","ngStyle"],[1,"layers",3,"clrVerticalNavGroupExpanded"],["shape","world","title","Overlays","clrVerticalNavIcon",""],[1,"padding","title-ellipsis"],[3,"layersSvc","mapStateSvc","layerfilter"],["shape","layers","clrVerticalNavIcon","","title","layers"],[3,"layersSvc","mapStateSvc"],["shape","world","title","Baselayers","clrVerticalNavIcon",""],[3,"clrVerticalNavCollapsible","ngStyle"],[3,"clrVerticalNavGroupExpanded"],["shape","table","title","Overlays","clrVerticalNavIcon",""],["class","table",4,"ngIf"],[1,"footer","ukis-footer",3,"ngStyle"],[1,"table"],[1,"left"],[4,"ngFor","ngForOf"]],template:function(a,h){1&a&&(U(0,"main",0),xe(1,"ukis-map-ol",1),H(),U(2,"clr-vertical-nav",2)(3,"clr-vertical-nav-group",3),xe(4,"clr-icon",4),ye(5," Overlays "),U(6,"clr-vertical-nav-group-children",5),xe(7,"ukis-layer-control",6),H()(),U(8,"clr-vertical-nav-group",3),xe(9,"clr-icon",7),ye(10," Layers "),U(11,"clr-vertical-nav-group-children",5),xe(12,"ukis-layer-control",8),H()(),U(13,"clr-vertical-nav-group",3),xe(14,"clr-icon",9),ye(15," Baselayers "),U(16,"clr-vertical-nav-group-children",5),xe(17,"ukis-base-layer-control",8),H()()(),U(18,"clr-vertical-nav",10)(19,"clr-vertical-nav-group",11),xe(20,"clr-icon",12),ye(21," Table "),U(22,"clr-vertical-nav-group-children",5),le(23,iQe,13,1,"table",13),H()()(),U(24,"div",14)(25,"p"),ye(26,"this is the footer"),H()()),2&a&&(G("ngStyle",ty(22,fB)),B(1),G("layersSvc",h.layersSvc)("mapState",h.mapStateSvc)("controls",h.controls),B(1),G("clrVerticalNavCollapsible",!0)("clr-nav-level",2)("ngStyle",ty(23,fB)),B(1),G("clrVerticalNavGroupExpanded",!0),B(4),G("layersSvc",h.layersSvc)("mapStateSvc",h.mapStateSvc)("layerfilter","Overlays"),B(1),G("clrVerticalNavGroupExpanded",!0),B(4),G("layersSvc",h.layersSvc)("mapStateSvc",h.mapStateSvc),B(1),G("clrVerticalNavGroupExpanded",!0),B(4),G("layersSvc",h.layersSvc)("mapStateSvc",h.mapStateSvc),B(1),G("clrVerticalNavCollapsible",!0)("ngStyle",ty(24,fB)),B(1),G("clrVerticalNavGroupExpanded",h.showTable),B(4),G("ngIf",h.showTable),B(1),G("ngStyle",ty(25,sQe)))},dependencies:[vi,vn,KP,fa,Bc,Bu,Uu,Gu,zu,Oh,Kh,iD]}),c})();function aQe(c,l){if(1&c&&(U(0,"tr")(1,"th"),ye(2),H(),U(3,"td"),ye(4),H()()),2&c){const a=l.$implicit;B(2),Zt(a.key),B(2),Zt(a.value)}}function lQe(c,l){if(1&c&&(U(0,"tbody"),le(1,aQe,5,2,"tr",3),rs(2,"keyvalue"),H()),2&c){const a=l.ngIf;B(1),G("ngForOf",oo(2,1,a))}}function cQe(c,l){1&c&&(U(0,"clr-spinner",4),ye(1,"Loading ..."),H()),2&c&&G("clrInline",!0)}let Zre=(()=>{class c{constructor(a){this.http=a}ngOnInit(){this.data$=this.getFeatureInfo().pipe(ve(a=>a.features[0].properties))}getFeatureInfo(){const a=this.layer.getSource().getFeatureInfoUrl(this.event.coordinate,this.event.frameState.viewState.resolution,this.event.frameState.viewState.projection.getCode(),{INFO_FORMAT:"application/json"});return console.log("getting",a),this.http.get(a)}}return c.\u0275fac=function(a){return new(a||c)(N(qh))},c.\u0275cmp=Be({type:c,selectors:[["app-raster-feature-info"]],inputs:{layer:"layer",event:"event"},decls:7,vars:4,consts:[[1,"table","table-vertical"],[4,"ngIf","ngIfElse"],["loading",""],[4,"ngFor","ngForOf"],[3,"clrInline"]],template:function(a,h){if(1&a&&(U(0,"table",0)(1,"caption"),ye(2," Feature properties "),H(),le(3,lQe,3,3,"tbody",1),rs(4,"async"),H(),le(5,cQe,2,1,"ng-template",null,2,qs)),2&a){const d=Ki(6);B(3),G("ngIf",oo(4,2,h.data$))("ngIfElse",d)}},dependencies:[vi,vn,Jb,W0,nC]}),c})(),uQe=(()=>{class c{constructor(a,h){this.layersSvc=a,this.mapStateSvc=h,this.class="content-container",this.subs=[],this.controls={attribution:!0,scaleLine:!0}}ngOnInit(){this.addBaseLayers(),this.addLayers(),this.mapStateSvc.setExtent([9.681317514755053,47.425291526740125,12.765729135848805,49.213103602937025]),this.layersSvc.getLayers().subscribe(a=>console.log("layers are now ",a))}addBaseLayers(){const a=new PL({visible:!0,tileSize:512});this.layersSvc.addLayer(a,"Baselayers")}addLayers(){const a=new Ca({type:"wmts",id:"TDM90_AMP",visible:!1,url:"https://tiles.geoservice.dlr.de/service/wmts?",name:"TDM90_AMP",filtertype:"Layers",attribution:'| TDM90 Data &copy; <a href="http://www.dlr.de" target="_blank">DLR</a> licensed for <a rel="license" target="_blank" href="https://geoservice.dlr.de/resources/licenses/tdm90/License_for_the_Utilization_of_90m_DEM_for_Scientific_Use.pdf">scientific use</a>',params:{layer:"TDM90_AMP",version:"1.1.0",format:"image/png",style:"default",matrixSetOptions:{matrixSet:"EPSG:3857",tileMatrixPrefix:"EPSG:3857"}},styles:[{default:!0,name:"default",title:"default"},{default:!1,name:"none",title:"none"}]});this.layersSvc.addLayer(a,a.filtertype);const h=new gy({type:"wms",id:"S2_L3A_WASP_FRC_P1M",url:"https://{s}.geoservice.dlr.de/eoc/imagery/wms?",name:"Sentinel-2 L3A FRC (WASP)",subdomains:["a","b","c","d"],filtertype:"Layers",attribution:'| &copy; <a href="http://www.dlr.de" target="_blank">DLR</a> Contains modified Copernicus Sentinel Data [2020]',params:{LAYERS:"S2_L3A_WASP_FRC_P1M",VERSION:"1.1.0",FORMAT:"image/png"},expanded:!0,bbox:[2.183,47.076,8.206,49.287],styles:[{default:!0,legendURL:"https://geoservice.dlr.de/eoc/imagery/wms?service=WMS&request=GetLegendGraphic&format=image/png&width=20&height=20&layer=land:S2_L3A_WASP_FRC_P1M",name:"s2-ndvi",title:"NDVI"},{default:!1,legendURL:"https://geoservice.dlr.de/eoc/imagery/wms?service=WMS&request=GetLegendGraphic&format=image/png&width=20&height=20&layer=land:S2_L3A_WASP_FRC_P1M",name:"s2-infrared",title:"Infrared (8,4,3)"},{default:!1,legendURL:"https://geoservice.dlr.de/eoc/imagery/wms?service=WMS&request=GetLegendGraphic&format=image/png&width=20&height=20&layer=land:S2_L3A_WASP_FRC_P1M",name:"s2-l3a-wasp-frc",title:"Style for L3A MAJA/WASP Ground Reflectances"}],popup:{dynamicPopup:{component:Zre,getAttributes:f=>({layer:f.layer,event:f.event})}}});this.layersSvc.addLayer(h,h.filtertype);const d=new gy({type:"wms",id:"S2_L2A_MAJA_FRE",url:"https://{s}.geoservice.dlr.de/eoc/imagery/wms?",name:"Sentinel-2 L2A FRE (MAJA)",subdomains:["a","b","c","d"],filtertype:"Layers",attribution:'| &copy; <a href="http://www.dlr.de" target="_blank">DLR</a> Sentinel-2 L2A MAJA (MACCS-ATCOR Joint Algorithm) ground reflectance with the correction of slope effects (FRE) in 10m resolution based on the MAJA processor (https://doi.org/10.5281/zenodo.1209633)',bbox:[5.763545147601,46.793670688196,15.152753273727,55.945635321533],params:{LAYERS:"S2_L2A_MAJA_FRE",VERSION:"1.1.0",FORMAT:"image/png"},expanded:!0,styles:[{default:!0,legendURL:"https://geoservice.dlr.de/eoc/imagery/wms?service=WMS&version=1.3.0&request=GetLegendGraphic&format=image%2Fpng&width=20&height=20&layer=S2_L2A_MAJA_FRE",name:"s2-l2a-maja-fre",title:"True Color Image (FRE)"},{default:!1,legendURL:"https://geoservice.dlr.de/eoc/imagery/wms?service=WMS&version=1.3.0&request=GetLegendGraphic&format=image%2Fpng&width=20&height=20&layer=S2_L2A_MAJA_FRE&style=s2-swir",name:"s2-swir",title:"S2 Short-Wave Infrared"},{default:!1,legendURL:"https://geoservice.dlr.de/eoc/imagery/wms?service=WMS&version=1.3.0&request=GetLegendGraphic&format=image%2Fpng&width=20&height=20&layer=S2_L2A_MAJA_FRE&style=s2-land-water",name:"s2-land-water",title:"S2 Land/Water"},{default:!1,legendURL:"https://geoservice.dlr.de/eoc/imagery/wms?service=WMS&version=1.3.0&request=GetLegendGraphic&format=image%2Fpng&width=20&height=20&layer=S2_L2A_MAJA_FRE&style=s2-vegetation-analysis",name:"s2-vegetation-analysis",title:"S2 vegetation analysis"}],popup:{dynamicPopup:{component:Zre,getAttributes:f=>({layer:f.layer,event:f.event})}}});this.layersSvc.addLayer(d,d.filtertype)}ngOnDestroy(){this.subs.forEach(a=>a.unsubscribe())}}return c.\u0275fac=function(a){return new(a||c)(N(Vs),N(Zs))},c.\u0275cmp=Be({type:c,selectors:[["app-route-map6"]],hostVars:2,hostBindings:function(a,h){2&a&&Yo(h.class)},features:[Mt([Vs,Zs,Cs])],decls:13,vars:11,consts:[[1,"content-area"],["id","olMap",3,"layersSvc","mapState","controls"],[1,"right",3,"clrVerticalNavCollapsible","clr-nav-level"],[1,"layers",3,"clrVerticalNavGroupExpanded"],["shape","layers","clrVerticalNavIcon","","title","layers"],[1,"padding","title-ellipsis"],[3,"layersSvc","mapStateSvc"],["shape","world","title","Baselayers","clrVerticalNavIcon",""]],template:function(a,h){1&a&&(U(0,"main",0),xe(1,"ukis-map-ol",1),H(),U(2,"clr-vertical-nav",2)(3,"clr-vertical-nav-group",3),xe(4,"clr-icon",4),ye(5," Layers "),U(6,"clr-vertical-nav-group-children",5),xe(7,"ukis-layer-control",6),H()(),U(8,"clr-vertical-nav-group",3),xe(9,"clr-icon",7),ye(10," Baselayers "),U(11,"clr-vertical-nav-group-children",5),xe(12,"ukis-base-layer-control",6),H()()()),2&a&&(B(1),G("layersSvc",h.layersSvc)("mapState",h.mapStateSvc)("controls",h.controls),B(1),G("clrVerticalNavCollapsible",!0)("clr-nav-level",2),B(1),G("clrVerticalNavGroupExpanded",!0),B(4),G("layersSvc",h.layersSvc)("mapStateSvc",h.mapStateSvc),B(1),G("clrVerticalNavGroupExpanded",!0),B(4),G("layersSvc",h.layersSvc)("mapStateSvc",h.mapStateSvc))},dependencies:[fa,Bc,Bu,Uu,Gu,zu,Oh,Kh,iD]}),c})();function hQe(c,l){1&c&&(U(0,"clr-signpost-content")(1,"h3"),ye(2,"Licenses setup"),H(),U(3,"p"),ye(4,"This component expects a "),U(5,"code"),ye(6,"assets/licenses.json"),H(),ye(7," file to be present in the project bundle."),H(),U(8,"p"),ye(9,"That file was created with the following command:"),H(),U(10,"code"),ye(11," cd ./frontend-libraries npm install -g license-checker npx license-checker --json --out ./dist/demo-maps/assets "),H(),ye(12," You might want to add this command to the build-process by adding a "),U(13,"code"),ye(14,'"postbuild"'),H(),ye(15," task to your package.json. "),H())}function dQe(c,l){if(1&c&&(U(0,"clr-dg-row")(1,"clr-dg-cell"),ye(2),H(),U(3,"clr-dg-cell"),ye(4),H(),U(5,"clr-dg-cell"),ye(6),H(),U(7,"clr-dg-cell")(8,"a",4),ye(9),H()()()),2&c){const a=l.$implicit;B(2),Zt(a.name),B(2),Zt(a.publisher),B(2),Zt(a.license),B(2),Eo("href",a.repository,Wa),B(1),Zt(a.repository)}}function fQe(c,l){if(1&c&&(er(0),le(1,dQe,10,5,"clr-dg-row",3),U(2,"clr-dg-footer"),ye(3),H(),tr()),2&c){const a=l.ngIf;B(1),G("ngForOf",a),B(2),mi("",a.length," third party dependencies")}}let pQe=(()=>{class c{constructor(a){this.http=a,this.class="content-container"}ngOnInit(){this.licenses$=this.http.get("assets/licenses.json").pipe(ve(a=>{const h=[];for(const d in a)if(a[d]){const f=a[d];h.push({name:d,license:f.licenses,repository:f.repository,publisher:f.publisher})}return h}))}}return c.\u0275fac=function(a){return new(a||c)(N(qh))},c.\u0275cmp=Be({type:c,selectors:[["app-route-licenses"]],hostVars:2,hostBindings:function(a,h){2&a&&Yo(h.class)},decls:18,vars:3,consts:[[1,"content-area","licenses"],[4,"clrIfOpen"],[4,"ngIf"],[4,"ngFor","ngForOf"],[3,"href"]],template:function(a,h){1&a&&(U(0,"main",0)(1,"p"),ye(2,"A lot of third party libraries were used to create this project. Their licenses are listed here."),H(),U(3,"p"),ye(4,"For more information, click here: "),U(5,"clr-signpost"),le(6,hQe,16,0,"clr-signpost-content",1),H()(),U(7,"clr-datagrid")(8,"clr-dg-column"),ye(9,"Library name"),H(),U(10,"clr-dg-column"),ye(11,"Publisher"),H(),U(12,"clr-dg-column"),ye(13,"License"),H(),U(14,"clr-dg-column"),ye(15,"Repository"),H(),le(16,fQe,4,2,"ng-container",2),rs(17,"async"),H()()),2&a&&(B(16),G("ngIf",oo(17,1,h.licenses$)))},dependencies:[vi,vn,ek,TM,CM,hT,HZ,ik,MM,DM,EM,cT,zF,HF,aM,uT,PM,W0],styles:[".content-area.licenses[_ngcontent-%COMP%]{padding:1em}"]}),c})(),mQe=(()=>{class c{constructor(a,h){this.http=a,this.olSvc=h,SE.defs("EPSG:2966","+proj=tmerc +lat_0=37.5 +lon_0=-87.08333333333333 +k=0.999966667 +x_0=900000 +y_0=249999.9998983998 +datum=NAD83 +units=us-ft +no_defs"),uX(SE),gu(cn("EPSG:2966"),"EPSG:4326"),this.geojson2966To4326=new Ma({dataProjection:"EPSG:2966",featureProjection:"EPSG:4326"}),this.geojson4326=new Ma({featureProjection:"EPSG:4326"})}getWfsSource(a){switch(a){case"all":return new hi({format:new Ma,url:this.getRequestUrl(this.olSvc.EPSG),strategy:bj});case"bbox":return new hi({format:new Ma,url:(f,m,g)=>{const y=g.getCode();return this.getRequestUrl(y,f)},strategy:K2});case"simplifyGeometry":const h=new hi({loader:(f,m,g)=>{const y=g.getCode();this.http.get(this.getRequestUrl(y,f)).subscribe(v=>{const _=(new Ma).readFeatures(v);for(const S of _)S.geometry=S.getGeometry().simplify(1e3);h.addFeatures(_)})},strategy:K2});return h;case"noProps":const d=new hi({loader:(f,m,g)=>{const y=g.getCode();this.http.get(this.getRequestUrl(y,f)).subscribe(v=>{const _=(new Ma).readFeatures(v);for(const S of _)S.setProperties({});d.addFeatures(_)})},strategy:K2});return d;case"tile":throw new Error("Tile-Strategy source not yet implemented.")}}getRequestUrl(a,h){a||(a="EPSG:4326");let d="https://ahocevar.com/geoserver/wfs?service=WFS&version=1.1.0&request=GetFeature";return d+=`&outputFormat=application/json&srsname=${a}`,d+="&typename=osm:water_areas",h&&(d+=`&bbox=${h.join(",")},${a}`),d}createWfsLayer(a,h,d,f){const m=this.getWfsSource(d),g=new bu({source:m,style:f});return new _i({id:a,name:h,custom_layer:g,popup:!0,visible:!1})}createVectorTileLayer(a,h){const d=new BS({format:new Cx,url:"https://ahocevar.com/geoserver/gwc/service/tms/1.0.0/ne:ne_10m_admin_0_countries@EPSG:4326@pbf/{z}/{x}/{-y}.pbf"}),f=new Uy({source:d});return new _i({id:a,name:h,custom_layer:f,popup:!0,visible:!1})}}return c.\u0275fac=function(a){return new(a||c)(Ae(qh),Ae(Cs))},c.\u0275prov=Oe({token:c,factory:c.\u0275fac,providedIn:"root"}),c})();function gQe(c,l){1&c&&(U(0,"clr-signpost-content",4)(1,"h3"),ye(2,"Change detection"),H(),U(3,"p"),ye(4,"This badge changes its color any time angular's change-detection was executed."),H()()),2&c&&G("clrPosition","left-middle")}let yQe=(()=>{class c{constructor(){this.color="white"}ngAfterContentChecked(){this.color=this.getRandomColor()}getRandomColor(){let h="#";for(let d=0;d<6;d++)h+="0123456789ABCDEF"[Math.floor(16*Math.random())];return h}}return c.\u0275fac=function(a){return new(a||c)},c.\u0275cmp=Be({type:c,selectors:[["ukis-blinker"]],decls:6,vars:2,consts:[[2,"margin","0px"],[3,"clrPosition",4,"clrIfOpen"],[1,"label"],[1,"badge"],[3,"clrPosition"]],template:function(a,h){1&a&&(U(0,"p",0)(1,"clr-signpost"),le(2,gQe,5,1,"clr-signpost-content",1),H(),U(3,"span",2),ye(4," Change detected "),xe(5,"span",3),H()()),2&a&&(B(5),Kg("background-color",h.color))},dependencies:[aM,uT,PM],styles:[".blinker[_ngcontent-%COMP%]{width:10px;height:10px}"]}),c})();function pB(){return pB=ym(function*(c){return Kre(_Qe(),c,[]).then(l=>bQe(l))}),pB.apply(this,arguments)}function Kre(c,l,a){return mB.apply(this,arguments)}function mB(){return mB=ym(function*(c,l,a){return c.then(h=>(a.push(h),l>1?Kre(c,l-1,a):a))}),mB.apply(this,arguments)}function _Qe(){return gB.apply(this,arguments)}function gB(){return gB=ym(function*(){return new Promise((l,a)=>{const h=window.performance.now();setTimeout(()=>{const f=window.performance.now()-h;l(1e3/f)},0)})}),gB.apply(this,arguments)}function bQe(c){return function TQe(c){let l=0;for(const a of c)l+=a;return l}(c)/c.length}function wQe(c,l){1&c&&(U(0,"clr-signpost-content",4)(1,"h3"),ye(2,"Frames per second"),H(),U(3,"p"),ye(4,"Estimates the number of frames that are rendered per second."),H(),U(5,"p"),ye(6,"This is done by periodically measuring the time a call to "),U(7,"code"),ye(8,"setTimeout(() => ..., 0)"),H(),ye(9," takes."),H(),U(10,"p"),ye(11,"That call is made outside the angular-zone, so as not to trigger change-detection."),H(),U(12,"p"),ye(13,"Please not that in Chrome you can also monitor FPS from the developer-tools: Hit "),U(14,"code"),ye(15,"ctrl-shift-p"),H(),ye(16," and enter "),U(17,"code"),ye(18,"fps"),H(),ye(19," to find the FPS-meter."),H()()),2&c&&G("clrPosition","left-middle")}let CQe=(()=>{class c{constructor(a,h){this.ngZone=a,this.cdRef=h,this.pollingRate=1e3,this.precission=2,this.nrSamples=10,h.detach(),this.ngZone.runOutsideAngular(()=>{this.updateFps(this.pollingRate)})}updateFps(a){setTimeout(()=>{(function vQe(c){return pB.apply(this,arguments)})(this.nrSamples).then(h=>{this.fps=function SQe(c,l){const a=Math.pow(10,l);return Math.floor(c*a)/a}(h,this.precission),this.cdRef.detectChanges(),this.updateFps(a)})},a)}}return c.\u0275fac=function(a){return new(a||c)(N(kn),N(Ss))},c.\u0275cmp=Be({type:c,selectors:[["ukis-fpser"]],decls:7,vars:1,consts:[[2,"margin","0px"],[3,"clrPosition",4,"clrIfOpen"],[1,"label"],[1,"badge"],[3,"clrPosition"]],template:function(a,h){1&a&&(U(0,"p",0)(1,"clr-signpost"),le(2,wQe,20,1,"clr-signpost-content",1),H(),U(3,"span",2),ye(4," FPS: "),U(5,"span",3),ye(6),H()()()),2&a&&(B(6),Zt(h.fps))},dependencies:[aM,uT,PM]}),c})(),xQe=(()=>{class c{constructor(){}}return c.\u0275fac=function(a){return new(a||c)},c.\u0275cmp=Be({type:c,selectors:[["ukis-performance"]],decls:8,vars:0,consts:[[1,"clr-row"],[1,"clr-col-12"]],template:function(a,h){1&a&&(U(0,"p"),ye(1,"Load data and pan the map for a while to see a drop in performance."),H(),U(2,"div",0)(3,"div",1),xe(4,"ukis-blinker"),H()(),U(5,"div",0)(6,"div",1),xe(7,"ukis-fpser"),H()())},dependencies:[yQe,CQe]}),c})(),EQe=(()=>{class c{constructor(a,h,d,f){this.layersSvc=a,this.dataSvc=h,this.mapStateSvc=d,this.mapSvc=f,this.class="content-container",this.controls={attribution:!0,scaleLine:!0}}ngOnInit(){this.mapSvc.setProjection("EPSG:4326");const a=(v,_)=>{const b=v.getId().toString().match(/(\d+)/)[0],T=parseFloat(b),x=T%255,E=(T+20)%255,D=(T+40)%255;return new ui({stroke:new ws({color:"gray",width:1}),fill:new Si({color:`rgba(${x}, ${E}, ${D},0.7)`})})},h=new vy({visible:!0}),d=this.dataSvc.createWfsLayer("full","Fully loaded","all",a);d.description="Full dataset loaded at once.";const f=this.dataSvc.createWfsLayer("bbx","Current extent only","bbox",a);f.description="Bbox strategy: Only current bbox loaded at a time.";const m=this.dataSvc.createWfsLayer("simple","Simplified geometry","simplifyGeometry",a);m.description="Bbox strategy. Also: geometry simplified.";const g=this.dataSvc.createWfsLayer("noProps","No properties","noProps",a);g.description="Bbox strategy. Also: features have no properties.";const y=this.dataSvc.createWfsLayer("noStyle","No Styling","bbox");y.description="Bbox strategy. Also: no styling applied to features.",[h,d,f,m,g,y].map(v=>this.layersSvc.addLayer(v,"Layers"))}ngAfterViewInit(){this.mapSvc.map.getView().fit([-107.14,51.85,-106.14,52.33],{size:this.mapSvc.map.getSize()})}}return c.\u0275fac=function(a){return new(a||c)(N(Vs),N(mQe),N(Zs),N(Cs))},c.\u0275cmp=Be({type:c,selectors:[["app-route-map7"]],hostVars:2,hostBindings:function(a,h){2&a&&Yo(h.class)},features:[Mt([Vs,Zs,Cs])],decls:13,vars:9,consts:[[1,"content-area"],["id","olMap",3,"layersSvc","mapState","controls"],[1,"right",3,"clrVerticalNavCollapsible","clr-nav-level"],[1,"layers",3,"clrVerticalNavGroupExpanded"],["shape","clock","title","Performance","clrVerticalNavIcon",""],[1,"padding","title-ellipsis"],["shape","layers","clrVerticalNavIcon","","title","layers"],[3,"layersSvc","mapStateSvc"]],template:function(a,h){1&a&&(U(0,"main",0),xe(1,"ukis-map-ol",1),H(),U(2,"clr-vertical-nav",2)(3,"clr-vertical-nav-group",3),xe(4,"clr-icon",4),ye(5," Performance "),U(6,"clr-vertical-nav-group-children",5),xe(7,"ukis-performance"),H()(),U(8,"clr-vertical-nav-group",3),xe(9,"clr-icon",6),ye(10," Layers "),U(11,"clr-vertical-nav-group-children",5),xe(12,"ukis-layer-control",7),H()()()),2&a&&(B(1),G("layersSvc",h.layersSvc)("mapState",h.mapStateSvc)("controls",h.controls),B(1),G("clrVerticalNavCollapsible",!0)("clr-nav-level",2),B(1),G("clrVerticalNavGroupExpanded",!0),B(5),G("clrVerticalNavGroupExpanded",!0),B(4),G("layersSvc",h.layersSvc)("mapStateSvc",h.mapStateSvc))},dependencies:[fa,Bc,Bu,Uu,Gu,zu,Oh,Kh,xQe]}),c})();function yB(c,l,a){for(var T,x,E,D,I,M,h=[],d=c(0),f=c(1),m=l(d),g=l(f),y=[f,d],v=[g,m],_=[1,0],S={},b=1e5;--b>0&&_.length>0;)E=_.pop(),d=y.pop(),m=v.pop(),(M=E.toString())in S||(h.push(m[0],m[1]),S[M]=!0),D=_.pop(),f=y.pop(),g=v.pop(),YH((x=l(T=c(I=(E+D)/2)))[0],x[1],m[0],m[1],g[0],g[1])<a?(h.push(g[0],g[1]),S[M=D.toString()]=!0):(_.push(D,I,I,E),v.push(g,x,x,m),y.push(f,T,T,d));return h}var AQe=function(){var c=function(l,a){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,d){h.__proto__=d}||function(h,d){for(var f in d)Object.prototype.hasOwnProperty.call(d,f)&&(h[f]=d[f])})(l,a)};return function(l,a){if("function"!=typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");function h(){this.constructor=l}c(l,a),l.prototype=null===a?Object.create(a):(h.prototype=a.prototype,new h)}}(),IQe=new ws({color:"rgba(0,0,0,0.2)"}),RQe=[90,45,30,20,10,5,2,1,.5,.2,.1,.05,.01,.005,.002,.001],PQe=function(c){function l(a){var h=this,d=a||{},f=$n({updateWhileAnimating:!0,updateWhileInteracting:!0,renderBuffer:0},d);return delete f.maxLines,delete f.strokeStyle,delete f.targetSize,delete f.showLabels,delete f.lonLabelFormatter,delete f.latLabelFormatter,delete f.lonLabelPosition,delete f.latLabelPosition,delete f.lonLabelStyle,delete f.latLabelStyle,delete f.intervals,(h=c.call(this,f)||this).projection_=null,h.maxLat_=1/0,h.maxLon_=1/0,h.minLat_=-1/0,h.minLon_=-1/0,h.maxX_=1/0,h.maxY_=1/0,h.minX_=-1/0,h.minY_=-1/0,h.targetSize_=void 0!==d.targetSize?d.targetSize:100,h.maxLines_=void 0!==d.maxLines?d.maxLines:100,h.meridians_=[],h.parallels_=[],h.strokeStyle_=void 0!==d.strokeStyle?d.strokeStyle:IQe,h.fromLonLatTransform_=void 0,h.toLonLatTransform_=void 0,h.projectionCenterLonLat_=null,h.bottomLeft_=null,h.bottomRight_=null,h.topLeft_=null,h.topRight_=null,h.meridiansLabels_=null,h.parallelsLabels_=null,d.showLabels&&(h.lonLabelFormatter_=d.lonLabelFormatter??WC.bind(h,"EW"),h.latLabelFormatter_=d.latLabelFormatter??WC.bind(h,"NS"),h.lonLabelPosition_=d.lonLabelPosition??0,h.latLabelPosition_=d.latLabelPosition??1,h.lonLabelStyleBase_=new ui({text:void 0!==d.lonLabelStyle?d.lonLabelStyle.clone():new Zp({font:"12px Calibri,sans-serif",textBaseline:"bottom",fill:new Si({color:"rgba(0,0,0,1)"}),stroke:new ws({color:"rgba(255,255,255,1)",width:3})})}),h.lonLabelStyle_=function(m){var g=m.get("graticule_label");return this.lonLabelStyleBase_.getText().setText(g),this.lonLabelStyleBase_}.bind(h),h.latLabelStyleBase_=new ui({text:void 0!==d.latLabelStyle?d.latLabelStyle.clone():new Zp({font:"12px Calibri,sans-serif",textAlign:"right",fill:new Si({color:"rgba(0,0,0,1)"}),stroke:new ws({color:"rgba(255,255,255,1)",width:3})})}),h.latLabelStyle_=function(m){var g=m.get("graticule_label");return this.latLabelStyleBase_.getText().setText(g),this.latLabelStyleBase_}.bind(h),h.meridiansLabels_=[],h.parallelsLabels_=[],h.addEventListener("postrender",h.drawLabels_.bind(h))),h.intervals_=void 0!==d.intervals?d.intervals:RQe,h.setSource(new hi({loader:h.loaderFunction.bind(h),strategy:h.strategyFunction.bind(h),features:new co,overlaps:!1,useSpatialIndex:!1,wrapX:d.wrapX})),h.featurePool_=[],h.lineStyle_=new ui({stroke:h.strokeStyle_}),h.loadedExtent_=null,h.renderedExtent_=null,h.renderedResolution_=null,h.setRenderOrder(null),h}return AQe(l,c),l.prototype.strategyFunction=function(a,h){var d=a.slice();return this.projection_&&this.getSource().getWrapX()&&$H(d,this.projection_),this.loadedExtent_&&(function $ve(c,l,a){return Math.abs(c[0]-l[0])<a&&Math.abs(c[2]-l[2])<a&&Math.abs(c[1]-l[1])<a&&Math.abs(c[3]-l[3])<a}(this.loadedExtent_,d,h)?d=this.loadedExtent_.slice():this.getSource().removeLoadedExtent(this.loadedExtent_)),[d]},l.prototype.loaderFunction=function(a,h,d){this.loadedExtent_=a;var f=this.getSource(),g=mc(this.getExtent()||[-1/0,-1/0,1/0,1/0],a);if(!(this.renderedExtent_&&Ol(this.renderedExtent_,g)&&this.renderedResolution_===h||(this.renderedExtent_=g,this.renderedResolution_=h,Cy(g)))){var y=Jo(g),v=h*h/4;(!this.projection_||!bc(this.projection_,d))&&this.updateProjectionInfo_(d),this.createGraticule_(g,y,h,v);var b,S=this.meridians_.length+this.parallels_.length;for(this.meridiansLabels_&&(S+=this.meridians_.length),this.parallelsLabels_&&(S+=this.parallels_.length);S>this.featurePool_.length;)b=new Gy,this.featurePool_.push(b);var T=f.getFeaturesCollection();T.clear();var E,D,x=0;for(E=0,D=this.meridians_.length;E<D;++E)(b=this.featurePool_[x++]).setGeometry(this.meridians_[E]),b.setStyle(this.lineStyle_),T.push(b);for(E=0,D=this.parallels_.length;E<D;++E)(b=this.featurePool_[x++]).setGeometry(this.parallels_[E]),b.setStyle(this.lineStyle_),T.push(b)}},l.prototype.addMeridian_=function(a,h,d,f,m,g){var y=this.getMeridian_(a,h,d,f,g);if(Mi(y.getExtent(),m)){if(this.meridiansLabels_){var v=this.lonLabelFormatter_(a);g in this.meridiansLabels_?this.meridiansLabels_[g].text=v:this.meridiansLabels_[g]={geom:new yu([]),text:v}}this.meridians_[g++]=y}return g},l.prototype.addParallel_=function(a,h,d,f,m,g){var y=this.getParallel_(a,h,d,f,g);if(Mi(y.getExtent(),m)){if(this.parallelsLabels_){var v=this.latLabelFormatter_(a);g in this.parallelsLabels_?this.parallelsLabels_[g].text=v:this.parallelsLabels_[g]={geom:new yu([]),text:v}}this.parallels_[g++]=y}return g},l.prototype.drawLabels_=function(a){var h=a.frameState.viewState.rotation,d=a.frameState.viewState.resolution,f=a.frameState.size,m=a.frameState.extent,g=Jo(m),y=m;if(h){var v=f[0]*d,_=f[1]*d;y=[g[0]-v/2,g[1]-_/2,g[0]+v/2,g[1]+_/2]}var S=0,b=0,T=this.latLabelPosition_<.5,x=this.projection_.getExtent(),E=fr(x);this.getSource().getWrapX()&&this.projection_.canWrapX()&&!xa(x,m)&&(S=Math.floor((m[0]-x[0])/E),b=Math.ceil((m[2]-x[2])/E),T=T!==Math.abs(h)>Math.PI/2);for(var I=function f7e(c){if(!(c.context instanceof CanvasRenderingContext2D))throw new Error("Only works for render events from Canvas 2D layers");var f,l=c.inversePixelTransform[0],a=c.frameState,h=Sy(c.inversePixelTransform.slice(),a.coordinateToPixelTransform),d=B2(a.viewState.resolution,l),m=xS();return m&&(f=Sh(m,a.viewState.projection)),new X7(c.context,l,a.extent,h,a.viewState.rotation,d,f)}(a),M=S;M<=b;++M){var L=this.meridians_.length+this.parallels_.length,P=void 0,F=void 0,V=void 0,z=void 0;if(this.meridiansLabels_)for(F=0,V=this.meridiansLabels_.length;F<V;++F){var q=this.meridians_[F];h||0!==M?((K=q.clone()).translate(M*E,0),K.rotate(-h,g),(z=this.getMeridianPoint_(K,y,F)).rotate(h,g)):z=this.getMeridianPoint_(q,m,F),(P=this.featurePool_[L++]).setGeometry(z),P.set("graticule_label",this.meridiansLabels_[F].text),I.drawFeature(P,this.lonLabelStyle_(P))}if(this.parallelsLabels_&&(M===S&&T||M===b&&!T))for(F=0,V=this.parallels_.length;F<V;++F){var K;q=this.parallels_[F],h||0!==M?((K=q.clone()).translate(M*E,0),K.rotate(-h,g),(z=this.getParallelPoint_(K,y,F)).rotate(h,g)):z=this.getParallelPoint_(q,m,F),(P=this.featurePool_[L++]).setGeometry(z),P.set("graticule_label",this.parallelsLabels_[F].text),I.drawFeature(P,this.latLabelStyle_(P))}}},l.prototype.createGraticule_=function(a,h,d,f){var m=this.getInterval_(d);if(-1==m)return this.meridians_.length=0,this.parallels_.length=0,this.meridiansLabels_&&(this.meridiansLabels_.length=0),void(this.parallelsLabels_&&(this.parallelsLabels_.length=0));var g=!1,y=this.projection_.getExtent(),v=fr(y);this.getSource().getWrapX()&&this.projection_.canWrapX()&&!xa(y,a)&&(fr(a)>=v?(a[0]=y[0],a[2]=y[2]):g=!0);var _=[qn(h[0],this.minX_,this.maxX_),qn(h[1],this.minY_,this.maxY_)],S=this.toLonLatTransform_(_);isNaN(S[1])&&(S[1]=Math.abs(this.maxLat_)>=Math.abs(this.minLat_)?this.maxLat_:this.minLat_);var E,D,I,M,b=qn(S[0],this.minLon_,this.maxLon_),T=qn(S[1],this.minLat_,this.maxLat_),x=this.maxLines_,L=a;g||(L=[qn(a[0],this.minX_,this.maxX_),qn(a[1],this.minY_,this.maxY_),qn(a[2],this.minX_,this.maxX_),qn(a[3],this.minY_,this.maxY_)]);var P=GC(L,this.toLonLatTransform_,void 0,8),F=P[3],V=P[2],z=P[1],q=P[0];if(g||(Ll(L,this.bottomLeft_)&&(q=this.minLon_,z=this.minLat_),Ll(L,this.bottomRight_)&&(V=this.maxLon_,z=this.minLat_),Ll(L,this.topLeft_)&&(q=this.minLon_,F=this.maxLat_),Ll(L,this.topRight_)&&(V=this.maxLon_,F=this.maxLat_),F=qn(F,T,this.maxLat_),V=qn(V,b,this.maxLon_),z=qn(z,this.minLat_,T),q=qn(q,this.minLon_,b)),M=qn(b=Math.floor(b/m)*m,this.minLon_,this.maxLon_),D=this.addMeridian_(M,z,F,f,a,0),E=0,g)for(;(M-=m)>=q&&E++<x;)D=this.addMeridian_(M,z,F,f,a,D);else for(;M!=this.minLon_&&E++<x;)M=Math.max(M-m,this.minLon_),D=this.addMeridian_(M,z,F,f,a,D);if(M=qn(b,this.minLon_,this.maxLon_),E=0,g)for(;(M+=m)<=V&&E++<x;)D=this.addMeridian_(M,z,F,f,a,D);else for(;M!=this.maxLon_&&E++<x;)M=Math.min(M+m,this.maxLon_),D=this.addMeridian_(M,z,F,f,a,D);for(this.meridians_.length=D,this.meridiansLabels_&&(this.meridiansLabels_.length=D),I=qn(T=Math.floor(T/m)*m,this.minLat_,this.maxLat_),D=this.addParallel_(I,q,V,f,a,0),E=0;I!=this.minLat_&&E++<x;)I=Math.max(I-m,this.minLat_),D=this.addParallel_(I,q,V,f,a,D);for(I=qn(T,this.minLat_,this.maxLat_),E=0;I!=this.maxLat_&&E++<x;)I=Math.min(I+m,this.maxLat_),D=this.addParallel_(I,q,V,f,a,D);this.parallels_.length=D,this.parallelsLabels_&&(this.parallelsLabels_.length=D)},l.prototype.getInterval_=function(a){for(var h=this.projectionCenterLonLat_[0],d=this.projectionCenterLonLat_[1],f=-1,m=Math.pow(this.targetSize_*a,2),g=[],y=[],v=0,_=this.intervals_.length;v<_;++v){var S=qn(this.intervals_[v]/2,0,90),b=qn(d,-90+S,90-S);if(g[0]=h-S,g[1]=b-S,y[0]=h+S,y[1]=b+S,this.fromLonLatTransform_(g,g),this.fromLonLatTransform_(y,y),Math.pow(y[0]-g[0],2)+Math.pow(y[1]-g[1],2)<=m)break;f=this.intervals_[v]}return f},l.prototype.getMeridian_=function(a,h,d,f,m){var g=function MQe(c,l,a,h,d){return yB(function(m){return[c,l+(a-l)*m]},gu(cn("EPSG:4326"),h),d)}(a,h,d,this.projection_,f),y=this.meridians_[m];return y?(y.setFlatCoordinates("XY",g),y.changed()):(y=new Eh(g,"XY"),this.meridians_[m]=y),y},l.prototype.getMeridianPoint_=function(a,h,d){var f=a.getFlatCoordinates(),m=1,g=f.length-1;f[m]>f[g]&&(m=g,g=1);var y=Math.max(h[1],f[m]),v=Math.min(h[3],f[g]),_=qn(h[1]+Math.abs(h[1]-h[3])*this.lonLabelPosition_,y,v),T=this.meridiansLabels_[d].geom;return T.setCoordinates([f[m-1]+(f[g-1]-f[m-1])*(_-f[m])/(f[g]-f[m]),_]),T},l.prototype.getMeridians=function(){return this.meridians_},l.prototype.getParallel_=function(a,h,d,f,m){var g=function DQe(c,l,a,h,d){return yB(function(m){return[l+(a-l)*m,c]},gu(cn("EPSG:4326"),h),d)}(a,h,d,this.projection_,f),y=this.parallels_[m];return y?(y.setFlatCoordinates("XY",g),y.changed()):y=new Eh(g,"XY"),y},l.prototype.getParallelPoint_=function(a,h,d){var f=a.getFlatCoordinates(),m=0,g=f.length-2;f[m]>f[g]&&(m=g,g=0);var y=Math.max(h[0],f[m]),v=Math.min(h[2],f[g]),_=qn(h[0]+Math.abs(h[0]-h[2])*this.latLabelPosition_,y,v),T=this.parallelsLabels_[d].geom;return T.setCoordinates([_,f[m+1]+(f[g+1]-f[m+1])*(_-f[m])/(f[g]-f[m])]),T},l.prototype.getParallels=function(){return this.parallels_},l.prototype.updateProjectionInfo_=function(a){var h=cn("EPSG:4326"),d=a.getWorldExtent();this.maxLat_=d[3],this.maxLon_=d[2],this.minLat_=d[1],this.minLon_=d[0];var f=gu(a,h);if(this.minLon_<this.maxLon_)this.toLonLatTransform_=f;else{var m=this.minLon_+this.maxLon_/2;this.maxLon_+=360,this.toLonLatTransform_=function(y,v,_){for(var S=_||2,b=f(y,v,S),T=0,x=b.length;T<x;T+=S)b[T]<m&&(b[T]+=360);return b}}this.fromLonLatTransform_=gu(h,a);var g=GC([this.minLon_,this.minLat_,this.maxLon_,this.maxLat_],this.fromLonLatTransform_,void 0,8);this.minX_=g[0],this.maxX_=g[2],this.minY_=g[1],this.maxY_=g[3],this.bottomLeft_=this.fromLonLatTransform_([this.minLon_,this.minLat_]),this.bottomRight_=this.fromLonLatTransform_([this.maxLon_,this.minLat_]),this.topLeft_=this.fromLonLatTransform_([this.minLon_,this.maxLat_]),this.topRight_=this.fromLonLatTransform_([this.maxLon_,this.maxLat_]),this.projectionCenterLonLat_=this.toLonLatTransform_(Jo(a.getExtent())),isNaN(this.projectionCenterLonLat_[1])&&(this.projectionCenterLonLat_[1]=Math.abs(this.maxLat_)>=Math.abs(this.minLat_)?this.maxLat_:this.minLat_),this.projection_=a},l}(bu);const LQe=PQe;let OQe=(()=>{class c{constructor(a,h,d,f){this.layersSvc=a,this.mapStateSvc=h,this.mapOlSvc=d,this.mapThreeSvc=f,this.class="content-container",this.controls={attribution:!0,mousePosition:!0,scaleLine:!0,zoom:!0}}ngOnInit(){const a=new Su({source:new tb({url:"https://planetarymaps.usgs.gov/cgi-bin/mapserv?map=/maps/mars/phobos_simp_cyl.map",params:{LAYERS:"VIKING"},crossOrigin:"anonymous"})}),h=new LQe({showLabels:!0,wrapX:!0,latLabelPosition:.5}),d=new _i({id:"phobos",name:"Phobos",custom_layer:a,description:"There are a few objects that are very big, but still irregularly shaped.\n      Because they are big, it makes sense to serve their image-material per WMTS instead of a single, humongous file.\n      Because they are irregularly shaped, it makes sense to display them in 3d.\n\n      This demo shows how we can project openlayers-layers onto a three-js mesh to reap the benefits of both libraries."}),f=new _i({id:"graticule",name:"Graticule",custom_layer:h,description:"Note how adding and removing this layer is reflected in both the map and the 3d-object."});this.layersSvc.addLayer(d),this.layersSvc.addLayer(f)}ngAfterViewInit(){const a=cn("EPSG:4326");this.mapOlSvc.setProjection(a),this.mapOlSvc.map.getView().setMaxZoom(4)}}return c.\u0275fac=function(a){return new(a||c)(N(Vs),N(Zs),N(Cs),N(Ure))},c.\u0275cmp=Be({type:c,selectors:[["app-route-example-threejs"]],hostVars:2,hostBindings:function(a,h){2&a&&Yo(h.class)},features:[Mt([Vs,Cs])],decls:25,vars:10,consts:[[1,"content-area"],[2,"height","49.5%","width","100%"],["id","olMap",3,"layersSvc","mapState","controls"],[2,"height","50%","width","100%"],["id","threeMap",3,"mapOlSvc"],[1,"right",3,"clrVerticalNavCollapsible","clr-nav-level"],[1,"layers",3,"clrVerticalNavGroupExpanded"],["shape","info","clrVerticalNavIcon","","title","layers"],[1,"padding","title-ellipsis"],[1,"card",2,"margin","0px","margin-bottom","10px"],[1,"card-block"],[1,"card-text"],["shape","layers","clrVerticalNavIcon","","title","layers"],[1,"alert-item","static"],[1,"alert-text"],[3,"layersSvc","mapStateSvc"]],template:function(a,h){1&a&&(U(0,"main",0)(1,"div",1),xe(2,"ukis-map-ol",2),H(),U(3,"div",3),xe(4,"ukis-map-three",4),H()(),U(5,"clr-vertical-nav",5)(6,"clr-vertical-nav-group",6),xe(7,"clr-icon",7),ye(8," Phobos "),U(9,"clr-vertical-nav-group-children",8)(10,"div",9)(11,"div",10)(12,"div",11)(13,"p"),ye(14," This is a threejs/openlayers demo application. Here, we project an openlayers map as a canvas-texture onto a glTF model of the Mars-moon Phobos. "),H(),U(15,"p"),ye(16," There are some objects that are so irregular that they are better displayed with a three dimensional model, yet so large that their imagedata is best served per WMTS. Phobos is a good example of such an object. Note how the texture gets sharper when you zoom in: this is a new WMTS tile being loaded, projected and displayed on the fly. "),H()()()()()(),U(17,"clr-vertical-nav-group",6),xe(18,"clr-icon",12),ye(19," Layers "),U(20,"clr-vertical-nav-group-children",8)(21,"div",13)(22,"span",14),ye(23," The controls of map and 3d-object are synced. Use the mouse to pan around in either and watch both displays change. "),H()(),xe(24,"ukis-layer-control",15),H()()()),2&a&&(B(2),G("layersSvc",h.layersSvc)("mapState",h.mapStateSvc)("controls",h.controls),B(2),G("mapOlSvc",h.mapOlSvc),B(1),G("clrVerticalNavCollapsible",!0)("clr-nav-level",2),B(1),G("clrVerticalNavGroupExpanded",!0),B(11),G("clrVerticalNavGroupExpanded",!0),B(7),G("layersSvc",h.layersSvc)("mapStateSvc",h.mapStateSvc))},dependencies:[hk,fa,Bc,Bu,Uu,Gu,zu,Oh,XKe,Kh]}),c})(),NQe=(()=>{class c{constructor(a,h,d,f,m){this.layersSvc=a,this.mapStateSvc=h,this.mapSvc=d,this.owcSvc=f,this.http=m,this.class="content-container",this.controls={attribution:!0,scaleLine:!0}}ngOnInit(){this.mapSvc.map.addControl(new hq),this.getOwcContext("assets/owc/ows-json-context.json")}getOwcContext(a){return this.http.get(a).subscribe(h=>{this.addLayersFromContext(h)})}addLayersFromContext(a){this.layersSvc.removeLayers(h=>"osm"!==h.id&&"ContextSelectionLayer"!==h.id),this.owcSvc.getLayers(a,this.mapSvc.EPSG).pipe(qa()).subscribe(h=>{for(const d of h)d instanceof Oi?this.layersSvc.addLayerGroup(d,d.filtertype):this.layersSvc.addLayer(d,d.filtertype)}),a.bbox&&this.mapStateSvc.setExtent(a.bbox)}downloadOwc(){var a=this;return ym(function*(){const h=yield a.layersSvc.getLayerGroups().pipe(qa()).toPromise(),d=yield a.mapStateSvc.getExtent().pipe(qa()).toPromise(),f=a.owcSvc.generateOwsContextFrom("Test_OWC",h,d),m=new Blob([JSON.stringify(f)],{type:"application/json"}),g=URL.createObjectURL(m);window.open(g)})()}}return c.\u0275fac=function(a){return new(a||c)(N(Vs),N(Zs),N(Cs),N(FJ),N(qh))},c.\u0275cmp=Be({type:c,selectors:[["app-route-example-owc-layers"]],hostVars:2,hostBindings:function(a,h){2&a&&Yo(h.class)},features:[Mt([Vs,Zs,Cs])],decls:24,vars:15,consts:[[1,"content-area"],["id","olMap",3,"layersSvc","mapState","controls"],[1,"right",3,"clrVerticalNavCollapsible","clr-nav-level"],[1,"layers",3,"clrVerticalNavGroupExpanded"],["shape","world","title","Overlays","clrVerticalNavIcon",""],[1,"padding","title-ellipsis"],[3,"layersSvc","mapStateSvc","layerfilter"],["shape","layers","clrVerticalNavIcon","","title","layers"],[3,"layersSvc","mapStateSvc"],["shape","world","title","Baselayers","clrVerticalNavIcon",""],["shape","export","title","Export","clrVerticalNavIcon",""],[1,"btn","btn-primary",3,"click"]],template:function(a,h){1&a&&(U(0,"main",0),xe(1,"ukis-map-ol",1),H(),U(2,"clr-vertical-nav",2)(3,"clr-vertical-nav-group",3),xe(4,"clr-icon",4),ye(5," Overlays "),U(6,"clr-vertical-nav-group-children",5),xe(7,"ukis-layer-control",6),H()(),U(8,"clr-vertical-nav-group",3),xe(9,"clr-icon",7),ye(10," Layers "),U(11,"clr-vertical-nav-group-children",5),xe(12,"ukis-layer-control",8),H()(),U(13,"clr-vertical-nav-group",3),xe(14,"clr-icon",9),ye(15," Baselayers "),U(16,"clr-vertical-nav-group-children",5),xe(17,"ukis-base-layer-control",8),H()(),U(18,"clr-vertical-nav-group"),xe(19,"clr-icon",10),ye(20," OWC Control "),U(21,"clr-vertical-nav-group-children",5)(22,"button",11),Me("click",function(){return h.downloadOwc()}),ye(23,"Download OWC"),H()()()()),2&a&&(B(1),G("layersSvc",h.layersSvc)("mapState",h.mapStateSvc)("controls",h.controls),B(1),G("clrVerticalNavCollapsible",!0)("clr-nav-level",2),B(1),G("clrVerticalNavGroupExpanded",!0),B(4),G("layersSvc",h.layersSvc)("mapStateSvc",h.mapStateSvc)("layerfilter","Overlays"),B(1),G("clrVerticalNavGroupExpanded",!0),B(4),G("layersSvc",h.layersSvc)("mapStateSvc",h.mapStateSvc),B(1),G("clrVerticalNavGroupExpanded",!0),B(4),G("layersSvc",h.layersSvc)("mapStateSvc",h.mapStateSvc))},dependencies:[fa,Bc,Bu,Uu,Gu,zu,Oh,Kh,iD],styles:["[_nghost-%COMP%]     .zoom-number{bottom:2.5em;left:8px}"]}),c})();function FQe(c,l){if(1&c&&(U(0,"div",16),ye(1),H()),2&c){const a=de().$implicit;B(1),mi(" ",a.description," ")}}const Qre=function(c){return[c]};function kQe(c,l){if(1&c&&(U(0,"div",8)(1,"div",9)(2,"a",10)(3,"div",11),xe(4,"img",12),H()(),U(5,"div",13)(6,"a",10)(7,"div",14),ye(8),H()(),le(9,FQe,2,1,"div",15),H()()()),2&c){const a=l.$implicit;B(2),G("routerLink",gi(7,Qre,"/"+a.route))("title",a.title),B(2),G("src",a.previewUrl,Wa),B(2),G("routerLink",gi(9,Qre,"/"+a.route))("title",a.title),B(2),mi(" ",a.title," "),B(1),G("ngIf",null==a?null:a.description)}}const VQe=[{path:"",redirectTo:"examples",pathMatch:"full"},{path:"examples",component:(()=>{class c{constructor(a){this.router=a,this.class="content-container",this.availableBookmarks=[]}ngOnInit(){this.routes=this.router.config.filter(a=>a.data),this.availableBookmarks=this.routes.map(a=>({title:a.data.title,route:a.path,description:a.data.description,previewUrl:a.data.img}))}}return c.\u0275fac=function(a){return new(a||c)(N(lo))},c.\u0275cmp=Be({type:c,selectors:[["app-bookmarks"]],hostVars:2,hostBindings:function(a,h){2&a&&Yo(h.class)},decls:22,vars:1,consts:[[1,"content-area"],[1,"content-inner"],[1,"overview-title"],["href","https://github.com/dlr-eoc/ukis-frontend-libraries","target","_blank"],[1,"overview-description"],["href","https://clarity.design/documentation/app-layout","target","_blank"],[1,"clr-row","content-inner"],["class","clr-col-sm-4 clr-col-md-4 clr-col-lg-4",4,"ngFor","ngForOf"],[1,"clr-col-sm-4","clr-col-md-4","clr-col-lg-4"],[1,"card"],[3,"routerLink","title"],[1,"card-img"],["alt","preview image",3,"src"],[1,"card-block"],[1,"card-title"],["class","card-text",4,"ngIf"],[1,"card-text"]],template:function(a,h){1&a&&(U(0,"main",0)(1,"div",1)(2,"h3",2),ye(3,"This example application shows how to work with the "),U(4,"a",3),ye(5,"ukis-frontend-libraries"),H()(),U(6,"p",4),ye(7,"Each card brings you to a route component rendered inside a "),U(8,"code"),ye(9,"`router-outlet`"),H(),ye(10,". The components have a "),U(11,"code"),ye(12,"`content-container`"),H(),ye(13," class binding to make the layout structure of "),U(14,"a",5),ye(15,"Clarity Application Layout"),H(),ye(16," correct. Each map component uses providers for "),U(17,"code"),ye(18,"`LayersService`, `MapStateService`..."),H(),ye(19," so they are encapsulated and not shared between all the routes. "),H()(),U(20,"div",6),le(21,kQe,10,11,"div",7),H()()),2&a&&(B(21),G("ngForOf",h.availableBookmarks))},dependencies:[vi,vn,my],styles:[".content-inner[_ngcontent-%COMP%]{margin:.5rem;padding-bottom:.5rem}.content-inner[_ngcontent-%COMP%]   .overview-title[_ngcontent-%COMP%], .content-inner[_ngcontent-%COMP%]   .overview-description[_ngcontent-%COMP%]{text-align:center;margin:.5rem}.content-inner[_ngcontent-%COMP%]   .clr-col-sm-4[_ngcontent-%COMP%], .content-inner[_ngcontent-%COMP%]   .clr-col-md-4[_ngcontent-%COMP%], .content-inner[_ngcontent-%COMP%]   .clr-col-lg-4[_ngcontent-%COMP%]{padding-top:.5rem;padding-bottom:.5rem}.content-inner[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{margin-top:0;overflow:hidden}.content-inner[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]{display:flex;justify-content:space-around}.content-inner[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-img[_ngcontent-%COMP%]{max-width:400px}@media screen and (min-width: 575px){.content-inner[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{min-height:100%}}.content-inner[_ngcontent-%COMP%]   .card-title[_ngcontent-%COMP%]{font-size:1rem}.content-inner[_ngcontent-%COMP%]   .card-footer[_ngcontent-%COMP%]{display:flex;padding:0 .5rem;max-height:1.75rem;justify-content:space-between}.content-inner[_ngcontent-%COMP%]   .card-footer[_ngcontent-%COMP%]   .card-text[_ngcontent-%COMP%]{min-height:200px!important;margin-top:.4rem;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.content-inner[_ngcontent-%COMP%]   .card-footer[_ngcontent-%COMP%]   .card-text[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0}.content-inner[_ngcontent-%COMP%]   .card-footer[_ngcontent-%COMP%]   .info-icon[_ngcontent-%COMP%]{margin:0;padding-top:.5em;padding-left:.5em}.content-inner[_ngcontent-%COMP%]   .card-footer[_ngcontent-%COMP%]   .info-icon[_ngcontent-%COMP%]   clr-icon[_ngcontent-%COMP%]{height:20px;width:20px}"]}),c})()},{path:"example-layers",component:J9e,data:{title:"Layers",description:"Example shows how to work with UKIS layers, groups and the layer-service.",img:"assets/route-layers.jpg"}},{path:"example-projection",component:o7e,data:{title:"Projection",description:"Example shows how to work with projections using ukis-projection-switch from @dlr-eoc/map-tools.",img:"assets/route-projection.jpg"}},{path:"example-events",component:p7e,data:{title:"Events",description:"Example of map and layer events e.g. to show a loading bar or create a grid layer based on zoom.",img:"assets/route-events.jpg"}},{path:"example-custom-layers",component:nQe,data:{title:"Custom Layers",description:"Example how to use UKIS custom layer e.g. use OpenLayers instances directly, bind events, styles and renderers.",img:"assets/route-custom-layers.jpg"}},{path:"example-owc-layers",component:NQe,data:{title:"OWS Context layers",description:'Example how to declaratively configure layers in a json structure to save and exchange this state. This is using the "OWS Context GeoJSON format". The example context are sored in projects/shared-assets/owc.',img:"assets/route-ows-context.jpg"}},{path:"example-layout",component:oQe,data:{title:"Two Vertical-Nav Layout",description:'Example shows how to use "Clarity Vertical Nav" on both sides and a footer. This should not be used when working on smaller screens. See also "Clarity Design System" Responsive navigation.',img:"assets/route-2-nav.jpg"}},{path:"example-layer-style",component:uQe,data:{title:"Switching Layer-Style",description:'The example shows how styles for "WMS" and "WMTS" are switched dynamically.',img:"assets/route-style-switch.jpg"}},{path:"ol-performance",component:EQe,data:{title:"Ol-Performance",description:"Example to messure/check performance on layer rendering.",img:"assets/route-performance.jpg"}},{path:"threejs",component:OQe,data:{title:"Threejs",description:"This example shows a Threejs map connected to a OpenLayers map e.g. to display a globe and a flat map side by side.",img:"assets/route-threejs.jpg"}},{path:"licenses",component:pQe,data:{title:"Licenses",description:'This example renders all used dependencies specified in assets/licenses.json which are created with "license-checker"',img:"assets/route-licenses.jpg"}}];let BQe=(()=>{class c{}return c.\u0275fac=function(a){return new(a||c)},c.\u0275mod=Ut({type:c}),c.\u0275inj=kt({imports:[PH.forRoot(VQe,{useHash:!0,preloadingStrategy:sve,relativeLinkResolution:"legacy"}),PH]}),c})();typeof window<"u"&&window.hasOwnProperty("ClarityIcons")&&window.ClarityIcons.add({ukis:'\n                <svg version="1.1" viewBox="0 0 36 36" preserveAspectRatio="xMidYMid meet" class="has-solid"\n                    xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" focusable="false" role="img">\n                    <title>ukis</title>\n                    <path class="clr-i-solid clr-i-solid-path-1" d="M18,31.5c4.7,0,8.9-2.4,11.3-6.1H6.7C9.1,29.1,13.3,31.5,18,31.5z"/>\n                    <path class="clr-i-solid clr-i-solid-path-2" d="M4.5,17.1c0,0.3,0,0.6,0,0.9c0,1.7,0.3,3.4,0.9,4.9h21.2L4.5,17.1z"/>\n                    <path class="clr-i-solid clr-i-solid-path-3" d="M31,21.5c0.3-1.1,0.5-2.3,0.5-3.5c0-3-1-5.7-2.6-7.9L8.7,15.6L31,21.5z"/>\n                    <path class="clr-i-solid clr-i-solid-path-4" d="M18,4.5c-6,0-11.2,4-12.9,9.5l22-6C24.7,5.8,21.5,4.5,18,4.5z"/>\n                </svg>\n            ',dlr:'\n                <svg version="1.1" viewBox="0 0 36 36" preserveAspectRatio="xMidYMid meet" class="has-solid"\n                    xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" focusable="false" role="img">\n                    <title>dlr</title>\n                    <path class="clr-i-solid clr-i-solid-path-1" d="M25.8,13.2V3.8l-9.4,9.4h-8l-7.7,7.7l9.4,0v9.4l9.4-9.4h8l7.7-7.7H25.8L25.8,13.2z M23.9,8.5v4.7h-4.7L23.9,8.5\n                    L23.9,8.5z M5.4,18.9l3.8-3.8h5.3l-3.8,3.8H5.4L5.4,18.9z M12.1,25.6v-4.8h4.8L12.1,25.6L12.1,25.6z M18.8,18.9h-5.4l3.8-3.8h5.4\n                    L18.8,18.9L18.8,18.9z M26.8,18.9h-5.2l3.8-3.8h5.2L26.8,18.9L26.8,18.9z M19.6,26.5h1.6c1.8,0,3.3,0.6,3.3,2.9\n                    c0,2.3-1.6,2.9-3.3,2.9h-1.6V26.5L19.6,26.5z M20.8,31.3h0.6c1,0,1.9-0.7,1.9-2c0-1.2-0.9-2-1.9-2h-0.6V31.3L20.8,31.3z M25.7,26.5\n                    h1.1v4.8h2.2v0.9h-3.4V26.5L25.7,26.5z M30.1,26.5h1.2c1.2,0,2.7,0,2.7,1.6c0,0.7-0.5,1.2-1.2,1.3v0c0.3,0,0.5,0.3,0.6,0.6l0.9,2.2\n                    h-1.3l-0.7-1.8c-0.2-0.4-0.3-0.6-0.8-0.6h-0.4v2.4h-1.1V26.5L30.1,26.5z M31.3,28.9h0.4c0.6,0,1.2-0.1,1.2-0.8\n                    c0-0.7-0.6-0.7-1.2-0.7h-0.4V28.9L31.3,28.9z"/>\n                </svg>\n            ',eoc:'\n                <svg version="1.1" viewBox="0 0 580 220" preserveAspectRatio="xMidYMid meet" class="has-solid"\n                    xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" focusable="false" role="img">\n                    <title>eoc</title>\n                    <path class="clr-i-solid clr-i-solid-path-1" d="M284,210c-55.1,0-100-44.9-100-100S228.9,10,284,10s100,44.9,100,100S339.1,210,284,210z M284,28.2\n                    c-45.1,0-81.8,36.7-81.8,81.8s36.7,81.8,81.8,81.8s81.8-36.7,81.8-81.8S329.1,28.2,284,28.2z M566,180.7l-12.9-12.9\n                    c-31.9,31.9-83.8,31.9-115.7,0c-31.9-31.9-31.9-83.8,0-115.7c31.9-31.9,83.8-31.9,115.7,0L566,39.3c-39-39-102.5-39-141.5,0\n                    s-39,102.5,0,141.5c19.5,19.5,45.1,29.3,70.7,29.3S546.5,200.2,566,180.7z M184.7,180.7l-12.9-12.9c-31.9,31.9-83.8,31.9-115.7,0\n                    c-15.5-15.5-24-36-24-57.8c0-21.9,8.5-42.4,24-57.8c28.6-28.6,73.4-31.8,105.5-8.7l-67.8,75.2l13.5,12.2l80.3-89.1l-6.7-6.1\n                    C141.4,0.1,80.9,1.7,43.3,39.3C24.4,58.2,14,83.3,14,110c0,26.7,10.4,51.8,29.3,70.7C62.8,200.2,88.4,210,114,210\n                    C139.6,210,165.2,200.2,184.7,180.7z"/>\n                </svg>\n            '});const Jre=JSON.parse('{"i8":"0.0.0-PLACEHOLDER"}').i8;function GQe(c,l){if(1&c&&(U(0,"span",12),ye(1),H()),2&c){const a=de();B(1),Zt(a.version)}}const zQe=[[["",8,"header-nav-el"]],"*",[["",8,"header-action-el"]]],HQe=function(c){return{"short-title":c}},jQe=[".header-nav-el","*",".header-action-el"];let WQe=(()=>{class c{constructor(){this.title="",this.shortTitle="",this.version=""}ngOnInit(){}}return c.\u0275fac=function(a){return new(a||c)},c.\u0275cmp=Be({type:c,selectors:[["ukis-header"]],inputs:{title:["ukis-title","title"],shortTitle:["ukis-short-title","shortTitle"],version:["ukis-version","version"]},ngContentSelectors:jQe,decls:17,vars:9,consts:[[1,"header-1"],[1,"branding",3,"ngClass"],["href","https://www.dlr.de","target","_blank","alt","link to dlr"],["shape","dlr","size","48","alt","dlr icon",1,"is-solid"],["href","https://www.dlr.de/eoc/desktopdefault.aspx/tabid-5413/10560_read-21914","target","_blank","alt","link to dlr ukis"],["shape","ukis","size","33","alt","ukis icon",1,"is-solid"],["routerLink","/","routerLinkActive","active",1,"nav-link"],[1,"title",3,"title"],[1,"title","short",3,"title"],["class","version",4,"ngIf"],[1,"header-nav",3,"clr-nav-level"],[1,"header-actions"],[1,"version"]],template:function(a,h){1&a&&(Et(zQe),U(0,"clr-header",0)(1,"div",1)(2,"a",2),xe(3,"clr-icon",3),H(),U(4,"a",4),xe(5,"clr-icon",5),H(),U(6,"a",6)(7,"span",7),ye(8),H(),U(9,"span",8),ye(10),H()(),le(11,GQe,2,1,"span",9),H(),U(12,"div",10),ke(13),H(),ke(14,1),U(15,"div",11),ke(16,2),H()()),2&a&&(B(1),G("ngClass",gi(7,HQe,h.shortTitle)),B(6),G("title",h.title),B(1),Zt(h.title),B(1),G("title",h.title),B(1),Zt(h.shortTitle),B(1),G("ngIf",h.version),B(1),G("clr-nav-level",1))},dependencies:[$s,vn,my,RC,fa,cK,Bc,lK]}),c})();function XQe(c,l){if(1&c){const a=Xt();U(0,"button",11),Me("click",function(){const f=vt(a).$implicit;return _t(f.callback&&f.callback())}),ye(1),H()}if(2&c){const a=l.$implicit;B(1),Zt(a.title)}}function qQe(c,l){if(1&c&&(U(0,"div",9),le(1,XQe,2,1,"button",10),H()),2&c){const a=de(2);B(1),G("ngForOf",a.alert.actions)}}function $Qe(c,l){if(1&c){const a=Xt();U(0,"button",12),Me("click",function(){return vt(a),_t(de(2).close())}),xe(1,"clr-icon",13),H()}}function YQe(c,l){if(1&c&&(U(0,"div",1)(1,"div",2)(2,"div",3)(3,"div",4),xe(4,"clr-icon",5),H(),xe(5,"div",6),le(6,qQe,2,1,"div",7),H()(),le(7,$Qe,2,0,"button",8),H()),2&c){const a=de();G("ngClass","alert-"+a.alert.type),B(5),G("innerHTML",a.alert.text,dw),B(1),G("ngIf",a.alert.actions),B(1),G("ngIf",a.alert.closeable)}}let ZQe=(()=>{class c{constructor(){this.alertChange=new rt}close(){this.alert=null,this.alertChange.emit(this.alert)}}return c.\u0275fac=function(a){return new(a||c)},c.\u0275cmp=Be({type:c,selectors:[["ukis-global-alert"]],inputs:{alert:"alert"},outputs:{alertChange:"alertChange"},decls:1,vars:1,consts:[["class","alert alert-app-level","role","alert",3,"ngClass",4,"ngIf"],["role","alert",1,"alert","alert-app-level",3,"ngClass"],[1,"alert-items"],[1,"alert-item","static"],[1,"alert-icon-wrapper"],["shape","info-circle",1,"alert-icon"],[1,"alert-text",3,"innerHTML"],["class","alert-actions",4,"ngIf"],["type","button","class","close","aria-label","alert close",3,"click",4,"ngIf"],[1,"alert-actions"],["class","btn alert-action","aria-label","alert action",3,"click",4,"ngFor","ngForOf"],["aria-label","alert action",1,"btn","alert-action",3,"click"],["type","button","aria-label","alert close",1,"close",3,"click"],["aria-hidden","true","shape","close"]],template:function(a,h){1&a&&le(0,YQe,8,4,"div",0),2&a&&G("ngIf",h.alert)},dependencies:[$s,vi,vn,hk,fa]}),c})();function KQe(c,l){if(1&c&&(U(0,"span")(1,"div",1),xe(2,"progress"),H()()),2&c){const a=de();B(1),G("ngClass",a.getProgressClass())}}function QQe(c,l){if(1&c&&(U(0,"span")(1,"div",2),xe(2,"progress",3),H()()),2&c){const a=de();B(1),G("ngClass",a.getProgressClass()),B(1),Eo("max",a.progress.max),Eo("value",a.progress.value)}}let JQe=(()=>{class c{constructor(){this.progressChange=new rt}ngOnInit(){}getProgressClass(){return this.progress?.class?this.progress?.class:""}}return c.\u0275fac=function(a){return new(a||c)},c.\u0275cmp=Be({type:c,selectors:[["ukis-global-progress"]],inputs:{progress:"progress"},outputs:{progressChange:"progressChange"},decls:2,vars:2,consts:[[4,"ngIf"],[1,"progress","loop",3,"ngClass"],[1,"progress",3,"ngClass"],[3,"max","value"]],template:function(a,h){1&a&&(le(0,KQe,3,1,"span",0),le(1,QQe,3,3,"span",0)),2&a&&(G("ngIf",h.progress&&h.progress.indeterminate),B(1),G("ngIf",h.progress&&!h.progress.indeterminate))},dependencies:[$s,vn],styles:[".progress[_ngcontent-%COMP%]{height:.5em}"]}),c})();function eJe(c,l){if(1&c){const a=Xt();U(0,"ukis-global-alert",6),Me("alertChange",function(d){return vt(a),_t(de().ui.alert=d)}),H()}2&c&&G("alert",de().ui.alert)}function tJe(c,l){if(1&c){const a=Xt();U(0,"ukis-global-progress",7),Me("progressChange",function(d){return vt(a),_t(de().ui.progress=d)}),H()}2&c&&G("progress",de().ui.progress)}function nJe(c,l){if(1&c&&(U(0,"a",10),ye(1),H()),2&c){const a=de().$implicit;Yg("routerLink","/",a.path,""),B(1),Zt(a.data.title)}}function rJe(c,l){if(1&c&&(er(0,8),le(1,nJe,2,2,"a",9),tr()),2&c){const a=l.$implicit,h=de();B(1),G("ngIf",h.currentRoute===a.path)}}const iJe=function(c){return{floating:c}};let sJe=(()=>{class c{constructor(a,h,d){this.alertService=a,this.progressService=h,this.router=d,this.title="",this.shortTitle="",this.version="0.0.0-PLACEHOLDER"===Jre?null:Jre,this.ui={floating:!1,flipped:!1,alert:null,progress:null},this.subs=[],this.showProgress=f=>{this.ui.progress=f},this.setAlert=f=>{this.ui.alert=f},this.init(),this.routes=this.router.config.filter(f=>f.data)}ngOnInit(){const a=this.router.events.pipe(qr(h=>h instanceof Pd||h instanceof vC)).subscribe(h=>{const d=new URL(h.url,`${window.location.origin}${window.location.pathname}`);this.currentRoute="/examples"!==d.pathname?d.pathname.slice(1):null});this.subs.push(a)}ngOnDestroy(){this.subs.map(a=>a.unsubscribe())}init(){this.getHtmlMeta(["title","version","description","short-title"]),this.TITLE&&(this.title=this.TITLE),this["SHORT-TITLE"]&&(this.shortTitle=this["SHORT-TITLE"]),this.alertService.alert$.subscribe(a=>{this.setAlert(a)}),this.progressService.progress$.subscribe(a=>{this.showProgress(a)})}getHtmlMeta(a){const h=document.getElementsByTagName("meta");for(let d=0,f=h.length;d<f;d++){const m=h[d],g=m.getAttribute("name");a.includes(g)&&(this[g.toUpperCase()]=m.getAttribute("content")||m.getAttribute("value"))}}}return c.\u0275fac=function(a){return new(a||c)(N(T3),N(w3),N(lo))},c.\u0275cmp=Be({type:c,selectors:[["app-root"]],decls:8,vars:9,consts:[[3,"ngClass"],[3,"alert","alertChange",4,"ngIf"],[3,"progress","progressChange",4,"ngIf"],[3,"ukis-title","ukis-short-title","ukis-version"],["routerLink","/examples","routerLinkActive","active",1,"nav-link","nav-text","header-nav-el"],["class","nav-link nav-text header-nav-el",4,"ngFor","ngForOf"],[3,"alert","alertChange"],[3,"progress","progressChange"],[1,"nav-link","nav-text","header-nav-el"],["routerLinkActive","active","class","nav-link nav-text header-nav-el",3,"routerLink",4,"ngIf"],["routerLinkActive","active",1,"nav-link","nav-text","header-nav-el",3,"routerLink"]],template:function(a,h){1&a&&(U(0,"clr-main-container",0),le(1,eJe,1,1,"ukis-global-alert",1),le(2,tJe,1,1,"ukis-global-progress",2),U(3,"ukis-header",3)(4,"a",4),ye(5,"Examples"),H(),le(6,rJe,2,1,"ng-container",5),H(),xe(7,"router-outlet"),H()),2&a&&(G("ngClass",gi(7,iJe,h.ui.floating)),B(1),G("ngIf",h.ui.alert),B(1),G("ngIf",h.ui.progress),B(1),G("ukis-title",h.title)("ukis-short-title",h.shortTitle)("ukis-version",h.version),B(3),G("ngForOf",h.routes))},dependencies:[$s,vi,vn,SL,my,RC,aK,dk,WQe,ZQe,JQe]}),c})();function eie(c){return new it(3e3,!1)}function UJe(){return typeof window<"u"&&typeof window.document<"u"}function vB(){return typeof process<"u"&&"[object process]"==={}.toString.call(process)}function up(c){switch(c.length){case 0:return new Mb;case 1:return c[0];default:return new t$(c)}}function tie(c,l,a,h,d=new Map,f=new Map){const m=[],g=[];let y=-1,v=null;if(h.forEach(_=>{const S=_.get("offset"),b=S==y,T=b&&v||new Map;_.forEach((x,E)=>{let D=E,I=x;if("offset"!==E)switch(D=l.normalizePropertyName(D,m),I){case"!":I=d.get(E);break;case Fh:I=f.get(E);break;default:I=l.normalizeStyleValue(E,D,I,m)}T.set(D,I)}),b||g.push(T),v=T,y=S}),m.length)throw function DJe(c){return new it(3502,!1)}();return g}function _B(c,l,a,h){switch(l){case"start":c.onStart(()=>h(a&&SB(a,"start",c)));break;case"done":c.onDone(()=>h(a&&SB(a,"done",c)));break;case"destroy":c.onDestroy(()=>h(a&&SB(a,"destroy",c)))}}function SB(c,l,a){const f=bB(c.element,c.triggerName,c.fromState,c.toState,l||c.phaseName,a.totalTime??c.totalTime,!!a.disabled),m=c._data;return null!=m&&(f._data=m),f}function bB(c,l,a,h,d="",f=0,m){return{element:c,triggerName:l,fromState:a,toState:h,phaseName:d,totalTime:f,disabled:!!m}}function vl(c,l,a){let h=c.get(l);return h||c.set(l,h=a),h}function nie(c){const l=c.indexOf(":");return[c.substring(1,l),c.slice(l+1)]}let TB=(c,l)=>!1,rie=(c,l,a)=>[],iie=null;function wB(c){const l=c.parentNode||c.host;return l===iie?null:l}(vB()||typeof Element<"u")&&(UJe()?(iie=(()=>document.documentElement)(),TB=(c,l)=>{for(;l;){if(l===c)return!0;l=wB(l)}return!1}):TB=(c,l)=>c.contains(l),rie=(c,l,a)=>{if(a)return Array.from(c.querySelectorAll(l));const h=c.querySelector(l);return h?[h]:[]});let sg=null,sie=!1;const oie=TB,aie=rie;let lie=(()=>{class c{validateStyleProperty(a){return function zJe(c){sg||(sg=function HJe(){return typeof document<"u"?document.body:null}()||{},sie=!!sg.style&&"WebkitAppearance"in sg.style);let l=!0;return sg.style&&!function GJe(c){return"ebkit"==c.substring(1,6)}(c)&&(l=c in sg.style,!l&&sie&&(l="Webkit"+c.charAt(0).toUpperCase()+c.slice(1)in sg.style)),l}(a)}matchesElement(a,h){return!1}containsElement(a,h){return oie(a,h)}getParentElement(a){return wB(a)}query(a,h,d){return aie(a,h,d)}computeStyle(a,h,d){return d||""}animate(a,h,d,f,m,g=[],y){return new Mb(d,f)}}return c.\u0275fac=function(a){return new(a||c)},c.\u0275prov=Oe({token:c,factory:c.\u0275fac}),c})(),CB=(()=>{class c{}return c.NOOP=new lie,c})();const xB="ng-enter",LA="ng-leave",OA="ng-trigger",NA=".ng-trigger",uie="ng-animating",EB=".ng-animating";function hp(c){if("number"==typeof c)return c;const l=c.match(/^(-?[\.\d]+)(m?s)/);return!l||l.length<2?0:MB(parseFloat(l[1]),l[2])}function MB(c,l){return"s"===l?1e3*c:c}function FA(c,l,a){return c.hasOwnProperty("duration")?c:function XJe(c,l,a){let d,f=0,m="";if("string"==typeof c){const g=c.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===g)return l.push(eie()),{duration:0,delay:0,easing:""};d=MB(parseFloat(g[1]),g[2]);const y=g[3];null!=y&&(f=MB(parseFloat(y),g[4]));const v=g[5];v&&(m=v)}else d=c;if(!a){let g=!1,y=l.length;d<0&&(l.push(function oJe(){return new it(3100,!1)}()),g=!0),f<0&&(l.push(function aJe(){return new it(3101,!1)}()),g=!0),g&&l.splice(y,0,eie())}return{duration:d,delay:f,easing:m}}(c,l,a)}function I1(c,l={}){return Object.keys(c).forEach(a=>{l[a]=c[a]}),l}function hie(c){const l=new Map;return Object.keys(c).forEach(a=>{l.set(a,c[a])}),l}function dp(c,l=new Map,a){if(a)for(let[h,d]of a)l.set(h,d);for(let[h,d]of c)l.set(h,d);return l}function fie(c,l,a){return a?l+":"+a+";":""}function pie(c){let l="";for(let a=0;a<c.style.length;a++){const h=c.style.item(a);l+=fie(0,h,c.style.getPropertyValue(h))}for(const a in c.style)c.style.hasOwnProperty(a)&&!a.startsWith("_")&&(l+=fie(0,ZJe(a),c.style[a]));c.setAttribute("style",l)}function Ku(c,l,a){c.style&&(l.forEach((h,d)=>{const f=AB(d);a&&!a.has(d)&&a.set(d,c.style[f]),c.style[f]=h}),vB()&&pie(c))}function og(c,l){c.style&&(l.forEach((a,h)=>{const d=AB(h);c.style[d]=""}),vB()&&pie(c))}function R1(c){return Array.isArray(c)?1==c.length?c[0]:Jq(c):c}const DB=new RegExp("{{\\s*(.+?)\\s*}}","g");function mie(c){let l=[];if("string"==typeof c){let a;for(;a=DB.exec(c);)l.push(a[1]);DB.lastIndex=0}return l}function kA(c,l,a){const h=c.toString(),d=h.replace(DB,(f,m)=>{let g=l[m];return null==g&&(a.push(function cJe(c){return new it(3003,!1)}()),g=""),g.toString()});return d==h?c:d}function VA(c){const l=[];let a=c.next();for(;!a.done;)l.push(a.value),a=c.next();return l}const YJe=/-+([a-z0-9])/g;function AB(c){return c.replace(YJe,(...l)=>l[1].toUpperCase())}function ZJe(c){return c.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function _l(c,l,a){switch(l.type){case 7:return c.visitTrigger(l,a);case 0:return c.visitState(l,a);case 1:return c.visitTransition(l,a);case 2:return c.visitSequence(l,a);case 3:return c.visitGroup(l,a);case 4:return c.visitAnimate(l,a);case 5:return c.visitKeyframes(l,a);case 6:return c.visitStyle(l,a);case 8:return c.visitReference(l,a);case 9:return c.visitAnimateChild(l,a);case 10:return c.visitAnimateRef(l,a);case 11:return c.visitQuery(l,a);case 12:return c.visitStagger(l,a);default:throw function uJe(c){return new it(3004,!1)}()}}function gie(c,l){return window.getComputedStyle(c)[l]}function net(c,l){const a=[];return"string"==typeof c?c.split(/\s*,\s*/).forEach(h=>function ret(c,l,a){if(":"==c[0]){const y=function iet(c,l){switch(c){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(a,h)=>parseFloat(h)>parseFloat(a);case":decrement":return(a,h)=>parseFloat(h)<parseFloat(a);default:return l.push(function CJe(c){return new it(3016,!1)}()),"* => *"}}(c,a);if("function"==typeof y)return void l.push(y);c=y}const h=c.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==h||h.length<4)return a.push(function wJe(c){return new it(3015,!1)}()),l;const d=h[1],f=h[2],m=h[3];l.push(yie(d,m));"<"==f[0]&&!("*"==d&&"*"==m)&&l.push(yie(m,d))}(h,a,l)):a.push(c),a}const zA=new Set(["true","1"]),HA=new Set(["false","0"]);function yie(c,l){const a=zA.has(c)||HA.has(c),h=zA.has(l)||HA.has(l);return(d,f)=>{let m="*"==c||c==d,g="*"==l||l==f;return!m&&a&&"boolean"==typeof d&&(m=d?zA.has(c):HA.has(c)),!g&&h&&"boolean"==typeof f&&(g=f?zA.has(l):HA.has(l)),m&&g}}const set=new RegExp("s*:selfs*,?","g");function IB(c,l,a,h){return new oet(c).build(l,a,h)}class oet{constructor(l){this._driver=l}build(l,a,h){const d=new uet(a);return this._resetContextStyleTimingState(d),_l(this,R1(l),d)}_resetContextStyleTimingState(l){l.currentQuerySelector="",l.collectedStyles=new Map,l.collectedStyles.set("",new Map),l.currentTime=0}visitTrigger(l,a){let h=a.queryCount=0,d=a.depCount=0;const f=[],m=[];return"@"==l.name.charAt(0)&&a.errors.push(function dJe(){return new it(3006,!1)}()),l.definitions.forEach(g=>{if(this._resetContextStyleTimingState(a),0==g.type){const y=g,v=y.name;v.toString().split(/\s*,\s*/).forEach(_=>{y.name=_,f.push(this.visitState(y,a))}),y.name=v}else if(1==g.type){const y=this.visitTransition(g,a);h+=y.queryCount,d+=y.depCount,m.push(y)}else a.errors.push(function fJe(){return new it(3007,!1)}())}),{type:7,name:l.name,states:f,transitions:m,queryCount:h,depCount:d,options:null}}visitState(l,a){const h=this.visitStyle(l.styles,a),d=l.options&&l.options.params||null;if(h.containsDynamicStyles){const f=new Set,m=d||{};h.styles.forEach(g=>{g instanceof Map&&g.forEach(y=>{mie(y).forEach(v=>{m.hasOwnProperty(v)||f.add(v)})})}),f.size&&(VA(f.values()),a.errors.push(function pJe(c,l){return new it(3008,!1)}()))}return{type:0,name:l.name,style:h,options:d?{params:d}:null}}visitTransition(l,a){a.queryCount=0,a.depCount=0;const h=_l(this,R1(l.animation),a);return{type:1,matchers:net(l.expr,a.errors),animation:h,queryCount:a.queryCount,depCount:a.depCount,options:ag(l.options)}}visitSequence(l,a){return{type:2,steps:l.steps.map(h=>_l(this,h,a)),options:ag(l.options)}}visitGroup(l,a){const h=a.currentTime;let d=0;const f=l.steps.map(m=>{a.currentTime=h;const g=_l(this,m,a);return d=Math.max(d,a.currentTime),g});return a.currentTime=d,{type:3,steps:f,options:ag(l.options)}}visitAnimate(l,a){const h=function det(c,l){if(c.hasOwnProperty("duration"))return c;if("number"==typeof c)return RB(FA(c,l).duration,0,"");const a=c;if(a.split(/\s+/).some(f=>"{"==f.charAt(0)&&"{"==f.charAt(1))){const f=RB(0,0,"");return f.dynamic=!0,f.strValue=a,f}const d=FA(a,l);return RB(d.duration,d.delay,d.easing)}(l.timings,a.errors);a.currentAnimateTimings=h;let d,f=l.styles?l.styles:gr({});if(5==f.type)d=this.visitKeyframes(f,a);else{let m=l.styles,g=!1;if(!m){g=!0;const v={};h.easing&&(v.easing=h.easing),m=gr(v)}a.currentTime+=h.duration+h.delay;const y=this.visitStyle(m,a);y.isEmptyStep=g,d=y}return a.currentAnimateTimings=null,{type:4,timings:h,style:d,options:null}}visitStyle(l,a){const h=this._makeStyleAst(l,a);return this._validateStyleAst(h,a),h}_makeStyleAst(l,a){const h=[],d=Array.isArray(l.styles)?l.styles:[l.styles];for(let g of d)"string"==typeof g?g===Fh?h.push(g):a.errors.push(new it(3002,!1)):h.push(hie(g));let f=!1,m=null;return h.forEach(g=>{if(g instanceof Map&&(g.has("easing")&&(m=g.get("easing"),g.delete("easing")),!f))for(let y of g.values())if(y.toString().indexOf("{{")>=0){f=!0;break}}),{type:6,styles:h,easing:m,offset:l.offset,containsDynamicStyles:f,options:null}}_validateStyleAst(l,a){const h=a.currentAnimateTimings;let d=a.currentTime,f=a.currentTime;h&&f>0&&(f-=h.duration+h.delay),l.styles.forEach(m=>{"string"!=typeof m&&m.forEach((g,y)=>{const v=a.collectedStyles.get(a.currentQuerySelector),_=v.get(y);let S=!0;_&&(f!=d&&f>=_.startTime&&d<=_.endTime&&(a.errors.push(function gJe(c,l,a,h,d){return new it(3010,!1)}()),S=!1),f=_.startTime),S&&v.set(y,{startTime:f,endTime:d}),a.options&&function $Je(c,l,a){const h=l.params||{},d=mie(c);d.length&&d.forEach(f=>{h.hasOwnProperty(f)||a.push(function lJe(c){return new it(3001,!1)}())})}(g,a.options,a.errors)})})}visitKeyframes(l,a){const h={type:5,styles:[],options:null};if(!a.currentAnimateTimings)return a.errors.push(function yJe(){return new it(3011,!1)}()),h;let f=0;const m=[];let g=!1,y=!1,v=0;const _=l.steps.map(I=>{const M=this._makeStyleAst(I,a);let L=null!=M.offset?M.offset:function het(c){if("string"==typeof c)return null;let l=null;if(Array.isArray(c))c.forEach(a=>{if(a instanceof Map&&a.has("offset")){const h=a;l=parseFloat(h.get("offset")),h.delete("offset")}});else if(c instanceof Map&&c.has("offset")){const a=c;l=parseFloat(a.get("offset")),a.delete("offset")}return l}(M.styles),P=0;return null!=L&&(f++,P=M.offset=L),y=y||P<0||P>1,g=g||P<v,v=P,m.push(P),M});y&&a.errors.push(function vJe(){return new it(3012,!1)}()),g&&a.errors.push(function _Je(){return new it(3200,!1)}());const S=l.steps.length;let b=0;f>0&&f<S?a.errors.push(function SJe(){return new it(3202,!1)}()):0==f&&(b=1/(S-1));const T=S-1,x=a.currentTime,E=a.currentAnimateTimings,D=E.duration;return _.forEach((I,M)=>{const L=b>0?M==T?1:b*M:m[M],P=L*D;a.currentTime=x+E.delay+P,E.duration=P,this._validateStyleAst(I,a),I.offset=L,h.styles.push(I)}),h}visitReference(l,a){return{type:8,animation:_l(this,R1(l.animation),a),options:ag(l.options)}}visitAnimateChild(l,a){return a.depCount++,{type:9,options:ag(l.options)}}visitAnimateRef(l,a){return{type:10,animation:this.visitReference(l.animation,a),options:ag(l.options)}}visitQuery(l,a){const h=a.currentQuerySelector,d=l.options||{};a.queryCount++,a.currentQuery=l;const[f,m]=function aet(c){const l=!!c.split(/\s*,\s*/).find(a=>":self"==a);return l&&(c=c.replace(set,"")),c=c.replace(/@\*/g,NA).replace(/@\w+/g,a=>NA+"-"+a.slice(1)).replace(/:animating/g,EB),[c,l]}(l.selector);a.currentQuerySelector=h.length?h+" "+f:f,vl(a.collectedStyles,a.currentQuerySelector,new Map);const g=_l(this,R1(l.animation),a);return a.currentQuery=null,a.currentQuerySelector=h,{type:11,selector:f,limit:d.limit||0,optional:!!d.optional,includeSelf:m,animation:g,originalSelector:l.selector,options:ag(l.options)}}visitStagger(l,a){a.currentQuery||a.errors.push(function bJe(){return new it(3013,!1)}());const h="full"===l.timings?{duration:0,delay:0,easing:"full"}:FA(l.timings,a.errors,!0);return{type:12,animation:_l(this,R1(l.animation),a),timings:h,options:null}}}class uet{constructor(l){this.errors=l,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function ag(c){return c?(c=I1(c)).params&&(c.params=function cet(c){return c?I1(c):null}(c.params)):c={},c}function RB(c,l,a){return{duration:c,delay:l,easing:a}}function PB(c,l,a,h,d,f,m=null,g=!1){return{type:1,element:c,keyframes:l,preStyleProps:a,postStyleProps:h,duration:d,delay:f,totalTime:d+f,easing:m,subTimeline:g}}class jA{constructor(){this._map=new Map}get(l){return this._map.get(l)||[]}append(l,a){let h=this._map.get(l);h||this._map.set(l,h=[]),h.push(...a)}has(l){return this._map.has(l)}clear(){this._map.clear()}}const met=new RegExp(":enter","g"),yet=new RegExp(":leave","g");function LB(c,l,a,h,d,f=new Map,m=new Map,g,y,v=[]){return(new vet).buildKeyframes(c,l,a,h,d,f,m,g,y,v)}class vet{buildKeyframes(l,a,h,d,f,m,g,y,v,_=[]){v=v||new jA;const S=new OB(l,a,v,d,f,_,[]);S.options=y;const b=y.delay?hp(y.delay):0;S.currentTimeline.delayNextStep(b),S.currentTimeline.setStyles([m],null,S.errors,y),_l(this,h,S);const T=S.timelines.filter(x=>x.containsAnimation());if(T.length&&g.size){let x;for(let E=T.length-1;E>=0;E--){const D=T[E];if(D.element===a){x=D;break}}x&&!x.allowOnlyTimelineStyles()&&x.setStyles([g],null,S.errors,y)}return T.length?T.map(x=>x.buildKeyframes()):[PB(a,[],[],[],0,b,"",!1)]}visitTrigger(l,a){}visitState(l,a){}visitTransition(l,a){}visitAnimateChild(l,a){const h=a.subInstructions.get(a.element);if(h){const d=a.createSubContext(l.options),f=a.currentTimeline.currentTime,m=this._visitSubInstructions(h,d,d.options);f!=m&&a.transformIntoNewTimeline(m)}a.previousNode=l}visitAnimateRef(l,a){const h=a.createSubContext(l.options);h.transformIntoNewTimeline(),this.visitReference(l.animation,h),a.transformIntoNewTimeline(h.currentTimeline.currentTime),a.previousNode=l}_visitSubInstructions(l,a,h){let f=a.currentTimeline.currentTime;const m=null!=h.duration?hp(h.duration):null,g=null!=h.delay?hp(h.delay):null;return 0!==m&&l.forEach(y=>{const v=a.appendInstructionToTimeline(y,m,g);f=Math.max(f,v.duration+v.delay)}),f}visitReference(l,a){a.updateOptions(l.options,!0),_l(this,l.animation,a),a.previousNode=l}visitSequence(l,a){const h=a.subContextCount;let d=a;const f=l.options;if(f&&(f.params||f.delay)&&(d=a.createSubContext(f),d.transformIntoNewTimeline(),null!=f.delay)){6==d.previousNode.type&&(d.currentTimeline.snapshotCurrentStyles(),d.previousNode=WA);const m=hp(f.delay);d.delayNextStep(m)}l.steps.length&&(l.steps.forEach(m=>_l(this,m,d)),d.currentTimeline.applyStylesToKeyframe(),d.subContextCount>h&&d.transformIntoNewTimeline()),a.previousNode=l}visitGroup(l,a){const h=[];let d=a.currentTimeline.currentTime;const f=l.options&&l.options.delay?hp(l.options.delay):0;l.steps.forEach(m=>{const g=a.createSubContext(l.options);f&&g.delayNextStep(f),_l(this,m,g),d=Math.max(d,g.currentTimeline.currentTime),h.push(g.currentTimeline)}),h.forEach(m=>a.currentTimeline.mergeTimelineCollectedStyles(m)),a.transformIntoNewTimeline(d),a.previousNode=l}_visitTiming(l,a){if(l.dynamic){const h=l.strValue;return FA(a.params?kA(h,a.params,a.errors):h,a.errors)}return{duration:l.duration,delay:l.delay,easing:l.easing}}visitAnimate(l,a){const h=a.currentAnimateTimings=this._visitTiming(l.timings,a),d=a.currentTimeline;h.delay&&(a.incrementTime(h.delay),d.snapshotCurrentStyles());const f=l.style;5==f.type?this.visitKeyframes(f,a):(a.incrementTime(h.duration),this.visitStyle(f,a),d.applyStylesToKeyframe()),a.currentAnimateTimings=null,a.previousNode=l}visitStyle(l,a){const h=a.currentTimeline,d=a.currentAnimateTimings;!d&&h.hasCurrentStyleProperties()&&h.forwardFrame();const f=d&&d.easing||l.easing;l.isEmptyStep?h.applyEmptyStep(f):h.setStyles(l.styles,f,a.errors,a.options),a.previousNode=l}visitKeyframes(l,a){const h=a.currentAnimateTimings,d=a.currentTimeline.duration,f=h.duration,g=a.createSubContext().currentTimeline;g.easing=h.easing,l.styles.forEach(y=>{g.forwardTime((y.offset||0)*f),g.setStyles(y.styles,y.easing,a.errors,a.options),g.applyStylesToKeyframe()}),a.currentTimeline.mergeTimelineCollectedStyles(g),a.transformIntoNewTimeline(d+f),a.previousNode=l}visitQuery(l,a){const h=a.currentTimeline.currentTime,d=l.options||{},f=d.delay?hp(d.delay):0;f&&(6===a.previousNode.type||0==h&&a.currentTimeline.hasCurrentStyleProperties())&&(a.currentTimeline.snapshotCurrentStyles(),a.previousNode=WA);let m=h;const g=a.invokeQuery(l.selector,l.originalSelector,l.limit,l.includeSelf,!!d.optional,a.errors);a.currentQueryTotal=g.length;let y=null;g.forEach((v,_)=>{a.currentQueryIndex=_;const S=a.createSubContext(l.options,v);f&&S.delayNextStep(f),v===a.element&&(y=S.currentTimeline),_l(this,l.animation,S),S.currentTimeline.applyStylesToKeyframe(),m=Math.max(m,S.currentTimeline.currentTime)}),a.currentQueryIndex=0,a.currentQueryTotal=0,a.transformIntoNewTimeline(m),y&&(a.currentTimeline.mergeTimelineCollectedStyles(y),a.currentTimeline.snapshotCurrentStyles()),a.previousNode=l}visitStagger(l,a){const h=a.parentContext,d=a.currentTimeline,f=l.timings,m=Math.abs(f.duration),g=m*(a.currentQueryTotal-1);let y=m*a.currentQueryIndex;switch(f.duration<0?"reverse":f.easing){case"reverse":y=g-y;break;case"full":y=h.currentStaggerTime}const _=a.currentTimeline;y&&_.delayNextStep(y);const S=_.currentTime;_l(this,l.animation,a),a.previousNode=l,h.currentStaggerTime=d.currentTime-S+(d.startTime-h.currentTimeline.startTime)}}const WA={};class OB{constructor(l,a,h,d,f,m,g,y){this._driver=l,this.element=a,this.subInstructions=h,this._enterClassName=d,this._leaveClassName=f,this.errors=m,this.timelines=g,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=WA,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=y||new XA(this._driver,a,0),g.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(l,a){if(!l)return;const h=l;let d=this.options;null!=h.duration&&(d.duration=hp(h.duration)),null!=h.delay&&(d.delay=hp(h.delay));const f=h.params;if(f){let m=d.params;m||(m=this.options.params={}),Object.keys(f).forEach(g=>{(!a||!m.hasOwnProperty(g))&&(m[g]=kA(f[g],m,this.errors))})}}_copyOptions(){const l={};if(this.options){const a=this.options.params;if(a){const h=l.params={};Object.keys(a).forEach(d=>{h[d]=a[d]})}}return l}createSubContext(l=null,a,h){const d=a||this.element,f=new OB(this._driver,d,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(d,h||0));return f.previousNode=this.previousNode,f.currentAnimateTimings=this.currentAnimateTimings,f.options=this._copyOptions(),f.updateOptions(l),f.currentQueryIndex=this.currentQueryIndex,f.currentQueryTotal=this.currentQueryTotal,f.parentContext=this,this.subContextCount++,f}transformIntoNewTimeline(l){return this.previousNode=WA,this.currentTimeline=this.currentTimeline.fork(this.element,l),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(l,a,h){const d={duration:a??l.duration,delay:this.currentTimeline.currentTime+(h??0)+l.delay,easing:""},f=new _et(this._driver,l.element,l.keyframes,l.preStyleProps,l.postStyleProps,d,l.stretchStartingKeyframe);return this.timelines.push(f),d}incrementTime(l){this.currentTimeline.forwardTime(this.currentTimeline.duration+l)}delayNextStep(l){l>0&&this.currentTimeline.delayNextStep(l)}invokeQuery(l,a,h,d,f,m){let g=[];if(d&&g.push(this.element),l.length>0){l=(l=l.replace(met,"."+this._enterClassName)).replace(yet,"."+this._leaveClassName);let v=this._driver.query(this.element,l,1!=h);0!==h&&(v=h<0?v.slice(v.length+h,v.length):v.slice(0,h)),g.push(...v)}return!f&&0==g.length&&m.push(function TJe(c){return new it(3014,!1)}()),g}}class XA{constructor(l,a,h,d){this._driver=l,this.element=a,this.startTime=h,this._elementTimelineStylesLookup=d,this.duration=0,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(a),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(a,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(l){const a=1===this._keyframes.size&&this._pendingStyles.size;this.duration||a?(this.forwardTime(this.currentTime+l),a&&this.snapshotCurrentStyles()):this.startTime+=l}fork(l,a){return this.applyStylesToKeyframe(),new XA(this._driver,l,a||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(l){this.applyStylesToKeyframe(),this.duration=l,this._loadKeyframe()}_updateStyle(l,a){this._localTimelineStyles.set(l,a),this._globalTimelineStyles.set(l,a),this._styleSummary.set(l,{time:this.currentTime,value:a})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(l){l&&this._previousKeyframe.set("easing",l);for(let[a,h]of this._globalTimelineStyles)this._backFill.set(a,h||Fh),this._currentKeyframe.set(a,Fh);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(l,a,h,d){a&&this._previousKeyframe.set("easing",a);const f=d&&d.params||{},m=function bet(c,l){const a=new Map;let h;return c.forEach(d=>{if("*"===d){h=h||l.keys();for(let f of h)a.set(f,Fh)}else dp(d,a)}),a}(l,this._globalTimelineStyles);for(let[g,y]of m){const v=kA(y,f,h);this._pendingStyles.set(g,v),this._localTimelineStyles.has(g)||this._backFill.set(g,this._globalTimelineStyles.get(g)??Fh),this._updateStyle(g,v)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((l,a)=>{this._currentKeyframe.set(a,l)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((l,a)=>{this._currentKeyframe.has(a)||this._currentKeyframe.set(a,l)}))}snapshotCurrentStyles(){for(let[l,a]of this._localTimelineStyles)this._pendingStyles.set(l,a),this._updateStyle(l,a)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const l=[];for(let a in this._currentKeyframe)l.push(a);return l}mergeTimelineCollectedStyles(l){l._styleSummary.forEach((a,h)=>{const d=this._styleSummary.get(h);(!d||a.time>d.time)&&this._updateStyle(h,a.value)})}buildKeyframes(){this.applyStylesToKeyframe();const l=new Set,a=new Set,h=1===this._keyframes.size&&0===this.duration;let d=[];this._keyframes.forEach((g,y)=>{const v=dp(g,new Map,this._backFill);v.forEach((_,S)=>{"!"===_?l.add(S):_===Fh&&a.add(S)}),h||v.set("offset",y/this.duration),d.push(v)});const f=l.size?VA(l.values()):[],m=a.size?VA(a.values()):[];if(h){const g=d[0],y=new Map(g);g.set("offset",0),y.set("offset",1),d=[g,y]}return PB(this.element,d,f,m,this.duration,this.startTime,this.easing,!1)}}class _et extends XA{constructor(l,a,h,d,f,m,g=!1){super(l,a,m.delay),this.keyframes=h,this.preStyleProps=d,this.postStyleProps=f,this._stretchStartingKeyframe=g,this.timings={duration:m.duration,delay:m.delay,easing:m.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let l=this.keyframes,{delay:a,duration:h,easing:d}=this.timings;if(this._stretchStartingKeyframe&&a){const f=[],m=h+a,g=a/m,y=dp(l[0]);y.set("offset",0),f.push(y);const v=dp(l[0]);v.set("offset",Sie(g)),f.push(v);const _=l.length-1;for(let S=1;S<=_;S++){let b=dp(l[S]);const T=b.get("offset");b.set("offset",Sie((a+T*h)/m)),f.push(b)}h=m,a=0,d="",l=f}return PB(this.element,l,this.preStyleProps,this.postStyleProps,h,a,d,!0)}}function Sie(c,l=3){const a=Math.pow(10,l-1);return Math.round(c*a)/a}class NB{}const Tet=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class wet extends NB{normalizePropertyName(l,a){return AB(l)}normalizeStyleValue(l,a,h,d){let f="";const m=h.toString().trim();if(Tet.has(a)&&0!==h&&"0"!==h)if("number"==typeof h)f="px";else{const g=h.match(/^[+-]?[\d\.]+([a-z]*)$/);g&&0==g[1].length&&d.push(function hJe(c,l){return new it(3005,!1)}())}return m+f}}function bie(c,l,a,h,d,f,m,g,y,v,_,S,b){return{type:0,element:c,triggerName:l,isRemovalTransition:d,fromState:a,fromStyles:f,toState:h,toStyles:m,timelines:g,queriedElements:y,preStyleProps:v,postStyleProps:_,totalTime:S,errors:b}}const FB={};class Tie{constructor(l,a,h){this._triggerName=l,this.ast=a,this._stateStyles=h}match(l,a,h,d){return function Cet(c,l,a,h,d){return c.some(f=>f(l,a,h,d))}(this.ast.matchers,l,a,h,d)}buildStyles(l,a,h){let d=this._stateStyles.get("*");return void 0!==l&&(d=this._stateStyles.get(l?.toString())||d),d?d.buildStyles(a,h):new Map}build(l,a,h,d,f,m,g,y,v,_){const S=[],b=this.ast.options&&this.ast.options.params||FB,x=this.buildStyles(h,g&&g.params||FB,S),E=y&&y.params||FB,D=this.buildStyles(d,E,S),I=new Set,M=new Map,L=new Map,P="void"===d,F={params:xet(E,b),delay:this.ast.options?.delay},V=_?[]:LB(l,a,this.ast.animation,f,m,x,D,F,v,S);let z=0;if(V.forEach(K=>{z=Math.max(K.duration+K.delay,z)}),S.length)return bie(a,this._triggerName,h,d,P,x,D,[],[],M,L,z,S);V.forEach(K=>{const se=K.element,W=vl(M,se,new Set);K.preStyleProps.forEach(ie=>W.add(ie));const Q=vl(L,se,new Set);K.postStyleProps.forEach(ie=>Q.add(ie)),se!==a&&I.add(se)});const q=VA(I.values());return bie(a,this._triggerName,h,d,P,x,D,V,q,M,L,z)}}function xet(c,l){const a=I1(l);for(const h in c)c.hasOwnProperty(h)&&null!=c[h]&&(a[h]=c[h]);return a}class Eet{constructor(l,a,h){this.styles=l,this.defaultParams=a,this.normalizer=h}buildStyles(l,a){const h=new Map,d=I1(this.defaultParams);return Object.keys(l).forEach(f=>{const m=l[f];null!==m&&(d[f]=m)}),this.styles.styles.forEach(f=>{"string"!=typeof f&&f.forEach((m,g)=>{m&&(m=kA(m,d,a));const y=this.normalizer.normalizePropertyName(g,a);m=this.normalizer.normalizeStyleValue(g,y,m,a),h.set(y,m)})}),h}}class Det{constructor(l,a,h){this.name=l,this.ast=a,this._normalizer=h,this.transitionFactories=[],this.states=new Map,a.states.forEach(d=>{this.states.set(d.name,new Eet(d.style,d.options&&d.options.params||{},h))}),wie(this.states,"true","1"),wie(this.states,"false","0"),a.transitions.forEach(d=>{this.transitionFactories.push(new Tie(l,d,this.states))}),this.fallbackTransition=function Aet(c,l,a){return new Tie(c,{type:1,animation:{type:2,steps:[],options:null},matchers:[(m,g)=>!0],options:null,queryCount:0,depCount:0},l)}(l,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(l,a,h,d){return this.transitionFactories.find(m=>m.match(l,a,h,d))||null}matchStyles(l,a,h){return this.fallbackTransition.buildStyles(l,a,h)}}function wie(c,l,a){c.has(l)?c.has(a)||c.set(a,c.get(l)):c.has(a)&&c.set(l,c.get(a))}const Iet=new jA;class Ret{constructor(l,a,h){this.bodyNode=l,this._driver=a,this._normalizer=h,this._animations=new Map,this._playersById=new Map,this.players=[]}register(l,a){const h=[],f=IB(this._driver,a,h,[]);if(h.length)throw function AJe(c){return new it(3503,!1)}();this._animations.set(l,f)}_buildPlayer(l,a,h){const d=l.element,f=tie(0,this._normalizer,0,l.keyframes,a,h);return this._driver.animate(d,f,l.duration,l.delay,l.easing,[],!0)}create(l,a,h={}){const d=[],f=this._animations.get(l);let m;const g=new Map;if(f?(m=LB(this._driver,a,f,xB,LA,new Map,new Map,h,Iet,d),m.forEach(_=>{const S=vl(g,_.element,new Map);_.postStyleProps.forEach(b=>S.set(b,null))})):(d.push(function IJe(){return new it(3300,!1)}()),m=[]),d.length)throw function RJe(c){return new it(3504,!1)}();g.forEach((_,S)=>{_.forEach((b,T)=>{_.set(T,this._driver.computeStyle(S,T,Fh))})});const v=up(m.map(_=>{const S=g.get(_.element);return this._buildPlayer(_,new Map,S)}));return this._playersById.set(l,v),v.onDestroy(()=>this.destroy(l)),this.players.push(v),v}destroy(l){const a=this._getPlayer(l);a.destroy(),this._playersById.delete(l);const h=this.players.indexOf(a);h>=0&&this.players.splice(h,1)}_getPlayer(l){const a=this._playersById.get(l);if(!a)throw function PJe(c){return new it(3301,!1)}();return a}listen(l,a,h,d){const f=bB(a,"","","");return _B(this._getPlayer(l),h,f,d),()=>{}}command(l,a,h,d){if("register"==h)return void this.register(l,d[0]);if("create"==h)return void this.create(l,a,d[0]||{});const f=this._getPlayer(l);switch(h){case"play":f.play();break;case"pause":f.pause();break;case"reset":f.reset();break;case"restart":f.restart();break;case"finish":f.finish();break;case"init":f.init();break;case"setPosition":f.setPosition(parseFloat(d[0]));break;case"destroy":this.destroy(l)}}}const Cie="ng-animate-queued",kB="ng-animate-disabled",Fet=[],xie={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},ket={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Zl="__ng_removed";class VB{constructor(l,a=""){this.namespaceId=a;const h=l&&l.hasOwnProperty("value");if(this.value=function Get(c){return c??null}(h?l.value:l),h){const f=I1(l);delete f.value,this.options=f}else this.options={};this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(l){const a=l.params;if(a){const h=this.options.params;Object.keys(a).forEach(d=>{null==h[d]&&(h[d]=a[d])})}}}const P1="void",BB=new VB(P1);class Vet{constructor(l,a,h){this.id=l,this.hostElement=a,this._engine=h,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+l,Kl(a,this._hostClassName)}listen(l,a,h,d){if(!this._triggers.has(a))throw function LJe(c,l){return new it(3302,!1)}();if(null==h||0==h.length)throw function OJe(c){return new it(3303,!1)}();if(!function zet(c){return"start"==c||"done"==c}(h))throw function NJe(c,l){return new it(3400,!1)}();const f=vl(this._elementListeners,l,[]),m={name:a,phase:h,callback:d};f.push(m);const g=vl(this._engine.statesByElement,l,new Map);return g.has(a)||(Kl(l,OA),Kl(l,OA+"-"+a),g.set(a,BB)),()=>{this._engine.afterFlush(()=>{const y=f.indexOf(m);y>=0&&f.splice(y,1),this._triggers.has(a)||g.delete(a)})}}register(l,a){return!this._triggers.has(l)&&(this._triggers.set(l,a),!0)}_getTrigger(l){const a=this._triggers.get(l);if(!a)throw function FJe(c){return new it(3401,!1)}();return a}trigger(l,a,h,d=!0){const f=this._getTrigger(a),m=new UB(this.id,a,l);let g=this._engine.statesByElement.get(l);g||(Kl(l,OA),Kl(l,OA+"-"+a),this._engine.statesByElement.set(l,g=new Map));let y=g.get(a);const v=new VB(h,this.id);if(!(h&&h.hasOwnProperty("value"))&&y&&v.absorbOptions(y.options),g.set(a,v),y||(y=BB),v.value!==P1&&y.value===v.value){if(!function Wet(c,l){const a=Object.keys(c),h=Object.keys(l);if(a.length!=h.length)return!1;for(let d=0;d<a.length;d++){const f=a[d];if(!l.hasOwnProperty(f)||c[f]!==l[f])return!1}return!0}(y.params,v.params)){const E=[],D=f.matchStyles(y.value,y.params,E),I=f.matchStyles(v.value,v.params,E);E.length?this._engine.reportError(E):this._engine.afterFlush(()=>{og(l,D),Ku(l,I)})}return}const b=vl(this._engine.playersByElement,l,[]);b.forEach(E=>{E.namespaceId==this.id&&E.triggerName==a&&E.queued&&E.destroy()});let T=f.matchTransition(y.value,v.value,l,v.params),x=!1;if(!T){if(!d)return;T=f.fallbackTransition,x=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:l,triggerName:a,transition:T,fromState:y,toState:v,player:m,isFallbackTransition:x}),x||(Kl(l,Cie),m.onStart(()=>{q_(l,Cie)})),m.onDone(()=>{let E=this.players.indexOf(m);E>=0&&this.players.splice(E,1);const D=this._engine.playersByElement.get(l);if(D){let I=D.indexOf(m);I>=0&&D.splice(I,1)}}),this.players.push(m),b.push(m),m}deregister(l){this._triggers.delete(l),this._engine.statesByElement.forEach(a=>a.delete(l)),this._elementListeners.forEach((a,h)=>{this._elementListeners.set(h,a.filter(d=>d.name!=l))})}clearElementCache(l){this._engine.statesByElement.delete(l),this._elementListeners.delete(l);const a=this._engine.playersByElement.get(l);a&&(a.forEach(h=>h.destroy()),this._engine.playersByElement.delete(l))}_signalRemovalForInnerTriggers(l,a){const h=this._engine.driver.query(l,NA,!0);h.forEach(d=>{if(d[Zl])return;const f=this._engine.fetchNamespacesByElement(d);f.size?f.forEach(m=>m.triggerLeaveAnimation(d,a,!1,!0)):this.clearElementCache(d)}),this._engine.afterFlushAnimationsDone(()=>h.forEach(d=>this.clearElementCache(d)))}triggerLeaveAnimation(l,a,h,d){const f=this._engine.statesByElement.get(l),m=new Map;if(f){const g=[];if(f.forEach((y,v)=>{if(m.set(v,y.value),this._triggers.has(v)){const _=this.trigger(l,v,P1,d);_&&g.push(_)}}),g.length)return this._engine.markElementAsRemoved(this.id,l,!0,a,m),h&&up(g).onDone(()=>this._engine.processLeaveNode(l)),!0}return!1}prepareLeaveAnimationListeners(l){const a=this._elementListeners.get(l),h=this._engine.statesByElement.get(l);if(a&&h){const d=new Set;a.forEach(f=>{const m=f.name;if(d.has(m))return;d.add(m);const y=this._triggers.get(m).fallbackTransition,v=h.get(m)||BB,_=new VB(P1),S=new UB(this.id,m,l);this._engine.totalQueuedPlayers++,this._queue.push({element:l,triggerName:m,transition:y,fromState:v,toState:_,player:S,isFallbackTransition:!0})})}}removeNode(l,a){const h=this._engine;if(l.childElementCount&&this._signalRemovalForInnerTriggers(l,a),this.triggerLeaveAnimation(l,a,!0))return;let d=!1;if(h.totalAnimations){const f=h.players.length?h.playersByQueriedElement.get(l):[];if(f&&f.length)d=!0;else{let m=l;for(;m=m.parentNode;)if(h.statesByElement.get(m)){d=!0;break}}}if(this.prepareLeaveAnimationListeners(l),d)h.markElementAsRemoved(this.id,l,!1,a);else{const f=l[Zl];(!f||f===xie)&&(h.afterFlush(()=>this.clearElementCache(l)),h.destroyInnerAnimations(l),h._onRemovalComplete(l,a))}}insertNode(l,a){Kl(l,this._hostClassName)}drainQueuedTransitions(l){const a=[];return this._queue.forEach(h=>{const d=h.player;if(d.destroyed)return;const f=h.element,m=this._elementListeners.get(f);m&&m.forEach(g=>{if(g.name==h.triggerName){const y=bB(f,h.triggerName,h.fromState.value,h.toState.value);y._data=l,_B(h.player,g.phase,y,g.callback)}}),d.markedForDestroy?this._engine.afterFlush(()=>{d.destroy()}):a.push(h)}),this._queue=[],a.sort((h,d)=>{const f=h.transition.ast.depCount,m=d.transition.ast.depCount;return 0==f||0==m?f-m:this._engine.driver.containsElement(h.element,d.element)?1:-1})}destroy(l){this.players.forEach(a=>a.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,l)}elementContainsData(l){let a=!1;return this._elementListeners.has(l)&&(a=!0),a=!!this._queue.find(h=>h.element===l)||a,a}}class Bet{constructor(l,a,h){this.bodyNode=l,this.driver=a,this._normalizer=h,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(d,f)=>{}}_onRemovalComplete(l,a){this.onRemovalComplete(l,a)}get queuedPlayers(){const l=[];return this._namespaceList.forEach(a=>{a.players.forEach(h=>{h.queued&&l.push(h)})}),l}createNamespace(l,a){const h=new Vet(l,a,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,a)?this._balanceNamespaceList(h,a):(this.newHostElements.set(a,h),this.collectEnterElement(a)),this._namespaceLookup[l]=h}_balanceNamespaceList(l,a){const h=this._namespaceList,d=this.namespacesByHostElement;if(h.length-1>=0){let m=!1,g=this.driver.getParentElement(a);for(;g;){const y=d.get(g);if(y){const v=h.indexOf(y);h.splice(v+1,0,l),m=!0;break}g=this.driver.getParentElement(g)}m||h.unshift(l)}else h.push(l);return d.set(a,l),l}register(l,a){let h=this._namespaceLookup[l];return h||(h=this.createNamespace(l,a)),h}registerTrigger(l,a,h){let d=this._namespaceLookup[l];d&&d.register(a,h)&&this.totalAnimations++}destroy(l,a){if(!l)return;const h=this._fetchNamespace(l);this.afterFlush(()=>{this.namespacesByHostElement.delete(h.hostElement),delete this._namespaceLookup[l];const d=this._namespaceList.indexOf(h);d>=0&&this._namespaceList.splice(d,1)}),this.afterFlushAnimationsDone(()=>h.destroy(a))}_fetchNamespace(l){return this._namespaceLookup[l]}fetchNamespacesByElement(l){const a=new Set,h=this.statesByElement.get(l);if(h)for(let d of h.values())if(d.namespaceId){const f=this._fetchNamespace(d.namespaceId);f&&a.add(f)}return a}trigger(l,a,h,d){if(qA(a)){const f=this._fetchNamespace(l);if(f)return f.trigger(a,h,d),!0}return!1}insertNode(l,a,h,d){if(!qA(a))return;const f=a[Zl];if(f&&f.setForRemoval){f.setForRemoval=!1,f.setForMove=!0;const m=this.collectedLeaveElements.indexOf(a);m>=0&&this.collectedLeaveElements.splice(m,1)}if(l){const m=this._fetchNamespace(l);m&&m.insertNode(a,h)}d&&this.collectEnterElement(a)}collectEnterElement(l){this.collectedEnterElements.push(l)}markElementAsDisabled(l,a){a?this.disabledNodes.has(l)||(this.disabledNodes.add(l),Kl(l,kB)):this.disabledNodes.has(l)&&(this.disabledNodes.delete(l),q_(l,kB))}removeNode(l,a,h,d){if(qA(a)){const f=l?this._fetchNamespace(l):null;if(f?f.removeNode(a,d):this.markElementAsRemoved(l,a,!1,d),h){const m=this.namespacesByHostElement.get(a);m&&m.id!==l&&m.removeNode(a,d)}}else this._onRemovalComplete(a,d)}markElementAsRemoved(l,a,h,d,f){this.collectedLeaveElements.push(a),a[Zl]={namespaceId:l,setForRemoval:d,hasAnimation:h,removedBeforeQueried:!1,previousTriggersValues:f}}listen(l,a,h,d,f){return qA(a)?this._fetchNamespace(l).listen(a,h,d,f):()=>{}}_buildInstruction(l,a,h,d,f){return l.transition.build(this.driver,l.element,l.fromState.value,l.toState.value,h,d,l.fromState.options,l.toState.options,a,f)}destroyInnerAnimations(l){let a=this.driver.query(l,NA,!0);a.forEach(h=>this.destroyActiveAnimationsForElement(h)),0!=this.playersByQueriedElement.size&&(a=this.driver.query(l,EB,!0),a.forEach(h=>this.finishActiveQueriedAnimationOnElement(h)))}destroyActiveAnimationsForElement(l){const a=this.playersByElement.get(l);a&&a.forEach(h=>{h.queued?h.markedForDestroy=!0:h.destroy()})}finishActiveQueriedAnimationOnElement(l){const a=this.playersByQueriedElement.get(l);a&&a.forEach(h=>h.finish())}whenRenderingDone(){return new Promise(l=>{if(this.players.length)return up(this.players).onDone(()=>l());l()})}processLeaveNode(l){const a=l[Zl];if(a&&a.setForRemoval){if(l[Zl]=xie,a.namespaceId){this.destroyInnerAnimations(l);const h=this._fetchNamespace(a.namespaceId);h&&h.clearElementCache(l)}this._onRemovalComplete(l,a.setForRemoval)}l.classList?.contains(kB)&&this.markElementAsDisabled(l,!1),this.driver.query(l,".ng-animate-disabled",!0).forEach(h=>{this.markElementAsDisabled(h,!1)})}flush(l=-1){let a=[];if(this.newHostElements.size&&(this.newHostElements.forEach((h,d)=>this._balanceNamespaceList(h,d)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let h=0;h<this.collectedEnterElements.length;h++)Kl(this.collectedEnterElements[h],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const h=[];try{a=this._flushAnimations(h,l)}finally{for(let d=0;d<h.length;d++)h[d]()}}else for(let h=0;h<this.collectedLeaveElements.length;h++)this.processLeaveNode(this.collectedLeaveElements[h]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(h=>h()),this._flushFns=[],this._whenQuietFns.length){const h=this._whenQuietFns;this._whenQuietFns=[],a.length?up(a).onDone(()=>{h.forEach(d=>d())}):h.forEach(d=>d())}}reportError(l){throw function kJe(c){return new it(3402,!1)}()}_flushAnimations(l,a){const h=new jA,d=[],f=new Map,m=[],g=new Map,y=new Map,v=new Map,_=new Set;this.disabledNodes.forEach(J=>{_.add(J);const ce=this.driver.query(J,".ng-animate-queued",!0);for(let be=0;be<ce.length;be++)_.add(ce[be])});const S=this.bodyNode,b=Array.from(this.statesByElement.keys()),T=Die(b,this.collectedEnterElements),x=new Map;let E=0;T.forEach((J,ce)=>{const be=xB+E++;x.set(ce,be),J.forEach(we=>Kl(we,be))});const D=[],I=new Set,M=new Set;for(let J=0;J<this.collectedLeaveElements.length;J++){const ce=this.collectedLeaveElements[J],be=ce[Zl];be&&be.setForRemoval&&(D.push(ce),I.add(ce),be.hasAnimation?this.driver.query(ce,".ng-star-inserted",!0).forEach(we=>I.add(we)):M.add(ce))}const L=new Map,P=Die(b,Array.from(I));P.forEach((J,ce)=>{const be=LA+E++;L.set(ce,be),J.forEach(we=>Kl(we,be))}),l.push(()=>{T.forEach((J,ce)=>{const be=x.get(ce);J.forEach(we=>q_(we,be))}),P.forEach((J,ce)=>{const be=L.get(ce);J.forEach(we=>q_(we,be))}),D.forEach(J=>{this.processLeaveNode(J)})});const F=[],V=[];for(let J=this._namespaceList.length-1;J>=0;J--)this._namespaceList[J].drainQueuedTransitions(a).forEach(be=>{const we=be.player,Ce=be.element;if(F.push(we),this.collectedEnterElements.length){const ut=Ce[Zl];if(ut&&ut.setForMove){if(ut.previousTriggersValues&&ut.previousTriggersValues.has(be.triggerName)){const Fe=ut.previousTriggersValues.get(be.triggerName),ht=this.statesByElement.get(be.element);if(ht&&ht.has(be.triggerName)){const an=ht.get(be.triggerName);an.value=Fe,ht.set(be.triggerName,an)}}return void we.destroy()}}const Te=!S||!this.driver.containsElement(S,Ce),fe=L.get(Ce),$e=x.get(Ce),Ve=this._buildInstruction(be,h,$e,fe,Te);if(Ve.errors&&Ve.errors.length)return void V.push(Ve);if(Te)return we.onStart(()=>og(Ce,Ve.fromStyles)),we.onDestroy(()=>Ku(Ce,Ve.toStyles)),void d.push(we);if(be.isFallbackTransition)return we.onStart(()=>og(Ce,Ve.fromStyles)),we.onDestroy(()=>Ku(Ce,Ve.toStyles)),void d.push(we);const De=[];Ve.timelines.forEach(ut=>{ut.stretchStartingKeyframe=!0,this.disabledNodes.has(ut.element)||De.push(ut)}),Ve.timelines=De,h.append(Ce,Ve.timelines),m.push({instruction:Ve,player:we,element:Ce}),Ve.queriedElements.forEach(ut=>vl(g,ut,[]).push(we)),Ve.preStyleProps.forEach((ut,Fe)=>{if(ut.size){let ht=y.get(Fe);ht||y.set(Fe,ht=new Set),ut.forEach((an,Wt)=>ht.add(Wt))}}),Ve.postStyleProps.forEach((ut,Fe)=>{let ht=v.get(Fe);ht||v.set(Fe,ht=new Set),ut.forEach((an,Wt)=>ht.add(Wt))})});if(V.length){const J=[];V.forEach(ce=>{J.push(function VJe(c,l){return new it(3505,!1)}())}),F.forEach(ce=>ce.destroy()),this.reportError(J)}const z=new Map,q=new Map;m.forEach(J=>{const ce=J.element;h.has(ce)&&(q.set(ce,ce),this._beforeAnimationBuild(J.player.namespaceId,J.instruction,z))}),d.forEach(J=>{const ce=J.element;this._getPreviousPlayers(ce,!1,J.namespaceId,J.triggerName,null).forEach(we=>{vl(z,ce,[]).push(we),we.destroy()})});const K=D.filter(J=>Iie(J,y,v)),se=new Map;Mie(se,this.driver,M,v,Fh).forEach(J=>{Iie(J,y,v)&&K.push(J)});const Q=new Map;T.forEach((J,ce)=>{Mie(Q,this.driver,new Set(J),y,"!")}),K.forEach(J=>{const ce=se.get(J),be=Q.get(J);se.set(J,new Map([...Array.from(ce?.entries()??[]),...Array.from(be?.entries()??[])]))});const ie=[],ae=[],he={};m.forEach(J=>{const{element:ce,player:be,instruction:we}=J;if(h.has(ce)){if(_.has(ce))return be.onDestroy(()=>Ku(ce,we.toStyles)),be.disabled=!0,be.overrideTotalTime(we.totalTime),void d.push(be);let Ce=he;if(q.size>1){let fe=ce;const $e=[];for(;fe=fe.parentNode;){const Ve=q.get(fe);if(Ve){Ce=Ve;break}$e.push(fe)}$e.forEach(Ve=>q.set(Ve,Ce))}const Te=this._buildAnimation(be.namespaceId,we,z,f,Q,se);if(be.setRealPlayer(Te),Ce===he)ie.push(be);else{const fe=this.playersByElement.get(Ce);fe&&fe.length&&(be.parentPlayer=up(fe)),d.push(be)}}else og(ce,we.fromStyles),be.onDestroy(()=>Ku(ce,we.toStyles)),ae.push(be),_.has(ce)&&d.push(be)}),ae.forEach(J=>{const ce=f.get(J.element);if(ce&&ce.length){const be=up(ce);J.setRealPlayer(be)}}),d.forEach(J=>{J.parentPlayer?J.syncPlayerEvents(J.parentPlayer):J.destroy()});for(let J=0;J<D.length;J++){const ce=D[J],be=ce[Zl];if(q_(ce,LA),be&&be.hasAnimation)continue;let we=[];if(g.size){let Te=g.get(ce);Te&&Te.length&&we.push(...Te);let fe=this.driver.query(ce,EB,!0);for(let $e=0;$e<fe.length;$e++){let Ve=g.get(fe[$e]);Ve&&Ve.length&&we.push(...Ve)}}const Ce=we.filter(Te=>!Te.destroyed);Ce.length?Het(this,ce,Ce):this.processLeaveNode(ce)}return D.length=0,ie.forEach(J=>{this.players.push(J),J.onDone(()=>{J.destroy();const ce=this.players.indexOf(J);this.players.splice(ce,1)}),J.play()}),ie}elementContainsData(l,a){let h=!1;const d=a[Zl];return d&&d.setForRemoval&&(h=!0),this.playersByElement.has(a)&&(h=!0),this.playersByQueriedElement.has(a)&&(h=!0),this.statesByElement.has(a)&&(h=!0),this._fetchNamespace(l).elementContainsData(a)||h}afterFlush(l){this._flushFns.push(l)}afterFlushAnimationsDone(l){this._whenQuietFns.push(l)}_getPreviousPlayers(l,a,h,d,f){let m=[];if(a){const g=this.playersByQueriedElement.get(l);g&&(m=g)}else{const g=this.playersByElement.get(l);if(g){const y=!f||f==P1;g.forEach(v=>{v.queued||!y&&v.triggerName!=d||m.push(v)})}}return(h||d)&&(m=m.filter(g=>!(h&&h!=g.namespaceId||d&&d!=g.triggerName))),m}_beforeAnimationBuild(l,a,h){const f=a.element,m=a.isRemovalTransition?void 0:l,g=a.isRemovalTransition?void 0:a.triggerName;for(const y of a.timelines){const v=y.element,_=v!==f,S=vl(h,v,[]);this._getPreviousPlayers(v,_,m,g,a.toState).forEach(T=>{const x=T.getRealPlayer();x.beforeDestroy&&x.beforeDestroy(),T.destroy(),S.push(T)})}og(f,a.fromStyles)}_buildAnimation(l,a,h,d,f,m){const g=a.triggerName,y=a.element,v=[],_=new Set,S=new Set,b=a.timelines.map(x=>{const E=x.element;_.add(E);const D=E[Zl];if(D&&D.removedBeforeQueried)return new Mb(x.duration,x.delay);const I=E!==y,M=function jet(c){const l=[];return Aie(c,l),l}((h.get(E)||Fet).map(z=>z.getRealPlayer())).filter(z=>!!z.element&&z.element===E),L=f.get(E),P=m.get(E),F=tie(0,this._normalizer,0,x.keyframes,L,P),V=this._buildPlayer(x,F,M);if(x.subTimeline&&d&&S.add(E),I){const z=new UB(l,g,E);z.setRealPlayer(V),v.push(z)}return V});v.forEach(x=>{vl(this.playersByQueriedElement,x.element,[]).push(x),x.onDone(()=>function Uet(c,l,a){let h=c.get(l);if(h){if(h.length){const d=h.indexOf(a);h.splice(d,1)}0==h.length&&c.delete(l)}return h}(this.playersByQueriedElement,x.element,x))}),_.forEach(x=>Kl(x,uie));const T=up(b);return T.onDestroy(()=>{_.forEach(x=>q_(x,uie)),Ku(y,a.toStyles)}),S.forEach(x=>{vl(d,x,[]).push(T)}),T}_buildPlayer(l,a,h){return a.length>0?this.driver.animate(l.element,a,l.duration,l.delay,l.easing,h):new Mb(l.duration,l.delay)}}class UB{constructor(l,a,h){this.namespaceId=l,this.triggerName=a,this.element=h,this._player=new Mb,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(l){this._containsRealPlayer||(this._player=l,this._queuedCallbacks.forEach((a,h)=>{a.forEach(d=>_B(l,h,void 0,d))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(l.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(l){this.totalTime=l}syncPlayerEvents(l){const a=this._player;a.triggerCallback&&l.onStart(()=>a.triggerCallback("start")),l.onDone(()=>this.finish()),l.onDestroy(()=>this.destroy())}_queueEvent(l,a){vl(this._queuedCallbacks,l,[]).push(a)}onDone(l){this.queued&&this._queueEvent("done",l),this._player.onDone(l)}onStart(l){this.queued&&this._queueEvent("start",l),this._player.onStart(l)}onDestroy(l){this.queued&&this._queueEvent("destroy",l),this._player.onDestroy(l)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(l){this.queued||this._player.setPosition(l)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(l){const a=this._player;a.triggerCallback&&a.triggerCallback(l)}}function qA(c){return c&&1===c.nodeType}function Eie(c,l){const a=c.style.display;return c.style.display=l??"none",a}function Mie(c,l,a,h,d){const f=[];a.forEach(y=>f.push(Eie(y)));const m=[];h.forEach((y,v)=>{const _=new Map;y.forEach(S=>{const b=l.computeStyle(v,S,d);_.set(S,b),(!b||0==b.length)&&(v[Zl]=ket,m.push(v))}),c.set(v,_)});let g=0;return a.forEach(y=>Eie(y,f[g++])),m}function Die(c,l){const a=new Map;if(c.forEach(g=>a.set(g,[])),0==l.length)return a;const d=new Set(l),f=new Map;function m(g){if(!g)return 1;let y=f.get(g);if(y)return y;const v=g.parentNode;return y=a.has(v)?v:d.has(v)?1:m(v),f.set(g,y),y}return l.forEach(g=>{const y=m(g);1!==y&&a.get(y).push(g)}),a}function Kl(c,l){c.classList?.add(l)}function q_(c,l){c.classList?.remove(l)}function Het(c,l,a){up(a).onDone(()=>c.processLeaveNode(l))}function Aie(c,l){for(let a=0;a<c.length;a++){const h=c[a];h instanceof t$?Aie(h.players,l):l.push(h)}}function Iie(c,l,a){const h=a.get(c);if(!h)return!1;let d=l.get(c);return d?h.forEach(f=>d.add(f)):l.set(c,h),a.delete(c),!0}class $A{constructor(l,a,h){this.bodyNode=l,this._driver=a,this._normalizer=h,this._triggerCache={},this.onRemovalComplete=(d,f)=>{},this._transitionEngine=new Bet(l,a,h),this._timelineEngine=new Ret(l,a,h),this._transitionEngine.onRemovalComplete=(d,f)=>this.onRemovalComplete(d,f)}registerTrigger(l,a,h,d,f){const m=l+"-"+d;let g=this._triggerCache[m];if(!g){const y=[],_=IB(this._driver,f,y,[]);if(y.length)throw function MJe(c,l){return new it(3404,!1)}();g=function Met(c,l,a){return new Det(c,l,a)}(d,_,this._normalizer),this._triggerCache[m]=g}this._transitionEngine.registerTrigger(a,d,g)}register(l,a){this._transitionEngine.register(l,a)}destroy(l,a){this._transitionEngine.destroy(l,a)}onInsert(l,a,h,d){this._transitionEngine.insertNode(l,a,h,d)}onRemove(l,a,h,d){this._transitionEngine.removeNode(l,a,d||!1,h)}disableAnimations(l,a){this._transitionEngine.markElementAsDisabled(l,a)}process(l,a,h,d){if("@"==h.charAt(0)){const[f,m]=nie(h);this._timelineEngine.command(f,a,m,d)}else this._transitionEngine.trigger(l,a,h,d)}listen(l,a,h,d,f){if("@"==h.charAt(0)){const[m,g]=nie(h);return this._timelineEngine.listen(m,a,g,f)}return this._transitionEngine.listen(l,a,h,d,f)}flush(l=-1){this._transitionEngine.flush(l)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let qet=(()=>{class c{constructor(a,h,d){this._element=a,this._startStyles=h,this._endStyles=d,this._state=0;let f=c.initialStylesByElement.get(a);f||c.initialStylesByElement.set(a,f=new Map),this._initialStyles=f}start(){this._state<1&&(this._startStyles&&Ku(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(Ku(this._element,this._initialStyles),this._endStyles&&(Ku(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(c.initialStylesByElement.delete(this._element),this._startStyles&&(og(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(og(this._element,this._endStyles),this._endStyles=null),Ku(this._element,this._initialStyles),this._state=3)}}return c.initialStylesByElement=new WeakMap,c})();function GB(c){let l=null;return c.forEach((a,h)=>{(function $et(c){return"display"===c||"position"===c})(h)&&(l=l||new Map,l.set(h,a))}),l}class Rie{constructor(l,a,h,d){this.element=l,this.keyframes=a,this.options=h,this._specialStyles=d,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=h.duration,this._delay=h.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(l=>l()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const l=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,l,this.options),this._finalKeyframe=l.length?l[l.length-1]:new Map,this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(l){const a=[];return l.forEach(h=>{a.push(Object.fromEntries(h))}),a}_triggerWebAnimation(l,a,h){return l.animate(this._convertKeyframesToObject(a),h)}onStart(l){this._originalOnStartFns.push(l),this._onStartFns.push(l)}onDone(l){this._originalOnDoneFns.push(l),this._onDoneFns.push(l)}onDestroy(l){this._onDestroyFns.push(l)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(l=>l()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(l=>l()),this._onDestroyFns=[])}setPosition(l){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=l*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const l=new Map;this.hasStarted()&&this._finalKeyframe.forEach((h,d)=>{"offset"!==d&&l.set(d,this._finished?h:gie(this.element,d))}),this.currentSnapshot=l}triggerCallback(l){const a="start"===l?this._onStartFns:this._onDoneFns;a.forEach(h=>h()),a.length=0}}class Yet{validateStyleProperty(l){return!0}validateAnimatableStyleProperty(l){return!0}matchesElement(l,a){return!1}containsElement(l,a){return oie(l,a)}getParentElement(l){return wB(l)}query(l,a,h){return aie(l,a,h)}computeStyle(l,a,h){return window.getComputedStyle(l)[a]}animate(l,a,h,d,f,m=[]){const y={duration:h,delay:d,fill:0==d?"both":"forwards"};f&&(y.easing=f);const v=new Map,_=m.filter(T=>T instanceof Rie);(function KJe(c,l){return 0===c||0===l})(h,d)&&_.forEach(T=>{T.currentSnapshot.forEach((x,E)=>v.set(E,x))});let S=function qJe(c){return c.length?c[0]instanceof Map?c:c.map(l=>hie(l)):[]}(a).map(T=>dp(T));S=function QJe(c,l,a){if(a.size&&l.length){let h=l[0],d=[];if(a.forEach((f,m)=>{h.has(m)||d.push(m),h.set(m,f)}),d.length)for(let f=1;f<l.length;f++){let m=l[f];d.forEach(g=>m.set(g,gie(c,g)))}}return l}(l,S,v);const b=function Xet(c,l){let a=null,h=null;return Array.isArray(l)&&l.length?(a=GB(l[0]),l.length>1&&(h=GB(l[l.length-1]))):l instanceof Map&&(a=GB(l)),a||h?new qet(c,a,h):null}(l,S);return new Rie(l,S,y,b)}}let Zet=(()=>{class c extends Qq{constructor(a,h){super(),this._nextAnimationId=0,this._renderer=a.createRenderer(h.body,{id:"0",encapsulation:nc.None,styles:[],data:{animation:[]}})}build(a){const h=this._nextAnimationId.toString();this._nextAnimationId++;const d=Array.isArray(a)?Jq(a):a;return Pie(this._renderer,null,h,"register",[d]),new Ket(h,this._renderer)}}return c.\u0275fac=function(a){return new(a||c)(Ae(Lg),Ae(Er))},c.\u0275prov=Oe({token:c,factory:c.\u0275fac}),c})();class Ket extends class Z2e{}{constructor(l,a){super(),this._id=l,this._renderer=a}create(l,a){return new Qet(this._id,l,a||{},this._renderer)}}class Qet{constructor(l,a,h,d){this.id=l,this.element=a,this._renderer=d,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",h)}_listen(l,a){return this._renderer.listen(this.element,`@@${this.id}:${l}`,a)}_command(l,...a){return Pie(this._renderer,this.element,this.id,l,a)}onDone(l){this._listen("done",l)}onStart(l){this._listen("start",l)}onDestroy(l){this._listen("destroy",l)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(l){this._command("setPosition",l)}getPosition(){return this._renderer.engine.players[+this.id]?.getPosition()??0}}function Pie(c,l,a,h,d){return c.setProperty(l,`@@${a}:${h}`,d)}const Lie="@.disabled";let Jet=(()=>{class c{constructor(a,h,d){this.delegate=a,this.engine=h,this._zone=d,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),h.onRemovalComplete=(f,m)=>{const g=m?.parentNode(f);g&&m.removeChild(g,f)}}createRenderer(a,h){const f=this.delegate.createRenderer(a,h);if(!(a&&h&&h.data&&h.data.animation)){let _=this._rendererCache.get(f);return _||(_=new Oie("",f,this.engine),this._rendererCache.set(f,_)),_}const m=h.id,g=h.id+"-"+this._currentId;this._currentId++,this.engine.register(g,a);const y=_=>{Array.isArray(_)?_.forEach(y):this.engine.registerTrigger(m,g,a,_.name,_)};return h.data.animation.forEach(y),new ett(this,g,f,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(a,h,d){a>=0&&a<this._microtaskId?this._zone.run(()=>h(d)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(f=>{const[m,g]=f;m(g)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([h,d]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return c.\u0275fac=function(a){return new(a||c)(Ae(Lg),Ae($A),Ae(kn))},c.\u0275prov=Oe({token:c,factory:c.\u0275fac}),c})();class Oie{constructor(l,a,h){this.namespaceId=l,this.delegate=a,this.engine=h,this.destroyNode=this.delegate.destroyNode?d=>a.destroyNode(d):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(l,a){return this.delegate.createElement(l,a)}createComment(l){return this.delegate.createComment(l)}createText(l){return this.delegate.createText(l)}appendChild(l,a){this.delegate.appendChild(l,a),this.engine.onInsert(this.namespaceId,a,l,!1)}insertBefore(l,a,h,d=!0){this.delegate.insertBefore(l,a,h),this.engine.onInsert(this.namespaceId,a,l,d)}removeChild(l,a,h){this.engine.onRemove(this.namespaceId,a,this.delegate,h)}selectRootElement(l,a){return this.delegate.selectRootElement(l,a)}parentNode(l){return this.delegate.parentNode(l)}nextSibling(l){return this.delegate.nextSibling(l)}setAttribute(l,a,h,d){this.delegate.setAttribute(l,a,h,d)}removeAttribute(l,a,h){this.delegate.removeAttribute(l,a,h)}addClass(l,a){this.delegate.addClass(l,a)}removeClass(l,a){this.delegate.removeClass(l,a)}setStyle(l,a,h,d){this.delegate.setStyle(l,a,h,d)}removeStyle(l,a,h){this.delegate.removeStyle(l,a,h)}setProperty(l,a,h){"@"==a.charAt(0)&&a==Lie?this.disableAnimations(l,!!h):this.delegate.setProperty(l,a,h)}setValue(l,a){this.delegate.setValue(l,a)}listen(l,a,h){return this.delegate.listen(l,a,h)}disableAnimations(l,a){this.engine.disableAnimations(l,a)}}class ett extends Oie{constructor(l,a,h,d){super(a,h,d),this.factory=l,this.namespaceId=a}setProperty(l,a,h){"@"==a.charAt(0)?"."==a.charAt(1)&&a==Lie?this.disableAnimations(l,h=void 0===h||!!h):this.engine.process(this.namespaceId,l,a.slice(1),h):this.delegate.setProperty(l,a,h)}listen(l,a,h){if("@"==a.charAt(0)){const d=function ttt(c){switch(c){case"body":return document.body;case"document":return document;case"window":return window;default:return c}}(l);let f=a.slice(1),m="";return"@"!=f.charAt(0)&&([f,m]=function ntt(c){const l=c.indexOf(".");return[c.substring(0,l),c.slice(l+1)]}(f)),this.engine.listen(this.namespaceId,d,f,m,g=>{this.factory.scheduleListenerCallback(g._data||-1,h,g)})}return this.delegate.listen(l,a,h)}}let rtt=(()=>{class c extends $A{constructor(a,h,d,f){super(a.body,h,d)}ngOnDestroy(){this.flush()}}return c.\u0275fac=function(a){return new(a||c)(Ae(Er),Ae(CB),Ae(NB),Ae(sy))},c.\u0275prov=Oe({token:c,factory:c.\u0275fac}),c})();const Nie=[{provide:Qq,useClass:Zet},{provide:NB,useFactory:function itt(){return new wet}},{provide:$A,useClass:rtt},{provide:Lg,useFactory:function stt(c,l,a){return new Jet(c,l,a)},deps:[aC,$A,kn]}],zB=[{provide:CB,useFactory:()=>new Yet},{provide:i8,useValue:"BrowserAnimations"},...Nie],Fie=[{provide:CB,useClass:lie},{provide:i8,useValue:"NoopAnimations"},...Nie];let ott=(()=>{class c{static withConfig(a){return{ngModule:c,providers:a.disableAnimations?Fie:zB}}}return c.\u0275fac=function(a){return new(a||c)},c.\u0275mod=Ut({type:c}),c.\u0275inj=kt({providers:zB,imports:[y6]}),c})(),att=(()=>{class c{constructor(){this.alertSource=new Ke,this.alert$=this.alertSource.asObservable()}alert(a){this.alertSource.next(a)}}return c.\u0275fac=function(a){return new(a||c)},c.\u0275prov=Oe({token:c,factory:c.\u0275fac,providedIn:"root"}),c})(),ltt=(()=>{class c{constructor(){this.progressSource=new Ke,this.progress$=this.progressSource.asObservable()}progress(a){this.progressSource.next(a)}}return c.\u0275fac=function(a){return new(a||c)},c.\u0275prov=Oe({token:c,factory:c.\u0275fac,providedIn:"root"}),c})(),ctt=(()=>{class c{}return c.\u0275fac=function(a){return new(a||c)},c.\u0275mod=Ut({type:c}),c.\u0275inj=kt({providers:[att,ltt],imports:[Nn,LM]}),c})(),utt=(()=>{class c{}return c.\u0275fac=function(a){return new(a||c)},c.\u0275mod=Ut({type:c}),c.\u0275inj=kt({imports:[Nn,LM,Ou,QHe,ctt]}),c})(),htt=(()=>{class c{}return c.\u0275fac=function(a){return new(a||c)},c.\u0275mod=Ut({type:c}),c.\u0275inj=kt({imports:[Nn,Ou,LM]}),c})(),dtt=(()=>{class c{}return c.\u0275fac=function(a){return new(a||c)},c.\u0275mod=Ut({type:c,bootstrap:[sJe]}),c.\u0275inj=kt({providers:[T3,w3],imports:[y6,BQe,LM,Ou,WOe,ott,bLe,qKe,utt,htt,EGe,Q6e]}),c})();(function sfe(){S8=!1})(),dme().bootstrapModule(dtt).catch(c=>console.error(c))},530:(Un,Vn,ct)=>{"use strict";ct.d(Vn,{m:()=>Pt});var Lt=ct(402);Un=ct.hmd(Un);class Pt{constructor(){}getCapabilitiesUrl(ue){return`${ue}?service=WPS&request=GetCapabilities&version=1.0.0`}getDescribeProcessUrl(ue,Ee){return`${ue}?service=WPS&request=DescribeProcess&version=1.0.0&Identifier=${Ee}`}executeUrl(ue,Ee){return`${ue}?service=WPS&request=Execute&version=1.0.0&identifier=${Ee}`}unmarshalCapabilities(ue){const Ee=[];return ue.processOfferings.process.forEach(C=>{Ee.push({id:C.identifier.value})}),Ee}unmarshalProcessDescription(ue){const Ee=ue.processDescription[0],C=[];for(const R of Ee.dataInputs.input)C.push({description:this.unmarshalInputDescription(R),value:null});const w=[];for(const R of Ee.processOutputs.output)w.push({description:this.unmarshalOutputDescription(R),value:null});return{id:Ee.identifier.value,processVersion:Ee.processVersion,description:Ee._abstract?.value,title:Ee.title.value,inputs:C,outputs:w}}unmarshalSyncExecuteResponse(ue,Ee,C,w,R){const O=[];if(ue.value.status.processFailed)O.push({description:{id:ue.value.process.identifier.value,title:ue.value.process.title.value,reference:!0,type:"error"},value:ue.value.statusLocation});else if(ue.value.processOutputs)for(const k of ue.value.processOutputs.output){const j=!!k.reference;let X,ee,$;k.reference?(X="complex",ee=k.reference.href||null,$=k.reference.mimeType):(k.data&&k.data.literalData?(X="literal",$=k.data.literalData.dataType):k.data&&k.data.complexData?(X="complex",$=k.data.complexData.mimeType):(X="bbox",$=void 0),ee=this.unmarshalOutputData(k.data)),O.push({description:{id:k.identifier.value,title:k.title.value,format:$,reference:j,type:X},value:ee})}else ue.value.statusLocation&&O.push({description:{id:ue.value.process.identifier.value,title:ue.value.process.title.value,reference:!0,type:"status"},value:this.unmarshalGetStateResponse(ue,Ee,C,w,R)});return O}unmarshalOutputData(ue){if(ue.complexData)switch("base64"===ue.complexData.encoding&&ue.complexData.content.map(Un.exports?Ee=>Buffer.from(Ee,"base64").toString("ascii"):Ee=>atob(Ee)),ue.complexData.mimeType){case"application/vnd.geo+json":case"application/json":return ue.complexData.content.map(Ee=>JSON.parse(Ee));case"application/WMS":return ue.complexData.content;case"text/xml":case"application/xml":return Lt.serializeToString(ue.complexData.content[0]);default:throw new Error(`Cannot unmarshal data of format ${ue.complexData.mimeType}`)}else if(ue.literalData)return ue.literalData.value;throw new Error(`Not yet implemented: ${ue}`)}unmarshalInputDescription(ue){if(ue.boundingBoxData)return{id:ue.identifier.value,title:ue.title.value,reference:!1,type:"bbox",description:ue._abstract?.value,format:"text/plain"};if(ue.complexData)return{id:ue.identifier.value,title:ue.title.value,reference:ue.storeSupported,type:"complex",description:ue._abstract?.value,format:ue.complexData._default.format.mimeType};if(ue.literalData)return{id:ue.identifier.value,title:ue.title.value,reference:!1,type:"literal",description:ue._abstract?.value,defaultValue:ue.literalData.defaultValue,options:ue.literalData.allowedValues?.valueOrRange.map(Ee=>Ee.value),format:"text/plain"};throw new Error(`Cannot unmarshal the input-description for ${ue.identifier.value}`)}unmarshalOutputDescription(ue){if(ue.complexOutput)return{id:ue.identifier.value,title:ue.title.value,reference:!0,type:"complex",format:ue.complexOutput._default.format.mimeType};if(ue.boundingBoxOutput)return{id:ue.identifier.value,title:ue.title.value,reference:!1,type:"bbox"};if(ue.literalOutput)return{id:ue.identifier.value,title:ue.title.value,reference:!1,type:"literal"};throw new Error(`Cannot unmarshal the input-description for ${ue.identifier.value}`)}unmarshalAsyncExecuteResponse(ue,Ee,C,w,R){return this.unmarshalGetStateResponse(ue,Ee,C,w,R)}unmarshalGetStateResponse(ue,Ee,C,w,R){const O=ue.value,j={status:O.status.processSucceeded?"Succeeded":O.status.processAccepted?"Accepted":O.status.processStarted?"Running":"Failed",statusLocation:O.statusLocation};return O.processOutputs&&O.processOutputs.output&&(j.results=ue),j}marshalExecBody(ue,Ee,C,w){return{name:{key:"{http://www.opengis.net/wps/1.0.0}Execute",localPart:"Execute",namespaceURI:"http://www.opengis.net/wps/1.0.0",prefix:"wps",string:"{http://www.opengis.net/wps/1.0.0}wps:Execute"},value:{dataInputs:this.marshalInputs(Ee),identifier:ue,responseForm:this.marshalResponseForm(C,w),service:"WPS",version:"1.0.0"}}}marshalResponseForm(ue,Ee=!1){const C=[];for(const O of ue){let k;switch(O.type){case"literal":case"complex":k={identifier:{value:O.id},asReference:O.reference,mimeType:O.format};break;default:throw new Error(`This Wps-outputtype has not been implemented yet! ${O} `)}C.push(k)}return{responseDocument:{output:C,status:!!Ee,storeExecuteResponse:!!Ee}}}marshalInputs(ue){const Ee=[];for(const w of ue){if(null==w.value)throw new Error(`Value for input ${w.description.id} is not set`);const R=this.marshalInput(w);Ee.push(R)}return{input:Ee}}marshalInput(ue){const R={identifier:{value:ue.description.id},title:{value:ue.description.id},_abstract:{value:""}};return ue.description.reference?R.reference=this.marshalReferenceInput(ue):R.data=this.marshalDataInput(ue),R}marshalDataInput(ue){let Ee;switch(ue.description.type){case"literal":Ee={literalData:{value:String(ue.value)}};break;case"bbox":const C=ue.value;Ee={boundingBoxData:{lowerCorner:[C.lllat,C.lllon],upperCorner:[C.urlat,C.urlon]}};break;case"complex":Ee="text/xml"===ue.description.format?{complexData:{content:[ue.value],mimeType:ue.description.format}}:{complexData:{content:[JSON.stringify(ue.value)],mimeType:ue.description.format}};break;default:throw Error(`This input is of type ${ue.description.type}. We can only marshal input of type literal, bbox or complex.`)}return Ee}marshalReferenceInput(ue){return{href:ue.value,method:"GET",mimeType:ue.description.format}}marshallGetStatusBody(ue,Ee,C){return{}}marshallGetResultBody(ue,Ee,C){return{}}dismissUrl(ue,Ee,C){throw new Error("Wps 1.0 does not support Dismiss-operations.")}marshalDismissBody(ue){throw new Error("Wps 1.0 does not support Dismiss-operations.")}unmarshalDismissResponse(ue,Ee,C){throw new Error("Wps 1.0 does not support Dismiss-operations.")}}},496:(Un,Vn,ct)=>{"use strict";ct.d(Vn,{Y:()=>ue});const Lt=Ee=>Ee.hasOwnProperty("jobID")&&Ee.hasOwnProperty("status");var Ie=ct(402);Un=ct.hmd(Un);class ue{constructor(){}getCapabilitiesUrl(C){return`${C}?service=WPS&request=GetCapabilities&version=2.0.0`}getDescribeProcessUrl(C,w){return`${C}?service=WPS&request=DescribeProcess&version=2.0.0&Identifier=${w}`}unmarshalProcessDescription(C){const w=C.processOffering[0],R=[];for(const k of w.process.input)R.push({description:this.unmarshalInputDescription(k),value:null});const O=[];for(const k of w.process.output)O.push({description:this.unmarshalOutputDescription(k),value:null});return{id:w.process.identifier.value,processVersion:w.processVersion||"",description:w.process._abstract?.value,title:w.process.title?.value||"",inputs:R,outputs:O}}unmarshalInputDescription(C){if("BoundingBoxData"===C.dataDescription.name.localPart)return{id:C.identifier.value,title:C.title.value,reference:!1,type:"bbox",description:C.abstract?.value};if("LiteralData"===C.dataDescription.name.localPart)return{id:C.identifier.value,title:C.title.value,reference:!1,type:"literal",defaultValue:C.dataDescription.value.literalDataDomain?.defaultValue?.value,options:C.dataDescription.value.literalDataDomain?.allowedValues.valueOrRange.map(w=>w.value),description:C.abstract?.value};if("ComplexData"===C.dataDescription.name.localPart)return{id:C.identifier.value,title:C.title.value,reference:!0,type:"complex",format:C.dataDescription.value.format[0].mimeType,description:C.abstract?.value};throw new Error(`Cannot unmarshal input-description ${C.identifier.value}`)}unmarshalOutputDescription(C){if("BoundingBoxData"===C.dataDescription.name.localPart)return{id:C.identifier.value,title:C.title.value,reference:!1,type:"bbox",description:C.abstract?.value};if("LiteralData"===C.dataDescription.name.localPart)return{id:C.identifier.value,title:C.title.value,reference:!1,type:"literal",description:C.abstract?.value};if("ComplexData"===C.dataDescription.name.localPart)return{id:C.identifier.value,title:C.title.value,reference:!0,type:"complex",format:C.dataDescription.value.format[0].mimeType,description:C.abstract?.value};throw new Error(`Cannot unmarshal input-description ${C.identifier.value}`)}executeUrl(C,w){return C}unmarshalCapabilities(C){const w=[];return C.contents.processSummary.forEach(R=>{w.push({id:R.identifier.value})}),w}unmarshalSyncExecuteResponse(C,w,R,O,k){const j=[];if(C.value.hasOwnProperty("output"))for(const X of C.value.output){const ee=k.find(Ge=>Ge.id===X.id);if(!ee)throw new Error(`Could not find an output-description for the parameter ${X.id}.`);const $=ee.reference,re=ee.type,ge=ee.format;let Le;if(X.reference)Le=X.reference.href||null;else{if(!X.data)throw new Error("Output has neither reference nor data field.");Le=this.unmarshalOutputData(X.data,ee)}j.push({description:{id:X.id,title:ee.title,format:ge,reference:$,type:re},value:Le})}else Lt(C.value)&&j.push({description:{id:R,title:"",reference:!0,type:"status"},value:{status:C.value.status,jobID:C.value.jobID,percentCompleted:C.value.percentCompleted}});return j}unmarshalOutputData(C,w){if("complex"===w.type)switch("base64"===C.encoding&&C.content.map(Un.exports?R=>Buffer.from(R,"base64").toString("ascii"):R=>atob(R)),C.mimeType){case"application/vnd.geo+json":case"application/json":return C.content.map(R=>JSON.parse(R));case"application/WMS":return C.content;case"text/xml":case"application/xml":return Ie.serializeToString(C.content[0]);default:throw new Error(`Cannot unmarshal complex data of format ${C.mimeType}`)}else if("literal"===w.type)return C.content;throw new Error(`Not yet implemented: ${C}`)}unmarshalAsyncExecuteResponse(C,w,R,O,k){return this.unmarshalGetStateResponse(C,w,R,O,k)}unmarshalGetStateResponse(C,w,R,O,k){if(Lt(C.value))return{status:C.value.status,jobID:C.value.jobID,percentCompleted:C.value.percentCompleted};throw new Error(`Not a status-info: ${C}`)}marshalExecBody(C,w,R,O){return{name:{key:"{http://www.opengis.net/wps/2.0}Execute",localPart:"Execute",namespaceURI:"http://www.opengis.net/wps/2.0",prefix:"wps",string:"{http://www.opengis.net/wps/2.0}wps:Execute"},value:{TYPE_NAME:"WPS_2_0.ExecuteRequestType",service:"WPS",version:"2.0.0",identifier:{value:C},input:this.marshalInputs(w),output:this.marshalOutputs(R),mode:O?"async":"sync",response:"document"}}}marshalInputs(C){return C.map(w=>w.description.reference?{id:w.description.id,reference:{href:w.value,mimeType:w.description.format,schema:w.description.schema,encoding:w.description.encoding||"UTF-8"}}:{id:w.description.id,data:{content:this.marshalInput(w),mimeType:w.description.format}})}marshalInput(C){return"literal"===C.description.type?[C.value]:[JSON.stringify(C.value)]}marshalOutputs(C){return C.map(w=>({id:w.id,mimeType:w.format,transmission:w.reference?"reference":"value"}))}marshallGetStatusBody(C,w,R){return{name:{key:"{http://www.opengis.net/wps/2.0}GetStatus",localPart:"GetStatus",namespaceURI:"http://www.opengis.net/wps/2.0",prefix:"wps",string:"{http://www.opengis.net/wps/2.0}wps:GetStatus"},value:{jobID:R,service:"WPS",version:"2.0.0"}}}marshallGetResultBody(C,w,R){return{name:{key:"{http://www.opengis.net/wps/2.0}GetResult",localPart:"GetResult",namespaceURI:"http://www.opengis.net/wps/2.0",prefix:"wps",string:"{http://www.opengis.net/wps/2.0}wps:GetResult"},value:{service:"WPS",version:"2.0.0",jobID:R}}}dismissUrl(C,w,R){return C}marshalDismissBody(C){return{name:{key:"{http://www.opengis.net/wps/2.0}Dismiss",localPart:"Dismiss",namespaceURI:"http://www.opengis.net/wps/2.0",prefix:"wps",string:"{http://www.opengis.net/wps/2.0}wps:Dismiss"},value:{jobID:C,service:"WPS",version:"2.0.0"}}}unmarshalDismissResponse(C,w,R){return{status:C.value.status,jobID:C.value.jobID}}}}},Un=>{Un(Un.s=628)}]);