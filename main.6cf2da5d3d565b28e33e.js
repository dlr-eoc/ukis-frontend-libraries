var oit=Object.defineProperty,ait=Object.defineProperties,lit=Object.getOwnPropertyDescriptors,loe=Object.getOwnPropertySymbols,cit=Object.prototype.hasOwnProperty,uit=Object.prototype.propertyIsEnumerable,coe=(en,wt,Ve)=>wt in en?oit(en,wt,{enumerable:!0,configurable:!0,writable:!0,value:Ve}):en[wt]=Ve,la=(en,wt)=>{for(var Ve in wt||(wt={}))cit.call(wt,Ve)&&coe(en,Ve,wt[Ve]);if(loe)for(var Ve of loe(wt))uit.call(wt,Ve)&&coe(en,Ve,wt[Ve]);return en},fC=(en,wt)=>ait(en,lit(wt));(self.webpackChunkukis_frontend_libraries=self.webpackChunkukis_frontend_libraries||[]).push([[179],{394:(en,wt,Ve)=>{en=Ve.nmd(en);var _t=function(Me,fe,Ie){var T={singleFile:!0,Util:{}};return T.Util.extend=function(S,D){if(S=S||{},D){for(var L in D){var z=D[L];void 0!==z&&(S[L]=z)}!("undefined"!=typeof window&&null!==window&&"function"==typeof window.Event&&D instanceof window.Event)&&D.hasOwnProperty&&D.hasOwnProperty("toString")&&(S.toString=D.toString)}return S},T.Class=function(){for(var z,X,Y,S=function(){this.initialize.apply(this,arguments)},D={},L=function(){},re=0,J=arguments.length;re<J;++re)"function"==typeof(Y=arguments[re])?(0===re&&J>1&&(X=Y.prototype.initialize,Y.prototype.initialize=L,D=new Y,void 0===X?delete Y.prototype.initialize:Y.prototype.initialize=X),z=Y.prototype):z=Y,T.Util.extend(D,z);return S.prototype=D,S},T.XML={XMLNS_NS:"http://www.w3.org/2000/xmlns/",XMLNS_P:"xmlns"},T.DOM={isDomImplementationAvailable:function(){return void 0!==Me||!("undefined"==typeof document||!T.Util.Type.exists(document.implementation)||!T.Util.Type.isFunction(document.implementation.createDocument))},createDocument:function(){if(void 0!==Me)return(new Me.DOMImplementation).createDocument();if("undefined"!=typeof document&&T.Util.Type.exists(document.implementation)&&T.Util.Type.isFunction(document.implementation.createDocument))return document.implementation.createDocument("","",null);if("undefined"!=typeof ActiveXObject)return new ActiveXObject("MSXML2.DOMDocument");throw new Error("Error created the DOM document.")},serialize:function(S){if(T.Util.Ensure.ensureExists(S),void 0!==Me)return(new Me.XMLSerializer).serializeToString(S);if(T.Util.Type.exists(XMLSerializer))return(new XMLSerializer).serializeToString(S);if(T.Util.Type.exists(S.xml))return S.xml;throw new Error("Could not serialize the node, neither XMLSerializer nor the [xml] property were found.")},parse:function(S){if(T.Util.Ensure.ensureExists(S),void 0!==Me)return(new Me.DOMParser).parseFromString(S,"application/xml");if("undefined"!=typeof DOMParser)return(new DOMParser).parseFromString(S,"application/xml");if("undefined"!=typeof ActiveXObject){var D=T.DOM.createDocument("","");return D.loadXML(S),D}var L="data:text/xml;charset=utf-8,"+encodeURIComponent(S),z=new XMLHttpRequest;return z.open("GET",L,!1),z.overrideMimeType&&z.overrideMimeType("text/xml"),z.send(null),z.responseXML},load:function(S,D,L){T.Request.INSTANCE.issue(S,function(X){var Y;if(T.Util.Type.exists(X.responseXML)&&T.Util.Type.exists(X.responseXML.documentElement))Y=X.responseXML;else{if(!T.Util.Type.isString(X.responseText))throw new Error("Response does not have valid [responseXML] or [responseText].");Y=T.DOM.parse(X.responseText)}D(Y)},function(X){throw new Error("Could not retrieve XML from URL ["+S+"].")},L)},xlinkFixRequired:null,isXlinkFixRequired:function(){if(null===T.DOM.xlinkFixRequired)if("undefined"==typeof navigator)T.DOM.xlinkFixRequired=!1;else if(navigator.userAgent&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)){var S=T.DOM.createDocument(),D=S.createElement("test");D.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href","urn:test"),S.appendChild(D);var L=T.DOM.serialize(S);T.DOM.xlinkFixRequired=-1===L.indexOf("xmlns:xlink")}else T.DOM.xlinkFixRequired=!1;return T.DOM.xlinkFixRequired}},T.Request=T.Class({factories:[function(){return new XMLHttpRequest},function(){return new ActiveXObject("Msxml2.XMLHTTP")},function(){return new ActiveXObject("Msxml2.XMLHTTP.6.0")},function(){return new ActiveXObject("Msxml2.XMLHTTP.3.0")},function(){return new ActiveXObject("Microsoft.XMLHTTP")},function(){return void 0!==fe?new(0,fe.XMLHttpRequest):null}],initialize:function(){},issue:function(S,D,L,z){T.Util.Ensure.ensureString(S),T.Util.Type.exists(D)?T.Util.Ensure.ensureFunction(D):D=function(){},T.Util.Type.exists(L)?T.Util.Ensure.ensureFunction(L):L=function(){},T.Util.Type.exists(z)?T.Util.Ensure.ensureObject(z):z={};var X=this.createTransport(),Y=T.Util.Type.isString(z.method)?z.method:"GET",re=!T.Util.Type.isBoolean(z.async)||z.async,J=T.Util.Type.isString(z.proxy)?z.proxy:T.Request.PROXY,ie=T.Util.Type.isString(z.user)?z.user:null,Se=T.Util.Type.isString(z.password)?z.password:null;if(T.Util.Type.isString(J)&&0===S.indexOf("http")&&(S=J+encodeURIComponent(S)),T.Util.Type.isString(ie)?X.open(Y,S,re,ie,Se):X.open(Y,S,re),T.Util.Type.isObject(z.headers))for(var je in z.headers)z.headers.hasOwnProperty(je)&&X.setRequestHeader(je,z.headers[je]);var Je=T.Util.Type.exists(z.data)?z.data:null;if(re){var Tt=this;"undefined"!=typeof window?(X.onreadystatechange=function(){Tt.handleTransport(X,D,L)},window.setTimeout(function(){X.send(Je)},0)):(X.onreadystatechange=function(){Tt.handleTransport(X,D,L)},X.send(Je))}else X.send(Je),this.handleTransport(X,D,L);return X},handleTransport:function(S,D,L){4==S.readyState&&((!S.status||S.status>=200&&S.status<300)&&D(S),S.status&&(S.status<200||S.status>=300)&&L(S))},createTransport:function(){for(var S=0,D=this.factories.length;S<D;S++)try{var L=this.factories[S]();if(null!==L)return L}catch(z){}throw new Error("Could not create XML HTTP transport.")},CLASS_NAME:"Jsonix.Request"}),T.Request.INSTANCE=new T.Request,T.Request.PROXY=null,T.Schema={},T.Model={},T.Util.Type={exists:function(S){return null!=S},isUndefined:function(S){return void 0===S},isString:function(S){return"string"==typeof S},isBoolean:function(S){return"boolean"==typeof S},isObject:function(S){return"object"==typeof S},isFunction:function(S){return"function"==typeof S},isNumber:function(S){return"number"==typeof S&&!isNaN(S)},isNumberOrNaN:function(S){return S===+S||"[object Number]"===Object.prototype.toString.call(S)},isNaN:function(S){return T.Util.Type.isNumberOrNaN(S)&&isNaN(S)},isArray:function(S){return!(!(S&&S.concat&&S.unshift)||S.callee)},isDate:function(S){return!!(S&&S.getTimezoneOffset&&S.setUTCFullYear)},isRegExp:function(S){return!(!(S&&S.test&&S.exec)||!S.ignoreCase&&!1!==S.ignoreCase)},isNode:function(S){return"object"==typeof Node||"function"==typeof Node?S instanceof Node:S&&"object"==typeof S&&"number"==typeof S.nodeType&&"string"==typeof S.nodeName},isEqual:function(S,D,L){var z=T.Util.Type.isFunction(L),Y=Object.keys||function(ke){if(T.Util.Type.isArray(ke))return function(ke,zt,Ge){for(var Jn=slice.call(arguments),tt=Jn.length<=1,ne=tt?0:Jn[0],pe=Jn[2]||1,fn=Math.max(Math.ceil(((tt?Jn[0]:Jn[1])-ne)/pe),0),$t=0,Cn=new Array(fn);$t<fn;)Cn[$t++]=ne,ne+=pe;return Cn}(0,ke.length);var zt=[];for(var Ge in ke)ke.hasOwnProperty(Ge)&&(zt[zt.length]=Ge);return zt};if(S===D||T.Util.Type.isNaN(S)&&T.Util.Type.isNaN(D))return!0;var re=typeof S,J=typeof D;if(re!=J)return z&&L("Types differ ["+re+"], ["+J+"]."),!1;if(S==D)return!0;if(!S&&D||S&&!D)return z&&L("One is falsy, the other is truthy."),!1;if(T.Util.Type.isDate(S)&&T.Util.Type.isDate(D))return S.getTime()===D.getTime();if(T.Util.Type.isNaN(S)&&T.Util.Type.isNaN(D))return!1;if(T.Util.Type.isRegExp(S)&&T.Util.Type.isRegExp(D))return S.source===D.source&&S.global===D.global&&S.ignoreCase===D.ignoreCase&&S.multiline===D.multiline;if(T.Util.Type.isNode(S)&&T.Util.Type.isNode(D)){var ie=T.DOM.serialize(S),Se=T.DOM.serialize(D);return ie===Se||(z&&(L("Nodes differ."),L("A="+ie),L("B="+Se)),!1)}if("object"!==re)return!1;if(T.Util.Type.isArray(S)&&S.length!==D.length)return z&&(L("Lengths differ."),L("A.length="+S.length),L("B.length="+D.length)),!1;var je=Y(S),Je=Y(D);if(je.length!==Je.length){z&&L("Different number of properties ["+je.length+"], ["+Je.length+"].");for(var Tt=0;Tt<je.length;Tt++)z&&L("A ["+je[Tt]+"]="+S[je[Tt]]);for(var mt=0;mt<Je.length;mt++)z&&L("B ["+Je[mt]+"]="+D[Je[mt]]);return!1}for(var yt=0;yt<je.length;yt++){var at=je[yt];if(!(at in D)||!T.Util.Type.isEqual(S[at],D[at],L))return z&&(L("One of the properties differ."),L("Key: ["+at+"]."),L("Left: ["+S[at]+"]."),L("Right: ["+D[at]+"].")),!1}return!0},cloneObject:function(S,D){for(var L in D=D||{},S)S.hasOwnProperty(L)&&(D[L]=S[L]);return D},defaultValue:function(){var S=arguments;if(0!==S.length){for(var D=S[S.length-1],L=typeof D,z=0;z<S.length-1;z++){var X=S[z];if(typeof X===L)return X}return D}}},T.Util.NumberUtils={isInteger:function(S){return T.Util.Type.isNumber(S)&&S%1==0}},T.Util.StringUtils={trim:String.prototype.trim?function(S){return T.Util.Ensure.ensureString(S),S.trim()}:function(S){return T.Util.Ensure.ensureString(S),S.replace(/^\s\s*/,"").replace(/\s\s*$/,"")},isEmpty:function(S){var D=S.length;if(!D)return!0;for(var L=0;L<D;L++){var z=S[L];if(" "!==z){if(z>"\r"&&z<"\x85")return!1;if(z<"\xa0"){if(z<"\t")return!1;if(z>"\x85")return!1}else if(z>"\xa0")if(z<"\u2028"){if(z<"\u180e"){if(z<"\u1680")return!1;if(z>"\u1680")return!1}else if(z>"\u180e"){if(z<"\u2000")return!1;if(z>"\u200a")return!1}}else if(z>"\u2029")if(z<"\u205f"){if(z<"\u202f")return!1;if(z>"\u202f")return!1}else if(z>"\u205f"){if(z<"\u3000")return!1;if(z>"\u3000")return!1}}}return!0},isNotBlank:function(S){return T.Util.Type.isString(S)&&!T.Util.StringUtils.isEmpty(S)},whitespaceCharacters:"\t\n\v\f\r \x85\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u2028\u2029\u202f\u205f\u3000",whitespaceCharactersMap:{"\t":!0,"\n":!0,"\v":!0,"\f":!0,"\r":!0," ":!0,"\x85":!0,"\xa0":!0,"\u1680":!0,"\u180e":!0,"\u2000":!0,"\u2001":!0,"\u2002":!0,"\u2003":!0,"\u2004":!0,"\u2005":!0,"\u2006":!0,"\u2007":!0,"\u2008":!0,"\u2009":!0,"\u200a":!0,"\u2028":!0,"\u2029":!0,"\u202f":!0,"\u205f":!0,"\u3000":!0},splitBySeparatorChars:function(S,D){T.Util.Ensure.ensureString(S),T.Util.Ensure.ensureString(D);var L=S.length;if(0===L)return[];if(1===D.length)return S.split(D);for(var z=[],X=1,Y=0,re=0,J=!1;Y<L;)D.indexOf(S.charAt(Y))>=0?(!!J&&(-1==X++&&(Y=L),z.push(S.substring(re,Y)),J=!1),re=++Y):(J=!0,Y++);return!!J&&z.push(S.substring(re,Y)),z}},T.Util.Ensure={ensureBoolean:function(S){if(!T.Util.Type.isBoolean(S))throw new Error("Argument ["+S+"] must be a boolean.")},ensureString:function(S){if(!T.Util.Type.isString(S))throw new Error("Argument ["+S+"] must be a string.")},ensureNumber:function(S){if(!T.Util.Type.isNumber(S))throw new Error("Argument ["+S+"] must be a number.")},ensureNumberOrNaN:function(S){if(!T.Util.Type.isNumberOrNaN(S))throw new Error("Argument ["+S+"] must be a number or NaN.")},ensureInteger:function(S){if(!T.Util.Type.isNumber(S))throw new Error("Argument ["+S+"] must be an integer, but it is not a number.");if(!T.Util.NumberUtils.isInteger(S))throw new Error("Argument ["+S+"] must be an integer.")},ensureDate:function(S){if(!(S instanceof Date))throw new Error("Argument ["+S+"] must be a date.")},ensureObject:function(S){if(!T.Util.Type.isObject(S))throw new Error("Argument ["+S+"] must be an object.")},ensureArray:function(S){if(!T.Util.Type.isArray(S))throw new Error("Argument ["+S+"] must be an array.")},ensureFunction:function(S){if(!T.Util.Type.isFunction(S))throw new Error("Argument ["+S+"] must be a function.")},ensureExists:function(S){if(!T.Util.Type.exists(S))throw new Error("Argument ["+S+"] does not exist.")}},T.XML.QName=T.Class({key:null,namespaceURI:null,localPart:null,prefix:null,string:null,initialize:function(S,D,L){var z,X,Y;if(T.Util.Type.exists(D))if(T.Util.Type.exists(L))z=T.Util.Type.exists(S)?S:"",X=D,Y=T.Util.Type.exists(L)?L:"";else{z=T.Util.Type.exists(S)?S:"",X=D;var ie=D.indexOf(":");ie>0&&ie<D.length?(Y=D.substring(0,ie),X=D.substring(ie+1)):(Y="",X=D)}else z="",X=S,Y="";this.namespaceURI=z,this.localPart=X,this.prefix=Y,this.key=(""!==z?"{"+z+"}":"")+X,this.string=(""!==z?"{"+z+"}":"")+(""!==Y?Y+":":"")+X},toString:function(){return this.string},toCanonicalString:function(S){return S&&S.getPrefix(this.namespaceURI,this.prefix),this.prefix+(""===this.prefix?"":":")+this.localPart},clone:function(){return new T.XML.QName(this.namespaceURI,this.localPart,this.prefix)},equals:function(S){return!!S&&this.namespaceURI==S.namespaceURI&&this.localPart==S.localPart},CLASS_NAME:"Jsonix.XML.QName"}),T.XML.QName.fromString=function(S,D,L){var Y,re,z=S.indexOf("{"),X=S.lastIndexOf("}");0===z&&X>0&&X<S.length?(Y=S.substring(1,X),re=S.substring(X+1)):(Y=null,re=S);var ie,Se,J=re.indexOf(":");return J>0&&J<re.length?(ie=re.substring(0,J),Se=re.substring(J+1)):(ie="",Se=re),null===Y&&(""===ie&&T.Util.Type.isString(L)?Y=L:D&&(Y=D.getNamespaceURI(ie))),T.Util.Type.isString(Y)||(Y=L||""),new T.XML.QName(Y,Se,ie)},T.XML.QName.fromObject=function(S){if(T.Util.Ensure.ensureObject(S),S instanceof T.XML.QName||T.Util.Type.isString(S.CLASS_NAME)&&"Jsonix.XML.QName"===S.CLASS_NAME)return S;var D=S.localPart||S.lp||null;return T.Util.Ensure.ensureString(D),new T.XML.QName(S.namespaceURI||S.ns||"",D,S.prefix||S.p||"")},T.XML.QName.fromObjectOrString=function(S,D,L){return T.Util.Type.isString(S)?T.XML.QName.fromString(S,D,L):T.XML.QName.fromObject(S)},T.XML.QName.key=function(S,D){if(T.Util.Ensure.ensureString(D),S){var L=D.indexOf(":");return"{"+S+"}"+(L>0&&L<D.length?D.substring(L+1):D)}return D},T.XML.Calendar=T.Class({year:NaN,month:NaN,day:NaN,hour:NaN,minute:NaN,second:NaN,fractionalSecond:NaN,timezone:NaN,date:null,initialize:function(S){T.Util.Ensure.ensureObject(S),T.Util.Type.exists(S.year)?(T.Util.Ensure.ensureInteger(S.year),T.XML.Calendar.validateYear(S.year),this.year=S.year):this.year=NaN,T.Util.Type.exists(S.month)?(T.Util.Ensure.ensureInteger(S.month),T.XML.Calendar.validateMonth(S.month),this.month=S.month):this.month=NaN,T.Util.Type.exists(S.day)?(T.Util.Ensure.ensureInteger(S.day),T.Util.NumberUtils.isInteger(S.year)&&T.Util.NumberUtils.isInteger(S.month)?T.XML.Calendar.validateYearMonthDay(S.year,S.month,S.day):T.Util.NumberUtils.isInteger(S.month)?T.XML.Calendar.validateMonthDay(S.month,S.day):T.XML.Calendar.validateDay(S.day),this.day=S.day):this.day=NaN,T.Util.Type.exists(S.hour)?(T.Util.Ensure.ensureInteger(S.hour),T.XML.Calendar.validateHour(S.hour),this.hour=S.hour):this.hour=NaN,T.Util.Type.exists(S.minute)?(T.Util.Ensure.ensureInteger(S.minute),T.XML.Calendar.validateMinute(S.minute),this.minute=S.minute):this.minute=NaN,T.Util.Type.exists(S.second)?(T.Util.Ensure.ensureInteger(S.second),T.XML.Calendar.validateSecond(S.second),this.second=S.second):this.second=NaN,T.Util.Type.exists(S.fractionalSecond)?(T.Util.Ensure.ensureNumber(S.fractionalSecond),T.XML.Calendar.validateFractionalSecond(S.fractionalSecond),this.fractionalSecond=S.fractionalSecond):this.fractionalSecond=NaN,T.Util.Type.exists(S.timezone)?T.Util.Type.isNaN(S.timezone)?this.timezone=NaN:(T.Util.Ensure.ensureInteger(S.timezone),T.XML.Calendar.validateTimezone(S.timezone),this.timezone=S.timezone):this.timezone=NaN;var D=new Date(0);D.setUTCFullYear(this.year||1970),D.setUTCMonth(this.month-1||0),D.setUTCDate(this.day||1),D.setUTCHours(this.hour||0),D.setUTCMinutes(this.minute||0),D.setUTCSeconds(this.second||0),D.setUTCMilliseconds(1e3*(this.fractionalSecond||0));var L=-6e4*(this.timezone||0);this.date=new Date(D.getTime()+L)},CLASS_NAME:"Jsonix.XML.Calendar"}),T.XML.Calendar.MIN_TIMEZONE=-840,T.XML.Calendar.MAX_TIMEZONE=840,T.XML.Calendar.DAYS_IN_MONTH=[31,29,31,30,31,30,31,31,30,31,30,31],T.XML.Calendar.fromObject=function(S){return T.Util.Ensure.ensureObject(S),T.Util.Type.isString(S.CLASS_NAME)&&"Jsonix.XML.Calendar"===S.CLASS_NAME?S:new T.XML.Calendar(S)},T.XML.Calendar.validateYear=function(S){if(0===S)throw new Error("Invalid year ["+S+"]. Year must not be [0].")},T.XML.Calendar.validateMonth=function(S){if(S<1||S>12)throw new Error("Invalid month ["+S+"]. Month must be in range [1, 12].")},T.XML.Calendar.validateDay=function(S){if(S<1||S>31)throw new Error("Invalid day ["+S+"]. Day must be in range [1, 31].")},T.XML.Calendar.validateMonthDay=function(S,D){if(T.XML.Calendar.validateMonth(S),D<1||D>T.XML.Calendar.DAYS_IN_MONTH[S-1])throw new Error("Invalid day ["+D+"]. Day must be in range [1, "+T.XML.Calendar.DAYS_IN_MONTH[S-1]+"].")},T.XML.Calendar.validateYearMonthDay=function(S,D,L){T.XML.Calendar.validateYear(S),T.XML.Calendar.validateMonthDay(D,L)},T.XML.Calendar.validateHour=function(S){if(S<0||S>23)throw new Error("Invalid hour ["+S+"]. Hour must be in range [0, 23].")},T.XML.Calendar.validateMinute=function(S){if(S<0||S>59)throw new Error("Invalid minute ["+S+"]. Minute must be in range [0, 59].")},T.XML.Calendar.validateSecond=function(S){if(S<0||S>59)throw new Error("Invalid second ["+S+"]. Second must be in range [0, 59].")},T.XML.Calendar.validateFractionalSecond=function(S){if(S<0||S>59)throw new Error("Invalid fractional second ["+S+"]. Fractional second must be in range [0, 1).")},T.XML.Calendar.validateTimezone=function(S){if(S<T.XML.Calendar.MIN_TIMEZONE||S>T.XML.Calendar.MAX_TIMEZONE)throw new Error("Invalid timezone ["+S+"]. Timezone must not be in range ["+T.XML.Calendar.MIN_TIMEZONE+", "+T.XML.Calendar.MAX_TIMEZONE+"].")},T.XML.Input=T.Class({root:null,node:null,attributes:null,eventType:null,pns:null,initialize:function(S){T.Util.Ensure.ensureExists(S),this.root=S;var D={"":""};D[T.XML.XMLNS_P]=T.XML.XMLNS_NS,this.pns=[D]},hasNext:function(){if(null===this.node)return!0;if(this.node===this.root){var S=this.node.nodeType;return!(9===S&&8===this.eventType||1===S&&2===this.eventType)}return!0},next:function(){if(null===this.eventType)return this.enter(this.root);if(7===this.eventType){var S=this.node.documentElement;return S?this.enter(S):this.leave(this.node)}if(1===this.eventType){var D=this.node.firstChild;return D?this.enter(D):this.leave(this.node)}if(2===this.eventType){var L=this.node.nextSibling;return L?this.enter(L):this.leave(this.node)}return this.leave(this.node)},enter:function(S){var D=S.nodeType;if(this.node=S,this.attributes=null,1===D)return this.eventType=1,this.pushNS(S),this.eventType;if(2===D)return this.eventType=10,this.eventType;if(3===D)return this.eventType=T.Util.StringUtils.isEmpty(S.nodeValue)?6:4,this.eventType;if(4===D)return this.eventType=12,this.eventType;if(5===D)return this.eventType=9,this.eventType;if(6===D)return this.eventType=15,this.eventType;if(7===D)return this.eventType=3,this.eventType;if(8===D)return this.eventType=5,this.eventType;if(9===D)return this.eventType=7,this.eventType;if(10===D)return this.eventType=12,this.eventType;if(12===D)return this.eventType=14,this.eventType;throw new Error("Node type ["+D+"] is not supported.")},leave:function(S){if(9===S.nodeType){if(8==this.eventType)throw new Error("Invalid state.");return this.node=S,this.attributes=null,this.eventType=8,this.eventType}if(1===S.nodeType){if(2!=this.eventType)return this.node=S,this.attributes=null,this.eventType=2,this.popNS(),this.eventType;var D=S.nextSibling;if(D)return this.enter(D)}var L=S.nextSibling;if(L)return this.enter(L);var z=S.parentNode;return this.node=z,this.attributes=null,this.eventType=9===z.nodeType?8:2,this.eventType},getName:function(){var S=this.node;return T.Util.Type.isString(S.nodeName)?T.Util.Type.isString(S.namespaceURI)?new T.XML.QName(S.namespaceURI,S.nodeName):new T.XML.QName(S.nodeName):null},getNameKey:function(){var S=this.node;return T.Util.Type.isString(S.nodeName)?T.XML.QName.key(S.namespaceURI,S.nodeName):null},getText:function(){return this.node.nodeValue},nextTag:function(){for(var S=this.next();7===S||4===S||12===S||6===S||3===S||5===S;)S=this.next();if(1!==S&&2!==S)throw new Error("Expected start or end tag.");return S},skipElement:function(){if(this.eventType!==T.XML.Input.START_ELEMENT)throw new Error("Parser must be on START_ELEMENT to skip element.");var D,S=1;do{S+=(D=this.nextTag())===T.XML.Input.START_ELEMENT?1:-1}while(S>0);return D},getElementText:function(){if(1!=this.eventType)throw new Error("Parser must be on START_ELEMENT to read next text.");for(var S=this.next(),D="";2!==S;){if(4===S||12===S||6===S||9===S)D+=this.getText();else if(3!==S&&5!==S)throw 8===S?new Error("Unexpected end of document when reading element text content."):1===S?new Error("Element text content may not contain START_ELEMENT."):new Error("Unexpected event type ["+S+"].");S=this.next()}return D},retrieveElement:function(){var S;if(1===this.eventType)S=this.node;else{if(10!==this.eventType)throw new Error("Element can only be retrieved for START_ELEMENT or ATTRIBUTE nodes.");S=this.node.parentNode}return S},retrieveAttributes:function(){var S;if(this.attributes)S=this.attributes;else if(1===this.eventType)this.attributes=S=this.node.attributes;else{if(10!==this.eventType)throw new Error("Attributes can only be retrieved for START_ELEMENT or ATTRIBUTE nodes.");this.attributes=S=this.node.parentNode.attributes}return S},getAttributeCount:function(){return this.retrieveAttributes().length},getAttributeName:function(S){var D=this.retrieveAttributes();if(S<0||S>=D.length)throw new Error("Invalid attribute index ["+S+"].");var L=D[S];return T.Util.Type.isString(L.namespaceURI)?new T.XML.QName(L.namespaceURI,L.nodeName):new T.XML.QName(L.nodeName)},getAttributeNameKey:function(S){var D=this.retrieveAttributes();if(S<0||S>=D.length)throw new Error("Invalid attribute index ["+S+"].");var L=D[S];return T.XML.QName.key(L.namespaceURI,L.nodeName)},getAttributeValue:function(S){var D=this.retrieveAttributes();if(S<0||S>=D.length)throw new Error("Invalid attribute index ["+S+"].");return D[S].value},getAttributeValueNS:null,getAttributeValueNSViaElement:function(S,D){return this.retrieveElement().getAttributeNS(S,D)},getAttributeValueNSViaAttribute:function(S,D){var L=this.getAttributeNodeNS(S,D);return T.Util.Type.exists(L)?L.nodeValue:null},getAttributeNodeNS:null,getAttributeNodeNSViaElement:function(S,D){return this.retrieveElement().getAttributeNodeNS(S,D)},getAttributeNodeNSViaAttributes:function(S,D){for(var X,L=null,z=this.retrieveAttributes(),re=0,J=z.length;re<J;++re)if((X=z[re]).namespaceURI===S&&(X.prefix?X.prefix+":"+D:D)===X.nodeName){L=X;break}return L},getElement:function(){if(1===this.eventType||2===this.eventType)return this.eventType=2,this.node;throw new Error("Parser must be on START_ELEMENT or END_ELEMENT to return current element.")},pushNS:function(S){var D=this.pns.length-1,L=this.pns[D],z=T.Util.Type.isObject(L)?D:L;this.pns.push(z),D++;var X=!0;if(S.attributes){var Y=S.attributes,re=Y.length;if(re>0)for(var J=0;J<re;J++){var ie=Y[J],Se=ie.nodeName,je=null,Je=null,Tt=!1;"xmlns"===Se?(je="",Je=ie.value,Tt=!0):"xmlns:"===Se.substring(0,6)&&(je=Se.substring(6),Je=ie.value,Tt=!0),Tt&&(X&&(z=T.Util.Type.cloneObject(this.pns[z],{}),this.pns[D]=z,X=!1),z[je]=Je)}}},popNS:function(){this.pns.pop()},getNamespaceURI:function(S){var L=this.pns[this.pns.length-1];return(L=T.Util.Type.isObject(L)?L:this.pns[L])[S]},CLASS_NAME:"Jsonix.XML.Input"}),T.XML.Input.prototype.getAttributeValueNS=T.DOM.isDomImplementationAvailable()?T.XML.Input.prototype.getAttributeValueNSViaElement:T.XML.Input.prototype.getAttributeValueNSViaAttribute,T.XML.Input.prototype.getAttributeNodeNS=T.DOM.isDomImplementationAvailable()?T.XML.Input.prototype.getAttributeNodeNSViaElement:T.XML.Input.prototype.getAttributeNodeNSViaAttributes,T.XML.Input.START_ELEMENT=1,T.XML.Input.END_ELEMENT=2,T.XML.Input.PROCESSING_INSTRUCTION=3,T.XML.Input.CHARACTERS=4,T.XML.Input.COMMENT=5,T.XML.Input.SPACE=6,T.XML.Input.START_DOCUMENT=7,T.XML.Input.END_DOCUMENT=8,T.XML.Input.ENTITY_REFERENCE=9,T.XML.Input.ATTRIBUTE=10,T.XML.Input.DTD=11,T.XML.Input.CDATA=12,T.XML.Input.NAMESPACE=13,T.XML.Input.NOTATION_DECLARATION=14,T.XML.Input.ENTITY_DECLARATION=15,T.XML.Output=T.Class({document:null,documentElement:null,node:null,nodes:null,nsp:null,pns:null,namespacePrefixIndex:0,xmldom:null,initialize:function(S){this.xmldom="undefined"!=typeof ActiveXObject?new ActiveXObject("Microsoft.XMLDOM"):null,this.nodes=[];var D={"":""};D[T.XML.XMLNS_NS]=T.XML.XMLNS_P,T.Util.Type.isObject(S)&&T.Util.Type.isObject(S.namespacePrefixes)&&T.Util.Type.cloneObject(S.namespacePrefixes,D),this.nsp=[D];var L={"":""};L[T.XML.XMLNS_P]=T.XML.XMLNS_NS,this.pns=[L]},destroy:function(){this.xmldom=null},writeStartDocument:function(){var S=T.DOM.createDocument();return this.document=S,this.push(S)},writeEndDocument:function(){return this.pop()},writeStartElement:function(S){T.Util.Ensure.ensureObject(S);var D=S.localPart||S.lp||null;T.Util.Ensure.ensureString(D);var J,L=S.namespaceURI||S.ns||null,z=T.Util.Type.isString(L)?L:"",Y=this.getPrefix(z,S.prefix||S.p),re=Y?Y+":"+D:D;if(T.Util.Type.isFunction(this.document.createElementNS))J=this.document.createElementNS(z,re);else{if(!this.xmldom)throw new Error("Could not create an element node.");J=this.xmldom.createNode(1,re,z)}return this.peek().appendChild(J),this.push(J),this.declareNamespace(z,Y),null===this.documentElement&&(this.documentElement=J,this.declareNamespaces()),J},writeEndElement:function(){return this.pop()},writeCharacters:function(S){var D;if(T.Util.Type.isFunction(this.document.createTextNode))D=this.document.createTextNode(S);else{if(!this.xmldom)throw new Error("Could not create a text node.");D=this.xmldom.createTextNode(S)}return this.peek().appendChild(D),D},writeCdata:function(S){for(var D=S.split("]]>"),L=0;L<D.length;L++)L+1<D.length&&(D[L]=D[L]+"]]",D[L+1]=">"+D[L+1]);for(var z,X=0;X<D.length;X++)z=this.writeCdataWithoutCdend(D[X]);return z},writeCdataWithoutCdend:function(S){var D;if(T.Util.Type.isFunction(this.document.createCDATASection))D=this.document.createCDATASection(S);else{if(!this.xmldom)throw new Error("Could not create a CDATA section node.");D=this.xmldom.createCDATASection(S)}return this.peek().appendChild(D),D},writeAttribute:function(S,D){T.Util.Ensure.ensureString(D),T.Util.Ensure.ensureObject(S);var L=S.localPart||S.lp||null;T.Util.Ensure.ensureString(L);var z=S.namespaceURI||S.ns||null,X=T.Util.Type.isString(z)?z:"",re=this.getPrefix(X,S.prefix||S.p||null),J=re?re+":"+L:L,ie=this.peek();if(""===X)ie.setAttribute(J,D);else{if(ie.setAttributeNS)ie.setAttributeNS(X,J,D);else if(this.xmldom){var Se=this.document.createNode(2,J,X);Se.nodeValue=D,ie.setAttributeNode(Se)}else{if(X!==T.XML.XMLNS_NS)throw new Error("The [setAttributeNS] method is not implemented");ie.setAttribute(J,D)}this.declareNamespace(X,re)}},writeNode:function(S){var D;return D=T.Util.Type.exists(this.document.importNode)?this.document.importNode(S,!0):S,this.peek().appendChild(D),D},push:function(S){return this.nodes.push(S),this.pushNS(),S},peek:function(){return this.nodes[this.nodes.length-1]},pop:function(){return this.popNS(),this.nodes.pop()},pushNS:function(){var S=this.nsp.length-1,D=this.pns.length-1,L=this.nsp[S],z=this.pns[D],X=T.Util.Type.isObject(L)?S:L,Y=T.Util.Type.isObject(z)?D:z;this.nsp.push(X),this.pns.push(Y)},popNS:function(){this.nsp.pop(),this.pns.pop()},declareNamespaces:function(){var L,D=this.nsp[this.nsp.length-1];for(L in D=T.Util.Type.isNumber(D)?this.nsp[D]:D)D.hasOwnProperty(L)&&this.declareNamespace(L,D[L])},declareNamespace:function(S,D){var X,L=this.pns.length-1,z=this.pns[L];T.Util.Type.isNumber(z)?(X=!0,z=this.pns[z]):X=!1,z[D]!==S&&(this.writeAttribute(""===D?{lp:T.XML.XMLNS_P}:{ns:T.XML.XMLNS_NS,lp:D,p:T.XML.XMLNS_P},S),X&&(z=T.Util.Type.cloneObject(z,{}),this.pns[L]=z),z[D]=S)},getPrefix:function(S,D){var X,L=this.nsp.length-1,z=this.nsp[L];return T.Util.Type.isNumber(z)?(X=!0,z=this.nsp[z]):X=!1,T.Util.Type.isString(D)?D===z[S]||(X&&(z=T.Util.Type.cloneObject(z,{}),this.nsp[L]=z),z[S]=D):T.Util.Type.exists(D=z[S])||(D="p"+this.namespacePrefixIndex++,X&&(z=T.Util.Type.cloneObject(z,{}),this.nsp[L]=z),z[S]=D),D},getNamespaceURI:function(S){var L=this.pns[this.pns.length-1];return(L=T.Util.Type.isObject(L)?L:this.pns[L])[S]},CLASS_NAME:"Jsonix.XML.Output"}),T.Mapping={},T.Mapping.Style=T.Class({marshaller:null,unmarshaller:null,module:null,elementInfo:null,classInfo:null,enumLeafInfo:null,anyAttributePropertyInfo:null,anyElementPropertyInfo:null,attributePropertyInfo:null,elementMapPropertyInfo:null,elementPropertyInfo:null,elementsPropertyInfo:null,elementRefPropertyInfo:null,elementRefsPropertyInfo:null,valuePropertyInfo:null,initialize:function(){},CLASS_NAME:"Jsonix.Mapping.Style"}),T.Mapping.Style.STYLES={},T.Mapping.Styled=T.Class({mappingStyle:null,initialize:function(S){if(T.Util.Type.exists(S))if(T.Util.Ensure.ensureObject(S),T.Util.Type.isString(S.mappingStyle)){var D=T.Mapping.Style.STYLES[S.mappingStyle];if(!D)throw new Error("Mapping style ["+S.mappingStyle+"] is not known.");this.mappingStyle=D}else T.Util.Type.isObject(S.mappingStyle)&&(this.mappingStyle=S.mappingStyle);this.mappingStyle||(this.mappingStyle=T.Mapping.Style.STYLES.standard)},CLASS_NAME:"Jsonix.Mapping.Styled"}),T.Binding={},T.Binding.Marshalls={},T.Binding.Marshalls.Element=T.Class({marshalElement:function(S,D,L,z){var X=this.convertToTypedNamedValue(S,D,L,z),Y=X.typeInfo,re=void 0;if(D.supportXsiType&&T.Util.Type.exists(X.value)){var J=D.getTypeInfoByValue(X.value);J&&J.typeName&&(re=J)}var ie=re||Y;if(!ie)throw new Error("Element ["+X.name.key+"] is not known in this context, could not determine its type.");if(L.writeStartElement(X.name),re&&Y!==re){var je=T.Schema.XSD.QName.INSTANCE.print(re.typeName,D,L,z);L.writeAttribute(T.Schema.XSI.TYPE_QNAME,je)}T.Util.Type.exists(X.value)&&ie.marshal(X.value,D,L,z),L.writeEndElement()},getTypeInfoByElementName:function(S,D,L){var z=D.getElementInfo(S,L);if(T.Util.Type.exists(z))return z.typeInfo}}),T.Binding.Marshalls.Element.AsElementRef=T.Class({convertToTypedNamedValue:function(S,D,L,z){T.Util.Ensure.ensureObject(S);var X=this.convertToNamedValue(S,D,L,z);return{name:X.name,value:X.value,typeInfo:this.getTypeInfoByElementName(X.name,D,z)}},convertToNamedValue:function(S,D,L,z){if(T.Util.Type.exists(S.name)&&!T.Util.Type.isUndefined(S.value))return{name:T.XML.QName.fromObjectOrString(S.name,D),value:T.Util.Type.exists(S.value)?S.value:null};for(var re in S)if(S.hasOwnProperty(re))return{name:T.XML.QName.fromObjectOrString(re,D),value:S[re]};throw new Error("Invalid element value ["+S+"]. Element values must either have {name:'myElementName', value: elementValue} or {myElementName:elementValue} structure.")}}),T.Binding.Unmarshalls={},T.Binding.Unmarshalls.WrapperElement=T.Class({mixed:!1,unmarshalWrapperElement:function(S,D,L,z){for(var X=D.next();X!==T.XML.Input.END_ELEMENT;){if(X===T.XML.Input.START_ELEMENT)this.unmarshalElement(S,D,L,z);else if(!this.mixed||X!==T.XML.Input.CHARACTERS&&X!==T.XML.Input.CDATA&&X!==T.XML.Input.ENTITY_REFERENCE){if(X!==T.XML.Input.SPACE&&X!==T.XML.Input.COMMENT&&X!==T.XML.Input.PROCESSING_INSTRUCTION)throw new Error("Illegal state: unexpected event type ["+X+"].")}else z(D.getText());X=D.next()}}}),T.Binding.Unmarshalls.Element=T.Class({allowTypedObject:!0,allowDom:!1,unmarshalElement:function(S,D,L,z){if(1!=D.eventType)throw new Error("Parser must be on START_ELEMENT to read next element.");var re,X=this.getTypeInfoByInputElement(S,D,L),Y=D.getName();if(this.allowTypedObject)if(T.Util.Type.exists(X)){var J=X.unmarshal(S,D,L);re=this.convertFromTypedNamedValue({name:Y,value:J,typeInfo:X},S,D,L)}else{if(!this.allowDom)throw new Error("Element ["+Y.toString()+"] could not be unmarshalled as is not known in this context and the property does not allow DOM content.");re=D.getElement()}else{if(!this.allowDom)throw new Error("Element ["+Y.toString()+"] could not be unmarshalled as the property neither allows typed objects nor DOM as content. This is a sign of invalid mappings, do not use [allowTypedObject : false] and [allowDom : false] at the same time.");re=D.getElement()}z(re)},getTypeInfoByInputElement:function(S,D,L){var z=null;if(S.supportXsiType){var X=D.getAttributeValueNS(T.Schema.XSI.NAMESPACE_URI,T.Schema.XSI.TYPE);if(T.Util.StringUtils.isNotBlank(X)){var Y=T.Schema.XSD.QName.INSTANCE.parse(X,S,D,L);z=S.getTypeInfoByTypeNameKey(Y.key)}}var re=D.getName();return z||this.getTypeInfoByElementName(re,S,L)},getTypeInfoByElementName:function(S,D,L){var z=D.getElementInfo(S,L);if(T.Util.Type.exists(z))return z.typeInfo}}),T.Binding.Unmarshalls.Element.AsElementRef=T.Class({convertFromTypedNamedValue:function(S,D,L,z){return{name:S.name,value:S.value}}}),T.Binding.Unmarshalls.Element.AsSimplifiedElementRef=T.Class({convertFromTypedNamedValue:function(S,D,L,z){var Y={};return Y[S.name.toCanonicalString(D)]=S.value,Y}}),T.Binding.Marshaller=T.Class(T.Binding.Marshalls.Element,T.Binding.Marshalls.Element.AsElementRef,{context:null,initialize:function(S){T.Util.Ensure.ensureObject(S),this.context=S},marshalString:function(S){var D=this.marshalDocument(S);return T.DOM.serialize(D)},marshalDocument:function(S){var D=new T.XML.Output({namespacePrefixes:this.context.namespacePrefixes}),L=D.writeStartDocument();return this.marshalElement(S,this.context,D,void 0),D.writeEndDocument(),L},CLASS_NAME:"Jsonix.Binding.Marshaller"}),T.Binding.Marshaller.Simplified=T.Class(T.Binding.Marshaller,{CLASS_NAME:"Jsonix.Binding.Marshaller.Simplified"}),T.Binding.Unmarshaller=T.Class(T.Binding.Unmarshalls.Element,T.Binding.Unmarshalls.Element.AsElementRef,{context:null,allowTypedObject:!0,allowDom:!1,initialize:function(S){T.Util.Ensure.ensureObject(S),this.context=S},unmarshalString:function(S){T.Util.Ensure.ensureString(S);var D=T.DOM.parse(S);return this.unmarshalDocument(D)},unmarshalURL:function(S,D,L){T.Util.Ensure.ensureString(S),T.Util.Ensure.ensureFunction(D),T.Util.Type.exists(L)&&T.Util.Ensure.ensureObject(L),that=this,T.DOM.load(S,function(z){D(that.unmarshalDocument(z))},L)},unmarshalFile:function(S,D,L){if(void 0===Ie)throw new Error("File unmarshalling is only available in environments which support file systems.");T.Util.Ensure.ensureString(S),T.Util.Ensure.ensureFunction(D),T.Util.Type.exists(L)&&T.Util.Ensure.ensureObject(L),that=this,Ie.readFile(S,L,function(X,Y){if(X)throw X;var re=Y.toString(),J=T.DOM.parse(re);D(that.unmarshalDocument(J))})},unmarshalDocument:function(S,D){var L=new T.XML.Input(S),z=null;return L.nextTag(),this.unmarshalElement(this.context,L,D,function(Y){z=Y}),z},CLASS_NAME:"Jsonix.Binding.Unmarshaller"}),T.Binding.Unmarshaller.Simplified=T.Class(T.Binding.Unmarshaller,T.Binding.Unmarshalls.Element.AsSimplifiedElementRef,{CLASS_NAME:"Jsonix.Binding.Unmarshaller.Simplified"}),T.Model.TypeInfo=T.Class({module:null,name:null,baseTypeInfo:null,initialize:function(){},isBasedOn:function(S){for(var D=this;D;){if(S===D)return!0;D=D.baseTypeInfo}return!1},CLASS_NAME:"Jsonix.Model.TypeInfo"}),T.Model.ClassInfo=T.Class(T.Model.TypeInfo,T.Mapping.Styled,{name:null,localName:null,typeName:null,instanceFactory:null,properties:null,propertiesMap:null,structure:null,targetNamespace:"",defaultElementNamespaceURI:"",defaultAttributeNamespaceURI:"",built:!1,initialize:function(S,D){T.Model.TypeInfo.prototype.initialize.apply(this,[]),T.Mapping.Styled.prototype.initialize.apply(this,[D]),T.Util.Ensure.ensureObject(S);var L=S.name||S.n||void 0;T.Util.Ensure.ensureString(L),this.name=L;var z=S.localName||S.ln||null;this.localName=z,this.defaultElementNamespaceURI=S.defaultElementNamespaceURI||S.dens||S.targetNamespace||S.tns||"";var Y=S.targetNamespace||S.tns||S.defaultElementNamespaceURI||S.dens||this.defaultElementNamespaceURI;this.targetNamespace=Y,this.defaultAttributeNamespaceURI=S.defaultAttributeNamespaceURI||S.dans||"",this.baseTypeInfo=S.baseTypeInfo||S.bti||null;var ie=S.instanceFactory||S.inF||void 0;T.Util.Type.exists(ie)&&(T.Util.Ensure.ensureFunction(ie),this.instanceFactory=ie);var Se=S.typeName||S.tn||void 0;T.Util.Type.exists(Se)?this.typeName=T.Util.Type.isString(Se)?new T.XML.QName(this.targetNamespace,Se):T.XML.QName.fromObject(Se):T.Util.Type.exists(z)&&(this.typeName=new T.XML.QName(Y,z)),this.properties=[],this.propertiesMap={};var je=S.propertyInfos||S.ps||[];T.Util.Ensure.ensureArray(je);for(var Je=0;Je<je.length;Je++)this.p(je[Je])},getPropertyInfoByName:function(S){return this.propertiesMap[S]},destroy:function(){},build:function(S){if(!this.built){this.baseTypeInfo=S.resolveTypeInfo(this.baseTypeInfo,this.module),T.Util.Type.exists(this.baseTypeInfo)&&this.baseTypeInfo.build(S);for(var D=0;D<this.properties.length;D++)this.properties[D].build(S,this.module);var z={elements:null,attributes:{},anyAttribute:null,value:null,any:null};this.buildStructure(S,z),this.structure=z}},buildStructure:function(S,D){T.Util.Type.exists(this.baseTypeInfo)&&this.baseTypeInfo.buildStructure(S,D);for(var L=0;L<this.properties.length;L++)this.properties[L].buildStructure(S,D)},unmarshal:function(S,D){var L;if(this.build(S),L=this.instanceFactory?new this.instanceFactory:{TYPE_NAME:this.name},1!==D.eventType)throw new Error("Parser must be on START_ELEMENT to read a class info.");if(T.Util.Type.exists(this.structure.attributes)){var z=D.getAttributeCount();if(0!==z)for(var X=0;X<z;X++){var Y=D.getAttributeNameKey(X);if(T.Util.Type.exists(this.structure.attributes[Y])){var re=D.getAttributeValue(X);T.Util.Type.isString(re)&&this.unmarshalPropertyValue(S,D,this.structure.attributes[Y],L,re)}}}if(T.Util.Type.exists(this.structure.anyAttribute)&&this.unmarshalProperty(S,D,this.structure.anyAttribute,L),T.Util.Type.exists(this.structure.elements))for(var Se=D.next();Se!==T.XML.Input.END_ELEMENT;){if(Se===T.XML.Input.START_ELEMENT){var je=D.getNameKey();T.Util.Type.exists(this.structure.elements[je])?this.unmarshalProperty(S,D,this.structure.elements[je],L):T.Util.Type.exists(this.structure.any)?this.unmarshalProperty(S,D,this.structure.any,L):Se=D.skipElement()}else if(Se===T.XML.Input.CHARACTERS||Se===T.XML.Input.CDATA||Se===T.XML.Input.ENTITY_REFERENCE)T.Util.Type.exists(this.structure.mixed)&&this.unmarshalProperty(S,D,this.structure.mixed,L);else if(Se!==T.XML.Input.SPACE&&Se!==T.XML.Input.COMMENT&&Se!==T.XML.Input.PROCESSING_INSTRUCTION)throw new Error("Illegal state: unexpected event type ["+Se+"].");Se=D.next()}else T.Util.Type.exists(this.structure.value)?this.unmarshalProperty(S,D,this.structure.value,L):D.nextTag();if(2!==D.eventType)throw new Error("Illegal state: must be END_ELEMENT.");return L},unmarshalProperty:function(S,D,L,z){var X=L.unmarshal(S,D,this);L.setProperty(z,X)},unmarshalPropertyValue:function(S,D,L,z,X){var Y=L.unmarshalValue(X,S,D,this);L.setProperty(z,Y)},marshal:function(S,D,L,z){if(this.isMarshallable(S,D,z)){T.Util.Type.exists(this.baseTypeInfo)&&this.baseTypeInfo.marshal(S,D,L);for(var X=0;X<this.properties.length;X++){var Y=this.properties[X],re=S[Y.name];T.Util.Type.exists(re)&&Y.marshal(re,D,L,this)}}else if(this.structure.value)this.structure.value.marshal(S,D,L,this);else{if(1!==this.properties.length)throw new Error("The passed value ["+S+"] is not an object and there is no single suitable property to marshal it.");this.properties[0].marshal(S,D,L,this)}},isMarshallable:function(S,D,L){return this.isInstance(S,D,L)||T.Util.Type.isObject(S)&&!T.Util.Type.isArray(S)},isInstance:function(S,D,L){return this.instanceFactory?S instanceof this.instanceFactory:T.Util.Type.isObject(S)&&T.Util.Type.isString(S.TYPE_NAME)&&S.TYPE_NAME===this.name},b:function(S){return T.Util.Ensure.ensureObject(S),this.baseTypeInfo=S,this},ps:function(){return this},p:function(S){if(T.Util.Ensure.ensureObject(S),S instanceof T.Model.PropertyInfo)this.addProperty(S);else{var D=(S=T.Util.Type.cloneObject(S)).type||S.t||"element";if(!T.Util.Type.isFunction(this.propertyInfoCreators[D]))throw new Error("Unknown property info type ["+D+"].");this.propertyInfoCreators[D].call(this,S)}},aa:function(S){return this.addDefaultNamespaces(S),this.addProperty(new this.mappingStyle.anyAttributePropertyInfo(S,{mappingStyle:this.mappingStyle}))},ae:function(S){return this.addDefaultNamespaces(S),this.addProperty(new this.mappingStyle.anyElementPropertyInfo(S,{mappingStyle:this.mappingStyle}))},a:function(S){return this.addDefaultNamespaces(S),this.addProperty(new this.mappingStyle.attributePropertyInfo(S,{mappingStyle:this.mappingStyle}))},em:function(S){return this.addDefaultNamespaces(S),this.addProperty(new this.mappingStyle.elementMapPropertyInfo(S,{mappingStyle:this.mappingStyle}))},e:function(S){return this.addDefaultNamespaces(S),this.addProperty(new this.mappingStyle.elementPropertyInfo(S,{mappingStyle:this.mappingStyle}))},es:function(S){return this.addDefaultNamespaces(S),this.addProperty(new this.mappingStyle.elementsPropertyInfo(S,{mappingStyle:this.mappingStyle}))},er:function(S){return this.addDefaultNamespaces(S),this.addProperty(new this.mappingStyle.elementRefPropertyInfo(S,{mappingStyle:this.mappingStyle}))},ers:function(S){return this.addDefaultNamespaces(S),this.addProperty(new this.mappingStyle.elementRefsPropertyInfo(S,{mappingStyle:this.mappingStyle}))},v:function(S){return this.addDefaultNamespaces(S),this.addProperty(new this.mappingStyle.valuePropertyInfo(S,{mappingStyle:this.mappingStyle}))},addDefaultNamespaces:function(S){T.Util.Type.isObject(S)&&(T.Util.Type.isString(S.defaultElementNamespaceURI)||(S.defaultElementNamespaceURI=this.defaultElementNamespaceURI),T.Util.Type.isString(S.defaultAttributeNamespaceURI)||(S.defaultAttributeNamespaceURI=this.defaultAttributeNamespaceURI))},addProperty:function(S){return this.properties.push(S),this.propertiesMap[S.name]=S,this},CLASS_NAME:"Jsonix.Model.ClassInfo"}),T.Model.ClassInfo.prototype.propertyInfoCreators={aa:T.Model.ClassInfo.prototype.aa,anyAttribute:T.Model.ClassInfo.prototype.aa,ae:T.Model.ClassInfo.prototype.ae,anyElement:T.Model.ClassInfo.prototype.ae,a:T.Model.ClassInfo.prototype.a,attribute:T.Model.ClassInfo.prototype.a,em:T.Model.ClassInfo.prototype.em,elementMap:T.Model.ClassInfo.prototype.em,e:T.Model.ClassInfo.prototype.e,element:T.Model.ClassInfo.prototype.e,es:T.Model.ClassInfo.prototype.es,elements:T.Model.ClassInfo.prototype.es,er:T.Model.ClassInfo.prototype.er,elementRef:T.Model.ClassInfo.prototype.er,ers:T.Model.ClassInfo.prototype.ers,elementRefs:T.Model.ClassInfo.prototype.ers,v:T.Model.ClassInfo.prototype.v,value:T.Model.ClassInfo.prototype.v},T.Model.EnumLeafInfo=T.Class(T.Model.TypeInfo,{name:null,baseTypeInfo:"String",entries:null,keys:null,values:null,built:!1,initialize:function(S){T.Model.TypeInfo.prototype.initialize.apply(this,[]),T.Util.Ensure.ensureObject(S);var D=S.name||S.n||void 0;T.Util.Ensure.ensureString(D),this.name=D,this.baseTypeInfo=S.baseTypeInfo||S.bti||"String";var z=S.values||S.vs||void 0;if(T.Util.Ensure.ensureExists(z),!T.Util.Type.isObject(z)&&!T.Util.Type.isArray(z))throw new Error("Enum values must be either an array or an object.");this.entries=z},build:function(S){if(!this.built){this.baseTypeInfo=S.resolveTypeInfo(this.baseTypeInfo,this.module),this.baseTypeInfo.build(S);var re,J,D=this.entries,L={},z=[],X=[],Y=0;if(T.Util.Type.isArray(D))for(Y=0;Y<D.length;Y++){if(T.Util.Type.isString(J=D[Y])){if(re=J,!T.Util.Type.isFunction(this.baseTypeInfo.parse))throw new Error("Enum value is provided as string but the base type ["+this.baseTypeInfo.name+"] of the enum info ["+this.name+"] does not implement the parse method.");J=this.baseTypeInfo.parse(J,S,null,this)}else{if(!this.baseTypeInfo.isInstance(J,S,this))throw new Error("Enum value ["+J+"] is not an instance of the enum base type ["+this.baseTypeInfo.name+"].");if(!T.Util.Type.isFunction(this.baseTypeInfo.print))throw new Error("The base type ["+this.baseTypeInfo.name+"] of the enum info ["+this.name+"] does not implement the print method, unable to produce the enum key as string.");re=this.baseTypeInfo.print(J,S,null,this)}L[re]=J,z[Y]=re,X[Y]=J}else{if(!T.Util.Type.isObject(D))throw new Error("Enum values must be either an array or an object.");for(re in D)if(D.hasOwnProperty(re)){if(T.Util.Type.isString(J=D[re])){if(!T.Util.Type.isFunction(this.baseTypeInfo.parse))throw new Error("Enum value is provided as string but the base type ["+this.baseTypeInfo.name+"] of the enum info ["+this.name+"] does not implement the parse method.");J=this.baseTypeInfo.parse(J,S,null,this)}else if(!this.baseTypeInfo.isInstance(J,S,this))throw new Error("Enum value ["+J+"] is not an instance of the enum base type ["+this.baseTypeInfo.name+"].");L[re]=J,z[Y]=re,X[Y]=J,Y++}}this.entries=L,this.keys=z,this.values=X,this.built=!0}},unmarshal:function(S,D,L){var z=D.getElementText();return this.parse(z,S,D,L)},marshal:function(S,D,L,z){T.Util.Type.exists(S)&&L.writeCharacters(this.reprint(S,D,L,z))},reprint:function(S,D,L,z){return T.Util.Type.isString(S)&&!this.isInstance(S,D,z)?this.print(this.parse(S,D,null,z),D,L,z):this.print(S,D,L,z)},print:function(S,D,L,z){for(var X=0;X<this.values.length;X++)if(this.values[X]===S)return this.keys[X];throw new Error("Value ["+S+"] is invalid for the enum type ["+this.name+"].")},parse:function(S,D,L,z){if(T.Util.Ensure.ensureString(S),this.entries.hasOwnProperty(S))return this.entries[S];throw new Error("Value ["+S+"] is invalid for the enum type ["+this.name+"].")},isInstance:function(S,D,L){for(var z=0;z<this.values.length;z++)if(this.values[z]===S)return!0;return!1},CLASS_NAME:"Jsonix.Model.EnumLeafInfo"}),T.Model.ElementInfo=T.Class({module:null,elementName:null,typeInfo:null,substitutionHead:null,scope:null,built:!1,initialize:function(S){T.Util.Ensure.ensureObject(S),this.defaultElementNamespaceURI=S.defaultElementNamespaceURI||S.dens||"";var L=S.elementName||S.en||void 0;T.Util.Type.isObject(L)?this.elementName=T.XML.QName.fromObject(L):(T.Util.Ensure.ensureString(L),this.elementName=new T.XML.QName(this.defaultElementNamespaceURI,L)),this.typeInfo=S.typeInfo||S.ti||"String",this.substitutionHead=S.substitutionHead||S.sh||null,this.scope=S.scope||S.sc||null},build:function(S){this.built||(this.typeInfo=S.resolveTypeInfo(this.typeInfo,this.module),this.scope=S.resolveTypeInfo(this.scope,this.module),this.built=!0)},CLASS_NAME:"Jsonix.Model.ElementInfo"}),T.Model.PropertyInfo=T.Class({name:null,collection:!1,targetNamespace:"",defaultElementNamespaceURI:"",defaultAttributeNamespaceURI:"",built:!1,initialize:function(S){T.Util.Ensure.ensureObject(S);var J,ie,D=S.name||S.n||void 0;T.Util.Ensure.ensureString(D),this.name=D,this.defaultElementNamespaceURI=S.defaultElementNamespaceURI||S.dens||S.targetNamespace||S.tns||"",this.targetNamespace=S.targetNamespace||S.tns||S.defaultElementNamespaceURI||S.dens||this.defaultElementNamespaceURI,this.defaultAttributeNamespaceURI=S.defaultAttributeNamespaceURI||S.dans||"",this.collection=S.collection||S.col||!1,this.required=S.required||S.rq||!1,this.collection&&(J=T.Util.Type.isNumber(S.minOccurs)?S.minOccurs:T.Util.Type.isNumber(S.mno)?S.mno:1,this.minOccurs=J,ie=T.Util.Type.isNumber(S.maxOccurs)?S.maxOccurs:T.Util.Type.isNumber(S.mxo)?S.mxo:null,this.maxOccurs=ie)},build:function(S,D){this.built||(this.doBuild(S,D),this.built=!0)},doBuild:function(S,D){throw new Error("Abstract method [doBuild].")},buildStructure:function(S,D){throw new Error("Abstract method [buildStructure].")},setProperty:function(S,D){if(T.Util.Type.exists(D))if(this.collection){T.Util.Ensure.ensureArray(D,"Collection property requires an array value."),T.Util.Type.exists(S[this.name])||(S[this.name]=[]);for(var L=0;L<D.length;L++)S[this.name].push(D[L])}else S[this.name]=D},CLASS_NAME:"Jsonix.Model.PropertyInfo"}),T.Model.AnyAttributePropertyInfo=T.Class(T.Model.PropertyInfo,{initialize:function(S){T.Util.Ensure.ensureObject(S),T.Model.PropertyInfo.prototype.initialize.apply(this,[S])},unmarshal:function(S,D,L){var z=D.getAttributeCount();if(0===z)return null;for(var X={},Y=0;Y<z;Y++){var re=D.getAttributeValue(Y);T.Util.Type.isString(re)&&(X[this.convertFromAttributeName(D.getAttributeName(Y),S,D,L)]=re)}return X},marshal:function(S,D,L,z){if(T.Util.Type.isObject(S))for(var X in S)if(S.hasOwnProperty(X)){var Y=S[X];if(T.Util.Type.isString(Y)){var re=this.convertToAttributeName(X,D,L,z);L.writeAttribute(re,Y)}}},convertFromAttributeName:function(S,D,L,z){return S.key},convertToAttributeName:function(S,D,L,z){return T.XML.QName.fromObjectOrString(S,D)},doBuild:function(S,D){},buildStructure:function(S,D){T.Util.Ensure.ensureObject(D),D.anyAttribute=this},CLASS_NAME:"Jsonix.Model.AnyAttributePropertyInfo"}),T.Model.AnyAttributePropertyInfo.Simplified=T.Class(T.Model.AnyAttributePropertyInfo,{convertFromAttributeName:function(S,D,L,z){return S.toCanonicalString(D)}}),T.Model.SingleTypePropertyInfo=T.Class(T.Model.PropertyInfo,{typeInfo:"String",initialize:function(S){T.Util.Ensure.ensureObject(S),T.Model.PropertyInfo.prototype.initialize.apply(this,[S]),this.typeInfo=S.typeInfo||S.ti||"String"},doBuild:function(S,D){this.typeInfo=S.resolveTypeInfo(this.typeInfo,D)},unmarshalValue:function(S,D,L,z){return this.parse(S,D,L,z)},parse:function(S,D,L,z){return this.typeInfo.parse(S,D,L,z)},print:function(S,D,L,z){return this.typeInfo.reprint(S,D,L,z)},CLASS_NAME:"Jsonix.Model.SingleTypePropertyInfo"}),T.Model.AttributePropertyInfo=T.Class(T.Model.SingleTypePropertyInfo,{attributeName:null,initialize:function(S){T.Util.Ensure.ensureObject(S),T.Model.SingleTypePropertyInfo.prototype.initialize.apply(this,[S]);var D=S.attributeName||S.an||void 0;this.attributeName=T.Util.Type.isObject(D)?T.XML.QName.fromObject(D):T.Util.Type.isString(D)?new T.XML.QName(this.defaultAttributeNamespaceURI,D):new T.XML.QName(this.defaultAttributeNamespaceURI,this.name)},unmarshal:function(S,D,L){for(var z=D.getAttributeCount(),X=null,Y=0;Y<z;Y++){var re=D.getAttributeNameKey(Y);if(this.attributeName.key===re){var J=D.getAttributeValue(Y);T.Util.Type.isString(J)&&(X=this.unmarshalValue(J,S,D,L))}}return X},marshal:function(S,D,L,z){T.Util.Type.exists(S)&&L.writeAttribute(this.attributeName,this.print(S,D,L,z))},buildStructure:function(S,D){T.Util.Ensure.ensureObject(D),T.Util.Ensure.ensureObject(D.attributes),D.attributes[this.attributeName.key]=this},CLASS_NAME:"Jsonix.Model.AttributePropertyInfo"}),T.Model.ValuePropertyInfo=T.Class(T.Model.SingleTypePropertyInfo,{initialize:function(S){T.Util.Ensure.ensureObject(S),T.Model.SingleTypePropertyInfo.prototype.initialize.apply(this,[S]),this.asCDATA=S.asCDATA||S.cdata||!1},unmarshal:function(S,D,L){var z=D.getElementText();return this.unmarshalValue(z,S,D,L)},marshal:function(S,D,L,z){!T.Util.Type.exists(S)||(this.asCDATA?L.writeCdata(this.print(S,D,L,z)):L.writeCharacters(this.print(S,D,L,z)))},buildStructure:function(S,D){if(T.Util.Ensure.ensureObject(D),T.Util.Type.exists(D.elements))throw new Error("The structure already defines element mappings, it cannot define a value property.");D.value=this},CLASS_NAME:"Jsonix.Model.ValuePropertyInfo"}),T.Model.AbstractElementsPropertyInfo=T.Class(T.Binding.Unmarshalls.Element,T.Binding.Unmarshalls.WrapperElement,T.Model.PropertyInfo,{wrapperElementName:null,allowDom:!1,allowTypedObject:!0,mixed:!1,initialize:function(S){T.Util.Ensure.ensureObject(S),T.Model.PropertyInfo.prototype.initialize.apply(this,[S]);var D=S.wrapperElementName||S.wen||void 0;this.wrapperElementName=T.Util.Type.isObject(D)?T.XML.QName.fromObject(D):T.Util.Type.isString(D)?new T.XML.QName(this.defaultElementNamespaceURI,D):null},unmarshal:function(S,D,L){var z=null,X=this,Y=function(re){if(X.collection)null===z&&(z=[]),z.push(re);else{if(null!==z)throw new Error("Value already set.");z=re}};return T.Util.Type.exists(this.wrapperElementName)?this.unmarshalWrapperElement(S,D,L,Y):this.unmarshalElement(S,D,L,Y),z},marshal:function(S,D,L,z){if(T.Util.Type.exists(S)){if(T.Util.Type.exists(this.wrapperElementName)&&L.writeStartElement(this.wrapperElementName),this.collection){T.Util.Ensure.ensureArray(S);for(var X=0;X<S.length;X++)this.marshalElement(S[X],D,L,z)}else this.marshalElement(S,D,L,z);T.Util.Type.exists(this.wrapperElementName)&&L.writeEndElement()}},convertFromTypedNamedValue:function(S,D,L,z){return S.value},buildStructure:function(S,D){if(T.Util.Ensure.ensureObject(D),T.Util.Type.exists(D.value))throw new Error("The structure already defines a value property.");T.Util.Type.exists(D.elements)||(D.elements={}),T.Util.Type.exists(this.wrapperElementName)?D.elements[this.wrapperElementName.key]=this:this.buildStructureElements(S,D)},buildStructureElements:function(S,D){throw new Error("Abstract method [buildStructureElements].")},CLASS_NAME:"Jsonix.Model.AbstractElementsPropertyInfo"}),T.Model.ElementPropertyInfo=T.Class(T.Model.AbstractElementsPropertyInfo,T.Binding.Marshalls.Element,{typeInfo:"String",elementName:null,initialize:function(S){T.Util.Ensure.ensureObject(S),T.Model.AbstractElementsPropertyInfo.prototype.initialize.apply(this,[S]);var D=S.typeInfo||S.ti||"String";T.Util.Type.isObject(D)||T.Util.Ensure.ensureString(D),this.typeInfo=D;var L=S.elementName||S.en||void 0;this.elementName=T.Util.Type.isObject(L)?T.XML.QName.fromObject(L):T.Util.Type.isString(L)?new T.XML.QName(this.defaultElementNamespaceURI,L):new T.XML.QName(this.defaultElementNamespaceURI,this.name)},getTypeInfoByElementName:function(S,D,L){return this.typeInfo},convertToTypedNamedValue:function(S,D,L,z){return{name:this.elementName,value:S,typeInfo:this.typeInfo}},doBuild:function(S,D){this.typeInfo=S.resolveTypeInfo(this.typeInfo,D)},buildStructureElements:function(S,D){D.elements[this.elementName.key]=this},CLASS_NAME:"Jsonix.Model.ElementPropertyInfo"}),T.Model.ElementsPropertyInfo=T.Class(T.Model.AbstractElementsPropertyInfo,T.Binding.Marshalls.Element,{elementTypeInfos:null,elementTypeInfosMap:null,initialize:function(S){T.Util.Ensure.ensureObject(S),T.Model.AbstractElementsPropertyInfo.prototype.initialize.apply(this,[S]);var D=S.elementTypeInfos||S.etis||[];T.Util.Ensure.ensureArray(D),this.elementTypeInfos=[];for(var L=0;L<D.length;L++)this.elementTypeInfos[L]=T.Util.Type.cloneObject(D[L])},getTypeInfoByElementName:function(S,D,L){return this.elementTypeInfosMap[S.key]},convertToTypedNamedValue:function(S,D,L,z){for(var X=0;X<this.elementTypeInfos.length;X++){var Y=this.elementTypeInfos[X],re=Y.typeInfo;if(re.isInstance(S,D,z))return{name:Y.elementName,value:S,typeInfo:re}}if(D.supportXsiType){var ie=D.getTypeInfoByValue(S);if(ie&&ie.typeName)for(var Se=0;Se<this.elementTypeInfos.length;Se++){var je=this.elementTypeInfos[Se],Je=je.typeInfo;if(ie.isBasedOn(Je))return{name:je.elementName,value:S,typeInfo:Je}}}throw new Error("Could not find an element with type info supporting the value ["+S+"].")},doBuild:function(S,D){this.elementTypeInfosMap={};for(var X=0;X<this.elementTypeInfos.length;X++){var Y=this.elementTypeInfos[X];T.Util.Ensure.ensureObject(Y),Y.typeInfo=S.resolveTypeInfo(Y.typeInfo||Y.ti||"String",D),Y.elementName=T.XML.QName.fromObjectOrString(Y.elementName||Y.en||void 0,S,this.defaultElementNamespaceURI),this.elementTypeInfosMap[Y.elementName.key]=Y.typeInfo}},buildStructureElements:function(S,D){for(var L=0;L<this.elementTypeInfos.length;L++)D.elements[this.elementTypeInfos[L].elementName.key]=this},CLASS_NAME:"Jsonix.Model.ElementsPropertyInfo"}),T.Model.ElementMapPropertyInfo=T.Class(T.Model.AbstractElementsPropertyInfo,{elementName:null,key:null,value:null,entryTypeInfo:null,initialize:function(S){T.Util.Ensure.ensureObject(S),T.Model.AbstractElementsPropertyInfo.prototype.initialize.apply(this,[S]);var D=S.key||S.k||void 0;T.Util.Ensure.ensureObject(D);var L=S.value||S.v||void 0;T.Util.Ensure.ensureObject(L);var z=S.elementName||S.en||void 0;this.elementName=T.Util.Type.isObject(z)?T.XML.QName.fromObject(z):T.Util.Type.isString(z)?new T.XML.QName(this.defaultElementNamespaceURI,z):new T.XML.QName(this.defaultElementNamespaceURI,this.name),this.entryTypeInfo=new T.Model.ClassInfo({name:"Map<"+D.name+","+L.name+">",propertyInfos:[D,L]})},unmarshal:function(S,D,L){var z=null,X=this,Y=function(re){if(T.Util.Type.exists(re))for(var J in T.Util.Ensure.ensureObject(re,"Map property requires an object."),T.Util.Type.exists(z)||(z={}),re)if(re.hasOwnProperty(J)){var ie=re[J];if(X.collection)T.Util.Type.exists(z[J])||(z[J]=[]),z[J].push(ie);else{if(T.Util.Type.exists(z[J]))throw new Error("Value was already set.");z[J]=ie}}};return T.Util.Type.exists(this.wrapperElementName)?this.unmarshalWrapperElement(S,D,L,Y):this.unmarshalElement(S,D,L,Y),z},getTypeInfoByInputElement:function(S,D,L){return this.entryTypeInfo},convertFromTypedNamedValue:function(S,D,L,z){var X=S.value,Y={};return T.Util.Type.isString(X[this.key.name])&&(Y[X[this.key.name]]=X[this.value.name]),Y},marshal:function(S,D,L,z){!T.Util.Type.exists(S)||(T.Util.Type.exists(this.wrapperElementName)&&L.writeStartElement(this.wrapperElementName),this.marshalElement(S,D,L,z),T.Util.Type.exists(this.wrapperElementName)&&L.writeEndElement())},marshalElement:function(S,D,L,z){if(S)for(var X in S)if(S.hasOwnProperty(X)){var Y=S[X];if(this.collection)for(var J=0;J<Y.length;J++){var ie={};ie[this.key.name]=X,ie[this.value.name]=Y[J],L.writeStartElement(this.elementName),this.entryTypeInfo.marshal(ie,D,L,z),L.writeEndElement()}else{var re={};re[this.key.name]=X,re[this.value.name]=Y,L.writeStartElement(this.elementName),this.entryTypeInfo.marshal(re,D,L,z),L.writeEndElement()}}},doBuild:function(S,D){this.entryTypeInfo.build(S,D),this.key=this.entryTypeInfo.properties[0],this.value=this.entryTypeInfo.properties[1]},buildStructureElements:function(S,D){D.elements[this.elementName.key]=this},setProperty:function(S,D){if(T.Util.Type.exists(D)){T.Util.Ensure.ensureObject(D,"Map property requires an object."),T.Util.Type.exists(S[this.name])||(S[this.name]={});var L=S[this.name];for(var z in D)if(D.hasOwnProperty(z)){var X=D[z];if(this.collection){T.Util.Type.exists(L[z])||(L[z]=[]);for(var Y=0;Y<X.length;Y++)L[z].push(X[Y])}else L[z]=X}}},CLASS_NAME:"Jsonix.Model.ElementMapPropertyInfo"}),T.Model.AbstractElementRefsPropertyInfo=T.Class(T.Binding.Marshalls.Element,T.Binding.Marshalls.Element.AsElementRef,T.Binding.Unmarshalls.Element,T.Binding.Unmarshalls.WrapperElement,T.Binding.Unmarshalls.Element.AsElementRef,T.Model.PropertyInfo,{wrapperElementName:null,allowDom:!0,allowTypedObject:!0,mixed:!0,initialize:function(S){T.Util.Ensure.ensureObject(S,"Mapping must be an object."),T.Model.PropertyInfo.prototype.initialize.apply(this,[S]);var D=S.wrapperElementName||S.wen||void 0;this.wrapperElementName=T.Util.Type.isObject(D)?T.XML.QName.fromObject(D):T.Util.Type.isString(D)?new T.XML.QName(this.defaultElementNamespaceURI,D):null;var L=T.Util.Type.defaultValue(S.allowDom,S.dom,!0),z=T.Util.Type.defaultValue(S.allowTypedObject,S.typed,!0),X=T.Util.Type.defaultValue(S.mixed,S.mx,!0);this.allowDom=L,this.allowTypedObject=z,this.mixed=X},unmarshal:function(S,D,L){var z=null,X=this,Y=function(J){if(X.collection)null===z&&(z=[]),z.push(J);else{if(null!==z)throw new Error("Value already set.");z=J}},re=D.eventType;if(re===T.XML.Input.START_ELEMENT)T.Util.Type.exists(this.wrapperElementName)?this.unmarshalWrapperElement(S,D,L,Y):this.unmarshalElement(S,D,L,Y);else if(!this.mixed||re!==T.XML.Input.CHARACTERS&&re!==T.XML.Input.CDATA&&re!==T.XML.Input.ENTITY_REFERENCE){if(re!==T.XML.Input.SPACE&&re!==T.XML.Input.COMMENT&&re!==T.XML.Input.PROCESSING_INSTRUCTION)throw new Error("Illegal state: unexpected event type ["+re+"].")}else Y(D.getText());return z},marshal:function(S,D,L,z){if(T.Util.Type.exists(S)){if(T.Util.Type.exists(this.wrapperElementName)&&L.writeStartElement(this.wrapperElementName),this.collection){T.Util.Ensure.ensureArray(S,"Collection property requires an array value.");for(var X=0;X<S.length;X++)this.marshalItem(S[X],D,L,z)}else this.marshalItem(S,D,L,z);T.Util.Type.exists(this.wrapperElementName)&&L.writeEndElement()}},marshalItem:function(S,D,L,z){if(T.Util.Type.isString(S)){if(!this.mixed)throw new Error("Property is not mixed, can't handle string values.");L.writeCharacters(S)}else if(this.allowDom&&T.Util.Type.exists(S.nodeType))L.writeNode(S);else{if(!T.Util.Type.isObject(S))throw this.mixed?new Error("Unsupported content type, either objects or strings are supported."):new Error("Unsupported content type, only objects are supported.");this.marshalElement(S,D,L,z)}},getTypeInfoByElementName:function(S,D,L){var z=this.getPropertyElementTypeInfo(S,D);if(T.Util.Type.exists(z))return z.typeInfo;var X=D.getElementInfo(S,L);return T.Util.Type.exists(X)?X.typeInfo:void 0},getPropertyElementTypeInfo:function(S,D){throw new Error("Abstract method [getPropertyElementTypeInfo].")},buildStructure:function(S,D){if(T.Util.Ensure.ensureObject(D),T.Util.Type.exists(D.value))throw new Error("The structure already defines a value property.");T.Util.Type.exists(D.elements)||(D.elements={}),T.Util.Type.exists(this.wrapperElementName)?D.elements[this.wrapperElementName.key]=this:this.buildStructureElements(S,D),(this.allowDom||this.allowTypedObject)&&(D.any=this),this.mixed&&!T.Util.Type.exists(this.wrapperElementName)&&(D.mixed=this)},buildStructureElements:function(S,D){throw new Error("Abstract method [buildStructureElements].")},buildStructureElementTypeInfos:function(S,D,L){D.elements[L.elementName.key]=this;var z=S.getSubstitutionMembers(L.elementName);if(T.Util.Type.isArray(z))for(var X=0;X<z.length;X++)this.buildStructureElementTypeInfos(S,D,z[X])},CLASS_NAME:"Jsonix.Model.AbstractElementRefsPropertyInfo"}),T.Model.ElementRefPropertyInfo=T.Class(T.Model.AbstractElementRefsPropertyInfo,{typeInfo:"String",elementName:null,initialize:function(S){T.Util.Ensure.ensureObject(S),T.Model.AbstractElementRefsPropertyInfo.prototype.initialize.apply(this,[S]);var D=S.typeInfo||S.ti||"String";T.Util.Type.isObject(D)||T.Util.Ensure.ensureString(D),this.typeInfo=D;var L=S.elementName||S.en||void 0;this.elementName=T.Util.Type.isObject(L)?T.XML.QName.fromObject(L):T.Util.Type.isString(L)?new T.XML.QName(this.defaultElementNamespaceURI,L):new T.XML.QName(this.defaultElementNamespaceURI,this.name)},getPropertyElementTypeInfo:function(S,D){return T.XML.QName.fromObjectOrString(S,D).key===this.elementName.key?this:null},doBuild:function(S,D){this.typeInfo=S.resolveTypeInfo(this.typeInfo,D)},buildStructureElements:function(S,D){this.buildStructureElementTypeInfos(S,D,this)},CLASS_NAME:"Jsonix.Model.ElementRefPropertyInfo"}),T.Model.ElementRefPropertyInfo.Simplified=T.Class(T.Model.ElementRefPropertyInfo,T.Binding.Unmarshalls.Element.AsSimplifiedElementRef,{CLASS_NAME:"Jsonix.Model.ElementRefPropertyInfo.Simplified"}),T.Model.ElementRefsPropertyInfo=T.Class(T.Model.AbstractElementRefsPropertyInfo,{elementTypeInfos:null,elementTypeInfosMap:null,initialize:function(S){T.Util.Ensure.ensureObject(S),T.Model.AbstractElementRefsPropertyInfo.prototype.initialize.apply(this,[S]);var D=S.elementTypeInfos||S.etis||[];T.Util.Ensure.ensureArray(D),this.elementTypeInfos=[];for(var L=0;L<D.length;L++)this.elementTypeInfos[L]=T.Util.Type.cloneObject(D[L])},getPropertyElementTypeInfo:function(S,D){var L=T.XML.QName.fromObjectOrString(S,D),z=this.elementTypeInfosMap[L.key];return T.Util.Type.exists(z)?{elementName:L,typeInfo:z}:null},doBuild:function(S,D){this.elementTypeInfosMap={};for(var X=0;X<this.elementTypeInfos.length;X++){var Y=this.elementTypeInfos[X];T.Util.Ensure.ensureObject(Y),Y.typeInfo=S.resolveTypeInfo(Y.typeInfo||Y.ti||"String",D),Y.elementName=T.XML.QName.fromObjectOrString(Y.elementName||Y.en||void 0,S,this.defaultElementNamespaceURI),this.elementTypeInfosMap[Y.elementName.key]=Y.typeInfo}},buildStructureElements:function(S,D){for(var L=0;L<this.elementTypeInfos.length;L++)this.buildStructureElementTypeInfos(S,D,this.elementTypeInfos[L])},CLASS_NAME:"Jsonix.Model.ElementRefsPropertyInfo"}),T.Model.ElementRefsPropertyInfo.Simplified=T.Class(T.Model.ElementRefsPropertyInfo,T.Binding.Unmarshalls.Element.AsSimplifiedElementRef,{CLASS_NAME:"Jsonix.Model.ElementRefsPropertyInfo.Simplified"}),T.Model.AnyElementPropertyInfo=T.Class(T.Binding.Marshalls.Element,T.Binding.Marshalls.Element.AsElementRef,T.Binding.Unmarshalls.Element,T.Binding.Unmarshalls.Element.AsElementRef,T.Model.PropertyInfo,{allowDom:!0,allowTypedObject:!0,mixed:!0,initialize:function(S){T.Util.Ensure.ensureObject(S),T.Model.PropertyInfo.prototype.initialize.apply(this,[S]);var D=T.Util.Type.defaultValue(S.allowDom,S.dom,!0),L=T.Util.Type.defaultValue(S.allowTypedObject,S.typed,!0),z=T.Util.Type.defaultValue(S.mixed,S.mx,!0);this.allowDom=D,this.allowTypedObject=L,this.mixed=z},unmarshal:function(S,D,L){var z=null,X=this,Y=function(J){if(X.collection)null===z&&(z=[]),z.push(J);else{if(null!==z)throw new Error("Value already set.");z=J}},re=D.eventType;if(re===T.XML.Input.START_ELEMENT)this.unmarshalElement(S,D,L,Y);else if(!this.mixed||re!==T.XML.Input.CHARACTERS&&re!==T.XML.Input.CDATA&&re!==T.XML.Input.ENTITY_REFERENCE){if((!this.mixed||re!==T.XML.Input.SPACE)&&re!==T.XML.Input.COMMENT&&re!==T.XML.Input.PROCESSING_INSTRUCTION)throw new Error("Illegal state: unexpected event type ["+re+"].")}else Y(D.getText());return z},marshal:function(S,D,L,z){if(T.Util.Type.exists(S))if(this.collection){T.Util.Ensure.ensureArray(S);for(var X=0;X<S.length;X++)this.marshalItem(S[X],D,L,z)}else this.marshalItem(S,D,L,z)},marshalItem:function(S,D,L,z){this.mixed&&T.Util.Type.isString(S)?L.writeCharacters(S):this.allowDom&&T.Util.Type.exists(S.nodeType)?L.writeNode(S):this.allowTypedObject&&this.marshalElement(S,D,L,z)},doBuild:function(S,D){},buildStructure:function(S,D){if(T.Util.Ensure.ensureObject(D),T.Util.Type.exists(D.value))throw new Error("The structure already defines a value property.");T.Util.Type.exists(D.elements)||(D.elements={}),(this.allowDom||this.allowTypedObject)&&(D.any=this),this.mixed&&(D.mixed=this)},CLASS_NAME:"Jsonix.Model.AnyElementPropertyInfo"}),T.Model.AnyElementPropertyInfo.Simplified=T.Class(T.Model.AnyElementPropertyInfo,T.Binding.Unmarshalls.Element.AsSimplifiedElementRef,{CLASS_NAME:"Jsonix.Model.AnyElementPropertyInfo.Simplified"}),T.Model.Module=T.Class(T.Mapping.Styled,{name:null,typeInfos:null,elementInfos:null,targetNamespace:"",defaultElementNamespaceURI:"",defaultAttributeNamespaceURI:"",initialize:function(S,D){if(T.Mapping.Styled.prototype.initialize.apply(this,[D]),this.typeInfos=[],this.elementInfos=[],void 0!==S){T.Util.Ensure.ensureObject(S),this.name=S.name||S.n||null,this.defaultElementNamespaceURI=S.defaultElementNamespaceURI||S.dens||S.targetNamespace||S.tns||"",this.targetNamespace=S.targetNamespace||S.tns||S.defaultElementNamespaceURI||S.dens||this.defaultElementNamespaceURI,this.defaultAttributeNamespaceURI=S.defaultAttributeNamespaceURI||S.dans||"";var re=S.typeInfos||S.tis||[];for(var J in this.initializeTypeInfos(re),S)S.hasOwnProperty(J)&&S[J]instanceof this.mappingStyle.classInfo&&this.typeInfos.push(S[J]);this.initializeElementInfos(S.elementInfos||S.eis||[])}},initializeTypeInfos:function(S){var D,z;for(T.Util.Ensure.ensureArray(S),D=0;D<S.length;D++)z=this.createTypeInfo(S[D]),this.typeInfos.push(z)},initializeElementInfos:function(S){var D,z;for(T.Util.Ensure.ensureArray(S),D=0;D<S.length;D++)z=this.createElementInfo(S[D]),this.elementInfos.push(z)},createTypeInfo:function(S){var D;if(T.Util.Ensure.ensureObject(S),S instanceof T.Model.TypeInfo)D=S;else{var L=(S=T.Util.Type.cloneObject(S)).type||S.t||"classInfo";if(!T.Util.Type.isFunction(this.typeInfoCreators[L]))throw new Error("Unknown type info type ["+L+"].");D=this.typeInfoCreators[L].call(this,S)}return D},initializeNames:function(S){var D=S.localName||S.ln||null;if(S.localName=D,S.name=S.name||S.n||null,T.Util.Type.isString(S.name))S.name.length>0&&"."===S.name.charAt(0)&&T.Util.Type.isString(this.name)&&(S.name=this.name+S.name);else{if(!T.Util.Type.isString(D))throw new Error("Neither [name/n] nor [localName/ln] was provided for the class info.");S.name=T.Util.Type.isString(this.name)?this.name+"."+D:D}},createClassInfo:function(S){T.Util.Ensure.ensureObject(S),S.defaultElementNamespaceURI=S.defaultElementNamespaceURI||S.dens||this.defaultElementNamespaceURI,S.targetNamespace=S.targetNamespace||S.tns||this.targetNamespace,S.defaultAttributeNamespaceURI=S.defaultAttributeNamespaceURI||S.dans||this.defaultAttributeNamespaceURI,this.initializeNames(S);var X=new this.mappingStyle.classInfo(S,{mappingStyle:this.mappingStyle});return X.module=this,X},createEnumLeafInfo:function(S){T.Util.Ensure.ensureObject(S),this.initializeNames(S);var D=new this.mappingStyle.enumLeafInfo(S,{mappingStyle:this.mappingStyle});return D.module=this,D},createList:function(S){T.Util.Ensure.ensureObject(S);var D=S.baseTypeInfo||S.typeInfo||S.bti||S.ti||"String",L=S.typeName||S.tn||null;T.Util.Type.exists(L)&&(L=T.Util.Type.isString(L)?new T.XML.QName(this.targetNamespace,L):T.XML.QName.fromObject(L));var z=S.separator||S.sep||" ";T.Util.Ensure.ensureExists(D);var X=new T.Schema.XSD.List(D,L,z);return X.module=this,X},createElementInfo:function(S){T.Util.Ensure.ensureObject(S),(S=T.Util.Type.cloneObject(S)).defaultElementNamespaceURI=S.defaultElementNamespaceURI||S.dens||this.defaultElementNamespaceURI;var L=S.elementName||S.en||void 0;T.Util.Ensure.ensureExists(L);var z=S.typeInfo||S.ti||"String";if(T.Util.Ensure.ensureExists(z),S.typeInfo=z,T.Util.Type.isObject(L))S.elementName=T.XML.QName.fromObject(L);else{if(!T.Util.Type.isString(L))throw new Error("Element info ["+S+"] must provide an element name.");S.elementName=new T.XML.QName(this.defaultElementNamespaceURI,L)}var X=S.substitutionHead||S.sh||null;T.Util.Type.exists(X)&&(T.Util.Type.isObject(X)?S.substitutionHead=T.XML.QName.fromObject(X):(T.Util.Ensure.ensureString(X),S.substitutionHead=new T.XML.QName(this.defaultElementNamespaceURI,X)));var Y=new this.mappingStyle.elementInfo(S,{mappingStyle:this.mappingStyle});return Y.module=this,Y},registerTypeInfos:function(S){for(var D=0;D<this.typeInfos.length;D++)S.registerTypeInfo(this.typeInfos[D],this)},buildTypeInfos:function(S){for(var D=0;D<this.typeInfos.length;D++)this.typeInfos[D].build(S,this)},registerElementInfos:function(S){for(var D=0;D<this.elementInfos.length;D++)S.registerElementInfo(this.elementInfos[D],this)},buildElementInfos:function(S){for(var D=0;D<this.elementInfos.length;D++)this.elementInfos[D].build(S,this)},cs:function(){return this},es:function(){return this},CLASS_NAME:"Jsonix.Model.Module"}),T.Model.Module.prototype.typeInfoCreators={classInfo:T.Model.Module.prototype.createClassInfo,c:T.Model.Module.prototype.createClassInfo,enumInfo:T.Model.Module.prototype.createEnumLeafInfo,enum:T.Model.Module.prototype.createEnumLeafInfo,list:T.Model.Module.prototype.createList,l:T.Model.Module.prototype.createList},T.Mapping.Style.Standard=T.Class(T.Mapping.Style,{marshaller:T.Binding.Marshaller,unmarshaller:T.Binding.Unmarshaller,module:T.Model.Module,elementInfo:T.Model.ElementInfo,classInfo:T.Model.ClassInfo,enumLeafInfo:T.Model.EnumLeafInfo,anyAttributePropertyInfo:T.Model.AnyAttributePropertyInfo,anyElementPropertyInfo:T.Model.AnyElementPropertyInfo,attributePropertyInfo:T.Model.AttributePropertyInfo,elementMapPropertyInfo:T.Model.ElementMapPropertyInfo,elementPropertyInfo:T.Model.ElementPropertyInfo,elementsPropertyInfo:T.Model.ElementsPropertyInfo,elementRefPropertyInfo:T.Model.ElementRefPropertyInfo,elementRefsPropertyInfo:T.Model.ElementRefsPropertyInfo,valuePropertyInfo:T.Model.ValuePropertyInfo,initialize:function(){T.Mapping.Style.prototype.initialize.apply(this)},CLASS_NAME:"Jsonix.Mapping.Style.Standard"}),T.Mapping.Style.STYLES.standard=new T.Mapping.Style.Standard,T.Mapping.Style.Simplified=T.Class(T.Mapping.Style,{marshaller:T.Binding.Marshaller.Simplified,unmarshaller:T.Binding.Unmarshaller.Simplified,module:T.Model.Module,elementInfo:T.Model.ElementInfo,classInfo:T.Model.ClassInfo,enumLeafInfo:T.Model.EnumLeafInfo,anyAttributePropertyInfo:T.Model.AnyAttributePropertyInfo.Simplified,anyElementPropertyInfo:T.Model.AnyElementPropertyInfo.Simplified,attributePropertyInfo:T.Model.AttributePropertyInfo,elementMapPropertyInfo:T.Model.ElementMapPropertyInfo,elementPropertyInfo:T.Model.ElementPropertyInfo,elementsPropertyInfo:T.Model.ElementsPropertyInfo,elementRefPropertyInfo:T.Model.ElementRefPropertyInfo.Simplified,elementRefsPropertyInfo:T.Model.ElementRefsPropertyInfo.Simplified,valuePropertyInfo:T.Model.ValuePropertyInfo,initialize:function(){T.Mapping.Style.prototype.initialize.apply(this)},CLASS_NAME:"Jsonix.Mapping.Style.Simplified"}),T.Mapping.Style.STYLES.simplified=new T.Mapping.Style.Simplified,T.Schema.XSD={},T.Schema.XSD.NAMESPACE_URI="http://www.w3.org/2001/XMLSchema",T.Schema.XSD.PREFIX="xsd",T.Schema.XSD.qname=function(S){return T.Util.Ensure.ensureString(S),new T.XML.QName(T.Schema.XSD.NAMESPACE_URI,S,T.Schema.XSD.PREFIX)},T.Schema.XSD.AnyType=T.Class(T.Model.ClassInfo,{typeName:T.Schema.XSD.qname("anyType"),initialize:function(){T.Model.ClassInfo.prototype.initialize.call(this,{name:"AnyType",propertyInfos:[{type:"anyAttribute",name:"attributes"},{type:"anyElement",name:"content",collection:!0}]})},CLASS_NAME:"Jsonix.Schema.XSD.AnyType"}),T.Schema.XSD.AnyType.INSTANCE=new T.Schema.XSD.AnyType,T.Schema.XSD.AnySimpleType=T.Class(T.Model.TypeInfo,{name:"AnySimpleType",typeName:T.Schema.XSD.qname("anySimpleType"),initialize:function(){T.Model.TypeInfo.prototype.initialize.apply(this,[])},print:function(S,D,L,z){return S},parse:function(S,D,L,z){return S},isInstance:function(S,D,L){return!0},reprint:function(S,D,L,z){return T.Util.Type.isString(S)&&!this.isInstance(S,D,z)?this.print(this.parse(S,D,null,z),D,L,z):this.print(S,D,L,z)},unmarshal:function(S,D,L){var z=D.getElementText();return T.Util.StringUtils.isNotBlank(z)?this.parse(z,S,D,L):null},marshal:function(S,D,L,z){T.Util.Type.exists(S)&&L.writeCharacters(this.reprint(S,D,L,z))},build:function(S,D){},CLASS_NAME:"Jsonix.Schema.XSD.AnySimpleType"}),T.Schema.XSD.AnySimpleType.INSTANCE=new T.Schema.XSD.AnySimpleType,T.Schema.XSD.List=T.Class(T.Schema.XSD.AnySimpleType,{name:null,typeName:null,typeInfo:null,separator:" ",trimmedSeparator:T.Util.StringUtils.whitespaceCharacters,simpleType:!0,built:!1,initialize:function(S,D,L){T.Util.Ensure.ensureExists(S),this.typeInfo=S,T.Util.Type.exists(this.name)||(this.name=S.name+"*"),T.Util.Type.exists(D)&&(this.typeName=D),this.separator=T.Util.Type.isString(L)?L:" ";var z=T.Util.StringUtils.trim(this.separator);this.trimmedSeparator=0===z.length?T.Util.StringUtils.whitespaceCharacters:z},build:function(S){this.built||(this.typeInfo=S.resolveTypeInfo(this.typeInfo,this.module),this.built=!0)},print:function(S,D,L,z){if(!T.Util.Type.exists(S))return null;T.Util.Ensure.ensureArray(S);for(var X="",Y=0;Y<S.length;Y++)Y>0&&(X+=this.separator),X+=this.typeInfo.reprint(S[Y],D,L,z);return X},parse:function(S,D,L,z){T.Util.Ensure.ensureString(S);for(var X=T.Util.StringUtils.splitBySeparatorChars(S,this.trimmedSeparator),Y=[],re=0;re<X.length;re++)Y.push(this.typeInfo.parse(T.Util.StringUtils.trim(X[re]),D,L,z));return Y},CLASS_NAME:"Jsonix.Schema.XSD.List"}),T.Schema.XSD.String=T.Class(T.Schema.XSD.AnySimpleType,{name:"String",typeName:T.Schema.XSD.qname("string"),unmarshal:function(S,D,L){var z=D.getElementText();return this.parse(z,S,D,L)},print:function(S,D,L,z){return T.Util.Ensure.ensureString(S),S},parse:function(S,D,L,z){return T.Util.Ensure.ensureString(S),S},isInstance:function(S,D,L){return T.Util.Type.isString(S)},CLASS_NAME:"Jsonix.Schema.XSD.String"}),T.Schema.XSD.String.INSTANCE=new T.Schema.XSD.String,T.Schema.XSD.String.INSTANCE.LIST=new T.Schema.XSD.List(T.Schema.XSD.String.INSTANCE),T.Schema.XSD.Strings=T.Class(T.Schema.XSD.List,{name:"Strings",initialize:function(){T.Schema.XSD.List.prototype.initialize.apply(this,[T.Schema.XSD.String.INSTANCE,T.Schema.XSD.qname("strings")," "])},CLASS_NAME:"Jsonix.Schema.XSD.Strings"}),T.Schema.XSD.Strings.INSTANCE=new T.Schema.XSD.Strings,T.Schema.XSD.NormalizedString=T.Class(T.Schema.XSD.String,{name:"NormalizedString",typeName:T.Schema.XSD.qname("normalizedString"),CLASS_NAME:"Jsonix.Schema.XSD.NormalizedString"}),T.Schema.XSD.NormalizedString.INSTANCE=new T.Schema.XSD.NormalizedString,T.Schema.XSD.NormalizedString.INSTANCE.LIST=new T.Schema.XSD.List(T.Schema.XSD.NormalizedString.INSTANCE),T.Schema.XSD.Token=T.Class(T.Schema.XSD.NormalizedString,{name:"Token",typeName:T.Schema.XSD.qname("token"),CLASS_NAME:"Jsonix.Schema.XSD.Token"}),T.Schema.XSD.Token.INSTANCE=new T.Schema.XSD.Token,T.Schema.XSD.Token.INSTANCE.LIST=new T.Schema.XSD.List(T.Schema.XSD.Token.INSTANCE),T.Schema.XSD.Language=T.Class(T.Schema.XSD.Token,{name:"Language",typeName:T.Schema.XSD.qname("language"),CLASS_NAME:"Jsonix.Schema.XSD.Language"}),T.Schema.XSD.Language.INSTANCE=new T.Schema.XSD.Language,T.Schema.XSD.Language.INSTANCE.LIST=new T.Schema.XSD.List(T.Schema.XSD.Language.INSTANCE),T.Schema.XSD.Name=T.Class(T.Schema.XSD.Token,{name:"Name",typeName:T.Schema.XSD.qname("Name"),CLASS_NAME:"Jsonix.Schema.XSD.Name"}),T.Schema.XSD.Name.INSTANCE=new T.Schema.XSD.Name,T.Schema.XSD.Name.INSTANCE.LIST=new T.Schema.XSD.List(T.Schema.XSD.Name.INSTANCE),T.Schema.XSD.NCName=T.Class(T.Schema.XSD.Name,{name:"NCName",typeName:T.Schema.XSD.qname("NCName"),CLASS_NAME:"Jsonix.Schema.XSD.NCName"}),T.Schema.XSD.NCName.INSTANCE=new T.Schema.XSD.NCName,T.Schema.XSD.NCName.INSTANCE.LIST=new T.Schema.XSD.List(T.Schema.XSD.NCName.INSTANCE),T.Schema.XSD.NMToken=T.Class(T.Schema.XSD.Token,{name:"NMToken",typeName:T.Schema.XSD.qname("NMTOKEN"),CLASS_NAME:"Jsonix.Schema.XSD.NMToken"}),T.Schema.XSD.NMToken.INSTANCE=new T.Schema.XSD.NMToken,T.Schema.XSD.NMTokens=T.Class(T.Schema.XSD.List,{name:"NMTokens",initialize:function(){T.Schema.XSD.List.prototype.initialize.apply(this,[T.Schema.XSD.NMToken.INSTANCE,T.Schema.XSD.qname("NMTOKEN")," "])},CLASS_NAME:"Jsonix.Schema.XSD.NMTokens"}),T.Schema.XSD.NMTokens.INSTANCE=new T.Schema.XSD.NMTokens,T.Schema.XSD.Boolean=T.Class(T.Schema.XSD.AnySimpleType,{name:"Boolean",typeName:T.Schema.XSD.qname("boolean"),print:function(S,D,L,z){return T.Util.Ensure.ensureBoolean(S),S?"true":"false"},parse:function(S,D,L,z){if(T.Util.Ensure.ensureString(S),"true"===S||"1"===S)return!0;if("false"===S||"0"===S)return!1;throw new Error("Either [true], [1], [0] or [false] expected as boolean value.")},isInstance:function(S,D,L){return T.Util.Type.isBoolean(S)},CLASS_NAME:"Jsonix.Schema.XSD.Boolean"}),T.Schema.XSD.Boolean.INSTANCE=new T.Schema.XSD.Boolean,T.Schema.XSD.Boolean.INSTANCE.LIST=new T.Schema.XSD.List(T.Schema.XSD.Boolean.INSTANCE),T.Schema.XSD.Base64Binary=T.Class(T.Schema.XSD.AnySimpleType,{name:"Base64Binary",typeName:T.Schema.XSD.qname("base64Binary"),charToByte:{},byteToChar:[],initialize:function(){T.Schema.XSD.AnySimpleType.prototype.initialize.apply(this);for(var S="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",D=0;D<S.length;D++){var L=S.charAt(D);S.charCodeAt(D),this.byteToChar[D]=L,this.charToByte[L]=D}},print:function(S,D,L,z){return T.Util.Ensure.ensureArray(S),this.encode(S)},parse:function(S,D,L,z){return T.Util.Ensure.ensureString(S),this.decode(S)},encode:function(S){var L,z,X,re,J,ie,D="",Se=0,Je=S.length;for(Se=0;Se<Je;Se+=3)L=255&S[Se],Se+1<Je?(re=this.byteToChar[(3&L)<<4|(z=255&S[Se+1])>>4],Se+2<Je?(J=this.byteToChar[(15&z)<<2|(X=255&S[Se+2])>>6],ie=this.byteToChar[63&X]):(J=this.byteToChar[(15&z)<<2],ie="=")):(re=this.byteToChar[(3&L)<<4],J="=",ie="="),D=D+this.byteToChar[L>>2]+re+J+ie;return D},decode:function(S){input=S.replace(/[^A-Za-z0-9\+\/\=]/g,"");var D=Math.floor(input.length/4*3);"="===input.charAt(input.length-1)&&D--,"="===input.charAt(input.length-2)&&D--;var X,Y,re,J,ie,Se,L=new Array(D),je=0,Je=0;for(je=0;je<D;je+=3)re=this.charToByte[input.charAt(Je++)],X=(15&(J=this.charToByte[input.charAt(Je++)]))<<4|(ie=this.charToByte[input.charAt(Je++)])>>2,Y=(3&ie)<<6|(Se=this.charToByte[input.charAt(Je++)]),L[je]=re<<2|J>>4,64!=ie&&(L[je+1]=X),64!=Se&&(L[je+2]=Y);return L},isInstance:function(S,D,L){return T.Util.Type.isArray(S)},CLASS_NAME:"Jsonix.Schema.XSD.Base64Binary"}),T.Schema.XSD.Base64Binary.INSTANCE=new T.Schema.XSD.Base64Binary,T.Schema.XSD.Base64Binary.INSTANCE.LIST=new T.Schema.XSD.List(T.Schema.XSD.Base64Binary.INSTANCE),T.Schema.XSD.HexBinary=T.Class(T.Schema.XSD.AnySimpleType,{name:"HexBinary",typeName:T.Schema.XSD.qname("hexBinary"),charToQuartet:{},byteToDuplet:[],initialize:function(){T.Schema.XSD.AnySimpleType.prototype.initialize.apply(this);var L,S="0123456789ABCDEF",D=S.toLowerCase();for(L=0;L<16;L++)this.charToQuartet[S.charAt(L)]=L,L>=10&&(this.charToQuartet[D.charAt(L)]=L);for(L=0;L<256;L++)this.byteToDuplet[L]=S[L>>4]+S[15&L]},print:function(S,D,L,z){return T.Util.Ensure.ensureArray(S),this.encode(S)},parse:function(S,D,L,z){return T.Util.Ensure.ensureString(S),this.decode(S)},encode:function(S){for(var D="",L=0;L<S.length;L++)D+=this.byteToDuplet[255&S[L]];return D},decode:function(S){for(var D=S.replace(/[^A-Fa-f0-9]/g,""),L=D.length>>1,z=new Array(L),X=0;X<L;X++){var Y=D.charAt(2*X),re=D.charAt(2*X+1);z[X]=this.charToQuartet[Y]<<4|this.charToQuartet[re]}return z},isInstance:function(S,D,L){return T.Util.Type.isArray(S)},CLASS_NAME:"Jsonix.Schema.XSD.HexBinary"}),T.Schema.XSD.HexBinary.INSTANCE=new T.Schema.XSD.HexBinary,T.Schema.XSD.HexBinary.INSTANCE.LIST=new T.Schema.XSD.List(T.Schema.XSD.HexBinary.INSTANCE),T.Schema.XSD.Number=T.Class(T.Schema.XSD.AnySimpleType,{name:"Number",typeName:T.Schema.XSD.qname("number"),print:function(S,D,L,z){return T.Util.Ensure.ensureNumberOrNaN(S),T.Util.Type.isNaN(S)?"NaN":S===1/0?"INF":S===-1/0?"-INF":String(S)},parse:function(S,D,L,z){if(T.Util.Ensure.ensureString(S),"-INF"===S)return-1/0;if("INF"===S)return 1/0;if("NaN"===S)return NaN;var X=Number(S);return T.Util.Ensure.ensureNumber(X),X},isInstance:function(S,D,L){return T.Util.Type.isNumberOrNaN(S)},CLASS_NAME:"Jsonix.Schema.XSD.Number"}),T.Schema.XSD.Number.INSTANCE=new T.Schema.XSD.Number,T.Schema.XSD.Number.INSTANCE.LIST=new T.Schema.XSD.List(T.Schema.XSD.Number.INSTANCE),T.Schema.XSD.Float=T.Class(T.Schema.XSD.Number,{name:"Float",typeName:T.Schema.XSD.qname("float"),isInstance:function(S,D,L){return T.Util.Type.isNaN(S)||S===-1/0||S===1/0||T.Util.Type.isNumber(S)&&S>=this.MIN_VALUE&&S<=this.MAX_VALUE},MIN_VALUE:-34028235e31,MAX_VALUE:34028235e31,CLASS_NAME:"Jsonix.Schema.XSD.Float"}),T.Schema.XSD.Float.INSTANCE=new T.Schema.XSD.Float,T.Schema.XSD.Float.INSTANCE.LIST=new T.Schema.XSD.List(T.Schema.XSD.Float.INSTANCE),T.Schema.XSD.Decimal=T.Class(T.Schema.XSD.AnySimpleType,{name:"Decimal",typeName:T.Schema.XSD.qname("decimal"),print:function(S,D,L,z){return T.Util.Ensure.ensureNumber(S),String(S)},parse:function(S,D,L,z){T.Util.Ensure.ensureString(S);var X=Number(S);return T.Util.Ensure.ensureNumber(X),X},isInstance:function(S,D,L){return T.Util.Type.isNumber(S)},CLASS_NAME:"Jsonix.Schema.XSD.Decimal"}),T.Schema.XSD.Decimal.INSTANCE=new T.Schema.XSD.Decimal,T.Schema.XSD.Decimal.INSTANCE.LIST=new T.Schema.XSD.List(T.Schema.XSD.Decimal.INSTANCE),T.Schema.XSD.Integer=T.Class(T.Schema.XSD.AnySimpleType,{name:"Integer",typeName:T.Schema.XSD.qname("integer"),print:function(S,D,L,z){return T.Util.Ensure.ensureInteger(S),String(S)},parse:function(S,D,L,z){T.Util.Ensure.ensureString(S);var X=Number(S);return T.Util.Ensure.ensureInteger(X),X},isInstance:function(S,D,L){return T.Util.NumberUtils.isInteger(S)&&S>=this.MIN_VALUE&&S<=this.MAX_VALUE},MIN_VALUE:-0x8000000000000000,MAX_VALUE:0x8000000000000000,CLASS_NAME:"Jsonix.Schema.XSD.Integer"}),T.Schema.XSD.Integer.INSTANCE=new T.Schema.XSD.Integer,T.Schema.XSD.Integer.INSTANCE.LIST=new T.Schema.XSD.List(T.Schema.XSD.Integer.INSTANCE),T.Schema.XSD.NonPositiveInteger=T.Class(T.Schema.XSD.Integer,{name:"NonPositiveInteger",typeName:T.Schema.XSD.qname("nonPositiveInteger"),MIN_VALUE:-0x8000000000000000,MAX_VALUE:0,CLASS_NAME:"Jsonix.Schema.XSD.NonPositiveInteger"}),T.Schema.XSD.NonPositiveInteger.INSTANCE=new T.Schema.XSD.NonPositiveInteger,T.Schema.XSD.NonPositiveInteger.INSTANCE.LIST=new T.Schema.XSD.List(T.Schema.XSD.NonPositiveInteger.INSTANCE),T.Schema.XSD.NegativeInteger=T.Class(T.Schema.XSD.NonPositiveInteger,{name:"NegativeInteger",typeName:T.Schema.XSD.qname("negativeInteger"),MIN_VALUE:-0x8000000000000000,MAX_VALUE:-1,CLASS_NAME:"Jsonix.Schema.XSD.NegativeInteger"}),T.Schema.XSD.NegativeInteger.INSTANCE=new T.Schema.XSD.NegativeInteger,T.Schema.XSD.NegativeInteger.INSTANCE.LIST=new T.Schema.XSD.List(T.Schema.XSD.NegativeInteger.INSTANCE),T.Schema.XSD.Long=T.Class(T.Schema.XSD.Integer,{name:"Long",typeName:T.Schema.XSD.qname("long"),MIN_VALUE:-0x8000000000000000,MAX_VALUE:0x8000000000000000,CLASS_NAME:"Jsonix.Schema.XSD.Long"}),T.Schema.XSD.Long.INSTANCE=new T.Schema.XSD.Long,T.Schema.XSD.Long.INSTANCE.LIST=new T.Schema.XSD.List(T.Schema.XSD.Long.INSTANCE),T.Schema.XSD.Int=T.Class(T.Schema.XSD.Long,{name:"Int",typeName:T.Schema.XSD.qname("int"),MIN_VALUE:-2147483648,MAX_VALUE:2147483647,CLASS_NAME:"Jsonix.Schema.XSD.Int"}),T.Schema.XSD.Int.INSTANCE=new T.Schema.XSD.Int,T.Schema.XSD.Int.INSTANCE.LIST=new T.Schema.XSD.List(T.Schema.XSD.Int.INSTANCE),T.Schema.XSD.Short=T.Class(T.Schema.XSD.Int,{name:"Short",typeName:T.Schema.XSD.qname("short"),MIN_VALUE:-32768,MAX_VALUE:32767,CLASS_NAME:"Jsonix.Schema.XSD.Short"}),T.Schema.XSD.Short.INSTANCE=new T.Schema.XSD.Short,T.Schema.XSD.Short.INSTANCE.LIST=new T.Schema.XSD.List(T.Schema.XSD.Short.INSTANCE),T.Schema.XSD.Byte=T.Class(T.Schema.XSD.Short,{name:"Byte",typeName:T.Schema.XSD.qname("byte"),MIN_VALUE:-128,MAX_VALUE:127,CLASS_NAME:"Jsonix.Schema.XSD.Byte"}),T.Schema.XSD.Byte.INSTANCE=new T.Schema.XSD.Byte,T.Schema.XSD.Byte.INSTANCE.LIST=new T.Schema.XSD.List(T.Schema.XSD.Byte.INSTANCE),T.Schema.XSD.NonNegativeInteger=T.Class(T.Schema.XSD.Integer,{name:"NonNegativeInteger",typeName:T.Schema.XSD.qname("nonNegativeInteger"),MIN_VALUE:0,MAX_VALUE:0x8000000000000000,CLASS_NAME:"Jsonix.Schema.XSD.NonNegativeInteger"}),T.Schema.XSD.NonNegativeInteger.INSTANCE=new T.Schema.XSD.NonNegativeInteger,T.Schema.XSD.NonNegativeInteger.INSTANCE.LIST=new T.Schema.XSD.List(T.Schema.XSD.NonNegativeInteger.INSTANCE),T.Schema.XSD.UnsignedLong=T.Class(T.Schema.XSD.NonNegativeInteger,{name:"UnsignedLong",typeName:T.Schema.XSD.qname("unsignedLong"),MIN_VALUE:0,MAX_VALUE:0x10000000000000000,CLASS_NAME:"Jsonix.Schema.XSD.UnsignedLong"}),T.Schema.XSD.UnsignedLong.INSTANCE=new T.Schema.XSD.UnsignedLong,T.Schema.XSD.UnsignedLong.INSTANCE.LIST=new T.Schema.XSD.List(T.Schema.XSD.UnsignedLong.INSTANCE),T.Schema.XSD.UnsignedInt=T.Class(T.Schema.XSD.UnsignedLong,{name:"UnsignedInt",typeName:T.Schema.XSD.qname("unsignedInt"),MIN_VALUE:0,MAX_VALUE:4294967295,CLASS_NAME:"Jsonix.Schema.XSD.UnsignedInt"}),T.Schema.XSD.UnsignedInt.INSTANCE=new T.Schema.XSD.UnsignedInt,T.Schema.XSD.UnsignedInt.INSTANCE.LIST=new T.Schema.XSD.List(T.Schema.XSD.UnsignedInt.INSTANCE),T.Schema.XSD.UnsignedShort=T.Class(T.Schema.XSD.UnsignedInt,{name:"UnsignedShort",typeName:T.Schema.XSD.qname("unsignedShort"),MIN_VALUE:0,MAX_VALUE:65535,CLASS_NAME:"Jsonix.Schema.XSD.UnsignedShort"}),T.Schema.XSD.UnsignedShort.INSTANCE=new T.Schema.XSD.UnsignedShort,T.Schema.XSD.UnsignedShort.INSTANCE.LIST=new T.Schema.XSD.List(T.Schema.XSD.UnsignedShort.INSTANCE),T.Schema.XSD.UnsignedByte=T.Class(T.Schema.XSD.UnsignedShort,{name:"UnsignedByte",typeName:T.Schema.XSD.qname("unsignedByte"),MIN_VALUE:0,MAX_VALUE:255,CLASS_NAME:"Jsonix.Schema.XSD.UnsignedByte"}),T.Schema.XSD.UnsignedByte.INSTANCE=new T.Schema.XSD.UnsignedByte,T.Schema.XSD.UnsignedByte.INSTANCE.LIST=new T.Schema.XSD.List(T.Schema.XSD.UnsignedByte.INSTANCE),T.Schema.XSD.PositiveInteger=T.Class(T.Schema.XSD.NonNegativeInteger,{name:"PositiveInteger",typeName:T.Schema.XSD.qname("positiveInteger"),MIN_VALUE:1,MAX_VALUE:0x8000000000000000,CLASS_NAME:"Jsonix.Schema.XSD.PositiveInteger"}),T.Schema.XSD.PositiveInteger.INSTANCE=new T.Schema.XSD.PositiveInteger,T.Schema.XSD.PositiveInteger.INSTANCE.LIST=new T.Schema.XSD.List(T.Schema.XSD.PositiveInteger.INSTANCE),T.Schema.XSD.Double=T.Class(T.Schema.XSD.Number,{name:"Double",typeName:T.Schema.XSD.qname("double"),isInstance:function(S,D,L){return T.Util.Type.isNaN(S)||S===-1/0||S===1/0||T.Util.Type.isNumber(S)&&S>=this.MIN_VALUE&&S<=this.MAX_VALUE},MIN_VALUE:-17976931348623157e292,MAX_VALUE:17976931348623157e292,CLASS_NAME:"Jsonix.Schema.XSD.Double"}),T.Schema.XSD.Double.INSTANCE=new T.Schema.XSD.Double,T.Schema.XSD.Double.INSTANCE.LIST=new T.Schema.XSD.List(T.Schema.XSD.Double.INSTANCE),T.Schema.XSD.AnyURI=T.Class(T.Schema.XSD.AnySimpleType,{name:"AnyURI",typeName:T.Schema.XSD.qname("anyURI"),print:function(S,D,L,z){return T.Util.Ensure.ensureString(S),S},parse:function(S,D,L,z){return T.Util.Ensure.ensureString(S),S},isInstance:function(S,D,L){return T.Util.Type.isString(S)},CLASS_NAME:"Jsonix.Schema.XSD.AnyURI"}),T.Schema.XSD.AnyURI.INSTANCE=new T.Schema.XSD.AnyURI,T.Schema.XSD.AnyURI.INSTANCE.LIST=new T.Schema.XSD.List(T.Schema.XSD.AnyURI.INSTANCE),T.Schema.XSD.QName=T.Class(T.Schema.XSD.AnySimpleType,{name:"QName",typeName:T.Schema.XSD.qname("QName"),print:function(S,D,L,z){var Y,X=T.XML.QName.fromObject(S),re=X.localPart;return L?(Y=L.getPrefix(X.namespaceURI,X.prefix||null),L.declareNamespace(X.namespaceURI,Y)):Y=X.prefix,Y?Y+":"+re:re},parse:function(S,D,L,z){T.Util.Ensure.ensureString(S);var X,Y,re=(S=T.Util.StringUtils.trim(S)).indexOf(":");if(-1===re)X="",Y=S;else{if(!(re>0&&re<S.length-1))throw new Error("Invalid QName ["+S+"].");X=S.substring(0,re),Y=S.substring(re+1)}var J=L||D||null;if(J){var ie=J.getNamespaceURI(X);if(T.Util.Type.isString(ie))return new T.XML.QName(ie,Y,X);throw new Error("Prefix ["+X+"] of the QName ["+S+"] is not bound in this context.")}return S},isInstance:function(S,D,L){return S instanceof T.XML.QName||T.Util.Type.isObject(S)&&T.Util.Type.isString(S.localPart||S.lp)},CLASS_NAME:"Jsonix.Schema.XSD.QName"}),T.Schema.XSD.QName.INSTANCE=new T.Schema.XSD.QName,T.Schema.XSD.QName.INSTANCE.LIST=new T.Schema.XSD.List(T.Schema.XSD.QName.INSTANCE),T.Schema.XSD.Calendar=T.Class(T.Schema.XSD.AnySimpleType,{name:"Calendar",typeName:T.Schema.XSD.qname("calendar"),parse:function(S,D,L,z){if(T.Util.Ensure.ensureString(S),S.match(new RegExp("^"+T.Schema.XSD.Calendar.DATETIME_PATTERN+"$")))return this.parseDateTime(S,D,L,z);if(S.match(new RegExp("^"+T.Schema.XSD.Calendar.DATE_PATTERN+"$")))return this.parseDate(S,D,L,z);if(S.match(new RegExp("^"+T.Schema.XSD.Calendar.TIME_PATTERN+"$")))return this.parseTime(S,D,L,z);if(S.match(new RegExp("^"+T.Schema.XSD.Calendar.GYEAR_MONTH_PATTERN+"$")))return this.parseGYearMonth(S,D,L,z);if(S.match(new RegExp("^"+T.Schema.XSD.Calendar.GYEAR_PATTERN+"$")))return this.parseGYear(S,D,L,z);if(S.match(new RegExp("^"+T.Schema.XSD.Calendar.GMONTH_DAY_PATTERN+"$")))return this.parseGMonthDay(S,D,L,z);if(S.match(new RegExp("^"+T.Schema.XSD.Calendar.GMONTH_PATTERN+"$")))return this.parseGMonth(S,D,L,z);if(S.match(new RegExp("^"+T.Schema.XSD.Calendar.GDAY_PATTERN+"$")))return this.parseGDay(S,D,L,z);throw new Error("Value ["+S+"] does not match xs:dateTime, xs:date, xs:time, xs:gYearMonth, xs:gYear, xs:gMonthDay, xs:gMonth or xs:gDay patterns.")},parseGYearMonth:function(S,D,L,z){var X=new RegExp("^"+T.Schema.XSD.Calendar.GYEAR_MONTH_PATTERN+"$"),Y=S.match(X);if(null!==Y){var re={year:parseInt(Y[1],10),month:parseInt(Y[5],10),timezone:this.parseTimezoneString(Y[7])};return new T.XML.Calendar(re)}throw new Error("Value ["+S+"] does not match the xs:gYearMonth pattern.")},parseGYear:function(S,D,L,z){var X=new RegExp("^"+T.Schema.XSD.Calendar.GYEAR_PATTERN+"$"),Y=S.match(X);if(null!==Y){var re={year:parseInt(Y[1],10),timezone:this.parseTimezoneString(Y[5])};return new T.XML.Calendar(re)}throw new Error("Value ["+S+"] does not match the xs:gYear pattern.")},parseGMonthDay:function(S,D,L,z){var X=new RegExp("^"+T.Schema.XSD.Calendar.GMONTH_DAY_PATTERN+"$"),Y=S.match(X);if(null!==Y){var re={month:parseInt(Y[2],10),day:parseInt(Y[3],10),timezone:this.parseTimezoneString(Y[5])};return new T.XML.Calendar(re)}throw new Error("Value ["+S+"] does not match the xs:gMonthDay pattern.")},parseGMonth:function(S,D,L,z){var X=new RegExp("^"+T.Schema.XSD.Calendar.GMONTH_PATTERN+"$"),Y=S.match(X);if(null!==Y){var re={month:parseInt(Y[2],10),timezone:this.parseTimezoneString(Y[3])};return new T.XML.Calendar(re)}throw new Error("Value ["+S+"] does not match the xs:gMonth pattern.")},parseGDay:function(S,D,L,z){var X=new RegExp("^"+T.Schema.XSD.Calendar.GDAY_PATTERN+"$"),Y=S.match(X);if(null!==Y){var re={day:parseInt(Y[2],10),timezone:this.parseTimezoneString(Y[3])};return new T.XML.Calendar(re)}throw new Error("Value ["+S+"] does not match the xs:gDay pattern.")},parseDateTime:function(S,D,L,z){T.Util.Ensure.ensureString(S);var X=new RegExp("^"+T.Schema.XSD.Calendar.DATETIME_PATTERN+"$"),Y=S.match(X);if(null!==Y){var re={year:parseInt(Y[1],10),month:parseInt(Y[5],10),day:parseInt(Y[7],10),hour:parseInt(Y[9],10),minute:parseInt(Y[10],10),second:parseInt(Y[11],10),fractionalSecond:Y[12]?parseFloat(Y[12]):0,timezone:this.parseTimezoneString(Y[14])};return new T.XML.Calendar(re)}throw new Error("Value ["+S+"] does not match the xs:date pattern.")},parseDate:function(S,D,L,z){T.Util.Ensure.ensureString(S);var X=new RegExp("^"+T.Schema.XSD.Calendar.DATE_PATTERN+"$"),Y=S.match(X);if(null!==Y){var re={year:parseInt(Y[1],10),month:parseInt(Y[5],10),day:parseInt(Y[7],10),timezone:this.parseTimezoneString(Y[9])};return new T.XML.Calendar(re)}throw new Error("Value ["+S+"] does not match the xs:date pattern.")},parseTime:function(S,D,L,z){T.Util.Ensure.ensureString(S);var X=new RegExp("^"+T.Schema.XSD.Calendar.TIME_PATTERN+"$"),Y=S.match(X);if(null!==Y){var re={hour:parseInt(Y[1],10),minute:parseInt(Y[2],10),second:parseInt(Y[3],10),fractionalSecond:Y[4]?parseFloat(Y[4]):0,timezone:this.parseTimezoneString(Y[6])};return new T.XML.Calendar(re)}throw new Error("Value ["+S+"] does not match the xs:time pattern.")},parseTimezoneString:function(S){if(T.Util.Type.isString(S)){if(""===S)return NaN;if("Z"===S)return 0;if("+14:00"===S)return 840;if("-14:00"===S)return-840;var D=new RegExp("^"+T.Schema.XSD.Calendar.TIMEZONE_PATTERN+"$"),L=S.match(D);if(null!==L)return("+"===L[1]?1:-1)*(60*parseInt(L[4],10)+parseInt(L[5],10));throw new Error("Value ["+S+"] does not match the timezone pattern.")}return NaN},print:function(S,D,L,z){if(T.Util.Ensure.ensureObject(S),T.Util.NumberUtils.isInteger(S.year)&&T.Util.NumberUtils.isInteger(S.month)&&T.Util.NumberUtils.isInteger(S.day)&&T.Util.NumberUtils.isInteger(S.hour)&&T.Util.NumberUtils.isInteger(S.minute)&&T.Util.NumberUtils.isInteger(S.second))return this.printDateTime(S);if(T.Util.NumberUtils.isInteger(S.year)&&T.Util.NumberUtils.isInteger(S.month)&&T.Util.NumberUtils.isInteger(S.day))return this.printDate(S);if(T.Util.NumberUtils.isInteger(S.hour)&&T.Util.NumberUtils.isInteger(S.minute)&&T.Util.NumberUtils.isInteger(S.second))return this.printTime(S);if(T.Util.NumberUtils.isInteger(S.year)&&T.Util.NumberUtils.isInteger(S.month))return this.printGYearMonth(S);if(T.Util.NumberUtils.isInteger(S.month)&&T.Util.NumberUtils.isInteger(S.day))return this.printGMonthDay(S);if(T.Util.NumberUtils.isInteger(S.year))return this.printGYear(S);if(T.Util.NumberUtils.isInteger(S.month))return this.printGMonth(S);if(T.Util.NumberUtils.isInteger(S.day))return this.printGDay(S);throw new Error("Value ["+S+"] is not recognized as dateTime, date or time.")},printDateTime:function(S){T.Util.Ensure.ensureObject(S),T.Util.Ensure.ensureInteger(S.year),T.Util.Ensure.ensureInteger(S.month),T.Util.Ensure.ensureInteger(S.day),T.Util.Ensure.ensureInteger(S.hour),T.Util.Ensure.ensureInteger(S.minute),T.Util.Ensure.ensureNumber(S.second),T.Util.Type.exists(S.fractionalString)&&T.Util.Ensure.ensureNumber(S.fractionalString),T.Util.Type.exists(S.timezone)&&!T.Util.Type.isNaN(S.timezone)&&T.Util.Ensure.ensureInteger(S.timezone);var D=this.printDateString(S);return D+="T",D+=this.printTimeString(S),T.Util.Type.exists(S.timezone)&&(D+=this.printTimezoneString(S.timezone)),D},printDate:function(S){T.Util.Ensure.ensureObject(S),T.Util.Ensure.ensureNumber(S.year),T.Util.Ensure.ensureNumber(S.month),T.Util.Ensure.ensureNumber(S.day),T.Util.Type.exists(S.timezone)&&!T.Util.Type.isNaN(S.timezone)&&T.Util.Ensure.ensureInteger(S.timezone);var D=this.printDateString(S);return T.Util.Type.exists(S.timezone)&&(D+=this.printTimezoneString(S.timezone)),D},printTime:function(S){T.Util.Ensure.ensureObject(S),T.Util.Ensure.ensureNumber(S.hour),T.Util.Ensure.ensureNumber(S.minute),T.Util.Ensure.ensureNumber(S.second),T.Util.Type.exists(S.fractionalString)&&T.Util.Ensure.ensureNumber(S.fractionalString),T.Util.Type.exists(S.timezone)&&!T.Util.Type.isNaN(S.timezone)&&T.Util.Ensure.ensureInteger(S.timezone);var D=this.printTimeString(S);return T.Util.Type.exists(S.timezone)&&(D+=this.printTimezoneString(S.timezone)),D},printDateString:function(S){return T.Util.Ensure.ensureObject(S),T.Util.Ensure.ensureInteger(S.year),T.Util.Ensure.ensureInteger(S.month),T.Util.Ensure.ensureInteger(S.day),(S.year<0?"-"+this.printYear(-S.year):this.printYear(S.year))+"-"+this.printMonth(S.month)+"-"+this.printDay(S.day)},printTimeString:function(S){T.Util.Ensure.ensureObject(S),T.Util.Ensure.ensureInteger(S.hour),T.Util.Ensure.ensureInteger(S.minute),T.Util.Ensure.ensureInteger(S.second),T.Util.Type.exists(S.fractionalSecond)&&T.Util.Ensure.ensureNumber(S.fractionalSecond);var D=this.printHour(S.hour);return D+=":",D+=this.printMinute(S.minute),D+=":",D+=this.printSecond(S.second),T.Util.Type.exists(S.fractionalSecond)&&(D+=this.printFractionalSecond(S.fractionalSecond)),D},printTimezoneString:function(S){if(!T.Util.Type.exists(S)||T.Util.Type.isNaN(S))return"";T.Util.Ensure.ensureInteger(S);var Y,D=S<0?-1:S>0?1:0,L=S*D,z=L%60,X=Math.floor(L/60);return 0===D?"Z":(D>0?Y="+":D<0&&(Y="-"),Y+=this.printHour(X),Y+=":",Y+=this.printMinute(z))},printGDay:function(S,D,L,z){T.Util.Ensure.ensureObject(S);var X=void 0,Y=void 0;return S instanceof Date?X=S.getDate():(T.Util.Ensure.ensureInteger(S.day),X=S.day,Y=S.timezone),T.XML.Calendar.validateDay(X),T.XML.Calendar.validateTimezone(Y),"---"+this.printDay(X)+this.printTimezoneString(Y)},printGMonth:function(S,D,L,z){T.Util.Ensure.ensureObject(S);var X=void 0,Y=void 0;return S instanceof Date?X=S.getMonth()+1:(T.Util.Ensure.ensureInteger(S.month),X=S.month,Y=S.timezone),T.XML.Calendar.validateMonth(X),T.XML.Calendar.validateTimezone(Y),"--"+this.printMonth(X)+this.printTimezoneString(Y)},printGMonthDay:function(S,D,L,z){T.Util.Ensure.ensureObject(S);var X=void 0,Y=void 0,re=void 0;return S instanceof Date?(X=S.getMonth()+1,Y=S.getDate()):(T.Util.Ensure.ensureInteger(S.month),T.Util.Ensure.ensureInteger(S.day),X=S.month,Y=S.day,re=S.timezone),T.XML.Calendar.validateMonthDay(X,Y),T.XML.Calendar.validateTimezone(re),"--"+this.printMonth(X)+"-"+this.printDay(Y)+this.printTimezoneString(re)},printGYear:function(S,D,L,z){T.Util.Ensure.ensureObject(S);var X=void 0,Y=void 0;return S instanceof Date?X=S.getFullYear():(T.Util.Ensure.ensureInteger(S.year),X=S.year,Y=S.timezone),T.XML.Calendar.validateYear(X),T.XML.Calendar.validateTimezone(Y),this.printSignedYear(X)+this.printTimezoneString(Y)},printGYearMonth:function(S,D,L,z){T.Util.Ensure.ensureObject(S);var X=void 0,Y=void 0,re=void 0;return S instanceof Date?(X=S.getFullYear(),Y=S.getMonth()+1):(T.Util.Ensure.ensureInteger(S.year),X=S.year,Y=S.month,re=S.timezone),T.XML.Calendar.validateYear(X),T.XML.Calendar.validateMonth(Y),T.XML.Calendar.validateTimezone(re),this.printSignedYear(X)+"-"+this.printMonth(Y)+this.printTimezoneString(re)},printSignedYear:function(S){return S<0?"-"+this.printYear(-1*S):this.printYear(S)},printYear:function(S){return this.printInteger(S,4)},printMonth:function(S){return this.printInteger(S,2)},printDay:function(S){return this.printInteger(S,2)},printHour:function(S){return this.printInteger(S,2)},printMinute:function(S){return this.printInteger(S,2)},printSecond:function(S){return this.printInteger(S,2)},printFractionalSecond:function(S){if(T.Util.Ensure.ensureNumber(S),S<0||S>=1)throw new Error("Fractional second ["+S+"] must be between 0 and 1.");if(0===S)return"";var D=String(S),L=D.indexOf(".");return L<0?"":D.substring(L)},printInteger:function(S,D){if(T.Util.Ensure.ensureInteger(S),T.Util.Ensure.ensureInteger(D),D<=0)throw new Error("Length ["+S+"] must be positive.");if(S<0)throw new Error("Value ["+S+"] must not be negative.");for(var L=String(S),z=L.length;z<D;z++)L="0"+L;return L},isInstance:function(S,D,L){return T.Util.Type.isObject(S)&&(T.Util.NumberUtils.isInteger(S.year)&&T.Util.NumberUtils.isInteger(S.month)&&T.Util.NumberUtils.isInteger(S.day)||T.Util.NumberUtils.isInteger(S.hour)&&T.Util.NumberUtils.isInteger(S.minute)&&T.Util.NumberUtils.isInteger(S.second))},CLASS_NAME:"Jsonix.Schema.XSD.Calendar"}),T.Schema.XSD.Calendar.YEAR_PATTERN="-?([1-9][0-9]*)?((?!(0000))[0-9]{4})",T.Schema.XSD.Calendar.TIMEZONE_PATTERN="Z|([\\-\\+])(((0[0-9]|1[0-3]):([0-5][0-9]))|(14:00))",T.Schema.XSD.Calendar.MONTH_PATTERN="(0[1-9]|1[0-2])",T.Schema.XSD.Calendar.SINGLE_MONTH_PATTERN="\\-\\-"+T.Schema.XSD.Calendar.MONTH_PATTERN,T.Schema.XSD.Calendar.DAY_PATTERN="(0[1-9]|[12][0-9]|3[01])",T.Schema.XSD.Calendar.SINGLE_DAY_PATTERN="\\-\\-\\-"+T.Schema.XSD.Calendar.DAY_PATTERN,T.Schema.XSD.Calendar.GYEAR_PATTERN="("+T.Schema.XSD.Calendar.YEAR_PATTERN+")("+T.Schema.XSD.Calendar.TIMEZONE_PATTERN+")?",T.Schema.XSD.Calendar.GMONTH_PATTERN="("+T.Schema.XSD.Calendar.SINGLE_MONTH_PATTERN+")("+T.Schema.XSD.Calendar.TIMEZONE_PATTERN+")?",T.Schema.XSD.Calendar.GDAY_PATTERN="("+T.Schema.XSD.Calendar.SINGLE_DAY_PATTERN+")("+T.Schema.XSD.Calendar.TIMEZONE_PATTERN+")?",T.Schema.XSD.Calendar.GYEAR_MONTH_PATTERN="("+T.Schema.XSD.Calendar.YEAR_PATTERN+")-("+T.Schema.XSD.Calendar.DAY_PATTERN+")("+T.Schema.XSD.Calendar.TIMEZONE_PATTERN+")?",T.Schema.XSD.Calendar.GMONTH_DAY_PATTERN="("+T.Schema.XSD.Calendar.SINGLE_MONTH_PATTERN+")-("+T.Schema.XSD.Calendar.DAY_PATTERN+")("+T.Schema.XSD.Calendar.TIMEZONE_PATTERN+")?",T.Schema.XSD.Calendar.DATE_PART_PATTERN="("+T.Schema.XSD.Calendar.YEAR_PATTERN+")-("+T.Schema.XSD.Calendar.MONTH_PATTERN+")-("+T.Schema.XSD.Calendar.DAY_PATTERN+")",T.Schema.XSD.Calendar.TIME_PART_PATTERN="([0-1][0-9]|2[0-3]):([0-5][0-9]):([0-5][0-9])(\\.([0-9]+))?",T.Schema.XSD.Calendar.TIME_PATTERN=T.Schema.XSD.Calendar.TIME_PART_PATTERN+"("+T.Schema.XSD.Calendar.TIMEZONE_PATTERN+")?",T.Schema.XSD.Calendar.DATE_PATTERN=T.Schema.XSD.Calendar.DATE_PART_PATTERN+"("+T.Schema.XSD.Calendar.TIMEZONE_PATTERN+")?",T.Schema.XSD.Calendar.DATETIME_PATTERN=T.Schema.XSD.Calendar.DATE_PART_PATTERN+"T"+T.Schema.XSD.Calendar.TIME_PART_PATTERN+"("+T.Schema.XSD.Calendar.TIMEZONE_PATTERN+")?",T.Schema.XSD.Calendar.INSTANCE=new T.Schema.XSD.Calendar,T.Schema.XSD.Calendar.INSTANCE.LIST=new T.Schema.XSD.List(T.Schema.XSD.Calendar.INSTANCE),T.Schema.XSD.Duration=T.Class(T.Schema.XSD.AnySimpleType,{name:"Duration",typeName:T.Schema.XSD.qname("duration"),isInstance:function(S,D,L){return T.Util.Type.isObject(S)&&((!T.Util.Type.exists(S.sign)||-1===S.sign||1===S.sign)(T.Util.NumberUtils.isInteger(S.years)&&S.years>=0)||T.Util.NumberUtils.isInteger(S.months)&&S.months>=0||T.Util.NumberUtils.isInteger(S.days)&&S.days>=0||T.Util.NumberUtils.isInteger(S.hours)&&S.hours>=0||T.Util.NumberUtils.isInteger(S.minutes)&&S.minutes>=0||T.Util.Type.isNumber(S.seconds)&&S.seconds>=0)},validate:function(S){if(T.Util.Ensure.ensureObject(S),T.Util.Type.exists(S.sign)&&1!==S.sign&&-1!==S.sign)throw new Error("Sign of the duration ["+S.sign+"] must be either [1] or [-1].");var D=!0,L=function(X,Y){if(T.Util.Type.exists(X)){if(T.Util.NumberUtils.isInteger(X)&&X>=0)return!0;throw new Error(Y.replace("{0}",X))}return!1};if(D=(D=(D=(D=(D=(D=D&&!L(S.years,"Number of years [{0}] must be an unsigned integer."))&&!L(S.months,"Number of months [{0}] must be an unsigned integer."))&&!L(S.days,"Number of days [{0}] must be an unsigned integer."))&&!L(S.hours,"Number of hours [{0}] must be an unsigned integer."))&&!L(S.minutes,"Number of minutes [{0}] must be an unsigned integer."))&&!function(X,Y){if(T.Util.Type.exists(X)){if(T.Util.Type.isNumber(X)&&X>=0)return!0;throw new Error("Number of seconds [{0}] must be an unsigned number.".replace("{0}",X))}return!1}(S.seconds))throw new Error("At least one of the components (years, months, days, hours, minutes, seconds) must be set.")},print:function(S,D,L,z){this.validate(S);var X="";return-1===S.sign&&(X+="-"),X+="P",T.Util.Type.exists(S.years)&&(X+=S.years+"Y"),T.Util.Type.exists(S.months)&&(X+=S.months+"M"),T.Util.Type.exists(S.days)&&(X+=S.days+"D"),(T.Util.Type.exists(S.hours)||T.Util.Type.exists(S.minutes)||T.Util.Type.exists(S.seconds))&&(X+="T",T.Util.Type.exists(S.hours)&&(X+=S.hours+"H"),T.Util.Type.exists(S.minutes)&&(X+=S.minutes+"M"),T.Util.Type.exists(S.seconds)&&(X+=S.seconds+"S")),X},parse:function(S,D,L,z){var X=new RegExp("^"+T.Schema.XSD.Duration.PATTERN+"$"),Y=S.match(X);if(null!==Y){var J={};return Y[1]&&(J.sign=-1),Y[3]&&(J.years=parseInt(Y[3],10)),Y[5]&&(J.months=parseInt(Y[5],10)),Y[7]&&(J.days=parseInt(Y[7],10)),Y[10]&&(J.hours=parseInt(Y[10],10)),Y[12]&&(J.minutes=parseInt(Y[12],10)),Y[14]&&(J.seconds=Number(Y[14])),J}throw new Error("Value ["+S+"] does not match the duration pattern.")},CLASS_NAME:"Jsonix.Schema.XSD.Duration"}),T.Schema.XSD.Duration.PATTERN="(-)?P(([0-9]+)Y)?(([0-9]+)M)?(([0-9]+)D)?(T(([0-9]+)H)?(([0-9]+)M)?(([0-9]+(\\.[0-9]+)?)S)?)?",T.Schema.XSD.Duration.INSTANCE=new T.Schema.XSD.Duration,T.Schema.XSD.Duration.INSTANCE.LIST=new T.Schema.XSD.List(T.Schema.XSD.Duration.INSTANCE),T.Schema.XSD.DateTime=T.Class(T.Schema.XSD.Calendar,{name:"DateTime",typeName:T.Schema.XSD.qname("dateTime"),parse:function(S,D,L,z){return this.parseDateTime(S)},print:function(S,D,L,z){return this.printDateTime(S)},CLASS_NAME:"Jsonix.Schema.XSD.DateTime"}),T.Schema.XSD.DateTime.INSTANCE=new T.Schema.XSD.DateTime,T.Schema.XSD.DateTime.INSTANCE.LIST=new T.Schema.XSD.List(T.Schema.XSD.DateTime.INSTANCE),T.Schema.XSD.DateTimeAsDate=T.Class(T.Schema.XSD.Calendar,{name:"DateTimeAsDate",typeName:T.Schema.XSD.qname("dateTime"),parse:function(S,D,L,z){var X=this.parseDateTime(S),Y=new Date;Y.setFullYear(X.year),Y.setMonth(X.month-1),Y.setDate(X.day),Y.setHours(X.hour),Y.setMinutes(X.minute),Y.setSeconds(X.second),T.Util.Type.isNumber(X.fractionalSecond)&&Y.setMilliseconds(Math.floor(1e3*X.fractionalSecond));var re,J,ie=-Y.getTimezoneOffset();T.Util.NumberUtils.isInteger(X.timezone)?(re=X.timezone,J=!1):(re=ie,J=!0);var Se=new Date(Y.getTime()+6e4*(-re+ie));return Se.originalTimezone=J?null:X.timezone,Se},print:function(S,D,L,z){T.Util.Ensure.ensureDate(S);var X,re,Y=-S.getTimezoneOffset();return null===S.originalTimezone?this.printDateTime(new T.XML.Calendar({year:S.getFullYear(),month:S.getMonth()+1,day:S.getDate(),hour:S.getHours(),minute:S.getMinutes(),second:S.getSeconds(),fractionalSecond:S.getMilliseconds()/1e3})):(T.Util.NumberUtils.isInteger(S.originalTimezone)?(X=S.originalTimezone,re=new Date(S.getTime()-6e4*(-X+Y))):(X=Y,re=S),this.printDateTime(new T.XML.Calendar({year:re.getFullYear(),month:re.getMonth()+1,day:re.getDate(),hour:re.getHours(),minute:re.getMinutes(),second:re.getSeconds(),fractionalSecond:re.getMilliseconds()/1e3,timezone:X})))},isInstance:function(S,D,L){return T.Util.Type.isDate(S)},CLASS_NAME:"Jsonix.Schema.XSD.DateTimeAsDate"}),T.Schema.XSD.DateTimeAsDate.INSTANCE=new T.Schema.XSD.DateTimeAsDate,T.Schema.XSD.DateTimeAsDate.INSTANCE.LIST=new T.Schema.XSD.List(T.Schema.XSD.DateTimeAsDate.INSTANCE),T.Schema.XSD.Time=T.Class(T.Schema.XSD.Calendar,{name:"Time",typeName:T.Schema.XSD.qname("time"),parse:function(S,D,L,z){return this.parseTime(S)},print:function(S,D,L,z){return this.printTime(S)},CLASS_NAME:"Jsonix.Schema.XSD.Time"}),T.Schema.XSD.Time.INSTANCE=new T.Schema.XSD.Time,T.Schema.XSD.Time.INSTANCE.LIST=new T.Schema.XSD.List(T.Schema.XSD.Time.INSTANCE),T.Schema.XSD.TimeAsDate=T.Class(T.Schema.XSD.Calendar,{name:"TimeAsDate",typeName:T.Schema.XSD.qname("time"),parse:function(S,D,L,z){var X=this.parseTime(S),Y=new Date;Y.setFullYear(1970),Y.setMonth(0),Y.setDate(1),Y.setHours(X.hour),Y.setMinutes(X.minute),Y.setSeconds(X.second),T.Util.Type.isNumber(X.fractionalSecond)&&Y.setMilliseconds(Math.floor(1e3*X.fractionalSecond));var re,J,ie=-Y.getTimezoneOffset();T.Util.NumberUtils.isInteger(X.timezone)?(re=X.timezone,J=!1):(re=ie,J=!0);var Se=new Date(Y.getTime()+6e4*(-re+ie));return Se.originalTimezone=J?null:re,Se},print:function(S,D,L,z){T.Util.Ensure.ensureDate(S);var X=S.getTime();if(X<=-864e5&&X>=864e5)throw new Error("Invalid time ["+S+"].");if(null===S.originalTimezone)return this.printTime(new T.XML.Calendar({hour:S.getHours(),minute:S.getMinutes(),second:S.getSeconds(),fractionalSecond:S.getMilliseconds()/1e3}));var Y,re,J=-S.getTimezoneOffset();T.Util.NumberUtils.isInteger(S.originalTimezone)?(re=S.originalTimezone,Y=new Date(S.getTime()-6e4*(-re+J))):(re=J,Y=S);var ie=Y.getTime();if(ie>=6e4*-J)return this.printTime(new T.XML.Calendar({hour:Y.getHours(),minute:Y.getMinutes(),second:Y.getSeconds(),fractionalSecond:Y.getMilliseconds()/1e3,timezone:re}));var Se=Math.ceil(-ie/36e5),je=Y.getSeconds()+60*Y.getMinutes()+3600*Y.getHours()+3600*Se-60*re;return this.printTime(new T.XML.Calendar({hour:je%86400,minute:je%3600,second:je%60,fractionalSecond:Y.getMilliseconds()/1e3,timezone:60*Se}))},isInstance:function(S,D,L){return T.Util.Type.isDate(S)&&S.getTime()>-864e5&&S.getTime()<864e5},CLASS_NAME:"Jsonix.Schema.XSD.TimeAsDate"}),T.Schema.XSD.TimeAsDate.INSTANCE=new T.Schema.XSD.TimeAsDate,T.Schema.XSD.TimeAsDate.INSTANCE.LIST=new T.Schema.XSD.List(T.Schema.XSD.TimeAsDate.INSTANCE),T.Schema.XSD.Date=T.Class(T.Schema.XSD.Calendar,{name:"Date",typeName:T.Schema.XSD.qname("date"),parse:function(S,D,L,z){return this.parseDate(S)},print:function(S,D,L,z){return this.printDate(S)},CLASS_NAME:"Jsonix.Schema.XSD.Date"}),T.Schema.XSD.Date.INSTANCE=new T.Schema.XSD.Date,T.Schema.XSD.Date.INSTANCE.LIST=new T.Schema.XSD.List(T.Schema.XSD.Date.INSTANCE),T.Schema.XSD.DateAsDate=T.Class(T.Schema.XSD.Calendar,{name:"DateAsDate",typeName:T.Schema.XSD.qname("date"),parse:function(S,D,L,z){var X=this.parseDate(S),Y=new Date;Y.setFullYear(X.year),Y.setMonth(X.month-1),Y.setDate(X.day),Y.setHours(0),Y.setMinutes(0),Y.setSeconds(0),Y.setMilliseconds(0),T.Util.Type.isNumber(X.fractionalSecond)&&Y.setMilliseconds(Math.floor(1e3*X.fractionalSecond));var re,J,ie=-Y.getTimezoneOffset();T.Util.NumberUtils.isInteger(X.timezone)?(re=X.timezone,J=!1):(re=ie,J=!0);var Se=new Date(Y.getTime()+6e4*(-re+ie));return Se.originalTimezone=J?null:re,Se},print:function(S,D,L,z){T.Util.Ensure.ensureDate(S);var X=new Date(S.getTime());if(X.setHours(0),X.setMinutes(0),X.setSeconds(0),X.setMilliseconds(0),null===S.originalTimezone)return this.printDate(new T.XML.Calendar({year:S.getFullYear(),month:S.getMonth()+1,day:S.getDate()}));if(T.Util.NumberUtils.isInteger(S.originalTimezone)){var Y=new Date(S.getTime()-6e4*(-S.originalTimezone-S.getTimezoneOffset()));return this.printDate(new T.XML.Calendar({year:Y.getFullYear(),month:Y.getMonth()+1,day:Y.getDate(),timezone:S.originalTimezone}))}var re=-S.getTime()+X.getTime();if(0===re)return this.printDate(new T.XML.Calendar({year:S.getFullYear(),month:S.getMonth()+1,day:S.getDate()}));var J=re-6e4*S.getTimezoneOffset();if(J>=-432e5)return this.printDate(new T.XML.Calendar({year:S.getFullYear(),month:S.getMonth()+1,day:S.getDate(),timezone:Math.floor(J/6e4)}));var ie=new Date(S.getTime()+864e5);return this.printDate(new T.XML.Calendar({year:ie.getFullYear(),month:ie.getMonth()+1,day:ie.getDate(),timezone:Math.floor(J/6e4)+1440}))},isInstance:function(S,D,L){return T.Util.Type.isDate(S)},CLASS_NAME:"Jsonix.Schema.XSD.DateAsDate"}),T.Schema.XSD.DateAsDate.INSTANCE=new T.Schema.XSD.DateAsDate,T.Schema.XSD.DateAsDate.INSTANCE.LIST=new T.Schema.XSD.List(T.Schema.XSD.DateAsDate.INSTANCE),T.Schema.XSD.GYearMonth=T.Class(T.Schema.XSD.Calendar,{name:"GYearMonth",typeName:T.Schema.XSD.qname("gYearMonth"),CLASS_NAME:"Jsonix.Schema.XSD.GYearMonth",parse:function(S,D,L,z){return this.parseGYearMonth(S,D,L,z)},print:function(S,D,L,z){return this.printGYearMonth(S,D,L,z)}}),T.Schema.XSD.GYearMonth.INSTANCE=new T.Schema.XSD.GYearMonth,T.Schema.XSD.GYearMonth.INSTANCE.LIST=new T.Schema.XSD.List(T.Schema.XSD.GYearMonth.INSTANCE),T.Schema.XSD.GYear=T.Class(T.Schema.XSD.Calendar,{name:"GYear",typeName:T.Schema.XSD.qname("gYear"),CLASS_NAME:"Jsonix.Schema.XSD.GYear",parse:function(S,D,L,z){return this.parseGYear(S,D,L,z)},print:function(S,D,L,z){return this.printGYear(S,D,L,z)}}),T.Schema.XSD.GYear.INSTANCE=new T.Schema.XSD.GYear,T.Schema.XSD.GYear.INSTANCE.LIST=new T.Schema.XSD.List(T.Schema.XSD.GYear.INSTANCE),T.Schema.XSD.GMonthDay=T.Class(T.Schema.XSD.Calendar,{name:"GMonthDay",typeName:T.Schema.XSD.qname("gMonthDay"),CLASS_NAME:"Jsonix.Schema.XSD.GMonthDay",parse:function(S,D,L,z){return this.parseGMonthDay(S,D,L,z)},print:function(S,D,L,z){return this.printGMonthDay(S,D,L,z)}}),T.Schema.XSD.GMonthDay.INSTANCE=new T.Schema.XSD.GMonthDay,T.Schema.XSD.GMonthDay.INSTANCE.LIST=new T.Schema.XSD.List(T.Schema.XSD.GMonthDay.INSTANCE),T.Schema.XSD.GDay=T.Class(T.Schema.XSD.Calendar,{name:"GDay",typeName:T.Schema.XSD.qname("gDay"),CLASS_NAME:"Jsonix.Schema.XSD.GDay",parse:function(S,D,L,z){return this.parseGDay(S,D,L,z)},print:function(S,D,L,z){return this.printGDay(S,D,L,z)}}),T.Schema.XSD.GDay.INSTANCE=new T.Schema.XSD.GDay,T.Schema.XSD.GDay.INSTANCE.LIST=new T.Schema.XSD.List(T.Schema.XSD.GDay.INSTANCE),T.Schema.XSD.GMonth=T.Class(T.Schema.XSD.Calendar,{name:"GMonth",typeName:T.Schema.XSD.qname("gMonth"),CLASS_NAME:"Jsonix.Schema.XSD.GMonth",parse:function(S,D,L,z){return this.parseGMonth(S,D,L,z)},print:function(S,D,L,z){return this.printGMonth(S,D,L,z)}}),T.Schema.XSD.GMonth.INSTANCE=new T.Schema.XSD.GMonth,T.Schema.XSD.GMonth.INSTANCE.LIST=new T.Schema.XSD.List(T.Schema.XSD.GMonth.INSTANCE),T.Schema.XSD.ID=T.Class(T.Schema.XSD.String,{name:"ID",typeName:T.Schema.XSD.qname("ID"),CLASS_NAME:"Jsonix.Schema.XSD.ID"}),T.Schema.XSD.ID.INSTANCE=new T.Schema.XSD.ID,T.Schema.XSD.ID.INSTANCE.LIST=new T.Schema.XSD.List(T.Schema.XSD.ID.INSTANCE),T.Schema.XSD.IDREF=T.Class(T.Schema.XSD.String,{name:"IDREF",typeName:T.Schema.XSD.qname("IDREF"),CLASS_NAME:"Jsonix.Schema.XSD.IDREF"}),T.Schema.XSD.IDREF.INSTANCE=new T.Schema.XSD.IDREF,T.Schema.XSD.IDREF.INSTANCE.LIST=new T.Schema.XSD.List(T.Schema.XSD.IDREF.INSTANCE),T.Schema.XSD.IDREFS=T.Class(T.Schema.XSD.List,{name:"IDREFS",initialize:function(){T.Schema.XSD.List.prototype.initialize.apply(this,[T.Schema.XSD.IDREF.INSTANCE,T.Schema.XSD.qname("IDREFS")," "])},CLASS_NAME:"Jsonix.Schema.XSD.IDREFS"}),T.Schema.XSD.IDREFS.INSTANCE=new T.Schema.XSD.IDREFS,T.Schema.XSI={},T.Schema.XSI.NAMESPACE_URI="http://www.w3.org/2001/XMLSchema-instance",T.Schema.XSI.PREFIX="xsi",T.Schema.XSI.TYPE="type",T.Schema.XSI.NIL="nil",T.Schema.XSI.qname=function(S){return T.Util.Ensure.ensureString(S),new T.XML.QName(T.Schema.XSI.NAMESPACE_URI,S,T.Schema.XSI.PREFIX)},T.Schema.XSI.TYPE_QNAME=T.Schema.XSI.qname(T.Schema.XSI.TYPE),T.Context=T.Class(T.Mapping.Styled,{modules:[],typeInfos:null,typeNameKeyToTypeInfo:null,elementInfos:null,options:null,substitutionMembersMap:null,scopedElementInfosMap:null,supportXsiType:!0,initialize:function(S,D){for(var L in T.Mapping.Styled.prototype.initialize.apply(this,[D]),this.modules=[],this.elementInfos=[],this.typeInfos={},this.typeNameKeyToTypeInfo={},this.registerBuiltinTypeInfos(),this.namespacePrefixes={},this.prefixNamespaces={},this.substitutionMembersMap={},this.scopedElementInfosMap={},T.Util.Type.exists(D)&&(T.Util.Ensure.ensureObject(D),T.Util.Type.isObject(D.namespacePrefixes)&&(this.namespacePrefixes=T.Util.Type.cloneObject(D.namespacePrefixes,{})),T.Util.Type.isBoolean(D.supportXsiType)&&(this.supportXsiType=D.supportXsiType)),this.namespacePrefixes)this.namespacePrefixes.hasOwnProperty(L)&&(p=this.namespacePrefixes[L],this.prefixNamespaces[p]=L);var z,Y;if(T.Util.Type.exists(S))for(T.Util.Ensure.ensureArray(S),z=0;z<S.length;z++)Y=this.createModule(S[z]),this.modules[z]=Y;this.processModules()},createModule:function(S){var D;return S instanceof this.mappingStyle.module?D=S:(S=T.Util.Type.cloneObject(S),D=new this.mappingStyle.module(S,{mappingStyle:this.mappingStyle})),D},registerBuiltinTypeInfos:function(){for(var S=0;S<this.builtinTypeInfos.length;S++)this.registerTypeInfo(this.builtinTypeInfos[S])},processModules:function(){var S;for(S=0;S<this.modules.length;S++)this.modules[S].registerTypeInfos(this);for(S=0;S<this.modules.length;S++)this.modules[S].registerElementInfos(this);for(S=0;S<this.modules.length;S++)this.modules[S].buildTypeInfos(this);for(S=0;S<this.modules.length;S++)this.modules[S].buildElementInfos(this)},registerTypeInfo:function(S){T.Util.Ensure.ensureObject(S);var D=S.name||S.n||null;T.Util.Ensure.ensureString(D),this.typeInfos[D]=S,S.typeName&&S.typeName.key&&(this.typeNameKeyToTypeInfo[S.typeName.key]=S)},resolveTypeInfo:function(S,D){if(T.Util.Type.exists(S)){if(S instanceof T.Model.TypeInfo)return S;if(T.Util.Type.isString(S)){var L;if(S.length>0&&"."===S.charAt(0)){var z=D.name||D.n||void 0;T.Util.Ensure.ensureObject(D,"Type info mapping can only be resolved if module is provided."),T.Util.Ensure.ensureString(z,"Type info mapping can only be resolved if module name is provided."),L=z+S}else L=S;if(this.typeInfos[L])return this.typeInfos[L];throw new Error("Type info ["+L+"] is not known in this context.")}T.Util.Ensure.ensureObject(D,"Type info mapping can only be resolved if module is provided.");var X=D.createTypeInfo(S);return X.build(this,D),X}return null},registerElementInfo:function(S,D){if(T.Util.Ensure.ensureObject(S),this.elementInfos.push(S),T.Util.Type.exists(S.substitutionHead)){var z=S.substitutionHead.key,X=this.substitutionMembersMap[z];T.Util.Type.isArray(X)||(this.substitutionMembersMap[z]=X=[]),X.push(S)}var Y;Y=T.Util.Type.exists(S.scope)?this.resolveTypeInfo(S.scope,D).name:"##global";var re=this.scopedElementInfosMap[Y];T.Util.Type.isObject(re)||(this.scopedElementInfosMap[Y]=re={}),re[S.elementName.key]=S},getTypeInfoByValue:function(S){if(T.Util.Type.exists(S)&&T.Util.Type.isObject(S)){var D=S.TYPE_NAME;if(T.Util.Type.isString(D)){var L=this.getTypeInfoByName(D);if(L)return L}}},getTypeInfoByName:function(S){return this.typeInfos[S]},getTypeInfoByTypeName:function(S){var D=T.XML.QName.fromObjectOrString(S,this);return this.typeNameKeyToTypeInfo[D.key]},getTypeInfoByTypeNameKey:function(S){return this.typeNameKeyToTypeInfo[S]},getElementInfo:function(S,D){if(T.Util.Type.exists(D)){var z=this.scopedElementInfosMap[D.name];if(T.Util.Type.exists(z)){var X=z[S.key];if(T.Util.Type.exists(X))return X}}var re=this.scopedElementInfosMap["##global"];if(T.Util.Type.exists(re)){var J=re[S.key];if(T.Util.Type.exists(J))return J}return null},getSubstitutionMembers:function(S){return this.substitutionMembersMap[T.XML.QName.fromObject(S).key]},createMarshaller:function(){return new this.mappingStyle.marshaller(this)},createUnmarshaller:function(){return new this.mappingStyle.unmarshaller(this)},getNamespaceURI:function(S){return T.Util.Ensure.ensureString(S),this.prefixNamespaces[S]},getPrefix:function(S,D){T.Util.Ensure.ensureString(S);var L=this.namespacePrefixes[S];return T.Util.Type.isString(L)?L:D},builtinTypeInfos:[T.Schema.XSD.AnyType.INSTANCE,T.Schema.XSD.AnySimpleType.INSTANCE,T.Schema.XSD.AnyURI.INSTANCE,T.Schema.XSD.Base64Binary.INSTANCE,T.Schema.XSD.Boolean.INSTANCE,T.Schema.XSD.Byte.INSTANCE,T.Schema.XSD.Calendar.INSTANCE,T.Schema.XSD.DateAsDate.INSTANCE,T.Schema.XSD.Date.INSTANCE,T.Schema.XSD.DateTimeAsDate.INSTANCE,T.Schema.XSD.DateTime.INSTANCE,T.Schema.XSD.Decimal.INSTANCE,T.Schema.XSD.Double.INSTANCE,T.Schema.XSD.Duration.INSTANCE,T.Schema.XSD.Float.INSTANCE,T.Schema.XSD.GDay.INSTANCE,T.Schema.XSD.GMonth.INSTANCE,T.Schema.XSD.GMonthDay.INSTANCE,T.Schema.XSD.GYear.INSTANCE,T.Schema.XSD.GYearMonth.INSTANCE,T.Schema.XSD.HexBinary.INSTANCE,T.Schema.XSD.ID.INSTANCE,T.Schema.XSD.IDREF.INSTANCE,T.Schema.XSD.IDREFS.INSTANCE,T.Schema.XSD.Int.INSTANCE,T.Schema.XSD.Integer.INSTANCE,T.Schema.XSD.Language.INSTANCE,T.Schema.XSD.Long.INSTANCE,T.Schema.XSD.Name.INSTANCE,T.Schema.XSD.NCName.INSTANCE,T.Schema.XSD.NegativeInteger.INSTANCE,T.Schema.XSD.NMToken.INSTANCE,T.Schema.XSD.NMTokens.INSTANCE,T.Schema.XSD.NonNegativeInteger.INSTANCE,T.Schema.XSD.NonPositiveInteger.INSTANCE,T.Schema.XSD.NormalizedString.INSTANCE,T.Schema.XSD.Number.INSTANCE,T.Schema.XSD.PositiveInteger.INSTANCE,T.Schema.XSD.QName.INSTANCE,T.Schema.XSD.Short.INSTANCE,T.Schema.XSD.String.INSTANCE,T.Schema.XSD.Strings.INSTANCE,T.Schema.XSD.TimeAsDate.INSTANCE,T.Schema.XSD.Time.INSTANCE,T.Schema.XSD.Token.INSTANCE,T.Schema.XSD.UnsignedByte.INSTANCE,T.Schema.XSD.UnsignedInt.INSTANCE,T.Schema.XSD.UnsignedLong.INSTANCE,T.Schema.XSD.UnsignedShort.INSTANCE],CLASS_NAME:"Jsonix.Context"}),{Jsonix:T}};if("function"!=typeof $e)if("undefined"!=typeof window||process.browser)en.exports=_t();else{var $e=Ve(255)(en);$e(["xmldom","xmlhttprequest","fs"],_t)}else $e([],_t)},255:(en,wt,Ve)=>{"use strict";en.exports=function($e,nt){var S,D,Me={},fe={},Ie=!1,T=Ve(324);function z(ie,Se){var je;return ie&&"."===ie.charAt(0)&&Se&&(function(ie){var Se,je;for(Se=0;ie[Se];Se+=1)if("."===(je=ie[Se]))ie.splice(Se,1),Se-=1;else if(".."===je){if(1===Se&&(".."===ie[2]||".."===ie[0]))break;Se>0&&(ie.splice(Se-1,2),Se-=2)}}(je=(je=(je=Se.split("/")).slice(0,je.length-1)).concat(ie.split("/"))),ie=je.join("/")),ie}function re(ie,Se,je){var Je,Tt,mt,yt;if(ie)Tt=fe[ie]={},mt={id:ie,uri:__filename,exports:Tt},Je=S(nt,Tt,mt,ie);else{if(Ie)throw new Error("amdefine with no module ID cannot be called more than once per file.");Ie=!0,Je=S(nt,Tt=$e.exports,mt=$e,$e.id)}Se&&(Se=Se.map(function(at){return Je(at)})),void 0!==(yt="function"==typeof je?je.apply(mt.exports,Se):je)&&(mt.exports=yt,ie&&(fe[ie]=mt.exports))}function J(ie,Se,je){Array.isArray(ie)?(je=Se,Se=ie,ie=void 0):"string"!=typeof ie&&(je=ie,ie=Se=void 0),Se&&!Array.isArray(Se)&&(je=Se,Se=void 0),Se||(Se=["require","exports","module"]),ie?Me[ie]=[ie,Se,je]:re(ie,Se,je)}return S=function(ie,Se,je,Je){function Tt(mt,yt){if("string"==typeof mt)return D(ie,Se,je,mt,Je);mt=mt.map(function(at){return D(ie,Se,je,at,Je)}),yt&&process.nextTick(function(){yt.apply(null,mt)})}return Tt.toUrl=function(mt){return 0===mt.indexOf(".")?z(mt,T.dirname(je.filename)):mt},Tt},nt=nt||function(){return $e.require.apply($e,arguments)},D=function(ie,Se,je,Je,Tt){var at,ke,mt=Je.indexOf("!"),yt=Je;if(-1===mt){if("require"===(Je=z(Je,Tt)))return S(ie,Se,je,Tt);if("exports"===Je)return Se;if("module"===Je)return je;if(fe.hasOwnProperty(Je))return fe[Je];if(Me[Je])return re.apply(null,Me[Je]),fe[Je];if(ie)return ie(yt);throw new Error("No module with ID: "+Je)}return at=Je.substring(0,mt),Je=Je.substring(mt+1,Je.length),Je=(ke=D(ie,Se,je,at,Tt)).normalize?ke.normalize(Je,function(ie){return function(Se){return z(Se,ie)}}(Tt)):z(Je,Tt),fe[Je]||ke.load(Je,S(ie,Se,je,Tt),function(ie){function Se(je){fe[ie]=je}return Se.fromText=function(je,Je){throw new Error("amdefine does not implement load.fromText")},Se}(Je),{}),fe[Je]},J.require=function(ie){return fe[ie]?fe[ie]:Me[ie]?(re.apply(null,Me[ie]),fe[ie]):void 0},J.amd={},J}},658:(en,wt)=>{wt.read=function(Ve,_t,$e,nt,Me){var fe,Ie,T=8*Me-nt-1,S=(1<<T)-1,D=S>>1,L=-7,z=$e?Me-1:0,X=$e?-1:1,Y=Ve[_t+z];for(z+=X,fe=Y&(1<<-L)-1,Y>>=-L,L+=T;L>0;fe=256*fe+Ve[_t+z],z+=X,L-=8);for(Ie=fe&(1<<-L)-1,fe>>=-L,L+=nt;L>0;Ie=256*Ie+Ve[_t+z],z+=X,L-=8);if(0===fe)fe=1-D;else{if(fe===S)return Ie?NaN:1/0*(Y?-1:1);Ie+=Math.pow(2,nt),fe-=D}return(Y?-1:1)*Ie*Math.pow(2,fe-nt)},wt.write=function(Ve,_t,$e,nt,Me,fe){var Ie,T,S,D=8*fe-Me-1,L=(1<<D)-1,z=L>>1,X=23===Me?Math.pow(2,-24)-Math.pow(2,-77):0,Y=nt?0:fe-1,re=nt?1:-1,J=_t<0||0===_t&&1/_t<0?1:0;for(_t=Math.abs(_t),isNaN(_t)||_t===1/0?(T=isNaN(_t)?1:0,Ie=L):(Ie=Math.floor(Math.log(_t)/Math.LN2),_t*(S=Math.pow(2,-Ie))<1&&(Ie--,S*=2),(_t+=Ie+z>=1?X/S:X*Math.pow(2,1-z))*S>=2&&(Ie++,S/=2),Ie+z>=L?(T=0,Ie=L):Ie+z>=1?(T=(_t*S-1)*Math.pow(2,Me),Ie+=z):(T=_t*Math.pow(2,z-1)*Math.pow(2,Me),Ie=0));Me>=8;Ve[$e+Y]=255&T,Y+=re,T/=256,Me-=8);for(Ie=Ie<<Me|T,D+=Me;D>0;Ve[$e+Y]=255&Ie,Y+=re,Ie/=256,D-=8);Ve[$e+Y-re]|=128*J}},429:(en,wt)=>{"use strict";function _t(N,H){for(var F=0;F<H.length;F++){var I=H[F];I.enumerable=I.enumerable||!1,I.configurable=!0,"value"in I&&(I.writable=!0),Object.defineProperty(N,I.key,I)}}function $e(N,H,F){return H&&_t(N.prototype,H),F&&_t(N,F),N}function nt(){return(nt=Object.assign||function(N){for(var H=1;H<arguments.length;H++){var F=arguments[H];for(var I in F)Object.prototype.hasOwnProperty.call(F,I)&&(N[I]=F[I])}return N}).apply(this,arguments)}function Me(N,H){N.prototype=Object.create(H.prototype),N.prototype.constructor=N,Ie(N,H)}function fe(N){return(fe=Object.setPrototypeOf?Object.getPrototypeOf:function(F){return F.__proto__||Object.getPrototypeOf(F)})(N)}function Ie(N,H){return(Ie=Object.setPrototypeOf||function(I,G){return I.__proto__=G,I})(N,H)}function T(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(N){return!1}}function S(N,H,F){return(S=T()?Reflect.construct:function(G,$,ae){var me=[null];me.push.apply(me,$);var et=new(Function.bind.apply(G,me));return ae&&Ie(et,ae.prototype),et}).apply(null,arguments)}function L(N){var H="function"==typeof Map?new Map:void 0;return(L=function(I){if(null===I||!function(N){return-1!==Function.toString.call(N).indexOf("[native code]")}(I))return I;if("function"!=typeof I)throw new TypeError("Super expression must either be null or a function");if(void 0!==H){if(H.has(I))return H.get(I);H.set(I,G)}function G(){return S(I,arguments,fe(this).constructor)}return G.prototype=Object.create(I.prototype,{constructor:{value:G,enumerable:!1,writable:!0,configurable:!0}}),Ie(G,I)})(N)}function Y(N,H){(null==H||H>N.length)&&(H=N.length);for(var F=0,I=new Array(H);F<H;F++)I[F]=N[F];return I}function re(N,H){var F="undefined"!=typeof Symbol&&N[Symbol.iterator]||N["@@iterator"];if(F)return(F=F.call(N)).next.bind(F);if(Array.isArray(N)||(F=function(N,H){if(N){if("string"==typeof N)return Y(N,H);var F=Object.prototype.toString.call(N).slice(8,-1);if("Object"===F&&N.constructor&&(F=N.constructor.name),"Map"===F||"Set"===F)return Array.from(N);if("Arguments"===F||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(F))return Y(N,H)}}(N))||H&&N&&"number"==typeof N.length){F&&(N=F);var I=0;return function(){return I>=N.length?{done:!0}:{done:!1,value:N[I++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var J=function(N){function H(){return N.apply(this,arguments)||this}return Me(H,N),H}(L(Error)),ie=function(N){function H(F){return N.call(this,"Invalid DateTime: "+F.toMessage())||this}return Me(H,N),H}(J),Se=function(N){function H(F){return N.call(this,"Invalid Interval: "+F.toMessage())||this}return Me(H,N),H}(J),je=function(N){function H(F){return N.call(this,"Invalid Duration: "+F.toMessage())||this}return Me(H,N),H}(J),Je=function(N){function H(){return N.apply(this,arguments)||this}return Me(H,N),H}(J),Tt=function(N){function H(F){return N.call(this,"Invalid unit "+F)||this}return Me(H,N),H}(J),mt=function(N){function H(){return N.apply(this,arguments)||this}return Me(H,N),H}(J),yt=function(N){function H(){return N.call(this,"Zone is an abstract class")||this}return Me(H,N),H}(J),at="numeric",ke="short",zt="long",Ge={year:at,month:at,day:at},Jn={year:at,month:ke,day:at},tt={year:at,month:ke,day:at,weekday:ke},ne={year:at,month:zt,day:at},we={year:at,month:zt,day:at,weekday:zt},pe={hour:at,minute:at},fn={hour:at,minute:at,second:at},$t={hour:at,minute:at,second:at,timeZoneName:ke},Cn={hour:at,minute:at,second:at,timeZoneName:zt},ar={hour:at,minute:at,hourCycle:"h23"},Ht={hour:at,minute:at,second:at,hourCycle:"h23"},Qt={hour:at,minute:at,second:at,hourCycle:"h23",timeZoneName:ke},zn={hour:at,minute:at,second:at,hourCycle:"h23",timeZoneName:zt},Br={year:at,month:at,day:at,hour:at,minute:at},Dr={year:at,month:at,day:at,hour:at,minute:at,second:at},Ni={year:at,month:ke,day:at,hour:at,minute:at},bn={year:at,month:ke,day:at,hour:at,minute:at,second:at},Or={year:at,month:ke,day:at,weekday:ke,hour:at,minute:at},Fi={year:at,month:zt,day:at,hour:at,minute:at,timeZoneName:ke},ki={year:at,month:zt,day:at,hour:at,minute:at,second:at,timeZoneName:ke},Di={year:at,month:zt,day:at,weekday:zt,hour:at,minute:at,timeZoneName:zt},Yi={year:at,month:zt,day:at,weekday:zt,hour:at,minute:at,second:at,timeZoneName:zt};function Vn(N){return void 0===N}function ai(N){return"number"==typeof N}function xs(N){return"number"==typeof N&&N%1==0}function ad(){try{return"undefined"!=typeof Intl&&!!Intl.RelativeTimeFormat}catch(N){return!1}}function sm(N,H,F){if(0!==N.length)return N.reduce(function(I,G){var $=[H(G),G];return I&&F(I[0],$[0])===I[0]?I:$},null)[1]}function yi(N,H){return Object.prototype.hasOwnProperty.call(N,H)}function Yc(N,H,F){return xs(N)&&N>=H&&N<=F}function om(N,H){void 0===H&&(H=2);var F=N<0?"-":"",I=F?-1*N:N;return""+F+(I.toString().length<H?("0".repeat(H)+I).slice(-H):I.toString())}function Os(N){if(!Vn(N)&&null!==N&&""!==N)return parseInt(N,10)}function am(N){if(!Vn(N)&&null!==N&&""!==N){var H=1e3*parseFloat("0."+N);return Math.floor(H)}}function lm(N,H,F){void 0===F&&(F=!1);var I=Math.pow(10,H);return(F?Math.trunc:Math.round)(N*I)/I}function ld(N){return N%4==0&&(N%100!=0||N%400==0)}function cm(N){return ld(N)?366:365}function py(N,H){var F=function(N,H){return N-12*Math.floor(N/12)}(H-1)+1;return 2===F?ld(N+(H-F)/12)?29:28:[31,null,31,30,31,30,31,31,30,31,30,31][F-1]}function my(N){var H=Date.UTC(N.year,N.month-1,N.day,N.hour,N.minute,N.second,N.millisecond);return N.year<100&&N.year>=0&&(H=new Date(H)).setUTCFullYear(H.getUTCFullYear()-1900),+H}function gy(N){var H=(N+Math.floor(N/4)-Math.floor(N/100)+Math.floor(N/400))%7,F=N-1,I=(F+Math.floor(F/4)-Math.floor(F/100)+Math.floor(F/400))%7;return 4===H||3===I?53:52}function gb(N){return N>99?N:N>60?1900+N:2e3+N}function r2(N,H,F,I){void 0===I&&(I=null);var G=new Date(N),$={hourCycle:"h23",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"};I&&($.timeZone=I);var ae=nt({timeZoneName:H},$),me=new Intl.DateTimeFormat(F,ae).formatToParts(G).find(function(Ee){return"timezonename"===Ee.type.toLowerCase()});return me?me.value:null}function yy(N,H){var F=parseInt(N,10);Number.isNaN(F)&&(F=0);var I=parseInt(H,10)||0;return 60*F+(F<0||Object.is(F,-0)?-I:I)}function pC(N){var H=Number(N);if("boolean"==typeof N||""===N||Number.isNaN(H))throw new mt("Invalid unit value "+N);return H}function vy(N,H){var F={};for(var I in N)if(yi(N,I)){var G=N[I];if(null==G)continue;F[H(I)]=pC(G)}return F}function _y(N,H){var F=Math.trunc(Math.abs(N/60)),I=Math.trunc(Math.abs(N%60)),G=N>=0?"+":"-";switch(H){case"short":return""+G+om(F,2)+":"+om(I,2);case"narrow":return""+G+F+(I>0?":"+I:"");case"techie":return""+G+om(F,2)+om(I,2);default:throw new RangeError("Value format "+H+" is out of range for property format")}}function um(N){return function(N,H){return["hour","minute","second","millisecond"].reduce(function(F,I){return F[I]=N[I],F},{})}(N)}var ei=/[A-Za-z_+-]{1,256}(:?\/[A-Za-z_+-]{1,256}(\/[A-Za-z_+-]{1,256})?)?/,yb=["January","February","March","April","May","June","July","August","September","October","November","December"],vr=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],vb=["J","F","M","A","M","J","J","A","S","O","N","D"];function mC(N){switch(N){case"narrow":return[].concat(vb);case"short":return[].concat(vr);case"long":return[].concat(yb);case"numeric":return["1","2","3","4","5","6","7","8","9","10","11","12"];case"2-digit":return["01","02","03","04","05","06","07","08","09","10","11","12"];default:return null}}var vi=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],In=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],gC=["M","T","W","T","F","S","S"];function s2(N){switch(N){case"narrow":return[].concat(gC);case"short":return[].concat(In);case"long":return[].concat(vi);case"numeric":return["1","2","3","4","5","6","7"];default:return null}}var Yu=["AM","PM"],oU=["Before Christ","Anno Domini"],_b=["BC","AD"],lr=["B","A"];function Do(N){switch(N){case"narrow":return[].concat(lr);case"short":return[].concat(_b);case"long":return[].concat(oU);default:return null}}function a2(N,H){for(var G,F="",I=re(N);!(G=I()).done;){var $=G.value;F+=$.literal?$.val:H($.val)}return F}var l2={D:Ge,DD:Jn,DDD:ne,DDDD:we,t:pe,tt:fn,ttt:$t,tttt:Cn,T:ar,TT:Ht,TTT:Qt,TTTT:zn,f:Br,ff:Ni,fff:Fi,ffff:Di,F:Dr,FF:bn,FFF:ki,FFFF:Yi},Zu=function(){function N(F,I){this.opts=I,this.loc=F,this.systemLoc=null}N.create=function(I,G){return void 0===G&&(G={}),new N(I,G)},N.parseFormat=function(I){for(var G=null,$="",ae=!1,me=[],Ee=0;Ee<I.length;Ee++){var et=I.charAt(Ee);"'"===et?($.length>0&&me.push({literal:ae,val:$}),G=null,$="",ae=!ae):ae||et===G?$+=et:($.length>0&&me.push({literal:!1,val:$}),$=et,G=et)}return $.length>0&&me.push({literal:ae,val:$}),me},N.macroTokenToFormatOpts=function(I){return l2[I]};var H=N.prototype;return H.formatWithSystemDefault=function(I,G){return null===this.systemLoc&&(this.systemLoc=this.loc.redefaultToSystem()),this.systemLoc.dtFormatter(I,nt({},this.opts,G)).format()},H.formatDateTime=function(I,G){return void 0===G&&(G={}),this.loc.dtFormatter(I,nt({},this.opts,G)).format()},H.formatDateTimeParts=function(I,G){return void 0===G&&(G={}),this.loc.dtFormatter(I,nt({},this.opts,G)).formatToParts()},H.resolvedOptions=function(I,G){return void 0===G&&(G={}),this.loc.dtFormatter(I,nt({},this.opts,G)).resolvedOptions()},H.num=function(I,G){if(void 0===G&&(G=0),this.opts.forceSimple)return om(I,G);var $=nt({},this.opts);return G>0&&($.padTo=G),this.loc.numberFormatter($).format(I)},H.formatDateTimeFromString=function(I,G){var $=this,ae="en"===this.loc.listingMode(),me=this.loc.outputCalendar&&"gregory"!==this.loc.outputCalendar,Ee=function(pr,Ms){return $.loc.extract(I,pr,Ms)},et=function(pr){return I.isOffsetFixed&&0===I.offset&&pr.allowZ?"Z":I.isValid?I.zone.formatOffset(I.ts,pr.format):""},Et=function(pr,Ms){return ae?function(N,H){return mC(H)[N.month-1]}(I,pr):Ee(Ms?{month:pr}:{month:pr,day:"numeric"},"month")},Dt=function(pr,Ms){return ae?function(N,H){return s2(H)[N.weekday-1]}(I,pr):Ee(Ms?{weekday:pr}:{weekday:pr,month:"long",day:"numeric"},"weekday")},Wn=function(pr){return ae?function(N,H){return Do(H)[N.year<0?0:1]}(I,pr):Ee({era:pr},"era")};return a2(N.parseFormat(G),function(pr){switch(pr){case"S":return $.num(I.millisecond);case"u":case"SSS":return $.num(I.millisecond,3);case"s":return $.num(I.second);case"ss":return $.num(I.second,2);case"m":return $.num(I.minute);case"mm":return $.num(I.minute,2);case"h":return $.num(I.hour%12==0?12:I.hour%12);case"hh":return $.num(I.hour%12==0?12:I.hour%12,2);case"H":return $.num(I.hour);case"HH":return $.num(I.hour,2);case"Z":return et({format:"narrow",allowZ:$.opts.allowZ});case"ZZ":return et({format:"short",allowZ:$.opts.allowZ});case"ZZZ":return et({format:"techie",allowZ:$.opts.allowZ});case"ZZZZ":return I.zone.offsetName(I.ts,{format:"short",locale:$.loc.locale});case"ZZZZZ":return I.zone.offsetName(I.ts,{format:"long",locale:$.loc.locale});case"z":return I.zoneName;case"a":return ae?function(N){return Yu[N.hour<12?0:1]}(I):Ee({hour:"numeric",hourCycle:"h12"},"dayperiod");case"d":return me?Ee({day:"numeric"},"day"):$.num(I.day);case"dd":return me?Ee({day:"2-digit"},"day"):$.num(I.day,2);case"c":return $.num(I.weekday);case"ccc":return Dt("short",!0);case"cccc":return Dt("long",!0);case"ccccc":return Dt("narrow",!0);case"E":return $.num(I.weekday);case"EEE":return Dt("short",!1);case"EEEE":return Dt("long",!1);case"EEEEE":return Dt("narrow",!1);case"L":return me?Ee({month:"numeric",day:"numeric"},"month"):$.num(I.month);case"LL":return me?Ee({month:"2-digit",day:"numeric"},"month"):$.num(I.month,2);case"LLL":return Et("short",!0);case"LLLL":return Et("long",!0);case"LLLLL":return Et("narrow",!0);case"M":return me?Ee({month:"numeric"},"month"):$.num(I.month);case"MM":return me?Ee({month:"2-digit"},"month"):$.num(I.month,2);case"MMM":return Et("short",!1);case"MMMM":return Et("long",!1);case"MMMMM":return Et("narrow",!1);case"y":return me?Ee({year:"numeric"},"year"):$.num(I.year);case"yy":return me?Ee({year:"2-digit"},"year"):$.num(I.year.toString().slice(-2),2);case"yyyy":return me?Ee({year:"numeric"},"year"):$.num(I.year,4);case"yyyyyy":return me?Ee({year:"numeric"},"year"):$.num(I.year,6);case"G":return Wn("short");case"GG":return Wn("long");case"GGGGG":return Wn("narrow");case"kk":return $.num(I.weekYear.toString().slice(-2),2);case"kkkk":return $.num(I.weekYear,4);case"W":return $.num(I.weekNumber);case"WW":return $.num(I.weekNumber,2);case"o":return $.num(I.ordinal);case"ooo":return $.num(I.ordinal,3);case"q":return $.num(I.quarter);case"qq":return $.num(I.quarter,2);case"X":return $.num(Math.floor(I.ts/1e3));case"x":return $.num(I.ts);default:return function(pr){var Ms=N.macroTokenToFormatOpts(pr);return Ms?$.formatWithSystemDefault(I,Ms):pr}(pr)}})},H.formatDurationFromString=function(I,G){var Dt,$=this,ae=function(Dt){switch(Dt[0]){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":return"hour";case"d":return"day";case"M":return"month";case"y":return"year";default:return null}},Ee=N.parseFormat(G),et=Ee.reduce(function(Et,Dt){return Dt.literal?Et:Et.concat(Dt.val)},[]),Pt=I.shiftTo.apply(I,et.map(ae).filter(function(Et){return Et}));return a2(Ee,(Dt=Pt,function(vn){var Wn=ae(vn);return Wn?$.num(Dt.get(Wn),vn.length):vn}))},N}(),Ns=function(){function N(F,I){this.reason=F,this.explanation=I}return N.prototype.toMessage=function(){return this.explanation?this.reason+": "+this.explanation:this.reason},N}(),hm=function(){function N(){}var H=N.prototype;return H.offsetName=function(I,G){throw new yt},H.formatOffset=function(I,G){throw new yt},H.offset=function(I){throw new yt},H.equals=function(I){throw new yt},$e(N,[{key:"type",get:function(){throw new yt}},{key:"name",get:function(){throw new yt}},{key:"isUniversal",get:function(){throw new yt}},{key:"isValid",get:function(){throw new yt}}]),N}(),yC=null,c2=function(N){function H(){return N.apply(this,arguments)||this}Me(H,N);var F=H.prototype;return F.offsetName=function(G,$){return r2(G,$.format,$.locale)},F.formatOffset=function(G,$){return _y(this.offset(G),$)},F.offset=function(G){return-new Date(G).getTimezoneOffset()},F.equals=function(G){return"system"===G.type},$e(H,[{key:"type",get:function(){return"system"}},{key:"name",get:function(){return(new Intl.DateTimeFormat).resolvedOptions().timeZone}},{key:"isUniversal",get:function(){return!1}},{key:"isValid",get:function(){return!0}}],[{key:"instance",get:function(){return null===yC&&(yC=new H),yC}}]),H}(hm),cU=RegExp("^"+ei.source+"$"),Sy={},u2={year:0,month:1,day:2,hour:3,minute:4,second:5},_i={},Zc=function(N){function H(I){var G;return(G=N.call(this)||this).zoneName=I,G.valid=H.isValidZone(I),G}Me(H,N),H.create=function(G){return _i[G]||(_i[G]=new H(G)),_i[G]},H.resetCache=function(){_i={},Sy={}},H.isValidSpecifier=function(G){return!(!G||!G.match(cU))},H.isValidZone=function(G){try{return new Intl.DateTimeFormat("en-US",{timeZone:G}).format(),!0}catch($){return!1}},H.parseGMTOffset=function(G){if(G){var $=G.match(/^Etc\/GMT(0|[+-]\d{1,2})$/i);if($)return-60*parseInt($[1])}return null};var F=H.prototype;return F.offsetName=function(G,$){return r2(G,$.format,$.locale,this.name)},F.formatOffset=function(G,$){return _y(this.offset(G),$)},F.offset=function(G){var $=new Date(G);if(isNaN($))return NaN;var ae=function(N){return Sy[N]||(Sy[N]=new Intl.DateTimeFormat("en-US",{hourCycle:"h23",timeZone:N,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"})),Sy[N]}(this.name),me=ae.formatToParts?function(N,H){for(var F=N.formatToParts(H),I=[],G=0;G<F.length;G++){var $=F[G],me=$.value,Ee=u2[$.type];Vn(Ee)||(I[Ee]=parseInt(me,10))}return I}(ae,$):function(N,H){var F=N.format(H).replace(/\u200E/g,""),I=/(\d+)\/(\d+)\/(\d+),? (\d+):(\d+):(\d+)/.exec(F);return[I[3],I[1],I[2],I[4],I[5],I[6]]}(ae,$),cr=+$,Lr=cr%1e3;return(my({year:me[0],month:me[1],day:me[2],hour:me[3],minute:me[4],second:me[5],millisecond:0})-(cr-=Lr>=0?Lr:1e3+Lr))/6e4},F.equals=function(G){return"iana"===G.type&&G.name===this.name},$e(H,[{key:"type",get:function(){return"iana"}},{key:"name",get:function(){return this.zoneName}},{key:"isUniversal",get:function(){return!1}},{key:"isValid",get:function(){return this.valid}}]),H}(hm),vC=null,Ll=function(N){function H(I){var G;return(G=N.call(this)||this).fixed=I,G}Me(H,N),H.instance=function(G){return 0===G?H.utcInstance:new H(G)},H.parseSpecifier=function(G){if(G){var $=G.match(/^utc(?:([+-]\d{1,2})(?::(\d{2}))?)?$/i);if($)return new H(yy($[1],$[2]))}return null};var F=H.prototype;return F.offsetName=function(){return this.name},F.formatOffset=function(G,$){return _y(this.fixed,$)},F.offset=function(){return this.fixed},F.equals=function(G){return"fixed"===G.type&&G.fixed===this.fixed},$e(H,[{key:"type",get:function(){return"fixed"}},{key:"name",get:function(){return 0===this.fixed?"UTC":"UTC"+_y(this.fixed,"narrow")}},{key:"isUniversal",get:function(){return!0}},{key:"isValid",get:function(){return!0}}],[{key:"utcInstance",get:function(){return null===vC&&(vC=new H(0)),vC}}]),H}(hm),Xe=function(N){function H(I){var G;return(G=N.call(this)||this).zoneName=I,G}Me(H,N);var F=H.prototype;return F.offsetName=function(){return null},F.formatOffset=function(){return""},F.offset=function(){return NaN},F.equals=function(){return!1},$e(H,[{key:"type",get:function(){return"invalid"}},{key:"name",get:function(){return this.zoneName}},{key:"isUniversal",get:function(){return!1}},{key:"isValid",get:function(){return!1}}]),H}(hm);function cd(N,H){var F;if(Vn(N)||null===N)return H;if(N instanceof hm)return N;if(function(N){return"string"==typeof N}(N)){var I=N.toLowerCase();return"local"===I||"system"===I?H:"utc"===I||"gmt"===I?Ll.utcInstance:null!=(F=Zc.parseGMTOffset(N))?Ll.instance(F):Zc.isValidSpecifier(I)?Zc.create(N):Ll.parseSpecifier(I)||new Xe(N)}return ai(N)?Ll.instance(N):"object"==typeof N&&N.offset&&"number"==typeof N.offset?N:new Xe(N)}var Sb,jt=function(){return Date.now()},yc="system",bb=null,_C=null,bC=null,Zi=function(){function N(){}return N.resetCaches=function(){er.resetCache(),Zc.resetCache()},$e(N,null,[{key:"now",get:function(){return jt},set:function(F){jt=F}},{key:"defaultZone",get:function(){return cd(yc,c2.instance)},set:function(F){yc=F}},{key:"defaultLocale",get:function(){return bb},set:function(F){bb=F}},{key:"defaultNumberingSystem",get:function(){return _C},set:function(F){_C=F}},{key:"defaultOutputCalendar",get:function(){return bC},set:function(F){bC=F}},{key:"throwOnInvalid",get:function(){return Sb},set:function(F){Sb=F}}]),N}(),Tb=["base"],Ty={};function wb(N,H){void 0===H&&(H={});var F=JSON.stringify([N,H]),I=Ty[F];return I||(I=new Intl.DateTimeFormat(N,H),Ty[F]=I),I}var On={},xb={};var xf=null;function Ki(N,H,F,I,G){var $=N.listingMode(F);return"error"===$?null:"en"===$?I(H):G(H)}var d2=function(){function N(F,I,G){if(this.padTo=G.padTo||0,this.floor=G.floor||!1,!I){var $={useGrouping:!1};G.padTo>0&&($.minimumIntegerDigits=G.padTo),this.inf=function(N,H){void 0===H&&(H={});var F=JSON.stringify([N,H]),I=On[F];return I||(I=new Intl.NumberFormat(N,H),On[F]=I),I}(F,$)}}return N.prototype.format=function(I){if(this.inf){var G=this.floor?Math.floor(I):I;return this.inf.format(G)}return om(this.floor?Math.floor(I):lm(I,3),this.padTo)},N}(),f2=function(){function N(F,I,G){var $;if(this.opts=G,F.zone.isUniversal){var ae=F.offset/60*-1,me=ae>=0?"Etc/GMT+"+ae:"Etc/GMT"+ae,Ee=Zc.isValidZone(me);0!==F.offset&&Ee?($=me,this.dt=F):($="UTC",this.dt=G.timeZoneName||0===F.offset?F:ss.fromMillis(F.ts+60*F.offset*1e3))}else"system"===F.zone.type?this.dt=F:(this.dt=F,$=F.zone.name);var et=nt({},this.opts);$&&(et.timeZone=$),this.dtf=wb(I,et)}var H=N.prototype;return H.format=function(){return this.dtf.format(this.dt.toJSDate())},H.formatToParts=function(){return this.dtf.formatToParts(this.dt.toJSDate())},H.resolvedOptions=function(){return this.dtf.resolvedOptions()},N}(),p2=function(){function N(F,I,G){this.opts=nt({style:"long"},G),!I&&ad()&&(this.rtf=function(N,H){void 0===H&&(H={});var I=function(N,H){if(null==N)return{};var G,$,F={},I=Object.keys(N);for($=0;$<I.length;$++)!(H.indexOf(G=I[$])>=0)&&(F[G]=N[G]);return F}(H,Tb),G=JSON.stringify([N,I]),$=xb[G];return $||($=new Intl.RelativeTimeFormat(N,H),xb[G]=$),$}(F,G))}var H=N.prototype;return H.format=function(I,G){return this.rtf?this.rtf.format(I,G):function(N,H,F,I){void 0===F&&(F="always"),void 0===I&&(I=!1);var G={years:["year","yr."],quarters:["quarter","qtr."],months:["month","mo."],weeks:["week","wk."],days:["day","day","days"],hours:["hour","hr."],minutes:["minute","min."],seconds:["second","sec."]},$=-1===["hours","minutes","seconds"].indexOf(N);if("auto"===F&&$){var ae="days"===N;switch(H){case 1:return ae?"tomorrow":"next "+G[N][0];case-1:return ae?"yesterday":"last "+G[N][0];case 0:return ae?"today":"this "+G[N][0]}}var me=Object.is(H,-0)||H<0,Ee=Math.abs(H),et=1===Ee,Pt=G[N],Et=I?et?Pt[1]:Pt[2]||Pt[1]:et?G[N][0]:N;return me?Ee+" "+Et+" ago":"in "+Ee+" "+Et}(G,I,this.opts.numeric,"long"!==this.opts.style)},H.formatToParts=function(I,G){return this.rtf?this.rtf.formatToParts(I,G):[]},N}(),er=function(){function N(F,I,G,$){var ae=function(N){var H=N.indexOf("-u-");if(-1===H)return[N];var F,I=N.substring(0,H);try{F=wb(N).resolvedOptions()}catch(me){F=wb(I).resolvedOptions()}return[I,F.numberingSystem,F.calendar]}(F),Ee=ae[1],et=ae[2];this.locale=ae[0],this.numberingSystem=I||Ee||null,this.outputCalendar=G||et||null,this.intl=function(N,H,F){return(F||H)&&(N+="-u",F&&(N+="-ca-"+F),H&&(N+="-nu-"+H)),N}(this.locale,this.numberingSystem,this.outputCalendar),this.weekdaysCache={format:{},standalone:{}},this.monthsCache={format:{},standalone:{}},this.meridiemCache=null,this.eraCache={},this.specifiedLocale=$,this.fastNumbersCached=null}N.fromOpts=function(I){return N.create(I.locale,I.numberingSystem,I.outputCalendar,I.defaultToEN)},N.create=function(I,G,$,ae){void 0===ae&&(ae=!1);var me=I||Zi.defaultLocale;return new N(me||(ae?"en-US":xf||(xf=(new Intl.DateTimeFormat).resolvedOptions().locale)),G||Zi.defaultNumberingSystem,$||Zi.defaultOutputCalendar,me)},N.resetCache=function(){xf=null,Ty={},On={},xb={}},N.fromObject=function(I){var G=void 0===I?{}:I;return N.create(G.locale,G.numberingSystem,G.outputCalendar)};var H=N.prototype;return H.listingMode=function(I){return this.isEnglish()&&!(null!==this.numberingSystem&&"latn"!==this.numberingSystem||null!==this.outputCalendar&&"gregory"!==this.outputCalendar)?"en":"intl"},H.clone=function(I){return I&&0!==Object.getOwnPropertyNames(I).length?N.create(I.locale||this.specifiedLocale,I.numberingSystem||this.numberingSystem,I.outputCalendar||this.outputCalendar,I.defaultToEN||!1):this},H.redefaultToEN=function(I){return void 0===I&&(I={}),this.clone(nt({},I,{defaultToEN:!0}))},H.redefaultToSystem=function(I){return void 0===I&&(I={}),this.clone(nt({},I,{defaultToEN:!1}))},H.months=function(I,G,$){var ae=this;return void 0===G&&(G=!1),void 0===$&&($=!0),Ki(this,I,$,mC,function(){var me=G?{month:I,day:"numeric"}:{month:I},Ee=G?"format":"standalone";return ae.monthsCache[Ee][I]||(ae.monthsCache[Ee][I]=function(N){for(var H=[],F=1;F<=12;F++){var I=ss.utc(2016,F,1);H.push(ae.extract(I,me,"month"))}return H}()),ae.monthsCache[Ee][I]})},H.weekdays=function(I,G,$){var ae=this;return void 0===G&&(G=!1),void 0===$&&($=!0),Ki(this,I,$,s2,function(){var me=G?{weekday:I,year:"numeric",month:"long",day:"numeric"}:{weekday:I},Ee=G?"format":"standalone";return ae.weekdaysCache[Ee][I]||(ae.weekdaysCache[Ee][I]=function(N){for(var H=[],F=1;F<=7;F++){var I=ss.utc(2016,11,13+F);H.push(ae.extract(I,me,"weekday"))}return H}()),ae.weekdaysCache[Ee][I]})},H.meridiems=function(I){var G=this;return void 0===I&&(I=!0),Ki(this,void 0,I,function(){return Yu},function(){if(!G.meridiemCache){var $={hour:"numeric",hourCycle:"h12"};G.meridiemCache=[ss.utc(2016,11,13,9),ss.utc(2016,11,13,19)].map(function(ae){return G.extract(ae,$,"dayperiod")})}return G.meridiemCache})},H.eras=function(I,G){var $=this;return void 0===G&&(G=!0),Ki(this,I,G,Do,function(){var ae={era:I};return $.eraCache[I]||($.eraCache[I]=[ss.utc(-40,1,1),ss.utc(2017,1,1)].map(function(me){return $.extract(me,ae,"era")})),$.eraCache[I]})},H.extract=function(I,G,$){var Ee=this.dtFormatter(I,G).formatToParts().find(function(et){return et.type.toLowerCase()===$});return Ee?Ee.value:null},H.numberFormatter=function(I){return void 0===I&&(I={}),new d2(this.intl,I.forceSimple||this.fastNumbers,I)},H.dtFormatter=function(I,G){return void 0===G&&(G={}),new f2(I,this.intl,G)},H.relFormatter=function(I){return void 0===I&&(I={}),new p2(this.intl,this.isEnglish(),I)},H.isEnglish=function(){return"en"===this.locale||"en-us"===this.locale.toLowerCase()||new Intl.DateTimeFormat(this.intl).resolvedOptions().locale.startsWith("en-us")},H.equals=function(I){return this.locale===I.locale&&this.numberingSystem===I.numberingSystem&&this.outputCalendar===I.outputCalendar},$e(N,[{key:"fastNumbers",get:function(){return null==this.fastNumbersCached&&(this.fastNumbersCached=function(N){return(!N.numberingSystem||"latn"===N.numberingSystem)&&("latn"===N.numberingSystem||!N.locale||N.locale.startsWith("en")||"latn"===new Intl.DateTimeFormat(N.intl).resolvedOptions().numberingSystem)}(this)),this.fastNumbersCached}}]),N}();function dm(){for(var N=arguments.length,H=new Array(N),F=0;F<N;F++)H[F]=arguments[F];var I=H.reduce(function(G,$){return G+$.source},"");return RegExp("^"+I+"$")}function Ef(){for(var N=arguments.length,H=new Array(N),F=0;F<N;F++)H[F]=arguments[F];return function(I){return H.reduce(function(G,$){var ae=G[0],me=G[1],et=$(I,G[2]),Et=et[1],Dt=et[2];return[nt({},ae,et[0]),me||Et,Dt]},[{},null,1]).slice(0,2)}}function Ol(N){if(null==N)return[null,null];for(var H=arguments.length,F=new Array(H>1?H-1:0),I=1;I<H;I++)F[I-1]=arguments[I];for(var G=0,$=F;G<$.length;G++){var ae=$[G],me=ae[0],Ee=ae[1],et=me.exec(N);if(et)return Ee(et)}return[null,null]}function di(){for(var N=arguments.length,H=new Array(N),F=0;F<N;F++)H[F]=arguments[F];return function(I,G){var ae,$={};for(ae=0;ae<H.length;ae++)$[H[ae]]=Os(I[G+ae]);return[$,null,G+ae]}}var fm=/(?:(Z)|([+-]\d\d)(?::?(\d\d))?)/,pm=/(\d\d)(?::?(\d\d)(?::?(\d\d)(?:[.,](\d{1,30}))?)?)?/,wy=RegExp(""+pm.source+fm.source+"?"),Cy=RegExp("(?:T"+wy.source+")?"),g2=di("weekYear","weekNumber","weekDay"),Qe=di("year","ordinal"),Eb=RegExp(pm.source+" ?(?:"+fm.source+"|("+ei.source+"))?"),SC=RegExp("(?: "+Eb.source+")?");function ud(N,H,F){var I=N[H];return Vn(I)?F:Os(I)}function Yt(N,H){return[{year:ud(N,H),month:ud(N,H+1,1),day:ud(N,H+2,1)},null,H+3]}function hd(N,H){return[{hours:ud(N,H,0),minutes:ud(N,H+1,0),seconds:ud(N,H+2,0),milliseconds:am(N[H+3])},null,H+4]}function dd(N,H){var F=!N[H]&&!N[H+1],I=yy(N[H+1],N[H+2]);return[{},F?null:Ll.instance(I),H+3]}function Ze(N,H){return[{},N[H]?Zc.create(N[H]):null,H+1]}var Ao=RegExp("^T?"+pm.source+"$"),Wo=/^-?P(?:(?:(-?\d{1,9})Y)?(?:(-?\d{1,9})M)?(?:(-?\d{1,9})W)?(?:(-?\d{1,9})D)?(?:T(?:(-?\d{1,9})H)?(?:(-?\d{1,9})M)?(?:(-?\d{1,20})(?:[.,](-?\d{1,9}))?S)?)?)$/;function Qu(N){var I=N[2],G=N[3],$=N[4],ae=N[5],me=N[6],Ee=N[7],et=N[8],Pt="-"===N[0][0],Et=Ee&&"-"===Ee[0],Dt=function(Wn,cr){return void 0===cr&&(cr=!1),void 0!==Wn&&(cr||Wn&&Pt)?-Wn:Wn};return[{years:Dt(Os(N[1])),months:Dt(Os(I)),weeks:Dt(Os(G)),days:Dt(Os($)),hours:Dt(Os(ae)),minutes:Dt(Os(me)),seconds:Dt(Os(Ee),"-0"===Ee),milliseconds:Dt(am(et),Et)}]}var fd={GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};function ca(N,H,F,I,G,$,ae){var me={year:2===H.length?gb(Os(H)):Os(H),month:vr.indexOf(F)+1,day:Os(I),hour:Os(G),minute:Os($)};return ae&&(me.second=Os(ae)),N&&(me.weekday=N.length>3?vi.indexOf(N)+1:In.indexOf(N)+1),me}var v2=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|(?:([+-]\d\d)(\d\d)))$/;function rl(N){var vn,Ee=N[8],et=N[9],Pt=N[10],Et=N[11],Dt=ca(N[1],N[4],N[3],N[2],N[5],N[6],N[7]);return vn=Ee?fd[Ee]:et?0:yy(Pt,Et),[Dt,new Ll(vn)]}var Pr=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d\d) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d\d):(\d\d):(\d\d) GMT$/,ji=/^(Monday|Tuesday|Wedsday|Thursday|Friday|Saturday|Sunday), (\d\d)-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d\d) (\d\d):(\d\d):(\d\d) GMT$/,Ia=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( \d|\d\d) (\d\d):(\d\d):(\d\d) (\d{4})$/;function eh(N){return[ca(N[1],N[4],N[3],N[2],N[5],N[6],N[7]),Ll.utcInstance]}function Xs(N){return[ca(N[1],N[7],N[2],N[3],N[4],N[5],N[6]),Ll.utcInstance]}var pd=dm(/([+-]\d{6}|\d{4})(?:-?(\d\d)(?:-?(\d\d))?)?/,Cy),ys=dm(/(\d{4})-?W(\d\d)(?:-?(\d))?/,Cy),gm=dm(/(\d{4})-?(\d{3})/,Cy),Mf=dm(wy),_r=Ef(Yt,hd,dd),xy=Ef(g2,hd,dd),Df=Ef(Qe,hd,dd),Mb=Ef(hd,dd),Nl=Ef(hd),_2=dm(/(\d{4})-(\d\d)-(\d\d)/,SC),b2=dm(Eb),Ey=Ef(Yt,hd,dd,Ze),Db=Ef(hd,dd,Ze),th={weeks:{days:7,hours:168,minutes:10080,seconds:604800,milliseconds:6048e5},days:{hours:24,minutes:1440,seconds:86400,milliseconds:864e5},hours:{minutes:60,seconds:3600,milliseconds:36e5},minutes:{seconds:60,milliseconds:6e4},seconds:{milliseconds:1e3}},Io=nt({years:{quarters:4,months:12,weeks:52,days:365,hours:8760,minutes:525600,seconds:31536e3,milliseconds:31536e6},quarters:{months:3,weeks:13,days:91,hours:2184,minutes:131040,seconds:7862400,milliseconds:78624e5},months:{weeks:4,days:30,hours:720,minutes:43200,seconds:2592e3,milliseconds:2592e6}},th),il=365.2425,qo=30.436875,Fl=nt({years:{quarters:4,months:12,weeks:il/7,days:il,hours:24*il,minutes:525949.2,seconds:525949.2*60,milliseconds:525949.2*60*1e3},quarters:{months:3,weeks:il/28,days:il/4,hours:24*il/4,minutes:131487.3,seconds:525949.2*60/4,milliseconds:7889237999.999999},months:{weeks:qo/7,days:qo,hours:24*qo,minutes:43829.1,seconds:2629746,milliseconds:2629746e3}},th),nh=["years","quarters","months","weeks","days","hours","minutes","seconds","milliseconds"],Dy=nh.slice(0).reverse();function vc(N,H,F){void 0===F&&(F=!1);var I={values:F?H.values:nt({},N.values,H.values||{}),loc:N.loc.clone(H.loc),conversionAccuracy:H.conversionAccuracy||N.conversionAccuracy};return new Xo(I)}function TC(N,H,F,I,G){var $=N[G][F],ae=H[F]/$,Ee=Math.sign(ae)!==Math.sign(I[G])&&0!==I[G]&&Math.abs(ae)<=1?function(N){return N<0?Math.floor(N):Math.ceil(N)}(ae):Math.trunc(ae);I[G]+=Ee,H[F]-=Ee*$}var Xo=function(){function N(F){var I="longterm"===F.conversionAccuracy||!1;this.values=F.values,this.loc=F.loc||er.create(),this.conversionAccuracy=I?"longterm":"casual",this.invalid=F.invalid||null,this.matrix=I?Fl:Io,this.isLuxonDuration=!0}N.fromMillis=function(I,G){return N.fromObject({milliseconds:I},G)},N.fromObject=function(I,G){if(void 0===G&&(G={}),null==I||"object"!=typeof I)throw new mt("Duration.fromObject: argument expected to be an object, got "+(null===I?"null":typeof I));return new N({values:vy(I,N.normalizeUnit),loc:er.fromObject(G),conversionAccuracy:G.conversionAccuracy})},N.fromISO=function(I,G){var ae=function(N){return Ol(N,[Wo,Qu])}(I)[0];return ae?N.fromObject(ae,G):N.invalid("unparsable",'the input "'+I+"\" can't be parsed as ISO 8601")},N.fromISOTime=function(I,G){var ae=function(N){return Ol(N,[Ao,Nl])}(I)[0];return ae?N.fromObject(ae,G):N.invalid("unparsable",'the input "'+I+"\" can't be parsed as ISO 8601")},N.invalid=function(I,G){if(void 0===G&&(G=null),!I)throw new mt("need to specify a reason the Duration is invalid");var $=I instanceof Ns?I:new Ns(I,G);if(Zi.throwOnInvalid)throw new je($);return new N({invalid:$})},N.normalizeUnit=function(I){var G={year:"years",years:"years",quarter:"quarters",quarters:"quarters",month:"months",months:"months",week:"weeks",weeks:"weeks",day:"days",days:"days",hour:"hours",hours:"hours",minute:"minutes",minutes:"minutes",second:"seconds",seconds:"seconds",millisecond:"milliseconds",milliseconds:"milliseconds"}[I&&I.toLowerCase()];if(!G)throw new Tt(I);return G},N.isDuration=function(I){return I&&I.isLuxonDuration||!1};var H=N.prototype;return H.toFormat=function(I,G){void 0===G&&(G={});var $=nt({},G,{floor:!1!==G.round&&!1!==G.floor});return this.isValid?Zu.create(this.loc,$).formatDurationFromString(this,I):"Invalid Duration"},H.toObject=function(){return this.isValid?nt({},this.values):{}},H.toISO=function(){if(!this.isValid)return null;var I="P";return 0!==this.years&&(I+=this.years+"Y"),(0!==this.months||0!==this.quarters)&&(I+=this.months+3*this.quarters+"M"),0!==this.weeks&&(I+=this.weeks+"W"),0!==this.days&&(I+=this.days+"D"),(0!==this.hours||0!==this.minutes||0!==this.seconds||0!==this.milliseconds)&&(I+="T"),0!==this.hours&&(I+=this.hours+"H"),0!==this.minutes&&(I+=this.minutes+"M"),(0!==this.seconds||0!==this.milliseconds)&&(I+=lm(this.seconds+this.milliseconds/1e3,3)+"S"),"P"===I&&(I+="T0S"),I},H.toISOTime=function(I){if(void 0===I&&(I={}),!this.isValid)return null;var G=this.toMillis();if(G<0||G>=864e5)return null;I=nt({suppressMilliseconds:!1,suppressSeconds:!1,includePrefix:!1,format:"extended"},I);var $=this.shiftTo("hours","minutes","seconds","milliseconds"),ae="basic"===I.format?"hhmm":"hh:mm";(!I.suppressSeconds||0!==$.seconds||0!==$.milliseconds)&&(ae+="basic"===I.format?"ss":":ss",(!I.suppressMilliseconds||0!==$.milliseconds)&&(ae+=".SSS"));var me=$.toFormat(ae);return I.includePrefix&&(me="T"+me),me},H.toJSON=function(){return this.toISO()},H.toString=function(){return this.toISO()},H.toMillis=function(){return this.as("milliseconds")},H.valueOf=function(){return this.toMillis()},H.plus=function(I){if(!this.isValid)return this;for(var me,G=md(I),$={},ae=re(nh);!(me=ae()).done;){var Ee=me.value;(yi(G.values,Ee)||yi(this.values,Ee))&&($[Ee]=G.get(Ee)+this.get(Ee))}return vc(this,{values:$},!0)},H.minus=function(I){if(!this.isValid)return this;var G=md(I);return this.plus(G.negate())},H.mapUnits=function(I){if(!this.isValid)return this;for(var G={},$=0,ae=Object.keys(this.values);$<ae.length;$++){var me=ae[$];G[me]=pC(I(this.values[me],me))}return vc(this,{values:G},!0)},H.get=function(I){return this[N.normalizeUnit(I)]},H.set=function(I){return this.isValid?vc(this,{values:nt({},this.values,vy(I,N.normalizeUnit))}):this},H.reconfigure=function(I){var G=void 0===I?{}:I,me=G.conversionAccuracy,et={loc:this.loc.clone({locale:G.locale,numberingSystem:G.numberingSystem})};return me&&(et.conversionAccuracy=me),vc(this,et)},H.as=function(I){return this.isValid?this.shiftTo(I).get(I):NaN},H.normalize=function(){if(!this.isValid)return this;var I=this.toObject();return function(N,H){Dy.reduce(function(F,I){return Vn(H[I])?F:(F&&TC(N,H,F,H,I),I)},null)}(this.matrix,I),vc(this,{values:I},!0)},H.shiftTo=function(){for(var I=arguments.length,G=new Array(I),$=0;$<I;$++)G[$]=arguments[$];if(!this.isValid)return this;if(0===G.length)return this;G=G.map(function(Ms){return N.normalizeUnit(Ms)});for(var et,Et,ae={},me={},Ee=this.toObject(),Pt=re(nh);!(Et=Pt()).done;){var Dt=Et.value;if(G.indexOf(Dt)>=0){et=Dt;var vn=0;for(var Wn in me)vn+=this.matrix[Wn][Dt]*me[Wn],me[Wn]=0;ai(Ee[Dt])&&(vn+=Ee[Dt]);var cr=Math.trunc(vn);for(var Lr in ae[Dt]=cr,me[Dt]=vn-cr,Ee)nh.indexOf(Lr)>nh.indexOf(Dt)&&TC(this.matrix,Ee,Lr,ae,Dt)}else ai(Ee[Dt])&&(me[Dt]=Ee[Dt])}for(var pr in me)0!==me[pr]&&(ae[et]+=pr===et?me[pr]:me[pr]/this.matrix[et][pr]);return vc(this,{values:ae},!0).normalize()},H.negate=function(){if(!this.isValid)return this;for(var I={},G=0,$=Object.keys(this.values);G<$.length;G++){var ae=$[G];I[ae]=-this.values[ae]}return vc(this,{values:I},!0)},H.equals=function(I){if(!this.isValid||!I.isValid||!this.loc.equals(I.loc))return!1;for(var ae,$=re(nh);!(ae=$()).done;){var me=ae.value;if(et=I.values[me],!(void 0===(Ee=this.values[me])||0===Ee?void 0===et||0===et:Ee===et))return!1}var Ee,et;return!0},$e(N,[{key:"locale",get:function(){return this.isValid?this.loc.locale:null}},{key:"numberingSystem",get:function(){return this.isValid?this.loc.numberingSystem:null}},{key:"years",get:function(){return this.isValid?this.values.years||0:NaN}},{key:"quarters",get:function(){return this.isValid?this.values.quarters||0:NaN}},{key:"months",get:function(){return this.isValid?this.values.months||0:NaN}},{key:"weeks",get:function(){return this.isValid?this.values.weeks||0:NaN}},{key:"days",get:function(){return this.isValid?this.values.days||0:NaN}},{key:"hours",get:function(){return this.isValid?this.values.hours||0:NaN}},{key:"minutes",get:function(){return this.isValid?this.values.minutes||0:NaN}},{key:"seconds",get:function(){return this.isValid?this.values.seconds||0:NaN}},{key:"milliseconds",get:function(){return this.isValid?this.values.milliseconds||0:NaN}},{key:"isValid",get:function(){return null===this.invalid}},{key:"invalidReason",get:function(){return this.invalid?this.invalid.reason:null}},{key:"invalidExplanation",get:function(){return this.invalid?this.invalid.explanation:null}}]),N}();function md(N){if(ai(N))return Xo.fromMillis(N);if(Xo.isDuration(N))return N;if("object"==typeof N)return Xo.fromObject(N);throw new mt("Unknown duration argument "+N+" of type "+typeof N)}var Ay="Invalid Interval",Iy=function(){function N(F){this.s=F.start,this.e=F.end,this.invalid=F.invalid||null,this.isLuxonInterval=!0}N.invalid=function(I,G){if(void 0===G&&(G=null),!I)throw new mt("need to specify a reason the Interval is invalid");var $=I instanceof Ns?I:new Ns(I,G);if(Zi.throwOnInvalid)throw new Se($);return new N({invalid:$})},N.fromDateTimes=function(I,G){var $=yd(I),ae=yd(G),me=function(N,H){return N&&N.isValid?H&&H.isValid?H<N?Iy.invalid("end before start","The end of an interval must be after its start, but you had start="+N.toISO()+" and end="+H.toISO()):null:Iy.invalid("missing or invalid end"):Iy.invalid("missing or invalid start")}($,ae);return null==me?new N({start:$,end:ae}):me},N.after=function(I,G){var $=md(G),ae=yd(I);return N.fromDateTimes(ae,ae.plus($))},N.before=function(I,G){var $=md(G),ae=yd(I);return N.fromDateTimes(ae.minus($),ae)},N.fromISO=function(I,G){var $=(I||"").split("/",2),ae=$[0],me=$[1];if(ae&&me){var Ee,et,Pt,Et;try{et=(Ee=ss.fromISO(ae,G)).isValid}catch(Wn){et=!1}try{Et=(Pt=ss.fromISO(me,G)).isValid}catch(Wn){Et=!1}if(et&&Et)return N.fromDateTimes(Ee,Pt);if(et){var Dt=Xo.fromISO(me,G);if(Dt.isValid)return N.after(Ee,Dt)}else if(Et){var vn=Xo.fromISO(ae,G);if(vn.isValid)return N.before(Pt,vn)}}return N.invalid("unparsable",'the input "'+I+"\" can't be parsed as ISO 8601")},N.isInterval=function(I){return I&&I.isLuxonInterval||!1};var H=N.prototype;return H.length=function(I){return void 0===I&&(I="milliseconds"),this.isValid?this.toDuration.apply(this,[I]).get(I):NaN},H.count=function(I){if(void 0===I&&(I="milliseconds"),!this.isValid)return NaN;var G=this.start.startOf(I),$=this.end.startOf(I);return Math.floor($.diff(G,I).get(I))+1},H.hasSame=function(I){return!!this.isValid&&(this.isEmpty()||this.e.minus(1).hasSame(this.s,I))},H.isEmpty=function(){return this.s.valueOf()===this.e.valueOf()},H.isAfter=function(I){return!!this.isValid&&this.s>I},H.isBefore=function(I){return!!this.isValid&&this.e<=I},H.contains=function(I){return!!this.isValid&&this.s<=I&&this.e>I},H.set=function(I){var G=void 0===I?{}:I;return this.isValid?N.fromDateTimes(G.start||this.s,G.end||this.e):this},H.splitAt=function(){var I=this;if(!this.isValid)return[];for(var G=arguments.length,$=new Array(G),ae=0;ae<G;ae++)$[ae]=arguments[ae];for(var me=$.map(yd).filter(function(vn){return I.contains(vn)}).sort(),Ee=[],et=this.s,Pt=0;et<this.e;){var Et=me[Pt]||this.e,Dt=+Et>+this.e?this.e:Et;Ee.push(N.fromDateTimes(et,Dt)),et=Dt,Pt+=1}return Ee},H.splitBy=function(I){var G=md(I);if(!this.isValid||!G.isValid||0===G.as("milliseconds"))return[];for(var me,$=this.s,ae=1,Ee=[];$<this.e;){var et=this.start.plus(G.mapUnits(function(Pt){return Pt*ae}));Ee.push(N.fromDateTimes($,me=+et>+this.e?this.e:et)),$=me,ae+=1}return Ee},H.divideEqually=function(I){return this.isValid?this.splitBy(this.length()/I).slice(0,I):[]},H.overlaps=function(I){return this.e>I.s&&this.s<I.e},H.abutsStart=function(I){return!!this.isValid&&+this.e==+I.s},H.abutsEnd=function(I){return!!this.isValid&&+I.e==+this.s},H.engulfs=function(I){return!!this.isValid&&this.s<=I.s&&this.e>=I.e},H.equals=function(I){return!(!this.isValid||!I.isValid)&&this.s.equals(I.s)&&this.e.equals(I.e)},H.intersection=function(I){if(!this.isValid)return this;var G=this.s>I.s?this.s:I.s,$=this.e<I.e?this.e:I.e;return G>=$?null:N.fromDateTimes(G,$)},H.union=function(I){return this.isValid?N.fromDateTimes(this.s<I.s?this.s:I.s,this.e>I.e?this.e:I.e):this},N.merge=function(I){var G=I.sort(function(me,Ee){return me.s-Ee.s}).reduce(function(me,Ee){var et=me[0],Pt=me[1];return Pt?Pt.overlaps(Ee)||Pt.abutsStart(Ee)?[et,Pt.union(Ee)]:[et.concat([Pt]),Ee]:[et,Ee]},[[],null]),$=G[0],ae=G[1];return ae&&$.push(ae),$},N.xor=function(I){for(var G,Dt,$=null,ae=0,me=[],Ee=I.map(function(Wn){return[{time:Wn.s,type:"s"},{time:Wn.e,type:"e"}]}),Et=re((G=Array.prototype).concat.apply(G,Ee).sort(function(Wn,cr){return Wn.time-cr.time}));!(Dt=Et()).done;){var vn=Dt.value;1===(ae+="s"===vn.type?1:-1)?$=vn.time:($&&+$!=+vn.time&&me.push(N.fromDateTimes($,vn.time)),$=null)}return N.merge(me)},H.difference=function(){for(var I=this,G=arguments.length,$=new Array(G),ae=0;ae<G;ae++)$[ae]=arguments[ae];return N.xor([this].concat($)).map(function(me){return I.intersection(me)}).filter(function(me){return me&&!me.isEmpty()})},H.toString=function(){return this.isValid?"["+this.s.toISO()+" \u2013 "+this.e.toISO()+")":Ay},H.toISO=function(I){return this.isValid?this.s.toISO(I)+"/"+this.e.toISO(I):Ay},H.toISODate=function(){return this.isValid?this.s.toISODate()+"/"+this.e.toISODate():Ay},H.toISOTime=function(I){return this.isValid?this.s.toISOTime(I)+"/"+this.e.toISOTime(I):Ay},H.toFormat=function(I,G){var ae=(void 0===G?{}:G).separator,me=void 0===ae?" \u2013 ":ae;return this.isValid?""+this.s.toFormat(I)+me+this.e.toFormat(I):Ay},H.toDuration=function(I,G){return this.isValid?this.e.diff(this.s,I,G):Xo.invalid(this.invalidReason)},H.mapEndpoints=function(I){return N.fromDateTimes(I(this.s),I(this.e))},$e(N,[{key:"start",get:function(){return this.isValid?this.s:null}},{key:"end",get:function(){return this.isValid?this.e:null}},{key:"isValid",get:function(){return null===this.invalidReason}},{key:"invalidReason",get:function(){return this.invalid?this.invalid.reason:null}},{key:"invalidExplanation",get:function(){return this.invalid?this.invalid.explanation:null}}]),N}(),Ry=function(){function N(){}return N.hasDST=function(F){void 0===F&&(F=Zi.defaultZone);var I=ss.now().setZone(F).set({month:12});return!F.isUniversal&&I.offset!==I.set({month:6}).offset},N.isValidIANAZone=function(F){return Zc.isValidSpecifier(F)&&Zc.isValidZone(F)},N.normalizeZone=function(F){return cd(F,Zi.defaultZone)},N.months=function(F,I){void 0===F&&(F="long");var G=void 0===I?{}:I,$=G.locale,me=G.numberingSystem,et=G.locObj,Et=G.outputCalendar;return((void 0===et?null:et)||er.create(void 0===$?null:$,void 0===me?null:me,void 0===Et?"gregory":Et)).months(F)},N.monthsFormat=function(F,I){void 0===F&&(F="long");var G=void 0===I?{}:I,$=G.locale,me=G.numberingSystem,et=G.locObj,Et=G.outputCalendar;return((void 0===et?null:et)||er.create(void 0===$?null:$,void 0===me?null:me,void 0===Et?"gregory":Et)).months(F,!0)},N.weekdays=function(F,I){void 0===F&&(F="long");var G=void 0===I?{}:I,$=G.locale,me=G.numberingSystem,et=G.locObj;return((void 0===et?null:et)||er.create(void 0===$?null:$,void 0===me?null:me,null)).weekdays(F)},N.weekdaysFormat=function(F,I){void 0===F&&(F="long");var G=void 0===I?{}:I,$=G.locale,me=G.numberingSystem,et=G.locObj;return((void 0===et?null:et)||er.create(void 0===$?null:$,void 0===me?null:me,null)).weekdays(F,!0)},N.meridiems=function(F){var G=(void 0===F?{}:F).locale;return er.create(void 0===G?null:G).meridiems()},N.eras=function(F,I){void 0===F&&(F="short");var $=(void 0===I?{}:I).locale;return er.create(void 0===$?null:$,null,"gregory").eras(F)},N.features=function(){return{relative:ad()}},N}();function S2(N,H){var F=function($){return $.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf()},I=F(H)-F(N);return Math.floor(Xo.fromMillis(I).as("days"))}var wC={arab:"[\u0660-\u0669]",arabext:"[\u06f0-\u06f9]",bali:"[\u1b50-\u1b59]",beng:"[\u09e6-\u09ef]",deva:"[\u0966-\u096f]",fullwide:"[\uff10-\uff19]",gujr:"[\u0ae6-\u0aef]",hanidec:"[\u3007|\u4e00|\u4e8c|\u4e09|\u56db|\u4e94|\u516d|\u4e03|\u516b|\u4e5d]",khmr:"[\u17e0-\u17e9]",knda:"[\u0ce6-\u0cef]",laoo:"[\u0ed0-\u0ed9]",limb:"[\u1946-\u194f]",mlym:"[\u0d66-\u0d6f]",mong:"[\u1810-\u1819]",mymr:"[\u1040-\u1049]",orya:"[\u0b66-\u0b6f]",tamldec:"[\u0be6-\u0bef]",telu:"[\u0c66-\u0c6f]",thai:"[\u0e50-\u0e59]",tibt:"[\u0f20-\u0f29]",latn:"\\d"},T2={arab:[1632,1641],arabext:[1776,1785],bali:[6992,7001],beng:[2534,2543],deva:[2406,2415],fullwide:[65296,65303],gujr:[2790,2799],khmr:[6112,6121],knda:[3302,3311],laoo:[3792,3801],limb:[6470,6479],mlym:[3430,3439],mong:[6160,6169],mymr:[4160,4169],orya:[2918,2927],tamldec:[3046,3055],telu:[3174,3183],thai:[3664,3673],tibt:[3872,3881]},_U=wC.hanidec.replace(/[\[|\]]/g,"").split("");function _c(N,H){return void 0===H&&(H=""),new RegExp(""+wC[N.numberingSystem||"latn"]+H)}function fi(N,H){return void 0===H&&(H=function(I){return I}),{regex:N,deser:function(I){return H(function(N){var H=parseInt(N,10);if(isNaN(H)){H="";for(var F=0;F<N.length;F++){var I=N.charCodeAt(F);if(-1!==N[F].search(wC.hanidec))H+=_U.indexOf(N[F]);else for(var G in T2){var $=T2[G],ae=$[0];I>=ae&&I<=$[1]&&(H+=I-ae)}}return parseInt(H,10)}return H}(I[0]))}}}var Py="( |"+String.fromCharCode(160)+")",w2=new RegExp(Py,"g");function TU(N){return N.replace(/\./g,"\\.?").replace(w2,Py)}function C2(N){return N.replace(/\./g,"").replace(w2," ").toLowerCase()}function ho(N,H){return null===N?null:{regex:RegExp(N.map(TU).join("|")),deser:function(I){var G=I[0];return N.findIndex(function($){return C2(G)===C2($)})+H}}}function Ab(N,H){return{regex:N,deser:function(I){return yy(I[1],I[2])},groups:H}}function Ci(N){return{regex:N,deser:function(F){return F[0]}}}function xC(N){return N.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}var E2={year:{"2-digit":"yy",numeric:"yyyyy"},month:{numeric:"M","2-digit":"MM",short:"MMM",long:"MMMM"},day:{numeric:"d","2-digit":"dd"},weekday:{short:"EEE",long:"EEEE"},dayperiod:"a",dayPeriod:"a",hour:{numeric:"h","2-digit":"hh"},minute:{numeric:"m","2-digit":"mm"},second:{numeric:"s","2-digit":"ss"}},Rb=null;function Ly(N,H,F){var I=function(N,H){var F;return(F=Array.prototype).concat.apply(F,N.map(function(I){return function(N,H){if(N.literal)return N;var F=Zu.macroTokenToFormatOpts(N.val);if(!F)return N;var $=Zu.create(H,F).formatDateTimeParts((Rb||(Rb=ss.fromMillis(1555555555555)),Rb)).map(function(ae){return function(N,H,F){var I=N.type;if("literal"===I)return{literal:!0,val:N.value};var ae=E2[I];return"object"==typeof ae&&(ae=ae[F[I]]),ae?{literal:!1,val:ae}:void 0}(ae,0,F)});return $.includes(void 0)?N:$}(I,H)}))}(Zu.parseFormat(F),N),G=I.map(function(Lr){return function(N,H){var F=_c(H),I=_c(H,"{2}"),G=_c(H,"{3}"),$=_c(H,"{4}"),ae=_c(H,"{6}"),me=_c(H,"{1,2}"),Ee=_c(H,"{1,3}"),et=_c(H,"{1,6}"),Pt=_c(H,"{1,9}"),Et=_c(H,"{2,4}"),Dt=_c(H,"{4,6}"),vn=function(pr){return{regex:RegExp(xC(pr.val)),deser:function(Sm){return Sm[0]},literal:!0}},cr=function(pr){if(N.literal)return vn(pr);switch(pr.val){case"G":return ho(H.eras("short",!1),0);case"GG":return ho(H.eras("long",!1),0);case"y":return fi(et);case"yy":return fi(Et,gb);case"yyyy":return fi($);case"yyyyy":return fi(Dt);case"yyyyyy":return fi(ae);case"M":return fi(me);case"MM":return fi(I);case"MMM":return ho(H.months("short",!0,!1),1);case"MMMM":return ho(H.months("long",!0,!1),1);case"L":return fi(me);case"LL":return fi(I);case"LLL":return ho(H.months("short",!1,!1),1);case"LLLL":return ho(H.months("long",!1,!1),1);case"d":return fi(me);case"dd":return fi(I);case"o":return fi(Ee);case"ooo":return fi(G);case"HH":return fi(I);case"H":return fi(me);case"hh":return fi(I);case"h":return fi(me);case"mm":return fi(I);case"m":case"q":return fi(me);case"qq":return fi(I);case"s":return fi(me);case"ss":return fi(I);case"S":return fi(Ee);case"SSS":return fi(G);case"u":return Ci(Pt);case"a":return ho(H.meridiems(),0);case"kkkk":return fi($);case"kk":return fi(Et,gb);case"W":return fi(me);case"WW":return fi(I);case"E":case"c":return fi(F);case"EEE":return ho(H.weekdays("short",!1,!1),1);case"EEEE":return ho(H.weekdays("long",!1,!1),1);case"ccc":return ho(H.weekdays("short",!0,!1),1);case"cccc":return ho(H.weekdays("long",!0,!1),1);case"Z":case"ZZ":return Ab(new RegExp("([+-]"+me.source+")(?::("+I.source+"))?"),2);case"ZZZ":return Ab(new RegExp("([+-]"+me.source+")("+I.source+")?"),2);case"z":return Ci(/[a-z_+-/]{1,256}?/i);default:return vn(pr)}}(N)||{invalidReason:"missing Intl.DateTimeFormat.formatToParts support"};return cr.token=N,cr}(Lr,N)}),$=G.find(function(Lr){return Lr.invalidReason});if($)return{input:H,tokens:I,invalidReason:$.invalidReason};var ae=function(N){return["^"+N.map(function(F){return F.regex}).reduce(function(F,I){return F+"("+I.source+")"},"")+"$",N]}(G),Ee=ae[1],et=RegExp(ae[0],"i"),Pt=function(N,H,F){var I=N.match(H);if(I){var G={},$=1;for(var ae in F)if(yi(F,ae)){var me=F[ae],Ee=me.groups?me.groups+1:1;!me.literal&&me.token&&(G[me.token.val[0]]=me.deser(I.slice($,$+Ee))),$+=Ee}return[I,G]}return[I,{}]}(H,et,Ee),Et=Pt[0],Dt=Pt[1],vn=Dt?function(N){var F;return F=Vn(N.Z)?Vn(N.z)?null:Zc.create(N.z):new Ll(N.Z),Vn(N.q)||(N.M=3*(N.q-1)+1),Vn(N.h)||(N.h<12&&1===N.a?N.h+=12:12===N.h&&0===N.a&&(N.h=0)),0===N.G&&N.y&&(N.y=-N.y),Vn(N.u)||(N.S=am(N.u)),[Object.keys(N).reduce(function(G,$){var ae=function($){switch($){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":case"H":return"hour";case"d":return"day";case"o":return"ordinal";case"L":case"M":return"month";case"y":return"year";case"E":case"c":return"weekday";case"W":return"weekNumber";case"k":return"weekYear";case"q":return"quarter";default:return null}}($);return ae&&(G[ae]=N[$]),G},{}),F]}(Dt):[null,null],Wn=vn[0],cr=vn[1];if(yi(Dt,"a")&&yi(Dt,"H"))throw new Je("Can't include meridiem when specifying 24-hour format");return{input:H,tokens:I,regex:et,rawMatches:Et,matches:Dt,result:Wn,zone:cr}}var Oy=[0,31,59,90,120,151,181,212,243,273,304,334],A2=[0,31,60,91,121,152,182,213,244,274,305,335];function Kr(N,H){return new Ns("unit out of range","you specified "+H+" (of type "+typeof H+") as a "+N+", which is invalid")}function I2(N,H,F){var I=new Date(Date.UTC(N,H-1,F)).getUTCDay();return 0===I?7:I}function Pb(N,H,F){return F+(ld(N)?A2:Oy)[H-1]}function IC(N,H){var F=ld(N)?A2:Oy,I=F.findIndex(function($){return $<H});return{month:I+1,day:H-F[I]}}function is(N){var me,H=N.year,F=N.month,I=N.day,G=Pb(H,F,I),$=I2(H,F,I),ae=Math.floor((G-$+10)/7);return ae<1?ae=gy(me=H-1):ae>gy(H)?(me=H+1,ae=1):me=H,nt({weekYear:me,weekNumber:ae,weekday:$},um(N))}function RC(N){var me,H=N.weekYear,F=N.weekNumber,I=N.weekday,G=I2(H,1,4),$=cm(H),ae=7*F+I-G-3;ae<1?ae+=cm(me=H-1):ae>$?(me=H+1,ae-=cm(H)):me=H;var Ee=IC(me,ae);return nt({year:me,month:Ee.month,day:Ee.day},um(N))}function PC(N){var H=N.year;return nt({year:H,ordinal:Pb(H,N.month,N.day)},um(N))}function _m(N){var H=N.year,I=IC(H,N.ordinal);return nt({year:H,month:I.month,day:I.day},um(N))}function Ny(N){var H=xs(N.year),F=Yc(N.month,1,12),I=Yc(N.day,1,py(N.year,N.month));return H?F?!I&&Kr("day",N.day):Kr("month",N.month):Kr("year",N.year)}function gd(N){var H=N.hour,F=N.minute,I=N.second,G=N.millisecond,$=Yc(H,0,23)||24===H&&0===F&&0===I&&0===G,ae=Yc(F,0,59),me=Yc(I,0,59),Ee=Yc(G,0,999);return $?ae?me?!Ee&&Kr("millisecond",G):Kr("second",I):Kr("minute",F):Kr("hour",H)}var $o="Invalid DateTime",Lb=864e13;function Rf(N){return new Ns("unsupported zone",'the zone "'+N.name+'" is not supported')}function Ob(N){return null===N.weekData&&(N.weekData=is(N.c)),N.weekData}function al(N,H){var F={ts:N.ts,zone:N.zone,c:N.c,o:N.o,loc:N.loc,invalid:N.invalid};return new ss(nt({},F,H,{old:F}))}function Nb(N,H,F){var I=N-60*H*1e3,G=F.offset(I);if(H===G)return[I,H];var $=F.offset(I-=60*(G-H)*1e3);return G===$?[I,G]:[N-60*Math.min(G,$)*1e3,Math.max(G,$)]}function Fy(N,H){var F=new Date(N+=60*H*1e3);return{year:F.getUTCFullYear(),month:F.getUTCMonth()+1,day:F.getUTCDate(),hour:F.getUTCHours(),minute:F.getUTCMinutes(),second:F.getUTCSeconds(),millisecond:F.getUTCMilliseconds()}}function jn(N,H,F){return Nb(my(N),H,F)}function P2(N,H){var F=N.o,I=N.c.year+Math.trunc(H.years),G=N.c.month+Math.trunc(H.months)+3*Math.trunc(H.quarters),$=nt({},N.c,{year:I,month:G,day:Math.min(N.c.day,py(I,G))+Math.trunc(H.days)+7*Math.trunc(H.weeks)}),ae=Xo.fromObject({years:H.years-Math.trunc(H.years),quarters:H.quarters-Math.trunc(H.quarters),months:H.months-Math.trunc(H.months),weeks:H.weeks-Math.trunc(H.weeks),days:H.days-Math.trunc(H.days),hours:H.hours,minutes:H.minutes,seconds:H.seconds,milliseconds:H.milliseconds}).as("milliseconds"),Ee=Nb(my($),F,N.zone),et=Ee[0],Pt=Ee[1];return 0!==ae&&(Pt=N.zone.offset(et+=ae)),{ts:et,o:Pt}}function bm(N,H,F,I,G){var $=F.setZone,ae=F.zone;if(N&&0!==Object.keys(N).length){var Ee=ss.fromObject(N,nt({},F,{zone:H||ae}));return $?Ee:Ee.setZone(ae)}return ss.invalid(new Ns("unparsable",'the input "'+G+"\" can't be parsed as "+I))}function Pf(N,H,F){return void 0===F&&(F=!0),N.isValid?Zu.create(er.create("en-US"),{allowZ:F,forceSimple:!0}).formatDateTimeFromString(N,H):null}function LC(N,H){var F=H.suppressSeconds,G=H.suppressMilliseconds,ae=H.includeOffset,me=H.includePrefix,Ee=void 0!==me&&me,et=H.includeZone,Pt=void 0!==et&&et,Et=H.spaceZone,vn=H.format,Wn=void 0===vn?"extended":vn,cr="basic"===Wn?"HHmm":"HH:mm";(!(void 0!==F&&F)||0!==N.second||0!==N.millisecond)&&(cr+="basic"===Wn?"ss":":ss",(!(void 0!==G&&G)||0!==N.millisecond)&&(cr+=".SSS")),(Pt||ae)&&void 0!==Et&&Et&&(cr+=" "),Pt?cr+="z":ae&&(cr+="basic"===Wn?"ZZZ":"ZZ");var Lr=Pf(N,cr);return Ee&&(Lr="T"+Lr),Lr}var Fb={month:1,day:1,hour:0,minute:0,second:0,millisecond:0},L2={weekNumber:1,weekday:1,hour:0,minute:0,second:0,millisecond:0},O2={ordinal:1,hour:0,minute:0,second:0,millisecond:0},bt=["year","month","day","hour","minute","second","millisecond"],$r=["weekYear","weekNumber","weekday","hour","minute","second","millisecond"],Ut=["year","ordinal","hour","minute","second","millisecond"];function Es(N){var H={year:"year",years:"year",month:"month",months:"month",day:"day",days:"day",hour:"hour",hours:"hour",minute:"minute",minutes:"minute",quarter:"quarter",quarters:"quarter",second:"second",seconds:"second",millisecond:"millisecond",milliseconds:"millisecond",weekday:"weekday",weekdays:"weekday",weeknumber:"weekNumber",weeksnumber:"weekNumber",weeknumbers:"weekNumber",weekyear:"weekYear",weekyears:"weekYear",ordinal:"ordinal"}[N.toLowerCase()];if(!H)throw new Tt(N);return H}function kb(N,H){var $,ae,F=cd(H.zone,Zi.defaultZone),I=er.fromObject(H),G=Zi.now();if(Vn(N.year))$=G;else{for(var Ee,me=re(bt);!(Ee=me()).done;){var et=Ee.value;Vn(N[et])&&(N[et]=Fb[et])}var Pt=Ny(N)||gd(N);if(Pt)return ss.invalid(Pt);var Dt=jn(N,F.offset(G),F);$=Dt[0],ae=Dt[1]}return new ss({ts:$,zone:F,loc:I,o:ae})}function Lf(N,H,F){var I=!!Vn(F.round)||F.round,G=function(Et,Dt){return Et=lm(Et,I||F.calendary?0:2,!0),H.loc.clone(F).relFormatter(F).format(Et,Dt)},$=function(Et){return F.calendary?H.hasSame(N,Et)?0:H.startOf(Et).diff(N.startOf(Et),Et).get(Et):H.diff(N,Et).get(Et)};if(F.unit)return G($(F.unit),F.unit);for(var me,ae=re(F.units);!(me=ae()).done;){var Ee=me.value,et=$(Ee);if(Math.abs(et)>=1)return G(et,Ee)}return G(N>H?-0:0,F.units[F.units.length-1])}function Vl(N){var F,H={};return N.length>0&&"object"==typeof N[N.length-1]?(H=N[N.length-1],F=Array.from(N).slice(0,N.length-1)):F=Array.from(N),[H,F]}var ss=function(){function N(F){var I=F.zone||Zi.defaultZone,G=F.invalid||(Number.isNaN(F.ts)?new Ns("invalid input"):null)||(I.isValid?null:Rf(I));this.ts=Vn(F.ts)?Zi.now():F.ts;var $=null,ae=null;if(!G)if(F.old&&F.old.ts===this.ts&&F.old.zone.equals(I)){var Ee=[F.old.c,F.old.o];$=Ee[0],ae=Ee[1]}else{var et=I.offset(this.ts);$=Fy(this.ts,et),$=(G=Number.isNaN($.year)?new Ns("invalid input"):null)?null:$,ae=G?null:et}this._zone=I,this.loc=F.loc||er.create(),this.invalid=G,this.weekData=null,this.c=$,this.o=ae,this.isLuxonDateTime=!0}N.now=function(){return new N({})},N.local=function(){var I=Vl(arguments),G=I[0],$=I[1],ae=$[0],me=$[1],Ee=$[2],et=$[3],Pt=$[4],Et=$[5],Dt=$[6];return kb({year:ae,month:me,day:Ee,hour:et,minute:Pt,second:Et,millisecond:Dt},G)},N.utc=function(){var I=Vl(arguments),G=I[0],$=I[1],ae=$[0],me=$[1],Ee=$[2],et=$[3],Pt=$[4],Et=$[5],Dt=$[6];return G.zone=Ll.utcInstance,kb({year:ae,month:me,day:Ee,hour:et,minute:Pt,second:Et,millisecond:Dt},G)},N.fromJSDate=function(I,G){void 0===G&&(G={});var $=function(N){return"[object Date]"===Object.prototype.toString.call(N)}(I)?I.valueOf():NaN;if(Number.isNaN($))return N.invalid("invalid input");var ae=cd(G.zone,Zi.defaultZone);return ae.isValid?new N({ts:$,zone:ae,loc:er.fromObject(G)}):N.invalid(Rf(ae))},N.fromMillis=function(I,G){if(void 0===G&&(G={}),ai(I))return I<-Lb||I>Lb?N.invalid("Timestamp out of range"):new N({ts:I,zone:cd(G.zone,Zi.defaultZone),loc:er.fromObject(G)});throw new mt("fromMillis requires a numerical input, but received a "+typeof I+" with value "+I)},N.fromSeconds=function(I,G){if(void 0===G&&(G={}),ai(I))return new N({ts:1e3*I,zone:cd(G.zone,Zi.defaultZone),loc:er.fromObject(G)});throw new mt("fromSeconds requires a numerical input")},N.fromObject=function(I,G){void 0===G&&(G={}),I=I||{};var $=cd(G.zone,Zi.defaultZone);if(!$.isValid)return N.invalid(Rf($));var ae=Zi.now(),me=$.offset(ae),Ee=vy(I,Es),et=!Vn(Ee.ordinal),Pt=!Vn(Ee.year),Et=!Vn(Ee.month)||!Vn(Ee.day),Dt=Pt||Et,vn=Ee.weekYear||Ee.weekNumber,Wn=er.fromObject(G);if((Dt||et)&&vn)throw new Je("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(Et&&et)throw new Je("Can't mix ordinal dates with month/day");var Lr,pr,cr=vn||Ee.weekday&&!Dt,Ms=Fy(ae,me);cr?(Lr=$r,pr=L2,Ms=is(Ms)):et?(Lr=Ut,pr=O2,Ms=PC(Ms)):(Lr=bt,pr=Fb);for(var Vb,Sm=!1,ky=re(Lr);!(Vb=ky()).done;){var Of=Vb.value;Vn(Ee[Of])?Ee[Of]=Sm?pr[Of]:Ms[Of]:Sm=!0}var OC=(cr?function(N){var H=xs(N.weekYear),F=Yc(N.weekNumber,1,gy(N.weekYear)),I=Yc(N.weekday,1,7);return H?F?!I&&Kr("weekday",N.weekday):Kr("week",N.week):Kr("weekYear",N.weekYear)}(Ee):et?function(N){var H=xs(N.year),F=Yc(N.ordinal,1,cm(N.year));return H?!F&&Kr("ordinal",N.ordinal):Kr("year",N.year)}(Ee):Ny(Ee))||gd(Ee);if(OC)return N.invalid(OC);var Jc=jn(cr?RC(Ee):et?_m(Ee):Ee,me,$),Bb=new N({ts:Jc[0],zone:$,o:Jc[1],loc:Wn});return Ee.weekday&&Dt&&I.weekday!==Bb.weekday?N.invalid("mismatched weekday","you can't specify both a weekday of "+Ee.weekday+" and a date of "+Bb.toISO()):Bb},N.fromISO=function(I,G){void 0===G&&(G={});var $=function(N){return Ol(N,[pd,_r],[ys,xy],[gm,Df],[Mf,Mb])}(I);return bm($[0],$[1],G,"ISO 8601",I)},N.fromRFC2822=function(I,G){void 0===G&&(G={});var $=function(N){return Ol(function(N){return N.replace(/\([^)]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim()}(N),[v2,rl])}(I);return bm($[0],$[1],G,"RFC 2822",I)},N.fromHTTP=function(I,G){void 0===G&&(G={});var $=function(N){return Ol(N,[Pr,eh],[ji,eh],[Ia,Xs])}(I);return bm($[0],$[1],G,"HTTP",G)},N.fromFormat=function(I,G,$){if(void 0===$&&($={}),Vn(I)||Vn(G))throw new mt("fromFormat requires an input string and a format");var me=$.locale,et=$.numberingSystem,Dt=function(N,H,F){var I=Ly(N,H,F);return[I.result,I.zone,I.invalidReason]}(er.fromOpts({locale:void 0===me?null:me,numberingSystem:void 0===et?null:et,defaultToEN:!0}),I,G),vn=Dt[0],Wn=Dt[1],cr=Dt[2];return cr?N.invalid(cr):bm(vn,Wn,$,"format "+G,I)},N.fromString=function(I,G,$){return void 0===$&&($={}),N.fromFormat(I,G,$)},N.fromSQL=function(I,G){void 0===G&&(G={});var $=function(N){return Ol(N,[_2,Ey],[b2,Db])}(I);return bm($[0],$[1],G,"SQL",I)},N.invalid=function(I,G){if(void 0===G&&(G=null),!I)throw new mt("need to specify a reason the DateTime is invalid");var $=I instanceof Ns?I:new Ns(I,G);if(Zi.throwOnInvalid)throw new ie($);return new N({invalid:$})},N.isDateTime=function(I){return I&&I.isLuxonDateTime||!1};var H=N.prototype;return H.get=function(I){return this[I]},H.resolvedLocaleOptions=function(I){void 0===I&&(I={});var G=Zu.create(this.loc.clone(I),I).resolvedOptions(this);return{locale:G.locale,numberingSystem:G.numberingSystem,outputCalendar:G.calendar}},H.toUTC=function(I,G){return void 0===I&&(I=0),void 0===G&&(G={}),this.setZone(Ll.instance(I),G)},H.toLocal=function(){return this.setZone(Zi.defaultZone)},H.setZone=function(I,G){var $=void 0===G?{}:G,ae=$.keepLocalTime,me=void 0!==ae&&ae,Ee=$.keepCalendarTime,et=void 0!==Ee&&Ee;if((I=cd(I,Zi.defaultZone)).equals(this.zone))return this;if(I.isValid){var Pt=this.ts;if(me||et){var Et=I.offset(this.ts);Pt=jn(this.toObject(),Et,I)[0]}return al(this,{ts:Pt,zone:I})}return N.invalid(Rf(I))},H.reconfigure=function(I){var G=void 0===I?{}:I;return al(this,{loc:this.loc.clone({locale:G.locale,numberingSystem:G.numberingSystem,outputCalendar:G.outputCalendar})})},H.setLocale=function(I){return this.reconfigure({locale:I})},H.set=function(I){if(!this.isValid)return this;var Et,G=vy(I,Es),$=!Vn(G.weekYear)||!Vn(G.weekNumber)||!Vn(G.weekday),ae=!Vn(G.ordinal),me=!Vn(G.year),Ee=!Vn(G.month)||!Vn(G.day);if((me||Ee||ae)&&(G.weekYear||G.weekNumber))throw new Je("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(Ee&&ae)throw new Je("Can't mix ordinal dates with month/day");$?Et=RC(nt({},is(this.c),G)):Vn(G.ordinal)?(Et=nt({},this.toObject(),G),Vn(G.day)&&(Et.day=Math.min(py(Et.year,Et.month),Et.day))):Et=_m(nt({},PC(this.c),G));var Dt=jn(Et,this.o,this.zone);return al(this,{ts:Dt[0],o:Dt[1]})},H.plus=function(I){return this.isValid?al(this,P2(this,md(I))):this},H.minus=function(I){return this.isValid?al(this,P2(this,md(I).negate())):this},H.startOf=function(I){if(!this.isValid)return this;var G={},$=Xo.normalizeUnit(I);switch($){case"years":G.month=1;case"quarters":case"months":G.day=1;case"weeks":case"days":G.hour=0;case"hours":G.minute=0;case"minutes":G.second=0;case"seconds":G.millisecond=0}if("weeks"===$&&(G.weekday=1),"quarters"===$){var ae=Math.ceil(this.month/3);G.month=3*(ae-1)+1}return this.set(G)},H.endOf=function(I){var G;return this.isValid?this.plus((G={},G[I]=1,G)).startOf(I).minus(1):this},H.toFormat=function(I,G){return void 0===G&&(G={}),this.isValid?Zu.create(this.loc.redefaultToEN(G)).formatDateTimeFromString(this,I):$o},H.toLocaleString=function(I,G){return void 0===I&&(I=Ge),void 0===G&&(G={}),this.isValid?Zu.create(this.loc.clone(G),I).formatDateTime(this):$o},H.toLocaleParts=function(I){return void 0===I&&(I={}),this.isValid?Zu.create(this.loc.clone(I),I).formatDateTimeParts(this):[]},H.toISO=function(I){return void 0===I&&(I={}),this.isValid?this.toISODate(I)+"T"+this.toISOTime(I):null},H.toISODate=function(I){var $=(void 0===I?{}:I).format,me="basic"===(void 0===$?"extended":$)?"yyyyMMdd":"yyyy-MM-dd";return this.year>9999&&(me="+"+me),Pf(this,me)},H.toISOWeekDate=function(){return Pf(this,"kkkk-'W'WW-c")},H.toISOTime=function(I){var G=void 0===I?{}:I,$=G.suppressMilliseconds,me=G.suppressSeconds,et=G.includeOffset,Et=G.includePrefix,vn=G.format;return LC(this,{suppressSeconds:void 0!==me&&me,suppressMilliseconds:void 0!==$&&$,includeOffset:void 0===et||et,includePrefix:void 0!==Et&&Et,format:void 0===vn?"extended":vn})},H.toRFC2822=function(){return Pf(this,"EEE, dd LLL yyyy HH:mm:ss ZZZ",!1)},H.toHTTP=function(){return Pf(this.toUTC(),"EEE, dd LLL yyyy HH:mm:ss 'GMT'")},H.toSQLDate=function(){return Pf(this,"yyyy-MM-dd")},H.toSQLTime=function(I){var G=void 0===I?{}:I,$=G.includeOffset,me=G.includeZone;return LC(this,{includeOffset:void 0===$||$,includeZone:void 0!==me&&me,spaceZone:!0})},H.toSQL=function(I){return void 0===I&&(I={}),this.isValid?this.toSQLDate()+" "+this.toSQLTime(I):null},H.toString=function(){return this.isValid?this.toISO():$o},H.valueOf=function(){return this.toMillis()},H.toMillis=function(){return this.isValid?this.ts:NaN},H.toSeconds=function(){return this.isValid?this.ts/1e3:NaN},H.toJSON=function(){return this.toISO()},H.toBSON=function(){return this.toJSDate()},H.toObject=function(I){if(void 0===I&&(I={}),!this.isValid)return{};var G=nt({},this.c);return I.includeConfig&&(G.outputCalendar=this.outputCalendar,G.numberingSystem=this.loc.numberingSystem,G.locale=this.loc.locale),G},H.toJSDate=function(){return new Date(this.isValid?this.ts:NaN)},H.diff=function(I,G,$){if(void 0===G&&(G="milliseconds"),void 0===$&&($={}),!this.isValid||!I.isValid)return Xo.invalid("created by diffing an invalid DateTime");var ae=nt({locale:this.locale,numberingSystem:this.numberingSystem},$),me=function(N){return Array.isArray(N)?N:[N]}(G).map(Xo.normalizeUnit),Ee=I.valueOf()>this.valueOf(),Et=function(N,H,F,I){var Et,G=function(N,H,F){for(var $,ae,G={},me=0,Ee=[["years",function(cr,Lr){return Lr.year-cr.year}],["quarters",function(cr,Lr){return Lr.quarter-cr.quarter}],["months",function(cr,Lr){return Lr.month-cr.month+12*(Lr.year-cr.year)}],["weeks",function(cr,Lr){var pr=S2(cr,Lr);return(pr-pr%7)/7}],["days",S2]];me<Ee.length;me++){var et=Ee[me],Pt=et[0],Et=et[1];if(F.indexOf(Pt)>=0){var Dt;$=Pt;var Wn,vn=Et(N,H);(ae=N.plus(((Dt={})[Pt]=vn,Dt)))>H?(N=N.plus(((Wn={})[Pt]=vn-1,Wn)),vn-=1):N=ae,G[Pt]=vn}}return[N,G,ae,$]}(N,H,F),$=G[0],ae=G[1],me=G[2],Ee=G[3],et=H-$,Pt=F.filter(function(Wn){return["hours","minutes","seconds","milliseconds"].indexOf(Wn)>=0});0===Pt.length&&(me<H&&(me=$.plus(((Et={})[Ee]=1,Et))),me!==$&&(ae[Ee]=(ae[Ee]||0)+et/(me-$)));var vn,Dt=Xo.fromObject(ae,I);return Pt.length>0?(vn=Xo.fromMillis(et,I)).shiftTo.apply(vn,Pt).plus(Dt):Dt}(Ee?this:I,Ee?I:this,me,ae);return Ee?Et.negate():Et},H.diffNow=function(I,G){return void 0===I&&(I="milliseconds"),void 0===G&&(G={}),this.diff(N.now(),I,G)},H.until=function(I){return this.isValid?Iy.fromDateTimes(this,I):this},H.hasSame=function(I,G){if(!this.isValid)return!1;var $=I.valueOf(),ae=this.setZone(I.zone,{keepLocalTime:!0});return ae.startOf(G)<=$&&$<=ae.endOf(G)},H.equals=function(I){return this.isValid&&I.isValid&&this.valueOf()===I.valueOf()&&this.zone.equals(I.zone)&&this.loc.equals(I.loc)},H.toRelative=function(I){if(void 0===I&&(I={}),!this.isValid)return null;var G=I.base||N.fromObject({},{zone:this.zone}),$=I.padding?this<G?-I.padding:I.padding:0,ae=["years","months","days","hours","minutes","seconds"],me=I.unit;return Array.isArray(I.unit)&&(ae=I.unit,me=void 0),Lf(G,this.plus($),nt({},I,{numeric:"always",units:ae,unit:me}))},H.toRelativeCalendar=function(I){return void 0===I&&(I={}),this.isValid?Lf(I.base||N.fromObject({},{zone:this.zone}),this,nt({},I,{numeric:"auto",units:["years","months","days"],calendary:!0})):null},N.min=function(){for(var I=arguments.length,G=new Array(I),$=0;$<I;$++)G[$]=arguments[$];if(!G.every(N.isDateTime))throw new mt("min requires all arguments be DateTimes");return sm(G,function(ae){return ae.valueOf()},Math.min)},N.max=function(){for(var I=arguments.length,G=new Array(I),$=0;$<I;$++)G[$]=arguments[$];if(!G.every(N.isDateTime))throw new mt("max requires all arguments be DateTimes");return sm(G,function(ae){return ae.valueOf()},Math.max)},N.fromFormatExplain=function(I,G,$){void 0===$&&($={});var me=$.locale,et=$.numberingSystem;return Ly(er.fromOpts({locale:void 0===me?null:me,numberingSystem:void 0===et?null:et,defaultToEN:!0}),I,G)},N.fromStringExplain=function(I,G,$){return void 0===$&&($={}),N.fromFormatExplain(I,G,$)},$e(N,[{key:"isValid",get:function(){return null===this.invalid}},{key:"invalidReason",get:function(){return this.invalid?this.invalid.reason:null}},{key:"invalidExplanation",get:function(){return this.invalid?this.invalid.explanation:null}},{key:"locale",get:function(){return this.isValid?this.loc.locale:null}},{key:"numberingSystem",get:function(){return this.isValid?this.loc.numberingSystem:null}},{key:"outputCalendar",get:function(){return this.isValid?this.loc.outputCalendar:null}},{key:"zone",get:function(){return this._zone}},{key:"zoneName",get:function(){return this.isValid?this.zone.name:null}},{key:"year",get:function(){return this.isValid?this.c.year:NaN}},{key:"quarter",get:function(){return this.isValid?Math.ceil(this.c.month/3):NaN}},{key:"month",get:function(){return this.isValid?this.c.month:NaN}},{key:"day",get:function(){return this.isValid?this.c.day:NaN}},{key:"hour",get:function(){return this.isValid?this.c.hour:NaN}},{key:"minute",get:function(){return this.isValid?this.c.minute:NaN}},{key:"second",get:function(){return this.isValid?this.c.second:NaN}},{key:"millisecond",get:function(){return this.isValid?this.c.millisecond:NaN}},{key:"weekYear",get:function(){return this.isValid?Ob(this).weekYear:NaN}},{key:"weekNumber",get:function(){return this.isValid?Ob(this).weekNumber:NaN}},{key:"weekday",get:function(){return this.isValid?Ob(this).weekday:NaN}},{key:"ordinal",get:function(){return this.isValid?PC(this.c).ordinal:NaN}},{key:"monthShort",get:function(){return this.isValid?Ry.months("short",{locObj:this.loc})[this.month-1]:null}},{key:"monthLong",get:function(){return this.isValid?Ry.months("long",{locObj:this.loc})[this.month-1]:null}},{key:"weekdayShort",get:function(){return this.isValid?Ry.weekdays("short",{locObj:this.loc})[this.weekday-1]:null}},{key:"weekdayLong",get:function(){return this.isValid?Ry.weekdays("long",{locObj:this.loc})[this.weekday-1]:null}},{key:"offset",get:function(){return this.isValid?+this.o:NaN}},{key:"offsetNameShort",get:function(){return this.isValid?this.zone.offsetName(this.ts,{format:"short",locale:this.locale}):null}},{key:"offsetNameLong",get:function(){return this.isValid?this.zone.offsetName(this.ts,{format:"long",locale:this.locale}):null}},{key:"isOffsetFixed",get:function(){return this.isValid?this.zone.isUniversal:null}},{key:"isInDST",get:function(){return!this.isOffsetFixed&&(this.offset>this.set({month:1}).offset||this.offset>this.set({month:5}).offset)}},{key:"isInLeapYear",get:function(){return ld(this.year)}},{key:"daysInMonth",get:function(){return py(this.year,this.month)}},{key:"daysInYear",get:function(){return this.isValid?cm(this.year):NaN}},{key:"weeksInWeekYear",get:function(){return this.isValid?gy(this.weekYear):NaN}}],[{key:"DATE_SHORT",get:function(){return Ge}},{key:"DATE_MED",get:function(){return Jn}},{key:"DATE_MED_WITH_WEEKDAY",get:function(){return tt}},{key:"DATE_FULL",get:function(){return ne}},{key:"DATE_HUGE",get:function(){return we}},{key:"TIME_SIMPLE",get:function(){return pe}},{key:"TIME_WITH_SECONDS",get:function(){return fn}},{key:"TIME_WITH_SHORT_OFFSET",get:function(){return $t}},{key:"TIME_WITH_LONG_OFFSET",get:function(){return Cn}},{key:"TIME_24_SIMPLE",get:function(){return ar}},{key:"TIME_24_WITH_SECONDS",get:function(){return Ht}},{key:"TIME_24_WITH_SHORT_OFFSET",get:function(){return Qt}},{key:"TIME_24_WITH_LONG_OFFSET",get:function(){return zn}},{key:"DATETIME_SHORT",get:function(){return Br}},{key:"DATETIME_SHORT_WITH_SECONDS",get:function(){return Dr}},{key:"DATETIME_MED",get:function(){return Ni}},{key:"DATETIME_MED_WITH_SECONDS",get:function(){return bn}},{key:"DATETIME_MED_WITH_WEEKDAY",get:function(){return Or}},{key:"DATETIME_FULL",get:function(){return Fi}},{key:"DATETIME_FULL_WITH_SECONDS",get:function(){return ki}},{key:"DATETIME_HUGE",get:function(){return Di}},{key:"DATETIME_HUGE_WITH_SECONDS",get:function(){return Yi}}]),N}();function yd(N){if(ss.isDateTime(N))return N;if(N&&N.valueOf&&ai(N.valueOf()))return ss.fromJSDate(N);if(N&&"object"==typeof N)return ss.fromObject(N);throw new mt("Unknown datetime argument: "+N+", of type "+typeof N)}wt.ou=ss,wt.Xp=Iy},728:en=>{var wt={thin:100,hairline:100,"ultra-light":100,"extra-light":100,light:200,book:300,regular:400,normal:400,plain:400,roman:400,standard:400,medium:500,"semi-bold":600,"demi-bold":600,bold:700,heavy:800,black:800,"extra-bold":800,"ultra-black":900,"extra-black":900,"ultra-bold":900,"heavy-black":900,fat:900,poster:900},_t=/(italic|oblique)$/i,$e={};en.exports=function(nt,Me,fe){var Ie=$e[nt];if(!Ie){Array.isArray(nt)||(nt=[nt]);for(var T=400,S="normal",D=[],X=0,Y=nt.length;X<Y;++X){var J=nt[X].split(" "),ie=J[J.length-1].toLowerCase();for(var Se in"normal"==ie||"italic"==ie||"oblique"==ie?(S=ie,J.pop(),ie=J[J.length-1].toLowerCase()):_t.test(ie)&&(ie=ie.replace(_t,""),S=J[J.length-1].replace(ie,"")),wt)if(ie==Se||ie==Se.replace("-","")||ie==Se.replace("-"," ")){T=wt[Se],J.pop();break}"number"==typeof ie&&(T=ie);var je=J.join(" ").replace("Klokantech Noto Sans","Noto Sans");-1!==je.indexOf(" ")&&(je='"'+je+'"'),D.push(je)}Ie=$e[nt]=[S,T,D]}return Ie[0]+" "+Ie[1]+" "+Me+"px"+(fe?"/"+fe:"")+" "+Ie[2]}},578:(en,wt)=>{var Ve,$e;void 0!==($e="function"==typeof(Ve=function(){return{GML_3_1_1:{n:"GML_3_1_1",dens:"http://www.opengis.net/gml",dans:"http://www.w3.org/1999/xlink",deps:["SMIL_2_0_Language","XLink_1_0"],tis:[{ln:"PointPropertyType",ps:[{n:"point",rq:!0,en:"Point",ti:".PointType"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"TopoPrimitiveArrayAssociationType",ps:[{n:"topoPrimitive",mno:0,col:!0,mx:!1,dom:!1,en:"_TopoPrimitive",ti:".AbstractTopoPrimitiveType",t:"er"}]},{ln:"CurveArrayPropertyType",ps:[{n:"curve",mno:0,col:!0,mx:!1,dom:!1,en:"_Curve",ti:".AbstractCurveType",t:"er"}]},{ln:"BaseUnitType",bti:".UnitDefinitionType",ps:[{n:"unitsSystem",rq:!0,ti:".ReferenceType"}]},{ln:"TimeNodeType",bti:".AbstractTimeTopologyPrimitiveType",ps:[{n:"previousEdge",mno:0,col:!0,ti:".TimeEdgePropertyType"},{n:"nextEdge",mno:0,col:!0,ti:".TimeEdgePropertyType"},{n:"position",ti:".TimeInstantPropertyType"}]},{ln:"DirectedEdgePropertyType",ps:[{n:"edge",rq:!0,en:"Edge",ti:".EdgeType"},{n:"orientation",an:{lp:"orientation"},t:"a"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"BagType",bti:".AbstractGMLType",ps:[{n:"member",mno:0,col:!0,ti:".AssociationType"},{n:"members",ti:".ArrayAssociationType"}]},{ln:"DatumRefType",ps:[{n:"datum",rq:!0,mx:!1,dom:!1,en:"_Datum",ti:".AbstractDatumType",t:"er"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"StyleVariationType",ps:[{n:"value",t:"v"},{n:"styleProperty",rq:!0,an:{lp:"styleProperty"},t:"a"},{n:"featurePropertyRange",an:{lp:"featurePropertyRange"},t:"a"}]},{ln:"CurvePropertyType",ps:[{n:"curve",rq:!0,mx:!1,dom:!1,en:"_Curve",ti:".AbstractCurveType",t:"er"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"GeographicCRSType",bti:".AbstractReferenceSystemType",ps:[{n:"usesEllipsoidalCS",rq:!0,ti:".EllipsoidalCSRefType"},{n:"usesGeodeticDatum",rq:!0,ti:".GeodeticDatumRefType"}]},{ln:"MultiSurfaceType",bti:".AbstractGeometricAggregateType",ps:[{n:"surfaceMember",mno:0,col:!0,ti:".SurfacePropertyType"},{n:"surfaceMembers",ti:".SurfaceArrayPropertyType"}]},{ln:"AbstractStyleType",bti:".AbstractGMLType"},{ln:"OperationParameterBaseType",bti:".AbstractGeneralOperationParameterType"},{ln:"TopoPointType",bti:".AbstractTopologyType",ps:[{n:"directedNode",rq:!0,ti:".DirectedNodePropertyType"}]},{ln:"AbstractGeneralDerivedCRSType",bti:".AbstractReferenceSystemType",ps:[{n:"baseCRS",rq:!0,ti:".CoordinateReferenceSystemRefType"},{n:"definedByConversion",rq:!0,ti:".GeneralConversionRefType"}]},{ln:"EllipsoidRefType",ps:[{n:"ellipsoid",rq:!0,en:"Ellipsoid",ti:".EllipsoidType"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"TinType.ControlPoint",tn:null,ps:[{n:"posList",rq:!0,ti:".DirectPositionListType"},{n:"geometricPositionGroup",rq:!0,mno:3,col:!0,etis:[{en:"pos",ti:".DirectPositionType"},{en:"pointProperty",ti:".PointPropertyType"}],t:"es"}]},{ln:"PointArrayPropertyType",ps:[{n:"point",mno:0,col:!0,en:"Point",ti:".PointType"}]},{ln:"CoordinatesType",ps:[{n:"value",t:"v"},{n:"decimal",an:{lp:"decimal"},t:"a"},{n:"cs",an:{lp:"cs"},t:"a"},{n:"ts",an:{lp:"ts"},t:"a"}]},{ln:"AbstractDatumType",bti:".AbstractDatumBaseType",ps:[{n:"datumID",mno:0,col:!0,ti:".IdentifierType"},{n:"remarks",ti:".StringOrRefType"},{n:"anchorPoint",ti:".CodeType"},{n:"realizationEpoch",ti:"Date"},{n:"validArea",ti:".ExtentType"},{n:"scope"}]},{ln:"LabelStyleType",bti:".BaseStyleDescriptorType",ps:[{n:"style",rq:!0},{n:"label",rq:!0,ti:".LabelType"}]},{ln:"OperationParameterType",bti:".OperationParameterBaseType",ps:[{n:"parameterID",mno:0,col:!0,ti:".IdentifierType"},{n:"remarks",ti:".StringOrRefType"}]},{ln:"CartesianCSType",bti:".AbstractCoordinateSystemType"},{ln:"ConversionToPreferredUnitType",bti:".UnitOfMeasureType",ps:[{n:"factor",rq:!0,ti:"Double"},{n:"formula",rq:!0,ti:".FormulaType"}]},{ln:"AbstractParametricCurveSurfaceType",bti:".AbstractSurfacePatchType"},{ln:"ProjectedCRSRefType",ps:[{n:"projectedCRS",rq:!0,en:"ProjectedCRS",ti:".ProjectedCRSType"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"TimePeriodType",bti:".AbstractTimeGeometricPrimitiveType",ps:[{n:"beginPosition",rq:!0,ti:".TimePositionType"},{n:"begin",rq:!0,ti:".TimeInstantPropertyType"},{n:"endPosition",rq:!0,ti:".TimePositionType"},{n:"end",rq:!0,ti:".TimeInstantPropertyType"},{n:"duration",rq:!0,ti:"Duration"},{n:"timeInterval",rq:!0,ti:".TimeIntervalLengthType"}]},{ln:"SurfacePatchArrayPropertyType",ps:[{n:"surfacePatch",mno:0,col:!0,mx:!1,dom:!1,en:"_SurfacePatch",ti:".AbstractSurfacePatchType",t:"er"}]},{ln:"AreaType",bti:".MeasureType"},{ln:"ArcStringType",bti:".AbstractCurveSegmentType",ps:[{n:"posOrPointPropertyOrPointRep",rq:!0,mno:3,col:!0,mx:!1,dom:!1,etis:[{en:"pointRep",ti:".PointPropertyType"},{en:"pointProperty",ti:".PointPropertyType"},{en:"pos",ti:".DirectPositionType"}],t:"ers"},{n:"posList",rq:!0,ti:".DirectPositionListType"},{n:"coordinates",rq:!0,ti:".CoordinatesType"},{n:"interpolation",an:{lp:"interpolation"},t:"a"},{n:"numArc",ti:"Integer",an:{lp:"numArc"},t:"a"}]},{ln:"TopoSolidType",bti:".AbstractTopoPrimitiveType",ps:[{n:"directedFace",rq:!0,col:!0,ti:".DirectedFacePropertyType"}]},{ln:"RangeParametersType",ps:[{n:"_boolean",rq:!0,en:"Boolean",ti:"Boolean"},{n:"category",rq:!0,en:"Category",ti:".CodeType"},{n:"quantity",rq:!0,en:"Quantity",ti:".MeasureType"},{n:"count",rq:!0,en:"Count",ti:"Integer"},{n:"booleanList",rq:!0,en:"BooleanList",ti:{t:"l"}},{n:"categoryList",rq:!0,en:"CategoryList",ti:".CodeOrNullListType"},{n:"quantityList",rq:!0,en:"QuantityList",ti:".MeasureOrNullListType"},{n:"countList",rq:!0,en:"CountList",ti:{t:"l"}},{n:"categoryExtent",rq:!0,en:"CategoryExtent",ti:".CategoryExtentType"},{n:"quantityExtent",rq:!0,en:"QuantityExtent",ti:".QuantityExtentType"},{n:"countExtent",rq:!0,en:"CountExtent",ti:{t:"l"}},{n:"compositeValue",rq:!0,mx:!1,dom:!1,en:"CompositeValue",ti:".CompositeValueType",t:"er"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"MultiPolygonPropertyType",ps:[{n:"multiPolygon",rq:!0,en:"MultiPolygon",ti:".MultiPolygonType"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"GeometryStyleType",bti:".BaseStyleDescriptorType",ps:[{n:"symbol",rq:!0,ti:".SymbolType"},{n:"style",rq:!0},{n:"labelStyle",ti:".LabelStylePropertyType"},{n:"geometryProperty",an:{lp:"geometryProperty"},t:"a"},{n:"geometryType",an:{lp:"geometryType"},t:"a"}]},{ln:"ExtentType",ps:[{n:"description",ti:".StringOrRefType"},{n:"boundingBox",mno:0,col:!0,ti:".EnvelopeType"},{n:"boundingPolygon",mno:0,col:!0,ti:".PolygonType"},{n:"verticalExtent",mno:0,col:!0,ti:".EnvelopeType"},{n:"temporalExtent",mno:0,col:!0,ti:".TimePeriodType"}]},{ln:"UserDefinedCSType",bti:".AbstractCoordinateSystemType"},{ln:"OrientableSurfaceType",bti:".AbstractSurfaceType",ps:[{n:"baseSurface",rq:!0,ti:".SurfacePropertyType"},{n:"orientation",an:{lp:"orientation"},t:"a"}]},{ln:"TemporalDatumRefType",ps:[{n:"temporalDatum",rq:!0,en:"TemporalDatum",ti:".TemporalDatumType"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"KnotPropertyType",ps:[{n:"knot",rq:!0,en:"Knot",ti:".KnotType"}]},{ln:"DefinitionProxyType",bti:".DefinitionType",ps:[{n:"definitionRef",rq:!0,ti:".ReferenceType"}]},{ln:"ArcByBulgeType",bti:".ArcStringByBulgeType"},{ln:"GeometricComplexPropertyType",ps:[{n:"geometricComplex",rq:!0,en:"GeometricComplex",ti:".GeometricComplexType"},{n:"compositeCurve",rq:!0,en:"CompositeCurve",ti:".CompositeCurveType"},{n:"compositeSurface",rq:!0,en:"CompositeSurface",ti:".CompositeSurfaceType"},{n:"compositeSolid",rq:!0,en:"CompositeSolid",ti:".CompositeSolidType"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"CompositeCurvePropertyType",ps:[{n:"compositeCurve",rq:!0,en:"CompositeCurve",ti:".CompositeCurveType"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"OperationParameterGroupBaseType",bti:".AbstractGeneralOperationParameterType"},{ln:"MultiPointCoverageType",bti:".AbstractDiscreteCoverageType"},{ln:"ReferenceType",ps:[{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"ImageCRSRefType",ps:[{n:"imageCRS",rq:!0,en:"ImageCRS",ti:".ImageCRSType"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"DefaultStylePropertyType",ps:[{n:"style",mx:!1,dom:!1,en:"_Style",ti:".AbstractStyleType",t:"er"},{n:"about",an:{lp:"about"},t:"a"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"AbstractTimeReferenceSystemType",bti:".DefinitionType",ps:[{n:"domainOfValidity"}]},{ln:"AbsoluteExternalPositionalAccuracyType",bti:".AbstractPositionalAccuracyType",ps:[{n:"result",rq:!0,ti:".MeasureType"}]},{ln:"TopoPrimitiveMemberType",ps:[{n:"topoPrimitive",mx:!1,dom:!1,en:"_TopoPrimitive",ti:".AbstractTopoPrimitiveType",t:"er"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"TimeOrdinalReferenceSystemType",bti:".AbstractTimeReferenceSystemType",ps:[{n:"component",rq:!0,col:!0,ti:".TimeOrdinalEraPropertyType"}]},{ln:"CompositeSolidType",bti:".AbstractSolidType",ps:[{n:"solidMember",rq:!0,col:!0,ti:".SolidPropertyType"}]},{ln:"GeocentricCRSRefType",ps:[{n:"geocentricCRS",rq:!0,en:"GeocentricCRS",ti:".GeocentricCRSType"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"MultiCurveType",bti:".AbstractGeometricAggregateType",ps:[{n:"curveMember",mno:0,col:!0,ti:".CurvePropertyType"},{n:"curveMembers",ti:".CurveArrayPropertyType"}]},{ln:"UnitDefinitionType",bti:".DefinitionType",ps:[{n:"quantityType",rq:!0,ti:".StringOrRefType"},{n:"catalogSymbol",ti:".CodeType"}]},{ln:"CurveSegmentArrayPropertyType",ps:[{n:"curveSegment",mno:0,col:!0,mx:!1,dom:!1,en:"_CurveSegment",ti:".AbstractCurveSegmentType",t:"er"}]},{ln:"AbstractTimePrimitiveType",bti:".AbstractTimeObjectType",ps:[{n:"relatedTime",mno:0,col:!0,ti:".RelatedTimeType"}]},{ln:"MultiPointType",bti:".AbstractGeometricAggregateType",ps:[{n:"pointMember",mno:0,col:!0,ti:".PointPropertyType"},{n:"pointMembers",ti:".PointArrayPropertyType"}]},{ln:"MultiPointPropertyType",ps:[{n:"multiPoint",rq:!0,en:"MultiPoint",ti:".MultiPointType"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"AbstractTimeTopologyPrimitiveType",bti:".AbstractTimePrimitiveType",ps:[{n:"complex",ti:".ReferenceType"}]},{ln:"KnotType",ps:[{n:"value",rq:!0,ti:"Double"},{n:"multiplicity",rq:!0,ti:"NonNegativeInteger"},{n:"weight",rq:!0,ti:"Double"}]},{ln:"CodeType",ps:[{n:"value",t:"v"},{n:"codeSpace",an:{lp:"codeSpace"},t:"a"}]},{ln:"AbstractTimeSliceType",bti:".AbstractGMLType",ps:[{n:"validTime",rq:!0,ti:".TimePrimitivePropertyType"},{n:"dataSource",ti:".StringOrRefType"}]},{ln:"DynamicFeatureType",bti:".AbstractFeatureType",ps:[{n:"validTime",ti:".TimePrimitivePropertyType"},{n:"history",mx:!1,dom:!1,ti:".HistoryPropertyType",t:"er"},{n:"dataSource",ti:".StringOrRefType"}]},{ln:"RingPropertyType",ps:[{n:"ring",rq:!0,en:"Ring",ti:".RingType"}]},{ln:"EngineeringCRSType",bti:".AbstractReferenceSystemType",ps:[{n:"usesCS",rq:!0,ti:".CoordinateSystemRefType"},{n:"usesEngineeringDatum",rq:!0,ti:".EngineeringDatumRefType"}]},{ln:"BooleanPropertyType",bti:".ValuePropertyType"},{ln:"VerticalCRSRefType",ps:[{n:"verticalCRS",rq:!0,en:"VerticalCRS",ti:".VerticalCRSType"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"FormulaType",ps:[{n:"a",ti:"Double"},{n:"b",rq:!0,ti:"Double"},{n:"c",rq:!0,ti:"Double"},{n:"d",ti:"Double"}]},{ln:"EngineeringDatumRefType",ps:[{n:"engineeringDatum",rq:!0,en:"EngineeringDatum",ti:".EngineeringDatumType"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"DirectedObservationAtDistanceType",bti:".DirectedObservationType",ps:[{n:"distance",rq:!0,ti:".MeasureType"}]},{ln:"AbstractMetaDataType",ps:[{n:"content",col:!0,dom:!1,t:"ers"},{n:"id",ti:"ID",an:{lp:"id",ns:"http://www.opengis.net/gml"},t:"a"}]},{ln:"AbstractCurveSegmentType",ps:[{n:"numDerivativesAtStart",ti:"Integer",an:{lp:"numDerivativesAtStart"},t:"a"},{n:"numDerivativesAtEnd",ti:"Integer",an:{lp:"numDerivativesAtEnd"},t:"a"},{n:"numDerivativeInterior",ti:"Integer",an:{lp:"numDerivativeInterior"},t:"a"}]},{ln:"RelatedTimeType",bti:".TimePrimitivePropertyType",ps:[{n:"relativePosition",an:{lp:"relativePosition"},t:"a"}]},{ln:"OperationParameterGroupRefType",ps:[{n:"operationParameterGroup",rq:!0,en:"OperationParameterGroup",ti:".OperationParameterGroupType"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"GridType",bti:".AbstractGeometryType",ps:[{n:"limits",rq:!0,ti:".GridLimitsType"},{n:"axisName",rq:!0,col:!0},{n:"dimension",rq:!0,ti:"PositiveInteger",an:{lp:"dimension"},t:"a"}]},{ln:"IndexMapType",bti:".GridFunctionType",ps:[{n:"lookUpTable",rq:!0,ti:{t:"l",bti:"Integer"}}]},{ln:"AbstractCurveType",bti:".AbstractGeometricPrimitiveType"},{ln:"MultiGeometryPropertyType",ps:[{n:"geometricAggregate",rq:!0,mx:!1,dom:!1,en:"_GeometricAggregate",ti:".AbstractGeometricAggregateType",t:"er"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"GridCoverageType",bti:".AbstractDiscreteCoverageType"},{ln:"DerivedCRSTypeType",bti:".CodeType"},{ln:"ArrayType",bti:".AbstractGMLType",ps:[{n:"members",ti:".ArrayAssociationType"}]},{ln:"AbstractGriddedSurfaceType",bti:".AbstractParametricCurveSurfaceType",ps:[{n:"row",rq:!0,col:!0,ti:".AbstractGriddedSurfaceType.Row"},{n:"rows",ti:"Integer"},{n:"columns",ti:"Integer"}]},{ln:"AbstractTimeGeometricPrimitiveType",bti:".AbstractTimePrimitiveType",ps:[{n:"frame",an:{lp:"frame"},t:"a"}]},{ln:"ArrayAssociationType",ps:[{n:"object",mno:0,col:!0,mx:!1,dom:!1,en:"_Object",ti:"AnyType",t:"er"}]},{ln:"PassThroughOperationRefType",ps:[{n:"passThroughOperation",rq:!0,en:"PassThroughOperation",ti:".PassThroughOperationType"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"PolygonPatchType",bti:".AbstractSurfacePatchType",ps:[{n:"exterior",mx:!1,dom:!1,ti:".AbstractRingPropertyType",t:"er"},{n:"interior",mno:0,col:!0,mx:!1,dom:!1,ti:".AbstractRingPropertyType",t:"er"},{n:"interpolation",an:{lp:"interpolation"},t:"a"}]},{ln:"GeneralTransformationRefType",ps:[{n:"generalTransformation",rq:!0,mx:!1,dom:!1,en:"_GeneralTransformation",ti:".AbstractGeneralTransformationType",t:"er"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"TransformationRefType",ps:[{n:"transformation",rq:!0,en:"Transformation",ti:".TransformationType"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"ValueArrayType",bti:".CompositeValueType",ps:[{n:"codeSpace",an:{lp:"codeSpace"},t:"a"},{n:"uom",an:{lp:"uom"},t:"a"}]},{ln:"TimeClockPropertyType",ps:[{n:"timeClock",rq:!0,en:"TimeClock",ti:".TimeClockType"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"CylinderType",bti:".AbstractGriddedSurfaceType",ps:[{n:"horizontalCURVETYPE",an:{lp:"horizontalCurveType"},t:"a"},{n:"verticalCURVETYPE",an:{lp:"verticalCurveType"},t:"a"}]},{ln:"MultiSurfaceCoverageType",bti:".AbstractDiscreteCoverageType"},{ln:"VerticalDatumTypeType",bti:".CodeType"},{ln:"GeometryArrayPropertyType",ps:[{n:"geometry",mno:0,col:!0,mx:!1,dom:!1,en:"_Geometry",ti:".AbstractGeometryType",t:"er"}]},{ln:"MultiCurvePropertyType",ps:[{n:"multiCurve",rq:!0,en:"MultiCurve",ti:".MultiCurveType"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"DirectedFacePropertyType",ps:[{n:"face",rq:!0,en:"Face",ti:".FaceType"},{n:"orientation",an:{lp:"orientation"},t:"a"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"GridFunctionType",ps:[{n:"sequenceRule",ti:".SequenceRuleType"},{n:"startPoint",ti:{t:"l",bti:"Integer"}}]},{ln:"DMSAngleType",ps:[{n:"degrees",rq:!0,ti:".DegreesType"},{n:"decimalMinutes",rq:!0,ti:"Decimal"},{n:"minutes",rq:!0,ti:"NonNegativeInteger"},{n:"seconds",ti:"Decimal"}]},{ln:"AbstractTimeComplexType",bti:".AbstractTimeObjectType"},{ln:"LocationPropertyType",ps:[{n:"geometry",rq:!0,mx:!1,dom:!1,en:"_Geometry",ti:".AbstractGeometryType",t:"er"},{n:"locationKeyWord",rq:!0,en:"LocationKeyWord",ti:".CodeType"},{n:"locationString",rq:!0,en:"LocationString",ti:".StringOrRefType"},{n:"_null",rq:!0,en:"Null",ti:{t:"l"}},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"SurfaceType",bti:".AbstractSurfaceType",ps:[{n:"patches",rq:!0,mx:!1,dom:!1,ti:".SurfacePatchArrayPropertyType",t:"er"}]},{ln:"LabelType",ps:[{n:"content",col:!0,dom:!1,en:"LabelExpression",t:"er"},{n:"transform",an:{lp:"transform",ns:"http://www.opengis.net/gml"},t:"a"}]},{ln:"OperationParameterRefType",ps:[{n:"operationParameter",rq:!0,en:"OperationParameter",ti:".OperationParameterType"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"AbstractSolidType",bti:".AbstractGeometricPrimitiveType"},{ln:"GenericMetaDataType",bti:".AbstractMetaDataType",ps:[{n:"contentOverrideForGenericMetaDataType",t:"ae"}]},{ln:"CoordinateOperationRefType",ps:[{n:"coordinateOperation",rq:!0,mx:!1,dom:!1,en:"_CoordinateOperation",ti:".AbstractCoordinateOperationType",t:"er"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"DataBlockType",ps:[{n:"rangeParameters",rq:!0,ti:".RangeParametersType"},{n:"tupleList",rq:!0,ti:".CoordinatesType"},{n:"doubleOrNullTupleList",rq:!0,ti:{t:"l"}}]},{ln:"TopoComplexType",bti:".AbstractTopologyType",ps:[{n:"maximalComplex",rq:!0,ti:".TopoComplexMemberType"},{n:"superComplex",mno:0,col:!0,ti:".TopoComplexMemberType"},{n:"subComplex",mno:0,col:!0,ti:".TopoComplexMemberType"},{n:"topoPrimitiveMember",mno:0,col:!0,ti:".TopoPrimitiveMemberType"},{n:"topoPrimitiveMembers",ti:".TopoPrimitiveArrayAssociationType"},{n:"isMaximal",ti:"Boolean",an:{lp:"isMaximal"},t:"a"}]},{ln:"NodeType",bti:".AbstractTopoPrimitiveType",ps:[{n:"directedEdge",mno:0,col:!0,ti:".DirectedEdgePropertyType"},{n:"pointProperty",ti:".PointPropertyType"}]},{ln:"PolarCSRefType",ps:[{n:"polarCS",rq:!0,en:"PolarCS",ti:".PolarCSType"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"AbstractTopologyType",bti:".AbstractGMLType"},{ln:"ClothoidType",bti:".AbstractCurveSegmentType",ps:[{n:"refLocation",rq:!0,ti:".ClothoidType.RefLocation"},{n:"scaleFactor",rq:!0,ti:"Decimal"},{n:"startParameter",rq:!0,ti:"Double"},{n:"endParameter",rq:!0,ti:"Double"}]},{ln:"MetaDataPropertyType",ps:[{n:"any",rq:!0,mx:!1,t:"ae"},{n:"about",an:{lp:"about"},t:"a"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"ArcByCenterPointType",bti:".AbstractCurveSegmentType",ps:[{n:"pos",rq:!0,ti:".DirectPositionType"},{n:"pointProperty",rq:!0,ti:".PointPropertyType"},{n:"pointRep",rq:!0,ti:".PointPropertyType"},{n:"posList",rq:!0,ti:".DirectPositionListType"},{n:"coordinates",rq:!0,ti:".CoordinatesType"},{n:"radius",rq:!0,ti:".LengthType"},{n:"startAngle",ti:".AngleType"},{n:"endAngle",ti:".AngleType"},{n:"interpolation",an:{lp:"interpolation"},t:"a"},{n:"numARC",rq:!0,ti:"Integer",an:{lp:"numArc"},t:"a"}]},{ln:"ConversionRefType",ps:[{n:"conversion",rq:!0,en:"Conversion",ti:".ConversionType"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"DegreesType",ps:[{n:"value",ti:"NonNegativeInteger",t:"v"},{n:"direction",an:{lp:"direction"},t:"a"}]},{ln:"MultiSurfaceDomainType",bti:".DomainSetType"},{ln:"ConcatenatedOperationRefType",ps:[{n:"concatenatedOperation",rq:!0,en:"ConcatenatedOperation",ti:".ConcatenatedOperationType"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"OperationMethodType",bti:".OperationMethodBaseType",ps:[{n:"methodID",mno:0,col:!0,ti:".IdentifierType"},{n:"remarks",ti:".StringOrRefType"},{n:"methodFormula",rq:!0,ti:".CodeType"},{n:"sourceDimensions",rq:!0,ti:"PositiveInteger"},{n:"targetDimensions",rq:!0,ti:"PositiveInteger"},{n:"usesParameter",mno:0,col:!0,ti:".AbstractGeneralOperationParameterRefType"}]},{ln:"EllipsoidalCSType",bti:".AbstractCoordinateSystemType"},{ln:"SpeedType",bti:".MeasureType"},{ln:"PolygonType",bti:".AbstractSurfaceType",ps:[{n:"exterior",mx:!1,dom:!1,ti:".AbstractRingPropertyType",t:"er"},{n:"interior",mno:0,col:!0,mx:!1,dom:!1,ti:".AbstractRingPropertyType",t:"er"}]},{ln:"AbstractTopoPrimitiveType",bti:".AbstractTopologyType",ps:[{n:"isolated",mno:0,col:!0,ti:".IsolatedPropertyType"},{n:"container",ti:".ContainerPropertyType"}]},{ln:"BSplineType",bti:".AbstractCurveSegmentType",ps:[{n:"posOrPointPropertyOrPointRep",mno:0,col:!0,mx:!1,dom:!1,etis:[{en:"pointRep",ti:".PointPropertyType"},{en:"pointProperty",ti:".PointPropertyType"},{en:"pos",ti:".DirectPositionType"}],t:"ers"},{n:"posList",rq:!0,ti:".DirectPositionListType"},{n:"coordinates",rq:!0,ti:".CoordinatesType"},{n:"degree",rq:!0,ti:"NonNegativeInteger"},{n:"knot",rq:!0,mno:2,col:!0,ti:".KnotPropertyType"},{n:"interpolation",an:{lp:"interpolation"},t:"a"},{n:"isPolynomial",ti:"Boolean",an:{lp:"isPolynomial"},t:"a"},{n:"knotType",an:{lp:"knotType"},t:"a"}]},{ln:"FileType",ps:[{n:"rangeParameters",rq:!0,ti:".RangeParametersType"},{n:"fileName",rq:!0},{n:"fileStructure",rq:!0},{n:"mimeType"},{n:"compression"}]},{ln:"RectifiedGridType",bti:".GridType",ps:[{n:"origin",rq:!0,ti:".PointPropertyType"},{n:"offsetVector",rq:!0,col:!0,ti:".VectorType"}]},{ln:"TimePeriodPropertyType",ps:[{n:"timePeriod",rq:!0,en:"TimePeriod",ti:".TimePeriodType"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"RingType",bti:".AbstractRingType",ps:[{n:"curveMember",rq:!0,col:!0,ti:".CurvePropertyType"}]},{ln:"ClothoidType.RefLocation",tn:null,ps:[{n:"affinePlacement",rq:!0,en:"AffinePlacement",ti:".AffinePlacementType"}]},{ln:"GeometryStylePropertyType",ps:[{n:"geometryStyle",en:"GeometryStyle",ti:".GeometryStyleType"},{n:"about",an:{lp:"about"},t:"a"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"EnvelopeWithTimePeriodType",bti:".EnvelopeType",ps:[{n:"timePosition",rq:!0,mno:2,mxo:2,col:!0,ti:".TimePositionType"},{n:"frame",an:{lp:"frame"},t:"a"}]},{ln:"ValuePropertyType",ps:[{n:"_boolean",rq:!0,en:"Boolean",ti:"Boolean"},{n:"category",rq:!0,en:"Category",ti:".CodeType"},{n:"quantity",rq:!0,en:"Quantity",ti:".MeasureType"},{n:"count",rq:!0,en:"Count",ti:"Integer"},{n:"booleanList",rq:!0,en:"BooleanList",ti:{t:"l"}},{n:"categoryList",rq:!0,en:"CategoryList",ti:".CodeOrNullListType"},{n:"quantityList",rq:!0,en:"QuantityList",ti:".MeasureOrNullListType"},{n:"countList",rq:!0,en:"CountList",ti:{t:"l"}},{n:"categoryExtent",rq:!0,en:"CategoryExtent",ti:".CategoryExtentType"},{n:"quantityExtent",rq:!0,en:"QuantityExtent",ti:".QuantityExtentType"},{n:"countExtent",rq:!0,en:"CountExtent",ti:{t:"l"}},{n:"compositeValue",rq:!0,mx:!1,dom:!1,en:"CompositeValue",ti:".CompositeValueType",t:"er"},{n:"object",rq:!0,mx:!1,dom:!1,en:"_Object",ti:"AnyType",t:"er"},{n:"_null",rq:!0,en:"Null",ti:{t:"l"}},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"GeodesicStringType",bti:".AbstractCurveSegmentType",ps:[{n:"posList",rq:!0,ti:".DirectPositionListType"},{n:"geometricPositionGroup",rq:!0,mno:2,col:!0,etis:[{en:"pos",ti:".DirectPositionType"},{en:"pointProperty",ti:".PointPropertyType"}],t:"es"},{n:"interpolation",an:{lp:"interpolation"},t:"a"}]},{ln:"AbstractDatumBaseType",bti:".DefinitionType"},{ln:"TemporalCRSRefType",ps:[{n:"temporalCRS",rq:!0,en:"TemporalCRS",ti:".TemporalCRSType"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"MultiGeometryType",bti:".AbstractGeometricAggregateType",ps:[{n:"geometryMember",mno:0,col:!0,ti:".GeometryPropertyType"},{n:"geometryMembers",ti:".GeometryArrayPropertyType"}]},{ln:"TimeInstantPropertyType",ps:[{n:"timeInstant",rq:!0,en:"TimeInstant",ti:".TimeInstantType"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"CompoundCRSRefType",ps:[{n:"compoundCRS",rq:!0,en:"CompoundCRS",ti:".CompoundCRSType"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"TrianglePatchArrayPropertyType",bti:".SurfacePatchArrayPropertyType"},{ln:"DomainSetType",ps:[{n:"geometry",rq:!0,mx:!1,dom:!1,en:"_Geometry",ti:".AbstractGeometryType",t:"er"},{n:"timeObject",rq:!0,mx:!1,dom:!1,en:"_TimeObject",ti:".AbstractTimeObjectType",t:"er"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"TemporalCSRefType",ps:[{n:"temporalCS",rq:!0,en:"TemporalCS",ti:".TemporalCSType"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"MultiPolygonType",bti:".AbstractGeometricAggregateType",ps:[{n:"polygonMember",mno:0,col:!0,ti:".PolygonPropertyType"}]},{ln:"StyleType",bti:".AbstractStyleType",ps:[{n:"featureStyle",rq:!0,col:!0,ti:".FeatureStylePropertyType"},{n:"graphStyle",ti:".GraphStylePropertyType"}]},{ln:"DynamicFeatureCollectionType",bti:".FeatureCollectionType",ps:[{n:"validTime",ti:".TimePrimitivePropertyType"},{n:"history",mx:!1,dom:!1,ti:".HistoryPropertyType",t:"er"},{n:"dataSource",ti:".StringOrRefType"}]},{ln:"PrimeMeridianBaseType",bti:".DefinitionType"},{ln:"AbstractGriddedSurfaceType.Row",tn:null,ps:[{n:"posList",rq:!0,ti:".DirectPositionListType"},{n:"geometricPositionGroup",rq:!0,col:!0,etis:[{en:"pos",ti:".DirectPositionType"},{en:"pointProperty",ti:".PointPropertyType"}],t:"es"}]},{ln:"DictionaryType",bti:".DefinitionType",ps:[{n:"dictionaryEntryOrIndirectEntry",mno:0,col:!0,mx:!1,dom:!1,etis:[{en:"indirectEntry",ti:".IndirectEntryType"},{en:"dictionaryEntry",ti:".DictionaryEntryType"}],t:"ers"}]},{ln:"CoordType",ps:[{n:"x",rq:!0,en:"X",ti:"Decimal"},{n:"y",en:"Y",ti:"Decimal"},{n:"z",en:"Z",ti:"Decimal"}]},{ln:"RectangleType",bti:".AbstractSurfacePatchType",ps:[{n:"exterior",rq:!0,mx:!1,dom:!1,ti:".AbstractRingPropertyType",t:"er"},{n:"interpolation",an:{lp:"interpolation"},t:"a"}]},{ln:"DirectionPropertyType",ps:[{n:"directionVector",rq:!0,en:"DirectionVector",ti:".DirectionVectorType"},{n:"compassPoint",rq:!0,en:"CompassPoint"},{n:"directionKeyword",rq:!0,en:"DirectionKeyword",ti:".CodeType"},{n:"directionString",rq:!0,en:"DirectionString",ti:".StringOrRefType"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"AbstractFeatureCollectionType",bti:".AbstractFeatureType",ps:[{n:"featureMember",mno:0,col:!0,ti:".FeaturePropertyType"},{n:"featureMembers",ti:".FeatureArrayPropertyType"}]},{ln:"PrimeMeridianType",bti:".PrimeMeridianBaseType",ps:[{n:"meridianID",mno:0,col:!0,ti:".IdentifierType"},{n:"remarks",ti:".StringOrRefType"},{n:"greenwichLongitude",rq:!0,ti:".AngleChoiceType"}]},{ln:"SolidPropertyType",ps:[{n:"solid",rq:!0,mx:!1,dom:!1,en:"_Solid",ti:".AbstractSolidType",t:"er"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"FeatureStylePropertyType",ps:[{n:"featureStyle",en:"FeatureStyle",ti:".FeatureStyleType"},{n:"about",an:{lp:"about"},t:"a"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"TimeCalendarType",bti:".AbstractTimeReferenceSystemType",ps:[{n:"referenceFrame",rq:!0,col:!0,ti:".TimeCalendarEraPropertyType"}]},{ln:"AbstractGeneralOperationParameterType",bti:".DefinitionType",ps:[{n:"minimumOccurs",ti:"NonNegativeInteger"}]},{ln:"DerivedCRSType",bti:".AbstractGeneralDerivedCRSType",ps:[{n:"derivedCRSType",rq:!0,ti:".DerivedCRSTypeType"},{n:"usesCS",rq:!0,ti:".CoordinateSystemRefType"}]},{ln:"TimeType",bti:".MeasureType"},{ln:"CylindricalCSType",bti:".AbstractCoordinateSystemType"},{ln:"UnitOfMeasureType",ps:[{n:"uom",rq:!0,an:{lp:"uom"},t:"a"}]},{ln:"GeneralConversionRefType",ps:[{n:"generalConversion",rq:!0,mx:!1,dom:!1,en:"_GeneralConversion",ti:".AbstractGeneralConversionType",t:"er"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"AffinePlacementType",ps:[{n:"location",rq:!0,ti:".DirectPositionType"},{n:"refDirection",rq:!0,col:!0,ti:".VectorType"},{n:"inDimension",rq:!0,ti:"PositiveInteger"},{n:"outDimension",rq:!0,ti:"PositiveInteger"}]},{ln:"PolyhedralSurfaceType",bti:".SurfaceType"},{ln:"IsolatedPropertyType",ps:[{n:"node",rq:!0,en:"Node",ti:".NodeType"},{n:"edge",rq:!0,en:"Edge",ti:".EdgeType"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"SolidType",bti:".AbstractSolidType",ps:[{n:"exterior",ti:".SurfacePropertyType"},{n:"interior",mno:0,col:!0,ti:".SurfacePropertyType"}]},{ln:"VerticalCSType",bti:".AbstractCoordinateSystemType"},{ln:"ArcType",bti:".ArcStringType"},{ln:"GeometricPrimitivePropertyType",ps:[{n:"geometricPrimitive",rq:!0,mx:!1,dom:!1,en:"_GeometricPrimitive",ti:".AbstractGeometricPrimitiveType",t:"er"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"AbstractSurfacePatchType"},{ln:"EllipsoidalCSRefType",ps:[{n:"ellipsoidalCS",rq:!0,en:"EllipsoidalCS",ti:".EllipsoidalCSType"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"LineStringSegmentType",bti:".AbstractCurveSegmentType",ps:[{n:"posOrPointPropertyOrPointRep",rq:!0,mno:2,col:!0,mx:!1,dom:!1,etis:[{en:"pointRep",ti:".PointPropertyType"},{en:"pointProperty",ti:".PointPropertyType"},{en:"pos",ti:".DirectPositionType"}],t:"ers"},{n:"posList",rq:!0,ti:".DirectPositionListType"},{n:"coordinates",rq:!0,ti:".CoordinatesType"},{n:"interpolation",an:{lp:"interpolation"},t:"a"}]},{ln:"IdentifierType",ps:[{n:"name",rq:!0,mx:!1,dom:!1,ti:".CodeType",t:"er"},{n:"version"},{n:"remarks",ti:".StringOrRefType"}]},{ln:"AbstractGeneralTransformationType",bti:".AbstractCoordinateOperationType"},{ln:"TimeCoordinateSystemType",bti:".AbstractTimeReferenceSystemType",ps:[{n:"originPosition",rq:!0,ti:".TimePositionType"},{n:"origin",rq:!0,ti:".TimeInstantPropertyType"},{n:"interval",rq:!0,ti:".TimeIntervalLengthType"}]},{ln:"TemporalDatumBaseType",bti:".AbstractDatumType"},{ln:"GridLengthType",bti:".MeasureType"},{ln:"IndirectEntryType",ps:[{n:"definitionProxy",rq:!0,en:"DefinitionProxy",ti:".DefinitionProxyType"}]},{ln:"PolygonPatchArrayPropertyType",bti:".SurfacePatchArrayPropertyType"},{ln:"HistoryPropertyType",ps:[{n:"timeSlice",rq:!0,col:!0,mx:!1,dom:!1,en:"_TimeSlice",ti:".AbstractTimeSliceType",t:"er"}]},{ln:"EnvelopeType",ps:[{n:"lowerCorner",rq:!0,ti:".DirectPositionType"},{n:"upperCorner",rq:!0,ti:".DirectPositionType"},{n:"coord",rq:!0,mno:2,mxo:2,col:!0,ti:".CoordType"},{n:"pos",rq:!0,mno:2,mxo:2,col:!0,ti:".DirectPositionType"},{n:"coordinates",rq:!0,ti:".CoordinatesType"},{n:"srsName",an:{lp:"srsName"},t:"a"},{n:"srsDimension",ti:"PositiveInteger",an:{lp:"srsDimension"},t:"a"},{n:"axisLabels",ti:{t:"l",bti:"NCName"},an:{lp:"axisLabels"},t:"a"},{n:"uomLabels",ti:{t:"l",bti:"NCName"},an:{lp:"uomLabels"},t:"a"}]},{ln:"CountPropertyType",bti:".ValuePropertyType"},{ln:"ConversionType",bti:".AbstractGeneralConversionType",ps:[{n:"usesMethod",rq:!0,ti:".OperationMethodRefType"},{n:"usesValue",mno:0,col:!0,ti:".ParameterValueType"}]},{ln:"UserDefinedCSRefType",ps:[{n:"userDefinedCS",rq:!0,en:"UserDefinedCS",ti:".UserDefinedCSType"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"LabelStylePropertyType",ps:[{n:"labelStyle",en:"LabelStyle",ti:".LabelStyleType"},{n:"about",an:{lp:"about"},t:"a"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"BaseStyleDescriptorType",bti:".AbstractGMLType",ps:[{n:"spatialResolution",ti:".ScaleType"},{n:"styleVariation",mno:0,col:!0,ti:".StyleVariationType"},{n:"animate",mno:0,col:!0,en:{lp:"animate",ns:"http://www.w3.org/2001/SMIL20/"},ti:"SMIL_2_0_Language.AnimateType"},{n:"animateMotion",mno:0,col:!0,en:{lp:"animateMotion",ns:"http://www.w3.org/2001/SMIL20/"},ti:"SMIL_2_0_Language.AnimateMotionType"},{n:"animateColor",mno:0,col:!0,en:{lp:"animateColor",ns:"http://www.w3.org/2001/SMIL20/"},ti:"SMIL_2_0_Language.AnimateColorType"},{n:"set",mno:0,col:!0,en:{lp:"set",ns:"http://www.w3.org/2001/SMIL20/"},ti:"SMIL_2_0_Language.SetType"}]},{ln:"SphericalCSRefType",ps:[{n:"sphericalCS",rq:!0,en:"SphericalCS",ti:".SphericalCSType"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"GeodeticDatumType",bti:".AbstractDatumType",ps:[{n:"usesPrimeMeridian",rq:!0,ti:".PrimeMeridianRefType"},{n:"usesEllipsoid",rq:!0,ti:".EllipsoidRefType"}]},{ln:"OperationMethodBaseType",bti:".DefinitionType"},{ln:"LineStringSegmentArrayPropertyType",ps:[{n:"lineStringSegment",mno:0,col:!0,en:"LineStringSegment",ti:".LineStringSegmentType"}]},{ln:"MeasureListType",ps:[{n:"value",ti:{t:"l",bti:"Double"},t:"v"},{n:"uom",rq:!0,an:{lp:"uom"},t:"a"}]},{ln:"EngineeringDatumType",bti:".AbstractDatumType"},{ln:"ScalarValuePropertyType",bti:".ValuePropertyType"},{ln:"TopoVolumeType",bti:".AbstractTopologyType",ps:[{n:"directedTopoSolid",rq:!0,col:!0,ti:".DirectedTopoSolidPropertyType"}]},{ln:"TopoCurvePropertyType",ps:[{n:"topoCurve",rq:!0,en:"TopoCurve",ti:".TopoCurveType"}]},{ln:"TransformationType",bti:".AbstractGeneralTransformationType",ps:[{n:"usesMethod",rq:!0,ti:".OperationMethodRefType"},{n:"usesValue",mno:0,col:!0,ti:".ParameterValueType"}]},{ln:"ParameterValueType",bti:".AbstractGeneralParameterValueType",ps:[{n:"value",rq:!0,ti:".MeasureType"},{n:"dmsAngleValue",rq:!0,ti:".DMSAngleType"},{n:"stringValue",rq:!0},{n:"integerValue",rq:!0,ti:"PositiveInteger"},{n:"booleanValue",rq:!0,ti:"Boolean"},{n:"valueList",rq:!0,ti:".MeasureListType"},{n:"integerValueList",rq:!0,ti:{t:"l",bti:"Integer"}},{n:"valueFile",rq:!0},{n:"valueOfParameter",rq:!0,ti:".OperationParameterRefType"}]},{ln:"TimeGeometricPrimitivePropertyType",ps:[{n:"timeGeometricPrimitive",rq:!0,mx:!1,dom:!1,en:"_TimeGeometricPrimitive",ti:".AbstractTimeGeometricPrimitiveType",t:"er"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"TimeClockType",bti:".AbstractTimeReferenceSystemType",ps:[{n:"referenceEvent",rq:!0,ti:".StringOrRefType"},{n:"referenceTime",rq:!0,ti:"Time"},{n:"utcReference",rq:!0,ti:"Time"},{n:"dateBasis",mno:0,col:!0,ti:".TimeCalendarPropertyType"}]},{ln:"CubicSplineType",bti:".AbstractCurveSegmentType",ps:[{n:"posOrPointPropertyOrPointRep",rq:!0,mno:2,col:!0,mx:!1,dom:!1,etis:[{en:"pointRep",ti:".PointPropertyType"},{en:"pointProperty",ti:".PointPropertyType"},{en:"pos",ti:".DirectPositionType"}],t:"ers"},{n:"posList",rq:!0,ti:".DirectPositionListType"},{n:"coordinates",rq:!0,ti:".CoordinatesType"},{n:"vectorAtStart",rq:!0,ti:".VectorType"},{n:"vectorAtEnd",rq:!0,ti:".VectorType"},{n:"interpolation",an:{lp:"interpolation"},t:"a"},{n:"degree",ti:"Integer",an:{lp:"degree"},t:"a"}]},{ln:"OperationMethodRefType",ps:[{n:"operationMethod",rq:!0,en:"OperationMethod",ti:".OperationMethodType"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"LineStringPropertyType",ps:[{n:"lineString",rq:!0,en:"LineString",ti:".LineStringType"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"AbstractCoverageType",bti:".AbstractFeatureType",ps:[{n:"domainSet",rq:!0,mx:!1,dom:!1,ti:".DomainSetType",t:"er"},{n:"rangeSet",rq:!0,ti:".RangeSetType"},{n:"dimension",ti:"PositiveInteger",an:{lp:"dimension"},t:"a"}]},{ln:"TargetPropertyType",ps:[{n:"feature",rq:!0,mx:!1,en:"_Feature",ti:".AbstractFeatureType",t:"er"},{n:"geometry",rq:!0,mx:!1,dom:!1,en:"_Geometry",ti:".AbstractGeometryType",t:"er"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"TimePrimitivePropertyType",ps:[{n:"timePrimitive",rq:!0,mx:!1,dom:!1,en:"_TimePrimitive",ti:".AbstractTimePrimitiveType",t:"er"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"CategoryPropertyType",bti:".ValuePropertyType"},{ln:"LineStringType",bti:".AbstractCurveType",ps:[{n:"posOrPointPropertyOrPointRep",rq:!0,mno:2,col:!0,mx:!1,dom:!1,etis:[{en:"pointRep",ti:".PointPropertyType"},{en:"pointProperty",ti:".PointPropertyType"},{en:"coord",ti:".CoordType"},{en:"pos",ti:".DirectPositionType"}],t:"ers"},{n:"posList",rq:!0,ti:".DirectPositionListType"},{n:"coordinates",rq:!0,ti:".CoordinatesType"}]},{ln:"DerivationUnitTermType",bti:".UnitOfMeasureType",ps:[{n:"exponent",ti:"Integer",an:{lp:"exponent"},t:"a"}]},{ln:"TinType",bti:".TriangulatedSurfaceType",ps:[{n:"stopLines",mno:0,col:!0,ti:".LineStringSegmentArrayPropertyType"},{n:"breakLines",mno:0,col:!0,ti:".LineStringSegmentArrayPropertyType"},{n:"maxLength",rq:!0,ti:".LengthType"},{n:"controlPoint",rq:!0,ti:".TinType.ControlPoint"}]},{ln:"GeodeticDatumRefType",ps:[{n:"geodeticDatum",rq:!0,en:"GeodeticDatum",ti:".GeodeticDatumType"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"TimePositionType",ps:[{n:"value",ti:{t:"l"},t:"v"},{n:"frame",an:{lp:"frame"},t:"a"},{n:"calendarEraName",an:{lp:"calendarEraName"},t:"a"},{n:"indeterminatePosition",an:{lp:"indeterminatePosition"},t:"a"}]},{ln:"PrimeMeridianRefType",ps:[{n:"primeMeridian",rq:!0,en:"PrimeMeridian",ti:".PrimeMeridianType"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"VolumeType",bti:".MeasureType"},{ln:"TimeIntervalLengthType",ps:[{n:"value",ti:"Decimal",t:"v"},{n:"unit",rq:!0,an:{lp:"unit"},t:"a"},{n:"radix",ti:"PositiveInteger",an:{lp:"radix"},t:"a"},{n:"factor",ti:"Integer",an:{lp:"factor"},t:"a"}]},{ln:"ParameterValueGroupType",bti:".AbstractGeneralParameterValueType",ps:[{n:"includesValue",rq:!0,mno:2,col:!0,ti:".AbstractGeneralParameterValueType"},{n:"valuesOfGroup",rq:!0,ti:".OperationParameterGroupRefType"}]},{ln:"CartesianCSRefType",ps:[{n:"cartesianCS",rq:!0,en:"CartesianCS",ti:".CartesianCSType"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"TimeEdgePropertyType",ps:[{n:"timeEdge",rq:!0,en:"TimeEdge",ti:".TimeEdgeType"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"TopoPointPropertyType",ps:[{n:"topoPoint",rq:!0,en:"TopoPoint",ti:".TopoPointType"}]},{ln:"ProjectedCRSType",bti:".AbstractGeneralDerivedCRSType",ps:[{n:"usesCartesianCS",rq:!0,ti:".CartesianCSRefType"}]},{ln:"MultiCurveDomainType",bti:".DomainSetType"},{ln:"AbstractReferenceSystemBaseType",bti:".DefinitionType"},{ln:"PolygonPropertyType",ps:[{n:"polygon",rq:!0,en:"Polygon",ti:".PolygonType"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"PolarCSType",bti:".AbstractCoordinateSystemType"},{ln:"AbstractGeometricPrimitiveType",bti:".AbstractGeometryType"},{ln:"MultiSolidDomainType",bti:".DomainSetType"},{ln:"TopoVolumePropertyType",ps:[{n:"topoVolume",rq:!0,en:"TopoVolume",ti:".TopoVolumeType"}]},{ln:"CircleType",bti:".ArcType"},{ln:"ValueArrayPropertyType",ps:[{n:"value",rq:!0,col:!0,mx:!1,dom:!1,etis:[{en:"CountExtent",ti:{t:"l"}},{en:"Quantity",ti:".MeasureType"},{en:"Null",ti:{t:"l"}},{en:"CountList",ti:{t:"l"}},{en:"Count",ti:"Integer"},{en:"QuantityExtent",ti:".QuantityExtentType"},{en:"_Object",ti:"AnyType"},{en:"CategoryList",ti:".CodeOrNullListType"},{en:"CompositeValue",ti:".CompositeValueType"},{en:"CategoryExtent",ti:".CategoryExtentType"},{en:"Category",ti:".CodeType"},{en:"BooleanList",ti:{t:"l"}},{en:"QuantityList",ti:".MeasureOrNullListType"},{en:"Boolean",ti:"Boolean"}],t:"ers"}]},{ln:"GraphStyleType",bti:".BaseStyleDescriptorType",ps:[{n:"planar",ti:"Boolean"},{n:"directed",ti:"Boolean"},{n:"grid",ti:"Boolean"},{n:"minDistance",ti:"Double"},{n:"minAngle",ti:"Double"},{n:"graphType"},{n:"drawingType"},{n:"lineType"},{n:"aestheticCriteria",mno:0,col:!0}]},{ln:"AbstractGeneralConversionType",bti:".AbstractCoordinateOperationType"},{ln:"TopoSurfaceType",bti:".AbstractTopologyType",ps:[{n:"directedFace",rq:!0,col:!0,ti:".DirectedFacePropertyType"}]},{ln:"MultiPointDomainType",bti:".DomainSetType"},{ln:"CircleByCenterPointType",bti:".ArcByCenterPointType"},{ln:"CompositeSurfaceType",bti:".AbstractSurfaceType",ps:[{n:"surfaceMember",rq:!0,col:!0,ti:".SurfacePropertyType"}]},{ln:"MultiCurveCoverageType",bti:".AbstractDiscreteCoverageType"},{ln:"MultiLineStringType",bti:".AbstractGeometricAggregateType",ps:[{n:"lineStringMember",mno:0,col:!0,ti:".LineStringPropertyType"}]},{ln:"ImageCRSType",bti:".AbstractReferenceSystemType",ps:[{n:"usesCartesianCS",rq:!0,ti:".CartesianCSRefType"},{n:"usesObliqueCartesianCS",rq:!0,ti:".ObliqueCartesianCSRefType"},{n:"usesImageDatum",rq:!0,ti:".ImageDatumRefType"}]},{ln:"FeaturePropertyType",ps:[{n:"feature",rq:!0,mx:!1,en:"_Feature",ti:".AbstractFeatureType",t:"er"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"CoordinateSystemAxisBaseType",bti:".DefinitionType"},{ln:"GeodesicType",bti:".GeodesicStringType"},{ln:"CovarianceElementType",ps:[{n:"rowIndex",rq:!0,ti:"PositiveInteger"},{n:"columnIndex",rq:!0,ti:"PositiveInteger"},{n:"covariance",rq:!0,ti:"Double"}]},{ln:"DerivedUnitType",bti:".UnitDefinitionType",ps:[{n:"derivationUnitTerm",rq:!0,col:!0,ti:".DerivationUnitTermType"}]},{ln:"EdgeType",bti:".AbstractTopoPrimitiveType",ps:[{n:"directedNode",rq:!0,mno:2,mxo:2,col:!0,ti:".DirectedNodePropertyType"},{n:"directedFace",mno:0,col:!0,ti:".DirectedFacePropertyType"},{n:"curveProperty",ti:".CurvePropertyType"}]},{ln:"CompositeSolidPropertyType",ps:[{n:"compositeSolid",rq:!0,en:"CompositeSolid",ti:".CompositeSolidType"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"CRSRefType",ps:[{n:"crs",rq:!0,mx:!1,dom:!1,en:"_CRS",ti:".AbstractReferenceSystemType",t:"er"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"AssociationType",ps:[{n:"object",rq:!0,mx:!1,dom:!1,en:"_Object",ti:"AnyType",t:"er"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"TimeOrdinalEraPropertyType",ps:[{n:"timeOrdinalEra",rq:!0,en:"TimeOrdinalEra",ti:".TimeOrdinalEraType"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"AbstractCoordinateSystemType",bti:".AbstractCoordinateSystemBaseType",ps:[{n:"csID",mno:0,col:!0,ti:".IdentifierType"},{n:"remarks",ti:".StringOrRefType"},{n:"usesAxis",rq:!0,col:!0,ti:".CoordinateSystemAxisRefType"}]},{ln:"GridDomainType",bti:".DomainSetType"},{ln:"SolidArrayPropertyType",ps:[{n:"solid",mno:0,col:!0,mx:!1,dom:!1,en:"_Solid",ti:".AbstractSolidType",t:"er"}]},{ln:"ConventionalUnitType",bti:".UnitDefinitionType",ps:[{n:"conversionToPreferredUnit",rq:!0,ti:".ConversionToPreferredUnitType"},{n:"roughConversionToPreferredUnit",rq:!0,ti:".ConversionToPreferredUnitType"},{n:"derivationUnitTerm",mno:0,col:!0,ti:".DerivationUnitTermType"}]},{ln:"OrientableCurveType",bti:".AbstractCurveType",ps:[{n:"baseCurve",rq:!0,ti:".CurvePropertyType"},{n:"orientation",an:{lp:"orientation"},t:"a"}]},{ln:"SphereType",bti:".AbstractGriddedSurfaceType",ps:[{n:"horizontalCURVETYPE",an:{lp:"horizontalCurveType"},t:"a"},{n:"verticalCURVETYPE",an:{lp:"verticalCurveType"},t:"a"}]},{ln:"AbstractGeometricAggregateType",bti:".AbstractGeometryType"},{ln:"CurveType",bti:".AbstractCurveType",ps:[{n:"segments",rq:!0,ti:".CurveSegmentArrayPropertyType"}]},{ln:"GridEnvelopeType",ps:[{n:"low",rq:!0,ti:{t:"l",bti:"Integer"}},{n:"high",rq:!0,ti:{t:"l",bti:"Integer"}}]},{ln:"ObservationType",bti:".AbstractFeatureType",ps:[{n:"validTime",rq:!0,ti:".TimePrimitivePropertyType"},{n:"using",ti:".FeaturePropertyType"},{n:"target",mx:!1,dom:!1,ti:".TargetPropertyType",t:"er"},{n:"resultOf",rq:!0,ti:".AssociationType"}]},{ln:"BoundedFeatureType",bti:".AbstractFeatureType"},{ln:"TopoCurveType",bti:".AbstractTopologyType",ps:[{n:"directedEdge",rq:!0,col:!0,ti:".DirectedEdgePropertyType"}]},{ln:"CovarianceMatrixType",bti:".AbstractPositionalAccuracyType",ps:[{n:"unitOfMeasure",rq:!0,col:!0,ti:".UnitOfMeasureType"},{n:"includesElement",rq:!0,col:!0,ti:".CovarianceElementType"}]},{ln:"ConcatenatedOperationType",bti:".AbstractCoordinateOperationType",ps:[{n:"usesSingleOperation",rq:!0,mno:2,col:!0,ti:".SingleOperationRefType"}]},{ln:"AbstractGeneralOperationParameterRefType",ps:[{n:"generalOperationParameter",rq:!0,mx:!1,dom:!1,en:"_GeneralOperationParameter",ti:".AbstractGeneralOperationParameterType",t:"er"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"MultiSolidCoverageType",bti:".AbstractDiscreteCoverageType"},{ln:"GeographicCRSRefType",ps:[{n:"geographicCRS",rq:!0,en:"GeographicCRS",ti:".GeographicCRSType"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"SymbolType",ps:[{n:"any",mno:0,col:!0,typed:!1,mx:!1,t:"ae"},{n:"symbolType",rq:!0,an:{lp:"symbolType"},t:"a"},{n:"transform",an:{lp:"transform",ns:"http://www.opengis.net/gml"},t:"a"},{n:"about",an:{lp:"about"},t:"a"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"DirectedTopoSolidPropertyType",ps:[{n:"topoSolid",rq:!0,en:"TopoSolid",ti:".TopoSolidType"},{n:"orientation",an:{lp:"orientation"},t:"a"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"QuantityPropertyType",bti:".ValuePropertyType"},{ln:"SurfacePropertyType",ps:[{n:"surface",rq:!0,mx:!1,dom:!1,en:"_Surface",ti:".AbstractSurfaceType",t:"er"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"TemporalCRSType",bti:".AbstractReferenceSystemType",ps:[{n:"usesTemporalCS",rq:!0,ti:".TemporalCSRefType"},{n:"usesTemporalDatum",rq:!0,ti:".TemporalDatumRefType"}]},{ln:"FeatureStyleType",bti:".AbstractGMLType",ps:[{n:"featureConstraint"},{n:"geometryStyle",mno:0,col:!0,ti:".GeometryStylePropertyType"},{n:"topologyStyle",mno:0,col:!0,ti:".TopologyStylePropertyType"},{n:"labelStyle",ti:".LabelStylePropertyType"},{n:"featureType",an:{lp:"featureType"},t:"a"},{n:"baseType",an:{lp:"baseType"},t:"a"},{n:"queryGrammar",an:{lp:"queryGrammar"},t:"a"}]},{ln:"AbstractSurfaceType",bti:".AbstractGeometricPrimitiveType"},{ln:"AbstractDiscreteCoverageType",bti:".AbstractCoverageType",ps:[{n:"coverageFunction",ti:".CoverageFunctionType"}]},{ln:"MeasureOrNullListType",ps:[{n:"value",ti:{t:"l"},t:"v"},{n:"uom",rq:!0,an:{lp:"uom"},t:"a"}]},{ln:"TopologyStyleType",bti:".BaseStyleDescriptorType",ps:[{n:"symbol",rq:!0,ti:".SymbolType"},{n:"style",rq:!0},{n:"labelStyle",ti:".LabelStylePropertyType"},{n:"topologyProperty",an:{lp:"topologyProperty"},t:"a"},{n:"topologyType",an:{lp:"topologyType"},t:"a"}]},{ln:"DictionaryEntryType",ps:[{n:"definition",rq:!0,mx:!1,dom:!1,en:"Definition",ti:".DefinitionType",t:"er"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"CompositeSurfacePropertyType",ps:[{n:"compositeSurface",rq:!0,en:"CompositeSurface",ti:".CompositeSurfaceType"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"MultiLineStringPropertyType",ps:[{n:"multiLineString",rq:!0,en:"MultiLineString",ti:".MultiLineStringType"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"MeasureType",ps:[{n:"value",ti:"Double",t:"v"},{n:"uom",rq:!0,an:{lp:"uom"},t:"a"}]},{ln:"TopologyStylePropertyType",ps:[{n:"topologyStyle",en:"TopologyStyle",ti:".TopologyStyleType"},{n:"about",an:{lp:"about"},t:"a"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"OffsetCurveType",bti:".AbstractCurveSegmentType",ps:[{n:"offsetBase",rq:!0,ti:".CurvePropertyType"},{n:"distance",rq:!0,ti:".LengthType"},{n:"refDirection",ti:".VectorType"}]},{ln:"StringOrRefType",ps:[{n:"value",t:"v"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"VerticalCRSType",bti:".AbstractReferenceSystemType",ps:[{n:"usesVerticalCS",rq:!0,ti:".VerticalCSRefType"},{n:"usesVerticalDatum",rq:!0,ti:".VerticalDatumRefType"}]},{ln:"AngleType",bti:".MeasureType"},{ln:"BoundingShapeType",ps:[{n:"envelope",rq:!0,mx:!1,dom:!1,en:"Envelope",ti:".EnvelopeType",t:"er"},{n:"_null",rq:!0,en:"Null",ti:{t:"l"}}]},{ln:"TemporalCSType",bti:".AbstractCoordinateSystemType"},{ln:"GridLimitsType",ps:[{n:"gridEnvelope",rq:!0,en:"GridEnvelope",ti:".GridEnvelopeType"}]},{ln:"LinearCSType",bti:".AbstractCoordinateSystemType"},{ln:"AbstractGeneralParameterValueType"},{ln:"DirectedNodePropertyType",ps:[{n:"node",rq:!0,en:"Node",ti:".NodeType"},{n:"orientation",an:{lp:"orientation"},t:"a"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"SurfaceArrayPropertyType",ps:[{n:"surface",mno:0,col:!0,mx:!1,dom:!1,en:"_Surface",ti:".AbstractSurfaceType",t:"er"}]},{ln:"SecondDefiningParameterType",ps:[{n:"inverseFlattening",rq:!0,ti:".MeasureType"},{n:"semiMinorAxis",rq:!0,ti:".MeasureType"},{n:"isSphere",rq:!0}]},{ln:"AbstractGeometryType",bti:".AbstractGMLType",ps:[{n:"gid",an:{lp:"gid"},t:"a"},{n:"srsName",an:{lp:"srsName"},t:"a"},{n:"srsDimension",ti:"PositiveInteger",an:{lp:"srsDimension"},t:"a"},{n:"axisLabels",ti:{t:"l",bti:"NCName"},an:{lp:"axisLabels"},t:"a"},{n:"uomLabels",ti:{t:"l",bti:"NCName"},an:{lp:"uomLabels"},t:"a"}]},{ln:"PassThroughOperationType",bti:".AbstractCoordinateOperationType",ps:[{n:"modifiedCoordinate",rq:!0,col:!0,ti:"PositiveInteger"},{n:"usesOperation",rq:!0,ti:".OperationRefType"}]},{ln:"AbstractCoordinateOperationBaseType",bti:".DefinitionType"},{ln:"ArcStringByBulgeType",bti:".AbstractCurveSegmentType",ps:[{n:"posOrPointPropertyOrPointRep",rq:!0,mno:2,col:!0,mx:!1,dom:!1,etis:[{en:"pointRep",ti:".PointPropertyType"},{en:"pointProperty",ti:".PointPropertyType"},{en:"pos",ti:".DirectPositionType"}],t:"ers"},{n:"posList",rq:!0,ti:".DirectPositionListType"},{n:"coordinates",rq:!0,ti:".CoordinatesType"},{n:"bulge",rq:!0,col:!0,ti:"Double"},{n:"normal",rq:!0,col:!0,ti:".VectorType"},{n:"interpolation",an:{lp:"interpolation"},t:"a"},{n:"numArc",ti:"Integer",an:{lp:"numArc"},t:"a"}]},{ln:"MovingObjectStatusType",bti:".AbstractTimeSliceType",ps:[{n:"location",rq:!0,mx:!1,dom:!1,ti:".LocationPropertyType",t:"er"},{n:"speed",ti:".MeasureType"},{n:"bearing",ti:".DirectionPropertyType"},{n:"acceleration",ti:".MeasureType"},{n:"elevation",ti:".MeasureType"},{n:"status",ti:".StringOrRefType"}]},{ln:"FeatureArrayPropertyType",ps:[{n:"feature",mno:0,col:!0,mx:!1,en:"_Feature",ti:".AbstractFeatureType",t:"er"}]},{ln:"CoordinateSystemAxisRefType",ps:[{n:"coordinateSystemAxis",rq:!0,en:"CoordinateSystemAxis",ti:".CoordinateSystemAxisType"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"FeatureCollectionType",bti:".AbstractFeatureCollectionType"},{ln:"TimeEdgeType",bti:".AbstractTimeTopologyPrimitiveType",ps:[{n:"start",rq:!0,ti:".TimeNodePropertyType"},{n:"end",rq:!0,ti:".TimeNodePropertyType"},{n:"extent",ti:".TimePeriodPropertyType"}]},{ln:"OperationRefType",ps:[{n:"operation",rq:!0,mx:!1,dom:!1,en:"_Operation",ti:".AbstractCoordinateOperationType",t:"er"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"RelativeInternalPositionalAccuracyType",bti:".AbstractPositionalAccuracyType",ps:[{n:"result",rq:!0,ti:".MeasureType"}]},{ln:"DirectedObservationType",bti:".ObservationType",ps:[{n:"direction",rq:!0,ti:".DirectionPropertyType"}]},{ln:"CompositeValueType",bti:".AbstractGMLType",ps:[{n:"valueComponent",mno:0,col:!0,ti:".ValuePropertyType"},{n:"valueComponents",ti:".ValueArrayPropertyType"}]},{ln:"TriangleType",bti:".AbstractSurfacePatchType",ps:[{n:"exterior",rq:!0,mx:!1,dom:!1,ti:".AbstractRingPropertyType",t:"er"},{n:"interpolation",an:{lp:"interpolation"},t:"a"}]},{ln:"RangeSetType",ps:[{n:"valueArray",rq:!0,col:!0,en:"ValueArray",ti:".ValueArrayType"},{n:"scalarValueList",rq:!0,col:!0,mx:!1,dom:!1,etis:[{en:"CategoryList",ti:".CodeOrNullListType"},{en:"CountList",ti:{t:"l"}},{en:"QuantityList",ti:".MeasureOrNullListType"},{en:"BooleanList",ti:{t:"l"}}],t:"ers"},{n:"dataBlock",rq:!0,en:"DataBlock",ti:".DataBlockType"},{n:"file",rq:!0,en:"File",ti:".FileType"}]},{ln:"PriorityLocationPropertyType",bti:".LocationPropertyType",ps:[{n:"priority",an:{lp:"priority"},t:"a"}]},{ln:"TriangulatedSurfaceType",bti:".SurfaceType"},{ln:"VerticalCSRefType",ps:[{n:"verticalCS",rq:!0,en:"VerticalCS",ti:".VerticalCSType"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"MultiSurfacePropertyType",ps:[{n:"multiSurface",rq:!0,en:"MultiSurface",ti:".MultiSurfaceType"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"ReferenceSystemRefType",ps:[{n:"referenceSystem",rq:!0,mx:!1,dom:!1,en:"_ReferenceSystem",ti:".AbstractReferenceSystemType",t:"er"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"TimeCalendarPropertyType",ps:[{n:"timeCalendar",rq:!0,en:"TimeCalendar",ti:".TimeCalendarType"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"CodeOrNullListType",ps:[{n:"value",ti:{t:"l"},t:"v"},{n:"codeSpace",an:{lp:"codeSpace"},t:"a"}]},{ln:"AbstractPositionalAccuracyType",ps:[{n:"measureDescription",ti:".CodeType"}]},{ln:"GeocentricCRSType",bti:".AbstractReferenceSystemType",ps:[{n:"usesCartesianCS",rq:!0,ti:".CartesianCSRefType"},{n:"usesSphericalCS",rq:!0,ti:".SphericalCSRefType"},{n:"usesGeodeticDatum",rq:!0,ti:".GeodeticDatumRefType"}]},{ln:"VectorType",ps:[{n:"value",ti:{t:"l",bti:"Double"},t:"v"},{n:"srsName",an:{lp:"srsName"},t:"a"},{n:"srsDimension",ti:"PositiveInteger",an:{lp:"srsDimension"},t:"a"},{n:"axisLabels",ti:{t:"l",bti:"NCName"},an:{lp:"axisLabels"},t:"a"},{n:"uomLabels",ti:{t:"l",bti:"NCName"},an:{lp:"uomLabels"},t:"a"}]},{ln:"LinearRingType",bti:".AbstractRingType",ps:[{n:"posOrPointPropertyOrPointRep",rq:!0,mno:4,col:!0,mx:!1,dom:!1,etis:[{en:"pointRep",ti:".PointPropertyType"},{en:"pointProperty",ti:".PointPropertyType"},{en:"pos",ti:".DirectPositionType"}],t:"ers"},{n:"posList",rq:!0,ti:".DirectPositionListType"},{n:"coordinates",rq:!0,ti:".CoordinatesType"},{n:"coord",rq:!0,mno:4,col:!0,ti:".CoordType"}]},{ln:"GeometricComplexType",bti:".AbstractGeometryType",ps:[{n:"element",rq:!0,col:!0,ti:".GeometricPrimitivePropertyType"}]},{ln:"SequenceRuleType",ps:[{n:"value",t:"v"},{n:"order",an:{lp:"order"},t:"a"}]},{ln:"CompositeCurveType",bti:".AbstractCurveType",ps:[{n:"curveMember",rq:!0,col:!0,ti:".CurvePropertyType"}]},{ln:"ConeType",bti:".AbstractGriddedSurfaceType",ps:[{n:"horizontalCURVETYPE",an:{lp:"horizontalCurveType"},t:"a"},{n:"verticalCURVETYPE",an:{lp:"verticalCurveType"},t:"a"}]},{ln:"PixelInCellType",bti:".CodeType"},{ln:"VerticalDatumType",bti:".AbstractDatumType",ps:[{n:"verticalDatumType",ti:".VerticalDatumTypeType"}]},{ln:"TrackType",bti:".HistoryPropertyType"},{ln:"ContainerPropertyType",ps:[{n:"face",rq:!0,en:"Face",ti:".FaceType"},{n:"topoSolid",rq:!0,en:"TopoSolid",ti:".TopoSolidType"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"ImageDatumRefType",ps:[{n:"imageDatum",rq:!0,en:"ImageDatum",ti:".ImageDatumType"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"PointType",bti:".AbstractGeometricPrimitiveType",ps:[{n:"pos",rq:!0,ti:".DirectPositionType"},{n:"coordinates",rq:!0,ti:".CoordinatesType"},{n:"coord",rq:!0,ti:".CoordType"}]},{ln:"AbstractGMLType",ps:[{n:"metaDataProperty",mno:0,col:!0,ti:".MetaDataPropertyType"},{n:"description",ti:".StringOrRefType"},{n:"name",mno:0,col:!0,mx:!1,dom:!1,ti:".CodeType",t:"er"},{n:"id",ti:"ID",an:{lp:"id",ns:"http://www.opengis.net/gml"},t:"a"}]},{ln:"EllipsoidBaseType",bti:".DefinitionType"},{ln:"BezierType",bti:".BSplineType"},{ln:"CoordinateReferenceSystemRefType",ps:[{n:"coordinateReferenceSystem",rq:!0,mx:!1,dom:!1,en:"_CoordinateReferenceSystem",ti:".AbstractReferenceSystemType",t:"er"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"GeometryPropertyType",ps:[{n:"geometry",rq:!0,mx:!1,dom:!1,en:"_Geometry",ti:".AbstractGeometryType",t:"er"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"AngleChoiceType",ps:[{n:"angle",rq:!0,ti:".MeasureType"},{n:"dmsAngle",rq:!0,ti:".DMSAngleType"}]},{ln:"GraphStylePropertyType",ps:[{n:"graphStyle",en:"GraphStyle",ti:".GraphStyleType"},{n:"about",an:{lp:"about"},t:"a"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"TopoSurfacePropertyType",ps:[{n:"topoSurface",rq:!0,en:"TopoSurface",ti:".TopoSurfaceType"}]},{ln:"TimeOrdinalEraType",bti:".DefinitionType",ps:[{n:"relatedTime",mno:0,col:!0,ti:".RelatedTimeType"},{n:"start",rq:!0,ti:".TimeNodePropertyType"},{n:"end",rq:!0,ti:".TimeNodePropertyType"},{n:"extent",ti:".TimePeriodPropertyType"},{n:"member",mno:0,col:!0,ti:".TimeOrdinalEraPropertyType"},{n:"group",ti:".ReferenceType"}]},{ln:"DirectPositionType",ps:[{n:"value",ti:{t:"l",bti:"Double"},t:"v"},{n:"srsName",an:{lp:"srsName"},t:"a"},{n:"srsDimension",ti:"PositiveInteger",an:{lp:"srsDimension"},t:"a"},{n:"axisLabels",ti:{t:"l",bti:"NCName"},an:{lp:"axisLabels"},t:"a"},{n:"uomLabels",ti:{t:"l",bti:"NCName"},an:{lp:"uomLabels"},t:"a"}]},{ln:"CompoundCRSType",bti:".AbstractReferenceSystemType",ps:[{n:"includesCRS",rq:!0,mno:2,col:!0,ti:".CoordinateReferenceSystemRefType"}]},{ln:"AbstractCoordinateSystemBaseType",bti:".DefinitionType"},{ln:"CategoryExtentType",bti:".CodeOrNullListType"},{ln:"RectifiedGridCoverageType",bti:".AbstractDiscreteCoverageType"},{ln:"CoordinateSystemRefType",ps:[{n:"coordinateSystem",rq:!0,mx:!1,dom:!1,en:"_CoordinateSystem",ti:".AbstractCoordinateSystemType",t:"er"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"AbstractFeatureType",bti:".AbstractGMLType",ps:[{n:"boundedBy",ti:".BoundingShapeType"},{n:"location",mx:!1,dom:!1,ti:".LocationPropertyType",t:"er"}]},{ln:"TemporalDatumType",bti:".TemporalDatumBaseType",ps:[{n:"origin",rq:!0,ti:"DateTime"}]},{ln:"AbstractTimeObjectType",bti:".AbstractGMLType"},{ln:"TimeTopologyComplexPropertyType",ps:[{n:"timeTopologyComplex",rq:!0,en:"TimeTopologyComplex",ti:".TimeTopologyComplexType"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"DirectPositionListType",ps:[{n:"value",ti:{t:"l",bti:"Double"},t:"v"},{n:"count",ti:"PositiveInteger",an:{lp:"count"},t:"a"},{n:"srsName",an:{lp:"srsName"},t:"a"},{n:"srsDimension",ti:"PositiveInteger",an:{lp:"srsDimension"},t:"a"},{n:"axisLabels",ti:{t:"l",bti:"NCName"},an:{lp:"axisLabels"},t:"a"},{n:"uomLabels",ti:{t:"l",bti:"NCName"},an:{lp:"uomLabels"},t:"a"}]},{ln:"TimeCalendarEraPropertyType",ps:[{n:"timeCalendarEra",rq:!0,en:"TimeCalendarEra",ti:".TimeCalendarEraType"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"ObliqueCartesianCSType",bti:".AbstractCoordinateSystemType"},{ln:"ImageDatumType",bti:".AbstractDatumType",ps:[{n:"pixelInCell",rq:!0,ti:".PixelInCellType"}]},{ln:"QuantityExtentType",bti:".MeasureOrNullListType"},{ln:"CodeListType",ps:[{n:"value",ti:{t:"l",bti:"Name"},t:"v"},{n:"codeSpace",an:{lp:"codeSpace"},t:"a"}]},{ln:"AbstractContinuousCoverageType",bti:".AbstractCoverageType",ps:[{n:"coverageFunction",ti:".CoverageFunctionType"}]},{ln:"LengthType",bti:".MeasureType"},{ln:"OperationParameterGroupType",bti:".OperationParameterGroupBaseType",ps:[{n:"groupID",mno:0,col:!0,ti:".IdentifierType"},{n:"remarks",ti:".StringOrRefType"},{n:"maximumOccurs",ti:"PositiveInteger"},{n:"includesParameter",rq:!0,mno:2,col:!0,ti:".AbstractGeneralOperationParameterRefType"}]},{ln:"AbstractCoordinateOperationType",bti:".AbstractCoordinateOperationBaseType",ps:[{n:"coordinateOperationID",mno:0,col:!0,ti:".IdentifierType"},{n:"remarks",ti:".StringOrRefType"},{n:"operationVersion"},{n:"validArea",ti:".ExtentType"},{n:"scope"},{n:"positionalAccuracy",mno:0,col:!0,mx:!1,dom:!1,en:"_positionalAccuracy",ti:".AbstractPositionalAccuracyType",t:"er"},{n:"sourceCRS",ti:".CRSRefType"},{n:"targetCRS",ti:".CRSRefType"}]},{ln:"LinearCSRefType",ps:[{n:"linearCS",rq:!0,en:"LinearCS",ti:".LinearCSType"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"VerticalDatumRefType",ps:[{n:"verticalDatum",rq:!0,en:"VerticalDatum",ti:".VerticalDatumType"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"DerivedCRSRefType",ps:[{n:"derivedCRS",rq:!0,en:"DerivedCRS",ti:".DerivedCRSType"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"MultiSolidType",bti:".AbstractGeometricAggregateType",ps:[{n:"solidMember",mno:0,col:!0,ti:".SolidPropertyType"},{n:"solidMembers",ti:".SolidArrayPropertyType"}]},{ln:"TimeInstantType",bti:".AbstractTimeGeometricPrimitiveType",ps:[{n:"timePosition",rq:!0,ti:".TimePositionType"}]},{ln:"ObliqueCartesianCSRefType",ps:[{n:"obliqueCartesianCS",rq:!0,en:"ObliqueCartesianCS",ti:".ObliqueCartesianCSType"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"AbstractRingType",bti:".AbstractGeometryType"},{ln:"SphericalCSType",bti:".AbstractCoordinateSystemType"},{ln:"RectifiedGridDomainType",bti:".DomainSetType"},{ln:"MultiSolidPropertyType",ps:[{n:"multiSolid",rq:!0,en:"MultiSolid",ti:".MultiSolidType"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"DefinitionType",bti:".AbstractGMLType"},{ln:"FaceType",bti:".AbstractTopoPrimitiveType",ps:[{n:"directedEdge",rq:!0,col:!0,ti:".DirectedEdgePropertyType"},{n:"directedTopoSolid",mno:0,mxo:2,col:!0,ti:".DirectedTopoSolidPropertyType"},{n:"surfaceProperty",ti:".SurfacePropertyType"}]},{ln:"CylindricalCSRefType",ps:[{n:"cylindricalCS",rq:!0,en:"CylindricalCS",ti:".CylindricalCSType"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"AbstractReferenceSystemType",bti:".AbstractReferenceSystemBaseType",ps:[{n:"srsID",mno:0,col:!0,ti:".IdentifierType"},{n:"remarks",ti:".StringOrRefType"},{n:"validArea",ti:".ExtentType"},{n:"scope"}]},{ln:"SingleOperationRefType",ps:[{n:"singleOperation",rq:!0,mx:!1,dom:!1,en:"_SingleOperation",ti:".AbstractCoordinateOperationType",t:"er"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"TimeTopologyPrimitivePropertyType",ps:[{n:"timeTopologyPrimitive",rq:!0,mx:!1,dom:!1,en:"_TimeTopologyPrimitive",ti:".AbstractTimeTopologyPrimitiveType",t:"er"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"EngineeringCRSRefType",ps:[{n:"engineeringCRS",rq:!0,en:"EngineeringCRS",ti:".EngineeringCRSType"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"ScaleType",bti:".MeasureType"},{ln:"TimeCalendarEraType",bti:".DefinitionType",ps:[{n:"referenceEvent",rq:!0,ti:".StringOrRefType"},{n:"referenceDate",ti:"Date"},{n:"julianReference",rq:!0,ti:"Decimal"},{n:"epochOfUse",rq:!0,ti:".TimePeriodPropertyType"}]},{ln:"CoordinateSystemAxisType",bti:".CoordinateSystemAxisBaseType",ps:[{n:"axisID",mno:0,col:!0,ti:".IdentifierType"},{n:"remarks",ti:".StringOrRefType"},{n:"axisAbbrev",rq:!0,ti:".CodeType"},{n:"axisDirection",rq:!0,ti:".CodeType"},{n:"uom",rq:!0,an:{lp:"uom",ns:"http://www.opengis.net/gml"},t:"a"}]},{ln:"EllipsoidType",bti:".EllipsoidBaseType",ps:[{n:"ellipsoidID",mno:0,col:!0,ti:".IdentifierType"},{n:"remarks",ti:".StringOrRefType"},{n:"semiMajorAxis",rq:!0,ti:".MeasureType"},{n:"secondDefiningParameter",rq:!0,ti:".SecondDefiningParameterType"}]},{ln:"TopoComplexMemberType",ps:[{n:"topoComplex",en:"TopoComplex",ti:".TopoComplexType"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"CoverageFunctionType",ps:[{n:"mappingRule",rq:!0,en:"MappingRule",ti:".StringOrRefType"},{n:"gridFunction",rq:!0,mx:!1,dom:!1,en:"GridFunction",ti:".GridFunctionType",t:"er"}]},{ln:"TimeNodePropertyType",ps:[{n:"timeNode",rq:!0,en:"TimeNode",ti:".TimeNodeType"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"AbstractRingPropertyType",ps:[{n:"ring",rq:!0,mx:!1,dom:!1,en:"_Ring",ti:".AbstractRingType",t:"er"}]},{ln:"LinearRingPropertyType",ps:[{n:"linearRing",rq:!0,en:"LinearRing",ti:".LinearRingType"}]},{ln:"DirectionVectorType",ps:[{n:"vector",rq:!0,ti:".VectorType"},{n:"horizontalAngle",rq:!0,ti:".AngleType"},{n:"verticalAngle",rq:!0,ti:".AngleType"}]},{ln:"TimeTopologyComplexType",bti:".AbstractTimeComplexType",ps:[{n:"primitive",rq:!0,col:!0,ti:".TimeTopologyPrimitivePropertyType"}]},{t:"enum",ln:"SignType",vs:["-","+"]},{t:"enum",ln:"CompassPointEnumeration",vs:["N","NNE","NE","ENE","E","ESE","SE","SSE","S","SSW","SW","WSW","W","WNW","NW","NNW"]},{t:"enum",ln:"AesheticCriteriaType",vs:["MIN_CROSSINGS","MIN_AREA","MIN_BENDS","MAX_BENDS","UNIFORM_BENDS","MIN_SLOPES","MIN_EDGE_LENGTH","MAX_EDGE_LENGTH","UNIFORM_EDGE_LENGTH","MAX_ANGULAR_RESOLUTION","MIN_ASPECT_RATIO","MAX_SYMMETRIES"]},{t:"enum",ln:"IncrementOrder",vs:["+x+y","+y+x","+x-y","-x-y"]},{t:"enum",ln:"KnotTypesType",vs:["uniform","quasiUniform","piecewiseBezier"]},{t:"enum",ln:"TimeIndeterminateValueType",vs:["after","before","now","unknown"]},{t:"enum",ln:"CurveInterpolationType",vs:["linear","geodesic","circularArc3Points","circularArc2PointWithBulge","circularArcCenterPointWithRadius","elliptical","clothoid","conic","polynomialSpline","cubicSpline","rationalSpline"]},{t:"enum",ln:"GraphTypeType",vs:["TREE","BICONNECTED"]},{t:"enum",ln:"SuccessionType",vs:["substitution","division","fusion","initiation"]},{t:"enum",ln:"SurfaceInterpolationType",vs:["none","planar","spherical","elliptical","conic","tin","parametricCurve","polynomialSpline","rationalSpline","triangulatedSpline"]},{t:"enum",ln:"QueryGrammarEnumeration",vs:["xpath","xquery","other"]},{t:"enum",ln:"DrawingTypeType",vs:["POLYLINE","ORTHOGONAL"]},{t:"enum",ln:"SequenceRuleNames",vs:["Linear","Boustrophedonic","Cantor-diagonal","Spiral","Morton","Hilbert"]},{t:"enum",ln:"SymbolTypeEnumeration",vs:["svg","xpath","other"]},{t:"enum",ln:"LineTypeType",vs:["STRAIGHT","BENT"]},{t:"enum",ln:"FileValueModelType",vs:["Record Interleaved"]}],eis:[{en:"topoPointProperty",ti:".TopoPointPropertyType"},{en:"CartesianCS",ti:".CartesianCSType",sh:"_CoordinateSystem"},{en:"solidMembers",ti:".SolidArrayPropertyType"},{en:"sourceCRS",ti:".CRSRefType"},{en:"version"},{en:"DerivedCRS",ti:".DerivedCRSType",sh:"_GeneralDerivedCRS"},{en:"Face",ti:".FaceType",sh:"_TopoPrimitive"},{en:"boundedBy",ti:".BoundingShapeType"},{en:"_TopoPrimitive",ti:".AbstractTopoPrimitiveType",sh:"_Topology"},{en:"usesEllipsoidalCS",ti:".EllipsoidalCSRefType"},{en:"usesTemporalDatum",ti:".TemporalDatumRefType"},{en:"srsID",ti:".IdentifierType"},{en:"multiCurveProperty",ti:".MultiCurvePropertyType"},{en:"RectifiedGrid",ti:".RectifiedGridType",sh:"_ImplicitGeometry"},{en:"degrees",ti:".DegreesType"},{en:"obliqueCartesianCSRef",ti:".ObliqueCartesianCSRefType"},{en:"usesEngineeringDatum",ti:".EngineeringDatumRefType"},{en:"domainSet",ti:".DomainSetType"},{en:"ConcatenatedOperation",ti:".ConcatenatedOperationType",sh:"_CoordinateOperation"},{en:"operationMethodRef",ti:".OperationMethodRefType"},{en:"sourceDimensions",ti:"PositiveInteger"},{en:"GraphStyle",ti:".GraphStyleType",sh:"_GML"},{en:"TimePeriod",ti:".TimePeriodType",sh:"_TimeGeometricPrimitive"},{en:"doubleOrNullTupleList",ti:{t:"l"}},{en:"surfaceMember",ti:".SurfacePropertyType"},{en:"Cone",ti:".ConeType",sh:"_GriddedSurface"},{en:"polygonProperty",ti:".PolygonPropertyType"},{en:"pointMember",ti:".PointPropertyType"},{en:"integerValue",ti:"PositiveInteger"},{en:"_Ring",ti:".AbstractRingType",sh:"_Geometry"},{en:"CompositeValue",ti:".CompositeValueType"},{en:"temporalDatumRef",ti:".TemporalDatumRefType"},{en:"semiMinorAxis",ti:".MeasureType"},{en:"geometryMembers",ti:".GeometryArrayPropertyType"},{en:"coordinateSystemAxisRef",ti:".CoordinateSystemAxisRefType"},{en:"polarCSRef",ti:".PolarCSRefType"},{en:"_ParametricCurveSurface",ti:".AbstractParametricCurveSurfaceType",sh:"_SurfacePatch"},{en:"TimeCalendar",ti:".TimeCalendarType",sh:"_TimeReferenceSystem"},{en:"Ring",ti:".RingType",sh:"_Ring"},{en:"verticalDatumRef",ti:".VerticalDatumRefType"},{en:"temporalExtent",ti:".TimePeriodType"},{en:"relativeInternalPositionalAccuracy",ti:".RelativeInternalPositionalAccuracyType",sh:"_positionalAccuracy"},{en:"Quantity",ti:".MeasureType"},{en:"Sphere",ti:".SphereType",sh:"_GriddedSurface"},{en:"multiEdgeOf",ti:".MultiCurvePropertyType"},{en:"_GeometricAggregate",ti:".AbstractGeometricAggregateType",sh:"_Geometry"},{en:"symbol",ti:".SymbolType"},{en:"graphStyle",ti:".GraphStylePropertyType"},{en:"cylindricalCSRef",ti:".CylindricalCSRefType"},{en:"geographicCRSRef",ti:".GeographicCRSRefType"},{en:"parameterValueGroup",ti:".ParameterValueGroupType",sh:"_generalParameterValue"},{en:"coordinateSystemRef",ti:".CoordinateSystemRefType"},{en:"_strictAssociation",ti:".AssociationType"},{en:"DefinitionCollection",ti:".DictionaryType",sh:"Definition"},{en:"GeometricComplex",ti:".GeometricComplexType",sh:"_Geometry"},{en:"FeatureCollection",ti:".FeatureCollectionType",sh:"_Feature"},{en:"Clothoid",ti:".ClothoidType",sh:"_CurveSegment"},{en:"methodFormula",ti:".CodeType"},{en:"Edge",ti:".EdgeType",sh:"_TopoPrimitive"},{en:"polygonPatches",ti:".PolygonPatchArrayPropertyType",sh:"patches"},{en:"meridianName",ti:".CodeType",sh:"name"},{en:"CategoryList",ti:".CodeOrNullListType"},{en:"integerValueList",ti:{t:"l",bti:"Integer"}},{en:"usesParameter",ti:".AbstractGeneralOperationParameterRefType"},{en:"track",ti:".TrackType",sh:"history"},{en:"ImageCRS",ti:".ImageCRSType",sh:"_CoordinateReferenceSystem"},{en:"temporalCRSRef",ti:".TemporalCRSRefType"},{en:"dmsAngle",ti:".DMSAngleType"},{en:"columnIndex",ti:"PositiveInteger"},{en:"target",ti:".TargetPropertyType"},{en:"DerivedUnit",ti:".DerivedUnitType",sh:"UnitDefinition"},{en:"outerBoundaryIs",ti:".AbstractRingPropertyType",sh:"exterior"},{en:"ProjectedCRS",ti:".ProjectedCRSType",sh:"_GeneralDerivedCRS"},{en:"duration",ti:"Duration"},{en:"indirectEntry",ti:".IndirectEntryType"},{en:"pointArrayProperty",ti:".PointArrayPropertyType"},{en:"GridCoverage",ti:".GridCoverageType",sh:"_DiscreteCoverage"},{en:"solidMember",ti:".SolidPropertyType"},{en:"MultiPointCoverage",ti:".MultiPointCoverageType",sh:"_DiscreteCoverage"},{en:"verticalCSRef",ti:".VerticalCSRefType"},{en:"featureProperty",ti:".FeaturePropertyType"},{en:"cartesianCSRef",ti:".CartesianCSRefType"},{en:"concatenatedOperationRef",ti:".ConcatenatedOperationRefType"},{en:"Polygon",ti:".PolygonType",sh:"_Surface"},{en:"Style",ti:".StyleType",sh:"_Style"},{en:"TopoSolid",ti:".TopoSolidType",sh:"_TopoPrimitive"},{en:"engineeringCRSRef",ti:".EngineeringCRSRefType"},{en:"segments",ti:".CurveSegmentArrayPropertyType"},{en:"derivedCRSRef",ti:".DerivedCRSRefType"},{en:"BaseUnit",ti:".BaseUnitType",sh:"UnitDefinition"},{en:"DirectedObservationAtDistance",ti:".DirectedObservationAtDistanceType",sh:"DirectedObservation"},{en:"LineStringSegment",ti:".LineStringSegmentType",sh:"_CurveSegment"},{en:"coord",ti:".CoordType"},{en:"CoordinateSystemAxis",ti:".CoordinateSystemAxisType",sh:"Definition"},{en:"MultiSolidCoverage",ti:".MultiSolidCoverageType",sh:"_DiscreteCoverage"},{en:"dataSource",ti:".StringOrRefType"},{en:"subComplex",ti:".TopoComplexMemberType"},{en:"featureMember",ti:".FeaturePropertyType"},{en:"TopoVolume",ti:".TopoVolumeType"},{en:"rectifiedGridDomain",ti:".RectifiedGridDomainType",sh:"domainSet"},{en:"rowIndex",ti:"PositiveInteger"},{en:"LabelStyle",ti:".LabelStyleType",sh:"_GML"},{en:"TimeInstant",ti:".TimeInstantType",sh:"_TimeGeometricPrimitive"},{en:"trianglePatches",ti:".TrianglePatchArrayPropertyType",sh:"patches"},{en:"_SingleOperation",ti:".AbstractCoordinateOperationType",sh:"_CoordinateOperation"},{en:"IndexMap",ti:".IndexMapType",sh:"GridFunction"},{en:"OperationMethod",ti:".OperationMethodType",sh:"Definition"},{en:"ellipsoidalCSRef",ti:".EllipsoidalCSRefType"},{en:"directedNode",ti:".DirectedNodePropertyType"},{en:"TopologyStyle",ti:".TopologyStyleType",sh:"_GML"},{en:"generalConversionRef",ti:".GeneralConversionRefType"},{en:"crsRef",ti:".CRSRefType"},{en:"CountList",ti:{t:"l"}},{en:"dictionaryEntry",ti:".DictionaryEntryType"},{en:"description",ti:".StringOrRefType"},{en:"GeocentricCRS",ti:".GeocentricCRSType",sh:"_CoordinateReferenceSystem"},{en:"TemporalDatum",ti:".TemporalDatumType",sh:"_Datum"},{en:"position",ti:".PointPropertyType"},{en:"_GeometricPrimitive",ti:".AbstractGeometricPrimitiveType",sh:"_Geometry"},{en:"OrientableCurve",ti:".OrientableCurveType",sh:"_Curve"},{en:"ArcString",ti:".ArcStringType",sh:"_CurveSegment"},{en:"pixelInCell",ti:".PixelInCellType"},{en:"patches",ti:".SurfacePatchArrayPropertyType"},{en:"_Solid",ti:".AbstractSolidType",sh:"_GeometricPrimitive"},{en:"featureMembers",ti:".FeatureArrayPropertyType"},{en:"verticalDatumType",ti:".VerticalDatumTypeType"},{en:"_SurfacePatch",ti:".AbstractSurfacePatchType"},{en:"directedFace",ti:".DirectedFacePropertyType"},{en:"File",ti:".FileType"},{en:"includesValue",ti:".AbstractGeneralParameterValueType",sh:"_generalParameterValue"},{en:"temporalCSRef",ti:".TemporalCSRefType"},{en:"MultiPolygon",ti:".MultiPolygonType",sh:"_GeometricAggregate"},{en:"result",ti:".MeasureType"},{en:"Count",ti:"Integer"},{en:"RectifiedGridCoverage",ti:".RectifiedGridCoverageType",sh:"_DiscreteCoverage"},{en:"_Geometry",ti:".AbstractGeometryType",sh:"_GML"},{en:"minimumOccurs",ti:"NonNegativeInteger"},{en:"stringValue"},{en:"multiPosition",ti:".MultiPointPropertyType"},{en:"datumID",ti:".IdentifierType"},{en:"decimalMinutes",ti:"Decimal"},{en:"MultiSurface",ti:".MultiSurfaceType",sh:"_GeometricAggregate"},{en:"defaultStyle",ti:".DefaultStylePropertyType"},{en:"Definition",ti:".DefinitionType",sh:"_GML"},{en:"engineeringDatumRef",ti:".EngineeringDatumRefType"},{en:"CountExtent",ti:{t:"l"}},{en:"operationRef",ti:".OperationRefType"},{en:"PolyhedralSurface",ti:".PolyhedralSurfaceType",sh:"Surface"},{en:"projectedCRSRef",ti:".ProjectedCRSRefType"},{en:"methodID",ti:".IdentifierType"},{en:"_Datum",ti:".AbstractDatumType",sh:"Definition"},{en:"innerBoundaryIs",ti:".AbstractRingPropertyType",sh:"interior"},{en:"inverseFlattening",ti:".MeasureType"},{en:"operationParameterGroupRef",ti:".OperationParameterRefType"},{en:"isolated",ti:".IsolatedPropertyType"},{en:"FeatureStyle",ti:".FeatureStyleType",sh:"_GML"},{en:"TemporalCS",ti:".TemporalCSType",sh:"_CoordinateSystem"},{en:"gridDomain",ti:".GridDomainType",sh:"domainSet"},{en:"derivedCRSType",ti:".DerivedCRSTypeType"},{en:"Node",ti:".NodeType",sh:"_TopoPrimitive"},{en:"definitionMember",ti:".DictionaryEntryType",sh:"dictionaryEntry"},{en:"coordinateOperationName",ti:".CodeType",sh:"name"},{en:"TopoComplex",ti:".TopoComplexType",sh:"_Topology"},{en:"lineStringMember",ti:".LineStringPropertyType"},{en:"DefinitionProxy",ti:".DefinitionProxyType",sh:"Definition"},{en:"modifiedCoordinate",ti:"PositiveInteger"},{en:"groupName",ti:".CodeType",sh:"name"},{en:"EngineeringCRS",ti:".EngineeringCRSType",sh:"_CoordinateReferenceSystem"},{en:"groupID",ti:".IdentifierType"},{en:"_GeneralDerivedCRS",ti:".AbstractGeneralDerivedCRSType",sh:"_CoordinateReferenceSystem"},{en:"CylindricalCS",ti:".CylindricalCSType",sh:"_CoordinateSystem"},{en:"directedEdge",ti:".DirectedEdgePropertyType"},{en:"multiCurveDomain",ti:".MultiCurveDomainType",sh:"domainSet"},{en:"topoPrimitiveMembers",ti:".TopoPrimitiveArrayAssociationType"},{en:"OperationParameterGroup",ti:".OperationParameterGroupType",sh:"_GeneralOperationParameter"},{en:"GeographicCRS",ti:".GeographicCRSType",sh:"_CoordinateReferenceSystem"},{en:"coordinates",ti:".CoordinatesType"},{en:"QuantityExtent",ti:".QuantityExtentType"},{en:"pointMembers",ti:".PointArrayPropertyType"},{en:"LineString",ti:".LineStringType",sh:"_Curve"},{en:"LocationKeyWord",ti:".CodeType"},{en:"_TimePrimitive",ti:".AbstractTimePrimitiveType",sh:"_TimeObject"},{en:"MultiCurve",ti:".MultiCurveType",sh:"_GeometricAggregate"},{en:"featureStyle",ti:".FeatureStylePropertyType"},{en:"booleanValue",ti:"Boolean"},{en:"_FeatureCollection",ti:".AbstractFeatureCollectionType",sh:"_Feature"},{en:"Solid",ti:".SolidType",sh:"_Solid"},{en:"Geodesic",ti:".GeodesicType",sh:"GeodesicString"},{en:"metaDataProperty",ti:".MetaDataPropertyType"},{en:"Bag",ti:".BagType",sh:"_GML"},{en:"multiCoverage",ti:".MultiSurfacePropertyType"},{en:"usesValue",ti:".ParameterValueType"},{en:"tupleList",ti:".CoordinatesType"},{en:"PassThroughOperation",ti:".PassThroughOperationType",sh:"_SingleOperation"},{en:"LabelExpression",sc:".LabelType"},{en:"multiPointProperty",ti:".MultiPointPropertyType"},{en:"parameterID",ti:".IdentifierType"},{en:"superComplex",ti:".TopoComplexMemberType"},{en:"Surface",ti:".SurfaceType",sh:"_Surface"},{en:"EngineeringDatum",ti:".EngineeringDatumType",sh:"_Datum"},{en:"_ContinuousCoverage",ti:".AbstractContinuousCoverageType",sh:"_Coverage"},{en:"greenwichLongitude",ti:".AngleChoiceType"},{en:"sphericalCSRef",ti:".SphericalCSRefType"},{en:"OffsetCurve",ti:".OffsetCurveType",sh:"_CurveSegment"},{en:"EllipsoidalCS",ti:".EllipsoidalCSType",sh:"_CoordinateSystem"},{en:"VerticalDatum",ti:".VerticalDatumType",sh:"_Datum"},{en:"baseCRS",ti:".CoordinateReferenceSystemRefType"},{en:"SphericalCS",ti:".SphericalCSType",sh:"_CoordinateSystem"},{en:"boundingBox",ti:".EnvelopeType"},{en:"definedByConversion",ti:".GeneralConversionRefType"},{en:"_Surface",ti:".AbstractSurfaceType",sh:"_GeometricPrimitive"},{en:"_generalParameterValue",ti:".AbstractGeneralParameterValueType"},{en:"DirectionVector",ti:".DirectionVectorType"},{en:"_association",ti:".AssociationType"},{en:"_GML",ti:".AbstractGMLType",sh:"_Object"},{en:"multiExtentOf",ti:".MultiSurfacePropertyType"},{en:"datumRef",ti:".DatumRefType"},{en:"passThroughOperationRef",ti:".PassThroughOperationRefType"},{en:"referenceSystemRef",ti:".ReferenceSystemRefType"},{en:"_GeneralOperationParameter",ti:".AbstractGeneralOperationParameterType",sh:"Definition"},{en:"_CurveSegment",ti:".AbstractCurveSegmentType"},{en:"geocentricCRSRef",ti:".GeocentricCRSRefType"},{en:"geometryMember",ti:".GeometryPropertyType"},{en:"surfaceMembers",ti:".SurfaceArrayPropertyType"},{en:"TimeOrdinalEra",ti:".TimeOrdinalEraType"},{en:"_reference",ti:".ReferenceType"},{en:"ellipsoidName",ti:".CodeType",sh:"name"},{en:"_TimeComplex",ti:".AbstractTimeComplexType",sh:"_TimeObject"},{en:"boundingPolygon",ti:".PolygonType"},{en:"subject",ti:".TargetPropertyType",sh:"target"},{en:"Rectangle",ti:".RectangleType",sh:"_SurfacePatch"},{en:"Cylinder",ti:".CylinderType",sh:"_GriddedSurface"},{en:"multiSurfaceProperty",ti:".MultiSurfacePropertyType"},{en:"_Style",ti:".AbstractStyleType",sh:"_GML"},{en:"generalTransformationRef",ti:".GeneralTransformationRefType"},{en:"CompositeSurface",ti:".CompositeSurfaceType",sh:"_Surface"},{en:"validArea",ti:".ExtentType"},{en:"MultiGeometry",ti:".MultiGeometryType",sh:"_GeometricAggregate"},{en:"timeInterval",ti:".TimeIntervalLengthType"},{en:"maximalComplex",ti:".TopoComplexMemberType"},{en:"Point",ti:".PointType",sh:"_GeometricPrimitive"},{en:"VerticalCS",ti:".VerticalCSType",sh:"_CoordinateSystem"},{en:"usesSingleOperation",ti:".SingleOperationRefType"},{en:"catalogSymbol",ti:".CodeType"},{en:"transformationRef",ti:".TransformationRefType"},{en:"Envelope",ti:".EnvelopeType"},{en:"CompoundCRS",ti:".CompoundCRSType",sh:"_CRS"},{en:"value",ti:".MeasureType"},{en:"Boolean",ti:"Boolean"},{en:"primeMeridianRef",ti:".PrimeMeridianRefType"},{en:"includesElement",ti:".CovarianceElementType"},{en:"Ellipsoid",ti:".EllipsoidType",sh:"Definition"},{en:"topoSurfaceProperty",ti:".TopoSurfacePropertyType"},{en:"surfaceProperty",ti:".SurfacePropertyType"},{en:"pos",ti:".DirectPositionType"},{en:"PrimeMeridian",ti:".PrimeMeridianType",sh:"Definition"},{en:"_Curve",ti:".AbstractCurveType",sh:"_GeometricPrimitive"},{en:"definitionRef",ti:".ReferenceType"},{en:"axisAbbrev",ti:".CodeType"},{en:"LinearCS",ti:".LinearCSType",sh:"_CoordinateSystem"},{en:"TimeClock",ti:".TimeClockType",sh:"_TimeReferenceSystem"},{en:"multiCenterLineOf",ti:".MultiCurvePropertyType"},{en:"UserDefinedCS",ti:".UserDefinedCSType",sh:"_CoordinateSystem"},{en:"TimeNode",ti:".TimeNodeType",sh:"_TimeTopologyPrimitive"},{en:"_TimeSlice",ti:".AbstractTimeSliceType",sh:"_GML"},{en:"valueList",ti:".MeasureListType"},{en:"targetCRS",ti:".CRSRefType"},{en:"isSphere"},{en:"direction",ti:".DirectionPropertyType"},{en:"geometryStyle",ti:".GeometryStylePropertyType"},{en:"rangeParameters",ti:".RangeParametersType"},{en:"Bezier",ti:".BezierType",sh:"BSpline"},{en:"includesCRS",ti:".CoordinateReferenceSystemRefType"},{en:"linearCSRef",ti:".LinearCSRefType"},{en:"compoundCRSRef",ti:".CompoundCRSRefType"},{en:"CompositeSolid",ti:".CompositeSolidType",sh:"_Solid"},{en:"usesTemporalCS",ti:".TemporalCSRefType"},{en:"csID",ti:".IdentifierType"},{en:"usesSphericalCS",ti:".SphericalCSRefType"},{en:"geodeticDatumRef",ti:".GeodeticDatumRefType"},{en:"multiSolidDomain",ti:".MultiSolidDomainType",sh:"domainSet"},{en:"directedTopoSolid",ti:".DirectedTopoSolidPropertyType"},{en:"userDefinedCSRef",ti:".UserDefinedCSRefType"},{en:"measure",ti:".MeasureType"},{en:"origin",ti:"DateTime"},{en:"dmsAngleValue",ti:".DMSAngleType"},{en:"MultiSolid",ti:".MultiSolidType",sh:"_GeometricAggregate"},{en:"Array",ti:".ArrayType",sh:"_GML"},{en:"parameterValue",ti:".ParameterValueType",sh:"_generalParameterValue"},{en:"maximumOccurs",ti:"PositiveInteger"},{en:"CircleByCenterPoint",ti:".CircleByCenterPointType",sh:"ArcByCenterPoint"},{en:"roughConversionToPreferredUnit",ti:".ConversionToPreferredUnitType"},{en:"remarks",ti:".StringOrRefType"},{en:"Null",ti:{t:"l"}},{en:"Transformation",ti:".TransformationType",sh:"_GeneralTransformation"},{en:"PolygonPatch",ti:".PolygonPatchType",sh:"_SurfacePatch"},{en:"topologyStyle",ti:".TopologyStylePropertyType"},{en:"ImageDatum",ti:".ImageDatumType",sh:"_Datum"},{en:"CategoryExtent",ti:".CategoryExtentType"},{en:"coordinateReferenceSystemRef",ti:".CoordinateReferenceSystemRefType"},{en:"multiLocation",ti:".MultiPointPropertyType"},{en:"TimeCoordinateSystem",ti:".TimeCoordinateSystemType",sh:"_TimeReferenceSystem"},{en:"interior",ti:".AbstractRingPropertyType"},{en:"MovingObjectStatus",ti:".MovingObjectStatusType",sh:"_TimeSlice"},{en:"secondDefiningParameter",ti:".SecondDefiningParameterType"},{en:"polygonMember",ti:".PolygonPropertyType"},{en:"PolarCS",ti:".PolarCSType",sh:"_CoordinateSystem"},{en:"usesEllipsoid",ti:".EllipsoidRefType"},{en:"_Operation",ti:".AbstractCoordinateOperationType",sh:"_SingleOperation"},{en:"multiPointDomain",ti:".MultiPointDomainType",sh:"domainSet"},{en:"timePosition",ti:".TimePositionType"},{en:"coordinateOperationRef",ti:".CoordinateOperationRefType"},{en:"usesCartesianCS",ti:".CartesianCSRefType"},{en:"absoluteExternalPositionalAccuracy",ti:".AbsoluteExternalPositionalAccuracyType",sh:"_positionalAccuracy"},{en:"coverageFunction",ti:".CoverageFunctionType"},{en:"usesVerticalCS",ti:".VerticalCSRefType"},{en:"operationParameterRef",ti:".OperationParameterRefType"},{en:"meridianID",ti:".IdentifierType"},{en:"ArcStringByBulge",ti:".ArcStringByBulgeType",sh:"_CurveSegment"},{en:"LocationString",ti:".StringOrRefType"},{en:"MultiSurfaceCoverage",ti:".MultiSurfaceCoverageType",sh:"_DiscreteCoverage"},{en:"Grid",ti:".GridType",sh:"_ImplicitGeometry"},{en:"CompassPoint"},{en:"location",ti:".LocationPropertyType"},{en:"imageDatumRef",ti:".ImageDatumRefType"},{en:"labelStyle",ti:".LabelStylePropertyType"},{en:"targetDimensions",ti:"PositiveInteger"},{en:"OrientableSurface",ti:".OrientableSurfaceType",sh:"_Surface"},{en:"CubicSpline",ti:".CubicSplineType",sh:"_CurveSegment"},{en:"baseSurface",ti:".SurfacePropertyType"},{en:"Category",ti:".CodeType"},{en:"MappingRule",ti:".StringOrRefType"},{en:"DataBlock",ti:".DataBlockType"},{en:"verticalExtent",ti:".EnvelopeType"},{en:"BooleanList",ti:{t:"l"}},{en:"usesMethod",ti:".OperationMethodRefType"},{en:"_TimeObject",ti:".AbstractTimeObjectType",sh:"_GML"},{en:"methodName",ti:".CodeType",sh:"name"},{en:"valueComponents",ti:".ValueArrayPropertyType"},{en:"members",ti:".ArrayAssociationType"},{en:"container",ti:".ContainerPropertyType"},{en:"lineStringProperty",ti:".LineStringPropertyType"},{en:"vector",ti:".VectorType"},{en:"singleOperationRef",ti:".SingleOperationRefType"},{en:"TimeTopologyComplex",ti:".TimeTopologyComplexType",sh:"_TimeComplex"},{en:"curveArrayProperty",ti:".CurveArrayPropertyType"},{en:"axisID",ti:".IdentifierType"},{en:"usesAxis",ti:".CoordinateSystemAxisRefType"},{en:"name",ti:".CodeType"},{en:"CompositeCurve",ti:".CompositeCurveType",sh:"_Curve"},{en:"solidProperty",ti:".SolidPropertyType"},{en:"valueProperty",ti:".ValuePropertyType"},{en:"GeodesicString",ti:".GeodesicStringType",sh:"_CurveSegment"},{en:"usesVerticalDatum",ti:".VerticalDatumRefType"},{en:"_GriddedSurface",ti:".AbstractGriddedSurfaceType",sh:"_ParametricCurveSurface"},{en:"resultOf",ti:".AssociationType"},{en:"_positionalAccuracy",ti:".AbstractPositionalAccuracyType"},{en:"_Feature",ti:".AbstractFeatureType",sh:"_GML"},{en:"ArcByCenterPoint",ti:".ArcByCenterPointType",sh:"_CurveSegment"},{en:"_CoordinateReferenceSystem",ti:".AbstractReferenceSystemType",sh:"_CRS"},{en:"covariance",ti:"Double"},{en:"multiSurfaceDomain",ti:".MultiSurfaceDomainType",sh:"domainSet"},{en:"usesCS",ti:".CoordinateSystemRefType"},{en:"ArcByBulge",ti:".ArcByBulgeType",sh:"ArcStringByBulge"},{en:"angle",ti:".MeasureType"},{en:"covarianceMatrix",ti:".CovarianceMatrixType",sh:"_positionalAccuracy"},{en:"_Object",ti:"AnyType"},{en:"EnvelopeWithTimePeriod",ti:".EnvelopeWithTimePeriodType",sh:"Envelope"},{en:"ObliqueCartesianCS",ti:".ObliqueCartesianCSType",sh:"_CoordinateSystem"},{en:"Observation",ti:".ObservationType",sh:"_Feature"},{en:"status",ti:".StringOrRefType"},{en:"centerLineOf",ti:".CurvePropertyType"},{en:"topoPrimitiveMember",ti:".TopoPrimitiveMemberType"},{en:"_MetaData",ti:".AbstractMetaDataType",sh:"_Object"},{en:"TimeOrdinalReferenceSystem",ti:".TimeOrdinalReferenceSystemType",sh:"_TimeReferenceSystem"},{en:"srsName",ti:".CodeType",sh:"name"},{en:"unitOfMeasure",ti:".UnitOfMeasureType"},{en:"VerticalCRS",ti:".VerticalCRSType",sh:"_CoordinateReferenceSystem"},{en:"centerOf",ti:".PointPropertyType"},{en:"_GeneralTransformation",ti:".AbstractGeneralTransformationType",sh:"_Operation"},{en:"multiSolidProperty",ti:".MultiSolidPropertyType"},{en:"_CoordinateSystem",ti:".AbstractCoordinateSystemType",sh:"Definition"},{en:"solidArrayProperty",ti:".SolidArrayPropertyType"},{en:"_Topology",ti:".AbstractTopologyType",sh:"_GML"},{en:"seconds",ti:"Decimal"},{en:"imageCRSRef",ti:".ImageCRSRefType"},{en:"Arc",ti:".ArcType",sh:"ArcString"},{en:"baseCurve",ti:".CurvePropertyType"},{en:"Triangle",ti:".TriangleType",sh:"_SurfacePatch"},{en:"valueFile"},{en:"TopoSurface",ti:".TopoSurfaceType"},{en:"TopoCurve",ti:".TopoCurveType"},{en:"csName",ti:".CodeType",sh:"name"},{en:"usesImageDatum",ti:".ImageDatumRefType"},{en:"derivationUnitTerm",ti:".DerivationUnitTermType"},{en:"usesObliqueCartesianCS",ti:".ObliqueCartesianCSRefType"},{en:"curveMembers",ti:".CurveArrayPropertyType"},{en:"curveProperty",ti:".CurvePropertyType"},{en:"QuantityList",ti:".MeasureOrNullListType"},{en:"Circle",ti:".CircleType",sh:"Arc"},{en:"anchorPoint",ti:".CodeType"},{en:"Curve",ti:".CurveType",sh:"_Curve"},{en:"MultiCurveCoverage",ti:".MultiCurveCoverageType",sh:"_DiscreteCoverage"},{en:"TimeEdge",ti:".TimeEdgeType",sh:"_TimeTopologyPrimitive"},{en:"MultiPoint",ti:".MultiPointType",sh:"_GeometricAggregate"},{en:"GridFunction",ti:".GridFunctionType"},{en:"semiMajorAxis",ti:".MeasureType"},{en:"history",ti:".HistoryPropertyType"},{en:"valueComponent",ti:".ValuePropertyType"},{en:"topoCurveProperty",ti:".TopoCurvePropertyType"},{en:"DirectedObservation",ti:".DirectedObservationType",sh:"Observation"},{en:"OperationParameter",ti:".OperationParameterType",sh:"_GeneralOperationParameter"},{en:"UnitDefinition",ti:".UnitDefinitionType",sh:"Definition"},{en:"pointRep",ti:".PointPropertyType"},{en:"_TimeReferenceSystem",ti:".AbstractTimeReferenceSystemType",sh:"Definition"},{en:"quantityType",ti:".StringOrRefType"},{en:"valueOfParameter",ti:".OperationParameterRefType"},{en:"_CoordinateOperation",ti:".AbstractCoordinateOperationType",sh:"Definition"},{en:"GeodeticDatum",ti:".GeodeticDatumType",sh:"_Datum"},{en:"_CRS",ti:".AbstractReferenceSystemType",sh:"_ReferenceSystem"},{en:"usesOperation",ti:".OperationRefType"},{en:"minutes",ti:"NonNegativeInteger"},{en:"datumName",ti:".CodeType",sh:"name"},{en:"LinearRing",ti:".LinearRingType",sh:"_Ring"},{en:"abstractGeneralOperationParameterRef",ti:".AbstractGeneralOperationParameterRefType"},{en:"usesGeodeticDatum",ti:".GeodeticDatumRefType"},{en:"edgeOf",ti:".CurvePropertyType"},{en:"using",ti:".FeaturePropertyType"},{en:"GeometryStyle",ti:".GeometryStyleType",sh:"_GML"},{en:"curveMember",ti:".CurvePropertyType"},{en:"conversionToPreferredUnit",ti:".ConversionToPreferredUnitType"},{en:"_DiscreteCoverage",ti:".AbstractDiscreteCoverageType",sh:"_Coverage"},{en:"posList",ti:".DirectPositionListType"},{en:"_TimeGeometricPrimitive",ti:".AbstractTimeGeometricPrimitiveType",sh:"_TimePrimitive"},{en:"conversionRef",ti:".ConversionRefType"},{en:"surfaceArrayProperty",ti:".SurfaceArrayPropertyType"},{en:"rangeSet",ti:".RangeSetType"},{en:"valuesOfGroup",ti:".OperationParameterGroupRefType"},{en:"axisDirection",ti:".CodeType"},{en:"coordinateOperationID",ti:".IdentifierType"},{en:"TemporalCRS",ti:".TemporalCRSType",sh:"_CoordinateReferenceSystem"},{en:"_GeneralConversion",ti:".AbstractGeneralConversionType",sh:"_Operation"},{en:"multiCenterOf",ti:".MultiPointPropertyType"},{en:"includesParameter",ti:".AbstractGeneralOperationParameterRefType"},{en:"BSpline",ti:".BSplineType",sh:"_CurveSegment"},{en:"TimeCalendarEra",ti:".TimeCalendarEraType",sh:"Definition"},{en:"priorityLocation",ti:".PriorityLocationPropertyType",sh:"location"},{en:"usesPrimeMeridian",ti:".PrimeMeridianRefType"},{en:"TopoPoint",ti:".TopoPointType"},{en:"ValueArray",ti:".ValueArrayType",sh:"CompositeValue"},{en:"Dictionary",ti:".DictionaryType",sh:"Definition"},{en:"_ImplicitGeometry",ti:".AbstractGeometryType",sh:"_Geometry"},{en:"scope"},{en:"AffinePlacement",ti:".AffinePlacementType"},{en:"multiGeometryProperty",ti:".MultiGeometryPropertyType"},{en:"topoComplexProperty",ti:".TopoComplexMemberType"},{en:"GenericMetaData",ti:".GenericMetaDataType",sh:"_MetaData"},{en:"validTime",ti:".TimePrimitivePropertyType"},{en:"_ReferenceSystem",ti:".AbstractReferenceSystemType",sh:"Definition"},{en:"member",ti:".AssociationType"},{en:"ellipsoidID",ti:".IdentifierType"},{en:"ellipsoidRef",ti:".EllipsoidRefType"},{en:"MultiLineString",ti:".MultiLineStringType",sh:"_GeometricAggregate"},{en:"_TimeTopologyPrimitive",ti:".AbstractTimeTopologyPrimitiveType",sh:"_TimePrimitive"},{en:"parameterName",ti:".CodeType",sh:"name"},{en:"measureDescription",ti:".CodeType"},{en:"ConventionalUnit",ti:".ConventionalUnitType",sh:"UnitDefinition"},{en:"extentOf",ti:".SurfacePropertyType"},{en:"_Coverage",ti:".AbstractCoverageType",sh:"_Feature"},{en:"TriangulatedSurface",ti:".TriangulatedSurfaceType",sh:"Surface"},{en:"Tin",ti:".TinType",sh:"TriangulatedSurface"},{en:"operationVersion"},{en:"pointProperty",ti:".PointPropertyType"},{en:"Conversion",ti:".ConversionType",sh:"_GeneralConversion"},{en:"verticalCRSRef",ti:".VerticalCRSRefType"},{en:"topoVolumeProperty",ti:".TopoVolumePropertyType"},{en:"exterior",ti:".AbstractRingPropertyType"},{en:"realizationEpoch",ti:"Date"}]}}})?Ve.apply(wt,[]):Ve)&&(en.exports=$e)},723:(en,wt)=>{var Ve,$e;void 0!==($e="function"==typeof(Ve=function(){return{OWS_1_1_0:{n:"OWS_1_1_0",dens:"http://www.opengis.net/ows/1.1",dans:"http://www.w3.org/1999/xlink",deps:["XLink_1_0"],tis:[{ln:"OperationsMetadata",tn:null,ps:[{n:"operation",rq:!0,mno:2,col:!0,en:"Operation",ti:".Operation"},{n:"parameter",mno:0,col:!0,en:"Parameter",ti:".DomainType"},{n:"constraint",mno:0,col:!0,en:"Constraint",ti:".DomainType"},{n:"extendedCapabilities",en:"ExtendedCapabilities",ti:"AnyType"}]},{ln:"IdentificationType",bti:".BasicIdentificationType",ps:[{n:"boundingBox",mno:0,col:!0,mx:!1,dom:!1,en:"BoundingBox",ti:".BoundingBoxType",t:"er"},{n:"outputFormat",mno:0,col:!0,en:"OutputFormat"},{n:"availableCRS",mno:0,col:!0,mx:!1,dom:!1,en:"AvailableCRS",t:"er"}]},{ln:"ResponsiblePartySubsetType",ps:[{n:"individualName",en:"IndividualName"},{n:"positionName",en:"PositionName"},{n:"contactInfo",en:"ContactInfo",ti:".ContactType"},{n:"role",en:"Role",ti:".CodeType"}]},{ln:"AnyValue",tn:null},{ln:"DomainType",bti:".UnNamedDomainType",ps:[{n:"name",rq:!0,an:{lp:"name"},t:"a"}]},{ln:"AcceptVersionsType",ps:[{n:"version",rq:!0,col:!0,en:"Version"}]},{ln:"DCP",tn:null,ps:[{n:"http",rq:!0,en:"HTTP",ti:".HTTP"}]},{ln:"ManifestType",bti:".BasicIdentificationType",ps:[{n:"referenceGroup",rq:!0,col:!0,en:"ReferenceGroup",ti:".ReferenceGroupType"}]},{ln:"ExceptionType",ps:[{n:"exceptionText",mno:0,col:!0,en:"ExceptionText"},{n:"exceptionCode",rq:!0,an:{lp:"exceptionCode"},t:"a"},{n:"locator",an:{lp:"locator"},t:"a"}]},{ln:"RequestMethodType",bti:".OnlineResourceType",ps:[{n:"constraint",mno:0,col:!0,en:"Constraint",ti:".DomainType"}]},{ln:"SectionsType",ps:[{n:"section",mno:0,col:!0,en:"Section"}]},{ln:"UnNamedDomainType",ps:[{n:"allowedValues",rq:!0,en:"AllowedValues",ti:".AllowedValues"},{n:"anyValue",rq:!0,en:"AnyValue",ti:".AnyValue"},{n:"noValues",rq:!0,en:"NoValues",ti:".NoValues"},{n:"valuesReference",rq:!0,en:"ValuesReference",ti:".ValuesReference"},{n:"defaultValue",en:"DefaultValue",ti:".ValueType"},{n:"meaning",en:"Meaning",ti:".DomainMetadataType"},{n:"dataType",en:"DataType",ti:".DomainMetadataType"},{n:"uom",rq:!0,en:"UOM",ti:".DomainMetadataType"},{n:"referenceSystem",rq:!0,en:"ReferenceSystem",ti:".DomainMetadataType"},{n:"metadata",mno:0,col:!0,en:"Metadata",ti:".MetadataType"}]},{ln:"HTTP",tn:null,ps:[{n:"getOrPost",rq:!0,col:!0,mx:!1,dom:!1,etis:[{en:"Post",ti:".RequestMethodType"},{en:"Get",ti:".RequestMethodType"}],t:"ers"}]},{ln:"ServiceReferenceType",bti:".ReferenceType",ps:[{n:"requestMessage",rq:!0,en:"RequestMessage",ti:"AnyType"},{n:"requestMessageReference",rq:!0,en:"RequestMessageReference"}]},{ln:"KeywordsType",ps:[{n:"keyword",rq:!0,col:!0,en:"Keyword",ti:".LanguageStringType"},{n:"type",en:"Type",ti:".CodeType"}]},{ln:"AllowedValues",tn:null,ps:[{n:"valueOrRange",rq:!0,col:!0,etis:[{en:"Value",ti:".ValueType"},{en:"Range",ti:".RangeType"}],t:"es"}]},{ln:"TelephoneType",ps:[{n:"voice",mno:0,col:!0,en:"Voice"},{n:"facsimile",mno:0,col:!0,en:"Facsimile"}]},{ln:"ReferenceType",bti:".AbstractReferenceBaseType",ps:[{n:"identifier",en:"Identifier",ti:".CodeType"},{n:"_abstract",mno:0,col:!0,en:"Abstract",ti:".LanguageStringType"},{n:"format",en:"Format"},{n:"metadata",mno:0,col:!0,en:"Metadata",ti:".MetadataType"}]},{ln:"ExceptionReport",tn:null,ps:[{n:"exception",rq:!0,col:!0,en:"Exception",ti:".ExceptionType"},{n:"version",rq:!0,an:{lp:"version"},t:"a"},{n:"lang",an:{lp:"lang",ns:"http://www.w3.org/XML/1998/namespace"},t:"a"}]},{ln:"GetResourceByIdType",ps:[{n:"resourceID",mno:0,col:!0,en:"ResourceID"},{n:"outputFormat",en:"OutputFormat"},{n:"service",rq:!0,an:{lp:"service"},t:"a"},{n:"version",rq:!0,an:{lp:"version"},t:"a"}]},{ln:"RangeType",ps:[{n:"minimumValue",en:"MinimumValue",ti:".ValueType"},{n:"maximumValue",en:"MaximumValue",ti:".ValueType"},{n:"spacing",en:"Spacing",ti:".ValueType"},{n:"rangeClosure",ti:{t:"l"},an:{lp:"rangeClosure",ns:"http://www.opengis.net/ows/1.1"},t:"a"}]},{ln:"LanguageStringType",ps:[{n:"value",t:"v"},{n:"lang",an:{lp:"lang",ns:"http://www.w3.org/XML/1998/namespace"},t:"a"}]},{ln:"DescriptionType",ps:[{n:"title",mno:0,col:!0,en:"Title",ti:".LanguageStringType"},{n:"_abstract",mno:0,col:!0,en:"Abstract",ti:".LanguageStringType"},{n:"keywords",mno:0,col:!0,en:"Keywords",ti:".KeywordsType"}]},{ln:"BoundingBoxType",ps:[{n:"lowerCorner",rq:!0,en:"LowerCorner",ti:{t:"l",bti:"Double"}},{n:"upperCorner",rq:!0,en:"UpperCorner",ti:{t:"l",bti:"Double"}},{n:"crs",an:{lp:"crs"},t:"a"},{n:"dimensions",ti:"PositiveInteger",an:{lp:"dimensions"},t:"a"}]},{ln:"ContentsBaseType",ps:[{n:"datasetDescriptionSummary",mno:0,col:!0,mx:!1,dom:!1,en:"DatasetDescriptionSummary",ti:".DatasetDescriptionSummaryBaseType",t:"er"},{n:"otherSource",mno:0,col:!0,mx:!1,dom:!1,en:"OtherSource",ti:".MetadataType",t:"er"}]},{ln:"BasicIdentificationType",bti:".DescriptionType",ps:[{n:"identifier",en:"Identifier",ti:".CodeType"},{n:"metadata",mno:0,col:!0,en:"Metadata",ti:".MetadataType"}]},{ln:"ReferenceGroupType",bti:".BasicIdentificationType",ps:[{n:"abstractReferenceBase",rq:!0,col:!0,mx:!1,dom:!1,en:"AbstractReferenceBase",ti:".AbstractReferenceBaseType",t:"er"}]},{ln:"ResponsiblePartyType",ps:[{n:"individualName",en:"IndividualName"},{n:"organisationName",en:"OrganisationName"},{n:"positionName",en:"PositionName"},{n:"contactInfo",en:"ContactInfo",ti:".ContactType"},{n:"role",rq:!0,en:"Role",ti:".CodeType"}]},{ln:"ValuesReference",tn:null,ps:[{n:"value",t:"v"},{n:"reference",rq:!0,an:{lp:"reference",ns:"http://www.opengis.net/ows/1.1"},t:"a"}]},{ln:"DatasetDescriptionSummaryBaseType",bti:".DescriptionType",ps:[{n:"wgs84BoundingBox",mno:0,col:!0,en:"WGS84BoundingBox",ti:".WGS84BoundingBoxType"},{n:"identifier",rq:!0,en:"Identifier",ti:".CodeType"},{n:"boundingBox",mno:0,col:!0,mx:!1,dom:!1,en:"BoundingBox",ti:".BoundingBoxType",t:"er"},{n:"metadata",mno:0,col:!0,en:"Metadata",ti:".MetadataType"},{n:"datasetDescriptionSummary",mno:0,col:!0,mx:!1,dom:!1,en:"DatasetDescriptionSummary",ti:".DatasetDescriptionSummaryBaseType",t:"er"}]},{ln:"ServiceIdentification",tn:null,bti:".DescriptionType",ps:[{n:"serviceType",rq:!0,en:"ServiceType",ti:".CodeType"},{n:"serviceTypeVersion",rq:!0,col:!0,en:"ServiceTypeVersion"},{n:"profile",mno:0,col:!0,en:"Profile"},{n:"fees",en:"Fees"},{n:"accessConstraints",mno:0,col:!0,en:"AccessConstraints"}]},{ln:"AcceptFormatsType",ps:[{n:"outputFormat",mno:0,col:!0,en:"OutputFormat"}]},{ln:"NoValues",tn:null},{ln:"Operation",tn:null,ps:[{n:"dcp",rq:!0,col:!0,en:"DCP",ti:".DCP"},{n:"parameter",mno:0,col:!0,en:"Parameter",ti:".DomainType"},{n:"constraint",mno:0,col:!0,en:"Constraint",ti:".DomainType"},{n:"metadata",mno:0,col:!0,en:"Metadata",ti:".MetadataType"},{n:"name",rq:!0,an:{lp:"name"},t:"a"}]},{ln:"AbstractReferenceBaseType",ps:[{n:"type",an:{lp:"type",ns:"http://www.opengis.net/ows/1.1"},t:"a"},{n:"href",rq:!0,t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"AddressType",ps:[{n:"deliveryPoint",mno:0,col:!0,en:"DeliveryPoint"},{n:"city",en:"City"},{n:"administrativeArea",en:"AdministrativeArea"},{n:"postalCode",en:"PostalCode"},{n:"country",en:"Country"},{n:"electronicMailAddress",mno:0,col:!0,en:"ElectronicMailAddress"}]},{ln:"ValueType",ps:[{n:"value",t:"v"}]},{ln:"MetadataType",ps:[{n:"abstractMetaData",en:"AbstractMetaData",ti:"AnyType"},{n:"about",an:{lp:"about"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"OnlineResourceType",ps:[{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"DomainMetadataType",ps:[{n:"value",t:"v"},{n:"reference",an:{lp:"reference",ns:"http://www.opengis.net/ows/1.1"},t:"a"}]},{ln:"WGS84BoundingBoxType",bti:".BoundingBoxType"},{ln:"ContactType",ps:[{n:"phone",en:"Phone",ti:".TelephoneType"},{n:"address",en:"Address",ti:".AddressType"},{n:"onlineResource",en:"OnlineResource",ti:".OnlineResourceType"},{n:"hoursOfService",en:"HoursOfService"},{n:"contactInstructions",en:"ContactInstructions"}]},{ln:"CapabilitiesBaseType",ps:[{n:"serviceIdentification",en:"ServiceIdentification",ti:".ServiceIdentification"},{n:"serviceProvider",en:"ServiceProvider",ti:".ServiceProvider"},{n:"operationsMetadata",en:"OperationsMetadata",ti:".OperationsMetadata"},{n:"version",rq:!0,an:{lp:"version"},t:"a"},{n:"updateSequence",an:{lp:"updateSequence"},t:"a"}]},{ln:"ServiceProvider",tn:null,ps:[{n:"providerName",rq:!0,en:"ProviderName"},{n:"providerSite",en:"ProviderSite",ti:".OnlineResourceType"},{n:"serviceContact",rq:!0,en:"ServiceContact",ti:".ResponsiblePartySubsetType"}]},{ln:"CodeType",ps:[{n:"value",t:"v"},{n:"codeSpace",an:{lp:"codeSpace"},t:"a"}]},{ln:"GetCapabilitiesType",ps:[{n:"acceptVersions",en:"AcceptVersions",ti:".AcceptVersionsType"},{n:"sections",en:"Sections",ti:".SectionsType"},{n:"acceptFormats",en:"AcceptFormats",ti:".AcceptFormatsType"},{n:"updateSequence",an:{lp:"updateSequence"},t:"a"}]}],eis:[{en:"Metadata",ti:".MetadataType"},{en:"DCP",ti:".DCP"},{en:"AbstractReferenceBase",ti:".AbstractReferenceBaseType"},{en:"Language",ti:"Language"},{en:"Role",ti:".CodeType"},{en:"GetResourceByID",ti:".GetResourceByIdType"},{en:"Meaning",ti:".DomainMetadataType"},{en:"AvailableCRS"},{en:"OperationResponse",ti:".ManifestType"},{en:"OutputFormat"},{en:"MaximumValue",ti:".ValueType"},{en:"Range",ti:".RangeType"},{en:"OrganisationName"},{en:"IndividualName"},{en:"Post",ti:".RequestMethodType",sc:".HTTP"},{en:"Resource",ti:"AnyType"},{en:"NoValues",ti:".NoValues"},{en:"ServiceReference",ti:".ServiceReferenceType",sh:"Reference"},{en:"DatasetDescriptionSummaryExtension",ti:".DatasetDescriptionSummaryBaseType",sh:"DatasetDescriptionSummary"},{en:"InputData",ti:".ManifestType"},{en:"ServiceIdentification",ti:".ServiceIdentification"},{en:"AccessConstraints"},{en:"ContactInfo",ti:".ContactType"},{en:"ExceptionReport",ti:".ExceptionReport"},{en:"Operation",ti:".Operation"},{en:"Title",ti:".LanguageStringType"},{en:"ReferenceSystem",ti:".DomainMetadataType"},{en:"Exception",ti:".ExceptionType"},{en:"Value",ti:".ValueType"},{en:"Keywords",ti:".KeywordsType"},{en:"Get",ti:".RequestMethodType",sc:".HTTP"},{en:"DatasetDescriptionSummary",ti:".DatasetDescriptionSummaryBaseType"},{en:"PositionName"},{en:"AllowedValues",ti:".AllowedValues"},{en:"Manifest",ti:".ManifestType"},{en:"Identifier",ti:".CodeType"},{en:"AbstractMetaData",ti:"AnyType"},{en:"AnyValue",ti:".AnyValue"},{en:"ServiceProvider",ti:".ServiceProvider"},{en:"DefaultValue",ti:".ValueType"},{en:"OtherSourceExtension",ti:".MetadataType",sh:"OtherSource"},{en:"OperationsMetadata",ti:".OperationsMetadata"},{en:"Fees"},{en:"BoundingBox",ti:".BoundingBoxType"},{en:"DataType",ti:".DomainMetadataType"},{en:"Abstract",ti:".LanguageStringType"},{en:"Spacing",ti:".ValueType"},{en:"GetCapabilities",ti:".GetCapabilitiesType"},{en:"HTTP",ti:".HTTP"},{en:"UOM",ti:".DomainMetadataType"},{en:"OtherSource",ti:".MetadataType"},{en:"WGS84BoundingBox",ti:".WGS84BoundingBoxType",sh:"BoundingBox"},{en:"MinimumValue",ti:".ValueType"},{en:"Reference",ti:".ReferenceType",sh:"AbstractReferenceBase"},{en:"ReferenceGroup",ti:".ReferenceGroupType"},{en:"ExtendedCapabilities",ti:"AnyType"},{en:"PointOfContact",ti:".ResponsiblePartyType"},{en:"ValuesReference",ti:".ValuesReference"},{en:"SupportedCRS",sh:"AvailableCRS"}]}}})?Ve.apply(wt,[]):Ve)&&(en.exports=$e)},815:(en,wt)=>{var Ve,$e;void 0!==($e="function"==typeof(Ve=function(){return{OWS_2_0:{n:"OWS_2_0",dens:"http://www.opengis.net/ows/2.0",dans:"http://www.w3.org/1999/xlink",deps:["XLink_1_0"],tis:[{ln:"GetResourceByIdType",ps:[{n:"resourceID",mno:0,col:!0,en:"ResourceID"},{n:"outputFormat",en:"OutputFormat"},{n:"service",rq:!0,an:{lp:"service"},t:"a"},{n:"version",rq:!0,an:{lp:"version"},t:"a"}]},{ln:"DCP",tn:null,ps:[{n:"http",rq:!0,en:"HTTP",ti:".HTTP"}]},{ln:"DomainMetadataType",ps:[{n:"value",t:"v"},{n:"reference",an:{lp:"reference",ns:"http://www.opengis.net/ows/2.0"},t:"a"}]},{ln:"SectionsType",ps:[{n:"section",mno:0,col:!0,en:"Section"}]},{ln:"CapabilitiesBaseType",ps:[{n:"serviceIdentification",en:"ServiceIdentification",ti:".ServiceIdentification"},{n:"serviceProvider",en:"ServiceProvider",ti:".ServiceProvider"},{n:"operationsMetadata",en:"OperationsMetadata",ti:".OperationsMetadata"},{n:"languages",en:"Languages",ti:".CapabilitiesBaseType.Languages"},{n:"version",rq:!0,an:{lp:"version"},t:"a"},{n:"updateSequence",an:{lp:"updateSequence"},t:"a"}]},{ln:"BasicIdentificationType",bti:".DescriptionType",ps:[{n:"identifier",en:"Identifier",ti:".CodeType"},{n:"metadata",mno:0,col:!0,mx:!1,dom:!1,en:"Metadata",ti:".MetadataType",t:"er"}]},{ln:"RangeType",ps:[{n:"minimumValue",en:"MinimumValue",ti:".ValueType"},{n:"maximumValue",en:"MaximumValue",ti:".ValueType"},{n:"spacing",en:"Spacing",ti:".ValueType"},{n:"rangeClosure",ti:{t:"l"},an:{lp:"rangeClosure",ns:"http://www.opengis.net/ows/2.0"},t:"a"}]},{ln:"ServiceProvider",tn:null,ps:[{n:"providerName",rq:!0,en:"ProviderName"},{n:"providerSite",en:"ProviderSite",ti:".OnlineResourceType"},{n:"serviceContact",rq:!0,en:"ServiceContact",ti:".ResponsiblePartySubsetType"}]},{ln:"AcceptFormatsType",ps:[{n:"outputFormat",mno:0,col:!0,en:"OutputFormat"}]},{ln:"MetadataType",ps:[{n:"abstractMetaData",mx:!1,dom:!1,en:"AbstractMetaData",ti:"AnyType",t:"er"},{n:"about",an:{lp:"about"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"ReferenceGroupType",bti:".BasicIdentificationType",ps:[{n:"abstractReferenceBase",rq:!0,col:!0,mx:!1,dom:!1,en:"AbstractReferenceBase",ti:".AbstractReferenceBaseType",t:"er"}]},{ln:"ValuesReference",tn:null,ps:[{n:"value",t:"v"},{n:"reference",rq:!0,an:{lp:"reference",ns:"http://www.opengis.net/ows/2.0"},t:"a"}]},{ln:"AdditionalParametersBaseType",bti:".MetadataType"},{ln:"ResponsiblePartySubsetType",ps:[{n:"individualName",en:"IndividualName"},{n:"positionName",en:"PositionName"},{n:"contactInfo",en:"ContactInfo",ti:".ContactType"},{n:"role",en:"Role",ti:".CodeType"}]},{ln:"NoValues",tn:null},{ln:"AnyValue",tn:null},{ln:"CodeType",ps:[{n:"value",t:"v"},{n:"codeSpace",an:{lp:"codeSpace"},t:"a"}]},{ln:"IdentificationType",bti:".BasicIdentificationType",ps:[{n:"boundingBox",mno:0,col:!0,mx:!1,dom:!1,en:"BoundingBox",ti:".BoundingBoxType",t:"er"},{n:"outputFormat",mno:0,col:!0,en:"OutputFormat"},{n:"availableCRS",mno:0,col:!0,mx:!1,dom:!1,en:"AvailableCRS",t:"er"}]},{ln:"UnNamedDomainType",ps:[{n:"allowedValues",rq:!0,en:"AllowedValues",ti:".AllowedValues"},{n:"anyValue",rq:!0,en:"AnyValue",ti:".AnyValue"},{n:"noValues",rq:!0,en:"NoValues",ti:".NoValues"},{n:"valuesReference",rq:!0,en:"ValuesReference",ti:".ValuesReference"},{n:"defaultValue",en:"DefaultValue",ti:".ValueType"},{n:"meaning",en:"Meaning",ti:".DomainMetadataType"},{n:"dataType",en:"DataType",ti:".DomainMetadataType"},{n:"uom",rq:!0,en:"UOM",ti:".DomainMetadataType"},{n:"referenceSystem",rq:!0,en:"ReferenceSystem",ti:".DomainMetadataType"},{n:"metadata",mno:0,col:!0,mx:!1,dom:!1,en:"Metadata",ti:".MetadataType",t:"er"}]},{ln:"ServiceReferenceType",bti:".ReferenceType",ps:[{n:"requestMessage",rq:!0,en:"RequestMessage",ti:"AnyType"},{n:"requestMessageReference",rq:!0,en:"RequestMessageReference"}]},{ln:"ReferenceType",bti:".AbstractReferenceBaseType",ps:[{n:"identifier",en:"Identifier",ti:".CodeType"},{n:"_abstract",mno:0,col:!0,en:"Abstract",ti:".LanguageStringType"},{n:"format",en:"Format"},{n:"metadata",mno:0,col:!0,mx:!1,dom:!1,en:"Metadata",ti:".MetadataType",t:"er"}]},{ln:"ManifestType",bti:".BasicIdentificationType",ps:[{n:"referenceGroup",rq:!0,col:!0,en:"ReferenceGroup",ti:".ReferenceGroupType"}]},{ln:"TelephoneType",ps:[{n:"voice",mno:0,col:!0,en:"Voice"},{n:"facsimile",mno:0,col:!0,en:"Facsimile"}]},{ln:"ContactType",ps:[{n:"phone",en:"Phone",ti:".TelephoneType"},{n:"address",en:"Address",ti:".AddressType"},{n:"onlineResource",en:"OnlineResource",ti:".OnlineResourceType"},{n:"hoursOfService",en:"HoursOfService"},{n:"contactInstructions",en:"ContactInstructions"}]},{ln:"ExceptionReport",tn:null,ps:[{n:"exception",rq:!0,col:!0,en:"Exception",ti:".ExceptionType"},{n:"version",rq:!0,an:{lp:"version"},t:"a"},{n:"lang",an:{lp:"lang",ns:"http://www.w3.org/XML/1998/namespace"},t:"a"}]},{ln:"OperationsMetadata",tn:null,ps:[{n:"operation",rq:!0,mno:2,col:!0,en:"Operation",ti:".Operation"},{n:"parameter",mno:0,col:!0,en:"Parameter",ti:".DomainType"},{n:"constraint",mno:0,col:!0,en:"Constraint",ti:".DomainType"},{n:"extendedCapabilities",en:"ExtendedCapabilities",ti:"AnyType"}]},{ln:"WGS84BoundingBoxType",bti:".BoundingBoxType"},{ln:"ValueType",ps:[{n:"value",t:"v"}]},{ln:"AddressType",ps:[{n:"deliveryPoint",mno:0,col:!0,en:"DeliveryPoint"},{n:"city",en:"City"},{n:"administrativeArea",en:"AdministrativeArea"},{n:"postalCode",en:"PostalCode"},{n:"country",en:"Country"},{n:"electronicMailAddress",mno:0,col:!0,en:"ElectronicMailAddress"}]},{ln:"GetCapabilitiesType",ps:[{n:"acceptVersions",en:"AcceptVersions",ti:".AcceptVersionsType"},{n:"sections",en:"Sections",ti:".SectionsType"},{n:"acceptFormats",en:"AcceptFormats",ti:".AcceptFormatsType"},{n:"acceptLanguages",en:"AcceptLanguages",ti:".GetCapabilitiesType.AcceptLanguages"},{n:"updateSequence",an:{lp:"updateSequence"},t:"a"}]},{ln:"AcceptVersionsType",ps:[{n:"version",rq:!0,col:!0,en:"Version"}]},{ln:"AdditionalParametersType",bti:".AdditionalParametersBaseType"},{ln:"NilValueType",bti:".CodeType",ps:[{n:"nilReason",an:{lp:"nilReason"},t:"a"}]},{ln:"ExceptionType",ps:[{n:"exceptionText",mno:0,col:!0,en:"ExceptionText"},{n:"exceptionCode",rq:!0,an:{lp:"exceptionCode"},t:"a"},{n:"locator",an:{lp:"locator"},t:"a"}]},{ln:"BoundingBoxType",ps:[{n:"lowerCorner",rq:!0,en:"LowerCorner",ti:{t:"l",bti:"Double"}},{n:"upperCorner",rq:!0,en:"UpperCorner",ti:{t:"l",bti:"Double"}},{n:"crs",an:{lp:"crs"},t:"a"},{n:"dimensions",ti:"PositiveInteger",an:{lp:"dimensions"},t:"a"}]},{ln:"DomainType",bti:".UnNamedDomainType",ps:[{n:"name",rq:!0,an:{lp:"name"},t:"a"}]},{ln:"KeywordsType",ps:[{n:"keyword",rq:!0,col:!0,en:"Keyword",ti:".LanguageStringType"},{n:"type",en:"Type",ti:".CodeType"}]},{ln:"DescriptionType",ps:[{n:"title",mno:0,col:!0,en:"Title",ti:".LanguageStringType"},{n:"_abstract",mno:0,col:!0,en:"Abstract",ti:".LanguageStringType"},{n:"keywords",mno:0,col:!0,en:"Keywords",ti:".KeywordsType"}]},{ln:"Operation",tn:null,ps:[{n:"dcp",rq:!0,col:!0,en:"DCP",ti:".DCP"},{n:"parameter",mno:0,col:!0,en:"Parameter",ti:".DomainType"},{n:"constraint",mno:0,col:!0,en:"Constraint",ti:".DomainType"},{n:"metadata",mno:0,col:!0,mx:!1,dom:!1,en:"Metadata",ti:".MetadataType",t:"er"},{n:"name",rq:!0,an:{lp:"name"},t:"a"}]},{ln:"ContentsBaseType",ps:[{n:"datasetDescriptionSummary",mno:0,col:!0,en:"DatasetDescriptionSummary",ti:".DatasetDescriptionSummaryBaseType"},{n:"otherSource",mno:0,col:!0,en:"OtherSource",ti:".MetadataType"}]},{ln:"ServiceIdentification",tn:null,bti:".DescriptionType",ps:[{n:"serviceType",rq:!0,en:"ServiceType",ti:".CodeType"},{n:"serviceTypeVersion",rq:!0,col:!0,en:"ServiceTypeVersion"},{n:"profile",mno:0,col:!0,en:"Profile"},{n:"fees",en:"Fees"},{n:"accessConstraints",mno:0,col:!0,en:"AccessConstraints"}]},{ln:"ResponsiblePartyType",ps:[{n:"individualName",en:"IndividualName"},{n:"organisationName",en:"OrganisationName"},{n:"positionName",en:"PositionName"},{n:"contactInfo",en:"ContactInfo",ti:".ContactType"},{n:"role",rq:!0,en:"Role",ti:".CodeType"}]},{ln:"DatasetDescriptionSummaryBaseType",bti:".DescriptionType",ps:[{n:"wgs84BoundingBox",mno:0,col:!0,en:"WGS84BoundingBox",ti:".WGS84BoundingBoxType"},{n:"identifier",rq:!0,en:"Identifier",ti:".CodeType"},{n:"boundingBox",mno:0,col:!0,mx:!1,dom:!1,en:"BoundingBox",ti:".BoundingBoxType",t:"er"},{n:"metadata",mno:0,col:!0,mx:!1,dom:!1,en:"Metadata",ti:".MetadataType",t:"er"},{n:"datasetDescriptionSummary",mno:0,col:!0,en:"DatasetDescriptionSummary",ti:".DatasetDescriptionSummaryBaseType"}]},{ln:"RequestMethodType",bti:".OnlineResourceType",ps:[{n:"constraint",mno:0,col:!0,en:"Constraint",ti:".DomainType"}]},{ln:"LanguageStringType",ps:[{n:"value",t:"v"},{n:"lang",an:{lp:"lang",ns:"http://www.w3.org/XML/1998/namespace"},t:"a"}]},{ln:"AllowedValues",tn:null,ps:[{n:"valueOrRange",rq:!0,col:!0,etis:[{en:"Value",ti:".ValueType"},{en:"Range",ti:".RangeType"}],t:"es"}]},{ln:"GetCapabilitiesType.AcceptLanguages",tn:null,ps:[{n:"language",rq:!0,col:!0,en:"Language",ti:"Language"}]},{ln:"OnlineResourceType",ps:[{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"CapabilitiesBaseType.Languages",tn:null,ps:[{n:"language",rq:!0,col:!0,en:"Language",ti:"Language"}]},{ln:"HTTP",tn:null,ps:[{n:"getOrPost",rq:!0,col:!0,mx:!1,dom:!1,etis:[{en:"Post",ti:".RequestMethodType"},{en:"Get",ti:".RequestMethodType"}],t:"ers"}]},{ln:"AbstractReferenceBaseType",ps:[{n:"type",an:{lp:"type",ns:"http://www.opengis.net/ows/2.0"},t:"a"},{n:"href",rq:!0,t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"AdditionalParameter",tn:null,ps:[{n:"name",rq:!0,en:"Name",ti:".CodeType"},{n:"value",rq:!0,col:!0,en:"Value",ti:"AnyType"}]}],eis:[{en:"Operation",ti:".Operation"},{en:"OtherSource",ti:".MetadataType"},{en:"AdditionalParameter",ti:".AdditionalParameter",sh:"AbstractMetaData"},{en:"AdditionalParameters",ti:".AdditionalParametersType",sh:"Metadata"},{en:"NoValues",ti:".NoValues"},{en:"ServiceReference",ti:".ServiceReferenceType",sh:"Reference"},{en:"MinimumValue",ti:".ValueType"},{en:"AbstractReferenceBase",ti:".AbstractReferenceBaseType"},{en:"Metadata",ti:".MetadataType"},{en:"GetResourceByID",ti:".GetResourceByIdType"},{en:"AbstractMetaData",ti:"AnyType"},{en:"Abstract",ti:".LanguageStringType"},{en:"OperationsMetadata",ti:".OperationsMetadata"},{en:"DatasetDescriptionSummary",ti:".DatasetDescriptionSummaryBaseType"},{en:"AvailableCRS"},{en:"GetCapabilities",ti:".GetCapabilitiesType"},{en:"OrganisationName"},{en:"ContactInfo",ti:".ContactType"},{en:"Manifest",ti:".ManifestType"},{en:"PointOfContact",ti:".ResponsiblePartyType"},{en:"DefaultValue",ti:".ValueType"},{en:"HTTP",ti:".HTTP"},{en:"Exception",ti:".ExceptionType"},{en:"ExtendedCapabilities",ti:"AnyType"},{en:"AnyValue",ti:".AnyValue"},{en:"Spacing",ti:".ValueType"},{en:"Resource",ti:"AnyType"},{en:"OperationResponse",ti:".ManifestType"},{en:"DataType",ti:".DomainMetadataType"},{en:"Identifier",ti:".CodeType"},{en:"nilValue",ti:".NilValueType"},{en:"Language",ti:"Language"},{en:"AllowedValues",ti:".AllowedValues"},{en:"Post",ti:".RequestMethodType",sc:".HTTP"},{en:"SupportedCRS",sh:"AvailableCRS"},{en:"Role",ti:".CodeType"},{en:"ReferenceGroup",ti:".ReferenceGroupType"},{en:"Meaning",ti:".DomainMetadataType"},{en:"Value",ti:".ValueType"},{en:"DCP",ti:".DCP"},{en:"Range",ti:".RangeType"},{en:"Fees"},{en:"InputData",ti:".ManifestType"},{en:"OutputFormat"},{en:"AccessConstraints"},{en:"ServiceProvider",ti:".ServiceProvider"},{en:"UOM",ti:".DomainMetadataType"},{en:"IndividualName"},{en:"Title",ti:".LanguageStringType"},{en:"MaximumValue",ti:".ValueType"},{en:"ValuesReference",ti:".ValuesReference"},{en:"ReferenceSystem",ti:".DomainMetadataType"},{en:"PositionName"},{en:"Keywords",ti:".KeywordsType"},{en:"WGS84BoundingBox",ti:".WGS84BoundingBoxType",sh:"BoundingBox"},{en:"BoundingBox",ti:".BoundingBoxType"},{en:"Reference",ti:".ReferenceType",sh:"AbstractReferenceBase"},{en:"ServiceIdentification",ti:".ServiceIdentification"},{en:"Get",ti:".RequestMethodType",sc:".HTTP"},{en:"ExceptionReport",ti:".ExceptionReport"}]}}})?Ve.apply(wt,[]):Ve)&&(en.exports=$e)},955:(en,wt)=>{var Ve,$e;void 0!==($e="function"==typeof(Ve=function(){return{SMIL_2_0:{n:"SMIL_2_0",dens:"http://www.w3.org/2001/SMIL20/",deps:["SMIL_2_0_Language"],tis:[{ln:"AnimateMotionPrototype",tn:"animateMotionPrototype",ps:[{n:"origin",an:{lp:"origin"},t:"a"},{n:"from",an:{lp:"from"},t:"a"},{n:"by",an:{lp:"by"},t:"a"},{n:"values",an:{lp:"values"},t:"a"},{n:"to",an:{lp:"to"},t:"a"},{n:"additive",an:{lp:"additive"},t:"a"},{n:"accumulate",an:{lp:"accumulate"},t:"a"}]},{ln:"SetPrototype",tn:"setPrototype",ps:[{n:"attributeName",rq:!0,an:{lp:"attributeName"},t:"a"},{n:"attributeType",an:{lp:"attributeType"},t:"a"},{n:"to",an:{lp:"to"},t:"a"}]},{ln:"AnimateColorPrototype",tn:"animateColorPrototype",ps:[{n:"additive",an:{lp:"additive"},t:"a"},{n:"accumulate",an:{lp:"accumulate"},t:"a"},{n:"attributeName",rq:!0,an:{lp:"attributeName"},t:"a"},{n:"attributeType",an:{lp:"attributeType"},t:"a"},{n:"from",an:{lp:"from"},t:"a"},{n:"by",an:{lp:"by"},t:"a"},{n:"values",an:{lp:"values"},t:"a"},{n:"to",an:{lp:"to"},t:"a"}]},{ln:"AnimatePrototype",tn:"animatePrototype",ps:[{n:"additive",an:{lp:"additive"},t:"a"},{n:"accumulate",an:{lp:"accumulate"},t:"a"},{n:"from",an:{lp:"from"},t:"a"},{n:"by",an:{lp:"by"},t:"a"},{n:"values",an:{lp:"values"},t:"a"},{n:"to",an:{lp:"to"},t:"a"},{n:"attributeName",rq:!0,an:{lp:"attributeName"},t:"a"},{n:"attributeType",an:{lp:"attributeType"},t:"a"}]},{t:"enum",ln:"SyncBehaviorDefaultType",vs:["canSlip","locked","independent","inherit"]},{t:"enum",ln:"SyncBehaviorType",vs:["canSlip","locked","independent","default"]},{t:"enum",ln:"FillTimingAttrsType",vs:["remove","freeze","hold","auto","default","transition"]},{t:"enum",ln:"RestartDefaultType",vs:["never","always","whenNotActive","inherit"]},{t:"enum",ln:"FillDefaultType",vs:["remove","freeze","hold","auto","inherit","transition"]},{t:"enum",ln:"RestartTimingType",vs:["never","always","whenNotActive","default"]}],eis:[{en:"set",ti:"SMIL_2_0_Language.SetType",sh:{lp:"set",ns:"http://www.w3.org/2001/SMIL20/Language"}},{en:"animate",ti:"SMIL_2_0_Language.AnimateType",sh:{lp:"animate",ns:"http://www.w3.org/2001/SMIL20/Language"}},{en:"animateMotion",ti:"SMIL_2_0_Language.AnimateMotionType",sh:{lp:"animateMotion",ns:"http://www.w3.org/2001/SMIL20/Language"}},{en:"animateColor",ti:"SMIL_2_0_Language.AnimateColorType",sh:{lp:"animateColor",ns:"http://www.w3.org/2001/SMIL20/Language"}}]}}})?Ve.apply(wt,[]):Ve)&&(en.exports=$e)},535:(en,wt)=>{var Ve,$e;void 0!==($e="function"==typeof(Ve=function(){return{SMIL_2_0_Language:{n:"SMIL_2_0_Language",dens:"http://www.w3.org/2001/SMIL20/Language",deps:["SMIL_2_0"],tis:[{ln:"AnimateColorType",tn:"animateColorType",bti:"SMIL_2_0.AnimateColorPrototype",ps:[{n:"otherAttributes",t:"aa"},{n:"any",mno:0,col:!0,mx:!1,t:"ae"},{n:"syncBehaviorDefault",an:{lp:"syncBehaviorDefault"},t:"a"},{n:"syncToleranceDefault",an:{lp:"syncToleranceDefault"},t:"a"},{n:"min",an:{lp:"min"},t:"a"},{n:"max",an:{lp:"max"},t:"a"},{n:"begin",an:{lp:"begin"},t:"a"},{n:"end",an:{lp:"end"},t:"a"},{n:"repeatDur",an:{lp:"repeatDur"},t:"a"},{n:"repeatCount",ti:"Decimal",an:{lp:"repeatCount"},t:"a"},{n:"dur",an:{lp:"dur"},t:"a"},{n:"repeat",ti:"NonNegativeInteger",an:{lp:"repeat"},t:"a"},{n:"fillDefault",an:{lp:"fillDefault"},t:"a"},{n:"restart",an:{lp:"restart"},t:"a"},{n:"restartDefault",an:{lp:"restartDefault"},t:"a"},{n:"syncBehavior",an:{lp:"syncBehavior"},t:"a"},{n:"syncTolerance",an:{lp:"syncTolerance"},t:"a"},{n:"fill",an:{lp:"fill"},t:"a"},{n:"skipContent",ti:"Boolean",an:{lp:"skip-content"},t:"a"},{n:"alt",an:{lp:"alt"},t:"a"},{n:"longdesc",an:{lp:"longdesc"},t:"a"},{n:"id",ti:"ID",an:{lp:"id"},t:"a"},{n:"clazz",an:{lp:"class"},t:"a"},{n:"lang",an:{lp:"lang",ns:"http://www.w3.org/XML/1998/namespace"},t:"a"},{n:"targetElement",ti:"IDREF",an:{lp:"targetElement"},t:"a"},{n:"calcMode",an:{lp:"calcMode"},t:"a"}]},{ln:"SetType",tn:"setType",bti:"SMIL_2_0.SetPrototype",ps:[{n:"otherAttributes",t:"aa"},{n:"any",mno:0,col:!0,mx:!1,t:"ae"},{n:"targetElement",ti:"IDREF",an:{lp:"targetElement"},t:"a"},{n:"skipContent",ti:"Boolean",an:{lp:"skip-content"},t:"a"},{n:"alt",an:{lp:"alt"},t:"a"},{n:"longdesc",an:{lp:"longdesc"},t:"a"},{n:"id",ti:"ID",an:{lp:"id"},t:"a"},{n:"clazz",an:{lp:"class"},t:"a"},{n:"lang",an:{lp:"lang",ns:"http://www.w3.org/XML/1998/namespace"},t:"a"},{n:"syncBehaviorDefault",an:{lp:"syncBehaviorDefault"},t:"a"},{n:"syncToleranceDefault",an:{lp:"syncToleranceDefault"},t:"a"},{n:"min",an:{lp:"min"},t:"a"},{n:"max",an:{lp:"max"},t:"a"},{n:"begin",an:{lp:"begin"},t:"a"},{n:"end",an:{lp:"end"},t:"a"},{n:"repeatDur",an:{lp:"repeatDur"},t:"a"},{n:"repeatCount",ti:"Decimal",an:{lp:"repeatCount"},t:"a"},{n:"dur",an:{lp:"dur"},t:"a"},{n:"repeat",ti:"NonNegativeInteger",an:{lp:"repeat"},t:"a"},{n:"fillDefault",an:{lp:"fillDefault"},t:"a"},{n:"restart",an:{lp:"restart"},t:"a"},{n:"restartDefault",an:{lp:"restartDefault"},t:"a"},{n:"syncBehavior",an:{lp:"syncBehavior"},t:"a"},{n:"syncTolerance",an:{lp:"syncTolerance"},t:"a"},{n:"fill",an:{lp:"fill"},t:"a"}]},{ln:"AnimateType",tn:"animateType",bti:"SMIL_2_0.AnimatePrototype",ps:[{n:"otherAttributes",t:"aa"},{n:"any",mno:0,col:!0,mx:!1,t:"ae"},{n:"skipContent",ti:"Boolean",an:{lp:"skip-content"},t:"a"},{n:"calcMode",an:{lp:"calcMode"},t:"a"},{n:"alt",an:{lp:"alt"},t:"a"},{n:"longdesc",an:{lp:"longdesc"},t:"a"},{n:"id",ti:"ID",an:{lp:"id"},t:"a"},{n:"clazz",an:{lp:"class"},t:"a"},{n:"lang",an:{lp:"lang",ns:"http://www.w3.org/XML/1998/namespace"},t:"a"},{n:"targetElement",ti:"IDREF",an:{lp:"targetElement"},t:"a"},{n:"syncBehaviorDefault",an:{lp:"syncBehaviorDefault"},t:"a"},{n:"syncToleranceDefault",an:{lp:"syncToleranceDefault"},t:"a"},{n:"min",an:{lp:"min"},t:"a"},{n:"max",an:{lp:"max"},t:"a"},{n:"begin",an:{lp:"begin"},t:"a"},{n:"end",an:{lp:"end"},t:"a"},{n:"repeatDur",an:{lp:"repeatDur"},t:"a"},{n:"repeatCount",ti:"Decimal",an:{lp:"repeatCount"},t:"a"},{n:"dur",an:{lp:"dur"},t:"a"},{n:"repeat",ti:"NonNegativeInteger",an:{lp:"repeat"},t:"a"},{n:"fillDefault",an:{lp:"fillDefault"},t:"a"},{n:"restart",an:{lp:"restart"},t:"a"},{n:"restartDefault",an:{lp:"restartDefault"},t:"a"},{n:"syncBehavior",an:{lp:"syncBehavior"},t:"a"},{n:"syncTolerance",an:{lp:"syncTolerance"},t:"a"},{n:"fill",an:{lp:"fill"},t:"a"}]},{ln:"AnimateMotionType",tn:"animateMotionType",bti:"SMIL_2_0.AnimateMotionPrototype",ps:[{n:"otherAttributes",t:"aa"},{n:"any",mno:0,col:!0,mx:!1,t:"ae"},{n:"targetElement",ti:"IDREF",an:{lp:"targetElement"},t:"a"},{n:"alt",an:{lp:"alt"},t:"a"},{n:"longdesc",an:{lp:"longdesc"},t:"a"},{n:"id",ti:"ID",an:{lp:"id"},t:"a"},{n:"clazz",an:{lp:"class"},t:"a"},{n:"lang",an:{lp:"lang",ns:"http://www.w3.org/XML/1998/namespace"},t:"a"},{n:"skipContent",ti:"Boolean",an:{lp:"skip-content"},t:"a"},{n:"calcMode",an:{lp:"calcMode"},t:"a"},{n:"syncBehaviorDefault",an:{lp:"syncBehaviorDefault"},t:"a"},{n:"syncToleranceDefault",an:{lp:"syncToleranceDefault"},t:"a"},{n:"min",an:{lp:"min"},t:"a"},{n:"max",an:{lp:"max"},t:"a"},{n:"begin",an:{lp:"begin"},t:"a"},{n:"end",an:{lp:"end"},t:"a"},{n:"repeatDur",an:{lp:"repeatDur"},t:"a"},{n:"repeatCount",ti:"Decimal",an:{lp:"repeatCount"},t:"a"},{n:"dur",an:{lp:"dur"},t:"a"},{n:"repeat",ti:"NonNegativeInteger",an:{lp:"repeat"},t:"a"},{n:"fillDefault",an:{lp:"fillDefault"},t:"a"},{n:"restart",an:{lp:"restart"},t:"a"},{n:"restartDefault",an:{lp:"restartDefault"},t:"a"},{n:"syncBehavior",an:{lp:"syncBehavior"},t:"a"},{n:"syncTolerance",an:{lp:"syncTolerance"},t:"a"},{n:"fill",an:{lp:"fill"},t:"a"}]}],eis:[{en:"animate",ti:".AnimateType"},{en:"animateMotion",ti:".AnimateMotionType"},{en:"animateColor",ti:".AnimateColorType"},{en:"set",ti:".SetType"}]}}})?Ve.apply(wt,[]):Ve)&&(en.exports=$e)},788:(en,wt)=>{var Ve,$e;void 0!==($e="function"==typeof(Ve=function(){return{WMTS_1_0:{n:"WMTS_1_0",dens:"http://www.opengis.net/wmts/1.0",deps:["OWS_1_1_0","GML_3_1_1"],tis:[{ln:"GetCapabilities",tn:null,bti:"OWS_1_1_0.GetCapabilitiesType",ps:[{n:"service",rq:!0,an:{lp:"service"},t:"a"}]},{ln:"LegendURL",tn:null,bti:"OWS_1_1_0.OnlineResourceType",ps:[{n:"format",an:{lp:"format"},t:"a"},{n:"minScaleDenominator",ti:"Double",an:{lp:"minScaleDenominator"},t:"a"},{n:"maxScaleDenominator",ti:"Double",an:{lp:"maxScaleDenominator"},t:"a"},{n:"width",ti:"PositiveInteger",an:{lp:"width"},t:"a"},{n:"height",ti:"PositiveInteger",an:{lp:"height"},t:"a"}]},{ln:"Themes",tn:null,ps:[{n:"theme",mno:0,col:!0,en:"Theme",ti:".Theme"}]},{ln:"URLTemplateType",ps:[{n:"format",rq:!0,an:{lp:"format"},t:"a"},{n:"resourceType",rq:!0,an:{lp:"resourceType"},t:"a"},{n:"template",rq:!0,an:{lp:"template"},t:"a"}]},{ln:"Style",tn:null,bti:"OWS_1_1_0.DescriptionType",ps:[{n:"identifier",rq:!0,en:{lp:"Identifier",ns:"http://www.opengis.net/ows/1.1"},ti:"OWS_1_1_0.CodeType"},{n:"legendURL",mno:0,col:!0,en:"LegendURL",ti:".LegendURL"},{n:"isDefault",ti:"Boolean",an:{lp:"isDefault"},t:"a"}]},{ln:"TileMatrixSet",tn:null,bti:"OWS_1_1_0.DescriptionType",ps:[{n:"identifier",rq:!0,en:{lp:"Identifier",ns:"http://www.opengis.net/ows/1.1"},ti:"OWS_1_1_0.CodeType"},{n:"boundingBox",mx:!1,dom:!1,en:{lp:"BoundingBox",ns:"http://www.opengis.net/ows/1.1"},ti:"OWS_1_1_0.BoundingBoxType",t:"er"},{n:"supportedCRS",rq:!0,en:{lp:"SupportedCRS",ns:"http://www.opengis.net/ows/1.1"}},{n:"wellKnownScaleSet",en:"WellKnownScaleSet"},{n:"tileMatrix",rq:!0,col:!0,en:"TileMatrix",ti:".TileMatrix"}]},{ln:"FeatureInfoResponse",tn:null,ps:[{n:"featureCollection",rq:!0,en:{lp:"_FeatureCollection",ns:"http://www.opengis.net/gml"},ti:"GML_3_1_1.AbstractFeatureCollectionType"},{n:"textPayload",rq:!0,en:"TextPayload",ti:".TextPayload"},{n:"binaryPayload",rq:!0,en:"BinaryPayload",ti:".BinaryPayload"},{n:"anyContent",rq:!0,en:"AnyContent",ti:"AnyType"}]},{ln:"Dimension",tn:null,bti:"OWS_1_1_0.DescriptionType",ps:[{n:"identifier",rq:!0,en:{lp:"Identifier",ns:"http://www.opengis.net/ows/1.1"},ti:"OWS_1_1_0.CodeType"},{n:"uom",en:{lp:"UOM",ns:"http://www.opengis.net/ows/1.1"},ti:"OWS_1_1_0.DomainMetadataType"},{n:"unitSymbol",en:"UnitSymbol"},{n:"_default",en:"Default"},{n:"current",en:"Current",ti:"Boolean"},{n:"value",rq:!0,col:!0,en:"Value"}]},{ln:"TileMatrixSetLink",tn:null,ps:[{n:"tileMatrixSet",rq:!0,en:"TileMatrixSet"},{n:"tileMatrixSetLimits",en:"TileMatrixSetLimits",ti:".TileMatrixSetLimits"}]},{ln:"TileMatrixLimits",tn:null,ps:[{n:"tileMatrix",rq:!0,en:"TileMatrix"},{n:"minTileRow",rq:!0,en:"MinTileRow",ti:"PositiveInteger"},{n:"maxTileRow",rq:!0,en:"MaxTileRow",ti:"PositiveInteger"},{n:"minTileCol",rq:!0,en:"MinTileCol",ti:"PositiveInteger"},{n:"maxTileCol",rq:!0,en:"MaxTileCol",ti:"PositiveInteger"}]},{ln:"LayerType",bti:"OWS_1_1_0.DatasetDescriptionSummaryBaseType",ps:[{n:"style",rq:!0,col:!0,en:"Style",ti:".Style"},{n:"format",rq:!0,col:!0,en:"Format"},{n:"infoFormat",mno:0,col:!0,en:"InfoFormat"},{n:"dimension",mno:0,col:!0,en:"Dimension",ti:".Dimension"},{n:"tileMatrixSetLink",rq:!0,col:!0,en:"TileMatrixSetLink",ti:".TileMatrixSetLink"},{n:"resourceURL",mno:0,col:!0,en:"ResourceURL",ti:".URLTemplateType"}]},{ln:"TileMatrix",tn:null,bti:"OWS_1_1_0.DescriptionType",ps:[{n:"identifier",rq:!0,en:{lp:"Identifier",ns:"http://www.opengis.net/ows/1.1"},ti:"OWS_1_1_0.CodeType"},{n:"scaleDenominator",rq:!0,en:"ScaleDenominator",ti:"Double"},{n:"topLeftCorner",rq:!0,en:"TopLeftCorner",ti:{t:"l",bti:"Double"}},{n:"tileWidth",rq:!0,en:"TileWidth",ti:"PositiveInteger"},{n:"tileHeight",rq:!0,en:"TileHeight",ti:"PositiveInteger"},{n:"matrixWidth",rq:!0,en:"MatrixWidth",ti:"PositiveInteger"},{n:"matrixHeight",rq:!0,en:"MatrixHeight",ti:"PositiveInteger"}]},{ln:"GetFeatureInfo",tn:null,ps:[{n:"getTile",rq:!0,en:"GetTile",ti:".GetTile"},{n:"j",rq:!0,en:"J",ti:"NonNegativeInteger"},{n:"i",rq:!0,en:"I",ti:"NonNegativeInteger"},{n:"infoFormat",rq:!0,en:"InfoFormat"},{n:"service",rq:!0,an:{lp:"service"},t:"a"},{n:"version",rq:!0,an:{lp:"version"},t:"a"}]},{ln:"TextPayload",tn:null,ps:[{n:"format",rq:!0,en:"Format"},{n:"textContent",rq:!0,en:"TextContent"}]},{ln:"Capabilities",tn:null,bti:"OWS_1_1_0.CapabilitiesBaseType",ps:[{n:"contents",en:"Contents",ti:".ContentsType"},{n:"themes",mno:0,col:!0,en:"Themes",ti:".Themes"},{n:"wsdl",mno:0,col:!0,en:"WSDL",ti:"OWS_1_1_0.OnlineResourceType"},{n:"serviceMetadataURL",mno:0,col:!0,en:"ServiceMetadataURL",ti:"OWS_1_1_0.OnlineResourceType"}]},{ln:"BinaryPayload",tn:null,ps:[{n:"format",rq:!0,en:"Format"},{n:"binaryContent",rq:!0,en:"BinaryContent",ti:"Base64Binary"}]},{ln:"GetTile",tn:null,ps:[{n:"layer",rq:!0,en:"Layer"},{n:"style",rq:!0,en:"Style"},{n:"format",rq:!0,en:"Format"},{n:"dimensionNameValue",mno:0,col:!0,en:"DimensionNameValue",ti:".DimensionNameValue"},{n:"tileMatrixSet",rq:!0,en:"TileMatrixSet"},{n:"tileMatrix",rq:!0,en:"TileMatrix"},{n:"tileRow",rq:!0,en:"TileRow",ti:"NonNegativeInteger"},{n:"tileCol",rq:!0,en:"TileCol",ti:"NonNegativeInteger"},{n:"service",rq:!0,an:{lp:"service"},t:"a"},{n:"version",rq:!0,an:{lp:"version"},t:"a"}]},{ln:"DimensionNameValue",tn:null,ps:[{n:"value",t:"v"},{n:"name",rq:!0,an:{lp:"name"},t:"a"}]},{ln:"TileMatrixSetLimits",tn:null,ps:[{n:"tileMatrixLimits",rq:!0,col:!0,en:"TileMatrixLimits",ti:".TileMatrixLimits"}]},{ln:"ContentsType",bti:"OWS_1_1_0.ContentsBaseType",ps:[{n:"tileMatrixSet",mno:0,col:!0,en:"TileMatrixSet",ti:".TileMatrixSet"}]},{ln:"Theme",tn:null,bti:"OWS_1_1_0.DescriptionType",ps:[{n:"identifier",rq:!0,en:{lp:"Identifier",ns:"http://www.opengis.net/ows/1.1"},ti:"OWS_1_1_0.CodeType"},{n:"theme",mno:0,col:!0,en:"Theme",ti:".Theme"},{n:"layerRef",mno:0,col:!0,en:"LayerRef"}]},{t:"enum",ln:"RequestServiceType",vs:["WMTS"]},{t:"enum",ln:"GetTileValueType",vs:["GetTile"]},{t:"enum",ln:"GetCapabilitiesValueType",vs:["GetCapabilities"]},{t:"enum",ln:"GetFeatureInfoValueType",vs:["GetFeatureInfo"]},{t:"enum",ln:"VersionType",vs:["1.0.0"]}],eis:[{en:"TileMatrixSet",ti:".TileMatrixSet"},{en:"LegendURL",ti:".LegendURL"},{en:"Dimension",ti:".Dimension"},{en:"GetTile",ti:".GetTile"},{en:"TileMatrixSetLimits",ti:".TileMatrixSetLimits"},{en:"DimensionNameValue",ti:".DimensionNameValue"},{en:"Layer",ti:".LayerType",sh:{lp:"DatasetDescriptionSummary",ns:"http://www.opengis.net/ows/1.1"}},{en:"Style",ti:".Style"},{en:"GetFeatureInfo",ti:".GetFeatureInfo"},{en:"TileMatrixLimits",ti:".TileMatrixLimits"},{en:"GetCapabilities",ti:".GetCapabilities"},{en:"TileMatrix",ti:".TileMatrix"},{en:"TileMatrixSetLink",ti:".TileMatrixSetLink"},{en:"Theme",ti:".Theme"},{en:"FeatureInfoResponse",ti:".FeatureInfoResponse"},{en:"BinaryPayload",ti:".BinaryPayload"},{en:"TextPayload",ti:".TextPayload"},{en:"Capabilities",ti:".Capabilities"},{en:"Themes",ti:".Themes"}]}}})?Ve.apply(wt,[]):Ve)&&(en.exports=$e)},10:(en,wt)=>{var Ve,$e;void 0!==($e="function"==typeof(Ve=function(){return{WPS_1_0_0:{n:"WPS_1_0_0",dens:"http://www.opengis.net/wps/1.0.0",deps:["OWS_1_1_0"],tis:[{ln:"LiteralInputType",bti:".LiteralOutputType",ps:[{n:"allowedValues",rq:!0,en:{lp:"AllowedValues",ns:"http://www.opengis.net/ows/1.1"},ti:"OWS_1_1_0.AllowedValues"},{n:"anyValue",rq:!0,en:{lp:"AnyValue",ns:"http://www.opengis.net/ows/1.1"},ti:"OWS_1_1_0.AnyValue"},{n:"valuesReference",rq:!0,en:{lp:"ValuesReference"},ti:".ValuesReferenceType"},{n:"defaultValue",en:{lp:"DefaultValue"}}]},{ln:"OutputReferenceType",ps:[{n:"href",rq:!0,an:{lp:"href"},t:"a"},{n:"mimeType",an:{lp:"mimeType"},t:"a"},{n:"encoding",an:{lp:"encoding"},t:"a"},{n:"schema",an:{lp:"schema"},t:"a"}]},{ln:"ResponseFormType",ps:[{n:"responseDocument",rq:!0,en:"ResponseDocument",ti:".ResponseDocumentType"},{n:"rawDataOutput",rq:!0,en:"RawDataOutput",ti:".OutputDefinitionType"}]},{ln:"DataType",ps:[{n:"complexData",rq:!0,en:"ComplexData",ti:".ComplexDataType"},{n:"literalData",rq:!0,en:"LiteralData",ti:".LiteralDataType"},{n:"boundingBoxData",rq:!0,en:"BoundingBoxData",ti:"OWS_1_1_0.BoundingBoxType"}]},{ln:"ComplexDataCombinationsType",ps:[{n:"format",rq:!0,col:!0,en:{lp:"Format"},ti:".ComplexDataDescriptionType"}]},{ln:"ResponseDocumentType",ps:[{n:"output",rq:!0,col:!0,en:"Output",ti:".DocumentOutputDefinitionType"},{n:"storeExecuteResponse",ti:"Boolean",an:{lp:"storeExecuteResponse"},t:"a"},{n:"lineage",ti:"Boolean",an:{lp:"lineage"},t:"a"},{n:"status",ti:"Boolean",an:{lp:"status"},t:"a"}]},{ln:"ProcessDescriptionType.ProcessOutputs",tn:null,ps:[{n:"output",rq:!0,col:!0,en:{lp:"Output"},ti:".OutputDescriptionType"}]},{ln:"InputReferenceType.Header",tn:null,ps:[{n:"key",rq:!0,an:{lp:"key"},t:"a"},{n:"value",rq:!0,an:{lp:"value"},t:"a"}]},{ln:"ProcessOfferings",tn:null,ps:[{n:"process",rq:!0,col:!0,en:"Process",ti:".ProcessBriefType"}]},{ln:"SupportedComplexDataInputType",bti:".SupportedComplexDataType",ps:[{n:"maximumMegabytes",ti:"Integer",an:{lp:"maximumMegabytes"},t:"a"}]},{ln:"SupportedComplexDataType",ps:[{n:"_default",rq:!0,en:{lp:"Default"},ti:".ComplexDataCombinationType"},{n:"supported",rq:!0,en:{lp:"Supported"},ti:".ComplexDataCombinationsType"}]},{ln:"ValuesReferenceType",ps:[{n:"reference",an:{lp:"reference",ns:"http://www.opengis.net/ows/1.1"},t:"a"},{n:"valuesForm",an:{lp:"valuesForm"},t:"a"}]},{ln:"ComplexDataType",ps:[{n:"otherAttributes",t:"aa"},{n:"content",col:!0,t:"ae"},{n:"mimeType",an:{lp:"mimeType"},t:"a"},{n:"encoding",an:{lp:"encoding"},t:"a"},{n:"schema",an:{lp:"schema"},t:"a"}]},{ln:"ProcessBriefType",bti:".DescriptionType",ps:[{n:"profile",mno:0,col:!0,en:"Profile"},{n:"wsdl",en:"WSDL",ti:".WSDL"},{n:"processVersion",rq:!0,an:{lp:"processVersion",ns:"http://www.opengis.net/wps/1.0.0"},t:"a"}]},{ln:"Languages",tn:null,ps:[{n:"_default",rq:!0,en:"Default",ti:".Languages.Default"},{n:"supported",rq:!0,en:"Supported",ti:".LanguagesType"}]},{ln:"ExecuteResponse.ProcessOutputs",tn:null,ps:[{n:"output",rq:!0,col:!0,en:"Output",ti:".OutputDataType"}]},{ln:"DescriptionType",ps:[{n:"identifier",rq:!0,en:{lp:"Identifier",ns:"http://www.opengis.net/ows/1.1"},ti:"OWS_1_1_0.CodeType"},{n:"title",rq:!0,en:{lp:"Title",ns:"http://www.opengis.net/ows/1.1"},ti:"OWS_1_1_0.LanguageStringType"},{n:"_abstract",en:{lp:"Abstract",ns:"http://www.opengis.net/ows/1.1"},ti:"OWS_1_1_0.LanguageStringType"},{n:"metadata",mno:0,col:!0,en:{lp:"Metadata",ns:"http://www.opengis.net/ows/1.1"},ti:"OWS_1_1_0.MetadataType"}]},{ln:"WPSCapabilitiesType",bti:"OWS_1_1_0.CapabilitiesBaseType",ps:[{n:"processOfferings",rq:!0,en:"ProcessOfferings",ti:".ProcessOfferings"},{n:"languages",rq:!0,en:"Languages",ti:".Languages"},{n:"wsdl",en:"WSDL",ti:".WSDL"},{n:"service",rq:!0,ti:"AnySimpleType",an:{lp:"service"},t:"a"},{n:"lang",rq:!0,an:{lp:"lang",ns:"http://www.w3.org/XML/1998/namespace"},t:"a"}]},{ln:"ProcessStartedType",ps:[{n:"value",t:"v"},{n:"percentCompleted",ti:"Int",an:{lp:"percentCompleted"},t:"a"}]},{ln:"DescribeProcess",tn:null,bti:".RequestBaseType",ps:[{n:"identifier",rq:!0,col:!0,en:{lp:"Identifier",ns:"http://www.opengis.net/ows/1.1"},ti:"OWS_1_1_0.CodeType"}]},{ln:"OutputDescriptionType",bti:".DescriptionType",ps:[{n:"complexOutput",rq:!0,en:{lp:"ComplexOutput"},ti:".SupportedComplexDataType"},{n:"literalOutput",rq:!0,en:{lp:"LiteralOutput"},ti:".LiteralOutputType"},{n:"boundingBoxOutput",rq:!0,en:{lp:"BoundingBoxOutput"},ti:".SupportedCRSsType"}]},{ln:"ProcessDescriptions",tn:null,bti:".ResponseBaseType",ps:[{n:"processDescription",rq:!0,col:!0,en:{lp:"ProcessDescription"},ti:".ProcessDescriptionType"}]},{ln:"InputDescriptionType",bti:".DescriptionType",ps:[{n:"complexData",rq:!0,en:{lp:"ComplexData"},ti:".SupportedComplexDataInputType"},{n:"literalData",rq:!0,en:{lp:"LiteralData"},ti:".LiteralInputType"},{n:"boundingBoxData",rq:!0,en:{lp:"BoundingBoxData"},ti:".SupportedCRSsType"},{n:"minOccurs",rq:!0,ti:"NonNegativeInteger",an:{lp:"minOccurs"},t:"a"},{n:"maxOccurs",rq:!0,ti:"PositiveInteger",an:{lp:"maxOccurs"},t:"a"}]},{ln:"RequestBaseType",ps:[{n:"service",rq:!0,an:{lp:"service"},t:"a"},{n:"version",rq:!0,an:{lp:"version"},t:"a"},{n:"language",an:{lp:"language"},t:"a"}]},{ln:"InputReferenceType",ps:[{n:"header",mno:0,col:!0,en:"Header",ti:".InputReferenceType.Header"},{n:"body",rq:!0,en:"Body",ti:"AnyType"},{n:"bodyReference",rq:!0,en:"BodyReference",ti:".InputReferenceType.BodyReference"},{n:"href",rq:!0,an:{lp:"href",ns:"http://www.w3.org/1999/xlink"},t:"a"},{n:"method",an:{lp:"method"},t:"a"},{n:"mimeType",an:{lp:"mimeType"},t:"a"},{n:"encoding",an:{lp:"encoding"},t:"a"},{n:"schema",an:{lp:"schema"},t:"a"}]},{ln:"LiteralOutputType",ps:[{n:"dataType",en:{lp:"DataType",ns:"http://www.opengis.net/ows/1.1"},ti:"OWS_1_1_0.DomainMetadataType"},{n:"uoMs",en:{lp:"UOMs"},ti:".SupportedUOMsType"}]},{ln:"ProcessDescriptionType",bti:".ProcessBriefType",ps:[{n:"dataInputs",en:{lp:"DataInputs"},ti:".ProcessDescriptionType.DataInputs"},{n:"processOutputs",rq:!0,en:{lp:"ProcessOutputs"},ti:".ProcessDescriptionType.ProcessOutputs"},{n:"storeSupported",ti:"Boolean",an:{lp:"storeSupported"},t:"a"},{n:"statusSupported",ti:"Boolean",an:{lp:"statusSupported"},t:"a"}]},{ln:"StatusType",ps:[{n:"processAccepted",rq:!0,en:"ProcessAccepted"},{n:"processStarted",rq:!0,en:"ProcessStarted",ti:".ProcessStartedType"},{n:"processPaused",rq:!0,en:"ProcessPaused",ti:".ProcessStartedType"},{n:"processSucceeded",rq:!0,en:"ProcessSucceeded"},{n:"processFailed",rq:!0,en:"ProcessFailed",ti:".ProcessFailedType"},{n:"creationTime",rq:!0,ti:"DateTime",an:{lp:"creationTime"},t:"a"}]},{ln:"UOMsType",ps:[{n:"uom",rq:!0,col:!0,en:{lp:"UOM",ns:"http://www.opengis.net/ows/1.1"},ti:"OWS_1_1_0.DomainMetadataType"}]},{ln:"ComplexDataCombinationType",ps:[{n:"format",rq:!0,en:{lp:"Format"},ti:".ComplexDataDescriptionType"}]},{ln:"CRSsType",ps:[{n:"crs",rq:!0,col:!0,en:{lp:"CRS"}}]},{ln:"LiteralDataType",ps:[{n:"value",t:"v"},{n:"dataType",an:{lp:"dataType"},t:"a"},{n:"uom",an:{lp:"uom"},t:"a"}]},{ln:"Execute",tn:null,bti:".RequestBaseType",ps:[{n:"identifier",rq:!0,en:{lp:"Identifier",ns:"http://www.opengis.net/ows/1.1"},ti:"OWS_1_1_0.CodeType"},{n:"dataInputs",en:"DataInputs",ti:".DataInputsType"},{n:"responseForm",en:"ResponseForm",ti:".ResponseFormType"}]},{ln:"ComplexDataDescriptionType",ps:[{n:"mimeType",rq:!0,en:{lp:"MimeType"}},{n:"encoding",en:{lp:"Encoding"}},{n:"schema",en:{lp:"Schema"}}]},{ln:"SupportedCRSsType.Default",tn:null,ps:[{n:"crs",rq:!0,en:{lp:"CRS"}}]},{ln:"ExecuteResponse",tn:null,bti:".ResponseBaseType",ps:[{n:"process",rq:!0,en:"Process",ti:".ProcessBriefType"},{n:"status",rq:!0,en:"Status",ti:".StatusType"},{n:"dataInputs",en:"DataInputs",ti:".DataInputsType"},{n:"outputDefinitions",en:"OutputDefinitions",ti:".OutputDefinitionsType"},{n:"processOutputs",en:"ProcessOutputs",ti:".ExecuteResponse.ProcessOutputs"},{n:"serviceInstance",rq:!0,an:{lp:"serviceInstance"},t:"a"},{n:"statusLocation",an:{lp:"statusLocation"},t:"a"}]},{ln:"SupportedUOMsType.Default",tn:null,ps:[{n:"uom",rq:!0,en:{lp:"UOM",ns:"http://www.opengis.net/ows/1.1"},ti:"OWS_1_1_0.DomainMetadataType"}]},{ln:"ProcessFailedType",ps:[{n:"exceptionReport",rq:!0,en:{lp:"ExceptionReport",ns:"http://www.opengis.net/ows/1.1"},ti:"OWS_1_1_0.ExceptionReport"}]},{ln:"LanguagesType",ps:[{n:"language",rq:!0,col:!0,en:{lp:"Language",ns:"http://www.opengis.net/ows/1.1"},ti:"Language"}]},{ln:"OutputDefinitionsType",ps:[{n:"output",rq:!0,col:!0,en:"Output",ti:".DocumentOutputDefinitionType"}]},{ln:"WSDL",tn:null,ps:[{n:"href",rq:!0,an:{lp:"href",ns:"http://www.w3.org/1999/xlink"},t:"a"}]},{ln:"SupportedUOMsType",ps:[{n:"_default",rq:!0,en:{lp:"Default"},ti:".SupportedUOMsType.Default"},{n:"supported",rq:!0,en:{lp:"Supported"},ti:".UOMsType"}]},{ln:"InputReferenceType.BodyReference",tn:null,ps:[{n:"href",rq:!0,an:{lp:"href",ns:"http://www.w3.org/1999/xlink"},t:"a"}]},{ln:"DataInputsType",ps:[{n:"input",rq:!0,col:!0,en:"Input",ti:".InputType"}]},{ln:"SupportedCRSsType",ps:[{n:"_default",rq:!0,en:{lp:"Default"},ti:".SupportedCRSsType.Default"},{n:"supported",rq:!0,en:{lp:"Supported"},ti:".CRSsType"}]},{ln:"Languages.Default",tn:null,ps:[{n:"language",rq:!0,en:{lp:"Language",ns:"http://www.opengis.net/ows/1.1"},ti:"Language"}]},{ln:"DocumentOutputDefinitionType",bti:".OutputDefinitionType",ps:[{n:"title",en:{lp:"Title",ns:"http://www.opengis.net/ows/1.1"},ti:"OWS_1_1_0.LanguageStringType"},{n:"_abstract",en:{lp:"Abstract",ns:"http://www.opengis.net/ows/1.1"},ti:"OWS_1_1_0.LanguageStringType"},{n:"asReference",ti:"Boolean",an:{lp:"asReference"},t:"a"}]},{ln:"ProcessDescriptionType.DataInputs",tn:null,ps:[{n:"input",rq:!0,col:!0,en:{lp:"Input"},ti:".InputDescriptionType"}]},{ln:"OutputDefinitionType",ps:[{n:"identifier",rq:!0,en:{lp:"Identifier",ns:"http://www.opengis.net/ows/1.1"},ti:"OWS_1_1_0.CodeType"},{n:"uom",an:{lp:"uom"},t:"a"},{n:"mimeType",an:{lp:"mimeType"},t:"a"},{n:"encoding",an:{lp:"encoding"},t:"a"},{n:"schema",an:{lp:"schema"},t:"a"}]},{ln:"OutputDataType",bti:".DescriptionType",ps:[{n:"reference",rq:!0,en:"Reference",ti:".OutputReferenceType"},{n:"data",rq:!0,en:"Data",ti:".DataType"}]},{ln:"InputType",ps:[{n:"identifier",rq:!0,en:{lp:"Identifier",ns:"http://www.opengis.net/ows/1.1"},ti:"OWS_1_1_0.CodeType"},{n:"title",en:{lp:"Title",ns:"http://www.opengis.net/ows/1.1"},ti:"OWS_1_1_0.LanguageStringType"},{n:"_abstract",en:{lp:"Abstract",ns:"http://www.opengis.net/ows/1.1"},ti:"OWS_1_1_0.LanguageStringType"},{n:"reference",rq:!0,en:"Reference",ti:".InputReferenceType"},{n:"data",rq:!0,en:"Data",ti:".DataType"}]},{ln:"ResponseBaseType",ps:[{n:"service",rq:!0,an:{lp:"service"},t:"a"},{n:"version",rq:!0,an:{lp:"version"},t:"a"},{n:"lang",rq:!0,an:{lp:"lang",ns:"http://www.w3.org/XML/1998/namespace"},t:"a"}]},{ln:"GetCapabilities",tn:null,ps:[{n:"acceptVersions",en:"AcceptVersions",ti:"OWS_1_1_0.AcceptVersionsType"},{n:"service",rq:!0,an:{lp:"service"},t:"a"},{n:"language",an:{lp:"language"},t:"a"}]}],eis:[{en:"ExecuteResponse",ti:".ExecuteResponse"},{en:"WSDL",ti:".WSDL"},{en:"Languages",ti:".Languages"},{en:"Capabilities",ti:".WPSCapabilitiesType"},{en:"GetCapabilities",ti:".GetCapabilities"},{en:"ProcessDescriptions",ti:".ProcessDescriptions"},{en:"Execute",ti:".Execute"},{en:"ProcessOfferings",ti:".ProcessOfferings"},{en:"DescribeProcess",ti:".DescribeProcess"}]}}})?Ve.apply(wt,[]):Ve)&&(en.exports=$e)},731:(en,wt)=>{var Ve,$e;void 0!==($e="function"==typeof(Ve=function(){return{WPS_2_0:{n:"WPS_2_0",dens:"http://www.opengis.net/wps/2.0",deps:["OWS_2_0"],tis:[{ln:"OutputDescriptionType",bti:".DescriptionType",ps:[{n:"dataDescription",rq:!0,mx:!1,dom:!1,en:"DataDescription",ti:".DataDescriptionType",t:"er"},{n:"output",rq:!0,col:!0,en:"Output",ti:".OutputDescriptionType"}]},{ln:"DataOutputType",ps:[{n:"data",rq:!0,en:"Data",ti:".Data"},{n:"reference",rq:!0,en:"Reference",ti:".ReferenceType"},{n:"output",rq:!0,en:"Output",ti:".DataOutputType"},{n:"id",rq:!0,an:{lp:"id"},t:"a"}]},{ln:"WPSCapabilitiesType.Extension",tn:null,ps:[{n:"any",mno:0,col:!0,mx:!1,t:"ae"}]},{ln:"Dismiss",tn:null,bti:".RequestBaseType",ps:[{n:"jobID",rq:!0,en:"JobID"}]},{ln:"LiteralDataType",bti:".DataDescriptionType",ps:[{n:"literalDataDomain",rq:!0,col:!0,en:{lp:"LiteralDataDomain"},ti:".LiteralDataType.LiteralDataDomain"}]},{ln:"GetCapabilitiesType",bti:"OWS_2_0.GetCapabilitiesType",ps:[{n:"service",rq:!0,an:{lp:"service"},t:"a"}]},{ln:"Contents",tn:null,ps:[{n:"processSummary",rq:!0,col:!0,en:"ProcessSummary",ti:".ProcessSummaryType"}]},{ln:"DataInputType",ps:[{n:"data",rq:!0,en:"Data",ti:".Data"},{n:"reference",rq:!0,en:"Reference",ti:".ReferenceType"},{n:"input",rq:!0,col:!0,en:"Input",ti:".DataInputType"},{n:"id",rq:!0,an:{lp:"id"},t:"a"}]},{ln:"GetResult",tn:null,bti:".RequestBaseType",ps:[{n:"jobID",rq:!0,en:"JobID"}]},{ln:"SupportedCRS",tn:null,ps:[{n:"value",t:"v"},{n:"_default",ti:"Boolean",an:{lp:"default"},t:"a"}]},{ln:"LiteralDataDomainType",ps:[{n:"allowedValues",rq:!0,en:{lp:"AllowedValues",ns:"http://www.opengis.net/ows/2.0"},ti:"OWS_2_0.AllowedValues"},{n:"anyValue",rq:!0,en:{lp:"AnyValue",ns:"http://www.opengis.net/ows/2.0"},ti:"OWS_2_0.AnyValue"},{n:"valuesReference",rq:!0,en:{lp:"ValuesReference",ns:"http://www.opengis.net/ows/2.0"},ti:"OWS_2_0.ValuesReference"},{n:"dataType",en:{lp:"DataType",ns:"http://www.opengis.net/ows/2.0"},ti:"OWS_2_0.DomainMetadataType"},{n:"uom",en:{lp:"UOM",ns:"http://www.opengis.net/ows/2.0"},ti:"OWS_2_0.DomainMetadataType"},{n:"defaultValue",en:{lp:"DefaultValue",ns:"http://www.opengis.net/ows/2.0"},ti:"OWS_2_0.ValueType"}]},{ln:"DataDescriptionType",ps:[{n:"format",rq:!0,col:!0,en:"Format",ti:".Format"}]},{ln:"StatusInfo",tn:null,ps:[{n:"jobID",rq:!0,en:"JobID"},{n:"status",rq:!0,en:"Status"},{n:"expirationDate",en:"ExpirationDate",ti:"DateTime"},{n:"estimatedCompletion",en:"EstimatedCompletion",ti:"DateTime"},{n:"nextPoll",en:"NextPoll",ti:"DateTime"},{n:"percentCompleted",en:"PercentCompleted",ti:"Int"}]},{ln:"OutputDefinitionType",ps:[{n:"output",en:"Output",ti:".OutputDefinitionType"},{n:"id",rq:!0,an:{lp:"id"},t:"a"},{n:"transmission",an:{lp:"transmission"},t:"a"},{n:"mimeType",an:{lp:"mimeType"},t:"a"},{n:"encoding",an:{lp:"encoding"},t:"a"},{n:"schema",an:{lp:"schema"},t:"a"}]},{ln:"LiteralValue",tn:null,bti:"OWS_2_0.ValueType",ps:[{n:"dataType",an:{lp:"dataType"},t:"a"},{n:"uom",an:{lp:"uom"},t:"a"}]},{ln:"RequestBaseType",ps:[{n:"extension",mno:0,col:!0,en:"Extension",ti:"AnyType"},{n:"service",rq:!0,an:{lp:"service"},t:"a"},{n:"version",rq:!0,an:{lp:"version"},t:"a"}]},{ln:"LiteralDataType.LiteralDataDomain",tn:null,bti:".LiteralDataDomainType",ps:[{n:"_default",ti:"Boolean",an:{lp:"default"},t:"a"}]},{ln:"DescribeProcess",tn:null,bti:".RequestBaseType",ps:[{n:"identifier",rq:!0,col:!0,en:{lp:"Identifier",ns:"http://www.opengis.net/ows/2.0"},ti:"OWS_2_0.CodeType"},{n:"lang",an:{lp:"lang",ns:"http://www.w3.org/XML/1998/namespace"},t:"a"}]},{ln:"Result",tn:null,ps:[{n:"jobID",en:"JobID"},{n:"expirationDate",en:"ExpirationDate",ti:"DateTime"},{n:"output",rq:!0,col:!0,en:"Output",ti:".DataOutputType"}]},{ln:"GenericInputType",bti:".DescriptionType",ps:[{n:"input",mno:0,col:!0,en:"Input",ti:".GenericInputType"},{n:"minOccurs",ti:"NonNegativeInteger",an:{lp:"minOccurs"},t:"a"},{n:"maxOccurs",an:{lp:"maxOccurs"},t:"a"}]},{ln:"Data",tn:null,ps:[{n:"otherAttributes",t:"aa"},{n:"content",col:!0,t:"ae"},{n:"mimeType",an:{lp:"mimeType"},t:"a"},{n:"encoding",an:{lp:"encoding"},t:"a"},{n:"schema",an:{lp:"schema"},t:"a"}]},{ln:"Format",tn:null,ps:[{n:"mimeType",an:{lp:"mimeType"},t:"a"},{n:"encoding",an:{lp:"encoding"},t:"a"},{n:"schema",an:{lp:"schema"},t:"a"},{n:"maximumMegabytes",ti:"PositiveInteger",an:{lp:"maximumMegabytes"},t:"a"},{n:"_default",ti:"Boolean",an:{lp:"default"},t:"a"}]},{ln:"BoundingBoxData",tn:null,bti:".DataDescriptionType",ps:[{n:"supportedCRS",rq:!0,col:!0,en:"SupportedCRS",ti:".SupportedCRS"}]},{ln:"ProcessDescriptionType",bti:".DescriptionType",ps:[{n:"input",mno:0,col:!0,en:"Input",ti:".InputDescriptionType"},{n:"output",rq:!0,col:!0,en:"Output",ti:".OutputDescriptionType"},{n:"lang",an:{lp:"lang",ns:"http://www.w3.org/XML/1998/namespace"},t:"a"}]},{ln:"InputDescriptionType",bti:".DescriptionType",ps:[{n:"dataDescription",rq:!0,mx:!1,dom:!1,en:"DataDescription",ti:".DataDescriptionType",t:"er"},{n:"input",rq:!0,col:!0,en:"Input",ti:".InputDescriptionType"},{n:"minOccurs",ti:"NonNegativeInteger",an:{lp:"minOccurs"},t:"a"},{n:"maxOccurs",an:{lp:"maxOccurs"},t:"a"}]},{ln:"ProcessSummaryType",bti:".DescriptionType",ps:[{n:"jobControlOptions",rq:!0,ti:{t:"l"},an:{lp:"jobControlOptions"},t:"a"},{n:"outputTransmission",ti:{t:"l"},an:{lp:"outputTransmission"},t:"a"},{n:"processVersion",an:{lp:"processVersion"},t:"a"},{n:"processModel",an:{lp:"processModel"},t:"a"}]},{ln:"ReferenceType.BodyReference",tn:null,ps:[{n:"href",rq:!0,an:{lp:"href",ns:"http://www.w3.org/1999/xlink"},t:"a"}]},{ln:"ProcessOfferings",tn:null,ps:[{n:"processOffering",rq:!0,col:!0,en:"ProcessOffering",ti:".ProcessOffering"}]},{ln:"GenericOutputType",bti:".DescriptionType",ps:[{n:"output",mno:0,col:!0,en:"Output",ti:".GenericOutputType"}]},{ln:"ComplexDataType",bti:".DataDescriptionType",ps:[{n:"any",mno:0,col:!0,mx:!1,t:"ae"}]},{ln:"GenericProcessType",bti:".DescriptionType",ps:[{n:"input",mno:0,col:!0,en:"Input",ti:".GenericInputType"},{n:"output",rq:!0,col:!0,en:"Output",ti:".GenericOutputType"}]},{ln:"ReferenceType",ps:[{n:"body",rq:!0,en:"Body",ti:"AnyType"},{n:"bodyReference",rq:!0,en:"BodyReference",ti:".ReferenceType.BodyReference"},{n:"href",rq:!0,an:{lp:"href",ns:"http://www.w3.org/1999/xlink"},t:"a"},{n:"mimeType",an:{lp:"mimeType"},t:"a"},{n:"encoding",an:{lp:"encoding"},t:"a"},{n:"schema",an:{lp:"schema"},t:"a"}]},{ln:"GetStatus",tn:null,bti:".RequestBaseType",ps:[{n:"jobID",rq:!0,en:"JobID"}]},{ln:"ProcessOffering",tn:null,ps:[{n:"process",rq:!0,en:"Process",ti:".ProcessDescriptionType"},{n:"any",rq:!0,mx:!1,t:"ae"},{n:"jobControlOptions",rq:!0,ti:{t:"l"},an:{lp:"jobControlOptions"},t:"a"},{n:"outputTransmission",ti:{t:"l"},an:{lp:"outputTransmission"},t:"a"},{n:"processVersion",an:{lp:"processVersion"},t:"a"},{n:"processModel",an:{lp:"processModel"},t:"a"}]},{ln:"DescriptionType",bti:"OWS_2_0.BasicIdentificationType"},{ln:"ExecuteRequestType",bti:".RequestBaseType",ps:[{n:"identifier",rq:!0,en:{lp:"Identifier",ns:"http://www.opengis.net/ows/2.0"},ti:"OWS_2_0.CodeType"},{n:"input",mno:0,col:!0,en:"Input",ti:".DataInputType"},{n:"output",rq:!0,col:!0,en:"Output",ti:".OutputDefinitionType"},{n:"mode",rq:!0,an:{lp:"mode"},t:"a"},{n:"response",rq:!0,an:{lp:"response"},t:"a"}]},{ln:"WPSCapabilitiesType",bti:"OWS_2_0.CapabilitiesBaseType",ps:[{n:"contents",rq:!0,en:"Contents",ti:".Contents"},{n:"extension",en:"Extension",ti:".WPSCapabilitiesType.Extension"},{n:"service",rq:!0,ti:"AnySimpleType",an:{lp:"service"},t:"a"}]},{t:"enum",ln:"DataTransmissionModeType",vs:["value","reference"]}],eis:[{en:"BoundingBoxData",ti:".BoundingBoxData",sh:"DataDescription"},{en:"DataDescription",ti:".DataDescriptionType"},{en:"SupportedCRS",ti:".SupportedCRS"},{en:"ProcessOffering",ti:".ProcessOffering"},{en:"ExpirationDate",ti:"DateTime"},{en:"GetCapabilities",ti:".GetCapabilitiesType"},{en:"Process",ti:".ProcessDescriptionType"},{en:"LiteralValue",ti:".LiteralValue"},{en:"Result",ti:".Result"},{en:"LiteralData",ti:".LiteralDataType",sh:"DataDescription"},{en:"Contents",ti:".Contents"},{en:"DescribeProcess",ti:".DescribeProcess"},{en:"GenericProcess",ti:".GenericProcessType"},{en:"Execute",ti:".ExecuteRequestType"},{en:"GetStatus",ti:".GetStatus"},{en:"JobID"},{en:"Data",ti:".Data"},{en:"Capabilities",ti:".WPSCapabilitiesType"},{en:"Reference",ti:".ReferenceType"},{en:"ComplexData",ti:".ComplexDataType",sh:"DataDescription"},{en:"StatusInfo",ti:".StatusInfo"},{en:"Format",ti:".Format"},{en:"GetResult",ti:".GetResult"},{en:"Dismiss",ti:".Dismiss"},{en:"ProcessOfferings",ti:".ProcessOfferings"}]}}})?Ve.apply(wt,[]):Ve)&&(en.exports=$e)},324:en=>{"use strict";function wt(nt){if("string"!=typeof nt)throw new TypeError("Path must be a string. Received "+JSON.stringify(nt))}function Ve(nt,Me){for(var D,fe="",Ie=0,T=-1,S=0,L=0;L<=nt.length;++L){if(L<nt.length)D=nt.charCodeAt(L);else{if(47===D)break;D=47}if(47===D){if(T!==L-1&&1!==S)if(T!==L-1&&2===S){if(fe.length<2||2!==Ie||46!==fe.charCodeAt(fe.length-1)||46!==fe.charCodeAt(fe.length-2))if(fe.length>2){var z=fe.lastIndexOf("/");if(z!==fe.length-1){-1===z?(fe="",Ie=0):Ie=(fe=fe.slice(0,z)).length-1-fe.lastIndexOf("/"),T=L,S=0;continue}}else if(2===fe.length||1===fe.length){fe="",Ie=0,T=L,S=0;continue}Me&&(fe.length>0?fe+="/..":fe="..",Ie=2)}else fe.length>0?fe+="/"+nt.slice(T+1,L):fe=nt.slice(T+1,L),Ie=L-T-1;T=L,S=0}else 46===D&&-1!==S?++S:S=-1}return fe}var $e={resolve:function(){for(var Ie,Me="",fe=!1,T=arguments.length-1;T>=-1&&!fe;T--){var S;T>=0?S=arguments[T]:(void 0===Ie&&(Ie=process.cwd()),S=Ie),wt(S),0!==S.length&&(Me=S+"/"+Me,fe=47===S.charCodeAt(0))}return Me=Ve(Me,!fe),fe?Me.length>0?"/"+Me:"/":Me.length>0?Me:"."},normalize:function(Me){if(wt(Me),0===Me.length)return".";var fe=47===Me.charCodeAt(0),Ie=47===Me.charCodeAt(Me.length-1);return 0===(Me=Ve(Me,!fe)).length&&!fe&&(Me="."),Me.length>0&&Ie&&(Me+="/"),fe?"/"+Me:Me},isAbsolute:function(Me){return wt(Me),Me.length>0&&47===Me.charCodeAt(0)},join:function(){if(0===arguments.length)return".";for(var Me,fe=0;fe<arguments.length;++fe){var Ie=arguments[fe];wt(Ie),Ie.length>0&&(void 0===Me?Me=Ie:Me+="/"+Ie)}return void 0===Me?".":$e.normalize(Me)},relative:function(Me,fe){if(wt(Me),wt(fe),Me===fe||(Me=$e.resolve(Me))===(fe=$e.resolve(fe)))return"";for(var Ie=1;Ie<Me.length&&47===Me.charCodeAt(Ie);++Ie);for(var T=Me.length,S=T-Ie,D=1;D<fe.length&&47===fe.charCodeAt(D);++D);for(var z=fe.length-D,X=S<z?S:z,Y=-1,re=0;re<=X;++re){if(re===X){if(z>X){if(47===fe.charCodeAt(D+re))return fe.slice(D+re+1);if(0===re)return fe.slice(D+re)}else S>X&&(47===Me.charCodeAt(Ie+re)?Y=re:0===re&&(Y=0));break}var J=Me.charCodeAt(Ie+re);if(J!==fe.charCodeAt(D+re))break;47===J&&(Y=re)}var Se="";for(re=Ie+Y+1;re<=T;++re)(re===T||47===Me.charCodeAt(re))&&(Se+=0===Se.length?"..":"/..");return Se.length>0?Se+fe.slice(D+Y):(47===fe.charCodeAt(D+=Y)&&++D,fe.slice(D))},_makeLong:function(Me){return Me},dirname:function(Me){if(wt(Me),0===Me.length)return".";for(var fe=Me.charCodeAt(0),Ie=47===fe,T=-1,S=!0,D=Me.length-1;D>=1;--D)if(47===(fe=Me.charCodeAt(D))){if(!S){T=D;break}}else S=!1;return-1===T?Ie?"/":".":Ie&&1===T?"//":Me.slice(0,T)},basename:function(Me,fe){if(void 0!==fe&&"string"!=typeof fe)throw new TypeError('"ext" argument must be a string');wt(Me);var D,Ie=0,T=-1,S=!0;if(void 0!==fe&&fe.length>0&&fe.length<=Me.length){if(fe.length===Me.length&&fe===Me)return"";var L=fe.length-1,z=-1;for(D=Me.length-1;D>=0;--D){var X=Me.charCodeAt(D);if(47===X){if(!S){Ie=D+1;break}}else-1===z&&(S=!1,z=D+1),L>=0&&(X===fe.charCodeAt(L)?-1==--L&&(T=D):(L=-1,T=z))}return Ie===T?T=z:-1===T&&(T=Me.length),Me.slice(Ie,T)}for(D=Me.length-1;D>=0;--D)if(47===Me.charCodeAt(D)){if(!S){Ie=D+1;break}}else-1===T&&(S=!1,T=D+1);return-1===T?"":Me.slice(Ie,T)},extname:function(Me){wt(Me);for(var fe=-1,Ie=0,T=-1,S=!0,D=0,L=Me.length-1;L>=0;--L){var z=Me.charCodeAt(L);if(47!==z)-1===T&&(S=!1,T=L+1),46===z?-1===fe?fe=L:1!==D&&(D=1):-1!==fe&&(D=-1);else if(!S){Ie=L+1;break}}return-1===fe||-1===T||0===D||1===D&&fe===T-1&&fe===Ie+1?"":Me.slice(fe,T)},format:function(Me){if(null===Me||"object"!=typeof Me)throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof Me);return function(nt,Me){var fe=Me.dir||Me.root,Ie=Me.base||(Me.name||"")+(Me.ext||"");return fe?fe===Me.root?fe+Ie:fe+"/"+Ie:Ie}(0,Me)},parse:function(Me){wt(Me);var fe={root:"",dir:"",base:"",ext:"",name:""};if(0===Me.length)return fe;var S,Ie=Me.charCodeAt(0),T=47===Ie;T?(fe.root="/",S=1):S=0;for(var D=-1,L=0,z=-1,X=!0,Y=Me.length-1,re=0;Y>=S;--Y)if(47!==(Ie=Me.charCodeAt(Y)))-1===z&&(X=!1,z=Y+1),46===Ie?-1===D?D=Y:1!==re&&(re=1):-1!==D&&(re=-1);else if(!X){L=Y+1;break}return-1===D||-1===z||0===re||1===re&&D===z-1&&D===L+1?-1!==z&&(fe.base=fe.name=Me.slice(0===L&&T?1:L,z)):(0===L&&T?(fe.name=Me.slice(1,D),fe.base=Me.slice(1,z)):(fe.name=Me.slice(L,D),fe.base=Me.slice(L,z)),fe.ext=Me.slice(D,z)),L>0?fe.dir=Me.slice(0,L-1):T&&(fe.dir="/"),fe},sep:"/",delimiter:":",win32:null,posix:null};$e.posix=$e,en.exports=$e},697:(en,wt,Ve)=>{"use strict";en.exports=$e;var _t=Ve(658);function $e(ne){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(ne)?ne:new Uint8Array(ne||0),this.pos=0,this.type=0,this.length=this.buf.length}$e.Varint=0,$e.Fixed64=1,$e.Bytes=2,$e.Fixed32=5;var nt=4294967296,Me=1/nt,Ie="undefined"==typeof TextDecoder?null:new TextDecoder("utf8");function S(ne){return ne.type===$e.Bytes?ne.readVarint()+ne.pos:ne.pos+1}function Y(ne,we,pe){var fn=we<=16383?1:we<=2097151?2:we<=268435455?3:Math.floor(Math.log(we)/(7*Math.LN2));pe.realloc(fn);for(var $t=pe.pos-1;$t>=ne;$t--)pe.buf[$t+fn]=pe.buf[$t]}function re(ne,we){for(var pe=0;pe<ne.length;pe++)we.writeVarint(ne[pe])}function J(ne,we){for(var pe=0;pe<ne.length;pe++)we.writeSVarint(ne[pe])}function ie(ne,we){for(var pe=0;pe<ne.length;pe++)we.writeFloat(ne[pe])}function Se(ne,we){for(var pe=0;pe<ne.length;pe++)we.writeDouble(ne[pe])}function je(ne,we){for(var pe=0;pe<ne.length;pe++)we.writeBoolean(ne[pe])}function Je(ne,we){for(var pe=0;pe<ne.length;pe++)we.writeFixed32(ne[pe])}function Tt(ne,we){for(var pe=0;pe<ne.length;pe++)we.writeSFixed32(ne[pe])}function mt(ne,we){for(var pe=0;pe<ne.length;pe++)we.writeFixed64(ne[pe])}function yt(ne,we){for(var pe=0;pe<ne.length;pe++)we.writeSFixed64(ne[pe])}function at(ne,we){return(ne[we]|ne[we+1]<<8|ne[we+2]<<16)+16777216*ne[we+3]}function ke(ne,we,pe){ne[pe]=we,ne[pe+1]=we>>>8,ne[pe+2]=we>>>16,ne[pe+3]=we>>>24}function zt(ne,we){return(ne[we]|ne[we+1]<<8|ne[we+2]<<16)+(ne[we+3]<<24)}$e.prototype={destroy:function(){this.buf=null},readFields:function(ne,we,pe){for(pe=pe||this.length;this.pos<pe;){var fn=this.readVarint(),$t=fn>>3,Cn=this.pos;this.type=7&fn,ne($t,we,this),this.pos===Cn&&this.skip(fn)}return we},readMessage:function(ne,we){return this.readFields(ne,we,this.readVarint()+this.pos)},readFixed32:function(){var ne=at(this.buf,this.pos);return this.pos+=4,ne},readSFixed32:function(){var ne=zt(this.buf,this.pos);return this.pos+=4,ne},readFixed64:function(){var ne=at(this.buf,this.pos)+at(this.buf,this.pos+4)*nt;return this.pos+=8,ne},readSFixed64:function(){var ne=at(this.buf,this.pos)+zt(this.buf,this.pos+4)*nt;return this.pos+=8,ne},readFloat:function(){var ne=_t.read(this.buf,this.pos,!0,23,4);return this.pos+=4,ne},readDouble:function(){var ne=_t.read(this.buf,this.pos,!0,52,8);return this.pos+=8,ne},readVarint:function(ne){var pe,fn,we=this.buf;return pe=127&(fn=we[this.pos++]),fn<128||(pe|=(127&(fn=we[this.pos++]))<<7,fn<128)||(pe|=(127&(fn=we[this.pos++]))<<14,fn<128)||(pe|=(127&(fn=we[this.pos++]))<<21,fn<128)?pe:function(ne,we,pe){var $t,Cn,fn=pe.buf;if($t=(112&(Cn=fn[pe.pos++]))>>4,Cn<128||($t|=(127&(Cn=fn[pe.pos++]))<<3,Cn<128)||($t|=(127&(Cn=fn[pe.pos++]))<<10,Cn<128)||($t|=(127&(Cn=fn[pe.pos++]))<<17,Cn<128)||($t|=(127&(Cn=fn[pe.pos++]))<<24,Cn<128)||($t|=(1&(Cn=fn[pe.pos++]))<<31,Cn<128))return function(ne,we,pe){return pe?4294967296*we+(ne>>>0):4294967296*(we>>>0)+(ne>>>0)}(ne,$t,we);throw new Error("Expected varint not more than 10 bytes")}(pe|=(15&(fn=we[this.pos]))<<28,ne,this)},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var ne=this.readVarint();return ne%2==1?(ne+1)/-2:ne/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var ne=this.readVarint()+this.pos,we=this.pos;return this.pos=ne,ne-we>=12&&Ie?function(ne,we,pe){return Ie.decode(ne.subarray(we,pe))}(this.buf,we,ne):function(ne,we,pe){for(var fn="",$t=we;$t<pe;){var Qt,zn,Br,Cn=ne[$t],ar=null,Ht=Cn>239?4:Cn>223?3:Cn>191?2:1;if($t+Ht>pe)break;1===Ht?Cn<128&&(ar=Cn):2===Ht?128==(192&(Qt=ne[$t+1]))&&(ar=(31&Cn)<<6|63&Qt)<=127&&(ar=null):3===Ht?(zn=ne[$t+2],128==(192&(Qt=ne[$t+1]))&&128==(192&zn)&&((ar=(15&Cn)<<12|(63&Qt)<<6|63&zn)<=2047||ar>=55296&&ar<=57343)&&(ar=null)):4===Ht&&(zn=ne[$t+2],Br=ne[$t+3],128==(192&(Qt=ne[$t+1]))&&128==(192&zn)&&128==(192&Br)&&((ar=(15&Cn)<<18|(63&Qt)<<12|(63&zn)<<6|63&Br)<=65535||ar>=1114112)&&(ar=null)),null===ar?(ar=65533,Ht=1):ar>65535&&(ar-=65536,fn+=String.fromCharCode(ar>>>10&1023|55296),ar=56320|1023&ar),fn+=String.fromCharCode(ar),$t+=Ht}return fn}(this.buf,we,ne)},readBytes:function(){var ne=this.readVarint()+this.pos,we=this.buf.subarray(this.pos,ne);return this.pos=ne,we},readPackedVarint:function(ne,we){if(this.type!==$e.Bytes)return ne.push(this.readVarint(we));var pe=S(this);for(ne=ne||[];this.pos<pe;)ne.push(this.readVarint(we));return ne},readPackedSVarint:function(ne){if(this.type!==$e.Bytes)return ne.push(this.readSVarint());var we=S(this);for(ne=ne||[];this.pos<we;)ne.push(this.readSVarint());return ne},readPackedBoolean:function(ne){if(this.type!==$e.Bytes)return ne.push(this.readBoolean());var we=S(this);for(ne=ne||[];this.pos<we;)ne.push(this.readBoolean());return ne},readPackedFloat:function(ne){if(this.type!==$e.Bytes)return ne.push(this.readFloat());var we=S(this);for(ne=ne||[];this.pos<we;)ne.push(this.readFloat());return ne},readPackedDouble:function(ne){if(this.type!==$e.Bytes)return ne.push(this.readDouble());var we=S(this);for(ne=ne||[];this.pos<we;)ne.push(this.readDouble());return ne},readPackedFixed32:function(ne){if(this.type!==$e.Bytes)return ne.push(this.readFixed32());var we=S(this);for(ne=ne||[];this.pos<we;)ne.push(this.readFixed32());return ne},readPackedSFixed32:function(ne){if(this.type!==$e.Bytes)return ne.push(this.readSFixed32());var we=S(this);for(ne=ne||[];this.pos<we;)ne.push(this.readSFixed32());return ne},readPackedFixed64:function(ne){if(this.type!==$e.Bytes)return ne.push(this.readFixed64());var we=S(this);for(ne=ne||[];this.pos<we;)ne.push(this.readFixed64());return ne},readPackedSFixed64:function(ne){if(this.type!==$e.Bytes)return ne.push(this.readSFixed64());var we=S(this);for(ne=ne||[];this.pos<we;)ne.push(this.readSFixed64());return ne},skip:function(ne){var we=7&ne;if(we===$e.Varint)for(;this.buf[this.pos++]>127;);else if(we===$e.Bytes)this.pos=this.readVarint()+this.pos;else if(we===$e.Fixed32)this.pos+=4;else{if(we!==$e.Fixed64)throw new Error("Unimplemented type: "+we);this.pos+=8}},writeTag:function(ne,we){this.writeVarint(ne<<3|we)},realloc:function(ne){for(var we=this.length||16;we<this.pos+ne;)we*=2;if(we!==this.length){var pe=new Uint8Array(we);pe.set(this.buf),this.buf=pe,this.length=we}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(ne){this.realloc(4),ke(this.buf,ne,this.pos),this.pos+=4},writeSFixed32:function(ne){this.realloc(4),ke(this.buf,ne,this.pos),this.pos+=4},writeFixed64:function(ne){this.realloc(8),ke(this.buf,-1&ne,this.pos),ke(this.buf,Math.floor(ne*Me),this.pos+4),this.pos+=8},writeSFixed64:function(ne){this.realloc(8),ke(this.buf,-1&ne,this.pos),ke(this.buf,Math.floor(ne*Me),this.pos+4),this.pos+=8},writeVarint:function(ne){(ne=+ne||0)>268435455||ne<0?function(ne,we){var pe,fn;if(ne>=0?(pe=ne%4294967296|0,fn=ne/4294967296|0):(fn=~(-ne/4294967296),4294967295^(pe=~(-ne%4294967296))?pe=pe+1|0:(pe=0,fn=fn+1|0)),ne>=0x10000000000000000||ne<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");we.realloc(10),function(ne,we,pe){pe.buf[pe.pos++]=127&ne|128,ne>>>=7,pe.buf[pe.pos++]=127&ne|128,ne>>>=7,pe.buf[pe.pos++]=127&ne|128,ne>>>=7,pe.buf[pe.pos++]=127&ne|128,pe.buf[pe.pos]=127&(ne>>>=7)}(pe,0,we),function(ne,we){var pe=(7&ne)<<4;we.buf[we.pos++]|=pe|((ne>>>=3)?128:0),ne&&(we.buf[we.pos++]=127&ne|((ne>>>=7)?128:0),ne&&(we.buf[we.pos++]=127&ne|((ne>>>=7)?128:0),ne&&(we.buf[we.pos++]=127&ne|((ne>>>=7)?128:0),ne&&(we.buf[we.pos++]=127&ne|((ne>>>=7)?128:0),ne&&(we.buf[we.pos++]=127&ne)))))}(fn,we)}(ne,this):(this.realloc(4),this.buf[this.pos++]=127&ne|(ne>127?128:0),!(ne<=127)&&(this.buf[this.pos++]=127&(ne>>>=7)|(ne>127?128:0),!(ne<=127)&&(this.buf[this.pos++]=127&(ne>>>=7)|(ne>127?128:0),!(ne<=127)&&(this.buf[this.pos++]=ne>>>7&127))))},writeSVarint:function(ne){this.writeVarint(ne<0?2*-ne-1:2*ne)},writeBoolean:function(ne){this.writeVarint(Boolean(ne))},writeString:function(ne){ne=String(ne),this.realloc(4*ne.length),this.pos++;var we=this.pos;this.pos=function(ne,we,pe){for(var $t,Cn,fn=0;fn<we.length;fn++){if(($t=we.charCodeAt(fn))>55295&&$t<57344){if(!Cn){$t>56319||fn+1===we.length?(ne[pe++]=239,ne[pe++]=191,ne[pe++]=189):Cn=$t;continue}if($t<56320){ne[pe++]=239,ne[pe++]=191,ne[pe++]=189,Cn=$t;continue}$t=Cn-55296<<10|$t-56320|65536,Cn=null}else Cn&&(ne[pe++]=239,ne[pe++]=191,ne[pe++]=189,Cn=null);$t<128?ne[pe++]=$t:($t<2048?ne[pe++]=$t>>6|192:($t<65536?ne[pe++]=$t>>12|224:(ne[pe++]=$t>>18|240,ne[pe++]=$t>>12&63|128),ne[pe++]=$t>>6&63|128),ne[pe++]=63&$t|128)}return pe}(this.buf,ne,this.pos);var pe=this.pos-we;pe>=128&&Y(we,pe,this),this.pos=we-1,this.writeVarint(pe),this.pos+=pe},writeFloat:function(ne){this.realloc(4),_t.write(this.buf,ne,this.pos,!0,23,4),this.pos+=4},writeDouble:function(ne){this.realloc(8),_t.write(this.buf,ne,this.pos,!0,52,8),this.pos+=8},writeBytes:function(ne){var we=ne.length;this.writeVarint(we),this.realloc(we);for(var pe=0;pe<we;pe++)this.buf[this.pos++]=ne[pe]},writeRawMessage:function(ne,we){this.pos++;var pe=this.pos;ne(we,this);var fn=this.pos-pe;fn>=128&&Y(pe,fn,this),this.pos=pe-1,this.writeVarint(fn),this.pos+=fn},writeMessage:function(ne,we,pe){this.writeTag(ne,$e.Bytes),this.writeRawMessage(we,pe)},writePackedVarint:function(ne,we){we.length&&this.writeMessage(ne,re,we)},writePackedSVarint:function(ne,we){we.length&&this.writeMessage(ne,J,we)},writePackedBoolean:function(ne,we){we.length&&this.writeMessage(ne,je,we)},writePackedFloat:function(ne,we){we.length&&this.writeMessage(ne,ie,we)},writePackedDouble:function(ne,we){we.length&&this.writeMessage(ne,Se,we)},writePackedFixed32:function(ne,we){we.length&&this.writeMessage(ne,Je,we)},writePackedSFixed32:function(ne,we){we.length&&this.writeMessage(ne,Tt,we)},writePackedFixed64:function(ne,we){we.length&&this.writeMessage(ne,mt,we)},writePackedSFixed64:function(ne,we){we.length&&this.writeMessage(ne,yt,we)},writeBytesField:function(ne,we){this.writeTag(ne,$e.Bytes),this.writeBytes(we)},writeFixed32Field:function(ne,we){this.writeTag(ne,$e.Fixed32),this.writeFixed32(we)},writeSFixed32Field:function(ne,we){this.writeTag(ne,$e.Fixed32),this.writeSFixed32(we)},writeFixed64Field:function(ne,we){this.writeTag(ne,$e.Fixed64),this.writeFixed64(we)},writeSFixed64Field:function(ne,we){this.writeTag(ne,$e.Fixed64),this.writeSFixed64(we)},writeVarintField:function(ne,we){this.writeTag(ne,$e.Varint),this.writeVarint(we)},writeSVarintField:function(ne,we){this.writeTag(ne,$e.Varint),this.writeSVarint(we)},writeStringField:function(ne,we){this.writeTag(ne,$e.Bytes),this.writeString(we)},writeFloatField:function(ne,we){this.writeTag(ne,$e.Fixed32),this.writeFloat(we)},writeDoubleField:function(ne,we){this.writeTag(ne,$e.Fixed64),this.writeDouble(we)},writeBooleanField:function(ne,we){this.writeVarintField(ne,Boolean(we))}}},216:en=>{"use strict";function wt(Ve,_t){return Object.prototype.hasOwnProperty.call(Ve,_t)}en.exports=function(Ve,_t,$e,nt){$e=$e||"=";var Me={};if("string"!=typeof Ve||0===Ve.length)return Me;var fe=/\+/g;Ve=Ve.split(_t=_t||"&");var Ie=1e3;nt&&"number"==typeof nt.maxKeys&&(Ie=nt.maxKeys);var T=Ve.length;Ie>0&&T>Ie&&(T=Ie);for(var S=0;S<T;++S){var z,X,Y,re,D=Ve[S].replace(fe,"%20"),L=D.indexOf($e);L>=0?(z=D.substr(0,L),X=D.substr(L+1)):(z=D,X=""),Y=decodeURIComponent(z),re=decodeURIComponent(X),wt(Me,Y)?Array.isArray(Me[Y])?Me[Y].push(re):Me[Y]=[Me[Y],re]:Me[Y]=re}return Me}},173:en=>{"use strict";var wt=function(Ve){switch(typeof Ve){case"string":return Ve;case"boolean":return Ve?"true":"false";case"number":return isFinite(Ve)?Ve:"";default:return""}};en.exports=function(Ve,_t,$e,nt){return _t=_t||"&",$e=$e||"=",null===Ve&&(Ve=void 0),"object"==typeof Ve?Object.keys(Ve).map(function(Me){var fe=encodeURIComponent(wt(Me))+$e;return Array.isArray(Ve[Me])?Ve[Me].map(function(Ie){return fe+encodeURIComponent(wt(Ie))}).join(_t):fe+encodeURIComponent(wt(Ve[Me]))}).join(_t):nt?encodeURIComponent(wt(nt))+$e+encodeURIComponent(wt(Ve)):""}},284:(en,wt,Ve)=>{"use strict";wt.decode=wt.parse=Ve(216),wt.encode=wt.stringify=Ve(173)},36:function(en){en.exports=function(){"use strict";function wt(J,ie,Se,je,Je){!function Tt(mt,yt,at,ke,zt){for(;ke>at;){if(ke-at>600){var Ge=ke-at+1,Jn=yt-at+1,tt=Math.log(Ge),ne=.5*Math.exp(2*tt/3),we=.5*Math.sqrt(tt*ne*(Ge-ne)/Ge)*(Jn-Ge/2<0?-1:1);Tt(mt,yt,Math.max(at,Math.floor(yt-Jn*ne/Ge+we)),Math.min(ke,Math.floor(yt+(Ge-Jn)*ne/Ge+we)),zt)}var $t=mt[yt],Cn=at,ar=ke;for(Ve(mt,at,yt),zt(mt[ke],$t)>0&&Ve(mt,at,ke);Cn<ar;){for(Ve(mt,Cn,ar),Cn++,ar--;zt(mt[Cn],$t)<0;)Cn++;for(;zt(mt[ar],$t)>0;)ar--}0===zt(mt[at],$t)?Ve(mt,at,ar):Ve(mt,++ar,ke),ar<=yt&&(at=ar+1),yt<=ar&&(ke=ar-1)}}(J,ie,Se||0,je||J.length-1,Je||_t)}function Ve(J,ie,Se){var je=J[ie];J[ie]=J[Se],J[Se]=je}function _t(J,ie){return J<ie?-1:J>ie?1:0}var $e=function(J){void 0===J&&(J=9),this._maxEntries=Math.max(4,J),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function nt(J,ie,Se){if(!Se)return ie.indexOf(J);for(var je=0;je<ie.length;je++)if(Se(J,ie[je]))return je;return-1}function Me(J,ie){fe(J,0,J.children.length,ie,J)}function fe(J,ie,Se,je,Je){Je||(Je=Y(null)),Je.minX=1/0,Je.minY=1/0,Je.maxX=-1/0,Je.maxY=-1/0;for(var Tt=ie;Tt<Se;Tt++){var mt=J.children[Tt];Ie(Je,J.leaf?je(mt):mt)}return Je}function Ie(J,ie){return J.minX=Math.min(J.minX,ie.minX),J.minY=Math.min(J.minY,ie.minY),J.maxX=Math.max(J.maxX,ie.maxX),J.maxY=Math.max(J.maxY,ie.maxY),J}function T(J,ie){return J.minX-ie.minX}function S(J,ie){return J.minY-ie.minY}function D(J){return(J.maxX-J.minX)*(J.maxY-J.minY)}function L(J){return J.maxX-J.minX+(J.maxY-J.minY)}function z(J,ie){return J.minX<=ie.minX&&J.minY<=ie.minY&&ie.maxX<=J.maxX&&ie.maxY<=J.maxY}function X(J,ie){return ie.minX<=J.maxX&&ie.minY<=J.maxY&&ie.maxX>=J.minX&&ie.maxY>=J.minY}function Y(J){return{children:J,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function re(J,ie,Se,je,Je){for(var Tt=[ie,Se];Tt.length;)if(!((Se=Tt.pop())-(ie=Tt.pop())<=je)){var mt=ie+Math.ceil((Se-ie)/je/2)*je;wt(J,mt,ie,Se,Je),Tt.push(ie,mt,mt,Se)}}return $e.prototype.all=function(){return this._all(this.data,[])},$e.prototype.search=function(J){var ie=this.data,Se=[];if(!X(J,ie))return Se;for(var je=this.toBBox,Je=[];ie;){for(var Tt=0;Tt<ie.children.length;Tt++){var mt=ie.children[Tt],yt=ie.leaf?je(mt):mt;X(J,yt)&&(ie.leaf?Se.push(mt):z(J,yt)?this._all(mt,Se):Je.push(mt))}ie=Je.pop()}return Se},$e.prototype.collides=function(J){var ie=this.data;if(!X(J,ie))return!1;for(var Se=[];ie;){for(var je=0;je<ie.children.length;je++){var Je=ie.children[je],Tt=ie.leaf?this.toBBox(Je):Je;if(X(J,Tt)){if(ie.leaf||z(J,Tt))return!0;Se.push(Je)}}ie=Se.pop()}return!1},$e.prototype.load=function(J){if(!J||!J.length)return this;if(J.length<this._minEntries){for(var ie=0;ie<J.length;ie++)this.insert(J[ie]);return this}var Se=this._build(J.slice(),0,J.length-1,0);if(this.data.children.length)if(this.data.height===Se.height)this._splitRoot(this.data,Se);else{if(this.data.height<Se.height){var je=this.data;this.data=Se,Se=je}this._insert(Se,this.data.height-Se.height-1,!0)}else this.data=Se;return this},$e.prototype.insert=function(J){return J&&this._insert(J,this.data.height-1),this},$e.prototype.clear=function(){return this.data=Y([]),this},$e.prototype.remove=function(J,ie){if(!J)return this;for(var Se,je,Je,Tt=this.data,mt=this.toBBox(J),yt=[],at=[];Tt||yt.length;){if(Tt||(Tt=yt.pop(),je=yt[yt.length-1],Se=at.pop(),Je=!0),Tt.leaf){var ke=nt(J,Tt.children,ie);if(-1!==ke)return Tt.children.splice(ke,1),yt.push(Tt),this._condense(yt),this}Je||Tt.leaf||!z(Tt,mt)?je?(Se++,Tt=je.children[Se],Je=!1):Tt=null:(yt.push(Tt),at.push(Se),Se=0,je=Tt,Tt=Tt.children[0])}return this},$e.prototype.toBBox=function(J){return J},$e.prototype.compareMinX=function(J,ie){return J.minX-ie.minX},$e.prototype.compareMinY=function(J,ie){return J.minY-ie.minY},$e.prototype.toJSON=function(){return this.data},$e.prototype.fromJSON=function(J){return this.data=J,this},$e.prototype._all=function(J,ie){for(var Se=[];J;)J.leaf?ie.push.apply(ie,J.children):Se.push.apply(Se,J.children),J=Se.pop();return ie},$e.prototype._build=function(J,ie,Se,je){var Je,Tt=Se-ie+1,mt=this._maxEntries;if(Tt<=mt)return Me(Je=Y(J.slice(ie,Se+1)),this.toBBox),Je;je||(je=Math.ceil(Math.log(Tt)/Math.log(mt)),mt=Math.ceil(Tt/Math.pow(mt,je-1))),(Je=Y([])).leaf=!1,Je.height=je;var yt=Math.ceil(Tt/mt),at=yt*Math.ceil(Math.sqrt(mt));re(J,ie,Se,at,this.compareMinX);for(var ke=ie;ke<=Se;ke+=at){var zt=Math.min(ke+at-1,Se);re(J,ke,zt,yt,this.compareMinY);for(var Ge=ke;Ge<=zt;Ge+=yt){var Jn=Math.min(Ge+yt-1,zt);Je.children.push(this._build(J,Ge,Jn,je-1))}}return Me(Je,this.toBBox),Je},$e.prototype._chooseSubtree=function(J,ie,Se,je){for(;je.push(ie),!ie.leaf&&je.length-1!==Se;){for(var Je=1/0,Tt=1/0,mt=void 0,yt=0;yt<ie.children.length;yt++){var at=ie.children[yt],ke=D(at),zt=(Ge=J,Jn=at,(Math.max(Jn.maxX,Ge.maxX)-Math.min(Jn.minX,Ge.minX))*(Math.max(Jn.maxY,Ge.maxY)-Math.min(Jn.minY,Ge.minY))-ke);zt<Tt?(Tt=zt,Je=ke<Je?ke:Je,mt=at):zt===Tt&&ke<Je&&(Je=ke,mt=at)}ie=mt||ie.children[0]}var Ge,Jn;return ie},$e.prototype._insert=function(J,ie,Se){var je=Se?J:this.toBBox(J),Je=[],Tt=this._chooseSubtree(je,this.data,ie,Je);for(Tt.children.push(J),Ie(Tt,je);ie>=0&&Je[ie].children.length>this._maxEntries;)this._split(Je,ie),ie--;this._adjustParentBBoxes(je,Je,ie)},$e.prototype._split=function(J,ie){var Se=J[ie],je=Se.children.length,Je=this._minEntries;this._chooseSplitAxis(Se,Je,je);var Tt=this._chooseSplitIndex(Se,Je,je),mt=Y(Se.children.splice(Tt,Se.children.length-Tt));mt.height=Se.height,mt.leaf=Se.leaf,Me(Se,this.toBBox),Me(mt,this.toBBox),ie?J[ie-1].children.push(mt):this._splitRoot(Se,mt)},$e.prototype._splitRoot=function(J,ie){this.data=Y([J,ie]),this.data.height=J.height+1,this.data.leaf=!1,Me(this.data,this.toBBox)},$e.prototype._chooseSplitIndex=function(J,ie,Se){for(var je,Je,Tt,mt,yt,at,ke,zt=1/0,Ge=1/0,Jn=ie;Jn<=Se-ie;Jn++){var tt=fe(J,0,Jn,this.toBBox),ne=fe(J,Jn,Se,this.toBBox),we=(Je=tt,Tt=ne,void 0,void 0,void 0,void 0,mt=Math.max(Je.minX,Tt.minX),yt=Math.max(Je.minY,Tt.minY),at=Math.min(Je.maxX,Tt.maxX),ke=Math.min(Je.maxY,Tt.maxY),Math.max(0,at-mt)*Math.max(0,ke-yt)),pe=D(tt)+D(ne);we<zt?(zt=we,je=Jn,Ge=pe<Ge?pe:Ge):we===zt&&pe<Ge&&(Ge=pe,je=Jn)}return je||Se-ie},$e.prototype._chooseSplitAxis=function(J,ie,Se){var je=J.leaf?this.compareMinX:T,Je=J.leaf?this.compareMinY:S;this._allDistMargin(J,ie,Se,je)<this._allDistMargin(J,ie,Se,Je)&&J.children.sort(je)},$e.prototype._allDistMargin=function(J,ie,Se,je){J.children.sort(je);for(var Je=this.toBBox,Tt=fe(J,0,ie,Je),mt=fe(J,Se-ie,Se,Je),yt=L(Tt)+L(mt),at=ie;at<Se-ie;at++){var ke=J.children[at];Ie(Tt,J.leaf?Je(ke):ke),yt+=L(Tt)}for(var zt=Se-ie-1;zt>=ie;zt--){var Ge=J.children[zt];Ie(mt,J.leaf?Je(Ge):Ge),yt+=L(mt)}return yt},$e.prototype._adjustParentBBoxes=function(J,ie,Se){for(var je=Se;je>=0;je--)Ie(ie[je],J)},$e.prototype._condense=function(J){for(var ie=J.length-1,Se=void 0;ie>=0;ie--)0===J[ie].children.length?ie>0?(Se=J[ie-1].children).splice(Se.indexOf(J[ie]),1):this.clear():Me(J[ie],this.toBBox)},$e}()},876:function(en,wt,Ve){var _t;en=Ve.nmd(en),function($e){"object"==typeof global&&global;var Ie,T=2147483647,S=36,ie=/^xn--/,Se=/[^\x20-\x7E]/,je=/[\x2E\u3002\uFF0E\uFF61]/g,Je={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},mt=Math.floor,yt=String.fromCharCode;function ke(Ht){throw RangeError(Je[Ht])}function zt(Ht,Qt){for(var zn=Ht.length,Br=[];zn--;)Br[zn]=Qt(Ht[zn]);return Br}function Ge(Ht,Qt){var zn=Ht.split("@"),Br="";return zn.length>1&&(Br=zn[0]+"@",Ht=zn[1]),Br+zt((Ht=Ht.replace(je,".")).split("."),Qt).join(".")}function Jn(Ht){for(var Dr,Ni,Qt=[],zn=0,Br=Ht.length;zn<Br;)(Dr=Ht.charCodeAt(zn++))>=55296&&Dr<=56319&&zn<Br?56320==(64512&(Ni=Ht.charCodeAt(zn++)))?Qt.push(((1023&Dr)<<10)+(1023&Ni)+65536):(Qt.push(Dr),zn--):Qt.push(Dr);return Qt}function tt(Ht){return zt(Ht,function(Qt){var zn="";return Qt>65535&&(zn+=yt((Qt-=65536)>>>10&1023|55296),Qt=56320|1023&Qt),zn+yt(Qt)}).join("")}function ne(Ht){return Ht-48<10?Ht-22:Ht-65<26?Ht-65:Ht-97<26?Ht-97:S}function we(Ht,Qt){return Ht+22+75*(Ht<26)-((0!=Qt)<<5)}function pe(Ht,Qt,zn){var Br=0;for(Ht=zn?mt(Ht/700):Ht>>1,Ht+=mt(Ht/Qt);Ht>455;Br+=S)Ht=mt(Ht/35);return mt(Br+36*Ht/(Ht+38))}function fn(Ht){var Br,Or,Fi,ki,Di,Yi,Vn,ai,xs,hi,Qt=[],zn=Ht.length,Dr=0,Ni=128,bn=72;for((Or=Ht.lastIndexOf("-"))<0&&(Or=0),Fi=0;Fi<Or;++Fi)Ht.charCodeAt(Fi)>=128&&ke("not-basic"),Qt.push(Ht.charCodeAt(Fi));for(ki=Or>0?Or+1:0;ki<zn;){for(Di=Dr,Yi=1,Vn=S;ki>=zn&&ke("invalid-input"),((ai=ne(Ht.charCodeAt(ki++)))>=S||ai>mt((T-Dr)/Yi))&&ke("overflow"),Dr+=ai*Yi,!(ai<(xs=Vn<=bn?1:Vn>=bn+26?26:Vn-bn));Vn+=S)Yi>mt(T/(hi=S-xs))&&ke("overflow"),Yi*=hi;bn=pe(Dr-Di,Br=Qt.length+1,0==Di),mt(Dr/Br)>T-Ni&&ke("overflow"),Ni+=mt(Dr/Br),Dr%=Br,Qt.splice(Dr++,0,Ni)}return tt(Qt)}function $t(Ht){var Qt,zn,Br,Dr,Ni,bn,Or,Fi,ki,Di,Yi,ai,xs,hi,tl,Vn=[];for(ai=(Ht=Jn(Ht)).length,Qt=128,zn=0,Ni=72,bn=0;bn<ai;++bn)(Yi=Ht[bn])<128&&Vn.push(yt(Yi));for(Br=Dr=Vn.length,Dr&&Vn.push("-");Br<ai;){for(Or=T,bn=0;bn<ai;++bn)(Yi=Ht[bn])>=Qt&&Yi<Or&&(Or=Yi);for(Or-Qt>mt((T-zn)/(xs=Br+1))&&ke("overflow"),zn+=(Or-Qt)*xs,Qt=Or,bn=0;bn<ai;++bn)if((Yi=Ht[bn])<Qt&&++zn>T&&ke("overflow"),Yi==Qt){for(Fi=zn,ki=S;!(Fi<(Di=ki<=Ni?1:ki>=Ni+26?26:ki-Ni));ki+=S)Vn.push(yt(we(Di+(tl=Fi-Di)%(hi=S-Di),0))),Fi=mt(tl/hi);Vn.push(yt(we(Fi,0))),Ni=pe(zn,xs,Br==Dr),zn=0,++Br}++zn,++Qt}return Vn.join("")}Ie={version:"1.3.2",ucs2:{decode:Jn,encode:tt},decode:fn,encode:$t,toASCII:function(Ht){return Ge(Ht,function(Qt){return Se.test(Qt)?"xn--"+$t(Qt):Qt})},toUnicode:function(Ht){return Ge(Ht,function(Qt){return ie.test(Qt)?fn(Qt.slice(4).toLowerCase()):Qt})}},void 0!==(_t=function(){return Ie}.call(wt,Ve,wt,en))&&(en.exports=_t)}()},505:(en,wt,Ve)=>{"use strict";var $e=Ve(876),nt=Ve(745);function Me(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}wt.Qc=Tt;var fe=/^([a-z0-9.+-]+:)/i,Ie=/:[0-9]*$/,T=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,D=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),L=["'"].concat(D),z=["%","/","?",";","#"].concat(L),X=["/","?","#"],re=/^[+a-z0-9A-Z_-]{0,63}$/,J=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,ie={javascript:!0,"javascript:":!0},Se={javascript:!0,"javascript:":!0},je={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},Je=Ve(284);function Tt(ke,zt,Ge){if(ke&&nt.isObject(ke)&&ke instanceof Me)return ke;var Jn=new Me;return Jn.parse(ke,zt,Ge),Jn}Me.prototype.parse=function(ke,zt,Ge){if(!nt.isString(ke))throw new TypeError("Parameter 'url' must be a string, not "+typeof ke);var Jn=ke.indexOf("?"),tt=-1!==Jn&&Jn<ke.indexOf("#")?"?":"#",ne=ke.split(tt);ne[0]=ne[0].replace(/\\/g,"/");var pe=ke=ne.join(tt);if(pe=pe.trim(),!Ge&&1===ke.split("#").length){var fn=T.exec(pe);if(fn)return this.path=pe,this.href=pe,this.pathname=fn[1],fn[2]?(this.search=fn[2],this.query=zt?Je.parse(this.search.substr(1)):this.search.substr(1)):zt&&(this.search="",this.query={}),this}var $t=fe.exec(pe);if($t){var Cn=($t=$t[0]).toLowerCase();this.protocol=Cn,pe=pe.substr($t.length)}if(Ge||$t||pe.match(/^\/\/[^@\/]+@[^@\/]+/)){var ar="//"===pe.substr(0,2);ar&&(!$t||!Se[$t])&&(pe=pe.substr(2),this.slashes=!0)}if(!Se[$t]&&(ar||$t&&!je[$t])){for(var Ht=-1,Qt=0;Qt<X.length;Qt++)-1!==(zn=pe.indexOf(X[Qt]))&&(-1===Ht||zn<Ht)&&(Ht=zn);var Br,Dr;for(-1!==(Dr=-1===Ht?pe.lastIndexOf("@"):pe.lastIndexOf("@",Ht))&&(Br=pe.slice(0,Dr),pe=pe.slice(Dr+1),this.auth=decodeURIComponent(Br)),Ht=-1,Qt=0;Qt<z.length;Qt++){var zn;-1!==(zn=pe.indexOf(z[Qt]))&&(-1===Ht||zn<Ht)&&(Ht=zn)}-1===Ht&&(Ht=pe.length),this.host=pe.slice(0,Ht),pe=pe.slice(Ht),this.parseHost(),this.hostname=this.hostname||"";var Ni="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!Ni)for(var bn=this.hostname.split(/\./),Or=(Qt=0,bn.length);Qt<Or;Qt++){var Fi=bn[Qt];if(Fi&&!Fi.match(re)){for(var ki="",Di=0,Yi=Fi.length;Di<Yi;Di++)Fi.charCodeAt(Di)>127?ki+="x":ki+=Fi[Di];if(!ki.match(re)){var Vn=bn.slice(0,Qt),ai=bn.slice(Qt+1),xs=Fi.match(J);xs&&(Vn.push(xs[1]),ai.unshift(xs[2])),ai.length&&(pe="/"+ai.join(".")+pe),this.hostname=Vn.join(".");break}}}this.hostname=this.hostname.length>255?"":this.hostname.toLowerCase(),Ni||(this.hostname=$e.toASCII(this.hostname)),this.host=(this.hostname||"")+(this.port?":"+this.port:""),this.href+=this.host,Ni&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==pe[0]&&(pe="/"+pe))}if(!ie[Cn])for(Qt=0,Or=L.length;Qt<Or;Qt++){var ad=L[Qt];if(-1!==pe.indexOf(ad)){var gc=encodeURIComponent(ad);gc===ad&&(gc=escape(ad)),pe=pe.split(ad).join(gc)}}var sm=pe.indexOf("#");-1!==sm&&(this.hash=pe.substr(sm),pe=pe.slice(0,sm));var Pl=pe.indexOf("?");return-1!==Pl?(this.search=pe.substr(Pl),this.query=pe.substr(Pl+1),zt&&(this.query=Je.parse(this.query)),pe=pe.slice(0,Pl)):zt&&(this.search="",this.query={}),pe&&(this.pathname=pe),je[Cn]&&this.hostname&&!this.pathname&&(this.pathname="/"),(this.pathname||this.search)&&(this.path=(this.pathname||"")+(this.search||"")),this.href=this.format(),this},Me.prototype.format=function(){var ke=this.auth||"";ke&&(ke=(ke=encodeURIComponent(ke)).replace(/%3A/i,":"),ke+="@");var zt=this.protocol||"",Ge=this.pathname||"",Jn=this.hash||"",tt=!1,ne="";this.host?tt=ke+this.host:this.hostname&&(tt=ke+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(tt+=":"+this.port)),this.query&&nt.isObject(this.query)&&Object.keys(this.query).length&&(ne=Je.stringify(this.query));var we=this.search||ne&&"?"+ne||"";return zt&&":"!==zt.substr(-1)&&(zt+=":"),this.slashes||(!zt||je[zt])&&!1!==tt?(tt="//"+(tt||""),Ge&&"/"!==Ge.charAt(0)&&(Ge="/"+Ge)):tt||(tt=""),Jn&&"#"!==Jn.charAt(0)&&(Jn="#"+Jn),we&&"?"!==we.charAt(0)&&(we="?"+we),zt+tt+(Ge=Ge.replace(/[?#]/g,function(pe){return encodeURIComponent(pe)}))+(we=we.replace("#","%23"))+Jn},Me.prototype.resolve=function(ke){return this.resolveObject(Tt(ke,!1,!0)).format()},Me.prototype.resolveObject=function(ke){if(nt.isString(ke)){var zt=new Me;zt.parse(ke,!1,!0),ke=zt}for(var Ge=new Me,Jn=Object.keys(this),tt=0;tt<Jn.length;tt++){var ne=Jn[tt];Ge[ne]=this[ne]}if(Ge.hash=ke.hash,""===ke.href)return Ge.href=Ge.format(),Ge;if(ke.slashes&&!ke.protocol){for(var we=Object.keys(ke),pe=0;pe<we.length;pe++){var fn=we[pe];"protocol"!==fn&&(Ge[fn]=ke[fn])}return je[Ge.protocol]&&Ge.hostname&&!Ge.pathname&&(Ge.path=Ge.pathname="/"),Ge.href=Ge.format(),Ge}if(ke.protocol&&ke.protocol!==Ge.protocol){if(!je[ke.protocol]){for(var $t=Object.keys(ke),Cn=0;Cn<$t.length;Cn++){var ar=$t[Cn];Ge[ar]=ke[ar]}return Ge.href=Ge.format(),Ge}if(Ge.protocol=ke.protocol,ke.host||Se[ke.protocol])Ge.pathname=ke.pathname;else{for(var Or=(ke.pathname||"").split("/");Or.length&&!(ke.host=Or.shift()););ke.host||(ke.host=""),ke.hostname||(ke.hostname=""),""!==Or[0]&&Or.unshift(""),Or.length<2&&Or.unshift(""),Ge.pathname=Or.join("/")}return Ge.search=ke.search,Ge.query=ke.query,Ge.host=ke.host||"",Ge.auth=ke.auth,Ge.hostname=ke.hostname||ke.host,Ge.port=ke.port,(Ge.pathname||Ge.search)&&(Ge.path=(Ge.pathname||"")+(Ge.search||"")),Ge.slashes=Ge.slashes||ke.slashes,Ge.href=Ge.format(),Ge}var zn=Ge.pathname&&"/"===Ge.pathname.charAt(0),Br=ke.host||ke.pathname&&"/"===ke.pathname.charAt(0),Dr=Br||zn||Ge.host&&ke.pathname,Ni=Dr,bn=Ge.pathname&&Ge.pathname.split("/")||[],Fi=(Or=ke.pathname&&ke.pathname.split("/")||[],Ge.protocol&&!je[Ge.protocol]);if(Fi&&(Ge.hostname="",Ge.port=null,Ge.host&&(""===bn[0]?bn[0]=Ge.host:bn.unshift(Ge.host)),Ge.host="",ke.protocol&&(ke.hostname=null,ke.port=null,ke.host&&(""===Or[0]?Or[0]=ke.host:Or.unshift(ke.host)),ke.host=null),Dr=Dr&&(""===Or[0]||""===bn[0])),Br)Ge.host=ke.host||""===ke.host?ke.host:Ge.host,Ge.hostname=ke.hostname||""===ke.hostname?ke.hostname:Ge.hostname,Ge.search=ke.search,Ge.query=ke.query,bn=Or;else if(Or.length)bn||(bn=[]),bn.pop(),bn=bn.concat(Or),Ge.search=ke.search,Ge.query=ke.query;else if(!nt.isNullOrUndefined(ke.search))return Fi&&(Ge.hostname=Ge.host=bn.shift(),(ki=!!(Ge.host&&Ge.host.indexOf("@")>0)&&Ge.host.split("@"))&&(Ge.auth=ki.shift(),Ge.host=Ge.hostname=ki.shift())),Ge.search=ke.search,Ge.query=ke.query,(!nt.isNull(Ge.pathname)||!nt.isNull(Ge.search))&&(Ge.path=(Ge.pathname?Ge.pathname:"")+(Ge.search?Ge.search:"")),Ge.href=Ge.format(),Ge;if(!bn.length)return Ge.pathname=null,Ge.path=Ge.search?"/"+Ge.search:null,Ge.href=Ge.format(),Ge;for(var Di=bn.slice(-1)[0],Yi=(Ge.host||ke.host||bn.length>1)&&("."===Di||".."===Di)||""===Di,Vn=0,ai=bn.length;ai>=0;ai--)"."===(Di=bn[ai])?bn.splice(ai,1):".."===Di?(bn.splice(ai,1),Vn++):Vn&&(bn.splice(ai,1),Vn--);if(!Dr&&!Ni)for(;Vn--;Vn)bn.unshift("..");Dr&&""!==bn[0]&&(!bn[0]||"/"!==bn[0].charAt(0))&&bn.unshift(""),Yi&&"/"!==bn.join("/").substr(-1)&&bn.push("");var ki,xs=""===bn[0]||bn[0]&&"/"===bn[0].charAt(0);return Fi&&(Ge.hostname=Ge.host=xs?"":bn.length?bn.shift():"",(ki=!!(Ge.host&&Ge.host.indexOf("@")>0)&&Ge.host.split("@"))&&(Ge.auth=ki.shift(),Ge.host=Ge.hostname=ki.shift())),(Dr=Dr||Ge.host&&bn.length)&&!xs&&bn.unshift(""),bn.length?Ge.pathname=bn.join("/"):(Ge.pathname=null,Ge.path=null),(!nt.isNull(Ge.pathname)||!nt.isNull(Ge.search))&&(Ge.path=(Ge.pathname?Ge.pathname:"")+(Ge.search?Ge.search:"")),Ge.auth=ke.auth||Ge.auth,Ge.slashes=Ge.slashes||ke.slashes,Ge.href=Ge.format(),Ge},Me.prototype.parseHost=function(){var ke=this.host,zt=Ie.exec(ke);zt&&(":"!==(zt=zt[0])&&(this.port=zt.substr(1)),ke=ke.substr(0,ke.length-zt.length)),ke&&(this.hostname=ke)}},745:en=>{"use strict";en.exports={isString:function(wt){return"string"==typeof wt},isObject:function(wt){return"object"==typeof wt&&null!==wt},isNull:function(wt){return null===wt},isNullOrUndefined:function(wt){return null==wt}}},856:(en,wt)=>{var Ve,$e;void 0!==($e="function"==typeof(Ve=function(){return{XLink_1_0:{n:"XLink_1_0",dens:"http://www.w3.org/1999/xlink",dans:"http://www.w3.org/1999/xlink",tis:[{ln:"ResourceType",tn:"resourceType",ps:[{n:"content",col:!0,t:"ae"},{n:"type",rq:!0,ti:"Token",t:"a"},{n:"role",t:"a"},{n:"title",t:"a"},{n:"label",ti:"NCName",t:"a"}]},{ln:"LocatorType",tn:"locatorType",ps:[{n:"locatorTitle",mno:0,col:!0,en:"title",ti:".TitleEltType"},{n:"type",rq:!0,ti:"Token",t:"a"},{n:"href",rq:!0,t:"a"},{n:"role",t:"a"},{n:"title",t:"a"},{n:"label",ti:"NCName",t:"a"}]},{ln:"Extended",tn:"extended",ps:[{n:"extendedModel",mno:0,col:!0,etis:[{en:"title",ti:".TitleEltType"},{en:"resource",ti:".ResourceType"},{en:"locator",ti:".LocatorType"},{en:"arc",ti:".ArcType"}],t:"es"},{n:"type",rq:!0,ti:"Token",t:"a"},{n:"role",t:"a"},{n:"title",t:"a"}]},{ln:"Simple",tn:"simple",ps:[{n:"content",col:!0,t:"ae"},{n:"type",ti:"Token",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"Token",t:"a"},{n:"actuate",ti:"Token",t:"a"}]},{ln:"TitleEltType",tn:"titleEltType",ps:[{n:"content",col:!0,t:"ae"},{n:"type",rq:!0,ti:"Token",t:"a"},{n:"lang",an:{lp:"lang",ns:"http://www.w3.org/XML/1998/namespace"},t:"a"}]},{ln:"ArcType",tn:"arcType",ps:[{n:"locatorTitle",mno:0,col:!0,en:"title",ti:".TitleEltType"},{n:"type",rq:!0,ti:"Token",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"Token",t:"a"},{n:"actuate",ti:"Token",t:"a"},{n:"from",ti:"NCName",t:"a"},{n:"to",ti:"NCName",t:"a"}]},{t:"enum",ln:"TypeType",bti:"Token",vs:["simple","extended","title","resource","locator","arc"]},{t:"enum",ln:"ShowType",bti:"Token",vs:["new","replace","embed","other","none"]},{t:"enum",ln:"ActuateType",bti:"Token",vs:["onLoad","onRequest","other","none"]}],eis:[{en:"arc",ti:".ArcType"},{en:"resource",ti:".ResourceType"},{en:"locator",ti:".LocatorType"},{en:"title",ti:".TitleEltType"}]}}})?Ve.apply(wt,[]):Ve)&&(en.exports=$e)},249:function(en){(function(){var wt;en.exports={icon:"icons/google.svg",name:"google",title:"Google Fonts",link:"google.com/fonts",getNames:function(){return wt},getLink:function(Ve){return"https://fonts.google.com/specimen/"+Ve.replace(/( )/g,"+")},normalizeName:function(Ve){return Ve}},wt=["ABeeZee","Abel","Abril Fatface","Aclonica","Acme","Actor","Adamina","Advent Pro","Aguafina Script","Akronim","Aladin","Aldrich","Alef","Alegreya","Alegreya SC","Alegreya Sans","Alegreya Sans SC","Alex Brush","Alfa Slab One","Alice","Alike","Alike Angular","Allan","Allerta","Allerta Stencil","Allura","Almendra","Almendra Display","Almendra SC","Amarante","Amaranth","Amatic SC","Amethysta","Amiri","Amita","Anaheim","Andada","Andika","Angkor","Annie Use Your Telescope","Anonymous Pro","Antic","Antic Didone","Antic Slab","Anton","Arapey","Arbutus","Arbutus Slab","Architects Daughter","Archivo Black","Archivo Narrow","Arimo","Arizonia","Armata","Artifika","Arvo","Arya","Asap","Asar","Asset","Astloch","Asul","Atomic Age","Aubrey","Audiowide","Autour One","Average","Average Sans","Averia Gruesa Libre","Averia Libre","Averia Sans Libre","Averia Serif Libre","Bad Script","Balthazar","Bangers","Basic","Battambang","Baumans","Bayon","Belgrano","Belleza","BenchNine","Bentham","Berkshire Swash","Bevan","Bigelow Rules","Bigshot One","Bilbo","Bilbo Swash Caps","Biryani","Bitter","Black Ops One","Bokor","Bonbon","Boogaloo","Bowlby One","Bowlby One SC","Brawler","Bree Serif","Bubblegum Sans","Bubbler One","Buda","Buenard","Butcherman","Butterfly Kids","Cabin","Cabin Condensed","Cabin Sketch","Caesar Dressing","Cagliostro","Calligraffitti","Cambay","Cambo","Candal","Cantarell","Cantata One","Cantora One","Capriola","Cardo","Carme","Carrois Gothic","Carrois Gothic SC","Carter One","Catamaran","Caudex","Caveat","Caveat Brush","Cedarville Cursive","Ceviche One","Changa One","Chango","Chau Philomene One","Chela One","Chelsea Market","Chenla","Cherry Cream Soda","Cherry Swash","Chewy","Chicle","Chivo","Chonburi","Cinzel","Cinzel Decorative","Clicker Script","Coda","Coda Caption","Codystar","Combo","Comfortaa","Coming Soon","Concert One","Condiment","Content","Contrail One","Convergence","Cookie","Copse","Corben","Courgette","Cousine","Coustard","Covered By Your Grace","Crafty Girls","Creepster","Crete Round","Crimson Text","Croissant One","Crushed","Cuprum","Cutive","Cutive Mono","Damion","Dancing Script","Dangrek","Dawning of a New Day","Days One","Dekko","Delius","Delius Swash Caps","Delius Unicase","Della Respira","Denk One","Devonshire","Dhurjati","Didact Gothic","Diplomata","Diplomata SC","Domine","Donegal One","Doppio One","Dorsa","Dosis","Dr Sugiyama","Droid Sans","Droid Sans Mono","Droid Serif","Duru Sans","Dynalight","EB Garamond","Eagle Lake","Eater","Economica","Eczar","Ek Mukta","Electrolize","Elsie","Elsie Swash Caps","Emblema One","Emilys Candy","Engagement","Englebert","Enriqueta","Erica One","Esteban","Euphoria Script","Ewert","Exo","Exo 2","Expletus Sans","Fanwood Text","Fascinate","Fascinate Inline","Faster One","Fasthand","Fauna One","Federant","Federo","Felipa","Fenix","Finger Paint","Fira Mono","Fira Sans","Fjalla One","Fjord One","Flamenco","Flavors","Fondamento","Fontdiner Swanky","Forum","Francois One","Freckle Face","Fredericka the Great","Fredoka One","Freehand","Fresca","Frijole","Fruktur","Fugaz One","GFS Didot","GFS Neohellenic","Gabriela","Gafata","Galdeano","Galindo","Gentium Basic","Gentium Book Basic","Geo","Geostar","Geostar Fill","Germania One","Gidugu","Gilda Display","Give You Glory","Glass Antiqua","Glegoo","Gloria Hallelujah","Goblin One","Gochi Hand","Gorditas","Goudy Bookletter 1911","Graduate","Grand Hotel","Gravitas One","Great Vibes","Griffy","Gruppo","Gudea","Gurajada","Habibi","Halant","Hammersmith One","Hanalei","Hanalei Fill","Handlee","Hanuman","Happy Monkey","Headland One","Henny Penny","Herr Von Muellerhoff","Hind","Hind Siliguri","Hind Vadodara","Holtwood One SC","Homemade Apple","Homenaje","IM Fell DW Pica","IM Fell DW Pica SC","IM Fell Double Pica","IM Fell Double Pica SC","IM Fell English","IM Fell English SC","IM Fell French Canon","IM Fell French Canon SC","IM Fell Great Primer","IM Fell Great Primer SC","Iceberg","Iceland","Imprima","Inconsolata","Inder","Indie Flower","Inika","Inknut Antiqua","Irish Grover","Istok Web","Italiana","Italianno","Itim","Jacques Francois","Jacques Francois Shadow","Jaldi","Jim Nightshade","Jockey One","Jolly Lodger","Josefin Sans","Josefin Slab","Joti One","Judson","Julee","Julius Sans One","Junge","Jura","Just Another Hand","Just Me Again Down Here","Kadwa","Kalam","Kameron","Kantumruy","Karla","Karma","Kaushan Script","Kavoon","Kdam Thmor","Keania One","Kelly Slab","Kenia","Khand","Khmer","Khula","Kite One","Knewave","Kotta One","Koulen","Kranky","Kreon","Kristi","Krona One","Kurale","La Belle Aurore","Laila","Lakki Reddy","Lancelot","Lateef","Lato","League Script","Leckerli One","Ledger","Lekton","Lemon","Libre Baskerville","Life Savers","Lilita One","Lily Script One","Limelight","Linden Hill","Lobster","Lobster Two","Londrina Outline","Londrina Shadow","Londrina Sketch","Londrina Solid","Lora","Love Ya Like A Sister","Loved by the King","Lovers Quarrel","Luckiest Guy","Lusitana","Lustria","Macondo","Macondo Swash Caps","Magra","Maiden Orange","Mako","Mallanna","Mandali","Marcellus","Marcellus SC","Marck Script","Margarine","Marko One","Marmelad","Martel","Martel Sans","Marvel","Mate","Mate SC","Maven Pro","McLaren","Meddon","MedievalSharp","Medula One","Megrim","Meie Script","Merienda","Merienda One","Merriweather","Merriweather Sans","Metal","Metal Mania","Metamorphous","Metrophobic","Michroma","Milonga","Miltonian","Miltonian Tattoo","Miniver","Miss Fajardose","Modak","Modern Antiqua","Molengo","Molle","Monda","Monofett","Monoton","Monsieur La Doulaise","Montaga","Montez","Montserrat","Montserrat Alternates","Montserrat Subrayada","Moul","Moulpali","Mountains of Christmas","Mouse Memoirs","Mr Bedfort","Mr Dafoe","Mr De Haviland","Mrs Saint Delafield","Mrs Sheppards","Muli","Mystery Quest","NTR","Neucha","Neuton","New Rocker","News Cycle","Niconne","Nixie One","Nobile","Nokora","Norican","Nosifer","Nothing You Could Do","Noticia Text","Noto Sans","Noto Serif","Nova Cut","Nova Flat","Nova Mono","Nova Oval","Nova Round","Nova Script","Nova Slim","Nova Square","Numans","Nunito","Odor Mean Chey","Offside","Old Standard TT","Oldenburg","Oleo Script","Oleo Script Swash Caps","Open Sans","Open Sans Condensed","Oranienbaum","Orbitron","Oregano","Orienta","Original Surfer","Oswald","Over the Rainbow","Overlock","Overlock SC","Ovo","Oxygen","Oxygen Mono","PT Mono","PT Sans","PT Sans Caption","PT Sans Narrow","PT Serif","PT Serif Caption","Pacifico","Palanquin","Palanquin Dark","Paprika","Parisienne","Passero One","Passion One","Pathway Gothic One","Patrick Hand","Patrick Hand SC","Patua One","Paytone One","Peddana","Peralta","Permanent Marker","Petit Formal Script","Petrona","Philosopher","Piedra","Pinyon Script","Pirata One","Plaster","Play","Playball","Playfair Display","Playfair Display SC","Podkova","Poiret One","Poller One","Poly","Pompiere","Pontano Sans","Poppins","Port Lligat Sans","Port Lligat Slab","Pragati Narrow","Prata","Preahvihear","Press Start 2P","Princess Sofia","Prociono","Prosto One","Puritan","Purple Purse","Quando","Quantico","Quattrocento","Quattrocento Sans","Questrial","Quicksand","Quintessential","Qwigley","Racing Sans One","Radley","Rajdhani","Raleway","Raleway Dots","Ramabhadra","Ramaraja","Rambla","Rammetto One","Ranchers","Rancho","Ranga","Rationale","Ravi Prakash","Redressed","Reenie Beanie","Revalia","Rhodium Libre","Ribeye","Ribeye Marrow","Righteous","Risque","Roboto","Roboto Condensed","Roboto Mono","Roboto Slab","Rochester","Rock Salt","Rokkitt","Romanesco","Ropa Sans","Rosario","Rosarivo","Rouge Script","Rozha One","Rubik","Rubik Mono One","Rubik One","Ruda","Rufina","Ruge Boogie","Ruluko","Rum Raisin","Ruslan Display","Russo One","Ruthie","Rye","Sacramento","Sahitya","Sail","Salsa","Sanchez","Sancreek","Sansita One","Sarala","Sarina","Sarpanch","Satisfy","Scada","Scheherazade","Schoolbell","Seaweed Script","Sevillana","Seymour One","Shadows Into Light","Shadows Into Light Two","Shanti","Share","Share Tech","Share Tech Mono","Shojumaru","Short Stack","Siemreap","Sigmar One","Signika","Signika Negative","Simonetta","Sintony","Sirin Stencil","Six Caps","Skranji","Slabo 13px","Slabo 27px","Slackey","Smokum","Smythe","Sniglet","Snippet","Snowburst One","Sofadi One","Sofia","Sonsie One","Sorts Mill Goudy","Source Code Pro","Source Sans Pro","Source Serif Pro","Special Elite","Spicy Rice","Spinnaker","Spirax","Squada One","Sree Krushnadevaraya","Stalemate","Stalinist One","Stardos Stencil","Stint Ultra Condensed","Stint Ultra Expanded","Stoke","Strait","Sue Ellen Francisco","Sumana","Sunshiney","Supermercado One","Sura","Suranna","Suravaram","Suwannaphum","Swanky and Moo Moo","Syncopate","Tangerine","Taprom","Tauri","Teko","Telex","Tenali Ramakrishna","Tenor Sans","Text Me One","The Girl Next Door","Tienne","Tillana","Timmana","Tinos","Titan One","Titillium Web","Trade Winds","Trocchi","Trochut","Trykker","Tulpen One","Ubuntu","Ubuntu Condensed","Ubuntu Mono","Ultra","Uncial Antiqua","Underdog","Unica One","UnifrakturCook","UnifrakturMaguntia","Unkempt","Unlock","Unna","VT323","Vampiro One","Varela","Varela Round","Vast Shadow","Vesper Libre","Vibur","Vidaloka","Viga","Voces","Volkhov","Vollkorn","Voltaire","Waiting for the Sunrise","Wallpoet","Walter Turncoat","Warnes","Wellfleet","Wendy One","Wire One","Work Sans","Yanone Kaffeesatz","Yantramanav","Yellowtail","Yeseva One","Yesteryear","Zeyada"]}).call(this)},402:function(en,wt){var Ve,$e;void 0!==($e="function"==typeof(Ve=function(){var T=function(J){var ie=J.tagName;return"http://www.w3.org/1999/xhtml"===J.namespaceURI&&(ie=ie.toLowerCase()),ie},D=function(J){return Array.prototype.map.call(J.childNodes,function(ie){return re(ie)}).join("")},L=function(J,ie){var Se="<"+T(J);return Se+=function(J,ie){return Array.prototype.map.call(J.attributes||J.attrs,function(je){return je.name}).indexOf("xmlns")>=0||!ie&&J.namespaceURI===J.parentNode.namespaceURI?"":' xmlns="'+J.namespaceURI+'"'}(J,ie),Array.prototype.forEach.call(J.attributes||J.attrs,function(je){Se+=function(J){return" "+J.name+'="'+function(J){return J.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")}(J.value)+'"'}(je)}),J.childNodes.length>0?(Se+=">",Se+=D(J),Se+="</"+T(J)+">"):Se+="/>",Se},re=function(J,ie){var Se=ie&&ie.rootNode;return"#document"===J.nodeName||"#document-fragment"===J.nodeName?D(J):J.tagName?L(J,Se):"#text"===J.nodeName?function(J){return function(J){return J.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}(J.nodeValue||J.value||"")}(J):"#comment"===J.nodeName?function(J){return"\x3c!--"+J.data.replace(/-/g,"&#45;")+"--\x3e"}(J):"#cdata-section"===J.nodeName?function(J){return"<![CDATA["+J.nodeValue+"]]>"}(J):void 0};return{serializeToString:function(J){return function(J){return J.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F]/g,"")}(re(J,{rootNode:!0}))}}})?Ve.apply(wt,[]):Ve)&&(en.exports=$e)},251:(en,wt,Ve)=>{"use strict";function _t(l){return"function"==typeof l}let $e=!1;const nt={Promise:void 0,set useDeprecatedSynchronousErrorHandling(l){if(l){const a=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+a.stack)}else $e&&console.log("RxJS: Back to a better error behavior. Thank you. <3");$e=l},get useDeprecatedSynchronousErrorHandling(){return $e}};function Me(l){setTimeout(()=>{throw l},0)}const fe={closed:!0,next(l){},error(l){if(nt.useDeprecatedSynchronousErrorHandling)throw l;Me(l)},complete(){}},Ie=Array.isArray||(l=>l&&"number"==typeof l.length);function T(l){return null!==l&&"object"==typeof l}const D=(()=>{function l(a){return Error.call(this),this.message=a?`${a.length} errors occurred during unsubscription:\n${a.map((o,c)=>`${c+1}) ${o.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=a,this}return l.prototype=Object.create(Error.prototype),l})();class L{constructor(a){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,a&&(this._ctorUnsubscribe=!0,this._unsubscribe=a)}unsubscribe(){let a;if(this.closed)return;let{_parentOrParents:o,_ctorUnsubscribe:c,_unsubscribe:u,_subscriptions:h}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,o instanceof L)o.remove(this);else if(null!==o)for(let d=0;d<o.length;++d)o[d].remove(this);if(_t(u)){c&&(this._unsubscribe=void 0);try{u.call(this)}catch(d){a=d instanceof D?z(d.errors):[d]}}if(Ie(h)){let d=-1,f=h.length;for(;++d<f;){const m=h[d];if(T(m))try{m.unsubscribe()}catch(g){a=a||[],g instanceof D?a=a.concat(z(g.errors)):a.push(g)}}}if(a)throw new D(a)}add(a){let o=a;if(!a)return L.EMPTY;switch(typeof a){case"function":o=new L(a);case"object":if(o===this||o.closed||"function"!=typeof o.unsubscribe)return o;if(this.closed)return o.unsubscribe(),o;if(!(o instanceof L)){const h=o;o=new L,o._subscriptions=[h]}break;default:throw new Error("unrecognized teardown "+a+" added to Subscription.")}let{_parentOrParents:c}=o;if(null===c)o._parentOrParents=this;else if(c instanceof L){if(c===this)return o;o._parentOrParents=[c,this]}else{if(-1!==c.indexOf(this))return o;c.push(this)}const u=this._subscriptions;return null===u?this._subscriptions=[o]:u.push(o),o}remove(a){const o=this._subscriptions;if(o){const c=o.indexOf(a);-1!==c&&o.splice(c,1)}}}var l;function z(l){return l.reduce((a,o)=>a.concat(o instanceof D?o.errors:o),[])}L.EMPTY=((l=new L).closed=!0,l);const X="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random();class re extends L{constructor(a,o,c){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=fe;break;case 1:if(!a){this.destination=fe;break}if("object"==typeof a){a instanceof re?(this.syncErrorThrowable=a.syncErrorThrowable,this.destination=a,a.add(this)):(this.syncErrorThrowable=!0,this.destination=new J(this,a));break}default:this.syncErrorThrowable=!0,this.destination=new J(this,a,o,c)}}[X](){return this}static create(a,o,c){const u=new re(a,o,c);return u.syncErrorThrowable=!1,u}next(a){this.isStopped||this._next(a)}error(a){this.isStopped||(this.isStopped=!0,this._error(a))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(a){this.destination.next(a)}_error(a){this.destination.error(a),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:a}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=a,this}}class J extends re{constructor(a,o,c,u){super(),this._parentSubscriber=a;let h,d=this;_t(o)?h=o:o&&(h=o.next,c=o.error,u=o.complete,o!==fe&&(d=Object.create(o),_t(d.unsubscribe)&&this.add(d.unsubscribe.bind(d)),d.unsubscribe=this.unsubscribe.bind(this))),this._context=d,this._next=h,this._error=c,this._complete=u}next(a){if(!this.isStopped&&this._next){const{_parentSubscriber:o}=this;nt.useDeprecatedSynchronousErrorHandling&&o.syncErrorThrowable?this.__tryOrSetError(o,this._next,a)&&this.unsubscribe():this.__tryOrUnsub(this._next,a)}}error(a){if(!this.isStopped){const{_parentSubscriber:o}=this,{useDeprecatedSynchronousErrorHandling:c}=nt;if(this._error)c&&o.syncErrorThrowable?(this.__tryOrSetError(o,this._error,a),this.unsubscribe()):(this.__tryOrUnsub(this._error,a),this.unsubscribe());else if(o.syncErrorThrowable)c?(o.syncErrorValue=a,o.syncErrorThrown=!0):Me(a),this.unsubscribe();else{if(this.unsubscribe(),c)throw a;Me(a)}}}complete(){if(!this.isStopped){const{_parentSubscriber:a}=this;if(this._complete){const o=()=>this._complete.call(this._context);nt.useDeprecatedSynchronousErrorHandling&&a.syncErrorThrowable?(this.__tryOrSetError(a,o),this.unsubscribe()):(this.__tryOrUnsub(o),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(a,o){try{a.call(this._context,o)}catch(c){if(this.unsubscribe(),nt.useDeprecatedSynchronousErrorHandling)throw c;Me(c)}}__tryOrSetError(a,o,c){if(!nt.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{o.call(this._context,c)}catch(u){return nt.useDeprecatedSynchronousErrorHandling?(a.syncErrorValue=u,a.syncErrorThrown=!0,!0):(Me(u),!0)}return!1}_unsubscribe(){const{_parentSubscriber:a}=this;this._context=null,this._parentSubscriber=null,a.unsubscribe()}}const je="function"==typeof Symbol&&Symbol.observable||"@@observable";function Je(l){return l}let yt=(()=>{class l{constructor(o){this._isScalar=!1,o&&(this._subscribe=o)}lift(o){const c=new l;return c.source=this,c.operator=o,c}subscribe(o,c,u){const{operator:h}=this,d=function(l,a,o){if(l){if(l instanceof re)return l;if(l[X])return l[X]()}return l||a||o?new re(l,a,o):new re(fe)}(o,c,u);if(d.add(h?h.call(d,this.source):this.source||nt.useDeprecatedSynchronousErrorHandling&&!d.syncErrorThrowable?this._subscribe(d):this._trySubscribe(d)),nt.useDeprecatedSynchronousErrorHandling&&d.syncErrorThrowable&&(d.syncErrorThrowable=!1,d.syncErrorThrown))throw d.syncErrorValue;return d}_trySubscribe(o){try{return this._subscribe(o)}catch(c){nt.useDeprecatedSynchronousErrorHandling&&(o.syncErrorThrown=!0,o.syncErrorValue=c),function(l){for(;l;){const{closed:a,destination:o,isStopped:c}=l;if(a||c)return!1;l=o&&o instanceof re?o:null}return!0}(o)?o.error(c):console.warn(c)}}forEach(o,c){return new(c=at(c))((u,h)=>{let d;d=this.subscribe(f=>{try{o(f)}catch(m){h(m),d&&d.unsubscribe()}},h,u)})}_subscribe(o){const{source:c}=this;return c&&c.subscribe(o)}[je](){return this}pipe(...o){return 0===o.length?this:function(l){return 0===l.length?Je:1===l.length?l[0]:function(o){return l.reduce((c,u)=>u(c),o)}}(o)(this)}toPromise(o){return new(o=at(o))((c,u)=>{let h;this.subscribe(d=>h=d,d=>u(d),()=>c(h))})}}return l.create=a=>new l(a),l})();function at(l){if(l||(l=nt.Promise||Promise),!l)throw new Error("no Promise impl found");return l}const zt=(()=>{function l(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return l.prototype=Object.create(Error.prototype),l})();class Ge extends L{constructor(a,o){super(),this.subject=a,this.subscriber=o,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const a=this.subject,o=a.observers;if(this.subject=null,!o||0===o.length||a.isStopped||a.closed)return;const c=o.indexOf(this.subscriber);-1!==c&&o.splice(c,1)}}class Jn extends re{constructor(a){super(a),this.destination=a}}let tt=(()=>{class l extends yt{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[X](){return new Jn(this)}lift(o){const c=new ne(this,this);return c.operator=o,c}next(o){if(this.closed)throw new zt;if(!this.isStopped){const{observers:c}=this,u=c.length,h=c.slice();for(let d=0;d<u;d++)h[d].next(o)}}error(o){if(this.closed)throw new zt;this.hasError=!0,this.thrownError=o,this.isStopped=!0;const{observers:c}=this,u=c.length,h=c.slice();for(let d=0;d<u;d++)h[d].error(o);this.observers.length=0}complete(){if(this.closed)throw new zt;this.isStopped=!0;const{observers:o}=this,c=o.length,u=o.slice();for(let h=0;h<c;h++)u[h].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(o){if(this.closed)throw new zt;return super._trySubscribe(o)}_subscribe(o){if(this.closed)throw new zt;return this.hasError?(o.error(this.thrownError),L.EMPTY):this.isStopped?(o.complete(),L.EMPTY):(this.observers.push(o),new Ge(this,o))}asObservable(){const o=new yt;return o.source=this,o}}return l.create=(a,o)=>new ne(a,o),l})();class ne extends tt{constructor(a,o){super(),this.destination=a,this.source=o}next(a){const{destination:o}=this;o&&o.next&&o.next(a)}error(a){const{destination:o}=this;o&&o.error&&this.destination.error(a)}complete(){const{destination:a}=this;a&&a.complete&&this.destination.complete()}_subscribe(a){const{source:o}=this;return o?this.source.subscribe(a):L.EMPTY}}function we(l){return l&&"function"==typeof l.schedule}function pe(l,a){return function(c){if("function"!=typeof l)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return c.lift(new fn(l,a))}}class fn{constructor(a,o){this.project=a,this.thisArg=o}call(a,o){return o.subscribe(new $t(a,this.project,this.thisArg))}}class $t extends re{constructor(a,o,c){super(a),this.project=o,this.count=0,this.thisArg=c||this}_next(a){let o;try{o=this.project.call(this.thisArg,a,this.count++)}catch(c){return void this.destination.error(c)}this.destination.next(o)}}const Cn=l=>a=>{for(let o=0,c=l.length;o<c&&!a.closed;o++)a.next(l[o]);a.complete()},Qt="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator",Ni=l=>l&&"number"==typeof l.length&&"function"!=typeof l;function bn(l){return!!l&&"function"!=typeof l.subscribe&&"function"==typeof l.then}const Or=l=>{if(l&&"function"==typeof l[je])return(l=>a=>{const o=l[je]();if("function"!=typeof o.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return o.subscribe(a)})(l);if(Ni(l))return Cn(l);if(bn(l))return(l=>a=>(l.then(o=>{a.closed||(a.next(o),a.complete())},o=>a.error(o)).then(null,Me),a))(l);if(l&&"function"==typeof l[Qt])return(l=>a=>{const o=l[Qt]();for(;;){let c;try{c=o.next()}catch(u){return a.error(u),a}if(c.done){a.complete();break}if(a.next(c.value),a.closed)break}return"function"==typeof o.return&&a.add(()=>{o.return&&o.return()}),a})(l);{const o=`You provided ${T(l)?"an invalid object":`'${l}'`} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`;throw new TypeError(o)}};function Di(l,a){return new yt(o=>{const c=new L;let u=0;return c.add(a.schedule(function(){u!==l.length?(o.next(l[u++]),o.closed||c.add(this.schedule())):o.complete()})),c})}function hi(l,a){return a?function(l,a){if(null!=l){if(function(l){return l&&"function"==typeof l[je]}(l))return function(l,a){return new yt(o=>{const c=new L;return c.add(a.schedule(()=>{const u=l[je]();c.add(u.subscribe({next(h){c.add(a.schedule(()=>o.next(h)))},error(h){c.add(a.schedule(()=>o.error(h)))},complete(){c.add(a.schedule(()=>o.complete()))}}))})),c})}(l,a);if(bn(l))return function(l,a){return new yt(o=>{const c=new L;return c.add(a.schedule(()=>l.then(u=>{c.add(a.schedule(()=>{o.next(u),c.add(a.schedule(()=>o.complete()))}))},u=>{c.add(a.schedule(()=>o.error(u)))}))),c})}(l,a);if(Ni(l))return Di(l,a);if(function(l){return l&&"function"==typeof l[Qt]}(l)||"string"==typeof l)return function(l,a){if(!l)throw new Error("Iterable cannot be null");return new yt(o=>{const c=new L;let u;return c.add(()=>{u&&"function"==typeof u.return&&u.return()}),c.add(a.schedule(()=>{u=l[Qt](),c.add(a.schedule(function(){if(o.closed)return;let h,d;try{const f=u.next();h=f.value,d=f.done}catch(f){return void o.error(f)}d?o.complete():(o.next(h),this.schedule())}))})),c})}(l,a)}throw new TypeError((null!==l&&typeof l||l)+" is not observable")}(l,a):l instanceof yt?l:new yt(Or(l))}class tl extends re{constructor(a){super(),this.parent=a}_next(a){this.parent.notifyNext(a)}_error(a){this.parent.notifyError(a),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class gc extends re{notifyNext(a){this.destination.next(a)}notifyError(a){this.destination.error(a)}notifyComplete(){this.destination.complete()}}function Pl(l,a){if(a.closed)return;if(l instanceof yt)return l.subscribe(a);let o;try{o=Or(l)(a)}catch(c){a.error(c)}return o}function yi(l,a,o=Number.POSITIVE_INFINITY){return"function"==typeof a?c=>c.pipe(yi((u,h)=>hi(l(u,h)).pipe(pe((d,f)=>a(u,d,h,f))),o)):("number"==typeof a&&(o=a),c=>c.lift(new Yc(l,o)))}class Yc{constructor(a,o=Number.POSITIVE_INFINITY){this.project=a,this.concurrent=o}call(a,o){return o.subscribe(new n2(a,this.project,this.concurrent))}}class n2 extends gc{constructor(a,o,c=Number.POSITIVE_INFINITY){super(a),this.project=o,this.concurrent=c,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(a){this.active<this.concurrent?this._tryNext(a):this.buffer.push(a)}_tryNext(a){let o;const c=this.index++;try{o=this.project(a,c)}catch(u){return void this.destination.error(u)}this.active++,this._innerSub(o)}_innerSub(a){const o=new tl(this),c=this.destination;c.add(o);const u=Pl(a,o);u!==o&&c.add(u)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(a){this.destination.next(a)}notifyComplete(){const a=this.buffer;this.active--,a.length>0?this._next(a.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}function Os(l=Number.POSITIVE_INFINITY){return yi(Je,l)}function am(l,a){return a?Di(l,a):new yt(Cn(l))}function lm(...l){let a=Number.POSITIVE_INFINITY,o=null,c=l[l.length-1];return we(c)?(o=l.pop(),l.length>1&&"number"==typeof l[l.length-1]&&(a=l.pop())):"number"==typeof c&&(a=l.pop()),null===o&&1===l.length&&l[0]instanceof yt?l[0]:Os(a)(am(l,o))}function ld(){return function(a){return a.lift(new cm(a))}}class cm{constructor(a){this.connectable=a}call(a,o){const{connectable:c}=this;c._refCount++;const u=new py(a,c),h=o.subscribe(u);return u.closed||(u.connection=c.connect()),h}}class py extends re{constructor(a,o){super(a),this.connectable=o}_unsubscribe(){const{connectable:a}=this;if(!a)return void(this.connection=null);this.connectable=null;const o=a._refCount;if(o<=0)return void(this.connection=null);if(a._refCount=o-1,o>1)return void(this.connection=null);const{connection:c}=this,u=a._connection;this.connection=null,u&&(!c||u===c)&&u.unsubscribe()}}class my extends yt{constructor(a,o){super(),this.source=a,this.subjectFactory=o,this._refCount=0,this._isComplete=!1}_subscribe(a){return this.getSubject().subscribe(a)}getSubject(){const a=this._subject;return(!a||a.isStopped)&&(this._subject=this.subjectFactory()),this._subject}connect(){let a=this._connection;return a||(this._isComplete=!1,a=this._connection=new L,a.add(this.source.subscribe(new gb(this.getSubject(),this))),a.closed&&(this._connection=null,a=L.EMPTY)),a}refCount(){return ld()(this)}}const gy=(()=>{const l=my.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:l._subscribe},_isComplete:{value:l._isComplete,writable:!0},getSubject:{value:l.getSubject},connect:{value:l.connect},refCount:{value:l.refCount}}})();class gb extends Jn{constructor(a,o){super(a),this.connectable=o}_error(a){this._unsubscribe(),super._error(a)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const a=this.connectable;if(a){this.connectable=null;const o=a._connection;a._refCount=0,a._subject=null,a._connection=null,o&&o.unsubscribe()}}}function _y(){return new tt}function um(){return l=>ld()(function(l,a){return function(c){let u;u="function"==typeof l?l:function(){return l};const h=Object.create(c,gy);return h.source=c,h.subjectFactory=u,h}}(_y)(l))}function ei(l){for(let a in l)if(l[a]===ei)return a;throw Error("Could not find renamed property on target object.")}function yb(l,a){for(const o in a)a.hasOwnProperty(o)&&!l.hasOwnProperty(o)&&(l[o]=a[o])}function vr(l){if("string"==typeof l)return l;if(Array.isArray(l))return"["+l.map(vr).join(", ")+"]";if(null==l)return""+l;if(l.overriddenName)return`${l.overriddenName}`;if(l.name)return`${l.name}`;const a=l.toString();if(null==a)return""+a;const o=a.indexOf("\n");return-1===o?a:a.substring(0,o)}function vb(l,a){return null==l||""===l?null===a?"":a:null==a||""===a?l:l+" "+a}const mC=ei({__forward_ref__:ei});function vi(l){return l.__forward_ref__=vi,l.toString=function(){return vr(this())},l}function In(l){return gC(l)?l():l}function gC(l){return"function"==typeof l&&l.hasOwnProperty(mC)&&l.__forward_ref__===vi}class Yu extends Error{constructor(a,o){super(function(l,a){return`${l?`NG0${l}: `:""}${a}`}(a,o)),this.code=a}}function lr(l){return"string"==typeof l?l:null==l?"":String(l)}function Do(l){return"function"==typeof l?l.name||l.toString():"object"==typeof l&&null!=l&&"function"==typeof l.type?l.type.name||l.type.toString():lr(l)}function by(l,a){const o=a?` in ${a}`:"";throw new Yu("201",`No provider for ${Do(l)} found${o}`)}function Aa(l,a){null==l&&function(l,a,o,c){throw new Error(`ASSERTION ERROR: ${l}`+(null==c?"":` [Expected=> ${o} ${c} ${a} <=Actual]`))}(a,l,null,"!=")}function Xe(l){return{token:l.token,providedIn:l.providedIn||null,factory:l.factory,value:void 0}}function jt(l){return{providers:l.providers||[],imports:l.imports||[]}}function yc(l){return bb(l,Zi)||bb(l,Ty)}function bb(l,a){return l.hasOwnProperty(a)?l[a]:null}function Sb(l){return l&&(l.hasOwnProperty(Tb)||l.hasOwnProperty(wb))?l[Tb]:null}const Zi=ei({\u0275prov:ei}),Tb=ei({\u0275inj:ei}),Ty=ei({ngInjectableDef:ei}),wb=ei({ngInjectorDef:ei});var On=(()=>((On=On||{})[On.Default=0]="Default",On[On.Host=1]="Host",On[On.Self=2]="Self",On[On.SkipSelf=4]="SkipSelf",On[On.Optional=8]="Optional",On))();let Cb;function Ku(l){const a=Cb;return Cb=l,a}function xf(l,a,o){const c=yc(l);return c&&"root"==c.providedIn?void 0===c.value?c.value=c.factory():c.value:o&On.Optional?null:void 0!==a?a:void by(vr(l),"Injector")}function Ju(l){return{toString:l}.toString()}var nl=(()=>((nl=nl||{})[nl.OnPush=0]="OnPush",nl[nl.Default=1]="Default",nl))(),Ki=(()=>((Ki=Ki||{})[Ki.Emulated=0]="Emulated",Ki[Ki.None=2]="None",Ki[Ki.ShadowDom=3]="ShadowDom",Ki))();const h2="undefined"!=typeof globalThis&&globalThis,d2="undefined"!=typeof window&&window,f2="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,p2="undefined"!=typeof global&&global,er=h2||p2||d2||f2,Ol={},di=[],fm=ei({\u0275cmp:ei}),pm=ei({\u0275dir:ei}),wy=ei({\u0275pipe:ei}),Cy=ei({\u0275mod:ei}),m2=ei({\u0275loc:ei}),Kc=ei({\u0275fac:ei}),mm=ei({__NG_ELEMENT_ID__:ei});let g2=0;function Qe(l){return Ju(()=>{const o={},c={type:l.type,providersResolver:null,decls:l.decls,vars:l.vars,factory:null,template:l.template||null,consts:l.consts||null,ngContentSelectors:l.ngContentSelectors,hostBindings:l.hostBindings||null,hostVars:l.hostVars||0,hostAttrs:l.hostAttrs||null,contentQueries:l.contentQueries||null,declaredInputs:o,inputs:null,outputs:null,exportAs:l.exportAs||null,onPush:l.changeDetection===nl.OnPush,directiveDefs:null,pipeDefs:null,selectors:l.selectors||di,viewQuery:l.viewQuery||null,features:l.features||null,data:l.data||{},encapsulation:l.encapsulation||Ki.Emulated,id:"c",styles:l.styles||di,_:null,setInput:null,schemas:l.schemas||null,tView:null},u=l.directives,h=l.features,d=l.pipes;return c.id+=g2++,c.inputs=dd(l.inputs,o),c.outputs=dd(l.outputs),h&&h.forEach(f=>f(c)),c.directiveDefs=u?()=>("function"==typeof u?u():u).map(Eb):null,c.pipeDefs=d?()=>("function"==typeof d?d():d).map(SC):null,c})}function Eb(l){return Wo(l)||function(l){return l[pm]||null}(l)}function SC(l){return function(l){return l[wy]||null}(l)}const ud={};function Yt(l){return Ju(()=>{const a={type:l.type,bootstrap:l.bootstrap||di,declarations:l.declarations||di,imports:l.imports||di,exports:l.exports||di,transitiveCompileScopes:null,schemas:l.schemas||null,id:l.id||null};return null!=l.id&&(ud[l.id]=l.type),a})}function dd(l,a){if(null==l)return Ol;const o={};for(const c in l)if(l.hasOwnProperty(c)){let u=l[c],h=u;Array.isArray(u)&&(h=u[1],u=u[0]),o[u]=c,a&&(a[u]=h)}return o}const Ze=Qe;function Ao(l){return{type:l.type,name:l.name,factory:null,pure:!1!==l.pure,onDestroy:l.type.prototype.ngOnDestroy||null}}function Wo(l){return l[fm]||null}function ca(l,a){const o=l[Cy]||null;if(!o&&!0===a)throw new Error(`Type ${vr(l)} does not have '\u0275mod' property.`);return o}function qo(l){return Array.isArray(l)&&"object"==typeof l[1]}function Fl(l){return Array.isArray(l)&&!0===l[1]}function nh(l){return 0!=(8&l.flags)}function Dy(l){return 2==(2&l.flags)}function vc(l){return 1==(1&l.flags)}function kl(l){return null!==l.template}function TC(l){return 0!=(512&l[2])}function ho(l,a){return l.hasOwnProperty(Kc)?l[Kc]:null}class Ab{constructor(a,o,c){this.previousValue=a,this.currentValue=o,this.firstChange=c}isFirstChange(){return this.firstChange}}function Ci(){return xC}function xC(l){return l.type.prototype.ngOnChanges&&(l.setInput=E2),x2}function x2(){const l=MC(this),a=null==l?void 0:l.current;if(a){const o=l.previous;if(o===Ol)l.previous=a;else for(let c in a)o[c]=a[c];l.current=null,this.ngOnChanges(a)}}function E2(l,a,o,c){const u=MC(l)||function(l,a){return l[EC]=a}(l,{previous:Ol,current:null}),h=u.current||(u.current={}),d=u.previous,f=this.declaredInputs[o],m=d[f];h[f]=new Ab(m&&m.currentValue,a,d===Ol),l[c]=a}Ci.ngInherit=!0;const EC="__ngSimpleChanges__";function MC(l){return l[EC]||null}let Ly;function Oy(){return void 0!==Ly?Ly:"undefined"!=typeof document?document:void 0}function Kr(l){return!!l.listen}const Pb={createRenderer:(l,a)=>Oy()};function is(l){for(;Array.isArray(l);)l=l[0];return l}function _m(l,a){return is(a[l])}function ol(l,a){return is(a[l.index])}function Ny(l,a){return l.data[a]}function gd(l,a){return l[a]}function $o(l,a){const o=a[l];return qo(o)?o:o[0]}function Lb(l){return 4==(4&l[2])}function Rf(l){return 128==(128&l[2])}function al(l,a){return null==a?null:l[a]}function Nb(l){l[18]=0}function Fy(l,a){l[5]+=a;let o=l,c=l[3];for(;null!==c&&(1===a&&1===o[5]||-1===a&&0===o[5]);)c[5]+=a,o=c,c=c[3]}const jn={lFrame:ky(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function Fb(){return jn.bindingsEnabled}function bt(){return jn.lFrame.lView}function $r(){return jn.lFrame.tView}function Ut(l){return jn.lFrame.contextLView=l,l[8]}function Es(){let l=kb();for(;null!==l&&64===l.type;)l=l.parent;return l}function kb(){return jn.lFrame.currentTNode}function Vl(l,a){const o=jn.lFrame;o.currentTNode=l,o.isParent=a}function ss(){return jn.lFrame.isParent}function yd(){jn.lFrame.isParent=!1}function H(){return jn.isInCheckNoChangesMode}function F(l){jn.isInCheckNoChangesMode=l}function I(){const l=jn.lFrame;let a=l.bindingRootIndex;return-1===a&&(a=l.bindingRootIndex=l.tView.bindingStartIndex),a}function G(){return jn.lFrame.bindingIndex}function ae(){return jn.lFrame.bindingIndex++}function me(l){const a=jn.lFrame,o=a.bindingIndex;return a.bindingIndex=a.bindingIndex+l,o}function Pt(l,a){const o=jn.lFrame;o.bindingIndex=o.bindingRootIndex=l,Dt(a)}function Dt(l){jn.lFrame.currentDirectiveIndex=l}function vn(l){const a=jn.lFrame.currentDirectiveIndex;return-1===a?null:l[a]}function Wn(){return jn.lFrame.currentQueryIndex}function cr(l){jn.lFrame.currentQueryIndex=l}function Lr(l){const a=l[1];return 2===a.type?a.declTNode:1===a.type?l[6]:null}function pr(l,a,o){if(o&On.SkipSelf){let u=a,h=l;for(;!(u=u.parent,null!==u||o&On.Host||(u=Lr(h),null===u||(h=h[15],10&u.type))););if(null===u)return!1;a=u,l=h}const c=jn.lFrame=Sm();return c.currentTNode=a,c.lView=l,!0}function Ms(l){const a=Sm(),o=l[1];jn.lFrame=a,a.currentTNode=o.firstChild,a.lView=l,a.tView=o,a.contextLView=l,a.bindingIndex=o.bindingStartIndex,a.inI18n=!1}function Sm(){const l=jn.lFrame,a=null===l?null:l.child;return null===a?ky(l):a}function ky(l){const a={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:l,child:null,inI18n:!1};return null!==l&&(l.child=a),a}function Vb(){const l=jn.lFrame;return jn.lFrame=l.parent,l.currentTNode=null,l.lView=null,l}const Of=Vb;function Vy(){const l=Vb();l.isParent=!0,l.tView=null,l.selectedIndex=-1,l.contextLView=null,l.elementDepthCount=0,l.currentDirectiveIndex=-1,l.currentNamespace=null,l.bindingRootIndex=-1,l.bindingIndex=-1,l.currentQueryIndex=0}function Yo(){return jn.lFrame.selectedIndex}function Jc(l){jn.lFrame.selectedIndex=l}function os(){const l=jn.lFrame;return Ny(l.tView,l.selectedIndex)}function NC(l,a){for(let o=a.directiveStart,c=a.directiveEnd;o<c;o++){const h=l.data[o].type.prototype,{ngAfterContentInit:d,ngAfterContentChecked:f,ngAfterViewInit:m,ngAfterViewChecked:g,ngOnDestroy:y}=h;d&&(l.contentHooks||(l.contentHooks=[])).push(-o,d),f&&((l.contentHooks||(l.contentHooks=[])).push(o,f),(l.contentCheckHooks||(l.contentCheckHooks=[])).push(o,f)),m&&(l.viewHooks||(l.viewHooks=[])).push(-o,m),g&&((l.viewHooks||(l.viewHooks=[])).push(o,g),(l.viewCheckHooks||(l.viewCheckHooks=[])).push(o,g)),null!=y&&(l.destroyHooks||(l.destroyHooks=[])).push(o,y)}}function FC(l,a,o){CU(l,a,3,o)}function kC(l,a,o,c){(3&l[2])===o&&CU(l,a,o,c)}function k2(l,a){let o=l[2];(3&o)===a&&(o&=2047,o+=1,l[2]=o)}function CU(l,a,o,c){const h=null!=c?c:-1,d=a.length-1;let f=0;for(let m=void 0!==c?65535&l[18]:0;m<d;m++)if("number"==typeof a[m+1]){if(f=a[m],null!=c&&f>=c)break}else a[m]<0&&(l[18]+=65536),(f<h||-1==h)&&(moe(l,o,a,m),l[18]=(4294901760&l[18])+m+2),m++}function moe(l,a,o,c){const u=o[c]<0,h=o[c+1],f=l[u?-o[c]:o[c]];if(u){if(l[2]>>11<l[18]>>16&&(3&l[2])===a){l[2]+=2048;try{h.call(f)}finally{}}}else try{h.call(f)}finally{}}class Ub{constructor(a,o,c){this.factory=a,this.resolving=!1,this.canSeeViewProviders=o,this.injectImpl=c}}function VC(l,a,o){const c=Kr(l);let u=0;for(;u<o.length;){const h=o[u];if("number"==typeof h){if(0!==h)break;u++;const d=o[u++],f=o[u++],m=o[u++];c?l.setAttribute(a,f,m,d):a.setAttributeNS(d,f,m)}else{const d=h,f=o[++u];B2(d)?c&&l.setProperty(a,d,f):c?l.setAttribute(a,d,f):a.setAttribute(d,f),u++}}return u}function xU(l){return 3===l||4===l||6===l}function B2(l){return 64===l.charCodeAt(0)}function BC(l,a){if(null!==a&&0!==a.length)if(null===l||0===l.length)l=a.slice();else{let o=-1;for(let c=0;c<a.length;c++){const u=a[c];"number"==typeof u?o=u:0===o||EU(l,o,u,null,-1===o||2===o?a[++c]:null)}}return l}function EU(l,a,o,c,u){let h=0,d=l.length;if(-1===a)d=-1;else for(;h<l.length;){const f=l[h++];if("number"==typeof f){if(f===a){d=-1;break}if(f>a){d=h-1;break}}}for(;h<l.length;){const f=l[h];if("number"==typeof f)break;if(f===o){if(null===c)return void(null!==u&&(l[h+1]=u));if(c===l[h+1])return void(l[h+2]=u)}h++,null!==c&&h++,null!==u&&h++}-1!==d&&(l.splice(d,0,a),h=d+1),l.splice(h++,0,o),null!==c&&l.splice(h++,0,c),null!==u&&l.splice(h++,0,u)}function MU(l){return-1!==l}function By(l){return 32767&l}function Uy(l,a){let o=function(l){return l>>16}(l),c=a;for(;o>0;)c=c[15],o--;return c}let U2=!0;function UC(l){const a=U2;return U2=l,a}let Soe=0;function zb(l,a){const o=z2(l,a);if(-1!==o)return o;const c=a[1];c.firstCreatePass&&(l.injectorIndex=a.length,G2(c.data,l),G2(a,null),G2(c.blueprint,null));const u=GC(l,a),h=l.injectorIndex;if(MU(u)){const d=By(u),f=Uy(u,a),m=f[1].data;for(let g=0;g<8;g++)a[h+g]=f[d+g]|m[d+g]}return a[h+8]=u,h}function G2(l,a){l.push(0,0,0,0,0,0,0,0,a)}function z2(l,a){return-1===l.injectorIndex||l.parent&&l.parent.injectorIndex===l.injectorIndex||null===a[l.injectorIndex+8]?-1:l.injectorIndex}function GC(l,a){if(l.parent&&-1!==l.parent.injectorIndex)return l.parent.injectorIndex;let o=0,c=null,u=a;for(;null!==u;){const h=u[1],d=h.type;if(c=2===d?h.declTNode:1===d?u[6]:null,null===c)return-1;if(o++,u=u[15],-1!==c.injectorIndex)return c.injectorIndex|o<<16}return-1}function zC(l,a,o){!function(l,a,o){let c;"string"==typeof o?c=o.charCodeAt(0)||0:o.hasOwnProperty(mm)&&(c=o[mm]),null==c&&(c=o[mm]=Soe++);const u=255&c;a.data[l+(u>>5)]|=1<<u}(l,a,o)}function IU(l,a,o){if(o&On.Optional)return l;by(a,"NodeInjector")}function RU(l,a,o,c){if(o&On.Optional&&void 0===c&&(c=null),0==(o&(On.Self|On.Host))){const u=l[9],h=Ku(void 0);try{return u?u.get(a,c,o&On.Optional):xf(a,c,o&On.Optional)}finally{Ku(h)}}return IU(c,a,o)}function PU(l,a,o,c=On.Default,u){if(null!==l){const h=function(l){if("string"==typeof l)return l.charCodeAt(0)||0;const a=l.hasOwnProperty(mm)?l[mm]:void 0;return"number"==typeof a?a>=0?255&a:Coe:a}(o);if("function"==typeof h){if(!pr(a,l,c))return c&On.Host?IU(u,o,c):RU(a,o,c,u);try{const d=h(c);if(null!=d||c&On.Optional)return d;by(o)}finally{Of()}}else if("number"==typeof h){let d=null,f=z2(l,a),m=-1,g=c&On.Host?a[16][6]:null;for((-1===f||c&On.SkipSelf)&&(m=-1===f?GC(l,a):a[f+8],-1!==m&&NU(c,!1)?(d=a[1],f=By(m),a=Uy(m,a)):f=-1);-1!==f;){const y=a[1];if(OU(h,f,y.data)){const v=xoe(f,a,o,d,c,g);if(v!==LU)return v}m=a[f+8],-1!==m&&NU(c,a[1].data[f+8]===g)&&OU(h,f,a)?(d=y,f=By(m),a=Uy(m,a)):f=-1}}}return RU(a,o,c,u)}const LU={};function Coe(){return new Gy(Es(),bt())}function xoe(l,a,o,c,u,h){const d=a[1],f=d.data[l+8],y=HC(f,d,o,null==c?Dy(f)&&U2:c!=d&&0!=(3&f.type),u&On.Host&&h===f);return null!==y?Hb(a,d,y,f):LU}function HC(l,a,o,c,u){const h=l.providerIndexes,d=a.data,f=1048575&h,m=l.directiveStart,y=h>>20,_=u?f+y:l.directiveEnd;for(let b=c?f:f+y;b<_;b++){const w=d[b];if(b<m&&o===w||b>=m&&w.type===o)return b}if(u){const b=d[m];if(b&&kl(b)&&b.type===o)return m}return null}function Hb(l,a,o,c){let u=l[o];const h=a.data;if(function(l){return l instanceof Ub}(u)){const d=u;d.resolving&&function(l,a){throw new Yu("200",`Circular dependency in DI detected for ${l}`)}(Do(h[o]));const f=UC(d.canSeeViewProviders);d.resolving=!0;const m=d.injectImpl?Ku(d.injectImpl):null;pr(l,c,On.Default);try{u=l[o]=d.factory(void 0,h,l,c),a.firstCreatePass&&o>=c.directiveStart&&function(l,a,o){const{ngOnChanges:c,ngOnInit:u,ngDoCheck:h}=a.type.prototype;if(c){const d=xC(a);(o.preOrderHooks||(o.preOrderHooks=[])).push(l,d),(o.preOrderCheckHooks||(o.preOrderCheckHooks=[])).push(l,d)}u&&(o.preOrderHooks||(o.preOrderHooks=[])).push(0-l,u),h&&((o.preOrderHooks||(o.preOrderHooks=[])).push(l,h),(o.preOrderCheckHooks||(o.preOrderCheckHooks=[])).push(l,h))}(o,h[o],a)}finally{null!==m&&Ku(m),UC(f),d.resolving=!1,Of()}}return u}function OU(l,a,o){return!!(o[a+(l>>5)]&1<<l)}function NU(l,a){return!(l&On.Self||l&On.Host&&a)}class Gy{constructor(a,o){this._tNode=a,this._lView=o}get(a,o){return PU(this._tNode,this._lView,a,void 0,o)}}function Fs(l){return Ju(()=>{const a=l.prototype.constructor,o=a[Kc]||H2(a),c=Object.prototype;let u=Object.getPrototypeOf(l.prototype).constructor;for(;u&&u!==c;){const h=u[Kc]||H2(u);if(h&&h!==o)return h;u=Object.getPrototypeOf(u)}return h=>new h})}function H2(l){return gC(l)?()=>{const a=H2(In(l));return a&&a()}:ho(l)}function zy(l){return function(l,a){if("class"===a)return l.classes;if("style"===a)return l.styles;const o=l.attrs;if(o){const c=o.length;let u=0;for(;u<c;){const h=o[u];if(xU(h))break;if(0===h)u+=2;else if("number"==typeof h)for(u++;u<c&&"string"==typeof o[u];)u++;else{if(h===a)return o[u+1];u+=2}}}return null}(Es(),l)}const jy="__parameters__";function Tm(l,a,o){return Ju(()=>{const c=function(l){return function(...o){if(l){const c=l(...o);for(const u in c)this[u]=c[u]}}}(a);function u(...h){if(this instanceof u)return c.apply(this,h),this;const d=new u(...h);return f.annotation=d,f;function f(m,g,y){const v=m.hasOwnProperty(jy)?m[jy]:Object.defineProperty(m,jy,{value:[]})[jy];for(;v.length<=y;)v.push(null);return(v[y]=v[y]||[]).push(d),m}}return o&&(u.prototype=Object.create(o.prototype)),u.prototype.ngMetadataName=l,u.annotationCls=u,u})}class Sn{constructor(a,o){this._desc=a,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof o?this.__NG_ELEMENT_ID__=o:void 0!==o&&(this.\u0275prov=Xe({token:this,providedIn:o.providedIn||"root",factory:o.factory}))}toString(){return`InjectionToken ${this._desc}`}}const Aoe=new Sn("AnalyzeForEntryComponents"),qb=Function;function bc(l,a){void 0===a&&(a=l);for(let o=0;o<l.length;o++){let c=l[o];Array.isArray(c)?(a===l&&(a=l.slice(0,o)),bc(c,a)):a!==l&&a.push(c)}return a}function rh(l,a){l.forEach(o=>Array.isArray(o)?rh(o,a):a(o))}function WC(l,a,o){a>=l.length?l.push(o):l.splice(a,0,o)}function wm(l,a){return a>=l.length-1?l.pop():l.splice(a,1)[0]}function Ff(l,a){const o=[];for(let c=0;c<l;c++)o.push(a);return o}function Bl(l,a,o){let c=qy(l,a);return c>=0?l[1|c]=o:(c=~c,function(l,a,o,c){let u=l.length;if(u==a)l.push(o,c);else if(1===u)l.push(c,l[0]),l[0]=o;else{for(u--,l.push(l[u-1],l[u]);u>a;)l[u]=l[u-2],u--;l[a]=o,l[a+1]=c}}(l,c,a,o)),c}function W2(l,a){const o=qy(l,a);if(o>=0)return l[1|o]}function qy(l,a){return function(l,a,o){let c=0,u=l.length>>o;for(;u!==c;){const h=c+(u-c>>1),d=l[h<<o];if(a===d)return h<<o;d>a?u=h:c=h+1}return~(u<<o)}(l,a,1)}const $b={},X2="__NG_DI_FLAG__",Xy="ngTempTokenPath",Boe=/\n/gm,$2="__source",Y2=ei({provide:String,useValue:ei});let Yb;function $y(l){const a=Yb;return Yb=l,a}function Goe(l,a=On.Default){if(void 0===Yb)throw new Error("inject() must be called from an injection context");return null===Yb?xf(l,void 0,a):Yb.get(l,a&On.Optional?null:void 0,a)}function be(l,a=On.Default){return(Cb||Goe)(In(l),a)}const zoe=be;function Cm(l){const a=[];for(let o=0;o<l.length;o++){const c=In(l[o]);if(Array.isArray(c)){if(0===c.length)throw new Error("Arguments array must have arguments.");let u,h=On.Default;for(let d=0;d<c.length;d++){const f=c[d],m=Hoe(f);"number"==typeof m?-1===m?u=f.token:h|=m:u=f}a.push(be(u,h))}else a.push(be(c))}return a}function Zb(l,a){return l[X2]=a,l.prototype[X2]=a,l}function Hoe(l){return l[X2]}function GU(l,a,o,c){const u=l[Xy];throw a[$2]&&u.unshift(a[$2]),l.message=function(l,a,o,c=null){l=l&&"\n"===l.charAt(0)&&"\u0275"==l.charAt(1)?l.substr(2):l;let u=vr(a);if(Array.isArray(a))u=a.map(vr).join(" -> ");else if("object"==typeof a){let h=[];for(let d in a)if(a.hasOwnProperty(d)){let f=a[d];h.push(d+":"+("string"==typeof f?JSON.stringify(f):vr(f)))}u=`{${h.join(", ")}}`}return`${o}${c?"("+c+")":""}[${u}]: ${l.replace(Boe,"\n  ")}`}("\n"+l.message,u,o,c),l.ngTokenPath=u,l[Xy]=null,l}const Yy=Zb(Tm("Inject",l=>({token:l})),-1),Zo=Zb(Tm("Optional"),8),Qc=Zb(Tm("SkipSelf"),4);let YC,ZC;function Ky(l){var a;return(null===(a=function(){if(void 0===YC&&(YC=null,er.trustedTypes))try{YC=er.trustedTypes.createPolicy("angular",{createHTML:l=>l,createScript:l=>l,createScriptURL:l=>l})}catch(l){}return YC}())||void 0===a?void 0:a.createHTML(l))||l}function qU(l){var a;return(null===(a=function(){if(void 0===ZC&&(ZC=null,er.trustedTypes))try{ZC=er.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:l=>l,createScript:l=>l,createScriptURL:l=>l})}catch(l){}return ZC}())||void 0===a?void 0:a.createHTML(l))||l}class xm{constructor(a){this.changingThisBreaksApplicationSecurity=a}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function Ul(l){return l instanceof xm?l.changingThisBreaksApplicationSecurity:l}function ih(l,a){const o=function(l){return l instanceof xm&&l.getTypeName()||null}(l);if(null!=o&&o!==a){if("ResourceURL"===o&&"URL"===a)return!0;throw new Error(`Required a safe ${a}, got a ${o} (see https://g.co/ng/security#xss)`)}return o===a}class uae{constructor(a){this.inertDocumentHelper=a}getInertBodyElement(a){a="<body><remove></remove>"+a;try{const o=(new window.DOMParser).parseFromString(Ky(a),"text/html").body;return null===o?this.inertDocumentHelper.getInertBodyElement(a):(o.removeChild(o.firstChild),o)}catch(o){return null}}}class hae{constructor(a){if(this.defaultDoc=a,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const o=this.inertDocument.createElement("html");this.inertDocument.appendChild(o);const c=this.inertDocument.createElement("body");o.appendChild(c)}}getInertBodyElement(a){const o=this.inertDocument.createElement("template");if("content"in o)return o.innerHTML=Ky(a),o;const c=this.inertDocument.createElement("body");return c.innerHTML=Ky(a),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(c),c}stripCustomNsAttrs(a){const o=a.attributes;for(let u=o.length-1;0<u;u--){const d=o.item(u).name;("xmlns:ns1"===d||0===d.indexOf("ns1:"))&&a.removeAttribute(d)}let c=a.firstChild;for(;c;)c.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(c),c=c.nextSibling}}const fae=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,pae=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function Jb(l){return(l=String(l)).match(fae)||l.match(pae)?l:"unsafe:"+l}function KU(l){return(l=String(l)).split(",").map(a=>Jb(a.trim())).join(", ")}function sh(l){const a={};for(const o of l.split(","))a[o]=!0;return a}function Qb(...l){const a={};for(const o of l)for(const c in o)o.hasOwnProperty(c)&&(a[c]=!0);return a}const JU=sh("area,br,col,hr,img,wbr"),QU=sh("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),eG=sh("rp,rt"),Q2=Qb(JU,Qb(QU,sh("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Qb(eG,sh("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Qb(eG,QU)),eP=sh("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),tP=sh("srcset"),tG=Qb(eP,tP,sh("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),sh("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),mae=sh("script,style,template");class gae{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(a){let o=a.firstChild,c=!0;for(;o;)if(o.nodeType===Node.ELEMENT_NODE?c=this.startElement(o):o.nodeType===Node.TEXT_NODE?this.chars(o.nodeValue):this.sanitizedSomething=!0,c&&o.firstChild)o=o.firstChild;else for(;o;){o.nodeType===Node.ELEMENT_NODE&&this.endElement(o);let u=this.checkClobberedElement(o,o.nextSibling);if(u){o=u;break}o=this.checkClobberedElement(o,o.parentNode)}return this.buf.join("")}startElement(a){const o=a.nodeName.toLowerCase();if(!Q2.hasOwnProperty(o))return this.sanitizedSomething=!0,!mae.hasOwnProperty(o);this.buf.push("<"),this.buf.push(o);const c=a.attributes;for(let u=0;u<c.length;u++){const h=c.item(u),d=h.name,f=d.toLowerCase();if(!tG.hasOwnProperty(f)){this.sanitizedSomething=!0;continue}let m=h.value;eP[f]&&(m=Jb(m)),tP[f]&&(m=KU(m)),this.buf.push(" ",d,'="',nG(m),'"')}return this.buf.push(">"),!0}endElement(a){const o=a.nodeName.toLowerCase();Q2.hasOwnProperty(o)&&!JU.hasOwnProperty(o)&&(this.buf.push("</"),this.buf.push(o),this.buf.push(">"))}chars(a){this.buf.push(nG(a))}checkClobberedElement(a,o){if(o&&(a.compareDocumentPosition(o)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${a.outerHTML}`);return o}}const yae=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,vae=/([^\#-~ |!])/g;function nG(l){return l.replace(/&/g,"&amp;").replace(yae,function(a){return"&#"+(1024*(a.charCodeAt(0)-55296)+(a.charCodeAt(1)-56320)+65536)+";"}).replace(vae,function(a){return"&#"+a.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let KC;function rG(l,a){let o=null;try{KC=KC||function(l){const a=new hae(l);return function(){try{return!!(new window.DOMParser).parseFromString(Ky(""),"text/html")}catch(l){return!1}}()?new uae(a):a}(l);let c=a?String(a):"";o=KC.getInertBodyElement(c);let u=5,h=c;do{if(0===u)throw new Error("Failed to sanitize html because the input is unstable");u--,c=h,h=o.innerHTML,o=KC.getInertBodyElement(c)}while(c!==h);return Ky((new gae).sanitizeChildren(nP(o)||o))}finally{if(o){const c=nP(o)||o;for(;c.firstChild;)c.removeChild(c.firstChild)}}}function nP(l){return"content"in l&&function(l){return l.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===l.nodeName}(l)?l.content:null}var Vi=(()=>((Vi=Vi||{})[Vi.NONE=0]="NONE",Vi[Vi.HTML=1]="HTML",Vi[Vi.STYLE=2]="STYLE",Vi[Vi.SCRIPT=3]="SCRIPT",Vi[Vi.URL=4]="URL",Vi[Vi.RESOURCE_URL=5]="RESOURCE_URL",Vi))();function JC(l){const a=eS();return a?qU(a.sanitize(Vi.HTML,l)||""):ih(l,"HTML")?qU(Ul(l)):rG(Oy(),lr(l))}function Jy(l){const a=eS();return a?a.sanitize(Vi.URL,l)||"":ih(l,"URL")?Ul(l):Jb(lr(l))}function eS(){const l=bt();return l&&l[12]}const oG="__ngContext__";function ha(l,a){l[oG]=a}function iP(l){const a=function(l){return l[oG]||null}(l);return a?Array.isArray(a)?a:a.lView:null}function QC(l){return l.ngOriginalError}function Nae(l,...a){l.error(...a)}class Em{constructor(){this._console=console}handleError(a){const o=this._findOriginalError(a),c=this._findContext(a),u=function(l){return l&&l.ngErrorLogger||Nae}(a);u(this._console,"ERROR",a),o&&u(this._console,"ORIGINAL ERROR",o),c&&u(this._console,"ERROR CONTEXT",c)}_findContext(a){return a?function(l){return l.ngDebugContext}(a)||this._findContext(QC(a)):null}_findOriginalError(a){let o=a&&QC(a);for(;o&&QC(o);)o=QC(o);return o||null}}const mG=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(er))();function gG(l){return l.ownerDocument.defaultView}function nS(l){return l.ownerDocument}function oh(l){return l instanceof Function?l():l}var Gl=(()=>((Gl=Gl||{})[Gl.Important=1]="Important",Gl[Gl.DashCase=2]="DashCase",Gl))();function aP(l,a){return undefined(l,a)}function rS(l){const a=l[3];return Fl(a)?a[3]:a}function lP(l){return TG(l[13])}function cP(l){return TG(l[4])}function TG(l){for(;null!==l&&!Fl(l);)l=l[4];return l}function ev(l,a,o,c,u){if(null!=c){let h,d=!1;Fl(c)?h=c:qo(c)&&(d=!0,c=c[0]);const f=is(c);0===l&&null!==o?null==u?DG(a,o,f):Mm(a,o,f,u||null,!0):1===l&&null!==o?Mm(a,o,f,u||null,!0):2===l?function(l,a,o){const c=tx(l,a);c&&function(l,a,o,c){Kr(l)?l.removeChild(a,o,c):a.removeChild(o)}(l,c,a,o)}(a,f,d):3===l&&a.destroyNode(f),null!=h&&function(l,a,o,c,u){const h=o[7];h!==is(o)&&ev(a,l,c,h,u);for(let f=10;f<o.length;f++){const m=o[f];iS(m[1],m,l,a,c,h)}}(a,l,h,o,u)}}function hP(l,a,o){return Kr(l)?l.createElement(a,o):null===o?l.createElement(a):l.createElementNS(o,a)}function CG(l,a){const o=l[9],c=o.indexOf(a),u=a[3];1024&a[2]&&(a[2]&=-1025,Fy(u,-1)),o.splice(c,1)}function dP(l,a){if(l.length<=10)return;const o=10+a,c=l[o];if(c){const u=c[17];null!==u&&u!==l&&CG(u,c),a>0&&(l[o-1][4]=c[4]);const h=wm(l,10+a);!function(l,a){iS(l,a,a[11],2,null,null),a[0]=null,a[6]=null}(c[1],c);const d=h[19];null!==d&&d.detachView(h[1]),c[3]=null,c[4]=null,c[2]&=-129}return c}function xG(l,a){if(!(256&a[2])){const o=a[11];Kr(o)&&o.destroyNode&&iS(l,a,o,3,null,null),function(l){let a=l[13];if(!a)return fP(l[1],l);for(;a;){let o=null;if(qo(a))o=a[13];else{const c=a[10];c&&(o=c)}if(!o){for(;a&&!a[4]&&a!==l;)qo(a)&&fP(a[1],a),a=a[3];null===a&&(a=l),qo(a)&&fP(a[1],a),o=a&&a[4]}a=o}}(a)}}function fP(l,a){if(!(256&a[2])){a[2]&=-129,a[2]|=256,function(l,a){let o;if(null!=l&&null!=(o=l.destroyHooks))for(let c=0;c<o.length;c+=2){const u=a[o[c]];if(!(u instanceof Ub)){const h=o[c+1];if(Array.isArray(h))for(let d=0;d<h.length;d+=2){const f=u[h[d]],m=h[d+1];try{m.call(f)}finally{}}else try{h.call(u)}finally{}}}}(l,a),function(l,a){const o=l.cleanup,c=a[7];let u=-1;if(null!==o)for(let h=0;h<o.length-1;h+=2)if("string"==typeof o[h]){const d=o[h+1],f="function"==typeof d?d(a):is(a[d]),m=c[u=o[h+2]],g=o[h+3];"boolean"==typeof g?f.removeEventListener(o[h],m,g):g>=0?c[u=g]():c[u=-g].unsubscribe(),h+=2}else{const d=c[u=o[h+1]];o[h].call(d)}if(null!==c){for(let h=u+1;h<c.length;h++)c[h]();a[7]=null}}(l,a),1===a[1].type&&Kr(a[11])&&a[11].destroy();const o=a[17];if(null!==o&&Fl(a[3])){o!==a[3]&&CG(o,a);const c=a[19];null!==c&&c.detachView(l)}}}function EG(l,a,o){return function(l,a,o){let c=a;for(;null!==c&&40&c.type;)c=(a=c).parent;if(null===c)return o[0];if(2&c.flags){const u=l.data[c.directiveStart].encapsulation;if(u===Ki.None||u===Ki.Emulated)return null}return ol(c,o)}(l,a.parent,o)}function Mm(l,a,o,c,u){Kr(l)?l.insertBefore(a,o,c,u):a.insertBefore(o,c,u)}function DG(l,a,o){Kr(l)?l.appendChild(a,o):a.appendChild(o)}function AG(l,a,o,c,u){null!==c?Mm(l,a,o,c,u):DG(l,a,o)}function tx(l,a){return Kr(l)?l.parentNode(a):a.parentNode}function IG(l,a,o){return PG(l,a,o)}let PG=function(l,a,o){return 40&l.type?ol(l,o):null};function nx(l,a,o,c){const u=EG(l,c,a),h=a[11],f=IG(c.parent||a[6],c,a);if(null!=u)if(Array.isArray(o))for(let m=0;m<o.length;m++)AG(h,u,o[m],f,!1);else AG(h,u,o,f,!1)}function rx(l,a){if(null!==a){const o=a.type;if(3&o)return ol(a,l);if(4&o)return mP(-1,l[a.index]);if(8&o){const c=a.child;if(null!==c)return rx(l,c);{const u=l[a.index];return Fl(u)?mP(-1,u):is(u)}}if(32&o)return aP(a,l)()||is(l[a.index]);{const c=OG(l,a);return null!==c?Array.isArray(c)?c[0]:rx(rS(l[16]),c):rx(l,a.next)}}return null}function OG(l,a){return null!==a?l[16][6].projection[a.projection]:null}function mP(l,a){const o=10+l+1;if(o<a.length){const c=a[o],u=c[1].firstChild;if(null!==u)return rx(c,u)}return a[7]}function gP(l,a,o,c,u,h,d){for(;null!=o;){const f=c[o.index],m=o.type;if(d&&0===a&&(f&&ha(is(f),c),o.flags|=4),64!=(64&o.flags))if(8&m)gP(l,a,o.child,c,u,h,!1),ev(a,l,u,f,h);else if(32&m){const g=aP(o,c);let y;for(;y=g();)ev(a,l,u,y,h);ev(a,l,u,f,h)}else 16&m?FG(l,a,c,o,u,h):ev(a,l,u,f,h);o=d?o.projectionNext:o.next}}function iS(l,a,o,c,u,h){gP(o,c,l.firstChild,a,u,h,!1)}function FG(l,a,o,c,u,h){const d=o[16],m=d[6].projection[c.projection];if(Array.isArray(m))for(let g=0;g<m.length;g++)ev(a,l,u,m[g],h);else gP(l,a,m,d[3],u,h,!0)}function kG(l,a,o){Kr(l)?l.setAttribute(a,"style",o):a.style.cssText=o}function yP(l,a,o){Kr(l)?""===o?l.removeAttribute(a,"class"):l.setAttribute(a,"class",o):a.className=o}function VG(l,a,o){let c=l.length;for(;;){const u=l.indexOf(a,o);if(-1===u)return u;if(0===u||l.charCodeAt(u-1)<=32){const h=a.length;if(u+h===c||l.charCodeAt(u+h)<=32)return u}o=u+1}}const BG="ng-template";function ile(l,a,o){let c=0;for(;c<l.length;){let u=l[c++];if(o&&"class"===u){if(u=l[c],-1!==VG(u.toLowerCase(),a,0))return!0}else if(1===u){for(;c<l.length&&"string"==typeof(u=l[c++]);)if(u.toLowerCase()===a)return!0;return!1}}return!1}function UG(l){return 4===l.type&&l.value!==BG}function sle(l,a,o){return a===(4!==l.type||o?l.value:BG)}function ole(l,a,o){let c=4;const u=l.attrs||[],h=function(l){for(let a=0;a<l.length;a++)if(xU(l[a]))return a;return l.length}(u);let d=!1;for(let f=0;f<a.length;f++){const m=a[f];if("number"!=typeof m){if(!d)if(4&c){if(c=2|1&c,""!==m&&!sle(l,m,o)||""===m&&1===a.length){if(eu(c))return!1;d=!0}}else{const g=8&c?m:a[++f];if(8&c&&null!==l.attrs){if(!ile(l.attrs,g,o)){if(eu(c))return!1;d=!0}continue}const v=ale(8&c?"class":m,u,UG(l),o);if(-1===v){if(eu(c))return!1;d=!0;continue}if(""!==g){let _;_=v>h?"":u[v+1].toLowerCase();const b=8&c?_:null;if(b&&-1!==VG(b,g,0)||2&c&&g!==_){if(eu(c))return!1;d=!0}}}}else{if(!d&&!eu(c)&&!eu(m))return!1;if(d&&eu(m))continue;d=!1,c=m|1&c}}return eu(c)||d}function eu(l){return 0==(1&l)}function ale(l,a,o,c){if(null===a)return-1;let u=0;if(c||!o){let h=!1;for(;u<a.length;){const d=a[u];if(d===l)return u;if(3===d||6===d)h=!0;else{if(1===d||2===d){let f=a[++u];for(;"string"==typeof f;)f=a[++u];continue}if(4===d)break;if(0===d){u+=4;continue}}u+=h?1:2}return-1}return function(l,a){let o=l.indexOf(4);if(o>-1)for(o++;o<l.length;){const c=l[o];if("number"==typeof c)return-1;if(c===a)return o;o++}return-1}(a,l)}function GG(l,a,o=!1){for(let c=0;c<a.length;c++)if(ole(l,a[c],o))return!0;return!1}function hle(l,a){e:for(let o=0;o<a.length;o++){const c=a[o];if(l.length===c.length){for(let u=0;u<l.length;u++)if(l[u]!==c[u])continue e;return!0}}return!1}function zG(l,a){return l?":not("+a.trim()+")":a}function dle(l){let a=l[0],o=1,c=2,u="",h=!1;for(;o<l.length;){let d=l[o];if("string"==typeof d)if(2&c){const f=l[++o];u+="["+d+(f.length>0?'="'+f+'"':"")+"]"}else 8&c?u+="."+d:4&c&&(u+=" "+d);else""!==u&&!eu(d)&&(a+=zG(h,u),u=""),c=d,h=h||!eu(c);o++}return""!==u&&(a+=zG(h,u)),a}const dr={};function j(l){HG($r(),bt(),Yo()+l,H())}function HG(l,a,o,c){if(!c)if(3==(3&a[2])){const h=l.preOrderCheckHooks;null!==h&&FC(a,h,o)}else{const h=l.preOrderHooks;null!==h&&kC(a,h,0,o)}Jc(o)}function ix(l,a){return l<<17|a<<2}function tu(l){return l>>17&32767}function vP(l){return 2|l}function vd(l){return(131068&l)>>2}function _P(l,a){return-131069&l|a<<2}function bP(l){return 1|l}function QG(l,a){const o=l.contentQueries;if(null!==o)for(let c=0;c<o.length;c+=2){const u=o[c],h=o[c+1];if(-1!==h){const d=l.data[h];cr(u),d.contentQueries(2,a[h],h)}}}function sS(l,a,o,c,u,h,d,f,m,g){const y=a.blueprint.slice();return y[0]=u,y[2]=140|c,Nb(y),y[3]=y[15]=l,y[8]=o,y[10]=d||l&&l[10],y[11]=f||l&&l[11],y[12]=m||l&&l[12]||null,y[9]=g||l&&l[9]||null,y[6]=h,y[16]=2==a.type?l[16]:y,y}function tv(l,a,o,c,u){let h=l.data[a];if(null===h)h=function(l,a,o,c,u){const h=kb(),d=ss(),m=l.data[a]=function(l,a,o,c,u,h){return{type:o,index:c,insertBeforeIndex:null,injectorIndex:a?a.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:u,attrs:h,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:a,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,d?h:h&&h.parent,o,a,c,u);return null===l.firstChild&&(l.firstChild=m),null!==h&&(d?null==h.child&&null!==m.parent&&(h.child=m):null===h.next&&(h.next=m)),m}(l,a,o,c,u),jn.lFrame.inI18n&&(h.flags|=64);else if(64&h.type){h.type=o,h.value=c,h.attrs=u;const d=function(){const l=jn.lFrame,a=l.currentTNode;return l.isParent?a:a.parent}();h.injectorIndex=null===d?-1:d.injectorIndex}return Vl(h,!0),h}function nv(l,a,o,c){if(0===o)return-1;const u=a.length;for(let h=0;h<o;h++)a.push(c),l.blueprint.push(c),l.data.push(null);return u}function oS(l,a,o){Ms(a);try{const c=l.viewQuery;null!==c&&FP(1,c,o);const u=l.template;null!==u&&e6(l,a,u,1,o),l.firstCreatePass&&(l.firstCreatePass=!1),l.staticContentQueries&&QG(l,a),l.staticViewQueries&&FP(2,l.viewQuery,o);const h=l.components;null!==h&&function(l,a){for(let o=0;o<a.length;o++)Wle(l,a[o])}(a,h)}catch(c){throw l.firstCreatePass&&(l.incompleteFirstPass=!0,l.firstCreatePass=!1),c}finally{a[2]&=-5,Vy()}}function rv(l,a,o,c){const u=a[2];if(256==(256&u))return;Ms(a);const h=H();try{Nb(a),function(l){jn.lFrame.bindingIndex=l}(l.bindingStartIndex),null!==o&&e6(l,a,o,2,c);const d=3==(3&u);if(!h)if(d){const g=l.preOrderCheckHooks;null!==g&&FC(a,g,null)}else{const g=l.preOrderHooks;null!==g&&kC(a,g,0,null),k2(a,0)}if(function(l){for(let a=lP(l);null!==a;a=cP(a)){if(!a[2])continue;const o=a[9];for(let c=0;c<o.length;c++){const u=o[c],h=u[3];0==(1024&u[2])&&Fy(h,1),u[2]|=1024}}}(a),function(l){for(let a=lP(l);null!==a;a=cP(a))for(let o=10;o<a.length;o++){const c=a[o],u=c[1];Rf(c)&&rv(u,c,u.template,c[8])}}(a),null!==l.contentQueries&&QG(l,a),!h)if(d){const g=l.contentCheckHooks;null!==g&&FC(a,g)}else{const g=l.contentHooks;null!==g&&kC(a,g,1),k2(a,1)}!function(l,a){const o=l.hostBindingOpCodes;if(null!==o)try{for(let c=0;c<o.length;c++){const u=o[c];if(u<0)Jc(~u);else{const h=u,d=o[++c],f=o[++c];Pt(d,h),f(2,a[h])}}}finally{Jc(-1)}}(l,a);const f=l.components;null!==f&&function(l,a){for(let o=0;o<a.length;o++)jle(l,a[o])}(a,f);const m=l.viewQuery;if(null!==m&&FP(2,m,c),!h)if(d){const g=l.viewCheckHooks;null!==g&&FC(a,g)}else{const g=l.viewHooks;null!==g&&kC(a,g,2),k2(a,2)}!0===l.firstUpdatePass&&(l.firstUpdatePass=!1),h||(a[2]&=-73),1024&a[2]&&(a[2]&=-1025,Fy(a[3],-1))}finally{Vy()}}function xle(l,a,o,c){const u=a[10],h=!H(),d=Lb(a);try{h&&!d&&u.begin&&u.begin(),d&&oS(l,a,c),rv(l,a,o,c)}finally{h&&!d&&u.end&&u.end()}}function e6(l,a,o,c,u){const h=Yo(),d=2&c;try{Jc(-1),d&&a.length>20&&HG(l,a,20,H()),o(c,u)}finally{Jc(h)}}function t6(l,a,o){if(nh(a)){const u=a.directiveEnd;for(let h=a.directiveStart;h<u;h++){const d=l.data[h];d.contentQueries&&d.contentQueries(1,o[h],h)}}}function DP(l,a,o){!Fb()||(function(l,a,o,c){const u=o.directiveStart,h=o.directiveEnd;l.firstCreatePass||zb(o,a),ha(c,a);const d=o.initialInputs;for(let f=u;f<h;f++){const m=l.data[f],g=kl(m);g&&Ble(a,o,m);const y=Hb(a,l,f,o);ha(y,a),null!==d&&Ule(0,f-u,y,m,0,d),g&&($o(o.index,a)[8]=y)}}(l,a,o,ol(o,a)),128==(128&o.flags)&&function(l,a,o){const c=o.directiveStart,u=o.directiveEnd,d=o.index,f=jn.lFrame.currentDirectiveIndex;try{Jc(d);for(let m=c;m<u;m++){const g=l.data[m],y=a[m];Dt(m),(null!==g.hostBindings||0!==g.hostVars||null!==g.hostAttrs)&&c6(g,y)}}finally{Jc(-1),Dt(f)}}(l,a,o))}function AP(l,a,o=ol){const c=a.localNames;if(null!==c){let u=a.index+1;for(let h=0;h<c.length;h+=2){const d=c[h+1],f=-1===d?o(a,l):l[d];l[u++]=f}}}function n6(l){const a=l.tView;return null===a||a.incompleteFirstPass?l.tView=ax(1,null,l.template,l.decls,l.vars,l.directiveDefs,l.pipeDefs,l.viewQuery,l.schemas,l.consts):a}function ax(l,a,o,c,u,h,d,f,m,g){const y=20+c,v=y+u,_=function(l,a){const o=[];for(let c=0;c<a;c++)o.push(c<l?null:dr);return o}(y,v),b="function"==typeof g?g():g;return _[1]={type:l,blueprint:_,template:o,queries:null,viewQuery:f,declTNode:a,data:_.slice().fill(null,y),bindingStartIndex:y,expandoStartIndex:v,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof h?h():h,pipeRegistry:"function"==typeof d?d():d,firstChild:null,schemas:m,consts:b,incompleteFirstPass:!1}}function s6(l,a,o,c){const u=m6(a);null===o?u.push(c):(u.push(o),l.firstCreatePass&&g6(l).push(c,u.length-1))}function o6(l,a,o){for(let c in l)if(l.hasOwnProperty(c)){const u=l[c];(o=null===o?{}:o).hasOwnProperty(c)?o[c].push(a,u):o[c]=[a,u]}return o}function zl(l,a,o,c,u,h,d,f){const m=ol(a,o);let y,g=a.inputs;!f&&null!=g&&(y=g[c])?(_6(l,o,y,c,u),Dy(a)&&function(l,a){const o=$o(a,l);16&o[2]||(o[2]|=64)}(o,a.index)):3&a.type&&(c=function(l){return"class"===l?"className":"for"===l?"htmlFor":"formaction"===l?"formAction":"innerHtml"===l?"innerHTML":"readonly"===l?"readOnly":"tabindex"===l?"tabIndex":l}(c),u=null!=d?d(u,a.value||"",c):u,Kr(h)?h.setProperty(m,c,u):B2(c)||(m.setProperty?m.setProperty(c,u):m[c]=u))}function IP(l,a,o,c){let u=!1;if(Fb()){const h=function(l,a,o){const c=l.directiveRegistry;let u=null;if(c)for(let h=0;h<c.length;h++){const d=c[h];GG(o,d.selectors,!1)&&(u||(u=[]),zC(zb(o,a),l,d.type),kl(d)?(u6(l,o),u.unshift(d)):u.push(d))}return u}(l,a,o),d=null===c?null:{"":-1};if(null!==h){u=!0,h6(o,l.data.length,h.length);for(let y=0;y<h.length;y++){const v=h[y];v.providersResolver&&v.providersResolver(v)}let f=!1,m=!1,g=nv(l,a,h.length,null);for(let y=0;y<h.length;y++){const v=h[y];o.mergedAttrs=BC(o.mergedAttrs,v.hostAttrs),d6(l,o,a,g,v),Vle(g,v,d),null!==v.contentQueries&&(o.flags|=8),(null!==v.hostBindings||null!==v.hostAttrs||0!==v.hostVars)&&(o.flags|=128);const _=v.type.prototype;!f&&(_.ngOnChanges||_.ngOnInit||_.ngDoCheck)&&((l.preOrderHooks||(l.preOrderHooks=[])).push(o.index),f=!0),!m&&(_.ngOnChanges||_.ngDoCheck)&&((l.preOrderCheckHooks||(l.preOrderCheckHooks=[])).push(o.index),m=!0),g++}!function(l,a){const c=a.directiveEnd,u=l.data,h=a.attrs,d=[];let f=null,m=null;for(let g=a.directiveStart;g<c;g++){const y=u[g],v=y.inputs,_=null===h||UG(a)?null:Gle(v,h);d.push(_),f=o6(v,g,f),m=o6(y.outputs,g,m)}null!==f&&(f.hasOwnProperty("class")&&(a.flags|=16),f.hasOwnProperty("style")&&(a.flags|=32)),a.initialInputs=d,a.inputs=f,a.outputs=m}(l,o)}d&&function(l,a,o){if(a){const c=l.localNames=[];for(let u=0;u<a.length;u+=2){const h=o[a[u+1]];if(null==h)throw new Yu("301",`Export of name '${a[u+1]}' not found!`);c.push(a[u],h)}}}(o,c,d)}return o.mergedAttrs=BC(o.mergedAttrs,o.attrs),u}function l6(l,a,o,c,u,h){const d=h.hostBindings;if(d){let f=l.hostBindingOpCodes;null===f&&(f=l.hostBindingOpCodes=[]);const m=~a.index;(function(l){let a=l.length;for(;a>0;){const o=l[--a];if("number"==typeof o&&o<0)return o}return 0})(f)!=m&&f.push(m),f.push(c,u,d)}}function c6(l,a){null!==l.hostBindings&&l.hostBindings(1,a)}function u6(l,a){a.flags|=2,(l.components||(l.components=[])).push(a.index)}function Vle(l,a,o){if(o){if(a.exportAs)for(let c=0;c<a.exportAs.length;c++)o[a.exportAs[c]]=l;kl(a)&&(o[""]=l)}}function h6(l,a,o){l.flags|=1,l.directiveStart=a,l.directiveEnd=a+o,l.providerIndexes=a}function d6(l,a,o,c,u){l.data[c]=u;const h=u.factory||(u.factory=ho(u.type)),d=new Ub(h,kl(u),null);l.blueprint[c]=d,o[c]=d,l6(l,a,0,c,nv(l,o,u.hostVars,dr),u)}function Ble(l,a,o){const c=ol(a,l),u=n6(o),h=l[10],d=lx(l,sS(l,u,null,o.onPush?64:16,c,a,h,h.createRenderer(c,o),null,null));l[a.index]=d}function ah(l,a,o,c,u,h){const d=ol(l,a);!function(l,a,o,c,u,h,d){if(null==h)Kr(l)?l.removeAttribute(a,u,o):a.removeAttribute(u);else{const f=null==d?lr(h):d(h,c||"",u);Kr(l)?l.setAttribute(a,u,f,o):o?a.setAttributeNS(o,u,f):a.setAttribute(u,f)}}(a[11],d,h,l.value,o,c,u)}function Ule(l,a,o,c,u,h){const d=h[a];if(null!==d){const f=c.setInput;for(let m=0;m<d.length;){const g=d[m++],y=d[m++],v=d[m++];null!==f?c.setInput(o,v,g,y):o[y]=v}}}function Gle(l,a){let o=null,c=0;for(;c<a.length;){const u=a[c];if(0!==u)if(5!==u){if("number"==typeof u)break;l.hasOwnProperty(u)&&(null===o&&(o=[]),o.push(u,l[u],a[c+1])),c+=2}else c+=2;else c+=4}return o}function f6(l,a,o,c){return new Array(l,!0,!1,a,null,0,c,o,null,null)}function jle(l,a){const o=$o(a,l);if(Rf(o)){const c=o[1];80&o[2]?rv(c,o,c.template,o[8]):o[5]>0&&PP(o)}}function PP(l){for(let c=lP(l);null!==c;c=cP(c))for(let u=10;u<c.length;u++){const h=c[u];if(1024&h[2]){const d=h[1];rv(d,h,d.template,h[8])}else h[5]>0&&PP(h)}const o=l[1].components;if(null!==o)for(let c=0;c<o.length;c++){const u=$o(o[c],l);Rf(u)&&u[5]>0&&PP(u)}}function Wle(l,a){const o=$o(a,l),c=o[1];(function(l,a){for(let o=a.length;o<l.blueprint.length;o++)a.push(l.blueprint[o])})(c,o),oS(c,o,o[8])}function lx(l,a){return l[13]?l[14][4]=a:l[13]=a,l[14]=a,a}function LP(l){for(;l;){l[2]|=64;const a=rS(l);if(TC(l)&&!a)return l;l=a}return null}function NP(l,a,o){const c=a[10];c.begin&&c.begin();try{rv(l,a,l.template,o)}catch(u){throw v6(a,u),u}finally{c.end&&c.end()}}function p6(l){!function(l){for(let a=0;a<l.components.length;a++){const o=l.components[a],c=iP(o),u=c[1];xle(u,c,u.template,o)}}(l[8])}function FP(l,a,o){cr(0),a(l,o)}const Zle=(()=>Promise.resolve(null))();function m6(l){return l[7]||(l[7]=[])}function g6(l){return l.cleanup||(l.cleanup=[])}function y6(l,a,o){return(null===l||kl(l))&&(o=function(l){for(;Array.isArray(l);){if("object"==typeof l[1])return l;l=l[0]}return null}(o[a.index])),o[11]}function v6(l,a){const o=l[9],c=o?o.get(Em,null):null;c&&c.handleError(a)}function _6(l,a,o,c,u){for(let h=0;h<o.length;){const d=o[h++],f=o[h++],m=a[d],g=l.data[d];null!==g.setInput?g.setInput(m,u,c,f):m[f]=u}}function bd(l,a,o){const c=_m(a,l);!function(l,a,o){Kr(l)?l.setValue(a,o):a.textContent=o}(l[11],c,o)}function cx(l,a,o){let c=o?l.styles:null,u=o?l.classes:null,h=0;if(null!==a)for(let d=0;d<a.length;d++){const f=a[d];"number"==typeof f?h=f:1==h?u=vb(u,f):2==h&&(c=vb(c,f+": "+a[++d]+";"))}o?l.styles=c:l.stylesWithoutHost=c,o?l.classes=u:l.classesWithoutHost=u}const iv=new Sn("INJECTOR",-1);class b6{get(a,o=$b){if(o===$b){const c=new Error(`NullInjectorError: No provider for ${vr(a)}!`);throw c.name="NullInjectorError",c}return o}}const aS=new Sn("Set Injector scope."),lS={},Qle={};let kP;function S6(){return void 0===kP&&(kP=new b6),kP}function T6(l,a=null,o=null,c){return new tce(l,o,a||S6(),c)}class tce{constructor(a,o,c,u=null){this.parent=c,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const h=[];o&&rh(o,f=>this.processProvider(f,a,o)),rh([a],f=>this.processInjectorType(f,[],h)),this.records.set(iv,sv(void 0,this));const d=this.records.get(aS);this.scope=null!=d?d.value:null,this.source=u||("object"==typeof a?null:vr(a))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(a=>a.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(a,o=$b,c=On.Default){this.assertNotDestroyed();const u=$y(this),h=Ku(void 0);try{if(!(c&On.SkipSelf)){let f=this.records.get(a);if(void 0===f){const m=function(l){return"function"==typeof l||"object"==typeof l&&l instanceof Sn}(a)&&yc(a);f=m&&this.injectableDefInScope(m)?sv(VP(a),lS):null,this.records.set(a,f)}if(null!=f)return this.hydrate(a,f)}return(c&On.Self?S6():this.parent).get(a,o=c&On.Optional&&o===$b?null:o)}catch(d){if("NullInjectorError"===d.name){if((d[Xy]=d[Xy]||[]).unshift(vr(a)),u)throw d;return GU(d,a,"R3InjectorError",this.source)}throw d}finally{Ku(h),$y(u)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(a=>this.get(a))}toString(){const a=[];return this.records.forEach((c,u)=>a.push(vr(u))),`R3Injector[${a.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(a,o,c){if(!(a=In(a)))return!1;let u=Sb(a);const h=null==u&&a.ngModule||void 0,d=void 0===h?a:h,f=-1!==c.indexOf(d);if(void 0!==h&&(u=Sb(h)),null==u)return!1;if(null!=u.imports&&!f){let y;c.push(d);try{rh(u.imports,v=>{this.processInjectorType(v,o,c)&&(void 0===y&&(y=[]),y.push(v))})}finally{}if(void 0!==y)for(let v=0;v<y.length;v++){const{ngModule:_,providers:b}=y[v];rh(b,w=>this.processProvider(w,_,b||di))}}this.injectorDefTypes.add(d);const m=ho(d)||(()=>new d);this.records.set(d,sv(m,lS));const g=u.providers;if(null!=g&&!f){const y=a;rh(g,v=>this.processProvider(v,y,g))}return void 0!==h&&void 0!==a.providers}processProvider(a,o,c){let u=ov(a=In(a))?a:In(a&&a.provide);const h=function(l,a,o){return C6(l)?sv(void 0,l.useValue):sv(w6(l),lS)}(a);if(ov(a)||!0!==a.multi)this.records.get(u);else{let d=this.records.get(u);d||(d=sv(void 0,lS,!0),d.factory=()=>Cm(d.multi),this.records.set(u,d)),u=a,d.multi.push(a)}this.records.set(u,h)}hydrate(a,o){return o.value===lS&&(o.value=Qle,o.value=o.factory()),"object"==typeof o.value&&o.value&&function(l){return null!==l&&"object"==typeof l&&"function"==typeof l.ngOnDestroy}(o.value)&&this.onDestroy.add(o.value),o.value}injectableDefInScope(a){if(!a.providedIn)return!1;const o=In(a.providedIn);return"string"==typeof o?"any"===o||o===this.scope:this.injectorDefTypes.has(o)}}function VP(l){const a=yc(l),o=null!==a?a.factory:ho(l);if(null!==o)return o;if(l instanceof Sn)throw new Error(`Token ${vr(l)} is missing a \u0275prov definition.`);if(l instanceof Function)return function(l){const a=l.length;if(a>0){const c=Ff(a,"?");throw new Error(`Can't resolve all parameters for ${vr(l)}: (${c.join(", ")}).`)}const o=function(l){const a=l&&(l[Zi]||l[Ty]);if(a){const o=function(l){if(l.hasOwnProperty("name"))return l.name;const a=(""+l).match(/^function\s*([^\s(]+)/);return null===a?"":a[1]}(l);return console.warn(`DEPRECATED: DI is instantiating a token "${o}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${o}" class.`),a}return null}(l);return null!==o?()=>o.factory(l):()=>new l}(l);throw new Error("unreachable")}function w6(l,a,o){let c;if(ov(l)){const u=In(l);return ho(u)||VP(u)}if(C6(l))c=()=>In(l.useValue);else if(function(l){return!(!l||!l.useFactory)}(l))c=()=>l.useFactory(...Cm(l.deps||[]));else if(function(l){return!(!l||!l.useExisting)}(l))c=()=>be(In(l.useExisting));else{const u=In(l&&(l.useClass||l.provide));if(!function(l){return!!l.deps}(l))return ho(u)||VP(u);c=()=>new u(...Cm(l.deps))}return c}function sv(l,a,o=!1){return{factory:l,value:a,multi:o?[]:void 0}}function C6(l){return null!==l&&"object"==typeof l&&Y2 in l}function ov(l){return"function"==typeof l}const x6=function(l,a,o){return function(l,a=null,o=null,c){const u=T6(l,a,o,c);return u._resolveInjectorDefTypes(),u}({name:o},a,l,o)};let Qn=(()=>{class l{static create(o,c){return Array.isArray(o)?x6(o,c,""):x6(o.providers,o.parent,o.name||"")}}return l.THROW_IF_NOT_FOUND=$b,l.NULL=new b6,l.\u0275prov=Xe({token:l,providedIn:"any",factory:()=>be(iv)}),l.__NG_ELEMENT_ID__=-1,l})();function Tce(l,a){NC(iP(l)[1],Es())}function on(l){let a=function(l){return Object.getPrototypeOf(l.prototype).constructor}(l.type),o=!0;const c=[l];for(;a;){let u;if(kl(l))u=a.\u0275cmp||a.\u0275dir;else{if(a.\u0275cmp)throw new Error("Directives cannot inherit Components");u=a.\u0275dir}if(u){if(o){c.push(u);const d=l;d.inputs=jP(l.inputs),d.declaredInputs=jP(l.declaredInputs),d.outputs=jP(l.outputs);const f=u.hostBindings;f&&Ece(l,f);const m=u.viewQuery,g=u.contentQueries;if(m&&Cce(l,m),g&&xce(l,g),yb(l.inputs,u.inputs),yb(l.declaredInputs,u.declaredInputs),yb(l.outputs,u.outputs),kl(u)&&u.data.animation){const y=l.data;y.animation=(y.animation||[]).concat(u.data.animation)}}const h=u.features;if(h)for(let d=0;d<h.length;d++){const f=h[d];f&&f.ngInherit&&f(l),f===on&&(o=!1)}}a=Object.getPrototypeOf(a)}!function(l){let a=0,o=null;for(let c=l.length-1;c>=0;c--){const u=l[c];u.hostVars=a+=u.hostVars,u.hostAttrs=BC(u.hostAttrs,o=BC(o,u.hostAttrs))}}(c)}function jP(l){return l===Ol?{}:l===di?[]:l}function Cce(l,a){const o=l.viewQuery;l.viewQuery=o?(c,u)=>{a(c,u),o(c,u)}:a}function xce(l,a){const o=l.contentQueries;l.contentQueries=o?(c,u,h)=>{a(c,u,h),o(c,u,h)}:a}function Ece(l,a){const o=l.hostBindings;l.hostBindings=o?(c,u)=>{a(c,u),o(c,u)}:a}let ux=null;function av(){if(!ux){const l=er.Symbol;if(l&&l.iterator)ux=l.iterator;else{const a=Object.getOwnPropertyNames(Map.prototype);for(let o=0;o<a.length;++o){const c=a[o];"entries"!==c&&"size"!==c&&Map.prototype[c]===Map.prototype.entries&&(ux=c)}}}return ux}class ru{constructor(a){this.wrapped=a}static wrap(a){return new ru(a)}static unwrap(a){return ru.isWrapped(a)?a.wrapped:a}static isWrapped(a){return a instanceof ru}}function uS(l){return!!WP(l)&&(Array.isArray(l)||!(l instanceof Map)&&av()in l)}function WP(l){return null!==l&&("function"==typeof l||"object"==typeof l)}function lh(l,a,o){return l[a]=o}function da(l,a,o){return!Object.is(l[a],o)&&(l[a]=o,!0)}function Dm(l,a,o,c){const u=da(l,a,o);return da(l,a+1,c)||u}function Ke(l,a,o,c){const u=bt();return da(u,ae(),a)&&($r(),ah(os(),u,l,a,o,c)),Ke}function cv(l,a,o,c){return da(l,ae(),o)?a+lr(o)+c:dr}function le(l,a,o,c,u,h,d,f){const m=bt(),g=$r(),y=l+20,v=g.firstCreatePass?function(l,a,o,c,u,h,d,f,m){const g=a.consts,y=tv(a,l,4,d||null,al(g,f));IP(a,o,y,al(g,m)),NC(a,y);const v=y.tViews=ax(2,y,c,u,h,a.directiveRegistry,a.pipeRegistry,null,a.schemas,g);return null!==a.queries&&(a.queries.template(a,y),v.queries=a.queries.embeddedTView(y)),y}(y,g,m,a,o,c,u,h,d):g.data[y];Vl(v,!1);const _=m[11].createComment("");nx(g,m,_,v),ha(_,m),lx(m,m[y]=f6(_,m,_,v)),vc(v)&&DP(g,m,v),null!=d&&AP(m,v,f)}function po(l){return gd(jn.lFrame.contextLView,20+l)}function O(l,a=On.Default){const o=bt();return null===o?be(l,a):PU(Es(),o,In(l),a)}function q(l,a,o){const c=bt();return da(c,ae(),a)&&zl($r(),os(),c,l,a,c[11],o,!1),q}function ZP(l,a,o,c,u){const d=u?"class":"style";_6(l,o,a.inputs[d],d,c)}function V(l,a,o,c){const u=bt(),h=$r(),d=20+l,f=u[11],m=u[d]=hP(f,a,jn.lFrame.currentNamespace),g=h.firstCreatePass?function(l,a,o,c,u,h,d){const f=a.consts,g=tv(a,l,2,u,al(f,h));return IP(a,o,g,al(f,d)),null!==g.attrs&&cx(g,g.attrs,!1),null!==g.mergedAttrs&&cx(g,g.mergedAttrs,!0),null!==a.queries&&a.queries.elementStart(a,g),g}(d,h,u,0,a,o,c):h.data[d];Vl(g,!0);const y=g.mergedAttrs;null!==y&&VC(f,m,y);const v=g.classes;null!==v&&yP(f,m,v);const _=g.styles;null!==_&&kG(f,m,_),64!=(64&g.flags)&&nx(h,u,m,g),0===jn.lFrame.elementDepthCount&&ha(m,u),jn.lFrame.elementDepthCount++,vc(g)&&(DP(h,u,g),t6(h,g,u)),null!==c&&AP(u,g)}function B(){let l=Es();ss()?yd():(l=l.parent,Vl(l,!1));const a=l;jn.lFrame.elementDepthCount--;const o=$r();o.firstCreatePass&&(NC(o,l),nh(l)&&o.queries.elementEnd(l)),null!=a.classesWithoutHost&&function(l){return 0!=(16&l.flags)}(a)&&ZP(o,a,bt(),a.classesWithoutHost,!0),null!=a.stylesWithoutHost&&function(l){return 0!=(32&l.flags)}(a)&&ZP(o,a,bt(),a.stylesWithoutHost,!1)}function xe(l,a,o,c){V(l,a,o,c),B()}function Jr(l,a,o){const c=bt(),u=$r(),h=l+20,d=u.firstCreatePass?function(l,a,o,c,u){const h=a.consts,d=al(h,c),f=tv(a,l,8,"ng-container",d);return null!==d&&cx(f,d,!0),IP(a,o,f,al(h,u)),null!==a.queries&&a.queries.elementStart(a,f),f}(h,u,c,a,o):u.data[h];Vl(d,!0);const f=c[h]=c[11].createComment("");nx(u,c,f,d),ha(f,c),vc(d)&&(DP(u,c,d),t6(u,d,c)),null!=o&&AP(c,d)}function Qr(){let l=Es();const a=$r();ss()?yd():(l=l.parent,Vl(l,!1)),a.firstCreatePass&&(NC(a,l),nh(l)&&a.queries.elementEnd(l))}function ll(l,a,o){Jr(l,a,o),Qr()}function mn(){return bt()}function dS(l){return!!l&&"function"==typeof l.then}function cz(l){return!!l&&"function"==typeof l.subscribe}const fx=cz;function ze(l,a,o,c){const u=bt(),h=$r(),d=Es();return uz(h,u,u[11],d,l,a,!!o,c),ze}function KP(l,a){const o=Es(),c=bt(),u=$r();return uz(u,c,y6(vn(u.data),o,c),o,l,a,!1),KP}function uz(l,a,o,c,u,h,d,f){const m=vc(c),y=l.firstCreatePass&&g6(l),v=a[8],_=m6(a);let b=!0;if(3&c.type||f){const E=ol(c,a),M=f?f(E):E,x=_.length,R=f?P=>f(is(P[c.index])):c.index;if(Kr(o)){let P=null;if(!f&&m&&(P=function(l,a,o,c){const u=l.cleanup;if(null!=u)for(let h=0;h<u.length-1;h+=2){const d=u[h];if(d===o&&u[h+1]===c){const f=a[7],m=u[h+2];return f.length>m?f[m]:null}"string"==typeof d&&(h+=2)}return null}(l,a,u,c.index)),null!==P)(P.__ngLastListenerFn__||P).__ngNextListenerFn__=h,P.__ngLastListenerFn__=h,b=!1;else{h=JP(c,a,v,h,!1);const k=o.listen(M,u,h);_.push(h,k),y&&y.push(u,R,x,x+1)}}else h=JP(c,a,v,h,!0),M.addEventListener(u,h,d),_.push(h),y&&y.push(u,R,x,d)}else h=JP(c,a,v,h,!1);const w=c.outputs;let C;if(b&&null!==w&&(C=w[u])){const E=C.length;if(E)for(let M=0;M<E;M+=2){const W=a[C[M]][C[M+1]].subscribe(h),U=_.length;_.push(h,W),y&&y.push(u,c.index,U,-(U+1))}}}function hz(l,a,o,c){try{return!1!==o(c)}catch(u){return v6(l,u),!1}}function JP(l,a,o,c,u){return function h(d){if(d===Function)return c;const f=2&l.flags?$o(l.index,a):a;0==(32&a[2])&&LP(f);let m=hz(a,0,c,d),g=h.__ngNextListenerFn__;for(;g;)m=hz(a,0,g,d)&&m,g=g.__ngNextListenerFn__;return u&&!1===m&&(d.preventDefault(),d.returnValue=!1),m}}function ve(l=1){return function(l){return(jn.lFrame.contextLView=function(l,a){for(;l>0;)a=a[15],l--;return a}(l,jn.lFrame.contextLView))[8]}(l)}function oue(l,a){let o=null;const c=function(l){const a=l.attrs;if(null!=a){const o=a.indexOf(5);if(0==(1&o))return a[o+1]}return null}(l);for(let u=0;u<a.length;u++){const h=a[u];if("*"!==h){if(null===c?GG(l,h,!0):hle(c,h))return u}else o=u}return o}function Lt(l){const a=bt()[16][6];if(!a.projection){const c=a.projection=Ff(l?l.length:1,null),u=c.slice();let h=a.child;for(;null!==h;){const d=l?oue(h,l):0;null!==d&&(u[d]?u[d].projectionNext=h:c[d]=h,u[d]=h),h=h.next}}}function Be(l,a=0,o){const c=bt(),u=$r(),h=tv(u,20+l,16,null,o||null);null===h.projection&&(h.projection=a),yd(),64!=(64&h.flags)&&function(l,a,o){FG(a[11],0,a,o,EG(l,o,a),IG(o.parent||a[6],o,a))}(u,c,h)}function cl(l,a,o){return vv(l,"",a,"",o),cl}function vv(l,a,o,c,u){const h=bt(),d=cv(h,a,o,c);return d!==dr&&zl($r(),os(),h,l,d,h[11],u,!1),vv}function bz(l,a,o,c,u){const h=l[o+1],d=null===a;let f=c?tu(h):vd(h),m=!1;for(;0!==f&&(!1===m||d);){const y=l[f+1];cue(l[f],a)&&(m=!0,l[f+1]=c?bP(y):vP(y)),f=c?tu(y):vd(y)}m&&(l[o+1]=c?vP(h):bP(h))}function cue(l,a){return null===l||null==a||(Array.isArray(l)?l[1]:l)===a||!(!Array.isArray(l)||"string"!=typeof a)&&qy(l,a)>=0}const mo={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function Sz(l){return l.substring(mo.key,mo.keyEnd)}function Tz(l,a){const o=mo.textEnd;return o===a?-1:(a=mo.keyEnd=function(l,a,o){for(;a<o&&l.charCodeAt(a)>32;)a++;return a}(l,mo.key=a,o),_v(l,a,o))}function _v(l,a,o){for(;a<o&&l.charCodeAt(a)<=32;)a++;return a}function Am(l,a,o){return iu(l,a,o,!1),Am}function lt(l,a){return iu(l,a,null,!0),lt}function ul(l){!function(l,a,o,c){const u=$r(),h=me(2);u.firstUpdatePass&&Dz(u,null,h,c);const d=bt();if(o!==dr&&da(d,h,o)){const f=u.data[Yo()];if(Pz(f,c)&&!Mz(u,h)){let m=c?f.classesWithoutHost:f.stylesWithoutHost;null!==m&&(o=vb(m,o||"")),ZP(u,f,d,o,c)}else!function(l,a,o,c,u,h,d,f){u===dr&&(u=di);let m=0,g=0,y=0<u.length?u[0]:null,v=0<h.length?h[0]:null;for(;null!==y||null!==v;){const _=m<u.length?u[m+1]:void 0,b=g<h.length?h[g+1]:void 0;let C,w=null;y===v?(m+=2,g+=2,_!==b&&(w=v,C=b)):null===v||null!==y&&y<v?(m+=2,w=y):(g+=2,w=v,C=b),null!==w&&Iz(l,a,o,c,w,C,d,f),y=m<u.length?u[m]:null,v=g<h.length?h[g]:null}}(u,f,d,d[11],d[h+1],d[h+1]=function(l,a,o){if(null==o||""===o)return di;const c=[],u=Ul(o);if(Array.isArray(u))for(let h=0;h<u.length;h++)l(c,u[h],!0);else if("object"==typeof u)for(const h in u)u.hasOwnProperty(h)&&l(c,h,u[h]);else"string"==typeof u&&a(c,u);return c}(l,a,o),c,h)}}(Bl,uh,l,!0)}function uh(l,a){for(let o=function(l){return function(l){mo.key=0,mo.keyEnd=0,mo.value=0,mo.valueEnd=0,mo.textEnd=l.length}(l),Tz(l,_v(l,0,mo.textEnd))}(a);o>=0;o=Tz(a,o))Bl(l,Sz(a),!0)}function iu(l,a,o,c){const u=bt(),h=$r(),d=me(2);h.firstUpdatePass&&Dz(h,l,d,c),a!==dr&&da(u,d,a)&&Iz(h,h.data[Yo()],u,u[11],l,u[d+1]=function(l,a){return null==l||("string"==typeof a?l+=a:"object"==typeof l&&(l=vr(Ul(l)))),l}(a,o),c,d)}function Mz(l,a){return a>=l.expandoStartIndex}function Dz(l,a,o,c){const u=l.data;if(null===u[o+1]){const h=u[Yo()],d=Mz(l,o);Pz(h,c)&&null===a&&!d&&(a=!1),a=function(l,a,o,c){const u=vn(l);let h=c?a.residualClasses:a.residualStyles;if(null===u)0===(c?a.classBindings:a.styleBindings)&&(o=fS(o=QP(null,l,a,o,c),a.attrs,c),h=null);else{const d=a.directiveStylingLast;if(-1===d||l[d]!==u)if(o=QP(u,l,a,o,c),null===h){let m=function(l,a,o){const c=o?a.classBindings:a.styleBindings;if(0!==vd(c))return l[tu(c)]}(l,a,c);void 0!==m&&Array.isArray(m)&&(m=QP(null,l,a,m[1],c),m=fS(m,a.attrs,c),function(l,a,o,c){l[tu(o?a.classBindings:a.styleBindings)]=c}(l,a,c,m))}else h=function(l,a,o){let c;const u=a.directiveEnd;for(let h=1+a.directiveStylingLast;h<u;h++)c=fS(c,l[h].hostAttrs,o);return fS(c,a.attrs,o)}(l,a,c)}return void 0!==h&&(c?a.residualClasses=h:a.residualStyles=h),o}(u,h,a,c),function(l,a,o,c,u,h){let d=h?a.classBindings:a.styleBindings,f=tu(d),m=vd(d);l[c]=o;let y,g=!1;if(Array.isArray(o)){const v=o;y=v[1],(null===y||qy(v,y)>0)&&(g=!0)}else y=o;if(u)if(0!==m){const _=tu(l[f+1]);l[c+1]=ix(_,f),0!==_&&(l[_+1]=_P(l[_+1],c)),l[f+1]=function(l,a){return 131071&l|a<<17}(l[f+1],c)}else l[c+1]=ix(f,0),0!==f&&(l[f+1]=_P(l[f+1],c)),f=c;else l[c+1]=ix(m,0),0===f?f=c:l[m+1]=_P(l[m+1],c),m=c;g&&(l[c+1]=vP(l[c+1])),bz(l,y,c,!0),bz(l,y,c,!1),function(l,a,o,c,u){const h=u?l.residualClasses:l.residualStyles;null!=h&&"string"==typeof a&&qy(h,a)>=0&&(o[c+1]=bP(o[c+1]))}(a,y,l,c,h),d=ix(f,m),h?a.classBindings=d:a.styleBindings=d}(u,h,a,o,d,c)}}function QP(l,a,o,c,u){let h=null;const d=o.directiveEnd;let f=o.directiveStylingLast;for(-1===f?f=o.directiveStart:f++;f<d&&(h=a[f],c=fS(c,h.hostAttrs,u),h!==l);)f++;return null!==l&&(o.directiveStylingLast=f),c}function fS(l,a,o){const c=o?1:2;let u=-1;if(null!==a)for(let h=0;h<a.length;h++){const d=a[h];"number"==typeof d?u=d:u===c&&(Array.isArray(l)||(l=void 0===l?[]:["",l]),Bl(l,d,!!o||a[++h]))}return void 0===l?null:l}function Iz(l,a,o,c,u,h,d,f){if(!(3&a.type))return;const m=l.data,g=m[f+1];px(function(l){return 1==(1&l)}(g)?Rz(m,a,o,u,vd(g),d):void 0)||(px(h)||function(l){return 2==(2&l)}(g)&&(h=Rz(m,null,o,u,f,d)),function(l,a,o,c,u){const h=Kr(l);if(a)u?h?l.addClass(o,c):o.classList.add(c):h?l.removeClass(o,c):o.classList.remove(c);else{let d=-1===c.indexOf("-")?void 0:Gl.DashCase;if(null==u)h?l.removeStyle(o,c,d):o.style.removeProperty(c);else{const f="string"==typeof u&&u.endsWith("!important");f&&(u=u.slice(0,-10),d|=Gl.Important),h?l.setStyle(o,c,u,d):o.style.setProperty(c,u,f?"important":"")}}}(c,d,_m(Yo(),o),u,h))}function Rz(l,a,o,c,u,h){const d=null===a;let f;for(;u>0;){const m=l[u],g=Array.isArray(m),y=g?m[1]:m,v=null===y;let _=o[u+1];_===dr&&(_=v?di:void 0);let b=v?W2(_,c):y===c?_:void 0;if(g&&!px(b)&&(b=W2(m,c)),px(b)&&(f=b,d))return f;const w=l[u+1];u=d?tu(w):vd(w)}if(null!==a){let m=h?a.residualClasses:a.residualStyles;null!=m&&(f=W2(m,c))}return f}function px(l){return void 0!==l}function Pz(l,a){return 0!=(l.flags&(a?16:32))}function Le(l,a=""){const o=bt(),c=$r(),u=l+20,h=c.firstCreatePass?tv(c,u,1,a,null):c.data[u],d=o[u]=function(l,a){return Kr(l)?l.createText(a):l.createTextNode(a)}(o[11],a);nx(c,o,d,h),Vl(h,!1)}function Un(l){return Bi("",l,""),Un}function Bi(l,a,o){const c=bt(),u=cv(c,l,a,o);return u!==dr&&bd(c,Yo(),u),Bi}function pS(l,a,o,c,u){const h=bt(),d=function(l,a,o,c,u,h){const f=Dm(l,G(),o,u);return me(2),f?a+lr(o)+c+lr(u)+h:dr}(h,l,a,o,c,u);return d!==dr&&bd(h,Yo(),d),pS}function Hl(l,a,o){const c=bt();return da(c,ae(),a)&&zl($r(),os(),c,l,a,c[11],o,!0),Hl}function mx(l,a,o){const c=bt();if(da(c,ae(),a)){const h=$r(),d=os();zl(h,d,c,l,a,y6(vn(h.data),d,c),o,!0)}return mx}const Im=void 0;var Hue=["en",[["a","p"],["AM","PM"],Im],[["AM","PM"],Im,Im],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Im,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Im,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Im,"{1} 'at' {0}",Im],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(l){const a=Math.floor(Math.abs(l)),o=l.toString().replace(/^[^.]*\.?/,"").length;return 1===a&&0===o?1:5}];let bv={};function Yz(l){return l in bv||(bv[l]=er.ng&&er.ng.common&&er.ng.common.locales&&er.ng.common.locales[l]),bv[l]}var un=(()=>((un=un||{})[un.LocaleId=0]="LocaleId",un[un.DayPeriodsFormat=1]="DayPeriodsFormat",un[un.DayPeriodsStandalone=2]="DayPeriodsStandalone",un[un.DaysFormat=3]="DaysFormat",un[un.DaysStandalone=4]="DaysStandalone",un[un.MonthsFormat=5]="MonthsFormat",un[un.MonthsStandalone=6]="MonthsStandalone",un[un.Eras=7]="Eras",un[un.FirstDayOfWeek=8]="FirstDayOfWeek",un[un.WeekendRange=9]="WeekendRange",un[un.DateFormat=10]="DateFormat",un[un.TimeFormat=11]="TimeFormat",un[un.DateTimeFormat=12]="DateTimeFormat",un[un.NumberSymbols=13]="NumberSymbols",un[un.NumberFormats=14]="NumberFormats",un[un.CurrencyCode=15]="CurrencyCode",un[un.CurrencySymbol=16]="CurrencySymbol",un[un.CurrencyName=17]="CurrencyName",un[un.Currencies=18]="Currencies",un[un.Directionality=19]="Directionality",un[un.PluralCase=20]="PluralCase",un[un.ExtraData=21]="ExtraData",un))();const gx="en-US";let Zz=gx;function tL(l){Aa(l,"Expected localeId to be defined"),"string"==typeof l&&(Zz=l.toLowerCase().replace(/_/g,"-"))}function iL(l,a,o,c,u){if(l=In(l),Array.isArray(l))for(let h=0;h<l.length;h++)iL(l[h],a,o,c,u);else{const h=$r(),d=bt();let f=ov(l)?l:In(l.provide),m=w6(l);const g=Es(),y=1048575&g.providerIndexes,v=g.directiveStart,_=g.providerIndexes>>20;if(ov(l)||!l.multi){const b=new Ub(m,u,O),w=oL(f,a,u?y:y+_,v);-1===w?(zC(zb(g,d),h,f),sL(h,l,a.length),a.push(f),g.directiveStart++,g.directiveEnd++,u&&(g.providerIndexes+=1048576),o.push(b),d.push(b)):(o[w]=b,d[w]=b)}else{const b=oL(f,a,y+_,v),w=oL(f,a,y,y+_),C=b>=0&&o[b],E=w>=0&&o[w];if(u&&!E||!u&&!C){zC(zb(g,d),h,f);const M=function(l,a,o,c,u){const h=new Ub(l,o,O);return h.multi=[],h.index=a,h.componentProviders=0,b8(h,u,c&&!o),h}(u?Uhe:Bhe,o.length,u,c,m);!u&&E&&(o[w].providerFactory=M),sL(h,l,a.length,0),a.push(f),g.directiveStart++,g.directiveEnd++,u&&(g.providerIndexes+=1048576),o.push(M),d.push(M)}else sL(h,l,b>-1?b:w,b8(o[u?w:b],m,!u&&c));!u&&c&&E&&o[w].componentProviders++}}}function sL(l,a,o,c){const u=ov(a);if(u||function(l){return!!l.useClass}(a)){const d=(a.useClass||a).prototype.ngOnDestroy;if(d){const f=l.destroyHooks||(l.destroyHooks=[]);if(!u&&a.multi){const m=f.indexOf(o);-1===m?f.push(o,[c,d]):f[m+1].push(c,d)}else f.push(o,d)}}}function b8(l,a,o){return o&&l.componentProviders++,l.multi.push(a)-1}function oL(l,a,o,c){for(let u=o;u<c;u++)if(a[u]===l)return u;return-1}function Bhe(l,a,o,c){return aL(this.multi,[])}function Uhe(l,a,o,c){const u=this.multi;let h;if(this.providerFactory){const d=this.providerFactory.componentProviders,f=Hb(o,o[1],this.providerFactory.index,c);h=f.slice(0,d),aL(u,h);for(let m=d;m<f.length;m++)h.push(f[m])}else h=[],aL(u,h);return h}function aL(l,a){for(let o=0;o<l.length;o++)a.push((0,l[o])());return a}function Mt(l,a=[]){return o=>{o.providersResolver=(c,u)=>function(l,a,o){const c=$r();if(c.firstCreatePass){const u=kl(l);iL(o,c.data,c.blueprint,u,!0),iL(a,c.data,c.blueprint,u,!1)}}(c,u?u(l):l,a)}}class S8{}const w8="ngComponent";class Hhe{resolveComponentFactory(a){throw function(l){const a=Error(`No component factory found for ${vr(l)}. Did you add it to @NgModule.entryComponents?`);return a[w8]=l,a}(a)}}let wc=(()=>{class l{}return l.NULL=new Hhe,l})();function Sx(...l){}function Tv(l,a){return new kt(ol(l,a))}const qhe=function(){return Tv(Es(),bt())};let kt=(()=>{class l{constructor(o){this.nativeElement=o}}return l.__NG_ELEMENT_ID__=qhe,l})();function C8(l){return l instanceof kt?l.nativeElement:l}class Bf{}let tr=(()=>{class l{}return l.__NG_ELEMENT_ID__=()=>$he(),l})();const $he=function(){const l=bt(),o=$o(Es().index,l);return function(l){return l[11]}(qo(o)?o:l)};let cL=(()=>{class l{}return l.\u0275prov=Xe({token:l,providedIn:"root",factory:()=>null}),l})();class _S{constructor(a){this.full=a,this.major=a.split(".")[0],this.minor=a.split(".")[1],this.patch=a.split(".").slice(2).join(".")}}const x8=new _S("12.2.7");class E8{constructor(){}supports(a){return uS(a)}create(a){return new Jhe(a)}}const Khe=(l,a)=>a;class Jhe{constructor(a){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=a||Khe}forEachItem(a){let o;for(o=this._itHead;null!==o;o=o._next)a(o)}forEachOperation(a){let o=this._itHead,c=this._removalsHead,u=0,h=null;for(;o||c;){const d=!c||o&&o.currentIndex<D8(c,u,h)?o:c,f=D8(d,u,h),m=d.currentIndex;if(d===c)u--,c=c._nextRemoved;else if(o=o._next,null==d.previousIndex)u++;else{h||(h=[]);const g=f-u,y=m-u;if(g!=y){for(let _=0;_<g;_++){const b=_<h.length?h[_]:h[_]=0,w=b+_;y<=w&&w<g&&(h[_]=b+1)}h[d.previousIndex]=y-g}}f!==m&&a(d,f,m)}}forEachPreviousItem(a){let o;for(o=this._previousItHead;null!==o;o=o._nextPrevious)a(o)}forEachAddedItem(a){let o;for(o=this._additionsHead;null!==o;o=o._nextAdded)a(o)}forEachMovedItem(a){let o;for(o=this._movesHead;null!==o;o=o._nextMoved)a(o)}forEachRemovedItem(a){let o;for(o=this._removalsHead;null!==o;o=o._nextRemoved)a(o)}forEachIdentityChange(a){let o;for(o=this._identityChangesHead;null!==o;o=o._nextIdentityChange)a(o)}diff(a){if(null==a&&(a=[]),!uS(a))throw new Error(`Error trying to diff '${vr(a)}'. Only arrays and iterables are allowed`);return this.check(a)?this:null}onDestroy(){}check(a){this._reset();let u,h,d,o=this._itHead,c=!1;if(Array.isArray(a)){this.length=a.length;for(let f=0;f<this.length;f++)h=a[f],d=this._trackByFn(f,h),null!==o&&Object.is(o.trackById,d)?(c&&(o=this._verifyReinsertion(o,h,d,f)),Object.is(o.item,h)||this._addIdentityChange(o,h)):(o=this._mismatch(o,h,d,f),c=!0),o=o._next}else u=0,function(l,a){if(Array.isArray(l))for(let o=0;o<l.length;o++)a(l[o]);else{const o=l[av()]();let c;for(;!(c=o.next()).done;)a(c.value)}}(a,f=>{d=this._trackByFn(u,f),null!==o&&Object.is(o.trackById,d)?(c&&(o=this._verifyReinsertion(o,f,d,u)),Object.is(o.item,f)||this._addIdentityChange(o,f)):(o=this._mismatch(o,f,d,u),c=!0),o=o._next,u++}),this.length=u;return this._truncate(o),this.collection=a,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let a;for(a=this._previousItHead=this._itHead;null!==a;a=a._next)a._nextPrevious=a._next;for(a=this._additionsHead;null!==a;a=a._nextAdded)a.previousIndex=a.currentIndex;for(this._additionsHead=this._additionsTail=null,a=this._movesHead;null!==a;a=a._nextMoved)a.previousIndex=a.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(a,o,c,u){let h;return null===a?h=this._itTail:(h=a._prev,this._remove(a)),null!==(a=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null))?(Object.is(a.item,o)||this._addIdentityChange(a,o),this._reinsertAfter(a,h,u)):null!==(a=null===this._linkedRecords?null:this._linkedRecords.get(c,u))?(Object.is(a.item,o)||this._addIdentityChange(a,o),this._moveAfter(a,h,u)):a=this._addAfter(new Qhe(o,c),h,u),a}_verifyReinsertion(a,o,c,u){let h=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null);return null!==h?a=this._reinsertAfter(h,a._prev,u):a.currentIndex!=u&&(a.currentIndex=u,this._addToMoves(a,u)),a}_truncate(a){for(;null!==a;){const o=a._next;this._addToRemovals(this._unlink(a)),a=o}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(a,o,c){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(a);const u=a._prevRemoved,h=a._nextRemoved;return null===u?this._removalsHead=h:u._nextRemoved=h,null===h?this._removalsTail=u:h._prevRemoved=u,this._insertAfter(a,o,c),this._addToMoves(a,c),a}_moveAfter(a,o,c){return this._unlink(a),this._insertAfter(a,o,c),this._addToMoves(a,c),a}_addAfter(a,o,c){return this._insertAfter(a,o,c),this._additionsTail=null===this._additionsTail?this._additionsHead=a:this._additionsTail._nextAdded=a,a}_insertAfter(a,o,c){const u=null===o?this._itHead:o._next;return a._next=u,a._prev=o,null===u?this._itTail=a:u._prev=a,null===o?this._itHead=a:o._next=a,null===this._linkedRecords&&(this._linkedRecords=new M8),this._linkedRecords.put(a),a.currentIndex=c,a}_remove(a){return this._addToRemovals(this._unlink(a))}_unlink(a){null!==this._linkedRecords&&this._linkedRecords.remove(a);const o=a._prev,c=a._next;return null===o?this._itHead=c:o._next=c,null===c?this._itTail=o:c._prev=o,a}_addToMoves(a,o){return a.previousIndex===o||(this._movesTail=null===this._movesTail?this._movesHead=a:this._movesTail._nextMoved=a),a}_addToRemovals(a){return null===this._unlinkedRecords&&(this._unlinkedRecords=new M8),this._unlinkedRecords.put(a),a.currentIndex=null,a._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=a,a._prevRemoved=null):(a._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=a),a}_addIdentityChange(a,o){return a.item=o,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=a:this._identityChangesTail._nextIdentityChange=a,a}}class Qhe{constructor(a,o){this.item=a,this.trackById=o,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class ede{constructor(){this._head=null,this._tail=null}add(a){null===this._head?(this._head=this._tail=a,a._nextDup=null,a._prevDup=null):(this._tail._nextDup=a,a._prevDup=this._tail,a._nextDup=null,this._tail=a)}get(a,o){let c;for(c=this._head;null!==c;c=c._nextDup)if((null===o||o<=c.currentIndex)&&Object.is(c.trackById,a))return c;return null}remove(a){const o=a._prevDup,c=a._nextDup;return null===o?this._head=c:o._nextDup=c,null===c?this._tail=o:c._prevDup=o,null===this._head}}class M8{constructor(){this.map=new Map}put(a){const o=a.trackById;let c=this.map.get(o);c||(c=new ede,this.map.set(o,c)),c.add(a)}get(a,o){const u=this.map.get(a);return u?u.get(a,o):null}remove(a){const o=a.trackById;return this.map.get(o).remove(a)&&this.map.delete(o),a}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function D8(l,a,o){const c=l.previousIndex;if(null===c)return c;let u=0;return o&&c<o.length&&(u=o[c]),c+a+u}class A8{constructor(){}supports(a){return a instanceof Map||WP(a)}create(){return new tde}}class tde{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(a){let o;for(o=this._mapHead;null!==o;o=o._next)a(o)}forEachPreviousItem(a){let o;for(o=this._previousMapHead;null!==o;o=o._nextPrevious)a(o)}forEachChangedItem(a){let o;for(o=this._changesHead;null!==o;o=o._nextChanged)a(o)}forEachAddedItem(a){let o;for(o=this._additionsHead;null!==o;o=o._nextAdded)a(o)}forEachRemovedItem(a){let o;for(o=this._removalsHead;null!==o;o=o._nextRemoved)a(o)}diff(a){if(a){if(!(a instanceof Map||WP(a)))throw new Error(`Error trying to diff '${vr(a)}'. Only maps and objects are allowed`)}else a=new Map;return this.check(a)?this:null}onDestroy(){}check(a){this._reset();let o=this._mapHead;if(this._appendAfter=null,this._forEach(a,(c,u)=>{if(o&&o.key===u)this._maybeAddToChanges(o,c),this._appendAfter=o,o=o._next;else{const h=this._getOrCreateRecordForKey(u,c);o=this._insertBeforeOrAppend(o,h)}}),o){o._prev&&(o._prev._next=null),this._removalsHead=o;for(let c=o;null!==c;c=c._nextRemoved)c===this._mapHead&&(this._mapHead=null),this._records.delete(c.key),c._nextRemoved=c._next,c.previousValue=c.currentValue,c.currentValue=null,c._prev=null,c._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(a,o){if(a){const c=a._prev;return o._next=a,o._prev=c,a._prev=o,c&&(c._next=o),a===this._mapHead&&(this._mapHead=o),this._appendAfter=a,a}return this._appendAfter?(this._appendAfter._next=o,o._prev=this._appendAfter):this._mapHead=o,this._appendAfter=o,null}_getOrCreateRecordForKey(a,o){if(this._records.has(a)){const u=this._records.get(a);this._maybeAddToChanges(u,o);const h=u._prev,d=u._next;return h&&(h._next=d),d&&(d._prev=h),u._next=null,u._prev=null,u}const c=new nde(a);return this._records.set(a,c),c.currentValue=o,this._addToAdditions(c),c}_reset(){if(this.isDirty){let a;for(this._previousMapHead=this._mapHead,a=this._previousMapHead;null!==a;a=a._next)a._nextPrevious=a._next;for(a=this._changesHead;null!==a;a=a._nextChanged)a.previousValue=a.currentValue;for(a=this._additionsHead;null!=a;a=a._nextAdded)a.previousValue=a.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(a,o){Object.is(o,a.currentValue)||(a.previousValue=a.currentValue,a.currentValue=o,this._addToChanges(a))}_addToAdditions(a){null===this._additionsHead?this._additionsHead=this._additionsTail=a:(this._additionsTail._nextAdded=a,this._additionsTail=a)}_addToChanges(a){null===this._changesHead?this._changesHead=this._changesTail=a:(this._changesTail._nextChanged=a,this._changesTail=a)}_forEach(a,o){a instanceof Map?a.forEach(o):Object.keys(a).forEach(c=>o(a[c],c))}}class nde{constructor(a){this.key=a,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function I8(){return new Td([new E8])}let Td=(()=>{class l{constructor(o){this.factories=o}static create(o,c){if(null!=c){const u=c.factories.slice();o=o.concat(u)}return new l(o)}static extend(o){return{provide:l,useFactory:c=>l.create(o,c||I8()),deps:[[l,new Qc,new Zo]]}}find(o){const c=this.factories.find(u=>u.supports(o));if(null!=c)return c;throw new Error(`Cannot find a differ supporting object '${o}' of type '${function(l){return l.name||typeof l}(o)}'`)}}return l.\u0275prov=Xe({token:l,providedIn:"root",factory:I8}),l})();function R8(){return new wv([new A8])}let wv=(()=>{class l{constructor(o){this.factories=o}static create(o,c){if(c){const u=c.factories.slice();o=o.concat(u)}return new l(o)}static extend(o){return{provide:l,useFactory:c=>l.create(o,c||R8()),deps:[[l,new Qc,new Zo]]}}find(o){const c=this.factories.find(u=>u.supports(o));if(c)return c;throw new Error(`Cannot find a differ supporting object '${o}'`)}}return l.\u0275prov=Xe({token:l,providedIn:"root",factory:R8}),l})();function Tx(l,a,o,c,u=!1){for(;null!==o;){const h=a[o.index];if(null!==h&&c.push(is(h)),Fl(h))for(let f=10;f<h.length;f++){const m=h[f],g=m[1].firstChild;null!==g&&Tx(m[1],m,g,c)}const d=o.type;if(8&d)Tx(l,a,o.child,c);else if(32&d){const f=aP(o,a);let m;for(;m=f();)c.push(m)}else if(16&d){const f=OG(a,o);if(Array.isArray(f))c.push(...f);else{const m=rS(a[16]);Tx(m[1],m,f,c,!0)}}o=u?o.projectionNext:o.next}return c}class bS{constructor(a,o){this._lView=a,this._cdRefInjectingView=o,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const a=this._lView,o=a[1];return Tx(o,a,o.firstChild,[])}get context(){return this._lView[8]}set context(a){this._lView[8]=a}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const a=this._lView[3];if(Fl(a)){const o=a[8],c=o?o.indexOf(this):-1;c>-1&&(dP(a,c),wm(o,c))}this._attachedToViewContainer=!1}xG(this._lView[1],this._lView)}onDestroy(a){s6(this._lView[1],this._lView,null,a)}markForCheck(){LP(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){NP(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(l,a,o){F(!0);try{NP(l,a,o)}finally{F(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function(l,a){iS(l,a,a[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(a){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=a}}class ide extends bS{constructor(a){super(a),this._view=a}detectChanges(){p6(this._view)}checkNoChanges(){!function(l){F(!0);try{p6(l)}finally{F(!1)}}(this._view)}get context(){return null}}const ode=function(l){return function(l,a,o){if(Dy(l)&&!o){const c=$o(l.index,a);return new bS(c,c)}return 47&l.type?new bS(a[16],a):null}(Es(),bt(),16==(16&l))};let go=(()=>{class l{}return l.__NG_ELEMENT_ID__=ode,l})();const cde=[new A8],hde=new Td([new E8]),dde=new wv(cde),pde=function(){return wx(Es(),bt())};let bi=(()=>{class l{}return l.__NG_ELEMENT_ID__=pde,l})();const mde=bi,gde=class extends mde{constructor(a,o,c){super(),this._declarationLView=a,this._declarationTContainer=o,this.elementRef=c}createEmbeddedView(a){const o=this._declarationTContainer.tViews,c=sS(this._declarationLView,o,a,16,null,o.declTNode,null,null,null,null);c[17]=this._declarationLView[this._declarationTContainer.index];const h=this._declarationLView[19];return null!==h&&(c[19]=h.createEmbeddedView(o)),oS(o,c,a),new bS(c)}};function wx(l,a){return 4&l.type?new gde(a,l,Tv(l,a)):null}class hh{}class P8{}const _de=function(){return N8(Es(),bt())};let qn=(()=>{class l{}return l.__NG_ELEMENT_ID__=_de,l})();const Sde=qn,L8=class extends Sde{constructor(a,o,c){super(),this._lContainer=a,this._hostTNode=o,this._hostLView=c}get element(){return Tv(this._hostTNode,this._hostLView)}get injector(){return new Gy(this._hostTNode,this._hostLView)}get parentInjector(){const a=GC(this._hostTNode,this._hostLView);if(MU(a)){const o=Uy(a,this._hostLView),c=By(a);return new Gy(o[1].data[c+8],o)}return new Gy(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(a){const o=O8(this._lContainer);return null!==o&&o[a]||null}get length(){return this._lContainer.length-10}createEmbeddedView(a,o,c){const u=a.createEmbeddedView(o||{});return this.insert(u,c),u}createComponent(a,o,c,u,h){const d=c||this.parentInjector;if(!h&&null==a.ngModule&&d){const m=d.get(hh,null);m&&(h=m)}const f=a.create(d,u,void 0,h);return this.insert(f.hostView,o),f}insert(a,o){const c=a._lView,u=c[1];if(function(l){return Fl(l[3])}(c)){const y=this.indexOf(a);if(-1!==y)this.detach(y);else{const v=c[3],_=new L8(v,v[6],v[3]);_.detach(_.indexOf(a))}}const h=this._adjustIndex(o),d=this._lContainer;!function(l,a,o,c){const u=10+c,h=o.length;c>0&&(o[u-1][4]=a),c<h-10?(a[4]=o[u],WC(o,10+c,a)):(o.push(a),a[4]=null),a[3]=o;const d=a[17];null!==d&&o!==d&&function(l,a){const o=l[9];a[16]!==a[3][3][16]&&(l[2]=!0),null===o?l[9]=[a]:o.push(a)}(d,a);const f=a[19];null!==f&&f.insertView(l),a[2]|=128}(u,c,d,h);const f=mP(h,d),m=c[11],g=tx(m,d[7]);return null!==g&&function(l,a,o,c,u,h){c[0]=u,c[6]=a,iS(l,c,o,1,u,h)}(u,d[6],m,c,g,f),a.attachToViewContainerRef(),WC(uL(d),h,a),a}move(a,o){return this.insert(a,o)}indexOf(a){const o=O8(this._lContainer);return null!==o?o.indexOf(a):-1}remove(a){const o=this._adjustIndex(a,-1),c=dP(this._lContainer,o);c&&(wm(uL(this._lContainer),o),xG(c[1],c))}detach(a){const o=this._adjustIndex(a,-1),c=dP(this._lContainer,o);return c&&null!=wm(uL(this._lContainer),o)?new bS(c):null}_adjustIndex(a,o=0){return null==a?this.length+o:a}};function O8(l){return l[8]}function uL(l){return l[8]||(l[8]=[])}function N8(l,a){let o;const c=a[l.index];if(Fl(c))o=c;else{let u;if(8&l.type)u=is(c);else{const h=a[11];u=h.createComment("");const d=ol(l,a);Mm(h,tx(h,d),u,function(l,a){return Kr(l)?l.nextSibling(a):a.nextSibling}(h,d),!1)}a[l.index]=o=f6(c,a,u,l),lx(a,o)}return new L8(o,l,a)}const Mv={};class tH extends wc{constructor(a){super(),this.ngModule=a}resolveComponentFactory(a){const o=Wo(a);return new rH(o,this.ngModule)}}function nH(l){const a=[];for(let o in l)l.hasOwnProperty(o)&&a.push({propName:l[o],templateName:o});return a}const yfe=new Sn("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>mG});class rH extends S8{constructor(a,o){super(),this.componentDef=a,this.ngModule=o,this.componentType=a.type,this.selector=function(l){return l.map(dle).join(",")}(a.selectors),this.ngContentSelectors=a.ngContentSelectors?a.ngContentSelectors:[],this.isBoundToModule=!!o}get inputs(){return nH(this.componentDef.inputs)}get outputs(){return nH(this.componentDef.outputs)}create(a,o,c,u){const h=(u=u||this.ngModule)?function(l,a){return{get:(o,c,u)=>{const h=l.get(o,Mv,u);return h!==Mv||c===Mv?h:a.get(o,c,u)}}}(a,u.injector):a,d=h.get(Bf,Pb),f=h.get(cL,null),m=d.createRenderer(null,this.componentDef),g=this.componentDef.selectors[0][0]||"div",y=c?function(l,a,o){if(Kr(l))return l.selectRootElement(a,o===Ki.ShadowDom);let c="string"==typeof a?l.querySelector(a):a;return c.textContent="",c}(m,c,this.componentDef.encapsulation):hP(d.createRenderer(null,this.componentDef),g,function(l){const a=l.toLowerCase();return"svg"===a?"http://www.w3.org/2000/svg":"math"===a?"http://www.w3.org/1998/MathML/":null}(g)),v=this.componentDef.onPush?576:528,_=function(l,a){return{components:[],scheduler:l||mG,clean:Zle,playerHandler:a||null,flags:0}}(),b=ax(0,null,null,1,0,null,null,null,null,null),w=sS(null,b,_,v,null,null,d,m,f,h);let C,E;Ms(w);try{const M=function(l,a,o,c,u,h){const d=o[1];o[20]=l;const m=tv(d,20,2,"#host",null),g=m.mergedAttrs=a.hostAttrs;null!==g&&(cx(m,g,!0),null!==l&&(VC(u,l,g),null!==m.classes&&yP(u,l,m.classes),null!==m.styles&&kG(u,l,m.styles)));const y=c.createRenderer(l,a),v=sS(o,n6(a),null,a.onPush?64:16,o[20],m,c,y,h||null,null);return d.firstCreatePass&&(zC(zb(m,o),d,a.type),u6(d,m),h6(m,o.length,1)),lx(o,v),o[20]=v}(y,this.componentDef,w,d,m);if(y)if(c)VC(m,y,["ng-version",x8.full]);else{const{attrs:x,classes:R}=function(l){const a=[],o=[];let c=1,u=2;for(;c<l.length;){let h=l[c];if("string"==typeof h)2===u?""!==h&&a.push(h,l[++c]):8===u&&o.push(h);else{if(!eu(u))break;u=h}c++}return{attrs:a,classes:o}}(this.componentDef.selectors[0]);x&&VC(m,y,x),R&&R.length>0&&yP(m,y,R.join(" "))}if(E=Ny(b,20),void 0!==o){const x=E.projection=[];for(let R=0;R<this.ngContentSelectors.length;R++){const P=o[R];x.push(null!=P?Array.from(P):null)}}C=function(l,a,o,c,u){const h=o[1],d=function(l,a,o){const c=Es();l.firstCreatePass&&(o.providersResolver&&o.providersResolver(o),d6(l,c,a,nv(l,a,1,null),o));const u=Hb(a,l,c.directiveStart,c);ha(u,a);const h=ol(c,a);return h&&ha(h,a),u}(h,o,a);if(c.components.push(d),l[8]=d,u&&u.forEach(m=>m(d,a)),a.contentQueries){const m=Es();a.contentQueries(1,d,m.directiveStart)}const f=Es();return!h.firstCreatePass||null===a.hostBindings&&null===a.hostAttrs||(Jc(f.index),l6(o[1],f,0,f.directiveStart,f.directiveEnd,a),c6(a,d)),d}(M,this.componentDef,w,_,[Tce]),oS(b,w,null)}finally{Vy()}return new bfe(this.componentType,C,Tv(E,w),w,E)}}class bfe extends class{}{constructor(a,o,c,u,h){super(),this.location=c,this._rootLView=u,this._tNode=h,this.instance=o,this.hostView=this.changeDetectorRef=new ide(u),this.componentType=a}get injector(){return new Gy(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(a){this.hostView.onDestroy(a)}}const Dv=new Map;class wfe extends hh{constructor(a,o){super(),this._parent=o,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new tH(this);const c=ca(a),u=function(l){return l[m2]||null}(a);u&&tL(u),this._bootstrapComponents=oh(c.bootstrap),this._r3Injector=T6(a,o,[{provide:hh,useValue:this},{provide:wc,useValue:this.componentFactoryResolver}],vr(a)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(a)}get(a,o=Qn.THROW_IF_NOT_FOUND,c=On.Default){return a===Qn||a===hh||a===iv?this:this._r3Injector.get(a,o,c)}destroy(){const a=this._r3Injector;!a.destroyed&&a.destroy(),this.destroyCbs.forEach(o=>o()),this.destroyCbs=null}onDestroy(a){this.destroyCbs.push(a)}}class wL extends P8{constructor(a){super(),this.moduleType=a,null!==ca(a)&&function(l){const a=new Set;!function o(c){const u=ca(c,!0),h=u.id;null!==h&&(function(l,a,o){if(a&&a!==o)throw new Error(`Duplicate module registered for ${l} - ${vr(a)} vs ${vr(a.name)}`)}(h,Dv.get(h),c),Dv.set(h,c));const d=oh(u.imports);for(const f of d)a.has(f)||(a.add(f),o(f))}(l)}(a)}create(a){return new wfe(this.moduleType,a)}}function Dx(l,a,o){const c=I()+l,u=bt();return u[c]===dr?lh(u,c,o?a.call(o):a()):function(l,a){return l[a]}(u,c)}function as(l,a,o,c){return oH(bt(),I(),l,a,o,c)}function DS(l,a){const o=l[a];return o===dr?void 0:o}function oH(l,a,o,c,u,h){const d=a+o;return da(l,d,u)?lh(l,d+1,h?c.call(h,u):c(u)):DS(l,d+1)}function ks(l,a){const o=$r();let c;const u=l+20;o.firstCreatePass?(c=function(l,a){if(a)for(let o=a.length-1;o>=0;o--){const c=a[o];if(l===c.name)return c}throw new Yu("302",`The pipe '${l}' could not be found!`)}(a,o.pipeRegistry),o.data[u]=c,c.onDestroy&&(o.destroyHooks||(o.destroyHooks=[])).push(u,c.onDestroy)):c=o.data[u];const h=c.factory||(c.factory=ho(c.type)),d=Ku(O);try{const f=UC(!1),m=h();return UC(f),function(l,a,o,c){o>=l.data.length&&(l.data[o]=null,l.blueprint[o]=null),a[o]=c}(o,bt(),u,m),m}finally{Ku(d)}}function Ko(l,a,o){const c=l+20,u=bt(),h=gd(u,c);return RS(u,IS(u,c)?oH(u,I(),a,h.transform,o,h):h.transform(o))}function AS(l,a,o,c){const u=l+20,h=bt(),d=gd(h,u);return RS(h,IS(h,u)?function(l,a,o,c,u,h,d){const f=a+o;return Dm(l,f,u,h)?lh(l,f+2,d?c.call(d,u,h):c(u,h)):DS(l,f+2)}(h,I(),a,d.transform,o,c,d):d.transform(o,c))}function IS(l,a){return l[1].data[a].pure}function RS(l,a){return ru.isWrapped(a)&&(a=ru.unwrap(a),l[G()]=dr),a}function CL(l){return a=>{setTimeout(l,void 0,a)}}const pt=class extends tt{constructor(a=!1){super(),this.__isAsync=a}emit(a){super.next(a)}subscribe(a,o,c){var u,h,d;let f=a,m=o||(()=>null),g=c;if(a&&"object"==typeof a){const v=a;f=null===(u=v.next)||void 0===u?void 0:u.bind(v),m=null===(h=v.error)||void 0===h?void 0:h.bind(v),g=null===(d=v.complete)||void 0===d?void 0:d.bind(v)}this.__isAsync&&(m=CL(m),f&&(f=CL(f)),g&&(g=CL(g)));const y=super.subscribe({next:f,error:m,complete:g});return a instanceof L&&a.add(y),y}};function kfe(){return this._results[av()]()}class Ax{constructor(a=!1){this._emitDistinctChangesOnly=a,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const o=av(),c=Ax.prototype;c[o]||(c[o]=kfe)}get changes(){return this._changes||(this._changes=new pt)}get(a){return this._results[a]}map(a){return this._results.map(a)}filter(a){return this._results.filter(a)}find(a){return this._results.find(a)}reduce(a,o){return this._results.reduce(a,o)}forEach(a){this._results.forEach(a)}some(a){return this._results.some(a)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(a,o){const c=this;c.dirty=!1;const u=bc(a);(this._changesDetected=!function(l,a,o){if(l.length!==a.length)return!1;for(let c=0;c<l.length;c++){let u=l[c],h=a[c];if(o&&(u=o(u),h=o(h)),h!==u)return!1}return!0}(c._results,u,o))&&(c._results=u,c.length=u.length,c.last=u[this.length-1],c.first=u[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;class xL{constructor(a){this.queryList=a,this.matches=null}clone(){return new xL(this.queryList)}setDirty(){this.queryList.setDirty()}}class EL{constructor(a=[]){this.queries=a}createEmbeddedView(a){const o=a.queries;if(null!==o){const c=null!==a.contentQueries?a.contentQueries[0]:o.length,u=[];for(let h=0;h<c;h++){const d=o.getByIndex(h);u.push(this.queries[d.indexInDeclarationView].clone())}return new EL(u)}return null}insertView(a){this.dirtyQueriesWithMatches(a)}detachView(a){this.dirtyQueriesWithMatches(a)}dirtyQueriesWithMatches(a){for(let o=0;o<this.queries.length;o++)null!==mH(a,o).matches&&this.queries[o].setDirty()}}class hH{constructor(a,o,c=null){this.predicate=a,this.flags=o,this.read=c}}class ML{constructor(a=[]){this.queries=a}elementStart(a,o){for(let c=0;c<this.queries.length;c++)this.queries[c].elementStart(a,o)}elementEnd(a){for(let o=0;o<this.queries.length;o++)this.queries[o].elementEnd(a)}embeddedTView(a){let o=null;for(let c=0;c<this.length;c++){const u=null!==o?o.length:0,h=this.getByIndex(c).embeddedTView(a,u);h&&(h.indexInDeclarationView=c,null!==o?o.push(h):o=[h])}return null!==o?new ML(o):null}template(a,o){for(let c=0;c<this.queries.length;c++)this.queries[c].template(a,o)}getByIndex(a){return this.queries[a]}get length(){return this.queries.length}track(a){this.queries.push(a)}}class DL{constructor(a,o=-1){this.metadata=a,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=o}elementStart(a,o){this.isApplyingToNode(o)&&this.matchTNode(a,o)}elementEnd(a){this._declarationNodeIndex===a.index&&(this._appliesToNextNode=!1)}template(a,o){this.elementStart(a,o)}embeddedTView(a,o){return this.isApplyingToNode(a)?(this.crossesNgTemplate=!0,this.addMatch(-a.index,o),new DL(this.metadata)):null}isApplyingToNode(a){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const o=this._declarationNodeIndex;let c=a.parent;for(;null!==c&&8&c.type&&c.index!==o;)c=c.parent;return o===(null!==c?c.index:-1)}return this._appliesToNextNode}matchTNode(a,o){const c=this.metadata.predicate;if(Array.isArray(c))for(let u=0;u<c.length;u++){const h=c[u];this.matchTNodeWithReadOption(a,o,Ufe(o,h)),this.matchTNodeWithReadOption(a,o,HC(o,a,h,!1,!1))}else c===bi?4&o.type&&this.matchTNodeWithReadOption(a,o,-1):this.matchTNodeWithReadOption(a,o,HC(o,a,c,!1,!1))}matchTNodeWithReadOption(a,o,c){if(null!==c){const u=this.metadata.read;if(null!==u)if(u===kt||u===qn||u===bi&&4&o.type)this.addMatch(o.index,-2);else{const h=HC(o,a,u,!1,!1);null!==h&&this.addMatch(o.index,h)}else this.addMatch(o.index,c)}}addMatch(a,o){null===this.matches?this.matches=[a,o]:this.matches.push(a,o)}}function Ufe(l,a){const o=l.localNames;if(null!==o)for(let c=0;c<o.length;c+=2)if(o[c]===a)return o[c+1];return null}function zfe(l,a,o,c){return-1===o?function(l,a){return 11&l.type?Tv(l,a):4&l.type?wx(l,a):null}(a,l):-2===o?function(l,a,o){return o===kt?Tv(a,l):o===bi?wx(a,l):o===qn?N8(a,l):void 0}(l,a,c):Hb(l,l[1],o,a)}function dH(l,a,o,c){const u=a[19].queries[c];if(null===u.matches){const h=l.data,d=o.matches,f=[];for(let m=0;m<d.length;m+=2){const g=d[m];f.push(g<0?null:zfe(a,h[g],d[m+1],o.metadata.read))}u.matches=f}return u.matches}function AL(l,a,o,c){const u=l.queries.getByIndex(o),h=u.matches;if(null!==h){const d=dH(l,a,u,o);for(let f=0;f<h.length;f+=2){const m=h[f];if(m>0)c.push(d[f/2]);else{const g=h[f+1],y=a[-m];for(let v=10;v<y.length;v++){const _=y[v];_[17]===_[3]&&AL(_[1],_,g,c)}if(null!==y[9]){const v=y[9];for(let _=0;_<v.length;_++){const b=v[_];AL(b[1],b,g,c)}}}}}return c}function It(l){const a=bt(),o=$r(),c=Wn();cr(c+1);const u=mH(o,c);if(l.dirty&&Lb(a)===(2==(2&u.metadata.flags))){if(null===u.matches)l.reset([]);else{const h=u.crossesNgTemplate?AL(o,a,c,[]):dH(o,a,u,c);l.reset(h,C8),l.notifyOnChanges()}return!0}return!1}function Cr(l,a,o){const c=$r();c.firstCreatePass&&(pH(c,new hH(l,a,o),-1),2==(2&a)&&(c.staticViewQueries=!0)),fH(c,bt(),a)}function Nn(l,a,o,c){const u=$r();if(u.firstCreatePass){const h=Es();pH(u,new hH(a,o,c),h.index),function(l,a){const o=l.contentQueries||(l.contentQueries=[]);a!==(o.length?o[o.length-1]:-1)&&o.push(l.queries.length-1,a)}(u,l),2==(2&o)&&(u.staticContentQueries=!0)}fH(u,bt(),o)}function Rt(){return function(l,a){return l[19].queries[a].queryList}(bt(),Wn())}function fH(l,a,o){const c=new Ax(4==(4&o));s6(l,a,c,c.destroy),null===a[19]&&(a[19]=new EL),a[19].queries.push(new xL(c))}function pH(l,a,o){null===l.queries&&(l.queries=new ML),l.queries.track(new DL(a,o))}function mH(l,a){return l.queries.getByIndex(a)}function Pa(l,a){return wx(l,a)}const LS=new Sn("Application Initializer");let Iv=(()=>{class l{constructor(o){this.appInits=o,this.resolve=Sx,this.reject=Sx,this.initialized=!1,this.done=!1,this.donePromise=new Promise((c,u)=>{this.resolve=c,this.reject=u})}runInitializers(){if(this.initialized)return;const o=[],c=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let u=0;u<this.appInits.length;u++){const h=this.appInits[u]();if(dS(h))o.push(h);else if(fx(h)){const d=new Promise((f,m)=>{h.subscribe({complete:f,error:m})});o.push(d)}}Promise.all(o).then(()=>{c()}).catch(u=>{this.reject(u)}),0===o.length&&c(),this.initialized=!0}}return l.\u0275fac=function(o){return new(o||l)(be(LS,8))},l.\u0275prov=Xe({token:l,factory:l.\u0275fac}),l})();const OS=new Sn("AppId"),vpe={provide:OS,useFactory:function(){return`${NL()}${NL()}${NL()}`},deps:[]};function NL(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const LH=new Sn("Platform Initializer"),Ui=new Sn("Platform ID"),OH=new Sn("appBootstrapListener");let Px=(()=>{class l{log(o){console.log(o)}warn(o){console.warn(o)}}return l.\u0275fac=function(o){return new(o||l)},l.\u0275prov=Xe({token:l,factory:l.\u0275fac}),l})();const wd=new Sn("LocaleId"),NH=new Sn("DefaultCurrencyCode");class bpe{constructor(a,o){this.ngModuleFactory=a,this.componentFactories=o}}const FL=function(l){return new wL(l)},Spe=FL,Tpe=function(l){return Promise.resolve(FL(l))},FH=function(l){const a=FL(l),c=oh(ca(l).declarations).reduce((u,h)=>{const d=Wo(h);return d&&u.push(new rH(d)),u},[]);return new bpe(a,c)},wpe=FH,Cpe=function(l){return Promise.resolve(FH(l))};let Lm=(()=>{class l{constructor(){this.compileModuleSync=Spe,this.compileModuleAsync=Tpe,this.compileModuleAndAllComponentsSync=wpe,this.compileModuleAndAllComponentsAsync=Cpe}clearCache(){}clearCacheFor(o){}getModuleId(o){}}return l.\u0275fac=function(o){return new(o||l)},l.\u0275prov=Xe({token:l,factory:l.\u0275fac}),l})();const Mpe=(()=>Promise.resolve(0))();function kL(l){"undefined"==typeof Zone?Mpe.then(()=>{l&&l.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",l)}class Fn{constructor({enableLongStackTrace:a=!1,shouldCoalesceEventChangeDetection:o=!1,shouldCoalesceRunChangeDetection:c=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new pt(!1),this.onMicrotaskEmpty=new pt(!1),this.onStable=new pt(!1),this.onError=new pt(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const u=this;u._nesting=0,u._outer=u._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(u._inner=u._inner.fork(new Zone.TaskTrackingZoneSpec)),a&&Zone.longStackTraceZoneSpec&&(u._inner=u._inner.fork(Zone.longStackTraceZoneSpec)),u.shouldCoalesceEventChangeDetection=!c&&o,u.shouldCoalesceRunChangeDetection=c,u.lastRequestAnimationFrameId=-1,u.nativeRequestAnimationFrame=function(){let l=er.requestAnimationFrame,a=er.cancelAnimationFrame;if("undefined"!=typeof Zone&&l&&a){const o=l[Zone.__symbol__("OriginalDelegate")];o&&(l=o);const c=a[Zone.__symbol__("OriginalDelegate")];c&&(a=c)}return{nativeRequestAnimationFrame:l,nativeCancelAnimationFrame:a}}().nativeRequestAnimationFrame,function(l){const a=()=>{!function(l){l.isCheckStableRunning||-1!==l.lastRequestAnimationFrameId||(l.lastRequestAnimationFrameId=l.nativeRequestAnimationFrame.call(er,()=>{l.fakeTopEventTask||(l.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{l.lastRequestAnimationFrameId=-1,BL(l),l.isCheckStableRunning=!0,VL(l),l.isCheckStableRunning=!1},void 0,()=>{},()=>{})),l.fakeTopEventTask.invoke()}),BL(l))}(l)};l._inner=l._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(o,c,u,h,d,f)=>{try{return kH(l),o.invokeTask(u,h,d,f)}finally{(l.shouldCoalesceEventChangeDetection&&"eventTask"===h.type||l.shouldCoalesceRunChangeDetection)&&a(),VH(l)}},onInvoke:(o,c,u,h,d,f,m)=>{try{return kH(l),o.invoke(u,h,d,f,m)}finally{l.shouldCoalesceRunChangeDetection&&a(),VH(l)}},onHasTask:(o,c,u,h)=>{o.hasTask(u,h),c===u&&("microTask"==h.change?(l._hasPendingMicrotasks=h.microTask,BL(l),VL(l)):"macroTask"==h.change&&(l.hasPendingMacrotasks=h.macroTask))},onHandleError:(o,c,u,h)=>(o.handleError(u,h),l.runOutsideAngular(()=>l.onError.emit(h)),!1)})}(u)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Fn.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(Fn.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(a,o,c){return this._inner.run(a,o,c)}runTask(a,o,c,u){const h=this._inner,d=h.scheduleEventTask("NgZoneEvent: "+u,a,Ape,Sx,Sx);try{return h.runTask(d,o,c)}finally{h.cancelTask(d)}}runGuarded(a,o,c){return this._inner.runGuarded(a,o,c)}runOutsideAngular(a){return this._outer.run(a)}}const Ape={};function VL(l){if(0==l._nesting&&!l.hasPendingMicrotasks&&!l.isStable)try{l._nesting++,l.onMicrotaskEmpty.emit(null)}finally{if(l._nesting--,!l.hasPendingMicrotasks)try{l.runOutsideAngular(()=>l.onStable.emit(null))}finally{l.isStable=!0}}}function BL(l){l.hasPendingMicrotasks=!!(l._hasPendingMicrotasks||(l.shouldCoalesceEventChangeDetection||l.shouldCoalesceRunChangeDetection)&&-1!==l.lastRequestAnimationFrameId)}function kH(l){l._nesting++,l.isStable&&(l.isStable=!1,l.onUnstable.emit(null))}function VH(l){l._nesting--,VL(l)}class Ppe{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new pt,this.onMicrotaskEmpty=new pt,this.onStable=new pt,this.onError=new pt}run(a,o,c){return a.apply(o,c)}runGuarded(a,o,c){return a.apply(o,c)}runOutsideAngular(a){return a()}runTask(a,o,c,u){return a.apply(o,c)}}let UL=(()=>{class l{constructor(o){this._ngZone=o,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),o.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Fn.assertNotInAngularZone(),kL(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())kL(()=>{for(;0!==this._callbacks.length;){let o=this._callbacks.pop();clearTimeout(o.timeoutId),o.doneCb(this._didWork)}this._didWork=!1});else{let o=this.getPendingTasks();this._callbacks=this._callbacks.filter(c=>!c.updateCb||!c.updateCb(o)||(clearTimeout(c.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(o=>({source:o.source,creationLocation:o.creationLocation,data:o.data})):[]}addCallback(o,c,u){let h=-1;c&&c>0&&(h=setTimeout(()=>{this._callbacks=this._callbacks.filter(d=>d.timeoutId!==h),o(this._didWork,this.getPendingTasks())},c)),this._callbacks.push({doneCb:o,timeoutId:h,updateCb:u})}whenStable(o,c,u){if(u&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(o,c,u),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(o,c,u){return[]}}return l.\u0275fac=function(o){return new(o||l)(be(Fn))},l.\u0275prov=Xe({token:l,factory:l.\u0275fac}),l})(),BH=(()=>{class l{constructor(){this._applications=new Map,GL.addToWindow(this)}registerApplication(o,c){this._applications.set(o,c)}unregisterApplication(o){this._applications.delete(o)}unregisterAllApplications(){this._applications.clear()}getTestability(o){return this._applications.get(o)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(o,c=!0){return GL.findTestabilityInTree(this,o,c)}}return l.\u0275fac=function(o){return new(o||l)},l.\u0275prov=Xe({token:l,factory:l.\u0275fac}),l})();class Lpe{addToWindow(a){}findTestabilityInTree(a,o,c){return null}}let GL=new Lpe,UH=!0,GH=!1;let lu;const HH=new Sn("AllowMultipleToken");class zL{constructor(a,o){this.name=a,this.token=o}}function jH(l,a,o=[]){const c=`Platform: ${a}`,u=new Sn(c);return(h=[])=>{let d=WH();if(!d||d.injector.get(HH,!1))if(l)l(o.concat(h).concat({provide:u,useValue:!0}));else{const f=o.concat(h).concat({provide:u,useValue:!0},{provide:aS,useValue:"platform"});!function(l){if(lu&&!lu.destroyed&&!lu.injector.get(HH,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");lu=l.get(qH);const a=l.get(LH,null);a&&a.forEach(o=>o())}(Qn.create({providers:f,name:c}))}return function(l){const a=WH();if(!a)throw new Error("No platform exists!");if(!a.injector.get(l,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return a}(u)}}function WH(){return lu&&!lu.destroyed?lu:null}let qH=(()=>{class l{constructor(o){this._injector=o,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(o,c){const f=function(l,a){let o;return o="noop"===l?new Ppe:("zone.js"===l?void 0:l)||new Fn({enableLongStackTrace:(GH=!0,UH),shouldCoalesceEventChangeDetection:!!(null==a?void 0:a.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==a?void 0:a.ngZoneRunCoalescing)}),o}(c?c.ngZone:void 0,{ngZoneEventCoalescing:c&&c.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:c&&c.ngZoneRunCoalescing||!1}),m=[{provide:Fn,useValue:f}];return f.run(()=>{const g=Qn.create({providers:m,parent:this.injector,name:o.moduleType.name}),y=o.create(g),v=y.injector.get(Em,null);if(!v)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return f.runOutsideAngular(()=>{const _=f.onError.subscribe({next:b=>{v.handleError(b)}});y.onDestroy(()=>{HL(this._modules,y),_.unsubscribe()})}),function(l,a,o){try{const c=o();return dS(c)?c.catch(u=>{throw a.runOutsideAngular(()=>l.handleError(u)),u}):c}catch(c){throw a.runOutsideAngular(()=>l.handleError(c)),c}}(v,f,()=>{const _=y.injector.get(Iv);return _.runInitializers(),_.donePromise.then(()=>(tL(y.injector.get(wd,gx)||gx),this._moduleDoBootstrap(y),y))})})}bootstrapModule(o,c=[]){const u=XH({},c);return function(l,a,o){const c=new wL(o);return Promise.resolve(c)}(0,0,o).then(h=>this.bootstrapModuleFactory(h,u))}_moduleDoBootstrap(o){const c=o.injector.get(Om);if(o._bootstrapComponents.length>0)o._bootstrapComponents.forEach(u=>c.bootstrap(u));else{if(!o.instance.ngDoBootstrap)throw new Error(`The module ${vr(o.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.`);o.instance.ngDoBootstrap(c)}this._modules.push(o)}onDestroy(o){this._destroyListeners.push(o)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(o=>o.destroy()),this._destroyListeners.forEach(o=>o()),this._destroyed=!0}get destroyed(){return this._destroyed}}return l.\u0275fac=function(o){return new(o||l)(be(Qn))},l.\u0275prov=Xe({token:l,factory:l.\u0275fac}),l})();function XH(l,a){return Array.isArray(a)?a.reduce(XH,l):Object.assign(Object.assign({},l),a)}let Om=(()=>{class l{constructor(o,c,u,h,d){this._zone=o,this._injector=c,this._exceptionHandler=u,this._componentFactoryResolver=h,this._initStatus=d,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const f=new yt(g=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{g.next(this._stable),g.complete()})}),m=new yt(g=>{let y;this._zone.runOutsideAngular(()=>{y=this._zone.onStable.subscribe(()=>{Fn.assertNotInAngularZone(),kL(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,g.next(!0))})})});const v=this._zone.onUnstable.subscribe(()=>{Fn.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{g.next(!1)}))});return()=>{y.unsubscribe(),v.unsubscribe()}});this.isStable=lm(f,m.pipe(um()))}bootstrap(o,c){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let u;u=o instanceof S8?o:this._componentFactoryResolver.resolveComponentFactory(o),this.componentTypes.push(u.componentType);const h=function(l){return l.isBoundToModule}(u)?void 0:this._injector.get(hh),f=u.create(Qn.NULL,[],c||u.selector,h),m=f.location.nativeElement,g=f.injector.get(UL,null),y=g&&f.injector.get(BH);return g&&y&&y.registerApplication(m,g),f.onDestroy(()=>{this.detachView(f.hostView),HL(this.components,f),y&&y.unregisterApplication(m)}),this._loadComponent(f),f}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;for(let o of this._views)o.detectChanges()}catch(o){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(o))}finally{this._runningTick=!1}}attachView(o){const c=o;this._views.push(c),c.attachToAppRef(this)}detachView(o){const c=o;HL(this._views,c),c.detachFromAppRef()}_loadComponent(o){this.attachView(o.hostView),this.tick(),this.components.push(o),this._injector.get(OH,[]).concat(this._bootstrapListeners).forEach(u=>u(o))}ngOnDestroy(){this._views.slice().forEach(o=>o.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return l.\u0275fac=function(o){return new(o||l)(be(Fn),be(Qn),be(Em),be(wc),be(Iv))},l.\u0275prov=Xe({token:l,factory:l.\u0275fac}),l})();function HL(l,a){const o=l.indexOf(a);o>-1&&l.splice(o,1)}class Ox{}class $pe{}const Ype={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"};let Zpe=(()=>{class l{constructor(o,c){this._compiler=o,this._config=c||Ype}load(o){return this.loadAndCompile(o)}loadAndCompile(o){let[c,u]=o.split("#");return void 0===u&&(u="default"),Ve(452)(c).then(h=>h[u]).then(h=>KH(h,c,u)).then(h=>this._compiler.compileModuleAsync(h))}loadFactory(o){let[c,u]=o.split("#"),h="NgFactory";return void 0===u&&(u="default",h=""),Ve(452)(this._config.factoryPathPrefix+c+this._config.factoryPathSuffix).then(d=>d[u+h]).then(d=>KH(d,c,u))}}return l.\u0275fac=function(o){return new(o||l)(be(Lm),be($pe,8))},l.\u0275prov=Xe({token:l,factory:l.\u0275fac}),l})();function KH(l,a,o){if(!l)throw new Error(`Cannot find '${o}' in '${a}'`);return l}const ome=jH(null,"core",[{provide:Ui,useValue:"unknown"},{provide:qH,deps:[Qn]},{provide:BH,deps:[]},{provide:Px,deps:[]}]),hme=[{provide:Om,useClass:Om,deps:[Fn,Qn,Em,wc,Iv]},{provide:yfe,deps:[Fn],useFactory:function(l){let a=[];return l.onStable.subscribe(()=>{for(;a.length;)a.pop()()}),function(o){a.push(o)}}},{provide:Iv,useClass:Iv,deps:[[new Zo,LS]]},{provide:Lm,useClass:Lm,deps:[]},vpe,{provide:Td,useFactory:function(){return hde},deps:[]},{provide:wv,useFactory:function(){return dde},deps:[]},{provide:wd,useFactory:function(l){return tL(l=l||"undefined"!=typeof $localize&&$localize.locale||gx),l},deps:[[new Yy(wd),new Zo,new Qc]]},{provide:NH,useValue:"USD"}];let fme=(()=>{class l{constructor(o){}}return l.\u0275fac=function(o){return new(o||l)(be(Om))},l.\u0275mod=Yt({type:l}),l.\u0275inj=jt({providers:hme}),l})(),jx=null;function dh(){return jx}const Xn=new Sn("DocumentToken");let km=(()=>{class l{historyGo(o){throw new Error("Not implemented")}}return l.\u0275fac=function(o){return new(o||l)},l.\u0275prov=Xe({factory:dge,token:l,providedIn:"platform"}),l})();function dge(){return be(S7)}const fge=new Sn("Location Initialized");let S7=(()=>{class l extends km{constructor(o){super(),this._doc=o,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return dh().getBaseHref(this._doc)}onPopState(o){const c=dh().getGlobalEventTarget(this._doc,"window");return c.addEventListener("popstate",o,!1),()=>c.removeEventListener("popstate",o)}onHashChange(o){const c=dh().getGlobalEventTarget(this._doc,"window");return c.addEventListener("hashchange",o,!1),()=>c.removeEventListener("hashchange",o)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(o){this.location.pathname=o}pushState(o,c,u){T7()?this._history.pushState(o,c,u):this.location.hash=u}replaceState(o,c,u){T7()?this._history.replaceState(o,c,u):this.location.hash=u}forward(){this._history.forward()}back(){this._history.back()}historyGo(o=0){this._history.go(o)}getState(){return this._history.state}}return l.\u0275fac=function(o){return new(o||l)(be(Xn))},l.\u0275prov=Xe({factory:pge,token:l,providedIn:"platform"}),l})();function T7(){return!!window.history.pushState}function pge(){return new S7(be(Xn))}function iO(l,a){if(0==l.length)return a;if(0==a.length)return l;let o=0;return l.endsWith("/")&&o++,a.startsWith("/")&&o++,2==o?l+a.substring(1):1==o?l+a:l+"/"+a}function w7(l){const a=l.match(/#|\?|$/),o=a&&a.index||l.length;return l.slice(0,o-("/"===l[o-1]?1:0))+l.slice(o)}function xd(l){return l&&"?"!==l[0]?"?"+l:l}let Lv=(()=>{class l{historyGo(o){throw new Error("Not implemented")}}return l.\u0275fac=function(o){return new(o||l)},l.\u0275prov=Xe({factory:mge,token:l,providedIn:"root"}),l})();function mge(l){const a=be(Xn).location;return new C7(be(km),a&&a.origin||"")}const sO=new Sn("appBaseHref");let C7=(()=>{class l extends Lv{constructor(o,c){if(super(),this._platformLocation=o,this._removeListenerFns=[],null==c&&(c=this._platformLocation.getBaseHrefFromDOM()),null==c)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=c}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(o){this._removeListenerFns.push(this._platformLocation.onPopState(o),this._platformLocation.onHashChange(o))}getBaseHref(){return this._baseHref}prepareExternalUrl(o){return iO(this._baseHref,o)}path(o=!1){const c=this._platformLocation.pathname+xd(this._platformLocation.search),u=this._platformLocation.hash;return u&&o?`${c}${u}`:c}pushState(o,c,u,h){const d=this.prepareExternalUrl(u+xd(h));this._platformLocation.pushState(o,c,d)}replaceState(o,c,u,h){const d=this.prepareExternalUrl(u+xd(h));this._platformLocation.replaceState(o,c,d)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(o=0){var c,u;null===(u=(c=this._platformLocation).historyGo)||void 0===u||u.call(c,o)}}return l.\u0275fac=function(o){return new(o||l)(be(km),be(sO,8))},l.\u0275prov=Xe({token:l,factory:l.\u0275fac}),l})(),gge=(()=>{class l extends Lv{constructor(o,c){super(),this._platformLocation=o,this._baseHref="",this._removeListenerFns=[],null!=c&&(this._baseHref=c)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(o){this._removeListenerFns.push(this._platformLocation.onPopState(o),this._platformLocation.onHashChange(o))}getBaseHref(){return this._baseHref}path(o=!1){let c=this._platformLocation.hash;return null==c&&(c="#"),c.length>0?c.substring(1):c}prepareExternalUrl(o){const c=iO(this._baseHref,o);return c.length>0?"#"+c:c}pushState(o,c,u,h){let d=this.prepareExternalUrl(u+xd(h));0==d.length&&(d=this._platformLocation.pathname),this._platformLocation.pushState(o,c,d)}replaceState(o,c,u,h){let d=this.prepareExternalUrl(u+xd(h));0==d.length&&(d=this._platformLocation.pathname),this._platformLocation.replaceState(o,c,d)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(o=0){var c,u;null===(u=(c=this._platformLocation).historyGo)||void 0===u||u.call(c,o)}}return l.\u0275fac=function(o){return new(o||l)(be(km),be(sO,8))},l.\u0275prov=Xe({token:l,factory:l.\u0275fac}),l})(),Wx=(()=>{class l{constructor(o,c){this._subject=new pt,this._urlChangeListeners=[],this._platformStrategy=o;const u=this._platformStrategy.getBaseHref();this._platformLocation=c,this._baseHref=w7(x7(u)),this._platformStrategy.onPopState(h=>{this._subject.emit({url:this.path(!0),pop:!0,state:h.state,type:h.type})})}path(o=!1){return this.normalize(this._platformStrategy.path(o))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(o,c=""){return this.path()==this.normalize(o+xd(c))}normalize(o){return l.stripTrailingSlash(function(l,a){return l&&a.startsWith(l)?a.substring(l.length):a}(this._baseHref,x7(o)))}prepareExternalUrl(o){return o&&"/"!==o[0]&&(o="/"+o),this._platformStrategy.prepareExternalUrl(o)}go(o,c="",u=null){this._platformStrategy.pushState(u,"",o,c),this._notifyUrlChangeListeners(this.prepareExternalUrl(o+xd(c)),u)}replaceState(o,c="",u=null){this._platformStrategy.replaceState(u,"",o,c),this._notifyUrlChangeListeners(this.prepareExternalUrl(o+xd(c)),u)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(o=0){var c,u;null===(u=(c=this._platformStrategy).historyGo)||void 0===u||u.call(c,o)}onUrlChange(o){this._urlChangeListeners.push(o),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(c=>{this._notifyUrlChangeListeners(c.url,c.state)}))}_notifyUrlChangeListeners(o="",c){this._urlChangeListeners.forEach(u=>u(o,c))}subscribe(o,c,u){return this._subject.subscribe({next:o,error:c,complete:u})}}return l.\u0275fac=function(o){return new(o||l)(be(Lv),be(km))},l.normalizeQueryParams=xd,l.joinWithSlash=iO,l.stripTrailingSlash=w7,l.\u0275prov=Xe({factory:yge,token:l,providedIn:"root"}),l})();function yge(){return new Wx(be(Lv),be(km))}function x7(l){return l.replace(/\/index.html$/,"")}var $s=(()=>(($s=$s||{})[$s.Zero=0]="Zero",$s[$s.One=1]="One",$s[$s.Two=2]="Two",$s[$s.Few=3]="Few",$s[$s.Many=4]="Many",$s[$s.Other=5]="Other",$s))();const Cge=function(l){return function(l){const a=function(l){return l.toLowerCase().replace(/_/g,"-")}(l);let o=Yz(a);if(o)return o;const c=a.split("-")[0];if(o=Yz(c),o)return o;if("en"===c)return Hue;throw new Error(`Missing locale data for the locale "${l}".`)}(l)[un.PluralCase]};class eE{}let Qge=(()=>{class l extends eE{constructor(o){super(),this.locale=o}getPluralCategory(o,c){switch(Cge(c||this.locale)(o)){case $s.Zero:return"zero";case $s.One:return"one";case $s.Two:return"two";case $s.Few:return"few";case $s.Many:return"many";default:return"other"}}}return l.\u0275fac=function(o){return new(o||l)(be(wd))},l.\u0275prov=Xe({token:l,factory:l.\u0275fac}),l})();function O7(l,a){a=encodeURIComponent(a);for(const o of l.split(";")){const c=o.indexOf("="),[u,h]=-1==c?[o,""]:[o.slice(0,c),o.slice(c+1)];if(u.trim()===a)return decodeURIComponent(h)}return null}let _s=(()=>{class l{constructor(o,c,u,h){this._iterableDiffers=o,this._keyValueDiffers=c,this._ngEl=u,this._renderer=h,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(o){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof o?o.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(o){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof o?o.split(/\s+/):o,this._rawClass&&(uS(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const o=this._iterableDiffer.diff(this._rawClass);o&&this._applyIterableChanges(o)}else if(this._keyValueDiffer){const o=this._keyValueDiffer.diff(this._rawClass);o&&this._applyKeyValueChanges(o)}}_applyKeyValueChanges(o){o.forEachAddedItem(c=>this._toggleClass(c.key,c.currentValue)),o.forEachChangedItem(c=>this._toggleClass(c.key,c.currentValue)),o.forEachRemovedItem(c=>{c.previousValue&&this._toggleClass(c.key,!1)})}_applyIterableChanges(o){o.forEachAddedItem(c=>{if("string"!=typeof c.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${vr(c.item)}`);this._toggleClass(c.item,!0)}),o.forEachRemovedItem(c=>this._toggleClass(c.item,!1))}_applyClasses(o){o&&(Array.isArray(o)||o instanceof Set?o.forEach(c=>this._toggleClass(c,!0)):Object.keys(o).forEach(c=>this._toggleClass(c,!!o[c])))}_removeClasses(o){o&&(Array.isArray(o)||o instanceof Set?o.forEach(c=>this._toggleClass(c,!1)):Object.keys(o).forEach(c=>this._toggleClass(c,!1)))}_toggleClass(o,c){(o=o.trim())&&o.split(/\s+/g).forEach(u=>{c?this._renderer.addClass(this._ngEl.nativeElement,u):this._renderer.removeClass(this._ngEl.nativeElement,u)})}}return l.\u0275fac=function(o){return new(o||l)(O(Td),O(wv),O(kt),O(tr))},l.\u0275dir=Ze({type:l,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"}}),l})();class tye{constructor(a,o,c,u){this.$implicit=a,this.ngForOf=o,this.index=c,this.count=u}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Gi=(()=>{class l{constructor(o,c,u){this._viewContainer=o,this._template=c,this._differs=u,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(o){this._ngForOf=o,this._ngForOfDirty=!0}set ngForTrackBy(o){this._trackByFn=o}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(o){o&&(this._template=o)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const o=this._ngForOf;if(!this._differ&&o)try{this._differ=this._differs.find(o).create(this.ngForTrackBy)}catch(c){throw new Error(`Cannot find a differ supporting object '${o}' of type '${function(l){return l.name||typeof l}(o)}'. NgFor only supports binding to Iterables such as Arrays.`)}}if(this._differ){const o=this._differ.diff(this._ngForOf);o&&this._applyChanges(o)}}_applyChanges(o){const c=[];o.forEachOperation((u,h,d)=>{if(null==u.previousIndex){const f=this._viewContainer.createEmbeddedView(this._template,new tye(null,this._ngForOf,-1,-1),null===d?void 0:d),m=new N7(u,f);c.push(m)}else if(null==d)this._viewContainer.remove(null===h?void 0:h);else if(null!==h){const f=this._viewContainer.get(h);this._viewContainer.move(f,d);const m=new N7(u,f);c.push(m)}});for(let u=0;u<c.length;u++)this._perViewChange(c[u].view,c[u].record);for(let u=0,h=this._viewContainer.length;u<h;u++){const d=this._viewContainer.get(u);d.context.index=u,d.context.count=h,d.context.ngForOf=this._ngForOf}o.forEachIdentityChange(u=>{this._viewContainer.get(u.currentIndex).context.$implicit=u.item})}_perViewChange(o,c){o.context.$implicit=c.item}static ngTemplateContextGuard(o,c){return!0}}return l.\u0275fac=function(o){return new(o||l)(O(qn),O(bi),O(Td))},l.\u0275dir=Ze({type:l,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),l})();class N7{constructor(a,o){this.record=a,this.view=o}}let Mn=(()=>{class l{constructor(o,c){this._viewContainer=o,this._context=new rye,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=c}set ngIf(o){this._context.$implicit=this._context.ngIf=o,this._updateView()}set ngIfThen(o){F7("ngIfThen",o),this._thenTemplateRef=o,this._thenViewRef=null,this._updateView()}set ngIfElse(o){F7("ngIfElse",o),this._elseTemplateRef=o,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(o,c){return!0}}return l.\u0275fac=function(o){return new(o||l)(O(qn),O(bi))},l.\u0275dir=Ze({type:l,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),l})();class rye{constructor(){this.$implicit=null,this.ngIf=null}}function F7(l,a){if(a&&!a.createEmbeddedView)throw new Error(`${l} must be a TemplateRef, but received '${vr(a)}'.`)}let yO=(()=>{class l{constructor(o,c,u){this._ngEl=o,this._differs=c,this._renderer=u,this._ngStyle=null,this._differ=null}set ngStyle(o){this._ngStyle=o,!this._differ&&o&&(this._differ=this._differs.find(o).create())}ngDoCheck(){if(this._differ){const o=this._differ.diff(this._ngStyle);o&&this._applyChanges(o)}}_setStyle(o,c){const[u,h]=o.split(".");null!=(c=null!=c&&h?`${c}${h}`:c)?this._renderer.setStyle(this._ngEl.nativeElement,u,c):this._renderer.removeStyle(this._ngEl.nativeElement,u)}_applyChanges(o){o.forEachRemovedItem(c=>this._setStyle(c.key,null)),o.forEachAddedItem(c=>this._setStyle(c.key,c.currentValue)),o.forEachChangedItem(c=>this._setStyle(c.key,c.currentValue))}}return l.\u0275fac=function(o){return new(o||l)(O(kt),O(wv),O(tr))},l.\u0275dir=Ze({type:l,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"}}),l})(),fh=(()=>{class l{constructor(o){this._viewContainerRef=o,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null}ngOnChanges(o){if(o.ngTemplateOutlet){const c=this._viewContainerRef;this._viewRef&&c.remove(c.indexOf(this._viewRef)),this._viewRef=this.ngTemplateOutlet?c.createEmbeddedView(this.ngTemplateOutlet,this.ngTemplateOutletContext):null}else this._viewRef&&o.ngTemplateOutletContext&&this.ngTemplateOutletContext&&(this._viewRef.context=this.ngTemplateOutletContext)}}return l.\u0275fac=function(o){return new(o||l)(O(qn))},l.\u0275dir=Ze({type:l,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet"},features:[Ci]}),l})();class oye{createSubscription(a,o){return a.subscribe({next:o,error:c=>{throw c}})}dispose(a){a.unsubscribe()}onDestroy(a){a.unsubscribe()}}class aye{createSubscription(a,o){return a.then(o,c=>{throw c})}dispose(a){}onDestroy(a){}}const lye=new aye,cye=new oye;let zS=(()=>{class l{constructor(o){this._ref=o,this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null}ngOnDestroy(){this._subscription&&this._dispose()}transform(o){return this._obj?o!==this._obj?(this._dispose(),this.transform(o)):this._latestValue:(o&&this._subscribe(o),this._latestValue)}_subscribe(o){this._obj=o,this._strategy=this._selectStrategy(o),this._subscription=this._strategy.createSubscription(o,c=>this._updateLatestValue(o,c))}_selectStrategy(o){if(dS(o))return lye;if(cz(o))return cye;throw function(l,a){return Error(`InvalidPipeArgument: '${a}' for pipe '${vr(l)}'`)}(l,o)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(o,c){o===this._obj&&(this._latestValue=c,this._ref.markForCheck())}}return l.\u0275fac=function(o){return new(o||l)(O(go,16))},l.\u0275pipe=Ao({name:"async",type:l,pure:!1}),l})(),nE=(()=>{class l{constructor(o){this.differs=o,this.keyValues=[],this.compareFn=B7}transform(o,c=B7){if(!o||!(o instanceof Map)&&"object"!=typeof o)return null;this.differ||(this.differ=this.differs.find(o).create());const u=this.differ.diff(o),h=c!==this.compareFn;return u&&(this.keyValues=[],u.forEachItem(d=>{this.keyValues.push(function(l,a){return{key:l,value:a}}(d.key,d.currentValue))})),(u||h)&&(this.keyValues.sort(c),this.compareFn=c),this.keyValues}}return l.\u0275fac=function(o){return new(o||l)(O(wv,16))},l.\u0275pipe=Ao({name:"keyvalue",type:l,pure:!1}),l})();function B7(l,a){const o=l.key,c=a.key;if(o===c)return 0;if(void 0===o)return 1;if(void 0===c)return-1;if(null===o)return 1;if(null===c)return-1;if("string"==typeof o&&"string"==typeof c)return o<c?-1:1;if("number"==typeof o&&"number"==typeof c)return o-c;if("boolean"==typeof o&&"boolean"==typeof c)return o<c?-1:1;const u=String(o),h=String(c);return u==h?0:u<h?-1:1}let sr=(()=>{class l{}return l.\u0275fac=function(o){return new(o||l)},l.\u0275mod=Yt({type:l}),l.\u0275inj=jt({providers:[{provide:eE,useClass:Qge}]}),l})();const U7="browser";function ti(l){return l===U7}let G7=(()=>{class l{}return l.\u0275prov=Xe({token:l,providedIn:"root",factory:()=>new Mye(be(Xn),window)}),l})();class Mye{constructor(a,o){this.document=a,this.window=o,this.offset=()=>[0,0]}setOffset(a){this.offset=Array.isArray(a)?()=>a:a}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(a){this.supportsScrolling()&&this.window.scrollTo(a[0],a[1])}scrollToAnchor(a){if(!this.supportsScrolling())return;const o=function(l,a){const o=l.getElementById(a)||l.getElementsByName(a)[0];if(o)return o;if("function"==typeof l.createTreeWalker&&l.body&&(l.body.createShadowRoot||l.body.attachShadow)){const c=l.createTreeWalker(l.body,NodeFilter.SHOW_ELEMENT);let u=c.currentNode;for(;u;){const h=u.shadowRoot;if(h){const d=h.getElementById(a)||h.querySelector(`[name="${a}"]`);if(d)return d}u=c.nextNode()}}return null}(this.document,a);o&&(this.scrollToElement(o),this.attemptFocus(o))}setHistoryScrollRestoration(a){if(this.supportScrollRestoration()){const o=this.window.history;o&&o.scrollRestoration&&(o.scrollRestoration=a)}}scrollToElement(a){const o=a.getBoundingClientRect(),c=o.left+this.window.pageXOffset,u=o.top+this.window.pageYOffset,h=this.offset();this.window.scrollTo(c-h[0],u-h[1])}attemptFocus(a){return a.focus(),this.document.activeElement===a}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const a=z7(this.window.history)||z7(Object.getPrototypeOf(this.window.history));return!(!a||!a.writable&&!a.set)}catch(a){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(a){return!1}}}function z7(l){return Object.getOwnPropertyDescriptor(l,"scrollRestoration")}class H7{}class bO extends class extends class{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function(l){jx||(jx=l)}(new bO)}onAndCancel(a,o,c){return a.addEventListener(o,c,!1),()=>{a.removeEventListener(o,c,!1)}}dispatchEvent(a,o){a.dispatchEvent(o)}remove(a){a.parentNode&&a.parentNode.removeChild(a)}createElement(a,o){return(o=o||this.getDefaultDocument()).createElement(a)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(a){return a.nodeType===Node.ELEMENT_NODE}isShadowRoot(a){return a instanceof DocumentFragment}getGlobalEventTarget(a,o){return"window"===o?window:"document"===o?a:"body"===o?a.body:null}getBaseHref(a){const o=(HS=HS||document.querySelector("base"),HS?HS.getAttribute("href"):null);return null==o?null:function(l){rE=rE||document.createElement("a"),rE.setAttribute("href",l);const a=rE.pathname;return"/"===a.charAt(0)?a:`/${a}`}(o)}resetBaseElement(){HS=null}getUserAgent(){return window.navigator.userAgent}getCookie(a){return O7(document.cookie,a)}}let rE,HS=null;const j7=new Sn("TRANSITION_ID"),Lye=[{provide:LS,useFactory:function(l,a,o){return()=>{o.get(Iv).donePromise.then(()=>{const c=dh(),u=a.querySelectorAll(`style[ng-transition="${l}"]`);for(let h=0;h<u.length;h++)c.remove(u[h])})}},deps:[j7,Xn,Qn],multi:!0}];class SO{static init(){!function(l){GL=l}(new SO)}addToWindow(a){er.getAngularTestability=(c,u=!0)=>{const h=a.findTestabilityInTree(c,u);if(null==h)throw new Error("Could not find testability for element.");return h},er.getAllAngularTestabilities=()=>a.getAllTestabilities(),er.getAllAngularRootElements=()=>a.getAllRootElements(),er.frameworkStabilizers||(er.frameworkStabilizers=[]),er.frameworkStabilizers.push(c=>{const u=er.getAllAngularTestabilities();let h=u.length,d=!1;const f=function(m){d=d||m,h--,0==h&&c(d)};u.forEach(function(m){m.whenStable(f)})})}findTestabilityInTree(a,o,c){if(null==o)return null;const u=a.getTestability(o);return null!=u?u:c?dh().isShadowRoot(o)?this.findTestabilityInTree(a,o.host,!0):this.findTestabilityInTree(a,o.parentElement,!0):null}}let Oye=(()=>{class l{build(){return new XMLHttpRequest}}return l.\u0275fac=function(o){return new(o||l)},l.\u0275prov=Xe({token:l,factory:l.\u0275fac}),l})();const jS=new Sn("EventManagerPlugins");let sE=(()=>{class l{constructor(o,c){this._zone=c,this._eventNameToPlugin=new Map,o.forEach(u=>u.manager=this),this._plugins=o.slice().reverse()}addEventListener(o,c,u){return this._findPluginFor(c).addEventListener(o,c,u)}addGlobalEventListener(o,c,u){return this._findPluginFor(c).addGlobalEventListener(o,c,u)}getZone(){return this._zone}_findPluginFor(o){const c=this._eventNameToPlugin.get(o);if(c)return c;const u=this._plugins;for(let h=0;h<u.length;h++){const d=u[h];if(d.supports(o))return this._eventNameToPlugin.set(o,d),d}throw new Error(`No event manager plugin found for event ${o}`)}}return l.\u0275fac=function(o){return new(o||l)(be(jS),be(Fn))},l.\u0275prov=Xe({token:l,factory:l.\u0275fac}),l})();class TO{constructor(a){this._doc=a}addGlobalEventListener(a,o,c){const u=dh().getGlobalEventTarget(this._doc,a);if(!u)throw new Error(`Unsupported event target ${u} for event ${o}`);return this.addEventListener(u,o,c)}}let q7=(()=>{class l{constructor(){this._stylesSet=new Set}addStyles(o){const c=new Set;o.forEach(u=>{this._stylesSet.has(u)||(this._stylesSet.add(u),c.add(u))}),this.onStylesAdded(c)}onStylesAdded(o){}getAllStyles(){return Array.from(this._stylesSet)}}return l.\u0275fac=function(o){return new(o||l)},l.\u0275prov=Xe({token:l,factory:l.\u0275fac}),l})(),WS=(()=>{class l extends q7{constructor(o){super(),this._doc=o,this._hostNodes=new Map,this._hostNodes.set(o.head,[])}_addStylesToHost(o,c,u){o.forEach(h=>{const d=this._doc.createElement("style");d.textContent=h,u.push(c.appendChild(d))})}addHost(o){const c=[];this._addStylesToHost(this._stylesSet,o,c),this._hostNodes.set(o,c)}removeHost(o){const c=this._hostNodes.get(o);c&&c.forEach(X7),this._hostNodes.delete(o)}onStylesAdded(o){this._hostNodes.forEach((c,u)=>{this._addStylesToHost(o,u,c)})}ngOnDestroy(){this._hostNodes.forEach(o=>o.forEach(X7))}}return l.\u0275fac=function(o){return new(o||l)(be(Xn))},l.\u0275prov=Xe({token:l,factory:l.\u0275fac}),l})();function X7(l){dh().remove(l)}const wO={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},CO=/%COMP%/g;function oE(l,a,o){for(let c=0;c<a.length;c++){let u=a[c];Array.isArray(u)?oE(l,u,o):(u=u.replace(CO,l),o.push(u))}return o}function Z7(l){return a=>{if("__ngUnwrap__"===a)return l;!1===l(a)&&(a.preventDefault(),a.returnValue=!1)}}let aE=(()=>{class l{constructor(o,c,u){this.eventManager=o,this.sharedStylesHost=c,this.appId=u,this.rendererByCompId=new Map,this.defaultRenderer=new xO(o)}createRenderer(o,c){if(!o||!c)return this.defaultRenderer;switch(c.encapsulation){case Ki.Emulated:{let u=this.rendererByCompId.get(c.id);return u||(u=new Yye(this.eventManager,this.sharedStylesHost,c,this.appId),this.rendererByCompId.set(c.id,u)),u.applyToHost(o),u}case 1:case Ki.ShadowDom:return new Zye(this.eventManager,this.sharedStylesHost,o,c);default:if(!this.rendererByCompId.has(c.id)){const u=oE(c.id,c.styles,[]);this.sharedStylesHost.addStyles(u),this.rendererByCompId.set(c.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return l.\u0275fac=function(o){return new(o||l)(be(sE),be(WS),be(OS))},l.\u0275prov=Xe({token:l,factory:l.\u0275fac}),l})();class xO{constructor(a){this.eventManager=a,this.data=Object.create(null)}destroy(){}createElement(a,o){return o?document.createElementNS(wO[o]||o,a):document.createElement(a)}createComment(a){return document.createComment(a)}createText(a){return document.createTextNode(a)}appendChild(a,o){a.appendChild(o)}insertBefore(a,o,c){a&&a.insertBefore(o,c)}removeChild(a,o){a&&a.removeChild(o)}selectRootElement(a,o){let c="string"==typeof a?document.querySelector(a):a;if(!c)throw new Error(`The selector "${a}" did not match any elements`);return o||(c.textContent=""),c}parentNode(a){return a.parentNode}nextSibling(a){return a.nextSibling}setAttribute(a,o,c,u){if(u){o=u+":"+o;const h=wO[u];h?a.setAttributeNS(h,o,c):a.setAttribute(o,c)}else a.setAttribute(o,c)}removeAttribute(a,o,c){if(c){const u=wO[c];u?a.removeAttributeNS(u,o):a.removeAttribute(`${c}:${o}`)}else a.removeAttribute(o)}addClass(a,o){a.classList.add(o)}removeClass(a,o){a.classList.remove(o)}setStyle(a,o,c,u){u&(Gl.DashCase|Gl.Important)?a.style.setProperty(o,c,u&Gl.Important?"important":""):a.style[o]=c}removeStyle(a,o,c){c&Gl.DashCase?a.style.removeProperty(o):a.style[o]=""}setProperty(a,o,c){a[o]=c}setValue(a,o){a.nodeValue=o}listen(a,o,c){return"string"==typeof a?this.eventManager.addGlobalEventListener(a,o,Z7(c)):this.eventManager.addEventListener(a,o,Z7(c))}}class Yye extends xO{constructor(a,o,c,u){super(a),this.component=c;const h=oE(u+"-"+c.id,c.styles,[]);o.addStyles(h),this.contentAttr=function(l){return"_ngcontent-%COMP%".replace(CO,l)}(u+"-"+c.id),this.hostAttr=function(l){return"_nghost-%COMP%".replace(CO,l)}(u+"-"+c.id)}applyToHost(a){super.setAttribute(a,this.hostAttr,"")}createElement(a,o){const c=super.createElement(a,o);return super.setAttribute(c,this.contentAttr,""),c}}class Zye extends xO{constructor(a,o,c,u){super(a),this.sharedStylesHost=o,this.hostEl=c,this.shadowRoot=c.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const h=oE(u.id,u.styles,[]);for(let d=0;d<h.length;d++){const f=document.createElement("style");f.textContent=h[d],this.shadowRoot.appendChild(f)}}nodeOrShadowRoot(a){return a===this.hostEl?this.shadowRoot:a}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(a,o){return super.appendChild(this.nodeOrShadowRoot(a),o)}insertBefore(a,o,c){return super.insertBefore(this.nodeOrShadowRoot(a),o,c)}removeChild(a,o){return super.removeChild(this.nodeOrShadowRoot(a),o)}parentNode(a){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(a)))}}let Kye=(()=>{class l extends TO{constructor(o){super(o)}supports(o){return!0}addEventListener(o,c,u){return o.addEventListener(c,u,!1),()=>this.removeEventListener(o,c,u)}removeEventListener(o,c,u){return o.removeEventListener(c,u)}}return l.\u0275fac=function(o){return new(o||l)(be(Xn))},l.\u0275prov=Xe({token:l,factory:l.\u0275fac}),l})();const Q7=["alt","control","meta","shift"],ive={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},ej={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},sve={alt:l=>l.altKey,control:l=>l.ctrlKey,meta:l=>l.metaKey,shift:l=>l.shiftKey};let ove=(()=>{class l extends TO{constructor(o){super(o)}supports(o){return null!=l.parseEventName(o)}addEventListener(o,c,u){const h=l.parseEventName(c),d=l.eventCallback(h.fullKey,u,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>dh().onAndCancel(o,h.domEventName,d))}static parseEventName(o){const c=o.toLowerCase().split("."),u=c.shift();if(0===c.length||"keydown"!==u&&"keyup"!==u)return null;const h=l._normalizeKey(c.pop());let d="";if(Q7.forEach(m=>{const g=c.indexOf(m);g>-1&&(c.splice(g,1),d+=m+".")}),d+=h,0!=c.length||0===h.length)return null;const f={};return f.domEventName=u,f.fullKey=d,f}static getEventFullKey(o){let c="",u=function(l){let a=l.key;if(null==a){if(a=l.keyIdentifier,null==a)return"Unidentified";a.startsWith("U+")&&(a=String.fromCharCode(parseInt(a.substring(2),16)),3===l.location&&ej.hasOwnProperty(a)&&(a=ej[a]))}return ive[a]||a}(o);return u=u.toLowerCase()," "===u?u="space":"."===u&&(u="dot"),Q7.forEach(h=>{h!=u&&sve[h](o)&&(c+=h+".")}),c+=u,c}static eventCallback(o,c,u){return h=>{l.getEventFullKey(h)===o&&u.runGuarded(()=>c(h))}}static _normalizeKey(o){switch(o){case"esc":return"escape";default:return o}}}return l.\u0275fac=function(o){return new(o||l)(be(Xn))},l.\u0275prov=Xe({token:l,factory:l.\u0275fac}),l})();const pve=jH(ome,"browser",[{provide:Ui,useValue:U7},{provide:LH,useValue:function(){bO.makeCurrent(),SO.init()},multi:!0},{provide:Xn,useFactory:function(){return function(l){Ly=l}(document),document},deps:[]}]),mve=[[],{provide:aS,useValue:"root"},{provide:Em,useFactory:function(){return new Em},deps:[]},{provide:jS,useClass:Kye,multi:!0,deps:[Xn,Fn,Ui]},{provide:jS,useClass:ove,multi:!0,deps:[Xn]},[],{provide:aE,useClass:aE,deps:[sE,WS,OS]},{provide:Bf,useExisting:aE},{provide:q7,useExisting:WS},{provide:WS,useClass:WS,deps:[Xn]},{provide:UL,useClass:UL,deps:[Fn]},{provide:sE,useClass:sE,deps:[jS,Fn]},{provide:H7,useClass:Oye,deps:[]},[]];let AO=(()=>{class l{constructor(o){if(o)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(o){return{ngModule:l,providers:[{provide:OS,useValue:o.appId},{provide:j7,useExisting:OS},Lye]}}}return l.\u0275fac=function(o){return new(o||l)(be(l,12))},l.\u0275mod=Yt({type:l}),l.\u0275inj=jt({providers:mve,imports:[sr,fme]}),l})();function qt(...l){let a=l[l.length-1];return we(a)?(l.pop(),Di(l,a)):am(l)}"undefined"!=typeof window&&window;class ni extends tt{constructor(a){super(),this._value=a}get value(){return this.getValue()}_subscribe(a){const o=super._subscribe(a);return o&&!o.closed&&a.next(this._value),o}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new zt;return this._value}next(a){super.next(this._value=a)}}class wve extends re{notifyNext(a,o,c,u,h){this.destination.next(o)}notifyError(a,o){this.destination.error(a)}notifyComplete(a){this.destination.complete()}}class Cve extends re{constructor(a,o,c){super(),this.parent=a,this.outerValue=o,this.outerIndex=c,this.index=0}_next(a){this.parent.notifyNext(this.outerValue,a,this.outerIndex,this.index++,this)}_error(a){this.parent.notifyError(a,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}function xve(l,a,o,c,u=new Cve(l,o,c)){if(!u.closed)return a instanceof yt?a.subscribe(u):Or(a)(u)}const nj={};function rj(...l){let a,o;return we(l[l.length-1])&&(o=l.pop()),"function"==typeof l[l.length-1]&&(a=l.pop()),1===l.length&&Ie(l[0])&&(l=l[0]),am(l,o).lift(new Eve(a))}class Eve{constructor(a){this.resultSelector=a}call(a,o){return o.subscribe(new Mve(a,this.resultSelector))}}class Mve extends wve{constructor(a,o){super(a),this.resultSelector=o,this.active=0,this.values=[],this.observables=[]}_next(a){this.values.push(nj),this.observables.push(a)}_complete(){const a=this.observables,o=a.length;if(0===o)this.destination.complete();else{this.active=o,this.toRespond=o;for(let c=0;c<o;c++)this.add(xve(this,a[c],void 0,c))}}notifyComplete(a){0==(this.active-=1)&&this.destination.complete()}notifyNext(a,o,c){const u=this.values,d=this.toRespond?u[c]===nj?--this.toRespond:this.toRespond:0;u[c]=o,0===d&&(this.resultSelector?this._tryResultSelector(u):this.destination.next(u.slice()))}_tryResultSelector(a){let o;try{o=this.resultSelector.apply(this,a)}catch(c){return void this.destination.error(c)}this.destination.next(o)}}const lE=(()=>{function l(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return l.prototype=Object.create(Error.prototype),l})();function cE(...l){return Os(1)(qt(...l))}const Ov=new yt(l=>l.complete());function uE(l){return l?function(l){return new yt(a=>l.schedule(()=>a.complete()))}(l):Ov}function ij(l){return new yt(a=>{let o;try{o=l()}catch(u){return void a.error(u)}return(o?hi(o):uE()).subscribe(a)})}function Dc(l,a){return"function"==typeof a?o=>o.pipe(Dc((c,u)=>hi(l(c,u)).pipe(pe((h,d)=>a(c,h,u,d))))):o=>o.lift(new Ive(l))}class Ive{constructor(a){this.project=a}call(a,o){return o.subscribe(new Rve(a,this.project))}}class Rve extends gc{constructor(a,o){super(a),this.project=o,this.index=0}_next(a){let o;const c=this.index++;try{o=this.project(a,c)}catch(u){return void this.destination.error(u)}this._innerSub(o)}_innerSub(a){const o=this.innerSubscription;o&&o.unsubscribe();const c=new tl(this),u=this.destination;u.add(c),this.innerSubscription=Pl(a,c),this.innerSubscription!==c&&u.add(this.innerSubscription)}_complete(){const{innerSubscription:a}=this;(!a||a.closed)&&super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=void 0}notifyComplete(){this.innerSubscription=void 0,this.isStopped&&super._complete()}notifyNext(a){this.destination.next(a)}}const sj=(()=>{function l(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return l.prototype=Object.create(Error.prototype),l})();function Hf(l){return a=>0===l?uE():a.lift(new Pve(l))}class Pve{constructor(a){if(this.total=a,this.total<0)throw new sj}call(a,o){return o.subscribe(new Lve(a,this.total))}}class Lve extends re{constructor(a,o){super(a),this.total=o,this.count=0}_next(a){const o=this.total,c=++this.count;c<=o&&(this.destination.next(a),c===o&&(this.destination.complete(),this.unsubscribe()))}}function Md(...l){const a=l[l.length-1];return we(a)?(l.pop(),o=>cE(l,o,a)):o=>cE(l,o)}function oj(l,a){let o=!1;return arguments.length>=2&&(o=!0),function(u){return u.lift(new Ove(l,a,o))}}class Ove{constructor(a,o,c=!1){this.accumulator=a,this.seed=o,this.hasSeed=c}call(a,o){return o.subscribe(new Nve(a,this.accumulator,this.seed,this.hasSeed))}}class Nve extends re{constructor(a,o,c,u){super(a),this.accumulator=o,this._seed=c,this.hasSeed=u,this.index=0}get seed(){return this._seed}set seed(a){this.hasSeed=!0,this._seed=a}_next(a){if(this.hasSeed)return this._tryNext(a);this.seed=a,this.destination.next(a)}_tryNext(a){const o=this.index++;let c;try{c=this.accumulator(this.seed,a,o)}catch(u){this.destination.error(u)}this.seed=c,this.destination.next(c)}}function cs(l,a){return function(c){return c.lift(new Fve(l,a))}}class Fve{constructor(a,o){this.predicate=a,this.thisArg=o}call(a,o){return o.subscribe(new kve(a,this.predicate,this.thisArg))}}class kve extends re{constructor(a,o,c){super(a),this.predicate=o,this.thisArg=c,this.count=0}_next(a){let o;try{o=this.predicate.call(this.thisArg,a,this.count++)}catch(c){return void this.destination.error(c)}o&&this.destination.next(a)}}function Vm(l){return function(o){const c=new Vve(l),u=o.lift(c);return c.caught=u}}class Vve{constructor(a){this.selector=a}call(a,o){return o.subscribe(new Bve(a,this.selector,this.caught))}}class Bve extends gc{constructor(a,o,c){super(a),this.selector=o,this.caught=c}error(a){if(!this.isStopped){let o;try{o=this.selector(a,this.caught)}catch(h){return void super.error(h)}this._unsubscribeAndRecycle();const c=new tl(this);this.add(c);const u=Pl(o,c);u!==c&&this.add(u)}}}function Nv(l,a){return yi(l,a,1)}function RO(l){return function(o){return 0===l?uE():o.lift(new Uve(l))}}class Uve{constructor(a){if(this.total=a,this.total<0)throw new sj}call(a,o){return o.subscribe(new Gve(a,this.total))}}class Gve extends re{constructor(a,o){super(a),this.total=o,this.ring=new Array,this.count=0}_next(a){const o=this.ring,c=this.total,u=this.count++;o.length<c?o.push(a):o[u%c]=a}_complete(){const a=this.destination;let o=this.count;if(o>0){const c=this.count>=this.total?this.total:this.count,u=this.ring;for(let h=0;h<c;h++){const d=o++%c;a.next(u[d])}}a.complete()}}function aj(l=jve){return a=>a.lift(new zve(l))}class zve{constructor(a){this.errorFactory=a}call(a,o){return o.subscribe(new Hve(a,this.errorFactory))}}class Hve extends re{constructor(a,o){super(a),this.errorFactory=o,this.hasValue=!1}_next(a){this.hasValue=!0,this.destination.next(a)}_complete(){if(this.hasValue)return this.destination.complete();{let a;try{a=this.errorFactory()}catch(o){a=o}this.destination.error(a)}}}function jve(){return new lE}function lj(l=null){return a=>a.lift(new Wve(l))}class Wve{constructor(a){this.defaultValue=a}call(a,o){return o.subscribe(new qve(a,this.defaultValue))}}class qve extends re{constructor(a,o){super(a),this.defaultValue=o,this.isEmpty=!0}_next(a){this.isEmpty=!1,this.destination.next(a)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}function fu(l,a){const o=arguments.length>=2;return c=>c.pipe(l?cs((u,h)=>l(u,h,c)):Je,Hf(1),o?lj(a):aj(()=>new lE))}function jf(){}function Vs(l,a,o){return function(u){return u.lift(new $ve(l,a,o))}}class $ve{constructor(a,o,c){this.nextOrObserver=a,this.error=o,this.complete=c}call(a,o){return o.subscribe(new Yve(a,this.nextOrObserver,this.error,this.complete))}}class Yve extends re{constructor(a,o,c,u){super(a),this._tapNext=jf,this._tapError=jf,this._tapComplete=jf,this._tapError=c||jf,this._tapComplete=u||jf,_t(o)?(this._context=this,this._tapNext=o):o&&(this._context=o,this._tapNext=o.next||jf,this._tapError=o.error||jf,this._tapComplete=o.complete||jf)}_next(a){try{this._tapNext.call(this._context,a)}catch(o){return void this.destination.error(o)}this.destination.next(a)}_error(a){try{this._tapError.call(this._context,a)}catch(o){return void this.destination.error(o)}this.destination.error(a)}_complete(){try{this._tapComplete.call(this._context)}catch(a){return void this.destination.error(a)}return this.destination.complete()}}class Kve{constructor(a){this.callback=a}call(a,o){return o.subscribe(new Jve(a,this.callback))}}class Jve extends re{constructor(a,o){super(a),this.add(new L(o))}}class Dd{constructor(a,o){this.id=a,this.url=o}}class PO extends Dd{constructor(a,o,c="imperative",u=null){super(a,o),this.navigationTrigger=c,this.restoredState=u}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class qS extends Dd{constructor(a,o,c){super(a,o),this.urlAfterRedirects=c}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class cj extends Dd{constructor(a,o,c){super(a,o),this.reason=c}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Qve extends Dd{constructor(a,o,c){super(a,o),this.error=c}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class e_e extends Dd{constructor(a,o,c,u){super(a,o),this.urlAfterRedirects=c,this.state=u}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class t_e extends Dd{constructor(a,o,c,u){super(a,o),this.urlAfterRedirects=c,this.state=u}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class n_e extends Dd{constructor(a,o,c,u,h){super(a,o),this.urlAfterRedirects=c,this.state=u,this.shouldActivate=h}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class r_e extends Dd{constructor(a,o,c,u){super(a,o),this.urlAfterRedirects=c,this.state=u}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class i_e extends Dd{constructor(a,o,c,u){super(a,o),this.urlAfterRedirects=c,this.state=u}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class uj{constructor(a){this.route=a}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class hj{constructor(a){this.route=a}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class s_e{constructor(a){this.snapshot=a}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class o_e{constructor(a){this.snapshot=a}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class a_e{constructor(a){this.snapshot=a}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class l_e{constructor(a){this.snapshot=a}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class dj{constructor(a,o,c){this.routerEvent=a,this.position=o,this.anchor=c}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const Ur="primary";class c_e{constructor(a){this.params=a||{}}has(a){return Object.prototype.hasOwnProperty.call(this.params,a)}get(a){if(this.has(a)){const o=this.params[a];return Array.isArray(o)?o[0]:o}return null}getAll(a){if(this.has(a)){const o=this.params[a];return Array.isArray(o)?o:[o]}return[]}get keys(){return Object.keys(this.params)}}function Fv(l){return new c_e(l)}const fj="ngNavigationCancelingError";function LO(l){const a=Error("NavigationCancelingError: "+l);return a[fj]=!0,a}function h_e(l,a,o){const c=o.path.split("/");if(c.length>l.length||"full"===o.pathMatch&&(a.hasChildren()||c.length<l.length))return null;const u={};for(let h=0;h<c.length;h++){const d=c[h],f=l[h];if(d.startsWith(":"))u[d.substring(1)]=f;else if(d!==f.path)return null}return{consumed:l.slice(0,c.length),posParams:u}}function ph(l,a){const o=l?Object.keys(l):void 0,c=a?Object.keys(a):void 0;if(!o||!c||o.length!=c.length)return!1;let u;for(let h=0;h<o.length;h++)if(u=o[h],!pj(l[u],a[u]))return!1;return!0}function pj(l,a){if(Array.isArray(l)&&Array.isArray(a)){if(l.length!==a.length)return!1;const o=[...l].sort(),c=[...a].sort();return o.every((u,h)=>c[h]===u)}return l===a}function mj(l){return Array.prototype.concat.apply([],l)}function gj(l){return l.length>0?l[l.length-1]:null}function Jo(l,a){for(const o in l)l.hasOwnProperty(o)&&a(l[o],o)}function mh(l){return fx(l)?l:dS(l)?hi(Promise.resolve(l)):qt(l)}const p_e={exact:function _j(l,a,o){if(!Um(l.segments,a.segments)||!hE(l.segments,a.segments,o)||l.numberOfChildren!==a.numberOfChildren)return!1;for(const c in a.children)if(!l.children[c]||!_j(l.children[c],a.children[c],o))return!1;return!0},subset:bj},yj={exact:function(l,a){return ph(l,a)},subset:function(l,a){return Object.keys(a).length<=Object.keys(l).length&&Object.keys(a).every(o=>pj(l[o],a[o]))},ignored:()=>!0};function vj(l,a,o){return p_e[o.paths](l.root,a.root,o.matrixParams)&&yj[o.queryParams](l.queryParams,a.queryParams)&&!("exact"===o.fragment&&l.fragment!==a.fragment)}function bj(l,a,o){return Sj(l,a,a.segments,o)}function Sj(l,a,o,c){if(l.segments.length>o.length){const u=l.segments.slice(0,o.length);return!(!Um(u,o)||a.hasChildren()||!hE(u,o,c))}if(l.segments.length===o.length){if(!Um(l.segments,o)||!hE(l.segments,o,c))return!1;for(const u in a.children)if(!l.children[u]||!bj(l.children[u],a.children[u],c))return!1;return!0}{const u=o.slice(0,l.segments.length),h=o.slice(l.segments.length);return!!(Um(l.segments,u)&&hE(l.segments,u,c)&&l.children[Ur])&&Sj(l.children[Ur],a,h,c)}}function hE(l,a,o){return a.every((c,u)=>yj[o](l[u].parameters,c.parameters))}class Bm{constructor(a,o,c){this.root=a,this.queryParams=o,this.fragment=c}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Fv(this.queryParams)),this._queryParamMap}toString(){return __e.serialize(this)}}class Yr{constructor(a,o){this.segments=a,this.children=o,this.parent=null,Jo(o,(c,u)=>c.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return dE(this)}}class XS{constructor(a,o){this.path=a,this.parameters=o}get parameterMap(){return this._parameterMap||(this._parameterMap=Fv(this.parameters)),this._parameterMap}toString(){return xj(this)}}function Um(l,a){return l.length===a.length&&l.every((o,c)=>o.path===a[c].path)}class OO{}class Tj{parse(a){const o=new D_e(a);return new Bm(o.parseRootSegment(),o.parseQueryParams(),o.parseFragment())}serialize(a){return`${`/${$S(a.root,!0)}`}${function(l){const a=Object.keys(l).map(o=>{const c=l[o];return Array.isArray(c)?c.map(u=>`${fE(o)}=${fE(u)}`).join("&"):`${fE(o)}=${fE(c)}`}).filter(o=>!!o);return a.length?`?${a.join("&")}`:""}(a.queryParams)}${"string"==typeof a.fragment?`#${function(l){return encodeURI(l)}(a.fragment)}`:""}`}}const __e=new Tj;function dE(l){return l.segments.map(a=>xj(a)).join("/")}function $S(l,a){if(!l.hasChildren())return dE(l);if(a){const o=l.children[Ur]?$S(l.children[Ur],!1):"",c=[];return Jo(l.children,(u,h)=>{h!==Ur&&c.push(`${h}:${$S(u,!1)}`)}),c.length>0?`${o}(${c.join("//")})`:o}{const o=function(l,a){let o=[];return Jo(l.children,(c,u)=>{u===Ur&&(o=o.concat(a(c,u)))}),Jo(l.children,(c,u)=>{u!==Ur&&(o=o.concat(a(c,u)))}),o}(l,(c,u)=>u===Ur?[$S(l.children[Ur],!1)]:[`${u}:${$S(c,!1)}`]);return 1===Object.keys(l.children).length&&null!=l.children[Ur]?`${dE(l)}/${o[0]}`:`${dE(l)}/(${o.join("//")})`}}function wj(l){return encodeURIComponent(l).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function fE(l){return wj(l).replace(/%3B/gi,";")}function NO(l){return wj(l).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function pE(l){return decodeURIComponent(l)}function Cj(l){return pE(l.replace(/\+/g,"%20"))}function xj(l){return`${NO(l.path)}${function(l){return Object.keys(l).map(a=>`;${NO(a)}=${NO(l[a])}`).join("")}(l.parameters)}`}const w_e=/^[^\/()?;=#]+/;function mE(l){const a=l.match(w_e);return a?a[0]:""}const C_e=/^[^=?&#]+/,E_e=/^[^?&#]+/;class D_e{constructor(a){this.url=a,this.remaining=a}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Yr([],{}):new Yr([],this.parseChildren())}parseQueryParams(){const a={};if(this.consumeOptional("?"))do{this.parseQueryParam(a)}while(this.consumeOptional("&"));return a}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const a=[];for(this.peekStartsWith("(")||a.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),a.push(this.parseSegment());let o={};this.peekStartsWith("/(")&&(this.capture("/"),o=this.parseParens(!0));let c={};return this.peekStartsWith("(")&&(c=this.parseParens(!1)),(a.length>0||Object.keys(o).length>0)&&(c[Ur]=new Yr(a,o)),c}parseSegment(){const a=mE(this.remaining);if(""===a&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(a),new XS(pE(a),this.parseMatrixParams())}parseMatrixParams(){const a={};for(;this.consumeOptional(";");)this.parseParam(a);return a}parseParam(a){const o=mE(this.remaining);if(!o)return;this.capture(o);let c="";if(this.consumeOptional("=")){const u=mE(this.remaining);u&&(c=u,this.capture(c))}a[pE(o)]=pE(c)}parseQueryParam(a){const o=function(l){const a=l.match(C_e);return a?a[0]:""}(this.remaining);if(!o)return;this.capture(o);let c="";if(this.consumeOptional("=")){const d=function(l){const a=l.match(E_e);return a?a[0]:""}(this.remaining);d&&(c=d,this.capture(c))}const u=Cj(o),h=Cj(c);if(a.hasOwnProperty(u)){let d=a[u];Array.isArray(d)||(d=[d],a[u]=d),d.push(h)}else a[u]=h}parseParens(a){const o={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const c=mE(this.remaining),u=this.remaining[c.length];if("/"!==u&&")"!==u&&";"!==u)throw new Error(`Cannot parse url '${this.url}'`);let h;c.indexOf(":")>-1?(h=c.substr(0,c.indexOf(":")),this.capture(h),this.capture(":")):a&&(h=Ur);const d=this.parseChildren();o[h]=1===Object.keys(d).length?d[Ur]:new Yr([],d),this.consumeOptional("//")}return o}peekStartsWith(a){return this.remaining.startsWith(a)}consumeOptional(a){return!!this.peekStartsWith(a)&&(this.remaining=this.remaining.substring(a.length),!0)}capture(a){if(!this.consumeOptional(a))throw new Error(`Expected "${a}".`)}}class Ej{constructor(a){this._root=a}get root(){return this._root.value}parent(a){const o=this.pathFromRoot(a);return o.length>1?o[o.length-2]:null}children(a){const o=FO(a,this._root);return o?o.children.map(c=>c.value):[]}firstChild(a){const o=FO(a,this._root);return o&&o.children.length>0?o.children[0].value:null}siblings(a){const o=kO(a,this._root);return o.length<2?[]:o[o.length-2].children.map(u=>u.value).filter(u=>u!==a)}pathFromRoot(a){return kO(a,this._root).map(o=>o.value)}}function FO(l,a){if(l===a.value)return a;for(const o of a.children){const c=FO(l,o);if(c)return c}return null}function kO(l,a){if(l===a.value)return[a];for(const o of a.children){const c=kO(l,o);if(c.length)return c.unshift(a),c}return[]}class Ad{constructor(a,o){this.value=a,this.children=o}toString(){return`TreeNode(${this.value})`}}function YS(l){const a={};return l&&l.children.forEach(o=>a[o.value.outlet]=o),a}class Mj extends Ej{constructor(a,o){super(a),this.snapshot=o,VO(this,a)}toString(){return this.snapshot.toString()}}function Dj(l,a){const o=function(l,a){const d=new gE([],{},{},"",{},Ur,a,null,l.root,-1,{});return new Ij("",new Ad(d,[]))}(l,a),c=new ni([new XS("",{})]),u=new ni({}),h=new ni({}),d=new ni({}),f=new ni(""),m=new Gm(c,u,d,f,h,Ur,a,o.root);return m.snapshot=o.root,new Mj(new Ad(m,[]),o)}class Gm{constructor(a,o,c,u,h,d,f,m){this.url=a,this.params=o,this.queryParams=c,this.fragment=u,this.data=h,this.outlet=d,this.component=f,this._futureSnapshot=m}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(pe(a=>Fv(a)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(pe(a=>Fv(a)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Aj(l,a="emptyOnly"){const o=l.pathFromRoot;let c=0;if("always"!==a)for(c=o.length-1;c>=1;){const u=o[c],h=o[c-1];if(u.routeConfig&&""===u.routeConfig.path)c--;else{if(h.component)break;c--}}return function(l){return l.reduce((a,o)=>({params:Object.assign(Object.assign({},a.params),o.params),data:Object.assign(Object.assign({},a.data),o.data),resolve:Object.assign(Object.assign({},a.resolve),o._resolvedData)}),{params:{},data:{},resolve:{}})}(o.slice(c))}class gE{constructor(a,o,c,u,h,d,f,m,g,y,v){this.url=a,this.params=o,this.queryParams=c,this.fragment=u,this.data=h,this.outlet=d,this.component=f,this.routeConfig=m,this._urlSegment=g,this._lastPathIndex=y,this._resolve=v}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Fv(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Fv(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(c=>c.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Ij extends Ej{constructor(a,o){super(o),this.url=a,VO(this,o)}toString(){return Rj(this._root)}}function VO(l,a){a.value._routerState=l,a.children.forEach(o=>VO(l,o))}function Rj(l){const a=l.children.length>0?` { ${l.children.map(Rj).join(", ")} } `:"";return`${l.value}${a}`}function BO(l){if(l.snapshot){const a=l.snapshot,o=l._futureSnapshot;l.snapshot=o,ph(a.queryParams,o.queryParams)||l.queryParams.next(o.queryParams),a.fragment!==o.fragment&&l.fragment.next(o.fragment),ph(a.params,o.params)||l.params.next(o.params),function(l,a){if(l.length!==a.length)return!1;for(let o=0;o<l.length;++o)if(!ph(l[o],a[o]))return!1;return!0}(a.url,o.url)||l.url.next(o.url),ph(a.data,o.data)||l.data.next(o.data)}else l.snapshot=l._futureSnapshot,l.data.next(l._futureSnapshot.data)}function UO(l,a){return ph(l.params,a.params)&&function(l,a){return Um(l,a)&&l.every((o,c)=>ph(o.parameters,a[c].parameters))}(l.url,a.url)&&!(!l.parent!=!a.parent)&&(!l.parent||UO(l.parent,a.parent))}function yE(l,a,o){if(o&&l.shouldReuseRoute(a.value,o.value.snapshot)){const c=o.value;c._futureSnapshot=a.value;const u=function(l,a,o){return a.children.map(c=>{for(const u of o.children)if(l.shouldReuseRoute(c.value,u.value.snapshot))return yE(l,c,u);return yE(l,c)})}(l,a,o);return new Ad(c,u)}{if(l.shouldAttach(a.value)){const h=l.retrieve(a.value);if(null!==h){const d=h.route;return Pj(a,d),d}}const c=function(l){return new Gm(new ni(l.url),new ni(l.params),new ni(l.queryParams),new ni(l.fragment),new ni(l.data),l.outlet,l.component,l)}(a.value),u=a.children.map(h=>yE(l,h));return new Ad(c,u)}}function Pj(l,a){if(l.value.routeConfig!==a.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(l.children.length!==a.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");a.value._futureSnapshot=l.value;for(let o=0;o<l.children.length;++o)Pj(l.children[o],a.children[o])}function vE(l){return"object"==typeof l&&null!=l&&!l.outlets&&!l.segmentPath}function ZS(l){return"object"==typeof l&&null!=l&&l.outlets}function GO(l,a,o,c,u){let h={};return c&&Jo(c,(d,f)=>{h[f]=Array.isArray(d)?d.map(m=>`${m}`):`${d}`}),new Bm(o.root===l?a:Lj(o.root,l,a),h,u)}function Lj(l,a,o){const c={};return Jo(l.children,(u,h)=>{c[h]=u===a?o:Lj(u,a,o)}),new Yr(l.segments,c)}class Oj{constructor(a,o,c){if(this.isAbsolute=a,this.numberOfDoubleDots=o,this.commands=c,a&&c.length>0&&vE(c[0]))throw new Error("Root segment cannot have matrix parameters");const u=c.find(ZS);if(u&&u!==gj(c))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class zO{constructor(a,o,c){this.segmentGroup=a,this.processChildren=o,this.index=c}}function Nj(l,a,o){if(l||(l=new Yr([],{})),0===l.segments.length&&l.hasChildren())return _E(l,a,o);const c=function(l,a,o){let c=0,u=a;const h={match:!1,pathIndex:0,commandIndex:0};for(;u<l.segments.length;){if(c>=o.length)return h;const d=l.segments[u],f=o[c];if(ZS(f))break;const m=`${f}`,g=c<o.length-1?o[c+1]:null;if(u>0&&void 0===m)break;if(m&&g&&"object"==typeof g&&void 0===g.outlets){if(!kj(m,g,d))return h;c+=2}else{if(!kj(m,{},d))return h;c++}u++}return{match:!0,pathIndex:u,commandIndex:c}}(l,a,o),u=o.slice(c.commandIndex);if(c.match&&c.pathIndex<l.segments.length){const h=new Yr(l.segments.slice(0,c.pathIndex),{});return h.children[Ur]=new Yr(l.segments.slice(c.pathIndex),l.children),_E(h,0,u)}return c.match&&0===u.length?new Yr(l.segments,{}):c.match&&!l.hasChildren()?HO(l,a,o):c.match?_E(l,0,u):HO(l,a,o)}function _E(l,a,o){if(0===o.length)return new Yr(l.segments,{});{const c=function(l){return ZS(l[0])?l[0].outlets:{[Ur]:l}}(o),u={};return Jo(c,(h,d)=>{"string"==typeof h&&(h=[h]),null!==h&&(u[d]=Nj(l.children[d],a,h))}),Jo(l.children,(h,d)=>{void 0===c[d]&&(u[d]=h)}),new Yr(l.segments,u)}}function HO(l,a,o){const c=l.segments.slice(0,a);let u=0;for(;u<o.length;){const h=o[u];if(ZS(h)){const m=U_e(h.outlets);return new Yr(c,m)}if(0===u&&vE(o[0])){c.push(new XS(l.segments[a].path,Fj(o[0]))),u++;continue}const d=ZS(h)?h.outlets[Ur]:`${h}`,f=u<o.length-1?o[u+1]:null;d&&f&&vE(f)?(c.push(new XS(d,Fj(f))),u+=2):(c.push(new XS(d,{})),u++)}return new Yr(c,{})}function U_e(l){const a={};return Jo(l,(o,c)=>{"string"==typeof o&&(o=[o]),null!==o&&(a[c]=HO(new Yr([],{}),0,o))}),a}function Fj(l){const a={};return Jo(l,(o,c)=>a[c]=`${o}`),a}function kj(l,a,o){return l==o.path&&ph(a,o.parameters)}class z_e{constructor(a,o,c,u){this.routeReuseStrategy=a,this.futureState=o,this.currState=c,this.forwardEvent=u}activate(a){const o=this.futureState._root,c=this.currState?this.currState._root:null;this.deactivateChildRoutes(o,c,a),BO(this.futureState.root),this.activateChildRoutes(o,c,a)}deactivateChildRoutes(a,o,c){const u=YS(o);a.children.forEach(h=>{const d=h.value.outlet;this.deactivateRoutes(h,u[d],c),delete u[d]}),Jo(u,(h,d)=>{this.deactivateRouteAndItsChildren(h,c)})}deactivateRoutes(a,o,c){const u=a.value,h=o?o.value:null;if(u===h)if(u.component){const d=c.getContext(u.outlet);d&&this.deactivateChildRoutes(a,o,d.children)}else this.deactivateChildRoutes(a,o,c);else h&&this.deactivateRouteAndItsChildren(o,c)}deactivateRouteAndItsChildren(a,o){this.routeReuseStrategy.shouldDetach(a.value.snapshot)?this.detachAndStoreRouteSubtree(a,o):this.deactivateRouteAndOutlet(a,o)}detachAndStoreRouteSubtree(a,o){const c=o.getContext(a.value.outlet);if(c&&c.outlet){const u=c.outlet.detach(),h=c.children.onOutletDeactivated();this.routeReuseStrategy.store(a.value.snapshot,{componentRef:u,route:a,contexts:h})}}deactivateRouteAndOutlet(a,o){const c=o.getContext(a.value.outlet),u=c&&a.value.component?c.children:o,h=YS(a);for(const d of Object.keys(h))this.deactivateRouteAndItsChildren(h[d],u);c&&c.outlet&&(c.outlet.deactivate(),c.children.onOutletDeactivated(),c.attachRef=null,c.resolver=null,c.route=null)}activateChildRoutes(a,o,c){const u=YS(o);a.children.forEach(h=>{this.activateRoutes(h,u[h.value.outlet],c),this.forwardEvent(new l_e(h.value.snapshot))}),a.children.length&&this.forwardEvent(new o_e(a.value.snapshot))}activateRoutes(a,o,c){const u=a.value,h=o?o.value:null;if(BO(u),u===h)if(u.component){const d=c.getOrCreateContext(u.outlet);this.activateChildRoutes(a,o,d.children)}else this.activateChildRoutes(a,o,c);else if(u.component){const d=c.getOrCreateContext(u.outlet);if(this.routeReuseStrategy.shouldAttach(u.snapshot)){const f=this.routeReuseStrategy.retrieve(u.snapshot);this.routeReuseStrategy.store(u.snapshot,null),d.children.onOutletReAttached(f.contexts),d.attachRef=f.componentRef,d.route=f.route.value,d.outlet&&d.outlet.attach(f.componentRef,f.route.value),Vj(f.route)}else{const f=function(l){for(let a=l.parent;a;a=a.parent){const o=a.routeConfig;if(o&&o._loadedConfig)return o._loadedConfig;if(o&&o.component)return null}return null}(u.snapshot),m=f?f.module.componentFactoryResolver:null;d.attachRef=null,d.route=u,d.resolver=m,d.outlet&&d.outlet.activateWith(u,m),this.activateChildRoutes(a,null,d.children)}}else this.activateChildRoutes(a,null,c)}}function Vj(l){BO(l.value),l.children.forEach(Vj)}class jO{constructor(a,o){this.routes=a,this.module=o}}function Wf(l){return"function"==typeof l}function zm(l){return l instanceof Bm}const KS=Symbol("INITIAL_VALUE");function JS(){return Dc(l=>rj(l.map(a=>a.pipe(Hf(1),Md(KS)))).pipe(oj((a,o)=>{let c=!1;return o.reduce((u,h,d)=>u!==KS?u:(h===KS&&(c=!0),c||!1!==h&&d!==o.length-1&&!zm(h)?u:h),a)},KS),cs(a=>a!==KS),pe(a=>zm(a)?a:!0===a),Hf(1)))}let Bj=(()=>{class l{}return l.\u0275fac=function(o){return new(o||l)},l.\u0275cmp=Qe({type:l,selectors:[["ng-component"]],decls:1,vars:0,template:function(o,c){1&o&&xe(0,"router-outlet")},directives:function(){return[KO]},encapsulation:2}),l})();function Uj(l,a=""){for(let o=0;o<l.length;o++){const c=l[o];Y_e(c,Z_e(a,c))}}function Y_e(l,a){l.children&&Uj(l.children,a)}function Z_e(l,a){return a?l||a.path?l&&!a.path?`${l}/`:!l&&a.path?a.path:`${l}/${a.path}`:"":l}function WO(l){const a=l.children&&l.children.map(WO),o=a?Object.assign(Object.assign({},l),{children:a}):Object.assign({},l);return!o.component&&(a||o.loadChildren)&&o.outlet&&o.outlet!==Ur&&(o.component=Bj),o}function Ac(l){return l.outlet||Ur}function Gj(l,a){const o=l.filter(c=>Ac(c)===a);return o.push(...l.filter(c=>Ac(c)!==a)),o}const zj={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function bE(l,a,o){var c;if(""===a.path)return"full"===a.pathMatch&&(l.hasChildren()||o.length>0)?Object.assign({},zj):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const h=(a.matcher||h_e)(o,l,a);if(!h)return Object.assign({},zj);const d={};Jo(h.posParams,(m,g)=>{d[g]=m.path});const f=h.consumed.length>0?Object.assign(Object.assign({},d),h.consumed[h.consumed.length-1].parameters):d;return{matched:!0,consumedSegments:h.consumed,lastChild:h.consumed.length,parameters:f,positionalParamSegments:null!==(c=h.posParams)&&void 0!==c?c:{}}}function SE(l,a,o,c,u="corrected"){if(o.length>0&&function(l,a,o){return o.some(c=>TE(l,a,c)&&Ac(c)!==Ur)}(l,o,c)){const d=new Yr(a,function(l,a,o,c){const u={};u[Ur]=c,c._sourceSegment=l,c._segmentIndexShift=a.length;for(const h of o)if(""===h.path&&Ac(h)!==Ur){const d=new Yr([],{});d._sourceSegment=l,d._segmentIndexShift=a.length,u[Ac(h)]=d}return u}(l,a,c,new Yr(o,l.children)));return d._sourceSegment=l,d._segmentIndexShift=a.length,{segmentGroup:d,slicedSegments:[]}}if(0===o.length&&function(l,a,o){return o.some(c=>TE(l,a,c))}(l,o,c)){const d=new Yr(l.segments,function(l,a,o,c,u,h){const d={};for(const f of c)if(TE(l,o,f)&&!u[Ac(f)]){const m=new Yr([],{});m._sourceSegment=l,m._segmentIndexShift="legacy"===h?l.segments.length:a.length,d[Ac(f)]=m}return Object.assign(Object.assign({},u),d)}(l,a,o,c,l.children,u));return d._sourceSegment=l,d._segmentIndexShift=a.length,{segmentGroup:d,slicedSegments:o}}const h=new Yr(l.segments,l.children);return h._sourceSegment=l,h._segmentIndexShift=a.length,{segmentGroup:h,slicedSegments:o}}function TE(l,a,o){return(!(l.hasChildren()||a.length>0)||"full"!==o.pathMatch)&&""===o.path}function Hj(l,a,o,c){return!!(Ac(l)===c||c!==Ur&&TE(a,o,l))&&("**"===l.path||bE(a,l,o).matched)}function jj(l,a,o){return 0===a.length&&!l.children[o]}class QS{constructor(a){this.segmentGroup=a||null}}class Wj{constructor(a){this.urlTree=a}}function wE(l){return new yt(a=>a.error(new QS(l)))}function qj(l){return new yt(a=>a.error(new Wj(l)))}function t0e(l){return new yt(a=>a.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${l}'`)))}class i0e{constructor(a,o,c,u,h){this.configLoader=o,this.urlSerializer=c,this.urlTree=u,this.config=h,this.allowRedirects=!0,this.ngModule=a.get(hh)}apply(){const a=SE(this.urlTree.root,[],[],this.config).segmentGroup,o=new Yr(a.segments,a.children);return this.expandSegmentGroup(this.ngModule,this.config,o,Ur).pipe(pe(h=>this.createUrlTree(qO(h),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Vm(h=>{if(h instanceof Wj)return this.allowRedirects=!1,this.match(h.urlTree);throw h instanceof QS?this.noMatchError(h):h}))}match(a){return this.expandSegmentGroup(this.ngModule,this.config,a.root,Ur).pipe(pe(u=>this.createUrlTree(qO(u),a.queryParams,a.fragment))).pipe(Vm(u=>{throw u instanceof QS?this.noMatchError(u):u}))}noMatchError(a){return new Error(`Cannot match any routes. URL Segment: '${a.segmentGroup}'`)}createUrlTree(a,o,c){const u=a.segments.length>0?new Yr([],{[Ur]:a}):a;return new Bm(u,o,c)}expandSegmentGroup(a,o,c,u){return 0===c.segments.length&&c.hasChildren()?this.expandChildren(a,o,c).pipe(pe(h=>new Yr([],h))):this.expandSegment(a,c,o,c.segments,u,!0)}expandChildren(a,o,c){const u=[];for(const h of Object.keys(c.children))"primary"===h?u.unshift(h):u.push(h);return hi(u).pipe(Nv(h=>{const d=c.children[h],f=Gj(o,h);return this.expandSegmentGroup(a,f,d,h).pipe(pe(m=>({segment:m,outlet:h})))}),oj((h,d)=>(h[d.outlet]=d.segment,h),{}),function(l,a){const o=arguments.length>=2;return c=>c.pipe(l?cs((u,h)=>l(u,h,c)):Je,RO(1),o?lj(a):aj(()=>new lE))}())}expandSegment(a,o,c,u,h,d){return hi(c).pipe(Nv(f=>this.expandSegmentAgainstRoute(a,o,c,f,u,h,d).pipe(Vm(g=>{if(g instanceof QS)return qt(null);throw g}))),fu(f=>!!f),Vm((f,m)=>{if(f instanceof lE||"EmptyError"===f.name){if(jj(o,u,h))return qt(new Yr([],{}));throw new QS(o)}throw f}))}expandSegmentAgainstRoute(a,o,c,u,h,d,f){return Hj(u,o,h,d)?void 0===u.redirectTo?this.matchSegmentAgainstRoute(a,o,u,h,d):f&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(a,o,c,u,h,d):wE(o):wE(o)}expandSegmentAgainstRouteUsingRedirect(a,o,c,u,h,d){return"**"===u.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(a,c,u,d):this.expandRegularSegmentAgainstRouteUsingRedirect(a,o,c,u,h,d)}expandWildCardWithParamsAgainstRouteUsingRedirect(a,o,c,u){const h=this.applyRedirectCommands([],c.redirectTo,{});return c.redirectTo.startsWith("/")?qj(h):this.lineralizeSegments(c,h).pipe(yi(d=>{const f=new Yr(d,{});return this.expandSegment(a,f,o,d,u,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(a,o,c,u,h,d){const{matched:f,consumedSegments:m,lastChild:g,positionalParamSegments:y}=bE(o,u,h);if(!f)return wE(o);const v=this.applyRedirectCommands(m,u.redirectTo,y);return u.redirectTo.startsWith("/")?qj(v):this.lineralizeSegments(u,v).pipe(yi(_=>this.expandSegment(a,o,c,_.concat(h.slice(g)),d,!1)))}matchSegmentAgainstRoute(a,o,c,u,h){if("**"===c.path)return c.loadChildren?(c._loadedConfig?qt(c._loadedConfig):this.configLoader.load(a.injector,c)).pipe(pe(_=>(c._loadedConfig=_,new Yr(u,{})))):qt(new Yr(u,{}));const{matched:d,consumedSegments:f,lastChild:m}=bE(o,c,u);if(!d)return wE(o);const g=u.slice(m);return this.getChildConfig(a,c,u).pipe(yi(v=>{const _=v.module,b=v.routes,{segmentGroup:w,slicedSegments:C}=SE(o,f,g,b),E=new Yr(w.segments,w.children);if(0===C.length&&E.hasChildren())return this.expandChildren(_,b,E).pipe(pe(P=>new Yr(f,P)));if(0===b.length&&0===C.length)return qt(new Yr(f,{}));const M=Ac(c)===h;return this.expandSegment(_,E,b,C,M?Ur:h,!0).pipe(pe(R=>new Yr(f.concat(R.segments),R.children)))}))}getChildConfig(a,o,c){return o.children?qt(new jO(o.children,a)):o.loadChildren?void 0!==o._loadedConfig?qt(o._loadedConfig):this.runCanLoadGuards(a.injector,o,c).pipe(yi(u=>u?this.configLoader.load(a.injector,o).pipe(pe(h=>(o._loadedConfig=h,h))):function(l){return new yt(a=>a.error(LO(`Cannot load children because the guard of the route "path: '${l.path}'" returned false`)))}(o))):qt(new jO([],a))}runCanLoadGuards(a,o,c){const u=o.canLoad;return u&&0!==u.length?qt(u.map(d=>{const f=a.get(d);let m;if(function(l){return l&&Wf(l.canLoad)}(f))m=f.canLoad(o,c);else{if(!Wf(f))throw new Error("Invalid CanLoad guard");m=f(o,c)}return mh(m)})).pipe(JS(),Vs(d=>{if(!zm(d))return;const f=LO(`Redirecting to "${this.urlSerializer.serialize(d)}"`);throw f.url=d,f}),pe(d=>!0===d)):qt(!0)}lineralizeSegments(a,o){let c=[],u=o.root;for(;;){if(c=c.concat(u.segments),0===u.numberOfChildren)return qt(c);if(u.numberOfChildren>1||!u.children[Ur])return t0e(a.redirectTo);u=u.children[Ur]}}applyRedirectCommands(a,o,c){return this.applyRedirectCreatreUrlTree(o,this.urlSerializer.parse(o),a,c)}applyRedirectCreatreUrlTree(a,o,c,u){const h=this.createSegmentGroup(a,o.root,c,u);return new Bm(h,this.createQueryParams(o.queryParams,this.urlTree.queryParams),o.fragment)}createQueryParams(a,o){const c={};return Jo(a,(u,h)=>{if("string"==typeof u&&u.startsWith(":")){const f=u.substring(1);c[h]=o[f]}else c[h]=u}),c}createSegmentGroup(a,o,c,u){const h=this.createSegments(a,o.segments,c,u);let d={};return Jo(o.children,(f,m)=>{d[m]=this.createSegmentGroup(a,f,c,u)}),new Yr(h,d)}createSegments(a,o,c,u){return o.map(h=>h.path.startsWith(":")?this.findPosParam(a,h,u):this.findOrReturn(h,c))}findPosParam(a,o,c){const u=c[o.path.substring(1)];if(!u)throw new Error(`Cannot redirect to '${a}'. Cannot find '${o.path}'.`);return u}findOrReturn(a,o){let c=0;for(const u of o){if(u.path===a.path)return o.splice(c),u;c++}return a}}function qO(l){const a={};for(const c of Object.keys(l.children)){const h=qO(l.children[c]);(h.segments.length>0||h.hasChildren())&&(a[c]=h)}return function(l){if(1===l.numberOfChildren&&l.children[Ur]){const a=l.children[Ur];return new Yr(l.segments.concat(a.segments),a.children)}return l}(new Yr(l.segments,a))}class Xj{constructor(a){this.path=a,this.route=this.path[this.path.length-1]}}class CE{constructor(a,o){this.component=a,this.route=o}}function a0e(l,a,o){const c=l._root;return eT(c,a?a._root:null,o,[c.value])}function xE(l,a,o){const c=function(l){if(!l)return null;for(let a=l.parent;a;a=a.parent){const o=a.routeConfig;if(o&&o._loadedConfig)return o._loadedConfig}return null}(a);return(c?c.module.injector:o).get(l)}function eT(l,a,o,c,u={canDeactivateChecks:[],canActivateChecks:[]}){const h=YS(a);return l.children.forEach(d=>{(function(l,a,o,c,u={canDeactivateChecks:[],canActivateChecks:[]}){const h=l.value,d=a?a.value:null,f=o?o.getContext(l.value.outlet):null;if(d&&h.routeConfig===d.routeConfig){const m=function(l,a,o){if("function"==typeof o)return o(l,a);switch(o){case"pathParamsChange":return!Um(l.url,a.url);case"pathParamsOrQueryParamsChange":return!Um(l.url,a.url)||!ph(l.queryParams,a.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!UO(l,a)||!ph(l.queryParams,a.queryParams);case"paramsChange":default:return!UO(l,a)}}(d,h,h.routeConfig.runGuardsAndResolvers);m?u.canActivateChecks.push(new Xj(c)):(h.data=d.data,h._resolvedData=d._resolvedData),eT(l,a,h.component?f?f.children:null:o,c,u),m&&f&&f.outlet&&f.outlet.isActivated&&u.canDeactivateChecks.push(new CE(f.outlet.component,d))}else d&&tT(a,f,u),u.canActivateChecks.push(new Xj(c)),eT(l,null,h.component?f?f.children:null:o,c,u)})(d,h[d.value.outlet],o,c.concat([d.value]),u),delete h[d.value.outlet]}),Jo(h,(d,f)=>tT(d,o.getContext(f),u)),u}function tT(l,a,o){const c=YS(l),u=l.value;Jo(c,(h,d)=>{tT(h,u.component?a?a.children.getContext(d):null:a,o)}),o.canDeactivateChecks.push(new CE(u.component&&a&&a.outlet&&a.outlet.isActivated?a.outlet.component:null,u))}class b0e{}function $j(l){return new yt(a=>a.error(l))}class T0e{constructor(a,o,c,u,h,d){this.rootComponentType=a,this.config=o,this.urlTree=c,this.url=u,this.paramsInheritanceStrategy=h,this.relativeLinkResolution=d}recognize(){const a=SE(this.urlTree.root,[],[],this.config.filter(d=>void 0===d.redirectTo),this.relativeLinkResolution).segmentGroup,o=this.processSegmentGroup(this.config,a,Ur);if(null===o)return null;const c=new gE([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},Ur,this.rootComponentType,null,this.urlTree.root,-1,{}),u=new Ad(c,o),h=new Ij(this.url,u);return this.inheritParamsAndData(h._root),h}inheritParamsAndData(a){const o=a.value,c=Aj(o,this.paramsInheritanceStrategy);o.params=Object.freeze(c.params),o.data=Object.freeze(c.data),a.children.forEach(u=>this.inheritParamsAndData(u))}processSegmentGroup(a,o,c){return 0===o.segments.length&&o.hasChildren()?this.processChildren(a,o):this.processSegment(a,o,o.segments,c)}processChildren(a,o){const c=[];for(const h of Object.keys(o.children)){const d=o.children[h],f=Gj(a,h),m=this.processSegmentGroup(f,d,h);if(null===m)return null;c.push(...m)}const u=Yj(c);return function(l){l.sort((a,o)=>a.value.outlet===Ur?-1:o.value.outlet===Ur?1:a.value.outlet.localeCompare(o.value.outlet))}(u),u}processSegment(a,o,c,u){for(const h of a){const d=this.processSegmentAgainstRoute(h,o,c,u);if(null!==d)return d}return jj(o,c,u)?[]:null}processSegmentAgainstRoute(a,o,c,u){if(a.redirectTo||!Hj(a,o,c,u))return null;let h,d=[],f=[];if("**"===a.path){const b=c.length>0?gj(c).parameters:{};h=new gE(c,b,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Jj(a),Ac(a),a.component,a,Zj(o),Kj(o)+c.length,Qj(a))}else{const b=bE(o,a,c);if(!b.matched)return null;d=b.consumedSegments,f=c.slice(b.lastChild),h=new gE(d,b.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Jj(a),Ac(a),a.component,a,Zj(o),Kj(o)+d.length,Qj(a))}const m=function(l){return l.children?l.children:l.loadChildren?l._loadedConfig.routes:[]}(a),{segmentGroup:g,slicedSegments:y}=SE(o,d,f,m.filter(b=>void 0===b.redirectTo),this.relativeLinkResolution);if(0===y.length&&g.hasChildren()){const b=this.processChildren(m,g);return null===b?null:[new Ad(h,b)]}if(0===m.length&&0===y.length)return[new Ad(h,[])];const v=Ac(a)===u,_=this.processSegment(m,g,y,v?Ur:u);return null===_?null:[new Ad(h,_)]}}function x0e(l){const a=l.value.routeConfig;return a&&""===a.path&&void 0===a.redirectTo}function Yj(l){const a=[],o=new Set;for(const c of l){if(!x0e(c)){a.push(c);continue}const u=a.find(h=>c.value.routeConfig===h.value.routeConfig);void 0!==u?(u.children.push(...c.children),o.add(u)):a.push(c)}for(const c of o){const u=Yj(c.children);a.push(new Ad(c.value,u))}return a.filter(c=>!o.has(c))}function Zj(l){let a=l;for(;a._sourceSegment;)a=a._sourceSegment;return a}function Kj(l){let a=l,o=a._segmentIndexShift?a._segmentIndexShift:0;for(;a._sourceSegment;)a=a._sourceSegment,o+=a._segmentIndexShift?a._segmentIndexShift:0;return o-1}function Jj(l){return l.data||{}}function Qj(l){return l.resolve||{}}function XO(l){return Dc(a=>{const o=l(a);return o?hi(o).pipe(pe(()=>a)):qt(a)})}class L0e extends class{shouldDetach(a){return!1}store(a,o){}shouldAttach(a){return!1}retrieve(a){return null}shouldReuseRoute(a,o){return a.routeConfig===o.routeConfig}}{}const $O=new Sn("ROUTES");class e9{constructor(a,o,c,u){this.loader=a,this.compiler=o,this.onLoadStartListener=c,this.onLoadEndListener=u}load(a,o){if(o._loader$)return o._loader$;this.onLoadStartListener&&this.onLoadStartListener(o);const u=this.loadModuleFactory(o.loadChildren).pipe(pe(h=>{this.onLoadEndListener&&this.onLoadEndListener(o);const d=h.create(a);return new jO(mj(d.injector.get($O,void 0,On.Self|On.Optional)).map(WO),d)}),Vm(h=>{throw o._loader$=void 0,h}));return o._loader$=new my(u,()=>new tt).pipe(ld()),o._loader$}loadModuleFactory(a){return"string"==typeof a?hi(this.loader.load(a)):mh(a()).pipe(yi(o=>o instanceof P8?qt(o):hi(this.compiler.compileModuleAsync(o))))}}class O0e{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new kv,this.attachRef=null}}class kv{constructor(){this.contexts=new Map}onChildOutletCreated(a,o){const c=this.getOrCreateContext(a);c.outlet=o,this.contexts.set(a,c)}onChildOutletDestroyed(a){const o=this.getContext(a);o&&(o.outlet=null)}onOutletDeactivated(){const a=this.contexts;return this.contexts=new Map,a}onOutletReAttached(a){this.contexts=a}getOrCreateContext(a){let o=this.getContext(a);return o||(o=new O0e,this.contexts.set(a,o)),o}getContext(a){return this.contexts.get(a)||null}}class F0e{shouldProcessUrl(a){return!0}extract(a){return a}merge(a,o){return a}}function k0e(l){throw l}function V0e(l,a,o){return a.parse("/")}function t9(l,a){return qt(null)}const B0e={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},U0e={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Na=(()=>{class l{constructor(o,c,u,h,d,f,m,g){this.rootComponentType=o,this.urlSerializer=c,this.rootContexts=u,this.location=h,this.config=g,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.lastLocationChangeInfo=null,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new tt,this.errorHandler=k0e,this.malformedUriErrorHandler=V0e,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:t9,afterPreactivation:t9},this.urlHandlingStrategy=new F0e,this.routeReuseStrategy=new L0e,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=d.get(hh),this.console=d.get(Px);const _=d.get(Fn);this.isNgZoneEnabled=_ instanceof Fn&&Fn.isInAngularZone(),this.resetConfig(g),this.currentUrlTree=new Bm(new Yr([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new e9(f,m,b=>this.triggerEvent(new uj(b)),b=>this.triggerEvent(new hj(b))),this.routerState=Dj(this.currentUrlTree,this.rootComponentType),this.transitions=new ni({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var o;return null===(o=this.location.getState())||void 0===o?void 0:o.\u0275routerPageId}setupNavigations(o){const c=this.events;return o.pipe(cs(u=>0!==u.id),pe(u=>Object.assign(Object.assign({},u),{extractedUrl:this.urlHandlingStrategy.extract(u.rawUrl)})),Dc(u=>{let h=!1,d=!1;return qt(u).pipe(Vs(f=>{this.currentNavigation={id:f.id,initialUrl:f.currentRawUrl,extractedUrl:f.extractedUrl,trigger:f.source,extras:f.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),Dc(f=>{const m=this.browserUrlTree.toString(),g=!this.navigated||f.extractedUrl.toString()!==m||m!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||g)&&this.urlHandlingStrategy.shouldProcessUrl(f.rawUrl))return EE(f.source)&&(this.browserUrlTree=f.extractedUrl),qt(f).pipe(Dc(v=>{const _=this.transitions.getValue();return c.next(new PO(v.id,this.serializeUrl(v.extractedUrl),v.source,v.restoredState)),_!==this.transitions.getValue()?Ov:Promise.resolve(v)}),function(l,a,o,c){return Dc(u=>function(l,a,o,c,u){return new i0e(l,a,o,c,u).apply()}(l,a,o,u.extractedUrl,c).pipe(pe(h=>Object.assign(Object.assign({},u),{urlAfterRedirects:h}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),Vs(v=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:v.urlAfterRedirects})}),function(l,a,o,c,u){return yi(h=>function(l,a,o,c,u="emptyOnly",h="legacy"){try{const d=new T0e(l,a,o,c,u,h).recognize();return null===d?$j(new b0e):qt(d)}catch(d){return $j(d)}}(l,a,h.urlAfterRedirects,o(h.urlAfterRedirects),c,u).pipe(pe(d=>Object.assign(Object.assign({},h),{targetSnapshot:d}))))}(this.rootComponentType,this.config,v=>this.serializeUrl(v),this.paramsInheritanceStrategy,this.relativeLinkResolution),Vs(v=>{"eager"===this.urlUpdateStrategy&&(v.extras.skipLocationChange||this.setBrowserUrl(v.urlAfterRedirects,v),this.browserUrlTree=v.urlAfterRedirects);const _=new e_e(v.id,this.serializeUrl(v.extractedUrl),this.serializeUrl(v.urlAfterRedirects),v.targetSnapshot);c.next(_)}));if(g&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:_,extractedUrl:b,source:w,restoredState:C,extras:E}=f,M=new PO(_,this.serializeUrl(b),w,C);c.next(M);const x=Dj(b,this.rootComponentType).snapshot;return qt(Object.assign(Object.assign({},f),{targetSnapshot:x,urlAfterRedirects:b,extras:Object.assign(Object.assign({},E),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=f.rawUrl,this.browserUrlTree=f.urlAfterRedirects,f.resolve(null),Ov}),XO(f=>{const{targetSnapshot:m,id:g,extractedUrl:y,rawUrl:v,extras:{skipLocationChange:_,replaceUrl:b}}=f;return this.hooks.beforePreactivation(m,{navigationId:g,appliedUrlTree:y,rawUrlTree:v,skipLocationChange:!!_,replaceUrl:!!b})}),Vs(f=>{const m=new t_e(f.id,this.serializeUrl(f.extractedUrl),this.serializeUrl(f.urlAfterRedirects),f.targetSnapshot);this.triggerEvent(m)}),pe(f=>Object.assign(Object.assign({},f),{guards:a0e(f.targetSnapshot,f.currentSnapshot,this.rootContexts)})),function(l,a){return yi(o=>{const{targetSnapshot:c,currentSnapshot:u,guards:{canActivateChecks:h,canDeactivateChecks:d}}=o;return 0===d.length&&0===h.length?qt(Object.assign(Object.assign({},o),{guardsResult:!0})):function(l,a,o,c){return hi(l).pipe(yi(u=>function(l,a,o,c,u){const h=a&&a.routeConfig?a.routeConfig.canDeactivate:null;return h&&0!==h.length?qt(h.map(f=>{const m=xE(f,a,u);let g;if(function(l){return l&&Wf(l.canDeactivate)}(m))g=mh(m.canDeactivate(l,a,o,c));else{if(!Wf(m))throw new Error("Invalid CanDeactivate guard");g=mh(m(l,a,o,c))}return g.pipe(fu())})).pipe(JS()):qt(!0)}(u.component,u.route,o,a,c)),fu(u=>!0!==u,!0))}(d,c,u,l).pipe(yi(f=>f&&function(l){return"boolean"==typeof l}(f)?function(l,a,o,c){return hi(a).pipe(Nv(u=>cE(function(l,a){return null!==l&&a&&a(new s_e(l)),qt(!0)}(u.route.parent,c),function(l,a){return null!==l&&a&&a(new a_e(l)),qt(!0)}(u.route,c),function(l,a,o){const c=a[a.length-1],h=a.slice(0,a.length-1).reverse().map(d=>function(l){const a=l.routeConfig?l.routeConfig.canActivateChild:null;return a&&0!==a.length?{node:l,guards:a}:null}(d)).filter(d=>null!==d).map(d=>ij(()=>qt(d.guards.map(m=>{const g=xE(m,d.node,o);let y;if(function(l){return l&&Wf(l.canActivateChild)}(g))y=mh(g.canActivateChild(c,l));else{if(!Wf(g))throw new Error("Invalid CanActivateChild guard");y=mh(g(c,l))}return y.pipe(fu())})).pipe(JS())));return qt(h).pipe(JS())}(l,u.path,o),function(l,a,o){const c=a.routeConfig?a.routeConfig.canActivate:null;return c&&0!==c.length?qt(c.map(h=>ij(()=>{const d=xE(h,a,o);let f;if(function(l){return l&&Wf(l.canActivate)}(d))f=mh(d.canActivate(a,l));else{if(!Wf(d))throw new Error("Invalid CanActivate guard");f=mh(d(a,l))}return f.pipe(fu())}))).pipe(JS()):qt(!0)}(l,u.route,o))),fu(u=>!0!==u,!0))}(c,h,l,a):qt(f)),pe(f=>Object.assign(Object.assign({},o),{guardsResult:f})))})}(this.ngModule.injector,f=>this.triggerEvent(f)),Vs(f=>{if(zm(f.guardsResult)){const g=LO(`Redirecting to "${this.serializeUrl(f.guardsResult)}"`);throw g.url=f.guardsResult,g}const m=new n_e(f.id,this.serializeUrl(f.extractedUrl),this.serializeUrl(f.urlAfterRedirects),f.targetSnapshot,!!f.guardsResult);this.triggerEvent(m)}),cs(f=>!!f.guardsResult||(this.restoreHistory(f),this.cancelNavigationTransition(f,""),!1)),XO(f=>{if(f.guards.canActivateChecks.length)return qt(f).pipe(Vs(m=>{const g=new r_e(m.id,this.serializeUrl(m.extractedUrl),this.serializeUrl(m.urlAfterRedirects),m.targetSnapshot);this.triggerEvent(g)}),Dc(m=>{let g=!1;return qt(m).pipe(function(l,a){return yi(o=>{const{targetSnapshot:c,guards:{canActivateChecks:u}}=o;if(!u.length)return qt(o);let h=0;return hi(u).pipe(Nv(d=>function(l,a,o,c){return function(l,a,o,c){const u=Object.keys(l);if(0===u.length)return qt({});const h={};return hi(u).pipe(yi(d=>function(l,a,o,c){const u=xE(l,a,c);return mh(u.resolve?u.resolve(a,o):u(a,o))}(l[d],a,o,c).pipe(Vs(f=>{h[d]=f}))),RO(1),yi(()=>Object.keys(h).length===u.length?qt(h):Ov))}(l._resolve,l,a,c).pipe(pe(h=>(l._resolvedData=h,l.data=Object.assign(Object.assign({},l.data),Aj(l,o).resolve),null)))}(d.route,c,l,a)),Vs(()=>h++),RO(1),yi(d=>h===u.length?qt(o):Ov))})}(this.paramsInheritanceStrategy,this.ngModule.injector),Vs({next:()=>g=!0,complete:()=>{g||(this.restoreHistory(m),this.cancelNavigationTransition(m,"At least one route resolver didn't emit any value."))}}))}),Vs(m=>{const g=new i_e(m.id,this.serializeUrl(m.extractedUrl),this.serializeUrl(m.urlAfterRedirects),m.targetSnapshot);this.triggerEvent(g)}))}),XO(f=>{const{targetSnapshot:m,id:g,extractedUrl:y,rawUrl:v,extras:{skipLocationChange:_,replaceUrl:b}}=f;return this.hooks.afterPreactivation(m,{navigationId:g,appliedUrlTree:y,rawUrlTree:v,skipLocationChange:!!_,replaceUrl:!!b})}),pe(f=>{const m=function(l,a,o){const c=yE(l,a._root,o?o._root:void 0);return new Mj(c,a)}(this.routeReuseStrategy,f.targetSnapshot,f.currentRouterState);return Object.assign(Object.assign({},f),{targetRouterState:m})}),Vs(f=>{this.currentUrlTree=f.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(f.urlAfterRedirects,f.rawUrl),this.routerState=f.targetRouterState,"deferred"===this.urlUpdateStrategy&&(f.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,f),this.browserUrlTree=f.urlAfterRedirects)}),((l,a,o)=>pe(c=>(new z_e(a,c.targetRouterState,c.currentRouterState,o).activate(l),c)))(this.rootContexts,this.routeReuseStrategy,f=>this.triggerEvent(f)),Vs({next(){h=!0},complete(){h=!0}}),function(l){return a=>a.lift(new Kve(l))}(()=>{if(!h&&!d){const f=`Navigation ID ${u.id} is not equal to the current navigation id ${this.navigationId}`;"replace"===this.canceledNavigationResolution?(this.restoreHistory(u),this.cancelNavigationTransition(u,f)):this.cancelNavigationTransition(u,f)}this.currentNavigation=null}),Vm(f=>{if(d=!0,function(l){return l&&l[fj]}(f)){const m=zm(f.url);m||(this.navigated=!0,this.restoreHistory(u,!0));const g=new cj(u.id,this.serializeUrl(u.extractedUrl),f.message);c.next(g),m?setTimeout(()=>{const y=this.urlHandlingStrategy.merge(f.url,this.rawUrlTree),v={skipLocationChange:u.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||EE(u.source)};this.scheduleNavigation(y,"imperative",null,v,{resolve:u.resolve,reject:u.reject,promise:u.promise})},0):u.resolve(!1)}else{this.restoreHistory(u,!0);const m=new Qve(u.id,this.serializeUrl(u.extractedUrl),f);c.next(m);try{u.resolve(this.errorHandler(f))}catch(g){u.reject(g)}}return Ov}))}))}resetRootComponentType(o){this.rootComponentType=o,this.routerState.root.component=this.rootComponentType}getTransition(){const o=this.transitions.value;return o.urlAfterRedirects=this.browserUrlTree,o}setTransition(o){this.transitions.next(Object.assign(Object.assign({},this.getTransition()),o))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(o=>{const c=this.extractLocationChangeInfoFromEvent(o);this.shouldScheduleNavigation(this.lastLocationChangeInfo,c)&&setTimeout(()=>{const{source:u,state:h,urlTree:d}=c,f={replaceUrl:!0};if(h){const m=Object.assign({},h);delete m.navigationId,delete m.\u0275routerPageId,0!==Object.keys(m).length&&(f.state=m)}this.scheduleNavigation(d,u,h,f)},0),this.lastLocationChangeInfo=c}))}extractLocationChangeInfoFromEvent(o){var c;return{source:"popstate"===o.type?"popstate":"hashchange",urlTree:this.parseUrl(o.url),state:(null===(c=o.state)||void 0===c?void 0:c.navigationId)?o.state:null,transitionId:this.getTransition().id}}shouldScheduleNavigation(o,c){if(!o)return!0;const u=c.urlTree.toString()===o.urlTree.toString();return c.transitionId!==o.transitionId||!u||!("hashchange"===c.source&&"popstate"===o.source||"popstate"===c.source&&"hashchange"===o.source)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(o){this.events.next(o)}resetConfig(o){Uj(o),this.config=o.map(WO),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(o,c={}){const{relativeTo:u,queryParams:h,fragment:d,queryParamsHandling:f,preserveFragment:m}=c,g=u||this.routerState.root,y=m?this.currentUrlTree.fragment:d;let v=null;switch(f){case"merge":v=Object.assign(Object.assign({},this.currentUrlTree.queryParams),h);break;case"preserve":v=this.currentUrlTree.queryParams;break;default:v=h||null}return null!==v&&(v=this.removeEmptyProps(v)),function(l,a,o,c,u){if(0===o.length)return GO(a.root,a.root,a,c,u);const h=function(l){if("string"==typeof l[0]&&1===l.length&&"/"===l[0])return new Oj(!0,0,l);let a=0,o=!1;const c=l.reduce((u,h,d)=>{if("object"==typeof h&&null!=h){if(h.outlets){const f={};return Jo(h.outlets,(m,g)=>{f[g]="string"==typeof m?m.split("/"):m}),[...u,{outlets:f}]}if(h.segmentPath)return[...u,h.segmentPath]}return"string"!=typeof h?[...u,h]:0===d?(h.split("/").forEach((f,m)=>{0==m&&"."===f||(0==m&&""===f?o=!0:".."===f?a++:""!=f&&u.push(f))}),u):[...u,h]},[]);return new Oj(o,a,c)}(o);if(h.toRoot())return GO(a.root,new Yr([],{}),a,c,u);const d=function(l,a,o){if(l.isAbsolute)return new zO(a.root,!0,0);if(-1===o.snapshot._lastPathIndex){const h=o.snapshot._urlSegment;return new zO(h,h===a.root,0)}const c=vE(l.commands[0])?0:1;return function(l,a,o){let c=l,u=a,h=o;for(;h>u;){if(h-=u,c=c.parent,!c)throw new Error("Invalid number of '../'");u=c.segments.length}return new zO(c,!1,u-h)}(o.snapshot._urlSegment,o.snapshot._lastPathIndex+c,l.numberOfDoubleDots)}(h,a,l),f=d.processChildren?_E(d.segmentGroup,d.index,h.commands):Nj(d.segmentGroup,d.index,h.commands);return GO(d.segmentGroup,f,a,c,u)}(g,this.currentUrlTree,o,v,null!=y?y:null)}navigateByUrl(o,c={skipLocationChange:!1}){const u=zm(o)?o:this.parseUrl(o),h=this.urlHandlingStrategy.merge(u,this.rawUrlTree);return this.scheduleNavigation(h,"imperative",null,c)}navigate(o,c={skipLocationChange:!1}){return function(l){for(let a=0;a<l.length;a++){const o=l[a];if(null==o)throw new Error(`The requested path contains ${o} segment at index ${a}`)}}(o),this.navigateByUrl(this.createUrlTree(o,c),c)}serializeUrl(o){return this.urlSerializer.serialize(o)}parseUrl(o){let c;try{c=this.urlSerializer.parse(o)}catch(u){c=this.malformedUriErrorHandler(u,this.urlSerializer,o)}return c}isActive(o,c){let u;if(u=!0===c?Object.assign({},B0e):!1===c?Object.assign({},U0e):c,zm(o))return vj(this.currentUrlTree,o,u);const h=this.parseUrl(o);return vj(this.currentUrlTree,h,u)}removeEmptyProps(o){return Object.keys(o).reduce((c,u)=>{const h=o[u];return null!=h&&(c[u]=h),c},{})}processNavigations(){this.navigations.subscribe(o=>{this.navigated=!0,this.lastSuccessfulId=o.id,this.currentPageId=o.targetPageId,this.events.next(new qS(o.id,this.serializeUrl(o.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,o.resolve(!0)},o=>{this.console.warn(`Unhandled Navigation Error: ${o}`)})}scheduleNavigation(o,c,u,h,d){var f,m;if(this.disposed)return Promise.resolve(!1);const g=this.getTransition(),y=EE(c)&&g&&!EE(g.source),b=(this.lastSuccessfulId===g.id||this.currentNavigation?g.rawUrl:g.urlAfterRedirects).toString()===o.toString();if(y&&b)return Promise.resolve(!0);let w,C,E;d?(w=d.resolve,C=d.reject,E=d.promise):E=new Promise((R,P)=>{w=R,C=P});const M=++this.navigationId;let x;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(u=this.location.getState()),x=u&&u.\u0275routerPageId?u.\u0275routerPageId:h.replaceUrl||h.skipLocationChange?null!==(f=this.browserPageId)&&void 0!==f?f:0:(null!==(m=this.browserPageId)&&void 0!==m?m:0)+1):x=0,this.setTransition({id:M,targetPageId:x,source:c,restoredState:u,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:o,extras:h,resolve:w,reject:C,promise:E,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),E.catch(R=>Promise.reject(R))}setBrowserUrl(o,c){const u=this.urlSerializer.serialize(o),h=Object.assign(Object.assign({},c.extras.state),this.generateNgRouterState(c.id,c.targetPageId));this.location.isCurrentPathEqualTo(u)||c.extras.replaceUrl?this.location.replaceState(u,"",h):this.location.go(u,"",h)}restoreHistory(o,c=!1){var u,h;if("computed"===this.canceledNavigationResolution){const d=this.currentPageId-o.targetPageId;"popstate"!==o.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(u=this.currentNavigation)||void 0===u?void 0:u.finalUrl)||0===d?this.currentUrlTree===(null===(h=this.currentNavigation)||void 0===h?void 0:h.finalUrl)&&0===d&&(this.resetState(o),this.browserUrlTree=o.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(d)}else"replace"===this.canceledNavigationResolution&&(c&&this.resetState(o),this.resetUrlToCurrentUrlTree())}resetState(o){this.routerState=o.currentRouterState,this.currentUrlTree=o.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,o.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(o,c){const u=new cj(o.id,this.serializeUrl(o.extractedUrl),c);this.triggerEvent(u),o.resolve(!1)}generateNgRouterState(o,c){return"computed"===this.canceledNavigationResolution?{navigationId:o,\u0275routerPageId:c}:{navigationId:o}}}return l.\u0275fac=function(o){return new(o||l)(be(qb),be(OO),be(kv),be(Wx),be(Qn),be(Ox),be(Lm),be(void 0))},l.\u0275prov=Xe({token:l,factory:l.\u0275fac}),l})();function EE(l){return"imperative"!==l}let YO=(()=>{class l{constructor(o,c,u,h,d){this.router=o,this.route=c,this.commands=[],this.onChanges=new tt,null==u&&h.setAttribute(d.nativeElement,"tabindex","0")}ngOnChanges(o){this.onChanges.next(this)}set routerLink(o){this.commands=null!=o?Array.isArray(o)?o:[o]:[]}onClick(){const o={skipLocationChange:Vv(this.skipLocationChange),replaceUrl:Vv(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,o),!0}get urlTree(){return this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:Vv(this.preserveFragment)})}}return l.\u0275fac=function(o){return new(o||l)(O(Na),O(Gm),zy("tabindex"),O(tr),O(kt))},l.\u0275dir=Ze({type:l,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(o,c){1&o&&ze("click",function(){return c.onClick()})},inputs:{routerLink:"routerLink",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo"},features:[Ci]}),l})(),nT=(()=>{class l{constructor(o,c,u){this.router=o,this.route=c,this.locationStrategy=u,this.commands=[],this.onChanges=new tt,this.subscription=o.events.subscribe(h=>{h instanceof qS&&this.updateTargetUrlAndHref()})}set routerLink(o){this.commands=null!=o?Array.isArray(o)?o:[o]:[]}ngOnChanges(o){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(o,c,u,h,d){if(0!==o||c||u||h||d||"string"==typeof this.target&&"_self"!=this.target)return!0;const f={skipLocationChange:Vv(this.skipLocationChange),replaceUrl:Vv(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,f),!1}updateTargetUrlAndHref(){this.href=this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree))}get urlTree(){return this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:Vv(this.preserveFragment)})}}return l.\u0275fac=function(o){return new(o||l)(O(Na),O(Gm),O(Lv))},l.\u0275dir=Ze({type:l,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(o,c){1&o&&ze("click",function(h){return c.onClick(h.button,h.ctrlKey,h.shiftKey,h.altKey,h.metaKey)}),2&o&&(Hl("href",c.href,Jy),Ke("target",c.target))},inputs:{routerLink:"routerLink",target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo"},features:[Ci]}),l})();function Vv(l){return""===l||!!l}let ZO=(()=>{class l{constructor(o,c,u,h,d,f){this.router=o,this.element=c,this.renderer=u,this.cdr=h,this.link=d,this.linkWithHref=f,this.classes=[],this.isActive=!1,this.routerLinkActiveOptions={exact:!1},this.routerEventsSubscription=o.events.subscribe(m=>{m instanceof qS&&this.update()})}ngAfterContentInit(){qt(this.links.changes,this.linksWithHrefs.changes,qt(null)).pipe(Os()).subscribe(o=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){var o;null===(o=this.linkInputChangesSubscription)||void 0===o||o.unsubscribe();const c=[...this.links.toArray(),...this.linksWithHrefs.toArray(),this.link,this.linkWithHref].filter(u=>!!u).map(u=>u.onChanges);this.linkInputChangesSubscription=hi(c).pipe(Os()).subscribe(u=>{this.isActive!==this.isLinkActive(this.router)(u)&&this.update()})}set routerLinkActive(o){const c=Array.isArray(o)?o:o.split(" ");this.classes=c.filter(u=>!!u)}ngOnChanges(o){this.update()}ngOnDestroy(){var o;this.routerEventsSubscription.unsubscribe(),null===(o=this.linkInputChangesSubscription)||void 0===o||o.unsubscribe()}update(){!this.links||!this.linksWithHrefs||!this.router.navigated||Promise.resolve().then(()=>{const o=this.hasActiveLinks();this.isActive!==o&&(this.isActive=o,this.cdr.markForCheck(),this.classes.forEach(c=>{o?this.renderer.addClass(this.element.nativeElement,c):this.renderer.removeClass(this.element.nativeElement,c)}))})}isLinkActive(o){const c=function(l){return!!l.paths}(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return u=>o.isActive(u.urlTree,c)}hasActiveLinks(){const o=this.isLinkActive(this.router);return this.link&&o(this.link)||this.linkWithHref&&o(this.linkWithHref)||this.links.some(o)||this.linksWithHrefs.some(o)}}return l.\u0275fac=function(o){return new(o||l)(O(Na),O(kt),O(tr),O(go),O(YO,8),O(nT,8))},l.\u0275dir=Ze({type:l,selectors:[["","routerLinkActive",""]],contentQueries:function(o,c,u){if(1&o&&(Nn(u,YO,5),Nn(u,nT,5)),2&o){let h;It(h=Rt())&&(c.links=h),It(h=Rt())&&(c.linksWithHrefs=h)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",routerLinkActive:"routerLinkActive"},exportAs:["routerLinkActive"],features:[Ci]}),l})(),KO=(()=>{class l{constructor(o,c,u,h,d){this.parentContexts=o,this.location=c,this.resolver=u,this.changeDetector=d,this.activated=null,this._activatedRoute=null,this.activateEvents=new pt,this.deactivateEvents=new pt,this.name=h||Ur,o.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const o=this.parentContexts.getContext(this.name);o&&o.route&&(o.attachRef?this.attach(o.attachRef,o.route):this.activateWith(o.route,o.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const o=this.activated;return this.activated=null,this._activatedRoute=null,o}attach(o,c){this.activated=o,this._activatedRoute=c,this.location.insert(o.hostView)}deactivate(){if(this.activated){const o=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(o)}}activateWith(o,c){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=o;const d=(c=c||this.resolver).resolveComponentFactory(o._futureSnapshot.routeConfig.component),f=this.parentContexts.getOrCreateContext(this.name).children,m=new H0e(o,f,this.location.injector);this.activated=this.location.createComponent(d,this.location.length,m),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return l.\u0275fac=function(o){return new(o||l)(O(kv),O(qn),O(wc),zy("name"),O(go))},l.\u0275dir=Ze({type:l,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),l})();class H0e{constructor(a,o,c){this.route=a,this.childContexts=o,this.parent=c}get(a,o){return a===Gm?this.route:a===kv?this.childContexts:this.parent.get(a,o)}}class n9{}class r9{preload(a,o){return o().pipe(Vm(()=>qt(null)))}}class i9{preload(a,o){return qt(null)}}let s9=(()=>{class l{constructor(o,c,u,h,d){this.router=o,this.injector=h,this.preloadingStrategy=d,this.loader=new e9(c,u,g=>o.triggerEvent(new uj(g)),g=>o.triggerEvent(new hj(g)))}setUpPreloading(){this.subscription=this.router.events.pipe(cs(o=>o instanceof qS),Nv(()=>this.preload())).subscribe(()=>{})}preload(){const o=this.injector.get(hh);return this.processRoutes(o,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(o,c){const u=[];for(const h of c)if(h.loadChildren&&!h.canLoad&&h._loadedConfig){const d=h._loadedConfig;u.push(this.processRoutes(d.module,d.routes))}else h.loadChildren&&!h.canLoad?u.push(this.preloadConfig(o,h)):h.children&&u.push(this.processRoutes(o,h.children));return hi(u).pipe(Os(),pe(h=>{}))}preloadConfig(o,c){return this.preloadingStrategy.preload(c,()=>(c._loadedConfig?qt(c._loadedConfig):this.loader.load(o.injector,c)).pipe(yi(h=>(c._loadedConfig=h,this.processRoutes(h.module,h.routes)))))}}return l.\u0275fac=function(o){return new(o||l)(be(Na),be(Ox),be(Lm),be(Qn),be(n9))},l.\u0275prov=Xe({token:l,factory:l.\u0275fac}),l})(),JO=(()=>{class l{constructor(o,c,u={}){this.router=o,this.viewportScroller=c,this.options=u,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},u.scrollPositionRestoration=u.scrollPositionRestoration||"disabled",u.anchorScrolling=u.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(o=>{o instanceof PO?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=o.navigationTrigger,this.restoredId=o.restoredState?o.restoredState.navigationId:0):o instanceof qS&&(this.lastId=o.id,this.scheduleScrollEvent(o,this.router.parseUrl(o.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(o=>{o instanceof dj&&(o.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(o.position):o.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(o.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(o,c){this.router.triggerEvent(new dj(o,"popstate"===this.lastSource?this.store[this.restoredId]:null,c))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return l.\u0275fac=function(o){return new(o||l)(be(Na),be(G7),be(void 0))},l.\u0275prov=Xe({token:l,factory:l.\u0275fac}),l})();const Hm=new Sn("ROUTER_CONFIGURATION"),o9=new Sn("ROUTER_FORROOT_GUARD"),j0e=[Wx,{provide:OO,useClass:Tj},{provide:Na,useFactory:function(l,a,o,c,u,h,d,f={},m,g){const y=new Na(null,l,a,o,c,u,h,mj(d));return m&&(y.urlHandlingStrategy=m),g&&(y.routeReuseStrategy=g),function(l,a){l.errorHandler&&(a.errorHandler=l.errorHandler),l.malformedUriErrorHandler&&(a.malformedUriErrorHandler=l.malformedUriErrorHandler),l.onSameUrlNavigation&&(a.onSameUrlNavigation=l.onSameUrlNavigation),l.paramsInheritanceStrategy&&(a.paramsInheritanceStrategy=l.paramsInheritanceStrategy),l.relativeLinkResolution&&(a.relativeLinkResolution=l.relativeLinkResolution),l.urlUpdateStrategy&&(a.urlUpdateStrategy=l.urlUpdateStrategy)}(f,y),f.enableTracing&&y.events.subscribe(v=>{var _,b;null===(_=console.group)||void 0===_||_.call(console,`Router Event: ${v.constructor.name}`),console.log(v.toString()),console.log(v),null===(b=console.groupEnd)||void 0===b||b.call(console)}),y},deps:[OO,kv,Wx,Qn,Ox,Lm,$O,Hm,[class{},new Zo],[class{},new Zo]]},kv,{provide:Gm,useFactory:function(l){return l.routerState.root},deps:[Na]},{provide:Ox,useClass:Zpe},s9,i9,r9,{provide:Hm,useValue:{enableTracing:!1}}];function W0e(){return new zL("Router",Na)}let a9=(()=>{class l{constructor(o,c){}static forRoot(o,c){return{ngModule:l,providers:[j0e,l9(o),{provide:o9,useFactory:$0e,deps:[[Na,new Zo,new Qc]]},{provide:Hm,useValue:c||{}},{provide:Lv,useFactory:X0e,deps:[km,[new Yy(sO),new Zo],Hm]},{provide:JO,useFactory:q0e,deps:[Na,G7,Hm]},{provide:n9,useExisting:c&&c.preloadingStrategy?c.preloadingStrategy:i9},{provide:zL,multi:!0,useFactory:W0e},[QO,{provide:LS,multi:!0,useFactory:J0e,deps:[QO]},{provide:c9,useFactory:Q0e,deps:[QO]},{provide:OH,multi:!0,useExisting:c9}]]}}static forChild(o){return{ngModule:l,providers:[l9(o)]}}}return l.\u0275fac=function(o){return new(o||l)(be(o9,8),be(Na,8))},l.\u0275mod=Yt({type:l}),l.\u0275inj=jt({}),l})();function q0e(l,a,o){return o.scrollOffset&&a.setOffset(o.scrollOffset),new JO(l,a,o)}function X0e(l,a,o={}){return o.useHash?new gge(l,a):new C7(l,a)}function $0e(l){return"guarded"}function l9(l){return[{provide:Aoe,multi:!0,useValue:l},{provide:$O,multi:!0,useValue:l}]}let QO=(()=>{class l{constructor(o){this.injector=o,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new tt}appInitializer(){return this.injector.get(fge,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let c=null;const u=new Promise(f=>c=f),h=this.injector.get(Na),d=this.injector.get(Hm);return"disabled"===d.initialNavigation?(h.setUpLocationChangeListener(),c(!0)):"enabled"===d.initialNavigation||"enabledBlocking"===d.initialNavigation?(h.hooks.afterPreactivation=()=>this.initNavigation?qt(null):(this.initNavigation=!0,c(!0),this.resultOfPreactivationDone),h.initialNavigation()):c(!0),u})}bootstrapListener(o){const c=this.injector.get(Hm),u=this.injector.get(s9),h=this.injector.get(JO),d=this.injector.get(Na),f=this.injector.get(Om);o===f.components[0]&&(("enabledNonBlocking"===c.initialNavigation||void 0===c.initialNavigation)&&d.initialNavigation(),u.setUpPreloading(),h.init(),d.resetRootComponentType(f.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return l.\u0275fac=function(o){return new(o||l)(be(Qn))},l.\u0275prov=Xe({token:l,factory:l.\u0275fac}),l})();function J0e(l){return l.appInitializer.bind(l)}function Q0e(l){return l.bootstrapListener.bind(l)}const c9=new Sn("Router Initializer"),Ic="tms",pu="wms",mu="wmts",qf="xyz",gh="geojson",Id="kml",Rd="wfs",u9="stacked",Rc={Baselayers:"Baselayers",Overlays:"Overlays",Layers:"Layers"};class Lo{constructor(a){this.name="",this.id="",this.opacity=1,this.visible=!0,this.removable=!1,this.filtertype="Layers",this.continuousWorld=!1,this.expanded=!1,Object.assign(this,a)}get time(){return this.protTime}set time(a){this.protTime=a}}class dl extends Lo{constructor(a){if(super(a),this.styles&&this.styles.length>0){let o=this.styles.find(c=>c.default);o||(o=this.styles[0]),this.legendImg=o.legendURL,this.params?(this.type===pu?this.params.STYLES=o.name:this.type===mu&&(this.params.style=o.name),this.params.STYLES=o.name):this.type===mu&&(this.params||(this.params={}),this.params.style=o.name)}}set time(a){this.params&&(this.params.TIME=a),this.protTime=a}get time(){return this.protTime}}class Zs extends Lo{constructor(a){super(a)}}class Qi extends Lo{constructor(a){super(a),this.type="custom",this.custom_layer={},Object.assign(this,a)}}class ME extends Lo{constructor(a){super(a),this.type=u9,this.layers=[],Object.assign(this,a)}}class us{constructor(a){this.filtertype="Layers",this.removable=!0,this.layerRemovable=!0,this.expanded=!1,a&&void 0!==a.visible&&a.layers&&a.layers.length&&(a.layers=a.layers.map(o=>(o.visible=a.visible,o))),Object.assign(this,a)}get visible(){return this.layers&&this.layers.length&&(this.protVisible=this.layers.filter(a=>a.visible).length>0),this.protVisible}set visible(a){this.protVisible=a,this.layers&&this.layers.length&&(this.layers=this.layers.map(o=>(o.visible=a,o)))}}class fl extends dl{constructor(a){super(a)}}class iT extends dl{constructor(a){super(a)}}let vo=(()=>{class l{constructor(){this.store=new ni(Array()),this.baseLayers=new ni(Array()),this.overlays=new ni(Array()),this.layers=new ni(Array())}addLayer(o,c,u){if(this.isInLayergroups(o))console.error(`layer or Group with id: ${o.id} already exists!`);else{c?o.filtertype=c:c=o.filtertype;const h=this.store.getValue();u||(h.push(o),this.store.next(h)),this.filterFiltertype(c)}}removeLayer(o,c,u){this.isInLayergroups(o)?u?(console.log(`layer: ${o.id} is removed with force!`),this._removeLayer(o,c)):o.removable?this._removeLayer(o,c):o.removable||console.log(`layer: ${o.id} is not removable!`):console.error(`layer with id: ${o.id} not in storeItems!`)}_removeLayer(o,c){c?c!==o.filtertype&&console.error(`the layer with id: ${o.id} you want to remove from ${c} is from filtertype: ${o.filtertype}`):c=o.filtertype;const u=this.store.getValue().filter(h=>h instanceof Lo?h.id!==o.id:h);this.store.next(u),this.filterFiltertype(c)}updateLayer(o,c){this.isInLayergroups(o)?(c?c!==o.filtertype&&console.error(`the layer with id: ${o.id} you want to update is from filtertype: ${o.filtertype} and not from ${c} `):c=o.filtertype,"Overlays"===o.filtertype&&(this.updateLayerOrGroupInStore(o),this.filterFiltertype(o.filtertype)),"Layers"===o.filtertype&&(this.updateLayerOrGroupInStore(o),this.filterFiltertype(o.filtertype)),"Baselayers"===o.filtertype&&(this.updateLayerOrGroupInStore(o),this.filterFiltertype(o.filtertype))):console.error(`layer with id: ${o.id} you want to update not in storeItems!`)}updateLayerOrGroupInStore(o){this.store.getValue().filter((c,u,h)=>{c instanceof Lo&&o instanceof Lo?c.id===o.id&&(h[u]=o,this.store.next(h)):c instanceof us&&o instanceof us&&c.id===o.id&&(h[u]=o,this.store.next(h))})}removeLayerOrGroupById(o,c,u){this.store.getValue().filter(h=>{h instanceof Lo?h.id===o&&this.removeLayer(h,h.filtertype||"Layers",u):h instanceof us&&(h.id===o?this.removeLayerGroup(h,u):h.layers.forEach(d=>{d.id===o&&this.removeLayerFromGroup(d,h,c,u)}))})}addLayerToGroup(o,c){this.isInLayergroups(o)?console.error(`layer with id: ${o.id} already exists!`):(o.filtertype!==c.filtertype&&(o.filtertype=c.filtertype),this.isInLayergroups(o,[c])?console.error(`layer with id: ${o.id} already exists in ${c.id}!`,c):(c.layers.push(o),this.updateLayerGroup(c)))}addLayerToGroupById(o,c){this.store.getValue().forEach(u=>{u instanceof us&&u.id===c&&this.addLayerToGroup(o,u)})}removeLayerFromGroup(o,c,u=!0,h){c.layers=c.layers.filter(d=>d.id!==o.id),this.updateLayerGroup(c),this.filterFiltertype(o.filtertype),0===c.layers.length&&u&&this.removeLayerGroup(c,h)}setLayerIndexInGroup(o,c,u){const h=u.layers.indexOf(o);switch(c){case"up":if(0===h)break;this.arrayMove(u.layers,h,h-1);break;case"down":if(h===u.layers.length-1)break;this.arrayMove(u.layers,h,h+1)}this.updateLayer(o,u.filtertype||"Layers")}addLayerGroup(o,c){if(!this.isInLayergroups(o)){c?o.filtertype=c:c=o.filtertype;const u=this.store.getValue();this.isInLayergroups(o,o.layers)&&(o.layers=o.layers.filter(h=>h.id!==o.id)),o.layers=o.layers.map(h=>(h.filtertype=o.filtertype,h)),u.push(o),this.store.next(u),this.updateLayerGroup(o)}}removeLayerGroup(o,c){this.isInLayergroups(o)?c?(console.log(`layerGroup: ${o.id} is removed with force!`),this._removeLayerGroup(o)):o.removable?this._removeLayerGroup(o):o.removable||console.log(`layerGroup: ${o.id} is not removable!`):console.error(`layer or Group with id: ${o.id} not in storeItems!`)}_removeLayerGroup(o){for(const h of o.layers)this.removeLayerFromGroup(h,o);const u=this.store.getValue().filter(function(h,d){return h.id!==o.id});this.store.next(u)}updateLayerGroup(o,c=!1){c&&(o=this.sortLayerGroup(o)),this.updateLayerOrGroupInStore(o);for(const u of o.layers)this.updateLayer(u,o.filtertype||"Layers")}arrayMove(o,c,u){o.splice(u<0?o.length+u:u,0,o.splice(c,1)[0])}setGroupLayerIndex(o,c){let u;if((o instanceof Lo&&o.filtertype||o instanceof us)&&(u=this.getNumOfGroups(o.filtertype)),u>1){const h=this.store.getValue(),d=h.indexOf(o);(!this.isGroupFirst(o)||!this.isGroupLast(o))&&("number"==typeof c?this.arrayMove(h,d,c):"up"===c?this.arrayMove(h,d,d-1):"down"===c&&this.arrayMove(h,d,d+1)),this.store.next(h),this.baseLayers.next(this.filterBaseLayers()),this.layers.next(this.filterLayers()),this.overlays.next(this.filterOverlays())}}getNumOfGroups(o){let c=0;const u=this.store.getValue();for(const h of u)h.filtertype===o&&c++;return c}isGroupFirst(o,c,u){let h=!1,d=this.store.getValue();return c&&(d=c),u&&(d=d.filter(f=>f.filtertype===u)),0===d.indexOf(o)&&(h=!0),h}isGroupLast(o,c,u){let h=!1,d=this.store.getValue();return c&&(d=c),u&&(d=d.filter(f=>f.filtertype===u)),d.indexOf(o)===d.length-1&&(h=!0),h}isInLayergroups(o,c){let h,u=!1;h=o instanceof Lo||o instanceof us?o.id:o;const d=this.getLayerOrGroupById(h,c);return(d&&d instanceof Lo||d instanceof us)&&(u=!0),u}getLayerOrGroupById(o,c){const u=[];let h=this.store.getValue();return c&&(h=c),h.map(d=>{d instanceof us?d.id===o?u.push(d):d.layers.map(f=>{f.id===o&&u.push(f)}):d instanceof Lo&&d.id===o&&u.push(d)}),u.length?1===u.length?u[0]:void(u.length>1&&console.log("there is a duplicate ID in the Layer Groups!")):null}getLayerById(o,c){let u,h=this.flattenDeepArray(this.store.getValue());return c&&(h=c),h.map(d=>{d.id===o&&(u=d)}),u}getBaseLayers(){return this.baseLayers.asObservable()}removeBaseLayers(o){let c=this.filterBaseLayers();return o&&(c=c.filter(o)),c.forEach(u=>{this.removeLayerOrGroupById(u.id)}),this.baseLayers.asObservable()}getBaseLayersCount(){return this.baseLayers.getValue().length}getOverlays(){return this.overlays.asObservable()}removeOverlays(o){let c=this.filterOverlays();return o&&(c=c.filter(o)),c.forEach(u=>{this.removeLayerOrGroupById(u.id)}),this.overlays.asObservable()}getOverlaysCount(){return this.overlays.getValue().length}getLayers(){return this.layers.asObservable()}removeLayers(o){let c=this.filterLayers();return o&&(c=c.filter(o)),c.forEach(u=>{this.removeLayerOrGroupById(u.id)}),this.layers.asObservable()}getLayersCount(){return this.layers.getValue().length}getLayerGroups(){return this.store.asObservable()}setLayerGroups(o,c){return o.length>0&&o.map(u=>{u instanceof us&&u.layers.length>0&&(u.layers=u.layers.map(h=>(h.filtertype=u.filtertype,h)))}),c?("Baselayers"===c?this.removeBaseLayers():"Layers"===c?this.removeLayers():"Overlays"===c&&this.removeOverlays(),o.map(u=>{u instanceof Lo?this.addLayer(u,c):u instanceof us&&this.addLayerGroup(u,c)})):(this.store.next(o),this.baseLayers.next(this.filterBaseLayers()),this.layers.next(this.filterLayers()),this.overlays.next(this.filterOverlays())),this.store.asObservable()}getLayerGroupsCount(){return this.store.getValue().length}flattenDeepArray(o){return o.reduce((c,u)=>u instanceof us&&Array.isArray(u.layers)?c.concat(this.flattenDeepArray(u.layers)):c.concat(u),[])}filterOverlays(){const o=this.store.getValue();return this.flattenDeepArray(o.filter(u=>"Overlays"===u.filtertype))}filterBaseLayers(){const o=this.store.getValue();return this.flattenDeepArray(o.filter(u=>"Baselayers"===u.filtertype))}filterLayers(){const o=this.store.getValue();return this.flattenDeepArray(o.filter(u=>"Layers"===u.filtertype))}filterFiltertype(o){"Baselayers"===o?this.baseLayers.next(this.filterBaseLayers()):"Overlays"===o?this.overlays.next(this.filterOverlays()):"Layers"===o&&this.layers.next(this.filterLayers())}sortLayerGroup(o){return o.layers.sort((c,u)=>{let h=0;return c instanceof dl?h=1:u instanceof dl&&(h=-1),h}),o}}return l.\u0275fac=function(o){return new(o||l)},l.\u0275prov=Xe({token:l,factory:l.\u0275fac,providedIn:"root"}),l})();class Bv{constructor(a,o,c,u=[-180,-90,180,90],h=(new Date).toISOString()){this.zoom=a,this.center=o,this.extent=u,this.time=h,this.options=Object.assign({maxzoom:0,minzoom:0,notifier:"map"},c)}sameCenter(a){return this.center.lat===a.lat&&this.center.lon===a.lon}sameZoom(a){return this.zoom===a}sameExtent(a){let c=!1;return this.extent.length===a.length&&(c=this.extent.every((u,h)=>a[h]===u)),c}sameNotifier(a){return this.options.notifier===a}}const rbe=new Bv(0,{lat:0,lon:0});let Oo=(()=>{class l{constructor(){this.mapState=new ni(rbe),this.lastAction=new ni(null)}getMapState(){return this.mapState}setMapState(o){if(o)if(this.lastAction.next("setState"),o instanceof Bv){const c=new Bv(o.zoom,o.center,o.options,o.extent);this.mapState.next(c)}else{const c=Object.assign({notifier:"user"},o.options),u=new Bv(o.zoom,o.center,c,o.extent);this.mapState.next(u)}}getExtent(){return this.mapState.pipe(pe(o=>o.extent))}setExtent(o,c="user"){if(!o)return;this.lastAction.next("setExtent");const u=this.getMapState().getValue();u.options.notifier=c;const h=new Bv(u.zoom,u.center,u.options,o);this.mapState.next(h)}getLastAction(){return this.lastAction}}return l.\u0275fac=function(o){return new(o||l)},l.\u0275prov=Xe({token:l,factory:l.\u0275fac,providedIn:"root"}),l})();class Uv extends dl{constructor(a){const o={name:"OpenStreetMap",displayName:"OpenStreetMap",id:"osm",visible:!1,type:"xyz",url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",subdomains:["a","b","c"],attribution:'&copy, <a href="https://www.openstreetmap.org">OpenStreetMap</a> contributors',continuousWorld:!1,legendImg:"https://a.tile.openstreetmap.org/3/4/3.png",description:"OpenStreetMap z-x-y Tiles",opacity:1};a&&Object.assign(o,a),super(o)}}class ibe extends dl{constructor(a){const o={name:"OpenSeaMap",displayName:"OpenSeaMap",id:"OpenSeaMap",visible:!1,type:"xyz",removable:!1,url:"https://{s}.openseamap.org/seamark/{z}/{x}/{y}.png",subdomains:["t1"],attribution:'&copy, <a href="https://map.openseamap.org/legend.php?lang=de&page=license">OpenSeaMap</a>',continuousWorld:!1,legendImg:"https://t1.openseamap.org/seamark/10/554/321.png",description:"http://map.openseamap.org/",opacity:1};a&&Object.assign(o,a),super(o)}}class h9 extends iT{constructor(a){const o={name:"EOC Litemap",displayName:"EOC Litemap",id:"eoc_litemap",visible:!1,type:"wms",removable:!1,params:{LAYERS:"litemap",FORMAT:"image/png",TRANSPARENT:!0},url:"https://geoservice.dlr.de/eoc/basemap/wms",attribution:'&copy, <a href="//geoservice.dlr.de/eoc/basemap/">DLR</a>',continuousWorld:!1,legendImg:"https://geoservice.dlr.de/eoc/basemap/wms?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetMap&FORMAT=image%2Fpng&TRANSPARENT=true&LAYERS=litemap&ATTRIBUTION=&WIDTH=256&HEIGHT=256&CRS=EPSG%3A3857&STYLES=&BBOX=0%2C0%2C10018754.171394622%2C10018754.171394622",description:"http://www.naturalearthdata.com/about/",opacity:1};a&&Object.assign(o,a),super(o)}}class sbe extends fl{constructor(a){const o={name:"EOC Litemap Tile",displayName:"EOC Litemap Tile",id:"eoc_litemap_tile",visible:!1,type:"wmts",removable:!1,params:{layer:"eoc:litemap",format:"image/png",style:"_empty",matrixSetOptions:{matrixSet:"EPSG:3857",tileMatrixPrefix:"EPSG:3857"}},url:"https://tiles.geoservice.dlr.de/service/wmts",attribution:'&copy, <a href="//geoservice.dlr.de/eoc/basemap/">DLR</a>',continuousWorld:!1,legendImg:"https://tiles.geoservice.dlr.de/service/wmts?layer=eoc%3Alitemap&style=_empty&tilematrixset=EPSG%3A3857&Service=WMTS&Request=GetTile&Version=1.0.0&Format=image%2Fpng&TileMatrix=EPSG%3A3857%3A5&TileCol=18&TileRow=11",description:"EOC Litemap as web map tile service",opacity:1};a&&Object.assign(o,a),super(o)}}class eN extends fl{constructor(a){const o={name:"EOC Liteoverlay Tile",displayName:"EOC LiteoverlayTile",id:"eoc_Liteoverlay_tile",visible:!1,type:"wmts",removable:!1,params:{layer:"eoc:liteoverlay",format:"image/png",style:"_empty",matrixSetOptions:{matrixSet:"EPSG:3857",tileMatrixPrefix:"EPSG:3857"}},url:"https://tiles.geoservice.dlr.de/service/wmts",attribution:'&copy, <a href="//geoservice.dlr.de/eoc/basemap/">DLR</a>',continuousWorld:!1,legendImg:"https://tiles.geoservice.dlr.de/service/wmts?layer=eoc%3Aliteoverlay&style=_empty&tilematrixset=EPSG%3A3857&Service=WMTS&Request=GetTile&Version=1.0.0&Format=image%2Fpng&TileMatrix=EPSG%3A3857%3A5&TileCol=18&TileRow=11",description:"This is the liteoverlay provided for EOC Service Portals",opacity:1};a&&Object.assign(o,a),super(o)}}class obe extends fl{constructor(a){const o={name:"EOC Basemap Tile",displayName:"EOC Basemap Tile",id:"eoc_basemap_tile",visible:!1,type:"wmts",removable:!1,params:{layer:"eoc:basemap",format:"image/png",style:"_empty",matrixSetOptions:{matrixSet:"EPSG:3857",tileMatrixPrefix:"EPSG:3857"}},url:"https://tiles.geoservice.dlr.de/service/wmts",attribution:'&copy, <a href="//geoservice.dlr.de/eoc/basemap/">DLR</a>',continuousWorld:!1,legendImg:"https://tiles.geoservice.dlr.de/service/wmts?layer=eoc%3Abasemap&style=_empty&tilematrixset=EPSG%3A3857&Service=WMTS&Request=GetTile&Version=1.0.0&Format=image%2Fpng&TileMatrix=EPSG%3A3857%3A5&TileCol=18&TileRow=11",description:"This is the basemap for DLR Service Portals",opacity:1};a&&Object.assign(o,a),super(o)}}class d9 extends fl{constructor(a){const o={name:"EOC Baseoverlay Tile",displayName:"EOC Baseoverlay Tile",id:"eoc_Baseoverlay_tile",visible:!1,type:"wmts",removable:!1,params:{layer:"eoc:baseoverlay",format:"image/png",style:"_empty",matrixSetOptions:{matrixSet:"EPSG:3857",tileMatrixPrefix:"EPSG:3857"}},url:"https://tiles.geoservice.dlr.de/service/wmts",attribution:'&copy, <a href="//geoservice.dlr.de/eoc/basemap/">DLR</a>',continuousWorld:!1,legendImg:"https://tiles.geoservice.dlr.de/service/wmts?layer=eoc%3Abaseoverlay&style=_empty&tilematrixset=EPSG%3A3857&Service=WMTS&Request=GetTile&Version=1.0.0&Format=image%2Fpng&TileMatrix=EPSG%3A3857%3A5&TileCol=18&TileRow=11",description:"This is the basemap for DLR Service Portals",opacity:1};a&&Object.assign(o,a),super(o)}}class f9 extends fl{constructor(a){const o={name:"BlueMarble Tile",displayName:"BlueMarble Tile",id:"blueMarble_tile",visible:!1,type:"wmts",removable:!1,params:{layer:"bmng_topo_bathy",format:"image/png",style:"_empty",matrixSetOptions:{matrixSet:"EPSG:3857",tileMatrixPrefix:"EPSG:3857"}},url:"https://tiles.geoservice.dlr.de/service/wmts",attribution:'&copy, <a href="//geoservice.dlr.de/eoc/basemap/">DLR</a>',continuousWorld:!1,legendImg:"https://tiles.geoservice.dlr.de/service/wmts?layer=bmng_topo_bathy&style=_empty&tilematrixset=EPSG%3A3857&Service=WMTS&Request=GetTile&Version=1.0.0&Format=image%2Fpng&TileMatrix=EPSG%3A3857%3A5&TileCol=18&TileRow=11",description:"Blue Marble NG dataset with topography and bathymetry",opacity:1};a&&Object.assign(o,a),super(o)}}class p9 extends fl{constructor(a){const o={name:"World Relief B/W Tile",displayName:"World Relief B/W Tile",id:"eoc:world_relief_bw",visible:!1,type:"wmts",removable:!1,params:{layer:"eoc:world_relief_bw",format:"image/png",style:"_empty",matrixSetOptions:{matrixSet:"EPSG:3857",tileMatrixPrefix:"EPSG:3857"}},url:"https://tiles.geoservice.dlr.de/service/wmts",attribution:'&copy, <a href="//geoservice.dlr.de/eoc/basemap/">DLR</a>',continuousWorld:!1,legendImg:"https://tiles.geoservice.dlr.de/service/wmts?layer=eoc%3Aworld_relief_bw&style=_empty&tilematrixset=EPSG%3A3857&Service=WMTS&Request=GetTile&Version=1.0.0&Format=image%2Fpng&TileMatrix=EPSG%3A3857%3A5&TileCol=18&TileRow=11",description:"World Relief Black / White",opacity:1};a&&Object.assign(o,a),super(o)}}class abe extends fl{constructor(a){const o={name:"Hillshade Tile",displayName:"Hillshade Tile",id:"eoc_hillshade",visible:!1,type:"wmts",removable:!1,params:{layer:"hillshade",format:"image/png",style:"_empty",matrixSetOptions:{matrixSet:"EPSG:3857",tileMatrixPrefix:"EPSG:3857"}},url:"https://tiles.geoservice.dlr.de/service/wmts",attribution:'&copy, <a href="//geoservice.dlr.de/eoc/basemap/">DLR</a>',continuousWorld:!1,legendImg:"https://tiles.geoservice.dlr.de/service/wmts?layer=hillshade&style=_empty&tilematrixset=EPSG%3A3857&Service=WMTS&Request=GetTile&Version=1.0.0&Format=image%2Fpng&TileMatrix=EPSG%3A3857%3A5&TileCol=18&TileRow=11",description:"Global Hillshade based on GMTED2010",opacity:1};a&&Object.assign(o,a),super(o)}}const DE=function(){function l(){this.disposed=!1}return l.prototype.dispose=function(){this.disposed||(this.disposed=!0,this.disposeInternal())},l.prototype.disposeInternal=function(){},l}();function jm(l,a){return l>a?1:l<a?-1:0}function Xf(l,a){return l.indexOf(a)>=0}function AE(l,a,o){var c=l.length;if(l[0]<=a)return 0;if(a<=l[c-1])return c-1;var u=void 0;if(o>0){for(u=1;u<c;++u)if(l[u]<a)return u-1}else if(o<0){for(u=1;u<c;++u)if(l[u]<=a)return u}else for(u=1;u<c;++u){if(l[u]==a)return u;if(l[u]<a)return"function"==typeof o?o(a,l[u-1],l[u])>0?u-1:u:l[u-1]-a<a-l[u]?u-1:u}return c-1}function ube(l,a,o){for(;a<o;){var c=l[a];l[a]=l[o],l[o]=c,++a,--o}}function es(l,a){for(var o=Array.isArray(a)?a:[a],c=o.length,u=0;u<c;u++)l[l.length]=o[u]}function Wm(l,a){var o=l.length;if(o!==a.length)return!1;for(var c=0;c<o;c++)if(l[c]!==a[c])return!1;return!0}function Gv(){return!0}function IE(){return!1}function qm(){}function Gn(){return function(){throw new Error("Unimplemented abstract method.")}()}var fbe=0;function Dn(l){return l.ol_uid||(l.ol_uid=String(++fbe))}var zv="undefined"!=typeof navigator&&void 0!==navigator.userAgent?navigator.userAgent.toLowerCase():"",pbe=-1!==zv.indexOf("firefox"),mbe=(-1!==zv.indexOf("safari")&&zv.indexOf("chrom"),-1!==zv.indexOf("webkit")&&-1==zv.indexOf("edge")),gbe=-1!==zv.indexOf("macintosh"),m9="undefined"!=typeof devicePixelRatio?devicePixelRatio:1,RE="undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof OffscreenCanvas&&self instanceof WorkerGlobalScope,ybe="undefined"!=typeof Image&&Image.prototype.decode,g9=function(){var l=!1;try{var a=Object.defineProperty({},"passive",{get:function(){l=!0}});window.addEventListener("_",null,a),window.removeEventListener("_",null,a)}catch(o){}return l}(),vbe=function(){var l=function(a,o){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,u){c.__proto__=u}||function(c,u){for(var h in u)Object.prototype.hasOwnProperty.call(u,h)&&(c[h]=u[h])})(a,o)};return function(a,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function c(){this.constructor=a}l(a,o),a.prototype=null===o?Object.create(o):(c.prototype=o.prototype,new c)}}();const y9=function(l){function a(o){var c=this,h="Assertion failed. See https://openlayers.org/en/v"+"6.8.1".split("-")[0]+"/doc/errors/#"+o+" for details.";return(c=l.call(this,h)||this).code=o,c.name="AssertionError",c.message=h,c}return vbe(a,l),a}(Error);function Yn(l,a){if(!l)throw new y9(a)}var v9,nN=new Array(6);function sT(l){return oT(l,1,0,0,1,0,0)}function Hv(l,a){var o=l[0],c=l[1],u=l[2],h=l[3],d=l[4],f=l[5],m=a[0],g=a[1],y=a[2],v=a[3],_=a[4],b=a[5];return l[0]=o*m+u*g,l[1]=c*m+h*g,l[2]=o*y+u*v,l[3]=c*y+h*v,l[4]=o*_+u*b+d,l[5]=c*_+h*b+f,l}function oT(l,a,o,c,u,h,d){return l[0]=a,l[1]=o,l[2]=c,l[3]=u,l[4]=h,l[5]=d,l}function ts(l,a){var o=a[0],c=a[1];return a[0]=l[0]*o+l[2]*c+l[4],a[1]=l[1]*o+l[3]*c+l[5],a}function PE(l,a,o){return Hv(l,oT(nN,a,0,0,o,0,0))}function Fa(l,a,o,c,u,h,d,f){var m=Math.sin(h),g=Math.cos(h);return l[0]=c*g,l[1]=u*m,l[2]=-c*m,l[3]=u*g,l[4]=d*c*g-f*c*m+a,l[5]=d*u*m+f*u*g+o,l}function jv(l,a){var o=function(l){return l[0]*l[3]-l[1]*l[2]}(a);Yn(0!==o,32);var c=a[0],u=a[1],h=a[2],d=a[3],f=a[4],m=a[5];return l[0]=d/o,l[1]=-u/o,l[2]=-h/o,l[3]=c/o,l[4]=(h*m-d*f)/o,l[5]=-(c*m-u*f)/o,l}function LE(l){var a="matrix("+l.join(", ")+")";if(RE)return a;var o=v9||(v9=document.createElement("div"));return o.style.transform=a,o.style.transform}function rN(l){for(var a=[1/0,1/0,-1/0,-1/0],o=0,c=l.length;o<c;++o)Wv(a,l[o]);return a}function jl(l,a,o){return o?(o[0]=l[0]-a,o[1]=l[1]-a,o[2]=l[2]+a,o[3]=l[3]+a,o):[l[0]-a,l[1]-a,l[2]+a,l[3]+a]}function _9(l,a){return a?(a[0]=l[0],a[1]=l[1],a[2]=l[2],a[3]=l[3],a):l.slice()}function Xm(l,a,o){var c,u;return(c=a<l[0]?l[0]-a:l[2]<a?a-l[2]:0)*c+(u=o<l[1]?l[1]-o:l[3]<o?o-l[3]:0)*u}function Pd(l,a){return lT(l,a[0],a[1])}function pl(l,a){return l[0]<=a[0]&&a[2]<=l[2]&&l[1]<=a[1]&&a[3]<=l[3]}function lT(l,a,o){return l[0]<=a&&a<=l[2]&&l[1]<=o&&o<=l[3]}function iN(l,a){var d=a[0],f=a[1],m=0;return d<l[0]?m|=16:d>l[2]&&(m|=4),f<l[1]?m|=8:f>l[3]&&(m|=2),0===m&&(m=1),m}function yh(l,a,o,c,u){return u?(u[0]=l,u[1]=a,u[2]=o,u[3]=c,u):[l,a,o,c]}function $m(l){return yh(1/0,1/0,-1/0,-1/0,l)}function sN(l,a){var o=l[0],c=l[1];return yh(o,c,o,c,a)}function oN(l,a,o,c,u){return S9($m(u),l,a,o,c)}function vh(l,a){return l[0]==a[0]&&l[2]==a[2]&&l[1]==a[1]&&l[3]==a[3]}function aN(l,a){return a[0]<l[0]&&(l[0]=a[0]),a[2]>l[2]&&(l[2]=a[2]),a[1]<l[1]&&(l[1]=a[1]),a[3]>l[3]&&(l[3]=a[3]),l}function Wv(l,a){a[0]<l[0]&&(l[0]=a[0]),a[0]>l[2]&&(l[2]=a[0]),a[1]<l[1]&&(l[1]=a[1]),a[1]>l[3]&&(l[3]=a[1])}function S9(l,a,o,c,u){for(;o<c;o+=u)Dbe(l,a[o],a[o+1]);return l}function Dbe(l,a,o){l[0]=Math.min(l[0],a),l[1]=Math.min(l[1],o),l[2]=Math.max(l[2],a),l[3]=Math.max(l[3],o)}function T9(l,a){var o;return!!((o=a(NE(l)))||(o=a(cT(l)),o)||(o=a(FE(l)),o)||(o=a(_h(l)),o))&&o}function OE(l){var a=0;return Xv(l)||(a=Wr(l)*bs(l)),a}function NE(l){return[l[0],l[1]]}function cT(l){return[l[2],l[1]]}function ml(l){return[(l[0]+l[2])/2,(l[1]+l[3])/2]}function Abe(l,a){var o;return"bottom-left"===a?o=NE(l):"bottom-right"===a?o=cT(l):"top-left"===a?o=_h(l):"top-right"===a?o=FE(l):Yn(!1,13),o}function qv(l,a,o,c,u){var h=a*c[0]/2,d=a*c[1]/2,f=Math.cos(o),m=Math.sin(o),g=h*f,y=h*m,v=d*f,_=d*m,b=l[0],w=l[1],C=b-g+_,E=b-g-_,M=b+g-_,x=b+g+_,R=w-y-v,P=w-y+v,k=w+y+v,W=w+y-v;return yh(Math.min(C,E,M,x),Math.min(R,P,k,W),Math.max(C,E,M,x),Math.max(R,P,k,W),u)}function bs(l){return l[3]-l[1]}function gu(l,a,o){var c=o||[1/0,1/0,-1/0,-1/0];return As(l,a)?(c[0]=l[0]>a[0]?l[0]:a[0],c[1]=l[1]>a[1]?l[1]:a[1],c[2]=l[2]<a[2]?l[2]:a[2],c[3]=l[3]<a[3]?l[3]:a[3]):$m(c),c}function _h(l){return[l[0],l[3]]}function FE(l){return[l[2],l[3]]}function Wr(l){return l[2]-l[0]}function As(l,a){return l[0]<=a[2]&&l[2]>=a[0]&&l[1]<=a[3]&&l[3]>=a[1]}function Xv(l){return l[2]<l[0]||l[3]<l[1]}function lN(l,a){var o=(l[2]-l[0])/2*(a-1),c=(l[3]-l[1])/2*(a-1);l[0]-=o,l[2]+=o,l[1]-=c,l[3]+=c}function cN(l,a,o,c){var u=[];if(c>1)for(var h=l[2]-l[0],d=l[3]-l[1],f=0;f<c;++f)u.push(l[0]+h*f/c,l[1],l[2],l[1]+d*f/c,l[2]-h*f/c,l[3],l[0],l[3]-d*f/c);else u=[l[0],l[1],l[2],l[1],l[2],l[3],l[0],l[3]];a(u,u,2);for(var m=[],g=[],y=(f=0,u.length);f<y;f+=2)m.push(u[f]),g.push(u[f+1]);return function(l,a,o){return yh(Math.min.apply(null,l),Math.min.apply(null,a),Math.max.apply(null,l),Math.max.apply(null,a),o)}(m,g,o)}function w9(l,a){var o=a.getExtent(),c=ml(l);if(a.canWrapX()&&(c[0]<o[0]||c[0]>=o[2])){var u=Wr(o),d=Math.floor((c[0]-o[0])/u)*u;l[0]-=d,l[2]-=d}return l}function br(l,a,o){return Math.min(Math.max(l,a),o)}var Pbe="cosh"in Math?Math.cosh:function(a){var o=Math.exp(a);return(o+1/o)/2},Lbe="log2"in Math?Math.log2:function(a){return Math.log(a)*Math.LOG2E};function C9(l,a,o,c,u,h){var d=u-o,f=h-c;if(0!==d||0!==f){var m=((l-o)*d+(a-c)*f)/(d*d+f*f);m>1?(o=u,c=h):m>0&&(o+=d*m,c+=f*m)}return Ym(l,a,o,c)}function Ym(l,a,o,c){var u=o-l,h=c-a;return u*u+h*h}function uT(l){return l*Math.PI/180}function $f(l,a){var o=l%a;return o*a<0?o+a:o}function Ld(l,a,o){return l+o*(a-l)}var x9=/^#([a-f0-9]{3}|[a-f0-9]{4}(?:[a-f0-9]{2}){0,2})$/i,E9=/^([a-z]*)$|^hsla?\(.*\)$/i;function M9(l){return"string"==typeof l?l:I9(l)}var a,o,Nbe=(a={},o=0,function(c){var u;if(a.hasOwnProperty(c))u=a[c];else{if(o>=1024){var h=0;for(var d in a)0==(3&h++)&&(delete a[d],--o)}u=function(l){var a,o,c,u,h;if(E9.exec(l)&&(l=function(l){var a=document.createElement("div");if(a.style.color=l,""!==a.style.color){document.body.appendChild(a);var o=getComputedStyle(a).color;return document.body.removeChild(a),o}return""}(l)),x9.exec(l)){var f,d=l.length-1;f=d<=4?1:2;var m=4===d||8===d;a=parseInt(l.substr(1+0*f,f),16),o=parseInt(l.substr(1+1*f,f),16),c=parseInt(l.substr(1+2*f,f),16),u=m?parseInt(l.substr(1+3*f,f),16):255,1==f&&(a=(a<<4)+a,o=(o<<4)+o,c=(c<<4)+c,m&&(u=(u<<4)+u)),h=[a,o,c,u/255]}else 0==l.indexOf("rgba(")?A9(h=l.slice(5,-1).split(",").map(Number)):0==l.indexOf("rgb(")?((h=l.slice(4,-1).split(",").map(Number)).push(1),A9(h)):Yn(!1,14);return h}(c),a[c]=u,++o}return u});function uN(l){return Array.isArray(l)?l:Nbe(l)}function A9(l){return l[0]=br(l[0]+.5|0,0,255),l[1]=br(l[1]+.5|0,0,255),l[2]=br(l[2]+.5|0,0,255),l[3]=br(l[3],0,1),l}function I9(l){var a=l[0];a!=(0|a)&&(a=a+.5|0);var o=l[1];o!=(0|o)&&(o=o+.5|0);var c=l[2];return c!=(0|c)&&(c=c+.5|0),"rgba("+a+","+o+","+c+","+(void 0===l[3]?1:l[3])+")"}function R9(l,a,o){return a+":"+l+":"+(o?M9(o):"null")}var kE=new(function(){function l(){this.cache_={},this.cacheSize_=0,this.maxCacheSize_=32}return l.prototype.clear=function(){this.cache_={},this.cacheSize_=0},l.prototype.canExpireCache=function(){return this.cacheSize_>this.maxCacheSize_},l.prototype.expire=function(){if(this.canExpireCache()){var a=0;for(var o in this.cache_)0==(3&a++)&&!this.cache_[o].hasListener()&&(delete this.cache_[o],--this.cacheSize_)}},l.prototype.get=function(a,o,c){var u=R9(a,o,c);return u in this.cache_?this.cache_[u]:null},l.prototype.set=function(a,o,c,u){var h=R9(a,o,c);this.cache_[h]=u,++this.cacheSize_},l.prototype.setSize=function(a){this.maxCacheSize_=a,this.expire()},l}());const Od=function(){function l(a){this.type=a,this.target=null}return l.prototype.preventDefault=function(){this.defaultPrevented=!0},l.prototype.stopPropagation=function(){this.propagationStopped=!0},l}();var Gr="function"==typeof Object.assign?Object.assign:function(l,a){if(null==l)throw new TypeError("Cannot convert undefined or null to object");for(var o=Object(l),c=1,u=arguments.length;c<u;++c){var h=arguments[c];if(null!=h)for(var d in h)h.hasOwnProperty(d)&&(o[d]=h[d])}return o};function $v(l){for(var a in l)delete l[a]}var P9="function"==typeof Object.values?Object.values:function(l){var a=[];for(var o in l)a.push(l[o]);return a};function Zm(l){var a;for(a in l)return!1;return!a}var Bbe=function(){var l=function(a,o){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,u){c.__proto__=u}||function(c,u){for(var h in u)Object.prototype.hasOwnProperty.call(u,h)&&(c[h]=u[h])})(a,o)};return function(a,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function c(){this.constructor=a}l(a,o),a.prototype=null===o?Object.create(o):(c.prototype=o.prototype,new c)}}();const Yv=function(l){function a(o){var c=l.call(this)||this;return c.eventTarget_=o,c.pendingRemovals_=null,c.dispatching_=null,c.listeners_=null,c}return Bbe(a,l),a.prototype.addEventListener=function(o,c){if(o&&c){var u=this.listeners_||(this.listeners_={}),h=u[o]||(u[o]=[]);-1===h.indexOf(c)&&h.push(c)}},a.prototype.dispatchEvent=function(o){var c="string"==typeof o?new Od(o):o,u=c.type;c.target||(c.target=this.eventTarget_||this);var d,h=this.listeners_&&this.listeners_[u];if(h){var f=this.dispatching_||(this.dispatching_={}),m=this.pendingRemovals_||(this.pendingRemovals_={});u in f||(f[u]=0,m[u]=0),++f[u];for(var g=0,y=h.length;g<y;++g)if(!1===(d="handleEvent"in h[g]?h[g].handleEvent(c):h[g].call(this,c))||c.propagationStopped){d=!1;break}if(--f[u],0===f[u]){var v=m[u];for(delete m[u];v--;)this.removeEventListener(u,qm);delete f[u]}return d}},a.prototype.disposeInternal=function(){this.listeners_&&$v(this.listeners_)},a.prototype.getListeners=function(o){return this.listeners_&&this.listeners_[o]||void 0},a.prototype.hasListener=function(o){return!!this.listeners_&&(o?o in this.listeners_:Object.keys(this.listeners_).length>0)},a.prototype.removeEventListener=function(o,c){var u=this.listeners_&&this.listeners_[o];if(u){var h=u.indexOf(c);-1!==h&&(this.pendingRemovals_&&o in this.pendingRemovals_?(u[h]=qm,++this.pendingRemovals_[o]):(u.splice(h,1),0===u.length&&delete this.listeners_[o]))}},a}(DE);function Sr(l,a,o,c,u){if(c&&c!==l&&(o=o.bind(c)),u){var h=o;o=function(){l.removeEventListener(a,o),h.apply(this,arguments)}}var d={target:l,type:a,listener:o};return l.addEventListener(a,o),d}function hT(l,a,o,c){return Sr(l,a,o,c,!0)}function Ii(l){l&&l.target&&(l.target.removeEventListener(l.type,l.listener),$v(l))}var Gbe=function(){var l=function(a,o){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,u){c.__proto__=u}||function(c,u){for(var h in u)Object.prototype.hasOwnProperty.call(u,h)&&(c[h]=u[h])})(a,o)};return function(a,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function c(){this.constructor=a}l(a,o),a.prototype=null===o?Object.create(o):(c.prototype=o.prototype,new c)}}();function L9(l){if(Array.isArray(l))for(var a=0,o=l.length;a<o;++a)Ii(l[a]);else Ii(l)}const O9=function(l){function a(){var o=l.call(this)||this;return o.on=o.onInternal,o.once=o.onceInternal,o.un=o.unInternal,o.revision_=0,o}return Gbe(a,l),a.prototype.changed=function(){++this.revision_,this.dispatchEvent("change")},a.prototype.getRevision=function(){return this.revision_},a.prototype.onInternal=function(o,c){if(Array.isArray(o)){for(var u=o.length,h=new Array(u),d=0;d<u;++d)h[d]=Sr(this,o[d],c);return h}return Sr(this,o,c)},a.prototype.onceInternal=function(o,c){var u;if(Array.isArray(o)){var h=o.length;u=new Array(h);for(var d=0;d<h;++d)u[d]=hT(this,o[d],c)}else u=hT(this,o,c);return c.ol_key=u,u},a.prototype.unInternal=function(o,c){var u=c.ol_key;if(u)L9(u);else if(Array.isArray(o))for(var h=0,d=o.length;h<d;++h)this.removeEventListener(o[h],c);else this.removeEventListener(o,c)},a}(Yv);var N9=function(){var l=function(a,o){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,u){c.__proto__=u}||function(c,u){for(var h in u)Object.prototype.hasOwnProperty.call(u,h)&&(c[h]=u[h])})(a,o)};return function(a,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function c(){this.constructor=a}l(a,o),a.prototype=null===o?Object.create(o):(c.prototype=o.prototype,new c)}}(),F9=function(l){function a(o,c,u){var h=l.call(this,o)||this;return h.key=c,h.oldValue=u,h}return N9(a,l),a}(Od);const yu=function(l){function a(o){var c=l.call(this)||this;return Dn(c),c.values_=null,void 0!==o&&c.setProperties(o),c}return N9(a,l),a.prototype.get=function(o){var c;return this.values_&&this.values_.hasOwnProperty(o)&&(c=this.values_[o]),c},a.prototype.getKeys=function(){return this.values_&&Object.keys(this.values_)||[]},a.prototype.getProperties=function(){return this.values_&&Gr({},this.values_)||{}},a.prototype.hasProperties=function(){return!!this.values_},a.prototype.notify=function(o,c){this.dispatchEvent(new F9("change:"+o,o,c)),this.dispatchEvent(new F9("propertychange",o,c))},a.prototype.addChangeListener=function(o,c){this.addEventListener("change:"+o,c)},a.prototype.removeChangeListener=function(o,c){this.removeEventListener("change:"+o,c)},a.prototype.set=function(o,c,u){var h=this.values_||(this.values_={});if(u)h[o]=c;else{var d=h[o];h[o]=c,d!==c&&this.notify(o,d)}},a.prototype.setProperties=function(o,c){for(var u in o)this.set(u,o[u],c)},a.prototype.applyProperties=function(o){!o.values_||Gr(this.values_||(this.values_={}),o.values_)},a.prototype.unset=function(o,c){if(this.values_&&o in this.values_){var u=this.values_[o];delete this.values_[o],Zm(this.values_)&&(this.values_=null),c||this.notify(o,u)}},a}(O9);var Hbe=function(){var l=function(a,o){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,u){c.__proto__=u}||function(c,u){for(var h in u)Object.prototype.hasOwnProperty.call(u,h)&&(c[h]=u[h])})(a,o)};return function(a,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function c(){this.constructor=a}l(a,o),a.prototype=null===o?Object.create(o):(c.prototype=o.prototype,new c)}}();const hN=function(l){function a(o){var c=l.call(this)||this,u=Gr({},o);return"object"==typeof o.properties&&(delete u.properties,Gr(u,o.properties)),u.opacity=void 0!==o.opacity?o.opacity:1,Yn("number"==typeof u.opacity,64),u.visible=void 0===o.visible||o.visible,u.zIndex=o.zIndex,u.maxResolution=void 0!==o.maxResolution?o.maxResolution:1/0,u.minResolution=void 0!==o.minResolution?o.minResolution:0,u.minZoom=void 0!==o.minZoom?o.minZoom:-1/0,u.maxZoom=void 0!==o.maxZoom?o.maxZoom:1/0,c.className_=void 0!==u.className?o.className:"ol-layer",delete u.className,c.setProperties(u),c.state_=null,c}return Hbe(a,l),a.prototype.getClassName=function(){return this.className_},a.prototype.getLayerState=function(o){var c=this.state_||{layer:this,managed:void 0===o||o},u=this.getZIndex();return c.opacity=br(Math.round(100*this.getOpacity())/100,0,1),c.sourceState=this.getSourceState(),c.visible=this.getVisible(),c.extent=this.getExtent(),c.zIndex=void 0!==u||c.managed?u:1/0,c.maxResolution=this.getMaxResolution(),c.minResolution=Math.max(this.getMinResolution(),0),c.minZoom=this.getMinZoom(),c.maxZoom=this.getMaxZoom(),this.state_=c,c},a.prototype.getLayersArray=function(o){return Gn()},a.prototype.getLayerStatesArray=function(o){return Gn()},a.prototype.getExtent=function(){return this.get("extent")},a.prototype.getMaxResolution=function(){return this.get("maxResolution")},a.prototype.getMinResolution=function(){return this.get("minResolution")},a.prototype.getMinZoom=function(){return this.get("minZoom")},a.prototype.getMaxZoom=function(){return this.get("maxZoom")},a.prototype.getOpacity=function(){return this.get("opacity")},a.prototype.getSourceState=function(){return Gn()},a.prototype.getVisible=function(){return this.get("visible")},a.prototype.getZIndex=function(){return this.get("zIndex")},a.prototype.setExtent=function(o){this.set("extent",o)},a.prototype.setMaxResolution=function(o){this.set("maxResolution",o)},a.prototype.setMinResolution=function(o){this.set("minResolution",o)},a.prototype.setMaxZoom=function(o){this.set("maxZoom",o)},a.prototype.setMinZoom=function(o){this.set("minZoom",o)},a.prototype.setOpacity=function(o){Yn("number"==typeof o,64),this.set("opacity",o)},a.prototype.setVisible=function(o){this.set("visible",o)},a.prototype.setZIndex=function(o){this.set("zIndex",o)},a.prototype.disposeInternal=function(){this.state_&&(this.state_.layer=null,this.state_=null),l.prototype.disposeInternal.call(this)},a}(yu);var Wbe=function(){var l=function(a,o){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,u){c.__proto__=u}||function(c,u){for(var h in u)Object.prototype.hasOwnProperty.call(u,h)&&(c[h]=u[h])})(a,o)};return function(a,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function c(){this.constructor=a}l(a,o),a.prototype=null===o?Object.create(o):(c.prototype=o.prototype,new c)}}();function BE(l,a){if(!l.visible)return!1;var o=a.resolution;if(o<l.minResolution||o>=l.maxResolution)return!1;var c=a.zoom;return c>l.minZoom&&c<=l.maxZoom}const gl=function(l){function a(o){var c=this,u=Gr({},o);return delete u.source,(c=l.call(this,u)||this).mapPrecomposeKey_=null,c.mapRenderKey_=null,c.sourceChangeKey_=null,c.renderer_=null,o.render&&(c.render=o.render),o.map&&c.setMap(o.map),c.addChangeListener("source",c.handleSourcePropertyChange_),c.setSource(o.source?o.source:null),c}return Wbe(a,l),a.prototype.getLayersArray=function(o){var c=o||[];return c.push(this),c},a.prototype.getLayerStatesArray=function(o){var c=o||[];return c.push(this.getLayerState()),c},a.prototype.getSource=function(){return this.get("source")||null},a.prototype.getSourceState=function(){var o=this.getSource();return o?o.getState():"undefined"},a.prototype.handleSourceChange_=function(){this.changed()},a.prototype.handleSourcePropertyChange_=function(){this.sourceChangeKey_&&(Ii(this.sourceChangeKey_),this.sourceChangeKey_=null);var o=this.getSource();o&&(this.sourceChangeKey_=Sr(o,"change",this.handleSourceChange_,this)),this.changed()},a.prototype.getFeatures=function(o){return this.renderer_?this.renderer_.getFeatures(o):new Promise(function(c){return c([])})},a.prototype.render=function(o,c){var u=this.getRenderer();if(u.prepareFrame(o))return u.renderFrame(o,c)},a.prototype.setMap=function(o){this.mapPrecomposeKey_&&(Ii(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),o||this.changed(),this.mapRenderKey_&&(Ii(this.mapRenderKey_),this.mapRenderKey_=null),o&&(this.mapPrecomposeKey_=Sr(o,"precompose",function(c){var h=c.frameState.layerStatesArray,d=this.getLayerState(!1);Yn(!h.some(function(f){return f.layer===d.layer}),67),h.push(d)},this),this.mapRenderKey_=Sr(this,"change",o.render,o),this.changed())},a.prototype.setSource=function(o){this.set("source",o)},a.prototype.getRenderer=function(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_},a.prototype.hasRenderer=function(){return!!this.renderer_},a.prototype.createRenderer=function(){return null},a.prototype.disposeInternal=function(){this.renderer_&&(this.renderer_.dispose(),delete this.renderer_),this.setSource(null),l.prototype.disposeInternal.call(this)},a}(hN);function k9(l,a,o){var c=void 0!==o?l.toFixed(o):""+l,u=c.indexOf(".");return(u=-1===u?c.length:u)>a?c:new Array(1+a-u).join("0")+c}function V9(l,a){for(var o=(""+l).split("."),c=(""+a).split("."),u=0;u<Math.max(o.length,c.length);u++){var h=parseInt(o[u]||"0",10),d=parseInt(c[u]||"0",10);if(h>d)return 1;if(d>h)return-1}return 0}function B9(l,a){return l[0]+=+a[0],l[1]+=+a[1],l}function UE(l,a,o){var c=$f(a+180,360)-180,u=Math.abs(3600*c),h=o||0,d=Math.pow(10,h),f=Math.floor(u/3600),m=Math.floor((u-3600*f)/60),g=u-3600*f-60*m;return(g=Math.ceil(g*d)/d)>=60&&(g=0,m+=1),m>=60&&(m=0,f+=1),f+"\xb0 "+k9(m,2)+"\u2032 "+k9(g,2,h)+"\u2033"+(0==c?"":" "+l.charAt(c<0?1:0))}function dN(l,a){for(var o=!0,c=l.length-1;c>=0;--c)if(l[c]!=a[c]){o=!1;break}return o}function fN(l,a){var o=Math.cos(a),c=Math.sin(a),h=l[1]*o+l[0]*c;return l[0]=l[0]*o-l[1]*c,l[1]=h,l}function U9(l,a){return l[0]*=a,l[1]*=a,l}function pN(l,a){if(a.canWrapX()){var o=Wr(a.getExtent()),c=H9(l,a,o);c&&(l[0]-=c*o)}return l}function H9(l,a,o){var c=a.getExtent(),u=0;if(a.canWrapX()&&(l[0]<c[0]||l[0]>c[2])){var h=o||Wr(c);u=Math.floor((l[0]-c[0])/h)}return u}var Ybe=function(){var l=function(a,o){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,u){c.__proto__=u}||function(c,u){for(var h in u)Object.prototype.hasOwnProperty.call(u,h)&&(c[h]=u[h])})(a,o)};return function(a,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function c(){this.constructor=a}l(a,o),a.prototype=null===o?Object.create(o):(c.prototype=o.prototype,new c)}}();function Kbe(l,a){kE.expire()}const Jbe=function(l){function a(o){var c=l.call(this)||this;return c.map_=o,c}return Ybe(a,l),a.prototype.dispatchRenderEvent=function(o,c){Gn()},a.prototype.calculateMatrices2D=function(o){var c=o.viewState,u=o.coordinateToPixelTransform,h=o.pixelToCoordinateTransform;Fa(u,o.size[0]/2,o.size[1]/2,1/c.resolution,-1/c.resolution,-c.rotation,-c.center[0],-c.center[1]),jv(h,u)},a.prototype.forEachFeatureAtCoordinate=function(o,c,u,h,d,f,m,g){var y,v=c.viewState;function _(_e,ue,ce,Re){return d.call(f,ue,_e?ce:null,Re)}var b=v.projection,w=pN(o.slice(),b),C=[[0,0]];if(b.canWrapX()&&h){var M=Wr(b.getExtent());C.push([-M,0],[M,0])}for(var x=c.layerStatesArray,R=x.length,P=[],k=[],W=0;W<C.length;W++)for(var U=R-1;U>=0;--U){var K=x[U],Q=K.layer;if(Q.hasRenderer()&&BE(K,v)&&m.call(g,Q)){var se=Q.getRenderer(),te=Q.getSource();if(se&&te){var De=te.getWrapX()?w:o,de=_.bind(null,K.managed);k[0]=De[0]+C[W][0],k[1]=De[1]+C[W][1],y=se.forEachFeatureAtCoordinate(k,c,u,de,P)}if(y)return y}}if(0!==P.length){var ye=1/P.length;return P.forEach(function(_e,ue){return _e.distanceSq+=ue*ye}),P.sort(function(_e,ue){return _e.distanceSq-ue.distanceSq}),P.some(function(_e){return y=_e.callback(_e.feature,_e.layer,_e.geometry)}),y}},a.prototype.forEachLayerAtPixel=function(o,c,u,h,d){return Gn()},a.prototype.hasFeatureAtCoordinate=function(o,c,u,h,d,f){return void 0!==this.forEachFeatureAtCoordinate(o,c,u,h,Gv,this,d,f)},a.prototype.getMap=function(){return this.map_},a.prototype.renderFrame=function(o){Gn()},a.prototype.scheduleExpireIconCache=function(o){kE.canExpireCache()&&o.postRenderFunctions.push(Kbe)},a}(DE);var Qbe=function(){var l=function(a,o){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,u){c.__proto__=u}||function(c,u){for(var h in u)Object.prototype.hasOwnProperty.call(u,h)&&(c[h]=u[h])})(a,o)};return function(a,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function c(){this.constructor=a}l(a,o),a.prototype=null===o?Object.create(o):(c.prototype=o.prototype,new c)}}();const mN=function(l){function a(o,c,u,h){var d=l.call(this,o)||this;return d.inversePixelTransform=c,d.frameState=u,d.context=h,d}return Qbe(a,l),a}(Od);var GE="ol-hidden",Jm="ol-unselectable",dT="ol-control",zE="ol-collapsed",rSe=new RegExp(["^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)","(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?","(?:small|large)|medium|smaller|larger|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))","(?:\\s*\\/\\s*(normal|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])?))","?\\s*([-,\\\"\\'\\sa-z]+?)\\s*$"].join(""),"i"),j9=["style","variant","weight","size","lineHeight","family"],W9=function(l){var a=l.match(rSe);if(!a)return null;for(var o={lineHeight:"normal",size:"1.2em",style:"normal",weight:"normal",variant:"normal"},c=0,u=j9.length;c<u;++c){var h=a[c+1];void 0!==h&&(o[j9[c]]=h)}return o.families=o.family.split(/,\s?/),o};function gN(l){return 1===l?"":String(Math.round(100*l)/100)}function Va(l,a,o,c){var u;return o&&o.length?u=o.shift():RE?u=new OffscreenCanvas(l||300,a||300):(u=document.createElement("canvas")).style.all="unset",l&&(u.width=l),a&&(u.height=a),u.getContext("2d",c)}function iSe(l){var a=l.offsetWidth,o=getComputedStyle(l);return a+(parseInt(o.marginLeft,10)+parseInt(o.marginRight,10))}function sSe(l){var a=l.offsetHeight,o=getComputedStyle(l);return a+(parseInt(o.marginTop,10)+parseInt(o.marginBottom,10))}function Zv(l,a){var o=a.parentNode;o&&o.replaceChild(l,a)}function HE(l){return l&&l.parentNode?l.parentNode.removeChild(l):null}function q9(l){for(;l.lastChild;)l.removeChild(l.lastChild)}function yN(l,a){for(var o=l.childNodes,c=0;;++c){var u=o[c],h=a[c];if(!u&&!h)break;if(u!==h){if(!u){l.appendChild(h);continue}if(!h){l.removeChild(u),--c;continue}l.insertBefore(h,u)}}}var X9="10px sans-serif",Nd="#000",jE="round",fT=[],Kv="round",gT="#000",yT="center",WE="middle",Qm=[0,0,0,0],Fd=new yu,vN=new Yv;vN.setSize=function(){console.warn("labelCache is deprecated.")};var _N,Jv=null,bN={},oSe=function(){var h,d,a="32px ",o=["monospace","serif"],c=o.length,u="wmytzilWMYTZIL@#/&?$%10\uf013";function f(g,y,v){for(var _=!0,b=0;b<c;++b){var w=o[b];if(d=qE(g+" "+y+" "+a+w,u),v!=w){var C=qE(g+" "+y+" "+a+v+","+w,u);_=_&&C!=d}}return!!_}function m(){for(var g=!0,y=Fd.getKeys(),v=0,_=y.length;v<_;++v){var b=y[v];Fd.get(b)<100&&(f.apply(this,b.split("\n"))?($v(bN),Jv=null,_N=void 0,Fd.set(b,100)):(Fd.set(b,Fd.get(b)+1,!0),g=!1))}g&&(clearInterval(h),h=void 0)}return function(g){var y=W9(g);if(y)for(var v=y.families,_=0,b=v.length;_<b;++_){var w=v[_],C=y.style+"\n"+y.weight+"\n"+w;void 0===Fd.get(C)&&(Fd.set(C,100,!0),f(y.style,y.weight,w)||(Fd.set(C,0,!0),void 0===h&&(h=setInterval(m,32))))}}}(),aSe=function(){var l;return function(a){var o=bN[a];if(null==o){if(RE){var c=W9(a),u=$9(a,"\u017dg");o=(isNaN(Number(c.lineHeight))?1.2:Number(c.lineHeight))*(u.actualBoundingBoxAscent+u.actualBoundingBoxDescent)}else l||((l=document.createElement("div")).innerHTML="M",l.style.minHeight="0",l.style.maxHeight="none",l.style.height="auto",l.style.padding="0",l.style.border="none",l.style.position="absolute",l.style.display="block",l.style.left="-99999px"),l.style.font=a,document.body.appendChild(l),o=l.offsetHeight,document.body.removeChild(l);bN[a]=o}return o}}();function $9(l,a){return Jv||(Jv=Va(1,1)),l!=_N&&(Jv.font=l,_N=Jv.font),Jv.measureText(a)}function qE(l,a){return $9(l,a).width}function Y9(l,a,o){if(a in o)return o[a];var c=qE(l,a);return o[a]=c,c}var hSe=function(){var l=function(a,o){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,u){c.__proto__=u}||function(c,u){for(var h in u)Object.prototype.hasOwnProperty.call(u,h)&&(c[h]=u[h])})(a,o)};return function(a,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function c(){this.constructor=a}l(a,o),a.prototype=null===o?Object.create(o):(c.prototype=o.prototype,new c)}}();const Z9=function(l){function a(o){var c=l.call(this,o)||this;c.fontChangeListenerKey_=Sr(Fd,"propertychange",o.redrawText.bind(o)),c.element_=document.createElement("div");var u=c.element_.style;u.position="absolute",u.width="100%",u.height="100%",u.zIndex="0",c.element_.className=Jm+" ol-layers";var h=o.getViewport();return h.insertBefore(c.element_,h.firstChild||null),c.children_=[],c.renderedVisible_=!0,c}return hSe(a,l),a.prototype.dispatchRenderEvent=function(o,c){var u=this.getMap();if(u.hasListener(o)){var h=new mN(o,void 0,c);u.dispatchEvent(h)}},a.prototype.disposeInternal=function(){Ii(this.fontChangeListenerKey_),this.element_.parentNode.removeChild(this.element_),l.prototype.disposeInternal.call(this)},a.prototype.renderFrame=function(o){if(o){this.calculateMatrices2D(o),this.dispatchRenderEvent("precompose",o);var c=o.layerStatesArray.sort(function(_,b){return _.zIndex-b.zIndex}),u=o.viewState;this.children_.length=0;for(var h=[],d=null,f=0,m=c.length;f<m;++f){var g=c[f];if(o.layerIndex=f,BE(g,u)&&("ready"==g.sourceState||"undefined"==g.sourceState)){var y=g.layer,v=y.render(o,d);!v||(v!==d&&(this.children_.push(v),d=v),"getDeclutter"in y&&h.push(y))}}for(f=h.length-1;f>=0;--f)h[f].renderDeclutter(o);yN(this.element_,this.children_),this.dispatchRenderEvent("postcompose",o),this.renderedVisible_||(this.element_.style.display="",this.renderedVisible_=!0),this.scheduleExpireIconCache(o)}else this.renderedVisible_&&(this.element_.style.display="none",this.renderedVisible_=!1)},a.prototype.forEachLayerAtPixel=function(o,c,u,h,d){for(var f=c.viewState,m=c.layerStatesArray,y=m.length-1;y>=0;--y){var v=m[y],_=v.layer;if(_.hasRenderer()&&BE(v,f)&&d(_)){var w=_.getRenderer().getDataAtPixel(o,c,u);if(w){var C=h(_,w);if(C)return C}}}},a}(Jbe);var K9=function(){var l=function(a,o){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,u){c.__proto__=u}||function(c,u){for(var h in u)Object.prototype.hasOwnProperty.call(u,h)&&(c[h]=u[h])})(a,o)};return function(a,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function c(){this.constructor=a}l(a,o),a.prototype=null===o?Object.create(o):(c.prototype=o.prototype,new c)}}(),XE=function(l){function a(o,c,u){var h=l.call(this,o)||this;return h.element=c,h.index=u,h}return K9(a,l),a}(Od);const Qo=function(l){function a(o,c){var u=l.call(this)||this;if(u.unique_=!!(c||{}).unique,u.array_=o||[],u.unique_)for(var d=0,f=u.array_.length;d<f;++d)u.assertUnique_(u.array_[d],d);return u.updateLength_(),u}return K9(a,l),a.prototype.clear=function(){for(;this.getLength()>0;)this.pop()},a.prototype.extend=function(o){for(var c=0,u=o.length;c<u;++c)this.push(o[c]);return this},a.prototype.forEach=function(o){for(var c=this.array_,u=0,h=c.length;u<h;++u)o(c[u],u,c)},a.prototype.getArray=function(){return this.array_},a.prototype.item=function(o){return this.array_[o]},a.prototype.getLength=function(){return this.get("length")},a.prototype.insertAt=function(o,c){this.unique_&&this.assertUnique_(c),this.array_.splice(o,0,c),this.updateLength_(),this.dispatchEvent(new XE("add",c,o))},a.prototype.pop=function(){return this.removeAt(this.getLength()-1)},a.prototype.push=function(o){this.unique_&&this.assertUnique_(o);var c=this.getLength();return this.insertAt(c,o),this.getLength()},a.prototype.remove=function(o){for(var c=this.array_,u=0,h=c.length;u<h;++u)if(c[u]===o)return this.removeAt(u)},a.prototype.removeAt=function(o){var c=this.array_[o];return this.array_.splice(o,1),this.updateLength_(),this.dispatchEvent(new XE("remove",c,o)),c},a.prototype.setAt=function(o,c){var u=this.getLength();if(o<u){this.unique_&&this.assertUnique_(c,o);var h=this.array_[o];this.array_[o]=c,this.dispatchEvent(new XE("remove",h,o)),this.dispatchEvent(new XE("add",c,o))}else{for(var d=u;d<o;++d)this.insertAt(d,void 0);this.insertAt(o,c)}},a.prototype.updateLength_=function(){this.set("length",this.array_.length)},a.prototype.assertUnique_=function(o,c){for(var u=0,h=this.array_.length;u<h;++u)if(this.array_[u]===o&&u!==c)throw new y9(58)},a}(yu);var pSe=function(){var l=function(a,o){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,u){c.__proto__=u}||function(c,u){for(var h in u)Object.prototype.hasOwnProperty.call(u,h)&&(c[h]=u[h])})(a,o)};return function(a,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function c(){this.constructor=a}l(a,o),a.prototype=null===o?Object.create(o):(c.prototype=o.prototype,new c)}}();const Js=function(l){function a(o){var c=this,u=o||{},h=Gr({},u);delete h.layers;var d=u.layers;return(c=l.call(this,h)||this).layersListenerKeys_=[],c.listenerKeys_={},c.addChangeListener("layers",c.handleLayersChanged_),d?Array.isArray(d)?d=new Qo(d.slice(),{unique:!0}):Yn("function"==typeof d.getArray,43):d=new Qo(void 0,{unique:!0}),c.setLayers(d),c}return pSe(a,l),a.prototype.handleLayerChange_=function(){this.changed()},a.prototype.handleLayersChanged_=function(){this.layersListenerKeys_.forEach(Ii),this.layersListenerKeys_.length=0;var o=this.getLayers();for(var c in this.layersListenerKeys_.push(Sr(o,"add",this.handleLayersAdd_,this),Sr(o,"remove",this.handleLayersRemove_,this)),this.listenerKeys_)this.listenerKeys_[c].forEach(Ii);$v(this.listenerKeys_);for(var u=o.getArray(),h=0,d=u.length;h<d;h++){var f=u[h];this.listenerKeys_[Dn(f)]=[Sr(f,"propertychange",this.handleLayerChange_,this),Sr(f,"change",this.handleLayerChange_,this)]}this.changed()},a.prototype.handleLayersAdd_=function(o){var c=o.element;this.listenerKeys_[Dn(c)]=[Sr(c,"propertychange",this.handleLayerChange_,this),Sr(c,"change",this.handleLayerChange_,this)],this.changed()},a.prototype.handleLayersRemove_=function(o){var u=Dn(o.element);this.listenerKeys_[u].forEach(Ii),delete this.listenerKeys_[u],this.changed()},a.prototype.getLayers=function(){return this.get("layers")},a.prototype.setLayers=function(o){this.set("layers",o)},a.prototype.getLayersArray=function(o){var c=void 0!==o?o:[];return this.getLayers().forEach(function(u){u.getLayersArray(c)}),c},a.prototype.getLayerStatesArray=function(o){var c=void 0!==o?o:[],u=c.length;this.getLayers().forEach(function(y){y.getLayerStatesArray(c)});var h=this.getLayerState(),d=h.zIndex;!o&&void 0===h.zIndex&&(d=0);for(var f=u,m=c.length;f<m;f++){var g=c[f];g.opacity*=h.opacity,g.visible=g.visible&&h.visible,g.maxResolution=Math.min(g.maxResolution,h.maxResolution),g.minResolution=Math.max(g.minResolution,h.minResolution),g.minZoom=Math.max(g.minZoom,h.minZoom),g.maxZoom=Math.min(g.maxZoom,h.maxZoom),void 0!==h.extent&&(g.extent=void 0!==g.extent?gu(g.extent,h.extent):h.extent),void 0===g.zIndex&&(g.zIndex=d)}return c},a.prototype.getSourceState=function(){return"ready"},a}(hN);var gSe=function(){var l=function(a,o){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,u){c.__proto__=u}||function(c,u){for(var h in u)Object.prototype.hasOwnProperty.call(u,h)&&(c[h]=u[h])})(a,o)};return function(a,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function c(){this.constructor=a}l(a,o),a.prototype=null===o?Object.create(o):(c.prototype=o.prototype,new c)}}();const $E=function(l){function a(o,c,u){var h=l.call(this,o)||this;return h.map=c,h.frameState=void 0!==u?u:null,h}return gSe(a,l),a}(Od);var vSe=function(){var l=function(a,o){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,u){c.__proto__=u}||function(c,u){for(var h in u)Object.prototype.hasOwnProperty.call(u,h)&&(c[h]=u[h])})(a,o)};return function(a,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function c(){this.constructor=a}l(a,o),a.prototype=null===o?Object.create(o):(c.prototype=o.prototype,new c)}}();const Zf=function(l){function a(o,c,u,h,d){var f=l.call(this,o,c,d)||this;return f.originalEvent=u,f.pixel_=null,f.coordinate_=null,f.dragging=void 0!==h&&h,f}return vSe(a,l),Object.defineProperty(a.prototype,"pixel",{get:function(){return this.pixel_||(this.pixel_=this.map.getEventPixel(this.originalEvent)),this.pixel_},set:function(o){this.pixel_=o},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"coordinate",{get:function(){return this.coordinate_||(this.coordinate_=this.map.getCoordinateFromPixel(this.pixel)),this.coordinate_},set:function(o){this.coordinate_=o},enumerable:!1,configurable:!0}),a.prototype.preventDefault=function(){l.prototype.preventDefault.call(this),"preventDefault"in this.originalEvent&&this.originalEvent.preventDefault()},a.prototype.stopPropagation=function(){l.prototype.stopPropagation.call(this),"stopPropagation"in this.originalEvent&&this.originalEvent.stopPropagation()},a}($E),ns={SINGLECLICK:"singleclick",CLICK:"click",DBLCLICK:"dblclick",POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"};var bSe=function(){var l=function(a,o){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,u){c.__proto__=u}||function(c,u){for(var h in u)Object.prototype.hasOwnProperty.call(u,h)&&(c[h]=u[h])})(a,o)};return function(a,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function c(){this.constructor=a}l(a,o),a.prototype=null===o?Object.create(o):(c.prototype=o.prototype,new c)}}();const TSe=function(l){function a(o,c){var u=l.call(this,o)||this;u.map_=o,u.emulateClicks_=!1,u.dragging_=!1,u.dragListenerKeys_=[],u.moveTolerance_=void 0===c?1:c,u.down_=null;var h=u.map_.getViewport();return u.activePointers_=0,u.trackedTouches_={},u.element_=h,u.pointerdownListenerKey_=Sr(h,"pointerdown",u.handlePointerDown_,u),u.relayedListenerKey_=Sr(h,"pointermove",u.relayEvent_,u),u.boundHandleTouchMove_=u.handleTouchMove_.bind(u),u.element_.addEventListener("touchmove",u.boundHandleTouchMove_,!!g9&&{passive:!1}),u}return bSe(a,l),a.prototype.emulateClick_=function(o){var c=new Zf(ns.CLICK,this.map_,o);this.dispatchEvent(c),void 0!==this.clickTimeoutId_?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=void 0,c=new Zf(ns.DBLCLICK,this.map_,o),this.dispatchEvent(c)):this.clickTimeoutId_=setTimeout(function(){this.clickTimeoutId_=void 0;var u=new Zf(ns.SINGLECLICK,this.map_,o);this.dispatchEvent(u)}.bind(this),250)},a.prototype.updateActivePointers_=function(o){var c=o;c.type==ns.POINTERUP||c.type==ns.POINTERCANCEL?delete this.trackedTouches_[c.pointerId]:c.type==ns.POINTERDOWN&&(this.trackedTouches_[c.pointerId]=!0),this.activePointers_=Object.keys(this.trackedTouches_).length},a.prototype.handlePointerUp_=function(o){this.updateActivePointers_(o);var c=new Zf(ns.POINTERUP,this.map_,o);this.dispatchEvent(c),this.emulateClicks_&&!c.defaultPrevented&&!this.dragging_&&this.isMouseActionButton_(o)&&this.emulateClick_(this.down_),0===this.activePointers_&&(this.dragListenerKeys_.forEach(Ii),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null)},a.prototype.isMouseActionButton_=function(o){return 0===o.button},a.prototype.handlePointerDown_=function(o){this.emulateClicks_=0===this.activePointers_,this.updateActivePointers_(o);var c=new Zf(ns.POINTERDOWN,this.map_,o);for(var u in this.dispatchEvent(c),this.down_={},o){var h=o[u];this.down_[u]="function"==typeof h?qm:h}if(0===this.dragListenerKeys_.length){var d=this.map_.getOwnerDocument();this.dragListenerKeys_.push(Sr(d,ns.POINTERMOVE,this.handlePointerMove_,this),Sr(d,ns.POINTERUP,this.handlePointerUp_,this),Sr(this.element_,ns.POINTERCANCEL,this.handlePointerUp_,this)),this.element_.getRootNode&&this.element_.getRootNode()!==d&&this.dragListenerKeys_.push(Sr(this.element_.getRootNode(),ns.POINTERUP,this.handlePointerUp_,this))}},a.prototype.handlePointerMove_=function(o){if(this.isMoving_(o)){this.dragging_=!0;var c=new Zf(ns.POINTERDRAG,this.map_,o,this.dragging_);this.dispatchEvent(c)}},a.prototype.relayEvent_=function(o){this.originalPointerMoveEvent_=o;var c=!(!this.down_||!this.isMoving_(o));this.dispatchEvent(new Zf(o.type,this.map_,o,c))},a.prototype.handleTouchMove_=function(o){var c=this.originalPointerMoveEvent_;(!c||c.defaultPrevented)&&("boolean"!=typeof o.cancelable||!0===o.cancelable)&&o.preventDefault()},a.prototype.isMoving_=function(o){return this.dragging_||Math.abs(o.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(o.clientY-this.down_.clientY)>this.moveTolerance_},a.prototype.disposeInternal=function(){this.relayedListenerKey_&&(Ii(this.relayedListenerKey_),this.relayedListenerKey_=null),this.element_.removeEventListener("touchmove",this.boundHandleTouchMove_),this.pointerdownListenerKey_&&(Ii(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(Ii),this.dragListenerKeys_.length=0,this.element_=null,l.prototype.disposeInternal.call(this)},a}(Yv);var YE=1/0;const CSe=function(){function l(a,o){this.priorityFunction_=a,this.keyFunction_=o,this.elements_=[],this.priorities_=[],this.queuedElements_={}}return l.prototype.clear=function(){this.elements_.length=0,this.priorities_.length=0,$v(this.queuedElements_)},l.prototype.dequeue=function(){var a=this.elements_,o=this.priorities_,c=a[0];1==a.length?(a.length=0,o.length=0):(a[0]=a.pop(),o[0]=o.pop(),this.siftUp_(0));var u=this.keyFunction_(c);return delete this.queuedElements_[u],c},l.prototype.enqueue=function(a){Yn(!(this.keyFunction_(a)in this.queuedElements_),31);var o=this.priorityFunction_(a);return o!=YE&&(this.elements_.push(a),this.priorities_.push(o),this.queuedElements_[this.keyFunction_(a)]=!0,this.siftDown_(0,this.elements_.length-1),!0)},l.prototype.getCount=function(){return this.elements_.length},l.prototype.getLeftChildIndex_=function(a){return 2*a+1},l.prototype.getRightChildIndex_=function(a){return 2*a+2},l.prototype.getParentIndex_=function(a){return a-1>>1},l.prototype.heapify_=function(){var a;for(a=(this.elements_.length>>1)-1;a>=0;a--)this.siftUp_(a)},l.prototype.isEmpty=function(){return 0===this.elements_.length},l.prototype.isKeyQueued=function(a){return a in this.queuedElements_},l.prototype.isQueued=function(a){return this.isKeyQueued(this.keyFunction_(a))},l.prototype.siftUp_=function(a){for(var o=this.elements_,c=this.priorities_,u=o.length,h=o[a],d=c[a],f=a;a<u>>1;){var m=this.getLeftChildIndex_(a),g=this.getRightChildIndex_(a),y=g<u&&c[g]<c[m]?g:m;o[a]=o[y],c[a]=c[y],a=y}o[a]=h,c[a]=d,this.siftDown_(f,a)},l.prototype.siftDown_=function(a,o){for(var c=this.elements_,u=this.priorities_,h=c[o],d=u[o];o>a;){var f=this.getParentIndex_(o);if(!(u[f]>d))break;c[o]=c[f],u[o]=u[f],o=f}c[o]=h,u[o]=d},l.prototype.reprioritize=function(){var d,f,m,a=this.priorityFunction_,o=this.elements_,c=this.priorities_,u=0,h=o.length;for(f=0;f<h;++f)(m=a(d=o[f]))==YE?delete this.queuedElements_[this.keyFunction_(d)]:(c[u]=m,o[u++]=d);o.length=u,c.length=u,this.heapify_()},l}();var xSe=function(){var l=function(a,o){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,u){c.__proto__=u}||function(c,u){for(var h in u)Object.prototype.hasOwnProperty.call(u,h)&&(c[h]=u[h])})(a,o)};return function(a,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function c(){this.constructor=a}l(a,o),a.prototype=null===o?Object.create(o):(c.prototype=o.prototype,new c)}}();const MSe=function(l){function a(o,c){var u=l.call(this,function(h){return o.apply(null,h)},function(h){return h[0].getKey()})||this;return u.boundHandleTileChange_=u.handleTileChange.bind(u),u.tileChangeCallback_=c,u.tilesLoading_=0,u.tilesLoadingKeys_={},u}return xSe(a,l),a.prototype.enqueue=function(o){var c=l.prototype.enqueue.call(this,o);return c&&o[0].addEventListener("change",this.boundHandleTileChange_),c},a.prototype.getTilesLoading=function(){return this.tilesLoading_},a.prototype.handleTileChange=function(o){var c=o.target,u=c.getState();if(2===u||3===u||4===u){c.removeEventListener("change",this.boundHandleTileChange_);var h=c.getKey();h in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[h],--this.tilesLoading_),this.tileChangeCallback_()}},a.prototype.loadMoreTiles=function(o,c){for(var d,f,u=0;this.tilesLoading_<o&&u<c&&this.getCount()>0;)f=(d=this.dequeue()[0]).getKey(),0===d.getState()&&!(f in this.tilesLoadingKeys_)&&(this.tilesLoadingKeys_[f]=!0,++this.tilesLoading_,++u,d.load())},a}(CSe);var vu={RADIANS:"radians",DEGREES:"degrees",FEET:"ft",METERS:"m",PIXELS:"pixels",TILE_PIXELS:"tile-pixels",USFEET:"us-ft"},Wl={};Wl[vu.RADIANS]=6370997/(2*Math.PI),Wl[vu.DEGREES]=2*Math.PI*6370997/360,Wl[vu.FEET]=.3048,Wl[vu.METERS]=1,Wl[vu.USFEET]=1200/3937;const vl=vu,eg=function(){function l(a){this.code_=a.code,this.units_=a.units,this.extent_=void 0!==a.extent?a.extent:null,this.worldExtent_=void 0!==a.worldExtent?a.worldExtent:null,this.axisOrientation_=void 0!==a.axisOrientation?a.axisOrientation:"enu",this.global_=void 0!==a.global&&a.global,this.canWrapX_=!(!this.global_||!this.extent_),this.getPointResolutionFunc_=a.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=a.metersPerUnit}return l.prototype.canWrapX=function(){return this.canWrapX_},l.prototype.getCode=function(){return this.code_},l.prototype.getExtent=function(){return this.extent_},l.prototype.getUnits=function(){return this.units_},l.prototype.getMetersPerUnit=function(){return this.metersPerUnit_||Wl[this.units_]},l.prototype.getWorldExtent=function(){return this.worldExtent_},l.prototype.getAxisOrientation=function(){return this.axisOrientation_},l.prototype.isGlobal=function(){return this.global_},l.prototype.setGlobal=function(a){this.global_=a,this.canWrapX_=!(!a||!this.extent_)},l.prototype.getDefaultTileGrid=function(){return this.defaultTileGrid_},l.prototype.setDefaultTileGrid=function(a){this.defaultTileGrid_=a},l.prototype.setExtent=function(a){this.extent_=a,this.canWrapX_=!(!this.global_||!a)},l.prototype.setWorldExtent=function(a){this.worldExtent_=a},l.prototype.setGetPointResolution=function(a){this.getPointResolutionFunc_=a},l.prototype.getPointResolutionFunc=function(){return this.getPointResolutionFunc_},l}();var RSe=function(){var l=function(a,o){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,u){c.__proto__=u}||function(c,u){for(var h in u)Object.prototype.hasOwnProperty.call(u,h)&&(c[h]=u[h])})(a,o)};return function(a,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function c(){this.constructor=a}l(a,o),a.prototype=null===o?Object.create(o):(c.prototype=o.prototype,new c)}}(),bT=6378137,e_=Math.PI*bT,PSe=[-e_,-e_,e_,e_],LSe=[-180,-85,180,85],KE=bT*Math.log(Math.tan(Math.PI/2)),t_=function(l){function a(o){return l.call(this,{code:o,units:vl.METERS,extent:PSe,global:!0,worldExtent:LSe,getPointResolution:function(c,u){return c/Pbe(u[1]/bT)}})||this}return RSe(a,l),a}(eg),eW=[new t_("EPSG:3857"),new t_("EPSG:102100"),new t_("EPSG:102113"),new t_("EPSG:900913"),new t_("http://www.opengis.net/def/crs/EPSG/0/3857"),new t_("http://www.opengis.net/gml/srs/epsg.xml#3857")];var FSe=function(){var l=function(a,o){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,u){c.__proto__=u}||function(c,u){for(var h in u)Object.prototype.hasOwnProperty.call(u,h)&&(c[h]=u[h])})(a,o)};return function(a,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function c(){this.constructor=a}l(a,o),a.prototype=null===o?Object.create(o):(c.prototype=o.prototype,new c)}}(),tW=[-180,-90,180,90],VSe=6378137*Math.PI/180,tg=function(l){function a(o,c){return l.call(this,{code:o,units:vl.DEGREES,extent:tW,axisOrientation:c,global:!0,metersPerUnit:VSe,worldExtent:tW})||this}return FSe(a,l),a}(eg),nW=[new tg("CRS:84"),new tg("EPSG:4326","neu"),new tg("urn:ogc:def:crs:OGC:1.3:CRS84"),new tg("urn:ogc:def:crs:OGC:2:84"),new tg("http://www.opengis.net/def/crs/OGC/1.3/CRS84","neu"),new tg("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new tg("http://www.opengis.net/def/crs/EPSG/0/4326","neu")],JE={},_u={};function n_(l,a,o){var c=l.getCode(),u=a.getCode();c in _u||(_u[c]={}),_u[c][u]=o}function rW(l,a){var o;return l in _u&&a in _u[l]&&(o=_u[l][a]),o}function TN(l,a,o){var c=o||6371008.8,u=uT(l[1]),h=uT(a[1]),d=(h-u)/2,f=uT(a[0]-l[0])/2,m=Math.sin(d)*Math.sin(d)+Math.sin(f)*Math.sin(f)*Math.cos(u)*Math.cos(h);return 2*c*Math.atan2(Math.sqrt(m),Math.sqrt(1-m))}function CN(l,a,o){var c;if(void 0!==a){for(var u=0,h=l.length;u<h;++u)a[u]=l[u];c=a}else c=l.slice();return c}function xN(l,a,o){if(void 0!==a&&l!==a){for(var c=0,u=l.length;c<u;++c)a[c]=l[c];l=a}return l}function iW(l){(function(l,a){JE[l]=a})(l.getCode(),l),n_(l,l,CN)}function Bn(l){return"string"==typeof l?function(l){return JE[l]||JE[l.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\w+)$/,"EPSG:$3")]||null}(l):l||null}function tM(l,a,o,c){var u,h=(l=Bn(l)).getPointResolutionFunc();if(h)u=h(a,o),c&&c!==l.getUnits()&&(d=l.getMetersPerUnit())&&(u=u*d/Wl[c]);else{var f=l.getUnits();if(f==vl.DEGREES&&!c||c==vl.DEGREES)u=a;else{var d,m=Kf(l,Bn("EPSG:4326"));if(m===xN&&f!==vl.DEGREES)u=a*l.getMetersPerUnit();else{var g=[o[0]-a/2,o[1],o[0]+a/2,o[1],o[0],o[1]-a/2,o[0],o[1]+a/2];u=(TN((g=m(g,g,2)).slice(0,2),g.slice(2,4))+TN(g.slice(4,6),g.slice(6,8)))/2}void 0!==(d=c?Wl[c]:l.getMetersPerUnit())&&(u/=d)}}return u}function EN(l){(function(l){l.forEach(iW)})(l),l.forEach(function(a){l.forEach(function(o){a!==o&&n_(a,o,CN)})})}function MN(l,a){return l?"string"==typeof l?Bn(l):l:Bn(a)}function sW(l){return function(a,o,c){for(var u=a.length,h=void 0!==c?c:2,d=void 0!==o?o:new Array(u),f=0;f<u;f+=h){var m=l([a[f],a[f+1]]);d[f]=m[0],d[f+1]=m[1];for(var g=h-1;g>=2;--g)d[f+g]=a[f+g]}return d}}function WSe(l,a,o,c){var u=Bn(l),h=Bn(a);n_(u,h,sW(o)),n_(h,u,sW(c))}function Sh(l,a){if(l===a)return!0;var o=l.getUnits()===a.getUnits();return(l.getCode()===a.getCode()||Kf(l,a)===CN)&&o}function Kf(l,a){var u=rW(l.getCode(),a.getCode());return u||(u=xN),u}function Th(l,a){return Kf(Bn(l),Bn(a))}function ql(l,a,o){return Th(a,o)(l,void 0,l.length)}function Ba(l,a,o,c){return cN(l,Th(a,o),void 0,c)}var Ua=null;function nM(){return Ua}function DN(l,a){return l}function kd(l,a){return l}function AN(l,a){return l}function Vd(l,a){return l}function XSe(l,a){return l}function oW(l,a,o){return function(c){var d,f,u=c[0],h=c[1];if(l.canWrapX()){var m=l.getExtent(),g=Wr(m);(f=H9(c,l,g))&&(u-=f*g),u=br(u,m[0],m[2]),h=br(h,m[1],m[3]),d=o([u,h])}else d=o(c);return f&&a.canWrapX()&&(d[0]+=f*Wr(a.getExtent())),d}}function aW(l,a,o){return function(c,u,h,d,f){if(c){var m=a?0:h[0]*u,g=a?0:h[1]*u,y=f?f[0]:0,v=f?f[1]:0,_=l[0]+m/2+y,b=l[2]-m/2+y,w=l[1]+g/2+v,C=l[3]-g/2+v;_>b&&(b=_=(b+_)/2),w>C&&(C=w=(C+w)/2);var E=br(c[0],_,b),M=br(c[1],w,C),x=30*u;return d&&o&&(E+=-x*Math.log(1+Math.max(0,_-c[0])/x)+x*Math.log(1+Math.max(0,c[0]-b)/x),M+=-x*Math.log(1+Math.max(0,w-c[1])/x)+x*Math.log(1+Math.max(0,c[1]-C)/x)),[E,M]}}}function YSe(l){return l}function IN(l,a,o,c){var u=Wr(a)/o[0],h=bs(a)/o[1];return c?Math.min(l,Math.max(u,h)):Math.min(l,Math.min(u,h))}function RN(l,a,o){var c=Math.min(l,a);return c*=Math.log(1+50*Math.max(0,l/a-1))/50+1,o&&(c=Math.max(c,o),c/=Math.log(1+50*Math.max(0,o/l-1))/50+1),br(c,o/2,2*a)}function lW(l,a,o,c,u){return function(h,d,f,m){if(void 0!==h){var g=c?IN(l,c,f,u):l;return(void 0===o||o)&&m?RN(h,g,a):br(h,a,g)}}}function PN(l){if(void 0!==l)return 0}function cW(l){if(void 0!==l)return l}function uW(l){return Math.pow(l,3)}function ng(l){return 1-uW(1-l)}function LN(l){return 3*l*l-2*l*l*l}function eTe(l){return l}EN(eW),EN(nW),function(l,a,o,c){l.forEach(function(u){a.forEach(function(h){n_(u,h,o),n_(h,u,c)})})}(nW,eW,function(l,a,o){var c=l.length,u=o>1?o:2,h=a;void 0===h&&(h=u>2?l.slice():new Array(c));for(var d=0;d<c;d+=u){h[d]=e_*l[d]/180;var f=bT*Math.log(Math.tan(Math.PI*(+l[d+1]+90)/360));f>KE?f=KE:f<-KE&&(f=-KE),h[d+1]=f}return h},function(l,a,o){var c=l.length,u=o>1?o:2,h=a;void 0===h&&(h=u>2?l.slice():new Array(c));for(var d=0;d<c;d+=u)h[d]=180*l[d]/e_,h[d+1]=360*Math.atan(Math.exp(l[d+1]/bT))/Math.PI-90;return h});function Jf(l,a,o,c,u,h){for(var d=h||[],f=0,m=a;m<o;m+=c){var g=l[m],y=l[m+1];d[f++]=u[0]*g+u[2]*y+u[4],d[f++]=u[1]*g+u[3]*y+u[5]}return h&&d.length!=f&&(d.length=f),d}function hW(l,a,o,c,u,h,d){for(var f=d||[],m=Math.cos(u),g=Math.sin(u),y=h[0],v=h[1],_=0,b=a;b<o;b+=c){var w=l[b]-y,C=l[b+1]-v;f[_++]=y+w*m-C*g,f[_++]=v+w*g+C*m;for(var E=b+2;E<b+c;++E)f[_++]=l[E]}return d&&f.length!=_&&(f.length=_),f}var rTe=function(){var l=function(a,o){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,u){c.__proto__=u}||function(c,u){for(var h in u)Object.prototype.hasOwnProperty.call(u,h)&&(c[h]=u[h])})(a,o)};return function(a,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function c(){this.constructor=a}l(a,o),a.prototype=null===o?Object.create(o):(c.prototype=o.prototype,new c)}}(),dW=[1,0,0,1,0,0];const fW=function(l){function a(){var o=l.call(this)||this;return o.extent_=[1/0,1/0,-1/0,-1/0],o.extentRevision_=-1,o.simplifiedGeometryMaxMinSquaredTolerance=0,o.simplifiedGeometryRevision=0,o.simplifyTransformedInternal=function(l){var o,c,u,a=!1;return function(){var h=Array.prototype.slice.call(arguments);return(!a||this!==u||!Wm(h,c))&&(a=!0,u=this,c=h,o=l.apply(this,arguments)),o}}(function(c,u,h){if(!h)return this.getSimplifiedGeometry(u);var d=this.clone();return d.applyTransform(h),d.getSimplifiedGeometry(u)}),o}return rTe(a,l),a.prototype.simplifyTransformed=function(o,c){return this.simplifyTransformedInternal(this.getRevision(),o,c)},a.prototype.clone=function(){return Gn()},a.prototype.closestPointXY=function(o,c,u,h){return Gn()},a.prototype.containsXY=function(o,c){var u=this.getClosestPoint([o,c]);return u[0]===o&&u[1]===c},a.prototype.getClosestPoint=function(o,c){var u=c||[NaN,NaN];return this.closestPointXY(o[0],o[1],u,1/0),u},a.prototype.intersectsCoordinate=function(o){return this.containsXY(o[0],o[1])},a.prototype.computeExtent=function(o){return Gn()},a.prototype.getExtent=function(o){if(this.extentRevision_!=this.getRevision()){var c=this.computeExtent(this.extent_);(isNaN(c[0])||isNaN(c[1]))&&$m(c),this.extentRevision_=this.getRevision()}return function(l,a){return a?(a[0]=l[0],a[1]=l[1],a[2]=l[2],a[3]=l[3],a):l}(this.extent_,o)},a.prototype.rotate=function(o,c){Gn()},a.prototype.scale=function(o,c,u){Gn()},a.prototype.simplify=function(o){return this.getSimplifiedGeometry(o*o)},a.prototype.getSimplifiedGeometry=function(o){return Gn()},a.prototype.getType=function(){return Gn()},a.prototype.applyTransform=function(o){Gn()},a.prototype.intersectsExtent=function(o){return Gn()},a.prototype.translate=function(o,c){Gn()},a.prototype.transform=function(o,c){var u=Bn(o),h=u.getUnits()==vl.TILE_PIXELS?function(d,f,m){var g=u.getExtent(),y=u.getWorldExtent(),v=bs(y)/bs(g);return Fa(dW,y[0],y[3],v,-v,0,0,0),Jf(d,0,d.length,m,dW,f),Th(u,c)(d,f,m)}:Th(u,c);return this.applyTransform(h),this},a}(yu);var sTe=function(){var l=function(a,o){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,u){c.__proto__=u}||function(c,u){for(var h in u)Object.prototype.hasOwnProperty.call(u,h)&&(c[h]=u[h])})(a,o)};return function(a,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function c(){this.constructor=a}l(a,o),a.prototype=null===o?Object.create(o):(c.prototype=o.prototype,new c)}}();function pW(l){var a;return"XY"==l?a=2:"XYZ"==l||"XYM"==l?a=3:"XYZM"==l&&(a=4),a}const rg=function(l){function a(){var o=l.call(this)||this;return o.layout="XY",o.stride=2,o.flatCoordinates=null,o}return sTe(a,l),a.prototype.computeExtent=function(o){return oN(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,o)},a.prototype.getCoordinates=function(){return Gn()},a.prototype.getFirstCoordinate=function(){return this.flatCoordinates.slice(0,this.stride)},a.prototype.getFlatCoordinates=function(){return this.flatCoordinates},a.prototype.getLastCoordinate=function(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)},a.prototype.getLayout=function(){return this.layout},a.prototype.getSimplifiedGeometry=function(o){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),o<0||0!==this.simplifiedGeometryMaxMinSquaredTolerance&&o<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;var c=this.getSimplifiedGeometryInternal(o);return c.getFlatCoordinates().length<this.flatCoordinates.length?c:(this.simplifiedGeometryMaxMinSquaredTolerance=o,this)},a.prototype.getSimplifiedGeometryInternal=function(o){return this},a.prototype.getStride=function(){return this.stride},a.prototype.setFlatCoordinates=function(o,c){this.stride=pW(o),this.layout=o,this.flatCoordinates=c},a.prototype.setCoordinates=function(o,c){Gn()},a.prototype.setLayout=function(o,c,u){var h;if(o)h=pW(o);else{for(var d=0;d<u;++d){if(0===c.length)return this.layout="XY",void(this.stride=2);c=c[0]}o=function(l){var a;return 2==l?a="XY":3==l?a="XYZ":4==l&&(a="XYZM"),a}(h=c.length)}this.layout=o,this.stride=h},a.prototype.applyTransform=function(o){this.flatCoordinates&&(o(this.flatCoordinates,this.flatCoordinates,this.stride),this.changed())},a.prototype.rotate=function(o,c){var u=this.getFlatCoordinates();if(u){var h=this.getStride();hW(u,0,u.length,h,o,c,u),this.changed()}},a.prototype.scale=function(o,c,u){var h=c;void 0===h&&(h=o);var d=u;d||(d=ml(this.getExtent()));var f=this.getFlatCoordinates();if(f){var m=this.getStride();(function(l,a,o,c,u,h,d,f){for(var m=f||[],g=d[0],y=d[1],v=0,_=0;_<o;_+=c){var w=l[_+1]-y;m[v++]=g+u*(l[_]-g),m[v++]=y+h*w;for(var C=_+2;C<_+c;++C)m[v++]=l[C]}f&&m.length!=v&&(m.length=v)})(f,0,f.length,m,o,h,d,f),this.changed()}},a.prototype.translate=function(o,c){var u=this.getFlatCoordinates();if(u){var h=this.getStride();(function(l,a,o,c,u,h,d){for(var f=d||[],m=0,g=0;g<o;g+=c){f[m++]=l[g]+u,f[m++]=l[g+1]+h;for(var y=g+2;y<g+c;++y)f[m++]=l[y]}d&&f.length!=m&&(f.length=m)})(u,0,u.length,h,o,c,u),this.changed()}},a}(fW);function mW(l,a,o,c,u,h,d){var v,f=l[a],m=l[a+1],g=l[o]-f,y=l[o+1]-m;if(0===g&&0===y)v=a;else{var _=((u-f)*g+(h-m)*y)/(g*g+y*y);if(_>1)v=o;else{if(_>0){for(var b=0;b<c;++b)d[b]=Ld(l[a+b],l[o+b],_);return void(d.length=c)}v=a}}for(b=0;b<c;++b)d[b]=l[v+b];d.length=c}function ON(l,a,o,c,u){var h=l[a],d=l[a+1];for(a+=c;a<o;a+=c){var f=l[a],m=l[a+1],g=Ym(h,d,f,m);g>u&&(u=g),h=f,d=m}return u}function NN(l,a,o,c,u){for(var h=0,d=o.length;h<d;++h){var f=o[h];u=ON(l,a,f,c,u),a=f}return u}function FN(l,a,o,c,u,h,d,f,m,g,y){if(a==o)return g;var v,_;if(0===u){if((_=Ym(d,f,l[a],l[a+1]))<g){for(v=0;v<c;++v)m[v]=l[a+v];return m.length=c,_}return g}for(var b=y||[NaN,NaN],w=a+c;w<o;)if(mW(l,w-c,w,c,d,f,b),(_=Ym(d,f,b[0],b[1]))<g){for(g=_,v=0;v<c;++v)m[v]=b[v];m.length=c,w+=c}else w+=c*Math.max((Math.sqrt(_)-Math.sqrt(g))/u|0,1);if(h&&(mW(l,o-c,a,c,d,f,b),(_=Ym(d,f,b[0],b[1]))<g)){for(g=_,v=0;v<c;++v)m[v]=b[v];m.length=c}return g}function kN(l,a,o,c,u,h,d,f,m,g,y){for(var v=y||[NaN,NaN],_=0,b=o.length;_<b;++_){var w=o[_];g=FN(l,a,w,c,u,h,d,f,m,g,v),a=w}return g}function rM(l,a,o,c){for(var u=0,h=o.length;u<h;++u)for(var d=o[u],f=0;f<c;++f)l[a++]=d[f];return a}function VN(l,a,o,c,u){for(var h=u||[],d=0,f=0,m=o.length;f<m;++f){var g=rM(l,a,o[f],c);h[d++]=g,a=g}return h.length=d,h}function iM(l,a,o,c,u,h,d){var f=(o-a)/c;if(f<3){for(;a<o;a+=c)h[d++]=l[a],h[d++]=l[a+1];return d}var m=new Array(f);m[0]=1,m[f-1]=1;for(var g=[a,o-c],y=0;g.length>0;){for(var v=g.pop(),_=g.pop(),b=0,w=l[_],C=l[_+1],E=l[v],M=l[v+1],x=_+c;x<v;x+=c){var k=C9(l[x],l[x+1],w,C,E,M);k>b&&(y=x,b=k)}b>u&&(m[(y-a)/c]=1,_+c<y&&g.push(_,y),y+c<v&&g.push(y,v))}for(x=0;x<f;++x)m[x]&&(h[d++]=l[a+x*c],h[d++]=l[a+x*c+1]);return d}function ig(l,a){return a*Math.round(l/a)}function pTe(l,a,o,c,u,h,d){if(a==o)return d;var g,y,f=ig(l[a],u),m=ig(l[a+1],u);a+=c,h[d++]=f,h[d++]=m;do{if(g=ig(l[a],u),y=ig(l[a+1],u),(a+=c)==o)return h[d++]=g,h[d++]=y,d}while(g==f&&y==m);for(;a<o;){var v=ig(l[a],u),_=ig(l[a+1],u);if(a+=c,v!=g||_!=y){var b=g-f,w=y-m,C=v-f,E=_-m;if(b*E==w*C&&(b<0&&C<b||b==C||b>0&&C>b)&&(w<0&&E<w||w==E||w>0&&E>w)){g=v,y=_;continue}h[d++]=g,h[d++]=y,f=g,m=y,g=v,y=_}}return h[d++]=g,h[d++]=y,d}function yW(l,a,o,c,u,h,d,f){for(var m=0,g=o.length;m<g;++m){var y=o[m];d=pTe(l,a,y,c,u,h,d),f.push(d),a=y}return d}function r_(l,a,o,c,u){for(var h=void 0!==u?u:[],d=0,f=a;f<o;f+=c)h[d++]=l.slice(f,f+c);return h.length=d,h}function sM(l,a,o,c,u){for(var h=void 0!==u?u:[],d=0,f=0,m=o.length;f<m;++f){var g=o[f];h[d++]=r_(l,a,g,c,h[d]),a=g}return h.length=d,h}function vW(l,a,o,c,u){for(var h=void 0!==u?u:[],d=0,f=0,m=o.length;f<m;++f){var g=o[f];h[d++]=sM(l,a,g,c,h[d]),a=g[g.length-1]}return h.length=d,h}function _W(l,a,o,c){for(var u=0,h=l[o-c],d=l[o-c+1];a<o;a+=c){var f=l[a],m=l[a+1];u+=d*f-h*m,h=f,d=m}return u/2}function bW(l,a,o,c){for(var u=0,h=0,d=o.length;h<d;++h){var f=o[h];u+=_W(l,a,f,c),a=f}return u}var yTe=function(){var l=function(a,o){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,u){c.__proto__=u}||function(c,u){for(var h in u)Object.prototype.hasOwnProperty.call(u,h)&&(c[h]=u[h])})(a,o)};return function(a,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function c(){this.constructor=a}l(a,o),a.prototype=null===o?Object.create(o):(c.prototype=o.prototype,new c)}}();const SW=function(l){function a(o,c){var u=l.call(this)||this;return u.maxDelta_=-1,u.maxDeltaRevision_=-1,void 0===c||Array.isArray(o[0])?u.setCoordinates(o,c):u.setFlatCoordinates(c,o),u}return yTe(a,l),a.prototype.clone=function(){return new a(this.flatCoordinates.slice(),this.layout)},a.prototype.closestPointXY=function(o,c,u,h){return h<Xm(this.getExtent(),o,c)?h:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(ON(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),FN(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,o,c,u,h))},a.prototype.getArea=function(){return _W(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},a.prototype.getCoordinates=function(){return r_(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},a.prototype.getSimplifiedGeometryInternal=function(o){var c=[];return c.length=iM(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,o,c,0),new a(c,"XY")},a.prototype.getType=function(){return"LinearRing"},a.prototype.intersectsExtent=function(o){return!1},a.prototype.setCoordinates=function(o,c){this.setLayout(c,o,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=rM(this.flatCoordinates,0,o,this.stride),this.changed()},a}(rg);var _Te=function(){var l=function(a,o){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,u){c.__proto__=u}||function(c,u){for(var h in u)Object.prototype.hasOwnProperty.call(u,h)&&(c[h]=u[h])})(a,o)};return function(a,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function c(){this.constructor=a}l(a,o),a.prototype=null===o?Object.create(o):(c.prototype=o.prototype,new c)}}();const wh=function(l){function a(o,c){var u=l.call(this)||this;return u.setCoordinates(o,c),u}return _Te(a,l),a.prototype.clone=function(){var o=new a(this.flatCoordinates.slice(),this.layout);return o.applyProperties(this),o},a.prototype.closestPointXY=function(o,c,u,h){var d=this.flatCoordinates,f=Ym(o,c,d[0],d[1]);if(f<h){for(var m=this.stride,g=0;g<m;++g)u[g]=d[g];return u.length=m,f}return h},a.prototype.getCoordinates=function(){return this.flatCoordinates?this.flatCoordinates.slice():[]},a.prototype.computeExtent=function(o){return sN(this.flatCoordinates,o)},a.prototype.getType=function(){return"Point"},a.prototype.intersectsExtent=function(o){return lT(o,this.flatCoordinates[0],this.flatCoordinates[1])},a.prototype.setCoordinates=function(o,c){this.setLayout(c,o,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=function(l,a,o,c){for(var u=0,h=o.length;u<h;++u)l[a++]=o[u];return a}(this.flatCoordinates,0,o),this.changed()},a}(rg);function STe(l,a,o,c,u){return!T9(u,function(d){return!sg(l,a,o,c,d[0],d[1])})}function sg(l,a,o,c,u,h){for(var d=0,f=l[o-c],m=l[o-c+1];a<o;a+=c){var g=l[a],y=l[a+1];m<=h?y>h&&(g-f)*(h-m)-(u-f)*(y-m)>0&&d++:y<=h&&(g-f)*(h-m)-(u-f)*(y-m)<0&&d--,f=g,m=y}return 0!==d}function BN(l,a,o,c,u,h){if(0===o.length||!sg(l,a,o[0],c,u,h))return!1;for(var d=1,f=o.length;d<f;++d)if(sg(l,o[d-1],o[d],c,u,h))return!1;return!0}function UN(l,a,o,c,u,h,d){for(var f,m,g,y,v,_,b,w=u[h+1],C=[],E=0,M=o.length;E<M;++E){var x=o[E];for(y=l[x-c],_=l[x-c+1],f=a;f<x;f+=c)v=l[f],b=l[f+1],(w<=_&&b<=w||_<=w&&w<=b)&&C.push(g=(w-_)/(b-_)*(v-y)+y),y=v,_=b}var R=NaN,P=-1/0;for(C.sort(jm),y=C[0],f=1,m=C.length;f<m;++f){v=C[f];var k=Math.abs(v-y);k>P&&BN(l,a,o,c,g=(y+v)/2,w)&&(R=g,P=k),y=v}return isNaN(R)&&(R=u[h]),d?(d.push(R,w,P),d):[R,w,P]}function TW(l,a,o,c,u){for(var h=[],d=0,f=o.length;d<f;++d){var m=o[d];h=UN(l,a,m,c,u,2*d,h),a=m[m.length-1]}return h}function wW(l,a,o,c,u){var h;for(a+=c;a<o;a+=c)if(h=u(l.slice(a-c,a),l.slice(a,a+c)))return h;return!1}function oM(l,a,o,c,u){var h=S9([1/0,1/0,-1/0,-1/0],l,a,o,c);return!!As(u,h)&&(!!(pl(u,h)||h[0]>=u[0]&&h[2]<=u[2]||h[1]>=u[1]&&h[3]<=u[3])||wW(l,a,o,c,function(d,f){return function(l,a,o){var c=!1,u=iN(l,a),h=iN(l,o);if(1===u||1===h)c=!0;else{var d=l[0],f=l[1],m=l[2],g=l[3],_=o[0],b=o[1],w=(b-a[1])/(_-a[0]),C=void 0,E=void 0;!!(2&h)&&!(2&u)&&(c=(C=_-(b-g)/w)>=d&&C<=m),c||!(4&h)||4&u||(c=(E=b-(_-m)*w)>=f&&E<=g),c||!(8&h)||8&u||(c=(C=_-(b-f)/w)>=d&&C<=m),!c&&16&h&&!(16&u)&&(c=(E=b-(_-d)*w)>=f&&E<=g)}return c}(u,d,f)}))}function CW(l,a,o,c,u){if(!function(l,a,o,c,u){return!!(oM(l,a,o,c,u)||sg(l,a,o,c,u[0],u[1])||sg(l,a,o,c,u[0],u[3])||sg(l,a,o,c,u[2],u[1])||sg(l,a,o,c,u[2],u[3]))}(l,a,o[0],c,u))return!1;if(1===o.length)return!0;for(var h=1,d=o.length;h<d;++h)if(STe(l,o[h-1],o[h],c,u)&&!oM(l,o[h-1],o[h],c,u))return!1;return!0}function ETe(l,a,o,c){for(;a<o-c;){for(var u=0;u<c;++u){var h=l[a+u];l[a+u]=l[o-c+u],l[o-c+u]=h}a+=c,o-=c}}function GN(l,a,o,c){for(var u=0,h=l[o-c],d=l[o-c+1];a<o;a+=c){var f=l[a],m=l[a+1];u+=(f-h)*(m+d),h=f,d=m}return 0===u?void 0:u>0}function xW(l,a,o,c,u){for(var h=void 0!==u&&u,d=0,f=o.length;d<f;++d){var m=o[d],g=GN(l,a,m,c);if(0===d){if(h&&g||!h&&!g)return!1}else if(h&&!g||!h&&g)return!1;a=m}return!0}function zN(l,a,o,c,u){for(var h=void 0!==u&&u,d=0,f=o.length;d<f;++d){var m=o[d],g=GN(l,a,m,c);(0===d?h&&g||!h&&!g:h&&!g||!h&&g)&&ETe(l,a,m,c),a=m}return a}function EW(l,a,o,c,u){for(var h=0,d=o.length;h<d;++h)a=zN(l,a,o[h],c,u);return a}var DTe=function(){var l=function(a,o){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,u){c.__proto__=u}||function(c,u){for(var h in u)Object.prototype.hasOwnProperty.call(u,h)&&(c[h]=u[h])})(a,o)};return function(a,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function c(){this.constructor=a}l(a,o),a.prototype=null===o?Object.create(o):(c.prototype=o.prototype,new c)}}(),aM=function(l){function a(o,c,u){var h=l.call(this)||this;return h.ends_=[],h.flatInteriorPointRevision_=-1,h.flatInteriorPoint_=null,h.maxDelta_=-1,h.maxDeltaRevision_=-1,h.orientedRevision_=-1,h.orientedFlatCoordinates_=null,void 0!==c&&u?(h.setFlatCoordinates(c,o),h.ends_=u):h.setCoordinates(o,c),h}return DTe(a,l),a.prototype.appendLinearRing=function(o){this.flatCoordinates?es(this.flatCoordinates,o.getFlatCoordinates()):this.flatCoordinates=o.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()},a.prototype.clone=function(){var o=new a(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return o.applyProperties(this),o},a.prototype.closestPointXY=function(o,c,u,h){return h<Xm(this.getExtent(),o,c)?h:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(NN(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),kN(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,o,c,u,h))},a.prototype.containsXY=function(o,c){return BN(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,o,c)},a.prototype.getArea=function(){return bW(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)},a.prototype.getCoordinates=function(o){var c;return void 0!==o?zN(c=this.getOrientedFlatCoordinates().slice(),0,this.ends_,this.stride,o):c=this.flatCoordinates,sM(c,0,this.ends_,this.stride)},a.prototype.getEnds=function(){return this.ends_},a.prototype.getFlatInteriorPoint=function(){if(this.flatInteriorPointRevision_!=this.getRevision()){var o=ml(this.getExtent());this.flatInteriorPoint_=UN(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,o,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_},a.prototype.getInteriorPoint=function(){return new wh(this.getFlatInteriorPoint(),"XYM")},a.prototype.getLinearRingCount=function(){return this.ends_.length},a.prototype.getLinearRing=function(o){return o<0||this.ends_.length<=o?null:new SW(this.flatCoordinates.slice(0===o?0:this.ends_[o-1],this.ends_[o]),this.layout)},a.prototype.getLinearRings=function(){for(var o=this.layout,c=this.flatCoordinates,u=this.ends_,h=[],d=0,f=0,m=u.length;f<m;++f){var g=u[f],y=new SW(c.slice(d,g),o);h.push(y),d=g}return h},a.prototype.getOrientedFlatCoordinates=function(){if(this.orientedRevision_!=this.getRevision()){var o=this.flatCoordinates;xW(o,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=o:(this.orientedFlatCoordinates_=o.slice(),this.orientedFlatCoordinates_.length=zN(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_},a.prototype.getSimplifiedGeometryInternal=function(o){var c=[],u=[];return c.length=yW(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(o),c,0,u),new a(c,"XY",u)},a.prototype.getType=function(){return"Polygon"},a.prototype.intersectsExtent=function(o){return CW(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,o)},a.prototype.setCoordinates=function(o,c){this.setLayout(c,o,2),this.flatCoordinates||(this.flatCoordinates=[]);var u=VN(this.flatCoordinates,0,o,this.stride,this.ends_);this.flatCoordinates.length=0===u.length?0:u[u.length-1],this.changed()},a}(rg);const Ch=aM;function HN(l){var a=l[0],o=l[1],c=l[2],u=l[3],h=[a,o,a,u,c,u,c,o,a,o];return new aM(h,"XY",[h.length])}var ITe=function(){var l=function(a,o){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,u){c.__proto__=u}||function(c,u){for(var h in u)Object.prototype.hasOwnProperty.call(u,h)&&(c[h]=u[h])})(a,o)};return function(a,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function c(){this.constructor=a}l(a,o),a.prototype=null===o?Object.create(o):(c.prototype=o.prototype,new c)}}();function lM(l,a){setTimeout(function(){l(a)},0)}function NTe(l){return!(l.sourceCenter&&l.targetCenter&&!dN(l.sourceCenter,l.targetCenter)||l.sourceResolution!==l.targetResolution||l.sourceRotation!==l.targetRotation)}function WN(l,a,o,c,u){var h=Math.cos(-u),d=Math.sin(-u),f=l[0]*h-l[1]*d,m=l[1]*h+l[0]*d;return[(f+=(a[0]/2-o[0])*c)*h-(m+=(o[1]-a[1]/2)*c)*(d=-d),m*h+f*d]}const bu=function(l){function a(o){var c=l.call(this)||this,u=Gr({},o);return c.hints_=[0,0],c.animations_=[],c.projection_=MN(u.projection,"EPSG:3857"),c.viewportSize_=[100,100],c.targetCenter_=null,c.nextCenter_=null,c.cancelAnchor_=void 0,u.center&&(u.center=kd(u.center)),u.extent&&(u.extent=Vd(u.extent)),c.applyOptions_(u),c}return ITe(a,l),a.prototype.applyOptions_=function(o){var u=function(l){var a,o,c,d=void 0!==l.minZoom?l.minZoom:0,f=void 0!==l.maxZoom?l.maxZoom:28,m=void 0!==l.zoomFactor?l.zoomFactor:2,g=void 0!==l.multiWorld&&l.multiWorld,y=void 0===l.smoothResolutionConstraint||l.smoothResolutionConstraint,v=void 0!==l.showFullExtent&&l.showFullExtent,_=MN(l.projection,"EPSG:3857"),b=_.getExtent(),w=l.constrainOnlyCenter,C=l.extent;if(!g&&!C&&_.isGlobal()&&(w=!1,C=b),void 0!==l.resolutions){var E=l.resolutions;o=E[d],c=void 0!==E[f]?E[f]:E[E.length-1],a=l.constrainResolution?function(l,a,o,c){return function(u,h,d,f){if(void 0!==u){var m=l[0],g=l[l.length-1],y=o?IN(m,o,d,c):m;if(f)return void 0===a||a?RN(u,y,g):br(u,g,y);var _=Math.min(y,u),b=Math.floor(AE(l,_,h));return l[b]>y&&b<l.length-1?l[b+1]:l[b]}}}(E,y,!w&&C,v):lW(o,c,y,!w&&C,v)}else{var x=(b?Math.max(Wr(b),bs(b)):360*Wl[vl.DEGREES]/_.getMetersPerUnit())/256/Math.pow(2,0),R=x/Math.pow(2,28);void 0!==(o=l.maxResolution)?d=0:o=x/Math.pow(m,d),void 0===(c=l.minResolution)&&(c=void 0!==l.maxZoom?void 0!==l.maxResolution?o/Math.pow(m,f):x/Math.pow(m,f):R),f=d+Math.floor(Math.log(o/c)/Math.log(m)),c=o/Math.pow(m,f-d),a=l.constrainResolution?function(l,a,o,c,u,h){return function(d,f,m,g){if(void 0!==d){var y=u?IN(a,u,m,h):a,v=void 0!==o?o:0;if(g)return void 0===c||c?RN(d,y,v):br(d,v,y);var w=Math.ceil(Math.log(a/y)/Math.log(l)-1e-9),C=-f*(.5-1e-9)+.5,E=Math.min(y,d),M=Math.floor(Math.log(a/E)/Math.log(l)+C),x=Math.max(w,M);return br(a/Math.pow(l,x),v,y)}}}(m,o,c,y,!w&&C,v):lW(o,c,y,!w&&C,v)}return{constraint:a,maxResolution:o,minResolution:c,minZoom:d,zoomFactor:m}}(o);this.maxResolution_=u.maxResolution,this.minResolution_=u.minResolution,this.zoomFactor_=u.zoomFactor,this.resolutions_=o.resolutions,this.padding_=o.padding,this.minZoom_=u.minZoom;var h=function(l){if(void 0!==l.extent)return aW(l.extent,l.constrainOnlyCenter,void 0===l.smoothExtentConstraint||l.smoothExtentConstraint);var o=MN(l.projection,"EPSG:3857");if(!0!==l.multiWorld&&o.isGlobal()){var c=o.getExtent().slice();return c[0]=-1/0,c[2]=1/0,aW(c,!1,!1)}return YSe}(o),d=u.constraint,f=function(l){if(void 0===l.enableRotation||l.enableRotation){var o=l.constrainRotation;return void 0===o||!0===o?function(l){var a=uT(5);return function(o,c){return c?o:void 0!==o?Math.abs(o)<=a?0:o:void 0}}():!1===o?cW:"number"==typeof o?function(l){var a=2*Math.PI/l;return function(o,c){return c?o:void 0!==o?o=Math.floor(o/a+.5)*a:void 0}}(o):cW}return PN}(o);this.constraints_={center:h,resolution:d,rotation:f},this.setRotation(void 0!==o.rotation?o.rotation:0),this.setCenterInternal(void 0!==o.center?o.center:null),void 0!==o.resolution?this.setResolution(o.resolution):void 0!==o.zoom&&this.setZoom(o.zoom),this.setProperties({}),this.options_=o},Object.defineProperty(a.prototype,"padding",{get:function(){return this.padding_},set:function(o){var c=this.padding_;this.padding_=o;var u=this.getCenter();if(u){var h=o||[0,0,0,0];c=c||[0,0,0,0];var d=this.getResolution();this.setCenterInternal([u[0]+d/2*(h[3]-c[3]+c[1]-h[1]),u[1]-d/2*(h[0]-c[0]+c[2]-h[2])])}},enumerable:!1,configurable:!0}),a.prototype.getUpdatedOptions_=function(o){var c=Gr({},this.options_);return void 0!==c.resolution?c.resolution=this.getResolution():c.zoom=this.getZoom(),c.center=this.getCenterInternal(),c.rotation=this.getRotation(),Gr({},c,o)},a.prototype.animate=function(o){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);for(var c=new Array(arguments.length),u=0;u<c.length;++u){var h=arguments[u];h.center&&((h=Gr({},h)).center=kd(h.center,this.getProjection())),h.anchor&&((h=Gr({},h)).anchor=kd(h.anchor,this.getProjection())),c[u]=h}this.animateInternal.apply(this,c)},a.prototype.animateInternal=function(o){var u,c=arguments.length;if(c>1&&"function"==typeof arguments[c-1]&&(u=arguments[c-1],--c),!this.isDef()){var h=arguments[c-1];return h.center&&this.setCenterInternal(h.center),void 0!==h.zoom&&this.setZoom(h.zoom),void 0!==h.rotation&&this.setRotation(h.rotation),void(u&&lM(u,!0))}for(var d=Date.now(),f=this.targetCenter_.slice(),m=this.targetResolution_,g=this.targetRotation_,y=[],v=0;v<c;++v){var _=arguments[v],b={start:d,complete:!1,anchor:_.anchor,duration:void 0!==_.duration?_.duration:1e3,easing:_.easing||LN,callback:u};if(_.center&&(b.sourceCenter=f,b.targetCenter=_.center.slice(),f=b.targetCenter),void 0!==_.zoom?(b.sourceResolution=m,b.targetResolution=this.getResolutionForZoom(_.zoom),m=b.targetResolution):_.resolution&&(b.sourceResolution=m,b.targetResolution=_.resolution,m=b.targetResolution),void 0!==_.rotation){b.sourceRotation=g;var w=$f(_.rotation-g+Math.PI,2*Math.PI)-Math.PI;b.targetRotation=g+w,g=b.targetRotation}NTe(b)?b.complete=!0:d+=b.duration,y.push(b)}this.animations_.push(y),this.setHint(0,1),this.updateAnimations_()},a.prototype.getAnimating=function(){return this.hints_[0]>0},a.prototype.getInteracting=function(){return this.hints_[1]>0},a.prototype.cancelAnimations=function(){this.setHint(0,-this.hints_[0]);for(var o,c=0,u=this.animations_.length;c<u;++c){var h=this.animations_[c];if(h[0].callback&&lM(h[0].callback,!1),!o)for(var d=0,f=h.length;d<f;++d){var m=h[d];if(!m.complete){o=m.anchor;break}}}this.animations_.length=0,this.cancelAnchor_=o,this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN},a.prototype.updateAnimations_=function(){if(void 0!==this.updateAnimationKey_&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),this.getAnimating()){for(var o=Date.now(),c=!1,u=this.animations_.length-1;u>=0;--u){for(var h=this.animations_[u],d=!0,f=0,m=h.length;f<m;++f){var g=h[f];if(!g.complete){var v=g.duration>0?(o-g.start)/g.duration:1;v>=1?(g.complete=!0,v=1):d=!1;var _=g.easing(v);if(g.sourceCenter){var b=g.sourceCenter[0],w=g.sourceCenter[1],C=g.targetCenter[0],E=g.targetCenter[1];this.nextCenter_=g.targetCenter,this.targetCenter_=[b+_*(C-b),w+_*(E-w)]}if(g.sourceResolution&&g.targetResolution){var R=1===_?g.targetResolution:g.sourceResolution+_*(g.targetResolution-g.sourceResolution);if(g.anchor){var P=this.getViewportSize_(this.getRotation()),k=this.constraints_.resolution(R,0,P,!0);this.targetCenter_=this.calculateCenterZoom(k,g.anchor)}this.nextResolution_=g.targetResolution,this.targetResolution_=R,this.applyTargetState_(!0)}if(void 0!==g.sourceRotation&&void 0!==g.targetRotation){var W=1===_?$f(g.targetRotation+Math.PI,2*Math.PI)-Math.PI:g.sourceRotation+_*(g.targetRotation-g.sourceRotation);if(g.anchor){var U=this.constraints_.rotation(W,!0);this.targetCenter_=this.calculateCenterRotate(U,g.anchor)}this.nextRotation_=g.targetRotation,this.targetRotation_=W}if(this.applyTargetState_(!0),c=!0,!g.complete)break}}if(d){this.animations_[u]=null,this.setHint(0,-1),this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN;var K=h[0].callback;K&&lM(K,!0)}}this.animations_=this.animations_.filter(Boolean),c&&void 0===this.updateAnimationKey_&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)))}},a.prototype.calculateCenterRotate=function(o,c){var u,h=this.getCenterInternal();return void 0!==h&&(fN(u=[h[0]-c[0],h[1]-c[1]],o-this.getRotation()),B9(u,c)),u},a.prototype.calculateCenterZoom=function(o,c){var u,h=this.getCenterInternal(),d=this.getResolution();return void 0!==h&&void 0!==d&&(u=[c[0]-o*(c[0]-h[0])/d,c[1]-o*(c[1]-h[1])/d]),u},a.prototype.getViewportSize_=function(o){var c=this.viewportSize_;if(o){var u=c[0],h=c[1];return[Math.abs(u*Math.cos(o))+Math.abs(h*Math.sin(o)),Math.abs(u*Math.sin(o))+Math.abs(h*Math.cos(o))]}return c},a.prototype.setViewportSize=function(o){this.viewportSize_=Array.isArray(o)?o.slice():[100,100],this.getAnimating()||this.resolveConstraints(0)},a.prototype.getCenter=function(){var o=this.getCenterInternal();return o&&DN(o,this.getProjection())},a.prototype.getCenterInternal=function(){return this.get("center")},a.prototype.getConstraints=function(){return this.constraints_},a.prototype.getConstrainResolution=function(){return this.options_.constrainResolution},a.prototype.getHints=function(o){return void 0!==o?(o[0]=this.hints_[0],o[1]=this.hints_[1],o):this.hints_.slice()},a.prototype.calculateExtent=function(o){return AN(this.calculateExtentInternal(o),this.getProjection())},a.prototype.calculateExtentInternal=function(o){var c=o||this.getViewportSizeMinusPadding_(),u=this.getCenterInternal();Yn(u,1);var h=this.getResolution();Yn(void 0!==h,2);var d=this.getRotation();return Yn(void 0!==d,3),qv(u,h,d,c)},a.prototype.getMaxResolution=function(){return this.maxResolution_},a.prototype.getMinResolution=function(){return this.minResolution_},a.prototype.getMaxZoom=function(){return this.getZoomForResolution(this.minResolution_)},a.prototype.setMaxZoom=function(o){this.applyOptions_(this.getUpdatedOptions_({maxZoom:o}))},a.prototype.getMinZoom=function(){return this.getZoomForResolution(this.maxResolution_)},a.prototype.setMinZoom=function(o){this.applyOptions_(this.getUpdatedOptions_({minZoom:o}))},a.prototype.setConstrainResolution=function(o){this.applyOptions_(this.getUpdatedOptions_({constrainResolution:o}))},a.prototype.getProjection=function(){return this.projection_},a.prototype.getResolution=function(){return this.get("resolution")},a.prototype.getResolutions=function(){return this.resolutions_},a.prototype.getResolutionForExtent=function(o,c){return this.getResolutionForExtentInternal(Vd(o,this.getProjection()),c)},a.prototype.getResolutionForExtentInternal=function(o,c){var u=c||this.getViewportSizeMinusPadding_(),h=Wr(o)/u[0],d=bs(o)/u[1];return Math.max(h,d)},a.prototype.getResolutionForValueFunction=function(o){var c=o||2,u=this.getConstrainedResolution(this.maxResolution_),d=Math.log(u/this.minResolution_)/Math.log(c);return function(f){return u/Math.pow(c,f*d)}},a.prototype.getRotation=function(){return this.get("rotation")},a.prototype.getValueForResolutionFunction=function(o){var c=Math.log(o||2),u=this.getConstrainedResolution(this.maxResolution_),d=Math.log(u/this.minResolution_)/c;return function(f){return Math.log(u/f)/c/d}},a.prototype.getViewportSizeMinusPadding_=function(o){var c=this.getViewportSize_(o),u=this.padding_;return u&&(c=[c[0]-u[1]-u[3],c[1]-u[0]-u[2]]),c},a.prototype.getState=function(){var o=this.getProjection(),c=this.getResolution(),u=this.getRotation(),h=this.getCenterInternal(),d=this.padding_;if(d){var f=this.getViewportSizeMinusPadding_();h=WN(h,this.getViewportSize_(),[f[0]/2+d[3],f[1]/2+d[0]],c,u)}return{center:h.slice(0),projection:void 0!==o?o:null,resolution:c,nextCenter:this.nextCenter_,nextResolution:this.nextResolution_,nextRotation:this.nextRotation_,rotation:u,zoom:this.getZoom()}},a.prototype.getZoom=function(){var o,c=this.getResolution();return void 0!==c&&(o=this.getZoomForResolution(c)),o},a.prototype.getZoomForResolution=function(o){var u,h,c=this.minZoom_||0;if(this.resolutions_){var d=AE(this.resolutions_,o,1);c=d,u=this.resolutions_[d],h=d==this.resolutions_.length-1?2:u/this.resolutions_[d+1]}else u=this.maxResolution_,h=this.zoomFactor_;return c+Math.log(u/o)/Math.log(h)},a.prototype.getResolutionForZoom=function(o){if(this.resolutions_){if(this.resolutions_.length<=1)return 0;var c=br(Math.floor(o),0,this.resolutions_.length-2);return this.resolutions_[c]/Math.pow(this.resolutions_[c]/this.resolutions_[c+1],br(o-c,0,1))}return this.maxResolution_/Math.pow(this.zoomFactor_,o-this.minZoom_)},a.prototype.fit=function(o,c){var u;if(Yn(Array.isArray(o)||"function"==typeof o.getSimplifiedGeometry,24),Array.isArray(o))Yn(!Xv(o),25),u=HN(h=Vd(o,this.getProjection()));else if("Circle"===o.getType()){var h;(u=HN(h=Vd(o.getExtent(),this.getProjection()))).rotate(this.getRotation(),ml(h))}else{var d=nM();u=d?o.clone().transform(d,this.getProjection()):o}this.fitInternal(u,c)},a.prototype.rotatedExtentForGeometry=function(o){for(var c=this.getRotation(),u=Math.cos(c),h=Math.sin(-c),d=o.getFlatCoordinates(),f=o.getStride(),m=1/0,g=1/0,y=-1/0,v=-1/0,_=0,b=d.length;_<b;_+=f){var w=d[_]*u-d[_+1]*h,C=d[_]*h+d[_+1]*u;m=Math.min(m,w),g=Math.min(g,C),y=Math.max(y,w),v=Math.max(v,C)}return[m,g,y,v]},a.prototype.fitInternal=function(o,c){var u=c||{},h=u.size;h||(h=this.getViewportSizeMinusPadding_());var m,d=void 0!==u.padding?u.padding:[0,0,0,0],f=void 0!==u.nearest&&u.nearest;m=void 0!==u.minResolution?u.minResolution:void 0!==u.maxZoom?this.getResolutionForZoom(u.maxZoom):0;var g=this.rotatedExtentForGeometry(o),y=this.getResolutionForExtentInternal(g,[h[0]-d[1]-d[3],h[1]-d[0]-d[2]]);y=isNaN(y)?m:Math.max(y,m),y=this.getConstrainedResolution(y,f?0:1);var v=this.getRotation(),_=Math.sin(v),b=Math.cos(v),w=ml(g);w[0]+=(d[1]-d[3])/2*y,w[1]+=(d[0]-d[2])/2*y;var M=this.getConstrainedCenter([w[0]*b-w[1]*_,w[1]*b+w[0]*_],y),x=u.callback?u.callback:qm;void 0!==u.duration?this.animateInternal({resolution:y,center:M,duration:u.duration,easing:u.easing},x):(this.targetResolution_=y,this.targetCenter_=M,this.applyTargetState_(!1,!0),lM(x,!0))},a.prototype.centerOn=function(o,c,u){this.centerOnInternal(kd(o,this.getProjection()),c,u)},a.prototype.centerOnInternal=function(o,c,u){this.setCenterInternal(WN(o,c,u,this.getResolution(),this.getRotation()))},a.prototype.calculateCenterShift=function(o,c,u,h){var d,f=this.padding_;if(f&&o){var m=this.getViewportSizeMinusPadding_(-u),g=WN(o,h,[m[0]/2+f[3],m[1]/2+f[0]],c,u);d=[o[0]-g[0],o[1]-g[1]]}return d},a.prototype.isDef=function(){return!!this.getCenterInternal()&&void 0!==this.getResolution()},a.prototype.adjustCenter=function(o){var c=DN(this.targetCenter_,this.getProjection());this.setCenter([c[0]+o[0],c[1]+o[1]])},a.prototype.adjustCenterInternal=function(o){var c=this.targetCenter_;this.setCenterInternal([c[0]+o[0],c[1]+o[1]])},a.prototype.adjustResolution=function(o,c){var u=c&&kd(c,this.getProjection());this.adjustResolutionInternal(o,u)},a.prototype.adjustResolutionInternal=function(o,c){var u=this.getAnimating()||this.getInteracting(),h=this.getViewportSize_(this.getRotation()),d=this.constraints_.resolution(this.targetResolution_*o,0,h,u);c&&(this.targetCenter_=this.calculateCenterZoom(d,c)),this.targetResolution_*=o,this.applyTargetState_()},a.prototype.adjustZoom=function(o,c){this.adjustResolution(Math.pow(this.zoomFactor_,-o),c)},a.prototype.adjustRotation=function(o,c){c&&(c=kd(c,this.getProjection())),this.adjustRotationInternal(o,c)},a.prototype.adjustRotationInternal=function(o,c){var u=this.getAnimating()||this.getInteracting(),h=this.constraints_.rotation(this.targetRotation_+o,u);c&&(this.targetCenter_=this.calculateCenterRotate(h,c)),this.targetRotation_+=o,this.applyTargetState_()},a.prototype.setCenter=function(o){this.setCenterInternal(kd(o,this.getProjection()))},a.prototype.setCenterInternal=function(o){this.targetCenter_=o,this.applyTargetState_()},a.prototype.setHint=function(o,c){return this.hints_[o]+=c,this.changed(),this.hints_[o]},a.prototype.setResolution=function(o){this.targetResolution_=o,this.applyTargetState_()},a.prototype.setRotation=function(o){this.targetRotation_=o,this.applyTargetState_()},a.prototype.setZoom=function(o){this.setResolution(this.getResolutionForZoom(o))},a.prototype.applyTargetState_=function(o,c){var u=this.getAnimating()||this.getInteracting()||c,h=this.constraints_.rotation(this.targetRotation_,u),d=this.getViewportSize_(h),f=this.constraints_.resolution(this.targetResolution_,0,d,u),m=this.constraints_.center(this.targetCenter_,f,d,u,this.calculateCenterShift(this.targetCenter_,f,h,d));this.get("rotation")!==h&&this.set("rotation",h),this.get("resolution")!==f&&this.set("resolution",f),(!this.get("center")||!dN(this.get("center"),m))&&this.set("center",m),this.getAnimating()&&!o&&this.cancelAnimations(),this.cancelAnchor_=void 0},a.prototype.resolveConstraints=function(o,c,u){var h=void 0!==o?o:200,d=c||0,f=this.constraints_.rotation(this.targetRotation_),m=this.getViewportSize_(f),g=this.constraints_.resolution(this.targetResolution_,d,m),y=this.constraints_.center(this.targetCenter_,g,m,!1,this.calculateCenterShift(this.targetCenter_,g,f,m));if(0===h&&!this.cancelAnchor_)return this.targetResolution_=g,this.targetRotation_=f,this.targetCenter_=y,void this.applyTargetState_();var v=u||(0===h?this.cancelAnchor_:void 0);this.cancelAnchor_=void 0,(this.getResolution()!==g||this.getRotation()!==f||!this.getCenterInternal()||!dN(this.getCenterInternal(),y))&&(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:f,center:y,resolution:g,duration:h,easing:ng,anchor:v}))},a.prototype.beginInteraction=function(){this.resolveConstraints(0),this.setHint(1,1)},a.prototype.endInteraction=function(o,c,u){var h=u&&kd(u,this.getProjection());this.endInteractionInternal(o,c,h)},a.prototype.endInteractionInternal=function(o,c,u){this.setHint(1,-1),this.resolveConstraints(o,c,u)},a.prototype.getConstrainedCenter=function(o,c){var u=this.getViewportSize_(this.getRotation());return this.constraints_.center(o,c||this.getResolution(),u)},a.prototype.getConstrainedZoom=function(o,c){var u=this.getResolutionForZoom(o);return this.getZoomForResolution(this.getConstrainedResolution(u,c))},a.prototype.getConstrainedResolution=function(o,c){var u=c||0,h=this.getViewportSize_(this.getRotation());return this.constraints_.resolution(o,u,h)},a}(yu);function MW(l,a,o){return void 0===o&&(o=[0,0]),o[0]=l[0]+2*a,o[1]=l[1]+2*a,o}function DW(l){return l[0]>0&&l[1]>0}function AW(l,a,o){return void 0===o&&(o=[0,0]),o[0]=l[0]*a+.5|0,o[1]=l[1]*a+.5|0,o}function ga(l,a){return Array.isArray(l)?l:(void 0===a?a=[l,l]:(a[0]=l,a[1]=l),a)}var FTe=function(){var l=function(a,o){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,u){c.__proto__=u}||function(c,u){for(var h in u)Object.prototype.hasOwnProperty.call(u,h)&&(c[h]=u[h])})(a,o)};return function(a,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function c(){this.constructor=a}l(a,o),a.prototype=null===o?Object.create(o):(c.prototype=o.prototype,new c)}}();const IW=function(l){function a(o){var c=l.call(this)||this,u=function(l){var a=null;void 0!==l.keyboardEventTarget&&(a="string"==typeof l.keyboardEventTarget?document.getElementById(l.keyboardEventTarget):l.keyboardEventTarget);var u,h,d,o={},c=l.layers&&"function"==typeof l.layers.getLayers?l.layers:new Js({layers:l.layers});return o.layergroup=c,o.target=l.target,o.view=l.view instanceof bu?l.view:new bu,void 0!==l.controls&&(Array.isArray(l.controls)?u=new Qo(l.controls.slice()):(Yn("function"==typeof l.controls.getArray,47),u=l.controls)),void 0!==l.interactions&&(Array.isArray(l.interactions)?h=new Qo(l.interactions.slice()):(Yn("function"==typeof l.interactions.getArray,48),h=l.interactions)),void 0!==l.overlays?Array.isArray(l.overlays)?d=new Qo(l.overlays.slice()):(Yn("function"==typeof l.overlays.getArray,49),d=l.overlays):d=new Qo,{controls:u,interactions:h,keyboardEventTarget:a,overlays:d,values:o}}(o);c.boundHandleBrowserEvent_=c.handleBrowserEvent.bind(c),c.maxTilesLoading_=void 0!==o.maxTilesLoading?o.maxTilesLoading:16,c.pixelRatio_=void 0!==o.pixelRatio?o.pixelRatio:m9,c.animationDelay_=function(){this.animationDelayKey_=void 0,this.renderFrame_(Date.now())}.bind(c),c.coordinateToPixelTransform_=[1,0,0,1,0,0],c.pixelToCoordinateTransform_=[1,0,0,1,0,0],c.frameIndex_=0,c.frameState_=null,c.previousExtent_=null,c.viewPropertyListenerKey_=null,c.viewChangeListenerKey_=null,c.layerGroupPropertyListenerKeys_=null,c.viewport_=document.createElement("div"),c.viewport_.className="ol-viewport"+("ontouchstart"in window?" ol-touch":""),c.viewport_.style.position="relative",c.viewport_.style.overflow="hidden",c.viewport_.style.width="100%",c.viewport_.style.height="100%",c.overlayContainer_=document.createElement("div"),c.overlayContainer_.style.position="absolute",c.overlayContainer_.style.zIndex="0",c.overlayContainer_.style.width="100%",c.overlayContainer_.style.height="100%",c.overlayContainer_.style.pointerEvents="none",c.overlayContainer_.className="ol-overlaycontainer",c.viewport_.appendChild(c.overlayContainer_),c.overlayContainerStopEvent_=document.createElement("div"),c.overlayContainerStopEvent_.style.position="absolute",c.overlayContainerStopEvent_.style.zIndex="0",c.overlayContainerStopEvent_.style.width="100%",c.overlayContainerStopEvent_.style.height="100%",c.overlayContainerStopEvent_.style.pointerEvents="none",c.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent",c.viewport_.appendChild(c.overlayContainerStopEvent_),c.mapBrowserEventHandler_=null,c.moveTolerance_=o.moveTolerance,c.keyboardEventTarget_=u.keyboardEventTarget,c.keyHandlerKeys_=null,c.controls=u.controls||new Qo,c.interactions=u.interactions||new Qo,c.overlays_=u.overlays,c.overlayIdIndex_={},c.renderer_=null,c.postRenderFunctions_=[],c.tileQueue_=new MSe(c.getTilePriority.bind(c),c.handleTileChange_.bind(c)),c.addChangeListener("layergroup",c.handleLayerGroupChanged_),c.addChangeListener("view",c.handleViewChanged_),c.addChangeListener("size",c.handleSizeChanged_),c.addChangeListener("target",c.handleTargetChanged_),c.setProperties(u.values);var h=c;return o.view&&!(o.view instanceof bu)&&o.view.then(function(d){h.setView(new bu(d))}),c.controls.addEventListener("add",function(d){d.element.setMap(this)}.bind(c)),c.controls.addEventListener("remove",function(d){d.element.setMap(null)}.bind(c)),c.interactions.addEventListener("add",function(d){d.element.setMap(this)}.bind(c)),c.interactions.addEventListener("remove",function(d){d.element.setMap(null)}.bind(c)),c.overlays_.addEventListener("add",function(d){this.addOverlayInternal_(d.element)}.bind(c)),c.overlays_.addEventListener("remove",function(d){var m=d.element.getId();void 0!==m&&delete this.overlayIdIndex_[m.toString()],d.element.setMap(null)}.bind(c)),c.controls.forEach(function(d){d.setMap(this)}.bind(c)),c.interactions.forEach(function(d){d.setMap(this)}.bind(c)),c.overlays_.forEach(c.addOverlayInternal_.bind(c)),c}return FTe(a,l),a.prototype.createRenderer=function(){throw new Error("Use a map type that has a createRenderer method")},a.prototype.addControl=function(o){this.getControls().push(o)},a.prototype.addInteraction=function(o){this.getInteractions().push(o)},a.prototype.addLayer=function(o){this.getLayerGroup().getLayers().push(o)},a.prototype.addOverlay=function(o){this.getOverlays().push(o)},a.prototype.addOverlayInternal_=function(o){var c=o.getId();void 0!==c&&(this.overlayIdIndex_[c.toString()]=o),o.setMap(this)},a.prototype.disposeInternal=function(){this.setTarget(null),l.prototype.disposeInternal.call(this)},a.prototype.forEachFeatureAtPixel=function(o,c,u){if(this.frameState_){var h=this.getCoordinateFromPixelInternal(o);return this.renderer_.forEachFeatureAtCoordinate(h,this.frameState_,void 0!==(u=void 0!==u?u:{}).hitTolerance?u.hitTolerance:0,!1!==u.checkWrapped,c,null,void 0!==u.layerFilter?u.layerFilter:Gv,null)}},a.prototype.getFeaturesAtPixel=function(o,c){var u=[];return this.forEachFeatureAtPixel(o,function(h){u.push(h)},c),u},a.prototype.forEachLayerAtPixel=function(o,c,u){if(this.frameState_){var h=u||{};return this.renderer_.forEachLayerAtPixel(o,this.frameState_,void 0!==h.hitTolerance?h.hitTolerance:0,c,h.layerFilter||Gv)}},a.prototype.hasFeatureAtPixel=function(o,c){if(!this.frameState_)return!1;var u=this.getCoordinateFromPixelInternal(o);return this.renderer_.hasFeatureAtCoordinate(u,this.frameState_,void 0!==(c=void 0!==c?c:{}).hitTolerance?c.hitTolerance:0,!1!==c.checkWrapped,void 0!==c.layerFilter?c.layerFilter:Gv,null)},a.prototype.getEventCoordinate=function(o){return this.getCoordinateFromPixel(this.getEventPixel(o))},a.prototype.getEventCoordinateInternal=function(o){return this.getCoordinateFromPixelInternal(this.getEventPixel(o))},a.prototype.getEventPixel=function(o){var c=this.viewport_.getBoundingClientRect(),u="changedTouches"in o?o.changedTouches[0]:o;return[u.clientX-c.left,u.clientY-c.top]},a.prototype.getTarget=function(){return this.get("target")},a.prototype.getTargetElement=function(){var o=this.getTarget();return void 0!==o?"string"==typeof o?document.getElementById(o):o:null},a.prototype.getCoordinateFromPixel=function(o){return DN(this.getCoordinateFromPixelInternal(o),this.getView().getProjection())},a.prototype.getCoordinateFromPixelInternal=function(o){var c=this.frameState_;return c?ts(c.pixelToCoordinateTransform,o.slice()):null},a.prototype.getControls=function(){return this.controls},a.prototype.getOverlays=function(){return this.overlays_},a.prototype.getOverlayById=function(o){var c=this.overlayIdIndex_[o.toString()];return void 0!==c?c:null},a.prototype.getInteractions=function(){return this.interactions},a.prototype.getLayerGroup=function(){return this.get("layergroup")},a.prototype.setLayers=function(o){var c=this.getLayerGroup();if(o instanceof Qo)c.setLayers(o);else{var u=c.getLayers();u.clear(),u.extend(o)}},a.prototype.getLayers=function(){return this.getLayerGroup().getLayers()},a.prototype.getLoading=function(){for(var o=this.getLayerGroup().getLayerStatesArray(),c=0,u=o.length;c<u;++c){var d=o[c].layer.getSource();if(d&&d.loading)return!0}return!1},a.prototype.getPixelFromCoordinate=function(o){var c=kd(o,this.getView().getProjection());return this.getPixelFromCoordinateInternal(c)},a.prototype.getPixelFromCoordinateInternal=function(o){var c=this.frameState_;return c?ts(c.coordinateToPixelTransform,o.slice(0,2)):null},a.prototype.getRenderer=function(){return this.renderer_},a.prototype.getSize=function(){return this.get("size")},a.prototype.getView=function(){return this.get("view")},a.prototype.getViewport=function(){return this.viewport_},a.prototype.getOverlayContainer=function(){return this.overlayContainer_},a.prototype.getOverlayContainerStopEvent=function(){return this.overlayContainerStopEvent_},a.prototype.getOwnerDocument=function(){var o=this.getTargetElement();return o?o.ownerDocument:document},a.prototype.getTilePriority=function(o,c,u,h){return function(l,a,o,c,u){if(!l||!(o in l.wantedTiles)||!l.wantedTiles[o][a.getKey()])return YE;var h=l.viewState.center,d=c[0]-h[0],f=c[1]-h[1];return 65536*Math.log(u)+Math.sqrt(d*d+f*f)/u}(this.frameState_,o,c,u,h)},a.prototype.handleBrowserEvent=function(o,c){var h=new Zf(c||o.type,this,o);this.handleMapBrowserEvent(h)},a.prototype.handleMapBrowserEvent=function(o){if(this.frameState_){var c=o.originalEvent,u=c.type;if("pointerdown"===u||"wheel"===u||"keydown"===u){var h=this.getOwnerDocument(),d=this.viewport_.getRootNode?this.viewport_.getRootNode():h,f=c.target;if(this.overlayContainerStopEvent_.contains(f)||!(d===h?h.documentElement:d).contains(f))return}if(o.frameState=this.frameState_,!1!==this.dispatchEvent(o))for(var m=this.getInteractions().getArray().slice(),g=m.length-1;g>=0;g--){var y=m[g];if(y.getMap()===this&&y.getActive()&&this.getTargetElement()&&(!y.handleEvent(o)||o.propagationStopped))break}}},a.prototype.handlePostRender=function(){var o=this.frameState_,c=this.tileQueue_;if(!c.isEmpty()){var u=this.maxTilesLoading_,h=u;if(o){var d=o.viewHints;if(d[0]||d[1]){var f=Date.now()-o.time>8;u=f?0:8,h=f?0:2}}c.getTilesLoading()<u&&(c.reprioritize(),c.loadMoreTiles(u,h))}o&&this.hasListener("rendercomplete")&&!o.animate&&!this.tileQueue_.getTilesLoading()&&!this.getLoading()&&this.renderer_.dispatchRenderEvent("rendercomplete",o);for(var m=this.postRenderFunctions_,g=0,y=m.length;g<y;++g)m[g](this,o);m.length=0},a.prototype.handleSizeChanged_=function(){this.getView()&&!this.getView().getAnimating()&&this.getView().resolveConstraints(0),this.render()},a.prototype.handleTargetChanged_=function(){var o;if(this.getTarget()&&(o=this.getTargetElement()),this.mapBrowserEventHandler_){for(var c=0,u=this.keyHandlerKeys_.length;c<u;++c)Ii(this.keyHandlerKeys_[c]);this.keyHandlerKeys_=null,this.viewport_.removeEventListener("contextmenu",this.boundHandleBrowserEvent_),this.viewport_.removeEventListener("wheel",this.boundHandleBrowserEvent_),void 0!==this.handleResize_&&(removeEventListener("resize",this.handleResize_,!1),this.handleResize_=void 0),this.mapBrowserEventHandler_.dispose(),this.mapBrowserEventHandler_=null,HE(this.viewport_)}if(o){for(var h in o.appendChild(this.viewport_),this.renderer_||(this.renderer_=this.createRenderer()),this.mapBrowserEventHandler_=new TSe(this,this.moveTolerance_),ns)this.mapBrowserEventHandler_.addEventListener(ns[h],this.handleMapBrowserEvent.bind(this));this.viewport_.addEventListener("contextmenu",this.boundHandleBrowserEvent_,!1),this.viewport_.addEventListener("wheel",this.boundHandleBrowserEvent_,!!g9&&{passive:!1});var d=this.keyboardEventTarget_?this.keyboardEventTarget_:o;this.keyHandlerKeys_=[Sr(d,"keydown",this.handleBrowserEvent,this),Sr(d,"keypress",this.handleBrowserEvent,this)],this.handleResize_||(this.handleResize_=this.updateSize.bind(this),window.addEventListener("resize",this.handleResize_,!1))}else this.renderer_&&(clearTimeout(this.postRenderTimeoutHandle_),this.postRenderTimeoutHandle_=void 0,this.postRenderFunctions_.length=0,this.renderer_.dispose(),this.renderer_=null),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0);this.updateSize()},a.prototype.handleTileChange_=function(){this.render()},a.prototype.handleViewPropertyChanged_=function(){this.render()},a.prototype.handleViewChanged_=function(){this.viewPropertyListenerKey_&&(Ii(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&(Ii(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);var o=this.getView();o&&(this.updateViewportSize_(),this.viewPropertyListenerKey_=Sr(o,"propertychange",this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=Sr(o,"change",this.handleViewPropertyChanged_,this),o.resolveConstraints(0)),this.render()},a.prototype.handleLayerGroupChanged_=function(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(Ii),this.layerGroupPropertyListenerKeys_=null);var o=this.getLayerGroup();o&&(this.layerGroupPropertyListenerKeys_=[Sr(o,"propertychange",this.render,this),Sr(o,"change",this.render,this)]),this.render()},a.prototype.isRendered=function(){return!!this.frameState_},a.prototype.renderSync=function(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()},a.prototype.redrawText=function(){for(var o=this.getLayerGroup().getLayerStatesArray(),c=0,u=o.length;c<u;++c){var h=o[c].layer;h.hasRenderer()&&h.getRenderer().handleFontsChanged()}},a.prototype.render=function(){this.renderer_&&void 0===this.animationDelayKey_&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))},a.prototype.removeControl=function(o){return this.getControls().remove(o)},a.prototype.removeInteraction=function(o){return this.getInteractions().remove(o)},a.prototype.removeLayer=function(o){return this.getLayerGroup().getLayers().remove(o)},a.prototype.removeOverlay=function(o){return this.getOverlays().remove(o)},a.prototype.renderFrame_=function(o){var c=this,u=this.getSize(),h=this.getView(),d=this.frameState_,f=null;if(void 0!==u&&DW(u)&&h&&h.isDef()){var m=h.getHints(this.frameState_?this.frameState_.viewHints:void 0),g=h.getState();if(f={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,declutterTree:null,extent:qv(g.center,g.resolution,g.rotation,u),index:this.frameIndex_++,layerIndex:0,layerStatesArray:this.getLayerGroup().getLayerStatesArray(),pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:u,tileQueue:this.tileQueue_,time:o,usedTiles:{},viewState:g,viewHints:m,wantedTiles:{}},g.nextCenter&&g.nextResolution){var y=isNaN(g.nextRotation)?g.rotation:g.nextRotation;f.nextExtent=qv(g.nextCenter,g.nextResolution,y,u)}}this.frameState_=f,this.renderer_.renderFrame(f),f&&(f.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,f.postRenderFunctions),d&&(!this.previousExtent_||!Xv(this.previousExtent_)&&!vh(f.extent,this.previousExtent_))&&(this.dispatchEvent(new $E("movestart",this,d)),this.previousExtent_=$m(this.previousExtent_)),this.previousExtent_&&!f.viewHints[0]&&!f.viewHints[1]&&!vh(f.extent,this.previousExtent_)&&(this.dispatchEvent(new $E("moveend",this,f)),_9(f.extent,this.previousExtent_))),this.dispatchEvent(new $E("postrender",this,f)),this.postRenderTimeoutHandle_||(this.postRenderTimeoutHandle_=setTimeout(function(){c.postRenderTimeoutHandle_=void 0,c.handlePostRender()},0))},a.prototype.setLayerGroup=function(o){this.set("layergroup",o)},a.prototype.setSize=function(o){this.set("size",o)},a.prototype.setTarget=function(o){this.set("target",o)},a.prototype.setView=function(o){if(!o||o instanceof bu)this.set("view",o);else{this.set("view",new bu);var c=this;o.then(function(u){c.setView(new bu(u))})}},a.prototype.updateSize=function(){var o=this.getTargetElement(),c=void 0;if(o){var u=getComputedStyle(o),h=o.offsetWidth-parseFloat(u.borderLeftWidth)-parseFloat(u.paddingLeft)-parseFloat(u.paddingRight)-parseFloat(u.borderRightWidth),d=o.offsetHeight-parseFloat(u.borderTopWidth)-parseFloat(u.paddingTop)-parseFloat(u.paddingBottom)-parseFloat(u.borderBottomWidth);!isNaN(h)&&!isNaN(d)&&!DW(c=[h,d])&&(o.offsetWidth||o.offsetHeight||o.getClientRects().length)&&console.warn("No map visible because the map container's width or height are 0.")}this.setSize(c),this.updateViewportSize_()},a.prototype.updateViewportSize_=function(){var o=this.getView();if(o){var c=void 0,u=getComputedStyle(this.viewport_);u.width&&u.height&&(c=[parseInt(u.width,10),parseInt(u.height,10)]),o.setViewportSize(c)}},a}(yu);var BTe=function(){var l=function(a,o){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,u){c.__proto__=u}||function(c,u){for(var h in u)Object.prototype.hasOwnProperty.call(u,h)&&(c[h]=u[h])})(a,o)};return function(a,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function c(){this.constructor=a}l(a,o),a.prototype=null===o?Object.create(o):(c.prototype=o.prototype,new c)}}();const Qf=function(l){function a(o){var c=l.call(this)||this,u=o.element;return u&&!o.target&&!u.style.pointerEvents&&(u.style.pointerEvents="auto"),c.element=u||null,c.target_=null,c.map_=null,c.listenerKeys=[],o.render&&(c.render=o.render),o.target&&c.setTarget(o.target),c}return BTe(a,l),a.prototype.disposeInternal=function(){HE(this.element),l.prototype.disposeInternal.call(this)},a.prototype.getMap=function(){return this.map_},a.prototype.setMap=function(o){this.map_&&HE(this.element);for(var c=0,u=this.listenerKeys.length;c<u;++c)Ii(this.listenerKeys[c]);this.listenerKeys.length=0,this.map_=o,this.map_&&((this.target_?this.target_:o.getOverlayContainerStopEvent()).appendChild(this.element),this.render!==qm&&this.listenerKeys.push(Sr(o,"postrender",this.render,this)),o.render())},a.prototype.render=function(o){},a.prototype.setTarget=function(o){this.target_="string"==typeof o?document.getElementById(o):o},a}(yu);var GTe=function(){var l=function(a,o){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,u){c.__proto__=u}||function(c,u){for(var h in u)Object.prototype.hasOwnProperty.call(u,h)&&(c[h]=u[h])})(a,o)};return function(a,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function c(){this.constructor=a}l(a,o),a.prototype=null===o?Object.create(o):(c.prototype=o.prototype,new c)}}();const RW=function(l){function a(o){var c=this,u=o||{};(c=l.call(this,{element:document.createElement("div"),render:u.render,target:u.target})||this).ulElement_=document.createElement("ul"),c.collapsed_=void 0===u.collapsed||u.collapsed,c.userCollapsed_=c.collapsed_,c.overrideCollapsible_=void 0!==u.collapsible,c.collapsible_=void 0===u.collapsible||u.collapsible,c.collapsible_||(c.collapsed_=!1);var h=void 0!==u.className?u.className:"ol-attribution",d=void 0!==u.tipLabel?u.tipLabel:"Attributions",f=void 0!==u.expandClassName?u.expandClassName:h+"-expand",m=void 0!==u.collapseLabel?u.collapseLabel:"\u203a",g=void 0!==u.collapseClassName?u.collapseClassName:h+"-collpase";"string"==typeof m?(c.collapseLabel_=document.createElement("span"),c.collapseLabel_.textContent=m,c.collapseLabel_.className=g):c.collapseLabel_=m;var y=void 0!==u.label?u.label:"i";"string"==typeof y?(c.label_=document.createElement("span"),c.label_.textContent=y,c.label_.className=f):c.label_=y;var v=c.collapsible_&&!c.collapsed_?c.collapseLabel_:c.label_;c.toggleButton_=document.createElement("button"),c.toggleButton_.setAttribute("type","button"),c.toggleButton_.setAttribute("aria-expanded",String(!c.collapsed_)),c.toggleButton_.title=d,c.toggleButton_.appendChild(v),c.toggleButton_.addEventListener("click",c.handleClick_.bind(c),!1);var b=c.element;return b.className=h+" "+Jm+" "+dT+(c.collapsed_&&c.collapsible_?" "+zE:"")+(c.collapsible_?"":" ol-uncollapsible"),b.appendChild(c.toggleButton_),b.appendChild(c.ulElement_),c.renderedAttributions_=[],c.renderedVisible_=!0,c}return GTe(a,l),a.prototype.collectSourceAttributions_=function(o){for(var c={},u=[],h=!0,d=o.layerStatesArray,f=0,m=d.length;f<m;++f){var g=d[f];if(BE(g,o.viewState)){var y=g.layer.getSource();if(y){var v=y.getAttributions();if(v){var _=v(o);if(_)if(h=h&&!1!==y.getAttributionsCollapsible(),Array.isArray(_))for(var b=0,w=_.length;b<w;++b)_[b]in c||(u.push(_[b]),c[_[b]]=!0);else _ in c||(u.push(_),c[_]=!0)}}}}return this.overrideCollapsible_||this.setCollapsible(h),u},a.prototype.updateElement_=function(o){if(o){var c=this.collectSourceAttributions_(o),u=c.length>0;if(this.renderedVisible_!=u&&(this.element.style.display=u?"":"none",this.renderedVisible_=u),!Wm(c,this.renderedAttributions_)){q9(this.ulElement_);for(var h=0,d=c.length;h<d;++h){var f=document.createElement("li");f.innerHTML=c[h],this.ulElement_.appendChild(f)}this.renderedAttributions_=c}}else this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1)},a.prototype.handleClick_=function(o){o.preventDefault(),this.handleToggle_(),this.userCollapsed_=this.collapsed_},a.prototype.handleToggle_=function(){this.element.classList.toggle(zE),this.collapsed_?Zv(this.collapseLabel_,this.label_):Zv(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_,this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_))},a.prototype.getCollapsible=function(){return this.collapsible_},a.prototype.setCollapsible=function(o){this.collapsible_!==o&&(this.collapsible_=o,this.element.classList.toggle("ol-uncollapsible"),this.userCollapsed_&&this.handleToggle_())},a.prototype.setCollapsed=function(o){this.userCollapsed_=o,this.collapsible_&&this.collapsed_!==o&&this.handleToggle_()},a.prototype.getCollapsed=function(){return this.collapsed_},a.prototype.render=function(o){this.updateElement_(o.frameState)},a}(Qf);var HTe=function(){var l=function(a,o){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,u){c.__proto__=u}||function(c,u){for(var h in u)Object.prototype.hasOwnProperty.call(u,h)&&(c[h]=u[h])})(a,o)};return function(a,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function c(){this.constructor=a}l(a,o),a.prototype=null===o?Object.create(o):(c.prototype=o.prototype,new c)}}();const PW=function(l){function a(o){var c=this,u=o||{};c=l.call(this,{element:document.createElement("div"),render:u.render,target:u.target})||this;var h=void 0!==u.className?u.className:"ol-rotate",d=void 0!==u.label?u.label:"\u21e7",f=void 0!==u.compassClassName?u.compassClassName:"ol-compass";c.label_=null,"string"==typeof d?(c.label_=document.createElement("span"),c.label_.className=f,c.label_.textContent=d):(c.label_=d,c.label_.classList.add(f));var m=u.tipLabel?u.tipLabel:"Reset rotation",g=document.createElement("button");g.className=h+"-reset",g.setAttribute("type","button"),g.title=m,g.appendChild(c.label_),g.addEventListener("click",c.handleClick_.bind(c),!1);var v=c.element;return v.className=h+" "+Jm+" "+dT,v.appendChild(g),c.callResetNorth_=u.resetNorth?u.resetNorth:void 0,c.duration_=void 0!==u.duration?u.duration:250,c.autoHide_=void 0===u.autoHide||u.autoHide,c.rotation_=void 0,c.autoHide_&&c.element.classList.add(GE),c}return HTe(a,l),a.prototype.handleClick_=function(o){o.preventDefault(),void 0!==this.callResetNorth_?this.callResetNorth_():this.resetNorth_()},a.prototype.resetNorth_=function(){var c=this.getMap().getView();if(c){var u=c.getRotation();void 0!==u&&(this.duration_>0&&u%(2*Math.PI)!=0?c.animate({rotation:0,duration:this.duration_,easing:ng}):c.setRotation(0))}},a.prototype.render=function(o){var c=o.frameState;if(c){var u=c.viewState.rotation;if(u!=this.rotation_){var h="rotate("+u+"rad)";if(this.autoHide_){var d=this.element.classList.contains(GE);d||0!==u?d&&0!==u&&this.element.classList.remove(GE):this.element.classList.add(GE)}this.label_.style.transform=h}this.rotation_=u}},a}(Qf);var WTe=function(){var l=function(a,o){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,u){c.__proto__=u}||function(c,u){for(var h in u)Object.prototype.hasOwnProperty.call(u,h)&&(c[h]=u[h])})(a,o)};return function(a,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function c(){this.constructor=a}l(a,o),a.prototype=null===o?Object.create(o):(c.prototype=o.prototype,new c)}}();const LW=function(l){function a(o){var c=this,u=o||{};c=l.call(this,{element:document.createElement("div"),target:u.target})||this;var h=void 0!==u.className?u.className:"ol-zoom",d=void 0!==u.delta?u.delta:1,f=void 0!==u.zoomInClassName?u.zoomInClassName:h+"-in",m=void 0!==u.zoomOutClassName?u.zoomOutClassName:h+"-out",g=void 0!==u.zoomInLabel?u.zoomInLabel:"+",y=void 0!==u.zoomOutLabel?u.zoomOutLabel:"\u2013",v=void 0!==u.zoomInTipLabel?u.zoomInTipLabel:"Zoom in",_=void 0!==u.zoomOutTipLabel?u.zoomOutTipLabel:"Zoom out",b=document.createElement("button");b.className=f,b.setAttribute("type","button"),b.title=v,b.appendChild("string"==typeof g?document.createTextNode(g):g),b.addEventListener("click",c.handleClick_.bind(c,d),!1);var w=document.createElement("button");w.className=m,w.setAttribute("type","button"),w.title=_,w.appendChild("string"==typeof y?document.createTextNode(y):y),w.addEventListener("click",c.handleClick_.bind(c,-d),!1);var E=c.element;return E.className=h+" "+Jm+" "+dT,E.appendChild(b),E.appendChild(w),c.duration_=void 0!==u.duration?u.duration:250,c}return WTe(a,l),a.prototype.handleClick_=function(o,c){c.preventDefault(),this.zoomByDelta_(o)},a.prototype.zoomByDelta_=function(o){var u=this.getMap().getView();if(u){var h=u.getZoom();if(void 0!==h){var d=u.getConstrainedZoom(h+o);this.duration_>0?(u.getAnimating()&&u.cancelAnimations(),u.animate({zoom:d,duration:this.duration_,easing:ng})):u.setZoom(d)}}},a}(Qf);var $Te=function(){var l=function(a,o){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,u){c.__proto__=u}||function(c,u){for(var h in u)Object.prototype.hasOwnProperty.call(u,h)&&(c[h]=u[h])})(a,o)};return function(a,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function c(){this.constructor=a}l(a,o),a.prototype=null===o?Object.create(o):(c.prototype=o.prototype,new c)}}();function qN(l,a,o,c){var u=l.getZoom();if(void 0!==u){var h=l.getConstrainedZoom(u+a),d=l.getResolutionForZoom(h);l.getAnimating()&&l.cancelAnimations(),l.animate({resolution:d,anchor:o,duration:void 0!==c?c:250,easing:ng})}}const ST=function(l){function a(o){var c=l.call(this)||this;return o&&o.handleEvent&&(c.handleEvent=o.handleEvent),c.map_=null,c.setActive(!0),c}return $Te(a,l),a.prototype.getActive=function(){return this.get("active")},a.prototype.getMap=function(){return this.map_},a.prototype.handleEvent=function(o){return!0},a.prototype.setActive=function(o){this.set("active",o)},a.prototype.setMap=function(o){this.map_=o},a}(yu);var KTe=function(){var l=function(a,o){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,u){c.__proto__=u}||function(c,u){for(var h in u)Object.prototype.hasOwnProperty.call(u,h)&&(c[h]=u[h])})(a,o)};return function(a,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function c(){this.constructor=a}l(a,o),a.prototype=null===o?Object.create(o):(c.prototype=o.prototype,new c)}}();const QTe=function(l){function a(o){var c=l.call(this)||this,u=o||{};return c.delta_=u.delta?u.delta:1,c.duration_=void 0!==u.duration?u.duration:250,c}return KTe(a,l),a.prototype.handleEvent=function(o){var c=!1;if(o.type==ns.DBLCLICK){var u=o.originalEvent,d=o.coordinate,f=u.shiftKey?-this.delta_:this.delta_;qN(o.map.getView(),f,d,this.duration_),u.preventDefault(),c=!0}return!c},a}(ST);var e1e=function(){var l=function(a,o){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,u){c.__proto__=u}||function(c,u){for(var h in u)Object.prototype.hasOwnProperty.call(u,h)&&(c[h]=u[h])})(a,o)};return function(a,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function c(){this.constructor=a}l(a,o),a.prototype=null===o?Object.create(o):(c.prototype=o.prototype,new c)}}();function XN(l){for(var a=l.length,o=0,c=0,u=0;u<a;u++)o+=l[u].clientX,c+=l[u].clientY;return[o/a,c/a]}const TT=function(l){function a(o){var c=this,u=o||{};return c=l.call(this,u)||this,u.handleDownEvent&&(c.handleDownEvent=u.handleDownEvent),u.handleDragEvent&&(c.handleDragEvent=u.handleDragEvent),u.handleMoveEvent&&(c.handleMoveEvent=u.handleMoveEvent),u.handleUpEvent&&(c.handleUpEvent=u.handleUpEvent),u.stopDown&&(c.stopDown=u.stopDown),c.handlingDownUpSequence=!1,c.trackedPointers_={},c.targetPointers=[],c}return e1e(a,l),a.prototype.getPointerCount=function(){return this.targetPointers.length},a.prototype.handleDownEvent=function(o){return!1},a.prototype.handleDragEvent=function(o){},a.prototype.handleEvent=function(o){if(!o.originalEvent)return!0;var c=!1;if(this.updateTrackedPointers_(o),this.handlingDownUpSequence){if(o.type==ns.POINTERDRAG)this.handleDragEvent(o),o.originalEvent.preventDefault();else if(o.type==ns.POINTERUP){var u=this.handleUpEvent(o);this.handlingDownUpSequence=u&&this.targetPointers.length>0}}else if(o.type==ns.POINTERDOWN){var h=this.handleDownEvent(o);this.handlingDownUpSequence=h,c=this.stopDown(h)}else o.type==ns.POINTERMOVE&&this.handleMoveEvent(o);return!c},a.prototype.handleMoveEvent=function(o){},a.prototype.handleUpEvent=function(o){return!1},a.prototype.stopDown=function(o){return o},a.prototype.updateTrackedPointers_=function(o){if(function(l){var a=l.type;return a===ns.POINTERDOWN||a===ns.POINTERDRAG||a===ns.POINTERUP}(o)){var c=o.originalEvent,u=c.pointerId.toString();o.type==ns.POINTERUP?delete this.trackedPointers_[u]:(o.type==ns.POINTERDOWN||u in this.trackedPointers_)&&(this.trackedPointers_[u]=c),this.targetPointers=P9(this.trackedPointers_)}},a}(ST);function $N(l){var a=arguments;return function(o){for(var c=!0,u=0,h=a.length;u<h&&(c=c&&a[u](o));++u);return c}}var r1e=function(l){var a=l.originalEvent;return a.altKey&&!(a.metaKey||a.ctrlKey)&&a.shiftKey},NW=function(l){return!l.map.getTargetElement().hasAttribute("tabindex")||function(l){return l.target.getTargetElement().contains(document.activeElement)}(l)},s1e=Gv,FW=function(l){var a=l.originalEvent;return 0==a.button&&!(mbe&&gbe&&a.ctrlKey)},kW=function(l){var a=l.originalEvent;return!a.altKey&&!(a.metaKey||a.ctrlKey)&&!a.shiftKey},o1e=function(l){var a=l.originalEvent;return!a.altKey&&!(a.metaKey||a.ctrlKey)&&a.shiftKey},VW=function(l){var o=l.originalEvent.target.tagName;return"INPUT"!==o&&"SELECT"!==o&&"TEXTAREA"!==o},YN=function(l){var a=l.originalEvent;return Yn(void 0!==a,56),"mouse"==a.pointerType},a1e=function(l){var a=l.originalEvent;return Yn(void 0!==a,56),a.isPrimary&&0===a.button},l1e=function(){var l=function(a,o){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,u){c.__proto__=u}||function(c,u){for(var h in u)Object.prototype.hasOwnProperty.call(u,h)&&(c[h]=u[h])})(a,o)};return function(a,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function c(){this.constructor=a}l(a,o),a.prototype=null===o?Object.create(o):(c.prototype=o.prototype,new c)}}();const u1e=function(l){function a(o){var c=l.call(this,{stopDown:IE})||this,u=o||{};c.kinetic_=u.kinetic,c.lastCentroid=null,c.panning_=!1;var h=u.condition?u.condition:$N(kW,a1e);return c.condition_=u.onFocusOnly?$N(NW,h):h,c.noKinetic_=!1,c}return l1e(a,l),a.prototype.handleDragEvent=function(o){this.panning_||(this.panning_=!0,this.getMap().getView().beginInteraction());var c=this.targetPointers,u=XN(c);if(c.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(u[0],u[1]),this.lastCentroid){var h=[this.lastCentroid[0]-u[0],u[1]-this.lastCentroid[1]],f=o.map.getView();U9(h,f.getResolution()),fN(h,f.getRotation()),f.adjustCenterInternal(h)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=u,this.lastPointersCount_=c.length,o.originalEvent.preventDefault()},a.prototype.handleUpEvent=function(o){var c=o.map,u=c.getView();if(0===this.targetPointers.length){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){var h=this.kinetic_.getDistance(),d=this.kinetic_.getAngle(),f=u.getCenterInternal(),m=c.getPixelFromCoordinateInternal(f),g=c.getCoordinateFromPixelInternal([m[0]-h*Math.cos(d),m[1]-h*Math.sin(d)]);u.animateInternal({center:u.getConstrainedCenter(g),duration:500,easing:ng})}return this.panning_&&(this.panning_=!1,u.endInteraction()),!1}return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0},a.prototype.handleDownEvent=function(o){if(this.targetPointers.length>0&&this.condition_(o)){var u=o.map.getView();return this.lastCentroid=null,u.getAnimating()&&u.cancelAnimations(),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}return!1},a}(TT);var h1e=function(){var l=function(a,o){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,u){c.__proto__=u}||function(c,u){for(var h in u)Object.prototype.hasOwnProperty.call(u,h)&&(c[h]=u[h])})(a,o)};return function(a,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function c(){this.constructor=a}l(a,o),a.prototype=null===o?Object.create(o):(c.prototype=o.prototype,new c)}}();const f1e=function(l){function a(o){var c=this,u=o||{};return(c=l.call(this,{stopDown:IE})||this).condition_=u.condition?u.condition:r1e,c.lastAngle_=void 0,c.duration_=void 0!==u.duration?u.duration:250,c}return h1e(a,l),a.prototype.handleDragEvent=function(o){if(YN(o)){var c=o.map,u=c.getView();if(u.getConstraints().rotation!==PN){var h=c.getSize(),d=o.pixel,f=Math.atan2(h[1]/2-d[1],d[0]-h[0]/2);void 0!==this.lastAngle_&&u.adjustRotationInternal(-(f-this.lastAngle_)),this.lastAngle_=f}}},a.prototype.handleUpEvent=function(o){return!YN(o)||(o.map.getView().endInteraction(this.duration_),!1)},a.prototype.handleDownEvent=function(o){return!(!YN(o)||!FW(o)||!this.condition_(o)||(o.map.getView().beginInteraction(),this.lastAngle_=void 0,0))},a}(TT);var p1e=function(){var l=function(a,o){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,u){c.__proto__=u}||function(c,u){for(var h in u)Object.prototype.hasOwnProperty.call(u,h)&&(c[h]=u[h])})(a,o)};return function(a,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function c(){this.constructor=a}l(a,o),a.prototype=null===o?Object.create(o):(c.prototype=o.prototype,new c)}}();const g1e=function(l){function a(o){var c=l.call(this)||this;return c.geometry_=null,c.element_=document.createElement("div"),c.element_.style.position="absolute",c.element_.style.pointerEvents="auto",c.element_.className="ol-box "+o,c.map_=null,c.startPixel_=null,c.endPixel_=null,c}return p1e(a,l),a.prototype.disposeInternal=function(){this.setMap(null)},a.prototype.render_=function(){var o=this.startPixel_,c=this.endPixel_,u="px",h=this.element_.style;h.left=Math.min(o[0],c[0])+u,h.top=Math.min(o[1],c[1])+u,h.width=Math.abs(c[0]-o[0])+u,h.height=Math.abs(c[1]-o[1])+u},a.prototype.setMap=function(o){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);var c=this.element_.style;c.left="inherit",c.top="inherit",c.width="inherit",c.height="inherit"}this.map_=o,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)},a.prototype.setPixels=function(o,c){this.startPixel_=o,this.endPixel_=c,this.createOrUpdateGeometry(),this.render_()},a.prototype.createOrUpdateGeometry=function(){var o=this.startPixel_,c=this.endPixel_,h=[o,[o[0],c[1]],c,[c[0],o[1]]].map(this.map_.getCoordinateFromPixelInternal,this.map_);h[4]=h[0].slice(),this.geometry_?this.geometry_.setCoordinates([h]):this.geometry_=new Ch([h])},a.prototype.getGeometry=function(){return this.geometry_},a}(DE);var BW=function(){var l=function(a,o){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,u){c.__proto__=u}||function(c,u){for(var h in u)Object.prototype.hasOwnProperty.call(u,h)&&(c[h]=u[h])})(a,o)};return function(a,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function c(){this.constructor=a}l(a,o),a.prototype=null===o?Object.create(o):(c.prototype=o.prototype,new c)}}(),ZN=function(l){function a(o,c,u){var h=l.call(this,o)||this;return h.coordinate=c,h.mapBrowserEvent=u,h}return BW(a,l),a}(Od);const UW=function(l){function a(o){var c=l.call(this)||this,u=o||{};return c.box_=new g1e(u.className||"ol-dragbox"),c.minArea_=void 0!==u.minArea?u.minArea:64,u.onBoxEnd&&(c.onBoxEnd=u.onBoxEnd),c.startPixel_=null,c.condition_=u.condition?u.condition:FW,c.boxEndCondition_=u.boxEndCondition?u.boxEndCondition:c.defaultBoxEndCondition,c}return BW(a,l),a.prototype.defaultBoxEndCondition=function(o,c,u){var h=u[0]-c[0],d=u[1]-c[1];return h*h+d*d>=this.minArea_},a.prototype.getGeometry=function(){return this.box_.getGeometry()},a.prototype.handleDragEvent=function(o){this.box_.setPixels(this.startPixel_,o.pixel),this.dispatchEvent(new ZN("boxdrag",o.coordinate,o))},a.prototype.handleUpEvent=function(o){this.box_.setMap(null);var c=this.boxEndCondition_(o,this.startPixel_,o.pixel);return c&&this.onBoxEnd(o),this.dispatchEvent(new ZN(c?"boxend":"boxcancel",o.coordinate,o)),!1},a.prototype.handleDownEvent=function(o){return!!this.condition_(o)&&(this.startPixel_=o.pixel,this.box_.setMap(o.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new ZN("boxstart",o.coordinate,o)),!0)},a.prototype.onBoxEnd=function(o){},a}(TT);var v1e=function(){var l=function(a,o){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,u){c.__proto__=u}||function(c,u){for(var h in u)Object.prototype.hasOwnProperty.call(u,h)&&(c[h]=u[h])})(a,o)};return function(a,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function c(){this.constructor=a}l(a,o),a.prototype=null===o?Object.create(o):(c.prototype=o.prototype,new c)}}();const b1e=function(l){function a(o){var c=this,u=o||{};return(c=l.call(this,{condition:u.condition?u.condition:o1e,className:u.className||"ol-dragzoom",minArea:u.minArea})||this).duration_=void 0!==u.duration?u.duration:200,c.out_=void 0!==u.out&&u.out,c}return v1e(a,l),a.prototype.onBoxEnd=function(o){var u=this.getMap().getView(),h=this.getGeometry();if(this.out_){var d=u.rotatedExtentForGeometry(h),f=u.getResolutionForExtentInternal(d),m=u.getResolution()/f;(h=h.clone()).scale(m*m)}u.fitInternal(h,{duration:this.duration_,easing:ng})},a}(UW);var S1e=function(){var l=function(a,o){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,u){c.__proto__=u}||function(c,u){for(var h in u)Object.prototype.hasOwnProperty.call(u,h)&&(c[h]=u[h])})(a,o)};return function(a,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function c(){this.constructor=a}l(a,o),a.prototype=null===o?Object.create(o):(c.prototype=o.prototype,new c)}}();const w1e=function(l){function a(o){var c=l.call(this)||this,u=o||{};return c.defaultCondition_=function(h){return kW(h)&&VW(h)},c.condition_=void 0!==u.condition?u.condition:c.defaultCondition_,c.duration_=void 0!==u.duration?u.duration:100,c.pixelDelta_=void 0!==u.pixelDelta?u.pixelDelta:128,c}return S1e(a,l),a.prototype.handleEvent=function(o){var c=!1;if("keydown"==o.type){var u=o.originalEvent,h=u.keyCode;if(this.condition_(o)&&(40==h||37==h||39==h||38==h)){var f=o.map.getView(),m=f.getResolution()*this.pixelDelta_,g=0,y=0;40==h?y=-m:37==h?g=-m:39==h?g=m:y=m;var v=[g,y];fN(v,f.getRotation()),function(l,a,o){var c=l.getCenterInternal();c&&l.animateInternal({duration:void 0!==o?o:250,easing:eTe,center:l.getConstrainedCenter([c[0]+a[0],c[1]+a[1]])})}(f,v,this.duration_),u.preventDefault(),c=!0}}return!c},a}(ST);var C1e=function(){var l=function(a,o){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,u){c.__proto__=u}||function(c,u){for(var h in u)Object.prototype.hasOwnProperty.call(u,h)&&(c[h]=u[h])})(a,o)};return function(a,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function c(){this.constructor=a}l(a,o),a.prototype=null===o?Object.create(o):(c.prototype=o.prototype,new c)}}();const E1e=function(l){function a(o){var c=l.call(this)||this,u=o||{};return c.condition_=u.condition?u.condition:VW,c.delta_=u.delta?u.delta:1,c.duration_=void 0!==u.duration?u.duration:100,c}return C1e(a,l),a.prototype.handleEvent=function(o){var c=!1;if("keydown"==o.type||"keypress"==o.type){var u=o.originalEvent,h=u.charCode;if(this.condition_(o)&&(h=="+".charCodeAt(0)||h=="-".charCodeAt(0))){var d=o.map,f=h=="+".charCodeAt(0)?this.delta_:-this.delta_;qN(d.getView(),f,void 0,this.duration_),u.preventDefault(),c=!0}}return!c},a}(ST),D1e=function(){function l(a,o,c){this.decay_=a,this.minVelocity_=o,this.delay_=c,this.points_=[],this.angle_=0,this.initialVelocity_=0}return l.prototype.begin=function(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0},l.prototype.update=function(a,o){this.points_.push(a,o,Date.now())},l.prototype.end=function(){if(this.points_.length<6)return!1;var a=Date.now()-this.delay_,o=this.points_.length-3;if(this.points_[o+2]<a)return!1;for(var c=o-3;c>0&&this.points_[c+2]>a;)c-=3;var u=this.points_[o+2]-this.points_[c+2];if(u<1e3/60)return!1;var h=this.points_[o]-this.points_[c],d=this.points_[o+1]-this.points_[c+1];return this.angle_=Math.atan2(d,h),this.initialVelocity_=Math.sqrt(h*h+d*d)/u,this.initialVelocity_>this.minVelocity_},l.prototype.getDistance=function(){return(this.minVelocity_-this.initialVelocity_)/this.decay_},l.prototype.getAngle=function(){return this.angle_},l}();var A1e=function(){var l=function(a,o){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,u){c.__proto__=u}||function(c,u){for(var h in u)Object.prototype.hasOwnProperty.call(u,h)&&(c[h]=u[h])})(a,o)};return function(a,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function c(){this.constructor=a}l(a,o),a.prototype=null===o?Object.create(o):(c.prototype=o.prototype,new c)}}();const R1e=function(l){function a(o){var c=this,u=o||{};(c=l.call(this,u)||this).totalDelta_=0,c.lastDelta_=0,c.maxDelta_=void 0!==u.maxDelta?u.maxDelta:1,c.duration_=void 0!==u.duration?u.duration:250,c.timeout_=void 0!==u.timeout?u.timeout:80,c.useAnchor_=void 0===u.useAnchor||u.useAnchor,c.constrainResolution_=void 0!==u.constrainResolution&&u.constrainResolution;var h=u.condition?u.condition:s1e;return c.condition_=u.onFocusOnly?$N(NW,h):h,c.lastAnchor_=null,c.startTime_=void 0,c.mode_=void 0,c.trackpadEventGap_=400,c.deltaPerZoom_=300,c}return A1e(a,l),a.prototype.endInteraction_=function(){this.trackpadTimeoutId_=void 0,this.getMap().getView().endInteraction(void 0,this.lastDelta_?this.lastDelta_>0?1:-1:0,this.lastAnchor_)},a.prototype.handleEvent=function(o){if(!this.condition_(o))return!0;if("wheel"!==o.type)return!0;var d,u=o.map,h=o.originalEvent;if(h.preventDefault(),this.useAnchor_&&(this.lastAnchor_=o.coordinate),"wheel"==o.type&&(d=h.deltaY,pbe&&h.deltaMode===WheelEvent.DOM_DELTA_PIXEL&&(d/=m9),h.deltaMode===WheelEvent.DOM_DELTA_LINE&&(d*=40)),0===d)return!1;this.lastDelta_=d;var f=Date.now();void 0===this.startTime_&&(this.startTime_=f),(!this.mode_||f-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(d)<4?"trackpad":"wheel");var m=u.getView();if("trackpad"===this.mode_&&!m.getConstrainResolution()&&!this.constrainResolution_)return this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):(m.getAnimating()&&m.cancelAnimations(),m.beginInteraction()),this.trackpadTimeoutId_=setTimeout(this.endInteraction_.bind(this),this.timeout_),m.adjustZoom(-d/this.deltaPerZoom_,this.lastAnchor_),this.startTime_=f,!1;this.totalDelta_+=d;var g=Math.max(this.timeout_-(f-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,u),g),!1},a.prototype.handleWheelZoom_=function(o){var c=o.getView();c.getAnimating()&&c.cancelAnimations();var u=-br(this.totalDelta_,-this.maxDelta_*this.deltaPerZoom_,this.maxDelta_*this.deltaPerZoom_)/this.deltaPerZoom_;(c.getConstrainResolution()||this.constrainResolution_)&&(u=u?u>0?1:-1:0),qN(c,u,this.lastAnchor_,this.duration_),this.mode_=void 0,this.totalDelta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0},a.prototype.setMouseAnchor=function(o){this.useAnchor_=o,o||(this.lastAnchor_=null)},a}(ST);var P1e=function(){var l=function(a,o){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,u){c.__proto__=u}||function(c,u){for(var h in u)Object.prototype.hasOwnProperty.call(u,h)&&(c[h]=u[h])})(a,o)};return function(a,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function c(){this.constructor=a}l(a,o),a.prototype=null===o?Object.create(o):(c.prototype=o.prototype,new c)}}();const O1e=function(l){function a(o){var c=this,u=o||{},h=u;return h.stopDown||(h.stopDown=IE),(c=l.call(this,h)||this).anchor_=null,c.lastAngle_=void 0,c.rotating_=!1,c.rotationDelta_=0,c.threshold_=void 0!==u.threshold?u.threshold:.3,c.duration_=void 0!==u.duration?u.duration:250,c}return P1e(a,l),a.prototype.handleDragEvent=function(o){var c=0,u=this.targetPointers[0],h=this.targetPointers[1],d=Math.atan2(h.clientY-u.clientY,h.clientX-u.clientX);if(void 0!==this.lastAngle_){var f=d-this.lastAngle_;this.rotationDelta_+=f,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),c=f}this.lastAngle_=d;var m=o.map,g=m.getView();if(g.getConstraints().rotation!==PN){var y=m.getViewport().getBoundingClientRect(),v=XN(this.targetPointers);v[0]-=y.left,v[1]-=y.top,this.anchor_=m.getCoordinateFromPixelInternal(v),this.rotating_&&(m.render(),g.adjustRotationInternal(c,this.anchor_))}},a.prototype.handleUpEvent=function(o){return!(this.targetPointers.length<2&&(o.map.getView().endInteraction(this.duration_),1))},a.prototype.handleDownEvent=function(o){if(this.targetPointers.length>=2){var c=o.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||c.getView().beginInteraction(),!0}return!1},a}(TT);var N1e=function(){var l=function(a,o){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,u){c.__proto__=u}||function(c,u){for(var h in u)Object.prototype.hasOwnProperty.call(u,h)&&(c[h]=u[h])})(a,o)};return function(a,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function c(){this.constructor=a}l(a,o),a.prototype=null===o?Object.create(o):(c.prototype=o.prototype,new c)}}();const k1e=function(l){function a(o){var c=this,u=o||{},h=u;return h.stopDown||(h.stopDown=IE),(c=l.call(this,h)||this).anchor_=null,c.duration_=void 0!==u.duration?u.duration:400,c.lastDistance_=void 0,c.lastScaleDelta_=1,c}return N1e(a,l),a.prototype.handleDragEvent=function(o){var c=1,u=this.targetPointers[0],h=this.targetPointers[1],d=u.clientX-h.clientX,f=u.clientY-h.clientY,m=Math.sqrt(d*d+f*f);void 0!==this.lastDistance_&&(c=this.lastDistance_/m),this.lastDistance_=m;var g=o.map,y=g.getView();1!=c&&(this.lastScaleDelta_=c);var v=g.getViewport().getBoundingClientRect(),_=XN(this.targetPointers);_[0]-=v.left,_[1]-=v.top,this.anchor_=g.getCoordinateFromPixelInternal(_),g.render(),y.adjustResolutionInternal(c,this.anchor_)},a.prototype.handleUpEvent=function(o){return!(this.targetPointers.length<2&&(o.map.getView().endInteraction(this.duration_,this.lastScaleDelta_>1?1:-1),1))},a.prototype.handleDownEvent=function(o){if(this.targetPointers.length>=2){var c=o.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||c.getView().beginInteraction(),!0}return!1},a}(TT);var B1e=function(){var l=function(a,o){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,u){c.__proto__=u}||function(c,u){for(var h in u)Object.prototype.hasOwnProperty.call(u,h)&&(c[h]=u[h])})(a,o)};return function(a,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function c(){this.constructor=a}l(a,o),a.prototype=null===o?Object.create(o):(c.prototype=o.prototype,new c)}}();const G1e=function(l){function a(o){return(o=Gr({},o)).controls||(o.controls=function(l){var a={},o=new Qo;return(void 0===a.zoom||a.zoom)&&o.push(new LW(a.zoomOptions)),(void 0===a.rotate||a.rotate)&&o.push(new PW(a.rotateOptions)),(void 0===a.attribution||a.attribution)&&o.push(new RW(a.attributionOptions)),o}()),o.interactions||(o.interactions=function(l){var a={onFocusOnly:!0}||{},o=new Qo,c=new D1e(-.005,.05,100);return(void 0===a.altShiftDragRotate||a.altShiftDragRotate)&&o.push(new f1e),(void 0===a.doubleClickZoom||a.doubleClickZoom)&&o.push(new QTe({delta:a.zoomDelta,duration:a.zoomDuration})),(void 0===a.dragPan||a.dragPan)&&o.push(new u1e({onFocusOnly:a.onFocusOnly,kinetic:c})),(void 0===a.pinchRotate||a.pinchRotate)&&o.push(new O1e),(void 0===a.pinchZoom||a.pinchZoom)&&o.push(new k1e({duration:a.zoomDuration})),(void 0===a.keyboard||a.keyboard)&&(o.push(new w1e),o.push(new E1e({delta:a.zoomDelta,duration:a.zoomDuration}))),(void 0===a.mouseWheelZoom||a.mouseWheelZoom)&&o.push(new R1e({onFocusOnly:a.onFocusOnly,duration:a.zoomDuration})),(void 0===a.shiftDragZoom||a.shiftDragZoom)&&o.push(new b1e({duration:a.zoomDuration})),o}()),l.call(this,o)||this}return B1e(a,l),a.prototype.createRenderer=function(){return new Z9(this)},a}(IW);var z1e=function(){var l=function(a,o){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,u){c.__proto__=u}||function(c,u){for(var h in u)Object.prototype.hasOwnProperty.call(u,h)&&(c[h]=u[h])})(a,o)};return function(a,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function c(){this.constructor=a}l(a,o),a.prototype=null===o?Object.create(o):(c.prototype=o.prototype,new c)}}();const GW=function(l){function a(o){var c=l.call(this)||this;c.options=o,c.id=o.id,c.insertFirst=void 0===o.insertFirst||o.insertFirst,c.stopEvent=void 0===o.stopEvent||o.stopEvent,c.element=document.createElement("div"),c.element.className=void 0!==o.className?o.className:"ol-overlay-container ol-selectable",c.element.style.position="absolute",c.element.style.pointerEvents="auto";var u=o.autoPan;return u&&"object"!=typeof u&&(u={animation:o.autoPanAnimation,margin:o.autoPanMargin}),c.autoPan=u||!1,c.rendered={transform_:"",visible:!0},c.mapPostrenderListenerKey=null,c.addChangeListener("element",c.handleElementChanged),c.addChangeListener("map",c.handleMapChanged),c.addChangeListener("offset",c.handleOffsetChanged),c.addChangeListener("position",c.handlePositionChanged),c.addChangeListener("positioning",c.handlePositioningChanged),void 0!==o.element&&c.setElement(o.element),c.setOffset(void 0!==o.offset?o.offset:[0,0]),c.setPositioning(void 0!==o.positioning?o.positioning:"top-left"),void 0!==o.position&&c.setPosition(o.position),c}return z1e(a,l),a.prototype.getElement=function(){return this.get("element")},a.prototype.getId=function(){return this.id},a.prototype.getMap=function(){return this.get("map")},a.prototype.getOffset=function(){return this.get("offset")},a.prototype.getPosition=function(){return this.get("position")},a.prototype.getPositioning=function(){return this.get("positioning")},a.prototype.handleElementChanged=function(){q9(this.element);var o=this.getElement();o&&this.element.appendChild(o)},a.prototype.handleMapChanged=function(){this.mapPostrenderListenerKey&&(HE(this.element),Ii(this.mapPostrenderListenerKey),this.mapPostrenderListenerKey=null);var o=this.getMap();if(o){this.mapPostrenderListenerKey=Sr(o,"postrender",this.render,this),this.updatePixelPosition();var c=this.stopEvent?o.getOverlayContainerStopEvent():o.getOverlayContainer();this.insertFirst?c.insertBefore(this.element,c.childNodes[0]||null):c.appendChild(this.element),this.performAutoPan()}},a.prototype.render=function(){this.updatePixelPosition()},a.prototype.handleOffsetChanged=function(){this.updatePixelPosition()},a.prototype.handlePositionChanged=function(){this.updatePixelPosition(),this.performAutoPan()},a.prototype.handlePositioningChanged=function(){this.updatePixelPosition()},a.prototype.setElement=function(o){this.set("element",o)},a.prototype.setMap=function(o){this.set("map",o)},a.prototype.setOffset=function(o){this.set("offset",o)},a.prototype.setPosition=function(o){this.set("position",o)},a.prototype.performAutoPan=function(){this.autoPan&&this.panIntoView(this.autoPan)},a.prototype.panIntoView=function(o){var c=this.getMap();if(c&&c.getTargetElement()&&this.get("position")){var u=this.getRect(c.getTargetElement(),c.getSize()),h=this.getElement(),d=this.getRect(h,[iSe(h),sSe(h)]),f=o||{},m=void 0===f.margin?20:f.margin;if(!pl(u,d)){var g=d[0]-u[0],y=u[2]-d[2],v=d[1]-u[1],_=u[3]-d[3],b=[0,0];if(g<0?b[0]=g-m:y<0&&(b[0]=Math.abs(y)+m),v<0?b[1]=v-m:_<0&&(b[1]=Math.abs(_)+m),0!==b[0]||0!==b[1]){var w=c.getView().getCenterInternal(),C=c.getPixelFromCoordinateInternal(w);if(!C)return;var E=[C[0]+b[0],C[1]+b[1]],M=f.animation||{};c.getView().animateInternal({center:c.getCoordinateFromPixelInternal(E),duration:M.duration,easing:M.easing})}}}},a.prototype.getRect=function(o,c){var u=o.getBoundingClientRect(),h=u.left+window.pageXOffset,d=u.top+window.pageYOffset;return[h,d,h+c[0],d+c[1]]},a.prototype.setPositioning=function(o){this.set("positioning",o)},a.prototype.setVisible=function(o){this.rendered.visible!==o&&(this.element.style.display=o?"":"none",this.rendered.visible=o)},a.prototype.updatePixelPosition=function(){var o=this.getMap(),c=this.getPosition();if(o&&o.isRendered()&&c){var u=o.getPixelFromCoordinate(c),h=o.getSize();this.updateRenderedPosition(u,h)}else this.setVisible(!1)},a.prototype.updateRenderedPosition=function(o,c){var u=this.element.style,h=this.getOffset(),d=this.getPositioning();this.setVisible(!0);var g="0%",y="0%";"bottom-right"==d||"center-right"==d||"top-right"==d?g="-100%":("bottom-center"==d||"center-center"==d||"top-center"==d)&&(g="-50%"),"bottom-left"==d||"bottom-center"==d||"bottom-right"==d?y="-100%":("center-left"==d||"center-center"==d||"center-right"==d)&&(y="-50%");var v="translate("+g+", "+y+") translate("+(Math.round(o[0]+h[0])+"px")+", "+(Math.round(o[1]+h[1])+"px")+")";this.rendered.transform_!=v&&(this.rendered.transform_=v,u.transform=v,u.msTransform=v)},a.prototype.getOptions=function(){return this.options},a}(yu);var j1e=function(){var l=function(a,o){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,u){c.__proto__=u}||function(c,u){for(var h in u)Object.prototype.hasOwnProperty.call(u,h)&&(c[h]=u[h])})(a,o)};return function(a,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function c(){this.constructor=a}l(a,o),a.prototype=null===o?Object.create(o):(c.prototype=o.prototype,new c)}}();const zW=function(l){function a(o){var c=this,u=o||{},h=Gr({},u);return delete h.preload,delete h.useInterimTilesOnError,(c=l.call(this,h)||this).setPreload(void 0!==u.preload?u.preload:0),c.setUseInterimTilesOnError(void 0===u.useInterimTilesOnError||u.useInterimTilesOnError),c}return j1e(a,l),a.prototype.getPreload=function(){return this.get("preload")},a.prototype.setPreload=function(o){this.set("preload",o)},a.prototype.getUseInterimTilesOnError=function(){return this.get("useInterimTilesOnError")},a.prototype.setUseInterimTilesOnError=function(o){this.set("useInterimTilesOnError",o)},a}(gl);var JN=Ve(36);const HW=function(){function l(a){this.opacity_=a.opacity,this.rotateWithView_=a.rotateWithView,this.rotation_=a.rotation,this.scale_=a.scale,this.scaleArray_=ga(a.scale),this.displacement_=a.displacement}return l.prototype.clone=function(){var a=this.getScale();return new l({opacity:this.getOpacity(),scale:Array.isArray(a)?a.slice():a,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice()})},l.prototype.getOpacity=function(){return this.opacity_},l.prototype.getRotateWithView=function(){return this.rotateWithView_},l.prototype.getRotation=function(){return this.rotation_},l.prototype.getScale=function(){return this.scale_},l.prototype.getScaleArray=function(){return this.scaleArray_},l.prototype.getDisplacement=function(){return this.displacement_},l.prototype.getAnchor=function(){return Gn()},l.prototype.getImage=function(a){return Gn()},l.prototype.getHitDetectionImage=function(){return Gn()},l.prototype.getPixelRatio=function(a){return 1},l.prototype.getImageState=function(){return Gn()},l.prototype.getImageSize=function(){return Gn()},l.prototype.getOrigin=function(){return Gn()},l.prototype.getSize=function(){return Gn()},l.prototype.setOpacity=function(a){this.opacity_=a},l.prototype.setRotateWithView=function(a){this.rotateWithView_=a},l.prototype.setRotation=function(a){this.rotation_=a},l.prototype.setScale=function(a){this.scale_=a,this.scaleArray_=ga(a)},l.prototype.listenImageChange=function(a){Gn()},l.prototype.load=function(){Gn()},l.prototype.unlistenImageChange=function(a){Gn()},l}();function xh(l){return Array.isArray(l)?I9(l):l}var X1e=function(){var l=function(a,o){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,u){c.__proto__=u}||function(c,u){for(var h in u)Object.prototype.hasOwnProperty.call(u,h)&&(c[h]=u[h])})(a,o)};return function(a,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function c(){this.constructor=a}l(a,o),a.prototype=null===o?Object.create(o):(c.prototype=o.prototype,new c)}}();const Y1e=function(l){function a(o){var c=this;return(c=l.call(this,{opacity:1,rotateWithView:void 0!==o.rotateWithView&&o.rotateWithView,rotation:void 0!==o.rotation?o.rotation:0,scale:void 0!==o.scale?o.scale:1,displacement:void 0!==o.displacement?o.displacement:[0,0]})||this).canvas_=void 0,c.hitDetectionCanvas_=null,c.fill_=void 0!==o.fill?o.fill:null,c.origin_=[0,0],c.points_=o.points,c.radius_=void 0!==o.radius?o.radius:o.radius1,c.radius2_=o.radius2,c.angle_=void 0!==o.angle?o.angle:0,c.stroke_=void 0!==o.stroke?o.stroke:null,c.anchor_=null,c.size_=null,c.renderOptions_=null,c.render(),c}return X1e(a,l),a.prototype.clone=function(){var o=this.getScale(),c=new a({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(o)?o.slice():o,displacement:this.getDisplacement().slice()});return c.setOpacity(this.getOpacity()),c},a.prototype.getAnchor=function(){return this.anchor_},a.prototype.getAngle=function(){return this.angle_},a.prototype.getFill=function(){return this.fill_},a.prototype.getHitDetectionImage=function(){return this.hitDetectionCanvas_||this.createHitDetectionCanvas_(this.renderOptions_),this.hitDetectionCanvas_},a.prototype.getImage=function(o){var c=this.canvas_[o];if(!c){var u=this.renderOptions_,h=Va(u.size*o,u.size*o);this.draw_(u,h,o),this.canvas_[o]=c=h.canvas}return c},a.prototype.getPixelRatio=function(o){return o},a.prototype.getImageSize=function(){return this.size_},a.prototype.getImageState=function(){return 2},a.prototype.getOrigin=function(){return this.origin_},a.prototype.getPoints=function(){return this.points_},a.prototype.getRadius=function(){return this.radius_},a.prototype.getRadius2=function(){return this.radius2_},a.prototype.getSize=function(){return this.size_},a.prototype.getStroke=function(){return this.stroke_},a.prototype.listenImageChange=function(o){},a.prototype.load=function(){},a.prototype.unlistenImageChange=function(o){},a.prototype.calculateLineJoinSize_=function(o,c,u){if(0===c||this.points_===1/0||"bevel"!==o&&"miter"!==o)return c;var h=this.radius_,d=void 0===this.radius2_?h:this.radius2_;if(h<d){var f=h;h=d,d=f}var g=2*Math.PI/(void 0===this.radius2_?this.points_:2*this.points_),y=d*Math.sin(g),_=h-Math.sqrt(d*d-y*y),b=Math.sqrt(y*y+_*_),w=b/y;if("miter"===o&&w<=u)return w*c;var C=c/2/w,E=c/2*(_/b),x=Math.sqrt((h+C)*(h+C)+E*E)-h;if(void 0===this.radius2_||"bevel"===o)return 2*x;var R=h*Math.sin(g),k=d-Math.sqrt(h*h-R*R),U=Math.sqrt(R*R+k*k)/R;return U<=u?2*Math.max(x,U*c/2-d-h):2*x},a.prototype.createRenderOptions=function(){var d,o=Kv,c=0,u=null,h=0,f=0;this.stroke_&&(null===(d=this.stroke_.getColor())&&(d=gT),d=xh(d),void 0===(f=this.stroke_.getWidth())&&(f=1),u=this.stroke_.getLineDash(),h=this.stroke_.getLineDashOffset(),void 0===(o=this.stroke_.getLineJoin())&&(o=Kv),void 0===(c=this.stroke_.getMiterLimit())&&(c=10));var m=this.calculateLineJoinSize_(o,f,c),g=Math.max(this.radius_,this.radius2_||0);return{strokeStyle:d,strokeWidth:f,size:Math.ceil(2*g+m),lineDash:u,lineDashOffset:h,lineJoin:o,miterLimit:c}},a.prototype.render=function(){this.renderOptions_=this.createRenderOptions();var o=this.renderOptions_.size,c=this.getDisplacement();this.canvas_={},this.anchor_=[o/2-c[0],o/2+c[1]],this.size_=[o,o]},a.prototype.draw_=function(o,c,u){if(c.scale(u,u),c.translate(o.size/2,o.size/2),this.createPath_(c),this.fill_){var h=this.fill_.getColor();null===h&&(h=Nd),c.fillStyle=xh(h),c.fill()}this.stroke_&&(c.strokeStyle=o.strokeStyle,c.lineWidth=o.strokeWidth,c.setLineDash&&o.lineDash&&(c.setLineDash(o.lineDash),c.lineDashOffset=o.lineDashOffset),c.lineJoin=o.lineJoin,c.miterLimit=o.miterLimit,c.stroke())},a.prototype.createHitDetectionCanvas_=function(o){if(this.fill_){var c=this.fill_.getColor(),u=0;if("string"==typeof c&&(c=uN(c)),null===c?u=1:Array.isArray(c)&&(u=4===c.length?c[3]:1),0===u){var h=Va(o.size,o.size);this.hitDetectionCanvas_=h.canvas,this.drawHitDetectionCanvas_(o,h)}}this.hitDetectionCanvas_||(this.hitDetectionCanvas_=this.getImage(1))},a.prototype.createPath_=function(o){var c=this.points_,u=this.radius_;if(c===1/0)o.arc(0,0,u,0,2*Math.PI);else{var h=void 0===this.radius2_?u:this.radius2_;void 0!==this.radius2_&&(c*=2);for(var d=this.angle_-Math.PI/2,f=2*Math.PI/c,m=0;m<c;m++){var g=d+m*f,y=m%2==0?u:h;o.lineTo(y*Math.cos(g),y*Math.sin(g))}o.closePath()}},a.prototype.drawHitDetectionCanvas_=function(o,c){c.translate(o.size/2,o.size/2),this.createPath_(c),c.fillStyle=Nd,c.fill(),this.stroke_&&(c.strokeStyle=o.strokeStyle,c.lineWidth=o.strokeWidth,o.lineDash&&(c.setLineDash(o.lineDash),c.lineDashOffset=o.lineDashOffset),c.lineJoin=o.lineJoin,c.miterLimit=o.miterLimit,c.stroke())},a}(HW);var Z1e=function(){var l=function(a,o){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,u){c.__proto__=u}||function(c,u){for(var h in u)Object.prototype.hasOwnProperty.call(u,h)&&(c[h]=u[h])})(a,o)};return function(a,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function c(){this.constructor=a}l(a,o),a.prototype=null===o?Object.create(o):(c.prototype=o.prototype,new c)}}();const ag=function(l){function a(o){var u=o||{};return l.call(this,{points:1/0,fill:u.fill,radius:u.radius,stroke:u.stroke,scale:void 0!==u.scale?u.scale:1,rotation:void 0!==u.rotation?u.rotation:0,rotateWithView:void 0!==u.rotateWithView&&u.rotateWithView,displacement:void 0!==u.displacement?u.displacement:[0,0]})||this}return Z1e(a,l),a.prototype.clone=function(){var o=this.getScale(),c=new a({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),scale:Array.isArray(o)?o.slice():o,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice()});return c.setOpacity(this.getOpacity()),c},a.prototype.setRadius=function(o){this.radius_=o,this.render()},a}(Y1e),Pi=function(){function l(a){var o=a||{};this.color_=void 0!==o.color?o.color:null}return l.prototype.clone=function(){var a=this.getColor();return new l({color:Array.isArray(a)?a.slice():a||void 0})},l.prototype.getColor=function(){return this.color_},l.prototype.setColor=function(a){this.color_=a},l}(),Bs=function(){function l(a){var o=a||{};this.color_=void 0!==o.color?o.color:null,this.lineCap_=o.lineCap,this.lineDash_=void 0!==o.lineDash?o.lineDash:null,this.lineDashOffset_=o.lineDashOffset,this.lineJoin_=o.lineJoin,this.miterLimit_=o.miterLimit,this.width_=o.width}return l.prototype.clone=function(){var a=this.getColor();return new l({color:Array.isArray(a)?a.slice():a||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})},l.prototype.getColor=function(){return this.color_},l.prototype.getLineCap=function(){return this.lineCap_},l.prototype.getLineDash=function(){return this.lineDash_},l.prototype.getLineDashOffset=function(){return this.lineDashOffset_},l.prototype.getLineJoin=function(){return this.lineJoin_},l.prototype.getMiterLimit=function(){return this.miterLimit_},l.prototype.getWidth=function(){return this.width_},l.prototype.setColor=function(a){this.color_=a},l.prototype.setLineCap=function(a){this.lineCap_=a},l.prototype.setLineDash=function(a){this.lineDash_=a},l.prototype.setLineDashOffset=function(a){this.lineDashOffset_=a},l.prototype.setLineJoin=function(a){this.lineJoin_=a},l.prototype.setMiterLimit=function(a){this.miterLimit_=a},l.prototype.setWidth=function(a){this.width_=a},l}();var i_=function(){function l(a){var o=a||{};this.geometry_=null,this.geometryFunction_=jW,void 0!==o.geometry&&this.setGeometry(o.geometry),this.fill_=void 0!==o.fill?o.fill:null,this.image_=void 0!==o.image?o.image:null,this.renderer_=void 0!==o.renderer?o.renderer:null,this.stroke_=void 0!==o.stroke?o.stroke:null,this.text_=void 0!==o.text?o.text:null,this.zIndex_=o.zIndex}return l.prototype.clone=function(){var a=this.getGeometry();return a&&"object"==typeof a&&(a=a.clone()),new l({geometry:a,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,renderer:this.getRenderer(),stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})},l.prototype.getRenderer=function(){return this.renderer_},l.prototype.setRenderer=function(a){this.renderer_=a},l.prototype.getGeometry=function(){return this.geometry_},l.prototype.getGeometryFunction=function(){return this.geometryFunction_},l.prototype.getFill=function(){return this.fill_},l.prototype.setFill=function(a){this.fill_=a},l.prototype.getImage=function(){return this.image_},l.prototype.setImage=function(a){this.image_=a},l.prototype.getStroke=function(){return this.stroke_},l.prototype.setStroke=function(a){this.stroke_=a},l.prototype.getText=function(){return this.text_},l.prototype.setText=function(a){this.text_=a},l.prototype.getZIndex=function(){return this.zIndex_},l.prototype.setGeometry=function(a){"function"==typeof a?this.geometryFunction_=a:"string"==typeof a?this.geometryFunction_=function(o){return o.get(a)}:a?void 0!==a&&(this.geometryFunction_=function(){return a}):this.geometryFunction_=jW,this.geometry_=a},l.prototype.setZIndex=function(a){this.zIndex_=a},l}(),QN=null;function twe(l,a){if(!QN){var o=new Pi({color:"rgba(255,255,255,0.4)"}),c=new Bs({color:"#3399CC",width:1.25});QN=[new i_({image:new ag({fill:o,stroke:c,radius:5}),fill:o,stroke:c})]}return QN}function jW(l){return l.getGeometry()}const Li=i_;var nwe=function(){var l=function(a,o){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,u){c.__proto__=u}||function(c,u){for(var h in u)Object.prototype.hasOwnProperty.call(u,h)&&(c[h]=u[h])})(a,o)};return function(a,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function c(){this.constructor=a}l(a,o),a.prototype=null===o?Object.create(o):(c.prototype=o.prototype,new c)}}();const s_=function(l){function a(o){var c=this,u=o||{},h=Gr({},u);return delete h.style,delete h.renderBuffer,delete h.updateWhileAnimating,delete h.updateWhileInteracting,(c=l.call(this,h)||this).declutter_=void 0!==u.declutter&&u.declutter,c.renderBuffer_=void 0!==u.renderBuffer?u.renderBuffer:100,c.style_=null,c.styleFunction_=void 0,c.setStyle(u.style),c.updateWhileAnimating_=void 0!==u.updateWhileAnimating&&u.updateWhileAnimating,c.updateWhileInteracting_=void 0!==u.updateWhileInteracting&&u.updateWhileInteracting,c}return nwe(a,l),a.prototype.getDeclutter=function(){return this.declutter_},a.prototype.getFeatures=function(o){return l.prototype.getFeatures.call(this,o)},a.prototype.getRenderBuffer=function(){return this.renderBuffer_},a.prototype.getRenderOrder=function(){return this.get("renderOrder")},a.prototype.getStyle=function(){return this.style_},a.prototype.getStyleFunction=function(){return this.styleFunction_},a.prototype.getUpdateWhileAnimating=function(){return this.updateWhileAnimating_},a.prototype.getUpdateWhileInteracting=function(){return this.updateWhileInteracting_},a.prototype.renderDeclutter=function(o){o.declutterTree||(o.declutterTree=new JN(9)),this.getRenderer().renderDeclutter(o)},a.prototype.setRenderOrder=function(o){this.set("renderOrder",o)},a.prototype.setStyle=function(o){this.style_=void 0!==o?o:twe,this.styleFunction_=null===o?void 0:function(l){var a,o;"function"==typeof l?a=l:(Array.isArray(l)?o=l:(Yn("function"==typeof l.getZIndex,41),o=[l]),a=function(){return o});return a}(this.style_),this.changed()},a}(gl);var iwe=function(){var l=function(a,o){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,u){c.__proto__=u}||function(c,u){for(var h in u)Object.prototype.hasOwnProperty.call(u,h)&&(c[h]=u[h])})(a,o)};return function(a,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function c(){this.constructor=a}l(a,o),a.prototype=null===o?Object.create(o):(c.prototype=o.prototype,new c)}}();const qW=function(l){function a(o){return l.call(this,o||{})||this}return iwe(a,l),a}(gl);var owe=function(){var l=function(a,o){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,u){c.__proto__=u}||function(c,u){for(var h in u)Object.prototype.hasOwnProperty.call(u,h)&&(c[h]=u[h])})(a,o)};return function(a,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function c(){this.constructor=a}l(a,o),a.prototype=null===o?Object.create(o):(c.prototype=o.prototype,new c)}}();const wT=function(l){function a(o){var c=l.call(this)||this;return c.boundHandleImageChange_=c.handleImageChange_.bind(c),c.layer_=o,c.declutterExecutorGroup=null,c}return owe(a,l),a.prototype.getFeatures=function(o){return Gn()},a.prototype.prepareFrame=function(o){return Gn()},a.prototype.renderFrame=function(o,c){return Gn()},a.prototype.loadedTileCallback=function(o,c,u){o[c]||(o[c]={}),o[c][u.tileCoord.toString()]=u},a.prototype.createLoadedTileFinder=function(o,c,u){return function(h,d){var f=this.loadedTileCallback.bind(this,u,h);return o.forEachLoadedTile(c,h,d,f)}.bind(this)},a.prototype.forEachFeatureAtCoordinate=function(o,c,u,h,d){},a.prototype.getDataAtPixel=function(o,c,u){return Gn()},a.prototype.getLayer=function(){return this.layer_},a.prototype.handleFontsChanged=function(){},a.prototype.handleImageChange_=function(o){2===o.target.getState()&&this.renderIfReadyAndVisible()},a.prototype.loadImage=function(o){var c=o.getState();return 2!=c&&3!=c&&o.addEventListener("change",this.boundHandleImageChange_),0==c&&(o.load(),c=o.getState()),2==c},a.prototype.renderIfReadyAndVisible=function(){var o=this.getLayer();o.getVisible()&&"ready"==o.getSourceState()&&o.changed()},a}(O9);var lwe=function(){var l=function(a,o){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,u){c.__proto__=u}||function(c,u){for(var h in u)Object.prototype.hasOwnProperty.call(u,h)&&(c[h]=u[h])})(a,o)};return function(a,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function c(){this.constructor=a}l(a,o),a.prototype=null===o?Object.create(o):(c.prototype=o.prototype,new c)}}();const eF=function(l){function a(o){var c=l.call(this,o)||this;return c.container=null,c.tempTransform=[1,0,0,1,0,0],c.pixelTransform=[1,0,0,1,0,0],c.inversePixelTransform=[1,0,0,1,0,0],c.context=null,c.containerReused=!1,c}return lwe(a,l),a.prototype.useContainer=function(o,c,u){var d,f,h=this.getLayer().getClassName();if(o&&o.style.opacity===gN(u)&&o.className===h&&(m=o.firstElementChild)instanceof HTMLCanvasElement&&(f=m.getContext("2d")),f&&f.canvas.style.transform===c?(this.container=o,this.context=f,this.containerReused=!0):this.containerReused&&(this.container=null,this.context=null,this.containerReused=!1),!this.container){(d=document.createElement("div")).className=h;var m,g=d.style;g.position="absolute",g.width="100%",g.height="100%",f=Va(),d.appendChild(m=f.canvas),(g=m.style).position="absolute",g.left="0",g.transformOrigin="top left",this.container=d,this.context=f}},a.prototype.clipUnrotated=function(o,c,u){var h=_h(u),d=FE(u),f=cT(u),m=NE(u);ts(c.coordinateToPixelTransform,h),ts(c.coordinateToPixelTransform,d),ts(c.coordinateToPixelTransform,f),ts(c.coordinateToPixelTransform,m);var g=this.inversePixelTransform;ts(g,h),ts(g,d),ts(g,f),ts(g,m),o.save(),o.beginPath(),o.moveTo(Math.round(h[0]),Math.round(h[1])),o.lineTo(Math.round(d[0]),Math.round(d[1])),o.lineTo(Math.round(f[0]),Math.round(f[1])),o.lineTo(Math.round(m[0]),Math.round(m[1])),o.clip()},a.prototype.dispatchRenderEvent_=function(o,c,u){var h=this.getLayer();if(h.hasListener(o)){var d=new mN(o,this.inversePixelTransform,u,c);h.dispatchEvent(d)}},a.prototype.preRender=function(o,c){this.dispatchRenderEvent_("prerender",o,c)},a.prototype.postRender=function(o,c){this.dispatchRenderEvent_("postrender",o,c)},a.prototype.getRenderTransform=function(o,c,u,h,d,f,m){var v=h/c;return Fa(this.tempTransform,d/2,f/2,v,-v,-u,-o[0]+m,-o[1])},a.prototype.getDataAtPixel=function(o,c,u){var y,h=ts(this.inversePixelTransform,o.slice()),d=this.context,m=this.getLayer().getExtent();if(m&&!Pd(m,ts(c.pixelToCoordinateTransform,o.slice())))return null;try{var v=Math.round(h[0]),_=Math.round(h[1]),b=document.createElement("canvas"),w=b.getContext("2d");b.width=1,b.height=1,w.clearRect(0,0,1,1),w.drawImage(d.canvas,v,_,1,1,0,0,1,1),y=w.getImageData(0,0,1,1).data}catch(C){return"SecurityError"===C.name?new Uint8Array:y}return 0===y[3]?null:y},a}(wT);var uwe=function(){var l=function(a,o){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,u){c.__proto__=u}||function(c,u){for(var h in u)Object.prototype.hasOwnProperty.call(u,h)&&(c[h]=u[h])})(a,o)};return function(a,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function c(){this.constructor=a}l(a,o),a.prototype=null===o?Object.create(o):(c.prototype=o.prototype,new c)}}();const $W=function(l){function a(o){var c=l.call(this,o)||this;return c.image_=null,c}return uwe(a,l),a.prototype.getImage=function(){return this.image_?this.image_.getImage():null},a.prototype.prepareFrame=function(o){var c=o.layerStatesArray[o.layerIndex],u=o.pixelRatio,h=o.viewState,d=h.resolution,f=this.getLayer().getSource(),m=o.viewHints,g=o.extent;if(void 0!==c.extent&&(g=gu(g,Vd(c.extent))),!m[0]&&!m[1]&&!Xv(g))if(f){var _=f.getImage(g,d,u,h.projection);_&&this.loadImage(_)&&(this.image_=_)}else this.image_=null;return!!this.image_},a.prototype.renderFrame=function(o,c){var u=this.image_,h=u.getExtent(),d=u.getResolution(),f=u.getPixelRatio(),m=o.layerStatesArray[o.layerIndex],g=o.pixelRatio,y=o.viewState,v=y.center,b=o.size,w=g*d/(y.resolution*f),C=Math.round(b[0]*g),E=Math.round(b[1]*g),M=y.rotation;if(M){var x=Math.round(Math.sqrt(C*C+E*E));C=x,E=x}Fa(this.pixelTransform,o.size[0]/2,o.size[1]/2,1/g,1/g,M,-C/2,-E/2),jv(this.inversePixelTransform,this.pixelTransform);var R=LE(this.pixelTransform);this.useContainer(c,R,m.opacity);var P=this.context,k=P.canvas;k.width!=C||k.height!=E?(k.width=C,k.height=E):this.containerReused||P.clearRect(0,0,C,E);var W=!1,U=!0;if(m.extent){var K=Vd(m.extent);(W=(U=As(K,o.extent))&&!pl(K,o.extent))&&this.clipUnrotated(P,o,K)}var Q=u.getImage(),se=Fa(this.tempTransform,C/2,E/2,w,w,0,f*(h[0]-v[0])/d,f*(v[1]-h[3])/d);this.renderedResolution=d*g/f;var te=Q.width*se[0],De=Q.height*se[3];if(Gr(P,this.getLayer().getSource().getContextOptions()),this.preRender(P,o),U&&te>=.5&&De>=.5){var de=se[4],ye=se[5],_e=m.opacity,ue=void 0;1!==_e&&(ue=P.globalAlpha,P.globalAlpha=_e),P.drawImage(Q,0,0,+Q.width,+Q.height,Math.round(de),Math.round(ye),Math.round(te),Math.round(De)),1!==_e&&(P.globalAlpha=ue)}return this.postRender(P,o),W&&P.restore(),R!==k.style.transform&&(k.style.transform=R),this.container},a}(eF);var dwe=function(){var l=function(a,o){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,u){c.__proto__=u}||function(c,u){for(var h in u)Object.prototype.hasOwnProperty.call(u,h)&&(c[h]=u[h])})(a,o)};return function(a,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function c(){this.constructor=a}l(a,o),a.prototype=null===o?Object.create(o):(c.prototype=o.prototype,new c)}}();const o_=function(l){function a(o){return l.call(this,o)||this}return dwe(a,l),a.prototype.createRenderer=function(){return new $W(this)},a}(qW);var YW=function(){function l(a,o,c,u){this.minX=a,this.maxX=o,this.minY=c,this.maxY=u}return l.prototype.contains=function(a){return this.containsXY(a[1],a[2])},l.prototype.containsTileRange=function(a){return this.minX<=a.minX&&a.maxX<=this.maxX&&this.minY<=a.minY&&a.maxY<=this.maxY},l.prototype.containsXY=function(a,o){return this.minX<=a&&a<=this.maxX&&this.minY<=o&&o<=this.maxY},l.prototype.equals=function(a){return this.minX==a.minX&&this.minY==a.minY&&this.maxX==a.maxX&&this.maxY==a.maxY},l.prototype.extend=function(a){a.minX<this.minX&&(this.minX=a.minX),a.maxX>this.maxX&&(this.maxX=a.maxX),a.minY<this.minY&&(this.minY=a.minY),a.maxY>this.maxY&&(this.maxY=a.maxY)},l.prototype.getHeight=function(){return this.maxY-this.minY+1},l.prototype.getSize=function(){return[this.getWidth(),this.getHeight()]},l.prototype.getWidth=function(){return this.maxX-this.minX+1},l.prototype.intersects=function(a){return this.minX<=a.maxX&&this.maxX>=a.minX&&this.minY<=a.maxY&&this.maxY>=a.minY},l}();function a_(l,a,o,c,u){return void 0!==u?(u.minX=l,u.maxX=a,u.minY=o,u.maxY=c,u):new YW(l,a,o,c)}const ZW=YW;var pwe=function(){var l=function(a,o){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,u){c.__proto__=u}||function(c,u){for(var h in u)Object.prototype.hasOwnProperty.call(u,h)&&(c[h]=u[h])})(a,o)};return function(a,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function c(){this.constructor=a}l(a,o),a.prototype=null===o?Object.create(o):(c.prototype=o.prototype,new c)}}();const JW=function(l){function a(o){var c=l.call(this,o)||this;return c.extentChanged=!0,c.renderedExtent_=null,c.renderedProjection=null,c.renderedTiles=[],c.newTiles_=!1,c.tmpExtent=[1/0,1/0,-1/0,-1/0],c.tmpTileRange_=new ZW(0,0,0,0),c}return pwe(a,l),a.prototype.isDrawableTile=function(o){var c=this.getLayer(),u=o.getState(),h=c.getUseInterimTilesOnError();return 2==u||4==u||3==u&&!h},a.prototype.getTile=function(o,c,u,h){var d=h.pixelRatio,f=h.viewState.projection,m=this.getLayer(),y=m.getSource().getTile(o,c,u,d,f);return 3==y.getState()&&(m.getUseInterimTilesOnError()?m.getPreload()>0&&(this.newTiles_=!0):y.setState(2)),this.isDrawableTile(y)||(y=y.getInterimTile()),y},a.prototype.loadedTileCallback=function(o,c,u){return!!this.isDrawableTile(u)&&l.prototype.loadedTileCallback.call(this,o,c,u)},a.prototype.prepareFrame=function(o){return!!this.getLayer().getSource()},a.prototype.renderFrame=function(o,c){var u=o.layerStatesArray[o.layerIndex],h=o.viewState,d=h.projection,f=h.resolution,m=h.center,g=h.rotation,y=o.pixelRatio,v=this.getLayer(),_=v.getSource(),b=_.getRevision(),w=_.getTileGridForProjection(d),C=w.getZForResolution(f,_.zDirection),E=w.getResolution(C),M=o.extent,x=u.extent&&Vd(u.extent);x&&(M=gu(M,Vd(u.extent)));var R=_.getTilePixelRatio(y),P=Math.round(o.size[0]*R),k=Math.round(o.size[1]*R);if(g){var W=Math.round(Math.sqrt(P*P+k*k));P=W,k=W}var U=E*P/2/R,K=E*k/2/R,Q=[m[0]-U,m[1]-K,m[0]+U,m[1]+K],se=w.getTileRangeForExtentAndZ(M,C),te={};te[C]={};var De=this.createLoadedTileFinder(_,d,te),de=this.tmpExtent,ye=this.tmpTileRange_;this.newTiles_=!1;for(var _e=se.minX;_e<=se.maxX;++_e)for(var ue=se.minY;ue<=se.maxY;++ue){var ce=this.getTile(C,_e,ue,o);if(this.isDrawableTile(ce)){var Re=Dn(this);if(2==ce.getState()){te[C][ce.tileCoord.toString()]=ce;var Oe=ce.inTransition(Re);!this.newTiles_&&(Oe||-1===this.renderedTiles.indexOf(ce))&&(this.newTiles_=!0)}if(1===ce.getAlpha(Re,o.time))continue}var Ae=w.getTileCoordChildTileRange(ce.tileCoord,ye,de),We=!1;Ae&&(We=De(C+1,Ae)),We||w.forEachTileCoordParentTileRange(ce.tileCoord,De,ye,de)}var Te=E/f;Fa(this.pixelTransform,o.size[0]/2,o.size[1]/2,1/R,1/R,g,-P/2,-k/2);var He=LE(this.pixelTransform);this.useContainer(c,He,u.opacity);var Ue=this.context,ct=Ue.canvas;jv(this.inversePixelTransform,this.pixelTransform),Fa(this.tempTransform,P/2,k/2,Te,Te,0,-P/2,-k/2),ct.width!=P||ct.height!=k?(ct.width=P,ct.height=k):this.containerReused||Ue.clearRect(0,0,P,k),x&&this.clipUnrotated(Ue,o,x),Gr(Ue,_.getContextOptions()),this.preRender(Ue,o),this.renderedTiles.length=0;var xt,Ye,Ct,Ce=Object.keys(te).map(Number);Ce.sort(jm),1!==u.opacity||this.containerReused&&!_.getOpaque(o.viewState.projection)?(xt=[],Ye=[]):Ce=Ce.reverse();for(var Ot=Ce.length-1;Ot>=0;--Ot){var Kt=Ce[Ot],it=_.getTilePixelSize(Kt,y,d),vt=w.getResolution(Kt)/E,tn=it[0]*vt*Te,Ft=it[1]*vt*Te,ge=w.getTileCoordForCoordAndZ(_h(Q),Kt),ee=w.getTileCoordExtent(ge),st=ts(this.tempTransform,[R*(ee[0]-Q[0])/E,R*(Q[3]-ee[3])/E]),gt=R*_.getGutterForProjection(d),Xt=te[Kt];for(var Jt in Xt){var Tn=(ce=Xt[Jt]).tileCoord,Bt=ge[1]-Tn[1],En=Math.round(st[0]-(Bt-1)*tn),pn=ge[2]-Tn[2],Pe=Math.round(st[1]-(pn-1)*Ft),Gt=En-(_e=Math.round(st[0]-Bt*tn)),ot=Pe-(ue=Math.round(st[1]-pn*Ft)),rn=C===Kt;if(!(Oe=rn&&1!==ce.getAlpha(Dn(this),o.time)))if(xt){Ue.save(),Ct=[_e,ue,_e+Gt,ue,_e+Gt,ue+ot,_e,ue+ot];for(var hn=0,gn=xt.length;hn<gn;++hn)if(C!==Kt&&Kt<Ye[hn]){var Ne=xt[hn];Ue.beginPath(),Ue.moveTo(Ct[0],Ct[1]),Ue.lineTo(Ct[2],Ct[3]),Ue.lineTo(Ct[4],Ct[5]),Ue.lineTo(Ct[6],Ct[7]),Ue.moveTo(Ne[6],Ne[7]),Ue.lineTo(Ne[4],Ne[5]),Ue.lineTo(Ne[2],Ne[3]),Ue.lineTo(Ne[0],Ne[1]),Ue.clip()}xt.push(Ct),Ye.push(Kt)}else Ue.clearRect(_e,ue,Gt,ot);this.drawTileImage(ce,o,_e,ue,Gt,ot,gt,rn),xt&&!Oe?(Ue.restore(),this.renderedTiles.unshift(ce)):this.renderedTiles.push(ce),this.updateUsedTiles(o.usedTiles,_,ce)}}this.renderedRevision=b,this.renderedResolution=E,this.extentChanged=!this.renderedExtent_||!vh(this.renderedExtent_,Q),this.renderedExtent_=Q,this.renderedPixelRatio=y,this.renderedProjection=d,this.manageTilePyramid(o,_,w,y,d,M,C,v.getPreload()),this.scheduleExpireCache(o,_),this.postRender(Ue,o),u.extent&&Ue.restore(),He!==ct.style.transform&&(ct.style.transform=He);var nn=gN(u.opacity),Hr=this.container;return nn!==Hr.style.opacity&&(Hr.style.opacity=nn),this.container},a.prototype.drawTileImage=function(o,c,u,h,d,f,m,g){var y=this.getTileImage(o);if(y){var v=Dn(this),_=g?o.getAlpha(v,c.time):1,b=_!==this.context.globalAlpha;b&&(this.context.save(),this.context.globalAlpha=_),this.context.drawImage(y,m,m,y.width-2*m,y.height-2*m,u,h,d,f),b&&this.context.restore(),1!==_?c.animate=!0:g&&o.endTransition(v)}},a.prototype.getImage=function(){var o=this.context;return o?o.canvas:null},a.prototype.getTileImage=function(o){return o.getImage()},a.prototype.scheduleExpireCache=function(o,c){if(c.canExpireCache()){var u=function(h,d,f){var m=Dn(h);m in f.usedTiles&&h.expireCache(f.viewState.projection,f.usedTiles[m])}.bind(null,c);o.postRenderFunctions.push(u)}},a.prototype.updateUsedTiles=function(o,c,u){var h=Dn(c);h in o||(o[h]={}),o[h][u.getKey()]=!0},a.prototype.manageTilePyramid=function(o,c,u,h,d,f,m,g,y){var v=Dn(c);v in o.wantedTiles||(o.wantedTiles[v]={});var E,M,x,R,P,k,_=o.wantedTiles[v],b=o.tileQueue,C=0;for(k=u.getMinZoom();k<=m;++k)for(M=u.getTileRangeForExtentAndZ(f,k,M),x=u.getResolution(k),R=M.minX;R<=M.maxX;++R)for(P=M.minY;P<=M.maxY;++P)m-k<=g?(++C,0==(E=c.getTile(k,R,P,h,d)).getState()&&(_[E.getKey()]=!0,b.isKeyQueued(E.getKey())||b.enqueue([E,v,u.getTileCoordCenter(E.tileCoord),x])),void 0!==y&&y(E)):c.useTile(k,R,P,d);c.updateCacheSize(C,d)},a}(eF);var mwe=function(){var l=function(a,o){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,u){c.__proto__=u}||function(c,u){for(var h in u)Object.prototype.hasOwnProperty.call(u,h)&&(c[h]=u[h])})(a,o)};return function(a,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function c(){this.constructor=a}l(a,o),a.prototype=null===o?Object.create(o):(c.prototype=o.prototype,new c)}}();const Bd=function(l){function a(o){return l.call(this,o)||this}return mwe(a,l),a.prototype.createRenderer=function(){return new JW(this)},a}(zW);var CT={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},uM=[CT.FILL],tp=[CT.STROKE],lg=[CT.BEGIN_PATH],QW=[CT.CLOSE_PATH];const mr=CT,eq=function(){function l(){}return l.prototype.drawCustom=function(a,o,c){},l.prototype.drawGeometry=function(a){},l.prototype.setStyle=function(a){},l.prototype.drawCircle=function(a,o){},l.prototype.drawFeature=function(a,o){},l.prototype.drawGeometryCollection=function(a,o){},l.prototype.drawLineString=function(a,o){},l.prototype.drawMultiLineString=function(a,o){},l.prototype.drawMultiPoint=function(a,o){},l.prototype.drawMultiPolygon=function(a,o){},l.prototype.drawPoint=function(a,o){},l.prototype.drawPolygon=function(a,o){},l.prototype.drawText=function(a,o){},l.prototype.setFillStrokeStyle=function(a,o){},l.prototype.setImageStyle=function(a,o){},l.prototype.setTextStyle=function(a,o){},l}();var vwe=function(){var l=function(a,o){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,u){c.__proto__=u}||function(c,u){for(var h in u)Object.prototype.hasOwnProperty.call(u,h)&&(c[h]=u[h])})(a,o)};return function(a,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function c(){this.constructor=a}l(a,o),a.prototype=null===o?Object.create(o):(c.prototype=o.prototype,new c)}}();const xT=function(l){function a(o,c,u,h){var d=l.call(this)||this;return d.tolerance=o,d.maxExtent=c,d.pixelRatio=h,d.maxLineWidth=0,d.resolution=u,d.beginGeometryInstruction1_=null,d.beginGeometryInstruction2_=null,d.bufferedMaxExtent_=null,d.instructions=[],d.coordinates=[],d.tmpCoordinate_=[],d.hitDetectionInstructions=[],d.state={},d}return vwe(a,l),a.prototype.applyPixelRatio=function(o){var c=this.pixelRatio;return 1==c?o:o.map(function(u){return u*c})},a.prototype.appendFlatPointCoordinates=function(o,c){for(var u=this.getBufferedMaxExtent(),h=this.tmpCoordinate_,d=this.coordinates,f=d.length,m=0,g=o.length;m<g;m+=c)h[0]=o[m],h[1]=o[m+1],Pd(u,h)&&(d[f++]=h[0],d[f++]=h[1]);return f},a.prototype.appendFlatLineCoordinates=function(o,c,u,h,d,f){var m=this.coordinates,g=m.length,y=this.getBufferedMaxExtent();f&&(c+=h);var C,E,M,v=o[c],_=o[c+1],b=this.tmpCoordinate_,w=!0;for(C=c+h;C<u;C+=h)b[0]=o[C],b[1]=o[C+1],(M=iN(y,b))!==E?(w&&(m[g++]=v,m[g++]=_,w=!1),m[g++]=b[0],m[g++]=b[1]):1===M?(m[g++]=b[0],m[g++]=b[1],w=!1):w=!0,v=b[0],_=b[1],E=M;return(d&&w||C===c+h)&&(m[g++]=v,m[g++]=_),g},a.prototype.drawCustomCoordinates_=function(o,c,u,h,d){for(var f=0,m=u.length;f<m;++f){var g=u[f],y=this.appendFlatLineCoordinates(o,c,g,h,!1,!1);d.push(y),c=g}return c},a.prototype.drawCustom=function(o,c,u){this.beginGeometry(o,c);var m,g,y,v,_,h=o.getType(),d=o.getStride(),f=this.coordinates.length;if("MultiPolygon"==h){m=o.getOrientedFlatCoordinates(),v=[];var b=o.getEndss();_=0;for(var w=0,C=b.length;w<C;++w){var E=[];_=this.drawCustomCoordinates_(m,_,b[w],d,E),v.push(E)}this.instructions.push([mr.CUSTOM,f,v,o,u,vW])}else"Polygon"==h||"MultiLineString"==h?(y=[],m="Polygon"==h?o.getOrientedFlatCoordinates():o.getFlatCoordinates(),_=this.drawCustomCoordinates_(m,0,o.getEnds(),d,y),this.instructions.push([mr.CUSTOM,f,y,o,u,sM])):"LineString"==h||"Circle"==h?(m=o.getFlatCoordinates(),g=this.appendFlatLineCoordinates(m,0,m.length,d,!1,!1),this.instructions.push([mr.CUSTOM,f,g,o,u,r_])):"MultiPoint"==h?(m=o.getFlatCoordinates(),(g=this.appendFlatPointCoordinates(m,d))>f&&this.instructions.push([mr.CUSTOM,f,g,o,u,r_])):"Point"==h&&(m=o.getFlatCoordinates(),this.coordinates.push(m[0],m[1]),this.instructions.push([mr.CUSTOM,f,g=this.coordinates.length,o,u]));this.endGeometry(c)},a.prototype.beginGeometry=function(o,c){this.beginGeometryInstruction1_=[mr.BEGIN_GEOMETRY,c,0,o],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[mr.BEGIN_GEOMETRY,c,0,o],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)},a.prototype.finish=function(){return{instructions:this.instructions,hitDetectionInstructions:this.hitDetectionInstructions,coordinates:this.coordinates}},a.prototype.reverseHitDetectionInstructions=function(){var o=this.hitDetectionInstructions;o.reverse();var c,h,d,u=o.length,f=-1;for(c=0;c<u;++c)(d=(h=o[c])[0])==mr.END_GEOMETRY?f=c:d==mr.BEGIN_GEOMETRY&&(h[2]=c,ube(this.hitDetectionInstructions,f,c),f=-1)},a.prototype.setFillStrokeStyle=function(o,c){var u=this.state;if(o){var h=o.getColor();u.fillStyle=xh(h||Nd)}else u.fillStyle=void 0;if(c){var d=c.getColor();u.strokeStyle=xh(d||gT);var f=c.getLineCap();u.lineCap=void 0!==f?f:jE;var m=c.getLineDash();u.lineDash=m?m.slice():fT;var g=c.getLineDashOffset();u.lineDashOffset=g||0;var y=c.getLineJoin();u.lineJoin=void 0!==y?y:Kv;var v=c.getWidth();u.lineWidth=void 0!==v?v:1;var _=c.getMiterLimit();u.miterLimit=void 0!==_?_:10,u.lineWidth>this.maxLineWidth&&(this.maxLineWidth=u.lineWidth,this.bufferedMaxExtent_=null)}else u.strokeStyle=void 0,u.lineCap=void 0,u.lineDash=null,u.lineDashOffset=void 0,u.lineJoin=void 0,u.lineWidth=void 0,u.miterLimit=void 0},a.prototype.createFill=function(o){var c=o.fillStyle,u=[mr.SET_FILL_STYLE,c];return"string"!=typeof c&&u.push(!0),u},a.prototype.applyStroke=function(o){this.instructions.push(this.createStroke(o))},a.prototype.createStroke=function(o){return[mr.SET_STROKE_STYLE,o.strokeStyle,o.lineWidth*this.pixelRatio,o.lineCap,o.lineJoin,o.miterLimit,this.applyPixelRatio(o.lineDash),o.lineDashOffset*this.pixelRatio]},a.prototype.updateFillStyle=function(o,c){var u=o.fillStyle;("string"!=typeof u||o.currentFillStyle!=u)&&(void 0!==u&&this.instructions.push(c.call(this,o)),o.currentFillStyle=u)},a.prototype.updateStrokeStyle=function(o,c){var u=o.strokeStyle,h=o.lineCap,d=o.lineDash,f=o.lineDashOffset,m=o.lineJoin,g=o.lineWidth,y=o.miterLimit;(o.currentStrokeStyle!=u||o.currentLineCap!=h||d!=o.currentLineDash&&!Wm(o.currentLineDash,d)||o.currentLineDashOffset!=f||o.currentLineJoin!=m||o.currentLineWidth!=g||o.currentMiterLimit!=y)&&(void 0!==u&&c.call(this,o),o.currentStrokeStyle=u,o.currentLineCap=h,o.currentLineDash=d,o.currentLineDashOffset=f,o.currentLineJoin=m,o.currentLineWidth=g,o.currentMiterLimit=y)},a.prototype.endGeometry=function(o){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;var c=[mr.END_GEOMETRY,o];this.instructions.push(c),this.hitDetectionInstructions.push(c)},a.prototype.getBufferedMaxExtent=function(){return!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=_9(this.maxExtent),this.maxLineWidth>0)&&jl(this.bufferedMaxExtent_,this.resolution*(this.maxLineWidth+1)/2,this.bufferedMaxExtent_),this.bufferedMaxExtent_},a}(eq);var bwe=function(){var l=function(a,o){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,u){c.__proto__=u}||function(c,u){for(var h in u)Object.prototype.hasOwnProperty.call(u,h)&&(c[h]=u[h])})(a,o)};return function(a,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function c(){this.constructor=a}l(a,o),a.prototype=null===o?Object.create(o):(c.prototype=o.prototype,new c)}}();const Twe=function(l){function a(o,c,u,h){var d=l.call(this,o,c,u,h)||this;return d.hitDetectionImage_=null,d.image_=null,d.imagePixelRatio_=void 0,d.anchorX_=void 0,d.anchorY_=void 0,d.height_=void 0,d.opacity_=void 0,d.originX_=void 0,d.originY_=void 0,d.rotateWithView_=void 0,d.rotation_=void 0,d.scale_=void 0,d.width_=void 0,d.declutterImageWithText_=void 0,d}return bwe(a,l),a.prototype.drawPoint=function(o,c){if(this.image_){this.beginGeometry(o,c);var u=o.getFlatCoordinates(),h=o.getStride(),d=this.coordinates.length,f=this.appendFlatPointCoordinates(u,h);this.instructions.push([mr.DRAW_IMAGE,d,f,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterImageWithText_]),this.hitDetectionInstructions.push([mr.DRAW_IMAGE,d,f,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterImageWithText_]),this.endGeometry(c)}},a.prototype.drawMultiPoint=function(o,c){if(this.image_){this.beginGeometry(o,c);var u=o.getFlatCoordinates(),h=o.getStride(),d=this.coordinates.length,f=this.appendFlatPointCoordinates(u,h);this.instructions.push([mr.DRAW_IMAGE,d,f,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterImageWithText_]),this.hitDetectionInstructions.push([mr.DRAW_IMAGE,d,f,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterImageWithText_]),this.endGeometry(c)}},a.prototype.finish=function(){return this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0,l.prototype.finish.call(this)},a.prototype.setImageStyle=function(o,c){var u=o.getAnchor(),h=o.getSize(),d=o.getHitDetectionImage(),f=o.getImage(this.pixelRatio),m=o.getOrigin();this.imagePixelRatio_=o.getPixelRatio(this.pixelRatio),this.anchorX_=u[0],this.anchorY_=u[1],this.hitDetectionImage_=d,this.image_=f,this.height_=h[1],this.opacity_=o.getOpacity(),this.originX_=m[0]*this.imagePixelRatio_,this.originY_=m[1]*this.imagePixelRatio_,this.rotateWithView_=o.getRotateWithView(),this.rotation_=o.getRotation(),this.scale_=o.getScaleArray(),this.width_=h[0],this.declutterImageWithText_=c},a}(xT);var wwe=function(){var l=function(a,o){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,u){c.__proto__=u}||function(c,u){for(var h in u)Object.prototype.hasOwnProperty.call(u,h)&&(c[h]=u[h])})(a,o)};return function(a,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function c(){this.constructor=a}l(a,o),a.prototype=null===o?Object.create(o):(c.prototype=o.prototype,new c)}}();const xwe=function(l){function a(o,c,u,h){return l.call(this,o,c,u,h)||this}return wwe(a,l),a.prototype.drawFlatCoordinates_=function(o,c,u,h){var d=this.coordinates.length,f=this.appendFlatLineCoordinates(o,c,u,h,!1,!1),m=[mr.MOVE_TO_LINE_TO,d,f];return this.instructions.push(m),this.hitDetectionInstructions.push(m),u},a.prototype.drawLineString=function(o,c){var u=this.state;if(void 0!==u.strokeStyle&&void 0!==u.lineWidth){this.updateStrokeStyle(u,this.applyStroke),this.beginGeometry(o,c),this.hitDetectionInstructions.push([mr.SET_STROKE_STYLE,u.strokeStyle,u.lineWidth,u.lineCap,u.lineJoin,u.miterLimit,fT,0],lg);var f=o.getFlatCoordinates(),m=o.getStride();this.drawFlatCoordinates_(f,0,f.length,m),this.hitDetectionInstructions.push(tp),this.endGeometry(c)}},a.prototype.drawMultiLineString=function(o,c){var u=this.state;if(void 0!==u.strokeStyle&&void 0!==u.lineWidth){this.updateStrokeStyle(u,this.applyStroke),this.beginGeometry(o,c),this.hitDetectionInstructions.push([mr.SET_STROKE_STYLE,u.strokeStyle,u.lineWidth,u.lineCap,u.lineJoin,u.miterLimit,u.lineDash,u.lineDashOffset],lg);for(var f=o.getEnds(),m=o.getFlatCoordinates(),g=o.getStride(),y=0,v=0,_=f.length;v<_;++v)y=this.drawFlatCoordinates_(m,y,f[v],g);this.hitDetectionInstructions.push(tp),this.endGeometry(c)}},a.prototype.finish=function(){var o=this.state;return null!=o.lastStroke&&o.lastStroke!=this.coordinates.length&&this.instructions.push(tp),this.reverseHitDetectionInstructions(),this.state=null,l.prototype.finish.call(this)},a.prototype.applyStroke=function(o){null!=o.lastStroke&&o.lastStroke!=this.coordinates.length&&(this.instructions.push(tp),o.lastStroke=this.coordinates.length),o.lastStroke=0,l.prototype.applyStroke.call(this,o),this.instructions.push(lg)},a}(xT);var Ewe=function(){var l=function(a,o){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,u){c.__proto__=u}||function(c,u){for(var h in u)Object.prototype.hasOwnProperty.call(u,h)&&(c[h]=u[h])})(a,o)};return function(a,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function c(){this.constructor=a}l(a,o),a.prototype=null===o?Object.create(o):(c.prototype=o.prototype,new c)}}();const tq=function(l){function a(o,c,u,h){return l.call(this,o,c,u,h)||this}return Ewe(a,l),a.prototype.drawFlatCoordinatess_=function(o,c,u,h){var d=this.state,f=void 0!==d.fillStyle,m=void 0!==d.strokeStyle,g=u.length;this.instructions.push(lg),this.hitDetectionInstructions.push(lg);for(var y=0;y<g;++y){var v=u[y],_=this.coordinates.length,b=this.appendFlatLineCoordinates(o,c,v,h,!0,!m),w=[mr.MOVE_TO_LINE_TO,_,b];this.instructions.push(w),this.hitDetectionInstructions.push(w),m&&(this.instructions.push(QW),this.hitDetectionInstructions.push(QW)),c=v}return f&&(this.instructions.push(uM),this.hitDetectionInstructions.push(uM)),m&&(this.instructions.push(tp),this.hitDetectionInstructions.push(tp)),c},a.prototype.drawCircle=function(o,c){var u=this.state;if(void 0!==u.fillStyle||void 0!==u.strokeStyle){this.setFillStrokeStyles_(),this.beginGeometry(o,c),void 0!==u.fillStyle&&this.hitDetectionInstructions.push([mr.SET_FILL_STYLE,Nd]),void 0!==u.strokeStyle&&this.hitDetectionInstructions.push([mr.SET_STROKE_STYLE,u.strokeStyle,u.lineWidth,u.lineCap,u.lineJoin,u.miterLimit,u.lineDash,u.lineDashOffset]);var f=o.getFlatCoordinates(),m=o.getStride(),g=this.coordinates.length;this.appendFlatLineCoordinates(f,0,f.length,m,!1,!1);var y=[mr.CIRCLE,g];this.instructions.push(lg,y),this.hitDetectionInstructions.push(lg,y),void 0!==u.fillStyle&&(this.instructions.push(uM),this.hitDetectionInstructions.push(uM)),void 0!==u.strokeStyle&&(this.instructions.push(tp),this.hitDetectionInstructions.push(tp)),this.endGeometry(c)}},a.prototype.drawPolygon=function(o,c){var u=this.state;if(void 0!==u.fillStyle||void 0!==u.strokeStyle){this.setFillStrokeStyles_(),this.beginGeometry(o,c),void 0!==u.fillStyle&&this.hitDetectionInstructions.push([mr.SET_FILL_STYLE,Nd]),void 0!==u.strokeStyle&&this.hitDetectionInstructions.push([mr.SET_STROKE_STYLE,u.strokeStyle,u.lineWidth,u.lineCap,u.lineJoin,u.miterLimit,u.lineDash,u.lineDashOffset]);var f=o.getEnds(),m=o.getOrientedFlatCoordinates(),g=o.getStride();this.drawFlatCoordinatess_(m,0,f,g),this.endGeometry(c)}},a.prototype.drawMultiPolygon=function(o,c){var u=this.state;if(void 0!==u.fillStyle||void 0!==u.strokeStyle){this.setFillStrokeStyles_(),this.beginGeometry(o,c),void 0!==u.fillStyle&&this.hitDetectionInstructions.push([mr.SET_FILL_STYLE,Nd]),void 0!==u.strokeStyle&&this.hitDetectionInstructions.push([mr.SET_STROKE_STYLE,u.strokeStyle,u.lineWidth,u.lineCap,u.lineJoin,u.miterLimit,u.lineDash,u.lineDashOffset]);for(var f=o.getEndss(),m=o.getOrientedFlatCoordinates(),g=o.getStride(),y=0,v=0,_=f.length;v<_;++v)y=this.drawFlatCoordinatess_(m,y,f[v],g);this.endGeometry(c)}},a.prototype.finish=function(){this.reverseHitDetectionInstructions(),this.state=null;var o=this.tolerance;if(0!==o)for(var c=this.coordinates,u=0,h=c.length;u<h;++u)c[u]=ig(c[u],o);return l.prototype.finish.call(this)},a.prototype.setFillStrokeStyles_=function(){var o=this.state;void 0!==o.fillStyle&&this.updateFillStyle(o,this.createFill),void 0!==o.strokeStyle&&this.updateStrokeStyle(o,this.applyStroke)},a}(xT);function Dwe(l,a,o,c,u){var v,_,b,w,C,E,M,x,R,h=o,d=o,f=0,m=0,g=o;for(v=o;v<c;v+=u){var P=a[v],k=a[v+1];void 0!==w&&(x=P-w,R=k-C,b=Math.sqrt(x*x+R*R),void 0!==E&&(m+=_,Math.acos((E*x+M*R)/(_*b))>l&&(m>f&&(f=m,h=g,d=v),m=0,g=v-u)),_=b,E=x,M=R),w=P,C=k}return(m+=b)>f?[g,v]:[h,d]}var Awe=function(){var l=function(a,o){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,u){c.__proto__=u}||function(c,u){for(var h in u)Object.prototype.hasOwnProperty.call(u,h)&&(c[h]=u[h])})(a,o)};return function(a,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function c(){this.constructor=a}l(a,o),a.prototype=null===o?Object.create(o):(c.prototype=o.prototype,new c)}}(),hM={left:0,end:0,center:.5,right:1,start:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1},Rwe={Circle:tq,Default:xT,Image:Twe,LineString:xwe,Polygon:tq,Text:function(l){function a(o,c,u,h){var d=l.call(this,o,c,u,h)||this;return d.labels_=null,d.text_="",d.textOffsetX_=0,d.textOffsetY_=0,d.textRotateWithView_=void 0,d.textRotation_=0,d.textFillState_=null,d.fillStates={},d.textStrokeState_=null,d.strokeStates={},d.textState_={},d.textStates={},d.textKey_="",d.fillKey_="",d.strokeKey_="",d.declutterImageWithText_=void 0,d}return Awe(a,l),a.prototype.finish=function(){var o=l.prototype.finish.call(this);return o.textStates=this.textStates,o.fillStates=this.fillStates,o.strokeStates=this.strokeStates,o},a.prototype.drawText=function(o,c){var d=this.textState_;if(""!==this.text_&&d&&(this.textFillState_||this.textStrokeState_)){var f=this.coordinates,m=f.length,g=o.getType(),y=null,v=o.getStride();if("line"!==d.placement||"LineString"!=g&&"MultiLineString"!=g&&"Polygon"!=g&&"MultiPolygon"!=g){var U=d.overflow?null:[];switch(g){case"Point":case"MultiPoint":y=o.getFlatCoordinates();break;case"LineString":y=o.getFlatMidpoint();break;case"Circle":y=o.getCenter();break;case"MultiLineString":y=o.getFlatMidpoints(),v=2;break;case"Polygon":y=o.getFlatInteriorPoint(),d.overflow||U.push(y[2]/this.resolution),v=3;break;case"MultiPolygon":var K=o.getFlatInteriorPoints();for(y=[],w=0,C=K.length;w<C;w+=3)d.overflow||U.push(K[w+2]/this.resolution),y.push(K[w],K[w+1]);if(0===y.length)return;v=2}if((W=this.appendFlatPointCoordinates(y,v))===m)return;if(U&&(W-m)/2!=y.length/v){var Q=m/2;U=U.filter(function(Re,Oe){var Ae=f[2*(Q+Oe)]===y[Oe*v]&&f[2*(Q+Oe)+1]===y[Oe*v+1];return Ae||--Q,Ae})}this.saveTextStates_(),(d.backgroundFill||d.backgroundStroke)&&(this.setFillStrokeStyle(d.backgroundFill,d.backgroundStroke),d.backgroundFill&&(this.updateFillStyle(this.state,this.createFill),this.hitDetectionInstructions.push(this.createFill(this.state))),d.backgroundStroke&&(this.updateStrokeStyle(this.state,this.applyStroke),this.hitDetectionInstructions.push(this.createStroke(this.state)))),this.beginGeometry(o,c);var se=d.padding;if(se!=Qm&&(d.scale[0]<0||d.scale[1]<0)){var te=d.padding[0],De=d.padding[1],de=d.padding[2],ye=d.padding[3];d.scale[0]<0&&(De=-De,ye=-ye),d.scale[1]<0&&(te=-te,de=-de),se=[te,De,de,ye]}var _e=this.pixelRatio;this.instructions.push([mr.DRAW_IMAGE,m,W,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[1,1],NaN,this.declutterImageWithText_,se==Qm?Qm:se.map(function(Re){return Re*_e}),!!d.backgroundFill,!!d.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,U]);var ue=1/_e;this.hitDetectionInstructions.push([mr.DRAW_IMAGE,m,W,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[ue,ue],NaN,this.declutterImageWithText_,se,!!d.backgroundFill,!!d.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,U]),this.endGeometry(c)}else{if(!As(this.getBufferedMaxExtent(),o.getExtent()))return;var _=void 0;if(y=o.getFlatCoordinates(),"LineString"==g)_=[y.length];else if("MultiLineString"==g)_=o.getEnds();else if("Polygon"==g)_=o.getEnds().slice(0,1);else if("MultiPolygon"==g){var b=o.getEndss();_=[];for(var w=0,C=b.length;w<C;++w)_.push(b[w][0])}this.beginGeometry(o,c);for(var E=d.textAlign,M=0,x=void 0,R=0,P=_.length;R<P;++R){if(null==E){var k=Dwe(d.maxAngle,y,M,_[R],v);M=k[0],x=k[1]}else x=_[R];for(w=M;w<x;w+=v)f.push(y[w],y[w+1]);var W;M=_[R],this.drawChars_(m,W=f.length),m=W}this.endGeometry(c)}}},a.prototype.saveTextStates_=function(){var o=this.textStrokeState_,c=this.textState_,u=this.textFillState_,h=this.strokeKey_;o&&(h in this.strokeStates||(this.strokeStates[h]={strokeStyle:o.strokeStyle,lineCap:o.lineCap,lineDashOffset:o.lineDashOffset,lineWidth:o.lineWidth,lineJoin:o.lineJoin,miterLimit:o.miterLimit,lineDash:o.lineDash}));var d=this.textKey_;d in this.textStates||(this.textStates[d]={font:c.font,textAlign:c.textAlign||yT,textBaseline:c.textBaseline||WE,scale:c.scale});var f=this.fillKey_;u&&(f in this.fillStates||(this.fillStates[f]={fillStyle:u.fillStyle}))},a.prototype.drawChars_=function(o,c){var u=this.textStrokeState_,h=this.textState_,d=this.strokeKey_,f=this.textKey_,m=this.fillKey_;this.saveTextStates_();var g=this.pixelRatio,y=hM[h.textBaseline],v=this.textOffsetY_*g,_=this.text_,b=u?u.lineWidth*Math.abs(h.scale[0])/2:0;this.instructions.push([mr.DRAW_CHARS,o,c,y,h.overflow,m,h.maxAngle,g,v,d,b*g,_,f,1]),this.hitDetectionInstructions.push([mr.DRAW_CHARS,o,c,y,h.overflow,m,h.maxAngle,1,v,d,b,_,f,1/g])},a.prototype.setTextStyle=function(o,c){var u,h,d;if(o){var f=o.getFill();f?((h=this.textFillState_)||(this.textFillState_=h={}),h.fillStyle=xh(f.getColor()||Nd)):this.textFillState_=h=null;var m=o.getStroke();if(m){(d=this.textStrokeState_)||(this.textStrokeState_=d={});var g=m.getLineDash(),y=m.getLineDashOffset(),v=m.getWidth(),_=m.getMiterLimit();d.lineCap=m.getLineCap()||jE,d.lineDash=g?g.slice():fT,d.lineDashOffset=void 0===y?0:y,d.lineJoin=m.getLineJoin()||Kv,d.lineWidth=void 0===v?1:v,d.miterLimit=void 0===_?10:_,d.strokeStyle=xh(m.getColor()||gT)}else this.textStrokeState_=d=null;u=this.textState_;var b=o.getFont()||X9;oSe(b);var w=o.getScaleArray();u.overflow=o.getOverflow(),u.font=b,u.maxAngle=o.getMaxAngle(),u.placement=o.getPlacement(),u.textAlign=o.getTextAlign(),u.textBaseline=o.getTextBaseline()||WE,u.backgroundFill=o.getBackgroundFill(),u.backgroundStroke=o.getBackgroundStroke(),u.padding=o.getPadding()||Qm,u.scale=void 0===w?[1,1]:w;var C=o.getOffsetX(),E=o.getOffsetY(),M=o.getRotateWithView(),x=o.getRotation();this.text_=o.getText()||"",this.textOffsetX_=void 0===C?0:C,this.textOffsetY_=void 0===E?0:E,this.textRotateWithView_=void 0!==M&&M,this.textRotation_=void 0===x?0:x,this.strokeKey_=d?("string"==typeof d.strokeStyle?d.strokeStyle:Dn(d.strokeStyle))+d.lineCap+d.lineDashOffset+"|"+d.lineWidth+d.lineJoin+d.miterLimit+"["+d.lineDash.join()+"]":"",this.textKey_=u.font+u.scale+(u.textAlign||"?")+(u.textBaseline||"?"),this.fillKey_=h?"string"==typeof h.fillStyle?h.fillStyle:"|"+Dn(h.fillStyle):""}else this.text_="";this.declutterImageWithText_=c},a}(xT)};const dM=function(){function l(a,o,c,u){this.tolerance_=a,this.maxExtent_=o,this.pixelRatio_=u,this.resolution_=c,this.buildersByZIndex_={}}return l.prototype.finish=function(){var a={};for(var o in this.buildersByZIndex_){a[o]=a[o]||{};var c=this.buildersByZIndex_[o];for(var u in c){var h=c[u].finish();a[o][u]=h}}return a},l.prototype.getBuilder=function(a,o){var c=void 0!==a?a.toString():"0",u=this.buildersByZIndex_[c];void 0===u&&(this.buildersByZIndex_[c]=u={});var h=u[o];return void 0===h&&(h=new(0,Rwe[o])(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_),u[o]=h),h},l}();function Lwe(l,a,o,c,u,h,d,f,m,g,y,v){var _=l[a],b=l[a+1],w=0,C=0,E=0,M=0;function x(){w=_,C=b,_=l[a+=c],b=l[a+1],M+=E,E=Math.sqrt((_-w)*(_-w)+(b-C)*(b-C))}do{x()}while(a<o-c&&M+E<h);for(var R=0===E?0:(h-M)/E,P=Ld(w,_,R),k=Ld(C,b,R),W=a-c,U=M,K=h+f*m(g,u,y);a<o-c&&M+E<K;)x();var te,Q=Ld(w,_,R=0===E?0:(K-M)/E),se=Ld(C,b,R);if(v){var De=[P,k,Q,se];hW(De,0,4,2,v,De,De),te=De[0]>De[2]}else te=P>Q;var ue,de=Math.PI,ye=[],_e=W+c===a;if(E=0,M=U,_=l[a=W],b=l[a+1],_e)return x(),ue=Math.atan2(b-C,_-w),te&&(ue+=ue>0?-de:de),ye[0]=[ce=(Q+P)/2,Re=(se+k)/2,(K-h)/2,ue,u],ye;for(var Oe=0,Ae=u.length;Oe<Ae;){x();var We=Math.atan2(b-C,_-w);if(te&&(We+=We>0?-de:de),void 0!==ue){var Te=We-ue;if(Te+=Te>de?-2*de:Te<-de?2*de:0,Math.abs(Te)>d)return null}ue=We;for(var He=Oe,Ue=0;Oe<Ae;++Oe){var Ce=f*m(g,u[te?Ae-Oe-1:Oe],y);if(a+c<o&&M+E<h+Ue+Ce/2)break;Ue+=Ce}if(Oe!==He){var xt=te?u.substring(Ae-He,Ae-Oe):u.substring(He,Oe),ce=Ld(w,_,R=0===E?0:(h+Ue/2-M)/E),Re=Ld(C,b,R);ye.push([ce,Re,Ue/2,We,xt]),h+=Ue}}return ye}function tF(l,a,o,c){for(var u=l[a],h=l[a+1],d=0,f=a+c;f<o;f+=c){var m=l[f],g=l[f+1];d+=Math.sqrt((m-u)*(m-u)+(g-h)*(g-h)),u=m,h=g}return d}var l_=[1/0,1/0,-1/0,-1/0],np=[],Ud=[],Gd=[],rp=[];function rq(l){return l[3].declutterBox}var Owe=new RegExp("["+String.fromCharCode(1425)+"-"+String.fromCharCode(2303)+String.fromCharCode(64285)+"-"+String.fromCharCode(65023)+String.fromCharCode(65136)+"-"+String.fromCharCode(65276)+String.fromCharCode(67584)+"-"+String.fromCharCode(69631)+String.fromCharCode(124928)+"-"+String.fromCharCode(126975)+"]");function iq(l,a){return("start"===a||"end"===a)&&!Owe.test(l)&&(a="start"===a?"left":"right"),hM[a]}const Fwe=function(){function l(a,o,c,u){this.overlaps=c,this.pixelRatio=o,this.resolution=a,this.instructions=u.instructions,this.coordinates=u.coordinates,this.coordinateCache_={},this.renderedTransform_=[1,0,0,1,0,0],this.hitDetectionInstructions=u.hitDetectionInstructions,this.pixelCoordinates_=null,this.viewRotation_=0,this.fillStates=u.fillStates||{},this.strokeStates=u.strokeStates||{},this.textStates=u.textStates||{},this.widths_={},this.labels_={}}return l.prototype.createLabel=function(a,o,c,u){var h=a+o+c+u;if(this.labels_[h])return this.labels_[h];var d=u?this.strokeStates[u]:null,f=c?this.fillStates[c]:null,m=this.textStates[o],g=this.pixelRatio,y=[m.scale[0]*g,m.scale[1]*g],v=iq(a,m.textAlign||yT),_=u&&d.lineWidth?d.lineWidth:0,b=a.split("\n"),w=b.length,C=[],E=function(l,a,o){for(var c=a.length,u=0,h=0;h<c;++h){var d=qE(l,a[h]);u=Math.max(u,d),o.push(d)}return u}(m.font,b,C),M=aSe(m.font),R=E+_,P=[],k=(R+2)*y[0],W=(M*w+_)*y[1],U={width:k<0?Math.floor(k):Math.ceil(k),height:W<0?Math.floor(W):Math.ceil(W),contextInstructions:P};(1!=y[0]||1!=y[1])&&P.push("scale",y),P.push("font",m.font),u&&(P.push("strokeStyle",d.strokeStyle),P.push("lineWidth",_),P.push("lineCap",d.lineCap),P.push("lineJoin",d.lineJoin),P.push("miterLimit",d.miterLimit),(RE?OffscreenCanvasRenderingContext2D:CanvasRenderingContext2D).prototype.setLineDash&&(P.push("setLineDash",[d.lineDash]),P.push("lineDashOffset",d.lineDashOffset))),c&&P.push("fillStyle",f.fillStyle),P.push("textBaseline","middle"),P.push("textAlign","center");var te,Q=.5-v,se=v*R+Q*_;if(u)for(te=0;te<w;++te)P.push("strokeText",[b[te],se+Q*C[te],.5*(_+M)+te*M]);if(c)for(te=0;te<w;++te)P.push("fillText",[b[te],se+Q*C[te],.5*(_+M)+te*M]);return this.labels_[h]=U,U},l.prototype.replayTextBackground_=function(a,o,c,u,h,d,f){a.beginPath(),a.moveTo.apply(a,o),a.lineTo.apply(a,c),a.lineTo.apply(a,u),a.lineTo.apply(a,h),a.lineTo.apply(a,o),d&&(this.alignFill_=d[2],this.fill_(a)),f&&(this.setStrokeStyle_(a,f),a.stroke())},l.prototype.calculateImageOrLabelDimensions_=function(a,o,c,u,h,d,f,m,g,y,v,_,b,w,C,E){var Q,M=c-(f*=_[0]),x=u-(m*=_[1]),R=h+g>a?a-g:h,P=d+y>o?o-y:d,k=w[3]+R*_[0]+w[1],W=w[0]+P*_[1]+w[2],U=M-w[3],K=x-w[0];return(C||0!==v)&&(np[0]=U,rp[0]=U,np[1]=K,Ud[1]=K,Ud[0]=U+k,Gd[0]=Ud[0],Gd[1]=K+W,rp[1]=Gd[1]),0!==v?(ts(Q=Fa([1,0,0,1,0,0],c,u,1,1,v,-c,-u),np),ts(Q,Ud),ts(Q,Gd),ts(Q,rp),yh(Math.min(np[0],Ud[0],Gd[0],rp[0]),Math.min(np[1],Ud[1],Gd[1],rp[1]),Math.max(np[0],Ud[0],Gd[0],rp[0]),Math.max(np[1],Ud[1],Gd[1],rp[1]),l_)):yh(Math.min(U,U+k),Math.min(K,K+W),Math.max(U,U+k),Math.max(K,K+W),l_),b&&(M=Math.round(M),x=Math.round(x)),{drawImageX:M,drawImageY:x,drawImageW:R,drawImageH:P,originX:g,originY:y,declutterBox:{minX:l_[0],minY:l_[1],maxX:l_[2],maxY:l_[3],value:E},canvasTransform:Q,scale:_}},l.prototype.replayImageOrLabel_=function(a,o,c,u,h,d,f){var g=u.declutterBox,y=a.canvas,v=f?f[2]*u.scale[0]/2:0;return g.minX-v<=y.width/o&&g.maxX+v>=0&&g.minY-v<=y.height/o&&g.maxY+v>=0&&(!(!d&&!f)&&this.replayTextBackground_(a,np,Ud,Gd,rp,d,f),function(l,a,o,c,u,h,d,f,m,g,y){l.save(),1!==o&&(l.globalAlpha*=o),a&&l.setTransform.apply(l,a),c.contextInstructions?(l.translate(m,g),l.scale(y[0],y[1]),function(l,a){for(var o=l.contextInstructions,c=0,u=o.length;c<u;c+=2)Array.isArray(o[c+1])?a[o[c]].apply(a,o[c+1]):a[o[c]]=o[c+1]}(c,l)):y[0]<0||y[1]<0?(l.translate(m,g),l.scale(y[0],y[1]),l.drawImage(c,u,h,d,f,0,0,d,f)):l.drawImage(c,u,h,d,f,m,g,d*y[0],f*y[1]),l.restore()}(a,u.canvasTransform,h,c,u.originX,u.originY,u.drawImageW,u.drawImageH,u.drawImageX,u.drawImageY,u.scale)),!0},l.prototype.fill_=function(a){if(this.alignFill_){var o=ts(this.renderedTransform_,[0,0]),c=512*this.pixelRatio;a.save(),a.translate(o[0]%c,o[1]%c),a.rotate(this.viewRotation_)}a.fill(),this.alignFill_&&a.restore()},l.prototype.setStrokeStyle_=function(a,o){a.strokeStyle=o[1],a.lineWidth=o[2],a.lineCap=o[3],a.lineJoin=o[4],a.miterLimit=o[5],a.setLineDash&&(a.lineDashOffset=o[7],a.setLineDash(o[6]))},l.prototype.drawLabelWithPointPlacement_=function(a,o,c,u){var h=this.textStates[o],d=this.createLabel(a,o,u,c),f=this.strokeStates[c],m=this.pixelRatio,g=iq(a,h.textAlign||yT),y=hM[h.textBaseline||WE],v=f&&f.lineWidth?f.lineWidth:0;return{label:d,anchorX:g*(d.width/m-2*h.scale[0])+2*(.5-g)*v,anchorY:y*d.height/m+2*(.5-y)*v}},l.prototype.execute_=function(a,o,c,u,h,d,f,m){var g;this.pixelCoordinates_&&Wm(c,this.renderedTransform_)?g=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),g=Jf(this.coordinates,0,this.coordinates.length,2,c,this.pixelCoordinates_),function(l,a){l[0]=a[0],l[1]=a[1],l[2]=a[2],l[3]=a[3],l[4]=a[4],l[5]=a[5]}(this.renderedTransform_,c));for(var b,w,C,E,M,x,R,P,k,W,U,K,Re,Oe,Ae,We,y=0,v=u.length,_=0,Q=0,se=0,te=null,De=null,de=this.coordinateCache_,ye=this.viewRotation_,_e=Math.round(1e12*Math.atan2(-c[1],c[0]))/1e12,ue={context:a,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:ye},ce=this.instructions!=u||this.overlaps?0:200;y<v;){var Te=u[y];switch(Te[0]){case mr.BEGIN_GEOMETRY:We=Te[3],(Re=Te[1]).getGeometry()?void 0===f||As(f,We.getExtent())?++y:y=Te[2]+1:y=Te[2];break;case mr.BEGIN_PATH:Q>ce&&(this.fill_(a),Q=0),se>ce&&(a.stroke(),se=0),!Q&&!se&&(a.beginPath(),E=NaN,M=NaN),++y;break;case mr.CIRCLE:var Ue=g[_=Te[1]],ct=g[_+1],Ye=g[_+2]-Ue,Ct=g[_+3]-ct,Ot=Math.sqrt(Ye*Ye+Ct*Ct);a.moveTo(Ue+Ot,ct),a.arc(Ue,ct,Ot,0,2*Math.PI,!0),++y;break;case mr.CLOSE_PATH:a.closePath(),++y;break;case mr.CUSTOM:_=Te[1],b=Te[2];var it=Te[4],ht=6==Te.length?Te[5]:void 0;ue.geometry=Te[3],ue.feature=Re,y in de||(de[y]=[]);var vt=de[y];ht?ht(g,_,b,2,vt):(vt[0]=g[_],vt[1]=g[_+1],vt.length=2),it(vt,ue),++y;break;case mr.DRAW_IMAGE:_=Te[1],b=Te[2],w=Te[4],C=Te[5];var tn=Te[6],Ft=Te[7],ge=Te[8],ee=Te[9],st=Te[10],gt=Te[11],Xt=Te[12],Jt=Te[13],Tn=Te[14];if(!(P=Te[3])&&Te.length>=19){var Bt=this.drawLabelWithPointPlacement_(k=Te[18],W=Te[19],U=Te[20],K=Te[21]);Te[3]=P=Bt.label,Te[4]=w=(Bt.anchorX-Te[22])*this.pixelRatio,Te[5]=C=(Bt.anchorY-Te[23])*this.pixelRatio,Te[6]=tn=P.height,Te[13]=Jt=P.width}var Pe=void 0;Te.length>24&&(Pe=Te[24]);var Gt=void 0,ot=void 0,rn=void 0;Te.length>16?(Gt=Te[15],ot=Te[16],rn=Te[17]):(Gt=Qm,ot=!1,rn=!1),st&&_e?gt+=ye:!st&&!_e&&(gt-=ye);for(var hn=0;_<b;_+=2)if(!(Pe&&Pe[hn++]<Jt/this.pixelRatio)){var Ne=[a,o,P,gn=this.calculateImageOrLabelDimensions_(P.width,P.height,g[_],g[_+1],Jt,tn,w,C,ge,ee,gt,Xt,h,Gt,ot||rn,Re),Ft,ot?te:null,rn?De:null],nn=void 0,Hr=void 0;if(m&&Tn){var or=b-_;if(!Tn[or]){Tn[or]=Ne;continue}if(nn=Tn[or],delete Tn[or],Hr=rq(nn),m.collides(Hr))continue}m&&m.collides(gn.declutterBox)||(nn&&(m&&m.insert(Hr),this.replayImageOrLabel_.apply(this,nn)),m&&m.insert(gn.declutterBox),this.replayImageOrLabel_.apply(this,Ne))}++y;break;case mr.DRAW_CHARS:var oi=Te[1],gs=Te[2],Dl=Te[3],dc=Te[4];K=Te[5];var Mo=Te[6],uo=Te[7],Ma=Te[8];U=Te[9];var fc=Te[10];k=Te[11];var uy=[Te[13],Te[13]],Cf=this.textStates[W=Te[12]],Al=Cf.font,$u=[Cf.scale[0]*uo,Cf.scale[1]*uo],pc=void 0;Al in this.widths_?pc=this.widths_[Al]:this.widths_[Al]=pc={};var hy=tF(g,oi,gs,2),dy=Math.abs($u[0])*Y9(Al,k,pc);if(dc||dy<=hy){var he=Lwe(g,oi,gs,2,k,(hy-dy)*hM[this.textStates[W].textAlign],Mo,Math.abs($u[0]),Y9,Al,pc,_e?0:this.viewRotation_);e:if(he){var qe=[],Fe=void 0,rt=void 0,xn=void 0,_n=void 0;if(U)for(Fe=0,rt=he.length;Fe<rt;++Fe){xn=this.createLabel((_n=he[Fe])[4],W,"",U);var gn=this.calculateImageOrLabelDimensions_(xn.width,xn.height,_n[0],_n[1],xn.width,xn.height,w=_n[2]+($u[0]<0?-fc:fc),C=Dl*xn.height+2*(.5-Dl)*fc*$u[1]/$u[0]-Ma,0,0,_n[3],uy,!1,Qm,!1,Re);if(m&&m.collides(gn.declutterBox))break e;qe.push([a,o,xn,gn,1,null,null])}if(K)for(Fe=0,rt=he.length;Fe<rt;++Fe){if(xn=this.createLabel((_n=he[Fe])[4],W,K,""),gn=this.calculateImageOrLabelDimensions_(xn.width,xn.height,_n[0],_n[1],xn.width,xn.height,w=_n[2],C=Dl*xn.height-Ma,0,0,_n[3],uy,!1,Qm,!1,Re),m&&m.collides(gn.declutterBox))break e;qe.push([a,o,xn,gn,1,null,null])}m&&m.load(qe.map(rq));for(var Ln=0,wr=qe.length;Ln<wr;++Ln)this.replayImageOrLabel_.apply(this,qe[Ln])}}++y;break;case mr.END_GEOMETRY:if(void 0!==d){var Zr=d(Re=Te[1],We);if(Zr)return Zr}++y;break;case mr.FILL:ce?Q++:this.fill_(a),++y;break;case mr.MOVE_TO_LINE_TO:for(b=Te[2],R=(Ae=g[(_=Te[1])+1])+.5|0,((x=(Oe=g[_])+.5|0)!==E||R!==M)&&(a.moveTo(Oe,Ae),E=x,M=R),_+=2;_<b;_+=2)x=(Oe=g[_])+.5|0,R=(Ae=g[_+1])+.5|0,(_==b-2||x!==E||R!==M)&&(a.lineTo(Oe,Ae),E=x,M=R);++y;break;case mr.SET_FILL_STYLE:te=Te,this.alignFill_=Te[2],Q&&(this.fill_(a),Q=0,se&&(a.stroke(),se=0)),a.fillStyle=Te[1],++y;break;case mr.SET_STROKE_STYLE:De=Te,se&&(a.stroke(),se=0),this.setStrokeStyle_(a,Te),++y;break;case mr.STROKE:ce?se++:a.stroke(),++y;break;default:++y}}Q&&this.fill_(a),se&&a.stroke()},l.prototype.execute=function(a,o,c,u,h,d){this.viewRotation_=u,this.execute_(a,o,c,this.instructions,h,void 0,void 0,d)},l.prototype.executeHitDetection=function(a,o,c,u,h){return this.viewRotation_=c,this.execute_(a,1,o,this.hitDetectionInstructions,!0,u,h)},l}();var nF=["Polygon","Circle","LineString","Image","Text","Default"],kwe=function(){function l(a,o,c,u,h,d){this.maxExtent_=a,this.overlaps_=u,this.pixelRatio_=c,this.resolution_=o,this.renderBuffer_=d,this.executorsByZIndex_={},this.hitDetectionContext_=null,this.hitDetectionTransform_=[1,0,0,1,0,0],this.createExecutors_(h)}return l.prototype.clip=function(a,o){var c=this.getClipCoords(o);a.beginPath(),a.moveTo(c[0],c[1]),a.lineTo(c[2],c[3]),a.lineTo(c[4],c[5]),a.lineTo(c[6],c[7]),a.clip()},l.prototype.createExecutors_=function(a){for(var o in a){var c=this.executorsByZIndex_[o];void 0===c&&(this.executorsByZIndex_[o]=c={});var u=a[o];for(var h in u)c[h]=new Fwe(this.resolution_,this.pixelRatio_,this.overlaps_,u[h])}},l.prototype.hasExecutors=function(a){for(var o in this.executorsByZIndex_)for(var c=this.executorsByZIndex_[o],u=0,h=a.length;u<h;++u)if(a[u]in c)return!0;return!1},l.prototype.forEachFeatureAtCoordinate=function(a,o,c,u,h,d){var f=2*(u=Math.round(u))+1,m=Fa(this.hitDetectionTransform_,u+.5,u+.5,1/o,-1/o,-c,-a[0],-a[1]),g=!this.hitDetectionContext_;g&&(this.hitDetectionContext_=Va(f,f));var v,y=this.hitDetectionContext_;y.canvas.width!==f||y.canvas.height!==f?(y.canvas.width=f,y.canvas.height=f):g||y.clearRect(0,0,f,f),void 0!==this.renderBuffer_&&(Wv(v=[1/0,1/0,-1/0,-1/0],a),jl(v,o*(this.renderBuffer_+u),v));var b,_=function(l){if(void 0!==rF[l])return rF[l];for(var a=2*l+1,o=l*l,c=new Array(o+1),u=0;u<=l;++u)for(var h=0;h<=l;++h){var d=u*u+h*h;if(d>o)break;var f=c[d];f||(c[d]=f=[]),f.push(4*((l+u)*a+(l+h))+3),u>0&&f.push(4*((l-u)*a+(l+h))+3),h>0&&(f.push(4*((l+u)*a+(l-h))+3),u>0&&f.push(4*((l-u)*a+(l-h))+3))}for(var m=[],g=(u=0,c.length);u<g;++u)c[u]&&m.push.apply(m,c[u]);return rF[l]=m,m}(u);function w(W,U){for(var K=y.getImageData(0,0,f,f).data,Q=0,se=_.length;Q<se;Q++)if(K[_[Q]]>0){if(!d||"Image"!==b&&"Text"!==b||-1!==d.indexOf(W)){var te=(_[Q]-3)/4,De=u-te%f,de=u-(te/f|0),ye=h(W,U,De*De+de*de);if(ye)return ye}y.clearRect(0,0,f,f);break}}var E,M,x,R,P,C=Object.keys(this.executorsByZIndex_).map(Number);for(C.sort(jm),E=C.length-1;E>=0;--E){var k=C[E].toString();for(x=this.executorsByZIndex_[k],M=nF.length-1;M>=0;--M)if(void 0!==(R=x[b=nF[M]])&&(P=R.executeHitDetection(y,m,c,w,v)))return P}},l.prototype.getClipCoords=function(a){var o=this.maxExtent_;if(!o)return null;var c=o[0],u=o[1],h=o[2],d=o[3],f=[c,u,c,d,h,d,h,u];return Jf(f,0,8,2,a,f),f},l.prototype.isEmpty=function(){return Zm(this.executorsByZIndex_)},l.prototype.execute=function(a,o,c,u,h,d,f){var m=Object.keys(this.executorsByZIndex_).map(Number);m.sort(jm),this.maxExtent_&&(a.save(),this.clip(a,c));var y,v,_,b,w,C,g=d||nF;for(f&&m.reverse(),y=0,v=m.length;y<v;++y){var E=m[y].toString();for(w=this.executorsByZIndex_[E],_=0,b=g.length;_<b;++_)void 0!==(C=w[g[_]])&&C.execute(a,o,c,u,h,f)}this.maxExtent_&&a.restore()},l}(),rF={};const fM=kwe;var Bwe=function(){var l=function(a,o){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,u){c.__proto__=u}||function(c,u){for(var h in u)Object.prototype.hasOwnProperty.call(u,h)&&(c[h]=u[h])})(a,o)};return function(a,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function c(){this.constructor=a}l(a,o),a.prototype=null===o?Object.create(o):(c.prototype=o.prototype,new c)}}();const sq=function(l){function a(o,c,u,h,d,f,m){var g=l.call(this)||this;return g.context_=o,g.pixelRatio_=c,g.extent_=u,g.transform_=h,g.viewRotation_=d,g.squaredTolerance_=f,g.userTransform_=m,g.contextFillState_=null,g.contextStrokeState_=null,g.contextTextState_=null,g.fillState_=null,g.strokeState_=null,g.image_=null,g.imageAnchorX_=0,g.imageAnchorY_=0,g.imageHeight_=0,g.imageOpacity_=0,g.imageOriginX_=0,g.imageOriginY_=0,g.imageRotateWithView_=!1,g.imageRotation_=0,g.imageScale_=[0,0],g.imageWidth_=0,g.text_="",g.textOffsetX_=0,g.textOffsetY_=0,g.textRotateWithView_=!1,g.textRotation_=0,g.textScale_=[0,0],g.textFillState_=null,g.textStrokeState_=null,g.textState_=null,g.pixelCoordinates_=[],g.tmpLocalTransform_=[1,0,0,1,0,0],g}return Bwe(a,l),a.prototype.drawImages_=function(o,c,u,h){if(this.image_){var d=Jf(o,c,u,h,this.transform_,this.pixelCoordinates_),f=this.context_,m=this.tmpLocalTransform_,g=f.globalAlpha;1!=this.imageOpacity_&&(f.globalAlpha=g*this.imageOpacity_);var y=this.imageRotation_;this.imageRotateWithView_&&(y+=this.viewRotation_);for(var v=0,_=d.length;v<_;v+=2){var b=d[v]-this.imageAnchorX_,w=d[v+1]-this.imageAnchorY_;if(0!==y||1!=this.imageScale_[0]||1!=this.imageScale_[1]){var C=b+this.imageAnchorX_,E=w+this.imageAnchorY_;Fa(m,C,E,1,1,y,-C,-E),f.setTransform.apply(f,m),f.translate(C,E),f.scale(this.imageScale_[0],this.imageScale_[1]),f.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,-this.imageAnchorX_,-this.imageAnchorY_,this.imageWidth_,this.imageHeight_),f.setTransform(1,0,0,1,0,0)}else f.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,b,w,this.imageWidth_,this.imageHeight_)}1!=this.imageOpacity_&&(f.globalAlpha=g)}},a.prototype.drawText_=function(o,c,u,h){if(this.textState_&&""!==this.text_){this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);var d=Jf(o,c,u,h,this.transform_,this.pixelCoordinates_),f=this.context_,m=this.textRotation_;for(this.textRotateWithView_&&(m+=this.viewRotation_);c<u;c+=h){var g=d[c]+this.textOffsetX_,y=d[c+1]+this.textOffsetY_;if(0!==m||1!=this.textScale_[0]||1!=this.textScale_[1]){var v=Fa(this.tmpLocalTransform_,g,y,1,1,m,-g,-y);f.setTransform.apply(f,v),f.translate(g,y),f.scale(this.textScale_[0],this.textScale_[1]),this.textStrokeState_&&f.strokeText(this.text_,0,0),this.textFillState_&&f.fillText(this.text_,0,0),f.setTransform(1,0,0,1,0,0)}else this.textStrokeState_&&f.strokeText(this.text_,g,y),this.textFillState_&&f.fillText(this.text_,g,y)}}},a.prototype.moveToLineTo_=function(o,c,u,h,d){var f=this.context_,m=Jf(o,c,u,h,this.transform_,this.pixelCoordinates_);f.moveTo(m[0],m[1]);var g=m.length;d&&(g-=2);for(var y=2;y<g;y+=2)f.lineTo(m[y],m[y+1]);return d&&f.closePath(),u},a.prototype.drawRings_=function(o,c,u,h){for(var d=0,f=u.length;d<f;++d)c=this.moveToLineTo_(o,c,u[d],h,!0);return c},a.prototype.drawCircle=function(o){if(As(this.extent_,o.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);var c=function(l,a,o){var c=l.getFlatCoordinates();if(c){var u=l.getStride();return Jf(c,0,c.length,u,a,o)}return null}(o,this.transform_,this.pixelCoordinates_),u=c[2]-c[0],h=c[3]-c[1],d=Math.sqrt(u*u+h*h),f=this.context_;f.beginPath(),f.arc(c[0],c[1],d,0,2*Math.PI),this.fillState_&&f.fill(),this.strokeState_&&f.stroke()}""!==this.text_&&this.drawText_(o.getCenter(),0,2,2)}},a.prototype.setStyle=function(o){this.setFillStrokeStyle(o.getFill(),o.getStroke()),this.setImageStyle(o.getImage()),this.setTextStyle(o.getText())},a.prototype.setTransform=function(o){this.transform_=o},a.prototype.drawGeometry=function(o){switch(o.getType()){case"Point":this.drawPoint(o);break;case"LineString":this.drawLineString(o);break;case"Polygon":this.drawPolygon(o);break;case"MultiPoint":this.drawMultiPoint(o);break;case"MultiLineString":this.drawMultiLineString(o);break;case"MultiPolygon":this.drawMultiPolygon(o);break;case"GeometryCollection":this.drawGeometryCollection(o);break;case"Circle":this.drawCircle(o)}},a.prototype.drawFeature=function(o,c){var u=c.getGeometryFunction()(o);!u||!As(this.extent_,u.getExtent())||(this.setStyle(c),this.drawGeometry(u))},a.prototype.drawGeometryCollection=function(o){for(var c=o.getGeometriesArray(),u=0,h=c.length;u<h;++u)this.drawGeometry(c[u])},a.prototype.drawPoint=function(o){this.squaredTolerance_&&(o=o.simplifyTransformed(this.squaredTolerance_,this.userTransform_));var c=o.getFlatCoordinates(),u=o.getStride();this.image_&&this.drawImages_(c,0,c.length,u),""!==this.text_&&this.drawText_(c,0,c.length,u)},a.prototype.drawMultiPoint=function(o){this.squaredTolerance_&&(o=o.simplifyTransformed(this.squaredTolerance_,this.userTransform_));var c=o.getFlatCoordinates(),u=o.getStride();this.image_&&this.drawImages_(c,0,c.length,u),""!==this.text_&&this.drawText_(c,0,c.length,u)},a.prototype.drawLineString=function(o){if(this.squaredTolerance_&&(o=o.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),As(this.extent_,o.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);var c=this.context_,u=o.getFlatCoordinates();c.beginPath(),this.moveToLineTo_(u,0,u.length,o.getStride(),!1),c.stroke()}if(""!==this.text_){var h=o.getFlatMidpoint();this.drawText_(h,0,2,2)}}},a.prototype.drawMultiLineString=function(o){this.squaredTolerance_&&(o=o.simplifyTransformed(this.squaredTolerance_,this.userTransform_));var c=o.getExtent();if(As(this.extent_,c)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);var u=this.context_,h=o.getFlatCoordinates(),d=0,f=o.getEnds(),m=o.getStride();u.beginPath();for(var g=0,y=f.length;g<y;++g)d=this.moveToLineTo_(h,d,f[g],m,!1);u.stroke()}if(""!==this.text_){var v=o.getFlatMidpoints();this.drawText_(v,0,v.length,2)}}},a.prototype.drawPolygon=function(o){if(this.squaredTolerance_&&(o=o.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),As(this.extent_,o.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);var c=this.context_;c.beginPath(),this.drawRings_(o.getOrientedFlatCoordinates(),0,o.getEnds(),o.getStride()),this.fillState_&&c.fill(),this.strokeState_&&c.stroke()}if(""!==this.text_){var u=o.getFlatInteriorPoint();this.drawText_(u,0,2,2)}}},a.prototype.drawMultiPolygon=function(o){if(this.squaredTolerance_&&(o=o.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),As(this.extent_,o.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);var c=this.context_,u=o.getOrientedFlatCoordinates(),h=0,d=o.getEndss(),f=o.getStride();c.beginPath();for(var m=0,g=d.length;m<g;++m)h=this.drawRings_(u,h,d[m],f);this.fillState_&&c.fill(),this.strokeState_&&c.stroke()}if(""!==this.text_){var v=o.getFlatInteriorPoints();this.drawText_(v,0,v.length,2)}}},a.prototype.setContextFillState_=function(o){var c=this.context_,u=this.contextFillState_;u?u.fillStyle!=o.fillStyle&&(u.fillStyle=o.fillStyle,c.fillStyle=o.fillStyle):(c.fillStyle=o.fillStyle,this.contextFillState_={fillStyle:o.fillStyle})},a.prototype.setContextStrokeState_=function(o){var c=this.context_,u=this.contextStrokeState_;u?(u.lineCap!=o.lineCap&&(u.lineCap=o.lineCap,c.lineCap=o.lineCap),c.setLineDash&&(Wm(u.lineDash,o.lineDash)||c.setLineDash(u.lineDash=o.lineDash),u.lineDashOffset!=o.lineDashOffset&&(u.lineDashOffset=o.lineDashOffset,c.lineDashOffset=o.lineDashOffset)),u.lineJoin!=o.lineJoin&&(u.lineJoin=o.lineJoin,c.lineJoin=o.lineJoin),u.lineWidth!=o.lineWidth&&(u.lineWidth=o.lineWidth,c.lineWidth=o.lineWidth),u.miterLimit!=o.miterLimit&&(u.miterLimit=o.miterLimit,c.miterLimit=o.miterLimit),u.strokeStyle!=o.strokeStyle&&(u.strokeStyle=o.strokeStyle,c.strokeStyle=o.strokeStyle)):(c.lineCap=o.lineCap,c.setLineDash&&(c.setLineDash(o.lineDash),c.lineDashOffset=o.lineDashOffset),c.lineJoin=o.lineJoin,c.lineWidth=o.lineWidth,c.miterLimit=o.miterLimit,c.strokeStyle=o.strokeStyle,this.contextStrokeState_={lineCap:o.lineCap,lineDash:o.lineDash,lineDashOffset:o.lineDashOffset,lineJoin:o.lineJoin,lineWidth:o.lineWidth,miterLimit:o.miterLimit,strokeStyle:o.strokeStyle})},a.prototype.setContextTextState_=function(o){var c=this.context_,u=this.contextTextState_,h=o.textAlign?o.textAlign:yT;u?(u.font!=o.font&&(u.font=o.font,c.font=o.font),u.textAlign!=h&&(u.textAlign=h,c.textAlign=h),u.textBaseline!=o.textBaseline&&(u.textBaseline=o.textBaseline,c.textBaseline=o.textBaseline)):(c.font=o.font,c.textAlign=h,c.textBaseline=o.textBaseline,this.contextTextState_={font:o.font,textAlign:h,textBaseline:o.textBaseline})},a.prototype.setFillStrokeStyle=function(o,c){var u=this;if(o){var h=o.getColor();this.fillState_={fillStyle:xh(h||Nd)}}else this.fillState_=null;if(c){var d=c.getColor(),f=c.getLineCap(),m=c.getLineDash(),g=c.getLineDashOffset(),y=c.getLineJoin(),v=c.getWidth(),_=c.getMiterLimit(),b=m||fT;this.strokeState_={lineCap:void 0!==f?f:jE,lineDash:1===this.pixelRatio_?b:b.map(function(w){return w*u.pixelRatio_}),lineDashOffset:(g||0)*this.pixelRatio_,lineJoin:void 0!==y?y:Kv,lineWidth:(void 0!==v?v:1)*this.pixelRatio_,miterLimit:void 0!==_?_:10,strokeStyle:xh(d||gT)}}else this.strokeState_=null},a.prototype.setImageStyle=function(o){var c;if(o&&(c=o.getSize())){var u=o.getAnchor(),h=o.getOrigin();this.image_=o.getImage(this.pixelRatio_),this.imageAnchorX_=u[0]*this.pixelRatio_,this.imageAnchorY_=u[1]*this.pixelRatio_,this.imageHeight_=c[1]*this.pixelRatio_,this.imageOpacity_=o.getOpacity(),this.imageOriginX_=h[0],this.imageOriginY_=h[1],this.imageRotateWithView_=o.getRotateWithView(),this.imageRotation_=o.getRotation(),this.imageScale_=o.getScaleArray(),this.imageWidth_=c[0]*this.pixelRatio_}else this.image_=null},a.prototype.setTextStyle=function(o){if(o){var c=o.getFill();if(c){var u=c.getColor();this.textFillState_={fillStyle:xh(u||Nd)}}else this.textFillState_=null;var h=o.getStroke();if(h){var d=h.getColor(),f=h.getLineCap(),m=h.getLineDash(),g=h.getLineDashOffset(),y=h.getLineJoin(),v=h.getWidth(),_=h.getMiterLimit();this.textStrokeState_={lineCap:void 0!==f?f:jE,lineDash:m||fT,lineDashOffset:g||0,lineJoin:void 0!==y?y:Kv,lineWidth:void 0!==v?v:1,miterLimit:void 0!==_?_:10,strokeStyle:xh(d||gT)}}else this.textStrokeState_=null;var b=o.getFont(),w=o.getOffsetX(),C=o.getOffsetY(),E=o.getRotateWithView(),M=o.getRotation(),x=o.getScaleArray(),R=o.getText(),P=o.getTextAlign(),k=o.getTextBaseline();this.textState_={font:void 0!==b?b:X9,textAlign:void 0!==P?P:yT,textBaseline:void 0!==k?k:WE},this.text_=void 0!==R?R:"",this.textOffsetX_=void 0!==w?this.pixelRatio_*w:0,this.textOffsetY_=void 0!==C?this.pixelRatio_*C:0,this.textRotateWithView_=void 0!==E&&E,this.textRotation_=void 0!==M?M:0,this.textScale_=[this.pixelRatio_*x[0],this.pixelRatio_*x[1]]}else this.text_=""},a}(eq);var Gwe=function(){var l=function(a,o){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,u){c.__proto__=u}||function(c,u){for(var h in u)Object.prototype.hasOwnProperty.call(u,h)&&(c[h]=u[h])})(a,o)};return function(a,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function c(){this.constructor=a}l(a,o),a.prototype=null===o?Object.create(o):(c.prototype=o.prototype,new c)}}();const iF=function(l){function a(o,c,u,h){var d=l.call(this)||this;return d.extent=o,d.pixelRatio_=u,d.resolution=c,d.state=h,d}return Gwe(a,l),a.prototype.changed=function(){this.dispatchEvent("change")},a.prototype.getExtent=function(){return this.extent},a.prototype.getImage=function(){return Gn()},a.prototype.getPixelRatio=function(){return this.pixelRatio_},a.prototype.getResolution=function(){return this.resolution},a.prototype.getState=function(){return this.state},a.prototype.load=function(){Gn()},a}(Yv);var Hwe=function(){var l=function(a,o){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,u){c.__proto__=u}||function(c,u){for(var h in u)Object.prototype.hasOwnProperty.call(u,h)&&(c[h]=u[h])})(a,o)};return function(a,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function c(){this.constructor=a}l(a,o),a.prototype=null===o?Object.create(o):(c.prototype=o.prototype,new c)}}();function sF(l,a,o){var c=l;if(c.src&&ybe){var u=c.decode(),h=!0;return u.then(function(){h&&a()}).catch(function(m){h&&("EncodingError"===m.name&&"Invalid image type."===m.message?a():o())}),function(){h=!1}}var f=[hT(c,"load",a),hT(c,"error",o)];return function(){f.forEach(Ii)}}const oq=function(l){function a(o,c,u,h,d,f){var m=l.call(this,o,c,u,0)||this;return m.src_=h,m.image_=new Image,null!==d&&(m.image_.crossOrigin=d),m.unlisten_=null,m.state=0,m.imageLoadFunction_=f,m}return Hwe(a,l),a.prototype.getImage=function(){return this.image_},a.prototype.handleImageError_=function(){this.state=3,this.unlistenImage_(),this.changed()},a.prototype.handleImageLoad_=function(){void 0===this.resolution&&(this.resolution=bs(this.extent)/this.image_.height),this.state=2,this.unlistenImage_(),this.changed()},a.prototype.load=function(){(0==this.state||3==this.state)&&(this.state=1,this.changed(),this.imageLoadFunction_(this,this.src_),this.unlisten_=sF(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))},a.prototype.setImage=function(o){this.image_=o,this.resolution=bs(this.extent)/this.image_.height},a.prototype.unlistenImage_=function(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)},a}(iF);var Wwe=function(){var l=function(a,o){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,u){c.__proto__=u}||function(c,u){for(var h in u)Object.prototype.hasOwnProperty.call(u,h)&&(c[h]=u[h])})(a,o)};return function(a,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function c(){this.constructor=a}l(a,o),a.prototype=null===o?Object.create(o):(c.prototype=o.prototype,new c)}}(),ET=null,qwe=function(l){function a(o,c,u,h,d,f){var m=l.call(this)||this;return m.hitDetectionImage_=null,m.image_=o||new Image,null!==h&&(m.image_.crossOrigin=h),m.canvas_={},m.color_=f,m.unlisten_=null,m.imageState_=d,m.size_=u,m.src_=c,m}return Wwe(a,l),a.prototype.isTainted_=function(){if(void 0===this.tainted_&&2===this.imageState_){ET||(ET=Va(1,1)),ET.drawImage(this.image_,0,0);try{ET.getImageData(0,0,1,1),this.tainted_=!1}catch(o){ET=null,this.tainted_=!0}}return!0===this.tainted_},a.prototype.dispatchChangeEvent_=function(){this.dispatchEvent("change")},a.prototype.handleImageError_=function(){this.imageState_=3,this.unlistenImage_(),this.dispatchChangeEvent_()},a.prototype.handleImageLoad_=function(){this.imageState_=2,this.size_?(this.image_.width=this.size_[0],this.image_.height=this.size_[1]):this.size_=[this.image_.width,this.image_.height],this.unlistenImage_(),this.dispatchChangeEvent_()},a.prototype.getImage=function(o){return this.replaceColor_(o),this.canvas_[o]?this.canvas_[o]:this.image_},a.prototype.getPixelRatio=function(o){return this.replaceColor_(o),this.canvas_[o]?o:1},a.prototype.getImageState=function(){return this.imageState_},a.prototype.getHitDetectionImage=function(){if(!this.hitDetectionImage_)if(this.isTainted_()){var o=this.size_[0],c=this.size_[1],u=Va(o,c);u.fillRect(0,0,o,c),this.hitDetectionImage_=u.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_},a.prototype.getSize=function(){return this.size_},a.prototype.getSrc=function(){return this.src_},a.prototype.load=function(){if(0==this.imageState_){this.imageState_=1;try{this.image_.src=this.src_}catch(o){this.handleImageError_()}this.unlisten_=sF(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this))}},a.prototype.replaceColor_=function(o){if(this.color_&&!this.canvas_[o]){var c=document.createElement("canvas");this.canvas_[o]=c,c.width=Math.ceil(this.image_.width*o),c.height=Math.ceil(this.image_.height*o);var u=c.getContext("2d");if(u.scale(o,o),u.drawImage(this.image_,0,0),u.globalCompositeOperation="multiply","multiply"===u.globalCompositeOperation||this.isTainted_())u.fillStyle=M9(this.color_),u.fillRect(0,0,c.width/o,c.height/o),u.globalCompositeOperation="destination-in",u.drawImage(this.image_,0,0);else{for(var h=u.getImageData(0,0,c.width,c.height),d=h.data,f=this.color_[0]/255,m=this.color_[1]/255,g=this.color_[2]/255,y=this.color_[3],v=0,_=d.length;v<_;v+=4)d[v]*=f,d[v+1]*=m,d[v+2]*=g,d[v+3]*=y;u.putImageData(h,0,0)}}},a.prototype.unlistenImage_=function(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)},a}(Yv),$we=function(){var l=function(a,o){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,u){c.__proto__=u}||function(c,u){for(var h in u)Object.prototype.hasOwnProperty.call(u,h)&&(c[h]=u[h])})(a,o)};return function(a,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function c(){this.constructor=a}l(a,o),a.prototype=null===o?Object.create(o):(c.prototype=o.prototype,new c)}}();const MT=function(l){function a(o){var c=this,u=o||{};(c=l.call(this,{opacity:void 0!==u.opacity?u.opacity:1,rotation:void 0!==u.rotation?u.rotation:0,scale:void 0!==u.scale?u.scale:1,displacement:void 0!==u.displacement?u.displacement:[0,0],rotateWithView:void 0!==u.rotateWithView&&u.rotateWithView})||this).anchor_=void 0!==u.anchor?u.anchor:[.5,.5],c.normalizedAnchor_=null,c.anchorOrigin_=void 0!==u.anchorOrigin?u.anchorOrigin:"top-left",c.anchorXUnits_=void 0!==u.anchorXUnits?u.anchorXUnits:"fraction",c.anchorYUnits_=void 0!==u.anchorYUnits?u.anchorYUnits:"fraction",c.crossOrigin_=void 0!==u.crossOrigin?u.crossOrigin:null;var g=void 0!==u.img?u.img:null,y=void 0!==u.imgSize?u.imgSize:null,v=u.src;Yn(!(void 0!==v&&g),4),Yn(!g||g&&y,5),(void 0===v||0===v.length)&&g&&(v=g.src||Dn(g)),Yn(void 0!==v&&v.length>0,6);var _=void 0!==u.src?0:2;return c.color_=void 0!==u.color?uN(u.color):null,c.iconImage_=function(l,a,o,c,u,h){var d=kE.get(a,c,h);return d||(d=new qwe(l,a,o,c,u,h),kE.set(a,c,h,d)),d}(g,v,y,c.crossOrigin_,_,c.color_),c.offset_=void 0!==u.offset?u.offset:[0,0],c.offsetOrigin_=void 0!==u.offsetOrigin?u.offsetOrigin:"top-left",c.origin_=null,c.size_=void 0!==u.size?u.size:null,c}return $we(a,l),a.prototype.clone=function(){var o=this.getScale();return new a({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,crossOrigin:this.crossOrigin_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,src:this.getSrc(),offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,size:null!==this.size_?this.size_.slice():void 0,opacity:this.getOpacity(),scale:Array.isArray(o)?o.slice():o,rotation:this.getRotation(),rotateWithView:this.getRotateWithView()})},a.prototype.getAnchor=function(){if(this.normalizedAnchor_)return this.normalizedAnchor_;var o=this.anchor_,c=this.getSize();if("fraction"==this.anchorXUnits_||"fraction"==this.anchorYUnits_){if(!c)return null;o=this.anchor_.slice(),"fraction"==this.anchorXUnits_&&(o[0]*=c[0]),"fraction"==this.anchorYUnits_&&(o[1]*=c[1])}if("top-left"!=this.anchorOrigin_){if(!c)return null;o===this.anchor_&&(o=this.anchor_.slice()),("top-right"==this.anchorOrigin_||"bottom-right"==this.anchorOrigin_)&&(o[0]=-o[0]+c[0]),("bottom-left"==this.anchorOrigin_||"bottom-right"==this.anchorOrigin_)&&(o[1]=-o[1]+c[1])}var u=this.getDisplacement();return o[0]-=u[0],o[1]+=u[1],this.normalizedAnchor_=o,this.normalizedAnchor_},a.prototype.setAnchor=function(o){this.anchor_=o,this.normalizedAnchor_=null},a.prototype.getColor=function(){return this.color_},a.prototype.getImage=function(o){return this.iconImage_.getImage(o)},a.prototype.getPixelRatio=function(o){return this.iconImage_.getPixelRatio(o)},a.prototype.getImageSize=function(){return this.iconImage_.getSize()},a.prototype.getImageState=function(){return this.iconImage_.getImageState()},a.prototype.getHitDetectionImage=function(){return this.iconImage_.getHitDetectionImage()},a.prototype.getOrigin=function(){if(this.origin_)return this.origin_;var o=this.offset_;if("top-left"!=this.offsetOrigin_){var c=this.getSize(),u=this.iconImage_.getSize();if(!c||!u)return null;o=o.slice(),("top-right"==this.offsetOrigin_||"bottom-right"==this.offsetOrigin_)&&(o[0]=u[0]-c[0]-o[0]),("bottom-left"==this.offsetOrigin_||"bottom-right"==this.offsetOrigin_)&&(o[1]=u[1]-c[1]-o[1])}return this.origin_=o,this.origin_},a.prototype.getSrc=function(){return this.iconImage_.getSrc()},a.prototype.getSize=function(){return this.size_?this.size_:this.iconImage_.getSize()},a.prototype.listenImageChange=function(o){this.iconImage_.addEventListener("change",o)},a.prototype.load=function(){this.iconImage_.load()},a.prototype.unlistenImageChange=function(o){this.iconImage_.removeEventListener("change",o)},a}(HW);var Xl=.5;function aq(l,a,o,c,u,h,d){var g=Va(l[0]*Xl,l[1]*Xl);g.imageSmoothingEnabled=!1;for(var y=g.canvas,v=new sq(g,Xl,u,null,d),_=o.length,b=Math.floor(16777215/_),w={},C=1;C<=_;++C){var E=o[C-1],M=E.getStyleFunction()||c;if(c){var x=M(E,h);if(x){Array.isArray(x)||(x=[x]);for(var P="#"+("000000"+(C*b).toString(16)).slice(-6),k=0,W=x.length;k<W;++k){var U=x[k],K=U.getGeometryFunction()(E);if(K&&As(u,K.getExtent())){var Q=U.clone(),se=Q.getFill();se&&se.setColor(P);var te=Q.getStroke();te&&(te.setColor(P),te.setLineDash(null)),Q.setText(void 0);var De=U.getImage();if(De&&0!==De.getOpacity()){var de=De.getImageSize();if(!de)continue;var ye=Va(de[0],de[1],void 0,{alpha:!1}),_e=ye.canvas;ye.fillStyle=P,ye.fillRect(0,0,_e.width,_e.height),Q.setImage(new MT({img:_e,imgSize:de,anchor:De.getAnchor(),anchorXUnits:"pixels",anchorYUnits:"pixels",offset:De.getOrigin(),opacity:1,size:De.getSize(),scale:De.getScale(),rotation:De.getRotation(),rotateWithView:De.getRotateWithView()}))}var ue=Q.getZIndex()||0;(ce=w[ue])||(w[ue]=ce={},ce.Polygon=[],ce.Circle=[],ce.LineString=[],ce.Point=[]),ce[K.getType().replace("Multi","")].push(K,Q)}}}}}for(var Re=Object.keys(w).map(Number).sort(jm),Oe=(C=0,Re.length);C<Oe;++C){var ce=w[Re[C]];for(var Ae in ce){var We=ce[Ae];for(k=0,W=We.length;k<W;k+=2){v.setStyle(We[k+1]);for(var Te=0,He=a.length;Te<He;++Te)v.setTransform(a[Te]),v.drawGeometry(We[k])}}}return g.getImageData(0,0,y.width,y.height)}function lq(l,a,o){var c=[];if(o){var u=Math.floor(Math.round(l[0])*Xl),h=Math.floor(Math.round(l[1])*Xl),d=4*(br(u,0,o.width-1)+br(h,0,o.height-1)*o.width),y=o.data[d+2]+256*(o.data[d+1]+256*o.data[d]),v=Math.floor(16777215/a.length);y&&y%v==0&&c.push(a[y/v-1])}return c}var cq={Point:function(l,a,o,c,u){var f,h=o.getImage(),d=o.getText();if(u&&(l=u,f=h&&d&&d.getText()?{}:void 0),h){if(2!=h.getImageState())return;var m=l.getBuilder(o.getZIndex(),"Image");m.setImageStyle(h,f),m.drawPoint(a,c)}if(d&&d.getText()){var g=l.getBuilder(o.getZIndex(),"Text");g.setTextStyle(d,f),g.drawText(a,c)}},LineString:function(l,a,o,c,u){var h=o.getStroke();if(h){var d=l.getBuilder(o.getZIndex(),"LineString");d.setFillStrokeStyle(null,h),d.drawLineString(a,c)}var f=o.getText();if(f&&f.getText()){var m=(u||l).getBuilder(o.getZIndex(),"Text");m.setTextStyle(f),m.drawText(a,c)}},Polygon:function(l,a,o,c,u){var h=o.getFill(),d=o.getStroke();if(h||d){var f=l.getBuilder(o.getZIndex(),"Polygon");f.setFillStrokeStyle(h,d),f.drawPolygon(a,c)}var m=o.getText();if(m&&m.getText()){var g=(u||l).getBuilder(o.getZIndex(),"Text");g.setTextStyle(m),g.drawText(a,c)}},MultiPoint:function(l,a,o,c,u){var f,h=o.getImage(),d=o.getText();if(u&&(l=u,f=h&&d&&d.getText()?{}:void 0),h){if(2!=h.getImageState())return;var m=l.getBuilder(o.getZIndex(),"Image");m.setImageStyle(h,f),m.drawMultiPoint(a,c)}if(d&&d.getText()){var g=(u||l).getBuilder(o.getZIndex(),"Text");g.setTextStyle(d,f),g.drawText(a,c)}},MultiLineString:function(l,a,o,c,u){var h=o.getStroke();if(h){var d=l.getBuilder(o.getZIndex(),"LineString");d.setFillStrokeStyle(null,h),d.drawMultiLineString(a,c)}var f=o.getText();if(f&&f.getText()){var m=(u||l).getBuilder(o.getZIndex(),"Text");m.setTextStyle(f),m.drawText(a,c)}},MultiPolygon:function(l,a,o,c,u){var h=o.getFill(),d=o.getStroke();if(d||h){var f=l.getBuilder(o.getZIndex(),"Polygon");f.setFillStrokeStyle(h,d),f.drawMultiPolygon(a,c)}var m=o.getText();if(m&&m.getText()){var g=(u||l).getBuilder(o.getZIndex(),"Text");g.setTextStyle(m),g.drawText(a,c)}},GeometryCollection:function(l,a,o,c,u){var d,f,h=a.getGeometriesArray();for(d=0,f=h.length;d<f;++d)(0,cq[h[d].getType()])(l,h[d],o,c,u)},Circle:function(l,a,o,c,u){var h=o.getFill(),d=o.getStroke();if(h||d){var f=l.getBuilder(o.getZIndex(),"Circle");f.setFillStrokeStyle(h,d),f.drawCircle(a,c)}var m=o.getText();if(m&&m.getText()){var g=(u||l).getBuilder(o.getZIndex(),"Text");g.setTextStyle(m),g.drawText(a,c)}}};function Kwe(l,a){return parseInt(Dn(l),10)-parseInt(Dn(a),10)}function oF(l,a){var o=aF(l,a);return o*o}function aF(l,a){return.5*l/a}function pM(l,a,o,c,u,h,d){var f=!1,m=o.getImage();if(m){var g=m.getImageState();2==g||3==g?m.unlistenImageChange(u):(0==g&&m.load(),g=m.getImageState(),m.listenImageChange(u),f=!0)}return function(l,a,o,c,u,h){var d=o.getGeometryFunction()(a);if(d){var f=d.simplifyTransformed(c,u);o.getRenderer()?uq(l,f,o,a):(0,cq[f.getType()])(l,f,o,a,h)}}(l,a,o,c,h,d),f}function uq(l,a,o,c){if("GeometryCollection"!=a.getType())l.getBuilder(o.getZIndex(),"Default").drawCustom(a,c,o.getRenderer());else for(var u=a.getGeometries(),h=0,d=u.length;h<d;++h)uq(l,u[h],o,c)}var aCe=function(){var l=function(a,o){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,u){c.__proto__=u}||function(c,u){for(var h in u)Object.prototype.hasOwnProperty.call(u,h)&&(c[h]=u[h])})(a,o)};return function(a,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function c(){this.constructor=a}l(a,o),a.prototype=null===o?Object.create(o):(c.prototype=o.prototype,new c)}}();const lF=function(l){function a(o){var c=l.call(this,o)||this;return c.boundHandleStyleImageChange_=c.handleStyleImageChange_.bind(c),c.dirty_=!1,c.hitDetectionImageData_=null,c.renderedFeatures_=null,c.renderedRevision_=-1,c.renderedResolution_=NaN,c.renderedExtent_=[1/0,1/0,-1/0,-1/0],c.wrappedRenderedExtent_=[1/0,1/0,-1/0,-1/0],c.renderedCenter_=null,c.renderedProjection_=null,c.renderedRenderOrder_=null,c.replayGroup_=null,c.replayGroupChanged=!0,c.declutterExecutorGroup=null,c.clipping=!0,c}return aCe(a,l),a.prototype.useContainer=function(o,c,u){u<1&&(o=null),l.prototype.useContainer.call(this,o,c,u)},a.prototype.renderWorlds=function(o,c,u){var h=c.extent,d=c.viewState,f=d.center,m=d.resolution,g=d.projection,y=d.rotation,v=g.getExtent(),_=this.getLayer().getSource(),b=c.pixelRatio,w=c.viewHints,C=!(w[0]||w[1]),E=this.context,M=Math.round(c.size[0]*b),x=Math.round(c.size[1]*b),R=_.getWrapX()&&g.canWrapX(),P=R?Wr(v):null,k=R?Math.ceil((h[2]-v[2])/P)+1:1,W=R?Math.floor((h[0]-v[0])/P):0;do{var U=this.getRenderTransform(f,m,y,b,M,x,W*P);o.execute(E,1,U,y,C,void 0,u)}while(++W<k)},a.prototype.renderDeclutter=function(o){this.declutterExecutorGroup&&this.renderWorlds(this.declutterExecutorGroup,o,o.declutterTree)},a.prototype.renderFrame=function(o,c){var u=o.pixelRatio,h=o.layerStatesArray[o.layerIndex];(function(l,a,o){oT(l,a,0,0,o,0,0)})(this.pixelTransform,1/u,1/u),jv(this.inversePixelTransform,this.pixelTransform);var d=LE(this.pixelTransform);this.useContainer(c,d,h.opacity);var f=this.context,m=f.canvas,g=this.replayGroup_,y=this.declutterExecutorGroup;if((!g||g.isEmpty())&&(!y||y.isEmpty()))return null;var v=Math.round(o.size[0]*u),_=Math.round(o.size[1]*u);m.width!=v||m.height!=_?(m.width=v,m.height=_,m.style.transform!==d&&(m.style.transform=d)):this.containerReused||f.clearRect(0,0,v,_),this.preRender(f,o);var b=o.viewState,C=!1,E=!0;if(h.extent&&this.clipping){var M=Vd(h.extent);(C=(E=As(M,o.extent))&&!pl(M,o.extent))&&this.clipUnrotated(f,o,M)}E&&this.renderWorlds(g,o),C&&f.restore(),this.postRender(f,o);var x=gN(h.opacity),R=this.container;return x!==R.style.opacity&&(R.style.opacity=x),this.renderedRotation_!==b.rotation&&(this.renderedRotation_=b.rotation,this.hitDetectionImageData_=null),this.container},a.prototype.getFeatures=function(o){return new Promise(function(c){if(!this.hitDetectionImageData_&&!this.animatingOrInteracting_){var u=[this.context.canvas.width,this.context.canvas.height];ts(this.pixelTransform,u);var h=this.renderedCenter_,d=this.renderedResolution_,f=this.renderedRotation_,m=this.renderedProjection_,g=this.wrappedRenderedExtent_,y=this.getLayer(),v=[],_=u[0]*Xl,b=u[1]*Xl;v.push(this.getRenderTransform(h,d,f,Xl,_,b,0).slice());var w=y.getSource(),C=m.getExtent();if(w.getWrapX()&&m.canWrapX()&&!pl(C,g)){for(var E=g[0],M=Wr(C),x=0;E<C[0];)--x,v.push(this.getRenderTransform(h,d,f,Xl,_,b,M*x).slice()),E+=M;for(x=0,E=g[2];E>C[2];)++x,v.push(this.getRenderTransform(h,d,f,Xl,_,b,M*x).slice()),E-=M}this.hitDetectionImageData_=aq(u,v,this.renderedFeatures_,y.getStyleFunction(),g,d,f)}c(lq(o,this.renderedFeatures_,this.hitDetectionImageData_))}.bind(this))},a.prototype.forEachFeatureAtCoordinate=function(o,c,u,h,d){var f=this;if(this.replayGroup_){var b,m=c.viewState.resolution,g=c.viewState.rotation,y=this.getLayer(),v={},_=function(C,E,M){var x=Dn(C),R=v[x];if(R){if(!0!==R&&M<R.distanceSq){if(0===M)return v[x]=!0,d.splice(d.lastIndexOf(R),1),h(C,y,E);R.geometry=E,R.distanceSq=M}}else{if(0===M)return v[x]=!0,h(C,y,E);d.push(v[x]={feature:C,layer:y,geometry:E,distanceSq:M,callback:h})}},w=[this.replayGroup_];return this.declutterExecutorGroup&&w.push(this.declutterExecutorGroup),w.some(function(C){return b=C.forEachFeatureAtCoordinate(o,m,g,u,_,C===f.declutterExecutorGroup?c.declutterTree.all().map(function(E){return E.value}):null)}),b}},a.prototype.handleFontsChanged=function(){var o=this.getLayer();o.getVisible()&&this.replayGroup_&&o.changed()},a.prototype.handleStyleImageChange_=function(o){this.renderIfReadyAndVisible()},a.prototype.prepareFrame=function(o){var c=this.getLayer(),u=c.getSource();if(!u)return!1;var h=o.viewHints[0],d=o.viewHints[1],f=c.getUpdateWhileAnimating(),m=c.getUpdateWhileInteracting();if(!this.dirty_&&!f&&h||!m&&d)return this.animatingOrInteracting_=!0,!0;this.animatingOrInteracting_=!1;var g=o.extent,y=o.viewState,v=y.projection,_=y.resolution,b=o.pixelRatio,w=c.getRevision(),C=c.getRenderBuffer(),E=c.getRenderOrder();void 0===E&&(E=Kwe);var M=y.center.slice(),x=jl(g,C*_),R=x.slice(),P=[x.slice()],k=v.getExtent();if(u.getWrapX()&&v.canWrapX()&&!pl(k,o.extent)){var W=Wr(k),U=Math.max(Wr(x)/2,W);x[0]=k[0]-U,x[2]=k[2]+U,pN(M,v);var K=w9(P[0],v);K[0]<k[0]&&K[2]<k[2]?P.push([K[0]+W,K[1],K[2]+W,K[3]]):K[0]>k[0]&&K[2]>k[2]&&P.push([K[0]-W,K[1],K[2]-W,K[3]])}if(!this.dirty_&&this.renderedResolution_==_&&this.renderedRevision_==w&&this.renderedRenderOrder_==E&&pl(this.wrappedRenderedExtent_,x))return Wm(this.renderedExtent_,R)||(this.hitDetectionImageData_=null,this.renderedExtent_=R),this.renderedCenter_=M,this.replayGroupChanged=!1,!0;this.replayGroup_=null,this.dirty_=!1;var se,Q=new dM(aF(_,b),x,_,b);this.getLayer().getDeclutter()&&(se=new dM(aF(_,b),x,_,b));var De,te=nM();if(te){for(var de=0,ye=P.length;de<ye;++de){var ue=AN(P[de]);u.loadFeatures(ue,XSe(_),te)}De=Kf(te,v)}else for(de=0,ye=P.length;de<ye;++de)u.loadFeatures(P[de],_,v);var ce=oF(_,b),Re=function(He){var Ue,ct=He.getStyleFunction()||c.getStyleFunction();if(ct&&(Ue=ct(He,_)),Ue){var Ce=this.renderFeature(He,ce,Ue,Q,De,se);this.dirty_=this.dirty_||Ce}}.bind(this),Oe=AN(x),Ae=u.getFeaturesInExtent(Oe);for(E&&Ae.sort(E),de=0,ye=Ae.length;de<ye;++de)Re(Ae[de]);this.renderedFeatures_=Ae;var We=Q.finish(),Te=new fM(x,_,b,u.getOverlaps(),We,c.getRenderBuffer());return se&&(this.declutterExecutorGroup=new fM(x,_,b,u.getOverlaps(),se.finish(),c.getRenderBuffer())),this.renderedResolution_=_,this.renderedRevision_=w,this.renderedRenderOrder_=E,this.renderedExtent_=R,this.wrappedRenderedExtent_=x,this.renderedCenter_=M,this.renderedProjection_=v,this.replayGroup_=Te,this.hitDetectionImageData_=null,this.replayGroupChanged=!0,!0},a.prototype.renderFeature=function(o,c,u,h,d,f){if(!u)return!1;var m=!1;if(Array.isArray(u))for(var g=0,y=u.length;g<y;++g)m=pM(h,o,u[g],c,this.boundHandleStyleImageChange_,d,f)||m;else m=pM(h,o,u,c,this.boundHandleStyleImageChange_,d,f);return m},a}(eF);var cCe=function(){var l=function(a,o){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,u){c.__proto__=u}||function(c,u){for(var h in u)Object.prototype.hasOwnProperty.call(u,h)&&(c[h]=u[h])})(a,o)};return function(a,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function c(){this.constructor=a}l(a,o),a.prototype=null===o?Object.create(o):(c.prototype=o.prototype,new c)}}();const Tu=function(l){function a(o){return l.call(this,o)||this}return cCe(a,l),a.prototype.createRenderer=function(){return new lF(this)},a}(s_);var hCe=function(){var l=function(a,o){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,u){c.__proto__=u}||function(c,u){for(var h in u)Object.prototype.hasOwnProperty.call(u,h)&&(c[h]=u[h])})(a,o)};return function(a,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function c(){this.constructor=a}l(a,o),a.prototype=null===o?Object.create(o):(c.prototype=o.prototype,new c)}}();const mM=function(l){function a(o,c,u){var h=l.call(this)||this,d=u||{};return h.tileCoord=o,h.state=c,h.interimTile=null,h.key="",h.transition_=void 0===d.transition?250:d.transition,h.transitionStarts_={},h}return hCe(a,l),a.prototype.changed=function(){this.dispatchEvent("change")},a.prototype.release=function(){},a.prototype.getKey=function(){return this.key+"/"+this.tileCoord},a.prototype.getInterimTile=function(){if(!this.interimTile)return this;var o=this.interimTile;do{if(2==o.getState())return this.transition_=0,o;o=o.interimTile}while(o);return this},a.prototype.refreshInterimChain=function(){if(this.interimTile){var o=this.interimTile,c=this;do{if(2==o.getState()){o.interimTile=null;break}1==o.getState()?c=o:0==o.getState()?c.interimTile=o.interimTile:c=o,o=c.interimTile}while(o)}},a.prototype.getTileCoord=function(){return this.tileCoord},a.prototype.getState=function(){return this.state},a.prototype.setState=function(o){if(3!==this.state&&this.state>o)throw new Error("Tile load sequence violation");this.state=o,this.changed()},a.prototype.load=function(){Gn()},a.prototype.getAlpha=function(o,c){if(!this.transition_)return 1;var u=this.transitionStarts_[o];if(u){if(-1===u)return 1}else this.transitionStarts_[o]=u=c;var h=c-u+1e3/60;return h>=this.transition_?1:uW(h/this.transition_)},a.prototype.inTransition=function(o){return!!this.transition_&&-1!==this.transitionStarts_[o]},a.prototype.endTransition=function(o){this.transition_&&(this.transitionStarts_[o]=-1)},a}(Yv);var fCe=function(){var l=function(a,o){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,u){c.__proto__=u}||function(c,u){for(var h in u)Object.prototype.hasOwnProperty.call(u,h)&&(c[h]=u[h])})(a,o)};return function(a,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function c(){this.constructor=a}l(a,o),a.prototype=null===o?Object.create(o):(c.prototype=o.prototype,new c)}}();const mCe=function(l){function a(o,c,u,h,d,f){var m=l.call(this,o,c,f)||this;return m.extent=null,m.format_=h,m.features_=null,m.projection=null,m.tileLoadFunction_=d,m.url_=u,m.key=u,m}return fCe(a,l),a.prototype.getFormat=function(){return this.format_},a.prototype.getFeatures=function(){return this.features_},a.prototype.load=function(){0==this.state&&(this.setState(1),this.tileLoadFunction_(this,this.url_),this.loader_&&this.loader_(this.extent,this.resolution,this.projection))},a.prototype.onLoad=function(o,c){this.setFeatures(o)},a.prototype.onError=function(){this.setState(3)},a.prototype.setFeatures=function(o){this.features_=o,this.setState(2)},a.prototype.setLoader=function(o){this.loader_=o},a}(mM),yCe=function(){function l(a){this.highWaterMark=void 0!==a?a:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}return l.prototype.canExpireCache=function(){return this.highWaterMark>0&&this.getCount()>this.highWaterMark},l.prototype.clear=function(){this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null},l.prototype.containsKey=function(a){return this.entries_.hasOwnProperty(a)},l.prototype.forEach=function(a){for(var o=this.oldest_;o;)a(o.value_,o.key_,this),o=o.newer},l.prototype.get=function(a,o){var c=this.entries_[a];return Yn(void 0!==c,15),c===this.newest_||(c===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(c.newer.older=c.older,c.older.newer=c.newer),c.newer=null,c.older=this.newest_,this.newest_.newer=c,this.newest_=c),c.value_},l.prototype.remove=function(a){var o=this.entries_[a];return Yn(void 0!==o,15),o===this.newest_?(this.newest_=o.older,this.newest_&&(this.newest_.newer=null)):o===this.oldest_?(this.oldest_=o.newer,this.oldest_&&(this.oldest_.older=null)):(o.newer.older=o.older,o.older.newer=o.newer),delete this.entries_[a],--this.count_,o.value_},l.prototype.getCount=function(){return this.count_},l.prototype.getKeys=function(){var c,a=new Array(this.count_),o=0;for(c=this.newest_;c;c=c.older)a[o++]=c.key_;return a},l.prototype.getValues=function(){var c,a=new Array(this.count_),o=0;for(c=this.newest_;c;c=c.older)a[o++]=c.value_;return a},l.prototype.peekLast=function(){return this.oldest_.value_},l.prototype.peekLastKey=function(){return this.oldest_.key_},l.prototype.peekFirstKey=function(){return this.newest_.key_},l.prototype.pop=function(){var a=this.oldest_;return delete this.entries_[a.key_],a.newer&&(a.newer.older=null),this.oldest_=a.newer,this.oldest_||(this.newest_=null),--this.count_,a.value_},l.prototype.replace=function(a,o){this.get(a),this.entries_[a].value_=o},l.prototype.set=function(a,o){Yn(!(a in this.entries_),16);var c={key_:a,newer:null,older:this.newest_,value_:o};this.newest_?this.newest_.newer=c:this.oldest_=c,this.newest_=c,this.entries_[a]=c,++this.count_},l.prototype.setSize=function(a){this.highWaterMark=a},l}();function hq(l,a,o,c){return void 0!==c?(c[0]=l,c[1]=a,c[2]=o,c):[l,a,o]}function c_(l,a,o){return l+"/"+a+"/"+o}function dq(l){return c_(l[0],l[1],l[2])}function fq(l){return l.split("/").map(Number)}function pq(l){return(l[1]<<l[0])+l[2]}var bCe=function(){var l=function(a,o){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,u){c.__proto__=u}||function(c,u){for(var h in u)Object.prototype.hasOwnProperty.call(u,h)&&(c[h]=u[h])})(a,o)};return function(a,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function c(){this.constructor=a}l(a,o),a.prototype=null===o?Object.create(o):(c.prototype=o.prototype,new c)}}();const cF=function(l){function a(){return null!==l&&l.apply(this,arguments)||this}return bCe(a,l),a.prototype.expireCache=function(o){for(;this.canExpireCache()&&!(this.peekLast().getKey()in o);)this.pop().release()},a.prototype.pruneExceptNewestZ=function(){if(0!==this.getCount()){var u=fq(this.peekFirstKey())[0];this.forEach(function(h){h.tileCoord[0]!==u&&(this.remove(dq(h.tileCoord)),h.release())}.bind(this))}},a}(yCe);var TCe=function(){var l=function(a,o){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,u){c.__proto__=u}||function(c,u){for(var h in u)Object.prototype.hasOwnProperty.call(u,h)&&(c[h]=u[h])})(a,o)};return function(a,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function c(){this.constructor=a}l(a,o),a.prototype=null===o?Object.create(o):(c.prototype=o.prototype,new c)}}();function mq(l){return l?Array.isArray(l)?function(a){return l}:"function"==typeof l?l:function(a){return[l]}:null}const hF=function(l){function a(o){var c=l.call(this)||this;c.projection=Bn(o.projection),c.attributions_=mq(o.attributions),c.attributionsCollapsible_=void 0===o.attributionsCollapsible||o.attributionsCollapsible,c.loading=!1,c.state_=void 0!==o.state?o.state:"ready",c.wrapX_=void 0!==o.wrapX&&o.wrapX,c.viewResolver=null,c.viewRejector=null;var u=c;return c.viewPromise_=new Promise(function(h,d){u.viewResolver=h,u.viewRejector=d}),c}return TCe(a,l),a.prototype.getAttributions=function(){return this.attributions_},a.prototype.getAttributionsCollapsible=function(){return this.attributionsCollapsible_},a.prototype.getProjection=function(){return this.projection},a.prototype.getResolutions=function(){return Gn()},a.prototype.getView=function(){return this.viewPromise_},a.prototype.getState=function(){return this.state_},a.prototype.getWrapX=function(){return this.wrapX_},a.prototype.getContextOptions=function(){},a.prototype.refresh=function(){this.changed()},a.prototype.setAttributions=function(o){this.attributions_=mq(o),this.changed()},a.prototype.setState=function(o){this.state_=o,this.changed()},a}(yu);var CCe=[0,0,0];const gM=function(){function l(a){var o;if(this.minZoom=void 0!==a.minZoom?a.minZoom:0,this.resolutions_=a.resolutions,Yn(function(l,a,o){var c=function(d,f){return f-d}||jm;return l.every(function(u,h){if(0===h)return!0;var d=c(l[h-1],u);return!(d>0||0===d)})}(this.resolutions_),17),!a.origins)for(var c=0,u=this.resolutions_.length-1;c<u;++c)if(o){if(this.resolutions_[c]/this.resolutions_[c+1]!==o){o=void 0;break}}else o=this.resolutions_[c]/this.resolutions_[c+1];this.zoomFactor_=o,this.maxZoom=this.resolutions_.length-1,this.origin_=void 0!==a.origin?a.origin:null,this.origins_=null,void 0!==a.origins&&(this.origins_=a.origins,Yn(this.origins_.length==this.resolutions_.length,20));var h=a.extent;void 0!==h&&!this.origin_&&!this.origins_&&(this.origin_=_h(h)),Yn(!this.origin_&&this.origins_||this.origin_&&!this.origins_,18),this.tileSizes_=null,void 0!==a.tileSizes&&(this.tileSizes_=a.tileSizes,Yn(this.tileSizes_.length==this.resolutions_.length,19)),this.tileSize_=void 0!==a.tileSize?a.tileSize:this.tileSizes_?null:256,Yn(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,22),this.extent_=void 0!==h?h:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],this.tmpExtent_=[0,0,0,0],void 0!==a.sizes?this.fullTileRanges_=a.sizes.map(function(d,f){var m=new ZW(Math.min(0,d[0]),Math.max(d[0]-1,-1),Math.min(0,d[1]),Math.max(d[1]-1,-1));if(h){var g=this.getTileRangeForExtentAndZ(h,f);m.minX=Math.max(g.minX,m.minX),m.maxX=Math.min(g.maxX,m.maxX),m.minY=Math.max(g.minY,m.minY),m.maxY=Math.min(g.maxY,m.maxY)}return m},this):h&&this.calculateTileRanges_(h)}return l.prototype.forEachTileCoord=function(a,o,c){for(var u=this.getTileRangeForExtentAndZ(a,o),h=u.minX,d=u.maxX;h<=d;++h)for(var f=u.minY,m=u.maxY;f<=m;++f)c([o,h,f])},l.prototype.forEachTileCoordParentTileRange=function(a,o,c,u){var d,f,m=null,g=a[0]-1;for(2===this.zoomFactor_?(d=a[1],f=a[2]):m=this.getTileCoordExtent(a,u);g>=this.minZoom;){if(o(g,2===this.zoomFactor_?a_(d=Math.floor(d/2),d,f=Math.floor(f/2),f,c):this.getTileRangeForExtentAndZ(m,g,c)))return!0;--g}return!1},l.prototype.getExtent=function(){return this.extent_},l.prototype.getMaxZoom=function(){return this.maxZoom},l.prototype.getMinZoom=function(){return this.minZoom},l.prototype.getOrigin=function(a){return this.origin_?this.origin_:this.origins_[a]},l.prototype.getResolution=function(a){return this.resolutions_[a]},l.prototype.getResolutions=function(){return this.resolutions_},l.prototype.getTileCoordChildTileRange=function(a,o,c){if(a[0]<this.maxZoom){if(2===this.zoomFactor_){var u=2*a[1],h=2*a[2];return a_(u,u+1,h,h+1,o)}var d=this.getTileCoordExtent(a,c||this.tmpExtent_);return this.getTileRangeForExtentAndZ(d,a[0]+1,o)}return null},l.prototype.getTileRangeForTileCoordAndZ=function(a,o,c){if(o>this.maxZoom||o<this.minZoom)return null;var u=a[0],h=a[1],d=a[2];if(o===u)return a_(h,d,h,d,c);if(this.zoomFactor_){var f=Math.pow(this.zoomFactor_,o-u),m=Math.floor(h*f),g=Math.floor(d*f);return o<u?a_(m,m,g,g,c):a_(m,Math.floor(f*(h+1))-1,g,Math.floor(f*(d+1))-1,c)}var _=this.getTileCoordExtent(a,this.tmpExtent_);return this.getTileRangeForExtentAndZ(_,o,c)},l.prototype.getTileRangeExtent=function(a,o,c){var u=this.getOrigin(a),h=this.getResolution(a),d=ga(this.getTileSize(a),this.tmpSize_);return yh(u[0]+o.minX*d[0]*h,u[1]+o.minY*d[1]*h,u[0]+(o.maxX+1)*d[0]*h,u[1]+(o.maxY+1)*d[1]*h,c)},l.prototype.getTileRangeForExtentAndZ=function(a,o,c){var u=CCe;this.getTileCoordForXYAndZ_(a[0],a[3],o,!1,u);var h=u[1],d=u[2];return this.getTileCoordForXYAndZ_(a[2],a[1],o,!0,u),a_(h,u[1],d,u[2],c)},l.prototype.getTileCoordCenter=function(a){var o=this.getOrigin(a[0]),c=this.getResolution(a[0]),u=ga(this.getTileSize(a[0]),this.tmpSize_);return[o[0]+(a[1]+.5)*u[0]*c,o[1]-(a[2]+.5)*u[1]*c]},l.prototype.getTileCoordExtent=function(a,o){var c=this.getOrigin(a[0]),u=this.getResolution(a[0]),h=ga(this.getTileSize(a[0]),this.tmpSize_),d=c[0]+a[1]*h[0]*u,f=c[1]-(a[2]+1)*h[1]*u;return yh(d,f,d+h[0]*u,f+h[1]*u,o)},l.prototype.getTileCoordForCoordAndResolution=function(a,o,c){return this.getTileCoordForXYAndResolution_(a[0],a[1],o,!1,c)},l.prototype.getTileCoordForXYAndResolution_=function(a,o,c,u,h){var d=this.getZForResolution(c),f=c/this.getResolution(d),m=this.getOrigin(d),g=ga(this.getTileSize(d),this.tmpSize_),v=u?.5:0,_=Math.floor((a-m[0])/c+(u?.5:0)),b=Math.floor((m[1]-o)/c+v),w=f*_/g[0],C=f*b/g[1];return u?(w=Math.ceil(w)-1,C=Math.ceil(C)-1):(w=Math.floor(w),C=Math.floor(C)),hq(d,w,C,h)},l.prototype.getTileCoordForXYAndZ_=function(a,o,c,u,h){var d=this.getOrigin(c),f=this.getResolution(c),m=ga(this.getTileSize(c),this.tmpSize_),y=u?.5:0,v=Math.floor((a-d[0])/f+(u?.5:0)),_=Math.floor((d[1]-o)/f+y),b=v/m[0],w=_/m[1];return u?(b=Math.ceil(b)-1,w=Math.ceil(w)-1):(b=Math.floor(b),w=Math.floor(w)),hq(c,b,w,h)},l.prototype.getTileCoordForCoordAndZ=function(a,o,c){return this.getTileCoordForXYAndZ_(a[0],a[1],o,!1,c)},l.prototype.getTileCoordResolution=function(a){return this.resolutions_[a[0]]},l.prototype.getTileSize=function(a){return this.tileSize_?this.tileSize_:this.tileSizes_[a]},l.prototype.getFullTileRange=function(a){return this.fullTileRanges_?this.fullTileRanges_[a]:this.extent_?this.getTileRangeForExtentAndZ(this.extent_,a):null},l.prototype.getZForResolution=function(a,o){return br(AE(this.resolutions_,a,o||0),this.minZoom,this.maxZoom)},l.prototype.calculateTileRanges_=function(a){for(var o=this.resolutions_.length,c=new Array(o),u=this.minZoom;u<o;++u)c[u]=this.getTileRangeForExtentAndZ(a,u);this.fullTileRanges_=c},l}();function gq(l){var a=l.getDefaultTileGrid();return a||(a=vq(l),l.setDefaultTileGrid(a)),a}function dF(l){var a=l||{},o=a.extent||Bn("EPSG:3857").getExtent(),c={extent:o,minZoom:a.minZoom,tileSize:a.tileSize,resolutions:yq(o,a.maxZoom,a.tileSize,a.maxResolution)};return new gM(c)}function yq(l,a,o,c){for(var u=void 0!==a?a:42,h=bs(l),d=Wr(l),f=ga(void 0!==o?o:256),m=c>0?c:Math.max(d/f[0],h/f[1]),g=u+1,y=new Array(g),v=0;v<g;++v)y[v]=m/Math.pow(2,v);return y}function vq(l,a,o,c){return function(l,a,o,c){var u=void 0!==c?c:"top-left",h=yq(l,a,o);return new gM({extent:l,origin:Abe(l,u),resolutions:h,tileSize:o})}(yM(l),a,o,c)}function yM(l){var a=(l=Bn(l)).getExtent();if(!a){var o=180*Wl[vl.DEGREES]/l.getMetersPerUnit();a=yh(-o,-o,o,o)}return a}var _q=function(){var l=function(a,o){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,u){c.__proto__=u}||function(c,u){for(var h in u)Object.prototype.hasOwnProperty.call(u,h)&&(c[h]=u[h])})(a,o)};return function(a,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function c(){this.constructor=a}l(a,o),a.prototype=null===o?Object.create(o):(c.prototype=o.prototype,new c)}}(),DCe=function(l){function a(o){var c=l.call(this,{attributions:o.attributions,attributionsCollapsible:o.attributionsCollapsible,projection:o.projection,state:o.state,wrapX:o.wrapX})||this;c.opaque_=void 0!==o.opaque&&o.opaque,c.tilePixelRatio_=void 0!==o.tilePixelRatio?o.tilePixelRatio:1,c.tileGrid=void 0!==o.tileGrid?o.tileGrid:null;var h=o.tileGrid;return h&&ga(h.getTileSize(h.getMinZoom()),[256,256]),c.tileCache=new cF(o.cacheSize||0),c.tmpSize=[0,0],c.key_=o.key||"",c.tileOptions={transition:o.transition},c.zDirection=o.zDirection?o.zDirection:0,c}return _q(a,l),a.prototype.canExpireCache=function(){return this.tileCache.canExpireCache()},a.prototype.expireCache=function(o,c){var u=this.getTileCacheForProjection(o);u&&u.expireCache(c)},a.prototype.forEachLoadedTile=function(o,c,u,h){var d=this.getTileCacheForProjection(o);if(!d)return!1;for(var m,g,y,f=!0,v=u.minX;v<=u.maxX;++v)for(var _=u.minY;_<=u.maxY;++_)g=c_(c,v,_),y=!1,d.containsKey(g)&&(y=2===(m=d.get(g)).getState())&&(y=!1!==h(m)),y||(f=!1);return f},a.prototype.getGutterForProjection=function(o){return 0},a.prototype.getKey=function(){return this.key_},a.prototype.setKey=function(o){this.key_!==o&&(this.key_=o,this.changed())},a.prototype.getOpaque=function(o){return this.opaque_},a.prototype.getResolutions=function(){return this.tileGrid.getResolutions()},a.prototype.getTile=function(o,c,u,h,d){return Gn()},a.prototype.getTileGrid=function(){return this.tileGrid},a.prototype.getTileGridForProjection=function(o){return this.tileGrid?this.tileGrid:gq(o)},a.prototype.getTileCacheForProjection=function(o){return Yn(Sh(this.getProjection(),o),68),this.tileCache},a.prototype.getTilePixelRatio=function(o){return this.tilePixelRatio_},a.prototype.getTilePixelSize=function(o,c,u){var h=this.getTileGridForProjection(u),d=this.getTilePixelRatio(c),f=ga(h.getTileSize(o),this.tmpSize);return 1==d?f:AW(f,d,this.tmpSize)},a.prototype.getTileCoordForTileUrlFunction=function(o,c){var u=void 0!==c?c:this.getProjection(),h=this.getTileGridForProjection(u);return this.getWrapX()&&u.isGlobal()&&(o=function(l,a,o){var c=a[0],u=l.getTileCoordCenter(a),h=yM(o);if(Pd(h,u))return a;var d=Wr(h),f=Math.ceil((h[0]-u[0])/d);return u[0]+=d*f,l.getTileCoordForCoordAndZ(u,c)}(h,o,u)),function(l,a){var o=l[0],c=l[1],u=l[2];if(a.getMinZoom()>o||o>a.getMaxZoom())return!1;var h=a.getFullTileRange(o);return!h||h.containsXY(c,u)}(o,h)?o:null},a.prototype.clear=function(){this.tileCache.clear()},a.prototype.refresh=function(){this.clear(),l.prototype.refresh.call(this)},a.prototype.updateCacheSize=function(o,c){var u=this.getTileCacheForProjection(c);o>u.highWaterMark&&(u.highWaterMark=o)},a.prototype.useTile=function(o,c,u,h){},a}(hF),ACe=function(l){function a(o,c){var u=l.call(this,o)||this;return u.tile=c,u}return _q(a,l),a}(Od);const bq=DCe;function ICe(l,a){var o=/\{z\}/g,c=/\{x\}/g,u=/\{y\}/g,h=/\{-y\}/g;return function(d,f,m){if(d)return l.replace(o,d[0].toString()).replace(c,d[1].toString()).replace(u,d[2].toString()).replace(h,function(){var y=a.getFullTileRange(d[0]);return Yn(y,55),(y.getHeight()-d[2]-1).toString()})}}function fF(l){return 1===l.length?l[0]:function(a,o,c){if(a){var h=$f(pq(a),l.length);return l[h](a,o,c)}}}function Sq(l){var a=[],o=/\{([a-z])-([a-z])\}/.exec(l);if(o){var c=o[1].charCodeAt(0),u=o[2].charCodeAt(0),h=void 0;for(h=c;h<=u;++h)a.push(l.replace(o[0],String.fromCharCode(h)));return a}if(o=/\{(\d+)-(\d+)\}/.exec(l)){for(var d=parseInt(o[2],10),f=parseInt(o[1],10);f<=d;f++)a.push(l.replace(o[0],f.toString()));return a}return a.push(l),a}var PCe=function(){var l=function(a,o){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,u){c.__proto__=u}||function(c,u){for(var h in u)Object.prototype.hasOwnProperty.call(u,h)&&(c[h]=u[h])})(a,o)};return function(a,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function c(){this.constructor=a}l(a,o),a.prototype=null===o?Object.create(o):(c.prototype=o.prototype,new c)}}();const Tq=function(l){function a(o){var c=l.call(this,{attributions:o.attributions,cacheSize:o.cacheSize,opaque:o.opaque,projection:o.projection,state:o.state,tileGrid:o.tileGrid,tilePixelRatio:o.tilePixelRatio,wrapX:o.wrapX,transition:o.transition,key:o.key,attributionsCollapsible:o.attributionsCollapsible,zDirection:o.zDirection})||this;return c.generateTileUrlFunction_=c.tileUrlFunction===a.prototype.tileUrlFunction,c.tileLoadFunction=o.tileLoadFunction,o.tileUrlFunction&&(c.tileUrlFunction=o.tileUrlFunction),c.urls=null,o.urls?c.setUrls(o.urls):o.url&&c.setUrl(o.url),c.tileLoadingKeys_={},c}return PCe(a,l),a.prototype.getTileLoadFunction=function(){return this.tileLoadFunction},a.prototype.getTileUrlFunction=function(){return Object.getPrototypeOf(this).tileUrlFunction===this.tileUrlFunction?this.tileUrlFunction.bind(this):this.tileUrlFunction},a.prototype.getUrls=function(){return this.urls},a.prototype.handleTileChange=function(o){var d,c=o.target,u=Dn(c),h=c.getState();1==h?(this.tileLoadingKeys_[u]=!0,d="tileloadstart"):u in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[u],d=3==h?"tileloaderror":2==h?"tileloadend":void 0),null!=d&&this.dispatchEvent(new ACe(d,c))},a.prototype.setTileLoadFunction=function(o){this.tileCache.clear(),this.tileLoadFunction=o,this.changed()},a.prototype.setTileUrlFunction=function(o,c){this.tileUrlFunction=o,this.tileCache.pruneExceptNewestZ(),void 0!==c?this.setKey(c):this.changed()},a.prototype.setUrl=function(o){var c=Sq(o);this.urls=c,this.setUrls(c)},a.prototype.setUrls=function(o){this.urls=o;var c=o.join("\n");this.generateTileUrlFunction_?this.setTileUrlFunction(function(l,a){for(var o=l.length,c=new Array(o),u=0;u<o;++u)c[u]=ICe(l[u],a);return fF(c)}(o,this.tileGrid),c):this.setKey(c)},a.prototype.tileUrlFunction=function(o,c,u){},a.prototype.useTile=function(o,c,u){var h=c_(o,c,u);this.tileCache.containsKey(h)&&this.tileCache.get(h)},a}(bq);var OCe=function(){var l=function(a,o){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,u){c.__proto__=u}||function(c,u){for(var h in u)Object.prototype.hasOwnProperty.call(u,h)&&(c[h]=u[h])})(a,o)};return function(a,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function c(){this.constructor=a}l(a,o),a.prototype=null===o?Object.create(o):(c.prototype=o.prototype,new c)}}(),wq=[];const FCe=function(l){function a(o,c,u,h){var d=l.call(this,o,c,{transition:0})||this;return d.context_={},d.executorGroups={},d.declutterExecutorGroups={},d.loadingSourceTiles=0,d.hitDetectionImageData={},d.replayState_={},d.sourceTiles=[],d.errorTileKeys={},d.getSourceTiles=h.bind(void 0,d),d.wrappedTileCoord=u,d}return OCe(a,l),a.prototype.getContext=function(o){var c=Dn(o);return c in this.context_||(this.context_[c]=Va(1,1,wq)),this.context_[c]},a.prototype.hasContext=function(o){return Dn(o)in this.context_},a.prototype.getImage=function(o){return this.hasContext(o)?this.getContext(o).canvas:null},a.prototype.getReplayState=function(o){var c=Dn(o);return c in this.replayState_||(this.replayState_[c]={dirty:!1,renderedRenderOrder:null,renderedResolution:NaN,renderedRevision:-1,renderedTileResolution:NaN,renderedTileRevision:-1,renderedTileZ:-1}),this.replayState_[c]},a.prototype.load=function(){this.getSourceTiles()},a.prototype.release=function(){for(var o in this.context_)wq.push(this.context_[o].canvas),delete this.context_[o];l.prototype.release.call(this)},a}(mM);function xq(l,a,o,c,u,h,d){var f=new XMLHttpRequest;f.open("GET","function"==typeof l?l(o,c,u):l,!0),"arraybuffer"==a.getType()&&(f.responseType="arraybuffer"),f.withCredentials=false,f.onload=function(m){if(!f.status||f.status>=200&&f.status<300){var g=a.getType(),y=void 0;"json"==g||"text"==g?y=f.responseText:"xml"==g?(y=f.responseXML)||(y=(new DOMParser).parseFromString(f.responseText,"application/xml")):"arraybuffer"==g&&(y=f.response),y?h(a.readFeatures(y,{extent:o,featureProjection:u}),a.readProjection(y)):d()}else d()},f.onerror=d,f.send()}function Eq(l,a){return function(o,c,u,h,d){var f=this;xq(l,a,o,c,u,function(m,g){f.addFeatures(m),void 0!==h&&h(m)},d||qm)}}var kCe=function(){var l=function(a,o){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,u){c.__proto__=u}||function(c,u){for(var h in u)Object.prototype.hasOwnProperty.call(u,h)&&(c[h]=u[h])})(a,o)};return function(a,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function c(){this.constructor=a}l(a,o),a.prototype=null===o?Object.create(o):(c.prototype=o.prototype,new c)}}();const vM=function(l){function a(o){var c=this,u=o.projection||"EPSG:3857",h=o.extent||yM(u),d=o.tileGrid||dF({extent:h,maxResolution:o.maxResolution,maxZoom:void 0!==o.maxZoom?o.maxZoom:22,minZoom:o.minZoom,tileSize:o.tileSize||512});return(c=l.call(this,{attributions:o.attributions,attributionsCollapsible:o.attributionsCollapsible,cacheSize:o.cacheSize,opaque:!1,projection:u,state:o.state,tileGrid:d,tileLoadFunction:o.tileLoadFunction?o.tileLoadFunction:BCe,tileUrlFunction:o.tileUrlFunction,url:o.url,urls:o.urls,wrapX:void 0===o.wrapX||o.wrapX,transition:o.transition,zDirection:void 0===o.zDirection?1:o.zDirection})||this).format_=o.format?o.format:null,c.sourceTileCache=new cF(c.tileCache.highWaterMark),c.overlaps_=null==o.overlaps||o.overlaps,c.tileClass=o.tileClass?o.tileClass:mCe,c.tileGrids_={},c}return kCe(a,l),a.prototype.getFeaturesInExtent=function(o){var c=[],u=this.tileCache;if(0===u.getCount())return c;var h=fq(u.peekFirstKey())[0],d=this.tileGrid;return u.forEach(function(f){if(f.tileCoord[0]===h&&2===f.getState())for(var m=f.getSourceTiles(),g=0,y=m.length;g<y;++g){var v=m[g];if(As(o,d.getTileCoordExtent(v.tileCoord))){var b=v.getFeatures();if(b)for(var w=0,C=b.length;w<C;++w){var E=b[w],M=E.getGeometry();As(o,M.getExtent())&&c.push(E)}}}}),c},a.prototype.getOverlaps=function(){return this.overlaps_},a.prototype.clear=function(){this.tileCache.clear(),this.sourceTileCache.clear()},a.prototype.expireCache=function(o,c){var u=this.getTileCacheForProjection(o),h=Object.keys(c).reduce(function(d,f){var m=function(l){var a=l.substring(l.lastIndexOf("/")+1,l.length).split(",").map(Number);return c_(a[0],a[1],a[2])}(f);if(u.containsKey(m))for(var g=u.get(m).sourceTiles,y=0,v=g.length;y<v;++y)d[g[y].getKey()]=!0;return d},{});l.prototype.expireCache.call(this,o,c),this.sourceTileCache.expireCache(h)},a.prototype.getSourceTiles=function(o,c,u){var h=this;if(0===u.getState()){u.setState(1);var d=u.wrappedTileCoord,f=this.getTileGridForProjection(c),m=f.getTileCoordExtent(d),y=f.getResolution(d[0]);jl(m,-y,m);var v=this.tileGrid,_=v.getExtent();_&&gu(m,_,m);var b=v.getZForResolution(y,1);v.forEachTileCoord(m,b,function(w){var C=h.tileUrlFunction(w,o,c),E=h.sourceTileCache.containsKey(C)?h.sourceTileCache.get(C):new h.tileClass(w,C?0:4,C,h.format_,h.tileLoadFunction);u.sourceTiles.push(E);var M=E.getState();if(M<2){var x=function(R){h.handleTileChange(R);var P=E.getState();if(2===P||3===P){var k=E.getKey();k in u.errorTileKeys?2===E.getState()&&delete u.errorTileKeys[k]:u.loadingSourceTiles--,3===P?u.errorTileKeys[k]=!0:E.removeEventListener("change",x),0===u.loadingSourceTiles&&u.setState(Zm(u.errorTileKeys)?2:3)}};E.addEventListener("change",x),u.loadingSourceTiles++}0===M&&(E.extent=v.getTileCoordExtent(w),E.projection=c,E.resolution=v.getResolution(w[0]),h.sourceTileCache.set(C,E),E.load())}),u.loadingSourceTiles||u.setState(u.sourceTiles.some(function(w){return 3===w.getState()})?3:2)}return u.sourceTiles},a.prototype.getTile=function(o,c,u,h,d){var g,f=c_(o,c,u),m=this.getKey();if(this.tileCache.containsKey(f)&&(g=this.tileCache.get(f)).key===m)return g;var y=[o,c,u],v=this.getTileCoordForTileUrlFunction(y,d),_=this.getTileGrid().getExtent(),b=this.getTileGridForProjection(d);if(v&&_){var w=b.getTileCoordExtent(v);jl(w,-b.getResolution(o),w),As(_,w)||(v=null)}var C=!0;if(null!==v){var E=this.tileGrid,M=b.getResolution(o),x=E.getZForResolution(M,1),R=b.getTileCoordExtent(v);jl(R,-M,R),E.forEachTileCoord(R,x,function(k){C=C&&!this.tileUrlFunction(k,h,d)}.bind(this))}var P=new FCe(y,C?4:0,v,this.getSourceTiles.bind(this,h,d));return P.key=m,g?(P.interimTile=g,P.refreshInterimChain(),this.tileCache.replace(f,P)):this.tileCache.set(f,P),P},a.prototype.getTileGridForProjection=function(o){var c=o.getCode(),u=this.tileGrids_[c];if(!u){var h=this.tileGrid;u=vq(o,void 0,h?h.getTileSize(h.getMinZoom()):void 0),this.tileGrids_[c]=u}return u},a.prototype.getTilePixelRatio=function(o){return o},a.prototype.getTilePixelSize=function(o,c,u){var d=ga(this.getTileGridForProjection(u).getTileSize(o),this.tmpSize);return[Math.round(d[0]*c),Math.round(d[1]*c)]},a.prototype.updateCacheSize=function(o,c){l.prototype.updateCacheSize.call(this,2*o,c),this.sourceTileCache.highWaterMark=this.getTileCacheForProjection(c).highWaterMark},a}(Tq);function BCe(l,a){l.setLoader(function(o,c,u){xq(a,l.getFormat(),o,c,u,l.onLoad.bind(l),l.onError.bind(l))})}var UCe=function(){var l=function(a,o){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,u){c.__proto__=u}||function(c,u){for(var h in u)Object.prototype.hasOwnProperty.call(u,h)&&(c[h]=u[h])})(a,o)};return function(a,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function c(){this.constructor=a}l(a,o),a.prototype=null===o?Object.create(o):(c.prototype=o.prototype,new c)}}(),GCe={image:["Polygon","Circle","LineString","Image","Text"],hybrid:["Polygon","LineString"],vector:[]},zCe={hybrid:["Image","Text","Default"],vector:["Polygon","Circle","LineString","Image","Text","Default"]};const jCe=function(l){function a(o){var c=l.call(this,o)||this;return c.boundHandleStyleImageChange_=c.handleStyleImageChange_.bind(c),c.dirty_=!1,c.renderedPixelToCoordinateTransform_=null,c.tmpTransform_=[1,0,0,1,0,0],c}return UCe(a,l),a.prototype.prepareTile=function(o,c,u){var h,d=o.getState();return(2===d||3===d)&&(this.updateExecutorGroup_(o,c,u),this.tileImageNeedsRender_(o)&&(h=!0)),h},a.prototype.getTile=function(o,c,u,h){var d=h.pixelRatio,f=h.viewState,m=f.resolution,g=f.projection,y=this.getLayer(),v=y.getSource().getTile(o,c,u,d,g),_=h.viewHints,b=!(_[0]||_[1]);return(b||!v.wantedResolution)&&(v.wantedResolution=m),this.prepareTile(v,d,g)&&(b||Date.now()-h.time<8)&&"vector"!==y.getRenderMode()&&this.renderTileImage_(v,h),l.prototype.getTile.call(this,o,c,u,h)},a.prototype.isDrawableTile=function(o){var c=this.getLayer();return l.prototype.isDrawableTile.call(this,o)&&("vector"===c.getRenderMode()?Dn(c)in o.executorGroups:o.hasContext(c))},a.prototype.getTileImage=function(o){return o.getImage(this.getLayer())},a.prototype.prepareFrame=function(o){var c=this.getLayer().getRevision();return this.renderedLayerRevision_!=c&&(this.renderedTiles.length=0),this.renderedLayerRevision_=c,l.prototype.prepareFrame.call(this,o)},a.prototype.updateExecutorGroup_=function(o,c,u){var h=this.getLayer(),d=h.getRevision(),f=h.getRenderOrder()||null,m=o.wantedResolution,g=o.getReplayState(h);if(g.dirty||g.renderedResolution!==m||g.renderedRevision!=d||g.renderedRenderOrder!=f){var y=h.getSource(),v=h.getDeclutter(),_=y.getTileGrid(),w=y.getTileGridForProjection(u).getTileCoordExtent(o.wrappedTileCoord),C=y.getSourceTiles(c,u,o),E=Dn(h);delete o.hitDetectionImageData[E],o.executorGroups[E]=[],v&&(o.declutterExecutorGroups[E]=[]);for(var M=function(k,W){var U=C[k];if(2!=U.getState())return"continue";var Q=_.getTileCoordExtent(U.tileCoord),se=gu(w,Q),te=jl(se,h.getRenderBuffer()*m,x.tmpExtent),De=vh(Q,se)?null:te;g.dirty=!1;var de=new dM(0,te,m,c),ye=v?new dM(0,se,m,c):void 0,_e=oF(m,c),ue=function(ct){var Ce,xt=ct.getStyleFunction()||h.getStyleFunction();if(xt&&(Ce=xt(ct,m)),Ce){var Ye=this.renderFeature(ct,_e,Ce,de,ye);this.dirty_=this.dirty_||Ye,g.dirty=g.dirty||Ye}},ce=U.getFeatures();f&&f!==g.renderedRenderOrder&&ce.sort(f);for(var Re=0,Oe=ce.length;Re<Oe;++Re){var Ae=ce[Re];(!De||As(De,Ae.getGeometry().getExtent()))&&ue.call(x,Ae)}var We=de.finish(),Te="vector"!==h.getRenderMode()&&v&&1===C.length?null:se,He=new fM(Te,m,c,y.getOverlaps(),We,h.getRenderBuffer());if(o.executorGroups[E].push(He),ye){var Ue=new fM(null,m,c,y.getOverlaps(),ye.finish(),h.getRenderBuffer());o.declutterExecutorGroups[E].push(Ue)}},x=this,R=0,P=C.length;R<P;++R)M(R);g.renderedRevision=d,g.renderedRenderOrder=f,g.renderedResolution=m}},a.prototype.forEachFeatureAtCoordinate=function(o,c,u,h,d){var f=c.viewState.resolution,m=c.viewState.rotation;u=null==u?0:u;var g=this.getLayer(),v=g.getSource().getTileGridForProjection(c.viewState.projection),_=rN([o]);jl(_,f*u,_);for(var E,b={},w=function(P,k,W){var U=P.getId();void 0===U&&(U=Dn(P));var K=b[U];if(K){if(!0!==K&&W<K.distanceSq){if(0===W)return b[U]=!0,d.splice(d.lastIndexOf(K),1),h(P,g,k);K.geometry=k,K.distanceSq=W}}else{if(0===W)return b[U]=!0,h(P,g,k);d.push(b[U]={feature:P,layer:g,geometry:k,distanceSq:W,callback:h})}},C=this.renderedTiles,M=function(P,k){var W=C[P];if(!As(v.getTileCoordExtent(W.wrappedTileCoord),_))return"continue";var K=Dn(g),Q=[W.executorGroups[K]],se=W.declutterExecutorGroups[K];se&&Q.push(se),Q.some(function(te){for(var De=te===se?c.declutterTree.all().map(function(ue){return ue.value}):null,de=0,ye=te.length;de<ye;++de)if(E=te[de].forEachFeatureAtCoordinate(o,f,m,u,w,De))return!0})},x=0,R=C.length;!E&&x<R;++x)M(x);return E},a.prototype.getFeatures=function(o){return new Promise(function(c,u){for(var w,h=this.getLayer(),d=Dn(h),f=h.getSource(),m=this.renderedProjection,g=m.getExtent(),y=this.renderedResolution,v=f.getTileGridForProjection(m),_=ts(this.renderedPixelToCoordinateTransform_,o.slice()),b=v.getTileCoordForCoordAndResolution(_,y),C=0,E=this.renderedTiles.length;C<E;++C)if(b.toString()===this.renderedTiles[C].tileCoord.toString()){if(2===(w=this.renderedTiles[C]).getState()){var M=v.getTileCoordExtent(w.tileCoord);f.getWrapX()&&m.canWrapX()&&!pl(g,M)&&pN(_,m);break}w=void 0}if(!w||w.loadingSourceTiles>0)c([]);else{var R=_h(v.getTileCoordExtent(w.wrappedTileCoord)),P=[(_[0]-R[0])/y,(R[1]-_[1])/y],k=w.getSourceTiles().reduce(function(se,te){return se.concat(te.getFeatures())},[]),W=w.hitDetectionImageData[d];if(!W&&!this.animatingOrInteracting_){var U=ga(v.getTileSize(v.getZForResolution(y))),K=this.renderedRotation_;W=aq(U,[this.getRenderTransform(v.getTileCoordCenter(w.wrappedTileCoord),y,0,Xl,U[0]*Xl,U[1]*Xl,0)],k,h.getStyleFunction(),v.getTileCoordExtent(w.wrappedTileCoord),w.getReplayState(h).renderedResolution,K),w.hitDetectionImageData[d]=W}c(lq(P,k,W))}}.bind(this))},a.prototype.handleFontsChanged=function(){var o=this.getLayer();o.getVisible()&&void 0!==this.renderedLayerRevision_&&o.changed()},a.prototype.handleStyleImageChange_=function(o){this.renderIfReadyAndVisible()},a.prototype.renderDeclutter=function(o){var c=this.context,u=c.globalAlpha;c.globalAlpha=this.getLayer().getOpacity();for(var h=o.viewHints,d=!(h[0]||h[1]),f=this.renderedTiles,m=0,g=f.length;m<g;++m){var y=f[m],v=y.declutterExecutorGroups[Dn(this.getLayer())];if(v)for(var _=v.length-1;_>=0;--_)v[_].execute(this.context,1,this.getTileRenderTransform(y,o),o.viewState.rotation,d,void 0,o.declutterTree)}c.globalAlpha=u},a.prototype.getTileRenderTransform=function(o,c){var u=c.pixelRatio,h=c.viewState,d=h.center,f=h.resolution,m=h.rotation,g=c.size,y=Math.round(g[0]*u),v=Math.round(g[1]*u),b=this.getLayer().getSource().getTileGridForProjection(c.viewState.projection),w=o.tileCoord,C=b.getTileCoordExtent(o.wrappedTileCoord),E=b.getTileCoordExtent(w,this.tmpExtent)[0]-C[0];return Hv(PE(this.inversePixelTransform.slice(),1/u,1/u),this.getRenderTransform(d,f,m,u,y,v,E))},a.prototype.renderFrame=function(o,c){var u=o.viewHints,h=!(u[0]||u[1]);l.prototype.renderFrame.call(this,o,c),this.renderedPixelToCoordinateTransform_=o.pixelToCoordinateTransform.slice(),this.renderedRotation_=o.viewState.rotation;var d=this.getLayer(),f=d.getRenderMode(),m=this.context,g=m.globalAlpha;m.globalAlpha=d.getOpacity();for(var y=zCe[f],_=o.viewState.rotation,b=this.renderedTiles,w=[],C=[],E=b.length-1;E>=0;--E)for(var M=b[E],x=this.getTileRenderTransform(M,o),R=M.executorGroups[Dn(d)],P=!1,k=0,W=R.length;k<W;++k){var U=R[k];if(U.hasExecutors(y)){var K=M.tileCoord[0],Q=void 0;if(!P&&(Q=U.getClipCoords(x))){m.save();for(var se=0,te=w.length;se<te;++se){var De=w[se];K<C[se]&&(m.beginPath(),m.moveTo(Q[0],Q[1]),m.lineTo(Q[2],Q[3]),m.lineTo(Q[4],Q[5]),m.lineTo(Q[6],Q[7]),m.moveTo(De[6],De[7]),m.lineTo(De[4],De[5]),m.lineTo(De[2],De[3]),m.lineTo(De[0],De[1]),m.clip())}}U.execute(m,1,x,_,h,y),!P&&Q&&(m.restore(),w.push(Q),C.push(K),P=!0)}}return m.globalAlpha=g,this.container},a.prototype.renderFeature=function(o,c,u,h,d){if(!u)return!1;var f=!1;if(Array.isArray(u))for(var m=0,g=u.length;m<g;++m)f=pM(h,o,u[m],c,this.boundHandleStyleImageChange_,void 0,d)||f;else f=pM(h,o,u,c,this.boundHandleStyleImageChange_,void 0,d);return f},a.prototype.tileImageNeedsRender_=function(o){var c=this.getLayer();if("vector"===c.getRenderMode())return!1;var u=o.getReplayState(c),h=c.getRevision();return u.renderedTileResolution!==o.wantedResolution||u.renderedTileRevision!==h},a.prototype.renderTileImage_=function(o,c){var u=this.getLayer(),h=o.getReplayState(u),d=u.getRevision(),f=o.executorGroups[Dn(u)];h.renderedTileRevision=d;var m=o.wrappedTileCoord,g=m[0],y=u.getSource(),v=c.pixelRatio,b=c.viewState.projection,w=y.getTileGridForProjection(b),C=w.getResolution(o.tileCoord[0]),E=c.pixelRatio/o.wantedResolution*C,M=w.getResolution(g),x=o.getContext(u);v=Math.round(Math.max(v,E/v));var R=y.getTilePixelSize(g,v,b);x.canvas.width=R[0],x.canvas.height=R[1];var P=v/E;if(1!==P){var k=sT(this.tmpTransform_);PE(k,P,P),x.setTransform.apply(x,k)}var W=w.getTileCoordExtent(m,this.tmpExtent),U=E/M,K=sT(this.tmpTransform_);PE(K,U,-U),function(l,a,o){Hv(l,oT(nN,1,0,0,1,a,o))}(K,-W[0],-W[3]);for(var Q=0,se=f.length;Q<se;++Q)f[Q].execute(x,P,K,0,!0,GCe[u.getRenderMode()]);h.renderedTileResolution=o.wantedResolution},a}(JW);var WCe=function(){var l=function(a,o){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,u){c.__proto__=u}||function(c,u){for(var h in u)Object.prototype.hasOwnProperty.call(u,h)&&(c[h]=u[h])})(a,o)};return function(a,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function c(){this.constructor=a}l(a,o),a.prototype=null===o?Object.create(o):(c.prototype=o.prototype,new c)}}();const _M=function(l){function a(o){var c=this,u=o||{},h=Gr({},u);delete h.preload,delete h.useInterimTilesOnError,c=l.call(this,h)||this,"image"===u.renderMode&&(console.warn('renderMode: "image" is deprecated. Option ignored.'),u.renderMode=void 0);var d=u.renderMode||"hybrid";return Yn("hybrid"==d||"vector"==d,28),c.renderMode_=d,c.setPreload(u.preload?u.preload:0),c.setUseInterimTilesOnError(void 0===u.useInterimTilesOnError||u.useInterimTilesOnError),c}return WCe(a,l),a.prototype.createRenderer=function(){return new jCe(this)},a.prototype.getFeatures=function(o){return l.prototype.getFeatures.call(this,o)},a.prototype.getRenderMode=function(){return this.renderMode_},a.prototype.getPreload=function(){return this.get("preload")},a.prototype.getUseInterimTilesOnError=function(){return this.get("useInterimTilesOnError")},a.prototype.setPreload=function(o){this.set("preload",o)},a.prototype.setUseInterimTilesOnError=function(o){this.set("useInterimTilesOnError",o)},a}(s_);var XCe=function(){var l=function(a,o){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,u){c.__proto__=u}||function(c,u){for(var h in u)Object.prototype.hasOwnProperty.call(u,h)&&(c[h]=u[h])})(a,o)};return function(a,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function c(){this.constructor=a}l(a,o),a.prototype=null===o?Object.create(o):(c.prototype=o.prototype,new c)}}();const u_=function(l){function a(o){var c=l.call(this)||this;return c.id_=void 0,c.geometryName_="geometry",c.style_=null,c.styleFunction_=void 0,c.geometryChangeKey_=null,c.addChangeListener(c.geometryName_,c.handleGeometryChanged_),o&&("function"==typeof o.getSimplifiedGeometry?c.setGeometry(o):c.setProperties(o)),c}return XCe(a,l),a.prototype.clone=function(){var o=new a(this.hasProperties()?this.getProperties():null);o.setGeometryName(this.getGeometryName());var c=this.getGeometry();c&&o.setGeometry(c.clone());var u=this.getStyle();return u&&o.setStyle(u),o},a.prototype.getGeometry=function(){return this.get(this.geometryName_)},a.prototype.getId=function(){return this.id_},a.prototype.getGeometryName=function(){return this.geometryName_},a.prototype.getStyle=function(){return this.style_},a.prototype.getStyleFunction=function(){return this.styleFunction_},a.prototype.handleGeometryChange_=function(){this.changed()},a.prototype.handleGeometryChanged_=function(){this.geometryChangeKey_&&(Ii(this.geometryChangeKey_),this.geometryChangeKey_=null);var o=this.getGeometry();o&&(this.geometryChangeKey_=Sr(o,"change",this.handleGeometryChange_,this)),this.changed()},a.prototype.setGeometry=function(o){this.set(this.geometryName_,o)},a.prototype.setStyle=function(o){this.style_=o,this.styleFunction_=o?function(l){return"function"==typeof l?l:(Array.isArray(l)?a=l:(Yn("function"==typeof l.getZIndex,41),a=[l]),function(){return a});var a}(o):void 0,this.changed()},a.prototype.setId=function(o){this.id_=o,this.changed()},a.prototype.setGeometryName=function(o){this.removeChangeListener(this.geometryName_,this.handleGeometryChanged_),this.geometryName_=o,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),this.handleGeometryChanged_()},a}(yu);var ZCe=function(){var l=function(a,o){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,u){c.__proto__=u}||function(c,u){for(var h in u)Object.prototype.hasOwnProperty.call(u,h)&&(c[h]=u[h])})(a,o)};return function(a,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function c(){this.constructor=a}l(a,o),a.prototype=null===o?Object.create(o):(c.prototype=o.prototype,new c)}}();function Mq(l){for(var a=[],o=0,c=l.length;o<c;++o)a.push(l[o].clone());return a}const cg=function(l){function a(o){var c=l.call(this)||this;return c.geometries_=o||null,c.changeEventsKeys_=[],c.listenGeometriesChange_(),c}return ZCe(a,l),a.prototype.unlistenGeometriesChange_=function(){this.changeEventsKeys_.forEach(Ii),this.changeEventsKeys_.length=0},a.prototype.listenGeometriesChange_=function(){if(this.geometries_)for(var o=0,c=this.geometries_.length;o<c;++o)this.changeEventsKeys_.push(Sr(this.geometries_[o],"change",this.changed,this))},a.prototype.clone=function(){var o=new a(null);return o.setGeometries(this.geometries_),o.applyProperties(this),o},a.prototype.closestPointXY=function(o,c,u,h){if(h<Xm(this.getExtent(),o,c))return h;for(var d=this.geometries_,f=0,m=d.length;f<m;++f)h=d[f].closestPointXY(o,c,u,h);return h},a.prototype.containsXY=function(o,c){for(var u=this.geometries_,h=0,d=u.length;h<d;++h)if(u[h].containsXY(o,c))return!0;return!1},a.prototype.computeExtent=function(o){$m(o);for(var c=this.geometries_,u=0,h=c.length;u<h;++u)aN(o,c[u].getExtent());return o},a.prototype.getGeometries=function(){return Mq(this.geometries_)},a.prototype.getGeometriesArray=function(){return this.geometries_},a.prototype.getGeometriesArrayRecursive=function(){for(var o=[],c=this.geometries_,u=0,h=c.length;u<h;++u)c[u].getType()===this.getType()?o=o.concat(c[u].getGeometriesArrayRecursive()):o.push(c[u]);return o},a.prototype.getSimplifiedGeometry=function(o){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),o<0||0!==this.simplifiedGeometryMaxMinSquaredTolerance&&o<this.simplifiedGeometryMaxMinSquaredTolerance)return this;for(var c=[],u=this.geometries_,h=!1,d=0,f=u.length;d<f;++d){var m=u[d],g=m.getSimplifiedGeometry(o);c.push(g),g!==m&&(h=!0)}if(h){var y=new a(null);return y.setGeometriesArray(c),y}return this.simplifiedGeometryMaxMinSquaredTolerance=o,this},a.prototype.getType=function(){return"GeometryCollection"},a.prototype.intersectsExtent=function(o){for(var c=this.geometries_,u=0,h=c.length;u<h;++u)if(c[u].intersectsExtent(o))return!0;return!1},a.prototype.isEmpty=function(){return 0===this.geometries_.length},a.prototype.rotate=function(o,c){for(var u=this.geometries_,h=0,d=u.length;h<d;++h)u[h].rotate(o,c);this.changed()},a.prototype.scale=function(o,c,u){var h=u;h||(h=ml(this.getExtent()));for(var d=this.geometries_,f=0,m=d.length;f<m;++f)d[f].scale(o,c,h);this.changed()},a.prototype.setGeometries=function(o){this.setGeometriesArray(Mq(o))},a.prototype.setGeometriesArray=function(o){this.unlistenGeometriesChange_(),this.geometries_=o,this.listenGeometriesChange_(),this.changed()},a.prototype.applyTransform=function(o){for(var c=this.geometries_,u=0,h=c.length;u<h;++u)c[u].applyTransform(o);this.changed()},a.prototype.translate=function(o,c){for(var u=this.geometries_,h=0,d=u.length;h<d;++h)u[h].translate(o,c);this.changed()},a.prototype.disposeInternal=function(){this.unlistenGeometriesChange_(),l.prototype.disposeInternal.call(this)},a}(fW),pF=function(){function l(){this.dataProjection=void 0,this.defaultFeatureProjection=void 0,this.supportedMediaTypes=null}return l.prototype.getReadOptions=function(a,o){var c;if(o){var u=o.dataProjection?Bn(o.dataProjection):this.readProjection(a);o.extent&&u&&u.getUnits()===vl.TILE_PIXELS&&(u=Bn(u)).setWorldExtent(o.extent),c={dataProjection:u,featureProjection:o.featureProjection}}return this.adaptOptions(c)},l.prototype.adaptOptions=function(a){return Gr({dataProjection:this.dataProjection,featureProjection:this.defaultFeatureProjection},a)},l.prototype.getType=function(){return Gn()},l.prototype.readFeature=function(a,o){return Gn()},l.prototype.readFeatures=function(a,o){return Gn()},l.prototype.readGeometry=function(a,o){return Gn()},l.prototype.readProjection=function(a){return Gn()},l.prototype.writeFeature=function(a,o){return Gn()},l.prototype.writeFeatures=function(a,o){return Gn()},l.prototype.writeGeometry=function(a,o){return Gn()},l}();function h_(l,a,o){var h,c=o?Bn(o.featureProjection):null,u=o?Bn(o.dataProjection):null;if(h=c&&u&&!Sh(c,u)?(a?l.clone():l).transform(a?c:u,a?u:c):l,a&&o&&void 0!==o.decimals){var d=Math.pow(10,o.decimals);h===l&&(h=l.clone()),h.applyTransform(function(m){for(var g=0,y=m.length;g<y;++g)m[g]=Math.round(m[g]*d)/d;return m})}return h}var QCe=function(){var l=function(a,o){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,u){c.__proto__=u}||function(c,u){for(var h in u)Object.prototype.hasOwnProperty.call(u,h)&&(c[h]=u[h])})(a,o)};return function(a,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function c(){this.constructor=a}l(a,o),a.prototype=null===o?Object.create(o):(c.prototype=o.prototype,new c)}}();function bM(l){return"string"==typeof l?JSON.parse(l)||null:null!==l?l:null}const Dq=function(l){function a(){return l.call(this)||this}return QCe(a,l),a.prototype.getType=function(){return"json"},a.prototype.readFeature=function(o,c){return this.readFeatureFromObject(bM(o),this.getReadOptions(o,c))},a.prototype.readFeatures=function(o,c){return this.readFeaturesFromObject(bM(o),this.getReadOptions(o,c))},a.prototype.readFeatureFromObject=function(o,c){return Gn()},a.prototype.readFeaturesFromObject=function(o,c){return Gn()},a.prototype.readGeometry=function(o,c){return this.readGeometryFromObject(bM(o),this.getReadOptions(o,c))},a.prototype.readGeometryFromObject=function(o,c){return Gn()},a.prototype.readProjection=function(o){return this.readProjectionFromObject(bM(o))},a.prototype.readProjectionFromObject=function(o){return Gn()},a.prototype.writeFeature=function(o,c){return JSON.stringify(this.writeFeatureObject(o,c))},a.prototype.writeFeatureObject=function(o,c){return Gn()},a.prototype.writeFeatures=function(o,c){return JSON.stringify(this.writeFeaturesObject(o,c))},a.prototype.writeFeaturesObject=function(o,c){return Gn()},a.prototype.writeGeometry=function(o,c){return JSON.stringify(this.writeGeometryObject(o,c))},a.prototype.writeGeometryObject=function(o,c){return Gn()},a}(pF);function SM(l,a,o,c,u,h,d){var f,m,g=(o-a)/c;if(1===g)f=a;else if(2===g)f=a,m=u;else if(0!==g){for(var y=l[a],v=l[a+1],_=0,b=[0],w=a+c;w<o;w+=c){var C=l[w],E=l[w+1];_+=Math.sqrt((C-y)*(C-y)+(E-v)*(E-v)),b.push(_),y=C,v=E}var M=u*_,x=function(l,a,o){for(var c,u,h=jm,d=0,f=l.length,m=!1;d<f;)(u=+h(l[c=d+(f-d>>1)],a))<0?d=c+1:(f=c,m=!u);return m?d:~d}(b,M);x<0?(m=(M-b[-x-2])/(b[-x-1]-b[-x-2]),f=a+(-x-2)*c):f=a+x*c}var R=d>1?d:2,P=h||new Array(R);for(w=0;w<R;++w)P[w]=void 0===f?NaN:void 0===m?l[f+w]:Ld(l[f+w],l[f+c+w],m);return P}function mF(l,a,o,c,u,h){if(o==a)return null;var d;if(u<l[a+c-1])return h?((d=l.slice(a,a+c))[c-1]=u,d):null;if(l[o-1]<u)return h?((d=l.slice(o-c,o))[c-1]=u,d):null;if(u==l[a+c-1])return l.slice(a,a+c);for(var f=a/c,m=o/c;f<m;){var g=f+m>>1;u<l[(g+1)*c-1]?m=g:f=g+1}var y=l[f*c-1];if(u==y)return l.slice((f-1)*c,(f-1)*c+c);var _=(u-y)/(l[(f+1)*c-1]-y);d=[];for(var b=0;b<c-1;++b)d.push(Ld(l[(f-1)*c+b],l[f*c+b],_));return d.push(u),d}var nxe=function(){var l=function(a,o){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,u){c.__proto__=u}||function(c,u){for(var h in u)Object.prototype.hasOwnProperty.call(u,h)&&(c[h]=u[h])})(a,o)};return function(a,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function c(){this.constructor=a}l(a,o),a.prototype=null===o?Object.create(o):(c.prototype=o.prototype,new c)}}();const zd=function(l){function a(o,c){var u=l.call(this)||this;return u.flatMidpoint_=null,u.flatMidpointRevision_=-1,u.maxDelta_=-1,u.maxDeltaRevision_=-1,void 0===c||Array.isArray(o[0])?u.setCoordinates(o,c):u.setFlatCoordinates(c,o),u}return nxe(a,l),a.prototype.appendCoordinate=function(o){this.flatCoordinates?es(this.flatCoordinates,o):this.flatCoordinates=o.slice(),this.changed()},a.prototype.clone=function(){var o=new a(this.flatCoordinates.slice(),this.layout);return o.applyProperties(this),o},a.prototype.closestPointXY=function(o,c,u,h){return h<Xm(this.getExtent(),o,c)?h:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(ON(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),FN(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!1,o,c,u,h))},a.prototype.forEachSegment=function(o){return wW(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,o)},a.prototype.getCoordinateAtM=function(o,c){return"XYM"!=this.layout&&"XYZM"!=this.layout?null:mF(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,o,void 0!==c&&c)},a.prototype.getCoordinates=function(){return r_(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},a.prototype.getCoordinateAt=function(o,c){return SM(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,o,c,this.stride)},a.prototype.getLength=function(){return tF(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},a.prototype.getFlatMidpoint=function(){return this.flatMidpointRevision_!=this.getRevision()&&(this.flatMidpoint_=this.getCoordinateAt(.5,this.flatMidpoint_),this.flatMidpointRevision_=this.getRevision()),this.flatMidpoint_},a.prototype.getSimplifiedGeometryInternal=function(o){var c=[];return c.length=iM(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,o,c,0),new a(c,"XY")},a.prototype.getType=function(){return"LineString"},a.prototype.intersectsExtent=function(o){return oM(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,o)},a.prototype.setCoordinates=function(o,c){this.setLayout(c,o,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=rM(this.flatCoordinates,0,o,this.stride),this.changed()},a}(rg);var ixe=function(){var l=function(a,o){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,u){c.__proto__=u}||function(c,u){for(var h in u)Object.prototype.hasOwnProperty.call(u,h)&&(c[h]=u[h])})(a,o)};return function(a,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function c(){this.constructor=a}l(a,o),a.prototype=null===o?Object.create(o):(c.prototype=o.prototype,new c)}}();const DT=function(l){function a(o,c,u){var h=l.call(this)||this;if(h.ends_=[],h.maxDelta_=-1,h.maxDeltaRevision_=-1,Array.isArray(o[0]))h.setCoordinates(o,c);else if(void 0!==c&&u)h.setFlatCoordinates(c,o),h.ends_=u;else{for(var d=h.getLayout(),f=o,m=[],g=[],y=0,v=f.length;y<v;++y){var _=f[y];0===y&&(d=_.getLayout()),es(m,_.getFlatCoordinates()),g.push(m.length)}h.setFlatCoordinates(d,m),h.ends_=g}return h}return ixe(a,l),a.prototype.appendLineString=function(o){this.flatCoordinates?es(this.flatCoordinates,o.getFlatCoordinates().slice()):this.flatCoordinates=o.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()},a.prototype.clone=function(){var o=new a(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return o.applyProperties(this),o},a.prototype.closestPointXY=function(o,c,u,h){return h<Xm(this.getExtent(),o,c)?h:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(NN(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),kN(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!1,o,c,u,h))},a.prototype.getCoordinateAtM=function(o,c,u){return"XYM"!=this.layout&&"XYZM"!=this.layout||0===this.flatCoordinates.length?null:function(l,a,o,c,u,h,d){if(d)return mF(l,a,o[o.length-1],c,u,h);var f;if(u<l[c-1])return h?((f=l.slice(0,c))[c-1]=u,f):null;if(l[l.length-1]<u)return h?((f=l.slice(l.length-c))[c-1]=u,f):null;for(var m=0,g=o.length;m<g;++m){var y=o[m];if(a!=y){if(u<l[a+c-1])return null;if(u<=l[y-1])return mF(l,a,y,c,u,!1);a=y}}return null}(this.flatCoordinates,0,this.ends_,this.stride,o,void 0!==c&&c,void 0!==u&&u)},a.prototype.getCoordinates=function(){return sM(this.flatCoordinates,0,this.ends_,this.stride)},a.prototype.getEnds=function(){return this.ends_},a.prototype.getLineString=function(o){return o<0||this.ends_.length<=o?null:new zd(this.flatCoordinates.slice(0===o?0:this.ends_[o-1],this.ends_[o]),this.layout)},a.prototype.getLineStrings=function(){for(var o=this.flatCoordinates,c=this.ends_,u=this.layout,h=[],d=0,f=0,m=c.length;f<m;++f){var g=c[f],y=new zd(o.slice(d,g),u);h.push(y),d=g}return h},a.prototype.getFlatMidpoints=function(){for(var o=[],c=this.flatCoordinates,u=0,h=this.ends_,d=this.stride,f=0,m=h.length;f<m;++f){var g=h[f];es(o,SM(c,u,g,d,.5)),u=g}return o},a.prototype.getSimplifiedGeometryInternal=function(o){var c=[],u=[];return c.length=function(l,a,o,c,u,h,d,f){for(var m=0,g=o.length;m<g;++m){var y=o[m];d=iM(l,a,y,c,u,h,d),f.push(d),a=y}return d}(this.flatCoordinates,0,this.ends_,this.stride,o,c,0,u),new a(c,"XY",u)},a.prototype.getType=function(){return"MultiLineString"},a.prototype.intersectsExtent=function(o){return function(l,a,o,c,u){for(var h=0,d=o.length;h<d;++h){if(oM(l,a,o[h],c,u))return!0;a=o[h]}return!1}(this.flatCoordinates,0,this.ends_,this.stride,o)},a.prototype.setCoordinates=function(o,c){this.setLayout(c,o,2),this.flatCoordinates||(this.flatCoordinates=[]);var u=VN(this.flatCoordinates,0,o,this.stride,this.ends_);this.flatCoordinates.length=0===u.length?0:u[u.length-1],this.changed()},a}(rg);var oxe=function(){var l=function(a,o){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,u){c.__proto__=u}||function(c,u){for(var h in u)Object.prototype.hasOwnProperty.call(u,h)&&(c[h]=u[h])})(a,o)};return function(a,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function c(){this.constructor=a}l(a,o),a.prototype=null===o?Object.create(o):(c.prototype=o.prototype,new c)}}();const AT=function(l){function a(o,c){var u=l.call(this)||this;return c&&!Array.isArray(o[0])?u.setFlatCoordinates(c,o):u.setCoordinates(o,c),u}return oxe(a,l),a.prototype.appendPoint=function(o){this.flatCoordinates?es(this.flatCoordinates,o.getFlatCoordinates()):this.flatCoordinates=o.getFlatCoordinates().slice(),this.changed()},a.prototype.clone=function(){var o=new a(this.flatCoordinates.slice(),this.layout);return o.applyProperties(this),o},a.prototype.closestPointXY=function(o,c,u,h){if(h<Xm(this.getExtent(),o,c))return h;for(var d=this.flatCoordinates,f=this.stride,m=0,g=d.length;m<g;m+=f){var y=Ym(o,c,d[m],d[m+1]);if(y<h){h=y;for(var v=0;v<f;++v)u[v]=d[m+v];u.length=f}}return h},a.prototype.getCoordinates=function(){return r_(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},a.prototype.getPoint=function(o){return o<0||(this.flatCoordinates?this.flatCoordinates.length/this.stride:0)<=o?null:new wh(this.flatCoordinates.slice(o*this.stride,(o+1)*this.stride),this.layout)},a.prototype.getPoints=function(){for(var o=this.flatCoordinates,c=this.layout,u=this.stride,h=[],d=0,f=o.length;d<f;d+=u){var m=new wh(o.slice(d,d+u),c);h.push(m)}return h},a.prototype.getType=function(){return"MultiPoint"},a.prototype.intersectsExtent=function(o){for(var c=this.flatCoordinates,u=this.stride,h=0,d=c.length;h<d;h+=u)if(lT(o,c[h],c[h+1]))return!0;return!1},a.prototype.setCoordinates=function(o,c){this.setLayout(c,o,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=rM(this.flatCoordinates,0,o,this.stride),this.changed()},a}(rg);function Aq(l,a,o,c){for(var u=[],h=[1/0,1/0,-1/0,-1/0],d=0,f=o.length;d<f;++d){var m=o[d];h=oN(l,a,m[0],c),u.push((h[0]+h[2])/2,(h[1]+h[3])/2),a=m[m.length-1]}return u}var lxe=function(){var l=function(a,o){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,u){c.__proto__=u}||function(c,u){for(var h in u)Object.prototype.hasOwnProperty.call(u,h)&&(c[h]=u[h])})(a,o)};return function(a,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function c(){this.constructor=a}l(a,o),a.prototype=null===o?Object.create(o):(c.prototype=o.prototype,new c)}}();const TM=function(l){function a(o,c,u){var h=l.call(this)||this;if(h.endss_=[],h.flatInteriorPointsRevision_=-1,h.flatInteriorPoints_=null,h.maxDelta_=-1,h.maxDeltaRevision_=-1,h.orientedRevision_=-1,h.orientedFlatCoordinates_=null,!u&&!Array.isArray(o[0])){for(var d=h.getLayout(),f=o,m=[],g=[],y=0,v=f.length;y<v;++y){var _=f[y];0===y&&(d=_.getLayout());for(var b=m.length,w=_.getEnds(),C=0,E=w.length;C<E;++C)w[C]+=b;es(m,_.getFlatCoordinates()),g.push(w)}c=d,o=m,u=g}return void 0!==c&&u?(h.setFlatCoordinates(c,o),h.endss_=u):h.setCoordinates(o,c),h}return lxe(a,l),a.prototype.appendPolygon=function(o){var c;if(this.flatCoordinates){var u=this.flatCoordinates.length;es(this.flatCoordinates,o.getFlatCoordinates());for(var h=0,d=(c=o.getEnds().slice()).length;h<d;++h)c[h]+=u}else this.flatCoordinates=o.getFlatCoordinates().slice(),c=o.getEnds().slice(),this.endss_.push();this.endss_.push(c),this.changed()},a.prototype.clone=function(){for(var o=this.endss_.length,c=new Array(o),u=0;u<o;++u)c[u]=this.endss_[u].slice();var h=new a(this.flatCoordinates.slice(),this.layout,c);return h.applyProperties(this),h},a.prototype.closestPointXY=function(o,c,u,h){return h<Xm(this.getExtent(),o,c)?h:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(function(l,a,o,c,u){for(var h=0,d=o.length;h<d;++h){var f=o[h];u=NN(l,a,f,c,u),a=f[f.length-1]}return u}(this.flatCoordinates,0,this.endss_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),function(l,a,o,c,u,h,d,f,m,g,y){for(var v=[NaN,NaN],_=0,b=o.length;_<b;++_){var w=o[_];g=kN(l,a,w,c,u,true,d,f,m,g,v),a=w[w.length-1]}return g}(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,this.maxDelta_,0,o,c,u,h))},a.prototype.containsXY=function(o,c){return function(l,a,o,c,u,h){if(0===o.length)return!1;for(var d=0,f=o.length;d<f;++d){var m=o[d];if(BN(l,a,m,c,u,h))return!0;a=m[m.length-1]}return!1}(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,o,c)},a.prototype.getArea=function(){return function(l,a,o,c){for(var u=0,h=0,d=o.length;h<d;++h){var f=o[h];u+=bW(l,a,f,c),a=f[f.length-1]}return u}(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride)},a.prototype.getCoordinates=function(o){var c;return void 0!==o?EW(c=this.getOrientedFlatCoordinates().slice(),0,this.endss_,this.stride,o):c=this.flatCoordinates,vW(c,0,this.endss_,this.stride)},a.prototype.getEndss=function(){return this.endss_},a.prototype.getFlatInteriorPoints=function(){if(this.flatInteriorPointsRevision_!=this.getRevision()){var o=Aq(this.flatCoordinates,0,this.endss_,this.stride);this.flatInteriorPoints_=TW(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,o),this.flatInteriorPointsRevision_=this.getRevision()}return this.flatInteriorPoints_},a.prototype.getInteriorPoints=function(){return new AT(this.getFlatInteriorPoints().slice(),"XYM")},a.prototype.getOrientedFlatCoordinates=function(){if(this.orientedRevision_!=this.getRevision()){var o=this.flatCoordinates;!function(l,a,o,c,u){for(var h=0,d=o.length;h<d;++h){var f=o[h];if(!xW(l,a,f,c,undefined))return!1;f.length&&(a=f[f.length-1])}return!0}(o,0,this.endss_,this.stride)?(this.orientedFlatCoordinates_=o.slice(),this.orientedFlatCoordinates_.length=EW(this.orientedFlatCoordinates_,0,this.endss_,this.stride)):this.orientedFlatCoordinates_=o,this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_},a.prototype.getSimplifiedGeometryInternal=function(o){var c=[],u=[];return c.length=function(l,a,o,c,u,h,d,f){for(var m=0,g=o.length;m<g;++m){var y=o[m],v=[];d=yW(l,a,y,c,u,h,d,v),f.push(v),a=y[y.length-1]}return d}(this.flatCoordinates,0,this.endss_,this.stride,Math.sqrt(o),c,0,u),new a(c,"XY",u)},a.prototype.getPolygon=function(o){if(o<0||this.endss_.length<=o)return null;var c;if(0===o)c=0;else{var u=this.endss_[o-1];c=u[u.length-1]}var h=this.endss_[o].slice(),d=h[h.length-1];if(0!==c)for(var f=0,m=h.length;f<m;++f)h[f]-=c;return new Ch(this.flatCoordinates.slice(c,d),this.layout,h)},a.prototype.getPolygons=function(){for(var o=this.layout,c=this.flatCoordinates,u=this.endss_,h=[],d=0,f=0,m=u.length;f<m;++f){var g=u[f].slice(),y=g[g.length-1];if(0!==d)for(var v=0,_=g.length;v<_;++v)g[v]-=d;var b=new Ch(c.slice(d,y),o,g);h.push(b),d=y}return h},a.prototype.getType=function(){return"MultiPolygon"},a.prototype.intersectsExtent=function(o){return function(l,a,o,c,u){for(var h=0,d=o.length;h<d;++h){var f=o[h];if(CW(l,a,f,c,u))return!0;a=f[f.length-1]}return!1}(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,o)},a.prototype.setCoordinates=function(o,c){this.setLayout(c,o,3),this.flatCoordinates||(this.flatCoordinates=[]);var u=function(l,a,o,c,u){for(var h=u||[],d=0,f=0,m=o.length;f<m;++f){var g=VN(l,a,o[f],c,h[d]);h[d++]=g,a=g[g.length-1]}return h.length=d,h}(this.flatCoordinates,0,o,this.stride,this.endss_);if(0===u.length)this.flatCoordinates.length=0;else{var h=u[u.length-1];this.flatCoordinates.length=0===h.length?0:h[h.length-1]}this.changed()},a}(rg);var uxe=function(){var l=function(a,o){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,u){c.__proto__=u}||function(c,u){for(var h in u)Object.prototype.hasOwnProperty.call(u,h)&&(c[h]=u[h])})(a,o)};return function(a,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function c(){this.constructor=a}l(a,o),a.prototype=null===o?Object.create(o):(c.prototype=o.prototype,new c)}}();function gF(l,a){if(!l)return null;var o;switch(l.type){case"Point":o=function(l){return new wh(l.coordinates)}(l);break;case"LineString":o=function(l){return new zd(l.coordinates)}(l);break;case"Polygon":o=function(l){return new Ch(l.coordinates)}(l);break;case"MultiPoint":o=function(l){return new AT(l.coordinates)}(l);break;case"MultiLineString":o=function(l){return new DT(l.coordinates)}(l);break;case"MultiPolygon":o=function(l){return new TM(l.coordinates)}(l);break;case"GeometryCollection":o=function(l,a){var o=l.geometries.map(function(c){return gF(c,undefined)});return new cg(o)}(l);break;default:throw new Error("Unsupported GeoJSON type: "+l.type)}return h_(o,!1,a)}function yF(l,a){var c,o=(l=h_(l,!0,a)).getType();switch(o){case"Point":c=function(l,a){return{type:"Point",coordinates:l.getCoordinates()}}(l);break;case"LineString":c=function(l,a){return{type:"LineString",coordinates:l.getCoordinates()}}(l);break;case"Polygon":c=function(l,a){var o;return a&&(o=a.rightHanded),{type:"Polygon",coordinates:l.getCoordinates(o)}}(l,a);break;case"MultiPoint":c=function(l,a){return{type:"MultiPoint",coordinates:l.getCoordinates()}}(l);break;case"MultiLineString":c=function(l,a){return{type:"MultiLineString",coordinates:l.getCoordinates()}}(l);break;case"MultiPolygon":c=function(l,a){var o;return a&&(o=a.rightHanded),{type:"MultiPolygon",coordinates:l.getCoordinates(o)}}(l,a);break;case"GeometryCollection":c=function(l,a){return{type:"GeometryCollection",geometries:l.getGeometriesArray().map(function(c){var u=Gr({},a);return delete u.featureProjection,yF(c,u)})}}(l,a);break;case"Circle":c={type:"GeometryCollection",geometries:[]};break;default:throw new Error("Unsupported geometry type: "+o)}return c}const _l=function(l){function a(o){var c=this,u=o||{};return(c=l.call(this)||this).dataProjection=Bn(u.dataProjection?u.dataProjection:"EPSG:4326"),u.featureProjection&&(c.defaultFeatureProjection=Bn(u.featureProjection)),c.geometryName_=u.geometryName,c.extractGeometryName_=u.extractGeometryName,c.supportedMediaTypes=["application/geo+json","application/vnd.geo+json"],c}return uxe(a,l),a.prototype.readFeatureFromObject=function(o,c){var u,h=gF((u="Feature"===o.type?o:{type:"Feature",geometry:o,properties:null}).geometry,c),d=new u_;return this.geometryName_?d.setGeometryName(this.geometryName_):this.extractGeometryName_&&"geometry_name"in u!==void 0&&d.setGeometryName(u.geometry_name),d.setGeometry(h),"id"in u&&d.setId(u.id),u.properties&&d.setProperties(u.properties,!0),d},a.prototype.readFeaturesFromObject=function(o,c){var h=null;if("FeatureCollection"===o.type){h=[];for(var f=o.features,m=0,g=f.length;m<g;++m)h.push(this.readFeatureFromObject(f[m],c))}else h=[this.readFeatureFromObject(o,c)];return h},a.prototype.readGeometryFromObject=function(o,c){return gF(o,c)},a.prototype.readProjectionFromObject=function(o){var u,c=o.crs;return c?"name"==c.type?u=Bn(c.properties.name):"EPSG"===c.type?u=Bn("EPSG:"+c.properties.code):Yn(!1,36):u=this.dataProjection,u},a.prototype.writeFeatureObject=function(o,c){c=this.adaptOptions(c);var u={type:"Feature",geometry:null,properties:null},h=o.getId();if(void 0!==h&&(u.id=h),!o.hasProperties())return u;var d=o.getProperties(),f=o.getGeometry();return f&&(u.geometry=yF(f,c),delete d[o.getGeometryName()]),Zm(d)||(u.properties=d),u},a.prototype.writeFeaturesObject=function(o,c){c=this.adaptOptions(c);for(var u=[],h=0,d=o.length;h<d;++h)u.push(this.writeFeatureObject(o[h],c));return{type:"FeatureCollection",features:u}},a.prototype.writeGeometryObject=function(o,c){return yF(o,this.adaptOptions(c))},a}(Dq);var Iq=[1,0,0,1,0,0],IT=function(){function l(a,o,c,u,h){this.id_=h,this.type_=a,this.flatCoordinates_=o,this.flatInteriorPoints_=null,this.flatMidpoints_=null,this.ends_=c,this.properties_=u}return l.prototype.get=function(a){return this.properties_[a]},l.prototype.getExtent=function(){return this.extent_||(this.extent_="Point"===this.type_?sN(this.flatCoordinates_):oN(this.flatCoordinates_,0,this.flatCoordinates_.length,2)),this.extent_},l.prototype.getFlatInteriorPoint=function(){if(!this.flatInteriorPoints_){var a=ml(this.getExtent());this.flatInteriorPoints_=UN(this.flatCoordinates_,0,this.ends_,2,a,0)}return this.flatInteriorPoints_},l.prototype.getFlatInteriorPoints=function(){if(!this.flatInteriorPoints_){var a=Aq(this.flatCoordinates_,0,this.ends_,2);this.flatInteriorPoints_=TW(this.flatCoordinates_,0,this.ends_,2,a)}return this.flatInteriorPoints_},l.prototype.getFlatMidpoint=function(){return this.flatMidpoints_||(this.flatMidpoints_=SM(this.flatCoordinates_,0,this.flatCoordinates_.length,2,.5)),this.flatMidpoints_},l.prototype.getFlatMidpoints=function(){if(!this.flatMidpoints_){this.flatMidpoints_=[];for(var a=this.flatCoordinates_,o=0,c=this.ends_,u=0,h=c.length;u<h;++u){var d=c[u],f=SM(a,o,d,2,.5);es(this.flatMidpoints_,f),o=d}}return this.flatMidpoints_},l.prototype.getId=function(){return this.id_},l.prototype.getOrientedFlatCoordinates=function(){return this.flatCoordinates_},l.prototype.getGeometry=function(){return this},l.prototype.getSimplifiedGeometry=function(a){return this},l.prototype.simplifyTransformed=function(a,o){return this},l.prototype.getProperties=function(){return this.properties_},l.prototype.getStride=function(){return 2},l.prototype.getStyleFunction=function(){},l.prototype.getType=function(){return this.type_},l.prototype.transform=function(a){var o=(a=Bn(a)).getExtent(),c=a.getWorldExtent();if(o&&c){var u=bs(c)/bs(o);Fa(Iq,c[0],c[3],u,-u,0,0,0),Jf(this.flatCoordinates_,0,this.flatCoordinates_.length,2,Iq,this.flatCoordinates_)}},l.prototype.getEnds=function(){return this.ends_},l}();IT.prototype.getEndss=IT.prototype.getEnds,IT.prototype.getFlatCoordinates=IT.prototype.getOrientedFlatCoordinates;const vF=IT,op=function(){function l(a){var o=a||{};this.font_=o.font,this.rotation_=o.rotation,this.rotateWithView_=o.rotateWithView,this.scale_=o.scale,this.scaleArray_=ga(void 0!==o.scale?o.scale:1),this.text_=o.text,this.textAlign_=o.textAlign,this.textBaseline_=o.textBaseline,this.fill_=void 0!==o.fill?o.fill:new Pi({color:"#333"}),this.maxAngle_=void 0!==o.maxAngle?o.maxAngle:Math.PI/4,this.placement_=void 0!==o.placement?o.placement:"point",this.overflow_=!!o.overflow,this.stroke_=void 0!==o.stroke?o.stroke:null,this.offsetX_=void 0!==o.offsetX?o.offsetX:0,this.offsetY_=void 0!==o.offsetY?o.offsetY:0,this.backgroundFill_=o.backgroundFill?o.backgroundFill:null,this.backgroundStroke_=o.backgroundStroke?o.backgroundStroke:null,this.padding_=void 0===o.padding?null:o.padding}return l.prototype.clone=function(){var a=this.getScale();return new l({font:this.getFont(),placement:this.getPlacement(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(a)?a.slice():a,text:this.getText(),textAlign:this.getTextAlign(),textBaseline:this.getTextBaseline(),fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():void 0,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0,padding:this.getPadding()})},l.prototype.getOverflow=function(){return this.overflow_},l.prototype.getFont=function(){return this.font_},l.prototype.getMaxAngle=function(){return this.maxAngle_},l.prototype.getPlacement=function(){return this.placement_},l.prototype.getOffsetX=function(){return this.offsetX_},l.prototype.getOffsetY=function(){return this.offsetY_},l.prototype.getFill=function(){return this.fill_},l.prototype.getRotateWithView=function(){return this.rotateWithView_},l.prototype.getRotation=function(){return this.rotation_},l.prototype.getScale=function(){return this.scale_},l.prototype.getScaleArray=function(){return this.scaleArray_},l.prototype.getStroke=function(){return this.stroke_},l.prototype.getText=function(){return this.text_},l.prototype.getTextAlign=function(){return this.textAlign_},l.prototype.getTextBaseline=function(){return this.textBaseline_},l.prototype.getBackgroundFill=function(){return this.backgroundFill_},l.prototype.getBackgroundStroke=function(){return this.backgroundStroke_},l.prototype.getPadding=function(){return this.padding_},l.prototype.setOverflow=function(a){this.overflow_=a},l.prototype.setFont=function(a){this.font_=a},l.prototype.setMaxAngle=function(a){this.maxAngle_=a},l.prototype.setOffsetX=function(a){this.offsetX_=a},l.prototype.setOffsetY=function(a){this.offsetY_=a},l.prototype.setPlacement=function(a){this.placement_=a},l.prototype.setRotateWithView=function(a){this.rotateWithView_=a},l.prototype.setFill=function(a){this.fill_=a},l.prototype.setRotation=function(a){this.rotation_=a},l.prototype.setScale=function(a){this.scale_=a,this.scaleArray_=ga(void 0!==a?a:1)},l.prototype.setStroke=function(a){this.stroke_=a},l.prototype.setText=function(a){this.text_=a},l.prototype.setTextAlign=function(a){this.textAlign_=a},l.prototype.setTextBaseline=function(a){this.textBaseline_=a},l.prototype.setBackgroundFill=function(a){this.backgroundFill_=a},l.prototype.setBackgroundStroke=function(a){this.backgroundStroke_=a},l.prototype.setPadding=function(a){this.padding_=a},l}();var Rq=Ve(728),ea={$version:8,$root:{version:{required:!0,type:"enum",values:[8],doc:"Style specification version number. Must be 8.",example:8},name:{type:"string",doc:"A human-readable name for the style.",example:"Bright"},metadata:{type:"*",doc:"Arbitrary properties useful to track with the stylesheet, but do not influence rendering. Properties should be prefixed to avoid collisions, like 'mapbox:'."},center:{type:"array",value:"number",doc:"Default map center in longitude and latitude.  The style center will be used only if the map has not been positioned by other means (e.g. map options or user interaction).",example:[-73.9749,40.7736]},zoom:{type:"number",doc:"Default zoom level.  The style zoom will be used only if the map has not been positioned by other means (e.g. map options or user interaction).",example:12.5},bearing:{type:"number",default:0,period:360,units:"degrees",doc:'Default bearing, in degrees. The bearing is the compass direction that is "up"; for example, a bearing of 90\xb0 orients the map so that east is up. This value will be used only if the map has not been positioned by other means (e.g. map options or user interaction).',example:29},pitch:{type:"number",default:0,units:"degrees",doc:"Default pitch, in degrees. Zero is perpendicular to the surface, for a look straight down at the map, while a greater value like 60 looks ahead towards the horizon. The style pitch will be used only if the map has not been positioned by other means (e.g. map options or user interaction).",example:50},light:{type:"light",doc:"The global light source.",example:{anchor:"viewport",color:"white",intensity:.4}},terrain:{type:"terrain",doc:"A global modifier that elevates layers and markers based on a DEM data source."},fog:{type:"fog",doc:"A global effect that fades layers and markers based on their distance to the camera. The fog can be used to approximate the effect of atmosphere on distant objects and enhance the depth perception of the map when used with terrain or 3D features."},sources:{required:!0,type:"sources",doc:"Data source specifications.",example:{"mapbox-streets":{type:"vector",url:"mapbox://mapbox.mapbox-streets-v6"}}},sprite:{type:"string",doc:"A base URL for retrieving the sprite image and metadata. The extensions `.png`, `.json` and scale factor `@2x.png` will be automatically appended. This property is required if any layer uses the `background-pattern`, `fill-pattern`, `line-pattern`, `fill-extrusion-pattern`, or `icon-image` properties. The URL must be absolute, containing the [scheme, authority and path components](https://en.wikipedia.org/wiki/URL#Syntax).",example:"mapbox://sprites/mapbox/bright-v8"},glyphs:{type:"string",doc:"A URL template for loading signed-distance-field glyph sets in PBF format. The URL must include `{fontstack}` and `{range}` tokens. This property is required if any layer uses the `text-field` layout property. The URL must be absolute, containing the [scheme, authority and path components](https://en.wikipedia.org/wiki/URL#Syntax).",example:"mapbox://fonts/mapbox/{fontstack}/{range}.pbf"},transition:{type:"transition",doc:"A global transition definition to use as a default across properties, to be used for timing transitions between one value and the next when no property-specific transition is set. Collision-based symbol fading is controlled independently of the style's `transition` property.",example:{duration:300,delay:0}},layers:{required:!0,type:"array",value:"layer",doc:"Layers will be drawn in the order of this array.",example:[{id:"water",source:"mapbox-streets","source-layer":"water",type:"fill",paint:{"fill-color":"#00ffff"}}]}},sources:{"*":{type:"source",doc:"Specification of a data source. For vector and raster sources, either TileJSON or a URL to a TileJSON must be provided. For image and video sources, a URL must be provided. For GeoJSON sources, a URL or inline GeoJSON must be provided."}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{doc:"A vector tile source."}},doc:"The type of the source."},url:{type:"string",doc:"A URL to a TileJSON resource. Supported protocols are `http:`, `https:`, and `mapbox://<Tileset ID>`."},tiles:{type:"array",value:"string",doc:"An array of one or more tile source URLs, as in the TileJSON spec."},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129],doc:"An array containing the longitude and latitude of the southwest and northeast corners of the source's bounding box in the following order: `[sw.lng, sw.lat, ne.lng, ne.lat]`. When this property is included in a source, no tiles outside of the given bounds are requested by Mapbox GL."},scheme:{type:"enum",values:{xyz:{doc:"Slippy map tilenames scheme."},tms:{doc:"OSGeo spec scheme."}},default:"xyz",doc:"Influences the y direction of the tile coordinates. The global-mercator (aka Spherical Mercator) profile is assumed."},minzoom:{type:"number",default:0,doc:"Minimum zoom level for which tiles are available, as in the TileJSON spec."},maxzoom:{type:"number",default:22,doc:"Maximum zoom level for which tiles are available, as in the TileJSON spec. Data from tiles at the maxzoom are used when displaying the map at higher zoom levels."},attribution:{type:"string",doc:"Contains an attribution to be displayed when the map is shown to a user."},promoteId:{type:"promoteId",doc:"A property to use as a feature id (for feature state). Either a property name, or an object of the form `{<sourceLayer>: <propertyName>}`. If specified as a string for a vector tile source, the same property is used across all its source layers."},volatile:{type:"boolean",default:!1,doc:"A setting to determine whether a source's tiles are cached locally.","sdk-support":{"basic functionality":{android:"9.3.0",ios:"5.10.0"}}},"*":{type:"*",doc:"Other keys to configure the data source."}},source_raster:{type:{required:!0,type:"enum",values:{raster:{doc:"A raster tile source."}},doc:"The type of the source."},url:{type:"string",doc:"A URL to a TileJSON resource. Supported protocols are `http:`, `https:`, and `mapbox://<Tileset ID>`."},tiles:{type:"array",value:"string",doc:"An array of one or more tile source URLs, as in the TileJSON spec."},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129],doc:"An array containing the longitude and latitude of the southwest and northeast corners of the source's bounding box in the following order: `[sw.lng, sw.lat, ne.lng, ne.lat]`. When this property is included in a source, no tiles outside of the given bounds are requested by Mapbox GL."},minzoom:{type:"number",default:0,doc:"Minimum zoom level for which tiles are available, as in the TileJSON spec."},maxzoom:{type:"number",default:22,doc:"Maximum zoom level for which tiles are available, as in the TileJSON spec. Data from tiles at the maxzoom are used when displaying the map at higher zoom levels."},tileSize:{type:"number",default:512,units:"pixels",doc:"The minimum visual size to display tiles for this layer. Only configurable for raster layers."},scheme:{type:"enum",values:{xyz:{doc:"Slippy map tilenames scheme."},tms:{doc:"OSGeo spec scheme."}},default:"xyz",doc:"Influences the y direction of the tile coordinates. The global-mercator (aka Spherical Mercator) profile is assumed."},attribution:{type:"string",doc:"Contains an attribution to be displayed when the map is shown to a user."},volatile:{type:"boolean",default:!1,doc:"A setting to determine whether a source's tiles are cached locally.","sdk-support":{"basic functionality":{android:"9.3.0",ios:"5.10.0"}}},"*":{type:"*",doc:"Other keys to configure the data source."}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{doc:"A RGB-encoded raster DEM source"}},doc:"The type of the source."},url:{type:"string",doc:"A URL to a TileJSON resource. Supported protocols are `http:`, `https:`, and `mapbox://<Tileset ID>`."},tiles:{type:"array",value:"string",doc:"An array of one or more tile source URLs, as in the TileJSON spec."},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129],doc:"An array containing the longitude and latitude of the southwest and northeast corners of the source's bounding box in the following order: `[sw.lng, sw.lat, ne.lng, ne.lat]`. When this property is included in a source, no tiles outside of the given bounds are requested by Mapbox GL."},minzoom:{type:"number",default:0,doc:"Minimum zoom level for which tiles are available, as in the TileJSON spec."},maxzoom:{type:"number",default:22,doc:"Maximum zoom level for which tiles are available, as in the TileJSON spec. Data from tiles at the maxzoom are used when displaying the map at higher zoom levels."},tileSize:{type:"number",default:512,units:"pixels",doc:"The minimum visual size to display tiles for this layer. Only configurable for raster layers."},attribution:{type:"string",doc:"Contains an attribution to be displayed when the map is shown to a user."},encoding:{type:"enum",values:{terrarium:{doc:"Terrarium format PNG tiles. See https://aws.amazon.com/es/public-datasets/terrain/ for more info."},mapbox:{doc:"Mapbox Terrain RGB tiles. See https://www.mapbox.com/help/access-elevation-data/#mapbox-terrain-rgb for more info."}},default:"mapbox",doc:"The encoding used by this source. Mapbox Terrain RGB is used by default"},volatile:{type:"boolean",default:!1,doc:"A setting to determine whether a source's tiles are cached locally.","sdk-support":{"basic functionality":{android:"9.3.0",ios:"5.10.0"}}},"*":{type:"*",doc:"Other keys to configure the data source."}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{doc:"A GeoJSON data source."}},doc:"The data type of the GeoJSON source."},data:{type:"*",doc:"A URL to a GeoJSON file, or inline GeoJSON."},maxzoom:{type:"number",default:18,doc:"Maximum zoom level at which to create vector tiles (higher means greater detail at high zoom levels)."},attribution:{type:"string",doc:"Contains an attribution to be displayed when the map is shown to a user."},buffer:{type:"number",default:128,maximum:512,minimum:0,doc:"Size of the tile buffer on each side. A value of 0 produces no buffer. A value of 512 produces a buffer as wide as the tile itself. Larger values produce fewer rendering artifacts near tile edges and slower performance."},filter:{type:"*",doc:"An expression for filtering features prior to processing them for rendering."},tolerance:{type:"number",default:.375,doc:"Douglas-Peucker simplification tolerance (higher means simpler geometries and faster performance)."},cluster:{type:"boolean",default:!1,doc:"If the data is a collection of point features, setting this to true clusters the points by radius into groups. Cluster groups become new `Point` features in the source with additional properties:\n * `cluster` Is `true` if the point is a cluster \n * `cluster_id` A unqiue id for the cluster to be used in conjunction with the [cluster inspection methods](https://www.mapbox.com/mapbox-gl-js/api/#geojsonsource#getclusterexpansionzoom)\n * `point_count` Number of original points grouped into this cluster\n * `point_count_abbreviated` An abbreviated point count"},clusterRadius:{type:"number",default:50,minimum:0,doc:"Radius of each cluster if clustering is enabled. A value of 512 indicates a radius equal to the width of a tile."},clusterMaxZoom:{type:"number",doc:"Max zoom on which to cluster points if clustering is enabled. Defaults to one zoom less than maxzoom (so that last zoom features are not clustered). Clusters are re-evaluated at integer zoom levels so setting clusterMaxZoom to 14 means the clusters will be displayed until z15."},clusterMinPoints:{type:"number",doc:"Minimum number of points necessary to form a cluster if clustering is enabled. Defaults to `2`."},clusterProperties:{type:"*",doc:'An object defining custom properties on the generated clusters if clustering is enabled, aggregating values from clustered points. Has the form `{"property_name": [operator, map_expression]}`. `operator` is any expression function that accepts at least 2 operands (e.g. `"+"` or `"max"`) \u2014 it accumulates the property value from clusters/points the cluster contains; `map_expression` produces the value of a single point.\n\nExample: `{"sum": ["+", ["get", "scalerank"]]}`.\n\nFor more advanced use cases, in place of `operator`, you can use a custom reduce expression that references a special `["accumulated"]` value, e.g.:\n`{"sum": [["+", ["accumulated"], ["get", "sum"]], ["get", "scalerank"]]}`'},lineMetrics:{type:"boolean",default:!1,doc:"Whether to calculate line distance metrics. This is required for line layers that specify `line-gradient` values."},generateId:{type:"boolean",default:!1,doc:"Whether to generate ids for the geojson features. When enabled, the `feature.id` property will be auto assigned based on its index in the `features` array, over-writing any previous values."},promoteId:{type:"promoteId",doc:"A property to use as a feature id (for feature state). Either a property name, or an object of the form `{<sourceLayer>: <propertyName>}`."}},source_video:{type:{required:!0,type:"enum",values:{video:{doc:"A video data source."}},doc:"The data type of the video source."},urls:{required:!0,type:"array",value:"string",doc:"URLs to video content in order of preferred format."},coordinates:{required:!0,doc:"Corners of video specified in longitude, latitude pairs.",type:"array",length:4,value:{type:"array",length:2,value:"number",doc:"A single longitude, latitude pair."}}},source_image:{type:{required:!0,type:"enum",values:{image:{doc:"An image data source."}},doc:"The data type of the image source."},url:{required:!0,type:"string",doc:"URL that points to an image."},coordinates:{required:!0,doc:"Corners of image specified in longitude, latitude pairs.",type:"array",length:4,value:{type:"array",length:2,value:"number",doc:"A single longitude, latitude pair."}}},layer:{id:{type:"string",doc:"Unique layer name.",required:!0},type:{type:"enum",values:{fill:{doc:"A filled polygon with an optional stroked border.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}}},line:{doc:"A stroked line.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}}},symbol:{doc:"An icon or a text label.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}}},circle:{doc:"A filled circle.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}}},heatmap:{doc:"A heatmap.","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"fill-extrusion":{doc:"An extruded (3D) polygon.","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}}},raster:{doc:"Raster map textures such as satellite imagery.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}}},hillshade:{doc:"Client-side hillshading visualization based on DEM data. Currently, the implementation only supports Mapbox Terrain RGB and Mapzen Terrarium tiles.","sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},background:{doc:"The background color or pattern of the map.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}}},sky:{doc:"A spherical dome around the map that is always rendered behind all other layers.","sdk-support":{"basic functionality":{js:"2.0.0",ios:"10.0.0",android:"10.0.0"}}}},doc:"Rendering type of this layer.",required:!0},metadata:{type:"*",doc:"Arbitrary properties useful to track with the layer, but do not influence rendering. Properties should be prefixed to avoid collisions, like 'mapbox:'."},source:{type:"string",doc:"Name of a source description to be used for this layer. Required for all layer types except `background`."},"source-layer":{type:"string",doc:"Layer to use from a vector tile source. Required for vector tile sources; prohibited for all other source types, including GeoJSON sources."},minzoom:{type:"number",minimum:0,maximum:24,doc:"The minimum zoom level for the layer. At zoom levels less than the minzoom, the layer will be hidden."},maxzoom:{type:"number",minimum:0,maximum:24,doc:"The maximum zoom level for the layer. At zoom levels equal to or greater than the maxzoom, the layer will be hidden."},filter:{type:"filter",doc:"A expression specifying conditions on source features. Only features that match the filter are displayed. Zoom expressions in filters are only evaluated at integer zoom levels. The `feature-state` expression is not supported in filter expressions."},layout:{type:"layout",doc:"Layout properties for the layer."},paint:{type:"paint",doc:"Default paint properties for this layer."}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background","layout_sky"],layout_background:{visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},"property-type":"constant"}},layout_sky:{visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"2.0.0",ios:"10.0.0",android:"10.0.0"}},"property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",doc:"Sorts features in ascending order based on this value. Features with a higher sort key will appear above features with a lower sort key.","sdk-support":{"basic functionality":{js:"1.2.0",android:"9.1.0",ios:"5.8.0",macos:"0.15.0"},"data-driven styling":{js:"1.2.0",android:"9.1.0",ios:"5.8.0",macos:"0.15.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},"property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",doc:"Sorts features in ascending order based on this value. Features with a higher sort key will appear above features with a lower sort key.","sdk-support":{"basic functionality":{js:"1.2.0",android:"9.2.0",ios:"5.9.0",macos:"0.16.0"},"data-driven styling":{js:"1.2.0",android:"9.2.0",ios:"5.9.0",macos:"0.16.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},"property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},"property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},"property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{doc:"A cap with a squared-off end which is drawn to the exact endpoint of the line."},round:{doc:"A cap with a rounded end which is drawn beyond the endpoint of the line at a radius of one-half of the line's width and centered on the endpoint of the line."},square:{doc:"A cap with a squared-off end which is drawn beyond the endpoint of the line at a distance of one-half of the line's width."}},default:"butt",doc:"The display of line endings.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"2.3.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-join":{type:"enum",values:{bevel:{doc:"A join with a squared-off end which is drawn beyond the endpoint of the line at a distance of one-half of the line's width."},round:{doc:"A join with a rounded end which is drawn beyond the endpoint of the line at a radius of one-half of the line's width and centered on the endpoint of the line."},miter:{doc:"A join with a sharp, angled corner which is drawn with the outer sides beyond the endpoint of the path until they meet."}},default:"miter",doc:"The display of lines when joining.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.40.0",android:"5.2.0",ios:"3.7.0",macos:"0.6.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,doc:"Used to automatically convert miter joins to bevel joins for sharp angles.",requires:[{"line-join":"miter"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,doc:"Used to automatically convert round joins to miter joins for shallow angles.",requires:[{"line-join":"round"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",doc:"Sorts features in ascending order based on this value. Features with a higher sort key will appear above features with a lower sort key.","sdk-support":{"basic functionality":{js:"1.2.0",android:"9.1.0",ios:"5.8.0",macos:"0.15.0"},"data-driven styling":{js:"1.2.0",android:"9.1.0",ios:"5.8.0",macos:"0.15.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},"property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{doc:"The label is placed at the point where the geometry is located."},line:{doc:"The label is placed along the line of the geometry. Can only be used on `LineString` and `Polygon` geometries."},"line-center":{doc:"The label is placed at the center of the line of the geometry. Can only be used on `LineString` and `Polygon` geometries. Note that a single feature in a vector tile may contain multiple line geometries."}},default:"point",doc:"Label placement relative to its geometry.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"`line-center` value":{js:"0.47.0",android:"6.4.0",ios:"4.3.0",macos:"0.10.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",doc:"Distance between two symbol anchors.",requires:[{"symbol-placement":"line"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,doc:"If true, the symbols will not cross tile edges to avoid mutual collisions. Recommended in layers that don't have enough padding in the vector tile to prevent collisions, or if it is a point symbol layer placed after a line symbol layer. When using a client that supports global collision detection, like Mapbox GL JS version 0.42.0 or greater, enabling this property is not needed to prevent clipped labels at tile boundaries.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",doc:"Sorts features in ascending order based on this value. Features with lower sort keys are drawn and placed first.  When `icon-allow-overlap` or `text-allow-overlap` is `false`, features with a lower sort key will have priority during placement. When `icon-allow-overlap` or `text-allow-overlap` is set to `true`, features with a higher sort key will overlap over features with a lower sort key.","sdk-support":{"basic functionality":{js:"0.53.0",android:"7.4.0",ios:"4.11.0",macos:"0.14.0"},"data-driven styling":{js:"0.53.0",android:"7.4.0",ios:"4.11.0",macos:"0.14.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{doc:"Sorts symbols by `symbol-sort-key` if set. Otherwise, sorts symbols by their y-position relative to the viewport if `icon-allow-overlap` or `text-allow-overlap` is set to `true` or `icon-ignore-placement` or `text-ignore-placement` is `false`."},"viewport-y":{doc:"Sorts symbols by their y-position relative to the viewport if `icon-allow-overlap` or `text-allow-overlap` is set to `true` or `icon-ignore-placement` or `text-ignore-placement` is `false`."},source:{doc:"Sorts symbols by `symbol-sort-key` if set. Otherwise, no sorting is applied; symbols are rendered in the same order as the source data."}},default:"auto",doc:"Determines whether overlapping symbols in the same layer are rendered in the order that they appear in the data source or by their y-position relative to the viewport. To control the order and prioritization of symbols otherwise, use `symbol-sort-key`.","sdk-support":{"basic functionality":{js:"0.49.0",android:"6.6.0",ios:"4.5.0",macos:"0.12.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,doc:"If true, the icon will be visible even if it collides with other previously drawn symbols.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,doc:"If true, other symbols can be visible even if they collide with the icon.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,doc:"If true, text will display without their corresponding icons when the icon collides with other symbols and the text does not.",requires:["icon-image","text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{doc:"When `symbol-placement` is set to `point`, aligns icons east-west. When `symbol-placement` is set to `line` or `line-center`, aligns icon x-axes with the line."},viewport:{doc:"Produces icons whose x-axes are aligned with the x-axis of the viewport, regardless of the value of `symbol-placement`."},auto:{doc:"When `symbol-placement` is set to `point`, this is equivalent to `viewport`. When `symbol-placement` is set to `line` or `line-center`, this is equivalent to `map`."}},default:"auto",doc:"In combination with `symbol-placement`, determines the rotation behavior of icons.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"`auto` value":{js:"0.25.0",android:"4.2.0",ios:"3.4.0",macos:"0.3.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",doc:"Scales the original size of the icon by the provided factor. The new pixel size of the image will be the original pixel size multiplied by `icon-size`. 1 is the original size; 3 triples the size of the image.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.35.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{doc:"The icon is displayed at its intrinsic aspect ratio."},width:{doc:"The icon is scaled in the x-dimension to fit the width of the text."},height:{doc:"The icon is scaled in the y-dimension to fit the height of the text."},both:{doc:"The icon is scaled in both x- and y-dimensions."}},default:"none",doc:"Scales the icon to fit around the associated text.",requires:["icon-image","text-field"],"sdk-support":{"basic functionality":{js:"0.21.0",android:"4.2.0",ios:"3.4.0",macos:"0.2.1"},"stretchable icons":{js:"1.6.0",android:"9.2.0",ios:"5.8.0",macos:"0.15.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",doc:"Size of the additional area added to dimensions determined by `icon-text-fit`, in clockwise order: top, right, bottom, left.",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],"sdk-support":{"basic functionality":{js:"0.21.0",android:"4.2.0",ios:"3.4.0",macos:"0.2.1"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",doc:"Name of image in sprite to use for drawing an image background.",tokens:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.35.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",doc:"Rotates the icon clockwise.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.21.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",doc:"Size of the additional area around the icon bounding box used for detecting symbol collisions.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,doc:"If true, the icon may be flipped to prevent it from being rendered upside-down.",requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],doc:"Offset distance of icon from its anchor. Positive values indicate right and down, while negative values indicate left and up. Each component is multiplied by the value of `icon-size` to obtain the final offset in pixels. When combined with `icon-rotate` the offset will be as if the rotated direction was up.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{doc:"The center of the icon is placed closest to the anchor."},left:{doc:"The left side of the icon is placed closest to the anchor."},right:{doc:"The right side of the icon is placed closest to the anchor."},top:{doc:"The top of the icon is placed closest to the anchor."},bottom:{doc:"The bottom of the icon is placed closest to the anchor."},"top-left":{doc:"The top left corner of the icon is placed closest to the anchor."},"top-right":{doc:"The top right corner of the icon is placed closest to the anchor."},"bottom-left":{doc:"The bottom left corner of the icon is placed closest to the anchor."},"bottom-right":{doc:"The bottom right corner of the icon is placed closest to the anchor."}},default:"center",doc:"Part of the icon placed closest to the anchor.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.40.0",android:"5.2.0",ios:"3.7.0",macos:"0.6.0"},"data-driven styling":{js:"0.40.0",android:"5.2.0",ios:"3.7.0",macos:"0.6.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{doc:"The icon is aligned to the plane of the map."},viewport:{doc:"The icon is aligned to the plane of the viewport."},auto:{doc:"Automatically matches the value of `icon-rotation-alignment`."}},default:"auto",doc:"Orientation of icon when map is pitched.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.39.0",android:"5.2.0",ios:"3.7.0",macos:"0.6.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{doc:"The text is aligned to the plane of the map."},viewport:{doc:"The text is aligned to the plane of the viewport."},auto:{doc:"Automatically matches the value of `text-rotation-alignment`."}},default:"auto",doc:"Orientation of text when map is pitched.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.21.0",android:"4.2.0",ios:"3.4.0",macos:"0.2.1"},"`auto` value":{js:"0.25.0",android:"4.2.0",ios:"3.4.0",macos:"0.3.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{doc:"When `symbol-placement` is set to `point`, aligns text east-west. When `symbol-placement` is set to `line` or `line-center`, aligns text x-axes with the line."},viewport:{doc:"Produces glyphs whose x-axes are aligned with the x-axis of the viewport, regardless of the value of `symbol-placement`."},auto:{doc:"When `symbol-placement` is set to `point`, this is equivalent to `viewport`. When `symbol-placement` is set to `line` or `line-center`, this is equivalent to `map`."}},default:"auto",doc:"In combination with `symbol-placement`, determines the rotation behavior of the individual glyphs forming the text.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"`auto` value":{js:"0.25.0",android:"4.2.0",ios:"3.4.0",macos:"0.3.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,doc:"Value to use for a text label. If a plain `string` is provided, it will be treated as a `formatted` with default/inherited formatting options.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],doc:"Font stack to use for displaying text.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.43.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",doc:"Font size.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.35.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",doc:"The maximum line width for text wrapping.",requires:["text-field",{"symbol-placement":["point"]}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.40.0",android:"5.2.0",ios:"3.7.0",macos:"0.6.0"}},expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",doc:"Text leading value for multi-line text.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"2.3.0"}},expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-letter-spacing":{type:"number",default:0,units:"ems",doc:"Text tracking amount.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.40.0",android:"5.2.0",ios:"3.7.0",macos:"0.6.0"}},expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{doc:"The text is aligned towards the anchor position."},left:{doc:"The text is aligned to the left."},center:{doc:"The text is centered."},right:{doc:"The text is aligned to the right."}},default:"center",doc:"Text justification options.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.39.0",android:"5.2.0",ios:"3.7.0",macos:"0.6.0"},auto:{js:"0.54.0",android:"7.4.0",ios:"4.10.0",macos:"0.14.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,doc:"Radial offset of text, in the direction of the symbol's anchor. Useful in combination with `text-variable-anchor`, which defaults to using the two-dimensional `text-offset` if present.","sdk-support":{"basic functionality":{js:"0.54.0",android:"7.4.0",ios:"4.10.0",macos:"0.14.0"},"data-driven styling":{js:"0.54.0",android:"7.4.0",ios:"4.10.0",macos:"0.14.0"}},requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{doc:"The center of the text is placed closest to the anchor."},left:{doc:"The left side of the text is placed closest to the anchor."},right:{doc:"The right side of the text is placed closest to the anchor."},top:{doc:"The top of the text is placed closest to the anchor."},bottom:{doc:"The bottom of the text is placed closest to the anchor."},"top-left":{doc:"The top left corner of the text is placed closest to the anchor."},"top-right":{doc:"The top right corner of the text is placed closest to the anchor."},"bottom-left":{doc:"The bottom left corner of the text is placed closest to the anchor."},"bottom-right":{doc:"The bottom right corner of the text is placed closest to the anchor."}},requires:["text-field",{"symbol-placement":["point"]}],doc:"To increase the chance of placing high-priority labels on the map, you can provide an array of `text-anchor` locations: the renderer will attempt to place the label at each location, in order, before moving onto the next label. Use `text-justify: auto` to choose justification based on anchor position. To apply an offset, use the `text-radial-offset` or the two-dimensional `text-offset`.","sdk-support":{"basic functionality":{js:"0.54.0",android:"7.4.0",ios:"4.10.0",macos:"0.14.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{doc:"The center of the text is placed closest to the anchor."},left:{doc:"The left side of the text is placed closest to the anchor."},right:{doc:"The right side of the text is placed closest to the anchor."},top:{doc:"The top of the text is placed closest to the anchor."},bottom:{doc:"The bottom of the text is placed closest to the anchor."},"top-left":{doc:"The top left corner of the text is placed closest to the anchor."},"top-right":{doc:"The top right corner of the text is placed closest to the anchor."},"bottom-left":{doc:"The bottom left corner of the text is placed closest to the anchor."},"bottom-right":{doc:"The bottom right corner of the text is placed closest to the anchor."}},default:"center",doc:"Part of the text placed closest to the anchor.",requires:["text-field",{"!":"text-variable-anchor"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.39.0",android:"5.2.0",ios:"3.7.0",macos:"0.6.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",doc:"Maximum angle change between adjacent characters.",requires:["text-field",{"symbol-placement":["line","line-center"]}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{doc:"If a text's language supports horizontal writing mode, symbols would be laid out horizontally."},vertical:{doc:"If a text's language supports vertical writing mode, symbols would be laid out vertically."}},doc:"The property allows control over a symbol's orientation. Note that the property values act as a hint, so that a symbol whose language doesn\u2019t support the provided orientation will be laid out in its natural orientation. Example: English point symbol will be rendered horizontally even if array value contains single 'vertical' enum value. For symbol with point placement, the order of elements in an array define priority order for the placement of an orientation variant. For symbol with line placement, the default text writing mode is either ['horizontal', 'vertical'] or ['vertical', 'horizontal'], the order doesn't affect the placement.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"1.3.0",android:"8.3.0",ios:"5.3.0",macos:"0.15.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",doc:"Rotates the text clockwise.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.35.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",doc:"Size of the additional area around the text bounding box used for detecting symbol collisions.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,doc:"If true, the text may be flipped vertically to prevent it from being rendered upside-down.",requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{doc:"The text is not altered."},uppercase:{doc:"Forces all letters to be displayed in uppercase."},lowercase:{doc:"Forces all letters to be displayed in lowercase."}},default:"none",doc:"Specifies how to capitalize text, similar to the CSS `text-transform` property.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",doc:"Offset distance of text from its anchor. Positive values indicate right and down, while negative values indicate left and up. If used with text-variable-anchor, input values will be taken as absolute values. Offsets along the x- and y-axis will be applied automatically based on the anchor position.",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.35.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,doc:"If true, the text will be visible even if it collides with other previously drawn symbols.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,doc:"If true, other symbols can be visible even if they collide with the text.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,doc:"If true, icons will display without their corresponding text when the text collides with other symbols and the icon does not.",requires:["text-field","icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},"property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},"property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},"property-type":"constant"}},filter:{type:"array",value:"*",doc:"A filter selects specific features from a layer."},filter_operator:{type:"enum",values:{"==":{doc:'`["==", key, value]` equality: `feature[key] = value`'},"!=":{doc:'`["!=", key, value]` inequality: `feature[key] \u2260 value`'},">":{doc:'`[">", key, value]` greater than: `feature[key] > value`'},">=":{doc:'`[">=", key, value]` greater than or equal: `feature[key] \u2265 value`'},"<":{doc:'`["<", key, value]` less than: `feature[key] < value`'},"<=":{doc:'`["<=", key, value]` less than or equal: `feature[key] \u2264 value`'},in:{doc:'`["in", key, v0, ..., vn]` set inclusion: `feature[key] \u2208 {v0, ..., vn}`'},"!in":{doc:'`["!in", key, v0, ..., vn]` set exclusion: `feature[key] \u2209 {v0, ..., vn}`'},all:{doc:'`["all", f0, ..., fn]` logical `AND`: `f0 \u2227 ... \u2227 fn`'},any:{doc:'`["any", f0, ..., fn]` logical `OR`: `f0 \u2228 ... \u2228 fn`'},none:{doc:'`["none", f0, ..., fn]` logical `NOR`: `\xacf0 \u2227 ... \u2227 \xacfn`'},has:{doc:'`["has", key]` `feature[key]` exists'},"!has":{doc:'`["!has", key]` `feature[key]` does not exist'},within:{doc:'`["within", object]` feature geometry is within object geometry'}},doc:"The filter operator."},geometry_type:{type:"enum",values:{Point:{doc:"Filter to point geometries."},LineString:{doc:"Filter to line geometries."},Polygon:{doc:"Filter to polygon geometries."}},doc:"The geometry type for the filter to select."},function:{expression:{type:"expression",doc:"An expression."},stops:{type:"array",doc:"An array of stops.",value:"function_stop"},base:{type:"number",default:1,minimum:0,doc:"The exponential base of the interpolation curve. It controls the rate at which the result increases. Higher values make the result increase more towards the high end of the range. With `1` the stops are interpolated linearly."},property:{type:"string",doc:"The name of a feature property to use as the function input.",default:"$zoom"},type:{type:"enum",values:{identity:{doc:"Return the input value as the output value."},exponential:{doc:"Generate an output by interpolating between stops just less than and just greater than the function input."},interval:{doc:"Return the output value of the stop just less than the function input."},categorical:{doc:"Return the output value of the stop equal to the function input."}},doc:"The interpolation strategy to use in function evaluation.",default:"exponential"},colorSpace:{type:"enum",values:{rgb:{doc:"Use the RGB color space to interpolate color values"},lab:{doc:"Use the LAB color space to interpolate color values."},hcl:{doc:"Use the HCL color space to interpolate color values, interpolating the Hue, Chroma, and Luminance channels individually."}},doc:"The color space in which colors interpolated. Interpolating colors in perceptual color spaces like LAB and HCL tend to produce color ramps that look more consistent and produce colors that can be differentiated more easily than those interpolated in RGB space.",default:"rgb"},default:{type:"*",required:!1,doc:"A value to serve as a fallback function result when a value isn't otherwise available. It is used in the following circumstances:\n* In categorical functions, when the feature value does not match any of the stop domain values.\n* In property and zoom-and-property functions, when a feature does not contain a value for the specified property.\n* In identity functions, when the feature value is not valid for the style property (for example, if the function is being used for a `circle-color` property but the feature property value is not a string or not a valid color).\n* In interval or exponential property and zoom-and-property functions, when the feature value is not numeric.\nIf no default is provided, the style property's default is used in these circumstances."}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2,doc:"Zoom level and value pair."},expression:{type:"array",value:"*",minimum:1,doc:"An expression defines a function that can be used for data-driven style properties or feature filters."},expression_name:{doc:"",type:"enum",values:{let:{doc:'Binds expressions to named variables, which can then be referenced in the result expression using ["var", "variable_name"].',group:"Variable binding","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},var:{doc:'References variable bound using "let".',group:"Variable binding","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},literal:{doc:"Provides a literal array or object value.",group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},array:{doc:"Asserts that the input is an array (optionally with a specific item type and length).  If, when the input expression is evaluated, it is not of the asserted type, then this assertion will cause the whole expression to be aborted.",group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},at:{doc:"Retrieves an item from an array.",group:"Lookup","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},in:{doc:"Determines whether an item exists in an array or a substring exists in a string. In the specific case when the second and third arguments are string literals, you must wrap at least one of them in a [`literal`](#types-literal) expression to hint correct interpretation to the [type system](#type-system).",group:"Lookup","sdk-support":{"basic functionality":{js:"1.6.0",android:"9.1.0",ios:"5.8.0",macos:"0.15.0"}}},"index-of":{doc:"Returns the first position at which an item can be found in an array or a substring can be found in a string, or `-1` if the input cannot be found. Accepts an optional index from where to begin the search.",group:"Lookup","sdk-support":{"basic functionality":{js:"1.10.0"}}},slice:{doc:"Returns an item from an array or a substring from a string from a specified start index, or between a start index and an end index if set. The return value is inclusive of the start index but not of the end index.",group:"Lookup","sdk-support":{"basic functionality":{js:"1.10.0"}}},case:{doc:"Selects the first output whose corresponding test condition evaluates to true, or the fallback value otherwise.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},match:{doc:'Selects the output for which the label value matches the input value, or the fallback value if no match is found. The input can be any expression (for example, `["get", "building_type"]`). Each label must be unique, and must be either:\n - a single literal value; or\n - an array of literal values, the values of which must be all strings or all numbers (for example `[100, 101]` or `["c", "b"]`).\n\nThe input matches if any of the values in the array matches using strict equality, similar to the `"in"` operator.\nIf the input type does not match the type of the labels, the result will be the fallback value.',group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},coalesce:{doc:"Evaluates each expression in turn until the first non-null value is obtained, and returns that value.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},step:{doc:'Produces discrete, stepped results by evaluating a piecewise-constant function defined by pairs of input and output values ("stops"). The `input` may be any numeric expression (e.g., `["get", "population"]`). Stop inputs must be numeric literals in strictly ascending order. Returns the output value of the stop just less than the input, or the first output if the input is less than the first stop.',group:"Ramps, scales, curves","sdk-support":{"basic functionality":{js:"0.42.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},interpolate:{doc:'Produces continuous, smooth results by interpolating between pairs of input and output values ("stops"). The `input` may be any numeric expression (e.g., `["get", "population"]`). Stop inputs must be numeric literals in strictly ascending order. The output type must be `number`, `array<number>`, or `color`.\n\nInterpolation types:\n- `["linear"]`: Interpolates linearly between the pair of stops just less than and just greater than the input.\n- `["exponential", base]`: Interpolates exponentially between the stops just less than and just greater than the input. `base` controls the rate at which the output increases: higher values make the output increase more towards the high end of the range. With values close to 1 the output increases linearly.\n- `["cubic-bezier", x1, y1, x2, y2]`: Interpolates using the cubic bezier curve defined by the given control points.',group:"Ramps, scales, curves","sdk-support":{"basic functionality":{js:"0.42.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"interpolate-hcl":{doc:'Produces continuous, smooth results by interpolating between pairs of input and output values ("stops"). Works like `interpolate`, but the output type must be `color`, and the interpolation is performed in the Hue-Chroma-Luminance color space.',group:"Ramps, scales, curves","sdk-support":{"basic functionality":{js:"0.49.0"}}},"interpolate-lab":{doc:'Produces continuous, smooth results by interpolating between pairs of input and output values ("stops"). Works like `interpolate`, but the output type must be `color`, and the interpolation is performed in the CIELAB color space.',group:"Ramps, scales, curves","sdk-support":{"basic functionality":{js:"0.49.0"}}},ln2:{doc:"Returns mathematical constant ln(2).",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},pi:{doc:"Returns the mathematical constant pi.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},e:{doc:"Returns the mathematical constant e.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},typeof:{doc:"Returns a string describing the type of the given value.",group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},string:{doc:"Asserts that the input value is a string. If multiple values are provided, each one is evaluated in order until a string is obtained. If none of the inputs are strings, the expression is an error.",group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},number:{doc:"Asserts that the input value is a number. If multiple values are provided, each one is evaluated in order until a number is obtained. If none of the inputs are numbers, the expression is an error.",group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},boolean:{doc:"Asserts that the input value is a boolean. If multiple values are provided, each one is evaluated in order until a boolean is obtained. If none of the inputs are booleans, the expression is an error.",group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},object:{doc:"Asserts that the input value is an object. If multiple values are provided, each one is evaluated in order until an object is obtained. If none of the inputs are objects, the expression is an error.",group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},collator:{doc:"Returns a `collator` for use in locale-dependent comparison operations. The `case-sensitive` and `diacritic-sensitive` options default to `false`. The `locale` argument specifies the IETF language tag of the locale to use. If none is provided, the default locale is used. If the requested locale is not available, the `collator` will use a system-defined fallback locale. Use `resolved-locale` to test the results of locale fallback behavior.",group:"Types","sdk-support":{"basic functionality":{js:"0.45.0",android:"6.5.0",ios:"4.2.0",macos:"0.9.0"}}},format:{doc:'Returns a `formatted` string for displaying mixed-format text in the `text-field` property. The input may contain a string literal or expression, including an [`\'image\'`](#types-image) expression. Strings may be followed by a style override object that supports the following properties:\n- `"text-font"`: Overrides the font stack specified by the root layout property.\n- `"text-color"`: Overrides the color specified by the root paint property.\n- `"font-scale"`: Applies a scaling factor on `text-size` as specified by the root layout property.',group:"Types","sdk-support":{"basic functionality":{js:"0.48.0",android:"6.7.0",ios:"4.6.0",macos:"0.12.0"},"text-font":{js:"0.48.0",android:"6.7.0",ios:"4.6.0",macos:"0.12.0"},"font-scale":{js:"0.48.0",android:"6.7.0",ios:"4.6.0",macos:"0.12.0"},"text-color":{js:"1.3.0",android:"7.3.0",ios:"4.10.0",macos:"0.14.0"},image:{js:"1.6.0",android:"8.6.0",ios:"5.7.0",macos:"0.15.0"}}},image:{doc:"Returns an `image` type for use in `icon-image`, `*-pattern` entries and as a section in the `format` expression. If set, the `image` argument will check that the requested image exists in the style and will return either the resolved image name or `null`, depending on whether or not the image is currently in the style. This validation process is synchronous and requires the image to have been added to the style before requesting it in the `image` argument.",group:"Types","sdk-support":{"basic functionality":{js:"1.4.0",android:"8.6.0",ios:"5.7.0",macos:"0.15.0"}}},"number-format":{doc:"Converts the input number into a string representation using the providing formatting rules. If set, the `locale` argument specifies the locale to use, as a BCP 47 language tag. If set, the `currency` argument specifies an ISO 4217 code to use for currency-style formatting. If set, the `min-fraction-digits` and `max-fraction-digits` arguments specify the minimum and maximum number of fractional digits to include.",group:"Types","sdk-support":{"basic functionality":{js:"0.54.0",android:"8.4.0",ios:"5.4.0",macos:"0.15.0"}}},"to-string":{doc:'Converts the input value to a string. If the input is `null`, the result is `""`. If the input is a boolean, the result is `"true"` or `"false"`. If the input is a number, it is converted to a string as specified by the ["NumberToString" algorithm](https://tc39.github.io/ecma262/#sec-tostring-applied-to-the-number-type) of the ECMAScript Language Specification. If the input is a color, it is converted to a string of the form `"rgba(r,g,b,a)"`, where `r`, `g`, and `b` are numerals ranging from 0 to 255, and `a` ranges from 0 to 1. Otherwise, the input is converted to a string in the format specified by the [`JSON.stringify`](https://tc39.github.io/ecma262/#sec-json.stringify) function of the ECMAScript Language Specification.',group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"to-number":{doc:'Converts the input value to a number, if possible. If the input is `null` or `false`, the result is 0. If the input is `true`, the result is 1. If the input is a string, it is converted to a number as specified by the ["ToNumber Applied to the String Type" algorithm](https://tc39.github.io/ecma262/#sec-tonumber-applied-to-the-string-type) of the ECMAScript Language Specification. If multiple values are provided, each one is evaluated in order until the first successful conversion is obtained. If none of the inputs can be converted, the expression is an error.',group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"to-boolean":{doc:"Converts the input value to a boolean. The result is `false` when then input is an empty string, 0, `false`, `null`, or `NaN`; otherwise it is `true`.",group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"to-rgba":{doc:"Returns a four-element array containing the input color's red, green, blue, and alpha components, in that order.",group:"Color","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"to-color":{doc:"Converts the input value to a color. If multiple values are provided, each one is evaluated in order until the first successful conversion is obtained. If none of the inputs can be converted, the expression is an error.",group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},rgb:{doc:"Creates a color value from red, green, and blue components, which must range between 0 and 255, and an alpha component of 1. If any component is out of range, the expression is an error.",group:"Color","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},rgba:{doc:"Creates a color value from red, green, blue components, which must range between 0 and 255, and an alpha component which must range between 0 and 1. If any component is out of range, the expression is an error.",group:"Color","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},get:{doc:"Retrieves a property value from the current feature's properties, or from another object if a second argument is provided. Returns null if the requested property is missing.",group:"Lookup","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},has:{doc:"Tests for the presence of an property value in the current feature's properties, or from another object if a second argument is provided.",group:"Lookup","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},length:{doc:"Gets the length of an array or string.",group:"Lookup","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},properties:{doc:'Gets the feature properties object.  Note that in some cases, it may be more efficient to use ["get", "property_name"] directly.',group:"Feature data","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"feature-state":{doc:"Retrieves a property value from the current feature's state. Returns null if the requested property is not present on the feature's state. A feature's state is not part of the GeoJSON or vector tile data, and must be set programmatically on each feature. Features are identified by their `id` attribute, which must be an integer or a string that can be cast to an integer. Note that [\"feature-state\"] can only be used with paint properties that support data-driven styling.",group:"Feature data","sdk-support":{"basic functionality":{js:"0.46.0"}}},"geometry-type":{doc:"Gets the feature's geometry type: `Point`, `MultiPoint`, `LineString`, `MultiLineString`, `Polygon`, `MultiPolygon`. `Multi*` feature types are only returned in GeoJSON sources. When working with vector tile sources, use the singular forms.",group:"Feature data","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},id:{doc:"Gets the feature's id, if it has one.",group:"Feature data","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},zoom:{doc:'Gets the current zoom level.  Note that in style layout and paint properties, ["zoom"] may only appear as the input to a top-level "step" or "interpolate" expression.',group:"Zoom","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"heatmap-density":{doc:"Gets the kernel density estimation of a pixel in a heatmap layer, which is a relative measure of how many data points are crowded around a particular pixel. Can only be used in the `heatmap-color` property.",group:"Heatmap","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"line-progress":{doc:"Gets the progress along a gradient line. Can only be used in the `line-gradient` property.",group:"Feature data","sdk-support":{"basic functionality":{js:"0.45.0",android:"6.5.0",ios:"4.6.0",macos:"0.12.0"}}},"sky-radial-progress":{doc:"Gets the distance of a point on the sky from the sun position. Returns 0 at sun position and 1 when the distance reaches `sky-gradient-radius`. Can only be used in the `sky-gradient` property.",group:"sky","sdk-support":{"basic functionality":{js:"2.0.0",ios:"10.0.0",android:"10.0.0"}}},accumulated:{doc:"Gets the value of a cluster property accumulated so far. Can only be used in the `clusterProperties` option of a clustered GeoJSON source.",group:"Feature data","sdk-support":{"basic functionality":{js:"0.53.0",android:"8.4.0",ios:"5.5.0",macos:"0.15.0"}}},"+":{doc:"Returns the sum of the inputs.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"*":{doc:"Returns the product of the inputs.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"-":{doc:"For two inputs, returns the result of subtracting the second input from the first. For a single input, returns the result of subtracting it from 0.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"/":{doc:"Returns the result of floating point division of the first input by the second.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"%":{doc:"Returns the remainder after integer division of the first input by the second.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"^":{doc:"Returns the result of raising the first input to the power specified by the second.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},sqrt:{doc:"Returns the square root of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.42.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},log10:{doc:"Returns the base-ten logarithm of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},ln:{doc:"Returns the natural logarithm of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},log2:{doc:"Returns the base-two logarithm of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},sin:{doc:"Returns the sine of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},cos:{doc:"Returns the cosine of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},tan:{doc:"Returns the tangent of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},asin:{doc:"Returns the arcsine of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},acos:{doc:"Returns the arccosine of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},atan:{doc:"Returns the arctangent of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},min:{doc:"Returns the minimum value of the inputs.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},max:{doc:"Returns the maximum value of the inputs.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},round:{doc:'Rounds the input to the nearest integer. Halfway values are rounded away from zero. For example, `["round", -1.5]` evaluates to -2.',group:"Math","sdk-support":{"basic functionality":{js:"0.45.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},abs:{doc:"Returns the absolute value of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.45.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},ceil:{doc:"Returns the smallest integer that is greater than or equal to the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.45.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},floor:{doc:"Returns the largest integer that is less than or equal to the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.45.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},distance:{doc:"Returns the shortest distance in meters between the evaluated feature and the input geometry. The input value can be a valid GeoJSON of type `Point`, `MultiPoint`, `LineString`, `MultiLineString`, `Polygon`, `MultiPolygon`, `Feature`, or `FeatureCollection`. Distance values returned may vary in precision due to loss in precision from encoding geometries, particularly below zoom level 13.",group:"Math","sdk-support":{"basic functionality":{android:"9.2.0",ios:"5.9.0",macos:"0.16.0"}}},"==":{doc:"Returns `true` if the input values are equal, `false` otherwise. The comparison is strictly typed: values of different runtime types are always considered unequal. Cases where the types are known to be different at parse time are considered invalid and will produce a parse error. Accepts an optional `collator` argument to control locale-dependent string comparisons.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"},collator:{js:"0.45.0",android:"6.5.0",ios:"4.2.0",macos:"0.9.0"}}},"!=":{doc:"Returns `true` if the input values are not equal, `false` otherwise. The comparison is strictly typed: values of different runtime types are always considered unequal. Cases where the types are known to be different at parse time are considered invalid and will produce a parse error. Accepts an optional `collator` argument to control locale-dependent string comparisons.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"},collator:{js:"0.45.0",android:"6.5.0",ios:"4.2.0",macos:"0.9.0"}}},">":{doc:"Returns `true` if the first input is strictly greater than the second, `false` otherwise. The arguments are required to be either both strings or both numbers; if during evaluation they are not, expression evaluation produces an error. Cases where this constraint is known not to hold at parse time are considered in valid and will produce a parse error. Accepts an optional `collator` argument to control locale-dependent string comparisons.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"},collator:{js:"0.45.0",android:"6.5.0",ios:"4.2.0",macos:"0.9.0"}}},"<":{doc:"Returns `true` if the first input is strictly less than the second, `false` otherwise. The arguments are required to be either both strings or both numbers; if during evaluation they are not, expression evaluation produces an error. Cases where this constraint is known not to hold at parse time are considered in valid and will produce a parse error. Accepts an optional `collator` argument to control locale-dependent string comparisons.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"},collator:{js:"0.45.0",android:"6.5.0",ios:"4.2.0",macos:"0.9.0"}}},">=":{doc:"Returns `true` if the first input is greater than or equal to the second, `false` otherwise. The arguments are required to be either both strings or both numbers; if during evaluation they are not, expression evaluation produces an error. Cases where this constraint is known not to hold at parse time are considered in valid and will produce a parse error. Accepts an optional `collator` argument to control locale-dependent string comparisons.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"},collator:{js:"0.45.0",android:"6.5.0",ios:"4.2.0",macos:"0.9.0"}}},"<=":{doc:"Returns `true` if the first input is less than or equal to the second, `false` otherwise. The arguments are required to be either both strings or both numbers; if during evaluation they are not, expression evaluation produces an error. Cases where this constraint is known not to hold at parse time are considered in valid and will produce a parse error. Accepts an optional `collator` argument to control locale-dependent string comparisons.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"},collator:{js:"0.45.0",android:"6.5.0",ios:"4.2.0",macos:"0.9.0"}}},all:{doc:"Returns `true` if all the inputs are `true`, `false` otherwise. The inputs are evaluated in order, and evaluation is short-circuiting: once an input expression evaluates to `false`, the result is `false` and no further input expressions are evaluated.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},any:{doc:"Returns `true` if any of the inputs are `true`, `false` otherwise. The inputs are evaluated in order, and evaluation is short-circuiting: once an input expression evaluates to `true`, the result is `true` and no further input expressions are evaluated.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"!":{doc:"Logical negation. Returns `true` if the input is `false`, and `false` if the input is `true`.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},within:{doc:"Returns `true` if the evaluated feature is fully contained inside a boundary of the input geometry, `false` otherwise. The input value can be a valid GeoJSON of type `Polygon`, `MultiPolygon`, `Feature`, or `FeatureCollection`. Supported features for evaluation:\n- `Point`: Returns `false` if a point is on the boundary or falls outside the boundary.\n- `LineString`: Returns `false` if any part of a line falls outside the boundary, the line intersects the boundary, or a line's endpoint is on the boundary.",group:"Decision","sdk-support":{"basic functionality":{js:"1.9.0",android:"9.1.0",ios:"5.8.0",macos:"0.15.0"}}},"is-supported-script":{doc:"Returns `true` if the input string is expected to render legibly. Returns `false` if the input string contains sections that cannot be rendered without potential loss of meaning (e.g. Indic scripts that require complex text shaping, or right-to-left scripts if the the `mapbox-gl-rtl-text` plugin is not in use in Mapbox GL JS).",group:"String","sdk-support":{"basic functionality":{js:"0.45.0",android:"6.6.0"}}},upcase:{doc:"Returns the input string converted to uppercase. Follows the Unicode Default Case Conversion algorithm and the locale-insensitive case mappings in the Unicode Character Database.",group:"String","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},downcase:{doc:"Returns the input string converted to lowercase. Follows the Unicode Default Case Conversion algorithm and the locale-insensitive case mappings in the Unicode Character Database.",group:"String","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},concat:{doc:"Returns a `string` consisting of the concatenation of the inputs. Each input is converted to a string as if by `to-string`.",group:"String","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"resolved-locale":{doc:"Returns the IETF language tag of the locale being used by the provided `collator`. This can be used to determine the default system locale, or to determine if a requested locale was successfully loaded.",group:"String","sdk-support":{"basic functionality":{js:"0.45.0",android:"6.5.0",ios:"4.2.0",macos:"0.9.0"}}}}},fog:{range:{type:"array",default:[.5,10],minimum:-20,maximum:20,length:2,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},doc:"The start and end distance range in which fog fades from fully transparent to fully opaque. The distance to the point at the center of the map is defined as zero, so that negative range values are closer to the camera, and positive values are farther away.",example:[.5,10],"sdk-support":{"basic functionality":{js:"2.3.0"}}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"The color of the fog. Using opacity is recommended only for smoothly transitioning fog on/off as anything less than 100% opacity results in more tiles loaded and drawn.","sdk-support":{"basic functionality":{js:"2.3.0"}}},"horizon-blend":{type:"number","property-type":"data-constant",default:.1,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"Horizon blend applies a smooth fade from the color of the fog to the color of the sky. A value of zero leaves a sharp transition from fog to sky. Increasing the value blends the color of fog into increasingly high angles of the sky.","sdk-support":{"basic functionality":{js:"2.3.0"}}}},light:{anchor:{type:"enum",default:"viewport",values:{map:{doc:"The position of the light source is aligned to the rotation of the map."},viewport:{doc:"The position of the light source is aligned to the rotation of the viewport."}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]},doc:"Whether extruded geometries are lit relative to the map or viewport.",example:"map","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},doc:"Position of the light source relative to lit (extruded) geometries, in [r radial coordinate, a azimuthal angle, p polar angle] where r indicates the distance from the center of the base of an object to its light, a indicates the position of the light relative to 0\xb0 (0\xb0 when `light.anchor` is set to `viewport` corresponds to the top of the viewport, or 0\xb0 when `light.anchor` is set to `map` corresponds to due north, and degrees proceed clockwise), and p indicates the height of the light (from 0\xb0, directly above, to 180\xb0, directly below).",example:[1.5,90,80],"sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"Color tint for lighting extruded geometries.","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}}},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"Intensity of lighting (on a scale from 0 to 1). Higher numbers will present as more extreme contrast.","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}}}},terrain:{source:{type:"string",doc:"Name of a source of `raster_dem` type to be used for terrain elevation.",required:!0,"sdk-support":{"basic functionality":{js:"2.0.0",ios:"10.0.0",android:"10.0.0"}}},exaggeration:{type:"number","property-type":"data-constant",default:1,minimum:0,maximum:1e3,expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"Exaggerates the elevation of the terrain by multiplying the data from the DEM with this value.","sdk-support":{"basic functionality":{js:"2.0.0",ios:"10.0.0",android:"10.0.0"}}}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background","paint_sky"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,doc:"Whether or not the fill should be antialiased.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,doc:"The opacity of the entire fill layer. In contrast to the `fill-color`, this value will also affect the 1px stroke around the fill, if the stroke is used.",transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.21.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",doc:"The color of the filled part of this layer. This color can be specified as `rgba` with an alpha component and the color's opacity will not affect the opacity of the 1px stroke, if it is used.",transition:!0,requires:[{"!":"fill-pattern"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.19.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",doc:"The outline color of the fill. Matches the value of `fill-color` if unspecified.",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.19.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",doc:"The geometry's offset. Values are [x, y] where negatives indicate left and up, respectively.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{doc:"The fill is translated relative to the map."},viewport:{doc:"The fill is translated relative to the viewport."}},doc:"Controls the frame of reference for `fill-translate`.",default:"map",requires:["fill-translate"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,doc:"Name of image in sprite to use for drawing image fills. For seamless patterns, image width and height must be a factor of two (2, 4, 8, ..., 512). Note that zoom-dependent expressions will be evaluated only at integer zoom levels.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.49.0",android:"6.5.0",macos:"0.11.0",ios:"4.4.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,doc:"The opacity of the entire fill extrusion layer. This is rendered on a per-layer, not per-feature, basis, and data-driven styling is not available.",transition:!0,"sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",doc:"The base color of the extruded fill. The extrusion's surfaces will be shaded differently based on this color in combination with the root `light` settings. If this color is specified as `rgba` with an alpha component, the alpha component will be ignored; use `fill-extrusion-opacity` to set layer opacity.",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],"sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"},"data-driven styling":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",doc:"The geometry's offset. Values are [x, y] where negatives indicate left and up (on the flat plane), respectively.","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{doc:"The fill extrusion is translated relative to the map."},viewport:{doc:"The fill extrusion is translated relative to the viewport."}},doc:"Controls the frame of reference for `fill-extrusion-translate`.",default:"map",requires:["fill-extrusion-translate"],"sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,doc:"Name of image in sprite to use for drawing images on extruded fills. For seamless patterns, image width and height must be a factor of two (2, 4, 8, ..., 512). Note that zoom-dependent expressions will be evaluated only at integer zoom levels.","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"},"data-driven styling":{js:"0.49.0",android:"6.5.0",macos:"0.11.0",ios:"4.4.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",doc:"The height with which to extrude this layer.",transition:!0,"sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"},"data-driven styling":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",doc:"The height with which to extrude the base of this layer. Must be less than or equal to `fill-extrusion-height`.",transition:!0,requires:["fill-extrusion-height"],"sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"},"data-driven styling":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,doc:"Whether to apply a vertical gradient to the sides of a fill-extrusion layer. If true, sides will be shaded slightly darker farther down.",transition:!1,"sdk-support":{"basic functionality":{js:"0.50.0",android:"7.0.0",ios:"4.7.0",macos:"0.13.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",doc:"The opacity at which the line will be drawn.",default:1,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",doc:"The color with which the line will be drawn.",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.23.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",doc:"The geometry's offset. Values are [x, y] where negatives indicate left and up, respectively.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{doc:"The line is translated relative to the map."},viewport:{doc:"The line is translated relative to the viewport."}},doc:"Controls the frame of reference for `line-translate`.",default:"map",requires:["line-translate"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",doc:"Stroke thickness.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.39.0",android:"5.2.0",ios:"3.7.0",macos:"0.6.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,doc:"Draws a line casing outside of a line's actual path. Value indicates the width of the inner gap.",transition:!0,units:"pixels","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,doc:"The line's offset. For linear features, a positive value offsets the line to the right, relative to the direction of the line, and a negative value to the left. For polygon features, a positive value results in an inset, and a negative value results in an outset.",transition:!0,units:"pixels","sdk-support":{"basic functionality":{js:"0.12.1",android:"3.0.0",ios:"3.1.0",macos:"0.1.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",doc:"Blur applied to the line, in pixels.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",doc:"Specifies the lengths of the alternating dashes and gaps that form the dash pattern. The lengths are later scaled by the line width. To convert a dash length to pixels, multiply the length by the current line width. Note that GeoJSON sources with `lineMetrics: true` specified won't render dashed lines to the expected scale. Also note that zoom-dependent expressions will be evaluated only at integer zoom levels.",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"2.3.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-pattern":{type:"resolvedImage",transition:!0,doc:"Name of image in sprite to use for drawing image lines. For seamless patterns, image width must be a factor of two (2, 4, 8, ..., 512). Note that zoom-dependent expressions will be evaluated only at integer zoom levels.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.49.0",android:"6.5.0",macos:"0.11.0",ios:"4.4.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",doc:'Defines a gradient with which to color a line feature. Can only be used with GeoJSON sources that specify `"lineMetrics": true`.',transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],"sdk-support":{"basic functionality":{js:"0.45.0",android:"6.5.0",ios:"4.4.0",macos:"0.11.0"},"data-driven styling":{}},expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",doc:"Circle radius.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.18.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",doc:"The fill color of the circle.",transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.18.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,doc:"Amount to blur the circle. 1 blurs the circle such that only the centerpoint is full opacity.",transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.20.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",doc:"The opacity at which the circle will be drawn.",default:1,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.20.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",doc:"The geometry's offset. Values are [x, y] where negatives indicate left and up, respectively.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{doc:"The circle is translated relative to the map."},viewport:{doc:"The circle is translated relative to the viewport."}},doc:"Controls the frame of reference for `circle-translate`.",default:"map",requires:["circle-translate"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{doc:"Circles are scaled according to their apparent distance to the camera."},viewport:{doc:"Circles are not scaled."}},default:"map",doc:"Controls the scaling behavior of the circle when the map is pitched.","sdk-support":{"basic functionality":{js:"0.21.0",android:"4.2.0",ios:"3.4.0",macos:"0.2.1"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{doc:"The circle is aligned to the plane of the map."},viewport:{doc:"The circle is aligned to the plane of the viewport."}},default:"viewport",doc:"Orientation of circle when map is pitched.","sdk-support":{"basic functionality":{js:"0.39.0",android:"5.2.0",ios:"3.7.0",macos:"0.6.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",doc:"The width of the circle's stroke. Strokes are placed outside of the `circle-radius`.","sdk-support":{"basic functionality":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",doc:"The stroke color of the circle.",transition:!0,"sdk-support":{"basic functionality":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",doc:"The opacity of the circle's stroke.",default:1,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",doc:"Radius of influence of one heatmap point in pixels. Increasing the value makes the heatmap smoother, but less detailed.","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"},"data-driven styling":{js:"0.43.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,doc:"A measure of how much an individual point contributes to the heatmap. A value of 10 would be equivalent to having 10 points of weight 1 in the same spot. Especially useful when combined with clustering.","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"},"data-driven styling":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,doc:"Similar to `heatmap-weight` but controls the intensity of the heatmap globally. Primarily used for adjusting the heatmap based on zoom level.","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],doc:'Defines the color of each pixel based on its density value in a heatmap.  Should be an expression that uses `["heatmap-density"]` as input.',transition:!1,"sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"},"data-driven styling":{}},expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",doc:"The global opacity at which the heatmap layer will be drawn.",default:1,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{doc:"The opacity at which the icon will be drawn.",type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,doc:"The color of the icon. This can only be used with sdf icons.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,doc:"The color of the icon's halo. Icon halos can only be used with SDF icons.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",doc:"Distance of halo to the icon outline.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",doc:"Fade out the halo towards the outside.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",doc:"Distance that the icon's anchor is moved from its original placement. Positive values indicate right and down, while negative values indicate left and up.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{doc:"Icons are translated relative to the map."},viewport:{doc:"Icons are translated relative to the viewport."}},doc:"Controls the frame of reference for `icon-translate`.",default:"map",requires:["icon-image","icon-translate"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",doc:"The opacity at which the text will be drawn.",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",doc:"The color with which the text will be drawn.",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,doc:"The color of the text's halo, which helps it stand out from backgrounds.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",doc:"Distance of halo to the font outline. Max text halo width is 1/4 of the font-size.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",doc:"The halo's fadeout distance towards the outside.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",doc:"Distance that the text's anchor is moved from its original placement. Positive values indicate right and down, while negative values indicate left and up.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{doc:"The text is translated relative to the map."},viewport:{doc:"The text is translated relative to the viewport."}},doc:"Controls the frame of reference for `text-translate`.",default:"map",requires:["text-field","text-translate"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",doc:"The opacity at which the image will be drawn.",default:1,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",doc:"Rotates hues around the color wheel.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",doc:"Increase or reduce the brightness of the image. The value is the minimum brightness.",default:0,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",doc:"Increase or reduce the brightness of the image. The value is the maximum brightness.",default:1,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",doc:"Increase or reduce the saturation of the image.",default:0,minimum:-1,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",doc:"Increase or reduce the contrast of the image.",default:0,minimum:-1,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",doc:"The resampling/interpolation method to use for overscaling, also known as texture magnification filter",values:{linear:{doc:"(Bi)linear filtering interpolates pixel values using the weighted average of the four closest original source pixels creating a smooth but blurry look when overscaled"},nearest:{doc:"Nearest neighbor filtering interpolates pixel values using the nearest original source pixel creating a sharp but pixelated look when overscaled"}},default:"linear","sdk-support":{"basic functionality":{js:"0.47.0",android:"6.3.0",ios:"4.2.0",macos:"0.9.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",doc:"Fade duration when a new tile is added.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,doc:"The direction of the light source used to generate the hillshading with 0 as the top of the viewport if `hillshade-illumination-anchor` is set to `viewport` and due north if `hillshade-illumination-anchor` is set to `map`.",transition:!1,"sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{doc:"The hillshade illumination is relative to the north direction."},viewport:{doc:"The hillshade illumination is relative to the top of the viewport."}},default:"viewport",doc:"Direction of light source when map is rotated.","sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",doc:"Intensity of the hillshade",default:.5,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",doc:"The shading color of areas that face away from the light source.",transition:!0,"sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",doc:"The shading color of areas that faces towards the light source.",transition:!0,"sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",doc:"The shading color used to accentuate rugged terrain like sharp cliffs and gorges.",transition:!0,"sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",doc:"The color with which the background will be drawn.",transition:!0,requires:[{"!":"background-pattern"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,doc:"Name of image in sprite to use for drawing an image background. For seamless patterns, image width and height must be a factor of two (2, 4, 8, ..., 512). Note that zoom-dependent expressions will be evaluated only at integer zoom levels.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,doc:"The opacity at which the background will be drawn.",transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_sky:{"sky-type":{type:"enum",values:{gradient:{doc:"Renders the sky with a gradient that can be configured with `sky-gradient-radius` and `sky-gradient`."},atmosphere:{doc:"Renders the sky with a simulated atmospheric scattering algorithm, the sun direction can be attached to the light position or explicitly set through `sky-atmosphere-sun`."}},default:"atmosphere",doc:"The type of the sky","sdk-support":{"basic functionality":{js:"2.0.0",ios:"10.0.0",android:"10.0.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun":{type:"array",value:"number",length:2,units:"degrees",minimum:[0,0],maximum:[360,180],transition:!1,doc:"Position of the sun center [a azimuthal angle, p polar angle]. The azimuthal angle indicates the position of the sun relative to 0\xb0 north, where degrees proceed clockwise. The polar angle indicates the height of the sun, where 0\xb0 is directly above, at zenith, and 90\xb0 at the horizon. When this property is ommitted, the sun center is directly inherited from the light position.","sdk-support":{"basic functionality":{js:"2.0.0",ios:"10.0.0",android:"10.0.0"}},requires:[{"sky-type":"atmosphere"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun-intensity":{type:"number",requires:[{"sky-type":"atmosphere"}],default:10,minimum:0,maximum:100,transition:!1,doc:"Intensity of the sun as a light source in the atmosphere (on a scale from 0 to a 100). Setting higher values will brighten up the sky.","sdk-support":{"basic functionality":{js:"2.0.0",ios:"10.0.0",android:"10.0.0"}},"property-type":"data-constant"},"sky-gradient-center":{type:"array",requires:[{"sky-type":"gradient"}],value:"number",default:[0,0],length:2,units:"degrees",minimum:[0,0],maximum:[360,180],transition:!1,doc:"Position of the gradient center [a azimuthal angle, p polar angle]. The azimuthal angle indicates the position of the gradient center relative to 0\xb0 north, where degrees proceed clockwise. The polar angle indicates the height of the gradient center, where 0\xb0 is directly above, at zenith, and 90\xb0 at the horizon.","sdk-support":{"basic functionality":{js:"2.0.0",ios:"10.0.0",android:"10.0.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-gradient-radius":{type:"number",requires:[{"sky-type":"gradient"}],default:90,minimum:0,maximum:180,transition:!1,doc:"The angular distance (measured in degrees) from `sky-gradient-center` up to which the gradient extends. A value of 180 causes the gradient to wrap around to the opposite direction from `sky-gradient-center`.","sdk-support":{"basic functionality":{js:"2.0.0",ios:"10.0.0",android:"10.0.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-gradient":{type:"color",default:["interpolate",["linear"],["sky-radial-progress"],.8,"#87ceeb",1,"white"],doc:"Defines a radial color gradient with which to color the sky. The color values can be interpolated with an expression using `sky-radial-progress`. The range [0, 1] for the interpolant covers a radial distance (in degrees) of [0, `sky-gradient-radius`] centered at the position specified by `sky-gradient-center`.",transition:!1,requires:[{"sky-type":"gradient"}],"sdk-support":{"basic functionality":{js:"2.0.0",ios:"10.0.0",android:"10.0.0"},"data-driven styling":{}},expression:{interpolated:!0,parameters:["sky-radial-progress"]},"property-type":"color-ramp"},"sky-atmosphere-halo-color":{type:"color",default:"white",doc:"A color applied to the atmosphere sun halo. The alpha channel describes how strongly the sun halo is represented in an atmosphere sky layer.",transition:!1,requires:[{"sky-type":"atmosphere"}],"sdk-support":{"basic functionality":{js:"2.0.0",ios:"10.0.0",android:"10.0.0"}},"property-type":"data-constant"},"sky-atmosphere-color":{type:"color",default:"white",doc:"A color used to tweak the main atmospheric scattering coefficients. Using white applies the default coefficients giving the natural blue color to the atmosphere. This color affects how heavily the corresponding wavelength is represented during scattering. The alpha channel describes the density of the atmosphere, with 1 maximum density and 0 no density.",transition:!1,requires:[{"sky-type":"atmosphere"}],"sdk-support":{"basic functionality":{js:"2.0.0",ios:"10.0.0",android:"10.0.0"}},"property-type":"data-constant"},"sky-opacity":{type:"number",default:1,minimum:0,maximum:1,doc:"The opacity of the entire sky layer.",transition:!0,"sdk-support":{"basic functionality":{js:"2.0.0",ios:"10.0.0",android:"10.0.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds",doc:"Time allotted for transitions to complete."},delay:{type:"number",default:0,minimum:0,units:"milliseconds",doc:"Length of time before a transition begins."}},"property-type":{"data-driven":{type:"property-type",doc:"Property is interpolable and can be represented using a property expression."},"cross-faded":{type:"property-type",doc:"Property is non-interpolable; rather, its values will be cross-faded to smoothly transition between integer zooms."},"cross-faded-data-driven":{type:"property-type",doc:"Property is non-interpolable; rather, its values will be cross-faded to smoothly transition between integer zooms. It can be represented using a property expression."},"color-ramp":{type:"property-type",doc:"Property should be specified using a color ramp from which the output color can be sampled based on a property calculation."},"data-constant":{type:"property-type",doc:"Property is interpolable but cannot be represented using a property expression."},constant:{type:"property-type",doc:"Property is constant across all zoom levels and property values."}},promoteId:{"*":{type:"string",doc:"A name of a feature property to use as ID for feature state."}}},_F="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function wM(l){var a={exports:{}};return l(a,a.exports),a.exports}var _Ee=wM(function(l,a){!function(o){var c=a&&!a.nodeType&&a,u=l&&!l.nodeType&&l,h="object"==typeof _F&&_F;(h.global===h||h.window===h||h.self===h)&&(o=h);var d,U,f=2147483647,m=36,E=/^xn--/,M=/[^\x20-\x7E]/,x=/[\x2E\u3002\uFF0E\uFF61]/g,R={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},k=Math.floor,W=String.fromCharCode;function K(Ae){throw RangeError(R[Ae])}function Q(Ae,We){for(var Te=Ae.length,He=[];Te--;)He[Te]=We(Ae[Te]);return He}function se(Ae,We){var Te=Ae.split("@"),He="";return Te.length>1&&(He=Te[0]+"@",Ae=Te[1]),He+Q((Ae=Ae.replace(x,".")).split("."),We).join(".")}function te(Ae){for(var Ue,ct,We=[],Te=0,He=Ae.length;Te<He;)(Ue=Ae.charCodeAt(Te++))>=55296&&Ue<=56319&&Te<He?56320==(64512&(ct=Ae.charCodeAt(Te++)))?We.push(((1023&Ue)<<10)+(1023&ct)+65536):(We.push(Ue),Te--):We.push(Ue);return We}function De(Ae){return Q(Ae,function(We){var Te="";return We>65535&&(Te+=W((We-=65536)>>>10&1023|55296),We=56320|1023&We),Te+W(We)}).join("")}function de(Ae){return Ae-48<10?Ae-22:Ae-65<26?Ae-65:Ae-97<26?Ae-97:m}function ye(Ae,We){return Ae+22+75*(Ae<26)-((0!=We)<<5)}function _e(Ae,We,Te){var He=0;for(Ae=Te?k(Ae/700):Ae>>1,Ae+=k(Ae/We);Ae>455;He+=m)Ae=k(Ae/35);return k(He+36*Ae/(Ae+38))}function ue(Ae){var He,xt,Ye,Ct,Ot,Kt,it,ht,vt,tn,We=[],Te=Ae.length,Ue=0,ct=128,Ce=72;for((xt=Ae.lastIndexOf("-"))<0&&(xt=0),Ye=0;Ye<xt;++Ye)Ae.charCodeAt(Ye)>=128&&K("not-basic"),We.push(Ae.charCodeAt(Ye));for(Ct=xt>0?xt+1:0;Ct<Te;){for(Ot=Ue,Kt=1,it=m;Ct>=Te&&K("invalid-input"),((ht=de(Ae.charCodeAt(Ct++)))>=m||ht>k((f-Ue)/Kt))&&K("overflow"),Ue+=ht*Kt,!(ht<(vt=it<=Ce?1:it>=Ce+26?26:it-Ce));it+=m)Kt>k(f/(tn=m-vt))&&K("overflow"),Kt*=tn;Ce=_e(Ue-Ot,He=We.length+1,0==Ot),k(Ue/He)>f-ct&&K("overflow"),ct+=k(Ue/He),Ue%=He,We.splice(Ue++,0,ct)}return De(We)}function ce(Ae){var We,Te,He,Ue,ct,Ce,xt,Ye,Ct,Ot,Kt,ht,vt,tn,Ft,it=[];for(ht=(Ae=te(Ae)).length,We=128,Te=0,ct=72,Ce=0;Ce<ht;++Ce)(Kt=Ae[Ce])<128&&it.push(W(Kt));for(He=Ue=it.length,Ue&&it.push("-");He<ht;){for(xt=f,Ce=0;Ce<ht;++Ce)(Kt=Ae[Ce])>=We&&Kt<xt&&(xt=Kt);for(xt-We>k((f-Te)/(vt=He+1))&&K("overflow"),Te+=(xt-We)*vt,We=xt,Ce=0;Ce<ht;++Ce)if((Kt=Ae[Ce])<We&&++Te>f&&K("overflow"),Kt==We){for(Ye=Te,Ct=m;!(Ye<(Ot=Ct<=ct?1:Ct>=ct+26?26:Ct-ct));Ct+=m)it.push(W(ye(Ot+(Ft=Ye-Ot)%(tn=m-Ot),0))),Ye=k(Ft/tn);it.push(W(ye(Ye,0))),ct=_e(Te,vt,He==Ue),Te=0,++He}++Te,++We}return it.join("")}if(d={version:"1.3.2",ucs2:{decode:te,encode:De},decode:ue,encode:ce,toASCII:function(Ae){return se(Ae,function(We){return M.test(We)?"xn--"+ce(We):We})},toUnicode:function(Ae){return se(Ae,function(We){return E.test(We)?ue(We.slice(4).toLowerCase()):We})}},c&&u)if(l.exports==c)u.exports=d;else for(U in d)d.hasOwnProperty(U)&&(c[U]=d[U]);else o.punycode=d}(_F)}),Eh_isString=function(l){return"string"==typeof l},Eh_isObject=function(l){return"object"==typeof l&&null!==l},Eh_isNull=function(l){return null===l};function bEe(l,a){return Object.prototype.hasOwnProperty.call(l,a)}var SEe=function(l,a,o,c){o=o||"=";var u={};if("string"!=typeof l||0===l.length)return u;var h=/\+/g;l=l.split(a=a||"&");var d=1e3;c&&"number"==typeof c.maxKeys&&(d=c.maxKeys);var f=l.length;d>0&&f>d&&(f=d);for(var m=0;m<f;++m){var v,_,b,w,g=l[m].replace(h,"%20"),y=g.indexOf(o);y>=0?(v=g.substr(0,y),_=g.substr(y+1)):(v=g,_=""),b=decodeURIComponent(v),w=decodeURIComponent(_),bEe(u,b)?Array.isArray(u[b])?u[b].push(w):u[b]=[u[b],w]:u[b]=w}return u},RT=function(l){switch(typeof l){case"string":return l;case"boolean":return l?"true":"false";case"number":return isFinite(l)?l:"";default:return""}},TEe=function(l,a,o,c){return a=a||"&",o=o||"=",null===l&&(l=void 0),"object"==typeof l?Object.keys(l).map(function(u){var h=encodeURIComponent(RT(u))+o;return Array.isArray(l[u])?l[u].map(function(d){return h+encodeURIComponent(RT(d))}).join(a):h+encodeURIComponent(RT(l[u]))}).join(a):c?encodeURIComponent(RT(c))+o+encodeURIComponent(RT(l)):""},bF=wM(function(l,a){a.decode=a.parse=SEe,a.encode=a.stringify=TEe});function Lc(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var DEe=/^([a-z0-9.+-]+:)/i,AEe=/:[0-9]*$/,IEe=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,PEe=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),SF=["'"].concat(PEe),Lq=["%","/","?",";","#"].concat(SF),Oq=["/","?","#"],Nq=/^[+a-z0-9A-Z_-]{0,63}$/,OEe=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,NEe={javascript:!0,"javascript:":!0},TF={javascript:!0,"javascript:":!0},d_={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0};function p_(l,...a){for(const o of a)for(const c in o)l[c]=o[c];return l}Lc.prototype.parse=function(l,a,o){if(!Eh_isString(l))throw new TypeError("Parameter 'url' must be a string, not "+typeof l);var c=l.indexOf("?"),u=-1!==c&&c<l.indexOf("#")?"?":"#",h=l.split(u);h[0]=h[0].replace(/\\/g,"/");var f=l=h.join(u);if(f=f.trim(),!o&&1===l.split("#").length){var m=IEe.exec(f);if(m)return this.path=f,this.href=f,this.pathname=m[1],m[2]?(this.search=m[2],this.query=a?bF.parse(this.search.substr(1)):this.search.substr(1)):a&&(this.search="",this.query={}),this}var g=DEe.exec(f);if(g){var y=(g=g[0]).toLowerCase();this.protocol=y,f=f.substr(g.length)}if(o||g||f.match(/^\/\/[^@\/]+@[^@\/]+/)){var v="//"===f.substr(0,2);v&&(!g||!TF[g])&&(f=f.substr(2),this.slashes=!0)}if(!TF[g]&&(v||g&&!d_[g])){for(var _=-1,b=0;b<Oq.length;b++)-1!==(w=f.indexOf(Oq[b]))&&(-1===_||w<_)&&(_=w);var C,E;for(-1!==(E=-1===_?f.lastIndexOf("@"):f.lastIndexOf("@",_))&&(C=f.slice(0,E),f=f.slice(E+1),this.auth=decodeURIComponent(C)),_=-1,b=0;b<Lq.length;b++){var w;-1!==(w=f.indexOf(Lq[b]))&&(-1===_||w<_)&&(_=w)}-1===_&&(_=f.length),this.host=f.slice(0,_),f=f.slice(_),this.parseHost(),this.hostname=this.hostname||"";var M="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!M)for(var x=this.hostname.split(/\./),R=(b=0,x.length);b<R;b++){var P=x[b];if(P&&!P.match(Nq)){for(var k="",W=0,U=P.length;W<U;W++)P.charCodeAt(W)>127?k+="x":k+=P[W];if(!k.match(Nq)){var K=x.slice(0,b),Q=x.slice(b+1),se=P.match(OEe);se&&(K.push(se[1]),Q.unshift(se[2])),Q.length&&(f="/"+Q.join(".")+f),this.hostname=K.join(".");break}}}this.hostname=this.hostname.length>255?"":this.hostname.toLowerCase(),M||(this.hostname=_Ee.toASCII(this.hostname)),this.host=(this.hostname||"")+(this.port?":"+this.port:""),this.href+=this.host,M&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==f[0]&&(f="/"+f))}if(!NEe[y])for(b=0,R=SF.length;b<R;b++){var de=SF[b];if(-1!==f.indexOf(de)){var ye=encodeURIComponent(de);ye===de&&(ye=escape(de)),f=f.split(de).join(ye)}}var _e=f.indexOf("#");-1!==_e&&(this.hash=f.substr(_e),f=f.slice(0,_e));var ue=f.indexOf("?");return-1!==ue?(this.search=f.substr(ue),this.query=f.substr(ue+1),a&&(this.query=bF.parse(this.query)),f=f.slice(0,ue)):a&&(this.search="",this.query={}),f&&(this.pathname=f),d_[y]&&this.hostname&&!this.pathname&&(this.pathname="/"),(this.pathname||this.search)&&(this.path=(this.pathname||"")+(this.search||"")),this.href=this.format(),this},Lc.prototype.format=function(){var l=this.auth||"";l&&(l=(l=encodeURIComponent(l)).replace(/%3A/i,":"),l+="@");var a=this.protocol||"",o=this.pathname||"",c=this.hash||"",u=!1,h="";this.host?u=l+this.host:this.hostname&&(u=l+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(u+=":"+this.port)),this.query&&Eh_isObject(this.query)&&Object.keys(this.query).length&&(h=bF.stringify(this.query));var d=this.search||h&&"?"+h||"";return a&&":"!==a.substr(-1)&&(a+=":"),this.slashes||(!a||d_[a])&&!1!==u?(u="//"+(u||""),o&&"/"!==o.charAt(0)&&(o="/"+o)):u||(u=""),c&&"#"!==c.charAt(0)&&(c="#"+c),d&&"?"!==d.charAt(0)&&(d="?"+d),a+u+(o=o.replace(/[?#]/g,function(f){return encodeURIComponent(f)}))+(d=d.replace("#","%23"))+c},Lc.prototype.resolve=function(l){return this.resolveObject(function(l,a,o){if(l&&Eh_isObject(l)&&l instanceof Lc)return l;var c=new Lc;return c.parse(l,a,o),c}(l,!1,!0)).format()},Lc.prototype.resolveObject=function(l){if(Eh_isString(l)){var a=new Lc;a.parse(l,!1,!0),l=a}for(var o=new Lc,c=Object.keys(this),u=0;u<c.length;u++){var h=c[u];o[h]=this[h]}if(o.hash=l.hash,""===l.href)return o.href=o.format(),o;if(l.slashes&&!l.protocol){for(var d=Object.keys(l),f=0;f<d.length;f++){var m=d[f];"protocol"!==m&&(o[m]=l[m])}return d_[o.protocol]&&o.hostname&&!o.pathname&&(o.path=o.pathname="/"),o.href=o.format(),o}if(l.protocol&&l.protocol!==o.protocol){if(!d_[l.protocol]){for(var g=Object.keys(l),y=0;y<g.length;y++){var v=g[y];o[v]=l[v]}return o.href=o.format(),o}if(o.protocol=l.protocol,l.host||TF[l.protocol])o.pathname=l.pathname;else{for(var R=(l.pathname||"").split("/");R.length&&!(l.host=R.shift()););l.host||(l.host=""),l.hostname||(l.hostname=""),""!==R[0]&&R.unshift(""),R.length<2&&R.unshift(""),o.pathname=R.join("/")}return o.search=l.search,o.query=l.query,o.host=l.host||"",o.auth=l.auth,o.hostname=l.hostname||l.host,o.port=l.port,(o.pathname||o.search)&&(o.path=(o.pathname||"")+(o.search||"")),o.slashes=o.slashes||l.slashes,o.href=o.format(),o}var w=o.pathname&&"/"===o.pathname.charAt(0),C=l.host||l.pathname&&"/"===l.pathname.charAt(0),E=C||w||o.host&&l.pathname,M=E,x=o.pathname&&o.pathname.split("/")||[],P=(R=l.pathname&&l.pathname.split("/")||[],o.protocol&&!d_[o.protocol]);if(P&&(o.hostname="",o.port=null,o.host&&(""===x[0]?x[0]=o.host:x.unshift(o.host)),o.host="",l.protocol&&(l.hostname=null,l.port=null,l.host&&(""===R[0]?R[0]=l.host:R.unshift(l.host)),l.host=null),E=E&&(""===R[0]||""===x[0])),C)o.host=l.host||""===l.host?l.host:o.host,o.hostname=l.hostname||""===l.hostname?l.hostname:o.hostname,o.search=l.search,o.query=l.query,x=R;else if(R.length)x||(x=[]),x.pop(),x=x.concat(R),o.search=l.search,o.query=l.query;else if(!function(l){return null==l}(l.search))return P&&(o.hostname=o.host=x.shift(),(k=!!(o.host&&o.host.indexOf("@")>0)&&o.host.split("@"))&&(o.auth=k.shift(),o.host=o.hostname=k.shift())),o.search=l.search,o.query=l.query,(!Eh_isNull(o.pathname)||!Eh_isNull(o.search))&&(o.path=(o.pathname?o.pathname:"")+(o.search?o.search:"")),o.href=o.format(),o;if(!x.length)return o.pathname=null,o.path=o.search?"/"+o.search:null,o.href=o.format(),o;for(var W=x.slice(-1)[0],U=(o.host||l.host||x.length>1)&&("."===W||".."===W)||""===W,K=0,Q=x.length;Q>=0;Q--)"."===(W=x[Q])?x.splice(Q,1):".."===W?(x.splice(Q,1),K++):K&&(x.splice(Q,1),K--);if(!E&&!M)for(;K--;K)x.unshift("..");E&&""!==x[0]&&(!x[0]||"/"!==x[0].charAt(0))&&x.unshift(""),U&&"/"!==x.join("/").substr(-1)&&x.push("");var k,se=""===x[0]||x[0]&&"/"===x[0].charAt(0);return P&&(o.hostname=o.host=se?"":x.length?x.shift():"",(k=!!(o.host&&o.host.indexOf("@")>0)&&o.host.split("@"))&&(o.auth=k.shift(),o.host=o.hostname=k.shift())),(E=E||o.host&&x.length)&&!se&&x.unshift(""),x.length?o.pathname=x.join("/"):(o.pathname=null,o.path=null),(!Eh_isNull(o.pathname)||!Eh_isNull(o.search))&&(o.path=(o.pathname?o.pathname:"")+(o.search?o.search:"")),o.auth=l.auth||o.auth,o.slashes=o.slashes||l.slashes,o.href=o.format(),o},Lc.prototype.parseHost=function(){var l=this.host,a=AEe.exec(l);a&&(":"!==(a=a[0])&&(this.port=a.substr(1)),l=l.substr(0,l.length-a.length)),l&&(this.hostname=l)};class Mh extends Error{constructor(a,o){super(o),this.message=o,this.key=a}}class EF{constructor(a,o=[]){this.parent=a,this.bindings={};for(const[c,u]of o)this.bindings[c]=u}concat(a){return new EF(this,a)}get(a){if(this.bindings[a])return this.bindings[a];if(this.parent)return this.parent.get(a);throw new Error(`${a} not found in scope.`)}has(a){return!!this.bindings[a]||!!this.parent&&this.parent.has(a)}}const CM={kind:"null"},Wt={kind:"number"},Fr={kind:"string"},xr={kind:"boolean"},Hd={kind:"color"},m_={kind:"object"},Er={kind:"value"},xM={kind:"collator"},EM={kind:"formatted"},OT={kind:"resolvedImage"};function Oc(l,a){return{kind:"array",itemType:l,N:a}}function hs(l){if("array"===l.kind){const a=hs(l.itemType);return"number"==typeof l.N?`array<${a}, ${l.N}>`:"value"===l.itemType.kind?"array":`array<${a}>`}return l.kind}const jEe=[CM,Wt,Fr,xr,Hd,EM,m_,Oc(Er),OT];function NT(l,a){if("error"===a.kind)return null;if("array"===l.kind){if("array"===a.kind&&(0===a.N&&"value"===a.itemType.kind||!NT(l.itemType,a.itemType))&&("number"!=typeof l.N||l.N===a.N))return null}else{if(l.kind===a.kind)return null;if("value"===l.kind)for(const o of jEe)if(!NT(o,a))return null}return`Expected ${hs(l)} but found ${hs(a)} instead.`}function MF(l,a){return a.some(o=>o.kind===l.kind)}function FT(l,a){return a.some(o=>"null"===o?null===l:"array"===o?Array.isArray(l):"object"===o?l&&!Array.isArray(l)&&"object"==typeof l:o===typeof l)}var Vq=wM(function(l,a){var o={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function c(g){return(g=Math.round(g))<0?0:g>255?255:g}function h(g){return c("%"===g[g.length-1]?parseFloat(g)/100*255:parseInt(g))}function d(g){return function(g){return g<0?0:g>1?1:g}("%"===g[g.length-1]?parseFloat(g)/100:parseFloat(g))}function f(g,y,v){return v<0?v+=1:v>1&&(v-=1),6*v<1?g+(y-g)*v*6:2*v<1?y:3*v<2?g+(y-g)*(2/3-v)*6:g}try{a.parseCSSColor=function(g){var v,y=g.replace(/ /g,"").toLowerCase();if(y in o)return o[y].slice();if("#"===y[0])return 4===y.length?(v=parseInt(y.substr(1),16))>=0&&v<=4095?[(3840&v)>>4|(3840&v)>>8,240&v|(240&v)>>4,15&v|(15&v)<<4,1]:null:7===y.length&&(v=parseInt(y.substr(1),16))>=0&&v<=16777215?[(16711680&v)>>16,(65280&v)>>8,255&v,1]:null;var _=y.indexOf("("),b=y.indexOf(")");if(-1!==_&&b+1===y.length){var w=y.substr(0,_),C=y.substr(_+1,b-(_+1)).split(","),E=1;switch(w){case"rgba":if(4!==C.length)return null;E=d(C.pop());case"rgb":return 3!==C.length?null:[h(C[0]),h(C[1]),h(C[2]),E];case"hsla":if(4!==C.length)return null;E=d(C.pop());case"hsl":if(3!==C.length)return null;var M=(parseFloat(C[0])%360+360)%360/360,x=d(C[1]),R=d(C[2]),P=R<=.5?R*(x+1):R+x-R*x,k=2*R-P;return[c(255*f(k,P,M+1/3)),c(255*f(k,P,M)),c(255*f(k,P,M-1/3)),E];default:return null}}return null}}catch(g){}});class pi{constructor(a,o,c,u=1){this.r=a,this.g=o,this.b=c,this.a=u}static parse(a){if(!a)return;if(a instanceof pi)return a;if("string"!=typeof a)return;const o=Vq.parseCSSColor(a);return o?new pi(o[0]/255*o[3],o[1]/255*o[3],o[2]/255*o[3],o[3]):void 0}toString(){const[a,o,c,u]=this.toArray();return`rgba(${Math.round(a)},${Math.round(o)},${Math.round(c)},${u})`}toArray(){const{r:a,g:o,b:c,a:u}=this;return 0===u?[0,0,0,0]:[255*a/u,255*o/u,255*c/u,u]}}pi.black=new pi(0,0,0,1),pi.white=new pi(1,1,1,1),pi.transparent=new pi(0,0,0,0),pi.red=new pi(1,0,0,1),pi.blue=new pi(0,0,1,1);class DF{constructor(a,o,c){this.sensitivity=a?o?"variant":"case":o?"accent":"base",this.locale=c,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(a,o){return this.collator.compare(a,o)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class AF{constructor(a,o,c,u,h){this.text=a,this.image=o,this.scale=c,this.fontStack=u,this.textColor=h}}class wu{constructor(a){this.sections=a}static fromString(a){return new wu([new AF(a,null,null,null,null)])}isEmpty(){return 0===this.sections.length||!this.sections.some(a=>0!==a.text.length||a.image&&0!==a.image.name.length)}static factory(a){return a instanceof wu?a:wu.fromString(a)}toString(){return 0===this.sections.length?"":this.sections.map(a=>a.text).join("")}serialize(){const a=["format"];for(const o of this.sections){if(o.image){a.push(["image",o.image.name]);continue}a.push(o.text);const c={};o.fontStack&&(c["text-font"]=["literal",o.fontStack.split(",")]),o.scale&&(c["font-scale"]=o.scale),o.textColor&&(c["text-color"]=["rgba"].concat(o.textColor.toArray())),a.push(c)}return a}}class jd{constructor(a){this.name=a.name,this.available=a.available}toString(){return this.name}static fromString(a){return a?new jd({name:a,available:!1}):null}serialize(){return["image",this.name]}}function Bq(l,a,o,c){return"number"==typeof l&&l>=0&&l<=255&&"number"==typeof a&&a>=0&&a<=255&&"number"==typeof o&&o>=0&&o<=255?void 0===c||"number"==typeof c&&c>=0&&c<=1?null:`Invalid rgba value [${[l,a,o,c].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${("number"==typeof c?[l,a,o,c]:[l,a,o]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function MM(l){if(null===l)return!0;if("string"==typeof l)return!0;if("boolean"==typeof l)return!0;if("number"==typeof l)return!0;if(l instanceof pi)return!0;if(l instanceof DF)return!0;if(l instanceof wu)return!0;if(l instanceof jd)return!0;if(Array.isArray(l)){for(const a of l)if(!MM(a))return!1;return!0}if("object"==typeof l){for(const a in l)if(!MM(l[a]))return!1;return!0}return!1}function So(l){if(null===l)return CM;if("string"==typeof l)return Fr;if("boolean"==typeof l)return xr;if("number"==typeof l)return Wt;if(l instanceof pi)return Hd;if(l instanceof DF)return xM;if(l instanceof wu)return EM;if(l instanceof jd)return OT;if(Array.isArray(l)){const a=l.length;let o;for(const c of l){const u=So(c);if(o){if(o===u)continue;o=Er;break}o=u}return Oc(o||Er,a)}return m_}function kT(l){const a=typeof l;return null===l?"":"string"===a||"number"===a||"boolean"===a?String(l):l instanceof pi||l instanceof wu||l instanceof jd?l.toString():JSON.stringify(l)}class g_{constructor(a,o){this.type=a,this.value=o}static parse(a,o){if(2!==a.length)return o.error(`'literal' expression requires exactly one argument, but found ${a.length-1} instead.`);if(!MM(a[1]))return o.error("invalid value");const c=a[1];let u=So(c);const h=o.expectedType;return"array"===u.kind&&0===u.N&&h&&"array"===h.kind&&("number"!=typeof h.N||0===h.N)&&(u=h),new g_(u,c)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}serialize(){return"array"===this.type.kind||"object"===this.type.kind?["literal",this.value]:this.value instanceof pi?["rgba"].concat(this.value.toArray()):this.value instanceof wu?this.value.serialize():this.value}}class ta{constructor(a){this.name="ExpressionEvaluationError",this.message=a}toJSON(){return this.message}}const IF={string:Fr,number:Wt,boolean:xr,object:m_};class Cu{constructor(a,o){this.type=a,this.args=o}static parse(a,o){if(a.length<2)return o.error("Expected at least one argument.");let u,c=1;const h=a[0];if("array"===h){let f,m;if(a.length>2){const g=a[1];if("string"!=typeof g||!(g in IF)||"object"===g)return o.error('The item type argument of "array" must be one of string, number, boolean',1);f=IF[g],c++}else f=Er;if(a.length>3){if(null!==a[2]&&("number"!=typeof a[2]||a[2]<0||a[2]!==Math.floor(a[2])))return o.error('The length argument to "array" must be a positive integer literal',2);m=a[2],c++}u=Oc(f,m)}else u=IF[h];const d=[];for(;c<a.length;c++){const f=o.parse(a[c],c,Er);if(!f)return null;d.push(f)}return new Cu(u,d)}evaluate(a){for(let o=0;o<this.args.length;o++){const c=this.args[o].evaluate(a);if(!NT(this.type,So(c)))return c;if(o===this.args.length-1)throw new ta(`Expected value to be of type ${hs(this.type)}, but found ${hs(So(c))} instead.`)}return null}eachChild(a){this.args.forEach(a)}outputDefined(){return this.args.every(a=>a.outputDefined())}serialize(){const a=this.type,o=[a.kind];if("array"===a.kind){const c=a.itemType;if("string"===c.kind||"number"===c.kind||"boolean"===c.kind){o.push(c.kind);const u=a.N;("number"==typeof u||this.args.length>1)&&o.push(u)}}return o.concat(this.args.map(c=>c.serialize()))}}class DM{constructor(a){this.type=EM,this.sections=a}static parse(a,o){if(a.length<2)return o.error("Expected at least one argument.");const c=a[1];if(!Array.isArray(c)&&"object"==typeof c)return o.error("First argument must be an image or text section.");const u=[];let h=!1;for(let d=1;d<=a.length-1;++d){const f=a[d];if(h&&"object"==typeof f&&!Array.isArray(f)){h=!1;let m=null;if(f["font-scale"]&&(m=o.parse(f["font-scale"],1,Wt),!m))return null;let g=null;if(f["text-font"]&&(g=o.parse(f["text-font"],1,Oc(Fr)),!g))return null;let y=null;if(f["text-color"]&&(y=o.parse(f["text-color"],1,Hd),!y))return null;const v=u[u.length-1];v.scale=m,v.font=g,v.textColor=y}else{const m=o.parse(a[d],1,Er);if(!m)return null;const g=m.type.kind;if("string"!==g&&"value"!==g&&"null"!==g&&"resolvedImage"!==g)return o.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");h=!0,u.push({content:m,scale:null,font:null,textColor:null})}}return new DM(u)}evaluate(a){return new wu(this.sections.map(c=>{const u=c.content.evaluate(a);return So(u)===OT?new AF("",u,null,null,null):new AF(kT(u),null,c.scale?c.scale.evaluate(a):null,c.font?c.font.evaluate(a).join(","):null,c.textColor?c.textColor.evaluate(a):null)}))}eachChild(a){for(const o of this.sections)a(o.content),o.scale&&a(o.scale),o.font&&a(o.font),o.textColor&&a(o.textColor)}outputDefined(){return!1}serialize(){const a=["format"];for(const o of this.sections){a.push(o.content.serialize());const c={};o.scale&&(c["font-scale"]=o.scale.serialize()),o.font&&(c["text-font"]=o.font.serialize()),o.textColor&&(c["text-color"]=o.textColor.serialize()),a.push(c)}return a}}class AM{constructor(a){this.type=OT,this.input=a}static parse(a,o){if(2!==a.length)return o.error("Expected two arguments.");const c=o.parse(a[1],1,Fr);return c?new AM(c):o.error("No image name provided.")}evaluate(a){const o=this.input.evaluate(a),c=jd.fromString(o);return c&&a.availableImages&&(c.available=a.availableImages.indexOf(o)>-1),c}eachChild(a){a(this.input)}outputDefined(){return!1}serialize(){return["image",this.input.serialize()]}}const WEe={"to-boolean":xr,"to-color":Hd,"to-number":Wt,"to-string":Fr};class ap{constructor(a,o){this.type=a,this.args=o}static parse(a,o){if(a.length<2)return o.error("Expected at least one argument.");const c=a[0];if(("to-boolean"===c||"to-string"===c)&&2!==a.length)return o.error("Expected one argument.");const u=WEe[c],h=[];for(let d=1;d<a.length;d++){const f=o.parse(a[d],d,Er);if(!f)return null;h.push(f)}return new ap(u,h)}evaluate(a){if("boolean"===this.type.kind)return Boolean(this.args[0].evaluate(a));if("color"===this.type.kind){let o,c;for(const u of this.args){if(o=u.evaluate(a),c=null,o instanceof pi)return o;if("string"==typeof o){const h=a.parseColor(o);if(h)return h}else if(Array.isArray(o)&&(c=o.length<3||o.length>4?`Invalid rbga value ${JSON.stringify(o)}: expected an array containing either three or four numeric values.`:Bq(o[0],o[1],o[2],o[3]),!c))return new pi(o[0]/255,o[1]/255,o[2]/255,o[3])}throw new ta(c||`Could not parse color from value '${"string"==typeof o?o:String(JSON.stringify(o))}'`)}if("number"===this.type.kind){let o=null;for(const c of this.args){if(o=c.evaluate(a),null===o)return 0;const u=Number(o);if(!isNaN(u))return u}throw new ta(`Could not convert ${JSON.stringify(o)} to number.`)}return"formatted"===this.type.kind?wu.fromString(kT(this.args[0].evaluate(a))):"resolvedImage"===this.type.kind?jd.fromString(kT(this.args[0].evaluate(a))):kT(this.args[0].evaluate(a))}eachChild(a){this.args.forEach(a)}outputDefined(){return this.args.every(a=>a.outputDefined())}serialize(){if("formatted"===this.type.kind)return new DM([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if("resolvedImage"===this.type.kind)return new AM(this.args[0]).serialize();const a=[`to-${this.type.kind}`];return this.eachChild(o=>{a.push(o.serialize())}),a}}const qEe=["Unknown","Point","LineString","Polygon"];class Uq{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?"number"==typeof this.feature.type?qEe[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(a){let o=this._parseColorCache[a];return o||(o=this._parseColorCache[a]=pi.parse(a)),o}}class xu{constructor(a,o,c,u){this.name=a,this.type=o,this._evaluate=c,this.args=u}evaluate(a){return this._evaluate(a,this.args)}eachChild(a){this.args.forEach(a)}outputDefined(){return!1}serialize(){return[this.name].concat(this.args.map(a=>a.serialize()))}static parse(a,o){const c=a[0],u=xu.definitions[c];if(!u)return o.error(`Unknown expression "${c}". If you wanted a literal array, use ["literal", [...]].`,0);const h=Array.isArray(u)?u[0]:u.type,d=Array.isArray(u)?[[u[1],u[2]]]:u.overloads,f=d.filter(([g])=>!Array.isArray(g)||g.length===a.length-1);let m=null;for(const[g,y]of f){m=new NM(o.registry,o.path,null,o.scope);const v=[];let _=!1;for(let b=1;b<a.length;b++){const w=a[b],C=Array.isArray(g)?g[b-1]:g.type,E=m.parse(w,1+v.length,C);if(!E){_=!0;break}v.push(E)}if(!_){if(Array.isArray(g)&&g.length!==v.length){m.error(`Expected ${g.length} arguments, but found ${v.length} instead.`);continue}for(let b=0;b<v.length;b++){const w=Array.isArray(g)?g[b]:g.type,C=v[b];m.concat(b+1).checkSubtype(w,C.type)}if(0===m.errors.length)return new xu(c,h,y,v)}}if(1===f.length)o.errors.push(...m.errors);else{const y=(f.length?f:d).map(([_])=>function(l){return Array.isArray(l)?`(${l.map(hs).join(", ")})`:`(${hs(l.type)}...)`}(_)).join(" | "),v=[];for(let _=1;_<a.length;_++){const b=o.parse(a[_],1+v.length);if(!b)return null;v.push(hs(b.type))}o.error(`Expected arguments of type ${y}, but found (${v.join(", ")}) instead.`)}return null}static register(a,o){xu.definitions=o;for(const c in o)a[c]=xu}}class IM{constructor(a,o,c){this.type=xM,this.locale=c,this.caseSensitive=a,this.diacriticSensitive=o}static parse(a,o){if(2!==a.length)return o.error("Expected one argument.");const c=a[1];if("object"!=typeof c||Array.isArray(c))return o.error("Collator options argument must be an object.");const u=o.parse(void 0!==c["case-sensitive"]&&c["case-sensitive"],1,xr);if(!u)return null;const h=o.parse(void 0!==c["diacritic-sensitive"]&&c["diacritic-sensitive"],1,xr);if(!h)return null;let d=null;return c.locale&&(d=o.parse(c.locale,1,Fr),!d)?null:new IM(u,h,d)}evaluate(a){return new DF(this.caseSensitive.evaluate(a),this.diacriticSensitive.evaluate(a),this.locale?this.locale.evaluate(a):null)}eachChild(a){a(this.caseSensitive),a(this.diacriticSensitive),this.locale&&a(this.locale)}outputDefined(){return!1}serialize(){const a={};return a["case-sensitive"]=this.caseSensitive.serialize(),a["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(a.locale=this.locale.serialize()),["collator",a]}}const lp=8192;function RF(l,a){l[0]=Math.min(l[0],a[0]),l[1]=Math.min(l[1],a[1]),l[2]=Math.max(l[2],a[0]),l[3]=Math.max(l[3],a[1])}function RM(l,a){return!(l[0]<=a[0]||l[2]>=a[2]||l[1]<=a[1]||l[3]>=a[3])}function ZEe(l,a){const o=function(l){return(180+l)/360}(l[0]),c=function(l){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+l*Math.PI/360)))/360}(l[1]),u=Math.pow(2,a.z);return[Math.round(o*u*lp),Math.round(c*u*lp)]}function KEe(l,a,o){const c=l[0]-a[0],u=l[1]-a[1],h=l[0]-o[0],d=l[1]-o[1];return c*d-h*u==0&&c*h<=0&&u*d<=0}function JEe(l,a,o){return a[1]>l[1]!=o[1]>l[1]&&l[0]<(o[0]-a[0])*(l[1]-a[1])/(o[1]-a[1])+a[0]}function PF(l,a){let o=!1;for(let c=0,u=a.length;c<u;c++){const h=a[c];for(let d=0,f=h.length;d<f-1;d++){if(KEe(l,h[d],h[d+1]))return!1;JEe(l,h[d],h[d+1])&&(o=!o)}}return o}function QEe(l,a){for(let o=0;o<a.length;o++)if(PF(l,a[o]))return!0;return!1}function Gq(l,a,o,c){const m=c[0]-o[0],g=c[1]-o[1],y=(l[0]-o[0])*g-m*(l[1]-o[1]),v=(a[0]-o[0])*g-m*(a[1]-o[1]);return y>0&&v<0||y<0&&v>0}function tMe(l,a,o,c){return 0!==function(l,a){return l[0]*a[1]-l[1]*a[0]}([c[0]-o[0],c[1]-o[1]],[a[0]-l[0],a[1]-l[1]])&&!(!Gq(l,a,o,c)||!Gq(o,c,l,a))}function nMe(l,a,o){for(const c of o)for(let u=0;u<c.length-1;++u)if(tMe(l,a,c[u],c[u+1]))return!0;return!1}function zq(l,a){for(let o=0;o<l.length;++o)if(!PF(l[o],a))return!1;for(let o=0;o<l.length-1;++o)if(nMe(l[o],l[o+1],a))return!1;return!0}function rMe(l,a){for(let o=0;o<a.length;o++)if(zq(l,a[o]))return!0;return!1}function LF(l,a,o){const c=[];for(let u=0;u<l.length;u++){const h=[];for(let d=0;d<l[u].length;d++){const f=ZEe(l[u][d],o);RF(a,f),h.push(f)}c.push(h)}return c}function Hq(l,a,o){const c=[];for(let u=0;u<l.length;u++){const h=LF(l[u],a,o);c.push(h)}return c}function jq(l,a,o,c){if(l[0]<o[0]||l[0]>o[2]){const u=.5*c;let h=l[0]-o[0]>u?-c:o[0]-l[0]>u?c:0;0===h&&(h=l[0]-o[2]>u?-c:o[2]-l[0]>u?c:0),l[0]+=h}RF(a,l)}function Wq(l,a,o,c){const u=Math.pow(2,c.z)*lp,h=[c.x*lp,c.y*lp],d=[];for(const f of l)for(const m of f){const g=[m.x+h[0],m.y+h[1]];jq(g,a,o,u),d.push(g)}return d}function qq(l,a,o,c){const u=Math.pow(2,c.z)*lp,h=[c.x*lp,c.y*lp],d=[];for(const f of l){const m=[];for(const g of f){const y=[g.x+h[0],g.y+h[1]];RF(a,y),m.push(y)}d.push(m)}if(a[2]-a[0]<=u/2){!function(l){l[0]=l[1]=1/0,l[2]=l[3]=-1/0}(a);for(const f of d)for(const m of f)jq(m,a,o,u)}return d}class ug{constructor(a,o){this.type=xr,this.geojson=a,this.geometries=o}static parse(a,o){if(2!==a.length)return o.error(`'within' expression requires exactly one argument, but found ${a.length-1} instead.`);if(MM(a[1])){const c=a[1];if("FeatureCollection"===c.type)for(let u=0;u<c.features.length;++u){const h=c.features[u].geometry.type;if("Polygon"===h||"MultiPolygon"===h)return new ug(c,c.features[u].geometry)}else if("Feature"===c.type){const u=c.geometry.type;if("Polygon"===u||"MultiPolygon"===u)return new ug(c,c.geometry)}else if("Polygon"===c.type||"MultiPolygon"===c.type)return new ug(c,c)}return o.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(a){if(null!=a.geometry()&&null!=a.canonicalID()){if("Point"===a.geometryType())return function(l,a){const o=[1/0,1/0,-1/0,-1/0],c=[1/0,1/0,-1/0,-1/0],u=l.canonicalID();if("Polygon"===a.type){const h=LF(a.coordinates,c,u),d=Wq(l.geometry(),o,c,u);if(!RM(o,c))return!1;for(const f of d)if(!PF(f,h))return!1}if("MultiPolygon"===a.type){const h=Hq(a.coordinates,c,u),d=Wq(l.geometry(),o,c,u);if(!RM(o,c))return!1;for(const f of d)if(!QEe(f,h))return!1}return!0}(a,this.geometries);if("LineString"===a.geometryType())return function(l,a){const o=[1/0,1/0,-1/0,-1/0],c=[1/0,1/0,-1/0,-1/0],u=l.canonicalID();if("Polygon"===a.type){const h=LF(a.coordinates,c,u),d=qq(l.geometry(),o,c,u);if(!RM(o,c))return!1;for(const f of d)if(!zq(f,h))return!1}if("MultiPolygon"===a.type){const h=Hq(a.coordinates,c,u),d=qq(l.geometry(),o,c,u);if(!RM(o,c))return!1;for(const f of d)if(!rMe(f,h))return!1}return!0}(a,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}serialize(){return["within",this.geojson]}}function PM(l){if(l instanceof xu){if("get"===l.name&&1===l.args.length)return!1;if("feature-state"===l.name)return!1;if("has"===l.name&&1===l.args.length)return!1;if("properties"===l.name||"geometry-type"===l.name||"id"===l.name)return!1;if(/^filter-/.test(l.name))return!1}if(l instanceof ug)return!1;let a=!0;return l.eachChild(o=>{a&&!PM(o)&&(a=!1)}),a}function VT(l){if(l instanceof xu&&"feature-state"===l.name)return!1;let a=!0;return l.eachChild(o=>{a&&!VT(o)&&(a=!1)}),a}function LM(l,a){if(l instanceof xu&&a.indexOf(l.name)>=0)return!1;let o=!0;return l.eachChild(c=>{o&&!LM(c,a)&&(o=!1)}),o}class OM{constructor(a,o){this.type=o.type,this.name=a,this.boundExpression=o}static parse(a,o){if(2!==a.length||"string"!=typeof a[1])return o.error("'var' expression requires exactly one string literal argument.");const c=a[1];return o.scope.has(c)?new OM(c,o.scope.get(c)):o.error(`Unknown variable "${c}". Make sure "${c}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(a){return this.boundExpression.evaluate(a)}eachChild(){}outputDefined(){return!1}serialize(){return["var",this.name]}}class NM{constructor(a,o=[],c,u=new EF,h=[]){this.registry=a,this.path=o,this.key=o.map(d=>`[${d}]`).join(""),this.scope=u,this.errors=h,this.expectedType=c}parse(a,o,c,u,h={}){return o?this.concat(o,c,u)._parse(a,h):this._parse(a,h)}_parse(a,o){function c(u,h,d){return"assert"===d?new Cu(h,[u]):"coerce"===d?new ap(h,[u]):u}if((null===a||"string"==typeof a||"boolean"==typeof a||"number"==typeof a)&&(a=["literal",a]),Array.isArray(a)){if(0===a.length)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const u=a[0];if("string"!=typeof u)return this.error(`Expression name must be a string, but found ${typeof u} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const h=this.registry[u];if(h){let d=h.parse(a,this);if(!d)return null;if(this.expectedType){const f=this.expectedType,m=d.type;if("string"!==f.kind&&"number"!==f.kind&&"boolean"!==f.kind&&"object"!==f.kind&&"array"!==f.kind||"value"!==m.kind)if("color"!==f.kind&&"formatted"!==f.kind&&"resolvedImage"!==f.kind||"value"!==m.kind&&"string"!==m.kind){if(this.checkSubtype(f,m))return null}else d=c(d,f,o.typeAnnotation||"coerce");else d=c(d,f,o.typeAnnotation||"assert")}if(!(d instanceof g_)&&"resolvedImage"!==d.type.kind&&OF(d)){const f=new Uq;try{d=new g_(d.type,d.evaluate(f))}catch(m){return this.error(m.message),null}}return d}return this.error(`Unknown expression "${u}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(void 0===a?"'undefined' value invalid. Use null instead.":"object"==typeof a?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof a} instead.`)}concat(a,o,c){const u="number"==typeof a?this.path.concat(a):this.path,h=c?this.scope.concat(c):this.scope;return new NM(this.registry,u,o||null,h,this.errors)}error(a,...o){const c=`${this.key}${o.map(u=>`[${u}]`).join("")}`;this.errors.push(new Mh(c,a))}checkSubtype(a,o){const c=NT(a,o);return c&&this.error(c),c}}function OF(l){if(l instanceof OM)return OF(l.boundExpression);if(l instanceof xu&&"error"===l.name)return!1;if(l instanceof IM)return!1;if(l instanceof ug)return!1;const a=l instanceof ap||l instanceof Cu;let o=!0;return l.eachChild(c=>{o=a?o&&OF(c):o&&c instanceof g_}),!!o&&PM(l)&&LM(l,["zoom","heatmap-density","line-progress","sky-radial-progress","accumulated","is-supported-script"])}function FM(l,a){const o=l.length-1;let d,f,c=0,u=o,h=0;for(;c<=u;)if(h=Math.floor((c+u)/2),d=l[h],f=l[h+1],d<=a){if(h===o||a<f)return h;c=h+1}else{if(!(d>a))throw new ta("Input is not a number.");u=h-1}return 0}class kM{constructor(a,o,c){this.type=a,this.input=o,this.labels=[],this.outputs=[];for(const[u,h]of c)this.labels.push(u),this.outputs.push(h)}static parse(a,o){if(a.length-1<4)return o.error(`Expected at least 4 arguments, but found only ${a.length-1}.`);if((a.length-1)%2!=0)return o.error("Expected an even number of arguments.");const c=o.parse(a[1],1,Wt);if(!c)return null;const u=[];let h=null;o.expectedType&&"value"!==o.expectedType.kind&&(h=o.expectedType);for(let d=1;d<a.length;d+=2){const f=1===d?-1/0:a[d],m=a[d+1],g=d,y=d+1;if("number"!=typeof f)return o.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',g);if(u.length&&u[u.length-1][0]>=f)return o.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',g);const v=o.parse(m,y,h);if(!v)return null;h=h||v.type,u.push([f,v])}return new kM(h,c,u)}evaluate(a){const o=this.labels,c=this.outputs;if(1===o.length)return c[0].evaluate(a);const u=this.input.evaluate(a);if(u<=o[0])return c[0].evaluate(a);const h=o.length;return u>=o[h-1]?c[h-1].evaluate(a):c[FM(o,u)].evaluate(a)}eachChild(a){a(this.input);for(const o of this.outputs)a(o)}outputDefined(){return this.outputs.every(a=>a.outputDefined())}serialize(){const a=["step",this.input.serialize()];for(let o=0;o<this.labels.length;o++)o>0&&a.push(this.labels[o]),a.push(this.outputs[o].serialize());return a}}var aMe=y_;function y_(l,a,o,c){this.cx=3*l,this.bx=3*(o-l)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*a,this.by=3*(c-a)-this.cy,this.ay=1-this.cy-this.by,this.p1x=l,this.p1y=c,this.p2x=o,this.p2y=c}function $l(l,a,o){return l*(1-o)+a*o}y_.prototype.sampleCurveX=function(l){return((this.ax*l+this.bx)*l+this.cx)*l},y_.prototype.sampleCurveY=function(l){return((this.ay*l+this.by)*l+this.cy)*l},y_.prototype.sampleCurveDerivativeX=function(l){return(3*this.ax*l+2*this.bx)*l+this.cx},y_.prototype.solveCurveX=function(l,a){var o,c,u,h,d;for(void 0===a&&(a=1e-6),u=l,d=0;d<8;d++){if(h=this.sampleCurveX(u)-l,Math.abs(h)<a)return u;var f=this.sampleCurveDerivativeX(u);if(Math.abs(f)<1e-6)break;u-=h/f}if((u=l)<(o=0))return o;if(u>(c=1))return c;for(;o<c;){if(h=this.sampleCurveX(u),Math.abs(h-l)<a)return u;l>h?o=u:c=u,u=.5*(c-o)+o}return u},y_.prototype.solve=function(l,a){return this.sampleCurveY(this.solveCurveX(l,a))};var Xq=Object.freeze({__proto__:null,number:$l,color:function(l,a,o){return new pi($l(l.r,a.r,o),$l(l.g,a.g,o),$l(l.b,a.b,o),$l(l.a,a.a,o))},array:function(l,a,o){return l.map((c,u)=>$l(c,a[u],o))}});const Kq=4/29,v_=6/29,Jq=3*v_*v_,hMe=Math.PI/180,dMe=180/Math.PI;function NF(l){return l>.008856451679035631?Math.pow(l,1/3):l/Jq+Kq}function FF(l){return l>v_?l*l*l:Jq*(l-Kq)}function kF(l){return 255*(l<=.0031308?12.92*l:1.055*Math.pow(l,1/2.4)-.055)}function VF(l){return(l/=255)<=.04045?l/12.92:Math.pow((l+.055)/1.055,2.4)}function Qq(l){const a=VF(l.r),o=VF(l.g),c=VF(l.b),u=NF((.4124564*a+.3575761*o+.1804375*c)/.95047),h=NF((.2126729*a+.7151522*o+.072175*c)/1);return{l:116*h-16,a:500*(u-h),b:200*(h-NF((.0193339*a+.119192*o+.9503041*c)/1.08883)),alpha:l.a}}function eX(l){let a=(l.l+16)/116,o=isNaN(l.a)?a:a+l.a/500,c=isNaN(l.b)?a:a-l.b/200;return a=1*FF(a),o=.95047*FF(o),c=1.08883*FF(c),new pi(kF(3.2404542*o-1.5371385*a-.4985314*c),kF(-.969266*o+1.8760108*a+.041556*c),kF(.0556434*o-.2040259*a+1.0572252*c),l.alpha)}function gMe(l,a,o){const c=a-l;return l+o*(c>180||c<-180?c-360*Math.round(c/360):c)}const BT={forward:Qq,reverse:eX,interpolate:function(l,a,o){return{l:$l(l.l,a.l,o),a:$l(l.a,a.a,o),b:$l(l.b,a.b,o),alpha:$l(l.alpha,a.alpha,o)}}},UT_forward=function(l){const{l:a,a:o,b:c}=Qq(l),u=Math.atan2(c,o)*dMe;return{h:u<0?u+360:u,c:Math.sqrt(o*o+c*c),l:a,alpha:l.a}},UT_reverse=function(l){const a=l.h*hMe,o=l.c;return eX({l:l.l,a:Math.cos(a)*o,b:Math.sin(a)*o,alpha:l.alpha})},UT_interpolate=function(l,a,o){return{h:gMe(l.h,a.h,o),c:$l(l.c,a.c,o),l:$l(l.l,a.l,o),alpha:$l(l.alpha,a.alpha,o)}};class Nc{constructor(a,o,c,u,h){this.type=a,this.operator=o,this.interpolation=c,this.input=u,this.labels=[],this.outputs=[];for(const[d,f]of h)this.labels.push(d),this.outputs.push(f)}static interpolationFactor(a,o,c,u){let h=0;if("exponential"===a.name)h=BF(o,a.base,c,u);else if("linear"===a.name)h=BF(o,1,c,u);else if("cubic-bezier"===a.name){const d=a.controlPoints;h=new aMe(d[0],d[1],d[2],d[3]).solve(BF(o,1,c,u))}return h}static parse(a,o){let[c,u,h,...d]=a;if(!Array.isArray(u)||0===u.length)return o.error("Expected an interpolation type expression.",1);if("linear"===u[0])u={name:"linear"};else if("exponential"===u[0]){const g=u[1];if("number"!=typeof g)return o.error("Exponential interpolation requires a numeric base.",1,1);u={name:"exponential",base:g}}else{if("cubic-bezier"!==u[0])return o.error(`Unknown interpolation type ${String(u[0])}`,1,0);{const g=u.slice(1);if(4!==g.length||g.some(y=>"number"!=typeof y||y<0||y>1))return o.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);u={name:"cubic-bezier",controlPoints:g}}}if(a.length-1<4)return o.error(`Expected at least 4 arguments, but found only ${a.length-1}.`);if((a.length-1)%2!=0)return o.error("Expected an even number of arguments.");if(h=o.parse(h,2,Wt),!h)return null;const f=[];let m=null;"interpolate-hcl"===c||"interpolate-lab"===c?m=Hd:o.expectedType&&"value"!==o.expectedType.kind&&(m=o.expectedType);for(let g=0;g<d.length;g+=2){const y=d[g],v=d[g+1],_=g+3,b=g+4;if("number"!=typeof y)return o.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',_);if(f.length&&f[f.length-1][0]>=y)return o.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',_);const w=o.parse(v,b,m);if(!w)return null;m=m||w.type,f.push([y,w])}return"number"===m.kind||"color"===m.kind||"array"===m.kind&&"number"===m.itemType.kind&&"number"==typeof m.N?new Nc(m,c,u,h,f):o.error(`Type ${hs(m)} is not interpolatable.`)}evaluate(a){const o=this.labels,c=this.outputs;if(1===o.length)return c[0].evaluate(a);const u=this.input.evaluate(a);if(u<=o[0])return c[0].evaluate(a);const h=o.length;if(u>=o[h-1])return c[h-1].evaluate(a);const d=FM(o,u),g=Nc.interpolationFactor(this.interpolation,u,o[d],o[d+1]),y=c[d].evaluate(a),v=c[d+1].evaluate(a);return"interpolate"===this.operator?Xq[this.type.kind.toLowerCase()](y,v,g):"interpolate-hcl"===this.operator?UT_reverse(UT_interpolate(UT_forward(y),UT_forward(v),g)):BT.reverse(BT.interpolate(BT.forward(y),BT.forward(v),g))}eachChild(a){a(this.input);for(const o of this.outputs)a(o)}outputDefined(){return this.outputs.every(a=>a.outputDefined())}serialize(){let a;a="linear"===this.interpolation.name?["linear"]:"exponential"===this.interpolation.name?1===this.interpolation.base?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);const o=[this.operator,a,this.input.serialize()];for(let c=0;c<this.labels.length;c++)o.push(this.labels[c],this.outputs[c].serialize());return o}}function BF(l,a,o,c){const u=c-o,h=l-o;return 0===u?0:1===a?h/u:(Math.pow(a,h)-1)/(Math.pow(a,u)-1)}class GT{constructor(a,o){this.type=a,this.args=o}static parse(a,o){if(a.length<2)return o.error("Expectected at least one argument.");let c=null;const u=o.expectedType;u&&"value"!==u.kind&&(c=u);const h=[];for(const f of a.slice(1)){const m=o.parse(f,1+h.length,c,void 0,{typeAnnotation:"omit"});if(!m)return null;c=c||m.type,h.push(m)}return u&&h.some(f=>NT(u,f.type))?new GT(Er,h):new GT(c,h)}evaluate(a){let u,o=null,c=0;for(const h of this.args)if(c++,o=h.evaluate(a),o&&o instanceof jd&&!o.available&&(u||(u=o.name),o=null,c===this.args.length&&(o=u)),null!==o)break;return o}eachChild(a){this.args.forEach(a)}outputDefined(){return this.args.every(a=>a.outputDefined())}serialize(){const a=["coalesce"];return this.eachChild(o=>{a.push(o.serialize())}),a}}class VM{constructor(a,o){this.type=o.type,this.bindings=[].concat(a),this.result=o}evaluate(a){return this.result.evaluate(a)}eachChild(a){for(const o of this.bindings)a(o[1]);a(this.result)}static parse(a,o){if(a.length<4)return o.error(`Expected at least 3 arguments, but found ${a.length-1} instead.`);const c=[];for(let h=1;h<a.length-1;h+=2){const d=a[h];if("string"!=typeof d)return o.error(`Expected string, but found ${typeof d} instead.`,h);if(/[^a-zA-Z0-9_]/.test(d))return o.error("Variable names must contain only alphanumeric characters or '_'.",h);const f=o.parse(a[h+1],h+1);if(!f)return null;c.push([d,f])}const u=o.parse(a[a.length-1],a.length-1,o.expectedType,c);return u?new VM(c,u):null}outputDefined(){return this.result.outputDefined()}serialize(){const a=["let"];for(const[o,c]of this.bindings)a.push(o,c.serialize());return a.push(this.result.serialize()),a}}class UF{constructor(a,o,c){this.type=a,this.index=o,this.input=c}static parse(a,o){if(3!==a.length)return o.error(`Expected 2 arguments, but found ${a.length-1} instead.`);const c=o.parse(a[1],1,Wt),u=o.parse(a[2],2,Oc(o.expectedType||Er));return c&&u?new UF(u.type.itemType,c,u):null}evaluate(a){const o=this.index.evaluate(a),c=this.input.evaluate(a);if(o<0)throw new ta(`Array index out of bounds: ${o} < 0.`);if(o>=c.length)throw new ta(`Array index out of bounds: ${o} > ${c.length-1}.`);if(o!==Math.floor(o))throw new ta(`Array index must be an integer, but found ${o} instead.`);return c[o]}eachChild(a){a(this.index),a(this.input)}outputDefined(){return!1}serialize(){return["at",this.index.serialize(),this.input.serialize()]}}class GF{constructor(a,o){this.type=xr,this.needle=a,this.haystack=o}static parse(a,o){if(3!==a.length)return o.error(`Expected 2 arguments, but found ${a.length-1} instead.`);const c=o.parse(a[1],1,Er),u=o.parse(a[2],2,Er);return c&&u?MF(c.type,[xr,Fr,Wt,CM,Er])?new GF(c,u):o.error(`Expected first argument to be of type boolean, string, number or null, but found ${hs(c.type)} instead`):null}evaluate(a){const o=this.needle.evaluate(a),c=this.haystack.evaluate(a);if(!c)return!1;if(!FT(o,["boolean","string","number","null"]))throw new ta(`Expected first argument to be of type boolean, string, number or null, but found ${hs(So(o))} instead.`);if(!FT(c,["string","array"]))throw new ta(`Expected second argument to be of type array or string, but found ${hs(So(c))} instead.`);return c.indexOf(o)>=0}eachChild(a){a(this.needle),a(this.haystack)}outputDefined(){return!0}serialize(){return["in",this.needle.serialize(),this.haystack.serialize()]}}class BM{constructor(a,o,c){this.type=Wt,this.needle=a,this.haystack=o,this.fromIndex=c}static parse(a,o){if(a.length<=2||a.length>=5)return o.error(`Expected 3 or 4 arguments, but found ${a.length-1} instead.`);const c=o.parse(a[1],1,Er),u=o.parse(a[2],2,Er);if(!c||!u)return null;if(!MF(c.type,[xr,Fr,Wt,CM,Er]))return o.error(`Expected first argument to be of type boolean, string, number or null, but found ${hs(c.type)} instead`);if(4===a.length){const h=o.parse(a[3],3,Wt);return h?new BM(c,u,h):null}return new BM(c,u)}evaluate(a){const o=this.needle.evaluate(a),c=this.haystack.evaluate(a);if(!FT(o,["boolean","string","number","null"]))throw new ta(`Expected first argument to be of type boolean, string, number or null, but found ${hs(So(o))} instead.`);if(!FT(c,["string","array"]))throw new ta(`Expected second argument to be of type array or string, but found ${hs(So(c))} instead.`);if(this.fromIndex){const u=this.fromIndex.evaluate(a);return c.indexOf(o,u)}return c.indexOf(o)}eachChild(a){a(this.needle),a(this.haystack),this.fromIndex&&a(this.fromIndex)}outputDefined(){return!1}serialize(){if(null!=this.fromIndex&&void 0!==this.fromIndex){const a=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),a]}return["index-of",this.needle.serialize(),this.haystack.serialize()]}}class zF{constructor(a,o,c,u,h,d){this.inputType=a,this.type=o,this.input=c,this.cases=u,this.outputs=h,this.otherwise=d}static parse(a,o){if(a.length<5)return o.error(`Expected at least 4 arguments, but found only ${a.length-1}.`);if(a.length%2!=1)return o.error("Expected an even number of arguments.");let c,u;o.expectedType&&"value"!==o.expectedType.kind&&(u=o.expectedType);const h={},d=[];for(let g=2;g<a.length-1;g+=2){let y=a[g];const v=a[g+1];Array.isArray(y)||(y=[y]);const _=o.concat(g);if(0===y.length)return _.error("Expected at least one branch label.");for(const w of y){if("number"!=typeof w&&"string"!=typeof w)return _.error("Branch labels must be numbers or strings.");if("number"==typeof w&&Math.abs(w)>Number.MAX_SAFE_INTEGER)return _.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if("number"==typeof w&&Math.floor(w)!==w)return _.error("Numeric branch labels must be integer values.");if(c){if(_.checkSubtype(c,So(w)))return null}else c=So(w);if(void 0!==h[String(w)])return _.error("Branch labels must be unique.");h[String(w)]=d.length}const b=o.parse(v,g,u);if(!b)return null;u=u||b.type,d.push(b)}const f=o.parse(a[1],1,Er);if(!f)return null;const m=o.parse(a[a.length-1],a.length-1,u);return!m||"value"!==f.type.kind&&o.concat(1).checkSubtype(c,f.type)?null:new zF(c,u,f,h,d,m)}evaluate(a){const o=this.input.evaluate(a);return(So(o)===this.inputType&&this.outputs[this.cases[o]]||this.otherwise).evaluate(a)}eachChild(a){a(this.input),this.outputs.forEach(a),a(this.otherwise)}outputDefined(){return this.outputs.every(a=>a.outputDefined())&&this.otherwise.outputDefined()}serialize(){const a=["match",this.input.serialize()],o=Object.keys(this.cases).sort(),c=[],u={};for(const d of o){const f=u[this.cases[d]];void 0===f?(u[this.cases[d]]=c.length,c.push([this.cases[d],[d]])):c[f][1].push(d)}const h=d=>"number"===this.inputType.kind?Number(d):d;for(const[d,f]of c)a.push(1===f.length?h(f[0]):f.map(h)),a.push(this.outputs[d].serialize());return a.push(this.otherwise.serialize()),a}}class HF{constructor(a,o,c){this.type=a,this.branches=o,this.otherwise=c}static parse(a,o){if(a.length<4)return o.error(`Expected at least 3 arguments, but found only ${a.length-1}.`);if(a.length%2!=0)return o.error("Expected an odd number of arguments.");let c;o.expectedType&&"value"!==o.expectedType.kind&&(c=o.expectedType);const u=[];for(let d=1;d<a.length-1;d+=2){const f=o.parse(a[d],d,xr);if(!f)return null;const m=o.parse(a[d+1],d+1,c);if(!m)return null;u.push([f,m]),c=c||m.type}const h=o.parse(a[a.length-1],a.length-1,c);return h?new HF(c,u,h):null}evaluate(a){for(const[o,c]of this.branches)if(o.evaluate(a))return c.evaluate(a);return this.otherwise.evaluate(a)}eachChild(a){for(const[o,c]of this.branches)a(o),a(c);a(this.otherwise)}outputDefined(){return this.branches.every(([a,o])=>o.outputDefined())&&this.otherwise.outputDefined()}serialize(){const a=["case"];return this.eachChild(o=>{a.push(o.serialize())}),a}}class UM{constructor(a,o,c,u){this.type=a,this.input=o,this.beginIndex=c,this.endIndex=u}static parse(a,o){if(a.length<=2||a.length>=5)return o.error(`Expected 3 or 4 arguments, but found ${a.length-1} instead.`);const c=o.parse(a[1],1,Er),u=o.parse(a[2],2,Wt);if(!c||!u)return null;if(!MF(c.type,[Oc(Er),Fr,Er]))return o.error(`Expected first argument to be of type array or string, but found ${hs(c.type)} instead`);if(4===a.length){const h=o.parse(a[3],3,Wt);return h?new UM(c.type,c,u,h):null}return new UM(c.type,c,u)}evaluate(a){const o=this.input.evaluate(a),c=this.beginIndex.evaluate(a);if(!FT(o,["string","array"]))throw new ta(`Expected first argument to be of type array or string, but found ${hs(So(o))} instead.`);if(this.endIndex){const u=this.endIndex.evaluate(a);return o.slice(c,u)}return o.slice(c)}eachChild(a){a(this.input),a(this.beginIndex),this.endIndex&&a(this.endIndex)}outputDefined(){return!1}serialize(){if(null!=this.endIndex&&void 0!==this.endIndex){const a=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),a]}return["slice",this.input.serialize(),this.beginIndex.serialize()]}}function nX(l,a){return"=="===l||"!="===l?"boolean"===a.kind||"string"===a.kind||"number"===a.kind||"null"===a.kind||"value"===a.kind:"string"===a.kind||"number"===a.kind||"value"===a.kind}function rX(l,a,o,c){return 0===c.compare(a,o)}function __(l,a,o){const c="=="!==l&&"!="!==l;return class uoe{constructor(h,d,f){this.type=xr,this.lhs=h,this.rhs=d,this.collator=f,this.hasUntypedArgument="value"===h.type.kind||"value"===d.type.kind}static parse(h,d){if(3!==h.length&&4!==h.length)return d.error("Expected two or three arguments.");const f=h[0];let m=d.parse(h[1],1,Er);if(!m)return null;if(!nX(f,m.type))return d.concat(1).error(`"${f}" comparisons are not supported for type '${hs(m.type)}'.`);let g=d.parse(h[2],2,Er);if(!g)return null;if(!nX(f,g.type))return d.concat(2).error(`"${f}" comparisons are not supported for type '${hs(g.type)}'.`);if(m.type.kind!==g.type.kind&&"value"!==m.type.kind&&"value"!==g.type.kind)return d.error(`Cannot compare types '${hs(m.type)}' and '${hs(g.type)}'.`);c&&("value"===m.type.kind&&"value"!==g.type.kind?m=new Cu(g.type,[m]):"value"!==m.type.kind&&"value"===g.type.kind&&(g=new Cu(m.type,[g])));let y=null;if(4===h.length){if("string"!==m.type.kind&&"string"!==g.type.kind&&"value"!==m.type.kind&&"value"!==g.type.kind)return d.error("Cannot use collator to compare non-string types.");if(y=d.parse(h[3],3,xM),!y)return null}return new uoe(m,g,y)}evaluate(h){const d=this.lhs.evaluate(h),f=this.rhs.evaluate(h);if(c&&this.hasUntypedArgument){const m=So(d),g=So(f);if(m.kind!==g.kind||"string"!==m.kind&&"number"!==m.kind)throw new ta(`Expected arguments for "${l}" to be (string, string) or (number, number), but found (${m.kind}, ${g.kind}) instead.`)}if(this.collator&&!c&&this.hasUntypedArgument){const m=So(d),g=So(f);if("string"!==m.kind||"string"!==g.kind)return a(h,d,f)}return this.collator?o(h,d,f,this.collator.evaluate(h)):a(h,d,f)}eachChild(h){h(this.lhs),h(this.rhs),this.collator&&h(this.collator)}outputDefined(){return!0}serialize(){const h=[l];return this.eachChild(d=>{h.push(d.serialize())}),h}}}const AMe=__("==",function(l,a,o){return a===o},rX),IMe=__("!=",function(l,a,o){return a!==o},function(l,a,o,c){return!rX(0,a,o,c)}),RMe=__("<",function(l,a,o){return a<o},function(l,a,o,c){return c.compare(a,o)<0}),PMe=__(">",function(l,a,o){return a>o},function(l,a,o,c){return c.compare(a,o)>0}),LMe=__("<=",function(l,a,o){return a<=o},function(l,a,o,c){return c.compare(a,o)<=0}),OMe=__(">=",function(l,a,o){return a>=o},function(l,a,o,c){return c.compare(a,o)>=0});class jF{constructor(a,o,c,u,h){this.type=Fr,this.number=a,this.locale=o,this.currency=c,this.minFractionDigits=u,this.maxFractionDigits=h}static parse(a,o){if(3!==a.length)return o.error("Expected two arguments.");const c=o.parse(a[1],1,Wt);if(!c)return null;const u=a[2];if("object"!=typeof u||Array.isArray(u))return o.error("NumberFormat options argument must be an object.");let h=null;if(u.locale&&(h=o.parse(u.locale,1,Fr),!h))return null;let d=null;if(u.currency&&(d=o.parse(u.currency,1,Fr),!d))return null;let f=null;if(u["min-fraction-digits"]&&(f=o.parse(u["min-fraction-digits"],1,Wt),!f))return null;let m=null;return u["max-fraction-digits"]&&(m=o.parse(u["max-fraction-digits"],1,Wt),!m)?null:new jF(c,h,d,f,m)}evaluate(a){return new Intl.NumberFormat(this.locale?this.locale.evaluate(a):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(a):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(a):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(a):void 0}).format(this.number.evaluate(a))}eachChild(a){a(this.number),this.locale&&a(this.locale),this.currency&&a(this.currency),this.minFractionDigits&&a(this.minFractionDigits),this.maxFractionDigits&&a(this.maxFractionDigits)}outputDefined(){return!1}serialize(){const a={};return this.locale&&(a.locale=this.locale.serialize()),this.currency&&(a.currency=this.currency.serialize()),this.minFractionDigits&&(a["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(a["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),a]}}class WF{constructor(a){this.type=Wt,this.input=a}static parse(a,o){if(2!==a.length)return o.error(`Expected 1 argument, but found ${a.length-1} instead.`);const c=o.parse(a[1],1);return c?"array"!==c.type.kind&&"string"!==c.type.kind&&"value"!==c.type.kind?o.error(`Expected argument of type string or array, but found ${hs(c.type)} instead.`):new WF(c):null}evaluate(a){const o=this.input.evaluate(a);if("string"==typeof o)return o.length;if(Array.isArray(o))return o.length;throw new ta(`Expected value to be of type string or array, but found ${hs(So(o))} instead.`)}eachChild(a){a(this.input)}outputDefined(){return!1}serialize(){const a=["length"];return this.eachChild(o=>{a.push(o.serialize())}),a}}const qF={"==":AMe,"!=":IMe,">":PMe,"<":RMe,">=":OMe,"<=":LMe,array:Cu,at:UF,boolean:Cu,case:HF,coalesce:GT,collator:IM,format:DM,image:AM,in:GF,"index-of":BM,interpolate:Nc,"interpolate-hcl":Nc,"interpolate-lab":Nc,length:WF,let:VM,literal:g_,match:zF,number:Cu,"number-format":jF,object:Cu,slice:UM,step:kM,string:Cu,"to-boolean":ap,"to-color":ap,"to-number":ap,"to-string":ap,var:OM,within:ug};function iX(l,[a,o,c,u]){a=a.evaluate(l),o=o.evaluate(l),c=c.evaluate(l);const h=u?u.evaluate(l):1,d=Bq(a,o,c,h);if(d)throw new ta(d);return new pi(a/255*h,o/255*h,c/255*h,h)}function sX(l,a){return l in a}function XF(l,a){const o=a[l];return void 0===o?null:o}function hg(l){return{type:l}}function $F(l){return{result:"success",value:l}}function b_(l){return{result:"error",value:l}}function GM(l){return"data-driven"===l["property-type"]||"cross-faded-data-driven"===l["property-type"]}function oX(l){return!!l.expression&&l.expression.parameters.indexOf("zoom")>-1}function YF(l){return!!l.expression&&l.expression.interpolated}function ri(l){return l instanceof Number?"number":l instanceof String?"string":l instanceof Boolean?"boolean":Array.isArray(l)?"array":null===l?"null":typeof l}function zT(l){return"object"==typeof l&&null!==l&&!Array.isArray(l)}xu.register(qF,{error:[{kind:"error"},[Fr],(l,[a])=>{throw new ta(a.evaluate(l))}],typeof:[Fr,[Er],(l,[a])=>hs(So(a.evaluate(l)))],"to-rgba":[Oc(Wt,4),[Hd],(l,[a])=>a.evaluate(l).toArray()],rgb:[Hd,[Wt,Wt,Wt],iX],rgba:[Hd,[Wt,Wt,Wt,Wt],iX],has:{type:xr,overloads:[[[Fr],(l,[a])=>sX(a.evaluate(l),l.properties())],[[Fr,m_],(l,[a,o])=>sX(a.evaluate(l),o.evaluate(l))]]},get:{type:Er,overloads:[[[Fr],(l,[a])=>XF(a.evaluate(l),l.properties())],[[Fr,m_],(l,[a,o])=>XF(a.evaluate(l),o.evaluate(l))]]},"feature-state":[Er,[Fr],(l,[a])=>XF(a.evaluate(l),l.featureState||{})],properties:[m_,[],l=>l.properties()],"geometry-type":[Fr,[],l=>l.geometryType()],id:[Er,[],l=>l.id()],zoom:[Wt,[],l=>l.globals.zoom],"heatmap-density":[Wt,[],l=>l.globals.heatmapDensity||0],"line-progress":[Wt,[],l=>l.globals.lineProgress||0],"sky-radial-progress":[Wt,[],l=>l.globals.skyRadialProgress||0],accumulated:[Er,[],l=>void 0===l.globals.accumulated?null:l.globals.accumulated],"+":[Wt,hg(Wt),(l,a)=>{let o=0;for(const c of a)o+=c.evaluate(l);return o}],"*":[Wt,hg(Wt),(l,a)=>{let o=1;for(const c of a)o*=c.evaluate(l);return o}],"-":{type:Wt,overloads:[[[Wt,Wt],(l,[a,o])=>a.evaluate(l)-o.evaluate(l)],[[Wt],(l,[a])=>-a.evaluate(l)]]},"/":[Wt,[Wt,Wt],(l,[a,o])=>a.evaluate(l)/o.evaluate(l)],"%":[Wt,[Wt,Wt],(l,[a,o])=>a.evaluate(l)%o.evaluate(l)],ln2:[Wt,[],()=>Math.LN2],pi:[Wt,[],()=>Math.PI],e:[Wt,[],()=>Math.E],"^":[Wt,[Wt,Wt],(l,[a,o])=>Math.pow(a.evaluate(l),o.evaluate(l))],sqrt:[Wt,[Wt],(l,[a])=>Math.sqrt(a.evaluate(l))],log10:[Wt,[Wt],(l,[a])=>Math.log(a.evaluate(l))/Math.LN10],ln:[Wt,[Wt],(l,[a])=>Math.log(a.evaluate(l))],log2:[Wt,[Wt],(l,[a])=>Math.log(a.evaluate(l))/Math.LN2],sin:[Wt,[Wt],(l,[a])=>Math.sin(a.evaluate(l))],cos:[Wt,[Wt],(l,[a])=>Math.cos(a.evaluate(l))],tan:[Wt,[Wt],(l,[a])=>Math.tan(a.evaluate(l))],asin:[Wt,[Wt],(l,[a])=>Math.asin(a.evaluate(l))],acos:[Wt,[Wt],(l,[a])=>Math.acos(a.evaluate(l))],atan:[Wt,[Wt],(l,[a])=>Math.atan(a.evaluate(l))],min:[Wt,hg(Wt),(l,a)=>Math.min(...a.map(o=>o.evaluate(l)))],max:[Wt,hg(Wt),(l,a)=>Math.max(...a.map(o=>o.evaluate(l)))],abs:[Wt,[Wt],(l,[a])=>Math.abs(a.evaluate(l))],round:[Wt,[Wt],(l,[a])=>{const o=a.evaluate(l);return o<0?-Math.round(-o):Math.round(o)}],floor:[Wt,[Wt],(l,[a])=>Math.floor(a.evaluate(l))],ceil:[Wt,[Wt],(l,[a])=>Math.ceil(a.evaluate(l))],"filter-==":[xr,[Fr,Er],(l,[a,o])=>l.properties()[a.value]===o.value],"filter-id-==":[xr,[Er],(l,[a])=>l.id()===a.value],"filter-type-==":[xr,[Fr],(l,[a])=>l.geometryType()===a.value],"filter-<":[xr,[Fr,Er],(l,[a,o])=>{const c=l.properties()[a.value],u=o.value;return typeof c==typeof u&&c<u}],"filter-id-<":[xr,[Er],(l,[a])=>{const o=l.id(),c=a.value;return typeof o==typeof c&&o<c}],"filter->":[xr,[Fr,Er],(l,[a,o])=>{const c=l.properties()[a.value],u=o.value;return typeof c==typeof u&&c>u}],"filter-id->":[xr,[Er],(l,[a])=>{const o=l.id(),c=a.value;return typeof o==typeof c&&o>c}],"filter-<=":[xr,[Fr,Er],(l,[a,o])=>{const c=l.properties()[a.value],u=o.value;return typeof c==typeof u&&c<=u}],"filter-id-<=":[xr,[Er],(l,[a])=>{const o=l.id(),c=a.value;return typeof o==typeof c&&o<=c}],"filter->=":[xr,[Fr,Er],(l,[a,o])=>{const c=l.properties()[a.value],u=o.value;return typeof c==typeof u&&c>=u}],"filter-id->=":[xr,[Er],(l,[a])=>{const o=l.id(),c=a.value;return typeof o==typeof c&&o>=c}],"filter-has":[xr,[Er],(l,[a])=>a.value in l.properties()],"filter-has-id":[xr,[],l=>null!==l.id()&&void 0!==l.id()],"filter-type-in":[xr,[Oc(Fr)],(l,[a])=>a.value.indexOf(l.geometryType())>=0],"filter-id-in":[xr,[Oc(Er)],(l,[a])=>a.value.indexOf(l.id())>=0],"filter-in-small":[xr,[Fr,Oc(Er)],(l,[a,o])=>o.value.indexOf(l.properties()[a.value])>=0],"filter-in-large":[xr,[Fr,Oc(Er)],(l,[a,o])=>function(l,a,o,c){for(;o<=c;){const u=o+c>>1;if(a[u]===l)return!0;a[u]>l?c=u-1:o=u+1}return!1}(l.properties()[a.value],o.value,0,o.value.length-1)],all:{type:xr,overloads:[[[xr,xr],(l,[a,o])=>a.evaluate(l)&&o.evaluate(l)],[hg(xr),(l,a)=>{for(const o of a)if(!o.evaluate(l))return!1;return!0}]]},any:{type:xr,overloads:[[[xr,xr],(l,[a,o])=>a.evaluate(l)||o.evaluate(l)],[hg(xr),(l,a)=>{for(const o of a)if(o.evaluate(l))return!0;return!1}]]},"!":[xr,[xr],(l,[a])=>!a.evaluate(l)],"is-supported-script":[xr,[Fr],(l,[a])=>{const o=l.globals&&l.globals.isSupportedScript;return!o||o(a.evaluate(l))}],upcase:[Fr,[Fr],(l,[a])=>a.evaluate(l).toUpperCase()],downcase:[Fr,[Fr],(l,[a])=>a.evaluate(l).toLowerCase()],concat:[Fr,hg(Er),(l,a)=>a.map(o=>kT(o.evaluate(l))).join("")],"resolved-locale":[Fr,[xM],(l,[a])=>a.evaluate(l).resolvedLocale()]});class lX{constructor(a,o){this.expression=a,this._warningHistory={},this._evaluator=new Uq,this._defaultValue=o?function(l){return"color"===l.type&&zT(l.default)?new pi(0,0,0,0):"color"===l.type?pi.parse(l.default)||null:void 0===l.default?null:l.default}(o):null,this._enumValues=o&&"enum"===o.type?o.values:null}evaluateWithoutErrorHandling(a,o,c,u,h,d){return this._evaluator.globals=a,this._evaluator.feature=o,this._evaluator.featureState=c,this._evaluator.canonical=u,this._evaluator.availableImages=h||null,this._evaluator.formattedSection=d,this.expression.evaluate(this._evaluator)}evaluate(a,o,c,u,h,d){this._evaluator.globals=a,this._evaluator.feature=o||null,this._evaluator.featureState=c||null,this._evaluator.canonical=u,this._evaluator.availableImages=h||null,this._evaluator.formattedSection=d||null;try{const f=this.expression.evaluate(this._evaluator);if(null==f||"number"==typeof f&&f!=f)return this._defaultValue;if(this._enumValues&&!(f in this._enumValues))throw new ta(`Expected value to be one of ${Object.keys(this._enumValues).map(m=>JSON.stringify(m)).join(", ")}, but found ${JSON.stringify(f)} instead.`);return f}catch(f){return this._warningHistory[f.message]||(this._warningHistory[f.message]=!0,"undefined"!=typeof console&&console.warn(f.message)),this._defaultValue}}}function jT(l){return Array.isArray(l)&&l.length>0&&"string"==typeof l[0]&&l[0]in qF}function zM(l,a){const o=new NM(qF,[],a?function(l){const a={color:Hd,string:Fr,number:Wt,enum:Fr,boolean:xr,formatted:EM,resolvedImage:OT};return"array"===l.type?Oc(a[l.value]||Er,l.length):a[l.type]}(a):void 0),c=o.parse(l,void 0,void 0,void 0,a&&"string"===a.type?{typeAnnotation:"coerce"}:void 0);return c?$F(new lX(c,a)):b_(o.errors)}class KF{constructor(a,o){this.kind=a,this._styleExpression=o,this.isStateDependent="constant"!==a&&!VT(o.expression)}evaluateWithoutErrorHandling(a,o,c,u,h,d){return this._styleExpression.evaluateWithoutErrorHandling(a,o,c,u,h,d)}evaluate(a,o,c,u,h,d){return this._styleExpression.evaluate(a,o,c,u,h,d)}}class JF{constructor(a,o,c,u){this.kind=a,this.zoomStops=c,this._styleExpression=o,this.isStateDependent="camera"!==a&&!VT(o.expression),this.interpolationType=u}evaluateWithoutErrorHandling(a,o,c,u,h,d){return this._styleExpression.evaluateWithoutErrorHandling(a,o,c,u,h,d)}evaluate(a,o,c,u,h,d){return this._styleExpression.evaluate(a,o,c,u,h,d)}interpolationFactor(a,o,c){return this.interpolationType?Nc.interpolationFactor(this.interpolationType,a,o,c):0}}function QF(l,a){if("error"===(l=zM(l,a)).result)return l;const o=l.value.expression,c=PM(o);if(!c&&!GM(a))return b_([new Mh("","data expressions not supported")]);const u=LM(o,["zoom"]);if(!u&&!oX(a))return b_([new Mh("","zoom expressions not supported")]);const h=jM(o);if(!h&&!u)return b_([new Mh("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')]);if(h instanceof Mh)return b_([h]);if(h instanceof Nc&&!YF(a))return b_([new Mh("",'"interpolate" expressions cannot be used with this property')]);if(!h)return $F(new KF(c?"constant":"source",l.value));return $F(new JF(c?"camera":"composite",l.value,h.labels,h instanceof Nc?h.interpolation:void 0))}function jM(l){let a=null;if(l instanceof VM)a=jM(l.result);else if(l instanceof GT){for(const o of l.args)if(a=jM(o),a)break}else(l instanceof kM||l instanceof Nc)&&l.input instanceof xu&&"zoom"===l.input.name&&(a=l);return a instanceof Mh||l.eachChild(o=>{const c=jM(o);c instanceof Mh?a=c:!a&&c?a=new Mh("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):a&&c&&a!==c&&(a=new Mh("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),a}function WT(l){return"object"==typeof l?["literal",l]:l}function ek(l){switch(l.colorSpace){case"hcl":return"interpolate-hcl";case"lab":return"interpolate-lab";default:return"interpolate"}}function uX(l,a){const o=WT(function(l,a){return void 0!==l?l:void 0!==a?a:void 0}(l.default,a.default));return void 0===o&&"resolvedImage"===a.type?"":o}function tk(l,a,o){const c=rk(l,a),u=["get",l.property];if("categorical"===c&&"boolean"==typeof o[0][0]){const h=["case"];for(const d of o)h.push(["==",u,d[0]],d[1]);return h.push(uX(l,a)),h}if("categorical"===c){const h=["match",u];for(const d of o)S_(h,d[0],d[1],!1);return h.push(uX(l,a)),h}if("interval"===c){const h=["step",["number",u]];for(const d of o)S_(h,d[0],d[1],!0);return nk(h),void 0===l.default?h:["case",["==",["typeof",u],"number"],h,WT(l.default)]}if("exponential"===c){const h=void 0!==l.base?l.base:1,d=[ek(l),1===h?["linear"]:["exponential",h],["number",u]];for(const f of o)S_(d,f[0],f[1],!1);return void 0===l.default?d:["case",["==",["typeof",u],"number"],d,WT(l.default)]}throw new Error(`Unknown property function type ${c}`)}function nk(l){"step"===l[0]&&3===l.length&&(l.push(0),l.push(l[3]))}function S_(l,a,o,c){l.length>3&&a===l[l.length-2]||(c&&2===l.length||l.push(a),l.push(o))}function rk(l,a){return l.type?l.type:a.expression.interpolated?"exponential":"interval"}function hX(l){const a=["concat"],o=/{([^{}]+)}/g;let c=0;for(let u=o.exec(l);null!==u;u=o.exec(l)){const h=l.slice(c,o.lastIndex-u[0].length);c=o.lastIndex,h.length>0&&a.push(h),a.push(["get",u[1]])}if(1===a.length)return l;if(c<l.length)a.push(l.slice(c));else if(2===a.length)return["to-string",a[1]];return a}function qT(l){if(!0===l||!1===l)return!0;if(!Array.isArray(l)||0===l.length)return!1;switch(l[0]){case"has":return l.length>=2&&"$id"!==l[1]&&"$type"!==l[1];case"in":return l.length>=3&&("string"!=typeof l[1]||Array.isArray(l[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return 3!==l.length||Array.isArray(l[1])||Array.isArray(l[2]);case"any":case"all":for(const a of l.slice(1))if(!qT(a)&&"boolean"!=typeof a)return!1;return!0;default:return!0}}const $Me={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function ZMe(l,a){return l<a?-1:l>a?1:0}function dX(l){if(!Array.isArray(l))return!1;if("within"===l[0])return!0;for(let a=1;a<l.length;a++)if(dX(l[a]))return!0;return!1}function WM(l){if(!l)return!0;const a=l[0];return l.length<=1?"any"!==a:"=="===a?ik(l[1],l[2],"=="):"!="===a?qM(ik(l[1],l[2],"==")):"<"===a||">"===a||"<="===a||">="===a?ik(l[1],l[2],a):"any"===a?function(l){return["any"].concat(l.map(WM))}(l.slice(1)):"all"===a?["all"].concat(l.slice(1).map(WM)):"none"===a?["all"].concat(l.slice(1).map(WM).map(qM)):"in"===a?fX(l[1],l.slice(2)):"!in"===a?qM(fX(l[1],l.slice(2))):"has"===a?pX(l[1]):"!has"===a?qM(pX(l[1])):"within"!==a||l}function ik(l,a,o){switch(l){case"$type":return[`filter-type-${o}`,a];case"$id":return[`filter-id-${o}`,a];default:return[`filter-${o}`,l,a]}}function fX(l,a){if(0===a.length)return!1;switch(l){case"$type":return["filter-type-in",["literal",a]];case"$id":return["filter-id-in",["literal",a]];default:return a.length>200&&!a.some(o=>typeof o!=typeof a[0])?["filter-in-large",l,["literal",a.sort(ZMe)]]:["filter-in-small",l,["literal",a]]}}function pX(l){switch(l){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",l]}}function qM(l){return["!",l]}var nDe=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function rDe(l,a){const o={};for(const c in l)"ref"!==c&&(o[c]=l[c]);return nDe.forEach(c=>{c in a&&(o[c]=a[c])}),o}class Vt{constructor(a,o,c,u){this.message=(a?`${a}: `:"")+c,u&&(this.identifier=u),null!=o&&o.__line__&&(this.line=o.__line__)}}class cDe{constructor(a){this.error=a,this.message=a.message;const o=a.message.match(/line (\d+)/);this.line=o?parseInt(o[1],10):0}}function SX(l){const o=l.value;return o?[new Vt(l.key,o,"constants have been deprecated as of v8")]:[]}function Is(l){return l instanceof Number||l instanceof String||l instanceof Boolean?l.valueOf():l}function dg(l){if(Array.isArray(l))return l.map(dg);if(l instanceof Object&&!(l instanceof Number||l instanceof String||l instanceof Boolean)){const a={};for(const o in l)a[o]=dg(l[o]);return a}return Is(l)}function Eu(l){const a=l.key,o=l.value,c=l.valueSpec||{},u=l.objectElementValidators||{},h=l.style,d=l.styleSpec;let f=[];const m=ri(o);if("object"!==m)return[new Vt(a,o,`object expected, ${m} found`)];for(const g in o){const y=g.split(".")[0],v=c[y]||c["*"];let _;if(u[y])_=u[y];else if(c[y])_=Ha;else if(u["*"])_=u["*"];else{if(!c["*"]){f.push(new Vt(a,o[g],`unknown property "${g}"`));continue}_=Ha}f=f.concat(_({key:(a&&`${a}.`)+g,value:o[g],valueSpec:v,style:h,styleSpec:d,object:o,objectKey:g},o))}for(const g in c)u[g]||c[g].required&&void 0===c[g].default&&void 0===o[g]&&f.push(new Vt(a,o,`missing required property "${g}"`));return f}function TX(l){const a=l.value,o=l.valueSpec,c=l.style,u=l.styleSpec,h=l.key,d=l.arrayElementValidator||Ha;if("array"!==ri(a))return[new Vt(h,a,`array expected, ${ri(a)} found`)];if(o.length&&a.length!==o.length)return[new Vt(h,a,`array length ${o.length} expected, length ${a.length} found`)];if(o["min-length"]&&a.length<o["min-length"])return[new Vt(h,a,`array length at least ${o["min-length"]} expected, length ${a.length} found`)];let f={type:o.value,values:o.values,minimum:o.minimum,maximum:o.maximum};u.$version<7&&(f.function=o.function),"object"===ri(o.value)&&(f=o.value);let m=[];for(let g=0;g<a.length;g++)m=m.concat(d({array:a,arrayIndex:g,value:a[g],valueSpec:f,style:c,styleSpec:u,key:`${h}[${g}]`}));return m}function wX(l){const a=l.key,o=l.value,c=l.valueSpec;let u=ri(o);if("number"===u&&o!=o&&(u="NaN"),"number"!==u)return[new Vt(a,o,`number expected, ${u} found`)];if("minimum"in c){let h=c.minimum;if("array"===ri(c.minimum)&&(h=c.minimum[l.arrayIndex]),o<h)return[new Vt(a,o,`${o} is less than the minimum value ${h}`)]}if("maximum"in c){let h=c.maximum;if("array"===ri(c.maximum)&&(h=c.maximum[l.arrayIndex]),o>h)return[new Vt(a,o,`${o} is greater than the maximum value ${h}`)]}return[]}function CX(l){const a=l.valueSpec,o=Is(l.value.type);let c,h,d,u={};const f="categorical"!==o&&void 0===l.value.property,m=!f,g="array"===ri(l.value.stops)&&"array"===ri(l.value.stops[0])&&"object"===ri(l.value.stops[0][0]),y=Eu({key:l.key,value:l.value,valueSpec:l.styleSpec.function,style:l.style,styleSpec:l.styleSpec,objectElementValidators:{stops:function(C){if("identity"===o)return[new Vt(C.key,C.value,'identity function may not have a "stops" property')];let E=[];const M=C.value;return E=E.concat(TX({key:C.key,value:M,valueSpec:C.valueSpec,style:C.style,styleSpec:C.styleSpec,arrayElementValidator:_})),"array"===ri(M)&&0===M.length&&E.push(new Vt(C.key,M,"array must have at least one stop")),E},default:function(C){return Ha({key:C.key,value:C.value,valueSpec:a,style:C.style,styleSpec:C.styleSpec})}}});return"identity"===o&&f&&y.push(new Vt(l.key,l.value,'missing required property "property"')),"identity"!==o&&!l.value.stops&&y.push(new Vt(l.key,l.value,'missing required property "stops"')),"exponential"===o&&l.valueSpec.expression&&!YF(l.valueSpec)&&y.push(new Vt(l.key,l.value,"exponential functions not supported")),l.styleSpec.$version>=8&&(m&&!GM(l.valueSpec)?y.push(new Vt(l.key,l.value,"property functions not supported")):f&&!oX(l.valueSpec)&&y.push(new Vt(l.key,l.value,"zoom functions not supported"))),("categorical"===o||g)&&void 0===l.value.property&&y.push(new Vt(l.key,l.value,'"property" property is required')),y;function _(C){let E=[];const M=C.value,x=C.key;if("array"!==ri(M))return[new Vt(x,M,`array expected, ${ri(M)} found`)];if(2!==M.length)return[new Vt(x,M,`array length 2 expected, length ${M.length} found`)];if(g){if("object"!==ri(M[0]))return[new Vt(x,M,`object expected, ${ri(M[0])} found`)];if(void 0===M[0].zoom)return[new Vt(x,M,"object stop key must have zoom")];if(void 0===M[0].value)return[new Vt(x,M,"object stop key must have value")];if(d&&d>Is(M[0].zoom))return[new Vt(x,M[0].zoom,"stop zoom values must appear in ascending order")];Is(M[0].zoom)!==d&&(d=Is(M[0].zoom),h=void 0,u={}),E=E.concat(Eu({key:`${x}[0]`,value:M[0],valueSpec:{zoom:{}},style:C.style,styleSpec:C.styleSpec,objectElementValidators:{zoom:wX,value:b}}))}else E=E.concat(b({key:`${x}[0]`,value:M[0],valueSpec:{},style:C.style,styleSpec:C.styleSpec},M));return jT(dg(M[1]))?E.concat([new Vt(`${x}[1]`,M[1],"expressions are not allowed in function stops.")]):E.concat(Ha({key:`${x}[1]`,value:M[1],valueSpec:a,style:C.style,styleSpec:C.styleSpec}))}function b(C,E){const M=ri(C.value),x=Is(C.value),R=null!==C.value?C.value:E;if(c){if(M!==c)return[new Vt(C.key,R,`${M} stop domain type must match previous stop domain type ${c}`)]}else c=M;if("number"!==M&&"string"!==M&&"boolean"!==M)return[new Vt(C.key,R,"stop domain value must be a number, string, or boolean")];if("number"!==M&&"categorical"!==o){let P=`number expected, ${M} found`;return GM(a)&&void 0===o&&(P+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Vt(C.key,R,P)]}return"categorical"!==o||"number"!==M||isFinite(x)&&Math.floor(x)===x?"categorical"!==o&&"number"===M&&void 0!==h&&x<h?[new Vt(C.key,R,"stop domain values must appear in ascending order")]:(h=x,"categorical"===o&&x in u?[new Vt(C.key,R,"stop domain values must be unique")]:(u[x]=!0,[])):[new Vt(C.key,R,`integer expected, found ${x}`)]}}function T_(l){const a=("property"===l.expressionContext?QF:zM)(dg(l.value),l.valueSpec);if("error"===a.result)return a.value.map(c=>new Vt(`${l.key}${c.key}`,l.value,c.message));const o=a.value.expression||a.value._styleExpression.expression;if("property"===l.expressionContext&&"text-font"===l.propertyKey&&!o.outputDefined())return[new Vt(l.key,l.value,`Invalid data expression for "${l.propertyKey}". Output values must be contained as literals within the expression.`)];if("property"===l.expressionContext&&"layout"===l.propertyType&&!VT(o))return[new Vt(l.key,l.value,'"feature-state" data expressions are not supported with layout properties.')];if("filter"===l.expressionContext&&!VT(o))return[new Vt(l.key,l.value,'"feature-state" data expressions are not supported with filters.')];if(l.expressionContext&&0===l.expressionContext.indexOf("cluster")){if(!LM(o,["zoom","feature-state"]))return[new Vt(l.key,l.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if("cluster-initial"===l.expressionContext&&!PM(o))return[new Vt(l.key,l.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function YM(l){const a=l.key,o=l.value,c=l.valueSpec,u=[];return Array.isArray(c.values)?-1===c.values.indexOf(Is(o))&&u.push(new Vt(a,o,`expected one of [${c.values.join(", ")}], ${JSON.stringify(o)} found`)):-1===Object.keys(c.values).indexOf(Is(o))&&u.push(new Vt(a,o,`expected one of [${Object.keys(c.values).join(", ")}], ${JSON.stringify(o)} found`)),u}function sk(l){return qT(dg(l.value))?T_(p_({},l,{expressionContext:"filter",valueSpec:{value:"boolean"}})):xX(l)}function xX(l){const a=l.value,o=l.key;if("array"!==ri(a))return[new Vt(o,a,`array expected, ${ri(a)} found`)];const c=l.styleSpec;let u,h=[];if(a.length<1)return[new Vt(o,a,"filter array must have at least 1 element")];switch(h=h.concat(YM({key:`${o}[0]`,value:a[0],valueSpec:c.filter_operator,style:l.style,styleSpec:l.styleSpec})),Is(a[0])){case"<":case"<=":case">":case">=":a.length>=2&&"$type"===Is(a[1])&&h.push(new Vt(o,a,`"$type" cannot be use with operator "${a[0]}"`));case"==":case"!=":3!==a.length&&h.push(new Vt(o,a,`filter array for operator "${a[0]}" must have 3 elements`));case"in":case"!in":a.length>=2&&(u=ri(a[1]),"string"!==u&&h.push(new Vt(`${o}[1]`,a[1],`string expected, ${u} found`)));for(let d=2;d<a.length;d++)u=ri(a[d]),"$type"===Is(a[1])?h=h.concat(YM({key:`${o}[${d}]`,value:a[d],valueSpec:c.geometry_type,style:l.style,styleSpec:l.styleSpec})):"string"!==u&&"number"!==u&&"boolean"!==u&&h.push(new Vt(`${o}[${d}]`,a[d],`string, number, or boolean expected, ${u} found`));break;case"any":case"all":case"none":for(let d=1;d<a.length;d++)h=h.concat(xX({key:`${o}[${d}]`,value:a[d],style:l.style,styleSpec:l.styleSpec}));break;case"has":case"!has":u=ri(a[1]),2!==a.length?h.push(new Vt(o,a,`filter array for "${a[0]}" operator must have 2 elements`)):"string"!==u&&h.push(new Vt(`${o}[1]`,a[1],`string expected, ${u} found`));break;case"within":u=ri(a[1]),2!==a.length?h.push(new Vt(o,a,`filter array for "${a[0]}" operator must have 2 elements`)):"object"!==u&&h.push(new Vt(`${o}[1]`,a[1],`object expected, ${u} found`))}return h}function EX(l,a){const o=l.key,c=l.style,u=l.styleSpec,h=l.value,d=l.objectKey,f=u[`${a}_${l.layerType}`];if(!f)return[];const m=d.match(/^(.*)-transition$/);if("paint"===a&&m&&f[m[1]]&&f[m[1]].transition)return Ha({key:o,value:h,valueSpec:u.transition,style:c,styleSpec:u});const g=l.valueSpec||f[d];if(!g)return[new Vt(o,h,`unknown property "${d}"`)];let y;if("string"===ri(h)&&GM(g)&&!g.tokens&&(y=/^{([^}]+)}$/.exec(h)))return[new Vt(o,h,`"${d}" does not support interpolation syntax\nUse an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(y[1])} }\`.`)];const v=[];return"symbol"===l.layerType&&("text-field"===d&&c&&!c.glyphs&&v.push(new Vt(o,h,'use of "text-field" requires a style "glyphs" property')),"text-font"===d&&zT(dg(h))&&"identity"===Is(h.type)&&v.push(new Vt(o,h,'"text-font" does not support identity functions'))),v.concat(Ha({key:l.key,value:h,valueSpec:g,style:c,styleSpec:u,expressionContext:"property",propertyType:a,propertyKey:d}))}function MX(l){return EX(l,"paint")}function DX(l){return EX(l,"layout")}function AX(l){let a=[];const o=l.value,c=l.key,u=l.style,h=l.styleSpec;!o.type&&!o.ref&&a.push(new Vt(c,o,'either "type" or "ref" is required'));let d=Is(o.type);const f=Is(o.ref);if(o.id){const m=Is(o.id);for(let g=0;g<l.arrayIndex;g++){const y=u.layers[g];Is(y.id)===m&&a.push(new Vt(c,o.id,`duplicate layer id "${o.id}", previously used at line ${y.id.__line__}`))}}if("ref"in o){let m;["type","source","source-layer","filter","layout"].forEach(g=>{g in o&&a.push(new Vt(c,o[g],`"${g}" is prohibited for ref layers`))}),u.layers.forEach(g=>{Is(g.id)===f&&(m=g)}),m?m.ref?a.push(new Vt(c,o.ref,"ref cannot reference another ref layer")):d=Is(m.type):a.push(new Vt(c,o.ref,`ref layer "${f}" not found`))}else if("background"!==d&&"sky"!==d)if(o.source){const m=u.sources&&u.sources[o.source],g=m&&Is(m.type);m?"vector"===g&&"raster"===d?a.push(new Vt(c,o.source,`layer "${o.id}" requires a raster source`)):"raster"===g&&"raster"!==d?a.push(new Vt(c,o.source,`layer "${o.id}" requires a vector source`)):"vector"!==g||o["source-layer"]?"raster-dem"===g&&"hillshade"!==d?a.push(new Vt(c,o.source,"raster-dem source can only be used with layer type 'hillshade'.")):"line"===d&&o.paint&&o.paint["line-gradient"]&&("geojson"!==g||!m.lineMetrics)&&a.push(new Vt(c,o,`layer "${o.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):a.push(new Vt(c,o,`layer "${o.id}" must specify a "source-layer"`)):a.push(new Vt(c,o.source,`source "${o.source}" not found`))}else a.push(new Vt(c,o,'missing required property "source"'));return a=a.concat(Eu({key:c,value:o,valueSpec:h.layer,style:l.style,styleSpec:l.styleSpec,objectElementValidators:{"*":()=>[],type:()=>Ha({key:`${c}.type`,value:o.type,valueSpec:h.layer.type,style:l.style,styleSpec:l.styleSpec,object:o,objectKey:"type"}),filter:sk,layout:m=>Eu({layer:o,key:m.key,value:m.value,style:m.style,styleSpec:m.styleSpec,objectElementValidators:{"*":g=>DX(p_({layerType:d},g))}}),paint:m=>Eu({layer:o,key:m.key,value:m.value,style:m.style,styleSpec:m.styleSpec,objectElementValidators:{"*":g=>MX(p_({layerType:d},g))}})}})),a}function w_(l){const a=l.value,o=l.key,c=ri(a);return"string"!==c?[new Vt(o,a,`string expected, ${c} found`)]:[]}const IX={promoteId:function({key:l,value:a}){if("string"===ri(a))return w_({key:l,value:a});{const o=[];for(const c in a)o.push(...w_({key:`${l}.${c}`,value:a[c]}));return o}}};function RX(l){const a=l.value,o=l.key,c=l.styleSpec,u=l.style;if(!a.type)return[new Vt(o,a,'"type" is required')];const h=Is(a.type);let d;switch(h){case"vector":case"raster":case"raster-dem":return d=Eu({key:o,value:a,valueSpec:c[`source_${h.replace("-","_")}`],style:l.style,styleSpec:c,objectElementValidators:IX}),d;case"geojson":if(d=Eu({key:o,value:a,valueSpec:c.source_geojson,style:u,styleSpec:c,objectElementValidators:IX}),a.cluster)for(const f in a.clusterProperties){const[m,g]=a.clusterProperties[f],y="string"==typeof m?[m,["accumulated"],["get",f]]:m;d.push(...T_({key:`${o}.${f}.map`,value:g,expressionContext:"cluster-map"})),d.push(...T_({key:`${o}.${f}.reduce`,value:y,expressionContext:"cluster-reduce"}))}return d;case"video":return Eu({key:o,value:a,valueSpec:c.source_video,style:u,styleSpec:c});case"image":return Eu({key:o,value:a,valueSpec:c.source_image,style:u,styleSpec:c});case"canvas":return[new Vt(o,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return YM({key:`${o}.type`,value:a.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:u,styleSpec:c})}}function PX(l){const a=l.value,o=l.styleSpec,c=o.light,u=l.style;let h=[];const d=ri(a);if(void 0===a)return h;if("object"!==d)return h=h.concat([new Vt("light",a,`object expected, ${d} found`)]),h;for(const f in a){const m=f.match(/^(.*)-transition$/);h=h.concat(m&&c[m[1]]&&c[m[1]].transition?Ha({key:f,value:a[f],valueSpec:o.transition,style:u,styleSpec:o}):c[f]?Ha({key:f,value:a[f],valueSpec:c[f],style:u,styleSpec:o}):[new Vt(f,a[f],`unknown property "${f}"`)])}return h}function LX(l){const a=l.value,o=l.key,c=l.style,u=l.styleSpec,h=u.terrain;let d=[];const f=ri(a);if(void 0===a)return d;if("object"!==f)return d=d.concat([new Vt("terrain",a,`object expected, ${f} found`)]),d;for(const m in a){const g=m.match(/^(.*)-transition$/);d=d.concat(g&&h[g[1]]&&h[g[1]].transition?Ha({key:m,value:a[m],valueSpec:u.transition,style:c,styleSpec:u}):h[m]?Ha({key:m,value:a[m],valueSpec:h[m],style:c,styleSpec:u}):[new Vt(m,a[m],`unknown property "${m}"`)])}if(a.source){const m=c.sources&&c.sources[a.source],g=m&&Is(m.type);m?"raster-dem"!==g&&d.push(new Vt(o,a.source,`terrain cannot be used with a source of type ${g}, it only be used with a "raster-dem" source type`)):d.push(new Vt(o,a.source,`source "${a.source}" not found`))}else d.push(new Vt(o,a,'terrain is missing required property "source"'));return d}function OX(l){const a=l.value,o=l.style,c=l.styleSpec,u=c.fog;let h=[];const d=ri(a);if(void 0===a)return h;if("object"!==d)return h=h.concat([new Vt("fog",a,`object expected, ${d} found`)]),h;for(const f in a){const m=f.match(/^(.*)-transition$/);h=h.concat(m&&u[m[1]]&&u[m[1]].transition?Ha({key:f,value:a[f],valueSpec:c.transition,style:o,styleSpec:c}):u[f]?Ha({key:f,value:a[f],valueSpec:u[f],style:o,styleSpec:c}):[new Vt(f,a[f],`unknown property "${f}"`)])}return h}const NX={"*":()=>[],array:TX,boolean:function(l){const a=l.value,o=l.key,c=ri(a);return"boolean"!==c?[new Vt(o,a,`boolean expected, ${c} found`)]:[]},number:wX,color:function(l){const a=l.key,o=l.value,c=ri(o);return"string"!==c?[new Vt(a,o,`color expected, ${c} found`)]:null===Vq.parseCSSColor(o)?[new Vt(a,o,`color expected, "${o}" found`)]:[]},constants:SX,enum:YM,filter:sk,function:CX,layer:AX,object:Eu,source:RX,light:PX,terrain:LX,fog:OX,string:w_,formatted:function(l){return 0===w_(l).length?[]:T_(l)},resolvedImage:function(l){return 0===w_(l).length?[]:T_(l)}};function Ha(l){const a=l.value,o=l.valueSpec,c=l.styleSpec;return o.expression&&zT(Is(a))?CX(l):o.expression&&jT(dg(a))?T_(l):o.type&&NX[o.type]?NX[o.type](l):Eu(p_({},l,{valueSpec:o.type?c[o.type]:o}))}function mDe(l){const a=l.value,o=l.key,c=w_(l);return c.length||(-1===a.indexOf("{fontstack}")&&c.push(new Vt(o,a,'"glyphs" url must include a "{fontstack}" token')),-1===a.indexOf("{range}")&&c.push(new Vt(o,a,'"glyphs" url must include a "{range}" token'))),c}function Dh(l,a=ea){let o=[];return o=o.concat(Ha({key:"",value:l,valueSpec:a.$root,styleSpec:a,style:l,objectElementValidators:{glyphs:mDe,"*":()=>[]}})),l.constants&&(o=o.concat(SX({key:"constants",value:l.constants,style:l,styleSpec:a}))),FX(o)}function FX(l){return[].concat(l).sort((a,o)=>a.line-o.line)}function cp(l){return function(...a){return FX(l.apply(this,a))}}Dh.source=cp(RX),Dh.light=cp(PX),Dh.terrain=cp(LX),Dh.fog=cp(OX),Dh.layer=cp(AX),Dh.filter=cp(sk),Dh.paintProperty=cp(MX),Dh.layoutProperty=cp(DX);var gDe=wM(function(l,a){var o=function(){var c=function(M,x,R,P){for(R=R||{},P=M.length;P--;R[M[P]]=x);return R},u=[1,12],h=[1,13],d=[1,9],f=[1,10],m=[1,11],g=[1,14],y=[1,15],v=[14,18,22,24],_=[18,22],b=[22,24],w={trace:function(){},yy:{},symbols_:{error:2,JSONString:3,STRING:4,JSONNumber:5,NUMBER:6,JSONNullLiteral:7,NULL:8,JSONBooleanLiteral:9,TRUE:10,FALSE:11,JSONText:12,JSONValue:13,EOF:14,JSONObject:15,JSONArray:16,"{":17,"}":18,JSONMemberList:19,JSONMember:20,":":21,",":22,"[":23,"]":24,JSONElementList:25,$accept:0,$end:1},terminals_:{2:"error",4:"STRING",6:"NUMBER",8:"NULL",10:"TRUE",11:"FALSE",14:"EOF",17:"{",18:"}",21:":",22:",",23:"[",24:"]"},productions_:[0,[3,1],[5,1],[7,1],[9,1],[9,1],[12,2],[13,1],[13,1],[13,1],[13,1],[13,1],[13,1],[15,2],[15,3],[20,3],[19,1],[19,3],[16,2],[16,3],[25,1],[25,3]],performAction:function(x,R,P,k,W,U,K){var Q=U.length-1;switch(W){case 1:this.$=new String(x.replace(/\\(\\|")/g,"$1").replace(/\\n/g,"\n").replace(/\\r/g,"\r").replace(/\\t/g,"\t").replace(/\\v/g,"\v").replace(/\\f/g,"\f").replace(/\\b/g,"\b")),this.$.__line__=this._$.first_line;break;case 2:this.$=new Number(x),this.$.__line__=this._$.first_line;break;case 3:this.$=null;break;case 4:this.$=new Boolean(!0),this.$.__line__=this._$.first_line;break;case 5:this.$=new Boolean(!1),this.$.__line__=this._$.first_line;break;case 6:return this.$=U[Q-1];case 13:this.$={},Object.defineProperty(this.$,"__line__",{value:this._$.first_line,enumerable:!1});break;case 14:case 19:this.$=U[Q-1],Object.defineProperty(this.$,"__line__",{value:this._$.first_line,enumerable:!1});break;case 15:this.$=[U[Q-2],U[Q]];break;case 16:this.$={},this.$[U[Q][0]]=U[Q][1];break;case 17:this.$=U[Q-2],U[Q-2][U[Q][0]]=U[Q][1];break;case 18:this.$=[],Object.defineProperty(this.$,"__line__",{value:this._$.first_line,enumerable:!1});break;case 20:this.$=[U[Q]];break;case 21:this.$=U[Q-2],U[Q-2].push(U[Q])}},table:[{3:5,4:u,5:6,6:h,7:3,8:d,9:4,10:f,11:m,12:1,13:2,15:7,16:8,17:g,23:y},{1:[3]},{14:[1,16]},c(v,[2,7]),c(v,[2,8]),c(v,[2,9]),c(v,[2,10]),c(v,[2,11]),c(v,[2,12]),c(v,[2,3]),c(v,[2,4]),c(v,[2,5]),c([14,18,21,22,24],[2,1]),c(v,[2,2]),{3:20,4:u,18:[1,17],19:18,20:19},{3:5,4:u,5:6,6:h,7:3,8:d,9:4,10:f,11:m,13:23,15:7,16:8,17:g,23:y,24:[1,21],25:22},{1:[2,6]},c(v,[2,13]),{18:[1,24],22:[1,25]},c(_,[2,16]),{21:[1,26]},c(v,[2,18]),{22:[1,28],24:[1,27]},c(b,[2,20]),c(v,[2,14]),{3:20,4:u,20:29},{3:5,4:u,5:6,6:h,7:3,8:d,9:4,10:f,11:m,13:30,15:7,16:8,17:g,23:y},c(v,[2,19]),{3:5,4:u,5:6,6:h,7:3,8:d,9:4,10:f,11:m,13:31,15:7,16:8,17:g,23:y},c(_,[2,17]),c(_,[2,15]),c(b,[2,21])],defaultActions:{16:[2,6]},parseError:function(x,R){if(!R.recoverable)throw new Error(x);this.trace(x)},parse:function(x){var R=this,P=[0],k=[null],W=[],U=this.table,K="",Q=0,se=0,te=2,De=1,de=W.slice.call(arguments,1),ye=Object.create(this.lexer),_e={yy:{}};for(var ue in this.yy)Object.prototype.hasOwnProperty.call(this.yy,ue)&&(_e.yy[ue]=this.yy[ue]);ye.setInput(x,_e.yy),_e.yy.lexer=ye,_e.yy.parser=this,void 0===ye.yylloc&&(ye.yylloc={});var ce=ye.yylloc;W.push(ce);var Re=ye.options&&ye.options.ranges;function Oe(){var Ot;return"number"!=typeof(Ot=ye.lex()||De)&&(Ot=R.symbols_[Ot]||Ot),Ot}this.parseError="function"==typeof _e.yy.parseError?_e.yy.parseError:Object.getPrototypeOf(this).parseError;for(var Ae,We,Te,He,ct,Ce,Ye,Ue={};;){if(this.defaultActions[We=P[P.length-1]]?Te=this.defaultActions[We]:(null==Ae&&(Ae=Oe()),Te=U[We]&&U[We][Ae]),void 0===Te||!Te.length||!Te[0]){var Ct="";for(ct in Ye=[],U[We])this.terminals_[ct]&&ct>te&&Ye.push("'"+this.terminals_[ct]+"'");Ct=ye.showPosition?"Parse error on line "+(Q+1)+":\n"+ye.showPosition()+"\nExpecting "+Ye.join(", ")+", got '"+(this.terminals_[Ae]||Ae)+"'":"Parse error on line "+(Q+1)+": Unexpected "+(Ae==De?"end of input":"'"+(this.terminals_[Ae]||Ae)+"'"),this.parseError(Ct,{text:ye.match,token:this.terminals_[Ae]||Ae,line:ye.yylineno,loc:ce,expected:Ye})}if(Te[0]instanceof Array&&Te.length>1)throw new Error("Parse Error: multiple actions possible at state: "+We+", token: "+Ae);switch(Te[0]){case 1:P.push(Ae),k.push(ye.yytext),W.push(ye.yylloc),P.push(Te[1]),Ae=null,se=ye.yyleng,K=ye.yytext,Q=ye.yylineno,ce=ye.yylloc;break;case 2:if(Ue.$=k[k.length-(Ce=this.productions_[Te[1]][1])],Ue._$={first_line:W[W.length-(Ce||1)].first_line,last_line:W[W.length-1].last_line,first_column:W[W.length-(Ce||1)].first_column,last_column:W[W.length-1].last_column},Re&&(Ue._$.range=[W[W.length-(Ce||1)].range[0],W[W.length-1].range[1]]),void 0!==(He=this.performAction.apply(Ue,[K,se,Q,_e.yy,Te[1],k,W].concat(de))))return He;Ce&&(P=P.slice(0,-1*Ce*2),k=k.slice(0,-1*Ce),W=W.slice(0,-1*Ce)),P.push(this.productions_[Te[1]][0]),k.push(Ue.$),W.push(Ue._$),P.push(U[P[P.length-2]][P[P.length-1]]);break;case 3:return!0}}return!0}};function E(){this.yy={}}return w.lexer={EOF:1,parseError:function(R,P){if(!this.yy.parser)throw new Error(R);this.yy.parser.parseError(R,P)},setInput:function(x,R){return this.yy=R||this.yy||{},this._input=x,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var x=this._input[0];return this.yytext+=x,this.yyleng++,this.offset++,this.match+=x,this.matched+=x,x.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),x},unput:function(x){var R=x.length,P=x.split(/(?:\r\n?|\n)/g);this._input=x+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-R),this.offset-=R;var k=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),P.length-1&&(this.yylineno-=P.length-1);var W=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:P?(P.length===k.length?this.yylloc.first_column:0)+k[k.length-P.length].length-P[0].length:this.yylloc.first_column-R},this.options.ranges&&(this.yylloc.range=[W[0],W[0]+this.yyleng-R]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+". You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},less:function(x){this.unput(this.match.slice(x))},pastInput:function(){var x=this.matched.substr(0,this.matched.length-this.match.length);return(x.length>20?"...":"")+x.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var x=this.match;return x.length<20&&(x+=this._input.substr(0,20-x.length)),(x.substr(0,20)+(x.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var x=this.pastInput(),R=new Array(x.length+1).join("-");return x+this.upcomingInput()+"\n"+R+"^"},test_match:function(x,R){var P,k,W;if(this.options.backtrack_lexer&&(W={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(W.yylloc.range=this.yylloc.range.slice(0))),(k=x[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=k.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:k?k[k.length-1].length-k[k.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+x[0].length},this.yytext+=x[0],this.match+=x[0],this.matches=x,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(x[0].length),this.matched+=x[0],P=this.performAction.call(this,this.yy,this,R,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),P)return P;if(this._backtrack){for(var U in W)this[U]=W[U];return!1}return!1},next:function(){if(this.done)return this.EOF;var x,R,P,k;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var W=this._currentRules(),U=0;U<W.length;U++)if((P=this._input.match(this.rules[W[U]]))&&(!R||P[0].length>R[0].length)){if(R=P,k=U,this.options.backtrack_lexer){if(!1!==(x=this.test_match(P,W[U])))return x;if(this._backtrack){R=!1;continue}return!1}if(!this.options.flex)break}return R?!1!==(x=this.test_match(R,W[k]))&&x:""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){return this.next()||this.lex()},begin:function(R){this.conditionStack.push(R)},popState:function(){return this.conditionStack.length-1>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(R){return(R=this.conditionStack.length-1-Math.abs(R||0))>=0?this.conditionStack[R]:"INITIAL"},pushState:function(R){this.begin(R)},stateStackSize:function(){return this.conditionStack.length},options:{},performAction:function(R,P,k,W){switch(k){case 0:break;case 1:return 6;case 2:return P.yytext=P.yytext.substr(1,P.yyleng-2),4;case 3:return 17;case 4:return 18;case 5:return 23;case 6:return 24;case 7:return 22;case 8:return 21;case 9:return 10;case 10:return 11;case 11:return 8;case 12:return 14;case 13:return"INVALID"}},rules:[/^(?:\s+)/,/^(?:(-?([0-9]|[1-9][0-9]+))(\.[0-9]+)?([eE][-+]?[0-9]+)?\b)/,/^(?:"(?:\\[\\"bfnrt/]|\\u[a-fA-F0-9]{4}|[^\\\0-\x09\x0a-\x1f"])*")/,/^(?:\{)/,/^(?:\})/,/^(?:\[)/,/^(?:\])/,/^(?:,)/,/^(?::)/,/^(?:true\b)/,/^(?:false\b)/,/^(?:null\b)/,/^(?:$)/,/^(?:.)/],conditions:{INITIAL:{rules:[0,1,2,3,4,5,6,7,8,9,10,11,12,13],inclusive:!0}}},E.prototype=w,w.Parser=E,new E}();a.parser=o,a.Parser=o.Parser,a.parse=function(){return o.parse.apply(o,arguments)}});function ZM(l,a=ea){let o=l;try{o=function(l){if(l instanceof String||"string"==typeof l||l instanceof Buffer)try{return gDe.parse(l.toString())}catch(a){throw new cDe(a)}return l}(o)}catch(c){return[c]}return Dh(o,a)}new Set(["vector","raster","raster-dem"]);const GX_isExpression=jT,GX_createPropertyExpression=QF,zX_convertFunction=function(l,a){let o=l.stops;if(!o)return function(l,a){const o=["get",l.property];if(void 0===l.default)return"string"===a.type?["string",o]:o;if("enum"===a.type)return["match",o,Object.keys(a.values),o,l.default];{const c=["color"===a.type?"to-color":a.type,o,WT(l.default)];return"array"===a.type&&c.splice(1,0,a.value,a.length||null),c}}(l,a);const c=o&&"object"==typeof o[0][0],u=c||void 0!==l.property,h=c||!u;return o=o.map(d=>!u&&a.tokens&&"string"==typeof d[1]?[d[0],hX(d[1])]:[d[0],WT(d[1])]),c?function(l,a,o){const c={},u={},h=[];for(let f=0;f<o.length;f++){const m=o[f],g=m[0].zoom;void 0===c[g]&&(c[g]={zoom:g,type:l.type,property:l.property,default:l.default},u[g]=[],h.push(g)),u[g].push([m[0].value,m[1]])}if("exponential"===rk({},a)){const f=[ek(l),["linear"],["zoom"]];for(const m of h)S_(f,m,tk(c[m],a,u[m]),!1);return f}{const f=["step",["zoom"]];for(const m of h)S_(f,m,tk(c[m],a,u[m]),!0);return nk(f),f}}(l,a,o):h?function(l,a,o,c=["zoom"]){const u=rk(l,a);let h,d=!1;if("interval"===u)h=["step",c],d=!0;else{if("exponential"!==u)throw new Error(`Unknown zoom function type "${u}"`);{const f=void 0!==l.base?l.base:1;h=[ek(l),1===f?["linear"]:["exponential",f],c]}}for(const f of o)S_(h,f[0],f[1],d);return nk(h),h}(l,a,o):tk(l,a,o)},zX_isFunction=zT;function ak(l){return l*Math.PI/180}ZM.parsed=ZM,ZM.latest=ZM;var SDe=function(){for(var l=[],a=78271.51696402048;l.length<=24;a/=2)l.push(a);return l}();function lk(l,a){if("undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"undefined"!=typeof OffscreenCanvas)return new OffscreenCanvas(l,a);var o=document.createElement("canvas");return o.width=l,o.height=a,o}var ck,wDe=Array(256).join("\u200a");function HX(l,a){if(a>=.05){for(var o="",c=l.split("\n"),u=wDe.slice(0,Math.round(a/.1)),h=0,d=c.length;h<d;++h)h>0&&(o+="\n"),o+=c[h].split("").join(u);return o}return l}function jX(){return ck||(ck=lk(1,1).getContext("2d")),ck}function fg(l,a){return jX().measureText(l).width+(l.length-1)*a}var uk={};function WX(l,a,o,c){if(-1!==l.indexOf("\n")){for(var u=l.split("\n"),h=[],d=0,f=u.length;d<f;++d)h.push(WX(u[d],a,o,c));return h.join("\n")}var m=o+","+a+","+l+","+c,g=uk[m];if(!g){var y=l.split(" ");if(y.length>1){var v=jX();v.font=a;var b=v.measureText("M").width*o,w="";for(h=[],d=0,f=y.length;d<f;++d){var C=y[d],E=w+(w?" ":"")+C;fg(E,c)<=b?w=E:(w&&h.push(w),w=C)}for(w&&h.push(w),d=0,f=h.length;d<f&&f>1;++d){var M=h[d];if(fg(M,c)<.35*b){var x=d>0?fg(h[d-1],c):1/0,R=d<f-1?fg(h[d+1],c):1/0;h.splice(d,1),f-=1,x<R?(h[d-1]+=" "+M,d-=1):h[d]=M+" "+h[d]}}for(d=0,f=h.length-1;d<f;++d){var P=h[d],k=h[d+1];if(fg(P,c)>.7*b&&fg(k,c)<.6*b){var W=P.split(" "),U=W.pop();fg(U,c)<.2*b&&(h[d]=W.join(" "),h[d+1]=U+" "+k),f-=1}}g=h.join("\n")}else g=l;g=HX(g,c),uk[m]=g}return g}vN&&Sr(vN,"clear",function(){uk={}});var eD,dk,CDe=zX_isFunction,xDe=zX_convertFunction,EDe=GX_isExpression,MDe=GX_createPropertyExpression,DDe={Point:1,MultiPoint:1,LineString:2,MultiLineString:2,Polygon:3,MultiPolygon:3},ADe={center:[.5,.5],left:[0,.5],right:[1,.5],top:[.5,0],bottom:[.5,1],"top-left":[0,0],"top-right":[1,0],"bottom-left":[0,1],"bottom-right":[1,1]},hk={},JM={zoom:0},QM={};function Tr(l,a,o,c,u){var h=l.id;QM[h]||(QM[h]={});var d=QM[h];if(!d[o]){var f=(l[a]||hk)[o],m=ea[a+"_"+l.type][o];void 0===f&&(f=m.default);var g=EDe(f);if(!g&&CDe(f)&&(f=xDe(f,m),g=!0),g){var y=function(l,a){var o=MDe(l,a);if("error"===o.result)throw new Error(o.value.map(function(c){return c.key+": "+c.message}).join(", "));return o.value}(f,m);d[o]=y.evaluate.bind(y)}else"color"==m.type&&(f=pi.parse(f)),d[o]=function(){return f}}return JM.zoom=c,d[o](JM,u)}var tD={};function pg(l,a){if(l){if(0===l.a||0===a)return;var o=l.a;return a=void 0===a?1:a,"rgba("+Math.round(255*l.r/o)+","+Math.round(255*l.g/o)+","+Math.round(255*l.b/o)+","+o*a+")"}return l}var PDe=/^([^]*)\{(.*)\}([^]*)$/;function fk(l,a){var o;do{(o=l.match(PDe))&&(l=o[1]+(a[o[2]]||"")+o[3])}while(o);return l}function LDe(l,a,o,c,u,h,d){if(void 0===c&&(c=SDe),"string"==typeof a&&(a=JSON.parse(a)),8!=a.version)throw new Error("glStyle version 8 required.");var f,m;if(h)if("undefined"!=typeof Image){var g=new Image;g.crossOrigin="anonymous",g.onload=function(){f=g,m=[g.width,g.height],l.changed(),g.onload=null},g.src=h}else if("undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope){var y=self;y.postMessage({action:"loadImage",src:h}),y.addEventListener("message",function(ye){"imageLoaded"===ye.data.action&&ye.data.src===h&&(m=[(f=ye.data.image).width,f.height])})}for(var w,v=function(l){l=l.slice();const a=Object.create(null);for(let o=0;o<l.length;o++)a[l[o].id]=l[o];for(let o=0;o<l.length;o++)"ref"in l[o]&&(l[o]=rDe(l[o],a[l[o].ref]));return l}(a.layers),_={},b=[],C=0,E=v.length;C<E;++C){var M=v[C],x=M.id;if("string"==typeof o&&M.source==o||-1!==o.indexOf(x)){var R=M["source-layer"];if(!w){var P=a.sources[w=M.source];if(!P)throw new Error('Source "'+w+'" is not defined');var k=P.type;if("vector"!==k&&"geojson"!==k)throw new Error('Source "'+w+'" is not of type "vector" or "geojson", but "'+k+'"')}var W=_[R];W||(_[R]=W=[]),W.push({layer:M,index:C}),b.push(x)}delete QM[x],delete tD[x]}var U=new Bs,K=new Pi,Q={},se={},te=[],De=function(de,ye){var _e=de.getProperties(),ue=_[_e.layer];if(ue){var ce=c.indexOf(ye);-1==ce&&(ce=function(l,a){for(var o=0,c=a.length;o<c;++o)if(a[o]<l&&o+1<c){var h=a[o]/a[o+1];return o+Math.log(a[o]/l)/Math.log(h)}return c-1}(ye,c));for(var Re=DDe[de.getGeometry().getType()],Oe={properties:_e,type:Re},Ae=-1,Te=function(ct,Ce){var xt=ue[ct],Ye=xt.layer,Ot=Ye.layout||hk,Kt=Ye.paint||hk;if("none"===Ot.visibility||"minzoom"in Ye&&ce<Ye.minzoom||"maxzoom"in Ye&&ce>=Ye.maxzoom)return"continue";var it=Ye.filter;if(!it||function(l,a,o,c){return l in tD||(tD[l]=function(l){if(null==l)return{filter:()=>!0,needGeometry:!1};qT(l)||(l=WM(l));const a=zM(l,$Me);if("error"===a.result)throw new Error(a.value.map(o=>`${o.key}: ${o.message}`).join(", "));return{filter:(c,u,h)=>a.value.evaluate(c,u,{},h),needGeometry:dX(l)}}(a).filter),JM.zoom=c,tD[l](JM,o)}(Ye.id,it,Oe,ce)){Ye;var ht=void 0,vt=void 0,tn=void 0,Ft=void 0,ge=void 0,ee=void 0,st=xt.index;if(3==Re&&("fill"==Ye.type||"fill-extrusion"==Ye.type))if(vt=Tr(Ye,"paint",Ye.type+"-opacity",ce,Oe),Ye.type+"-pattern"in Kt){var gt=Tr(Ye,"paint",Ye.type+"-pattern",ce,Oe);if(gt){var Xt="string"==typeof gt?fk(gt,_e):gt.toString();if(f&&u&&u[Xt]){++Ae,(!(ee=te[Ae])||!ee.getFill()||ee.getStroke()||ee.getText())&&(ee=new Li({fill:new Pi}),te[Ae]=ee),tn=ee.getFill(),ee.setZIndex(st);var Tn=se[Jt=Xt+"."+vt];Tn||((pn=(En=lk((Bt=u[Xt]).width,Bt.height)).getContext("2d")).globalAlpha=vt,pn.drawImage(f,Bt.x,Bt.y,Bt.width,Bt.height,0,0,Bt.width,Bt.height),Tn=pn.createPattern(En,"repeat"),se[Jt]=Tn),tn.setColor(Tn)}}}else(ht=pg(Tr(Ye,"paint",Ye.type+"-color",ce,Oe),vt))&&(Ye.type+"-outline-color"in Kt&&(ge=pg(Tr(Ye,"paint",Ye.type+"-outline-color",ce,Oe),vt)),ge||(ge=ht),++Ae,(!(ee=te[Ae])||!(ee.getFill()&&ee.getStroke())||ee.getText())&&(ee=new Li({fill:new Pi,stroke:new Bs}),te[Ae]=ee),(tn=ee.getFill()).setColor(ht),(Ft=ee.getStroke()).setColor(ge),Ft.setWidth(1),ee.setZIndex(st));if(1!=Re&&"line"==Ye.type){ht=!("line-pattern"in Kt)&&"line-color"in Kt?pg(Tr(Ye,"paint","line-color",ce,Oe),Tr(Ye,"paint","line-opacity",ce,Oe)):void 0;var Pe=Tr(Ye,"paint","line-width",ce,Oe);ht&&Pe>0&&(++Ae,(!(ee=te[Ae])||!ee.getStroke()||ee.getFill()||ee.getText())&&(ee=new Li({stroke:new Bs}),te[Ae]=ee),(Ft=ee.getStroke()).setLineCap(Tr(Ye,"layout","line-cap",ce,Oe)),Ft.setLineJoin(Tr(Ye,"layout","line-join",ce,Oe)),Ft.setMiterLimit(Tr(Ye,"layout","line-miter-limit",ce,Oe)),Ft.setColor(ht),Ft.setWidth(Pe),Ft.setLineDash(Kt["line-dasharray"]?Tr(Ye,"paint","line-dasharray",ce,Oe).map(function(sit){return sit*Pe}):null),ee.setZIndex(st))}var Gt=!1,ot=null,rn=0,hn=void 0,gn=void 0,Ne=void 0;if((1==Re||2==Re)&&"icon-image"in Ot){var nn=Tr(Ye,"layout","icon-image",ce,Oe);if(nn){hn="string"==typeof nn?fk(nn,_e):nn.toString();var Hr=void 0;if(f&&u&&u[hn]){var or=Tr(Ye,"layout","icon-rotation-alignment",ce,Oe);if(2==Re){var oi=de.getGeometry();if(oi.getFlatMidpoint||oi.getFlatMidpoints){var gs=oi.getExtent();if(Math.sqrt(Math.max(Math.pow((gs[2]-gs[0])/ye,2),Math.pow((gs[3]-gs[1])/ye,2)))>150){var dc="MultiLineString"===oi.getType()?oi.getFlatMidpoints():oi.getFlatMidpoint();if(dk||(dk=new vF("Point",eD=[NaN,NaN],[],{},null)),Hr=dk,eD[0]=dc[0],eD[1]=dc[1],"line"===(Mo=Tr(Ye,"layout","symbol-placement",ce,Oe))&&"map"===or)for(var uo=oi.getStride(),Ma=oi.getFlatCoordinates(),fc=0,uy=Ma.length-uo;fc<uy;fc+=uo){var Cf=Ma[fc],Al=Ma[fc+1],$u=Ma[fc+uo],pc=Ma[fc+uo+1],hy=Math.min(Cf,$u),dy=Math.min(Al,pc),cC=Math.max(Cf,$u),uC=Math.max(Al,pc);if(dc[0]>=hy&&dc[0]<=cC&&dc[1]>=dy&&dc[1]<=uC){rn=Math.atan2(Al-pc,$u-Cf);break}}}}}if(2!==Re||Hr){var he=Tr(Ye,"layout","icon-size",ce,Oe),qe=void 0!==Kt["icon-color"]?Tr(Ye,"paint","icon-color",ce,Oe):null;if(!qe||0!==qe.a){var Jt=hn+"."+he;if(null!==qe&&(Jt+="."+qe),!(gn=Q[Jt])){var Bt=u[hn];if(null!==qe){var En,pn;(pn=(En=lk(Bt.width,Bt.height)).getContext("2d")).drawImage(f,Bt.x,Bt.y,Bt.width,Bt.height,0,0,Bt.width,Bt.height);for(var Fe=pn.getImageData(0,0,En.width,En.height),rt=0,At=Fe.data.length;rt<At;rt+=4){var xn=qe.a;0!==xn&&(Fe.data[rt]=255*qe.r/xn,Fe.data[rt+1]=255*qe.g/xn,Fe.data[rt+2]=255*qe.b/xn),Fe.data[rt+3]=xn}pn.putImageData(Fe,0,0),gn=new MT({img:En,imgSize:[En.width,En.height],scale:he/Bt.pixelRatio}),Q[Jt]=gn}else gn=new MT({img:f,imgSize:m,size:[Bt.width,Bt.height],offset:[Bt.x,Bt.y],rotateWithView:"map"===or,scale:he/Bt.pixelRatio}),Q[Jt]=gn}}gn&&(++Ae,(!(ee=te[Ae])||!ee.getImage()||ee.getFill()||ee.getStroke())&&(ee=new Li,te[Ae]=ee),ee.setGeometry(Hr),gn.setRotation(rn+ak(Tr(Ye,"layout","icon-rotate",ce,Oe))),gn.setOpacity(Tr(Ye,"paint","icon-opacity",ce,Oe)),gn.setAnchor(ADe[Tr(Ye,"layout","icon-anchor",ce,Oe)]),ee.setImage(gn),ot=ee.getText(),ee.setText(void 0),ee.setZIndex(st),Gt=!0,Ne=!1)}else Ne=!0}}}if(1==Re&&"circle-radius"in Kt){++Ae,(!(ee=te[Ae])||!ee.getImage()||ee.getFill()||ee.getStroke())&&(ee=new Li,te[Ae]=ee);var _n=Tr(Ye,"paint","circle-radius",ce,Oe),Ln=pg(Tr(Ye,"paint","circle-stroke-color",ce,Oe),Tr(Ye,"paint","circle-stroke-opacity",ce,Oe)),wr=pg(Tr(Ye,"paint","circle-color",ce,Oe),Tr(Ye,"paint","circle-opacity",ce,Oe)),Zr=Tr(Ye,"paint","circle-stroke-width",ce,Oe),jr=_n+"."+Ln+"."+wr+"."+Zr;(gn=Q[jr])||(gn=new ag({radius:_n,stroke:Ln&&Zr>0?new Bs({width:Zr,color:Ln}):void 0,fill:wr?new Pi({color:wr}):void 0}),Q[jr]=gn),ee.setImage(gn),ot=ee.getText(),ee.setText(void 0),ee.setGeometry(void 0),ee.setZIndex(st),Gt=!0}var Mr=void 0;if("text-field"in Ot&&(Mr=fk(Tr(Ye,"layout","text-field",ce,Oe).toString(),_e).trim(),vt=Tr(Ye,"paint","text-opacity",ce,Oe)),Mr&&vt&&!Ne){Gt||(++Ae,(!(ee=te[Ae])||!ee.getText()||ee.getFill()||ee.getStroke())&&(ee=new Li,te[Ae]=ee),ee.setImage(void 0),ee.setGeometry(void 0)),ee.getText()||ee.setText(ot||new op({padding:[2,2,2,2]})),ot=ee.getText();var Il=Math.round(Tr(Ye,"layout","text-size",ce,Oe)),Cs=Tr(Ye,"layout","text-font",ce,Oe),$c=Tr(Ye,"layout","text-line-height",ce,Oe),Rl=Rq(d?d(Cs):Cs,Il,$c),sd=Ot["text-transform"];"uppercase"==sd?Mr=Mr.toUpperCase():"lowercase"==sd&&(Mr=Mr.toLowerCase());var od=Tr(Ye,"layout","text-max-width",ce,Oe),qs=Tr(Ye,"layout","text-letter-spacing",ce,Oe),mc=2==Re?HX(Mr,qs):WX(Mr,Rl,od,qs);ot.setText(mc),ot.setFont(Rl),ot.setRotation(ak(Tr(Ye,"layout","text-rotate",ce,Oe)));var Ls=Tr(Ye,"layout","text-anchor",ce,Oe),Mo=Gt||1==Re?"point":Tr(Ye,"layout","symbol-placement",ce,Oe);ot.setPlacement(Mo);var fy=Tr(Ye,"paint","text-halo-width",ce,Oe),ioe=Tr(Ye,"layout","text-offset",ce,Oe),soe=Tr(Ye,"paint","text-translate",ce,Oe),nU=0,rU=0;if("point"==Mo){var iU="center";-1!==Ls.indexOf("left")?(iU="left",rU=fy):-1!==Ls.indexOf("right")&&(iU="right",rU=-fy),ot.setTextAlign(iU);var iit=Tr(Ye,"layout","text-rotation-alignment",ce,Oe);ot.setRotateWithView("map"==iit)}else ot.setMaxAngle(ak(Tr(Ye,"layout","text-max-angle",ce,Oe))*Mr.length/mc.length),ot.setTextAlign(),ot.setRotateWithView(!1);var sU="middle";0==Ls.indexOf("bottom")?(sU="bottom",nU=-fy-.5*($c-1)*Il):0==Ls.indexOf("top")&&(sU="top",nU=fy+.5*($c-1)*Il),ot.setTextBaseline(sU),ot.setOffsetX(ioe[0]*Il+rU+soe[0]),ot.setOffsetY(ioe[1]*Il+nU+soe[1]),K.setColor(pg(Tr(Ye,"paint","text-color",ce,Oe),vt)),ot.setFill(K);var ooe=pg(Tr(Ye,"paint","text-halo-color",ce,Oe),vt);if(ooe){U.setColor(ooe);var aoe=.5*Il;U.setWidth((fy*=2)<=aoe?fy:aoe),ot.setStroke(U)}else ot.setStroke(void 0);var hC=Tr(Ye,"layout","text-padding",ce,Oe),dC=ot.getPadding();hC!==dC[0]&&(dC[0]=hC,dC[1]=hC,dC[2]=hC,dC[3]=hC),ee.setZIndex(st)}}},He=0,Ue=ue.length;He<Ue;++He)Te(He);if(Ae>-1)return te.length=Ae+1,te}};return l.setStyle(De),l.set("mapbox-source",w),l.set("mapbox-layers",b),De}var nD,ODe=Ve(249),NDe=/font-family: ?([^;]*);/,FDe=/("|')/g;function kDe(l){if(!nD){nD={};for(var a=document.styleSheets,o=0,c=a.length;o<c;++o){var u=a[o];try{var h=u.rules||u.cssRules;if(h)for(var d=0,f=h.length;d<f;++d){var m=h[d];if(5==m.type){var g=m.cssText.match(NDe);nD[g[1].replace(FDe,"")]=!0}}}catch(y){}}}return l in nD}var $X={},VDe=ODe.getNames();function BDe(l){var a=l.toString();if(a in $X)return l;for(var o=l.map(function(g){var y=Rq(g,1).split(" ");return[y.slice(3).join(" ").replace(/"/g,""),y[1]+y[0]]}),c=0,u=o.length;c<u;++c){var h=o[c],d=h[0];if(!kDe(d)&&-1!==VDe.indexOf(d)){var f="https://fonts.googleapis.com/css?family="+d.replace(/ /g,"+")+":"+h[1];if(!document.querySelector('link[href="'+f+'"]')){var m=document.createElement("link");m.href=f,m.rel="stylesheet",document.head.appendChild(m)}}}return $X[a]=!0,l}var YX=/^(.*)(\?.*)$/;function pk(l,a,o){var c=(l=function(l,a){return a&&0===l.indexOf(".")&&(l=a+l),l}(l,a)).match(YX);return c?c[1]+o+(c.length>2?c[2]:""):l+o}new _l;var qDe=Ve(697),XDe=function(){var l=function(a,o){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,u){c.__proto__=u}||function(c,u){for(var h in u)Object.prototype.hasOwnProperty.call(u,h)&&(c[h]=u[h])})(a,o)};return function(a,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function c(){this.constructor=a}l(a,o),a.prototype=null===o?Object.create(o):(c.prototype=o.prototype,new c)}}();function YDe(l,a,o){if(3===l){var c={keys:[],values:[],features:[]},u=o.readVarint()+o.pos;o.readFields(ZDe,c,u),c.length=c.features.length,c.length&&(a[c.name]=c)}}function ZDe(l,a,o){if(15===l)a.version=o.readVarint();else if(1===l)a.name=o.readString();else if(5===l)a.extent=o.readVarint();else if(2===l)a.features.push(o.pos);else if(3===l)a.keys.push(o.readString());else if(4===l){for(var c=null,u=o.readVarint()+o.pos;o.pos<u;)c=1==(l=o.readVarint()>>3)?o.readString():2===l?o.readFloat():3===l?o.readDouble():4===l?o.readVarint64():5===l?o.readVarint():6===l?o.readSVarint():7===l?o.readBoolean():null;a.values.push(c)}}function KDe(l,a,o){if(1==l)a.id=o.readVarint();else if(2==l)for(var c=o.readVarint()+o.pos;o.pos<c;){var u=a.layer.keys[o.readVarint()],h=a.layer.values[o.readVarint()];a.properties[u]=h}else 3==l?a.type=o.readVarint():4==l&&(a.geometry=o.pos)}function JDe(l,a,o){l.pos=a.features[o];var c=l.readVarint()+l.pos,u={layer:a,type:0,properties:{}};return l.readFields(KDe,u,c),u}const gk=function(l){function a(o){var c=l.call(this)||this,u=o||{};return c.dataProjection=new eg({code:"",units:vl.TILE_PIXELS}),c.featureClass_=u.featureClass?u.featureClass:vF,c.geometryName_=u.geometryName,c.layerName_=u.layerName?u.layerName:"layer",c.layers_=u.layers?u.layers:null,c.idProperty_=u.idProperty,c.supportedMediaTypes=["application/vnd.mapbox-vector-tile","application/x-protobuf"],c}return XDe(a,l),a.prototype.readRawGeometry_=function(o,c,u,h){o.pos=c.geometry;for(var d=o.readVarint()+o.pos,f=1,m=0,g=0,y=0,v=0,_=0;o.pos<d;){if(!m){var b=o.readVarint();f=7&b,m=b>>3}m--,1===f||2===f?(g+=o.readSVarint(),y+=o.readSVarint(),1===f&&v>_&&(h.push(v),_=v),u.push(g,y),v+=2):7===f?v>_&&(u.push(u[_],u[_+1]),v+=2):Yn(!1,59)}v>_&&(h.push(v),_=v)},a.prototype.createFeature_=function(o,c,u){var h=c.type;if(0===h)return null;var d,m,f=c.properties;this.idProperty_?(m=f[this.idProperty_],delete f[this.idProperty_]):m=c.id,f[this.layerName_]=c.layer.name;var g=[],y=[];this.readRawGeometry_(o,c,g,y);var v=function(l,a){var o;return 1===l?o=1===a?"Point":"MultiPoint":2===l?o=1===a?"LineString":"MultiLineString":3===l&&(o="Polygon"),o}(h,y.length);if(this.featureClass_===vF)(d=new this.featureClass_(v,g,y,f,m)).transform(u.dataProjection);else{var _=void 0;if("Polygon"==v){for(var b=[],w=0,C=0,E=0,M=y.length;E<M;++E){var x=y[E];if(GN(g,w,x,2)){if(0===b.length)continue;b[b.length-1].push(y[C])}else b.push(y.slice(C,E+1));C=E+1,w=x}_=b.length>1?new TM(g,"XY",b):new Ch(g,"XY",y)}else _="Point"===v?new wh(g,"XY"):"LineString"===v?new zd(g,"XY"):"Polygon"===v?new Ch(g,"XY",y):"MultiPoint"===v?new AT(g,"XY"):"MultiLineString"===v?new DT(g,"XY",y):null;d=new(0,this.featureClass_),this.geometryName_&&d.setGeometryName(this.geometryName_);var P=h_(_,!1,u);d.setGeometry(P),d.setId(m),d.setProperties(f,!0)}return d},a.prototype.getType=function(){return"arraybuffer"},a.prototype.readFeatures=function(o,c){var u=this.layers_,h=this.adaptOptions(c),d=Bn(h.dataProjection);d.setWorldExtent(h.extent),h.dataProjection=d;var f=new qDe(o),m=f.readFields(YDe,{}),g=[];for(var y in m)if(!u||-1!=u.indexOf(y)){var v=m[y];d.setExtent(v?[0,0,v.extent,v.extent]:null);for(var b=0,w=v.length;b<w;++b){var C=JDe(f,v,b);g.push(this.createFeature_(f,C,h))}}return g},a.prototype.readProjection=function(o){return this.dataProjection},a.prototype.setLayers=function(o){this.layers_=o},a}(pF);var eAe=function(){var l=function(a,o){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,u){c.__proto__=u}||function(c,u){for(var h in u)Object.prototype.hasOwnProperty.call(u,h)&&(c[h]=u[h])})(a,o)};return function(a,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function c(){this.constructor=a}l(a,o),a.prototype=null===o?Object.create(o):(c.prototype=o.prototype,new c)}}();const rAe=function(l){function a(o,c,u,h,d,f){var m=l.call(this,o,c,f)||this;return m.crossOrigin_=h,m.src_=u,m.key=u,m.image_=new Image,null!==h&&(m.image_.crossOrigin=h),m.unlisten_=null,m.tileLoadFunction_=d,m}return eAe(a,l),a.prototype.getImage=function(){return this.image_},a.prototype.setImage=function(o){this.image_=o,this.state=2,this.unlistenImage_(),this.changed()},a.prototype.handleImageError_=function(){this.state=3,this.unlistenImage_(),this.image_=function(){var l=Va(1,1);return l.fillStyle="rgba(0,0,0,0)",l.fillRect(0,0,1,1),l.canvas}(),this.changed()},a.prototype.handleImageLoad_=function(){var o=this.image_;this.state=o.naturalWidth&&o.naturalHeight?2:4,this.unlistenImage_(),this.changed()},a.prototype.load=function(){3==this.state&&(this.state=0,this.image_=new Image,null!==this.crossOrigin_&&(this.image_.crossOrigin=this.crossOrigin_)),0==this.state&&(this.state=1,this.changed(),this.tileLoadFunction_(this,this.src_),this.unlisten_=sF(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))},a.prototype.unlistenImage_=function(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)},a}(mM),i$=function(){function l(a,o,c,u,h,d){this.sourceProj_=a,this.targetProj_=o;var f={},m=Th(this.targetProj_,this.sourceProj_);this.transformInv_=function(R){var P=R[0]+"/"+R[1];return f[P]||(f[P]=m(R)),f[P]},this.maxSourceExtent_=u,this.errorThresholdSquared_=h*h,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!u&&!!this.sourceProj_.getExtent()&&Wr(u)==Wr(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?Wr(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?Wr(this.targetProj_.getExtent()):null;var g=_h(c),y=FE(c),v=cT(c),_=NE(c),b=this.transformInv_(g),w=this.transformInv_(y),C=this.transformInv_(v),E=this.transformInv_(_),M=10+(d?Math.max(0,Math.ceil(Lbe(OE(c)/(d*d*256*256)))):0);if(this.addQuad_(g,y,v,_,b,w,C,E,M),this.wrapsXInSource_){var x=1/0;this.triangles_.forEach(function(R,P,k){x=Math.min(x,R.source[0][0],R.source[1][0],R.source[2][0])}),this.triangles_.forEach(function(R){if(Math.max(R.source[0][0],R.source[1][0],R.source[2][0])-x>this.sourceWorldWidth_/2){var P=[[R.source[0][0],R.source[0][1]],[R.source[1][0],R.source[1][1]],[R.source[2][0],R.source[2][1]]];P[0][0]-x>this.sourceWorldWidth_/2&&(P[0][0]-=this.sourceWorldWidth_),P[1][0]-x>this.sourceWorldWidth_/2&&(P[1][0]-=this.sourceWorldWidth_),P[2][0]-x>this.sourceWorldWidth_/2&&(P[2][0]-=this.sourceWorldWidth_);var k=Math.min(P[0][0],P[1][0],P[2][0]);Math.max(P[0][0],P[1][0],P[2][0])-k<this.sourceWorldWidth_/2&&(R.source=P)}}.bind(this))}f={}}return l.prototype.addTriangle_=function(a,o,c,u,h,d){this.triangles_.push({source:[u,h,d],target:[a,o,c]})},l.prototype.addQuad_=function(a,o,c,u,h,d,f,m,g){var y=rN([h,d,f,m]),v=this.sourceWorldWidth_?Wr(y)/this.sourceWorldWidth_:null,_=this.sourceWorldWidth_,b=this.sourceProj_.canWrapX()&&v>.5&&v<1,w=!1;if(g>0&&(this.targetProj_.isGlobal()&&this.targetWorldWidth_&&(w=Wr(rN([a,o,c,u]))/this.targetWorldWidth_>.25||w),!b&&this.sourceProj_.isGlobal()&&v&&(w=v>.25||w)),!(!w&&this.maxSourceExtent_&&isFinite(y[0])&&isFinite(y[1])&&isFinite(y[2])&&isFinite(y[3]))||As(y,this.maxSourceExtent_)){var M=0;if(!(w||isFinite(h[0])&&isFinite(h[1])&&isFinite(d[0])&&isFinite(d[1])&&isFinite(f[0])&&isFinite(f[1])&&isFinite(m[0])&&isFinite(m[1])))if(g>0)w=!0;else if(1!=(M=(isFinite(h[0])&&isFinite(h[1])?0:8)+(isFinite(d[0])&&isFinite(d[1])?0:4)+(isFinite(f[0])&&isFinite(f[1])?0:2)+(isFinite(m[0])&&isFinite(m[1])?0:1))&&2!=M&&4!=M&&8!=M)return;if(g>0){if(!w){var R=this.transformInv_([(a[0]+c[0])/2,(a[1]+c[1])/2]),P=void 0;P=b?($f(h[0],_)+$f(f[0],_))/2-$f(R[0],_):(h[0]+f[0])/2-R[0];var W=(h[1]+f[1])/2-R[1];w=P*P+W*W>this.errorThresholdSquared_}if(w){if(Math.abs(a[0]-c[0])<=Math.abs(a[1]-c[1])){var K=[(o[0]+c[0])/2,(o[1]+c[1])/2],Q=this.transformInv_(K),se=[(u[0]+a[0])/2,(u[1]+a[1])/2],te=this.transformInv_(se);this.addQuad_(a,o,K,se,h,d,Q,te,g-1),this.addQuad_(se,K,c,u,te,Q,f,m,g-1)}else{var De=[(a[0]+o[0])/2,(a[1]+o[1])/2],de=this.transformInv_(De),ye=[(c[0]+u[0])/2,(c[1]+u[1])/2],_e=this.transformInv_(ye);this.addQuad_(a,De,ye,u,h,de,_e,m,g-1),this.addQuad_(De,o,c,ye,de,d,f,_e,g-1)}return}}if(b){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}0==(11&M)&&this.addTriangle_(a,c,u,h,f,m),0==(14&M)&&this.addTriangle_(a,c,o,h,f,d),M&&(0==(13&M)&&this.addTriangle_(o,u,a,d,m,h),0==(7&M)&&this.addTriangle_(o,u,c,d,m,f))}},l.prototype.calculateSourceExtent=function(){var a=[1/0,1/0,-1/0,-1/0];return this.triangles_.forEach(function(o,c,u){var h=o.source;Wv(a,h[0]),Wv(a,h[1]),Wv(a,h[2])}),a},l.prototype.getTriangles=function(){return this.triangles_},l}();var vk,up="1.3.0",yk={imageSmoothingEnabled:!1,msImageSmoothingEnabled:!1};function s$(l,a,o,c,u){l.beginPath(),l.moveTo(0,0),l.lineTo(a,o),l.lineTo(c,u),l.closePath(),l.save(),l.clip(),l.fillRect(0,0,Math.max(a,c)+1,Math.max(o,u)),l.restore()}function _k(l,a){return Math.abs(l[4*a]-210)>2||Math.abs(l[4*a+3]-191.25)>2}function XT(l,a,o,c){var u=ql(o,a,l),h=tM(a,c,o),d=a.getMetersPerUnit();void 0!==d&&(h*=d);var f=l.getMetersPerUnit();void 0!==f&&(h/=f);var m=l.getExtent();if(!m||Pd(m,u)){var g=tM(l,h,u)/h;isFinite(g)&&g>0&&(h/=g)}return h}function o$(l,a,o,c,u,h,d,f,m,g,y,v){var _=Va(Math.round(o*l),Math.round(o*a));if(Gr(_,v),0===m.length)return _.canvas;function b(P){return Math.round(P*o)/o}_.scale(o,o),_.globalCompositeOperation="lighter";var w=[1/0,1/0,-1/0,-1/0];m.forEach(function(P,k,W){aN(w,P.extent)});var C=Wr(w),E=bs(w),M=Va(Math.round(o*C/c),Math.round(o*E/c));Gr(M,v);var x=o/c;m.forEach(function(P,k,W){var U=P.extent[0]-w[0],K=-(P.extent[3]-w[3]),Q=Wr(P.extent),se=bs(P.extent);P.image.width>0&&P.image.height>0&&M.drawImage(P.image,g,g,P.image.width-2*g,P.image.height-2*g,U*x,K*x,Q*x,se*x)});var R=_h(d);return f.getTriangles().forEach(function(P,k,W){var U=P.source,K=P.target,Q=U[0][0],se=U[0][1],te=U[1][0],De=U[1][1],de=U[2][0],ye=U[2][1],_e=b((K[0][0]-R[0])/h),ue=b(-(K[0][1]-R[1])/h),ce=b((K[1][0]-R[0])/h),Re=b(-(K[1][1]-R[1])/h),Oe=b((K[2][0]-R[0])/h),Ae=b(-(K[2][1]-R[1])/h),We=Q,Te=se;Q=0,se=0;var Ue=function(l){for(var a=l.length,o=0;o<a;o++){for(var c=o,u=Math.abs(l[o][o]),h=o+1;h<a;h++){var d=Math.abs(l[h][o]);d>u&&(u=d,c=h)}if(0===u)return null;var f=l[c];l[c]=l[o],l[o]=f;for(var m=o+1;m<a;m++)for(var g=-l[m][o]/l[o][o],y=o;y<a+1;y++)o==y?l[m][y]=0:l[m][y]+=g*l[o][y]}for(var v=new Array(a),_=a-1;_>=0;_--){v[_]=l[_][a]/l[_][_];for(var b=_-1;b>=0;b--)l[b][a]-=l[b][_]*v[_]}return v}([[te-=We,De-=Te,0,0,ce-_e],[de-=We,ye-=Te,0,0,Oe-_e],[0,0,te,De,Re-ue],[0,0,de,ye,Ae-ue]]);if(Ue){if(_.save(),_.beginPath(),function(){if(void 0===vk){var l=document.createElement("canvas").getContext("2d");l.globalCompositeOperation="lighter",l.fillStyle="rgba(210, 0, 0, 0.75)",s$(l,4,5,4,0),s$(l,4,5,0,5);var a=l.getImageData(0,0,3,3).data;vk=_k(a,0)||_k(a,4)||_k(a,8)}return vk}()||v===yk){_.moveTo(ce,Re);for(var Ce=_e-ce,xt=ue-Re,Ye=0;Ye<4;Ye++)_.lineTo(ce+b((Ye+1)*Ce/4),Re+b(Ye*xt/3)),3!=Ye&&_.lineTo(ce+b((Ye+1)*Ce/4),Re+b((Ye+1)*xt/3));_.lineTo(Oe,Ae)}else _.moveTo(ce,Re),_.lineTo(_e,ue),_.lineTo(Oe,Ae);_.clip(),_.transform(Ue[0],Ue[2],Ue[1],Ue[3],_e,ue),_.translate(w[0]-We,w[3]-Te),_.scale(c/o,-c/o),_.drawImage(M.canvas,0,0),_.restore()}}),y&&(_.save(),_.globalCompositeOperation="source-over",_.strokeStyle="black",_.lineWidth=1,f.getTriangles().forEach(function(P,k,W){var U=P.target,K=(U[0][0]-R[0])/h,Q=-(U[0][1]-R[1])/h,se=(U[1][0]-R[0])/h,te=-(U[1][1]-R[1])/h,De=(U[2][0]-R[0])/h,de=-(U[2][1]-R[1])/h;_.beginPath(),_.moveTo(se,te),_.lineTo(K,Q),_.lineTo(De,de),_.closePath(),_.stroke()}),_.restore()),_.canvas}var lAe=function(){var l=function(a,o){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,u){c.__proto__=u}||function(c,u){for(var h in u)Object.prototype.hasOwnProperty.call(u,h)&&(c[h]=u[h])})(a,o)};return function(a,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function c(){this.constructor=a}l(a,o),a.prototype=null===o?Object.create(o):(c.prototype=o.prototype,new c)}}();const uAe=function(l){function a(o,c,u,h,d,f,m,g,y,v,_,b){var w=l.call(this,d,0)||this;w.renderEdges_=void 0!==_&&_,w.contextOptions_=b,w.pixelRatio_=m,w.gutter_=g,w.canvas_=null,w.sourceTileGrid_=c,w.targetTileGrid_=h,w.wrappedTileCoord_=f||d,w.sourceTiles_=[],w.sourcesListenerKeys_=null,w.sourceZ_=0;var C=h.getTileCoordExtent(w.wrappedTileCoord_),E=w.targetTileGrid_.getExtent(),M=w.sourceTileGrid_.getExtent(),x=E?gu(C,E):C;if(0===OE(x))return w.state=4,w;var R=o.getExtent();R&&(M=M?gu(M,R):R);var P=h.getResolution(w.wrappedTileCoord_[0]),k=function(l,a,o,c){var u=ml(o),h=XT(l,a,u,c);return(!isFinite(h)||h<=0)&&T9(o,function(d){return h=XT(l,a,d,c),isFinite(h)&&h>0}),h}(o,u,x,P);if(!isFinite(k)||k<=0)return w.state=4,w;if(w.triangulation_=new i$(o,u,x,M,k*(void 0!==v?v:.5),P),0===w.triangulation_.getTriangles().length)return w.state=4,w;w.sourceZ_=c.getZForResolution(k);var U=w.triangulation_.calculateSourceExtent();if(M&&(o.canWrapX()?(U[1]=br(U[1],M[1],M[3]),U[3]=br(U[3],M[1],M[3])):U=gu(U,M)),OE(U)){for(var K=c.getTileRangeForExtentAndZ(U,w.sourceZ_),Q=K.minX;Q<=K.maxX;Q++)for(var se=K.minY;se<=K.maxY;se++){var te=y(w.sourceZ_,Q,se,m);te&&w.sourceTiles_.push(te)}0===w.sourceTiles_.length&&(w.state=4)}else w.state=4;return w}return lAe(a,l),a.prototype.getImage=function(){return this.canvas_},a.prototype.reproject_=function(){var o=[];if(this.sourceTiles_.forEach(function(y,v,_){y&&2==y.getState()&&o.push({extent:this.sourceTileGrid_.getTileCoordExtent(y.tileCoord),image:y.getImage()})}.bind(this)),this.sourceTiles_.length=0,0===o.length)this.state=3;else{var c=this.wrappedTileCoord_[0],u=this.targetTileGrid_.getTileSize(c),h="number"==typeof u?u:u[0],d="number"==typeof u?u:u[1],f=this.targetTileGrid_.getResolution(c),m=this.sourceTileGrid_.getResolution(this.sourceZ_),g=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=o$(h,d,this.pixelRatio_,m,this.sourceTileGrid_.getExtent(),f,g,this.triangulation_,o,this.gutter_,this.renderEdges_,this.contextOptions_),this.state=2}this.changed()},a.prototype.load=function(){if(0==this.state){this.state=1,this.changed();var o=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(function(c,u,h){var d=c.getState();if(0==d||1==d){o++;var f=Sr(c,"change",function(m){var g=c.getState();(2==g||3==g||4==g)&&(Ii(f),0==--o&&(this.unlistenSources_(),this.reproject_()))},this);this.sourcesListenerKeys_.push(f)}}.bind(this)),0===o?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach(function(c,u,h){0==c.getState()&&c.load()})}},a.prototype.unlistenSources_=function(){this.sourcesListenerKeys_.forEach(Ii),this.sourcesListenerKeys_=null},a}(mM);var hAe=function(){var l=function(a,o){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,u){c.__proto__=u}||function(c,u){for(var h in u)Object.prototype.hasOwnProperty.call(u,h)&&(c[h]=u[h])})(a,o)};return function(a,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function c(){this.constructor=a}l(a,o),a.prototype=null===o?Object.create(o):(c.prototype=o.prototype,new c)}}();function fAe(l,a){l.getImage().src=a}const iD=function(l){function a(o){var c=l.call(this,{attributions:o.attributions,cacheSize:o.cacheSize,opaque:o.opaque,projection:o.projection,state:o.state,tileGrid:o.tileGrid,tileLoadFunction:o.tileLoadFunction?o.tileLoadFunction:fAe,tilePixelRatio:o.tilePixelRatio,tileUrlFunction:o.tileUrlFunction,url:o.url,urls:o.urls,wrapX:o.wrapX,transition:o.transition,key:o.key,attributionsCollapsible:o.attributionsCollapsible,zDirection:o.zDirection})||this;return c.crossOrigin=void 0!==o.crossOrigin?o.crossOrigin:null,c.tileClass=void 0!==o.tileClass?o.tileClass:rAe,c.tileCacheForProjection={},c.tileGridForProjection={},c.reprojectionErrorThreshold_=o.reprojectionErrorThreshold,c.contextOptions_=!1===o.imageSmoothing?yk:void 0,c.renderReprojectionEdges_=!1,c}return hAe(a,l),a.prototype.canExpireCache=function(){if(this.tileCache.canExpireCache())return!0;for(var o in this.tileCacheForProjection)if(this.tileCacheForProjection[o].canExpireCache())return!0;return!1},a.prototype.expireCache=function(o,c){var u=this.getTileCacheForProjection(o);for(var h in this.tileCache.expireCache(this.tileCache==u?c:{}),this.tileCacheForProjection){var d=this.tileCacheForProjection[h];d.expireCache(d==u?c:{})}},a.prototype.getContextOptions=function(){return this.contextOptions_},a.prototype.getGutterForProjection=function(o){return this.getProjection()&&o&&!Sh(this.getProjection(),o)?0:this.getGutter()},a.prototype.getGutter=function(){return 0},a.prototype.getKey=function(){return l.prototype.getKey.call(this)+(this.contextOptions_?"\n"+JSON.stringify(this.contextOptions_):"")},a.prototype.getOpaque=function(o){return!(this.getProjection()&&o&&!Sh(this.getProjection(),o))&&l.prototype.getOpaque.call(this,o)},a.prototype.getTileGridForProjection=function(o){var c=this.getProjection();if(this.tileGrid&&(!c||Sh(c,o)))return this.tileGrid;var u=Dn(o);return u in this.tileGridForProjection||(this.tileGridForProjection[u]=gq(o)),this.tileGridForProjection[u]},a.prototype.getTileCacheForProjection=function(o){var c=this.getProjection();if(!c||Sh(c,o))return this.tileCache;var u=Dn(o);return u in this.tileCacheForProjection||(this.tileCacheForProjection[u]=new cF(this.tileCache.highWaterMark)),this.tileCacheForProjection[u]},a.prototype.createTile_=function(o,c,u,h,d,f){var m=[o,c,u],g=this.getTileCoordForTileUrlFunction(m,d),y=g?this.tileUrlFunction(g,h,d):void 0,v=new this.tileClass(m,void 0!==y?0:4,void 0!==y?y:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return v.key=f,v.addEventListener("change",this.handleTileChange.bind(this)),v},a.prototype.getTile=function(o,c,u,h,d){var f=this.getProjection();if(!f||!d||Sh(f,d))return this.getTileInternal(o,c,u,h,f||d);var m=this.getTileCacheForProjection(d),g=[o,c,u],y=void 0,v=dq(g);m.containsKey(v)&&(y=m.get(v));var _=this.getKey();if(y&&y.key==_)return y;var b=this.getTileGridForProjection(f),w=this.getTileGridForProjection(d),C=this.getTileCoordForTileUrlFunction(g,d),E=new uAe(f,b,d,w,g,C,this.getTilePixelRatio(h),this.getGutter(),function(M,x,R,P){return this.getTileInternal(M,x,R,P,f)}.bind(this),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_,this.contextOptions_);return E.key=_,y?(E.interimTile=y,E.refreshInterimChain(),m.replace(v,E)):m.set(v,E),E},a.prototype.getTileInternal=function(o,c,u,h,d){var f=null,m=c_(o,c,u),g=this.getKey();if(this.tileCache.containsKey(m)){if((f=this.tileCache.get(m)).key!=g){var y=f;(f=this.createTile_(o,c,u,h,d,g)).interimTile=0==y.getState()?y.interimTile:y,f.refreshInterimChain(),this.tileCache.replace(m,f)}}else f=this.createTile_(o,c,u,h,d,g),this.tileCache.set(m,f);return f},a.prototype.setRenderReprojectionEdges=function(o){if(this.renderReprojectionEdges_!=o){for(var c in this.renderReprojectionEdges_=o,this.tileCacheForProjection)this.tileCacheForProjection[c].clear();this.changed()}},a.prototype.setTileGridForProjection=function(o,c){var u=Bn(o);if(u){var h=Dn(u);h in this.tileGridForProjection||(this.tileGridForProjection[h]=c)}},a}(Tq);var pAe=function(){var l=function(a,o){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,u){c.__proto__=u}||function(c,u){for(var h in u)Object.prototype.hasOwnProperty.call(u,h)&&(c[h]=u[h])})(a,o)};return function(a,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function c(){this.constructor=a}l(a,o),a.prototype=null===o?Object.create(o):(c.prototype=o.prototype,new c)}}();const a$=function(l){function a(o){var u=o||{},h=void 0!==u.projection?u.projection:"EPSG:3857",d=void 0!==u.tileGrid?u.tileGrid:dF({extent:yM(h),maxResolution:u.maxResolution,maxZoom:u.maxZoom,minZoom:u.minZoom,tileSize:u.tileSize});return l.call(this,{attributions:u.attributions,cacheSize:u.cacheSize,crossOrigin:u.crossOrigin,imageSmoothing:u.imageSmoothing,opaque:u.opaque,projection:h,reprojectionErrorThreshold:u.reprojectionErrorThreshold,tileGrid:d,tileLoadFunction:u.tileLoadFunction,tilePixelRatio:u.tilePixelRatio,tileUrlFunction:u.tileUrlFunction,url:u.url,urls:u.urls,wrapX:void 0===u.wrapX||u.wrapX,transition:u.transition,attributionsCollapsible:u.attributionsCollapsible,zDirection:u.zDirection})||this}return pAe(a,l),a}(iD);function C_(l,a){var o=[];Object.keys(a).forEach(function(u){null!=a[u]&&o.push(u+"="+encodeURIComponent(a[u]))});var c=o.join("&");return(l=-1===(l=l.replace(/[?&]$/,"")).indexOf("?")?l+"?":l+"&")+c}var gAe=function(){var l=function(a,o){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,u){c.__proto__=u}||function(c,u){for(var h in u)Object.prototype.hasOwnProperty.call(u,h)&&(c[h]=u[h])})(a,o)};return function(a,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function c(){this.constructor=a}l(a,o),a.prototype=null===o?Object.create(o):(c.prototype=o.prototype,new c)}}();const $T=function(l){function a(o){var c=this,u=o||{},h=u.params||{};return(c=l.call(this,{attributions:u.attributions,attributionsCollapsible:u.attributionsCollapsible,cacheSize:u.cacheSize,crossOrigin:u.crossOrigin,imageSmoothing:u.imageSmoothing,opaque:!(!("TRANSPARENT"in h)||h.TRANSPARENT),projection:u.projection,reprojectionErrorThreshold:u.reprojectionErrorThreshold,tileClass:u.tileClass,tileGrid:u.tileGrid,tileLoadFunction:u.tileLoadFunction,url:u.url,urls:u.urls,wrapX:void 0===u.wrapX||u.wrapX,transition:u.transition,zDirection:u.zDirection})||this).gutter_=void 0!==u.gutter?u.gutter:0,c.params_=h,c.v13_=!0,c.serverType_=u.serverType,c.hidpi_=void 0===u.hidpi||u.hidpi,c.tmpExtent_=[1/0,1/0,-1/0,-1/0],c.updateV13_(),c.setKey(c.getKeyForParams_()),c}return gAe(a,l),a.prototype.getFeatureInfoUrl=function(o,c,u,h){var d=Bn(u),f=this.getProjection(),m=this.getTileGrid();m||(m=this.getTileGridForProjection(d));var g=m.getZForResolution(c,this.zDirection),y=m.getTileCoordForCoordAndZ(o,g);if(!(m.getResolutions().length<=y[0])){var v=m.getResolution(y[0]),_=m.getTileCoordExtent(y,this.tmpExtent_),b=ga(m.getTileSize(y[0]),this.tmpSize),w=this.gutter_;0!==w&&(b=MW(b,w,this.tmpSize),_=jl(_,v*w,_)),f&&f!==d&&(v=XT(f,d,o,v),_=Ba(_,d,f),o=ql(o,d,f));var C={SERVICE:"WMS",VERSION:up,REQUEST:"GetFeatureInfo",FORMAT:"image/png",TRANSPARENT:!0,QUERY_LAYERS:this.params_.LAYERS};Gr(C,this.params_,h);var E=Math.floor((o[0]-_[0])/v),M=Math.floor((_[3]-o[1])/v);return C[this.v13_?"I":"X"]=E,C[this.v13_?"J":"Y"]=M,this.getRequestUrl_(y,b,_,1,f||d,C)}},a.prototype.getLegendUrl=function(o,c){if(void 0!==this.urls[0]){var u={SERVICE:"WMS",VERSION:up,REQUEST:"GetLegendGraphic",FORMAT:"image/png"};if(void 0===c||void 0===c.LAYER){var h=this.params_.LAYERS;if(Array.isArray(h)&&1!==h.length)return;u.LAYER=h}if(void 0!==o){var f=this.getProjection()?this.getProjection().getMetersPerUnit():1;u.SCALE=o*f/28e-5}return Gr(u,c),C_(this.urls[0],u)}},a.prototype.getGutter=function(){return this.gutter_},a.prototype.getParams=function(){return this.params_},a.prototype.getRequestUrl_=function(o,c,u,h,d,f){var m=this.urls;if(m){if(f.WIDTH=c[0],f.HEIGHT=c[1],f[this.v13_?"CRS":"SRS"]=d.getCode(),"STYLES"in this.params_||(f.STYLES=""),1!=h)switch(this.serverType_){case"geoserver":var g=90*h+.5|0;"FORMAT_OPTIONS"in f?f.FORMAT_OPTIONS+=";dpi:"+g:f.FORMAT_OPTIONS="dpi:"+g;break;case"mapserver":f.MAP_RESOLUTION=90*h;break;case"carmentaserver":case"qgis":f.DPI=90*h;break;default:Yn(!1,52)}var y=d.getAxisOrientation(),v=u;if(this.v13_&&"ne"==y.substr(0,2)){var _=void 0;_=u[0],v[0]=u[1],v[1]=_,_=u[2],v[2]=u[3],v[3]=_}return f.BBOX=v.join(","),C_(1==m.length?m[0]:m[$f(pq(o),m.length)],f)}},a.prototype.getTilePixelRatio=function(o){return this.hidpi_&&void 0!==this.serverType_?o:1},a.prototype.getKeyForParams_=function(){var o=0,c=[];for(var u in this.params_)c[o++]=u+"-"+this.params_[u];return c.join("/")},a.prototype.updateParams=function(o){Gr(this.params_,o),this.updateV13_(),this.setKey(this.getKeyForParams_())},a.prototype.updateV13_=function(){this.v13_=V9(this.params_.VERSION||up,"1.3")>=0},a.prototype.tileUrlFunction=function(o,c,u){var h=this.getTileGrid();if(h||(h=this.getTileGridForProjection(u)),!(h.getResolutions().length<=o[0])){1!=c&&(!this.hidpi_||void 0===this.serverType_)&&(c=1);var d=h.getResolution(o[0]),f=h.getTileCoordExtent(o,this.tmpExtent_),m=ga(h.getTileSize(o[0]),this.tmpSize),g=this.gutter_;0!==g&&(m=MW(m,g,this.tmpSize),f=jl(f,d*g,f)),1!=c&&(m=AW(m,c,this.tmpSize));var y={SERVICE:"WMS",VERSION:up,REQUEST:"GetMap",FORMAT:"image/png",TRANSPARENT:!0};return Gr(y,this.params_),this.getRequestUrl_(o,m,f,c,u,y)}},a}(iD);var vAe=function(){var l=function(a,o){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,u){c.__proto__=u}||function(c,u){for(var h in u)Object.prototype.hasOwnProperty.call(u,h)&&(c[h]=u[h])})(a,o)};return function(a,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function c(){this.constructor=a}l(a,o),a.prototype=null===o?Object.create(o):(c.prototype=o.prototype,new c)}}();const bAe=function(l){function a(o,c,u,h,d,f,m){var g=this,y=o.getExtent(),v=c.getExtent(),_=v?gu(u,v):u,w=XT(o,c,ml(_),h),E=new i$(o,c,_,y,.5*w,h),x=f(E.calculateSourceExtent(),w,d),R=x?0:4,P=x?x.getPixelRatio():1;return(g=l.call(this,u,h,P,R)||this).targetProj_=c,g.maxSourceExtent_=y,g.triangulation_=E,g.targetResolution_=h,g.targetExtent_=u,g.sourceImage_=x,g.sourcePixelRatio_=P,g.contextOptions_=m,g.canvas_=null,g.sourceListenerKey_=null,g}return vAe(a,l),a.prototype.disposeInternal=function(){1==this.state&&this.unlistenSource_(),l.prototype.disposeInternal.call(this)},a.prototype.getImage=function(){return this.canvas_},a.prototype.getProjection=function(){return this.targetProj_},a.prototype.reproject_=function(){var o=this.sourceImage_.getState();if(2==o){var c=Wr(this.targetExtent_)/this.targetResolution_,u=bs(this.targetExtent_)/this.targetResolution_;this.canvas_=o$(c,u,this.sourcePixelRatio_,this.sourceImage_.getResolution(),0,this.targetResolution_,this.targetExtent_,this.triangulation_,[{extent:this.sourceImage_.getExtent(),image:this.sourceImage_.getImage()}],0,void 0,this.contextOptions_)}this.state=o,this.changed()},a.prototype.load=function(){if(0==this.state){this.state=1,this.changed();var o=this.sourceImage_.getState();2==o||3==o?this.reproject_():(this.sourceListenerKey_=Sr(this.sourceImage_,"change",function(c){var u=this.sourceImage_.getState();(2==u||3==u)&&(this.unlistenSource_(),this.reproject_())},this),this.sourceImage_.load())}},a.prototype.unlistenSource_=function(){Ii(this.sourceListenerKey_),this.sourceListenerKey_=null},a}(iF);var l$=function(){var l=function(a,o){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,u){c.__proto__=u}||function(c,u){for(var h in u)Object.prototype.hasOwnProperty.call(u,h)&&(c[h]=u[h])})(a,o)};return function(a,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function c(){this.constructor=a}l(a,o),a.prototype=null===o?Object.create(o):(c.prototype=o.prototype,new c)}}(),Sk=function(l){function a(o,c){var u=l.call(this,o)||this;return u.image=c,u}return l$(a,l),a}(Od);function c$(l,a){l.getImage().src=a}const sD=function(l){function a(o){var c=l.call(this,{attributions:o.attributions,projection:o.projection,state:o.state})||this;return c.resolutions_=void 0!==o.resolutions?o.resolutions:null,c.reprojectedImage_=null,c.reprojectedRevision_=0,c.contextOptions_=!1===o.imageSmoothing?yk:void 0,c}return l$(a,l),a.prototype.getResolutions=function(){return this.resolutions_},a.prototype.getContextOptions=function(){return this.contextOptions_},a.prototype.findNearestResolution=function(o){if(this.resolutions_){var c=AE(this.resolutions_,o,0);o=this.resolutions_[c]}return o},a.prototype.getImage=function(o,c,u,h){var d=this.getProjection();if(!d||!h||Sh(d,h))return d&&(h=d),this.getImageInternal(o,c,u,h);if(this.reprojectedImage_){if(this.reprojectedRevision_==this.getRevision()&&Sh(this.reprojectedImage_.getProjection(),h)&&this.reprojectedImage_.getResolution()==c&&vh(this.reprojectedImage_.getExtent(),o))return this.reprojectedImage_;this.reprojectedImage_.dispose(),this.reprojectedImage_=null}return this.reprojectedImage_=new bAe(d,h,o,c,u,function(f,m,g){return this.getImageInternal(f,m,g,d)}.bind(this),this.contextOptions_),this.reprojectedRevision_=this.getRevision(),this.reprojectedImage_},a.prototype.getImageInternal=function(o,c,u,h){return Gn()},a.prototype.handleImageChange=function(o){var c=o.target;switch(c.getState()){case 1:this.loading=!0,this.dispatchEvent(new Sk("imageloadstart",c));break;case 2:this.loading=!1,this.dispatchEvent(new Sk("imageloadend",c));break;case 3:this.loading=!1,this.dispatchEvent(new Sk("imageloaderror",c))}},a}(hF);var TAe=function(){var l=function(a,o){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,u){c.__proto__=u}||function(c,u){for(var h in u)Object.prototype.hasOwnProperty.call(u,h)&&(c[h]=u[h])})(a,o)};return function(a,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function c(){this.constructor=a}l(a,o),a.prototype=null===o?Object.create(o):(c.prototype=o.prototype,new c)}}(),u$=[101,101];const Tk=function(l){function a(o){var c=this,u=o||{};return(c=l.call(this,{attributions:u.attributions,imageSmoothing:u.imageSmoothing,projection:u.projection,resolutions:u.resolutions})||this).crossOrigin_=void 0!==u.crossOrigin?u.crossOrigin:null,c.url_=u.url,c.imageLoadFunction_=void 0!==u.imageLoadFunction?u.imageLoadFunction:c$,c.params_=u.params||{},c.v13_=!0,c.updateV13_(),c.serverType_=u.serverType,c.hidpi_=void 0===u.hidpi||u.hidpi,c.image_=null,c.imageSize_=[0,0],c.renderedRevision_=0,c.ratio_=void 0!==u.ratio?u.ratio:1.5,c}return TAe(a,l),a.prototype.getFeatureInfoUrl=function(o,c,u,h){if(void 0!==this.url_){var d=Bn(u),f=this.getProjection();f&&f!==d&&(c=XT(f,d,o,c),o=ql(o,d,f));var m=qv(o,c,0,u$),g={SERVICE:"WMS",VERSION:up,REQUEST:"GetFeatureInfo",FORMAT:"image/png",TRANSPARENT:!0,QUERY_LAYERS:this.params_.LAYERS};Gr(g,this.params_,h);var y=Math.floor((o[0]-m[0])/c),v=Math.floor((m[3]-o[1])/c);return g[this.v13_?"I":"X"]=y,g[this.v13_?"J":"Y"]=v,this.getRequestUrl_(m,u$,1,f||d,g)}},a.prototype.getLegendUrl=function(o,c){if(void 0!==this.url_){var u={SERVICE:"WMS",VERSION:up,REQUEST:"GetLegendGraphic",FORMAT:"image/png"};if(void 0===c||void 0===c.LAYER){var h=this.params_.LAYERS;if(Array.isArray(h)&&1!==h.length)return;u.LAYER=h}if(void 0!==o){var f=this.getProjection()?this.getProjection().getMetersPerUnit():1;u.SCALE=o*f/28e-5}return Gr(u,c),C_(this.url_,u)}},a.prototype.getParams=function(){return this.params_},a.prototype.getImageInternal=function(o,c,u,h){if(void 0===this.url_)return null;c=this.findNearestResolution(c),1!=u&&(!this.hidpi_||void 0===this.serverType_)&&(u=1);var d=c/u,f=ml(o),y=qv(f,d,0,[Math.ceil(Wr(o)/d),Math.ceil(bs(o)/d)]),b=qv(f,d,0,[Math.ceil(this.ratio_*Wr(o)/d),Math.ceil(this.ratio_*bs(o)/d)]),w=this.image_;if(w&&this.renderedRevision_==this.getRevision()&&w.getResolution()==c&&w.getPixelRatio()==u&&pl(w.getExtent(),y))return w;var C={SERVICE:"WMS",VERSION:up,REQUEST:"GetMap",FORMAT:"image/png",TRANSPARENT:!0};Gr(C,this.params_),this.imageSize_[0]=Math.round(Wr(b)/d),this.imageSize_[1]=Math.round(bs(b)/d);var E=this.getRequestUrl_(b,this.imageSize_,u,h,C);return this.image_=new oq(b,c,u,E,this.crossOrigin_,this.imageLoadFunction_),this.renderedRevision_=this.getRevision(),this.image_.addEventListener("change",this.handleImageChange.bind(this)),this.image_},a.prototype.getImageLoadFunction=function(){return this.imageLoadFunction_},a.prototype.getRequestUrl_=function(o,c,u,h,d){if(Yn(void 0!==this.url_,9),d[this.v13_?"CRS":"SRS"]=h.getCode(),"STYLES"in this.params_||(d.STYLES=""),1!=u)switch(this.serverType_){case"geoserver":var f=90*u+.5|0;"FORMAT_OPTIONS"in d?d.FORMAT_OPTIONS+=";dpi:"+f:d.FORMAT_OPTIONS="dpi:"+f;break;case"mapserver":d.MAP_RESOLUTION=90*u;break;case"carmentaserver":case"qgis":d.DPI=90*u;break;default:Yn(!1,8)}d.WIDTH=c[0],d.HEIGHT=c[1];var g,m=h.getAxisOrientation();return g=this.v13_&&"ne"==m.substr(0,2)?[o[1],o[0],o[3],o[2]]:o,d.BBOX=g.join(","),C_(this.url_,d)},a.prototype.getUrl=function(){return this.url_},a.prototype.setImageLoadFunction=function(o){this.image_=null,this.imageLoadFunction_=o,this.changed()},a.prototype.setUrl=function(o){o!=this.url_&&(this.url_=o,this.image_=null,this.changed())},a.prototype.updateParams=function(o){Gr(this.params_,o),this.updateV13_(),this.image_=null,this.changed()},a.prototype.updateV13_=function(){this.v13_=V9(this.params_.VERSION||up,"1.3")>=0},a}(sD);var CAe=function(){var l=function(a,o){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,u){c.__proto__=u}||function(c,u){for(var h in u)Object.prototype.hasOwnProperty.call(u,h)&&(c[h]=u[h])})(a,o)};return function(a,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function c(){this.constructor=a}l(a,o),a.prototype=null===o?Object.create(o):(c.prototype=o.prototype,new c)}}();const EAe=function(l){function a(o){var c=this,u=void 0!==o.requestEncoding?o.requestEncoding:"KVP",h=o.tileGrid,d=o.urls;return void 0===d&&void 0!==o.url&&(d=Sq(o.url)),(c=l.call(this,{attributions:o.attributions,attributionsCollapsible:o.attributionsCollapsible,cacheSize:o.cacheSize,crossOrigin:o.crossOrigin,imageSmoothing:o.imageSmoothing,projection:o.projection,reprojectionErrorThreshold:o.reprojectionErrorThreshold,tileClass:o.tileClass,tileGrid:h,tileLoadFunction:o.tileLoadFunction,tilePixelRatio:o.tilePixelRatio,urls:d,wrapX:void 0!==o.wrapX&&o.wrapX,transition:o.transition,zDirection:o.zDirection})||this).version_=void 0!==o.version?o.version:"1.0.0",c.format_=void 0!==o.format?o.format:"image/jpeg",c.dimensions_=void 0!==o.dimensions?o.dimensions:{},c.layer_=o.layer,c.matrixSet_=o.matrixSet,c.style_=o.style,c.requestEncoding_=u,c.setKey(c.getKeyForDimensions_()),d&&d.length>0&&(c.tileUrlFunction=fF(d.map(c.createFromWMTSTemplate.bind(c)))),c}return CAe(a,l),a.prototype.setUrls=function(o){this.urls=o;var c=o.join("\n");this.setTileUrlFunction(fF(o.map(this.createFromWMTSTemplate.bind(this))),c)},a.prototype.getDimensions=function(){return this.dimensions_},a.prototype.getFormat=function(){return this.format_},a.prototype.getLayer=function(){return this.layer_},a.prototype.getMatrixSet=function(){return this.matrixSet_},a.prototype.getRequestEncoding=function(){return this.requestEncoding_},a.prototype.getStyle=function(){return this.style_},a.prototype.getVersion=function(){return this.version_},a.prototype.getKeyForDimensions_=function(){var o=0,c=[];for(var u in this.dimensions_)c[o++]=u+"-"+this.dimensions_[u];return c.join("/")},a.prototype.updateDimensions=function(o){Gr(this.dimensions_,o),this.setKey(this.getKeyForDimensions_())},a.prototype.createFromWMTSTemplate=function(o){var c=this.requestEncoding_,u={layer:this.layer_,style:this.style_,tilematrixset:this.matrixSet_};"KVP"==c&&Gr(u,{Service:"WMTS",Request:"GetTile",Version:this.version_,Format:this.format_}),o="KVP"==c?C_(o,u):o.replace(/\{(\w+?)\}/g,function(f,m){return m.toLowerCase()in u?u[m.toLowerCase()]:f});var h=this.tileGrid,d=this.dimensions_;return function(f,m,g){if(f){var y={TileMatrix:h.getMatrixId(f[0]),TileCol:f[1],TileRow:f[2]};Gr(y,d);var v=o;return"KVP"==c?C_(v,y):v.replace(/\{(\w+?)\}/g,function(_,b){return y[b]})}}},a}(iD);var MAe=function(){var l=function(a,o){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,u){c.__proto__=u}||function(c,u){for(var h in u)Object.prototype.hasOwnProperty.call(u,h)&&(c[h]=u[h])})(a,o)};return function(a,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function c(){this.constructor=a}l(a,o),a.prototype=null===o?Object.create(o):(c.prototype=o.prototype,new c)}}();const DAe=function(l){function a(o){var c=l.call(this,{extent:o.extent,origin:o.origin,origins:o.origins,resolutions:o.resolutions,tileSize:o.tileSize,tileSizes:o.tileSizes,sizes:o.sizes})||this;return c.matrixIds_=o.matrixIds,c}return MAe(a,l),a.prototype.getMatrixId=function(o){return this.matrixIds_[o]},a.prototype.getMatrixIds=function(){return this.matrixIds_},a}(gM),d$=function(){function l(a){this.rbush_=new JN(a),this.items_={}}return l.prototype.insert=function(a,o){var c={minX:a[0],minY:a[1],maxX:a[2],maxY:a[3],value:o};this.rbush_.insert(c),this.items_[Dn(o)]=c},l.prototype.load=function(a,o){for(var c=new Array(o.length),u=0,h=o.length;u<h;u++){var d=a[u],f=o[u],m={minX:d[0],minY:d[1],maxX:d[2],maxY:d[3],value:f};c[u]=m,this.items_[Dn(f)]=m}this.rbush_.load(c)},l.prototype.remove=function(a){var o=Dn(a),c=this.items_[o];return delete this.items_[o],null!==this.rbush_.remove(c)},l.prototype.update=function(a,o){var c=this.items_[Dn(o)];vh([c.minX,c.minY,c.maxX,c.maxY],a)||(this.remove(o),this.insert(a,o))},l.prototype.getAll=function(){return this.rbush_.all().map(function(o){return o.value})},l.prototype.getInExtent=function(a){return this.rbush_.search({minX:a[0],minY:a[1],maxX:a[2],maxY:a[3]}).map(function(u){return u.value})},l.prototype.forEach=function(a){return this.forEach_(this.getAll(),a)},l.prototype.forEachInExtent=function(a,o){return this.forEach_(this.getInExtent(a),o)},l.prototype.forEach_=function(a,o){for(var c,u=0,h=a.length;u<h;u++)if(c=o(a[u]))return c;return c},l.prototype.isEmpty=function(){return Zm(this.items_)},l.prototype.clear=function(){this.rbush_.clear(),this.items_={}},l.prototype.getExtent=function(a){var o=this.rbush_.toJSON();return yh(o.minX,o.minY,o.maxX,o.maxY,a)},l.prototype.concat=function(a){for(var o in this.rbush_.load(a.rbush_.all()),a.items_)this.items_[o]=a.items_[o]},l}();function f$(l,a){return[[-1/0,-1/0,1/0,1/0]]}function wk(l,a){return[l]}var p$=function(){var l=function(a,o){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,u){c.__proto__=u}||function(c,u){for(var h in u)Object.prototype.hasOwnProperty.call(u,h)&&(c[h]=u[h])})(a,o)};return function(a,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function c(){this.constructor=a}l(a,o),a.prototype=null===o?Object.create(o):(c.prototype=o.prototype,new c)}}(),dp=function(l){function a(o,c,u){var h=l.call(this,o)||this;return h.feature=c,h.features=u,h}return p$(a,l),a}(Od);const ds=function(l){function a(o){var c=this,u=o||{};(c=l.call(this,{attributions:u.attributions,projection:void 0,state:"ready",wrapX:void 0===u.wrapX||u.wrapX})||this).loader_=qm,c.format_=u.format,c.overlaps_=void 0===u.overlaps||u.overlaps,c.url_=u.url,void 0!==u.loader?c.loader_=u.loader:void 0!==c.url_&&(Yn(c.format_,7),c.loader_=Eq(c.url_,c.format_)),c.strategy_=void 0!==u.strategy?u.strategy:f$;var d,f,h=void 0===u.useSpatialIndex||u.useSpatialIndex;return c.featuresRtree_=h?new d$:null,c.loadedExtentsRtree_=new d$,c.loadingExtentsCount_=0,c.nullGeometryFeatures_={},c.idIndex_={},c.uidIndex_={},c.featureChangeKeys_={},c.featuresCollection_=null,Array.isArray(u.features)?f=u.features:u.features&&(f=(d=u.features).getArray()),!h&&void 0===d&&(d=new Qo(f)),void 0!==f&&c.addFeaturesInternal(f),void 0!==d&&c.bindFeaturesCollection_(d),c}return p$(a,l),a.prototype.addFeature=function(o){this.addFeatureInternal(o),this.changed()},a.prototype.addFeatureInternal=function(o){var c=Dn(o);if(this.addToIndex_(c,o)){this.setupChangeEvents_(c,o);var u=o.getGeometry();if(u){var h=u.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(h,o)}else this.nullGeometryFeatures_[c]=o;this.dispatchEvent(new dp("addfeature",o))}else this.featuresCollection_&&this.featuresCollection_.remove(o)},a.prototype.setupChangeEvents_=function(o,c){this.featureChangeKeys_[o]=[Sr(c,"change",this.handleFeatureChange_,this),Sr(c,"propertychange",this.handleFeatureChange_,this)]},a.prototype.addToIndex_=function(o,c){var u=!0,h=c.getId();return void 0!==h&&(h.toString()in this.idIndex_?u=!1:this.idIndex_[h.toString()]=c),u&&(Yn(!(o in this.uidIndex_),30),this.uidIndex_[o]=c),u},a.prototype.addFeatures=function(o){this.addFeaturesInternal(o),this.changed()},a.prototype.addFeaturesInternal=function(o){for(var c=[],u=[],h=[],d=0,f=o.length;d<f;d++){var g=Dn(m=o[d]);this.addToIndex_(g,m)&&u.push(m)}d=0;for(var y=u.length;d<y;d++){var m;g=Dn(m=u[d]),this.setupChangeEvents_(g,m);var v=m.getGeometry();if(v){var _=v.getExtent();c.push(_),h.push(m)}else this.nullGeometryFeatures_[g]=m}this.featuresRtree_&&this.featuresRtree_.load(c,h),d=0;for(var b=u.length;d<b;d++)this.dispatchEvent(new dp("addfeature",u[d]))},a.prototype.bindFeaturesCollection_=function(o){var c=!1;this.addEventListener("addfeature",function(u){c||(c=!0,o.push(u.feature),c=!1)}),this.addEventListener("removefeature",function(u){c||(c=!0,o.remove(u.feature),c=!1)}),o.addEventListener("add",function(u){c||(c=!0,this.addFeature(u.element),c=!1)}.bind(this)),o.addEventListener("remove",function(u){c||(c=!0,this.removeFeature(u.element),c=!1)}.bind(this)),this.featuresCollection_=o},a.prototype.clear=function(o){if(o){for(var c in this.featureChangeKeys_)this.featureChangeKeys_[c].forEach(Ii);this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.uidIndex_={})}else if(this.featuresRtree_)for(var h in this.featuresRtree_.forEach(this.removeFeatureInternal.bind(this)),this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[h]);this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.nullGeometryFeatures_={};var d=new dp("clear");this.dispatchEvent(d),this.changed()},a.prototype.forEachFeature=function(o){if(this.featuresRtree_)return this.featuresRtree_.forEach(o);this.featuresCollection_&&this.featuresCollection_.forEach(o)},a.prototype.forEachFeatureAtCoordinateDirect=function(o,c){return this.forEachFeatureInExtent([o[0],o[1],o[0],o[1]],function(h){if(h.getGeometry().intersectsCoordinate(o))return c(h)})},a.prototype.forEachFeatureInExtent=function(o,c){if(this.featuresRtree_)return this.featuresRtree_.forEachInExtent(o,c);this.featuresCollection_&&this.featuresCollection_.forEach(c)},a.prototype.forEachFeatureIntersectingExtent=function(o,c){return this.forEachFeatureInExtent(o,function(u){if(u.getGeometry().intersectsExtent(o)){var d=c(u);if(d)return d}})},a.prototype.getFeaturesCollection=function(){return this.featuresCollection_},a.prototype.getFeatures=function(){var o;return this.featuresCollection_?o=this.featuresCollection_.getArray().slice(0):this.featuresRtree_&&(o=this.featuresRtree_.getAll(),Zm(this.nullGeometryFeatures_)||es(o,P9(this.nullGeometryFeatures_))),o},a.prototype.getFeaturesAtCoordinate=function(o){var c=[];return this.forEachFeatureAtCoordinateDirect(o,function(u){c.push(u)}),c},a.prototype.getFeaturesInExtent=function(o){return this.featuresRtree_?this.featuresRtree_.getInExtent(o):this.featuresCollection_?this.featuresCollection_.getArray().slice(0):[]},a.prototype.getClosestFeatureToCoordinate=function(o,c){var u=o[0],h=o[1],d=null,f=[NaN,NaN],m=1/0,g=[-1/0,-1/0,1/0,1/0],y=c||Gv;return this.featuresRtree_.forEachInExtent(g,function(v){if(y(v)){var _=v.getGeometry(),b=m;if((m=_.closestPointXY(u,h,f,m))<b){d=v;var w=Math.sqrt(m);g[0]=u-w,g[1]=h-w,g[2]=u+w,g[3]=h+w}}}),d},a.prototype.getExtent=function(o){return this.featuresRtree_.getExtent(o)},a.prototype.getFeatureById=function(o){var c=this.idIndex_[o.toString()];return void 0!==c?c:null},a.prototype.getFeatureByUid=function(o){var c=this.uidIndex_[o];return void 0!==c?c:null},a.prototype.getFormat=function(){return this.format_},a.prototype.getOverlaps=function(){return this.overlaps_},a.prototype.getUrl=function(){return this.url_},a.prototype.handleFeatureChange_=function(o){var c=o.target,u=Dn(c),h=c.getGeometry();if(h){var d=h.getExtent();u in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[u],this.featuresRtree_&&this.featuresRtree_.insert(d,c)):this.featuresRtree_&&this.featuresRtree_.update(d,c)}else u in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(c),this.nullGeometryFeatures_[u]=c);var f=c.getId();if(void 0!==f){var m=f.toString();this.idIndex_[m]!==c&&(this.removeFromIdIndex_(c),this.idIndex_[m]=c)}else this.removeFromIdIndex_(c),this.uidIndex_[u]=c;this.changed(),this.dispatchEvent(new dp("changefeature",c))},a.prototype.hasFeature=function(o){var c=o.getId();return void 0!==c?c in this.idIndex_:Dn(o)in this.uidIndex_},a.prototype.isEmpty=function(){return this.featuresRtree_.isEmpty()&&Zm(this.nullGeometryFeatures_)},a.prototype.loadFeatures=function(o,c,u){for(var h=this.loadedExtentsRtree_,d=this.strategy_(o,c,u),f=function(v,_){var b=d[v];h.forEachInExtent(b,function(C){return pl(C.extent,b)})||(++m.loadingExtentsCount_,m.dispatchEvent(new dp("featuresloadstart")),m.loader_.call(m,b,c,u,function(C){--this.loadingExtentsCount_,this.dispatchEvent(new dp("featuresloadend",void 0,C))}.bind(m),function(){--this.loadingExtentsCount_,this.dispatchEvent(new dp("featuresloaderror"))}.bind(m)),h.insert(b,{extent:b.slice()}))},m=this,g=0,y=d.length;g<y;++g)f(g);this.loading=!(this.loader_.length<4)&&this.loadingExtentsCount_>0},a.prototype.refresh=function(){this.clear(!0),this.loadedExtentsRtree_.clear(),l.prototype.refresh.call(this)},a.prototype.removeLoadedExtent=function(o){var u,c=this.loadedExtentsRtree_;c.forEachInExtent(o,function(h){if(vh(h.extent,o))return u=h,!0}),u&&c.remove(u)},a.prototype.removeFeature=function(o){var c=Dn(o);c in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[c]:this.featuresRtree_&&this.featuresRtree_.remove(o),this.removeFeatureInternal(o),this.changed()},a.prototype.removeFeatureInternal=function(o){var c=Dn(o);this.featureChangeKeys_[c].forEach(Ii),delete this.featureChangeKeys_[c];var u=o.getId();void 0!==u&&delete this.idIndex_[u.toString()],delete this.uidIndex_[c],this.dispatchEvent(new dp("removefeature",o))},a.prototype.removeFromIdIndex_=function(o){var c=!1;for(var u in this.idIndex_)if(this.idIndex_[u]===o){delete this.idIndex_[u],c=!0;break}return c},a.prototype.setLoader=function(o){this.loader_=o},a.prototype.setUrl=function(o){Yn(this.format_,7),this.url_=o,this.setLoader(Eq(o,this.format_))},a}(hF);var RAe=function(){var l=function(a,o){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,u){c.__proto__=u}||function(c,u){for(var h in u)Object.prototype.hasOwnProperty.call(u,h)&&(c[h]=u[h])})(a,o)};return function(a,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function c(){this.constructor=a}l(a,o),a.prototype=null===o?Object.create(o):(c.prototype=o.prototype,new c)}}();const Wd=function(l){function a(o){var c=l.call(this,{attributions:o.attributions,wrapX:o.wrapX})||this;return c.resolution=void 0,c.distance=void 0!==o.distance?o.distance:20,c.minDistance=o.minDistance||0,c.interpolationRatio=0,c.features=[],c.geometryFunction=o.geometryFunction||function(u){var h=u.getGeometry();return Yn("Point"==h.getType(),10),h},c.createCustomCluster_=o.createCluster,c.source=null,c.boundRefresh_=c.refresh.bind(c),c.updateDistance(c.distance,c.minDistance),c.setSource(o.source||null),c}return RAe(a,l),a.prototype.clear=function(o){this.features.length=0,l.prototype.clear.call(this,o)},a.prototype.getDistance=function(){return this.distance},a.prototype.getSource=function(){return this.source},a.prototype.loadFeatures=function(o,c,u){this.source.loadFeatures(o,c,u),c!==this.resolution&&(this.resolution=c,this.refresh())},a.prototype.setDistance=function(o){this.updateDistance(o,this.minDistance)},a.prototype.setMinDistance=function(o){this.updateDistance(this.distance,o)},a.prototype.getMinDistance=function(){return this.minDistance},a.prototype.setSource=function(o){this.source&&this.source.removeEventListener("change",this.boundRefresh_),this.source=o,o&&o.addEventListener("change",this.boundRefresh_),this.refresh()},a.prototype.refresh=function(){this.clear(),this.cluster(),this.addFeatures(this.features)},a.prototype.updateDistance=function(o,c){var u=0===o?0:Math.min(c,o)/o,h=o!==this.distance||this.interpolationRatio!==u;this.distance=o,this.minDistance=c,this.interpolationRatio=u,h&&this.refresh()},a.prototype.cluster=function(){if(void 0!==this.resolution&&this.source)for(var o=[1/0,1/0,-1/0,-1/0],c=this.distance*this.resolution,u=this.source.getFeatures(),h={},d=0,f=u.length;d<f;d++){var m=u[d];if(!(Dn(m)in h)){var g=this.geometryFunction(m);if(g){sN(g.getCoordinates(),o),jl(o,c,o);var v=this.source.getFeaturesInExtent(o).filter(function(_){var b=Dn(_);return!(b in h)&&(h[b]=!0,!0)});this.features.push(this.createCluster(v,o))}}}},a.prototype.createCluster=function(o,c){for(var u=[0,0],h=o.length-1;h>=0;--h){var d=this.geometryFunction(o[h]);d?B9(u,d.getCoordinates()):o.splice(h,1)}U9(u,1/o.length);var f=ml(c),m=this.interpolationRatio,g=new wh([u[0]*(1-m)+f[0]*m,u[1]*(1-m)+f[1]*m]);return this.createCustomCluster_?this.createCustomCluster_(g,o):new u_({geometry:g,features:o})},a}(ds);var m$="http://www.w3.org/2001/XMLSchema-instance";function YT(l,a){return cD().createElementNS(l,a)}function Ah(l,a){return g$(l,a,[]).join("")}function g$(l,a,o){if(l.nodeType==Node.CDATA_SECTION_NODE||l.nodeType==Node.TEXT_NODE)o.push(a?String(l.nodeValue).replace(/(\r\n|\r|\n)/g,""):l.nodeValue);else{var c=void 0;for(c=l.firstChild;c;c=c.nextSibling)g$(c,a,o)}return o}function fp(l){return"documentElement"in l}function pp(l){return(new DOMParser).parseFromString(l,"application/xml")}function y$(l,a){return function(o,c){var u=l.call(void 0!==a?a:this,o,c);void 0!==u&&es(c[c.length-1],u)}}function Ih(l,a){return function(o,c){var u=l.call(void 0!==a?a:this,o,c);void 0!==u&&c[c.length-1].push(u)}}function Ck(l,a){return function(o,c){var u=l.call(void 0!==a?a:this,o,c);void 0!==u&&(c[c.length-1]=u)}}function Yl(l,a,o){return function(c,u){var h=l.call(void 0!==o?o:this,c,u);if(void 0!==h){var d=u[u.length-1],f=void 0!==a?a:c.localName,m=void 0;f in d?m=d[f]:d[f]=m=[],m.push(h)}}}function ft(l,a,o){return function(c,u){var h=l.call(void 0!==o?o:this,c,u);void 0!==h&&(u[u.length-1][void 0!==a?a:c.localName]=h)}}function Hn(l,a){return function(o,c,u){l.call(void 0!==a?a:this,o,c,u),u[u.length-1].node.appendChild(o)}}function Rh(l,a){var o=l;return function(c,u,h){var m=o;return void 0===m&&(m=h),YT(void 0!==a?a:u[u.length-1].node.namespaceURI,m)}}var Fc=Rh();function Mu(l,a){for(var o=a.length,c=new Array(o),u=0;u<o;++u)c[u]=l[a[u]];return c}function dn(l,a,o){var u,h,c=void 0!==o?o:{};for(u=0,h=l.length;u<h;++u)c[l[u]]=a;return c}function x_(l,a,o,c){var u;for(u=a.firstElementChild;u;u=u.nextElementSibling){var h=l[u.namespaceURI];if(void 0!==h){var d=h[u.localName];void 0!==d&&d.call(c,u,o)}}}function gr(l,a,o,c,u){return c.push(l),x_(a,o,c,u),c.pop()}function Us(l,a,o,c,u,h,d){return u.push(l),function(l,a,o,c,u,h){for(var f,m,d=(void 0!==u?u:o).length,g=0;g<d;++g)void 0!==(f=o[g])&&void 0!==(m=a.call(void 0!==h?h:this,f,c,void 0!==u?u[g]:void 0))&&l[m.namespaceURI][m.localName].call(h,m,f,c)}(a,o,c,u,h,d),u.pop()}var aD=void 0,lD=void 0;function cD(){return void 0===lD&&"undefined"!=typeof document&&(lD=document.implementation.createDocument("","",null)),lD}var OAe=function(){var l=function(a,o){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,u){c.__proto__=u}||function(c,u){for(var h in u)Object.prototype.hasOwnProperty.call(u,h)&&(c[h]=u[h])})(a,o)};return function(a,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function c(){this.constructor=a}l(a,o),a.prototype=null===o?Object.create(o):(c.prototype=o.prototype,new c)}}();const FAe=function(l){function a(){var o=l.call(this)||this;return o.xmlSerializer_=(void 0===aD&&"undefined"!=typeof XMLSerializer&&(aD=new XMLSerializer),aD),o}return OAe(a,l),a.prototype.getType=function(){return"xml"},a.prototype.readFeature=function(o,c){if(o){if("string"==typeof o){var u=pp(o);return this.readFeatureFromDocument(u,c)}return fp(o)?this.readFeatureFromDocument(o,c):this.readFeatureFromNode(o,c)}return null},a.prototype.readFeatureFromDocument=function(o,c){var u=this.readFeaturesFromDocument(o,c);return u.length>0?u[0]:null},a.prototype.readFeatureFromNode=function(o,c){return null},a.prototype.readFeatures=function(o,c){if(o){if("string"==typeof o){var u=pp(o);return this.readFeaturesFromDocument(u,c)}return fp(o)?this.readFeaturesFromDocument(o,c):this.readFeaturesFromNode(o,c)}return[]},a.prototype.readFeaturesFromDocument=function(o,c){for(var u=[],h=o.firstChild;h;h=h.nextSibling)h.nodeType==Node.ELEMENT_NODE&&es(u,this.readFeaturesFromNode(h,c));return u},a.prototype.readFeaturesFromNode=function(o,c){return Gn()},a.prototype.readGeometry=function(o,c){if(o){if("string"==typeof o){var u=pp(o);return this.readGeometryFromDocument(u,c)}return fp(o)?this.readGeometryFromDocument(o,c):this.readGeometryFromNode(o,c)}return null},a.prototype.readGeometryFromDocument=function(o,c){return null},a.prototype.readGeometryFromNode=function(o,c){return null},a.prototype.readProjection=function(o){if(o){if("string"==typeof o){var c=pp(o);return this.readProjectionFromDocument(c)}return fp(o)?this.readProjectionFromDocument(o):this.readProjectionFromNode(o)}return null},a.prototype.readProjectionFromDocument=function(o){return this.dataProjection},a.prototype.readProjectionFromNode=function(o){return this.dataProjection},a.prototype.writeFeature=function(o,c){var u=this.writeFeatureNode(o,c);return this.xmlSerializer_.serializeToString(u)},a.prototype.writeFeatureNode=function(o,c){return null},a.prototype.writeFeatures=function(o,c){var u=this.writeFeaturesNode(o,c);return this.xmlSerializer_.serializeToString(u)},a.prototype.writeFeaturesNode=function(o,c){return null},a.prototype.writeGeometry=function(o,c){var u=this.writeGeometryNode(o,c);return this.xmlSerializer_.serializeToString(u)},a.prototype.writeGeometryNode=function(o,c){return null},a}(pF);function mp(l){return mg(Ah(l,!1))}function mg(l){var a=/^\s*(true|1)|(false|0)\s*$/.exec(l);if(a)return void 0!==a[1]||!1}function Ss(l){return qd(Ah(l,!1))}function qd(l){var a=/^\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)\s*$/i.exec(l);if(a)return parseFloat(a[1])}function xk(l){return uD(Ah(l,!1))}function uD(l){var a=/^\s*(\d+)\s*$/.exec(l);if(a)return parseInt(a[1],10)}function hr(l){return Ah(l,!1).trim()}function E_(l,a){Du(l,a?"1":"0")}function gg(l,a){var o=a.toPrecision();l.appendChild(cD().createTextNode(o))}function Du(l,a){l.appendChild(cD().createTextNode(a))}var M_,Ek,KT,JT,QT,hD,Mk,Dk,gD,VAe=function(){var l=function(a,o){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,u){c.__proto__=u}||function(c,u){for(var h in u)Object.prototype.hasOwnProperty.call(u,h)&&(c[h]=u[h])})(a,o)};return function(a,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function c(){this.constructor=a}l(a,o),a.prototype=null===o?Object.create(o):(c.prototype=o.prototype,new c)}}(),Xd=["http://www.google.com/kml/ext/2.2"],Rn=[null,"http://earth.google.com/kml/2.0","http://earth.google.com/kml/2.1","http://earth.google.com/kml/2.2","http://www.opengis.net/kml/2.2"],_$={fraction:"fraction",pixels:"pixels",insetPixels:"pixels"},UAe=dn(Rn,{ExtendedData:O$,Region:N$,MultiGeometry:ft(R$,"geometry"),LineString:ft(A$,"geometry"),LinearRing:ft(I$,"geometry"),Point:ft(P$,"geometry"),Polygon:ft(L$,"geometry"),Style:ft(Rk),StyleMap:function(l,a){var o=E$.call(this,l,a);if(o){var c=a[a.length-1];Array.isArray(o)?c.Style=o:"string"==typeof o?c.styleUrl=o:Yn(!1,38)}},address:ft(hr),description:ft(hr),name:ft(hr),open:ft(mp),phoneNumber:ft(hr),styleUrl:ft(C$),visibility:ft(mp)},dn(Xd,{MultiTrack:ft(function(l,a){var o=gr([],lIe,l,a);if(o)return new DT(o)},"geometry"),Track:ft(D$,"geometry")})),GAe=dn(Rn,{ExtendedData:O$,Region:N$,Link:function(l,a){x_(zAe,l,a)},address:ft(hr),description:ft(hr),name:ft(hr),open:ft(mp),phoneNumber:ft(hr),visibility:ft(mp)}),zAe=dn(Rn,{href:ft(w$)}),b$=dn(Rn,{LatLonAltBox:function(l,a){var o=gr({},EIe,l,a);if(o){var c=a[a.length-1],u=[parseFloat(o.west),parseFloat(o.south),parseFloat(o.east),parseFloat(o.north)];c.extent=u,c.altitudeMode=o.altitudeMode,c.minAltitude=parseFloat(o.minAltitude),c.maxAltitude=parseFloat(o.maxAltitude)}},Lod:function(l,a){var o=gr({},DIe,l,a);if(o){var c=a[a.length-1];c.minLodPixels=parseFloat(o.minLodPixels),c.maxLodPixels=parseFloat(o.maxLodPixels),c.minFadeExtent=parseFloat(o.minFadeExtent),c.maxFadeExtent=parseFloat(o.maxFadeExtent)}}}),HAe=dn(Rn,["Document","Placemark"]),jAe=dn(Rn,{Document:Hn(function(l,a,o){Us({node:l},UIe,GIe,a,o,void 0,this)}),Placemark:Hn(G$)}),ZT=null,dD=null,fD=null,gp=null,Ak=null,pD=null;function mD(l){return 32/Math.min(l[0],l[1])}function qAe(l){return l}var XAe=function(l){function a(o){var c=l.call(this)||this,u=o||{};return pD||(ZT=new Pi({color:M_=[255,255,255,1]}),hD="https://maps.google.com/mapfiles/kml/pushpin/ylw-pushpin.png",dD=new MT({anchor:Ek=[20,2],anchorOrigin:"bottom-left",anchorXUnits:KT="pixels",anchorYUnits:JT="pixels",crossOrigin:"anonymous",rotation:0,scale:mD(QT=[64,64]),size:QT,src:hD}),Mk="NO_IMAGE",fD=new Bs({color:M_,width:1}),Dk=new Bs({color:[51,51,51,1],width:2}),gp=new op({font:"bold 16px Helvetica",fill:ZT,stroke:Dk,scale:.8}),Ak=new Li({fill:ZT,image:dD,text:gp,stroke:fD,zIndex:0}),pD=[Ak]),c.dataProjection=Bn("EPSG:4326"),c.defaultStyle_=u.defaultStyle?u.defaultStyle:pD,c.extractStyles_=void 0===u.extractStyles||u.extractStyles,c.writeStyles_=void 0===u.writeStyles||u.writeStyles,c.sharedStyles_={},c.showPointNames_=void 0===u.showPointNames||u.showPointNames,c.crossOrigin_=void 0!==u.crossOrigin?u.crossOrigin:"anonymous",c.iconUrlFunction_=u.iconUrlFunction?u.iconUrlFunction:qAe,c.supportedMediaTypes=["application/vnd.google-earth.kml+xml"],c}return VAe(a,l),a.prototype.readDocumentOrFolder_=function(o,c){var h=gr([],dn(Rn,{Document:y$(this.readDocumentOrFolder_,this),Folder:y$(this.readDocumentOrFolder_,this),Placemark:Ih(this.readPlacemark_,this),Style:this.readSharedStyle_.bind(this),StyleMap:this.readSharedStyleMap_.bind(this)}),o,c,this);if(h)return h},a.prototype.readPlacemark_=function(o,c){var u=gr({geometry:null},UAe,o,c,this);if(u){var h=new u_,d=o.getAttribute("id");null!==d&&h.setId(d);var m=u.geometry;if(m&&h_(m,!1,c[0]),h.setGeometry(m),delete u.geometry,this.extractStyles_){var v=function(l,a,o,c,u){return function(h,d){var f=u,m="",g=[];if(f){var y=h.getGeometry();if(y){var v=y.getType();f="GeometryCollection"===v?(g=y.getGeometriesArrayRecursive().filter(function(C){var E=C.getType();return"Point"===E||"MultiPoint"===E})).length>0:"Point"===v||"MultiPoint"===v}}f&&(m=h.get("name"),(f=f&&!!m)&&m.search(/&[^&]+;/)>-1&&(gD||(gD=document.createElement("textarea")),gD.innerHTML=m,m=gD.value));var _=o;if(l?_=l:a&&(_=S$(a,o,c)),f){var b=function(l,a){var o=[0,0],c="start",u=l.getImage();if(u){var h=u.getSize();if(h&&2==h.length){var d=u.getScaleArray(),f=u.getAnchor();o[0]=d[0]*(h[0]-f[0]),o[1]=d[1]*(h[1]/2-f[1]),c="left"}}var m=l.getText();return m?((m=m.clone()).setFont(m.getFont()||gp.getFont()),m.setScale(m.getScale()||gp.getScale()),m.setFill(m.getFill()||gp.getFill()),m.setStroke(m.getStroke()||Dk)):m=gp.clone(),m.setText(a),m.setOffsetX(o[0]),m.setOffsetY(o[1]),m.setTextAlign(c),new Li({image:u,text:m})}(_[0],m);return g.length>0?(b.setGeometry(new cg(g)),[b,new Li({geometry:_[0].getGeometry(),image:null,fill:_[0].getFill(),stroke:_[0].getStroke(),text:null})].concat(_.slice(1))):b}return _}}(u.Style,u.styleUrl,this.defaultStyle_,this.sharedStyles_,this.showPointNames_);h.setStyle(v)}return delete u.Style,h.setProperties(u,!0),h}},a.prototype.readSharedStyle_=function(o,c){var u=o.getAttribute("id");if(null!==u){var h=Rk.call(this,o,c);if(h){var d=void 0,f=o.baseURI;(!f||"about:blank"==f)&&(f=window.location.href),d=f?new URL("#"+u,f).href:"#"+u,this.sharedStyles_[d]=h}}},a.prototype.readSharedStyleMap_=function(o,c){var u=o.getAttribute("id");if(null!==u){var h=E$.call(this,o,c);if(h){var d,f=o.baseURI;(!f||"about:blank"==f)&&(f=window.location.href),d=f?new URL("#"+u,f).href:"#"+u,this.sharedStyles_[d]=h}}},a.prototype.readFeatureFromNode=function(o,c){return Xf(Rn,o.namespaceURI)&&this.readPlacemark_(o,[this.getReadOptions(o,c)])||null},a.prototype.readFeaturesFromNode=function(o,c){if(!Xf(Rn,o.namespaceURI))return[];var u,h=o.localName;if("Document"==h||"Folder"==h)return(u=this.readDocumentOrFolder_(o,[this.getReadOptions(o,c)]))||[];if("Placemark"==h){var d=this.readPlacemark_(o,[this.getReadOptions(o,c)]);return d?[d]:[]}if("kml"==h){u=[];for(var f=o.firstElementChild;f;f=f.nextElementSibling){var m=this.readFeaturesFromNode(f,c);m&&es(u,m)}return u}return[]},a.prototype.readName=function(o){if(o){if("string"==typeof o){var c=pp(o);return this.readNameFromDocument(c)}return fp(o)?this.readNameFromDocument(o):this.readNameFromNode(o)}},a.prototype.readNameFromDocument=function(o){for(var c=o.firstChild;c;c=c.nextSibling)if(c.nodeType==Node.ELEMENT_NODE){var u=this.readNameFromNode(c);if(u)return u}},a.prototype.readNameFromNode=function(o){for(var c=o.firstElementChild;c;c=c.nextElementSibling)if(Xf(Rn,c.namespaceURI)&&"name"==c.localName)return hr(c);for(c=o.firstElementChild;c;c=c.nextElementSibling){var u=c.localName;if(Xf(Rn,c.namespaceURI)&&("Document"==u||"Folder"==u||"Placemark"==u||"kml"==u)){var h=this.readNameFromNode(c);if(h)return h}}},a.prototype.readNetworkLinks=function(o){var c=[];if("string"==typeof o){var u=pp(o);es(c,this.readNetworkLinksFromDocument(u))}else fp(o)?es(c,this.readNetworkLinksFromDocument(o)):es(c,this.readNetworkLinksFromNode(o));return c},a.prototype.readNetworkLinksFromDocument=function(o){for(var c=[],u=o.firstChild;u;u=u.nextSibling)u.nodeType==Node.ELEMENT_NODE&&es(c,this.readNetworkLinksFromNode(u));return c},a.prototype.readNetworkLinksFromNode=function(o){for(var c=[],u=o.firstElementChild;u;u=u.nextElementSibling)if(Xf(Rn,u.namespaceURI)&&"NetworkLink"==u.localName){var h=gr({},GAe,u,[]);c.push(h)}for(u=o.firstElementChild;u;u=u.nextElementSibling){var d=u.localName;Xf(Rn,u.namespaceURI)&&("Document"==d||"Folder"==d||"kml"==d)&&es(c,this.readNetworkLinksFromNode(u))}return c},a.prototype.readRegion=function(o){var c=[];if("string"==typeof o){var u=pp(o);es(c,this.readRegionFromDocument(u))}else fp(o)?es(c,this.readRegionFromDocument(o)):es(c,this.readRegionFromNode(o));return c},a.prototype.readRegionFromDocument=function(o){for(var c=[],u=o.firstChild;u;u=u.nextSibling)u.nodeType==Node.ELEMENT_NODE&&es(c,this.readRegionFromNode(u));return c},a.prototype.readRegionFromNode=function(o){for(var c=[],u=o.firstElementChild;u;u=u.nextElementSibling)if(Xf(Rn,u.namespaceURI)&&"Region"==u.localName){var h=gr({},b$,u,[]);c.push(h)}for(u=o.firstElementChild;u;u=u.nextElementSibling){var d=u.localName;Xf(Rn,u.namespaceURI)&&("Document"==d||"Folder"==d||"kml"==d)&&es(c,this.readRegionFromNode(u))}return c},a.prototype.writeFeaturesNode=function(o,c){c=this.adaptOptions(c);var u=YT(Rn[4],"kml"),h="http://www.w3.org/2000/xmlns/";u.setAttributeNS(h,"xmlns:gx",Xd[0]),u.setAttributeNS(h,"xmlns:xsi",m$),u.setAttributeNS(m$,"xsi:schemaLocation","http://www.opengis.net/kml/2.2 https://developers.google.com/kml/schema/kml22gx.xsd");var d={node:u},f={};o.length>1?f.Document=o:1==o.length&&(f.Placemark=o[0]);var m=HAe[u.namespaceURI],g=Mu(f,m);return Us(d,jAe,Fc,g,[c],m,this),u},a}(FAe);function S$(l,a,o){return Array.isArray(l)?l:"string"==typeof l?S$(o[l],a,o):a}function yD(l){var a=Ah(l,!1),o=/^\s*#?\s*([0-9A-Fa-f]{8})\s*$/.exec(a);if(o){var c=o[1];return[parseInt(c.substr(6,2),16),parseInt(c.substr(4,2),16),parseInt(c.substr(2,2),16),parseInt(c.substr(0,2),16)/255]}}function T$(l){var a=Ah(l,!1),o=[];a=a.replace(/\s*,\s*/g,",");for(var u,c=/^\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?),([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)(?:\s+|,|$)(?:([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)(?:\s+|$))?\s*/i;u=c.exec(a);){var h=parseFloat(u[1]),d=parseFloat(u[2]),f=u[3]?parseFloat(u[3]):0;o.push(h,d,f),a=a.substr(u[0].length)}if(""===a)return o}function w$(l){var a=Ah(l,!1).trim(),o=l.baseURI;return(!o||"about:blank"==o)&&(o=window.location.href),o?new URL(a,o).href:a}function C$(l){var a=Ah(l,!1).trim().replace(/^(?!.*#)/,"#"),o=l.baseURI;return(!o||"about:blank"==o)&&(o=window.location.href),o?new URL(a,o).href:a}function x$(l){return Ss(l)}var KAe=dn(Rn,{Pair:function(l,a){var o=gr({},bIe,l,a,this);if(o){var c=o.key;if(c&&"normal"==c){var u=o.styleUrl;u&&(a[a.length-1]=u);var h=o.Style;h&&(a[a.length-1]=h)}}}});function E$(l,a){return gr(void 0,KAe,l,a,this)}var JAe=dn(Rn,{Icon:ft(function(l,a){return gr({},hIe,l,a)||null}),color:ft(yD),heading:ft(Ss),hotSpot:ft(function(l){var c,a=l.getAttribute("xunits"),o=l.getAttribute("yunits");return c="insetPixels"!==a?"insetPixels"!==o?"bottom-left":"top-left":"insetPixels"!==o?"bottom-right":"top-right",{x:parseFloat(l.getAttribute("x")),xunits:_$[a],y:parseFloat(l.getAttribute("y")),yunits:_$[o],origin:c}}),scale:ft(x$)}),eIe=dn(Rn,{color:ft(yD),scale:ft(x$)}),nIe=dn(Rn,{color:ft(yD),width:ft(Ss)}),iIe=dn(Rn,{color:ft(yD),fill:ft(mp),outline:ft(mp)}),oIe=dn(Rn,{coordinates:Ck(T$)});function M$(l,a){return gr(null,oIe,l,a)}var lIe=dn(Xd,{Track:Ih(D$)}),uIe=dn(Rn,{when:function(l,a){var c=a[a.length-1].whens,u=Ah(l,!1),h=Date.parse(u);c.push(isNaN(h)?0:h)}},dn(Xd,{coord:function(l,a){var c=a[a.length-1].coordinates,u=Ah(l,!1),d=/^\s*([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s+([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s+([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s*$/i.exec(u);if(d){var f=parseFloat(d[1]),m=parseFloat(d[2]),g=parseFloat(d[3]);c.push([f,m,g])}else c.push([])}}));function D$(l,a){var o=gr({coordinates:[],whens:[]},uIe,l,a);if(o){for(var c=[],u=o.coordinates,h=o.whens,d=0,f=Math.min(u.length,h.length);d<f;++d)3==u[d].length&&c.push(u[d][0],u[d][1],u[d][2],h[d]);return new zd(c,"XYZM")}}var hIe=dn(Rn,{href:ft(w$)},dn(Xd,{x:ft(Ss),y:ft(Ss),w:ft(Ss),h:ft(Ss)})),fIe=dn(Rn,{coordinates:Ck(T$)});function Ik(l,a){return gr(null,fIe,l,a)}var vD=dn(Rn,{extrude:ft(mp),tessellate:ft(mp),altitudeMode:ft(hr)});function A$(l,a){var o=gr({},vD,l,a),c=Ik(l,a);if(c){var u=new zd(c,"XYZ");return u.setProperties(o,!0),u}}function I$(l,a){var o=gr({},vD,l,a),c=Ik(l,a);if(c){var u=new Ch(c,"XYZ",[c.length]);return u.setProperties(o,!0),u}}var pIe=dn(Rn,{LineString:Ih(A$),LinearRing:Ih(I$),MultiGeometry:Ih(R$),Point:Ih(P$),Polygon:Ih(L$)});function R$(l,a){var o=gr([],pIe,l,a);if(!o)return null;if(0===o.length)return new cg(o);for(var c,u=!0,h=o[0].getType(),f=1,m=o.length;f<m;++f)if(o[f].getType()!=h){u=!1;break}if(u){var g=void 0,y=void 0;if("Point"==h){var v=o[0];for(g=v.getLayout(),y=v.getFlatCoordinates(),f=1,m=o.length;f<m;++f)es(y,o[f].getFlatCoordinates());Pk(c=new AT(y,g),o)}else"LineString"==h?Pk(c=new DT(o),o):"Polygon"==h?Pk(c=new TM(o),o):"GeometryCollection"==h?c=new cg(o):Yn(!1,37)}else c=new cg(o);return c}function P$(l,a){var o=gr({},vD,l,a),c=Ik(l,a);if(c){var u=new wh(c,"XYZ");return u.setProperties(o,!0),u}}var mIe=dn(Rn,{innerBoundaryIs:function(l,a){var o=gr([],IIe,l,a);if(o.length>0){var c=a[a.length-1];c.push.apply(c,o)}},outerBoundaryIs:function(l,a){var o=gr(void 0,PIe,l,a);o&&(a[a.length-1][0]=o)}});function L$(l,a){var o=gr({},vD,l,a),c=gr([null],mIe,l,a);if(c&&c[0]){for(var u=c[0],h=[u.length],d=1,f=c.length;d<f;++d)es(u,c[d]),h.push(u.length);var m=new Ch(u,"XYZ",h);return m.setProperties(o,!0),m}}var gIe=dn(Rn,{IconStyle:function(l,a){var o=gr({},JAe,l,a);if(o){var d,c=a[a.length-1],u="Icon"in o?o.Icon:{},h=!("Icon"in o)||Object.keys(u).length>0,f=u.href;f?d=f:h&&(d=hD);var m,g,y,v="bottom-left",_=o.hotSpot;_?(m=[_.x,_.y],g=_.xunits,y=_.yunits,v=_.origin):/^http:\/\/maps\.(?:google|gstatic)\.com\//.test(d)&&(/pushpin/.test(d)?(m=Ek,g=KT,y=JT):/arrow-reverse/.test(d)?(m=[54,42],g=KT,y=JT):/paddle/.test(d)&&(m=[32,1],g=KT,y=JT));var b,w=u.x,C=u.y;void 0!==w&&void 0!==C&&(b=[w,C]);var E,M=u.w,x=u.h;void 0!==M&&void 0!==x&&(E=[M,x]);var R,P=o.heading;void 0!==P&&(R=uT(P));var W=o.color;if(h){d==hD&&(E=QT);var U=new MT({anchor:m,anchorOrigin:v,anchorXUnits:g,anchorYUnits:y,crossOrigin:this.crossOrigin_,offset:b,offsetOrigin:"bottom-left",rotation:R,scale:o.scale,size:E,src:this.iconUrlFunction_(d),color:W}),K=U.getScaleArray()[0],Q=U.getSize();if(null===Q){var se=U.getImageState();if(0===se||1===se){var te=function(){var de=U.getImageState();if(0!==de&&1!==de){var ye=U.getSize();if(ye&&2==ye.length){var _e=mD(ye);U.setScale(K*_e)}U.unlistenImageChange(te)}};U.listenImageChange(te),0===se&&U.load()}}else if(2==Q.length){var De=mD(Q);U.setScale(K*De)}c.imageStyle=U}else c.imageStyle=Mk}},LabelStyle:function(l,a){var o=gr({},eIe,l,a);if(o){var c=a[a.length-1],u=new op({fill:new Pi({color:"color"in o?o.color:M_}),scale:o.scale});c.textStyle=u}},LineStyle:function(l,a){var o=gr({},nIe,l,a);if(o){var c=a[a.length-1],u=new Bs({color:"color"in o?o.color:M_,width:"width"in o?o.width:1});c.strokeStyle=u}},PolyStyle:function(l,a){var o=gr({},iIe,l,a);if(o){var c=a[a.length-1],u=new Pi({color:"color"in o?o.color:M_});c.fillStyle=u;var h=o.fill;void 0!==h&&(c.fill=h);var d=o.outline;void 0!==d&&(c.outline=d)}}});function Rk(l,a){var o=gr({},gIe,l,a,this);if(!o)return null;var h,c="fillStyle"in o?o.fillStyle:ZT,u=o.fill;void 0!==u&&!u&&(c=null),"imageStyle"in o?o.imageStyle!=Mk&&(h=o.imageStyle):h=dD;var d="textStyle"in o?o.textStyle:gp,f="strokeStyle"in o?o.strokeStyle:fD,m=o.outline;return void 0===m||m?[new Li({fill:c,image:h,stroke:f,text:d,zIndex:void 0})]:[new Li({geometry:function(g){var y=g.getGeometry(),v=y.getType();return"GeometryCollection"===v?new cg(y.getGeometriesArrayRecursive().filter(function(b){var w=b.getType();return"Polygon"!==w&&"MultiPolygon"!==w})):"Polygon"!==v&&"MultiPolygon"!==v?y:void 0},fill:c,image:h,stroke:f,text:d,zIndex:void 0}),new Li({geometry:function(g){var y=g.getGeometry(),v=y.getType();return"GeometryCollection"===v?new cg(y.getGeometriesArrayRecursive().filter(function(b){var w=b.getType();return"Polygon"===w||"MultiPolygon"===w})):"Polygon"===v||"MultiPolygon"===v?y:void 0},fill:c,stroke:null,zIndex:void 0})]}function Pk(l,a){var d,f,m,o=a.length,c=new Array(a.length),u=new Array(a.length),h=new Array(a.length);d=!1,f=!1,m=!1;for(var g=0;g<o;++g){var y=a[g];c[g]=y.get("extrude"),u[g]=y.get("tessellate"),h[g]=y.get("altitudeMode"),d=d||void 0!==c[g],f=f||void 0!==u[g],m=m||h[g]}d&&l.set("extrude",c),f&&l.set("tessellate",u),m&&l.set("altitudeMode",h)}var yIe=dn(Rn,{displayName:ft(hr),value:ft(hr)}),_Ie=dn(Rn,{Data:function(l,a){var o=l.getAttribute("name");x_(yIe,l,a);var c=a[a.length-1];o&&c.displayName?c[o]={value:c.value,displayName:c.displayName,toString:function(){return c.value}}:null!==o?c[o]=c.value:null!==c.displayName&&(c[c.displayName]=c.value),delete c.value},SchemaData:function(l,a){x_(wIe,l,a)}});function O$(l,a){x_(_Ie,l,a)}function N$(l,a){x_(b$,l,a)}var bIe=dn(Rn,{Style:ft(Rk),key:ft(hr),styleUrl:ft(C$)}),wIe=dn(Rn,{SimpleData:function(l,a){var o=l.getAttribute("name");if(null!==o){var c=hr(l);a[a.length-1][o]=c}}}),EIe=dn(Rn,{altitudeMode:ft(hr),minAltitude:ft(Ss),maxAltitude:ft(Ss),north:ft(Ss),south:ft(Ss),east:ft(Ss),west:ft(Ss)}),DIe=dn(Rn,{minLodPixels:ft(Ss),maxLodPixels:ft(Ss),minFadeExtent:ft(Ss),maxFadeExtent:ft(Ss)}),IIe=dn(Rn,{LinearRing:Ih(M$)}),PIe=dn(Rn,{LinearRing:Ck(M$)});function _D(l,a){for(var o=uN(a),u=[255*(4==o.length?o[3]:1),o[2],o[1],o[0]],h=0;h<4;++h){var d=Math.floor(u[h]).toString(16);u[h]=1==d.length?"0"+d:d}Du(l,u.join(""))}var bD=dn(Rn,{Data:Hn(function(l,a,o){l.setAttribute("name",a.name);var c={node:l},u=a.value;"object"==typeof u?(null!==u&&u.displayName&&Us(c,bD,Fc,[u.displayName],o,["displayName"]),null!==u&&u.value&&Us(c,bD,Fc,[u.value],o,["value"])):Us(c,bD,Fc,[u],o,["value"])}),value:Hn(function(l,a){Du(l,a)}),displayName:Hn(function(l,a){!function(l,a){l.appendChild(cD().createCDATASection(a))}(l,a)})}),UIe=dn(Rn,{Placemark:Hn(G$)}),GIe=function(l,a,o){return YT(a[a.length-1].node.namespaceURI,"Placemark")},HIe=Rh("Data"),F$=dn(Rn,["href"],dn(Xd,["x","y","w","h"])),k$=dn(Rn,{href:Hn(Du)},dn(Xd,{x:Hn(gg),y:Hn(gg),w:Hn(gg),h:Hn(gg)})),WIe=function(l,a,o){return YT(Xd[0],"gx:"+o)},XIe=dn(Rn,["scale","heading","Icon","color","hotSpot"]),$Ie=dn(Rn,{Icon:Hn(function(l,a,o){var c={node:l},h=F$[o[o.length-1].node.namespaceURI],d=Mu(a,h);Us(c,k$,Fc,d,o,h),d=Mu(a,h=F$[Xd[0]]),Us(c,k$,WIe,d,o,h)}),color:Hn(_D),heading:Hn(gg),hotSpot:Hn(function(l,a){l.setAttribute("x",String(a.x)),l.setAttribute("y",String(a.y)),l.setAttribute("xunits",a.xunits),l.setAttribute("yunits",a.yunits)}),scale:Hn(j$)}),ZIe=dn(Rn,["color","scale"]),KIe=dn(Rn,{color:Hn(_D),scale:Hn(j$)}),QIe=dn(Rn,["color","width"]),eRe=dn(Rn,{color:Hn(_D),width:Hn(gg)}),nRe={Point:"Point",LineString:"LineString",LinearRing:"LinearRing",Polygon:"Polygon",MultiPoint:"MultiGeometry",MultiLineString:"MultiGeometry",MultiPolygon:"MultiGeometry",GeometryCollection:"MultiGeometry"},V$=function(l,a,o){if(l)return YT(a[a.length-1].node.namespaceURI,nRe[l.getType()])},rRe=Rh("Point"),iRe=Rh("LineString"),sRe=Rh("LinearRing"),oRe=Rh("Polygon"),aRe=dn(Rn,{LineString:Hn(D_),Point:Hn(D_),Polygon:Hn(H$),GeometryCollection:Hn(B$)});function B$(l,a,o){var d,c={node:l},u=a.getType(),h=[];"GeometryCollection"===u?(a.getGeometriesArrayRecursive().forEach(function(f){var m=f.getType();"MultiPoint"===m?h=h.concat(f.getPoints()):"MultiLineString"===m?h=h.concat(f.getLineStrings()):"MultiPolygon"===m?h=h.concat(f.getPolygons()):"Point"===m||"LineString"===m||"Polygon"===m?h.push(f):Yn(!1,39)}),d=V$):"MultiPoint"===u?(h=a.getPoints(),d=rRe):"MultiLineString"===u?(h=a.getLineStrings(),d=iRe):"MultiPolygon"===u?(h=a.getPolygons(),d=oRe):Yn(!1,39),Us(c,aRe,d,h,o)}var lRe=dn(Rn,{LinearRing:Hn(D_)});function U$(l,a,o){Us({node:l},lRe,sRe,[a],o)}var Lk=dn(Rn,{ExtendedData:Hn(function(l,a,o){for(var c={node:l},u=a.names,h=a.values,d=u.length,f=0;f<d;f++)Us(c,bD,HIe,[{name:u[f],value:h[f]}],o)}),MultiGeometry:Hn(B$),LineString:Hn(D_),LinearRing:Hn(D_),Point:Hn(D_),Polygon:Hn(H$),Style:Hn(function(l,a,o){var f,c={node:l},u={};if(a.pointStyles.length){var h=a.pointStyles[0].getText();h&&(u.LabelStyle=h);var d=a.pointStyles[0].getImage();d&&"function"==typeof d.getSrc&&(u.IconStyle=d)}(a.lineStyles.length&&(f=a.lineStyles[0].getStroke())&&(u.LineStyle=f),a.polyStyles.length)&&((f=a.polyStyles[0].getStroke())&&!u.LineStyle&&(u.LineStyle=f),u.PolyStyle=a.polyStyles[0]);var g=vRe[o[o.length-1].node.namespaceURI],y=Mu(u,g);Us(c,_Re,Fc,y,o,g)}),address:Hn(Du),description:Hn(Du),name:Hn(Du),open:Hn(E_),phoneNumber:Hn(Du),styleUrl:Hn(Du),visibility:Hn(E_)}),cRe=dn(Rn,["name","open","visibility","address","phoneNumber","description","styleUrl","Style"]),uRe=Rh("ExtendedData");function G$(l,a,o){var c={node:l};a.getId()&&l.setAttribute("id",a.getId());var u=a.getProperties(),h={address:1,description:1,name:1,open:1,phoneNumber:1,styleUrl:1,visibility:1};h[a.getGeometryName()]=1;var d=Object.keys(u||{}).sort().filter(function(k){return!h[k]}),f=a.getStyleFunction();if(f){var m=f(a,0);if(m){var g=Array.isArray(m)?m:[m],y=g;if(a.getGeometry()&&(y=g.filter(function(k){var W=k.getGeometryFunction()(a);if(W){var U=W.getType();return"GeometryCollection"===U?W.getGeometriesArrayRecursive().filter(function(K){var Q=K.getType();return"Point"===Q||"MultiPoint"===Q}).length:"Point"===U||"MultiPoint"===U}})),this.writeStyles_){var v=g,_=g;a.getGeometry()&&(v=g.filter(function(k){var W=k.getGeometryFunction()(a);if(W){var U=W.getType();return"GeometryCollection"===U?W.getGeometriesArrayRecursive().filter(function(K){var Q=K.getType();return"LineString"===Q||"MultiLineString"===Q}).length:"LineString"===U||"MultiLineString"===U}}),_=g.filter(function(k){var W=k.getGeometryFunction()(a);if(W){var U=W.getType();return"GeometryCollection"===U?W.getGeometriesArrayRecursive().filter(function(K){var Q=K.getType();return"Polygon"===Q||"MultiPolygon"===Q}).length:"Polygon"===U||"MultiPolygon"===U}})),u.Style={pointStyles:y,lineStyles:v,polyStyles:_}}if(y.length&&void 0===u.name){var b=y[0].getText();b&&(u.name=b.getText())}}}var C=cRe[o[o.length-1].node.namespaceURI],E=Mu(u,C);if(Us(c,Lk,Fc,E,o,C),d.length>0){var M=Mu(u,d);Us(c,Lk,uRe,[{names:d,values:M}],o)}var R=o[0],P=a.getGeometry();P&&(P=h_(P,!0,R)),Us(c,Lk,V$,[P],o)}var hRe=dn(Rn,["extrude","tessellate","altitudeMode","coordinates"]),dRe=dn(Rn,{extrude:Hn(E_),tessellate:Hn(E_),altitudeMode:Hn(Du),coordinates:Hn(function(l,a,o){var d,c=o[o.length-1],u=c.layout,h=c.stride;"XY"==u||"XYM"==u?d=2:"XYZ"==u||"XYZM"==u?d=3:Yn(!1,34);var f=a.length,m="";if(f>0){m+=a[0];for(var g=1;g<d;++g)m+=","+a[g];for(var y=h;y<f;y+=h)for(m+=" "+a[y],g=1;g<d;++g)m+=","+a[y+g]}Du(l,m)})});function D_(l,a,o){var c=a.getFlatCoordinates(),u={node:l};u.layout=a.getLayout(),u.stride=a.getStride();var h=a.getProperties();h.coordinates=c;var f=hRe[o[o.length-1].node.namespaceURI],m=Mu(h,f);Us(u,dRe,Fc,m,o,f)}var fRe=dn(Rn,["color","fill","outline"]),z$=dn(Rn,{outerBoundaryIs:Hn(U$),innerBoundaryIs:Hn(U$)}),pRe=Rh("innerBoundaryIs"),mRe=Rh("outerBoundaryIs");function H$(l,a,o){var c=a.getLinearRings(),u=c.shift(),h={node:l};Us(h,z$,pRe,c,o),Us(h,z$,mRe,[u],o)}var gRe=dn(Rn,{color:Hn(_D),fill:Hn(E_),outline:Hn(E_)});function j$(l,a){gg(l,Math.round(1e6*a)/1e6)}var vRe=dn(Rn,["IconStyle","LabelStyle","LineStyle","PolyStyle"]),_Re=dn(Rn,{IconStyle:Hn(function(l,a,o){var c={node:l},u={},h=a.getSrc(),d=a.getSize(),f=a.getImageSize(),m={href:h};if(d){m.w=d[0],m.h=d[1];var g=a.getAnchor(),y=a.getOrigin();y&&f&&0!==y[0]&&y[1]!==d[1]&&(m.x=y[0],m.y=f[1]-(y[1]+d[1])),!g||g[0]===d[0]/2&&g[1]===d[1]/2||(u.hotSpot={x:g[0],xunits:"pixels",y:d[1]-g[1],yunits:"pixels"})}u.Icon=m;var _=a.getScaleArray()[0],b=d;null===b&&(b=QT),2==b.length&&(_/=mD(b)),1!==_&&(u.scale=_);var C=a.getRotation();0!==C&&(u.heading=C);var E=a.getColor();E&&(u.color=E);var x=XIe[o[o.length-1].node.namespaceURI],R=Mu(u,x);Us(c,$Ie,Fc,R,o,x)}),LabelStyle:Hn(function(l,a,o){var c={node:l},u={},h=a.getFill();h&&(u.color=h.getColor());var d=a.getScale();d&&1!==d&&(u.scale=d);var m=ZIe[o[o.length-1].node.namespaceURI],g=Mu(u,m);Us(c,KIe,Fc,g,o,m)}),LineStyle:Hn(function(l,a,o){var c={node:l},u={color:a.getColor(),width:Number(a.getWidth())||1},d=QIe[o[o.length-1].node.namespaceURI],f=Mu(u,d);Us(c,eRe,Fc,f,o,d)}),PolyStyle:Hn(function(l,a,o){var c={node:l},u=a.getFill(),h=a.getStroke(),d={color:u?u.getColor():void 0,fill:!!u&&void 0,outline:!!h&&void 0},m=fRe[o[o.length-1].node.namespaceURI],g=Mu(d,m);Us(c,gRe,Fc,g,o,m)})});const SD=XAe;function W$(l){var c,u,a=Object.keys(l.defs),o=a.length;for(c=0;c<o;++c){var h=a[c];if(!Bn(h)){var d=l.defs(h),f=d.units;!f&&"longlat"===d.projName&&(f=vl.DEGREES),iW(new eg({code:h,axisOrientation:d.axis,metersPerUnit:d.to_meter,units:f}))}}for(c=0;c<o;++c){var m=a[c],g=Bn(m);for(u=0;u<o;++u){var y=a[u],v=Bn(y);if(!rW(m,y))if(l.defs[m]===l.defs[y])EN([g,v]);else{var _=l(m,y);WSe(g,v,oW(g,v,_.forward),oW(v,g,_.inverse))}}}}var X$=.0066943799901413165,e1=484813681109536e-20,Nt=Math.PI/2,cn=1e-10,na=.017453292519943295,Ph=57.29577951308232,Ti=Math.PI/4,t1=2*Math.PI,Gs=3.14159265359,Sl={greenwich:0,lisbon:-9.131906111111,paris:2.337229166667,bogota:-74.080916666667,madrid:-3.687938888889,rome:12.452333333333,bern:7.439583333333,jakarta:106.807719444444,ferro:-17.666666666667,brussels:4.367975,stockholm:18.058277777778,athens:23.7163375,oslo:10.722916666667};const DRe={ft:{to_meter:.3048},"us-ft":{to_meter:1200/3937}};var $$=/[\s_\-\/\(\)]/g;function yp(l,a){if(l[a])return l[a];for(var h,o=Object.keys(l),c=a.toLowerCase().replace($$,""),u=-1;++u<o.length;)if((h=o[u]).toLowerCase().replace($$,"")===c)return l[h]}function Nk(l){var c,u,h,a={},o=l.split("+").map(function(f){return f.trim()}).filter(function(f){return f}).reduce(function(f,m){var g=m.split("=");return g.push(!0),f[g[0].toLowerCase()]=g[1],f},{}),d={proj:"projName",datum:"datumCode",rf:function(f){a.rf=parseFloat(f)},lat_0:function(f){a.lat0=f*na},lat_1:function(f){a.lat1=f*na},lat_2:function(f){a.lat2=f*na},lat_ts:function(f){a.lat_ts=f*na},lon_0:function(f){a.long0=f*na},lon_1:function(f){a.long1=f*na},lon_2:function(f){a.long2=f*na},alpha:function(f){a.alpha=parseFloat(f)*na},gamma:function(f){a.rectified_grid_angle=parseFloat(f)},lonc:function(f){a.longc=f*na},x_0:function(f){a.x0=parseFloat(f)},y_0:function(f){a.y0=parseFloat(f)},k_0:function(f){a.k0=parseFloat(f)},k:function(f){a.k0=parseFloat(f)},a:function(f){a.a=parseFloat(f)},b:function(f){a.b=parseFloat(f)},r_a:function(){a.R_A=!0},zone:function(f){a.zone=parseInt(f,10)},south:function(){a.utmSouth=!0},towgs84:function(f){a.datum_params=f.split(",").map(function(m){return parseFloat(m)})},to_meter:function(f){a.to_meter=parseFloat(f)},units:function(f){a.units=f;var m=yp(DRe,f);m&&(a.to_meter=m.to_meter)},from_greenwich:function(f){a.from_greenwich=f*na},pm:function(f){var m=yp(Sl,f);a.from_greenwich=(m||parseFloat(f))*na},nadgrids:function(f){"@null"===f?a.datumCode="none":a.nadgrids=f},axis:function(f){var m="ewnsud";3===f.length&&-1!==m.indexOf(f.substr(0,1))&&-1!==m.indexOf(f.substr(1,1))&&-1!==m.indexOf(f.substr(2,1))&&(a.axis=f)},approx:function(){a.approx=!0}};for(c in o)u=o[c],c in d?"function"==typeof(h=d[c])?h(u):a[h]=u:a[c]=u;return"string"==typeof a.datumCode&&"WGS84"!==a.datumCode&&(a.datumCode=a.datumCode.toLowerCase()),a}var IRe=/\s/,RRe=/[A-Za-z]/,PRe=/[A-Za-z84]/,CD=/[,\]]/,J$=/[\d\.E\-\+]/;function $d(l){if("string"!=typeof l)throw new Error("not a string");this.text=l.trim(),this.level=0,this.place=0,this.root=null,this.stack=[],this.currentObject=null,this.state=1}function Q$(l,a,o){Array.isArray(a)&&(o.unshift(a),a=null);var u=o.reduce(function(h,d){return A_(d,h),h},a?{}:l);a&&(l[a]=u)}function A_(l,a){if(Array.isArray(l)){var o=l.shift();if("PARAMETER"===o&&(o=l.shift()),1===l.length)return Array.isArray(l[0])?(a[o]={},void A_(l[0],a[o])):void(a[o]=l[0]);if(l.length)if("TOWGS84"!==o){if("AXIS"===o)return o in a||(a[o]=[]),void a[o].push(l);var c;switch(Array.isArray(o)||(a[o]={}),o){case"UNIT":case"PRIMEM":case"VERT_DATUM":return a[o]={name:l[0].toLowerCase(),convert:l[1]},void(3===l.length&&A_(l[2],a[o]));case"SPHEROID":case"ELLIPSOID":return a[o]={name:l[0],a:l[1],rf:l[2]},void(4===l.length&&A_(l[3],a[o]));case"PROJECTEDCRS":case"PROJCRS":case"GEOGCS":case"GEOCCS":case"PROJCS":case"LOCAL_CS":case"GEODCRS":case"GEODETICCRS":case"GEODETICDATUM":case"EDATUM":case"ENGINEERINGDATUM":case"VERT_CS":case"VERTCRS":case"VERTICALCRS":case"COMPD_CS":case"COMPOUNDCRS":case"ENGINEERINGCRS":case"ENGCRS":case"FITTED_CS":case"LOCAL_DATUM":case"DATUM":return l[0]=["name",l[0]],void Q$(a,o,l);default:for(c=-1;++c<l.length;)if(!Array.isArray(l[c]))return A_(l,a[o]);return Q$(a,o,l)}}else a[o]=l;else a[o]=!0}else a[l]=!0}function Yd(l){return.017453292519943295*l}function eY(l){var a=function(l){return new $d(l).output()}(l),o=a.shift(),c=a.shift();a.unshift(["name",c]),a.unshift(["type",o]);var u={};return A_(a,u),function(l){if("GEOGCS"===l.type?l.projName="longlat":"LOCAL_CS"===l.type?(l.projName="identity",l.local=!0):l.projName="object"==typeof l.PROJECTION?Object.keys(l.PROJECTION)[0]:l.PROJECTION,l.AXIS){for(var a="",o=0,c=l.AXIS.length;o<c;++o){var u=[l.AXIS[o][0].toLowerCase(),l.AXIS[o][1].toLowerCase()];-1!==u[0].indexOf("north")||("y"===u[0]||"lat"===u[0])&&"north"===u[1]?a+="n":-1!==u[0].indexOf("south")||("y"===u[0]||"lat"===u[0])&&"south"===u[1]?a+="s":-1!==u[0].indexOf("east")||("x"===u[0]||"lon"===u[0])&&"east"===u[1]?a+="e":(-1!==u[0].indexOf("west")||("x"===u[0]||"lon"===u[0])&&"west"===u[1])&&(a+="w")}2===a.length&&(a+="u"),3===a.length&&(l.axis=a)}l.UNIT&&(l.units=l.UNIT.name.toLowerCase(),"metre"===l.units&&(l.units="meter"),l.UNIT.convert&&("GEOGCS"===l.type?l.DATUM&&l.DATUM.SPHEROID&&(l.to_meter=l.UNIT.convert*l.DATUM.SPHEROID.a):l.to_meter=l.UNIT.convert));var h=l.GEOGCS;function d(g){return g*(l.to_meter||1)}"GEOGCS"===l.type&&(h=l),h&&(l.datumCode=h.DATUM?h.DATUM.name.toLowerCase():h.name.toLowerCase(),"d_"===l.datumCode.slice(0,2)&&(l.datumCode=l.datumCode.slice(2)),("new_zealand_geodetic_datum_1949"===l.datumCode||"new_zealand_1949"===l.datumCode)&&(l.datumCode="nzgd49"),("wgs_1984"===l.datumCode||"world_geodetic_system_1984"===l.datumCode)&&("Mercator_Auxiliary_Sphere"===l.PROJECTION&&(l.sphere=!0),l.datumCode="wgs84"),"_ferro"===l.datumCode.slice(-6)&&(l.datumCode=l.datumCode.slice(0,-6)),"_jakarta"===l.datumCode.slice(-8)&&(l.datumCode=l.datumCode.slice(0,-8)),~l.datumCode.indexOf("belge")&&(l.datumCode="rnb72"),h.DATUM&&h.DATUM.SPHEROID&&(l.ellps=h.DATUM.SPHEROID.name.replace("_19","").replace(/[Cc]larke\_18/,"clrk"),"international"===l.ellps.toLowerCase().slice(0,13)&&(l.ellps="intl"),l.a=h.DATUM.SPHEROID.a,l.rf=parseFloat(h.DATUM.SPHEROID.rf,10)),h.DATUM&&h.DATUM.TOWGS84&&(l.datum_params=h.DATUM.TOWGS84),~l.datumCode.indexOf("osgb_1936")&&(l.datumCode="osgb36"),~l.datumCode.indexOf("osni_1952")&&(l.datumCode="osni52"),(~l.datumCode.indexOf("tm65")||~l.datumCode.indexOf("geodetic_datum_of_1965"))&&(l.datumCode="ire65"),"ch1903+"===l.datumCode&&(l.datumCode="ch1903"),~l.datumCode.indexOf("israel")&&(l.datumCode="isr93")),l.b&&!isFinite(l.b)&&(l.b=l.a),[["standard_parallel_1","Standard_Parallel_1"],["standard_parallel_1","Latitude of 1st standard parallel"],["standard_parallel_2","Standard_Parallel_2"],["standard_parallel_2","Latitude of 2nd standard parallel"],["false_easting","False_Easting"],["false_easting","False easting"],["false-easting","Easting at false origin"],["false_northing","False_Northing"],["false_northing","False northing"],["false_northing","Northing at false origin"],["central_meridian","Central_Meridian"],["central_meridian","Longitude of natural origin"],["central_meridian","Longitude of false origin"],["latitude_of_origin","Latitude_Of_Origin"],["latitude_of_origin","Central_Parallel"],["latitude_of_origin","Latitude of natural origin"],["latitude_of_origin","Latitude of false origin"],["scale_factor","Scale_Factor"],["k0","scale_factor"],["latitude_of_center","Latitude_Of_Center"],["latitude_of_center","Latitude_of_center"],["lat0","latitude_of_center",Yd],["longitude_of_center","Longitude_Of_Center"],["longitude_of_center","Longitude_of_center"],["longc","longitude_of_center",Yd],["x0","false_easting",d],["y0","false_northing",d],["long0","central_meridian",Yd],["lat0","latitude_of_origin",Yd],["lat0","standard_parallel_1",Yd],["lat1","standard_parallel_1",Yd],["lat2","standard_parallel_2",Yd],["azimuth","Azimuth"],["alpha","azimuth",Yd],["srsCode","name"]].forEach(function(g){return function(l,a){var o=a[0],c=a[1];!(o in l)&&c in l&&(l[o]=l[c],3===a.length&&(l[o]=a[2](l[o])))}(l,g)}),!l.long0&&l.longc&&("Albers_Conic_Equal_Area"===l.projName||"Lambert_Azimuthal_Equal_Area"===l.projName)&&(l.long0=l.longc),!l.lat_ts&&l.lat1&&("Stereographic_South_Pole"===l.projName||"Polar Stereographic (variant B)"===l.projName)&&(l.lat0=Yd(l.lat1>0?90:-90),l.lat_ts=l.lat1)}(u),u}function kc(l){var a=this;if(2===arguments.length){var o=arguments[1];kc[l]="string"==typeof o?"+"===o.charAt(0)?Nk(arguments[1]):eY(arguments[1]):o}else if(1===arguments.length){if(Array.isArray(l))return l.map(function(c){Array.isArray(c)?kc.apply(a,c):kc(c)});if("string"==typeof l){if(l in kc)return kc[l]}else"EPSG"in l?kc["EPSG:"+l.EPSG]=l:"ESRI"in l?kc["ESRI:"+l.ESRI]=l:"IAU2000"in l?kc["IAU2000:"+l.IAU2000]=l:console.log(l);return}}$d.prototype.readCharicter=function(){var l=this.text[this.place++];if(4!==this.state)for(;IRe.test(l);){if(this.place>=this.text.length)return;l=this.text[this.place++]}switch(this.state){case 1:return this.neutral(l);case 2:return this.keyword(l);case 4:return this.quoted(l);case 5:return this.afterquote(l);case 3:return this.number(l);case-1:return}},$d.prototype.afterquote=function(l){if('"'===l)return this.word+='"',void(this.state=4);if(CD.test(l))return this.word=this.word.trim(),void this.afterItem(l);throw new Error("havn't handled \""+l+'" in afterquote yet, index '+this.place)},$d.prototype.afterItem=function(l){return","===l?(null!==this.word&&this.currentObject.push(this.word),this.word=null,void(this.state=1)):"]"===l?(this.level--,null!==this.word&&(this.currentObject.push(this.word),this.word=null),this.state=1,this.currentObject=this.stack.pop(),void(this.currentObject||(this.state=-1))):void 0},$d.prototype.number=function(l){if(!J$.test(l)){if(CD.test(l))return this.word=parseFloat(this.word),void this.afterItem(l);throw new Error("havn't handled \""+l+'" in number yet, index '+this.place)}this.word+=l},$d.prototype.quoted=function(l){'"'!==l?this.word+=l:this.state=5},$d.prototype.keyword=function(l){if(PRe.test(l))this.word+=l;else{if("["===l){var a=[];return a.push(this.word),this.level++,null===this.root?this.root=a:this.currentObject.push(a),this.stack.push(this.currentObject),this.currentObject=a,void(this.state=1)}if(!CD.test(l))throw new Error("havn't handled \""+l+'" in keyword yet, index '+this.place);this.afterItem(l)}},$d.prototype.neutral=function(l){if(RRe.test(l))return this.word=l,void(this.state=2);if('"'===l)return this.word="",void(this.state=4);if(J$.test(l))return this.word=l,void(this.state=3);if(!CD.test(l))throw new Error("havn't handled \""+l+'" in neutral yet, index '+this.place);this.afterItem(l)},$d.prototype.output=function(){for(;this.place<this.text.length;)this.readCharicter();if(-1===this.state)return this.root;throw new Error('unable to parse string "'+this.text+'". State is '+this.state)},function(l){l("EPSG:4326","+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees"),l("EPSG:4269","+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees"),l("EPSG:3857","+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs"),l.WGS84=l["EPSG:4326"],l["EPSG:3785"]=l["EPSG:3857"],l.GOOGLE=l["EPSG:3857"],l["EPSG:900913"]=l["EPSG:3857"],l["EPSG:102113"]=l["EPSG:3857"]}(kc);const xD=kc;var BRe=["PROJECTEDCRS","PROJCRS","GEOGCS","GEOCCS","PROJCS","LOCAL_CS","GEODCRS","GEODETICCRS","GEODETICDATUM","ENGCRS","ENGINEERINGCRS"],GRe=["3857","900913","3785","102113"];function tY(l,a){var o,c;if(l=l||{},!a)return l;for(c in a)void 0!==(o=a[c])&&(l[c]=o);return l}function Lh(l,a,o){var c=l*a;return o/Math.sqrt(1-c*c)}function r1(l){return l<0?-1:1}function yn(l){return Math.abs(l)<=Gs?l:l-r1(l)*t1}function Au(l,a,o){var c=l*o;return c=Math.pow((1-c)/(1+c),.5*l),Math.tan(.5*(Nt-a))/c}function s1(l,a){for(var c,u,o=.5*l,h=Nt-2*Math.atan(a),d=0;d<=15;d++)if(c=l*Math.sin(h),h+=u=Nt-2*Math.atan(a*Math.pow((1-c)/(1+c),o))-h,Math.abs(u)<=1e-10)return h;return-9999}function nY(l){return l}var e2e=[{init:function(){var l=this.b/this.a;this.es=1-l*l,"x0"in this||(this.x0=0),"y0"in this||(this.y0=0),this.e=Math.sqrt(this.es),this.lat_ts?this.k0=this.sphere?Math.cos(this.lat_ts):Lh(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)):this.k0||(this.k0=this.k?this.k:1)},forward:function(l){var c,u,a=l.x,o=l.y;if(o*Ph>90&&o*Ph<-90&&a*Ph>180&&a*Ph<-180)return null;if(Math.abs(Math.abs(o)-Nt)<=cn)return null;if(this.sphere)c=this.x0+this.a*this.k0*yn(a-this.long0),u=this.y0+this.a*this.k0*Math.log(Math.tan(Ti+.5*o));else{var h=Math.sin(o),d=Au(this.e,o,h);c=this.x0+this.a*this.k0*yn(a-this.long0),u=this.y0-this.a*this.k0*Math.log(d)}return l.x=c,l.y=u,l},inverse:function(l){var c,u,a=l.x-this.x0,o=l.y-this.y0;if(this.sphere)u=Nt-2*Math.atan(Math.exp(-o/(this.a*this.k0)));else{var h=Math.exp(-o/(this.a*this.k0));if(-9999===(u=s1(this.e,h)))return null}return c=yn(this.long0+a/(this.a*this.k0)),l.x=c,l.y=u,l},names:["Mercator","Popular Visualisation Pseudo Mercator","Mercator_1SP","Mercator_Auxiliary_Sphere","merc"]},{init:function(){},forward:nY,inverse:nY,names:["longlat","identity"]}],ED={},MD=[];function rY(l,a){var o=MD.length;return l.names?(MD[o]=l,l.names.forEach(function(c){ED[c.toLowerCase()]=o}),this):(console.log(a),!0)}const r2e={start:function(){e2e.forEach(rY)},add:rY,get:function(l){if(!l)return!1;var a=l.toLowerCase();return void 0!==ED[a]&&MD[ED[a]]?MD[ED[a]]:void 0}};var yr={MERIT:{a:6378137,rf:298.257,ellipseName:"MERIT 1983"},SGS85:{a:6378136,rf:298.257,ellipseName:"Soviet Geodetic System 85"},GRS80:{a:6378137,rf:298.257222101,ellipseName:"GRS 1980(IUGG, 1980)"},IAU76:{a:6378140,rf:298.257,ellipseName:"IAU 1976"},airy:{a:6377563.396,b:6356256.91,ellipseName:"Airy 1830"},APL4:{a:6378137,rf:298.25,ellipseName:"Appl. Physics. 1965"},NWL9D:{a:6378145,rf:298.25,ellipseName:"Naval Weapons Lab., 1965"},mod_airy:{a:6377340.189,b:6356034.446,ellipseName:"Modified Airy"},andrae:{a:6377104.43,rf:300,ellipseName:"Andrae 1876 (Den., Iclnd.)"},aust_SA:{a:6378160,rf:298.25,ellipseName:"Australian Natl & S. Amer. 1969"},GRS67:{a:6378160,rf:298.247167427,ellipseName:"GRS 67(IUGG 1967)"},bessel:{a:6377397.155,rf:299.1528128,ellipseName:"Bessel 1841"},bess_nam:{a:6377483.865,rf:299.1528128,ellipseName:"Bessel 1841 (Namibia)"},clrk66:{a:6378206.4,b:6356583.8,ellipseName:"Clarke 1866"},clrk80:{a:6378249.145,rf:293.4663,ellipseName:"Clarke 1880 mod."},clrk58:{a:6378293.645208759,rf:294.2606763692654,ellipseName:"Clarke 1858"},CPM:{a:6375738.7,rf:334.29,ellipseName:"Comm. des Poids et Mesures 1799"},delmbr:{a:6376428,rf:311.5,ellipseName:"Delambre 1810 (Belgium)"},engelis:{a:6378136.05,rf:298.2566,ellipseName:"Engelis 1985"},evrst30:{a:6377276.345,rf:300.8017,ellipseName:"Everest 1830"},evrst48:{a:6377304.063,rf:300.8017,ellipseName:"Everest 1948"},evrst56:{a:6377301.243,rf:300.8017,ellipseName:"Everest 1956"},evrst69:{a:6377295.664,rf:300.8017,ellipseName:"Everest 1969"},evrstSS:{a:6377298.556,rf:300.8017,ellipseName:"Everest (Sabah & Sarawak)"},fschr60:{a:6378166,rf:298.3,ellipseName:"Fischer (Mercury Datum) 1960"},fschr60m:{a:6378155,rf:298.3,ellipseName:"Fischer 1960"},fschr68:{a:6378150,rf:298.3,ellipseName:"Fischer 1968"},helmert:{a:6378200,rf:298.3,ellipseName:"Helmert 1906"},hough:{a:6378270,rf:297,ellipseName:"Hough"},intl:{a:6378388,rf:297,ellipseName:"International 1909 (Hayford)"},kaula:{a:6378163,rf:298.24,ellipseName:"Kaula 1961"},lerch:{a:6378139,rf:298.257,ellipseName:"Lerch 1979"},mprts:{a:6397300,rf:191,ellipseName:"Maupertius 1738"},new_intl:{a:6378157.5,b:6356772.2,ellipseName:"New International 1967"},plessis:{a:6376523,rf:6355863,ellipseName:"Plessis 1817 (France)"},krass:{a:6378245,rf:298.3,ellipseName:"Krassovsky, 1942"},SEasia:{a:6378155,b:6356773.3205,ellipseName:"Southeast Asia"},walbeck:{a:6376896,b:6355834.8467,ellipseName:"Walbeck"},WGS60:{a:6378165,rf:298.3,ellipseName:"WGS 60"},WGS66:{a:6378145,rf:298.25,ellipseName:"WGS 66"},WGS7:{a:6378135,rf:298.26,ellipseName:"WGS 72"}},i2e=yr.WGS84={a:6378137,rf:298.257223563,ellipseName:"WGS 84"};yr.sphere={a:6370997,b:6370997,ellipseName:"Normal Sphere (r=6370997)"};var Fo={wgs84:{towgs84:"0,0,0",ellipse:"WGS84",datumName:"WGS84"},ch1903:{towgs84:"674.374,15.056,405.346",ellipse:"bessel",datumName:"swiss"},ggrs87:{towgs84:"-199.87,74.79,246.62",ellipse:"GRS80",datumName:"Greek_Geodetic_Reference_System_1987"},nad83:{towgs84:"0,0,0",ellipse:"GRS80",datumName:"North_American_Datum_1983"},nad27:{nadgrids:"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat",ellipse:"clrk66",datumName:"North_American_Datum_1927"},potsdam:{towgs84:"598.1,73.7,418.2,0.202,0.045,-2.455,6.7",ellipse:"bessel",datumName:"Potsdam Rauenberg 1950 DHDN"},carthage:{towgs84:"-263.0,6.0,431.0",ellipse:"clark80",datumName:"Carthage 1934 Tunisia"},hermannskogel:{towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Hermannskogel"},osni52:{towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"airy",datumName:"Irish National"},ire65:{towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"mod_airy",datumName:"Ireland 1965"},rassadiran:{towgs84:"-133.63,-157.5,-158.62",ellipse:"intl",datumName:"Rassadiran"},nzgd49:{towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993",ellipse:"intl",datumName:"New Zealand Geodetic Datum 1949"},osgb36:{towgs84:"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894",ellipse:"airy",datumName:"Airy 1830"},s_jtsk:{towgs84:"589,76,480",ellipse:"bessel",datumName:"S-JTSK (Ferro)"},beduaram:{towgs84:"-106,-87,188",ellipse:"clrk80",datumName:"Beduaram"},gunung_segara:{towgs84:"-403,684,41",ellipse:"bessel",datumName:"Gunung Segara Jakarta"},rnb72:{towgs84:"106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1",ellipse:"intl",datumName:"Reseau National Belge 1972"}};var iY={};function h2e(l){if(0===l.length)return null;var a="@"===l[0];return a&&(l=l.slice(1)),"null"===l?{name:"null",mandatory:!a,grid:null,isNull:!0}:{name:l,mandatory:!a,grid:iY[l]||null,isNull:!1}}function I_(l){return l/3600*Math.PI/180}function kk(l,a,o){return String.fromCharCode.apply(null,new Uint8Array(l.buffer.slice(a,o)))}function m2e(l){return l.map(function(a){return[I_(a.longitudeShift),I_(a.latitudeShift)]})}function g2e(l,a,o){return{name:kk(l,a+8,a+16).trim(),parent:kk(l,a+24,a+24+8).trim(),lowerLatitude:l.getFloat64(a+72,o),upperLatitude:l.getFloat64(a+88,o),lowerLongitude:l.getFloat64(a+104,o),upperLongitude:l.getFloat64(a+120,o),latitudeInterval:l.getFloat64(a+136,o),longitudeInterval:l.getFloat64(a+152,o),gridNodeCount:l.getInt32(a+168,o)}}function y2e(l,a,o,c){for(var u=a+176,d=[],f=0;f<o.gridNodeCount;f++){var m={latitudeShift:l.getFloat32(u+16*f,c),longitudeShift:l.getFloat32(u+16*f+4,c),latitudeAccuracy:l.getFloat32(u+16*f+8,c),longitudeAccuracy:l.getFloat32(u+16*f+12,c)};d.push(m)}return d}function R_(l,a){if(!(this instanceof R_))return new R_(l);a=a||function(g){if(g)throw g};var o=function(l){if(!function(l){return"string"==typeof l}(l))return l;if(function(l){return l in xD}(l))return xD[l];if(function(l){return BRe.some(function(a){return l.indexOf(a)>-1})}(l)){var a=eY(l);if(function(l){var a=yp(l,"authority");if(a){var o=yp(a,"epsg");return o&&GRe.indexOf(o)>-1}}(a))return xD["EPSG:3857"];var o=function(l){var a=yp(l,"extension");if(a)return yp(a,"proj4")}(a);return o?Nk(o):a}return function(l){return"+"===l[0]}(l)?Nk(l):void 0}(l);if("object"==typeof o){var c=R_.projections.get(o.projName);if(c){if(o.datumCode&&"none"!==o.datumCode){var u=yp(Fo,o.datumCode);u&&(o.datum_params=o.datum_params||(u.towgs84?u.towgs84.split(","):null),o.ellps=u.ellipse,o.datumName=u.datumName?u.datumName:o.datumCode)}o.k0=o.k0||1,o.axis=o.axis||"enu",o.ellps=o.ellps||"wgs84",o.lat1=o.lat1||o.lat0;var h=function(l,a,o,c,u){if(!l){var h=yp(yr,c);h||(h=i2e),l=h.a,a=h.b,o=h.rf}return o&&!a&&(a=(1-1/o)*l),(0===o||Math.abs(l-a)<cn)&&(u=!0,a=l),{a:l,b:a,rf:o,sphere:u}}(o.a,o.b,o.rf,o.ellps,o.sphere),d=function(l,a,o,c){var u=l*l,h=a*a,d=(u-h)/u,f=0;return c?(u=(l*=1-d*(.16666666666666666+d*(.04722222222222222+.022156084656084655*d)))*l,d=0):f=Math.sqrt(d),{es:d,e:f,ep2:(u-h)/h}}(h.a,h.b,0,o.R_A),f=function(l){return void 0===l?null:l.split(",").map(h2e)}(o.nadgrids),m=o.datum||function(l,a,o,c,u,h,d){var f={};return f.datum_type=void 0===l||"none"===l?5:4,a&&(f.datum_params=a.map(parseFloat),(0!==f.datum_params[0]||0!==f.datum_params[1]||0!==f.datum_params[2])&&(f.datum_type=1),f.datum_params.length>3&&(0!==f.datum_params[3]||0!==f.datum_params[4]||0!==f.datum_params[5]||0!==f.datum_params[6])&&(f.datum_type=2,f.datum_params[3]*=e1,f.datum_params[4]*=e1,f.datum_params[5]*=e1,f.datum_params[6]=f.datum_params[6]/1e6+1)),d&&(f.datum_type=3,f.grids=d),f.a=o,f.b=c,f.es=u,f.ep2=h,f}(o.datumCode,o.datum_params,h.a,h.b,d.es,d.ep2,f);tY(this,o),tY(this,c),this.a=h.a,this.b=h.b,this.rf=h.rf,this.sphere=h.sphere,this.es=d.es,this.e=d.e,this.ep2=d.ep2,this.datum=m,this.init(),a(null,this)}else a(l)}else a(l)}(R_.projections=r2e).start();const o1=R_;function sY(l,a,o){var d,f,g,c=l.x,u=l.y,h=l.z?l.z:0;if(u<-Nt&&u>-1.001*Nt)u=-Nt;else if(u>Nt&&u<1.001*Nt)u=Nt;else{if(u<-Nt)return{x:-1/0,y:-1/0,z:l.z};if(u>Nt)return{x:1/0,y:1/0,z:l.z}}return c>Math.PI&&(c-=2*Math.PI),f=Math.sin(u),g=Math.cos(u),{x:((d=o/Math.sqrt(1-a*(f*f)))+h)*g*Math.cos(c),y:(d+h)*g*Math.sin(c),z:(d*(1-a)+h)*f}}function oY(l,a,o,c){var f,m,g,y,v,_,b,w,C,E,M,x,R,U,Q,P=l.x,k=l.y,W=l.z?l.z:0;if(f=Math.sqrt(P*P+k*k),m=Math.sqrt(P*P+k*k+W*W),f/o<1e-12){if(U=0,m/o<1e-12)return Q=-c,{x:l.x,y:l.y,z:l.z}}else U=Math.atan2(k,P);g=W/m,w=(y=f/m)*(1-a)*(v=1/Math.sqrt(1-a*(2-a)*y*y)),C=g*v,R=0;do{R++,_=a*(b=o/Math.sqrt(1-a*C*C))/(b+(Q=f*w+W*C-b*(1-a*C*C))),x=(M=g*(v=1/Math.sqrt(1-_*(2-_)*y*y)))*w-(E=y*(1-_)*v)*C,w=E,C=M}while(x*x>1e-24&&R<30);return{x:U,y:Math.atan(M/Math.abs(E)),z:Q}}function DD(l){return 1===l||2===l}function aY(l,a,o){if(null===l.grids||0===l.grids.length)return console.log("Grid shift grids not found"),-1;for(var c={x:-o.x,y:o.y},u={x:Number.NaN,y:Number.NaN},d=[],f=0;f<l.grids.length;f++){var m=l.grids[f];if(d.push(m.name),m.isNull){u=c;break}if(null!==m.grid){var g=m.grid.subgrids[0],y=(Math.abs(g.del[1])+Math.abs(g.del[0]))/1e4;if(!(g.ll[1]-y>c.y||g.ll[0]-y>c.x||g.ll[1]+(g.lim[1]-1)*g.del[1]+y<c.y||g.ll[0]+(g.lim[0]-1)*g.del[0]+y<c.x||(u=T2e(c,a,g),isNaN(u.x))))break}else if(m.mandatory)return console.log("Unable to find mandatory grid '"+m.name+"'"),-1}return isNaN(u.x)?(console.log("Failed to find a grid shift table for location '"+-c.x*Ph+" "+c.y*Ph+" tried: '"+d+"'"),-1):(o.x=-u.x,o.y=u.y,0)}function T2e(l,a,o){var c={x:Number.NaN,y:Number.NaN};if(isNaN(l.x))return c;var u={x:l.x,y:l.y};u.x-=o.ll[0],u.y-=o.ll[1],u.x=yn(u.x-Math.PI)+Math.PI;var h=lY(u,o);if(a){if(isNaN(h.x))return c;h.x=u.x-h.x,h.y=u.y-h.y;var m,g,d=9;do{if(g=lY(h,o),isNaN(g.x)){console.log("Inverse grid shift iteration failed, presumably at grid edge.  Using first approximation.");break}h.x+=(m={x:u.x-(g.x+h.x),y:u.y-(g.y+h.y)}).x,h.y+=m.y}while(d--&&Math.abs(m.x)>1e-12&&Math.abs(m.y)>1e-12);if(d<0)return console.log("Inverse grid shift iterator failed to converge."),c;c.x=yn(h.x+o.ll[0]),c.y=h.y+o.ll[1]}else isNaN(h.x)||(c.x=l.x+h.x,c.y=l.y+h.y);return c}function lY(l,a){var d,o={x:l.x/a.del[0],y:l.y/a.del[1]},c_x=Math.floor(o.x),c_y=Math.floor(o.y),u_x=o.x-1*c_x,u_y=o.y-1*c_y,h={x:Number.NaN,y:Number.NaN};if(c_x<0||c_x>=a.lim[0]||c_y<0||c_y>=a.lim[1])return h;var f_x=a.cvs[d=c_y*a.lim[0]+c_x][0],f_y=a.cvs[d][1];d++;var m_x=a.cvs[d][0],m_y=a.cvs[d][1],g_x=a.cvs[d+=a.lim[0]][0],g_y=a.cvs[d][1];d--;var y_y=a.cvs[d][1],v=u_x*u_y,_=u_x*(1-u_y),b=(1-u_x)*(1-u_y),w=(1-u_x)*u_y;return h.x=b*f_x+_*m_x+w*a.cvs[d][0]+v*g_x,h.y=b*f_y+_*m_y+w*y_y+v*g_y,h}function cY(l,a,o){var d,f,m,c=o.x,u=o.y,h=o.z||0,g={};for(m=0;m<3;m++)if(!a||2!==m||void 0!==o.z)switch(0===m?(d=c,f=-1!=="ew".indexOf(l.axis[m])?"x":"y"):1===m?(d=u,f=-1!=="ns".indexOf(l.axis[m])?"y":"x"):(d=h,f="z"),l.axis[m]){case"e":g[f]=d;break;case"w":g[f]=-d;break;case"n":g[f]=d;break;case"s":g[f]=-d;break;case"u":void 0!==o[f]&&(g.z=d);break;case"d":void 0!==o[f]&&(g.z=-d);break;default:return null}return g}function uY(l){var a={x:l[0],y:l[1]};return l.length>2&&(a.z=l[2]),l.length>3&&(a.m=l[3]),a}function hY(l){if("function"==typeof Number.isFinite){if(Number.isFinite(l))return;throw new TypeError("coordinates must be finite numbers")}if("number"!=typeof l||l!=l||!isFinite(l))throw new TypeError("coordinates must be finite numbers")}function AD(l,a,o,c){var u;if(Array.isArray(o)&&(o=uY(o)),function(l){hY(l.x),hY(l.y)}(o),l.datum&&a.datum&&function(l,a){return(1===l.datum.datum_type||2===l.datum.datum_type)&&"WGS84"!==a.datumCode||(1===a.datum.datum_type||2===a.datum.datum_type)&&"WGS84"!==l.datumCode}(l,a)&&(o=AD(l,u=new o1("WGS84"),o,c),l=u),c&&"enu"!==l.axis&&(o=cY(l,!1,o)),"longlat"===l.projName)o={x:o.x*na,y:o.y*na,z:o.z||0};else if(l.to_meter&&(o={x:o.x*l.to_meter,y:o.y*l.to_meter,z:o.z||0}),!(o=l.inverse(o)))return;if(l.from_greenwich&&(o.x+=l.from_greenwich),o=function(l,a,o){if(function(l,a){return!(l.datum_type!==a.datum_type||l.a!==a.a||Math.abs(l.es-a.es)>5e-11)&&(1===l.datum_type?l.datum_params[0]===a.datum_params[0]&&l.datum_params[1]===a.datum_params[1]&&l.datum_params[2]===a.datum_params[2]:2!==l.datum_type||l.datum_params[0]===a.datum_params[0]&&l.datum_params[1]===a.datum_params[1]&&l.datum_params[2]===a.datum_params[2]&&l.datum_params[3]===a.datum_params[3]&&l.datum_params[4]===a.datum_params[4]&&l.datum_params[5]===a.datum_params[5]&&l.datum_params[6]===a.datum_params[6])}(l,a)||5===l.datum_type||5===a.datum_type)return o;var c=l.a,u=l.es;if(3===l.datum_type){if(0!==aY(l,!1,o))return;c=6378137,u=X$}var d=a.a,f=a.b,m=a.es;return 3===a.datum_type&&(d=6378137,f=6356752.314,m=X$),u!==m||c!==d||DD(l.datum_type)||DD(a.datum_type)?(o=sY(o,u,c),DD(l.datum_type)&&(o=function(l,a,o){if(1===a)return{x:l.x+o[0],y:l.y+o[1],z:l.z+o[2]};if(2===a){var d=o[3],f=o[4],m=o[5],g=o[6];return{x:g*(l.x-m*l.y+f*l.z)+o[0],y:g*(m*l.x+l.y-d*l.z)+o[1],z:g*(-f*l.x+d*l.y+l.z)+o[2]}}}(o,l.datum_type,l.datum_params)),DD(a.datum_type)&&(o=function(l,a,o){if(1===a)return{x:l.x-o[0],y:l.y-o[1],z:l.z-o[2]};if(2===a){var d=o[3],f=o[4],m=o[5],g=o[6],y=(l.x-o[0])/g,v=(l.y-o[1])/g,_=(l.z-o[2])/g;return{x:y+m*v-f*_,y:-m*y+v+d*_,z:f*y-d*v+_}}}(o,a.datum_type,a.datum_params)),o=oY(o,m,d,f),3!==a.datum_type||0===aY(a,!0,o)?o:void 0):o}(l.datum,a.datum,o))return a.from_greenwich&&(o={x:o.x-a.from_greenwich,y:o.y,z:o.z||0}),"longlat"===a.projName?o={x:o.x*Ph,y:o.y*Ph,z:o.z||0}:(o=a.forward(o),a.to_meter&&(o={x:o.x/a.to_meter,y:o.y/a.to_meter,z:o.z||0})),c&&"enu"!==a.axis?cY(a,!0,o):o}var dY=o1("WGS84");function Vk(l,a,o,c){var u,h,d;return Array.isArray(o)?(u=AD(l,a,o,c)||{x:NaN,y:NaN},o.length>2?void 0!==l.name&&"geocent"===l.name||void 0!==a.name&&"geocent"===a.name?"number"==typeof u.z?[u.x,u.y,u.z].concat(o.splice(3)):[u.x,u.y,o[2]].concat(o.splice(3)):[u.x,u.y].concat(o.splice(2)):[u.x,u.y]):(h=AD(l,a,o,c),2===(d=Object.keys(o)).length||d.forEach(function(f){if(void 0!==l.name&&"geocent"===l.name||void 0!==a.name&&"geocent"===a.name){if("x"===f||"y"===f||"z"===f)return}else if("x"===f||"y"===f)return;h[f]=o[f]}),h)}function fY(l){return l instanceof o1?l:l.oProj?l.oProj:o1(l)}const Zl=function(l,a,o){l=fY(l);var u,c=!1;return void 0===a?(a=l,l=dY,c=!0):(void 0!==a.x||Array.isArray(a))&&(o=a,a=l,l=dY,c=!0),a=fY(a),o?Vk(l,a,o):(u={forward:function(h,d){return Vk(l,a,h,d)},inverse:function(h,d){return Vk(a,l,h,d)}},c&&(u.oProj=a),u)};const E2e={forward:yY,inverse:function(l){var a=Uk(SY(l.toUpperCase()));return a.lat&&a.lon?[a.lon,a.lat,a.lon,a.lat]:[a.left,a.bottom,a.right,a.top]},toPoint:vY};function yY(l,a){return a=a||5,function(l,a){var o="00000"+l.easting,c="00000"+l.northing;return l.zoneNumber+l.zoneLetter+function(l,a,o){var c=bY(o);return function(l,a,o){var c=o-1,u="AJSAJS".charCodeAt(c),h="AFAFAF".charCodeAt(c),d=u+l-1,f=h+a,m=!1;return d>90&&(d=d-90+65-1,m=!0),(73===d||u<73&&d>73||(d>73||u<73)&&m)&&d++,(79===d||u<79&&d>79||(d>79||u<79)&&m)&&73==++d&&d++,d>90&&(d=d-90+65-1),f>86?(f=f-86+65-1,m=!0):m=!1,(73===f||h<73&&f>73||(f>73||h<73)&&m)&&f++,(79===f||h<79&&f>79||(f>79||h<79)&&m)&&73==++f&&f++,f>86&&(f=f-86+65-1),String.fromCharCode(d)+String.fromCharCode(f)}(Math.floor(l/1e5),Math.floor(a/1e5)%20,c)}(l.easting,l.northing,l.zoneNumber)+o.substr(o.length-5,a)+c.substr(c.length-5,a)}(function(l){var f,m,g,y,v,C,E,a=l.lat,o=l.lon,c=6378137,u=.00669438,h=.9996,b=Bk(a),w=Bk(o);E=Math.floor((o+180)/6)+1,180===o&&(E=60),a>=56&&a<64&&o>=3&&o<12&&(E=32),a>=72&&a<84&&(o>=0&&o<9?E=31:o>=9&&o<21?E=33:o>=21&&o<33?E=35:o>=33&&o<42&&(E=37)),C=Bk(6*(E-1)-180+3),f=u/(1-u),m=c/Math.sqrt(1-u*Math.sin(b)*Math.sin(b)),g=Math.tan(b)*Math.tan(b),y=f*Math.cos(b)*Math.cos(b);var M=h*m*((v=Math.cos(b)*(w-C))+(1-g+y)*v*v*v/6+(5-18*g+g*g+72*y-58*f)*v*v*v*v*v/120)+5e5,x=h*(c*(.9983242984503243*b-.002514607064228144*Math.sin(2*b)+2639046602129982e-21*Math.sin(4*b)-35*u*u*u/3072*Math.sin(6*b))+m*Math.tan(b)*(v*v/2+(5-g+9*y+4*y*y)*v*v*v*v/24+(61-58*g+g*g+600*y-330*f)*v*v*v*v*v*v/720));return a<0&&(x+=1e7),{northing:Math.round(x),easting:Math.round(M),zoneNumber:E,zoneLetter:A2e(a)}}({lat:l[1],lon:l[0]}),a)}function vY(l){var a=Uk(SY(l.toUpperCase()));return a.lat&&a.lon?[a.lon,a.lat]:[(a.left+a.right)/2,(a.top+a.bottom)/2]}function Bk(l){return l*(Math.PI/180)}function _Y(l){return l/Math.PI*180}function Uk(l){var a=l.northing,o=l.easting,c=l.zoneLetter,u=l.zoneNumber;if(u<0||u>60)return null;var m,y,v,_,b,w,E,M,x,h=.9996,d=6378137,f=.00669438,g=(1-Math.sqrt(1-f))/(1+Math.sqrt(1-f)),R=o-5e5,P=a;c<"N"&&(P-=1e7),E=6*(u-1)-180+3,m=f/(1-f),x=(M=P/h/6367449.145945056)+(3*g/2-27*g*g*g/32)*Math.sin(2*M)+(21*g*g/16-55*g*g*g*g/32)*Math.sin(4*M)+151*g*g*g/96*Math.sin(6*M),y=d/Math.sqrt(1-f*Math.sin(x)*Math.sin(x)),v=Math.tan(x)*Math.tan(x),_=m*Math.cos(x)*Math.cos(x),b=d*(1-f)/Math.pow(1-f*Math.sin(x)*Math.sin(x),1.5),w=R/(y*h);var k=x-y*Math.tan(x)/b*(w*w/2-(5+3*v+10*_-4*_*_-9*m)*w*w*w*w/24+(61+90*v+298*_+45*v*v-252*m-3*_*_)*w*w*w*w*w*w/720);k=_Y(k);var U,W=(w-(1+2*v+_)*w*w*w/6+(5-2*_+28*v-3*_*_+8*m+24*v*v)*w*w*w*w*w/120)/Math.cos(x);if(W=E+_Y(W),l.accuracy){var K=Uk({northing:l.northing+l.accuracy,easting:l.easting+l.accuracy,zoneLetter:l.zoneLetter,zoneNumber:l.zoneNumber});U={top:K.lat,right:K.lon,bottom:k,left:W}}else U={lat:k,lon:W};return U}function A2e(l){var a="Z";return 84>=l&&l>=72?a="X":72>l&&l>=64?a="W":64>l&&l>=56?a="V":56>l&&l>=48?a="U":48>l&&l>=40?a="T":40>l&&l>=32?a="S":32>l&&l>=24?a="R":24>l&&l>=16?a="Q":16>l&&l>=8?a="P":8>l&&l>=0?a="N":0>l&&l>=-8?a="M":-8>l&&l>=-16?a="L":-16>l&&l>=-24?a="K":-24>l&&l>=-32?a="J":-32>l&&l>=-40?a="H":-40>l&&l>=-48?a="G":-48>l&&l>=-56?a="F":-56>l&&l>=-64?a="E":-64>l&&l>=-72?a="D":-72>l&&l>=-80&&(a="C"),a}function bY(l){var a=l%6;return 0===a&&(a=6),a}function SY(l){if(l&&0===l.length)throw"MGRSPoint coverting from nothing";for(var u,a=l.length,o=null,c="",h=0;!/[A-Z]/.test(u=l.charAt(h));){if(h>=2)throw"MGRSPoint bad conversion from: "+l;c+=u,h++}var d=parseInt(c,10);if(0===h||h+3>a)throw"MGRSPoint bad conversion from: "+l;var f=l.charAt(h++);if(f<="A"||"B"===f||"Y"===f||f>="Z"||"I"===f||"O"===f)throw"MGRSPoint zone letter "+f+" not handled: "+l;o=l.substring(h,h+=2);for(var m=bY(d),g=function(l,a){for(var o="AJSAJS".charCodeAt(a-1),c=1e5,u=!1;o!==l.charCodeAt(0);){if(73==++o&&o++,79===o&&o++,o>90){if(u)throw"Bad character: "+l;o=65,u=!0}c+=1e5}return c}(o.charAt(0),m),y=function(l,a){if(l>"V")throw"MGRSPoint given invalid Northing "+l;for(var o="AFAFAF".charCodeAt(a-1),c=0,u=!1;o!==l.charCodeAt(0);){if(73==++o&&o++,79===o&&o++,o>86){if(u)throw"Bad character: "+l;o=65,u=!0}c+=1e5}return c}(o.charAt(1),m);y<N2e(f);)y+=2e6;var v=a-h;if(v%2!=0)throw"MGRSPoint has to have an even number \nof digits after the zone letter and two 100km letters - front \nhalf for easting meters, second half for \nnorthing meters"+l;var C,E,M,_=v/2,b=0,w=0;return _>0&&(C=1e5/Math.pow(10,_),E=l.substring(h,h+_),b=parseFloat(E)*C,M=l.substring(h+_),w=parseFloat(M)*C),{easting:b+g,northing:w+y,zoneLetter:f,zoneNumber:d,accuracy:C}}function N2e(l){var a;switch(l){case"C":a=11e5;break;case"D":a=2e6;break;case"E":a=28e5;break;case"F":a=37e5;break;case"G":a=46e5;break;case"H":a=55e5;break;case"J":a=64e5;break;case"K":a=73e5;break;case"L":a=82e5;break;case"M":a=91e5;break;case"N":a=0;break;case"P":a=8e5;break;case"Q":a=17e5;break;case"R":a=26e5;break;case"S":a=35e5;break;case"T":a=44e5;break;case"U":a=53e5;break;case"V":a=62e5;break;case"W":a=7e6;break;case"X":a=79e5;break;default:a=-1}if(a>=0)return a;throw"Invalid zone letter: "+l}function L_(l,a,o){if(!(this instanceof L_))return new L_(l,a,o);if(Array.isArray(l))this.x=l[0],this.y=l[1],this.z=l[2]||0;else if("object"==typeof l)this.x=l.x,this.y=l.y,this.z=l.z||0;else if("string"==typeof l&&void 0===a){var c=l.split(",");this.x=parseFloat(c[0],10),this.y=parseFloat(c[1],10),this.z=parseFloat(c[2],10)||0}else this.x=l,this.y=a,this.z=o||0;console.warn("proj4.Point will be removed in version 3, use proj4.toPoint")}L_.fromMGRS=function(l){return new L_(vY(l))},L_.prototype.toMGRS=function(l){return yY([this.x,this.y],l)};const F2e=L_;var wY=.01953125,CY=.01068115234375;function xY(l){var a=[];a[0]=1-l*(.25+l*(.046875+l*(wY+l*CY))),a[1]=l*(.75-l*(.046875+l*(wY+l*CY)));var o=l*l;return a[2]=o*(.46875-l*(.013020833333333334+.007120768229166667*l)),a[3]=(o*=l)*(.3645833333333333-.005696614583333333*l),a[4]=o*l*.3076171875,a}function ID(l,a,o,c){return c[0]*l-(o*=a)*(c[1]+(a*=a)*(c[2]+a*(c[3]+a*c[4])))}function EY(l,a,o){for(var c=1/(1-a),u=l,h=20;h;--h){var d=Math.sin(u),f=1-a*d*d;if(u-=f=(ID(u,d,Math.cos(u),o)-l)*(f*Math.sqrt(f))*c,Math.abs(f)<cn)return u}return u}const RD={init:function(){this.x0=void 0!==this.x0?this.x0:0,this.y0=void 0!==this.y0?this.y0:0,this.long0=void 0!==this.long0?this.long0:0,this.lat0=void 0!==this.lat0?this.lat0:0,this.es&&(this.en=xY(this.es),this.ml0=ID(this.lat0,Math.sin(this.lat0),Math.cos(this.lat0),this.en))},forward:function(l){var u,h,d,o=l.y,c=yn(l.x-this.long0),f=Math.sin(o),m=Math.cos(o);if(this.es){var y=m*c,v=Math.pow(y,2),_=this.ep2*Math.pow(m,2),b=Math.pow(_,2),w=Math.abs(m)>cn?Math.tan(o):0,C=Math.pow(w,2),E=Math.pow(C,2);u=1-this.es*Math.pow(f,2),y/=Math.sqrt(u);var M=ID(o,f,m,this.en);h=this.a*(this.k0*y*(1+v/6*(1-C+_+v/20*(5-18*C+E+14*_-58*C*_+v/42*(61+179*E-E*C-479*C)))))+this.x0,d=this.a*(this.k0*(M-this.ml0+f*c*y/2*(1+v/12*(5-C+9*_+4*b+v/30*(61+E-58*C+270*_-330*C*_+v/56*(1385+543*E-E*C-3111*C))))))+this.y0}else{var g=m*Math.sin(c);if(Math.abs(Math.abs(g)-1)<cn)return 93;if(h=.5*this.a*this.k0*Math.log((1+g)/(1-g))+this.x0,d=m*Math.cos(c)/Math.sqrt(1-Math.pow(g,2)),(g=Math.abs(d))>=1){if(g-1>cn)return 93;d=0}else d=Math.acos(d);o<0&&(d=-d),d=this.a*this.k0*(d-this.lat0)+this.y0}return l.x=h,l.y=d,l},inverse:function(l){var a,o,c,u,h=1/this.a*(l.x-this.x0),d=1/this.a*(l.y-this.y0);if(this.es)if(o=EY(a=this.ml0+d/this.k0,this.es,this.en),Math.abs(o)<Nt){var v=Math.sin(o),_=Math.cos(o),b=Math.abs(_)>cn?Math.tan(o):0,w=this.ep2*Math.pow(_,2),C=Math.pow(w,2),E=Math.pow(b,2),M=Math.pow(E,2);a=1-this.es*Math.pow(v,2);var x=h*Math.sqrt(a)/this.k0,R=Math.pow(x,2);c=o-(a*=b)*R/(1-this.es)*.5*(1-R/12*(5+3*E-9*w*E+w-4*C-R/30*(61+90*E-252*w*E+45*M+46*w-R/56*(1385+3633*E+4095*M+1574*M*E)))),u=yn(this.long0+x*(1-R/6*(1+2*E+w-R/20*(5+28*E+24*M+8*w*E+6*w-R/42*(61+662*E+1320*M+720*M*E))))/_)}else c=Nt*r1(d),u=0;else{var f=Math.exp(h/this.k0),m=.5*(f-1/f),y=Math.cos(this.lat0+d/this.k0);a=Math.sqrt((1-Math.pow(y,2))/(1+Math.pow(m,2))),c=Math.asin(a),d<0&&(c=-c),u=0===m&&0===y?0:yn(Math.atan2(m,y)+this.long0)}return l.x=u,l.y=c,l},names:["Fast_Transverse_Mercator","Fast Transverse Mercator"]};function MY(l){var a=Math.exp(l);return(a-1/a)/2}function PD(l,a){l=Math.abs(l),a=Math.abs(a);var o=Math.max(l,a),c=Math.min(l,a)/(o||1);return o*Math.sqrt(1+Math.pow(c,2))}function Gk(l,a){for(var d,o=2*Math.cos(2*a),c=l.length-1,u=l[c],h=0;--c>=0;)d=o*u-h+l[c],h=u,u=d;return a+d*Math.sin(2*a)}function DY(l,a,o){for(var w,C,c=Math.sin(a),u=Math.cos(a),h=MY(o),d=function(l){var a=Math.exp(l);return(a+1/a)/2}(o),f=2*u*d,m=-2*c*h,g=l.length-1,y=l[g],v=0,_=0,b=0;--g>=0;)w=_,C=v,y=f*(_=y)-w-m*(v=b)+l[g],b=m*_-C+f*v;return[(f=c*d)*y-(m=u*h)*b,f*b+m*y]}const LD={init:function(){if(!this.approx&&(isNaN(this.es)||this.es<=0))throw new Error('Incorrect elliptical usage. Try using the +approx option in the proj string, or PROJECTION["Fast_Transverse_Mercator"] in the WKT.');this.approx&&(RD.init.apply(this),this.forward=RD.forward,this.inverse=RD.inverse),this.x0=void 0!==this.x0?this.x0:0,this.y0=void 0!==this.y0?this.y0:0,this.long0=void 0!==this.long0?this.long0:0,this.lat0=void 0!==this.lat0?this.lat0:0,this.cgb=[],this.cbg=[],this.utg=[],this.gtu=[];var l=this.es/(1+Math.sqrt(1-this.es)),a=l/(2-l),o=a;this.cgb[0]=a*(2+a*(-2/3+a*(a*(116/45+a*(26/45+a*(-2854/675)))-2))),this.cbg[0]=a*(a*(2/3+a*(4/3+a*(-82/45+a*(32/45+a*(4642/4725)))))-2),this.cgb[1]=(o*=a)*(7/3+a*(a*(-227/45+a*(2704/315+a*(2323/945)))-1.6)),this.cbg[1]=o*(5/3+a*(-16/15+a*(-13/9+a*(904/315+a*(-1522/945))))),this.cgb[2]=(o*=a)*(56/15+a*(-136/35+a*(-1262/105+a*(73814/2835)))),this.cbg[2]=o*(-26/15+a*(34/21+a*(1.6+a*(-12686/2835)))),this.cgb[3]=(o*=a)*(4279/630+a*(-332/35+a*(-399572/14175))),this.cbg[3]=o*(1237/630+a*(a*(-24832/14175)-2.4)),this.cgb[4]=(o*=a)*(4174/315+a*(-144838/6237)),this.cbg[4]=o*(-734/315+a*(109598/31185)),this.cgb[5]=(o*=a)*(601676/22275),this.cbg[5]=o*(444337/155925),o=Math.pow(a,2),this.Qn=this.k0/(1+a)*(1+o*(1/4+o*(1/64+o/256))),this.utg[0]=a*(a*(2/3+a*(-37/96+a*(1/360+a*(81/512+a*(-96199/604800)))))-.5),this.gtu[0]=a*(.5+a*(-2/3+a*(5/16+a*(41/180+a*(-127/288+a*(7891/37800)))))),this.utg[1]=o*(-1/48+a*(-1/15+a*(437/1440+a*(-46/105+a*(1118711/3870720))))),this.gtu[1]=o*(13/48+a*(a*(557/1440+a*(281/630+a*(-1983433/1935360)))-.6)),this.utg[2]=(o*=a)*(-17/480+a*(37/840+a*(209/4480+a*(-5569/90720)))),this.gtu[2]=o*(61/240+a*(-103/140+a*(15061/26880+a*(167603/181440)))),this.utg[3]=(o*=a)*(-4397/161280+a*(11/504+a*(830251/7257600))),this.gtu[3]=o*(49561/161280+a*(-179/168+a*(6601661/7257600))),this.utg[4]=(o*=a)*(-4583/161280+a*(108847/3991680)),this.gtu[4]=o*(34729/80640+a*(-3418889/1995840)),this.utg[5]=(o*=a)*(-20648693/638668800),this.gtu[5]=.6650675310896665*o;var c=Gk(this.cbg,this.lat0);this.Zb=-this.Qn*(c+function(l,a){for(var d,o=2*Math.cos(a),c=l.length-1,u=l[c],h=0;--c>=0;)d=o*u-h+l[c],h=u,u=d;return Math.sin(a)*d}(this.gtu,2*c))},forward:function(l){var a=yn(l.x-this.long0),o=l.y;o=Gk(this.cbg,o);var c=Math.sin(o),u=Math.cos(o),h=Math.sin(a),d=Math.cos(a);o=Math.atan2(c,d*u),a=Math.atan2(h*u,PD(c,u*d)),a=function(l){var a=Math.abs(l);return a=function(l){var a=1+l,o=a-1;return 0===o?l:l*Math.log(a)/o}(a*(1+a/(PD(1,a)+1))),l<0?-a:a}(Math.tan(a));var m,g,f=DY(this.gtu,2*o,2*a);return o+=f[0],a+=f[1],Math.abs(a)<=2.623395162778?(m=this.a*(this.Qn*a)+this.x0,g=this.a*(this.Qn*o+this.Zb)+this.y0):(m=1/0,g=1/0),l.x=m,l.y=g,l},inverse:function(l){var c,u,a=1/this.a*(l.x-this.x0),o=1/this.a*(l.y-this.y0);if(o=(o-this.Zb)/this.Qn,a/=this.Qn,Math.abs(a)<=2.623395162778){var h=DY(this.utg,2*o,2*a);o+=h[0],a+=h[1],a=Math.atan(MY(a));var d=Math.sin(o),f=Math.cos(o),m=Math.sin(a),g=Math.cos(a);o=Math.atan2(d*g,PD(m,g*f)),c=yn((a=Math.atan2(m,g*f))+this.long0),u=Gk(this.cgb,o)}else c=1/0,u=1/0;return l.x=c,l.y=u,l},names:["Extended_Transverse_Mercator","Extended Transverse Mercator","etmerc","Transverse_Mercator","Transverse Mercator","tmerc"]},cPe={init:function(){var l=function(l,a){if(void 0===l){if((l=Math.floor(30*(yn(a)+Math.PI)/Math.PI)+1)<0)return 0;if(l>60)return 60}return l}(this.zone,this.long0);if(void 0===l)throw new Error("unknown utm zone");this.lat0=0,this.long0=(6*Math.abs(l)-183)*na,this.x0=5e5,this.y0=this.utmSouth?1e7:0,this.k0=.9996,LD.init.apply(this),this.forward=LD.forward,this.inverse=LD.inverse},names:["Universal Transverse Mercator System","utm"],dependsOn:"etmerc"};function zk(l,a){return Math.pow((1-l)/(1+l),a)}const Hk={init:function(){var l=Math.sin(this.lat0),a=Math.cos(this.lat0);a*=a,this.rc=Math.sqrt(1-this.es)/(1-this.es*l*l),this.C=Math.sqrt(1+this.es*a*a/(1-this.es)),this.phic0=Math.asin(l/this.C),this.ratexp=.5*this.C*this.e,this.K=Math.tan(.5*this.phic0+Ti)/(Math.pow(Math.tan(.5*this.lat0+Ti),this.C)*zk(this.e*l,this.ratexp))},forward:function(l){var a=l.x,o=l.y;return l.y=2*Math.atan(this.K*Math.pow(Math.tan(.5*o+Ti),this.C)*zk(this.e*Math.sin(o),this.ratexp))-Nt,l.x=this.C*a,l},inverse:function(l){for(var o=l.x/this.C,c=l.y,u=Math.pow(Math.tan(.5*c+Ti)/this.K,1/this.C),h=20;h>0&&(c=2*Math.atan(u*zk(this.e*Math.sin(l.y),-.5*this.e))-Nt,!(Math.abs(c-l.y)<1e-14));--h)l.y=c;return h?(l.x=o,l.y=c,l):null},names:["gauss"]},_Pe={init:function(){Hk.init.apply(this),this.rc&&(this.sinc0=Math.sin(this.phic0),this.cosc0=Math.cos(this.phic0),this.R2=2*this.rc,this.title||(this.title="Oblique Stereographic Alternative"))},forward:function(l){var a,o,c,u;return l.x=yn(l.x-this.long0),Hk.forward.apply(this,[l]),a=Math.sin(l.y),o=Math.cos(l.y),c=Math.cos(l.x),l.x=(u=this.k0*this.R2/(1+this.sinc0*a+this.cosc0*o*c))*o*Math.sin(l.x),l.y=u*(this.cosc0*a-this.sinc0*o*c),l.x=this.a*l.x+this.x0,l.y=this.a*l.y+this.y0,l},inverse:function(l){var a,o,c,u,h;if(l.x=(l.x-this.x0)/this.a,l.y=(l.y-this.y0)/this.a,l.x/=this.k0,l.y/=this.k0,h=Math.sqrt(l.x*l.x+l.y*l.y)){var d=2*Math.atan2(h,this.R2);a=Math.sin(d),o=Math.cos(d),u=Math.asin(o*this.sinc0+l.y*a*this.cosc0/h),c=Math.atan2(l.x*a,h*this.cosc0*o-l.y*this.sinc0*a)}else u=this.phic0,c=0;return l.x=c,l.y=u,Hk.inverse.apply(this,[l]),l.x=yn(l.x+this.long0),l},names:["Stereographic_North_Pole","Oblique_Stereographic","Polar_Stereographic","sterea","Oblique Stereographic Alternative","Double_Stereographic"]},xPe={init:function(){this.coslat0=Math.cos(this.lat0),this.sinlat0=Math.sin(this.lat0),this.sphere?1===this.k0&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=cn&&(this.k0=.5*(1+r1(this.lat0)*Math.sin(this.lat_ts))):(Math.abs(this.coslat0)<=cn&&(this.con=this.lat0>0?1:-1),this.cons=Math.sqrt(Math.pow(1+this.e,1+this.e)*Math.pow(1-this.e,1-this.e)),1===this.k0&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=cn&&(this.k0=.5*this.cons*Lh(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts))/Au(this.e,this.con*this.lat_ts,this.con*Math.sin(this.lat_ts))),this.ms1=Lh(this.e,this.sinlat0,this.coslat0),this.X0=2*Math.atan(this.ssfn_(this.lat0,this.sinlat0,this.e))-Nt,this.cosX0=Math.cos(this.X0),this.sinX0=Math.sin(this.X0))},forward:function(l){var h,d,f,m,g,y,a=l.x,o=l.y,c=Math.sin(o),u=Math.cos(o),v=yn(a-this.long0);return Math.abs(Math.abs(a-this.long0)-Math.PI)<=cn&&Math.abs(o+this.lat0)<=cn?(l.x=NaN,l.y=NaN,l):this.sphere?(h=2*this.k0/(1+this.sinlat0*c+this.coslat0*u*Math.cos(v)),l.x=this.a*h*u*Math.sin(v)+this.x0,l.y=this.a*h*(this.coslat0*c-this.sinlat0*u*Math.cos(v))+this.y0,l):(d=2*Math.atan(this.ssfn_(o,c,this.e))-Nt,m=Math.cos(d),f=Math.sin(d),Math.abs(this.coslat0)<=cn?(g=Au(this.e,o*this.con,this.con*c),l.x=this.x0+(y=2*this.a*this.k0*g/this.cons)*Math.sin(a-this.long0),l.y=this.y0-this.con*y*Math.cos(a-this.long0),l):(Math.abs(this.sinlat0)<cn?(h=2*this.a*this.k0/(1+m*Math.cos(v)),l.y=h*f):(h=2*this.a*this.k0*this.ms1/(this.cosX0*(1+this.sinX0*f+this.cosX0*m*Math.cos(v))),l.y=h*(this.cosX0*f-this.sinX0*m*Math.cos(v))+this.y0),l.x=h*m*Math.sin(v)+this.x0,l))},inverse:function(l){l.x-=this.x0,l.y-=this.y0;var a,o,u,h,d=Math.sqrt(l.x*l.x+l.y*l.y);if(this.sphere){var f=2*Math.atan(d/(2*this.a*this.k0));return a=this.long0,o=this.lat0,d<=cn?(l.x=a,l.y=o,l):(o=Math.asin(Math.cos(f)*this.sinlat0+l.y*Math.sin(f)*this.coslat0/d),a=Math.abs(this.coslat0)<cn?yn(this.lat0>0?this.long0+Math.atan2(l.x,-1*l.y):this.long0+Math.atan2(l.x,l.y)):yn(this.long0+Math.atan2(l.x*Math.sin(f),d*this.coslat0*Math.cos(f)-l.y*this.sinlat0*Math.sin(f))),l.x=a,l.y=o,l)}if(Math.abs(this.coslat0)<=cn){if(d<=cn)return o=this.lat0,l.x=a=this.long0,l.y=o,l;l.x*=this.con,l.y*=this.con,o=this.con*s1(this.e,d*this.cons/(2*this.a*this.k0)),a=this.con*yn(this.con*this.long0+Math.atan2(l.x,-1*l.y))}else u=2*Math.atan(d*this.cosX0/(2*this.a*this.k0*this.ms1)),a=this.long0,d<=cn?h=this.X0:(h=Math.asin(Math.cos(u)*this.sinX0+l.y*Math.sin(u)*this.cosX0/d),a=yn(this.long0+Math.atan2(l.x*Math.sin(u),d*this.cosX0*Math.cos(u)-l.y*this.sinX0*Math.sin(u)))),o=-1*s1(this.e,Math.tan(.5*(Nt+h)));return l.x=a,l.y=o,l},names:["stere","Stereographic_South_Pole","Polar Stereographic (variant B)"],ssfn_:function(l,a,o){return a*=o,Math.tan(.5*(Nt+l))*Math.pow((1-a)/(1+a),.5*o)}},IPe={init:function(){var l=this.lat0;this.lambda0=this.long0;var a=Math.sin(l),o=this.a,u=1/this.rf,h=2*u-Math.pow(u,2),d=this.e=Math.sqrt(h);this.R=this.k0*o*Math.sqrt(1-h)/(1-h*Math.pow(a,2)),this.alpha=Math.sqrt(1+h/(1-h)*Math.pow(Math.cos(l),4)),this.b0=Math.asin(a/this.alpha);var f=Math.log(Math.tan(Math.PI/4+this.b0/2)),m=Math.log(Math.tan(Math.PI/4+l/2)),g=Math.log((1+d*a)/(1-d*a));this.K=f-this.alpha*m+this.alpha*d/2*g},forward:function(l){var a=Math.log(Math.tan(Math.PI/4-l.y/2)),o=this.e/2*Math.log((1+this.e*Math.sin(l.y))/(1-this.e*Math.sin(l.y))),u=2*(Math.atan(Math.exp(-this.alpha*(a+o)+this.K))-Math.PI/4),h=this.alpha*(l.x-this.lambda0),d=Math.atan(Math.sin(h)/(Math.sin(this.b0)*Math.tan(u)+Math.cos(this.b0)*Math.cos(h))),f=Math.asin(Math.cos(this.b0)*Math.sin(u)-Math.sin(this.b0)*Math.cos(u)*Math.cos(h));return l.y=this.R/2*Math.log((1+Math.sin(f))/(1-Math.sin(f)))+this.y0,l.x=this.R*d+this.x0,l},inverse:function(l){for(var c=(l.x-this.x0)/this.R,u=2*(Math.atan(Math.exp((l.y-this.y0)/this.R))-Math.PI/4),h=Math.asin(Math.cos(this.b0)*Math.sin(u)+Math.sin(this.b0)*Math.cos(u)*Math.cos(c)),d=Math.atan(Math.sin(c)/(Math.cos(this.b0)*Math.cos(c)-Math.sin(this.b0)*Math.tan(u))),f=this.lambda0+d/this.alpha,m=0,g=h,y=-1e3,v=0;Math.abs(g-y)>1e-7;){if(++v>20)return;m=1/this.alpha*(Math.log(Math.tan(Math.PI/4+h/2))-this.K)+this.e*Math.log(Math.tan(Math.PI/4+Math.asin(this.e*Math.sin(g))/2)),y=g,g=2*Math.atan(Math.exp(m))-Math.PI/2}return l.x=f,l.y=g,l},names:["somerc"]};var O_=1e-7;const FPe={init:function(){var l,a,o,c,u,h,d,f,m,g,v,y=0,_=0,b=0,w=0,C=0,E=0,M=0;this.no_off=function(l){var o="object"==typeof l.PROJECTION?Object.keys(l.PROJECTION)[0]:l.PROJECTION;return"no_uoff"in l||"no_off"in l||-1!==["Hotine_Oblique_Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin"].indexOf(o)}(this),this.no_rot="no_rot"in this;var R=!1;"alpha"in this&&(R=!0);var P=!1;if("rectified_grid_angle"in this&&(P=!0),R&&(M=this.alpha),P&&(y=this.rectified_grid_angle*na),R||P)_=this.longc;else if(b=this.long1,C=this.lat1,w=this.long2,E=this.lat2,Math.abs(C-E)<=O_||(l=Math.abs(C))<=O_||Math.abs(l-Nt)<=O_||Math.abs(Math.abs(this.lat0)-Nt)<=O_||Math.abs(Math.abs(E)-Nt)<=O_)throw new Error;var k=1-this.es;a=Math.sqrt(k),Math.abs(this.lat0)>cn?(f=Math.sin(this.lat0),o=Math.cos(this.lat0),l=1-this.es*f*f,this.B=o*o,this.B=Math.sqrt(1+this.es*this.B*this.B/k),this.A=this.B*this.k0*a/l,(u=(c=this.B*a/(o*Math.sqrt(l)))*c-1)<=0?u=0:(u=Math.sqrt(u),this.lat0<0&&(u=-u)),this.E=u+=c,this.E*=Math.pow(Au(this.e,this.lat0,f),this.B)):(this.B=1/a,this.A=this.k0,this.E=c=u=1),R||P?(R?(v=Math.asin(Math.sin(M)/c),P||(y=M)):(v=y,M=Math.asin(c*Math.sin(v))),this.lam0=_-Math.asin(.5*(u-1/u)*Math.tan(v))/this.B):(h=Math.pow(Au(this.e,C,Math.sin(C)),this.B),d=Math.pow(Au(this.e,E,Math.sin(E)),this.B),u=this.E/h,m=(d-h)/(d+h),g=((g=this.E*this.E)-d*h)/(g+d*h),(l=b-w)<-Math.pi?w-=t1:l>Math.pi&&(w+=t1),this.lam0=yn(.5*(b+w)-Math.atan(g*Math.tan(.5*this.B*(b-w))/m)/this.B),v=Math.atan(2*Math.sin(this.B*yn(b-this.lam0))/(u-1/u)),y=M=Math.asin(c*Math.sin(v))),this.singam=Math.sin(v),this.cosgam=Math.cos(v),this.sinrot=Math.sin(y),this.cosrot=Math.cos(y),this.rB=1/this.B,this.ArB=this.A*this.rB,this.BrA=1/this.ArB,this.no_off?this.u_0=0:(this.u_0=Math.abs(this.ArB*Math.atan(Math.sqrt(c*c-1)/Math.cos(M))),this.lat0<0&&(this.u_0=-this.u_0)),u=.5*v,this.v_pole_n=this.ArB*Math.log(Math.tan(Ti-u)),this.v_pole_s=this.ArB*Math.log(Math.tan(Ti+u))},forward:function(l){var o,c,u,h,d,f,m,g,a={};if(l.x=l.x-this.lam0,Math.abs(Math.abs(l.y)-Nt)>cn){if(o=.5*((d=this.E/Math.pow(Au(this.e,l.y,Math.sin(l.y)),this.B))-(f=1/d)),c=.5*(d+f),h=Math.sin(this.B*l.x),u=(o*this.singam-h*this.cosgam)/c,Math.abs(Math.abs(u)-1)<cn)throw new Error;g=.5*this.ArB*Math.log((1-u)/(1+u)),f=Math.cos(this.B*l.x),m=Math.abs(f)<O_?this.A*l.x:this.ArB*Math.atan2(o*this.cosgam+h*this.singam,f)}else g=l.y>0?this.v_pole_n:this.v_pole_s,m=this.ArB*l.y;return this.no_rot?(a.x=m,a.y=g):(a.x=g*this.cosrot+(m-=this.u_0)*this.sinrot,a.y=m*this.cosrot-g*this.sinrot),a.x=this.a*a.x+this.x0,a.y=this.a*a.y+this.y0,a},inverse:function(l){var a,o,c,u,h,d,f,m={};if(l.x=1/this.a*(l.x-this.x0),l.y=1/this.a*(l.y-this.y0),this.no_rot?(o=l.y,a=l.x):(o=l.x*this.cosrot-l.y*this.sinrot,a=l.y*this.cosrot+l.x*this.sinrot+this.u_0),u=.5*((c=Math.exp(-this.BrA*o))-1/c),h=.5*(c+1/c),f=((d=Math.sin(this.BrA*a))*this.cosgam+u*this.singam)/h,Math.abs(Math.abs(f)-1)<cn)m.x=0,m.y=f<0?-Nt:Nt;else{if(m.y=this.E/Math.sqrt((1+f)/(1-f)),m.y=s1(this.e,Math.pow(m.y,1/this.B)),m.y===1/0)throw new Error;m.x=-this.rB*Math.atan2(u*this.cosgam-d*this.singam,Math.cos(this.BrA*a))}return m.x+=this.lam0,m},names:["Hotine_Oblique_Mercator","Hotine Oblique Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin","Hotine_Oblique_Mercator_Two_Point_Natural_Origin","Hotine_Oblique_Mercator_Azimuth_Center","Oblique_Mercator","omerc"]},GPe={init:function(){if(this.lat2||(this.lat2=this.lat1),this.k0||(this.k0=1),this.x0=this.x0||0,this.y0=this.y0||0,!(Math.abs(this.lat1+this.lat2)<cn)){var l=this.b/this.a;this.e=Math.sqrt(1-l*l);var a=Math.sin(this.lat1),o=Math.cos(this.lat1),c=Lh(this.e,a,o),u=Au(this.e,this.lat1,a),h=Math.sin(this.lat2),d=Math.cos(this.lat2),f=Lh(this.e,h,d),m=Au(this.e,this.lat2,h),g=Au(this.e,this.lat0,Math.sin(this.lat0));this.ns=Math.abs(this.lat1-this.lat2)>cn?Math.log(c/f)/Math.log(u/m):a,isNaN(this.ns)&&(this.ns=a),this.f0=c/(this.ns*Math.pow(u,this.ns)),this.rh=this.a*this.f0*Math.pow(g,this.ns),this.title||(this.title="Lambert Conformal Conic")}},forward:function(l){var a=l.x,o=l.y;Math.abs(2*Math.abs(o)-Math.PI)<=cn&&(o=r1(o)*(Nt-2*cn));var u,h,c=Math.abs(Math.abs(o)-Nt);if(c>cn)u=Au(this.e,o,Math.sin(o)),h=this.a*this.f0*Math.pow(u,this.ns);else{if((c=o*this.ns)<=0)return null;h=0}var d=this.ns*yn(a-this.long0);return l.x=this.k0*(h*Math.sin(d))+this.x0,l.y=this.k0*(this.rh-h*Math.cos(d))+this.y0,l},inverse:function(l){var a,o,c,u,h,d=(l.x-this.x0)/this.k0,f=this.rh-(l.y-this.y0)/this.k0;this.ns>0?(a=Math.sqrt(d*d+f*f),o=1):(a=-Math.sqrt(d*d+f*f),o=-1);var m=0;if(0!==a&&(m=Math.atan2(o*d,o*f)),0!==a||this.ns>0){if(o=1/this.ns,c=Math.pow(a/(this.a*this.f0),o),-9999===(u=s1(this.e,c)))return null}else u=-Nt;return h=yn(m/this.ns+this.long0),l.x=h,l.y=u,l},names:["Lambert Tangential Conformal Conic Projection","Lambert_Conformal_Conic","Lambert_Conformal_Conic_1SP","Lambert_Conformal_Conic_2SP","lcc"]},qPe={init:function(){this.a=6377397.155,this.es=.006674372230614,this.e=Math.sqrt(this.es),this.lat0||(this.lat0=.863937979737193),this.long0||(this.long0=.4334234309119251),this.k0||(this.k0=.9999),this.s45=.785398163397448,this.s90=2*this.s45,this.fi0=this.lat0,this.e2=this.es,this.e=Math.sqrt(this.e2),this.alfa=Math.sqrt(1+this.e2*Math.pow(Math.cos(this.fi0),4)/(1-this.e2)),this.uq=1.04216856380474,this.u0=Math.asin(Math.sin(this.fi0)/this.alfa),this.g=Math.pow((1+this.e*Math.sin(this.fi0))/(1-this.e*Math.sin(this.fi0)),this.alfa*this.e/2),this.k=Math.tan(this.u0/2+this.s45)/Math.pow(Math.tan(this.fi0/2+this.s45),this.alfa)*this.g,this.k1=this.k0,this.n0=this.a*Math.sqrt(1-this.e2)/(1-this.e2*Math.pow(Math.sin(this.fi0),2)),this.s0=1.37008346281555,this.n=Math.sin(this.s0),this.ro0=this.k1*this.n0/Math.tan(this.s0),this.ad=this.s90-this.uq},forward:function(l){var a,o,c,u,h,d,f,g=l.y,y=yn(l.x-this.long0);return a=Math.pow((1+this.e*Math.sin(g))/(1-this.e*Math.sin(g)),this.alfa*this.e/2),o=2*(Math.atan(this.k*Math.pow(Math.tan(g/2+this.s45),this.alfa)/a)-this.s45),c=-y*this.alfa,u=Math.asin(Math.cos(this.ad)*Math.sin(o)+Math.sin(this.ad)*Math.cos(o)*Math.cos(c)),h=Math.asin(Math.cos(o)*Math.sin(c)/Math.cos(u)),d=this.n*h,f=this.ro0*Math.pow(Math.tan(this.s0/2+this.s45),this.n)/Math.pow(Math.tan(u/2+this.s45),this.n),l.y=f*Math.cos(d)/1,l.x=f*Math.sin(d)/1,this.czech||(l.y*=-1,l.x*=-1),l},inverse:function(l){var a,o,c,u,d,f,m,g=l.x;l.x=l.y,l.y=g,this.czech||(l.y*=-1,l.x*=-1),d=Math.sqrt(l.x*l.x+l.y*l.y),u=Math.atan2(l.y,l.x)/Math.sin(this.s0),c=2*(Math.atan(Math.pow(this.ro0/d,1/this.n)*Math.tan(this.s0/2+this.s45))-this.s45),a=Math.asin(Math.cos(this.ad)*Math.sin(c)-Math.sin(this.ad)*Math.cos(c)*Math.cos(u)),o=Math.asin(Math.cos(c)*Math.sin(u)/Math.cos(a)),l.x=this.long0-o/this.alfa,f=a,m=0;var y=0;do{l.y=2*(Math.atan(Math.pow(this.k,-1/this.alfa)*Math.pow(Math.tan(a/2+this.s45),1/this.alfa)*Math.pow((1+this.e*Math.sin(f))/(1-this.e*Math.sin(f)),this.e/2))-this.s45),Math.abs(f-l.y)<1e-10&&(m=1),f=l.y,y+=1}while(0===m&&y<15);return y>=15?null:l},names:["Krovak","krovak"]};function ja(l,a,o,c,u){return l*u-a*Math.sin(2*u)+o*Math.sin(4*u)-c*Math.sin(6*u)}function c1(l){return 1-.25*l*(1+l/16*(3+1.25*l))}function u1(l){return.375*l*(1+.25*l*(1+.46875*l))}function h1(l){return.05859375*l*l*(1+.75*l)}function d1(l){return l*l*l*(35/3072)}function N_(l,a,o){var c=a*o;return l/Math.sqrt(1-c*c)}function F_(l){return Math.abs(l)<Nt?l:l-r1(l)*Math.PI}function OD(l,a,o,c,u){var h,d;h=l/a;for(var f=0;f<15;f++)if(h+=d=(l-(a*h-o*Math.sin(2*h)+c*Math.sin(4*h)-u*Math.sin(6*h)))/(a-2*o*Math.cos(2*h)+4*c*Math.cos(4*h)-6*u*Math.cos(6*h)),Math.abs(d)<=1e-10)return h;return NaN}const KPe={init:function(){this.sphere||(this.e0=c1(this.es),this.e1=u1(this.es),this.e2=h1(this.es),this.e3=d1(this.es),this.ml0=this.a*ja(this.e0,this.e1,this.e2,this.e3,this.lat0))},forward:function(l){var a,o,c=l.x,u=l.y;if(c=yn(c-this.long0),this.sphere)a=this.a*Math.asin(Math.cos(u)*Math.sin(c)),o=this.a*(Math.atan2(Math.tan(u),Math.cos(c))-this.lat0);else{var h=Math.sin(u),d=Math.cos(u),f=N_(this.a,this.e,h),m=Math.tan(u)*Math.tan(u),g=c*Math.cos(u),y=g*g,v=this.es*d*d/(1-this.es);a=f*g*(1-y*m*(1/6-(8-m+8*v)*y/120)),o=this.a*ja(this.e0,this.e1,this.e2,this.e3,u)-this.ml0+f*h/d*y*(.5+(5-m+6*v)*y/24)}return l.x=a+this.x0,l.y=o+this.y0,l},inverse:function(l){l.x-=this.x0,l.y-=this.y0;var c,u,a=l.x/this.a,o=l.y/this.a;if(this.sphere){var h=o+this.lat0;c=Math.asin(Math.sin(h)*Math.cos(a)),u=Math.atan2(Math.tan(a),Math.cos(h))}else{var f=OD(this.ml0/this.a+o,this.e0,this.e1,this.e2,this.e3);if(Math.abs(Math.abs(f)-Nt)<=cn)return l.x=this.long0,l.y=Nt,o<0&&(l.y*=-1),l;var m=N_(this.a,this.e,Math.sin(f)),g=m*m*m/this.a/this.a*(1-this.es),y=Math.pow(Math.tan(f),2),v=a*this.a/m,_=v*v;c=f-m*Math.tan(f)/g*v*v*(.5-(1+3*y)*v*v/24),u=v*(1-_*(y/3+(1+3*y)*y*_/15))/Math.cos(f)}return l.x=yn(u+this.long0),l.y=F_(c),l},names:["Cassini","Cassini_Soldner","cass"]};function vp(l,a){var o;return l>1e-7?(1-l*l)*(a/(1-(o=l*a)*o)-.5/l*Math.log((1-o)/(1+o))):2*a}const pLe={init:function(){var a,l=Math.abs(this.lat0);if(this.mode=Math.abs(l-Nt)<cn?this.lat0<0?this.S_POLE:this.N_POLE:Math.abs(l)<cn?this.EQUIT:this.OBLIQ,this.es>0)switch(this.qp=vp(this.e,1),this.mmf=.5/(1-this.es),this.apa=function(l){var a,o=[];return o[0]=.3333333333333333*l,o[0]+=.17222222222222222*(a=l*l),o[1]=.06388888888888888*a,o[0]+=.10257936507936508*(a*=l),o[1]+=.0664021164021164*a,o[2]=.016415012942191543*a,o}(this.es),this.mode){case this.N_POLE:case this.S_POLE:this.dd=1;break;case this.EQUIT:this.rq=Math.sqrt(.5*this.qp),this.dd=1/this.rq,this.xmf=1,this.ymf=.5*this.qp;break;case this.OBLIQ:this.rq=Math.sqrt(.5*this.qp),a=Math.sin(this.lat0),this.sinb1=vp(this.e,a)/this.qp,this.cosb1=Math.sqrt(1-this.sinb1*this.sinb1),this.dd=Math.cos(this.lat0)/(Math.sqrt(1-this.es*a*a)*this.rq*this.cosb1),this.ymf=(this.xmf=this.rq)/this.dd,this.xmf*=this.dd}else this.mode===this.OBLIQ&&(this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0))},forward:function(l){var a,o,c,u,h,d,f,m,g,y,v=l.x,_=l.y;if(v=yn(v-this.long0),this.sphere){if(h=Math.sin(_),y=Math.cos(_),c=Math.cos(v),this.mode===this.OBLIQ||this.mode===this.EQUIT){if((o=this.mode===this.EQUIT?1+y*c:1+this.sinph0*h+this.cosph0*y*c)<=cn)return null;a=(o=Math.sqrt(2/o))*y*Math.sin(v),o*=this.mode===this.EQUIT?h:this.cosph0*h-this.sinph0*y*c}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(c=-c),Math.abs(_+this.lat0)<cn)return null;o=Ti-.5*_,a=(o=2*(this.mode===this.S_POLE?Math.cos(o):Math.sin(o)))*Math.sin(v),o*=c}}else{switch(f=0,m=0,g=0,c=Math.cos(v),u=Math.sin(v),h=Math.sin(_),d=vp(this.e,h),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(f=d/this.qp,m=Math.sqrt(1-f*f)),this.mode){case this.OBLIQ:g=1+this.sinb1*f+this.cosb1*m*c;break;case this.EQUIT:g=1+m*c;break;case this.N_POLE:g=Nt+_,d=this.qp-d;break;case this.S_POLE:g=_-Nt,d=this.qp+d}if(Math.abs(g)<cn)return null;switch(this.mode){case this.OBLIQ:case this.EQUIT:g=Math.sqrt(2/g),o=this.mode===this.OBLIQ?this.ymf*g*(this.cosb1*f-this.sinb1*m*c):(g=Math.sqrt(2/(1+m*c)))*f*this.ymf,a=this.xmf*g*m*u;break;case this.N_POLE:case this.S_POLE:d>=0?(a=(g=Math.sqrt(d))*u,o=c*(this.mode===this.S_POLE?g:-g)):a=o=0}}return l.x=this.a*a+this.x0,l.y=this.a*o+this.y0,l},inverse:function(l){l.x-=this.x0,l.y-=this.y0;var c,u,h,d,f,m,g,a=l.x/this.a,o=l.y/this.a;if(this.sphere){var v,y=0,_=0;if((u=.5*(v=Math.sqrt(a*a+o*o)))>1)return null;switch(u=2*Math.asin(u),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(_=Math.sin(u),y=Math.cos(u)),this.mode){case this.EQUIT:u=Math.abs(v)<=cn?0:Math.asin(o*_/v),a*=_,o=y*v;break;case this.OBLIQ:u=Math.abs(v)<=cn?this.lat0:Math.asin(y*this.sinph0+o*_*this.cosph0/v),a*=_*this.cosph0,o=(y-Math.sin(u)*this.sinph0)*v;break;case this.N_POLE:o=-o,u=Nt-u;break;case this.S_POLE:u-=Nt}c=0!==o||this.mode!==this.EQUIT&&this.mode!==this.OBLIQ?Math.atan2(a,o):0}else{if(g=0,this.mode===this.OBLIQ||this.mode===this.EQUIT){if(a/=this.dd,o*=this.dd,(m=Math.sqrt(a*a+o*o))<cn)return l.x=this.long0,l.y=this.lat0,l;d=2*Math.asin(.5*m/this.rq),h=Math.cos(d),a*=d=Math.sin(d),this.mode===this.OBLIQ?(f=this.qp*(g=h*this.sinb1+o*d*this.cosb1/m),o=m*this.cosb1*h-o*this.sinb1*d):(f=this.qp*(g=o*d/m),o=m*h)}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(o=-o),!(f=a*a+o*o))return l.x=this.long0,l.y=this.lat0,l;g=1-f/this.qp,this.mode===this.S_POLE&&(g=-g)}c=Math.atan2(a,o),u=function(l,a){var o=l+l;return l+a[0]*Math.sin(o)+a[1]*Math.sin(o+o)+a[2]*Math.sin(o+o+o)}(Math.asin(g),this.apa)}return l.x=yn(this.long0+c),l.y=u,l},names:["Lambert Azimuthal Equal Area","Lambert_Azimuthal_Equal_Area","laea"],S_POLE:1,N_POLE:2,EQUIT:3,OBLIQ:4};function _p(l){return Math.abs(l)>1&&(l=l>1?1:-1),Math.asin(l)}const bLe={init:function(){Math.abs(this.lat1+this.lat2)<cn||(this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e3=Math.sqrt(this.es),this.sin_po=Math.sin(this.lat1),this.cos_po=Math.cos(this.lat1),this.t1=this.sin_po,this.con=this.sin_po,this.ms1=Lh(this.e3,this.sin_po,this.cos_po),this.qs1=vp(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat2),this.cos_po=Math.cos(this.lat2),this.t2=this.sin_po,this.ms2=Lh(this.e3,this.sin_po,this.cos_po),this.qs2=vp(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat0),this.cos_po=Math.cos(this.lat0),this.t3=this.sin_po,this.qs0=vp(this.e3,this.sin_po),this.ns0=Math.abs(this.lat1-this.lat2)>cn?(this.ms1*this.ms1-this.ms2*this.ms2)/(this.qs2-this.qs1):this.con,this.c=this.ms1*this.ms1+this.ns0*this.qs1,this.rh=this.a*Math.sqrt(this.c-this.ns0*this.qs0)/this.ns0)},forward:function(l){var a=l.x,o=l.y;this.sin_phi=Math.sin(o),this.cos_phi=Math.cos(o);var c=vp(this.e3,this.sin_phi),u=this.a*Math.sqrt(this.c-this.ns0*c)/this.ns0,h=this.ns0*yn(a-this.long0),d=u*Math.sin(h)+this.x0,f=this.rh-u*Math.cos(h)+this.y0;return l.x=d,l.y=f,l},inverse:function(l){var a,c,u,h,d;return l.x-=this.x0,l.y=this.rh-l.y+this.y0,this.ns0>=0?(a=Math.sqrt(l.x*l.x+l.y*l.y),c=1):(a=-Math.sqrt(l.x*l.x+l.y*l.y),c=-1),u=0,0!==a&&(u=Math.atan2(c*l.x,c*l.y)),c=a*this.ns0/this.a,d=this.sphere?Math.asin((this.c-c*c)/(2*this.ns0)):this.phi1z(this.e3,(this.c-c*c)/this.ns0),h=yn(u/this.ns0+this.long0),l.x=h,l.y=d,l},names:["Albers_Conic_Equal_Area","Albers","aea"],phi1z:function(l,a){var o,u,h,d,f=_p(.5*a);if(l<cn)return f;for(var m=l*l,g=1;g<=25;g++)if(f+=d=.5*(h=1-(u=l*(o=Math.sin(f)))*u)*h/Math.cos(f)*(a/(1-m)-o/h+.5/l*Math.log((1-u)/(1+u))),Math.abs(d)<=1e-7)return f;return null}},xLe={init:function(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0),this.infinity_dist=1e3*this.a,this.rc=1},forward:function(l){var a,o,c,u,d,f,m,y=l.y;return c=yn(l.x-this.long0),a=Math.sin(y),o=Math.cos(y),u=Math.cos(c),(d=this.sin_p14*a+this.cos_p14*o*u)>0||Math.abs(d)<=cn?(f=this.x0+1*this.a*o*Math.sin(c)/d,m=this.y0+1*this.a*(this.cos_p14*a-this.sin_p14*o*u)/d):(f=this.x0+this.infinity_dist*o*Math.sin(c),m=this.y0+this.infinity_dist*(this.cos_p14*a-this.sin_p14*o*u)),l.x=f,l.y=m,l},inverse:function(l){var a,o,c,u,h,d;return l.x=(l.x-this.x0)/this.a,l.y=(l.y-this.y0)/this.a,l.x/=this.k0,l.y/=this.k0,(a=Math.sqrt(l.x*l.x+l.y*l.y))?(u=Math.atan2(a,this.rc),o=Math.sin(u),d=_p((c=Math.cos(u))*this.sin_p14+l.y*o*this.cos_p14/a),h=Math.atan2(l.x*o,a*this.cos_p14*c-l.y*this.sin_p14*o),h=yn(this.long0+h)):(d=this.phic0,h=0),l.x=h,l.y=d,l},names:["gnom"]},RLe={init:function(){this.sphere||(this.k0=Lh(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)))},forward:function(l){var c,u,o=l.y,h=yn(l.x-this.long0);if(this.sphere)c=this.x0+this.a*h*Math.cos(this.lat_ts),u=this.y0+this.a*Math.sin(o)/Math.cos(this.lat_ts);else{var d=vp(this.e,Math.sin(o));c=this.x0+this.a*this.k0*h,u=this.y0+this.a*d*.5/this.k0}return l.x=c,l.y=u,l},inverse:function(l){var a,o;return l.x-=this.x0,l.y-=this.y0,this.sphere?(a=yn(this.long0+l.x/this.a/Math.cos(this.lat_ts)),o=Math.asin(l.y/this.a*Math.cos(this.lat_ts))):(o=function(l,a){var o=1-(1-l*l)/(2*l)*Math.log((1-l)/(1+l));if(Math.abs(Math.abs(a)-o)<1e-6)return a<0?-1*Nt:Nt;for(var u,h,d,f,c=Math.asin(.5*a),m=0;m<30;m++)if(h=Math.sin(c),d=Math.cos(c),f=l*h,c+=u=Math.pow(1-f*f,2)/(2*d)*(a/(1-l*l)-h/(1-f*f)+.5/l*Math.log((1-f)/(1+f))),Math.abs(u)<=1e-10)return c;return NaN}(this.e,2*l.y*this.k0/this.a),a=yn(this.long0+l.x/(this.a*this.k0))),l.x=a,l.y=o,l},names:["cea"]},FLe={init:function(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Equidistant Cylindrical (Plate Carre)",this.rc=Math.cos(this.lat_ts)},forward:function(l){var o=l.y,c=yn(l.x-this.long0),u=F_(o-this.lat0);return l.x=this.x0+this.a*c*this.rc,l.y=this.y0+this.a*u,l},inverse:function(l){var o=l.y;return l.x=yn(this.long0+(l.x-this.x0)/(this.a*this.rc)),l.y=F_(this.lat0+(o-this.y0)/this.a),l},names:["Equirectangular","Equidistant_Cylindrical","eqc"]},GLe={init:function(){this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=c1(this.es),this.e1=u1(this.es),this.e2=h1(this.es),this.e3=d1(this.es),this.ml0=this.a*ja(this.e0,this.e1,this.e2,this.e3,this.lat0)},forward:function(l){var c,u,h,o=l.y,d=yn(l.x-this.long0);if(h=d*Math.sin(o),this.sphere)Math.abs(o)<=cn?(c=this.a*d,u=-1*this.a*this.lat0):(c=this.a*Math.sin(h)/Math.tan(o),u=this.a*(F_(o-this.lat0)+(1-Math.cos(h))/Math.tan(o)));else if(Math.abs(o)<=cn)c=this.a*d,u=-1*this.ml0;else{var f=N_(this.a,this.e,Math.sin(o))/Math.tan(o);c=f*Math.sin(h),u=this.a*ja(this.e0,this.e1,this.e2,this.e3,o)-this.ml0+f*(1-Math.cos(h))}return l.x=c+this.x0,l.y=u+this.y0,l},inverse:function(l){var a,o,c,u,h,d,f,m,g;if(c=l.x-this.x0,u=l.y-this.y0,this.sphere)if(Math.abs(u+this.a*this.lat0)<=cn)a=yn(c/this.a+this.long0),o=0;else{var y;for(f=c*c/this.a/this.a+(d=this.lat0+u/this.a)*d,m=d,h=20;h;--h)if(m+=g=-1*(d*(m*(y=Math.tan(m))+1)-m-.5*(m*m+f)*y)/((m-d)/y-1),Math.abs(g)<=cn){o=m;break}a=yn(this.long0+Math.asin(c*Math.tan(m)/this.a)/Math.sin(o))}else if(Math.abs(u+this.ml0)<=cn)o=0,a=yn(this.long0+c/this.a);else{var v,_,b,w,C;for(f=c*c/this.a/this.a+(d=(this.ml0+u)/this.a)*d,m=d,h=20;h;--h)if(C=this.e*Math.sin(m),v=Math.sqrt(1-C*C)*Math.tan(m),_=this.a*ja(this.e0,this.e1,this.e2,this.e3,m),b=this.e0-2*this.e1*Math.cos(2*m)+4*this.e2*Math.cos(4*m)-6*this.e3*Math.cos(6*m),m-=g=(d*(v*(w=_/this.a)+1)-w-.5*v*(w*w+f))/(this.es*Math.sin(2*m)*(w*w+f-2*d*w)/(4*v)+(d-w)*(v*b-2/Math.sin(2*m))-b),Math.abs(g)<=cn){o=m;break}v=Math.sqrt(1-this.es*Math.pow(Math.sin(o),2))*Math.tan(o),a=yn(this.long0+Math.asin(c*v/this.a)/Math.sin(o))}return l.x=a,l.y=o,l},names:["Polyconic","poly"]},qLe={init:function(){this.A=[],this.A[1]=.6399175073,this.A[2]=-.1358797613,this.A[3]=.063294409,this.A[4]=-.02526853,this.A[5]=.0117879,this.A[6]=-.0055161,this.A[7]=.0026906,this.A[8]=-.001333,this.A[9]=67e-5,this.A[10]=-34e-5,this.B_re=[],this.B_im=[],this.B_re[1]=.7557853228,this.B_im[1]=0,this.B_re[2]=.249204646,this.B_im[2]=.003371507,this.B_re[3]=-.001541739,this.B_im[3]=.04105856,this.B_re[4]=-.10162907,this.B_im[4]=.01727609,this.B_re[5]=-.26623489,this.B_im[5]=-.36249218,this.B_re[6]=-.6870983,this.B_im[6]=-1.1651967,this.C_re=[],this.C_im=[],this.C_re[1]=1.3231270439,this.C_im[1]=0,this.C_re[2]=-.577245789,this.C_im[2]=-.007809598,this.C_re[3]=.508307513,this.C_im[3]=-.112208952,this.C_re[4]=-.15094762,this.C_im[4]=.18200602,this.C_re[5]=1.01418179,this.C_im[5]=1.64497696,this.C_re[6]=1.9660549,this.C_im[6]=2.5127645,this.D=[],this.D[1]=1.5627014243,this.D[2]=.5185406398,this.D[3]=-.03333098,this.D[4]=-.1052906,this.D[5]=-.0368594,this.D[6]=.007317,this.D[7]=.0122,this.D[8]=.00394,this.D[9]=-.0013},forward:function(l){var a,d=(l.y-this.lat0)/e1*1e-5,f=l.x-this.long0,m=1,g=0;for(a=1;a<=10;a++)g+=this.A[a]*(m*=d);var C,y=g,v=f,_=1,b=0,E=0,M=0;for(a=1;a<=6;a++)C=b*y+_*v,E=E+this.B_re[a]*(_=_*y-b*v)-this.B_im[a]*(b=C),M=M+this.B_im[a]*_+this.B_re[a]*b;return l.x=M*this.a+this.x0,l.y=E*this.a+this.y0,l},inverse:function(l){var a,v,d=(l.y-this.y0)/this.a,f=(l.x-this.x0)/this.a,m=1,g=0,_=0,b=0;for(a=1;a<=6;a++)v=g*d+m*f,_=_+this.C_re[a]*(m=m*d-g*f)-this.C_im[a]*(g=v),b=b+this.C_im[a]*m+this.C_re[a]*g;for(var w=0;w<this.iterations;w++){var x,C=_,E=b,R=d,P=f;for(a=2;a<=6;a++)x=E*_+C*b,R+=(a-1)*(this.B_re[a]*(C=C*_-E*b)-this.B_im[a]*(E=x)),P+=(a-1)*(this.B_im[a]*C+this.B_re[a]*E);C=1,E=0;var k=this.B_re[1],W=this.B_im[1];for(a=2;a<=6;a++)x=E*_+C*b,k+=a*(this.B_re[a]*(C=C*_-E*b)-this.B_im[a]*(E=x)),W+=a*(this.B_im[a]*C+this.B_re[a]*E);var U=k*k+W*W;_=(R*k+P*W)/U,b=(P*k-R*W)/U}var K=_,Q=b,se=1,te=0;for(a=1;a<=9;a++)te+=this.D[a]*(se*=K);var De=this.lat0+te*e1*1e5;return l.x=this.long0+Q,l.y=De,l},names:["New_Zealand_Map_Grid","nzmg"]},KLe={init:function(){},forward:function(l){var o=l.y,c=yn(l.x-this.long0),u=this.x0+this.a*c,h=this.y0+this.a*Math.log(Math.tan(Math.PI/4+o/2.5))*1.25;return l.x=u,l.y=h,l},inverse:function(l){l.x-=this.x0,l.y-=this.y0;var a=yn(this.long0+l.x/this.a),o=2.5*(Math.atan(Math.exp(.8*l.y/this.a))-Math.PI/4);return l.x=a,l.y=o,l},names:["Miller_Cylindrical","mill"]},rOe={init:function(){this.sphere?(this.n=1,this.m=0,this.es=0,this.C_y=Math.sqrt((this.m+1)/this.n),this.C_x=this.C_y/(this.m+1)):this.en=xY(this.es)},forward:function(l){var a,o,c=l.x,u=l.y;if(c=yn(c-this.long0),this.sphere){if(this.m)for(var h=this.n*Math.sin(u),d=20;d;--d){var f=(this.m*u+Math.sin(u)-h)/(this.m+Math.cos(u));if(u-=f,Math.abs(f)<cn)break}else u=1!==this.n?Math.asin(this.n*Math.sin(u)):u;a=this.a*this.C_x*c*(this.m+Math.cos(u)),o=this.a*this.C_y*u}else{var m=Math.sin(u),g=Math.cos(u);o=this.a*ID(u,m,g,this.en),a=this.a*c*g/Math.sqrt(1-this.es*m*m)}return l.x=a,l.y=o,l},inverse:function(l){var a,c,u;return l.x-=this.x0,c=l.x/this.a,l.y-=this.y0,a=l.y/this.a,this.sphere?(a/=this.C_y,c/=this.C_x*(this.m+Math.cos(a)),this.m?a=_p((this.m*a+Math.sin(a))/this.n):1!==this.n&&(a=_p(Math.sin(a)/this.n)),c=yn(c+this.long0),a=F_(a)):(a=EY(l.y/this.a,this.es,this.en),(u=Math.abs(a))<Nt?(u=Math.sin(a),c=yn(this.long0+l.x*Math.sqrt(1-this.es*u*u)/(this.a*Math.cos(a)))):u-cn<Nt&&(c=this.long0)),l.x=c,l.y=a,l},names:["Sinusoidal","sinu"]},lOe={init:function(){},forward:function(l){for(var o=l.y,c=yn(l.x-this.long0),u=o,h=Math.PI*Math.sin(o);;){var d=-(u+Math.sin(u)-h)/(1+Math.cos(u));if(u+=d,Math.abs(d)<cn)break}u/=2,Math.PI/2-Math.abs(o)<cn&&(c=0);var f=.900316316158*this.a*c*Math.cos(u)+this.x0,m=1.4142135623731*this.a*Math.sin(u)+this.y0;return l.x=f,l.y=m,l},inverse:function(l){var a,o;l.x-=this.x0,l.y-=this.y0,o=l.y/(1.4142135623731*this.a),Math.abs(o)>.999999999999&&(o=.999999999999),a=Math.asin(o);var c=yn(this.long0+l.x/(.900316316158*this.a*Math.cos(a)));c<-Math.PI&&(c=-Math.PI),c>Math.PI&&(c=Math.PI),o=(2*a+Math.sin(2*a))/Math.PI,Math.abs(o)>1&&(o=1);var u=Math.asin(o);return l.x=c,l.y=u,l},names:["Mollweide","moll"]},fOe={init:function(){Math.abs(this.lat1+this.lat2)<cn||(this.lat2=this.lat2||this.lat1,this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=c1(this.es),this.e1=u1(this.es),this.e2=h1(this.es),this.e3=d1(this.es),this.sinphi=Math.sin(this.lat1),this.cosphi=Math.cos(this.lat1),this.ms1=Lh(this.e,this.sinphi,this.cosphi),this.ml1=ja(this.e0,this.e1,this.e2,this.e3,this.lat1),Math.abs(this.lat1-this.lat2)<cn?this.ns=this.sinphi:(this.sinphi=Math.sin(this.lat2),this.cosphi=Math.cos(this.lat2),this.ms2=Lh(this.e,this.sinphi,this.cosphi),this.ml2=ja(this.e0,this.e1,this.e2,this.e3,this.lat2),this.ns=(this.ms1-this.ms2)/(this.ml2-this.ml1)),this.g=this.ml1+this.ms1/this.ns,this.ml0=ja(this.e0,this.e1,this.e2,this.e3,this.lat0),this.rh=this.a*(this.g-this.ml0))},forward:function(l){var c,a=l.x,o=l.y;if(this.sphere)c=this.a*(this.g-o);else{var u=ja(this.e0,this.e1,this.e2,this.e3,o);c=this.a*(this.g-u)}var h=this.ns*yn(a-this.long0),d=this.x0+c*Math.sin(h),f=this.y0+this.rh-c*Math.cos(h);return l.x=d,l.y=f,l},inverse:function(l){var a,o,c,u;l.x-=this.x0,l.y=this.rh-l.y+this.y0,this.ns>=0?(o=Math.sqrt(l.x*l.x+l.y*l.y),a=1):(o=-Math.sqrt(l.x*l.x+l.y*l.y),a=-1);var h=0;return 0!==o&&(h=Math.atan2(a*l.x,a*l.y)),this.sphere?(u=yn(this.long0+h/this.ns),c=F_(this.g-o/this.a),l.x=u,l.y=c,l):(c=OD(this.g-o/this.a,this.e0,this.e1,this.e2,this.e3),u=yn(this.long0+h/this.ns),l.x=u,l.y=c,l)},names:["Equidistant_Conic","eqdc"]},vOe={init:function(){this.R=this.a},forward:function(l){var u,h,o=l.y,c=yn(l.x-this.long0);Math.abs(o)<=cn&&(u=this.x0+this.R*c,h=this.y0);var d=_p(2*Math.abs(o/Math.PI));(Math.abs(c)<=cn||Math.abs(Math.abs(o)-Nt)<=cn)&&(u=this.x0,h=o>=0?this.y0+Math.PI*this.R*Math.tan(.5*d):this.y0+Math.PI*this.R*-Math.tan(.5*d));var f=.5*Math.abs(Math.PI/c-c/Math.PI),m=f*f,g=Math.sin(d),y=Math.cos(d),v=y/(g+y-1),b=v*(2/g-1),w=b*b,C=Math.PI*this.R*(f*(v-w)+Math.sqrt(m*(v-w)*(v-w)-(w+m)*(v*v-w)))/(w+m);c<0&&(C=-C),u=this.x0+C;var E=m+v;return C=Math.PI*this.R*(b*E-f*Math.sqrt((w+m)*(m+1)-E*E))/(w+m),h=o>=0?this.y0+C:this.y0-C,l.x=u,l.y=h,l},inverse:function(l){var a,o,c,u,h,d,f,m,g,y,v,_;return l.x-=this.x0,l.y-=this.y0,v=Math.PI*this.R,h=(c=l.x/v)*c+(u=l.y/v)*u,v=3*(u*u/(m=-2*(d=-Math.abs(u)*(1+h))+1+2*u*u+h*h)+(2*(f=d-2*u*u+c*c)*f*f/m/m/m-9*d*f/m/m)/27)/(g=(d-f*f/3/m)/m)/(y=2*Math.sqrt(-g/3)),Math.abs(v)>1&&(v=v>=0?1:-1),_=Math.acos(v)/3,o=l.y>=0?(-y*Math.cos(_+Math.PI/3)-f/3/m)*Math.PI:-(-y*Math.cos(_+Math.PI/3)-f/3/m)*Math.PI,a=Math.abs(c)<cn?this.long0:yn(this.long0+Math.PI*(h-1+Math.sqrt(1+2*(c*c-u*u)+h*h))/2/c),l.x=a,l.y=o,l},names:["Van_der_Grinten_I","VanDerGrinten","vandg"]},wOe={init:function(){this.sin_p12=Math.sin(this.lat0),this.cos_p12=Math.cos(this.lat0)},forward:function(l){var d,f,m,g,y,v,_,b,w,C,E,M,x,R,P,k,W,U,K,Q,se,te,a=l.x,o=l.y,c=Math.sin(l.y),u=Math.cos(l.y),h=yn(a-this.long0);return this.sphere?Math.abs(this.sin_p12-1)<=cn?(l.x=this.x0+this.a*(Nt-o)*Math.sin(h),l.y=this.y0-this.a*(Nt-o)*Math.cos(h),l):Math.abs(this.sin_p12+1)<=cn?(l.x=this.x0+this.a*(Nt+o)*Math.sin(h),l.y=this.y0+this.a*(Nt+o)*Math.cos(h),l):(U=this.sin_p12*c+this.cos_p12*u*Math.cos(h),W=(k=Math.acos(U))?k/Math.sin(k):1,l.x=this.x0+this.a*W*u*Math.sin(h),l.y=this.y0+this.a*W*(this.cos_p12*c-this.sin_p12*u*Math.cos(h)),l):(d=c1(this.es),f=u1(this.es),m=h1(this.es),g=d1(this.es),Math.abs(this.sin_p12-1)<=cn?(y=this.a*ja(d,f,m,g,Nt),v=this.a*ja(d,f,m,g,o),l.x=this.x0+(y-v)*Math.sin(h),l.y=this.y0-(y-v)*Math.cos(h),l):Math.abs(this.sin_p12+1)<=cn?(y=this.a*ja(d,f,m,g,Nt),v=this.a*ja(d,f,m,g,o),l.x=this.x0+(y+v)*Math.sin(h),l.y=this.y0+(y+v)*Math.cos(h),l):(_=c/u,b=N_(this.a,this.e,this.sin_p12),w=N_(this.a,this.e,c),C=Math.atan((1-this.es)*_+this.es*b*this.sin_p12/(w*u)),K=0===(E=Math.atan2(Math.sin(h),this.cos_p12*Math.tan(C)-this.sin_p12*Math.cos(h)))?Math.asin(this.cos_p12*Math.sin(C)-this.sin_p12*Math.cos(C)):Math.abs(Math.abs(E)-Math.PI)<=cn?-Math.asin(this.cos_p12*Math.sin(C)-this.sin_p12*Math.cos(C)):Math.asin(Math.sin(h)*Math.cos(C)/Math.sin(E)),M=this.e*this.sin_p12/Math.sqrt(1-this.es),x=this.e*this.cos_p12*Math.cos(E)/Math.sqrt(1-this.es),l.x=this.x0+(k=b*K*(1-(Q=K*K)*(P=x*x)*(1-P)/6+(se=Q*K)/8*(R=M*x)*(1-2*P)+(te=se*K)/120*(P*(4-7*P)-3*M*M*(1-7*P))-te*K/48*R))*Math.sin(E),l.y=this.y0+k*Math.cos(E),l))},inverse:function(l){var a,o,c,u,h,d,f,m,g,y,v,_,w,C,E,M,x,R,P,k,W,U,K;return l.x-=this.x0,l.y-=this.y0,this.sphere?(a=Math.sqrt(l.x*l.x+l.y*l.y))>2*Nt*this.a?void 0:(o=a/this.a,c=Math.sin(o),u=Math.cos(o),h=this.long0,Math.abs(a)<=cn?d=this.lat0:(d=_p(u*this.sin_p12+l.y*c*this.cos_p12/a),f=Math.abs(this.lat0)-Nt,h=Math.abs(f)<=cn?yn(this.lat0>=0?this.long0+Math.atan2(l.x,-l.y):this.long0-Math.atan2(-l.x,l.y)):yn(this.long0+Math.atan2(l.x*c,a*this.cos_p12*u-l.y*this.sin_p12*c))),l.x=h,l.y=d,l):(m=c1(this.es),g=u1(this.es),y=h1(this.es),v=d1(this.es),Math.abs(this.sin_p12-1)<=cn?(d=OD(((_=this.a*ja(m,g,y,v,Nt))-(a=Math.sqrt(l.x*l.x+l.y*l.y)))/this.a,m,g,y,v),h=yn(this.long0+Math.atan2(l.x,-1*l.y)),l.x=h,l.y=d,l):Math.abs(this.sin_p12+1)<=cn?(_=this.a*ja(m,g,y,v,Nt),d=OD(((a=Math.sqrt(l.x*l.x+l.y*l.y))-_)/this.a,m,g,y,v),h=yn(this.long0+Math.atan2(l.x,l.y)),l.x=h,l.y=d,l):(a=Math.sqrt(l.x*l.x+l.y*l.y),E=Math.atan2(l.x,l.y),w=N_(this.a,this.e,this.sin_p12),M=Math.cos(E),P=3*this.es*(1-(R=-(x=this.e*this.cos_p12*M)*x/(1-this.es)))*this.sin_p12*this.cos_p12*M/(1-this.es),U=1-R*(W=(k=a/w)-R*(1+R)*Math.pow(k,3)/6-P*(1+3*R)*Math.pow(k,4)/24)*W/2-k*W*W*W/6,C=Math.asin(this.sin_p12*Math.cos(W)+this.cos_p12*Math.sin(W)*M),h=yn(this.long0+Math.asin(Math.sin(E)*Math.sin(W)/Math.cos(C))),K=Math.sin(C),d=Math.atan2((K-this.es*U*this.sin_p12)*Math.tan(C),K*(1-this.es)),l.x=h,l.y=d,l))},names:["Azimuthal_Equidistant","aeqd"]},DOe={init:function(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0)},forward:function(l){var a,o,c,u,d,f,m,y=l.y;return c=yn(l.x-this.long0),a=Math.sin(y),o=Math.cos(y),u=Math.cos(c),((d=this.sin_p14*a+this.cos_p14*o*u)>0||Math.abs(d)<=cn)&&(f=1*this.a*o*Math.sin(c),m=this.y0+1*this.a*(this.cos_p14*a-this.sin_p14*o*u)),l.x=f,l.y=m,l},inverse:function(l){var a,o,c,u,h,d,f;return l.x-=this.x0,l.y-=this.y0,o=_p((a=Math.sqrt(l.x*l.x+l.y*l.y))/this.a),c=Math.sin(o),u=Math.cos(o),d=this.long0,Math.abs(a)<=cn?(f=this.lat0,l.x=d,l.y=f,l):(f=_p(u*this.sin_p14+l.y*c*this.cos_p14/a),h=Math.abs(this.lat0)-Nt,Math.abs(h)<=cn?(d=yn(this.lat0>=0?this.long0+Math.atan2(l.x,-l.y):this.long0-Math.atan2(-l.x,l.y)),l.x=d,l.y=f,l):(d=yn(this.long0+Math.atan2(l.x*c,a*this.cos_p14*u-l.y*this.sin_p14*c)),l.x=d,l.y=f,l))},names:["ortho"]};function ND(l,a,o,c){var u;return l<cn?(c.value=1,u=0):(u=Math.atan2(a,o),Math.abs(u)<=Ti?c.value=1:u>Ti&&u<=Nt+Ti?(c.value=2,u-=Nt):u>Nt+Ti||u<=-(Nt+Ti)?(c.value=3,u=u>=0?u-Gs:u+Gs):(c.value=4,u+=Nt)),u}function k_(l,a){var o=l+a;return o<-Gs?o+=t1:o>+Gs&&(o-=t1),o}const LOe={init:function(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Quadrilateralized Spherical Cube",this.face=this.lat0>=Nt-Ti/2?5:this.lat0<=-(Nt-Ti/2)?6:Math.abs(this.long0)<=Ti?1:Math.abs(this.long0)<=Nt+Ti?this.long0>0?2:4:3,0!==this.es&&(this.one_minus_f=1-(this.a-this.b)/this.a,this.one_minus_f_squared=this.one_minus_f*this.one_minus_f)},forward:function(l){var o,c,u,h,d,f,a={x:0,y:0},m={value:0};if(l.x-=this.long0,o=0!==this.es?Math.atan(this.one_minus_f_squared*Math.tan(l.y)):l.y,c=l.x,5===this.face)h=Nt-o,c>=Ti&&c<=Nt+Ti?(m.value=1,u=c-Nt):c>Nt+Ti||c<=-(Nt+Ti)?(m.value=2,u=c>0?c-Gs:c+Gs):c>-(Nt+Ti)&&c<=-Ti?(m.value=3,u=c+Nt):(m.value=4,u=c);else if(6===this.face)h=Nt+o,c>=Ti&&c<=Nt+Ti?(m.value=1,u=-c+Nt):c<Ti&&c>=-Ti?(m.value=2,u=-c):c<-Ti&&c>=-(Nt+Ti)?(m.value=3,u=-c-Nt):(m.value=4,u=c>0?-c+Gs:-c-Gs);else{var g,y,v,_,b,w;2===this.face?c=k_(c,+Nt):3===this.face?c=k_(c,+Gs):4===this.face&&(c=k_(c,-Nt)),_=Math.sin(o),b=Math.cos(o),w=Math.sin(c),g=b*Math.cos(c),y=b*w,v=_,1===this.face?u=ND(h=Math.acos(g),v,y,m):2===this.face?u=ND(h=Math.acos(y),v,-g,m):3===this.face?u=ND(h=Math.acos(-g),v,-y,m):4===this.face?u=ND(h=Math.acos(-y),v,g,m):(h=u=0,m.value=1)}return f=Math.atan(12/Gs*(u+Math.acos(Math.sin(u)*Math.cos(Ti))-Nt)),d=Math.sqrt((1-Math.cos(h))/(Math.cos(f)*Math.cos(f))/(1-Math.cos(Math.atan(1/Math.cos(u))))),2===m.value?f+=Nt:3===m.value?f+=Gs:4===m.value&&(f+=1.5*Gs),a.x=d*Math.cos(f),a.y=d*Math.sin(f),a.x=a.x*this.a+this.x0,a.y=a.y*this.a+this.y0,l.x=a.x,l.y=a.y,l},inverse:function(l){var o,c,u,h,d,f,m,g,y,C,E,M,a={lam:0,phi:0},v={value:0};if(l.x=(l.x-this.x0)/this.a,l.y=(l.y-this.y0)/this.a,c=Math.atan(Math.sqrt(l.x*l.x+l.y*l.y)),o=Math.atan2(l.y,l.x),l.x>=0&&l.x>=Math.abs(l.y)?v.value=1:l.y>=0&&l.y>=Math.abs(l.x)?(v.value=2,o-=Nt):l.x<0&&-l.x>=Math.abs(l.y)?(v.value=3,o=o<0?o+Gs:o-Gs):(v.value=4,o+=Nt),y=Gs/12*Math.tan(o),d=Math.sin(y)/(Math.cos(y)-1/Math.sqrt(2)),f=Math.atan(d),(m=1-(u=Math.cos(o))*u*(h=Math.tan(c))*h*(1-Math.cos(Math.atan(1/Math.cos(f)))))<-1?m=-1:m>1&&(m=1),5===this.face)g=Math.acos(m),a.phi=Nt-g,a.lam=1===v.value?f+Nt:2===v.value?f<0?f+Gs:f-Gs:3===v.value?f-Nt:f;else if(6===this.face)g=Math.acos(m),a.phi=g-Nt,a.lam=1===v.value?-f+Nt:2===v.value?-f:3===v.value?-f-Nt:f<0?-f-Gs:-f+Gs;else{var _,b,w;y=(_=m)*_,b=(y+=(w=y>=1?0:Math.sqrt(1-y)*Math.sin(f))*w)>=1?0:Math.sqrt(1-y),2===v.value?(y=b,b=-w,w=y):3===v.value?(b=-b,w=-w):4===v.value&&(y=b,b=w,w=-y),2===this.face?(y=_,_=-b,b=y):3===this.face?(_=-_,b=-b):4===this.face&&(y=_,_=b,b=-y),a.phi=Math.acos(-w)-Nt,a.lam=Math.atan2(b,_),2===this.face?a.lam=k_(a.lam,-Nt):3===this.face?a.lam=k_(a.lam,-Gs):4===this.face&&(a.lam=k_(a.lam,+Nt))}return 0!==this.es&&(C=a.phi<0?1:0,E=Math.tan(a.phi),M=this.b/Math.sqrt(E*E+this.one_minus_f_squared),a.phi=Math.atan(Math.sqrt(this.a*this.a-M*M)/(this.one_minus_f*M)),C&&(a.phi=-a.phi)),a.lam+=this.long0,l.x=a.lam,l.y=a.phi,l},names:["Quadrilateralized Spherical Cube","Quadrilateralized_Spherical_Cube","qsc"]};var jk=[[1,22199e-21,-715515e-10,31103e-10],[.9986,-482243e-9,-24897e-9,-13309e-10],[.9954,-83103e-8,-448605e-10,-9.86701e-7],[.99,-.00135364,-59661e-9,36777e-10],[.9822,-.00167442,-449547e-11,-572411e-11],[.973,-.00214868,-903571e-10,1.8736e-8],[.96,-.00305085,-900761e-10,164917e-11],[.9427,-.00382792,-653386e-10,-26154e-10],[.9216,-.00467746,-10457e-8,481243e-11],[.8962,-.00536223,-323831e-10,-543432e-11],[.8679,-.00609363,-113898e-9,332484e-11],[.835,-.00698325,-640253e-10,9.34959e-7],[.7986,-.00755338,-500009e-10,9.35324e-7],[.7597,-.00798324,-35971e-9,-227626e-11],[.7186,-.00851367,-701149e-10,-86303e-10],[.6732,-.00986209,-199569e-9,191974e-10],[.6213,-.010418,883923e-10,624051e-11],[.5722,-.00906601,182e-6,624051e-11],[.5322,-.00677797,275608e-9,624051e-11]],f1=[[-520417e-23,.0124,121431e-23,-845284e-16],[.062,.0124,-1.26793e-9,4.22642e-10],[.124,.0124,5.07171e-9,-1.60604e-9],[.186,.0123999,-1.90189e-8,6.00152e-9],[.248,.0124002,7.10039e-8,-2.24e-8],[.31,.0123992,-2.64997e-7,8.35986e-8],[.372,.0124029,9.88983e-7,-3.11994e-7],[.434,.0123893,-369093e-11,-4.35621e-7],[.4958,.0123198,-102252e-10,-3.45523e-7],[.5571,.0121916,-154081e-10,-5.82288e-7],[.6176,.0119938,-241424e-10,-5.25327e-7],[.6769,.011713,-320223e-10,-5.16405e-7],[.7346,.0113541,-397684e-10,-6.09052e-7],[.7903,.0109107,-489042e-10,-104739e-11],[.8435,.0103431,-64615e-9,-1.40374e-9],[.8936,.00969686,-64636e-9,-8547e-9],[.9394,.00840947,-192841e-9,-42106e-10],[.9761,.00616527,-256e-6,-42106e-10],[1,.00328947,-319159e-9,-42106e-10]],FD=function(l,a){return l[0]+a*(l[1]+a*(l[2]+a*l[3]))};const GOe={init:function(){this.x0=this.x0||0,this.y0=this.y0||0,this.long0=this.long0||0,this.es=0,this.title=this.title||"Robinson"},forward:function(l){var a=yn(l.x-this.long0),o=Math.abs(l.y),c=Math.floor(11.459155902616464*o);c<0?c=0:c>=18&&(c=17);var u={x:FD(jk[c],o=Ph*(o-.08726646259971647*c))*a,y:FD(f1[c],o)};return l.y<0&&(u.y=-u.y),u.x=u.x*this.a*.8487+this.x0,u.y=u.y*this.a*1.3523+this.y0,u},inverse:function(l){var a={x:(l.x-this.x0)/(.8487*this.a),y:Math.abs(l.y-this.y0)/(1.3523*this.a)};if(a.y>=1)a.x/=jk[18][0],a.y=l.y<0?-Nt:Nt;else{var o=Math.floor(18*a.y);for(o<0?o=0:o>=18&&(o=17);;)if(f1[o][0]>a.y)--o;else{if(!(f1[o+1][0]<=a.y))break;++o}var c=f1[o],u=5*(a.y-c[0])/(f1[o+1][0]-c[0]);u=function(l,a,o,c){for(var u=a;c;--c){var h=l(u);if(u-=h,Math.abs(h)<1e-10)break}return u}(function(h){return(FD(c,h)-a.y)/function(l,a){return l[1]+a*(2*l[2]+3*a*l[3])}(c,h)},u,0,100),a.x/=FD(jk[o],u),a.y=(5*o+u)*na,l.y<0&&(a.y=-a.y)}return a.x=yn(a.x+this.long0),a},names:["Robinson","robin"]},qOe={init:function(){this.name="geocent"},forward:function(l){return sY(l,this.es,this.a)},inverse:function(l){return oY(l,this.es,this.a,this.b)},names:["Geocentric","geocentric","geocent","Geocent"]};var p1={h:{def:1e5,num:!0},azi:{def:0,num:!0,degrees:!0},tilt:{def:0,num:!0,degrees:!0},long0:{def:0,num:!0},lat0:{def:0,num:!0}};const KOe={init:function(){if(Object.keys(p1).forEach(function(o){if(void 0===this[o])this[o]=p1[o].def;else{if(p1[o].num&&isNaN(this[o]))throw new Error("Invalid parameter value, must be numeric "+o+" = "+this[o]);p1[o].num&&(this[o]=parseFloat(this[o]))}p1[o].degrees&&(this[o]=this[o]*na)}.bind(this)),Math.abs(Math.abs(this.lat0)-Nt)<cn?this.mode=this.lat0<0?1:0:Math.abs(this.lat0)<cn?this.mode=2:(this.mode=3,this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0)),this.pn1=this.h/this.a,this.pn1<=0||this.pn1>1e10)throw new Error("Invalid height");this.p=1+this.pn1,this.rp=1/this.p,this.h1=1/this.pn1,this.pfact=(this.p+1)*this.h1,this.es=0;var l=this.tilt,a=this.azi;this.cg=Math.cos(a),this.sg=Math.sin(a),this.cw=Math.cos(l),this.sw=Math.sin(l)},forward:function(l){l.x-=this.long0;var u,h,d,f,a=Math.sin(l.y),o=Math.cos(l.y),c=Math.cos(l.x);switch(this.mode){case 3:h=this.sinph0*a+this.cosph0*o*c;break;case 2:h=o*c;break;case 1:h=-a;break;case 0:h=a}switch(u=(h=this.pn1/(this.p-h))*o*Math.sin(l.x),this.mode){case 3:h*=this.cosph0*a-this.sinph0*o*c;break;case 2:h*=a;break;case 0:h*=-o*c;break;case 1:h*=o*c}return u=(u*this.cg-h*this.sg)*this.cw*(f=1/((d=h*this.cg+u*this.sg)*this.sw*this.h1+this.cw)),h=d*f,l.x=u*this.a,l.y=h*this.a,l},inverse:function(l){l.x/=this.a,l.y/=this.a;var o,c,u,a={x:l.x,y:l.y};l.x=(o=this.pn1*l.x*(u=1/(this.pn1-l.y*this.sw)))*this.cg+(c=this.pn1*l.y*this.cw*u)*this.sg,l.y=c*this.cg-o*this.sg;var h=PD(l.x,l.y);if(Math.abs(h)<cn)a.x=0,a.y=l.y;else{var d,f;switch(f=1-h*h*this.pfact,f=(this.p-Math.sqrt(f))/(this.pn1/h+h/this.pn1),d=Math.sqrt(1-f*f),this.mode){case 3:a.y=Math.asin(d*this.sinph0+l.y*f*this.cosph0/h),l.y=(d-this.sinph0*Math.sin(a.y))*h,l.x*=f*this.cosph0;break;case 2:a.y=Math.asin(l.y*f/h),l.y=d*h,l.x*=f;break;case 0:a.y=Math.asin(d),l.y=-l.y;break;case 1:a.y=-Math.asin(d)}a.x=Math.atan2(l.x,l.y)}return l.x=a.x+this.long0,l.y=a.y,l},names:["Tilted_Perspective","tpers"]};Zl.defaultDatum="WGS84",Zl.Proj=o1,Zl.WGS84=new Zl.Proj("WGS84"),Zl.Point=F2e,Zl.toPoint=uY,Zl.defs=xD,Zl.nadgrid=function(l,a){var o=new DataView(a),c=function(l){var a=l.getInt32(8,!1);return 11!==a&&(11!==(a=l.getInt32(8,!0))&&console.warn("Failed to detect nadgrid endian-ness, defaulting to little-endian"),!0)}(o),u=function(l,a){return{nFields:l.getInt32(8,a),nSubgridFields:l.getInt32(24,a),nSubgrids:l.getInt32(40,a),shiftType:kk(l,56,64).trim(),fromSemiMajorAxis:l.getFloat64(120,a),fromSemiMinorAxis:l.getFloat64(136,a),toSemiMajorAxis:l.getFloat64(152,a),toSemiMinorAxis:l.getFloat64(168,a)}}(o,c);u.nSubgrids>1&&console.log("Only single NTv2 subgrids are currently supported, subsequent sub grids are ignored");var h=function(l,a,o){for(var u=[],h=0;h<a.nSubgrids;h++){var d=g2e(l,176,o),f=y2e(l,176,d,o),m=Math.round(1+(d.upperLongitude-d.lowerLongitude)/d.longitudeInterval),g=Math.round(1+(d.upperLatitude-d.lowerLatitude)/d.latitudeInterval);u.push({ll:[I_(d.lowerLongitude),I_(d.lowerLatitude)],del:[I_(d.longitudeInterval),I_(d.latitudeInterval)],lim:[m,g],count:d.gridNodeCount,cvs:m2e(f)})}return u}(o,u,c),d={header:u,subgrids:h};return iY[l]=d,d},Zl.transform=AD,Zl.mgrs=E2e,Zl.version="__VERSION__",function(l){l.Proj.projections.add(RD),l.Proj.projections.add(LD),l.Proj.projections.add(cPe),l.Proj.projections.add(_Pe),l.Proj.projections.add(xPe),l.Proj.projections.add(IPe),l.Proj.projections.add(FPe),l.Proj.projections.add(GPe),l.Proj.projections.add(qPe),l.Proj.projections.add(KPe),l.Proj.projections.add(pLe),l.Proj.projections.add(bLe),l.Proj.projections.add(xLe),l.Proj.projections.add(RLe),l.Proj.projections.add(FLe),l.Proj.projections.add(GLe),l.Proj.projections.add(qLe),l.Proj.projections.add(KLe),l.Proj.projections.add(rOe),l.Proj.projections.add(lOe),l.Proj.projections.add(fOe),l.Proj.projections.add(vOe),l.Proj.projections.add(wOe),l.Proj.projections.add(DOe),l.Proj.projections.add(LOe),l.Proj.projections.add(GOe),l.Proj.projections.add(qOe),l.Proj.projections.add(KOe)}(Zl);const kD=Zl;function Wk(l){let a=[];for(const o of l)if(o instanceof Js){const u=Wk(o.getLayers().getArray());a=Array.prototype.concat(a,u)}else a.push(o);return a}const Wa=l=>{let a=[];for(const o of l){let c;c=Array.isArray(o[0])?Wa(o):o,a=Array.prototype.concat(a,c)}return a},OY=(l,a)=>Math.log(l)/Math.log(a),VD=(l,a)=>OY(l,a)%1==0,NY=(l,a,o)=>{const c=l.createShader(a);if(!c)throw new Error("No shader was created");if(l.shaderSource(c,o),l.compileShader(c),!l.getShaderParameter(c,l.COMPILE_STATUS))throw l.deleteShader(c),new Error(`An error occurred compiling the shader: ${l.getShaderInfoLog(c)}.    \n\n Shader code: ${o}`);return c},FY=(l,a)=>{l.useProgram(a)},aNe=(l,a,o)=>{l.bindBuffer(l.ARRAY_BUFFER,o.buffer),l.enableVertexAttribArray(a),l.vertexAttribPointer(a,o.vectorSize,o.type,o.normalize,o.stride,o.offset)},pNe=(l,a,o,c)=>{if(o>l.getParameter(l.MAX_COMBINED_TEXTURE_IMAGE_UNITS))throw new Error(`There are only ${l.getParameter(l.MAX_COMBINED_TEXTURE_IMAGE_UNITS)} texture bind points, but you tried to bind to point nr. ${o}.`);7===o&&console.error(`You are about to bind to the dedicated texture-construction bind point (nr. ${o}).\n        If after this call another texture is built, your shader will now use that new texture instead of this one!\n        Consider using another bind point.`),l.activeTexture(l.TEXTURE0+o),l.bindTexture(l.TEXTURE_2D,a),l.uniform1i(c,o)},qk=(l,a,o)=>{const c=l.getUniformLocation(a,o);if(null===c)throw new Error(`Couldn't find uniform ${o} in program.`);return c},bNe=(l,a,o,c)=>{switch(o){case"bool":l.uniform1i(a,c[0]);break;case"bvec2":l.uniform2i(a,c[0],c[1]);break;case"bvec3":l.uniform3i(a,c[0],c[1],c[2]);break;case"bvec4":l.uniform4i(a,c[0],c[1],c[2],c[3]);break;case"bool[]":l.uniform1iv(a,c);break;case"bvec2[]":l.uniform2iv(a,c);break;case"bvec3[]":l.uniform3iv(a,c);break;case"bvec4[]":l.uniform4iv(a,c);break;case"int":l.uniform1i(a,c[0]);break;case"ivec2":l.uniform2i(a,c[0],c[1]);break;case"ivec3":l.uniform3i(a,c[0],c[1],c[2]);break;case"ivec4":l.uniform4i(a,c[0],c[1],c[2],c[3]);break;case"int[]":l.uniform1iv(a,c);break;case"ivec2[]":l.uniform2iv(a,c);break;case"ivec3[]":l.uniform3iv(a,c);break;case"ivec4[]":l.uniform4iv(a,c);break;case"float":l.uniform1f(a,c[0]);break;case"vec2":l.uniform2f(a,c[0],c[1]);break;case"vec3":l.uniform3f(a,c[0],c[1],c[2]);break;case"vec4":l.uniform4f(a,c[0],c[1],c[2],c[3]);break;case"float[]":l.uniform1fv(a,c);break;case"vec2[]":l.uniform2fv(a,c);break;case"vec3[]":l.uniform3fv(a,c);break;case"vec4[]":l.uniform4fv(a,c);break;case"mat2":l.uniformMatrix2fv(a,!1,c);break;case"mat3":l.uniformMatrix3fv(a,!1,c);break;case"mat4":l.uniformMatrix4fv(a,!1,c);break;default:throw Error(`Type ${o} not implemented.`)}};class BD{constructor(a,o,c){this.vertexShaderSource=o,this.fragmentShaderSource=c,this.program=((l,a,o)=>{const c=l.createProgram();if(!c)throw new Error("No program was created");const u=NY(l,l.VERTEX_SHADER,a),h=NY(l,l.FRAGMENT_SHADER,o);if(l.attachShader(c,u),l.attachShader(c,h),l.linkProgram(c),l.detachShader(c,u),l.detachShader(c,h),l.deleteShader(u),l.deleteShader(h),!l.getProgramParameter(c,l.LINK_STATUS))throw l.deleteProgram(c),new Error("Unable to initialize the shader program: "+l.getProgramInfoLog(c));return c})(a,o,c),this.id=function(l){let a=0;for(const o of l)a+=o.charCodeAt(0);return`${a}`}(o+c)}}class _a{constructor(a,o,c,u,h){this.location=qk(a,o.program,c),this.type=u,this.value=h,this.variableName=c}}class Xk{constructor(a,o,c,u,h){this.location=qk(a,o.program,c),this.texture=u instanceof HTMLImageElement||u instanceof HTMLCanvasElement?((l,a)=>{const o=l.createTexture();if(!o)throw new Error("No texture was created");l.activeTexture(l.TEXTURE0+7),l.bindTexture(l.TEXTURE_2D,o);const u=l.RGBA,h=l.RGBA,d=l.UNSIGNED_BYTE;let f,m;return l.texImage2D(l.TEXTURE_2D,0,u,h,d,a),l.generateMipmap(l.TEXTURE_2D),l.bindTexture(l.TEXTURE_2D,null),a instanceof HTMLImageElement?(f=a.naturalWidth,m=a.naturalHeight):(f=a.width,m=a.height),{texture:o,level:0,internalformat:u,format:h,type:d,width:f,height:m,border:0}})(a,u):u,this.bindPoint=h,this.variableName=c}}class wNe{constructor(a,o,c,u,h){this.location=qk(a,o.program,c),this.texture=((l,a)=>{const o=a.length,c=a[0].length,u=a[0][0].length;if(!VD(c,2)||!VD(o,2))throw new Error(`Texture-data-dimensions must be a power of two, but are ${c} x ${o}`);if(4!==u)throw new Error(`Expecting 4 channels, but ${u} provided`);const h=l.createTexture();if(!h)throw new Error("No texture was created");l.activeTexture(l.TEXTURE0+7),l.bindTexture(l.TEXTURE_2D,h);const m=l.RGBA,g=l.RGBA,y=l.UNSIGNED_BYTE,v=new Uint8Array(Wa(a));return 4!==u&&l.pixelStorei(l.UNPACK_ALIGNMENT,1),l.texImage2D(l.TEXTURE_2D,0,m,c,o,0,g,y,v),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_WRAP_S,l.CLAMP_TO_EDGE),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_WRAP_T,l.CLAMP_TO_EDGE),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_MIN_FILTER,l.NEAREST),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_MAG_FILTER,l.NEAREST),l.bindTexture(l.TEXTURE_2D,null),{texture:h,level:0,internalformat:m,format:g,type:y,width:c,height:o,border:0}})(a,u),this.bindPoint=h,this.variableName=c}}class bp{constructor(a,o,c,u,h="triangles"){let d;switch(h){case"triangles":d=a.TRIANGLES;break;case"lines":d=a.LINES;break;case"points":d=a.POINTS;break;default:throw new Error(`Invalid drawing mode ${h}`)}this.location=((l,a,o)=>{const c=l.getAttribLocation(a,o);if(-1===c)throw new Error(`Couldn't find attribute ${o} in program.`);return c})(a,o.program,c),this.value=((l,a,o=l.TRIANGLES)=>{const c=new Float32Array(Wa(a)),u=l.createBuffer();if(!u)throw new Error("No buffer was created");return l.bindBuffer(l.ARRAY_BUFFER,u),l.bufferData(l.ARRAY_BUFFER,c,l.STATIC_DRAW),l.bindBuffer(l.ARRAY_BUFFER,null),{buffer:u,vectorSize:a[0].length,vectorCount:a.length,type:l.FLOAT,normalize:!1,stride:0,offset:0,drawingMode:o}})(a,u,d),this.variableName=c,this.drawingMode=d}}class CNe{constructor(a,o,c="triangles"){let u;switch(c){case"triangles":u=a.TRIANGLES;break;case"lines":u=a.LINES;break;case"points":u=a.POINTS;break;default:throw new Error(`Invalid drawing mode ${c}`)}this.index=((l,a,o=l.TRIANGLES)=>{const c=new Uint16Array(Wa(a)),u=l.createBuffer();if(!u)throw new Error("No buffer was created");return l.bindBuffer(l.ELEMENT_ARRAY_BUFFER,u),l.bufferData(l.ELEMENT_ARRAY_BUFFER,c,l.STATIC_DRAW),l.bindBuffer(l.ELEMENT_ARRAY_BUFFER,null),{buffer:u,count:c.length,type:l.UNSIGNED_SHORT,offset:0,drawingMode:o}})(a,o,u)}}function $k(l,a){for(const o of l)if(a(o))return o;return null}class UD{constructor(a,o,c,u,h){this.program=a,this.attributes=o,this.uniforms=c,this.textures=u,this.index=h;const[d,f,m,g]=function(l){const a=/^\s*attribute (int|float|vec2|vec3|vec4|mat2|mat3|mat4) (\w*);/gm,o=/^\s*uniform (int|float|vec2|vec3|vec4|mat2|mat3|mat4) (\w*)(\[\d\])*;/gm,c=/^\s*uniform sampler2D (\w*);/gm,u=/^\s*precision (\w*) float;/gm,h=l.fragmentShaderSource+"\n\n\n"+l.vertexShaderSource,d=[];let f;for(;null!==(f=a.exec(h));)d.push(f[2]);const m=[];let g;for(;null!==(g=o.exec(h));)m.push(g[2]);const y=[];let v;for(;null!==(v=c.exec(h));)y.push(v[1]);const _=[];let b;for(;null!==(b=u.exec(h));)_.push(b[1]);return[d,m,y,_]}(a);for(const v of d){const _=o.filter(b=>b.variableName===v);if(1!==_.length)throw new Error(`Provided ${_.length} values for shader's attribute ${v}.`)}for(const v of f){const _=c.filter(b=>b.variableName===v);if(1!==_.length)throw new Error(`Provided ${_.length} values for shader's uniform ${v}.`)}for(const v of m){const _=u.filter(b=>b.variableName===v);if(1!==_.length)throw new Error(`Provided ${_.length} values for shader's texture ${v}.`)}1===g.length&&console.warn("You have only provided one precision qualifier.\n            This can cause issues when you want to use a uniform in both the vertex- and the fragment-shader.");const y=this.attributes.map(v=>v.value.vectorCount);if(Math.min(...y)!==Math.max(...y))throw new Error("Your attributes are not of the same length!")}bind(a){FY(a,this.program.program);for(const o of this.attributes)aNe(a,o.location,o.value);for(const o of this.uniforms)bNe(a,o.location,o.type,o.value);for(const o of this.textures)pNe(a,o.texture.texture,o.bindPoint,o.location);this.index&&((l,a)=>{l.bindBuffer(l.ELEMENT_ARRAY_BUFFER,this.index.index.buffer)})(a)}render(a,o,c,u){c?((l,a,o)=>{l.bindFramebuffer(l.FRAMEBUFFER,a.framebuffer),o?(a.width/a.height!=o[2]/o[3]&&console.warn("Your viewport-aspect is different from the framebuffer-aspect."),l.viewport(...o)):l.viewport(0,0,a.width,a.height)})(a,c,u):((l,a)=>{l.bindFramebuffer(l.FRAMEBUFFER,null),a?(l.canvas.width/l.canvas.height!=a[2]/a[3]&&console.warn("Your viewport-aspect is different from the canvas-aspect."),l.viewport(...a)):l.viewport(0,0,l.canvas.width,l.canvas.height)})(a,u),o&&((l,a)=>{l.clearColor(a[0],a[1],a[2],a[3]),l.clearDepth(1),l.clear(l.COLOR_BUFFER_BIT|l.DEPTH_BUFFER_BIT)})(a,o),this.index?((l,a)=>{l.drawElements(a.drawingMode,a.count,a.type,a.offset)})(a,this.index.index):((l,a)=>{l.drawArrays(a.drawingMode,a.offset,a.vectorCount)})(a,this.attributes[0].value)}updateAttributeData(a,o,c){const u=$k(this.attributes,h=>h.variableName===o);if(!u)throw new Error(`No such attribute ${o} to be updated.`);((l,a,o)=>{const c=new Float32Array(Wa(o));l.bindBuffer(l.ARRAY_BUFFER,a.buffer),l.bufferData(l.ARRAY_BUFFER,c,l.STATIC_DRAW),l.bindBuffer(l.ARRAY_BUFFER,null)})(a,u.value,c)}updateUniformData(a,o,c){const u=$k(this.uniforms,h=>h.variableName===o);if(!u)throw new Error(`No such uniform ${o} to be updated.`);u.value=c}updateTextureData(a,o,c){const u=$k(this.textures,d=>d.variableName===o);if(!u)throw new Error(`No such texture ${o} to be updated.`);const h=((l,a,o)=>{if(l.activeTexture(l.TEXTURE0+7),l.bindTexture(l.TEXTURE_2D,a.texture),o instanceof HTMLImageElement||o instanceof HTMLCanvasElement)l.texImage2D(l.TEXTURE_2D,0,l.RGBA,l.RGBA,l.UNSIGNED_BYTE,o);else{const c=o[0].length,u=o.length;if(!VD(c,2)||!VD(u,2))throw new Error(`Texture-data-dimensions must be a power of two, but are ${u} x ${c}`);const h=new Uint8Array(Wa(o));l.texImage2D(l.TEXTURE_2D,a.level,a.internalformat,a.width,a.height,a.border,a.format,a.type,h)}return l.generateMipmap(l.TEXTURE_2D),l.bindTexture(l.TEXTURE_2D,null),o instanceof HTMLImageElement?(a.width=o.naturalWidth,a.height=o.naturalHeight):o instanceof HTMLCanvasElement?(a.width=o.width,a.height=o.height):(a.width=o[0].length,a.height=o.length),a})(a,u.texture,c);u.texture=h}}class VY{constructor(a,o,c){const u=(l=>{const a=l.createFramebuffer();if(!a)throw new Error("Error creating framebuffer");return a})(a),d=((l,a,o)=>{if(l.bindFramebuffer(l.FRAMEBUFFER,o),l.framebufferTexture2D(l.FRAMEBUFFER,l.COLOR_ATTACHMENT0,l.TEXTURE_2D,a.texture,0),l.checkFramebufferStatus(l.FRAMEBUFFER)!==l.FRAMEBUFFER_COMPLETE)throw new Error(`Error creating framebuffer: framebuffer-status: ${l.checkFramebufferStatus(l.FRAMEBUFFER)} ; error-code: ${l.getError()}`);return l.bindFramebuffer(l.FRAMEBUFFER,null),{framebuffer:o,texture:a,width:a.width,height:a.height}})(a,((l,a,o)=>{if(a<=0||o<=0)throw new Error("Width and height must be positive.");const c=l.createTexture();if(!c)throw new Error("No texture was created");return l.activeTexture(l.TEXTURE0+7),l.bindTexture(l.TEXTURE_2D,c),l.texImage2D(l.TEXTURE_2D,0,l.RGBA,a,o,0,l.RGBA,l.UNSIGNED_BYTE,null),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_WRAP_S,l.CLAMP_TO_EDGE),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_WRAP_T,l.CLAMP_TO_EDGE),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_MIN_FILTER,l.NEAREST),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_MAG_FILTER,l.NEAREST),l.bindTexture(l.TEXTURE_2D,null),{texture:c,level:0,internalformat:l.RGBA,format:l.RGBA,type:l.UNSIGNED_BYTE,width:a,height:o,border:0}})(a,o,c),u);this.fbo=d}}const g1=(l,a)=>({vertices:[[-l/2,a/2,0],[-l/2,-a/2,0],[l/2,-a/2,0],[-l/2,a/2,0],[l/2,-a/2,0],[l/2,a/2,0]],texturePositions:[[0,1],[0,0],[1,0],[0,1],[1,0],[1,1]]});class ANe extends o_{constructor(a){super(a)}createRenderer(){return this.renderer=new INe(this),this.renderer}updateSunAngle(a){this.renderer.updateSunAngle(a)}}class INe extends wT{constructor(a){super(a),this.state="loading";const o=document.createElement("canvas");o.width=1200,o.height=800,o.style.position="absolute";const c=o.getContext("webgl"),u=a.getSource(),h=u.getProjection(),d=u.getImageExtent(),f=this.bboxOntoRectangle(2,2,d),m=((l,a=256,o=256,c="red")=>{const u=document.createElement("canvas").getContext("2d");if(!u)throw new Error("no context");return u.canvas.width=a,u.canvas.height=o,u.font=`bold ${5*o/6|0}px sans-serif`,u.textAlign="center",u.textBaseline="middle",u.fillStyle=c,u.fillText(l,a/2,o/2),u.canvas})("test",2048,2048,"red"),g=new BD(c,"\n            attribute vec3 a_position;\n            attribute vec2 a_texturePosition;\n            uniform mat3 u_world2pix;\n            uniform mat3 u_pix2canv;\n            varying vec2 v_texturePosition;\n            void main() {\n                vec3 pixelPosition = u_world2pix * vec3(a_position.x, a_position.y, 1.);\n                vec3 canvasPosition = u_pix2canv * pixelPosition;\n                gl_Position = vec4(canvasPosition.x, canvasPosition.y, 0., 1.);\n                v_texturePosition = a_texturePosition;\n            }\n        ","\n            precision mediump float;\n            uniform sampler2D u_srtm;\n            uniform float u_imageSize;\n            uniform vec3 u_sun;\n            varying vec2 v_texturePosition;\n            void main() {\n                float delta = 4. / u_imageSize;\n                float top = texture2D(u_srtm, vec2(v_texturePosition.x,         1. - v_texturePosition.y + delta)).r;\n                float bot = texture2D(u_srtm, vec2(v_texturePosition.x,         1. - v_texturePosition.y - delta)).r;\n                float lft = texture2D(u_srtm, vec2(v_texturePosition.x + delta, 1. - v_texturePosition.y        )).r;\n                float rgt = texture2D(u_srtm, vec2(v_texturePosition.x - delta, 1. - v_texturePosition.y        )).r;\n\n                vec3 surfaceNormal = vec3(\n                    lft - rgt,\n                    bot - top,\n                    2. * delta\n                );\n                surfaceNormal = normalize(surfaceNormal);\n                vec3 sunNormal = normalize(u_sun);\n                float alignment = abs(dot(sunNormal, surfaceNormal));\n\n                gl_FragColor = vec4(0., 0., 0., 0.5 * alignment);\n            }\n        ");FY(c,g.program);const y=new UD(g,[new bp(c,g,"a_position",f.vertices),new bp(c,g,"a_texturePosition",f.texturePositions)],[new _a(c,g,"u_imageSize","float",[2048]),new _a(c,g,"u_sun","vec3",[0,0,1]),new _a(c,g,"u_world2pix","mat3",Wa([[1,0,0],[0,1,0],[0,0,1]])),new _a(c,g,"u_pix2canv","mat3",Wa([[1/(o.width/2),0,0],[0,-1/(o.height/2),0],[-1,1,1]]))],[new Xk(c,g,"u_srtm",m,0)]);y.bind(c),this.shader=y,this.canvas=o,this.gl=c,this.projection=h;const v=u.getImage(d,.02197265625,2.440000295639038,h);v.addEventListener("change",_=>{const b=v.getImage();this.shader.updateTextureData(this.gl,"u_srtm",b),this.shader.bind(this.gl),this.state="ready",super.getLayer().changed()}),v.load()}prepareFrame(a){if("ready"===this.state){const o=a.coordinateToPixelTransform;this.shader.updateUniformData(this.gl,"u_world2pix",Wa([[o[0],o[1],0],[o[2],o[3],0],[o[4],o[5],1]])),this.shader.bind(this.gl),a.viewState.projection!==this.projection&&this.reprojectImage(a.viewState.projection)}return!0}renderFrame(a,o){return"ready"===this.state&&(this.shader.render(this.gl),this.transformCanvas(a)),this.canvas}renderDeclutter(a){}updateSunAngle(a){this.shader.updateUniformData(this.gl,"u_sun",[a[0],a[1],1]),this.shader.bind(this.gl),this.shader.render(this.gl)}bboxOntoRectangle(a,o,c){const u=g1(a,o);for(const h of u.vertices){const f=h[1];h[0]=h[0]===a/2?c[2]:c[0],h[1]=f===o/2?c[3]:c[1]}return u}reprojectImage(a){const o=super.getLayer().getSource(),c=o.getProjection(),h=Ba(o.getImageExtent(),c,a),d=this.bboxOntoRectangle(2,2,h);this.shader.updateAttributeData(this.gl,"a_position",d.vertices),this.shader.bind(this.gl)}transformCanvas(a){const o=a.layerStatesArray[a.layerIndex],c=a.pixelRatio,u=a.size,h=Math.round(u[0]*c),d=Math.round(u[1]*c),f=o.opacity;this.canvas.width=h,this.canvas.height=d,this.canvas.style.opacity=`${f}`,this.shader.updateUniformData(this.gl,"u_pix2canv",Wa([[1/(this.canvas.width/2),0,0],[0,-1/(this.canvas.height/2),0],[-1,1,1]]))}}class RNe extends Tu{constructor(a){super(a),this.options=a}createRenderer(){return new PNe(this,this.options.renderSettings)}updateParas(a,o,c){const u={colorRamp:this.options.renderSettings.colorRamp,maxEdgeLength:this.options.renderSettings.maxEdgeLength,storeInterpolatedPixelData:this.options.renderSettings.storeInterpolatedPixelData,valueProperty:this.options.renderSettings.valueProperty,power:a,showLabels:c,smooth:o};super.getRenderer().updateSettings(u),this.options.renderSettings=u}}class PNe extends wT{constructor(a,o){super(a),this.settings=o,this.container=document.createElement("div"),this.container.classList.add("ol-layer"),this.container.style.setProperty("position","absolute"),this.container.style.setProperty("width","100%"),this.container.style.setProperty("height","100%"),this.webGlCanvas=document.createElement("canvas"),this.webGlCanvas.style.setProperty("position","absolute"),this.webGlCanvas.style.setProperty("left","0px"),this.webGlCanvas.style.setProperty("top","0px"),this.webGlCanvas.style.setProperty("width","100%"),this.webGlCanvas.style.setProperty("height","100%"),this.webGlCanvas.width=1e3,this.webGlCanvas.height=1e3,this.gl=this.webGlCanvas.getContext("webgl"),this.container.appendChild(this.webGlCanvas),this.pointRenderer=new lF(a);const c=a.getSource();this.projection=c.getProjection();const{coords:u,values:h,bboxDelta:d,maxVal:f}=this.parseData(c,this.settings.valueProperty,this.settings.maxEdgeLength),{observationsBbox:m,maxEdgeLengthBbox:g}=this.parseDataBbox(d,u,h,f,this.settings.maxEdgeLength);this.bbox=d;const y=[[1,0,0],[0,1,0],[0,0,1]];this.interpolationShader=ONe(this.gl,m,f,this.settings.power,g),this.valueFb=new VY(this.gl,this.webGlCanvas.width,this.webGlCanvas.height),this.colorizationShader=NNe(this.gl,this.settings.colorRamp,f,this.settings.smooth,this.valueFb),this.colorFb=new VY(this.gl,this.webGlCanvas.width,this.webGlCanvas.height),this.arrangementShader=FNe(this.gl,y,y,d,this.colorFb),this.runInterpolationShader(this.valueFb.fbo),this.runColorizationShader(this.colorFb.fbo)}prepareFrame(a){if(this.webGlCanvas.style.opacity=`${a.layerStatesArray[a.layerIndex].opacity}`,a.viewState.projection!==this.projection){this.projection=a.viewState.projection;const u=super.getLayer().getSource(),{coords:h,values:d,bboxDelta:f,maxVal:m}=this.parseData(u,this.settings.valueProperty,this.settings.maxEdgeLength),{observationsBbox:g,maxEdgeLengthBbox:y}=this.parseDataBbox(f,h,d,m,this.settings.maxEdgeLength);this.updateInterpolationShader(this.settings.power,g,y),this.runInterpolationShader(this.valueFb.fbo),this.runColorizationShader(this.colorFb.fbo),this.bbox=f}return this.updateArrangementShader(a.coordinateToPixelTransform,a.size[0],a.size[1],this.bbox),this.pointRenderer.prepareFrame(a),!0}renderFrame(a,o){if(this.runArrangementShader(),this.settings.showLabels){const c=this.pointRenderer.renderFrame(a,this.container);yN(this.container,[this.webGlCanvas,c])}else yN(this.container,[this.webGlCanvas]);return this.container}renderDeclutter(a){}updateSettings(a){const o=this.settings;this.settings=a,a.power!==o.power?(this.updateInterpolationShader(a.power),this.runInterpolationShader(this.valueFb.fbo),this.updateColorizationShader(a.smooth),this.runColorizationShader(this.colorFb.fbo)):a.smooth!==o.smooth&&(this.updateColorizationShader(a.smooth),this.runColorizationShader(this.colorFb.fbo)),super.getLayer().changed()}updateArrangementShader(a,o,c,u){const d=[[1/(o/2),0,0],[0,-1/(c/2),0],[-1,1,1]];this.arrangementShader.updateUniformData(this.gl,"u_world2pix",Wa([[a[0],a[1],0],[a[2],a[3],0],[a[4],a[5],1]])),this.arrangementShader.updateUniformData(this.gl,"u_pix2clip",Wa(d)),this.arrangementShader.updateUniformData(this.gl,"u_bbox",u)}runArrangementShader(a){this.arrangementShader.bind(this.gl),this.arrangementShader.render(this.gl,[0,0,0,0],a)}updateInterpolationShader(a,o,c){this.interpolationShader.updateUniformData(this.gl,"u_power",[a]),o&&this.interpolationShader.updateTextureData(this.gl,"u_dataTexture",[o]),c&&this.interpolationShader.updateUniformData(this.gl,"u_maxDistance",[c])}runInterpolationShader(a){this.interpolationShader.bind(this.gl),this.interpolationShader.render(this.gl,[0,0,0,0],a),this.settings.storeInterpolatedPixelData&&(this.interpolatedValues=(l=>{const a=l.getContext("webgl");if(!a)throw new Error("no context");const o=a.getParameter(a.IMPLEMENTATION_COLOR_READ_FORMAT),c=a.getParameter(a.IMPLEMENTATION_COLOR_READ_TYPE);let u;if(c===a.UNSIGNED_BYTE)u=new Uint8Array(a.drawingBufferWidth*a.drawingBufferHeight*4);else if(c===a.UNSIGNED_SHORT_5_6_5||c===a.UNSIGNED_SHORT_4_4_4_4||c===a.UNSIGNED_SHORT_5_5_5_1)u=new Uint16Array(a.drawingBufferWidth*a.drawingBufferHeight*4);else{if(c!==a.FLOAT)throw new Error(`Did not understand pixel data type ${c} for format ${o}`);u=new Float32Array(a.drawingBufferWidth*a.drawingBufferHeight*4)}return a.readPixels(0,0,l.width,l.height,o,c,u),u})(this.webGlCanvas))}updateColorizationShader(a){this.colorizationShader.updateUniformData(this.gl,"u_smooth",[a?1:0])}runColorizationShader(a){this.colorizationShader.bind(this.gl),this.colorizationShader.render(this.gl,[0,0,0,0],a)}parseData(a,o,c){let u=a.getFeatures();u=a instanceof Wd?a.getSource().getFeatures():a.getFeatures();const h=u.map(w=>w.getGeometry().getCoordinates()),d=u.map(w=>parseFloat(w.getProperties()[o])),f=kNe(h),m=f[2]-f[0],g=f[3]-f[1];let y,v;m>g?(v=m-g,y=0):(v=0,y=g-m);const _=[f[0]-c,f[1]-c,f[2]+y+c,f[3]+v+c],b=d.reduce((w,C)=>C>w?C:w,0);return{coords:h,values:d,bboxDelta:_,maxVal:b}}parseDataBbox(a,o,c,u,h){const d=VNe(o,c).map(_=>{const b=LNe([_[0],_[1]],a);return[255*(b[0]+1)/2,255*(b[1]+1)/2,255*_[2]/u,255]}),f=d.length,m=((l,a)=>{const o=Math.ceil(OY(l,2));return Math.pow(2,o)})(f);for(let _=0;_<m-f;_++)d.push([0,0,0,0]);return{observationsBbox:d,maxEdgeLengthBbox:h/Math.max(a[2]-a[0],a[3]-a[1])}}}const LNe=(l,a)=>[(l[0]-a[0])/(a[2]-a[0])*2-1,(l[1]-a[1])/(a[3]-a[1])*2-1],ONe=(l,a,o,c,u)=>{const d=new BD(l,"\n            precision mediump float;\n            attribute vec3 a_position;\n            attribute vec2 a_texturePosition;\n            varying vec2 v_position;\n            varying vec2 v_texturePosition;\n\n            void main() {\n                v_position = a_position.xy;\n                v_texturePosition = a_texturePosition;\n                gl_Position = vec4(a_position.xy, 0.0, 1.0);\n            }\n        ","\n            precision mediump float;\n            uniform float u_power;\n            uniform sampler2D u_dataTexture;\n            uniform int u_nrDataPoints;\n            uniform float u_maxValue;\n            uniform float u_maxDistance;\n            varying vec2 v_position;\n            varying vec2 v_texturePosition;\n\n            void main() {\n\n                float valSum = 0.0;\n                float wSum = 0.0;\n                float minD = 10000.0;\n                for (int i = 0; i < 10000; i++) {\n                    if (i > u_nrDataPoints) {\n                        break;\n                    }\n                    vec4 dataPoint = texture2D(u_dataTexture, vec2(float(i) / float(u_nrDataPoints), 0.5));\n                    if (dataPoint.w > 0.0) {  // texture is padded to next power of two with transparent 0-values.\n                        vec2 coords = dataPoint.xy * 2.0 - 1.0;  // transforming coords from [0, 1] to [-1, 1]\n                        float value = dataPoint.z * u_maxValue;  // transforming value from [0, 1] to [0, maxValue]\n\n                        float d = distance(v_position, coords);\n                        float w = 1.0 / pow(d, u_power);\n                        valSum += value * w;\n                        wSum += w;\n                        if (d < minD) {\n                            minD = d;\n                        }\n                    }\n                }\n                float interpolatedValue = valSum / wSum;\n                float alpha = 1.0;\n                if (minD > u_maxDistance) {\n                    alpha = 0.0;\n                }\n                vec4 color = vec4(interpolatedValue / u_maxValue, 0.0, 0.0, alpha);\n\n                gl_FragColor = color;\n            }\n        "),f={vertices:[[-1,1,0],[-1,-1,0],[1,-1,0],[1,1,0]],texturePositions:[[0,1],[0,0],[1,0],[1,1]],vertexIndices:[[0,1,2],[0,2,3]]};return new UD(d,[new bp(l,d,"a_position",f.vertices),new bp(l,d,"a_texturePosition",f.texturePositions)],[new _a(l,d,"u_power","float",[c]),new _a(l,d,"u_nrDataPoints","int",[a.length]),new _a(l,d,"u_maxValue","float",[o]),new _a(l,d,"u_maxDistance","float",[u])],[new wNe(l,d,"u_dataTexture",[a],0)],new CNe(l,f.vertexIndices))},NNe=(l,a,o,c,u)=>{const d=new BD(l,"\n            precision mediump float;\n            attribute vec2 a_position;\n            attribute vec2 a_textureCoord;\n            varying vec2 v_textureCoord;\n\n            void main() {\n                v_textureCoord = a_textureCoord;\n                gl_Position = vec4(a_position.xy, 0.0, 1.0);\n            }\n        ","\n            precision mediump float;\n            uniform float u_colorRampValues[15];\n            uniform vec3 u_colorRampColors[15];\n            uniform int u_nrColorRampValues;\n            uniform float u_maxValue;\n            uniform bool u_smooth;\n            uniform sampler2D u_valueTexture;\n            varying vec2 v_textureCoord;\n\n            vec3 valueToSmoothColor(in float value) {\n                if (value < u_colorRampValues[0]) {\n                    return u_colorRampColors[0];\n                }\n                for (int i = 1; i < 15; i++) {\n                    if (i > u_nrColorRampValues) {\n                        break;\n                    }\n                    if (value < u_colorRampValues[i]) {\n                        float alpha = (value - u_colorRampValues[i-1]) / (u_colorRampValues[i] - u_colorRampValues[i-1]);\n                        vec3 color = alpha * (u_colorRampColors[i] - u_colorRampColors[i-1]) + u_colorRampColors[i-1];\n                        return color;\n                    }\n                    if (i == u_nrColorRampValues) {\n                        return u_colorRampColors[i];\n                    }\n                }\n            }\n\n            vec3 valueToStepColor(in float value) {\n                for (int i = 0; i < 15; i++) {\n                    if (i > u_nrColorRampValues) {\n                        break;\n                    }\n                    if (value < u_colorRampValues[i]) {\n                        return u_colorRampColors[i];\n                    }\n                    if (i == u_nrColorRampValues) {\n                        return u_colorRampColors[i];\n                    }\n                }\n            }\n\n            void main() {\n                vec4 pixelData = texture2D(u_valueTexture, v_textureCoord);\n                float val = pixelData.r * u_maxValue;\n                float alpha = pixelData.w;\n                vec3 rgb = vec3(0.0, 0.0, 0.0);\n                if (alpha > 0.01) {\n                    if (u_smooth) {\n                        rgb = valueToSmoothColor(val);\n                    } else {\n                        rgb = valueToStepColor(val);\n                    }\n                }\n                gl_FragColor = vec4(rgb.x / 255.0, rgb.y / 255.0, rgb.z / 255.0, alpha);\n            }\n        ");return new UD(d,[new bp(l,d,"a_position",g1(2,2).vertices),new bp(l,d,"a_textureCoord",g1(2,2).texturePositions)],[new _a(l,d,"u_colorRampValues","float[]",a.map(m=>m.val)),new _a(l,d,"u_colorRampColors","vec3[]",Wa(a.map(m=>m.rgb))),new _a(l,d,"u_nrColorRampValues","int",[a.length]),new _a(l,d,"u_maxValue","float",[o]),new _a(l,d,"u_smooth","bool",[c?1:0])],[new Xk(l,d,"u_valueTexture",u.fbo.texture,0)])},FNe=(l,a,o,c,u)=>{const h=new BD(l,"\n            precision mediump float;\n            attribute vec3 a_pos;\n            attribute vec2 a_posTexture;\n            uniform mat3 u_world2pix;\n            uniform mat3 u_pix2clip;\n            uniform vec4 u_bbox;\n            varying vec2 v_posTexture;\n\n            vec2 clipBbx2worldCoords(vec2 clipCoords, vec4 bbox) {\n                float xPerct = ( clipCoords.x + 1.0 ) / 2.0;\n                float yPerct = ( clipCoords.y + 1.0 ) / 2.0;\n                float xWorld = xPerct * (bbox.z - bbox.x) + bbox.x;\n                float yWorld = yPerct * (bbox.w - bbox.y) + bbox.y;\n                return vec2(xWorld, yWorld);\n            }\n\n            void main() {\n                v_posTexture = a_posTexture;\n                vec2 worldPos = clipBbx2worldCoords(a_pos.xy, u_bbox);\n                vec3 clipPos = u_pix2clip * u_world2pix * vec3(worldPos.xy, 1.0);\n                gl_Position = vec4(clipPos.xy, 0.0, 1.0);\n            }\n        ","\n            precision mediump float;\n            uniform sampler2D u_texture;\n            varying vec2 v_posTexture;\n\n            void main() {\n                gl_FragColor = texture2D(u_texture, v_posTexture);\n            }\n        ");return new UD(h,[new bp(l,h,"a_pos",g1(2,2).vertices),new bp(l,h,"a_posTexture",g1(2,2).texturePositions)],[new _a(l,h,"u_world2pix","mat3",Wa(a)),new _a(l,h,"u_pix2clip","mat3",Wa(o)),new _a(l,h,"u_bbox","vec4",c)],[new Xk(l,h,"u_texture",u.fbo.texture,0)])},kNe=l=>{const a=l.map(f=>f[0]),o=l.map(f=>f[1]),c=Math.min(...a),u=Math.max(...a);return[c,Math.min(...o),u,Math.max(...o)]},VNe=(l,a)=>{const o=[];for(let c=0;c<l.length;c++)o.push(l[c].concat(a[c]));return o},Yk="type",qa="filtertype",_g="id",Zk="title",ko="EPSG:4326";let Qs=(()=>{class l{constructor(o,c,u){this.crf=o,this.app=c,this.injector=u,this.hitTolerance=0,this.hitLayerCurr=null,this.hitLayerPrev=null,this.projectionChange=new tt,this.dynamicPopupComponents=new Map,this.filterLayerNoPopup=h=>{const d=h.get("popup");let f=!0;return d&&this.isPopupObj(d)&&!0===d.filterLayer&&(f=!1),f},this.map=new G1e({controls:[]}),this.view=new bu,this.EPSG="EPSG:3857"}createMap(o){const h=new Js({layers:[]});h.set(qa,"baselayers"),h.set(Zk,"Base maps"),h.set(_g,"ID_filtertype_baselayers");const d=new Js({layers:[]});d.set(qa,"layers"),d.set(Zk,"Layers"),d.set(_g,"ID_filtertype_layers");const f=new Js({layers:[]});f.set(qa,"overlays"),f.set(Zk,"Overlays"),f.set(_g,"ID_filtertype_overlays"),this.viewOptions={center:ql([0,0],ko,this.EPSG),zoom:0,projection:Bn(this.EPSG)},this.view.constrainRotation&&(this.viewOptions.constrainRotation=this.view.constrainRotation),this.view.enableRotation&&(this.viewOptions.enableRotation=this.view.enableRotation),this.view.extent&&(this.viewOptions.extent=this.view.extent),this.view.constrainOnlyCenter&&(this.viewOptions.constrainOnlyCenter=this.view.constrainOnlyCenter),this.view.smoothExtentConstraint&&(this.viewOptions.smoothExtentConstraint=this.view.smoothExtentConstraint),this.view.getMaxResolution()&&(this.viewOptions.maxResolution=this.view.getMaxResolution()),this.view.getMinResolution()&&(this.viewOptions.minResolution=this.view.getMinResolution()),this.view.getMaxZoom()&&(this.viewOptions.maxZoom=this.view.getMaxZoom()),this.view.getMinZoom()&&(this.viewOptions.minZoom=this.view.getMinZoom()),this.view.multiWorld&&(this.viewOptions.multiWorld=this.view.multiWorld),this.view.constrainResolution&&(this.viewOptions.constrainResolution=this.view.constrainResolution),this.view.smoothResolutionConstraint&&(this.viewOptions.smoothResolutionConstraint=this.view.smoothResolutionConstraint),this.view.getResolution()&&(this.viewOptions.resolution=this.view.getResolution()),this.view.getResolutions()&&(this.viewOptions.resolutions=this.view.getResolutions()),this.view.rotation&&(this.viewOptions.rotation=this.view.rotation),this.view.zoomFactor&&(this.viewOptions.zoomFactor=this.view.zoomFactor);const m=new bu(this.viewOptions);return[h,d,f].map(g=>this.map.addLayer(g)),this.map.setView(m),this.view=this.map.getView(),this.setProjection(this.EPSG),o&&this.map.setTarget(o),{map:this.map,view:this.view}}setHitTolerance(o){this.hitTolerance=o}getHitTolerance(){return this.hitTolerance}addBboxSelection(o,c,u,h){Object.assign({className:"ol-drag-select",condition:o},h);const f=new UW(h);return c&&f.on("boxstart",m=>{c(m)}),u&&f.on("boxend",m=>{const g=f.getGeometry().getExtent();u(g,m)}),this.map.addInteraction(f),f}getLayers(o){const c=o.toLowerCase();let u;return this.map.getLayers().getArray().forEach(h=>{h.get(qa)===c&&(u=h.getLayers().getArray())}),u}getLayersFromGroup(o,c,u=!1){const h=o.getLayers().getArray();let d=h;if(u){let f=[].concat(h);h.forEach(m=>{m instanceof Js&&(f=f.concat(this.getLayersFromGroup(m,c,!0)))}),d=f}return c?d.filter(f=>f.get(qa)&&f.get(qa).toLowerCase()===c.toLowerCase()):d}getLayerByKey(o,c){const h=Wk(this.getLayersFromGroup(this.map.getLayerGroup(),c)),d=[];if(h.forEach(f=>{f.get(o.key)&&f.get(o.key)===o.value&&-1===d.indexOf(f)&&d.push(f)}),!d.length){const f=this.getLayersFromGroup(this.map.getLayerGroup(),c,!0);f.length&&f.forEach(m=>{m.get(o.key)&&m.get(o.key)===o.value&&-1===d.indexOf(m)&&d.push(m)})}return 1===d.length?d[0]:null}setRecursiveKey(o,c,u=qa){o.set(u,c),o instanceof Js&&o.getLayers().forEach(h=>{this.setRecursiveKey(h,c,u)})}addLayer(o,c){const u=c.toLowerCase();let h;return this.map.getLayers().getArray().forEach(d=>{d.get(qa)===u&&(this.isLayerInGroup(o,d)||(h=d.getLayers().getArray(),this.setRecursiveKey(o,u,qa),h.push(o),d.setLayers(new Qo(h))))}),h}isLayerInGroup(o,c){return!!c.getLayers().getArray().filter(d=>d.get("id")===o.get("id")).length}getLayerGroups(o){const c=[];return this.map.getLayers().forEach(u=>{u instanceof Js&&(o?u.get(qa)&&u.get(qa).toLowerCase()===o.toLowerCase()&&c.push(u):c.push(u))}),c}addLayers(o,c){const u=c.toLocaleLowerCase();let h;return this.getLayerGroups(u).forEach(f=>{f.getLayers().getLength()>0?(h=f.getLayers().getArray(),o.map(g=>{this.isLayerInGroup(g,f)||h.push(g)})):h=o,h.forEach(g=>{g instanceof Js&&this.setRecursiveKey(g,u,qa)}),f.setLayers(new Qo(h))}),h}setLayers(o,c){const u=c.toLocaleLowerCase(),h=this.getLayerGroups(u);return o.forEach(d=>{d instanceof Js&&this.setRecursiveKey(d,c.toLocaleLowerCase(),qa)}),h.forEach(d=>{this.cleanUpEventListeners(d,o),d.setLayers(new Qo(o))}),o}cleanUpEventListeners(o,c){const u=o.getLayers().getArray().filter(h=>!c.map(d=>d.get("id")).includes(h.get("id")));this.removeListenersFromOldLayers(u),u.forEach(h=>o.getLayers().remove(h))}addEventsToLayer(o,c,u){o.events&&(o.events.layer&&o.events.layer.forEach(h=>{c.getListeners(h.event)||c.on(h.event,h.listener)}),o.events.source&&o.events.source.forEach(h=>{u.getListeners(h.event)||u.on(h.event,h.listener)}))}removeListenersFromOldLayers(o){const c=u=>{if(u.hasListener()&&u.disposeInternal(),"function"==typeof u.getSource){const h=u.getSource();h&&h.hasListener()&&h.disposeInternal()}};o.forEach(u=>{u instanceof Js?u.getLayers().forEach(h=>{c(h)}):u instanceof hN&&c(u)})}getLayerGroupForLayer(o){const c=this.getLayersFromGroup(this.map.getLayerGroup(),null,!0);c.push(this.map.getLayerGroup());let u=null;return c.forEach(h=>{if(h instanceof Js){const f=this.getLayersFromGroup(h).find(m=>m===o);f&&(u={group:h,layer:f})}}),u}removeLayerByKey(o,c){const u=c.toLocaleLowerCase(),h=this.getLayerByKey(o,u);if(h){const d=this.getLayerGroupForLayer(h);if(d.group){const f=this.getLayersFromGroup(d.group).filter(m=>m!==h);d.group.setLayers(new Qo(f))}}}updateLayerByKey(o,c,u){const h=u.toLocaleLowerCase();this.map.getLayers().forEach(d=>{if(d.get(qa)===h){const f=d.getLayers();f.forEach((m,g)=>{if(m.get(o.key)&&m.get(o.key)===o.value){const y=c.getProperties(),v=c.getExtent(),_=c.getMaxZoom(),b=c.getMinZoom(),w=c.getOpacity(),C=c.getVisible(),E=c.getZIndex();if(m instanceof gl&&c instanceof gl){const M=c.getSource();m.setSource(M)}y&&m.setProperties(y),v&&m.setExtent(v),_&&m.setMaxZoom(_),b&&m.setMinZoom(b),w&&m.setOpacity(w),C&&m.setVisible(C),E&&m.setZIndex(E),m.changed(),f.setAt(g,m)}}),d.setLayers(f)}})}removeAllLayers(o){const c=o.toLowerCase();let u;this.map.getLayers().getArray().forEach(h=>{h.get(qa)===c&&(u=h.getLayers(),u.clear())})}setUkisLayers(o,c){const u=c.toLowerCase(),h=[];if(o.length<1&&"baselayers"!==u?this.removeAllLayers(u):o.forEach(d=>{const f=this.create_layers(d);f&&h.push(f)}),h.length>0)return this.setLayers(h,u),{type:u,layers:h}}setUkisLayer(o,c){c||(c=o.filtertype);const u=c.toLowerCase(),d=this.getLayers(u).find(m=>m.get("id")===o.id),f=this.create_layers(o);d?(this.removeLayerByKey({key:_g,value:d.get(_g)},c),this.addLayer(f,c)):this.addLayer(f,c)}updateUkisLayer(o,c){c||(c=o.filtertype);const u=c.toLowerCase(),d=this.getLayers(u).find(m=>m.get("id")===o.id),f=this.create_layers(o);f&&this.updateLayerByKey({key:_g,value:d.get(_g)},f,c)}create_layers(o){let c;switch(o.type){case qf:c=this.create_xyz_layer(o);break;case pu:c=this.create_wms_layer(o);break;case mu:c=this.create_wmts_layer(o);break;case Ic:c=this.create_tms_layer(o);break;case gh:c=this.create_geojson_layer(o);break;case Id:c=this.create_kml_layer(o);break;case Rd:c=this.create_wfs_layer(o);break;case"custom":c=this.create_custom_layer(o);break;case u9:c=this.create_stacked_layer(o)}return c}adjustLayerOptions(o,c,u){u&&(o.attribution&&u.setAttributions([o.attribution]),o.continuousWorld&&u.set("wrapX",o.continuousWorld),o.popup&&!o.crossOrigin&&null!==o.crossOrigin&&this.sourceSetCross(u),(o.crossOrigin||null===o.crossOrigin)&&this.sourceSetCross(u));const h={type:c,filtertype:o.filtertype,name:o.name,id:o.id,visible:o.visible,legendImg:o.legendImg,opacity:o.opacity||1,zIndex:1};return u&&(h.source=u),o.popup&&(h.popup=o.popup,h.className=o.id),o.maxResolution&&(h.maxResolution=o.maxResolution),o.minResolution&&(h.minResolution=o.minResolution),o.maxZoom&&(h.maxZoom=o.maxZoom),o.minZoom&&(h.minZoom=o.minZoom),o.bbox&&(h.extent=Ba(o.bbox.slice(0,4),ko,this.getProjection().getCode())),h}create_xyz_layer(o){const c={wrapX:!1};o.crossOrigin&&(c.crossOrigin=o.crossOrigin);const u=new a$(c);if(o.attribution&&u.setAttributions([o.attribution]),o.continuousWorld&&u.set("wrapX",o.continuousWorld),o.subdomains){const f=o.subdomains.map(m=>o.url.replace("{s}",`${m}`));u.setUrls(f)}else u.setUrl(o.url);const h={type:"xyz",filtertype:o.filtertype,name:o.name,id:o.id,visible:o.visible,legendImg:o.legendImg,opacity:o.opacity||1,zIndex:1,source:u};o.popup&&(h.popup=o.popup,h.className=o.id),o.bbox&&(h.extent=Ba(o.bbox.slice(0,4),ko,this.getProjection().getCode())),o.maxResolution&&(h.maxResolution=o.maxResolution),o.minResolution&&(h.minResolution=o.minResolution),o.maxZoom&&(h.maxZoom=o.maxZoom),o.minZoom&&(h.minZoom=o.minZoom);const d=new Bd(h);return this.setCrossOrigin(o,d),this.addEventsToLayer(o,d,u),d}create_tms_layer(o){var c,u;let h=null,d=null;if(o instanceof dl)h=this.create_xyz_layer(o),h.set("type","tms");else if(o instanceof Zs){if(d=new vM({format:new gk,tileGrid:dF({minZoom:o.minZoom||void 0,maxZoom:o.maxZoom||void 0}),url:o.url,wrapX:!1}),o.attribution&&d.setAttributions([o.attribution]),o.continuousWorld&&d.set("wrapX",o.continuousWorld),o.subdomains){const y=o.subdomains.map(v=>o.url.replace("{s}",`${v}`));d.setUrls(y)}else d.setUrl(o.url);const f={type:"tms",filtertype:o.filtertype,name:o.name,id:o.id,visible:o.visible,legendImg:o.legendImg,opacity:o.opacity||1,zIndex:1,source:d,declutter:!0,renderMode:"hybrid"};o.popup&&(f.popup=o.popup,f.className=o.id),o.bbox&&(f.extent=Ba(o.bbox.slice(0,4),ko,this.getProjection().getCode())),o.maxResolution&&(f.maxResolution=o.maxResolution),o.minResolution&&(f.minResolution=o.minResolution),o.maxZoom&&(f.maxZoom=o.maxZoom),o.minZoom&&(f.minZoom=o.minZoom),h=new _M(f),this.setCrossOrigin(o,h),this.addEventsToLayer(o,h,d);const m=null===(c=null==o?void 0:o.options)||void 0===c?void 0:c.style,g=null===(u=null==o?void 0:o.options)||void 0===u?void 0:u.styleSource;m&&g&&function(l,a,o,c,u){new Promise(function(h,d){if("object"!=typeof a&&(a=JSON.parse(a)),8!=a.version)return d(new Error("glStyle version 8 required."));if(!(l instanceof Tu||l instanceof _M))return d(new Error("Can only apply to VectorLayer or VectorTileLayer"));var m,g,y;function v(){y||a.sprite&&!m?y?(l.setStyle(y),h()):d(new Error("Something went wrong trying to apply style.")):(y=LDe(l,a,o,u,m,g,BDe),l.getStyle()?h():d(new Error("Nothing to show for source ["+o+"]")))}if(a.sprite){var _=.5==(window.devicePixelRatio>=1.5?.5:1)?"@2x":"",b=pk(a.sprite,c,_+".json");fetch(b,{credentials:"same-origin"}).then(function(w){return w.ok||""===_?w:(b=pk(a.sprite,c,".json"),fetch(b,{credentials:"same-origin"}))}).then(function(w){if(w.ok)return w.json();d(new Error("Problem fetching sprite from "+b+": "+w.statusText))}).then(function(w){if(void 0===w)return d(new Error("No sprites found."));m=w,g=pk(a.sprite,c,_+".png"),v()}).catch(function(w){d(new Error("Sprites cannot be loaded: "+b+": "+w.message))})}else v()})}(h,m,g)}return h}create_wms_layer(o){var c,u,h,d;let f;return"true"===(null===(c=o.params)||void 0===c?void 0:c.TILED)||void 0===(null===(u=o.params)||void 0===u?void 0:u.TILED)||null===(null===(h=o.params)||void 0===h?void 0:h.TILED)?f=this.create_tiled_wms_layer(o):"false"===(null===(d=o.params)||void 0===d?void 0:d.TILED)&&(f=this.create_image_wms_layer(o)),f}create_tiled_wms_layer(o){const c={params:Object.assign({},this.keysToUppercase(o.params)),wrapX:!1};o.tileSize&&(c.tileGrid=this.getTileGrid("default",null,o.tileSize),delete c.params.tileSize),o.crossOrigin&&(c.crossOrigin=o.crossOrigin);const u=new $T(c);if(o.subdomains){const f=o.subdomains.map(m=>o.url.replace("{s}",`${m}`));u.setUrls(f)}else u.setUrl(o.url);const h=this.adjustLayerOptions(o,"wms",u),d=new Bd(h);return this.addEventsToLayer(o,d,u),d}create_image_wms_layer(o){const c={params:Object.assign({},this.keysToUppercase(o.params)),url:o.url},u=new Tk(c),h=this.adjustLayerOptions(o,"wms",u),d=new o_(h);return this.addEventsToLayer(o,d,u),d}create_wmts_layer(o){if(o instanceof fl){let c=this.getTileGrid("wmts"),u=this.EPSG;o.params.matrixSetOptions&&(u=o.params.matrixSetOptions.matrixSet,"resolutions"in o.params.matrixSetOptions?c=this.getTileGrid("wmts",null,o.tileSize,null,o.params.matrixSetOptions.resolutions):("resolutionLevels"in o.params.matrixSetOptions||"tileMatrixPrefix"in o.params.matrixSetOptions)&&(c=this.getTileGrid("wmts",o.params.matrixSetOptions.resolutionLevels,o.tileSize,o.params.matrixSetOptions.tileMatrixPrefix,null)),"matrixIds"in o.params.matrixSetOptions&&(c=this.getTileGrid("wmts",null,o.tileSize,null,null,o.params.matrixSetOptions.matrixIds)));let h={url:o.url,tileGrid:c,matrixSet:u,wrapX:!1,layer:o.params.layer,style:o.params.style};h=Object.assign(h,o.params),o.crossOrigin&&(h.crossOrigin=o.crossOrigin);const d=new EAe(h);if(o.attribution&&d.setAttributions([o.attribution]),o.continuousWorld&&d.set("wrapX",o.continuousWorld),o.subdomains){const g=o.subdomains.map(y=>o.url.replace("{s}",`${y}`));d.setUrls(g)}else d.setUrl(o.url);const f={type:"wmts",filtertype:o.filtertype,name:o.name,id:o.id,visible:o.visible,legendImg:o.legendImg,opacity:o.opacity||1,zIndex:1,source:d};o.popup&&(f.popup=o.popup,f.className=o.id),o.maxResolution&&(f.maxResolution=o.maxResolution),o.minResolution&&(f.minResolution=o.minResolution),o.maxZoom&&(f.maxZoom=o.maxZoom),o.minZoom&&(f.minZoom=o.minZoom),o.bbox&&(f.extent=Ba(o.bbox.slice(0,4),ko,this.getProjection().getCode()));const m=new Bd(f);return this.setCrossOrigin(o,m),this.addEventsToLayer(o,m,d),m}console.error(`layer with id: ${o.id} and type ${o.type} is no instanceof WmtsLayer!`)}create_wfs_layer(o){var c;let u=null;u=0===o.url.indexOf("http://")||0===o.url.indexOf("https://")?new URL(o.url):new URL(o.url,window.location.origin),u.searchParams.set("srsname",this.EPSG);const h=new ds({format:new _l,url:u.toString()}),d=(null===(c=o.options)||void 0===c?void 0:c.style)||void 0,f={type:"wfs",filtertype:o.filtertype,name:o.name,id:o.id,visible:o.visible,legendImg:o.legendImg,opacity:o.opacity||1,zIndex:1,source:h,style:d};o.popup&&(f.popup=o.popup,f.className=o.id),o.maxResolution&&(f.maxResolution=o.maxResolution),o.minResolution&&(f.minResolution=o.minResolution),o.maxZoom&&(f.maxZoom=o.maxZoom),o.minZoom&&(f.minZoom=o.minZoom),o.bbox&&(f.extent=Ba(o.bbox.slice(0,4),ko,this.getProjection().getCode())),o.subdomains&&(o.url=o.url.replace("{s}",`${o.subdomains[0]}-${o.subdomains[o.subdomains.length-1]}`),h.setUrl(o.url)),o.options&&Object.assign(f,o.options);const m=new Tu(f);return this.setCrossOrigin(o,m),this.addEventsToLayer(o,m,h),m}create_geojson_layer(o){let c;o.data?c=new ds({features:this.geoJsonToFeatures(o.data),format:new _l,wrapX:!1}):o.url&&(c=new ds({url:o.url,format:new _l({dataProjection:ko,featureProjection:this.EPSG}),wrapX:!1})),o.continuousWorld&&c.set("wrapX",o.continuousWorld);const u={type:"geojson",name:o.name,id:o.id,visible:o.visible,legendImg:o.legendImg,opacity:o.opacity||1,zIndex:1,source:c};if(o.popup&&(u.popup=o.popup,u.className=o.id),o.maxResolution&&(u.maxResolution=o.maxResolution),o.minResolution&&(u.minResolution=o.minResolution),o.maxZoom&&(u.maxZoom=o.maxZoom),o.minZoom&&(u.minZoom=o.minZoom),o.bbox&&(u.extent=Ba(o.bbox.slice(0,4),ko,this.getProjection().getCode())),o.cluster){const d={};"object"==typeof o.cluster&&Object.assign(d,o.cluster),d.source=c;const f=new Wd(d);u.source=f;const m={};u.style=g=>{const y=g.get("features").length;let v=m[y];return v||(v=new Li({image:new ag({radius:10,stroke:new Bs({color:"#fff"}),fill:new Pi({color:"#3399CC"})}),text:new op({text:y.toString(),fill:new Pi({color:"#fff"})})}),m[y]=v),v}}o.options&&Object.assign(u,o.options);const h=new Tu(u);return this.setCrossOrigin(o,h),this.addEventsToLayer(o,h,u.source),h}create_kml_layer(o){let c;o.data?c=new ds({features:new SD({extractStyles:!0}).readFeatures(o.data,{dataProjection:ko,featureProjection:this.EPSG}),format:new SD,wrapX:!1}):o.url&&(c=new ds({url:o.url,format:new SD({extractStyles:!0,crossOrigin:o.crossOrigin&&null===o.crossOrigin?o.crossOrigin:"anonymous"}),wrapX:!1})),o.continuousWorld&&c.set("wrapX",o.continuousWorld);const u={type:"kml",name:o.name,id:o.id,visible:o.visible,legendImg:o.legendImg,opacity:o.opacity||1,zIndex:1,source:c};if(o.popup&&(u.popup=o.popup,u.className=o.id),o.maxResolution&&(u.maxResolution=o.maxResolution),o.minResolution&&(u.minResolution=o.minResolution),o.maxZoom&&(u.maxZoom=o.maxZoom),o.minZoom&&(u.minZoom=o.minZoom),o.bbox&&(u.extent=Ba(o.bbox.slice(0,4),ko,this.getProjection().getCode())),o.cluster){const d={};"object"==typeof o.cluster&&Object.assign(d,o.cluster),d.source=c;const f=new Wd(d);u.source=f;const m={};u.style=g=>{const y=g.get("features").length;let v=m[y];return v||(v=new Li({image:new ag({radius:10,stroke:new Bs({color:"#fff"}),fill:new Pi({color:"#3399CC"})}),text:new op({text:y.toString(),fill:new Pi({color:"#fff"})})}),m[y]=v),v}}o.options&&Object.assign(u,o.options);const h=new Tu(u);return this.setCrossOrigin(o,h),this.addEventsToLayer(o,h,u.source),h}setCrossOrigin(o,c){if(c instanceof gl){const u=c.getSource();o.popup&&!o.crossOrigin&&null!==o.crossOrigin&&this.sourceSetCross(u),(o.crossOrigin||null===o.crossOrigin)&&this.sourceSetCross(u)}}sourceSetCross(o){(o instanceof sD||o instanceof iD||o instanceof bq)&&(o.crossOrigin="anonymous",o.crossOrigin_="anonymous")}create_custom_layer(o){if(o.custom_layer){const c=o.custom_layer;if(c instanceof gl){const h=c.getSource();h.wrapX_=!1,o.attribution&&h.setAttributions([o.attribution]),o.continuousWorld&&(h.wrapX_=o.continuousWorld),this.setCrossOrigin(o,c),this.addEventsToLayer(o,c,h)}else c instanceof Js?c.getLayers().forEach(h=>{const d=`${o.id}_${Dn(h)}`;h.get("id")||h.set("id",d),h instanceof gl&&(this.setCrossOrigin(o,h),this.addEventsToLayer(o,h,h.getSource())),o.popup&&!h.get("popup")&&(h.set("popup",o.popup),"ol-layer"===h.getClassName()&&(h.className_=d))}):console.error(`The custom_layer of ${o.id} in not a openlayers Layer`);const u={type:"custom",name:o.name,id:o.id,visible:o.visible,legendImg:o.legendImg,opacity:o.opacity||1,zIndex:1};if(o.maxResolution&&c.setMaxResolution(o.maxResolution),o.minResolution&&c.setMinResolution(o.minResolution),o.maxZoom&&c.setMaxZoom(o.maxZoom),o.minZoom&&c.setMinZoom(o.minZoom),o.popup&&!(c instanceof Js)&&(u.popup=o.popup,c.className_=o.id),o.bbox){const h=Ba(o.bbox.slice(0,4),ko,this.getProjection().getCode());c.setExtent(h)}return c.setProperties(u),c}console.log("attribute custom_layer not set on layer type custom!",o)}create_stacked_layer(o){if(o instanceof ME){const c=o.layers.map(d=>(d.visible=!0,d.popup=o.popup,d.events=o.events,this.create_layers(d))),u=this.adjustLayerOptions(o,"custom");return u.layers=c,new Js(u)}console.log("layer is not of type StackedLayer!",o)}resolutionsFromExtent(o,c,u){const h=c,d=bs(o),f=Wr(o),m=Math.max(f/u,d/u),g=h+1,y=new Array(g);for(let v=0;v<g;++v)y[v]=m/Math.pow(2,v);return y}matrixIdsFromResolutions(o,c){return Array.from(Array(o).keys()).map(u=>c?`${c}:${u}`:u)}getTileGrid(o="default",c,u,h,d,f){const m=c||42,g=u||256,y=h||"",v=this.getProjection().getExtent(),_=this.resolutionsFromExtent(v,m,g),b=this.matrixIdsFromResolutions(_.length,y),w={extent:v,origin:_h(v),resolutions:d||_,tileSize:[g,g]};return"wmts"===o?(w.matrixIds=f||b,new DAe(w)):"default"===o?new gM(w):void 0}isPopupObj(o){return o&&"object"==typeof o&&!Array.isArray(o)}isPopupObjMove(o){return this.isPopupObj(o)&&"move"===o.event}isPopupObjClick(o){return this.isPopupObj(o)&&"click"===o.event}isPopupObjArray(o){return Array.isArray(o)&&o.length&&this.isPopupObj(o[0])}isPopupStringArray(o){return Array.isArray(o)&&o.length&&"string"==typeof o[0]}eventIsBrowserEvent(o,c){return"move"===o&&"pointermove"===c.type||"click"===o&&"click"===c.type||void 0}layersOnMapEvent(o){let c=!1;const u=this.map.forEachLayerAtPixel(o.pixel,(h,d)=>({layer:h,color:d}),{layerFilter:this.filterLayerNoPopup});if(u){const h=u.layer.get("popup");h&&(this.hitLayerCurr=u.layer.get("id"),this.hitLayerPrev||(this.hitLayerPrev=this.hitLayerCurr),u.color&&(c=!0),this.hitLayerPrev&&this.hitLayerPrev!==this.hitLayerCurr&&(c=!1,this.hitLayerPrev=this.hitLayerCurr),this.topLayerCheckEvent(o,h)&&this.layerOnEvent(o,u.layer,u.color))}c?this.map.getTargetElement().style.cursor="pointer":(this.removeAllPopups(h=>"pointermove"===h.get("addEvent")),this.map.getTargetElement().style.cursor="")}topLayerCheckEvent(o,c){let u=null;const h=(d,f)=>{f.event?this.eventIsBrowserEvent(f.event,d)&&this.isPopupObjClick(f)?u="click":this.eventIsBrowserEvent(f.event,d)&&this.isPopupObjMove(f)&&(u="move"):"click"===d.type&&(u="click")};return"boolean"==typeof c?!0===c&&"click"===o.type&&(u="click"):this.isPopupStringArray(c)?"click"===o.type&&(u="click"):this.isPopupObjArray(c)?c.map(d=>{h(o,d)}):h(o,c),u}checkIsRaster(o){return o instanceof qW||o instanceof zW}checkIsVector(o){return o instanceof s_&&!this.checkIsRaster(o)}layerOnEvent(o,c,u){this.checkIsRaster(c)?this.rasterOnEvent(o,c,u):this.checkIsVector(c)&&this.vectorOnEvent(o)}vectorOnEvent(o){let c=!1;const u=this.map.forEachFeatureAtPixel(o.pixel,(h,d)=>(c=!0,{feature:h,layer:d}),{layerFilter:h=>{let d=!0;if(h instanceof s_){const g=h.getSource();d=g instanceof Wd?g.getSource()instanceof ds:g instanceof ds||g instanceof vM}!1===this.filterLayerNoPopup(h)&&(d=!1);const m=h.getExtent();return m&&(Pd(m,this.map.getCoordinateFromPixel(o.pixel))||(d=!1)),d},hitTolerance:this.hitTolerance});if(u){const h=u.layer.get("popup");if(h){const d=u.layer,f=u.feature;let m={};const g=f.getProperties().features;if(g&&1===g.length)m=g[0].getProperties();else{if(g&&g.length>1){if("click"===o.type){const y=this.getFeaturesExtent(f.getProperties().features);return this.setExtent(y),!1}return!0}m=f.getProperties()}this.prepareAddPopup(m,d,f,o,h)}}this.map.getTargetElement().style.cursor=c?"pointer":""}rasterOnEvent(o,c,u){const h=c.get("popup");let d={};h&&(d=c.getProperties(),d.evt=o,u&&(d.color=u),this.prepareAddPopup(d,c,null,o,h))}prepareAddPopup(o,c,u,h,d){const f={modelName:o.id,properties:o,layer:c,feature:u,event:h};let m=Object.assign({},o);m.geometry&&delete m.geometry;const g=_=>{_&&_.filterkeys&&(m=Object.keys(m).filter(b=>_.filterkeys.includes(b)).reduce((b,w)=>(b[w]=m[w],b),{}))};this.isPopupStringArray(d)?m=Object.keys(m).filter(_=>d.includes(_)).reduce((_,b)=>(_[b]=m[b],_),{}):this.isPopupObjArray(d)?g(d.find(b=>this.eventIsBrowserEvent(b.event,h))):this.isPopupObj(d)&&g(d);const y=_=>{if(_.properties){const b=Object.keys(_.properties);Array.isArray(b)&&(m=Object.keys(m).reduce((w,C)=>{const E=_.properties[C];return E?w[E]=m[C]:w[C]=m[C],w},{}))}};this.isPopupObjArray(d)?d.forEach(_=>{this.eventIsBrowserEvent(_.event,h)&&y(_)}):this.isPopupObj(d)&&y(d);const v=_=>{"asyncPopup"in _?_.asyncPopup(m,b=>{this.addPopup(f,null,b,_.event,_.single)}):(_.popupFunction?f.popupFn=_.popupFunction:_.dynamicPopup&&(f.dynamicPopup=_.dynamicPopup),this.addPopup(f,m,null,_.event,_.single))};"boolean"==typeof d||this.isPopupStringArray(d)?this.addPopup(f,m,null):this.isPopupObjArray(d)?d.forEach(_=>{this.eventIsBrowserEvent(_.event,h)&&v(_)}):d&&v(d)}addPopup(o,c,u,h,d){var f,m;const g=o.layer.get("popup"),y=o.layer.get("id"),v="popup_move_ID",_="move_ID_L_F",b=this.getPopups().find(E=>E.getId()===v),w=o.event;let C=null;if("move"===h&&((null===(f=o.properties)||void 0===f?void 0:f.color)?C=`${y}:${null===(m=o.properties)||void 0===m?void 0:m.color.toString()}`:o.feature?C=`${y}:${Dn(o.feature)}`:o.layer&&(C=`${y}:${Dn(o.layer)}`)),"move"===h&&"pointermove"===w.type&&b){let E;if(E=o.properties&&o.properties.geometry&&"Point"===o.properties.geometry.getType()?o.properties.geometry.getCoordinates():w.coordinate,C!==b.get(_)){const M=this.createPopupContainer(b,o,c,u,h);b.setElement(M)}b.setPosition(E),b.getElement().parentElement.style.zIndex="1"}else if("pointermove"!==w.type||h)if("pointermove"===w.type&&"click"===h)b&&this.removeAllPopups(E=>"pointermove"===E.get("addEvent"));else{let E=null;E="move"===h?v:o.feature?`${y}:${Dn(o.feature)}`:o.layer?`${y}:${Dn(o.layer)}`:`${y}:popup_${(new Date).getTime()}`;const M={autoPan:!0,id:E,autoPanAnimation:{duration:250},positioning:"bottom-center",stopEvent:!0,insertFirst:!1};let x=M;if(this.isPopupObjArray(g)){const U=g.find(K=>this.eventIsBrowserEvent(K.event,w));U.options&&(x=Object.assign(M,U.options))}else this.isPopupObj(g)&&g.options&&(x=Object.assign(M,g.options));const R=new GW(x);C&&R.set(_,C),d&&this.removeAllPopups(U=>{const Q=U.getId().toString().split(":")[0];return!Q||(y===Q?y===Q:void 0)});const P=this.getPopups().find(U=>U.getId()===R.getId()&&R.getId()!==v);P&&(this.map.removeOverlay(P),this.destroyDynamicPopupComponent(P.getId().toString()));const k=this.createPopupContainer(R,o,c,u,h);let W;R.getId()===v?R.set("addEvent","pointermove"):R.set("addEvent",w.type),R.set(Yk,"popup"),R.setElement(k),W=o.properties&&o.properties.geometry&&"Point"===o.properties.geometry.getType()?o.properties.geometry.getCoordinates():w.coordinate,R.setPosition(W),b&&"move"===h||this.map.addOverlay(R)}else b&&this.removeAllPopups(E=>"pointermove"===E.get("addEvent"))}createPopupContainer(o,c,u,h,d){const f=document.createElement("div");f.className="ol-popup-content";let m="";if(m=c.popupFn?c.popupFn(u):!h||u&&0!==Object.keys(u).length?this.createPopupHtml(u):h,f.innerHTML=m,c.dynamicPopup){const y=o.getId().toString();this.destroyDynamicPopupComponent(y),this.createDynamicPopupComponent(y,f,{event:c.event,layer:c.layer,feature:c.feature||null,dynamicPopup:c.dynamicPopup,properties:u})}const g=document.createElement("div");if(g.className="ol-popup",g.id=o.getId().toString(),g.style.display="block",!d||"move"!==d){const y=document.createElement("a");y.className="ol-popup-closer",g.appendChild(y);const v=()=>{y.removeEventListener("click",v,!1),this.map.removeOverlay(o),this.destroyDynamicPopupComponent(o.getId().toString())};y.addEventListener("click",v,!1)}return g.appendChild(f),g}removeAllPopups(o){let c=this.getPopups();o&&(c=this.getPopups().filter(o)),c.forEach(u=>{"popup"===u.get(Yk)&&(this.map.removeOverlay(u),this.destroyDynamicPopupComponent(u.getId().toString()))})}createPopupHtml(o){let c="<table>";for(const u in o)o.hasOwnProperty(u)&&(c+='<tr><td style="vertical-align: top; padding-right: 7px;"><b>'+u+": </b></td><td>"+o[u]+"</td></tr>");return c+="</table>",c}getPopups(){const o=[];return this.map.getOverlays().getArray().slice(0).forEach(c=>{"popup"===c.get(Yk)&&o.push(c)}),o}destroyDynamicPopupComponent(o){this.dynamicPopupComponents.has(o)&&(this.dynamicPopupComponents.get(o).destroy(),this.dynamicPopupComponents.delete(o))}createDynamicPopupComponent(o,c,u){const d=this.crf.resolveComponentFactory(u.dynamicPopup.component).create(this.injector,[],c);if(u.dynamicPopup.getAttributes){const f=u.dynamicPopup.getAttributes(u);for(const m in f)"undefined"!==f[m]&&(d.instance[m]=f[m])}this.app.attachView(d.hostView),this.dynamicPopupComponents.set(o,d)}setExtent(o,c,u){const h=Bn(c?ko:this.EPSG),d=Ba(o.slice(0,4),h,this.getProjection().getCode()),f={size:this.map.getSize()};return u&&Object.assign(f,u),this.map.getView().fit(d,u),d}setCenter(o,c){const h=ql(o,Bn(c?ko:this.EPSG),this.getProjection().getCode());return this.map.getView().setCenter(h),h}getCenter(o){const c=Bn(o?ko:this.EPSG),u=Bn(this.getProjection().getCode());return ql(this.map.getView().getCenter(),u,c)}getFeaturesExtent(o,c){const u=o[0].getGeometry().getExtent().slice(0);if(o.forEach(h=>{aN(u,h.getGeometry().getExtent())}),c){const h=Bn(ko);return Ba(u,this.getProjection().getCode(),h)}return u}getCurrentExtent(o){const c=Bn(o?ko:this.EPSG);return Ba(this.map.getView().calculateExtent(),this.getProjection().getCode(),c)}setZoom(o,c){this.map.getView().setZoom(o)}getZoom(){return this.map.getView().getZoom()}zoomInOut(o){const c=this.map.getView();if(!c)return;const h="+"===o?1:-1,d=c.getZoom();if(void 0!==d){const f=c.getConstrainedZoom(d+h);c.getAnimating()&&c.cancelAnimations(),c.animate({zoom:f,duration:250,easing:ng})}}geoJsonToFeature(o){return new _l({dataProjection:ko,featureProjection:this.EPSG}).readFeature(o)}geoJsonToFeatures(o){return new _l({dataProjection:ko,featureProjection:this.EPSG}).readFeatures(o)}getProjection(){return this.map.getView().getProjection()}reprojectFeatures(o,c,u){o.getFeatures().forEach(h=>{h.getGeometry().transform(c,u)})}setProjection(o){if(o){let c={};if(this.viewOptions&&(c=this.viewOptions,c.minResolution=void 0,c.maxResolution=void 0,c.resolution=void 0,c.resolutions=void 0),o instanceof eg){c.projection=o;const d=ql(this.map.getView().getCenter(),this.map.getView().getProjection(),o);c.center=d,c.zoom=this.map.getView().getZoom()}else"string"==typeof o&&(c.projection=o,c.center=this.map.getView().getCenter(),c.zoom=this.map.getView().getZoom());const u=new bu(c),h=this.EPSG;this.EPSG=u.getProjection().getCode(),this.map.setView(u),this.view=this.map.getView(),this.map.getLayers().getArray().forEach(d=>{d.getLayers().getArray().forEach(f=>{if(f instanceof gl){let m=f.getSource();for(;m.source;)m=m.source;m instanceof ds&&this.reprojectFeatures(m,h,this.EPSG)}})}),this.projectionChange.next(this.getProjection())}}registerProjection(o){kD.defs(o.code,o.proj4js),W$(kD)}getOlProjection(o){return new eg({code:o.code,extent:o.extent?o.extent:void 0,worldExtent:o.worldExtent?o.worldExtent:void 0,global:!!o.global&&o.global,units:o.units?o.units:void 0})}keysToUppercase(o){return Object.keys(o).forEach(c=>{const u=c.toUpperCase();u!==c&&(o[u]=o[c],delete o[c])}),o}}return l.\u0275fac=function(o){return new(o||l)(be(wc),be(Om),be(Qn))},l.\u0275prov=Xe({token:l,factory:l.\u0275fac,providedIn:"root"}),l})();class jNe{constructor(a){this.total=a}call(a,o){return o.subscribe(new WNe(a,this.total))}}class WNe extends re{constructor(a,o){super(a),this.total=o,this.count=0}_next(a){++this.count>this.total&&this.destination.next(a)}}var qNe=function(){var l=function(a,o){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,u){c.__proto__=u}||function(c,u){for(var h in u)Object.prototype.hasOwnProperty.call(u,h)&&(c[h]=u[h])})(a,o)};return function(a,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function c(){this.constructor=a}l(a,o),a.prototype=null===o?Object.create(o):(c.prototype=o.prototype,new c)}}(),Kk="units",XNe=[1,2,5],Jk=25.4/.28;const YNe=function(l){function a(o){var c=this,u=o||{},h=void 0!==u.className?u.className:u.bar?"ol-scale-bar":"ol-scale-line";return(c=l.call(this,{element:document.createElement("div"),render:u.render,target:u.target})||this).innerElement_=document.createElement("div"),c.innerElement_.className=h+"-inner",c.element.className=h+" "+Jm,c.element.appendChild(c.innerElement_),c.viewState_=null,c.minWidth_=void 0!==u.minWidth?u.minWidth:64,c.renderedVisible_=!1,c.renderedWidth_=void 0,c.renderedHTML_="",c.addChangeListener(Kk,c.handleUnitsChanged_),c.setUnits(u.units||"metric"),c.scaleBar_=u.bar||!1,c.scaleBarSteps_=u.steps||4,c.scaleBarText_=u.text||!1,c.dpi_=u.dpi||void 0,c}return qNe(a,l),a.prototype.getUnits=function(){return this.get(Kk)},a.prototype.handleUnitsChanged_=function(){this.updateElement_()},a.prototype.setUnits=function(o){this.set(Kk,o)},a.prototype.setDpi=function(o){this.dpi_=o},a.prototype.updateElement_=function(){var o=this.viewState_;if(o){var M,c=o.center,u=o.projection,h=this.getUnits(),f=tM(u,o.resolution,c,"degrees"==h?vl.DEGREES:vl.METERS),m=this.minWidth_*(this.dpi_||Jk)/Jk,g=m*f,y="";if("degrees"==h){var v=Wl[vl.DEGREES];(g*=v)<v/60?(y="\u2033",f*=3600):g<v?(y="\u2032",f*=60):y="\xb0"}else"imperial"==h?g<.9144?(y="in",f/=.0254):g<1609.344?(y="ft",f/=.3048):(y="mi",f/=1609.344):"nautical"==h?(f/=1852,y="nm"):"metric"==h?g<.001?(y="\u03bcm",f*=1e6):g<1?(y="mm",f*=1e3):g<1e3?y="m":(y="km",f/=1e3):"us"==h?g<.9144?(y="in",f*=39.37):g<1609.344?(y="ft",f/=.30480061):(y="mi",f/=1609.3472):Yn(!1,33);for(var b,w,C,_=3*Math.floor(Math.log(m*f)/Math.log(10));;){C=Math.floor(_/3);var E=Math.pow(10,C);if(b=XNe[(_%3+3)%3]*E,w=Math.round(b/f),isNaN(w))return this.element.style.display="none",void(this.renderedVisible_=!1);if(w>=m)break;++_}M=this.scaleBar_?this.createScaleBar(w,b,y):b.toFixed(C<0?-C:0)+" "+y,this.renderedHTML_!=M&&(this.innerElement_.innerHTML=M,this.renderedHTML_=M),this.renderedWidth_!=w&&(this.innerElement_.style.width=w+"px",this.renderedWidth_=w),this.renderedVisible_||(this.element.style.display="",this.renderedVisible_=!0)}else this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1)},a.prototype.createScaleBar=function(o,c,u){for(var h="1 : "+Math.round(this.getScaleForResolution()).toLocaleString(),d=[],f=o/this.scaleBarSteps_,m="#ffffff",g=0;g<this.scaleBarSteps_;g++)0===g&&d.push(this.createMarker("absolute",g)),d.push('<div><div class="ol-scale-singlebar" style="width: '+f+"px;background-color: "+m+';"></div>'+this.createMarker("relative",g)+(g%2==0||2===this.scaleBarSteps_?this.createStepText(g,o,!1,c,u):"")+"</div>"),g===this.scaleBarSteps_-1&&d.push(this.createStepText(g+1,o,!0,c,u)),m="#ffffff"===m?"#000000":"#ffffff";return'<div style="display: flex;">'+(this.scaleBarText_?'<div class="ol-scale-text" style="width: '+o+'px;">'+h+"</div>":"")+d.join("")+"</div>"},a.prototype.createMarker=function(o,c){return'<div class="ol-scale-step-marker" style="position: '+o+";top: "+("absolute"===o?3:-10)+'px;"></div>'},a.prototype.createStepText=function(o,c,u,h,d){var f=0===o?0:Math.round(h/this.scaleBarSteps_*o*100)/100;return'<div class="ol-scale-step-text" style="margin-left: '+(0===o?-3:c/this.scaleBarSteps_*-1)+"px;text-align: "+(0===o?"left":"center")+"; min-width: "+(0===o?0:c/this.scaleBarSteps_*2)+"px;left: "+(u?c+"px":"unset")+';">'+f+(0===o?"":" "+d)+"</div>"},a.prototype.getScaleForResolution=function(){var o=tM(this.viewState_.projection,this.viewState_.resolution,this.viewState_.center),c=this.dpi_||Jk,u=this.viewState_.projection.getMetersPerUnit();return parseFloat(o.toString())*u*(1e3/25.4)*c},a.prototype.render=function(o){var c=o.frameState;this.viewState_=c?c.viewState:null,this.updateElement_()},a}(Qf);var ZNe=function(){var l=function(a,o){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,u){c.__proto__=u}||function(c,u){for(var h in u)Object.prototype.hasOwnProperty.call(u,h)&&(c[h]=u[h])})(a,o)};return function(a,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function c(){this.constructor=a}l(a,o),a.prototype=null===o?Object.create(o):(c.prototype=o.prototype,new c)}}(),Qk="projection",UY="coordinateFormat";const JNe=function(l){function a(o){var c=this,u=o||{},h=document.createElement("div");h.className=void 0!==u.className?u.className:"ol-mouse-position",(c=l.call(this,{element:h,render:u.render,target:u.target})||this).addChangeListener(Qk,c.handleProjectionChanged_),u.coordinateFormat&&c.setCoordinateFormat(u.coordinateFormat),u.projection&&c.setProjection(u.projection);var d=!0,f="&#160;";return"undefinedHTML"in u?(void 0!==u.undefinedHTML&&(f=u.undefinedHTML),d=!!f):"placeholder"in u&&(!1===u.placeholder?d=!1:f=String(u.placeholder)),c.placeholder_=f,c.renderOnMouseOut_=d,c.renderedHTML_=h.innerHTML,c.mapProjection_=null,c.transform_=null,c}return ZNe(a,l),a.prototype.handleProjectionChanged_=function(){this.transform_=null},a.prototype.getCoordinateFormat=function(){return this.get(UY)},a.prototype.getProjection=function(){return this.get(Qk)},a.prototype.handleMouseMove=function(o){var c=this.getMap();this.updateHTML_(c.getEventPixel(o))},a.prototype.handleMouseOut=function(o){this.updateHTML_(null)},a.prototype.setMap=function(o){if(l.prototype.setMap.call(this,o),o){var c=o.getViewport();this.listenerKeys.push(Sr(c,"pointermove",this.handleMouseMove,this)),this.renderOnMouseOut_&&this.listenerKeys.push(Sr(c,"pointerout",this.handleMouseOut,this)),this.updateHTML_(null)}},a.prototype.setCoordinateFormat=function(o){this.set(UY,o)},a.prototype.setProjection=function(o){this.set(Qk,Bn(o))},a.prototype.updateHTML_=function(o){var c=this.placeholder_;if(o&&this.mapProjection_){if(!this.transform_){var u=this.getProjection();this.transform_=u?Kf(this.mapProjection_,u):xN}var d=this.getMap().getCoordinateFromPixelInternal(o);if(d){var f=nM();f&&(this.transform_=Kf(this.mapProjection_,f)),this.transform_(d,d);var m=this.getCoordinateFormat();c=m?m(d):d.toString()}}(!this.renderedHTML_||c!==this.renderedHTML_)&&(this.element.innerHTML=c,this.renderedHTML_=c)},a.prototype.render=function(o){var c=o.frameState;c?this.mapProjection_!=c.viewState.projection&&(this.mapProjection_=c.viewState.projection,this.transform_=null):this.mapProjection_=null},a}(Qf);var QNe=function(){var l=function(a,o){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,u){c.__proto__=u}||function(c,u){for(var h in u)Object.prototype.hasOwnProperty.call(u,h)&&(c[h]=u[h])})(a,o)};return function(a,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function c(){this.constructor=a}l(a,o),a.prototype=null===o?Object.create(o):(c.prototype=o.prototype,new c)}}(),GY=["fullscreenchange","webkitfullscreenchange","MSFullscreenChange"];function HY(){var l=document.body;return!!(l.webkitRequestFullscreen||l.msRequestFullscreen&&document.msFullscreenEnabled||l.requestFullscreen&&document.fullscreenEnabled)}function e3(){return!!(document.webkitIsFullScreen||document.msFullscreenElement||document.fullscreenElement)}function jY(l){l.requestFullscreen?l.requestFullscreen():l.msRequestFullscreen?l.msRequestFullscreen():l.webkitRequestFullscreen&&l.webkitRequestFullscreen()}const rFe=function(l){function a(o){var c=this,u=o||{};(c=l.call(this,{element:document.createElement("div"),target:u.target})||this).cssClassName_=void 0!==u.className?u.className:"ol-full-screen",c.activeClassName_=void 0!==u.activeClassName?u.activeClassName.split(" "):[c.cssClassName_+"-true"],c.inactiveClassName_=void 0!==u.inactiveClassName?u.inactiveClassName.split(" "):[c.cssClassName_+"-false"];var h=void 0!==u.label?u.label:"\u2922";c.labelNode_="string"==typeof h?document.createTextNode(h):h;var d=void 0!==u.labelActive?u.labelActive:"\xd7";c.labelActiveNode_="string"==typeof d?document.createTextNode(d):d,c.button_=document.createElement("button");var f=u.tipLabel?u.tipLabel:"Toggle full-screen";c.setClassName_(c.button_,e3()),c.button_.setAttribute("type","button"),c.button_.title=f,c.button_.appendChild(c.labelNode_),c.button_.addEventListener("click",c.handleClick_.bind(c),!1);var m=c.cssClassName_+" "+Jm+" "+dT+" "+(HY()?"":"ol-unsupported"),g=c.element;return g.className=m,g.appendChild(c.button_),c.keys_=void 0!==u.keys&&u.keys,c.source_=u.source,c}return QNe(a,l),a.prototype.handleClick_=function(o){o.preventDefault(),this.handleFullScreen_()},a.prototype.handleFullScreen_=function(){if(HY()){var o=this.getMap();if(o)if(e3())document.exitFullscreen?document.exitFullscreen():document.msExitFullscreen?document.msExitFullscreen():document.webkitExitFullscreen&&document.webkitExitFullscreen();else{var c;c=this.source_?"string"==typeof this.source_?document.getElementById(this.source_):this.source_:o.getTargetElement(),this.keys_?function(l){l.webkitRequestFullscreen?l.webkitRequestFullscreen():jY(l)}(c):jY(c)}}},a.prototype.handleFullScreenChange_=function(){var o=this.getMap();e3()?(this.setClassName_(this.button_,!0),Zv(this.labelActiveNode_,this.labelNode_),this.dispatchEvent("enterfullscreen")):(this.setClassName_(this.button_,!1),Zv(this.labelNode_,this.labelActiveNode_),this.dispatchEvent("leavefullscreen")),o&&o.updateSize()},a.prototype.setClassName_=function(o,c){var u,h,d,f=this.activeClassName_,m=this.inactiveClassName_,g=c?f:m;(u=o.classList).remove.apply(u,f),(h=o.classList).remove.apply(h,m),(d=o.classList).add.apply(d,g)},a.prototype.setMap=function(o){if(l.prototype.setMap.call(this,o),o)for(var c=0,u=GY.length;c<u;++c)this.listenerKeys.push(Sr(document,GY[c],this.handleFullScreenChange_,this))},a}(Qf);var WY=function(){var l=function(a,o){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,u){c.__proto__=u}||function(c,u){for(var h in u)Object.prototype.hasOwnProperty.call(u,h)&&(c[h]=u[h])})(a,o)};return function(a,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function c(){this.constructor=a}l(a,o),a.prototype=null===o?Object.create(o):(c.prototype=o.prototype,new c)}}(),iFe=function(l){function a(){return null!==l&&l.apply(this,arguments)||this}return WY(a,l),a.prototype.createRenderer=function(){return new Z9(this)},a}(IW);const oFe=function(l){function a(o){var c=this,u=o||{};(c=l.call(this,{element:document.createElement("div"),render:u.render,target:u.target})||this).boundHandleRotationChanged_=c.handleRotationChanged_.bind(c),c.collapsed_=void 0===u.collapsed||u.collapsed,c.collapsible_=void 0===u.collapsible||u.collapsible,c.collapsible_||(c.collapsed_=!1),c.rotateWithView_=void 0!==u.rotateWithView&&u.rotateWithView,c.viewExtent_=void 0;var h=void 0!==u.className?u.className:"ol-overviewmap",d=void 0!==u.tipLabel?u.tipLabel:"Overview map",f=void 0!==u.collapseLabel?u.collapseLabel:"\u2039";"string"==typeof f?(c.collapseLabel_=document.createElement("span"),c.collapseLabel_.textContent=f):c.collapseLabel_=f;var m=void 0!==u.label?u.label:"\u203a";"string"==typeof m?(c.label_=document.createElement("span"),c.label_.textContent=m):c.label_=m;var g=c.collapsible_&&!c.collapsed_?c.collapseLabel_:c.label_,y=document.createElement("button");y.setAttribute("type","button"),y.title=d,y.appendChild(g),y.addEventListener("click",c.handleClick_.bind(c),!1),c.ovmapDiv_=document.createElement("div"),c.ovmapDiv_.className="ol-overviewmap-map",c.view_=u.view,c.ovmap_=new iFe({view:u.view});var v=c.ovmap_;u.layers&&u.layers.forEach(function(k){v.addLayer(k)});var _=document.createElement("div");_.className="ol-overviewmap-box",_.style.boxSizing="border-box",c.boxOverlay_=new GW({position:[0,0],positioning:"center-center",element:_}),c.ovmap_.addOverlay(c.boxOverlay_);var w=c.element;w.className=h+" "+Jm+" "+dT+(c.collapsed_&&c.collapsible_?" "+zE:"")+(c.collapsible_?"":" ol-uncollapsible"),w.appendChild(c.ovmapDiv_),w.appendChild(y);var C=c,E=c.boxOverlay_,M=c.boxOverlay_.getElement(),R=function(k){var W=function(k){return{clientX:k.clientX,clientY:k.clientY}}(k),U=v.getEventCoordinateInternal(W);E.setPosition(U)},P=function(k){var W=v.getEventCoordinateInternal(k);C.getMap().getView().setCenterInternal(W),window.removeEventListener("mousemove",R),window.removeEventListener("mouseup",P)};return M.addEventListener("mousedown",function(){window.addEventListener("mousemove",R),window.addEventListener("mouseup",P)}),c}return WY(a,l),a.prototype.setMap=function(o){var c=this.getMap();if(o!==c){if(c){var u=c.getView();u&&this.unbindView_(u),this.ovmap_.setTarget(null)}if(l.prototype.setMap.call(this,o),o){this.ovmap_.setTarget(this.ovmapDiv_),this.listenerKeys.push(Sr(o,"propertychange",this.handleMapPropertyChange_,this));var h=o.getView();h&&(this.bindView_(h),h.isDef()&&(this.ovmap_.updateSize(),this.resetExtent_())),this.ovmap_.isRendered()||this.updateBoxAfterOvmapIsRendered_()}}},a.prototype.handleMapPropertyChange_=function(o){if("view"===o.key){var c=o.oldValue;c&&this.unbindView_(c);var u=this.getMap().getView();this.bindView_(u)}else!this.ovmap_.isRendered()&&("target"===o.key||"size"===o.key)&&this.ovmap_.updateSize()},a.prototype.bindView_=function(o){if(!this.view_){var c=new bu({projection:o.getProjection()});this.ovmap_.setView(c)}o.addChangeListener("rotation",this.boundHandleRotationChanged_),this.handleRotationChanged_()},a.prototype.unbindView_=function(o){o.removeChangeListener("rotation",this.boundHandleRotationChanged_)},a.prototype.handleRotationChanged_=function(){this.rotateWithView_&&this.ovmap_.getView().setRotation(this.getMap().getView().getRotation())},a.prototype.validateExtent_=function(){var o=this.getMap(),c=this.ovmap_;if(o.isRendered()&&c.isRendered()){var u=o.getSize(),d=o.getView().calculateExtentInternal(u);if(!this.viewExtent_||!vh(d,this.viewExtent_)){this.viewExtent_=d;var f=c.getSize(),g=c.getView().calculateExtentInternal(f),y=c.getPixelFromCoordinateInternal(_h(d)),v=c.getPixelFromCoordinateInternal(cT(d)),_=Math.abs(y[0]-v[0]),b=Math.abs(y[1]-v[1]),w=f[0],C=f[1];_<.1*w||b<.1*C||_>.75*w||b>.75*C?this.resetExtent_():pl(g,d)||this.recenter_()}}},a.prototype.resetExtent_=function(){var o=this.getMap(),c=this.ovmap_,u=o.getSize(),d=o.getView().calculateExtentInternal(u),f=c.getView(),m=Math.log(7.5)/Math.LN2;lN(d,1/(.1*Math.pow(2,m/2))),f.fitInternal(HN(d))},a.prototype.recenter_=function(){var o=this.getMap(),c=this.ovmap_,u=o.getView();c.getView().setCenterInternal(u.getCenterInternal())},a.prototype.updateBox_=function(){var o=this.getMap(),c=this.ovmap_;if(o.isRendered()&&c.isRendered()){var u=o.getSize(),h=o.getView(),d=c.getView(),f=this.rotateWithView_?0:-h.getRotation(),m=this.boxOverlay_,g=this.boxOverlay_.getElement(),y=h.getCenterInternal(),v=h.getResolution(),_=d.getResolution(),b=u[0]*v/_,w=u[1]*v/_;m.setPosition(y),g&&(g.style.width=b+"px",g.style.height=w+"px",g.style.transform="rotate("+f+"rad)")}},a.prototype.updateBoxAfterOvmapIsRendered_=function(){this.ovmapPostrenderKey_||(this.ovmapPostrenderKey_=hT(this.ovmap_,"postrender",function(o){delete this.ovmapPostrenderKey_,this.updateBox_()},this))},a.prototype.handleClick_=function(o){o.preventDefault(),this.handleToggle_()},a.prototype.handleToggle_=function(){this.element.classList.toggle(zE),this.collapsed_?Zv(this.collapseLabel_,this.label_):Zv(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_;var o=this.ovmap_;if(!this.collapsed_){if(o.isRendered())return this.viewExtent_=void 0,void o.render();o.updateSize(),this.resetExtent_(),this.updateBoxAfterOvmapIsRendered_()}},a.prototype.getCollapsible=function(){return this.collapsible_},a.prototype.setCollapsible=function(o){this.collapsible_!==o&&(this.collapsible_=o,this.element.classList.toggle("ol-uncollapsible"),!o&&this.collapsed_&&this.handleToggle_())},a.prototype.setCollapsed=function(o){!this.collapsible_||this.collapsed_===o||this.handleToggle_()},a.prototype.getCollapsed=function(){return this.collapsed_},a.prototype.getRotateWithView=function(){return this.rotateWithView_},a.prototype.setRotateWithView=function(o){this.rotateWithView_!==o&&(this.rotateWithView_=o,0!==this.getMap().getView().getRotation()&&(this.rotateWithView_?this.handleRotationChanged_():this.ovmap_.getView().setRotation(0),this.viewExtent_=void 0,this.validateExtent_(),this.updateBox_()))},a.prototype.getOverviewMap=function(){return this.ovmap_},a.prototype.render=function(o){this.validateExtent_(),this.updateBox_()},a}(Qf);var aFe=function(){var l=function(a,o){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,u){c.__proto__=u}||function(c,u){for(var h in u)Object.prototype.hasOwnProperty.call(u,h)&&(c[h]=u[h])})(a,o)};return function(a,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function c(){this.constructor=a}l(a,o),a.prototype=null===o?Object.create(o):(c.prototype=o.prototype,new c)}}();const qY=function(l){function a(o){var u=o||{};return l.call(this,{attributions:void 0!==u.attributions?u.attributions:['&#169; <a href="https://www.openstreetmap.org/copyright" target="_blank">OpenStreetMap</a> contributors.'],attributionsCollapsible:!1,cacheSize:u.cacheSize,crossOrigin:void 0!==u.crossOrigin?u.crossOrigin:"anonymous",imageSmoothing:u.imageSmoothing,maxZoom:void 0!==u.maxZoom?u.maxZoom:19,opaque:void 0===u.opaque||u.opaque,reprojectionErrorThreshold:u.reprojectionErrorThreshold,tileLoadFunction:u.tileLoadFunction,transition:u.transition,url:void 0!==u.url?u.url:"https://{a-c}.tile.openstreetmap.org/{z}/{x}/{y}.png",wrapX:u.wrapX,zDirection:u.zDirection})||this}return aFe(a,l),a}(a$),uFe=["mapDiv"];function hFe(l,a){1&l&&(V(0,"div",3),Le(1,"+"),B())}let Zd=(()=>{class l{constructor(o,c){this.mapSvc=o,this.ngZone=c,this.subs=[],this.privMapwidth=0,this.removePopupsOnMouseLeave=u=>{this.mapSvc.removeAllPopups(h=>"pointermove"===h.get("addEvent"))}}get mapwidth(){return this.privMapwidth}set mapwidth(o){this.privMapwidth=o,this.map.updateSize()}ngOnInit(){this.subscribeToMapState(),this.initMap(),this.subscribeToLayers()}ngAfterViewInit(){this.map.setTarget(this.mapDivView.nativeElement);const o=this.mapStateSvc.getMapState().getValue();this.setMapState(o),this.subscribeToMapEvents(),this.map.getTargetElement().addEventListener("mouseleave",this.removePopupsOnMouseLeave)}ngAfterViewChecked(){if(this.mapDivView){const o=this.mapDivView.nativeElement.offsetWidth;o!==this.mapwidth&&this.ngZone.runOutsideAngular(()=>{setTimeout(()=>{this.mapwidth=o},100)})}}ngOnDestroy(){this.subs.forEach(o=>o.unsubscribe()),this.map&&(this.map.un("moveend",this.mapOnMoveend),this.map.un("click",this.mapOnClickMove),this.map.un("dblclick",this.mapOnDclick),this.map.getTargetElement().removeEventListener("mouseleave",this.removePopupsOnMouseLeave),this.map.getInteractions().forEach(o=>{this.map.removeInteraction(o)}))}addUpdateLayers(o,c,u){let h=0;if(u.forEach(d=>{h+=this.mapSvc.getLayers(d).length}),o.length!==this.mapSvc.getLayers(c).length){if(this.mapSvc.setUkisLayers(o,c),h>0)for(const d of o){const f=this.mapSvc.getLayerByKey({key:"id",value:d.id},c);f&&f.getZIndex()!==o.indexOf(d)+h&&(f.setZIndex(o.indexOf(d)+h),this.setZIndexForGroup(f,o,d,h))}}else for(const d of o){const f=this.mapSvc.getLayerByKey({key:"id",value:d.id},c);if(f){if(f.getVisible()!==d.visible&&f.setVisible(d.visible),f.getOpacity()!==d.opacity&&f.setOpacity(d.opacity),d instanceof Qi&&f instanceof gl){const m=d.custom_layer.getSource(),g=f.getSource();m&&Dn(g)!==Dn(m)&&f.setSource(m)}else if(d instanceof Qi&&d.custom_layer instanceof Js&&f instanceof Js){const m=d.custom_layer.getLayers().getArray();f.getLayers().getArray().forEach((y,v)=>{const _=m[v];if(y instanceof gl&&_ instanceof gl){const b=y.getSource(),w=_.getSource();w&&Dn(b)!==Dn(w)&&y.setSource(w)}})}h>0?f.getZIndex()!==o.indexOf(d)+h&&(f.setZIndex(o.indexOf(d)+h),this.setZIndexForGroup(f,o,d,h)):f.getZIndex()!==o.indexOf(d)&&(f.setZIndex(o.indexOf(d)),this.setZIndexForGroup(f,o,d)),this.updateLayerParamsWith(f,d)}}}setZIndexForGroup(o,c,u,h){o instanceof Js&&o.getLayers().forEach(d=>{d.setZIndex(h?c.indexOf(u)+h:c.indexOf(u))})}updateLayerParamsWith(o,c){switch(c.type){case pu:this.updateWmsLayerParamsWith(o,c);break;case mu:this.updateWmtsLayerParamsWith(o,c);break;case gh:this.updateGeojsonLayerParamsWith(o,c);break;case Rd:this.updateWfsLayerParamsWith(o,c)}}updateWfsLayerParamsWith(o,c){c.options&&c.options.style!==o.getStyle()&&o.setStyle(c.options.style),o.getSource().getUrl()!==c.url&&o.getSource().setUrl(c.url)}updateGeojsonLayerParamsWith(o,c){var u;const h=o.getSource();if(h){if(c.data){const d=this.mapSvc.geoJsonToFeatures(c.data);if(h instanceof Wd){const f=h.getSource();f.clear(),f.addFeatures(d)}else h.clear(),h.addFeatures(d)}else c.url&&(h instanceof Wd?h.getSource().setUrl(c.url):h.setUrl(c.url));"object"==typeof(null==c?void 0:c.cluster)&&"distance"in c.cluster&&h instanceof Wd&&h.setDistance(c.cluster.distance)}(null===(u=null==c?void 0:c.options)||void 0===u?void 0:u.style)&&o.setStyle(c.options.style)}updateWmsLayerParamsWith(o,c){if(o instanceof gl){const h=o.getSource().getParams(),d=c.params;this.shallowEqual(h,d)||o.getSource().updateParams(d)}}updateWmtsLayerParamsWith(o,c){if(o instanceof gl){const u=o.getSource(),h=u.getStyle(),d=u.getFormat(),f=u.getVersion(),m=u.getMatrixSet(),g=c.params.style,y=c.params.format,v=c.params.version,_=c.params.matrixSetOptions.matrixSet;if(void 0!==g&&h!==g||void 0!==y&&d!==y||void 0!==v&&f!==v||void 0!==_&&m!==_){const b=c.filtertype.toLowerCase();this.mapSvc.updateUkisLayer(c,b)}}}shallowEqual(o,c){const u=Object.getOwnPropertyNames(o),h=Object.getOwnPropertyNames(c);if(u.length!==h.length)return!1;for(const d of u)if(o[d]!==c[d])return!1;return!0}addUpdateBaseLayers(o){if(o.length!==this.mapSvc.getLayers("baselayers").length){const c=o.filter(u=>!0===u.visible);0===c.length?o[0].visible=!0:c.length>1&&(o.forEach(u=>u.visible=!1),o[0].visible=!0),this.mapSvc.setUkisLayers(o,"baselayers")}else for(const c of o){const u=this.mapSvc.getLayerByKey({key:"id",value:c.id},"baselayers");u&&(u.getVisible()!==c.visible&&u.setVisible(c.visible),u.getZIndex()!==o.indexOf(c)&&u.setZIndex(o.indexOf(c)),u.getOpacity()!==c.opacity&&u.setOpacity(c.opacity))}}subscribeToLayers(){if(this.layersSvc){const o=this.layersSvc.getBaseLayers().subscribe(h=>this.addUpdateBaseLayers(h));this.subs.push(o);const c=this.layersSvc.getLayers().subscribe(h=>this.addUpdateLayers(h,"layers",["baselayers"]));this.subs.push(c);const u=this.layersSvc.getOverlays().subscribe(h=>this.addUpdateLayers(h,"overlays",["baselayers","layers"]));this.subs.push(u)}}setMapState(o){const c=this.mapStateSvc.getLastAction().getValue();"user"===o.options.notifier&&("setExtent"===c?this.mapSvc.setExtent(o.extent,!0):"setState"===c&&(this.mapSvc.setZoom(o.zoom,o.options.notifier),this.mapSvc.setCenter([o.center.lon,o.center.lat],!0)))}subscribeToMapState(){if(this.mapStateSvc){const o=this.mapStateSvc.getMapState().pipe(function(l){return a=>a.lift(new jNe(l))}(1)).subscribe(c=>this.setMapState(c));this.subs.push(o)}}subscribeToMapEvents(){this.mapOnMoveend=o=>{const c=this.mapSvc.getZoom(),u=this.mapSvc.getCenter(!0),h=this.mapSvc.getCurrentExtent(!0),d={lat:parseFloat(u[1]),lon:parseFloat(u[0])},f=new Bv(c,d,{notifier:"map"},h);this.mapStateSvc.setMapState(f)},this.map.on("moveend",this.mapOnMoveend),this.mapOnClickMove=o=>{this.mapSvc.layersOnMapEvent(o)},this.map.on(["click","pointermove"],this.mapOnClickMove),this.mapOnDclick=o=>{this.mapSvc.removeAllPopups()},this.map.on("dblclick",this.mapOnDclick)}initMap(){const o=this.mapSvc.createMap();this.map=o.map,this.setControls(),this.layersSvc||console.log("there is no layersSvc as defined!"),this.mapStateSvc||console.log("there is no mapStateSvc as defined!")}setControls(){const o=[],c=[];if(this.map&&(this.map.getControls().getArray().forEach(h=>c.push(h)),this.map.getControls().clear()),this.controls&&this.map){if(!1!==this.controls.attribution){let u={collapsible:!0,collapsed:!1};"object"==typeof this.controls.attribution&&(u=Object.assign(u,this.controls.attribution));const h=new RW(u);o.push(h)}if(this.controls.scaleLine){let u={};"object"==typeof this.controls.scaleLine&&(u=Object.assign(u,this.controls.scaleLine));const h=new YNe(u);o.push(h)}if(!1!==this.controls.zoom){let u={};"object"==typeof this.controls.zoom&&(u=Object.assign(u,this.controls.zoom));const h=new LW(u);o.push(h)}if(this.controls.mousePosition){let u={coordinateFormat:d=>function(l,a){return function(l,a,o){return l?"{x}, {y}".replace("{x}",l[0].toFixed(o)).replace("{y}",l[1].toFixed(o)):""}(l,0,a)}(d,2),projection:"EPSG:4326"};"object"==typeof this.controls.mousePosition&&(u=Object.assign(u,this.controls.mousePosition));const h=new JNe(u);o.push(h)}if(this.controls.fullScreen){let u={};"object"==typeof this.controls.fullScreen&&(u=Object.assign(u,this.controls.fullScreen));const h=new rFe(u);o.push(h)}if(this.controls.overviewMap){const u=document.createElement("spawn");u.innerHTML='<clr-icon shape="world"></clr-icon>';let h={layers:[new Bd({source:new qY})],label:u};"object"==typeof this.controls.overviewMap&&(h=Object.assign(h,this.controls.overviewMap));const d=new oFe(h);o.push(d)}if(this.controls.rotate){let u={};"object"==typeof this.controls.rotate&&(u=Object.assign(u,this.controls.rotate));const h=new PW(u);o.push(h)}o.length&&(c.filter(h=>!o.includes(h)).forEach(h=>o.push(h)),this.map.getControls().extend(o))}}}return l.\u0275fac=function(o){return new(o||l)(O(Qs),O(Fn))},l.\u0275cmp=Qe({type:l,selectors:[["ukis-map-ol"]],viewQuery:function(o,c){if(1&o&&Cr(uFe,5),2&o){let u;It(u=Rt())&&(c.mapDivView=u.first)}},inputs:{layersSvc:"layersSvc",mapStateSvc:["mapState","mapStateSvc"],controls:"controls"},decls:3,vars:1,consts:[["id","map","ref","map",1,"map"],["mapDiv",""],["id","crosshair","class","crosshair",4,"ngIf"],["id","crosshair",1,"crosshair"]],template:function(o,c){1&o&&(V(0,"div",0,1),le(2,hFe,2,0,"div",2),B()),2&o&&(j(2),q("ngIf",c.controls&&c.controls.crosshair))},directives:[Mn],styles:['@charset "UTF-8";.ol-box{box-sizing:border-box;border-radius:2px;border:1.5px solid rgb(179,197,219);background-color:#fff6}.ol-mouse-position{top:8px;right:8px;position:absolute}.ol-scale-line{background:rgba(0,60,136,.3);border-radius:4px;bottom:8px;left:8px;padding:2px;position:absolute}.ol-scale-line-inner{border:1px solid #eee;border-top:none;color:#eee;font-size:10px;text-align:center;margin:1px;will-change:contents,width;transition:all .25s}.ol-scale-bar{position:absolute;bottom:8px;left:8px}.ol-scale-step-marker{width:1px;height:15px;background-color:#000;float:right;z-Index:10}.ol-scale-step-text{position:absolute;bottom:-5px;font-size:12px;z-Index:11;color:#000;text-shadow:-2px 0 #FFFFFF,0 2px #FFFFFF,2px 0 #FFFFFF,0 -2px #FFFFFF}.ol-scale-text{position:absolute;font-size:14px;text-align:center;bottom:25px;color:#000;text-shadow:-2px 0 #FFFFFF,0 2px #FFFFFF,2px 0 #FFFFFF,0 -2px #FFFFFF}.ol-scale-singlebar{position:relative;height:10px;z-Index:9;box-sizing:border-box;border:1px solid black}.ol-unsupported{display:none}.ol-viewport,.ol-unselectable{-webkit-touch-callout:none;-webkit-user-select:none;user-select:none;-webkit-tap-highlight-color:rgba(0,0,0,0)}.ol-selectable{-webkit-touch-callout:default;-webkit-user-select:text;user-select:text}.ol-grabbing{cursor:grabbing}.ol-grab{cursor:move;cursor:grab}.ol-control{position:absolute;background-color:#fff6;border-radius:4px;padding:2px}.ol-control:hover{background-color:#fff9}.ol-zoom{top:.5em;left:.5em}.ol-rotate{top:.5em;right:.5em;transition:opacity .25s linear,visibility 0s linear}.ol-rotate.ol-hidden{opacity:0;visibility:hidden;transition:opacity .25s linear,visibility 0s linear .25s}.ol-zoom-extent{top:4.643em;left:.5em}.ol-full-screen{right:.5em;top:.5em}.ol-control button{display:block;margin:1px;padding:0;color:#fff;font-weight:bold;text-decoration:none;font-size:inherit;text-align:center;height:1.375em;width:1.375em;line-height:.4em;background-color:#003c8880;border:none;border-radius:2px}.ol-control button::-moz-focus-inner{border:none;padding:0}.ol-zoom-extent button{line-height:1.4em}.ol-compass{display:block;font-weight:normal;font-size:1.2em;will-change:transform}.ol-touch .ol-control button{font-size:1.5em}.ol-touch .ol-zoom-extent{top:5.5em}.ol-control button:hover,.ol-control button:focus{text-decoration:none;background-color:#003c88b3}.ol-zoom .ol-zoom-in{border-radius:2px 2px 0 0}.ol-zoom .ol-zoom-out{border-radius:0 0 2px 2px}.ol-attribution{text-align:right;bottom:.5em;right:.5em;max-width:calc(100% - 1.3em);display:flex;flex-flow:row-reverse;align-items:center}.ol-attribution a{color:#003c88b3;text-decoration:none}.ol-attribution ul{margin:0;padding:1px .5em;color:#000;text-shadow:0 0 2px #fff;font-size:12px}.ol-attribution li{display:inline;list-style:none}.ol-attribution li:not(:last-child):after{content:" "}.ol-attribution img{max-height:2em;max-width:inherit;vertical-align:middle}.ol-attribution button{flex-shrink:0}.ol-attribution.ol-collapsed ul{display:none}.ol-attribution:not(.ol-collapsed){background:rgba(255,255,255,.8)}.ol-attribution.ol-uncollapsible{bottom:0;right:0;border-radius:4px 0 0}.ol-attribution.ol-uncollapsible img{margin-top:-.2em;max-height:1.6em}.ol-attribution.ol-uncollapsible button{display:none}.ol-zoomslider{top:4.5em;left:.5em;height:200px}.ol-zoomslider button{position:relative;height:10px}.ol-touch .ol-zoomslider{top:5.5em}.ol-overviewmap{left:.5em;bottom:.5em}.ol-overviewmap.ol-uncollapsible{bottom:0;left:0;border-radius:0 4px 0 0}.ol-overviewmap .ol-overviewmap-map,.ol-overviewmap button{display:block}.ol-overviewmap .ol-overviewmap-map{border:1px solid #7b98bc;height:150px;margin:2px;width:150px}.ol-overviewmap:not(.ol-collapsed) button{bottom:2px;left:2px;position:absolute}.ol-overviewmap.ol-collapsed .ol-overviewmap-map,.ol-overviewmap.ol-uncollapsible button{display:none}.ol-overviewmap:not(.ol-collapsed){background:rgba(255,255,255,.8)}.ol-overviewmap-box{border:2px dotted rgba(0,60,136,.7)}.ol-overviewmap .ol-overviewmap-box:hover{cursor:move}:root{--ukis-crosshair-color: #ff0004;--ukis-popup-bg-color: rgb(238, 238, 238);--ukis-drop-shadow: drop-shadow(0 1px 4px rgba(0, 0, 0, .2));--ukis-ol-bbox-bg-color: rgba(255, 255, 255, .4);--ukis-ol-bbox-border-color: rgba(87, 87, 87, .4);--ukis-ol-overviewmap-left: .5em;--ukis-ol-overviewmap-bottom: 3em;--ukis-ol-control-bg-color: rgba(87, 87, 87, .6);--ukis-ol-control-border-color: rgba(87, 87, 87, .4)}.map{width:100%;height:100%;position:relative}.ol-popup{position:absolute;background-color:var(--ukis-popup-bg-color);filter:var(--ukis-drop-shadow);padding:15px;border-radius:2px;bottom:12px;left:-50px;min-width:280px;display:none;z-index:1000000}.ol-popup .ol-popup-closer{text-decoration:none;position:absolute;top:0px;right:8px;cursor:pointer}.ol-popup .ol-popup-closer:after{content:"\\2716"}.ol-popup:after,.ol-popup:before{top:100%;border:solid transparent;content:" ";height:0;width:0;position:absolute;pointer-events:none}.ol-popup:after{border-top-color:var(--ukis-popup-bg-color);border-width:10px;left:48px;margin-left:-10px}.ol-popup:before{border-width:11px;left:48px;margin-left:-11px}.crosshair{top:50%;left:50%;font-size:large;color:var(--ukis-crosshair-color);z-index:1;position:absolute;cursor:default}.ol-control button{cursor:pointer;background-color:var(--ukis-ol-control-bg-color)}.ol-control button:focus{background-color:var(--ukis-ol-control-bg-color)}.ol-control button:hover{background-color:var(--ukis-ol-control-border-color)}.ol-scale-line{background:rgba(255,255,255,.4);line-height:1.375em}.ol-scale-line .ol-scale-line-inner{background:var(--ukis-ol-control-bg-color);border-color:var(--ukis-ol-control-bg-color)}.ol-attribution ul{font-size:.5rem}.ol-box{background-color:var(--ukis-ol-bbox-bg-color);border-color:var(--ukis-ol-bbox-border-color)!important}.ol-box.ol-drag-select{border-color:var(--clr-color-action-600, var(--fallback-color-no-clr))!important}.ol-overviewmap{left:var(--ukis-ol-overviewmap-left)!important;bottom:var(--ukis-ol-overviewmap-bottom)!important}\n'],encapsulation:2}),l})(),dFe=(()=>{class l{}return l.\u0275fac=function(o){return new(o||l)},l.\u0275mod=Yt({type:l}),l.\u0275inj=jt({providers:[Qs],imports:[[sr]]}),l})();class XY extends Qf{constructor(a={}){const o=a;super({element:document.createElement("div"),target:o.target}),this.toggle="zoom";const c=void 0!==o.className?o.className:"zoom-number ol-unselectable ol-control",u=document.createElement("button");u.className=c+"-reset",u.setAttribute("type","button"),u.innerHTML="Z",u.addEventListener("click",this.toggleZoomResolution.bind(this),!1);const d=this.element;d.className=c+" ",d.appendChild(u)}setMap(a){super.setMap(a),a&&this.listenerKeys.push(Sr(a,"moveend",this.handleMapMoveend_,this))}getMapZoom(){return this.getMap().getView().getZoom()}getMapResolution(){return this.getMap().getView().getResolution()}toggleZoomResolution(){this.toggle="zoom"===this.toggle?"resolution":"zoom",this.handleMapMoveend_()}handleMapMoveend_(){if(this.element instanceof HTMLElement&&this.element.firstElementChild instanceof HTMLElement)if("zoom"===this.toggle){const a=this.getMapZoom();this.element.firstElementChild.innerHTML=""+Math.round(1*a)/1,this.element.firstElementChild.title=`z: ${a}`}else{const a=this.getMapResolution();this.element.firstElementChild.innerHTML=""+Math.round(1*a)/1,this.element.firstElementChild.title=`r: ${a}`}}}class pFe{constructor(a,o){this.fn=a,this.subscriptions=o}unsubscribe(){const a=this.subscriptions.indexOf(this);-1!==a&&this.subscriptions.splice(a,1)}}function $Y(l,a){switch(l){case 0:return function(){return a.apply(this,arguments)};case 1:return function(o){return a.apply(this,arguments)};case 2:return function(o,c){return a.apply(this,arguments)};case 3:return function(o,c,u){return a.apply(this,arguments)};case 4:return function(o,c,u,h){return a.apply(this,arguments)};case 5:return function(o,c,u,h,d){return a.apply(this,arguments)};case 6:return function(o,c,u,h,d,f){return a.apply(this,arguments)};case 7:return function(o,c,u,h,d,f,m){return a.apply(this,arguments)};case 8:return function(o,c,u,h,d,f,m,g){return a.apply(this,arguments)};case 9:return function(o,c,u,h,d,f,m,g,y){return a.apply(this,arguments)};case 10:return function(o,c,u,h,d,f,m,g,y,v){return a.apply(this,arguments)};default:throw new Error("First argument to _arity must be a non-negative integer no greater than ten")}}function Sp(l){return null!=l&&"object"==typeof l&&!0===l["@@functional/placeholder"]}function Oh(l){return function a(o){return 0===arguments.length||Sp(o)?a:l.apply(this,arguments)}}function B_(l){return function a(o,c){switch(arguments.length){case 0:return a;case 1:return Sp(o)?a:Oh(function(u){return l(o,u)});default:return Sp(o)&&Sp(c)?a:Sp(o)?Oh(function(u){return l(u,c)}):Sp(c)?Oh(function(u){return l(o,u)}):l(o,c)}}}function YY(l,a,o){return function(){for(var c=[],u=0,h=l,d=0;d<a.length||u<arguments.length;){var f;d<a.length&&(!Sp(a[d])||u>=arguments.length)?f=a[d]:(f=arguments[u],u+=1),c[d]=f,Sp(f)||(h-=1),d+=1}return h<=0?o.apply(this,c):$Y(h,YY(l,c,o))}}const ZY=B_(function(a,o){return 1===a?Oh(o):$Y(a,YY(a,[],o))}),zD=Oh(function(a){return null==a}),vFe=Number.isInteger||function(a){return a<<0===a};function KY(l){return"[object String]"===Object.prototype.toString.call(l)}const bFe=B_(function(a,o){var c=a<0?o.length+a:a;return KY(o)?o.charAt(c):o[c]}),TFe=B_(function(a,o){return a.map(function(c){for(var d,u=o,h=0;h<c.length;){if(null==u)return;u=vFe(d=c[h])?bFe(d,u):u[d],h+=1}return u})}),CFe=B_(function(a,o){return TFe([a],o)[0]}),JY=ZY(2,(l,a)=>void 0!==CFe(l,a))({"@@functional/placeholder":!0},window);function QY(l=window){return!zD(l)}let HD,eZ,n3,r3;function tZ(l=!0){if(!l||!HD){const a=document&&document.querySelector("[ng-version]");HD=a?""+a.getAttribute("ng-version"):void 0}return HD}function DFe(l=!0){var a,o,c;return l&&HD||(eZ=null===(c=null===(o=null===(a=window)||void 0===a?void 0:a.angular)||void 0===o?void 0:o.version)||void 0===c?void 0:c.full),eZ}function nZ(l=!0){var a,o,c;return l&&n3||(n3=(null===(c=null===(o=null===(a=window)||void 0===a?void 0:a.CDS)||void 0===o?void 0:o._react)||void 0===c?void 0:c.version)?window.CDS._react.version:document.querySelector("[data-reactroot], [data-reactid]")?"unknown version":void 0),n3}function rZ(l=!0){if(!l||!r3){const a=document.querySelectorAll("*");let o;for(let c=0;c<a.length;c++)if(a[c].__vue__){o=a[c];break}r3=o?"unknown version":void 0}return r3}function U_(l){return l.replace(/[A-Z]/g,a=>"-"+a.toLowerCase())}function oZ(l){return l.charAt(0).toUpperCase()+l.slice(1)}const lZ=new class{constructor(){if(this.supports={js:!0,flexGap:PFe()},!document.body.hasAttribute("cds-supports")||"no-js"===document.body.getAttribute("cds-supports")){const l=U_(Object.keys(this.supports).reduce((a,o)=>`${a} ${this.supports[o]?o:"no-"+o}`,"")).trim();document.body.setAttribute("cds-supports",l)}}};function PFe(){const l=document.createElement("div");l.style.display="flex",l.style.flexDirection="column",l.style.rowGap="1px",l.appendChild(document.createElement("div")),l.appendChild(document.createElement("div")),document.body.appendChild(l);const a=1===l.scrollHeight;return l.parentNode.removeChild(l),a}class v1{static log(...a){o3()&&s3()&&console.log(...a)}static warn(...a){o3()&&s3()&&console.warn(...a)}static error(...a){o3()&&s3()&&console.error(...a)}}function s3(){return!JY(["jasmine"])}function o3(){return!window.CDS.environment.production}function cZ(){QY()&&(window.CDS=window.CDS||{_version:[],_react:{version:void 0},_supports:lZ.supports,_isStateProxied:!1,_state:{focusTrapItems:[],i18nRegistry:{},elementRegistry:{},iconRegistry:{},motionRegistry:{}},environment:{production:!1},getDetails:uZ,logDetails:LFe},function(){var l;const a="5.5.4";window.CDS._version.indexOf(a)<0&&(window.CDS._version.push(a),null===(l=document.querySelector("body"))||void 0===l||l.setAttribute("cds-version",window.CDS._version.join(" "))),window.CDS._version.length>1&&v1.warn("Running more than one version of Clarity can cause unexpected issues. Please ensure only one version is loaded.")}(),window.CDS._isStateProxied||(window.CDS._isStateProxied=!0,window.CDS._state=new Proxy(window.CDS._state,{set:(l,a,o)=>{const c={key:a,prev:window.CDS._state[a],current:o};return l[a]=o,document.dispatchEvent(new CustomEvent("CDS_STATE_UPDATE",{detail:c})),!0}})))}function uZ(){return{versions:window.CDS._version,environment:window.CDS.environment,userAgent:navigator.userAgent,supports:window.CDS._supports,angularVersion:tZ(!1),angularJSVersion:DFe(!1),reactVersion:nZ(!1),vueVersion:rZ(!1),state:fC(la({},window.CDS._state),{iconRegistry:Object.keys(window.CDS._state.iconRegistry),motionRegistry:Object.keys(window.CDS._state.motionRegistry),focusTrapRegistry:Object.keys(window.CDS._state.focusTrapItems.map(l=>l.focusTrapId))})}}function LFe(){v1.log(JSON.stringify(uZ(),null,2))}const a3=new class{constructor(){this.subscriptions=[]}subscribe(a){const o=new pFe(a,this.subscriptions);return this.subscriptions.push(o),o}emit(a){this.subscriptions.forEach(o=>o.fn(a))}toEventObservable(){return this}};a3.listener=document.addEventListener("CDS_STATE_UPDATE",l=>a3.emit(l.detail));class Iu{static get state(){return cZ(),window.CDS._state}static getValue(a){return Iu.state[a]}static setValue(a,o){Iu.state[a]=o}static log(){v1.log(JSON.stringify(Iu.state,null,2))}}Iu.stateUpdates=a3.toEventObservable();const OFe=["unknown",{outline:'<circle class="cds-internal-dot-3" cx="31.1" cy="18" r="2.9"/><circle class="cds-internal-dot-2" cx="18" cy="18" r="2.9"/><circle class="cds-internal-dot-1" cx="4.9" cy="18" r="2.9"/>'}];class li{static get registry(){return la({unknown:OFe[1]},Iu.state.iconRegistry)}static addIcons(...a){Iu.state.iconRegistry=la(la({},Iu.state.iconRegistry),Object.fromEntries(a.filter(([o])=>!li.registry[o])))}static addAliases(...a){const o=a.filter(([c])=>li.registry[c]).flatMap(([c,u])=>u.map(h=>[h,li.registry[c]]));Iu.state.iconRegistry=la(la({},Iu.state.iconRegistry),Object.fromEntries(o))}static getIconNameFromShape(a){return a[0]}}const hZ=["ellipsis-horizontal",{outline:'<circle cx="31.1" cy="18" r="2.9"/><circle cx="18" cy="18" r="2.9"/><circle cx="4.9" cy="18" r="2.9"/>',outlineBadged:'<circle cx="31.1" cy="18" r="2.9"/><circle cx="18" cy="18" r="2.9"/><circle cx="4.9" cy="18" r="2.9"/>'}],Kl=["exclamation-circle",{outline:'<path d="M18,6A12,12,0,1,0,30,18,12,12,0,0,0,18,6Zm0,22A10,10,0,1,1,28,18,10,10,0,0,1,18,28Z"/><path d="M18,20.07a1.3,1.3,0,0,1-1.3-1.3v-6a1.3,1.3,0,1,1,2.6,0v6A1.3,1.3,0,0,1,18,20.07Z"/><circle cx="17.95" cy="23.02" r="1.5"/>',solid:'<path d="M18,6A12,12,0,1,0,30,18,12,12,0,0,0,18,6Zm-1.49,6a1.49,1.49,0,0,1,3,0v6.89a1.49,1.49,0,1,1-3,0ZM18,25.5a1.72,1.72,0,1,1,1.72-1.72A1.72,1.72,0,0,1,18,25.5Z"/>'}],Jl=["check-circle",{outline:'<path d="M18,6A12,12,0,1,0,30,18,12,12,0,0,0,18,6Zm0,22A10,10,0,1,1,28,18,10,10,0,0,1,18,28Z"/><path d="M16.34,23.74l-5-5a1,1,0,0,1,1.41-1.41l3.59,3.59,6.78-6.78a1,1,0,0,1,1.41,1.41Z"/>',solid:'<path d="M30,18A12,12,0,1,1,18,6,12,12,0,0,1,30,18Zm-4.77-2.16a1.4,1.4,0,0,0-2-2l-6.77,6.77L13,17.16a1.4,1.4,0,0,0-2,2l5.45,5.45Z"/>'}],G_=["angle",{outline:'<path d="M29.52,22.52,18,10.6,6.48,22.52a1.7,1.7,0,0,0,2.45,2.36L18,15.49l9.08,9.39a1.7,1.7,0,0,0,2.45-2.36Z"/>'}],NFe=["event",{outline:'<path d="M16.17,25.86,10.81,20.5a1,1,0,0,1,1.41-1.41L16.17,23l8.64-8.64a1,1,0,0,1,1.41,1.41Z"/><path d="M32.25,6H29V8h3V30H4V8H7V6H3.75A1.78,1.78,0,0,0,2,7.81V30.19A1.78,1.78,0,0,0,3.75,32h28.5A1.78,1.78,0,0,0,34,30.19V7.81A1.78,1.78,0,0,0,32.25,6Z"/><path d="M10,10a1,1,0,0,0,1-1V3A1,1,0,0,0,9,3V9A1,1,0,0,0,10,10Z"/><path d="M26,10a1,1,0,0,0,1-1V3a1,1,0,0,0-2,0V9A1,1,0,0,0,26,10Z"/><rect x="13" y="6" width="10" height="2"/>',outlineAlerted:'<path d="M10,10a1,1,0,0,0,1-1V3A1,1,0,0,0,9,3V9A1,1,0,0,0,10,10Z"/><path d="M10.81,20.5l5.36,5.36L26.22,15.81a1,1,0,0,0,.23-.41H23.8L16.17,23l-3.94-3.94a1,1,0,0,0-1.41,1.41Z"/><polygon points="21.29 6 13 6 13 8 20.14 8 21.29 6"/><path d="M33.68,15.4H32V30H4V8H7V6H3.75A1.78,1.78,0,0,0,2,7.81V30.19A1.78,1.78,0,0,0,3.75,32h28.5A1.78,1.78,0,0,0,34,30.19V15.38Z"/>',outlineBadged:'<path d="M10.81,20.5l5.36,5.36L26.22,15.81a1,1,0,0,0-1.41-1.41L16.17,23l-3.94-3.94a1,1,0,0,0-1.41,1.41Z"/><path d="M10,10a1,1,0,0,0,1-1V3A1,1,0,0,0,9,3V9A1,1,0,0,0,10,10Z"/><path d="M32,13.22V30H4V8H7V6H3.75A1.78,1.78,0,0,0,2,7.81V30.19A1.78,1.78,0,0,0,3.75,32h28.5A1.78,1.78,0,0,0,34,30.19V12.34A7.45,7.45,0,0,1,32,13.22Z"/><path d="M22.5,6H13V8h9.78A7.49,7.49,0,0,1,22.5,6Z"/>',solid:'<path d="M10,10a1,1,0,0,0,1-1V3A1,1,0,0,0,9,3V9A1,1,0,0,0,10,10Z"/><path d="M26,10a1,1,0,0,0,1-1V3a1,1,0,0,0-2,0V9A1,1,0,0,0,26,10Z"/><path d="M32.25,6h-4V9a2.2,2.2,0,0,1-4.4,0V6H12.2V9A2.2,2.2,0,0,1,7.8,9V6h-4A1.78,1.78,0,0,0,2,7.81V30.19A1.78,1.78,0,0,0,3.75,32h28.5A1.78,1.78,0,0,0,34,30.19V7.81A1.78,1.78,0,0,0,32.25,6ZM25.94,16.58l-9.67,9.67L11,20.94A1.36,1.36,0,0,1,12.9,19l3.38,3.38L24,14.66a1.36,1.36,0,1,1,1.93,1.93Z"/>',solidAlerted:'<path d="M10,10a1,1,0,0,0,1-1V3A1,1,0,0,0,9,3V9A1,1,0,0,0,10,10Z"/><path d="M33.68,15.4H26.3a1.34,1.34,0,0,1-.36,1.18l-9.67,9.67L11,20.94A1.36,1.36,0,0,1,12.9,19l3.38,3.38,7-7h-1A3.68,3.68,0,0,1,19,9.89L21.29,6H12.2V9A2.2,2.2,0,0,1,7.8,9V6h-4A1.78,1.78,0,0,0,2,7.81V30.19A1.78,1.78,0,0,0,3.75,32h28.5A1.78,1.78,0,0,0,34,30.19V15.38Z"/>',solidBadged:'<path d="M10,10a1,1,0,0,0,1-1V3A1,1,0,0,0,9,3V9A1,1,0,0,0,10,10Z"/><path d="M30,13.5A7.5,7.5,0,0,1,22.5,6H12.2V9A2.2,2.2,0,0,1,7.8,9V6h-4A1.78,1.78,0,0,0,2,7.81V30.19A1.78,1.78,0,0,0,3.75,32h28.5A1.78,1.78,0,0,0,34,30.19V12.34A7.45,7.45,0,0,1,30,13.5Zm-4.06,3.08-9.67,9.67L11,20.94A1.36,1.36,0,0,1,12.9,19l3.38,3.38L24,14.66a1.36,1.36,0,1,1,1.93,1.93Z"/>'}],FFe=["calendar",{outline:'<path d="M32.25,6H29V8h3V30H4V8H7V6H3.75A1.78,1.78,0,0,0,2,7.81V30.19A1.78,1.78,0,0,0,3.75,32h28.5A1.78,1.78,0,0,0,34,30.19V7.81A1.78,1.78,0,0,0,32.25,6Z"/><rect x="8" y="14" width="2" height="2"/><rect x="14" y="14" width="2" height="2"/><rect x="20" y="14" width="2" height="2"/><rect x="26" y="14" width="2" height="2"/><rect x="8" y="19" width="2" height="2"/><rect x="14" y="19" width="2" height="2"/><rect x="20" y="19" width="2" height="2"/><rect x="26" y="19" width="2" height="2"/><rect x="8" y="24" width="2" height="2"/><rect" x="14" y="24" width="2" height="2"/><rect x="20" y="24" width="2" height="2"/><rect x="26" y="24" width="2" height="2"/><path d="M10,10a1,1,0,0,0,1-1V3A1,1,0,0,0,9,3V9A1,1,0,0,0,10,10Z"/><path d="M26,10a1,1,0,0,0,1-1V3a1,1,0,0,0-2,0V9A1,1,0,0,0,26,10Z"/><rect x="13" y="6" width="10" height="2"/>',outlineAlerted:'<path d="M33.68,15.4H32V30H4V8H7V6H3.75A1.78,1.78,0,0,0,2,7.81V30.19A1.78,1.78,0,0,0,3.75,32h28.5A1.78,1.78,0,0,0,34,30.19V15.38Z"/><rect x="8" y="14" width="2" height="2"/><rect x="14" y="14" width="2" height="2"/><rect x="8" y="19" width="2" height="2"/><rect x="14" y="19" width="2" height="2"/><rect x="20" y="19" width="2" height="2"/><rect x="26" y="19" width="2" height="2"/><rect x="8" y="24" width="2" height="2"/><rect x="14" y="24" width="2" height="2"/><rect x="20" y="24" width="2" height="2"/><rect x="26" y="24" width="2" height="2"/><path d="M10,10a1,1,0,0,0,1-1V3A1,1,0,0,0,9,3V9A1,1,0,0,0,10,10Z"/><polygon points="21.29 6 13 6 13 8 20.14 8 21.29 6"/>',outlineBadged:'<path d="M32,13.22V30H4V8H7V6H3.75A1.78,1.78,0,0,0,2,7.81V30.19A1.78,1.78,0,0,0,3.75,32h28.5A1.78,1.78,0,0,0,34,30.19V12.34A7.45,7.45,0,0,1,32,13.22Z"/><rect x="8" y="14" width="2" height="2"/><rect x="14" y="14" width="2" height="2"/><rect x="20" y="14" width="2" height="2"/><rect x="26" y="14" width="2" height="2"/><rect x="8" y="19" width="2" height="2"/><rect x="14" y="19" width="2" height="2"/><rect x="20" y="19" width="2" height="2"/><rect x="26" y="19" width="2" height="2"/><rect x="8" y="24" width="2" height="2"/><rect x="14" y="24" width="2" height="2"/><rect x="20" y="24" width="2" height="2"/><rect x="26" y="24" width="2" height="2"/><path d="M10,10a1,1,0,0,0,1-1V3A1,1,0,0,0,9,3V9A1,1,0,0,0,10,10Z"/><path d="M22.5,6H13V8h9.78A7.49,7.49,0,0,1,22.5,6Z"/>',solid:'<path d="M32.25,6h-4V9a2.2,2.2,0,1,1-4.4,0V6H12.2V9A2.2,2.2,0,0,1,7.8,9V6h-4A1.78,1.78,0,0,0,2,7.81V30.19A1.78,1.78,0,0,0,3.75,32h28.5A1.78,1.78,0,0,0,34,30.19V7.81A1.78,1.78,0,0,0,32.25,6ZM10,26H8V24h2Zm0-5H8V19h2Zm0-5H8V14h2Zm6,10H14V24h2Zm0-5H14V19h2Zm0-5H14V14h2Zm6,10H20V24h2Zm0-5H20V19h2Zm0-5H20V14h2Zm6,10H26V24h2Zm0-5H26V19h2Zm0-5H26V14h2Z"/><path d="M10,10a1,1,0,0,0,1-1V3A1,1,0,0,0,9,3V9A1,1,0,0,0,10,10Z"/><path d="M26,10a1,1,0,0,0,1-1V3a1,1,0,0,0-2,0V9A1,1,0,0,0,26,10Z"/>',solidAlerted:'<path d="M33.68,15.4H22.23A3.68,3.68,0,0,1,19,9.89L21.29,6H12.2V9A2.2,2.2,0,0,1,7.8,9V6h-4A1.78,1.78,0,0,0,2,7.81V30.19A1.78,1.78,0,0,0,3.75,32h28.5A1.78,1.78,0,0,0,34,30.19V15.38ZM10,26H8V24h2Zm0-5H8V19h2Zm0-5H8V14h2Zm6,10H14V24h2Zm0-5H14V19h2Zm0-5H14V14h2Zm6,10H20V24h2Zm0-5H20V19h2Zm6,5H26V24h2Zm0-5H26V19h2Z"/><path d="M10,10a1,1,0,0,0,1-1V3A1,1,0,0,0,9,3V9A1,1,0,0,0,10,10Z"/>',solidBadged:'<path d="M10,10a1,1,0,0,0,1-1V3A1,1,0,0,0,9,3V9A1,1,0,0,0,10,10Z"/><path d="M30,13.5A7.5,7.5,0,0,1,22.5,6H12.2V9A2.2,2.2,0,0,1,7.8,9V6h-4A1.78,1.78,0,0,0,2,7.81V30.19A1.78,1.78,0,0,0,3.75,32h28.5A1.78,1.78,0,0,0,34,30.19V12.34A7.45,7.45,0,0,1,30,13.5ZM10,26H8V24h2Zm0-5H8V19h2Zm0-5H8V14h2Zm6,10H14V24h2Zm0-5H14V19h2Zm0-5H14V14h2Zm6,10H20V24h2Zm0-5H20V19h2Zm0-5H20V14h2Zm6,10H26V24h2Zm0-5H26V19h2Zm0-5H26V14h2Z"/>'}],kFe=["eye-hide",{outline:'<path d="M25.19,20.4A6.78,6.78,0,0,0,25.62,18a6.86,6.86,0,0,0-6.86-6.86,6.79,6.79,0,0,0-2.37.43L18,13.23a4.78,4.78,0,0,1,.74-.06A4.87,4.87,0,0,1,23.62,18a4.79,4.79,0,0,1-.06.74Z"/><path d="M34.29,17.53c-3.37-6.23-9.28-10-15.82-10a16.82,16.82,0,0,0-5.24.85L14.84,10a14.78,14.78,0,0,1,3.63-.47c5.63,0,10.75,3.14,13.8,8.43a17.75,17.75,0,0,1-4.37,5.1l1.42,1.42a19.93,19.93,0,0,0,5-6l.26-.48Z"/><path d="M4.87,5.78l4.46,4.46a19.52,19.52,0,0,0-6.69,7.29L2.38,18l.26.48c3.37,6.23,9.28,10,15.82,10a16.93,16.93,0,0,0,7.37-1.69l5,5,1.75-1.5-26-26Zm9.75,9.75,6.65,6.65a4.81,4.81,0,0,1-2.5.72A4.87,4.87,0,0,1,13.9,18,4.81,4.81,0,0,1,14.62,15.53Zm-1.45-1.45a6.85,6.85,0,0,0,9.55,9.55l1.6,1.6a14.91,14.91,0,0,1-5.86,1.2c-5.63,0-10.75-3.14-13.8-8.43a17.29,17.29,0,0,1,6.12-6.3Z"/>',solid:'<path d="M18.37,11.17A6.79,6.79,0,0,0,16,11.6l8.8,8.8A6.78,6.78,0,0,0,25.23,18,6.86,6.86,0,0,0,18.37,11.17Z"/><path d="M34.29,17.53c-3.37-6.23-9.28-10-15.82-10a16.82,16.82,0,0,0-5.24.85L14.84,10a14.78,14.78,0,0,1,3.63-.47c5.63,0,10.75,3.14,13.8,8.43a17.75,17.75,0,0,1-4.37,5.1l1.42,1.42a19.93,19.93,0,0,0,5-6l.26-.48Z"/><path d="M4.87,5.78l4.46,4.46a19.52,19.52,0,0,0-6.69,7.29L2.38,18l.26.48c3.37,6.23,9.28,10,15.82,10a16.93,16.93,0,0,0,7.37-1.69l5,5,1.75-1.5-26-26Zm8.3,8.3a6.85,6.85,0,0,0,9.55,9.55l1.6,1.6a14.91,14.91,0,0,1-5.86,1.2c-5.63,0-10.75-3.14-13.8-8.43a17.29,17.29,0,0,1,6.12-6.3Z"/>'}],VFe=["eye",{outline:'<path d="M33.62,17.53c-3.37-6.23-9.28-10-15.82-10S5.34,11.3,2,17.53L1.72,18l.26.48c3.37,6.23,9.28,10,15.82,10s12.46-3.72,15.82-10l.26-.48ZM17.8,26.43C12.17,26.43,7,23.29,4,18c3-5.29,8.17-8.43,13.8-8.43S28.54,12.72,31.59,18C28.54,23.29,23.42,26.43,17.8,26.43Z"/><path d="M18.09,11.17A6.86,6.86,0,1,0,25,18,6.86,6.86,0,0,0,18.09,11.17Zm0,11.72A4.86,4.86,0,1,1,23,18,4.87,4.87,0,0,1,18.09,22.89Z"/>',solid:'<path d="M33.62,17.53c-3.37-6.23-9.28-10-15.82-10S5.34,11.3,2,17.53L1.72,18l.26.48c3.37,6.23,9.28,10,15.82,10s12.46-3.72,15.82-10l.26-.48ZM17.8,26.43C12.17,26.43,7,23.29,4,18c3-5.29,8.17-8.43,13.8-8.43S28.54,12.72,31.59,18C28.54,23.29,23.42,26.43,17.8,26.43Z"/><circle cx="18.09" cy="18.03" r="6.86"/>'}],_1=["window-close",{outline:'<path d="M19.41,18l7.29-7.29a1,1,0,0,0-1.41-1.41L18,16.59,10.71,9.29a1,1,0,0,0-1.41,1.41L16.59,18,9.29,25.29a1,1,0,1,0,1.41,1.41L18,19.41l7.29,7.29a1,1,0,0,0,1.41-1.41Z"/>'}],BFe=["ellipsis-vertical",{outline:'<circle cx="18" cy="4.9" r="2.9"/><circle cx="18" cy="18" r="2.9"/><circle cx="18" cy="31.1" r="2.9"/>',outlineBadged:'<circle cx="18" cy="4.9" r="2.9"/><circle cx="18" cy="18" r="2.9"/><circle cx="18" cy="31.1" r="2.9"/>'}],UFe=["view-columns",{outline:'<path d="M31,5H5A2,2,0,0,0,3,7V29a2,2,0,0,0,2,2H31a2,2,0,0,0,2-2V7A2,2,0,0,0,31,5ZM13,29H5V7h8Zm10,0H15V7h8Z"/>'}],GFe=["arrow",{outline:'<path d="M27.66,15.61,18,6,8.34,15.61A1,1,0,1,0,9.75,17L17,9.81V28.94a1,1,0,1,0,2,0V9.81L26.25,17a1,1,0,0,0,1.41-1.42Z"/>'}],zFe=["times",{outline:'<path d="M19.41,18l8.29-8.29a1,1,0,0,0-1.41-1.41L18,16.59,9.71,8.29A1,1,0,0,0,8.29,9.71L16.59,18,8.29,26.29a1,1,0,1,0,1.41,1.41L18,19.41l8.29,8.29a1,1,0,0,0,1.41-1.41Z"/>'}],HFe=["step-forward-2",{outline:'<path d="M7.08,6.52a1.68,1.68,0,0,0,0,2.4L16.51,18,7.12,27.08a1.7,1.7,0,0,0,2.36,2.44h0L21.4,18,9.48,6.47A1.69,1.69,0,0,0,7.08,6.52Z"/><path d="M26.49,5a1.7,1.7,0,0,0-1.7,1.7V29.3a1.7,1.7,0,0,0,3.4,0V6.7A1.7,1.7,0,0,0,26.49,5Z"/>'}],dZ=["angle-double",{outline:'<path d="M29,19.41a1,1,0,0,1-.71-.29L18,8.83,7.71,19.12a1,1,0,0,1-1.41-1.41L18,6,29.71,17.71A1,1,0,0,1,29,19.41Z"/><path d="M29,30.41a1,1,0,0,1-.71-.29L18,19.83,7.71,30.12a1,1,0,0,1-1.41-1.41L18,17,29.71,28.71A1,1,0,0,1,29,30.41Z"/>'}],jFe=["filter-grid-circle",{outline:'<path d="M15,25.86l2,1V20.27a1,1,0,0,0-.29-.7L10.23,13H25.79l-6.47,6.57a1,1,0,0,0-.29.7L19,28l2,1V20.68L27.58,14A1.46,1.46,0,0,0,28,13V12a1,1,0,0,0-1-1H9a1,1,0,0,0-1,1v1a1.46,1.46,0,0,0,.42,1L15,20.68Z"/><path d="M18,2A16,16,0,1,0,34,18,16,16,0,0,0,18,2Zm0,30A14,14,0,1,1,32,18,14,14,0,0,1,18,32Z"/>',solid:'<path d="M18,2A16,16,0,1,0,34,18,16,16,0,0,0,18,2Zm0,30A14,14,0,1,1,32,18,14,14,0,0,1,18,32Z"/><path d="M8,11v1.12a.5.5,0,0,0,.15.35l7.28,7.36a.5.5,0,0,1,.15.35v6.89a.5.5,0,0,0,.28.45l3.95,1.41a.5.5,0,0,0,.72-.45l0-8.39a.54.54,0,0,1,.18-.35l7.12-7.25a.5.5,0,0,0,.15-.35V11Z"/>'}],WFe=["filter-grid",{outline:'<path d="M15,25.86l2,1V20.27a1,1,0,0,0-.29-.7L10.23,13H25.79l-6.47,6.57a1,1,0,0,0-.29.7L19,28l2,1V20.68L27.58,14A1.46,1.46,0,0,0,28,13V12a1,1,0,0,0-1-1H9a1,1,0,0,0-1,1v1a1.46,1.46,0,0,0,.42,1L15,20.68Z"/>',solid:'<path d="M8,11v1.12a.5.5,0,0,0,.15.35l7.28,7.36a.5.5,0,0,1,.15.35v6.89a.5.5,0,0,0,.28.45l3.95,1.41a.5.5,0,0,0,.72-.45l0-8.39a.54.54,0,0,1,.18-.35l7.12-7.25a.5.5,0,0,0,.15-.35V11Z"/>'}],fZ=["info-circle",{outline:'<circle cx="17.93" cy="11.9" r="1.4"/><path d="M21,23H19V15H16a1,1,0,0,0,0,2h1v6H15a1,1,0,1,0,0,2h6a1,1,0,0,0,0-2Z"/><path d="M18,6A12,12,0,1,0,30,18,12,12,0,0,0,18,6Zm0,22A10,10,0,1,1,28,18,10,10,0,0,1,18,28Z"/>',solid:'<path d="M18,6A12,12,0,1,0,30,18,12,12,0,0,0,18,6Zm-2,5.15a2,2,0,1,1,2,2A2,2,0,0,1,15.9,11.15ZM23,24a1,1,0,0,1-1,1H15a1,1,0,1,1,0-2h2V17H16a1,1,0,0,1,0-2h4v8h2A1,1,0,0,1,23,24Z"/>'}],qFe=["exclamation-triangle",{outline:'<path d="M18,21.32a1.3,1.3,0,0,0,1.3-1.3V14a1.3,1.3,0,1,0-2.6,0v6A1.3,1.3,0,0,0,18,21.32Z"/><circle cx="17.95" cy="24.27" r="1.5"/><path d="M30.33,25.54,20.59,7.6a3,3,0,0,0-5.27,0L5.57,25.54A3,3,0,0,0,8.21,30H27.69a3,3,0,0,0,2.64-4.43Zm-1.78,1.94a1,1,0,0,1-.86.49H8.21a1,1,0,0,1-.88-1.48L17.07,8.55a1,1,0,0,1,1.76,0l9.74,17.94A1,1,0,0,1,28.55,27.48Z"/>',solid:'<path d="M30.33,25.54,20.59,7.6a3,3,0,0,0-5.27,0L5.57,25.54A3,3,0,0,0,8.21,30H27.69a3,3,0,0,0,2.64-4.43ZM16.46,12.74a1.49,1.49,0,0,1,3,0v6.89a1.49,1.49,0,1,1-3,0ZM18,26.25a1.72,1.72,0,1,1,1.72-1.72A1.72,1.72,0,0,1,18,26.25Z"/>'}],pZ=["error-standard",{outline:'<circle cx="18" cy="26.06" r="1.33"/><path d="M18,22.61a1,1,0,0,1-1-1v-12a1,1,0,1,1,2,0v12A1,1,0,0,1,18,22.61Z"/><path d="M18,34A16,16,0,1,1,34,18,16,16,0,0,1,18,34ZM18,4A14,14,0,1,0,32,18,14,14,0,0,0,18,4Z"/>',solid:'<path d="M18,2.1a16,16,0,1,0,16,16A16,16,0,0,0,18,2.1ZM16.6,8.8a1.4,1.4,0,0,1,2.8,0v12a1.4,1.4,0,0,1-2.8,0ZM18,28.6a1.8,1.8,0,1,1,1.8-1.8A1.8,1.8,0,0,1,18,28.6Z"/>'}],XFe=["circle",{outline:'<path d="M18,34A16,16,0,1,1,34,18,16,16,0,0,1,18,34ZM18,4A14,14,0,1,0,32,18,14,14,0,0,0,18,4Z"/>',solid:'<path d="M18,34A16,16,0,1,1,34,18,16,16,0,0,1,18,34Z"/>'}],$Fe=["dot-circle",{outline:'<path d="M18,11a7,7,0,1,1-7,7,7,7,0,0,1,7-7"/><path d="M18,34A16,16,0,1,1,34,18,16,16,0,0,1,18,34ZM18,4A14,14,0,1,0,32,18,14,14,0,0,0,18,4Z"/>'}],YFe=["success-standard",{outline:'<path d="M18,2A16,16,0,1,0,34,18,16,16,0,0,0,18,2Zm0,30A14,14,0,1,1,32,18,14,14,0,0,1,18,32Z"/><path d="M28,12.1a1,1,0,0,0-1.41,0L15.49,23.15l-6-6A1,1,0,0,0,8,18.53L15.49,26,28,13.52A1,1,0,0,0,28,12.1Z"/>',solid:'<path d="M18,2A16,16,0,1,0,34,18,16,16,0,0,0,18,2ZM28.45,12.63,15.31,25.76,7.55,18a1.4,1.4,0,0,1,2-2l5.78,5.78L26.47,10.65a1.4,1.4,0,1,1,2,2Z"/>'}];function b1(l,a,o,c){return _t(o)&&(c=o,o=void 0),c?b1(l,a,o).pipe(pe(u=>Ie(u)?c(...u):c(u))):new yt(u=>{mZ(l,a,function(d){u.next(arguments.length>1?Array.prototype.slice.call(arguments):d)},u,o)})}function mZ(l,a,o,c,u){let h;if(function(l){return l&&"function"==typeof l.addEventListener&&"function"==typeof l.removeEventListener}(l)){const d=l;l.addEventListener(a,o,u),h=()=>d.removeEventListener(a,o,u)}else if(function(l){return l&&"function"==typeof l.on&&"function"==typeof l.off}(l)){const d=l;l.on(a,o),h=()=>d.off(a,o)}else if(function(l){return l&&"function"==typeof l.addListener&&"function"==typeof l.removeListener}(l)){const d=l;l.addListener(a,o),h=()=>d.removeListener(a,o)}else{if(!l||!l.length)throw new TypeError("Invalid event target");for(let d=0,f=l.length;d<f;d++)mZ(l[d],a,o,c,u)}c.add(h)}class QFe extends L{constructor(a,o){super()}schedule(a,o=0){return this}}class jD extends QFe{constructor(a,o){super(a,o),this.scheduler=a,this.work=o,this.pending=!1}schedule(a,o=0){if(this.closed)return this;this.state=a;const c=this.id,u=this.scheduler;return null!=c&&(this.id=this.recycleAsyncId(u,c,o)),this.pending=!0,this.delay=o,this.id=this.id||this.requestAsyncId(u,this.id,o),this}requestAsyncId(a,o,c=0){return setInterval(a.flush.bind(a,this),c)}recycleAsyncId(a,o,c=0){if(null!==c&&this.delay===c&&!1===this.pending)return o;clearInterval(o)}execute(a,o){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const c=this._execute(a,o);if(c)return c;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(a,o){let u,c=!1;try{this.work(a)}catch(h){c=!0,u=!!h&&h||new Error(h)}if(c)return this.unsubscribe(),u}_unsubscribe(){const a=this.id,o=this.scheduler,c=o.actions,u=c.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==u&&c.splice(u,1),null!=a&&(this.id=this.recycleAsyncId(o,a,null)),this.delay=null}}let gZ=(()=>{class l{constructor(o,c=l.now){this.SchedulerAction=o,this.now=c}schedule(o,c=0,u){return new this.SchedulerAction(this,o).schedule(u,c)}}return l.now=()=>Date.now(),l})();class Ru extends gZ{constructor(a,o=gZ.now){super(a,()=>Ru.delegate&&Ru.delegate!==this?Ru.delegate.now():o()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(a,o=0,c){return Ru.delegate&&Ru.delegate!==this?Ru.delegate.schedule(a,o,c):super.schedule(a,o,c)}flush(a){const{actions:o}=this;if(this.active)return void o.push(a);let c;this.active=!0;do{if(c=a.execute(a.state,a.delay))break}while(a=o.shift());if(this.active=!1,c){for(;a=o.shift();)a.unsubscribe();throw c}}}const nke=new class extends Ru{}(class extends jD{constructor(a,o){super(a,o),this.scheduler=a,this.work=o}schedule(a,o=0){return o>0?super.schedule(a,o):(this.delay=o,this.state=a,this.scheduler.flush(this),this)}execute(a,o){return o>0||this.closed?super.execute(a,o):this._execute(a,o)}requestAsyncId(a,o,c=0){return null!==c&&c>0||null===c&&this.delay>0?super.requestAsyncId(a,o,c):a.flush(this)}});class wl{constructor(a,o,c){this.kind=a,this.value=o,this.error=c,this.hasValue="N"===a}observe(a){switch(this.kind){case"N":return a.next&&a.next(this.value);case"E":return a.error&&a.error(this.error);case"C":return a.complete&&a.complete()}}do(a,o,c){switch(this.kind){case"N":return a&&a(this.value);case"E":return o&&o(this.error);case"C":return c&&c()}}accept(a,o,c){return a&&"function"==typeof a.next?this.observe(a):this.do(a,o,c)}toObservable(){switch(this.kind){case"N":return qt(this.value);case"E":return function(l,a){return new yt(o=>o.error(l))}(this.error);case"C":return uE()}throw new Error("unexpected notification kind value")}static createNext(a){return void 0!==a?new wl("N",a):wl.undefinedValueNotification}static createError(a){return new wl("E",void 0,a)}static createComplete(){return wl.completeNotification}}wl.completeNotification=new wl("C"),wl.undefinedValueNotification=new wl("N",void 0);class WD extends re{constructor(a,o,c=0){super(a),this.scheduler=o,this.delay=c}static dispatch(a){const{notification:o,destination:c}=a;o.observe(c),this.unsubscribe()}scheduleMessage(a){this.destination.add(this.scheduler.schedule(WD.dispatch,this.delay,new oke(a,this.destination)))}_next(a){this.scheduleMessage(wl.createNext(a))}_error(a){this.scheduleMessage(wl.createError(a)),this.unsubscribe()}_complete(){this.scheduleMessage(wl.createComplete()),this.unsubscribe()}}class oke{constructor(a,o){this.notification=a,this.destination=o}}class qD extends tt{constructor(a=Number.POSITIVE_INFINITY,o=Number.POSITIVE_INFINITY,c){super(),this.scheduler=c,this._events=[],this._infiniteTimeWindow=!1,this._bufferSize=a<1?1:a,this._windowTime=o<1?1:o,o===Number.POSITIVE_INFINITY?(this._infiniteTimeWindow=!0,this.next=this.nextInfiniteTimeWindow):this.next=this.nextTimeWindow}nextInfiniteTimeWindow(a){if(!this.isStopped){const o=this._events;o.push(a),o.length>this._bufferSize&&o.shift()}super.next(a)}nextTimeWindow(a){this.isStopped||(this._events.push(new ake(this._getNow(),a)),this._trimBufferThenGetEvents()),super.next(a)}_subscribe(a){const o=this._infiniteTimeWindow,c=o?this._events:this._trimBufferThenGetEvents(),u=this.scheduler,h=c.length;let d;if(this.closed)throw new zt;if(this.isStopped||this.hasError?d=L.EMPTY:(this.observers.push(a),d=new Ge(this,a)),u&&a.add(a=new WD(a,u)),o)for(let f=0;f<h&&!a.closed;f++)a.next(c[f]);else for(let f=0;f<h&&!a.closed;f++)a.next(c[f].value);return this.hasError?a.error(this.thrownError):this.isStopped&&a.complete(),d}_getNow(){return(this.scheduler||nke).now()}_trimBufferThenGetEvents(){const a=this._getNow(),o=this._bufferSize,c=this._windowTime,u=this._events,h=u.length;let d=0;for(;d<h&&!(a-u[d].time<c);)d++;return h>o&&(d=Math.max(d,h-o)),d>0&&u.splice(0,d),u}}class ake{constructor(a,o){this.time=a,this.value=o}}const z_=new Ru(jD);function H_(l,a=z_){return o=>o.lift(new lke(l,a))}class lke{constructor(a,o){this.dueTime=a,this.scheduler=o}call(a,o){return o.subscribe(new cke(a,this.dueTime,this.scheduler))}}class cke extends re{constructor(a,o,c){super(a),this.dueTime=o,this.scheduler=c,this.debouncedSubscription=null,this.lastValue=null,this.hasValue=!1}_next(a){this.clearDebounce(),this.lastValue=a,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(uke,this.dueTime,this))}_complete(){this.debouncedNext(),this.destination.complete()}debouncedNext(){if(this.clearDebounce(),this.hasValue){const{lastValue:a}=this;this.lastValue=null,this.hasValue=!1,this.destination.next(a)}}clearDebounce(){const a=this.debouncedSubscription;null!==a&&(this.remove(a),a.unsubscribe(),this.debouncedSubscription=null)}}function uke(l){l.debouncedNext()}class vZ{}const Kd="*";function Ql(l,a){return{type:7,name:l,definitions:a,options:{}}}function ra(l,a=null){return{type:4,styles:a,timings:l}}function _Z(l,a=null){return{type:2,steps:l,options:a}}function kr(l){return{type:6,styles:l,offset:null}}function $D(l,a,o){return{type:0,name:l,styles:a,options:o}}function eo(l,a,o=null){return{type:1,expr:l,animation:a,options:o}}function bZ(l){Promise.resolve(null).then(l)}class j_{constructor(a=0,o=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=a+o}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(a=>a()),this._onDoneFns=[])}onStart(a){this._onStartFns.push(a)}onDone(a){this._onDoneFns.push(a)}onDestroy(a){this._onDestroyFns.push(a)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){bZ(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(a=>a()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(a=>a()),this._onDestroyFns=[])}reset(){this._started=!1}setPosition(a){this._position=this.totalTime?a*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(a){const o="start"==a?this._onStartFns:this._onDoneFns;o.forEach(c=>c()),o.length=0}}class SZ{constructor(a){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=a;let o=0,c=0,u=0;const h=this.players.length;0==h?bZ(()=>this._onFinish()):this.players.forEach(d=>{d.onDone(()=>{++o==h&&this._onFinish()}),d.onDestroy(()=>{++c==h&&this._onDestroy()}),d.onStart(()=>{++u==h&&this._onStart()})}),this.totalTime=this.players.reduce((d,f)=>Math.max(d,f.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(a=>a()),this._onDoneFns=[])}init(){this.players.forEach(a=>a.init())}onStart(a){this._onStartFns.push(a)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(a=>a()),this._onStartFns=[])}onDone(a){this._onDoneFns.push(a)}onDestroy(a){this._onDestroyFns.push(a)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(a=>a.play())}pause(){this.players.forEach(a=>a.pause())}restart(){this.players.forEach(a=>a.restart())}finish(){this._onFinish(),this.players.forEach(a=>a.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(a=>a.destroy()),this._onDestroyFns.forEach(a=>a()),this._onDestroyFns=[])}reset(){this.players.forEach(a=>a.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(a){const o=a*this.totalTime;this.players.forEach(c=>{const u=c.totalTime?Math.min(1,o/c.totalTime):1;c.setPosition(u)})}getPosition(){const a=this.players.reduce((o,c)=>null===o||c.totalTime>o.totalTime?c:o,null);return null!=a?a.getPosition():0}beforeDestroy(){this.players.forEach(a=>{a.beforeDestroy&&a.beforeDestroy()})}triggerCallback(a){const o="start"==a?this._onStartFns:this._onDoneFns;o.forEach(c=>c()),o.length=0}}function YD(...l){if(1===l.length){const a=l[0];if(Ie(a))return ZD(a,null);if(T(a)&&Object.getPrototypeOf(a)===Object.prototype){const o=Object.keys(a);return ZD(o.map(c=>a[c]),o)}}if("function"==typeof l[l.length-1]){const a=l.pop();return ZD(l=1===l.length&&Ie(l[0])?l[0]:l,null).pipe(pe(o=>a(...o)))}return ZD(l,null)}function ZD(l,a){return new yt(o=>{const c=l.length;if(0===c)return void o.complete();const u=new Array(c);let h=0,d=0;for(let f=0;f<c;f++){const m=hi(l[f]);let g=!1;o.add(m.subscribe({next:y=>{g||(g=!0,d++),u[f]=y},error:y=>o.error(y),complete:()=>{h++,(h===c||!g)&&(d===c&&o.next(a?a.reduce((y,v,_)=>(y[v]=u[_],y),{}):u),o.complete())}}))}})}let TZ=(()=>{class l{constructor(o,c){this._renderer=o,this._elementRef=c,this.onChange=u=>{},this.onTouched=()=>{}}setProperty(o,c){this._renderer.setProperty(this._elementRef.nativeElement,o,c)}registerOnTouched(o){this.onTouched=o}registerOnChange(o){this.onChange=o}setDisabledState(o){this.setProperty("disabled",o)}}return l.\u0275fac=function(o){return new(o||l)(O(tr),O(kt))},l.\u0275dir=Ze({type:l}),l})(),Sg=(()=>{class l extends TZ{}return l.\u0275fac=function(){let a;return function(c){return(a||(a=Fs(l)))(c||l)}}(),l.\u0275dir=Ze({type:l,features:[on]}),l})();const Nh=new Sn("NgValueAccessor"),yke={provide:Nh,useExisting:vi(()=>W_),multi:!0};let W_=(()=>{class l extends Sg{writeValue(o){this.setProperty("checked",o)}}return l.\u0275fac=function(){let a;return function(c){return(a||(a=Fs(l)))(c||l)}}(),l.\u0275dir=Ze({type:l,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(o,c){1&o&&ze("change",function(h){return c.onChange(h.target.checked)})("blur",function(){return c.onTouched()})},features:[Mt([yke]),on]}),l})();const vke={provide:Nh,useExisting:vi(()=>ec),multi:!0},bke=new Sn("CompositionEventMode");let ec=(()=>{class l extends TZ{constructor(o,c,u){super(o,c),this._compositionMode=u,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function(){const l=dh()?dh().getUserAgent():"";return/android (\d+)/.test(l.toLowerCase())}())}writeValue(o){this.setProperty("value",null==o?"":o)}_handleInput(o){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(o)}_compositionStart(){this._composing=!0}_compositionEnd(o){this._composing=!1,this._compositionMode&&this.onChange(o)}}return l.\u0275fac=function(o){return new(o||l)(O(tr),O(kt),O(bke,8))},l.\u0275dir=Ze({type:l,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(o,c){1&o&&ze("input",function(h){return c._handleInput(h.target.value)})("blur",function(){return c.onTouched()})("compositionstart",function(){return c._compositionStart()})("compositionend",function(h){return c._compositionEnd(h.target.value)})},features:[Mt([vke]),on]}),l})();function Tp(l){return null==l||0===l.length}function wZ(l){return null!=l&&"number"==typeof l.length}const ba=new Sn("NgValidators"),wp=new Sn("NgAsyncValidators"),Ske=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class S1{static min(a){return CZ(a)}static max(a){return xZ(a)}static required(a){return function(l){return Tp(l.value)?{required:!0}:null}(a)}static requiredTrue(a){return function(l){return!0===l.value?null:{required:!0}}(a)}static email(a){return function(l){return Tp(l.value)||Ske.test(l.value)?null:{email:!0}}(a)}static minLength(a){return function(l){return a=>Tp(a.value)||!wZ(a.value)?null:a.value.length<l?{minlength:{requiredLength:l,actualLength:a.value.length}}:null}(a)}static maxLength(a){return function(l){return a=>wZ(a.value)&&a.value.length>l?{maxlength:{requiredLength:l,actualLength:a.value.length}}:null}(a)}static pattern(a){return function(l){if(!l)return Cp;let a,o;return"string"==typeof l?(o="","^"!==l.charAt(0)&&(o+="^"),o+=l,"$"!==l.charAt(l.length-1)&&(o+="$"),a=new RegExp(o)):(o=l.toString(),a=l),c=>{if(Tp(c.value))return null;const u=c.value;return a.test(u)?null:{pattern:{requiredPattern:o,actualValue:u}}}}(a)}static nullValidator(a){return null}static compose(a){return kZ(a)}static composeAsync(a){return VZ(a)}}function CZ(l){return a=>{if(Tp(a.value)||Tp(l))return null;const o=parseFloat(a.value);return!isNaN(o)&&o<l?{min:{min:l,actual:a.value}}:null}}function xZ(l){return a=>{if(Tp(a.value)||Tp(l))return null;const o=parseFloat(a.value);return!isNaN(o)&&o>l?{max:{max:l,actual:a.value}}:null}}function Cp(l){return null}function PZ(l){return null!=l}function LZ(l){const a=dS(l)?hi(l):l;return fx(a),a}function OZ(l){let a={};return l.forEach(o=>{a=null!=o?Object.assign(Object.assign({},a),o):a}),0===Object.keys(a).length?null:a}function NZ(l,a){return a.map(o=>o(l))}function FZ(l){return l.map(a=>function(l){return!l.validate}(a)?a:o=>a.validate(o))}function kZ(l){if(!l)return null;const a=l.filter(PZ);return 0==a.length?null:function(o){return OZ(NZ(o,a))}}function u3(l){return null!=l?kZ(FZ(l)):null}function VZ(l){if(!l)return null;const a=l.filter(PZ);return 0==a.length?null:function(o){return YD(NZ(o,a).map(LZ)).pipe(pe(OZ))}}function h3(l){return null!=l?VZ(FZ(l)):null}function BZ(l,a){return null===l?[a]:Array.isArray(l)?[...l,a]:[l,a]}function UZ(l){return l._rawValidators}function GZ(l){return l._rawAsyncValidators}function d3(l){return l?Array.isArray(l)?l:[l]:[]}function KD(l,a){return Array.isArray(l)?l.includes(a):l===a}function zZ(l,a){const o=d3(a);return d3(l).forEach(u=>{KD(o,u)||o.push(u)}),o}function HZ(l,a){return d3(a).filter(o=>!KD(l,o))}let jZ=(()=>{class l{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(o){this._rawValidators=o||[],this._composedValidatorFn=u3(this._rawValidators)}_setAsyncValidators(o){this._rawAsyncValidators=o||[],this._composedAsyncValidatorFn=h3(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(o){this._onDestroyCallbacks.push(o)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(o=>o()),this._onDestroyCallbacks=[]}reset(o){this.control&&this.control.reset(o)}hasError(o,c){return!!this.control&&this.control.hasError(o,c)}getError(o,c){return this.control?this.control.getError(o,c):null}}return l.\u0275fac=function(o){return new(o||l)},l.\u0275dir=Ze({type:l}),l})(),Xa=(()=>{class l extends jZ{get formDirective(){return null}get path(){return null}}return l.\u0275fac=function(){let a;return function(c){return(a||(a=Fs(l)))(c||l)}}(),l.\u0275dir=Ze({type:l,features:[on]}),l})();class to extends jZ{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class WZ{constructor(a){this._cd=a}is(a){var o,c,u;return"submitted"===a?!!(null===(o=this._cd)||void 0===o?void 0:o.submitted):!!(null===(u=null===(c=this._cd)||void 0===c?void 0:c.control)||void 0===u?void 0:u[a])}}let $a=(()=>{class l extends WZ{constructor(o){super(o)}}return l.\u0275fac=function(o){return new(o||l)(O(to,2))},l.\u0275dir=Ze({type:l,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(o,c){2&o&&lt("ng-untouched",c.is("untouched"))("ng-touched",c.is("touched"))("ng-pristine",c.is("pristine"))("ng-dirty",c.is("dirty"))("ng-valid",c.is("valid"))("ng-invalid",c.is("invalid"))("ng-pending",c.is("pending"))},features:[on]}),l})(),JD=(()=>{class l extends WZ{constructor(o){super(o)}}return l.\u0275fac=function(o){return new(o||l)(O(Xa,10))},l.\u0275dir=Ze({type:l,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(o,c){2&o&&lt("ng-untouched",c.is("untouched"))("ng-touched",c.is("touched"))("ng-pristine",c.is("pristine"))("ng-dirty",c.is("dirty"))("ng-valid",c.is("valid"))("ng-invalid",c.is("invalid"))("ng-pending",c.is("pending"))("ng-submitted",c.is("submitted"))},features:[on]}),l})();function eA(l,a){return[...a.path,l]}function T1(l,a){m3(l,a),a.valueAccessor.writeValue(l.value),function(l,a){a.valueAccessor.registerOnChange(o=>{l._pendingValue=o,l._pendingChange=!0,l._pendingDirty=!0,"change"===l.updateOn&&qZ(l,a)})}(l,a),function(l,a){const o=(c,u)=>{a.valueAccessor.writeValue(c),u&&a.viewToModelUpdate(c)};l.registerOnChange(o),a._registerOnDestroy(()=>{l._unregisterOnChange(o)})}(l,a),function(l,a){a.valueAccessor.registerOnTouched(()=>{l._pendingTouched=!0,"blur"===l.updateOn&&l._pendingChange&&qZ(l,a),"submit"!==l.updateOn&&l.markAsTouched()})}(l,a),function(l,a){if(a.valueAccessor.setDisabledState){const o=c=>{a.valueAccessor.setDisabledState(c)};l.registerOnDisabledChange(o),a._registerOnDestroy(()=>{l._unregisterOnDisabledChange(o)})}}(l,a)}function tA(l,a,o=!0){const c=()=>{};a.valueAccessor&&(a.valueAccessor.registerOnChange(c),a.valueAccessor.registerOnTouched(c)),rA(l,a),l&&(a._invokeOnDestroyCallbacks(),l._registerOnCollectionChange(()=>{}))}function nA(l,a){l.forEach(o=>{o.registerOnValidatorChange&&o.registerOnValidatorChange(a)})}function m3(l,a){const o=UZ(l);null!==a.validator?l.setValidators(BZ(o,a.validator)):"function"==typeof o&&l.setValidators([o]);const c=GZ(l);null!==a.asyncValidator?l.setAsyncValidators(BZ(c,a.asyncValidator)):"function"==typeof c&&l.setAsyncValidators([c]);const u=()=>l.updateValueAndValidity();nA(a._rawValidators,u),nA(a._rawAsyncValidators,u)}function rA(l,a){let o=!1;if(null!==l){if(null!==a.validator){const u=UZ(l);if(Array.isArray(u)&&u.length>0){const h=u.filter(d=>d!==a.validator);h.length!==u.length&&(o=!0,l.setValidators(h))}}if(null!==a.asyncValidator){const u=GZ(l);if(Array.isArray(u)&&u.length>0){const h=u.filter(d=>d!==a.asyncValidator);h.length!==u.length&&(o=!0,l.setAsyncValidators(h))}}}const c=()=>{};return nA(a._rawValidators,c),nA(a._rawAsyncValidators,c),o}function qZ(l,a){l._pendingDirty&&l.markAsDirty(),l.setValue(l._pendingValue,{emitModelToViewChange:!1}),a.viewToModelUpdate(l._pendingValue),l._pendingChange=!1}function XZ(l,a){m3(l,a)}function g3(l,a){if(!l.hasOwnProperty("model"))return!1;const o=l.model;return!!o.isFirstChange()||!Object.is(a,o.currentValue)}function $Z(l,a){l._syncPendingControls(),a.forEach(o=>{const c=o.control;"submit"===c.updateOn&&c._pendingChange&&(o.viewToModelUpdate(c._pendingValue),c._pendingChange=!1)})}function y3(l,a){if(!a)return null;let o,c,u;return Array.isArray(a),a.forEach(h=>{h.constructor===ec?o=h:function(l){return Object.getPrototypeOf(l.constructor)===Sg}(h)?c=h:u=h}),u||c||o||null}function iA(l,a){const o=l.indexOf(a);o>-1&&l.splice(o,1)}const w1="VALID",sA="INVALID",q_="PENDING",C1="DISABLED";function v3(l){return(b3(l)?l.validators:l)||null}function YZ(l){return Array.isArray(l)?u3(l):l||null}function _3(l,a){return(b3(a)?a.asyncValidators:l)||null}function ZZ(l){return Array.isArray(l)?h3(l):l||null}function b3(l){return null!=l&&!Array.isArray(l)&&"object"==typeof l}class S3{constructor(a,o){this._hasOwnPendingAsyncValidator=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=a,this._rawAsyncValidators=o,this._composedValidatorFn=YZ(this._rawValidators),this._composedAsyncValidatorFn=ZZ(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(a){this._rawValidators=this._composedValidatorFn=a}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(a){this._rawAsyncValidators=this._composedAsyncValidatorFn=a}get parent(){return this._parent}get valid(){return this.status===w1}get invalid(){return this.status===sA}get pending(){return this.status==q_}get disabled(){return this.status===C1}get enabled(){return this.status!==C1}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(a){this._rawValidators=a,this._composedValidatorFn=YZ(a)}setAsyncValidators(a){this._rawAsyncValidators=a,this._composedAsyncValidatorFn=ZZ(a)}addValidators(a){this.setValidators(zZ(a,this._rawValidators))}addAsyncValidators(a){this.setAsyncValidators(zZ(a,this._rawAsyncValidators))}removeValidators(a){this.setValidators(HZ(a,this._rawValidators))}removeAsyncValidators(a){this.setAsyncValidators(HZ(a,this._rawAsyncValidators))}hasValidator(a){return KD(this._rawValidators,a)}hasAsyncValidator(a){return KD(this._rawAsyncValidators,a)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(a={}){this.touched=!0,this._parent&&!a.onlySelf&&this._parent.markAsTouched(a)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(a=>a.markAllAsTouched())}markAsUntouched(a={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(o=>{o.markAsUntouched({onlySelf:!0})}),this._parent&&!a.onlySelf&&this._parent._updateTouched(a)}markAsDirty(a={}){this.pristine=!1,this._parent&&!a.onlySelf&&this._parent.markAsDirty(a)}markAsPristine(a={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(o=>{o.markAsPristine({onlySelf:!0})}),this._parent&&!a.onlySelf&&this._parent._updatePristine(a)}markAsPending(a={}){this.status=q_,!1!==a.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!a.onlySelf&&this._parent.markAsPending(a)}disable(a={}){const o=this._parentMarkedDirty(a.onlySelf);this.status=C1,this.errors=null,this._forEachChild(c=>{c.disable(Object.assign(Object.assign({},a),{onlySelf:!0}))}),this._updateValue(),!1!==a.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},a),{skipPristineCheck:o})),this._onDisabledChange.forEach(c=>c(!0))}enable(a={}){const o=this._parentMarkedDirty(a.onlySelf);this.status=w1,this._forEachChild(c=>{c.enable(Object.assign(Object.assign({},a),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:a.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},a),{skipPristineCheck:o})),this._onDisabledChange.forEach(c=>c(!1))}_updateAncestors(a){this._parent&&!a.onlySelf&&(this._parent.updateValueAndValidity(a),a.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(a){this._parent=a}updateValueAndValidity(a={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===w1||this.status===q_)&&this._runAsyncValidator(a.emitEvent)),!1!==a.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!a.onlySelf&&this._parent.updateValueAndValidity(a)}_updateTreeValidity(a={emitEvent:!0}){this._forEachChild(o=>o._updateTreeValidity(a)),this.updateValueAndValidity({onlySelf:!0,emitEvent:a.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?C1:w1}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(a){if(this.asyncValidator){this.status=q_,this._hasOwnPendingAsyncValidator=!0;const o=LZ(this.asyncValidator(this));this._asyncValidationSubscription=o.subscribe(c=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(c,{emitEvent:a})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(a,o={}){this.errors=a,this._updateControlsErrors(!1!==o.emitEvent)}get(a){return function(l,a,o){if(null==a||(Array.isArray(a)||(a=a.split(".")),Array.isArray(a)&&0===a.length))return null;let c=l;return a.forEach(u=>{c=c instanceof X_?c.controls.hasOwnProperty(u)?c.controls[u]:null:c instanceof Oke&&c.at(u)||null}),c}(this,a)}getError(a,o){const c=o?this.get(o):this;return c&&c.errors?c.errors[a]:null}hasError(a,o){return!!this.getError(a,o)}get root(){let a=this;for(;a._parent;)a=a._parent;return a}_updateControlsErrors(a){this.status=this._calculateStatus(),a&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(a)}_initObservables(){this.valueChanges=new pt,this.statusChanges=new pt}_calculateStatus(){return this._allControlsDisabled()?C1:this.errors?sA:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(q_)?q_:this._anyControlsHaveStatus(sA)?sA:w1}_anyControlsHaveStatus(a){return this._anyControls(o=>o.status===a)}_anyControlsDirty(){return this._anyControls(a=>a.dirty)}_anyControlsTouched(){return this._anyControls(a=>a.touched)}_updatePristine(a={}){this.pristine=!this._anyControlsDirty(),this._parent&&!a.onlySelf&&this._parent._updatePristine(a)}_updateTouched(a={}){this.touched=this._anyControlsTouched(),this._parent&&!a.onlySelf&&this._parent._updateTouched(a)}_isBoxedValue(a){return"object"==typeof a&&null!==a&&2===Object.keys(a).length&&"value"in a&&"disabled"in a}_registerOnCollectionChange(a){this._onCollectionChange=a}_setUpdateStrategy(a){b3(a)&&null!=a.updateOn&&(this._updateOn=a.updateOn)}_parentMarkedDirty(a){return!a&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class Fh extends S3{constructor(a=null,o,c){super(v3(o),_3(c,o)),this._onChange=[],this._applyFormState(a),this._setUpdateStrategy(o),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}setValue(a,o={}){this.value=this._pendingValue=a,this._onChange.length&&!1!==o.emitModelToViewChange&&this._onChange.forEach(c=>c(this.value,!1!==o.emitViewToModelChange)),this.updateValueAndValidity(o)}patchValue(a,o={}){this.setValue(a,o)}reset(a=null,o={}){this._applyFormState(a),this.markAsPristine(o),this.markAsUntouched(o),this.setValue(this.value,o),this._pendingChange=!1}_updateValue(){}_anyControls(a){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(a){this._onChange.push(a)}_unregisterOnChange(a){iA(this._onChange,a)}registerOnDisabledChange(a){this._onDisabledChange.push(a)}_unregisterOnDisabledChange(a){iA(this._onDisabledChange,a)}_forEachChild(a){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(a){this._isBoxedValue(a)?(this.value=this._pendingValue=a.value,a.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=a}}class X_ extends S3{constructor(a,o,c){super(v3(o),_3(c,o)),this.controls=a,this._initObservables(),this._setUpdateStrategy(o),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(a,o){return this.controls[a]?this.controls[a]:(this.controls[a]=o,o.setParent(this),o._registerOnCollectionChange(this._onCollectionChange),o)}addControl(a,o,c={}){this.registerControl(a,o),this.updateValueAndValidity({emitEvent:c.emitEvent}),this._onCollectionChange()}removeControl(a,o={}){this.controls[a]&&this.controls[a]._registerOnCollectionChange(()=>{}),delete this.controls[a],this.updateValueAndValidity({emitEvent:o.emitEvent}),this._onCollectionChange()}setControl(a,o,c={}){this.controls[a]&&this.controls[a]._registerOnCollectionChange(()=>{}),delete this.controls[a],o&&this.registerControl(a,o),this.updateValueAndValidity({emitEvent:c.emitEvent}),this._onCollectionChange()}contains(a){return this.controls.hasOwnProperty(a)&&this.controls[a].enabled}setValue(a,o={}){this._checkAllValuesPresent(a),Object.keys(a).forEach(c=>{this._throwIfControlMissing(c),this.controls[c].setValue(a[c],{onlySelf:!0,emitEvent:o.emitEvent})}),this.updateValueAndValidity(o)}patchValue(a,o={}){null!=a&&(Object.keys(a).forEach(c=>{this.controls[c]&&this.controls[c].patchValue(a[c],{onlySelf:!0,emitEvent:o.emitEvent})}),this.updateValueAndValidity(o))}reset(a={},o={}){this._forEachChild((c,u)=>{c.reset(a[u],{onlySelf:!0,emitEvent:o.emitEvent})}),this._updatePristine(o),this._updateTouched(o),this.updateValueAndValidity(o)}getRawValue(){return this._reduceChildren({},(a,o,c)=>(a[c]=o instanceof Fh?o.value:o.getRawValue(),a))}_syncPendingControls(){let a=this._reduceChildren(!1,(o,c)=>!!c._syncPendingControls()||o);return a&&this.updateValueAndValidity({onlySelf:!0}),a}_throwIfControlMissing(a){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[a])throw new Error(`Cannot find form control with name: ${a}.`)}_forEachChild(a){Object.keys(this.controls).forEach(o=>{const c=this.controls[o];c&&a(c,o)})}_setUpControls(){this._forEachChild(a=>{a.setParent(this),a._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(a){for(const o of Object.keys(this.controls)){const c=this.controls[o];if(this.contains(o)&&a(c))return!0}return!1}_reduceValue(){return this._reduceChildren({},(a,o,c)=>((o.enabled||this.disabled)&&(a[c]=o.value),a))}_reduceChildren(a,o){let c=a;return this._forEachChild((u,h)=>{c=o(c,u,h)}),c}_allControlsDisabled(){for(const a of Object.keys(this.controls))if(this.controls[a].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_checkAllValuesPresent(a){this._forEachChild((o,c)=>{if(void 0===a[c])throw new Error(`Must supply a value for form control with name: '${c}'.`)})}}class Oke extends S3{constructor(a,o,c){super(v3(o),_3(c,o)),this.controls=a,this._initObservables(),this._setUpdateStrategy(o),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(a){return this.controls[a]}push(a,o={}){this.controls.push(a),this._registerControl(a),this.updateValueAndValidity({emitEvent:o.emitEvent}),this._onCollectionChange()}insert(a,o,c={}){this.controls.splice(a,0,o),this._registerControl(o),this.updateValueAndValidity({emitEvent:c.emitEvent})}removeAt(a,o={}){this.controls[a]&&this.controls[a]._registerOnCollectionChange(()=>{}),this.controls.splice(a,1),this.updateValueAndValidity({emitEvent:o.emitEvent})}setControl(a,o,c={}){this.controls[a]&&this.controls[a]._registerOnCollectionChange(()=>{}),this.controls.splice(a,1),o&&(this.controls.splice(a,0,o),this._registerControl(o)),this.updateValueAndValidity({emitEvent:c.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(a,o={}){this._checkAllValuesPresent(a),a.forEach((c,u)=>{this._throwIfControlMissing(u),this.at(u).setValue(c,{onlySelf:!0,emitEvent:o.emitEvent})}),this.updateValueAndValidity(o)}patchValue(a,o={}){null!=a&&(a.forEach((c,u)=>{this.at(u)&&this.at(u).patchValue(c,{onlySelf:!0,emitEvent:o.emitEvent})}),this.updateValueAndValidity(o))}reset(a=[],o={}){this._forEachChild((c,u)=>{c.reset(a[u],{onlySelf:!0,emitEvent:o.emitEvent})}),this._updatePristine(o),this._updateTouched(o),this.updateValueAndValidity(o)}getRawValue(){return this.controls.map(a=>a instanceof Fh?a.value:a.getRawValue())}clear(a={}){this.controls.length<1||(this._forEachChild(o=>o._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:a.emitEvent}))}_syncPendingControls(){let a=this.controls.reduce((o,c)=>!!c._syncPendingControls()||o,!1);return a&&this.updateValueAndValidity({onlySelf:!0}),a}_throwIfControlMissing(a){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(a))throw new Error(`Cannot find form control at index ${a}`)}_forEachChild(a){this.controls.forEach((o,c)=>{a(o,c)})}_updateValue(){this.value=this.controls.filter(a=>a.enabled||this.disabled).map(a=>a.value)}_anyControls(a){return this.controls.some(o=>o.enabled&&a(o))}_setUpControls(){this._forEachChild(a=>this._registerControl(a))}_checkAllValuesPresent(a){this._forEachChild((o,c)=>{if(void 0===a[c])throw new Error(`Must supply a value for form control at index: ${c}.`)})}_allControlsDisabled(){for(const a of this.controls)if(a.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(a){a.setParent(this),a._registerOnCollectionChange(this._onCollectionChange)}}const Nke={provide:Xa,useExisting:vi(()=>E1)},x1=(()=>Promise.resolve(null))();let E1=(()=>{class l extends Xa{constructor(o,c){super(),this.submitted=!1,this._directives=[],this.ngSubmit=new pt,this.form=new X_({},u3(o),h3(c))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(o){x1.then(()=>{const c=this._findContainer(o.path);o.control=c.registerControl(o.name,o.control),T1(o.control,o),o.control.updateValueAndValidity({emitEvent:!1}),this._directives.push(o)})}getControl(o){return this.form.get(o.path)}removeControl(o){x1.then(()=>{const c=this._findContainer(o.path);c&&c.removeControl(o.name),iA(this._directives,o)})}addFormGroup(o){x1.then(()=>{const c=this._findContainer(o.path),u=new X_({});XZ(u,o),c.registerControl(o.name,u),u.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(o){x1.then(()=>{const c=this._findContainer(o.path);c&&c.removeControl(o.name)})}getFormGroup(o){return this.form.get(o.path)}updateModel(o,c){x1.then(()=>{this.form.get(o.path).setValue(c)})}setValue(o){this.control.setValue(o)}onSubmit(o){return this.submitted=!0,$Z(this.form,this._directives),this.ngSubmit.emit(o),!1}onReset(){this.resetForm()}resetForm(o){this.form.reset(o),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(o){return o.pop(),o.length?this.form.get(o):this.form}}return l.\u0275fac=function(o){return new(o||l)(O(ba,10),O(wp,10))},l.\u0275dir=Ze({type:l,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(o,c){1&o&&ze("submit",function(h){return c.onSubmit(h)})("reset",function(){return c.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[Mt([Nke]),on]}),l})();const kke={provide:to,useExisting:vi(()=>Cl)},JZ=(()=>Promise.resolve(null))();let Cl=(()=>{class l extends to{constructor(o,c,u,h){super(),this.control=new Fh,this._registered=!1,this.update=new pt,this._parent=o,this._setValidators(c),this._setAsyncValidators(u),this.valueAccessor=y3(0,h)}ngOnChanges(o){this._checkForErrors(),this._registered||this._setUpControl(),"isDisabled"in o&&this._updateDisabled(o),g3(o,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._parent?eA(this.name,this._parent):[this.name]}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(o){this.viewModel=o,this.update.emit(o)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){T1(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(o){JZ.then(()=>{this.control.setValue(o,{emitViewToModelChange:!1})})}_updateDisabled(o){const c=o.isDisabled.currentValue,u=""===c||c&&"false"!==c;JZ.then(()=>{u&&!this.control.disabled?this.control.disable():!u&&this.control.disabled&&this.control.enable()})}}return l.\u0275fac=function(o){return new(o||l)(O(Xa,9),O(ba,10),O(wp,10),O(Nh,10))},l.\u0275dir=Ze({type:l,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[Mt([kke]),on,Ci]}),l})(),oA=(()=>{class l{}return l.\u0275fac=function(o){return new(o||l)},l.\u0275dir=Ze({type:l,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),l})();const Vke={provide:Nh,useExisting:vi(()=>M1),multi:!0};let M1=(()=>{class l extends Sg{writeValue(o){this.setProperty("value",null==o?"":o)}registerOnChange(o){this.onChange=c=>{o(""==c?null:parseFloat(c))}}}return l.\u0275fac=function(){let a;return function(c){return(a||(a=Fs(l)))(c||l)}}(),l.\u0275dir=Ze({type:l,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(o,c){1&o&&ze("input",function(h){return c.onChange(h.target.value)})("blur",function(){return c.onTouched()})},features:[Mt([Vke]),on]}),l})();const Bke={provide:Nh,useExisting:vi(()=>w3),multi:!0};let QZ=(()=>{class l{}return l.\u0275fac=function(o){return new(o||l)},l.\u0275mod=Yt({type:l}),l.\u0275inj=jt({}),l})(),Uke=(()=>{class l{constructor(){this._accessors=[]}add(o,c){this._accessors.push([o,c])}remove(o){for(let c=this._accessors.length-1;c>=0;--c)if(this._accessors[c][1]===o)return void this._accessors.splice(c,1)}select(o){this._accessors.forEach(c=>{this._isSameGroup(c,o)&&c[1]!==o&&c[1].fireUncheck(o.value)})}_isSameGroup(o,c){return!!o[0].control&&o[0]._parent===c._control._parent&&o[1].name===c.name}}return l.\u0275fac=function(o){return new(o||l)},l.\u0275prov=Xe({factory:function(){return new l},token:l,providedIn:QZ}),l})(),w3=(()=>{class l extends Sg{constructor(o,c,u,h){super(o,c),this._registry=u,this._injector=h,this.onChange=()=>{}}ngOnInit(){this._control=this._injector.get(to),this._checkName(),this._registry.add(this._control,this)}ngOnDestroy(){this._registry.remove(this)}writeValue(o){this._state=o===this.value,this.setProperty("checked",this._state)}registerOnChange(o){this._fn=o,this.onChange=()=>{o(this.value),this._registry.select(this)}}fireUncheck(o){this.writeValue(o)}_checkName(){!this.name&&this.formControlName&&(this.name=this.formControlName)}}return l.\u0275fac=function(o){return new(o||l)(O(tr),O(kt),O(Uke),O(Qn))},l.\u0275dir=Ze({type:l,selectors:[["input","type","radio","formControlName",""],["input","type","radio","formControl",""],["input","type","radio","ngModel",""]],hostBindings:function(o,c){1&o&&ze("change",function(){return c.onChange()})("blur",function(){return c.onTouched()})},inputs:{name:"name",formControlName:"formControlName",value:"value"},features:[Mt([Bke]),on]}),l})();const Gke={provide:Nh,useExisting:vi(()=>D1),multi:!0};let D1=(()=>{class l extends Sg{writeValue(o){this.setProperty("value",parseFloat(o))}registerOnChange(o){this.onChange=c=>{o(""==c?null:parseFloat(c))}}}return l.\u0275fac=function(){let a;return function(c){return(a||(a=Fs(l)))(c||l)}}(),l.\u0275dir=Ze({type:l,selectors:[["input","type","range","formControlName",""],["input","type","range","formControl",""],["input","type","range","ngModel",""]],hostBindings:function(o,c){1&o&&ze("change",function(h){return c.onChange(h.target.value)})("input",function(h){return c.onChange(h.target.value)})("blur",function(){return c.onTouched()})},features:[Mt([Gke]),on]}),l})();const C3=new Sn("NgModelWithFormControlWarning"),Hke={provide:Xa,useExisting:vi(()=>$_)};let $_=(()=>{class l extends Xa{constructor(o,c){super(),this.validators=o,this.asyncValidators=c,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new pt,this._setValidators(o),this._setAsyncValidators(c)}ngOnChanges(o){this._checkFormPresent(),o.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(rA(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(o){const c=this.form.get(o.path);return T1(c,o),c.updateValueAndValidity({emitEvent:!1}),this.directives.push(o),c}getControl(o){return this.form.get(o.path)}removeControl(o){tA(o.control||null,o,!1),iA(this.directives,o)}addFormGroup(o){this._setUpFormContainer(o)}removeFormGroup(o){this._cleanUpFormContainer(o)}getFormGroup(o){return this.form.get(o.path)}addFormArray(o){this._setUpFormContainer(o)}removeFormArray(o){this._cleanUpFormContainer(o)}getFormArray(o){return this.form.get(o.path)}updateModel(o,c){this.form.get(o.path).setValue(c)}onSubmit(o){return this.submitted=!0,$Z(this.form,this.directives),this.ngSubmit.emit(o),!1}onReset(){this.resetForm()}resetForm(o){this.form.reset(o),this.submitted=!1}_updateDomValue(){this.directives.forEach(o=>{const c=o.control,u=this.form.get(o.path);c!==u&&(tA(c||null,o),u instanceof Fh&&(T1(u,o),o.control=u))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(o){const c=this.form.get(o.path);XZ(c,o),c.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(o){if(this.form){const c=this.form.get(o.path);c&&function(l,a){return rA(l,a)}(c,o)&&c.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){m3(this.form,this),this._oldForm&&rA(this._oldForm,this)}_checkFormPresent(){}}return l.\u0275fac=function(o){return new(o||l)(O(ba,10),O(wp,10))},l.\u0275dir=Ze({type:l,selectors:[["","formGroup",""]],hostBindings:function(o,c){1&o&&ze("submit",function(h){return c.onSubmit(h)})("reset",function(){return c.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[Mt([Hke]),on,Ci]}),l})();const qke={provide:to,useExisting:vi(()=>lA)};let lA=(()=>{class l extends to{constructor(o,c,u,h,d){super(),this._ngModelWarningConfig=d,this._added=!1,this.update=new pt,this._ngModelWarningSent=!1,this._parent=o,this._setValidators(c),this._setAsyncValidators(u),this.valueAccessor=y3(0,h)}set isDisabled(o){}ngOnChanges(o){this._added||this._setUpControl(),g3(o,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(o){this.viewModel=o,this.update.emit(o)}get path(){return eA(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this._added=!0}}return l.\u0275fac=function(o){return new(o||l)(O(Xa,13),O(ba,10),O(wp,10),O(Nh,10),O(C3,8))},l.\u0275dir=Ze({type:l,selectors:[["","formControlName",""]],inputs:{isDisabled:["disabled","isDisabled"],name:["formControlName","name"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[Mt([qke]),on,Ci]}),l._ngModelWarningSentOnce=!1,l})();const Xke={provide:Nh,useExisting:vi(()=>A1),multi:!0};function nK(l,a){return null==l?`${a}`:(a&&"object"==typeof a&&(a="Object"),`${l}: ${a}`.slice(0,50))}let A1=(()=>{class l extends Sg{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(o){this._compareWith=o}writeValue(o){this.value=o;const c=this._getOptionId(o);null==c&&this.setProperty("selectedIndex",-1);const u=nK(c,o);this.setProperty("value",u)}registerOnChange(o){this.onChange=c=>{this.value=this._getOptionValue(c),o(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(o){for(const c of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(c),o))return c;return null}_getOptionValue(o){const c=function(l){return l.split(":")[0]}(o);return this._optionMap.has(c)?this._optionMap.get(c):o}}return l.\u0275fac=function(){let a;return function(c){return(a||(a=Fs(l)))(c||l)}}(),l.\u0275dir=Ze({type:l,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(o,c){1&o&&ze("change",function(h){return c.onChange(h.target.value)})("blur",function(){return c.onTouched()})},inputs:{compareWith:"compareWith"},features:[Mt([Xke]),on]}),l})(),cA=(()=>{class l{constructor(o,c,u){this._element=o,this._renderer=c,this._select=u,this._select&&(this.id=this._select._registerOption())}set ngValue(o){null!=this._select&&(this._select._optionMap.set(this.id,o),this._setElementValue(nK(this.id,o)),this._select.writeValue(this._select.value))}set value(o){this._setElementValue(o),this._select&&this._select.writeValue(this._select.value)}_setElementValue(o){this._renderer.setProperty(this._element.nativeElement,"value",o)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return l.\u0275fac=function(o){return new(o||l)(O(kt),O(tr),O(A1,9))},l.\u0275dir=Ze({type:l,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),l})();const Yke={provide:Nh,useExisting:vi(()=>I1),multi:!0};function rK(l,a){return null==l?`${a}`:("string"==typeof a&&(a=`'${a}'`),a&&"object"==typeof a&&(a="Object"),`${l}: ${a}`.slice(0,50))}let I1=(()=>{class l extends Sg{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(o){this._compareWith=o}writeValue(o){let c;if(this.value=o,Array.isArray(o)){const u=o.map(h=>this._getOptionId(h));c=(h,d)=>{h._setSelected(u.indexOf(d.toString())>-1)}}else c=(u,h)=>{u._setSelected(!1)};this._optionMap.forEach(c)}registerOnChange(o){this.onChange=c=>{const u=[];if(void 0!==c.selectedOptions){const h=c.selectedOptions;for(let d=0;d<h.length;d++){const f=h.item(d),m=this._getOptionValue(f.value);u.push(m)}}else{const h=c.options;for(let d=0;d<h.length;d++){const f=h.item(d);if(f.selected){const m=this._getOptionValue(f.value);u.push(m)}}}this.value=u,o(u)}}_registerOption(o){const c=(this._idCounter++).toString();return this._optionMap.set(c,o),c}_getOptionId(o){for(const c of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(c)._value,o))return c;return null}_getOptionValue(o){const c=function(l){return l.split(":")[0]}(o);return this._optionMap.has(c)?this._optionMap.get(c)._value:o}}return l.\u0275fac=function(){let a;return function(c){return(a||(a=Fs(l)))(c||l)}}(),l.\u0275dir=Ze({type:l,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(o,c){1&o&&ze("change",function(h){return c.onChange(h.target)})("blur",function(){return c.onTouched()})},inputs:{compareWith:"compareWith"},features:[Mt([Yke]),on]}),l})(),uA=(()=>{class l{constructor(o,c,u){this._element=o,this._renderer=c,this._select=u,this._select&&(this.id=this._select._registerOption(this))}set ngValue(o){null!=this._select&&(this._value=o,this._setElementValue(rK(this.id,o)),this._select.writeValue(this._select.value))}set value(o){this._select?(this._value=o,this._setElementValue(rK(this.id,o)),this._select.writeValue(this._select.value)):this._setElementValue(o)}_setElementValue(o){this._renderer.setProperty(this._element.nativeElement,"value",o)}_setSelected(o){this._renderer.setProperty(this._element.nativeElement,"selected",o)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return l.\u0275fac=function(o){return new(o||l)(O(kt),O(tr),O(I1,9))},l.\u0275dir=Ze({type:l,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),l})(),sK=(()=>{class l{constructor(){this._validator=Cp}handleChanges(o){if(this.inputName in o){const c=this.normalizeInput(o[this.inputName].currentValue);this._validator=this.createValidator(c),this._onChange&&this._onChange()}}validate(o){return this._validator(o)}registerOnValidatorChange(o){this._onChange=o}}return l.\u0275fac=function(o){return new(o||l)},l.\u0275dir=Ze({type:l}),l})();const Kke={provide:ba,useExisting:vi(()=>hA),multi:!0};let hA=(()=>{class l extends sK{constructor(){super(...arguments),this.inputName="max",this.normalizeInput=o=>parseFloat(o),this.createValidator=o=>xZ(o)}ngOnChanges(o){this.handleChanges(o)}}return l.\u0275fac=function(){let a;return function(c){return(a||(a=Fs(l)))(c||l)}}(),l.\u0275dir=Ze({type:l,selectors:[["input","type","number","max","","formControlName",""],["input","type","number","max","","formControl",""],["input","type","number","max","","ngModel",""]],hostVars:1,hostBindings:function(o,c){if(2&o){let u;Ke("max",null!==(u=c.max)&&void 0!==u?u:null)}},inputs:{max:"max"},features:[Mt([Kke]),on,Ci]}),l})();const Jke={provide:ba,useExisting:vi(()=>dA),multi:!0};let dA=(()=>{class l extends sK{constructor(){super(...arguments),this.inputName="min",this.normalizeInput=o=>parseFloat(o),this.createValidator=o=>CZ(o)}ngOnChanges(o){this.handleChanges(o)}}return l.\u0275fac=function(){let a;return function(c){return(a||(a=Fs(l)))(c||l)}}(),l.\u0275dir=Ze({type:l,selectors:[["input","type","number","min","","formControlName",""],["input","type","number","min","","formControl",""],["input","type","number","min","","ngModel",""]],hostVars:1,hostBindings:function(o,c){if(2&o){let u;Ke("min",null!==(u=c.min)&&void 0!==u?u:null)}},inputs:{min:"min"},features:[Mt([Jke]),on,Ci]}),l})(),hK=(()=>{class l{}return l.\u0275fac=function(o){return new(o||l)},l.\u0275mod=Yt({type:l}),l.\u0275inj=jt({imports:[[QZ]]}),l})(),kh=(()=>{class l{}return l.\u0275fac=function(o){return new(o||l)},l.\u0275mod=Yt({type:l}),l.\u0275inj=jt({imports:[hK]}),l})(),s3e=(()=>{class l{static withConfig(o){return{ngModule:l,providers:[{provide:C3,useValue:o.warnOnNgModelWithFormControl}]}}}return l.\u0275fac=function(o){return new(o||l)},l.\u0275mod=Yt({type:l}),l.\u0275inj=jt({imports:[hK]}),l})();const a3e=ZY(3,(l,a,o)=>{!function(l,a){return a||(a=window&&window.customElements),!a||!!a.get(l)}(l)||function(){var l,a;return null===(a=null===(l=null==window?void 0:window.location)||void 0===l?void 0:l.href)||void 0===a?void 0:a.includes("localhost:6006")}()?(o.define(l,function(l){return lZ.supports.flexGap?l:class extends l{connectedCallback(){super.connectedCallback(),this.setAttribute("_nfg","")}}}(a)),cZ(),window&&!Object.keys(window.CDS._state.elementRegistry).some(c=>c===l)&&(window.CDS._state.elementRegistry=fC(la({},window.CDS._state.elementRegistry),{[l]:{}}))):v1.warn(l+" has already been registered")});function Vh(l,a,o,c){var d,u=arguments.length,h=u<3?a:null===c?c=Object.getOwnPropertyDescriptor(a,o):c;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)h=Reflect.decorate(l,a,o,c);else for(var f=l.length-1;f>=0;f--)(d=l[f])&&(h=(u<3?d(h):u>3?d(a,o,h):d(a,o))||h);return u>3&&h&&Object.defineProperty(a,o,h),h}function mK(l,a,o,c,u,h,d){try{var f=l[h](d),m=f.value}catch(g){return void o(g)}f.done?a(m):Promise.resolve(m).then(c,u)}function Y_(l){return function(){var a=this,o=arguments;return new Promise(function(c,u){var h=l.apply(a,o);function d(m){mK(h,c,u,d,f,"next",m)}function f(m){mK(h,c,u,d,f,"throw",m)}d(void 0)})}}const D3=window.ShadowRoot&&(void 0===window.ShadyCSS||window.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,A3=Symbol(),gK=new Map;class yK{constructor(a,o){if(this._$cssResult$=!0,o!==A3)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=a}get styleSheet(){let a=gK.get(this.cssText);return D3&&void 0===a&&(gK.set(this.cssText,a=new CSSStyleSheet),a.replaceSync(this.cssText)),a}toString(){return this.cssText}}const vK=(l,...a)=>{const o=1===l.length?l[0]:a.reduce((c,u,h)=>c+(d=>{if(!0===d._$cssResult$)return d.cssText;if("number"==typeof d)return d;throw Error("Value passed to 'css' function must be a 'css' function result: "+d+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(u)+l[h+1],l[0]);return new yK(o,A3)},_K=D3?l=>l:l=>l instanceof CSSStyleSheet?(a=>{let o="";for(const c of a.cssRules)o+=c.cssText;return(l=>new yK("string"==typeof l?l:l+"",A3))(o)})(l):l;var I3,R3;const P3={toAttribute(l,a){switch(a){case Boolean:l=l?"":null;break;case Object:case Array:l=null==l?l:JSON.stringify(l)}return l},fromAttribute(l,a){let o=l;switch(a){case Boolean:o=null!==l;break;case Number:o=null===l?null:Number(l);break;case Object:case Array:try{o=JSON.parse(l)}catch(c){o=null}}return o}},bK=(l,a)=>a!==l&&(a==a||l==l),L3={attribute:!0,type:String,converter:P3,reflect:!1,hasChanged:bK};class Z_ extends HTMLElement{constructor(){super(),this._$Et=new Map,this.isUpdatePending=!1,this.hasUpdated=!1,this._$Ei=null,this.o()}static addInitializer(a){var o;null!==(o=this.l)&&void 0!==o||(this.l=[]),this.l.push(a)}static get observedAttributes(){this.finalize();const a=[];return this.elementProperties.forEach((o,c)=>{const u=this._$Eh(c,o);void 0!==u&&(this._$Eu.set(u,c),a.push(u))}),a}static createProperty(a,o=L3){if(o.state&&(o.attribute=!1),this.finalize(),this.elementProperties.set(a,o),!o.noAccessor&&!this.prototype.hasOwnProperty(a)){const c="symbol"==typeof a?Symbol():"__"+a,u=this.getPropertyDescriptor(a,c,o);void 0!==u&&Object.defineProperty(this.prototype,a,u)}}static getPropertyDescriptor(a,o,c){return{get(){return this[o]},set(u){const h=this[a];this[o]=u,this.requestUpdate(a,h,c)},configurable:!0,enumerable:!0}}static getPropertyOptions(a){return this.elementProperties.get(a)||L3}static finalize(){if(this.hasOwnProperty("finalized"))return!1;this.finalized=!0;const a=Object.getPrototypeOf(this);if(a.finalize(),this.elementProperties=new Map(a.elementProperties),this._$Eu=new Map,this.hasOwnProperty("properties")){const o=this.properties,c=[...Object.getOwnPropertyNames(o),...Object.getOwnPropertySymbols(o)];for(const u of c)this.createProperty(u,o[u])}return this.elementStyles=this.finalizeStyles(this.styles),!0}static finalizeStyles(a){const o=[];if(Array.isArray(a)){const c=new Set(a.flat(1/0).reverse());for(const u of c)o.unshift(_K(u))}else void 0!==a&&o.push(_K(a));return o}static _$Eh(a,o){const c=o.attribute;return!1===c?void 0:"string"==typeof c?c:"string"==typeof a?a.toLowerCase():void 0}o(){var a;this._$Ev=new Promise(o=>this.enableUpdating=o),this._$AL=new Map,this._$Ep(),this.requestUpdate(),null===(a=this.constructor.l)||void 0===a||a.forEach(o=>o(this))}addController(a){var o,c;(null!==(o=this._$Em)&&void 0!==o?o:this._$Em=[]).push(a),void 0!==this.renderRoot&&this.isConnected&&(null===(c=a.hostConnected)||void 0===c||c.call(a))}removeController(a){var o;null===(o=this._$Em)||void 0===o||o.splice(this._$Em.indexOf(a)>>>0,1)}_$Ep(){this.constructor.elementProperties.forEach((a,o)=>{this.hasOwnProperty(o)&&(this._$Et.set(o,this[o]),delete this[o])})}createRenderRoot(){var a;const o=null!==(a=this.shadowRoot)&&void 0!==a?a:this.attachShadow(this.constructor.shadowRootOptions);return((l,a)=>{D3?l.adoptedStyleSheets=a.map(o=>o instanceof CSSStyleSheet?o:o.styleSheet):a.forEach(o=>{const c=document.createElement("style"),u=window.litNonce;void 0!==u&&c.setAttribute("nonce",u),c.textContent=o.cssText,l.appendChild(c)})})(o,this.constructor.elementStyles),o}connectedCallback(){var a;void 0===this.renderRoot&&(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),null===(a=this._$Em)||void 0===a||a.forEach(o=>{var c;return null===(c=o.hostConnected)||void 0===c?void 0:c.call(o)})}enableUpdating(a){}disconnectedCallback(){var a;null===(a=this._$Em)||void 0===a||a.forEach(o=>{var c;return null===(c=o.hostDisconnected)||void 0===c?void 0:c.call(o)})}attributeChangedCallback(a,o,c){this._$AK(a,c)}_$Eg(a,o,c=L3){var u,h;const d=this.constructor._$Eh(a,c);if(void 0!==d&&!0===c.reflect){const f=(null!==(h=null===(u=c.converter)||void 0===u?void 0:u.toAttribute)&&void 0!==h?h:P3.toAttribute)(o,c.type);this._$Ei=a,null==f?this.removeAttribute(d):this.setAttribute(d,f),this._$Ei=null}}_$AK(a,o){var c,u,h;const d=this.constructor,f=d._$Eu.get(a);if(void 0!==f&&this._$Ei!==f){const m=d.getPropertyOptions(f),g=m.converter,y=null!==(h=null!==(u=null===(c=g)||void 0===c?void 0:c.fromAttribute)&&void 0!==u?u:"function"==typeof g?g:null)&&void 0!==h?h:P3.fromAttribute;this._$Ei=f,this[f]=y(o,m.type),this._$Ei=null}}requestUpdate(a,o,c){let u=!0;void 0!==a&&(((c=c||this.constructor.getPropertyOptions(a)).hasChanged||bK)(this[a],o)?(this._$AL.has(a)||this._$AL.set(a,o),!0===c.reflect&&this._$Ei!==a&&(void 0===this._$ES&&(this._$ES=new Map),this._$ES.set(a,c))):u=!1),!this.isUpdatePending&&u&&(this._$Ev=this._$EC())}_$EC(){var a=this;return Y_(function*(){a.isUpdatePending=!0;try{yield a._$Ev}catch(c){Promise.reject(c)}const o=a.scheduleUpdate();return null!=o&&(yield o),!a.isUpdatePending})()}scheduleUpdate(){return this.performUpdate()}performUpdate(){var a;if(!this.isUpdatePending)return;this._$Et&&(this._$Et.forEach((u,h)=>this[h]=u),this._$Et=void 0);let o=!1;const c=this._$AL;try{o=this.shouldUpdate(c),o?(this.willUpdate(c),null===(a=this._$Em)||void 0===a||a.forEach(u=>{var h;return null===(h=u.hostUpdate)||void 0===h?void 0:h.call(u)}),this.update(c)):this._$ET()}catch(u){throw o=!1,this._$ET(),u}o&&this._$AE(c)}willUpdate(a){}_$AE(a){var o;null===(o=this._$Em)||void 0===o||o.forEach(c=>{var u;return null===(u=c.hostUpdated)||void 0===u?void 0:u.call(c)}),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(a)),this.updated(a)}_$ET(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$Ev}shouldUpdate(a){return!0}update(a){void 0!==this._$ES&&(this._$ES.forEach((o,c)=>this._$Eg(c,this[c],o)),this._$ES=void 0),this._$ET()}updated(a){}firstUpdated(a){}}var O3,N3;Z_.finalized=!0,Z_.elementProperties=new Map,Z_.elementStyles=[],Z_.shadowRootOptions={mode:"open"},null===(I3=globalThis.reactiveElementPolyfillSupport)||void 0===I3||I3.call(globalThis,{ReactiveElement:Z_}),(null!==(R3=globalThis.reactiveElementVersions)&&void 0!==R3?R3:globalThis.reactiveElementVersions=[]).push("1.0.0");const pA=globalThis.trustedTypes,SK=pA?pA.createPolicy("lit-html",{createHTML:l=>l}):void 0,Jd=`lit$${(Math.random()+"").slice(9)}$`,F3="?"+Jd,f3e=`<${F3}>`,K_=document,R1=(l="")=>K_.createComment(l),P1=l=>null===l||"object"!=typeof l&&"function"!=typeof l,TK=Array.isArray,L1=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,CK=/-->/g,xK=/>/g,Tg=/>|[ \x09\n\x0c\r](?:([^\s"'>=/]+)([ \x09\n\x0c\r]*=[ \x09\n\x0c\r]*(?:[^ \x09\n\x0c\r"'`<>=]|("|')|))|$)/g,EK=/'/g,MK=/"/g,DK=/^(?:script|style|textarea)$/i,AK=l=>(a,...o)=>({_$litType$:l,strings:a,values:o}),p3e=AK(1),m3e=AK(2),J_=Symbol.for("lit-noChange"),Vo=Symbol.for("lit-nothing"),IK=new WeakMap,Q_=K_.createTreeWalker(K_,129,null,!1);class O1{constructor({strings:a,_$litType$:o},c){let u;this.parts=[];let h=0,d=0;const f=a.length-1,m=this.parts,[g,y]=((l,a)=>{const o=l.length-1,c=[];let u,h=2===a?"<svg>":"",d=L1;for(let m=0;m<o;m++){const g=l[m];let y,v,_=-1,b=0;for(;b<g.length&&(d.lastIndex=b,v=d.exec(g),null!==v);)b=d.lastIndex,d===L1?"!--"===v[1]?d=CK:void 0!==v[1]?d=xK:void 0!==v[2]?(DK.test(v[2])&&(u=RegExp("</"+v[2],"g")),d=Tg):void 0!==v[3]&&(d=Tg):d===Tg?">"===v[0]?(d=null!=u?u:L1,_=-1):void 0===v[1]?_=-2:(_=d.lastIndex-v[2].length,y=v[1],d=void 0===v[3]?Tg:'"'===v[3]?MK:EK):d===MK||d===EK?d=Tg:d===CK||d===xK?d=L1:(d=Tg,u=void 0);const w=d===Tg&&l[m+1].startsWith("/>")?" ":"";h+=d===L1?g+f3e:_>=0?(c.push(y),g.slice(0,_)+"$lit$"+g.slice(_)+Jd+w):g+Jd+(-2===_?(c.push(void 0),m):w)}const f=h+(l[o]||"<?>")+(2===a?"</svg>":"");return[void 0!==SK?SK.createHTML(f):f,c]})(a,o);if(this.el=O1.createElement(g,c),Q_.currentNode=this.el.content,2===o){const v=this.el.content,_=v.firstChild;_.remove(),v.append(..._.childNodes)}for(;null!==(u=Q_.nextNode())&&m.length<f;){if(1===u.nodeType){if(u.hasAttributes()){const v=[];for(const _ of u.getAttributeNames())if(_.endsWith("$lit$")||_.startsWith(Jd)){const b=y[d++];if(v.push(_),void 0!==b){const w=u.getAttribute(b.toLowerCase()+"$lit$").split(Jd),C=/([.?@])?(.*)/.exec(b);m.push({type:1,index:h,name:C[2],strings:w,ctor:"."===C[1]?LK:"?"===C[1]?OK:"@"===C[1]?NK:N1})}else m.push({type:6,index:h})}for(const _ of v)u.removeAttribute(_)}if(DK.test(u.tagName)){const v=u.textContent.split(Jd),_=v.length-1;if(_>0){u.textContent=pA?pA.emptyScript:"";for(let b=0;b<_;b++)u.append(v[b],R1()),Q_.nextNode(),m.push({type:2,index:++h});u.append(v[_],R1())}}}else if(8===u.nodeType)if(u.data===F3)m.push({type:2,index:h});else{let v=-1;for(;-1!==(v=u.data.indexOf(Jd,v+1));)m.push({type:7,index:h}),v+=Jd.length-1}h++}}static createElement(a,o){const c=K_.createElement("template");return c.innerHTML=a,c}}function wg(l,a,o=l,c){var u,h,d,f;if(a===J_)return a;let m=void 0!==c?null===(u=o._$Cl)||void 0===u?void 0:u[c]:o._$Cu;const g=P1(a)?void 0:a._$litDirective$;return(null==m?void 0:m.constructor)!==g&&(null===(h=null==m?void 0:m._$AO)||void 0===h||h.call(m,!1),void 0===g?m=void 0:(m=new g(l),m._$AT(l,o,c)),void 0!==c?(null!==(d=(f=o)._$Cl)&&void 0!==d?d:f._$Cl=[])[c]=m:o._$Cu=m),void 0!==m&&(a=wg(l,m._$AS(l,a.values),m,c)),a}class PK{constructor(a,o){this.v=[],this._$AN=void 0,this._$AD=a,this._$AM=o}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}p(a){var o;const{el:{content:c},parts:u}=this._$AD,h=(null!==(o=null==a?void 0:a.creationScope)&&void 0!==o?o:K_).importNode(c,!0);Q_.currentNode=h;let d=Q_.nextNode(),f=0,m=0,g=u[0];for(;void 0!==g;){if(f===g.index){let y;2===g.type?y=new e0(d,d.nextSibling,this,a):1===g.type?y=new g.ctor(d,g.name,g.strings,this,a):6===g.type&&(y=new FK(d,this,a)),this.v.push(y),g=u[++m]}f!==(null==g?void 0:g.index)&&(d=Q_.nextNode(),f++)}return h}m(a){let o=0;for(const c of this.v)void 0!==c&&(void 0!==c.strings?(c._$AI(a,c,o),o+=c.strings.length-2):c._$AI(a[o])),o++}}class e0{constructor(a,o,c,u){var h;this.type=2,this._$AH=Vo,this._$AN=void 0,this._$AA=a,this._$AB=o,this._$AM=c,this.options=u,this._$Cg=null===(h=null==u?void 0:u.isConnected)||void 0===h||h}get _$AU(){var a,o;return null!==(o=null===(a=this._$AM)||void 0===a?void 0:a._$AU)&&void 0!==o?o:this._$Cg}get parentNode(){let a=this._$AA.parentNode;const o=this._$AM;return void 0!==o&&11===a.nodeType&&(a=o.parentNode),a}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(a,o=this){a=wg(this,a,o),P1(a)?a===Vo||null==a||""===a?(this._$AH!==Vo&&this._$AR(),this._$AH=Vo):a!==this._$AH&&a!==J_&&this.$(a):void 0!==a._$litType$?this.T(a):void 0!==a.nodeType?this.S(a):(l=>{var a;return TK(l)||"function"==typeof(null===(a=l)||void 0===a?void 0:a[Symbol.iterator])})(a)?this.M(a):this.$(a)}A(a,o=this._$AB){return this._$AA.parentNode.insertBefore(a,o)}S(a){this._$AH!==a&&(this._$AR(),this._$AH=this.A(a))}$(a){this._$AH!==Vo&&P1(this._$AH)?this._$AA.nextSibling.data=a:this.S(K_.createTextNode(a)),this._$AH=a}T(a){var o;const{values:c,_$litType$:u}=a,h="number"==typeof u?this._$AC(a):(void 0===u.el&&(u.el=O1.createElement(u.h,this.options)),u);if((null===(o=this._$AH)||void 0===o?void 0:o._$AD)===h)this._$AH.m(c);else{const d=new PK(h,this),f=d.p(this.options);d.m(c),this.S(f),this._$AH=d}}_$AC(a){let o=IK.get(a.strings);return void 0===o&&IK.set(a.strings,o=new O1(a)),o}M(a){TK(this._$AH)||(this._$AH=[],this._$AR());const o=this._$AH;let c,u=0;for(const h of a)u===o.length?o.push(c=new e0(this.A(R1()),this.A(R1()),this,this.options)):c=o[u],c._$AI(h),u++;u<o.length&&(this._$AR(c&&c._$AB.nextSibling,u),o.length=u)}_$AR(a=this._$AA.nextSibling,o){var c;for(null===(c=this._$AP)||void 0===c||c.call(this,!1,!0,o);a&&a!==this._$AB;){const u=a.nextSibling;a.remove(),a=u}}setConnected(a){var o;void 0===this._$AM&&(this._$Cg=a,null===(o=this._$AP)||void 0===o||o.call(this,a))}}class N1{constructor(a,o,c,u,h){this.type=1,this._$AH=Vo,this._$AN=void 0,this.element=a,this.name=o,this._$AM=u,this.options=h,c.length>2||""!==c[0]||""!==c[1]?(this._$AH=Array(c.length-1).fill(new String),this.strings=c):this._$AH=Vo}get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}_$AI(a,o=this,c,u){const h=this.strings;let d=!1;if(void 0===h)a=wg(this,a,o,0),d=!P1(a)||a!==this._$AH&&a!==J_,d&&(this._$AH=a);else{const f=a;let m,g;for(a=h[0],m=0;m<h.length-1;m++)g=wg(this,f[c+m],o,m),g===J_&&(g=this._$AH[m]),d||(d=!P1(g)||g!==this._$AH[m]),g===Vo?a=Vo:a!==Vo&&(a+=(null!=g?g:"")+h[m+1]),this._$AH[m]=g}d&&!u&&this.k(a)}k(a){a===Vo?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,null!=a?a:"")}}class LK extends N1{constructor(){super(...arguments),this.type=3}k(a){this.element[this.name]=a===Vo?void 0:a}}class OK extends N1{constructor(){super(...arguments),this.type=4}k(a){a&&a!==Vo?this.element.setAttribute(this.name,""):this.element.removeAttribute(this.name)}}class NK extends N1{constructor(a,o,c,u,h){super(a,o,c,u,h),this.type=5}_$AI(a,o=this){var c;if((a=null!==(c=wg(this,a,o,0))&&void 0!==c?c:Vo)===J_)return;const u=this._$AH,h=a===Vo&&u!==Vo||a.capture!==u.capture||a.once!==u.once||a.passive!==u.passive,d=a!==Vo&&(u===Vo||h);h&&this.element.removeEventListener(this.name,this,u),d&&this.element.addEventListener(this.name,this,a),this._$AH=a}handleEvent(a){var o,c;"function"==typeof this._$AH?this._$AH.call(null!==(c=null===(o=this.options)||void 0===o?void 0:o.host)&&void 0!==c?c:this.element,a):this._$AH.handleEvent(a)}}class FK{constructor(a,o,c){this.element=a,this.type=6,this._$AN=void 0,this._$AM=o,this.options=c}get _$AU(){return this._$AM._$AU}_$AI(a){wg(this,a)}}var k3,V3,B3;null===(O3=globalThis.litHtmlPolyfillSupport)||void 0===O3||O3.call(globalThis,O1,e0),(null!==(N3=globalThis.litHtmlVersions)&&void 0!==N3?N3:globalThis.litHtmlVersions=[]).push("2.0.0");class F1 extends Z_{constructor(){super(...arguments),this.renderOptions={host:this},this._$Dt=void 0}createRenderRoot(){var a,o;const c=super.createRenderRoot();return null!==(a=(o=this.renderOptions).renderBefore)&&void 0!==a||(o.renderBefore=c.firstChild),c}update(a){const o=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(a),this._$Dt=((l,a,o)=>{var c,u;const h=null!==(c=null==o?void 0:o.renderBefore)&&void 0!==c?c:a;let d=h._$litPart$;if(void 0===d){const f=null!==(u=null==o?void 0:o.renderBefore)&&void 0!==u?u:null;h._$litPart$=d=new e0(a.insertBefore(R1(),f),f,void 0,null!=o?o:{})}return d._$AI(l),d})(o,this.renderRoot,this.renderOptions)}connectedCallback(){var a;super.connectedCallback(),null===(a=this._$Dt)||void 0===a||a.setConnected(!0)}disconnectedCallback(){var a;super.disconnectedCallback(),null===(a=this._$Dt)||void 0===a||a.setConnected(!1)}render(){return J_}}F1.finalized=!0,F1._$litElement$=!0,null===(k3=globalThis.litElementHydrateSupport)||void 0===k3||k3.call(globalThis,{LitElement:F1}),null===(V3=globalThis.litElementPolyfillSupport)||void 0===V3||V3.call(globalThis,{LitElement:F1}),(null!==(B3=globalThis.litElementVersions)&&void 0!==B3?B3:globalThis.litElementVersions=[]).push("3.0.0");const v3e=vK`@charset "UTF-8";:host,:root{--δ1:var(--cds-global-layout-space-xxs, calc((2 / var(--cds-global-base, 20)) * 1rem));--δ2:var(--cds-global-layout-space-xs, calc((4 / var(--cds-global-base, 20)) * 1rem));--δ3:var(--cds-global-layout-space-sm, calc((6 / var(--cds-global-base, 20)) * 1rem));--δ4:var(--cds-global-layout-space-md, calc((12 / var(--cds-global-base, 20)) * 1rem));--δ5:var(--cds-global-layout-space-lg, calc((24 / var(--cds-global-base, 20)) * 1rem));--δ6:var(--cds-global-layout-space-xl, calc((48 / var(--cds-global-base, 20)) * 1rem))}[cds-layout~="wrap:none"]{flex-wrap:nowrap!important}[cds-layout*="align:stretch"]{flex-grow:1!important}[cds-layout*="align:shrink"]{flex-shrink:1!important;flex-grow:0!important}[cds-layout~=horizontal],[cds-layout~=vertical]{width:100%;display:-webkit-box;display:-ms-flexbox;display:flex;align-items:flex-start}[cds-layout~=horizontal]{flex-direction:row;flex-wrap:wrap;justify-items:flex-start;margin:0;min-height:0}[cds-layout~=horizontal]>[cds-layout~=horizontal],[cds-layout~=horizontal]>[cds-layout~=vertical],[cds-layout~=horizontal]>[cds-text]{width:initial!important}[cds-layout~=horizontal][cds-layout*="align:top"]{align-items:flex-start}[cds-layout~=horizontal][cds-layout*="align:left"]{justify-content:flex-start}[cds-layout~=horizontal][cds-layout*="align:right"]{justify-content:flex-end}[cds-layout~=horizontal][cds-layout*="align:vertical-center"]{align-items:center;align-content:center}[cds-layout~=horizontal][cds-layout*="align:horizontal-center"]{justify-content:center}[cds-layout~=horizontal][cds-layout*="align:center"]{align-items:center;align-content:center;justify-content:center}[cds-layout~=horizontal][cds-layout*="order:reverse"]{flex-direction:row-reverse}[cds-layout~=horizontal][cds-layout*="align:horizontal-stretch"]{justify-content:stretch;flex-grow:1}[cds-layout~=horizontal][cds-layout*="align:horizontal-stretch"]>*{flex-grow:1}[cds-layout~=horizontal][cds-layout*="align:stretch"]{align-items:stretch;align-content:stretch;flex-grow:1}[cds-layout~=horizontal][cds-layout*="align:stretch"]>*{flex-grow:1}[cds-layout~=horizontal]>[cds-layout*="align:center"],[cds-layout~=horizontal]>[cds-layout*="align:vertical-center"]{align-self:center}[cds-layout~=horizontal]>[cds-layout*="align:center"],[cds-layout~=horizontal]>[cds-layout*="align:horizontal-center"]{margin-left:auto!important;margin-right:auto!important}[cds-layout~=horizontal]>[cds-layout*="align:top"]{align-self:flex-start}[cds-layout~=horizontal]>[cds-layout*="align:right"]{margin-left:auto!important}[cds-layout~=horizontal]>[cds-layout*="align:left"]{margin-right:auto!important}[cds-layout~=vertical]{flex-direction:column}[cds-layout~=vertical],[cds-layout~=vertical][cds-layout*="align:top"]{justify-content:flex-start}[cds-layout~=vertical][cds-layout*="align:left"]{align-items:flex-start}[cds-layout~=vertical][cds-layout*="align:right"]{align-items:flex-end}[cds-layout~=vertical][cds-layout*="align:vertical-center"]{justify-content:center}[cds-layout~=vertical][cds-layout*="align:horizontal-center"]{align-items:center}[cds-layout~=vertical][cds-layout*="align:center"]{align-items:center;justify-content:center}[cds-layout~=vertical][cds-layout*="order:reverse"]{flex-direction:column-reverse}[cds-layout~=vertical][cds-layout*="align:horizontal-stretch"]{align-items:stretch}[cds-layout~=vertical][cds-layout*="align:stretch"]{align-items:stretch;justify-content:stretch}[cds-layout~=vertical][cds-layout*="align:stretch"]>*{flex-grow:1}[cds-layout~=vertical]>[cds-layout*="align:center"],[cds-layout~=vertical]>[cds-layout*="align:vertical-center"]{margin-top:auto;margin-bottom:auto}[cds-layout~=vertical]>[cds-layout*="align:center"],[cds-layout~=vertical]>[cds-layout*="align:horizontal-center"]{align-self:center}[cds-layout~=vertical]>[cds-layout*="align:top"]{margin-bottom:auto!important}[cds-layout~=vertical]>[cds-layout*="align:right"]{margin-left:auto}[cds-layout~=vertical]>[cds-layout*="align:left"]{margin-right:auto}[cds-layout~=grid]{display:grid;align-items:start;align-content:start;grid-template-columns:repeat(var(--cds-global-layout-grid-cols,12),1fr);width:100%}[cds-layout~=grid][cds-layout*=rows]{grid-template-rows:repeat(12,auto)}[cds-layout~=grid]>[cds-layout*=row]{align-self:stretch}[cds-layout~=grid][cds-layout*="align:top"]{align-content:start}[cds-layout~=grid][cds-layout*="align:right"]{justify-content:end}[cds-layout~=grid][cds-layout*="align:left"]{justify-content:start}[cds-layout~=grid][cds-layout*="align:horizontal-stretch"]{justify-items:stretch;justify-content:stretch}[cds-layout~=grid][cds-layout*="align:stretch"]{align-items:stretch;align-content:stretch;justify-items:stretch;justify-content:stretch}[cds-layout~=grid][cds-layout*="align:vertical-center"]{align-items:center;align-content:center}[cds-layout~=grid][cds-layout*="align:horizontal-center"]{justify-items:center;justify-content:center}[cds-layout~=grid][cds-layout*="align:center"]{align-items:center;align-content:center;justify-items:center;justify-content:center}[cds-layout~="display:screen-reader-only"]{position:absolute!important;clip:rect(1px,1px,1px,1px);clip-path:inset(50%);padding:0;border:0;height:1px;width:1px;overflow:hidden;white-space:nowrap;top:0;left:0;display:block!important}[cds-layout*="gap:none"]{gap:0}[cds-layout*="gap:xs"]{gap:var(--δ2)}[cds-layout*="gap:sm"]{gap:var(--δ3)}[cds-layout*="gap:md"]{gap:var(--δ4)}[cds-layout*="gap:lg"]{gap:var(--δ5)}[cds-layout~="p:none"]{padding:0!important}[cds-layout~="p:xs"]{padding:var(--δ2)!important}[cds-layout~="p:sm"]{padding:var(--δ3)!important}[cds-layout~="p:md"]{padding:var(--δ4)!important}[cds-layout~="m:md"]{margin:var(--δ4)!important}[cds-layout~="p:lg"]{padding:var(--δ5)!important}[cds-layout~="p-y:xxs"]{padding-top:var(--δ1)!important;padding-bottom:var(--δ1)!important}[cds-layout~="p-y:xs"]{padding-top:var(--δ2)!important;padding-bottom:var(--δ2)!important}[cds-layout~="p-x:sm"]{padding-left:var(--δ3)!important;padding-right:var(--δ3)!important}[cds-layout~="p-y:sm"]{padding-top:var(--δ3)!important;padding-bottom:var(--δ3)!important}[cds-layout~="p-x:md"]{padding-left:var(--δ4)!important;padding-right:var(--δ4)!important}[cds-layout~="p-y:md"]{padding-top:var(--δ4)!important;padding-bottom:var(--δ4)!important}[cds-layout~="p-x:lg"]{padding-left:var(--δ5)!important;padding-right:var(--δ5)!important}[cds-layout~="p-l:md"]{padding-left:var(--δ4)!important}[cds-layout~="p-t:lg"]{padding-top:var(--δ5)!important}[cds-layout~="p-b:lg"]{padding-bottom:var(--δ5)!important}@media (min-width:992px){[cds-layout*="gap@md:lg"]{gap:var(--δ5)}[cds-layout~="p@md:lg"]{padding:var(--δ5)!important}[cds-layout~="m@md:xl"]{margin:var(--δ6)!important}}[cds-layout~=fill]{width:100%!important}*,:after,:before{box-sizing:border-box}[cds-layout~=horizontal][cds-layout*="align:horizontal-stretch"]>::slotted(*),[cds-layout~=horizontal][cds-layout*="align:stretch"]>::slotted(*),[cds-layout~=vertical][cds-layout*="align:stretch"]>::slotted(*){flex-grow:1}[cds-layout~=vertical] ::slotted([cds-layout*="align:center"]),[cds-layout~=vertical] ::slotted([cds-layout*="align:vertical-center"]){margin-top:auto;margin-bottom:auto}[cds-layout~=vertical] ::slotted([cds-layout*="align:center"]),[cds-layout~=vertical] ::slotted([cds-layout*="align:horizontal-center"]){align-self:center}[cds-layout~=vertical] ::slotted([cds-layout*="align:top"]){margin-bottom:auto!important}[cds-layout~=vertical] ::slotted([cds-layout*="align:bottom"]){margin-top:auto!important}[cds-layout~=vertical] ::slotted([cds-layout*="align:right"]){margin-left:auto}[cds-layout~=vertical] ::slotted([cds-layout*="align:left"]),[cds-layout~=vertical]>[cds-layout*="align:left"]{margin-right:auto}@media (min-width:576px){[cds-layout~=vertical] ::slotted([cds-layout*="align@xs:center"]),[cds-layout~=vertical] ::slotted([cds-layout*="align@xs:vertical-center"]){margin-top:auto;margin-bottom:auto}[cds-layout~=vertical] ::slotted([cds-layout*="align@xs:center"]),[cds-layout~=vertical] ::slotted([cds-layout*="align@xs:horizontal-center"]){align-self:center}[cds-layout~=vertical] ::slotted([cds-layout*="align@xs:top"]){margin-bottom:auto!important}[cds-layout~=vertical] ::slotted([cds-layout*="align@xs:bottom"]){margin-top:auto!important}[cds-layout~=vertical] ::slotted([cds-layout*="align@xs:right"]){margin-left:auto}[cds-layout~=vertical] ::slotted([cds-layout*="align@xs:left"]){margin-right:auto}}@media (min-width:768px){[cds-layout~=vertical] ::slotted([cds-layout*="align@sm:center"]),[cds-layout~=vertical] ::slotted([cds-layout*="align@sm:vertical-center"]){margin-top:auto;margin-bottom:auto}[cds-layout~=vertical] ::slotted([cds-layout*="align@sm:center"]),[cds-layout~=vertical] ::slotted([cds-layout*="align@sm:horizontal-center"]){align-self:center}[cds-layout~=vertical] ::slotted([cds-layout*="align@sm:top"]){margin-bottom:auto!important}[cds-layout~=vertical] ::slotted([cds-layout*="align@sm:bottom"]){margin-top:auto!important}[cds-layout~=vertical] ::slotted([cds-layout*="align@sm:right"]){margin-left:auto}[cds-layout~=vertical] ::slotted([cds-layout*="align@sm:left"]){margin-right:auto}}@media (min-width:992px){[cds-layout~=vertical] ::slotted([cds-layout*="align@md:center"]),[cds-layout~=vertical] ::slotted([cds-layout*="align@md:vertical-center"]){margin-top:auto;margin-bottom:auto}[cds-layout~=vertical] ::slotted([cds-layout*="align@md:center"]),[cds-layout~=vertical] ::slotted([cds-layout*="align@md:horizontal-center"]){align-self:center}[cds-layout~=vertical] ::slotted([cds-layout*="align@md:top"]){margin-bottom:auto!important}[cds-layout~=vertical] ::slotted([cds-layout*="align@md:bottom"]){margin-top:auto!important}[cds-layout~=vertical] ::slotted([cds-layout*="align@md:right"]){margin-left:auto}[cds-layout~=vertical] ::slotted([cds-layout*="align@md:left"]){margin-right:auto}}@media (min-width:1200px){[cds-layout~=vertical] ::slotted([cds-layout*="align@lg:center"]),[cds-layout~=vertical] ::slotted([cds-layout*="align@lg:vertical-center"]){margin-top:auto;margin-bottom:auto}[cds-layout~=vertical] ::slotted([cds-layout*="align@lg:center"]),[cds-layout~=vertical] ::slotted([cds-layout*="align@lg:horizontal-center"]){align-self:center}[cds-layout~=vertical] ::slotted([cds-layout*="align@lg:top"]){margin-bottom:auto!important}[cds-layout~=vertical] ::slotted([cds-layout*="align@lg:bottom"]){margin-top:auto!important}[cds-layout~=vertical] ::slotted([cds-layout*="align@lg:right"]){margin-left:auto}[cds-layout~=vertical] ::slotted([cds-layout*="align@lg:left"]){margin-right:auto}}@media (min-width:1440px){[cds-layout~=vertical] ::slotted([cds-layout*="align@xl:center"]),[cds-layout~=vertical] ::slotted([cds-layout*="align@xl:vertical-center"]){margin-top:auto;margin-bottom:auto}[cds-layout~=vertical] ::slotted([cds-layout*="align@xl:center"]),[cds-layout~=vertical] ::slotted([cds-layout*="align@xl:horizontal-center"]){align-self:center}[cds-layout~=vertical] ::slotted([cds-layout*="align@xl:top"]){margin-bottom:auto!important}[cds-layout~=vertical] ::slotted([cds-layout*="align@xl:bottom"]){margin-top:auto!important}[cds-layout~=vertical] ::slotted([cds-layout*="align@xl:right"]){margin-left:auto}[cds-layout~=vertical] ::slotted([cds-layout*="align@xl:left"]){margin-right:auto}}[cds-layout~=horizontal] ::slotted([cds-layout*="align:center"]),[cds-layout~=horizontal] ::slotted([cds-layout*="align:vertical-center"]){align-self:center}[cds-layout~=horizontal] ::slotted([cds-layout*="align:center"]),[cds-layout~=horizontal] ::slotted([cds-layout*="align:horizontal-center"]){margin-left:auto!important;margin-right:auto!important}[cds-layout~=horizontal] ::slotted([cds-layout*="align:top"]){align-self:flex-start}[cds-layout~=horizontal] ::slotted([cds-layout*="align:bottom"]){align-self:flex-end}[cds-layout~=horizontal] ::slotted([cds-layout*="align:right"]){margin-left:auto!important}[cds-layout~=horizontal] ::slotted([cds-layout*="align:left"]){margin-right:auto!important}@media (min-width:576px){[cds-layout~=horizontal] ::slotted([cds-layout*="align@xs:center"]),[cds-layout~=horizontal] ::slotted([cds-layout*="align@xs:vertical-center"]){align-self:center}[cds-layout~=horizontal] ::slotted([cds-layout*="align@xs:center"]),[cds-layout~=horizontal] ::slotted([cds-layout*="align@xs:horizontal-center"]){margin-left:auto!important;margin-right:auto!important}[cds-layout~=horizontal] ::slotted([cds-layout*="align@xs:top"]){align-self:flex-start}[cds-layout~=horizontal] ::slotted([cds-layout*="align@xs:bottom"]){align-self:flex-end}[cds-layout~=horizontal] ::slotted([cds-layout*="align@xs:right"]){margin-left:auto!important}[cds-layout~=horizontal] ::slotted([cds-layout*="align@xs:left"]){margin-right:auto!important}}@media (min-width:768px){[cds-layout~=horizontal] ::slotted([cds-layout*="align@sm:center"]),[cds-layout~=horizontal] ::slotted([cds-layout*="align@sm:vertical-center"]){align-self:center}[cds-layout~=horizontal] ::slotted([cds-layout*="align@sm:center"]),[cds-layout~=horizontal] ::slotted([cds-layout*="align@sm:horizontal-center"]){margin-left:auto!important;margin-right:auto!important}[cds-layout~=horizontal] ::slotted([cds-layout*="align@sm:top"]){align-self:flex-start}[cds-layout~=horizontal] ::slotted([cds-layout*="align@sm:bottom"]){align-self:flex-end}[cds-layout~=horizontal] ::slotted([cds-layout*="align@sm:right"]){margin-left:auto!important}[cds-layout~=horizontal] ::slotted([cds-layout*="align@sm:left"]){margin-right:auto!important}}@media (min-width:992px){[cds-layout~=horizontal] ::slotted([cds-layout*="align@md:center"]),[cds-layout~=horizontal] ::slotted([cds-layout*="align@md:vertical-center"]){align-self:center}[cds-layout~=horizontal] ::slotted([cds-layout*="align@md:center"]),[cds-layout~=horizontal] ::slotted([cds-layout*="align@md:horizontal-center"]){margin-left:auto!important;margin-right:auto!important}[cds-layout~=horizontal] ::slotted([cds-layout*="align@md:top"]){align-self:flex-start}[cds-layout~=horizontal] ::slotted([cds-layout*="align@md:bottom"]){align-self:flex-end}[cds-layout~=horizontal] ::slotted([cds-layout*="align@md:right"]){margin-left:auto!important}[cds-layout~=horizontal] ::slotted([cds-layout*="align@md:left"]){margin-right:auto!important}}@media (min-width:1200px){[cds-layout~=horizontal] ::slotted([cds-layout*="align@lg:center"]),[cds-layout~=horizontal] ::slotted([cds-layout*="align@lg:vertical-center"]){align-self:center}[cds-layout~=horizontal] ::slotted([cds-layout*="align@lg:center"]),[cds-layout~=horizontal] ::slotted([cds-layout*="align@lg:horizontal-center"]){margin-left:auto!important;margin-right:auto!important}[cds-layout~=horizontal] ::slotted([cds-layout*="align@lg:top"]){align-self:flex-start}[cds-layout~=horizontal] ::slotted([cds-layout*="align@lg:bottom"]){align-self:flex-end}[cds-layout~=horizontal] ::slotted([cds-layout*="align@lg:right"]){margin-left:auto!important}[cds-layout~=horizontal] ::slotted([cds-layout*="align@lg:left"]){margin-right:auto!important}}@media (min-width:1440px){[cds-layout~=horizontal] ::slotted([cds-layout*="align@xl:center"]),[cds-layout~=horizontal] ::slotted([cds-layout*="align@xl:vertical-center"]){align-self:center}[cds-layout~=horizontal] ::slotted([cds-layout*="align@xl:center"]),[cds-layout~=horizontal] ::slotted([cds-layout*="align@xl:horizontal-center"]){margin-left:auto!important;margin-right:auto!important}[cds-layout~=horizontal] ::slotted([cds-layout*="align@xl:top"]){align-self:flex-start}[cds-layout~=horizontal] ::slotted([cds-layout*="align@xl:bottom"]){align-self:flex-end}[cds-layout~=horizontal] ::slotted([cds-layout*="align@xl:right"]){margin-left:auto!important}[cds-layout~=horizontal] ::slotted([cds-layout*="align@xl:left"]){margin-right:auto!important}}[cds-text]{font-family:var(--cds-global-typography-font-family, "Clarity City", "Avenir Next", sans-serif);margin-top:0;margin-bottom:0}[cds-text][cds-layout~=grid]::after,[cds-text][cds-layout~=grid]::before,[cds-text][cds-layout~=horizontal]::after,[cds-text][cds-layout~=horizontal]::before,[cds-text][cds-layout~=vertical]::after,[cds-text][cds-layout~=vertical]::before{display:none}[cds-text*=display],[cds-text*=section],[cds-text*=title]{font-family:var(--cds-global-typography-header-font-family, "Clarity City", "Avenir Next", sans-serif);color:var(--cds-global-typography-color-400,var(--cds-global-color-construction-900,#21333b))}[cds-text*=body],[cds-text*=message],[cds-text*=secondary]{color:var(--cds-global-typography-color-500,var(--cds-global-color-black,#000))}[cds-text*=inline]{width:auto!important;display:inline-block!important}[cds-text*=display]{font-size:var(--cds-global-typography-display-font-size,calc((40 / var(--cds-global-base,20)) * 1rem));font-weight:var(--cds-global-typography-display-font-weight,400);line-height:var(--cds-global-typography-display-line-height,1.1em);letter-spacing:var(--cds-global-typography-display-letter-spacing,-.0125em)}[cds-text*=display]::before{content:"";display:block;height:0;width:0;margin-bottom:calc(((var(--cds-global-typography-top-gap-height,.1475em) + calc((var(--cds-global-typography-display-line-height,1.1em) - 1em)/ 2))*-1) + .037em)}[cds-text*=display]::after{content:"";display:block;height:0;width:0;margin-top:calc((((1em - var(--cds-global-typography-top-gap-height,.1475em) - var(--cds-global-typography-ascender-height,.1703em) - var(--cds-global-typography-x-height,.517em)) + calc((var(--cds-global-typography-display-line-height,1.1em) - 1em)/ 2))*-1) - .044em)}[cds-text*=title]{font-size:var(--cds-global-typography-title-font-size,calc((24 / var(--cds-global-base,20)) * 1rem));font-weight:var(--cds-global-typography-title-font-weight,400);line-height:var(--cds-global-typography-title-line-height,1.16667em);letter-spacing:var(--cds-global-typography-title-letter-spacing,-.008333em)}[cds-text*=title]::before{content:"";display:block;height:0;width:0;margin-bottom:calc(((var(--cds-global-typography-top-gap-height,.1475em) + calc((var(--cds-global-typography-title-line-height,1.16667em) - 1em)/ 2))*-1) + .037em)}[cds-text*=title]::after{content:"";display:block;height:0;width:0;margin-top:calc((((1em - var(--cds-global-typography-top-gap-height,.1475em) - var(--cds-global-typography-ascender-height,.1703em) - var(--cds-global-typography-x-height,.517em)) + calc((var(--cds-global-typography-title-line-height,1.16667em) - 1em)/ 2))*-1) - .044em)}[cds-text*=section]{font-size:var(--cds-global-typography-section-font-size,calc((20 / var(--cds-global-base,20)) * 1rem));font-weight:var(--cds-global-typography-section-font-weight,400);line-height:var(--cds-global-typography-section-line-height,1.2em);letter-spacing:var(--cds-global-typography-section-letter-spacing,-.01em)}[cds-text*=section]::before{content:"";display:block;height:0;width:0;margin-bottom:calc(((var(--cds-global-typography-top-gap-height,.1475em) + calc((var(--cds-global-typography-section-line-height,1.2em) - 1em)/ 2))*-1) + .037em)}[cds-text*=section]::after{content:"";display:block;height:0;width:0;margin-top:calc((((1em - var(--cds-global-typography-top-gap-height,.1475em) - var(--cds-global-typography-ascender-height,.1703em) - var(--cds-global-typography-x-height,.517em)) + calc((var(--cds-global-typography-section-line-height,1.2em) - 1em)/ 2))*-1) - .044em)}[cds-text*=body]{font-weight:var(--cds-global-typography-body-font-weight,400);font-size:var(--cds-global-typography-body-font-size,calc((14 / var(--cds-global-base,20)) * 1rem));letter-spacing:var(--cds-global-typography-body-letter-spacing,-.014286em);line-height:var(--cds-global-typography-body-line-height,1.42857em)}[cds-text*=body]::before{content:"";display:block;height:0;width:0;margin-bottom:calc(((var(--cds-global-typography-top-gap-height,.1475em) + calc((var(--cds-global-typography-body-line-height,1.42857em) - 1em)/ 2))*-1) + .1em)}[cds-text*=body]::after{content:"";display:block;height:0;width:0;margin-top:calc((((1em - var(--cds-global-typography-top-gap-height,.1475em) - var(--cds-global-typography-ascender-height,.1703em) - var(--cds-global-typography-x-height,.517em)) + calc((var(--cds-global-typography-body-line-height,1.42857em) - 1em)/ 2))*-1) - .044em)}[cds-text*=message]{font-size:var(--cds-global-typography-message-font-size,calc((16 / var(--cds-global-base,20)) * 1rem));font-weight:var(--cds-global-typography-message-font-weight,calc((400 / var(--cds-global-base,20)) * 1rem));line-height:var(--cds-global-typography-message-line-height,1.25em);letter-spacing:var(--cds-global-typography-message-letter-spacing,-.0125em)}[cds-text*=message]::before{content:"";display:block;height:0;width:0;margin-bottom:calc(((var(--cds-global-typography-top-gap-height,.1475em) + calc((var(--cds-global-typography-message-line-height,1.25em) - 1em)/ 2))*-1) + .037em)}[cds-text*=message]::after{content:"";display:block;height:0;width:0;margin-top:calc((((1em - var(--cds-global-typography-top-gap-height,.1475em) - var(--cds-global-typography-ascender-height,.1703em) - var(--cds-global-typography-x-height,.517em)) + calc((var(--cds-global-typography-message-line-height,1.25em) - 1em)/ 2))*-1) - .044em)}[cds-text*=secondary]{font-size:var(--cds-global-typography-secondary-font-size,calc((13 / var(--cds-global-base,20)) * 1rem));font-weight:var(--cds-global-typography-secondary-font-weight,400);line-height:var(--cds-global-typography-secondary-line-height,1.23077em);letter-spacing:var(--cds-global-typography-secondary-letter-spacing,-.007692em)}[cds-text*=secondary]::before{content:"";display:block;height:0;width:0;margin-bottom:calc(((var(--cds-global-typography-top-gap-height,.1475em) + calc((var(--cds-global-typography-secondary-line-height,1.23077em) - 1em)/ 2))*-1) + .037em)}[cds-text*=secondary]::after{content:"";display:block;height:0;width:0;margin-top:calc((((1em - var(--cds-global-typography-top-gap-height,.1475em) - var(--cds-global-typography-ascender-height,.1703em) - var(--cds-global-typography-x-height,.517em)) + calc((var(--cds-global-typography-secondary-line-height,1.23077em) - 1em)/ 2))*-1) - .044em)}[cds-text~=link]{color:var(--cds-global-typography-link-color,var(--cds-global-color-blue-800,#00608a))!important;text-decoration:underline!important;line-height:inherit!important;font-size:inherit!important}[cds-text~=link]:hover{color:var(--cds-global-typography-link-color-hover,var(--cds-global-color-blue-900,#004b6b))!important}[cds-text~=link]:visited:not([cds-text~=static]){color:var(--cds-global-typography-link-color-visited,var(--cds-global-color-lavender-600,#3b40ce))!important}[cds-text~=link]:visited:not([cds-text~=static]):hover{color:var(--cds-global-typography-link-color-visited-hover,var(--cds-global-color-lavender-700,#2429c2))!important}[cds-divider]{display:block;height:var(--cds-alias-object-border-width-100,calc((1 / var(--cds-global-base,20)) * 1rem));overflow:hidden;box-shadow:var(--cds-alias-object-border-color,var(--cds-global-color-construction-200,#cbd4d8)) 0 0 0 var(--cds-alias-object-border-width-100,calc((1 / var(--cds-global-base,20)) * 1rem)) inset}[cds-text~=light]{font-weight:var(--cds-global-typography-font-weight-light,200)!important}[cds-text~=left]{text-align:left!important}[cds-text~=right]{text-align:right!important}[cds-text~=center]{text-align:center!important}[cds-text~=lhe]{padding:.05px 0}[cds-text~=lhe]::before{content:"";margin-top:-.124em;display:block;height:0}[cds-text~=lhe]::after{content:"";margin-bottom:-.221em;display:block;height:0}[cds-text*=h2],[cds-text*=h3]{font-family:var(--cds-global-typography-header-font-family, "Clarity City", "Avenir Next", sans-serif);font-size:1.4rem;font-weight:200;color:#333;line-height:1.7143em;letter-spacing:-.017857em}[cds-text*=h2]::before{content:"";display:block;height:0;width:0;margin-bottom:calc(((var(--cds-global-typography-top-gap-height,.1475em) + calc((1.7143em - 1em)/ 2))*-1) + .037em)}[cds-text*=h2]::after{content:"";display:block;height:0;width:0;margin-top:calc((((1em - var(--cds-global-typography-top-gap-height,.1475em) - var(--cds-global-typography-ascender-height,.1703em) - var(--cds-global-typography-x-height,.517em)) + calc((1.7143em - 1em)/ 2))*-1) - .044em)}[cds-text*=h3]{font-size:1.1rem;line-height:1.0909em;letter-spacing:-.013636em}[cds-text*=h3]::before{content:"";display:block;height:0;width:0;margin-bottom:calc(((var(--cds-global-typography-top-gap-height,.1475em) + calc((1.0909em - 1em)/ 2))*-1) + .037em)}[cds-text*=h3]::after{content:"";display:block;height:0;width:0;margin-top:calc((((1em - var(--cds-global-typography-top-gap-height,.1475em) - var(--cds-global-typography-ascender-height,.1703em) - var(--cds-global-typography-x-height,.517em)) + calc((1.0909em - 1em)/ 2))*-1) - .044em)}:host{all:initial;display:block;visibility:inherit;font-family:var(--cds-global-typography-font-family, "Clarity City", "Avenir Next", sans-serif);contain:layout;box-sizing:border-box!important;-webkit-appearance:none!important}*,:after,:before{box-sizing:inherit!important}slot{font-family:var(--cds-global-typography-font-family, "Clarity City", "Avenir Next", sans-serif);display:contents!important}::slotted(*){font-family:inherit;box-sizing:inherit}::slotted(*)::placeholder{color:var(--cds-global-typography-color-200,var(--cds-global-color-construction-600,#4f6169))}:host([_is-anchor]),:host([role=button]){cursor:pointer!important}:host([_is-anchor]) ::slotted(*),:host([role=button]) ::slotted(*){cursor:pointer!important}:host([role=button][disabled]){cursor:not-allowed!important}:host([role=button][disabled]) ::slotted(*){cursor:not-allowed!important;pointer-events:none}:host([hidden]),[hidden]{display:none!important}:host([hidden*=false]){display:block!important}:host([_focused]) .input,:host([tabindex="0"]:focus){outline:Highlight solid var(--cds-global-space-2,calc((2 / var(--cds-global-base,20)) * 1rem));outline-offset:var(--cds-global-space-1,calc((1 / var(--cds-global-base,20)) * 1rem))}@media (-webkit-min-device-pixel-ratio:0){:host([_focused]) .input,:host([tabindex="0"]:focus){outline-color:-webkit-focus-ring-color}}`,kK=B_(function(a,o){return null!=o&&o.constructor===a||o instanceof a});function mA(l,a){return Object.prototype.hasOwnProperty.call(a,l)}var VK=Object.prototype.toString;const BK=function(){return"[object Arguments]"===VK.call(arguments)?function(a){return"[object Arguments]"===VK.call(a)}:function(a){return mA("callee",a)}}(),S3e=Array.isArray||function(a){return null!=a&&a.length>=0&&"[object Array]"===Object.prototype.toString.call(a)},C3e=Oh(function(a){return null!=a&&"function"==typeof a["fantasy-land/empty"]?a["fantasy-land/empty"]():null!=a&&null!=a.constructor&&"function"==typeof a.constructor["fantasy-land/empty"]?a.constructor["fantasy-land/empty"]():null!=a&&"function"==typeof a.empty?a.empty():null!=a&&null!=a.constructor&&"function"==typeof a.constructor.empty?a.constructor.empty():S3e(a)?[]:KY(a)?"":function(l){return"[object Object]"===Object.prototype.toString.call(l)}(a)?{}:BK(a)?function(){return arguments}():void 0});function UK(l){for(var o,a=[];!(o=l.next()).done;)a.push(o.value);return a}function GK(l,a,o){for(var c=0,u=o.length;c<u;){if(l(a,o[c]))return!0;c+=1}return!1}const U3="function"==typeof Object.is?Object.is:function(l,a){return l===a?0!==l||1/l==1/a:l!=l&&a!=a};var M3e=!{toString:null}.propertyIsEnumerable("toString"),zK=["constructor","valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],HK=function(){return arguments.propertyIsEnumerable("length")}(),D3e=function(a,o){for(var c=0;c<a.length;){if(a[c]===o)return!0;c+=1}return!1};const jK=Oh("function"!=typeof Object.keys||HK?function(a){if(Object(a)!==a)return[];var o,c,u=[],h=HK&&BK(a);for(o in a)mA(o,a)&&(!h||"length"!==o)&&(u[u.length]=o);if(M3e)for(c=zK.length-1;c>=0;)mA(o=zK[c],a)&&!D3e(u,o)&&(u[u.length]=o),c-=1;return u}:function(a){return Object(a)!==a?[]:Object.keys(a)}),WK=Oh(function(a){return null===a?"Null":void 0===a?"Undefined":Object.prototype.toString.call(a).slice(8,-1)});function qK(l,a,o,c){var u=UK(l);function d(f,m){return G3(f,m,o.slice(),c.slice())}return!GK(function(f,m){return!GK(d,m,f)},UK(a),u)}function G3(l,a,o,c){if(U3(l,a))return!0;var u=WK(l);if(u!==WK(a)||null==l||null==a)return!1;if("function"==typeof l["fantasy-land/equals"]||"function"==typeof a["fantasy-land/equals"])return"function"==typeof l["fantasy-land/equals"]&&l["fantasy-land/equals"](a)&&"function"==typeof a["fantasy-land/equals"]&&a["fantasy-land/equals"](l);if("function"==typeof l.equals||"function"==typeof a.equals)return"function"==typeof l.equals&&l.equals(a)&&"function"==typeof a.equals&&a.equals(l);switch(u){case"Arguments":case"Array":case"Object":if("function"==typeof l.constructor&&"Promise"===function(l){var a=String(l).match(/^function (\w*)/);return null==a?"":a[1]}(l.constructor))return l===a;break;case"Boolean":case"Number":case"String":if(typeof l!=typeof a||!U3(l.valueOf(),a.valueOf()))return!1;break;case"Date":if(!U3(l.valueOf(),a.valueOf()))return!1;break;case"Error":return l.name===a.name&&l.message===a.message;case"RegExp":if(l.source!==a.source||l.global!==a.global||l.ignoreCase!==a.ignoreCase||l.multiline!==a.multiline||l.sticky!==a.sticky||l.unicode!==a.unicode)return!1}for(var h=o.length-1;h>=0;){if(o[h]===l)return c[h]===a;h-=1}switch(u){case"Map":return l.size===a.size&&qK(l.entries(),a.entries(),o.concat([l]),c.concat([a]));case"Set":return l.size===a.size&&qK(l.values(),a.values(),o.concat([l]),c.concat([a]));case"Arguments":case"Array":case"Object":case"Boolean":case"Number":case"String":case"Date":case"Error":case"RegExp":case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"ArrayBuffer":break;default:return!1}var d=jK(l);if(d.length!==jK(a).length)return!1;var f=o.concat([l]),m=c.concat([a]);for(h=d.length-1;h>=0;){var g=d[h];if(!mA(g,a)||!G3(a[g],l[g],f,m))return!1;h-=1}return!0}const P3e=B_(function(a,o){return G3(a,o,[],[])}),O3e=Oh(function(a){return null!=a&&P3e(a,C3e(a))});function z3(l){return zD(l)||O3e(l)}function $K(l,a){return l!==a}function KK(l,...a){return a.forEach(([o,c])=>{l.style[o]=c}),l}function j3(l){return`calc((${l} / var(--cds-global-base)) * 1rem)`}const z3e=(l,a)=>"method"===a.kind&&a.descriptor&&!("value"in a.descriptor)?fC(la({},a),{finisher(o){o.createProperty(a.key,l)}}):{kind:"field",key:Symbol(),placement:"own",descriptor:{},originalKey:a.key,initializer(){"function"==typeof a.initializer&&(this[a.key]=a.initializer.call(this))},finisher(o){o.createProperty(a.key,l)}};function JK(l){return(a,o)=>void 0!==o?void a.constructor.createProperty(o,l):z3e(l,a)}function QK(l,a){switch(a&&a.type){case Array:case Object:return la({reflect:!1},a);case String:return la({reflect:!0,attribute:U_(l),converter:{toAttribute:o=>o||null}},a);case Number:return la({reflect:!0,attribute:U_(l)},a);case Boolean:return la({reflect:!0,attribute:U_(l),converter:{toAttribute:o=>o?"":null,fromAttribute:o=>"false"!==o&&null!==o}},a);case Date:return la({reflect:!1,converter:{fromAttribute:o=>new Date(o)}},a);default:return la({},a)}}function xp(l){return(a,o)=>(function(l,a,o){const c=l.firstUpdated;l.firstUpdated=function(u){if(o&&o.required&&z3(this[a])){const h=o.requiredMessage||function(d="warning",f,m){const g=m.toLocaleLowerCase();return`${oZ(d)}: ${f} is required to use ${g} component. Set the JS Property or HTML Attribute.\n\n`+(tZ()?`Angular: <${g} [${f}]="..."></${g}>\n`:"")+(rZ()?`Vue: <${g} :${f}="..."></${g}>\n`:"")+(nZ()?`React: <${function(l){return oZ(function(l){return l.split("-").map((a,o)=>o?a.charAt(0).toUpperCase()+a.slice(1).toLowerCase():a).join("")}(l))}(g)} ${f}={...} />\n`:"")+`HTML: <${g} ${U_(f)}="..."></${g}>\nJavaScript: document.querySelector('${g}').${f} = '...';\n\n`}(o.required,a,this.tagName);if("error"===o.required)throw Error(h);v1.warn(h,this)}c&&c.call(this,u)}}(a,o,l),JK(QK(o,l))(a,o))}const $3e=vK`@keyframes fadeInAndOut{0%,to{opacity:0}75%{opacity:1}}:host{--color:currentColor;display:inline-block;height:var(--cds-global-space-7,calc((16 / var(--cds-global-base,20)) * 1rem));width:var(--cds-global-space-7,calc((16 / var(--cds-global-base,20)) * 1rem));margin:0;vertical-align:middle;fill:var(--color);color:var(--color);contain:strict;cursor:inherit}svg{display:block}:host([size=xs]){height:var(--cds-global-space-5,calc((8 / var(--cds-global-base,20)) * 1rem));width:var(--cds-global-space-5,calc((8 / var(--cds-global-base,20)) * 1rem))}:host([size=sm]){height:var(--cds-global-space-7,calc((16 / var(--cds-global-base,20)) * 1rem));width:var(--cds-global-space-7,calc((16 / var(--cds-global-base,20)) * 1rem))}:host([size=md]){height:var(--cds-global-space-9,calc((24 / var(--cds-global-base,20)) * 1rem));width:var(--cds-global-space-9,calc((24 / var(--cds-global-base,20)) * 1rem))}:host([size=lg]){height:var(--cds-global-space-11,calc((36 / var(--cds-global-base,20)) * 1rem));width:var(--cds-global-space-11,calc((36 / var(--cds-global-base,20)) * 1rem))}:host([size=xl]){height:var(--cds-global-space-12,calc((48 / var(--cds-global-base,20)) * 1rem));width:var(--cds-global-space-12,calc((48 / var(--cds-global-base,20)) * 1rem))}:host([size=xxl]){height:calc(var(--cds-global-space-13,calc((72 / var(--cds-global-base,20)) * 1rem)) - var(--cds-global-space-5,calc((8 / var(--cds-global-base,20)) * 1rem)));width:calc(var(--cds-global-space-13,calc((72 / var(--cds-global-base,20)) * 1rem)) - var(--cds-global-space-5,calc((8 / var(--cds-global-base,20)) * 1rem)))}:host([status=success]){--color:var(--cds-alias-status-success, var(--cds-global-color-green-700, #42810e))}:host([status=danger]){--color:var(--cds-alias-status-danger, var(--cds-global-color-red-700, #e02200))}:host([status=warning]){--color:var(--cds-alias-status-warning-shade, var(--cds-global-color-ochre-600, #ffa600))}:host([status=info]){--color:var(--cds-alias-status-info-shade, var(--cds-global-color-blue-800, #00608a))}:host([inverse]){--color:var(--cds-global-color-construction-200, #cbd4d8)}:host([direction=up]){transform:rotate(0)}:host([direction=down]){transform:rotate(180deg)}:host([direction=right]){transform:rotate(90deg)}:host([direction=left]){transform:rotate(270deg)}:host([flip=horizontal]){transform:scale(-1) rotateX(180deg)}:host([flip=vertical]){transform:scale(-1) rotateY(180deg)}.alert,.badge{fill:var(--badge-color,var(--cds-alias-status-danger,var(--cds-global-color-red-700,#e02200)))}:host([badge=success]){--badge-color:var(--cds-alias-status-success, var(--cds-global-color-green-700, #42810e))}:host([badge=danger]){--badge-color:var(--cds-alias-status-danger, var(--cds-global-color-red-700, #e02200))}:host([badge*=warning]){--badge-color:var(--cds-alias-status-warning-shade, var(--cds-global-color-ochre-600, #ffa600))}:host([badge=inherit]){--badge-color:currentColor}:host([badge=info]){--badge-color:var(--cds-alias-status-info, var(--cds-global-color-blue-700, #0079ad))}:host([badge=inherit-triangle]){--badge-color:currentColor}:host([badge][inverse]){--badge-color:var(--cds-alias-status-danger, var(--cds-global-color-red-700, #e02200))}:host([badge=success][inverse]){--badge-color:var(--cds-alias-status-success, var(--cds-global-color-green-700, #42810e))}:host([badge*=warning][inverse]){--badge-color:var(--cds-alias-status-warning-shade, var(--cds-global-color-ochre-600, #ffa600))}:host([badge*=inherit][inverse]){--badge-color:currentColor}:host([badge=info][inverse]){--badge-color:var(--cds-alias-status-info, var(--cds-global-color-blue-700, #0079ad))}.cds-internal-dot-1{animation:fadeInAndOut 1.8s ease-in 0s infinite}.cds-internal-dot-2{animation:fadeInAndOut 1.8s ease-out .422s infinite}.cds-internal-dot-3{animation:fadeInAndOut 1.8s ease-out .675s infinite}@media (prefers-reduced-motion){.cds-internal-dot-1,.cds-internal-dot-2,.cds-internal-dot-3{animation:none}}`;var Bh;function W3(l){return l.badge&&("inherit-triangle"===l.badge||"warning-triangle"===l.badge)}!function(l){l.BadSizeValue="bad-value",l.ValidSizeString="value-is-string",l.ValidNumericString="value-is-numeric",l.NilSizeValue="value-is-nil"}(Bh||(Bh={}));class Pu extends F1{constructor(){super(...arguments),this._shape="unknown",this.solid=!1,this.inverse=!1}static get styles(){return[v3e,$3e]}get shape(){return this._shape}set shape(a){if(function(l,a){return!z3(l)&&$K(l,a)}(a,this._shape)){const o=this._shape;this._shape=a,this.requestUpdate("shape",o)}}get size(){return this._size}set size(a){if(function(l,a){return function(l){return kK(String,l)||zD(l)}(l)&&$K(l,a)}(a,this._size)){const o=this._size;this._size=a,function(l,a){let o="";switch(function(l){return zD(l)||""===l?Bh.NilSizeValue:function(l){return["xxs","xs","sm","md","lg","xl","xxl"].indexOf(l)>-1}(l)?Bh.ValidSizeString:!isNaN(parseInt(l,10))&&l.match(/^[0-9 ]+$/)?Bh.ValidNumericString:Bh.BadSizeValue}(a)){case Bh.ValidNumericString:return o=j3(parseInt(a)),void KK(l,["width",o],["height",o]);case Bh.ValidSizeString:case Bh.NilSizeValue:return void KK(l,["width",""],["height",""]);case Bh.BadSizeValue:default:;}}(this,a),this.requestUpdate("size",o)}}updated(a){if(a.has("innerOffset")&&this.innerOffset>0){const o=j3(-1*this.innerOffset),c=`calc(100% + ${j3(2*this.innerOffset)})`;this.svg.style.width=c,this.svg.style.height=c,this.svg.style.margin=`${o} 0 0 ${o}`}}firstUpdated(a){super.firstUpdated(a);let o="unknown";this.subscription=Iu.stateUpdates.subscribe(c=>{"iconRegistry"===c.key&&li.registry[this.shape]&&o!==this.shape&&(o=this.shape,this.requestUpdate("shape"))})}disconnectedCallback(){var a;super.disconnectedCallback(),null===(a=this.subscription)||void 0===a||a.unsubscribe()}render(){return function(l){return kK(String,l)}(li.registry[this.shape])?p3e`<span .innerHTML="${li.registry[this.shape]}"></span>`:m3e`<svg .innerHTML="${function(l){var a,o,c,u,h;const d=null!==(a=li.registry[l.shape])&&void 0!==a?a:li.registry.unknown;let f=l.solid&&d.solid?d.solid:d.outline;return l.badge&&!W3(l)&&(f=l.solid?null!==(o=d.solidBadged)&&void 0!==o?o:f:null!==(c=d.outlineBadged)&&void 0!==c?c:f),W3(l)&&(f=l.solid?null!==(u=d.solidAlerted)&&void 0!==u?u:f:null!==(h=d.outlineAlerted)&&void 0!==h?h:f),f}(this)+function(l){let a="";return l.badge&&W3(l)?a='<path d="M26.85 1.14L21.13 11a1.28 1.28 0 001.1 2h11.45a1.28 1.28 0 001.1-2l-5.72-9.86a1.28 1.28 0 00-2.21 0z" class="alert" />':l.badge&&(a='<circle cx="30" cy="6" r="5" class="badge" />'),a}(this)}" viewBox="0 0 36 36" xmlns="http://www.w3.org/2000/svg" aria-hidden="true"></svg>`}}Vh([xp({type:String})],Pu.prototype,"shape",null),Vh([xp({type:String})],Pu.prototype,"size",null),Vh([xp({type:String})],Pu.prototype,"direction",void 0),Vh([xp({type:String})],Pu.prototype,"flip",void 0),Vh([xp({type:Boolean})],Pu.prototype,"solid",void 0),Vh([xp({type:String})],Pu.prototype,"status",void 0),Vh([xp({type:Boolean})],Pu.prototype,"inverse",void 0),Vh([xp({type:String})],Pu.prototype,"badge",void 0),Vh([function(l){return(a,o)=>{const c=QK(o,l);return c&&(c.reflect=!!(null==l?void 0:l.reflect)&&l.reflect,c.reflect&&!(null==l?void 0:l.attribute)&&(c.attribute="_"+U_(o))),JK(c)(a,o)}}({type:Number})],Pu.prototype,"innerOffset",void 0),Vh([(({finisher:l,descriptor:a})=>(o,c)=>{var u;if(void 0===c){const h=null!==(u=o.originalKey)&&void 0!==u?u:o.key,d=null!=a?{kind:"method",placement:"prototype",key:h,descriptor:a(o.key)}:fC(la({},o),{key:h});return null!=l&&(d.finisher=function(f){l(f,h)}),d}{const h=o.constructor;void 0!==a&&Object.defineProperty(o,c,a(c)),null==l||l(h,c)}})({descriptor:o=>{const c={get(){var u,h;return null!==(h=null===(u=this.renderRoot)||void 0===u?void 0:u.querySelector("svg"))&&void 0!==h?h:null},enumerable:!0,configurable:!0};return c}})],Pu.prototype,"svg",void 0),function(l,a){QY()&&JY(["customElements"])&&a3e("cds-icon",a,window.customElements)}(0,Pu);const Pn=["*"];function T4e(l,a){1&l&&xe(0,"label")}const w4e=[[["","clrCheckbox",""],["","clrToggle",""]],[["label"]]],C4e=["[clrCheckbox],[clrToggle]","label"];function x4e(l,a){1&l&&xe(0,"label")}function E4e(l,a){1&l&&Be(0,2,["*ngIf","showHelper"])}function M4e(l,a){1&l&&xe(0,"cds-icon",5)}function D4e(l,a){1&l&&xe(0,"cds-icon",6)}function A4e(l,a){1&l&&Be(0,3,["*ngIf","showInvalid"])}function I4e(l,a){1&l&&Be(0,4,["*ngIf","showValid"])}const R4e=[[["label"]],[["clr-checkbox-wrapper"],["clr-toggle-wrapper"]],[["clr-control-helper"]],[["clr-control-error"]],[["clr-control-success"]]],P4e=["label","clr-checkbox-wrapper,clr-toggle-wrapper","clr-control-helper","clr-control-error","clr-control-success"];function J4e(l,a){1&l&&xe(0,"label")}function Q4e(l,a){1&l&&xe(0,"cds-icon",5)}function eVe(l,a){1&l&&xe(0,"cds-icon",6)}function tVe(l,a){1&l&&Be(0,2,["*ngIf","showHelper"])}function nVe(l,a){1&l&&Be(0,3,["*ngIf","showInvalid"])}function rVe(l,a){1&l&&Be(0,4,["*ngIf","showValid"])}const iVe=[[["label"]],[["","clrInput",""]],[["clr-control-helper"]],[["clr-control-error"]],[["clr-control-success"]]],sVe=["label","[clrInput]","clr-control-helper","clr-control-error","clr-control-success"];function mVe(l,a){1&l&&xe(0,"label")}const gVe=[[["","clrRadio",""]],[["label"]]],yVe=["[clrRadio]","label"];function EVe(l,a){1&l&&xe(0,"label")}function MVe(l,a){1&l&&xe(0,"cds-icon",5)}function DVe(l,a){1&l&&xe(0,"cds-icon",6)}function AVe(l,a){1&l&&Be(0,2,["*ngIf","showHelper"])}function IVe(l,a){1&l&&Be(0,3,["*ngIf","showInvalid"])}function RVe(l,a){1&l&&Be(0,4,["*ngIf","showValid"])}const PVe=[[["label"]],[["","clrSelect",""]],[["clr-control-helper"]],[["clr-control-error"]],[["clr-control-success"]]],LVe=["label","[clrSelect]","clr-control-helper","clr-control-error","clr-control-success"];function zVe(l,a){1&l&&xe(0,"label")}function HVe(l,a){1&l&&xe(0,"span",6),2&l&&Am("width",ve().getRangeProgressFillWidth())}function jVe(l,a){1&l&&xe(0,"cds-icon",7)}function WVe(l,a){1&l&&xe(0,"cds-icon",8)}function qVe(l,a){1&l&&Be(0,2,["*ngIf","showHelper"])}function XVe(l,a){1&l&&Be(0,3,["*ngIf","showInvalid"])}function $Ve(l,a){1&l&&Be(0,4,["*ngIf","showValid"])}const YVe=[[["label"]],[["","clrRange",""]],[["clr-control-helper"]],[["clr-control-error"]],[["clr-control-success"]]],ZVe=["label","[clrRange]","clr-control-helper","clr-control-error","clr-control-success"],EBe=["anchor"];function MBe(l,a){if(1&l&&(V(0,"div",4),V(1,"div",5),V(2,"button",6),xe(3,"cds-icon",7),B(),B(),Be(4),B()),2&l){const o=ve();q("id",o.popoverId),j(3),Ke("title",o.commonStrings.keys.close)}}const DBe=["input"],ABe=["input_low"],IBe=["columnPortal"];function RBe(l,a){1&l&&Be(0)}function PBe(l,a){1&l&&ll(0)}function LBe(l,a){1&l&&xe(0,"cds-icon",10),2&l&&Ke("direction",ve(2).sortDirection)}function OBe(l,a){if(1&l){const o=mn();V(0,"button",7),ze("click",function(){return Ut(o),ve().sort()}),le(1,PBe,1,0,"ng-container",8),le(2,LBe,1,1,"cds-icon",9),B()}if(2&l){const o=ve(),c=po(6);j(1),q("ngTemplateOutlet",c),j(1),q("ngIf",o.sortDirection)}}function NBe(l,a){if(1&l){const o=mn();V(0,"clr-dg-string-filter",11),ze("clrFilterValueChange",function(u){return Ut(o),ve().filterValue=u}),B()}if(2&l){const o=ve();q("clrDgStringFilter",o.registered)("clrFilterValue",o.filterValue)}}function FBe(l,a){if(1&l){const o=mn();V(0,"clr-dg-numeric-filter",12),ze("clrFilterValueChange",function(u){return Ut(o),ve().filterValue=u}),B()}if(2&l){const o=ve();q("clrDgNumericFilter",o.registered)("clrFilterValue",o.filterValue)}}function kBe(l,a){1&l&&Be(0,1)}function VBe(l,a){1&l&&ll(0)}function BBe(l,a){if(1&l&&(V(0,"span",13),le(1,VBe,1,0,"ng-container",8),B()),2&l){ve();const o=po(6);j(1),q("ngTemplateOutlet",o)}}function UBe(l,a){1&l&&xe(0,"clr-dg-column-separator")}const GBe=[[["clr-dg-filter"],["clr-dg-string-filter"],["clr-dg-numeric-filter"]],"*"],zBe=["clr-dg-filter, clr-dg-string-filter, clr-dg-numeric-filter","*"];function HBe(l,a){1&l&&xe(0,"div",4)}function jBe(l,a){1&l&&Be(0,0,["*ngIf","emptyDatagrid"])}function WBe(l,a){if(1&l&&(Jr(0),V(1,"button",1),xe(2,"cds-icon",2),B(),Qr()),2&l){const o=ve();j(2),Ke("title",o.commonStrings.keys.info)}}const qBe=["cellPortal"];function XBe(l,a){1&l&&Be(0)}const $Be=["rowPortal"];function YBe(l,a){1&l&&Be(0)}const ZBe=["detailButton"],KBe=["stickyCells"],JBe=["scrollableCells"],QBe=["calculatedCells"];function e5e(l,a){}function t5e(l,a){if(1&l&&(V(0,"clr-expandable-animation",7),le(1,e5e,0,0,"ng-template",8),B()),2&l){const o=ve(2),c=po(6);q("clrExpandTrigger",o.expandAnimationTrigger),j(1),q("ngTemplateOutlet",c)}}function n5e(l,a){}function r5e(l,a){1&l&&le(0,n5e,0,0,"ng-template",8),2&l&&(ve(2),q("ngTemplateOutlet",po(6)))}function i5e(l,a){if(1&l&&(V(0,"label",6),le(1,t5e,2,2,"clr-expandable-animation",1),le(2,r5e,1,1,void 0,2),B()),2&l){const o=ve();j(1),q("ngIf",o.expand.expandable),j(1),q("ngIf",!o.expand.expandable)}}function s5e(l,a){}function o5e(l,a){if(1&l&&(V(0,"clr-expandable-animation",7),le(1,s5e,0,0,"ng-template",8),B()),2&l){const o=ve(),c=po(6);q("clrExpandTrigger",o.expandAnimationTrigger),j(1),q("ngTemplateOutlet",c)}}function a5e(l,a){}function l5e(l,a){1&l&&le(0,a5e,0,0,"ng-template",8),2&l&&(ve(),q("ngTemplateOutlet",po(6)))}function c5e(l,a){1&l&&Be(0)}const tJ=function(l){return{"clr-form-control-disabled":l}};function u5e(l,a){if(1&l){const o=mn();V(0,"div",19),V(1,"div",20),V(2,"input",21),ze("ngModelChange",function(u){return Ut(o),ve(2).toggle(u)}),B(),V(3,"label",22),V(4,"span",23),Le(5),B(),B(),B(),B()}if(2&l){const o=ve(2);q("ngClass",as(8,tJ,!o.clrDgSelectable)),j(2),q("ngModel",o.selected)("id",o.checkboxId),Ke("disabled",!o.clrDgSelectable||null)("aria-disabled",!o.clrDgSelectable||null)("aria-label",o.commonStrings.keys.select),j(1),q("for",o.checkboxId),j(2),Un(o.commonStrings.keys.select)}}function h5e(l,a){if(1&l){const o=mn();V(0,"div",19),V(1,"input",24),ze("ngModelChange",function(u){return Ut(o),ve(2).selection.currentSingle=u}),B(),B()}if(2&l){const o=ve(2);q("ngClass",as(9,tJ,!o.clrDgSelectable)),j(1),q("id",o.radioId)("name",o.selection.id+"-radio")("value",o.item)("ngModel",o.selection.currentSingle)("checked",o.selection.currentSingle===o.item),Ke("disabled",!o.clrDgSelectable||null)("aria-disabled",!o.clrDgSelectable||null)("aria-label",o.commonStrings.keys.select)}}function d5e(l,a){1&l&&(V(0,"div",25),Be(1,2),B())}function f5e(l,a){if(1&l){const o=mn();V(0,"button",29),ze("click",function(){return Ut(o),ve(4).toggleExpand()}),xe(1,"cds-icon",30),B()}if(2&l){const o=ve(4);Ke("aria-expanded",o.expand.expanded)("aria-label",o.expand.expanded?o.clrDgDetailCloseLabel:o.clrDgDetailOpenLabel)("aria-controls",o.expandableId),j(1),Ke("direction",o.expand.expanded?"down":"right")("title",o.expand.expanded?o.commonStrings.keys.collapse:o.commonStrings.keys.expand)}}function p5e(l,a){if(1&l&&(V(0,"clr-spinner",31),Le(1),B()),2&l){const o=ve(4);j(1),Un(o.commonStrings.keys.loading)}}function m5e(l,a){if(1&l&&(Jr(0),le(1,f5e,2,5,"button",27),le(2,p5e,2,1,"clr-spinner",28),Qr()),2&l){const o=ve(3);j(1),q("ngIf",!o.expand.loading),j(1),q("ngIf",o.expand.loading)}}function g5e(l,a){if(1&l&&(V(0,"div",26),le(1,m5e,3,2,"ng-container",2),B()),2&l){const o=ve(2);j(1),q("ngIf",o.expand.expandable)}}function y5e(l,a){if(1&l){const o=mn();V(0,"div",32),V(1,"button",33,34),ze("click",function(){Ut(o);const u=po(2),h=ve(2);return h.detailService.toggle(h.item,u)}),xe(3,"cds-icon",35),B(),B()}if(2&l){const o=ve(2);j(1),lt("is-open",o.detailService.isRowOpen(o.item)),Ke("aria-label",o.detailService.isOpen?o.clrDgDetailCloseLabel:o.clrDgDetailOpenLabel)("aria-expanded",o.detailService.isOpen)("aria-controls",o.detailService.id),j(2),Ke("direction",o.detailService.isRowOpen(o.item)?"left":"right")("title",o.detailService.isRowOpen(o.item)?o.commonStrings.keys.close:o.commonStrings.keys.open)}}function v5e(l,a){}function _5e(l,a){1&l&&le(0,v5e,0,0,"ng-template",8),2&l&&(ve(2),q("ngTemplateOutlet",po(4)))}function b5e(l,a){}function S5e(l,a){1&l&&le(0,b5e,0,0,"ng-template",8),2&l&&(ve(2),q("ngTemplateOutlet",po(4)))}const T5e=function(l){return{"is-replaced":l}};function w5e(l,a){if(1&l&&(V(0,"div",9),V(1,"div",10),Jr(2,null,11),le(4,u5e,6,10,"div",12),le(5,h5e,2,11,"div",12),le(6,d5e,2,0,"div",13),le(7,g5e,2,1,"div",14),le(8,y5e,4,7,"div",15),Qr(),B(),V(9,"div",16),V(10,"div",17),Be(11,1),ll(12,null,18),B(),le(14,_5e,1,1,void 0,2),le(15,S5e,1,1,void 0,2),B(),B()),2&l){const o=ve();lt("datagrid-row-detail-open",o.detailService.isRowOpen(o.item)),q("id",o.id),j(4),q("ngIf",o.selection.selectionType===o.SELECTION_TYPE.Multi),j(1),q("ngIf",o.selection.selectionType===o.SELECTION_TYPE.Single),j(1),q("ngIf",o.rowActionService.hasActionableRow),j(1),q("ngIf",o.globalExpandable.hasExpandableRow),j(1),q("ngIf",o.detailService.enabled),j(1),q("ngClass",as(11,T5e,o.replaced&&o.expanded)),j(5),q("ngIf",o.replaced&&!o.expand.loading),j(1),q("ngIf",!o.replaced&&!o.expand.loading)}}const C5e=[[["clr-dg-row-detail"]],[["clr-dg-cell"]],[["clr-dg-action-overflow"]]],x5e=["clr-dg-row-detail","clr-dg-cell","clr-dg-action-overflow"],E5e=["scrollableColumns"],M5e=["datagridTable"],D5e=["projectedDisplayColumns"],A5e=["projectedCalculationColumns"],I5e=["displayedRows"],R5e=["calculationRows"];function P5e(l,a){if(1&l){const o=mn();V(0,"div",23),V(1,"div",24),V(2,"input",25),ze("ngModelChange",function(u){return Ut(o),ve().allSelected=u}),B(),V(3,"label",26),V(4,"span",27),Le(5),B(),B(),B(),xe(6,"div",28),B()}if(2&l){const o=ve();j(2),q("id",o.selectAllId)("ngModel",o.allSelected),Ke("aria-label",o.commonStrings.keys.selectAll),j(1),q("for",o.selectAllId),j(2),Un(o.commonStrings.keys.selectAll)}}function L5e(l,a){1&l&&(V(0,"div",23),xe(1,"div",28),B()),2&l&&Ke("aria-label",ve().clrDgSingleSelectionAriaLabel)}function O5e(l,a){1&l&&(V(0,"div",29),xe(1,"div",28),B()),2&l&&Ke("aria-label",ve().clrDgSingleActionableAriaLabel)}function N5e(l,a){1&l&&(V(0,"div",30),xe(1,"div",28),B()),2&l&&Ke("aria-label",ve().clrDetailExpandableAriaLabel)}function F5e(l,a){1&l&&xe(0,"clr-dg-placeholder")}function k5e(l,a){1&l&&(V(0,"div",31),V(1,"clr-spinner",32),Le(2,"Loading"),B(),B())}const V5e=[[["clr-dg-action-bar"]],[["clr-dg-placeholder"]],[["clr-dg-footer"]],[["","clrIfDetail",""],["clr-dg-detail"]]],B5e=["clr-dg-action-bar","clr-dg-placeholder","clr-dg-footer","[clrIfDetail],clr-dg-detail"],G5e=["resizeTracker"],z5e=["columnHandle"],H5e=["allSelected"];function j5e(l,a){if(1&l&&(Jr(0),Le(1),Qr()),2&l){const o=ve(2);j(1),Un(o.commonStrings.keys.showColumns)}}function W5e(l,a){}function q5e(l,a){if(1&l){const o=mn();V(0,"li"),V(1,"clr-checkbox-wrapper"),V(2,"input",14),ze("ngModelChange",function(u){const d=Ut(o).$implicit;return ve(2).toggleColumnState(d,!u)}),B(),V(3,"label"),le(4,W5e,0,0,"ng-template",15),B(),B(),B()}if(2&l){const o=a.$implicit,c=ve(2);j(2),q("disabled",c.hasOnlyOneVisibleColumn&&!o.hidden)("ngModel",!o.hidden),j(2),q("ngTemplateOutlet",o.titleTemplateRef)}}function X5e(l,a){if(1&l){const o=mn();V(0,"clr-dg-column-toggle-button",16),ze("clrAllSelected",function(){return Ut(o),ve(2).allColumnsSelected()}),Le(1),B()}if(2&l){const o=ve(2);j(1),Bi(" ",o.commonStrings.keys.selectAll," ")}}function $5e(l,a){if(1&l&&(V(0,"div",3),V(1,"div",4),V(2,"div",5,6),Le(4),B(),le(5,j5e,2,1,"ng-container",7),Be(6),V(7,"button",8),xe(8,"cds-icon",9),B(),B(),V(9,"ul",10),le(10,q5e,5,3,"li",11),B(),V(11,"div",12),Be(12,1),le(13,X5e,2,1,"clr-dg-column-toggle-button",13),B(),B()),2&l){const o=ve();q("id",o.popoverId),Ke("aria-label",o.commonStrings.keys.showColumnsMenuDescription),j(4),Un(o.commonStrings.keys.allColumnsSelected),j(1),q("ngIf",!o.customToggleTitle),j(2),Ke("aria-label",o.commonStrings.keys.close)("title",o.commonStrings.keys.close),j(1),Ke("title",o.commonStrings.keys.close),j(2),q("ngForOf",o.hideableColumnStates)("ngForTrackBy",o.trackByFn),j(3),q("ngIf",!o.customToggleButton)}}const Y5e=[[["clr-dg-column-toggle-title"]],[["clr-dg-column-toggle-button"]]],Z5e=["clr-dg-column-toggle-title","clr-dg-column-toggle-button"];function Q5e(l,a){if(1&l&&(Jr(0),V(1,"div",1),V(2,"clr-checkbox-wrapper",2),xe(3,"input",3),V(4,"label"),Le(5),B(),B(),B(),Qr()),2&l){const o=ve();j(5),Un(o.selection.current.length)}}function eUe(l,a){1&l&&xe(0,"clr-dg-column-toggle")}function tUe(l,a){if(1&l&&(Jr(0),Be(1,1),le(2,eUe,1,0,"clr-dg-column-toggle",0),V(3,"div",4),Be(4,2),B(),Qr()),2&l){const o=ve();j(2),q("ngIf",o.hasHideableColumns&&!o.toggle)}}const nUe=[[["clr-dg-pagination"]],[["clr-dg-column-toggle"]],"*"],rUe=["clr-dg-pagination","clr-dg-column-toggle","*"];function qUe(l,a){if(1&l){const o=mn();V(0,"button",3),ze("click",function(){Ut(o);const u=ve();return u.toggleNav(u.responsiveNavCodes.NAV_LEVEL_1)}),xe(1,"span"),B()}if(2&l){const o=ve();Ke("aria-label",o.openNavLevel!==o.responsiveNavCodes.NAV_LEVEL_1?o.commonStrings.keys.open:o.commonStrings.keys.close)}}function XUe(l,a){if(1&l){const o=mn();V(0,"button",4),ze("click",function(){Ut(o);const u=ve();return u.toggleNav(u.responsiveNavCodes.NAV_LEVEL_2)}),xe(1,"span"),B()}if(2&l){const o=ve();Ke("aria-label",o.openNavLevel!==o.responsiveNavCodes.NAV_LEVEL_2?o.commonStrings.keys.open:o.commonStrings.keys.close)}}function iGe(l,a){if(1&l){const o=mn();V(0,"button",3),ze("click",function(){return Ut(o),ve().toggleByButton()}),xe(1,"cds-icon",4),B()}if(2&l){const o=ve();lt("on-collapse",o.collapsed),Ke("aria-expanded",o.ariaExpanded)("aria-label",o.commonStrings.keys.verticalNavToggle),j(1),Ke("direction",o.collapsed?"right":"left")("title",o.collapsed?o.commonStrings.keys.expand:o.commonStrings.keys.collapse)}}function sGe(l,a){if(1&l){const o=mn();V(0,"button",5),ze("click",function(){return Ut(o),ve().collapsed=!1}),B()}2&l&&Ke("aria-label",ve().commonStrings.keys.verticalNavToggle)}const oGe=[[["","clrVerticalNavLink",""]],[["","clrVerticalNavIcon",""]],"*",[["","clrIfExpanded",""],["clr-vertical-nav-group-children"]]],aGe=["[clrVerticalNavLink]","[clrVerticalNavIcon]","*","[clrIfExpanded], clr-vertical-nav-group-children"];let Ya=(()=>{class l{}return l.\u0275fac=function(o){return new(o||l)},l.\u0275dir=Ze({type:l,selectors:[["clr-icon"]]}),l})(),zr=(()=>{class l{}return l.\u0275fac=function(o){return new(o||l)},l.\u0275dir=Ze({type:l,selectors:[["cds-icon"]]}),l})(),gi=(()=>{class l{}return l.\u0275fac=function(o){return new(o||l)},l.\u0275mod=Yt({type:l}),l.\u0275inj=jt({imports:[[sr]]}),l})();var rr=(()=>(function(l){l.ArrowLeft="ArrowLeft",l.ArrowUp="ArrowUp",l.ArrowRight="ArrowRight",l.ArrowDown="ArrowDown",l.Backspace="Backspace",l.Tab="Tab",l.Enter="Enter",l.Escape="Escape",l.Space="Space",l.Home="Home",l.End="End"}(rr||(rr={})),rr))(),Lu=(()=>(function(l){l.ArrowUp="Up",l.ArrowDown="Down",l.ArrowRight="Right",l.ArrowLeft="Left",l.Space="Spacebar",l.Escape="Esc",l.Home="Home",l.End="End",l.Enter="Enter",l.Tab="Tab"}(Lu||(Lu={})),Lu))();function k1(l){return l===rr.ArrowUp||l===Lu.ArrowUp?rr.ArrowUp:l===rr.ArrowDown||l===Lu.ArrowDown?rr.ArrowDown:l===rr.ArrowRight||l===Lu.ArrowRight?rr.ArrowRight:l===rr.ArrowLeft||l===Lu.ArrowLeft?rr.ArrowLeft:l===rr.Space||l===Lu.Space?rr.Space:l===rr.Escape||l===Lu.Escape?rr.Escape:l}let ii=(()=>{class l{constructor(){this._open=!1,this._openChange=new tt,this._openEventChange=new tt,this._popoverAligned=new tt}get openChange(){return this._openChange.asObservable()}set openEvent(o){this._openEvent=o,this._openEventChange.next(o)}get openEvent(){return this._openEvent}getEventChange(){return this._openEventChange.asObservable()}set open(o){this._open!==(o=!!o)&&(this._open=o,this._openChange.next(o))}get open(){return this._open}get originalEvent(){return this._openEvent}toggleWithEvent(o){(function(l){const a=k1(l.key);(a===rr.ArrowUp||a===rr.ArrowDown||a===rr.ArrowLeft||a===rr.ArrowRight)&&l.preventDefault()})(o),this.openEvent=o,this.open=!this.open}get popoverAligned(){return this._popoverAligned.asObservable()}popoverAlignedEmit(o){this._popoverAligned.next(o)}}return l.\u0275fac=function(o){return new(o||l)},l.\u0275prov=Xe({token:l,factory:l.\u0275fac}),l})(),Uh=(()=>{class l{constructor(o,c,u){this.renderer=o,this.smartOpenService=c,this.document=u,this.outsideClickClose=!0,this.scrollToClose=!0,this.subscriptions=[],this.subscriptions.push(c.openChange.subscribe(h=>{h?(this.addEscapeListener(),this.addClickListener(),this.addScrollListener()):this.removeAllEventListeners()}),c.getEventChange().subscribe(h=>{this.ignoredEvent=h}))}addScrollListener(){this.scrollToClose&&(this.documentScroller=b1(this.document,"scroll",{capture:!0}),this.scrollSubscription=this.documentScroller.pipe(cs(this.testForSmartPopoverContentContainer)).subscribe(()=>{this.smartOpenService.open=!1,this.setAnchorFocus()}))}removeScrollListener(){this.documentScroller&&(this.scrollSubscription.unsubscribe(),delete this.documentScroller)}testForSmartPopoverContentContainer(o){let c=o.target;for(;c.classList&&"body"!==c.parentElement.localName;)c=c.parentElement;return!!c.classList&&!c.classList.contains("clr-popover-content")}addClickListener(){this.outsideClickClose&&(this.documentClickListener=this.renderer.listen(this.document,"click",o=>{o===this.ignoredEvent?delete this.ignoredEvent:(this.smartOpenService.open=!1,o.target.focus())}))}removeClickListener(){this.outsideClickClose&&(delete this.ignoredEvent,this.documentClickListener&&(this.documentClickListener(),delete this.documentClickListener))}addEscapeListener(){this.escapeListener=this.renderer.listen(this.document,"keydown.escape",()=>{this.smartOpenService.open=!1,this.setAnchorFocus()})}removeEscapeListener(){this.escapeListener&&(this.escapeListener(),delete this.escapeListener)}set anchorButtonRef(o){this._anchorButtonRef=o}get anchorButtonRef(){return this._anchorButtonRef}set closeButtonRef(o){this._closeButtonRef=o}get closeButtonRef(){return this._closeButtonRef}setCloseFocus(){this._closeButtonRef.nativeElement.focus()}setAnchorFocus(){this.anchorButtonRef.nativeElement.focus()}set contentRef(o){this._contentRef=o}get contentRef(){return this._contentRef}removeAllEventListeners(){this.removeScrollListener(),this.removeClickListener(),this.removeEscapeListener()}ngOnDestroy(){this.subscriptions.forEach(o=>o.unsubscribe()),this.removeAllEventListeners()}}return l.\u0275fac=function(o){return new(o||l)(be(tr),be(ii),be(Xn))},l.\u0275prov=Xe({token:l,factory:l.\u0275fac}),l})();var Cg=(()=>(function(l){l[l.BOTTOM=0]="BOTTOM",l[l.LEFT=1]="LEFT",l[l.RIGHT=2]="RIGHT",l[l.TOP=3]="TOP"}(Cg||(Cg={})),Cg))(),Vr=(()=>(function(l){l[l.START=0]="START",l[l.CENTER=.5]="CENTER",l[l.END=1]="END"}(Vr||(Vr={})),Vr))();const Ep=l=>Object.assign(Object.assign({},l),{side:-1*l.side}),Gh=(l,a)=>{const o=l.content+(a?.5:-.5);return o<0||o>1?l:Object.assign(Object.assign({},l),{content:o})};function t0(l,a,o){return c=>a(l(c),o)}function tc(l,a,o){let c=a.left,u=a.top;switch(l.axis+l.side){case-1:c+=iJ(l,a,o),u-=o.height;break;case 1:c+=iJ(l,a,o),u+=a.height;break;case 0:c-=o.width,u+=sJ(l,a,o);break;case 2:c+=a.width,u+=sJ(l,a,o)}return{xOffset:c,yOffset:u}}function iJ(l,a,o){let c=0;switch(l.anchor){case Vr.START:break;case Vr.CENTER:c+=a.width/2;break;case Vr.END:c+=a.width}switch(l.content){case Vr.START:break;case Vr.CENTER:c-=o.width/2;break;case Vr.END:c-=o.width}return c}function sJ(l,a,o){let c=0;switch(l.anchor){case Vr.START:break;case Vr.CENTER:c+=a.height/2;break;case Vr.END:c+=a.height}switch(l.content){case Vr.START:break;case Vr.CENTER:c-=o.height/2;break;case Vr.END:c-=o.height}return c}var To=(()=>(function(l){l[l.VERTICAL=0]="VERTICAL",l[l.HORIZONTAL=1]="HORIZONTAL"}(To||(To={})),To))();let Qd=(()=>{class l{constructor(o,c){this.eventService=o,this.platformId=c,this._shouldRealign=new tt,this.shouldRealign=this._shouldRealign.asObservable()}realign(){this._shouldRealign.next()}set position(o){this._position=o}get position(){return this._position}alignContent(o){if(!ti(this.platformId))return{xOffset:0,yOffset:0};this.currentAnchorCoords=this.eventService.anchorButtonRef.nativeElement.getBoundingClientRect(),this.currentContentCoords=o.getBoundingClientRect(),this.contentOffsets=tc(this.position,this.currentAnchorCoords,this.currentContentCoords);const c=function(l,a){const o=[],c_bottom=l.yOffset+a.height,c_left=l.xOffset,c_right=l.xOffset+a.width;return l.yOffset>=0||o.push(Cg.TOP),c_left>=0||o.push(Cg.LEFT),c_bottom<=(window.innerHeight||document.documentElement.clientHeight)||o.push(Cg.BOTTOM),c_right<=(window.innerWidth||document.documentElement.clientWidth)||o.push(Cg.RIGHT),o}(this.contentOffsets,this.currentContentCoords),u=c.reduce((h,d)=>h+d,0);return 1===c.length&&this.position.axis===To.VERTICAL?this.handleVerticalAxisOneViolation(u):1===c.length&&this.position.axis===To.HORIZONTAL?this.handleHorizontalAxisOneViolation(u):2===c.length&&this.position.axis===To.VERTICAL?this.handleVerticalAxisTwoViolations(u):2===c.length&&this.position.axis===To.HORIZONTAL&&this.handleHorizontalAxisTwoViolations(u),this.contentOffsets}handleVerticalAxisOneViolation(o){switch(o){case 0:case 3:this.contentOffsets=tc(Ep(this.position),this.currentAnchorCoords,this.currentContentCoords);break;case 1:this.contentOffsets=tc(Gh(this.position),this.currentAnchorCoords,this.currentContentCoords);break;case 2:this.contentOffsets=tc(Gh(this.position,!0),this.currentAnchorCoords,this.currentContentCoords)}}handleVerticalAxisTwoViolations(o){switch(o){case 5:{const c=t0(Ep,Gh,!0);this.contentOffsets=tc(c(this.position),this.currentAnchorCoords,this.currentContentCoords);break}case 4:{const c=t0(Ep,Gh,!1);this.contentOffsets=tc(c(this.position),this.currentAnchorCoords,this.currentContentCoords);break}case 3:break;case 2:{const c=t0(Ep,Gh,!0);this.contentOffsets=tc(c(this.position),this.currentAnchorCoords,this.currentContentCoords);break}case 1:{const c=t0(Ep,Gh,!1);this.contentOffsets=tc(c(this.position),this.currentAnchorCoords,this.currentContentCoords);break}}}handleHorizontalAxisOneViolation(o){switch(o){case 1:case 2:this.contentOffsets=tc(Ep(this.position),this.currentAnchorCoords,this.currentContentCoords);break;case 0:this.contentOffsets=tc(Gh(this.position,!0),this.currentAnchorCoords,this.currentContentCoords);break;case 3:this.contentOffsets=tc(Gh(this.position),this.currentAnchorCoords,this.currentContentCoords)}}handleHorizontalAxisTwoViolations(o){switch(o){case 5:case 4:{const c=t0(Ep,Gh,!1);this.contentOffsets=tc(c(this.position),this.currentAnchorCoords,this.currentContentCoords);break}case 3:break;case 2:case 1:{const c=t0(Ep,Gh,!0);this.contentOffsets=tc(c(this.position),this.currentAnchorCoords,this.currentContentCoords);break}}}}return l.\u0275fac=function(o){return new(o||l)(be(Uh),be(Ui))},l.\u0275prov=Xe({token:l,factory:l.\u0275fac}),l})(),n0=(()=>{class l{constructor(o,c,u,h,d,f,m){this.document=o,this.container=c,this.template=u,this.renderer=h,this.smartPositionService=d,this.smartEventsService=f,this.smartOpenService=m,this.subscriptions=[],this.shouldRealign=!1,this.checkCollector=new pt}set open(o){this.smartOpenService.open=!!o}set contentAt(o){this.smartPositionService.position=o}set outsideClickClose(o){this.smartEventsService.outsideClickClose=!!o}set scrollToClose(o){this.smartEventsService.scrollToClose=!!o}ngAfterViewInit(){this.subscriptions.push(this.smartOpenService.openChange.subscribe(o=>{o?this.addContent():this.removeContent()}),this.smartPositionService.shouldRealign.subscribe(()=>{this.shouldRealign=!0,this.view&&this.renderer.setStyle(this.view.rootNodes[0],"opacity","0")}),this.checkCollector.pipe(H_(0)).subscribe(()=>{this.alignContent(),this.shouldRealign=!1,this.view&&this.renderer.setStyle(this.view.rootNodes[0],"opacity","1")}))}ngOnDestroy(){this.removeContent(),this.subscriptions.forEach(o=>o.unsubscribe())}removeContent(){!this.view||(this.view.rootNodes.forEach(o=>this.renderer.removeChild(this.document.body,o)),this.container.clear(),delete this.view)}addContent(){this.view=this.container.createEmbeddedView(this.template),this.smartEventsService.contentRef=this.view.rootNodes[0],this.renderer.addClass(this.view.rootNodes[0],"clr-popover-content"),this.renderer.setStyle(this.view.rootNodes[0],"top","0px"),this.renderer.setStyle(this.view.rootNodes[0],"left","0px"),this.renderer.setStyle(this.view.rootNodes[0],"opacity","0"),this.renderer.listen(this.view.rootNodes[0],"click",o=>{this.smartOpenService.openEvent=o}),this.view.rootNodes.forEach(o=>{this.renderer.appendChild(this.document.body,o)}),this.shouldRealign=!0}ngAfterContentChecked(){this.smartOpenService.open&&this.view&&this.shouldRealign&&this.checkCollector.emit()}alignContent(){if(!this.view)return;const o=this.smartPositionService.alignContent(this.view.rootNodes[0]);this.renderer.setStyle(this.view.rootNodes[0],"top",`${o.yOffset}px`),this.renderer.setStyle(this.view.rootNodes[0],"left",`${o.xOffset}px`),this.smartOpenService.popoverAlignedEmit(this.view.rootNodes[0])}}return l.\u0275fac=function(o){return new(o||l)(O(Xn),O(qn),O(bi),O(tr),O(Qd),O(Uh),O(ii))},l.\u0275dir=Ze({type:l,selectors:[["","clrPopoverContent",""]],inputs:{open:["clrPopoverContent","open"],contentAt:["clrPopoverContentAt","contentAt"],outsideClickClose:["clrPopoverContentOutsideClickToClose","outsideClickClose"],scrollToClose:["clrPopoverContentScrollToClose","scrollToClose"]}}),l})(),r0=(()=>{class l{constructor(o){this.smartOpenService=o,this.subscriptions=[],this.openCloseChange=new pt,this.subscriptions.push(this.smartOpenService.openChange.subscribe(c=>{this.openCloseChange.next(c)}))}handleClick(o){this.smartOpenService.toggleWithEvent(o)}ngOnDestroy(){this.subscriptions.forEach(o=>o.unsubscribe())}}return l.\u0275fac=function(o){return new(o||l)(O(ii))},l.\u0275dir=Ze({type:l,selectors:[["","clrPopoverOpenCloseButton",""]],hostVars:2,hostBindings:function(o,c){1&o&&ze("click",function(h){return c.handleClick(h)}),2&o&&lt("clr-smart-open-close",!0)},outputs:{openCloseChange:"clrPopoverOpenCloseChange"}}),l})(),oJ=(()=>{class l{constructor(o,c,u){this.elementRef=o,this.smartEventsService=c,this.smartOpenService=u,this.subscriptions=[],this.closeChange=new pt,this.subscriptions.push(u.openChange.pipe(cs(h=>!h)).subscribe(()=>{this.closeChange.next()}))}handleClick(o){this.smartOpenService.toggleWithEvent(o),this.smartEventsService.setAnchorFocus()}ngAfterViewInit(){this.smartEventsService.closeButtonRef=this.elementRef,this.smartEventsService.setCloseFocus()}ngOnDestroy(){this.subscriptions.forEach(o=>o.unsubscribe())}}return l.\u0275fac=function(o){return new(o||l)(O(kt),O(Uh),O(ii))},l.\u0275dir=Ze({type:l,selectors:[["","clrPopoverCloseButton",""]],hostVars:2,hostBindings:function(o,c){1&o&&ze("click",function(h){return c.handleClick(h)}),2&o&&lt("clr-smart-close-button",!0)},outputs:{closeChange:"clrPopoverOnCloseChange"}}),l})(),s0=(()=>{class l{constructor(o,c){o.anchorButtonRef=c}}return l.\u0275fac=function(o){return new(o||l)(O(Uh),O(kt))},l.\u0275dir=Ze({type:l,selectors:[["","clrPopoverAnchor",""]],hostVars:2,hostBindings:function(o,c){2&o&&lt("clr-anchor",!0)}}),l})(),V1=(()=>{class l{}return l.\u0275fac=function(o){return new(o||l)},l.\u0275mod=Yt({type:l}),l.\u0275inj=jt({imports:[[]]}),l})();class xg{}var no=(()=>(function(l){l[l.DEFAULT=0]="DEFAULT",l[l.LOADING=1]="LOADING",l[l.SUCCESS=2]="SUCCESS",l[l.ERROR=3]="ERROR"}(no||(no={})),no))();const JGe={open:"Open",close:"Close",show:"Show",hide:"Hide",expand:"Expand",collapse:"Collapse",more:"More",select:"Select",selectAll:"Select All",previous:"Previous",next:"Next",current:"Jump to current",info:"Info",success:"Success",warning:"Warning",danger:"Error",rowActions:"Available actions",pickColumns:"Show or hide columns",showColumns:"Show Columns",sortColumn:"Sort Column",firstPage:"First Page",lastPage:"Last Page",nextPage:"Next Page",previousPage:"Previous Page",currentPage:"Current Page",totalPages:"Total Pages",filterItems:"Filter items",minValue:"Min value",maxValue:"Max value",modalContentStart:"Beginning of Modal Content",modalContentEnd:"End of Modal Content",showColumnsMenuDescription:"Show or hide columns menu",allColumnsSelected:"All columns selected",signpostToggle:"Signpost Toggle",signpostClose:"Signpost Close",loading:"Loading",detailPaneStart:"Start of row details",detailPaneEnd:"End of row details",singleSelectionAriaLabel:"Single selection header",singleActionableAriaLabel:"Single actionable header",detailExpandableAriaLabel:"Toggle more row content",datagridFilterAriaLabel:"Toggle column filter",columnSeparatorAriaLabel:"Column resize handle",columnSeparatorDescription:"Not necessary to use this button",alertCloseButtonAriaLabel:"Close alert",datepickerToggle:"Toggle datepicker",datepickerPreviousMonth:"Previous month",datepickerCurrentMonth:"Current month",datepickerNextMonth:"Next month",datepickerPreviousDecade:"Previous decade",datepickerNextDecade:"Next decade",datepickerCurrentDecade:"Current decade",datepickerSelectMonthText:"Select month, the current month is {CALENDAR_MONTH}",datepickerSelectYearText:"Select year, the current year is {CALENDAR_YEAR}",stackViewChanged:"Value changed.",verticalNavGroupToggle:"Toggle vertical navigation group",verticalNavToggle:"Toggle vertical navigation",timelineStepNotStarted:"Not started",timelineStepCurrent:"Current",timelineStepSuccess:"Completed",timelineStepError:"Error",timelineStepProcessing:"In progress",comboboxDelete:"Delete selected option",comboboxSearching:'Searching for matches for "{INPUT}"',comboboxSelection:"Selection",comboboxSelected:"Selected",comboboxNoResults:"No results",comboboxOpen:"Show options",dategridExpandableBeginningOf:"Beginning of",dategridExpandableEndOf:"End of",dategridExpandableRowContent:"Expandable row content",dategridExpandableRowsHelperText:"Screen reader table commands may not work for viewing expanded content, please use your screen reader's browse mode to read the content exposed by this button"};let qr=(()=>{class l{constructor(){this._strings=JGe}localize(o){this._strings=Object.assign(Object.assign({},this._strings),o)}get keys(){return this._strings}parse(o,c={}){const u=Object.keys(c);let h=o;return u.length&&u.forEach(d=>{h=h.replace(`{${d}}`,c[d])}),h}}return l.\u0275fac=function(o){return new(o||l)},l.\u0275prov=Xe({factory:function(){return new l},token:l,providedIn:"root"}),l})(),QGe=0;const ro=new Sn("UNIQUE_ID"),Sa={provide:ro,useFactory:function(){return"clr-id-"+QGe++}};var Za=(()=>(function(l){l[l.BEFORE=-1]="BEFORE",l[l.AFTER=1]="AFTER"}(Za||(Za={})),Za))();class xl{}xl["top-right"]={axis:To.VERTICAL,side:Za.BEFORE,anchor:Vr.END,content:Vr.END},xl["top-left"]={axis:To.VERTICAL,side:Za.BEFORE,anchor:Vr.START,content:Vr.START},xl["bottom-right"]={axis:To.VERTICAL,side:Za.AFTER,anchor:Vr.END,content:Vr.END},xl["bottom-left"]={axis:To.VERTICAL,side:Za.AFTER,anchor:Vr.START,content:Vr.START},xl["right-top"]={axis:To.HORIZONTAL,side:Za.AFTER,anchor:Vr.CENTER,content:Vr.END},xl["right-bottom"]={axis:To.HORIZONTAL,side:Za.AFTER,anchor:Vr.START,content:Vr.START},xl["left-top"]={axis:To.HORIZONTAL,side:Za.BEFORE,anchor:Vr.CENTER,content:Vr.END},xl["left-bottom"]={axis:To.HORIZONTAL,side:Za.BEFORE,anchor:Vr.START,content:Vr.START};let n6e=(()=>{class l{}return l.\u0275fac=function(o){return new(o||l)},l.\u0275mod=Yt({type:l}),l.\u0275inj=jt({imports:[[sr,gi,V1]]}),l})(),i6e=(()=>{class l{}return l.\u0275fac=function(o){return new(o||l)},l.\u0275mod=Yt({type:l}),l.\u0275inj=jt({imports:[[sr]]}),l})(),s6e=(()=>{class l{constructor(){li.addIcons(hZ)}}return l.\u0275fac=function(o){return new(o||l)},l.\u0275mod=Yt({type:l}),l.\u0275inj=jt({imports:[i6e,n6e]}),l})(),o6e=(()=>{class l{}return l.\u0275fac=function(o){return new(o||l)},l.\u0275cmp=Qe({type:l,selectors:[["ng-component"]],decls:0,vars:0,template:function(o,c){},encapsulation:2}),l})(),yA=(()=>{class l{}return l.\u0275fac=function(o){return new(o||l)},l.\u0275mod=Yt({type:l}),l.\u0275inj=jt({}),l})();class vA{constructor(a,o,c=0){if(this.injector=o.injector,!this.injector.get(a,null)){const u=this.injector.get(wc),h=this.injector.get(kt);o.createComponent(u.resolveComponentFactory(o6e));const d=u.resolveComponentFactory(a),f=[];f[c]=[h.nativeElement];const m=o.createComponent(d,void 0,void 0,f);o.remove(0),m.instance._dynamic=!0,this.injector=m.injector}}get(a,o){return this.injector.get(a,o)}}let a6e=0,Bo=(()=>{class l{constructor(){this._id="clr-form-control-"+ ++a6e,this._idChange=new ni(this._id)}get id(){return this._id}set id(o){this._id=o,this._idChange.next(o)}get idChange(){return this._idChange.asObservable()}}return l.\u0275fac=function(o){return new(o||l)},l.\u0275prov=Xe({token:l,factory:l.\u0275fac}),l})(),qi=(()=>{class l{constructor(){this._controlChanges=new tt,this._helpers=new tt}get controlChanges(){return this._controlChanges.asObservable()}setControl(o){this._controlChanges.next(o)}get helpersChange(){return this._helpers.asObservable()}setHelpers(o){this._helpers.next(o)}}return l.\u0275fac=function(o){return new(o||l)},l.\u0275prov=Xe({token:l,factory:l.\u0275fac}),l})();var ef=(()=>(function(l){l.VERTICAL="vertical",l.HORIZONTAL="horizontal",l.COMPACT="compact"}(ef||(ef={})),ef))();let Ka=(()=>{class l{constructor(){this.minLabelSize=1,this.maxLabelSize=12,this.layout=ef.HORIZONTAL,this.layoutValues=Object.keys(ef).map(o=>ef[o]),this._labelSize=2}set labelSize(o){this.labelSizeIsValid(o)&&(this._labelSize=o)}get labelSize(){return this._labelSize}isVertical(){return this.layout===ef.VERTICAL}isHorizontal(){return this.layout===ef.HORIZONTAL}isCompact(){return this.layout===ef.COMPACT}get layoutClass(){return`clr-form-${this.layout}`}isValid(o){return this.layoutValues.indexOf(o)>-1}labelSizeIsValid(o){return Number.isInteger(o)&&o>=this.minLabelSize&&o<=this.maxLabelSize}}return l.\u0275fac=function(o){return new(o||l)},l.\u0275prov=Xe({token:l,factory:l.\u0275fac}),l})();var wo=(()=>(function(l){l.NONE="NONE",l.VALID="VALID",l.INVALID="INVALID"}(wo||(wo={})),wo))();let rs=(()=>{class l{constructor(o){this.ngControlService=o,this.subscriptions=[],this._statusChanges=new ni(wo.NONE),this.subscriptions.push(this.ngControlService.controlChanges.subscribe(c=>{c&&(this.control=c,this.subscriptions.push(this.control.statusChanges.subscribe(()=>{this.triggerStatusChange()})))}))}get statusChanges(){return this._statusChanges.asObservable()}triggerStatusChange(){if(this.control){const o=wo[this.control.status];this._statusChanges.next(this.control.touched&&["VALID","INVALID"].includes(o)?o:wo.NONE)}}ngOnDestroy(){this.subscriptions.forEach(o=>o.unsubscribe())}}return l.\u0275fac=function(o){return new(o||l)(be(qi))},l.\u0275prov=Xe({token:l,factory:l.\u0275fac}),l})(),zs=(()=>{class l{constructor(o){this.layoutService=o,this.className=""}controlClass(o=wo.NONE,c=!1,u=""){const h=[this.className,u];switch(o){case wo.VALID:h.push("clr-success");break;case wo.INVALID:h.push("clr-error")}return c&&this.layoutService&&-1===this.className.indexOf("clr-col")&&h.push(`clr-col-md-${this.layoutService.maxLabelSize-this.layoutService.labelSize} clr-col-12`),h.join(" ").trim()}initControlClass(o,c){c&&c.className&&(this.className=c.className,c.className.split(" ").forEach(h=>{h.startsWith("clr-col")&&o.removeClass(c,h)}))}}return l.\u0275fac=function(o){return new(o||l)(be(Ka,8))},l.\u0275prov=Xe({token:l,factory:l.\u0275fac}),l})(),$3=(()=>{class l{constructor(){this._touched=new tt}get touchedChange(){return this._touched.asObservable()}markAsTouched(){this._touched.next()}}return l.\u0275fac=function(o){return new(o||l)},l.\u0275prov=Xe({token:l,factory:l.\u0275fac}),l})(),u6e=0,Eg=(()=>{class l{constructor(){this._id="clr-form-container-"+ ++u6e,this._idChange=new ni(this._id)}get id(){return this._id}set id(o){this._id=o,this._idChange.next(o)}get idChange(){return this._idChange.asObservable()}}return l.\u0275fac=function(o){return new(o||l)},l.\u0275prov=Xe({token:l,factory:l.\u0275fac}),l})();let Y3=(()=>{class l{constructor(o,c){this.controlIdService=o,this.containerIdService=c,this.controlIdSuffix="abstract"}get id(){return this.containerIdService?`${this.containerIdService.id}-${this.controlIdSuffix}`:this.controlIdService?`${this.controlIdService.id}-${this.controlIdSuffix}`:null}}return l.\u0275fac=function(o){return new(o||l)(O(Bo,8),O(Eg,8))},l.\u0275dir=Ze({type:l}),l})(),Ou=(()=>{class l{constructor(o,c,u,h,d,f){this.vcr=o,this.wrapperType=c,this.ngControl=h,this.subscriptions=[],this.index=0,this.renderer=d,this.el=f;try{this.ngControlService=u.get(qi),this.ifControlStateService=u.get(rs),this.controlClassService=u.get(zs),this.markControlService=u.get($3)}catch(m){}this.controlClassService&&this.controlClassService.initControlClass(d,f.nativeElement),this.markControlService&&this.subscriptions.push(this.markControlService.touchedChange.subscribe(()=>{this.markAsTouched()})),this.ngControlService&&this.subscriptions.push(this.ngControlService.helpersChange.subscribe(m=>{this.setAriaDescribedBy(m)}))}get id(){return this._id}set id(o){this._id=o,this.controlIdService&&(this.controlIdService.id=o)}triggerValidation(){this.ifControlStateService&&(this.ngControl&&!this.ngControl.touched&&this.markAsTouched(),this.ifControlStateService.triggerStatusChange())}markAsTouched(){this.ngControl.control.markAsTouched(),this.ngControl.control.updateValueAndValidity()}getProviderFromContainer(o,c){try{return this._containerInjector.get(o,c)}catch(u){return c}}ngOnInit(){this._containerInjector=new vA(this.wrapperType,this.vcr,this.index),this.controlIdService=this._containerInjector.get(Bo);try{this.containerIdService=this._containerInjector.get(Eg)}catch(o){}this._id?this.controlIdService.id=this._id:this._id=this.controlIdService.id,this.ngControlService&&this.ngControlService.setControl(this.ngControl)}ngOnDestroy(){this.subscriptions.forEach(o=>o.unsubscribe())}setAriaDescribedBy(o){if(o.show){const c=this.getAriaDescribedById(o);if(null!==c)return void this.renderer.setAttribute(this.el.nativeElement,"aria-describedby",c)}this.renderer.removeAttribute(this.el.nativeElement,"aria-describedby")}getAriaDescribedById(o){let c="helper";return o.showInvalid?c="error":o.showValid&&(c="success"),this.containerIdService?this.containerIdService.id.concat("-",c):this.controlIdService?this.controlIdService.id.concat("-",c):null}}return l.\u0275fac=function(o){return new(o||l)(O(qn),O(qb),O(Qn),O(to),O(tr),O(kt))},l.\u0275dir=Ze({type:l,hostVars:1,hostBindings:function(o,c){1&o&&ze("blur",function(){return c.triggerValidation()}),2&o&&Hl("id",c.id)},inputs:{id:"id"}}),l})(),xi=(()=>{class l{constructor(o,c,u,h,d){this.controlIdService=o,this.layoutService=c,this.ngControlService=u,this.renderer=h,this.el=d,this.subscriptions=[],this.enableGrid=!0}get labelText(){return this.el.nativeElement&&this.el.nativeElement.textContent}ngOnInit(){(this.controlIdService||this.ngControlService)&&this.renderer.addClass(this.el.nativeElement,"clr-control-label"),this.enableGrid&&this.layoutService&&!this.layoutService.isVertical()&&this.el.nativeElement&&this.el.nativeElement.className.indexOf("clr-col")<0&&(this.renderer.addClass(this.el.nativeElement,"clr-col-12"),this.renderer.addClass(this.el.nativeElement,`clr-col-md-${this.layoutService.labelSize}`)),this.controlIdService&&!this.forAttr&&this.subscriptions.push(this.controlIdService.idChange.subscribe(o=>this.forAttr=o))}disableGrid(){this.enableGrid=!1}ngOnDestroy(){this.subscriptions.forEach(o=>o.unsubscribe())}}return l.\u0275fac=function(o){return new(o||l)(O(Bo,8),O(Ka,8),O(qi,8),O(tr),O(kt))},l.\u0275dir=Ze({type:l,selectors:[["label"]],hostVars:1,hostBindings:function(o,c){2&o&&Ke("for",c.forAttr)},inputs:{forAttr:["for","forAttr"]}}),l})(),h6e=(()=>{class l extends Y3{constructor(o,c){super(o,c),this.controlIdService=o,this.containerIdService=c,this.controlIdSuffix="success"}}return l.\u0275fac=function(o){return new(o||l)(O(Bo,8),O(Eg,8))},l.\u0275cmp=Qe({type:l,selectors:[["clr-control-success"]],hostVars:3,hostBindings:function(o,c){2&o&&(Ke("id",c.id),lt("clr-subtext",!0))},features:[on],ngContentSelectors:Pn,decls:1,vars:0,template:function(o,c){1&o&&(Lt(),Be(0))},encapsulation:2}),l})(),d6e=(()=>{class l extends Y3{constructor(o,c){super(o,c),this.controlIdService=o,this.containerIdService=c,this.controlIdSuffix="error"}}return l.\u0275fac=function(o){return new(o||l)(O(Bo,8),O(Eg,8))},l.\u0275cmp=Qe({type:l,selectors:[["clr-control-error"]],hostVars:3,hostBindings:function(o,c){2&o&&(Ke("id",c.id),lt("clr-subtext",!0))},features:[on],ngContentSelectors:Pn,decls:1,vars:0,template:function(o,c){1&o&&(Lt(),Be(0))},encapsulation:2}),l})(),_A=(()=>{class l extends Y3{constructor(o,c){super(o,c),this.controlIdService=o,this.containerIdService=c,this.controlIdSuffix="helper"}}return l.\u0275fac=function(o){return new(o||l)(O(Bo,8),O(Eg,8))},l.\u0275cmp=Qe({type:l,selectors:[["clr-control-helper"]],hostVars:3,hostBindings:function(o,c){2&o&&(Ke("id",c.id),lt("clr-subtext",!0))},features:[on],ngContentSelectors:Pn,decls:1,vars:0,template:function(o,c){1&o&&(Lt(),Be(0))},encapsulation:2}),l})(),Nu=(()=>{class l{constructor(o,c,u,h){this.ifControlStateService=o,this.layoutService=c,this.controlClassService=u,this.ngControlService=h,this.subscriptions=[],this._dynamic=!1,this.subscriptions.push(this.ifControlStateService.statusChanges.subscribe(d=>{this.state=d,this.updateHelpers()})),this.subscriptions.push(this.ngControlService.controlChanges.subscribe(d=>{this.control=d}))}get showHelper(){return!!this.controlHelperComponent&&(!!this.controlHelperComponent&&this.state===wo.NONE||!this.controlSuccessComponent&&this.state===wo.VALID||!this.controlErrorComponent&&this.state===wo.INVALID)}get showValid(){return this.state===wo.VALID&&!!this.controlSuccessComponent}get showInvalid(){return this.state===wo.INVALID&&!!this.controlErrorComponent}ngAfterContentInit(){this.updateHelpers()}ngOnDestroy(){this.subscriptions.forEach(o=>o.unsubscribe())}controlClass(){return this.controlClassService.controlClass(this.controlSuccessComponent||this.state!==wo.VALID?this.state:wo.NONE,this.addGrid())}addGrid(){return this.layoutService&&!this.layoutService.isVertical()}updateHelpers(){this.ngControlService&&this.ngControlService.setHelpers({show:this.showInvalid||this.showHelper||this.showValid,showInvalid:this.showInvalid,showHelper:this.showHelper,showValid:this.showValid})}}return l.\u0275fac=function(o){return new(o||l)(O(rs),O(Ka,8),O(zs),O(qi))},l.\u0275dir=Ze({type:l,contentQueries:function(o,c,u){if(1&o&&(Nn(u,xi,5),Nn(u,h6e,5),Nn(u,d6e,5),Nn(u,_A,5)),2&o){let h;It(h=Rt())&&(c.label=h.first),It(h=Rt())&&(c.controlSuccessComponent=h.first),It(h=Rt())&&(c.controlErrorComponent=h.first),It(h=Rt())&&(c.controlHelperComponent=h.first)}}}),l})(),Z3=(()=>{class l{constructor(o,c){this.layoutService=o,this.markControlService=c}set labelSize(o){const c=parseInt(o,10)||2;this.layoutService.labelSize=c}markAsTouched(){this.markControlService.markAsTouched()}onFormSubmit(){this.markAsTouched()}}return l.\u0275fac=function(o){return new(o||l)(O(Ka),O($3))},l.\u0275dir=Ze({type:l,selectors:[["","clrForm",""]],contentQueries:function(o,c,u){if(1&o&&Nn(u,xi,5),2&o){let h;It(h=Rt())&&(c.labels=h)}},hostVars:6,hostBindings:function(o,c){1&o&&ze("submit",function(){return c.onFormSubmit()}),2&o&&lt("clr-form",!0)("clr-form-horizontal",c.layoutService.isHorizontal())("clr-form-compact",c.layoutService.isCompact())},inputs:{labelSize:["clrLabelSize","labelSize"]},features:[Mt([Ka,$3])]}),l})(),cJ=(()=>{class l{constructor(o){this.layoutService=o}ngOnInit(){this.layout&&this.layoutService.isValid(this.layout)&&(this.layoutService.layout=this.layout)}}return l.\u0275fac=function(o){return new(o||l)(O(Ka))},l.\u0275dir=Ze({type:l,selectors:[["","clrForm","","clrLayout",""]],inputs:{layout:["clrLayout","layout"]}}),l})(),Uo=(()=>{class l{constructor(){li.addIcons(Kl,Jl)}}return l.\u0275fac=function(o){return new(o||l)},l.\u0275mod=Yt({type:l}),l.\u0275inj=jt({imports:[[sr,gi]]}),l})();const K3=new Sn("IS_TOGGLE"),m6e={provide:K3,useFactory:function(){return new ni(!1)}};let bA=(()=>{class l{constructor(o){this._dynamic=!1,this.toggle=!1,this.subscriptions=[],this.subscriptions.push(o.subscribe(c=>{this.toggle=c}))}ngOnInit(){this.label&&this.label.disableGrid()}ngOnDestroy(){this.subscriptions.forEach(o=>o.unsubscribe())}}return l.\u0275fac=function(o){return new(o||l)(O(K3))},l.\u0275cmp=Qe({type:l,selectors:[["clr-checkbox-wrapper"],["clr-toggle-wrapper"]],contentQueries:function(o,c,u){if(1&o&&Nn(u,xi,7),2&o){let h;It(h=Rt())&&(c.label=h.first)}},hostVars:4,hostBindings:function(o,c){2&o&&lt("clr-checkbox-wrapper",!c.toggle)("clr-toggle-wrapper",c.toggle)},features:[Mt([Bo,m6e])],ngContentSelectors:C4e,decls:3,vars:1,consts:[[4,"ngIf"]],template:function(o,c){1&o&&(Lt(w4e),Be(0),Be(1,1),le(2,T4e,1,0,"label",0)),2&o&&(j(2),q("ngIf",!c.label))},directives:[Mn,xi],encapsulation:2}),l})(),SA=(()=>{class l extends Ou{constructor(o,c,u,h,d,f){super(o,bA,c,u,h,d),this.toggle=f}ngOnInit(){super.ngOnInit();const o=this.getProviderFromContainer(K3,null);o&&null!==this.toggle&&o.next(!0)}}return l.\u0275fac=function(o){return new(o||l)(O(qn),O(Qn),O(to,10),O(tr),O(kt),zy("clrToggle"))},l.\u0275dir=Ze({type:l,selectors:[["","clrCheckbox",""],["","clrToggle",""]],features:[on]}),l})(),g6e=(()=>{class l extends Nu{constructor(o,c,u,h){super(h,o,c,u),this.layoutService=o,this.controlClassService=c,this.ngControlService=u,this.ifControlStateService=h,this.inline=!1}set clrInline(o){this.inline="string"==typeof o?"false"!==o:!!o}get clrInline(){return this.inline}ngAfterContentInit(){this.setAriaRoles()}setAriaRoles(){this.role=this.checkboxes.length?"group":null}}return l.\u0275fac=function(o){return new(o||l)(O(Ka,8),O(zs),O(qi),O(rs))},l.\u0275cmp=Qe({type:l,selectors:[["clr-checkbox-container"],["clr-toggle-container"]],contentQueries:function(o,c,u){if(1&o&&Nn(u,SA,5),2&o){let h;It(h=Rt())&&(c.checkboxes=h)}},hostVars:7,hostBindings:function(o,c){2&o&&(Ke("role",c.role),lt("clr-form-control",!0)("clr-form-control-disabled",null==c.control?null:c.control.disabled)("clr-row",c.addGrid()))},inputs:{clrInline:"clrInline"},features:[Mt([rs,qi,zs,Eg]),on],ngContentSelectors:P4e,decls:10,vars:9,consts:[[4,"ngIf"],[1,"clr-control-container",3,"ngClass"],[1,"clr-subtext-wrapper"],["class","clr-validate-icon","status","danger","shape","exclamation-circle","aria-hidden","true",4,"ngIf"],["class","clr-validate-icon","status","success","shape","check-circle","aria-hidden","true",4,"ngIf"],["status","danger","shape","exclamation-circle","aria-hidden","true",1,"clr-validate-icon"],["status","success","shape","check-circle","aria-hidden","true",1,"clr-validate-icon"]],template:function(o,c){1&o&&(Lt(R4e),Be(0),le(1,x4e,1,0,"label",0),V(2,"div",1),Be(3,1),V(4,"div",2),le(5,E4e,1,0,"ng-content",0),le(6,M4e,1,0,"cds-icon",3),le(7,D4e,1,0,"cds-icon",4),le(8,A4e,1,0,"ng-content",0),le(9,I4e,1,0,"ng-content",0),B(),B()),2&o&&(j(1),q("ngIf",!c.label&&c.addGrid()),j(1),lt("clr-control-inline",c.clrInline),q("ngClass",c.controlClass()),j(3),q("ngIf",c.showHelper),j(1),q("ngIf",c.showInvalid),j(1),q("ngIf",c.showValid),j(1),q("ngIf",c.showInvalid),j(1),q("ngIf",c.showValid))},directives:[Mn,_s,xi,zr],encapsulation:2}),l})(),y6e=(()=>{class l{constructor(){li.addIcons(Kl,Jl)}}return l.\u0275fac=function(o){return new(o||l)},l.\u0275mod=Yt({type:l}),l.\u0275inj=jt({imports:[[sr,gi,Uo,yA],Uo]}),l})();new Sn("IF_ACTIVE_ID");let TA=(()=>{class l{constructor(o,c,u){this.toggleService=o,this.template=c,this.container=u,this.openChange=new pt(!1),this.subscription=this.toggleService.openChange.subscribe(h=>{this.updateView(h),this.openChange.emit(h)})}set open(o){this.toggleService.open=o}get open(){return this.toggleService.open}updateView(o){o?this.container.createEmbeddedView(this.template):this.container.clear()}ngOnDestroy(){this.subscription.unsubscribe()}}return l.\u0275fac=function(o){return new(o||l)(O(ii),O(bi),O(qn))},l.\u0275dir=Ze({type:l,selectors:[["","clrIfOpen",""]],inputs:{open:["clrIfOpen","open"]},outputs:{openChange:"clrIfOpenChange"}}),l})(),Ja=(()=>{class l{constructor(){this.expandable=0,this._loading=!1,this._expanded=!1,this._expandChange=new tt}get loading(){return this._loading}set loading(o){(o=!!o)!==this._loading&&(this._loading=o)}get expanded(){return this._expanded}set expanded(o){(o=!!o)!==this._expanded&&(this._expanded=o,this._expandChange.next(o))}toggle(){this.expanded=!this._expanded}get expandChange(){return this._expandChange.asObservable()}loadingStateChange(o){switch(o){case no.LOADING:this.loading=!0;break;default:this.loading=!1}}}return l.\u0275fac=function(o){return new(o||l)},l.\u0275prov=Xe({token:l,factory:l.\u0275fac}),l})(),Bc=(()=>{class l{}return l.\u0275fac=function(o){return new(o||l)},l.\u0275mod=Yt({type:l}),l.\u0275inj=jt({imports:[[sr]]}),l})(),T6e=(()=>{class l{constructor(){this._previousFocusTraps=[]}get current(){return this._current}set current(o){this._previousFocusTraps.push(this._current),this._current=o}get nbFocusTrappers(){return this._previousFocusTraps.length}activatePreviousTrapper(){this._current=this._previousFocusTraps.pop()}}return l.\u0275fac=function(o){return new(o||l)},l.\u0275prov=Xe({factory:function(){return new l},token:l,providedIn:"root"}),l})(),Mp=(()=>{class l{constructor(o,c,u,h,d){this.el=o,this.injector=c,this.focusTrapsTracker=u,this.renderer=h,this.platformId=d,this.localFocusEscaped=!1,this._config={strict:!0},this.document=this.injector.get(Xn),this.focusTrapsTracker.current=this}set config(o){this._config=Object.assign(this._config,""===o?{}:o)}onFocusIn(o){const c=this.el.nativeElement;this.focusTrapsTracker.current!==this||!ti(this.platformId)||this.localFocusEscaped||c.contains(o.target)||(o.target===this.topReboundEl&&c.contains(o.relatedTarget)?(this.focusLastFocusable(),this.focusTrapElIfOutside()):o.target===this.bottomReboundEl&&c.contains(o.relatedTarget)?(this.focusFirstFocusable(),this.focusTrapElIfOutside()):this._config.strict?this.el.nativeElement.focus():this.localFocusEscaped=!0)}createFocusableOffScreenEl(){const o=this.document.createElement("span");return this.renderer.setAttribute(o,"tabindex","0"),this.renderer.addClass(o,"offscreen-focus-rebounder"),o}addReboundEls(){if(ti(this.platformId)){this.topReboundEl=this.createFocusableOffScreenEl(),this.bottomReboundEl=this.createFocusableOffScreenEl();const o=this.el.nativeElement;this.renderer.insertBefore(o.parentElement,this.topReboundEl,o),o.nextSibling?this.renderer.insertBefore(o.parentNode,this.bottomReboundEl,o.nextSibling):this.renderer.appendChild(o.parentNode,this.bottomReboundEl)}}removeReboundEls(){ti(this.platformId)&&this.topReboundEl&&this.bottomReboundEl&&(this.parentElement.removeChild(this.topReboundEl),this.parentElement.removeChild(this.bottomReboundEl),delete this.topReboundEl,delete this.bottomReboundEl)}setPreviousFocus(){this.previousActiveElement&&this.previousActiveElement.focus&&this.previousActiveElement.focus()}ngOnInit(){ti(this.platformId)&&(this.renderer.setAttribute(this.el.nativeElement,"tabindex","-1"),this.el.nativeElement.focus())}ngAfterViewInit(){ti(this.platformId)&&(this.previousActiveElement=this.document.activeElement,this.parentElement=this.el.nativeElement.parentElement),this.addReboundEls()}get potentiallyFocusableEls(){return[...this.el.nativeElement.querySelectorAll('[href]:not([tabindex="-1"]), button:not([disabled]):not([tabindex="-1"]), input:not([disabled]):not([tabindex="-1"]), select:not([disabled]):not([tabindex="-1"]), textarea:not([disabled]):not([tabindex="-1"]), [contenteditable="true"]:not([tabindex="-1"]), [tabindex]:not([tabindex="-1"]) ')]}focusFirstFocusable(){for(let o=0;o<this.potentiallyFocusableEls.length&&(this.firstFocusableEl=this.focusElement(this.potentiallyFocusableEls[o]),!this.firstFocusableEl);o++);}focusLastFocusable(){for(let o=this.potentiallyFocusableEls.length-1;o>=0&&(this.lastFocusableEl=this.focusElement(this.potentiallyFocusableEls[o]),!this.lastFocusableEl);o--);}focusTrapElIfOutside(){this.el.nativeElement.contains(document.activeElement)||this.el.nativeElement.focus()}focusElement(o){return o&&o.focus&&(o.focus(),document.activeElement===o)?o:null}ngOnDestroy(){this.removeReboundEls(),this.setPreviousFocus(),this.focusTrapsTracker.activatePreviousTrapper()}}return l.\u0275fac=function(o){return new(o||l)(O(kt),O(Qn),O(T6e),O(tr),O(Ui))},l.\u0275dir=Ze({type:l,selectors:[["","clrFocusTrap",""]],hostBindings:function(o,c){1&o&&ze("focusin",function(h){return c.onFocusIn(h)},!1,nS)},inputs:{config:["clrFocusTrap","config"]}}),l})(),wA=(()=>{class l{}return l.\u0275fac=function(o){return new(o||l)},l.\u0275mod=Yt({type:l}),l.\u0275inj=jt({imports:[[sr]]}),l})();function Uc(l){return null!==l&&("string"==typeof l?l.length>=0:"boolean"==typeof l&&l)}let G6e=(()=>{class l{constructor(){li.addIcons(Kl,Jl,G_,NFe,FFe)}}return l.\u0275fac=function(o){return new(o||l)},l.\u0275mod=Yt({type:l}),l.\u0275inj=jt({imports:[[sr,yA,Bc,V1,gi,wA,Uo]]}),l})(),z1=(()=>{class l extends Nu{}return l.\u0275fac=function(){let a;return function(c){return(a||(a=Fs(l)))(c||l)}}(),l.\u0275cmp=Qe({type:l,selectors:[["clr-input-container"]],hostVars:6,hostBindings:function(o,c){2&o&&lt("clr-form-control",!0)("clr-form-control-disabled",null==c.control?null:c.control.disabled)("clr-row",c.addGrid())},features:[Mt([rs,qi,Bo,zs]),on],ngContentSelectors:sVe,decls:10,vars:7,consts:[[4,"ngIf"],[1,"clr-control-container",3,"ngClass"],[1,"clr-input-wrapper"],["class","clr-validate-icon","shape","exclamation-circle","aria-hidden","true",4,"ngIf"],["class","clr-validate-icon","shape","check-circle","status","success","aria-hidden","true",4,"ngIf"],["shape","exclamation-circle","aria-hidden","true",1,"clr-validate-icon"],["shape","check-circle","status","success","aria-hidden","true",1,"clr-validate-icon"]],template:function(o,c){1&o&&(Lt(iVe),Be(0),le(1,J4e,1,0,"label",0),V(2,"div",1),V(3,"div",2),Be(4,1),le(5,Q4e,1,0,"cds-icon",3),le(6,eVe,1,0,"cds-icon",4),B(),le(7,tVe,1,0,"ng-content",0),le(8,nVe,1,0,"ng-content",0),le(9,rVe,1,0,"ng-content",0),B()),2&o&&(j(1),q("ngIf",!c.label&&c.addGrid()),j(1),q("ngClass",c.controlClass()),j(3),q("ngIf",c.showInvalid),j(1),q("ngIf",c.showValid),j(1),q("ngIf",c.showHelper),j(1),q("ngIf",c.showInvalid),j(1),q("ngIf",c.showValid))},directives:[Mn,_s,xi,zr],encapsulation:2}),l})(),MA=(()=>{class l extends Ou{constructor(o,c,u,h,d){super(o,z1,c,u,h,d),this.index=1}}return l.\u0275fac=function(o){return new(o||l)(O(qn),O(Qn),O(to,10),O(tr),O(kt))},l.\u0275dir=Ze({type:l,selectors:[["","clrInput",""]],hostVars:2,hostBindings:function(o,c){2&o&&lt("clr-input",!0)},features:[on]}),l})(),bJ=(()=>{class l{constructor(){li.addIcons(Kl,Jl)}}return l.\u0275fac=function(o){return new(o||l)},l.\u0275mod=Yt({type:l}),l.\u0275inj=jt({imports:[[sr,kh,gi,Uo],Uo]}),l})();new Sn(void 0);let W6e=(()=>{class l{constructor(){li.addIcons(kFe,VFe,Kl,Jl)}}return l.\u0275fac=function(o){return new(o||l)},l.\u0275mod=Yt({type:l}),l.\u0275inj=jt({imports:[[sr,kh,gi,Uo],Uo]}),l})(),q6e=(()=>{class l{constructor(){this._dynamic=!1}ngOnInit(){this.label&&this.label.disableGrid()}}return l.\u0275fac=function(o){return new(o||l)},l.\u0275cmp=Qe({type:l,selectors:[["clr-radio-wrapper"]],contentQueries:function(o,c,u){if(1&o&&Nn(u,xi,7),2&o){let h;It(h=Rt())&&(c.label=h.first)}},hostVars:2,hostBindings:function(o,c){2&o&&lt("clr-radio-wrapper",!0)},features:[Mt([Bo])],ngContentSelectors:yVe,decls:3,vars:1,consts:[[4,"ngIf"]],template:function(o,c){1&o&&(Lt(gVe),Be(0),Be(1,1),le(2,mVe,1,0,"label",0)),2&o&&(j(2),q("ngIf",!c.label))},directives:[Mn,xi],encapsulation:2}),l})(),SJ=(()=>{class l extends Ou{constructor(o,c,u,h,d){super(o,q6e,c,u,h,d)}}return l.\u0275fac=function(o){return new(o||l)(O(qn),O(Qn),O(to,10),O(tr),O(kt))},l.\u0275dir=Ze({type:l,selectors:[["","clrRadio",""]],features:[on]}),l})(),X6e=(()=>{class l{constructor(){li.addIcons(Kl,Jl)}}return l.\u0275fac=function(o){return new(o||l)},l.\u0275mod=Yt({type:l}),l.\u0275inj=jt({imports:[[sr,Uo,yA,gi],Uo]}),l})(),TJ=(()=>{class l extends Nu{constructor(o,c,u,h){super(h,o,c,u),this.layoutService=o,this.controlClassService=c,this.ngControlService=u,this.ifControlStateService=h,this.multi=!1}ngOnInit(){this.subscriptions.push(this.ngControlService.controlChanges.subscribe(o=>{o&&(this.multi=o.valueAccessor instanceof I1,this.control=o)}))}wrapperClass(){return this.multi?"clr-multiselect-wrapper":"clr-select-wrapper"}}return l.\u0275fac=function(o){return new(o||l)(O(Ka,8),O(zs),O(qi),O(rs))},l.\u0275cmp=Qe({type:l,selectors:[["clr-select-container"]],contentQueries:function(o,c,u){if(1&o&&Nn(u,I1,5),2&o){let h;It(h=Rt())&&(c.multiple=h.first)}},hostVars:6,hostBindings:function(o,c){2&o&&lt("clr-form-control",!0)("clr-form-control-disabled",null==c.control?null:c.control.disabled)("clr-row",c.addGrid())},features:[Mt([rs,qi,Bo,zs]),on],ngContentSelectors:LVe,decls:10,vars:8,consts:[[4,"ngIf"],[1,"clr-control-container",3,"ngClass"],[3,"ngClass"],["class","clr-validate-icon","status","danger","shape","exclamation-circle","aria-hidden","true",4,"ngIf"],["class","clr-validate-icon","shape","check-circle","status","success","aria-hidden","true",4,"ngIf"],["status","danger","shape","exclamation-circle","aria-hidden","true",1,"clr-validate-icon"],["shape","check-circle","status","success","aria-hidden","true",1,"clr-validate-icon"]],template:function(o,c){1&o&&(Lt(PVe),Be(0),le(1,EVe,1,0,"label",0),V(2,"div",1),V(3,"div",2),Be(4,1),le(5,MVe,1,0,"cds-icon",3),le(6,DVe,1,0,"cds-icon",4),B(),le(7,AVe,1,0,"ng-content",0),le(8,IVe,1,0,"ng-content",0),le(9,RVe,1,0,"ng-content",0),B()),2&o&&(j(1),q("ngIf",!c.label&&c.addGrid()),j(1),q("ngClass",c.controlClass()),j(1),q("ngClass",c.wrapperClass()),j(2),q("ngIf",c.showInvalid),j(1),q("ngIf",c.showValid),j(1),q("ngIf",c.showHelper),j(1),q("ngIf",c.showInvalid),j(1),q("ngIf",c.showValid))},directives:[Mn,_s,xi,zr],encapsulation:2}),l})(),wJ=(()=>{class l extends Ou{constructor(o,c,u,h,d){super(o,TJ,c,u,h,d),this.index=1}}return l.\u0275fac=function(o){return new(o||l)(O(qn),O(Qn),O(to,10),O(tr),O(kt))},l.\u0275dir=Ze({type:l,selectors:[["","clrSelect",""]],hostVars:2,hostBindings:function(o,c){2&o&&lt("clr-select",!0)},features:[on]}),l})(),$6e=(()=>{class l{constructor(){li.addIcons(Kl,Jl)}}return l.\u0275fac=function(o){return new(o||l)},l.\u0275mod=Yt({type:l}),l.\u0275inj=jt({imports:[[sr,kh,gi,Uo],Uo]}),l})(),Z6e=(()=>{class l{constructor(){li.addIcons(Kl,Jl)}}return l.\u0275fac=function(o){return new(o||l)},l.\u0275mod=Yt({type:l}),l.\u0275inj=jt({imports:[[sr,kh,gi,Uo],Uo]}),l})(),CJ=(()=>{class l extends Nu{constructor(o,c,u,h,d,f){super(f,o,c,u),this.renderer=h,this.idService=d,this.ifControlStateService=f,this._hasProgress=!1}set hasProgress(o){const c=!!o;c!==this._hasProgress&&(this._hasProgress=c)}get hasProgress(){return this._hasProgress}getRangeProgressFillWidth(){const o=this.renderer.selectRootElement("[clrRange]#"+this.idService.id),u=+o.min;let h=+o.max;return 0===u&&0===h&&(h=100),100*((this.control&&void 0!==this.control.value?this.control.value:(u+h)/2)-u)/(h-u)*o.offsetWidth/100+"px"}}return l.\u0275fac=function(o){return new(o||l)(O(Ka,8),O(zs),O(qi),O(tr),O(Bo),O(rs))},l.\u0275cmp=Qe({type:l,selectors:[["clr-range-container"]],hostVars:6,hostBindings:function(o,c){2&o&&lt("clr-form-control",!0)("clr-form-control-disabled",null==c.control?null:c.control.disabled)("clr-row",c.addGrid())},inputs:{hasProgress:["clrRangeHasProgress","hasProgress"]},features:[Mt([rs,qi,Bo,zs]),on],ngContentSelectors:ZVe,decls:11,vars:10,consts:[[4,"ngIf"],[1,"clr-control-container",3,"ngClass"],[1,"clr-range-wrapper"],["class","fill-input",3,"width",4,"ngIf"],["class","clr-validate-icon","status","danger","shape","exclamation-circle","aria-hidden","true",4,"ngIf"],["class","clr-validate-icon","shape","check-circle","status","success","aria-hidden","true",4,"ngIf"],[1,"fill-input"],["status","danger","shape","exclamation-circle","aria-hidden","true",1,"clr-validate-icon"],["shape","check-circle","status","success","aria-hidden","true",1,"clr-validate-icon"]],template:function(o,c){1&o&&(Lt(YVe),Be(0),le(1,zVe,1,0,"label",0),V(2,"div",1),V(3,"div",2),Be(4,1),le(5,HVe,1,2,"span",3),le(6,jVe,1,0,"cds-icon",4),le(7,WVe,1,0,"cds-icon",5),B(),le(8,qVe,1,0,"ng-content",0),le(9,XVe,1,0,"ng-content",0),le(10,$Ve,1,0,"ng-content",0),B()),2&o&&(j(1),q("ngIf",!c.label&&c.addGrid()),j(1),q("ngClass",c.controlClass()),j(1),lt("progress-fill",c.hasProgress),j(2),q("ngIf",c.hasProgress),j(1),q("ngIf",c.showInvalid),j(1),q("ngIf",c.showValid),j(1),q("ngIf",c.showHelper),j(1),q("ngIf",c.showInvalid),j(1),q("ngIf",c.showValid))},directives:[Mn,_s,xi,zr],encapsulation:2}),l})(),K6e=(()=>{class l extends Ou{constructor(o,c,u,h,d){super(o,CJ,c,u,h,d)}}return l.\u0275fac=function(o){return new(o||l)(O(qn),O(Qn),O(to,10),O(tr),O(kt))},l.\u0275dir=Ze({type:l,selectors:[["","clrRange",""]],hostVars:2,hostBindings:function(o,c){2&o&&lt("clr-range",!0)},features:[on]}),l})(),J6e=(()=>{class l{constructor(){li.addIcons(Kl,Jl)}}return l.\u0275fac=function(o){return new(o||l)},l.\u0275mod=Yt({type:l}),l.\u0275inj=jt({imports:[[sr,Uo,yA,gi],Uo]}),l})(),tze=(()=>{class l{constructor(){li.addIcons(Kl,Jl)}}return l.\u0275fac=function(o){return new(o||l)},l.\u0275mod=Yt({type:l}),l.\u0275inj=jt({imports:[[sr,bJ,gi]]}),l})();let u0=(()=>{class l{constructor(){this.loading=!1,this._currentInput="",this._inputChanged=new ni(""),this.inputChanged=this._inputChanged.asObservable(),this._selectionChanged=new qD(1)}get currentInput(){return this._currentInput}set currentInput(o){""===o&&!this.multiselectable&&this.setSelectionValue(null),this._currentInput=o,this._inputChanged.next(o)}get selectionChanged(){return this._selectionChanged.asObservable()}select(o){null==o||this.selectionModel.containsItem(o)||(this.selectionModel.select(o),this._selectionChanged.next(this.selectionModel))}toggle(o){null!=o&&(this.selectionModel.containsItem(o)?this.selectionModel.unselect(o):this.selectionModel.select(o),this._selectionChanged.next(this.selectionModel))}unselect(o){null==o||!this.selectionModel.containsItem(o)||(this.selectionModel.unselect(o),this._selectionChanged.next(this.selectionModel))}get multiselectable(){return this.selectionModel instanceof class{containsItem(a){return!!this.model&&this.model.includes(a)}select(a){this.addItem(a)}unselect(a){this.removeItem(a)}isEmpty(){return!(this.model&&this.model.length>0)}pop(){let a;return this.model&&this.model.length>0&&(a=this.model[this.model.length-1],this.removeItem(a)),a}toString(a,o=-1){let c="";return this.model&&(o>-1?this.model[o]&&(c+=a&&this.model[o][a]?this.model[o][a]:this.model[o].toString()):this.model.forEach(u=>{c+=a&&u[a]?u[a]:u.toString(),c+=" "})),c.trim()}addItem(a){this.containsItem(a)||(this.model=this.model||[],this.model.push(a))}removeItem(a){if(null==this.model)return;const o=this.model.indexOf(a);o>-1&&this.model.splice(o,1),0===this.model.length&&(this.model=null)}}}setSelectionValue(o){!this.selectionModel||this.selectionModel.model===o||!this.selectionModel.model&&!o||(this.selectionModel.model=o,this._selectionChanged.next(this.selectionModel))}}return l.\u0275fac=function(o){return new(o||l)},l.\u0275prov=Xe({token:l,factory:l.\u0275fac}),l})();class DA{}function EJ(l){return[Sa,l,{provide:DA,useExisting:l}]}var Qa=(()=>(function(l){l.UP="up",l.DOWN="down",l.LEFT="left",l.RIGHT="right"}(Qa||(Qa={})),Qa))();class nze extends class{containsItem(a){return this.model===a}select(a){this.model=a}unselect(a){this.containsItem(a)&&(this.model=null)}isEmpty(){return!this.model}pop(){const a=this.model;return this.model=null,a}toString(a){return this.model?a&&this.model[a]?this.model[a]:this.model.toString():""}}{constructor(){super(...arguments),this._focusChanged=new ni(null)}get focusChanged(){return this._focusChanged.asObservable()}select(a){this.model!==a&&(this.model=a,this._focusChanged.next(a))}}EJ((()=>{class l{constructor(o,c,u,h,d){this.id=o,this.toggleService=u,this.selectionService=h,this.platformId=d,this.pseudoFocus=new nze,this.optionData=[],this.handleFocusSubscription(),this.renderer=c.createRenderer(null,null)}handleFocusSubscription(){this.toggleService.openChange.subscribe(o=>{o||(this.pseudoFocus.model=null)})}get trigger(){return this._trigger}set trigger(o){this._trigger=o,this.addFocusOnBlurListener(o)}get listbox(){return this._listbox}set listbox(o){this._listbox=o,this.addFocusOnBlurListener(o)}get textInput(){return this._textInput}set textInput(o){this._textInput=o,this.renderer.listen(o,"keydown",c=>!this.handleTextInput(c)),this.addFocusOnBlurListener(o)}moveFocusTo(o){let c=this.optionData.findIndex(u=>u.equals(this.pseudoFocus.model));o===Qa.UP?-1===c||0===c?c=this.optionData.length-1:c--:o===Qa.DOWN&&(-1===c||c===this.optionData.length-1?c=0:c++),this.pseudoFocus.select(this.optionData[c]),this.pseudoFocus.model&&this.pseudoFocus.model.el&&this.pseudoFocus.model.el.scrollIntoView({behavior:"smooth",block:"center",inline:"nearest"})}openAndMoveTo(o){this.toggleService.open?this.moveFocusTo(o):(this.toggleService.openChange.pipe(Hf(1)).subscribe(c=>{c&&this.moveFocusTo(o)}),this.toggleService.open=!0)}handleTextInput(o){let c=!1;const u=k1(o.key);if(o)switch(u){case rr.Enter:this.toggleService.open&&this.pseudoFocus.model&&(this.selectionService.multiselectable?this.selectionService.toggle(this.pseudoFocus.model.value):this.selectionService.select(this.pseudoFocus.model.value),c=!0);break;case rr.Space:this.toggleService.open||(this.toggleService.open=!0,c=!0);break;case rr.ArrowUp:this.preventViewportScrolling(o),this.openAndMoveTo(Qa.UP),c=!0;break;case rr.ArrowDown:this.preventViewportScrolling(o),this.openAndMoveTo(Qa.DOWN),c=!0;break;default:o.key!==rr.Tab&&(!this.selectionService.multiselectable||o.key!==rr.Backspace)&&o.key!==rr.Escape&&!this.toggleService.open&&(this.toggleService.open=!0)}return c}preventViewportScrolling(o){o.preventDefault(),o.stopImmediatePropagation()}focusInput(){this.textInput&&ti(this.platformId)&&this.textInput.focus()}addFocusOnBlurListener(o){ti(this.platformId)&&this.renderer.listen(o,"blur",c=>{this.focusOutOfComponent(c)&&(this.toggleService.open=!1,this.componentCdRef&&this.componentCdRef.detectChanges())})}focusOutOfComponent(o){const c=o.relatedTarget||document.activeElement;return!(this.textInput.contains(c)||this.trigger.contains(c)||this.listbox.contains(c))}focusFirstActive(){if(this.optionData.length>0)if(this.selectionService.selectionModel.isEmpty())this.pseudoFocus.select(this.optionData[0]);else{let o;o=this.selectionService.multiselectable?this.selectionService.selectionModel.model[0]:this.selectionService.selectionModel.model;const c=this.optionData.find(u=>u.value===o);this.pseudoFocus.select(c)}}addOptionValues(o){this.optionData=o}}return l.\u0275fac=function(o){return new(o||l)(be(ro),be(Bf),be(ii),be(u0),be(Ui))},l.\u0275prov=Xe({token:l,factory:l.\u0275fac}),l})());const Dp=new Sn("POPOVER_HOST_ANCHOR");let IA=(()=>{class l{constructor(o){this.renderer=o,this._unlistenFuncs=[]}get current(){return this._current}reset(o){this._current=o}listenToArrowKeys(o){this._unlistenFuncs.push(this.renderer.listen(o,"keydown.arrowup",()=>!this.move(Qa.UP))),this._unlistenFuncs.push(this.renderer.listen(o,"keydown.arrowdown",()=>!this.move(Qa.DOWN))),this._unlistenFuncs.push(this.renderer.listen(o,"keydown.arrowleft",()=>!this.move(Qa.LEFT))),this._unlistenFuncs.push(this.renderer.listen(o,"keydown.arrowright",()=>!this.move(Qa.RIGHT)))}registerContainer(o){this.renderer.setAttribute(o,"tabindex","0"),this.listenToArrowKeys(o),this._unlistenFuncs.push(this.renderer.listen(o,"keydown.space",()=>!this.activateCurrent())),this._unlistenFuncs.push(this.renderer.listen(o,"keydown.enter",()=>!this.activateCurrent()))}moveTo(o){void 0!==o&&(this.current&&this.current.blur(),o.focus(),this._current=o)}move(o){let c=!1;if(this.current){const u=this.current[o];u&&(function(l){return!!l&&(l instanceof yt||"function"==typeof l.lift&&"function"==typeof l.subscribe)}(u)?u:qt(u)).subscribe(d=>{d&&(this.moveTo(d),c=!0)})}return c}activateCurrent(){return!(!this.current||!this.current.activate||(this.current.activate(),0))}detachListeners(){this._unlistenFuncs.forEach(o=>o())}}return l.\u0275fac=function(o){return new(o||l)(be(tr))},l.\u0275prov=Xe({token:l,factory:l.\u0275fac}),l})();new Zo,new Qc;let d0=(()=>{class l{get spinnerClass(){return!0}get inlineClass(){return this._inline}set clrInline(o){this._inline=Uc(o)}get inverseClass(){return this._inverse}set clrInverse(o){this._inverse=Uc(o)}get smallClass(){return this._small}set clrSmall(o){this._small=Uc(o)}get mediumClass(){return!this._small&&this._medium}set clrMedium(o){this._medium=Uc(o)}}return l.\u0275fac=function(o){return new(o||l)},l.\u0275cmp=Qe({type:l,selectors:[["clr-spinner"]],hostVars:11,hostBindings:function(o,c){2&o&&(Ke("aria-busy",!0),lt("spinner",c.spinnerClass)("spinner-inline",c.inlineClass)("spinner-inverse",c.inverseClass)("spinner-sm",c.smallClass)("spinner-md",c.mediumClass))},inputs:{clrInline:"clrInline",clrInverse:"clrInverse",clrSmall:"clrSmall",clrMedium:"clrMedium"},ngContentSelectors:Pn,decls:1,vars:0,template:function(o,c){1&o&&(Lt(),Be(0))},encapsulation:2}),l})(),H1=(()=>{class l{}return l.\u0275fac=function(o){return new(o||l)},l.\u0275mod=Yt({type:l}),l.\u0275inj=jt({imports:[[sr]]}),l})(),AJ=(()=>{class l{}return l.\u0275fac=function(o){return new(o||l)},l.\u0275mod=Yt({type:l}),l.\u0275inj=jt({imports:[[sr]]}),l})(),uze=(()=>{class l{constructor(){li.addIcons(Kl,Jl,G_,_1)}}return l.\u0275fac=function(o){return new(o||l)},l.\u0275mod=Yt({type:l}),l.\u0275inj=jt({imports:[[sr,kh,gi,AJ,Uo,Bc,V1,H1],Uo,Bc]}),l})(),IJ=(()=>{class l{}return l.\u0275fac=function(o){return new(o||l)},l.\u0275mod=Yt({type:l}),l.\u0275inj=jt({imports:[[sr],Uo,y6e,uze,G6e,bJ,W6e,X6e,$6e,Z6e,J6e,tze]}),l})(),d4=(()=>{class l{}return l.\u0275fac=function(o){return new(o||l)},l.\u0275mod=Yt({type:l}),l.\u0275inj=jt({imports:[[sr]]}),l})(),dze=(()=>{class l{}return l.\u0275fac=function(o){return new(o||l)},l.\u0275mod=Yt({type:l}),l.\u0275inj=jt({imports:[[sr]]}),l})(),rc=(()=>{class l{userDefinedWidth(o){o.classList.add("datagrid-cell-width-zero");const c=this.clientRect(o).width;return o.classList.remove("datagrid-cell-width-zero"),c}scrollBarWidth(o){return o.offsetWidth-o.clientWidth}scrollWidth(o){return o.scrollWidth||0}computedHeight(o){return parseInt(getComputedStyle(o).getPropertyValue("height"),10)}clientRect(o){const c=o.getBoundingClientRect();return{top:parseInt(c.top,10),bottom:parseInt(c.bottom,10),left:parseInt(c.left,10),right:parseInt(c.right,10),width:parseInt(c.width,10),height:parseInt(c.height,10)}}minWidth(o){return parseInt(getComputedStyle(o).getPropertyValue("min-width"),10)}focus(o){o.focus()}}return l.\u0275fac=function(o){return new(o||l)},l.\u0275prov=Xe({token:l,factory:l.\u0275fac}),l})();class rf{constructor(a){this.dragPosition=a.dragPosition,this.group=a.group,this.dragDataTransfer=a.dragDataTransfer,this.dropPointPosition=a.dropPointPosition}}var Ta=(()=>(function(l){l[l.DRAG_START=0]="DRAG_START",l[l.DRAG_MOVE=1]="DRAG_MOVE",l[l.DRAG_END=2]="DRAG_END",l[l.DRAG_ENTER=3]="DRAG_ENTER",l[l.DRAG_LEAVE=4]="DRAG_LEAVE",l[l.DROP=5]="DROP"}(Ta||(Ta={})),Ta))();let RJ=(()=>{class l{constructor(){this.dragStart=new tt,this.dragMove=new tt,this.dragEnd=new tt,this.drop=new tt}get dragStarted(){return this.dragStart.asObservable()}get dragMoved(){return this.dragMove.asObservable()}get dragEnded(){return this.dragEnd.asObservable()}get dropped(){return this.drop.asObservable()}broadcast(o){switch(o.type){case Ta.DRAG_START:this.dragStart.next(o);break;case Ta.DRAG_MOVE:this.dragMove.next(o);break;case Ta.DRAG_END:this.dragEnd.next(o);break;case Ta.DROP:this.drop.next(o)}}}return l.\u0275fac=function(o){return new(o||l)},l.\u0275prov=Xe({factory:function(){return new l},token:l,providedIn:"root"}),l})(),j1=(()=>{class l{constructor(o,c,u){this.ngZone=o,this.renderer=c,this.eventBus=u,this.listeners=[],this.dragStart=new tt,this.dragMove=new tt,this.dragEnd=new tt,this.hasDragStarted=!1,this.dragStartDelay=0}get dragStarted(){return this.dragStart.asObservable()}get dragMoved(){return this.dragMove.asObservable()}get dragEnded(){return this.dragEnd.asObservable()}get dragStartPosition(){return this.initialPosition}attachDragListeners(o){this.draggableEl=o,this.listeners.push(this.customDragEvent(this.draggableEl,"mousedown","mousemove","mouseup")),this.listeners.push(this.customDragEvent(this.draggableEl,"touchstart","touchmove","touchend"))}detachDragListeners(){this.listeners&&this.listeners.map(o=>o()),this.nestedListeners&&this.nestedListeners.map(o=>o()),this.checkDragStartBoundaryListener&&this.checkDragStartBoundaryListener()}getNativeEventObject(o){return o.hasOwnProperty("changedTouches")?o.changedTouches[0]:o}customDragEvent(o,c,u,h){return this.renderer.listen(o,c,d=>{this.initialPosition={pageX:this.getNativeEventObject(d).pageX,pageY:this.getNativeEventObject(d).pageY},this.nestedListeners=[],this.nestedListeners.push(this.renderer.listen("document","selectstart",f=>{f.preventDefault(),f.stopImmediatePropagation()})),this.ngZone.runOutsideAngular(()=>{this.checkDragStartBoundary(u),this.dragStartDelayTimeout=setTimeout(()=>{this.checkDragStartBoundaryListener&&this.checkDragStartBoundaryListener(),this.hasDragStarted=!0,this.broadcast(d,Ta.DRAG_START),this.nestedListeners.push(this.renderer.listen("document",u,f=>{f.stopImmediatePropagation(),this.hasDragStarted&&this.broadcast(f,Ta.DRAG_MOVE)}))},this.dragStartDelay)}),this.nestedListeners.push(this.renderer.listen("document",h,f=>{this.hasDragStarted&&(this.hasDragStarted=!1,this.broadcast(f,Ta.DRAG_END)),clearTimeout(this.dragStartDelayTimeout),this.nestedListeners.map(m=>m()),this.checkDragStartBoundaryListener&&this.checkDragStartBoundaryListener()}))})}checkDragStartBoundary(o){this.checkDragStartBoundaryListener=this.renderer.listen("document",o,c=>{const u=Math.abs(this.getNativeEventObject(c).pageX-this.initialPosition.pageX),h=Math.abs(this.getNativeEventObject(c).pageY-this.initialPosition.pageY);(u>1||h>1)&&(clearTimeout(this.dragStartDelayTimeout),this.checkDragStartBoundaryListener&&this.checkDragStartBoundaryListener())})}broadcast(o,c){const u=this.generateDragEvent(o,c);switch(u.type){case Ta.DRAG_START:this.dragStart.next(u);break;case Ta.DRAG_MOVE:this.dragMove.next(u);break;case Ta.DRAG_END:this.dragEnd.next(u)}u.ghostElement=this.ghostElement,u.dropPointPosition=this.dropPointPosition,this.eventBus.broadcast(u)}generateDragEvent(o,c){const u=this.getNativeEventObject(o);return{type:c,dragPosition:{pageX:u.pageX,pageY:u.pageY,moveX:u.pageX-this.initialPosition.pageX,moveY:u.pageY-this.initialPosition.pageY},group:this.group,dragDataTransfer:this.dragDataTransfer,ghostElement:this.ghostElement}}}return l.\u0275fac=function(o){return new(o||l)(be(Fn),be(tr),be(RJ))},l.\u0275prov=Xe({token:l,factory:l.\u0275fac}),l})(),f4=(()=>{class l{constructor(o){this.domAdapter=o}capture(o,c){this.draggableElClientRect=this.domAdapter.clientRect(o),this.snapshotDragEvent=c}discard(){delete this.draggableElClientRect,delete this.snapshotDragEvent}get hasDraggableState(){return!!this.snapshotDragEvent&&!!this.draggableElClientRect}get clientRect(){return this.draggableElClientRect}get dragEvent(){return this.snapshotDragEvent}}return l.\u0275fac=function(o){return new(o||l)(be(rc))},l.\u0275prov=Xe({token:l,factory:l.\u0275fac}),l})(),PJ=(()=>{class l{constructor(o,c,u,h,d){if(this.el=o,this.dragEventListener=c,this.draggableSnapshot=u,this.renderer=h,this.ngZone=d,this.subscriptions=[],this.leaveAnimConfig={value:0,params:{top:"0px",left:"0px"}},!this.dragEventListener||!this.draggableSnapshot)throw new Error("The clr-draggable-ghost component can only be used inside of a clrDraggable directive.");this.draggableGhostEl=this.el.nativeElement,this.renderer.addClass(this.draggableGhostEl,"draggable-ghost"),this.dragEventListener.ghostElement=this.draggableGhostEl,this.setDefaultGhostSize(this.draggableGhostEl);const f={top:this.draggableSnapshot.hasDraggableState?this.draggableSnapshot.dragEvent.dragPosition.pageY-this.draggableSnapshot.clientRect.top:0,left:this.draggableSnapshot.hasDraggableState?this.draggableSnapshot.dragEvent.dragPosition.pageX-this.draggableSnapshot.clientRect.left:0};let m=!1;this.subscriptions.push(this.dragEventListener.dragMoved.subscribe(g=>{m||(this.draggableSnapshot.hasDraggableState?this.animateToOnLeave(`${this.draggableSnapshot.clientRect.top}px`,`${this.draggableSnapshot.clientRect.left}px`):this.animateToOnLeave(`${this.dragEventListener.dragStartPosition.pageY}px`,`${this.dragEventListener.dragStartPosition.pageY}px`),m=!0);const y=this.findTopLeftPosition(g.dragPosition,f);this.setPositionStyle(this.draggableGhostEl,y.pageX,y.pageY),this.dragEventListener.dropPointPosition=this.findDropPointPosition(y)}))}setDefaultGhostSize(o){this.draggableSnapshot.hasDraggableState&&this.setSizeStyle(o,this.draggableSnapshot.clientRect.width,this.draggableSnapshot.clientRect.height)}animateToOnLeave(o,c){this.ngZone.run(()=>{this.leaveAnimConfig={value:0,params:{top:o,left:c}}})}findTopLeftPosition(o,c){return{pageX:o.pageX-c.left,pageY:o.pageY-c.top}}findDropPointPosition(o){return this.draggableSnapshot.hasDraggableState?{pageX:o.pageX+this.draggableSnapshot.clientRect.width/2,pageY:o.pageY+this.draggableSnapshot.clientRect.height/2}:o}setSizeStyle(o,c,u){this.renderer.setStyle(o,"width",`${c}px`),this.renderer.setStyle(o,"height",`${u}px`)}setPositionStyle(o,c,u){this.renderer.setStyle(o,"left",`${c}px`),this.renderer.setStyle(o,"top",`${u}px`),this.renderer.setStyle(o,"visibility","visible")}ngOnDestroy(){this.subscriptions.forEach(o=>o.unsubscribe())}}return l.\u0275fac=function(o){return new(o||l)(O(kt),O(j1,8),O(f4,8),O(tr),O(Fn))},l.\u0275cmp=Qe({type:l,selectors:[["clr-draggable-ghost"]],hostVars:1,hostBindings:function(o,c){2&o&&mx("@leaveAnimation",c.leaveAnimConfig)},ngContentSelectors:Pn,decls:1,vars:0,template:function(o,c){1&o&&(Lt(),Be(0))},encapsulation:2,data:{animation:[Ql("leaveAnimation",[eo(":leave",[kr({left:"*",top:"*"}),ra("0.2s ease-in-out",kr({top:"{{top}}",left:"{{left}}"}))])])]}}),l})(),LJ=(()=>{class l{constructor(o,c,u){if(this.template=o,this.container=c,this.dragEventListener=u,this.subscriptions=[],!this.dragEventListener||!this.container)throw new Error("The *clrIfDragged directive can only be used inside of a clrDraggable directive.");this.subscriptions.push(this.dragEventListener.dragStarted.subscribe(()=>{this.container.createEmbeddedView(this.template)})),this.subscriptions.push(this.dragEventListener.dragEnded.subscribe(()=>{this.container.clear()}))}ngOnDestroy(){this.subscriptions.forEach(o=>o.unsubscribe())}}return l.\u0275fac=function(o){return new(o||l)(O(bi),O(qn,12),O(j1,8))},l.\u0275dir=Ze({type:l,selectors:[["","clrIfDragged",""]]}),l})(),p4=(()=>{class l{constructor(o,c){this.dragEventListener=o,this.renderer=c}get defaultHandleEl(){return this._defaultHandleEl}set defaultHandleEl(o){this._defaultHandleEl=o,this._customHandleEl||this.makeElementHandle(this._defaultHandleEl)}makeElementHandle(o){this._defaultHandleEl&&this._defaultHandleEl!==o&&this.renderer.removeClass(this._defaultHandleEl,"drag-handle"),this.dragEventListener.attachDragListeners(o),this.renderer.addClass(o,"drag-handle")}get customHandleEl(){return this._customHandleEl}registerCustomHandle(o){this.dragEventListener.detachDragListeners(),this._customHandleEl=o,this.makeElementHandle(this._customHandleEl)}unregisterCustomHandle(){this.dragEventListener.detachDragListeners(),this.renderer.removeClass(this._customHandleEl,"drag-handle"),delete this._customHandleEl,this._defaultHandleEl&&this.makeElementHandle(this._defaultHandleEl)}}return l.\u0275fac=function(o){return new(o||l)(be(j1),be(tr))},l.\u0275prov=Xe({token:l,factory:l.\u0275fac}),l})(),OJ=(()=>{class l{constructor(o){this.renderer=o}enter(){this.renderer.addClass(document.body,"in-drag")}exit(){this.renderer.removeClass(document.body,"in-drag")}}return l.\u0275fac=function(o){return new(o||l)(be(tr))},l.\u0275prov=Xe({token:l,factory:l.\u0275fac}),l})(),NJ=(()=>{class l{constructor(o,c,u,h,d,f,m,g){this.el=o,this.dragEventListener=c,this.dragHandleRegistrar=u,this.viewContainerRef=h,this.cfr=d,this.injector=f,this.draggableSnapshot=m,this.globalDragMode=g,this.subscriptions=[],this.dragOn=!1,this.dragStartEmitter=new pt,this.dragMoveEmitter=new pt,this.dragEndEmitter=new pt,this.draggableEl=this.el.nativeElement,this.componentFactory=this.cfr.resolveComponentFactory(PJ)}set dataTransfer(o){this.dragEventListener.dragDataTransfer=o}set group(o){this.dragEventListener.group=o}set dragStartDelay(o){"number"==typeof o?this.dragEventListener.dragStartDelay=o:"string"==typeof o&&(this.dragEventListener.dragStartDelay=parseInt(o,10)||0)}createDefaultGhost(o){this.draggableSnapshot.capture(this.draggableEl,o),this.viewContainerRef.createComponent(this.componentFactory,0,this.injector,[[this.draggableEl.cloneNode(!0)]])}destroyDefaultGhost(){this.viewContainerRef.clear(),this.draggableSnapshot.discard()}ngAfterContentInit(){this.dragHandleRegistrar.defaultHandleEl=this.draggableEl,this.subscriptions.push(this.dragEventListener.dragStarted.subscribe(o=>{this.globalDragMode.enter(),this.dragOn=!0,this.customGhost||this.createDefaultGhost(o),this.dragStartEmitter.emit(new rf(o))})),this.subscriptions.push(this.dragEventListener.dragMoved.subscribe(o=>{this.dragMoveEmitter.emit(new rf(o))})),this.subscriptions.push(this.dragEventListener.dragEnded.subscribe(o=>{this.globalDragMode.exit(),this.dragOn=!1,this.customGhost||this.destroyDefaultGhost(),this.dragEndEmitter.emit(new rf(o))}))}ngOnDestroy(){this.subscriptions.forEach(o=>o.unsubscribe()),this.dragEventListener.detachDragListeners()}}return l.\u0275fac=function(o){return new(o||l)(O(kt),O(j1),O(p4),O(qn),O(wc),O(Qn),O(f4),O(OJ))},l.\u0275dir=Ze({type:l,selectors:[["","clrDraggable",""]],contentQueries:function(o,c,u){if(1&o&&Nn(u,LJ,5),2&o){let h;It(h=Rt())&&(c.customGhost=h.first)}},hostVars:4,hostBindings:function(o,c){2&o&&lt("draggable",!0)("being-dragged",c.dragOn)},inputs:{dataTransfer:["clrDraggable","dataTransfer"],group:["clrGroup","group"],dragStartDelay:["clrDragStartDelay","dragStartDelay"]},outputs:{dragStartEmitter:"clrDragStart",dragMoveEmitter:"clrDragMove",dragEndEmitter:"clrDragEnd"},features:[Mt([j1,p4,f4,OJ,rc])]}),l})(),FJ=(()=>{class l{}return l.\u0275fac=function(o){return new(o||l)},l.\u0275mod=Yt({type:l}),l.\u0275inj=jt({imports:[[sr]]}),l})(),PA=(()=>{class l{constructor(o,c){this.element=o,this.domAdapter=c,this.startHeight=0}get expandAnimation(){return{value:this.clrExpandTrigger,params:{startHeight:this.startHeight}}}animationDone(){this.updateStartHeight()}updateStartHeight(){this.startHeight=this.domAdapter.computedHeight(this.element.nativeElement)||0}}return l.\u0275fac=function(o){return new(o||l)(O(kt),O(rc))},l.\u0275cmp=Qe({type:l,selectors:[["clr-expandable-animation"]],hostVars:1,hostBindings:function(o,c){1&o&&KP("@expandAnimation.done",function(){return c.animationDone()}),2&o&&mx("@expandAnimation",c.expandAnimation)},inputs:{clrExpandTrigger:"clrExpandTrigger"},features:[Mt([rc])],ngContentSelectors:Pn,decls:1,vars:0,template:function(o,c){1&o&&(Lt(),Be(0))},styles:["[_nghost-%COMP%] {\n        display: block;\n      }"],data:{animation:[Ql("expandAnimation",[eo("true <=> false",[kr({height:"{{startHeight}}px",overflow:"hidden"}),ra("0.2s ease-in-out",kr({height:"*"}))])])]}}),l})(),kJ=(()=>{class l{}return l.\u0275fac=function(o){return new(o||l)},l.\u0275mod=Yt({type:l}),l.\u0275inj=jt({imports:[[sr]]}),l})();const mze={provide:new Sn("FOCUS_ON_VIEW_INIT"),useValue:!0};let Ag=(()=>{class l{}return l.\u0275fac=function(o){return new(o||l)},l.\u0275mod=Yt({type:l}),l.\u0275inj=jt({providers:[mze],imports:[[sr]]}),l})();class LA{}let W1=(()=>{class l{constructor(){this._change=new tt,this.nbChanges=0}get change(){return this._change.asObservable()}changeStart(){this.nbChanges++}changeDone(){0==--this.nbChanges&&this._change.next()}}return l.\u0275fac=function(o){return new(o||l)},l.\u0275prov=Xe({token:l,factory:l.\u0275fac}),l})(),Ap=(()=>{class l{constructor(o){this.stateDebouncer=o,this.preventEmit=!1,this.activated=!1,this._size=0,this._change=new tt,this._sizeChange=new tt,this._current=1}get size(){return this._size}set size(o){const c=this._size;o!==c&&(this.preventEmit||this.stateDebouncer.changeStart(),this._size=o,this._current=0===o?1:Math.floor(c/o*(this._current-1))+1,this.preventEmit||(this._change.next(this._current),this._sizeChange.next(this._size),this.stateDebouncer.changeDone())),this.preventEmit=!1}get totalItems(){return this._totalItems||0}set totalItems(o){this._totalItems=o,this.current>this.last&&(this.current=this.last)}get last(){return this._last?this._last:this.size>0&&this.totalItems?Math.ceil(this.totalItems/this.size):1}set last(o){this._last=o}get change(){return this._change.asObservable()}get sizeChange(){return this._sizeChange.asObservable()}get current(){return this._current}set current(o){o!==this._current&&(this.stateDebouncer.changeStart(),this._current=o,this._change.next(o),this.stateDebouncer.changeDone())}previous(){this.current>1&&this.current--}next(){this.current<this.last&&this.current++}get firstItem(){return 0===this._totalItems?-1:0===this.size?0:(this.current-1)*this.size}get lastItem(){if(0===this._totalItems)return-1;if(0===this.size)return this.totalItems-1;let o=this.current*this.size-1;return this.totalItems&&(o=Math.min(o,this.totalItems-1)),o}resetPageSize(o=!1){this.preventEmit=o,this.size=0}}return l.\u0275fac=function(o){return new(o||l)(be(W1))},l.\u0275prov=Xe({token:l,factory:l.\u0275fac}),l})(),sf=(()=>{class l{constructor(o,c){this._page=o,this.stateDebouncer=c,this._change=new tt,this._all=[]}get change(){return this._change.asObservable()}hasActiveFilters(){for(const{filter:o}of this._all)if(o&&o.isActive())return!0;return!1}getActiveFilters(){const o=[];for(const{filter:c}of this._all)c&&c.isActive()&&o.push(c);return o}add(o){const c=o.changes.subscribe(()=>this.resetPageAndEmitFilterChange([o]));let u=!1;const h=new OA(o,()=>{if(u)return;c.unsubscribe();const d=this._all.findIndex(f=>f.filter===o);d>=0&&this._all.splice(d,1),o.isActive()&&this.resetPageAndEmitFilterChange([]),u=!0});return this._all.push(h),o.isActive()&&this.resetPageAndEmitFilterChange([o]),h}accepts(o){for(const{filter:c}of this._all)if(c&&c.isActive()&&!c.accepts(o))return!1;return!0}resetPageAndEmitFilterChange(o){this.stateDebouncer.changeStart(),this._page.current=1,this._change.next(o),this.stateDebouncer.changeDone()}}return l.\u0275fac=function(o){return new(o||l)(be(Ap),be(W1))},l.\u0275prov=Xe({token:l,factory:l.\u0275fac}),l})();class OA{constructor(a,o){this.filter=a,this.unregister=o}}let NA=(()=>{class l{constructor(o){this.filters=o}get filter(){return this.registered&&this.registered.filter}setFilter(o){this.deleteFilter(),o instanceof OA?this.registered=o:o&&(this.registered=this.filters.add(o))}deleteFilter(){this.registered&&(this.registered.unregister(),delete this.registered)}ngOnDestroy(){this.deleteFilter()}}return l.\u0275fac=function(o){return new(o||l)(O(sf))},l.\u0275dir=Ze({type:l}),l})(),q1=(()=>{class l extends NA{constructor(o,c,u,h,d){super(o),this.commonStrings=c,this.smartToggleService=u,this.platformId=h,this.popoverId=d,this.subs=[],this.ariaExpanded=!1,this.smartPosition={axis:To.VERTICAL,side:Za.AFTER,anchor:Vr.END,content:Vr.END},this._open=!1,this.openChange=new pt(!1),this.subs.push(u.openChange.subscribe(f=>{this.open=f,this.ariaExpanded=f}))}get open(){return this._open}set open(o){this.open!==(o=!!o)&&(this.smartToggleService.open=o,this.openChange.emit(o),!o&&ti(this.platformId)&&this.anchor.nativeElement.focus(),this._open=o)}set customFilter(o){this.setFilter(o)}get active(){return!!this.filter&&this.filter.isActive()}ngOnDestroy(){super.ngOnDestroy(),this.subs.forEach(o=>o.unsubscribe())}}return l.\u0275fac=function(o){return new(o||l)(O(sf),O(qr),O(ii),O(Ui),O(ro))},l.\u0275cmp=Qe({type:l,selectors:[["clr-dg-filter"]],viewQuery:function(o,c){if(1&o&&Cr(EBe,5,kt),2&o){let u;It(u=Rt())&&(c.anchor=u.first)}},inputs:{open:["clrDgFilterOpen","open"],customFilter:["clrDgFilter","customFilter"]},outputs:{openChange:"clrDgFilterOpenChange"},features:[Mt([{provide:LA,useExisting:l},Sa]),on],ngContentSelectors:Pn,decls:4,vars:13,consts:[["type","button","clrPopoverAnchor","","clrPopoverOpenCloseButton","",1,"datagrid-filter-toggle"],["anchor",""],["solid",""],["class","datagrid-filter","clrFocusTrap","",3,"id",4,"clrPopoverContent","clrPopoverContentAt","clrPopoverContentOutsideClickToClose","clrPopoverContentScrollToClose"],["clrFocusTrap","",1,"datagrid-filter",3,"id"],[1,"datagrid-filter-close-wrapper"],["type","button","clrPopoverCloseButton","",1,"close"],["shape","window-close"]],template:function(o,c){1&o&&(Lt(),V(0,"button",0,1),xe(2,"cds-icon",2),B(),le(3,MBe,5,2,"div",3)),2&o&&(lt("datagrid-filter-open",c.open)("datagrid-filtered",c.active),Ke("aria-label",c.commonStrings.keys.datagridFilterAriaLabel)("aria-expanded",c.ariaExpanded)("aria-controls",c.popoverId),j(2),Ke("status",c.active?"info":null)("shape",c.active?"filter-grid-circle":"filter-grid"),j(1),q("clrPopoverContent",c.open)("clrPopoverContentAt",c.smartPosition)("clrPopoverContentOutsideClickToClose",!0)("clrPopoverContentScrollToClose",!0))},directives:[s0,r0,zr,n0,Mp,oJ],encapsulation:2}),l})();class g4{constructor(a){this.prop=a,a.indexOf(".")>=0&&(this.splitProp=a.split("."))}getPropValue(a){if(this.splitProp){let o=a;for(const c of this.splitProp){if(null==o||void 0===o[c])return;o=o[c]}return o}return a[this.prop]}}class FA{constructor(a,o=!1){this.prop=a,this.exact=o,this.nestedProp=new g4(a)}accepts(a,o){const c=this.nestedProp.getPropValue(a);return void 0!==c&&(this.exact?(""+c).toLowerCase()===o:(""+c).toLowerCase().indexOf(o)>=0)}}class Ig{constructor(a){this.filterFn=a,this._changes=new tt,this._lowerCaseValue="",this._rawValue=""}get changes(){return this._changes.asObservable()}get lowerCaseValue(){return this._lowerCaseValue}get value(){return this._rawValue}set value(a){a||(a=""),a!==this._rawValue&&(this._rawValue=a,this._lowerCaseValue=a.toLowerCase().trim(),this._changes.next(a))}isActive(){return!!this.value}accepts(a){return this.filterFn.accepts(a,this.lowerCaseValue)}get state(){return this.filterFn instanceof FA?{property:this.filterFn.prop,value:this.value}:this}equals(a){return a instanceof Ig&&(a.filterFn instanceof FA?this.filterFn instanceof FA&&a.filterFn.prop===this.filterFn.prop&&a.value===this.value:a===this)}}let BJ=(()=>{class l extends NA{constructor(o,c,u,h){super(o),this.domAdapter=c,this.commonStrings=u,this.smartToggleService=h,this.subs=[],this.open=!1,this.filterValueChange=new pt}set customStringFilter(o){this.setFilter(o instanceof OA?o:new Ig(o)),this.initFilterValue&&(this.value=this.initFilterValue,delete this.initFilterValue)}ngAfterViewInit(){this.subs.push(this.smartToggleService.openChange.subscribe(o=>{this.open=o,setTimeout(()=>{this.domAdapter.focus(this.input.nativeElement)})}))}ngOnDestroy(){super.ngOnDestroy(),this.subs.forEach(o=>o.unsubscribe())}get value(){return this.filter.value}set value(o){this.filter&&"string"==typeof o?(o||(o=""),o!==this.filter.value&&(this.filter.value=o,this.filterValueChange.emit(o))):this.initFilterValue=o}}return l.\u0275fac=function(o){return new(o||l)(O(sf),O(rc),O(qr),O(ii))},l.\u0275cmp=Qe({type:l,selectors:[["clr-dg-string-filter"]],viewQuery:function(o,c){if(1&o&&(Cr(DBe,5),Cr(q1,5)),2&o){let u;It(u=Rt())&&(c.input=u.first),It(u=Rt())&&(c.filterContainer=u.first)}},inputs:{customStringFilter:["clrDgStringFilter","customStringFilter"],value:["clrFilterValue","value"]},outputs:{filterValueChange:"clrFilterValueChange"},features:[Mt([{provide:LA,useExisting:l}]),on],decls:3,vars:4,consts:[[3,"clrDgFilter","clrDgFilterOpen","clrDgFilterOpenChange"],["type","text","name","search",1,"clr-input",3,"ngModel","ngModelChange"],["input",""]],template:function(o,c){1&o&&(V(0,"clr-dg-filter",0),ze("clrDgFilterOpenChange",function(h){return c.open=h}),V(1,"input",1,2),ze("ngModelChange",function(h){return c.value=h}),B(),B()),2&o&&(q("clrDgFilter",c.registered)("clrDgFilterOpen",c.open),j(1),q("ngModel",c.value),Ke("aria-label",c.commonStrings.keys.filterItems))},directives:[q1,ec,$a,Cl],encapsulation:2}),l})();class kA{constructor(a,o=!1){this.prop=a,this.exact=o,this.nestedProp=new g4(a)}accepts(a,o,c){const u=this.nestedProp.getPropValue(a);return!(null!==o&&u<o||null!==c&&u>c)}}class Rg{constructor(a){this.filterFn=a,this._changes=new tt,this._low=null,this._high=null}get changes(){return this._changes.asObservable()}get value(){return[this._low,this._high]}set value(a){const o=a[0],c=a[1];(o!==this._low||c!==this._high)&&(this._low=o,this._high=c,this._changes.next([this._low,this._high]))}get low(){return this._low}set low(a){a!==this._low&&(this._low=a,this._changes.next([this._low,this._high]))}get high(){return this._high}set high(a){a!==this._high&&(this._high=a,this._changes.next([this._low,this._high]))}isActive(){return null!==this._low||null!==this.high}accepts(a){return this.filterFn.accepts(a,this._low,this._high)}get state(){return this.filterFn instanceof kA?{property:this.filterFn.prop,low:this._low,high:this._high}:this}equals(a){return a instanceof Rg&&(a.filterFn instanceof kA?this.filterFn instanceof kA&&a.filterFn.prop===this.filterFn.prop&&a.low===this._low&&a.high===this._high:a===this)}}let UJ=(()=>{class l extends NA{constructor(o,c,u,h){super(o),this.domAdapter=c,this.commonStrings=u,this.popoverToggleService=h,this.subscriptions=[],this.open=!1,this.filterValueChange=new pt}ngOnDestroy(){this.subscriptions.forEach(o=>{o.unsubscribe()})}set customNumericFilter(o){this.setFilter(o instanceof OA?o:new Rg(o)),this.initFilterValues&&(this.value=this.initFilterValues,delete this.initFilterValues)}ngAfterViewInit(){this.subscriptions.push(this.popoverToggleService.openChange.subscribe(o=>{this.open=o,setTimeout(()=>{this.domAdapter.focus(this.input.nativeElement)})}))}get value(){return[this.filter.low,this.filter.high]}set value(o){this.filter&&Array.isArray(o)?o&&(o[0]!==this.filter.low||o[1]!==this.filter.high)&&(this.filter.low="number"==typeof o[0]?o[0]:null,this.filter.high="number"==typeof o[1]?o[1]:null,this.filterValueChange.emit(o)):this.initFilterValues=o}get low(){return"number"==typeof this.filter.low&&isFinite(this.filter.low)?this.filter.low:null}set low(o){"number"==typeof o&&o!==this.filter.low?(this.filter.low=o,this.filterValueChange.emit([this.filter.low,this.filter.high])):"number"!=typeof o&&(this.filter.low=null,this.filterValueChange.emit([this.filter.low,this.filter.high]))}get high(){return"number"==typeof this.filter.high&&isFinite(this.filter.high)?this.filter.high:null}set high(o){"number"==typeof o&&o!==this.filter.high?(this.filter.high=o,this.filterValueChange.emit([this.filter.low,this.filter.high])):"number"!=typeof o&&(this.filter.high=null,this.filterValueChange.emit([this.filter.low,this.filter.high]))}}return l.\u0275fac=function(o){return new(o||l)(O(sf),O(rc),O(qr),O(ii))},l.\u0275cmp=Qe({type:l,selectors:[["clr-dg-numeric-filter"]],viewQuery:function(o,c){if(1&o&&(Cr(ABe,5),Cr(q1,5)),2&o){let u;It(u=Rt())&&(c.input=u.first),It(u=Rt())&&(c.filterContainer=u.first)}},inputs:{customNumericFilter:["clrDgNumericFilter","customNumericFilter"],value:["clrFilterValue","value"]},outputs:{filterValueChange:"clrFilterValueChange"},features:[Mt([{provide:LA,useExisting:l}]),on],decls:6,vars:8,consts:[[3,"clrDgFilter","clrDgFilterOpen","clrDgFilterOpenChange"],["type","number","name","low",1,"datagrid-numeric-filter-input",3,"ngModel","placeholder","ngModelChange"],["input_low",""],[1,"datagrid-filter-input-spacer"],["type","number","name","high",1,"datagrid-numeric-filter-input",3,"ngModel","placeholder","ngModelChange"],["input_high",""]],template:function(o,c){1&o&&(V(0,"clr-dg-filter",0),ze("clrDgFilterOpenChange",function(h){return c.open=h}),V(1,"input",1,2),ze("ngModelChange",function(h){return c.low=h}),B(),xe(3,"span",3),V(4,"input",4,5),ze("ngModelChange",function(h){return c.high=h}),B(),B()),2&o&&(q("clrDgFilter",c.registered)("clrDgFilterOpen",c.open),j(1),q("ngModel",c.low)("placeholder",c.commonStrings.keys.minValue),Ke("aria-label",c.commonStrings.keys.minValue),j(3),q("ngModel",c.high)("placeholder",c.commonStrings.keys.maxValue),Ke("aria-label",c.commonStrings.keys.maxValue))},directives:[q1,M1,ec,$a,Cl],encapsulation:2}),l})(),f0=(()=>{class l{constructor(){this._chocolate=new tt,this.disableChocolateCheck=!1}get chocolate(){return this._chocolate.asObservable()}ngAfterViewChecked(){this.disableChocolateCheck||this._chocolate.next()}}return l.\u0275fac=function(o){return new(o||l)},l.\u0275dir=Ze({type:l}),l})(),p0=(()=>{class l{constructor(o,c){this.subscription=c.chocolate.subscribe(()=>{this.latestFlavor!==this.flavor&&(c.disableChocolateCheck=!0,o.detectChanges(),c.disableChocolateCheck=!1)})}ngAfterContentChecked(){this.latestFlavor=this.flavor}ngOnDestroy(){this.subscription.unsubscribe()}}return l.\u0275fac=function(o){return new(o||l)(O(go),O(f0))},l.\u0275dir=Ze({type:l}),l})(),m0=(()=>{class l{constructor(){this.actionableCount=0}register(){this.actionableCount++}unregister(){this.actionableCount--}get hasActionableRow(){return this.actionableCount>0}}return l.\u0275fac=function(o){return new(o||l)},l.\u0275prov=Xe({token:l,factory:l.\u0275fac}),l})(),X1=(()=>{class l extends f0{}return l.\u0275fac=function(){let a;return function(c){return(a||(a=Fs(l)))(c||l)}}(),l.\u0275dir=Ze({type:l,selectors:[["clr-datagrid"]],features:[on]}),l})(),y4=(()=>{class l extends p0{constructor(o,c,u){if(!c)throw new Error("clr-dg-row should only be used inside of a clr-datagrid");super(o,c),this.rowActions=u}get flavor(){return this.rowActions.hasActionableRow}}return l.\u0275fac=function(o){return new(o||l)(O(go),O(X1,8),O(m0))},l.\u0275dir=Ze({type:l,selectors:[["clr-datagrid"],["clr-dg-row"]],features:[on]}),l})(),ku=(()=>{class l{constructor(){this.toggleState=!1,this._state=new ni(this.toggleState),this._enabled=!1}get enabled(){return this._enabled}set enabled(o){this._enabled=o}get stateChange(){return this._state.asObservable()}close(){this.toggleState=!1,this._state.next(this.toggleState),this.button&&(this.button.focus(),this.button=null)}open(o,c){this.cache=o,this.button=c,this.toggleState=!0,this._state.next(this.toggleState)}toggle(o,c){this.isRowOpen(o)||!o?this.close():this.open(o,c)}get state(){return this.cache}isRowOpen(o){return!(!this.toggleState||this.cache!==o)}get isOpen(){return!0===this.toggleState}}return l.\u0275fac=function(o){return new(o||l)},l.\u0275prov=Xe({token:l,factory:l.\u0275fac}),l})(),g0=(()=>{class l{constructor(o){this.detailService=o,this.expandableCount=0}register(){this.expandableCount++}unregister(){this.expandableCount--}get hasExpandableRow(){return!this.detailService.enabled&&this.expandableCount>0}}return l.\u0275fac=function(o){return new(o||l)(be(ku))},l.\u0275prov=Xe({token:l,factory:l.\u0275fac}),l})(),v4=(()=>{class l extends p0{constructor(o,c,u){if(!c)throw new Error("clr-dg-row should only be used inside of a clr-datagrid");super(o,c),this.expandableCount=u}get flavor(){return this.expandableCount.hasExpandableRow}}return l.\u0275fac=function(o){return new(o||l)(O(go),O(X1,8),O(g0))},l.\u0275dir=Ze({type:l,selectors:[["clr-datagrid"],["clr-dg-row"]],features:[on]}),l})();class VA{constructor(a){this.prop=a,this.nestedProp=new g4(a)}compare(a,o){let c=this.nestedProp.getPropValue(a),u=this.nestedProp.getPropValue(o);return"string"==typeof c&&(c=c.toLowerCase()),"string"==typeof u&&(u=u.toLowerCase()),null==c?null==u?0:1:null==u||c<u?-1:c>u?1:0}}var wa=(()=>(function(l){l[l.UNSORTED=0]="UNSORTED",l[l.ASC=1]="ASC",l[l.DESC=-1]="DESC"}(wa||(wa={})),wa))();let BA=(()=>{class l{constructor(o){this.stateDebouncer=o,this._reverse=!1,this._change=new tt}get comparator(){return this._comparator}set comparator(o){this.stateDebouncer.changeStart(),this._comparator=o,this.emitChange(),this.stateDebouncer.changeDone()}get reverse(){return this._reverse}set reverse(o){this.stateDebouncer.changeStart(),this._reverse=o,this.emitChange(),this.stateDebouncer.changeDone()}emitChange(){this._change.next(this)}get change(){return this._change.asObservable()}toggle(o,c){this.stateDebouncer.changeStart(),this.comparator===o?this._reverse=void 0!==c&&c||!this._reverse:(this._comparator=o,this._reverse=void 0!==c&&c),this.emitChange(),this.stateDebouncer.changeDone()}clear(){this.comparator=null}compare(o,c){return(this.reverse?-1:1)*this.comparator.compare(o,c)}}return l.\u0275fac=function(o){return new(o||l)(be(W1))},l.\u0275prov=Xe({token:l,factory:l.\u0275fac}),l})(),_4=(()=>{class l{constructor(){this._dynamic=!1}ngAfterViewInit(){this.columnView=this.templateRef.createEmbeddedView(null)}ngOnDestroy(){this.columnView.destroy()}}return l.\u0275fac=function(o){return new(o||l)},l.\u0275cmp=Qe({type:l,selectors:[["dg-wrapped-column"]],viewQuery:function(o,c){if(1&o&&Cr(IBe,5),2&o){let u;It(u=Rt())&&(c.templateRef=u.first)}},ngContentSelectors:Pn,decls:2,vars:0,consts:[["columnPortal",""]],template:function(o,c){1&o&&(Lt(),le(0,RBe,1,0,"ng-template",null,0,Pa))},encapsulation:2}),l})(),UA=(()=>{class l extends NA{constructor(o,c,u,h,d,f){super(c),this._sort=o,this.vcr=u,this.detailService=h,this.changeDetectorRef=d,this.commonStrings=f,this.showSeparator=!0,this.subscriptions=[],this._colType="string",this._sorted=!1,this.sortedChange=new pt,this._sortOrder=wa.UNSORTED,this.sortOrderChange=new pt,this.customFilter=!1,this.filterValueChange=new pt,this.subscriptions.push(this.listenForSortingChanges()),this.subscriptions.push(this.listenForDetailPaneChanges())}ngOnDestroy(){this.subscriptions.forEach(o=>o.unsubscribe())}listenForDetailPaneChanges(){return this.detailService.stateChange.subscribe(o=>{this.showSeparator!==!o&&(this.showSeparator=!o,this.changeDetectorRef.markForCheck())})}listenForSortingChanges(){return this._sort.change.subscribe(o=>{this.changeDetectorRef.markForCheck(),this.sortOrder!==wa.UNSORTED&&o.comparator!==this._sortBy&&(this._sortOrder=wa.UNSORTED,this.sortOrderChange.emit(this._sortOrder),this.sortIcon=null,this._sortDirection=null),this.sorted&&o.comparator!==this._sortBy&&(this._sorted=!1,this.sortedChange.emit(!1))})}get colType(){return this._colType}set colType(o){this._colType=o}get field(){return this._field}set field(o){"string"==typeof o&&(this._field=o,this._sortBy||(this._sortBy=new VA(o)))}setupDefaultFilter(o,c){"number"===c?this.setFilter(new Rg(new kA(o))):"string"===c&&this.setFilter(new Ig(new FA(o))),this.filter&&this.initFilterValue&&(this.updateFilterValue=this.initFilterValue,delete this.initFilterValue)}ngOnChanges(o){o.colType&&o.colType.currentValue&&o.colType.currentValue!==o.colType.previousValue&&!this.customFilter&&!this.filter&&this.colType&&this.field&&this.setupDefaultFilter(this.field,this.colType),o.field&&o.field.currentValue&&o.field.currentValue!==o.field.previousValue&&!this.customFilter&&this.colType&&this.setupDefaultFilter(this.field,this.colType)}get sortBy(){return this._sortBy}set sortBy(o){"string"==typeof o?this._sortBy=new VA(o):o?this._sortBy=o:this.field?this._sortBy=new VA(this.field):delete this._sortBy}get sortable(){return!!this._sortBy}get sorted(){return this._sorted}set sorted(o){!o&&this.sorted?(this._sorted=!1,this._sort.clear()):o&&!this.sorted&&this.sort()}get sortOrder(){return this._sortOrder}set sortOrder(o){if(void 0!==o&&this._sortOrder!==o)switch(o){default:case wa.UNSORTED:this._sort.clear();break;case wa.ASC:this.sort(!1);break;case wa.DESC:this.sort(!0)}}get ariaSort(){switch(this._sortOrder){default:case wa.UNSORTED:return"none";case wa.ASC:return"ascending";case wa.DESC:return"descending"}}get sortDirection(){return this._sortDirection}sort(o){!this.sortable||(this._sort.toggle(this._sortBy,o),this._sortOrder=this._sort.reverse?wa.DESC:wa.ASC,this._sortDirection=this._sortOrder===wa.DESC?"down":"up",this.sortIcon=this._sortOrder===wa.DESC?"arrow down":"arrow",this.sortOrderChange.emit(this._sortOrder),this._sorted=!0,this.sortedChange.emit(!0))}set projectedFilter(o){o&&(this.deleteFilter(),this.customFilter=!0)}set updateFilterValue(o){this.filter?this.filter instanceof Ig?((!o||"string"!=typeof o)&&(o=""),o!==this.filter.value&&(this.filter.value=o)):this.filter instanceof Rg&&((!o||!(o instanceof Array))&&(o=[null,null]),2===o.length&&(o[0]!==this.filter.value[0]||o[1]!==this.filter.value[1])&&(this.filter.value=o)):this.initFilterValue=o}get filterValue(){return this.filter instanceof Ig||this.filter instanceof Rg?this.filter.value:null}set filterValue(o){(this.filter instanceof Ig||this.filter instanceof Rg)&&(this.updateFilterValue=o,this.filterValueChange.emit(this.filter.value))}ngOnInit(){this.wrappedInjector=new vA(_4,this.vcr)}get _view(){return this.wrappedInjector.get(_4,this.vcr).columnView}}return l.\u0275fac=function(o){return new(o||l)(O(BA),O(sf),O(qn),O(ku),O(go),O(qr))},l.\u0275cmp=Qe({type:l,selectors:[["clr-dg-column"]],contentQueries:function(o,c,u){if(1&o&&Nn(u,LA,5),2&o){let h;It(h=Rt())&&(c.projectedFilter=h.first)}},hostAttrs:["role","columnheader"],hostVars:3,hostBindings:function(o,c){2&o&&(Ke("aria-sort",c.ariaSort),lt("datagrid-column",!0))},inputs:{colType:["clrDgColType","colType"],field:["clrDgField","field"],updateFilterValue:["clrFilterValue","updateFilterValue"],sortBy:["clrDgSortBy","sortBy"],sorted:["clrDgSorted","sorted"],sortOrder:["clrDgSortOrder","sortOrder"]},outputs:{sortedChange:"clrDgSortedChange",sortOrderChange:"clrDgSortOrderChange",filterValueChange:"clrFilterValueChange"},features:[Mt([Qd,Uh,ii]),on,Ci],ngContentSelectors:zBe,decls:9,vars:5,consts:[[1,"datagrid-column-flex"],["class","datagrid-column-title","type","button",3,"click",4,"ngIf"],[3,"clrDgStringFilter","clrFilterValue","clrFilterValueChange",4,"ngIf"],[3,"clrDgNumericFilter","clrFilterValue","clrFilterValueChange",4,"ngIf"],["columnTitle",""],["class","datagrid-column-title",4,"ngIf"],[4,"ngIf"],["type","button",1,"datagrid-column-title",3,"click"],[4,"ngTemplateOutlet"],["shape","arrow","aria-hidden","true","class","sort-icon",4,"ngIf"],["shape","arrow","aria-hidden","true",1,"sort-icon"],[3,"clrDgStringFilter","clrFilterValue","clrFilterValueChange"],[3,"clrDgNumericFilter","clrFilterValue","clrFilterValueChange"],[1,"datagrid-column-title"]],template:function(o,c){1&o&&(Lt(GBe),V(0,"div",0),le(1,OBe,3,2,"button",1),Be(2),le(3,NBe,1,2,"clr-dg-string-filter",2),le(4,FBe,1,2,"clr-dg-numeric-filter",3),le(5,kBe,1,0,"ng-template",null,4,Pa),le(7,BBe,2,1,"span",5),le(8,UBe,1,0,"clr-dg-column-separator",6),B()),2&o&&(j(1),q("ngIf",c.sortable),j(2),q("ngIf",c.field&&!c.customFilter&&"string"==c.colType),j(1),q("ngIf",c.field&&!c.customFilter&&"number"==c.colType),j(3),q("ngIf",!c.sortable),j(1),q("ngIf",c.showSeparator))},directives:function(){return[Mn,fh,zr,BJ,UJ,qJ]},encapsulation:2,changeDetection:0}),l})(),Pg=(()=>{class l{constructor(o,c,u){this._filters=o,this._sort=c,this._page=u,this.loading=!1,this.trackBy=(h,d)=>d,this._smart=!1,this._displayed=[],this._change=new tt,this._allChanges=new tt}destroy(){this._filtersSub&&this._filtersSub.unsubscribe(),this._sortSub&&this._sortSub.unsubscribe(),this._pageSub&&this._pageSub.unsubscribe()}get smart(){return this._smart}smartenUp(){this._smart=!0,this._filtersSub=this._filters.change.subscribe(()=>this._filterItems()),this._sortSub=this._sort.change.subscribe(()=>{this._sort.comparator?this._sortItems():this._filterItems()}),this._pageSub=this._page.change.subscribe(()=>this._changePage())}get all(){return this._all}set all(o){this._all=o,this.emitAllChanges(o),this.smart?this._filterItems():(this._displayed=o,this.emitChange())}refresh(){this.smart&&this._filterItems()}get displayed(){return this._displayed}emitChange(){this._change.next(this.displayed)}get change(){return this._change.asObservable()}emitAllChanges(o){this._allChanges.next(o)}get allChanges(){return this._allChanges.asObservable()}get uninitialized(){return!this._all}_filterItems(){this.uninitialized||(this._filtered=this._filters.hasActiveFilters()?this._all.filter(o=>this._filters.accepts(o)):this._all.slice(),this._page.totalItems=this._filtered.length,this._sortItems())}_sortItems(){this.uninitialized||(this._sort.comparator&&this._filtered.sort((o,c)=>this._sort.compare(o,c)),this._changePage())}_changePage(){this.uninitialized||this._page.activated&&0===this._page.size||(this._displayed=this._page.size>0?this._filtered.slice(this._page.firstItem,this._page.lastItem+1):this._filtered,this.emitChange())}}return l.\u0275fac=function(o){return new(o||l)(be(sf),be(BA),be(Ap))},l.\u0275prov=Xe({token:l,factory:l.\u0275fac}),l})(),GJ=(()=>{class l{constructor(o,c,u,h){this.template=o,this.differs=c,this.items=u,this.vcr=h,this.differ=null,this.subscriptions=[],u.smartenUp(),this.iterableProxy=new Gi(this.vcr,this.template,this.differs),this.subscriptions.push(u.change.subscribe(d=>{this.iterableProxy.ngForOf=d,this.iterableProxy.ngDoCheck()}))}set rawItems(o){this._rawItems=o||[]}set trackBy(o){this.items.trackBy=o,this.iterableProxy.ngForTrackBy=o}ngDoCheck(){this.differ||(this.differ=this.differs.find(this._rawItems).create(this.iterableProxy.ngForTrackBy)),this.differ&&this.differ.diff(this._rawItems)&&(this.items.all=this._rawItems)}ngOnDestroy(){this.subscriptions.forEach(o=>o.unsubscribe())}}return l.\u0275fac=function(o){return new(o||l)(O(bi),O(Td),O(Pg),O(qn))},l.\u0275dir=Ze({type:l,selectors:[["","clrDgItems","","clrDgItemsOf",""]],inputs:{rawItems:["clrDgItemsOf","rawItems"],trackBy:["clrDgItemsTrackBy","trackBy"]}}),l})(),b4=(()=>{class l{constructor(o){this.items=o}get emptyDatagrid(){return!(this.items.loading||this.items.displayed&&0!==this.items.displayed.length)}}return l.\u0275fac=function(o){return new(o||l)(O(Pg))},l.\u0275cmp=Qe({type:l,selectors:[["clr-dg-placeholder"]],hostVars:2,hostBindings:function(o,c){2&o&&lt("datagrid-placeholder-container",!0)},ngContentSelectors:Pn,decls:4,vars:4,consts:[["role","row",1,"datagrid-placeholder"],["class","datagrid-placeholder-image",4,"ngIf"],["role","gridcell"],[4,"ngIf"],[1,"datagrid-placeholder-image"]],template:function(o,c){1&o&&(Lt(),V(0,"div",0),le(1,HBe,1,0,"div",1),V(2,"span",2),le(3,jBe,1,0,"ng-content",3),B(),B()),2&o&&(lt("datagrid-empty",c.emptyDatagrid),j(1),q("ngIf",c.emptyDatagrid),j(2),q("ngIf",c.emptyDatagrid))},directives:[Mn],encapsulation:2}),l})(),S4=(()=>{class l{set triggerEl(o){this._triggerEl=o}focusTrigger(){this._triggerEl&&this._triggerEl.focus()}}return l.\u0275fac=function(o){return new(o||l)},l.\u0275prov=Xe({token:l,factory:l.\u0275fac}),l})(),T4=(()=>{class l{constructor(){this._id=new tt}setId(o){this._id.next(o)}get id(){return this._id.asObservable()}}return l.\u0275fac=function(o){return new(o||l)},l.\u0275prov=Xe({token:l,factory:l.\u0275fac}),l})(),w4=(()=>{class l{constructor(o,c,u,h,d,f,m){this.toggleService=o,this.el=c,this.commonStrings=u,this.signpostIdService=h,this.signpostFocusManager=d,this.platformId=m,this.subscriptions=[],this.document=f}ngOnInit(){this.signpostFocusManager.triggerEl=this.el.nativeElement,this.subscriptions.push(this.toggleService.openChange.subscribe(o=>{this.ariaExpanded=o;const c=this.isOpen;this.isOpen=o,!this.isOpen&&c&&this.focusOnClose()}),this.signpostIdService.id.subscribe(o=>this.ariaControl=o))}focusOnClose(){!ti(this.platformId)||!this.isOpen&&this.document.activeElement===this.document.body&&this.signpostFocusManager.focusTrigger()}ngOnDestroy(){this.subscriptions.forEach(o=>o.unsubscribe())}onSignpostTriggerClick(o){this.toggleService.toggleWithEvent(o)}}return l.\u0275fac=function(o){return new(o||l)(O(ii),O(kt),O(qr),O(T4),O(S4),O(Xn),O(Ui))},l.\u0275dir=Ze({type:l,selectors:[["","clrSignpostTrigger",""]],hostAttrs:[1,"signpost-trigger"],hostVars:5,hostBindings:function(o,c){1&o&&ze("click",function(h){return c.onSignpostTriggerClick(h)}),2&o&&(Ke("aria-label",c.commonStrings.keys.signpostToggle)("aria-expanded",c.ariaExpanded)("aria-controls",c.ariaControl),lt("active",c.isOpen))}}),l})(),$1=(()=>{class l{constructor(o){this.commonStrings=o,this.useCustomTrigger=!1}set customTrigger(o){this.useCustomTrigger=!!o}}return l.\u0275fac=function(o){return new(o||l)(O(qr))},l.\u0275cmp=Qe({type:l,selectors:[["clr-signpost"]],contentQueries:function(o,c,u){if(1&o&&Nn(u,w4,5),2&o){let h;It(h=Rt())&&(c.customTrigger=h.first)}},hostVars:2,hostBindings:function(o,c){2&o&&lt("signpost",!0)},features:[Mt([ii,S4,{provide:Dp,useExisting:kt},T4])],ngContentSelectors:Pn,decls:2,vars:1,consts:[[4,"ngIf"],["type","button","clrSignpostTrigger","",1,"signpost-action","btn","btn-small","btn-link"],["shape","info-circle"]],template:function(o,c){1&o&&(Lt(),le(0,WBe,3,1,"ng-container",0),Be(1)),2&o&&q("ngIf",!c.useCustomTrigger)},directives:[Mn,w4,zr],encapsulation:2}),l})(),C4=(()=>{class l{constructor(){this._dynamic=!1}ngAfterViewInit(){this.cellView=this.templateRef.createEmbeddedView(null)}ngOnDestroy(){this.cellView.destroy()}}return l.\u0275fac=function(o){return new(o||l)},l.\u0275cmp=Qe({type:l,selectors:[["dg-wrapped-cell"]],viewQuery:function(o,c){if(1&o&&Cr(qBe,5),2&o){let u;It(u=Rt())&&(c.templateRef=u.first)}},ngContentSelectors:Pn,decls:2,vars:0,consts:[["cellPortal",""]],template:function(o,c){1&o&&(Lt(),le(0,XBe,1,0,"ng-template",null,0,Pa))},encapsulation:2}),l})(),Y1=(()=>{class l{constructor(o){this.vcr=o}ngOnInit(){this.wrappedInjector=new vA(C4,this.vcr)}get _view(){return this.wrappedInjector.get(C4,this.vcr).cellView}}return l.\u0275fac=function(o){return new(o||l)(O(qn))},l.\u0275cmp=Qe({type:l,selectors:[["clr-dg-cell"]],contentQueries:function(o,c,u){if(1&o&&Nn(u,$1,4),2&o){let h;It(h=Rt())&&(c.signpost=h)}},hostAttrs:["role","gridcell"],hostVars:4,hostBindings:function(o,c){2&o&&lt("datagrid-cell",!0)("datagrid-signpost-trigger",c.signpost.length>0)},ngContentSelectors:Pn,decls:1,vars:0,template:function(o,c){1&o&&(Lt(),Be(0))},encapsulation:2}),l})();var Ip=(()=>(function(l){l[l.DISPLAY=0]="DISPLAY",l[l.CALCULATE=1]="CALCULATE"}(Ip||(Ip={})),Ip))(),ic=(()=>(function(l){l[l.ALIGN_COLUMNS=0]="ALIGN_COLUMNS",l[l.CALCULATE_MODE_ON=1]="CALCULATE_MODE_ON",l[l.CALCULATE_MODE_OFF=2]="CALCULATE_MODE_OFF",l[l.CLEAR_WIDTHS=3]="CLEAR_WIDTHS",l[l.COMPUTE_COLUMN_WIDTHS=4]="COMPUTE_COLUMN_WIDTHS"}(ic||(ic={})),ic))();let Lg=(()=>{class l{constructor(){this._renderStep=new tt,this.alreadySized=!1}get renderStep(){return this._renderStep.asObservable()}filterRenderSteps(o){return this.renderStep.pipe(cs(c=>o===c))}resize(){this._renderStep.next(ic.CALCULATE_MODE_ON),this.alreadySized&&this._renderStep.next(ic.CLEAR_WIDTHS),this._renderStep.next(ic.COMPUTE_COLUMN_WIDTHS),this._renderStep.next(ic.ALIGN_COLUMNS),this.alreadySized=!0,this._renderStep.next(ic.CALCULATE_MODE_OFF)}}return l.\u0275fac=function(o){return new(o||l)},l.\u0275prov=Xe({token:l,factory:l.\u0275fac}),l})(),x4=(()=>{class l{constructor(o){this.subscriptions=[],this._view=new ni(Ip.DISPLAY),this.subscriptions.push(o.filterRenderSteps(ic.CALCULATE_MODE_ON).subscribe(()=>this._view.next(Ip.CALCULATE))),this.subscriptions.push(o.filterRenderSteps(ic.CALCULATE_MODE_OFF).subscribe(()=>this._view.next(Ip.DISPLAY)))}get view(){return this._view.asObservable()}ngOnDestroy(){this.subscriptions.forEach(o=>o.unsubscribe())}}return l.\u0275fac=function(o){return new(o||l)(be(Lg))},l.\u0275prov=Xe({token:l,factory:l.\u0275fac}),l})();var ci=(()=>(function(l){l[l.None=0]="None",l[l.Single=1]="Single",l[l.Multi=2]="Multi"}(ci||(ci={})),ci))();let gze=0,Z1=(()=>{class l{constructor(o,c,u){this._items=o,this._filters=c,this._zone=u,this.preserveSelection=!1,this.prevSelectionRefs=[],this.lockedRefs=[],this._selectionType=ci.None,this.rowSelectionMode=!1,this.subscriptions=[],this.valueCollector=new tt,this._change=new tt,this.id="clr-dg-selection"+gze++,this.subscriptions.push(this._filters.change.subscribe(()=>{!this._selectable||this.preserveSelection||this.clearSelection()})),this.subscriptions.push(this._items.allChanges.subscribe(h=>{const d=[];switch(this.selectionType){case ci.None:break;case ci.Single:{let f;const m=this._items.trackBy;let g=!1;if(this.currentSingle&&!this.prevSingleSelectionRef&&this._items.all&&this._items.trackBy){const y=this._items.all.findIndex(v=>v===this.currentSingle);this.prevSingleSelectionRef=this._items.trackBy(y,this.currentSingle)}h.forEach((y,v)=>{const _=m(v,y);this.prevSingleSelectionRef===_&&(f=y,g=!0),this.lockedRefs.indexOf(_)>-1&&d.push(_)}),this._items.smart&&!f&&(g=!0),setTimeout(()=>{g&&(this.currentSingle=f)},0);break}case ci.Multi:{let f=this.current.slice();const m=this._items.trackBy;let g=!1;this.current.length>0&&this.prevSelectionRefs.length!==this.current.length&&this._items.all&&this._items.trackBy&&(this.prevSelectionRefs=[],this.current.forEach(y=>{const v=this._items.all.findIndex(_=>_===y);this.prevSelectionRefs.push(this._items.trackBy(v,y))})),h.forEach((y,v)=>{const _=m(v,y);this.lockedRefs.indexOf(_)>-1&&d.push(_)}),f.length>0&&(h.forEach((y,v)=>{const _=m(v,y),b=this.prevSelectionRefs.indexOf(_);b>-1&&(f[b]=y,g=!0)}),this._items.smart&&(f=f.filter(y=>h.indexOf(y)>-1),this.current.length!==f.length&&(g=!0)),setTimeout(()=>{g&&(this.current=f)},0));break}}this.lockedRefs=d})),this.subscriptions.push(this.valueCollector.pipe(H_(0)).subscribe(()=>this.emitChange()))}clearSelection(){this._current=[],this.prevSelectionRefs=[],this.prevSingleSelectionRef=null,this._currentSingle=null,this.emitChange()}get selectionType(){return this._selectionType}set selectionType(o){o!==this.selectionType&&(this._selectionType=o,o===ci.None?delete this.current:this.updateCurrent([],!1))}get _selectable(){return this._selectionType===ci.Multi||this._selectionType===ci.Single}destroy(){this.subscriptions.forEach(o=>o.unsubscribe())}get currentSingle(){return this._currentSingle}set currentSingle(o){if(o!==this._currentSingle){if(this._currentSingle=o,this._items.all&&this._items.trackBy&&o){const c=this._items.all.findIndex(u=>u===o);this.prevSingleSelectionRef=this._items.trackBy(c,o)}this.emitChange()}}get current(){return this._current}set current(o){this.updateCurrent(o,!0)}updateCurrent(o,c){this._current=o,c&&this.valueCollector.next(o)}emitChange(){this._selectionType===ci.Single?this._change.next(this.currentSingle):this._selectionType===ci.Multi&&this._change.next(this.current)}get change(){return this._change.asObservable()}isSelected(o){return this._selectionType===ci.Single?this.currentSingle===o:this._selectionType===ci.Multi&&this.current.indexOf(o)>=0}selectItem(o){if(this.current=this.current.concat(o),this._items.trackBy&&this._items.all){const c=this._items.all.findIndex(u=>u===o);this.prevSelectionRefs.push(this._items.trackBy(c,o))}}deselectItem(o){if(this.current=this.current.slice(0,o).concat(this.current.slice(o+1)),this._items.trackBy&&o<this.prevSelectionRefs.length){const c=this.prevSelectionRefs.splice(o,1);this.lockedRefs=this.lockedRefs.filter(u=>u!==c[0])}}setSelected(o,c){const u=this.current?this.current.indexOf(o):-1;switch(this._selectionType){case ci.None:case ci.Single:break;case ci.Multi:u>=0&&!c?this.deselectItem(u):u<0&&c&&this.selectItem(o)}}isAllSelected(){if(this._selectionType!==ci.Multi||!this._items.displayed)return!1;const o=this._items.displayed.filter(h=>!1===this.isLocked(h));return!(o.length<1)&&o.filter(h=>this.current.indexOf(h)>-1).length===o.length}canItBeLocked(){return this._selectionType!==ci.None&&Array.isArray(this._items.all)}lockItem(o,c){if(this.canItBeLocked()){const u=this._items.trackBy(this._items.all.findIndex(h=>h===o),o);!0===c?this.lockedRefs.push(u):this.lockedRefs=this.lockedRefs.filter(h=>u!==h)}}isLocked(o){if(this.canItBeLocked()){const c=this._items.trackBy(this._items.all.findIndex(u=>u===o),o);return this.lockedRefs.indexOf(c)>-1}return!1}toggleAll(){this._selectionType===ci.None||this._selectionType===ci.Single||(this.isAllSelected()?this._items.displayed.forEach(o=>{const c=this.current.indexOf(o);c>-1&&!1===this.isLocked(o)&&this.deselectItem(c)}):this._items.displayed.forEach(o=>{this.current.indexOf(o)<0&&!1===this.isLocked(o)&&this.selectItem(o)}))}}return l.\u0275fac=function(o){return new(o||l)(be(Pg),be(sf),be(Fn))},l.\u0275prov=Xe({token:l,factory:l.\u0275fac}),l})(),E4=(()=>{class l{constructor(){this._dynamic=!1}ngAfterViewInit(){this.rowView=this.templateRef.createEmbeddedView(null)}ngOnDestroy(){this.rowView.destroy()}}return l.\u0275fac=function(o){return new(o||l)},l.\u0275cmp=Qe({type:l,selectors:[["dg-wrapped-row"]],viewQuery:function(o,c){if(1&o&&Cr($Be,5),2&o){let u;It(u=Rt())&&(c.templateRef=u.first)}},ngContentSelectors:Pn,decls:2,vars:0,consts:[["rowPortal",""]],template:function(o,c){1&o&&(Lt(),le(0,YBe,1,0,"ng-template",null,0,Pa))},encapsulation:2}),l})(),zJ=0,K1=(()=>{class l extends Ja{constructor(){super(),this.expandableId="",this._replace=new ni(!1),this._animate=new tt,zJ++,this.expandableId="clr-dg-expandable-row-"+zJ}get expanded(){return this._expanded}set expanded(o){(o=!!o)!==this._expanded&&(this._expanded=o,this._animate.next(),this._expandChange.next(o))}loadingStateChange(o){super.loadingStateChange(o),o!==no.LOADING&&this._animate.next()}get replace(){return this._replace.asObservable()}setReplace(o){this._replace.next(o)}get animate(){return this._animate.asObservable()}}return l.\u0275fac=function(o){return new(o||l)},l.\u0275prov=Xe({token:l,factory:l.\u0275fac}),l})(),GA=0,zA=(()=>{class l{constructor(o,c,u,h,d,f,m,g,y,v){this.selection=o,this.rowActionService=c,this.globalExpandable=u,this.expand=h,this.detailService=d,this.displayMode=f,this.vcr=m,this.renderer=g,this.el=y,this.commonStrings=v,this.SELECTION_TYPE=ci,this.expandAnimationTrigger=!1,this._selected=!1,this.selectedChanged=new pt(!1),this.expandedChange=new pt(!1),this._detailOpenLabel="",this._detailCloseLabel="",this.subscriptions=[],this.displayCells=!1,GA++,this.id="clr-dg-row"+GA,this.radioId="clr-dg-row-rd"+GA,this.checkboxId="clr-dg-row-cb"+GA,this.expandableId=h.expandableId,this.subscriptions.push(rj(this.expand.replace,this.expand.expandChange).subscribe(([_,b])=>{_&&b?(this.replaced=!0,this.renderer.addClass(this.el.nativeElement,"datagrid-row-replaced")):(this.replaced=!1,this.renderer.removeClass(this.el.nativeElement,"datagrid-row-replaced"))}))}get selected(){return this.selection.selectionType===ci.None?this._selected:this.selection.isSelected(this.item)}set selected(o){this.selection.selectionType===ci.None?this._selected=o:this.selection.setSelected(this.item,o)}set clrDgSelectable(o){this.selection.lockItem(this.item,!1===o)}get clrDgSelectable(){return!this.selection.isLocked(this.item)}toggle(o=!this.selected){o!==this.selected&&(this.selected=o,this.selectedChanged.emit(o))}get expanded(){return this.expand.expanded}set expanded(o){this.expand.expanded=o}toggleExpand(){this.expand.expandable&&(this.expandAnimation.updateStartHeight(),this.expanded=!this.expanded,this.expandedChange.emit(this.expanded))}set clrDgDetailOpenLabel(o){this._detailOpenLabel=o}get clrDgDetailOpenLabel(){return this._detailOpenLabel?this._detailOpenLabel:this.commonStrings.keys.open}set clrDgDetailCloseLabel(o){this._detailCloseLabel=o}get clrDgDetailCloseLabel(){return this._detailCloseLabel?this._detailCloseLabel:this.commonStrings.keys.close}ngAfterContentInit(){this.dgCells.changes.subscribe(()=>{this.dgCells.forEach(o=>{o._view.destroyed||this._scrollableCells.insert(o._view)})})}ngAfterViewInit(){this.subscriptions.push(this.displayMode.view.subscribe(o=>{for(let c=this._scrollableCells.length;c>0;c--)this._scrollableCells.detach();for(let c=this._calculatedCells.length;c>0;c--)this._calculatedCells.detach();o===Ip.CALCULATE?(this.displayCells=!1,this.dgCells.forEach(c=>{c._view.destroyed||this._calculatedCells.insert(c._view)})):(this.displayCells=!0,this.dgCells.forEach(c=>{c._view.destroyed||this._scrollableCells.insert(c._view)}))}),this.expand.animate.subscribe(()=>{this.expandAnimationTrigger=!this.expandAnimationTrigger}))}ngOnDestroy(){this.subscriptions.forEach(o=>o.unsubscribe())}ngOnInit(){this.wrappedInjector=new vA(E4,this.vcr),this.selection.lockItem(this.item,!1===this.clrDgSelectable)}get _view(){return this.wrappedInjector.get(E4,this.vcr).rowView}}return l.\u0275fac=function(o){return new(o||l)(O(Z1),O(m0),O(g0),O(K1),O(ku),O(x4),O(qn),O(tr),O(kt),O(qr))},l.\u0275cmp=Qe({type:l,selectors:[["clr-dg-row"]],contentQueries:function(o,c,u){if(1&o&&Nn(u,Y1,4),2&o){let h;It(h=Rt())&&(c.dgCells=h)}},viewQuery:function(o,c){if(1&o&&(Cr(PA,5),Cr(ZBe,5),Cr(KBe,5,qn),Cr(JBe,5,qn),Cr(QBe,5,qn)),2&o){let u;It(u=Rt())&&(c.expandAnimation=u.first),It(u=Rt())&&(c.detailButton=u.first),It(u=Rt())&&(c._stickyCells=u.first),It(u=Rt())&&(c._scrollableCells=u.first),It(u=Rt())&&(c._calculatedCells=u.first)}},hostAttrs:["role","rowgroup"],hostVars:5,hostBindings:function(o,c){2&o&&(Ke("aria-owns",c.id),lt("datagrid-row",!0)("datagrid-selected",c.selected))},inputs:{selected:["clrDgSelected","selected"],clrDgSelectable:"clrDgSelectable",expanded:["clrDgExpanded","expanded"],clrDgDetailOpenLabel:"clrDgDetailOpenLabel",clrDgDetailCloseLabel:"clrDgDetailCloseLabel",item:["clrDgItem","item"]},outputs:{selectedChanged:"clrDgSelectedChange",expandedChange:"clrDgExpandedChange"},features:[Mt([K1,{provide:Ja,useExisting:K1},{provide:xg,useExisting:K1}])],ngContentSelectors:x5e,decls:9,vars:3,consts:[["class","datagrid-row-clickable",4,"ngIf"],[3,"clrExpandTrigger",4,"ngIf"],[4,"ngIf"],["detail",""],["rowContent",""],["calculatedCells",""],[1,"datagrid-row-clickable"],[3,"clrExpandTrigger"],[3,"ngTemplateOutlet"],["role","row",1,"datagrid-row-master","datagrid-row-flex",3,"id"],[1,"datagrid-row-sticky"],["stickyCells",""],["class","datagrid-select datagrid-fixed-column datagrid-cell","role","gridcell",3,"ngClass",4,"ngIf"],["class","datagrid-row-actions datagrid-fixed-column datagrid-cell","role","gridcell",4,"ngIf"],["class","datagrid-expandable-caret datagrid-fixed-column datagrid-cell","role","gridcell",4,"ngIf"],["class","datagrid-detail-caret datagrid-fixed-column datagrid-cell",4,"ngIf"],[1,"datagrid-row-scrollable",3,"ngClass"],[1,"datagrid-scrolling-cells"],["scrollableCells",""],["role","gridcell",1,"datagrid-select","datagrid-fixed-column","datagrid-cell",3,"ngClass"],[1,"clr-checkbox-wrapper"],["type","checkbox",3,"ngModel","id","ngModelChange"],[1,"clr-control-label","clr-col-null",3,"for"],[1,"clr-sr-only"],["type","radio","clrRadio","",3,"id","name","value","ngModel","checked","ngModelChange"],["role","gridcell",1,"datagrid-row-actions","datagrid-fixed-column","datagrid-cell"],["role","gridcell",1,"datagrid-expandable-caret","datagrid-fixed-column","datagrid-cell"],["type","button","class","datagrid-expandable-caret-button",3,"click",4,"ngIf"],["clrSmall","",4,"ngIf"],["type","button",1,"datagrid-expandable-caret-button",3,"click"],["shape","angle",1,"datagrid-expandable-caret-icon"],["clrSmall",""],[1,"datagrid-detail-caret","datagrid-fixed-column","datagrid-cell"],["type","button","aria-haspopup","dialog",1,"datagrid-detail-caret-button",3,"click"],["detailButton",""],["shape","angle-double",1,"datagrid-detail-caret-icon"]],template:function(o,c){1&o&&(Lt(C5e),le(0,i5e,3,2,"label",0),le(1,o5e,2,2,"clr-expandable-animation",1),le(2,l5e,1,1,void 0,2),le(3,c5e,1,0,"ng-template",null,3,Pa),le(5,w5e,16,13,"ng-template",null,4,Pa),ll(7,null,5)),2&o&&(q("ngIf",c.selection.rowSelectionMode),j(1),q("ngIf",!c.selection.rowSelectionMode&&c.expand.expandable),j(1),q("ngIf",!c.selection.rowSelectionMode&&!c.expand.expandable))},directives:[Mn,xi,PA,fh,_s,W_,$a,Cl,w3,ec,SJ,zr,d0],encapsulation:2}),l})(),HJ=(()=>{class l{constructor(o,c,u,h){this.filters=o,this.sort=c,this.page=u,this.debouncer=h,this.change=this.debouncer.change.pipe(pe(()=>this.state))}get state(){const o={};this.page.size>0&&(o.page={from:this.page.firstItem,to:this.page.lastItem,size:this.page.size,current:this.page.current}),this.sort.comparator&&(o.sort=this.sort.comparator instanceof VA?{by:this.sort.comparator.prop,reverse:this.sort.reverse}:{by:this.sort.comparator,reverse:this.sort.reverse});const c=this.filters.getActiveFilters();if(c.length>0){o.filters=[];for(const u of c)o.filters.push(u.state?u.state:u)}return o}}return l.\u0275fac=function(o){return new(o||l)(be(sf),be(BA),be(Ap),be(W1))},l.\u0275prov=Xe({token:l,factory:l.\u0275fac}),l})(),M4=(()=>{class l{constructor(o){this.platformId=o}get tableRef(){return this._tableRef}set tableRef(o){this._tableRef=o}set table(o){ti(this.platformId)&&o.nativeElement&&(this.tableRef=o.nativeElement.querySelector(".datagrid-table"))}getColumnDragHeight(){return this.tableRef?`${this.tableRef.clientHeight}px`:null}}return l.\u0275fac=function(o){return new(o||l)(be(Ui))},l.\u0275prov=Xe({token:l,factory:l.\u0275fac}),l})();var Ca=(()=>(function(l){l[l.WIDTH=0]="WIDTH",l[l.HIDDEN=1]="HIDDEN"}(Ca||(Ca={})),Ca))();const jJ=Object.keys(Ca).map(l=>Ca[l]).filter(l=>l===parseInt(l,10));let Rp=(()=>{class l{constructor(){this.columns=[],this._cache=[]}cache(){this._cache=this.columns.map(o=>{const c=Object.assign({},o.value);return delete c.changes,c})}hasCache(){return!!this._cache.length}resetToLastCache(){this._cache.forEach((o,c)=>{this.columns[c].next(Object.assign(Object.assign({},o),{changes:jJ}))}),this._cache=[]}get columnStates(){return this.columns.map(o=>o.value)}get hasHideableColumns(){return this.columnStates.filter(o=>o.hideable).length>0}emitStateChangeAt(o,c){!this.columns[o]||this.emitStateChange(this.columns[o],c)}emitStateChange(o,c){o.next(Object.assign(Object.assign({},o.value),c))}}return l.\u0275fac=function(o){return new(o||l)},l.\u0275prov=Xe({token:l,factory:l.\u0275fac}),l})(),D4=(()=>{class l{constructor(o,c,u,h,d,f,m,g,y,v,_,b,w){this.organizer=o,this.items=c,this.expandableRows=u,this.selection=h,this.rowActionService=d,this.stateProvider=f,this.displayMode=m,this.renderer=g,this.detailService=y,this.el=_,this.page=b,this.commonStrings=w,this.SELECTION_TYPE=ci,this.refresh=new pt(!1),this.selectedChanged=new pt(!1),this.singleSelectedChanged=new pt(!1),this.clrDgSingleSelectionAriaLabel=this.commonStrings.keys.singleSelectionAriaLabel,this.clrDgSingleActionableAriaLabel=this.commonStrings.keys.singleActionableAriaLabel,this.clrDetailExpandableAriaLabel=this.commonStrings.keys.detailExpandableAriaLabel,this.clrDgDisablePageFocus=!1,this._subscriptions=[],this.selectAllId="clr-dg-select-all-"+v,this.detailService.id=v}get loading(){return this.items.loading}set loading(o){this.items.loading=o}dataChanged(){this.items.refresh()}set selected(o){this.selection.selectionType=o?ci.Multi:ci.None,this.selection.updateCurrent(o,!1)}set singleSelected(o){this.selection.selectionType=ci.Single,o?this.selection.currentSingle=o:this.selection.currentSingle&&(this.selection.currentSingle=null)}set clrDgPreserveSelection(o){this.selection.preserveSelection=o}set rowSelectionMode(o){this.selection.rowSelectionMode=o}get allSelected(){return this.selection.isAllSelected()}set allSelected(o){this.selection.toggleAll()}ngAfterContentInit(){this.items.smart||(this.items.all=this.rows.map(o=>o.item)),this._subscriptions.push(this.rows.changes.subscribe(()=>{this.items.smart||(this.items.all=this.rows.map(o=>o.item));for(let o=this._displayedRows.length-1;o>=0;o--)this._displayedRows.get(o).destroyed&&this._displayedRows.remove(o);if(this.rows.forEach(o=>{this._displayedRows.insert(o._view)}),this.detailService.state&&this.detailService.isOpen){const o=this.rows.find((c,u)=>this.items.trackBy(u,c.item)===this.items.trackBy(u,this.detailService.state));o?this.detailService.open(o.item,o.detailButton.nativeElement):this.detailService.close()}}))}ngAfterViewInit(){this.refresh.emit(this.stateProvider.state),this._subscriptions.push(this.stateProvider.change.subscribe(o=>this.refresh.emit(o)),this.selection.change.subscribe(o=>{this.selection.selectionType===ci.Single?this.singleSelectedChanged.emit(o):this.selection.selectionType===ci.Multi&&this.selectedChanged.emit(o)}),this.page.change.subscribe(()=>{this.clrDgDisablePageFocus||this.datagridTable.nativeElement.focus()}),this.displayMode.view.subscribe(o=>{for(let c=this._projectedDisplayColumns.length;c>0;c--)this._projectedDisplayColumns.detach();for(let c=this._projectedCalculationColumns.length;c>0;c--)this._projectedCalculationColumns.detach();for(let c=this._calculationRows.length;c>0;c--)this._calculationRows.detach();for(let c=this._displayedRows.length;c>0;c--)this._displayedRows.detach();o===Ip.DISPLAY?(this.renderer.removeClass(this.el.nativeElement,"datagrid-calculate-mode"),this.columns.forEach(c=>{this._projectedDisplayColumns.insert(c._view)}),this.rows.forEach(c=>{this._displayedRows.insert(c._view)})):(this.renderer.addClass(this.el.nativeElement,"datagrid-calculate-mode"),this.columns.forEach(c=>{this._projectedCalculationColumns.insert(c._view)}),this.rows.forEach(c=>{this._calculationRows.insert(c._view)}))}))}ngOnDestroy(){this._subscriptions.forEach(o=>o.unsubscribe())}resize(){this.organizer.resize()}}return l.\u0275fac=function(o){return new(o||l)(O(Lg),O(Pg),O(g0),O(Z1),O(m0),O(HJ),O(x4),O(tr),O(ku),O(ro),O(kt),O(Ap),O(qr))},l.\u0275cmp=Qe({type:l,selectors:[["clr-datagrid"]],contentQueries:function(o,c,u){if(1&o&&(Nn(u,GJ,5),Nn(u,b4,5),Nn(u,UA,4),Nn(u,zA,4)),2&o){let h;It(h=Rt())&&(c.iterator=h.first),It(h=Rt())&&(c.placeholder=h.first),It(h=Rt())&&(c.columns=h),It(h=Rt())&&(c.rows=h)}},viewQuery:function(o,c){if(1&o&&(Cr(E5e,5,qn),Cr(M5e,5,kt),Cr(D5e,5,qn),Cr(A5e,5,qn),Cr(I5e,5,qn),Cr(R5e,5,qn)),2&o){let u;It(u=Rt())&&(c.scrollableColumns=u.first),It(u=Rt())&&(c.datagridTable=u.first),It(u=Rt())&&(c._projectedDisplayColumns=u.first),It(u=Rt())&&(c._projectedCalculationColumns=u.first),It(u=Rt())&&(c._displayedRows=u.first),It(u=Rt())&&(c._calculationRows=u.first)}},hostVars:4,hostBindings:function(o,c){2&o&&lt("datagrid-host",!0)("datagrid-detail-open",c.detailService.isOpen)},inputs:{clrDgSingleSelectionAriaLabel:"clrDgSingleSelectionAriaLabel",clrDgSingleActionableAriaLabel:"clrDgSingleActionableAriaLabel",clrDetailExpandableAriaLabel:"clrDetailExpandableAriaLabel",clrDgDisablePageFocus:"clrDgDisablePageFocus",loading:["clrDgLoading","loading"],selected:["clrDgSelected","selected"],singleSelected:["clrDgSingleSelected","singleSelected"],clrDgPreserveSelection:"clrDgPreserveSelection",rowSelectionMode:["clrDgRowSelection","rowSelectionMode"]},outputs:{refresh:"clrDgRefresh",selectedChanged:"clrDgSelectedChange",singleSelectedChanged:"clrDgSingleSelectedChange"},features:[Mt([Z1,BA,sf,Ap,Pg,Lg,m0,g0,W1,ku,Sa,HJ,M4,Rp,x4])],ngContentSelectors:B5e,decls:32,vars:7,consts:[[1,"datagrid-outer-wrapper"],[1,"datagrid-inner-wrapper"],[1,"datagrid"],["datagrid",""],[1,"datagrid-table-wrapper"],["role","grid","tabindex","-1",1,"datagrid-table"],["datagridTable",""],["role","rowgroup",1,"datagrid-header"],["role","row",1,"datagrid-row"],[1,"datagrid-row-master","datagrid-row-flex"],[1,"datagrid-row-sticky"],["role","columnheader","class","datagrid-column datagrid-select datagrid-fixed-column",4,"ngIf"],["role","columnheader","class","datagrid-column datagrid-row-actions datagrid-fixed-column",4,"ngIf"],["role","columnheader","class","datagrid-column datagrid-expandable-caret datagrid-fixed-column",4,"ngIf"],[1,"datagrid-row-scrollable"],["projectedDisplayColumns",""],["displayedRows",""],[4,"ngIf"],["class","datagrid-spinner",4,"ngIf"],[1,"datagrid-calculation-table"],[1,"datagrid-calculation-header"],["projectedCalculationColumns",""],["calculationRows",""],["role","columnheader",1,"datagrid-column","datagrid-select","datagrid-fixed-column"],[1,"clr-checkbox-wrapper"],["type","checkbox",3,"id","ngModel","ngModelChange"],[1,"clr-control-label","clr-col-null",3,"for"],[1,"clr-sr-only"],[1,"datagrid-column-separator"],["role","columnheader",1,"datagrid-column","datagrid-row-actions","datagrid-fixed-column"],["role","columnheader",1,"datagrid-column","datagrid-expandable-caret","datagrid-fixed-column"],[1,"datagrid-spinner"],["clrMedium",""]],template:function(o,c){1&o&&(Lt(V5e),Be(0),V(1,"div",0),V(2,"div",1),V(3,"div",2,3),V(5,"div",4),V(6,"div",5,6),V(8,"div",7),V(9,"div",8),V(10,"div",9),V(11,"div",10),le(12,P5e,7,5,"div",11),le(13,L5e,2,1,"div",11),le(14,O5e,2,1,"div",12),le(15,N5e,2,1,"div",13),B(),V(16,"div",14),ll(17,null,15),B(),B(),B(),B(),ll(19,null,16),Be(21,1),le(22,F5e,1,0,"clr-dg-placeholder",17),B(),B(),B(),Be(23,2),le(24,k5e,3,0,"div",18),B(),Be(25,3),B(),V(26,"div",19),V(27,"div",20),ll(28,null,21),B(),ll(30,null,22),B()),2&o&&(j(3),Ke("aria-hidden",!!c.detailService.isOpen||null),j(9),q("ngIf",c.selection.selectionType===c.SELECTION_TYPE.Multi),j(1),q("ngIf",c.selection.selectionType===c.SELECTION_TYPE.Single),j(1),q("ngIf",c.rowActionService.hasActionableRow),j(1),q("ngIf",c.expandableRows.hasExpandableRow||c.detailService.enabled),j(7),q("ngIf",!c.placeholder),j(2),q("ngIf",c.loading))},directives:[Mn,W_,$a,Cl,xi,b4,d0],encapsulation:2}),l})(),A4=(()=>{class l{constructor(o,c,u){this.el=o,this.domAdapter=c,this.organizer=u,this._resizedBy=0}get resizedBy(){return this._resizedBy}get minColumnWidth(){return this.domAdapter.minWidth(this.el.nativeElement)||96}get maxResizeRange(){return this.widthBeforeResize-this.minColumnWidth}startResize(){this._resizedBy=0,this.isWithinMaxResizeRange=!0,this.widthBeforeResize=this.domAdapter.clientRect(this.el.nativeElement).width}endResize(){this.organizer.resize()}get widthAfterResize(){return this.widthBeforeResize+this._resizedBy}calculateResize(o){o<-this.maxResizeRange?(this._resizedBy=-this.maxResizeRange,this.isWithinMaxResizeRange=!1):(this._resizedBy=o,this.isWithinMaxResizeRange=!0)}}return l.\u0275fac=function(o){return new(o||l)(be(kt),be(rc),be(Lg))},l.\u0275prov=Xe({token:l,factory:l.\u0275fac}),l})(),qJ=(()=>{class l{constructor(o,c,u,h,d,f,m){this.columnResizerService=o,this.renderer=c,this.ngZone=u,this.tableSizeService=h,this.commonString=d,this.document=f,this.columnSeparatorId=m,this.resizeStartedOnKeyDown=!1,this.unlisteners=[]}get resizeTrackerEl(){return this.resizeTrackerRef.nativeElement}get columnHandleEl(){return this.columnHandleRef.nativeElement}ngAfterViewInit(){this.ngZone.runOutsideAngular(()=>{this.unlisteners.push(this.renderer.listen(this.columnHandleEl,"keydown",o=>{this.showTrackerOnFirstKeyDown(o),this.moveTrackerOnKeyDown(o)})),this.unlisteners.push(this.renderer.listen(this.columnHandleEl,"keyup",o=>{this.hideTrackerOnKeyUp(o)}))})}get descriptionId(){return`${this.columnSeparatorId}-aria-describedby`}showTracker(){this.columnResizerService.startResize();const o=this.tableSizeService.getColumnDragHeight();this.renderer.setStyle(this.resizeTrackerEl,"height",o),this.renderer.setStyle(this.resizeTrackerEl,"display","block")}moveTracker(o){this.columnResizerService.calculateResize(o),this.renderer.setStyle(this.resizeTrackerEl,"transform",`translateX(${this.columnResizerService.resizedBy}px)`),this.renderer.setStyle(this.document.body,"cursor","col-resize"),this.redFlagTracker()}hideTracker(){this.columnResizerService.endResize(),this.renderer.setStyle(this.resizeTrackerEl,"display","none"),this.renderer.setStyle(this.resizeTrackerEl,"transform","translateX(0px)"),this.renderer.setStyle(this.document.body,"cursor","auto")}showTrackerOnFirstKeyDown(o){!this.resizeStartedOnKeyDown&&(this.isArrowLeftKeyEvent(o)||this.isArrowRightKeyEvent(o))&&(this.resizeStartedOnKeyDown=!0,this.renderer.addClass(this.resizeTrackerEl,"on-arrow-key-resize"),this.showTracker())}moveTrackerOnKeyDown(o){this.isArrowLeftKeyEvent(o)?this.moveTracker(this.columnResizerService.resizedBy-12):this.isArrowRightKeyEvent(o)&&this.moveTracker(this.columnResizerService.resizedBy+12)}hideTrackerOnKeyUp(o){this.resizeStartedOnKeyDown&&(this.isArrowLeftKeyEvent(o)||this.isArrowRightKeyEvent(o))&&(this.resizeStartedOnKeyDown=!1,this.renderer.removeClass(this.resizeTrackerEl,"on-arrow-key-resize"),this.hideTracker(),this.columnHandleEl.focus())}redFlagTracker(){this.isWithinMaxResizeRange!==this.columnResizerService.isWithinMaxResizeRange&&(this.isWithinMaxResizeRange=this.columnResizerService.isWithinMaxResizeRange,this.isWithinMaxResizeRange?this.renderer.removeClass(this.resizeTrackerEl,"exceeded-max"):this.renderer.addClass(this.resizeTrackerEl,"exceeded-max"))}isArrowLeftKeyEvent(o){return o.key===rr.ArrowLeft||o.key===Lu.ArrowLeft}isArrowRightKeyEvent(o){return o.key===rr.ArrowRight||o.key===Lu.ArrowRight}ngOnDestroy(){this.unlisteners.forEach(o=>o())}}return l.\u0275fac=function(o){return new(o||l)(O(A4),O(tr),O(Fn),O(M4),O(qr),O(Xn),O(ro))},l.\u0275cmp=Qe({type:l,selectors:[["clr-dg-column-separator"]],viewQuery:function(o,c){if(1&o&&(Cr(G5e,5),Cr(z5e,5)),2&o){let u;It(u=Rt())&&(c.resizeTrackerRef=u.first),It(u=Rt())&&(c.columnHandleRef=u.first)}},hostVars:2,hostBindings:function(o,c){2&o&&lt("datagrid-column-separator",!0)},features:[Mt([Sa])],decls:6,vars:5,consts:[["type","button","clrDraggable","",1,"datagrid-column-handle",3,"clrGroup","clrDragStart","clrDragMove","clrDragEnd"],["columnHandle",""],[1,"clr-sr-only"],[1,"datagrid-column-resize-tracker"],["resizeTracker",""]],template:function(o,c){1&o&&(V(0,"button",0,1),ze("clrDragStart",function(){return c.showTracker()})("clrDragMove",function(h){return c.moveTracker(h.dragPosition.moveX)})("clrDragEnd",function(){return c.hideTracker()}),B(),V(2,"span",2),Le(3),B(),xe(4,"div",3,4)),2&o&&(q("clrGroup",c.columnSeparatorId),Ke("aria-label",c.commonString.keys.columnSeparatorAriaLabel)("aria-describedby",c.descriptionId),j(2),Ke("id",c.descriptionId),j(1),Bi(" ",c.commonString.keys.columnSeparatorDescription," "))},directives:[NJ],encapsulation:2}),l})(),XJ=(()=>{class l{}return l.\u0275fac=function(o){return new(o||l)},l.\u0275cmp=Qe({type:l,selectors:[["clr-dg-column-toggle-title"]],ngContentSelectors:Pn,decls:1,vars:0,template:function(o,c){1&o&&(Lt(),Be(0))},encapsulation:2}),l})(),I4=(()=>{class l{constructor(o){this.columnsService=o,this.allSelected=new pt}get clrAllSelected(){return this.allSelected.asObservable()}hideableColumns(){return this.columnsService.columns.filter(o=>o.value.hideable)}get allHideablesVisible(){return 0===this.hideableColumns().filter(o=>o.value.hidden).length}selectAll(){this.hideableColumns().forEach(o=>this.columnsService.emitStateChange(o,{hidden:!1,changes:[Ca.HIDDEN]})),this.allSelected.next(!0)}}return l.\u0275fac=function(o){return new(o||l)(O(Rp))},l.\u0275cmp=Qe({type:l,selectors:[["clr-dg-column-toggle-button"]],outputs:{clrAllSelected:"clrAllSelected"},ngContentSelectors:Pn,decls:2,vars:1,consts:[["type","button",1,"btn","btn-sm","btn-link","switch-button",3,"disabled","click"]],template:function(o,c){1&o&&(Lt(),V(0,"button",0),ze("click",function(){return c.selectAll()}),Be(1),B()),2&o&&q("disabled",c.allHideablesVisible)},encapsulation:2}),l})(),R4=(()=>{class l{constructor(o,c,u,h,d,f){this.commonStrings=o,this.columnsService=c,this.columnSwitchId=u,this.platformId=h,this.zone=d,this.popoverId=f,this.smartPosition={axis:To.VERTICAL,side:Za.BEFORE,anchor:Vr.START,content:Vr.START}}get allColumnsVisible(){return this._allColumnsVisible}set allColumnsVisible(o){this._allColumnsVisible=o}get hideableColumnStates(){return this.columnsService.columns.filter(c=>c.value.hideable).map(c=>c.value)}get hasOnlyOneVisibleColumn(){return this.columnsService.columns.length-this.hideableColumnStates.length==0&&1===this.hideableColumnStates.filter(c=>!c.hidden).length}toggleColumnState(o,c){const u=this.columnsService.columns.filter(h=>h.value===o)[0];this.columnsService.emitStateChange(u,{hidden:c,changes:[Ca.HIDDEN]})}toggleSwitchPanel(){this.openState=!this.openState}allColumnsSelected(){this.allSelectedElement.nativeElement.focus()}trackByFn(o){return o}}return l.\u0275fac=function(o){return new(o||l)(O(qr),O(Rp),O(ro),O(Ui),O(Fn),O(ro))},l.\u0275cmp=Qe({type:l,selectors:[["clr-dg-column-toggle"]],contentQueries:function(o,c,u){if(1&o&&(Nn(u,XJ,5),Nn(u,I4,5)),2&o){let h;It(h=Rt())&&(c.customToggleTitle=h.first),It(h=Rt())&&(c.customToggleButton=h.first)}},viewQuery:function(o,c){if(1&o&&Cr(H5e,5,kt),2&o){let u;It(u=Rt())&&(c.allSelectedElement=u.first)}},hostVars:4,hostBindings:function(o,c){2&o&&lt("column-switch-wrapper",!0)("active",c.openState)},features:[Mt([Sa,Uh,Qd,ii])],ngContentSelectors:Z5e,decls:3,vars:8,consts:[["role","button","type","button","clrPopoverAnchor","","clrPopoverOpenCloseButton","",1,"btn","btn-sm","btn-link","column-toggle--action"],["shape","view-columns","aria-hidden","true"],["class","column-switch","role","dialog","clrFocusTrap","",3,"id",4,"clrPopoverContent","clrPopoverContentAt","clrPopoverContentOutsideClickToClose","clrPopoverContentScrollToClose"],["role","dialog","clrFocusTrap","",1,"column-switch",3,"id"],[1,"switch-header"],["tabindex","-1",1,"clr-sr-only"],["allSelected",""],[4,"ngIf"],["clrPopoverCloseButton","","type","button",1,"btn","btn-sm","btn-link","toggle-switch-close-button"],["shape","window-close","aria-hidden","true"],[1,"switch-content","list-unstyled"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"switch-footer"],[3,"clrAllSelected",4,"ngIf"],["clrCheckbox","","type","checkbox",3,"disabled","ngModel","ngModelChange"],[3,"ngTemplateOutlet"],[3,"clrAllSelected"]],template:function(o,c){1&o&&(Lt(Y5e),V(0,"button",0),xe(1,"cds-icon",1),B(),le(2,$5e,14,10,"div",2)),2&o&&(Ke("aria-controls",c.popoverId)("aria-owns",c.popoverId)("title",c.commonStrings.keys.pickColumns),j(1),Ke("title",c.commonStrings.keys.pickColumns),j(1),q("clrPopoverContent",c.openState)("clrPopoverContentAt",c.smartPosition)("clrPopoverContentOutsideClickToClose",!0)("clrPopoverContentScrollToClose",!0))},directives:function(){return[s0,r0,zr,n0,Mp,Mn,oJ,Gi,ZJ,bA,W_,SA,$a,Cl,xi,fh,I4]},encapsulation:2}),l})(),YJ=(()=>{class l{constructor(o,c,u){this.selection=o,this.detailService=c,this.columnsService=u,this.SELECTION_TYPE=ci}get hasHideableColumns(){return this.columnsService.hasHideableColumns}}return l.\u0275fac=function(o){return new(o||l)(O(Z1),O(ku),O(Rp))},l.\u0275cmp=Qe({type:l,selectors:[["clr-dg-footer"]],contentQueries:function(o,c,u){if(1&o&&Nn(u,R4,5),2&o){let h;It(h=Rt())&&(c.toggle=h.first)}},hostVars:2,hostBindings:function(o,c){2&o&&lt("datagrid-footer",!0)},ngContentSelectors:rUe,decls:3,vars:2,consts:[[4,"ngIf"],[1,"clr-form-control-disabled"],[1,"datagrid-footer-select"],["clrCheckbox","","type","checkbox","checked","checked","disabled",""],[1,"datagrid-footer-description"]],template:function(o,c){1&o&&(Lt(nUe),le(0,Q5e,6,1,"ng-container",0),le(1,tUe,5,1,"ng-container",0),Be(2)),2&o&&(q("ngIf",c.selection.selectionType===c.SELECTION_TYPE.Multi&&c.selection.current.length>0),j(1),q("ngIf",!c.detailService.isOpen))},directives:[Mn,bA,SA,xi,R4],encapsulation:2}),l})();const P4=new Sn("COLUMN_STATE"),Dze={provide:P4,useFactory:function(){return new ni({changes:[]})}};let ZJ=(()=>{class l{constructor(o){this._items=o}set trackBy(o){this._items&&(this._items.trackBy=o)}}return l.\u0275fac=function(o){return new(o||l)(O(Pg,8))},l.\u0275dir=Ze({type:l,selectors:[["","ngForTrackBy",""]],inputs:{trackBy:["ngForTrackBy","trackBy"]}}),l})();const y0="datagrid-fixed-width",HA="datagrid-hidden-column";let jA=(()=>{class l{constructor(o,c,u){this.el=o,this.renderer=c,this.subscriptions=[],this.subscriptions.push(u.filterRenderSteps(ic.CLEAR_WIDTHS).subscribe(()=>this.clearWidth()))}set columnState(o){this.stateSubscription&&this.stateSubscription.unsubscribe(),this.runAllChanges=jJ,this.stateSubscription=o.subscribe(c=>this.stateChanges(c))}ngOnDestroy(){this.subscriptions.forEach(o=>o.unsubscribe()),this.stateSubscription&&this.stateSubscription.unsubscribe()}stateChanges(o){this.runAllChanges&&(o.changes=this.runAllChanges,delete this.runAllChanges),o.changes&&o.changes.length&&o.changes.forEach(c=>{switch(c){case Ca.WIDTH:this.setWidth(o);break;case Ca.HIDDEN:this.setHidden(o)}})}clearWidth(){this.renderer.removeClass(this.el.nativeElement,y0),this.renderer.setStyle(this.el.nativeElement,"width",null)}setWidth(o){o.strictWidth?this.renderer.addClass(this.el.nativeElement,y0):this.renderer.removeClass(this.el.nativeElement,y0),this.renderer.setStyle(this.el.nativeElement,"width",o.width+"px")}setHidden(o){o.hidden?this.renderer.addClass(this.el.nativeElement,HA):this.renderer.removeClass(this.el.nativeElement,HA)}}return l.\u0275fac=function(o){return new(o||l)(O(kt),O(tr),O(Lg))},l.\u0275dir=Ze({type:l,selectors:[["clr-dg-cell"]]}),l})(),WA=(()=>{class l{constructor(o,c,u,h,d,f,m){this.el=o,this.renderer=c,this.organizer=u,this.domAdapter=h,this.columnResizerService=d,this.columnsService=f,this.columnState=m,this.resizeEmitter=new pt,this.widthSet=!1,this.autoSet=!1,this.subscriptions=[],this.subscriptions.push(this.organizer.filterRenderSteps(ic.CLEAR_WIDTHS).subscribe(()=>this.clearWidth())),this.subscriptions.push(m.subscribe(g=>this.stateChanges(g)))}ngOnDestroy(){this.subscriptions.forEach(o=>o.unsubscribe())}stateChanges(o){o.changes&&o.changes.length&&o.changes.forEach(c=>{switch(c){case Ca.WIDTH:this.setWidth(o);break;case Ca.HIDDEN:this.setHidden(o)}})}clearWidth(){this.widthSet&&!this.columnResizerService.resizedBy&&this.renderer.setStyle(this.el.nativeElement,"width",null),this.autoSet&&this.renderer.removeClass(this.el.nativeElement,y0)}detectStrictWidth(){return this.columnResizerService.resizedBy?this.columnResizerService.widthAfterResize:this.autoSet?0:this.domAdapter.userDefinedWidth(this.el.nativeElement)}computeWidth(o){let c=o;return c||(c=this.domAdapter.scrollWidth(this.el.nativeElement)),c}getColumnWidthState(){const o=this.detectStrictWidth();return{width:this.computeWidth(o),strictWidth:o}}setColumnState(o){this.columnsService.columns[o]=this.columnState}setWidth(o){o.strictWidth?(this.columnResizerService.resizedBy&&(this.resizeEmitter.emit(o.width),this.renderer.setStyle(this.el.nativeElement,"width",o.width+"px"),this.widthSet=!1),this.renderer.addClass(this.el.nativeElement,y0),this.autoSet=!1):(this.renderer.removeClass(this.el.nativeElement,y0),this.renderer.setStyle(this.el.nativeElement,"width",o.width+"px"),this.widthSet=!0,this.autoSet=!0)}setHidden(o){o.hidden?this.renderer.addClass(this.el.nativeElement,HA):this.renderer.removeClass(this.el.nativeElement,HA)}}return l.\u0275fac=function(o){return new(o||l)(O(kt),O(tr),O(Lg),O(rc),O(A4),O(Rp),O(P4))},l.\u0275dir=Ze({type:l,selectors:[["clr-dg-column"]],outputs:{resizeEmitter:"clrDgColumnResize"},features:[Mt([A4,Dze])]}),l})(),Pze=(()=>{class l{userDefinedWidth(o){return 0}scrollBarWidth(o){return 0}scrollWidth(o){return 0}computedHeight(o){return 0}clientRect(o){return{top:0,bottom:0,left:0,right:0,width:0,height:0}}minWidth(o){return 0}focus(o){}}return l.\u0275fac=function(o){return new(o||l)},l.\u0275prov=Xe({token:l,factory:l.\u0275fac}),l})(),qA=(()=>{class l{constructor(o){this.columnsService=o,this.subscriptions=[]}ngAfterContentInit(){this.setColumnState(),this.subscriptions.push(this.cells.changes.subscribe(()=>{this.setColumnState()}))}ngOnDestroy(){this.subscriptions.forEach(o=>o.unsubscribe())}setColumnState(){this.cells.length===this.columnsService.columns.length&&this.cells.forEach((o,c)=>{this.columnsService.columns[c]&&(o.columnState=this.columnsService.columns[c])})}}return l.\u0275fac=function(o){return new(o||l)(O(Rp))},l.\u0275dir=Ze({type:l,selectors:[["clr-dg-row"],["clr-dg-row-detail"]],contentQueries:function(o,c,u){if(1&o&&Nn(u,jA,4),2&o){let h;It(h=Rt())&&(c.cells=h)}}}),l})();const Lze=l=>ti(l)?new rc:new Pze;let L4=(()=>{class l{constructor(o,c,u,h,d,f,m,g,y){this.organizer=o,this.items=c,this.page=u,this.domAdapter=h,this.el=d,this.renderer=f,this.detailService=m,this.tableSizeService=g,this.columnsService=y,this._heightSet=!1,this.subscriptions=[],this.columnsSizesStable=!1,this.shouldStabilizeColumns=!0,this.subscriptions.push(this.organizer.filterRenderSteps(ic.COMPUTE_COLUMN_WIDTHS).subscribe(()=>this.computeHeadersWidth())),this.subscriptions.push(this.page.sizeChange.subscribe(()=>{this._heightSet&&this.resetDatagridHeight()})),this.subscriptions.push(this.detailService.stateChange.subscribe(v=>this.toggleDetailPane(v))),this.subscriptions.push(this.items.change.subscribe(()=>this.shouldStabilizeColumns=!0))}ngAfterContentInit(){this.setupColumns(),this.subscriptions.push(this.headers.changes.subscribe(()=>{this.setupColumns(),this.columnsSizesStable=!1,this.stabilizeColumns()}))}ngAfterViewInit(){this.tableSizeService.table=this.el}ngAfterViewChecked(){this.shouldStabilizeColumns&&this.stabilizeColumns(),this.shouldComputeHeight()&&setTimeout(()=>{this.computeDatagridHeight()})}setupColumns(){this.headers.forEach((o,c)=>o.setColumnState(c)),this.columnsService.columns.splice(this.headers.length),this.rows.forEach(o=>o.setColumnState())}shouldComputeHeight(){return!this._heightSet&&this.page.size>0&&this.items.displayed.length===this.page.size}toggleDetailPane(o){this.headers&&(o&&!this.columnsService.hasCache()?(this.columnsService.cache(),this.headers.forEach((c,u)=>{u>0&&this.columnsService.emitStateChangeAt(u,{changes:[Ca.HIDDEN],hidden:o})})):o||this.columnsService.resetToLastCache())}computeDatagridHeight(){const o=this.domAdapter.clientRect(this.el.nativeElement).height;this.renderer.setStyle(this.el.nativeElement,"height",o+"px"),this._heightSet=!0}resetDatagridHeight(){this.renderer.setStyle(this.el.nativeElement,"height",""),this._heightSet=!1}ngOnDestroy(){this.subscriptions.forEach(o=>o.unsubscribe())}computeHeadersWidth(){const o=this.headers.length;let c=!0;this.headers.forEach((u,h)=>{const d=Object.assign({changes:[Ca.WIDTH]},u.getColumnWidthState());d.strictWidth||(c=!1),o===h+1&&c&&(d.strictWidth=0),this.columnsService.emitStateChangeAt(h,d)})}stabilizeColumns(){this.shouldStabilizeColumns=!1,!this.columnsSizesStable&&this.items.displayed.length>0&&(this.organizer.resize(),this.columnsSizesStable=!0)}}return l.\u0275fac=function(o){return new(o||l)(O(Lg),O(Pg),O(Ap),O(rc),O(kt),O(tr),O(ku),O(M4),O(Rp))},l.\u0275dir=Ze({type:l,selectors:[["clr-datagrid"]],contentQueries:function(o,c,u){if(1&o&&(Nn(u,WA,4),Nn(u,qA,5)),2&o){let h;It(h=Rt())&&(c.headers=h),It(h=Rt())&&(c.rows=h)}},features:[Mt([{provide:rc,useFactory:Lze,deps:[Ui]}])]}),l})(),Oze=(()=>{class l{constructor(){li.addIcons(BFe,UFe,_1,GFe,zFe,HFe,dZ,jFe,WFe)}}return l.\u0275fac=function(o){return new(o||l)},l.\u0275mod=Yt({type:l}),l.\u0275inj=jt({imports:[[sr,gi,IJ,kh,d4,Bc,dze,kJ,FJ,H1,V1,wA,Ag]]}),l})(),Gze=(()=>{class l{constructor(){li.addIcons(G_)}}return l.\u0275fac=function(o){return new(o||l)},l.\u0275mod=Yt({type:l}),l.\u0275inj=jt({imports:[[sr,kh,gi,kJ]]}),l})();new Zo,new Qc;let $ze=(()=>{class l{constructor(){li.addIcons(G_)}}return l.\u0275fac=function(o){return new(o||l)},l.\u0275mod=Yt({type:l}),l.\u0275inj=jt({imports:[[sr,gi,d4]]}),l})(),Yze=(()=>{class l{}return l.\u0275fac=function(o){return new(o||l)},l.\u0275mod=Yt({type:l}),l.\u0275inj=jt({imports:[Oze,Gze,$ze]}),l})();class iQ{static linkParent(a,o,c){a.forEach(u=>u[c]=o)}static linkVertical(a,o=!0){a.forEach((c,u)=>{u>0&&(c.up=a[u-1]),u<a.length-1&&(c.down=a[u+1])}),o&&a.length>1&&(a[0].up=a[a.length-1],a[a.length-1].down=a[0])}}function sQ(l,a,o){return yt.create(c=>{a(c);const u=l.subscribe(c);return()=>{u.unsubscribe(),o&&o(c)}})}EJ((()=>{class l{constructor(o,c,u,h,d,f){this.id=o,this.renderer=c,this.parent=u,this.toggleService=h,this.focusService=d,this.platformId=f,this._unlistenFuncs=[],this.focusBackOnTrigger=!1,this.resetChildren(),this.moveToFirstItemWhenOpen(),this.parent||this.handleRootFocus()}moveToFirstItemWhenOpen(){this.toggleService.openChange.subscribe(o=>{o&&this.toggleService.originalEvent&&setTimeout(()=>{this.focusService.moveTo(this),this.focusService.move(this.parent?Qa.RIGHT:Qa.DOWN)})})}handleRootFocus(){this.toggleService.openChange.subscribe(o=>{o||(this.focusService.reset(this),this.focusBackOnTrigger&&this.focus()),this.focusBackOnTrigger=o})}get trigger(){return this._trigger}set trigger(o){this._trigger=o,this.parent?this._unlistenFuncs.push(this.renderer.listen(o,"keydown.arrowright",c=>this.toggleService.toggleWithEvent(c))):(this._unlistenFuncs.push(this.renderer.listen(o,"keydown.arrowup",c=>this.toggleService.toggleWithEvent(c))),this._unlistenFuncs.push(this.renderer.listen(o,"keydown.arrowdown",c=>this.toggleService.toggleWithEvent(c))),this.focusService.listenToArrowKeys(o))}get container(){return this._container}set container(o){this._container=o,this._unlistenFuncs.push(this.renderer.listen(o,"keydown.tab",c=>this.toggleService.toggleWithEvent(c))),this.parent?this._unlistenFuncs.push(this.renderer.listen(o,"keydown.esc",c=>{this.focusService.move(Qa.LEFT),c.stopPropagation()})):(this.focusService.registerContainer(o),this._unlistenFuncs.push(this.renderer.listen(o,"keydown.esc",c=>this.toggleService.toggleWithEvent(c))),this._unlistenFuncs.push(this.renderer.listen(o,"blur",c=>{this.children.pipe(Hf(1)).subscribe(h=>h.forEach(d=>d.blur()));const u=c.relatedTarget||document.activeElement;u&&ti(this.platformId)&&(o.contains(u)||u===this.trigger)||(this.focusBackOnTrigger=!1,this.toggleService.open=!1)})))}focus(){this.trigger&&ti(this.platformId)&&this.trigger.focus()}blur(){this.trigger&&ti(this.platformId)&&this.trigger.blur()}activate(){ti(this.platformId)&&this.trigger.click()}openAndGetChildren(){return sQ(this.children,()=>this.toggleService.open=!0)}closeAndGetThis(){return sQ(qt(this),()=>this.toggleService.open=!1)}resetChildren(){this.children=new qD(1),this.parent?this.right=this.openAndGetChildren().pipe(pe(o=>o[0])):(this.down=this.openAndGetChildren().pipe(pe(o=>o[0])),this.up=this.openAndGetChildren().pipe(pe(o=>o[o.length-1])))}addChildren(o){iQ.linkVertical(o),this.parent&&iQ.linkParent(o,this.closeAndGetThis(),Qa.LEFT),this.children.next(o)}ngOnDestroy(){this._unlistenFuncs.forEach(o=>o()),this.focusService.detachListeners()}}return l.\u0275fac=function(o){return new(o||l)(be(ro),be(tr),be(l,12),be(ii),be(IA),be(Ui))},l.\u0275prov=Xe({token:l,factory:l.\u0275fac}),l})());new Zo,new Qc;var dt=(()=>(function(l){l[l.RIGHT_CENTER=0]="RIGHT_CENTER",l[l.RIGHT_TOP=1]="RIGHT_TOP",l[l.RIGHT_BOTTOM=2]="RIGHT_BOTTOM",l[l.TOP_CENTER=3]="TOP_CENTER",l[l.TOP_RIGHT=4]="TOP_RIGHT",l[l.TOP_LEFT=5]="TOP_LEFT",l[l.BOTTOM_CENTER=6]="BOTTOM_CENTER",l[l.BOTTOM_RIGHT=7]="BOTTOM_RIGHT",l[l.BOTTOM_LEFT=8]="BOTTOM_LEFT",l[l.LEFT_CENTER=9]="LEFT_CENTER",l[l.LEFT_TOP=10]="LEFT_TOP",l[l.LEFT_BOTTOM=11]="LEFT_BOTTOM"}(dt||(dt={})),dt))();const oQ="absolute";class i8e{constructor(a){this.element=a,this.scrollableElements=[],this.boundOnScrollListener=this.emitScrollEvent.bind(this),a.style.position=oQ,a.style.top=0,a.style.bottom="auto",a.style.left=0,a.style.right="auto"}anchor(a,o,c,{offsetX:u=0,offsetY:h=0,useAnchorParent:d=!1}={}){this.addScrollEventListeners(a),d&&(a=a.parentNode),a.style.position="static";const f=a.getBoundingClientRect(),m=this.element.getBoundingClientRect();let g=f.left-m.left+u,y=f.top-m.top+h;switch(o){case dt.LEFT_TOP:case dt.TOP_LEFT:break;case dt.TOP_CENTER:g+=f.width/2;break;case dt.TOP_RIGHT:case dt.RIGHT_TOP:g+=f.width;break;case dt.LEFT_BOTTOM:case dt.BOTTOM_LEFT:y+=f.height;break;case dt.BOTTOM_CENTER:y+=f.height,g+=f.width/2;break;case dt.BOTTOM_RIGHT:case dt.RIGHT_BOTTOM:y+=f.height,g+=f.width;break;case dt.LEFT_CENTER:y+=f.height/2;break;case dt.RIGHT_CENTER:y+=f.height/2,g+=f.width}switch(c){case dt.LEFT_TOP:case dt.TOP_LEFT:break;case dt.TOP_CENTER:g-=m.width/2;break;case dt.TOP_RIGHT:case dt.RIGHT_TOP:g-=m.width;break;case dt.LEFT_BOTTOM:case dt.BOTTOM_LEFT:y-=m.height;break;case dt.BOTTOM_CENTER:y-=m.height,g-=m.width/2;break;case dt.BOTTOM_RIGHT:case dt.RIGHT_BOTTOM:y-=m.height,g-=m.width;break;case dt.LEFT_CENTER:y-=m.height/2;break;case dt.RIGHT_CENTER:y-=m.height/2,g-=m.width}const v=getComputedStyle(this.element),_=parseInt(v.marginLeft,10),b=parseInt(v.marginRight,10),w=parseInt(v.marginTop,10),C=parseInt(v.marginBottom,10);switch(o){case dt.LEFT_TOP:case dt.TOP_LEFT:case dt.TOP_RIGHT:case dt.RIGHT_TOP:(c===dt.BOTTOM_RIGHT||c===dt.RIGHT_BOTTOM)&&(y-=C,g-=b),(c===dt.BOTTOM_LEFT||c===dt.LEFT_BOTTOM)&&(y-=w,g+=_),(c===dt.TOP_LEFT||c===dt.LEFT_TOP)&&(y+=w,g+=_),(c===dt.TOP_RIGHT||c===dt.RIGHT_TOP)&&(y+=w,g-=b);break;case dt.LEFT_BOTTOM:case dt.BOTTOM_LEFT:case dt.BOTTOM_RIGHT:case dt.RIGHT_BOTTOM:(c===dt.BOTTOM_LEFT||c===dt.LEFT_BOTTOM)&&(y-=C,g+=_),(c===dt.BOTTOM_RIGHT||c===dt.RIGHT_BOTTOM)&&(y-=C,g-=b),(c===dt.TOP_LEFT||c===dt.LEFT_TOP)&&(y+=w,g+=_),(c===dt.TOP_RIGHT||c===dt.RIGHT_TOP)&&(y+=w,g-=b);break;case dt.TOP_CENTER:y-=C,g+=_,g-=b;break;case dt.BOTTOM_CENTER:y+=w,g+=_,g-=b;break;case dt.LEFT_CENTER:y+=w,y-=C,g-=b;break;case dt.RIGHT_CENTER:y+=w,y-=C,g+=_}return this.element.style.transform=`translateX(${Math.round(g)}px) translateY(${Math.round(y)}px)`,this._scroll.asObservable()}release(){this.element.style.transform="",this.removeScrollEventListeners()}isPositioned(a){const o=getComputedStyle(a).position;return"relative"===o||o===oQ||"fixed"===o}emitScrollEvent(){this._scroll.next()}addScrollEventListeners(a){this._scroll=new tt;const o=a;let c=a;for(;c&&c!==document&&(this.scrolls(c)&&(c.addEventListener("scroll",this.boundOnScrollListener),this.scrollableElements.push(c)),c===o||!this.isPositioned(c));)c=c.parentNode}removeScrollEventListeners(){for(const a of this.scrollableElements)a.removeEventListener("scroll",this.boundOnScrollListener);this.scrollableElements.length=0,this._scroll&&(this._scroll.complete(),delete this._scroll)}scrolls(a){const o=getComputedStyle(a);return"scroll"===o.overflowX||"auto"===o.overflowX||"scroll"===o.overflowY||"auto"===o.overflowY}}let k4=(()=>{class l{constructor(o,c){this.parentHost=c,this.updateAnchor=!1,this.popoverOptions={},this.closeOnOutsideClick=!1,this.el=o.get(kt),this.toggleService=o.get(ii),this.renderer=o.get(tr),this.anchorElem=c.nativeElement,this.popoverInstance=new i8e(this.el.nativeElement),this.subscription=this.toggleService.openChange.subscribe(u=>{u?(this.anchor(),this.attachESCListener()):(this.release(),this.detachESCListener())}),this.toggleService.open&&(this.anchor(),this.attachESCListener())}anchor(){this.updateAnchor=!0,this.ignore=this.toggleService.originalEvent}release(){this.detachOutsideClickListener(),this.popoverInstance.release()}ngAfterViewChecked(){this.updateAnchor&&(this.updateAnchor=!1,this.popoverInstance.anchor(this.anchorElem,this.anchorPoint,this.popoverPoint,this.popoverOptions).subscribe(()=>{this.toggleService.open=!1}),this.attachOutsideClickListener())}ngOnDestroy(){this.release(),this.detachESCListener(),this.subscription.unsubscribe()}get isOffScreen(){return!this.toggleService.open}attachESCListener(){this.popoverOptions.ignoreGlobalESCListener||(this.documentESCListener=this.renderer.listen("document","keydown",o=>{o&&o.key&&("Escape"===o.key||"Esc"===o.key)&&(this.toggleService.open=!1)}))}detachESCListener(){this.documentESCListener&&(this.documentESCListener(),delete this.documentESCListener)}attachOutsideClickListener(){this.closeOnOutsideClick&&(this.hostClickListener=this.renderer.listen(this.el.nativeElement,"click",o=>this.ignore=o),this.ignoredElement&&(this.ignoredElementClickListener=this.renderer.listen(this.ignoredElement,"click",o=>this.ignore=o)),this.documentClickListener=this.renderer.listen("document","click",o=>{o===this.ignore?delete this.ignore:this.toggleService.open=!1}))}detachOutsideClickListener(){this.closeOnOutsideClick&&(this.hostClickListener&&(this.hostClickListener(),delete this.hostClickListener),this.ignoredElementClickListener&&(this.ignoredElementClickListener(),delete this.ignoredElementClickListener),this.documentClickListener&&(this.documentClickListener(),delete this.documentClickListener))}}return l.\u0275fac=function(o){return new(o||l)(O(Qn),O(kt,4))},l.\u0275dir=Ze({type:l,hostVars:2,hostBindings:function(o,c){2&o&&lt("is-off-screen",c.isOffScreen)}}),l})(),V4=(()=>{class l{}return l.\u0275fac=function(o){return new(o||l)},l.\u0275mod=Yt({type:l}),l.\u0275inj=jt({imports:[[sr],Bc,gi]}),l})(),U4=(()=>{class l{}return l.\u0275fac=function(o){return new(o||l)},l.\u0275dir=Ze({type:l,selectors:[["",8,"alert-text"]]}),l})(),hQ=(()=>{class l{constructor(){li.addIcons(Jl,fZ,Kl,qFe,_1)}}return l.\u0275fac=function(o){return new(o||l)},l.\u0275mod=Yt({type:l}),l.\u0275inj=jt({imports:[[sr,gi,V4]]}),l})(),u8e=(()=>{class l{}return l.\u0275fac=function(o){return new(o||l)},l.\u0275mod=Yt({type:l}),l.\u0275inj=jt({imports:[hQ]}),l})(),ps=(()=>{class l{}return l.NAV_LEVEL_1=1,l.NAV_LEVEL_2=2,l.NAV_CLOSE_ALL="NAV_CLOSE_ALL",l.NAV_OPEN="NAV_OPEN",l.NAV_CLOSE="NAV_CLOSE",l.NAV_TOGGLE="NAV_TOGGLE",l.NAV_CLASS_HAMBURGER_MENU="open-hamburger-menu",l.NAV_CLASS_OVERFLOW_MENU="open-overflow-menu",l.NAV_CLASS_TRIGGER_1="header-hamburger-trigger",l.NAV_CLASS_TRIGGER_2="header-overflow-trigger",l.NAV_CLASS_LEVEL_1="clr-nav-level-1",l.NAV_CLASS_LEVEL_2="clr-nav-level-2",l})();class dQ{constructor(a,o){this._controlCode=a,this._navLevel=o}get controlCode(){return this._controlCode}get navLevel(){return this._navLevel}}let ZA=(()=>{class l{constructor(){this.responsiveNavList=[],this.registerNavSubject=new qD,this.controlNavSubject=new tt,this.closeAllNavs()}get registeredNavs(){return this.registerNavSubject.asObservable()}get navControl(){return this.controlNavSubject.asObservable()}registerNav(o){!o||this.isNavRegistered(o)||(this.responsiveNavList.push(o),this.registerNavSubject.next(this.responsiveNavList))}isNavRegistered(o){return this.responsiveNavList.indexOf(o)>-1&&(console.error("Multiple clr-nav-level "+o+" attributes found. Please make sure that only one exists"),!0)}unregisterNav(o){const c=this.responsiveNavList.indexOf(o);c>-1&&(this.responsiveNavList.splice(c,1),this.registerNavSubject.next(this.responsiveNavList))}sendControlMessage(o,c){const u=new dQ(o,c);this.controlNavSubject.next(u)}closeAllNavs(){const o=new dQ(ps.NAV_CLOSE_ALL,-999);this.controlNavSubject.next(o)}}return l.\u0275fac=function(o){return new(o||l)},l.\u0275prov=Xe({factory:function(){return new l},token:l,providedIn:"root"}),l})(),fQ=(()=>{class l{constructor(o,c){this.elRef=o,this.responsiveNavService=c}ngOnInit(){this._classList=this.elRef.nativeElement.classList,this._subscription=this.responsiveNavService.navControl.subscribe({next:o=>{this.processMessage(o)}})}processMessage(o){let c=ps.NAV_CLASS_HAMBURGER_MENU;o.controlCode===ps.NAV_CLOSE_ALL?(this._classList.remove(ps.NAV_CLASS_HAMBURGER_MENU),this._classList.remove(ps.NAV_CLASS_OVERFLOW_MENU)):o.navLevel===ps.NAV_LEVEL_1?this.controlNav(o.controlCode,c):o.navLevel===ps.NAV_LEVEL_2&&(c=ps.NAV_CLASS_OVERFLOW_MENU,this.controlNav(o.controlCode,c))}controlNav(o,c){o===ps.NAV_OPEN?this._classList.add(c):o===ps.NAV_CLOSE?this._classList.remove(c):o===ps.NAV_TOGGLE&&this._classList.toggle(c)}ngOnDestroy(){this._subscription.unsubscribe()}}return l.\u0275fac=function(o){return new(o||l)(O(kt),O(ZA))},l.\u0275dir=Ze({type:l,selectors:[["clr-main-container"]],hostVars:2,hostBindings:function(o,c){2&o&&lt("main-container",!0)}}),l})(),h8e=(()=>{class l{}return l.\u0275fac=function(o){return new(o||l)},l.\u0275mod=Yt({type:l}),l.\u0275inj=jt({imports:[[sr,gi]]}),l})(),G4=(()=>{class l extends f0{}return l.\u0275fac=function(){let a;return function(c){return(a||(a=Fs(l)))(c||l)}}(),l.\u0275dir=Ze({type:l,selectors:[["clr-main-container"]],features:[on]}),l})(),pQ=(()=>{class l extends p0{constructor(o,c,u){if(!c)throw new Error("clr-header should only be used inside of a clr-main-container");super(o,c),this.responsiveNavService=u}get flavor(){return this.responsiveNavService.responsiveNavList.reduce((o,c)=>o+c,0)}}return l.\u0275fac=function(o){return new(o||l)(O(go),O(G4,8),O(ZA))},l.\u0275dir=Ze({type:l,selectors:[["clr-header"]],features:[on]}),l})(),mQ=(()=>{class l{constructor(o,c){this.responsiveNavService=o,this.commonStrings=c,this.isNavLevel1OnPage=!1,this.isNavLevel2OnPage=!1,this.openNavLevel=null,this.responsiveNavCodes=ps,this._subscription=this.responsiveNavService.registeredNavs.subscribe({next:u=>{this.initializeNavTriggers(u)}})}resetNavTriggers(){this.isNavLevel1OnPage=!1,this.isNavLevel2OnPage=!1}initializeNavTriggers(o){this.resetNavTriggers(),o.length>2?console.error("More than 2 Nav Levels detected."):o.forEach(c=>{c===ps.NAV_LEVEL_1?this.isNavLevel1OnPage=!0:c===ps.NAV_LEVEL_2&&(this.isNavLevel2OnPage=!0)})}closeOpenNav(){this.responsiveNavService.closeAllNavs()}toggleNav(o){this.openNavLevel=this.openNavLevel===o?null:o,this.responsiveNavService.sendControlMessage(ps.NAV_TOGGLE,o)}ngOnDestroy(){this._subscription.unsubscribe()}}return l.\u0275fac=function(o){return new(o||l)(O(ZA),O(qr))},l.\u0275cmp=Qe({type:l,selectors:[["clr-header"]],hostVars:2,hostBindings:function(o,c){2&o&&lt("header",!0)},ngContentSelectors:Pn,decls:4,vars:2,consts:[["type","button","class","header-hamburger-trigger",3,"click",4,"ngIf"],["type","button","class","header-overflow-trigger",3,"click",4,"ngIf"],[1,"header-backdrop",3,"click"],["type","button",1,"header-hamburger-trigger",3,"click"],["type","button",1,"header-overflow-trigger",3,"click"]],template:function(o,c){1&o&&(Lt(),le(0,qUe,2,1,"button",0),Be(1),le(2,XUe,2,1,"button",1),V(3,"div",2),ze("click",function(){return c.closeOpenNav()}),B()),2&o&&(q("ngIf",c.isNavLevel1OnPage),j(2),q("ngIf",c.isNavLevel2OnPage))},directives:[Mn],encapsulation:2}),l})(),Vu=(()=>{class l{constructor(o,c){this.responsiveNavService=o,this.elementRef=c}ngOnInit(){this.level===ps.NAV_LEVEL_1||this.level===ps.NAV_LEVEL_2?(this.responsiveNavService.registerNav(this.level),this.addNavClass(this.level)):console.error("Nav Level can only be 1 or 2")}addNavClass(o){const c=this.elementRef.nativeElement.classList;o===ps.NAV_LEVEL_1?c.add(ps.NAV_CLASS_LEVEL_1):o===ps.NAV_LEVEL_2&&c.add(ps.NAV_CLASS_LEVEL_2)}get level(){return this._level}get responsiveNavCodes(){return ps}open(){this.responsiveNavService.sendControlMessage(ps.NAV_OPEN,this.level)}close(){this.responsiveNavService.sendControlMessage(ps.NAV_CLOSE,this.level)}onMouseClick(o){let c=o;const u=this.elementRef.nativeElement;for(;c;){if(c===u)return;if(c.classList.contains("nav-link"))return void this.close();c=c.parentNode}}ngOnDestroy(){this.responsiveNavService.unregisterNav(this.level)}}return l.\u0275fac=function(o){return new(o||l)(O(ZA),O(kt))},l.\u0275dir=Ze({type:l,selectors:[["","clr-nav-level",""]],hostBindings:function(o,c){1&o&&ze("click",function(h){return c.onMouseClick(h.target)})},inputs:{_level:["clr-nav-level","_level"]}}),l})(),d8e=(()=>{class l{}return l.\u0275fac=function(o){return new(o||l)},l.\u0275mod=Yt({type:l}),l.\u0275inj=jt({imports:[[sr,gi,V4]]}),l})(),f8e=(()=>{class l{}return l.\u0275fac=function(o){return new(o||l)},l.\u0275mod=Yt({type:l}),l.\u0275inj=jt({imports:[[sr]]}),l})();new Sn("TABS_ID");let S8e=(()=>{class l{constructor(){li.addIcons(hZ)}}return l.\u0275fac=function(o){return new(o||l)},l.\u0275mod=Yt({type:l}),l.\u0275inj=jt({imports:[[sr,Bc,gi,f8e,AJ],Bc]}),l})(),j4=(()=>{class l{constructor(){this.navGroupCount=0}registerNavGroup(){this.navGroupCount++}unregisterNavGroup(){this.navGroupCount--}}return l.\u0275fac=function(o){return new(o||l)},l.\u0275prov=Xe({token:l,factory:l.\u0275fac}),l})(),W4=(()=>{class l{constructor(){this._icons=0}get hasIcons(){return this._icons>0}registerIcon(){this._icons++}unregisterIcon(){this._icons--}}return l.\u0275fac=function(o){return new(o||l)},l.\u0275prov=Xe({token:l,factory:l.\u0275fac}),l})(),q4=(()=>{class l{constructor(){this._animateOnCollapsed=new tt,this._collapsedChanged=new tt,this._collapsed=!1,this._collapsible=!1}get animateOnCollapsed(){return this._animateOnCollapsed.asObservable()}get collapsedChanged(){return this._collapsedChanged.asObservable()}get collapsed(){return this._collapsed}set collapsed(o){o=!!o,this.collapsible&&this._collapsed!==o&&this.updateCollapseBehavior(o)}get collapsible(){return this._collapsible}set collapsible(o){this._collapsible!==(o=!!o)&&(!o&&this.collapsed&&this.updateCollapseBehavior(!1),this._collapsible=o)}updateCollapseBehavior(o){this._animateOnCollapsed.next(o),this._collapsed=o,this._collapsedChanged.next(o)}}return l.\u0275fac=function(o){return new(o||l)},l.\u0275prov=Xe({token:l,factory:l.\u0275fac}),l})(),Hh=(()=>{class l{constructor(o,c,u,h){this._navService=o,this._navIconService=c,this._navGroupRegistrationService=u,this.commonStrings=h,this._collapsedChanged=new pt(!0),this._sub=this._navService.collapsedChanged.subscribe(d=>{this._collapsedChanged.emit(d)})}get collapsible(){return this._navService.collapsible}set collapsible(o){this._navService.collapsible=o}get collapsed(){return this._navService.collapsed}set collapsed(o){this._navService.collapsed=o}get hasNavGroups(){return this._navGroupRegistrationService.navGroupCount>0}get hasIcons(){return this._navIconService.hasIcons}get ariaExpanded(){return this.collapsible?this.collapsed?"false":"true":null}toggleByButton(){this.collapsed=!this.collapsed}ngOnDestroy(){this._sub.unsubscribe()}}return l.\u0275fac=function(o){return new(o||l)(O(q4),O(W4),O(j4),O(qr))},l.\u0275cmp=Qe({type:l,selectors:[["clr-vertical-nav"]],hostAttrs:[1,"clr-vertical-nav"],hostVars:6,hostBindings:function(o,c){2&o&&lt("is-collapsed",c.collapsed)("has-nav-groups",c.hasNavGroups)("has-icons",c.hasIcons)},inputs:{collapsible:["clrVerticalNavCollapsible","collapsible"],collapsed:["clrVerticalNavCollapsed","collapsed"]},outputs:{_collapsedChanged:"clrVerticalNavCollapsedChange"},features:[Mt([q4,W4,j4])],ngContentSelectors:Pn,decls:4,vars:2,consts:[["type","button","class","nav-trigger",3,"on-collapse","click",4,"ngIf"],[1,"nav-content"],["class","nav-btn","aria-hidden","true","tabindex","-1",3,"click",4,"ngIf"],["type","button",1,"nav-trigger",3,"click"],["shape","angle-double",1,"nav-trigger-icon"],["aria-hidden","true","tabindex","-1",1,"nav-btn",3,"click"]],template:function(o,c){1&o&&(Lt(),le(0,iGe,2,6,"button",0),V(1,"div",1),Be(2),le(3,sGe,1,1,"button",2),B()),2&o&&(q("ngIf",c.collapsible),j(3),q("ngIf",c.collapsible&&c.collapsed))},directives:[Mn,zr],encapsulation:2}),l})(),X4=(()=>{class l{constructor(){this._expandChange=new tt}get expandChange(){return this._expandChange.asObservable()}expand(){this._expandChange.next(!0)}}return l.\u0275fac=function(o){return new(o||l)},l.\u0275prov=Xe({token:l,factory:l.\u0275fac}),l})();const ew="expanded",af="collapsed";let jh=(()=>{class l{constructor(o,c,u,h,d){this._itemExpand=o,this._navGroupRegistrationService=c,this._navGroupService=u,this._navService=h,this.commonStrings=d,this.wasExpanded=!1,this.expandedChange=new pt(!0),this._subscriptions=[],this._expandAnimationState=af,this._navGroupRegistrationService.registerNavGroup(),this._subscriptions.push(this._itemExpand.expandChange.subscribe(f=>{f&&this.expandAnimationState===af?(this._navService.collapsed&&(this._navService.collapsed=!1),this.expandAnimationState=ew):!f&&this.expandAnimationState===ew&&(this.expandAnimationState=af)})),this._subscriptions.push(this._navService.animateOnCollapsed.subscribe(f=>{f&&this.expanded?(this.wasExpanded=!0,this.expandAnimationState=af):!f&&this.wasExpanded&&(this.expandGroup(),this.wasExpanded=!1)})),this._subscriptions.push(this._navGroupService.expandChange.subscribe(f=>{f&&!this.expanded&&this.expandGroup()}))}get expanded(){return this._itemExpand.expanded}set expanded(o){this._itemExpand.expanded!==o&&(this._itemExpand.expanded=o,this.expandedChange.emit(o))}set userExpandedInput(o){this.expanded!==(o=!!o)&&this.toggleExpand()}expandGroup(){this.expanded=!0,this.expandAnimationState=ew}collapseGroup(){this.expandAnimationState=af}expandAnimationDone(o){o.toState===af&&(this.expanded=!1)}get expandAnimationState(){return this._expandAnimationState}set expandAnimationState(o){o!==this._expandAnimationState&&(this._expandAnimationState=o)}toggleExpand(){this.expanded?this.collapseGroup():(this._navService.collapsed&&(this._navService.collapsed=!1),this.expandGroup())}ngAfterContentInit(){this._navService.collapsed&&this.expanded&&(this.wasExpanded=!0,this.expandAnimationState=af)}ngOnDestroy(){this._subscriptions.forEach(o=>o.unsubscribe()),this._navGroupRegistrationService.unregisterNavGroup()}}return l.\u0275fac=function(o){return new(o||l)(O(Ja),O(j4),O(X4),O(q4),O(qr))},l.\u0275cmp=Qe({type:l,selectors:[["clr-vertical-nav-group"]],hostAttrs:[1,"nav-group"],hostVars:2,hostBindings:function(o,c){2&o&&lt("is-expanded",c.expanded)},inputs:{userExpandedInput:["clrVerticalNavGroupExpanded","userExpandedInput"]},outputs:{expandedChange:"clrVerticalNavGroupExpandedChange"},features:[Mt([Ja,X4])],ngContentSelectors:aGe,decls:9,vars:5,consts:[[1,"nav-group-content"],["type","button",1,"nav-group-trigger",3,"click"],[1,"nav-group-text"],["shape","angle",1,"nav-group-trigger-icon"],[1,"nav-group-children"]],template:function(o,c){1&o&&(Lt(oGe),V(0,"div",0),Be(1),V(2,"button",1),ze("click",function(){return c.toggleExpand()}),Be(3,1),V(4,"div",2),Be(5,2),B(),xe(6,"cds-icon",3),B(),B(),V(7,"div",4),ze("@clrExpand.done",function(h){return c.expandAnimationDone(h)}),Be(8,3),B()),2&o&&(j(2),Ke("aria-expanded",c.expanded)("aria-label",c.commonStrings.keys.verticalNavGroupToggle),j(4),Ke("direction",c.expanded?"down":"right")("title",c.expanded?c.commonStrings.keys.collapse:c.commonStrings.keys.expand),j(1),q("@clrExpand",c.expandAnimationState))},directives:[zr],encapsulation:2,data:{animation:[Ql("clrExpand",[$D(ew,kr({height:"*"})),$D(af,kr({height:0,"overflow-y":"hidden",visibility:"hidden"})),eo(`${ew} <=> ${af}`,ra("0.2s ease-in-out"))])]}}),l})(),Wh=(()=>{class l{}return l.\u0275fac=function(o){return new(o||l)},l.\u0275cmp=Qe({type:l,selectors:[["clr-vertical-nav-group-children"]],ngContentSelectors:Pn,decls:1,vars:0,template:function(o,c){1&o&&(Lt(),Be(0))},encapsulation:2}),l})(),qh=(()=>{class l{constructor(o){this._verticalNavIconService=o,this._verticalNavIconService.registerIcon()}ngOnDestroy(){this._verticalNavIconService.unregisterIcon()}}return l.\u0275fac=function(o){return new(o||l)(O(W4))},l.\u0275dir=Ze({type:l,selectors:[["","clrVerticalNavIcon",""]],hostAttrs:[1,"nav-icon"]}),l})(),w8e=(()=>{class l{constructor(){li.addIcons(G_,dZ)}}return l.\u0275fac=function(o){return new(o||l)},l.\u0275mod=Yt({type:l}),l.\u0275inj=jt({imports:[[sr,gi,Bc,Ag],Bc,gi,Ag]}),l})(),C8e=(()=>{class l{}return l.\u0275fac=function(o){return new(o||l)},l.\u0275mod=Yt({type:l}),l.\u0275inj=jt({imports:[h8e,d8e,S8e,w8e]}),l})(),CQ=(()=>{class l{constructor(){li.addIcons(_1)}}return l.\u0275fac=function(o){return new(o||l)},l.\u0275mod=Yt({type:l}),l.\u0275inj=jt({imports:[[sr,gi,wA,Ag],gi,Ag]}),l})();const x8e={"top-left":{anchorPoint:dt.TOP_CENTER,popoverPoint:dt.BOTTOM_RIGHT,offsetY:-10,offsetX:0},"top-middle":{anchorPoint:dt.TOP_CENTER,popoverPoint:dt.BOTTOM_CENTER,offsetY:-10,offsetX:0},"top-right":{anchorPoint:dt.TOP_CENTER,popoverPoint:dt.BOTTOM_LEFT,offsetY:-10,offsetX:0},"right-top":{anchorPoint:dt.RIGHT_CENTER,popoverPoint:dt.LEFT_BOTTOM,offsetY:2,offsetX:14},"right-middle":{anchorPoint:dt.RIGHT_CENTER,popoverPoint:dt.LEFT_CENTER,offsetY:6,offsetX:14},"right-bottom":{anchorPoint:dt.RIGHT_CENTER,popoverPoint:dt.LEFT_TOP,offsetY:-1,offsetX:14},"bottom-right":{anchorPoint:dt.BOTTOM_CENTER,popoverPoint:dt.TOP_LEFT,offsetY:9,offsetX:-1},"bottom-middle":{anchorPoint:dt.BOTTOM_CENTER,popoverPoint:dt.TOP_CENTER,offsetY:9,offsetX:12},"bottom-left":{anchorPoint:dt.BOTTOM_CENTER,popoverPoint:dt.TOP_RIGHT,offsetY:9,offsetX:0},"left-bottom":{anchorPoint:dt.LEFT_CENTER,popoverPoint:dt.RIGHT_TOP,offsetY:0,offsetX:-14},"left-middle":{anchorPoint:dt.LEFT_CENTER,popoverPoint:dt.RIGHT_CENTER,offsetY:4,offsetX:-14},"left-top":{anchorPoint:dt.LEFT_CENTER,popoverPoint:dt.RIGHT_BOTTOM,offsetY:0,offsetX:-14},default:{anchorPoint:dt.RIGHT_CENTER,popoverPoint:dt.LEFT_CENTER,offsetY:6,offsetX:14}},E8e=["top-left","top-middle","top-right","right-top","right-middle","right-bottom","bottom-right","bottom-middle","bottom-left","left-bottom","left-middle","left-top"];let KA=(()=>{class l extends k4{constructor(o,c,u,h,d,f,m,g){if(super(o,c),this.commonStrings=u,this.signpostContentId=h,this.signpostIdService=d,this.signpostFocusManager=f,this.platformId=m,!c)throw new Error("clr-signpost-content should only be used inside of a clr-signpost");this.position="right-middle",this.closeOnOutsideClick=!0,this.signpostIdService.setId(h),this.document=g}close(){this.toggleService.open=!1}get position(){return this._position}set position(o){this.renderer.removeClass(this.el.nativeElement,this.position),this._position=o&&E8e.indexOf(o)>-1?o:"right-middle",this.renderer.addClass(this.el.nativeElement,this.position);const c=x8e[this.position];this.anchorPoint=c.anchorPoint,this.popoverPoint=c.popoverPoint,this.popoverOptions.offsetY=c.offsetY,this.popoverOptions.offsetX=c.offsetX}ngOnDestroy(){ti(this.platformId)&&this.el.nativeElement.contains(this.document.activeElement)&&this.signpostFocusManager.focusTrigger()}}return l.\u0275fac=function(o){return new(o||l)(O(Qn),O(Dp,8),O(qr),O(ro),O(T4),O(S4),O(Ui),O(Xn))},l.\u0275cmp=Qe({type:l,selectors:[["clr-signpost-content"]],hostVars:3,hostBindings:function(o,c){2&o&&(Hl("id",c.signpostContentId),lt("signpost-content",!0))},inputs:{position:["clrPosition","position"]},features:[Mt([Sa]),on],ngContentSelectors:Pn,decls:7,vars:3,consts:[[1,"signpost-wrap"],[1,"popover-pointer"],[1,"signpost-content-header"],["type","button",1,"signpost-action","close",3,"click"],["shape","window-close"],[1,"signpost-content-body"]],template:function(o,c){1&o&&(Lt(),V(0,"div",0),xe(1,"div",1),V(2,"div",2),V(3,"button",3),ze("click",function(){return c.close()}),xe(4,"cds-icon",4),B(),B(),V(5,"div",5),Be(6),B(),B()),2&o&&(j(3),Ke("aria-label",c.commonStrings.keys.signpostClose)("aria-controls",c.signpostContentId),j(1),Ke("title",c.commonStrings.keys.close))},directives:[zr],encapsulation:2}),l})(),M8e=(()=>{class l{constructor(){li.addIcons(_1,fZ)}}return l.\u0275fac=function(o){return new(o||l)},l.\u0275mod=Yt({type:l}),l.\u0275inj=jt({imports:[[sr,gi,Ag],Bc]}),l})(),L8e=(()=>{class l{}return l.\u0275fac=function(o){return new(o||l)},l.\u0275mod=Yt({type:l}),l.\u0275inj=jt({imports:[[sr],Bc,gi]}),l})(),O8e=(()=>{class l{}return l.\u0275fac=function(o){return new(o||l)},l.\u0275mod=Yt({type:l}),l.\u0275inj=jt({imports:[V4,M8e,L8e]}),l})(),G8e=(()=>{class l{constructor(){li.addIcons(pZ)}}return l.\u0275fac=function(o){return new(o||l)},l.\u0275mod=Yt({type:l}),l.\u0275inj=jt({imports:[[sr,CQ,hQ]]}),l})();const Uu="0.2s ease-in-out";Ql("skipInitialRender",[eo(":enter",[])]),Ql("toggle",[eo("void => *",[kr({display:"block",height:0}),ra(Uu,kr({height:"*"}))])]),Ql("skipInitialRender",[eo(":enter",[])]),Ql("toggle",[eo("void => *",[kr({display:"block",height:0}),ra(Uu,kr({height:"*"}))]),eo("* => void",[kr({display:"block"}),ra(Uu,kr({height:0,display:"none"}))])]);let VQ=(()=>{class l{constructor(){li.addIcons(G_,Kl,Jl)}}return l.\u0275fac=function(o){return new(o||l)},l.\u0275mod=Yt({type:l}),l.\u0275inj=jt({imports:[[sr,gi]]}),l})(),eHe=(()=>{class l{}return l.\u0275fac=function(o){return new(o||l)},l.\u0275mod=Yt({type:l}),l.\u0275inj=jt({imports:[[sr,gi,VQ],VQ]}),l})(),nHe=(()=>{class l{}return l.\u0275fac=function(o){return new(o||l)},l.\u0275mod=Yt({type:l}),l.\u0275inj=jt({imports:[[sr]]}),l})(),aHe=(()=>{class l{constructor(){li.addIcons(XFe,$Fe,pZ,YFe)}}return l.\u0275fac=function(o){return new(o||l)},l.\u0275mod=Yt({type:l}),l.\u0275inj=jt({imports:[[sr,gi,H1],gi,H1]}),l})(),JA=(()=>{class l{}return l.\u0275fac=function(o){return new(o||l)},l.\u0275mod=Yt({type:l}),l.\u0275inj=jt({imports:[u8e,Yze,gi,CQ,d4,Bc,wA,Ag,s6e,IJ,C8e,O8e,G8e,FJ,eHe,H1,nHe,V1,aHe]}),l})();function lHe(l,a){if(1&l&&(V(0,"clr-dg-column"),Le(1),B()),2&l){const o=a.$implicit;j(1),Un(o.key)}}function cHe(l,a){if(1&l&&(V(0,"clr-dg-cell"),Le(1),B()),2&l){const o=a.$implicit;j(1),Un(o.value)}}let K4=(()=>{class l{constructor(){}ngOnInit(){}}return l.\u0275fac=function(o){return new(o||l)},l.\u0275cmp=Qe({type:l,selectors:[["app-table-popup"]],inputs:{data:"data"},decls:6,vars:6,consts:[[4,"ngFor","ngForOf"]],template:function(o,c){1&o&&(V(0,"clr-datagrid"),le(1,lHe,2,1,"clr-dg-column",0),ks(2,"keyvalue"),V(3,"clr-dg-row"),le(4,cHe,2,1,"clr-dg-cell",0),ks(5,"keyvalue"),B(),B()),2&o&&(j(1),q("ngForOf",Ko(2,2,c.data)),j(3),q("ngForOf",Ko(5,4,c.data)))},directives:[D4,L4,X1,y4,v4,Gi,zA,qA,UA,WA,Y1,jA],pipes:[nE],styles:[""]}),l})();const uHe=JSON.parse('{"type":"FeatureCollection","poperties":{"description":"This are a few test cities and locations collected with geojson.io"},"features":[{"type":"Feature","properties":{"name":"Munich"},"geometry":{"type":"Point","coordinates":[11.575899124145508,48.137740422322295]}},{"type":"Feature","properties":{"name":"Landshut"},"geometry":{"type":"Point","coordinates":[12.152938842773436,48.5370678355958]}},{"type":"Feature","properties":{"name":"Ulm"},"geometry":{"type":"Point","coordinates":[9.986572265624998,48.40003249610685]}},{"type":"Feature","properties":{"name":"Ingolstadt"},"geometry":{"type":"Point","coordinates":[11.42578125,48.75618876280552]}},{"type":"Feature","properties":{"name":"Paris"},"geometry":{"type":"Point","coordinates":[2.3291015625,48.83579746243093]}},{"type":"Feature","properties":{"name":"Dreux"},"geometry":{"type":"Point","coordinates":[1.3677978515625,48.73445537176822]}},{"type":"Feature","properties":{"name":"Meaux"},"geometry":{"type":"Point","coordinates":[2.8729248046875,48.95497369808868]}},{"type":"Feature","properties":{"name":"Rome"},"geometry":{"type":"Point","coordinates":[12.480468749999998,41.86956082699455]}},{"type":"Feature","properties":{"name":"Anzio"},"geometry":{"type":"Point","coordinates":[12.6287841796875,41.4509614012039]}},{"type":"Feature","properties":{"name":"Berlin"},"geometry":{"type":"Point","coordinates":[13.403320312499998,52.50953477032727]}},{"type":"Feature","properties":{"name":"Potsdam"},"geometry":{"type":"Point","coordinates":[13.058624267578125,52.40074312027673]}}]}');class HQ{}class jQ{}class Xh{constructor(a){this.normalizedNames=new Map,this.lazyUpdate=null,a?this.lazyInit="string"==typeof a?()=>{this.headers=new Map,a.split("\n").forEach(o=>{const c=o.indexOf(":");if(c>0){const u=o.slice(0,c),h=u.toLowerCase(),d=o.slice(c+1).trim();this.maybeSetNormalizedName(u,h),this.headers.has(h)?this.headers.get(h).push(d):this.headers.set(h,[d])}})}:()=>{this.headers=new Map,Object.keys(a).forEach(o=>{let c=a[o];const u=o.toLowerCase();"string"==typeof c&&(c=[c]),c.length>0&&(this.headers.set(u,c),this.maybeSetNormalizedName(o,u))})}:this.headers=new Map}has(a){return this.init(),this.headers.has(a.toLowerCase())}get(a){this.init();const o=this.headers.get(a.toLowerCase());return o&&o.length>0?o[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(a){return this.init(),this.headers.get(a.toLowerCase())||null}append(a,o){return this.clone({name:a,value:o,op:"a"})}set(a,o){return this.clone({name:a,value:o,op:"s"})}delete(a,o){return this.clone({name:a,value:o,op:"d"})}maybeSetNormalizedName(a,o){this.normalizedNames.has(o)||this.normalizedNames.set(o,a)}init(){this.lazyInit&&(this.lazyInit instanceof Xh?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(a=>this.applyUpdate(a)),this.lazyUpdate=null))}copyFrom(a){a.init(),Array.from(a.headers.keys()).forEach(o=>{this.headers.set(o,a.headers.get(o)),this.normalizedNames.set(o,a.normalizedNames.get(o))})}clone(a){const o=new Xh;return o.lazyInit=this.lazyInit&&this.lazyInit instanceof Xh?this.lazyInit:this,o.lazyUpdate=(this.lazyUpdate||[]).concat([a]),o}applyUpdate(a){const o=a.name.toLowerCase();switch(a.op){case"a":case"s":let c=a.value;if("string"==typeof c&&(c=[c]),0===c.length)return;this.maybeSetNormalizedName(a.name,o);const u=("a"===a.op?this.headers.get(o):void 0)||[];u.push(...c),this.headers.set(o,u);break;case"d":const h=a.value;if(h){let d=this.headers.get(o);if(!d)return;d=d.filter(f=>-1===h.indexOf(f)),0===d.length?(this.headers.delete(o),this.normalizedNames.delete(o)):this.headers.set(o,d)}else this.headers.delete(o),this.normalizedNames.delete(o)}}forEach(a){this.init(),Array.from(this.normalizedNames.keys()).forEach(o=>a(this.normalizedNames.get(o),this.headers.get(o)))}}class hHe{encodeKey(a){return WQ(a)}encodeValue(a){return WQ(a)}decodeKey(a){return decodeURIComponent(a)}decodeValue(a){return decodeURIComponent(a)}}const fHe=/%(\d[a-f0-9])/gi,pHe={40:"@","3A":":",24:"$","2C":",","3B":";","2B":"+","3D":"=","3F":"?","2F":"/"};function WQ(l){return encodeURIComponent(l).replace(fHe,(a,o)=>{var c;return null!==(c=pHe[o])&&void 0!==c?c:a})}function qQ(l){return`${l}`}class Pp{constructor(a={}){if(this.updates=null,this.cloneFrom=null,this.encoder=a.encoder||new hHe,a.fromString){if(a.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function(l,a){const o=new Map;return l.length>0&&l.replace(/^\?/,"").split("&").forEach(u=>{const h=u.indexOf("="),[d,f]=-1==h?[a.decodeKey(u),""]:[a.decodeKey(u.slice(0,h)),a.decodeValue(u.slice(h+1))],m=o.get(d)||[];m.push(f),o.set(d,m)}),o}(a.fromString,this.encoder)}else a.fromObject?(this.map=new Map,Object.keys(a.fromObject).forEach(o=>{const c=a.fromObject[o];this.map.set(o,Array.isArray(c)?c:[c])})):this.map=null}has(a){return this.init(),this.map.has(a)}get(a){this.init();const o=this.map.get(a);return o?o[0]:null}getAll(a){return this.init(),this.map.get(a)||null}keys(){return this.init(),Array.from(this.map.keys())}append(a,o){return this.clone({param:a,value:o,op:"a"})}appendAll(a){const o=[];return Object.keys(a).forEach(c=>{const u=a[c];Array.isArray(u)?u.forEach(h=>{o.push({param:c,value:h,op:"a"})}):o.push({param:c,value:u,op:"a"})}),this.clone(o)}set(a,o){return this.clone({param:a,value:o,op:"s"})}delete(a,o){return this.clone({param:a,value:o,op:"d"})}toString(){return this.init(),this.keys().map(a=>{const o=this.encoder.encodeKey(a);return this.map.get(a).map(c=>o+"="+this.encoder.encodeValue(c)).join("&")}).filter(a=>""!==a).join("&")}clone(a){const o=new Pp({encoder:this.encoder});return o.cloneFrom=this.cloneFrom||this,o.updates=(this.updates||[]).concat(a),o}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(a=>this.map.set(a,this.cloneFrom.map.get(a))),this.updates.forEach(a=>{switch(a.op){case"a":case"s":const o=("a"===a.op?this.map.get(a.param):void 0)||[];o.push(qQ(a.value)),this.map.set(a.param,o);break;case"d":if(void 0===a.value){this.map.delete(a.param);break}{let c=this.map.get(a.param)||[];const u=c.indexOf(qQ(a.value));-1!==u&&c.splice(u,1),c.length>0?this.map.set(a.param,c):this.map.delete(a.param)}}}),this.cloneFrom=this.updates=null)}}class mHe{constructor(){this.map=new Map}set(a,o){return this.map.set(a,o),this}get(a){return this.map.has(a)||this.map.set(a,a.defaultValue()),this.map.get(a)}delete(a){return this.map.delete(a),this}keys(){return this.map.keys()}}function XQ(l){return"undefined"!=typeof ArrayBuffer&&l instanceof ArrayBuffer}function $Q(l){return"undefined"!=typeof Blob&&l instanceof Blob}function YQ(l){return"undefined"!=typeof FormData&&l instanceof FormData}class ow{constructor(a,o,c,u){let h;if(this.url=o,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=a.toUpperCase(),function(l){switch(l){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||u?(this.body=void 0!==c?c:null,h=u):h=c,h&&(this.reportProgress=!!h.reportProgress,this.withCredentials=!!h.withCredentials,h.responseType&&(this.responseType=h.responseType),h.headers&&(this.headers=h.headers),h.context&&(this.context=h.context),h.params&&(this.params=h.params)),this.headers||(this.headers=new Xh),this.context||(this.context=new mHe),this.params){const d=this.params.toString();if(0===d.length)this.urlWithParams=o;else{const f=o.indexOf("?");this.urlWithParams=o+(-1===f?"?":f<o.length-1?"&":"")+d}}else this.params=new Pp,this.urlWithParams=o}serializeBody(){return null===this.body?null:XQ(this.body)||$Q(this.body)||YQ(this.body)||function(l){return"undefined"!=typeof URLSearchParams&&l instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof Pp?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||YQ(this.body)?null:$Q(this.body)?this.body.type||null:XQ(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Pp?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(a={}){var o;const c=a.method||this.method,u=a.url||this.url,h=a.responseType||this.responseType,d=void 0!==a.body?a.body:this.body,f=void 0!==a.withCredentials?a.withCredentials:this.withCredentials,m=void 0!==a.reportProgress?a.reportProgress:this.reportProgress;let g=a.headers||this.headers,y=a.params||this.params;const v=null!==(o=a.context)&&void 0!==o?o:this.context;return void 0!==a.setHeaders&&(g=Object.keys(a.setHeaders).reduce((_,b)=>_.set(b,a.setHeaders[b]),g)),a.setParams&&(y=Object.keys(a.setParams).reduce((_,b)=>_.set(b,a.setParams[b]),y)),new ow(c,u,d,{params:y,headers:g,context:v,reportProgress:m,responseType:h,withCredentials:f})}}var io=(()=>((io=io||{})[io.Sent=0]="Sent",io[io.UploadProgress=1]="UploadProgress",io[io.ResponseHeader=2]="ResponseHeader",io[io.DownloadProgress=3]="DownloadProgress",io[io.Response=4]="Response",io[io.User=5]="User",io))();class J4{constructor(a,o=200,c="OK"){this.headers=a.headers||new Xh,this.status=void 0!==a.status?a.status:o,this.statusText=a.statusText||c,this.url=a.url||null,this.ok=this.status>=200&&this.status<300}}class Q4 extends J4{constructor(a={}){super(a),this.type=io.ResponseHeader}clone(a={}){return new Q4({headers:a.headers||this.headers,status:void 0!==a.status?a.status:this.status,statusText:a.statusText||this.statusText,url:a.url||this.url||void 0})}}class QA extends J4{constructor(a={}){super(a),this.type=io.Response,this.body=void 0!==a.body?a.body:null}clone(a={}){return new QA({body:void 0!==a.body?a.body:this.body,headers:a.headers||this.headers,status:void 0!==a.status?a.status:this.status,statusText:a.statusText||this.statusText,url:a.url||this.url||void 0})}}class ZQ extends J4{constructor(a){super(a,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${a.url||"(unknown url)"}`:`Http failure response for ${a.url||"(unknown url)"}: ${a.status} ${a.statusText}`,this.error=a.error||null}}function eV(l,a){return{body:a,headers:l.headers,context:l.context,observe:l.observe,params:l.params,reportProgress:l.reportProgress,responseType:l.responseType,withCredentials:l.withCredentials}}let lf=(()=>{class l{constructor(o){this.handler=o}request(o,c,u={}){let h;if(o instanceof ow)h=o;else{let m,g;m=u.headers instanceof Xh?u.headers:new Xh(u.headers),u.params&&(g=u.params instanceof Pp?u.params:new Pp({fromObject:u.params})),h=new ow(o,c,void 0!==u.body?u.body:null,{headers:m,context:u.context,params:g,reportProgress:u.reportProgress,responseType:u.responseType||"json",withCredentials:u.withCredentials})}const d=qt(h).pipe(Nv(m=>this.handler.handle(m)));if(o instanceof ow||"events"===u.observe)return d;const f=d.pipe(cs(m=>m instanceof QA));switch(u.observe||"body"){case"body":switch(h.responseType){case"arraybuffer":return f.pipe(pe(m=>{if(null!==m.body&&!(m.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return m.body}));case"blob":return f.pipe(pe(m=>{if(null!==m.body&&!(m.body instanceof Blob))throw new Error("Response is not a Blob.");return m.body}));case"text":return f.pipe(pe(m=>{if(null!==m.body&&"string"!=typeof m.body)throw new Error("Response is not a string.");return m.body}));case"json":default:return f.pipe(pe(m=>m.body))}case"response":return f;default:throw new Error(`Unreachable: unhandled observe type ${u.observe}}`)}}delete(o,c={}){return this.request("DELETE",o,c)}get(o,c={}){return this.request("GET",o,c)}head(o,c={}){return this.request("HEAD",o,c)}jsonp(o,c){return this.request("JSONP",o,{params:(new Pp).append(c,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(o,c={}){return this.request("OPTIONS",o,c)}patch(o,c,u={}){return this.request("PATCH",o,eV(u,c))}post(o,c,u={}){return this.request("POST",o,eV(u,c))}put(o,c,u={}){return this.request("PUT",o,eV(u,c))}}return l.\u0275fac=function(o){return new(o||l)(be(HQ))},l.\u0275prov=Xe({token:l,factory:l.\u0275fac}),l})();class KQ{constructor(a,o){this.next=a,this.interceptor=o}handle(a){return this.interceptor.intercept(a,this.next)}}const JQ=new Sn("HTTP_INTERCEPTORS");let vHe=(()=>{class l{intercept(o,c){return c.handle(o)}}return l.\u0275fac=function(o){return new(o||l)},l.\u0275prov=Xe({token:l,factory:l.\u0275fac}),l})();const _He=/^\)\]\}',?\n/;let QQ=(()=>{class l{constructor(o){this.xhrFactory=o}handle(o){if("JSONP"===o.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new yt(c=>{const u=this.xhrFactory.build();if(u.open(o.method,o.urlWithParams),o.withCredentials&&(u.withCredentials=!0),o.headers.forEach((b,w)=>u.setRequestHeader(b,w.join(","))),o.headers.has("Accept")||u.setRequestHeader("Accept","application/json, text/plain, */*"),!o.headers.has("Content-Type")){const b=o.detectContentTypeHeader();null!==b&&u.setRequestHeader("Content-Type",b)}if(o.responseType){const b=o.responseType.toLowerCase();u.responseType="json"!==b?b:"text"}const h=o.serializeBody();let d=null;const f=()=>{if(null!==d)return d;const b=1223===u.status?204:u.status,w=u.statusText||"OK",C=new Xh(u.getAllResponseHeaders()),E=function(l){return"responseURL"in l&&l.responseURL?l.responseURL:/^X-Request-URL:/m.test(l.getAllResponseHeaders())?l.getResponseHeader("X-Request-URL"):null}(u)||o.url;return d=new Q4({headers:C,status:b,statusText:w,url:E}),d},m=()=>{let{headers:b,status:w,statusText:C,url:E}=f(),M=null;204!==w&&(M=void 0===u.response?u.responseText:u.response),0===w&&(w=M?200:0);let x=w>=200&&w<300;if("json"===o.responseType&&"string"==typeof M){const R=M;M=M.replace(_He,"");try{M=""!==M?JSON.parse(M):null}catch(P){M=R,x&&(x=!1,M={error:P,text:M})}}x?(c.next(new QA({body:M,headers:b,status:w,statusText:C,url:E||void 0})),c.complete()):c.error(new ZQ({error:M,headers:b,status:w,statusText:C,url:E||void 0}))},g=b=>{const{url:w}=f(),C=new ZQ({error:b,status:u.status||0,statusText:u.statusText||"Unknown Error",url:w||void 0});c.error(C)};let y=!1;const v=b=>{y||(c.next(f()),y=!0);let w={type:io.DownloadProgress,loaded:b.loaded};b.lengthComputable&&(w.total=b.total),"text"===o.responseType&&!!u.responseText&&(w.partialText=u.responseText),c.next(w)},_=b=>{let w={type:io.UploadProgress,loaded:b.loaded};b.lengthComputable&&(w.total=b.total),c.next(w)};return u.addEventListener("load",m),u.addEventListener("error",g),u.addEventListener("timeout",g),u.addEventListener("abort",g),o.reportProgress&&(u.addEventListener("progress",v),null!==h&&u.upload&&u.upload.addEventListener("progress",_)),u.send(h),c.next({type:io.Sent}),()=>{u.removeEventListener("error",g),u.removeEventListener("abort",g),u.removeEventListener("load",m),u.removeEventListener("timeout",g),o.reportProgress&&(u.removeEventListener("progress",v),null!==h&&u.upload&&u.upload.removeEventListener("progress",_)),u.readyState!==u.DONE&&u.abort()}})}}return l.\u0275fac=function(o){return new(o||l)(be(H7))},l.\u0275prov=Xe({token:l,factory:l.\u0275fac}),l})();const tV=new Sn("XSRF_COOKIE_NAME"),nV=new Sn("XSRF_HEADER_NAME");class eee{}let SHe=(()=>{class l{constructor(o,c,u){this.doc=o,this.platform=c,this.cookieName=u,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const o=this.doc.cookie||"";return o!==this.lastCookieString&&(this.parseCount++,this.lastToken=O7(o,this.cookieName),this.lastCookieString=o),this.lastToken}}return l.\u0275fac=function(o){return new(o||l)(be(Xn),be(Ui),be(tV))},l.\u0275prov=Xe({token:l,factory:l.\u0275fac}),l})(),rV=(()=>{class l{constructor(o,c){this.tokenService=o,this.headerName=c}intercept(o,c){const u=o.url.toLowerCase();if("GET"===o.method||"HEAD"===o.method||u.startsWith("http://")||u.startsWith("https://"))return c.handle(o);const h=this.tokenService.getToken();return null!==h&&!o.headers.has(this.headerName)&&(o=o.clone({headers:o.headers.set(this.headerName,h)})),c.handle(o)}}return l.\u0275fac=function(o){return new(o||l)(be(eee),be(nV))},l.\u0275prov=Xe({token:l,factory:l.\u0275fac}),l})(),THe=(()=>{class l{constructor(o,c){this.backend=o,this.injector=c,this.chain=null}handle(o){if(null===this.chain){const c=this.injector.get(JQ,[]);this.chain=c.reduceRight((u,h)=>new KQ(u,h),this.backend)}return this.chain.handle(o)}}return l.\u0275fac=function(o){return new(o||l)(be(jQ),be(Qn))},l.\u0275prov=Xe({token:l,factory:l.\u0275fac}),l})(),wHe=(()=>{class l{static disable(){return{ngModule:l,providers:[{provide:rV,useClass:vHe}]}}static withOptions(o={}){return{ngModule:l,providers:[o.cookieName?{provide:tV,useValue:o.cookieName}:[],o.headerName?{provide:nV,useValue:o.headerName}:[]]}}}return l.\u0275fac=function(o){return new(o||l)},l.\u0275mod=Yt({type:l}),l.\u0275inj=jt({providers:[rV,{provide:JQ,useExisting:rV,multi:!0},{provide:eee,useClass:SHe},{provide:tV,useValue:"XSRF-TOKEN"},{provide:nV,useValue:"X-XSRF-TOKEN"}]}),l})(),CHe=(()=>{class l{}return l.\u0275fac=function(o){return new(o||l)},l.\u0275mod=Yt({type:l}),l.\u0275inj=jt({providers:[lf,{provide:HQ,useClass:THe},QQ,{provide:jQ,useExisting:QQ}],imports:[[wHe.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]]}),l})();var tee=Ve(394),nee=Ve(856),ree=Ve(723),xHe=Ve(955),EHe=Ve(535),MHe=Ve(578),DHe=Ve(788);const AHe=nee.XLink_1_0,IHe=ree.OWS_1_1_0,RHe=xHe.SMIL_2_0,PHe=EHe.SMIL_2_0_Language,LHe=MHe.GML_3_1_1,OHe=DHe.WMTS_1_0;let iee=(()=>{class l{constructor(o){this.http=o;const c=new tee.Jsonix.Context([RHe,PHe,LHe,AHe,IHe,OHe]);this.xmlunmarshaller=c.createUnmarshaller(),this.xmlmarshaller=c.createMarshaller()}getCapabilities(o,c="1.1.0"){const u=`${o}?SERVICE=WMTS&REQUEST=GetCapabilities&VERSION=${c}`,h=new Xh({"Content-Type":"text/xml",Accept:"text/xml, application/xml"});return this.http.get(u,{headers:h,responseType:"text"}).pipe(pe(d=>this.xmlunmarshaller.unmarshalString(d)))}}return l.\u0275fac=function(o){return new(o||l)(be(lf))},l.\u0275prov=Xe({token:l,factory:l.\u0275fac,providedIn:"root"}),l})();var NHe=Ve(530),FHe=Ve(71),kHe=Ve(815),VHe=Ve(10),BHe=Ve(731);function iV(l){return!Ie(l)&&l-parseFloat(l)+1>=0}function see(l=0,a,o){let c=-1;return iV(a)?c=Number(a)<1?1:Number(a):we(a)&&(o=a),we(o)||(o=z_),new yt(u=>{const h=iV(l)?l:+l-o.now();return o.schedule(UHe,h,{index:0,period:c,subscriber:u})})}function UHe(l){const{index:a,period:o,subscriber:c}=l;if(c.next(a),!c.closed){if(-1===o)return c.complete();l.index=a+1,this.schedule(l,o)}}class zHe{constructor(a,o){this.notifier=a,this.source=o}call(a,o){return o.subscribe(new HHe(a,this.notifier,this.source))}}class HHe extends gc{constructor(a,o,c){super(a),this.notifier=o,this.source=c}error(a){if(!this.isStopped){let o=this.errors,c=this.retries,u=this.retriesSubscription;if(c)this.errors=void 0,this.retriesSubscription=void 0;else{o=new tt;try{const{notifier:h}=this;c=h(o)}catch(h){return super.error(h)}u=Pl(c,new tl(this))}this._unsubscribeAndRecycle(),this.errors=o,this.retries=c,this.retriesSubscription=u,o.next(a)}}_unsubscribe(){const{errors:a,retriesSubscription:o}=this;a&&(a.unsubscribe(),this.errors=void 0),o&&(o.unsubscribe(),this.retriesSubscription=void 0),this.retries=void 0}notifyNext(){const{_unsubscribe:a}=this;this._unsubscribe=null,this._unsubscribeAndRecycle(),this._unsubscribe=a,this.source.subscribe(this)}}class qHe{constructor(a,o){this.delay=a,this.scheduler=o}call(a,o){return o.subscribe(new sV(a,this.delay,this.scheduler))}}class sV extends re{constructor(a,o,c){super(a),this.delay=o,this.scheduler=c,this.queue=[],this.active=!1,this.errored=!1}static dispatch(a){const o=a.source,c=o.queue,u=a.scheduler,h=a.destination;for(;c.length>0&&c[0].time-u.now()<=0;)c.shift().notification.observe(h);if(c.length>0){const d=Math.max(0,c[0].time-u.now());this.schedule(a,d)}else this.unsubscribe(),o.active=!1}_schedule(a){this.active=!0,this.destination.add(a.schedule(sV.dispatch,this.delay,{source:this,destination:this.destination,scheduler:a}))}scheduleNotification(a){if(!0===this.errored)return;const o=this.scheduler,c=new XHe(o.now()+this.delay,a);this.queue.push(c),!1===this.active&&this._schedule(o)}_next(a){this.scheduleNotification(wl.createNext(a))}_error(a){this.errored=!0,this.queue=[],this.destination.error(a),this.unsubscribe()}_complete(){this.scheduleNotification(wl.createComplete()),this.unsubscribe()}}class XHe{constructor(a,o){this.time=a,this.notification=o}}function oV(l,a=3){let o=1;return c=>c.pipe(function(l){return a=>a.lift(new zHe(l,a))}(u=>u.pipe(function(l,a=z_){const c=function(l){return l instanceof Date&&!isNaN(+l)}(l)?+l-a.now():Math.abs(l);return u=>u.lift(new qHe(c,a))}(l),yi(h=>{if(h.status&&400===h.status)throw h;if(o<=a)return console.log("http-error. Retrying ..."),o+=1,qt(h);throw console.log(`Persistent http-errors after ${o} attempts. Giving up.`),h}))))}class YHe{set(a,o){return qt(!0)}get(a){return qt(null)}}const oee=nee.XLink_1_0,ZHe=ree.OWS_1_1_0,KHe=kHe.OWS_2_0,JHe=VHe.WPS_1_0_0,QHe=BHe.WPS_2_0,aee=tee.Jsonix,n7e=function(){function l(){}return l.prototype.read=function(a){if(a){if("string"==typeof a){var o=pp(a);return this.readFromDocument(o)}return fp(a)?this.readFromDocument(a):this.readFromNode(a)}return null},l.prototype.readFromDocument=function(a){for(var o=a.firstChild;o;o=o.nextSibling)if(o.nodeType==Node.ELEMENT_NODE)return this.readFromNode(o);return null},l.prototype.readFromNode=function(a){},l}();function aV(l){return l.getAttributeNS("http://www.w3.org/1999/xlink","href")}var i7e=function(){var l=function(a,o){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,u){c.__proto__=u}||function(c,u){for(var h in u)Object.prototype.hasOwnProperty.call(u,h)&&(c[h]=u[h])})(a,o)};return function(a,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function c(){this.constructor=a}l(a,o),a.prototype=null===o?Object.create(o):(c.prototype=o.prototype,new c)}}(),ia=[null,"http://www.opengis.net/wms"],s7e=dn(ia,{Service:ft(function(l,a){return gr({},l7e,l,a)}),Capability:ft(function(l,a){return gr({},o7e,l,a)})}),o7e=dn(ia,{Request:ft(function(l,a){return gr({},m7e,l,a)}),Exception:ft(function(l,a){return gr([],d7e,l,a)}),Layer:ft(function(l,a){var o=gr({},lee,l,a);return void 0===o.Layer?Object.assign(o,cee(l,a)):o})}),a7e=function(l){function a(){var o=l.call(this)||this;return o.version=void 0,o}return i7e(a,l),a.prototype.readFromNode=function(o){return this.version=o.getAttribute("version").trim(),gr({version:this.version},s7e,o,[])||null},a}(n7e),l7e=dn(ia,{Name:ft(hr),Title:ft(hr),Abstract:ft(hr),KeywordList:ft(hee),OnlineResource:ft(aV),ContactInformation:ft(function(l,a){return gr({},c7e,l,a)}),Fees:ft(hr),AccessConstraints:ft(hr),LayerLimit:ft(xk),MaxWidth:ft(xk),MaxHeight:ft(xk)}),c7e=dn(ia,{ContactPersonPrimary:ft(function(l,a){return gr({},u7e,l,a)}),ContactPosition:ft(hr),ContactAddress:ft(function(l,a){return gr({},h7e,l,a)}),ContactVoiceTelephone:ft(hr),ContactFacsimileTelephone:ft(hr),ContactElectronicMailAddress:ft(hr)}),u7e=dn(ia,{ContactPerson:ft(hr),ContactOrganization:ft(hr)}),h7e=dn(ia,{AddressType:ft(hr),Address:ft(hr),City:ft(hr),StateOrProvince:ft(hr),PostCode:ft(hr),Country:ft(hr)}),d7e=dn(ia,{Format:Ih(hr)}),lee=dn(ia,{Name:ft(hr),Title:ft(hr),Abstract:ft(hr),KeywordList:ft(hee),CRS:Yl(hr),EX_GeographicBoundingBox:ft(function(l,a){var o=gr({},p7e,l,a);if(o){var c=o.westBoundLongitude,u=o.southBoundLatitude,h=o.eastBoundLongitude,d=o.northBoundLatitude;if(void 0!==c&&void 0!==u&&void 0!==h&&void 0!==d)return[c,u,h,d]}}),BoundingBox:Yl(function(l,a){var o=[qd(l.getAttribute("minx")),qd(l.getAttribute("miny")),qd(l.getAttribute("maxx")),qd(l.getAttribute("maxy"))],c=[qd(l.getAttribute("resx")),qd(l.getAttribute("resy"))];return{crs:l.getAttribute("CRS"),extent:o,res:c}}),Dimension:Yl(function(l,a){return{name:l.getAttribute("name"),units:l.getAttribute("units"),unitSymbol:l.getAttribute("unitSymbol"),default:l.getAttribute("default"),multipleValues:mg(l.getAttribute("multipleValues")),nearestValue:mg(l.getAttribute("nearestValue")),current:mg(l.getAttribute("current")),values:hr(l)}}),Attribution:ft(function(l,a){return gr({},f7e,l,a)}),AuthorityURL:Yl(function(l,a){var o=cf(l,a);if(o)return o.name=l.getAttribute("name"),o}),Identifier:Yl(hr),MetadataURL:Yl(function(l,a){var o=cf(l,a);if(o)return o.type=l.getAttribute("type"),o}),DataURL:Yl(cf),FeatureListURL:Yl(cf),Style:Yl(function(l,a){return gr({},_7e,l,a)}),MinScaleDenominator:ft(Ss),MaxScaleDenominator:ft(Ss),Layer:Yl(cee)}),f7e=dn(ia,{Title:ft(hr),OnlineResource:ft(aV),LogoURL:ft(uee)}),p7e=dn(ia,{westBoundLongitude:ft(Ss),eastBoundLongitude:ft(Ss),southBoundLatitude:ft(Ss),northBoundLatitude:ft(Ss)}),m7e=dn(ia,{GetCapabilities:ft(lV),GetMap:ft(lV),GetFeatureInfo:ft(lV)}),g7e=dn(ia,{Format:Yl(hr),DCPType:Yl(function(l,a){return gr({},y7e,l,a)})}),y7e=dn(ia,{HTTP:ft(function(l,a){return gr({},v7e,l,a)})}),v7e=dn(ia,{Get:ft(cf),Post:ft(cf)}),_7e=dn(ia,{Name:ft(hr),Title:ft(hr),Abstract:ft(hr),LegendURL:Yl(uee),StyleSheetURL:ft(cf),StyleURL:ft(cf)}),b7e=dn(ia,{Format:ft(hr),OnlineResource:ft(aV)}),S7e=dn(ia,{Keyword:Ih(hr)});function cee(l,a){var o=a[a.length-1],c=gr({},lee,l,a);if(c){var u=mg(l.getAttribute("queryable"));void 0===u&&(u=o.queryable),c.queryable=void 0!==u&&u;var h=uD(l.getAttribute("cascaded"));void 0===h&&(h=o.cascaded),c.cascaded=h;var d=mg(l.getAttribute("opaque"));void 0===d&&(d=o.opaque),c.opaque=void 0!==d&&d;var f=mg(l.getAttribute("noSubsets"));void 0===f&&(f=o.noSubsets),c.noSubsets=void 0!==f&&f;var m=qd(l.getAttribute("fixedWidth"));m||(m=o.fixedWidth),c.fixedWidth=m;var g=qd(l.getAttribute("fixedHeight"));return g||(g=o.fixedHeight),c.fixedHeight=g,["Style","CRS","AuthorityURL"].forEach(function(_){_ in o&&(c[_]=(c[_]||[]).concat(o[_]))}),["EX_GeographicBoundingBox","BoundingBox","Dimension","Attribution","MinScaleDenominator","MaxScaleDenominator"].forEach(function(_){_ in c||(c[_]=o[_])}),c}}function cf(l,a){return gr({},b7e,l,a)}function lV(l,a){return gr({},g7e,l,a)}function uee(l,a){var o=cf(l,a);if(o){var c=[uD(l.getAttribute("width")),uD(l.getAttribute("height"))];return o.size=c,o}}function hee(l,a){return gr([],S7e,l,a)}const B7e=a7e;let dee=(()=>{class l extends class{constructor(a){this.http=a,this.parser=new B7e}getCapabilities(a,o="1.1.0"){return this.http.get(`${a}?SERVICE=WMS&REQUEST=GetCapabilities&VERSION=${o}`,{headers:{"Content-Type":"text/xml",Accept:"text/xml, application/xml"},responseType:"text"}).pipe(pe(u=>this.parser.read(u)))}getLayerFromCapabilities(a,o){return this.getLayerFromCapabilitiesLayer(a,o.Capability.Layer)}getLayerFromCapabilitiesLayer(a,o){const c=o;return c?c.Name&&c.Name===a?c:c.Layer&&Array.isArray(c.Layer)?c.Layer.find(u=>this.getLayerFromCapabilitiesLayer(a,u)):c.Layer&&c.Layer.Name&&c.Layer.Name===a?c.Layer:void 0:null}getTimeDimensionFromLayer(a){var o;return null===(o=a.Dimension)||void 0===o?void 0:o.find(c=>"time"===c.name)}}{constructor(o){super(o)}}return l.\u0275fac=function(o){return new(o||l)(be(lf))},l.\u0275prov=Xe({token:l,factory:l.\u0275fac}),l})(),G7e=(()=>{class l extends class{constructor(a="1.0.0",o,c){let u;if(this.webclient=o,this.cache=new YHe,this.version=a,c&&(this.cache=c),"1.0.0"===this.version)this.wpsmarshaller=new NHe.m,u=new aee.Context([oee,ZHe,JHe]);else{if("2.0.0"!==this.version)throw new Error("You entered a WPS version other than 1.0.0 or 2.0.0.");this.wpsmarshaller=new FHe.Y,u=new aee.Context([oee,KHe,QHe])}this.xmlunmarshaller=u.createUnmarshaller(),this.xmlmarshaller=u.createMarshaller()}getCapabilities(a){const o=this.wpsmarshaller.getCapabilitiesUrl(a);return this.getRaw(o).pipe(pe(c=>{const u=this.xmlunmarshaller.unmarshalString(c);return this.wpsmarshaller.unmarshalCapabilities(u.value)}))}describeProcess(a,o){const c=this.wpsmarshaller.getDescribeProcessUrl(a,o);return this.getRaw(c).pipe(pe(u=>{const h=this.xmlunmarshaller.unmarshalString(u);return this.wpsmarshaller.unmarshalProcessDescription(h.value)}))}executeAsync(a,o,c,u,h=1e3,d,f){const g=this.executeAsyncBasic(a,o,c,u).pipe(yi(y=>function(l,a,o,c=1e3){o&&o(null);const d=YD(l.pipe(Vs(f=>{o&&o(f)})),see(c)).pipe(pe(f=>f[0])).pipe(yi(f=>a(f)?qt(f):d));return d}(this.getNextState(y,a,o,c,u),b=>{if("Failed"===b.status)throw new Error(`Error during execution of process ${o}: `+b.statusLocation);return"Succeeded"===b.status},d,h)),yi(y=>this.fetchResults(y,a,o,c,u,f)),Vs(y=>{for(const v of y)if("error"===v.description.type)throw console.log("server responded with 200, but body contained an error-result: ",v),new Error(v.value)}));return this.cachedQuery(a,o,c,u,g)}cachedQuery(a,o,c,u,h){return this.cache.get({url:a,processId:o,inputs:c,outputs:u}).pipe(Dc(f=>f?qt(f):h.pipe(Vs(m=>{this.cache.set({url:a,processId:o,inputs:c,outputs:u},m).subscribe(g=>{console.log("set data in cache",g)})}))))}getNextState(a,o,c,u,h){let d;if("1.0.0"===this.version){if(!a.statusLocation)throw Error("No status location");d=this.getRaw(a.statusLocation)}else{if("2.0.0"!==this.version)throw new Error(`'GetStatus' has not yet been implemented for this WPS-Version (${this.version}).`);{if(!a.jobID)throw Error("No job-Id");const m=this.wpsmarshaller.marshallGetStatusBody(o,c,a.jobID),g=this.xmlmarshaller.marshalString(m);d=this.postRaw(o,g)}}return d.pipe(oV(2e3,2),pe(m=>{const g=this.xmlunmarshaller.unmarshalString(m);return this.wpsmarshaller.unmarshalGetStateResponse(g,o,c,u,h)}))}fetchResults(a,o,c,u,h,d){if(a.results){let f;return f=d?d(a.results):this.wpsmarshaller.unmarshalSyncExecuteResponse(a.results,o,c,u,h),qt(f)}{if(!a.jobID)throw new Error("You want me to get a result, but I can't find a jobId. I don't know what to do now!");const f=this.wpsmarshaller.marshallGetResultBody(o,c,a.jobID),m=this.xmlmarshaller.marshalString(f);return this.postRaw(o,m).pipe(pe(g=>{const y=this.xmlunmarshaller.unmarshalString(g);let v;return v=d?d(y):this.wpsmarshaller.unmarshalSyncExecuteResponse(y,o,c,u,h),v}))}}executeAsyncBasic(a,o,c,u){const h=this.wpsmarshaller.executeUrl(a,o),d=this.wpsmarshaller.marshalExecBody(o,c,u,!0),f=this.xmlmarshaller.marshalString(d);return this.postRaw(h,f).pipe(pe(m=>{const g=this.xmlunmarshaller.unmarshalString(m);return this.wpsmarshaller.unmarshalAsyncExecuteResponse(g,a,o,c,u)}))}execute(a,o,c,u,h){const d=this.wpsmarshaller.executeUrl(a,o),f=this.wpsmarshaller.marshalExecBody(o,c,u,!1),m=this.xmlmarshaller.marshalString(f);return this.postRaw(d,m).pipe(pe(g=>{const y=this.xmlunmarshaller.unmarshalString(g);return h?h(y):this.wpsmarshaller.unmarshalSyncExecuteResponse(y,a,o,c,u)}))}dismiss(a,o,c){const u=this.wpsmarshaller.dismissUrl(a,o,c),h=this.wpsmarshaller.marshalDismissBody(c),d=this.xmlmarshaller.marshalString(h);return this.postRaw(u,d).pipe(pe(f=>{const m=this.xmlunmarshaller.unmarshalString(f);return this.wpsmarshaller.unmarshalDismissResponse(m,a,o)}))}postRaw(a,o){return this.webclient.post(a,o,{headers:{"Content-Type":"text/xml",Accept:"text/xml, application/xml"},responseType:"text"}).pipe(oV(2e3,2),Vs(u=>{this.parseResponseForErrors(a,u)}),um())}getRaw(a){return this.webclient.get(a,{headers:{Accept:"text/xml, application/xml"},responseType:"text"}).pipe(oV(2e3,2),Vs(c=>{this.parseResponseForErrors(a,c)}))}parseResponseForErrors(a,o){if(o.match("<title>404 Not Found</title>")||o.match("ows:ExceptionReport"))throw new Error(`From ${a}:  `+o)}setCache(a){this.cache=a}}{constructor(o="1.0.0",c,u){super(o,c,u),this.webClient=c}}return l.\u0275fac=function(o){return new(o||l)(be("WPS_VERSION"),be(lf),be("WPS_CACHE"))},l.\u0275prov=Xe({token:l,factory:l.\u0275fac}),l})();const fee="http://www.opengis.net/spec/owc-geojson/1.0/req/wms",pee="http://www.opengis.net/spec/owc-geojson/1.0/req/wfs",mee="http://www.opengis.net/spec/owc-geojson/1.0/req/wmts",gee="http://www.opengis.net/spec/owc-geojson/1.0/req/kml",yee="http://www.opengis.net/spec/owc-geojson/1.0/req/geojson",vee="http://www.opengis.net/spec/owc-geojson/1.0/req/xyz",_ee="http://www.opengis.net/spec/owc-geojson/1.0/req/tms",cV="GetMap",eI="GetFeature",uV="GetTile",aw="REST",hV="GetCapabilities",bee="GetFeatureInfo";function fV(l){return"type"in l}function pV(l){return l===fee}function See(l){return l===pee}function mV(l){return l===mee}function Tee(l){return l===vee}function tI(l){return l===_ee}var wee=Ve(429);function Cee(l){if(!l)return;const a=[],o=l.split(",");for(const c in o)if(o[c]){const u=o[c].split("-");if(1===u.length)a.push(o[c]);else if(2===u.length){const h=u[0].charCodeAt(0),d=u[1].charCodeAt(0);if(h<=d)for(let f=h;f<=d;f++)a.push(String.fromCharCode(f).toLowerCase());else for(let f=h;f>=d;f--)a.push(String.fromCharCode(f).toLowerCase())}}return a}let xee=(()=>{class l{constructor(o,c){this.wmtsClient=o,this.http=c}checkContext(o){return function(l){var a;let o;return(null===(a=null==l?void 0:l.properties)||void 0===a?void 0:a.links)&&(o=l.properties.links.profiles.find(c=>"http://www.opengis.net/spec/owc-geojson/1.0/req/core"===c.href)),!!o||(console.error("this is not a valid OWS Context v1.0!"),!1)}(o)}getContextTitle(o){return o.properties.title}getContextPublisher(o){return o.properties.publisher?o.properties.publisher:null}getContextExtent(o){return o.bbox?o.bbox:null}getResources(o){return o.features}getGroupResources(o){return o.features.filter(u=>{const h=this.getLayerGroupFromFolder(u);return h&&!Object.keys(Rc).includes(h)})}getSingleResources(o){return o.features.filter(u=>{const h=this.getLayerGroupFromFolder(u);return!h||Object.keys(Rc).includes(h)})}getResourceTitle(o){return o.properties.title}getResourceFolder(o){return o.properties.folder}getLayerGroupFromFolder(o){const c=this.getResourceFolder(o);if(c){const u=c.split("/");if(1===u.length){if(!Rc[c])return c}else{if(2===u.length)return Rc[u[0]]||console.warn(`Folder (${c}) should be named like: ${Object.keys(Rc).map(d=>`${d}/<FolderName>`).join(" | ")}`),u[1];console.log("only one Folder hierarchy is implemented",u)}}}getFilterType(o){if(o.properties.folder){const u=o.properties.folder.split("/")[0];if(Rc[u])return u}}getResourceUpdated(o){return o.properties.updated}getResourceDate(o){return o.properties.date?o.properties.date:null}getResourceOfferings(o){return o.properties.offerings?o.properties.offerings:null}isActive(o){var c;let u=!0;return(!1===o.properties.active||(null===(c=o.properties)||void 0===c?void 0:c.active))&&(u=o.properties.active),u}getResourceDescription(o){let c="";return o.properties.abstract&&(c=o.properties.abstract),c}getResourceOpacity(o){var c;let u=1;return(null===(c=o.properties)||void 0===c?void 0:c.opacity)&&(u=o.properties.opacity),u}getResourceAttribution(o){var c;let u="";return(null===(c=o.properties)||void 0===c?void 0:c.attribution)?u=o.properties.attribution:o.properties.rights&&(u=o.properties.rights),u}getResourceShards(o){var c;if(null===(c=o.properties)||void 0===c?void 0:c.shards)return o.properties.shards}getResourceMinMaxZoom(o,c="EPSG:4326"){const u={minZoom:null,maxZoom:null};return o.properties.minZoom?u.minZoom=o.properties.minZoom:o.properties.maxscaledenominator&&(u.minZoom=this.scaleDenominatorToZoom(o.properties.maxscaledenominator,c)||null),o.properties.maxZoom?u.maxZoom=o.properties.maxZoom:o.properties.minscaledenominator&&(u.maxZoom=this.scaleDenominatorToZoom(o.properties.minscaledenominator,c)||null),u}getTimeValueFromDimensions(o,c){if(null!==o)if(/,/g.test(o)){const h=o.split(",");if(h.length>0){const d=[];for(const f of h){const m=this.parseSingleTimeOrPeriod(f);"object"==typeof m&&m.interval&&(!m.periodicity&&c?m.periodicity=c:!m.periodicity&&!c&&console.warn("Interval without a period",o,c)),d.push(m)}return d}}else{const h=this.parseSingleTimeOrPeriod(o);if("object"==typeof h&&h.interval)return!h.periodicity&&c?h.periodicity=c:!h.periodicity&&!c&&console.warn("Interval without a period",o,c),h;if("string"==typeof h)return[h]}}parseSingleTimeOrPeriod(o){const c=wee.ou.fromISO(o);if(c.isValid)return c.toUTC().toISO();{const u=wee.Xp.fromISO(o);return u.isValid?{periodicity:this.parseISO8601Period(o),interval:`${u.start.toUTC().toISO()}/${u.end.toUTC().toISO()}`}:(console.warn("no Interval or not valid",o),null)}}parseISO8601Period(o){const c=o.match(/P\d*[YMWD](T\d\d[HMS])*/);if(c)return c[0]}getResourceDimensions(o){if(!o.properties.dimensions)return;const c={};for(const u of o.properties.dimensions){const h=u.name;"time"===h?(c.time=this.getTimeDimensions(o.properties.dimensions),null===c.time.values&&console.log("check to get time dimensions value from OGC Service later!!",o)):"elevation"===h?(c.elevation=this.getElevationDimension(o.properties.dimensions),null===c.elevation.values&&console.log("check to get elevation dimensions value from OGC Service later!!",o)):c[h]=u}return c}getTimeDimensions(o){var c,u;let h={values:null,units:null};const d=o.find(m=>"time"===m.name);if(!d)return;const f=this.getTimeValueFromDimensions(d.values,null===(c=null==d?void 0:d.display)||void 0===c?void 0:c.period);return h={values:null,units:d.units,display:{}},Array.isArray(f)?h.values=f:f&&"string"!=typeof f&&f.interval&&f.periodicity&&(h.values=f,f.periodicity&&(h.display.period=f.periodicity)),(null===(u=null==d?void 0:d.display)||void 0===u?void 0:u.format)&&(h.display.format=d.display.format),h}getElevationDimension(o){const c={values:null,units:null},u=o.find(h=>"elevation"===h.name);if(u)return c.values=u.value,c.units=u.units,u.display&&(c.display=u.display),c}getLayertypeFromOfferingCode(o){return pV(o.code)?pu:mV(o.code)?mu:See(o.code)?Rd:function(l){return l===gee}(o.code)?Id:function(l){return l===yee}(o.code)?gh:Tee(o.code)?qf:tI(o.code)?Ic:o.code}checkIfServiceOffering(o){return!(o.contents||!o.operations)}checkIfDataOffering(o){return!(!o.contents||o.operations)}getLegendUrl(o){let c="";if(o.styles){const u=o.styles.find(h=>h.default);if(u)return u.legendURL}else o.legendUrl&&(c=o.legendUrl);return c}getLayers(o,c){const u=[],h=this.getResources(o),d=[];return h.forEach(f=>{const m=this.createLayerOrGroupFromResource(f,o,c,d);u.push(m)}),YD(u).pipe(pe(f=>f.filter(m=>m))).pipe(pe(f=>f.reverse()))}createLayerOrGroupFromResource(o,c,u,h){const d=this.getGroupResources(c),f=this.getLayerGroupFromFolder(o);if(f){if(h.includes(f))return qt(null);{h.push(f);const m=d.filter(y=>this.getLayerGroupFromFolder(y)===f).reverse();return this.createLayerGroup(f,m,c,u)}}return this.createLayerFromDefaultOffering(o,c,u)}createLayerGroup(o,c,u,h){const d=[];let f=null;for(const g of c)f=this.getFilterType(g),d.push(this.createLayerFromDefaultOffering(g,u,h));return YD(d).pipe(pe(g=>g.filter(y=>y))).pipe(pe(g=>{if(g.length){if(f===Rc.Baselayers){const y=g.map(w=>w.description).filter(w=>w),v=g.map(w=>w.legendImg).filter(w=>w),_={id:`${o}_${g.map(w=>w.id).join(" ")}`.replace(/\s/g,"_"),name:o,layers:g,filtertype:Rc.Baselayers};return y.length&&(_.description=y.join(";\r\n")),v&&(_.legendImg=v[0]),new ME(_)}return new us({id:`${o}_${g.map(v=>v.id).join(" ")}`.replace(/\s/g,"_"),name:o,layers:g,filtertype:g[0].filtertype})}})).pipe(cs(g=>g instanceof us||g instanceof Lo))}createLayerFromDefaultOffering(o,c,u){var h;const d=null===(h=o.properties)||void 0===h?void 0:h.offerings;if(d){const f=d.find(m=>pV(m.code))||d.find(m=>mV(m.code))||d.find(m=>See(m.code))||d.find(m=>tI(m.code))||d[0];return this.createLayerFromOffering(f,o,c,u)}return qt(null)}createLayerFromOffering(o,c,u,h){const d=this.getLayertypeFromOfferingCode(o);return this.isRasterLayerType(d)&&this.isVectorLayerType(d)?cE(this.createRasterLayerFromOffering(o,c,u,h),this.createVectorLayerFromOffering(o,c,u,h)).pipe(cs(y=>y instanceof Lo)):this.isRasterLayerType(d)?this.createRasterLayerFromOffering(o,c,u,h):this.isVectorLayerType(d)?this.createVectorLayerFromOffering(o,c,u,h):(console.warn(`This type of service (${d}) has not been implemented yet.`,o),qt(null))}createVectorLayerFromOffering(o,c,u,h){const d=this.getLayertypeFromOfferingCode(o);let f=qt(null);switch(d){case Rd:f=this.createWfsLayerFromOffering(o,c,u);break;case Ic:f=this.createVectorTileLayerFromOffering(o,c,u,h);break;case gh:case Id:f=this.createDataVectorLayerFromOffering(o,c,u);break;default:console.warn(`This type of layer '${d}' / offering '${o.code}' cannot be converted into a VectorLayer`,o)}return f}isVectorLayerType(o){return[Rd,Id,gh,Ic].includes(o)}getVectorLayerOptions(o,c,u,h){const d=this.getLayerOptions(o,c,u);if(this.isVectorLayerType(d.type)){const{minZoom:f,maxZoom:m}=this.getResourceMinMaxZoom(c,h),g=Cee(this.getResourceShards(c));return Object.assign(Object.assign({},d),{type:d.type,subdomains:g,maxZoom:m,minZoom:f})}console.error(`The layer ${d.id} is not a VectorLayer`,d)}getWfsOptions(o){let u=null;if(o.operations.find(h=>h.code===eI)){const{url:h,searchParams:d}=this.checkWfsParams(o);h&&d&&(u=`${h}?${d.toString()}`)}return u}checkWfsParams(o){const{url:c,searchParams:u}=this.parseOperationUrl(o,eI),h_typeNames=u.get("TYPENAME")||u.get("TYPENAMES"),h_version=u.get("VERSION"),h_service=u.get("SERVICE"),h_request=u.get("REQUEST");return(h_typeNames||h_version)&&h_service&&h_request?{url:c,searchParams:u}:(console.warn(`URL does not contain the minimum required arguments for a WFS typeName: ${h_typeNames}, version: ${h_version}, service: ${h_service}, request: ${h_request}`,`${c}?${u.toString()}`),{url:null,searchParams:null})}createRasterLayerFromOffering(o,c,u,h){const d=this.getLayertypeFromOfferingCode(o);let f=qt(null);switch(d){case pu:f=this.createWmsLayerFromOffering(o,c,u,h);break;case mu:f=this.createWmtsLayerFromOffering(o,c,u,h);break;case qf:f=this.createXyzLayerFromOffering(o,c,u,h);break;case Ic:f=this.createTmsRasterLayerFromOffering(o,c,u,h);break;default:console.warn(`This type of offering '${o.code}' cannot be converted into a RasterLayer.`,o)}return f}isRasterLayerType(o){return[pu,mu,qf,Ic].includes(o)}createVectorTileLayerFromOffering(o,c,u,h){var d;if(!tI(o.code))return qt(null);if(!o.operations.find(m=>"application/vnd.mapbox-vector-tile"===m.type))return qt(null);{const m=this.getVectorLayerOptions(o,c,u),g=o.operations.find(y=>y.code===aw).href;if(m.url=g,!o.styles||"OpenMapStyle"!==(null===(d=o.styles[0])||void 0===d?void 0:d.content.type))return qt(new Zs(m));{const y=o.styles[0].content;if(null==y?void 0:y.styleSource){let v;return m.options?m.options.style||(m.options.style={},m.options.styleSource=y.styleSource):m.options={styleSource:y.styleSource,style:null},(null==y?void 0:y.content)?v=qt("string"==typeof y.content?JSON.parse(y.content):y.content):(null==y?void 0:y.href)?v=this.http.get(y.href):console.warn("Couldn't find style for Tms-Offering",o),v?v.pipe(pe(_=>(m.options.style=_,new Zs(m)))):qt(new Zs(m))}}}}createWfsLayerFromOffering(o,c,u){let h;if(o.operations){h=this.getWfsOptions(o);const d=this.getVectorLayerOptions(o,c,u);d.url=h;const f=new Zs(d);return c.bbox?f.bbox=c.bbox:u&&u.bbox&&(f.bbox=u.bbox),qt(f)}if(null===h)return qt(null)}createDataVectorLayerFromOffering(o,c,u){if(o.contents){let h,d;o.contents.forEach(g=>{(null==g?void 0:g.content)?"application/geo+json"===g.type?h="string"==typeof g.content?JSON.parse(g.content):g.content:"application/vnd.google-earth.kml+xml"===g.type&&(h=g.content):(null==g?void 0:g.href)&&(d=g.href)});const f=this.getVectorLayerOptions(o,c,u);return h?f.data=h:d&&(f.url=d),c.bbox?f.bbox=c.bbox:u&&u.bbox&&(f.bbox=u.bbox),qt(new Zs(f))}return qt(null)}createTmsRasterLayerFromOffering(o,c,u,h){if(tI(o.code)){if(o.operations.find(f=>"image/png"===f.type||"image/jpeg"===f.type)){const f=this.getRasterLayerOptions(o,c,u,h);return f.type="xyz",qt(new dl(f))}return qt(null)}return qt(null)}createWmtsLayerFromOffering(o,c,u,h){return mV(o.code)?this.getWmtsOptions(o,c,u,h).pipe(pe(d=>new fl(d))):qt(null)}createWmsLayerFromOffering(o,c,u,h){if(pV(o.code)){const d=this.getWmsOptions(o,c,u,h);return qt(new iT(d))}return qt(null)}createXyzLayerFromOffering(o,c,u,h){if(Tee(o.code)){const d=this.getRasterLayerOptions(o,c,u,h);return d.type="xyz",qt(new dl(d))}return qt(null)}getWmtsOptions(o,c,u,h){var d;const f=this.getRasterLayerOptions(o,c,u,h),{searchParams:m}=this.parseOperationUrl(o,uV),g={layer:m.get("LAYER"),style:"default",projection:h},y=null===(d=null==o?void 0:o.styles)||void 0===d?void 0:d.find(v=>v.default);return y&&y.name?g.style=y.name:m.has("STYLE")&&(g.style=m.get("STYLE")),m.has("FORMAT")&&(g.format=m.get("FORMAT")),m.has("VERSION")&&(g.version=m.get("VERSION")),this.getMatrixSetForWMTS(o,h).pipe(pe(v=>{const _=Object.assign(Object.assign({},f),{type:"wmts",params:g});return v&&(_.params.matrixSetOptions={matrixSet:v.matrixSet,matrixIds:v.matrixIds,resolutions:v.resolutions}),_}))}parseOperationUrl(o,c){const u={url:null,searchParams:null};if(o.operations){const h=o.operations.find(d=>d.code===c);if(h){const{url:d,searchParams:f}=this.getJsonFromUri(h.href);u.url=d,u.searchParams=f}else console.error(`There is no ${c} -operation in the offering ${o.code}.`,o)}else console.error(`The offering ${o.code} has no operations.`,o);return u}getMatrixSetForWMTS(o,c){if(null==o?void 0:o.matrixSets)return qt(o.matrixSets.find(h=>h.srs===c));if(null===o.matrixSets)return qt(null);{const u=this.parseOperationUrl(o,"GetCapabilities").url;return this.wmtsClient.getCapabilities(u).pipe(pe(h=>{const d=h.value.contents.tileMatrixSet;let f=d.find(g=>g.identifier.value===c);if(!f&&"EPSG:3857"===c){const g="EPSG:900913";f=d.find(y=>y.identifier.value===g)}return{srs:c,matrixSet:f.identifier.value,matrixIds:f.tileMatrix.map(g=>g.identifier.value),resolutions:f.tileMatrix.map(g=>g.scaleDenominator),origin:{x:f.tileMatrix[0].topLeftCorner[1],y:f.tileMatrix[0].topLeftCorner[0]},tilesize:f.tileMatrix[0].tileHeight}}))}}getWmsOptions(o,c,u,h){var d;const f=this.getRasterLayerOptions(o,c,u,h);if((null==f?void 0:f.type)===pu){const{searchParams:m}=this.parseOperationUrl(o,cV),g={LAYERS:m.get("LAYERS"),TRANSPARENT:!0},y=null===(d=null==o?void 0:o.styles)||void 0===d?void 0:d.find(_=>_.default);return y&&y.name?g.STYLES=y.name:m.has("STYLES")&&(g.STYLES=m.get("STYLES")),m.has("FORMAT")&&(g.FORMAT=m.get("FORMAT")),m.has("TIME")&&(g.TIME=m.get("TIME")),m.has("VERSION")&&(g.VERSION=m.get("VERSION")),m.has("TILED")&&(g.TILED=m.get("TILED")),m.has("CQL_FILTER")&&(g.CQL_FILTER=m.get("CQL_FILTER")),m.has("FILTER")&&(g.FILTER=m.get("FILTER")),Object.assign(Object.assign({},f),{type:"wms",params:g})}console.warn(`resource ${c.id} cannot be converted into a WMS - Layer`,o)}getRasterLayerOptions(o,c,u,h){var d;const f=this.getLayerOptions(o,c,u);if(this.isRasterLayerType(f.type)){let m,g;const y=null===(d=c.properties)||void 0===d?void 0:d.dimensions;y&&(m=this.getTimeDimensions(y),g=this.getElevationDimension(y));const{minZoom:v,maxZoom:_}=this.getResourceMinMaxZoom(c,h),b=Cee(this.getResourceShards(c)),w=o.operations.find(C=>function(l){return!!function(l){return"code"in l&&"method"in l&&(!l.request||fV(l.request))&&(!l.result||fV(l.result))}(l)&&[cV,uV,aw].includes(l.code)}(C));if(w){const C=Object.assign(Object.assign({},f),{type:f.type,url:this.getJsonFromUri(w.href).url});return v&&(C.minZoom=v),_&&(C.maxZoom=_),(null==b?void 0:b.length)&&(C.subdomains=b),m&&(C.dimensions||(C.dimensions={}),C.dimensions.time=m),g&&(C.dimensions||(C.dimensions={}),C.dimensions.elevation=g),C}console.warn("There is no Raster operation for the offering",o)}else console.error(`The layer ${f.id} is not a RasterLayer`,f)}getLayerOptions(o,c,u){var h;const d={id:c.id,type:this.getLayertypeFromOfferingCode(o),name:this.getResourceTitle(c),removable:!0,continuousWorld:!1,opacity:this.getResourceOpacity(c),displayName:this.getResourceTitle(c),visible:this.isActive(c),attribution:this.getResourceAttribution(c),dimensions:this.getResourceDimensions(c),legendImg:this.getLegendUrl(o),styles:o.styles,description:this.getResourceDescription(c)};c.bbox?d.bbox=c.bbox:u&&u.bbox&&(d.bbox=u.bbox),(null===(h=c.properties)||void 0===h?void 0:h.folder)===Rc.Baselayers&&!c.bbox&&(d.bbox=null);const f=this.getFilterType(c);return f&&(d.filtertype=f),d}scaleDenominatorToZoom(o,c){const u=Bn(c);if(!u)return console.error(`The projection '${c}' is unknown.You'll have to manually register it with 'proj4.defs'.`),null;if(!u.getWorldExtent())return console.error(`No world extent given for projection '${c}'.`),null;const h=1/u.getMetersPerUnit(),d=u.getWorldExtent(),g=Math.max(d[2]-d[0],d[3]-d[1]);return Math.log2(g/(o*h/2571.42*256))}getJsonFromUri(o){let c=null;c=0===o.indexOf("http://")||0===o.indexOf("https://")?new URL(o):new URL(o,window.location.origin);const u=new URLSearchParams;c.searchParams.forEach((d,f)=>{u.set(f.toUpperCase(),d)});const h=-1!==o.indexOf("?")?o.indexOf("?"):o.length;return{url:o.substring(0,h),searchParams:u}}generateOwsContextFrom(o,c,u,h){const d=[],f=[],m=[];c.forEach(_=>{_.filtertype===Rc.Overlays?d.push(_):_.filtertype===Rc.Layers?f.push(_):_.filtertype===Rc.Baselayers&&m.push(_)});const g=[...d.reverse(),...f.reverse(),...m.reverse()];let y={links:{profiles:[{href:"http://www.opengis.net/spec/owc-geojson/1.0/req/core"}]},lang:"en",title:"This is an automatically created context",updated:(new Date).toISOString(),subtitle:`Context created from ${g.map(_=>`Layer:${_.id}`).join(", ")}`};h&&(y=Object.assign(y,h));const v={id:o,type:"FeatureCollection",properties:y,features:[]};return u&&(v.bbox=u),g.forEach(_=>{if(_ instanceof us){const b=_.name;[..._.layers].reverse().forEach(C=>{const E=this.generateResourceFromLayer(C,b);v.features.push(E)})}else{const b=this.generateResourceFromLayer(_);v.features.push(b)}}),v}generateResourceFromLayer(o,c){const u={id:o.id,properties:{title:o.displayName||o.name,opacity:o.opacity,active:o.visible,abstract:o.description,rights:o.attribution,minZoom:o.minZoom,maxZoom:o.maxZoom,updated:(new Date).toISOString(),offerings:[this.generateOfferingFromLayer(o)]},bbox:o.bbox,type:"Feature",geometry:null};return u.properties.folder=c?`${o.filtertype}/${c}`:`${o.filtertype}`,(o instanceof dl&&o.subdomains||o instanceof Zs&&o.subdomains)&&(u.properties.shards=`${o.subdomains[0]}-${o.subdomains[o.subdomains.length-1]}`),o.dimensions&&(u.properties.dimensions=this.generateDimensionsFromLayer(o)),u}generateOfferingFromLayer(o){var c,u,h,d,f,m,g,y;const v={code:this.getOfferingCodeFromLayer(o),title:o.name,styles:[]};return o.type===gh||o.type===Id?v.contents=this.getContentsFromLayer(o):v.operations=this.getOperationsFromLayer(o),o instanceof dl?((null===(c=null==o?void 0:o.params)||void 0===c?void 0:c.STYLES)||(null===(u=null==o?void 0:o.params)||void 0===u?void 0:u.style)||o.legendImg)&&v.styles.push({name:(null===(h=null==o?void 0:o.params)||void 0===h?void 0:h.STYLES)||(null===(d=null==o?void 0:o.params)||void 0===d?void 0:d.style)||null,title:`${o.name}-StyleTitle`,default:!!((null===(f=null==o?void 0:o.params)||void 0===f?void 0:f.STYLES)||(null===(m=null==o?void 0:o.params)||void 0===m?void 0:m.style)||o.legendImg),legendURL:"string"==typeof o.legendImg?o.legendImg:null}):o instanceof Zs&&"tms"===o.type?(null===(g=null==o?void 0:o.options)||void 0===g?void 0:g.style)&&(null===(y=null==o?void 0:o.options)||void 0===y?void 0:y.styleSource)&&v.styles.push({name:null,title:`${o.name}-StyleTitle`,default:!0,legendURL:"string"==typeof o.legendImg?o.legendImg:null,content:{type:"OpenMapStyle",styleSource:o.options.styleSource,content:o.options.style}}):v.styles.push({name:null,title:`${o.name}-StyleTitle`,default:!0,legendURL:"string"==typeof o.legendImg?o.legendImg:null}),v.styles.length||delete v.styles,v}getOfferingCodeFromLayer(o){switch(o.type){case pu:return fee;case mu:return mee;case gh:return yee;case qf:return vee;case Rd:return pee;case Id:return gee;case Ic:return _ee;default:return console.warn(`This type of layer (${o.type}) has not been implemented yet.`,o),null}}getContentsFromLayer(o){const c=[];switch(o.type){case gh:o.data?c.push({type:"application/geo+json",content:JSON.stringify(o.data)}):o.url&&c.push({type:"application/geo+json",href:o.url});break;case Id:o.data?c.push({type:"application/vnd.google-earth.kml+xml",content:o.data}):o.url&&c.push({type:"application/vnd.google-earth.kml+xml",href:o.url});break;default:console.warn(`Cannot get contents for this type of VectorLayer: (${o.type})`,o)}return c}getOperationsFromLayer(o){if(o instanceof dl)switch(o.type){case pu:return this.getWmsOperationsFromLayer(o);case mu:return this.getWmtsOperationsFromLayer(o);case qf:return this.getXyzOperationsFromLayer(o);case Ic:return this.getTMSRasterOperationsFromLayer(o);default:return console.warn(`Cannot get operations for this type of layer: (${o.type})`,o),[]}else if(o instanceof Zs)switch(o.type){case Rd:return this.getWfsOperationsFromLayer(o);case Ic:return this.getTMSVectorOperationsFromLayer(o);default:return console.warn(`Cannot get operations for this type of layer: (${o.type})`,o),[]}}getXyzOperationsFromLayer(o){return[{code:aw,method:"GET",type:"image/png",href:`${o.url}`}]}getTMSRasterOperationsFromLayer(o){return[{code:aw,method:"GET",type:"image/png",href:`${o.url}`}]}getWfsOperationsFromLayer(o){var c;const u=(null===(c=o.options)||void 0===c?void 0:c.version)?o.options.version:"1.1.0",{url:h,searchParams:d}=this.getJsonFromUri(o.url),f=d.get("TYPENAME")||d.get("TYPENAMES");return f?[{code:eI,method:"GET",type:"application/json",href:`${h}?${d.toString()}`},{code:hV,method:"GET",type:"application/xml",href:`${h}?service=WFS&request=GetCapabilities`},{code:"DescribeFeatureType",method:"GET",type:"application/json",href:`${h}?service=WFS&request=DescribeFeatureType&version=${u}&typeNames=${f}&outputFormat=application/json`}]:(console.warn(`URL does not contain the minimum required arguments for a WFS typeName: ${f}`,h),[])}getTMSVectorOperationsFromLayer(o){return[{code:aw,method:"GET",type:"application/vnd.mapbox-vector-tile",href:`${o.url}`}]}getWmsOperationsFromLayer(o){let c=o.url;c.endsWith("?")&&(c=c.substr(0,c.length-1));const u=new URLSearchParams;return Object.keys(o.params).forEach(g=>{const y=o.params[g];y&&u.set(g,y)}),u.set("REQUEST","GetMap"),u.set("SERVICE","WMS"),u.get("FORMAT")||u.set("FORMAT","image/png"),[{code:cV,method:"GET",type:u.get("FORMAT"),href:`${c}?${u.toString()}`},{code:hV,method:"GET",type:"application/xml",href:`${c}?service=WMS&version=${u.get("VERSION")}&request=GetCapabilities`},{code:bee,method:"GET",type:"application/json",href:`${c}?service=WMS&version=${u.get("VERSION")}&request=GetFeatureInfo&TRANSPARENT=TRUE&LAYERS=${u.get("LAYERS")}&INFO_FORMAT=application/json`}]}getWmtsOperationsFromLayer(o){let c=o.url;c.endsWith("?")&&(c=c.substr(0,c.length-1));const u=new URLSearchParams;return Object.keys(o.params).forEach(g=>{const y=o.params[g];y&&u.set(g.toUpperCase(),y)}),u.set("REQUEST","GetTile"),u.set("SERVICE","WMTS"),u.get("FORMAT")||u.set("FORMAT","image/png"),u.has("MATRIXSETOPTIONS")&&u.delete("MATRIXSETOPTIONS"),[{code:uV,href:`${c}?${u.toString()}`,method:"GET",type:u.get("FORMAT")},{code:hV,href:`${c}?SERVICE=WMTS&REQUEST=GetCapabilities&VERSION=${u.get("VERSION")}`,method:"GET",type:"application/xml"},{code:bee,href:`${c}?SERVICE=WMS&REQUEST=GetFeatureInfo&VERSION=${u.get("VERSION")}`,method:"GET",type:"text/html"}]}generateDimensionsFromLayer(o){var c,u;const h=[];if(null===(c=null==o?void 0:o.dimensions)||void 0===c?void 0:c.time){const d={name:"time",values:null,units:"ISO8601"};o.dimensions.time.display&&(d.display=o.dimensions.time.display),d.values=Array.isArray(o.dimensions.time.values)?"string"==typeof o.dimensions.time.values[0]?o.dimensions.time.values.join(","):o.dimensions.time.values.map(f=>`${f.interval}/${f.periodicity}`).join(","):`${o.dimensions.time.values.interval}/${o.dimensions.time.values.periodicity}`,h.push(d)}if(null===(u=null==o?void 0:o.dimensions)||void 0===u?void 0:u.elevation){const d={name:"elevation",value:o.dimensions.elevation.values,units:o.dimensions.elevation.units};o.dimensions.elevation.display&&(d.display=o.dimensions.elevation.display),h.push(d)}return h.length?h:null}}return l.\u0275fac=function(o){return new(o||l)(be(iee),be(lf))},l.\u0275prov=Xe({token:l,factory:l.\u0275fac,providedIn:"root"}),l})(),J7e=(()=>{class l{}return l.\u0275fac=function(o){return new(o||l)},l.\u0275mod=Yt({type:l}),l.\u0275inj=jt({providers:[iee,dee,xee,G7e],imports:[[]]}),l})();function Gc(l){return null!=l&&"false"!=`${l}`}function Fg(l,a=0){return function(l){return!isNaN(parseFloat(l))&&!isNaN(Number(l))}(l)?Number(l):a}function Go(l){return l instanceof kt?l.nativeElement:l}const Eee=new class extends Ru{flush(a){this.active=!0,this.scheduled=void 0;const{actions:o}=this;let c,u=-1,h=o.length;a=a||o.shift();do{if(c=a.execute(a.state,a.delay))break}while(++u<h&&(a=o.shift()));if(this.active=!1,c){for(;++u<h&&(a=o.shift());)a.unsubscribe();throw c}}}(class extends jD{constructor(a,o){super(a,o),this.scheduler=a,this.work=o}requestAsyncId(a,o,c=0){return null!==c&&c>0?super.requestAsyncId(a,o,c):(a.actions.push(this),a.scheduled||(a.scheduled=requestAnimationFrame(()=>a.flush(null))))}recycleAsyncId(a,o,c=0){if(null!==c&&c>0||null===c&&this.delay>0)return super.recycleAsyncId(a,o,c);0===a.actions.length&&(cancelAnimationFrame(o),a.scheduled=void 0)}});let rje=1;const ije=Promise.resolve(),nI={};function Mee(l){return l in nI&&(delete nI[l],!0)}const Dee={setImmediate(l){const a=rje++;return nI[a]=!0,ije.then(()=>Mee(a)&&l()),a},clearImmediate(l){Mee(l)}};new class extends Ru{flush(a){this.active=!0,this.scheduled=void 0;const{actions:o}=this;let c,u=-1,h=o.length;a=a||o.shift();do{if(c=a.execute(a.state,a.delay))break}while(++u<h&&(a=o.shift()));if(this.active=!1,c){for(;++u<h&&(a=o.shift());)a.unsubscribe();throw c}}}(class extends jD{constructor(a,o){super(a,o),this.scheduler=a,this.work=o}requestAsyncId(a,o,c=0){return null!==c&&c>0?super.requestAsyncId(a,o,c):(a.actions.push(this),a.scheduled||(a.scheduled=Dee.setImmediate(a.flush.bind(a,null))))}recycleAsyncId(a,o,c=0){if(null!==c&&c>0||null===c&&this.delay>0)return super.recycleAsyncId(a,o,c);0===a.actions.length&&(Dee.clearImmediate(o),a.scheduled=void 0)}});class cje{constructor(a){this.durationSelector=a}call(a,o){return o.subscribe(new uje(a,this.durationSelector))}}class uje extends gc{constructor(a,o){super(a),this.durationSelector=o,this.hasValue=!1}_next(a){if(this.value=a,this.hasValue=!0,!this.throttled){let o;try{const{durationSelector:u}=this;o=u(a)}catch(u){return this.destination.error(u)}const c=Pl(o,new tl(this));!c||c.closed?this.clearThrottle():this.add(this.throttled=c)}}clearThrottle(){const{value:a,hasValue:o,throttled:c}=this;c&&(this.remove(c),this.throttled=void 0,c.unsubscribe()),o&&(this.value=void 0,this.hasValue=!1,this.destination.next(a))}notifyNext(){this.clearThrottle()}notifyComplete(){this.clearThrottle()}}function gV(l,a=z_){return function(l){return function(o){return o.lift(new cje(l))}}(()=>see(l,a))}function Lp(l){return a=>a.lift(new hje(l))}class hje{constructor(a){this.notifier=a}call(a,o){const c=new dje(a),u=Pl(this.notifier,new tl(c));return u&&!c.seenValue?(c.add(u),o.subscribe(c)):c}}class dje extends gc{constructor(a){super(a),this.seenValue=!1}notifyNext(){this.seenValue=!0,this.complete()}notifyComplete(){}}let yV;try{yV="undefined"!=typeof Intl&&Intl.v8BreakIterator}catch(l){yV=!1}let lw,vV,zc=(()=>{class l{constructor(o){this._platformId=o,this.isBrowser=this._platformId?ti(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!yV)&&"undefined"!=typeof CSS&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return l.\u0275fac=function(o){return new(o||l)(be(Ui))},l.\u0275prov=Xe({factory:function(){return new l(be(Ui))},token:l,providedIn:"root"}),l})();function cw(l){return function(){if(null==lw&&"undefined"!=typeof window)try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>lw=!0}))}finally{lw=lw||!1}return lw}()?l:!!l.capture}function _V(l){if(function(){if(null==vV){const l="undefined"!=typeof document?document.head:null;vV=!(!l||!l.createShadowRoot&&!l.attachShadow)}return vV}()){const a=l.getRootNode?l.getRootNode():null;if("undefined"!=typeof ShadowRoot&&ShadowRoot&&a instanceof ShadowRoot)return a}return null}function $h(l){return l.composedPath?l.composedPath()[0]:l.target}"undefined"!=typeof window&&window;const Ree=new Sn("cdk-dir-doc",{providedIn:"root",factory:function(){return zoe(Xn)}});let hw=(()=>{class l{constructor(o){if(this.value="ltr",this.change=new pt,o){const u=o.documentElement?o.documentElement.dir:null,h=(o.body?o.body.dir:null)||u;this.value="ltr"===h||"rtl"===h?h:"ltr"}}ngOnDestroy(){this.change.complete()}}return l.\u0275fac=function(o){return new(o||l)(be(Ree,8))},l.\u0275prov=Xe({factory:function(){return new l(be(Ree,8))},token:l,providedIn:"root"}),l})(),bV=(()=>{class l{constructor(o,c,u){this._ngZone=o,this._platform=c,this._scrolled=new tt,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=u}register(o){this.scrollContainers.has(o)||this.scrollContainers.set(o,o.elementScrolled().subscribe(()=>this._scrolled.next(o)))}deregister(o){const c=this.scrollContainers.get(o);c&&(c.unsubscribe(),this.scrollContainers.delete(o))}scrolled(o=20){return this._platform.isBrowser?new yt(c=>{this._globalSubscription||this._addGlobalListener();const u=o>0?this._scrolled.pipe(gV(o)).subscribe(c):this._scrolled.subscribe(c);return this._scrolledCount++,()=>{u.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):qt()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((o,c)=>this.deregister(c)),this._scrolled.complete()}ancestorScrolled(o,c){const u=this.getAncestorScrollContainers(o);return this.scrolled(c).pipe(cs(h=>!h||u.indexOf(h)>-1))}getAncestorScrollContainers(o){const c=[];return this.scrollContainers.forEach((u,h)=>{this._scrollableContainsElement(h,o)&&c.push(h)}),c}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(o,c){let u=Go(c),h=o.getElementRef().nativeElement;do{if(u==h)return!0}while(u=u.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>b1(this._getWindow().document,"scroll").subscribe(()=>this._scrolled.next()))}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}}return l.\u0275fac=function(o){return new(o||l)(be(Fn),be(zc),be(Xn,8))},l.\u0275prov=Xe({factory:function(){return new l(be(Fn),be(zc),be(Xn,8))},token:l,providedIn:"root"}),l})(),SV=(()=>{class l{constructor(o,c,u){this._platform=o,this._change=new tt,this._changeListener=h=>{this._change.next(h)},this._document=u,c.runOutsideAngular(()=>{if(o.isBrowser){const h=this._getWindow();h.addEventListener("resize",this._changeListener),h.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){const o=this._getWindow();o.removeEventListener("resize",this._changeListener),o.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const o={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),o}getViewportRect(){const o=this.getViewportScrollPosition(),{width:c,height:u}=this.getViewportSize();return{top:o.top,left:o.left,bottom:o.top+u,right:o.left+c,height:u,width:c}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const o=this._document,c=this._getWindow(),u=o.documentElement,h=u.getBoundingClientRect();return{top:-h.top||o.body.scrollTop||c.scrollY||u.scrollTop||0,left:-h.left||o.body.scrollLeft||c.scrollX||u.scrollLeft||0}}change(o=20){return o>0?this._change.pipe(gV(o)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const o=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:o.innerWidth,height:o.innerHeight}:{width:0,height:0}}}return l.\u0275fac=function(o){return new(o||l)(be(zc),be(Fn),be(Xn,8))},l.\u0275prov=Xe({factory:function(){return new l(be(zc),be(Fn),be(Xn,8))},token:l,providedIn:"root"}),l})(),TV=(()=>{class l{}return l.\u0275fac=function(o){return new(o||l)},l.\u0275mod=Yt({type:l}),l.\u0275inj=jt({}),l})();function c9e(l){const{subscriber:a,counter:o,period:c}=l;a.next(o),this.schedule({subscriber:a,counter:o+1,period:c},c)}function xV(l,a,o){for(let c in a)if(a.hasOwnProperty(c)){const u=a[c];u?l.setProperty(c,u,(null==o?void 0:o.has(c))?"important":""):l.removeProperty(c)}return l}function w0(l,a){const o=a?"":"none";xV(l.style,{"touch-action":a?"":"none","-webkit-user-drag":a?"":"none","-webkit-tap-highlight-color":a?"":"transparent","user-select":o,"-ms-user-select":o,"-webkit-user-select":o,"-moz-user-select":o})}function Qee(l,a,o){xV(l.style,{position:a?"":"fixed",top:a?"":"0",opacity:a?"":"0",left:a?"":"-999em"},o)}function sI(l,a){return a&&"none"!=a?l+" "+a:l}function ete(l){const a=l.toLowerCase().indexOf("ms")>-1?1:1e3;return parseFloat(l)*a}function EV(l,a){return l.getPropertyValue(a).split(",").map(c=>c.trim())}function MV(l){const a=l.getBoundingClientRect();return{top:a.top,right:a.right,bottom:a.bottom,left:a.left,width:a.width,height:a.height}}function DV(l,a,o){const{top:c,bottom:u,left:h,right:d}=l;return o>=c&&o<=u&&a>=h&&a<=d}function dw(l,a,o){l.top+=a,l.bottom=l.top+l.height,l.left+=o,l.right=l.left+l.width}function tte(l,a,o,c){const{top:u,right:h,bottom:d,left:f,width:m,height:g}=l,y=m*a,v=g*a;return c>u-v&&c<d+v&&o>f-y&&o<h+y}"undefined"!=typeof Element&&Element;class nte{constructor(a,o){this._document=a,this._viewportRuler=o,this.positions=new Map}clear(){this.positions.clear()}cache(a){this.clear(),this.positions.set(this._document,{scrollPosition:this._viewportRuler.getViewportScrollPosition()}),a.forEach(o=>{this.positions.set(o,{scrollPosition:{top:o.scrollTop,left:o.scrollLeft},clientRect:MV(o)})})}handleScroll(a){const o=$h(a),c=this.positions.get(o);if(!c)return null;const u=o===this._document?o.documentElement:o,h=c.scrollPosition;let d,f;if(o===this._document){const y=this._viewportRuler.getViewportScrollPosition();d=y.top,f=y.left}else d=o.scrollTop,f=o.scrollLeft;const m=h.top-d,g=h.left-f;return this.positions.forEach((y,v)=>{y.clientRect&&o!==v&&u.contains(v)&&dw(y.clientRect,m,g)}),h.top=d,h.left=f,{top:m,left:g}}}function rte(l){const a=l.cloneNode(!0),o=a.querySelectorAll("[id]"),c=l.nodeName.toLowerCase();a.removeAttribute("id");for(let u=0;u<o.length;u++)o[u].removeAttribute("id");return"canvas"===c?ote(l,a):("input"===c||"select"===c||"textarea"===c)&&ste(l,a),ite("canvas",l,a,ote),ite("input, textarea, select",l,a,ste),a}function ite(l,a,o,c){const u=a.querySelectorAll(l);if(u.length){const h=o.querySelectorAll(l);for(let d=0;d<u.length;d++)c(u[d],h[d])}}let h9e=0;function ste(l,a){"file"!==a.type&&(a.value=l.value),"radio"===a.type&&a.name&&(a.name=`mat-clone-${a.name}-${h9e++}`)}function ote(l,a){const o=a.getContext("2d");if(o)try{o.drawImage(l,0,0)}catch(c){}}const ate=cw({passive:!0}),lte=cw({passive:!1}),AV=new Set(["position"]);class f9e{constructor(a,o,c,u,h,d){this._config=o,this._document=c,this._ngZone=u,this._viewportRuler=h,this._dragDropRegistry=d,this._passiveTransform={x:0,y:0},this._activeTransform={x:0,y:0},this._hasStartedDragging=!1,this._moveEvents=new tt,this._pointerMoveSubscription=L.EMPTY,this._pointerUpSubscription=L.EMPTY,this._scrollSubscription=L.EMPTY,this._resizeSubscription=L.EMPTY,this._boundaryElement=null,this._nativeInteractionsEnabled=!0,this._handles=[],this._disabledHandles=new Set,this._direction="ltr",this.dragStartDelay=0,this._disabled=!1,this.beforeStarted=new tt,this.started=new tt,this.released=new tt,this.ended=new tt,this.entered=new tt,this.exited=new tt,this.dropped=new tt,this.moved=this._moveEvents,this._pointerDown=f=>{if(this.beforeStarted.next(),this._handles.length){const m=this._handles.find(g=>{const y=$h(f);return!!y&&(y===g||g.contains(y))});m&&!this._disabledHandles.has(m)&&!this.disabled&&this._initializeDragSequence(m,f)}else this.disabled||this._initializeDragSequence(this._rootElement,f)},this._pointerMove=f=>{const m=this._getPointerPositionOnPage(f);if(!this._hasStartedDragging){if(Math.abs(m.x-this._pickupPositionOnPage.x)+Math.abs(m.y-this._pickupPositionOnPage.y)>=this._config.dragStartThreshold){const b=Date.now()>=this._dragStartTime+this._getDragStartDelay(f),w=this._dropContainer;if(!b)return void this._endDragSequence(f);(!w||!w.isDragging()&&!w.isReceiving())&&(f.preventDefault(),this._hasStartedDragging=!0,this._ngZone.run(()=>this._startDragSequence(f)))}return}this._boundaryElement&&(!this._previewRect||!this._previewRect.width&&!this._previewRect.height)&&(this._previewRect=(this._preview||this._rootElement).getBoundingClientRect()),f.preventDefault();const g=this._getConstrainedPointerPosition(m);if(this._hasMoved=!0,this._lastKnownPointerPosition=m,this._updatePointerDirectionDelta(g),this._dropContainer)this._updateActiveDropContainer(g,m);else{const y=this._activeTransform;y.x=g.x-this._pickupPositionOnPage.x+this._passiveTransform.x,y.y=g.y-this._pickupPositionOnPage.y+this._passiveTransform.y,this._applyRootElementTransform(y.x,y.y),"undefined"!=typeof SVGElement&&this._rootElement instanceof SVGElement&&this._rootElement.setAttribute("transform",`translate(${y.x} ${y.y})`)}this._moveEvents.observers.length&&this._ngZone.run(()=>{this._moveEvents.next({source:this,pointerPosition:g,event:f,distance:this._getDragDistance(g),delta:this._pointerDirectionDelta})})},this._pointerUp=f=>{this._endDragSequence(f)},this.withRootElement(a).withParent(o.parentDragRef||null),this._parentPositions=new nte(c,h),d.registerDragItem(this)}get disabled(){return this._disabled||!(!this._dropContainer||!this._dropContainer.disabled)}set disabled(a){const o=Gc(a);o!==this._disabled&&(this._disabled=o,this._toggleNativeDragInteractions(),this._handles.forEach(c=>w0(c,o)))}getPlaceholderElement(){return this._placeholder}getRootElement(){return this._rootElement}getVisibleElement(){return this.isDragging()?this.getPlaceholderElement():this.getRootElement()}withHandles(a){this._handles=a.map(c=>Go(c)),this._handles.forEach(c=>w0(c,this.disabled)),this._toggleNativeDragInteractions();const o=new Set;return this._disabledHandles.forEach(c=>{this._handles.indexOf(c)>-1&&o.add(c)}),this._disabledHandles=o,this}withPreviewTemplate(a){return this._previewTemplate=a,this}withPlaceholderTemplate(a){return this._placeholderTemplate=a,this}withRootElement(a){const o=Go(a);return o!==this._rootElement&&(this._rootElement&&this._removeRootElementListeners(this._rootElement),this._ngZone.runOutsideAngular(()=>{o.addEventListener("mousedown",this._pointerDown,lte),o.addEventListener("touchstart",this._pointerDown,ate)}),this._initialTransform=void 0,this._rootElement=o),"undefined"!=typeof SVGElement&&this._rootElement instanceof SVGElement&&(this._ownerSVGElement=this._rootElement.ownerSVGElement),this}withBoundaryElement(a){return this._boundaryElement=a?Go(a):null,this._resizeSubscription.unsubscribe(),a&&(this._resizeSubscription=this._viewportRuler.change(10).subscribe(()=>this._containInsideBoundaryOnResize())),this}withParent(a){return this._parentDragRef=a,this}dispose(){this._removeRootElementListeners(this._rootElement),this.isDragging()&&aI(this._rootElement),aI(this._anchor),this._destroyPreview(),this._destroyPlaceholder(),this._dragDropRegistry.removeDragItem(this),this._removeSubscriptions(),this.beforeStarted.complete(),this.started.complete(),this.released.complete(),this.ended.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this._moveEvents.complete(),this._handles=[],this._disabledHandles.clear(),this._dropContainer=void 0,this._resizeSubscription.unsubscribe(),this._parentPositions.clear(),this._boundaryElement=this._rootElement=this._ownerSVGElement=this._placeholderTemplate=this._previewTemplate=this._anchor=this._parentDragRef=null}isDragging(){return this._hasStartedDragging&&this._dragDropRegistry.isDragging(this)}reset(){this._rootElement.style.transform=this._initialTransform||"",this._activeTransform={x:0,y:0},this._passiveTransform={x:0,y:0}}disableHandle(a){!this._disabledHandles.has(a)&&this._handles.indexOf(a)>-1&&(this._disabledHandles.add(a),w0(a,!0))}enableHandle(a){this._disabledHandles.has(a)&&(this._disabledHandles.delete(a),w0(a,this.disabled))}withDirection(a){return this._direction=a,this}_withDropContainer(a){this._dropContainer=a}getFreeDragPosition(){const a=this.isDragging()?this._activeTransform:this._passiveTransform;return{x:a.x,y:a.y}}setFreeDragPosition(a){return this._activeTransform={x:0,y:0},this._passiveTransform.x=a.x,this._passiveTransform.y=a.y,this._dropContainer||this._applyRootElementTransform(a.x,a.y),this}withPreviewContainer(a){return this._previewContainer=a,this}_sortFromLastPointerPosition(){const a=this._lastKnownPointerPosition;a&&this._dropContainer&&this._updateActiveDropContainer(this._getConstrainedPointerPosition(a),a)}_removeSubscriptions(){this._pointerMoveSubscription.unsubscribe(),this._pointerUpSubscription.unsubscribe(),this._scrollSubscription.unsubscribe()}_destroyPreview(){this._preview&&aI(this._preview),this._previewRef&&this._previewRef.destroy(),this._preview=this._previewRef=null}_destroyPlaceholder(){this._placeholder&&aI(this._placeholder),this._placeholderRef&&this._placeholderRef.destroy(),this._placeholder=this._placeholderRef=null}_endDragSequence(a){if(this._dragDropRegistry.isDragging(this)&&(this._removeSubscriptions(),this._dragDropRegistry.stopDragging(this),this._toggleNativeDragInteractions(),this._handles&&(this._rootElement.style.webkitTapHighlightColor=this._rootElementTapHighlight),this._hasStartedDragging))if(this.released.next({source:this}),this._dropContainer)this._dropContainer._stopScrolling(),this._animatePreviewToPlaceholder().then(()=>{this._cleanupDragArtifacts(a),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this)});else{this._passiveTransform.x=this._activeTransform.x;const o=this._getPointerPositionOnPage(a);this._passiveTransform.y=this._activeTransform.y,this._ngZone.run(()=>{this.ended.next({source:this,distance:this._getDragDistance(o),dropPoint:o})}),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this)}}_startDragSequence(a){fw(a)&&(this._lastTouchEventTime=Date.now()),this._toggleNativeDragInteractions();const o=this._dropContainer;if(o){const c=this._rootElement,u=c.parentNode,h=this._placeholder=this._createPlaceholderElement(),d=this._anchor=this._anchor||this._document.createComment(""),f=this._getShadowRoot();u.insertBefore(d,c),this._initialTransform=c.style.transform||"",this._preview=this._createPreviewElement(),Qee(c,!1,AV),this._document.body.appendChild(u.replaceChild(h,c)),this._getPreviewInsertionPoint(u,f).appendChild(this._preview),this.started.next({source:this}),o.start(),this._initialContainer=o,this._initialIndex=o.getItemIndex(this)}else this.started.next({source:this}),this._initialContainer=this._initialIndex=void 0;this._parentPositions.cache(o?o.getScrollableParents():[])}_initializeDragSequence(a,o){this._parentDragRef&&o.stopPropagation();const c=this.isDragging(),u=fw(o),h=!u&&0!==o.button,d=this._rootElement,f=$h(o),m=!u&&this._lastTouchEventTime&&this._lastTouchEventTime+800>Date.now(),g=u?function(l){const a=l.touches&&l.touches[0]||l.changedTouches&&l.changedTouches[0];return!(!a||-1!==a.identifier||null!=a.radiusX&&1!==a.radiusX||null!=a.radiusY&&1!==a.radiusY)}(o):function(l){return 0===l.offsetX&&0===l.offsetY}(o);if(f&&f.draggable&&"mousedown"===o.type&&o.preventDefault(),c||h||m||g)return;this._handles.length&&(this._rootElementTapHighlight=d.style.webkitTapHighlightColor||"",d.style.webkitTapHighlightColor="transparent"),this._hasStartedDragging=this._hasMoved=!1,this._removeSubscriptions(),this._pointerMoveSubscription=this._dragDropRegistry.pointerMove.subscribe(this._pointerMove),this._pointerUpSubscription=this._dragDropRegistry.pointerUp.subscribe(this._pointerUp),this._scrollSubscription=this._dragDropRegistry.scrolled(this._getShadowRoot()).subscribe(_=>this._updateOnScroll(_)),this._boundaryElement&&(this._boundaryRect=MV(this._boundaryElement));const y=this._previewTemplate;this._pickupPositionInElement=y&&y.template&&!y.matchSize?{x:0,y:0}:this._getPointerPositionInElement(a,o);const v=this._pickupPositionOnPage=this._lastKnownPointerPosition=this._getPointerPositionOnPage(o);this._pointerDirectionDelta={x:0,y:0},this._pointerPositionAtLastDirectionChange={x:v.x,y:v.y},this._dragStartTime=Date.now(),this._dragDropRegistry.startDragging(this,o)}_cleanupDragArtifacts(a){Qee(this._rootElement,!0,AV),this._anchor.parentNode.replaceChild(this._rootElement,this._anchor),this._destroyPreview(),this._destroyPlaceholder(),this._boundaryRect=this._previewRect=this._initialTransform=void 0,this._ngZone.run(()=>{const o=this._dropContainer,c=o.getItemIndex(this),u=this._getPointerPositionOnPage(a),h=this._getDragDistance(u),d=o._isOverContainer(u.x,u.y);this.ended.next({source:this,distance:h,dropPoint:u}),this.dropped.next({item:this,currentIndex:c,previousIndex:this._initialIndex,container:o,previousContainer:this._initialContainer,isPointerOverContainer:d,distance:h,dropPoint:u}),o.drop(this,c,this._initialIndex,this._initialContainer,d,h,u),this._dropContainer=this._initialContainer})}_updateActiveDropContainer({x:a,y:o},{x:c,y:u}){let h=this._initialContainer._getSiblingContainerFromPosition(this,a,o);!h&&this._dropContainer!==this._initialContainer&&this._initialContainer._isOverContainer(a,o)&&(h=this._initialContainer),h&&h!==this._dropContainer&&this._ngZone.run(()=>{this.exited.next({item:this,container:this._dropContainer}),this._dropContainer.exit(this),this._dropContainer=h,this._dropContainer.enter(this,a,o,h===this._initialContainer&&h.sortingDisabled?this._initialIndex:void 0),this.entered.next({item:this,container:h,currentIndex:h.getItemIndex(this)})}),this.isDragging()&&(this._dropContainer._startScrollingIfNecessary(c,u),this._dropContainer._sortItem(this,a,o,this._pointerDirectionDelta),this._applyPreviewTransform(a-this._pickupPositionInElement.x,o-this._pickupPositionInElement.y))}_createPreviewElement(){const a=this._previewTemplate,o=this.previewClass,c=a?a.template:null;let u;if(c&&a){const h=a.matchSize?this._rootElement.getBoundingClientRect():null,d=a.viewContainer.createEmbeddedView(c,a.context);d.detectChanges(),u=ute(d,this._document),this._previewRef=d,a.matchSize?hte(u,h):u.style.transform=oI(this._pickupPositionOnPage.x,this._pickupPositionOnPage.y)}else{const h=this._rootElement;u=rte(h),hte(u,h.getBoundingClientRect()),this._initialTransform&&(u.style.transform=this._initialTransform)}return xV(u.style,{"pointer-events":"none",margin:"0",position:"fixed",top:"0",left:"0","z-index":`${this._config.zIndex||1e3}`},AV),w0(u,!1),u.classList.add("cdk-drag-preview"),u.setAttribute("dir",this._direction),o&&(Array.isArray(o)?o.forEach(h=>u.classList.add(h)):u.classList.add(o)),u}_animatePreviewToPlaceholder(){if(!this._hasMoved)return Promise.resolve();const a=this._placeholder.getBoundingClientRect();this._preview.classList.add("cdk-drag-animating"),this._applyPreviewTransform(a.left,a.top);const o=function(l){const a=getComputedStyle(l),o=EV(a,"transition-property"),c=o.find(f=>"transform"===f||"all"===f);if(!c)return 0;const u=o.indexOf(c),h=EV(a,"transition-duration"),d=EV(a,"transition-delay");return ete(h[u])+ete(d[u])}(this._preview);return 0===o?Promise.resolve():this._ngZone.runOutsideAngular(()=>new Promise(c=>{const u=d=>{(!d||$h(d)===this._preview&&"transform"===d.propertyName)&&(this._preview.removeEventListener("transitionend",u),c(),clearTimeout(h))},h=setTimeout(u,1.5*o);this._preview.addEventListener("transitionend",u)}))}_createPlaceholderElement(){const a=this._placeholderTemplate,o=a?a.template:null;let c;return o?(this._placeholderRef=a.viewContainer.createEmbeddedView(o,a.context),this._placeholderRef.detectChanges(),c=ute(this._placeholderRef,this._document)):c=rte(this._rootElement),c.classList.add("cdk-drag-placeholder"),c}_getPointerPositionInElement(a,o){const c=this._rootElement.getBoundingClientRect(),u=a===this._rootElement?null:a,h=u?u.getBoundingClientRect():c,d=fw(o)?o.targetTouches[0]:o,f=this._getViewportScrollPosition();return{x:h.left-c.left+(d.pageX-h.left-f.left),y:h.top-c.top+(d.pageY-h.top-f.top)}}_getPointerPositionOnPage(a){const o=this._getViewportScrollPosition(),c=fw(a)?a.touches[0]||a.changedTouches[0]||{pageX:0,pageY:0}:a,u=c.pageX-o.left,h=c.pageY-o.top;if(this._ownerSVGElement){const d=this._ownerSVGElement.getScreenCTM();if(d){const f=this._ownerSVGElement.createSVGPoint();return f.x=u,f.y=h,f.matrixTransform(d.inverse())}}return{x:u,y:h}}_getConstrainedPointerPosition(a){const o=this._dropContainer?this._dropContainer.lockAxis:null;let{x:c,y:u}=this.constrainPosition?this.constrainPosition(a,this):a;if("x"===this.lockAxis||"x"===o?u=this._pickupPositionOnPage.y:("y"===this.lockAxis||"y"===o)&&(c=this._pickupPositionOnPage.x),this._boundaryRect){const{x:h,y:d}=this._pickupPositionInElement,f=this._boundaryRect,m=this._previewRect,g=f.top+d,y=f.bottom-(m.height-d);c=cte(c,f.left+h,f.right-(m.width-h)),u=cte(u,g,y)}return{x:c,y:u}}_updatePointerDirectionDelta(a){const{x:o,y:c}=a,u=this._pointerDirectionDelta,h=this._pointerPositionAtLastDirectionChange,d=Math.abs(o-h.x),f=Math.abs(c-h.y);return d>this._config.pointerDirectionChangeThreshold&&(u.x=o>h.x?1:-1,h.x=o),f>this._config.pointerDirectionChangeThreshold&&(u.y=c>h.y?1:-1,h.y=c),u}_toggleNativeDragInteractions(){if(!this._rootElement||!this._handles)return;const a=this._handles.length>0||!this.isDragging();a!==this._nativeInteractionsEnabled&&(this._nativeInteractionsEnabled=a,w0(this._rootElement,a))}_removeRootElementListeners(a){a.removeEventListener("mousedown",this._pointerDown,lte),a.removeEventListener("touchstart",this._pointerDown,ate)}_applyRootElementTransform(a,o){const c=oI(a,o);null==this._initialTransform&&(this._initialTransform=this._rootElement.style.transform&&"none"!=this._rootElement.style.transform?this._rootElement.style.transform:""),this._rootElement.style.transform=sI(c,this._initialTransform)}_applyPreviewTransform(a,o){var c;const u=(null===(c=this._previewTemplate)||void 0===c?void 0:c.template)?void 0:this._initialTransform,h=oI(a,o);this._preview.style.transform=sI(h,u)}_getDragDistance(a){const o=this._pickupPositionOnPage;return o?{x:a.x-o.x,y:a.y-o.y}:{x:0,y:0}}_cleanupCachedDimensions(){this._boundaryRect=this._previewRect=void 0,this._parentPositions.clear()}_containInsideBoundaryOnResize(){let{x:a,y:o}=this._passiveTransform;if(0===a&&0===o||this.isDragging()||!this._boundaryElement)return;const c=this._boundaryElement.getBoundingClientRect(),u=this._rootElement.getBoundingClientRect();if(0===c.width&&0===c.height||0===u.width&&0===u.height)return;const h=c.left-u.left,d=u.right-c.right,f=c.top-u.top,m=u.bottom-c.bottom;c.width>u.width?(h>0&&(a+=h),d>0&&(a-=d)):a=0,c.height>u.height?(f>0&&(o+=f),m>0&&(o-=m)):o=0,(a!==this._passiveTransform.x||o!==this._passiveTransform.y)&&this.setFreeDragPosition({y:o,x:a})}_getDragStartDelay(a){const o=this.dragStartDelay;return"number"==typeof o?o:fw(a)?o.touch:o?o.mouse:0}_updateOnScroll(a){const o=this._parentPositions.handleScroll(a);if(o){const c=$h(a);this._boundaryRect&&(c===this._document||c!==this._boundaryElement&&c.contains(this._boundaryElement))&&dw(this._boundaryRect,o.top,o.left),this._pickupPositionOnPage.x+=o.left,this._pickupPositionOnPage.y+=o.top,this._dropContainer||(this._activeTransform.x-=o.left,this._activeTransform.y-=o.top,this._applyRootElementTransform(this._activeTransform.x,this._activeTransform.y))}}_getViewportScrollPosition(){const a=this._parentPositions.positions.get(this._document);return a?a.scrollPosition:this._viewportRuler.getViewportScrollPosition()}_getShadowRoot(){return void 0===this._cachedShadowRoot&&(this._cachedShadowRoot=_V(this._rootElement)),this._cachedShadowRoot}_getPreviewInsertionPoint(a,o){const c=this._previewContainer||"global";if("parent"===c)return a;if("global"===c){const u=this._document;return o||u.fullscreenElement||u.webkitFullscreenElement||u.mozFullScreenElement||u.msFullscreenElement||u.body}return Go(c)}}function oI(l,a){return`translate3d(${Math.round(l)}px, ${Math.round(a)}px, 0)`}function cte(l,a,o){return Math.max(a,Math.min(o,l))}function aI(l){l&&l.parentNode&&l.parentNode.removeChild(l)}function fw(l){return"t"===l.type[0]}function ute(l,a){const o=l.rootNodes;if(1===o.length&&o[0].nodeType===a.ELEMENT_NODE)return o[0];const c=a.createElement("div");return o.forEach(u=>c.appendChild(u)),c}function hte(l,a){l.style.width=`${a.width}px`,l.style.height=`${a.height}px`,l.style.transform=oI(a.left,a.top)}function dte(l,a,o){const c=pw(a,l.length-1),u=pw(o,l.length-1);if(c===u)return;const h=l[c],d=u<c?-1:1;for(let f=c;f!==u;f+=d)l[f]=l[f+d];l[u]=h}function pw(l,a){return Math.max(0,Math.min(a,l))}class p9e{constructor(a,o,c,u,h){this._dragDropRegistry=o,this._ngZone=u,this._viewportRuler=h,this.disabled=!1,this.sortingDisabled=!1,this.autoScrollDisabled=!1,this.autoScrollStep=2,this.enterPredicate=()=>!0,this.sortPredicate=()=>!0,this.beforeStarted=new tt,this.entered=new tt,this.exited=new tt,this.dropped=new tt,this.sorted=new tt,this._isDragging=!1,this._itemPositions=[],this._previousSwap={drag:null,delta:0,overlaps:!1},this._draggables=[],this._siblings=[],this._orientation="vertical",this._activeSiblings=new Set,this._direction="ltr",this._viewportScrollSubscription=L.EMPTY,this._verticalScrollDirection=0,this._horizontalScrollDirection=0,this._stopScrollTimers=new tt,this._cachedShadowRoot=null,this._startScrollInterval=()=>{this._stopScrolling(),function(l=0,a=z_){return(!iV(l)||l<0)&&(l=0),(!a||"function"!=typeof a.schedule)&&(a=z_),new yt(o=>(o.add(a.schedule(c9e,l,{subscriber:o,counter:0,period:l})),o))}(0,Eee).pipe(Lp(this._stopScrollTimers)).subscribe(()=>{const d=this._scrollNode,f=this.autoScrollStep;1===this._verticalScrollDirection?mte(d,-f):2===this._verticalScrollDirection&&mte(d,f),1===this._horizontalScrollDirection?gte(d,-f):2===this._horizontalScrollDirection&&gte(d,f)})},this.element=Go(a),this._document=c,this.withScrollableParents([this.element]),o.registerDropContainer(this),this._parentPositions=new nte(c,h)}dispose(){this._stopScrolling(),this._stopScrollTimers.complete(),this._viewportScrollSubscription.unsubscribe(),this.beforeStarted.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this.sorted.complete(),this._activeSiblings.clear(),this._scrollNode=null,this._parentPositions.clear(),this._dragDropRegistry.removeDropContainer(this)}isDragging(){return this._isDragging}start(){this._draggingStarted(),this._notifyReceivingSiblings()}enter(a,o,c,u){let h;this._draggingStarted(),null==u?(h=this.sortingDisabled?this._draggables.indexOf(a):-1,-1===h&&(h=this._getItemIndexFromPointerPosition(a,o,c))):h=u;const d=this._activeDraggables,f=d.indexOf(a),m=a.getPlaceholderElement();let g=d[h];if(g===a&&(g=d[h+1]),f>-1&&d.splice(f,1),g&&!this._dragDropRegistry.isDragging(g)){const y=g.getRootElement();y.parentElement.insertBefore(m,y),d.splice(h,0,a)}else if(this._shouldEnterAsFirstChild(o,c)){const y=d[0].getRootElement();y.parentNode.insertBefore(m,y),d.unshift(a)}else Go(this.element).appendChild(m),d.push(a);m.style.transform="",this._cacheItemPositions(),this._cacheParentPositions(),this._notifyReceivingSiblings(),this.entered.next({item:a,container:this,currentIndex:this.getItemIndex(a)})}exit(a){this._reset(),this.exited.next({item:a,container:this})}drop(a,o,c,u,h,d,f){this._reset(),this.dropped.next({item:a,currentIndex:o,previousIndex:c,container:this,previousContainer:u,isPointerOverContainer:h,distance:d,dropPoint:f})}withItems(a){const o=this._draggables;return this._draggables=a,a.forEach(c=>c._withDropContainer(this)),this.isDragging()&&(o.filter(u=>u.isDragging()).every(u=>-1===a.indexOf(u))?this._reset():this._cacheItems()),this}withDirection(a){return this._direction=a,this}connectedTo(a){return this._siblings=a.slice(),this}withOrientation(a){return this._orientation=a,this}withScrollableParents(a){const o=Go(this.element);return this._scrollableElements=-1===a.indexOf(o)?[o,...a]:a.slice(),this}getScrollableParents(){return this._scrollableElements}getItemIndex(a){return this._isDragging?IV("horizontal"===this._orientation&&"rtl"===this._direction?this._itemPositions.slice().reverse():this._itemPositions,c=>c.drag===a):this._draggables.indexOf(a)}isReceiving(){return this._activeSiblings.size>0}_sortItem(a,o,c,u){if(this.sortingDisabled||!this._clientRect||!tte(this._clientRect,.05,o,c))return;const h=this._itemPositions,d=this._getItemIndexFromPointerPosition(a,o,c,u);if(-1===d&&h.length>0)return;const f="horizontal"===this._orientation,m=IV(h,E=>E.drag===a),g=h[d],v=g.clientRect,_=m>d?1:-1,b=this._getItemOffsetPx(h[m].clientRect,v,_),w=this._getSiblingOffsetPx(m,h,_),C=h.slice();dte(h,m,d),this.sorted.next({previousIndex:m,currentIndex:d,container:this,item:a}),h.forEach((E,M)=>{if(C[M]===E)return;const x=E.drag===a,R=x?b:w,P=x?a.getPlaceholderElement():E.drag.getRootElement();E.offset+=R,f?(P.style.transform=sI(`translate3d(${Math.round(E.offset)}px, 0, 0)`,E.initialTransform),dw(E.clientRect,0,R)):(P.style.transform=sI(`translate3d(0, ${Math.round(E.offset)}px, 0)`,E.initialTransform),dw(E.clientRect,R,0))}),this._previousSwap.overlaps=DV(v,o,c),this._previousSwap.drag=g.drag,this._previousSwap.delta=f?u.x:u.y}_startScrollingIfNecessary(a,o){if(this.autoScrollDisabled)return;let c,u=0,h=0;if(this._parentPositions.positions.forEach((d,f)=>{f===this._document||!d.clientRect||c||tte(d.clientRect,.05,a,o)&&([u,h]=function(l,a,o,c){const u=yte(a,c),h=vte(a,o);let d=0,f=0;if(u){const m=l.scrollTop;1===u?m>0&&(d=1):l.scrollHeight-m>l.clientHeight&&(d=2)}if(h){const m=l.scrollLeft;1===h?m>0&&(f=1):l.scrollWidth-m>l.clientWidth&&(f=2)}return[d,f]}(f,d.clientRect,a,o),(u||h)&&(c=f))}),!u&&!h){const{width:d,height:f}=this._viewportRuler.getViewportSize(),m={width:d,height:f,top:0,right:d,bottom:f,left:0};u=yte(m,o),h=vte(m,a),c=window}c&&(u!==this._verticalScrollDirection||h!==this._horizontalScrollDirection||c!==this._scrollNode)&&(this._verticalScrollDirection=u,this._horizontalScrollDirection=h,this._scrollNode=c,(u||h)&&c?this._ngZone.runOutsideAngular(this._startScrollInterval):this._stopScrolling())}_stopScrolling(){this._stopScrollTimers.next()}_draggingStarted(){const a=Go(this.element).style;this.beforeStarted.next(),this._isDragging=!0,this._initialScrollSnap=a.msScrollSnapType||a.scrollSnapType||"",a.scrollSnapType=a.msScrollSnapType="none",this._cacheItems(),this._viewportScrollSubscription.unsubscribe(),this._listenToScrollEvents()}_cacheParentPositions(){const a=Go(this.element);this._parentPositions.cache(this._scrollableElements),this._clientRect=this._parentPositions.positions.get(a).clientRect}_cacheItemPositions(){const a="horizontal"===this._orientation;this._itemPositions=this._activeDraggables.map(o=>{const c=o.getVisibleElement();return{drag:o,offset:0,initialTransform:c.style.transform||"",clientRect:MV(c)}}).sort((o,c)=>a?o.clientRect.left-c.clientRect.left:o.clientRect.top-c.clientRect.top)}_reset(){this._isDragging=!1;const a=Go(this.element).style;a.scrollSnapType=a.msScrollSnapType=this._initialScrollSnap,this._activeDraggables.forEach(o=>{var c;const u=o.getRootElement();if(u){const h=null===(c=this._itemPositions.find(d=>d.drag===o))||void 0===c?void 0:c.initialTransform;u.style.transform=h||""}}),this._siblings.forEach(o=>o._stopReceiving(this)),this._activeDraggables=[],this._itemPositions=[],this._previousSwap.drag=null,this._previousSwap.delta=0,this._previousSwap.overlaps=!1,this._stopScrolling(),this._viewportScrollSubscription.unsubscribe(),this._parentPositions.clear()}_getSiblingOffsetPx(a,o,c){const u="horizontal"===this._orientation,h=o[a].clientRect,d=o[a+-1*c];let f=h[u?"width":"height"]*c;if(d){const m=u?"left":"top",g=u?"right":"bottom";-1===c?f-=d.clientRect[m]-h[g]:f+=h[m]-d.clientRect[g]}return f}_getItemOffsetPx(a,o,c){const u="horizontal"===this._orientation;let h=u?o.left-a.left:o.top-a.top;return-1===c&&(h+=u?o.width-a.width:o.height-a.height),h}_shouldEnterAsFirstChild(a,o){if(!this._activeDraggables.length)return!1;const c=this._itemPositions,u="horizontal"===this._orientation;if(c[0].drag!==this._activeDraggables[0]){const d=c[c.length-1].clientRect;return u?a>=d.right:o>=d.bottom}{const d=c[0].clientRect;return u?a<=d.left:o<=d.top}}_getItemIndexFromPointerPosition(a,o,c,u){const h="horizontal"===this._orientation,d=IV(this._itemPositions,({drag:f,clientRect:m},g,y)=>{if(f===a)return y.length<2;if(u){const v=h?u.x:u.y;if(f===this._previousSwap.drag&&this._previousSwap.overlaps&&v===this._previousSwap.delta)return!1}return h?o>=Math.floor(m.left)&&o<Math.floor(m.right):c>=Math.floor(m.top)&&c<Math.floor(m.bottom)});return-1!==d&&this.sortPredicate(d,a,this)?d:-1}_cacheItems(){this._activeDraggables=this._draggables.slice(),this._cacheItemPositions(),this._cacheParentPositions()}_isOverContainer(a,o){return null!=this._clientRect&&DV(this._clientRect,a,o)}_getSiblingContainerFromPosition(a,o,c){return this._siblings.find(u=>u._canReceive(a,o,c))}_canReceive(a,o,c){if(!this._clientRect||!DV(this._clientRect,o,c)||!this.enterPredicate(a,this))return!1;const u=this._getShadowRoot().elementFromPoint(o,c);if(!u)return!1;const h=Go(this.element);return u===h||h.contains(u)}_startReceiving(a,o){const c=this._activeSiblings;!c.has(a)&&o.every(u=>this.enterPredicate(u,this)||this._draggables.indexOf(u)>-1)&&(c.add(a),this._cacheParentPositions(),this._listenToScrollEvents())}_stopReceiving(a){this._activeSiblings.delete(a),this._viewportScrollSubscription.unsubscribe()}_listenToScrollEvents(){this._viewportScrollSubscription=this._dragDropRegistry.scrolled(this._getShadowRoot()).subscribe(a=>{if(this.isDragging()){const o=this._parentPositions.handleScroll(a);o&&(this._itemPositions.forEach(({clientRect:c})=>{dw(c,o.top,o.left)}),this._itemPositions.forEach(({drag:c})=>{this._dragDropRegistry.isDragging(c)&&c._sortFromLastPointerPosition()}))}else this.isReceiving()&&this._cacheParentPositions()})}_getShadowRoot(){if(!this._cachedShadowRoot){const a=_V(Go(this.element));this._cachedShadowRoot=a||this._document}return this._cachedShadowRoot}_notifyReceivingSiblings(){const a=this._activeDraggables.filter(o=>o.isDragging());this._siblings.forEach(o=>o._startReceiving(this,a))}}function IV(l,a){for(let o=0;o<l.length;o++)if(a(l[o],o,l))return o;return-1}function mte(l,a){l===window?l.scrollBy(0,a):l.scrollTop+=a}function gte(l,a){l===window?l.scrollBy(a,0):l.scrollLeft+=a}function yte(l,a){const{top:o,bottom:c,height:u}=l,h=.05*u;return a>=o-h&&a<=o+h?1:a>=c-h&&a<=c+h?2:0}function vte(l,a){const{left:o,right:c,width:u}=l,h=.05*u;return a>=o-h&&a<=o+h?1:a>=c-h&&a<=c+h?2:0}const lI=cw({passive:!1,capture:!0});let _te=(()=>{class l{constructor(o,c){this._ngZone=o,this._dropInstances=new Set,this._dragInstances=new Set,this._activeDragInstances=[],this._globalListeners=new Map,this._draggingPredicate=u=>u.isDragging(),this.pointerMove=new tt,this.pointerUp=new tt,this.scroll=new tt,this._preventDefaultWhileDragging=u=>{this._activeDragInstances.length>0&&u.preventDefault()},this._persistentTouchmoveListener=u=>{this._activeDragInstances.length>0&&(this._activeDragInstances.some(this._draggingPredicate)&&u.preventDefault(),this.pointerMove.next(u))},this._document=c}registerDropContainer(o){this._dropInstances.has(o)||this._dropInstances.add(o)}registerDragItem(o){this._dragInstances.add(o),1===this._dragInstances.size&&this._ngZone.runOutsideAngular(()=>{this._document.addEventListener("touchmove",this._persistentTouchmoveListener,lI)})}removeDropContainer(o){this._dropInstances.delete(o)}removeDragItem(o){this._dragInstances.delete(o),this.stopDragging(o),0===this._dragInstances.size&&this._document.removeEventListener("touchmove",this._persistentTouchmoveListener,lI)}startDragging(o,c){if(!(this._activeDragInstances.indexOf(o)>-1)&&(this._activeDragInstances.push(o),1===this._activeDragInstances.length)){const u=c.type.startsWith("touch");this._globalListeners.set(u?"touchend":"mouseup",{handler:h=>this.pointerUp.next(h),options:!0}).set("scroll",{handler:h=>this.scroll.next(h),options:!0}).set("selectstart",{handler:this._preventDefaultWhileDragging,options:lI}),u||this._globalListeners.set("mousemove",{handler:h=>this.pointerMove.next(h),options:lI}),this._ngZone.runOutsideAngular(()=>{this._globalListeners.forEach((h,d)=>{this._document.addEventListener(d,h.handler,h.options)})})}}stopDragging(o){const c=this._activeDragInstances.indexOf(o);c>-1&&(this._activeDragInstances.splice(c,1),0===this._activeDragInstances.length&&this._clearGlobalListeners())}isDragging(o){return this._activeDragInstances.indexOf(o)>-1}scrolled(o){const c=[this.scroll];return o&&o!==this._document&&c.push(new yt(u=>this._ngZone.runOutsideAngular(()=>{const d=f=>{this._activeDragInstances.length&&u.next(f)};return o.addEventListener("scroll",d,!0),()=>{o.removeEventListener("scroll",d,!0)}}))),lm(...c)}ngOnDestroy(){this._dragInstances.forEach(o=>this.removeDragItem(o)),this._dropInstances.forEach(o=>this.removeDropContainer(o)),this._clearGlobalListeners(),this.pointerMove.complete(),this.pointerUp.complete()}_clearGlobalListeners(){this._globalListeners.forEach((o,c)=>{this._document.removeEventListener(c,o.handler,o.options)}),this._globalListeners.clear()}}return l.\u0275fac=function(o){return new(o||l)(be(Fn),be(Xn))},l.\u0275prov=Xe({factory:function(){return new l(be(Fn),be(Xn))},token:l,providedIn:"root"}),l})();const g9e={dragStartThreshold:5,pointerDirectionChangeThreshold:5};let RV=(()=>{class l{constructor(o,c,u,h){this._document=o,this._ngZone=c,this._viewportRuler=u,this._dragDropRegistry=h}createDrag(o,c=g9e){return new f9e(o,c,this._document,this._ngZone,this._viewportRuler,this._dragDropRegistry)}createDropList(o){return new p9e(o,this._dragDropRegistry,this._document,this._ngZone,this._viewportRuler)}}return l.\u0275fac=function(o){return new(o||l)(be(Xn),be(Fn),be(SV),be(_te))},l.\u0275prov=Xe({factory:function(){return new l(be(Xn),be(Fn),be(SV),be(_te))},token:l,providedIn:"root"}),l})();const PV=new Sn("CDK_DRAG_PARENT"),LV=new Sn("CdkDropListGroup"),bte=new Sn("CDK_DRAG_CONFIG");let y9e=0;const Ste=new Sn("CdkDropList");let Tte=(()=>{class l{constructor(o,c,u,h,d,f,m){this.element=o,this._changeDetectorRef=u,this._scrollDispatcher=h,this._dir=d,this._group=f,this._destroyed=new tt,this.connectedTo=[],this.id="cdk-drop-list-"+y9e++,this.enterPredicate=()=>!0,this.sortPredicate=()=>!0,this.dropped=new pt,this.entered=new pt,this.exited=new pt,this.sorted=new pt,this._unsortedItems=new Set,this._dropListRef=c.createDropList(o),this._dropListRef.data=this,m&&this._assignDefaults(m),this._dropListRef.enterPredicate=(g,y)=>this.enterPredicate(g.data,y.data),this._dropListRef.sortPredicate=(g,y,v)=>this.sortPredicate(g,y.data,v.data),this._setupInputSyncSubscription(this._dropListRef),this._handleEvents(this._dropListRef),l._dropLists.push(this),f&&f._items.add(this)}get disabled(){return this._disabled||!!this._group&&this._group.disabled}set disabled(o){this._dropListRef.disabled=this._disabled=Gc(o)}addItem(o){this._unsortedItems.add(o),this._dropListRef.isDragging()&&this._syncItemsWithRef()}removeItem(o){this._unsortedItems.delete(o),this._dropListRef.isDragging()&&this._syncItemsWithRef()}getSortedItems(){return Array.from(this._unsortedItems).sort((o,c)=>o._dragRef.getVisibleElement().compareDocumentPosition(c._dragRef.getVisibleElement())&Node.DOCUMENT_POSITION_FOLLOWING?-1:1)}ngOnDestroy(){const o=l._dropLists.indexOf(this);o>-1&&l._dropLists.splice(o,1),this._group&&this._group._items.delete(this),this._unsortedItems.clear(),this._dropListRef.dispose(),this._destroyed.next(),this._destroyed.complete()}_setupInputSyncSubscription(o){this._dir&&this._dir.change.pipe(Md(this._dir.value),Lp(this._destroyed)).subscribe(c=>o.withDirection(c)),o.beforeStarted.subscribe(()=>{const c=function(l){return Array.isArray(l)?l:[l]}(this.connectedTo).map(u=>"string"==typeof u?l._dropLists.find(d=>d.id===u):u);if(this._group&&this._group._items.forEach(u=>{-1===c.indexOf(u)&&c.push(u)}),!this._scrollableParentsResolved){const u=this._scrollDispatcher.getAncestorScrollContainers(this.element).map(h=>h.getElementRef().nativeElement);this._dropListRef.withScrollableParents(u),this._scrollableParentsResolved=!0}o.disabled=this.disabled,o.lockAxis=this.lockAxis,o.sortingDisabled=Gc(this.sortingDisabled),o.autoScrollDisabled=Gc(this.autoScrollDisabled),o.autoScrollStep=Fg(this.autoScrollStep,2),o.connectedTo(c.filter(u=>u&&u!==this).map(u=>u._dropListRef)).withOrientation(this.orientation)})}_handleEvents(o){o.beforeStarted.subscribe(()=>{this._syncItemsWithRef(),this._changeDetectorRef.markForCheck()}),o.entered.subscribe(c=>{this.entered.emit({container:this,item:c.item.data,currentIndex:c.currentIndex})}),o.exited.subscribe(c=>{this.exited.emit({container:this,item:c.item.data}),this._changeDetectorRef.markForCheck()}),o.sorted.subscribe(c=>{this.sorted.emit({previousIndex:c.previousIndex,currentIndex:c.currentIndex,container:this,item:c.item.data})}),o.dropped.subscribe(c=>{this.dropped.emit({previousIndex:c.previousIndex,currentIndex:c.currentIndex,previousContainer:c.previousContainer.data,container:c.container.data,item:c.item.data,isPointerOverContainer:c.isPointerOverContainer,distance:c.distance,dropPoint:c.dropPoint}),this._changeDetectorRef.markForCheck()})}_assignDefaults(o){const{lockAxis:c,draggingDisabled:u,sortingDisabled:h,listAutoScrollDisabled:d,listOrientation:f}=o;this.disabled=null!=u&&u,this.sortingDisabled=null!=h&&h,this.autoScrollDisabled=null!=d&&d,this.orientation=f||"vertical",c&&(this.lockAxis=c)}_syncItemsWithRef(){this._dropListRef.withItems(this.getSortedItems().map(o=>o._dragRef))}}return l.\u0275fac=function(o){return new(o||l)(O(kt),O(RV),O(go),O(bV),O(hw,8),O(LV,12),O(bte,8))},l.\u0275dir=Ze({type:l,selectors:[["","cdkDropList",""],["cdk-drop-list"]],hostAttrs:[1,"cdk-drop-list"],hostVars:7,hostBindings:function(o,c){2&o&&(Ke("id",c.id),lt("cdk-drop-list-disabled",c.disabled)("cdk-drop-list-dragging",c._dropListRef.isDragging())("cdk-drop-list-receiving",c._dropListRef.isReceiving()))},inputs:{connectedTo:["cdkDropListConnectedTo","connectedTo"],id:"id",enterPredicate:["cdkDropListEnterPredicate","enterPredicate"],sortPredicate:["cdkDropListSortPredicate","sortPredicate"],disabled:["cdkDropListDisabled","disabled"],sortingDisabled:["cdkDropListSortingDisabled","sortingDisabled"],autoScrollDisabled:["cdkDropListAutoScrollDisabled","autoScrollDisabled"],orientation:["cdkDropListOrientation","orientation"],lockAxis:["cdkDropListLockAxis","lockAxis"],data:["cdkDropListData","data"],autoScrollStep:["cdkDropListAutoScrollStep","autoScrollStep"]},outputs:{dropped:"cdkDropListDropped",entered:"cdkDropListEntered",exited:"cdkDropListExited",sorted:"cdkDropListSorted"},exportAs:["cdkDropList"],features:[Mt([{provide:LV,useValue:void 0},{provide:Ste,useExisting:l}])]}),l._dropLists=[],l})();const OV=new Sn("CdkDragHandle");let wte=(()=>{class l{constructor(o,c){this.element=o,this._stateChanges=new tt,this._disabled=!1,this._parentDrag=c}get disabled(){return this._disabled}set disabled(o){this._disabled=Gc(o),this._stateChanges.next(this)}ngOnDestroy(){this._stateChanges.complete()}}return l.\u0275fac=function(o){return new(o||l)(O(kt),O(PV,12))},l.\u0275dir=Ze({type:l,selectors:[["","cdkDragHandle",""]],hostAttrs:[1,"cdk-drag-handle"],inputs:{disabled:["cdkDragHandleDisabled","disabled"]},features:[Mt([{provide:OV,useExisting:l}])]}),l})();const Cte=new Sn("CdkDragPlaceholder"),xte=new Sn("CdkDragPreview");let Ete=(()=>{class l{constructor(o,c,u,h,d,f,m,g,y,v,_){this.element=o,this.dropContainer=c,this._ngZone=h,this._viewContainerRef=d,this._dir=m,this._changeDetectorRef=y,this._selfHandle=v,this._parentDrag=_,this._destroyed=new tt,this.started=new pt,this.released=new pt,this.ended=new pt,this.entered=new pt,this.exited=new pt,this.dropped=new pt,this.moved=new yt(b=>{const w=this._dragRef.moved.pipe(pe(C=>({source:this,pointerPosition:C.pointerPosition,event:C.event,delta:C.delta,distance:C.distance}))).subscribe(b);return()=>{w.unsubscribe()}}),this._dragRef=g.createDrag(o,{dragStartThreshold:f&&null!=f.dragStartThreshold?f.dragStartThreshold:5,pointerDirectionChangeThreshold:f&&null!=f.pointerDirectionChangeThreshold?f.pointerDirectionChangeThreshold:5,zIndex:null==f?void 0:f.zIndex}),this._dragRef.data=this,l._dragInstances.push(this),f&&this._assignDefaults(f),c&&(this._dragRef._withDropContainer(c._dropListRef),c.addItem(this)),this._syncInputs(this._dragRef),this._handleEvents(this._dragRef)}get disabled(){return this._disabled||this.dropContainer&&this.dropContainer.disabled}set disabled(o){this._disabled=Gc(o),this._dragRef.disabled=this._disabled}getPlaceholderElement(){return this._dragRef.getPlaceholderElement()}getRootElement(){return this._dragRef.getRootElement()}reset(){this._dragRef.reset()}getFreeDragPosition(){return this._dragRef.getFreeDragPosition()}ngAfterViewInit(){this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.pipe(Hf(1),Lp(this._destroyed)).subscribe(()=>{this._updateRootElement(),this._setupHandlesListener(),this.freeDragPosition&&this._dragRef.setFreeDragPosition(this.freeDragPosition)})})}ngOnChanges(o){const c=o.rootElementSelector,u=o.freeDragPosition;c&&!c.firstChange&&this._updateRootElement(),u&&!u.firstChange&&this.freeDragPosition&&this._dragRef.setFreeDragPosition(this.freeDragPosition)}ngOnDestroy(){this.dropContainer&&this.dropContainer.removeItem(this);const o=l._dragInstances.indexOf(this);o>-1&&l._dragInstances.splice(o,1),this._ngZone.runOutsideAngular(()=>{this._destroyed.next(),this._destroyed.complete(),this._dragRef.dispose()})}_updateRootElement(){const o=this.element.nativeElement,c=this.rootElementSelector?Mte(o,this.rootElementSelector):o;this._dragRef.withRootElement(c||o)}_getBoundaryElement(){const o=this.boundaryElement;return o?"string"==typeof o?Mte(this.element.nativeElement,o):Go(o):null}_syncInputs(o){o.beforeStarted.subscribe(()=>{if(!o.isDragging()){const c=this._dir,u=this.dragStartDelay,h=this._placeholderTemplate?{template:this._placeholderTemplate.templateRef,context:this._placeholderTemplate.data,viewContainer:this._viewContainerRef}:null,d=this._previewTemplate?{template:this._previewTemplate.templateRef,context:this._previewTemplate.data,matchSize:this._previewTemplate.matchSize,viewContainer:this._viewContainerRef}:null;o.disabled=this.disabled,o.lockAxis=this.lockAxis,o.dragStartDelay="object"==typeof u&&u?u:Fg(u),o.constrainPosition=this.constrainPosition,o.previewClass=this.previewClass,o.withBoundaryElement(this._getBoundaryElement()).withPlaceholderTemplate(h).withPreviewTemplate(d).withPreviewContainer(this.previewContainer||"global"),c&&o.withDirection(c.value)}}),o.beforeStarted.pipe(Hf(1)).subscribe(()=>{var c,u;if(this._parentDrag)return void o.withParent(this._parentDrag._dragRef);let h=this.element.nativeElement.parentElement;for(;h;){if(null===(c=h.classList)||void 0===c?void 0:c.contains("cdk-drag")){o.withParent((null===(u=l._dragInstances.find(d=>d.element.nativeElement===h))||void 0===u?void 0:u._dragRef)||null);break}h=h.parentElement}})}_handleEvents(o){o.started.subscribe(()=>{this.started.emit({source:this}),this._changeDetectorRef.markForCheck()}),o.released.subscribe(()=>{this.released.emit({source:this})}),o.ended.subscribe(c=>{this.ended.emit({source:this,distance:c.distance,dropPoint:c.dropPoint}),this._changeDetectorRef.markForCheck()}),o.entered.subscribe(c=>{this.entered.emit({container:c.container.data,item:this,currentIndex:c.currentIndex})}),o.exited.subscribe(c=>{this.exited.emit({container:c.container.data,item:this})}),o.dropped.subscribe(c=>{this.dropped.emit({previousIndex:c.previousIndex,currentIndex:c.currentIndex,previousContainer:c.previousContainer.data,container:c.container.data,isPointerOverContainer:c.isPointerOverContainer,item:this,distance:c.distance,dropPoint:c.dropPoint})})}_assignDefaults(o){const{lockAxis:c,dragStartDelay:u,constrainPosition:h,previewClass:d,boundaryElement:f,draggingDisabled:m,rootElementSelector:g,previewContainer:y}=o;this.disabled=null!=m&&m,this.dragStartDelay=u||0,c&&(this.lockAxis=c),h&&(this.constrainPosition=h),d&&(this.previewClass=d),f&&(this.boundaryElement=f),g&&(this.rootElementSelector=g),y&&(this.previewContainer=y)}_setupHandlesListener(){this._handles.changes.pipe(Md(this._handles),Vs(o=>{const c=o.filter(u=>u._parentDrag===this).map(u=>u.element);this._selfHandle&&this.rootElementSelector&&c.push(this.element),this._dragRef.withHandles(c)}),Dc(o=>lm(...o.map(c=>c._stateChanges.pipe(Md(c))))),Lp(this._destroyed)).subscribe(o=>{const c=this._dragRef,u=o.element.nativeElement;o.disabled?c.disableHandle(u):c.enableHandle(u)})}}return l.\u0275fac=function(o){return new(o||l)(O(kt),O(Ste,12),O(Xn),O(Fn),O(qn),O(bte,8),O(hw,8),O(RV),O(go),O(OV,10),O(PV,12))},l.\u0275dir=Ze({type:l,selectors:[["","cdkDrag",""]],contentQueries:function(o,c,u){if(1&o&&(Nn(u,xte,5),Nn(u,Cte,5),Nn(u,OV,5)),2&o){let h;It(h=Rt())&&(c._previewTemplate=h.first),It(h=Rt())&&(c._placeholderTemplate=h.first),It(h=Rt())&&(c._handles=h)}},hostAttrs:[1,"cdk-drag"],hostVars:4,hostBindings:function(o,c){2&o&&lt("cdk-drag-disabled",c.disabled)("cdk-drag-dragging",c._dragRef.isDragging())},inputs:{disabled:["cdkDragDisabled","disabled"],dragStartDelay:["cdkDragStartDelay","dragStartDelay"],lockAxis:["cdkDragLockAxis","lockAxis"],constrainPosition:["cdkDragConstrainPosition","constrainPosition"],previewClass:["cdkDragPreviewClass","previewClass"],boundaryElement:["cdkDragBoundary","boundaryElement"],rootElementSelector:["cdkDragRootElement","rootElementSelector"],previewContainer:["cdkDragPreviewContainer","previewContainer"],data:["cdkDragData","data"],freeDragPosition:["cdkDragFreeDragPosition","freeDragPosition"]},outputs:{started:"cdkDragStarted",released:"cdkDragReleased",ended:"cdkDragEnded",entered:"cdkDragEntered",exited:"cdkDragExited",dropped:"cdkDragDropped",moved:"cdkDragMoved"},exportAs:["cdkDrag"],features:[Mt([{provide:PV,useExisting:l}]),Ci]}),l._dragInstances=[],l})();function Mte(l,a){let o=l.parentElement;for(;o;){if(o.matches?o.matches(a):o.msMatchesSelector(a))return o;o=o.parentElement}return null}let b9e=(()=>{class l{}return l.\u0275fac=function(o){return new(o||l)},l.\u0275mod=Yt({type:l}),l.\u0275inj=jt({providers:[RV],imports:[TV]}),l})();function S9e(l,a){}let Dte=(()=>{class l{constructor(o){this.viewContainerRef=o}}return l.\u0275fac=function(o){return new(o||l)(O(qn))},l.\u0275dir=Ze({type:l,selectors:[["","ukisAddHost",""]]}),l})(),Ate=(()=>{class l{constructor(o){this.componentFactoryResolver=o,this.dynamicComponentChange=new pt}loadComponent(){if(this.dynamicComponent){this.subs=[];const o=this.componentFactoryResolver.resolveComponentFactory(this.dynamicComponent.component),c=this.ukisAddHost.viewContainerRef;c.clear(),this.componentRef=c.createComponent(o),this.setInputOutputs()}}setInputOutputs(){this.componentRef&&this.dynamicComponent.inputs&&Object.keys(this.dynamicComponent.inputs).map(c=>{const u=c;if(this.dynamicComponent.inputs){this.componentRef.instance[u]=this.dynamicComponent.inputs[u];const h=`${u}Change`;if(this.componentRef.instance[h]&&this.componentRef.instance[h]instanceof pt){const d=this.componentRef.instance[h].subscribe(f=>{this.dynamicComponent.inputs&&(this.dynamicComponent.inputs[u]=f),this.dynamicComponent.outputs&&this.dynamicComponent.outputs[h]&&this.dynamicComponent.outputs[h](f),this.dynamicComponentChange.emit(this.dynamicComponent)});this.subs.push(d)}}})}ngOnChanges(o){o.dynamicComponent&&(Array.isArray(this.subs)&&this.subs.map(c=>c.unsubscribe()),this.setInputOutputs())}ngOnInit(){this.loadComponent()}ngOnDestroy(){this.componentRef&&(this.subs.map(o=>o.unsubscribe()),this.componentRef.destroy(),this.componentRef=null)}}return l.\u0275fac=function(o){return new(o||l)(O(wc))},l.\u0275cmp=Qe({type:l,selectors:[["ukis-dynamic-component"]],viewQuery:function(o,c){if(1&o&&Cr(Dte,7),2&o){let u;It(u=Rt())&&(c.ukisAddHost=u.first)}},inputs:{dynamicComponent:"dynamicComponent"},outputs:{dynamicComponentChange:"dynamicComponentChange"},features:[Ci],decls:1,vars:0,consts:[["ukisAddHost",""]],template:function(o,c){1&o&&le(0,S9e,0,0,"ng-template",0)},directives:[Dte],encapsulation:2}),l})();function T9e(l,a){if(1&l){const o=mn();V(0,"span",12),ze("click",function(){return Ut(o),ve().showProperties()}),Le(1),B()}if(2&l){const o=ve();q("title",o.getLayerName(o.layer)),j(1),Bi(" ",o.getLayerName(o.layer)," ")}}const NV=function(l){return{disabled:l}};function w9e(l,a){if(1&l){const o=mn();V(0,"span"),V(1,"clr-icon",13),ze("click",function(){Ut(o);const u=ve();return u.setLayerIndex(u.layer,"down",u.group)}),B(),V(2,"clr-icon",14),ze("click",function(){Ut(o);const u=ve();return u.setLayerIndex(u.layer,"up",u.group)}),B(),B()}if(2&l){const o=ve();j(1),q("hidden",o.layerGroups&&1==o.layerGroups.length)("ngClass",as(4,NV,o.isLast(o.layer))),j(1),q("hidden",o.layerGroups&&1==o.layerGroups.length)("ngClass",as(6,NV,o.isFirst(o.layer)))}}const Ite=function(l){return{"is-solid":l}};function C9e(l,a){if(1&l&&xe(0,"clr-icon",15),2&l){const o=ve();cl("title",o.layer.visible?"Choose another layer":"Show layer"),q("ngClass",as(3,Ite,o.layer.visible)),Ke("shape",o.layer.visible?"dot-circle":"circle")}}function x9e(l,a){if(1&l&&xe(0,"clr-icon",15),2&l){const o=ve();cl("title",o.layer.visible?"Hide layer":"Show layer"),q("ngClass",as(3,Ite,o.layer.visible)),Ke("shape",o.layer.visible?"eye":"eye-hide")}}const cI=function(l){return{active:l}};function E9e(l,a){if(1&l){const o=mn();V(0,"clr-icon",27),ze("click",function(){return Ut(o),ve(2).switchTab("settings")}),B()}if(2&l){const o=ve(2);q("ngClass",as(1,cI,o.activeTabs.settings))}}function M9e(l,a){if(1&l){const o=mn();V(0,"clr-icon",28),ze("click",function(){return Ut(o),ve(2).switchTab("legend")}),B()}if(2&l){const o=ve(2);q("ngClass",as(1,cI,o.activeTabs.legend))}}function D9e(l,a){if(1&l){const o=mn();V(0,"clr-icon",29),ze("click",function(){return Ut(o),ve(2).switchTab("description")}),B()}if(2&l){const o=ve(2);q("ngClass",as(1,cI,o.activeTabs.description))}}function A9e(l,a){if(1&l){const o=mn();V(0,"clr-icon",30),ze("click",function(){return Ut(o),ve(2).switchTab("changeStyle")}),B()}if(2&l){const o=ve(2);q("ngClass",as(1,cI,o.activeTabs.changeStyle))}}function I9e(l,a){if(1&l){const o=mn();V(0,"clr-icon",31),ze("click",function(){const h=Ut(o).$implicit,d=ve(2);return h.action(d.layer)}),B()}if(2&l){const o=a.$implicit;q("title",o.title),Ke("shape",o.icon)}}function R9e(l,a){if(1&l){const o=mn();V(0,"clr-icon",32),ze("click",function(){Ut(o);const u=ve(2);return u.zoomTo(u.layer)}),B()}}function P9e(l,a){if(1&l){const o=mn();V(0,"clr-icon",33),ze("click",function(){Ut(o);const u=ve(2);return u.removeLayer(u.group,u.layer)}),B()}}function L9e(l,a){if(1&l){const o=mn();Jr(0),V(1,"ukis-dynamic-component",37),ze("dynamicComponentChange",function(u){return Ut(o),ve(3).layer.action=u}),B(),Qr()}if(2&l){const o=ve(3);j(1),q("dynamicComponent",o.layer.action)}}function O9e(l,a){if(1&l){const o=mn();V(0,"div",34),V(1,"div",35),V(2,"label",8),Le(3,"Opacity:"),B(),V(4,"input",36),ze("change",function(){Ut(o);const u=ve(2);return u.setLayerOpacity(u.layer)})("ngModelChange",function(u){return Ut(o),ve(2).layer.opacity=u}),B(),V(5,"span"),Le(6),B(),B(),le(7,L9e,2,1,"ng-container",6),B()}if(2&l){const o=ve(2);j(2),q("for","layer_transparency_slider_"+o.layer.id),j(2),q("id","layer_transparency_slider_"+o.layer.id)("value",o.layer.opacity)("min",0)("max",1)("step",.1)("ngModel",o.layer.opacity),j(2),Un(" "+o.layer.opacity),j(1),q("ngIf",o.checkIsComponentItem(o.layer,"action"))}}function N9e(l,a){if(1&l){const o=mn();Jr(0),V(1,"ukis-dynamic-component",37),ze("dynamicComponentChange",function(u){return Ut(o),ve(3).layer.legendImg=u}),B(),Qr()}if(2&l){const o=ve(3);j(1),q("dynamicComponent",o.layer.legendImg)}}function F9e(l,a){if(1&l&&(V(0,"a",40),xe(1,"img",41),B()),2&l){const o=ve(3);q("href",o.layer.legendImg,Jy),j(1),q("src",o.layer.legendImg,Jy)}}function k9e(l,a){if(1&l&&(V(0,"div"),le(1,N9e,2,1,"ng-container",38),le(2,F9e,2,2,"ng-template",null,39,Pa),B()),2&l){const o=po(3),c=ve(2);j(1),q("ngIf",c.checkIsComponentItem(c.layer,"legendImg"))("ngIfElse",o)}}function V9e(l,a){if(1&l&&(V(0,"div"),xe(1,"span",42),B()),2&l){const o=ve(2);j(1),q("innerHTML",o.layer.description,JC)}}function B9e(l,a){if(1&l&&(V(0,"option",45),Le(1),B()),2&l){const o=a.$implicit,c=ve(3);q("value",o.name),Ke("selected",!!c.isSelectedStyle(o.name)||null),j(1),Un(o.title)}}function U9e(l,a){if(1&l){const o=mn();V(0,"div"),V(1,"select",43),ze("change",function(u){return Ut(o),ve(2).executeChangeStyle(u)}),le(2,B9e,2,3,"option",44),B(),B()}if(2&l){const o=ve(2);j(2),q("ngForOf",o.layer.styles)}}function G9e(l,a){if(1&l&&(V(0,"div",16),V(1,"div",17),le(2,E9e,1,3,"clr-icon",18),le(3,M9e,1,3,"clr-icon",19),le(4,D9e,1,3,"clr-icon",20),le(5,A9e,1,3,"clr-icon",21),le(6,I9e,1,2,"clr-icon",22),xe(7,"span"),le(8,R9e,1,0,"clr-icon",23),le(9,P9e,1,0,"clr-icon",24),B(),V(10,"div",25),le(11,O9e,8,9,"div",26),le(12,k9e,4,2,"div",6),le(13,V9e,2,1,"div",6),le(14,U9e,3,1,"div",6),B(),B()),2&l){const o=ve();j(2),q("ngIf",!o.checkBaselayer(o.layer,o.group)),j(1),q("ngIf",o.layer.legendImg),j(1),q("ngIf",o.layer.description),j(1),q("ngIf",(null==o.layer.styles?null:o.layer.styles.length)>1),j(1),q("ngForOf",o.layer.actions),j(2),q("ngIf",o.canZoomToLayer),j(1),q("ngIf",o.layer.removable),j(2),q("ngIf",o.activeTabs.settings),j(1),q("ngIf",o.activeTabs.legend&&o.layer.legendImg),j(1),q("ngIf",o.activeTabs.description&&o.layer.description),j(1),q("ngIf",o.activeTabs.changeStyle&&o.layer.styles&&(null==o.layer.styles?null:o.layer.styles.length)>1)}}const z9e=["*"];let FV=(()=>{class l{constructor(){this.expandable=!0,this.update=new pt,this.canZoomToLayer=!1,this.activeTabs={settings:!1,legend:!0,description:!1,changeStyle:!1}}get visible(){return this.layer.visible}get cssClass(){return this.layer.cssClass}set expanded(o){this.layer&&(this.layer.expanded=o)}get expanded(){return!!this.layer&&this.layer.expanded}checkIsComponentItem(o,c){const u=o[c];let h=!1;if(u&&"object"==typeof u&&"component"in u){if(u.inputs){if(u.inputs&&!u.inputs.layer){const d=Object.assign({__proto__:this.layer.__proto__},o);console.log(d),d&&d[c]&&delete d[c],u.inputs=Object.assign({layer:d},u.inputs)}}else{const d=Object.assign({__proto__:this.layer.__proto__},o);console.log(d),d&&d[c]&&delete d[c],u.inputs={layer:d}}h=!0}return h}getLayerName(o){return o.displayName?o.displayName:o.name}ngOnInit(){this.layersSvc||console.error("you need to provide a layersService!"),this.layer.legendImg||(this.activeTabs.description=!0,this.activeTabs.legend=!1,this.activeTabs.settings=!1,this.activeTabs.changeStyle=!1),!this.layer.legendImg&&!this.layer.description&&(this.activeTabs.description=!1,this.activeTabs.legend=!1,this.activeTabs.settings=!0),this.layer.bbox&&this.layer.bbox.length>=4&&(this.canZoomToLayer=!0)}setLayerVisibility(o,c){if(c){if(c.layers.length>0)if("Baselayers"===c.filtertype){for(const u of c.layers)u.visible=u===o;this.update.emit({layer:this.layer})}else{const u=c.visible;o.visible=!o.visible,u!==c.visible?this.update.emit({layer:this.layer}):this.layersSvc.updateLayer(o,o.filtertype||"Layers")}}else if("Baselayers"===o.filtertype){o.visible=!o.visible;const u=this.layerGroups.filter(h=>"Baselayers"===h.filtertype);for(const h of u)h instanceof Lo&&h.id!==o.id&&(h.visible=!o.visible,this.layersSvc.updateLayer(h,h.filtertype||"Baselayers"))}else o.visible=!o.visible,this.layersSvc.updateLayer(o,o.filtertype||"Layers")}setLayerIndex(o,c,u){u?this.layersSvc.setLayerIndexInGroup(o,c,u):this.layersSvc.setGroupLayerIndex(o,c)}removeLayer(o,c){o?this.layersSvc.removeLayerFromGroup(c,o):this.layersSvc.removeLayer(c,c.filtertype)}zoomTo(o){this.mapState&&o.bbox&&o.bbox.length>=4&&this.mapState.setExtent(o.bbox)}setLayerOpacity(o){this.group?this.update.emit({layer:o}):this.layersSvc.updateLayer(o,o.filtertype||"Layers")}checkBaselayer(o,c){return!!("Baselayers"===o.filtertype||c&&"Baselayers"===c.filtertype)}is_expandable(){return!!this.group&&!this.layer.legendImg&&"Baselayers"===this.group.filtertype}showProperties(){this.is_expandable()||(this.expanded=!this.expanded)}switchTab(o){for(const c of Object.keys(this.activeTabs))this.activeTabs[c]=o===c}isSelectedStyle(o){return this.layer instanceof iT?this.layer.params.STYLES===o:this.layer instanceof fl&&this.layer.params.style===o}executeChangeStyle(o){const c=o.target.value;if(this.layer.styles){const u=this.layer.styles.find(h=>h.name===c);u&&(this.layer.legendImg=u.legendURL,this.layer instanceof iT?this.layer.params.STYLES=u.name:this.layer instanceof fl&&(this.layer.params.style=u.name),this.layersSvc.updateLayer(this.layer,this.layer.filtertype))}}isFirst(o){return this.group?this.layersSvc.isGroupFirst(o,this.group.layers):this.layersSvc.isGroupFirst(o,null,o.filtertype)}isLast(o){return this.group?this.layersSvc.isGroupLast(o,this.group.layers):this.layersSvc.isGroupLast(o,null,o.filtertype)}getExpandShape(){return this.expanded?{transform:"rotate(180deg)"}:{transform:"rotate(90deg)"}}}return l.\u0275fac=function(o){return new(o||l)},l.\u0275cmp=Qe({type:l,selectors:[["ukis-layerentry"]],hostVars:4,hostBindings:function(o,c){2&o&&(ul(c.cssClass),lt("layer-visible",c.visible))},inputs:{layersSvc:"layersSvc",mapState:"mapState",layer:"layer",group:"group",layerGroups:"layerGroups",expanded:"expanded",expandable:"expandable"},outputs:{update:"update"},ngContentSelectors:z9e,decls:14,vars:15,consts:[[1,"layer"],[1,"head"],["shape","angle","title","Details",1,"iconButton",3,"ngStyle","ngClass","click"],[1,"item-title-replacement","title",3,"title","click"],["ref",""],["class","title",3,"title","click",4,"ngIf"],[4,"ngIf"],[1,"hide",3,"type","name","id","checked","change"],[3,"for"],["class","iconButton",3,"ngClass","title",4,"ngIf","ngIfElse"],["notBaselayer",""],["class","body",4,"ngIf"],[1,"title",3,"title","click"],["shape","arrow","title","up",1,"iconButton",3,"hidden","ngClass","click"],["shape","arrow","title","down","dir","down",1,"iconButton",3,"hidden","ngClass","click"],[1,"iconButton",3,"ngClass","title"],[1,"body"],[1,"tools"],["title","Layer settings","shape","cog","class","iconButton",3,"ngClass","click",4,"ngIf"],["title","Layer Legend","shape","image","class","iconButton",3,"ngClass","click",4,"ngIf"],["title","Layer info","shape","info-standard","class","iconButton",3,"ngClass","click",4,"ngIf"],["title","Change style","shape","cloud-chart","class","iconButton",3,"ngClass","click",4,"ngIf"],["class","iconButton",3,"title","click",4,"ngFor","ngForOf"],["shape","zoom-in","class","iconButton","title","Zoom to layer",3,"click",4,"ngIf"],["shape","trash","class","iconButton","title","Remove layer",3,"click",4,"ngIf"],[1,"tabsbody"],["class","layersettings",4,"ngIf"],["title","Layer settings","shape","cog",1,"iconButton",3,"ngClass","click"],["title","Layer Legend","shape","image",1,"iconButton",3,"ngClass","click"],["title","Layer info","shape","info-standard",1,"iconButton",3,"ngClass","click"],["title","Change style","shape","cloud-chart",1,"iconButton",3,"ngClass","click"],[1,"iconButton",3,"title","click"],["shape","zoom-in","title","Zoom to layer",1,"iconButton",3,"click"],["shape","trash","title","Remove layer",1,"iconButton",3,"click"],[1,"layersettings"],[1,"form-group"],["type","range","name","points",1,"ukis-range-input","opacity-input",3,"id","value","min","max","step","ngModel","change","ngModelChange"],[3,"dynamicComponent","dynamicComponentChange"],[4,"ngIf","ngIfElse"],["imageUrl",""],["target","_blank","title","Show full Image",3,"href"],[3,"src"],[3,"innerHTML"],["clrSelect","",3,"change"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(o,c){if(1&o&&(Lt(),V(0,"div",0),V(1,"div",1),V(2,"clr-icon",2),ze("click",function(){return c.showProperties()}),B(),V(3,"div",3,4),ze("click",function(){return c.showProperties()}),Be(5),B(),le(6,T9e,2,2,"span",5),le(7,w9e,3,8,"span",6),V(8,"input",7),ze("change",function(){return c.setLayerVisibility(c.layer,c.group)}),B(),V(9,"label",8),le(10,C9e,1,5,"clr-icon",9),le(11,x9e,1,5,"ng-template",null,10,Pa),B(),B(),le(13,G9e,15,11,"div",11),B()),2&o){const u=po(4),h=po(12);j(2),q("ngStyle",c.getExpandShape())("ngClass",as(13,NV,c.is_expandable())),j(1),q("title",c.getLayerName(c.layer)),j(3),q("ngIf",0==u.children.length),j(1),q("ngIf",!c.checkBaselayer(c.layer,c.group)),j(1),q("type",c.checkBaselayer(c.layer,c.group)?"radio":"checkbox")("name","layer")("id",c.layer.id)("checked",c.layer.visible),j(1),q("for",c.layer.id),j(1),q("ngIf",c.checkBaselayer(c.layer,c.group))("ngIfElse",h),j(3),q("ngIf",c.expandable&&c.expanded)}},directives:[Ya,yO,_s,Mn,xi,Gi,D1,ec,$a,Cl,Ate,wJ,cA,uA],styles:[".title[_ngcontent-%COMP%]{cursor:pointer}.item-title-replacement[_ngcontent-%COMP%]:empty{display:none}.body[_ngcontent-%COMP%]{cursor:default}.tabsbody[_ngcontent-%COMP%]{overflow:hidden;word-break:break-all}.tabsbody[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:auto;max-width:100%}"]}),l})(),kV=(()=>{class l{transform(o){return"string"==typeof o?o.split("").reverse().join(""):Array.isArray(o)?o.slice().reverse():o}}return l.\u0275fac=function(o){return new(o||l)},l.\u0275pipe=Ao({name:"reverse",type:l,pure:!1}),l})(),Rte=(()=>{class l{transform(o,c){return o.filter(c)}}return l.\u0275fac=function(o){return new(o||l)},l.\u0275pipe=Ao({name:"itemsfilter",type:l,pure:!1}),l})();function H9e(l,a){if(1&l){const o=mn();V(0,"span",8),ze("click",function(){return Ut(o),ve().showProperties()}),Le(1),B()}if(2&l){const o=ve();q("title",o.getLayerName(o.group)),j(1),Bi(" ",o.getLayerName(o.group)," ")}}const Pte=function(l){return{disabled:l}};function j9e(l,a){if(1&l){const o=mn();V(0,"span"),V(1,"clr-icon",9),ze("click",function(){Ut(o);const u=ve();return u.setLayerGroupIndex(u.group,"down")}),B(),V(2,"clr-icon",10),ze("click",function(){Ut(o);const u=ve();return u.setLayerGroupIndex(u.group,"up")}),B(),B()}if(2&l){const o=ve();j(1),q("ngClass",as(2,Pte,o.isLast(o.group))),j(1),q("ngClass",as(4,Pte,o.isFirst(o.group)))}}const uI=function(l){return{"is-solid":l}};function W9e(l,a){if(1&l){const o=mn();V(0,"span"),V(1,"input",11),ze("change",function(){return Ut(o),ve().setGroupLayersVisibility()}),B(),V(2,"label",12),xe(3,"clr-icon",13),B(),B()}if(2&l){const o=ve();j(1),q("type","checkbox")("checked",o.group.visible)("name","group")("id",o.group.id),j(1),q("for",o.group.id),j(1),cl("title",o.group.visible?"Hide Group":"Show Group"),q("ngClass",as(8,uI,o.group.visible)),Ke("shape",o.group.visible?"eye":"eye-hide")}}function q9e(l,a){if(1&l){const o=mn();V(0,"clr-icon",2),ze("click",function(){const h=Ut(o).$implicit,d=ve(2);return h.action(d.group)}),B()}if(2&l){const o=a.$implicit;q("title",o.title),Ke("shape",o.icon)}}function X9e(l,a){if(1&l){const o=mn();V(0,"clr-icon",26),ze("click",function(){Ut(o);const u=ve(2);return u.showAction=!u.showAction}),B()}if(2&l){const o=ve(2);cl("title",o.showAction?"Hide settings":"Show settings"),q("ngClass",as(2,uI,o.showAction))}}function $9e(l,a){if(1&l){const o=mn();V(0,"clr-icon",27),ze("click",function(){Ut(o);const u=ve(2);return u.showInfo=!u.showInfo}),B()}if(2&l){const o=ve(2);cl("title",o.showInfo?"Hide Info":"Show Info"),q("ngClass",as(2,uI,o.showInfo))}}function Y9e(l,a){if(1&l){const o=mn();V(0,"clr-icon",28),ze("click",function(){Ut(o);const u=ve(2);return u.zoomTo(u.group)}),B()}}function Z9e(l,a){if(1&l){const o=mn();V(0,"clr-icon",29),ze("click",function(){Ut(o);const u=ve(2);return u.removeLayerGroup(u.group)}),B()}}function K9e(l,a){if(1&l&&(V(0,"div",30),xe(1,"span",31),B()),2&l){const o=ve(2);j(1),q("innerHTML",o.group.description,JC)}}function J9e(l,a){if(1&l){const o=mn();Jr(0),V(1,"ukis-dynamic-component",33),ze("dynamicComponentChange",function(u){return Ut(o),ve(3).group.action=u}),B(),Qr()}if(2&l){const o=ve(3);j(1),q("dynamicComponent",o.group.action)}}function Q9e(l,a){if(1&l&&(V(0,"div",32),le(1,J9e,2,1,"ng-container",6),B()),2&l){const o=ve(2);j(1),q("ngIf",o.checkIsComponentItem(o.group,"action"))}}const eWe=function(l){return{id:l}};function tWe(l,a){if(1&l){const o=mn();Jr(0),V(1,"div",34),V(2,"ukis-layerentry",35),ze("update",function(u){Ut(o);const h=ve(2);return h.layerUpdate(u,h.group)}),V(3,"span",36),Le(4),B(),B(),B(),Qr()}if(2&l){const o=a.$implicit,c=ve(2);j(1),q("cdkDragData",as(7,eWe,o.id)),j(1),q("expanded",c.openAllLayersProperties)("layersSvc",c.layersSvc)("mapState",c.mapState)("layer",o)("group",c.group),j(2),Bi(" ",o.displayName||o.name," ")}}function nWe(l,a){if(1&l){const o=mn();V(0,"div",14),V(1,"div",15),le(2,q9e,1,2,"clr-icon",16),le(3,X9e,1,4,"clr-icon",17),le(4,$9e,1,4,"clr-icon",18),V(5,"clr-icon",19),ze("click",function(){return Ut(o),ve().showHideAllDetails()}),B(),xe(6,"span"),le(7,Y9e,1,0,"clr-icon",20),le(8,Z9e,1,0,"clr-icon",21),B(),le(9,K9e,2,1,"div",22),le(10,Q9e,2,1,"div",23),V(11,"div",24),ze("cdkDropListDropped",function(u){return Ut(o),ve().drop(u)}),ks(12,"reverse"),ks(13,"itemsfilter"),le(14,tWe,5,9,"ng-container",25),ks(15,"reverse"),ks(16,"itemsfilter"),B(),B()}if(2&l){const o=ve();j(2),q("ngForOf",o.group.actions),j(1),q("ngIf",o.group.action),j(1),q("ngIf",o.group.description),j(1),cl("title",o.openAllLayersProperties?"Hide all layers details":"Show all layers details"),q("ngClass",as(21,uI,o.openAllLayersProperties)),j(2),q("ngIf",o.canZoomToGroup),j(1),q("ngIf",o.group.removable),j(1),q("ngIf",o.showInfo),j(1),q("ngIf",o.group.action&&o.showAction),j(1),q("cdkDropListData",Ko(12,11,AS(13,13,o.group.layers,o.checkClassHide))),j(3),q("ngForOf",Ko(15,16,AS(16,18,o.group.layers,o.checkClassHide)))}}const rWe=["*"];let Lte=(()=>{class l{constructor(){this.canZoomToGroup=!1,this.showInfo=!1,this.showAction=!0}get visible(){return this.group.visible}get cssClass(){return this.group.cssClass}set openAllLayersProperties(o){this.group&&this.group.layers.length&&this.group.layers.forEach(c=>c.expanded=o)}get openAllLayersProperties(){return!(!this.group||!this.group.layers.length)&&this.group.layers.filter(o=>!0===o.expanded).length===this.group.layers.length}ngOnInit(){var o;this.group.bbox&&this.group.bbox.length>=4&&(this.canZoomToGroup=!0),(null===(o=this.group)||void 0===o?void 0:o.action)||(this.showAction=!1)}checkIsComponentItem(o,c){const u=o[c];let h=!1;if(u&&"object"==typeof u&&"component"in u){if(u.inputs){if(u.inputs&&!u.inputs.group){const d=Object.assign({__proto__:this.group.__proto__},o);d&&d[c]&&delete d[c],u.inputs=Object.assign({group:d},u.inputs)}}else{const d=Object.assign({__proto__:this.group.__proto__},o);d&&d[c]&&delete d[c],u.inputs={group:d}}h=!0}return h}checkBaselayer(o){return!(!o||"Baselayers"!==o.filtertype)}checkClassHide(o){var c;return!(null===(c=null==o?void 0:o.cssClass)||void 0===c?void 0:c.includes("hide"))}getLayerName(o){return o.displayName?o.displayName:o.name}setLayerGroupIndex(o,c){this.layersSvc.setGroupLayerIndex(o,c)}setGroupLayersVisibility(){this.group.visible=!this.group.visible,this.layersSvc.updateLayerGroup(this.group)}removeLayerGroup(o){this.layersSvc.removeLayerGroup(o)}zoomTo(o){this.mapState&&o.bbox&&o.bbox.length>=4&&this.mapState.setExtent(o.bbox)}layerUpdate(o,c){this.layersSvc.updateLayerGroup(c)}showProperties(){this.group.expanded=!this.group.expanded}showHideAllDetails(){this.openAllLayersProperties=!this.openAllLayersProperties,this.showAction=this.openAllLayersProperties,this.showInfo=this.openAllLayersProperties}isFirst(o){return this.layersSvc.isGroupFirst(o,this.layerGroups,o.filtertype)}isLast(o){return this.layersSvc.isGroupLast(o,this.layerGroups,o.filtertype)}drop(o){const c=this.group.layers,u=c.length,h=o.container.data;let f,m;if(u===h.length)f=u-o.previousIndex-1,m=u-o.currentIndex-1;else{const g=h[o.currentIndex],y=c.findIndex(_=>_.id===o.item.data.id);let v=c.findIndex(_=>_.id===g.id);o.previousIndex===o.currentIndex&&(v=y),f=y,m=v}dte(this.group.layers,f,m),this.layersSvc.updateLayerGroup(this.group)}}return l.\u0275fac=function(o){return new(o||l)},l.\u0275cmp=Qe({type:l,selectors:[["ukis-layerentry-group"]],hostVars:4,hostBindings:function(o,c){2&o&&(ul(c.cssClass),lt("group-visible",c.visible))},inputs:{layersSvc:"layersSvc",mapState:"mapState",group:"group",layerGroups:"layerGroups"},ngContentSelectors:rWe,decls:10,vars:7,consts:[[1,"layergroup"],[1,"head"],[1,"iconButton",3,"title","click"],[1,"item-title-replacement","title",3,"title","click"],["ref",""],["class","title",3,"title","click",4,"ngIf"],[4,"ngIf"],["class","body",4,"ngIf"],[1,"title",3,"title","click"],["shape","arrow","title","up",1,"iconButton","move-item",3,"ngClass","click"],["shape","arrow","title","down","dir","down",1,"iconButton","move-item",3,"ngClass","click"],[1,"hide",3,"type","checked","name","id","change"],[3,"for"],[1,"iconButton",3,"ngClass","title"],[1,"body"],[1,"tools"],["class","iconButton",3,"title","click",4,"ngFor","ngForOf"],["shape","cog","class","iconButton",3,"ngClass","title","click",4,"ngIf"],["shape","info-standard","class","iconButton",3,"ngClass","title","click",4,"ngIf"],["shape","details",1,"iconButton",3,"ngClass","title","click"],["shape","zoom-in","class","iconButton","title","Zoom to group",3,"click",4,"ngIf"],["shape","trash","class","iconButton","title","Remove group",3,"click",4,"ngIf"],["class","info",4,"ngIf"],["class","tabsbody",4,"ngIf"],["cdkDropList","",3,"cdkDropListData","cdkDropListDropped"],[4,"ngFor","ngForOf"],["shape","cog",1,"iconButton",3,"ngClass","title","click"],["shape","info-standard",1,"iconButton",3,"ngClass","title","click"],["shape","zoom-in","title","Zoom to group",1,"iconButton",3,"click"],["shape","trash","title","Remove group",1,"iconButton",3,"click"],[1,"info"],[3,"innerHTML"],[1,"tabsbody"],[3,"dynamicComponent","dynamicComponentChange"],["cdkDragLockAxis","y","cdkDrag","",1,"sublayers",3,"cdkDragData"],[3,"expanded","layersSvc","mapState","layer","group","update"],["cdkDragHandle","",1,"move-item"]],template:function(o,c){if(1&o&&(Lt(),V(0,"div",0),V(1,"div",1),V(2,"clr-icon",2),ze("click",function(){return c.showProperties()}),B(),V(3,"div",3,4),ze("click",function(){return c.showProperties()}),Be(5),B(),le(6,H9e,2,2,"span",5),le(7,j9e,3,6,"span",6),le(8,W9e,4,10,"span",6),B(),le(9,nWe,17,23,"div",7),B()),2&o){const u=po(4);j(2),cl("title",c.group.expanded?"Close":"Open"),Ke("shape",c.group.expanded?"folder-open":"folder"),j(1),q("title",c.getLayerName(c.group)),j(3),q("ngIf",0==u.children.length),j(1),q("ngIf",c.layerGroups.length>1),j(1),q("ngIf",!c.checkBaselayer(c.group)),j(1),q("ngIf",c.group.expanded)}},directives:[Ya,Mn,_s,xi,Gi,Tte,Ate,Ete,FV,wte],pipes:[kV,Rte],styles:[".title[_ngcontent-%COMP%]{cursor:pointer}.item-title-replacement[_ngcontent-%COMP%]:empty{display:none}.cdk-drag-preview[_ngcontent-%COMP%]{display:flex;align-items:center;padding:0 10px;box-sizing:border-box;border-radius:2px;box-shadow:0 5px 5px -3px #0003,0 8px 10px 1px #00000024,0 3px 14px 2px #0000001f;overflow:hidden}.cdk-drag-placeholder[_ngcontent-%COMP%]{opacity:.2}.cdk-drag-animating[_ngcontent-%COMP%]{transition:transform .25s cubic-bezier(0,0,.2,1)}.example-box[_ngcontent-%COMP%]:last-child{border:none}.cdk-drop-list-dragging[_ngcontent-%COMP%]   .sublayers[_ngcontent-%COMP%]:not(.cdk-drag-placeholder){transition:transform .25s cubic-bezier(0,0,.2,1)}.info[_ngcontent-%COMP%]{padding-left:.2rem}"]}),l})();function iWe(l,a){if(1&l&&(V(0,"ukis-layerentry-group",5),V(1,"span",6),Le(2),B(),B()),2&l){const o=ve().$implicit,c=ve();q("layersSvc",c.layersSvc)("mapState",c.mapStateSvc)("group",o)("layerGroups",c.layergroups),j(2),Bi(" ",o.displayName||o.name," ")}}function sWe(l,a){if(1&l&&(V(0,"ukis-layerentry",7),V(1,"span",6),Le(2),B(),B()),2&l){const o=ve().$implicit,c=ve();q("layerGroups",c.layergroups)("expanded",!1)("layersSvc",c.layersSvc)("mapState",c.mapStateSvc)("layer",o)("group",null),j(2),Bi(" ",o.displayName||o.name," ")}}const oWe=function(l){return{id:l}};function aWe(l,a){if(1&l&&(Jr(0),V(1,"div",2),le(2,iWe,3,5,"ukis-layerentry-group",3),le(3,sWe,3,7,"ukis-layerentry",4),B(),Qr()),2&l){const o=a.$implicit,c=ve();j(1),q("cdkDragData",as(3,oWe,o.id)),j(1),q("ngIf",c.isLayerGroup(o)&&o.filtertype===c.layerfilter),j(1),q("ngIf",!c.isLayerGroup(o)&&o.filtertype===c.layerfilter)}}let uf=(()=>{class l{constructor(){this.layerfilter="Layers",this.layergroups=[]}ngOnInit(){this.layerGroupsSubscription=this.layersSvc.getLayerGroups().subscribe(o=>{this.layergroups=o})}isLayerGroup(o){return o instanceof us}ngOnDestroy(){this.layerGroupsSubscription.unsubscribe()}drop(o){const c=this.layergroups,u=c.length,h=o.container.data;let f,m;if(u===h.length)f=u-o.previousIndex-1,m=u-o.currentIndex-1;else{const g=h[o.currentIndex],y=c.findIndex(_=>_.id===o.item.data.id);let v=c.findIndex(_=>_.id===g.id);o.previousIndex===o.currentIndex&&(v=y),f=y,m=v}this.layersSvc.arrayMove(this.layergroups,f,m),this.layersSvc.setLayerGroups(this.layergroups)}checkBaselayer(o,c){return!!("Baselayers"===o.filtertype||c&&"Baselayers"===c.filtertype)}checkClassHide(o){var c;return!(null===(c=null==o?void 0:o.cssClass)||void 0===c?void 0:c.includes("hide"))}}return l.\u0275fac=function(o){return new(o||l)},l.\u0275cmp=Qe({type:l,selectors:[["ukis-layer-control"]],inputs:{layersSvc:"layersSvc",mapStateSvc:"mapStateSvc",layerfilter:"layerfilter"},decls:6,vars:12,consts:[["cdkDropList","",3,"cdkDropListData","cdkDropListDropped"],[4,"ngFor","ngForOf"],["cdkDragLockAxis","y","cdkDrag","",1,"list-item",3,"cdkDragData"],[3,"layersSvc","mapState","group","layerGroups",4,"ngIf"],[3,"layerGroups","expanded","layersSvc","mapState","layer","group",4,"ngIf"],[3,"layersSvc","mapState","group","layerGroups"],["cdkDragHandle","",1,"move-item"],[3,"layerGroups","expanded","layersSvc","mapState","layer","group"]],template:function(o,c){1&o&&(V(0,"div",0),ze("cdkDropListDropped",function(h){return c.drop(h)}),ks(1,"reverse"),ks(2,"itemsfilter"),le(3,aWe,4,5,"ng-container",1),ks(4,"reverse"),ks(5,"itemsfilter"),B()),2&o&&(q("cdkDropListData",Ko(1,2,AS(2,4,c.layergroups,c.checkClassHide))),j(3),q("ngForOf",Ko(4,7,AS(5,9,c.layergroups,c.checkClassHide))))},directives:[Tte,Gi,Ete,Mn,Lte,wte,FV],pipes:[kV,Rte],styles:[".list-item[_ngcontent-%COMP%]{cursor:pointer}.move-item[_ngcontent-%COMP%]{cursor:move}.cdk-drag-preview[_ngcontent-%COMP%]{display:flex;align-items:center;padding:15px 10px;box-sizing:border-box;border-radius:2px;box-shadow:0 5px 5px -3px #0003,0 8px 10px 1px #00000024,0 3px 14px 2px #0000001f;overflow:hidden}.cdk-drag-placeholder[_ngcontent-%COMP%]{opacity:.2}.cdk-drag-animating[_ngcontent-%COMP%]{transition:transform .25s cubic-bezier(0,0,.2,1)}.example-box[_ngcontent-%COMP%]:last-child{border:none}.cdk-drop-list-dragging[_ngcontent-%COMP%]   .list-item[_ngcontent-%COMP%]:not(.cdk-drag-placeholder){transition:transform .25s cubic-bezier(0,0,.2,1)}"]}),l})();function lWe(l,a){if(1&l&&xe(0,"ukis-layerentry-group",4),2&l){const o=ve().$implicit,c=ve();q("layersSvc",c.layersSvc)("mapState",c.mapStateSvc)("group",o)("layerGroups",c.layergroups)}}function cWe(l,a){if(1&l&&xe(0,"ukis-layerentry",5),2&l){const o=ve().$implicit,c=ve();q("layerGroups",c.layergroups)("expanded",!1)("layersSvc",c.layersSvc)("mapState",c.mapStateSvc)("layer",o)("group",null)}}function uWe(l,a){if(1&l&&(V(0,"div",1),le(1,lWe,1,4,"ukis-layerentry-group",2),le(2,cWe,1,6,"ukis-layerentry",3),B()),2&l){const o=a.$implicit,c=ve();j(1),q("ngIf",c.isLayerGroup(o)),j(1),q("ngIf",!c.isLayerGroup(o))}}let hI=(()=>{class l{constructor(){this.layergroups=[]}ngOnInit(){this.layerGroupsSubscription=this.layersSvc.getLayerGroups().subscribe(o=>{this.layergroups=o.filter(c=>"Baselayers"===c.filtertype)})}isLayerGroup(o){return o instanceof us}ngOnDestroy(){this.layerGroupsSubscription.unsubscribe()}}return l.\u0275fac=function(o){return new(o||l)},l.\u0275cmp=Qe({type:l,selectors:[["ukis-base-layer-control"]],inputs:{layersSvc:"layersSvc",mapStateSvc:"mapStateSvc"},decls:2,vars:3,consts:[["class","list-item",4,"ngFor","ngForOf"],[1,"list-item"],[3,"layersSvc","mapState","group","layerGroups",4,"ngIf"],[3,"layerGroups","expanded","layersSvc","mapState","layer","group",4,"ngIf"],[3,"layersSvc","mapState","group","layerGroups"],[3,"layerGroups","expanded","layersSvc","mapState","layer","group"]],template:function(o,c){1&o&&(le(0,uWe,3,2,"div",0),ks(1,"reverse")),2&o&&q("ngForOf",Ko(1,1,c.layergroups))},directives:[Gi,Mn,Lte,FV],pipes:[kV],styles:[""]}),l})(),hWe=(()=>{class l{constructor(o,c,u,h){this.layersSvc=o,this.mapStateSvc=c,this.mapSvc=u,this.wmsSvc=h,this.class="content-container",this.controls={attribution:!0,scaleLine:!0}}ngOnInit(){this.mapSvc.map.addControl(new XY),this.addBaseLayers(),this.addLayers(),this.addOverlays(),this.setExtent()}setExtent(){this.mapStateSvc.setExtent([-14,33,40,57])}parseCapabilities(){this.wmsSvc.getCapabilities("https://geoservice.dlr.de/eoc/land/wms").subscribe(o=>{const c=this.wmsSvc.getLayerFromCapabilities("AGRODE_S2_EVI_P1M",o);console.log(c)})}addBaseLayers(){const o=new Zs({name:"Transparenter Hintergrund",id:"blank",type:"geojson"}),c=new sbe,u=new d9,h=new ME({id:"eocLiteAndOverlay",name:"EOC Lite with Overlay",description:"merged/stacked Layers EOC Lite with Overlay",legendImg:c.legendImg,layers:[c,u]}),d=new fl({type:"wmts",url:"https://tiles.geoservice.dlr.de/service/wmts",name:"Relief",id:"world_relief_bw",params:{layer:"eoc:world_relief_bw",style:"_empty",matrixSetOptions:{matrixSet:"EPSG:3857",tileMatrixPrefix:"EPSG:3857"}},visible:!1,description:"eoc:world_relief_bw as web map tile service",attribution:'Relief: <a src="https://www.dlr.de/eoc">DLR/EOC</>',legendImg:""});[new Uv({id:"OSM_Base"}),o,h,d].map(g=>this.layersSvc.addLayer(g,"Baselayers"))}addLayers(){const o=new dl({type:"wms",url:"https://geoservice.dlr.de/eoc/land/wms",name:"GUF Mosaic",id:"GUF28_DLR_v1_Mosaic",params:{LAYERS:"GUF28_DLR_v1_Mosaic",STYLES:"guf_8bit"},tileSize:512,visible:!1,description:"GUF28_DLR_v1_Mosaic",attribution:' | GUF\xae: <a href="https://www.dlr.de/eoc/en/desktopdefault.aspx/tabid-9628/16557_read-40454/">DLR License</a>',legendImg:"",popup:{asyncPopup:(x,R)=>{!function(l,a,o){const c=l.source,u=l.evt,h=a.map.getView().getResolution(),d=c.getFeatureInfoUrl(u.coordinate,h,a.EPSG,{INFO_FORMAT:"application/json"});fetch(d).then(f=>f.json()).catch(f=>{console.log(f)}).then(f=>{if(f.features.length){const m=a.createPopupHtml(f.features[0].properties);o(m)}else o("<p>No Data!</p>")})}(x,this.mapSvc,R)}}}),c=new fl({type:"wmts",url:"https://tiles.geoservice.dlr.de/service/wmts",name:"TDM90 DEM",id:"TDM90_DEM",params:{layer:"TDM90_DEM",style:"default",matrixSetOptions:{matrixSet:"EPSG:3857",tileMatrixPrefix:"EPSG:3857"},format:"image/png"},visible:!1,maxZoom:8,description:"TDM90_DEM maxZoom: 8",attribution:' | TDM90 Data \xa9: <a href="http://www.dlr.de" target="_blank">DLR</a>  licensed for <a rel="license" target="_blank" href="https://geoservice.dlr.de/resources/licenses/tdm90/License_for_the_Utilization_of_90m_DEM_for_Scientific_Use.pdf">scientific use</a>',legendImg:"",expanded:!0,cssClass:"custom-layer"}),u=new Zs({id:"geojson_test",name:"GeoJSON Vector Layer",type:"geojson",data:{type:"FeatureCollection",features:[{type:"Feature",properties:{title:"Polygon"},geometry:{type:"Polygon",coordinates:[[[11.53564453125,48.80686346108517],[11.42578125,48.61838518688487],[11.97509765625,48.516604348867475],[12.2607421875,48.69096039092549],[12.0849609375,48.99463598353405],[11.53564453125,48.80686346108517]]]}},{type:"Feature",properties:{title:"Rectangle"},geometry:{type:"Polygon",coordinates:[[[10.986328125,43.89789239125797],[11.755371093749998,43.89789239125797],[11.755371093749998,44.41808794374846],[10.986328125,44.41808794374846],[10.986328125,43.89789239125797]]]}},{type:"Feature",properties:{title:"Line"},geometry:{type:"LineString",coordinates:[[13.29345703125,48.268569112964336],[15.073242187499998,47.56170075451973],[14.1064453125,46.40756396630067],[15.886230468750002,44.94924926661153]]}},{type:"Feature",properties:{title:"Point"},geometry:{type:"Point",coordinates:[11.513671874999998,46.42271253466717]}}]},visible:!1,popup:{event:"move",dynamicPopup:{component:K4,getAttributes:x=>({data:x.properties})}}}),h=new Zs({id:"geojson_test_3",name:"GeoJSON Point Layer",type:"geojson",data:{type:"FeatureCollection",features:[{type:"Feature",properties:{title:"Munich",type:"City",image:"https://en.wikipedia.org/wiki/Munich#/media/File:Stadtbild_M%C3%BCnchen.jpg",wiki:"https://en.wikipedia.org/wiki/Munich"},geometry:{type:"Point",coordinates:[11.557617187499998,48.151428143221224]}}]},visible:!1,popup:{properties:{title:"Title",type:"Type"}}}),d=new Zs({id:"geojson_test_2",name:"Vector Layer in Group",type:"geojson",data:{type:"FeatureCollection",features:[{type:"Feature",properties:{type:"Polygon",name:"Vector Layer in Group",data:"geojson"},geometry:{type:"Polygon",coordinates:[[[-4.9658203125,41.09591205639546],[-6.459960937499999,39.52099229357195],[-5.009765625,38.42777351132902],[-1.8896484375,38.77121637244273],[-.68115234375,40.84706035607122],[-2.900390625,41.65649719441145],[-4.9658203125,41.09591205639546]]]}}]},visible:!1,cssClass:"hide",popup:["type","name"],actions:[{title:"download",icon:"download-cloud",action:x=>{console.log(x)}}]}),f=new Zs({id:"geojson_test_cluster",name:"Cluster - GeoJSON Vector Layer",type:"geojson",cluster:{distance:20},data:uHe,visible:!0,actions:[{title:"update Layer",icon:"sync",action:x=>{x.cluster.distance=25,x.options||(x.options={}),x.options.style=R=>{const P=R.get("features").length;return new Li({image:new ag({radius:P<=1?6:10,stroke:new Bs({color:"#fff"}),fill:new Pi({color:P<=1?"green":"red"})})})},this.layersSvc.updateLayer(x)}}],popup:{popupFunction:x=>`<div>${JSON.stringify(x)} </div>`}}),m=new Zs({id:"WfsLayer",name:"WFS Pennsylvania",type:"wfs",visible:!1,url:"https://ahocevar.com/geoserver/wfs?service=WFS&request=GetFeature&outputFormat=application/json&version=1.1.0&srsname=EPSG:3857&typenames=usa:states&cql_filter=STATE_NAME='Pennsylvania'",bbox:[-83.1005859375,38.37611542403604,-72.50976562499999,43.03677585761058],popup:{dynamicPopup:{component:K4,getAttributes:x=>({data:x})}}}),g=new obe;g.cssClass="hide";const y=new d9,v=new eN,_=new Uv,b=new us({id:"group_1",name:"Test Group",layers:[_,g,y],description:"this is a group with OsmLayer, eocBasemap, eocBaseoverlay",actions:[{title:"download",icon:"download-cloud",action:x=>{console.log(x)}}]}),w=new us({id:"group_2",name:"Test Group 2",expanded:!0,cssClass:"custom-layer-group",layers:[c,d,v]}),C=new us({id:"group_3",name:"Test Group Vector-Data",expanded:!1,layers:[u,h,m]});[o,new abe({popup:{popupFunction:x=>`\n            <table>\n              <tbody>\n                <tr>\n                  <td style="vertical-align: top; padding-right: 7px;"><b>Name: ${x.name}</b></td>\n                  <td></td>\n                </tr>\n                <tr>\n                  <td style="vertical-align: top; padding-right: 7px;"><b>type: ${x.type}</b></td>\n                  <td></td>\n                </tr>\n              </tbody>\n            </table>\n            <img src="${x.legendImg}">\n            `}}),C,w,b,f].map(x=>{x instanceof Lo?this.layersSvc.addLayer(x,"Layers"):x instanceof us&&this.layersSvc.addLayerGroup(x)})}addOverlays(){const o=new f9({crossOrigin:"anonymous"}),c=new ibe({crossOrigin:"anonymous"});this.layersSvc.addLayer(o,"Overlays"),this.layersSvc.addLayer(c,"Overlays");const u=new f9({id:"merge_BlueMarble"}),h=new eN({id:"merge_Liteoverlay"}),d=new ME({id:"BlueMarbleTile_Overlay",name:"BlueMarble with Overlay",visible:!1,legendImg:u.legendImg,description:"merged/stacked Layers BlueMarble with Overlay",layers:[u,h]});this.layersSvc.addLayer(d,"Overlays")}updateLayerGroup(){const o=this.layersSvc.getLayerOrGroupById("group_1");o.expanded=!0,o.layers[1].cssClass=null,this.layersSvc.updateLayerGroup(o);const c=this.layersSvc.getLayerOrGroupById("group_2");c.layers[1].visible=!0,this.layersSvc.updateLayerGroup(c)}addLayerToGroup(){const o=this.layersSvc.getLayerOrGroupById("group_2"),c=new p9;this.layersSvc.addLayerToGroup(c,o)}removeAllLayers(){this.layersSvc.removeLayers()}}return l.\u0275fac=function(o){return new(o||l)(O(vo),O(Oo),O(Qs),O(dee))},l.\u0275cmp=Qe({type:l,selectors:[["app-route-map"]],hostVars:2,hostBindings:function(o,c){2&o&&ul(c.class)},features:[Mt([vo,Oo,Qs])],decls:32,vars:16,consts:[[1,"content-area"],["id","olMap",3,"layersSvc","mapState","controls"],[1,"right",3,"clrVerticalNavCollapsible","clr-nav-level"],[1,"layers",3,"clrVerticalNavGroupExpanded"],["shape","world","title","Overlays","clrVerticalNavIcon",""],[1,"padding","title-ellipsis"],[3,"layersSvc","mapStateSvc","layerfilter"],["shape","layers","clrVerticalNavIcon","","title","layers"],[3,"layersSvc","mapStateSvc"],["shape","world","title","Baselayers","clrVerticalNavIcon",""],["shape","cog","title","Actions","clrVerticalNavIcon",""],[1,"btn","btn-primary",3,"click"]],template:function(o,c){1&o&&(V(0,"main",0),xe(1,"ukis-map-ol",1),B(),V(2,"clr-vertical-nav",2),V(3,"clr-vertical-nav-group",3),xe(4,"clr-icon",4),Le(5," Overlays "),V(6,"clr-vertical-nav-group-children",5),xe(7,"ukis-layer-control",6),B(),B(),V(8,"clr-vertical-nav-group",3),xe(9,"clr-icon",7),Le(10," Layers "),V(11,"clr-vertical-nav-group-children",5),xe(12,"ukis-layer-control",8),B(),B(),V(13,"clr-vertical-nav-group",3),xe(14,"clr-icon",9),Le(15," Baselayers "),V(16,"clr-vertical-nav-group-children",5),xe(17,"ukis-base-layer-control",8),B(),B(),V(18,"clr-vertical-nav-group",3),xe(19,"clr-icon",10),Le(20," Actions "),V(21,"clr-vertical-nav-group-children",5),V(22,"button",11),ze("click",function(){return c.updateLayerGroup()}),Le(23,"update LayerGroup"),B(),V(24,"button",11),ze("click",function(){return c.addLayerToGroup()}),Le(25,"add Layer to LayerGroup"),B(),V(26,"button",11),ze("click",function(){return c.removeAllLayers()}),Le(27,"remove All Layers"),B(),V(28,"button",11),ze("click",function(){return c.setExtent()}),Le(29,"set Extent"),B(),V(30,"button",11),ze("click",function(){return c.parseCapabilities()}),Le(31,"Parse WMS capabilities"),B(),B(),B(),B()),2&o&&(j(1),q("layersSvc",c.layersSvc)("mapState",c.mapStateSvc)("controls",c.controls),j(1),q("clrVerticalNavCollapsible",!0)("clr-nav-level",2),j(1),q("clrVerticalNavGroupExpanded",!0),j(4),q("layersSvc",c.layersSvc)("mapStateSvc",c.mapStateSvc)("layerfilter","Overlays"),j(1),q("clrVerticalNavGroupExpanded",!0),j(4),q("layersSvc",c.layersSvc)("mapStateSvc",c.mapStateSvc),j(1),q("clrVerticalNavGroupExpanded",!0),j(4),q("layersSvc",c.layersSvc)("mapStateSvc",c.mapStateSvc),j(1),q("clrVerticalNavGroupExpanded",!0))},directives:[Zd,Hh,Vu,jh,Ya,qh,Wh,uf,hI],styles:["[_nghost-%COMP%]     .custom-layer-group .head>.title{color:#660f00}[_nghost-%COMP%]     .custom-layer .head>.title{color:#b87d00}[_nghost-%COMP%]     .zoom-number{bottom:2.5em;left:8px}"]}),l})();const dWe=function(l){return{"is-solid":l}};function fWe(l,a){if(1&l){const o=mn();V(0,"div",2),ze("click",function(){const h=Ut(o).$implicit;return ve(2).setNewProjection(h)}),V(1,"div",3),V(2,"div",4),V(3,"span",5),ze("click",function(){const h=Ut(o).$implicit;return ve(2).setNewProjection(h)}),Le(4),B(),xe(5,"clr-icon",6),B(),B(),B()}if(2&l){const o=a.$implicit,c=ve(2);j(3),q("title",o.title),j(1),Bi(" ",o.title||o.code," "),j(1),cl("title",o.code),q("ngClass",as(5,dWe,o===c.selectedProj)),Ke("shape",o===c.selectedProj?"eye":"eye-hide")}}function pWe(l,a){if(1&l&&(V(0,"div"),le(1,fWe,6,7,"div",1),B()),2&l){const o=ve();j(1),q("ngForOf",o.projList)}}let mWe=(()=>{class l{constructor(){}ngOnInit(){this.projList[0]&&this.setNewProjection(this.projList[0])}setNewProjection(o){this.mapSvc.registerProjection(o);const c=this.mapSvc.getOlProjection(o);this.mapSvc.setProjection(c),this.selectedProj=o}}return l.\u0275fac=function(o){return new(o||l)},l.\u0275cmp=Qe({type:l,selectors:[["ukis-projection-switch"]],inputs:{mapSvc:"mapSvc",projList:["projectionList","projList"]},decls:1,vars:1,consts:[[4,"ngIf"],[3,"click",4,"ngFor","ngForOf"],[3,"click"],[1,"layergroup"],[1,"head"],[1,"title",3,"title","click"],[1,"iconButton",3,"ngClass","title"]],template:function(o,c){1&o&&le(0,pWe,2,1,"div",0),2&o&&q("ngIf",c.projList)},directives:[Mn,Gi,Ya,_s],encapsulation:2}),l})();function gWe(l,a){if(1&l&&(V(0,"option",9),Le(1),B()),2&l){const o=a.$implicit;q("value",o.value),j(1),Un(o.title)}}let Ote=(()=>{class l{constructor(o){this.mapSvc=o,this.mapCoordinates=[0,0],this.zoom=0,this.precision=2,this.x="Lon",this.y="Lat",this.mapMoveSubscription=c=>{c.coordinate&&(this.mapCoordinates=ql(c.coordinate,this.mapProjection,Bn(this.selectedProjection)))},this.mapOnMoveend=c=>{const u=c.map.getView().getZoom();this.zoom!==u&&(this.zoom=u)},this.mapSub=this.mapSvc.projectionChange.subscribe(c=>{this.mapProjection=c,this.setProjection(c)})}ngOnInit(){this.mapSvc.map.on("pointermove",this.mapMoveSubscription),this.mapSvc.map.on("moveend",this.mapOnMoveend)}setProjection(o){const c=o.getCode();this.projections="EPSG:4326"===c?[{title:c,value:c}]:[{title:"EPSG:4326",value:"EPSG:4326"},{title:c,value:c}],this.selectedProjection=this.projections[0].value}ngOnDestroy(){this.mapSvc.map.un("pointermove",this.mapMoveSubscription),this.mapSvc.map.un("moveend",this.mapOnMoveend),this.mapSub.unsubscribe()}onChangeProj(o){const c=o.target.value;"EPSG:4326"===c?(this.x="Lon",this.y="Lat"):(this.x="X",this.y="Y");const u=this.selectedProjection;this.selectedProjection=c,this.mapCoordinates=ql(this.mapCoordinates,Bn(u),Bn(this.selectedProjection))}toPrecision(o,c){return o.toFixed(c)}}return l.\u0275fac=function(o){return new(o||l)(O(Qs))},l.\u0275cmp=Qe({type:l,selectors:[["ukis-mouse-position"]],decls:27,vars:7,consts:[[1,"mouse-position-control"],[1,"clr-row"],[1,"clr-col-7"],[1,"output-container"],[1,"clr-col-5"],[1,"input-container"],["clrSelect","",3,"change"],[3,"value",4,"ngFor","ngForOf"],["type","number","min","0","max","12","name","precision","clrInput","",3,"ngModel","ngModelChange"],[3,"value"]],template:function(o,c){1&o&&(V(0,"div",0),V(1,"div",1),V(2,"div",2),V(3,"div",3),V(4,"div"),V(5,"b"),Le(6),B(),Le(7),B(),V(8,"div"),V(9,"b"),Le(10),B(),Le(11),B(),V(12,"div"),V(13,"b"),Le(14,"Zoom"),B(),Le(15),B(),B(),B(),V(16,"div",4),V(17,"div",5),V(18,"clr-select-container"),V(19,"label"),Le(20,"Projection "),B(),V(21,"select",6),ze("change",function(h){return c.onChangeProj(h)}),le(22,gWe,2,2,"option",7),B(),B(),V(23,"clr-input-container"),V(24,"label"),Le(25,"Precision "),B(),V(26,"input",8),ze("ngModelChange",function(h){return c.precision=h}),B(),B(),B(),B(),B(),B()),2&o&&(j(6),Un(c.x),j(1),Bi(" ",c.toPrecision(c.mapCoordinates[0],c.precision),""),j(3),Un(c.y),j(1),Bi(" ",c.toPrecision(c.mapCoordinates[1],c.precision),""),j(4),Bi(" ",c.toPrecision(c.zoom,c.precision),""),j(7),q("ngForOf",c.projections),j(4),q("ngModel",c.precision))},directives:[TJ,xi,wJ,Gi,z1,dA,hA,M1,ec,MA,$a,Cl,cA,uA],styles:[".mouse-position-control[_ngcontent-%COMP%]{margin-left:.2rem;padding-bottom:.4rem}.mouse-position-control[_ngcontent-%COMP%]   .output-container[_ngcontent-%COMP%]{line-height:1.6rem}.mouse-position-control[_ngcontent-%COMP%]   .input-container[_ngcontent-%COMP%]   .clr-form-control[_ngcontent-%COMP%]:first-child{margin-top:0}"]}),l})(),yWe=(()=>{class l{constructor(){this.inputStep=.01,this.precision=2}ngOnInit(){this.subscription=this.mapState.getMapState().subscribe(o=>{this.mapstate=o})}ngOnDestroy(){this.subscription.unsubscribe()}zoomIn(){this.mapstate.zoom++,this.setNewState(this.mapstate)}zoomOut(){this.mapstate.zoom--,this.setNewState(this.mapstate)}setNewState(o){o.options.notifier="user",this.mapState.setMapState(o)}stateChange(o){this.setNewState(this.mapstate)}setInputStep(o){const c=Array.from(Array(o),(u,h)=>"0").join("");this.inputStep=1/Number(`1${c}`)}toPrecision(o,c){return o.toFixed(c)}}return l.\u0275fac=function(o){return new(o||l)},l.\u0275cmp=Qe({type:l,selectors:[["ukis-map-navigator"]],inputs:{mapState:"mapState"},decls:22,vars:7,consts:[[1,"clr-row"],[1,"clr-col-9"],[1,"output-container"],["clrForm",""],["clrInput","","type","number","name","lon",3,"ngModel","step","ngModelChange"],["clrInput","","type","number","name","lat",3,"ngModel","step","ngModelChange"],["clrInput","","type","number","name","zoom",3,"ngModel","step","ngModelChange"],[1,"clr-col-3"],[1,"input-container"],["type","number","min","0","max","8","step","1","name","precision","clrInput","",3,"ngModel","ngModelChange"]],template:function(o,c){1&o&&(V(0,"div",0),V(1,"div",1),V(2,"div",2),V(3,"form",3),V(4,"clr-input-container"),V(5,"label"),Le(6,"Lon"),B(),V(7,"input",4),ze("ngModelChange",function(h){return c.mapstate.center.lon=h})("ngModelChange",function(h){return c.stateChange(h)}),B(),B(),V(8,"clr-input-container"),V(9,"label"),Le(10,"Lat"),B(),V(11,"input",5),ze("ngModelChange",function(h){return c.mapstate.center.lat=h})("ngModelChange",function(h){return c.stateChange(h)}),B(),B(),V(12,"clr-input-container"),V(13,"label"),Le(14,"Zoom"),B(),V(15,"input",6),ze("ngModelChange",function(h){return c.mapstate.zoom=h})("ngModelChange",function(h){return c.stateChange(h)}),B(),B(),B(),B(),B(),V(16,"div",7),V(17,"div",8),V(18,"clr-input-container"),V(19,"label"),Le(20,"Precision "),B(),V(21,"input",9),ze("ngModelChange",function(h){return c.precision=h})("ngModelChange",function(h){return c.setInputStep(h)}),B(),B(),B(),B(),B()),2&o&&(j(7),q("ngModel",c.mapstate.center.lon)("step",c.inputStep),j(4),q("ngModel",c.mapstate.center.lat)("step",c.inputStep),j(4),q("ngModel",c.mapstate.zoom)("step",c.inputStep),j(6),q("ngModel",c.precision))},directives:[oA,JD,E1,Z3,z1,xi,M1,ec,MA,$a,Cl,dA,hA],styles:[".output-container[_ngcontent-%COMP%]   .clr-form-control[_ngcontent-%COMP%]:first-child{margin-top:0}.output-container[_ngcontent-%COMP%]   .clr-input[_ngcontent-%COMP%]{width:90%}"]}),l})(),vWe=(()=>{class l{constructor(o,c,u){this.layersSvc=o,this.mapStateSvc=c,this.mapSvc=u,this.class="content-container",this.controls={attribution:!0,scaleLine:!0},this.projections=[{code:"EPSG:3857",proj4js:"+proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +wktext  +no_defs",title:"Spherical Mercator",extent:[-20026376.39,-20048966.1,20026376.39,20048966.1],worldExtent:[-180,-85.06,180,85.06],global:!0,units:"m"},{code:"EPSG:3995",proj4js:"+proj=stere +lat_0=90 +lat_ts=71 +lon_0=0 +k=1 +x_0=0 +y_0=0 +datum=WGS84 +units=m +no_defs",title:"Arctic Polar Stereographic",extent:[-20048966.1,-20048966.1,20048966.1,20048966.1],worldExtent:[-180,60,180,90],global:!1,units:"m"},{code:"EPSG:3031",proj4js:"+proj=stere +lat_0=-90 +lat_ts=-71 +lon_0=0 +k=1 +x_0=0 +y_0=0 +datum=WGS84 +units=m +no_defs",title:"Antarctic Polar Stereographic",extent:[-20048966.1,-20048966.1,20048966.1,20048966.1],worldExtent:[-180,-90,180,-60],global:!1,units:"m"}],this.addOverlays(),this.mapStateSvc.setExtent([-14,33,40,57])}ngOnInit(){}addOverlays(){[new Uv({removable:!0,legendImg:null,visible:!0,id:"osm"}),new dl({type:"wms",url:"https://geoservice.dlr.de/eoc/land/wms",name:"GUF Mosaic",id:"GUF28_DLR_v1_Mosaic",params:{layers:"GUF28_DLR_v1_Mosaic",styles:"guf_8bit"},visible:!1,description:"GUF28_DLR_v1_Mosaic",attribution:' | GUF\xae: <a href="https://www.dlr.de/eoc/en/desktopdefault.aspx/tabid-9628/16557_read-40454/">DLR License</a>',legendImg:""}),new Zs({id:"geojson_test",name:"GeoJSON Vector Layer",type:"geojson",data:{type:"FeatureCollection",features:[{type:"Feature",properties:{},geometry:{type:"Polygon",coordinates:[[[12.65625,49.61070993807422],[20.698242187499996,46.830133640447386],[22.5,49.781264058178344],[15.161132812500002,51.508742458803326],[12.65625,49.61070993807422]]]}}]},visible:!0})].map(d=>this.layersSvc.addLayer(d,"Layers"))}}return l.\u0275fac=function(o){return new(o||l)(O(vo),O(Oo),O(Qs))},l.\u0275cmp=Qe({type:l,selectors:[["app-route-map2"]],hostVars:2,hostBindings:function(o,c){2&o&&ul(c.class)},features:[Mt([vo,Oo,Qs])],decls:23,vars:14,consts:[[1,"content-area"],["id","olMap",3,"layersSvc","mapState","controls"],[1,"right",3,"clrVerticalNavCollapsible","clr-nav-level"],[1,"layers",3,"clrVerticalNavGroupExpanded"],["shape","layers","clrVerticalNavIcon","","title","layers"],[1,"padding","title-ellipsis"],[3,"layersSvc","mapStateSvc"],["title","Projection",1,"layers",3,"clrVerticalNavGroupExpanded"],["shape","map","clrVerticalNavIcon",""],[3,"mapSvc","projectionList"],["title","Coordinates",1,"layers",3,"clrVerticalNavGroupExpanded"],["shape","compass","clrVerticalNavIcon",""],["title","Navigator",1,"layers",3,"clrVerticalNavGroupExpanded"],[3,"mapState"]],template:function(o,c){1&o&&(V(0,"main",0),xe(1,"ukis-map-ol",1),B(),V(2,"clr-vertical-nav",2),V(3,"clr-vertical-nav-group",3),xe(4,"clr-icon",4),Le(5," Layers "),V(6,"clr-vertical-nav-group-children",5),xe(7,"ukis-layer-control",6),B(),B(),V(8,"clr-vertical-nav-group",7),xe(9,"clr-icon",8),Le(10," Projection "),V(11,"clr-vertical-nav-group-children",5),xe(12,"ukis-projection-switch",9),B(),B(),V(13,"clr-vertical-nav-group",10),xe(14,"clr-icon",11),Le(15," Coordinates "),V(16,"clr-vertical-nav-group-children",5),xe(17,"ukis-mouse-position"),B(),B(),V(18,"clr-vertical-nav-group",12),xe(19,"clr-icon",11),Le(20," Navigator "),V(21,"clr-vertical-nav-group-children",5),xe(22,"ukis-map-navigator",13),B(),B(),B()),2&o&&(j(1),q("layersSvc",c.layersSvc)("mapState",c.mapStateSvc)("controls",c.controls),j(1),q("clrVerticalNavCollapsible",!0)("clr-nav-level",2),j(1),q("clrVerticalNavGroupExpanded",!0),j(4),q("layersSvc",c.layersSvc)("mapStateSvc",c.mapStateSvc),j(1),q("clrVerticalNavGroupExpanded",!0),j(4),q("mapSvc",c.mapSvc)("projectionList",c.projections),j(1),q("clrVerticalNavGroupExpanded",!0),j(5),q("clrVerticalNavGroupExpanded",!0),j(4),q("mapState",c.mapStateSvc))},directives:[Zd,Hh,Vu,jh,Ya,qh,Wh,uf,mWe,Ote,yWe],styles:[""]}),l})();var _We=function(){var l=function(a,o){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,u){c.__proto__=u}||function(c,u){for(var h in u)Object.prototype.hasOwnProperty.call(u,h)&&(c[h]=u[h])})(a,o)};return function(a,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function c(){this.constructor=a}l(a,o),a.prototype=null===o?Object.create(o):(c.prototype=o.prototype,new c)}}();const Nte=function(l){function a(o,c,u,h,d){var f=this;return(f=l.call(this,o,c,u,void 0!==d?0:2)||this).loader_=void 0!==d?d:null,f.canvas_=h,f.error_=null,f}return _We(a,l),a.prototype.getError=function(){return this.error_},a.prototype.handleLoad_=function(o){o?(this.error_=o,this.state=3):this.state=2,this.changed()},a.prototype.load=function(){0==this.state&&(this.state=1,this.changed(),this.loader_(this.handleLoad_.bind(this)))},a.prototype.getImage=function(){return this.canvas_},a}(iF);var SWe=function(){var l=function(a,o){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,u){c.__proto__=u}||function(c,u){for(var h in u)Object.prototype.hasOwnProperty.call(u,h)&&(c[h]=u[h])})(a,o)};return function(a,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function c(){this.constructor=a}l(a,o),a.prototype=null===o?Object.create(o):(c.prototype=o.prototype,new c)}}();const wWe=function(l){function a(o){var c=l.call(this,o)||this;return c.vectorRenderer_=new lF(o),c.layerImageRatio_=o.getImageRatio(),c.coordinateToVectorPixelTransform_=[1,0,0,1,0,0],c.renderedPixelToCoordinateTransform_=null,c}return SWe(a,l),a.prototype.disposeInternal=function(){this.vectorRenderer_.dispose(),l.prototype.disposeInternal.call(this)},a.prototype.getFeatures=function(o){if(!this.vectorRenderer_)return new Promise(function(u){return u([])});var c=ts(this.coordinateToVectorPixelTransform_,ts(this.renderedPixelToCoordinateTransform_,o.slice()));return this.vectorRenderer_.getFeatures(c)},a.prototype.handleFontsChanged=function(){this.vectorRenderer_.handleFontsChanged()},a.prototype.prepareFrame=function(o){var c=o.pixelRatio,u=o.viewState,h=u.resolution,d=o.viewHints,f=this.vectorRenderer_,m=o.extent;1!==this.layerImageRatio_&&lN(m=m.slice(0),this.layerImageRatio_);var g=Wr(m)/h,y=bs(m)/h;if(!d[0]&&!d[1]&&!Xv(m)){f.useContainer(null,null,1);var v=f.context,_=Gr({},o,{declutterTree:new JN(9),extent:m,size:[g,y],viewState:Gr({},o.viewState,{rotation:0})}),b=new Nte(m,h,c,v.canvas,function(w){f.prepareFrame(_)&&f.replayGroupChanged&&(f.clipping=!1,f.renderFrame(_,null),f.renderDeclutter(_),w())});b.addEventListener("change",function(){if(2===b.getState()){this.image_=b;var w=b.getResolution(),C=b.getPixelRatio(),E=w*c/C;this.renderedResolution=E,this.coordinateToVectorPixelTransform_=Fa(this.coordinateToVectorPixelTransform_,g/2,y/2,1/E,-1/E,0,-u.center[0],-u.center[1])}}.bind(this)),b.load()}return this.image_&&(this.renderedPixelToCoordinateTransform_=o.pixelToCoordinateTransform.slice()),!!this.image_},a.prototype.preRender=function(){},a.prototype.postRender=function(){},a.prototype.renderDeclutter=function(){},a.prototype.forEachFeatureAtCoordinate=function(o,c,u,h,d){return this.vectorRenderer_?this.vectorRenderer_.forEachFeatureAtCoordinate(o,c,u,h,d):l.prototype.forEachFeatureAtCoordinate.call(this,o,c,u,h,d)},a}($W);var CWe=function(){var l=function(a,o){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,u){c.__proto__=u}||function(c,u){for(var h in u)Object.prototype.hasOwnProperty.call(u,h)&&(c[h]=u[h])})(a,o)};return function(a,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function c(){this.constructor=a}l(a,o),a.prototype=null===o?Object.create(o):(c.prototype=o.prototype,new c)}}();const mw=function(l){function a(o){var c=this,u=o||{},h=Gr({},u);return delete h.imageRatio,(c=l.call(this,h)||this).imageRatio_=void 0!==u.imageRatio?u.imageRatio:1,c}return CWe(a,l),a.prototype.getImageRatio=function(){return this.imageRatio_},a.prototype.createRenderer=function(){return new wWe(this)},a}(s_);var Fte=Ve(505);const kte=JSON.parse('{"type":"FeatureCollection","features":[{"type":"Feature","properties":{"title":"Polygon 1"},"geometry":{"type":"Polygon","coordinates":[[[-178.59375,15.961329081596647],[-166.640625,15.961329081596647],[-166.640625,27.994401411046148],[-178.59375,27.994401411046148],[-178.59375,15.961329081596647]]]}},{"type":"Feature","properties":{"title":"Polygon 2"},"geometry":{"type":"Polygon","coordinates":[[[-179.296875,-1.4061088354351594],[-168.75,-1.4061088354351594],[-168.75,10.487811882056695],[-179.296875,10.487811882056695],[-179.296875,-1.4061088354351594]]]}},{"type":"Feature","properties":{"title":"Polygon 3"},"geometry":{"type":"Polygon","coordinates":[[[-158.203125,5.61598581915534],[-146.25,5.61598581915534],[-146.25,22.59372606392931],[-158.203125,22.59372606392931],[-158.203125,5.61598581915534]]]}},{"type":"Feature","properties":{"title":"Polygon 4"},"geometry":{"type":"Polygon","coordinates":[[[-162.0703125,-13.2399454992863],[-150.82031249999997,-13.2399454992863],[-150.82031249999997,-1.0546279422758742],[-162.0703125,-1.0546279422758742],[-162.0703125,-13.2399454992863]]]}},{"type":"Feature","properties":{"title":"Polygon 5"},"geometry":{"type":"Polygon","coordinates":[[[-142.3828125,-20.632784250388013],[-131.1328125,-20.632784250388013],[-131.1328125,-2.108898659243126],[-142.3828125,-2.108898659243126],[-142.3828125,-20.632784250388013]]]}},{"type":"Feature","properties":{"title":"Polygon 6"},"geometry":{"type":"Polygon","coordinates":[[[-106.171875,44.08758502824516],[-100.8984375,39.90973623453719],[-95.625,42.8115217450979],[-101.25,46.800059446787316],[-106.171875,44.08758502824516]]]}}]}');function dI(l,a){var o=a.slice(0);return ts(l.inversePixelTransform.slice(),o),o}let VV=(()=>{class l{constructor(){this.progressSource=new tt,this.progress$=this.progressSource.asObservable()}progress(o){this.progressSource.next(o)}}return l.\u0275fac=function(o){return new(o||l)},l.\u0275prov=Xe({token:l,factory:l.\u0275fac,providedIn:"root"}),l})(),DWe=(()=>{class l{constructor(o,c,u,h,d){this.layersSvc=o,this.mapStateSvc=c,this.mapSvc=u,this.progressService=h,this.route=d,this.class="content-container",this.subs=[],this.startBbox=null,this.updateLayerOnZoom=f=>{const m=this.mapStateSvc.getMapState().getValue(),v="gridLayer",w=((l,a,o,c,u)=>{const h=[];let d=80;o>1&&(d=40),o>2&&(d=20),o>3&&(d=10),o>4&&(d=6),o>5&&(d=4),o>6&&(d=3),o>7&&(d=2),o>8&&(d=1);const f=.5*d;let m=10;m>10&&(m=10),u=jl(u,f);const g=l[0]+m,y=l[1]+m,w=l[3]-m-y,C=Math.floor((l[2]-m-g)/f),E=Math.floor(w/f);let M=g;for(let x=C;x>0;x--){let R=y;for(let P=E;P>0;P--){const k=M+f,W=R+f,U=[M,R],te=[[U,[M,W],[k,W],[k,R],U]];if(console.log(),lT(u,M,R)&&lT(u,k,W)){const de=new Ch(te).transform("EPSG:4326",c),ye=new u_({geometry:de,column:x,row:P,id:h.length+1});h.push(ye)}R+=f}M+=f}return h})([-180,-90,180,90],0,m.zoom,this.mapSvc.EPSG,m.extent),C=new ds({features:w,wrapX:!1}),E=new mw({source:C});E.set("id",v);const M=this.layersSvc.getLayerById(v);if(M)M.custom_layer=E,this.layersSvc.updateLayer(M,M.filtertype);else{const x=new Qi({id:v,name:"gridLayer",type:"custom",opacity:.3,custom_layer:E});this.layersSvc.addLayer(x,"Layers")}},this.controls={attribution:!0,scaleLine:!0}}ngOnInit(){this.addLayers(),this.subscribeToMapState(),this.subscribeToRoute(),this.startBbox&&this.mapStateSvc.setExtent(this.startBbox)}ngAfterViewInit(){this.mapSvc.map.on("moveend",this.updateLayerOnZoom)}ngOnDestroy(){this.subs.map(o=>o.unsubscribe()),this.mapSvc.map.un("moveend",this.updateLayerOnZoom)}addLayers(){const o=new Uv({visible:!0}),c=new Tk({url:"https://ahocevar.com/geoserver/wms",params:{LAYERS:"topp:states"},serverType:"geoserver"});c.on("imageloadstart",()=>{this.progressService.progress({indeterminate:!0})}),c.on("imageloadend",()=>{this.progressService.progress(null)}),c.on("imageloaderror",()=>{this.progressService.progress(null)});const u=new Qi({id:"event_layer",name:"Image load Layer",type:"custom",custom_layer:new o_({source:c}),visible:!1,bbox:[-133.9453125,18.979025953255267,-60.46875,52.908902047770255]}),h=new Zs({id:"updatable_feature_layer",name:"Updatable feature layer",type:"geojson",data:{type:"FeatureCollection",features:[{type:"Feature",properties:{},geometry:{type:"Polygon",coordinates:[[[-192.48046875,-24.686952411999144],[-88.06640625,-24.686952411999144],[-88.06640625,50.28933925329178],[-192.48046875,50.28933925329178],[-192.48046875,-24.686952411999144]]]}}]},actions:[{action:f=>{h.data=kte,this.layersSvc.updateLayer(h)},icon:"download",title:"Load data"}]});[o,u,h].forEach(f=>this.layersSvc.addLayer(f,"Layers"))}removeLayer(){this.layersSvc.removeLayerOrGroupById("event_layer2")}addLayer(){const o=new tt,c=new tt,u=new Bd({source:new $T({url:"https://geoservice.dlr.de/eoc/land/wms",params:{LAYERS:"GUF28_DLR_v1_Mosaic"}})}),h=m=>{var g=m.context,y=this.mapSvc.map.getSize(),v=.5*y[0],_=dI(m,[v,0]),b=dI(m,[y[0],0]),w=dI(m,[v,y[1]]),C=dI(m,y);g.save(),g.beginPath(),g.moveTo(_[0],_[1]),g.lineTo(w[0],w[1]),g.lineTo(C[0],C[1]),g.lineTo(b[0],b[1]),g.closePath(),g.clip()};u.on("prerender",m=>{h(m)}),u.on("postrender",m=>{(m=>{m.context.restore()})(m)});const f=new Qi({id:"event_layer2",name:"Image load Layer 2",type:"custom",custom_layer:new Js({layers:[u]}),visible:!0,removable:!0,events:{source:[{event:"tileloadstart",listener:m=>{o.next(m)}},{event:"tileloadend",listener:m=>{c.next(m)}}],layer:[{event:"prerender",listener:m=>{h(m)}},{event:"postrender",listener:m=>{h(m)}}]}});o.subscribe(m=>this.progressService.progress({indeterminate:!0})),c.pipe(H_(200)).subscribe(m=>this.progressService.progress(null)),this.layersSvc.addLayer(f,"Layers")}updateSearchParamsHashRouting(o){const c=(0,Fte.Qc)(window.location.href.replace("#/","")),u=(0,Fte.Qc)(window.location.href),h=u.hash.split("?")[1];let d=new URLSearchParams;h&&(d=new URLSearchParams(h)),Object.keys(o).map(g=>{d.set(g,o[g])});const f=decodeURIComponent(`${d}`);return`${u.protocol}//${u.host}${u.pathname||""}#${c.pathname}?${f}`}subscribeToMapState(){const o=this.mapStateSvc.getMapState().subscribe(c=>{if(history.pushState){const u=c.extent.map(d=>d.toFixed(3)),h=this.updateSearchParamsHashRouting({bbox:u.join(","),zoom:c.zoom.toString()});window.history.pushState({path:h},"",h)}});this.subs.push(o)}subscribeToRoute(){const o=this.route.queryParams.pipe(fu()).subscribe(c=>{if(Object.keys(c).length>0&&c.bbox){const u=c.bbox.split(",").map(h=>parseFloat(h));4===u.length&&(this.startBbox=u)}});this.subs.push(o)}}return l.\u0275fac=function(o){return new(o||l)(O(vo),O(Oo),O(Qs),O(VV),O(Gm))},l.\u0275cmp=Qe({type:l,selectors:[["app-route-map3"]],hostVars:2,hostBindings:function(o,c){2&o&&ul(c.class)},features:[Mt([vo,Oo,Qs])],decls:21,vars:10,consts:[[1,"content-area"],["id","olMap",3,"layersSvc","mapState","controls"],[1,"right",3,"clrVerticalNavCollapsible","clr-nav-level"],[1,"layers",3,"clrVerticalNavGroupExpanded"],["shape","layers","clrVerticalNavIcon","","title","layers"],[1,"padding","title-ellipsis"],[3,"layersSvc","mapStateSvc"],["title","Coordinates",1,"layers",3,"clrVerticalNavGroupExpanded"],["shape","compass","clrVerticalNavIcon",""],["title","Test",1,"layers",3,"clrVerticalNavGroupExpanded"],["shape","cog","clrVerticalNavIcon",""],[1,"btn","btn-primary",3,"click"]],template:function(o,c){1&o&&(V(0,"main",0),xe(1,"ukis-map-ol",1),B(),V(2,"clr-vertical-nav",2),V(3,"clr-vertical-nav-group",3),xe(4,"clr-icon",4),Le(5," Layers "),V(6,"clr-vertical-nav-group-children",5),xe(7,"ukis-layer-control",6),B(),B(),V(8,"clr-vertical-nav-group",7),xe(9,"clr-icon",8),Le(10," Coordinates "),V(11,"clr-vertical-nav-group-children",5),xe(12,"ukis-mouse-position"),B(),B(),V(13,"clr-vertical-nav-group",9),xe(14,"clr-icon",10),Le(15," Test "),V(16,"clr-vertical-nav-group-children",5),V(17,"button",11),ze("click",function(){return c.removeLayer()}),Le(18,"remove Layer"),B(),V(19,"button",11),ze("click",function(){return c.addLayer()}),Le(20,"add Layer"),B(),B(),B(),B()),2&o&&(j(1),q("layersSvc",c.layersSvc)("mapState",c.mapStateSvc)("controls",c.controls),j(1),q("clrVerticalNavCollapsible",!0)("clr-nav-level",2),j(1),q("clrVerticalNavGroupExpanded",!0),j(4),q("layersSvc",c.layersSvc)("mapStateSvc",c.mapStateSvc),j(1),q("clrVerticalNavGroupExpanded",!1),j(5),q("clrVerticalNavGroupExpanded",!0))},directives:[Zd,Hh,Vu,jh,Ya,qh,Wh,uf,Ote],styles:[""]}),l})();var fI=34962,Bte=["experimental-webgl","webgl","webkit-3d","moz-webgl"];function GV(l){switch(l){case fI:return Float32Array;case 34963:return Uint32Array;default:return Float32Array}}const zV=function(){function l(a,o){this.array=null,this.type=a,Yn(a===fI||34963===a,62),this.usage=void 0!==o?o:35044}return l.prototype.ofSize=function(a){this.array=new(GV(this.type))(a)},l.prototype.fromArray=function(a){var o=GV(this.type);this.array=o.from?o.from(a):new o(a)},l.prototype.fromArrayBuffer=function(a){this.array=new(GV(this.type))(a)},l.prototype.getType=function(){return this.type},l.prototype.getArray=function(){return this.array},l.prototype.getUsage=function(){return this.usage},l.prototype.getSize=function(){return this.array?this.array.length:0},l}(),Gte=function(){function l(a){this.gl_=a.webGlContext;var o=this.gl_;this.scaleRatio_=a.scaleRatio||1,this.renderTargetTexture_=o.createTexture(),this.renderTargetTextureSize_=null,this.frameBuffer_=o.createFramebuffer();var c=o.createShader(o.VERTEX_SHADER);o.shaderSource(c,a.vertexShader||"\n  precision mediump float;\n  \n  attribute vec2 a_position;\n  varying vec2 v_texCoord;\n  varying vec2 v_screenCoord;\n  \n  uniform vec2 u_screenSize;\n   \n  void main() {\n    v_texCoord = a_position * 0.5 + 0.5;\n    v_screenCoord = v_texCoord * u_screenSize;\n    gl_Position = vec4(a_position, 0.0, 1.0);\n  }\n"),o.compileShader(c);var u=o.createShader(o.FRAGMENT_SHADER);o.shaderSource(u,a.fragmentShader||"\n  precision mediump float;\n   \n  uniform sampler2D u_image;\n   \n  varying vec2 v_texCoord;\n   \n  void main() {\n    gl_FragColor = texture2D(u_image, v_texCoord);\n  }\n"),o.compileShader(u),this.renderTargetProgram_=o.createProgram(),o.attachShader(this.renderTargetProgram_,c),o.attachShader(this.renderTargetProgram_,u),o.linkProgram(this.renderTargetProgram_),this.renderTargetVerticesBuffer_=o.createBuffer(),o.bindBuffer(o.ARRAY_BUFFER,this.renderTargetVerticesBuffer_),o.bufferData(o.ARRAY_BUFFER,new Float32Array([-1,-1,1,-1,-1,1,1,-1,1,1,-1,1]),o.STATIC_DRAW),this.renderTargetAttribLocation_=o.getAttribLocation(this.renderTargetProgram_,"a_position"),this.renderTargetUniformLocation_=o.getUniformLocation(this.renderTargetProgram_,"u_screenSize"),this.renderTargetTextureLocation_=o.getUniformLocation(this.renderTargetProgram_,"u_image"),this.uniforms_=[],a.uniforms&&Object.keys(a.uniforms).forEach(function(d){this.uniforms_.push({value:a.uniforms[d],location:o.getUniformLocation(this.renderTargetProgram_,d)})}.bind(this))}return l.prototype.getGL=function(){return this.gl_},l.prototype.init=function(a){var o=this.getGL(),c=[o.drawingBufferWidth*this.scaleRatio_,o.drawingBufferHeight*this.scaleRatio_];if(o.bindFramebuffer(o.FRAMEBUFFER,this.getFrameBuffer()),o.viewport(0,0,c[0],c[1]),!this.renderTargetTextureSize_||this.renderTargetTextureSize_[0]!==c[0]||this.renderTargetTextureSize_[1]!==c[1]){this.renderTargetTextureSize_=c;var h=o.RGBA,f=o.RGBA,m=o.UNSIGNED_BYTE;o.bindTexture(o.TEXTURE_2D,this.renderTargetTexture_),o.texImage2D(o.TEXTURE_2D,0,h,c[0],c[1],0,f,m,null),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MIN_FILTER,o.LINEAR),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_S,o.CLAMP_TO_EDGE),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_T,o.CLAMP_TO_EDGE),o.framebufferTexture2D(o.FRAMEBUFFER,o.COLOR_ATTACHMENT0,o.TEXTURE_2D,this.renderTargetTexture_,0)}},l.prototype.apply=function(a,o){var c=this.getGL(),u=a.size;c.bindFramebuffer(c.FRAMEBUFFER,o?o.getFrameBuffer():null),c.activeTexture(c.TEXTURE0),c.bindTexture(c.TEXTURE_2D,this.renderTargetTexture_),c.clearColor(0,0,0,0),c.clear(c.COLOR_BUFFER_BIT),c.enable(c.BLEND),c.blendFunc(c.ONE,c.ONE_MINUS_SRC_ALPHA),c.viewport(0,0,c.drawingBufferWidth,c.drawingBufferHeight),c.bindBuffer(c.ARRAY_BUFFER,this.renderTargetVerticesBuffer_),c.useProgram(this.renderTargetProgram_),c.enableVertexAttribArray(this.renderTargetAttribLocation_),c.vertexAttribPointer(this.renderTargetAttribLocation_,2,c.FLOAT,!1,0,0),c.uniform2f(this.renderTargetUniformLocation_,u[0],u[1]),c.uniform1i(this.renderTargetTextureLocation_,0),this.applyUniforms(a),c.drawArrays(c.TRIANGLES,0,6)},l.prototype.getFrameBuffer=function(){return this.frameBuffer_},l.prototype.applyUniforms=function(a){var c,o=this.getGL(),u=1;this.uniforms_.forEach(function(h){if((c="function"==typeof h.value?h.value(a):h.value)instanceof HTMLCanvasElement||c instanceof ImageData)h.texture||(h.texture=o.createTexture()),o.activeTexture(o["TEXTURE"+u]),o.bindTexture(o.TEXTURE_2D,h.texture),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MIN_FILTER,o.LINEAR),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_S,o.CLAMP_TO_EDGE),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_T,o.CLAMP_TO_EDGE),c instanceof ImageData?o.texImage2D(o.TEXTURE_2D,0,o.RGBA,o.RGBA,c.width,c.height,0,o.UNSIGNED_BYTE,new Uint8Array(c.data)):o.texImage2D(o.TEXTURE_2D,0,o.RGBA,o.RGBA,o.UNSIGNED_BYTE,c),o.uniform1i(h.location,u++);else if(Array.isArray(c))switch(c.length){case 2:return void o.uniform2f(h.location,c[0],c[1]);case 3:return void o.uniform3f(h.location,c[0],c[1],c[2]);case 4:return void o.uniform4f(h.location,c[0],c[1],c[2],c[3]);default:return}else"number"==typeof c&&o.uniform1f(h.location,c)})},l}();function HV(l,a){return l[0]=a[0],l[1]=a[1],l[4]=a[2],l[5]=a[3],l[12]=a[4],l[13]=a[5],l}var UWe=function(){var l=function(a,o){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,u){c.__proto__=u}||function(c,u){for(var h in u)Object.prototype.hasOwnProperty.call(u,h)&&(c[h]=u[h])})(a,o)};return function(a,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function c(){this.constructor=a}l(a,o),a.prototype=null===o?Object.create(o):(c.prototype=o.prototype,new c)}}(),zu={UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123,UNSIGNED_INT:5125,FLOAT:5126};function zte(l){switch(l){case zu.UNSIGNED_BYTE:return Uint8Array.BYTES_PER_ELEMENT;case zu.UNSIGNED_SHORT:return Uint16Array.BYTES_PER_ELEMENT;case zu.UNSIGNED_INT:return Uint32Array.BYTES_PER_ELEMENT;case zu.FLOAT:default:return Float32Array.BYTES_PER_ELEMENT}}const HWe=function(l){function a(o){var c=l.call(this)||this,u=o||{};c.boundHandleWebGLContextLost_=c.handleWebGLContextLost.bind(c),c.boundHandleWebGLContextRestored_=c.handleWebGLContextRestored.bind(c),c.canvas_=document.createElement("canvas"),c.canvas_.style.position="absolute",c.canvas_.style.left="0",c.gl_=function(l,a){for(var o=Bte.length,c=0;c<o;++c)try{var u=l.getContext(Bte[c],a);if(u)return u}catch(h){}return null}(c.canvas_);var h=c.getGL();if(c.bufferCache_={},c.extensionCache_={},c.currentProgram_=null,c.canvas_.addEventListener("webglcontextlost",c.boundHandleWebGLContextLost_),c.canvas_.addEventListener("webglcontextrestored",c.boundHandleWebGLContextRestored_),c.offsetRotateMatrix_=[1,0,0,1,0,0],c.offsetScaleMatrix_=[1,0,0,1,0,0],c.tmpMat4_=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],c.uniformLocations_={},c.attribLocations_={},c.uniforms_=[],u.uniforms)for(var d in u.uniforms)c.uniforms_.push({name:d,value:u.uniforms[d]});return c.postProcessPasses_=u.postProcesses?u.postProcesses.map(function(f){return new Gte({webGlContext:h,scaleRatio:f.scaleRatio,vertexShader:f.vertexShader,fragmentShader:f.fragmentShader,uniforms:f.uniforms})}):[new Gte({webGlContext:h})],c.shaderCompileErrors_=null,c.startTime_=Date.now(),c}return UWe(a,l),a.prototype.getExtension=function(o){if(o in this.extensionCache_)return this.extensionCache_[o];var c=this.gl_.getExtension(o);return this.extensionCache_[o]=c,c},a.prototype.bindBuffer=function(o){var c=this.getGL(),u=Dn(o),h=this.bufferCache_[u];if(!h){var d=c.createBuffer();this.bufferCache_[u]=h={buffer:o,webGlBuffer:d}}c.bindBuffer(o.getType(),h.webGlBuffer)},a.prototype.flushBufferData=function(o){var c=this.getGL();this.bindBuffer(o),c.bufferData(o.getType(),o.getArray(),o.getUsage())},a.prototype.deleteBuffer=function(o){var c=this.getGL(),u=Dn(o),h=this.bufferCache_[u];h&&!c.isContextLost()&&c.deleteBuffer(h.webGlBuffer),delete this.bufferCache_[u]},a.prototype.disposeInternal=function(){this.canvas_.removeEventListener("webglcontextlost",this.boundHandleWebGLContextLost_),this.canvas_.removeEventListener("webglcontextrestored",this.boundHandleWebGLContextRestored_);var o=this.gl_.getExtension("WEBGL_lose_context");o&&o.loseContext(),delete this.gl_,delete this.canvas_},a.prototype.prepareDraw=function(o,c){var u=this.getGL(),h=this.getCanvas(),d=o.size,f=o.pixelRatio;h.width=d[0]*f,h.height=d[1]*f,h.style.width=d[0]+"px",h.style.height=d[1]+"px",u.useProgram(this.currentProgram_);for(var m=this.postProcessPasses_.length-1;m>=0;m--)this.postProcessPasses_[m].init(o);u.bindTexture(u.TEXTURE_2D,null),u.clearColor(0,0,0,0),u.clear(u.COLOR_BUFFER_BIT),u.enable(u.BLEND),u.blendFunc(u.ONE,c?u.ZERO:u.ONE_MINUS_SRC_ALPHA),u.useProgram(this.currentProgram_),this.applyFrameState(o),this.applyUniforms(o)},a.prototype.prepareDrawToRenderTarget=function(o,c,u){var h=this.getGL(),d=c.getSize();h.bindFramebuffer(h.FRAMEBUFFER,c.getFramebuffer()),h.viewport(0,0,d[0],d[1]),h.bindTexture(h.TEXTURE_2D,c.getTexture()),h.clearColor(0,0,0,0),h.clear(h.COLOR_BUFFER_BIT),h.enable(h.BLEND),h.blendFunc(h.ONE,u?h.ZERO:h.ONE_MINUS_SRC_ALPHA),h.useProgram(this.currentProgram_),this.applyFrameState(o),this.applyUniforms(o)},a.prototype.drawElements=function(o,c){var u=this.getGL();this.getExtension("OES_element_index_uint"),u.drawElements(u.TRIANGLES,c-o,u.UNSIGNED_INT,4*o)},a.prototype.finalizeDraw=function(o){for(var c=0;c<this.postProcessPasses_.length;c++)this.postProcessPasses_[c].apply(o,this.postProcessPasses_[c+1]||null)},a.prototype.getCanvas=function(){return this.canvas_},a.prototype.getGL=function(){return this.gl_},a.prototype.applyFrameState=function(o){var c=o.size,u=o.viewState.rotation,h=sT(this.offsetScaleMatrix_);PE(h,2/c[0],2/c[1]);var d=sT(this.offsetRotateMatrix_);0!==u&&function(l,a){var o=Math.cos(a),c=Math.sin(a);Hv(l,oT(nN,o,c,-c,o,0,0))}(d,-u),this.setUniformMatrixValue("u_offsetScaleMatrix",HV(this.tmpMat4_,h)),this.setUniformMatrixValue("u_offsetRotateMatrix",HV(this.tmpMat4_,d)),this.setUniformFloatValue("u_time",.001*(Date.now()-this.startTime_)),this.setUniformFloatValue("u_zoom",o.viewState.zoom),this.setUniformFloatValue("u_resolution",o.viewState.resolution)},a.prototype.applyUniforms=function(o){var u,c=this.getGL(),h=0;this.uniforms_.forEach(function(d){if((u="function"==typeof d.value?d.value(o):d.value)instanceof HTMLCanvasElement||u instanceof HTMLImageElement||u instanceof ImageData)d.texture||(d.prevValue=void 0,d.texture=c.createTexture()),c.activeTexture(c["TEXTURE"+h]),c.bindTexture(c.TEXTURE_2D,d.texture),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,c.LINEAR),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,c.CLAMP_TO_EDGE),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,c.CLAMP_TO_EDGE),(!(u instanceof HTMLImageElement)||u.complete)&&d.prevValue!==u&&(d.prevValue=u,c.texImage2D(c.TEXTURE_2D,0,c.RGBA,c.RGBA,c.UNSIGNED_BYTE,u)),c.uniform1i(this.getUniformLocation(d.name),h++);else if(Array.isArray(u)&&6===u.length)this.setUniformMatrixValue(d.name,HV(this.tmpMat4_,u));else if(Array.isArray(u)&&u.length<=4)switch(u.length){case 2:return void c.uniform2f(this.getUniformLocation(d.name),u[0],u[1]);case 3:return void c.uniform3f(this.getUniformLocation(d.name),u[0],u[1],u[2]);case 4:return void c.uniform4f(this.getUniformLocation(d.name),u[0],u[1],u[2],u[3]);default:return}else"number"==typeof u&&c.uniform1f(this.getUniformLocation(d.name),u)}.bind(this))},a.prototype.useProgram=function(o){return o!=this.currentProgram_&&(this.getGL().useProgram(o),this.currentProgram_=o,this.uniformLocations_={},this.attribLocations_={},!0)},a.prototype.compileShader=function(o,c){var u=this.getGL(),h=u.createShader(c);return u.shaderSource(h,o),u.compileShader(h),h},a.prototype.getProgram=function(o,c){var u=this.getGL(),h=this.compileShader(o,u.FRAGMENT_SHADER),d=this.compileShader(c,u.VERTEX_SHADER),f=u.createProgram();if(u.attachShader(f,h),u.attachShader(f,d),u.linkProgram(f),!u.getShaderParameter(h,u.COMPILE_STATUS)){var m="Fragment shader compliation failed: "+u.getShaderInfoLog(h);throw new Error(m)}if(u.deleteShader(h),!u.getShaderParameter(d,u.COMPILE_STATUS))throw m="Vertex shader compilation failed: "+u.getShaderInfoLog(d),new Error(m);if(u.deleteShader(d),!u.getProgramParameter(f,u.LINK_STATUS))throw m="GL program linking failed: "+u.getShaderInfoLog(d),new Error(m);return f},a.prototype.getUniformLocation=function(o){return void 0===this.uniformLocations_[o]&&(this.uniformLocations_[o]=this.getGL().getUniformLocation(this.currentProgram_,o)),this.uniformLocations_[o]},a.prototype.getAttributeLocation=function(o){return void 0===this.attribLocations_[o]&&(this.attribLocations_[o]=this.getGL().getAttribLocation(this.currentProgram_,o)),this.attribLocations_[o]},a.prototype.makeProjectionTransform=function(o,c){var u=o.size,h=o.viewState.rotation,d=o.viewState.resolution,f=o.viewState.center;return sT(c),Fa(c,0,0,2/(d*u[0]),2/(d*u[1]),-h,-f[0],-f[1]),c},a.prototype.setUniformFloatValue=function(o,c){this.getGL().uniform1f(this.getUniformLocation(o),c)},a.prototype.setUniformMatrixValue=function(o,c){this.getGL().uniformMatrix4fv(this.getUniformLocation(o),!1,c)},a.prototype.enableAttributeArray_=function(o,c,u,h,d){var f=this.getAttributeLocation(o);f<0||(this.getGL().enableVertexAttribArray(f),this.getGL().vertexAttribPointer(f,c,u,!1,h,d))},a.prototype.enableAttributes=function(o){for(var c=function(l){for(var a=0,o=0;o<l.length;o++){var c=l[o];a+=c.size*zte(c.type)}return a}(o),u=0,h=0;h<o.length;h++){var d=o[h];this.enableAttributeArray_(d.name,d.size,d.type||5126,c,u),u+=d.size*zte(d.type)}},a.prototype.handleWebGLContextLost=function(){$v(this.bufferCache_),this.currentProgram_=null},a.prototype.handleWebGLContextRestored=function(){},a.prototype.createTexture=function(o,c,u){var h=this.getGL(),d=u||h.createTexture(),m=h.RGBA,y=h.RGBA,v=h.UNSIGNED_BYTE;return h.bindTexture(h.TEXTURE_2D,d),c?h.texImage2D(h.TEXTURE_2D,0,m,y,v,c):h.texImage2D(h.TEXTURE_2D,0,m,o[0],o[1],0,y,v,null),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MIN_FILTER,h.LINEAR),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_WRAP_S,h.CLAMP_TO_EDGE),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_WRAP_T,h.CLAMP_TO_EDGE),d},a}(DE);var jWe=function(){var l=function(a,o){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,u){c.__proto__=u}||function(c,u){for(var h in u)Object.prototype.hasOwnProperty.call(u,h)&&(c[h]=u[h])})(a,o)};return function(a,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function c(){this.constructor=a}l(a,o),a.prototype=null===o?Object.create(o):(c.prototype=o.prototype,new c)}}();function XWe(l,a){var o=a||[],c=256,u=255;return o[0]=Math.floor(l/c/c/c)/u,o[1]=Math.floor(l/c/c)%c/u,o[2]=Math.floor(l/c)%c/u,o[3]=l%c/u,o}const YWe=function(l){function a(o,c){var u=l.call(this,o)||this,h=c||{};return u.helper=new HWe({postProcesses:h.postProcesses,uniforms:h.uniforms}),void 0!==h.className&&(u.helper.getCanvas().className=h.className),u}return jWe(a,l),a.prototype.disposeInternal=function(){this.helper.dispose(),delete this.helper,l.prototype.disposeInternal.call(this)},a.prototype.dispatchRenderEvent_=function(o,c){var u=this.getLayer();if(u.hasListener(o)){var h=new mN(o,null,c,null);u.dispatchEvent(h)}},a.prototype.preRender=function(o){this.dispatchRenderEvent_("prerender",o)},a.prototype.postRender=function(o){this.dispatchRenderEvent_("postrender",o)},a}(wT);var Yh=new Uint8Array(4);const KWe=function(){function l(a,o){this.helper_=a;var c=a.getGL();this.texture_=c.createTexture(),this.framebuffer_=c.createFramebuffer(),this.size_=o||[1,1],this.data_=new Uint8Array(0),this.dataCacheDirty_=!0,this.updateSize_()}return l.prototype.setSize=function(a){Wm(a,this.size_)||(this.size_[0]=a[0],this.size_[1]=a[1],this.updateSize_())},l.prototype.getSize=function(){return this.size_},l.prototype.clearCachedData=function(){this.dataCacheDirty_=!0},l.prototype.readAll=function(){if(this.dataCacheDirty_){var a=this.size_,o=this.helper_.getGL();o.bindFramebuffer(o.FRAMEBUFFER,this.framebuffer_),o.readPixels(0,0,a[0],a[1],o.RGBA,o.UNSIGNED_BYTE,this.data_),this.dataCacheDirty_=!1}return this.data_},l.prototype.readPixel=function(a,o){if(a<0||o<0||a>this.size_[0]||o>=this.size_[1])return Yh[0]=0,Yh[1]=0,Yh[2]=0,Yh[3]=0,Yh;this.readAll();var c=Math.floor(a)+(this.size_[1]-Math.floor(o)-1)*this.size_[0];return Yh[0]=this.data_[4*c],Yh[1]=this.data_[4*c+1],Yh[2]=this.data_[4*c+2],Yh[3]=this.data_[4*c+3],Yh},l.prototype.getTexture=function(){return this.texture_},l.prototype.getFramebuffer=function(){return this.framebuffer_},l.prototype.updateSize_=function(){var a=this.size_,o=this.helper_.getGL();this.texture_=this.helper_.createTexture(a,null,this.texture_),o.bindFramebuffer(o.FRAMEBUFFER,this.framebuffer_),o.viewport(0,0,a[0],a[1]),o.framebufferTexture2D(o.FRAMEBUFFER,o.COLOR_ATTACHMENT0,o.TEXTURE_2D,this.texture_,0),this.data_=new Uint8Array(a[0]*a[1]*4)},l}();var QWe=new Blob(['var e="function"==typeof Object.assign?Object.assign:function(e,n){if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),r=1,o=arguments.length;r<o;++r){var i=arguments[r];if(null!=i)for(var f in i)i.hasOwnProperty(f)&&(t[f]=i[f])}return t},n="GENERATE_BUFFERS",t=[],r={vertexPosition:0,indexPosition:0};function o(e,n,t,r,o){e[n+0]=t,e[n+1]=r,e[n+2]=o}function i(e,n,i,f,s,u){var a=3+s,l=e[n+0],v=e[n+1],c=t;c.length=s;for(var g=0;g<c.length;g++)c[g]=e[n+2+g];var b=u?u.vertexPosition:0,h=u?u.indexPosition:0,d=b/a;return o(i,b,l,v,0),c.length&&i.set(c,b+3),o(i,b+=a,l,v,1),c.length&&i.set(c,b+3),o(i,b+=a,l,v,2),c.length&&i.set(c,b+3),o(i,b+=a,l,v,3),c.length&&i.set(c,b+3),b+=a,f[h++]=d,f[h++]=d+1,f[h++]=d+3,f[h++]=d+1,f[h++]=d+2,f[h++]=d+3,r.vertexPosition=b,r.indexPosition=h,r}var f=self;f.onmessage=function(t){var r=t.data;if(r.type===n){for(var o=r.customAttributesCount,s=2+o,u=new Float32Array(r.renderInstructions),a=u.length/s,l=4*a*(o+3),v=new Uint32Array(6*a),c=new Float32Array(l),g=null,b=0;b<u.length;b+=s)g=i(u,b,c,v,o,g);var h=e({vertexBuffer:c.buffer,indexBuffer:v.buffer,renderInstructions:u.buffer},r);f.postMessage(h,[c.buffer,v.buffer,u.buffer])}};'],{type:"application/javascript"}),eqe=URL.createObjectURL(QWe),nqe=function(){var l=function(a,o){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,u){c.__proto__=u}||function(c,u){for(var h in u)Object.prototype.hasOwnProperty.call(u,h)&&(c[h]=u[h])})(a,o)};return function(a,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function c(){this.constructor=a}l(a,o),a.prototype=null===o?Object.create(o):(c.prototype=o.prototype,new c)}}();const iqe=function(l){function a(o,c){var u=this,h=c.uniforms||{},d=[1,0,0,1,0,0];h.u_projectionMatrix=d,(u=l.call(this,o,{className:c.className,uniforms:h,postProcesses:c.postProcesses})||this).sourceRevision_=-1,u.verticesBuffer_=new zV(fI,35048),u.hitVerticesBuffer_=new zV(fI,35048),u.indicesBuffer_=new zV(34963,35048),u.program_=u.helper.getProgram(c.fragmentShader,c.vertexShader),u.hitDetectionEnabled_=!(!c.hitFragmentShader||!c.hitVertexShader),u.hitProgram_=u.hitDetectionEnabled_&&u.helper.getProgram(c.hitFragmentShader,c.hitVertexShader);var f=c.attributes?c.attributes.map(function(g){return{name:"a_"+g.name,size:1,type:zu.FLOAT}}):[];u.attributes=[{name:"a_position",size:2,type:zu.FLOAT},{name:"a_index",size:1,type:zu.FLOAT}].concat(f),u.hitDetectionAttributes=[{name:"a_position",size:2,type:zu.FLOAT},{name:"a_index",size:1,type:zu.FLOAT},{name:"a_hitColor",size:4,type:zu.FLOAT},{name:"a_featureUid",size:1,type:zu.FLOAT}].concat(f),u.customAttributes=c.attributes?c.attributes:[],u.previousExtent_=[1/0,1/0,-1/0,-1/0],u.currentTransform_=d,u.renderTransform_=[1,0,0,1,0,0],u.invertRenderTransform_=[1,0,0,1,0,0],u.renderInstructions_=new Float32Array(0),u.hitRenderInstructions_=new Float32Array(0),u.hitRenderTarget_=u.hitDetectionEnabled_&&new KWe(u.helper),u.worker_=new Worker(eqe),u.worker_.addEventListener("message",function(g){var y=g.data;if("GENERATE_BUFFERS"===y.type){var v=y.projectionTransform;y.hitDetection?(this.hitVerticesBuffer_.fromArrayBuffer(y.vertexBuffer),this.helper.flushBufferData(this.hitVerticesBuffer_)):(this.verticesBuffer_.fromArrayBuffer(y.vertexBuffer),this.helper.flushBufferData(this.verticesBuffer_)),this.indicesBuffer_.fromArrayBuffer(y.indexBuffer),this.helper.flushBufferData(this.indicesBuffer_),this.renderTransform_=v,jv(this.invertRenderTransform_,this.renderTransform_),y.hitDetection?this.hitRenderInstructions_=new Float32Array(g.data.renderInstructions):this.renderInstructions_=new Float32Array(g.data.renderInstructions),this.getLayer().changed()}}.bind(u)),u.featureCache_={},u.featureCount_=0;var m=u.getLayer().getSource();return u.sourceListenKeys_=[Sr(m,"addfeature",u.handleSourceFeatureAdded_,u),Sr(m,"changefeature",u.handleSourceFeatureChanged_,u),Sr(m,"removefeature",u.handleSourceFeatureDelete_,u),Sr(m,"clear",u.handleSourceFeatureClear_,u)],m.forEachFeature(function(g){this.featureCache_[Dn(g)]={feature:g,properties:g.getProperties(),geometry:g.getGeometry()},this.featureCount_++}.bind(u)),u}return nqe(a,l),a.prototype.handleSourceFeatureAdded_=function(o){var c=o.feature;this.featureCache_[Dn(c)]={feature:c,properties:c.getProperties(),geometry:c.getGeometry()},this.featureCount_++},a.prototype.handleSourceFeatureChanged_=function(o){var c=o.feature;this.featureCache_[Dn(c)]={feature:c,properties:c.getProperties(),geometry:c.getGeometry()}},a.prototype.handleSourceFeatureDelete_=function(o){delete this.featureCache_[Dn(o.feature)],this.featureCount_--},a.prototype.handleSourceFeatureClear_=function(){this.featureCache_={},this.featureCount_=0},a.prototype.renderFrame=function(o){this.preRender(o);var c=this.indicesBuffer_.getSize();this.helper.drawElements(0,c),this.helper.finalizeDraw(o);var u=this.helper.getCanvas(),d=o.layerStatesArray[o.layerIndex].opacity;return d!==parseFloat(u.style.opacity)&&(u.style.opacity=String(d)),this.hitDetectionEnabled_&&(this.renderHitDetection(o),this.hitRenderTarget_.clearCachedData()),this.postRender(o),u},a.prototype.prepareFrame=function(o){var c=this.getLayer(),u=c.getSource(),h=o.viewState,d=!o.viewHints[0]&&!o.viewHints[1],f=!vh(this.previousExtent_,o.extent),m=this.sourceRevision_<u.getRevision();if(m&&(this.sourceRevision_=u.getRevision()),d&&(f||m)){var g=h.projection,y=h.resolution,v=c instanceof s_?c.getRenderBuffer():0,_=jl(o.extent,v*y);u.loadFeatures(_,y,g),this.rebuildBuffers_(o),this.previousExtent_=o.extent.slice()}return this.helper.makeProjectionTransform(o,this.currentTransform_),Hv(this.currentTransform_,this.invertRenderTransform_),this.helper.useProgram(this.program_),this.helper.prepareDraw(o),this.helper.bindBuffer(this.verticesBuffer_),this.helper.bindBuffer(this.indicesBuffer_),this.helper.enableAttributes(this.attributes),!0},a.prototype.rebuildBuffers_=function(o){var c=[1,0,0,1,0,0];this.helper.makeProjectionTransform(o,c);var u=(2+this.customAttributes.length)*this.featureCount_;if((!this.renderInstructions_||this.renderInstructions_.length!==u)&&(this.renderInstructions_=new Float32Array(u)),this.hitDetectionEnabled_){var h=(7+this.customAttributes.length)*this.featureCount_;(!this.hitRenderInstructions_||this.hitRenderInstructions_.length!==h)&&(this.hitRenderInstructions_=new Float32Array(h))}var d,f,_,m=[],g=[],y=0,v=0;for(var b in this.featureCache_)if((f=(d=this.featureCache_[b]).geometry)&&"Point"===f.getType()){m[0]=f.getFlatCoordinates()[0],m[1]=f.getFlatCoordinates()[1],ts(c,m),_=XWe(v+6,g),this.renderInstructions_[y++]=m[0],this.renderInstructions_[y++]=m[1],this.hitDetectionEnabled_&&(this.hitRenderInstructions_[v++]=m[0],this.hitRenderInstructions_[v++]=m[1],this.hitRenderInstructions_[v++]=_[0],this.hitRenderInstructions_[v++]=_[1],this.hitRenderInstructions_[v++]=_[2],this.hitRenderInstructions_[v++]=_[3],this.hitRenderInstructions_[v++]=Number(b));for(var w=void 0,C=0;C<this.customAttributes.length;C++)w=this.customAttributes[C].callback(d.feature,d.properties),this.renderInstructions_[y++]=w,this.hitDetectionEnabled_&&(this.hitRenderInstructions_[v++]=w)}var E={type:"GENERATE_BUFFERS",renderInstructions:this.renderInstructions_.buffer,customAttributesCount:this.customAttributes.length};if(E.projectionTransform=c,this.worker_.postMessage(E,[this.renderInstructions_.buffer]),this.renderInstructions_=null,this.hitDetectionEnabled_){var M={type:"GENERATE_BUFFERS",renderInstructions:this.hitRenderInstructions_.buffer,customAttributesCount:5+this.customAttributes.length};M.projectionTransform=c,M.hitDetection=!0,this.worker_.postMessage(M,[this.hitRenderInstructions_.buffer]),this.hitRenderInstructions_=null}},a.prototype.forEachFeatureAtCoordinate=function(o,c,u,h,d){if(Yn(this.hitDetectionEnabled_,66),this.hitRenderInstructions_){var f=ts(c.coordinateToPixelTransform,o.slice()),m=this.hitRenderTarget_.readPixel(f[0]/2,f[1]/2),y=function(l){var a=0,o=256,c=255;return a+=Math.round(l[0]*o*o*o*c),a+=Math.round(l[1]*o*o*c),(a+=Math.round(l[2]*o*c))+Math.round(l[3]*c)}([m[0]/255,m[1]/255,m[2]/255,m[3]/255]),_=Math.floor(this.hitRenderInstructions_[y]).toString(),w=this.getLayer().getSource().getFeatureByUid(_);if(w)return h(w,this.getLayer(),null)}},a.prototype.renderHitDetection=function(o){if(this.hitVerticesBuffer_.getSize()){this.hitRenderTarget_.setSize([Math.floor(o.size[0]/2),Math.floor(o.size[1]/2)]),this.helper.useProgram(this.hitProgram_),this.helper.prepareDrawToRenderTarget(o,this.hitRenderTarget_,!0),this.helper.bindBuffer(this.hitVerticesBuffer_),this.helper.bindBuffer(this.indicesBuffer_),this.helper.enableAttributes(this.hitDetectionAttributes);var c=this.indicesBuffer_.getSize();this.helper.drawElements(0,c)}},a.prototype.disposeInternal=function(){this.worker_.terminate(),this.layer_=null,this.sourceListenKeys_.forEach(function(o){Ii(o)}),this.sourceListenKeys_=null,l.prototype.disposeInternal.call(this)},a}(YWe);var sqe=function(){var l=function(a,o){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,u){c.__proto__=u}||function(c,u){for(var h in u)Object.prototype.hasOwnProperty.call(u,h)&&(c[h]=u[h])})(a,o)};return function(a,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function c(){this.constructor=a}l(a,o),a.prototype=null===o?Object.create(o):(c.prototype=o.prototype,new c)}}(),oqe=["#00f","#0ff","#0f0","#ff0","#f00"];const cqe=function(l){function a(o){var c=this,u=o||{},h=Gr({},u);delete h.gradient,delete h.radius,delete h.blur,delete h.weight,(c=l.call(this,h)||this).gradient_=null,c.addChangeListener("gradient",c.handleGradientChanged_),c.setGradient(u.gradient?u.gradient:oqe),c.setBlur(void 0!==u.blur?u.blur:15),c.setRadius(void 0!==u.radius?u.radius:8);var d=u.weight?u.weight:"weight";return c.weightFunction_="string"==typeof d?function(f){return f.get(d)}:d,c.setRenderOrder(null),c}return sqe(a,l),a.prototype.getBlur=function(){return this.get("blur")},a.prototype.getGradient=function(){return this.get("gradient")},a.prototype.getRadius=function(){return this.get("radius")},a.prototype.handleGradientChanged_=function(){this.gradient_=function(l){for(var c=Va(1,256),u=c.createLinearGradient(0,0,1,256),h=1/(l.length-1),d=0,f=l.length;d<f;++d)u.addColorStop(d*h,l[d]);return c.fillStyle=u,c.fillRect(0,0,1,256),c.canvas}(this.getGradient())},a.prototype.setBlur=function(o){this.set("blur",o)},a.prototype.setGradient=function(o){this.set("gradient",o)},a.prototype.setRadius=function(o){this.set("radius",o)},a.prototype.createRenderer=function(){return new iqe(this,{className:this.getClassName(),attributes:[{name:"weight",callback:function(o){var c=this.weightFunction_(o);return void 0!==c?br(c,0,1):1}.bind(this)}],vertexShader:"\n        precision mediump float;\n        uniform mat4 u_projectionMatrix;\n        uniform mat4 u_offsetScaleMatrix;\n        uniform float u_size;\n        attribute vec2 a_position;\n        attribute float a_index;\n        attribute float a_weight;\n\n        varying vec2 v_texCoord;\n        varying float v_weight;\n\n        void main(void) {\n          mat4 offsetMatrix = u_offsetScaleMatrix;\n          float offsetX = a_index == 0.0 || a_index == 3.0 ? -u_size / 2.0 : u_size / 2.0;\n          float offsetY = a_index == 0.0 || a_index == 1.0 ? -u_size / 2.0 : u_size / 2.0;\n          vec4 offsets = offsetMatrix * vec4(offsetX, offsetY, 0.0, 0.0);\n          gl_Position = u_projectionMatrix * vec4(a_position, 0.0, 1.0) + offsets;\n          float u = a_index == 0.0 || a_index == 3.0 ? 0.0 : 1.0;\n          float v = a_index == 0.0 || a_index == 1.0 ? 0.0 : 1.0;\n          v_texCoord = vec2(u, v);\n          v_weight = a_weight;\n        }",fragmentShader:"\n        precision mediump float;\n        uniform float u_blurSlope;\n\n        varying vec2 v_texCoord;\n        varying float v_weight;\n\n        void main(void) {\n          vec2 texCoord = v_texCoord * 2.0 - vec2(1.0, 1.0);\n          float sqRadius = texCoord.x * texCoord.x + texCoord.y * texCoord.y;\n          float value = (1.0 - sqrt(sqRadius)) * u_blurSlope;\n          float alpha = smoothstep(0.0, 1.0, value) * v_weight;\n          gl_FragColor = vec4(alpha, alpha, alpha, alpha);\n        }",hitVertexShader:"\n        precision mediump float;\n        uniform mat4 u_projectionMatrix;\n        uniform mat4 u_offsetScaleMatrix;\n        uniform float u_size;\n        attribute vec2 a_position;\n        attribute float a_index;\n        attribute float a_weight;\n        attribute vec4 a_hitColor;\n\n        varying vec2 v_texCoord;\n        varying float v_weight;\n        varying vec4 v_hitColor;\n\n        void main(void) {\n          mat4 offsetMatrix = u_offsetScaleMatrix;\n          float offsetX = a_index == 0.0 || a_index == 3.0 ? -u_size / 2.0 : u_size / 2.0;\n          float offsetY = a_index == 0.0 || a_index == 1.0 ? -u_size / 2.0 : u_size / 2.0;\n          vec4 offsets = offsetMatrix * vec4(offsetX, offsetY, 0.0, 0.0);\n          gl_Position = u_projectionMatrix * vec4(a_position, 0.0, 1.0) + offsets;\n          float u = a_index == 0.0 || a_index == 3.0 ? 0.0 : 1.0;\n          float v = a_index == 0.0 || a_index == 1.0 ? 0.0 : 1.0;\n          v_texCoord = vec2(u, v);\n          v_hitColor = a_hitColor;\n          v_weight = a_weight;\n        }",hitFragmentShader:"\n        precision mediump float;\n        uniform float u_blurSlope;\n\n        varying vec2 v_texCoord;\n        varying float v_weight;\n        varying vec4 v_hitColor;\n\n        void main(void) {\n          vec2 texCoord = v_texCoord * 2.0 - vec2(1.0, 1.0);\n          float sqRadius = texCoord.x * texCoord.x + texCoord.y * texCoord.y;\n          float value = (1.0 - sqrt(sqRadius)) * u_blurSlope;\n          float alpha = smoothstep(0.0, 1.0, value) * v_weight;\n          if (alpha < 0.05) {\n            discard;\n          }\n\n          gl_FragColor = v_hitColor;\n        }",uniforms:{u_size:function(){return 2*(this.get("radius")+this.get("blur"))}.bind(this),u_blurSlope:function(){return this.get("radius")/Math.max(1,this.get("blur"))}.bind(this)},postProcesses:[{fragmentShader:"\n            precision mediump float;\n\n            uniform sampler2D u_image;\n            uniform sampler2D u_gradientTexture;\n\n            varying vec2 v_texCoord;\n\n            void main() {\n              vec4 color = texture2D(u_image, v_texCoord);\n              gl_FragColor.a = color.a;\n              gl_FragColor.rgb = texture2D(u_gradientTexture, vec2(0.5, color.a)).rgb;\n              gl_FragColor.rgb *= gl_FragColor.a;\n            }",uniforms:{u_gradientTexture:function(){return this.gradient_}.bind(this)}}]})},a.prototype.renderDeclutter=function(){},a}(Tu);var uqe=function(){var l=function(a,o){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,u){c.__proto__=u}||function(c,u){for(var h in u)Object.prototype.hasOwnProperty.call(u,h)&&(c[h]=u[h])})(a,o)};return function(a,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function c(){this.constructor=a}l(a,o),a.prototype=null===o?Object.create(o):(c.prototype=o.prototype,new c)}}();const Hte=function(l){function a(o){var c=this,u=void 0!==o.crossOrigin?o.crossOrigin:null,h=void 0!==o.imageLoadFunction?o.imageLoadFunction:c$;return(c=l.call(this,{attributions:o.attributions,imageSmoothing:o.imageSmoothing,projection:Bn(o.projection)})||this).url_=o.url,c.imageExtent_=o.imageExtent,c.image_=new oq(c.imageExtent_,void 0,1,c.url_,u,h),c.imageSize_=o.imageSize?o.imageSize:null,c.image_.addEventListener("change",c.handleImageChange.bind(c)),c}return uqe(a,l),a.prototype.getImageExtent=function(){return this.imageExtent_},a.prototype.getImageInternal=function(o,c,u,h){return As(o,this.image_.getExtent())?this.image_:null},a.prototype.getUrl=function(){return this.url_},a.prototype.handleImageChange=function(o){if(2==this.image_.getState()){var c=this.image_.getExtent(),u=this.image_.getImage(),h=void 0,d=void 0;this.imageSize_?(h=this.imageSize_[0],d=this.imageSize_[1]):(h=u.width,d=u.height);var f=Wr(c),m=bs(c),g=f/h,y=m/d,v=h,_=d;if(g>y?v=Math.round(f/y):_=Math.round(m/g),v!==h||_!==d){var b=Va(v,_);Gr(b,this.getContextOptions());var w=b.canvas;b.drawImage(u,0,0,h,d,0,0,w.width,w.height),this.image_.setImage(w)}}l.prototype.handleImageChange.call(this,o)},a}(sD);var dqe=function(){var l=function(a,o){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,u){c.__proto__=u}||function(c,u){for(var h in u)Object.prototype.hasOwnProperty.call(u,h)&&(c[h]=u[h])})(a,o)};return function(a,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function c(){this.constructor=a}l(a,o),a.prototype=null===o?Object.create(o):(c.prototype=o.prototype,new c)}}();const pqe=function(l){function a(o){var c=this,u=o||{};return(c=l.call(this,{attributions:u.attributions,imageSmoothing:u.imageSmoothing,projection:u.projection,resolutions:u.resolutions,state:u.state})||this).canvasFunction_=u.canvasFunction,c.canvas_=null,c.renderedRevision_=0,c.ratio_=void 0!==u.ratio?u.ratio:1.5,c}return dqe(a,l),a.prototype.getImageInternal=function(o,c,u,h){c=this.findNearestResolution(c);var d=this.canvas_;if(d&&this.renderedRevision_==this.getRevision()&&d.getResolution()==c&&d.getPixelRatio()==u&&pl(d.getExtent(),o))return d;lN(o=o.slice(),this.ratio_);var f=Wr(o)/c,m=bs(o)/c,y=this.canvasFunction_.call(this,o,c,u,[f*u,m*u],h);return y&&(d=new Nte(o,c,u,y)),this.canvas_=d,this.renderedRevision_=this.getRevision(),d},a}(sD);var mqe=function(){var l=function(a,o){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,u){c.__proto__=u}||function(c,u){for(var h in u)Object.prototype.hasOwnProperty.call(u,h)&&(c[h]=u[h])})(a,o)};return function(a,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function c(){this.constructor=a}l(a,o),a.prototype=null===o?Object.create(o):(c.prototype=o.prototype,new c)}}(),gqe=function(l){function a(o){var c=l.call(this)||this,u=o||{};return c.layerName_=u.layerName,c.layers_=u.layers?u.layers:null,c.dataProjection=Bn(u.dataProjection?u.dataProjection:"EPSG:4326"),c}return mqe(a,l),a.prototype.readFeaturesFromObject=function(o,c){if("Topology"==o.type){var u=o,h=void 0,d=null,f=null;u.transform&&(d=(h=u.transform).scale,f=h.translate);var m=u.arcs;h&&function(l,a,o){for(var c=0,u=l.length;c<u;++c)Eqe(l[c],a,o)}(m,d,f);var g=[],y=u.objects,v=this.layerName_;for(var b in y)this.layers_&&-1==this.layers_.indexOf(b)||("GeometryCollection"===y[b].type?g.push.apply(g,Cqe(y[b],m,d,f,v,b,c)):g.push(jte(y[b],m,d,f,v,b,c)));return g}return[]},a.prototype.readProjectionFromObject=function(o){return this.dataProjection},a}(Dq),yqe={Point:function(l,a,o){var c=l.coordinates;return a&&o&&qV(c,a,o),new wh(c)},LineString:function(l,a){var o=yI(l.arcs,a);return new zd(o)},Polygon:function(l,a){for(var o=[],c=0,u=l.arcs.length;c<u;++c)o[c]=yI(l.arcs[c],a);return new Ch(o)},MultiPoint:function(l,a,o){var c=l.coordinates;if(a&&o)for(var u=0,h=c.length;u<h;++u)qV(c[u],a,o);return new AT(c)},MultiLineString:function(l,a){for(var o=[],c=0,u=l.arcs.length;c<u;++c)o[c]=yI(l.arcs[c],a);return new DT(o)},MultiPolygon:function(l,a){for(var o=[],c=0,u=l.arcs.length;c<u;++c){for(var h=l.arcs[c],d=[],f=0,m=h.length;f<m;++f)d[f]=yI(h[f],a);o[c]=d}return new TM(o)}};function yI(l,a){for(var c,u,o=[],h=0,d=l.length;h<d;++h)c=l[h],h>0&&o.pop(),u=c>=0?a[c]:a[~c].slice().reverse(),o.push.apply(o,u);for(var f=0,m=o.length;f<m;++f)o[f]=o[f].slice();return o}function Cqe(l,a,o,c,u,h,d){for(var f=l.geometries,m=[],g=0,y=f.length;g<y;++g)m[g]=jte(f[g],a,o,c,u,h,d);return m}function jte(l,a,o,c,u,h,d){var f=null,m=l.type;if(m){var g=yqe[m];f=h_(f="Point"===m||"MultiPoint"===m?g(l,o,c):g(l,a),!1,d)}var y=new u_({geometry:f});void 0!==l.id&&y.setId(l.id);var v=l.properties;return u&&(v||(v={}),v[u]=h),v&&y.setProperties(v,!0),y}function Eqe(l,a,o){for(var c=0,u=0,h=0,d=l.length;h<d;++h){var f=l[h];u+=f[1],f[0]=c+=f[0],f[1]=u,qV(f,a,o)}}function qV(l,a,o){l[0]=l[0]*a[0]+o[0],l[1]=l[1]*a[1]+o[1]}const Mqe=gqe;let Dqe=(()=>{class l{constructor(){this.privValue=1,this.valueChange=new pt}set value(o){this.privValue=o,this.layer.custom_layer&&this.layer.custom_layer.setRadius(o)}get value(){return this.privValue}changeValue(o){const c=parseInt(o.target.value,10);this.value=c,this.valueChange.emit(c),this.layer.custom_layer&&this.layer.custom_layer.setRadius(c)}}return l.\u0275fac=function(o){return new(o||l)},l.\u0275cmp=Qe({type:l,selectors:[["app-example-layer-action"]],inputs:{layer:"layer",value:"value"},outputs:{valueChange:"valueChange"},decls:6,vars:2,consts:[[1,"heatmap-range"],["type","range","clrRange","","name","two","min","1","max","50","step","1",1,"ukis-range-input",3,"value","change"]],template:function(o,c){1&o&&(V(0,"clr-range-container",0),V(1,"label"),Le(2,"Heatmap radius:"),B(),V(3,"input",1),ze("change",function(h){return c.changeValue(h)}),B(),V(4,"clr-control-helper"),Le(5),B(),B()),2&o&&(j(3),q("value",c.value),j(2),Un(" "+c.value))},directives:[CJ,xi,K6e,_A],styles:[".heatmap-range[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:400}"]}),l})();const Wte={type:"FeatureCollection",features:[{type:"Feature",properties:{height:2},geometry:{type:"Polygon",coordinates:[[[11.539764404296875,48.17707562779612,2],[11.53289794921875,48.13126755117026],[11.51641845703125,48.12301775410865],[11.517791748046875,48.10926514749487],[11.56036376953125,48.11384975871469],[11.564483642578125,48.12301775410865],[11.58233642578125,48.130350972491556],[11.592292785644531,48.14043243818811],[11.594696044921875,48.14730502988628],[11.602935791015625,48.15715413998257],[11.595039367675781,48.1640244926387],[11.59950256347656,48.17226770127996],[11.587142944335938,48.177533502046636],[11.572036743164062,48.177533502046636],[11.539764404296875,48.17707562779612]]]}},{type:"Feature",properties:{height:1},geometry:{type:"Polygon",coordinates:[[[11.605682373046875,48.156238023440835],[11.596412658691406,48.147534100428686],[11.59332275390625,48.13699579726703],[11.583709716796875,48.12851776605501],[11.564826965332031,48.121413473016034],[11.561737060546875,48.11247441829591],[11.575126647949217,48.11155750423242],[11.581993103027344,48.10490938797694],[11.614608764648438,48.11178673428214],[11.620101928710938,48.12462198509838],[11.614952087402344,48.12920522613733],[11.614265441894531,48.13905780942574],[11.61529541015625,48.15165719536032],[11.605682373046875,48.156238023440835]]]}},{type:"Feature",properties:{height:3},geometry:{type:"Polygon",coordinates:[[[11.516075134277344,48.12347611093252],[11.532554626464844,48.131496693283744],[11.538734436035156,48.176388808753124],[11.52191162109375,48.175701980509444],[11.511268615722656,48.17249666038475],[11.507148742675781,48.16379549570767],[11.492729187011719,48.165398452755674],[11.486892700195312,48.16379549570767],[11.458740234375,48.164482483433744],[11.457366943359375,48.15188624647704],[11.455307006835938,48.148221305921446],[11.436767578124998,48.133329793382636],[11.430244445800781,48.12874692043826],[11.443977355957031,48.12828861064926],[11.45050048828125,48.12553866602599],[11.4862060546875,48.124392812310205],[11.503028869628904,48.12553866602599],[11.516075134277344,48.12347611093252]]]}},{type:"Feature",properties:{height:0},geometry:{type:"Polygon",coordinates:[[[11.517448425292969,48.10972362702285],[11.487579345703125,48.095738161288885],[11.488265991210938,48.08381312049231],[11.485176086425781,48.075785093732456],[11.487922668457031,48.07486752519069],[11.493759155273438,48.07693203139914],[11.506805419921875,48.0762438718672],[11.517448425292969,48.06890293081563],[11.536331176757812,48.068214663899795],[11.538734436035156,48.07349114169717],[11.540107727050781,48.08427182703979],[11.548004150390625,48.09367440979962],[11.549720764160154,48.10559716402152],[11.559333801269531,48.11407897853892],[11.517448425292969,48.10972362702285]]]}}]},XV={type:"FeatureCollection",features:[{type:"Feature",properties:{pid:1},geometry:{type:"Point",coordinates:[10.9423828125,49.001843917978526]}},{type:"Feature",properties:{pid:2},geometry:{type:"Point",coordinates:[11.18408203125,49.088257784724675]}},{type:"Feature",properties:{pid:3},geometry:{type:"Point",coordinates:[11.030273437499998,49.35375571830993]}},{type:"Feature",properties:{pid:4},geometry:{type:"Point",coordinates:[10.72265625,49.24629332459796]}},{type:"Feature",properties:{pid:5},geometry:{type:"Point",coordinates:[12.76611328125,48.011975126709956]}},{type:"Feature",properties:{pid:6},geometry:{type:"Point",coordinates:[13.55712890625,49.15296965617042]}},{type:"Feature",properties:{pid:7},geometry:{type:"Point",coordinates:[13.3154296875,48.545705491847464]}},{type:"Feature",properties:{pid:8},geometry:{type:"Point",coordinates:[4.482421875,49.224772722794825]}}]},Aqe={type:"FeatureCollection",features:[{type:"Feature",properties:{name:"Feature 1 - Polygon"},geometry:{type:"Polygon",coordinates:[[[7.91015625,50.233151832472245],[9.140625,47.81315451752768],[13.33740234375,48.28319289548349],[13.7109375,50.17689812200107],[7.91015625,50.233151832472245]]]}}]},Iqe={type:"FeatureCollection",features:[{type:"Feature",id:"S1A_IW_GRDH_1SDV_20200913T165301_20200913T165326_034343_03FE2F_9368_WAVE.3",geometry:{type:"Point",coordinates:[14.354708,54.004536]},geometry_name:"geom",properties:{lat:"54.004536",lon:"14.354708",id:"3",timestamp:"2020-09-13T16:52:57Z",SWH:"1.13",plength:"209.7",windSpeed:"4.25",pdirection:"125.0"}},{type:"Feature",id:"S1A_IW_GRDH_1SDV_20200913T165301_20200913T165326_034343_03FE2F_9368_WAVE.4",geometry:{type:"Point",coordinates:[14.445045,54.013187]},geometry_name:"geom",properties:{lat:"54.013187",lon:"14.445045",id:"4",timestamp:"2020-09-13T16:52:57Z",SWH:"0.91",plength:"251.0",windSpeed:"3.75",pdirection:"11.3"}},{type:"Feature",id:"S1A_IW_GRDH_1SDV_20200913T165301_20200913T165326_034343_03FE2F_9368_WAVE.5",geometry:{type:"Point",coordinates:[14.535383,54.021835]},geometry_name:"geom",properties:{lat:"54.021835",lon:"14.535383",id:"5",timestamp:"2020-09-13T16:52:57Z",SWH:"1.08",plength:"475.4",windSpeed:"4.00",pdirection:"21.8"}},{type:"Feature",id:"S1A_IW_GRDH_1SDV_20200913T165301_20200913T165326_034343_03FE2F_9368_WAVE.6",geometry:{type:"Point",coordinates:[14.625798,54.030346]},geometry_name:"geom",properties:{lat:"54.030346",lon:"14.625798",id:"6",timestamp:"2020-09-13T16:52:57Z",SWH:"0.99",plength:"194.6",windSpeed:"4.00",pdirection:"171.3"}},{type:"Feature",id:"S1A_IW_GRDH_1SDV_20200913T165301_20200913T165326_034343_03FE2F_9368_WAVE.7",geometry:{type:"Point",coordinates:[14.716214,54.038853]},geometry_name:"geom",properties:{lat:"54.038853",lon:"14.716214",id:"7",timestamp:"2020-09-13T16:52:57Z",SWH:"0.90",plength:"475.4",windSpeed:"4.05",pdirection:"21.8"}},{type:"Feature",id:"S1A_IW_GRDH_1SDV_20200913T165301_20200913T165326_034343_03FE2F_9368_WAVE.8",geometry:{type:"Point",coordinates:[13.978081,54.022915]},geometry_name:"geom",properties:{lat:"54.022915",lon:"13.978081",id:"8",timestamp:"2020-09-13T16:52:57Z",SWH:"0.66",plength:"475.4",windSpeed:"3.50",pdirection:"21.8"}},{type:"Feature",id:"S1A_IW_GRDH_1SDV_20200913T165301_20200913T165326_034343_03FE2F_9368_WAVE.9",geometry:{type:"Point",coordinates:[14.068372,54.031853]},geometry_name:"geom",properties:{lat:"54.031853",lon:"14.068372",id:"9",timestamp:"2020-09-13T16:52:57Z",SWH:"1.03",plength:"452.5",windSpeed:"4.20",pdirection:"135.0"}},{type:"Feature",id:"S1A_IW_GRDH_1SDV_20200913T165301_20200913T165326_034343_03FE2F_9368_WAVE.10",geometry:{type:"Point",coordinates:[14.158684,54.040756]},geometry_name:"geom",properties:{lat:"54.040756",lon:"14.158684",id:"10",timestamp:"2020-09-13T16:52:57Z",SWH:"0.47",plength:"199.9",windSpeed:"4.40",pdirection:"51.3"}},{type:"Feature",id:"S1A_IW_GRDH_1SDV_20200913T165301_20200913T165326_034343_03FE2F_9368_WAVE.11",geometry:{type:"Point",coordinates:[14.249058,54.049553]},geometry_name:"geom",properties:{lat:"54.049553",lon:"14.249058",id:"11",timestamp:"2020-09-13T16:52:57Z",SWH:"1.36",plength:"420.9",windSpeed:"4.40",pdirection:"80.5"}},{type:"Feature",id:"S1A_IW_GRDH_1SDV_20200913T165301_20200913T165326_034343_03FE2F_9368_WAVE.12",geometry:{type:"Point",coordinates:[14.339441,54.058331]},geometry_name:"geom",properties:{lat:"54.058331",lon:"14.339441",id:"12",timestamp:"2020-09-13T16:52:57Z",SWH:"0.94",plength:"134.6",windSpeed:"3.95",pdirection:"3.0"}},{type:"Feature",id:"S1A_IW_GRDH_1SDV_20200913T165301_20200913T165326_034343_03FE2F_9368_WAVE.13",geometry:{type:"Point",coordinates:[14.429894,54.066982]},geometry_name:"geom",properties:{lat:"54.066982",lon:"14.429894",id:"13",timestamp:"2020-09-13T16:52:57Z",SWH:"1.01",plength:"351.6",windSpeed:"4.15",pdirection:"164.1"}},{type:"Feature",id:"S1A_IW_GRDH_1SDV_20200913T165301_20200913T165326_034343_03FE2F_9368_WAVE.14",geometry:{type:"Point",coordinates:[14.52035,54.075634]},geometry_name:"geom",properties:{lat:"54.075634",lon:"14.520350",id:"14",timestamp:"2020-09-13T16:52:57Z",SWH:"1.16",plength:"310.4",windSpeed:"4.45",pdirection:"166.0"}},{type:"Feature",id:"S1A_IW_GRDH_1SDV_20200913T165301_20200913T165326_034343_03FE2F_9368_WAVE.15",geometry:{type:"Point",coordinates:[14.610882,54.084145]},geometry_name:"geom",properties:{lat:"54.084145",lon:"14.610882",id:"15",timestamp:"2020-09-13T16:52:57Z",SWH:"1.00",plength:"210.4",windSpeed:"4.05",pdirection:"170.5"}},{type:"Feature",id:"S1A_IW_GRDH_1SDV_20200913T165301_20200913T165326_034343_03FE2F_9368_WAVE.16",geometry:{type:"Point",coordinates:[14.701414,54.092651]},geometry_name:"geom",properties:{lat:"54.092651",lon:"14.701414",id:"16",timestamp:"2020-09-13T16:52:57Z",SWH:"0.98",plength:"254.7",windSpeed:"4.40",pdirection:"174.3"}},{type:"Feature",id:"S1A_IW_GRDH_1SDV_20200913T165301_20200913T165326_034343_03FE2F_9368_WAVE.17",geometry:{type:"Point",coordinates:[14.792017,54.101032]},geometry_name:"geom",properties:{lat:"54.101032",lon:"14.792017",id:"17",timestamp:"2020-09-13T16:52:57Z",SWH:"1.10",plength:"475.4",windSpeed:"4.45",pdirection:"158.2"}},{type:"Feature",id:"S1A_IW_GRDH_1SDV_20200913T165301_20200913T165326_034343_03FE2F_9368_WAVE.18",geometry:{type:"Point",coordinates:[14.882627,54.109398]},geometry_name:"geom",properties:{lat:"54.109398",lon:"14.882627",id:"18",timestamp:"2020-09-13T16:52:57Z",SWH:"0.94",plength:"188.2",windSpeed:"4.25",pdirection:"107.1"}},{type:"Feature",id:"S1A_IW_GRDH_1SDV_20200913T165301_20200913T165326_034343_03FE2F_9368_WAVE.19",geometry:{type:"Point",coordinates:[14.973297,54.117649]},geometry_name:"geom",properties:{lat:"54.117649",lon:"14.973297",id:"19",timestamp:"2020-09-13T16:52:57Z",SWH:"0.91",plength:"404.8",windSpeed:"4.00",pdirection:"161.6"}},{type:"Feature",id:"S1A_IW_GRDH_1SDV_20200913T165301_20200913T165326_034343_03FE2F_9368_WAVE.20",geometry:{type:"Point",coordinates:[15.063984,54.12587]},geometry_name:"geom",properties:{lat:"54.125870",lon:"15.063984",id:"20",timestamp:"2020-09-13T16:52:57Z",SWH:"0.90",plength:"170.3",windSpeed:"4.10",pdirection:"176.2"}},{type:"Feature",id:"S1A_IW_GRDH_1SDV_20200913T165301_20200913T165326_034343_03FE2F_9368_WAVE.21",geometry:{type:"Point",coordinates:[15.154721,54.133991]},geometry_name:"geom",properties:{lat:"54.133991",lon:"15.154721",id:"21",timestamp:"2020-09-13T16:52:57Z",SWH:"0.69",plength:"475.4",windSpeed:"4.00",pdirection:"21.8"}},{type:"Feature",id:"S1A_IW_GRDH_1SDV_20200913T165301_20200913T165326_034343_03FE2F_9368_WAVE.22",geometry:{type:"Point",coordinates:[14.052757,54.085644]},geometry_name:"geom",properties:{lat:"54.085644",lon:"14.052757",id:"22",timestamp:"2020-09-13T16:52:57Z",SWH:"0.28",plength:"475.4",windSpeed:"4.25",pdirection:"21.8"}},{type:"Feature",id:"S1A_IW_GRDH_1SDV_20200913T165301_20200913T165326_034343_03FE2F_9368_WAVE.26",geometry:{type:"Point",coordinates:[14.414745,54.120781]},geometry_name:"geom",properties:{lat:"54.120781",lon:"14.414745",id:"26",timestamp:"2020-09-13T16:52:57Z",SWH:"1.10",plength:"129.3",windSpeed:"4.20",pdirection:"45.0"}},{type:"Feature",id:"S1A_IW_GRDH_1SDV_20200913T165301_20200913T165326_034343_03FE2F_9368_WAVE.27",geometry:{type:"Point",coordinates:[14.505316,54.129433]},geometry_name:"geom",properties:{lat:"54.129433",lon:"14.505316",id:"27",timestamp:"2020-09-13T16:52:57Z",SWH:"0.50",plength:"310.4",windSpeed:"4.60",pdirection:"14.0"}}]};let Rqe=(()=>{class l{constructor(){this.sunlightForm=new X_({x:new Fh(0,S1.required),y:new Fh(0,S1.required)})}ngOnInit(){this.sunlightForm.valueChanges.subscribe(o=>{this.changeHandler(parseInt(o.x,10)/100,parseInt(o.y,10)/100)})}}return l.\u0275fac=function(o){return new(o||l)},l.\u0275cmp=Qe({type:l,selectors:[["app-sunlight"]],inputs:{changeHandler:"changeHandler"},decls:15,vars:1,consts:[["clrForm","","clrLayout","horizontal",3,"formGroup"],["type","range","min","-100","max","100","value","0","clrInput","","formControlName","x",1,"ukis-range-input"],["type","range","min","-100","max","100","value","0","clrInput","","formControlName","y",1,"ukis-range-input"]],template:function(o,c){1&o&&(V(0,"form",0),V(1,"label"),Le(2,"Sun position"),B(),V(3,"clr-input-container"),V(4,"label"),Le(5,"x"),B(),xe(6,"input",1),V(7,"clr-control-helper"),Le(8,"east -> west"),B(),B(),V(9,"clr-input-container"),V(10,"label"),Le(11,"y"),B(),xe(12,"input",2),V(13,"clr-control-helper"),Le(14,"south -> north"),B(),B(),B()),2&o&&q("formGroup",c.sunlightForm)},directives:[oA,JD,Z3,cJ,$_,xi,z1,D1,ec,MA,$a,lA,_A],styles:[""]}),l})(),Pqe=(()=>{class l{constructor(){this.interpolationForm=new X_({power:new Fh(2,S1.required),smooth:new Fh(!0,S1.required),labels:new Fh(!1,S1.required)})}ngOnInit(){this.interpolationForm.valueChanges.subscribe(o=>{this.changeHandler(o.power,o.smooth,o.labels)})}}return l.\u0275fac=function(o){return new(o||l)},l.\u0275cmp=Qe({type:l,selectors:[["app-interpolation-settings"]],inputs:{changeHandler:"changeHandler"},decls:21,vars:1,consts:[["clrForm","","clrLayout","vertical",3,"formGroup"],["type","range","min","1","max","7","value","1","clrInput","","formControlName","power",1,"ukis-range-input"],["type","checkbox","clrCheckbox","","name","options","value","true","formControlName","smooth",1,"ukis-range-input"],["type","checkbox","clrCheckbox","","name","options","value","false","formControlName","labels",1,"ukis-range-input"]],template:function(o,c){1&o&&(V(0,"form",0),V(1,"clr-input-container"),V(2,"label"),Le(3,"Power"),B(),xe(4,"input",1),V(5,"clr-control-helper"),Le(6,"inverse distance weighting power"),B(),B(),V(7,"clr-checkbox-container"),V(8,"label"),Le(9,"Smoothing"),B(),V(10,"clr-checkbox-wrapper"),xe(11,"input",2),V(12,"label"),Le(13,"Smoothing"),B(),B(),B(),V(14,"clr-checkbox-container"),V(15,"label"),Le(16,"Labels"),B(),V(17,"clr-checkbox-wrapper"),xe(18,"input",3),V(19,"label"),Le(20,"Show labels"),B(),B(),B(),B()),2&o&&q("formGroup",c.interpolationForm)},directives:[oA,JD,Z3,cJ,$_,z1,xi,D1,ec,MA,$a,lA,_A,g6e,bA,W_,SA],styles:[""]}),l})();const Gg=1e3,sa=1001,oo=1003,ao=1006,Fp=1008,D0=1009,kp=1015,A0=1016,Tw=1020,Zh=1022,El=1023,I0=1026,ww=1027,Cw=2300,R0=2301,P0=2400,L0=2401,Ml=3e3,zg=3001,xw=35044,Ew=35048;class Vp{addEventListener(a,o){void 0===this._listeners&&(this._listeners={});const c=this._listeners;void 0===c[a]&&(c[a]=[]),-1===c[a].indexOf(o)&&c[a].push(o)}hasEventListener(a,o){if(void 0===this._listeners)return!1;const c=this._listeners;return void 0!==c[a]&&-1!==c[a].indexOf(o)}removeEventListener(a,o){if(void 0===this._listeners)return;const u=this._listeners[a];if(void 0!==u){const h=u.indexOf(o);-1!==h&&u.splice(h,1)}}dispatchEvent(a){if(void 0===this._listeners)return;const c=this._listeners[a.type];if(void 0!==c){a.target=this;const u=c.slice(0);for(let h=0,d=u.length;h<d;h++)u[h].call(this,a);a.target=null}}}const oa=[];for(let l=0;l<256;l++)oa[l]=(l<16?"0":"")+l.toString(16);let MI=1234567;const jg=Math.PI/180,Mw=180/Math.PI;function sc(){const l=4294967295*Math.random()|0,a=4294967295*Math.random()|0,o=4294967295*Math.random()|0,c=4294967295*Math.random()|0;return(oa[255&l]+oa[l>>8&255]+oa[l>>16&255]+oa[l>>24&255]+"-"+oa[255&a]+oa[a>>8&255]+"-"+oa[a>>16&15|64]+oa[a>>24&255]+"-"+oa[63&o|128]+oa[o>>8&255]+"-"+oa[o>>16&255]+oa[o>>24&255]+oa[255&c]+oa[c>>8&255]+oa[c>>16&255]+oa[c>>24&255]).toUpperCase()}function aa(l,a,o){return Math.max(a,Math.min(o,l))}function nB(l,a){return(l%a+a)%a}function Dw(l,a,o){return(1-o)*l+o*a}function rB(l){return 0==(l&l-1)&&0!==l}function _ne(l){return Math.pow(2,Math.ceil(Math.log(l)/Math.LN2))}function bne(l){return Math.pow(2,Math.floor(Math.log(l)/Math.LN2))}var w$e=Object.freeze({__proto__:null,DEG2RAD:jg,RAD2DEG:Mw,generateUUID:sc,clamp:aa,euclideanModulo:nB,mapLinear:function(l,a,o,c,u){return c+(l-a)*(u-c)/(o-a)},inverseLerp:function(l,a,o){return l!==a?(o-l)/(a-l):0},lerp:Dw,damp:function(l,a,o,c){return Dw(l,a,1-Math.exp(-o*c))},pingpong:function(l,a=1){return a-Math.abs(nB(l,2*a)-a)},smoothstep:function(l,a,o){return l<=a?0:l>=o?1:(l=(l-a)/(o-a))*l*(3-2*l)},smootherstep:function(l,a,o){return l<=a?0:l>=o?1:(l=(l-a)/(o-a))*l*l*(l*(6*l-15)+10)},randInt:function(l,a){return l+Math.floor(Math.random()*(a-l+1))},randFloat:function(l,a){return l+Math.random()*(a-l)},randFloatSpread:function(l){return l*(.5-Math.random())},seededRandom:function(l){return void 0!==l&&(MI=l%2147483647),MI=16807*MI%2147483647,(MI-1)/2147483646},degToRad:function(l){return l*jg},radToDeg:function(l){return l*Mw},isPowerOfTwo:rB,ceilPowerOfTwo:_ne,floorPowerOfTwo:bne,setQuaternionFromProperEuler:function(l,a,o,c,u){const h=Math.cos,d=Math.sin,f=h(o/2),m=d(o/2),g=h((a+c)/2),y=d((a+c)/2),v=h((a-c)/2),_=d((a-c)/2),b=h((c-a)/2),w=d((c-a)/2);switch(u){case"XYX":l.set(f*y,m*v,m*_,f*g);break;case"YZY":l.set(m*_,f*y,m*v,f*g);break;case"ZXZ":l.set(m*v,m*_,f*y,f*g);break;case"XZX":l.set(f*y,m*w,m*b,f*g);break;case"YXY":l.set(m*b,f*y,m*w,f*g);break;case"ZYZ":l.set(m*w,m*b,f*y,f*g);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+u)}}});class St{constructor(a=0,o=0){this.x=a,this.y=o}get width(){return this.x}set width(a){this.x=a}get height(){return this.y}set height(a){this.y=a}set(a,o){return this.x=a,this.y=o,this}setScalar(a){return this.x=a,this.y=a,this}setX(a){return this.x=a,this}setY(a){return this.y=a,this}setComponent(a,o){switch(a){case 0:this.x=o;break;case 1:this.y=o;break;default:throw new Error("index is out of range: "+a)}return this}getComponent(a){switch(a){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+a)}}clone(){return new this.constructor(this.x,this.y)}copy(a){return this.x=a.x,this.y=a.y,this}add(a,o){return void 0!==o?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(a,o)):(this.x+=a.x,this.y+=a.y,this)}addScalar(a){return this.x+=a,this.y+=a,this}addVectors(a,o){return this.x=a.x+o.x,this.y=a.y+o.y,this}addScaledVector(a,o){return this.x+=a.x*o,this.y+=a.y*o,this}sub(a,o){return void 0!==o?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(a,o)):(this.x-=a.x,this.y-=a.y,this)}subScalar(a){return this.x-=a,this.y-=a,this}subVectors(a,o){return this.x=a.x-o.x,this.y=a.y-o.y,this}multiply(a){return this.x*=a.x,this.y*=a.y,this}multiplyScalar(a){return this.x*=a,this.y*=a,this}divide(a){return this.x/=a.x,this.y/=a.y,this}divideScalar(a){return this.multiplyScalar(1/a)}applyMatrix3(a){const o=this.x,c=this.y,u=a.elements;return this.x=u[0]*o+u[3]*c+u[6],this.y=u[1]*o+u[4]*c+u[7],this}min(a){return this.x=Math.min(this.x,a.x),this.y=Math.min(this.y,a.y),this}max(a){return this.x=Math.max(this.x,a.x),this.y=Math.max(this.y,a.y),this}clamp(a,o){return this.x=Math.max(a.x,Math.min(o.x,this.x)),this.y=Math.max(a.y,Math.min(o.y,this.y)),this}clampScalar(a,o){return this.x=Math.max(a,Math.min(o,this.x)),this.y=Math.max(a,Math.min(o,this.y)),this}clampLength(a,o){const c=this.length();return this.divideScalar(c||1).multiplyScalar(Math.max(a,Math.min(o,c)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(a){return this.x*a.x+this.y*a.y}cross(a){return this.x*a.y-this.y*a.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(a){return Math.sqrt(this.distanceToSquared(a))}distanceToSquared(a){const o=this.x-a.x,c=this.y-a.y;return o*o+c*c}manhattanDistanceTo(a){return Math.abs(this.x-a.x)+Math.abs(this.y-a.y)}setLength(a){return this.normalize().multiplyScalar(a)}lerp(a,o){return this.x+=(a.x-this.x)*o,this.y+=(a.y-this.y)*o,this}lerpVectors(a,o,c){return this.x=a.x+(o.x-a.x)*c,this.y=a.y+(o.y-a.y)*c,this}equals(a){return a.x===this.x&&a.y===this.y}fromArray(a,o=0){return this.x=a[o],this.y=a[o+1],this}toArray(a=[],o=0){return a[o]=this.x,a[o+1]=this.y,a}fromBufferAttribute(a,o,c){return void 0!==c&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=a.getX(o),this.y=a.getY(o),this}rotateAround(a,o){const c=Math.cos(o),u=Math.sin(o),h=this.x-a.x,d=this.y-a.y;return this.x=h*c-d*u+a.x,this.y=h*u+d*c+a.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}}St.prototype.isVector2=!0;class zo{constructor(){this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}set(a,o,c,u,h,d,f,m,g){const y=this.elements;return y[0]=a,y[1]=u,y[2]=f,y[3]=o,y[4]=h,y[5]=m,y[6]=c,y[7]=d,y[8]=g,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(a){const o=this.elements,c=a.elements;return o[0]=c[0],o[1]=c[1],o[2]=c[2],o[3]=c[3],o[4]=c[4],o[5]=c[5],o[6]=c[6],o[7]=c[7],o[8]=c[8],this}extractBasis(a,o,c){return a.setFromMatrix3Column(this,0),o.setFromMatrix3Column(this,1),c.setFromMatrix3Column(this,2),this}setFromMatrix4(a){const o=a.elements;return this.set(o[0],o[4],o[8],o[1],o[5],o[9],o[2],o[6],o[10]),this}multiply(a){return this.multiplyMatrices(this,a)}premultiply(a){return this.multiplyMatrices(a,this)}multiplyMatrices(a,o){const c=a.elements,u=o.elements,h=this.elements,d=c[0],f=c[3],m=c[6],g=c[1],y=c[4],v=c[7],_=c[2],b=c[5],w=c[8],C=u[0],E=u[3],M=u[6],x=u[1],R=u[4],P=u[7],k=u[2],W=u[5],U=u[8];return h[0]=d*C+f*x+m*k,h[3]=d*E+f*R+m*W,h[6]=d*M+f*P+m*U,h[1]=g*C+y*x+v*k,h[4]=g*E+y*R+v*W,h[7]=g*M+y*P+v*U,h[2]=_*C+b*x+w*k,h[5]=_*E+b*R+w*W,h[8]=_*M+b*P+w*U,this}multiplyScalar(a){const o=this.elements;return o[0]*=a,o[3]*=a,o[6]*=a,o[1]*=a,o[4]*=a,o[7]*=a,o[2]*=a,o[5]*=a,o[8]*=a,this}determinant(){const a=this.elements,o=a[0],c=a[1],u=a[2],h=a[3],d=a[4],f=a[5],m=a[6],g=a[7],y=a[8];return o*d*y-o*f*g-c*h*y+c*f*m+u*h*g-u*d*m}invert(){const a=this.elements,o=a[0],c=a[1],u=a[2],h=a[3],d=a[4],f=a[5],m=a[6],g=a[7],y=a[8],v=y*d-f*g,_=f*m-y*h,b=g*h-d*m,w=o*v+c*_+u*b;if(0===w)return this.set(0,0,0,0,0,0,0,0,0);const C=1/w;return a[0]=v*C,a[1]=(u*g-y*c)*C,a[2]=(f*c-u*d)*C,a[3]=_*C,a[4]=(y*o-u*m)*C,a[5]=(u*h-f*o)*C,a[6]=b*C,a[7]=(c*m-g*o)*C,a[8]=(d*o-c*h)*C,this}transpose(){let a;const o=this.elements;return a=o[1],o[1]=o[3],o[3]=a,a=o[2],o[2]=o[6],o[6]=a,a=o[5],o[5]=o[7],o[7]=a,this}getNormalMatrix(a){return this.setFromMatrix4(a).invert().transpose()}transposeIntoArray(a){const o=this.elements;return a[0]=o[0],a[1]=o[3],a[2]=o[6],a[3]=o[1],a[4]=o[4],a[5]=o[7],a[6]=o[2],a[7]=o[5],a[8]=o[8],this}setUvTransform(a,o,c,u,h,d,f){const m=Math.cos(h),g=Math.sin(h);return this.set(c*m,c*g,-c*(m*d+g*f)+d+a,-u*g,u*m,-u*(-g*d+m*f)+f+o,0,0,1),this}scale(a,o){const c=this.elements;return c[0]*=a,c[3]*=a,c[6]*=a,c[1]*=o,c[4]*=o,c[7]*=o,this}rotate(a){const o=Math.cos(a),c=Math.sin(a),u=this.elements,h=u[0],d=u[3],f=u[6],m=u[1],g=u[4],y=u[7];return u[0]=o*h+c*m,u[3]=o*d+c*g,u[6]=o*f+c*y,u[1]=-c*h+o*m,u[4]=-c*d+o*g,u[7]=-c*f+o*y,this}translate(a,o){const c=this.elements;return c[0]+=a*c[2],c[3]+=a*c[5],c[6]+=a*c[8],c[1]+=o*c[2],c[4]+=o*c[5],c[7]+=o*c[8],this}equals(a){const o=this.elements,c=a.elements;for(let u=0;u<9;u++)if(o[u]!==c[u])return!1;return!0}fromArray(a,o=0){for(let c=0;c<9;c++)this.elements[c]=a[c+o];return this}toArray(a=[],o=0){const c=this.elements;return a[o]=c[0],a[o+1]=c[1],a[o+2]=c[2],a[o+3]=c[3],a[o+4]=c[4],a[o+5]=c[5],a[o+6]=c[6],a[o+7]=c[7],a[o+8]=c[8],a}clone(){return(new this.constructor).fromArray(this.elements)}}let O0;zo.prototype.isMatrix3=!0;class N0{static getDataURL(a){if(/^data:/i.test(a.src)||"undefined"==typeof HTMLCanvasElement)return a.src;let o;if(a instanceof HTMLCanvasElement)o=a;else{void 0===O0&&(O0=document.createElementNS("http://www.w3.org/1999/xhtml","canvas")),O0.width=a.width,O0.height=a.height;const c=O0.getContext("2d");a instanceof ImageData?c.putImageData(a,0,0):c.drawImage(a,0,0,a.width,a.height),o=O0}return o.width>2048||o.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",a),o.toDataURL("image/jpeg",.6)):o.toDataURL("image/png")}}let C$e=0;class Co extends Vp{constructor(a=Co.DEFAULT_IMAGE,o=Co.DEFAULT_MAPPING,c=sa,u=sa,h=ao,d=Fp,f=El,m=D0,g=1,y=Ml){super(),Object.defineProperty(this,"id",{value:C$e++}),this.uuid=sc(),this.name="",this.image=a,this.mipmaps=[],this.mapping=o,this.wrapS=c,this.wrapT=u,this.magFilter=h,this.minFilter=d,this.anisotropy=g,this.format=f,this.internalFormat=null,this.type=m,this.offset=new St(0,0),this.repeat=new St(1,1),this.center=new St(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new zo,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=y,this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return(new this.constructor).copy(this)}copy(a){return this.name=a.name,this.image=a.image,this.mipmaps=a.mipmaps.slice(0),this.mapping=a.mapping,this.wrapS=a.wrapS,this.wrapT=a.wrapT,this.magFilter=a.magFilter,this.minFilter=a.minFilter,this.anisotropy=a.anisotropy,this.format=a.format,this.internalFormat=a.internalFormat,this.type=a.type,this.offset.copy(a.offset),this.repeat.copy(a.repeat),this.center.copy(a.center),this.rotation=a.rotation,this.matrixAutoUpdate=a.matrixAutoUpdate,this.matrix.copy(a.matrix),this.generateMipmaps=a.generateMipmaps,this.premultiplyAlpha=a.premultiplyAlpha,this.flipY=a.flipY,this.unpackAlignment=a.unpackAlignment,this.encoding=a.encoding,this}toJSON(a){const o=void 0===a||"string"==typeof a;if(!o&&void 0!==a.textures[this.uuid])return a.textures[this.uuid];const c={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};if(void 0!==this.image){const u=this.image;if(void 0===u.uuid&&(u.uuid=sc()),!o&&void 0===a.images[u.uuid]){let h;if(Array.isArray(u)){h=[];for(let d=0,f=u.length;d<f;d++)h.push(iB(u[d].isDataTexture?u[d].image:u[d]))}else h=iB(u);a.images[u.uuid]={uuid:u.uuid,url:h}}c.image=u.uuid}return o||(a.textures[this.uuid]=c),c}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(a){if(300!==this.mapping)return a;if(a.applyMatrix3(this.matrix),a.x<0||a.x>1)switch(this.wrapS){case Gg:a.x=a.x-Math.floor(a.x);break;case sa:a.x=a.x<0?0:1;break;case 1002:a.x=1===Math.abs(Math.floor(a.x)%2)?Math.ceil(a.x)-a.x:a.x-Math.floor(a.x)}if(a.y<0||a.y>1)switch(this.wrapT){case Gg:a.y=a.y-Math.floor(a.y);break;case sa:a.y=a.y<0?0:1;break;case 1002:a.y=1===Math.abs(Math.floor(a.y)%2)?Math.ceil(a.y)-a.y:a.y-Math.floor(a.y)}return this.flipY&&(a.y=1-a.y),a}set needsUpdate(a){!0===a&&this.version++}}function iB(l){return"undefined"!=typeof HTMLImageElement&&l instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&l instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&l instanceof ImageBitmap?N0.getDataURL(l):l.data?{data:Array.prototype.slice.call(l.data),width:l.width,height:l.height,type:l.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}Co.DEFAULT_IMAGE=void 0,Co.DEFAULT_MAPPING=300,Co.prototype.isTexture=!0;class Oi{constructor(a=0,o=0,c=0,u=1){this.x=a,this.y=o,this.z=c,this.w=u}get width(){return this.z}set width(a){this.z=a}get height(){return this.w}set height(a){this.w=a}set(a,o,c,u){return this.x=a,this.y=o,this.z=c,this.w=u,this}setScalar(a){return this.x=a,this.y=a,this.z=a,this.w=a,this}setX(a){return this.x=a,this}setY(a){return this.y=a,this}setZ(a){return this.z=a,this}setW(a){return this.w=a,this}setComponent(a,o){switch(a){case 0:this.x=o;break;case 1:this.y=o;break;case 2:this.z=o;break;case 3:this.w=o;break;default:throw new Error("index is out of range: "+a)}return this}getComponent(a){switch(a){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+a)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(a){return this.x=a.x,this.y=a.y,this.z=a.z,this.w=void 0!==a.w?a.w:1,this}add(a,o){return void 0!==o?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(a,o)):(this.x+=a.x,this.y+=a.y,this.z+=a.z,this.w+=a.w,this)}addScalar(a){return this.x+=a,this.y+=a,this.z+=a,this.w+=a,this}addVectors(a,o){return this.x=a.x+o.x,this.y=a.y+o.y,this.z=a.z+o.z,this.w=a.w+o.w,this}addScaledVector(a,o){return this.x+=a.x*o,this.y+=a.y*o,this.z+=a.z*o,this.w+=a.w*o,this}sub(a,o){return void 0!==o?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(a,o)):(this.x-=a.x,this.y-=a.y,this.z-=a.z,this.w-=a.w,this)}subScalar(a){return this.x-=a,this.y-=a,this.z-=a,this.w-=a,this}subVectors(a,o){return this.x=a.x-o.x,this.y=a.y-o.y,this.z=a.z-o.z,this.w=a.w-o.w,this}multiply(a){return this.x*=a.x,this.y*=a.y,this.z*=a.z,this.w*=a.w,this}multiplyScalar(a){return this.x*=a,this.y*=a,this.z*=a,this.w*=a,this}applyMatrix4(a){const o=this.x,c=this.y,u=this.z,h=this.w,d=a.elements;return this.x=d[0]*o+d[4]*c+d[8]*u+d[12]*h,this.y=d[1]*o+d[5]*c+d[9]*u+d[13]*h,this.z=d[2]*o+d[6]*c+d[10]*u+d[14]*h,this.w=d[3]*o+d[7]*c+d[11]*u+d[15]*h,this}divideScalar(a){return this.multiplyScalar(1/a)}setAxisAngleFromQuaternion(a){this.w=2*Math.acos(a.w);const o=Math.sqrt(1-a.w*a.w);return o<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=a.x/o,this.y=a.y/o,this.z=a.z/o),this}setAxisAngleFromRotationMatrix(a){let o,c,u,h;const d=.01,f=.1,m=a.elements,g=m[0],y=m[4],v=m[8],_=m[1],b=m[5],w=m[9],C=m[2],E=m[6],M=m[10];if(Math.abs(y-_)<d&&Math.abs(v-C)<d&&Math.abs(w-E)<d){if(Math.abs(y+_)<f&&Math.abs(v+C)<f&&Math.abs(w+E)<f&&Math.abs(g+b+M-3)<f)return this.set(1,0,0,0),this;o=Math.PI;const R=(g+1)/2,P=(b+1)/2,k=(M+1)/2,W=(y+_)/4,U=(v+C)/4,K=(w+E)/4;return R>P&&R>k?R<d?(c=0,u=.707106781,h=.707106781):(c=Math.sqrt(R),u=W/c,h=U/c):P>k?P<d?(c=.707106781,u=0,h=.707106781):(u=Math.sqrt(P),c=W/u,h=K/u):k<d?(c=.707106781,u=.707106781,h=0):(h=Math.sqrt(k),c=U/h,u=K/h),this.set(c,u,h,o),this}let x=Math.sqrt((E-w)*(E-w)+(v-C)*(v-C)+(_-y)*(_-y));return Math.abs(x)<.001&&(x=1),this.x=(E-w)/x,this.y=(v-C)/x,this.z=(_-y)/x,this.w=Math.acos((g+b+M-1)/2),this}min(a){return this.x=Math.min(this.x,a.x),this.y=Math.min(this.y,a.y),this.z=Math.min(this.z,a.z),this.w=Math.min(this.w,a.w),this}max(a){return this.x=Math.max(this.x,a.x),this.y=Math.max(this.y,a.y),this.z=Math.max(this.z,a.z),this.w=Math.max(this.w,a.w),this}clamp(a,o){return this.x=Math.max(a.x,Math.min(o.x,this.x)),this.y=Math.max(a.y,Math.min(o.y,this.y)),this.z=Math.max(a.z,Math.min(o.z,this.z)),this.w=Math.max(a.w,Math.min(o.w,this.w)),this}clampScalar(a,o){return this.x=Math.max(a,Math.min(o,this.x)),this.y=Math.max(a,Math.min(o,this.y)),this.z=Math.max(a,Math.min(o,this.z)),this.w=Math.max(a,Math.min(o,this.w)),this}clampLength(a,o){const c=this.length();return this.divideScalar(c||1).multiplyScalar(Math.max(a,Math.min(o,c)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(a){return this.x*a.x+this.y*a.y+this.z*a.z+this.w*a.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(a){return this.normalize().multiplyScalar(a)}lerp(a,o){return this.x+=(a.x-this.x)*o,this.y+=(a.y-this.y)*o,this.z+=(a.z-this.z)*o,this.w+=(a.w-this.w)*o,this}lerpVectors(a,o,c){return this.x=a.x+(o.x-a.x)*c,this.y=a.y+(o.y-a.y)*c,this.z=a.z+(o.z-a.z)*c,this.w=a.w+(o.w-a.w)*c,this}equals(a){return a.x===this.x&&a.y===this.y&&a.z===this.z&&a.w===this.w}fromArray(a,o=0){return this.x=a[o],this.y=a[o+1],this.z=a[o+2],this.w=a[o+3],this}toArray(a=[],o=0){return a[o]=this.x,a[o+1]=this.y,a[o+2]=this.z,a[o+3]=this.w,a}fromBufferAttribute(a,o,c){return void 0!==c&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=a.getX(o),this.y=a.getY(o),this.z=a.getZ(o),this.w=a.getW(o),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}}Oi.prototype.isVector4=!0;class Kh extends Vp{constructor(a,o,c={}){super(),this.width=a,this.height=o,this.depth=1,this.scissor=new Oi(0,0,a,o),this.scissorTest=!1,this.viewport=new Oi(0,0,a,o),this.texture=new Co(void 0,c.mapping,c.wrapS,c.wrapT,c.magFilter,c.minFilter,c.format,c.type,c.anisotropy,c.encoding),this.texture.isRenderTargetTexture=!0,this.texture.image={width:a,height:o,depth:1},this.texture.generateMipmaps=void 0!==c.generateMipmaps&&c.generateMipmaps,this.texture.internalFormat=void 0!==c.internalFormat?c.internalFormat:null,this.texture.minFilter=void 0!==c.minFilter?c.minFilter:ao,this.depthBuffer=void 0===c.depthBuffer||c.depthBuffer,this.stencilBuffer=void 0!==c.stencilBuffer&&c.stencilBuffer,this.depthTexture=void 0!==c.depthTexture?c.depthTexture:null}setTexture(a){a.image={width:this.width,height:this.height,depth:this.depth},this.texture=a}setSize(a,o,c=1){(this.width!==a||this.height!==o||this.depth!==c)&&(this.width=a,this.height=o,this.depth=c,this.texture.image.width=a,this.texture.image.height=o,this.texture.image.depth=c,this.dispose()),this.viewport.set(0,0,a,o),this.scissor.set(0,0,a,o)}clone(){return(new this.constructor).copy(this)}copy(a){return this.width=a.width,this.height=a.height,this.depth=a.depth,this.viewport.copy(a.viewport),this.texture=a.texture.clone(),this.texture.image=la({},this.texture.image),this.depthBuffer=a.depthBuffer,this.stencilBuffer=a.stencilBuffer,this.depthTexture=a.depthTexture,this}dispose(){this.dispatchEvent({type:"dispose"})}}Kh.prototype.isWebGLRenderTarget=!0,class extends Kh{constructor(a,o,c){super(a,o);const u=this.texture;this.texture=[];for(let h=0;h<c;h++)this.texture[h]=u.clone()}setSize(a,o,c=1){if(this.width!==a||this.height!==o||this.depth!==c){this.width=a,this.height=o,this.depth=c;for(let u=0,h=this.texture.length;u<h;u++)this.texture[u].image.width=a,this.texture[u].image.height=o,this.texture[u].image.depth=c;this.dispose()}return this.viewport.set(0,0,a,o),this.scissor.set(0,0,a,o),this}copy(a){this.dispose(),this.width=a.width,this.height=a.height,this.depth=a.depth,this.viewport.set(0,0,this.width,this.height),this.scissor.set(0,0,this.width,this.height),this.depthBuffer=a.depthBuffer,this.stencilBuffer=a.stencilBuffer,this.depthTexture=a.depthTexture,this.texture.length=0;for(let o=0,c=a.texture.length;o<c;o++)this.texture[o]=a.texture[o].clone();return this}}.prototype.isWebGLMultipleRenderTargets=!0;class Sne extends Kh{constructor(a,o,c){super(a,o,c),this.samples=4}copy(a){return super.copy.call(this,a),this.samples=a.samples,this}}Sne.prototype.isWebGLMultisampleRenderTarget=!0;class xo{constructor(a=0,o=0,c=0,u=1){this._x=a,this._y=o,this._z=c,this._w=u}static slerp(a,o,c,u){return console.warn("THREE.Quaternion: Static .slerp() has been deprecated. Use qm.slerpQuaternions( qa, qb, t ) instead."),c.slerpQuaternions(a,o,u)}static slerpFlat(a,o,c,u,h,d,f){let m=c[u+0],g=c[u+1],y=c[u+2],v=c[u+3];const _=h[d+0],b=h[d+1],w=h[d+2],C=h[d+3];if(0===f)return a[o+0]=m,a[o+1]=g,a[o+2]=y,void(a[o+3]=v);if(1===f)return a[o+0]=_,a[o+1]=b,a[o+2]=w,void(a[o+3]=C);if(v!==C||m!==_||g!==b||y!==w){let E=1-f;const M=m*_+g*b+y*w+v*C,x=M>=0?1:-1,R=1-M*M;if(R>Number.EPSILON){const k=Math.sqrt(R),W=Math.atan2(k,M*x);E=Math.sin(E*W)/k,f=Math.sin(f*W)/k}const P=f*x;if(m=m*E+_*P,g=g*E+b*P,y=y*E+w*P,v=v*E+C*P,E===1-f){const k=1/Math.sqrt(m*m+g*g+y*y+v*v);m*=k,g*=k,y*=k,v*=k}}a[o]=m,a[o+1]=g,a[o+2]=y,a[o+3]=v}static multiplyQuaternionsFlat(a,o,c,u,h,d){const f=c[u],m=c[u+1],g=c[u+2],y=c[u+3],v=h[d],_=h[d+1],b=h[d+2],w=h[d+3];return a[o]=f*w+y*v+m*b-g*_,a[o+1]=m*w+y*_+g*v-f*b,a[o+2]=g*w+y*b+f*_-m*v,a[o+3]=y*w-f*v-m*_-g*b,a}get x(){return this._x}set x(a){this._x=a,this._onChangeCallback()}get y(){return this._y}set y(a){this._y=a,this._onChangeCallback()}get z(){return this._z}set z(a){this._z=a,this._onChangeCallback()}get w(){return this._w}set w(a){this._w=a,this._onChangeCallback()}set(a,o,c,u){return this._x=a,this._y=o,this._z=c,this._w=u,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(a){return this._x=a.x,this._y=a.y,this._z=a.z,this._w=a.w,this._onChangeCallback(),this}setFromEuler(a,o){if(!a||!a.isEuler)throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");const c=a._x,u=a._y,h=a._z,d=a._order,f=Math.cos,m=Math.sin,g=f(c/2),y=f(u/2),v=f(h/2),_=m(c/2),b=m(u/2),w=m(h/2);switch(d){case"XYZ":this._x=_*y*v+g*b*w,this._y=g*b*v-_*y*w,this._z=g*y*w+_*b*v,this._w=g*y*v-_*b*w;break;case"YXZ":this._x=_*y*v+g*b*w,this._y=g*b*v-_*y*w,this._z=g*y*w-_*b*v,this._w=g*y*v+_*b*w;break;case"ZXY":this._x=_*y*v-g*b*w,this._y=g*b*v+_*y*w,this._z=g*y*w+_*b*v,this._w=g*y*v-_*b*w;break;case"ZYX":this._x=_*y*v-g*b*w,this._y=g*b*v+_*y*w,this._z=g*y*w-_*b*v,this._w=g*y*v+_*b*w;break;case"YZX":this._x=_*y*v+g*b*w,this._y=g*b*v+_*y*w,this._z=g*y*w-_*b*v,this._w=g*y*v-_*b*w;break;case"XZY":this._x=_*y*v-g*b*w,this._y=g*b*v-_*y*w,this._z=g*y*w+_*b*v,this._w=g*y*v+_*b*w;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+d)}return!1!==o&&this._onChangeCallback(),this}setFromAxisAngle(a,o){const c=o/2,u=Math.sin(c);return this._x=a.x*u,this._y=a.y*u,this._z=a.z*u,this._w=Math.cos(c),this._onChangeCallback(),this}setFromRotationMatrix(a){const o=a.elements,c=o[0],u=o[4],h=o[8],d=o[1],f=o[5],m=o[9],g=o[2],y=o[6],v=o[10],_=c+f+v;if(_>0){const b=.5/Math.sqrt(_+1);this._w=.25/b,this._x=(y-m)*b,this._y=(h-g)*b,this._z=(d-u)*b}else if(c>f&&c>v){const b=2*Math.sqrt(1+c-f-v);this._w=(y-m)/b,this._x=.25*b,this._y=(u+d)/b,this._z=(h+g)/b}else if(f>v){const b=2*Math.sqrt(1+f-c-v);this._w=(h-g)/b,this._x=(u+d)/b,this._y=.25*b,this._z=(m+y)/b}else{const b=2*Math.sqrt(1+v-c-f);this._w=(d-u)/b,this._x=(h+g)/b,this._y=(m+y)/b,this._z=.25*b}return this._onChangeCallback(),this}setFromUnitVectors(a,o){let c=a.dot(o)+1;return c<Number.EPSILON?(c=0,Math.abs(a.x)>Math.abs(a.z)?(this._x=-a.y,this._y=a.x,this._z=0,this._w=c):(this._x=0,this._y=-a.z,this._z=a.y,this._w=c)):(this._x=a.y*o.z-a.z*o.y,this._y=a.z*o.x-a.x*o.z,this._z=a.x*o.y-a.y*o.x,this._w=c),this.normalize()}angleTo(a){return 2*Math.acos(Math.abs(aa(this.dot(a),-1,1)))}rotateTowards(a,o){const c=this.angleTo(a);if(0===c)return this;const u=Math.min(1,o/c);return this.slerp(a,u),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(a){return this._x*a._x+this._y*a._y+this._z*a._z+this._w*a._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let a=this.length();return 0===a?(this._x=0,this._y=0,this._z=0,this._w=1):(a=1/a,this._x=this._x*a,this._y=this._y*a,this._z=this._z*a,this._w=this._w*a),this._onChangeCallback(),this}multiply(a,o){return void 0!==o?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(a,o)):this.multiplyQuaternions(this,a)}premultiply(a){return this.multiplyQuaternions(a,this)}multiplyQuaternions(a,o){const c=a._x,u=a._y,h=a._z,d=a._w,f=o._x,m=o._y,g=o._z,y=o._w;return this._x=c*y+d*f+u*g-h*m,this._y=u*y+d*m+h*f-c*g,this._z=h*y+d*g+c*m-u*f,this._w=d*y-c*f-u*m-h*g,this._onChangeCallback(),this}slerp(a,o){if(0===o)return this;if(1===o)return this.copy(a);const c=this._x,u=this._y,h=this._z,d=this._w;let f=d*a._w+c*a._x+u*a._y+h*a._z;if(f<0?(this._w=-a._w,this._x=-a._x,this._y=-a._y,this._z=-a._z,f=-f):this.copy(a),f>=1)return this._w=d,this._x=c,this._y=u,this._z=h,this;const m=1-f*f;if(m<=Number.EPSILON){const b=1-o;return this._w=b*d+o*this._w,this._x=b*c+o*this._x,this._y=b*u+o*this._y,this._z=b*h+o*this._z,this.normalize(),this._onChangeCallback(),this}const g=Math.sqrt(m),y=Math.atan2(g,f),v=Math.sin((1-o)*y)/g,_=Math.sin(o*y)/g;return this._w=d*v+this._w*_,this._x=c*v+this._x*_,this._y=u*v+this._y*_,this._z=h*v+this._z*_,this._onChangeCallback(),this}slerpQuaternions(a,o,c){this.copy(a).slerp(o,c)}equals(a){return a._x===this._x&&a._y===this._y&&a._z===this._z&&a._w===this._w}fromArray(a,o=0){return this._x=a[o],this._y=a[o+1],this._z=a[o+2],this._w=a[o+3],this._onChangeCallback(),this}toArray(a=[],o=0){return a[o]=this._x,a[o+1]=this._y,a[o+2]=this._z,a[o+3]=this._w,a}fromBufferAttribute(a,o){return this._x=a.getX(o),this._y=a.getY(o),this._z=a.getZ(o),this._w=a.getW(o),this}_onChange(a){return this._onChangeCallback=a,this}_onChangeCallback(){}}xo.prototype.isQuaternion=!0;class oe{constructor(a=0,o=0,c=0){this.x=a,this.y=o,this.z=c}set(a,o,c){return void 0===c&&(c=this.z),this.x=a,this.y=o,this.z=c,this}setScalar(a){return this.x=a,this.y=a,this.z=a,this}setX(a){return this.x=a,this}setY(a){return this.y=a,this}setZ(a){return this.z=a,this}setComponent(a,o){switch(a){case 0:this.x=o;break;case 1:this.y=o;break;case 2:this.z=o;break;default:throw new Error("index is out of range: "+a)}return this}getComponent(a){switch(a){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+a)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(a){return this.x=a.x,this.y=a.y,this.z=a.z,this}add(a,o){return void 0!==o?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(a,o)):(this.x+=a.x,this.y+=a.y,this.z+=a.z,this)}addScalar(a){return this.x+=a,this.y+=a,this.z+=a,this}addVectors(a,o){return this.x=a.x+o.x,this.y=a.y+o.y,this.z=a.z+o.z,this}addScaledVector(a,o){return this.x+=a.x*o,this.y+=a.y*o,this.z+=a.z*o,this}sub(a,o){return void 0!==o?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(a,o)):(this.x-=a.x,this.y-=a.y,this.z-=a.z,this)}subScalar(a){return this.x-=a,this.y-=a,this.z-=a,this}subVectors(a,o){return this.x=a.x-o.x,this.y=a.y-o.y,this.z=a.z-o.z,this}multiply(a,o){return void 0!==o?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(a,o)):(this.x*=a.x,this.y*=a.y,this.z*=a.z,this)}multiplyScalar(a){return this.x*=a,this.y*=a,this.z*=a,this}multiplyVectors(a,o){return this.x=a.x*o.x,this.y=a.y*o.y,this.z=a.z*o.z,this}applyEuler(a){return a&&a.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(Tne.setFromEuler(a))}applyAxisAngle(a,o){return this.applyQuaternion(Tne.setFromAxisAngle(a,o))}applyMatrix3(a){const o=this.x,c=this.y,u=this.z,h=a.elements;return this.x=h[0]*o+h[3]*c+h[6]*u,this.y=h[1]*o+h[4]*c+h[7]*u,this.z=h[2]*o+h[5]*c+h[8]*u,this}applyNormalMatrix(a){return this.applyMatrix3(a).normalize()}applyMatrix4(a){const o=this.x,c=this.y,u=this.z,h=a.elements,d=1/(h[3]*o+h[7]*c+h[11]*u+h[15]);return this.x=(h[0]*o+h[4]*c+h[8]*u+h[12])*d,this.y=(h[1]*o+h[5]*c+h[9]*u+h[13])*d,this.z=(h[2]*o+h[6]*c+h[10]*u+h[14])*d,this}applyQuaternion(a){const o=this.x,c=this.y,u=this.z,h=a.x,d=a.y,f=a.z,m=a.w,g=m*o+d*u-f*c,y=m*c+f*o-h*u,v=m*u+h*c-d*o,_=-h*o-d*c-f*u;return this.x=g*m+_*-h+y*-f-v*-d,this.y=y*m+_*-d+v*-h-g*-f,this.z=v*m+_*-f+g*-d-y*-h,this}project(a){return this.applyMatrix4(a.matrixWorldInverse).applyMatrix4(a.projectionMatrix)}unproject(a){return this.applyMatrix4(a.projectionMatrixInverse).applyMatrix4(a.matrixWorld)}transformDirection(a){const o=this.x,c=this.y,u=this.z,h=a.elements;return this.x=h[0]*o+h[4]*c+h[8]*u,this.y=h[1]*o+h[5]*c+h[9]*u,this.z=h[2]*o+h[6]*c+h[10]*u,this.normalize()}divide(a){return this.x/=a.x,this.y/=a.y,this.z/=a.z,this}divideScalar(a){return this.multiplyScalar(1/a)}min(a){return this.x=Math.min(this.x,a.x),this.y=Math.min(this.y,a.y),this.z=Math.min(this.z,a.z),this}max(a){return this.x=Math.max(this.x,a.x),this.y=Math.max(this.y,a.y),this.z=Math.max(this.z,a.z),this}clamp(a,o){return this.x=Math.max(a.x,Math.min(o.x,this.x)),this.y=Math.max(a.y,Math.min(o.y,this.y)),this.z=Math.max(a.z,Math.min(o.z,this.z)),this}clampScalar(a,o){return this.x=Math.max(a,Math.min(o,this.x)),this.y=Math.max(a,Math.min(o,this.y)),this.z=Math.max(a,Math.min(o,this.z)),this}clampLength(a,o){const c=this.length();return this.divideScalar(c||1).multiplyScalar(Math.max(a,Math.min(o,c)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(a){return this.x*a.x+this.y*a.y+this.z*a.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(a){return this.normalize().multiplyScalar(a)}lerp(a,o){return this.x+=(a.x-this.x)*o,this.y+=(a.y-this.y)*o,this.z+=(a.z-this.z)*o,this}lerpVectors(a,o,c){return this.x=a.x+(o.x-a.x)*c,this.y=a.y+(o.y-a.y)*c,this.z=a.z+(o.z-a.z)*c,this}cross(a,o){return void 0!==o?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(a,o)):this.crossVectors(this,a)}crossVectors(a,o){const c=a.x,u=a.y,h=a.z,d=o.x,f=o.y,m=o.z;return this.x=u*m-h*f,this.y=h*d-c*m,this.z=c*f-u*d,this}projectOnVector(a){const o=a.lengthSq();if(0===o)return this.set(0,0,0);const c=a.dot(this)/o;return this.copy(a).multiplyScalar(c)}projectOnPlane(a){return sB.copy(this).projectOnVector(a),this.sub(sB)}reflect(a){return this.sub(sB.copy(a).multiplyScalar(2*this.dot(a)))}angleTo(a){const o=Math.sqrt(this.lengthSq()*a.lengthSq());if(0===o)return Math.PI/2;const c=this.dot(a)/o;return Math.acos(aa(c,-1,1))}distanceTo(a){return Math.sqrt(this.distanceToSquared(a))}distanceToSquared(a){const o=this.x-a.x,c=this.y-a.y,u=this.z-a.z;return o*o+c*c+u*u}manhattanDistanceTo(a){return Math.abs(this.x-a.x)+Math.abs(this.y-a.y)+Math.abs(this.z-a.z)}setFromSpherical(a){return this.setFromSphericalCoords(a.radius,a.phi,a.theta)}setFromSphericalCoords(a,o,c){const u=Math.sin(o)*a;return this.x=u*Math.sin(c),this.y=Math.cos(o)*a,this.z=u*Math.cos(c),this}setFromCylindrical(a){return this.setFromCylindricalCoords(a.radius,a.theta,a.y)}setFromCylindricalCoords(a,o,c){return this.x=a*Math.sin(o),this.y=c,this.z=a*Math.cos(o),this}setFromMatrixPosition(a){const o=a.elements;return this.x=o[12],this.y=o[13],this.z=o[14],this}setFromMatrixScale(a){const o=this.setFromMatrixColumn(a,0).length(),c=this.setFromMatrixColumn(a,1).length(),u=this.setFromMatrixColumn(a,2).length();return this.x=o,this.y=c,this.z=u,this}setFromMatrixColumn(a,o){return this.fromArray(a.elements,4*o)}setFromMatrix3Column(a,o){return this.fromArray(a.elements,3*o)}equals(a){return a.x===this.x&&a.y===this.y&&a.z===this.z}fromArray(a,o=0){return this.x=a[o],this.y=a[o+1],this.z=a[o+2],this}toArray(a=[],o=0){return a[o]=this.x,a[o+1]=this.y,a[o+2]=this.z,a}fromBufferAttribute(a,o,c){return void 0!==c&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=a.getX(o),this.y=a.getY(o),this.z=a.getZ(o),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}}oe.prototype.isVector3=!0;const sB=new oe,Tne=new xo;class oc{constructor(a=new oe(1/0,1/0,1/0),o=new oe(-1/0,-1/0,-1/0)){this.min=a,this.max=o}set(a,o){return this.min.copy(a),this.max.copy(o),this}setFromArray(a){let o=1/0,c=1/0,u=1/0,h=-1/0,d=-1/0,f=-1/0;for(let m=0,g=a.length;m<g;m+=3){const y=a[m],v=a[m+1],_=a[m+2];y<o&&(o=y),v<c&&(c=v),_<u&&(u=_),y>h&&(h=y),v>d&&(d=v),_>f&&(f=_)}return this.min.set(o,c,u),this.max.set(h,d,f),this}setFromBufferAttribute(a){let o=1/0,c=1/0,u=1/0,h=-1/0,d=-1/0,f=-1/0;for(let m=0,g=a.count;m<g;m++){const y=a.getX(m),v=a.getY(m),_=a.getZ(m);y<o&&(o=y),v<c&&(c=v),_<u&&(u=_),y>h&&(h=y),v>d&&(d=v),_>f&&(f=_)}return this.min.set(o,c,u),this.max.set(h,d,f),this}setFromPoints(a){this.makeEmpty();for(let o=0,c=a.length;o<c;o++)this.expandByPoint(a[o]);return this}setFromCenterAndSize(a,o){const c=Aw.copy(o).multiplyScalar(.5);return this.min.copy(a).sub(c),this.max.copy(a).add(c),this}setFromObject(a){return this.makeEmpty(),this.expandByObject(a)}clone(){return(new this.constructor).copy(this)}copy(a){return this.min.copy(a.min),this.max.copy(a.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(a){return this.isEmpty()?a.set(0,0,0):a.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(a){return this.isEmpty()?a.set(0,0,0):a.subVectors(this.max,this.min)}expandByPoint(a){return this.min.min(a),this.max.max(a),this}expandByVector(a){return this.min.sub(a),this.max.add(a),this}expandByScalar(a){return this.min.addScalar(-a),this.max.addScalar(a),this}expandByObject(a){a.updateWorldMatrix(!1,!1);const o=a.geometry;void 0!==o&&(null===o.boundingBox&&o.computeBoundingBox(),oB.copy(o.boundingBox),oB.applyMatrix4(a.matrixWorld),this.union(oB));const c=a.children;for(let u=0,h=c.length;u<h;u++)this.expandByObject(c[u]);return this}containsPoint(a){return!(a.x<this.min.x||a.x>this.max.x||a.y<this.min.y||a.y>this.max.y||a.z<this.min.z||a.z>this.max.z)}containsBox(a){return this.min.x<=a.min.x&&a.max.x<=this.max.x&&this.min.y<=a.min.y&&a.max.y<=this.max.y&&this.min.z<=a.min.z&&a.max.z<=this.max.z}getParameter(a,o){return o.set((a.x-this.min.x)/(this.max.x-this.min.x),(a.y-this.min.y)/(this.max.y-this.min.y),(a.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(a){return!(a.max.x<this.min.x||a.min.x>this.max.x||a.max.y<this.min.y||a.min.y>this.max.y||a.max.z<this.min.z||a.min.z>this.max.z)}intersectsSphere(a){return this.clampPoint(a.center,Aw),Aw.distanceToSquared(a.center)<=a.radius*a.radius}intersectsPlane(a){let o,c;return a.normal.x>0?(o=a.normal.x*this.min.x,c=a.normal.x*this.max.x):(o=a.normal.x*this.max.x,c=a.normal.x*this.min.x),a.normal.y>0?(o+=a.normal.y*this.min.y,c+=a.normal.y*this.max.y):(o+=a.normal.y*this.max.y,c+=a.normal.y*this.min.y),a.normal.z>0?(o+=a.normal.z*this.min.z,c+=a.normal.z*this.max.z):(o+=a.normal.z*this.max.z,c+=a.normal.z*this.min.z),o<=-a.constant&&c>=-a.constant}intersectsTriangle(a){if(this.isEmpty())return!1;this.getCenter(Iw),DI.subVectors(this.max,Iw),F0.subVectors(a.a,Iw),k0.subVectors(a.b,Iw),V0.subVectors(a.c,Iw),Bp.subVectors(k0,F0),Up.subVectors(V0,k0),Wg.subVectors(F0,V0);let o=[0,-Bp.z,Bp.y,0,-Up.z,Up.y,0,-Wg.z,Wg.y,Bp.z,0,-Bp.x,Up.z,0,-Up.x,Wg.z,0,-Wg.x,-Bp.y,Bp.x,0,-Up.y,Up.x,0,-Wg.y,Wg.x,0];return!(!aB(o,F0,k0,V0,DI)||(o=[1,0,0,0,1,0,0,0,1],!aB(o,F0,k0,V0,DI)))&&(AI.crossVectors(Bp,Up),o=[AI.x,AI.y,AI.z],aB(o,F0,k0,V0,DI))}clampPoint(a,o){return o.copy(a).clamp(this.min,this.max)}distanceToPoint(a){return Aw.copy(a).clamp(this.min,this.max).sub(a).length()}getBoundingSphere(a){return this.getCenter(a.center),a.radius=.5*this.getSize(Aw).length(),a}intersect(a){return this.min.max(a.min),this.max.min(a.max),this.isEmpty()&&this.makeEmpty(),this}union(a){return this.min.min(a.min),this.max.max(a.max),this}applyMatrix4(a){return this.isEmpty()||(hf[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(a),hf[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(a),hf[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(a),hf[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(a),hf[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(a),hf[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(a),hf[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(a),hf[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(a),this.setFromPoints(hf)),this}translate(a){return this.min.add(a),this.max.add(a),this}equals(a){return a.min.equals(this.min)&&a.max.equals(this.max)}}oc.prototype.isBox3=!0;const hf=[new oe,new oe,new oe,new oe,new oe,new oe,new oe,new oe],Aw=new oe,oB=new oc,F0=new oe,k0=new oe,V0=new oe,Bp=new oe,Up=new oe,Wg=new oe,Iw=new oe,DI=new oe,AI=new oe,qg=new oe;function aB(l,a,o,c,u){for(let h=0,d=l.length-3;h<=d;h+=3){qg.fromArray(l,h);const f=u.x*Math.abs(qg.x)+u.y*Math.abs(qg.y)+u.z*Math.abs(qg.z),m=a.dot(qg),g=o.dot(qg),y=c.dot(qg);if(Math.max(-Math.max(m,g,y),Math.min(m,g,y))>f)return!1}return!0}const E$e=new oc,wne=new oe,lB=new oe,cB=new oe;class Gp{constructor(a=new oe,o=-1){this.center=a,this.radius=o}set(a,o){return this.center.copy(a),this.radius=o,this}setFromPoints(a,o){const c=this.center;void 0!==o?c.copy(o):E$e.setFromPoints(a).getCenter(c);let u=0;for(let h=0,d=a.length;h<d;h++)u=Math.max(u,c.distanceToSquared(a[h]));return this.radius=Math.sqrt(u),this}copy(a){return this.center.copy(a.center),this.radius=a.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(a){return a.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(a){return a.distanceTo(this.center)-this.radius}intersectsSphere(a){const o=this.radius+a.radius;return a.center.distanceToSquared(this.center)<=o*o}intersectsBox(a){return a.intersectsSphere(this)}intersectsPlane(a){return Math.abs(a.distanceToPoint(this.center))<=this.radius}clampPoint(a,o){const c=this.center.distanceToSquared(a);return o.copy(a),c>this.radius*this.radius&&(o.sub(this.center).normalize(),o.multiplyScalar(this.radius).add(this.center)),o}getBoundingBox(a){return this.isEmpty()?(a.makeEmpty(),a):(a.set(this.center,this.center),a.expandByScalar(this.radius),a)}applyMatrix4(a){return this.center.applyMatrix4(a),this.radius=this.radius*a.getMaxScaleOnAxis(),this}translate(a){return this.center.add(a),this}expandByPoint(a){cB.subVectors(a,this.center);const o=cB.lengthSq();if(o>this.radius*this.radius){const c=Math.sqrt(o),u=.5*(c-this.radius);this.center.add(cB.multiplyScalar(u/c)),this.radius+=u}return this}union(a){return lB.subVectors(a.center,this.center).normalize().multiplyScalar(a.radius),this.expandByPoint(wne.copy(a.center).add(lB)),this.expandByPoint(wne.copy(a.center).sub(lB)),this}equals(a){return a.center.equals(this.center)&&a.radius===this.radius}clone(){return(new this.constructor).copy(this)}}const df=new oe,uB=new oe,II=new oe,zp=new oe,hB=new oe,RI=new oe,dB=new oe;class Xg{constructor(a=new oe,o=new oe(0,0,-1)){this.origin=a,this.direction=o}set(a,o){return this.origin.copy(a),this.direction.copy(o),this}copy(a){return this.origin.copy(a.origin),this.direction.copy(a.direction),this}at(a,o){return o.copy(this.direction).multiplyScalar(a).add(this.origin)}lookAt(a){return this.direction.copy(a).sub(this.origin).normalize(),this}recast(a){return this.origin.copy(this.at(a,df)),this}closestPointToPoint(a,o){o.subVectors(a,this.origin);const c=o.dot(this.direction);return c<0?o.copy(this.origin):o.copy(this.direction).multiplyScalar(c).add(this.origin)}distanceToPoint(a){return Math.sqrt(this.distanceSqToPoint(a))}distanceSqToPoint(a){const o=df.subVectors(a,this.origin).dot(this.direction);return o<0?this.origin.distanceToSquared(a):(df.copy(this.direction).multiplyScalar(o).add(this.origin),df.distanceToSquared(a))}distanceSqToSegment(a,o,c,u){uB.copy(a).add(o).multiplyScalar(.5),II.copy(o).sub(a).normalize(),zp.copy(this.origin).sub(uB);const h=.5*a.distanceTo(o),d=-this.direction.dot(II),f=zp.dot(this.direction),m=-zp.dot(II),g=zp.lengthSq(),y=Math.abs(1-d*d);let v,_,b,w;if(y>0)if(v=d*m-f,_=d*f-m,w=h*y,v>=0)if(_>=-w)if(_<=w){const C=1/y;v*=C,_*=C,b=v*(v+d*_+2*f)+_*(d*v+_+2*m)+g}else _=h,v=Math.max(0,-(d*_+f)),b=-v*v+_*(_+2*m)+g;else _=-h,v=Math.max(0,-(d*_+f)),b=-v*v+_*(_+2*m)+g;else _<=-w?(v=Math.max(0,-(-d*h+f)),_=v>0?-h:Math.min(Math.max(-h,-m),h),b=-v*v+_*(_+2*m)+g):_<=w?(v=0,_=Math.min(Math.max(-h,-m),h),b=_*(_+2*m)+g):(v=Math.max(0,-(d*h+f)),_=v>0?h:Math.min(Math.max(-h,-m),h),b=-v*v+_*(_+2*m)+g);else _=d>0?-h:h,v=Math.max(0,-(d*_+f)),b=-v*v+_*(_+2*m)+g;return c&&c.copy(this.direction).multiplyScalar(v).add(this.origin),u&&u.copy(II).multiplyScalar(_).add(uB),b}intersectSphere(a,o){df.subVectors(a.center,this.origin);const c=df.dot(this.direction),u=df.dot(df)-c*c,h=a.radius*a.radius;if(u>h)return null;const d=Math.sqrt(h-u),f=c-d,m=c+d;return f<0&&m<0?null:this.at(f<0?m:f,o)}intersectsSphere(a){return this.distanceSqToPoint(a.center)<=a.radius*a.radius}distanceToPlane(a){const o=a.normal.dot(this.direction);if(0===o)return 0===a.distanceToPoint(this.origin)?0:null;const c=-(this.origin.dot(a.normal)+a.constant)/o;return c>=0?c:null}intersectPlane(a,o){const c=this.distanceToPlane(a);return null===c?null:this.at(c,o)}intersectsPlane(a){const o=a.distanceToPoint(this.origin);return 0===o||a.normal.dot(this.direction)*o<0}intersectBox(a,o){let c,u,h,d,f,m;const g=1/this.direction.x,y=1/this.direction.y,v=1/this.direction.z,_=this.origin;return g>=0?(c=(a.min.x-_.x)*g,u=(a.max.x-_.x)*g):(c=(a.max.x-_.x)*g,u=(a.min.x-_.x)*g),y>=0?(h=(a.min.y-_.y)*y,d=(a.max.y-_.y)*y):(h=(a.max.y-_.y)*y,d=(a.min.y-_.y)*y),c>d||h>u||((h>c||c!=c)&&(c=h),(d<u||u!=u)&&(u=d),v>=0?(f=(a.min.z-_.z)*v,m=(a.max.z-_.z)*v):(f=(a.max.z-_.z)*v,m=(a.min.z-_.z)*v),c>m||f>u)||((f>c||c!=c)&&(c=f),(m<u||u!=u)&&(u=m),u<0)?null:this.at(c>=0?c:u,o)}intersectsBox(a){return null!==this.intersectBox(a,df)}intersectTriangle(a,o,c,u,h){hB.subVectors(o,a),RI.subVectors(c,a),dB.crossVectors(hB,RI);let f,d=this.direction.dot(dB);if(d>0){if(u)return null;f=1}else{if(!(d<0))return null;f=-1,d=-d}zp.subVectors(this.origin,a);const m=f*this.direction.dot(RI.crossVectors(zp,RI));if(m<0)return null;const g=f*this.direction.dot(hB.cross(zp));if(g<0||m+g>d)return null;const y=-f*zp.dot(dB);return y<0?null:this.at(y/d,h)}applyMatrix4(a){return this.origin.applyMatrix4(a),this.direction.transformDirection(a),this}equals(a){return a.origin.equals(this.origin)&&a.direction.equals(this.direction)}clone(){return(new this.constructor).copy(this)}}class An{constructor(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}set(a,o,c,u,h,d,f,m,g,y,v,_,b,w,C,E){const M=this.elements;return M[0]=a,M[4]=o,M[8]=c,M[12]=u,M[1]=h,M[5]=d,M[9]=f,M[13]=m,M[2]=g,M[6]=y,M[10]=v,M[14]=_,M[3]=b,M[7]=w,M[11]=C,M[15]=E,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return(new An).fromArray(this.elements)}copy(a){const o=this.elements,c=a.elements;return o[0]=c[0],o[1]=c[1],o[2]=c[2],o[3]=c[3],o[4]=c[4],o[5]=c[5],o[6]=c[6],o[7]=c[7],o[8]=c[8],o[9]=c[9],o[10]=c[10],o[11]=c[11],o[12]=c[12],o[13]=c[13],o[14]=c[14],o[15]=c[15],this}copyPosition(a){const o=this.elements,c=a.elements;return o[12]=c[12],o[13]=c[13],o[14]=c[14],this}setFromMatrix3(a){const o=a.elements;return this.set(o[0],o[3],o[6],0,o[1],o[4],o[7],0,o[2],o[5],o[8],0,0,0,0,1),this}extractBasis(a,o,c){return a.setFromMatrixColumn(this,0),o.setFromMatrixColumn(this,1),c.setFromMatrixColumn(this,2),this}makeBasis(a,o,c){return this.set(a.x,o.x,c.x,0,a.y,o.y,c.y,0,a.z,o.z,c.z,0,0,0,0,1),this}extractRotation(a){const o=this.elements,c=a.elements,u=1/B0.setFromMatrixColumn(a,0).length(),h=1/B0.setFromMatrixColumn(a,1).length(),d=1/B0.setFromMatrixColumn(a,2).length();return o[0]=c[0]*u,o[1]=c[1]*u,o[2]=c[2]*u,o[3]=0,o[4]=c[4]*h,o[5]=c[5]*h,o[6]=c[6]*h,o[7]=0,o[8]=c[8]*d,o[9]=c[9]*d,o[10]=c[10]*d,o[11]=0,o[12]=0,o[13]=0,o[14]=0,o[15]=1,this}makeRotationFromEuler(a){a&&a.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");const o=this.elements,c=a.x,u=a.y,h=a.z,d=Math.cos(c),f=Math.sin(c),m=Math.cos(u),g=Math.sin(u),y=Math.cos(h),v=Math.sin(h);if("XYZ"===a.order){const _=d*y,b=d*v,w=f*y,C=f*v;o[0]=m*y,o[4]=-m*v,o[8]=g,o[1]=b+w*g,o[5]=_-C*g,o[9]=-f*m,o[2]=C-_*g,o[6]=w+b*g,o[10]=d*m}else if("YXZ"===a.order){const _=m*y,b=m*v,w=g*y,C=g*v;o[0]=_+C*f,o[4]=w*f-b,o[8]=d*g,o[1]=d*v,o[5]=d*y,o[9]=-f,o[2]=b*f-w,o[6]=C+_*f,o[10]=d*m}else if("ZXY"===a.order){const _=m*y,b=m*v,w=g*y,C=g*v;o[0]=_-C*f,o[4]=-d*v,o[8]=w+b*f,o[1]=b+w*f,o[5]=d*y,o[9]=C-_*f,o[2]=-d*g,o[6]=f,o[10]=d*m}else if("ZYX"===a.order){const _=d*y,b=d*v,w=f*y,C=f*v;o[0]=m*y,o[4]=w*g-b,o[8]=_*g+C,o[1]=m*v,o[5]=C*g+_,o[9]=b*g-w,o[2]=-g,o[6]=f*m,o[10]=d*m}else if("YZX"===a.order){const _=d*m,b=d*g,w=f*m,C=f*g;o[0]=m*y,o[4]=C-_*v,o[8]=w*v+b,o[1]=v,o[5]=d*y,o[9]=-f*y,o[2]=-g*y,o[6]=b*v+w,o[10]=_-C*v}else if("XZY"===a.order){const _=d*m,b=d*g,w=f*m,C=f*g;o[0]=m*y,o[4]=-v,o[8]=g*y,o[1]=_*v+C,o[5]=d*y,o[9]=b*v-w,o[2]=w*v-b,o[6]=f*y,o[10]=C*v+_}return o[3]=0,o[7]=0,o[11]=0,o[12]=0,o[13]=0,o[14]=0,o[15]=1,this}makeRotationFromQuaternion(a){return this.compose(M$e,a,D$e)}lookAt(a,o,c){const u=this.elements;return ac.subVectors(a,o),0===ac.lengthSq()&&(ac.z=1),ac.normalize(),Hp.crossVectors(c,ac),0===Hp.lengthSq()&&(1===Math.abs(c.z)?ac.x+=1e-4:ac.z+=1e-4,ac.normalize(),Hp.crossVectors(c,ac)),Hp.normalize(),PI.crossVectors(ac,Hp),u[0]=Hp.x,u[4]=PI.x,u[8]=ac.x,u[1]=Hp.y,u[5]=PI.y,u[9]=ac.y,u[2]=Hp.z,u[6]=PI.z,u[10]=ac.z,this}multiply(a,o){return void 0!==o?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(a,o)):this.multiplyMatrices(this,a)}premultiply(a){return this.multiplyMatrices(a,this)}multiplyMatrices(a,o){const c=a.elements,u=o.elements,h=this.elements,d=c[0],f=c[4],m=c[8],g=c[12],y=c[1],v=c[5],_=c[9],b=c[13],w=c[2],C=c[6],E=c[10],M=c[14],x=c[3],R=c[7],P=c[11],k=c[15],W=u[0],U=u[4],K=u[8],Q=u[12],se=u[1],te=u[5],De=u[9],de=u[13],ye=u[2],_e=u[6],ue=u[10],ce=u[14],Re=u[3],Oe=u[7],Ae=u[11],We=u[15];return h[0]=d*W+f*se+m*ye+g*Re,h[4]=d*U+f*te+m*_e+g*Oe,h[8]=d*K+f*De+m*ue+g*Ae,h[12]=d*Q+f*de+m*ce+g*We,h[1]=y*W+v*se+_*ye+b*Re,h[5]=y*U+v*te+_*_e+b*Oe,h[9]=y*K+v*De+_*ue+b*Ae,h[13]=y*Q+v*de+_*ce+b*We,h[2]=w*W+C*se+E*ye+M*Re,h[6]=w*U+C*te+E*_e+M*Oe,h[10]=w*K+C*De+E*ue+M*Ae,h[14]=w*Q+C*de+E*ce+M*We,h[3]=x*W+R*se+P*ye+k*Re,h[7]=x*U+R*te+P*_e+k*Oe,h[11]=x*K+R*De+P*ue+k*Ae,h[15]=x*Q+R*de+P*ce+k*We,this}multiplyScalar(a){const o=this.elements;return o[0]*=a,o[4]*=a,o[8]*=a,o[12]*=a,o[1]*=a,o[5]*=a,o[9]*=a,o[13]*=a,o[2]*=a,o[6]*=a,o[10]*=a,o[14]*=a,o[3]*=a,o[7]*=a,o[11]*=a,o[15]*=a,this}determinant(){const a=this.elements,o=a[0],c=a[4],u=a[8],h=a[12],d=a[1],f=a[5],m=a[9],g=a[13],y=a[2],v=a[6],_=a[10],b=a[14];return a[3]*(+h*m*v-u*g*v-h*f*_+c*g*_+u*f*b-c*m*b)+a[7]*(+o*m*b-o*g*_+h*d*_-u*d*b+u*g*y-h*m*y)+a[11]*(+o*g*v-o*f*b-h*d*v+c*d*b+h*f*y-c*g*y)+a[15]*(-u*f*y-o*m*v+o*f*_+u*d*v-c*d*_+c*m*y)}transpose(){const a=this.elements;let o;return o=a[1],a[1]=a[4],a[4]=o,o=a[2],a[2]=a[8],a[8]=o,o=a[6],a[6]=a[9],a[9]=o,o=a[3],a[3]=a[12],a[12]=o,o=a[7],a[7]=a[13],a[13]=o,o=a[11],a[11]=a[14],a[14]=o,this}setPosition(a,o,c){const u=this.elements;return a.isVector3?(u[12]=a.x,u[13]=a.y,u[14]=a.z):(u[12]=a,u[13]=o,u[14]=c),this}invert(){const a=this.elements,o=a[0],c=a[1],u=a[2],h=a[3],d=a[4],f=a[5],m=a[6],g=a[7],y=a[8],v=a[9],_=a[10],b=a[11],w=a[12],C=a[13],E=a[14],M=a[15],x=v*E*g-C*_*g+C*m*b-f*E*b-v*m*M+f*_*M,R=w*_*g-y*E*g-w*m*b+d*E*b+y*m*M-d*_*M,P=y*C*g-w*v*g+w*f*b-d*C*b-y*f*M+d*v*M,k=w*v*m-y*C*m-w*f*_+d*C*_+y*f*E-d*v*E,W=o*x+c*R+u*P+h*k;if(0===W)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const U=1/W;return a[0]=x*U,a[1]=(C*_*h-v*E*h-C*u*b+c*E*b+v*u*M-c*_*M)*U,a[2]=(f*E*h-C*m*h+C*u*g-c*E*g-f*u*M+c*m*M)*U,a[3]=(v*m*h-f*_*h-v*u*g+c*_*g+f*u*b-c*m*b)*U,a[4]=R*U,a[5]=(y*E*h-w*_*h+w*u*b-o*E*b-y*u*M+o*_*M)*U,a[6]=(w*m*h-d*E*h-w*u*g+o*E*g+d*u*M-o*m*M)*U,a[7]=(d*_*h-y*m*h+y*u*g-o*_*g-d*u*b+o*m*b)*U,a[8]=P*U,a[9]=(w*v*h-y*C*h-w*c*b+o*C*b+y*c*M-o*v*M)*U,a[10]=(d*C*h-w*f*h+w*c*g-o*C*g-d*c*M+o*f*M)*U,a[11]=(y*f*h-d*v*h-y*c*g+o*v*g+d*c*b-o*f*b)*U,a[12]=k*U,a[13]=(y*C*u-w*v*u+w*c*_-o*C*_-y*c*E+o*v*E)*U,a[14]=(w*f*u-d*C*u-w*c*m+o*C*m+d*c*E-o*f*E)*U,a[15]=(d*v*u-y*f*u+y*c*m-o*v*m-d*c*_+o*f*_)*U,this}scale(a){const o=this.elements,c=a.x,u=a.y,h=a.z;return o[0]*=c,o[4]*=u,o[8]*=h,o[1]*=c,o[5]*=u,o[9]*=h,o[2]*=c,o[6]*=u,o[10]*=h,o[3]*=c,o[7]*=u,o[11]*=h,this}getMaxScaleOnAxis(){const a=this.elements;return Math.sqrt(Math.max(a[0]*a[0]+a[1]*a[1]+a[2]*a[2],a[4]*a[4]+a[5]*a[5]+a[6]*a[6],a[8]*a[8]+a[9]*a[9]+a[10]*a[10]))}makeTranslation(a,o,c){return this.set(1,0,0,a,0,1,0,o,0,0,1,c,0,0,0,1),this}makeRotationX(a){const o=Math.cos(a),c=Math.sin(a);return this.set(1,0,0,0,0,o,-c,0,0,c,o,0,0,0,0,1),this}makeRotationY(a){const o=Math.cos(a),c=Math.sin(a);return this.set(o,0,c,0,0,1,0,0,-c,0,o,0,0,0,0,1),this}makeRotationZ(a){const o=Math.cos(a),c=Math.sin(a);return this.set(o,-c,0,0,c,o,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(a,o){const c=Math.cos(o),u=Math.sin(o),h=1-c,d=a.x,f=a.y,m=a.z,g=h*d,y=h*f;return this.set(g*d+c,g*f-u*m,g*m+u*f,0,g*f+u*m,y*f+c,y*m-u*d,0,g*m-u*f,y*m+u*d,h*m*m+c,0,0,0,0,1),this}makeScale(a,o,c){return this.set(a,0,0,0,0,o,0,0,0,0,c,0,0,0,0,1),this}makeShear(a,o,c,u,h,d){return this.set(1,c,h,0,a,1,d,0,o,u,1,0,0,0,0,1),this}compose(a,o,c){const u=this.elements,h=o._x,d=o._y,f=o._z,m=o._w,g=h+h,y=d+d,v=f+f,_=h*g,b=h*y,w=h*v,C=d*y,E=d*v,M=f*v,x=m*g,R=m*y,P=m*v,k=c.x,W=c.y,U=c.z;return u[0]=(1-(C+M))*k,u[1]=(b+P)*k,u[2]=(w-R)*k,u[3]=0,u[4]=(b-P)*W,u[5]=(1-(_+M))*W,u[6]=(E+x)*W,u[7]=0,u[8]=(w+R)*U,u[9]=(E-x)*U,u[10]=(1-(_+C))*U,u[11]=0,u[12]=a.x,u[13]=a.y,u[14]=a.z,u[15]=1,this}decompose(a,o,c){const u=this.elements;let h=B0.set(u[0],u[1],u[2]).length();const d=B0.set(u[4],u[5],u[6]).length(),f=B0.set(u[8],u[9],u[10]).length();this.determinant()<0&&(h=-h),a.x=u[12],a.y=u[13],a.z=u[14],ju.copy(this);const g=1/h,y=1/d,v=1/f;return ju.elements[0]*=g,ju.elements[1]*=g,ju.elements[2]*=g,ju.elements[4]*=y,ju.elements[5]*=y,ju.elements[6]*=y,ju.elements[8]*=v,ju.elements[9]*=v,ju.elements[10]*=v,o.setFromRotationMatrix(ju),c.x=h,c.y=d,c.z=f,this}makePerspective(a,o,c,u,h,d){void 0===d&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");const f=this.elements,g=2*h/(c-u),y=(o+a)/(o-a),v=(c+u)/(c-u),_=-(d+h)/(d-h),b=-2*d*h/(d-h);return f[0]=2*h/(o-a),f[4]=0,f[8]=y,f[12]=0,f[1]=0,f[5]=g,f[9]=v,f[13]=0,f[2]=0,f[6]=0,f[10]=_,f[14]=b,f[3]=0,f[7]=0,f[11]=-1,f[15]=0,this}makeOrthographic(a,o,c,u,h,d){const f=this.elements,m=1/(o-a),g=1/(c-u),y=1/(d-h),v=(o+a)*m,_=(c+u)*g,b=(d+h)*y;return f[0]=2*m,f[4]=0,f[8]=0,f[12]=-v,f[1]=0,f[5]=2*g,f[9]=0,f[13]=-_,f[2]=0,f[6]=0,f[10]=-2*y,f[14]=-b,f[3]=0,f[7]=0,f[11]=0,f[15]=1,this}equals(a){const o=this.elements,c=a.elements;for(let u=0;u<16;u++)if(o[u]!==c[u])return!1;return!0}fromArray(a,o=0){for(let c=0;c<16;c++)this.elements[c]=a[c+o];return this}toArray(a=[],o=0){const c=this.elements;return a[o]=c[0],a[o+1]=c[1],a[o+2]=c[2],a[o+3]=c[3],a[o+4]=c[4],a[o+5]=c[5],a[o+6]=c[6],a[o+7]=c[7],a[o+8]=c[8],a[o+9]=c[9],a[o+10]=c[10],a[o+11]=c[11],a[o+12]=c[12],a[o+13]=c[13],a[o+14]=c[14],a[o+15]=c[15],a}}An.prototype.isMatrix4=!0;const B0=new oe,ju=new An,M$e=new oe(0,0,0),D$e=new oe(1,1,1),Hp=new oe,PI=new oe,ac=new oe,Cne=new An,xne=new xo;class U0{constructor(a=0,o=0,c=0,u=U0.DefaultOrder){this._x=a,this._y=o,this._z=c,this._order=u}get x(){return this._x}set x(a){this._x=a,this._onChangeCallback()}get y(){return this._y}set y(a){this._y=a,this._onChangeCallback()}get z(){return this._z}set z(a){this._z=a,this._onChangeCallback()}get order(){return this._order}set order(a){this._order=a,this._onChangeCallback()}set(a,o,c,u=this._order){return this._x=a,this._y=o,this._z=c,this._order=u,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(a){return this._x=a._x,this._y=a._y,this._z=a._z,this._order=a._order,this._onChangeCallback(),this}setFromRotationMatrix(a,o=this._order,c=!0){const u=a.elements,h=u[0],d=u[4],f=u[8],m=u[1],g=u[5],y=u[9],v=u[2],_=u[6],b=u[10];switch(o){case"XYZ":this._y=Math.asin(aa(f,-1,1)),Math.abs(f)<.9999999?(this._x=Math.atan2(-y,b),this._z=Math.atan2(-d,h)):(this._x=Math.atan2(_,g),this._z=0);break;case"YXZ":this._x=Math.asin(-aa(y,-1,1)),Math.abs(y)<.9999999?(this._y=Math.atan2(f,b),this._z=Math.atan2(m,g)):(this._y=Math.atan2(-v,h),this._z=0);break;case"ZXY":this._x=Math.asin(aa(_,-1,1)),Math.abs(_)<.9999999?(this._y=Math.atan2(-v,b),this._z=Math.atan2(-d,g)):(this._y=0,this._z=Math.atan2(m,h));break;case"ZYX":this._y=Math.asin(-aa(v,-1,1)),Math.abs(v)<.9999999?(this._x=Math.atan2(_,b),this._z=Math.atan2(m,h)):(this._x=0,this._z=Math.atan2(-d,g));break;case"YZX":this._z=Math.asin(aa(m,-1,1)),Math.abs(m)<.9999999?(this._x=Math.atan2(-y,g),this._y=Math.atan2(-v,h)):(this._x=0,this._y=Math.atan2(f,b));break;case"XZY":this._z=Math.asin(-aa(d,-1,1)),Math.abs(d)<.9999999?(this._x=Math.atan2(_,g),this._y=Math.atan2(f,h)):(this._x=Math.atan2(-y,b),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+o)}return this._order=o,!0===c&&this._onChangeCallback(),this}setFromQuaternion(a,o,c){return Cne.makeRotationFromQuaternion(a),this.setFromRotationMatrix(Cne,o,c)}setFromVector3(a,o=this._order){return this.set(a.x,a.y,a.z,o)}reorder(a){return xne.setFromEuler(this),this.setFromQuaternion(xne,a)}equals(a){return a._x===this._x&&a._y===this._y&&a._z===this._z&&a._order===this._order}fromArray(a){return this._x=a[0],this._y=a[1],this._z=a[2],void 0!==a[3]&&(this._order=a[3]),this._onChangeCallback(),this}toArray(a=[],o=0){return a[o]=this._x,a[o+1]=this._y,a[o+2]=this._z,a[o+3]=this._order,a}toVector3(a){return a?a.set(this._x,this._y,this._z):new oe(this._x,this._y,this._z)}_onChange(a){return this._onChangeCallback=a,this}_onChangeCallback(){}}U0.prototype.isEuler=!0,U0.DefaultOrder="XYZ",U0.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"];class Ene{constructor(){this.mask=1}set(a){this.mask=1<<a|0}enable(a){this.mask|=1<<a|0}enableAll(){this.mask=-1}toggle(a){this.mask^=1<<a|0}disable(a){this.mask&=~(1<<a|0)}disableAll(){this.mask=0}test(a){return 0!=(this.mask&a.mask)}}let A$e=0;const Mne=new oe,G0=new xo,ff=new An,LI=new oe,Rw=new oe,I$e=new oe,R$e=new xo,Dne=new oe(1,0,0),Ane=new oe(0,1,0),Ine=new oe(0,0,1),P$e={type:"added"},Rne={type:"removed"};class ui extends Vp{constructor(){super(),Object.defineProperty(this,"id",{value:A$e++}),this.uuid=sc(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=ui.DefaultUp.clone();const a=new oe,o=new U0,c=new xo,u=new oe(1,1,1);o._onChange(function(){c.setFromEuler(o,!1)}),c._onChange(function(){o.setFromQuaternion(c,void 0,!1)}),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:a},rotation:{configurable:!0,enumerable:!0,value:o},quaternion:{configurable:!0,enumerable:!0,value:c},scale:{configurable:!0,enumerable:!0,value:u},modelViewMatrix:{value:new An},normalMatrix:{value:new zo}}),this.matrix=new An,this.matrixWorld=new An,this.matrixAutoUpdate=ui.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new Ene,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(a){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(a),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(a){return this.quaternion.premultiply(a),this}setRotationFromAxisAngle(a,o){this.quaternion.setFromAxisAngle(a,o)}setRotationFromEuler(a){this.quaternion.setFromEuler(a,!0)}setRotationFromMatrix(a){this.quaternion.setFromRotationMatrix(a)}setRotationFromQuaternion(a){this.quaternion.copy(a)}rotateOnAxis(a,o){return G0.setFromAxisAngle(a,o),this.quaternion.multiply(G0),this}rotateOnWorldAxis(a,o){return G0.setFromAxisAngle(a,o),this.quaternion.premultiply(G0),this}rotateX(a){return this.rotateOnAxis(Dne,a)}rotateY(a){return this.rotateOnAxis(Ane,a)}rotateZ(a){return this.rotateOnAxis(Ine,a)}translateOnAxis(a,o){return Mne.copy(a).applyQuaternion(this.quaternion),this.position.add(Mne.multiplyScalar(o)),this}translateX(a){return this.translateOnAxis(Dne,a)}translateY(a){return this.translateOnAxis(Ane,a)}translateZ(a){return this.translateOnAxis(Ine,a)}localToWorld(a){return a.applyMatrix4(this.matrixWorld)}worldToLocal(a){return a.applyMatrix4(ff.copy(this.matrixWorld).invert())}lookAt(a,o,c){a.isVector3?LI.copy(a):LI.set(a,o,c);const u=this.parent;this.updateWorldMatrix(!0,!1),Rw.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?ff.lookAt(Rw,LI,this.up):ff.lookAt(LI,Rw,this.up),this.quaternion.setFromRotationMatrix(ff),u&&(ff.extractRotation(u.matrixWorld),G0.setFromRotationMatrix(ff),this.quaternion.premultiply(G0.invert()))}add(a){if(arguments.length>1){for(let o=0;o<arguments.length;o++)this.add(arguments[o]);return this}return a===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",a),this):(a&&a.isObject3D?(null!==a.parent&&a.parent.remove(a),a.parent=this,this.children.push(a),a.dispatchEvent(P$e)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",a),this)}remove(a){if(arguments.length>1){for(let c=0;c<arguments.length;c++)this.remove(arguments[c]);return this}const o=this.children.indexOf(a);return-1!==o&&(a.parent=null,this.children.splice(o,1),a.dispatchEvent(Rne)),this}removeFromParent(){const a=this.parent;return null!==a&&a.remove(this),this}clear(){for(let a=0;a<this.children.length;a++){const o=this.children[a];o.parent=null,o.dispatchEvent(Rne)}return this.children.length=0,this}attach(a){return this.updateWorldMatrix(!0,!1),ff.copy(this.matrixWorld).invert(),null!==a.parent&&(a.parent.updateWorldMatrix(!0,!1),ff.multiply(a.parent.matrixWorld)),a.applyMatrix4(ff),this.add(a),a.updateWorldMatrix(!1,!0),this}getObjectById(a){return this.getObjectByProperty("id",a)}getObjectByName(a){return this.getObjectByProperty("name",a)}getObjectByProperty(a,o){if(this[a]===o)return this;for(let c=0,u=this.children.length;c<u;c++){const d=this.children[c].getObjectByProperty(a,o);if(void 0!==d)return d}}getWorldPosition(a){return this.updateWorldMatrix(!0,!1),a.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(a){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Rw,a,I$e),a}getWorldScale(a){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Rw,R$e,a),a}getWorldDirection(a){this.updateWorldMatrix(!0,!1);const o=this.matrixWorld.elements;return a.set(o[8],o[9],o[10]).normalize()}raycast(){}traverse(a){a(this);const o=this.children;for(let c=0,u=o.length;c<u;c++)o[c].traverse(a)}traverseVisible(a){if(!1===this.visible)return;a(this);const o=this.children;for(let c=0,u=o.length;c<u;c++)o[c].traverseVisible(a)}traverseAncestors(a){const o=this.parent;null!==o&&(a(o),o.traverseAncestors(a))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(a){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||a)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,a=!0);const o=this.children;for(let c=0,u=o.length;c<u;c++)o[c].updateMatrixWorld(a)}updateWorldMatrix(a,o){const c=this.parent;if(!0===a&&null!==c&&c.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===o){const u=this.children;for(let h=0,d=u.length;h<d;h++)u[h].updateWorldMatrix(!1,!0)}}toJSON(a){const o=void 0===a||"string"==typeof a,c={};o&&(a={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{}},c.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const u={};function h(f,m){return void 0===f[m.uuid]&&(f[m.uuid]=m.toJSON(a)),m.uuid}if(u.uuid=this.uuid,u.type=this.type,""!==this.name&&(u.name=this.name),!0===this.castShadow&&(u.castShadow=!0),!0===this.receiveShadow&&(u.receiveShadow=!0),!1===this.visible&&(u.visible=!1),!1===this.frustumCulled&&(u.frustumCulled=!1),0!==this.renderOrder&&(u.renderOrder=this.renderOrder),"{}"!==JSON.stringify(this.userData)&&(u.userData=this.userData),u.layers=this.layers.mask,u.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(u.matrixAutoUpdate=!1),this.isInstancedMesh&&(u.type="InstancedMesh",u.count=this.count,u.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(u.instanceColor=this.instanceColor.toJSON())),this.isScene)this.background&&(this.background.isColor?u.background=this.background.toJSON():this.background.isTexture&&(u.background=this.background.toJSON(a).uuid)),this.environment&&this.environment.isTexture&&(u.environment=this.environment.toJSON(a).uuid);else if(this.isMesh||this.isLine||this.isPoints){u.geometry=h(a.geometries,this.geometry);const f=this.geometry.parameters;if(void 0!==f&&void 0!==f.shapes){const m=f.shapes;if(Array.isArray(m))for(let g=0,y=m.length;g<y;g++)h(a.shapes,m[g]);else h(a.shapes,m)}}if(this.isSkinnedMesh&&(u.bindMode=this.bindMode,u.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(h(a.skeletons,this.skeleton),u.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){const f=[];for(let m=0,g=this.material.length;m<g;m++)f.push(h(a.materials,this.material[m]));u.material=f}else u.material=h(a.materials,this.material);if(this.children.length>0){u.children=[];for(let f=0;f<this.children.length;f++)u.children.push(this.children[f].toJSON(a).object)}if(this.animations.length>0){u.animations=[];for(let f=0;f<this.animations.length;f++)u.animations.push(h(a.animations,this.animations[f]))}if(o){const f=d(a.geometries),m=d(a.materials),g=d(a.textures),y=d(a.images),v=d(a.shapes),_=d(a.skeletons),b=d(a.animations);f.length>0&&(c.geometries=f),m.length>0&&(c.materials=m),g.length>0&&(c.textures=g),y.length>0&&(c.images=y),v.length>0&&(c.shapes=v),_.length>0&&(c.skeletons=_),b.length>0&&(c.animations=b)}return c.object=u,c;function d(f){const m=[];for(const g in f){const y=f[g];delete y.metadata,m.push(y)}return m}}clone(a){return(new this.constructor).copy(this,a)}copy(a,o=!0){if(this.name=a.name,this.up.copy(a.up),this.position.copy(a.position),this.rotation.order=a.rotation.order,this.quaternion.copy(a.quaternion),this.scale.copy(a.scale),this.matrix.copy(a.matrix),this.matrixWorld.copy(a.matrixWorld),this.matrixAutoUpdate=a.matrixAutoUpdate,this.matrixWorldNeedsUpdate=a.matrixWorldNeedsUpdate,this.layers.mask=a.layers.mask,this.visible=a.visible,this.castShadow=a.castShadow,this.receiveShadow=a.receiveShadow,this.frustumCulled=a.frustumCulled,this.renderOrder=a.renderOrder,this.userData=JSON.parse(JSON.stringify(a.userData)),!0===o)for(let c=0;c<a.children.length;c++)this.add(a.children[c].clone());return this}}ui.DefaultUp=new oe(0,1,0),ui.DefaultMatrixAutoUpdate=!0,ui.prototype.isObject3D=!0;const Wu=new oe,pf=new oe,fB=new oe,mf=new oe,z0=new oe,H0=new oe,Pne=new oe,pB=new oe,mB=new oe,gB=new oe;class lo{constructor(a=new oe,o=new oe,c=new oe){this.a=a,this.b=o,this.c=c}static getNormal(a,o,c,u){u.subVectors(c,o),Wu.subVectors(a,o),u.cross(Wu);const h=u.lengthSq();return h>0?u.multiplyScalar(1/Math.sqrt(h)):u.set(0,0,0)}static getBarycoord(a,o,c,u,h){Wu.subVectors(u,o),pf.subVectors(c,o),fB.subVectors(a,o);const d=Wu.dot(Wu),f=Wu.dot(pf),m=Wu.dot(fB),g=pf.dot(pf),y=pf.dot(fB),v=d*g-f*f;if(0===v)return h.set(-2,-1,-1);const _=1/v,b=(g*m-f*y)*_,w=(d*y-f*m)*_;return h.set(1-b-w,w,b)}static containsPoint(a,o,c,u){return this.getBarycoord(a,o,c,u,mf),mf.x>=0&&mf.y>=0&&mf.x+mf.y<=1}static getUV(a,o,c,u,h,d,f,m){return this.getBarycoord(a,o,c,u,mf),m.set(0,0),m.addScaledVector(h,mf.x),m.addScaledVector(d,mf.y),m.addScaledVector(f,mf.z),m}static isFrontFacing(a,o,c,u){return Wu.subVectors(c,o),pf.subVectors(a,o),Wu.cross(pf).dot(u)<0}set(a,o,c){return this.a.copy(a),this.b.copy(o),this.c.copy(c),this}setFromPointsAndIndices(a,o,c,u){return this.a.copy(a[o]),this.b.copy(a[c]),this.c.copy(a[u]),this}clone(){return(new this.constructor).copy(this)}copy(a){return this.a.copy(a.a),this.b.copy(a.b),this.c.copy(a.c),this}getArea(){return Wu.subVectors(this.c,this.b),pf.subVectors(this.a,this.b),.5*Wu.cross(pf).length()}getMidpoint(a){return a.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(a){return lo.getNormal(this.a,this.b,this.c,a)}getPlane(a){return a.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(a,o){return lo.getBarycoord(a,this.a,this.b,this.c,o)}getUV(a,o,c,u,h){return lo.getUV(a,this.a,this.b,this.c,o,c,u,h)}containsPoint(a){return lo.containsPoint(a,this.a,this.b,this.c)}isFrontFacing(a){return lo.isFrontFacing(this.a,this.b,this.c,a)}intersectsBox(a){return a.intersectsTriangle(this)}closestPointToPoint(a,o){const c=this.a,u=this.b,h=this.c;let d,f;z0.subVectors(u,c),H0.subVectors(h,c),pB.subVectors(a,c);const m=z0.dot(pB),g=H0.dot(pB);if(m<=0&&g<=0)return o.copy(c);mB.subVectors(a,u);const y=z0.dot(mB),v=H0.dot(mB);if(y>=0&&v<=y)return o.copy(u);const _=m*v-y*g;if(_<=0&&m>=0&&y<=0)return d=m/(m-y),o.copy(c).addScaledVector(z0,d);gB.subVectors(a,h);const b=z0.dot(gB),w=H0.dot(gB);if(w>=0&&b<=w)return o.copy(h);const C=b*g-m*w;if(C<=0&&g>=0&&w<=0)return f=g/(g-w),o.copy(c).addScaledVector(H0,f);const E=y*w-b*v;if(E<=0&&v-y>=0&&b-w>=0)return Pne.subVectors(h,u),f=(v-y)/(v-y+(b-w)),o.copy(u).addScaledVector(Pne,f);const M=1/(E+C+_);return d=C*M,f=_*M,o.copy(c).addScaledVector(z0,d).addScaledVector(H0,f)}equals(a){return a.a.equals(this.a)&&a.b.equals(this.b)&&a.c.equals(this.c)}}let L$e=0;class Eo extends Vp{constructor(){super(),Object.defineProperty(this,"id",{value:L$e++}),this.uuid=sc(),this.name="",this.type="Material",this.fog=!0,this.blending=1,this.side=0,this.vertexColors=!1,this.opacity=1,this.format=El,this.transparent=!1,this.blendSrc=204,this.blendDst=205,this.blendEquation=100,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=3,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=519,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=7680,this.stencilZFail=7680,this.stencilZPass=7680,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(a){this._alphaTest>0!=a>0&&this.version++,this._alphaTest=a}onBuild(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(a){if(void 0!==a)for(const o in a){const c=a[o];if(void 0===c){console.warn("THREE.Material: '"+o+"' parameter is undefined.");continue}if("shading"===o){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=1===c;continue}const u=this[o];void 0!==u?u&&u.isColor?u.set(c):u&&u.isVector3&&c&&c.isVector3?u.copy(c):this[o]=c:console.warn("THREE."+this.type+": '"+o+"' is not a property of this material.")}}toJSON(a){const o=void 0===a||"string"==typeof a;o&&(a={textures:{},images:{}});const c={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};function u(h){const d=[];for(const f in h){const m=h[f];delete m.metadata,d.push(m)}return d}if(c.uuid=this.uuid,c.type=this.type,""!==this.name&&(c.name=this.name),this.color&&this.color.isColor&&(c.color=this.color.getHex()),void 0!==this.roughness&&(c.roughness=this.roughness),void 0!==this.metalness&&(c.metalness=this.metalness),this.sheenTint&&this.sheenTint.isColor&&(c.sheenTint=this.sheenTint.getHex()),this.emissive&&this.emissive.isColor&&(c.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(c.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(c.specular=this.specular.getHex()),void 0!==this.specularIntensity&&(c.specularIntensity=this.specularIntensity),this.specularTint&&this.specularTint.isColor&&(c.specularTint=this.specularTint.getHex()),void 0!==this.shininess&&(c.shininess=this.shininess),void 0!==this.clearcoat&&(c.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(c.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(c.clearcoatMap=this.clearcoatMap.toJSON(a).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(c.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(a).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(c.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(a).uuid,c.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.map&&this.map.isTexture&&(c.map=this.map.toJSON(a).uuid),this.matcap&&this.matcap.isTexture&&(c.matcap=this.matcap.toJSON(a).uuid),this.alphaMap&&this.alphaMap.isTexture&&(c.alphaMap=this.alphaMap.toJSON(a).uuid),this.lightMap&&this.lightMap.isTexture&&(c.lightMap=this.lightMap.toJSON(a).uuid,c.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(c.aoMap=this.aoMap.toJSON(a).uuid,c.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(c.bumpMap=this.bumpMap.toJSON(a).uuid,c.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(c.normalMap=this.normalMap.toJSON(a).uuid,c.normalMapType=this.normalMapType,c.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(c.displacementMap=this.displacementMap.toJSON(a).uuid,c.displacementScale=this.displacementScale,c.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(c.roughnessMap=this.roughnessMap.toJSON(a).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(c.metalnessMap=this.metalnessMap.toJSON(a).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(c.emissiveMap=this.emissiveMap.toJSON(a).uuid),this.specularMap&&this.specularMap.isTexture&&(c.specularMap=this.specularMap.toJSON(a).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(c.specularIntensityMap=this.specularIntensityMap.toJSON(a).uuid),this.specularTintMap&&this.specularTintMap.isTexture&&(c.specularTintMap=this.specularTintMap.toJSON(a).uuid),this.envMap&&this.envMap.isTexture&&(c.envMap=this.envMap.toJSON(a).uuid,void 0!==this.combine&&(c.combine=this.combine)),void 0!==this.envMapIntensity&&(c.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(c.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(c.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(c.gradientMap=this.gradientMap.toJSON(a).uuid),void 0!==this.transmission&&(c.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(c.transmissionMap=this.transmissionMap.toJSON(a).uuid),void 0!==this.thickness&&(c.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(c.thicknessMap=this.thicknessMap.toJSON(a).uuid),void 0!==this.attenuationDistance&&(c.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationTint&&(c.attenuationTint=this.attenuationTint.getHex()),void 0!==this.size&&(c.size=this.size),null!==this.shadowSide&&(c.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(c.sizeAttenuation=this.sizeAttenuation),1!==this.blending&&(c.blending=this.blending),0!==this.side&&(c.side=this.side),this.vertexColors&&(c.vertexColors=!0),this.opacity<1&&(c.opacity=this.opacity),this.format!==El&&(c.format=this.format),!0===this.transparent&&(c.transparent=this.transparent),c.depthFunc=this.depthFunc,c.depthTest=this.depthTest,c.depthWrite=this.depthWrite,c.colorWrite=this.colorWrite,c.stencilWrite=this.stencilWrite,c.stencilWriteMask=this.stencilWriteMask,c.stencilFunc=this.stencilFunc,c.stencilRef=this.stencilRef,c.stencilFuncMask=this.stencilFuncMask,c.stencilFail=this.stencilFail,c.stencilZFail=this.stencilZFail,c.stencilZPass=this.stencilZPass,this.rotation&&0!==this.rotation&&(c.rotation=this.rotation),!0===this.polygonOffset&&(c.polygonOffset=!0),0!==this.polygonOffsetFactor&&(c.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(c.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth&&1!==this.linewidth&&(c.linewidth=this.linewidth),void 0!==this.dashSize&&(c.dashSize=this.dashSize),void 0!==this.gapSize&&(c.gapSize=this.gapSize),void 0!==this.scale&&(c.scale=this.scale),!0===this.dithering&&(c.dithering=!0),this.alphaTest>0&&(c.alphaTest=this.alphaTest),!0===this.alphaToCoverage&&(c.alphaToCoverage=this.alphaToCoverage),!0===this.premultipliedAlpha&&(c.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(c.wireframe=this.wireframe),this.wireframeLinewidth>1&&(c.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(c.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(c.wireframeLinejoin=this.wireframeLinejoin),!0===this.flatShading&&(c.flatShading=this.flatShading),!1===this.visible&&(c.visible=!1),!1===this.toneMapped&&(c.toneMapped=!1),"{}"!==JSON.stringify(this.userData)&&(c.userData=this.userData),o){const h=u(a.textures),d=u(a.images);h.length>0&&(c.textures=h),d.length>0&&(c.images=d)}return c}clone(){return(new this.constructor).copy(this)}copy(a){this.name=a.name,this.fog=a.fog,this.blending=a.blending,this.side=a.side,this.vertexColors=a.vertexColors,this.opacity=a.opacity,this.format=a.format,this.transparent=a.transparent,this.blendSrc=a.blendSrc,this.blendDst=a.blendDst,this.blendEquation=a.blendEquation,this.blendSrcAlpha=a.blendSrcAlpha,this.blendDstAlpha=a.blendDstAlpha,this.blendEquationAlpha=a.blendEquationAlpha,this.depthFunc=a.depthFunc,this.depthTest=a.depthTest,this.depthWrite=a.depthWrite,this.stencilWriteMask=a.stencilWriteMask,this.stencilFunc=a.stencilFunc,this.stencilRef=a.stencilRef,this.stencilFuncMask=a.stencilFuncMask,this.stencilFail=a.stencilFail,this.stencilZFail=a.stencilZFail,this.stencilZPass=a.stencilZPass,this.stencilWrite=a.stencilWrite;const o=a.clippingPlanes;let c=null;if(null!==o){const u=o.length;c=new Array(u);for(let h=0;h!==u;++h)c[h]=o[h].clone()}return this.clippingPlanes=c,this.clipIntersection=a.clipIntersection,this.clipShadows=a.clipShadows,this.shadowSide=a.shadowSide,this.colorWrite=a.colorWrite,this.precision=a.precision,this.polygonOffset=a.polygonOffset,this.polygonOffsetFactor=a.polygonOffsetFactor,this.polygonOffsetUnits=a.polygonOffsetUnits,this.dithering=a.dithering,this.alphaTest=a.alphaTest,this.alphaToCoverage=a.alphaToCoverage,this.premultipliedAlpha=a.premultipliedAlpha,this.visible=a.visible,this.toneMapped=a.toneMapped,this.userData=JSON.parse(JSON.stringify(a.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(a){!0===a&&this.version++}}Eo.prototype.isMaterial=!0;const Lne={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},qu={h:0,s:0,l:0},OI={h:0,s:0,l:0};function yB(l,a,o){return o<0&&(o+=1),o>1&&(o-=1),o<1/6?l+6*(a-l)*o:o<.5?a:o<2/3?l+6*(a-l)*(2/3-o):l}function vB(l){return l<.04045?.0773993808*l:Math.pow(.9478672986*l+.0521327014,2.4)}function _B(l){return l<.0031308?12.92*l:1.055*Math.pow(l,.41666)-.055}let Zt=(()=>{class l{constructor(o,c,u){return void 0===c&&void 0===u?this.set(o):this.setRGB(o,c,u)}set(o){return o&&o.isColor?this.copy(o):"number"==typeof o?this.setHex(o):"string"==typeof o&&this.setStyle(o),this}setScalar(o){return this.r=o,this.g=o,this.b=o,this}setHex(o){return o=Math.floor(o),this.r=(o>>16&255)/255,this.g=(o>>8&255)/255,this.b=(255&o)/255,this}setRGB(o,c,u){return this.r=o,this.g=c,this.b=u,this}setHSL(o,c,u){if(o=nB(o,1),c=aa(c,0,1),u=aa(u,0,1),0===c)this.r=this.g=this.b=u;else{const h=u<=.5?u*(1+c):u+c-u*c,d=2*u-h;this.r=yB(d,h,o+1/3),this.g=yB(d,h,o),this.b=yB(d,h,o-1/3)}return this}setStyle(o){function c(h){void 0!==h&&parseFloat(h)<1&&console.warn("THREE.Color: Alpha component of "+o+" will be ignored.")}let u;if(u=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(o)){let h;const f=u[2];switch(u[1]){case"rgb":case"rgba":if(h=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(f))return this.r=Math.min(255,parseInt(h[1],10))/255,this.g=Math.min(255,parseInt(h[2],10))/255,this.b=Math.min(255,parseInt(h[3],10))/255,c(h[4]),this;if(h=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(f))return this.r=Math.min(100,parseInt(h[1],10))/100,this.g=Math.min(100,parseInt(h[2],10))/100,this.b=Math.min(100,parseInt(h[3],10))/100,c(h[4]),this;break;case"hsl":case"hsla":if(h=/^\s*(\d*\.?\d+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(f)){const m=parseFloat(h[1])/360,g=parseInt(h[2],10)/100,y=parseInt(h[3],10)/100;return c(h[4]),this.setHSL(m,g,y)}}}else if(u=/^\#([A-Fa-f\d]+)$/.exec(o)){const h=u[1],d=h.length;if(3===d)return this.r=parseInt(h.charAt(0)+h.charAt(0),16)/255,this.g=parseInt(h.charAt(1)+h.charAt(1),16)/255,this.b=parseInt(h.charAt(2)+h.charAt(2),16)/255,this;if(6===d)return this.r=parseInt(h.charAt(0)+h.charAt(1),16)/255,this.g=parseInt(h.charAt(2)+h.charAt(3),16)/255,this.b=parseInt(h.charAt(4)+h.charAt(5),16)/255,this}return o&&o.length>0?this.setColorName(o):this}setColorName(o){const c=Lne[o.toLowerCase()];return void 0!==c?this.setHex(c):console.warn("THREE.Color: Unknown color "+o),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(o){return this.r=o.r,this.g=o.g,this.b=o.b,this}copyGammaToLinear(o,c=2){return this.r=Math.pow(o.r,c),this.g=Math.pow(o.g,c),this.b=Math.pow(o.b,c),this}copyLinearToGamma(o,c=2){const u=c>0?1/c:1;return this.r=Math.pow(o.r,u),this.g=Math.pow(o.g,u),this.b=Math.pow(o.b,u),this}convertGammaToLinear(o){return this.copyGammaToLinear(this,o),this}convertLinearToGamma(o){return this.copyLinearToGamma(this,o),this}copySRGBToLinear(o){return this.r=vB(o.r),this.g=vB(o.g),this.b=vB(o.b),this}copyLinearToSRGB(o){return this.r=_B(o.r),this.g=_B(o.g),this.b=_B(o.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0}getHexString(){return("000000"+this.getHex().toString(16)).slice(-6)}getHSL(o){const c=this.r,u=this.g,h=this.b,d=Math.max(c,u,h),f=Math.min(c,u,h);let m,g;const y=(f+d)/2;if(f===d)m=0,g=0;else{const v=d-f;switch(g=y<=.5?v/(d+f):v/(2-d-f),d){case c:m=(u-h)/v+(u<h?6:0);break;case u:m=(h-c)/v+2;break;case h:m=(c-u)/v+4}m/=6}return o.h=m,o.s=g,o.l=y,o}getStyle(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"}offsetHSL(o,c,u){return this.getHSL(qu),qu.h+=o,qu.s+=c,qu.l+=u,this.setHSL(qu.h,qu.s,qu.l),this}add(o){return this.r+=o.r,this.g+=o.g,this.b+=o.b,this}addColors(o,c){return this.r=o.r+c.r,this.g=o.g+c.g,this.b=o.b+c.b,this}addScalar(o){return this.r+=o,this.g+=o,this.b+=o,this}sub(o){return this.r=Math.max(0,this.r-o.r),this.g=Math.max(0,this.g-o.g),this.b=Math.max(0,this.b-o.b),this}multiply(o){return this.r*=o.r,this.g*=o.g,this.b*=o.b,this}multiplyScalar(o){return this.r*=o,this.g*=o,this.b*=o,this}lerp(o,c){return this.r+=(o.r-this.r)*c,this.g+=(o.g-this.g)*c,this.b+=(o.b-this.b)*c,this}lerpColors(o,c,u){return this.r=o.r+(c.r-o.r)*u,this.g=o.g+(c.g-o.g)*u,this.b=o.b+(c.b-o.b)*u,this}lerpHSL(o,c){this.getHSL(qu),o.getHSL(OI);const u=Dw(qu.h,OI.h,c),h=Dw(qu.s,OI.s,c),d=Dw(qu.l,OI.l,c);return this.setHSL(u,h,d),this}equals(o){return o.r===this.r&&o.g===this.g&&o.b===this.b}fromArray(o,c=0){return this.r=o[c],this.g=o[c+1],this.b=o[c+2],this}toArray(o=[],c=0){return o[c]=this.r,o[c+1]=this.g,o[c+2]=this.b,o}fromBufferAttribute(o,c){return this.r=o.getX(c),this.g=o.getY(c),this.b=o.getZ(c),!0===o.normalized&&(this.r/=255,this.g/=255,this.b/=255),this}toJSON(){return this.getHex()}}return l.NAMES=Lne,l})();Zt.prototype.isColor=!0,Zt.prototype.r=1,Zt.prototype.g=1,Zt.prototype.b=1;class lc extends Eo{constructor(a){super(),this.type="MeshBasicMaterial",this.color=new Zt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.setValues(a)}copy(a){return super.copy(a),this.color.copy(a.color),this.map=a.map,this.lightMap=a.lightMap,this.lightMapIntensity=a.lightMapIntensity,this.aoMap=a.aoMap,this.aoMapIntensity=a.aoMapIntensity,this.specularMap=a.specularMap,this.alphaMap=a.alphaMap,this.envMap=a.envMap,this.combine=a.combine,this.reflectivity=a.reflectivity,this.refractionRatio=a.refractionRatio,this.wireframe=a.wireframe,this.wireframeLinewidth=a.wireframeLinewidth,this.wireframeLinecap=a.wireframeLinecap,this.wireframeLinejoin=a.wireframeLinejoin,this}}lc.prototype.isMeshBasicMaterial=!0;const Xi=new oe,NI=new St;class Ei{constructor(a,o,c){if(Array.isArray(a))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.name="",this.array=a,this.itemSize=o,this.count=void 0!==a?a.length/o:0,this.normalized=!0===c,this.usage=xw,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}set needsUpdate(a){!0===a&&this.version++}setUsage(a){return this.usage=a,this}copy(a){return this.name=a.name,this.array=new a.array.constructor(a.array),this.itemSize=a.itemSize,this.count=a.count,this.normalized=a.normalized,this.usage=a.usage,this}copyAt(a,o,c){a*=this.itemSize,c*=o.itemSize;for(let u=0,h=this.itemSize;u<h;u++)this.array[a+u]=o.array[c+u];return this}copyArray(a){return this.array.set(a),this}copyColorsArray(a){const o=this.array;let c=0;for(let u=0,h=a.length;u<h;u++){let d=a[u];void 0===d&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",u),d=new Zt),o[c++]=d.r,o[c++]=d.g,o[c++]=d.b}return this}copyVector2sArray(a){const o=this.array;let c=0;for(let u=0,h=a.length;u<h;u++){let d=a[u];void 0===d&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",u),d=new St),o[c++]=d.x,o[c++]=d.y}return this}copyVector3sArray(a){const o=this.array;let c=0;for(let u=0,h=a.length;u<h;u++){let d=a[u];void 0===d&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",u),d=new oe),o[c++]=d.x,o[c++]=d.y,o[c++]=d.z}return this}copyVector4sArray(a){const o=this.array;let c=0;for(let u=0,h=a.length;u<h;u++){let d=a[u];void 0===d&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",u),d=new Oi),o[c++]=d.x,o[c++]=d.y,o[c++]=d.z,o[c++]=d.w}return this}applyMatrix3(a){if(2===this.itemSize)for(let o=0,c=this.count;o<c;o++)NI.fromBufferAttribute(this,o),NI.applyMatrix3(a),this.setXY(o,NI.x,NI.y);else if(3===this.itemSize)for(let o=0,c=this.count;o<c;o++)Xi.fromBufferAttribute(this,o),Xi.applyMatrix3(a),this.setXYZ(o,Xi.x,Xi.y,Xi.z);return this}applyMatrix4(a){for(let o=0,c=this.count;o<c;o++)Xi.x=this.getX(o),Xi.y=this.getY(o),Xi.z=this.getZ(o),Xi.applyMatrix4(a),this.setXYZ(o,Xi.x,Xi.y,Xi.z);return this}applyNormalMatrix(a){for(let o=0,c=this.count;o<c;o++)Xi.x=this.getX(o),Xi.y=this.getY(o),Xi.z=this.getZ(o),Xi.applyNormalMatrix(a),this.setXYZ(o,Xi.x,Xi.y,Xi.z);return this}transformDirection(a){for(let o=0,c=this.count;o<c;o++)Xi.x=this.getX(o),Xi.y=this.getY(o),Xi.z=this.getZ(o),Xi.transformDirection(a),this.setXYZ(o,Xi.x,Xi.y,Xi.z);return this}set(a,o=0){return this.array.set(a,o),this}getX(a){return this.array[a*this.itemSize]}setX(a,o){return this.array[a*this.itemSize]=o,this}getY(a){return this.array[a*this.itemSize+1]}setY(a,o){return this.array[a*this.itemSize+1]=o,this}getZ(a){return this.array[a*this.itemSize+2]}setZ(a,o){return this.array[a*this.itemSize+2]=o,this}getW(a){return this.array[a*this.itemSize+3]}setW(a,o){return this.array[a*this.itemSize+3]=o,this}setXY(a,o,c){return this.array[0+(a*=this.itemSize)]=o,this.array[a+1]=c,this}setXYZ(a,o,c,u){return this.array[0+(a*=this.itemSize)]=o,this.array[a+1]=c,this.array[a+2]=u,this}setXYZW(a,o,c,u,h){return this.array[0+(a*=this.itemSize)]=o,this.array[a+1]=c,this.array[a+2]=u,this.array[a+3]=h,this}onUpload(a){return this.onUploadCallback=a,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const a={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.prototype.slice.call(this.array),normalized:this.normalized};return""!==this.name&&(a.name=this.name),this.usage!==xw&&(a.usage=this.usage),(0!==this.updateRange.offset||-1!==this.updateRange.count)&&(a.updateRange=this.updateRange),a}}Ei.prototype.isBufferAttribute=!0;class bB extends Ei{constructor(a,o,c){super(new Uint16Array(a),o,c)}}class SB extends Ei{constructor(a,o,c){super(new Uint32Array(a),o,c)}}(class extends Ei{constructor(a,o,c){super(new Uint16Array(a),o,c)}}).prototype.isFloat16BufferAttribute=!0;class wn extends Ei{constructor(a,o,c){super(new Float32Array(a),o,c)}}function One(l){if(0===l.length)return-1/0;let a=l[0];for(let o=1,c=l.length;o<c;++o)l[o]>a&&(a=l[o]);return a}Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array;let z$e=0;const Hc=new An,TB=new ui,W0=new oe,cc=new oc,Pw=new oc,Ho=new oe;class Kn extends Vp{constructor(){super(),Object.defineProperty(this,"id",{value:z$e++}),this.uuid=sc(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(a){return this.index=Array.isArray(a)?new(One(a)>65535?SB:bB)(a,1):a,this}getAttribute(a){return this.attributes[a]}setAttribute(a,o){return this.attributes[a]=o,this}deleteAttribute(a){return delete this.attributes[a],this}hasAttribute(a){return void 0!==this.attributes[a]}addGroup(a,o,c=0){this.groups.push({start:a,count:o,materialIndex:c})}clearGroups(){this.groups=[]}setDrawRange(a,o){this.drawRange.start=a,this.drawRange.count=o}applyMatrix4(a){const o=this.attributes.position;void 0!==o&&(o.applyMatrix4(a),o.needsUpdate=!0);const c=this.attributes.normal;if(void 0!==c){const h=(new zo).getNormalMatrix(a);c.applyNormalMatrix(h),c.needsUpdate=!0}const u=this.attributes.tangent;return void 0!==u&&(u.transformDirection(a),u.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}applyQuaternion(a){return Hc.makeRotationFromQuaternion(a),this.applyMatrix4(Hc),this}rotateX(a){return Hc.makeRotationX(a),this.applyMatrix4(Hc),this}rotateY(a){return Hc.makeRotationY(a),this.applyMatrix4(Hc),this}rotateZ(a){return Hc.makeRotationZ(a),this.applyMatrix4(Hc),this}translate(a,o,c){return Hc.makeTranslation(a,o,c),this.applyMatrix4(Hc),this}scale(a,o,c){return Hc.makeScale(a,o,c),this.applyMatrix4(Hc),this}lookAt(a){return TB.lookAt(a),TB.updateMatrix(),this.applyMatrix4(TB.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(W0).negate(),this.translate(W0.x,W0.y,W0.z),this}setFromPoints(a){const o=[];for(let c=0,u=a.length;c<u;c++){const h=a[c];o.push(h.x,h.y,h.z||0)}return this.setAttribute("position",new wn(o,3)),this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new oc);const a=this.attributes.position,o=this.morphAttributes.position;if(a&&a.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingBox.set(new oe(-1/0,-1/0,-1/0),new oe(1/0,1/0,1/0));if(void 0!==a){if(this.boundingBox.setFromBufferAttribute(a),o)for(let c=0,u=o.length;c<u;c++)cc.setFromBufferAttribute(o[c]),this.morphTargetsRelative?(Ho.addVectors(this.boundingBox.min,cc.min),this.boundingBox.expandByPoint(Ho),Ho.addVectors(this.boundingBox.max,cc.max),this.boundingBox.expandByPoint(Ho)):(this.boundingBox.expandByPoint(cc.min),this.boundingBox.expandByPoint(cc.max))}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new Gp);const a=this.attributes.position,o=this.morphAttributes.position;if(a&&a.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingSphere.set(new oe,1/0);if(a){const c=this.boundingSphere.center;if(cc.setFromBufferAttribute(a),o)for(let h=0,d=o.length;h<d;h++)Pw.setFromBufferAttribute(o[h]),this.morphTargetsRelative?(Ho.addVectors(cc.min,Pw.min),cc.expandByPoint(Ho),Ho.addVectors(cc.max,Pw.max),cc.expandByPoint(Ho)):(cc.expandByPoint(Pw.min),cc.expandByPoint(Pw.max));cc.getCenter(c);let u=0;for(let h=0,d=a.count;h<d;h++)Ho.fromBufferAttribute(a,h),u=Math.max(u,c.distanceToSquared(Ho));if(o)for(let h=0,d=o.length;h<d;h++){const f=o[h],m=this.morphTargetsRelative;for(let g=0,y=f.count;g<y;g++)Ho.fromBufferAttribute(f,g),m&&(W0.fromBufferAttribute(a,g),Ho.add(W0)),u=Math.max(u,c.distanceToSquared(Ho))}this.boundingSphere.radius=Math.sqrt(u),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const a=this.index,o=this.attributes;if(null===a||void 0===o.position||void 0===o.normal||void 0===o.uv)return void console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");const c=a.array,u=o.position.array,h=o.normal.array,d=o.uv.array,f=u.length/3;void 0===o.tangent&&this.setAttribute("tangent",new Ei(new Float32Array(4*f),4));const m=o.tangent.array,g=[],y=[];for(let se=0;se<f;se++)g[se]=new oe,y[se]=new oe;const v=new oe,_=new oe,b=new oe,w=new St,C=new St,E=new St,M=new oe,x=new oe;function R(se,te,De){v.fromArray(u,3*se),_.fromArray(u,3*te),b.fromArray(u,3*De),w.fromArray(d,2*se),C.fromArray(d,2*te),E.fromArray(d,2*De),_.sub(v),b.sub(v),C.sub(w),E.sub(w);const de=1/(C.x*E.y-E.x*C.y);!isFinite(de)||(M.copy(_).multiplyScalar(E.y).addScaledVector(b,-C.y).multiplyScalar(de),x.copy(b).multiplyScalar(C.x).addScaledVector(_,-E.x).multiplyScalar(de),g[se].add(M),g[te].add(M),g[De].add(M),y[se].add(x),y[te].add(x),y[De].add(x))}let P=this.groups;0===P.length&&(P=[{start:0,count:c.length}]);for(let se=0,te=P.length;se<te;++se){const De=P[se],de=De.start;for(let _e=de,ue=de+De.count;_e<ue;_e+=3)R(c[_e+0],c[_e+1],c[_e+2])}const k=new oe,W=new oe,U=new oe,K=new oe;function Q(se){U.fromArray(h,3*se),K.copy(U);const te=g[se];k.copy(te),k.sub(U.multiplyScalar(U.dot(te))).normalize(),W.crossVectors(K,te);const de=W.dot(y[se])<0?-1:1;m[4*se]=k.x,m[4*se+1]=k.y,m[4*se+2]=k.z,m[4*se+3]=de}for(let se=0,te=P.length;se<te;++se){const De=P[se],de=De.start;for(let _e=de,ue=de+De.count;_e<ue;_e+=3)Q(c[_e+0]),Q(c[_e+1]),Q(c[_e+2])}}computeVertexNormals(){const a=this.index,o=this.getAttribute("position");if(void 0!==o){let c=this.getAttribute("normal");if(void 0===c)c=new Ei(new Float32Array(3*o.count),3),this.setAttribute("normal",c);else for(let _=0,b=c.count;_<b;_++)c.setXYZ(_,0,0,0);const u=new oe,h=new oe,d=new oe,f=new oe,m=new oe,g=new oe,y=new oe,v=new oe;if(a)for(let _=0,b=a.count;_<b;_+=3){const w=a.getX(_+0),C=a.getX(_+1),E=a.getX(_+2);u.fromBufferAttribute(o,w),h.fromBufferAttribute(o,C),d.fromBufferAttribute(o,E),y.subVectors(d,h),v.subVectors(u,h),y.cross(v),f.fromBufferAttribute(c,w),m.fromBufferAttribute(c,C),g.fromBufferAttribute(c,E),f.add(y),m.add(y),g.add(y),c.setXYZ(w,f.x,f.y,f.z),c.setXYZ(C,m.x,m.y,m.z),c.setXYZ(E,g.x,g.y,g.z)}else for(let _=0,b=o.count;_<b;_+=3)u.fromBufferAttribute(o,_+0),h.fromBufferAttribute(o,_+1),d.fromBufferAttribute(o,_+2),y.subVectors(d,h),v.subVectors(u,h),y.cross(v),c.setXYZ(_+0,y.x,y.y,y.z),c.setXYZ(_+1,y.x,y.y,y.z),c.setXYZ(_+2,y.x,y.y,y.z);this.normalizeNormals(),c.needsUpdate=!0}}merge(a,o){if(!a||!a.isBufferGeometry)return void console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",a);void 0===o&&(o=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));const c=this.attributes;for(const u in c){if(void 0===a.attributes[u])continue;const d=c[u].array,f=a.attributes[u],m=f.array,g=f.itemSize*o,y=Math.min(m.length,d.length-g);for(let v=0,_=g;v<y;v++,_++)d[_]=m[v]}return this}normalizeNormals(){const a=this.attributes.normal;for(let o=0,c=a.count;o<c;o++)Ho.fromBufferAttribute(a,o),Ho.normalize(),a.setXYZ(o,Ho.x,Ho.y,Ho.z)}toNonIndexed(){function a(f,m){const g=f.array,y=f.itemSize,v=f.normalized,_=new g.constructor(m.length*y);let b=0,w=0;for(let C=0,E=m.length;C<E;C++){b=f.isInterleavedBufferAttribute?m[C]*f.data.stride+f.offset:m[C]*y;for(let M=0;M<y;M++)_[w++]=g[b++]}return new Ei(_,y,v)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const o=new Kn,c=this.index.array,u=this.attributes;for(const f in u){const g=a(u[f],c);o.setAttribute(f,g)}const h=this.morphAttributes;for(const f in h){const m=[],g=h[f];for(let y=0,v=g.length;y<v;y++){const b=a(g[y],c);m.push(b)}o.morphAttributes[f]=m}o.morphTargetsRelative=this.morphTargetsRelative;const d=this.groups;for(let f=0,m=d.length;f<m;f++){const g=d[f];o.addGroup(g.start,g.count,g.materialIndex)}return o}toJSON(){const a={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(a.uuid=this.uuid,a.type=this.type,""!==this.name&&(a.name=this.name),Object.keys(this.userData).length>0&&(a.userData=this.userData),void 0!==this.parameters){const m=this.parameters;for(const g in m)void 0!==m[g]&&(a[g]=m[g]);return a}a.data={attributes:{}};const o=this.index;null!==o&&(a.data.index={type:o.array.constructor.name,array:Array.prototype.slice.call(o.array)});const c=this.attributes;for(const m in c)a.data.attributes[m]=c[m].toJSON(a.data);const u={};let h=!1;for(const m in this.morphAttributes){const g=this.morphAttributes[m],y=[];for(let v=0,_=g.length;v<_;v++)y.push(g[v].toJSON(a.data));y.length>0&&(u[m]=y,h=!0)}h&&(a.data.morphAttributes=u,a.data.morphTargetsRelative=this.morphTargetsRelative);const d=this.groups;d.length>0&&(a.data.groups=JSON.parse(JSON.stringify(d)));const f=this.boundingSphere;return null!==f&&(a.data.boundingSphere={center:f.center.toArray(),radius:f.radius}),a}clone(){return(new Kn).copy(this)}copy(a){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const o={};this.name=a.name;const c=a.index;null!==c&&this.setIndex(c.clone(o));const u=a.attributes;for(const g in u)this.setAttribute(g,u[g].clone(o));const h=a.morphAttributes;for(const g in h){const y=[],v=h[g];for(let _=0,b=v.length;_<b;_++)y.push(v[_].clone(o));this.morphAttributes[g]=y}this.morphTargetsRelative=a.morphTargetsRelative;const d=a.groups;for(let g=0,y=d.length;g<y;g++){const v=d[g];this.addGroup(v.start,v.count,v.materialIndex)}const f=a.boundingBox;null!==f&&(this.boundingBox=f.clone());const m=a.boundingSphere;return null!==m&&(this.boundingSphere=m.clone()),this.drawRange.start=a.drawRange.start,this.drawRange.count=a.drawRange.count,this.userData=a.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}Kn.prototype.isBufferGeometry=!0;const Nne=new An,q0=new Xg,wB=new Gp,jp=new oe,Wp=new oe,qp=new oe,CB=new oe,xB=new oe,EB=new oe,FI=new oe,kI=new oe,VI=new oe,BI=new St,UI=new St,GI=new St,MB=new oe,zI=new oe;class Hs extends ui{constructor(a=new Kn,o=new lc){super(),this.type="Mesh",this.geometry=a,this.material=o,this.updateMorphTargets()}copy(a){return super.copy(a),void 0!==a.morphTargetInfluences&&(this.morphTargetInfluences=a.morphTargetInfluences.slice()),void 0!==a.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},a.morphTargetDictionary)),this.material=a.material,this.geometry=a.geometry,this}updateMorphTargets(){const a=this.geometry;if(a.isBufferGeometry){const o=a.morphAttributes,c=Object.keys(o);if(c.length>0){const u=o[c[0]];if(void 0!==u){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let h=0,d=u.length;h<d;h++){const f=u[h].name||String(h);this.morphTargetInfluences.push(0),this.morphTargetDictionary[f]=h}}}}else{const o=a.morphTargets;void 0!==o&&o.length>0&&console.error("THREE.Mesh.updateMorphTargets() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}}raycast(a,o){const c=this.geometry,u=this.material,h=this.matrixWorld;if(void 0===u||(null===c.boundingSphere&&c.computeBoundingSphere(),wB.copy(c.boundingSphere),wB.applyMatrix4(h),!1===a.ray.intersectsSphere(wB))||(Nne.copy(h).invert(),q0.copy(a.ray).applyMatrix4(Nne),null!==c.boundingBox&&!1===q0.intersectsBox(c.boundingBox)))return;let d;if(c.isBufferGeometry){const f=c.index,m=c.attributes.position,g=c.morphAttributes.position,y=c.morphTargetsRelative,v=c.attributes.uv,_=c.attributes.uv2,b=c.groups,w=c.drawRange;if(null!==f)if(Array.isArray(u))for(let C=0,E=b.length;C<E;C++){const M=b[C],x=u[M.materialIndex];for(let k=Math.max(M.start,w.start),W=Math.min(M.start+M.count,w.start+w.count);k<W;k+=3){const U=f.getX(k),K=f.getX(k+1),Q=f.getX(k+2);d=HI(this,x,a,q0,m,g,y,v,_,U,K,Q),d&&(d.faceIndex=Math.floor(k/3),d.face.materialIndex=M.materialIndex,o.push(d))}}else for(let M=Math.max(0,w.start),x=Math.min(f.count,w.start+w.count);M<x;M+=3){const R=f.getX(M),P=f.getX(M+1),k=f.getX(M+2);d=HI(this,u,a,q0,m,g,y,v,_,R,P,k),d&&(d.faceIndex=Math.floor(M/3),o.push(d))}else if(void 0!==m)if(Array.isArray(u))for(let C=0,E=b.length;C<E;C++){const M=b[C],x=u[M.materialIndex];for(let k=Math.max(M.start,w.start),W=Math.min(M.start+M.count,w.start+w.count);k<W;k+=3)d=HI(this,x,a,q0,m,g,y,v,_,k,k+1,k+2),d&&(d.faceIndex=Math.floor(k/3),d.face.materialIndex=M.materialIndex,o.push(d))}else for(let M=Math.max(0,w.start),x=Math.min(m.count,w.start+w.count);M<x;M+=3)d=HI(this,u,a,q0,m,g,y,v,_,M,M+1,M+2),d&&(d.faceIndex=Math.floor(M/3),o.push(d))}else c.isGeometry&&console.error("THREE.Mesh.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}}function HI(l,a,o,c,u,h,d,f,m,g,y,v){jp.fromBufferAttribute(u,g),Wp.fromBufferAttribute(u,y),qp.fromBufferAttribute(u,v);const _=l.morphTargetInfluences;if(h&&_){FI.set(0,0,0),kI.set(0,0,0),VI.set(0,0,0);for(let w=0,C=h.length;w<C;w++){const E=_[w],M=h[w];0!==E&&(CB.fromBufferAttribute(M,g),xB.fromBufferAttribute(M,y),EB.fromBufferAttribute(M,v),d?(FI.addScaledVector(CB,E),kI.addScaledVector(xB,E),VI.addScaledVector(EB,E)):(FI.addScaledVector(CB.sub(jp),E),kI.addScaledVector(xB.sub(Wp),E),VI.addScaledVector(EB.sub(qp),E)))}jp.add(FI),Wp.add(kI),qp.add(VI)}l.isSkinnedMesh&&(l.boneTransform(g,jp),l.boneTransform(y,Wp),l.boneTransform(v,qp));const b=function(l,a,o,c,u,h,d,f){let m;if(m=1===a.side?c.intersectTriangle(d,h,u,!0,f):c.intersectTriangle(u,h,d,2!==a.side,f),null===m)return null;zI.copy(f),zI.applyMatrix4(l.matrixWorld);const g=o.ray.origin.distanceTo(zI);return g<o.near||g>o.far?null:{distance:g,point:zI.clone(),object:l}}(l,a,o,c,jp,Wp,qp,MB);if(b){f&&(BI.fromBufferAttribute(f,g),UI.fromBufferAttribute(f,y),GI.fromBufferAttribute(f,v),b.uv=lo.getUV(MB,jp,Wp,qp,BI,UI,GI,new St)),m&&(BI.fromBufferAttribute(m,g),UI.fromBufferAttribute(m,y),GI.fromBufferAttribute(m,v),b.uv2=lo.getUV(MB,jp,Wp,qp,BI,UI,GI,new St));const w={a:g,b:y,c:v,normal:new oe,materialIndex:0};lo.getNormal(jp,Wp,qp,w.normal),b.face=w}return b}Hs.prototype.isMesh=!0;class $g extends Kn{constructor(a=1,o=1,c=1,u=1,h=1,d=1){super(),this.type="BoxGeometry",this.parameters={width:a,height:o,depth:c,widthSegments:u,heightSegments:h,depthSegments:d};const f=this;u=Math.floor(u),h=Math.floor(h),d=Math.floor(d);const m=[],g=[],y=[],v=[];let _=0,b=0;function w(C,E,M,x,R,P,k,W,U,K,Q){const se=P/U,te=k/K,De=P/2,de=k/2,ye=W/2,_e=U+1,ue=K+1;let ce=0,Re=0;const Oe=new oe;for(let Ae=0;Ae<ue;Ae++){const We=Ae*te-de;for(let Te=0;Te<_e;Te++)Oe[C]=(Te*se-De)*x,Oe[E]=We*R,Oe[M]=ye,g.push(Oe.x,Oe.y,Oe.z),Oe[C]=0,Oe[E]=0,Oe[M]=W>0?1:-1,y.push(Oe.x,Oe.y,Oe.z),v.push(Te/U),v.push(1-Ae/K),ce+=1}for(let Ae=0;Ae<K;Ae++)for(let We=0;We<U;We++){const He=_+We+_e*(Ae+1),Ue=_+(We+1)+_e*(Ae+1),ct=_+(We+1)+_e*Ae;m.push(_+We+_e*Ae,He,ct),m.push(He,Ue,ct),Re+=6}f.addGroup(b,Re,Q),b+=Re,_+=ce}w("z","y","x",-1,-1,c,o,a,d,h,0),w("z","y","x",1,-1,c,o,-a,d,h,1),w("x","z","y",1,1,a,c,o,u,d,2),w("x","z","y",1,-1,a,c,-o,u,d,3),w("x","y","z",1,-1,a,o,c,u,h,4),w("x","y","z",-1,-1,a,o,-c,u,h,5),this.setIndex(m),this.setAttribute("position",new wn(g,3)),this.setAttribute("normal",new wn(y,3)),this.setAttribute("uv",new wn(v,2))}static fromJSON(a){return new $g(a.width,a.height,a.depth,a.widthSegments,a.heightSegments,a.depthSegments)}}function X0(l){const a={};for(const o in l){a[o]={};for(const c in l[o]){const u=l[o][c];a[o][c]=u&&(u.isColor||u.isMatrix3||u.isMatrix4||u.isVector2||u.isVector3||u.isVector4||u.isTexture||u.isQuaternion)?u.clone():Array.isArray(u)?u.slice():u}}return a}function xa(l){const a={};for(let o=0;o<l.length;o++){const c=X0(l[o]);for(const u in c)a[u]=c[u]}return a}const j$e={clone:X0,merge:xa};class gf extends Eo{constructor(a){super(),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,void 0!==a&&(void 0!==a.attributes&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(a))}copy(a){return super.copy(a),this.fragmentShader=a.fragmentShader,this.vertexShader=a.vertexShader,this.uniforms=X0(a.uniforms),this.defines=Object.assign({},a.defines),this.wireframe=a.wireframe,this.wireframeLinewidth=a.wireframeLinewidth,this.lights=a.lights,this.clipping=a.clipping,this.extensions=Object.assign({},a.extensions),this.glslVersion=a.glslVersion,this}toJSON(a){const o=super.toJSON(a);o.glslVersion=this.glslVersion,o.uniforms={};for(const u in this.uniforms){const d=this.uniforms[u].value;o.uniforms[u]=d&&d.isTexture?{type:"t",value:d.toJSON(a).uuid}:d&&d.isColor?{type:"c",value:d.getHex()}:d&&d.isVector2?{type:"v2",value:d.toArray()}:d&&d.isVector3?{type:"v3",value:d.toArray()}:d&&d.isVector4?{type:"v4",value:d.toArray()}:d&&d.isMatrix3?{type:"m3",value:d.toArray()}:d&&d.isMatrix4?{type:"m4",value:d.toArray()}:{value:d}}Object.keys(this.defines).length>0&&(o.defines=this.defines),o.vertexShader=this.vertexShader,o.fragmentShader=this.fragmentShader;const c={};for(const u in this.extensions)!0===this.extensions[u]&&(c[u]=!0);return Object.keys(c).length>0&&(o.extensions=c),o}}gf.prototype.isShaderMaterial=!0;class jI extends ui{constructor(){super(),this.type="Camera",this.matrixWorldInverse=new An,this.projectionMatrix=new An,this.projectionMatrixInverse=new An}copy(a,o){return super.copy(a,o),this.matrixWorldInverse.copy(a.matrixWorldInverse),this.projectionMatrix.copy(a.projectionMatrix),this.projectionMatrixInverse.copy(a.projectionMatrixInverse),this}getWorldDirection(a){this.updateWorldMatrix(!0,!1);const o=this.matrixWorld.elements;return a.set(-o[8],-o[9],-o[10]).normalize()}updateMatrixWorld(a){super.updateMatrixWorld(a),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(a,o){super.updateWorldMatrix(a,o),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return(new this.constructor).copy(this)}}jI.prototype.isCamera=!0;class co extends jI{constructor(a=50,o=1,c=.1,u=2e3){super(),this.type="PerspectiveCamera",this.fov=a,this.zoom=1,this.near=c,this.far=u,this.focus=10,this.aspect=o,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(a,o){return super.copy(a,o),this.fov=a.fov,this.zoom=a.zoom,this.near=a.near,this.far=a.far,this.focus=a.focus,this.aspect=a.aspect,this.view=null===a.view?null:Object.assign({},a.view),this.filmGauge=a.filmGauge,this.filmOffset=a.filmOffset,this}setFocalLength(a){const o=.5*this.getFilmHeight()/a;this.fov=2*Mw*Math.atan(o),this.updateProjectionMatrix()}getFocalLength(){const a=Math.tan(.5*jg*this.fov);return.5*this.getFilmHeight()/a}getEffectiveFOV(){return 2*Mw*Math.atan(Math.tan(.5*jg*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(a,o,c,u,h,d){this.aspect=a/o,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=a,this.view.fullHeight=o,this.view.offsetX=c,this.view.offsetY=u,this.view.width=h,this.view.height=d,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const a=this.near;let o=a*Math.tan(.5*jg*this.fov)/this.zoom,c=2*o,u=this.aspect*c,h=-.5*u;const d=this.view;if(null!==this.view&&this.view.enabled){const m=d.fullWidth,g=d.fullHeight;h+=d.offsetX*u/m,o-=d.offsetY*c/g,u*=d.width/m,c*=d.height/g}const f=this.filmOffset;0!==f&&(h+=a*f/this.getFilmWidth()),this.projectionMatrix.makePerspective(h,h+u,o,o-c,a,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(a){const o=super.toJSON(a);return o.object.fov=this.fov,o.object.zoom=this.zoom,o.object.near=this.near,o.object.far=this.far,o.object.focus=this.focus,o.object.aspect=this.aspect,null!==this.view&&(o.object.view=Object.assign({},this.view)),o.object.filmGauge=this.filmGauge,o.object.filmOffset=this.filmOffset,o}}co.prototype.isPerspectiveCamera=!0;class DB extends ui{constructor(a,o,c){if(super(),this.type="CubeCamera",!0!==c.isWebGLCubeRenderTarget)return void console.error("THREE.CubeCamera: The constructor now expects an instance of WebGLCubeRenderTarget as third parameter.");this.renderTarget=c;const u=new co(90,1,a,o);u.layers=this.layers,u.up.set(0,-1,0),u.lookAt(new oe(1,0,0)),this.add(u);const h=new co(90,1,a,o);h.layers=this.layers,h.up.set(0,-1,0),h.lookAt(new oe(-1,0,0)),this.add(h);const d=new co(90,1,a,o);d.layers=this.layers,d.up.set(0,0,1),d.lookAt(new oe(0,1,0)),this.add(d);const f=new co(90,1,a,o);f.layers=this.layers,f.up.set(0,0,-1),f.lookAt(new oe(0,-1,0)),this.add(f);const m=new co(90,1,a,o);m.layers=this.layers,m.up.set(0,-1,0),m.lookAt(new oe(0,0,1)),this.add(m);const g=new co(90,1,a,o);g.layers=this.layers,g.up.set(0,-1,0),g.lookAt(new oe(0,0,-1)),this.add(g)}update(a,o){null===this.parent&&this.updateMatrixWorld();const c=this.renderTarget,[u,h,d,f,m,g]=this.children,y=a.xr.enabled,v=a.getRenderTarget();a.xr.enabled=!1;const _=c.texture.generateMipmaps;c.texture.generateMipmaps=!1,a.setRenderTarget(c,0),a.render(o,u),a.setRenderTarget(c,1),a.render(o,h),a.setRenderTarget(c,2),a.render(o,d),a.setRenderTarget(c,3),a.render(o,f),a.setRenderTarget(c,4),a.render(o,m),c.texture.generateMipmaps=_,a.setRenderTarget(c,5),a.render(o,g),a.setRenderTarget(v),a.xr.enabled=y}}class Lw extends Co{constructor(a,o,c,u,h,d,f,m,g,y){super(a=void 0!==a?a:[],o=void 0!==o?o:301,c,u,h,d,f=void 0!==f?f:Zh,m,g,y),this.flipY=!1}get images(){return this.image}set images(a){this.image=a}}Lw.prototype.isCubeTexture=!0;class AB extends Kh{constructor(a,o,c){Number.isInteger(o)&&(console.warn("THREE.WebGLCubeRenderTarget: constructor signature is now WebGLCubeRenderTarget( size, options )"),o=c),super(a,a,o),this.texture=new Lw(void 0,(o=o||{}).mapping,o.wrapS,o.wrapT,o.magFilter,o.minFilter,o.format,o.type,o.anisotropy,o.encoding),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=void 0!==o.generateMipmaps&&o.generateMipmaps,this.texture.minFilter=void 0!==o.minFilter?o.minFilter:ao,this.texture._needsFlipEnvMap=!1}fromEquirectangularTexture(a,o){this.texture.type=o.type,this.texture.format=El,this.texture.encoding=o.encoding,this.texture.generateMipmaps=o.generateMipmaps,this.texture.minFilter=o.minFilter,this.texture.magFilter=o.magFilter;const c_uniforms={tEquirect:{value:null}},c_vertexShader="\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t",c_fragmentShader="\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t",u=new $g(5,5,5),h=new gf({name:"CubemapFromEquirect",uniforms:X0(c_uniforms),vertexShader:c_vertexShader,fragmentShader:c_fragmentShader,side:1,blending:0});h.uniforms.tEquirect.value=o;const d=new Hs(u,h),f=o.minFilter;return o.minFilter===Fp&&(o.minFilter=ao),new DB(1,10,this).update(a,d),o.minFilter=f,d.geometry.dispose(),d.material.dispose(),this}clear(a,o,c,u){const h=a.getRenderTarget();for(let d=0;d<6;d++)a.setRenderTarget(this,d),a.clear(o,c,u);a.setRenderTarget(h)}}AB.prototype.isWebGLCubeRenderTarget=!0;const IB=new oe,X$e=new oe,$$e=new zo;class yf{constructor(a=new oe(1,0,0),o=0){this.normal=a,this.constant=o}set(a,o){return this.normal.copy(a),this.constant=o,this}setComponents(a,o,c,u){return this.normal.set(a,o,c),this.constant=u,this}setFromNormalAndCoplanarPoint(a,o){return this.normal.copy(a),this.constant=-o.dot(this.normal),this}setFromCoplanarPoints(a,o,c){const u=IB.subVectors(c,o).cross(X$e.subVectors(a,o)).normalize();return this.setFromNormalAndCoplanarPoint(u,a),this}copy(a){return this.normal.copy(a.normal),this.constant=a.constant,this}normalize(){const a=1/this.normal.length();return this.normal.multiplyScalar(a),this.constant*=a,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(a){return this.normal.dot(a)+this.constant}distanceToSphere(a){return this.distanceToPoint(a.center)-a.radius}projectPoint(a,o){return o.copy(this.normal).multiplyScalar(-this.distanceToPoint(a)).add(a)}intersectLine(a,o){const c=a.delta(IB),u=this.normal.dot(c);if(0===u)return 0===this.distanceToPoint(a.start)?o.copy(a.start):null;const h=-(a.start.dot(this.normal)+this.constant)/u;return h<0||h>1?null:o.copy(c).multiplyScalar(h).add(a.start)}intersectsLine(a){const o=this.distanceToPoint(a.start),c=this.distanceToPoint(a.end);return o<0&&c>0||c<0&&o>0}intersectsBox(a){return a.intersectsPlane(this)}intersectsSphere(a){return a.intersectsPlane(this)}coplanarPoint(a){return a.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(a,o){const c=o||$$e.getNormalMatrix(a),u=this.coplanarPoint(IB).applyMatrix4(a),h=this.normal.applyMatrix3(c).normalize();return this.constant=-u.dot(h),this}translate(a){return this.constant-=a.dot(this.normal),this}equals(a){return a.normal.equals(this.normal)&&a.constant===this.constant}clone(){return(new this.constructor).copy(this)}}yf.prototype.isPlane=!0;const Z0=new Gp,WI=new oe;class qI{constructor(a=new yf,o=new yf,c=new yf,u=new yf,h=new yf,d=new yf){this.planes=[a,o,c,u,h,d]}set(a,o,c,u,h,d){const f=this.planes;return f[0].copy(a),f[1].copy(o),f[2].copy(c),f[3].copy(u),f[4].copy(h),f[5].copy(d),this}copy(a){const o=this.planes;for(let c=0;c<6;c++)o[c].copy(a.planes[c]);return this}setFromProjectionMatrix(a){const o=this.planes,c=a.elements,u=c[0],h=c[1],d=c[2],f=c[3],m=c[4],g=c[5],y=c[6],v=c[7],_=c[8],b=c[9],w=c[10],C=c[11],E=c[12],M=c[13],x=c[14],R=c[15];return o[0].setComponents(f-u,v-m,C-_,R-E).normalize(),o[1].setComponents(f+u,v+m,C+_,R+E).normalize(),o[2].setComponents(f+h,v+g,C+b,R+M).normalize(),o[3].setComponents(f-h,v-g,C-b,R-M).normalize(),o[4].setComponents(f-d,v-y,C-w,R-x).normalize(),o[5].setComponents(f+d,v+y,C+w,R+x).normalize(),this}intersectsObject(a){const o=a.geometry;return null===o.boundingSphere&&o.computeBoundingSphere(),Z0.copy(o.boundingSphere).applyMatrix4(a.matrixWorld),this.intersectsSphere(Z0)}intersectsSprite(a){return Z0.center.set(0,0,0),Z0.radius=.7071067811865476,Z0.applyMatrix4(a.matrixWorld),this.intersectsSphere(Z0)}intersectsSphere(a){const o=this.planes,c=a.center,u=-a.radius;for(let h=0;h<6;h++)if(o[h].distanceToPoint(c)<u)return!1;return!0}intersectsBox(a){const o=this.planes;for(let c=0;c<6;c++){const u=o[c];if(WI.x=u.normal.x>0?a.max.x:a.min.x,WI.y=u.normal.y>0?a.max.y:a.min.y,WI.z=u.normal.z>0?a.max.z:a.min.z,u.distanceToPoint(WI)<0)return!1}return!0}containsPoint(a){const o=this.planes;for(let c=0;c<6;c++)if(o[c].distanceToPoint(a)<0)return!1;return!0}clone(){return(new this.constructor).copy(this)}}function Fne(){let l=null,a=!1,o=null,c=null;function u(h,d){o(h,d),c=l.requestAnimationFrame(u)}return{start:function(){!0!==a&&null!==o&&(c=l.requestAnimationFrame(u),a=!0)},stop:function(){l.cancelAnimationFrame(c),a=!1},setAnimationLoop:function(h){o=h},setContext:function(h){l=h}}}function Y$e(l,a){const o=a.isWebGL2,c=new WeakMap;return{get:function(g){return g.isInterleavedBufferAttribute&&(g=g.data),c.get(g)},remove:function(g){g.isInterleavedBufferAttribute&&(g=g.data);const y=c.get(g);y&&(l.deleteBuffer(y.buffer),c.delete(g))},update:function(g,y){if(g.isGLBufferAttribute){const _=c.get(g);return void((!_||_.version<g.version)&&c.set(g,{buffer:g.buffer,type:g.type,bytesPerElement:g.elementSize,version:g.version}))}g.isInterleavedBufferAttribute&&(g=g.data);const v=c.get(g);void 0===v?c.set(g,function(g,y){const v=g.array,_=g.usage,b=l.createBuffer();l.bindBuffer(y,b),l.bufferData(y,v,_),g.onUploadCallback();let w=5126;return v instanceof Float32Array?w=5126:v instanceof Float64Array?console.warn("THREE.WebGLAttributes: Unsupported data buffer format: Float64Array."):v instanceof Uint16Array?g.isFloat16BufferAttribute?o?w=5131:console.warn("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2."):w=5123:v instanceof Int16Array?w=5122:v instanceof Uint32Array?w=5125:v instanceof Int32Array?w=5124:v instanceof Int8Array?w=5120:(v instanceof Uint8Array||v instanceof Uint8ClampedArray)&&(w=5121),{buffer:b,type:w,bytesPerElement:v.BYTES_PER_ELEMENT,version:g.version}}(g,y)):v.version<g.version&&(function(g,y,v){const _=y.array,b=y.updateRange;l.bindBuffer(v,g),-1===b.count?l.bufferSubData(v,0,_):(o?l.bufferSubData(v,b.offset*_.BYTES_PER_ELEMENT,_,b.offset,b.count):l.bufferSubData(v,b.offset*_.BYTES_PER_ELEMENT,_.subarray(b.offset,b.offset+b.count)),b.count=-1)}(v.buffer,g,y),v.version=g.version)}}}class Ow extends Kn{constructor(a=1,o=1,c=1,u=1){super(),this.type="PlaneGeometry",this.parameters={width:a,height:o,widthSegments:c,heightSegments:u};const h=a/2,d=o/2,f=Math.floor(c),m=Math.floor(u),g=f+1,y=m+1,v=a/f,_=o/m,b=[],w=[],C=[],E=[];for(let M=0;M<y;M++){const x=M*_-d;for(let R=0;R<g;R++)w.push(R*v-h,-x,0),C.push(0,0,1),E.push(R/f),E.push(1-M/m)}for(let M=0;M<m;M++)for(let x=0;x<f;x++){const P=x+g*(M+1),k=x+1+g*(M+1),W=x+1+g*M;b.push(x+g*M,P,W),b.push(P,k,W)}this.setIndex(b),this.setAttribute("position",new wn(w,3)),this.setAttribute("normal",new wn(C,3)),this.setAttribute("uv",new wn(E,2))}static fromJSON(a){return new Ow(a.width,a.height,a.widthSegments,a.heightSegments)}}const Xr={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef USE_ALPHATEST\n\tif ( diffuseColor.a < alphaTest ) discard;\n#endif",alphatest_pars_fragment:"#ifdef USE_ALPHATEST\n\tuniform float alphaTest;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"vec3 transformed = vec3( position );",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"vec3 BRDF_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_GGX( const in IncidentLight incidentLight, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( incidentLight.direction + viewDir );\n\tfloat dotNL = saturate( dot( normal, incidentLight.direction ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( f0, f90, dotVH );\n\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( V * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotVH = saturate( dot( geometry.viewDir, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, 1.0, dotVH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie( float roughness, float NoH ) {\n\tfloat invAlpha = 1.0 / roughness;\n\tfloat cos2h = NoH * NoH;\n\tfloat sin2h = max( 1.0 - cos2h, 0.0078125 );\n\treturn ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\n}\nfloat V_Neubelt( float NoV, float NoL ) {\n\treturn saturate( 1.0 / ( 4.0 * ( NoL + NoV - NoL * NoV ) ) );\n}\nvec3 BRDF_Sheen( const in float roughness, const in vec3 L, const in GeometricContext geometry, vec3 specularColor ) {\n\tvec3 N = geometry.normal;\n\tvec3 V = geometry.viewDir;\n\tvec3 H = normalize( V + L );\n\tfloat dotNH = saturate( dot( N, H ) );\n\treturn specularColor * D_Charlie( roughness, dotNH ) * V_Neubelt( dot(N, V), dot(N, L) );\n}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\n\t\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#pragma unroll_loop_end\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#if defined( USE_COLOR_ALPHA )\n\tdiffuseColor *= vColor;\n#elif defined( USE_COLOR )\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR )\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvarying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract( sin( sn ) * c );\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal;\n#endif\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat linearToRelativeLuminance( const in vec3 color ) {\n\tvec3 weights = vec3( 0.2126, 0.7152, 0.0722 );\n\treturn dot( weights, color.rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_maxMipLevel 8.0\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_maxTileSize 256.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\tfloat texelSize = 1.0 / ( 3.0 * cubeUV_maxTileSize );\n\t\tvec2 uv = getUV( direction, face ) * ( faceSize - 1.0 );\n\t\tvec2 f = fract( uv );\n\t\tuv += 0.5 - f;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tif ( mipInt < cubeUV_maxMipLevel ) {\n\t\t\tuv.y += 2.0 * cubeUV_maxTileSize;\n\t\t}\n\t\tuv.y += filterInt * 2.0 * cubeUV_minTileSize;\n\t\tuv.x += 3.0 * max( 0.0, cubeUV_maxTileSize - 2.0 * faceSize );\n\t\tuv *= texelSize;\n\t\tvec3 tl = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tuv.x += texelSize;\n\t\tvec3 tr = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tuv.y += texelSize;\n\t\tvec3 br = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tuv.x -= texelSize;\n\t\tvec3 bl = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tvec3 tm = mix( tl, tr, f.x );\n\t\tvec3 bm = mix( bl, br, f.x );\n\t\treturn mix( tm, bm, f.y );\n\t}\n\t#define r0 1.0\n\t#define v0 0.339\n\t#define m0 - 2.0\n\t#define r1 0.8\n\t#define v1 0.276\n\t#define m1 - 1.0\n\t#define r4 0.4\n\t#define v4 0.046\n\t#define m4 2.0\n\t#define r5 0.305\n\t#define v5 0.016\n\t#define m5 3.0\n\t#define r6 0.21\n\t#define v6 0.0038\n\t#define m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= r1 ) {\n\t\t\tmip = ( r0 - roughness ) * ( m1 - m0 ) / ( r0 - r1 ) + m0;\n\t\t} else if ( roughness >= r4 ) {\n\t\t\tmip = ( r1 - roughness ) * ( m4 - m1 ) / ( r1 - r4 ) + m1;\n\t\t} else if ( roughness >= r5 ) {\n\t\t\tmip = ( r4 - roughness ) * ( m5 - m4 ) / ( r4 - r5 ) + m4;\n\t\t} else if ( roughness >= r6 ) {\n\t\t\tmip = ( r5 - roughness ) * ( m6 - m5 ) / ( r5 - r6 ) + m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), m0, cubeUV_maxMipLevel );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_INSTANCING\n\tmat3 m = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\n\ttransformedNormal = m * transformedNormal;\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\temissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",encodings_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",encodings_pars_fragment:"\nvec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( gammaFactor ) ), value.a );\n}\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( 1.0 / gammaFactor ) ), value.a );\n}\nvec4 sRGBToLinear( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}\nvec4 RGBEToLinear( in vec4 value ) {\n\treturn vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\n}\nvec4 LinearToRGBE( in vec4 value ) {\n\tfloat maxComponent = max( max( value.r, value.g ), value.b );\n\tfloat fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\n\treturn vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\n}\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * value.a * maxRange, 1.0 );\n}\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat M = clamp( maxRGB / maxRange, 0.0, 1.0 );\n\tM = ceil( M * 255.0 ) / 255.0;\n\treturn vec4( value.rgb / ( M * maxRange ), M );\n}\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\n}\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat D = max( maxRange / maxRGB, 1.0 );\n\tD = clamp( floor( D ) / 255.0, 0.0, 1.0 );\n\treturn vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\n}\nconst mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );\nvec4 LinearToLogLuv( in vec4 value ) {\n\tvec3 Xp_Y_XYZp = cLogLuvM * value.rgb;\n\tXp_Y_XYZp = max( Xp_Y_XYZp, vec3( 1e-6, 1e-6, 1e-6 ) );\n\tvec4 vResult;\n\tvResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\n\tfloat Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\n\tvResult.w = fract( Le );\n\tvResult.z = ( Le - ( floor( vResult.w * 255.0 ) ) / 255.0 ) / 255.0;\n\treturn vResult;\n}\nconst mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );\nvec4 LogLuvToLinear( in vec4 value ) {\n\tfloat Le = value.z * 255.0 + value.w;\n\tvec3 Xp_Y_XYZp;\n\tXp_Y_XYZp.y = exp2( ( Le - 127.0 ) / 2.0 );\n\tXp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;\n\tXp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;\n\tvec3 vRGB = cLogLuvInverseM * Xp_Y_XYZp.rgb;\n\treturn vec4( max( vRGB, 0.0 ), 1.0 );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t\tenvColor = envMapTexelToLinear( envColor );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\tuniform int maxMipLevel;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#if defined( USE_ENVMAP )\n\t#ifdef ENVMAP_MODE_REFRACTION\n\t\tuniform float refractionRatio;\n\t#endif\n\tvec3 getIBLIrradiance( const in GeometricContext geometry ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n\t\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\tvec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 reflectVec;\n\t\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\t\treflectVec = reflect( - viewDir, normal );\n\t\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t\t#else\n\t\t\t\treflectVec = refract( - viewDir, normal, refractionRatio );\n\t\t\t#endif\n\t\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n\t\t\treturn envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tvFogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float vFogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float vFogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn texture2D( gradientMap, coord ).rgb;\n\t#else\n\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\t#endif\n}",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\tvec3 lightMapIrradiance = lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tlightMapIrradiance *= PI;\n\t#endif\n\treflectedLight.indirectDiffuse += lightMapIrradiance;\n#endif",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_vertex:"vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\nvIndirectFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n\tvIndirectBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\nvIndirectFront += getAmbientLightIrradiance( ambientLightColor );\nvIndirectFront += getLightProbeIrradiance( lightProbe, geometry );\n#ifdef DOUBLE_SIDED\n\tvIndirectBack += getAmbientLightIrradiance( ambientLightColor );\n\tvIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry );\n#endif\n#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointLightInfo( pointLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( - dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotLightInfo( spotLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( - dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalLightInfo( directionalLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( - dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in GeometricContext geometry ) {\n\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\treturn irradiance;\n}\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\t#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\tif ( cutoffDistance > 0.0 ) {\n\t\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\t}\n\t\treturn distanceFalloff;\n\t#else\n\t\tif ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\t\treturn pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t\t}\n\t\treturn 1.0;\n\t#endif\n}\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\n\treturn smoothstep( coneCosine, penumbraCosine, angleCosine );\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tlight.color = directionalLight.color;\n\t\tlight.direction = directionalLight.direction;\n\t\tlight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tlight.color = pointLight.color;\n\t\tlight.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\n\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat angleCos = dot( light.direction, spotLight.direction );\n\t\tfloat spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\tif ( spotAttenuation > 0.0 ) {\n\t\t\tfloat lightDistance = length( lVector );\n\t\t\tlight.color = spotLight.color * spotAttenuation;\n\t\t\tlight.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t\t} else {\n\t\t\tlight.color = vec3( 0.0 );\n\t\t\tlight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {\n\t\tfloat dotNL = dot( geometry.normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon\n#define Material_LightProbeLOD( material )\t(0)",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;\nmaterial.roughness = min( material.roughness, 1.0 );\n#ifdef IOR\n\t#ifdef SPECULAR\n\t\tfloat specularIntensityFactor = specularIntensity;\n\t\tvec3 specularTintFactor = specularTint;\n\t\t#ifdef USE_SPECULARINTENSITYMAP\n\t\t\tspecularIntensityFactor *= texture2D( specularIntensityMap, vUv ).a;\n\t\t#endif\n\t\t#ifdef USE_SPECULARTINTMAP\n\t\t\tspecularTintFactor *= specularTintMapTexelToLinear( texture2D( specularTintMap, vUv ) ).rgb;\n\t\t#endif\n\t\tmaterial.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );\n\t#else\n\t\tfloat specularIntensityFactor = 1.0;\n\t\tvec3 specularTintFactor = vec3( 1.0 );\n\t\tmaterial.specularF90 = 1.0;\n\t#endif\n\tmaterial.specularColor = mix( min( pow2( ( ior - 1.0 ) / ( ior + 1.0 ) ) * specularTintFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.specularF90 = 1.0;\n#endif\n#ifdef USE_CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\tmaterial.clearcoatF0 = vec3( 0.04 );\n\tmaterial.clearcoatF90 = 1.0;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenTint = sheenTint;\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat roughness;\n\tvec3 specularColor;\n\tfloat specularF90;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat clearcoat;\n\t\tfloat clearcoatRoughness;\n\t\tvec3 clearcoatF0;\n\t\tfloat clearcoatF90;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tvec3 sheenTint;\n\t#endif\n};\nvec3 clearcoatSpecular = vec3( 0.0 );\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;\n\treturn fab;\n}\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\treturn specularColor * fab.x + specularF90 * fab.y;\n}\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\tvec3 FssEss = specularColor * fab.x + specularF90 * fab.y;\n\tfloat Ess = fab.x + fab.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = specularColor + ( 1.0 - specularColor ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.roughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = dotNLcc * directLight.color;\n\t\tclearcoatSpecular += ccIrradiance * BRDF_GGX( directLight, geometry.viewDir, geometry.clearcoatNormal, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\treflectedLight.directSpecular += irradiance * BRDF_Sheen( material.roughness, directLight.direction, geometry, material.sheenTint );\n\t#else\n\t\treflectedLight.directSpecular += irradiance * BRDF_GGX( directLight, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.roughness );\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\tcomputeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - ( singleScattering + multiScattering ) );\n\treflectedLight.indirectSpecular += radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\n#ifdef USE_CLEARCOAT\n\tgeometry.clearcoatNormal = clearcoatNormal;\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointLightInfo( pointLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotLightInfo( spotLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalLightInfo( directionalLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\tirradiance += getLightProbeIrradiance( lightProbe, geometry );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\t\tvec3 lightMapIrradiance = lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tlightMapIrradiance *= PI;\n\t\t#endif\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getIBLIrradiance( geometry );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\t#else\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\t\tgl_Position.z *= gl_Position.w;\n\t\t}\n\t#endif\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 texelColor = texture2D( map, vUv );\n\ttexelColor = mapTexelToLinear( texelColor );\n\tdiffuseColor *= texelColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n#endif\n#ifdef USE_MAP\n\tvec4 mapTexel = texture2D( map, uv );\n\tdiffuseColor *= mapTexelToLinear( mapTexel );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tuniform mat3 uvTransform;\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\tuniform float morphTargetBaseInfluence;\n\t#ifndef USE_MORPHNORMALS\n\t\tuniform float morphTargetInfluences[ 8 ];\n\t#else\n\t\tuniform float morphTargetInfluences[ 4 ];\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\t#ifndef USE_MORPHNORMALS\n\t\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\t\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\t\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\t\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\t#endif\n#endif",normal_fragment_begin:"float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\t#ifdef USE_TANGENT\n\t\tvec3 tangent = normalize( vTangent );\n\t\tvec3 bitangent = normalize( vBitangent );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\ttangent = tangent * faceDirection;\n\t\t\tbitangent = bitangent * faceDirection;\n\t\t#endif\n\t\t#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tmat3 vTBN = mat3( tangent, bitangent, normal );\n\t\t#endif\n\t#endif\n#endif\nvec3 geometryNormal = normal;",normal_fragment_maps:"#ifdef OBJECTSPACE_NORMALMAP\n\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( TANGENTSPACE_NORMALMAP )\n\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\t#ifdef USE_TANGENT\n\t\tnormal = normalize( vTBN * mapN );\n\t#else\n\t\tnormal = perturbNormal2Arb( - vViewPosition, normal, mapN, faceDirection );\n\t#endif\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",normal_pars_fragment:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_pars_vertex:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_vertex:"#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef OBJECTSPACE_NORMALMAP\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {\n\t\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\n\t\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tvec3 N = surf_norm;\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );\n\t\treturn normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal = geometryNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\t#ifdef USE_TANGENT\n\t\tclearcoatNormal = normalize( vTBN * clearcoatMapN );\n\t#else\n\t\tclearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );\n\t#endif\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif",output_fragment:"#ifdef OPAQUE\ndiffuseColor.a = 1.0;\n#endif\n#ifdef USE_TRANSMISSION\ndiffuseColor.a *= transmissionAlpha + 0.1;\n#endif\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",shadowmap_pars_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0\n\t\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\tvec4 shadowWorldPosition;\n\t#endif\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\t#ifdef BONE_TEXTURE\n\t\tuniform highp sampler2D boneTexture;\n\t\tuniform int boneTextureSize;\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\t\ty = dy * ( y + 0.5 );\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\t\treturn bone;\n\t\t}\n\t#else\n\t\tuniform mat4 boneMatrices[ MAX_BONES ];\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tmat4 bone = boneMatrices[ int(i) ];\n\t\t\treturn bone;\n\t\t}\n\t#endif\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmission_fragment:"#ifdef USE_TRANSMISSION\n\tfloat transmissionAlpha = 1.0;\n\tfloat transmissionFactor = transmission;\n\tfloat thicknessFactor = thickness;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\ttransmissionFactor *= texture2D( transmissionMap, vUv ).r;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tthicknessFactor *= texture2D( thicknessMap, vUv ).g;\n\t#endif\n\tvec3 pos = vWorldPosition;\n\tvec3 v = normalize( cameraPosition - pos );\n\tvec3 n = inverseTransformDirection( normal, viewMatrix );\n\tvec4 transmission = getIBLVolumeRefraction(\n\t\tn, v, roughnessFactor, material.diffuseColor, material.specularColor, material.specularF90,\n\t\tpos, modelMatrix, viewMatrix, projectionMatrix, ior, thicknessFactor,\n\t\tattenuationTint, attenuationDistance );\n\ttotalDiffuse = mix( totalDiffuse, transmission.rgb, transmissionFactor );\n\ttransmissionAlpha = transmission.a;\n#endif",transmission_pars_fragment:"#ifdef USE_TRANSMISSION\n\tuniform float transmission;\n\tuniform float thickness;\n\tuniform float attenuationDistance;\n\tuniform vec3 attenuationTint;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tuniform sampler2D transmissionMap;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tuniform sampler2D thicknessMap;\n\t#endif\n\tuniform vec2 transmissionSamplerSize;\n\tuniform sampler2D transmissionSamplerMap;\n\tuniform mat4 modelMatrix;\n\tuniform mat4 projectionMatrix;\n\tvarying vec3 vWorldPosition;\n\tvec3 getVolumeTransmissionRay( vec3 n, vec3 v, float thickness, float ior, mat4 modelMatrix ) {\n\t\tvec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\n\t\tvec3 modelScale;\n\t\tmodelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n\t\tmodelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n\t\tmodelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n\t\treturn normalize( refractionVector ) * thickness * modelScale;\n\t}\n\tfloat applyIorToRoughness( float roughness, float ior ) {\n\t\treturn roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n\t}\n\tvec4 getTransmissionSample( vec2 fragCoord, float roughness, float ior ) {\n\t\tfloat framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\treturn texture2DLodEXT( transmissionSamplerMap, fragCoord.xy, framebufferLod );\n\t\t#else\n\t\t\treturn texture2D( transmissionSamplerMap, fragCoord.xy, framebufferLod );\n\t\t#endif\n\t}\n\tvec3 applyVolumeAttenuation( vec3 radiance, float transmissionDistance, vec3 attenuationColor, float attenuationDistance ) {\n\t\tif ( attenuationDistance == 0.0 ) {\n\t\t\treturn radiance;\n\t\t} else {\n\t\t\tvec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\n\t\t\tvec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );\t\t\treturn transmittance * radiance;\n\t\t}\n\t}\n\tvec4 getIBLVolumeRefraction( vec3 n, vec3 v, float roughness, vec3 diffuseColor, vec3 specularColor, float specularF90,\n\t\tvec3 position, mat4 modelMatrix, mat4 viewMatrix, mat4 projMatrix, float ior, float thickness,\n\t\tvec3 attenuationColor, float attenuationDistance ) {\n\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\trefractionCoords += 1.0;\n\t\trefractionCoords /= 2.0;\n\t\tvec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\n\t\tvec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );\n\t\tvec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\n\t\treturn vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );\n\t}\n#endif",uv_pars_fragment:"#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#ifdef USE_UV\n\t#ifdef UVS_VERTEX_ONLY\n\t\tvec2 vUv;\n\t#else\n\t\tvarying vec2 vUv;\n\t#endif\n\tuniform mat3 uvTransform;\n#endif",uv_vertex:"#ifdef USE_UV\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n\tuniform mat3 uv2Transform;\n#endif",uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION )\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_frag:"uniform sampler2D t2D;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",cube_frag:"#include <envmap_common_pars_fragment>\nuniform float opacity;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\tvec3 vReflect = vWorldDirection;\n\t#include <envmap_fragment>\n\tgl_FragColor = envColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#endif\n}",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tvec4 texColor = texture2D( tEquirect, sampleUV );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\t\treflectedLight.indirectDiffuse += lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinbase_vertex>\n\t\t#include <skinnormal_vertex>\n\t\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;\n\t#else\n\t\treflectedLight.indirectDiffuse += vIndirectFront;\n\t#endif\n\t#include <lightmap_fragment>\n\treflectedLight.indirectDiffuse *= BRDF_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *= BRDF_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t\tmatcapColor = matcapTexelToLinear( matcapColor );\n\t#else\n\t\tvec4 matcapColor = vec4( 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshnormal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n}",meshnormal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define IOR\n\t#define SPECULAR\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef IOR\n\tuniform float ior;\n#endif\n#ifdef SPECULAR\n\tuniform float specularIntensity;\n\tuniform vec3 specularTint;\n\t#ifdef USE_SPECULARINTENSITYMAP\n\t\tuniform sampler2D specularIntensityMap;\n\t#endif\n\t#ifdef USE_SPECULARTINTMAP\n\t\tuniform sampler2D specularTintMap;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheenTint;\n#endif\nvarying vec3 vViewPosition;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n\tvec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n\t#include <transmission_fragment>\n\tvec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n\t\tvec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n\t\toutgoingLight = outgoingLight * ( 1.0 - clearcoat * Fcc ) + clearcoatSpecular * clearcoat;\n\t#endif\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifdef USE_TRANSMISSION\n\tvarying vec3 vWorldPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n\tvWorldPosition = worldPosition.xyz;\n#endif\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",shadow_vert:"#include <common>\n#include <fog_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}"},an={common:{diffuse:{value:new Zt(16777215)},opacity:{value:1},map:{value:null},uvTransform:{value:new zo},uv2Transform:{value:new zo},alphaMap:{value:null},alphaTest:{value:0}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98},maxMipLevel:{value:0}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new St(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Zt(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Zt(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new zo}},sprite:{diffuse:{value:new Zt(16777215)},opacity:{value:1},center:{value:new St(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new zo}}},Jh={basic:{uniforms:xa([an.common,an.specularmap,an.envmap,an.aomap,an.lightmap,an.fog]),vertexShader:Xr.meshbasic_vert,fragmentShader:Xr.meshbasic_frag},lambert:{uniforms:xa([an.common,an.specularmap,an.envmap,an.aomap,an.lightmap,an.emissivemap,an.fog,an.lights,{emissive:{value:new Zt(0)}}]),vertexShader:Xr.meshlambert_vert,fragmentShader:Xr.meshlambert_frag},phong:{uniforms:xa([an.common,an.specularmap,an.envmap,an.aomap,an.lightmap,an.emissivemap,an.bumpmap,an.normalmap,an.displacementmap,an.fog,an.lights,{emissive:{value:new Zt(0)},specular:{value:new Zt(1118481)},shininess:{value:30}}]),vertexShader:Xr.meshphong_vert,fragmentShader:Xr.meshphong_frag},standard:{uniforms:xa([an.common,an.envmap,an.aomap,an.lightmap,an.emissivemap,an.bumpmap,an.normalmap,an.displacementmap,an.roughnessmap,an.metalnessmap,an.fog,an.lights,{emissive:{value:new Zt(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Xr.meshphysical_vert,fragmentShader:Xr.meshphysical_frag},toon:{uniforms:xa([an.common,an.aomap,an.lightmap,an.emissivemap,an.bumpmap,an.normalmap,an.displacementmap,an.gradientmap,an.fog,an.lights,{emissive:{value:new Zt(0)}}]),vertexShader:Xr.meshtoon_vert,fragmentShader:Xr.meshtoon_frag},matcap:{uniforms:xa([an.common,an.bumpmap,an.normalmap,an.displacementmap,an.fog,{matcap:{value:null}}]),vertexShader:Xr.meshmatcap_vert,fragmentShader:Xr.meshmatcap_frag},points:{uniforms:xa([an.points,an.fog]),vertexShader:Xr.points_vert,fragmentShader:Xr.points_frag},dashed:{uniforms:xa([an.common,an.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Xr.linedashed_vert,fragmentShader:Xr.linedashed_frag},depth:{uniforms:xa([an.common,an.displacementmap]),vertexShader:Xr.depth_vert,fragmentShader:Xr.depth_frag},normal:{uniforms:xa([an.common,an.bumpmap,an.normalmap,an.displacementmap,{opacity:{value:1}}]),vertexShader:Xr.meshnormal_vert,fragmentShader:Xr.meshnormal_frag},sprite:{uniforms:xa([an.sprite,an.fog]),vertexShader:Xr.sprite_vert,fragmentShader:Xr.sprite_frag},background:{uniforms:{uvTransform:{value:new zo},t2D:{value:null}},vertexShader:Xr.background_vert,fragmentShader:Xr.background_frag},cube:{uniforms:xa([an.envmap,{opacity:{value:1}}]),vertexShader:Xr.cube_vert,fragmentShader:Xr.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Xr.equirect_vert,fragmentShader:Xr.equirect_frag},distanceRGBA:{uniforms:xa([an.common,an.displacementmap,{referencePosition:{value:new oe},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Xr.distanceRGBA_vert,fragmentShader:Xr.distanceRGBA_frag},shadow:{uniforms:xa([an.lights,an.fog,{color:{value:new Zt(0)},opacity:{value:1}}]),vertexShader:Xr.shadow_vert,fragmentShader:Xr.shadow_frag}};function TKe(l,a,o,c,u){const h=new Zt(0);let f,m,d=0,g=null,y=0,v=null;function b(w,C){o.buffers.color.setClear(w.r,w.g,w.b,C,u)}return{getClearColor:function(){return h},setClearColor:function(w,C=1){h.set(w),d=C,b(h,d)},getClearAlpha:function(){return d},setClearAlpha:function(w){d=w,b(h,d)},render:function(w,C){let E=!1,M=!0===C.isScene?C.background:null;M&&M.isTexture&&(M=a.get(M));const x=l.xr,R=x.getSession&&x.getSession();R&&"additive"===R.environmentBlendMode&&(M=null),null===M?b(h,d):M&&M.isColor&&(b(M,1),E=!0),(l.autoClear||E)&&l.clear(l.autoClearColor,l.autoClearDepth,l.autoClearStencil),M&&(M.isCubeTexture||306===M.mapping)?(void 0===m&&(m=new Hs(new $g(1,1,1),new gf({name:"BackgroundCubeMaterial",uniforms:X0(Jh.cube.uniforms),vertexShader:Jh.cube.vertexShader,fragmentShader:Jh.cube.fragmentShader,side:1,depthTest:!1,depthWrite:!1,fog:!1})),m.geometry.deleteAttribute("normal"),m.geometry.deleteAttribute("uv"),m.onBeforeRender=function(P,k,W){this.matrixWorld.copyPosition(W.matrixWorld)},Object.defineProperty(m.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),c.update(m)),m.material.uniforms.envMap.value=M,m.material.uniforms.flipEnvMap.value=M.isCubeTexture&&!1===M.isRenderTargetTexture?-1:1,(g!==M||y!==M.version||v!==l.toneMapping)&&(m.material.needsUpdate=!0,g=M,y=M.version,v=l.toneMapping),w.unshift(m,m.geometry,m.material,0,0,null)):M&&M.isTexture&&(void 0===f&&(f=new Hs(new Ow(2,2),new gf({name:"BackgroundMaterial",uniforms:X0(Jh.background.uniforms),vertexShader:Jh.background.vertexShader,fragmentShader:Jh.background.fragmentShader,side:0,depthTest:!1,depthWrite:!1,fog:!1})),f.geometry.deleteAttribute("normal"),Object.defineProperty(f.material,"map",{get:function(){return this.uniforms.t2D.value}}),c.update(f)),f.material.uniforms.t2D.value=M,!0===M.matrixAutoUpdate&&M.updateMatrix(),f.material.uniforms.uvTransform.value.copy(M.matrix),(g!==M||y!==M.version||v!==l.toneMapping)&&(f.material.needsUpdate=!0,g=M,y=M.version,v=l.toneMapping),w.unshift(f,f.geometry,f.material,0,0,null))}}}function wKe(l,a,o,c){const u=l.getParameter(34921),h=c.isWebGL2?null:a.get("OES_vertex_array_object"),d=c.isWebGL2||null!==h,f={},m=C(null);let g=m;function _(de){return c.isWebGL2?l.bindVertexArray(de):h.bindVertexArrayOES(de)}function b(de){return c.isWebGL2?l.deleteVertexArray(de):h.deleteVertexArrayOES(de)}function C(de){const ye=[],_e=[],ue=[];for(let ce=0;ce<u;ce++)ye[ce]=0,_e[ce]=0,ue[ce]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:ye,enabledAttributes:_e,attributeDivisors:ue,object:de,attributes:{},index:null}}function x(){const de=g.newAttributes;for(let ye=0,_e=de.length;ye<_e;ye++)de[ye]=0}function R(de){P(de,0)}function P(de,ye){const ue=g.enabledAttributes,ce=g.attributeDivisors;g.newAttributes[de]=1,0===ue[de]&&(l.enableVertexAttribArray(de),ue[de]=1),ce[de]!==ye&&((c.isWebGL2?l:a.get("ANGLE_instanced_arrays"))[c.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](de,ye),ce[de]=ye)}function k(){const de=g.newAttributes,ye=g.enabledAttributes;for(let _e=0,ue=ye.length;_e<ue;_e++)ye[_e]!==de[_e]&&(l.disableVertexAttribArray(_e),ye[_e]=0)}function W(de,ye,_e,ue,ce,Re){!0!==c.isWebGL2||5124!==_e&&5125!==_e?l.vertexAttribPointer(de,ye,_e,ue,ce,Re):l.vertexAttribIPointer(de,ye,_e,ce,Re)}function te(){De(),g!==m&&(g=m,_(g.object))}function De(){m.geometry=null,m.program=null,m.wireframe=!1}return{setup:function(de,ye,_e,ue,ce){let Re=!1;if(d){const Oe=function(de,ye,_e){const ue=!0===_e.wireframe;let ce=f[de.id];void 0===ce&&(ce={},f[de.id]=ce);let Re=ce[ye.id];void 0===Re&&(Re={},ce[ye.id]=Re);let Oe=Re[ue];return void 0===Oe&&(Oe=C(c.isWebGL2?l.createVertexArray():h.createVertexArrayOES()),Re[ue]=Oe),Oe}(ue,_e,ye);g!==Oe&&(g=Oe,_(g.object)),Re=function(de,ye){const _e=g.attributes,ue=de.attributes;let ce=0;for(const Re in ue){const Oe=_e[Re],Ae=ue[Re];if(void 0===Oe||Oe.attribute!==Ae||Oe.data!==Ae.data)return!0;ce++}return g.attributesNum!==ce||g.index!==ye}(ue,ce),Re&&function(de,ye){const _e={},ue=de.attributes;let ce=0;for(const Re in ue){const Oe=ue[Re],Ae={};Ae.attribute=Oe,Oe.data&&(Ae.data=Oe.data),_e[Re]=Ae,ce++}g.attributes=_e,g.attributesNum=ce,g.index=ye}(ue,ce)}else{const Oe=!0===ye.wireframe;(g.geometry!==ue.id||g.program!==_e.id||g.wireframe!==Oe)&&(g.geometry=ue.id,g.program=_e.id,g.wireframe=Oe,Re=!0)}!0===de.isInstancedMesh&&(Re=!0),null!==ce&&o.update(ce,34963),Re&&(function(de,ye,_e,ue){if(!1===c.isWebGL2&&(de.isInstancedMesh||ue.isInstancedBufferGeometry)&&null===a.get("ANGLE_instanced_arrays"))return;x();const ce=ue.attributes,Re=_e.getAttributes(),Oe=ye.defaultAttributeValues;for(const Ae in Re){const We=Re[Ae];if(We.location>=0){let Te=ce[Ae];if(void 0===Te&&("instanceMatrix"===Ae&&de.instanceMatrix&&(Te=de.instanceMatrix),"instanceColor"===Ae&&de.instanceColor&&(Te=de.instanceColor)),void 0!==Te){const He=Te.normalized,Ue=Te.itemSize,ct=o.get(Te);if(void 0===ct)continue;const Ce=ct.buffer,xt=ct.type,Ye=ct.bytesPerElement;if(Te.isInterleavedBufferAttribute){const Ct=Te.data,Ot=Ct.stride,Kt=Te.offset;if(Ct&&Ct.isInstancedInterleavedBuffer){for(let it=0;it<We.locationSize;it++)P(We.location+it,Ct.meshPerAttribute);!0!==de.isInstancedMesh&&void 0===ue._maxInstanceCount&&(ue._maxInstanceCount=Ct.meshPerAttribute*Ct.count)}else for(let it=0;it<We.locationSize;it++)R(We.location+it);l.bindBuffer(34962,Ce);for(let it=0;it<We.locationSize;it++)W(We.location+it,Ue/We.locationSize,xt,He,Ot*Ye,(Kt+Ue/We.locationSize*it)*Ye)}else{if(Te.isInstancedBufferAttribute){for(let Ct=0;Ct<We.locationSize;Ct++)P(We.location+Ct,Te.meshPerAttribute);!0!==de.isInstancedMesh&&void 0===ue._maxInstanceCount&&(ue._maxInstanceCount=Te.meshPerAttribute*Te.count)}else for(let Ct=0;Ct<We.locationSize;Ct++)R(We.location+Ct);l.bindBuffer(34962,Ce);for(let Ct=0;Ct<We.locationSize;Ct++)W(We.location+Ct,Ue/We.locationSize,xt,He,Ue*Ye,Ue/We.locationSize*Ct*Ye)}}else if(void 0!==Oe){const He=Oe[Ae];if(void 0!==He)switch(He.length){case 2:l.vertexAttrib2fv(We.location,He);break;case 3:l.vertexAttrib3fv(We.location,He);break;case 4:l.vertexAttrib4fv(We.location,He);break;default:l.vertexAttrib1fv(We.location,He)}}}}k()}(de,ye,_e,ue),null!==ce&&l.bindBuffer(34963,o.get(ce).buffer))},reset:te,resetDefaultState:De,dispose:function(){te();for(const de in f){const ye=f[de];for(const _e in ye){const ue=ye[_e];for(const ce in ue)b(ue[ce].object),delete ue[ce];delete ye[_e]}delete f[de]}},releaseStatesOfGeometry:function(de){if(void 0===f[de.id])return;const ye=f[de.id];for(const _e in ye){const ue=ye[_e];for(const ce in ue)b(ue[ce].object),delete ue[ce];delete ye[_e]}delete f[de.id]},releaseStatesOfProgram:function(de){for(const ye in f){const _e=f[ye];if(void 0===_e[de.id])continue;const ue=_e[de.id];for(const ce in ue)b(ue[ce].object),delete ue[ce];delete _e[de.id]}},initAttributes:x,enableAttribute:R,disableUnusedAttributes:k}}function CKe(l,a,o,c){const u=c.isWebGL2;let h;this.setMode=function(g){h=g},this.render=function(g,y){l.drawArrays(h,g,y),o.update(y,h,1)},this.renderInstances=function(g,y,v){if(0===v)return;let _,b;if(u)_=l,b="drawArraysInstanced";else if(_=a.get("ANGLE_instanced_arrays"),b="drawArraysInstancedANGLE",null===_)return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");_[b](h,g,y,v),o.update(y,h,v)}}function xKe(l,a,o){let c;function h(U){if("highp"===U){if(l.getShaderPrecisionFormat(35633,36338).precision>0&&l.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";U="mediump"}return"mediump"===U&&l.getShaderPrecisionFormat(35633,36337).precision>0&&l.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}const d="undefined"!=typeof WebGL2RenderingContext&&l instanceof WebGL2RenderingContext||"undefined"!=typeof WebGL2ComputeRenderingContext&&l instanceof WebGL2ComputeRenderingContext;let f=void 0!==o.precision?o.precision:"highp";const m=h(f);m!==f&&(console.warn("THREE.WebGLRenderer:",f,"not supported, using",m,"instead."),f=m);const g=d||a.has("WEBGL_draw_buffers"),y=!0===o.logarithmicDepthBuffer,v=l.getParameter(34930),_=l.getParameter(35660),b=l.getParameter(3379),w=l.getParameter(34076),C=l.getParameter(34921),E=l.getParameter(36347),M=l.getParameter(36348),x=l.getParameter(36349),R=_>0,P=d||a.has("OES_texture_float");return{isWebGL2:d,drawBuffers:g,getMaxAnisotropy:function(){if(void 0!==c)return c;if(!0===a.has("EXT_texture_filter_anisotropic")){const U=a.get("EXT_texture_filter_anisotropic");c=l.getParameter(U.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else c=0;return c},getMaxPrecision:h,precision:f,logarithmicDepthBuffer:y,maxTextures:v,maxVertexTextures:_,maxTextureSize:b,maxCubemapSize:w,maxAttributes:C,maxVertexUniforms:E,maxVaryings:M,maxFragmentUniforms:x,vertexTextures:R,floatFragmentTextures:P,floatVertexTextures:R&&P,maxSamples:d?l.getParameter(36183):0}}function EKe(l){const a=this;let o=null,c=0,u=!1,h=!1;const d=new yf,f=new zo,m={value:null,needsUpdate:!1};function g(){m.value!==o&&(m.value=o,m.needsUpdate=c>0),a.numPlanes=c,a.numIntersection=0}function y(v,_,b,w){const C=null!==v?v.length:0;let E=null;if(0!==C){if(E=m.value,!0!==w||null===E){const M=b+4*C,x=_.matrixWorldInverse;f.getNormalMatrix(x),(null===E||E.length<M)&&(E=new Float32Array(M));for(let R=0,P=b;R!==C;++R,P+=4)d.copy(v[R]).applyMatrix4(x,f),d.normal.toArray(E,P),E[P+3]=d.constant}m.value=E,m.needsUpdate=!0}return a.numPlanes=C,a.numIntersection=0,E}this.uniform=m,this.numPlanes=0,this.numIntersection=0,this.init=function(v,_,b){const w=0!==v.length||_||0!==c||u;return u=_,o=y(v,b,0),c=v.length,w},this.beginShadows=function(){h=!0,y(null)},this.endShadows=function(){h=!1,g()},this.setState=function(v,_,b){const w=v.clippingPlanes,C=v.clipIntersection,E=v.clipShadows,M=l.get(v);if(!u||null===w||0===w.length||h&&!E)h?y(null):g();else{const x=h?0:c,R=4*x;let P=M.clippingState||null;m.value=P,P=y(w,_,R,b);for(let k=0;k!==R;++k)P[k]=o[k];M.clippingState=P,this.numIntersection=C?this.numPlanes:0,this.numPlanes+=x}}}function MKe(l){let a=new WeakMap;function o(d,f){return 303===f?d.mapping=301:304===f&&(d.mapping=302),d}function u(d){const f=d.target;f.removeEventListener("dispose",u);const m=a.get(f);void 0!==m&&(a.delete(f),m.dispose())}return{get:function(d){if(d&&d.isTexture&&!1===d.isRenderTargetTexture){const f=d.mapping;if(303===f||304===f){if(a.has(d))return o(a.get(d).texture,d.mapping);{const m=d.image;if(m&&m.height>0){const g=l.getRenderTarget(),y=new AB(m.height/2);return y.fromEquirectangularTexture(l,d),a.set(d,y),l.setRenderTarget(g),d.addEventListener("dispose",u),o(y.texture,d.mapping)}return null}}}return d},dispose:function(){a=new WeakMap}}}Jh.physical={uniforms:xa([Jh.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new St(1,1)},clearcoatNormalMap:{value:null},sheenTint:{value:new Zt(0)},transmission:{value:0},transmissionMap:{value:null},transmissionSamplerSize:{value:new St},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:0},attenuationTint:{value:new Zt(0)},specularIntensity:{value:0},specularIntensityMap:{value:null},specularTint:{value:new Zt(1,1,1)},specularTintMap:{value:null}}]),vertexShader:Xr.meshphysical_vert,fragmentShader:Xr.meshphysical_frag};class Nw extends jI{constructor(a=-1,o=1,c=1,u=-1,h=.1,d=2e3){super(),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=a,this.right=o,this.top=c,this.bottom=u,this.near=h,this.far=d,this.updateProjectionMatrix()}copy(a,o){return super.copy(a,o),this.left=a.left,this.right=a.right,this.top=a.top,this.bottom=a.bottom,this.near=a.near,this.far=a.far,this.zoom=a.zoom,this.view=null===a.view?null:Object.assign({},a.view),this}setViewOffset(a,o,c,u,h,d){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=a,this.view.fullHeight=o,this.view.offsetX=c,this.view.offsetY=u,this.view.width=h,this.view.height=d,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const a=(this.right-this.left)/(2*this.zoom),o=(this.top-this.bottom)/(2*this.zoom),c=(this.right+this.left)/2,u=(this.top+this.bottom)/2;let h=c-a,d=c+a,f=u+o,m=u-o;if(null!==this.view&&this.view.enabled){const g=(this.right-this.left)/this.view.fullWidth/this.zoom,y=(this.top-this.bottom)/this.view.fullHeight/this.zoom;h+=g*this.view.offsetX,d=h+g*this.view.width,f-=y*this.view.offsetY,m=f-y*this.view.height}this.projectionMatrix.makeOrthographic(h,d,f,m,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(a){const o=super.toJSON(a);return o.object.zoom=this.zoom,o.object.left=this.left,o.object.right=this.right,o.object.top=this.top,o.object.bottom=this.bottom,o.object.near=this.near,o.object.far=this.far,null!==this.view&&(o.object.view=Object.assign({},this.view)),o}}Nw.prototype.isOrthographicCamera=!0;class Fw extends gf{constructor(a){super(a),this.type="RawShaderMaterial"}}Fw.prototype.isRawShaderMaterial=!0;const Qh=Math.pow(2,8),kne=[.125,.215,.35,.446,.526,.582],Vne=5+kne.length,ed={[Ml]:0,[zg]:1,3002:2,3004:3,3005:4,3006:5,3007:6},RB=new Nw,{_lodPlanes:kw,_sizeLods:Bne,_sigmas:XI}=IKe(),Une=new Zt;let PB=null;const Yg=(1+Math.sqrt(5))/2,Q0=1/Yg,Gne=[new oe(1,1,1),new oe(-1,1,1),new oe(1,1,-1),new oe(-1,1,-1),new oe(0,Yg,Q0),new oe(0,Yg,-Q0),new oe(Q0,0,Yg),new oe(-Q0,0,Yg),new oe(Yg,Q0,0),new oe(-Yg,Q0,0)];class DKe{constructor(a){this._renderer=a,this._pingPongRenderTarget=null,this._blurMaterial=function(l){const a=new Float32Array(20),o=new oe(0,1,0);return new Fw({name:"SphericalGaussianBlur",defines:{n:20},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:a},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:o},inputEncoding:{value:ed[Ml]},outputEncoding:{value:ed[Ml]}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute vec3 position;\n\t\tattribute vec2 uv;\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t\n\n\t\tuniform int inputEncoding;\n\t\tuniform int outputEncoding;\n\n\t\t#include <encodings_pars_fragment>\n\n\t\tvec4 inputTexelToLinear( vec4 value ) {\n\n\t\t\tif ( inputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( inputEncoding == 1 ) {\n\n\t\t\t\treturn sRGBToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 2 ) {\n\n\t\t\t\treturn RGBEToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 3 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 7.0 );\n\n\t\t\t} else if ( inputEncoding == 4 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 16.0 );\n\n\t\t\t} else if ( inputEncoding == 5 ) {\n\n\t\t\t\treturn RGBDToLinear( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn GammaToLinear( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 linearToOutputTexel( vec4 value ) {\n\n\t\t\tif ( outputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( outputEncoding == 1 ) {\n\n\t\t\t\treturn LinearTosRGB( value );\n\n\t\t\t} else if ( outputEncoding == 2 ) {\n\n\t\t\t\treturn LinearToRGBE( value );\n\n\t\t\t} else if ( outputEncoding == 3 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 7.0 );\n\n\t\t\t} else if ( outputEncoding == 4 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 16.0 );\n\n\t\t\t} else if ( outputEncoding == 5 ) {\n\n\t\t\t\treturn LinearToRGBD( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn LinearToGamma( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 envMapTexelToLinear( vec4 color ) {\n\n\t\t\treturn inputTexelToLinear( color );\n\n\t\t}\n\t\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t\tgl_FragColor = linearToOutputTexel( gl_FragColor );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}(),this._equirectShader=null,this._cubemapShader=null,this._compileMaterial(this._blurMaterial)}fromScene(a,o=0,c=.1,u=100){PB=this._renderer.getRenderTarget();const h=this._allocateTargets();return this._sceneToCubeUV(a,c,u,h),o>0&&this._blur(h,0,0,o),this._applyPMREM(h),this._cleanup(h),h}fromEquirectangular(a){return this._fromTexture(a)}fromCubemap(a){return this._fromTexture(a)}compileCubemapShader(){null===this._cubemapShader&&(this._cubemapShader=jne(),this._compileMaterial(this._cubemapShader))}compileEquirectangularShader(){null===this._equirectShader&&(this._equirectShader=Hne(),this._compileMaterial(this._equirectShader))}dispose(){this._blurMaterial.dispose(),null!==this._cubemapShader&&this._cubemapShader.dispose(),null!==this._equirectShader&&this._equirectShader.dispose();for(let a=0;a<kw.length;a++)kw[a].dispose()}_cleanup(a){this._pingPongRenderTarget.dispose(),this._renderer.setRenderTarget(PB),a.scissorTest=!1,$I(a,0,0,a.width,a.height)}_fromTexture(a){PB=this._renderer.getRenderTarget();const o=this._allocateTargets(a);return this._textureToCubeUV(a,o),this._applyPMREM(o),this._cleanup(o),o}_allocateTargets(a){const o={magFilter:oo,minFilter:oo,generateMipmaps:!1,type:D0,format:1023,encoding:AKe(a)?a.encoding:3002,depthBuffer:!1},c=zne(o);return c.depthBuffer=!a,this._pingPongRenderTarget=zne(o),c}_compileMaterial(a){const o=new Hs(kw[0],a);this._renderer.compile(o,RB)}_sceneToCubeUV(a,o,c,u){const f=new co(90,1,o,c),m=[1,-1,1,1,1,1],g=[1,1,1,-1,-1,-1],y=this._renderer,v=y.autoClear,_=y.outputEncoding,b=y.toneMapping;y.getClearColor(Une),y.toneMapping=0,y.outputEncoding=Ml,y.autoClear=!1;const w=new lc({name:"PMREM.Background",side:1,depthWrite:!1,depthTest:!1}),C=new Hs(new $g,w);let E=!1;const M=a.background;M?M.isColor&&(w.color.copy(M),a.background=null,E=!0):(w.color.copy(Une),E=!0);for(let x=0;x<6;x++){const R=x%3;0==R?(f.up.set(0,m[x],0),f.lookAt(g[x],0,0)):1==R?(f.up.set(0,0,m[x]),f.lookAt(0,g[x],0)):(f.up.set(0,m[x],0),f.lookAt(0,0,g[x])),$I(u,R*Qh,x>2?Qh:0,Qh,Qh),y.setRenderTarget(u),E&&y.render(C,f),y.render(a,f)}C.geometry.dispose(),C.material.dispose(),y.toneMapping=b,y.outputEncoding=_,y.autoClear=v,a.background=M}_textureToCubeUV(a,o){const c=this._renderer;a.isCubeTexture?null==this._cubemapShader&&(this._cubemapShader=jne()):null==this._equirectShader&&(this._equirectShader=Hne());const u=a.isCubeTexture?this._cubemapShader:this._equirectShader,h=new Hs(kw[0],u),d=u.uniforms;d.envMap.value=a,a.isCubeTexture||d.texelSize.value.set(1/a.image.width,1/a.image.height),d.inputEncoding.value=ed[a.encoding],d.outputEncoding.value=ed[o.texture.encoding],$I(o,0,0,3*Qh,2*Qh),c.setRenderTarget(o),c.render(h,RB)}_applyPMREM(a){const o=this._renderer,c=o.autoClear;o.autoClear=!1;for(let u=1;u<Vne;u++){const h=Math.sqrt(XI[u]*XI[u]-XI[u-1]*XI[u-1]);this._blur(a,u-1,u,h,Gne[(u-1)%Gne.length])}o.autoClear=c}_blur(a,o,c,u,h){const d=this._pingPongRenderTarget;this._halfBlur(a,d,o,c,u,"latitudinal",h),this._halfBlur(d,a,c,c,u,"longitudinal",h)}_halfBlur(a,o,c,u,h,d,f){const m=this._renderer,g=this._blurMaterial;"latitudinal"!==d&&"longitudinal"!==d&&console.error("blur direction must be either latitudinal or longitudinal!");const v=new Hs(kw[u],g),_=g.uniforms,b=Bne[c]-1,w=isFinite(h)?Math.PI/(2*b):2*Math.PI/39,C=h/w,E=isFinite(h)?1+Math.floor(3*C):20;E>20&&console.warn(`sigmaRadians, ${h}, is too large and will clip, as it requested ${E} samples when the maximum is set to 20`);const M=[];let x=0;for(let W=0;W<20;++W){const U=W/C,K=Math.exp(-U*U/2);M.push(K),0==W?x+=K:W<E&&(x+=2*K)}for(let W=0;W<M.length;W++)M[W]=M[W]/x;_.envMap.value=a.texture,_.samples.value=E,_.weights.value=M,_.latitudinal.value="latitudinal"===d,f&&(_.poleAxis.value=f),_.dTheta.value=w,_.mipInt.value=8-c,_.inputEncoding.value=ed[a.texture.encoding],_.outputEncoding.value=ed[a.texture.encoding];const R=Bne[u];$I(o,3*Math.max(0,Qh-2*R),(0===u?0:2*Qh)+2*R*(u>4?u-8+4:0),3*R,2*R),m.setRenderTarget(o),m.render(v,RB)}}function AKe(l){return void 0!==l&&l.type===D0&&(l.encoding===Ml||l.encoding===zg||3007===l.encoding)}function IKe(){const l=[],a=[],o=[];let c=8;for(let u=0;u<Vne;u++){const h=Math.pow(2,c);a.push(h);let d=1/h;u>4?d=kne[u-8+4-1]:0==u&&(d=0),o.push(d);const f=1/(h-1),m=-f/2,g=1+f/2,y=[m,m,g,m,g,g,m,m,g,g,m,g],v=6,_=6,b=3,w=2,C=1,E=new Float32Array(b*_*v),M=new Float32Array(w*_*v),x=new Float32Array(C*_*v);for(let P=0;P<v;P++){const k=P%3*2/3-1,W=P>2?0:-1;E.set([k,W,0,k+2/3,W,0,k+2/3,W+1,0,k,W,0,k+2/3,W+1,0,k,W+1,0],b*_*P),M.set(y,w*_*P),x.set([P,P,P,P,P,P],C*_*P)}const R=new Kn;R.setAttribute("position",new Ei(E,b)),R.setAttribute("uv",new Ei(M,w)),R.setAttribute("faceIndex",new Ei(x,C)),l.push(R),c>4&&c--}return{_lodPlanes:l,_sizeLods:a,_sigmas:o}}function zne(l){const a=new Kh(3*Qh,3*Qh,l);return a.texture.mapping=306,a.texture.name="PMREM.cubeUv",a.scissorTest=!0,a}function $I(l,a,o,c,u){l.viewport.set(a,o,c,u),l.scissor.set(a,o,c,u)}function Hne(){const l=new St(1,1);return new Fw({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null},texelSize:{value:l},inputEncoding:{value:ed[Ml]},outputEncoding:{value:ed[Ml]}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute vec3 position;\n\t\tattribute vec2 uv;\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform vec2 texelSize;\n\n\t\t\t\n\n\t\tuniform int inputEncoding;\n\t\tuniform int outputEncoding;\n\n\t\t#include <encodings_pars_fragment>\n\n\t\tvec4 inputTexelToLinear( vec4 value ) {\n\n\t\t\tif ( inputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( inputEncoding == 1 ) {\n\n\t\t\t\treturn sRGBToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 2 ) {\n\n\t\t\t\treturn RGBEToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 3 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 7.0 );\n\n\t\t\t} else if ( inputEncoding == 4 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 16.0 );\n\n\t\t\t} else if ( inputEncoding == 5 ) {\n\n\t\t\t\treturn RGBDToLinear( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn GammaToLinear( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 linearToOutputTexel( vec4 value ) {\n\n\t\t\tif ( outputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( outputEncoding == 1 ) {\n\n\t\t\t\treturn LinearTosRGB( value );\n\n\t\t\t} else if ( outputEncoding == 2 ) {\n\n\t\t\t\treturn LinearToRGBE( value );\n\n\t\t\t} else if ( outputEncoding == 3 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 7.0 );\n\n\t\t\t} else if ( outputEncoding == 4 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 16.0 );\n\n\t\t\t} else if ( outputEncoding == 5 ) {\n\n\t\t\t\treturn LinearToRGBD( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn LinearToGamma( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 envMapTexelToLinear( vec4 color ) {\n\n\t\t\treturn inputTexelToLinear( color );\n\n\t\t}\n\t\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tvec2 f = fract( uv / texelSize - 0.5 );\n\t\t\t\tuv -= f * texelSize;\n\t\t\t\tvec3 tl = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\t\t\t\tuv.x += texelSize.x;\n\t\t\t\tvec3 tr = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\t\t\t\tuv.y += texelSize.y;\n\t\t\t\tvec3 br = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\t\t\t\tuv.x -= texelSize.x;\n\t\t\t\tvec3 bl = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\n\t\t\t\tvec3 tm = mix( tl, tr, f.x );\n\t\t\t\tvec3 bm = mix( bl, br, f.x );\n\t\t\t\tgl_FragColor.rgb = mix( tm, bm, f.y );\n\n\t\t\t\tgl_FragColor = linearToOutputTexel( gl_FragColor );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}function jne(){return new Fw({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},inputEncoding:{value:ed[Ml]},outputEncoding:{value:ed[Ml]}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute vec3 position;\n\t\tattribute vec2 uv;\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\t\n\n\t\tuniform int inputEncoding;\n\t\tuniform int outputEncoding;\n\n\t\t#include <encodings_pars_fragment>\n\n\t\tvec4 inputTexelToLinear( vec4 value ) {\n\n\t\t\tif ( inputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( inputEncoding == 1 ) {\n\n\t\t\t\treturn sRGBToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 2 ) {\n\n\t\t\t\treturn RGBEToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 3 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 7.0 );\n\n\t\t\t} else if ( inputEncoding == 4 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 16.0 );\n\n\t\t\t} else if ( inputEncoding == 5 ) {\n\n\t\t\t\treturn RGBDToLinear( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn GammaToLinear( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 linearToOutputTexel( vec4 value ) {\n\n\t\t\tif ( outputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( outputEncoding == 1 ) {\n\n\t\t\t\treturn LinearTosRGB( value );\n\n\t\t\t} else if ( outputEncoding == 2 ) {\n\n\t\t\t\treturn LinearToRGBE( value );\n\n\t\t\t} else if ( outputEncoding == 3 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 7.0 );\n\n\t\t\t} else if ( outputEncoding == 4 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 16.0 );\n\n\t\t\t} else if ( outputEncoding == 5 ) {\n\n\t\t\t\treturn LinearToRGBD( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn LinearToGamma( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 envMapTexelToLinear( vec4 color ) {\n\n\t\t\treturn inputTexelToLinear( color );\n\n\t\t}\n\t\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb = envMapTexelToLinear( textureCube( envMap, vec3( - vOutputDirection.x, vOutputDirection.yz ) ) ).rgb;\n\t\t\t\tgl_FragColor = linearToOutputTexel( gl_FragColor );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}function PKe(l){let a=new WeakMap,o=null;function h(f){const m=f.target;m.removeEventListener("dispose",h);const g=a.get(m);void 0!==g&&(a.delete(m),g.dispose())}return{get:function(f){if(f&&f.isTexture&&!1===f.isRenderTargetTexture){const m=f.mapping,g=303===m||304===m,y=301===m||302===m;if(g||y){if(a.has(f))return a.get(f).texture;{const v=f.image;if(g&&v&&v.height>0||y&&v&&function(f){let m=0;for(let y=0;y<6;y++)void 0!==f[y]&&m++;return 6===m}(v)){const _=l.getRenderTarget();null===o&&(o=new DKe(l));const b=g?o.fromEquirectangular(f):o.fromCubemap(f);return a.set(f,b),l.setRenderTarget(_),f.addEventListener("dispose",h),b.texture}return null}}}return f},dispose:function(){a=new WeakMap,null!==o&&(o.dispose(),o=null)}}}function LKe(l){const a={};function o(c){if(void 0!==a[c])return a[c];let u;switch(c){case"WEBGL_depth_texture":u=l.getExtension("WEBGL_depth_texture")||l.getExtension("MOZ_WEBGL_depth_texture")||l.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":u=l.getExtension("EXT_texture_filter_anisotropic")||l.getExtension("MOZ_EXT_texture_filter_anisotropic")||l.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":u=l.getExtension("WEBGL_compressed_texture_s3tc")||l.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||l.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":u=l.getExtension("WEBGL_compressed_texture_pvrtc")||l.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:u=l.getExtension(c)}return a[c]=u,u}return{has:function(c){return null!==o(c)},init:function(c){c.isWebGL2?o("EXT_color_buffer_float"):(o("WEBGL_depth_texture"),o("OES_texture_float"),o("OES_texture_half_float"),o("OES_texture_half_float_linear"),o("OES_standard_derivatives"),o("OES_element_index_uint"),o("OES_vertex_array_object"),o("ANGLE_instanced_arrays")),o("OES_texture_float_linear"),o("EXT_color_buffer_half_float")},get:function(c){const u=o(c);return null===u&&console.warn("THREE.WebGLRenderer: "+c+" extension not supported."),u}}}function OKe(l,a,o,c){const u={},h=new WeakMap;function d(v){const _=v.target;null!==_.index&&a.remove(_.index);for(const w in _.attributes)a.remove(_.attributes[w]);_.removeEventListener("dispose",d),delete u[_.id];const b=h.get(_);b&&(a.remove(b),h.delete(_)),c.releaseStatesOfGeometry(_),!0===_.isInstancedBufferGeometry&&delete _._maxInstanceCount,o.memory.geometries--}function g(v){const _=[],b=v.index,w=v.attributes.position;let C=0;if(null!==b){const x=b.array;C=b.version;for(let R=0,P=x.length;R<P;R+=3){const k=x[R+0],W=x[R+1],U=x[R+2];_.push(k,W,W,U,U,k)}}else{C=w.version;for(let R=0,P=w.array.length/3-1;R<P;R+=3){const k=R+0,W=R+1,U=R+2;_.push(k,W,W,U,U,k)}}const E=new(One(_)>65535?SB:bB)(_,1);E.version=C;const M=h.get(v);M&&a.remove(M),h.set(v,E)}return{get:function(v,_){return!0===u[_.id]||(_.addEventListener("dispose",d),u[_.id]=!0,o.memory.geometries++),_},update:function(v){const _=v.attributes;for(const w in _)a.update(_[w],34962);const b=v.morphAttributes;for(const w in b){const C=b[w];for(let E=0,M=C.length;E<M;E++)a.update(C[E],34962)}},getWireframeAttribute:function(v){const _=h.get(v);if(_){const b=v.index;null!==b&&_.version<b.version&&g(v)}else g(v);return h.get(v)}}}function NKe(l,a,o,c){const u=c.isWebGL2;let h,f,m;this.setMode=function(_){h=_},this.setIndex=function(_){f=_.type,m=_.bytesPerElement},this.render=function(_,b){l.drawElements(h,b,f,_*m),o.update(b,h,1)},this.renderInstances=function(_,b,w){if(0===w)return;let C,E;if(u)C=l,E="drawElementsInstanced";else if(C=a.get("ANGLE_instanced_arrays"),E="drawElementsInstancedANGLE",null===C)return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");C[E](h,b,f,_*m,w),o.update(b,h,w)}}function FKe(l){const o={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:o,programs:null,autoReset:!0,reset:function(){o.frame++,o.calls=0,o.triangles=0,o.points=0,o.lines=0},update:function(h,d,f){switch(o.calls++,d){case 4:o.triangles+=f*(h/3);break;case 1:o.lines+=f*(h/2);break;case 3:o.lines+=f*(h-1);break;case 2:o.lines+=f*h;break;case 0:o.points+=f*h;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",d)}}}}function kKe(l,a){return l[0]-a[0]}function VKe(l,a){return Math.abs(a[1])-Math.abs(l[1])}function BKe(l){const a={},o=new Float32Array(8),c=[];for(let h=0;h<8;h++)c[h]=[h,0];return{update:function(h,d,f,m){const g=h.morphTargetInfluences,y=void 0===g?0:g.length;let v=a[d.id];if(void 0===v||v.length!==y){v=[];for(let E=0;E<y;E++)v[E]=[E,0];a[d.id]=v}for(let E=0;E<y;E++){const M=v[E];M[0]=E,M[1]=g[E]}v.sort(VKe);for(let E=0;E<8;E++)E<y&&v[E][1]?(c[E][0]=v[E][0],c[E][1]=v[E][1]):(c[E][0]=Number.MAX_SAFE_INTEGER,c[E][1]=0);c.sort(kKe);const _=d.morphAttributes.position,b=d.morphAttributes.normal;let w=0;for(let E=0;E<8;E++){const M=c[E],x=M[0],R=M[1];x!==Number.MAX_SAFE_INTEGER&&R?(_&&d.getAttribute("morphTarget"+E)!==_[x]&&d.setAttribute("morphTarget"+E,_[x]),b&&d.getAttribute("morphNormal"+E)!==b[x]&&d.setAttribute("morphNormal"+E,b[x]),o[E]=R,w+=R):(_&&!0===d.hasAttribute("morphTarget"+E)&&d.deleteAttribute("morphTarget"+E),b&&!0===d.hasAttribute("morphNormal"+E)&&d.deleteAttribute("morphNormal"+E),o[E]=0)}const C=d.morphTargetsRelative?1:1-w;m.getUniforms().setValue(l,"morphTargetBaseInfluence",C),m.getUniforms().setValue(l,"morphTargetInfluences",o)}}}function UKe(l,a,o,c){let u=new WeakMap;function f(m){const g=m.target;g.removeEventListener("dispose",f),o.remove(g.instanceMatrix),null!==g.instanceColor&&o.remove(g.instanceColor)}return{update:function(m){const g=c.render.frame,v=a.get(m,m.geometry);return u.get(v)!==g&&(a.update(v),u.set(v,g)),m.isInstancedMesh&&(!1===m.hasEventListener("dispose",f)&&m.addEventListener("dispose",f),o.update(m.instanceMatrix,34962),null!==m.instanceColor&&o.update(m.instanceColor,34962)),v},dispose:function(){u=new WeakMap}}}class Wne extends Co{constructor(a=null,o=1,c=1,u=1){super(null),this.image={data:a,width:o,height:c,depth:u},this.magFilter=oo,this.minFilter=oo,this.wrapR=sa,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.needsUpdate=!0}}Wne.prototype.isDataTexture2DArray=!0;class qne extends Co{constructor(a=null,o=1,c=1,u=1){super(null),this.image={data:a,width:o,height:c,depth:u},this.magFilter=oo,this.minFilter=oo,this.wrapR=sa,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.needsUpdate=!0}}qne.prototype.isDataTexture3D=!0;const Xne=new Co,GKe=new Wne,zKe=new qne,$ne=new Lw,Yne=[],Zne=[],Kne=new Float32Array(16),Jne=new Float32Array(9),Qne=new Float32Array(4);function eb(l,a,o){const c=l[0];if(c<=0||c>0)return l;const u=a*o;let h=Yne[u];if(void 0===h&&(h=new Float32Array(u),Yne[u]=h),0!==a){c.toArray(h,0);for(let d=1,f=0;d!==a;++d)f+=o,l[d].toArray(h,f)}return h}function el(l,a){if(l.length!==a.length)return!1;for(let o=0,c=l.length;o<c;o++)if(l[o]!==a[o])return!1;return!0}function Ea(l,a){for(let o=0,c=a.length;o<c;o++)l[o]=a[o]}function ere(l,a){let o=Zne[a];void 0===o&&(o=new Int32Array(a),Zne[a]=o);for(let c=0;c!==a;++c)o[c]=l.allocateTextureUnit();return o}function HKe(l,a){const o=this.cache;o[0]!==a&&(l.uniform1f(this.addr,a),o[0]=a)}function jKe(l,a){const o=this.cache;if(void 0!==a.x)(o[0]!==a.x||o[1]!==a.y)&&(l.uniform2f(this.addr,a.x,a.y),o[0]=a.x,o[1]=a.y);else{if(el(o,a))return;l.uniform2fv(this.addr,a),Ea(o,a)}}function WKe(l,a){const o=this.cache;if(void 0!==a.x)(o[0]!==a.x||o[1]!==a.y||o[2]!==a.z)&&(l.uniform3f(this.addr,a.x,a.y,a.z),o[0]=a.x,o[1]=a.y,o[2]=a.z);else if(void 0!==a.r)(o[0]!==a.r||o[1]!==a.g||o[2]!==a.b)&&(l.uniform3f(this.addr,a.r,a.g,a.b),o[0]=a.r,o[1]=a.g,o[2]=a.b);else{if(el(o,a))return;l.uniform3fv(this.addr,a),Ea(o,a)}}function qKe(l,a){const o=this.cache;if(void 0!==a.x)(o[0]!==a.x||o[1]!==a.y||o[2]!==a.z||o[3]!==a.w)&&(l.uniform4f(this.addr,a.x,a.y,a.z,a.w),o[0]=a.x,o[1]=a.y,o[2]=a.z,o[3]=a.w);else{if(el(o,a))return;l.uniform4fv(this.addr,a),Ea(o,a)}}function XKe(l,a){const o=this.cache,c=a.elements;if(void 0===c){if(el(o,a))return;l.uniformMatrix2fv(this.addr,!1,a),Ea(o,a)}else{if(el(o,c))return;Qne.set(c),l.uniformMatrix2fv(this.addr,!1,Qne),Ea(o,c)}}function $Ke(l,a){const o=this.cache,c=a.elements;if(void 0===c){if(el(o,a))return;l.uniformMatrix3fv(this.addr,!1,a),Ea(o,a)}else{if(el(o,c))return;Jne.set(c),l.uniformMatrix3fv(this.addr,!1,Jne),Ea(o,c)}}function YKe(l,a){const o=this.cache,c=a.elements;if(void 0===c){if(el(o,a))return;l.uniformMatrix4fv(this.addr,!1,a),Ea(o,a)}else{if(el(o,c))return;Kne.set(c),l.uniformMatrix4fv(this.addr,!1,Kne),Ea(o,c)}}function ZKe(l,a){const o=this.cache;o[0]!==a&&(l.uniform1i(this.addr,a),o[0]=a)}function KKe(l,a){const o=this.cache;el(o,a)||(l.uniform2iv(this.addr,a),Ea(o,a))}function JKe(l,a){const o=this.cache;el(o,a)||(l.uniform3iv(this.addr,a),Ea(o,a))}function QKe(l,a){const o=this.cache;el(o,a)||(l.uniform4iv(this.addr,a),Ea(o,a))}function eJe(l,a){const o=this.cache;o[0]!==a&&(l.uniform1ui(this.addr,a),o[0]=a)}function tJe(l,a){const o=this.cache;el(o,a)||(l.uniform2uiv(this.addr,a),Ea(o,a))}function nJe(l,a){const o=this.cache;el(o,a)||(l.uniform3uiv(this.addr,a),Ea(o,a))}function rJe(l,a){const o=this.cache;el(o,a)||(l.uniform4uiv(this.addr,a),Ea(o,a))}function iJe(l,a,o){const c=this.cache,u=o.allocateTextureUnit();c[0]!==u&&(l.uniform1i(this.addr,u),c[0]=u),o.safeSetTexture2D(a||Xne,u)}function sJe(l,a,o){const c=this.cache,u=o.allocateTextureUnit();c[0]!==u&&(l.uniform1i(this.addr,u),c[0]=u),o.setTexture3D(a||zKe,u)}function oJe(l,a,o){const c=this.cache,u=o.allocateTextureUnit();c[0]!==u&&(l.uniform1i(this.addr,u),c[0]=u),o.safeSetTextureCube(a||$ne,u)}function aJe(l,a,o){const c=this.cache,u=o.allocateTextureUnit();c[0]!==u&&(l.uniform1i(this.addr,u),c[0]=u),o.setTexture2DArray(a||GKe,u)}function cJe(l,a){l.uniform1fv(this.addr,a)}function uJe(l,a){const o=eb(a,this.size,2);l.uniform2fv(this.addr,o)}function hJe(l,a){const o=eb(a,this.size,3);l.uniform3fv(this.addr,o)}function dJe(l,a){const o=eb(a,this.size,4);l.uniform4fv(this.addr,o)}function fJe(l,a){const o=eb(a,this.size,4);l.uniformMatrix2fv(this.addr,!1,o)}function pJe(l,a){const o=eb(a,this.size,9);l.uniformMatrix3fv(this.addr,!1,o)}function mJe(l,a){const o=eb(a,this.size,16);l.uniformMatrix4fv(this.addr,!1,o)}function gJe(l,a){l.uniform1iv(this.addr,a)}function yJe(l,a){l.uniform2iv(this.addr,a)}function vJe(l,a){l.uniform3iv(this.addr,a)}function _Je(l,a){l.uniform4iv(this.addr,a)}function bJe(l,a){l.uniform1uiv(this.addr,a)}function SJe(l,a){l.uniform2uiv(this.addr,a)}function TJe(l,a){l.uniform3uiv(this.addr,a)}function wJe(l,a){l.uniform4uiv(this.addr,a)}function CJe(l,a,o){const c=a.length,u=ere(o,c);l.uniform1iv(this.addr,u);for(let h=0;h!==c;++h)o.safeSetTexture2D(a[h]||Xne,u[h])}function xJe(l,a,o){const c=a.length,u=ere(o,c);l.uniform1iv(this.addr,u);for(let h=0;h!==c;++h)o.safeSetTextureCube(a[h]||$ne,u[h])}function MJe(l,a,o){this.id=l,this.addr=o,this.cache=[],this.setValue=function(l){switch(l){case 5126:return HKe;case 35664:return jKe;case 35665:return WKe;case 35666:return qKe;case 35674:return XKe;case 35675:return $Ke;case 35676:return YKe;case 5124:case 35670:return ZKe;case 35667:case 35671:return KKe;case 35668:case 35672:return JKe;case 35669:case 35673:return QKe;case 5125:return eJe;case 36294:return tJe;case 36295:return nJe;case 36296:return rJe;case 35678:case 36198:case 36298:case 36306:case 35682:return iJe;case 35679:case 36299:case 36307:return sJe;case 35680:case 36300:case 36308:case 36293:return oJe;case 36289:case 36303:case 36311:case 36292:return aJe}}(a.type)}function tre(l,a,o){this.id=l,this.addr=o,this.cache=[],this.size=a.size,this.setValue=function(l){switch(l){case 5126:return cJe;case 35664:return uJe;case 35665:return hJe;case 35666:return dJe;case 35674:return fJe;case 35675:return pJe;case 35676:return mJe;case 5124:case 35670:return gJe;case 35667:case 35671:return yJe;case 35668:case 35672:return vJe;case 35669:case 35673:return _Je;case 5125:return bJe;case 36294:return SJe;case 36295:return TJe;case 36296:return wJe;case 35678:case 36198:case 36298:case 36306:case 35682:return CJe;case 35680:case 36300:case 36308:case 36293:return xJe}}(a.type)}function nre(l){this.id=l,this.seq=[],this.map={}}tre.prototype.updateCache=function(l){const a=this.cache;l instanceof Float32Array&&a.length!==l.length&&(this.cache=new Float32Array(l.length)),Ea(a,l)},nre.prototype.setValue=function(l,a,o){const c=this.seq;for(let u=0,h=c.length;u!==h;++u){const d=c[u];d.setValue(l,a[d.id],o)}};const NB=/(\w+)(\])?(\[|\.)?/g;function rre(l,a){l.seq.push(a),l.map[a.id]=a}function DJe(l,a,o){const c=l.name,u=c.length;for(NB.lastIndex=0;;){const h=NB.exec(c),d=NB.lastIndex;let f=h[1];const g=h[3];if("]"===h[2]&&(f|=0),void 0===g||"["===g&&d+2===u){rre(o,void 0===g?new MJe(f,l,a):new tre(f,l,a));break}{let v=o.map[f];void 0===v&&(v=new nre(f),rre(o,v)),o=v}}}function $p(l,a){this.seq=[],this.map={};const o=l.getProgramParameter(a,35718);for(let c=0;c<o;++c){const u=l.getActiveUniform(a,c);DJe(u,l.getUniformLocation(a,u.name),this)}}function ire(l,a,o){const c=l.createShader(a);return l.shaderSource(c,o),l.compileShader(c),c}$p.prototype.setValue=function(l,a,o,c){const u=this.map[a];void 0!==u&&u.setValue(l,o,c)},$p.prototype.setOptional=function(l,a,o){const c=a[o];void 0!==c&&this.setValue(l,o,c)},$p.upload=function(l,a,o,c){for(let u=0,h=a.length;u!==h;++u){const d=a[u],f=o[d.id];!1!==f.needsUpdate&&d.setValue(l,f.value,c)}},$p.seqWithValue=function(l,a){const o=[];for(let c=0,u=l.length;c!==u;++c){const h=l[c];h.id in a&&o.push(h)}return o};let AJe=0;function sre(l){switch(l){case Ml:return["Linear","( value )"];case zg:return["sRGB","( value )"];case 3002:return["RGBE","( value )"];case 3004:return["RGBM","( value, 7.0 )"];case 3005:return["RGBM","( value, 16.0 )"];case 3006:return["RGBD","( value, 256.0 )"];case 3007:return["Gamma","( value, float( GAMMA_FACTOR ) )"];case 3003:return["LogLuv","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",l),["Linear","( value )"]}}function ore(l,a,o){const c=l.getShaderParameter(a,35713),u=l.getShaderInfoLog(a).trim();return c&&""===u?"":o.toUpperCase()+"\n\n"+u+"\n\n"+function(l){const a=l.split("\n");for(let o=0;o<a.length;o++)a[o]=o+1+": "+a[o];return a.join("\n")}(l.getShaderSource(a))}function tb(l,a){const o=sre(a);return"vec4 "+l+"( vec4 value ) { return "+o[0]+"ToLinear"+o[1]+"; }"}function RJe(l,a){const o=sre(a);return"vec4 "+l+"( vec4 value ) { return LinearTo"+o[0]+o[1]+"; }"}function PJe(l,a){let o;switch(a){case 1:o="Linear";break;case 2:o="Reinhard";break;case 3:o="OptimizedCineon";break;case 4:o="ACESFilmic";break;case 5:o="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",a),o="Linear"}return"vec3 "+l+"( vec3 color ) { return "+o+"ToneMapping( color ); }"}function Vw(l){return""!==l}function are(l,a){return l.replace(/NUM_DIR_LIGHTS/g,a.numDirLights).replace(/NUM_SPOT_LIGHTS/g,a.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,a.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,a.numPointLights).replace(/NUM_HEMI_LIGHTS/g,a.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,a.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS/g,a.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,a.numPointLightShadows)}function lre(l,a){return l.replace(/NUM_CLIPPING_PLANES/g,a.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,a.numClippingPlanes-a.numClipIntersection)}const FJe=/^[ \t]*#include +<([\w\d./]+)>/gm;function FB(l){return l.replace(FJe,kJe)}function kJe(l,a){const o=Xr[a];if(void 0===o)throw new Error("Can not resolve #include <"+a+">");return FB(o)}const VJe=/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,BJe=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function cre(l){return l.replace(BJe,ure).replace(VJe,UJe)}function UJe(l,a,o,c){return console.warn("WebGLProgram: #pragma unroll_loop shader syntax is deprecated. Please use #pragma unroll_loop_start syntax instead."),ure(0,a,o,c)}function ure(l,a,o,c){let u="";for(let h=parseInt(a);h<parseInt(o);h++)u+=c.replace(/\[\s*i\s*\]/g,"[ "+h+" ]").replace(/UNROLLED_LOOP_INDEX/g,h);return u}function hre(l){let a="precision "+l.precision+" float;\nprecision "+l.precision+" int;";return"highp"===l.precision?a+="\n#define HIGH_PRECISION":"mediump"===l.precision?a+="\n#define MEDIUM_PRECISION":"lowp"===l.precision&&(a+="\n#define LOW_PRECISION"),a}function WJe(l,a,o,c){const u=l.getContext(),h=o.defines;let d=o.vertexShader,f=o.fragmentShader;const m=function(l){let a="SHADOWMAP_TYPE_BASIC";return 1===l.shadowMapType?a="SHADOWMAP_TYPE_PCF":2===l.shadowMapType?a="SHADOWMAP_TYPE_PCF_SOFT":3===l.shadowMapType&&(a="SHADOWMAP_TYPE_VSM"),a}(o),g=function(l){let a="ENVMAP_TYPE_CUBE";if(l.envMap)switch(l.envMapMode){case 301:case 302:a="ENVMAP_TYPE_CUBE";break;case 306:case 307:a="ENVMAP_TYPE_CUBE_UV"}return a}(o),y=function(l){let a="ENVMAP_MODE_REFLECTION";if(l.envMap)switch(l.envMapMode){case 302:case 307:a="ENVMAP_MODE_REFRACTION"}return a}(o),v=function(l){let a="ENVMAP_BLENDING_NONE";if(l.envMap)switch(l.combine){case 0:a="ENVMAP_BLENDING_MULTIPLY";break;case 1:a="ENVMAP_BLENDING_MIX";break;case 2:a="ENVMAP_BLENDING_ADD"}return a}(o),_=l.gammaFactor>0?l.gammaFactor:1,b=o.isWebGL2?"":function(l){return[l.extensionDerivatives||l.envMapCubeUV||l.bumpMap||l.tangentSpaceNormalMap||l.clearcoatNormalMap||l.flatShading||"physical"===l.shaderID?"#extension GL_OES_standard_derivatives : enable":"",(l.extensionFragDepth||l.logarithmicDepthBuffer)&&l.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",l.extensionDrawBuffers&&l.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(l.extensionShaderTextureLOD||l.envMap||l.transmission)&&l.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(Vw).join("\n")}(o),w=function(l){const a=[];for(const o in l){const c=l[o];!1!==c&&a.push("#define "+o+" "+c)}return a.join("\n")}(h),C=u.createProgram();let E,M,x=o.glslVersion?"#version "+o.glslVersion+"\n":"";o.isRawShaderMaterial?(E=[w].filter(Vw).join("\n"),E.length>0&&(E+="\n"),M=[b,w].filter(Vw).join("\n"),M.length>0&&(M+="\n")):(E=[hre(o),"#define SHADER_NAME "+o.shaderName,w,o.instancing?"#define USE_INSTANCING":"",o.instancingColor?"#define USE_INSTANCING_COLOR":"",o.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+_,"#define MAX_BONES "+o.maxBones,o.useFog&&o.fog?"#define USE_FOG":"",o.useFog&&o.fogExp2?"#define FOG_EXP2":"",o.map?"#define USE_MAP":"",o.envMap?"#define USE_ENVMAP":"",o.envMap?"#define "+y:"",o.lightMap?"#define USE_LIGHTMAP":"",o.aoMap?"#define USE_AOMAP":"",o.emissiveMap?"#define USE_EMISSIVEMAP":"",o.bumpMap?"#define USE_BUMPMAP":"",o.normalMap?"#define USE_NORMALMAP":"",o.normalMap&&o.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",o.normalMap&&o.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",o.clearcoatMap?"#define USE_CLEARCOATMAP":"",o.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",o.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",o.displacementMap&&o.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",o.specularMap?"#define USE_SPECULARMAP":"",o.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",o.specularTintMap?"#define USE_SPECULARTINTMAP":"",o.roughnessMap?"#define USE_ROUGHNESSMAP":"",o.metalnessMap?"#define USE_METALNESSMAP":"",o.alphaMap?"#define USE_ALPHAMAP":"",o.transmission?"#define USE_TRANSMISSION":"",o.transmissionMap?"#define USE_TRANSMISSIONMAP":"",o.thicknessMap?"#define USE_THICKNESSMAP":"",o.vertexTangents?"#define USE_TANGENT":"",o.vertexColors?"#define USE_COLOR":"",o.vertexAlphas?"#define USE_COLOR_ALPHA":"",o.vertexUvs?"#define USE_UV":"",o.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",o.flatShading?"#define FLAT_SHADED":"",o.skinning?"#define USE_SKINNING":"",o.useVertexTexture?"#define BONE_TEXTURE":"",o.morphTargets?"#define USE_MORPHTARGETS":"",o.morphNormals&&!1===o.flatShading?"#define USE_MORPHNORMALS":"",o.doubleSided?"#define DOUBLE_SIDED":"",o.flipSided?"#define FLIP_SIDED":"",o.shadowMapEnabled?"#define USE_SHADOWMAP":"",o.shadowMapEnabled?"#define "+m:"",o.sizeAttenuation?"#define USE_SIZEATTENUATION":"",o.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",o.logarithmicDepthBuffer&&o.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","\tattribute vec4 color;","#elif defined( USE_COLOR )","\tattribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(Vw).join("\n"),M=[b,hre(o),"#define SHADER_NAME "+o.shaderName,w,"#define GAMMA_FACTOR "+_,o.useFog&&o.fog?"#define USE_FOG":"",o.useFog&&o.fogExp2?"#define FOG_EXP2":"",o.map?"#define USE_MAP":"",o.matcap?"#define USE_MATCAP":"",o.envMap?"#define USE_ENVMAP":"",o.envMap?"#define "+g:"",o.envMap?"#define "+y:"",o.envMap?"#define "+v:"",o.lightMap?"#define USE_LIGHTMAP":"",o.aoMap?"#define USE_AOMAP":"",o.emissiveMap?"#define USE_EMISSIVEMAP":"",o.bumpMap?"#define USE_BUMPMAP":"",o.normalMap?"#define USE_NORMALMAP":"",o.normalMap&&o.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",o.normalMap&&o.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",o.clearcoat?"#define USE_CLEARCOAT":"",o.clearcoatMap?"#define USE_CLEARCOATMAP":"",o.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",o.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",o.specularMap?"#define USE_SPECULARMAP":"",o.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",o.specularTintMap?"#define USE_SPECULARTINTMAP":"",o.roughnessMap?"#define USE_ROUGHNESSMAP":"",o.metalnessMap?"#define USE_METALNESSMAP":"",o.alphaMap?"#define USE_ALPHAMAP":"",o.alphaTest?"#define USE_ALPHATEST":"",o.sheenTint?"#define USE_SHEEN":"",o.transmission?"#define USE_TRANSMISSION":"",o.transmissionMap?"#define USE_TRANSMISSIONMAP":"",o.thicknessMap?"#define USE_THICKNESSMAP":"",o.vertexTangents?"#define USE_TANGENT":"",o.vertexColors||o.instancingColor?"#define USE_COLOR":"",o.vertexAlphas?"#define USE_COLOR_ALPHA":"",o.vertexUvs?"#define USE_UV":"",o.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",o.gradientMap?"#define USE_GRADIENTMAP":"",o.flatShading?"#define FLAT_SHADED":"",o.doubleSided?"#define DOUBLE_SIDED":"",o.flipSided?"#define FLIP_SIDED":"",o.shadowMapEnabled?"#define USE_SHADOWMAP":"",o.shadowMapEnabled?"#define "+m:"",o.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",o.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",o.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",o.logarithmicDepthBuffer&&o.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"",(o.extensionShaderTextureLOD||o.envMap)&&o.rendererExtensionShaderTextureLod?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",0!==o.toneMapping?"#define TONE_MAPPING":"",0!==o.toneMapping?Xr.tonemapping_pars_fragment:"",0!==o.toneMapping?PJe("toneMapping",o.toneMapping):"",o.dithering?"#define DITHERING":"",o.format===Zh?"#define OPAQUE":"",Xr.encodings_pars_fragment,o.map?tb("mapTexelToLinear",o.mapEncoding):"",o.matcap?tb("matcapTexelToLinear",o.matcapEncoding):"",o.envMap?tb("envMapTexelToLinear",o.envMapEncoding):"",o.emissiveMap?tb("emissiveMapTexelToLinear",o.emissiveMapEncoding):"",o.specularTintMap?tb("specularTintMapTexelToLinear",o.specularTintMapEncoding):"",o.lightMap?tb("lightMapTexelToLinear",o.lightMapEncoding):"",RJe("linearToOutputTexel",o.outputEncoding),o.depthPacking?"#define DEPTH_PACKING "+o.depthPacking:"","\n"].filter(Vw).join("\n")),d=FB(d),d=are(d,o),d=lre(d,o),f=FB(f),f=are(f,o),f=lre(f,o),d=cre(d),f=cre(f),o.isWebGL2&&!0!==o.isRawShaderMaterial&&(x="#version 300 es\n",E=["#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+E,M=["#define varying in","300 es"===o.glslVersion?"":"out highp vec4 pc_fragColor;","300 es"===o.glslVersion?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+M);const P=x+M+f,k=ire(u,35633,x+E+d),W=ire(u,35632,P);if(u.attachShader(C,k),u.attachShader(C,W),void 0!==o.index0AttributeName?u.bindAttribLocation(C,0,o.index0AttributeName):!0===o.morphTargets&&u.bindAttribLocation(C,0,"position"),u.linkProgram(C),l.debug.checkShaderErrors){const Q=u.getProgramInfoLog(C).trim(),se=u.getShaderInfoLog(k).trim(),te=u.getShaderInfoLog(W).trim();let De=!0,de=!0;if(!1===u.getProgramParameter(C,35714)){De=!1;const ye=ore(u,k,"vertex"),_e=ore(u,W,"fragment");console.error("THREE.WebGLProgram: Shader Error "+u.getError()+" - VALIDATE_STATUS "+u.getProgramParameter(C,35715)+"\n\nProgram Info Log: "+Q+"\n"+ye+"\n"+_e)}else""!==Q?console.warn("THREE.WebGLProgram: Program Info Log:",Q):(""===se||""===te)&&(de=!1);de&&(this.diagnostics={runnable:De,programLog:Q,vertexShader:{log:se,prefix:E},fragmentShader:{log:te,prefix:M}})}let U,K;return u.deleteShader(k),u.deleteShader(W),this.getUniforms=function(){return void 0===U&&(U=new $p(u,C)),U},this.getAttributes=function(){return void 0===K&&(K=function(l,a){const o={},c=l.getProgramParameter(a,35721);for(let u=0;u<c;u++){const h=l.getActiveAttrib(a,u),d=h.name;let f=1;35674===h.type&&(f=2),35675===h.type&&(f=3),35676===h.type&&(f=4),o[d]={type:h.type,location:l.getAttribLocation(a,d),locationSize:f}}return o}(u,C)),K},this.destroy=function(){c.releaseStatesOfProgram(this),u.deleteProgram(C),this.program=void 0},this.name=o.shaderName,this.id=AJe++,this.cacheKey=a,this.usedTimes=1,this.program=C,this.vertexShader=k,this.fragmentShader=W,this}function qJe(l,a,o,c,u,h,d){const f=[],m=u.isWebGL2,g=u.logarithmicDepthBuffer,y=u.floatVertexTextures,v=u.maxVertexUniforms,_=u.vertexTextures;let b=u.precision;const w={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"},C=["precision","isWebGL2","supportsVertexTextures","outputEncoding","instancing","instancingColor","map","mapEncoding","matcap","matcapEncoding","envMap","envMapMode","envMapEncoding","envMapCubeUV","lightMap","lightMapEncoding","aoMap","emissiveMap","emissiveMapEncoding","bumpMap","normalMap","objectSpaceNormalMap","tangentSpaceNormalMap","clearcoat","clearcoatMap","clearcoatRoughnessMap","clearcoatNormalMap","displacementMap","specularMap","specularIntensityMap","specularTintMap","specularTintMapEncoding","roughnessMap","metalnessMap","gradientMap","alphaMap","alphaTest","combine","vertexColors","vertexAlphas","vertexTangents","vertexUvs","uvsVertexOnly","fog","useFog","fogExp2","flatShading","sizeAttenuation","logarithmicDepthBuffer","skinning","maxBones","useVertexTexture","morphTargets","morphNormals","premultipliedAlpha","numDirLights","numPointLights","numSpotLights","numHemiLights","numRectAreaLights","numDirLightShadows","numPointLightShadows","numSpotLightShadows","shadowMapEnabled","shadowMapType","toneMapping","physicallyCorrectLights","doubleSided","flipSided","numClippingPlanes","numClipIntersection","depthPacking","dithering","format","sheenTint","transmission","transmissionMap","thicknessMap"];function M(U){let K;return U&&U.isTexture?K=U.encoding:U&&U.isWebGLRenderTarget?(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),K=U.texture.encoding):K=Ml,K}return{getParameters:function(U,K,Q,se,te){const De=se.fog,ye=(U.isMeshStandardMaterial?o:a).get(U.envMap||(U.isMeshStandardMaterial?se.environment:null)),_e=w[U.type],ue=te.isSkinnedMesh?function(U){const Q=U.skeleton.bones;if(y)return 1024;{const te=Math.floor((v-20)/4),De=Math.min(te,Q.length);return De<Q.length?(console.warn("THREE.WebGLRenderer: Skeleton has "+Q.length+" bones. This GPU supports "+De+"."),0):De}}(te):0;let ce,Re;if(null!==U.precision&&(b=u.getMaxPrecision(U.precision),b!==U.precision&&console.warn("THREE.WebGLProgram.getParameters:",U.precision,"not supported, using",b,"instead.")),_e){const He=Jh[_e];ce=He.vertexShader,Re=He.fragmentShader}else ce=U.vertexShader,Re=U.fragmentShader;const Oe=l.getRenderTarget(),Ae=U.alphaTest>0,We=U.clearcoat>0;return{isWebGL2:m,shaderID:_e,shaderName:U.type,vertexShader:ce,fragmentShader:Re,defines:U.defines,isRawShaderMaterial:!0===U.isRawShaderMaterial,glslVersion:U.glslVersion,precision:b,instancing:!0===te.isInstancedMesh,instancingColor:!0===te.isInstancedMesh&&null!==te.instanceColor,supportsVertexTextures:_,outputEncoding:null!==Oe?M(Oe.texture):l.outputEncoding,map:!!U.map,mapEncoding:M(U.map),matcap:!!U.matcap,matcapEncoding:M(U.matcap),envMap:!!ye,envMapMode:ye&&ye.mapping,envMapEncoding:M(ye),envMapCubeUV:!!ye&&(306===ye.mapping||307===ye.mapping),lightMap:!!U.lightMap,lightMapEncoding:M(U.lightMap),aoMap:!!U.aoMap,emissiveMap:!!U.emissiveMap,emissiveMapEncoding:M(U.emissiveMap),bumpMap:!!U.bumpMap,normalMap:!!U.normalMap,objectSpaceNormalMap:1===U.normalMapType,tangentSpaceNormalMap:0===U.normalMapType,clearcoat:We,clearcoatMap:We&&!!U.clearcoatMap,clearcoatRoughnessMap:We&&!!U.clearcoatRoughnessMap,clearcoatNormalMap:We&&!!U.clearcoatNormalMap,displacementMap:!!U.displacementMap,roughnessMap:!!U.roughnessMap,metalnessMap:!!U.metalnessMap,specularMap:!!U.specularMap,specularIntensityMap:!!U.specularIntensityMap,specularTintMap:!!U.specularTintMap,specularTintMapEncoding:M(U.specularTintMap),alphaMap:!!U.alphaMap,alphaTest:Ae,gradientMap:!!U.gradientMap,sheenTint:!!U.sheenTint&&(U.sheenTint.r>0||U.sheenTint.g>0||U.sheenTint.b>0),transmission:U.transmission>0,transmissionMap:!!U.transmissionMap,thicknessMap:!!U.thicknessMap,combine:U.combine,vertexTangents:!!U.normalMap&&!!te.geometry&&!!te.geometry.attributes.tangent,vertexColors:U.vertexColors,vertexAlphas:!0===U.vertexColors&&!!te.geometry&&!!te.geometry.attributes.color&&4===te.geometry.attributes.color.itemSize,vertexUvs:!!(U.map||U.bumpMap||U.normalMap||U.specularMap||U.alphaMap||U.emissiveMap||U.roughnessMap||U.metalnessMap||U.clearcoatMap||U.clearcoatRoughnessMap||U.clearcoatNormalMap||U.displacementMap||U.transmissionMap||U.thicknessMap||U.specularIntensityMap||U.specularTintMap),uvsVertexOnly:!(U.map||U.bumpMap||U.normalMap||U.specularMap||U.alphaMap||U.emissiveMap||U.roughnessMap||U.metalnessMap||U.clearcoatNormalMap||U.transmission>0||U.transmissionMap||U.thicknessMap||U.specularIntensityMap||U.specularTintMap||!U.displacementMap),fog:!!De,useFog:U.fog,fogExp2:De&&De.isFogExp2,flatShading:!!U.flatShading,sizeAttenuation:U.sizeAttenuation,logarithmicDepthBuffer:g,skinning:!0===te.isSkinnedMesh&&ue>0,maxBones:ue,useVertexTexture:y,morphTargets:!!te.geometry&&!!te.geometry.morphAttributes.position,morphNormals:!!te.geometry&&!!te.geometry.morphAttributes.normal,numDirLights:K.directional.length,numPointLights:K.point.length,numSpotLights:K.spot.length,numRectAreaLights:K.rectArea.length,numHemiLights:K.hemi.length,numDirLightShadows:K.directionalShadowMap.length,numPointLightShadows:K.pointShadowMap.length,numSpotLightShadows:K.spotShadowMap.length,numClippingPlanes:d.numPlanes,numClipIntersection:d.numIntersection,format:U.format,dithering:U.dithering,shadowMapEnabled:l.shadowMap.enabled&&Q.length>0,shadowMapType:l.shadowMap.type,toneMapping:U.toneMapped?l.toneMapping:0,physicallyCorrectLights:l.physicallyCorrectLights,premultipliedAlpha:U.premultipliedAlpha,doubleSided:2===U.side,flipSided:1===U.side,depthPacking:void 0!==U.depthPacking&&U.depthPacking,index0AttributeName:U.index0AttributeName,extensionDerivatives:U.extensions&&U.extensions.derivatives,extensionFragDepth:U.extensions&&U.extensions.fragDepth,extensionDrawBuffers:U.extensions&&U.extensions.drawBuffers,extensionShaderTextureLOD:U.extensions&&U.extensions.shaderTextureLOD,rendererExtensionFragDepth:m||c.has("EXT_frag_depth"),rendererExtensionDrawBuffers:m||c.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:m||c.has("EXT_shader_texture_lod"),customProgramCacheKey:U.customProgramCacheKey()}},getProgramCacheKey:function(U){const K=[];if(U.shaderID?K.push(U.shaderID):(K.push(U.fragmentShader),K.push(U.vertexShader)),void 0!==U.defines)for(const Q in U.defines)K.push(Q),K.push(U.defines[Q]);if(!1===U.isRawShaderMaterial){for(let Q=0;Q<C.length;Q++)K.push(U[C[Q]]);K.push(l.outputEncoding),K.push(l.gammaFactor)}return K.push(U.customProgramCacheKey),K.join()},getUniforms:function(U){const K=w[U.type];let Q;return Q=K?j$e.clone(Jh[K].uniforms):U.uniforms,Q},acquireProgram:function(U,K){let Q;for(let se=0,te=f.length;se<te;se++){const De=f[se];if(De.cacheKey===K){Q=De,++Q.usedTimes;break}}return void 0===Q&&(Q=new WJe(l,K,U,h),f.push(Q)),Q},releaseProgram:function(U){if(0==--U.usedTimes){const K=f.indexOf(U);f[K]=f[f.length-1],f.pop(),U.destroy()}},programs:f}}function XJe(){let l=new WeakMap;return{get:function(h){let d=l.get(h);return void 0===d&&(d={},l.set(h,d)),d},remove:function(h){l.delete(h)},update:function(h,d,f){l.get(h)[d]=f},dispose:function(){l=new WeakMap}}}function $Je(l,a){return l.groupOrder!==a.groupOrder?l.groupOrder-a.groupOrder:l.renderOrder!==a.renderOrder?l.renderOrder-a.renderOrder:l.program!==a.program?l.program.id-a.program.id:l.material.id!==a.material.id?l.material.id-a.material.id:l.z!==a.z?l.z-a.z:l.id-a.id}function dre(l,a){return l.groupOrder!==a.groupOrder?l.groupOrder-a.groupOrder:l.renderOrder!==a.renderOrder?l.renderOrder-a.renderOrder:l.z!==a.z?a.z-l.z:l.id-a.id}function fre(l){const a=[];let o=0;const c=[],u=[],h=[],d={id:-1};function m(b,w,C,E,M,x){let R=a[o];const P=l.get(C);return void 0===R?(R={id:b.id,object:b,geometry:w,material:C,program:P.program||d,groupOrder:E,renderOrder:b.renderOrder,z:M,group:x},a[o]=R):(R.id=b.id,R.object=b,R.geometry=w,R.material=C,R.program=P.program||d,R.groupOrder=E,R.renderOrder=b.renderOrder,R.z=M,R.group=x),o++,R}return{opaque:c,transmissive:u,transparent:h,init:function(){o=0,c.length=0,u.length=0,h.length=0},push:function(b,w,C,E,M,x){const R=m(b,w,C,E,M,x);C.transmission>0?u.push(R):!0===C.transparent?h.push(R):c.push(R)},unshift:function(b,w,C,E,M,x){const R=m(b,w,C,E,M,x);C.transmission>0?u.unshift(R):!0===C.transparent?h.unshift(R):c.unshift(R)},finish:function(){for(let b=o,w=a.length;b<w;b++){const C=a[b];if(null===C.id)break;C.id=null,C.object=null,C.geometry=null,C.material=null,C.program=null,C.group=null}},sort:function(b,w){c.length>1&&c.sort(b||$Je),u.length>1&&u.sort(w||dre),h.length>1&&h.sort(w||dre)}}}function YJe(l){let a=new WeakMap;return{get:function(u,h){let d;return!1===a.has(u)?(d=new fre(l),a.set(u,[d])):h>=a.get(u).length?(d=new fre(l),a.get(u).push(d)):d=a.get(u)[h],d},dispose:function(){a=new WeakMap}}}function ZJe(){const l={};return{get:function(a){if(void 0!==l[a.id])return l[a.id];let o;switch(a.type){case"DirectionalLight":o={direction:new oe,color:new Zt};break;case"SpotLight":o={position:new oe,direction:new oe,color:new Zt,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":o={position:new oe,color:new Zt,distance:0,decay:0};break;case"HemisphereLight":o={direction:new oe,skyColor:new Zt,groundColor:new Zt};break;case"RectAreaLight":o={color:new Zt,position:new oe,halfWidth:new oe,halfHeight:new oe}}return l[a.id]=o,o}}}let JJe=0;function QJe(l,a){return(a.castShadow?1:0)-(l.castShadow?1:0)}function eQe(l,a){const o=new ZJe,c=function(){const l={};return{get:function(a){if(void 0!==l[a.id])return l[a.id];let o;switch(a.type){case"DirectionalLight":case"SpotLight":o={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new St};break;case"PointLight":o={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new St,shadowCameraNear:1,shadowCameraFar:1e3}}return l[a.id]=o,o}}}(),u={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadow:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]};for(let y=0;y<9;y++)u.probe.push(new oe);const h=new oe,d=new An,f=new An;return{setup:function(y,v){let _=0,b=0,w=0;for(let Q=0;Q<9;Q++)u.probe[Q].set(0,0,0);let C=0,E=0,M=0,x=0,R=0,P=0,k=0,W=0;y.sort(QJe);const U=!0!==v?Math.PI:1;for(let Q=0,se=y.length;Q<se;Q++){const te=y[Q],De=te.color,de=te.intensity,ye=te.distance,_e=te.shadow&&te.shadow.map?te.shadow.map.texture:null;if(te.isAmbientLight)_+=De.r*de*U,b+=De.g*de*U,w+=De.b*de*U;else if(te.isLightProbe)for(let ue=0;ue<9;ue++)u.probe[ue].addScaledVector(te.sh.coefficients[ue],de);else if(te.isDirectionalLight){const ue=o.get(te);if(ue.color.copy(te.color).multiplyScalar(te.intensity*U),te.castShadow){const ce=te.shadow,Re=c.get(te);Re.shadowBias=ce.bias,Re.shadowNormalBias=ce.normalBias,Re.shadowRadius=ce.radius,Re.shadowMapSize=ce.mapSize,u.directionalShadow[C]=Re,u.directionalShadowMap[C]=_e,u.directionalShadowMatrix[C]=te.shadow.matrix,P++}u.directional[C]=ue,C++}else if(te.isSpotLight){const ue=o.get(te);if(ue.position.setFromMatrixPosition(te.matrixWorld),ue.color.copy(De).multiplyScalar(de*U),ue.distance=ye,ue.coneCos=Math.cos(te.angle),ue.penumbraCos=Math.cos(te.angle*(1-te.penumbra)),ue.decay=te.decay,te.castShadow){const ce=te.shadow,Re=c.get(te);Re.shadowBias=ce.bias,Re.shadowNormalBias=ce.normalBias,Re.shadowRadius=ce.radius,Re.shadowMapSize=ce.mapSize,u.spotShadow[M]=Re,u.spotShadowMap[M]=_e,u.spotShadowMatrix[M]=te.shadow.matrix,W++}u.spot[M]=ue,M++}else if(te.isRectAreaLight){const ue=o.get(te);ue.color.copy(De).multiplyScalar(de),ue.halfWidth.set(.5*te.width,0,0),ue.halfHeight.set(0,.5*te.height,0),u.rectArea[x]=ue,x++}else if(te.isPointLight){const ue=o.get(te);if(ue.color.copy(te.color).multiplyScalar(te.intensity*U),ue.distance=te.distance,ue.decay=te.decay,te.castShadow){const ce=te.shadow,Re=c.get(te);Re.shadowBias=ce.bias,Re.shadowNormalBias=ce.normalBias,Re.shadowRadius=ce.radius,Re.shadowMapSize=ce.mapSize,Re.shadowCameraNear=ce.camera.near,Re.shadowCameraFar=ce.camera.far,u.pointShadow[E]=Re,u.pointShadowMap[E]=_e,u.pointShadowMatrix[E]=te.shadow.matrix,k++}u.point[E]=ue,E++}else if(te.isHemisphereLight){const ue=o.get(te);ue.skyColor.copy(te.color).multiplyScalar(de*U),ue.groundColor.copy(te.groundColor).multiplyScalar(de*U),u.hemi[R]=ue,R++}}x>0&&(a.isWebGL2||!0===l.has("OES_texture_float_linear")?(u.rectAreaLTC1=an.LTC_FLOAT_1,u.rectAreaLTC2=an.LTC_FLOAT_2):!0===l.has("OES_texture_half_float_linear")?(u.rectAreaLTC1=an.LTC_HALF_1,u.rectAreaLTC2=an.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),u.ambient[0]=_,u.ambient[1]=b,u.ambient[2]=w;const K=u.hash;(K.directionalLength!==C||K.pointLength!==E||K.spotLength!==M||K.rectAreaLength!==x||K.hemiLength!==R||K.numDirectionalShadows!==P||K.numPointShadows!==k||K.numSpotShadows!==W)&&(u.directional.length=C,u.spot.length=M,u.rectArea.length=x,u.point.length=E,u.hemi.length=R,u.directionalShadow.length=P,u.directionalShadowMap.length=P,u.pointShadow.length=k,u.pointShadowMap.length=k,u.spotShadow.length=W,u.spotShadowMap.length=W,u.directionalShadowMatrix.length=P,u.pointShadowMatrix.length=k,u.spotShadowMatrix.length=W,K.directionalLength=C,K.pointLength=E,K.spotLength=M,K.rectAreaLength=x,K.hemiLength=R,K.numDirectionalShadows=P,K.numPointShadows=k,K.numSpotShadows=W,u.version=JJe++)},setupView:function(y,v){let _=0,b=0,w=0,C=0,E=0;const M=v.matrixWorldInverse;for(let x=0,R=y.length;x<R;x++){const P=y[x];if(P.isDirectionalLight){const k=u.directional[_];k.direction.setFromMatrixPosition(P.matrixWorld),h.setFromMatrixPosition(P.target.matrixWorld),k.direction.sub(h),k.direction.transformDirection(M),_++}else if(P.isSpotLight){const k=u.spot[w];k.position.setFromMatrixPosition(P.matrixWorld),k.position.applyMatrix4(M),k.direction.setFromMatrixPosition(P.matrixWorld),h.setFromMatrixPosition(P.target.matrixWorld),k.direction.sub(h),k.direction.transformDirection(M),w++}else if(P.isRectAreaLight){const k=u.rectArea[C];k.position.setFromMatrixPosition(P.matrixWorld),k.position.applyMatrix4(M),f.identity(),d.copy(P.matrixWorld),d.premultiply(M),f.extractRotation(d),k.halfWidth.set(.5*P.width,0,0),k.halfHeight.set(0,.5*P.height,0),k.halfWidth.applyMatrix4(f),k.halfHeight.applyMatrix4(f),C++}else if(P.isPointLight){const k=u.point[b];k.position.setFromMatrixPosition(P.matrixWorld),k.position.applyMatrix4(M),b++}else if(P.isHemisphereLight){const k=u.hemi[E];k.direction.setFromMatrixPosition(P.matrixWorld),k.direction.transformDirection(M),k.direction.normalize(),E++}}},state:u}}function pre(l,a){const o=new eQe(l,a),c=[],u=[];return{init:function(){c.length=0,u.length=0},state:{lightsArray:c,shadowsArray:u,lights:o},setupLights:function(v){o.setup(c,v)},setupLightsView:function(v){o.setupView(c,v)},pushLight:function(v){c.push(v)},pushShadow:function(v){u.push(v)}}}function tQe(l,a){let o=new WeakMap;return{get:function(h,d=0){let f;return!1===o.has(h)?(f=new pre(l,a),o.set(h,[f])):d>=o.get(h).length?(f=new pre(l,a),o.get(h).push(f)):f=o.get(h)[d],f},dispose:function(){o=new WeakMap}}}class kB extends Eo{constructor(a){super(),this.type="MeshDepthMaterial",this.depthPacking=3200,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.setValues(a)}copy(a){return super.copy(a),this.depthPacking=a.depthPacking,this.map=a.map,this.alphaMap=a.alphaMap,this.displacementMap=a.displacementMap,this.displacementScale=a.displacementScale,this.displacementBias=a.displacementBias,this.wireframe=a.wireframe,this.wireframeLinewidth=a.wireframeLinewidth,this}}kB.prototype.isMeshDepthMaterial=!0;class VB extends Eo{constructor(a){super(),this.type="MeshDistanceMaterial",this.referencePosition=new oe,this.nearDistance=1,this.farDistance=1e3,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.fog=!1,this.setValues(a)}copy(a){return super.copy(a),this.referencePosition.copy(a.referencePosition),this.nearDistance=a.nearDistance,this.farDistance=a.farDistance,this.map=a.map,this.alphaMap=a.alphaMap,this.displacementMap=a.displacementMap,this.displacementScale=a.displacementScale,this.displacementBias=a.displacementBias,this}}function mre(l,a,o){let c=new qI;const u=new St,h=new St,d=new Oi,f=new kB({depthPacking:3201}),m=new VB,g={},y=o.maxTextureSize,v={0:1,1:0,2:2},_=new gf({uniforms:{shadow_pass:{value:null},resolution:{value:new St},radius:{value:4},samples:{value:8}},vertexShader:"void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",fragmentShader:"uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\nuniform float samples;\n#include <packing>\nvoid main() {\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\n\tfloat uvStart = samples <= 1.0 ? 0.0 : - 1.0;\n\tfor ( float i = 0.0; i < samples; i ++ ) {\n\t\tfloat uvOffset = uvStart + i * uvStride;\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean / samples;\n\tsquared_mean = squared_mean / samples;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}"}),b=_.clone();b.defines.HORIZONTAL_PASS=1;const w=new Kn;w.setAttribute("position",new Ei(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const C=new Hs(w,_),E=this;function M(P,k){const W=a.update(C);_.uniforms.shadow_pass.value=P.map.texture,_.uniforms.resolution.value=P.mapSize,_.uniforms.radius.value=P.radius,_.uniforms.samples.value=P.blurSamples,l.setRenderTarget(P.mapPass),l.clear(),l.renderBufferDirect(k,null,W,_,C,null),b.uniforms.shadow_pass.value=P.mapPass.texture,b.uniforms.resolution.value=P.mapSize,b.uniforms.radius.value=P.radius,b.uniforms.samples.value=P.blurSamples,l.setRenderTarget(P.map),l.clear(),l.renderBufferDirect(k,null,W,b,C,null)}function x(P,k,W,U,K,Q,se){let te=null;const De=!0===U.isPointLight?P.customDistanceMaterial:P.customDepthMaterial;if(te=void 0!==De?De:!0===U.isPointLight?m:f,l.localClippingEnabled&&!0===W.clipShadows&&0!==W.clippingPlanes.length||W.displacementMap&&0!==W.displacementScale||W.alphaMap&&W.alphaTest>0){const de=te.uuid,ye=W.uuid;let _e=g[de];void 0===_e&&(_e={},g[de]=_e);let ue=_e[ye];void 0===ue&&(ue=te.clone(),_e[ye]=ue),te=ue}return te.visible=W.visible,te.wireframe=W.wireframe,te.side=3===se?null!==W.shadowSide?W.shadowSide:W.side:null!==W.shadowSide?W.shadowSide:v[W.side],te.alphaMap=W.alphaMap,te.alphaTest=W.alphaTest,te.clipShadows=W.clipShadows,te.clippingPlanes=W.clippingPlanes,te.clipIntersection=W.clipIntersection,te.displacementMap=W.displacementMap,te.displacementScale=W.displacementScale,te.displacementBias=W.displacementBias,te.wireframeLinewidth=W.wireframeLinewidth,te.linewidth=W.linewidth,!0===U.isPointLight&&!0===te.isMeshDistanceMaterial&&(te.referencePosition.setFromMatrixPosition(U.matrixWorld),te.nearDistance=K,te.farDistance=Q),te}function R(P,k,W,U,K){if(!1===P.visible)return;if(P.layers.test(k.layers)&&(P.isMesh||P.isLine||P.isPoints)&&(P.castShadow||P.receiveShadow&&3===K)&&(!P.frustumCulled||c.intersectsObject(P))){P.modelViewMatrix.multiplyMatrices(W.matrixWorldInverse,P.matrixWorld);const te=a.update(P),De=P.material;if(Array.isArray(De)){const de=te.groups;for(let ye=0,_e=de.length;ye<_e;ye++){const ue=de[ye],ce=De[ue.materialIndex];if(ce&&ce.visible){const Re=x(P,0,ce,U,W.near,W.far,K);l.renderBufferDirect(W,null,te,Re,P,ue)}}}else if(De.visible){const de=x(P,0,De,U,W.near,W.far,K);l.renderBufferDirect(W,null,te,de,P,null)}}const se=P.children;for(let te=0,De=se.length;te<De;te++)R(se[te],k,W,U,K)}this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=1,this.render=function(P,k,W){if(!1===E.enabled||!1===E.autoUpdate&&!1===E.needsUpdate||0===P.length)return;const U=l.getRenderTarget(),K=l.getActiveCubeFace(),Q=l.getActiveMipmapLevel(),se=l.state;se.setBlending(0),se.buffers.color.setClear(1,1,1,1),se.buffers.depth.setTest(!0),se.setScissorTest(!1);for(let te=0,De=P.length;te<De;te++){const de=P[te],ye=de.shadow;if(void 0===ye){console.warn("THREE.WebGLShadowMap:",de,"has no shadow.");continue}if(!1===ye.autoUpdate&&!1===ye.needsUpdate)continue;u.copy(ye.mapSize);const _e=ye.getFrameExtents();if(u.multiply(_e),h.copy(ye.mapSize),(u.x>y||u.y>y)&&(u.x>y&&(h.x=Math.floor(y/_e.x),u.x=h.x*_e.x,ye.mapSize.x=h.x),u.y>y&&(h.y=Math.floor(y/_e.y),u.y=h.y*_e.y,ye.mapSize.y=h.y)),null===ye.map&&!ye.isPointLightShadow&&3===this.type){const ce={minFilter:ao,magFilter:ao,format:El};ye.map=new Kh(u.x,u.y,ce),ye.map.texture.name=de.name+".shadowMap",ye.mapPass=new Kh(u.x,u.y,ce),ye.camera.updateProjectionMatrix()}null===ye.map&&(ye.map=new Kh(u.x,u.y,{minFilter:oo,magFilter:oo,format:El}),ye.map.texture.name=de.name+".shadowMap",ye.camera.updateProjectionMatrix()),l.setRenderTarget(ye.map),l.clear();const ue=ye.getViewportCount();for(let ce=0;ce<ue;ce++){const Re=ye.getViewport(ce);d.set(h.x*Re.x,h.y*Re.y,h.x*Re.z,h.y*Re.w),se.viewport(d),ye.updateMatrices(de,ce),c=ye.getFrustum(),R(k,W,ye.camera,de,this.type)}!ye.isPointLightShadow&&3===this.type&&M(ye,W),ye.needsUpdate=!1}E.needsUpdate=!1,l.setRenderTarget(U,K,Q)}}function iQe(l,a,o){const c=o.isWebGL2,f=new function(){let Pe=!1;const Gt=new Oi;let ot=null;const rn=new Oi(0,0,0,0);return{setMask:function(hn){ot!==hn&&!Pe&&(l.colorMask(hn,hn,hn,hn),ot=hn)},setLocked:function(hn){Pe=hn},setClear:function(hn,gn,Ne,nn,Hr){!0===Hr&&(hn*=nn,gn*=nn,Ne*=nn),Gt.set(hn,gn,Ne,nn),!1===rn.equals(Gt)&&(l.clearColor(hn,gn,Ne,nn),rn.copy(Gt))},reset:function(){Pe=!1,ot=null,rn.set(-1,0,0,0)}}},m=new function(){let Pe=!1,Gt=null,ot=null,rn=null;return{setTest:function(hn){hn?Ue(2929):ct(2929)},setMask:function(hn){Gt!==hn&&!Pe&&(l.depthMask(hn),Gt=hn)},setFunc:function(hn){if(ot!==hn){if(hn)switch(hn){case 0:l.depthFunc(512);break;case 1:l.depthFunc(519);break;case 2:l.depthFunc(513);break;case 3:l.depthFunc(515);break;case 4:l.depthFunc(514);break;case 5:l.depthFunc(518);break;case 6:l.depthFunc(516);break;case 7:l.depthFunc(517);break;default:l.depthFunc(515)}else l.depthFunc(515);ot=hn}},setLocked:function(hn){Pe=hn},setClear:function(hn){rn!==hn&&(l.clearDepth(hn),rn=hn)},reset:function(){Pe=!1,Gt=null,ot=null,rn=null}}},g=new function(){let Pe=!1,Gt=null,ot=null,rn=null,hn=null,gn=null,Ne=null,nn=null,Hr=null;return{setTest:function(or){Pe||(or?Ue(2960):ct(2960))},setMask:function(or){Gt!==or&&!Pe&&(l.stencilMask(or),Gt=or)},setFunc:function(or,oi,gs){(ot!==or||rn!==oi||hn!==gs)&&(l.stencilFunc(or,oi,gs),ot=or,rn=oi,hn=gs)},setOp:function(or,oi,gs){(gn!==or||Ne!==oi||nn!==gs)&&(l.stencilOp(or,oi,gs),gn=or,Ne=oi,nn=gs)},setLocked:function(or){Pe=or},setClear:function(or){Hr!==or&&(l.clearStencil(or),Hr=or)},reset:function(){Pe=!1,Gt=null,ot=null,rn=null,hn=null,gn=null,Ne=null,nn=null,Hr=null}}};let y={},v=null,_={},b=null,w=!1,C=null,E=null,M=null,x=null,R=null,P=null,k=null,W=!1,U=null,K=null,Q=null,se=null,te=null;const De=l.getParameter(35661);let de=!1,ye=0;const _e=l.getParameter(7938);-1!==_e.indexOf("WebGL")?(ye=parseFloat(/^WebGL (\d)/.exec(_e)[1]),de=ye>=1):-1!==_e.indexOf("OpenGL ES")&&(ye=parseFloat(/^OpenGL ES (\d)/.exec(_e)[1]),de=ye>=2);let ue=null,ce={};const Re=l.getParameter(3088),Oe=l.getParameter(2978),Ae=(new Oi).fromArray(Re),We=(new Oi).fromArray(Oe);function Te(Pe,Gt,ot){const rn=new Uint8Array(4),hn=l.createTexture();l.bindTexture(Pe,hn),l.texParameteri(Pe,10241,9728),l.texParameteri(Pe,10240,9728);for(let gn=0;gn<ot;gn++)l.texImage2D(Gt+gn,0,6408,1,1,0,6408,5121,rn);return hn}const He={};function Ue(Pe){!0!==y[Pe]&&(l.enable(Pe),y[Pe]=!0)}function ct(Pe){!1!==y[Pe]&&(l.disable(Pe),y[Pe]=!1)}He[3553]=Te(3553,3553,1),He[34067]=Te(34067,34069,6),f.setClear(0,0,0,1),m.setClear(1),g.setClear(0),Ue(2929),m.setFunc(3),ht(!1),vt(1),Ue(2884),Kt(0);const Ct={100:32774,101:32778,102:32779};if(c)Ct[103]=32775,Ct[104]=32776;else{const Pe=a.get("EXT_blend_minmax");null!==Pe&&(Ct[103]=Pe.MIN_EXT,Ct[104]=Pe.MAX_EXT)}const Ot={200:0,201:1,202:768,204:770,210:776,208:774,206:772,203:769,205:771,209:775,207:773};function Kt(Pe,Gt,ot,rn,hn,gn,Ne,nn){if(0!==Pe){if(!1===w&&(Ue(3042),w=!0),5===Pe)hn=hn||Gt,gn=gn||ot,Ne=Ne||rn,(Gt!==E||hn!==R)&&(l.blendEquationSeparate(Ct[Gt],Ct[hn]),E=Gt,R=hn),(ot!==M||rn!==x||gn!==P||Ne!==k)&&(l.blendFuncSeparate(Ot[ot],Ot[rn],Ot[gn],Ot[Ne]),M=ot,x=rn,P=gn,k=Ne),C=Pe,W=null;else if(Pe!==C||nn!==W){if((100!==E||100!==R)&&(l.blendEquation(32774),E=100,R=100),nn)switch(Pe){case 1:l.blendFuncSeparate(1,771,1,771);break;case 2:l.blendFunc(1,1);break;case 3:l.blendFuncSeparate(0,0,769,771);break;case 4:l.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",Pe)}else switch(Pe){case 1:l.blendFuncSeparate(770,771,1,771);break;case 2:l.blendFunc(770,1);break;case 3:l.blendFunc(0,769);break;case 4:l.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",Pe)}M=null,x=null,P=null,k=null,C=Pe,W=nn}}else!0===w&&(ct(3042),w=!1)}function ht(Pe){U!==Pe&&(l.frontFace(Pe?2304:2305),U=Pe)}function vt(Pe){0!==Pe?(Ue(2884),Pe!==K&&l.cullFace(1===Pe?1029:2===Pe?1028:1032)):ct(2884),K=Pe}function Ft(Pe,Gt,ot){Pe?(Ue(32823),(se!==Gt||te!==ot)&&(l.polygonOffset(Gt,ot),se=Gt,te=ot)):ct(32823)}function ee(Pe){void 0===Pe&&(Pe=33984+De-1),ue!==Pe&&(l.activeTexture(Pe),ue=Pe)}return{buffers:{color:f,depth:m,stencil:g},enable:Ue,disable:ct,bindFramebuffer:function(Pe,Gt){return null===Gt&&null!==v&&(Gt=v),_[Pe]!==Gt&&(l.bindFramebuffer(Pe,Gt),_[Pe]=Gt,c&&(36009===Pe&&(_[36160]=Gt),36160===Pe&&(_[36009]=Gt)),!0)},bindXRFramebuffer:function(Pe){Pe!==v&&(l.bindFramebuffer(36160,Pe),v=Pe)},useProgram:function(Pe){return b!==Pe&&(l.useProgram(Pe),b=Pe,!0)},setBlending:Kt,setMaterial:function(Pe,Gt){2===Pe.side?ct(2884):Ue(2884);let ot=1===Pe.side;Gt&&(ot=!ot),ht(ot),1===Pe.blending&&!1===Pe.transparent?Kt(0):Kt(Pe.blending,Pe.blendEquation,Pe.blendSrc,Pe.blendDst,Pe.blendEquationAlpha,Pe.blendSrcAlpha,Pe.blendDstAlpha,Pe.premultipliedAlpha),m.setFunc(Pe.depthFunc),m.setTest(Pe.depthTest),m.setMask(Pe.depthWrite),f.setMask(Pe.colorWrite);const rn=Pe.stencilWrite;g.setTest(rn),rn&&(g.setMask(Pe.stencilWriteMask),g.setFunc(Pe.stencilFunc,Pe.stencilRef,Pe.stencilFuncMask),g.setOp(Pe.stencilFail,Pe.stencilZFail,Pe.stencilZPass)),Ft(Pe.polygonOffset,Pe.polygonOffsetFactor,Pe.polygonOffsetUnits),!0===Pe.alphaToCoverage?Ue(32926):ct(32926)},setFlipSided:ht,setCullFace:vt,setLineWidth:function(Pe){Pe!==Q&&(de&&l.lineWidth(Pe),Q=Pe)},setPolygonOffset:Ft,setScissorTest:function(Pe){Pe?Ue(3089):ct(3089)},activeTexture:ee,bindTexture:function(Pe,Gt){null===ue&&ee();let ot=ce[ue];void 0===ot&&(ot={type:void 0,texture:void 0},ce[ue]=ot),(ot.type!==Pe||ot.texture!==Gt)&&(l.bindTexture(Pe,Gt||He[Pe]),ot.type=Pe,ot.texture=Gt)},unbindTexture:function(){const Pe=ce[ue];void 0!==Pe&&void 0!==Pe.type&&(l.bindTexture(Pe.type,null),Pe.type=void 0,Pe.texture=void 0)},compressedTexImage2D:function(){try{l.compressedTexImage2D.apply(l,arguments)}catch(Pe){console.error("THREE.WebGLState:",Pe)}},texImage2D:function(){try{l.texImage2D.apply(l,arguments)}catch(Pe){console.error("THREE.WebGLState:",Pe)}},texImage3D:function(){try{l.texImage3D.apply(l,arguments)}catch(Pe){console.error("THREE.WebGLState:",Pe)}},scissor:function(Pe){!1===Ae.equals(Pe)&&(l.scissor(Pe.x,Pe.y,Pe.z,Pe.w),Ae.copy(Pe))},viewport:function(Pe){!1===We.equals(Pe)&&(l.viewport(Pe.x,Pe.y,Pe.z,Pe.w),We.copy(Pe))},reset:function(){l.disable(3042),l.disable(2884),l.disable(2929),l.disable(32823),l.disable(3089),l.disable(2960),l.disable(32926),l.blendEquation(32774),l.blendFunc(1,0),l.blendFuncSeparate(1,0,1,0),l.colorMask(!0,!0,!0,!0),l.clearColor(0,0,0,0),l.depthMask(!0),l.depthFunc(513),l.clearDepth(1),l.stencilMask(4294967295),l.stencilFunc(519,0,4294967295),l.stencilOp(7680,7680,7680),l.clearStencil(0),l.cullFace(1029),l.frontFace(2305),l.polygonOffset(0,0),l.activeTexture(33984),l.bindFramebuffer(36160,null),!0===c&&(l.bindFramebuffer(36009,null),l.bindFramebuffer(36008,null)),l.useProgram(null),l.lineWidth(1),l.scissor(0,0,l.canvas.width,l.canvas.height),l.viewport(0,0,l.canvas.width,l.canvas.height),y={},ue=null,ce={},v=null,_={},b=null,w=!1,C=null,E=null,M=null,x=null,R=null,P=null,k=null,W=!1,U=null,K=null,Q=null,se=null,te=null,Ae.set(0,0,l.canvas.width,l.canvas.height),We.set(0,0,l.canvas.width,l.canvas.height),f.reset(),m.reset(),g.reset()}}}function sQe(l,a,o,c,u,h,d){const f=u.isWebGL2,m=u.maxTextures,g=u.maxCubemapSize,y=u.maxTextureSize,v=u.maxSamples,_=new WeakMap;let b,w=!1;try{w="undefined"!=typeof OffscreenCanvas&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch(ge){}function C(ge,ee){return w?new OffscreenCanvas(ge,ee):document.createElementNS("http://www.w3.org/1999/xhtml","canvas")}function E(ge,ee,st,gt){let Xt=1;if((ge.width>gt||ge.height>gt)&&(Xt=gt/Math.max(ge.width,ge.height)),Xt<1||!0===ee){if("undefined"!=typeof HTMLImageElement&&ge instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&ge instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&ge instanceof ImageBitmap){const Jt=ee?bne:Math.floor,Tn=Jt(Xt*ge.width),Bt=Jt(Xt*ge.height);void 0===b&&(b=C(Tn,Bt));const En=st?C(Tn,Bt):b;return En.width=Tn,En.height=Bt,En.getContext("2d").drawImage(ge,0,0,Tn,Bt),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+ge.width+"x"+ge.height+") to ("+Tn+"x"+Bt+")."),En}return"data"in ge&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+ge.width+"x"+ge.height+")."),ge}return ge}function M(ge){return rB(ge.width)&&rB(ge.height)}function R(ge,ee){return ge.generateMipmaps&&ee&&ge.minFilter!==oo&&ge.minFilter!==ao}function P(ge,ee,st,gt,Xt=1){l.generateMipmap(ge),c.get(ee).__maxMipLevel=Math.log2(Math.max(st,gt,Xt))}function k(ge,ee,st){if(!1===f)return ee;if(null!==ge){if(void 0!==l[ge])return l[ge];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+ge+"'")}let gt=ee;return 6403===ee&&(5126===st&&(gt=33326),5131===st&&(gt=33325),5121===st&&(gt=33321)),6407===ee&&(5126===st&&(gt=34837),5131===st&&(gt=34843),5121===st&&(gt=32849)),6408===ee&&(5126===st&&(gt=34836),5131===st&&(gt=34842),5121===st&&(gt=32856)),(33325===gt||33326===gt||34842===gt||34836===gt)&&a.get("EXT_color_buffer_float"),gt}function W(ge){return ge===oo||1004===ge||1005===ge?9728:9729}function U(ge){const ee=ge.target;ee.removeEventListener("dispose",U),function(ge){const ee=c.get(ge);void 0!==ee.__webglInit&&(l.deleteTexture(ee.__webglTexture),c.remove(ge))}(ee),ee.isVideoTexture&&_.delete(ee),d.memory.textures--}function K(ge){const ee=ge.target;ee.removeEventListener("dispose",K),function(ge){const ee=ge.texture,st=c.get(ge),gt=c.get(ee);if(ge){if(void 0!==gt.__webglTexture&&(l.deleteTexture(gt.__webglTexture),d.memory.textures--),ge.depthTexture&&ge.depthTexture.dispose(),ge.isWebGLCubeRenderTarget)for(let Xt=0;Xt<6;Xt++)l.deleteFramebuffer(st.__webglFramebuffer[Xt]),st.__webglDepthbuffer&&l.deleteRenderbuffer(st.__webglDepthbuffer[Xt]);else l.deleteFramebuffer(st.__webglFramebuffer),st.__webglDepthbuffer&&l.deleteRenderbuffer(st.__webglDepthbuffer),st.__webglMultisampledFramebuffer&&l.deleteFramebuffer(st.__webglMultisampledFramebuffer),st.__webglColorRenderbuffer&&l.deleteRenderbuffer(st.__webglColorRenderbuffer),st.__webglDepthRenderbuffer&&l.deleteRenderbuffer(st.__webglDepthRenderbuffer);if(ge.isWebGLMultipleRenderTargets)for(let Xt=0,Jt=ee.length;Xt<Jt;Xt++){const Tn=c.get(ee[Xt]);Tn.__webglTexture&&(l.deleteTexture(Tn.__webglTexture),d.memory.textures--),c.remove(ee[Xt])}c.remove(ee),c.remove(ge)}}(ee)}let te=0;function ye(ge,ee){const st=c.get(ge);if(ge.isVideoTexture&&function(ge){const ee=d.render.frame;_.get(ge)!==ee&&(_.set(ge,ee),ge.update())}(ge),ge.version>0&&st.__version!==ge.version){const gt=ge.image;if(void 0===gt)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined");else{if(!1!==gt.complete)return void Te(st,ge,ee);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}o.activeTexture(33984+ee),o.bindTexture(3553,st.__webglTexture)}function ce(ge,ee){const st=c.get(ge);ge.version>0&&st.__version!==ge.version?function(ge,ee,st){if(6!==ee.image.length)return;We(ge,ee),o.activeTexture(33984+st),o.bindTexture(34067,ge.__webglTexture),l.pixelStorei(37440,ee.flipY),l.pixelStorei(37441,ee.premultiplyAlpha),l.pixelStorei(3317,ee.unpackAlignment),l.pixelStorei(37443,0);const gt=ee&&(ee.isCompressedTexture||ee.image[0].isCompressedTexture),Xt=ee.image[0]&&ee.image[0].isDataTexture,Jt=[];for(let ot=0;ot<6;ot++)Jt[ot]=gt||Xt?Xt?ee.image[ot].image:ee.image[ot]:E(ee.image[ot],!1,!0,g);const Tn=Jt[0],Bt=M(Tn)||f,En=h.convert(ee.format),pn=h.convert(ee.type),Pe=k(ee.internalFormat,En,pn);let Gt;if(Ae(34067,ee,Bt),gt){for(let ot=0;ot<6;ot++){Gt=Jt[ot].mipmaps;for(let rn=0;rn<Gt.length;rn++){const hn=Gt[rn];ee.format!==El&&ee.format!==Zh?null!==En?o.compressedTexImage2D(34069+ot,rn,Pe,hn.width,hn.height,0,hn.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):o.texImage2D(34069+ot,rn,Pe,hn.width,hn.height,0,En,pn,hn.data)}}ge.__maxMipLevel=Gt.length-1}else{Gt=ee.mipmaps;for(let ot=0;ot<6;ot++)if(Xt){o.texImage2D(34069+ot,0,Pe,Jt[ot].width,Jt[ot].height,0,En,pn,Jt[ot].data);for(let rn=0;rn<Gt.length;rn++){const gn=Gt[rn].image[ot].image;o.texImage2D(34069+ot,rn+1,Pe,gn.width,gn.height,0,En,pn,gn.data)}}else{o.texImage2D(34069+ot,0,Pe,En,pn,Jt[ot]);for(let rn=0;rn<Gt.length;rn++)o.texImage2D(34069+ot,rn+1,Pe,En,pn,Gt[rn].image[ot])}ge.__maxMipLevel=Gt.length}R(ee,Bt)&&P(34067,ee,Tn.width,Tn.height),ge.__version=ee.version,ee.onUpdate&&ee.onUpdate(ee)}(st,ge,ee):(o.activeTexture(33984+ee),o.bindTexture(34067,st.__webglTexture))}const Re={[Gg]:10497,[sa]:33071,1002:33648},Oe={[oo]:9728,1004:9984,1005:9986,[ao]:9729,1007:9985,[Fp]:9987};function Ae(ge,ee,st){if(st?(l.texParameteri(ge,10242,Re[ee.wrapS]),l.texParameteri(ge,10243,Re[ee.wrapT]),(32879===ge||35866===ge)&&l.texParameteri(ge,32882,Re[ee.wrapR]),l.texParameteri(ge,10240,Oe[ee.magFilter]),l.texParameteri(ge,10241,Oe[ee.minFilter])):(l.texParameteri(ge,10242,33071),l.texParameteri(ge,10243,33071),(32879===ge||35866===ge)&&l.texParameteri(ge,32882,33071),(ee.wrapS!==sa||ee.wrapT!==sa)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),l.texParameteri(ge,10240,W(ee.magFilter)),l.texParameteri(ge,10241,W(ee.minFilter)),ee.minFilter!==oo&&ee.minFilter!==ao&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),!0===a.has("EXT_texture_filter_anisotropic")){const gt=a.get("EXT_texture_filter_anisotropic");if(ee.type===kp&&!1===a.has("OES_texture_float_linear")||!1===f&&ee.type===A0&&!1===a.has("OES_texture_half_float_linear"))return;(ee.anisotropy>1||c.get(ee).__currentAnisotropy)&&(l.texParameterf(ge,gt.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(ee.anisotropy,u.getMaxAnisotropy())),c.get(ee).__currentAnisotropy=ee.anisotropy)}}function We(ge,ee){void 0===ge.__webglInit&&(ge.__webglInit=!0,ee.addEventListener("dispose",U),ge.__webglTexture=l.createTexture(),d.memory.textures++)}function Te(ge,ee,st){let gt=3553;ee.isDataTexture2DArray&&(gt=35866),ee.isDataTexture3D&&(gt=32879),We(ge,ee),o.activeTexture(33984+st),o.bindTexture(gt,ge.__webglTexture),l.pixelStorei(37440,ee.flipY),l.pixelStorei(37441,ee.premultiplyAlpha),l.pixelStorei(3317,ee.unpackAlignment),l.pixelStorei(37443,0);const Xt=function(ge){return!f&&(ge.wrapS!==sa||ge.wrapT!==sa||ge.minFilter!==oo&&ge.minFilter!==ao)}(ee)&&!1===M(ee.image),Jt=E(ee.image,Xt,!1,y),Tn=M(Jt)||f,Bt=h.convert(ee.format);let Pe,En=h.convert(ee.type),pn=k(ee.internalFormat,Bt,En);Ae(gt,ee,Tn);const Gt=ee.mipmaps;if(ee.isDepthTexture)pn=6402,f?pn=ee.type===kp?36012:1014===ee.type?33190:ee.type===Tw?35056:33189:ee.type===kp&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),ee.format===I0&&6402===pn&&1012!==ee.type&&1014!==ee.type&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),ee.type=1012,En=h.convert(ee.type)),ee.format===ww&&6402===pn&&(pn=34041,ee.type!==Tw&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),ee.type=Tw,En=h.convert(ee.type))),o.texImage2D(3553,0,pn,Jt.width,Jt.height,0,Bt,En,null);else if(ee.isDataTexture)if(Gt.length>0&&Tn){for(let ot=0,rn=Gt.length;ot<rn;ot++)Pe=Gt[ot],o.texImage2D(3553,ot,pn,Pe.width,Pe.height,0,Bt,En,Pe.data);ee.generateMipmaps=!1,ge.__maxMipLevel=Gt.length-1}else o.texImage2D(3553,0,pn,Jt.width,Jt.height,0,Bt,En,Jt.data),ge.__maxMipLevel=0;else if(ee.isCompressedTexture){for(let ot=0,rn=Gt.length;ot<rn;ot++)Pe=Gt[ot],ee.format!==El&&ee.format!==Zh?null!==Bt?o.compressedTexImage2D(3553,ot,pn,Pe.width,Pe.height,0,Pe.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):o.texImage2D(3553,ot,pn,Pe.width,Pe.height,0,Bt,En,Pe.data);ge.__maxMipLevel=Gt.length-1}else if(ee.isDataTexture2DArray)o.texImage3D(35866,0,pn,Jt.width,Jt.height,Jt.depth,0,Bt,En,Jt.data),ge.__maxMipLevel=0;else if(ee.isDataTexture3D)o.texImage3D(32879,0,pn,Jt.width,Jt.height,Jt.depth,0,Bt,En,Jt.data),ge.__maxMipLevel=0;else if(Gt.length>0&&Tn){for(let ot=0,rn=Gt.length;ot<rn;ot++)Pe=Gt[ot],o.texImage2D(3553,ot,pn,Bt,En,Pe);ee.generateMipmaps=!1,ge.__maxMipLevel=Gt.length-1}else o.texImage2D(3553,0,pn,Bt,En,Jt),ge.__maxMipLevel=0;R(ee,Tn)&&P(gt,ee,Jt.width,Jt.height),ge.__version=ee.version,ee.onUpdate&&ee.onUpdate(ee)}function Ue(ge,ee,st,gt,Xt){const Jt=h.convert(st.format),Tn=h.convert(st.type),Bt=k(st.internalFormat,Jt,Tn);32879===Xt||35866===Xt?o.texImage3D(Xt,0,Bt,ee.width,ee.height,ee.depth,0,Jt,Tn,null):o.texImage2D(Xt,0,Bt,ee.width,ee.height,0,Jt,Tn,null),o.bindFramebuffer(36160,ge),l.framebufferTexture2D(36160,gt,Xt,c.get(st).__webglTexture,0),o.bindFramebuffer(36160,null)}function ct(ge,ee,st){if(l.bindRenderbuffer(36161,ge),ee.depthBuffer&&!ee.stencilBuffer){let gt=33189;if(st){const Xt=ee.depthTexture;Xt&&Xt.isDepthTexture&&(Xt.type===kp?gt=36012:1014===Xt.type&&(gt=33190));const Jt=Kt(ee);l.renderbufferStorageMultisample(36161,Jt,gt,ee.width,ee.height)}else l.renderbufferStorage(36161,gt,ee.width,ee.height);l.framebufferRenderbuffer(36160,36096,36161,ge)}else if(ee.depthBuffer&&ee.stencilBuffer){if(st){const gt=Kt(ee);l.renderbufferStorageMultisample(36161,gt,35056,ee.width,ee.height)}else l.renderbufferStorage(36161,34041,ee.width,ee.height);l.framebufferRenderbuffer(36160,33306,36161,ge)}else{const gt=!0===ee.isWebGLMultipleRenderTargets?ee.texture[0]:ee.texture,Xt=h.convert(gt.format),Jt=h.convert(gt.type),Tn=k(gt.internalFormat,Xt,Jt);if(st){const Bt=Kt(ee);l.renderbufferStorageMultisample(36161,Bt,Tn,ee.width,ee.height)}else l.renderbufferStorage(36161,Tn,ee.width,ee.height)}l.bindRenderbuffer(36161,null)}function Kt(ge){return f&&ge.isWebGLMultisampleRenderTarget?Math.min(v,ge.samples):0}let ht=!1,vt=!1;this.allocateTextureUnit=function(){const ge=te;return ge>=m&&console.warn("THREE.WebGLTextures: Trying to use "+ge+" texture units while this GPU supports only "+m),te+=1,ge},this.resetTextureUnits=function(){te=0},this.setTexture2D=ye,this.setTexture2DArray=function(ge,ee){const st=c.get(ge);ge.version>0&&st.__version!==ge.version?Te(st,ge,ee):(o.activeTexture(33984+ee),o.bindTexture(35866,st.__webglTexture))},this.setTexture3D=function(ge,ee){const st=c.get(ge);ge.version>0&&st.__version!==ge.version?Te(st,ge,ee):(o.activeTexture(33984+ee),o.bindTexture(32879,st.__webglTexture))},this.setTextureCube=ce,this.setupRenderTarget=function(ge){const ee=ge.texture,st=c.get(ge),gt=c.get(ee);ge.addEventListener("dispose",K),!0!==ge.isWebGLMultipleRenderTargets&&(gt.__webglTexture=l.createTexture(),gt.__version=ee.version,d.memory.textures++);const Xt=!0===ge.isWebGLCubeRenderTarget,Jt=!0===ge.isWebGLMultipleRenderTargets,Tn=!0===ge.isWebGLMultisampleRenderTarget,Bt=ee.isDataTexture3D||ee.isDataTexture2DArray,En=M(ge)||f;if(f&&ee.format===Zh&&(ee.type===kp||ee.type===A0)&&(ee.format=El,console.warn("THREE.WebGLRenderer: Rendering to textures with RGB format is not supported. Using RGBA format instead.")),Xt){st.__webglFramebuffer=[];for(let pn=0;pn<6;pn++)st.__webglFramebuffer[pn]=l.createFramebuffer()}else if(st.__webglFramebuffer=l.createFramebuffer(),Jt)if(u.drawBuffers){const pn=ge.texture;for(let Pe=0,Gt=pn.length;Pe<Gt;Pe++){const ot=c.get(pn[Pe]);void 0===ot.__webglTexture&&(ot.__webglTexture=l.createTexture(),d.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");else if(Tn)if(f){st.__webglMultisampledFramebuffer=l.createFramebuffer(),st.__webglColorRenderbuffer=l.createRenderbuffer(),l.bindRenderbuffer(36161,st.__webglColorRenderbuffer);const pn=h.convert(ee.format),Pe=h.convert(ee.type),Gt=k(ee.internalFormat,pn,Pe),ot=Kt(ge);l.renderbufferStorageMultisample(36161,ot,Gt,ge.width,ge.height),o.bindFramebuffer(36160,st.__webglMultisampledFramebuffer),l.framebufferRenderbuffer(36160,36064,36161,st.__webglColorRenderbuffer),l.bindRenderbuffer(36161,null),ge.depthBuffer&&(st.__webglDepthRenderbuffer=l.createRenderbuffer(),ct(st.__webglDepthRenderbuffer,ge,!0)),o.bindFramebuffer(36160,null)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.");if(Xt){o.bindTexture(34067,gt.__webglTexture),Ae(34067,ee,En);for(let pn=0;pn<6;pn++)Ue(st.__webglFramebuffer[pn],ge,ee,36064,34069+pn);R(ee,En)&&P(34067,ee,ge.width,ge.height),o.unbindTexture()}else if(Jt){const pn=ge.texture;for(let Pe=0,Gt=pn.length;Pe<Gt;Pe++){const ot=pn[Pe],rn=c.get(ot);o.bindTexture(3553,rn.__webglTexture),Ae(3553,ot,En),Ue(st.__webglFramebuffer,ge,ot,36064+Pe,3553),R(ot,En)&&P(3553,ot,ge.width,ge.height)}o.unbindTexture()}else{let pn=3553;Bt&&(f?pn=ee.isDataTexture3D?32879:35866:console.warn("THREE.DataTexture3D and THREE.DataTexture2DArray only supported with WebGL2.")),o.bindTexture(pn,gt.__webglTexture),Ae(pn,ee,En),Ue(st.__webglFramebuffer,ge,ee,36064,pn),R(ee,En)&&P(pn,ee,ge.width,ge.height,ge.depth),o.unbindTexture()}ge.depthBuffer&&function(ge){const ee=c.get(ge),st=!0===ge.isWebGLCubeRenderTarget;if(ge.depthTexture){if(st)throw new Error("target.depthTexture not supported in Cube render targets");!function(ge,ee){if(ee&&ee.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(o.bindFramebuffer(36160,ge),!ee.depthTexture||!ee.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!c.get(ee.depthTexture).__webglTexture||ee.depthTexture.image.width!==ee.width||ee.depthTexture.image.height!==ee.height)&&(ee.depthTexture.image.width=ee.width,ee.depthTexture.image.height=ee.height,ee.depthTexture.needsUpdate=!0),ye(ee.depthTexture,0);const gt=c.get(ee.depthTexture).__webglTexture;if(ee.depthTexture.format===I0)l.framebufferTexture2D(36160,36096,3553,gt,0);else{if(ee.depthTexture.format!==ww)throw new Error("Unknown depthTexture format");l.framebufferTexture2D(36160,33306,3553,gt,0)}}(ee.__webglFramebuffer,ge)}else if(st){ee.__webglDepthbuffer=[];for(let gt=0;gt<6;gt++)o.bindFramebuffer(36160,ee.__webglFramebuffer[gt]),ee.__webglDepthbuffer[gt]=l.createRenderbuffer(),ct(ee.__webglDepthbuffer[gt],ge,!1)}else o.bindFramebuffer(36160,ee.__webglFramebuffer),ee.__webglDepthbuffer=l.createRenderbuffer(),ct(ee.__webglDepthbuffer,ge,!1);o.bindFramebuffer(36160,null)}(ge)},this.updateRenderTargetMipmap=function(ge){const ee=M(ge)||f,st=!0===ge.isWebGLMultipleRenderTargets?ge.texture:[ge.texture];for(let gt=0,Xt=st.length;gt<Xt;gt++){const Jt=st[gt];if(R(Jt,ee)){const Tn=ge.isWebGLCubeRenderTarget?34067:3553,Bt=c.get(Jt).__webglTexture;o.bindTexture(Tn,Bt),P(Tn,Jt,ge.width,ge.height),o.unbindTexture()}}},this.updateMultisampleRenderTarget=function(ge){if(ge.isWebGLMultisampleRenderTarget)if(f){const ee=ge.width,st=ge.height;let gt=16384;ge.depthBuffer&&(gt|=256),ge.stencilBuffer&&(gt|=1024);const Xt=c.get(ge);o.bindFramebuffer(36008,Xt.__webglMultisampledFramebuffer),o.bindFramebuffer(36009,Xt.__webglFramebuffer),l.blitFramebuffer(0,0,ee,st,0,0,ee,st,gt,9728),o.bindFramebuffer(36008,null),o.bindFramebuffer(36009,Xt.__webglMultisampledFramebuffer)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.")},this.safeSetTexture2D=function(ge,ee){ge&&ge.isWebGLRenderTarget&&(!1===ht&&(console.warn("THREE.WebGLTextures.safeSetTexture2D: don't use render targets as textures. Use their .texture property instead."),ht=!0),ge=ge.texture),ye(ge,ee)},this.safeSetTextureCube=function(ge,ee){ge&&ge.isWebGLCubeRenderTarget&&(!1===vt&&(console.warn("THREE.WebGLTextures.safeSetTextureCube: don't use cube render targets as textures. Use their .texture property instead."),vt=!0),ge=ge.texture),ce(ge,ee)}}function oQe(l,a,o){const c=o.isWebGL2;return{convert:function(h){let d;if(h===D0)return 5121;if(1017===h)return 32819;if(1018===h)return 32820;if(1019===h)return 33635;if(1010===h)return 5120;if(1011===h)return 5122;if(1012===h)return 5123;if(1013===h)return 5124;if(1014===h)return 5125;if(h===kp)return 5126;if(h===A0)return c?5131:(d=a.get("OES_texture_half_float"),null!==d?d.HALF_FLOAT_OES:null);if(1021===h)return 6406;if(h===Zh)return 6407;if(h===El)return 6408;if(1024===h)return 6409;if(1025===h)return 6410;if(h===I0)return 6402;if(h===ww)return 34041;if(1028===h)return 6403;if(1029===h)return 36244;if(1030===h)return 33319;if(1031===h)return 33320;if(1032===h)return 36248;if(1033===h)return 36249;if(33776===h||33777===h||33778===h||33779===h){if(d=a.get("WEBGL_compressed_texture_s3tc"),null===d)return null;if(33776===h)return d.COMPRESSED_RGB_S3TC_DXT1_EXT;if(33777===h)return d.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(33778===h)return d.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(33779===h)return d.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(35840===h||35841===h||35842===h||35843===h){if(d=a.get("WEBGL_compressed_texture_pvrtc"),null===d)return null;if(35840===h)return d.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(35841===h)return d.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(35842===h)return d.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(35843===h)return d.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(36196===h)return d=a.get("WEBGL_compressed_texture_etc1"),null!==d?d.COMPRESSED_RGB_ETC1_WEBGL:null;if((37492===h||37496===h)&&(d=a.get("WEBGL_compressed_texture_etc"),null!==d)){if(37492===h)return d.COMPRESSED_RGB8_ETC2;if(37496===h)return d.COMPRESSED_RGBA8_ETC2_EAC}return 37808===h||37809===h||37810===h||37811===h||37812===h||37813===h||37814===h||37815===h||37816===h||37817===h||37818===h||37819===h||37820===h||37821===h||37840===h||37841===h||37842===h||37843===h||37844===h||37845===h||37846===h||37847===h||37848===h||37849===h||37850===h||37851===h||37852===h||37853===h?(d=a.get("WEBGL_compressed_texture_astc"),null!==d?h:null):36492===h?(d=a.get("EXT_texture_compression_bptc"),null!==d?h:null):h===Tw?c?34042:(d=a.get("WEBGL_depth_texture"),null!==d?d.UNSIGNED_INT_24_8_WEBGL:null):void 0}}}VB.prototype.isMeshDistanceMaterial=!0;class gre extends co{constructor(a=[]){super(),this.cameras=a}}gre.prototype.isArrayCamera=!0;class vf extends ui{constructor(){super(),this.type="Group"}}vf.prototype.isGroup=!0;const aQe={type:"move"};class BB{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return null===this._hand&&(this._hand=new vf,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return null===this._targetRay&&(this._targetRay=new vf,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new oe,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new oe),this._targetRay}getGripSpace(){return null===this._grip&&(this._grip=new vf,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new oe,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new oe),this._grip}dispatchEvent(a){return null!==this._targetRay&&this._targetRay.dispatchEvent(a),null!==this._grip&&this._grip.dispatchEvent(a),null!==this._hand&&this._hand.dispatchEvent(a),this}disconnect(a){return this.dispatchEvent({type:"disconnected",data:a}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}update(a,o,c){let u=null,h=null,d=null;const f=this._targetRay,m=this._grip,g=this._hand;if(a&&"visible-blurred"!==o.session.visibilityState)if(null!==f&&(u=o.getPose(a.targetRaySpace,c),null!==u&&(f.matrix.fromArray(u.transform.matrix),f.matrix.decompose(f.position,f.rotation,f.scale),u.linearVelocity?(f.hasLinearVelocity=!0,f.linearVelocity.copy(u.linearVelocity)):f.hasLinearVelocity=!1,u.angularVelocity?(f.hasAngularVelocity=!0,f.angularVelocity.copy(u.angularVelocity)):f.hasAngularVelocity=!1,this.dispatchEvent(aQe))),g&&a.hand){d=!0;for(const C of a.hand.values()){const E=o.getJointPose(C,c);if(void 0===g.joints[C.jointName]){const x=new vf;x.matrixAutoUpdate=!1,x.visible=!1,g.joints[C.jointName]=x,g.add(x)}const M=g.joints[C.jointName];null!==E&&(M.matrix.fromArray(E.transform.matrix),M.matrix.decompose(M.position,M.rotation,M.scale),M.jointRadius=E.radius),M.visible=null!==E}const _=g.joints["index-finger-tip"].position.distanceTo(g.joints["thumb-tip"].position),b=.02,w=.005;g.inputState.pinching&&_>b+w?(g.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:a.handedness,target:this})):!g.inputState.pinching&&_<=b-w&&(g.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:a.handedness,target:this}))}else null!==m&&a.gripSpace&&(h=o.getPose(a.gripSpace,c),null!==h&&(m.matrix.fromArray(h.transform.matrix),m.matrix.decompose(m.position,m.rotation,m.scale),h.linearVelocity?(m.hasLinearVelocity=!0,m.linearVelocity.copy(h.linearVelocity)):m.hasLinearVelocity=!1,h.angularVelocity?(m.hasAngularVelocity=!0,m.angularVelocity.copy(h.angularVelocity)):m.hasAngularVelocity=!1));return null!==f&&(f.visible=null!==u),null!==m&&(m.visible=null!==h),null!==g&&(g.visible=null!==d),this}}class lQe extends Vp{constructor(a,o){super();const c=this,u=a.state;let h=null,d=1,f=null,m="local-floor",g=null,y=null,v=null,_=null,b=null,w=!1,C=null,E=null,M=null,x=null,R=null,P=null;const k=[],W=new Map,U=new co;U.layers.enable(1),U.viewport=new Oi;const K=new co;K.layers.enable(2),K.viewport=new Oi;const Q=[U,K],se=new gre;se.layers.enable(1),se.layers.enable(2);let te=null,De=null;function de(He){const Ue=W.get(He.inputSource);Ue&&Ue.dispatchEvent({type:He.type,data:He.inputSource})}function ye(){W.forEach(function(He,Ue){He.disconnect(Ue)}),W.clear(),te=null,De=null,u.bindXRFramebuffer(null),a.setRenderTarget(a.getRenderTarget()),v&&o.deleteFramebuffer(v),C&&o.deleteFramebuffer(C),E&&o.deleteRenderbuffer(E),M&&o.deleteRenderbuffer(M),v=null,C=null,E=null,M=null,b=null,_=null,y=null,h=null,Te.stop(),c.isPresenting=!1,c.dispatchEvent({type:"sessionend"})}function _e(He){const Ue=h.inputSources;for(let ct=0;ct<k.length;ct++)W.set(Ue[ct],k[ct]);for(let ct=0;ct<He.removed.length;ct++){const Ce=He.removed[ct],xt=W.get(Ce);xt&&(xt.dispatchEvent({type:"disconnected",data:Ce}),W.delete(Ce))}for(let ct=0;ct<He.added.length;ct++){const Ce=He.added[ct],xt=W.get(Ce);xt&&xt.dispatchEvent({type:"connected",data:Ce})}}this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(He){let Ue=k[He];return void 0===Ue&&(Ue=new BB,k[He]=Ue),Ue.getTargetRaySpace()},this.getControllerGrip=function(He){let Ue=k[He];return void 0===Ue&&(Ue=new BB,k[He]=Ue),Ue.getGripSpace()},this.getHand=function(He){let Ue=k[He];return void 0===Ue&&(Ue=new BB,k[He]=Ue),Ue.getHandSpace()},this.setFramebufferScaleFactor=function(He){d=He,!0===c.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(He){m=He,!0===c.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return f},this.getBaseLayer=function(){return null!==_?_:b},this.getBinding=function(){return y},this.getFrame=function(){return x},this.getSession=function(){return h},this.setSession=function(){var He=Y_(function*(Ue){if(h=Ue,null!==h){h.addEventListener("select",de),h.addEventListener("selectstart",de),h.addEventListener("selectend",de),h.addEventListener("squeeze",de),h.addEventListener("squeezestart",de),h.addEventListener("squeezeend",de),h.addEventListener("end",ye),h.addEventListener("inputsourceschange",_e);const ct=o.getContextAttributes();if(!0!==ct.xrCompatible&&(yield o.makeXRCompatible()),void 0===h.renderState.layers)b=new XRWebGLLayer(h,o,{antialias:ct.antialias,alpha:ct.alpha,depth:ct.depth,stencil:ct.stencil,framebufferScaleFactor:d}),h.updateRenderState({baseLayer:b});else if(o instanceof WebGLRenderingContext)b=new XRWebGLLayer(h,o,{antialias:!0,alpha:ct.alpha,depth:ct.depth,stencil:ct.stencil,framebufferScaleFactor:d}),h.updateRenderState({layers:[b]});else{w=ct.antialias;let Ce=null;ct.depth&&(P=256,ct.stencil&&(P|=1024),R=ct.stencil?33306:36096,Ce=ct.stencil?35056:33190);const xt={colorFormat:ct.alpha?32856:32849,depthFormat:Ce,scaleFactor:d};y=new XRWebGLBinding(h,o),_=y.createProjectionLayer(xt),v=o.createFramebuffer(),h.updateRenderState({layers:[_]}),w&&(C=o.createFramebuffer(),E=o.createRenderbuffer(),o.bindRenderbuffer(36161,E),o.renderbufferStorageMultisample(36161,4,32856,_.textureWidth,_.textureHeight),u.bindFramebuffer(36160,C),o.framebufferRenderbuffer(36160,36064,36161,E),o.bindRenderbuffer(36161,null),null!==Ce&&(M=o.createRenderbuffer(),o.bindRenderbuffer(36161,M),o.renderbufferStorageMultisample(36161,4,Ce,_.textureWidth,_.textureHeight),o.framebufferRenderbuffer(36160,R,36161,M),o.bindRenderbuffer(36161,null)),u.bindFramebuffer(36160,null))}f=yield h.requestReferenceSpace(m),Te.setContext(h),Te.start(),c.isPresenting=!0,c.dispatchEvent({type:"sessionstart"})}});return function(Ue){return He.apply(this,arguments)}}();const ue=new oe,ce=new oe;function Oe(He,Ue){null===Ue?He.matrixWorld.copy(He.matrix):He.matrixWorld.multiplyMatrices(Ue.matrixWorld,He.matrix),He.matrixWorldInverse.copy(He.matrixWorld).invert()}this.updateCamera=function(He){if(null===h)return;se.near=K.near=U.near=He.near,se.far=K.far=U.far=He.far,(te!==se.near||De!==se.far)&&(h.updateRenderState({depthNear:se.near,depthFar:se.far}),te=se.near,De=se.far);const Ue=He.parent,ct=se.cameras;Oe(se,Ue);for(let xt=0;xt<ct.length;xt++)Oe(ct[xt],Ue);se.matrixWorld.decompose(se.position,se.quaternion,se.scale),He.position.copy(se.position),He.quaternion.copy(se.quaternion),He.scale.copy(se.scale),He.matrix.copy(se.matrix),He.matrixWorld.copy(se.matrixWorld);const Ce=He.children;for(let xt=0,Ye=Ce.length;xt<Ye;xt++)Ce[xt].updateMatrixWorld(!0);2===ct.length?function(He,Ue,ct){ue.setFromMatrixPosition(Ue.matrixWorld),ce.setFromMatrixPosition(ct.matrixWorld);const Ce=ue.distanceTo(ce),xt=Ue.projectionMatrix.elements,Ye=ct.projectionMatrix.elements,Ct=xt[14]/(xt[10]-1),Ot=xt[14]/(xt[10]+1),Kt=(xt[9]+1)/xt[5],it=(xt[9]-1)/xt[5],ht=(xt[8]-1)/xt[0],vt=(Ye[8]+1)/Ye[0],tn=Ct*ht,Ft=Ct*vt,ge=Ce/(-ht+vt),ee=ge*-ht;Ue.matrixWorld.decompose(He.position,He.quaternion,He.scale),He.translateX(ee),He.translateZ(ge),He.matrixWorld.compose(He.position,He.quaternion,He.scale),He.matrixWorldInverse.copy(He.matrixWorld).invert();const st=Ct+ge,gt=Ot+ge;He.projectionMatrix.makePerspective(tn-ee,Ft+(Ce-ee),Kt*Ot/gt*st,it*Ot/gt*st,st,gt)}(se,U,K):se.projectionMatrix.copy(U.projectionMatrix)},this.getCamera=function(){return se},this.getFoveation=function(){return null!==_?_.fixedFoveation:null!==b?b.fixedFoveation:void 0},this.setFoveation=function(He){null!==_&&(_.fixedFoveation=He),null!==b&&void 0!==b.fixedFoveation&&(b.fixedFoveation=He)};let Ae=null;const Te=new Fne;Te.setAnimationLoop(function(He,Ue){if(g=Ue.getViewerPose(f),x=Ue,null!==g){const Ce=g.views;null!==b&&u.bindXRFramebuffer(b.framebuffer);let xt=!1;Ce.length!==se.cameras.length&&(se.cameras.length=0,xt=!0);for(let Ye=0;Ye<Ce.length;Ye++){const Ct=Ce[Ye];let Ot=null;if(null!==b)Ot=b.getViewport(Ct);else{const it=y.getViewSubImage(_,Ct);u.bindXRFramebuffer(v),void 0!==it.depthStencilTexture&&o.framebufferTexture2D(36160,R,3553,it.depthStencilTexture,0),o.framebufferTexture2D(36160,36064,3553,it.colorTexture,0),Ot=it.viewport}const Kt=Q[Ye];Kt.matrix.fromArray(Ct.transform.matrix),Kt.projectionMatrix.fromArray(Ct.projectionMatrix),Kt.viewport.set(Ot.x,Ot.y,Ot.width,Ot.height),0===Ye&&se.matrix.copy(Kt.matrix),!0===xt&&se.cameras.push(Kt)}w&&(u.bindXRFramebuffer(C),null!==P&&o.clear(P))}const ct=h.inputSources;for(let Ce=0;Ce<k.length;Ce++)k[Ce].update(ct[Ce],Ue,f);if(Ae&&Ae(He,Ue),w){const Ce=_.textureWidth,xt=_.textureHeight;u.bindFramebuffer(36008,C),u.bindFramebuffer(36009,v),o.invalidateFramebuffer(36008,[R]),o.invalidateFramebuffer(36009,[R]),o.blitFramebuffer(0,0,Ce,xt,0,0,Ce,xt,16384,9728),o.invalidateFramebuffer(36008,[36064]),u.bindFramebuffer(36008,null),u.bindFramebuffer(36009,null),u.bindFramebuffer(36160,C)}x=null}),this.setAnimationLoop=function(He){Ae=He},this.dispose=function(){}}}function cQe(l){function c(M,x){M.opacity.value=x.opacity,x.color&&M.diffuse.value.copy(x.color),x.emissive&&M.emissive.value.copy(x.emissive).multiplyScalar(x.emissiveIntensity),x.map&&(M.map.value=x.map),x.alphaMap&&(M.alphaMap.value=x.alphaMap),x.specularMap&&(M.specularMap.value=x.specularMap),x.alphaTest>0&&(M.alphaTest.value=x.alphaTest);const R=l.get(x).envMap;if(R){M.envMap.value=R,M.flipEnvMap.value=R.isCubeTexture&&!1===R.isRenderTargetTexture?-1:1,M.reflectivity.value=x.reflectivity,M.ior.value=x.ior,M.refractionRatio.value=x.refractionRatio;const W=l.get(R).__maxMipLevel;void 0!==W&&(M.maxMipLevel.value=W)}let P,k;x.lightMap&&(M.lightMap.value=x.lightMap,M.lightMapIntensity.value=x.lightMapIntensity),x.aoMap&&(M.aoMap.value=x.aoMap,M.aoMapIntensity.value=x.aoMapIntensity),x.map?P=x.map:x.specularMap?P=x.specularMap:x.displacementMap?P=x.displacementMap:x.normalMap?P=x.normalMap:x.bumpMap?P=x.bumpMap:x.roughnessMap?P=x.roughnessMap:x.metalnessMap?P=x.metalnessMap:x.alphaMap?P=x.alphaMap:x.emissiveMap?P=x.emissiveMap:x.clearcoatMap?P=x.clearcoatMap:x.clearcoatNormalMap?P=x.clearcoatNormalMap:x.clearcoatRoughnessMap?P=x.clearcoatRoughnessMap:x.specularIntensityMap?P=x.specularIntensityMap:x.specularTintMap?P=x.specularTintMap:x.transmissionMap?P=x.transmissionMap:x.thicknessMap&&(P=x.thicknessMap),void 0!==P&&(P.isWebGLRenderTarget&&(P=P.texture),!0===P.matrixAutoUpdate&&P.updateMatrix(),M.uvTransform.value.copy(P.matrix)),x.aoMap?k=x.aoMap:x.lightMap&&(k=x.lightMap),void 0!==k&&(k.isWebGLRenderTarget&&(k=k.texture),!0===k.matrixAutoUpdate&&k.updateMatrix(),M.uv2Transform.value.copy(k.matrix))}function v(M,x){M.roughness.value=x.roughness,M.metalness.value=x.metalness,x.roughnessMap&&(M.roughnessMap.value=x.roughnessMap),x.metalnessMap&&(M.metalnessMap.value=x.metalnessMap),x.emissiveMap&&(M.emissiveMap.value=x.emissiveMap),x.bumpMap&&(M.bumpMap.value=x.bumpMap,M.bumpScale.value=x.bumpScale,1===x.side&&(M.bumpScale.value*=-1)),x.normalMap&&(M.normalMap.value=x.normalMap,M.normalScale.value.copy(x.normalScale),1===x.side&&M.normalScale.value.negate()),x.displacementMap&&(M.displacementMap.value=x.displacementMap,M.displacementScale.value=x.displacementScale,M.displacementBias.value=x.displacementBias),l.get(x).envMap&&(M.envMapIntensity.value=x.envMapIntensity)}return{refreshFogUniforms:function(M,x){M.fogColor.value.copy(x.color),x.isFog?(M.fogNear.value=x.near,M.fogFar.value=x.far):x.isFogExp2&&(M.fogDensity.value=x.density)},refreshMaterialUniforms:function(M,x,R,P,k){x.isMeshBasicMaterial?c(M,x):x.isMeshLambertMaterial?(c(M,x),function(M,x){x.emissiveMap&&(M.emissiveMap.value=x.emissiveMap)}(M,x)):x.isMeshToonMaterial?(c(M,x),function(M,x){x.gradientMap&&(M.gradientMap.value=x.gradientMap),x.emissiveMap&&(M.emissiveMap.value=x.emissiveMap),x.bumpMap&&(M.bumpMap.value=x.bumpMap,M.bumpScale.value=x.bumpScale,1===x.side&&(M.bumpScale.value*=-1)),x.normalMap&&(M.normalMap.value=x.normalMap,M.normalScale.value.copy(x.normalScale),1===x.side&&M.normalScale.value.negate()),x.displacementMap&&(M.displacementMap.value=x.displacementMap,M.displacementScale.value=x.displacementScale,M.displacementBias.value=x.displacementBias)}(M,x)):x.isMeshPhongMaterial?(c(M,x),function(M,x){M.specular.value.copy(x.specular),M.shininess.value=Math.max(x.shininess,1e-4),x.emissiveMap&&(M.emissiveMap.value=x.emissiveMap),x.bumpMap&&(M.bumpMap.value=x.bumpMap,M.bumpScale.value=x.bumpScale,1===x.side&&(M.bumpScale.value*=-1)),x.normalMap&&(M.normalMap.value=x.normalMap,M.normalScale.value.copy(x.normalScale),1===x.side&&M.normalScale.value.negate()),x.displacementMap&&(M.displacementMap.value=x.displacementMap,M.displacementScale.value=x.displacementScale,M.displacementBias.value=x.displacementBias)}(M,x)):x.isMeshStandardMaterial?(c(M,x),x.isMeshPhysicalMaterial?function(M,x,R){v(M,x),M.ior.value=x.ior,x.sheenTint&&M.sheenTint.value.copy(x.sheenTint),x.clearcoat>0&&(M.clearcoat.value=x.clearcoat,M.clearcoatRoughness.value=x.clearcoatRoughness,x.clearcoatMap&&(M.clearcoatMap.value=x.clearcoatMap),x.clearcoatRoughnessMap&&(M.clearcoatRoughnessMap.value=x.clearcoatRoughnessMap),x.clearcoatNormalMap&&(M.clearcoatNormalScale.value.copy(x.clearcoatNormalScale),M.clearcoatNormalMap.value=x.clearcoatNormalMap,1===x.side&&M.clearcoatNormalScale.value.negate())),x.transmission>0&&(M.transmission.value=x.transmission,M.transmissionSamplerMap.value=R.texture,M.transmissionSamplerSize.value.set(R.width,R.height),x.transmissionMap&&(M.transmissionMap.value=x.transmissionMap),M.thickness.value=x.thickness,x.thicknessMap&&(M.thicknessMap.value=x.thicknessMap),M.attenuationDistance.value=x.attenuationDistance,M.attenuationTint.value.copy(x.attenuationTint)),M.specularIntensity.value=x.specularIntensity,M.specularTint.value.copy(x.specularTint),x.specularIntensityMap&&(M.specularIntensityMap.value=x.specularIntensityMap),x.specularTintMap&&(M.specularTintMap.value=x.specularTintMap)}(M,x,k):v(M,x)):x.isMeshMatcapMaterial?(c(M,x),function(M,x){x.matcap&&(M.matcap.value=x.matcap),x.bumpMap&&(M.bumpMap.value=x.bumpMap,M.bumpScale.value=x.bumpScale,1===x.side&&(M.bumpScale.value*=-1)),x.normalMap&&(M.normalMap.value=x.normalMap,M.normalScale.value.copy(x.normalScale),1===x.side&&M.normalScale.value.negate()),x.displacementMap&&(M.displacementMap.value=x.displacementMap,M.displacementScale.value=x.displacementScale,M.displacementBias.value=x.displacementBias)}(M,x)):x.isMeshDepthMaterial?(c(M,x),function(M,x){x.displacementMap&&(M.displacementMap.value=x.displacementMap,M.displacementScale.value=x.displacementScale,M.displacementBias.value=x.displacementBias)}(M,x)):x.isMeshDistanceMaterial?(c(M,x),function(M,x){x.displacementMap&&(M.displacementMap.value=x.displacementMap,M.displacementScale.value=x.displacementScale,M.displacementBias.value=x.displacementBias),M.referencePosition.value.copy(x.referencePosition),M.nearDistance.value=x.nearDistance,M.farDistance.value=x.farDistance}(M,x)):x.isMeshNormalMaterial?(c(M,x),function(M,x){x.bumpMap&&(M.bumpMap.value=x.bumpMap,M.bumpScale.value=x.bumpScale,1===x.side&&(M.bumpScale.value*=-1)),x.normalMap&&(M.normalMap.value=x.normalMap,M.normalScale.value.copy(x.normalScale),1===x.side&&M.normalScale.value.negate()),x.displacementMap&&(M.displacementMap.value=x.displacementMap,M.displacementScale.value=x.displacementScale,M.displacementBias.value=x.displacementBias)}(M,x)):x.isLineBasicMaterial?(function(M,x){M.diffuse.value.copy(x.color),M.opacity.value=x.opacity}(M,x),x.isLineDashedMaterial&&function(M,x){M.dashSize.value=x.dashSize,M.totalSize.value=x.dashSize+x.gapSize,M.scale.value=x.scale}(M,x)):x.isPointsMaterial?function(M,x,R,P){let k;M.diffuse.value.copy(x.color),M.opacity.value=x.opacity,M.size.value=x.size*R,M.scale.value=.5*P,x.map&&(M.map.value=x.map),x.alphaMap&&(M.alphaMap.value=x.alphaMap),x.alphaTest>0&&(M.alphaTest.value=x.alphaTest),x.map?k=x.map:x.alphaMap&&(k=x.alphaMap),void 0!==k&&(!0===k.matrixAutoUpdate&&k.updateMatrix(),M.uvTransform.value.copy(k.matrix))}(M,x,R,P):x.isSpriteMaterial?function(M,x){let R;M.diffuse.value.copy(x.color),M.opacity.value=x.opacity,M.rotation.value=x.rotation,x.map&&(M.map.value=x.map),x.alphaMap&&(M.alphaMap.value=x.alphaMap),x.alphaTest>0&&(M.alphaTest.value=x.alphaTest),x.map?R=x.map:x.alphaMap&&(R=x.alphaMap),void 0!==R&&(!0===R.matrixAutoUpdate&&R.updateMatrix(),M.uvTransform.value.copy(R.matrix))}(M,x):x.isShadowMaterial?(M.color.value.copy(x.color),M.opacity.value=x.opacity):x.isShaderMaterial&&(x.uniformsNeedUpdate=!1)}}}function Mi(l={}){const a=void 0!==l.canvas?l.canvas:function(){const l=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");return l.style.display="block",l}(),o=void 0!==l.context?l.context:null,c=void 0!==l.alpha&&l.alpha,u=void 0===l.depth||l.depth,h=void 0===l.stencil||l.stencil,d=void 0!==l.antialias&&l.antialias,f=void 0===l.premultipliedAlpha||l.premultipliedAlpha,m=void 0!==l.preserveDrawingBuffer&&l.preserveDrawingBuffer,g=void 0!==l.powerPreference?l.powerPreference:"default",y=void 0!==l.failIfMajorPerformanceCaveat&&l.failIfMajorPerformanceCaveat;let v=null,_=null;const b=[],w=[];this.domElement=a,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.gammaFactor=2,this.outputEncoding=Ml,this.physicallyCorrectLights=!1,this.toneMapping=0,this.toneMappingExposure=1;const C=this;let E=!1,M=0,x=0,R=null,P=-1,k=null;const W=new Oi,U=new Oi;let K=null,Q=a.width,se=a.height,te=1,De=null,de=null;const ye=new Oi(0,0,Q,se),_e=new Oi(0,0,Q,se);let ue=!1;const ce=[],Re=new qI;let Oe=!1,Ae=!1,We=null;const Te=new An,He=new oe,Ue={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function ct(){return null===R?te:1}let Ye,Ct,Ot,Kt,it,ht,vt,tn,Ft,ge,ee,st,gt,Xt,Jt,Tn,Bt,En,pn,Pe,Gt,ot,rn,Ce=o;function xt(he,qe){for(let Fe=0;Fe<he.length;Fe++){const At=a.getContext(he[Fe],qe);if(null!==At)return At}return null}try{const he={alpha:c,depth:u,stencil:h,antialias:d,premultipliedAlpha:f,preserveDrawingBuffer:m,powerPreference:g,failIfMajorPerformanceCaveat:y};if(a.addEventListener("webglcontextlost",Ne,!1),a.addEventListener("webglcontextrestored",nn,!1),null===Ce){const qe=["webgl2","webgl","experimental-webgl"];if(!0===C.isWebGL1Renderer&&qe.shift(),Ce=xt(qe,he),null===Ce)throw xt(qe)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}void 0===Ce.getShaderPrecisionFormat&&(Ce.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(he){throw console.error("THREE.WebGLRenderer: "+he.message),he}function hn(){Ye=new LKe(Ce),Ct=new xKe(Ce,Ye,l),Ye.init(Ct),ot=new oQe(Ce,Ye,Ct),Ot=new iQe(Ce,Ye,Ct),ce[0]=1029,Kt=new FKe(Ce),it=new XJe,ht=new sQe(Ce,Ye,Ot,it,Ct,ot,Kt),vt=new MKe(C),tn=new PKe(C),Ft=new Y$e(Ce,Ct),rn=new wKe(Ce,Ye,Ft,Ct),ge=new OKe(Ce,Ft,Kt,rn),ee=new UKe(Ce,ge,Ft,Kt),pn=new BKe(Ce),Tn=new EKe(it),st=new qJe(C,vt,tn,Ye,Ct,rn,Tn),gt=new cQe(it),Xt=new YJe(it),Jt=new tQe(Ye,Ct),En=new TKe(C,vt,Ot,ee,f),Bt=new mre(C,ee,Ct),Pe=new CKe(Ce,Ye,Kt,Ct),Gt=new NKe(Ce,Ye,Kt,Ct),Kt.programs=st.programs,C.capabilities=Ct,C.extensions=Ye,C.properties=it,C.renderLists=Xt,C.shadowMap=Bt,C.state=Ot,C.info=Kt}hn();const gn=new lQe(C,Ce);function Ne(he){he.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),E=!0}function nn(){console.log("THREE.WebGLRenderer: Context Restored."),E=!1;const he=Kt.autoReset,qe=Bt.enabled,Fe=Bt.autoUpdate,rt=Bt.needsUpdate,At=Bt.type;hn(),Kt.autoReset=he,Bt.enabled=qe,Bt.autoUpdate=Fe,Bt.needsUpdate=rt,Bt.type=At}function Hr(he){const qe=he.target;qe.removeEventListener("dispose",Hr),function(he){(function(he){const qe=it.get(he).programs;void 0!==qe&&qe.forEach(function(Fe){st.releaseProgram(Fe)})})(he),it.remove(he)}(qe)}this.xr=gn,this.getContext=function(){return Ce},this.getContextAttributes=function(){return Ce.getContextAttributes()},this.forceContextLoss=function(){const he=Ye.get("WEBGL_lose_context");he&&he.loseContext()},this.forceContextRestore=function(){const he=Ye.get("WEBGL_lose_context");he&&he.restoreContext()},this.getPixelRatio=function(){return te},this.setPixelRatio=function(he){void 0!==he&&(te=he,this.setSize(Q,se,!1))},this.getSize=function(he){return he.set(Q,se)},this.setSize=function(he,qe,Fe){gn.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(Q=he,se=qe,a.width=Math.floor(he*te),a.height=Math.floor(qe*te),!1!==Fe&&(a.style.width=he+"px",a.style.height=qe+"px"),this.setViewport(0,0,he,qe))},this.getDrawingBufferSize=function(he){return he.set(Q*te,se*te).floor()},this.setDrawingBufferSize=function(he,qe,Fe){Q=he,se=qe,te=Fe,a.width=Math.floor(he*Fe),a.height=Math.floor(qe*Fe),this.setViewport(0,0,he,qe)},this.getCurrentViewport=function(he){return he.copy(W)},this.getViewport=function(he){return he.copy(ye)},this.setViewport=function(he,qe,Fe,rt){he.isVector4?ye.set(he.x,he.y,he.z,he.w):ye.set(he,qe,Fe,rt),Ot.viewport(W.copy(ye).multiplyScalar(te).floor())},this.getScissor=function(he){return he.copy(_e)},this.setScissor=function(he,qe,Fe,rt){he.isVector4?_e.set(he.x,he.y,he.z,he.w):_e.set(he,qe,Fe,rt),Ot.scissor(U.copy(_e).multiplyScalar(te).floor())},this.getScissorTest=function(){return ue},this.setScissorTest=function(he){Ot.setScissorTest(ue=he)},this.setOpaqueSort=function(he){De=he},this.setTransparentSort=function(he){de=he},this.getClearColor=function(he){return he.copy(En.getClearColor())},this.setClearColor=function(){En.setClearColor.apply(En,arguments)},this.getClearAlpha=function(){return En.getClearAlpha()},this.setClearAlpha=function(){En.setClearAlpha.apply(En,arguments)},this.clear=function(he,qe,Fe){let rt=0;(void 0===he||he)&&(rt|=16384),(void 0===qe||qe)&&(rt|=256),(void 0===Fe||Fe)&&(rt|=1024),Ce.clear(rt)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){a.removeEventListener("webglcontextlost",Ne,!1),a.removeEventListener("webglcontextrestored",nn,!1),Xt.dispose(),Jt.dispose(),it.dispose(),vt.dispose(),tn.dispose(),ee.dispose(),rn.dispose(),gn.dispose(),gn.removeEventListener("sessionstart",Mo),gn.removeEventListener("sessionend",uo),We&&(We.dispose(),We=null),Ma.stop()},this.renderBufferImmediate=function(he,qe){rn.initAttributes();const Fe=it.get(he);he.hasPositions&&!Fe.position&&(Fe.position=Ce.createBuffer()),he.hasNormals&&!Fe.normal&&(Fe.normal=Ce.createBuffer()),he.hasUvs&&!Fe.uv&&(Fe.uv=Ce.createBuffer()),he.hasColors&&!Fe.color&&(Fe.color=Ce.createBuffer());const rt=qe.getAttributes();he.hasPositions&&(Ce.bindBuffer(34962,Fe.position),Ce.bufferData(34962,he.positionArray,35048),rn.enableAttribute(rt.position.location),Ce.vertexAttribPointer(rt.position.location,3,5126,!1,0,0)),he.hasNormals&&(Ce.bindBuffer(34962,Fe.normal),Ce.bufferData(34962,he.normalArray,35048),rn.enableAttribute(rt.normal.location),Ce.vertexAttribPointer(rt.normal.location,3,5126,!1,0,0)),he.hasUvs&&(Ce.bindBuffer(34962,Fe.uv),Ce.bufferData(34962,he.uvArray,35048),rn.enableAttribute(rt.uv.location),Ce.vertexAttribPointer(rt.uv.location,2,5126,!1,0,0)),he.hasColors&&(Ce.bindBuffer(34962,Fe.color),Ce.bufferData(34962,he.colorArray,35048),rn.enableAttribute(rt.color.location),Ce.vertexAttribPointer(rt.color.location,3,5126,!1,0,0)),rn.disableUnusedAttributes(),Ce.drawArrays(4,0,he.count),he.count=0},this.renderBufferDirect=function(he,qe,Fe,rt,At,xn){null===qe&&(qe=Ue);const _n=At.isMesh&&At.matrixWorld.determinant()<0,Ln=dy(he,qe,rt,At);Ot.setMaterial(rt,_n);let wr=Fe.index;const Zr=Fe.attributes.position;if(null===wr){if(void 0===Zr||0===Zr.count)return}else if(0===wr.count)return;let jr=1;!0===rt.wireframe&&(wr=ge.getWireframeAttribute(Fe),jr=2),(void 0!==Fe.morphAttributes.position||void 0!==Fe.morphAttributes.normal)&&pn.update(At,Fe,rt,Ln),rn.setup(At,rt,Ln,Fe,wr);let Mr,ir=Pe;null!==wr&&(Mr=Ft.get(wr),ir=Gt,ir.setIndex(Mr));const Il=null!==wr?wr.count:Zr.count,Cs=Fe.drawRange.start*jr,$c=Fe.drawRange.count*jr,Rl=null!==xn?xn.start*jr:0,sd=null!==xn?xn.count*jr:1/0,od=Math.max(Cs,Rl),qs=Math.min(Il,Cs+$c,Rl+sd)-1,mc=Math.max(0,qs-od+1);if(0!==mc){if(At.isMesh)!0===rt.wireframe?(Ot.setLineWidth(rt.wireframeLinewidth*ct()),ir.setMode(1)):ir.setMode(4);else if(At.isLine){let Ls=rt.linewidth;void 0===Ls&&(Ls=1),Ot.setLineWidth(Ls*ct()),ir.setMode(At.isLineSegments?1:At.isLineLoop?2:3)}else At.isPoints?ir.setMode(0):At.isSprite&&ir.setMode(4);if(At.isInstancedMesh)ir.renderInstances(od,mc,At.count);else if(Fe.isInstancedBufferGeometry){const Ls=Math.min(Fe.instanceCount,Fe._maxInstanceCount);ir.renderInstances(od,mc,Ls)}else ir.render(od,mc)}},this.compile=function(he,qe){_=Jt.get(he),_.init(),w.push(_),he.traverseVisible(function(Fe){Fe.isLight&&Fe.layers.test(qe.layers)&&(_.pushLight(Fe),Fe.castShadow&&_.pushShadow(Fe))}),_.setupLights(C.physicallyCorrectLights),he.traverse(function(Fe){const rt=Fe.material;if(rt)if(Array.isArray(rt))for(let At=0;At<rt.length;At++)pc(rt[At],he,Fe);else pc(rt,he,Fe)}),w.pop(),_=null};let Dl=null;function Mo(){Ma.stop()}function uo(){Ma.start()}const Ma=new Fne;function fc(he,qe,Fe,rt){if(!1===he.visible)return;if(he.layers.test(qe.layers))if(he.isGroup)Fe=he.renderOrder;else if(he.isLOD)!0===he.autoUpdate&&he.update(qe);else if(he.isLight)_.pushLight(he),he.castShadow&&_.pushShadow(he);else if(he.isSprite){if(!he.frustumCulled||Re.intersectsSprite(he)){rt&&He.setFromMatrixPosition(he.matrixWorld).applyMatrix4(Te);const _n=ee.update(he),Ln=he.material;Ln.visible&&v.push(he,_n,Ln,Fe,He.z,null)}}else if(he.isImmediateRenderObject)rt&&He.setFromMatrixPosition(he.matrixWorld).applyMatrix4(Te),v.push(he,null,he.material,Fe,He.z,null);else if((he.isMesh||he.isLine||he.isPoints)&&(he.isSkinnedMesh&&he.skeleton.frame!==Kt.render.frame&&(he.skeleton.update(),he.skeleton.frame=Kt.render.frame),!he.frustumCulled||Re.intersectsObject(he))){rt&&He.setFromMatrixPosition(he.matrixWorld).applyMatrix4(Te);const _n=ee.update(he),Ln=he.material;if(Array.isArray(Ln)){const wr=_n.groups;for(let Zr=0,jr=wr.length;Zr<jr;Zr++){const Mr=wr[Zr],ir=Ln[Mr.materialIndex];ir&&ir.visible&&v.push(he,_n,ir,Fe,He.z,Mr)}}else Ln.visible&&v.push(he,_n,Ln,Fe,He.z,null)}const xn=he.children;for(let _n=0,Ln=xn.length;_n<Ln;_n++)fc(xn[_n],qe,Fe,rt)}function uy(he,qe,Fe,rt){const At=he.opaque,xn=he.transmissive,_n=he.transparent;_.setupLightsView(Fe),xn.length>0&&function(he,qe,Fe){null===We&&(We=new(!0===d&&!0===Ct.isWebGL2?Sne:Kh)(1024,1024,{generateMipmaps:!0,type:null!==ot.convert(A0)?A0:D0,minFilter:Fp,magFilter:oo,wrapS:sa,wrapT:sa}));const rt=C.getRenderTarget();C.setRenderTarget(We),C.clear();const At=C.toneMapping;C.toneMapping=0,Al(he,qe,Fe),C.toneMapping=At,ht.updateMultisampleRenderTarget(We),ht.updateRenderTargetMipmap(We),C.setRenderTarget(rt)}(At,qe,Fe),rt&&Ot.viewport(W.copy(rt)),At.length>0&&Al(At,qe,Fe),xn.length>0&&Al(xn,qe,Fe),_n.length>0&&Al(_n,qe,Fe)}function Al(he,qe,Fe){const rt=!0===qe.isScene?qe.overrideMaterial:null;for(let At=0,xn=he.length;At<xn;At++){const _n=he[At],Ln=_n.object,wr=_n.geometry,Zr=null===rt?_n.material:rt,jr=_n.group;Ln.layers.test(Fe.layers)&&$u(Ln,qe,Fe,wr,Zr,jr)}}function $u(he,qe,Fe,rt,At,xn){if(he.onBeforeRender(C,qe,Fe,rt,At,xn),he.modelViewMatrix.multiplyMatrices(Fe.matrixWorldInverse,he.matrixWorld),he.normalMatrix.getNormalMatrix(he.modelViewMatrix),he.isImmediateRenderObject){const _n=dy(Fe,qe,At,he);Ot.setMaterial(At),rn.reset(),function(he,qe){he.render(function(Fe){C.renderBufferImmediate(Fe,qe)})}(he,_n)}else!0===At.transparent&&2===At.side?(At.side=1,At.needsUpdate=!0,C.renderBufferDirect(Fe,qe,rt,At,he,xn),At.side=0,At.needsUpdate=!0,C.renderBufferDirect(Fe,qe,rt,At,he,xn),At.side=2):C.renderBufferDirect(Fe,qe,rt,At,he,xn);he.onAfterRender(C,qe,Fe,rt,At,xn)}function pc(he,qe,Fe){!0!==qe.isScene&&(qe=Ue);const rt=it.get(he),At=_.state.lights,_n=At.state.version,Ln=st.getParameters(he,At.state,_.state.shadowsArray,qe,Fe),wr=st.getProgramCacheKey(Ln);let Zr=rt.programs;rt.environment=he.isMeshStandardMaterial?qe.environment:null,rt.fog=qe.fog,rt.envMap=(he.isMeshStandardMaterial?tn:vt).get(he.envMap||rt.environment),void 0===Zr&&(he.addEventListener("dispose",Hr),Zr=new Map,rt.programs=Zr);let jr=Zr.get(wr);if(void 0!==jr){if(rt.currentProgram===jr&&rt.lightsStateVersion===_n)return hy(he,Ln),jr}else Ln.uniforms=st.getUniforms(he),he.onBuild(Ln,C),he.onBeforeCompile(Ln,C),jr=st.acquireProgram(Ln,wr),Zr.set(wr,jr),rt.uniforms=Ln.uniforms;const Mr=rt.uniforms;(!he.isShaderMaterial&&!he.isRawShaderMaterial||!0===he.clipping)&&(Mr.clippingPlanes=Tn.uniform),hy(he,Ln),rt.needsLights=function(he){return he.isMeshLambertMaterial||he.isMeshToonMaterial||he.isMeshPhongMaterial||he.isMeshStandardMaterial||he.isShadowMaterial||he.isShaderMaterial&&!0===he.lights}(he),rt.lightsStateVersion=_n,rt.needsLights&&(Mr.ambientLightColor.value=At.state.ambient,Mr.lightProbe.value=At.state.probe,Mr.directionalLights.value=At.state.directional,Mr.directionalLightShadows.value=At.state.directionalShadow,Mr.spotLights.value=At.state.spot,Mr.spotLightShadows.value=At.state.spotShadow,Mr.rectAreaLights.value=At.state.rectArea,Mr.ltc_1.value=At.state.rectAreaLTC1,Mr.ltc_2.value=At.state.rectAreaLTC2,Mr.pointLights.value=At.state.point,Mr.pointLightShadows.value=At.state.pointShadow,Mr.hemisphereLights.value=At.state.hemi,Mr.directionalShadowMap.value=At.state.directionalShadowMap,Mr.directionalShadowMatrix.value=At.state.directionalShadowMatrix,Mr.spotShadowMap.value=At.state.spotShadowMap,Mr.spotShadowMatrix.value=At.state.spotShadowMatrix,Mr.pointShadowMap.value=At.state.pointShadowMap,Mr.pointShadowMatrix.value=At.state.pointShadowMatrix);const ir=jr.getUniforms(),Il=$p.seqWithValue(ir.seq,Mr);return rt.currentProgram=jr,rt.uniformsList=Il,jr}function hy(he,qe){const Fe=it.get(he);Fe.outputEncoding=qe.outputEncoding,Fe.instancing=qe.instancing,Fe.skinning=qe.skinning,Fe.morphTargets=qe.morphTargets,Fe.morphNormals=qe.morphNormals,Fe.numClippingPlanes=qe.numClippingPlanes,Fe.numIntersection=qe.numClipIntersection,Fe.vertexAlphas=qe.vertexAlphas,Fe.vertexTangents=qe.vertexTangents}function dy(he,qe,Fe,rt){!0!==qe.isScene&&(qe=Ue),ht.resetTextureUnits();const At=qe.fog,_n=null===R?C.outputEncoding:R.texture.encoding,Ln=(Fe.isMeshStandardMaterial?tn:vt).get(Fe.envMap||(Fe.isMeshStandardMaterial?qe.environment:null)),wr=!0===Fe.vertexColors&&!!rt.geometry&&!!rt.geometry.attributes.color&&4===rt.geometry.attributes.color.itemSize,Zr=!!rt.geometry&&!!rt.geometry.attributes.tangent,jr=!!rt.geometry&&!!rt.geometry.morphAttributes.position,Mr=!!rt.geometry&&!!rt.geometry.morphAttributes.normal,ir=it.get(Fe),Il=_.state.lights;!0!==Oe||!0!==Ae&&he===k||Tn.setState(Fe,he,he===k&&Fe.id===P);let Cs=!1;Fe.version===ir.__version?(ir.needsLights&&ir.lightsStateVersion!==Il.state.version||ir.outputEncoding!==_n||rt.isInstancedMesh&&!1===ir.instancing||!rt.isInstancedMesh&&!0===ir.instancing||rt.isSkinnedMesh&&!1===ir.skinning||!rt.isSkinnedMesh&&!0===ir.skinning||ir.envMap!==Ln||Fe.fog&&ir.fog!==At||void 0!==ir.numClippingPlanes&&(ir.numClippingPlanes!==Tn.numPlanes||ir.numIntersection!==Tn.numIntersection)||ir.vertexAlphas!==wr||ir.vertexTangents!==Zr||ir.morphTargets!==jr||ir.morphNormals!==Mr)&&(Cs=!0):(Cs=!0,ir.__version=Fe.version);let $c=ir.currentProgram;!0===Cs&&($c=pc(Fe,qe,rt));let Rl=!1,sd=!1,od=!1;const qs=$c.getUniforms(),mc=ir.uniforms;if(Ot.useProgram($c.program)&&(Rl=!0,sd=!0,od=!0),Fe.id!==P&&(P=Fe.id,sd=!0),Rl||k!==he){if(qs.setValue(Ce,"projectionMatrix",he.projectionMatrix),Ct.logarithmicDepthBuffer&&qs.setValue(Ce,"logDepthBufFC",2/(Math.log(he.far+1)/Math.LN2)),k!==he&&(k=he,sd=!0,od=!0),Fe.isShaderMaterial||Fe.isMeshPhongMaterial||Fe.isMeshToonMaterial||Fe.isMeshStandardMaterial||Fe.envMap){const Ls=qs.map.cameraPosition;void 0!==Ls&&Ls.setValue(Ce,He.setFromMatrixPosition(he.matrixWorld))}(Fe.isMeshPhongMaterial||Fe.isMeshToonMaterial||Fe.isMeshLambertMaterial||Fe.isMeshBasicMaterial||Fe.isMeshStandardMaterial||Fe.isShaderMaterial)&&qs.setValue(Ce,"isOrthographic",!0===he.isOrthographicCamera),(Fe.isMeshPhongMaterial||Fe.isMeshToonMaterial||Fe.isMeshLambertMaterial||Fe.isMeshBasicMaterial||Fe.isMeshStandardMaterial||Fe.isShaderMaterial||Fe.isShadowMaterial||rt.isSkinnedMesh)&&qs.setValue(Ce,"viewMatrix",he.matrixWorldInverse)}if(rt.isSkinnedMesh){qs.setOptional(Ce,rt,"bindMatrix"),qs.setOptional(Ce,rt,"bindMatrixInverse");const Ls=rt.skeleton;Ls&&(Ct.floatVertexTextures?(null===Ls.boneTexture&&Ls.computeBoneTexture(),qs.setValue(Ce,"boneTexture",Ls.boneTexture,ht),qs.setValue(Ce,"boneTextureSize",Ls.boneTextureSize)):qs.setOptional(Ce,Ls,"boneMatrices"))}return(sd||ir.receiveShadow!==rt.receiveShadow)&&(ir.receiveShadow=rt.receiveShadow,qs.setValue(Ce,"receiveShadow",rt.receiveShadow)),sd&&(qs.setValue(Ce,"toneMappingExposure",C.toneMappingExposure),ir.needsLights&&function(he,qe){he.ambientLightColor.needsUpdate=qe,he.lightProbe.needsUpdate=qe,he.directionalLights.needsUpdate=qe,he.directionalLightShadows.needsUpdate=qe,he.pointLights.needsUpdate=qe,he.pointLightShadows.needsUpdate=qe,he.spotLights.needsUpdate=qe,he.spotLightShadows.needsUpdate=qe,he.rectAreaLights.needsUpdate=qe,he.hemisphereLights.needsUpdate=qe}(mc,od),At&&Fe.fog&&gt.refreshFogUniforms(mc,At),gt.refreshMaterialUniforms(mc,Fe,te,se,We),$p.upload(Ce,ir.uniformsList,mc,ht)),Fe.isShaderMaterial&&!0===Fe.uniformsNeedUpdate&&($p.upload(Ce,ir.uniformsList,mc,ht),Fe.uniformsNeedUpdate=!1),Fe.isSpriteMaterial&&qs.setValue(Ce,"center",rt.center),qs.setValue(Ce,"modelViewMatrix",rt.modelViewMatrix),qs.setValue(Ce,"normalMatrix",rt.normalMatrix),qs.setValue(Ce,"modelMatrix",rt.matrixWorld),$c}Ma.setAnimationLoop(function(he){Dl&&Dl(he)}),"undefined"!=typeof window&&Ma.setContext(window),this.setAnimationLoop=function(he){Dl=he,gn.setAnimationLoop(he),null===he?Ma.stop():Ma.start()},gn.addEventListener("sessionstart",Mo),gn.addEventListener("sessionend",uo),this.render=function(he,qe){if(void 0===qe||!0===qe.isCamera){if(!0!==E){if(!0===he.autoUpdate&&he.updateMatrixWorld(),null===qe.parent&&qe.updateMatrixWorld(),!0===gn.enabled&&!0===gn.isPresenting&&(!0===gn.cameraAutoUpdate&&gn.updateCamera(qe),qe=gn.getCamera()),!0===he.isScene&&he.onBeforeRender(C,he,qe,R),_=Jt.get(he,w.length),_.init(),w.push(_),Te.multiplyMatrices(qe.projectionMatrix,qe.matrixWorldInverse),Re.setFromProjectionMatrix(Te),Ae=this.localClippingEnabled,Oe=Tn.init(this.clippingPlanes,Ae,qe),v=Xt.get(he,b.length),v.init(),b.push(v),fc(he,qe,0,C.sortObjects),v.finish(),!0===C.sortObjects&&v.sort(De,de),!0===Oe&&Tn.beginShadows(),Bt.render(_.state.shadowsArray,he,qe),!0===Oe&&Tn.endShadows(),!0===this.info.autoReset&&this.info.reset(),En.render(v,he),_.setupLights(C.physicallyCorrectLights),qe.isArrayCamera){const rt=qe.cameras;for(let At=0,xn=rt.length;At<xn;At++){const _n=rt[At];uy(v,he,_n,_n.viewport)}}else uy(v,he,qe);null!==R&&(ht.updateMultisampleRenderTarget(R),ht.updateRenderTargetMipmap(R)),!0===he.isScene&&he.onAfterRender(C,he,qe),Ot.buffers.depth.setTest(!0),Ot.buffers.depth.setMask(!0),Ot.buffers.color.setMask(!0),Ot.setPolygonOffset(!1),rn.resetDefaultState(),P=-1,k=null,w.pop(),_=w.length>0?w[w.length-1]:null,b.pop(),v=b.length>0?b[b.length-1]:null}}else console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.")},this.getActiveCubeFace=function(){return M},this.getActiveMipmapLevel=function(){return x},this.getRenderTarget=function(){return R},this.setRenderTarget=function(he,qe=0,Fe=0){R=he,M=qe,x=Fe,he&&void 0===it.get(he).__webglFramebuffer&&ht.setupRenderTarget(he);let rt=null,At=!1,xn=!1;if(he){const Ln=he.texture;(Ln.isDataTexture3D||Ln.isDataTexture2DArray)&&(xn=!0);const wr=it.get(he).__webglFramebuffer;he.isWebGLCubeRenderTarget?(rt=wr[qe],At=!0):rt=he.isWebGLMultisampleRenderTarget?it.get(he).__webglMultisampledFramebuffer:wr,W.copy(he.viewport),U.copy(he.scissor),K=he.scissorTest}else W.copy(ye).multiplyScalar(te).floor(),U.copy(_e).multiplyScalar(te).floor(),K=ue;if(Ot.bindFramebuffer(36160,rt)&&Ct.drawBuffers){let Ln=!1;if(he)if(he.isWebGLMultipleRenderTargets){const wr=he.texture;if(ce.length!==wr.length||36064!==ce[0]){for(let Zr=0,jr=wr.length;Zr<jr;Zr++)ce[Zr]=36064+Zr;ce.length=wr.length,Ln=!0}}else(1!==ce.length||36064!==ce[0])&&(ce[0]=36064,ce.length=1,Ln=!0);else(1!==ce.length||1029!==ce[0])&&(ce[0]=1029,ce.length=1,Ln=!0);Ln&&(Ct.isWebGL2?Ce.drawBuffers(ce):Ye.get("WEBGL_draw_buffers").drawBuffersWEBGL(ce))}if(Ot.viewport(W),Ot.scissor(U),Ot.setScissorTest(K),At){const Ln=it.get(he.texture);Ce.framebufferTexture2D(36160,36064,34069+qe,Ln.__webglTexture,Fe)}else if(xn){const Ln=it.get(he.texture);Ce.framebufferTextureLayer(36160,36064,Ln.__webglTexture,Fe||0,qe||0)}P=-1},this.readRenderTargetPixels=function(he,qe,Fe,rt,At,xn,_n){if(!he||!he.isWebGLRenderTarget)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let Ln=it.get(he).__webglFramebuffer;if(he.isWebGLCubeRenderTarget&&void 0!==_n&&(Ln=Ln[_n]),Ln){Ot.bindFramebuffer(36160,Ln);try{const wr=he.texture,Zr=wr.format,jr=wr.type;if(Zr!==El&&ot.convert(Zr)!==Ce.getParameter(35739))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");const Mr=jr===A0&&(Ye.has("EXT_color_buffer_half_float")||Ct.isWebGL2&&Ye.has("EXT_color_buffer_float"));if(!(jr===D0||ot.convert(jr)===Ce.getParameter(35738)||jr===kp&&(Ct.isWebGL2||Ye.has("OES_texture_float")||Ye.has("WEBGL_color_buffer_float"))||Mr))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");36053===Ce.checkFramebufferStatus(36160)?qe>=0&&qe<=he.width-rt&&Fe>=0&&Fe<=he.height-At&&Ce.readPixels(qe,Fe,rt,At,ot.convert(Zr),ot.convert(jr),xn):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.")}finally{const wr=null!==R?it.get(R).__webglFramebuffer:null;Ot.bindFramebuffer(36160,wr)}}},this.copyFramebufferToTexture=function(he,qe,Fe=0){const rt=Math.pow(2,-Fe),At=Math.floor(qe.image.width*rt),xn=Math.floor(qe.image.height*rt);let _n=ot.convert(qe.format);Ct.isWebGL2&&(6407===_n&&(_n=32849),6408===_n&&(_n=32856)),ht.setTexture2D(qe,0),Ce.copyTexImage2D(3553,Fe,_n,he.x,he.y,At,xn,0),Ot.unbindTexture()},this.copyTextureToTexture=function(he,qe,Fe,rt=0){const At=qe.image.width,xn=qe.image.height,_n=ot.convert(Fe.format),Ln=ot.convert(Fe.type);ht.setTexture2D(Fe,0),Ce.pixelStorei(37440,Fe.flipY),Ce.pixelStorei(37441,Fe.premultiplyAlpha),Ce.pixelStorei(3317,Fe.unpackAlignment),qe.isDataTexture?Ce.texSubImage2D(3553,rt,he.x,he.y,At,xn,_n,Ln,qe.image.data):qe.isCompressedTexture?Ce.compressedTexSubImage2D(3553,rt,he.x,he.y,qe.mipmaps[0].width,qe.mipmaps[0].height,_n,qe.mipmaps[0].data):Ce.texSubImage2D(3553,rt,he.x,he.y,_n,Ln,qe.image),0===rt&&Fe.generateMipmaps&&Ce.generateMipmap(3553),Ot.unbindTexture()},this.copyTextureToTexture3D=function(he,qe,Fe,rt,At=0){if(C.isWebGL1Renderer)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");const xn=he.max.x-he.min.x+1,_n=he.max.y-he.min.y+1,Ln=he.max.z-he.min.z+1,wr=ot.convert(rt.format),Zr=ot.convert(rt.type);let jr;if(rt.isDataTexture3D)ht.setTexture3D(rt,0),jr=32879;else{if(!rt.isDataTexture2DArray)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");ht.setTexture2DArray(rt,0),jr=35866}Ce.pixelStorei(37440,rt.flipY),Ce.pixelStorei(37441,rt.premultiplyAlpha),Ce.pixelStorei(3317,rt.unpackAlignment);const Mr=Ce.getParameter(3314),ir=Ce.getParameter(32878),Il=Ce.getParameter(3316),Cs=Ce.getParameter(3315),$c=Ce.getParameter(32877),Rl=Fe.isCompressedTexture?Fe.mipmaps[0]:Fe.image;Ce.pixelStorei(3314,Rl.width),Ce.pixelStorei(32878,Rl.height),Ce.pixelStorei(3316,he.min.x),Ce.pixelStorei(3315,he.min.y),Ce.pixelStorei(32877,he.min.z),Fe.isDataTexture||Fe.isDataTexture3D?Ce.texSubImage3D(jr,At,qe.x,qe.y,qe.z,xn,_n,Ln,wr,Zr,Rl.data):Fe.isCompressedTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),Ce.compressedTexSubImage3D(jr,At,qe.x,qe.y,qe.z,xn,_n,Ln,wr,Rl.data)):Ce.texSubImage3D(jr,At,qe.x,qe.y,qe.z,xn,_n,Ln,wr,Zr,Rl),Ce.pixelStorei(3314,Mr),Ce.pixelStorei(32878,ir),Ce.pixelStorei(3316,Il),Ce.pixelStorei(3315,Cs),Ce.pixelStorei(32877,$c),0===At&&rt.generateMipmaps&&Ce.generateMipmap(jr),Ot.unbindTexture()},this.initTexture=function(he){ht.setTexture2D(he,0),Ot.unbindTexture()},this.resetState=function(){M=0,x=0,R=null,Ot.reset(),rn.reset()},"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}(class extends Mi{}).prototype.isWebGL1Renderer=!0;class YI{constructor(a,o=25e-5){this.name="",this.color=new Zt(a),this.density=o}clone(){return new YI(this.color,this.density)}toJSON(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}}YI.prototype.isFogExp2=!0;class ZI{constructor(a,o=1,c=1e3){this.name="",this.color=new Zt(a),this.near=o,this.far=c}clone(){return new ZI(this.color,this.near,this.far)}toJSON(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}ZI.prototype.isFog=!0;class Bw extends ui{constructor(){super(),this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0,"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(a,o){return super.copy(a,o),null!==a.background&&(this.background=a.background.clone()),null!==a.environment&&(this.environment=a.environment.clone()),null!==a.fog&&(this.fog=a.fog.clone()),null!==a.overrideMaterial&&(this.overrideMaterial=a.overrideMaterial.clone()),this.autoUpdate=a.autoUpdate,this.matrixAutoUpdate=a.matrixAutoUpdate,this}toJSON(a){const o=super.toJSON(a);return null!==this.fog&&(o.object.fog=this.fog.toJSON()),o}}Bw.prototype.isScene=!0;class Zg{constructor(a,o){this.array=a,this.stride=o,this.count=void 0!==a?a.length/o:0,this.usage=xw,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=sc()}onUploadCallback(){}set needsUpdate(a){!0===a&&this.version++}setUsage(a){return this.usage=a,this}copy(a){return this.array=new a.array.constructor(a.array),this.count=a.count,this.stride=a.stride,this.usage=a.usage,this}copyAt(a,o,c){a*=this.stride,c*=o.stride;for(let u=0,h=this.stride;u<h;u++)this.array[a+u]=o.array[c+u];return this}set(a,o=0){return this.array.set(a,o),this}clone(a){void 0===a.arrayBuffers&&(a.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=sc()),void 0===a.arrayBuffers[this.array.buffer._uuid]&&(a.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const o=new this.array.constructor(a.arrayBuffers[this.array.buffer._uuid]),c=new this.constructor(o,this.stride);return c.setUsage(this.usage),c}onUpload(a){return this.onUploadCallback=a,this}toJSON(a){return void 0===a.arrayBuffers&&(a.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=sc()),void 0===a.arrayBuffers[this.array.buffer._uuid]&&(a.arrayBuffers[this.array.buffer._uuid]=Array.prototype.slice.call(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}Zg.prototype.isInterleavedBuffer=!0;const js=new oe;class Yp{constructor(a,o,c,u=!1){this.name="",this.data=a,this.itemSize=o,this.offset=c,this.normalized=!0===u}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(a){this.data.needsUpdate=a}applyMatrix4(a){for(let o=0,c=this.data.count;o<c;o++)js.x=this.getX(o),js.y=this.getY(o),js.z=this.getZ(o),js.applyMatrix4(a),this.setXYZ(o,js.x,js.y,js.z);return this}applyNormalMatrix(a){for(let o=0,c=this.count;o<c;o++)js.x=this.getX(o),js.y=this.getY(o),js.z=this.getZ(o),js.applyNormalMatrix(a),this.setXYZ(o,js.x,js.y,js.z);return this}transformDirection(a){for(let o=0,c=this.count;o<c;o++)js.x=this.getX(o),js.y=this.getY(o),js.z=this.getZ(o),js.transformDirection(a),this.setXYZ(o,js.x,js.y,js.z);return this}setX(a,o){return this.data.array[a*this.data.stride+this.offset]=o,this}setY(a,o){return this.data.array[a*this.data.stride+this.offset+1]=o,this}setZ(a,o){return this.data.array[a*this.data.stride+this.offset+2]=o,this}setW(a,o){return this.data.array[a*this.data.stride+this.offset+3]=o,this}getX(a){return this.data.array[a*this.data.stride+this.offset]}getY(a){return this.data.array[a*this.data.stride+this.offset+1]}getZ(a){return this.data.array[a*this.data.stride+this.offset+2]}getW(a){return this.data.array[a*this.data.stride+this.offset+3]}setXY(a,o,c){return this.data.array[(a=a*this.data.stride+this.offset)+0]=o,this.data.array[a+1]=c,this}setXYZ(a,o,c,u){return this.data.array[(a=a*this.data.stride+this.offset)+0]=o,this.data.array[a+1]=c,this.data.array[a+2]=u,this}setXYZW(a,o,c,u,h){return this.data.array[(a=a*this.data.stride+this.offset)+0]=o,this.data.array[a+1]=c,this.data.array[a+2]=u,this.data.array[a+3]=h,this}clone(a){if(void 0===a){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interlaved buffer attribute will deinterleave buffer data.");const o=[];for(let c=0;c<this.count;c++){const u=c*this.data.stride+this.offset;for(let h=0;h<this.itemSize;h++)o.push(this.data.array[u+h])}return new Ei(new this.array.constructor(o),this.itemSize,this.normalized)}return void 0===a.interleavedBuffers&&(a.interleavedBuffers={}),void 0===a.interleavedBuffers[this.data.uuid]&&(a.interleavedBuffers[this.data.uuid]=this.data.clone(a)),new Yp(a.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(a){if(void 0===a){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interlaved buffer attribute will deinterleave buffer data.");const o=[];for(let c=0;c<this.count;c++){const u=c*this.data.stride+this.offset;for(let h=0;h<this.itemSize;h++)o.push(this.data.array[u+h])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:o,normalized:this.normalized}}return void 0===a.interleavedBuffers&&(a.interleavedBuffers={}),void 0===a.interleavedBuffers[this.data.uuid]&&(a.interleavedBuffers[this.data.uuid]=this.data.toJSON(a)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}Yp.prototype.isInterleavedBufferAttribute=!0;class UB extends Eo{constructor(a){super(),this.type="SpriteMaterial",this.color=new Zt(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.setValues(a)}copy(a){return super.copy(a),this.color.copy(a.color),this.map=a.map,this.alphaMap=a.alphaMap,this.rotation=a.rotation,this.sizeAttenuation=a.sizeAttenuation,this}}let nb;UB.prototype.isSpriteMaterial=!0;const Uw=new oe,rb=new oe,ib=new oe,sb=new St,Gw=new St,yre=new An,KI=new oe,zw=new oe,JI=new oe,vre=new St,GB=new St,_re=new St;function QI(l,a,o,c,u,h){sb.subVectors(l,o).addScalar(.5).multiply(c),void 0!==u?(Gw.x=h*sb.x-u*sb.y,Gw.y=u*sb.x+h*sb.y):Gw.copy(sb),l.copy(a),l.x+=Gw.x,l.y+=Gw.y,l.applyMatrix4(yre)}(class extends ui{constructor(a){if(super(),this.type="Sprite",void 0===nb){nb=new Kn;const o=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),c=new Zg(o,5);nb.setIndex([0,1,2,0,2,3]),nb.setAttribute("position",new Yp(c,3,0,!1)),nb.setAttribute("uv",new Yp(c,2,3,!1))}this.geometry=nb,this.material=void 0!==a?a:new UB,this.center=new St(.5,.5)}raycast(a,o){null===a.camera&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),rb.setFromMatrixScale(this.matrixWorld),yre.copy(a.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(a.camera.matrixWorldInverse,this.matrixWorld),ib.setFromMatrixPosition(this.modelViewMatrix),a.camera.isPerspectiveCamera&&!1===this.material.sizeAttenuation&&rb.multiplyScalar(-ib.z);const c=this.material.rotation;let u,h;0!==c&&(h=Math.cos(c),u=Math.sin(c));const d=this.center;QI(KI.set(-.5,-.5,0),ib,d,rb,u,h),QI(zw.set(.5,-.5,0),ib,d,rb,u,h),QI(JI.set(.5,.5,0),ib,d,rb,u,h),vre.set(0,0),GB.set(1,0),_re.set(1,1);let f=a.ray.intersectTriangle(KI,zw,JI,!1,Uw);if(null===f&&(QI(zw.set(-.5,.5,0),ib,d,rb,u,h),GB.set(0,1),f=a.ray.intersectTriangle(KI,JI,zw,!1,Uw),null===f))return;const m=a.ray.origin.distanceTo(Uw);m<a.near||m>a.far||o.push({distance:m,point:Uw.clone(),uv:lo.getUV(Uw,KI,zw,JI,vre,GB,_re,new St),face:null,object:this})}copy(a){return super.copy(a),void 0!==a.center&&this.center.copy(a.center),this.material=a.material,this}}).prototype.isSprite=!0;const Sre=new oe,Tre=new Oi,wre=new Oi,fQe=new oe,Cre=new An;class tR extends Hs{constructor(a,o){super(a,o),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new An,this.bindMatrixInverse=new An}copy(a){return super.copy(a),this.bindMode=a.bindMode,this.bindMatrix.copy(a.bindMatrix),this.bindMatrixInverse.copy(a.bindMatrixInverse),this.skeleton=a.skeleton,this}bind(a,o){this.skeleton=a,void 0===o&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),o=this.matrixWorld),this.bindMatrix.copy(o),this.bindMatrixInverse.copy(o).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const a=new Oi,o=this.geometry.attributes.skinWeight;for(let c=0,u=o.count;c<u;c++){a.x=o.getX(c),a.y=o.getY(c),a.z=o.getZ(c),a.w=o.getW(c);const h=1/a.manhattanLength();h!==1/0?a.multiplyScalar(h):a.set(1,0,0,0),o.setXYZW(c,a.x,a.y,a.z,a.w)}}updateMatrixWorld(a){super.updateMatrixWorld(a),"attached"===this.bindMode?this.bindMatrixInverse.copy(this.matrixWorld).invert():"detached"===this.bindMode?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}boneTransform(a,o){const c=this.skeleton,u=this.geometry;Tre.fromBufferAttribute(u.attributes.skinIndex,a),wre.fromBufferAttribute(u.attributes.skinWeight,a),Sre.fromBufferAttribute(u.attributes.position,a).applyMatrix4(this.bindMatrix),o.set(0,0,0);for(let h=0;h<4;h++){const d=wre.getComponent(h);if(0!==d){const f=Tre.getComponent(h);Cre.multiplyMatrices(c.bones[f].matrixWorld,c.boneInverses[f]),o.addScaledVector(fQe.copy(Sre).applyMatrix4(Cre),d)}}return o.applyMatrix4(this.bindMatrixInverse)}}tR.prototype.isSkinnedMesh=!0;class nR extends ui{constructor(){super(),this.type="Bone"}}nR.prototype.isBone=!0;class ob extends Co{constructor(a=null,o=1,c=1,u,h,d,f,m,g=oo,y=oo,v,_){super(null,d,f,m,g,y,u,h,v,_),this.image={data:a,width:o,height:c},this.magFilter=g,this.minFilter=y,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.needsUpdate=!0}}ob.prototype.isDataTexture=!0;const xre=new An,pQe=new An;class rR{constructor(a=[],o=[]){this.uuid=sc(),this.bones=a.slice(0),this.boneInverses=o,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.frame=-1,this.init()}init(){const a=this.bones,o=this.boneInverses;if(this.boneMatrices=new Float32Array(16*a.length),0===o.length)this.calculateInverses();else if(a.length!==o.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let c=0,u=this.bones.length;c<u;c++)this.boneInverses.push(new An)}}calculateInverses(){this.boneInverses.length=0;for(let a=0,o=this.bones.length;a<o;a++){const c=new An;this.bones[a]&&c.copy(this.bones[a].matrixWorld).invert(),this.boneInverses.push(c)}}pose(){for(let a=0,o=this.bones.length;a<o;a++){const c=this.bones[a];c&&c.matrixWorld.copy(this.boneInverses[a]).invert()}for(let a=0,o=this.bones.length;a<o;a++){const c=this.bones[a];c&&(c.parent&&c.parent.isBone?(c.matrix.copy(c.parent.matrixWorld).invert(),c.matrix.multiply(c.matrixWorld)):c.matrix.copy(c.matrixWorld),c.matrix.decompose(c.position,c.quaternion,c.scale))}}update(){const a=this.bones,o=this.boneInverses,c=this.boneMatrices,u=this.boneTexture;for(let h=0,d=a.length;h<d;h++)xre.multiplyMatrices(a[h]?a[h].matrixWorld:pQe,o[h]),xre.toArray(c,16*h);null!==u&&(u.needsUpdate=!0)}clone(){return new rR(this.bones,this.boneInverses)}computeBoneTexture(){let a=Math.sqrt(4*this.bones.length);a=_ne(a),a=Math.max(a,4);const o=new Float32Array(a*a*4);o.set(this.boneMatrices);const c=new ob(o,a,a,El,kp);return this.boneMatrices=o,this.boneTexture=c,this.boneTextureSize=a,this}getBoneByName(a){for(let o=0,c=this.bones.length;o<c;o++){const u=this.bones[o];if(u.name===a)return u}}dispose(){null!==this.boneTexture&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(a,o){this.uuid=a.uuid;for(let c=0,u=a.bones.length;c<u;c++){const h=a.bones[c];let d=o[h];void 0===d&&(console.warn("THREE.Skeleton: No bone found with UUID:",h),d=new nR),this.bones.push(d),this.boneInverses.push((new An).fromArray(a.boneInverses[c]))}return this.init(),this}toJSON(){const a={metadata:{version:4.5,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};a.uuid=this.uuid;const o=this.bones,c=this.boneInverses;for(let u=0,h=o.length;u<h;u++)a.bones.push(o[u].uuid),a.boneInverses.push(c[u].toArray());return a}}class ab extends Ei{constructor(a,o,c,u=1){"number"==typeof c&&(u=c,c=!1,console.error("THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument.")),super(a,o,c),this.meshPerAttribute=u}copy(a){return super.copy(a),this.meshPerAttribute=a.meshPerAttribute,this}toJSON(){const a=super.toJSON();return a.meshPerAttribute=this.meshPerAttribute,a.isInstancedBufferAttribute=!0,a}}ab.prototype.isInstancedBufferAttribute=!0;const Ere=new An,Mre=new An,iR=[],Hw=new Hs;(class extends Hs{constructor(a,o,c){super(a,o),this.instanceMatrix=new ab(new Float32Array(16*c),16),this.instanceColor=null,this.count=c,this.frustumCulled=!1}copy(a){return super.copy(a),this.instanceMatrix.copy(a.instanceMatrix),null!==a.instanceColor&&(this.instanceColor=a.instanceColor.clone()),this.count=a.count,this}getColorAt(a,o){o.fromArray(this.instanceColor.array,3*a)}getMatrixAt(a,o){o.fromArray(this.instanceMatrix.array,16*a)}raycast(a,o){const c=this.matrixWorld,u=this.count;if(Hw.geometry=this.geometry,Hw.material=this.material,void 0!==Hw.material)for(let h=0;h<u;h++){this.getMatrixAt(h,Ere),Mre.multiplyMatrices(c,Ere),Hw.matrixWorld=Mre,Hw.raycast(a,iR);for(let d=0,f=iR.length;d<f;d++){const m=iR[d];m.instanceId=h,m.object=this,o.push(m)}iR.length=0}}setColorAt(a,o){null===this.instanceColor&&(this.instanceColor=new ab(new Float32Array(3*this.instanceMatrix.count),3)),o.toArray(this.instanceColor.array,3*a)}setMatrixAt(a,o){o.toArray(this.instanceMatrix.array,16*a)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}).prototype.isInstancedMesh=!0;class jo extends Eo{constructor(a){super(),this.type="LineBasicMaterial",this.color=new Zt(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.setValues(a)}copy(a){return super.copy(a),this.color.copy(a.color),this.linewidth=a.linewidth,this.linecap=a.linecap,this.linejoin=a.linejoin,this}}jo.prototype.isLineBasicMaterial=!0;const Are=new oe,Ire=new oe,Rre=new An,HB=new Xg,sR=new Gp;class Zp extends ui{constructor(a=new Kn,o=new jo){super(),this.type="Line",this.geometry=a,this.material=o,this.updateMorphTargets()}copy(a){return super.copy(a),this.material=a.material,this.geometry=a.geometry,this}computeLineDistances(){const a=this.geometry;if(a.isBufferGeometry)if(null===a.index){const o=a.attributes.position,c=[0];for(let u=1,h=o.count;u<h;u++)Are.fromBufferAttribute(o,u-1),Ire.fromBufferAttribute(o,u),c[u]=c[u-1],c[u]+=Are.distanceTo(Ire);a.setAttribute("lineDistance",new wn(c,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else a.isGeometry&&console.error("THREE.Line.computeLineDistances() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");return this}raycast(a,o){const c=this.geometry,u=this.matrixWorld,h=a.params.Line.threshold,d=c.drawRange;if(null===c.boundingSphere&&c.computeBoundingSphere(),sR.copy(c.boundingSphere),sR.applyMatrix4(u),sR.radius+=h,!1===a.ray.intersectsSphere(sR))return;Rre.copy(u).invert(),HB.copy(a.ray).applyMatrix4(Rre);const f=h/((this.scale.x+this.scale.y+this.scale.z)/3),m=f*f,g=new oe,y=new oe,v=new oe,_=new oe,b=this.isLineSegments?2:1;if(c.isBufferGeometry){const w=c.index,E=c.attributes.position;if(null!==w)for(let R=Math.max(0,d.start),P=Math.min(w.count,d.start+d.count)-1;R<P;R+=b){const k=w.getX(R),W=w.getX(R+1);if(g.fromBufferAttribute(E,k),y.fromBufferAttribute(E,W),HB.distanceSqToSegment(g,y,_,v)>m)continue;_.applyMatrix4(this.matrixWorld);const K=a.ray.origin.distanceTo(_);K<a.near||K>a.far||o.push({distance:K,point:v.clone().applyMatrix4(this.matrixWorld),index:R,face:null,faceIndex:null,object:this})}else for(let R=Math.max(0,d.start),P=Math.min(E.count,d.start+d.count)-1;R<P;R+=b){if(g.fromBufferAttribute(E,R),y.fromBufferAttribute(E,R+1),HB.distanceSqToSegment(g,y,_,v)>m)continue;_.applyMatrix4(this.matrixWorld);const W=a.ray.origin.distanceTo(_);W<a.near||W>a.far||o.push({distance:W,point:v.clone().applyMatrix4(this.matrixWorld),index:R,face:null,faceIndex:null,object:this})}}else c.isGeometry&&console.error("THREE.Line.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}updateMorphTargets(){const a=this.geometry;if(a.isBufferGeometry){const o=a.morphAttributes,c=Object.keys(o);if(c.length>0){const u=o[c[0]];if(void 0!==u){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let h=0,d=u.length;h<d;h++){const f=u[h].name||String(h);this.morphTargetInfluences.push(0),this.morphTargetDictionary[f]=h}}}}else{const o=a.morphTargets;void 0!==o&&o.length>0&&console.error("THREE.Line.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}}Zp.prototype.isLine=!0;const Pre=new oe,Lre=new oe;class _f extends Zp{constructor(a,o){super(a,o),this.type="LineSegments"}computeLineDistances(){const a=this.geometry;if(a.isBufferGeometry)if(null===a.index){const o=a.attributes.position,c=[];for(let u=0,h=o.count;u<h;u+=2)Pre.fromBufferAttribute(o,u),Lre.fromBufferAttribute(o,u+1),c[u]=0===u?0:c[u-1],c[u+1]=c[u]+Pre.distanceTo(Lre);a.setAttribute("lineDistance",new wn(c,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else a.isGeometry&&console.error("THREE.LineSegments.computeLineDistances() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");return this}}_f.prototype.isLineSegments=!0;class jB extends Zp{constructor(a,o){super(a,o),this.type="LineLoop"}}jB.prototype.isLineLoop=!0;class Kg extends Eo{constructor(a){super(),this.type="PointsMaterial",this.color=new Zt(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.setValues(a)}copy(a){return super.copy(a),this.color.copy(a.color),this.map=a.map,this.alphaMap=a.alphaMap,this.size=a.size,this.sizeAttenuation=a.sizeAttenuation,this}}Kg.prototype.isPointsMaterial=!0;const Ore=new An,WB=new Xg,oR=new Gp,aR=new oe;class jw extends ui{constructor(a=new Kn,o=new Kg){super(),this.type="Points",this.geometry=a,this.material=o,this.updateMorphTargets()}copy(a){return super.copy(a),this.material=a.material,this.geometry=a.geometry,this}raycast(a,o){const c=this.geometry,u=this.matrixWorld,h=a.params.Points.threshold,d=c.drawRange;if(null===c.boundingSphere&&c.computeBoundingSphere(),oR.copy(c.boundingSphere),oR.applyMatrix4(u),oR.radius+=h,!1===a.ray.intersectsSphere(oR))return;Ore.copy(u).invert(),WB.copy(a.ray).applyMatrix4(Ore);const f=h/((this.scale.x+this.scale.y+this.scale.z)/3),m=f*f;if(c.isBufferGeometry){const g=c.index,v=c.attributes.position;if(null!==g)for(let w=Math.max(0,d.start),C=Math.min(g.count,d.start+d.count);w<C;w++){const E=g.getX(w);aR.fromBufferAttribute(v,E),Nre(aR,E,m,u,a,o,this)}else for(let w=Math.max(0,d.start),C=Math.min(v.count,d.start+d.count);w<C;w++)aR.fromBufferAttribute(v,w),Nre(aR,w,m,u,a,o,this)}else console.error("THREE.Points.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}updateMorphTargets(){const a=this.geometry;if(a.isBufferGeometry){const o=a.morphAttributes,c=Object.keys(o);if(c.length>0){const u=o[c[0]];if(void 0!==u){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let h=0,d=u.length;h<d;h++){const f=u[h].name||String(h);this.morphTargetInfluences.push(0),this.morphTargetDictionary[f]=h}}}}else{const o=a.morphTargets;void 0!==o&&o.length>0&&console.error("THREE.Points.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}}function Nre(l,a,o,c,u,h,d){const f=WB.distanceSqToPoint(l);if(f<o){const m=new oe;WB.closestPointToPoint(l,m),m.applyMatrix4(c);const g=u.ray.origin.distanceTo(m);if(g<u.near||g>u.far)return;h.push({distance:g,distanceToRay:Math.sqrt(f),point:m,index:a,face:null,object:d})}}jw.prototype.isPoints=!0,class extends Co{constructor(a,o,c,u,h,d,f,m,g){super(a,o,c,u,h,d,f,m,g),this.format=void 0!==f?f:Zh,this.minFilter=void 0!==d?d:ao,this.magFilter=void 0!==h?h:ao,this.generateMipmaps=!1;const y=this;"requestVideoFrameCallback"in a&&a.requestVideoFrameCallback(function v(){y.needsUpdate=!0,a.requestVideoFrameCallback(v)})}clone(){return new this.constructor(this.image).copy(this)}update(){const a=this.image;"requestVideoFrameCallback"in a==0&&a.readyState>=a.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}.prototype.isVideoTexture=!0;(class extends Co{constructor(a,o,c,u,h,d,f,m,g,y,v,_){super(null,d,f,m,g,y,u,h,v,_),this.image={width:o,height:c},this.mipmaps=a,this.flipY=!1,this.generateMipmaps=!1}}).prototype.isCompressedTexture=!0;class kre extends Co{constructor(a,o,c,u,h,d,f,m,g){super(a,o,c,u,h,d,f,m,g),this.needsUpdate=!0}}kre.prototype.isCanvasTexture=!0,class extends Co{constructor(a,o,c,u,h,d,f,m,g,y){if((y=void 0!==y?y:I0)!==I0&&y!==ww)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===c&&y===I0&&(c=1012),void 0===c&&y===ww&&(c=Tw),super(null,u,h,d,f,m,y,c,g),this.image={width:a,height:o},this.magFilter=void 0!==f?f:oo,this.minFilter=void 0!==m?m:oo,this.flipY=!1,this.generateMipmaps=!1}}.prototype.isDepthTexture=!0,new oe,new oe,new oe,new lo;class jc{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(a,o){const c=this.getUtoTmapping(a);return this.getPoint(c,o)}getPoints(a=5){const o=[];for(let c=0;c<=a;c++)o.push(this.getPoint(c/a));return o}getSpacedPoints(a=5){const o=[];for(let c=0;c<=a;c++)o.push(this.getPointAt(c/a));return o}getLength(){const a=this.getLengths();return a[a.length-1]}getLengths(a=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===a+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const o=[];let c,u=this.getPoint(0),h=0;o.push(0);for(let d=1;d<=a;d++)c=this.getPoint(d/a),h+=c.distanceTo(u),o.push(h),u=c;return this.cacheArcLengths=o,o}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(a,o){const c=this.getLengths();let u=0;const h=c.length;let d;d=o||a*c[h-1];let g,f=0,m=h-1;for(;f<=m;)if(u=Math.floor(f+(m-f)/2),g=c[u]-d,g<0)f=u+1;else{if(!(g>0)){m=u;break}m=u-1}if(u=m,c[u]===d)return u/(h-1);const y=c[u];return(u+(d-y)/(c[u+1]-y))/(h-1)}getTangent(a,o){const c=1e-4;let u=a-c,h=a+c;u<0&&(u=0),h>1&&(h=1);const d=this.getPoint(u),f=this.getPoint(h),m=o||(d.isVector2?new St:new oe);return m.copy(f).sub(d).normalize(),m}getTangentAt(a,o){const c=this.getUtoTmapping(a);return this.getTangent(c,o)}computeFrenetFrames(a,o){const c=new oe,u=[],h=[],d=[],f=new oe,m=new An;for(let b=0;b<=a;b++)u[b]=this.getTangentAt(b/a,new oe),u[b].normalize();h[0]=new oe,d[0]=new oe;let g=Number.MAX_VALUE;const y=Math.abs(u[0].x),v=Math.abs(u[0].y),_=Math.abs(u[0].z);y<=g&&(g=y,c.set(1,0,0)),v<=g&&(g=v,c.set(0,1,0)),_<=g&&c.set(0,0,1),f.crossVectors(u[0],c).normalize(),h[0].crossVectors(u[0],f),d[0].crossVectors(u[0],h[0]);for(let b=1;b<=a;b++){if(h[b]=h[b-1].clone(),d[b]=d[b-1].clone(),f.crossVectors(u[b-1],u[b]),f.length()>Number.EPSILON){f.normalize();const w=Math.acos(aa(u[b-1].dot(u[b]),-1,1));h[b].applyMatrix4(m.makeRotationAxis(f,w))}d[b].crossVectors(u[b],h[b])}if(!0===o){let b=Math.acos(aa(h[0].dot(h[a]),-1,1));b/=a,u[0].dot(f.crossVectors(h[0],h[a]))>0&&(b=-b);for(let w=1;w<=a;w++)h[w].applyMatrix4(m.makeRotationAxis(u[w],b*w)),d[w].crossVectors(u[w],h[w])}return{tangents:u,normals:h,binormals:d}}clone(){return(new this.constructor).copy(this)}copy(a){return this.arcLengthDivisions=a.arcLengthDivisions,this}toJSON(){const a={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return a.arcLengthDivisions=this.arcLengthDivisions,a.type=this.type,a}fromJSON(a){return this.arcLengthDivisions=a.arcLengthDivisions,this}}class pR extends jc{constructor(a=0,o=0,c=1,u=1,h=0,d=2*Math.PI,f=!1,m=0){super(),this.type="EllipseCurve",this.aX=a,this.aY=o,this.xRadius=c,this.yRadius=u,this.aStartAngle=h,this.aEndAngle=d,this.aClockwise=f,this.aRotation=m}getPoint(a,o){const c=o||new St,u=2*Math.PI;let h=this.aEndAngle-this.aStartAngle;const d=Math.abs(h)<Number.EPSILON;for(;h<0;)h+=u;for(;h>u;)h-=u;h<Number.EPSILON&&(h=d?0:u),!0===this.aClockwise&&!d&&(h===u?h=-u:h-=u);const f=this.aStartAngle+a*h;let m=this.aX+this.xRadius*Math.cos(f),g=this.aY+this.yRadius*Math.sin(f);if(0!==this.aRotation){const y=Math.cos(this.aRotation),v=Math.sin(this.aRotation),_=m-this.aX,b=g-this.aY;m=_*y-b*v+this.aX,g=_*v+b*y+this.aY}return c.set(m,g)}copy(a){return super.copy(a),this.aX=a.aX,this.aY=a.aY,this.xRadius=a.xRadius,this.yRadius=a.yRadius,this.aStartAngle=a.aStartAngle,this.aEndAngle=a.aEndAngle,this.aClockwise=a.aClockwise,this.aRotation=a.aRotation,this}toJSON(){const a=super.toJSON();return a.aX=this.aX,a.aY=this.aY,a.xRadius=this.xRadius,a.yRadius=this.yRadius,a.aStartAngle=this.aStartAngle,a.aEndAngle=this.aEndAngle,a.aClockwise=this.aClockwise,a.aRotation=this.aRotation,a}fromJSON(a){return super.fromJSON(a),this.aX=a.aX,this.aY=a.aY,this.xRadius=a.xRadius,this.yRadius=a.yRadius,this.aStartAngle=a.aStartAngle,this.aEndAngle=a.aEndAngle,this.aClockwise=a.aClockwise,this.aRotation=a.aRotation,this}}pR.prototype.isEllipseCurve=!0;class Bre extends pR{constructor(a,o,c,u,h,d){super(a,o,c,c,u,h,d),this.type="ArcCurve"}}function XB(){let l=0,a=0,o=0,c=0;function u(h,d,f,m){l=h,a=f,o=-3*h+3*d-2*f-m,c=2*h-2*d+f+m}return{initCatmullRom:function(h,d,f,m,g){u(d,f,g*(f-h),g*(m-d))},initNonuniformCatmullRom:function(h,d,f,m,g,y,v){let _=(d-h)/g-(f-h)/(g+y)+(f-d)/y,b=(f-d)/y-(m-d)/(y+v)+(m-f)/v;_*=y,b*=y,u(d,f,_,b)},calc:function(h){const d=h*h;return l+a*h+o*d+c*(d*h)}}}Bre.prototype.isArcCurve=!0;const mR=new oe,$B=new XB,YB=new XB,ZB=new XB;class Ure extends jc{constructor(a=[],o=!1,c="centripetal",u=.5){super(),this.type="CatmullRomCurve3",this.points=a,this.closed=o,this.curveType=c,this.tension=u}getPoint(a,o=new oe){const c=o,u=this.points,h=u.length,d=(h-(this.closed?0:1))*a;let g,y,f=Math.floor(d),m=d-f;this.closed?f+=f>0?0:(Math.floor(Math.abs(f)/h)+1)*h:0===m&&f===h-1&&(f=h-2,m=1),this.closed||f>0?g=u[(f-1)%h]:(mR.subVectors(u[0],u[1]).add(u[0]),g=mR);const v=u[f%h],_=u[(f+1)%h];if(this.closed||f+2<h?y=u[(f+2)%h]:(mR.subVectors(u[h-1],u[h-2]).add(u[h-1]),y=mR),"centripetal"===this.curveType||"chordal"===this.curveType){const b="chordal"===this.curveType?.5:.25;let w=Math.pow(g.distanceToSquared(v),b),C=Math.pow(v.distanceToSquared(_),b),E=Math.pow(_.distanceToSquared(y),b);C<1e-4&&(C=1),w<1e-4&&(w=C),E<1e-4&&(E=C),$B.initNonuniformCatmullRom(g.x,v.x,_.x,y.x,w,C,E),YB.initNonuniformCatmullRom(g.y,v.y,_.y,y.y,w,C,E),ZB.initNonuniformCatmullRom(g.z,v.z,_.z,y.z,w,C,E)}else"catmullrom"===this.curveType&&($B.initCatmullRom(g.x,v.x,_.x,y.x,this.tension),YB.initCatmullRom(g.y,v.y,_.y,y.y,this.tension),ZB.initCatmullRom(g.z,v.z,_.z,y.z,this.tension));return c.set($B.calc(m),YB.calc(m),ZB.calc(m)),c}copy(a){super.copy(a),this.points=[];for(let o=0,c=a.points.length;o<c;o++)this.points.push(a.points[o].clone());return this.closed=a.closed,this.curveType=a.curveType,this.tension=a.tension,this}toJSON(){const a=super.toJSON();a.points=[];for(let o=0,c=this.points.length;o<c;o++)a.points.push(this.points[o].toArray());return a.closed=this.closed,a.curveType=this.curveType,a.tension=this.tension,a}fromJSON(a){super.fromJSON(a),this.points=[];for(let o=0,c=a.points.length;o<c;o++){const u=a.points[o];this.points.push((new oe).fromArray(u))}return this.closed=a.closed,this.curveType=a.curveType,this.tension=a.tension,this}}function Gre(l,a,o,c,u){const h=.5*(c-a),d=.5*(u-o),f=l*l;return(2*o-2*c+h+d)*(l*f)+(-3*o+3*c-2*h-d)*f+h*l+o}function Ww(l,a,o,c){return function(l,a){const o=1-l;return o*o*a}(l,a)+function(l,a){return 2*(1-l)*l*a}(l,o)+function(l,a){return l*l*a}(l,c)}function qw(l,a,o,c,u){return function(l,a){const o=1-l;return o*o*o*a}(l,a)+function(l,a){const o=1-l;return 3*o*o*l*a}(l,o)+function(l,a){return 3*(1-l)*l*l*a}(l,c)+function(l,a){return l*l*l*a}(l,u)}Ure.prototype.isCatmullRomCurve3=!0;class KB extends jc{constructor(a=new St,o=new St,c=new St,u=new St){super(),this.type="CubicBezierCurve",this.v0=a,this.v1=o,this.v2=c,this.v3=u}getPoint(a,o=new St){const c=o,u=this.v0,h=this.v1,d=this.v2,f=this.v3;return c.set(qw(a,u.x,h.x,d.x,f.x),qw(a,u.y,h.y,d.y,f.y)),c}copy(a){return super.copy(a),this.v0.copy(a.v0),this.v1.copy(a.v1),this.v2.copy(a.v2),this.v3.copy(a.v3),this}toJSON(){const a=super.toJSON();return a.v0=this.v0.toArray(),a.v1=this.v1.toArray(),a.v2=this.v2.toArray(),a.v3=this.v3.toArray(),a}fromJSON(a){return super.fromJSON(a),this.v0.fromArray(a.v0),this.v1.fromArray(a.v1),this.v2.fromArray(a.v2),this.v3.fromArray(a.v3),this}}KB.prototype.isCubicBezierCurve=!0;class zre extends jc{constructor(a=new oe,o=new oe,c=new oe,u=new oe){super(),this.type="CubicBezierCurve3",this.v0=a,this.v1=o,this.v2=c,this.v3=u}getPoint(a,o=new oe){const c=o,u=this.v0,h=this.v1,d=this.v2,f=this.v3;return c.set(qw(a,u.x,h.x,d.x,f.x),qw(a,u.y,h.y,d.y,f.y),qw(a,u.z,h.z,d.z,f.z)),c}copy(a){return super.copy(a),this.v0.copy(a.v0),this.v1.copy(a.v1),this.v2.copy(a.v2),this.v3.copy(a.v3),this}toJSON(){const a=super.toJSON();return a.v0=this.v0.toArray(),a.v1=this.v1.toArray(),a.v2=this.v2.toArray(),a.v3=this.v3.toArray(),a}fromJSON(a){return super.fromJSON(a),this.v0.fromArray(a.v0),this.v1.fromArray(a.v1),this.v2.fromArray(a.v2),this.v3.fromArray(a.v3),this}}zre.prototype.isCubicBezierCurve3=!0;class gR extends jc{constructor(a=new St,o=new St){super(),this.type="LineCurve",this.v1=a,this.v2=o}getPoint(a,o=new St){const c=o;return 1===a?c.copy(this.v2):(c.copy(this.v2).sub(this.v1),c.multiplyScalar(a).add(this.v1)),c}getPointAt(a,o){return this.getPoint(a,o)}getTangent(a,o){const c=o||new St;return c.copy(this.v2).sub(this.v1).normalize(),c}copy(a){return super.copy(a),this.v1.copy(a.v1),this.v2.copy(a.v2),this}toJSON(){const a=super.toJSON();return a.v1=this.v1.toArray(),a.v2=this.v2.toArray(),a}fromJSON(a){return super.fromJSON(a),this.v1.fromArray(a.v1),this.v2.fromArray(a.v2),this}}gR.prototype.isLineCurve=!0;class JB extends jc{constructor(a=new St,o=new St,c=new St){super(),this.type="QuadraticBezierCurve",this.v0=a,this.v1=o,this.v2=c}getPoint(a,o=new St){const c=o,u=this.v0,h=this.v1,d=this.v2;return c.set(Ww(a,u.x,h.x,d.x),Ww(a,u.y,h.y,d.y)),c}copy(a){return super.copy(a),this.v0.copy(a.v0),this.v1.copy(a.v1),this.v2.copy(a.v2),this}toJSON(){const a=super.toJSON();return a.v0=this.v0.toArray(),a.v1=this.v1.toArray(),a.v2=this.v2.toArray(),a}fromJSON(a){return super.fromJSON(a),this.v0.fromArray(a.v0),this.v1.fromArray(a.v1),this.v2.fromArray(a.v2),this}}JB.prototype.isQuadraticBezierCurve=!0;class Hre extends jc{constructor(a=new oe,o=new oe,c=new oe){super(),this.type="QuadraticBezierCurve3",this.v0=a,this.v1=o,this.v2=c}getPoint(a,o=new oe){const c=o,u=this.v0,h=this.v1,d=this.v2;return c.set(Ww(a,u.x,h.x,d.x),Ww(a,u.y,h.y,d.y),Ww(a,u.z,h.z,d.z)),c}copy(a){return super.copy(a),this.v0.copy(a.v0),this.v1.copy(a.v1),this.v2.copy(a.v2),this}toJSON(){const a=super.toJSON();return a.v0=this.v0.toArray(),a.v1=this.v1.toArray(),a.v2=this.v2.toArray(),a}fromJSON(a){return super.fromJSON(a),this.v0.fromArray(a.v0),this.v1.fromArray(a.v1),this.v2.fromArray(a.v2),this}}Hre.prototype.isQuadraticBezierCurve3=!0;class QB extends jc{constructor(a=[]){super(),this.type="SplineCurve",this.points=a}getPoint(a,o=new St){const c=o,u=this.points,h=(u.length-1)*a,d=Math.floor(h),f=h-d,m=u[0===d?d:d-1],g=u[d],y=u[d>u.length-2?u.length-1:d+1],v=u[d>u.length-3?u.length-1:d+2];return c.set(Gre(f,m.x,g.x,y.x,v.x),Gre(f,m.y,g.y,y.y,v.y)),c}copy(a){super.copy(a),this.points=[];for(let o=0,c=a.points.length;o<c;o++)this.points.push(a.points[o].clone());return this}toJSON(){const a=super.toJSON();a.points=[];for(let o=0,c=this.points.length;o<c;o++)a.points.push(this.points[o].toArray());return a}fromJSON(a){super.fromJSON(a),this.points=[];for(let o=0,c=a.points.length;o<c;o++){const u=a.points[o];this.points.push((new St).fromArray(u))}return this}}QB.prototype.isSplineCurve=!0;var e5=Object.freeze({__proto__:null,ArcCurve:Bre,CatmullRomCurve3:Ure,CubicBezierCurve:KB,CubicBezierCurve3:zre,EllipseCurve:pR,LineCurve:gR,LineCurve3:class extends jc{constructor(a=new oe,o=new oe){super(),this.type="LineCurve3",this.isLineCurve3=!0,this.v1=a,this.v2=o}getPoint(a,o=new oe){const c=o;return 1===a?c.copy(this.v2):(c.copy(this.v2).sub(this.v1),c.multiplyScalar(a).add(this.v1)),c}getPointAt(a,o){return this.getPoint(a,o)}copy(a){return super.copy(a),this.v1.copy(a.v1),this.v2.copy(a.v2),this}toJSON(){const a=super.toJSON();return a.v1=this.v1.toArray(),a.v2=this.v2.toArray(),a}fromJSON(a){return super.fromJSON(a),this.v1.fromArray(a.v1),this.v2.fromArray(a.v2),this}},QuadraticBezierCurve:JB,QuadraticBezierCurve3:Hre,SplineCurve:QB});function jre(l,a,o,c,u){let h,d;if(u===function(l,a,o,c){let u=0;for(let h=a,d=o-c;h<o;h+=c)u+=(l[d]-l[h])*(l[h+1]+l[d+1]),d=h;return u}(l,a,o,c)>0)for(h=a;h<o;h+=c)d=Xre(h,l[h],l[h+1],d);else for(h=o-c;h>=a;h-=c)d=Xre(h,l[h],l[h+1],d);return d&&yR(d,d.next)&&(Yw(d),d=d.next),d}function Jp(l,a){if(!l)return l;a||(a=l);let c,o=l;do{if(c=!1,o.steiner||!yR(o,o.next)&&0!==ws(o.prev,o,o.next))o=o.next;else{if(Yw(o),o=a=o.prev,o===o.next)break;c=!0}}while(c||o!==a);return a}function Xw(l,a,o,c,u,h,d){if(!l)return;!d&&h&&function(l,a,o,c){let u=l;do{null===u.z&&(u.z=t5(u.x,u.y,a,o,c)),u.prevZ=u.prev,u.nextZ=u.next,u=u.next}while(u!==l);u.prevZ.nextZ=null,u.prevZ=null,function(l){let a,o,c,u,h,d,f,m,g=1;do{for(o=l,l=null,h=null,d=0;o;){for(d++,c=o,f=0,a=0;a<g&&(f++,c=c.nextZ,c);a++);for(m=g;f>0||m>0&&c;)0!==f&&(0===m||!c||o.z<=c.z)?(u=o,o=o.nextZ,f--):(u=c,c=c.nextZ,m--),h?h.nextZ=u:l=u,u.prevZ=h,h=u;o=c}h.nextZ=null,g*=2}while(d>1)}(u)}(l,c,u,h);let m,g,f=l;for(;l.prev!==l.next;)if(m=l.prev,g=l.next,h?MQe(l,c,u,h):EQe(l))a.push(m.i/o),a.push(l.i/o),a.push(g.i/o),Yw(l),l=g.next,f=g.next;else if((l=g)===f){d?1===d?Xw(l=DQe(Jp(l),a,o),a,o,c,u,h,2):2===d&&AQe(l,a,o,c,u,h):Xw(Jp(l),a,o,c,u,h,1);break}}function EQe(l){const a=l.prev,o=l,c=l.next;if(ws(a,o,c)>=0)return!1;let u=l.next.next;for(;u!==l.prev;){if(cb(a.x,a.y,o.x,o.y,c.x,c.y,u.x,u.y)&&ws(u.prev,u,u.next)>=0)return!1;u=u.next}return!0}function MQe(l,a,o,c){const u=l.prev,h=l,d=l.next;if(ws(u,h,d)>=0)return!1;const g=u.x>h.x?u.x>d.x?u.x:d.x:h.x>d.x?h.x:d.x,y=u.y>h.y?u.y>d.y?u.y:d.y:h.y>d.y?h.y:d.y,v=t5(u.x<h.x?u.x<d.x?u.x:d.x:h.x<d.x?h.x:d.x,u.y<h.y?u.y<d.y?u.y:d.y:h.y<d.y?h.y:d.y,a,o,c),_=t5(g,y,a,o,c);let b=l.prevZ,w=l.nextZ;for(;b&&b.z>=v&&w&&w.z<=_;){if(b!==l.prev&&b!==l.next&&cb(u.x,u.y,h.x,h.y,d.x,d.y,b.x,b.y)&&ws(b.prev,b,b.next)>=0||(b=b.prevZ,w!==l.prev&&w!==l.next&&cb(u.x,u.y,h.x,h.y,d.x,d.y,w.x,w.y)&&ws(w.prev,w,w.next)>=0))return!1;w=w.nextZ}for(;b&&b.z>=v;){if(b!==l.prev&&b!==l.next&&cb(u.x,u.y,h.x,h.y,d.x,d.y,b.x,b.y)&&ws(b.prev,b,b.next)>=0)return!1;b=b.prevZ}for(;w&&w.z<=_;){if(w!==l.prev&&w!==l.next&&cb(u.x,u.y,h.x,h.y,d.x,d.y,w.x,w.y)&&ws(w.prev,w,w.next)>=0)return!1;w=w.nextZ}return!0}function DQe(l,a,o){let c=l;do{const u=c.prev,h=c.next.next;!yR(u,h)&&Wre(u,c,c.next,h)&&$w(u,h)&&$w(h,u)&&(a.push(u.i/o),a.push(c.i/o),a.push(h.i/o),Yw(c),Yw(c.next),c=l=h),c=c.next}while(c!==l);return Jp(c)}function AQe(l,a,o,c,u,h){let d=l;do{let f=d.next.next;for(;f!==d.prev;){if(d.i!==f.i&&VQe(d,f)){let m=qre(d,f);return d=Jp(d,d.next),m=Jp(m,m.next),Xw(d,a,o,c,u,h),void Xw(m,a,o,c,u,h)}f=f.next}d=d.next}while(d!==l)}function RQe(l,a){return l.x-a.x}function PQe(l,a){if(a=function(l,a){let o=a;const c=l.x,u=l.y;let d,h=-1/0;do{if(u<=o.y&&u>=o.next.y&&o.next.y!==o.y){const _=o.x+(u-o.y)*(o.next.x-o.x)/(o.next.y-o.y);if(_<=c&&_>h){if(h=_,_===c){if(u===o.y)return o;if(u===o.next.y)return o.next}d=o.x<o.next.x?o:o.next}}o=o.next}while(o!==a);if(!d)return null;if(c===h)return d;const f=d,m=d.x,g=d.y;let v,y=1/0;o=d;do{c>=o.x&&o.x>=m&&c!==o.x&&cb(u<g?c:h,u,m,g,u<g?h:c,u,o.x,o.y)&&(v=Math.abs(u-o.y)/(c-o.x),$w(o,l)&&(v<y||v===y&&(o.x>d.x||o.x===d.x&&OQe(d,o)))&&(d=o,y=v)),o=o.next}while(o!==f);return d}(l,a)){const o=qre(a,l);Jp(a,a.next),Jp(o,o.next)}}function OQe(l,a){return ws(l.prev,l,a.prev)<0&&ws(a.next,l,l.next)<0}function t5(l,a,o,c,u){return(l=1431655765&((l=858993459&((l=252645135&((l=16711935&((l=32767*(l-o)*u)|l<<8))|l<<4))|l<<2))|l<<1))|(a=1431655765&((a=858993459&((a=252645135&((a=16711935&((a=32767*(a-c)*u)|a<<8))|a<<4))|a<<2))|a<<1))<<1}function kQe(l){let a=l,o=l;do{(a.x<o.x||a.x===o.x&&a.y<o.y)&&(o=a),a=a.next}while(a!==l);return o}function cb(l,a,o,c,u,h,d,f){return(u-d)*(a-f)-(l-d)*(h-f)>=0&&(l-d)*(c-f)-(o-d)*(a-f)>=0&&(o-d)*(h-f)-(u-d)*(c-f)>=0}function VQe(l,a){return l.next.i!==a.i&&l.prev.i!==a.i&&!function(l,a){let o=l;do{if(o.i!==l.i&&o.next.i!==l.i&&o.i!==a.i&&o.next.i!==a.i&&Wre(o,o.next,l,a))return!0;o=o.next}while(o!==l);return!1}(l,a)&&($w(l,a)&&$w(a,l)&&function(l,a){let o=l,c=!1;const u=(l.x+a.x)/2,h=(l.y+a.y)/2;do{o.y>h!=o.next.y>h&&o.next.y!==o.y&&u<(o.next.x-o.x)*(h-o.y)/(o.next.y-o.y)+o.x&&(c=!c),o=o.next}while(o!==l);return c}(l,a)&&(ws(l.prev,l,a.prev)||ws(l,a.prev,a))||yR(l,a)&&ws(l.prev,l,l.next)>0&&ws(a.prev,a,a.next)>0)}function ws(l,a,o){return(a.y-l.y)*(o.x-a.x)-(a.x-l.x)*(o.y-a.y)}function yR(l,a){return l.x===a.x&&l.y===a.y}function Wre(l,a,o,c){const u=_R(ws(l,a,o)),h=_R(ws(l,a,c)),d=_R(ws(o,c,l)),f=_R(ws(o,c,a));return!!(u!==h&&d!==f||0===u&&vR(l,o,a)||0===h&&vR(l,c,a)||0===d&&vR(o,l,c)||0===f&&vR(o,a,c))}function vR(l,a,o){return a.x<=Math.max(l.x,o.x)&&a.x>=Math.min(l.x,o.x)&&a.y<=Math.max(l.y,o.y)&&a.y>=Math.min(l.y,o.y)}function _R(l){return l>0?1:l<0?-1:0}function $w(l,a){return ws(l.prev,l,l.next)<0?ws(l,a,l.next)>=0&&ws(l,l.prev,a)>=0:ws(l,a,l.prev)<0||ws(l,l.next,a)<0}function qre(l,a){const o=new n5(l.i,l.x,l.y),c=new n5(a.i,a.x,a.y),u=l.next,h=a.prev;return l.next=a,a.prev=l,o.next=u,u.prev=o,c.next=o,o.prev=c,h.next=c,c.prev=h,c}function Xre(l,a,o,c){const u=new n5(l,a,o);return c?(u.next=c.next,u.prev=c,c.next.prev=u,c.next=u):(u.prev=u,u.next=u),u}function Yw(l){l.next.prev=l.prev,l.prev.next=l.next,l.prevZ&&(l.prevZ.nextZ=l.nextZ),l.nextZ&&(l.nextZ.prevZ=l.prevZ)}function n5(l,a,o){this.i=l,this.x=a,this.y=o,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}class bf{static area(a){const o=a.length;let c=0;for(let u=o-1,h=0;h<o;u=h++)c+=a[u].x*a[h].y-a[h].x*a[u].y;return.5*c}static isClockWise(a){return bf.area(a)<0}static triangulateShape(a,o){const c=[],u=[],h=[];$re(a),Yre(c,a);let d=a.length;o.forEach($re);for(let m=0;m<o.length;m++)u.push(d),d+=o[m].length,Yre(c,o[m]);const f=function(l,a,o=2){const c=a&&a.length,u=c?a[0]*o:l.length;let h=jre(l,0,u,o,!0);const d=[];if(!h||h.next===h.prev)return d;let f,m,g,y,v,_,b;if(c&&(h=function(l,a,o,c){const u=[];let h,d,f,m,g;for(h=0,d=a.length;h<d;h++)f=a[h]*c,m=h<d-1?a[h+1]*c:l.length,g=jre(l,f,m,c,!1),g===g.next&&(g.steiner=!0),u.push(kQe(g));for(u.sort(RQe),h=0;h<u.length;h++)PQe(u[h],o),o=Jp(o,o.next);return o}(l,a,h,o)),l.length>80*o){f=g=l[0],m=y=l[1];for(let w=o;w<u;w+=o)v=l[w],_=l[w+1],v<f&&(f=v),_<m&&(m=_),v>g&&(g=v),_>y&&(y=_);b=Math.max(g-f,y-m),b=0!==b?1/b:0}return Xw(h,d,o,f,m,b),d}(c,u);for(let m=0;m<f.length;m+=3)h.push(f.slice(m,m+3));return h}}function $re(l){const a=l.length;a>2&&l[a-1].equals(l[0])&&l.pop()}function Yre(l,a){for(let o=0;o<a.length;o++)l.push(a[o].x),l.push(a[o].y)}class td extends Kn{constructor(a,o){super(),this.type="ExtrudeGeometry",this.parameters={shapes:a,options:o},a=Array.isArray(a)?a:[a];const c=this,u=[],h=[];for(let f=0,m=a.length;f<m;f++)d(a[f]);function d(f){const m=[],g=void 0!==o.curveSegments?o.curveSegments:12,y=void 0!==o.steps?o.steps:1;let v=void 0!==o.depth?o.depth:100,_=void 0===o.bevelEnabled||o.bevelEnabled,b=void 0!==o.bevelThickness?o.bevelThickness:6,w=void 0!==o.bevelSize?o.bevelSize:b-2,C=void 0!==o.bevelOffset?o.bevelOffset:0,E=void 0!==o.bevelSegments?o.bevelSegments:3;const M=o.extrudePath,x=void 0!==o.UVGenerator?o.UVGenerator:zQe;void 0!==o.amount&&(console.warn("THREE.ExtrudeBufferGeometry: amount has been renamed to depth."),v=o.amount);let R,k,W,U,K,P=!1;M&&(R=M.getSpacedPoints(y),P=!0,_=!1,k=M.computeFrenetFrames(y,!1),W=new oe,U=new oe,K=new oe),_||(E=0,b=0,w=0,C=0);const Q=f.extractPoints(g);let se=Q.shape;const te=Q.holes;if(!bf.isClockWise(se)){se=se.reverse();for(let it=0,ht=te.length;it<ht;it++){const vt=te[it];bf.isClockWise(vt)&&(te[it]=vt.reverse())}}const de=bf.triangulateShape(se,te),ye=se;for(let it=0,ht=te.length;it<ht;it++)se=se.concat(te[it]);function _e(it,ht,vt){return ht||console.error("THREE.ExtrudeGeometry: vec does not exist"),ht.clone().multiplyScalar(vt).add(it)}const ue=se.length,ce=de.length;function Re(it,ht,vt){let tn,Ft,ge;const ee=it.x-ht.x,st=it.y-ht.y,gt=vt.x-it.x,Xt=vt.y-it.y,Jt=ee*ee+st*st;if(Math.abs(ee*Xt-st*gt)>Number.EPSILON){const Bt=Math.sqrt(Jt),En=Math.sqrt(gt*gt+Xt*Xt),pn=ht.x-st/Bt,Pe=ht.y+ee/Bt,rn=((vt.x-Xt/En-pn)*Xt-(vt.y+gt/En-Pe)*gt)/(ee*Xt-st*gt);tn=pn+ee*rn-it.x,Ft=Pe+st*rn-it.y;const hn=tn*tn+Ft*Ft;if(hn<=2)return new St(tn,Ft);ge=Math.sqrt(hn/2)}else{let Bt=!1;ee>Number.EPSILON?gt>Number.EPSILON&&(Bt=!0):ee<-Number.EPSILON?gt<-Number.EPSILON&&(Bt=!0):Math.sign(st)===Math.sign(Xt)&&(Bt=!0),Bt?(tn=-st,Ft=ee,ge=Math.sqrt(Jt)):(tn=ee,Ft=st,ge=Math.sqrt(Jt/2))}return new St(tn/ge,Ft/ge)}const Oe=[];for(let it=0,ht=ye.length,vt=ht-1,tn=it+1;it<ht;it++,vt++,tn++)vt===ht&&(vt=0),tn===ht&&(tn=0),Oe[it]=Re(ye[it],ye[vt],ye[tn]);const Ae=[];let We,Te=Oe.concat();for(let it=0,ht=te.length;it<ht;it++){const vt=te[it];We=[];for(let tn=0,Ft=vt.length,ge=Ft-1,ee=tn+1;tn<Ft;tn++,ge++,ee++)ge===Ft&&(ge=0),ee===Ft&&(ee=0),We[tn]=Re(vt[tn],vt[ge],vt[ee]);Ae.push(We),Te=Te.concat(We)}for(let it=0;it<E;it++){const ht=it/E,vt=b*Math.cos(ht*Math.PI/2),tn=w*Math.sin(ht*Math.PI/2)+C;for(let Ft=0,ge=ye.length;Ft<ge;Ft++){const ee=_e(ye[Ft],Oe[Ft],tn);xt(ee.x,ee.y,-vt)}for(let Ft=0,ge=te.length;Ft<ge;Ft++){const ee=te[Ft];We=Ae[Ft];for(let st=0,gt=ee.length;st<gt;st++){const Xt=_e(ee[st],We[st],tn);xt(Xt.x,Xt.y,-vt)}}}const He=w+C;for(let it=0;it<ue;it++){const ht=_?_e(se[it],Te[it],He):se[it];P?(U.copy(k.normals[0]).multiplyScalar(ht.x),W.copy(k.binormals[0]).multiplyScalar(ht.y),K.copy(R[0]).add(U).add(W),xt(K.x,K.y,K.z)):xt(ht.x,ht.y,0)}for(let it=1;it<=y;it++)for(let ht=0;ht<ue;ht++){const vt=_?_e(se[ht],Te[ht],He):se[ht];P?(U.copy(k.normals[it]).multiplyScalar(vt.x),W.copy(k.binormals[it]).multiplyScalar(vt.y),K.copy(R[it]).add(U).add(W),xt(K.x,K.y,K.z)):xt(vt.x,vt.y,v/y*it)}for(let it=E-1;it>=0;it--){const ht=it/E,vt=b*Math.cos(ht*Math.PI/2),tn=w*Math.sin(ht*Math.PI/2)+C;for(let Ft=0,ge=ye.length;Ft<ge;Ft++){const ee=_e(ye[Ft],Oe[Ft],tn);xt(ee.x,ee.y,v+vt)}for(let Ft=0,ge=te.length;Ft<ge;Ft++){const ee=te[Ft];We=Ae[Ft];for(let st=0,gt=ee.length;st<gt;st++){const Xt=_e(ee[st],We[st],tn);P?xt(Xt.x,Xt.y+R[y-1].y,R[y-1].x+vt):xt(Xt.x,Xt.y,v+vt)}}}function Ce(it,ht){let vt=it.length;for(;--vt>=0;){const tn=vt;let Ft=vt-1;Ft<0&&(Ft=it.length-1);for(let ge=0,ee=y+2*E;ge<ee;ge++){const st=ue*ge,gt=ue*(ge+1);Ct(ht+tn+st,ht+Ft+st,ht+Ft+gt,ht+tn+gt)}}}function xt(it,ht,vt){m.push(it),m.push(ht),m.push(vt)}function Ye(it,ht,vt){Ot(it),Ot(ht),Ot(vt);const tn=u.length/3,Ft=x.generateTopUV(c,u,tn-3,tn-2,tn-1);Kt(Ft[0]),Kt(Ft[1]),Kt(Ft[2])}function Ct(it,ht,vt,tn){Ot(it),Ot(ht),Ot(tn),Ot(ht),Ot(vt),Ot(tn);const Ft=u.length/3,ge=x.generateSideWallUV(c,u,Ft-6,Ft-3,Ft-2,Ft-1);Kt(ge[0]),Kt(ge[1]),Kt(ge[3]),Kt(ge[1]),Kt(ge[2]),Kt(ge[3])}function Ot(it){u.push(m[3*it+0]),u.push(m[3*it+1]),u.push(m[3*it+2])}function Kt(it){h.push(it.x),h.push(it.y)}(function(){const it=u.length/3;if(_){let ht=0,vt=ue*ht;for(let tn=0;tn<ce;tn++){const Ft=de[tn];Ye(Ft[2]+vt,Ft[1]+vt,Ft[0]+vt)}ht=y+2*E,vt=ue*ht;for(let tn=0;tn<ce;tn++){const Ft=de[tn];Ye(Ft[0]+vt,Ft[1]+vt,Ft[2]+vt)}}else{for(let ht=0;ht<ce;ht++){const vt=de[ht];Ye(vt[2],vt[1],vt[0])}for(let ht=0;ht<ce;ht++){const vt=de[ht];Ye(vt[0]+ue*y,vt[1]+ue*y,vt[2]+ue*y)}}c.addGroup(it,u.length/3-it,0)})(),function(){const it=u.length/3;let ht=0;Ce(ye,ht),ht+=ye.length;for(let vt=0,tn=te.length;vt<tn;vt++){const Ft=te[vt];Ce(Ft,ht),ht+=Ft.length}c.addGroup(it,u.length/3-it,1)}()}this.setAttribute("position",new wn(u,3)),this.setAttribute("uv",new wn(h,2)),this.computeVertexNormals()}toJSON(){const a=super.toJSON();return function(l,a,o){if(o.shapes=[],Array.isArray(l))for(let c=0,u=l.length;c<u;c++)o.shapes.push(l[c].uuid);else o.shapes.push(l.uuid);return void 0!==a.extrudePath&&(o.options.extrudePath=a.extrudePath.toJSON()),o}(this.parameters.shapes,this.parameters.options,a)}static fromJSON(a,o){const c=[];for(let h=0,d=a.shapes.length;h<d;h++)c.push(o[a.shapes[h]]);const u=a.options.extrudePath;return void 0!==u&&(a.options.extrudePath=(new e5[u.type]).fromJSON(u)),new td(c,a.options)}}const zQe={generateTopUV:function(l,a,o,c,u){const f=a[3*c],m=a[3*c+1],g=a[3*u],y=a[3*u+1];return[new St(a[3*o],a[3*o+1]),new St(f,m),new St(g,y)]},generateSideWallUV:function(l,a,o,c,u,h){const d=a[3*o],f=a[3*o+1],m=a[3*o+2],g=a[3*c],y=a[3*c+1],v=a[3*c+2],_=a[3*u],b=a[3*u+1],w=a[3*u+2],C=a[3*h],E=a[3*h+1],M=a[3*h+2];return Math.abs(f-y)<Math.abs(d-g)?[new St(d,1-m),new St(g,1-v),new St(_,1-w),new St(C,1-M)]:[new St(f,1-m),new St(y,1-v),new St(b,1-w),new St(E,1-M)]}};class Kw extends Kn{constructor(a,o=12){super(),this.type="ShapeGeometry",this.parameters={shapes:a,curveSegments:o};const c=[],u=[],h=[],d=[];let f=0,m=0;if(!1===Array.isArray(a))g(a);else for(let y=0;y<a.length;y++)g(a[y]),this.addGroup(f,m,y),f+=m,m=0;function g(y){const v=u.length/3,_=y.extractPoints(o);let b=_.shape;const w=_.holes;!1===bf.isClockWise(b)&&(b=b.reverse());for(let E=0,M=w.length;E<M;E++){const x=w[E];!0===bf.isClockWise(x)&&(w[E]=x.reverse())}const C=bf.triangulateShape(b,w);for(let E=0,M=w.length;E<M;E++)b=b.concat(w[E]);for(let E=0,M=b.length;E<M;E++){const x=b[E];u.push(x.x,x.y,0),h.push(0,0,1),d.push(x.x,x.y)}for(let E=0,M=C.length;E<M;E++){const x=C[E];c.push(x[0]+v,x[1]+v,x[2]+v),m+=3}}this.setIndex(c),this.setAttribute("position",new wn(u,3)),this.setAttribute("normal",new wn(h,3)),this.setAttribute("uv",new wn(d,2))}toJSON(){const a=super.toJSON();return function(l,a){if(a.shapes=[],Array.isArray(l))for(let o=0,c=l.length;o<c;o++)a.shapes.push(l[o].uuid);else a.shapes.push(l.uuid);return a}(this.parameters.shapes,a)}static fromJSON(a,o){const c=[];for(let u=0,h=a.shapes.length;u<h;u++)c.push(o[a.shapes[u]]);return new Kw(c,a.curveSegments)}}(class extends Eo{constructor(a){super(),this.type="ShadowMaterial",this.color=new Zt(0),this.transparent=!0,this.setValues(a)}copy(a){return super.copy(a),this.color.copy(a.color),this}}).prototype.isShadowMaterial=!0;class ub extends Eo{constructor(a){super(),this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new Zt(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Zt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new St(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.setValues(a)}copy(a){return super.copy(a),this.defines={STANDARD:""},this.color.copy(a.color),this.roughness=a.roughness,this.metalness=a.metalness,this.map=a.map,this.lightMap=a.lightMap,this.lightMapIntensity=a.lightMapIntensity,this.aoMap=a.aoMap,this.aoMapIntensity=a.aoMapIntensity,this.emissive.copy(a.emissive),this.emissiveMap=a.emissiveMap,this.emissiveIntensity=a.emissiveIntensity,this.bumpMap=a.bumpMap,this.bumpScale=a.bumpScale,this.normalMap=a.normalMap,this.normalMapType=a.normalMapType,this.normalScale.copy(a.normalScale),this.displacementMap=a.displacementMap,this.displacementScale=a.displacementScale,this.displacementBias=a.displacementBias,this.roughnessMap=a.roughnessMap,this.metalnessMap=a.metalnessMap,this.alphaMap=a.alphaMap,this.envMap=a.envMap,this.envMapIntensity=a.envMapIntensity,this.refractionRatio=a.refractionRatio,this.wireframe=a.wireframe,this.wireframeLinewidth=a.wireframeLinewidth,this.wireframeLinecap=a.wireframeLinecap,this.wireframeLinejoin=a.wireframeLinejoin,this.flatShading=a.flatShading,this}}ub.prototype.isMeshStandardMaterial=!0;class Jg extends ub{constructor(a){super(),this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new St(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return aa(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(o){this.ior=(1+.4*o)/(1-.4*o)}}),this.sheenTint=new Zt(0),this.transmission=0,this.transmissionMap=null,this.thickness=.01,this.thicknessMap=null,this.attenuationDistance=0,this.attenuationTint=new Zt(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularTint=new Zt(1,1,1),this.specularTintMap=null,this._clearcoat=0,this._transmission=0,this.setValues(a)}get clearcoat(){return this._clearcoat}set clearcoat(a){this._clearcoat>0!=a>0&&this.version++,this._clearcoat=a}get transmission(){return this._transmission}set transmission(a){this._transmission>0!=a>0&&this.version++,this._transmission=a}copy(a){return super.copy(a),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=a.clearcoat,this.clearcoatMap=a.clearcoatMap,this.clearcoatRoughness=a.clearcoatRoughness,this.clearcoatRoughnessMap=a.clearcoatRoughnessMap,this.clearcoatNormalMap=a.clearcoatNormalMap,this.clearcoatNormalScale.copy(a.clearcoatNormalScale),this.ior=a.ior,this.sheenTint.copy(a.sheenTint),this.transmission=a.transmission,this.transmissionMap=a.transmissionMap,this.thickness=a.thickness,this.thicknessMap=a.thicknessMap,this.attenuationDistance=a.attenuationDistance,this.attenuationTint.copy(a.attenuationTint),this.specularIntensity=a.specularIntensity,this.specularIntensityMap=a.specularIntensityMap,this.specularTint.copy(a.specularTint),this.specularTintMap=a.specularTintMap,this}}Jg.prototype.isMeshPhysicalMaterial=!0;class r5 extends Eo{constructor(a){super(),this.type="MeshPhongMaterial",this.color=new Zt(16777215),this.specular=new Zt(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Zt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new St(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.setValues(a)}copy(a){return super.copy(a),this.color.copy(a.color),this.specular.copy(a.specular),this.shininess=a.shininess,this.map=a.map,this.lightMap=a.lightMap,this.lightMapIntensity=a.lightMapIntensity,this.aoMap=a.aoMap,this.aoMapIntensity=a.aoMapIntensity,this.emissive.copy(a.emissive),this.emissiveMap=a.emissiveMap,this.emissiveIntensity=a.emissiveIntensity,this.bumpMap=a.bumpMap,this.bumpScale=a.bumpScale,this.normalMap=a.normalMap,this.normalMapType=a.normalMapType,this.normalScale.copy(a.normalScale),this.displacementMap=a.displacementMap,this.displacementScale=a.displacementScale,this.displacementBias=a.displacementBias,this.specularMap=a.specularMap,this.alphaMap=a.alphaMap,this.envMap=a.envMap,this.combine=a.combine,this.reflectivity=a.reflectivity,this.refractionRatio=a.refractionRatio,this.wireframe=a.wireframe,this.wireframeLinewidth=a.wireframeLinewidth,this.wireframeLinecap=a.wireframeLinecap,this.wireframeLinejoin=a.wireframeLinejoin,this.flatShading=a.flatShading,this}}r5.prototype.isMeshPhongMaterial=!0;(class extends Eo{constructor(a){super(),this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new Zt(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Zt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new St(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.setValues(a)}copy(a){return super.copy(a),this.color.copy(a.color),this.map=a.map,this.gradientMap=a.gradientMap,this.lightMap=a.lightMap,this.lightMapIntensity=a.lightMapIntensity,this.aoMap=a.aoMap,this.aoMapIntensity=a.aoMapIntensity,this.emissive.copy(a.emissive),this.emissiveMap=a.emissiveMap,this.emissiveIntensity=a.emissiveIntensity,this.bumpMap=a.bumpMap,this.bumpScale=a.bumpScale,this.normalMap=a.normalMap,this.normalMapType=a.normalMapType,this.normalScale.copy(a.normalScale),this.displacementMap=a.displacementMap,this.displacementScale=a.displacementScale,this.displacementBias=a.displacementBias,this.alphaMap=a.alphaMap,this.wireframe=a.wireframe,this.wireframeLinewidth=a.wireframeLinewidth,this.wireframeLinecap=a.wireframeLinecap,this.wireframeLinejoin=a.wireframeLinejoin,this}}).prototype.isMeshToonMaterial=!0;(class extends Eo{constructor(a){super(),this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new St(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.flatShading=!1,this.setValues(a)}copy(a){return super.copy(a),this.bumpMap=a.bumpMap,this.bumpScale=a.bumpScale,this.normalMap=a.normalMap,this.normalMapType=a.normalMapType,this.normalScale.copy(a.normalScale),this.displacementMap=a.displacementMap,this.displacementScale=a.displacementScale,this.displacementBias=a.displacementBias,this.wireframe=a.wireframe,this.wireframeLinewidth=a.wireframeLinewidth,this.flatShading=a.flatShading,this}}).prototype.isMeshNormalMaterial=!0;(class extends Eo{constructor(a){super(),this.type="MeshLambertMaterial",this.color=new Zt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Zt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.setValues(a)}copy(a){return super.copy(a),this.color.copy(a.color),this.map=a.map,this.lightMap=a.lightMap,this.lightMapIntensity=a.lightMapIntensity,this.aoMap=a.aoMap,this.aoMapIntensity=a.aoMapIntensity,this.emissive.copy(a.emissive),this.emissiveMap=a.emissiveMap,this.emissiveIntensity=a.emissiveIntensity,this.specularMap=a.specularMap,this.alphaMap=a.alphaMap,this.envMap=a.envMap,this.combine=a.combine,this.reflectivity=a.reflectivity,this.refractionRatio=a.refractionRatio,this.wireframe=a.wireframe,this.wireframeLinewidth=a.wireframeLinewidth,this.wireframeLinecap=a.wireframeLinecap,this.wireframeLinejoin=a.wireframeLinejoin,this}}).prototype.isMeshLambertMaterial=!0;(class extends Eo{constructor(a){super(),this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new Zt(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new St(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.setValues(a)}copy(a){return super.copy(a),this.defines={MATCAP:""},this.color.copy(a.color),this.matcap=a.matcap,this.map=a.map,this.bumpMap=a.bumpMap,this.bumpScale=a.bumpScale,this.normalMap=a.normalMap,this.normalMapType=a.normalMapType,this.normalScale.copy(a.normalScale),this.displacementMap=a.displacementMap,this.displacementScale=a.displacementScale,this.displacementBias=a.displacementBias,this.alphaMap=a.alphaMap,this.flatShading=a.flatShading,this}}).prototype.isMeshMatcapMaterial=!0;(class extends jo{constructor(a){super(),this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(a)}copy(a){return super.copy(a),this.scale=a.scale,this.dashSize=a.dashSize,this.gapSize=a.gapSize,this}}).prototype.isLineDashedMaterial=!0;const ms={arraySlice:function(l,a,o){return ms.isTypedArray(l)?new l.constructor(l.subarray(a,void 0!==o?o:l.length)):l.slice(a,o)},convertArray:function(l,a,o){return!l||!o&&l.constructor===a?l:"number"==typeof a.BYTES_PER_ELEMENT?new a(l):Array.prototype.slice.call(l)},isTypedArray:function(l){return ArrayBuffer.isView(l)&&!(l instanceof DataView)},getKeyframeOrder:function(l){const o=l.length,c=new Array(o);for(let u=0;u!==o;++u)c[u]=u;return c.sort(function(u,h){return l[u]-l[h]}),c},sortedArray:function(l,a,o){const c=l.length,u=new l.constructor(c);for(let h=0,d=0;d!==c;++h){const f=o[h]*a;for(let m=0;m!==a;++m)u[d++]=l[f+m]}return u},flattenJSON:function(l,a,o,c){let u=1,h=l[0];for(;void 0!==h&&void 0===h[c];)h=l[u++];if(void 0===h)return;let d=h[c];if(void 0!==d)if(Array.isArray(d))do{d=h[c],void 0!==d&&(a.push(h.time),o.push.apply(o,d)),h=l[u++]}while(void 0!==h);else if(void 0!==d.toArray)do{d=h[c],void 0!==d&&(a.push(h.time),d.toArray(o,o.length)),h=l[u++]}while(void 0!==h);else do{d=h[c],void 0!==d&&(a.push(h.time),o.push(d)),h=l[u++]}while(void 0!==h)},subclip:function(l,a,o,c,u=30){const h=l.clone();h.name=a;const d=[];for(let m=0;m<h.tracks.length;++m){const g=h.tracks[m],y=g.getValueSize(),v=[],_=[];for(let b=0;b<g.times.length;++b){const w=g.times[b]*u;if(!(w<o||w>=c)){v.push(g.times[b]);for(let C=0;C<y;++C)_.push(g.values[b*y+C])}}0!==v.length&&(g.times=ms.convertArray(v,g.times.constructor),g.values=ms.convertArray(_,g.values.constructor),d.push(g))}h.tracks=d;let f=1/0;for(let m=0;m<h.tracks.length;++m)f>h.tracks[m].times[0]&&(f=h.tracks[m].times[0]);for(let m=0;m<h.tracks.length;++m)h.tracks[m].shift(-1*f);return h.resetDuration(),h},makeClipAdditive:function(l,a=0,o=l,c=30){c<=0&&(c=30);const u=o.tracks.length,h=a/c;for(let d=0;d<u;++d){const f=o.tracks[d],m=f.ValueTypeName;if("bool"===m||"string"===m)continue;const g=l.tracks.find(function(M){return M.name===f.name&&M.ValueTypeName===m});if(void 0===g)continue;let y=0;const v=f.getValueSize();f.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(y=v/3);let _=0;const b=g.getValueSize();g.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(_=b/3);const w=f.times.length-1;let C;if(h<=f.times[0])C=ms.arraySlice(f.values,y,v-y);else if(h>=f.times[w]){const M=w*v+y;C=ms.arraySlice(f.values,M,M+v-y)}else{const M=f.createInterpolant(),x=y,R=v-y;M.evaluate(h),C=ms.arraySlice(M.resultBuffer,x,R)}"quaternion"===m&&(new xo).fromArray(C).normalize().conjugate().toArray(C);const E=g.times.length;for(let M=0;M<E;++M){const x=M*b+_;if("quaternion"===m)xo.multiplyQuaternionsFlat(g.values,x,C,0,g.values,x);else{const R=b-2*_;for(let P=0;P<R;++P)g.values[x+P]-=C[P]}}}return l.blendMode=2501,l}};class Sf{constructor(a,o,c,u){this.parameterPositions=a,this._cachedIndex=0,this.resultBuffer=void 0!==u?u:new o.constructor(c),this.sampleValues=o,this.valueSize=c,this.settings=null,this.DefaultSettings_={}}evaluate(a){const o=this.parameterPositions;let c=this._cachedIndex,u=o[c],h=o[c-1];e:{t:{let d;n:{r:if(!(a<u)){for(let f=c+2;;){if(void 0===u){if(a<h)break r;return c=o.length,this._cachedIndex=c,this.afterEnd_(c-1,a,h)}if(c===f)break;if(h=u,u=o[++c],a<u)break t}d=o.length;break n}if(a>=h)break e;{const f=o[1];a<f&&(c=2,h=f);for(let m=c-2;;){if(void 0===h)return this._cachedIndex=0,this.beforeStart_(0,a,u);if(c===m)break;if(u=h,h=o[--c-1],a>=h)break t}d=c,c=0}}for(;c<d;){const f=c+d>>>1;a<o[f]?d=f:c=f+1}if(u=o[c],h=o[c-1],void 0===h)return this._cachedIndex=0,this.beforeStart_(0,a,u);if(void 0===u)return c=o.length,this._cachedIndex=c,this.afterEnd_(c-1,h,a)}this._cachedIndex=c,this.intervalChanged_(c,h,u)}return this.interpolate_(c,h,a,u)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(a){const o=this.resultBuffer,c=this.sampleValues,u=this.valueSize,h=a*u;for(let d=0;d!==u;++d)o[d]=c[h+d];return o}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}Sf.prototype.beforeStart_=Sf.prototype.copySampleValue_,Sf.prototype.afterEnd_=Sf.prototype.copySampleValue_;class qQe extends Sf{constructor(a,o,c,u){super(a,o,c,u),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:P0,endingEnd:P0}}intervalChanged_(a,o,c){const u=this.parameterPositions;let h=a-2,d=a+1,f=u[h],m=u[d];if(void 0===f)switch(this.getSettings_().endingStart){case L0:h=a,f=2*o-c;break;case 2402:h=u.length-2,f=o+u[h]-u[h+1];break;default:h=a,f=c}if(void 0===m)switch(this.getSettings_().endingEnd){case L0:d=a,m=2*c-o;break;case 2402:d=1,m=c+u[1]-u[0];break;default:d=a-1,m=o}const g=.5*(c-o),y=this.valueSize;this._weightPrev=g/(o-f),this._weightNext=g/(m-c),this._offsetPrev=h*y,this._offsetNext=d*y}interpolate_(a,o,c,u){const h=this.resultBuffer,d=this.sampleValues,f=this.valueSize,m=a*f,g=m-f,y=this._offsetPrev,v=this._offsetNext,_=this._weightPrev,b=this._weightNext,w=(c-o)/(u-o),C=w*w,E=C*w,M=-_*E+2*_*C-_*w,x=(1+_)*E+(-1.5-2*_)*C+(-.5+_)*w+1,R=(-1-b)*E+(1.5+b)*C+.5*w,P=b*E-b*C;for(let k=0;k!==f;++k)h[k]=M*d[y+k]+x*d[g+k]+R*d[m+k]+P*d[v+k];return h}}class aie extends Sf{constructor(a,o,c,u){super(a,o,c,u)}interpolate_(a,o,c,u){const h=this.resultBuffer,d=this.sampleValues,f=this.valueSize,m=a*f,g=m-f,y=(c-o)/(u-o),v=1-y;for(let _=0;_!==f;++_)h[_]=d[g+_]*v+d[m+_]*y;return h}}class XQe extends Sf{constructor(a,o,c,u){super(a,o,c,u)}interpolate_(a){return this.copySampleValue_(a-1)}}class nd{constructor(a,o,c,u){if(void 0===a)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===o||0===o.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+a);this.name=a,this.times=ms.convertArray(o,this.TimeBufferType),this.values=ms.convertArray(c,this.ValueBufferType),this.setInterpolation(u||this.DefaultInterpolation)}static toJSON(a){const o=a.constructor;let c;if(o.toJSON!==this.toJSON)c=o.toJSON(a);else{c={name:a.name,times:ms.convertArray(a.times,Array),values:ms.convertArray(a.values,Array)};const u=a.getInterpolation();u!==a.DefaultInterpolation&&(c.interpolation=u)}return c.type=a.ValueTypeName,c}InterpolantFactoryMethodDiscrete(a){return new XQe(this.times,this.values,this.getValueSize(),a)}InterpolantFactoryMethodLinear(a){return new aie(this.times,this.values,this.getValueSize(),a)}InterpolantFactoryMethodSmooth(a){return new qQe(this.times,this.values,this.getValueSize(),a)}setInterpolation(a){let o;switch(a){case Cw:o=this.InterpolantFactoryMethodDiscrete;break;case R0:o=this.InterpolantFactoryMethodLinear;break;case 2302:o=this.InterpolantFactoryMethodSmooth}if(void 0===o){const c="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(a===this.DefaultInterpolation)throw new Error(c);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",c),this}return this.createInterpolant=o,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Cw;case this.InterpolantFactoryMethodLinear:return R0;case this.InterpolantFactoryMethodSmooth:return 2302}}getValueSize(){return this.values.length/this.times.length}shift(a){if(0!==a){const o=this.times;for(let c=0,u=o.length;c!==u;++c)o[c]+=a}return this}scale(a){if(1!==a){const o=this.times;for(let c=0,u=o.length;c!==u;++c)o[c]*=a}return this}trim(a,o){const c=this.times,u=c.length;let h=0,d=u-1;for(;h!==u&&c[h]<a;)++h;for(;-1!==d&&c[d]>o;)--d;if(++d,0!==h||d!==u){h>=d&&(d=Math.max(d,1),h=d-1);const f=this.getValueSize();this.times=ms.arraySlice(c,h,d),this.values=ms.arraySlice(this.values,h*f,d*f)}return this}validate(){let a=!0;const o=this.getValueSize();o-Math.floor(o)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),a=!1);const c=this.times,u=this.values,h=c.length;0===h&&(console.error("THREE.KeyframeTrack: Track is empty.",this),a=!1);let d=null;for(let f=0;f!==h;f++){const m=c[f];if("number"==typeof m&&isNaN(m)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,f,m),a=!1;break}if(null!==d&&d>m){console.error("THREE.KeyframeTrack: Out of order keys.",this,f,m,d),a=!1;break}d=m}if(void 0!==u&&ms.isTypedArray(u))for(let f=0,m=u.length;f!==m;++f){const g=u[f];if(isNaN(g)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,f,g),a=!1;break}}return a}optimize(){const a=ms.arraySlice(this.times),o=ms.arraySlice(this.values),c=this.getValueSize(),u=2302===this.getInterpolation(),h=a.length-1;let d=1;for(let f=1;f<h;++f){let m=!1;const g=a[f];if(g!==a[f+1]&&(1!==f||g!==a[0]))if(u)m=!0;else{const v=f*c,_=v-c,b=v+c;for(let w=0;w!==c;++w){const C=o[v+w];if(C!==o[_+w]||C!==o[b+w]){m=!0;break}}}if(m){if(f!==d){a[d]=a[f];const v=f*c,_=d*c;for(let b=0;b!==c;++b)o[_+b]=o[v+b]}++d}}if(h>0){a[d]=a[h];for(let f=h*c,m=d*c,g=0;g!==c;++g)o[m+g]=o[f+g];++d}return d!==a.length?(this.times=ms.arraySlice(a,0,d),this.values=ms.arraySlice(o,0,d*c)):(this.times=a,this.values=o),this}clone(){const a=ms.arraySlice(this.times,0),o=ms.arraySlice(this.values,0),u=new(0,this.constructor)(this.name,a,o);return u.createInterpolant=this.createInterpolant,u}}nd.prototype.TimeBufferType=Float32Array,nd.prototype.ValueBufferType=Float32Array,nd.prototype.DefaultInterpolation=R0;class hb extends nd{}hb.prototype.ValueTypeName="bool",hb.prototype.ValueBufferType=Array,hb.prototype.DefaultInterpolation=Cw,hb.prototype.InterpolantFactoryMethodLinear=void 0,hb.prototype.InterpolantFactoryMethodSmooth=void 0;class lie extends nd{}lie.prototype.ValueTypeName="color";class Qw extends nd{}Qw.prototype.ValueTypeName="number";class $Qe extends Sf{constructor(a,o,c,u){super(a,o,c,u)}interpolate_(a,o,c,u){const h=this.resultBuffer,d=this.sampleValues,f=this.valueSize,m=(c-o)/(u-o);let g=a*f;for(let y=g+f;g!==y;g+=4)xo.slerpFlat(h,0,d,g-f,d,g,m);return h}}class Qg extends nd{InterpolantFactoryMethodLinear(a){return new $Qe(this.times,this.values,this.getValueSize(),a)}}Qg.prototype.ValueTypeName="quaternion",Qg.prototype.DefaultInterpolation=R0,Qg.prototype.InterpolantFactoryMethodSmooth=void 0;class db extends nd{}db.prototype.ValueTypeName="string",db.prototype.ValueBufferType=Array,db.prototype.DefaultInterpolation=Cw,db.prototype.InterpolantFactoryMethodLinear=void 0,db.prototype.InterpolantFactoryMethodSmooth=void 0;class eC extends nd{}eC.prototype.ValueTypeName="vector";class tC{constructor(a,o=-1,c,u=2500){this.name=a,this.tracks=c,this.duration=o,this.blendMode=u,this.uuid=sc(),this.duration<0&&this.resetDuration()}static parse(a){const o=[],c=a.tracks,u=1/(a.fps||1);for(let d=0,f=c.length;d!==f;++d)o.push(ZQe(c[d]).scale(u));const h=new this(a.name,a.duration,o,a.blendMode);return h.uuid=a.uuid,h}static toJSON(a){const o=[],c=a.tracks,u={name:a.name,duration:a.duration,tracks:o,uuid:a.uuid,blendMode:a.blendMode};for(let h=0,d=c.length;h!==d;++h)o.push(nd.toJSON(c[h]));return u}static CreateFromMorphTargetSequence(a,o,c,u){const h=o.length,d=[];for(let f=0;f<h;f++){let m=[],g=[];m.push((f+h-1)%h,f,(f+1)%h),g.push(0,1,0);const y=ms.getKeyframeOrder(m);m=ms.sortedArray(m,1,y),g=ms.sortedArray(g,1,y),!u&&0===m[0]&&(m.push(h),g.push(g[0])),d.push(new Qw(".morphTargetInfluences["+o[f].name+"]",m,g).scale(1/c))}return new this(a,-1,d)}static findByName(a,o){let c=a;if(!Array.isArray(a)){const u=a;c=u.geometry&&u.geometry.animations||u.animations}for(let u=0;u<c.length;u++)if(c[u].name===o)return c[u];return null}static CreateClipsFromMorphTargetSequences(a,o,c){const u={},h=/^([\w-]*?)([\d]+)$/;for(let f=0,m=a.length;f<m;f++){const g=a[f],y=g.name.match(h);if(y&&y.length>1){const v=y[1];let _=u[v];_||(u[v]=_=[]),_.push(g)}}const d=[];for(const f in u)d.push(this.CreateFromMorphTargetSequence(f,u[f],o,c));return d}static parseAnimation(a,o){if(!a)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const c=function(v,_,b,w,C){if(0!==b.length){const E=[],M=[];ms.flattenJSON(b,E,M,w),0!==E.length&&C.push(new v(_,E,M))}},u=[],h=a.name||"default",d=a.fps||30,f=a.blendMode;let m=a.length||-1;const g=a.hierarchy||[];for(let v=0;v<g.length;v++){const _=g[v].keys;if(_&&0!==_.length)if(_[0].morphTargets){const b={};let w;for(w=0;w<_.length;w++)if(_[w].morphTargets)for(let C=0;C<_[w].morphTargets.length;C++)b[_[w].morphTargets[C]]=-1;for(const C in b){const E=[],M=[];for(let x=0;x!==_[w].morphTargets.length;++x){const R=_[w];E.push(R.time),M.push(R.morphTarget===C?1:0)}u.push(new Qw(".morphTargetInfluence["+C+"]",E,M))}m=b.length*(d||1)}else{const b=".bones["+o[v].name+"]";c(eC,b+".position",_,"pos",u),c(Qg,b+".quaternion",_,"rot",u),c(eC,b+".scale",_,"scl",u)}}return 0===u.length?null:new this(h,m,u,f)}resetDuration(){let o=0;for(let c=0,u=this.tracks.length;c!==u;++c){const h=this.tracks[c];o=Math.max(o,h.times[h.times.length-1])}return this.duration=o,this}trim(){for(let a=0;a<this.tracks.length;a++)this.tracks[a].trim(0,this.duration);return this}validate(){let a=!0;for(let o=0;o<this.tracks.length;o++)a=a&&this.tracks[o].validate();return a}optimize(){for(let a=0;a<this.tracks.length;a++)this.tracks[a].optimize();return this}clone(){const a=[];for(let o=0;o<this.tracks.length;o++)a.push(this.tracks[o].clone());return new this.constructor(this.name,this.duration,a,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function ZQe(l){if(void 0===l.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const a=function(l){switch(l.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Qw;case"vector":case"vector2":case"vector3":case"vector4":return eC;case"color":return lie;case"quaternion":return Qg;case"bool":case"boolean":return hb;case"string":return db}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+l)}(l.type);if(void 0===l.times){const o=[],c=[];ms.flattenJSON(l.keys,o,c,"value"),l.times=o,l.values=c}return void 0!==a.parse?a.parse(l):new a(l.name,l.times,l.values,l.interpolation)}const fb={enabled:!1,files:{},add:function(l,a){!1!==this.enabled&&(this.files[l]=a)},get:function(l){if(!1!==this.enabled)return this.files[l]},remove:function(l){delete this.files[l]},clear:function(){this.files={}}};const KQe=new class{constructor(a,o,c){const u=this;let m,h=!1,d=0,f=0;const g=[];this.onStart=void 0,this.onLoad=a,this.onProgress=o,this.onError=c,this.itemStart=function(y){f++,!1===h&&void 0!==u.onStart&&u.onStart(y,d,f),h=!0},this.itemEnd=function(y){d++,void 0!==u.onProgress&&u.onProgress(y,d,f),d===f&&(h=!1,void 0!==u.onLoad&&u.onLoad())},this.itemError=function(y){void 0!==u.onError&&u.onError(y)},this.resolveURL=function(y){return m?m(y):y},this.setURLModifier=function(y){return m=y,this},this.addHandler=function(y,v){return g.push(y,v),this},this.removeHandler=function(y){const v=g.indexOf(y);return-1!==v&&g.splice(v,2),this},this.getHandler=function(y){for(let v=0,_=g.length;v<_;v+=2){const b=g[v],w=g[v+1];if(b.global&&(b.lastIndex=0),b.test(y))return w}return null}}};class Tf{constructor(a){this.manager=void 0!==a?a:KQe,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(a,o){const c=this;return new Promise(function(u,h){c.load(a,u,o,h)})}parse(){}setCrossOrigin(a){return this.crossOrigin=a,this}setWithCredentials(a){return this.withCredentials=a,this}setPath(a){return this.path=a,this}setResourcePath(a){return this.resourcePath=a,this}setRequestHeader(a){return this.requestHeader=a,this}}const Xu={};class Wc extends Tf{constructor(a){super(a)}load(a,o,c,u){void 0===a&&(a=""),void 0!==this.path&&(a=this.path+a),a=this.manager.resolveURL(a);const h=this,d=fb.get(a);if(void 0!==d)return h.manager.itemStart(a),setTimeout(function(){o&&o(d),h.manager.itemEnd(a)},0),d;if(void 0!==Xu[a])return void Xu[a].push({onLoad:o,onProgress:c,onError:u});const m=a.match(/^data:(.*?)(;base64)?,(.*)$/);let g;if(m){const y=m[1],v=!!m[2];let _=m[3];_=decodeURIComponent(_),v&&(_=atob(_));try{let b;const w=(this.responseType||"").toLowerCase();switch(w){case"arraybuffer":case"blob":const C=new Uint8Array(_.length);for(let M=0;M<_.length;M++)C[M]=_.charCodeAt(M);b="blob"===w?new Blob([C.buffer],{type:y}):C.buffer;break;case"document":b=(new DOMParser).parseFromString(_,y);break;case"json":b=JSON.parse(_);break;default:b=_}setTimeout(function(){o&&o(b),h.manager.itemEnd(a)},0)}catch(b){setTimeout(function(){u&&u(b),h.manager.itemError(a),h.manager.itemEnd(a)},0)}}else{Xu[a]=[],Xu[a].push({onLoad:o,onProgress:c,onError:u}),g=new XMLHttpRequest,g.open("GET",a,!0),g.addEventListener("load",function(y){const v=this.response,_=Xu[a];if(delete Xu[a],200===this.status||0===this.status){0===this.status&&console.warn("THREE.FileLoader: HTTP Status 0 received."),fb.add(a,v);for(let b=0,w=_.length;b<w;b++){const C=_[b];C.onLoad&&C.onLoad(v)}h.manager.itemEnd(a)}else{for(let b=0,w=_.length;b<w;b++){const C=_[b];C.onError&&C.onError(y)}h.manager.itemError(a),h.manager.itemEnd(a)}},!1),g.addEventListener("progress",function(y){const v=Xu[a];for(let _=0,b=v.length;_<b;_++){const w=v[_];w.onProgress&&w.onProgress(y)}},!1),g.addEventListener("error",function(y){const v=Xu[a];delete Xu[a];for(let _=0,b=v.length;_<b;_++){const w=v[_];w.onError&&w.onError(y)}h.manager.itemError(a),h.manager.itemEnd(a)},!1),g.addEventListener("abort",function(y){const v=Xu[a];delete Xu[a];for(let _=0,b=v.length;_<b;_++){const w=v[_];w.onError&&w.onError(y)}h.manager.itemError(a),h.manager.itemEnd(a)},!1),void 0!==this.responseType&&(g.responseType=this.responseType),void 0!==this.withCredentials&&(g.withCredentials=this.withCredentials),g.overrideMimeType&&g.overrideMimeType(void 0!==this.mimeType?this.mimeType:"text/plain");for(const y in this.requestHeader)g.setRequestHeader(y,this.requestHeader[y]);g.send(null)}return h.manager.itemStart(a),g}setResponseType(a){return this.responseType=a,this}setMimeType(a){return this.mimeType=a,this}}class MR extends Tf{constructor(a){super(a)}load(a,o,c,u){void 0!==this.path&&(a=this.path+a),a=this.manager.resolveURL(a);const h=this,d=fb.get(a);if(void 0!==d)return h.manager.itemStart(a),setTimeout(function(){o&&o(d),h.manager.itemEnd(a)},0),d;const f=document.createElementNS("http://www.w3.org/1999/xhtml","img");function m(){f.removeEventListener("load",m,!1),f.removeEventListener("error",g,!1),fb.add(a,this),o&&o(this),h.manager.itemEnd(a)}function g(y){f.removeEventListener("load",m,!1),f.removeEventListener("error",g,!1),u&&u(y),h.manager.itemError(a),h.manager.itemEnd(a)}return f.addEventListener("load",m,!1),f.addEventListener("error",g,!1),"data:"!==a.substr(0,5)&&void 0!==this.crossOrigin&&(f.crossOrigin=this.crossOrigin),h.manager.itemStart(a),f.src=a,f}}class uie extends Tf{constructor(a){super(a)}load(a,o,c,u){const h=new Lw,d=new MR(this.manager);d.setCrossOrigin(this.crossOrigin),d.setPath(this.path);let f=0;function m(g){d.load(a[g],function(y){h.images[g]=y,f++,6===f&&(h.needsUpdate=!0,o&&o(h))},void 0,u)}for(let g=0;g<a.length;++g)m(g);return h}}class hie extends Tf{constructor(a){super(a)}load(a,o,c,u){const h=new Co,d=new MR(this.manager);return d.setCrossOrigin(this.crossOrigin),d.setPath(this.path),d.load(a,function(f){h.image=f;const m=a.search(/\.jpe?g($|\?)/i)>0||0===a.search(/^data\:image\/jpeg/);h.format=m?Zh:El,h.needsUpdate=!0,void 0!==o&&o(h)},c,u),h}}class QQe extends jc{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(a){this.curves.push(a)}closePath(){const a=this.curves[0].getPoint(0),o=this.curves[this.curves.length-1].getPoint(1);a.equals(o)||this.curves.push(new gR(o,a))}getPoint(a){const o=a*this.getLength(),c=this.getCurveLengths();let u=0;for(;u<c.length;){if(c[u]>=o){const h=c[u]-o,d=this.curves[u],f=d.getLength();return d.getPointAt(0===f?0:1-h/f)}u++}return null}getLength(){const a=this.getCurveLengths();return a[a.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const a=[];let o=0;for(let c=0,u=this.curves.length;c<u;c++)o+=this.curves[c].getLength(),a.push(o);return this.cacheLengths=a,a}getSpacedPoints(a=40){const o=[];for(let c=0;c<=a;c++)o.push(this.getPoint(c/a));return this.autoClose&&o.push(o[0]),o}getPoints(a=12){const o=[];let c;for(let u=0,h=this.curves;u<h.length;u++){const d=h[u],m=d.getPoints(d&&d.isEllipseCurve?2*a:d&&(d.isLineCurve||d.isLineCurve3)?1:d&&d.isSplineCurve?a*d.points.length:a);for(let g=0;g<m.length;g++){const y=m[g];c&&c.equals(y)||(o.push(y),c=y)}}return this.autoClose&&o.length>1&&!o[o.length-1].equals(o[0])&&o.push(o[0]),o}copy(a){super.copy(a),this.curves=[];for(let o=0,c=a.curves.length;o<c;o++)this.curves.push(a.curves[o].clone());return this.autoClose=a.autoClose,this}toJSON(){const a=super.toJSON();a.autoClose=this.autoClose,a.curves=[];for(let o=0,c=this.curves.length;o<c;o++)a.curves.push(this.curves[o].toJSON());return a}fromJSON(a){super.fromJSON(a),this.autoClose=a.autoClose,this.curves=[];for(let o=0,c=a.curves.length;o<c;o++){const u=a.curves[o];this.curves.push((new e5[u.type]).fromJSON(u))}return this}}class DR extends QQe{constructor(a){super(),this.type="Path",this.currentPoint=new St,a&&this.setFromPoints(a)}setFromPoints(a){this.moveTo(a[0].x,a[0].y);for(let o=1,c=a.length;o<c;o++)this.lineTo(a[o].x,a[o].y);return this}moveTo(a,o){return this.currentPoint.set(a,o),this}lineTo(a,o){const c=new gR(this.currentPoint.clone(),new St(a,o));return this.curves.push(c),this.currentPoint.set(a,o),this}quadraticCurveTo(a,o,c,u){const h=new JB(this.currentPoint.clone(),new St(a,o),new St(c,u));return this.curves.push(h),this.currentPoint.set(c,u),this}bezierCurveTo(a,o,c,u,h,d){const f=new KB(this.currentPoint.clone(),new St(a,o),new St(c,u),new St(h,d));return this.curves.push(f),this.currentPoint.set(h,d),this}splineThru(a){const o=[this.currentPoint.clone()].concat(a),c=new QB(o);return this.curves.push(c),this.currentPoint.copy(a[a.length-1]),this}arc(a,o,c,u,h,d){return this.absarc(a+this.currentPoint.x,o+this.currentPoint.y,c,u,h,d),this}absarc(a,o,c,u,h,d){return this.absellipse(a,o,c,c,u,h,d),this}ellipse(a,o,c,u,h,d,f,m){return this.absellipse(a+this.currentPoint.x,o+this.currentPoint.y,c,u,h,d,f,m),this}absellipse(a,o,c,u,h,d,f,m){const g=new pR(a,o,c,u,h,d,f,m);if(this.curves.length>0){const v=g.getPoint(0);v.equals(this.currentPoint)||this.lineTo(v.x,v.y)}this.curves.push(g);const y=g.getPoint(1);return this.currentPoint.copy(y),this}copy(a){return super.copy(a),this.currentPoint.copy(a.currentPoint),this}toJSON(){const a=super.toJSON();return a.currentPoint=this.currentPoint.toArray(),a}fromJSON(a){return super.fromJSON(a),this.currentPoint.fromArray(a.currentPoint),this}}class Qp extends DR{constructor(a){super(a),this.uuid=sc(),this.type="Shape",this.holes=[]}getPointsHoles(a){const o=[];for(let c=0,u=this.holes.length;c<u;c++)o[c]=this.holes[c].getPoints(a);return o}extractPoints(a){return{shape:this.getPoints(a),holes:this.getPointsHoles(a)}}copy(a){super.copy(a),this.holes=[];for(let o=0,c=a.holes.length;o<c;o++)this.holes.push(a.holes[o].clone());return this}toJSON(){const a=super.toJSON();a.uuid=this.uuid,a.holes=[];for(let o=0,c=this.holes.length;o<c;o++)a.holes.push(this.holes[o].toJSON());return a}fromJSON(a){super.fromJSON(a),this.uuid=a.uuid,this.holes=[];for(let o=0,c=a.holes.length;o<c;o++){const u=a.holes[o];this.holes.push((new DR).fromJSON(u))}return this}}class rd extends ui{constructor(a,o=1){super(),this.type="Light",this.color=new Zt(a),this.intensity=o}dispose(){}copy(a){return super.copy(a),this.color.copy(a.color),this.intensity=a.intensity,this}toJSON(a){const o=super.toJSON(a);return o.object.color=this.color.getHex(),o.object.intensity=this.intensity,void 0!==this.groundColor&&(o.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(o.object.distance=this.distance),void 0!==this.angle&&(o.object.angle=this.angle),void 0!==this.decay&&(o.object.decay=this.decay),void 0!==this.penumbra&&(o.object.penumbra=this.penumbra),void 0!==this.shadow&&(o.object.shadow=this.shadow.toJSON()),o}}rd.prototype.isLight=!0;(class extends rd{constructor(a,o,c){super(a,c),this.type="HemisphereLight",this.position.copy(ui.DefaultUp),this.updateMatrix(),this.groundColor=new Zt(o)}copy(a){return rd.prototype.copy.call(this,a),this.groundColor.copy(a.groundColor),this}}).prototype.isHemisphereLight=!0;const fie=new An,pie=new oe,mie=new oe;class i5{constructor(a){this.camera=a,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new St(512,512),this.map=null,this.mapPass=null,this.matrix=new An,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new qI,this._frameExtents=new St(1,1),this._viewportCount=1,this._viewports=[new Oi(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(a){const o=this.camera,c=this.matrix;pie.setFromMatrixPosition(a.matrixWorld),o.position.copy(pie),mie.setFromMatrixPosition(a.target.matrixWorld),o.lookAt(mie),o.updateMatrixWorld(),fie.multiplyMatrices(o.projectionMatrix,o.matrixWorldInverse),this._frustum.setFromProjectionMatrix(fie),c.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),c.multiply(o.projectionMatrix),c.multiply(o.matrixWorldInverse)}getViewport(a){return this._viewports[a]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(a){return this.camera=a.camera.clone(),this.bias=a.bias,this.radius=a.radius,this.mapSize.copy(a.mapSize),this}clone(){return(new this.constructor).copy(this)}toJSON(){const a={};return 0!==this.bias&&(a.bias=this.bias),0!==this.normalBias&&(a.normalBias=this.normalBias),1!==this.radius&&(a.radius=this.radius),(512!==this.mapSize.x||512!==this.mapSize.y)&&(a.mapSize=this.mapSize.toArray()),a.camera=this.camera.toJSON(!1).object,delete a.camera.matrix,a}}class gie extends i5{constructor(){super(new co(50,1,.5,500)),this.focus=1}updateMatrices(a){const o=this.camera,c=2*Mw*a.angle*this.focus,u=this.mapSize.width/this.mapSize.height,h=a.distance||o.far;(c!==o.fov||u!==o.aspect||h!==o.far)&&(o.fov=c,o.aspect=u,o.far=h,o.updateProjectionMatrix()),super.updateMatrices(a)}copy(a){return super.copy(a),this.focus=a.focus,this}}gie.prototype.isSpotLightShadow=!0;class s5 extends rd{constructor(a,o,c=0,u=Math.PI/3,h=0,d=1){super(a,o),this.type="SpotLight",this.position.copy(ui.DefaultUp),this.updateMatrix(),this.target=new ui,this.distance=c,this.angle=u,this.penumbra=h,this.decay=d,this.shadow=new gie}get power(){return this.intensity*Math.PI}set power(a){this.intensity=a/Math.PI}dispose(){this.shadow.dispose()}copy(a){return super.copy(a),this.distance=a.distance,this.angle=a.angle,this.penumbra=a.penumbra,this.decay=a.decay,this.target=a.target.clone(),this.shadow=a.shadow.clone(),this}}s5.prototype.isSpotLight=!0;const yie=new An,nC=new oe,o5=new oe;class vie extends i5{constructor(){super(new co(90,1,.5,500)),this._frameExtents=new St(4,2),this._viewportCount=6,this._viewports=[new Oi(2,1,1,1),new Oi(0,1,1,1),new Oi(3,1,1,1),new Oi(1,1,1,1),new Oi(3,0,1,1),new Oi(1,0,1,1)],this._cubeDirections=[new oe(1,0,0),new oe(-1,0,0),new oe(0,0,1),new oe(0,0,-1),new oe(0,1,0),new oe(0,-1,0)],this._cubeUps=[new oe(0,1,0),new oe(0,1,0),new oe(0,1,0),new oe(0,1,0),new oe(0,0,1),new oe(0,0,-1)]}updateMatrices(a,o=0){const c=this.camera,u=this.matrix,h=a.distance||c.far;h!==c.far&&(c.far=h,c.updateProjectionMatrix()),nC.setFromMatrixPosition(a.matrixWorld),c.position.copy(nC),o5.copy(c.position),o5.add(this._cubeDirections[o]),c.up.copy(this._cubeUps[o]),c.lookAt(o5),c.updateMatrixWorld(),u.makeTranslation(-nC.x,-nC.y,-nC.z),yie.multiplyMatrices(c.projectionMatrix,c.matrixWorldInverse),this._frustum.setFromProjectionMatrix(yie)}}vie.prototype.isPointLightShadow=!0;class a5 extends rd{constructor(a,o,c=0,u=1){super(a,o),this.type="PointLight",this.distance=c,this.decay=u,this.shadow=new vie}get power(){return 4*this.intensity*Math.PI}set power(a){this.intensity=a/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(a){return super.copy(a),this.distance=a.distance,this.decay=a.decay,this.shadow=a.shadow.clone(),this}}a5.prototype.isPointLight=!0;class _ie extends i5{constructor(){super(new Nw(-5,5,5,-5,.5,500))}}_ie.prototype.isDirectionalLightShadow=!0;class AR extends rd{constructor(a,o){super(a,o),this.type="DirectionalLight",this.position.copy(ui.DefaultUp),this.updateMatrix(),this.target=new ui,this.shadow=new _ie}dispose(){this.shadow.dispose()}copy(a){return super.copy(a),this.target=a.target.clone(),this.shadow=a.shadow.clone(),this}}AR.prototype.isDirectionalLight=!0;(class extends rd{constructor(a,o){super(a,o),this.type="AmbientLight"}}).prototype.isAmbientLight=!0;(class extends rd{constructor(a,o,c=10,u=10){super(a,o),this.type="RectAreaLight",this.width=c,this.height=u}get power(){return this.intensity*this.width*this.height*Math.PI}set power(a){this.intensity=a/(this.width*this.height*Math.PI)}copy(a){return super.copy(a),this.width=a.width,this.height=a.height,this}toJSON(a){const o=super.toJSON(a);return o.object.width=this.width,o.object.height=this.height,o}}).prototype.isRectAreaLight=!0;class Tie{constructor(){this.coefficients=[];for(let a=0;a<9;a++)this.coefficients.push(new oe)}set(a){for(let o=0;o<9;o++)this.coefficients[o].copy(a[o]);return this}zero(){for(let a=0;a<9;a++)this.coefficients[a].set(0,0,0);return this}getAt(a,o){const c=a.x,u=a.y,h=a.z,d=this.coefficients;return o.copy(d[0]).multiplyScalar(.282095),o.addScaledVector(d[1],.488603*u),o.addScaledVector(d[2],.488603*h),o.addScaledVector(d[3],.488603*c),o.addScaledVector(d[4],c*u*1.092548),o.addScaledVector(d[5],u*h*1.092548),o.addScaledVector(d[6],.315392*(3*h*h-1)),o.addScaledVector(d[7],c*h*1.092548),o.addScaledVector(d[8],.546274*(c*c-u*u)),o}getIrradianceAt(a,o){const c=a.x,u=a.y,h=a.z,d=this.coefficients;return o.copy(d[0]).multiplyScalar(.886227),o.addScaledVector(d[1],1.023328*u),o.addScaledVector(d[2],1.023328*h),o.addScaledVector(d[3],1.023328*c),o.addScaledVector(d[4],.858086*c*u),o.addScaledVector(d[5],.858086*u*h),o.addScaledVector(d[6],.743125*h*h-.247708),o.addScaledVector(d[7],.858086*c*h),o.addScaledVector(d[8],.429043*(c*c-u*u)),o}add(a){for(let o=0;o<9;o++)this.coefficients[o].add(a.coefficients[o]);return this}addScaledSH(a,o){for(let c=0;c<9;c++)this.coefficients[c].addScaledVector(a.coefficients[c],o);return this}scale(a){for(let o=0;o<9;o++)this.coefficients[o].multiplyScalar(a);return this}lerp(a,o){for(let c=0;c<9;c++)this.coefficients[c].lerp(a.coefficients[c],o);return this}equals(a){for(let o=0;o<9;o++)if(!this.coefficients[o].equals(a.coefficients[o]))return!1;return!0}copy(a){return this.set(a.coefficients)}clone(){return(new this.constructor).copy(this)}fromArray(a,o=0){const c=this.coefficients;for(let u=0;u<9;u++)c[u].fromArray(a,o+3*u);return this}toArray(a=[],o=0){const c=this.coefficients;for(let u=0;u<9;u++)c[u].toArray(a,o+3*u);return a}static getBasisAt(a,o){const c=a.x,u=a.y,h=a.z;o[0]=.282095,o[1]=.488603*u,o[2]=.488603*h,o[3]=.488603*c,o[4]=1.092548*c*u,o[5]=1.092548*u*h,o[6]=.315392*(3*h*h-1),o[7]=1.092548*c*h,o[8]=.546274*(c*c-u*u)}}Tie.prototype.isSphericalHarmonics3=!0;class IR extends rd{constructor(a=new Tie,o=1){super(void 0,o),this.sh=a}copy(a){return super.copy(a),this.sh.copy(a.sh),this}fromJSON(a){return this.intensity=a.intensity,this.sh.fromArray(a.sh),this}toJSON(a){const o=super.toJSON(a);return o.object.sh=this.sh.toArray(),o}}IR.prototype.isLightProbe=!0;class em{static decodeText(a){if("undefined"!=typeof TextDecoder)return(new TextDecoder).decode(a);let o="";for(let c=0,u=a.length;c<u;c++)o+=String.fromCharCode(a[c]);try{return decodeURIComponent(escape(o))}catch(c){return o}}static extractUrlBase(a){const o=a.lastIndexOf("/");return-1===o?"./":a.substr(0,o+1)}}(class extends Kn{constructor(){super(),this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(a){return super.copy(a),this.instanceCount=a.instanceCount,this}clone(){return(new this.constructor).copy(this)}toJSON(){const a=super.toJSON(this);return a.instanceCount=this.instanceCount,a.isInstancedBufferGeometry=!0,a}}).prototype.isInstancedBufferGeometry=!0;class Eie extends Tf{constructor(a){super(a),"undefined"==typeof createImageBitmap&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),"undefined"==typeof fetch&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(a){return this.options=a,this}load(a,o,c,u){void 0===a&&(a=""),void 0!==this.path&&(a=this.path+a),a=this.manager.resolveURL(a);const h=this,d=fb.get(a);if(void 0!==d)return h.manager.itemStart(a),setTimeout(function(){o&&o(d),h.manager.itemEnd(a)},0),d;const f={};f.credentials="anonymous"===this.crossOrigin?"same-origin":"include",f.headers=this.requestHeader,fetch(a,f).then(function(m){return m.blob()}).then(function(m){return createImageBitmap(m,Object.assign(h.options,{colorSpaceConversion:"none"}))}).then(function(m){fb.add(a,m),o&&o(m),h.manager.itemEnd(a)}).catch(function(m){u&&u(m),h.manager.itemError(a),h.manager.itemEnd(a)}),h.manager.itemStart(a)}}Eie.prototype.isImageBitmapLoader=!0;let RR;class oet extends Tf{constructor(a){super(a)}load(a,o,c,u){const h=this,d=new Wc(this.manager);d.setResponseType("arraybuffer"),d.setPath(this.path),d.setRequestHeader(this.requestHeader),d.setWithCredentials(this.withCredentials),d.load(a,function(f){try{const m=f.slice(0);(void 0===RR&&(RR=new(window.AudioContext||window.webkitAudioContext)),RR).decodeAudioData(m,function(y){o(y)})}catch(m){u?u(m):console.error(m),h.manager.itemError(a)}},c,u)}}(class extends IR{constructor(a,o,c=1){super(void 0,c);const u=(new Zt).set(a),h=(new Zt).set(o),d=new oe(u.r,u.g,u.b),f=new oe(h.r,h.g,h.b),m=Math.sqrt(Math.PI),g=m*Math.sqrt(.75);this.sh.coefficients[0].copy(d).add(f).multiplyScalar(m),this.sh.coefficients[1].copy(d).sub(f).multiplyScalar(g)}}).prototype.isHemisphereLightProbe=!0,class extends IR{constructor(a,o=1){super(void 0,o);const c=(new Zt).set(a);this.sh.coefficients[0].set(c.r,c.g,c.b).multiplyScalar(2*Math.sqrt(Math.PI))}}.prototype.isAmbientLightProbe=!0;class met{constructor(a,o,c){let u,h,d;switch(this.binding=a,this.valueSize=c,o){case"quaternion":u=this._slerp,h=this._slerpAdditive,d=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(6*c),this._workIndex=5;break;case"string":case"bool":u=this._select,h=this._select,d=this._setAdditiveIdentityOther,this.buffer=new Array(5*c);break;default:u=this._lerp,h=this._lerpAdditive,d=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(5*c)}this._mixBufferRegion=u,this._mixBufferRegionAdditive=h,this._setIdentity=d,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(a,o){const c=this.buffer,u=this.valueSize,h=a*u+u;let d=this.cumulativeWeight;if(0===d){for(let f=0;f!==u;++f)c[h+f]=c[f];d=o}else d+=o,this._mixBufferRegion(c,h,0,o/d,u);this.cumulativeWeight=d}accumulateAdditive(a){const o=this.buffer,c=this.valueSize,u=c*this._addIndex;0===this.cumulativeWeightAdditive&&this._setIdentity(),this._mixBufferRegionAdditive(o,u,0,a,c),this.cumulativeWeightAdditive+=a}apply(a){const o=this.valueSize,c=this.buffer,u=a*o+o,h=this.cumulativeWeight,d=this.cumulativeWeightAdditive,f=this.binding;this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,h<1&&this._mixBufferRegion(c,u,o*this._origIndex,1-h,o),d>0&&this._mixBufferRegionAdditive(c,u,this._addIndex*o,1,o);for(let m=o,g=o+o;m!==g;++m)if(c[m]!==c[m+o]){f.setValue(c,u);break}}saveOriginalState(){const o=this.buffer,c=this.valueSize,u=c*this._origIndex;this.binding.getValue(o,u);for(let h=c,d=u;h!==d;++h)o[h]=o[u+h%c];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){this.binding.setValue(this.buffer,3*this.valueSize)}_setAdditiveIdentityNumeric(){const a=this._addIndex*this.valueSize,o=a+this.valueSize;for(let c=a;c<o;c++)this.buffer[c]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const a=this._origIndex*this.valueSize,o=this._addIndex*this.valueSize;for(let c=0;c<this.valueSize;c++)this.buffer[o+c]=this.buffer[a+c]}_select(a,o,c,u,h){if(u>=.5)for(let d=0;d!==h;++d)a[o+d]=a[c+d]}_slerp(a,o,c,u){xo.slerpFlat(a,o,a,o,a,c,u)}_slerpAdditive(a,o,c,u,h){const d=this._workIndex*h;xo.multiplyQuaternionsFlat(a,d,a,o,a,c),xo.slerpFlat(a,o,a,o,a,d,u)}_lerp(a,o,c,u,h){const d=1-u;for(let f=0;f!==h;++f){const m=o+f;a[m]=a[m]*d+a[c+f]*u}}_lerpAdditive(a,o,c,u,h){for(let d=0;d!==h;++d){const f=o+d;a[f]=a[f]+a[c+d]*u}}}const l5="\\[\\]\\.:\\/",get=new RegExp("["+l5+"]","g"),c5="[^"+l5+"]",yet="[^"+l5.replace("\\.","")+"]",vet=/((?:WC+[\/:])*)/.source.replace("WC",c5),_et=/(WCOD+)?/.source.replace("WCOD",yet),bet=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",c5),Tet=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",c5),wet=new RegExp("^"+vet+_et+bet+Tet+"$"),Cet=["material","materials","bones"];class xet{constructor(a,o,c){const u=c||$i.parseTrackName(o);this._targetGroup=a,this._bindings=a.subscribe_(o,u)}getValue(a,o){this.bind();const u=this._bindings[this._targetGroup.nCachedObjects_];void 0!==u&&u.getValue(a,o)}setValue(a,o){const c=this._bindings;for(let u=this._targetGroup.nCachedObjects_,h=c.length;u!==h;++u)c[u].setValue(a,o)}bind(){const a=this._bindings;for(let o=this._targetGroup.nCachedObjects_,c=a.length;o!==c;++o)a[o].bind()}unbind(){const a=this._bindings;for(let o=this._targetGroup.nCachedObjects_,c=a.length;o!==c;++o)a[o].unbind()}}let $i=(()=>{class l{constructor(o,c,u){this.path=c,this.parsedPath=u||l.parseTrackName(c),this.node=l.findNode(o,this.parsedPath.nodeName)||o,this.rootNode=o,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(o,c,u){return o&&o.isAnimationObjectGroup?new l.Composite(o,c,u):new l(o,c,u)}static sanitizeNodeName(o){return o.replace(/\s/g,"_").replace(get,"")}static parseTrackName(o){const c=wet.exec(o);if(!c)throw new Error("PropertyBinding: Cannot parse trackName: "+o);const u={nodeName:c[2],objectName:c[3],objectIndex:c[4],propertyName:c[5],propertyIndex:c[6]},h=u.nodeName&&u.nodeName.lastIndexOf(".");if(void 0!==h&&-1!==h){const d=u.nodeName.substring(h+1);-1!==Cet.indexOf(d)&&(u.nodeName=u.nodeName.substring(0,h),u.objectName=d)}if(null===u.propertyName||0===u.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+o);return u}static findNode(o,c){if(!c||""===c||"."===c||-1===c||c===o.name||c===o.uuid)return o;if(o.skeleton){const u=o.skeleton.getBoneByName(c);if(void 0!==u)return u}if(o.children){const u=function(d){for(let f=0;f<d.length;f++){const m=d[f];if(m.name===c||m.uuid===c)return m;const g=u(m.children);if(g)return g}return null},h=u(o.children);if(h)return h}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(o,c){o[c]=this.targetObject[this.propertyName]}_getValue_array(o,c){const u=this.resolvedProperty;for(let h=0,d=u.length;h!==d;++h)o[c++]=u[h]}_getValue_arrayElement(o,c){o[c]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(o,c){this.resolvedProperty.toArray(o,c)}_setValue_direct(o,c){this.targetObject[this.propertyName]=o[c]}_setValue_direct_setNeedsUpdate(o,c){this.targetObject[this.propertyName]=o[c],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(o,c){this.targetObject[this.propertyName]=o[c],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(o,c){const u=this.resolvedProperty;for(let h=0,d=u.length;h!==d;++h)u[h]=o[c++]}_setValue_array_setNeedsUpdate(o,c){const u=this.resolvedProperty;for(let h=0,d=u.length;h!==d;++h)u[h]=o[c++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(o,c){const u=this.resolvedProperty;for(let h=0,d=u.length;h!==d;++h)u[h]=o[c++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(o,c){this.resolvedProperty[this.propertyIndex]=o[c]}_setValue_arrayElement_setNeedsUpdate(o,c){this.resolvedProperty[this.propertyIndex]=o[c],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(o,c){this.resolvedProperty[this.propertyIndex]=o[c],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(o,c){this.resolvedProperty.fromArray(o,c)}_setValue_fromArray_setNeedsUpdate(o,c){this.resolvedProperty.fromArray(o,c),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(o,c){this.resolvedProperty.fromArray(o,c),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(o,c){this.bind(),this.getValue(o,c)}_setValue_unbound(o,c){this.bind(),this.setValue(o,c)}bind(){let o=this.node;const c=this.parsedPath,u=c.objectName,h=c.propertyName;let d=c.propertyIndex;if(o||(o=l.findNode(this.rootNode,c.nodeName)||this.rootNode,this.node=o),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!o)return void console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");if(u){let y=c.objectIndex;switch(u){case"materials":if(!o.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!o.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);o=o.material.materials;break;case"bones":if(!o.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);o=o.skeleton.bones;for(let v=0;v<o.length;v++)if(o[v].name===y){y=v;break}break;default:if(void 0===o[u])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);o=o[u]}if(void 0!==y){if(void 0===o[y])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,o);o=o[y]}}const f=o[h];if(void 0===f)return void console.error("THREE.PropertyBinding: Trying to update property for track: "+c.nodeName+"."+h+" but it wasn't found.",o);let m=this.Versioning.None;this.targetObject=o,void 0!==o.needsUpdate?m=this.Versioning.NeedsUpdate:void 0!==o.matrixWorldNeedsUpdate&&(m=this.Versioning.MatrixWorldNeedsUpdate);let g=this.BindingType.Direct;if(void 0!==d){if("morphTargetInfluences"===h){if(!o.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!o.geometry.isBufferGeometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences on THREE.Geometry. Use THREE.BufferGeometry instead.",this);if(!o.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==o.morphTargetDictionary[d]&&(d=o.morphTargetDictionary[d])}g=this.BindingType.ArrayElement,this.resolvedProperty=f,this.propertyIndex=d}else void 0!==f.fromArray&&void 0!==f.toArray?(g=this.BindingType.HasFromToArray,this.resolvedProperty=f):Array.isArray(f)?(g=this.BindingType.EntireArray,this.resolvedProperty=f):this.propertyName=h;this.getValue=this.GetterByBindingType[g],this.setValue=this.SetterByBindingTypeAndVersioning[g][m]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}return l.Composite=xet,l})();$i.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},$i.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},$i.prototype.GetterByBindingType=[$i.prototype._getValue_direct,$i.prototype._getValue_array,$i.prototype._getValue_arrayElement,$i.prototype._getValue_toArray],$i.prototype.SetterByBindingTypeAndVersioning=[[$i.prototype._setValue_direct,$i.prototype._setValue_direct_setNeedsUpdate,$i.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[$i.prototype._setValue_array,$i.prototype._setValue_array_setNeedsUpdate,$i.prototype._setValue_array_setMatrixWorldNeedsUpdate],[$i.prototype._setValue_arrayElement,$i.prototype._setValue_arrayElement_setNeedsUpdate,$i.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[$i.prototype._setValue_fromArray,$i.prototype._setValue_fromArray_setNeedsUpdate,$i.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class Met{constructor(a,o,c=null,u=o.blendMode){this._mixer=a,this._clip=o,this._localRoot=c,this.blendMode=u;const h=o.tracks,d=h.length,f=new Array(d),m={endingStart:P0,endingEnd:P0};for(let g=0;g!==d;++g){const y=h[g].createInterpolant(null);f[g]=y,y.settings=m}this._interpolantSettings=m,this._interpolants=f,this._propertyBindings=new Array(d),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=2201,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(a){return this._startTime=a,this}setLoop(a,o){return this.loop=a,this.repetitions=o,this}setEffectiveWeight(a){return this.weight=a,this._effectiveWeight=this.enabled?a:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(a){return this._scheduleFading(a,0,1)}fadeOut(a){return this._scheduleFading(a,1,0)}crossFadeFrom(a,o,c){if(a.fadeOut(o),this.fadeIn(o),c){const u=this._clip.duration,h=a._clip.duration,f=u/h;a.warp(1,h/u,o),this.warp(f,1,o)}return this}crossFadeTo(a,o,c){return a.crossFadeFrom(this,o,c)}stopFading(){const a=this._weightInterpolant;return null!==a&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(a)),this}setEffectiveTimeScale(a){return this.timeScale=a,this._effectiveTimeScale=this.paused?0:a,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(a){return this.timeScale=this._clip.duration/a,this.stopWarping()}syncWith(a){return this.time=a.time,this.timeScale=a.timeScale,this.stopWarping()}halt(a){return this.warp(this._effectiveTimeScale,0,a)}warp(a,o,c){const u=this._mixer,h=u.time,d=this.timeScale;let f=this._timeScaleInterpolant;null===f&&(f=u._lendControlInterpolant(),this._timeScaleInterpolant=f);const m=f.parameterPositions,g=f.sampleValues;return m[0]=h,m[1]=h+c,g[0]=a/d,g[1]=o/d,this}stopWarping(){const a=this._timeScaleInterpolant;return null!==a&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(a)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(a,o,c,u){if(!this.enabled)return void this._updateWeight(a);const h=this._startTime;if(null!==h){const m=(a-h)*c;if(m<0||0===c)return;this._startTime=null,o=c*m}o*=this._updateTimeScale(a);const d=this._updateTime(o),f=this._updateWeight(a);if(f>0){const m=this._interpolants,g=this._propertyBindings;switch(this.blendMode){case 2501:for(let y=0,v=m.length;y!==v;++y)m[y].evaluate(d),g[y].accumulateAdditive(f);break;case 2500:default:for(let y=0,v=m.length;y!==v;++y)m[y].evaluate(d),g[y].accumulate(u,f)}}}_updateWeight(a){let o=0;if(this.enabled){o=this.weight;const c=this._weightInterpolant;if(null!==c){const u=c.evaluate(a)[0];o*=u,a>c.parameterPositions[1]&&(this.stopFading(),0===u&&(this.enabled=!1))}}return this._effectiveWeight=o,o}_updateTimeScale(a){let o=0;if(!this.paused){o=this.timeScale;const c=this._timeScaleInterpolant;null!==c&&(o*=c.evaluate(a)[0],a>c.parameterPositions[1]&&(this.stopWarping(),0===o?this.paused=!0:this.timeScale=o))}return this._effectiveTimeScale=o,o}_updateTime(a){const o=this._clip.duration,c=this.loop;let u=this.time+a,h=this._loopCount;const d=2202===c;if(0===a)return-1===h?u:d&&1==(1&h)?o-u:u;if(2200===c){-1===h&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(u>=o)u=o;else{if(!(u<0)){this.time=u;break e}u=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=u,this._mixer.dispatchEvent({type:"finished",action:this,direction:a<0?-1:1})}}else{if(-1===h&&(a>=0?(h=0,this._setEndings(!0,0===this.repetitions,d)):this._setEndings(0===this.repetitions,!0,d)),u>=o||u<0){const f=Math.floor(u/o);u-=o*f,h+=Math.abs(f);const m=this.repetitions-h;if(m<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,u=a>0?o:0,this.time=u,this._mixer.dispatchEvent({type:"finished",action:this,direction:a>0?1:-1});else{if(1===m){const g=a<0;this._setEndings(g,!g,d)}else this._setEndings(!1,!1,d);this._loopCount=h,this.time=u,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:f})}}else this.time=u;if(d&&1==(1&h))return o-u}return u}_setEndings(a,o,c){const u=this._interpolantSettings;c?(u.endingStart=L0,u.endingEnd=L0):(u.endingStart=a?this.zeroSlopeAtStart?L0:P0:2402,u.endingEnd=o?this.zeroSlopeAtEnd?L0:P0:2402)}_scheduleFading(a,o,c){const u=this._mixer,h=u.time;let d=this._weightInterpolant;null===d&&(d=u._lendControlInterpolant(),this._weightInterpolant=d);const f=d.parameterPositions,m=d.sampleValues;return f[0]=h,m[0]=o,f[1]=h+a,m[1]=c,this}}(class extends Vp{constructor(a){super(),this._root=a,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(a,o){const c=a._localRoot||this._root,u=a._clip.tracks,h=u.length,d=a._propertyBindings,f=a._interpolants,m=c.uuid,g=this._bindingsByRootAndName;let y=g[m];void 0===y&&(y={},g[m]=y);for(let v=0;v!==h;++v){const _=u[v],b=_.name;let w=y[b];if(void 0!==w)d[v]=w;else{if(w=d[v],void 0!==w){null===w._cacheIndex&&(++w.referenceCount,this._addInactiveBinding(w,m,b));continue}w=new met($i.create(c,b,o&&o._propertyBindings[v].binding.parsedPath),_.ValueTypeName,_.getValueSize()),++w.referenceCount,this._addInactiveBinding(w,m,b),d[v]=w}f[v].resultBuffer=w.buffer}}_activateAction(a){if(!this._isActiveAction(a)){if(null===a._cacheIndex){const c=(a._localRoot||this._root).uuid,u=a._clip.uuid,h=this._actionsByClip[u];this._bindAction(a,h&&h.knownActions[0]),this._addInactiveAction(a,u,c)}const o=a._propertyBindings;for(let c=0,u=o.length;c!==u;++c){const h=o[c];0==h.useCount++&&(this._lendBinding(h),h.saveOriginalState())}this._lendAction(a)}}_deactivateAction(a){if(this._isActiveAction(a)){const o=a._propertyBindings;for(let c=0,u=o.length;c!==u;++c){const h=o[c];0==--h.useCount&&(h.restoreOriginalState(),this._takeBackBinding(h))}this._takeBackAction(a)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const a=this;this.stats={actions:{get total(){return a._actions.length},get inUse(){return a._nActiveActions}},bindings:{get total(){return a._bindings.length},get inUse(){return a._nActiveBindings}},controlInterpolants:{get total(){return a._controlInterpolants.length},get inUse(){return a._nActiveControlInterpolants}}}}_isActiveAction(a){const o=a._cacheIndex;return null!==o&&o<this._nActiveActions}_addInactiveAction(a,o,c){const u=this._actions,h=this._actionsByClip;let d=h[o];if(void 0===d)d={knownActions:[a],actionByRoot:{}},a._byClipCacheIndex=0,h[o]=d;else{const f=d.knownActions;a._byClipCacheIndex=f.length,f.push(a)}a._cacheIndex=u.length,u.push(a),d.actionByRoot[c]=a}_removeInactiveAction(a){const o=this._actions,c=o[o.length-1],u=a._cacheIndex;c._cacheIndex=u,o[u]=c,o.pop(),a._cacheIndex=null;const h=a._clip.uuid,d=this._actionsByClip,f=d[h],m=f.knownActions,g=m[m.length-1],y=a._byClipCacheIndex;g._byClipCacheIndex=y,m[y]=g,m.pop(),a._byClipCacheIndex=null,delete f.actionByRoot[(a._localRoot||this._root).uuid],0===m.length&&delete d[h],this._removeInactiveBindingsForAction(a)}_removeInactiveBindingsForAction(a){const o=a._propertyBindings;for(let c=0,u=o.length;c!==u;++c){const h=o[c];0==--h.referenceCount&&this._removeInactiveBinding(h)}}_lendAction(a){const o=this._actions,c=a._cacheIndex,u=this._nActiveActions++,h=o[u];a._cacheIndex=u,o[u]=a,h._cacheIndex=c,o[c]=h}_takeBackAction(a){const o=this._actions,c=a._cacheIndex,u=--this._nActiveActions,h=o[u];a._cacheIndex=u,o[u]=a,h._cacheIndex=c,o[c]=h}_addInactiveBinding(a,o,c){const u=this._bindingsByRootAndName,h=this._bindings;let d=u[o];void 0===d&&(d={},u[o]=d),d[c]=a,a._cacheIndex=h.length,h.push(a)}_removeInactiveBinding(a){const o=this._bindings,c=a.binding,u=c.rootNode.uuid,h=c.path,d=this._bindingsByRootAndName,f=d[u],m=o[o.length-1],g=a._cacheIndex;m._cacheIndex=g,o[g]=m,o.pop(),delete f[h],0===Object.keys(f).length&&delete d[u]}_lendBinding(a){const o=this._bindings,c=a._cacheIndex,u=this._nActiveBindings++,h=o[u];a._cacheIndex=u,o[u]=a,h._cacheIndex=c,o[c]=h}_takeBackBinding(a){const o=this._bindings,c=a._cacheIndex,u=--this._nActiveBindings,h=o[u];a._cacheIndex=u,o[u]=a,h._cacheIndex=c,o[c]=h}_lendControlInterpolant(){const a=this._controlInterpolants,o=this._nActiveControlInterpolants++;let c=a[o];return void 0===c&&(c=new aie(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer),c.__cacheIndex=o,a[o]=c),c}_takeBackControlInterpolant(a){const o=this._controlInterpolants,c=a.__cacheIndex,u=--this._nActiveControlInterpolants,h=o[u];a.__cacheIndex=u,o[u]=a,h.__cacheIndex=c,o[c]=h}clipAction(a,o,c){const u=o||this._root,h=u.uuid;let d="string"==typeof a?tC.findByName(u,a):a;const f=null!==d?d.uuid:a,m=this._actionsByClip[f];let g=null;if(void 0===c&&(c=null!==d?d.blendMode:2500),void 0!==m){const v=m.actionByRoot[h];if(void 0!==v&&v.blendMode===c)return v;g=m.knownActions[0],null===d&&(d=g._clip)}if(null===d)return null;const y=new Met(this,d,o,c);return this._bindAction(y,g),this._addInactiveAction(y,f,h),y}existingAction(a,o){const c=o||this._root,u=c.uuid,h="string"==typeof a?tC.findByName(c,a):a,f=this._actionsByClip[h?h.uuid:a];return void 0!==f&&f.actionByRoot[u]||null}stopAllAction(){const a=this._actions;for(let c=this._nActiveActions-1;c>=0;--c)a[c].stop();return this}update(a){const o=this._actions,c=this._nActiveActions,u=this.time+=a*=this.timeScale,h=Math.sign(a),d=this._accuIndex^=1;for(let g=0;g!==c;++g)o[g]._update(u,a,h,d);const f=this._bindings,m=this._nActiveBindings;for(let g=0;g!==m;++g)f[g].apply(d);return this}setTime(a){this.time=0;for(let o=0;o<this._actions.length;o++)this._actions[o].time=0;return this.update(a)}getRoot(){return this._root}uncacheClip(a){const o=this._actions,c=a.uuid,u=this._actionsByClip,h=u[c];if(void 0!==h){const d=h.knownActions;for(let f=0,m=d.length;f!==m;++f){const g=d[f];this._deactivateAction(g);const y=g._cacheIndex,v=o[o.length-1];g._cacheIndex=null,g._byClipCacheIndex=null,v._cacheIndex=y,o[y]=v,o.pop(),this._removeInactiveBindingsForAction(g)}delete u[c]}}uncacheRoot(a){const o=a.uuid,c=this._actionsByClip;for(const d in c){const m=c[d].actionByRoot[o];void 0!==m&&(this._deactivateAction(m),this._removeInactiveAction(m))}const h=this._bindingsByRootAndName[o];if(void 0!==h)for(const d in h){const f=h[d];f.restoreOriginalState(),this._removeInactiveBinding(f)}}uncacheAction(a,o){const c=this.existingAction(a,o);null!==c&&(this._deactivateAction(c),this._removeInactiveAction(c))}}).prototype._controlInterpolantsResultBuffer=new Float32Array(1);class u5{constructor(a){"string"==typeof a&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),a=arguments[1]),this.value=a}clone(){return new u5(void 0===this.value.clone?this.value:this.value.clone())}}(class extends Zg{constructor(a,o,c=1){super(a,o),this.meshPerAttribute=c}copy(a){return super.copy(a),this.meshPerAttribute=a.meshPerAttribute,this}clone(a){const o=super.clone(a);return o.meshPerAttribute=this.meshPerAttribute,o}toJSON(a){const o=super.toJSON(a);return o.isInstancedInterleavedBuffer=!0,o.meshPerAttribute=this.meshPerAttribute,o}}).prototype.isInstancedInterleavedBuffer=!0;class Nie{constructor(a=1,o=0,c=0){return this.radius=a,this.phi=o,this.theta=c,this}set(a,o,c){return this.radius=a,this.phi=o,this.theta=c,this}copy(a){return this.radius=a.radius,this.phi=a.phi,this.theta=a.theta,this}makeSafe(){const a=1e-6;return this.phi=Math.max(a,Math.min(Math.PI-a,this.phi)),this}setFromVector3(a){return this.setFromCartesianCoords(a.x,a.y,a.z)}setFromCartesianCoords(a,o,c){return this.radius=Math.sqrt(a*a+o*o+c*c),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(a,c),this.phi=Math.acos(aa(o/this.radius,-1,1))),this}clone(){return(new this.constructor).copy(this)}}const Fie=new St;class rC{constructor(a=new St(1/0,1/0),o=new St(-1/0,-1/0)){this.min=a,this.max=o}set(a,o){return this.min.copy(a),this.max.copy(o),this}setFromPoints(a){this.makeEmpty();for(let o=0,c=a.length;o<c;o++)this.expandByPoint(a[o]);return this}setFromCenterAndSize(a,o){const c=Fie.copy(o).multiplyScalar(.5);return this.min.copy(a).sub(c),this.max.copy(a).add(c),this}clone(){return(new this.constructor).copy(this)}copy(a){return this.min.copy(a.min),this.max.copy(a.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(a){return this.isEmpty()?a.set(0,0):a.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(a){return this.isEmpty()?a.set(0,0):a.subVectors(this.max,this.min)}expandByPoint(a){return this.min.min(a),this.max.max(a),this}expandByVector(a){return this.min.sub(a),this.max.add(a),this}expandByScalar(a){return this.min.addScalar(-a),this.max.addScalar(a),this}containsPoint(a){return!(a.x<this.min.x||a.x>this.max.x||a.y<this.min.y||a.y>this.max.y)}containsBox(a){return this.min.x<=a.min.x&&a.max.x<=this.max.x&&this.min.y<=a.min.y&&a.max.y<=this.max.y}getParameter(a,o){return o.set((a.x-this.min.x)/(this.max.x-this.min.x),(a.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(a){return!(a.max.x<this.min.x||a.min.x>this.max.x||a.max.y<this.min.y||a.min.y>this.max.y)}clampPoint(a,o){return o.copy(a).clamp(this.min,this.max)}distanceToPoint(a){return Fie.copy(a).clamp(this.min,this.max).sub(a).length()}intersect(a){return this.min.max(a.min),this.max.min(a.max),this}union(a){return this.min.min(a.min),this.max.max(a.max),this}translate(a){return this.min.add(a),this.max.add(a),this}equals(a){return a.min.equals(this.min)&&a.max.equals(this.max)}}rC.prototype.isBox2=!0,class extends ui{constructor(a){super(),this.material=a,this.render=function(){},this.hasPositions=!1,this.hasNormals=!1,this.hasColors=!1,this.hasUvs=!1,this.positionArray=null,this.normalArray=null,this.colorArray=null,this.uvArray=null,this.count=0}}.prototype.isImmediateRenderObject=!0;const tm=new oe,LR=new An,d5=new An;function Bie(l){const a=[];l&&l.isBone&&a.push(l);for(let o=0;o<l.children.length;o++)a.push.apply(a,Bie(l.children[o]));return a}const Wie=new Float32Array(1);new Int32Array(Wie.buffer),jc.create=function(l,a){return console.log("THREE.Curve.create() has been deprecated"),l.prototype=Object.create(jc.prototype),l.prototype.constructor=l,l.prototype.getPoint=a,l},DR.prototype.fromPoints=function(l){return console.warn("THREE.Path: .fromPoints() has been renamed to .setFromPoints()."),this.setFromPoints(l)},class extends _f{constructor(a=10,o=10,c=4473924,u=8947848){c=new Zt(c),u=new Zt(u);const h=o/2,d=a/o,f=a/2,m=[],g=[];for(let _=0,b=0,w=-f;_<=o;_++,w+=d){m.push(-f,0,w,f,0,w),m.push(w,0,-f,w,0,f);const C=_===h?c:u;C.toArray(g,b),b+=3,C.toArray(g,b),b+=3,C.toArray(g,b),b+=3,C.toArray(g,b),b+=3}const y=new Kn;y.setAttribute("position",new wn(m,3)),y.setAttribute("color",new wn(g,3)),super(y,new jo({vertexColors:!0,toneMapped:!1})),this.type="GridHelper"}}.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")},class extends _f{constructor(a){const o=Bie(a),c=new Kn,u=[],h=[],d=new Zt(0,0,1),f=new Zt(0,1,0);for(let g=0;g<o.length;g++){const y=o[g];y.parent&&y.parent.isBone&&(u.push(0,0,0),u.push(0,0,0),h.push(d.r,d.g,d.b),h.push(f.r,f.g,f.b))}c.setAttribute("position",new wn(u,3)),c.setAttribute("color",new wn(h,3)),super(c,new jo({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0})),this.type="SkeletonHelper",this.isSkeletonHelper=!0,this.root=a,this.bones=o,this.matrix=a.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(a){const o=this.bones,c=this.geometry,u=c.getAttribute("position");d5.copy(this.root.matrixWorld).invert();for(let h=0,d=0;h<o.length;h++){const f=o[h];f.parent&&f.parent.isBone&&(LR.multiplyMatrices(d5,f.matrixWorld),tm.setFromMatrixPosition(LR),u.setXYZ(d,tm.x,tm.y,tm.z),LR.multiplyMatrices(d5,f.parent.matrixWorld),tm.setFromMatrixPosition(LR),u.setXYZ(d+1,tm.x,tm.y,tm.z),d+=2)}c.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(a)}}.prototype.update=function(){console.error("THREE.SkeletonHelper: update() no longer needs to be called.")},Tf.prototype.extractUrlBase=function(l){return console.warn("THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead."),em.extractUrlBase(l)},Tf.Handlers={add:function(){console.error("THREE.Loader: Handlers.add() has been removed. Use LoadingManager.addHandler() instead.")},get:function(){console.error("THREE.Loader: Handlers.get() has been removed. Use LoadingManager.getHandler() instead.")}},rC.prototype.center=function(l){return console.warn("THREE.Box2: .center() has been renamed to .getCenter()."),this.getCenter(l)},rC.prototype.empty=function(){return console.warn("THREE.Box2: .empty() has been renamed to .isEmpty()."),this.isEmpty()},rC.prototype.isIntersectionBox=function(l){return console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(l)},rC.prototype.size=function(l){return console.warn("THREE.Box2: .size() has been renamed to .getSize()."),this.getSize(l)},oc.prototype.center=function(l){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(l)},oc.prototype.empty=function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()},oc.prototype.isIntersectionBox=function(l){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(l)},oc.prototype.isIntersectionSphere=function(l){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(l)},oc.prototype.size=function(l){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(l)},Gp.prototype.empty=function(){return console.warn("THREE.Sphere: .empty() has been renamed to .isEmpty()."),this.isEmpty()},qI.prototype.setFromMatrix=function(l){return console.warn("THREE.Frustum: .setFromMatrix() has been renamed to .setFromProjectionMatrix()."),this.setFromProjectionMatrix(l)},zo.prototype.flattenToArrayOffset=function(l,a){return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(l,a)},zo.prototype.multiplyVector3=function(l){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),l.applyMatrix3(this)},zo.prototype.multiplyVector3Array=function(){console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")},zo.prototype.applyToBufferAttribute=function(l){return console.warn("THREE.Matrix3: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix3( matrix ) instead."),l.applyMatrix3(this)},zo.prototype.applyToVector3Array=function(){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")},zo.prototype.getInverse=function(l){return console.warn("THREE.Matrix3: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead."),this.copy(l).invert()},An.prototype.extractPosition=function(l){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(l)},An.prototype.flattenToArrayOffset=function(l,a){return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(l,a)},An.prototype.getPosition=function(){return console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),(new oe).setFromMatrixColumn(this,3)},An.prototype.setRotationFromQuaternion=function(l){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(l)},An.prototype.multiplyToArray=function(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")},An.prototype.multiplyVector3=function(l){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead."),l.applyMatrix4(this)},An.prototype.multiplyVector4=function(l){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),l.applyMatrix4(this)},An.prototype.multiplyVector3Array=function(){console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")},An.prototype.rotateAxis=function(l){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),l.transformDirection(this)},An.prototype.crossVector=function(l){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),l.applyMatrix4(this)},An.prototype.translate=function(){console.error("THREE.Matrix4: .translate() has been removed.")},An.prototype.rotateX=function(){console.error("THREE.Matrix4: .rotateX() has been removed.")},An.prototype.rotateY=function(){console.error("THREE.Matrix4: .rotateY() has been removed.")},An.prototype.rotateZ=function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")},An.prototype.rotateByAxis=function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")},An.prototype.applyToBufferAttribute=function(l){return console.warn("THREE.Matrix4: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix4( matrix ) instead."),l.applyMatrix4(this)},An.prototype.applyToVector3Array=function(){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")},An.prototype.makeFrustum=function(l,a,o,c,u,h){return console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead."),this.makePerspective(l,a,c,o,u,h)},An.prototype.getInverse=function(l){return console.warn("THREE.Matrix4: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead."),this.copy(l).invert()},yf.prototype.isIntersectionLine=function(l){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(l)},xo.prototype.multiplyVector3=function(l){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),l.applyQuaternion(this)},xo.prototype.inverse=function(){return console.warn("THREE.Quaternion: .inverse() has been renamed to invert()."),this.invert()},Xg.prototype.isIntersectionBox=function(l){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(l)},Xg.prototype.isIntersectionPlane=function(l){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(l)},Xg.prototype.isIntersectionSphere=function(l){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(l)},lo.prototype.area=function(){return console.warn("THREE.Triangle: .area() has been renamed to .getArea()."),this.getArea()},lo.prototype.barycoordFromPoint=function(l,a){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),this.getBarycoord(l,a)},lo.prototype.midpoint=function(l){return console.warn("THREE.Triangle: .midpoint() has been renamed to .getMidpoint()."),this.getMidpoint(l)},lo.prototypenormal=function(l){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),this.getNormal(l)},lo.prototype.plane=function(l){return console.warn("THREE.Triangle: .plane() has been renamed to .getPlane()."),this.getPlane(l)},lo.barycoordFromPoint=function(l,a,o,c,u){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),lo.getBarycoord(l,a,o,c,u)},lo.normal=function(l,a,o,c){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),lo.getNormal(l,a,o,c)},Qp.prototype.extractAllPoints=function(l){return console.warn("THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead."),this.extractPoints(l)},Qp.prototype.extrude=function(l){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new td(this,l)},Qp.prototype.makeGeometry=function(l){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new Kw(this,l)},St.prototype.fromAttribute=function(l,a,o){return console.warn("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(l,a,o)},St.prototype.distanceToManhattan=function(l){return console.warn("THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(l)},St.prototype.lengthManhattan=function(){return console.warn("THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()},oe.prototype.setEulerFromRotationMatrix=function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},oe.prototype.setEulerFromQuaternion=function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},oe.prototype.getPositionFromMatrix=function(l){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(l)},oe.prototype.getScaleFromMatrix=function(l){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(l)},oe.prototype.getColumnFromMatrix=function(l,a){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(a,l)},oe.prototype.applyProjection=function(l){return console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead."),this.applyMatrix4(l)},oe.prototype.fromAttribute=function(l,a,o){return console.warn("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(l,a,o)},oe.prototype.distanceToManhattan=function(l){return console.warn("THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(l)},oe.prototype.lengthManhattan=function(){return console.warn("THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()},Oi.prototype.fromAttribute=function(l,a,o){return console.warn("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(l,a,o)},Oi.prototype.lengthManhattan=function(){return console.warn("THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()},ui.prototype.getChildByName=function(l){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(l)},ui.prototype.renderDepth=function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},ui.prototype.translate=function(l,a){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(a,l)},ui.prototype.getWorldRotation=function(){console.error("THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.")},ui.prototype.applyMatrix=function(l){return console.warn("THREE.Object3D: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(l)},Object.defineProperties(ui.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(l){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=l}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}}),Hs.prototype.setDrawMode=function(){console.error("THREE.Mesh: .setDrawMode() has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")},Object.defineProperties(Hs.prototype,{drawMode:{get:function(){return console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode."),0},set:function(){console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")}}}),tR.prototype.initBones=function(){console.error("THREE.SkinnedMesh: initBones() has been removed.")},co.prototype.setLens=function(l,a){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),void 0!==a&&(this.filmGauge=a),this.setFocalLength(l)},Object.defineProperties(rd.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(l){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=l}},shadowCameraLeft:{set:function(l){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=l}},shadowCameraRight:{set:function(l){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=l}},shadowCameraTop:{set:function(l){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=l}},shadowCameraBottom:{set:function(l){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=l}},shadowCameraNear:{set:function(l){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=l}},shadowCameraFar:{set:function(l){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=l}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(l){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=l}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(l){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=l}},shadowMapHeight:{set:function(l){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=l}}}),Object.defineProperties(Ei.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),this.array.length}},dynamic:{get:function(){return console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.usage===Ew},set:function(){console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.setUsage(Ew)}}}),Ei.prototype.setDynamic=function(l){return console.warn("THREE.BufferAttribute: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(!0===l?Ew:xw),this},Ei.prototype.copyIndicesArray=function(){console.error("THREE.BufferAttribute: .copyIndicesArray() has been removed.")},Ei.prototype.setArray=function(){console.error("THREE.BufferAttribute: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")},Kn.prototype.addIndex=function(l){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(l)},Kn.prototype.addAttribute=function(l,a){return console.warn("THREE.BufferGeometry: .addAttribute() has been renamed to .setAttribute()."),a&&a.isBufferAttribute||a&&a.isInterleavedBufferAttribute?"index"===l?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),this.setIndex(a),this):this.setAttribute(l,a):(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.setAttribute(l,new Ei(arguments[1],arguments[2])))},Kn.prototype.addDrawCall=function(l,a,o){void 0!==o&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(l,a)},Kn.prototype.clearDrawCalls=function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()},Kn.prototype.computeOffsets=function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")},Kn.prototype.removeAttribute=function(l){return console.warn("THREE.BufferGeometry: .removeAttribute() has been renamed to .deleteAttribute()."),this.deleteAttribute(l)},Kn.prototype.applyMatrix=function(l){return console.warn("THREE.BufferGeometry: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(l)},Object.defineProperties(Kn.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}}),Zg.prototype.setDynamic=function(l){return console.warn("THREE.InterleavedBuffer: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(!0===l?Ew:xw),this},Zg.prototype.setArray=function(){console.error("THREE.InterleavedBuffer: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")},td.prototype.getArrays=function(){console.error("THREE.ExtrudeGeometry: .getArrays() has been removed.")},td.prototype.addShapeList=function(){console.error("THREE.ExtrudeGeometry: .addShapeList() has been removed.")},td.prototype.addShape=function(){console.error("THREE.ExtrudeGeometry: .addShape() has been removed.")},Bw.prototype.dispose=function(){console.error("THREE.Scene: .dispose() has been removed.")},u5.prototype.onUpdate=function(){return console.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead."),this},Object.defineProperties(Eo.prototype,{wrapAround:{get:function(){console.warn("THREE.Material: .wrapAround has been removed.")},set:function(){console.warn("THREE.Material: .wrapAround has been removed.")}},overdraw:{get:function(){console.warn("THREE.Material: .overdraw has been removed.")},set:function(){console.warn("THREE.Material: .overdraw has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE.Material: .wrapRGB has been removed."),new Zt}},shading:{get:function(){console.error("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.")},set:function(l){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=1===l}},stencilMask:{get:function(){return console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask},set:function(l){console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask=l}},vertexTangents:{get:function(){console.warn("THREE."+this.type+": .vertexTangents has been removed.")},set:function(){console.warn("THREE."+this.type+": .vertexTangents has been removed.")}}}),Object.defineProperties(gf.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(l){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=l}}}),Mi.prototype.clearTarget=function(l,a,o,c){console.warn("THREE.WebGLRenderer: .clearTarget() has been deprecated. Use .setRenderTarget() and .clear() instead."),this.setRenderTarget(l),this.clear(a,o,c)},Mi.prototype.animate=function(l){console.warn("THREE.WebGLRenderer: .animate() is now .setAnimationLoop()."),this.setAnimationLoop(l)},Mi.prototype.getCurrentRenderTarget=function(){return console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget()."),this.getRenderTarget()},Mi.prototype.getMaxAnisotropy=function(){return console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy()."),this.capabilities.getMaxAnisotropy()},Mi.prototype.getPrecision=function(){return console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision."),this.capabilities.precision},Mi.prototype.resetGLState=function(){return console.warn("THREE.WebGLRenderer: .resetGLState() is now .state.reset()."),this.state.reset()},Mi.prototype.supportsFloatTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")},Mi.prototype.supportsHalfFloatTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")},Mi.prototype.supportsStandardDerivatives=function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")},Mi.prototype.supportsCompressedTextureS3TC=function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")},Mi.prototype.supportsCompressedTexturePVRTC=function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")},Mi.prototype.supportsBlendMinMax=function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")},Mi.prototype.supportsVertexTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures},Mi.prototype.supportsInstancedArrays=function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")},Mi.prototype.enableScissorTest=function(l){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(l)},Mi.prototype.initMaterial=function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},Mi.prototype.addPrePlugin=function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},Mi.prototype.addPostPlugin=function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},Mi.prototype.updateShadowMap=function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")},Mi.prototype.setFaceCulling=function(){console.warn("THREE.WebGLRenderer: .setFaceCulling() has been removed.")},Mi.prototype.allocTextureUnit=function(){console.warn("THREE.WebGLRenderer: .allocTextureUnit() has been removed.")},Mi.prototype.setTexture=function(){console.warn("THREE.WebGLRenderer: .setTexture() has been removed.")},Mi.prototype.setTexture2D=function(){console.warn("THREE.WebGLRenderer: .setTexture2D() has been removed.")},Mi.prototype.setTextureCube=function(){console.warn("THREE.WebGLRenderer: .setTextureCube() has been removed.")},Mi.prototype.getActiveMipMapLevel=function(){return console.warn("THREE.WebGLRenderer: .getActiveMipMapLevel() is now .getActiveMipmapLevel()."),this.getActiveMipmapLevel()},Object.defineProperties(Mi.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(l){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=l}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(l){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=l}},shadowMapCullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")}},context:{get:function(){return console.warn("THREE.WebGLRenderer: .context has been removed. Use .getContext() instead."),this.getContext()}},vr:{get:function(){return console.warn("THREE.WebGLRenderer: .vr has been renamed to .xr"),this.xr}},gammaInput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead."),!1},set:function(){console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead.")}},gammaOutput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),!1},set:function(l){console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),this.outputEncoding=!0===l?zg:Ml}},toneMappingWhitePoint:{get:function(){return console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed."),1},set:function(){console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed.")}}}),Object.defineProperties(mre.prototype,{cullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")}},renderReverseSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")}},renderSingleSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")}}}),Object.defineProperties(Kh.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(l){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=l}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(l){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=l}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(l){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=l}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(l){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=l}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(l){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=l}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(l){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=l}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(l){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=l}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(l){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=l}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(l){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=l}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(l){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=l}}}),class extends ui{constructor(a){super(),this.type="Audio",this.listener=a,this.context=a.context,this.gain=this.context.createGain(),this.gain.connect(a.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(a){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=a,this.connect(),this}setMediaElementSource(a){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(a),this.connect(),this}setMediaStreamSource(a){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(a),this.connect(),this}setBuffer(a){return this.buffer=a,this.sourceType="buffer",this.autoplay&&this.play(),this}play(a=0){if(!0===this.isPlaying)return void console.warn("THREE.Audio: Audio is already playing.");if(!1===this.hasPlaybackControl)return void console.warn("THREE.Audio: this Audio has no playback control.");this._startedAt=this.context.currentTime+a;const o=this.context.createBufferSource();return o.buffer=this.buffer,o.loop=this.loop,o.loopStart=this.loopStart,o.loopEnd=this.loopEnd,o.onended=this.onEnded.bind(this),o.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=o,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(!1!==this.hasPlaybackControl)return!0===this.isPlaying&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,!0===this.loop&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this;console.warn("THREE.Audio: this Audio has no playback control.")}stop(){if(!1!==this.hasPlaybackControl)return this._progress=0,this.source.stop(),this.source.onended=null,this.isPlaying=!1,this;console.warn("THREE.Audio: this Audio has no playback control.")}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let a=1,o=this.filters.length;a<o;a++)this.filters[a-1].connect(this.filters[a]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let a=1,o=this.filters.length;a<o;a++)this.filters[a-1].disconnect(this.filters[a]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}getFilters(){return this.filters}setFilters(a){return a||(a=[]),!0===this._connected?(this.disconnect(),this.filters=a.slice(),this.connect()):this.filters=a.slice(),this}setDetune(a){if(this.detune=a,void 0!==this.source.detune)return!0===this.isPlaying&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(a){return this.setFilters(a?[a]:[])}setPlaybackRate(a){if(!1!==this.hasPlaybackControl)return this.playbackRate=a,!0===this.isPlaying&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this;console.warn("THREE.Audio: this Audio has no playback control.")}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return!1===this.hasPlaybackControl?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(a){if(!1!==this.hasPlaybackControl)return this.loop=a,!0===this.isPlaying&&(this.source.loop=this.loop),this;console.warn("THREE.Audio: this Audio has no playback control.")}setLoopStart(a){return this.loopStart=a,this}setLoopEnd(a){return this.loopEnd=a,this}getVolume(){return this.gain.gain.value}setVolume(a){return this.gain.gain.setTargetAtTime(a,this.context.currentTime,.01),this}}.prototype.load=function(l){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");const a=this;return(new oet).load(l,function(c){a.setBuffer(c)}),this},DB.prototype.updateCubeMap=function(l,a){return console.warn("THREE.CubeCamera: .updateCubeMap() is now .update()."),this.update(l,a)},DB.prototype.clear=function(l,a,o,c){return console.warn("THREE.CubeCamera: .clear() is now .renderTarget.clear()."),this.renderTarget.clear(l,a,o,c)},N0.crossOrigin=void 0,N0.loadTexture=function(l,a,o,c){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");const u=new hie;u.setCrossOrigin(this.crossOrigin);const h=u.load(l,o,void 0,c);return a&&(h.mapping=a),h},N0.loadTextureCube=function(l,a,o,c){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");const u=new uie;u.setCrossOrigin(this.crossOrigin);const h=u.load(l,o,void 0,c);return a&&(h.mapping=a),h},N0.loadCompressedTexture=function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")},N0.loadCompressedTextureCube=function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")},"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:"132"}})),"undefined"!=typeof window&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__="132");const qie={type:"change"},p5={type:"start"},m5={type:"end"};class Bet extends Vp{constructor(a,o){super(),void 0===o&&console.warn('THREE.OrbitControls: The second parameter "domElement" is now mandatory.'),o===document&&console.error('THREE.OrbitControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.'),this.object=a,this.domElement=o,this.domElement.style.touchAction="none",this.enabled=!0,this.target=new oe,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},this.mouseButtons={LEFT:0,MIDDLE:1,RIGHT:2},this.touches={ONE:0,TWO:2},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this._domElementKeyEvents=null,this.getPolarAngle=function(){return f.phi},this.getAzimuthalAngle=function(){return f.theta},this.getDistance=function(){return this.object.position.distanceTo(this.target)},this.listenToKeyEvents=function(Ne){Ne.addEventListener("keydown",Bt),this._domElementKeyEvents=Ne},this.saveState=function(){c.target0.copy(c.target),c.position0.copy(c.object.position),c.zoom0=c.object.zoom},this.reset=function(){c.target.copy(c.target0),c.object.position.copy(c.position0),c.object.zoom=c.zoom0,c.object.updateProjectionMatrix(),c.dispatchEvent(qie),c.update(),h=u.NONE},this.update=function(){const Ne=new oe,nn=(new xo).setFromUnitVectors(a.up,new oe(0,1,0)),Hr=nn.clone().invert(),or=new oe,oi=new xo,gs=2*Math.PI;return function(){const dc=c.object.position;Ne.copy(dc).sub(c.target),Ne.applyQuaternion(nn),f.setFromVector3(Ne),c.autoRotate&&h===u.NONE&&Q(2*Math.PI/60/60*c.autoRotateSpeed),c.enableDamping?(f.theta+=m.theta*c.dampingFactor,f.phi+=m.phi*c.dampingFactor):(f.theta+=m.theta,f.phi+=m.phi);let Mo=c.minAzimuthAngle,uo=c.maxAzimuthAngle;return isFinite(Mo)&&isFinite(uo)&&(Mo<-Math.PI?Mo+=gs:Mo>Math.PI&&(Mo-=gs),uo<-Math.PI?uo+=gs:uo>Math.PI&&(uo-=gs),f.theta=Mo<=uo?Math.max(Mo,Math.min(uo,f.theta)):f.theta>(Mo+uo)/2?Math.max(Mo,f.theta):Math.min(uo,f.theta)),f.phi=Math.max(c.minPolarAngle,Math.min(c.maxPolarAngle,f.phi)),f.makeSafe(),f.radius*=g,f.radius=Math.max(c.minDistance,Math.min(c.maxDistance,f.radius)),!0===c.enableDamping?c.target.addScaledVector(y,c.dampingFactor):c.target.add(y),Ne.setFromSpherical(f),Ne.applyQuaternion(Hr),dc.copy(c.target).add(Ne),c.object.lookAt(c.target),!0===c.enableDamping?(m.theta*=1-c.dampingFactor,m.phi*=1-c.dampingFactor,y.multiplyScalar(1-c.dampingFactor)):(m.set(0,0,0),y.set(0,0,0)),g=1,!!(v||or.distanceToSquared(c.object.position)>d||8*(1-oi.dot(c.object.quaternion))>d)&&(c.dispatchEvent(qie),or.copy(c.object.position),oi.copy(c.object.quaternion),v=!1,!0)}}(),this.dispose=function(){c.domElement.removeEventListener("contextmenu",Gt),c.domElement.removeEventListener("pointerdown",Ft),c.domElement.removeEventListener("pointercancel",st),c.domElement.removeEventListener("wheel",Tn),c.domElement.removeEventListener("pointermove",ge),c.domElement.removeEventListener("pointerup",ee),null!==c._domElementKeyEvents&&c._domElementKeyEvents.removeEventListener("keydown",Bt)};const c=this,u={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let h=u.NONE;const d=1e-6,f=new Nie,m=new Nie;let g=1;const y=new oe;let v=!1;const _=new St,b=new St,w=new St,C=new St,E=new St,M=new St,x=new St,R=new St,P=new St,k=[],W={};function K(){return Math.pow(.95,c.zoomSpeed)}function Q(Ne){m.theta-=Ne}function se(Ne){m.phi-=Ne}const te=function(){const Ne=new oe;return function(Hr,or){Ne.setFromMatrixColumn(or,0),Ne.multiplyScalar(-Hr),y.add(Ne)}}(),De=function(){const Ne=new oe;return function(Hr,or){!0===c.screenSpacePanning?Ne.setFromMatrixColumn(or,1):(Ne.setFromMatrixColumn(or,0),Ne.crossVectors(c.object.up,Ne)),Ne.multiplyScalar(Hr),y.add(Ne)}}(),de=function(){const Ne=new oe;return function(Hr,or){const oi=c.domElement;if(c.object.isPerspectiveCamera){Ne.copy(c.object.position).sub(c.target);let Dl=Ne.length();Dl*=Math.tan(c.object.fov/2*Math.PI/180),te(2*Hr*Dl/oi.clientHeight,c.object.matrix),De(2*or*Dl/oi.clientHeight,c.object.matrix)}else c.object.isOrthographicCamera?(te(Hr*(c.object.right-c.object.left)/c.object.zoom/oi.clientWidth,c.object.matrix),De(or*(c.object.top-c.object.bottom)/c.object.zoom/oi.clientHeight,c.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),c.enablePan=!1)}}();function ye(Ne){c.object.isPerspectiveCamera?g/=Ne:c.object.isOrthographicCamera?(c.object.zoom=Math.max(c.minZoom,Math.min(c.maxZoom,c.object.zoom*Ne)),c.object.updateProjectionMatrix(),v=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),c.enableZoom=!1)}function _e(Ne){c.object.isPerspectiveCamera?g*=Ne:c.object.isOrthographicCamera?(c.object.zoom=Math.max(c.minZoom,Math.min(c.maxZoom,c.object.zoom/Ne)),c.object.updateProjectionMatrix(),v=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),c.enableZoom=!1)}function ue(Ne){_.set(Ne.clientX,Ne.clientY)}function Re(Ne){C.set(Ne.clientX,Ne.clientY)}function ct(){1===k.length?_.set(k[0].pageX,k[0].pageY):_.set(.5*(k[0].pageX+k[1].pageX),.5*(k[0].pageY+k[1].pageY))}function Ce(){1===k.length?C.set(k[0].pageX,k[0].pageY):C.set(.5*(k[0].pageX+k[1].pageX),.5*(k[0].pageY+k[1].pageY))}function xt(){const Ne=k[0].pageX-k[1].pageX,nn=k[0].pageY-k[1].pageY,Hr=Math.sqrt(Ne*Ne+nn*nn);x.set(0,Hr)}function Ot(Ne){if(1==k.length)b.set(Ne.pageX,Ne.pageY);else{const Hr=gn(Ne);b.set(.5*(Ne.pageX+Hr.x),.5*(Ne.pageY+Hr.y))}w.subVectors(b,_).multiplyScalar(c.rotateSpeed);const nn=c.domElement;Q(2*Math.PI*w.x/nn.clientHeight),se(2*Math.PI*w.y/nn.clientHeight),_.copy(b)}function Kt(Ne){if(1===k.length)E.set(Ne.pageX,Ne.pageY);else{const nn=gn(Ne);E.set(.5*(Ne.pageX+nn.x),.5*(Ne.pageY+nn.y))}M.subVectors(E,C).multiplyScalar(c.panSpeed),de(M.x,M.y),C.copy(E)}function it(Ne){const nn=gn(Ne),Hr=Ne.pageX-nn.x,or=Ne.pageY-nn.y,oi=Math.sqrt(Hr*Hr+or*or);R.set(0,oi),P.set(0,Math.pow(R.y/x.y,c.zoomSpeed)),ye(P.y),x.copy(R)}function Ft(Ne){!1!==c.enabled&&(0===k.length&&(c.domElement.setPointerCapture(Ne.pointerId),c.domElement.addEventListener("pointermove",ge),c.domElement.addEventListener("pointerup",ee)),function(Ne){k.push(Ne)}(Ne),"touch"===Ne.pointerType?function(Ne){switch(hn(Ne),k.length){case 1:switch(c.touches.ONE){case 0:if(!1===c.enableRotate)return;ct(),h=u.TOUCH_ROTATE;break;case 1:if(!1===c.enablePan)return;Ce(),h=u.TOUCH_PAN;break;default:h=u.NONE}break;case 2:switch(c.touches.TWO){case 2:if(!1===c.enableZoom&&!1===c.enablePan)return;c.enableZoom&&xt(),c.enablePan&&Ce(),h=u.TOUCH_DOLLY_PAN;break;case 3:if(!1===c.enableZoom&&!1===c.enableRotate)return;c.enableZoom&&xt(),c.enableRotate&&ct(),h=u.TOUCH_DOLLY_ROTATE;break;default:h=u.NONE}break;default:h=u.NONE}h!==u.NONE&&c.dispatchEvent(p5)}(Ne):function(Ne){let nn;switch(Ne.button){case 0:nn=c.mouseButtons.LEFT;break;case 1:nn=c.mouseButtons.MIDDLE;break;case 2:nn=c.mouseButtons.RIGHT;break;default:nn=-1}switch(nn){case 1:if(!1===c.enableZoom)return;(function(Ne){x.set(Ne.clientX,Ne.clientY)})(Ne),h=u.DOLLY;break;case 0:if(Ne.ctrlKey||Ne.metaKey||Ne.shiftKey){if(!1===c.enablePan)return;Re(Ne),h=u.PAN}else{if(!1===c.enableRotate)return;ue(Ne),h=u.ROTATE}break;case 2:if(Ne.ctrlKey||Ne.metaKey||Ne.shiftKey){if(!1===c.enableRotate)return;ue(Ne),h=u.ROTATE}else{if(!1===c.enablePan)return;Re(Ne),h=u.PAN}break;default:h=u.NONE}h!==u.NONE&&c.dispatchEvent(p5)}(Ne))}function ge(Ne){!1!==c.enabled&&("touch"===Ne.pointerType?function(Ne){switch(hn(Ne),h){case u.TOUCH_ROTATE:if(!1===c.enableRotate)return;Ot(Ne),c.update();break;case u.TOUCH_PAN:if(!1===c.enablePan)return;Kt(Ne),c.update();break;case u.TOUCH_DOLLY_PAN:if(!1===c.enableZoom&&!1===c.enablePan)return;(function(Ne){c.enableZoom&&it(Ne),c.enablePan&&Kt(Ne)})(Ne),c.update();break;case u.TOUCH_DOLLY_ROTATE:if(!1===c.enableZoom&&!1===c.enableRotate)return;(function(Ne){c.enableZoom&&it(Ne),c.enableRotate&&Ot(Ne)})(Ne),c.update();break;default:h=u.NONE}}(Ne):function(Ne){if(!1!==c.enabled)switch(h){case u.ROTATE:if(!1===c.enableRotate)return;!function(Ne){b.set(Ne.clientX,Ne.clientY),w.subVectors(b,_).multiplyScalar(c.rotateSpeed);const nn=c.domElement;Q(2*Math.PI*w.x/nn.clientHeight),se(2*Math.PI*w.y/nn.clientHeight),_.copy(b),c.update()}(Ne);break;case u.DOLLY:if(!1===c.enableZoom)return;!function(Ne){R.set(Ne.clientX,Ne.clientY),P.subVectors(R,x),P.y>0?ye(K()):P.y<0&&_e(K()),x.copy(R),c.update()}(Ne);break;case u.PAN:if(!1===c.enablePan)return;!function(Ne){E.set(Ne.clientX,Ne.clientY),M.subVectors(E,C).multiplyScalar(c.panSpeed),de(M.x,M.y),C.copy(E),c.update()}(Ne)}}(Ne))}function ee(Ne){!1!==c.enabled&&(c.dispatchEvent(m5),h=u.NONE,rn(Ne),0===k.length&&(c.domElement.releasePointerCapture(Ne.pointerId),c.domElement.removeEventListener("pointermove",ge),c.domElement.removeEventListener("pointerup",ee)))}function st(Ne){rn(Ne)}function Tn(Ne){!1===c.enabled||!1===c.enableZoom||h!==u.NONE&&h!==u.ROTATE||(Ne.preventDefault(),c.dispatchEvent(p5),function(Ne){Ne.deltaY<0?_e(K()):Ne.deltaY>0&&ye(K()),c.update()}(Ne),c.dispatchEvent(m5))}function Bt(Ne){!1===c.enabled||!1===c.enablePan||function(Ne){let nn=!1;switch(Ne.code){case c.keys.UP:de(0,c.keyPanSpeed),nn=!0;break;case c.keys.BOTTOM:de(0,-c.keyPanSpeed),nn=!0;break;case c.keys.LEFT:de(c.keyPanSpeed,0),nn=!0;break;case c.keys.RIGHT:de(-c.keyPanSpeed,0),nn=!0}nn&&(Ne.preventDefault(),c.update())}(Ne)}function Gt(Ne){!1!==c.enabled&&Ne.preventDefault()}function rn(Ne){delete W[Ne.pointerId];for(let nn=0;nn<k.length;nn++)if(k[nn].pointerId==Ne.pointerId)return void k.splice(nn,1)}function hn(Ne){let nn=W[Ne.pointerId];void 0===nn&&(nn=new St,W[Ne.pointerId]=nn),nn.set(Ne.pageX,Ne.pageY)}function gn(Ne){return W[(Ne.pointerId===k[0].pointerId?k[1]:k[0]).pointerId]}c.domElement.addEventListener("contextmenu",Gt),c.domElement.addEventListener("pointerdown",Ft),c.domElement.addEventListener("pointercancel",st),c.domElement.addEventListener("wheel",Tn,{passive:!1}),this.update()}}function g5(l){const o=l.map(c=>c**2).reduce((c,u)=>c+u,0);return Math.sqrt(o)}function y5(l){return l%360*(2*Math.PI)/360}function Xie(l,a){return l/2/Math.tan(y5(a/2))}class jet{constructor(a=360/(2*Math.PI),o=10,c){this.mapRadiusMU=a,this.mapWidthMU=2*Math.PI*a,this.mapUnitsPerSphereUnits=a/o,this.sphereRadiusSU=o,this.sphereCircumferenceSU=2*Math.PI*o,this.sphereUnitsPerMapUnits=o/a,this.fovDeg=c}mapWidth2SphereHeight(a){const c=Xie(a,this.fovDeg)*this.sphereUnitsPerMapUnits;return this.sphereRadiusSU+c}sphereHeight2mapWidth(a){return function(l,a){return 2*l*Math.tan(y5(a/2))}((a-this.sphereRadiusSU)*this.mapUnitsPerSphereUnits,this.fovDeg)}sphereHeight2zoom(a){const o=this.sphereHeight2mapWidth(a);return this.widthMU2Zoom(o)}zoom2sphereHeight(a){const o=this.zoom2WidthMU(a);return this.mapWidth2SphereHeight(o)}spherePos2zoom(a,o,c){const u=g5([a,o,c]);return this.sphereHeight2zoom(u)}zoom2WidthMU(a){return function(l,a){return a*Math.pow(.5,l)}(a,this.mapWidthMU)}widthMU2Zoom(a){return function(l,a){return Math.log2(a/l)}(a,this.mapWidthMU)}lonLatZoom2XYZ(a,o,c){const u=this.mu2rad(a),h=this.mu2rad(o),d=this.zoom2WidthMU(c),f=this.mapWidth2SphereHeight(d);return[f*Math.cos(h)*Math.sin(u),f*Math.sin(h),f*Math.cos(h)*Math.cos(u)]}xyz2LonLatZoom(a,o,c){const u=Math.asin(o/g5([a,o,c])),h=Math.asin(a/g5([a,c])),d=180*u/Math.PI;let f=180*h/Math.PI;return c<=0&&(f=180-f),[f,d,this.spherePos2zoom(a,o,c)]}mu2rad(a){return y5(a)}rad2mu(a){return function(l){return l%(2*Math.PI)*360/(2*Math.PI)}(a)}}class Wet extends Hs{constructor(a,o){const c=new kre(a);super(o,new gf({vertexShader:"\n        varying vec2 vUv;\n        uniform vec4 bbox;\n        uniform vec2 textureSize;\n\n        vec2 positionToLonLat(vec3 position) {\n          float pi = 3.141592653589793;\n\n          float latRad = asin(position.y / length(position));\n          float latDeg = 180.0 * latRad / pi;\n\n          float lonRad = asin(position.x / length(position.xz));\n          float lonDeg = 180.0 * lonRad / pi;\n          if (position.z <= 0.0) {\n            lonDeg = 180.0 - lonDeg;\n          }\n          return vec2(lonDeg, latDeg);\n        }\n\n        void main() {\n          vec2 lonLat = positionToLonLat(position);\n          float u = (lonLat.x - bbox.x) / (bbox.z - bbox.x);\n          float v = (lonLat.y - bbox.y) / (bbox.w - bbox.y);\n          if  (u < 0.0) {\n            u = ((360.0 + lonLat.x) - bbox.x) / (bbox.z - bbox.x);\n          }\n          if (u > 1.0) {\n            u = ((lonLat.x - 360.0) - bbox.x) / (bbox.z - bbox.x);\n          }\n          vUv = vec2(u, v);\n          gl_Position = projectionMatrix * viewMatrix * modelMatrix * vec4(position, 1.0);\n        }\n        ",fragmentShader:"\n        uniform sampler2D texture1;\n        varying vec2 vUv;\n\n        void main() {\n          gl_FragColor = texture2D(texture1, vUv);\n          if (vUv.x > 1.0 || vUv.x < 0.0 || vUv.y > 1.0 || vUv.y < 0.0) {\n            gl_FragColor = vec4(0.3, 0.3, 0.3, 1.0); // <-- better: retrieve texture2D from *previous* texture.\n          }\n        }\n        ",uniforms:{texture1:{value:c},bbox:{value:[-180,-90,180,90]}}}))}perspectiveChanged(a){this.material.uniforms.bbox.value=a,this.material.uniforms.texture1.value.needsUpdate=!0}}let $ie=(()=>{class l{constructor(o,c){this.mapStateSvc=o,this.zone=c,this.subs=[],this.needsResize=!1,this.skyTexturePath="assets/image/zpos.png"}initScene(o,c,u){const h=new Mi({alpha:!0,antialias:!0,canvas:o});h.setSize(o.clientWidth,o.clientHeight,!1);const d=new Bw,m=new co(50,o.clientWidth/o.clientHeight,.01,1e5);m.lookAt(0,0,0),m.position.set(-40,40,40);const g=new Bet(m,h.domElement),v=(new uie).load(new Array(6).fill(this.skyTexturePath));d.background=v;const _=document.createElement("canvas");!function(l,a,o,c=!1){const u=a.getContext("2d");if(!u)throw new Error("The target-canvas needs to use a 2d-context.");if(!a.width||!a.height)throw new Error("TargetCanvas: width or height have not been set.");u.clearRect(0,0,a.width,a.height);const h=l.getSize();l.getView().getResolution(),a.width=h[0],a.height=h[1];const f=Wk(l.getLayers().getArray()),m=[];for(const g of f)if(g.getVisible()&&g.getOpacity()>0){const y=g.on("postrender",v=>{const b=v.context.canvas;u.drawImage(b,0,0,b.clientWidth,b.clientHeight,0,0,a.width,a.height)});Array.isArray(y)?y.map(v=>m.push(v)):m.push(y)}c?l.on("rendercomplete",g=>{o(a)}):l.once("rendercomplete",g=>{for(const y of m)L9(y);o(a)}),l.renderSync()}(u,_,()=>{},!0);const b=new Wet(_,c.geometry);d.add(b);const w=new jet(360/(2*Math.PI),15,50);u.on("postrender",C=>{const E=u.getView().calculateExtent(u.getSize()),[M,x]=u.getView().getCenter(),R=u.getView().getZoom();b.perspectiveChanged(E);const[P,k,W]=w.lonLatZoom2XYZ(M,x,R);m.position.set(P,k,W),m.lookAt(0,0,0)}),g.addEventListener("change",C=>{const E=m.position,[M,x,R]=w.xyz2LonLatZoom(E.x,E.y,E.z);this.mapStateSvc.setMapState({center:{lon:M,lat:x},zoom:R})}),this.zone.runOutsideAngular(()=>{!function(l,a){const o=1e3/30;let u,h,d,c=o;const f=()=>{u=window.performance.now(),a(),h=window.performance.now(),c=h-u,d=Math.max(o-c,0),setTimeout(()=>{requestAnimationFrame(f)},d)};f()}(0,C=>{this.needsResize&&((o.clientHeight!==o.height||o.clientWidth!==o.width)&&(h.setSize(o.clientWidth,o.clientHeight,!1),m.aspect=o.clientWidth/o.clientHeight,m.updateProjectionMatrix()),this.needsResize=!1),h.render(d,m)})})}onResize(o){this.needsResize=!0}ngOnDestroy(){this.subs.map(o=>o.unsubscribe())}}return l.\u0275fac=function(o){return new(o||l)(be(Oo),be(Fn))},l.\u0275prov=Xe({token:l,factory:l.\u0275fac,providedIn:"root"}),l})();class qet extends Tf{constructor(a){super(a),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(o){return new Zet(o)}),this.register(function(o){return new ttt(o)}),this.register(function(o){return new ntt(o)}),this.register(function(o){return new Ket(o)}),this.register(function(o){return new Jet(o)}),this.register(function(o){return new Qet(o)}),this.register(function(o){return new ett(o)}),this.register(function(o){return new $et(o)}),this.register(function(o){return new rtt(o)})}load(a,o,c,u){const h=this;let d;d=""!==this.resourcePath?this.resourcePath:""!==this.path?this.path:em.extractUrlBase(a),this.manager.itemStart(a);const f=function(g){u?u(g):console.error(g),h.manager.itemError(a),h.manager.itemEnd(a)},m=new Wc(this.manager);m.setPath(this.path),m.setResponseType("arraybuffer"),m.setRequestHeader(this.requestHeader),m.setWithCredentials(this.withCredentials),m.load(a,function(g){try{h.parse(g,d,function(y){o(y),h.manager.itemEnd(a)},f)}catch(y){f(y)}},c,f)}setDRACOLoader(a){return this.dracoLoader=a,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(a){return this.ktx2Loader=a,this}setMeshoptDecoder(a){return this.meshoptDecoder=a,this}register(a){return-1===this.pluginCallbacks.indexOf(a)&&this.pluginCallbacks.push(a),this}unregister(a){return-1!==this.pluginCallbacks.indexOf(a)&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(a),1),this}parse(a,o,c,u){let h;const d={},f={};if("string"==typeof a)h=a;else if(em.decodeText(new Uint8Array(a,0,4))===Yie){try{d[si.KHR_BINARY_GLTF]=new itt(a)}catch(v){return void(u&&u(v))}h=d[si.KHR_BINARY_GLTF].content}else h=em.decodeText(new Uint8Array(a));const m=JSON.parse(h);if(void 0===m.asset||m.asset.version[0]<2)return void(u&&u(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported.")));const g=new gtt(m,{path:o||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});g.fileLoader.setRequestHeader(this.requestHeader);for(let y=0;y<this.pluginCallbacks.length;y++){const v=this.pluginCallbacks[y](g);f[v.name]=v,d[v.name]=!0}if(m.extensionsUsed)for(let y=0;y<m.extensionsUsed.length;++y){const v=m.extensionsUsed[y],_=m.extensionsRequired||[];switch(v){case si.KHR_MATERIALS_UNLIT:d[v]=new Yet;break;case si.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:d[v]=new att;break;case si.KHR_DRACO_MESH_COMPRESSION:d[v]=new stt(m,this.dracoLoader);break;case si.KHR_TEXTURE_TRANSFORM:d[v]=new ott;break;case si.KHR_MESH_QUANTIZATION:d[v]=new ltt;break;default:_.indexOf(v)>=0&&void 0===f[v]&&console.warn('THREE.GLTFLoader: Unknown extension "'+v+'".')}}g.setExtensions(d),g.setPlugins(f),g.parse(c,u)}}function Xet(){let l={};return{get:function(a){return l[a]},add:function(a,o){l[a]=o},remove:function(a){delete l[a]},removeAll:function(){l={}}}}const si={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:"KHR_materials_pbrSpecularGlossiness",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression"};class $et{constructor(a){this.parser=a,this.name=si.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const a=this.parser,o=this.parser.json.nodes||[];for(let c=0,u=o.length;c<u;c++){const h=o[c];h.extensions&&h.extensions[this.name]&&void 0!==h.extensions[this.name].light&&a._addNodeRef(this.cache,h.extensions[this.name].light)}}_loadLight(a){const o=this.parser,c="light:"+a;let u=o.cache.get(c);if(u)return u;const h=o.json,m=((h.extensions&&h.extensions[this.name]||{}).lights||[])[a];let g;const y=new Zt(16777215);void 0!==m.color&&y.fromArray(m.color);const v=void 0!==m.range?m.range:0;switch(m.type){case"directional":g=new AR(y),g.target.position.set(0,0,-1),g.add(g.target);break;case"point":g=new a5(y),g.distance=v;break;case"spot":g=new s5(y),g.distance=v,m.spot=m.spot||{},m.spot.innerConeAngle=void 0!==m.spot.innerConeAngle?m.spot.innerConeAngle:0,m.spot.outerConeAngle=void 0!==m.spot.outerConeAngle?m.spot.outerConeAngle:Math.PI/4,g.angle=m.spot.outerConeAngle,g.penumbra=1-m.spot.innerConeAngle/m.spot.outerConeAngle,g.target.position.set(0,0,-1),g.add(g.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+m.type)}return g.position.set(0,0,0),g.decay=2,void 0!==m.intensity&&(g.intensity=m.intensity),g.name=o.createUniqueName(m.name||"light_"+a),u=Promise.resolve(g),o.cache.add(c,u),u}createNodeAttachment(a){const o=this,c=this.parser,h=c.json.nodes[a],f=(h.extensions&&h.extensions[this.name]||{}).light;return void 0===f?null:this._loadLight(f).then(function(m){return c._getNodeRef(o.cache,f,m)})}}class Yet{constructor(){this.name=si.KHR_MATERIALS_UNLIT}getMaterialType(){return lc}extendParams(a,o,c){const u=[];a.color=new Zt(1,1,1),a.opacity=1;const h=o.pbrMetallicRoughness;if(h){if(Array.isArray(h.baseColorFactor)){const d=h.baseColorFactor;a.color.fromArray(d),a.opacity=d[3]}void 0!==h.baseColorTexture&&u.push(c.assignTexture(a,"map",h.baseColorTexture))}return Promise.all(u)}}class Zet{constructor(a){this.parser=a,this.name=si.KHR_MATERIALS_CLEARCOAT}getMaterialType(a){const c=this.parser.json.materials[a];return c.extensions&&c.extensions[this.name]?Jg:null}extendMaterialParams(a,o){const c=this.parser,u=c.json.materials[a];if(!u.extensions||!u.extensions[this.name])return Promise.resolve();const h=[],d=u.extensions[this.name];if(void 0!==d.clearcoatFactor&&(o.clearcoat=d.clearcoatFactor),void 0!==d.clearcoatTexture&&h.push(c.assignTexture(o,"clearcoatMap",d.clearcoatTexture)),void 0!==d.clearcoatRoughnessFactor&&(o.clearcoatRoughness=d.clearcoatRoughnessFactor),void 0!==d.clearcoatRoughnessTexture&&h.push(c.assignTexture(o,"clearcoatRoughnessMap",d.clearcoatRoughnessTexture)),void 0!==d.clearcoatNormalTexture&&(h.push(c.assignTexture(o,"clearcoatNormalMap",d.clearcoatNormalTexture)),void 0!==d.clearcoatNormalTexture.scale)){const f=d.clearcoatNormalTexture.scale;o.clearcoatNormalScale=new St(f,-f)}return Promise.all(h)}}class Ket{constructor(a){this.parser=a,this.name=si.KHR_MATERIALS_TRANSMISSION}getMaterialType(a){const c=this.parser.json.materials[a];return c.extensions&&c.extensions[this.name]?Jg:null}extendMaterialParams(a,o){const c=this.parser,u=c.json.materials[a];if(!u.extensions||!u.extensions[this.name])return Promise.resolve();const h=[],d=u.extensions[this.name];return void 0!==d.transmissionFactor&&(o.transmission=d.transmissionFactor),void 0!==d.transmissionTexture&&h.push(c.assignTexture(o,"transmissionMap",d.transmissionTexture)),Promise.all(h)}}class Jet{constructor(a){this.parser=a,this.name=si.KHR_MATERIALS_VOLUME}getMaterialType(a){const c=this.parser.json.materials[a];return c.extensions&&c.extensions[this.name]?Jg:null}extendMaterialParams(a,o){const c=this.parser,u=c.json.materials[a];if(!u.extensions||!u.extensions[this.name])return Promise.resolve();const h=[],d=u.extensions[this.name];o.thickness=void 0!==d.thicknessFactor?d.thicknessFactor:0,void 0!==d.thicknessTexture&&h.push(c.assignTexture(o,"thicknessMap",d.thicknessTexture)),o.attenuationDistance=d.attenuationDistance||0;const f=d.attenuationColor||[1,1,1];return o.attenuationTint=new Zt(f[0],f[1],f[2]),Promise.all(h)}}class Qet{constructor(a){this.parser=a,this.name=si.KHR_MATERIALS_IOR}getMaterialType(a){const c=this.parser.json.materials[a];return c.extensions&&c.extensions[this.name]?Jg:null}extendMaterialParams(a,o){const u=this.parser.json.materials[a];if(!u.extensions||!u.extensions[this.name])return Promise.resolve();const h=u.extensions[this.name];return o.ior=void 0!==h.ior?h.ior:1.5,Promise.resolve()}}class ett{constructor(a){this.parser=a,this.name=si.KHR_MATERIALS_SPECULAR}getMaterialType(a){const c=this.parser.json.materials[a];return c.extensions&&c.extensions[this.name]?Jg:null}extendMaterialParams(a,o){const c=this.parser,u=c.json.materials[a];if(!u.extensions||!u.extensions[this.name])return Promise.resolve();const h=[],d=u.extensions[this.name];o.specularIntensity=void 0!==d.specularFactor?d.specularFactor:1,void 0!==d.specularTexture&&h.push(c.assignTexture(o,"specularIntensityMap",d.specularTexture));const f=d.specularColorFactor||[1,1,1];return o.specularTint=new Zt(f[0],f[1],f[2]),void 0!==d.specularColorTexture&&h.push(c.assignTexture(o,"specularTintMap",d.specularColorTexture).then(function(m){m.encoding=zg})),Promise.all(h)}}class ttt{constructor(a){this.parser=a,this.name=si.KHR_TEXTURE_BASISU}loadTexture(a){const o=this.parser,c=o.json,u=c.textures[a];if(!u.extensions||!u.extensions[this.name])return null;const d=c.images[u.extensions[this.name].source],f=o.options.ktx2Loader;if(!f){if(c.extensionsRequired&&c.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return o.loadTextureImage(a,d,f)}}class ntt{constructor(a){this.parser=a,this.name=si.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(a){const o=this.name,c=this.parser,u=c.json,h=u.textures[a];if(!h.extensions||!h.extensions[o])return null;const f=u.images[h.extensions[o].source];let m=c.textureLoader;if(f.uri){const g=c.options.manager.getHandler(f.uri);null!==g&&(m=g)}return this.detectSupport().then(function(g){if(g)return c.loadTextureImage(a,f,m);if(u.extensionsRequired&&u.extensionsRequired.indexOf(o)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return c.loadTexture(a)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(a){const o=new Image;o.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",o.onload=o.onerror=function(){a(1===o.height)}})),this.isSupported}}class rtt{constructor(a){this.name=si.EXT_MESHOPT_COMPRESSION,this.parser=a}loadBufferView(a){const o=this.parser.json,c=o.bufferViews[a];if(c.extensions&&c.extensions[this.name]){const u=c.extensions[this.name],h=this.parser.getDependency("buffer",u.buffer),d=this.parser.options.meshoptDecoder;if(!d||!d.supported){if(o.extensionsRequired&&o.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return Promise.all([h,d.ready]).then(function(f){const m=u.byteOffset||0,g=u.byteLength||0,y=u.count,v=u.byteStride,_=new ArrayBuffer(y*v),b=new Uint8Array(f[0],m,g);return d.decodeGltfBuffer(new Uint8Array(_),y,v,b,u.mode,u.filter),_})}return null}}const Yie="glTF";class itt{constructor(a){this.name=si.KHR_BINARY_GLTF,this.content=null,this.body=null;const o=new DataView(a,0,12);if(this.header={magic:em.decodeText(new Uint8Array(a.slice(0,4))),version:o.getUint32(4,!0),length:o.getUint32(8,!0)},this.header.magic!==Yie)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const c=this.header.length-12,u=new DataView(a,12);let h=0;for(;h<c;){const d=u.getUint32(h,!0);h+=4;const f=u.getUint32(h,!0);if(h+=4,1313821514===f){const m=new Uint8Array(a,12+h,d);this.content=em.decodeText(m)}else if(5130562===f){const m=12+h;this.body=a.slice(m,m+d)}h+=d}if(null===this.content)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class stt{constructor(a,o){if(!o)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=si.KHR_DRACO_MESH_COMPRESSION,this.json=a,this.dracoLoader=o,this.dracoLoader.preload()}decodePrimitive(a,o){const c=this.json,u=this.dracoLoader,h=a.extensions[this.name].bufferView,d=a.extensions[this.name].attributes,f={},m={},g={};for(const y in d){const v=_5[y]||y.toLowerCase();f[v]=d[y]}for(const y in a.attributes){const v=_5[y]||y.toLowerCase();if(void 0!==d[y]){const _=c.accessors[a.attributes[y]];g[v]=sC[_.componentType],m[v]=!0===_.normalized}}return o.getDependency("bufferView",h).then(function(y){return new Promise(function(v){u.decodeDracoFile(y,function(_){for(const b in _.attributes){const w=_.attributes[b],C=m[b];void 0!==C&&(w.normalized=C)}v(_)},f,g)})})}}class ott{constructor(){this.name=si.KHR_TEXTURE_TRANSFORM}extendTexture(a,o){return void 0!==o.texCoord&&console.warn('THREE.GLTFLoader: Custom UV sets in "'+this.name+'" extension not yet supported.'),void 0===o.offset&&void 0===o.rotation&&void 0===o.scale||(a=a.clone(),void 0!==o.offset&&a.offset.fromArray(o.offset),void 0!==o.rotation&&(a.rotation=o.rotation),void 0!==o.scale&&a.repeat.fromArray(o.scale),a.needsUpdate=!0),a}}class v5 extends ub{constructor(a){super(),this.isGLTFSpecularGlossinessMaterial=!0;const o=["#ifdef USE_SPECULARMAP","\tuniform sampler2D specularMap;","#endif"].join("\n"),c=["#ifdef USE_GLOSSINESSMAP","\tuniform sampler2D glossinessMap;","#endif"].join("\n"),u=["vec3 specularFactor = specular;","#ifdef USE_SPECULARMAP","\tvec4 texelSpecular = texture2D( specularMap, vUv );","\ttexelSpecular = sRGBToLinear( texelSpecular );","\t// reads channel RGB, compatible with a glTF Specular-Glossiness (RGBA) texture","\tspecularFactor *= texelSpecular.rgb;","#endif"].join("\n"),h=["float glossinessFactor = glossiness;","#ifdef USE_GLOSSINESSMAP","\tvec4 texelGlossiness = texture2D( glossinessMap, vUv );","\t// reads channel A, compatible with a glTF Specular-Glossiness (RGBA) texture","\tglossinessFactor *= texelGlossiness.a;","#endif"].join("\n"),d=["PhysicalMaterial material;","material.diffuseColor = diffuseColor.rgb * ( 1. - max( specularFactor.r, max( specularFactor.g, specularFactor.b ) ) );","vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );","float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );","material.roughness = max( 1.0 - glossinessFactor, 0.0525 ); // 0.0525 corresponds to the base mip of a 256 cubemap.","material.roughness += geometryRoughness;","material.roughness = min( material.roughness, 1.0 );","material.specularColor = specularFactor;"].join("\n"),f={specular:{value:(new Zt).setHex(16777215)},glossiness:{value:1},specularMap:{value:null},glossinessMap:{value:null}};this._extraUniforms=f,this.onBeforeCompile=function(m){for(const g in f)m.uniforms[g]=f[g];m.fragmentShader=m.fragmentShader.replace("uniform float roughness;","uniform vec3 specular;").replace("uniform float metalness;","uniform float glossiness;").replace("#include <roughnessmap_pars_fragment>",o).replace("#include <metalnessmap_pars_fragment>",c).replace("#include <roughnessmap_fragment>",u).replace("#include <metalnessmap_fragment>",h).replace("#include <lights_physical_fragment>",d)},Object.defineProperties(this,{specular:{get:function(){return f.specular.value},set:function(m){f.specular.value=m}},specularMap:{get:function(){return f.specularMap.value},set:function(m){f.specularMap.value=m,m?this.defines.USE_SPECULARMAP="":delete this.defines.USE_SPECULARMAP}},glossiness:{get:function(){return f.glossiness.value},set:function(m){f.glossiness.value=m}},glossinessMap:{get:function(){return f.glossinessMap.value},set:function(m){f.glossinessMap.value=m,m?(this.defines.USE_GLOSSINESSMAP="",this.defines.USE_UV=""):(delete this.defines.USE_GLOSSINESSMAP,delete this.defines.USE_UV)}}}),delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this.setValues(a)}copy(a){return super.copy(a),this.specularMap=a.specularMap,this.specular.copy(a.specular),this.glossinessMap=a.glossinessMap,this.glossiness=a.glossiness,delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this}}class att{constructor(){this.name=si.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS,this.specularGlossinessParams=["color","map","lightMap","lightMapIntensity","aoMap","aoMapIntensity","emissive","emissiveIntensity","emissiveMap","bumpMap","bumpScale","normalMap","normalMapType","displacementMap","displacementScale","displacementBias","specularMap","specular","glossinessMap","glossiness","alphaMap","envMap","envMapIntensity","refractionRatio"]}getMaterialType(){return v5}extendParams(a,o,c){const u=o.extensions[this.name];a.color=new Zt(1,1,1),a.opacity=1;const h=[];if(Array.isArray(u.diffuseFactor)){const d=u.diffuseFactor;a.color.fromArray(d),a.opacity=d[3]}if(void 0!==u.diffuseTexture&&h.push(c.assignTexture(a,"map",u.diffuseTexture)),a.emissive=new Zt(0,0,0),a.glossiness=void 0!==u.glossinessFactor?u.glossinessFactor:1,a.specular=new Zt(1,1,1),Array.isArray(u.specularFactor)&&a.specular.fromArray(u.specularFactor),void 0!==u.specularGlossinessTexture){const d=u.specularGlossinessTexture;h.push(c.assignTexture(a,"glossinessMap",d)),h.push(c.assignTexture(a,"specularMap",d))}return Promise.all(h)}createMaterial(a){const o=new v5(a);return o.fog=!0,o.color=a.color,o.map=void 0===a.map?null:a.map,o.lightMap=null,o.lightMapIntensity=1,o.aoMap=void 0===a.aoMap?null:a.aoMap,o.aoMapIntensity=1,o.emissive=a.emissive,o.emissiveIntensity=1,o.emissiveMap=void 0===a.emissiveMap?null:a.emissiveMap,o.bumpMap=void 0===a.bumpMap?null:a.bumpMap,o.bumpScale=1,o.normalMap=void 0===a.normalMap?null:a.normalMap,o.normalMapType=0,a.normalScale&&(o.normalScale=a.normalScale),o.displacementMap=null,o.displacementScale=1,o.displacementBias=0,o.specularMap=void 0===a.specularMap?null:a.specularMap,o.specular=a.specular,o.glossinessMap=void 0===a.glossinessMap?null:a.glossinessMap,o.glossiness=a.glossiness,o.alphaMap=null,o.envMap=void 0===a.envMap?null:a.envMap,o.envMapIntensity=1,o.refractionRatio=.98,o}}class ltt{constructor(){this.name=si.KHR_MESH_QUANTIZATION}}class iy extends Sf{constructor(a,o,c,u){super(a,o,c,u)}copySampleValue_(a){const o=this.resultBuffer,c=this.sampleValues,u=this.valueSize,h=a*u*3+u;for(let d=0;d!==u;d++)o[d]=c[h+d];return o}}iy.prototype.beforeStart_=iy.prototype.copySampleValue_,iy.prototype.afterEnd_=iy.prototype.copySampleValue_,iy.prototype.interpolate_=function(l,a,o,c){const u=this.resultBuffer,h=this.sampleValues,d=this.valueSize,f=2*d,m=3*d,g=c-a,y=(o-a)/g,v=y*y,_=v*y,b=l*m,w=b-m,C=-2*_+3*v,E=_-v,M=1-C,x=E-v+y;for(let R=0;R!==d;R++)u[R]=M*h[w+R+d]+x*(h[w+R+f]*g)+C*h[b+R+d]+E*(h[b+R]*g);return u};const ctt=new xo;class utt extends iy{interpolate_(a,o,c,u){const h=super.interpolate_(a,o,c,u);return ctt.fromArray(h).normalize().toArray(h),h}}const sC={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},Kie={9728:oo,9729:ao,9984:1004,9985:1007,9986:1005,9987:Fp},Jie={33071:sa,33648:1002,10497:Gg},Qie={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},_5={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv2",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},nm={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},htt={CUBICSPLINE:void 0,LINEAR:R0,STEP:Cw};function ese(l,a){return"string"!=typeof l||""===l?"":(/^https?:\/\//i.test(a)&&/^\//.test(l)&&(a=a.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(l)||/^data:.*,.*$/i.test(l)||/^blob:.*$/i.test(l)?l:a+l)}function dtt(l){return void 0===l.DefaultMaterial&&(l.DefaultMaterial=new ub({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:0})),l.DefaultMaterial}function oC(l,a,o){for(const c in o.extensions)void 0===l[c]&&(a.userData.gltfExtensions=a.userData.gltfExtensions||{},a.userData.gltfExtensions[c]=o.extensions[c])}function sy(l,a){void 0!==a.extras&&("object"==typeof a.extras?Object.assign(l.userData,a.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+a.extras))}function ptt(l,a){if(l.updateMorphTargets(),void 0!==a.weights)for(let o=0,c=a.weights.length;o<c;o++)l.morphTargetInfluences[o]=a.weights[o];if(a.extras&&Array.isArray(a.extras.targetNames)){const o=a.extras.targetNames;if(l.morphTargetInfluences.length===o.length){l.morphTargetDictionary={};for(let c=0,u=o.length;c<u;c++)l.morphTargetDictionary[o[c]]=c}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function mtt(l){const a=l.extensions&&l.extensions[si.KHR_DRACO_MESH_COMPRESSION];let o;return o=a?"draco:"+a.bufferView+":"+a.indices+":"+tse(a.attributes):l.indices+":"+tse(l.attributes)+":"+l.mode,o}function tse(l){let a="";const o=Object.keys(l).sort();for(let c=0,u=o.length;c<u;c++)a+=o[c]+":"+l[o[c]]+";";return a}function S5(l){switch(l){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}class gtt{constructor(a={},o={}){this.json=a,this.extensions={},this.plugins={},this.options=o,this.cache=new Xet,this.associations=new Map,this.primitiveCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.textureCache={},this.nodeNamesUsed={},this.textureLoader="undefined"!=typeof createImageBitmap&&!1===/Firefox/.test(navigator.userAgent)?new Eie(this.options.manager):new hie(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new Wc(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),"use-credentials"===this.options.crossOrigin&&this.fileLoader.setWithCredentials(!0)}setExtensions(a){this.extensions=a}setPlugins(a){this.plugins=a}parse(a,o){const c=this,u=this.json,h=this.extensions;this.cache.removeAll(),this._invokeAll(function(d){return d._markDefs&&d._markDefs()}),Promise.all(this._invokeAll(function(d){return d.beforeRoot&&d.beforeRoot()})).then(function(){return Promise.all([c.getDependencies("scene"),c.getDependencies("animation"),c.getDependencies("camera")])}).then(function(d){const f={scene:d[0][u.scene||0],scenes:d[0],animations:d[1],cameras:d[2],asset:u.asset,parser:c,userData:{}};oC(h,f,u),sy(f,u),Promise.all(c._invokeAll(function(m){return m.afterRoot&&m.afterRoot(f)})).then(function(){a(f)})}).catch(o)}_markDefs(){const a=this.json.nodes||[],o=this.json.skins||[],c=this.json.meshes||[];for(let u=0,h=o.length;u<h;u++){const d=o[u].joints;for(let f=0,m=d.length;f<m;f++)a[d[f]].isBone=!0}for(let u=0,h=a.length;u<h;u++){const d=a[u];void 0!==d.mesh&&(this._addNodeRef(this.meshCache,d.mesh),void 0!==d.skin&&(c[d.mesh].isSkinnedMesh=!0)),void 0!==d.camera&&this._addNodeRef(this.cameraCache,d.camera)}}_addNodeRef(a,o){void 0!==o&&(void 0===a.refs[o]&&(a.refs[o]=a.uses[o]=0),a.refs[o]++)}_getNodeRef(a,o,c){if(a.refs[o]<=1)return c;const u=c.clone();return u.name+="_instance_"+a.uses[o]++,u}_invokeOne(a){const o=Object.values(this.plugins);o.push(this);for(let c=0;c<o.length;c++){const u=a(o[c]);if(u)return u}return null}_invokeAll(a){const o=Object.values(this.plugins);o.unshift(this);const c=[];for(let u=0;u<o.length;u++){const h=a(o[u]);h&&c.push(h)}return c}getDependency(a,o){const c=a+":"+o;let u=this.cache.get(c);if(!u){switch(a){case"scene":u=this.loadScene(o);break;case"node":u=this.loadNode(o);break;case"mesh":u=this._invokeOne(function(h){return h.loadMesh&&h.loadMesh(o)});break;case"accessor":u=this.loadAccessor(o);break;case"bufferView":u=this._invokeOne(function(h){return h.loadBufferView&&h.loadBufferView(o)});break;case"buffer":u=this.loadBuffer(o);break;case"material":u=this._invokeOne(function(h){return h.loadMaterial&&h.loadMaterial(o)});break;case"texture":u=this._invokeOne(function(h){return h.loadTexture&&h.loadTexture(o)});break;case"skin":u=this.loadSkin(o);break;case"animation":u=this.loadAnimation(o);break;case"camera":u=this.loadCamera(o);break;default:throw new Error("Unknown type: "+a)}this.cache.add(c,u)}return u}getDependencies(a){let o=this.cache.get(a);if(!o){const c=this;o=Promise.all((this.json[a+("mesh"===a?"es":"s")]||[]).map(function(h,d){return c.getDependency(a,d)})),this.cache.add(a,o)}return o}loadBuffer(a){const o=this.json.buffers[a],c=this.fileLoader;if(o.type&&"arraybuffer"!==o.type)throw new Error("THREE.GLTFLoader: "+o.type+" buffer type is not supported.");if(void 0===o.uri&&0===a)return Promise.resolve(this.extensions[si.KHR_BINARY_GLTF].body);const u=this.options;return new Promise(function(h,d){c.load(ese(o.uri,u.path),h,void 0,function(){d(new Error('THREE.GLTFLoader: Failed to load buffer "'+o.uri+'".'))})})}loadBufferView(a){const o=this.json.bufferViews[a];return this.getDependency("buffer",o.buffer).then(function(c){const h=o.byteOffset||0;return c.slice(h,h+(o.byteLength||0))})}loadAccessor(a){const o=this,c=this.json,u=this.json.accessors[a];if(void 0===u.bufferView&&void 0===u.sparse)return Promise.resolve(null);const h=[];return h.push(void 0!==u.bufferView?this.getDependency("bufferView",u.bufferView):null),void 0!==u.sparse&&(h.push(this.getDependency("bufferView",u.sparse.indices.bufferView)),h.push(this.getDependency("bufferView",u.sparse.values.bufferView))),Promise.all(h).then(function(d){const f=d[0],m=Qie[u.type],g=sC[u.componentType],y=g.BYTES_PER_ELEMENT,_=u.byteOffset||0,b=void 0!==u.bufferView?c.bufferViews[u.bufferView].byteStride:void 0,w=!0===u.normalized;let C,E;if(b&&b!==y*m){const M=Math.floor(_/b),x="InterleavedBuffer:"+u.bufferView+":"+u.componentType+":"+M+":"+u.count;let R=o.cache.get(x);R||(C=new g(f,M*b,u.count*b/y),R=new Zg(C,b/y),o.cache.add(x,R)),E=new Yp(R,m,_%b/y,w)}else C=null===f?new g(u.count*m):new g(f,_,u.count*m),E=new Ei(C,m,w);if(void 0!==u.sparse){const P=u.sparse.values.byteOffset||0,k=new(0,sC[u.sparse.indices.componentType])(d[1],u.sparse.indices.byteOffset||0,u.sparse.count*Qie.SCALAR),W=new g(d[2],P,u.sparse.count*m);null!==f&&(E=new Ei(E.array.slice(),E.itemSize,E.normalized));for(let U=0,K=k.length;U<K;U++){const Q=k[U];if(E.setX(Q,W[U*m]),m>=2&&E.setY(Q,W[U*m+1]),m>=3&&E.setZ(Q,W[U*m+2]),m>=4&&E.setW(Q,W[U*m+3]),m>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return E})}loadTexture(a){const o=this.json,h=o.images[o.textures[a].source];let d=this.textureLoader;if(h.uri){const f=this.options.manager.getHandler(h.uri);null!==f&&(d=f)}return this.loadTextureImage(a,h,d)}loadTextureImage(a,o,c){const u=this,h=this.json,d=this.options,f=h.textures[a],m=(o.uri||o.bufferView)+":"+f.sampler;if(this.textureCache[m])return this.textureCache[m];const g=self.URL||self.webkitURL;let y=o.uri||"",v=!1,_=!0;const b=y.search(/\.jpe?g($|\?)/i)>0||0===y.search(/^data\:image\/jpeg/);if(("image/jpeg"===o.mimeType||b)&&(_=!1),void 0!==o.bufferView)y=u.getDependency("bufferView",o.bufferView).then(function(C){if("image/png"===o.mimeType){const M=new DataView(C,25,1).getUint8(0,!1);_=6===M||4===M||3===M}v=!0;const E=new Blob([C],{type:o.mimeType});return y=g.createObjectURL(E),y});else if(void 0===o.uri)throw new Error("THREE.GLTFLoader: Image "+a+" is missing URI and bufferView");const w=Promise.resolve(y).then(function(C){return new Promise(function(E,M){let x=E;!0===c.isImageBitmapLoader&&(x=function(R){const P=new Co(R);P.needsUpdate=!0,E(P)}),c.load(ese(C,d.path),x,void 0,M)})}).then(function(C){!0===v&&g.revokeObjectURL(y),C.flipY=!1,f.name&&(C.name=f.name),_||(C.format=Zh);const M=(h.samplers||{})[f.sampler]||{};return C.magFilter=Kie[M.magFilter]||ao,C.minFilter=Kie[M.minFilter]||Fp,C.wrapS=Jie[M.wrapS]||Gg,C.wrapT=Jie[M.wrapT]||Gg,u.associations.set(C,{type:"textures",index:a}),C}).catch(function(){return console.error("THREE.GLTFLoader: Couldn't load texture",y),null});return this.textureCache[m]=w,w}assignTexture(a,o,c){const u=this;return this.getDependency("texture",c.index).then(function(h){if(void 0!==c.texCoord&&0!=c.texCoord&&!("aoMap"===o&&1==c.texCoord)&&console.warn("THREE.GLTFLoader: Custom UV set "+c.texCoord+" for texture "+o+" not yet supported."),u.extensions[si.KHR_TEXTURE_TRANSFORM]){const d=void 0!==c.extensions?c.extensions[si.KHR_TEXTURE_TRANSFORM]:void 0;if(d){const f=u.associations.get(h);h=u.extensions[si.KHR_TEXTURE_TRANSFORM].extendTexture(h,d),u.associations.set(h,f)}}return a[o]=h,h})}assignFinalMaterial(a){const o=a.geometry;let c=a.material;const u=void 0!==o.attributes.tangent,h=void 0!==o.attributes.color,d=void 0===o.attributes.normal;if(a.isPoints){const f="PointsMaterial:"+c.uuid;let m=this.cache.get(f);m||(m=new Kg,Eo.prototype.copy.call(m,c),m.color.copy(c.color),m.map=c.map,m.sizeAttenuation=!1,this.cache.add(f,m)),c=m}else if(a.isLine){const f="LineBasicMaterial:"+c.uuid;let m=this.cache.get(f);m||(m=new jo,Eo.prototype.copy.call(m,c),m.color.copy(c.color),this.cache.add(f,m)),c=m}if(u||h||d){let f="ClonedMaterial:"+c.uuid+":";c.isGLTFSpecularGlossinessMaterial&&(f+="specular-glossiness:"),u&&(f+="vertex-tangents:"),h&&(f+="vertex-colors:"),d&&(f+="flat-shading:");let m=this.cache.get(f);m||(m=c.clone(),h&&(m.vertexColors=!0),d&&(m.flatShading=!0),u&&(m.normalScale&&(m.normalScale.y*=-1),m.clearcoatNormalScale&&(m.clearcoatNormalScale.y*=-1)),this.cache.add(f,m),this.associations.set(m,this.associations.get(c))),c=m}c.aoMap&&void 0===o.attributes.uv2&&void 0!==o.attributes.uv&&o.setAttribute("uv2",o.attributes.uv),a.material=c}getMaterialType(){return ub}loadMaterial(a){const o=this,u=this.extensions,h=this.json.materials[a];let d;const f={},m=h.extensions||{},g=[];if(m[si.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS]){const v=u[si.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS];d=v.getMaterialType(),g.push(v.extendParams(f,h,o))}else if(m[si.KHR_MATERIALS_UNLIT]){const v=u[si.KHR_MATERIALS_UNLIT];d=v.getMaterialType(),g.push(v.extendParams(f,h,o))}else{const v=h.pbrMetallicRoughness||{};if(f.color=new Zt(1,1,1),f.opacity=1,Array.isArray(v.baseColorFactor)){const _=v.baseColorFactor;f.color.fromArray(_),f.opacity=_[3]}void 0!==v.baseColorTexture&&g.push(o.assignTexture(f,"map",v.baseColorTexture)),f.metalness=void 0!==v.metallicFactor?v.metallicFactor:1,f.roughness=void 0!==v.roughnessFactor?v.roughnessFactor:1,void 0!==v.metallicRoughnessTexture&&(g.push(o.assignTexture(f,"metalnessMap",v.metallicRoughnessTexture)),g.push(o.assignTexture(f,"roughnessMap",v.metallicRoughnessTexture))),d=this._invokeOne(function(_){return _.getMaterialType&&_.getMaterialType(a)}),g.push(Promise.all(this._invokeAll(function(_){return _.extendMaterialParams&&_.extendMaterialParams(a,f)})))}!0===h.doubleSided&&(f.side=2);const y=h.alphaMode||"OPAQUE";return"BLEND"===y?(f.transparent=!0,f.depthWrite=!1):(f.format=Zh,f.transparent=!1,"MASK"===y&&(f.alphaTest=void 0!==h.alphaCutoff?h.alphaCutoff:.5)),void 0!==h.normalTexture&&d!==lc&&(g.push(o.assignTexture(f,"normalMap",h.normalTexture)),f.normalScale=new St(1,-1),void 0!==h.normalTexture.scale&&f.normalScale.set(h.normalTexture.scale,-h.normalTexture.scale)),void 0!==h.occlusionTexture&&d!==lc&&(g.push(o.assignTexture(f,"aoMap",h.occlusionTexture)),void 0!==h.occlusionTexture.strength&&(f.aoMapIntensity=h.occlusionTexture.strength)),void 0!==h.emissiveFactor&&d!==lc&&(f.emissive=(new Zt).fromArray(h.emissiveFactor)),void 0!==h.emissiveTexture&&d!==lc&&g.push(o.assignTexture(f,"emissiveMap",h.emissiveTexture)),Promise.all(g).then(function(){let v;return v=d===v5?u[si.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS].createMaterial(f):new d(f),h.name&&(v.name=h.name),v.map&&(v.map.encoding=zg),v.emissiveMap&&(v.emissiveMap.encoding=zg),sy(v,h),o.associations.set(v,{type:"materials",index:a}),h.extensions&&oC(u,v,h),v})}createUniqueName(a){const o=$i.sanitizeNodeName(a||"");let c=o;for(let u=1;this.nodeNamesUsed[c];++u)c=o+"_"+u;return this.nodeNamesUsed[c]=!0,c}loadGeometries(a){const o=this,c=this.extensions,u=this.primitiveCache;function h(f){return c[si.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(f,o).then(function(m){return rse(m,f,o)})}const d=[];for(let f=0,m=a.length;f<m;f++){const g=a[f],y=mtt(g),v=u[y];if(v)d.push(v.promise);else{let _;_=g.extensions&&g.extensions[si.KHR_DRACO_MESH_COMPRESSION]?h(g):rse(new Kn,g,o),u[y]={primitive:g,promise:_},d.push(_)}}return Promise.all(d)}loadMesh(a){const o=this,u=this.extensions,h=this.json.meshes[a],d=h.primitives,f=[];for(let m=0,g=d.length;m<g;m++){const y=void 0===d[m].material?dtt(this.cache):this.getDependency("material",d[m].material);f.push(y)}return f.push(o.loadGeometries(d)),Promise.all(f).then(function(m){const g=m.slice(0,m.length-1),y=m[m.length-1],v=[];for(let b=0,w=y.length;b<w;b++){const C=y[b],E=d[b];let M;const x=g[b];if(4===E.mode||5===E.mode||6===E.mode||void 0===E.mode)M=!0===h.isSkinnedMesh?new tR(C,x):new Hs(C,x),!0===M.isSkinnedMesh&&!M.geometry.attributes.skinWeight.normalized&&M.normalizeSkinWeights(),5===E.mode?M.geometry=ise(M.geometry,1):6===E.mode&&(M.geometry=ise(M.geometry,2));else if(1===E.mode)M=new _f(C,x);else if(3===E.mode)M=new Zp(C,x);else if(2===E.mode)M=new jB(C,x);else{if(0!==E.mode)throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+E.mode);M=new jw(C,x)}Object.keys(M.geometry.morphAttributes).length>0&&ptt(M,h),M.name=o.createUniqueName(h.name||"mesh_"+a),sy(M,h),E.extensions&&oC(u,M,E),o.assignFinalMaterial(M),v.push(M)}if(1===v.length)return v[0];const _=new vf;for(let b=0,w=v.length;b<w;b++)_.add(v[b]);return _})}loadCamera(a){let o;const c=this.json.cameras[a],u=c[c.type];if(u)return"perspective"===c.type?o=new co(w$e.radToDeg(u.yfov),u.aspectRatio||1,u.znear||1,u.zfar||2e6):"orthographic"===c.type&&(o=new Nw(-u.xmag,u.xmag,u.ymag,-u.ymag,u.znear,u.zfar)),c.name&&(o.name=this.createUniqueName(c.name)),sy(o,c),Promise.resolve(o);console.warn("THREE.GLTFLoader: Missing camera parameters.")}loadSkin(a){const o=this.json.skins[a],c={joints:o.joints};return void 0===o.inverseBindMatrices?Promise.resolve(c):this.getDependency("accessor",o.inverseBindMatrices).then(function(u){return c.inverseBindMatrices=u,c})}loadAnimation(a){const c=this.json.animations[a],u=[],h=[],d=[],f=[],m=[];for(let g=0,y=c.channels.length;g<y;g++){const v=c.channels[g],_=c.samplers[v.sampler],b=v.target,C=void 0!==c.parameters?c.parameters[_.input]:_.input,E=void 0!==c.parameters?c.parameters[_.output]:_.output;u.push(this.getDependency("node",void 0!==b.node?b.node:b.id)),h.push(this.getDependency("accessor",C)),d.push(this.getDependency("accessor",E)),f.push(_),m.push(b)}return Promise.all([Promise.all(u),Promise.all(h),Promise.all(d),Promise.all(f),Promise.all(m)]).then(function(g){const y=g[0],v=g[1],_=g[2],b=g[3],w=g[4],C=[];for(let M=0,x=y.length;M<x;M++){const R=y[M],P=v[M],k=_[M],W=b[M],U=w[M];if(void 0===R)continue;let K;switch(R.updateMatrix(),R.matrixAutoUpdate=!0,nm[U.path]){case nm.weights:K=Qw;break;case nm.rotation:K=Qg;break;case nm.position:case nm.scale:default:K=eC}const Q=R.name?R.name:R.uuid,se=void 0!==W.interpolation?htt[W.interpolation]:R0,te=[];nm[U.path]===nm.weights?R.traverse(function(de){!0===de.isMesh&&de.morphTargetInfluences&&te.push(de.name?de.name:de.uuid)}):te.push(Q);let De=k.array;if(k.normalized){const de=S5(De.constructor),ye=new Float32Array(De.length);for(let _e=0,ue=De.length;_e<ue;_e++)ye[_e]=De[_e]*de;De=ye}for(let de=0,ye=te.length;de<ye;de++){const _e=new K(te[de]+"."+nm[U.path],P.array,De,se);"CUBICSPLINE"===W.interpolation&&(_e.createInterpolant=function(ce){return new(this instanceof Qg?utt:iy)(this.times,this.values,this.getValueSize()/3,ce)},_e.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0),C.push(_e)}}return new tC(c.name?c.name:"animation_"+a,void 0,C)})}createNodeMesh(a){const c=this,u=this.json.nodes[a];return void 0===u.mesh?null:c.getDependency("mesh",u.mesh).then(function(h){const d=c._getNodeRef(c.meshCache,u.mesh,h);return void 0!==u.weights&&d.traverse(function(f){if(f.isMesh)for(let m=0,g=u.weights.length;m<g;m++)f.morphTargetInfluences[m]=u.weights[m]}),d})}loadNode(a){const c=this.extensions,u=this,h=this.json.nodes[a],d=h.name?u.createUniqueName(h.name):"";return function(){const f=[],m=u._invokeOne(function(g){return g.createNodeMesh&&g.createNodeMesh(a)});return m&&f.push(m),void 0!==h.camera&&f.push(u.getDependency("camera",h.camera).then(function(g){return u._getNodeRef(u.cameraCache,h.camera,g)})),u._invokeAll(function(g){return g.createNodeAttachment&&g.createNodeAttachment(a)}).forEach(function(g){f.push(g)}),Promise.all(f)}().then(function(f){let m;if(m=!0===h.isBone?new nR:f.length>1?new vf:1===f.length?f[0]:new ui,m!==f[0])for(let g=0,y=f.length;g<y;g++)m.add(f[g]);if(h.name&&(m.userData.name=h.name,m.name=d),sy(m,h),h.extensions&&oC(c,m,h),void 0!==h.matrix){const g=new An;g.fromArray(h.matrix),m.applyMatrix4(g)}else void 0!==h.translation&&m.position.fromArray(h.translation),void 0!==h.rotation&&m.quaternion.fromArray(h.rotation),void 0!==h.scale&&m.scale.fromArray(h.scale);return u.associations.set(m,{type:"nodes",index:a}),m})}loadScene(a){const o=this.json,c=this.extensions,u=this.json.scenes[a],h=this,d=new vf;u.name&&(d.name=h.createUniqueName(u.name)),sy(d,u),u.extensions&&oC(c,d,u);const f=u.nodes||[],m=[];for(let g=0,y=f.length;g<y;g++)m.push(nse(f[g],d,o,h));return Promise.all(m).then(function(){return d})}}function nse(l,a,o,c){const u=o.nodes[l];return c.getDependency("node",l).then(function(h){if(void 0===u.skin)return h;let d;return c.getDependency("skin",u.skin).then(function(f){d=f;const m=[];for(let g=0,y=d.joints.length;g<y;g++)m.push(c.getDependency("node",d.joints[g]));return Promise.all(m)}).then(function(f){return h.traverse(function(m){if(!m.isMesh)return;const g=[],y=[];for(let v=0,_=f.length;v<_;v++){const b=f[v];if(b){g.push(b);const w=new An;void 0!==d.inverseBindMatrices&&w.fromArray(d.inverseBindMatrices.array,16*v),y.push(w)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',d.joints[v])}m.bind(new rR(g,y),m.matrixWorld)}),h})}).then(function(h){a.add(h);const d=[];if(u.children){const f=u.children;for(let m=0,g=f.length;m<g;m++)d.push(nse(f[m],h,o,c))}return Promise.all(d)})}function rse(l,a,o){const c=a.attributes,u=[];function h(d,f){return o.getDependency("accessor",d).then(function(m){l.setAttribute(f,m)})}for(const d in c){const f=_5[d]||d.toLowerCase();f in l.attributes||u.push(h(c[d],f))}if(void 0!==a.indices&&!l.index){const d=o.getDependency("accessor",a.indices).then(function(f){l.setIndex(f)});u.push(d)}return sy(l,a),function(l,a,o){const c=a.attributes,u=new oc;if(void 0===c.POSITION)return;{const f=o.json.accessors[c.POSITION],m=f.min,g=f.max;if(void 0===m||void 0===g)return void console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");if(u.set(new oe(m[0],m[1],m[2]),new oe(g[0],g[1],g[2])),f.normalized){const y=S5(sC[f.componentType]);u.min.multiplyScalar(y),u.max.multiplyScalar(y)}}const h=a.targets;if(void 0!==h){const f=new oe,m=new oe;for(let g=0,y=h.length;g<y;g++){const v=h[g];if(void 0!==v.POSITION){const _=o.json.accessors[v.POSITION],b=_.min,w=_.max;if(void 0!==b&&void 0!==w){if(m.setX(Math.max(Math.abs(b[0]),Math.abs(w[0]))),m.setY(Math.max(Math.abs(b[1]),Math.abs(w[1]))),m.setZ(Math.max(Math.abs(b[2]),Math.abs(w[2]))),_.normalized){const C=S5(sC[_.componentType]);m.multiplyScalar(C)}f.max(m)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}u.expandByVector(f)}l.boundingBox=u;const d=new Gp;u.getCenter(d.center),d.radius=u.min.distanceTo(u.max)/2,l.boundingSphere=d}(l,a,o),Promise.all(u).then(function(){return void 0!==a.targets?function(l,a,o){let c=!1,u=!1;for(let f=0,m=a.length;f<m;f++){const g=a[f];if(void 0!==g.POSITION&&(c=!0),void 0!==g.NORMAL&&(u=!0),c&&u)break}if(!c&&!u)return Promise.resolve(l);const h=[],d=[];for(let f=0,m=a.length;f<m;f++){const g=a[f];if(c){const y=void 0!==g.POSITION?o.getDependency("accessor",g.POSITION):l.attributes.position;h.push(y)}if(u){const y=void 0!==g.NORMAL?o.getDependency("accessor",g.NORMAL):l.attributes.normal;d.push(y)}}return Promise.all([Promise.all(h),Promise.all(d)]).then(function(f){const g=f[1];return c&&(l.morphAttributes.position=f[0]),u&&(l.morphAttributes.normal=g),l.morphTargetsRelative=!0,l})}(l,a.targets,o):l})}function ise(l,a){let o=l.getIndex();if(null===o){const d=[],f=l.getAttribute("position");if(void 0===f)return console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),l;for(let m=0;m<f.count;m++)d.push(m);l.setIndex(d),o=l.getIndex()}const c=o.count-2,u=[];if(2===a)for(let d=1;d<=c;d++)u.push(o.getX(0)),u.push(o.getX(d)),u.push(o.getX(d+1));else for(let d=0;d<c;d++)d%2==0?(u.push(o.getX(d)),u.push(o.getX(d+1)),u.push(o.getX(d+2))):(u.push(o.getX(d+2)),u.push(o.getX(d+1)),u.push(o.getX(d)));u.length/3!==c&&console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const h=l.clone();return h.setIndex(u),h}const vtt=["threeCanvas"];let _tt=(()=>{class l{constructor(o){this.mapThreeSvc=o,this.modelFilePath="https://solarsystem.nasa.gov/system/resources/gltf_files/2358_Phobos_1_1000.glb",this.modelName="phobos"}ngOnInit(){}ngAfterViewInit(){new Promise(c=>{(new qet).load(this.modelFilePath,h=>{const d=h.scene.getObjectByName(this.modelName);if(!d)throw new Error(`No object named ${this.modelName} in glb!`);c(d)})}).then(c=>{this.mapThreeSvc.initScene(this.threeCanvas.nativeElement,c,this.mapOlSvc.map)})}onResize(o){this.mapThreeSvc.onResize(o)}}return l.\u0275fac=function(o){return new(o||l)(O($ie))},l.\u0275cmp=Qe({type:l,selectors:[["ukis-map-three"]],viewQuery:function(o,c){if(1&o&&Cr(vtt,5),2&o){let u;It(u=Rt())&&(c.threeCanvas=u.first)}},hostBindings:function(o,c){1&o&&ze("resize",function(h){return c.onResize(h)},!1,gG)},inputs:{mapOlSvc:"mapOlSvc",modelFilePath:"modelFilePath",modelName:"modelName"},decls:2,vars:0,consts:[["id","threeCanvas",1,"threeCanvas"],["threeCanvas",""]],template:function(o,c){1&o&&xe(0,"canvas",0,1)},styles:[".threeCanvas[_ngcontent-%COMP%]{width:100%;height:100%;margin:0;display:block}"]}),l})(),btt=(()=>{class l{}return l.\u0275fac=function(o){return new(o||l)},l.\u0275mod=Yt({type:l}),l.\u0275inj=jt({imports:[[]]}),l})();class Stt extends Tu{constructor(a){super(a)}createRenderer(){return new Ttt(this)}}class Ttt extends wT{constructor(a){super(a);const o=document.createElement("canvas");o.width=800,o.height=600,o.style.position="absolute";const u=a.getSource().getFeatures(),h=this.featuresToMeshes(u),d=new Mi({canvas:o,alpha:!0}),f=new co(45,o.width/o.height,.01,3e7);f.position.set(0,0,10),f.lookAt(new oe(0,0,0));const m=new Bw;for(const y of h)m.add(y);const g=new AR(16777215,1);g.position.set(-1,2,4),m.add(g),this.canvas=o,this.scene=m,this.meshes=h,this.renderer=d,this.camera=f}prepareFrame(a){const o=a.pixelRatio,c=a.size,u=Math.round(c[0]*o),h=Math.round(c[1]*o),f=a.viewState.center,y=this.extent2Height(a.extent,45);return this.camera.aspect=u/h,this.camera.fov=45,this.camera.near=.01,this.camera.far=3e8,this.camera.position.set(f[0],f[1],y),this.camera.lookAt(new oe(f[0],f[1],0)),this.camera.updateProjectionMatrix(),(c[0]!==this.canvas.width||c[1]!==this.canvas.height)&&(this.canvas.width=c[0],this.canvas.height=c[1],this.renderer.setSize(this.canvas.width,this.canvas.height)),this.canvas.style.opacity=""+a.layerStatesArray[a.layerIndex].opacity,!0}renderFrame(a,o){return this.renderer.render(this.scene,this.camera),this.canvas}renderDeclutter(a){}featuresToMeshes(a){const o=[];for(const c of a){const u=c.getGeometry(),h=c.get("height"),d=this.fGeom2tGeom(u,.1*h),f=new Zt(16777215);f.setHex(16777215*Math.random());const m=new r5({color:f}),g=new Hs(d,m);o.push(g)}return o}fGeom2tGeom(a,o){const c=a.getCoordinates()[0],u=new Qp;u.moveTo(c[0][0],c[0][1]);for(let h=1;h<c.length;h++){const d=c[h];u.lineTo(d[0],d[1])}return new td(u,{depth:o,bevelEnabled:!1})}extent2Height(a,o){return Xie(a[3]-a[1],o)}}const wtt=JSON.parse('{"type":"FeatureCollection","features":[{"type":"Feature","properties":{"name":"Polygon 1"},"geometry":{"type":"Polygon","coordinates":[[[-0.703125,56.12106042504407],[-2.197265625,49.15296965617042],[5.009765625,45.460130637921004],[16.435546875,46.37725420510028],[20.0390625,55.229023057406344],[4.658203125,58.03137242177637],[-0.703125,56.12106042504407]]]}},{"type":"Feature","properties":{"name":"Polygon 2"},"geometry":{"type":"Polygon","coordinates":[[[6.6796875,58.768200159239576],[19.86328125,56.80087831233043],[22.5,62.99515845212052],[10.01953125,64.88626540914477],[6.328125,62.062733258846514],[6.6796875,58.768200159239576]]]}},{"type":"Feature","properties":{"name":"Polygon 3"},"geometry":{"type":"Polygon","coordinates":[[[30.937499999999996,62.02152819100765],[23.994140624999996,62.062733258846514],[22.587890625,55.3791104480105],[37.79296875,55.62799595426723],[30.937499999999996,62.02152819100765]]]}},{"type":"Feature","properties":{"name":"Polygon 4"},"geometry":{"type":"Polygon","coordinates":[[[-8.876953125,39.436192999314095],[-11.689453125,28.459033019728043],[0.615234375,25.562265014427492],[8.173828125,33.137551192346145],[-0.9667968749999999,38.8225909761771],[-8.876953125,39.436192999314095]]]}},{"type":"Feature","properties":{"name":"Polygon 5"},"geometry":{"type":"Polygon","coordinates":[[[-140.44921875,-52.26815737376816],[-70.83984375,-52.26815737376816],[-70.83984375,59.17592824927136],[-140.44921875,59.17592824927136],[-140.44921875,-52.26815737376816]]]}}]}');function Ctt(l,a){if(1&l&&(V(0,"li"),Le(1),B()),2&l){const o=a.$implicit,c=ve();j(1),pS(" ",o,": ",c.group[o]||"undefined"," ")}}let xtt=(()=>{class l{constructor(o){this.layersSvc=o}ngOnInit(){this.groupkeys=["bbox","cssClass","displayName","filtertype","id","name","removable"]}}return l.\u0275fac=function(o){return new(o||l)(O(vo))},l.\u0275cmp=Qe({type:l,selectors:[["app-example-group-action"]],inputs:{group:"group"},decls:5,vars:1,consts:[[4,"ngFor","ngForOf"]],template:function(o,c){1&o&&(V(0,"div"),V(1,"span"),Le(2,"some properties of the group:"),B(),V(3,"ul"),le(4,Ctt,2,2,"li",0),B(),B()),2&o&&(j(4),q("ngForOf",c.groupkeys))},directives:[Gi],styles:[""]}),l})();function Ett(l,a){if(1&l&&(V(0,"th"),Le(1),B()),2&l){const o=a.$implicit;j(1),Un(o.key)}}function Mtt(l,a){if(1&l&&(V(0,"td"),Le(1),B()),2&l){const o=a.$implicit;j(1),Un(o.value)}}let Dtt=(()=>{class l{constructor(){}ngOnInit(){}}return l.\u0275fac=function(o){return new(o||l)},l.\u0275cmp=Qe({type:l,selectors:[["app-popup2"]],inputs:{data:"data"},decls:11,vars:6,consts:[[1,"table"],[4,"ngFor","ngForOf"]],template:function(o,c){1&o&&(V(0,"table",0),V(1,"caption"),Le(2," Demo for a basic Clarity table. "),B(),V(3,"thead"),V(4,"tr"),le(5,Ett,2,1,"th",1),ks(6,"keyvalue"),B(),B(),V(7,"tbody"),V(8,"tr"),le(9,Mtt,2,1,"td",1),ks(10,"keyvalue"),B(),B(),B()),2&o&&(j(5),q("ngForOf",Ko(6,2,c.data)),j(4),q("ngForOf",Ko(10,4,c.data)))},directives:[Gi],pipes:[nE],styles:[""]}),l})(),Att=(()=>{class l{constructor(o,c,u){this.layersSvc=o,this.mapStateSvc=c,this.mapSvc=u,this.class="content-container",this.test=[],this.inputValue={value:15},this.controls={attribution:!0,scaleLine:!0,overviewMap:!0}}ngOnInit(){this.addLayers()}setInput(){const o=this.layersSvc.getLayerById("heatmap_layer");this.inputValue.value=40,o.action.inputs=this.inputValue,o.action=Object.assign({},o.action)}addLayers(){const o=new Uv({id:"OSM1",visible:!1}),c=new Qi({id:"heatmap_layer",name:"Heatmap Layer",actions:[{title:"test",icon:"",action:de=>{}}],action:{component:Dqe,inputs:this.inputValue,outputs:{valueChange:de=>{this.inputValue.value=de}}},custom_layer:new cqe({source:new ds({features:this.mapSvc.geoJsonToFeatures(XV),format:new _l}),radius:this.inputValue.value}),visible:!1}),u=new Zs({id:"Vector Layer1",name:"Vector Layer",type:"geojson",data:XV,visible:!0,popup:{single:!0}}),h=new Qi({id:"Layer_KML",name:"KML - VectorLayer",popup:!0,custom_layer:new Tu({source:new ds({url:"assets/kml/TimeZones.kml",format:new SD({extractStyles:!0})})}),visible:!1,bbox:[-180,-90,180,90]}),d=new Qi({id:"topo_json_layer",name:"Topo Json - VectorImageLayer",custom_layer:new mw({source:new ds({url:"https://openlayers.org/en/latest/examples/data/topojson/world-110m.json",format:new Mqe({layers:["countries"]}),overlaps:!1}),style:(de,ye)=>(Dn(de),[new Li({stroke:new Bs({color:"gray",width:1}),fill:new Pi({color:"rgba(0, 153, 255, 0.2)"})})])}),visible:!1}),f=new Qi({id:"geo_json_layer_ocean",name:"GeoJson - VectorImageLayer ocean",popup:{event:"move"},custom_layer:new mw({source:new ds({features:this.mapSvc.geoJsonToFeatures(kte)}),style:(de,ye)=>new Li({stroke:new Bs({color:"gray",width:1}),fill:new Pi({color:"rgba(20,20,20,0.9)"})})}),visible:!0,bbox:[-180.35156249999997,-22.268764039073968,-129.375,29.84064389983441]}),m=new Qi({id:"geo_json_layer_polys",name:"GeoJson polys - VectorImageLayer",popup:[{event:"click",single:!0,options:{autoPan:!1},dynamicPopup:{component:K4,getAttributes:de=>({data:de.properties})}},{event:"move",options:{autoPan:!1},dynamicPopup:{component:Dtt,getAttributes:de=>({data:de.properties})}}],custom_layer:new mw({source:new ds({features:this.mapSvc.geoJsonToFeatures(wtt)}),style:(de,ye)=>new Li({stroke:new Bs({color:"gray",width:1}),fill:new Pi({color:"rgba(51,153,51,1)"})})}),visible:!0}),g=new Qi({id:"geo_json_layer_collection",name:"GeoJson Collection - VectorImageLayer",popup:{event:"click",single:!0,options:{autoPan:!1}},custom_layer:new mw({source:new ds({url:"assets/geojson/test.collection.json",format:new _l}),style:(de,ye)=>new Li({stroke:new Bs({color:"rgba(153,51,51,1)",width:2}),fill:new Pi({color:"rgba(153,51,51,1)"}),image:new ag({radius:5,fill:new Pi({color:"rgba(153,51,51,1)"})})})}),visible:!0}),y=new Qi({id:"static_image_layer",name:"Static Image",visible:!1,popup:{filterkeys:["id","color","name"]},custom_layer:new o_({source:new Hte({url:"assets/image/srtm_small.png",imageExtent:[10,45,15,50],projection:"EPSG:4326"})})}),v=new Qi({id:"osm_clip_layer",name:"OSM Clip",visible:!0,popup:{filterkeys:["id","color","name"]},custom_layer:new Bd({source:new qY}),bbox:[-105.41888884797893,6.480590573390401,-15.540298246016693,42.53496284727569]}),_=new Qi({id:"customLayerOlGroup",name:"Custom Layer OlGroup",visible:!1,opacity:.6,popup:{event:"move",filterkeys:["id","color","name"],options:{autoPan:!1}},custom_layer:new Js({layers:[new Bd({source:new $T({url:"https://geoservice.dlr.de/eoc/basemap/wms",params:{LAYERS:"litemap",TILED:!0},serverType:"geoserver",transition:0})}),new Bd({source:new $T({url:"https://geoservice.dlr.de/eoc/basemap/wms",params:{LAYERS:"liteoverlay",TILED:!0},serverType:"geoserver",transition:0})})]})}),b=new Qi({id:"clusterLayer",name:"cluster Layer - VectorLayer",visible:!1,popup:!0,custom_layer:new Tu({source:new Wd({distance:10,source:new ds({features:this.mapSvc.geoJsonToFeatures(XV)})})})}),w=new Qi({id:"vectorTile",name:"VectorTileLayer",visible:!1,popup:{event:"move",filterkeys:["name","layer","class"],properties:{name:"Name"},options:{autoPan:!1}},custom_layer:new _M({source:new vM({format:new gk,url:"https://tiles.geoservice.dlr.de/service/tms/1.0.0/planet_eoc@EPSG%3A900913@pbf/{z}/{x}/{y}.pbf?flipy=true"}),style:(de,ye)=>{const _e=de.get("layer"),ue=de.get("class");if(this.test.includes(_e)||this.test.push(_e),_e){if("water"===_e)return new Li({fill:new Pi({color:"rgba(67,162,202,0.9)"})});if("boundary"===_e)return new Li({stroke:new Bs({color:"gray",width:1}),fill:new Pi({color:"rgba(0,0,0,0)"})});if("landcover"===_e&&ue){if("wood"===ue)return new Li({fill:new Pi({color:"rgba(53,151,143,0.7)"})});if("grass"===ue)return new Li({fill:new Pi({color:"rgba(168,221,181,0.7)"})})}}}})}),C=new us({name:"Heatmap Group",filtertype:"Layers",id:"group1",layers:[c,u],description:"This is a custom layer group with some custom angular components in the UI",action:{component:xtt}}),E=new Qi({id:"image_wms",name:"Image WMS",custom_layer:new o_({source:new Tk({url:"https://ahocevar.com/geoserver/wms",params:{LAYERS:"topp:states"},serverType:"geoserver"})}),visible:!1,popup:{filterkeys:["id","color","name"]},bbox:[-133.9453125,18.979025953255267,-60.46875,52.908902047770255]}),M=new Qi({id:"dtmLayer",name:"SRTM DTM",filtertype:"Layers",custom_layer:new ANe({source:new Hte({url:"assets/image/srtm_small.png",imageExtent:[10,45,15,50],projection:"EPSG:4326"})}),action:{component:Rqe,inputs:{changeHandler:(de,ye)=>{M.custom_layer.updateSunAngle([de,ye])}}},opacity:.6,visible:!1,description:"<p>This layer uses SRTM data to calculate surface-normals and uses them to dynamically create shades on hilltops. Things like these might be a nice illustration for time-enabled maps.</p>\n      <p>Use the controls to dynamically change the sun's angle.</p>"}),x=this.mapSvc.getProjection().getMetersPerUnit(),R=new eg({code:"EPSG:4326",units:"degrees"}).getMetersPerUnit();Wte.features.map(de=>de.properties.height=de.properties.height*R/x);const P=new Qi({id:"three",name:"Bars layer",custom_layer:new Stt({source:new ds({features:this.mapSvc.geoJsonToFeatures(Wte)})}),filtertype:"Layers",opacity:.7,visible:!1,description:"<p>This layer demonstrates how a common 3d-library, three.js, can be integrated in a 2d-map. Using three.js often yields less verbose code than calling WebGL directly.</p>"}),k=new ds({features:this.mapSvc.geoJsonToFeatures(Iqe)}),W=new Wd({source:k,distance:25}),Q=new Qi({id:"interpolation",name:"Interpolation",custom_layer:new RNe({source:W,style:(de,ye)=>{const _e=de.getProperties().features;let ue;return ue=_e.length>1?`${de.getProperties().features.length}`:`${Number.parseFloat(_e[0].getProperties().SWH).toPrecision(3)}`,new Li({image:new ag({radius:13,fill:new Pi({color:"rgba(0, 153, 255, 0.2)"}),stroke:new Bs({color:"rgba(255, 255, 255, 0.2)",width:1})}),text:new op({text:ue,overflow:!0,offsetX:-5*ue.length/2,offsetY:1,textAlign:"left",fill:new Pi({color:"#ffffff"})})})},renderSettings:{maxEdgeLength:15e3/x,power:2,colorRamp:[{val:0,rgb:[166,97,26]},{val:.4,rgb:[223,194,125]},{val:.8,rgb:[247,247,247]},{val:2,rgb:[128,205,193]},{val:22.5,rgb:[1,133,113]}],smooth:!0,showLabels:!1,valueProperty:"SWH",storeInterpolatedPixelData:!1}}),action:{component:Pqe,inputs:{changeHandler:(de,ye,_e)=>{Q.custom_layer.updateParas(de,ye,_e)}}},filtertype:"Layers",opacity:.7,visible:!1,description:"This layer is an example of how WebGL can be used to outsource computationally expensive operations. For inverse-distance interpolation we need to account for every datapoint at every pixel."}),se=new us({name:"Webgl Group",filtertype:"Layers",id:"group2",layers:[M,P,Q]});[new Qi({name:"Transparenter Hintergrund",id:"blank",type:"custom",visible:!1,custom_layer:new o_({source:new pqe({canvasFunction:()=>document.createElement("canvas")})})}),o,w,se,b,E,h,y,v,d,m,g,C,f,_].forEach(de=>{de instanceof Lo?this.layersSvc.addLayer(de,"Layers"):de instanceof us&&this.layersSvc.addLayerGroup(de)})}ngAfterViewInit(){const o=new Zs({id:"Vector Layer2",name:"async add Layer",type:"geojson",data:Aqe,visible:!1,popup:!0});setTimeout(()=>{this.layersSvc.addLayer(o,"Layers")},2e3)}}return l.\u0275fac=function(o){return new(o||l)(O(vo),O(Oo),O(Qs))},l.\u0275cmp=Qe({type:l,selectors:[["app-route-map4"]],hostVars:2,hostBindings:function(o,c){2&o&&ul(c.class)},features:[Mt([vo,Oo,Qs])],decls:15,vars:10,consts:[[1,"content-area"],["id","olMap",3,"layersSvc","mapState","controls"],[1,"right",3,"clrVerticalNavCollapsible","clr-nav-level"],[1,"layers",3,"clrVerticalNavGroupExpanded"],["shape","layers","clrVerticalNavIcon","","title","layers"],[1,"padding","title-ellipsis"],[3,"layersSvc","mapStateSvc"],["title","set input of dynamic component from parent when it is created or the input changed",1,"btn","btn-primary",3,"click"]],template:function(o,c){1&o&&(V(0,"main",0),xe(1,"ukis-map-ol",1),B(),V(2,"clr-vertical-nav",2),V(3,"clr-vertical-nav-group",3),xe(4,"clr-icon",4),Le(5," Layers "),V(6,"clr-vertical-nav-group-children",5),xe(7,"ukis-layer-control",6),B(),B(),V(8,"clr-vertical-nav-group",3),xe(9,"clr-icon",4),Le(10," Test to set dynamic component "),V(11,"clr-vertical-nav-group-children",5),V(12,"button",7),ze("click",function(){return c.setInput()}),Le(13,"Set Heatmap Layer radius"),B(),Le(14),B(),B(),B()),2&o&&(j(1),q("layersSvc",c.layersSvc)("mapState",c.mapStateSvc)("controls",c.controls),j(1),q("clrVerticalNavCollapsible",!0)("clr-nav-level",2),j(1),q("clrVerticalNavGroupExpanded",!0),j(4),q("layersSvc",c.layersSvc)("mapStateSvc",c.mapStateSvc),j(1),q("clrVerticalNavGroupExpanded",!0),j(6),Bi(" ",c.inputValue.value," "))},directives:[Zd,Hh,Vu,jh,Ya,qh,Wh,uf],styles:[""]}),l})();function Itt(l,a){if(1&l&&(V(0,"tr"),V(1,"td",16),Le(2),B(),V(3,"td"),Le(4),B(),V(5,"td"),Le(6),B(),V(7,"td"),Le(8),B(),B()),2&l){const o=a.$implicit;j(2),Un(o.properties.title),j(2),Un(o.properties.foo),j(2),Un(o.properties.bar),j(2),Un(o.properties.baz)}}function Rtt(l,a){if(1&l&&(V(0,"table",15),V(1,"thead"),V(2,"tr"),V(3,"th",16),Le(4,"Title"),B(),V(5,"th"),Le(6,"Foo"),B(),V(7,"th"),Le(8,"Bar"),B(),V(9,"th"),Le(10,"Baz"),B(),B(),B(),V(11,"tbody"),le(12,Itt,9,4,"tr",17),B(),B()),2&l){const o=ve();j(12),q("ngForOf",o.geojsonData.features)}}const Ptt=function(){return{height:"95%"}},Ltt=function(){return{height:"5%"}};let Ott=(()=>{class l{constructor(o,c){this.layersSvc=o,this.mapStateSvc=c,this.class="content-container",this.showTable=!1,this.subs=[],this.controls={attribution:!0,scaleLine:!0}}ngOnInit(){this.addBaseLayers(),this.addLayers(),this.addOverlays(),this.mapStateSvc.setExtent([-14,33,40,57]),this.checkVisibleLayers()}addBaseLayers(){[new h9({visible:!0}),new p9].map(h=>this.layersSvc.addLayer(h,"Baselayers"))}addLayers(){this.geojsonData={type:"FeatureCollection",features:[{type:"Feature",properties:{title:"Polygon",foo:"1",bar:"test",baz:"555"},geometry:{type:"Polygon",coordinates:[[[11.53564453125,48.80686346108517],[11.42578125,48.61838518688487],[11.97509765625,48.516604348867475],[12.2607421875,48.69096039092549],[12.0849609375,48.99463598353405],[11.53564453125,48.80686346108517]]]}},{type:"Feature",properties:{title:"Rectangle",foo:"2",bar:"test2",baz:"66667"},geometry:{type:"Polygon",coordinates:[[[10.986328125,43.89789239125797],[11.755371093749998,43.89789239125797],[11.755371093749998,44.41808794374846],[10.986328125,44.41808794374846],[10.986328125,43.89789239125797]]]}},{type:"Feature",properties:{title:"Line",foo:"3",bar:"test3",baz:"111"},geometry:{type:"LineString",coordinates:[[13.29345703125,48.268569112964336],[15.073242187499998,47.56170075451973],[14.1064453125,46.40756396630067],[15.886230468750002,44.94924926661153]]}},{type:"Feature",properties:{title:"Point",foo:"4",bar:"test4",baz:"444"},geometry:{type:"Point",coordinates:[11.513671874999998,46.42271253466717]}}]};const o=new Zs({id:"geojson_test",name:"GeoJSON Vector Layer",type:"geojson",data:this.geojsonData,visible:!1,popup:!0});this.layersSvc.addLayer(o,"Layers")}checkVisibleLayers(){const o=this.layersSvc.getLayers().subscribe(c=>{c.map(u=>{u&&("geojson_test"===u.id&&!0===u.visible?this.showTable=!0:"geojson_test"===u.id&&!1===u.visible&&(this.showTable=!1))})});this.subs.push(o)}addOverlays(){const o=new eN;this.layersSvc.addLayer(o,"Overlays")}ngOnDestroy(){this.subs.forEach(o=>o.unsubscribe())}}return l.\u0275fac=function(o){return new(o||l)(O(vo),O(Oo))},l.\u0275cmp=Qe({type:l,selectors:[["app-route-map5"]],hostVars:2,hostBindings:function(o,c){2&o&&ul(c.class)},features:[Mt([vo,Oo,Qs])],decls:27,vars:22,consts:[[1,"content-area",3,"ngStyle"],["id","olMap",3,"layersSvc","mapState","controls"],[1,"right",3,"clrVerticalNavCollapsible","clr-nav-level"],[1,"layers",3,"clrVerticalNavGroupExpanded"],["shape","world","title","Overlays","clrVerticalNavIcon",""],[1,"padding","title-ellipsis"],[3,"layersSvc","mapStateSvc","layerfilter"],["shape","layers","clrVerticalNavIcon","","title","layers"],[3,"layersSvc","mapStateSvc"],["shape","world","title","Baselayers","clrVerticalNavIcon",""],[3,"clrVerticalNavCollapsible"],[3,"clrVerticalNavGroupExpanded"],["shape","table","title","Overlays","clrVerticalNavIcon",""],["class","table",4,"ngIf"],[1,"footer","ukis-footer",3,"ngStyle"],[1,"table"],[1,"left"],[4,"ngFor","ngForOf"]],template:function(o,c){1&o&&(V(0,"main",0),xe(1,"ukis-map-ol",1),B(),V(2,"clr-vertical-nav",2),V(3,"clr-vertical-nav-group",3),xe(4,"clr-icon",4),Le(5," Overlays "),V(6,"clr-vertical-nav-group-children",5),xe(7,"ukis-layer-control",6),B(),B(),V(8,"clr-vertical-nav-group",3),xe(9,"clr-icon",7),Le(10," Layers "),V(11,"clr-vertical-nav-group-children",5),xe(12,"ukis-layer-control",8),B(),B(),V(13,"clr-vertical-nav-group",3),xe(14,"clr-icon",9),Le(15," Baselayers "),V(16,"clr-vertical-nav-group-children",5),xe(17,"ukis-base-layer-control",8),B(),B(),B(),V(18,"clr-vertical-nav",10),V(19,"clr-vertical-nav-group",11),xe(20,"clr-icon",12),Le(21," Table "),V(22,"clr-vertical-nav-group-children",5),le(23,Rtt,13,1,"table",13),B(),B(),B(),V(24,"div",14),V(25,"p"),Le(26,"this is the footer"),B(),B()),2&o&&(q("ngStyle",Dx(20,Ptt)),j(1),q("layersSvc",c.layersSvc)("mapState",c.mapStateSvc)("controls",c.controls),j(1),q("clrVerticalNavCollapsible",!0)("clr-nav-level",2),j(1),q("clrVerticalNavGroupExpanded",!0),j(4),q("layersSvc",c.layersSvc)("mapStateSvc",c.mapStateSvc)("layerfilter","Overlays"),j(1),q("clrVerticalNavGroupExpanded",!0),j(4),q("layersSvc",c.layersSvc)("mapStateSvc",c.mapStateSvc),j(1),q("clrVerticalNavGroupExpanded",!0),j(4),q("layersSvc",c.layersSvc)("mapStateSvc",c.mapStateSvc),j(1),q("clrVerticalNavCollapsible",!0),j(1),q("clrVerticalNavGroupExpanded",c.showTable),j(4),q("ngIf",c.showTable),j(1),q("ngStyle",Dx(21,Ltt)))},directives:[yO,Zd,Hh,Vu,jh,Ya,qh,Wh,uf,hI,Mn,Gi],styles:[".content-container[_nghost-%COMP%]   .ukis-footer[_ngcontent-%COMP%], .content-container   [_nghost-%COMP%]   .ukis-footer[_ngcontent-%COMP%]{padding:0 1rem}"]}),l})();function Ntt(l,a){if(1&l&&(V(0,"tr"),V(1,"th"),Le(2),B(),V(3,"td"),Le(4),B(),B()),2&l){const o=a.$implicit;j(2),Un(o.key),j(2),Un(o.value)}}function Ftt(l,a){if(1&l&&(V(0,"tbody"),le(1,Ntt,5,2,"tr",3),ks(2,"keyvalue"),B()),2&l){const o=a.ngIf;j(1),q("ngForOf",Ko(2,1,o))}}function ktt(l,a){1&l&&(V(0,"clr-spinner",4),Le(1,"Loading ..."),B()),2&l&&q("clrInline",!0)}let Vtt=(()=>{class l{constructor(o){this.http=o}ngOnInit(){this.data$=this.getFeatureInfo().pipe(pe(o=>o.features[0].properties))}getFeatureInfo(){const o=this.layer.getSource().getFeatureInfoUrl(this.event.coordinate,this.event.frameState.viewState.resolution,this.event.frameState.viewState.projection.getCode(),{INFO_FORMAT:"application/json"});return console.log("getting",o),this.http.get(o)}}return l.\u0275fac=function(o){return new(o||l)(O(lf))},l.\u0275cmp=Qe({type:l,selectors:[["app-raster-feature-info"]],inputs:{layer:"layer",event:"event"},decls:7,vars:4,consts:[[1,"table","table-vertical"],[4,"ngIf","ngIfElse"],["loading",""],[4,"ngFor","ngForOf"],[3,"clrInline"]],template:function(o,c){if(1&o&&(V(0,"table",0),V(1,"caption"),Le(2," Feature properties "),B(),le(3,Ftt,3,3,"tbody",1),ks(4,"async"),B(),le(5,ktt,2,1,"ng-template",null,2,Pa)),2&o){const u=po(6);j(3),q("ngIf",Ko(4,2,c.data$))("ngIfElse",u)}},directives:[Mn,Gi,d0],pipes:[zS,nE],styles:[""]}),l})(),Btt=(()=>{class l{constructor(o,c){this.layersSvc=o,this.mapStateSvc=c,this.class="content-container",this.subs=[],this.controls={attribution:!0,scaleLine:!0}}ngOnInit(){this.addBaseLayers(),this.addLayers(),this.mapStateSvc.setExtent([9.681317514755053,47.425291526740125,12.765729135848805,49.213103602937025]),this.layersSvc.getLayers().subscribe(o=>console.log("layers are now ",o))}addBaseLayers(){const o=new h9({visible:!0,tileSize:512});this.layersSvc.addLayer(o,"Baselayers")}addLayers(){const o=new fl({type:"wmts",id:"TDM90_AMP",visible:!1,url:"https://tiles.geoservice.dlr.de/service/wmts?",name:"TDM90_AMP",filtertype:"Layers",attribution:'| TDM90 Data &copy; <a href="http://www.dlr.de" target="_blank">DLR</a> licensed for <a rel="license" target="_blank" href="https://geoservice.dlr.de/resources/licenses/tdm90/License_for_the_Utilization_of_90m_DEM_for_Scientific_Use.pdf">scientific use</a>',params:{layer:"TDM90_AMP",version:"1.1.0",format:"image/png",style:"default",matrixSetOptions:{matrixSet:"EPSG:3857",tileMatrixPrefix:"EPSG:3857"}},styles:[{default:!0,name:"default",title:"default"},{default:!1,name:"none",title:"none"}]});this.layersSvc.addLayer(o,o.filtertype);const c=new iT({type:"wms",id:"S2_L3A_WASP_FRC_P1M",url:"https://{s}.geoservice.dlr.de/eoc/imagery/wms?",name:"S2_L3A_WASP_FRC_P1M",subdomains:["a","b","c","d"],filtertype:"Layers",attribution:'| &copy; <a href="http://www.dlr.de" target="_blank">DLR</a> Contains modified Copernicus Sentinel Data [2020]',params:{LAYERS:"S2_L3A_WASP_FRC_P1M",VERSION:"1.1.0",FORMAT:"image/png"},styles:[{default:!0,legendURL:"https://geoservice.dlr.de/eoc/imagery/wms?service=WMS&request=GetLegendGraphic&format=image/png&width=20&height=20&layer=land:S2_L3A_WASP_FRC_P1M",name:"s2-ndvi",title:"NDVI"},{default:!1,legendURL:"https://geoservice.dlr.de/eoc/imagery/wms?service=WMS&request=GetLegendGraphic&format=image/png&width=20&height=20&layer=land:S2_L3A_WASP_FRC_P1M",name:"s2-infrared",title:"Infrared (8,4,3)"},{default:!1,legendURL:"https://geoservice.dlr.de/eoc/imagery/wms?service=WMS&request=GetLegendGraphic&format=image/png&width=20&height=20&layer=land:S2_L3A_WASP_FRC_P1M",name:"s2-l3a-wasp-frc",title:"Style for L3A MAJA/WASP Ground Reflectances"}],popup:{dynamicPopup:{component:Vtt,getAttributes:u=>({layer:u.layer,event:u.event})}}});this.layersSvc.addLayer(c,c.filtertype)}ngOnDestroy(){this.subs.forEach(o=>o.unsubscribe())}}return l.\u0275fac=function(o){return new(o||l)(O(vo),O(Oo))},l.\u0275cmp=Qe({type:l,selectors:[["app-route-map6"]],hostVars:2,hostBindings:function(o,c){2&o&&ul(c.class)},features:[Mt([vo,Oo,Qs])],decls:13,vars:11,consts:[[1,"content-area"],["id","olMap",3,"layersSvc","mapState","controls"],[1,"right",3,"clrVerticalNavCollapsible","clr-nav-level"],[1,"layers",3,"clrVerticalNavGroupExpanded"],["shape","layers","clrVerticalNavIcon","","title","layers"],[1,"padding","title-ellipsis"],[3,"layersSvc","mapStateSvc"],["shape","world","title","Baselayers","clrVerticalNavIcon",""]],template:function(o,c){1&o&&(V(0,"main",0),xe(1,"ukis-map-ol",1),B(),V(2,"clr-vertical-nav",2),V(3,"clr-vertical-nav-group",3),xe(4,"clr-icon",4),Le(5," Layers "),V(6,"clr-vertical-nav-group-children",5),xe(7,"ukis-layer-control",6),B(),B(),V(8,"clr-vertical-nav-group",3),xe(9,"clr-icon",7),Le(10," Baselayers "),V(11,"clr-vertical-nav-group-children",5),xe(12,"ukis-base-layer-control",6),B(),B(),B()),2&o&&(j(1),q("layersSvc",c.layersSvc)("mapState",c.mapStateSvc)("controls",c.controls),j(1),q("clrVerticalNavCollapsible",!0)("clr-nav-level",2),j(1),q("clrVerticalNavGroupExpanded",!0),j(4),q("layersSvc",c.layersSvc)("mapStateSvc",c.mapStateSvc),j(1),q("clrVerticalNavGroupExpanded",!0),j(4),q("layersSvc",c.layersSvc)("mapStateSvc",c.mapStateSvc))},directives:[Zd,Hh,Vu,jh,Ya,qh,Wh,uf,hI],styles:[""]}),l})();function Utt(l,a){1&l&&(V(0,"clr-signpost-content"),V(1,"h3"),Le(2,"Licenses setup"),B(),V(3,"p"),Le(4,"This component expects a "),V(5,"code"),Le(6,"assets/licenses.json"),B(),Le(7," file to be present in the project bundle."),B(),V(8,"p"),Le(9,"That file was created with the following command:"),B(),V(10,"code"),Le(11," cd ./frontend-libraries npm install -g license-checker npx license-checker --json --out ./dist/demo-maps/assets "),B(),Le(12," You might want to add this command to the build-process by adding a "),V(13,"code"),Le(14,'"postbuild"'),B(),Le(15," task to your package.json. "),B())}function Gtt(l,a){if(1&l&&(V(0,"clr-dg-row"),V(1,"clr-dg-cell"),Le(2),B(),V(3,"clr-dg-cell"),Le(4),B(),V(5,"clr-dg-cell"),Le(6),B(),V(7,"clr-dg-cell"),V(8,"a",4),Le(9),B(),B(),B()),2&l){const o=a.$implicit;j(2),Un(o.name),j(2),Un(o.publisher),j(2),Un(o.license),j(2),cl("href",o.repository,Jy),j(1),Un(o.repository)}}function ztt(l,a){if(1&l&&(Jr(0),le(1,Gtt,10,5,"clr-dg-row",3),V(2,"clr-dg-footer"),Le(3),B(),Qr()),2&l){const o=a.ngIf;j(1),q("ngForOf",o),j(2),Bi("",o.length," third party dependencies")}}let Htt=(()=>{class l{constructor(o){this.http=o,this.class="content-container"}ngOnInit(){this.licenses$=this.http.get("assets/licenses.json").pipe(pe(o=>{const c=[];for(const u in o)if(o[u]){const h=o[u];c.push({name:u,license:h.licenses,repository:h.repository,publisher:h.publisher})}return c}))}}return l.\u0275fac=function(o){return new(o||l)(O(lf))},l.\u0275cmp=Qe({type:l,selectors:[["app-route-licenses"]],hostVars:2,hostBindings:function(o,c){2&o&&ul(c.class)},decls:18,vars:3,consts:[[1,"content-area","licenses"],[4,"clrIfOpen"],[4,"ngIf"],[4,"ngFor","ngForOf"],[3,"href"]],template:function(o,c){1&o&&(V(0,"main",0),V(1,"p"),Le(2,"A lot of third party libraries were used to create this project. Their licenses are listed here."),B(),V(3,"p"),Le(4,"For more information, click here: "),V(5,"clr-signpost"),le(6,Utt,16,0,"clr-signpost-content",1),B(),B(),V(7,"clr-datagrid"),V(8,"clr-dg-column"),Le(9,"Library name"),B(),V(10,"clr-dg-column"),Le(11,"Publisher"),B(),V(12,"clr-dg-column"),Le(13,"License"),B(),V(14,"clr-dg-column"),Le(15,"Repository"),B(),le(16,ztt,4,2,"ng-container",2),ks(17,"async"),B(),B()),2&o&&(j(16),q("ngIf",Ko(17,1,c.licenses$)))},directives:[$1,TA,D4,L4,X1,y4,v4,UA,WA,Mn,KA,Gi,YJ,zA,qA,Y1,jA],pipes:[zS],styles:[".content-area.licenses[_ngcontent-%COMP%]{padding:1em}"]}),l})(),jtt=(()=>{class l{constructor(o,c){this.http=o,this.olSvc=c,kD.defs("EPSG:2966","+proj=tmerc +lat_0=37.5 +lon_0=-87.08333333333333 +k=0.999966667 +x_0=900000 +y_0=249999.9998983998 +datum=NAD83 +units=us-ft +no_defs"),W$(kD),Th(Bn("EPSG:2966"),"EPSG:4326"),this.geojson2966To4326=new _l({dataProjection:"EPSG:2966",featureProjection:"EPSG:4326"}),this.geojson4326=new _l({featureProjection:"EPSG:4326"})}getWfsSource(o){switch(o){case"all":return new ds({format:new _l,url:this.getRequestUrl(this.olSvc.EPSG),strategy:f$});case"bbox":return new ds({format:new _l,url:(h,d,f)=>{const m=f.getCode();return this.getRequestUrl(m,h)},strategy:wk});case"simplifyGeometry":const c=new ds({loader:(h,d,f)=>{const m=f.getCode();this.http.get(this.getRequestUrl(m,h)).subscribe(g=>{const y=(new _l).readFeatures(g);for(const v of y)v.geometry=v.getGeometry().simplify(1e3);c.addFeatures(y)})},strategy:wk});return c;case"noProps":const u=new ds({loader:(h,d,f)=>{const m=f.getCode();this.http.get(this.getRequestUrl(m,h)).subscribe(g=>{const y=(new _l).readFeatures(g);for(const v of y)v.setProperties({});u.addFeatures(y)})},strategy:wk});return u;case"tile":throw new Error("Tile-Strategy source not yet implemented.")}}getRequestUrl(o,c){o||(o="EPSG:4326");let u="https://ahocevar.com/geoserver/wfs?service=WFS&version=1.1.0&request=GetFeature";return u+=`&outputFormat=application/json&srsname=${o}`,u+="&typename=osm:water_areas",c&&(u+=`&bbox=${c.join(",")},${o}`),u}createWfsLayer(o,c,u,h){const d=this.getWfsSource(u),f=new Tu({source:d,style:h});return new Qi({id:o,name:c,custom_layer:f,popup:!0,visible:!1})}createVectorTileLayer(o,c){const u=new vM({format:new gk,url:"https://ahocevar.com/geoserver/gwc/service/tms/1.0.0/ne:ne_10m_admin_0_countries@EPSG:4326@pbf/{z}/{x}/{-y}.pbf"}),h=new _M({source:u});return new Qi({id:o,name:c,custom_layer:h,popup:!0,visible:!1})}}return l.\u0275fac=function(o){return new(o||l)(be(lf),be(Qs))},l.\u0275prov=Xe({token:l,factory:l.\u0275fac,providedIn:"root"}),l})();function Wtt(l,a){1&l&&(V(0,"clr-signpost-content",4),V(1,"h3"),Le(2,"Change detection"),B(),V(3,"p"),Le(4,"This badge changes its color any time angular's change-detection was executed."),B(),B()),2&l&&q("clrPosition","left-middle")}let qtt=(()=>{class l{constructor(){this.color="white"}ngAfterContentChecked(){this.color=this.getRandomColor()}getRandomColor(){let c="#";for(let u=0;u<6;u++)c+="0123456789ABCDEF"[Math.floor(16*Math.random())];return c}}return l.\u0275fac=function(o){return new(o||l)},l.\u0275cmp=Qe({type:l,selectors:[["ukis-blinker"]],decls:6,vars:2,consts:[[2,"margin","0px"],[3,"clrPosition",4,"clrIfOpen"],[1,"label"],[1,"badge"],[3,"clrPosition"]],template:function(o,c){1&o&&(V(0,"p",0),V(1,"clr-signpost"),le(2,Wtt,5,1,"clr-signpost-content",1),B(),V(3,"span",2),Le(4," Change detected "),xe(5,"span",3),B(),B()),2&o&&(j(5),Am("background-color",c.color))},directives:[$1,TA,KA],styles:[".blinker[_ngcontent-%COMP%]{width:10px;height:10px}"]}),l})();function T5(){return(T5=Y_(function*(l){return sse($tt(),l,[]).then(a=>Ztt(a))})).apply(this,arguments)}function sse(l,a,o){return w5.apply(this,arguments)}function w5(){return(w5=Y_(function*(l,a,o){return l.then(c=>(o.push(c),a>1?sse(l,a-1,o):o))})).apply(this,arguments)}function $tt(){return C5.apply(this,arguments)}function C5(){return(C5=Y_(function*(){return new Promise((a,o)=>{const c=window.performance.now();setTimeout(()=>{const h=window.performance.now()-c;a(1e3/h)},0)})})).apply(this,arguments)}function Ztt(l){return function(l){let a=0;for(const o of l)a+=o;return a}(l)/l.length}function Jtt(l,a){1&l&&(V(0,"clr-signpost-content",4),V(1,"h3"),Le(2,"Frames per second"),B(),V(3,"p"),Le(4,"Estimates the number of frames that are rendered per second."),B(),V(5,"p"),Le(6,"This is done by periodically measuring the time a call to "),V(7,"code"),Le(8,"setTimeout(() => ..., 0)"),B(),Le(9," takes."),B(),V(10,"p"),Le(11,"That call is made outside the angular-zone, so as not to trigger change-detection."),B(),V(12,"p"),Le(13,"Please not that in Chrome you can also monitor FPS from the developer-tools: Hit "),V(14,"code"),Le(15,"ctrl-shift-p"),B(),Le(16," and enter "),V(17,"code"),Le(18,"fps"),B(),Le(19," to find the FPS-meter."),B(),B()),2&l&&q("clrPosition","left-middle")}let Qtt=(()=>{class l{constructor(o,c){this.ngZone=o,this.cdRef=c,this.pollingRate=1e3,this.precission=2,this.nrSamples=10,c.detach(),this.ngZone.runOutsideAngular(()=>{this.updateFps(this.pollingRate)})}updateFps(o){setTimeout(()=>{(function(l){return T5.apply(this,arguments)})(this.nrSamples).then(c=>{this.fps=function(l,a){const o=Math.pow(10,a);return Math.floor(l*o)/o}(c,this.precission),this.cdRef.detectChanges(),this.updateFps(o)})},o)}}return l.\u0275fac=function(o){return new(o||l)(O(Fn),O(go))},l.\u0275cmp=Qe({type:l,selectors:[["ukis-fpser"]],decls:7,vars:1,consts:[[2,"margin","0px"],[3,"clrPosition",4,"clrIfOpen"],[1,"label"],[1,"badge"],[3,"clrPosition"]],template:function(o,c){1&o&&(V(0,"p",0),V(1,"clr-signpost"),le(2,Jtt,20,1,"clr-signpost-content",1),B(),V(3,"span",2),Le(4," FPS: "),V(5,"span",3),Le(6),B(),B(),B()),2&o&&(j(6),Un(c.fps))},directives:[$1,TA,KA],styles:[""]}),l})(),ent=(()=>{class l{constructor(){}}return l.\u0275fac=function(o){return new(o||l)},l.\u0275cmp=Qe({type:l,selectors:[["ukis-performance"]],decls:8,vars:0,consts:[[1,"clr-row"],[1,"clr-col-12"]],template:function(o,c){1&o&&(V(0,"p"),Le(1,"Load data and pan the map for a while to see a drop in performance."),B(),V(2,"div",0),V(3,"div",1),xe(4,"ukis-blinker"),B(),B(),V(5,"div",0),V(6,"div",1),xe(7,"ukis-fpser"),B(),B())},directives:[qtt,Qtt],styles:[""]}),l})(),tnt=(()=>{class l{constructor(o,c,u,h){this.layersSvc=o,this.dataSvc=c,this.mapStateSvc=u,this.mapSvc=h,this.class="content-container",this.controls={attribution:!0,scaleLine:!0}}ngOnInit(){this.mapSvc.setProjection("EPSG:4326");const o=(g,y)=>{const _=g.getId().toString().match(/(\d+)/)[0],b=parseFloat(_),w=b%255,C=(b+20)%255,E=(b+40)%255;return new Li({stroke:new Bs({color:"gray",width:1}),fill:new Pi({color:`rgba(${w}, ${C}, ${E},0.7)`})})},c=new Uv({visible:!0}),u=this.dataSvc.createWfsLayer("full","Fully loaded","all",o);u.description="Full dataset loaded at once.";const h=this.dataSvc.createWfsLayer("bbx","Current extent only","bbox",o);h.description="Bbox strategy: Only current bbox loaded at a time.";const d=this.dataSvc.createWfsLayer("simple","Simplified geometry","simplifyGeometry",o);d.description="Bbox strategy. Also: geometry simplified.";const f=this.dataSvc.createWfsLayer("noProps","No properties","noProps",o);f.description="Bbox strategy. Also: features have no properties.";const m=this.dataSvc.createWfsLayer("noStyle","No Styling","bbox");m.description="Bbox strategy. Also: no styling applied to features.",[c,u,h,d,f,m].map(g=>this.layersSvc.addLayer(g,"Layers"))}ngAfterViewInit(){this.mapSvc.map.getView().fit([-107.14,51.85,-106.14,52.33],{size:this.mapSvc.map.getSize()})}}return l.\u0275fac=function(o){return new(o||l)(O(vo),O(jtt),O(Oo),O(Qs))},l.\u0275cmp=Qe({type:l,selectors:[["app-route-map7"]],hostVars:2,hostBindings:function(o,c){2&o&&ul(c.class)},features:[Mt([vo,Oo,Qs])],decls:13,vars:9,consts:[[1,"content-area"],["id","olMap",3,"layersSvc","mapState","controls"],[1,"right",3,"clrVerticalNavCollapsible","clr-nav-level"],[1,"layers",3,"clrVerticalNavGroupExpanded"],["shape","clock","title","Performance","clrVerticalNavIcon",""],[1,"padding","title-ellipsis"],["shape","layers","clrVerticalNavIcon","","title","layers"],[3,"layersSvc","mapStateSvc"]],template:function(o,c){1&o&&(V(0,"main",0),xe(1,"ukis-map-ol",1),B(),V(2,"clr-vertical-nav",2),V(3,"clr-vertical-nav-group",3),xe(4,"clr-icon",4),Le(5," Performance "),V(6,"clr-vertical-nav-group-children",5),xe(7,"ukis-performance"),B(),B(),V(8,"clr-vertical-nav-group",3),xe(9,"clr-icon",6),Le(10," Layers "),V(11,"clr-vertical-nav-group-children",5),xe(12,"ukis-layer-control",7),B(),B(),B()),2&o&&(j(1),q("layersSvc",c.layersSvc)("mapState",c.mapStateSvc)("controls",c.controls),j(1),q("clrVerticalNavCollapsible",!0)("clr-nav-level",2),j(1),q("clrVerticalNavGroupExpanded",!0),j(5),q("clrVerticalNavGroupExpanded",!0),j(4),q("layersSvc",c.layersSvc)("mapStateSvc",c.mapStateSvc))},directives:[Zd,Hh,Vu,jh,Ya,qh,Wh,ent,uf],styles:[""]}),l})();function x5(l,a,o){for(var b,w,C,E,M,x,c=[],u=l(0),h=l(1),d=a(u),f=a(h),m=[h,u],g=[f,d],y=[1,0],v={},_=1e5;--_>0&&y.length>0;)C=y.pop(),u=m.pop(),d=g.pop(),(x=C.toString())in v||(c.push(d[0],d[1]),v[x]=!0),E=y.pop(),h=m.pop(),f=g.pop(),C9((w=a(b=l(M=(C+E)/2)))[0],w[1],d[0],d[1],f[0],f[1])<o?(c.push(f[0],f[1]),v[x=E.toString()]=!0):(y.push(E,M,M,C),g.push(f,w,w,d),m.push(h,b,b,u));return c}var int=function(){var l=function(a,o){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,u){c.__proto__=u}||function(c,u){for(var h in u)Object.prototype.hasOwnProperty.call(u,h)&&(c[h]=u[h])})(a,o)};return function(a,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function c(){this.constructor=a}l(a,o),a.prototype=null===o?Object.create(o):(c.prototype=o.prototype,new c)}}(),snt=new Bs({color:"rgba(0,0,0,0.2)"}),ont=[90,45,30,20,10,5,2,1,.5,.2,.1,.05,.01,.005,.002,.001];const lnt=function(l){function a(o){var c=this,u=o||{},h=Gr({updateWhileAnimating:!0,updateWhileInteracting:!0,renderBuffer:0},u);return delete h.maxLines,delete h.strokeStyle,delete h.targetSize,delete h.showLabels,delete h.lonLabelFormatter,delete h.latLabelFormatter,delete h.lonLabelPosition,delete h.latLabelPosition,delete h.lonLabelStyle,delete h.latLabelStyle,delete h.intervals,(c=l.call(this,h)||this).projection_=null,c.maxLat_=1/0,c.maxLon_=1/0,c.minLat_=-1/0,c.minLon_=-1/0,c.maxX_=1/0,c.maxY_=1/0,c.minX_=-1/0,c.minY_=-1/0,c.targetSize_=void 0!==u.targetSize?u.targetSize:100,c.maxLines_=void 0!==u.maxLines?u.maxLines:100,c.meridians_=[],c.parallels_=[],c.strokeStyle_=void 0!==u.strokeStyle?u.strokeStyle:snt,c.fromLonLatTransform_=void 0,c.toLonLatTransform_=void 0,c.projectionCenterLonLat_=null,c.bottomLeft_=null,c.bottomRight_=null,c.topLeft_=null,c.topRight_=null,c.meridiansLabels_=null,c.parallelsLabels_=null,u.showLabels&&(c.lonLabelFormatter_=null==u.lonLabelFormatter?UE.bind(c,"EW"):u.lonLabelFormatter,c.latLabelFormatter_=null==u.latLabelFormatter?UE.bind(c,"NS"):u.latLabelFormatter,c.lonLabelPosition_=null==u.lonLabelPosition?0:u.lonLabelPosition,c.latLabelPosition_=null==u.latLabelPosition?1:u.latLabelPosition,c.lonLabelStyleBase_=new Li({text:void 0!==u.lonLabelStyle?u.lonLabelStyle.clone():new op({font:"12px Calibri,sans-serif",textBaseline:"bottom",fill:new Pi({color:"rgba(0,0,0,1)"}),stroke:new Bs({color:"rgba(255,255,255,1)",width:3})})}),c.lonLabelStyle_=function(d){var f=d.get("graticule_label");return this.lonLabelStyleBase_.getText().setText(f),this.lonLabelStyleBase_}.bind(c),c.latLabelStyleBase_=new Li({text:void 0!==u.latLabelStyle?u.latLabelStyle.clone():new op({font:"12px Calibri,sans-serif",textAlign:"right",fill:new Pi({color:"rgba(0,0,0,1)"}),stroke:new Bs({color:"rgba(255,255,255,1)",width:3})})}),c.latLabelStyle_=function(d){var f=d.get("graticule_label");return this.latLabelStyleBase_.getText().setText(f),this.latLabelStyleBase_}.bind(c),c.meridiansLabels_=[],c.parallelsLabels_=[],c.addEventListener("postrender",c.drawLabels_.bind(c))),c.intervals_=void 0!==u.intervals?u.intervals:ont,c.setSource(new ds({loader:c.loaderFunction.bind(c),strategy:c.strategyFunction.bind(c),features:new Qo,overlaps:!1,useSpatialIndex:!1,wrapX:u.wrapX})),c.featurePool_=[],c.lineStyle_=new Li({stroke:c.strokeStyle_}),c.loadedExtent_=null,c.renderedExtent_=null,c.setRenderOrder(null),c}return int(a,l),a.prototype.strategyFunction=function(o,c){var u=o.slice();return this.projection_&&this.getSource().getWrapX()&&w9(u,this.projection_),this.loadedExtent_&&(function(l,a,o){return Math.abs(l[0]-a[0])<o&&Math.abs(l[2]-a[2])<o&&Math.abs(l[1]-a[1])<o&&Math.abs(l[3]-a[3])<o}(this.loadedExtent_,u,c)?u=this.loadedExtent_.slice():this.getSource().removeLoadedExtent(this.loadedExtent_)),[u]},a.prototype.loaderFunction=function(o,c,u){this.loadedExtent_=o;var h=this.getSource(),f=gu(this.getExtent()||[-1/0,-1/0,1/0,1/0],o);if(!(this.renderedExtent_&&vh(this.renderedExtent_,f)||(this.renderedExtent_=f,Xv(f)))){var m=ml(f),g=c*c/4;(!this.projection_||!Sh(this.projection_,u))&&this.updateProjectionInfo_(u),this.createGraticule_(f,m,c,g);var _,v=this.meridians_.length+this.parallels_.length;for(this.meridiansLabels_&&(v+=this.meridians_.length),this.parallelsLabels_&&(v+=this.parallels_.length);v>this.featurePool_.length;)_=new u_,this.featurePool_.push(_);var b=h.getFeaturesCollection();b.clear();var C,E,w=0;for(C=0,E=this.meridians_.length;C<E;++C)(_=this.featurePool_[w++]).setGeometry(this.meridians_[C]),_.setStyle(this.lineStyle_),b.push(_);for(C=0,E=this.parallels_.length;C<E;++C)(_=this.featurePool_[w++]).setGeometry(this.parallels_[C]),_.setStyle(this.lineStyle_),b.push(_)}},a.prototype.addMeridian_=function(o,c,u,h,d,f){var m=this.getMeridian_(o,c,u,h,f);if(As(m.getExtent(),d)){if(this.meridiansLabels_){var g=this.lonLabelFormatter_(o);f in this.meridiansLabels_?this.meridiansLabels_[f].text=g:this.meridiansLabels_[f]={geom:new wh([]),text:g}}this.meridians_[f++]=m}return f},a.prototype.addParallel_=function(o,c,u,h,d,f){var m=this.getParallel_(o,c,u,h,f);if(As(m.getExtent(),d)){if(this.parallelsLabels_){var g=this.latLabelFormatter_(o);f in this.parallelsLabels_?this.parallelsLabels_[f].text=g:this.parallelsLabels_[f]={geom:new wh([]),text:g}}this.parallels_[f++]=m}return f},a.prototype.drawLabels_=function(o){var c=o.frameState.viewState.rotation,u=o.frameState.extent,h=ml(u),d=u;if(c){var f=Wr(u),m=bs(u),g=Math.abs(Math.cos(c)),y=Math.abs(Math.sin(c)),v=(y*m-g*f)/(y*y-g*g),_=(y*f-g*m)/(y*y-g*g);d=[h[0]-v/2,h[1]-_/2,h[0]+v/2,h[1]+_/2]}var b=0,w=0,C=this.latLabelPosition_<.5,E=this.projection_.getExtent(),M=Wr(E);this.getSource().getWrapX()&&this.projection_.canWrapX()&&!pl(E,u)&&(b=Math.floor((u[0]-E[0])/M),w=Math.ceil((u[2]-E[2])/M),C=C!==Math.abs(c)>Math.PI/2);for(var R=function(l){var h,a=l.inversePixelTransform[0],o=l.frameState,c=Hv(l.inversePixelTransform.slice(),o.coordinateToPixelTransform),u=oF(o.viewState.resolution,a),d=nM();return d&&(h=Kf(d,o.viewState.projection)),new sq(l.context,a,o.extent,c,o.viewState.rotation,u,h)}(o),P=b;P<=w;++P){var k=this.meridians_.length+this.parallels_.length,W=void 0,U=void 0,K=void 0,Q=void 0;if(this.meridiansLabels_)for(U=0,K=this.meridiansLabels_.length;U<K;++U){var se=this.meridians_[U];c||0!==P?((te=se.clone()).translate(P*M,0),te.rotate(-c,h),(Q=this.getMeridianPoint_(te,d,U)).rotate(c,h)):Q=this.getMeridianPoint_(se,u,U),(W=this.featurePool_[k++]).setGeometry(Q),W.set("graticule_label",this.meridiansLabels_[U].text),R.drawFeature(W,this.lonLabelStyle_(W))}if(this.parallelsLabels_&&(P===b&&C||P===w&&!C))for(U=0,K=this.parallels_.length;U<K;++U){var te;se=this.parallels_[U],c||0!==P?((te=se.clone()).translate(P*M,0),te.rotate(-c,h),(Q=this.getParallelPoint_(te,d,U)).rotate(c,h)):Q=this.getParallelPoint_(se,u,U),(W=this.featurePool_[k++]).setGeometry(Q),W.set("graticule_label",this.parallelsLabels_[U].text),R.drawFeature(W,this.latLabelStyle_(W))}}},a.prototype.createGraticule_=function(o,c,u,h){var d=this.getInterval_(u);if(-1==d)return this.meridians_.length=0,this.parallels_.length=0,this.meridiansLabels_&&(this.meridiansLabels_.length=0),void(this.parallelsLabels_&&(this.parallelsLabels_.length=0));var f=!1,m=this.projection_.getExtent(),g=Wr(m);this.getSource().getWrapX()&&this.projection_.canWrapX()&&!pl(m,o)&&(Wr(o)>=g?(o[0]=m[0],o[2]=m[2]):f=!0);var y=[br(c[0],this.minX_,this.maxX_),br(c[1],this.minY_,this.maxY_)],v=this.toLonLatTransform_(y);isNaN(v[1])&&(v[1]=Math.abs(this.maxLat_)>=Math.abs(this.minLat_)?this.maxLat_:this.minLat_);var C,E,M,x,_=br(v[0],this.minLon_,this.maxLon_),b=br(v[1],this.minLat_,this.maxLat_),w=this.maxLines_,R=o;f||(R=[br(o[0],this.minX_,this.maxX_),br(o[1],this.minY_,this.maxY_),br(o[2],this.minX_,this.maxX_),br(o[3],this.minY_,this.maxY_)]);var P=cN(R,this.toLonLatTransform_,void 0,8),k=P[3],W=P[2],U=P[1],K=P[0];if(f||(Pd(R,this.bottomLeft_)&&(K=this.minLon_,U=this.minLat_),Pd(R,this.bottomRight_)&&(W=this.maxLon_,U=this.minLat_),Pd(R,this.topLeft_)&&(K=this.minLon_,k=this.maxLat_),Pd(R,this.topRight_)&&(W=this.maxLon_,k=this.maxLat_),k=br(k,b,this.maxLat_),W=br(W,_,this.maxLon_),U=br(U,this.minLat_,b),K=br(K,this.minLon_,_)),x=br(_=Math.floor(_/d)*d,this.minLon_,this.maxLon_),E=this.addMeridian_(x,U,k,h,o,0),C=0,f)for(;(x-=d)>=K&&C++<w;)E=this.addMeridian_(x,U,k,h,o,E);else for(;x!=this.minLon_&&C++<w;)x=Math.max(x-d,this.minLon_),E=this.addMeridian_(x,U,k,h,o,E);if(x=br(_,this.minLon_,this.maxLon_),C=0,f)for(;(x+=d)<=W&&C++<w;)E=this.addMeridian_(x,U,k,h,o,E);else for(;x!=this.maxLon_&&C++<w;)x=Math.min(x+d,this.maxLon_),E=this.addMeridian_(x,U,k,h,o,E);for(this.meridians_.length=E,this.meridiansLabels_&&(this.meridiansLabels_.length=E),M=br(b=Math.floor(b/d)*d,this.minLat_,this.maxLat_),E=this.addParallel_(M,K,W,h,o,0),C=0;M!=this.minLat_&&C++<w;)M=Math.max(M-d,this.minLat_),E=this.addParallel_(M,K,W,h,o,E);for(M=br(b,this.minLat_,this.maxLat_),C=0;M!=this.maxLat_&&C++<w;)M=Math.min(M+d,this.maxLat_),E=this.addParallel_(M,K,W,h,o,E);this.parallels_.length=E,this.parallelsLabels_&&(this.parallelsLabels_.length=E)},a.prototype.getInterval_=function(o){for(var c=this.projectionCenterLonLat_[0],u=this.projectionCenterLonLat_[1],h=-1,d=Math.pow(this.targetSize_*o,2),f=[],m=[],g=0,y=this.intervals_.length;g<y;++g){var v=br(this.intervals_[g]/2,0,90),_=br(u,-90+v,90-v);if(f[0]=c-v,f[1]=_-v,m[0]=c+v,m[1]=_+v,this.fromLonLatTransform_(f,f),this.fromLonLatTransform_(m,m),Math.pow(m[0]-f[0],2)+Math.pow(m[1]-f[1],2)<=d)break;h=this.intervals_[g]}return h},a.prototype.getMeridian_=function(o,c,u,h,d){var f=function(l,a,o,c,u){return x5(function(d){return[l,a+(o-a)*d]},Th(Bn("EPSG:4326"),c),u)}(o,c,u,this.projection_,h),m=this.meridians_[d];return m?(m.setFlatCoordinates("XY",f),m.changed()):(m=new zd(f,"XY"),this.meridians_[d]=m),m},a.prototype.getMeridianPoint_=function(o,c,u){var h=o.getFlatCoordinates(),d=1,f=h.length-1;h[d]>h[f]&&(d=f,f=1);var m=Math.max(c[1],h[d]),g=Math.min(c[3],h[f]),y=br(c[1]+Math.abs(c[1]-c[3])*this.lonLabelPosition_,m,g),b=this.meridiansLabels_[u].geom;return b.setCoordinates([h[d-1]+(h[f-1]-h[d-1])*(y-h[d])/(h[f]-h[d]),y]),b},a.prototype.getMeridians=function(){return this.meridians_},a.prototype.getParallel_=function(o,c,u,h,d){var f=function(l,a,o,c,u){return x5(function(d){return[a+(o-a)*d,l]},Th(Bn("EPSG:4326"),c),u)}(o,c,u,this.projection_,h),m=this.parallels_[d];return m?(m.setFlatCoordinates("XY",f),m.changed()):m=new zd(f,"XY"),m},a.prototype.getParallelPoint_=function(o,c,u){var h=o.getFlatCoordinates(),d=0,f=h.length-2;h[d]>h[f]&&(d=f,f=0);var m=Math.max(c[0],h[d]),g=Math.min(c[2],h[f]),y=br(c[0]+Math.abs(c[0]-c[2])*this.latLabelPosition_,m,g),b=this.parallelsLabels_[u].geom;return b.setCoordinates([y,h[d+1]+(h[f+1]-h[d+1])*(y-h[d])/(h[f]-h[d])]),b},a.prototype.getParallels=function(){return this.parallels_},a.prototype.updateProjectionInfo_=function(o){var c=Bn("EPSG:4326"),u=o.getWorldExtent();this.maxLat_=u[3],this.maxLon_=u[2],this.minLat_=u[1],this.minLon_=u[0];var h=Th(o,c);if(this.minLon_<this.maxLon_)this.toLonLatTransform_=h;else{var d=this.minLon_+this.maxLon_/2;this.maxLon_+=360,this.toLonLatTransform_=function(m,g,y){for(var v=y||2,_=h(m,g,v),b=0,w=_.length;b<w;b+=v)_[b]<d&&(_[b]+=360);return _}}this.fromLonLatTransform_=Th(c,o);var f=cN([this.minLon_,this.minLat_,this.maxLon_,this.maxLat_],this.fromLonLatTransform_,void 0,8);this.minX_=f[0],this.maxX_=f[2],this.minY_=f[1],this.maxY_=f[3],this.bottomLeft_=this.fromLonLatTransform_([this.minLon_,this.minLat_]),this.bottomRight_=this.fromLonLatTransform_([this.maxLon_,this.minLat_]),this.topLeft_=this.fromLonLatTransform_([this.minLon_,this.maxLat_]),this.topRight_=this.fromLonLatTransform_([this.maxLon_,this.maxLat_]),this.projectionCenterLonLat_=this.toLonLatTransform_(ml(o.getExtent())),isNaN(this.projectionCenterLonLat_[1])&&(this.projectionCenterLonLat_[1]=Math.abs(this.maxLat_)>=Math.abs(this.minLat_)?this.maxLat_:this.minLat_),this.projection_=o},a}(Tu),cnt=[{path:"",redirectTo:"example-layers",pathMatch:"full"},{path:"example-layers",component:hWe,data:{title:"Layers"}},{path:"example-projection",component:vWe,data:{title:"Projection"}},{path:"example-events",component:DWe,data:{title:"Events"}},{path:"example-custom-layers",component:Att,data:{title:"Custom Layers"}},{path:"example-owc-layers",component:(()=>{class l{constructor(o,c,u,h,d){this.layersSvc=o,this.mapStateSvc=c,this.mapSvc=u,this.owcSvc=h,this.http=d,this.class="content-container",this.controls={attribution:!0,scaleLine:!0}}ngOnInit(){this.mapSvc.map.addControl(new XY),this.getOwcContext("assets/owc/ows-json-context.json")}getOwcContext(o){return this.http.get(o).subscribe(c=>{this.addLayersFromContext(c)})}addLayersFromContext(o){this.layersSvc.removeLayers(c=>"osm"!==c.id&&"ContextSelectionLayer"!==c.id),this.owcSvc.getLayers(o,this.mapSvc.EPSG).pipe(fu()).subscribe(c=>{for(const u of c)u instanceof us?this.layersSvc.addLayerGroup(u,u.filtertype):this.layersSvc.addLayer(u,u.filtertype)}),o.bbox&&this.mapStateSvc.setExtent(o.bbox)}downloadOwc(){var o=this;return Y_(function*(){const c=yield o.layersSvc.getLayerGroups().pipe(fu()).toPromise(),u=yield o.mapStateSvc.getExtent().pipe(fu()).toPromise(),h=o.owcSvc.generateOwsContextFrom("Test_OWC",c,u),d=new Blob([JSON.stringify(h)],{type:"application/json"}),f=URL.createObjectURL(d);window.open(f)})()}}return l.\u0275fac=function(o){return new(o||l)(O(vo),O(Oo),O(Qs),O(xee),O(lf))},l.\u0275cmp=Qe({type:l,selectors:[["app-route-example-owc-layers"]],hostVars:2,hostBindings:function(o,c){2&o&&ul(c.class)},features:[Mt([vo,Oo,Qs])],decls:24,vars:15,consts:[[1,"content-area"],["id","olMap",3,"layersSvc","mapState","controls"],[1,"right",3,"clrVerticalNavCollapsible","clr-nav-level"],[1,"layers",3,"clrVerticalNavGroupExpanded"],["shape","world","title","Overlays","clrVerticalNavIcon",""],[1,"padding","title-ellipsis"],[3,"layersSvc","mapStateSvc","layerfilter"],["shape","layers","clrVerticalNavIcon","","title","layers"],[3,"layersSvc","mapStateSvc"],["shape","world","title","Baselayers","clrVerticalNavIcon",""],["shape","export","title","Export","clrVerticalNavIcon",""],[1,"btn","btn-primary",3,"click"]],template:function(o,c){1&o&&(V(0,"main",0),xe(1,"ukis-map-ol",1),B(),V(2,"clr-vertical-nav",2),V(3,"clr-vertical-nav-group",3),xe(4,"clr-icon",4),Le(5," Overlays "),V(6,"clr-vertical-nav-group-children",5),xe(7,"ukis-layer-control",6),B(),B(),V(8,"clr-vertical-nav-group",3),xe(9,"clr-icon",7),Le(10," Layers "),V(11,"clr-vertical-nav-group-children",5),xe(12,"ukis-layer-control",8),B(),B(),V(13,"clr-vertical-nav-group",3),xe(14,"clr-icon",9),Le(15," Baselayers "),V(16,"clr-vertical-nav-group-children",5),xe(17,"ukis-base-layer-control",8),B(),B(),V(18,"clr-vertical-nav-group"),xe(19,"clr-icon",10),Le(20," OWC Control "),V(21,"clr-vertical-nav-group-children",5),V(22,"button",11),ze("click",function(){return c.downloadOwc()}),Le(23,"Download OWC"),B(),B(),B(),B()),2&o&&(j(1),q("layersSvc",c.layersSvc)("mapState",c.mapStateSvc)("controls",c.controls),j(1),q("clrVerticalNavCollapsible",!0)("clr-nav-level",2),j(1),q("clrVerticalNavGroupExpanded",!0),j(4),q("layersSvc",c.layersSvc)("mapStateSvc",c.mapStateSvc)("layerfilter","Overlays"),j(1),q("clrVerticalNavGroupExpanded",!0),j(4),q("layersSvc",c.layersSvc)("mapStateSvc",c.mapStateSvc),j(1),q("clrVerticalNavGroupExpanded",!0),j(4),q("layersSvc",c.layersSvc)("mapStateSvc",c.mapStateSvc))},directives:[Zd,Hh,Vu,jh,Ya,qh,Wh,uf,hI],styles:["[_nghost-%COMP%]     .zoom-number{bottom:2.5em;left:8px}"]}),l})(),data:{title:"OWS Context layers"}},{path:"example-layout",component:Ott,data:{title:"Two Vertical-Nav Layout"}},{path:"example-layer-style",component:Btt,data:{title:"Switching Layer-Style"}},{path:"ol-performance",component:tnt,data:{title:"Ol-Performance"}},{path:"threejs",component:(()=>{class l{constructor(o,c,u,h){this.layersSvc=o,this.mapStateSvc=c,this.mapOlSvc=u,this.mapThreeSvc=h,this.class="content-container",this.controls={attribution:!0,mousePosition:!0,scaleLine:!0,zoom:!0}}ngOnInit(){const o=new Bd({source:new $T({url:"https://planetarymaps.usgs.gov/cgi-bin/mapserv?map=/maps/mars/phobos_simp_cyl.map",params:{LAYERS:"VIKING"},crossOrigin:"anonymous"})}),c=new lnt({showLabels:!0,wrapX:!0,latLabelPosition:.5}),u=new Qi({id:"phobos",name:"Phobos",custom_layer:o,description:"There are a few objects that are very big, but still irregularly shaped.\n      Because they are big, it makes sense to serve their image-material per WMTS instead of a single, humongous file.\n      Because they are irregularly shaped, it makes sense to display them in 3d.\n\n      This demo shows how we can project openlayers-layers onto a three-js mesh to reap the benefits of both libraries."}),h=new Qi({id:"graticule",name:"Graticule",custom_layer:c,description:"Note how adding and removing this layer is reflected in both the map and the 3d-object."});this.layersSvc.addLayer(u),this.layersSvc.addLayer(h)}ngAfterViewInit(){const o=Bn("EPSG:4326");this.mapOlSvc.setProjection(o),this.mapOlSvc.map.getView().setMaxZoom(4)}}return l.\u0275fac=function(o){return new(o||l)(O(vo),O(Oo),O(Qs),O($ie))},l.\u0275cmp=Qe({type:l,selectors:[["app-route-example-threejs"]],hostVars:2,hostBindings:function(o,c){2&o&&ul(c.class)},features:[Mt([vo,Qs])],decls:25,vars:10,consts:[[1,"content-area"],[2,"height","49.5%","width","100%"],["id","olMap",3,"layersSvc","mapState","controls"],[2,"height","50%","width","100%"],["id","threeMap",3,"mapOlSvc"],[1,"right",3,"clrVerticalNavCollapsible","clr-nav-level"],[1,"layers",3,"clrVerticalNavGroupExpanded"],["shape","info","clrVerticalNavIcon","","title","layers"],[1,"padding","title-ellipsis"],[1,"card",2,"margin","0px","margin-bottom","10px"],[1,"card-block"],[1,"card-text"],["shape","layers","clrVerticalNavIcon","","title","layers"],[1,"alert-item","static"],[1,"alert-text"],[3,"layersSvc","mapStateSvc"]],template:function(o,c){1&o&&(V(0,"main",0),V(1,"div",1),xe(2,"ukis-map-ol",2),B(),V(3,"div",3),xe(4,"ukis-map-three",4),B(),B(),V(5,"clr-vertical-nav",5),V(6,"clr-vertical-nav-group",6),xe(7,"clr-icon",7),Le(8," Phobos "),V(9,"clr-vertical-nav-group-children",8),V(10,"div",9),V(11,"div",10),V(12,"div",11),V(13,"p"),Le(14," This is a threejs/openlayers demo application. Here, we project an openlayers map as a canvas-texture onto a glTF model of the Mars-moon Phobos. "),B(),V(15,"p"),Le(16," There are some objects that are so irregular that they are better displayed with a three dimensional model, yet so large that their imagedata is best served per WMTS. Phobos is a good example of such an object. Note how the texture gets sharper when you zoom in: this is a new WMTS tile being loaded, projected and displayed on the fly. "),B(),B(),B(),B(),B(),B(),V(17,"clr-vertical-nav-group",6),xe(18,"clr-icon",12),Le(19," Layers "),V(20,"clr-vertical-nav-group-children",8),V(21,"div",13),V(22,"span",14),Le(23," The controls of map and 3d-object are synced. Use the mouse to pan around in either and watch both displays change. "),B(),B(),xe(24,"ukis-layer-control",15),B(),B(),B()),2&o&&(j(2),q("layersSvc",c.layersSvc)("mapState",c.mapStateSvc)("controls",c.controls),j(2),q("mapOlSvc",c.mapOlSvc),j(1),q("clrVerticalNavCollapsible",!0)("clr-nav-level",2),j(1),q("clrVerticalNavGroupExpanded",!0),j(11),q("clrVerticalNavGroupExpanded",!0),j(7),q("layersSvc",c.layersSvc)("mapStateSvc",c.mapStateSvc))},directives:[Zd,_tt,Hh,Vu,jh,Ya,qh,Wh,U4,uf],styles:[""]}),l})(),data:{title:"Threejs"}},{path:"licenses",component:Htt,data:{title:"Licenses"}}];let unt=(()=>{class l{}return l.\u0275fac=function(o){return new(o||l)},l.\u0275mod=Yt({type:l}),l.\u0275inj=jt({imports:[[a9.forRoot(cnt,{useHash:!0,preloadingStrategy:r9,relativeLinkResolution:"legacy"})],a9]}),l})();"undefined"!=typeof window&&window.hasOwnProperty("ClarityIcons")&&window.ClarityIcons.add({ukis:'\n                <svg version="1.1" viewBox="0 0 36 36" preserveAspectRatio="xMidYMid meet" class="has-solid"\n                    xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" focusable="false" role="img">\n                    <title>ukis</title>\n                    <path class="clr-i-solid clr-i-solid-path-1" d="M18,31.5c4.7,0,8.9-2.4,11.3-6.1H6.7C9.1,29.1,13.3,31.5,18,31.5z"/>\n                    <path class="clr-i-solid clr-i-solid-path-2" d="M4.5,17.1c0,0.3,0,0.6,0,0.9c0,1.7,0.3,3.4,0.9,4.9h21.2L4.5,17.1z"/>\n                    <path class="clr-i-solid clr-i-solid-path-3" d="M31,21.5c0.3-1.1,0.5-2.3,0.5-3.5c0-3-1-5.7-2.6-7.9L8.7,15.6L31,21.5z"/>\n                    <path class="clr-i-solid clr-i-solid-path-4" d="M18,4.5c-6,0-11.2,4-12.9,9.5l22-6C24.7,5.8,21.5,4.5,18,4.5z"/>\n                </svg>\n            ',dlr:'\n                <svg version="1.1" viewBox="0 0 36 36" preserveAspectRatio="xMidYMid meet" class="has-solid"\n                    xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" focusable="false" role="img">\n                    <title>dlr</title>\n                    <path class="clr-i-solid clr-i-solid-path-1" d="M25.8,13.2V3.8l-9.4,9.4h-8l-7.7,7.7l9.4,0v9.4l9.4-9.4h8l7.7-7.7H25.8L25.8,13.2z M23.9,8.5v4.7h-4.7L23.9,8.5\n                    L23.9,8.5z M5.4,18.9l3.8-3.8h5.3l-3.8,3.8H5.4L5.4,18.9z M12.1,25.6v-4.8h4.8L12.1,25.6L12.1,25.6z M18.8,18.9h-5.4l3.8-3.8h5.4\n                    L18.8,18.9L18.8,18.9z M26.8,18.9h-5.2l3.8-3.8h5.2L26.8,18.9L26.8,18.9z M19.6,26.5h1.6c1.8,0,3.3,0.6,3.3,2.9\n                    c0,2.3-1.6,2.9-3.3,2.9h-1.6V26.5L19.6,26.5z M20.8,31.3h0.6c1,0,1.9-0.7,1.9-2c0-1.2-0.9-2-1.9-2h-0.6V31.3L20.8,31.3z M25.7,26.5\n                    h1.1v4.8h2.2v0.9h-3.4V26.5L25.7,26.5z M30.1,26.5h1.2c1.2,0,2.7,0,2.7,1.6c0,0.7-0.5,1.2-1.2,1.3v0c0.3,0,0.5,0.3,0.6,0.6l0.9,2.2\n                    h-1.3l-0.7-1.8c-0.2-0.4-0.3-0.6-0.8-0.6h-0.4v2.4h-1.1V26.5L30.1,26.5z M31.3,28.9h0.4c0.6,0,1.2-0.1,1.2-0.8\n                    c0-0.7-0.6-0.7-1.2-0.7h-0.4V28.9L31.3,28.9z"/>\n                </svg>\n            ',eoc:'\n                <svg version="1.1" viewBox="0 0 580 220" preserveAspectRatio="xMidYMid meet" class="has-solid"\n                    xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" focusable="false" role="img">\n                    <title>eoc</title>\n                    <path class="clr-i-solid clr-i-solid-path-1" d="M284,210c-55.1,0-100-44.9-100-100S228.9,10,284,10s100,44.9,100,100S339.1,210,284,210z M284,28.2\n                    c-45.1,0-81.8,36.7-81.8,81.8s36.7,81.8,81.8,81.8s81.8-36.7,81.8-81.8S329.1,28.2,284,28.2z M566,180.7l-12.9-12.9\n                    c-31.9,31.9-83.8,31.9-115.7,0c-31.9-31.9-31.9-83.8,0-115.7c31.9-31.9,83.8-31.9,115.7,0L566,39.3c-39-39-102.5-39-141.5,0\n                    s-39,102.5,0,141.5c19.5,19.5,45.1,29.3,70.7,29.3S546.5,200.2,566,180.7z M184.7,180.7l-12.9-12.9c-31.9,31.9-83.8,31.9-115.7,0\n                    c-15.5-15.5-24-36-24-57.8c0-21.9,8.5-42.4,24-57.8c28.6-28.6,73.4-31.8,105.5-8.7l-67.8,75.2l13.5,12.2l80.3-89.1l-6.7-6.1\n                    C141.4,0.1,80.9,1.7,43.3,39.3C24.4,58.2,14,83.3,14,110c0,26.7,10.4,51.8,29.3,70.7C62.8,200.2,88.4,210,114,210\n                    C139.6,210,165.2,200.2,184.7,180.7z"/>\n                </svg>\n            '});let ose=(()=>{class l{constructor(){this.alertSource=new tt,this.alert$=this.alertSource.asObservable()}alert(o){this.alertSource.next(o)}}return l.\u0275fac=function(o){return new(o||l)},l.\u0275prov=Xe({token:l,factory:l.\u0275fac,providedIn:"root"}),l})();const dnt=[[["",8,"header-nav-el"]],"*",[["",8,"header-action-el"]]],fnt=[".header-nav-el","*",".header-action-el"];let pnt=(()=>{class l{constructor(){this.title=""}ngOnInit(){}}return l.\u0275fac=function(o){return new(o||l)},l.\u0275cmp=Qe({type:l,selectors:[["ukis-header"]],inputs:{title:["ukis-title","title"]},ngContentSelectors:fnt,decls:14,vars:3,consts:[[1,"header-1"],[1,"branding"],["href","https://www.dlr.de","target","_blank","alt","link to dlr"],["shape","dlr","size","48","alt","dlr icon",1,"is-solid"],["href","https://www.dlr.de/eoc/desktopdefault.aspx/tabid-5413/10560_read-21914","target","_blank","alt","link to dlr ukis"],["shape","ukis","size","33","alt","ukis icon",1,"is-solid"],["routerLink","/","routerLinkActive","active",1,"nav-link","title"],[1,"title",3,"title"],[1,"header-nav",3,"clr-nav-level"],[1,"header-actions"]],template:function(o,c){1&o&&(Lt(dnt),V(0,"clr-header",0),V(1,"div",1),V(2,"a",2),xe(3,"clr-icon",3),B(),V(4,"a",4),xe(5,"clr-icon",5),B(),V(6,"a",6),V(7,"span",7),Le(8),B(),B(),B(),V(9,"div",8),Be(10),B(),Be(11,1),V(12,"div",9),Be(13,2),B(),B()),2&o&&(j(7),q("title",c.title),j(1),Un(c.title),j(1),q("clr-nav-level",1))},directives:[mQ,pQ,Ya,nT,ZO,Vu],styles:[""]}),l})();function mnt(l,a){if(1&l){const o=mn();V(0,"button",11),ze("click",function(){const h=Ut(o).$implicit;return h.callback&&h.callback()}),Le(1),B()}if(2&l){const o=a.$implicit;j(1),Un(o.title)}}function gnt(l,a){if(1&l&&(V(0,"div",9),le(1,mnt,2,1,"button",10),B()),2&l){const o=ve(2);j(1),q("ngForOf",o.alert.actions)}}function ynt(l,a){if(1&l){const o=mn();V(0,"button",12),ze("click",function(){return Ut(o),ve(2).close()}),xe(1,"clr-icon",13),B()}}function vnt(l,a){if(1&l&&(V(0,"div",1),V(1,"div",2),V(2,"div",3),V(3,"div",4),xe(4,"clr-icon",5),B(),xe(5,"div",6),le(6,gnt,2,1,"div",7),B(),B(),le(7,ynt,2,0,"button",8),B()),2&l){const o=ve();q("ngClass","alert-"+o.alert.type),j(5),q("innerHTML",o.alert.text,JC),j(1),q("ngIf",o.alert.actions),j(1),q("ngIf",o.alert.closeable)}}let _nt=(()=>{class l{constructor(){this.alertChange=new pt}close(){this.alert=null,this.alertChange.emit(this.alert)}}return l.\u0275fac=function(o){return new(o||l)},l.\u0275cmp=Qe({type:l,selectors:[["ukis-global-alert"]],inputs:{alert:"alert"},outputs:{alertChange:"alertChange"},decls:1,vars:1,consts:[["class","alert alert-app-level","role","alert",3,"ngClass",4,"ngIf"],["role","alert",1,"alert","alert-app-level",3,"ngClass"],[1,"alert-items"],[1,"alert-item","static"],[1,"alert-icon-wrapper"],["shape","info-circle",1,"alert-icon"],[1,"alert-text",3,"innerHTML"],["class","alert-actions",4,"ngIf"],["type","button","class","close","aria-label","alert close",3,"click",4,"ngIf"],[1,"alert-actions"],["class","btn alert-action","aria-label","alert action",3,"click",4,"ngFor","ngForOf"],["aria-label","alert action",1,"btn","alert-action",3,"click"],["type","button","aria-label","alert close",1,"close",3,"click"],["aria-hidden","true","shape","close"]],template:function(o,c){1&o&&le(0,vnt,8,4,"div",0),2&o&&q("ngIf",c.alert)},directives:[Mn,_s,Ya,U4,Gi],styles:[""]}),l})();function bnt(l,a){if(1&l&&(V(0,"span"),V(1,"div",1),xe(2,"progress"),B(),B()),2&l){const o=ve();j(1),q("ngClass",o.getProgressClass())}}function Snt(l,a){if(1&l&&(V(0,"span"),V(1,"div",2),xe(2,"progress",3),B(),B()),2&l){const o=ve();j(1),q("ngClass",o.getProgressClass()),j(1),cl("max",o.progress.max),cl("value",o.progress.value)}}let Tnt=(()=>{class l{constructor(){this.progressChange=new pt}ngOnInit(){}getProgressClass(){var o,c;return(null===(o=this.progress)||void 0===o?void 0:o.class)?null===(c=this.progress)||void 0===c?void 0:c.class:""}}return l.\u0275fac=function(o){return new(o||l)},l.\u0275cmp=Qe({type:l,selectors:[["ukis-global-progress"]],inputs:{progress:"progress"},outputs:{progressChange:"progressChange"},decls:2,vars:2,consts:[[4,"ngIf"],[1,"progress","loop",3,"ngClass"],[1,"progress",3,"ngClass"],[3,"max","value"]],template:function(o,c){1&o&&(le(0,bnt,3,1,"span",0),le(1,Snt,3,3,"span",0)),2&o&&(q("ngIf",c.progress&&c.progress.indeterminate),j(1),q("ngIf",c.progress&&!c.progress.indeterminate))},directives:[Mn,_s],styles:[".progress[_ngcontent-%COMP%]{height:.5em}"]}),l})();function wnt(l,a){if(1&l){const o=mn();V(0,"ukis-global-alert",5),ze("alertChange",function(u){return Ut(o),ve().ui.alert=u}),B()}2&l&&q("alert",ve().ui.alert)}function Cnt(l,a){if(1&l){const o=mn();V(0,"ukis-global-progress",6),ze("progressChange",function(u){return Ut(o),ve().ui.progress=u}),B()}2&l&&q("progress",ve().ui.progress)}function xnt(l,a){if(1&l&&(V(0,"a",7),Le(1),B()),2&l){const o=a.$implicit;vv("routerLink","/",o.path,""),j(1),Un(o.data.title)}}const Ent=function(l){return{floating:l}};let Mnt=(()=>{class l{constructor(o,c,u){this.alertService=o,this.progressService=c,this.router=u,this.title="",this.shortTitle="",this.ui={floating:!1,flipped:!1,alert:null,progress:null},this.showProgress=h=>{this.ui.progress=h},this.setAlert=h=>{this.ui.alert=h},this.init(),this.routes=this.router.config.filter(h=>h.data)}init(){this.getHtmlMeta(["title","version","description","short-title"]),this.TITLE&&(this.title=this.TITLE),this["SHORT-TITLE"]&&(this.shortTitle=this["SHORT-TITLE"]),this.alertService.alert$.subscribe(o=>{this.setAlert(o)}),this.progressService.progress$.subscribe(o=>{this.showProgress(o)})}getHtmlMeta(o){const c=document.getElementsByTagName("meta");for(let u=0,h=c.length;u<h;u++){const d=c[u],f=d.getAttribute("name");o.includes(f)&&(this[f.toUpperCase()]=d.getAttribute("content")||d.getAttribute("value"))}}}return l.\u0275fac=function(o){return new(o||l)(O(ose),O(VV),O(Na))},l.\u0275cmp=Qe({type:l,selectors:[["app-root"]],decls:6,vars:7,consts:[[3,"ngClass"],[3,"alert","alertChange",4,"ngIf"],[3,"progress","progressChange",4,"ngIf"],[3,"ukis-title"],["routerLinkActive","active","class","nav-link nav-text header-nav-el",3,"routerLink",4,"ngFor","ngForOf"],[3,"alert","alertChange"],[3,"progress","progressChange"],["routerLinkActive","active",1,"nav-link","nav-text","header-nav-el",3,"routerLink"]],template:function(o,c){1&o&&(V(0,"clr-main-container",0),le(1,wnt,1,1,"ukis-global-alert",1),le(2,Cnt,1,1,"ukis-global-progress",2),V(3,"ukis-header",3),le(4,xnt,2,2,"a",4),B(),xe(5,"router-outlet"),B()),2&o&&(q("ngClass",as(5,Ent,c.ui.floating)),j(1),q("ngIf",c.ui.alert),j(1),q("ngIf",c.ui.progress),j(1),q("ukis-title",c.title),j(1),q("ngForOf",c.routes))},directives:[fQ,G4,_s,Mn,pnt,Gi,KO,_nt,Tnt,nT,ZO],styles:[""]}),l})();function ase(){return"undefined"!=typeof window&&void 0!==window.document}function E5(){return"undefined"!=typeof process&&"[object process]"==={}.toString.call(process)}function rm(l){switch(l.length){case 0:return new j_;case 1:return l[0];default:return new SZ(l)}}function lse(l,a,o,c,u={},h={}){const d=[],f=[];let m=-1,g=null;if(c.forEach(y=>{const v=y.offset,_=v==m,b=_&&g||{};Object.keys(y).forEach(w=>{let C=w,E=y[w];if("offset"!==w)switch(C=a.normalizePropertyName(C,d),E){case"!":E=u[w];break;case Kd:E=h[w];break;default:E=a.normalizeStyleValue(w,C,E,d)}b[C]=E}),_||f.push(b),g=b,m=v}),d.length){const y="\n - ";throw new Error(`Unable to animate due to the following errors:${y}${d.join(y)}`)}return f}function M5(l,a,o,c){switch(a){case"start":l.onStart(()=>c(o&&D5(o,"start",l)));break;case"done":l.onDone(()=>c(o&&D5(o,"done",l)));break;case"destroy":l.onDestroy(()=>c(o&&D5(o,"destroy",l)))}}function D5(l,a,o){const c=o.totalTime,h=A5(l.element,l.triggerName,l.fromState,l.toState,a||l.phaseName,null==c?l.totalTime:c,!!o.disabled),d=l._data;return null!=d&&(h._data=d),h}function A5(l,a,o,c,u="",h=0,d){return{element:l,triggerName:a,fromState:o,toState:c,phaseName:u,totalTime:h,disabled:!!d}}function uc(l,a,o){let c;return l instanceof Map?(c=l.get(a),c||l.set(a,c=o)):(c=l[a],c||(c=l[a]=o)),c}function cse(l){const a=l.indexOf(":");return[l.substring(1,a),l.substr(a+1)]}let I5=(l,a)=>!1,R5=(l,a)=>!1,use=(l,a,o)=>[];const hse=E5();(hse||"undefined"!=typeof Element)&&(I5=ase()?(l,a)=>{for(;a&&a!==document.documentElement;){if(a===l)return!0;a=a.parentNode||a.host}return!1}:(l,a)=>l.contains(a),R5=(()=>{if(hse||Element.prototype.matches)return(l,a)=>l.matches(a);{const l=Element.prototype,a=l.matchesSelector||l.mozMatchesSelector||l.msMatchesSelector||l.oMatchesSelector||l.webkitMatchesSelector;return a?(o,c)=>a.apply(o,[c]):R5}})(),use=(l,a,o)=>{let c=[];if(o){const u=l.querySelectorAll(a);for(let h=0;h<u.length;h++)c.push(u[h])}else{const u=l.querySelector(a);u&&c.push(u)}return c});let oy=null,dse=!1;function P5(l){oy||(oy=("undefined"!=typeof document?document.body:null)||{},dse=!!oy.style&&"WebkitAppearance"in oy.style);let a=!0;return oy.style&&!function(l){return"ebkit"==l.substring(1,6)}(l)&&(a=l in oy.style,!a&&dse&&(a="Webkit"+l.charAt(0).toUpperCase()+l.substr(1)in oy.style)),a}const L5=R5,O5=I5,N5=use;function fse(l){const a={};return Object.keys(l).forEach(o=>{const c=o.replace(/([a-z])([A-Z])/g,"$1-$2");a[c]=l[o]}),a}let pse=(()=>{class l{validateStyleProperty(o){return P5(o)}matchesElement(o,c){return L5(o,c)}containsElement(o,c){return O5(o,c)}query(o,c,u){return N5(o,c,u)}computeStyle(o,c,u){return u||""}animate(o,c,u,h,d,f=[],m){return new j_(u,h)}}return l.\u0275fac=function(o){return new(o||l)},l.\u0275prov=Xe({token:l,factory:l.\u0275fac}),l})(),F5=(()=>{class l{}return l.NOOP=new pse,l})();const k5="ng-enter",VR="ng-leave",BR="ng-trigger",UR=".ng-trigger",gse="ng-animating",V5=".ng-animating";function ay(l){if("number"==typeof l)return l;const a=l.match(/^(-?[\.\d]+)(m?s)/);return!a||a.length<2?0:B5(parseFloat(a[1]),a[2])}function B5(l,a){switch(a){case"s":return 1e3*l;default:return l}}function GR(l,a,o){return l.hasOwnProperty("duration")?l:function(l,a,o){let u,h=0,d="";if("string"==typeof l){const f=l.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===f)return a.push(`The provided timing value "${l}" is invalid.`),{duration:0,delay:0,easing:""};u=B5(parseFloat(f[1]),f[2]);const m=f[3];null!=m&&(h=B5(parseFloat(m),f[4]));const g=f[5];g&&(d=g)}else u=l;if(!o){let f=!1,m=a.length;u<0&&(a.push("Duration values below 0 are not allowed for this animation step."),f=!0),h<0&&(a.push("Delay values below 0 are not allowed for this animation step."),f=!0),f&&a.splice(m,0,`The provided timing value "${l}" is invalid.`)}return{duration:u,delay:h,easing:d}}(l,a,o)}function pb(l,a={}){return Object.keys(l).forEach(o=>{a[o]=l[o]}),a}function im(l,a,o={}){if(a)for(let c in l)o[c]=l[c];else pb(l,o);return o}function vse(l,a,o){return o?a+":"+o+";":""}function _se(l){let a="";for(let o=0;o<l.style.length;o++){const c=l.style.item(o);a+=vse(0,c,l.style.getPropertyValue(c))}for(const o in l.style)l.style.hasOwnProperty(o)&&!o.startsWith("_")&&(a+=vse(0,Nnt(o),l.style[o]));l.setAttribute("style",a)}function id(l,a,o){l.style&&(Object.keys(a).forEach(c=>{const u=G5(c);o&&!o.hasOwnProperty(c)&&(o[c]=l.style[u]),l.style[u]=a[c]}),E5()&&_se(l))}function ly(l,a){l.style&&(Object.keys(a).forEach(o=>{const c=G5(o);l.style[c]=""}),E5()&&_se(l))}function aC(l){return Array.isArray(l)?1==l.length?l[0]:_Z(l):l}const U5=new RegExp("{{\\s*(.+?)\\s*}}","g");function bse(l){let a=[];if("string"==typeof l){let o;for(;o=U5.exec(l);)a.push(o[1]);U5.lastIndex=0}return a}function zR(l,a,o){const c=l.toString(),u=c.replace(U5,(h,d)=>{let f=a[d];return a.hasOwnProperty(d)||(o.push(`Please provide a value for the animation param ${d}`),f=""),f.toString()});return u==c?l:u}function HR(l){const a=[];let o=l.next();for(;!o.done;)a.push(o.value),o=l.next();return a}const Ont=/-+([a-z0-9])/g;function G5(l){return l.replace(Ont,(...a)=>a[1].toUpperCase())}function Nnt(l){return l.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function Sse(l,a){return 0===l||0===a}function Tse(l,a,o){const c=Object.keys(o);if(c.length&&a.length){let h=a[0],d=[];if(c.forEach(f=>{h.hasOwnProperty(f)||d.push(f),h[f]=o[f]}),d.length)for(var u=1;u<a.length;u++){let f=a[u];d.forEach(function(m){f[m]=z5(l,m)})}}return a}function hc(l,a,o){switch(a.type){case 7:return l.visitTrigger(a,o);case 0:return l.visitState(a,o);case 1:return l.visitTransition(a,o);case 2:return l.visitSequence(a,o);case 3:return l.visitGroup(a,o);case 4:return l.visitAnimate(a,o);case 5:return l.visitKeyframes(a,o);case 6:return l.visitStyle(a,o);case 8:return l.visitReference(a,o);case 9:return l.visitAnimateChild(a,o);case 10:return l.visitAnimateRef(a,o);case 11:return l.visitQuery(a,o);case 12:return l.visitStagger(a,o);default:throw new Error(`Unable to resolve animation metadata node #${a.type}`)}}function z5(l,a){return window.getComputedStyle(l)[a]}function Fnt(l,a){const o=[];return"string"==typeof l?l.split(/\s*,\s*/).forEach(c=>function(l,a,o){if(":"==l[0]){const m=function(l,a){switch(l){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(o,c)=>parseFloat(c)>parseFloat(o);case":decrement":return(o,c)=>parseFloat(c)<parseFloat(o);default:return a.push(`The transition alias value "${l}" is not supported`),"* => *"}}(l,o);if("function"==typeof m)return void a.push(m);l=m}const c=l.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==c||c.length<4)return o.push(`The provided transition expression "${l}" is not supported`),a;const u=c[1],h=c[2],d=c[3];a.push(wse(u,d));"<"==h[0]&&!("*"==u&&"*"==d)&&a.push(wse(d,u))}(c,o,a)):o.push(l),o}const WR=new Set(["true","1"]),qR=new Set(["false","0"]);function wse(l,a){const o=WR.has(l)||qR.has(l),c=WR.has(a)||qR.has(a);return(u,h)=>{let d="*"==l||l==u,f="*"==a||a==h;return!d&&o&&"boolean"==typeof u&&(d=u?WR.has(l):qR.has(l)),!f&&c&&"boolean"==typeof h&&(f=h?WR.has(a):qR.has(a)),d&&f}}const Bnt=new RegExp("s*:selfs*,?","g");function H5(l,a,o){return new Unt(l).build(a,o)}class Unt{constructor(a){this._driver=a}build(a,o){const c=new Hnt(o);return this._resetContextStyleTimingState(c),hc(this,aC(a),c)}_resetContextStyleTimingState(a){a.currentQuerySelector="",a.collectedStyles={},a.collectedStyles[""]={},a.currentTime=0}visitTrigger(a,o){let c=o.queryCount=0,u=o.depCount=0;const h=[],d=[];return"@"==a.name.charAt(0)&&o.errors.push("animation triggers cannot be prefixed with an `@` sign (e.g. trigger('@foo', [...]))"),a.definitions.forEach(f=>{if(this._resetContextStyleTimingState(o),0==f.type){const m=f,g=m.name;g.toString().split(/\s*,\s*/).forEach(y=>{m.name=y,h.push(this.visitState(m,o))}),m.name=g}else if(1==f.type){const m=this.visitTransition(f,o);c+=m.queryCount,u+=m.depCount,d.push(m)}else o.errors.push("only state() and transition() definitions can sit inside of a trigger()")}),{type:7,name:a.name,states:h,transitions:d,queryCount:c,depCount:u,options:null}}visitState(a,o){const c=this.visitStyle(a.styles,o),u=a.options&&a.options.params||null;if(c.containsDynamicStyles){const h=new Set,d=u||{};if(c.styles.forEach(f=>{if(XR(f)){const m=f;Object.keys(m).forEach(g=>{bse(m[g]).forEach(y=>{d.hasOwnProperty(y)||h.add(y)})})}}),h.size){const f=HR(h.values());o.errors.push(`state("${a.name}", ...) must define default values for all the following style substitutions: ${f.join(", ")}`)}}return{type:0,name:a.name,style:c,options:u?{params:u}:null}}visitTransition(a,o){o.queryCount=0,o.depCount=0;const c=hc(this,aC(a.animation),o);return{type:1,matchers:Fnt(a.expr,o.errors),animation:c,queryCount:o.queryCount,depCount:o.depCount,options:cy(a.options)}}visitSequence(a,o){return{type:2,steps:a.steps.map(c=>hc(this,c,o)),options:cy(a.options)}}visitGroup(a,o){const c=o.currentTime;let u=0;const h=a.steps.map(d=>{o.currentTime=c;const f=hc(this,d,o);return u=Math.max(u,o.currentTime),f});return o.currentTime=u,{type:3,steps:h,options:cy(a.options)}}visitAnimate(a,o){const c=function(l,a){let o=null;if(l.hasOwnProperty("duration"))o=l;else if("number"==typeof l)return j5(GR(l,a).duration,0,"");const c=l;if(c.split(/\s+/).some(h=>"{"==h.charAt(0)&&"{"==h.charAt(1))){const h=j5(0,0,"");return h.dynamic=!0,h.strValue=c,h}return o=o||GR(c,a),j5(o.duration,o.delay,o.easing)}(a.timings,o.errors);o.currentAnimateTimings=c;let u,h=a.styles?a.styles:kr({});if(5==h.type)u=this.visitKeyframes(h,o);else{let d=a.styles,f=!1;if(!d){f=!0;const g={};c.easing&&(g.easing=c.easing),d=kr(g)}o.currentTime+=c.duration+c.delay;const m=this.visitStyle(d,o);m.isEmptyStep=f,u=m}return o.currentAnimateTimings=null,{type:4,timings:c,style:u,options:null}}visitStyle(a,o){const c=this._makeStyleAst(a,o);return this._validateStyleAst(c,o),c}_makeStyleAst(a,o){const c=[];Array.isArray(a.styles)?a.styles.forEach(d=>{"string"==typeof d?d==Kd?c.push(d):o.errors.push(`The provided style string value ${d} is not allowed.`):c.push(d)}):c.push(a.styles);let u=!1,h=null;return c.forEach(d=>{if(XR(d)){const f=d,m=f.easing;if(m&&(h=m,delete f.easing),!u)for(let g in f)if(f[g].toString().indexOf("{{")>=0){u=!0;break}}}),{type:6,styles:c,easing:h,offset:a.offset,containsDynamicStyles:u,options:null}}_validateStyleAst(a,o){const c=o.currentAnimateTimings;let u=o.currentTime,h=o.currentTime;c&&h>0&&(h-=c.duration+c.delay),a.styles.forEach(d=>{"string"!=typeof d&&Object.keys(d).forEach(f=>{if(!this._driver.validateStyleProperty(f))return void o.errors.push(`The provided animation property "${f}" is not a supported CSS property for animations`);const m=o.collectedStyles[o.currentQuerySelector],g=m[f];let y=!0;g&&(h!=u&&h>=g.startTime&&u<=g.endTime&&(o.errors.push(`The CSS property "${f}" that exists between the times of "${g.startTime}ms" and "${g.endTime}ms" is also being animated in a parallel animation between the times of "${h}ms" and "${u}ms"`),y=!1),h=g.startTime),y&&(m[f]={startTime:h,endTime:u}),o.options&&function(l,a,o){const c=a.params||{},u=bse(l);u.length&&u.forEach(h=>{c.hasOwnProperty(h)||o.push(`Unable to resolve the local animation param ${h} in the given list of values`)})}(d[f],o.options,o.errors)})})}visitKeyframes(a,o){const c={type:5,styles:[],options:null};if(!o.currentAnimateTimings)return o.errors.push("keyframes() must be placed inside of a call to animate()"),c;let h=0;const d=[];let f=!1,m=!1,g=0;const y=a.steps.map(M=>{const x=this._makeStyleAst(M,o);let R=null!=x.offset?x.offset:function(l){if("string"==typeof l)return null;let a=null;if(Array.isArray(l))l.forEach(o=>{if(XR(o)&&o.hasOwnProperty("offset")){const c=o;a=parseFloat(c.offset),delete c.offset}});else if(XR(l)&&l.hasOwnProperty("offset")){const o=l;a=parseFloat(o.offset),delete o.offset}return a}(x.styles),P=0;return null!=R&&(h++,P=x.offset=R),m=m||P<0||P>1,f=f||P<g,g=P,d.push(P),x});m&&o.errors.push("Please ensure that all keyframe offsets are between 0 and 1"),f&&o.errors.push("Please ensure that all keyframe offsets are in order");const v=a.steps.length;let _=0;h>0&&h<v?o.errors.push("Not all style() steps within the declared keyframes() contain offsets"):0==h&&(_=1/(v-1));const b=v-1,w=o.currentTime,C=o.currentAnimateTimings,E=C.duration;return y.forEach((M,x)=>{const R=_>0?x==b?1:_*x:d[x],P=R*E;o.currentTime=w+C.delay+P,C.duration=P,this._validateStyleAst(M,o),M.offset=R,c.styles.push(M)}),c}visitReference(a,o){return{type:8,animation:hc(this,aC(a.animation),o),options:cy(a.options)}}visitAnimateChild(a,o){return o.depCount++,{type:9,options:cy(a.options)}}visitAnimateRef(a,o){return{type:10,animation:this.visitReference(a.animation,o),options:cy(a.options)}}visitQuery(a,o){const c=o.currentQuerySelector,u=a.options||{};o.queryCount++,o.currentQuery=a;const[h,d]=function(l){const a=!!l.split(/\s*,\s*/).find(o=>":self"==o);return a&&(l=l.replace(Bnt,"")),[l=l.replace(/@\*/g,UR).replace(/@\w+/g,o=>UR+"-"+o.substr(1)).replace(/:animating/g,V5),a]}(a.selector);o.currentQuerySelector=c.length?c+" "+h:h,uc(o.collectedStyles,o.currentQuerySelector,{});const f=hc(this,aC(a.animation),o);return o.currentQuery=null,o.currentQuerySelector=c,{type:11,selector:h,limit:u.limit||0,optional:!!u.optional,includeSelf:d,animation:f,originalSelector:a.selector,options:cy(a.options)}}visitStagger(a,o){o.currentQuery||o.errors.push("stagger() can only be used inside of query()");const c="full"===a.timings?{duration:0,delay:0,easing:"full"}:GR(a.timings,o.errors,!0);return{type:12,animation:hc(this,aC(a.animation),o),timings:c,options:null}}}class Hnt{constructor(a){this.errors=a,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles={},this.options=null}}function XR(l){return!Array.isArray(l)&&"object"==typeof l}function cy(l){return l?(l=pb(l)).params&&(l.params=function(l){return l?pb(l):null}(l.params)):l={},l}function j5(l,a,o){return{duration:l,delay:a,easing:o}}function W5(l,a,o,c,u,h,d=null,f=!1){return{type:1,element:l,keyframes:a,preStyleProps:o,postStyleProps:c,duration:u,delay:h,totalTime:u+h,easing:d,subTimeline:f}}class $R{constructor(){this._map=new Map}consume(a){let o=this._map.get(a);return o?this._map.delete(a):o=[],o}append(a,o){let c=this._map.get(a);c||this._map.set(a,c=[]),c.push(...o)}has(a){return this._map.has(a)}clear(){this._map.clear()}}const $nt=new RegExp(":enter","g"),Znt=new RegExp(":leave","g");function q5(l,a,o,c,u,h={},d={},f,m,g=[]){return(new Knt).buildKeyframes(l,a,o,c,u,h,d,f,m,g)}class Knt{buildKeyframes(a,o,c,u,h,d,f,m,g,y=[]){g=g||new $R;const v=new X5(a,o,g,u,h,y,[]);v.options=m,v.currentTimeline.setStyles([d],null,v.errors,m),hc(this,c,v);const _=v.timelines.filter(b=>b.containsAnimation());if(_.length&&Object.keys(f).length){const b=_[_.length-1];b.allowOnlyTimelineStyles()||b.setStyles([f],null,v.errors,m)}return _.length?_.map(b=>b.buildKeyframes()):[W5(o,[],[],[],0,0,"",!1)]}visitTrigger(a,o){}visitState(a,o){}visitTransition(a,o){}visitAnimateChild(a,o){const c=o.subInstructions.consume(o.element);if(c){const u=o.createSubContext(a.options),h=o.currentTimeline.currentTime,d=this._visitSubInstructions(c,u,u.options);h!=d&&o.transformIntoNewTimeline(d)}o.previousNode=a}visitAnimateRef(a,o){const c=o.createSubContext(a.options);c.transformIntoNewTimeline(),this.visitReference(a.animation,c),o.transformIntoNewTimeline(c.currentTimeline.currentTime),o.previousNode=a}_visitSubInstructions(a,o,c){let h=o.currentTimeline.currentTime;const d=null!=c.duration?ay(c.duration):null,f=null!=c.delay?ay(c.delay):null;return 0!==d&&a.forEach(m=>{const g=o.appendInstructionToTimeline(m,d,f);h=Math.max(h,g.duration+g.delay)}),h}visitReference(a,o){o.updateOptions(a.options,!0),hc(this,a.animation,o),o.previousNode=a}visitSequence(a,o){const c=o.subContextCount;let u=o;const h=a.options;if(h&&(h.params||h.delay)&&(u=o.createSubContext(h),u.transformIntoNewTimeline(),null!=h.delay)){6==u.previousNode.type&&(u.currentTimeline.snapshotCurrentStyles(),u.previousNode=YR);const d=ay(h.delay);u.delayNextStep(d)}a.steps.length&&(a.steps.forEach(d=>hc(this,d,u)),u.currentTimeline.applyStylesToKeyframe(),u.subContextCount>c&&u.transformIntoNewTimeline()),o.previousNode=a}visitGroup(a,o){const c=[];let u=o.currentTimeline.currentTime;const h=a.options&&a.options.delay?ay(a.options.delay):0;a.steps.forEach(d=>{const f=o.createSubContext(a.options);h&&f.delayNextStep(h),hc(this,d,f),u=Math.max(u,f.currentTimeline.currentTime),c.push(f.currentTimeline)}),c.forEach(d=>o.currentTimeline.mergeTimelineCollectedStyles(d)),o.transformIntoNewTimeline(u),o.previousNode=a}_visitTiming(a,o){if(a.dynamic){const c=a.strValue;return GR(o.params?zR(c,o.params,o.errors):c,o.errors)}return{duration:a.duration,delay:a.delay,easing:a.easing}}visitAnimate(a,o){const c=o.currentAnimateTimings=this._visitTiming(a.timings,o),u=o.currentTimeline;c.delay&&(o.incrementTime(c.delay),u.snapshotCurrentStyles());const h=a.style;5==h.type?this.visitKeyframes(h,o):(o.incrementTime(c.duration),this.visitStyle(h,o),u.applyStylesToKeyframe()),o.currentAnimateTimings=null,o.previousNode=a}visitStyle(a,o){const c=o.currentTimeline,u=o.currentAnimateTimings;!u&&c.getCurrentStyleProperties().length&&c.forwardFrame();const h=u&&u.easing||a.easing;a.isEmptyStep?c.applyEmptyStep(h):c.setStyles(a.styles,h,o.errors,o.options),o.previousNode=a}visitKeyframes(a,o){const c=o.currentAnimateTimings,u=o.currentTimeline.duration,h=c.duration,f=o.createSubContext().currentTimeline;f.easing=c.easing,a.styles.forEach(m=>{f.forwardTime((m.offset||0)*h),f.setStyles(m.styles,m.easing,o.errors,o.options),f.applyStylesToKeyframe()}),o.currentTimeline.mergeTimelineCollectedStyles(f),o.transformIntoNewTimeline(u+h),o.previousNode=a}visitQuery(a,o){const c=o.currentTimeline.currentTime,u=a.options||{},h=u.delay?ay(u.delay):0;h&&(6===o.previousNode.type||0==c&&o.currentTimeline.getCurrentStyleProperties().length)&&(o.currentTimeline.snapshotCurrentStyles(),o.previousNode=YR);let d=c;const f=o.invokeQuery(a.selector,a.originalSelector,a.limit,a.includeSelf,!!u.optional,o.errors);o.currentQueryTotal=f.length;let m=null;f.forEach((g,y)=>{o.currentQueryIndex=y;const v=o.createSubContext(a.options,g);h&&v.delayNextStep(h),g===o.element&&(m=v.currentTimeline),hc(this,a.animation,v),v.currentTimeline.applyStylesToKeyframe(),d=Math.max(d,v.currentTimeline.currentTime)}),o.currentQueryIndex=0,o.currentQueryTotal=0,o.transformIntoNewTimeline(d),m&&(o.currentTimeline.mergeTimelineCollectedStyles(m),o.currentTimeline.snapshotCurrentStyles()),o.previousNode=a}visitStagger(a,o){const c=o.parentContext,u=o.currentTimeline,h=a.timings,d=Math.abs(h.duration),f=d*(o.currentQueryTotal-1);let m=d*o.currentQueryIndex;switch(h.duration<0?"reverse":h.easing){case"reverse":m=f-m;break;case"full":m=c.currentStaggerTime}const y=o.currentTimeline;m&&y.delayNextStep(m);const v=y.currentTime;hc(this,a.animation,o),o.previousNode=a,c.currentStaggerTime=u.currentTime-v+(u.startTime-c.currentTimeline.startTime)}}const YR={};class X5{constructor(a,o,c,u,h,d,f,m){this._driver=a,this.element=o,this.subInstructions=c,this._enterClassName=u,this._leaveClassName=h,this.errors=d,this.timelines=f,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=YR,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=m||new ZR(this._driver,o,0),f.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(a,o){if(!a)return;const c=a;let u=this.options;null!=c.duration&&(u.duration=ay(c.duration)),null!=c.delay&&(u.delay=ay(c.delay));const h=c.params;if(h){let d=u.params;d||(d=this.options.params={}),Object.keys(h).forEach(f=>{(!o||!d.hasOwnProperty(f))&&(d[f]=zR(h[f],d,this.errors))})}}_copyOptions(){const a={};if(this.options){const o=this.options.params;if(o){const c=a.params={};Object.keys(o).forEach(u=>{c[u]=o[u]})}}return a}createSubContext(a=null,o,c){const u=o||this.element,h=new X5(this._driver,u,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(u,c||0));return h.previousNode=this.previousNode,h.currentAnimateTimings=this.currentAnimateTimings,h.options=this._copyOptions(),h.updateOptions(a),h.currentQueryIndex=this.currentQueryIndex,h.currentQueryTotal=this.currentQueryTotal,h.parentContext=this,this.subContextCount++,h}transformIntoNewTimeline(a){return this.previousNode=YR,this.currentTimeline=this.currentTimeline.fork(this.element,a),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(a,o,c){const u={duration:null!=o?o:a.duration,delay:this.currentTimeline.currentTime+(null!=c?c:0)+a.delay,easing:""},h=new Jnt(this._driver,a.element,a.keyframes,a.preStyleProps,a.postStyleProps,u,a.stretchStartingKeyframe);return this.timelines.push(h),u}incrementTime(a){this.currentTimeline.forwardTime(this.currentTimeline.duration+a)}delayNextStep(a){a>0&&this.currentTimeline.delayNextStep(a)}invokeQuery(a,o,c,u,h,d){let f=[];if(u&&f.push(this.element),a.length>0){a=(a=a.replace($nt,"."+this._enterClassName)).replace(Znt,"."+this._leaveClassName);let g=this._driver.query(this.element,a,1!=c);0!==c&&(g=c<0?g.slice(g.length+c,g.length):g.slice(0,c)),f.push(...g)}return!h&&0==f.length&&d.push(`\`query("${o}")\` returned zero elements. (Use \`query("${o}", { optional: true })\` if you wish to allow this.)`),f}}class ZR{constructor(a,o,c,u){this._driver=a,this.element=o,this.startTime=c,this._elementTimelineStylesLookup=u,this.duration=0,this._previousKeyframe={},this._currentKeyframe={},this._keyframes=new Map,this._styleSummary={},this._pendingStyles={},this._backFill={},this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._localTimelineStyles=Object.create(this._backFill,{}),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(o),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(o,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.getCurrentStyleProperties().length>0;default:return!0}}getCurrentStyleProperties(){return Object.keys(this._currentKeyframe)}get currentTime(){return this.startTime+this.duration}delayNextStep(a){const o=1==this._keyframes.size&&Object.keys(this._pendingStyles).length;this.duration||o?(this.forwardTime(this.currentTime+a),o&&this.snapshotCurrentStyles()):this.startTime+=a}fork(a,o){return this.applyStylesToKeyframe(),new ZR(this._driver,a,o||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=Object.create(this._backFill,{}),this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(a){this.applyStylesToKeyframe(),this.duration=a,this._loadKeyframe()}_updateStyle(a,o){this._localTimelineStyles[a]=o,this._globalTimelineStyles[a]=o,this._styleSummary[a]={time:this.currentTime,value:o}}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(a){a&&(this._previousKeyframe.easing=a),Object.keys(this._globalTimelineStyles).forEach(o=>{this._backFill[o]=this._globalTimelineStyles[o]||Kd,this._currentKeyframe[o]=Kd}),this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(a,o,c,u){o&&(this._previousKeyframe.easing=o);const h=u&&u.params||{},d=function(l,a){const o={};let c;return l.forEach(u=>{"*"===u?(c=c||Object.keys(a),c.forEach(h=>{o[h]=Kd})):im(u,!1,o)}),o}(a,this._globalTimelineStyles);Object.keys(d).forEach(f=>{const m=zR(d[f],h,c);this._pendingStyles[f]=m,this._localTimelineStyles.hasOwnProperty(f)||(this._backFill[f]=this._globalTimelineStyles.hasOwnProperty(f)?this._globalTimelineStyles[f]:Kd),this._updateStyle(f,m)})}applyStylesToKeyframe(){const a=this._pendingStyles,o=Object.keys(a);0!=o.length&&(this._pendingStyles={},o.forEach(c=>{this._currentKeyframe[c]=a[c]}),Object.keys(this._localTimelineStyles).forEach(c=>{this._currentKeyframe.hasOwnProperty(c)||(this._currentKeyframe[c]=this._localTimelineStyles[c])}))}snapshotCurrentStyles(){Object.keys(this._localTimelineStyles).forEach(a=>{const o=this._localTimelineStyles[a];this._pendingStyles[a]=o,this._updateStyle(a,o)})}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const a=[];for(let o in this._currentKeyframe)a.push(o);return a}mergeTimelineCollectedStyles(a){Object.keys(a._styleSummary).forEach(o=>{const c=this._styleSummary[o],u=a._styleSummary[o];(!c||u.time>c.time)&&this._updateStyle(o,u.value)})}buildKeyframes(){this.applyStylesToKeyframe();const a=new Set,o=new Set,c=1===this._keyframes.size&&0===this.duration;let u=[];this._keyframes.forEach((f,m)=>{const g=im(f,!0);Object.keys(g).forEach(y=>{const v=g[y];"!"==v?a.add(y):v==Kd&&o.add(y)}),c||(g.offset=m/this.duration),u.push(g)});const h=a.size?HR(a.values()):[],d=o.size?HR(o.values()):[];if(c){const f=u[0],m=pb(f);f.offset=0,m.offset=1,u=[f,m]}return W5(this.element,u,h,d,this.duration,this.startTime,this.easing,!1)}}class Jnt extends ZR{constructor(a,o,c,u,h,d,f=!1){super(a,o,d.delay),this.keyframes=c,this.preStyleProps=u,this.postStyleProps=h,this._stretchStartingKeyframe=f,this.timings={duration:d.duration,delay:d.delay,easing:d.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let a=this.keyframes,{delay:o,duration:c,easing:u}=this.timings;if(this._stretchStartingKeyframe&&o){const h=[],d=c+o,f=o/d,m=im(a[0],!1);m.offset=0,h.push(m);const g=im(a[0],!1);g.offset=Ese(f),h.push(g);const y=a.length-1;for(let v=1;v<=y;v++){let _=im(a[v],!1);_.offset=Ese((o+_.offset*c)/d),h.push(_)}c=d,o=0,u="",a=h}return W5(this.element,a,this.preStyleProps,this.postStyleProps,c,o,u,!0)}}function Ese(l,a=3){const o=Math.pow(10,a-1);return Math.round(l*o)/o}class $5{}class ert extends $5{normalizePropertyName(a,o){return G5(a)}normalizeStyleValue(a,o,c,u){let h="";const d=c.toString().trim();if(trt[o]&&0!==c&&"0"!==c)if("number"==typeof c)h="px";else{const f=c.match(/^[+-]?[\d\.]+([a-z]*)$/);f&&0==f[1].length&&u.push(`Please provide a CSS unit value for ${a}:${c}`)}return d+h}}const trt=(()=>function(l){const a={};return l.forEach(o=>a[o]=!0),a}("width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent,perspective".split(",")))();function Mse(l,a,o,c,u,h,d,f,m,g,y,v,_){return{type:0,element:l,triggerName:a,isRemovalTransition:u,fromState:o,fromStyles:h,toState:c,toStyles:d,timelines:f,queriedElements:m,preStyleProps:g,postStyleProps:y,totalTime:v,errors:_}}const Y5={};class Dse{constructor(a,o,c){this._triggerName=a,this.ast=o,this._stateStyles=c}match(a,o,c,u){return function(l,a,o,c,u){return l.some(h=>h(a,o,c,u))}(this.ast.matchers,a,o,c,u)}buildStyles(a,o,c){const u=this._stateStyles["*"],h=this._stateStyles[a],d=u?u.buildStyles(o,c):{};return h?h.buildStyles(o,c):d}build(a,o,c,u,h,d,f,m,g,y){const v=[],_=this.ast.options&&this.ast.options.params||Y5,w=this.buildStyles(c,f&&f.params||Y5,v),C=m&&m.params||Y5,E=this.buildStyles(u,C,v),M=new Set,x=new Map,R=new Map,P="void"===u,k={params:Object.assign(Object.assign({},_),C)},W=y?[]:q5(a,o,this.ast.animation,h,d,w,E,k,g,v);let U=0;if(W.forEach(Q=>{U=Math.max(Q.duration+Q.delay,U)}),v.length)return Mse(o,this._triggerName,c,u,P,w,E,[],[],x,R,U,v);W.forEach(Q=>{const se=Q.element,te=uc(x,se,{});Q.preStyleProps.forEach(de=>te[de]=!0);const De=uc(R,se,{});Q.postStyleProps.forEach(de=>De[de]=!0),se!==o&&M.add(se)});const K=HR(M.values());return Mse(o,this._triggerName,c,u,P,w,E,W,K,x,R,U)}}class irt{constructor(a,o,c){this.styles=a,this.defaultParams=o,this.normalizer=c}buildStyles(a,o){const c={},u=pb(this.defaultParams);return Object.keys(a).forEach(h=>{const d=a[h];null!=d&&(u[h]=d)}),this.styles.styles.forEach(h=>{if("string"!=typeof h){const d=h;Object.keys(d).forEach(f=>{let m=d[f];m.length>1&&(m=zR(m,u,o));const g=this.normalizer.normalizePropertyName(f,o);m=this.normalizer.normalizeStyleValue(f,g,m,o),c[g]=m})}}),c}}class ort{constructor(a,o,c){this.name=a,this.ast=o,this._normalizer=c,this.transitionFactories=[],this.states={},o.states.forEach(u=>{this.states[u.name]=new irt(u.style,u.options&&u.options.params||{},c)}),Ase(this.states,"true","1"),Ase(this.states,"false","0"),o.transitions.forEach(u=>{this.transitionFactories.push(new Dse(a,u,this.states))}),this.fallbackTransition=function(l,a,o){return new Dse(l,{type:1,animation:{type:2,steps:[],options:null},matchers:[(d,f)=>!0],options:null,queryCount:0,depCount:0},a)}(a,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(a,o,c,u){return this.transitionFactories.find(d=>d.match(a,o,c,u))||null}matchStyles(a,o,c){return this.fallbackTransition.buildStyles(a,o,c)}}function Ase(l,a,o){l.hasOwnProperty(a)?l.hasOwnProperty(o)||(l[o]=l[a]):l.hasOwnProperty(o)&&(l[a]=l[o])}const lrt=new $R;class crt{constructor(a,o,c){this.bodyNode=a,this._driver=o,this._normalizer=c,this._animations={},this._playersById={},this.players=[]}register(a,o){const c=[],u=H5(this._driver,o,c);if(c.length)throw new Error(`Unable to build the animation due to the following errors: ${c.join("\n")}`);this._animations[a]=u}_buildPlayer(a,o,c){const u=a.element,h=lse(0,this._normalizer,0,a.keyframes,o,c);return this._driver.animate(u,h,a.duration,a.delay,a.easing,[],!0)}create(a,o,c={}){const u=[],h=this._animations[a];let d;const f=new Map;if(h?(d=q5(this._driver,o,h,k5,VR,{},{},c,lrt,u),d.forEach(y=>{const v=uc(f,y.element,{});y.postStyleProps.forEach(_=>v[_]=null)})):(u.push("The requested animation doesn't exist or has already been destroyed"),d=[]),u.length)throw new Error(`Unable to create the animation due to the following errors: ${u.join("\n")}`);f.forEach((y,v)=>{Object.keys(y).forEach(_=>{y[_]=this._driver.computeStyle(v,_,Kd)})});const g=rm(d.map(y=>{const v=f.get(y.element);return this._buildPlayer(y,{},v)}));return this._playersById[a]=g,g.onDestroy(()=>this.destroy(a)),this.players.push(g),g}destroy(a){const o=this._getPlayer(a);o.destroy(),delete this._playersById[a];const c=this.players.indexOf(o);c>=0&&this.players.splice(c,1)}_getPlayer(a){const o=this._playersById[a];if(!o)throw new Error(`Unable to find the timeline player referenced by ${a}`);return o}listen(a,o,c,u){const h=A5(o,"","","");return M5(this._getPlayer(a),c,h,u),()=>{}}command(a,o,c,u){if("register"==c)return void this.register(a,u[0]);if("create"==c)return void this.create(a,o,u[0]||{});const h=this._getPlayer(a);switch(c){case"play":h.play();break;case"pause":h.pause();break;case"reset":h.reset();break;case"restart":h.restart();break;case"finish":h.finish();break;case"init":h.init();break;case"setPosition":h.setPosition(parseFloat(u[0]));break;case"destroy":this.destroy(a)}}}const Ise="ng-animate-queued",Rse="ng-animate-disabled",Pse=".ng-animate-disabled",frt=[],Lse={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},prt={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},qc="__ng_removed";class Z5{constructor(a,o=""){this.namespaceId=o;const c=a&&a.hasOwnProperty("value");if(this.value=function(l){return null!=l?l:null}(c?a.value:a),c){const h=pb(a);delete h.value,this.options=h}else this.options={};this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(a){const o=a.params;if(o){const c=this.options.params;Object.keys(o).forEach(u=>{null==c[u]&&(c[u]=o[u])})}}}const lC="void",K5=new Z5(lC);class mrt{constructor(a,o,c){this.id=a,this.hostElement=o,this._engine=c,this.players=[],this._triggers={},this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+a,Xc(o,this._hostClassName)}listen(a,o,c,u){if(!this._triggers.hasOwnProperty(o))throw new Error(`Unable to listen on the animation trigger event "${c}" because the animation trigger "${o}" doesn't exist!`);if(null==c||0==c.length)throw new Error(`Unable to listen on the animation trigger "${o}" because the provided event is undefined!`);if(!function(l){return"start"==l||"done"==l}(c))throw new Error(`The provided animation trigger event "${c}" for the animation trigger "${o}" is not supported!`);const h=uc(this._elementListeners,a,[]),d={name:o,phase:c,callback:u};h.push(d);const f=uc(this._engine.statesByElement,a,{});return f.hasOwnProperty(o)||(Xc(a,BR),Xc(a,BR+"-"+o),f[o]=K5),()=>{this._engine.afterFlush(()=>{const m=h.indexOf(d);m>=0&&h.splice(m,1),this._triggers[o]||delete f[o]})}}register(a,o){return!this._triggers[a]&&(this._triggers[a]=o,!0)}_getTrigger(a){const o=this._triggers[a];if(!o)throw new Error(`The provided animation trigger "${a}" has not been registered!`);return o}trigger(a,o,c,u=!0){const h=this._getTrigger(o),d=new J5(this.id,o,a);let f=this._engine.statesByElement.get(a);f||(Xc(a,BR),Xc(a,BR+"-"+o),this._engine.statesByElement.set(a,f={}));let m=f[o];const g=new Z5(c,this.id);if(!(c&&c.hasOwnProperty("value"))&&m&&g.absorbOptions(m.options),f[o]=g,m||(m=K5),g.value!==lC&&m.value===g.value){if(!function(l,a){const o=Object.keys(l),c=Object.keys(a);if(o.length!=c.length)return!1;for(let u=0;u<o.length;u++){const h=o[u];if(!a.hasOwnProperty(h)||l[h]!==a[h])return!1}return!0}(m.params,g.params)){const C=[],E=h.matchStyles(m.value,m.params,C),M=h.matchStyles(g.value,g.params,C);C.length?this._engine.reportError(C):this._engine.afterFlush(()=>{ly(a,E),id(a,M)})}return}const _=uc(this._engine.playersByElement,a,[]);_.forEach(C=>{C.namespaceId==this.id&&C.triggerName==o&&C.queued&&C.destroy()});let b=h.matchTransition(m.value,g.value,a,g.params),w=!1;if(!b){if(!u)return;b=h.fallbackTransition,w=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:a,triggerName:o,transition:b,fromState:m,toState:g,player:d,isFallbackTransition:w}),w||(Xc(a,Ise),d.onStart(()=>{mb(a,Ise)})),d.onDone(()=>{let C=this.players.indexOf(d);C>=0&&this.players.splice(C,1);const E=this._engine.playersByElement.get(a);if(E){let M=E.indexOf(d);M>=0&&E.splice(M,1)}}),this.players.push(d),_.push(d),d}deregister(a){delete this._triggers[a],this._engine.statesByElement.forEach((o,c)=>{delete o[a]}),this._elementListeners.forEach((o,c)=>{this._elementListeners.set(c,o.filter(u=>u.name!=a))})}clearElementCache(a){this._engine.statesByElement.delete(a),this._elementListeners.delete(a);const o=this._engine.playersByElement.get(a);o&&(o.forEach(c=>c.destroy()),this._engine.playersByElement.delete(a))}_signalRemovalForInnerTriggers(a,o){const c=this._engine.driver.query(a,UR,!0);c.forEach(u=>{if(u[qc])return;const h=this._engine.fetchNamespacesByElement(u);h.size?h.forEach(d=>d.triggerLeaveAnimation(u,o,!1,!0)):this.clearElementCache(u)}),this._engine.afterFlushAnimationsDone(()=>c.forEach(u=>this.clearElementCache(u)))}triggerLeaveAnimation(a,o,c,u){const h=this._engine.statesByElement.get(a);if(h){const d=[];if(Object.keys(h).forEach(f=>{if(this._triggers[f]){const m=this.trigger(a,f,lC,u);m&&d.push(m)}}),d.length)return this._engine.markElementAsRemoved(this.id,a,!0,o),c&&rm(d).onDone(()=>this._engine.processLeaveNode(a)),!0}return!1}prepareLeaveAnimationListeners(a){const o=this._elementListeners.get(a),c=this._engine.statesByElement.get(a);if(o&&c){const u=new Set;o.forEach(h=>{const d=h.name;if(u.has(d))return;u.add(d);const m=this._triggers[d].fallbackTransition,g=c[d]||K5,y=new Z5(lC),v=new J5(this.id,d,a);this._engine.totalQueuedPlayers++,this._queue.push({element:a,triggerName:d,transition:m,fromState:g,toState:y,player:v,isFallbackTransition:!0})})}}removeNode(a,o){const c=this._engine;if(a.childElementCount&&this._signalRemovalForInnerTriggers(a,o),this.triggerLeaveAnimation(a,o,!0))return;let u=!1;if(c.totalAnimations){const h=c.players.length?c.playersByQueriedElement.get(a):[];if(h&&h.length)u=!0;else{let d=a;for(;d=d.parentNode;)if(c.statesByElement.get(d)){u=!0;break}}}if(this.prepareLeaveAnimationListeners(a),u)c.markElementAsRemoved(this.id,a,!1,o);else{const h=a[qc];(!h||h===Lse)&&(c.afterFlush(()=>this.clearElementCache(a)),c.destroyInnerAnimations(a),c._onRemovalComplete(a,o))}}insertNode(a,o){Xc(a,this._hostClassName)}drainQueuedTransitions(a){const o=[];return this._queue.forEach(c=>{const u=c.player;if(u.destroyed)return;const h=c.element,d=this._elementListeners.get(h);d&&d.forEach(f=>{if(f.name==c.triggerName){const m=A5(h,c.triggerName,c.fromState.value,c.toState.value);m._data=a,M5(c.player,f.phase,m,f.callback)}}),u.markedForDestroy?this._engine.afterFlush(()=>{u.destroy()}):o.push(c)}),this._queue=[],o.sort((c,u)=>{const h=c.transition.ast.depCount,d=u.transition.ast.depCount;return 0==h||0==d?h-d:this._engine.driver.containsElement(c.element,u.element)?1:-1})}destroy(a){this.players.forEach(o=>o.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,a)}elementContainsData(a){let o=!1;return this._elementListeners.has(a)&&(o=!0),o=!!this._queue.find(c=>c.element===a)||o,o}}class grt{constructor(a,o,c){this.bodyNode=a,this.driver=o,this._normalizer=c,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(u,h)=>{}}_onRemovalComplete(a,o){this.onRemovalComplete(a,o)}get queuedPlayers(){const a=[];return this._namespaceList.forEach(o=>{o.players.forEach(c=>{c.queued&&a.push(c)})}),a}createNamespace(a,o){const c=new mrt(a,o,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,o)?this._balanceNamespaceList(c,o):(this.newHostElements.set(o,c),this.collectEnterElement(o)),this._namespaceLookup[a]=c}_balanceNamespaceList(a,o){const c=this._namespaceList.length-1;if(c>=0){let u=!1;for(let h=c;h>=0;h--)if(this.driver.containsElement(this._namespaceList[h].hostElement,o)){this._namespaceList.splice(h+1,0,a),u=!0;break}u||this._namespaceList.splice(0,0,a)}else this._namespaceList.push(a);return this.namespacesByHostElement.set(o,a),a}register(a,o){let c=this._namespaceLookup[a];return c||(c=this.createNamespace(a,o)),c}registerTrigger(a,o,c){let u=this._namespaceLookup[a];u&&u.register(o,c)&&this.totalAnimations++}destroy(a,o){if(!a)return;const c=this._fetchNamespace(a);this.afterFlush(()=>{this.namespacesByHostElement.delete(c.hostElement),delete this._namespaceLookup[a];const u=this._namespaceList.indexOf(c);u>=0&&this._namespaceList.splice(u,1)}),this.afterFlushAnimationsDone(()=>c.destroy(o))}_fetchNamespace(a){return this._namespaceLookup[a]}fetchNamespacesByElement(a){const o=new Set,c=this.statesByElement.get(a);if(c){const u=Object.keys(c);for(let h=0;h<u.length;h++){const d=c[u[h]].namespaceId;if(d){const f=this._fetchNamespace(d);f&&o.add(f)}}}return o}trigger(a,o,c,u){if(KR(o)){const h=this._fetchNamespace(a);if(h)return h.trigger(o,c,u),!0}return!1}insertNode(a,o,c,u){if(!KR(o))return;const h=o[qc];if(h&&h.setForRemoval){h.setForRemoval=!1,h.setForMove=!0;const d=this.collectedLeaveElements.indexOf(o);d>=0&&this.collectedLeaveElements.splice(d,1)}if(a){const d=this._fetchNamespace(a);d&&d.insertNode(o,c)}u&&this.collectEnterElement(o)}collectEnterElement(a){this.collectedEnterElements.push(a)}markElementAsDisabled(a,o){o?this.disabledNodes.has(a)||(this.disabledNodes.add(a),Xc(a,Rse)):this.disabledNodes.has(a)&&(this.disabledNodes.delete(a),mb(a,Rse))}removeNode(a,o,c,u){if(KR(o)){const h=a?this._fetchNamespace(a):null;if(h?h.removeNode(o,u):this.markElementAsRemoved(a,o,!1,u),c){const d=this.namespacesByHostElement.get(o);d&&d.id!==a&&d.removeNode(o,u)}}else this._onRemovalComplete(o,u)}markElementAsRemoved(a,o,c,u){this.collectedLeaveElements.push(o),o[qc]={namespaceId:a,setForRemoval:u,hasAnimation:c,removedBeforeQueried:!1}}listen(a,o,c,u,h){return KR(o)?this._fetchNamespace(a).listen(o,c,u,h):()=>{}}_buildInstruction(a,o,c,u,h){return a.transition.build(this.driver,a.element,a.fromState.value,a.toState.value,c,u,a.fromState.options,a.toState.options,o,h)}destroyInnerAnimations(a){let o=this.driver.query(a,UR,!0);o.forEach(c=>this.destroyActiveAnimationsForElement(c)),0!=this.playersByQueriedElement.size&&(o=this.driver.query(a,V5,!0),o.forEach(c=>this.finishActiveQueriedAnimationOnElement(c)))}destroyActiveAnimationsForElement(a){const o=this.playersByElement.get(a);o&&o.forEach(c=>{c.queued?c.markedForDestroy=!0:c.destroy()})}finishActiveQueriedAnimationOnElement(a){const o=this.playersByQueriedElement.get(a);o&&o.forEach(c=>c.finish())}whenRenderingDone(){return new Promise(a=>{if(this.players.length)return rm(this.players).onDone(()=>a());a()})}processLeaveNode(a){const o=a[qc];if(o&&o.setForRemoval){if(a[qc]=Lse,o.namespaceId){this.destroyInnerAnimations(a);const c=this._fetchNamespace(o.namespaceId);c&&c.clearElementCache(a)}this._onRemovalComplete(a,o.setForRemoval)}this.driver.matchesElement(a,Pse)&&this.markElementAsDisabled(a,!1),this.driver.query(a,Pse,!0).forEach(c=>{this.markElementAsDisabled(c,!1)})}flush(a=-1){let o=[];if(this.newHostElements.size&&(this.newHostElements.forEach((c,u)=>this._balanceNamespaceList(c,u)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let c=0;c<this.collectedEnterElements.length;c++)Xc(this.collectedEnterElements[c],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const c=[];try{o=this._flushAnimations(c,a)}finally{for(let u=0;u<c.length;u++)c[u]()}}else for(let c=0;c<this.collectedLeaveElements.length;c++)this.processLeaveNode(this.collectedLeaveElements[c]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(c=>c()),this._flushFns=[],this._whenQuietFns.length){const c=this._whenQuietFns;this._whenQuietFns=[],o.length?rm(o).onDone(()=>{c.forEach(u=>u())}):c.forEach(u=>u())}}reportError(a){throw new Error(`Unable to process animations due to the following failed trigger transitions\n ${a.join("\n")}`)}_flushAnimations(a,o){const c=new $R,u=[],h=new Map,d=[],f=new Map,m=new Map,g=new Map,y=new Set;this.disabledNodes.forEach(ue=>{y.add(ue);const ce=this.driver.query(ue,".ng-animate-queued",!0);for(let Re=0;Re<ce.length;Re++)y.add(ce[Re])});const v=this.bodyNode,_=Array.from(this.statesByElement.keys()),b=Fse(_,this.collectedEnterElements),w=new Map;let C=0;b.forEach((ue,ce)=>{const Re=k5+C++;w.set(ce,Re),ue.forEach(Oe=>Xc(Oe,Re))});const E=[],M=new Set,x=new Set;for(let ue=0;ue<this.collectedLeaveElements.length;ue++){const ce=this.collectedLeaveElements[ue],Re=ce[qc];Re&&Re.setForRemoval&&(E.push(ce),M.add(ce),Re.hasAnimation?this.driver.query(ce,".ng-star-inserted",!0).forEach(Oe=>M.add(Oe)):x.add(ce))}const R=new Map,P=Fse(_,Array.from(M));P.forEach((ue,ce)=>{const Re=VR+C++;R.set(ce,Re),ue.forEach(Oe=>Xc(Oe,Re))}),a.push(()=>{b.forEach((ue,ce)=>{const Re=w.get(ce);ue.forEach(Oe=>mb(Oe,Re))}),P.forEach((ue,ce)=>{const Re=R.get(ce);ue.forEach(Oe=>mb(Oe,Re))}),E.forEach(ue=>{this.processLeaveNode(ue)})});const k=[],W=[];for(let ue=this._namespaceList.length-1;ue>=0;ue--)this._namespaceList[ue].drainQueuedTransitions(o).forEach(Re=>{const Oe=Re.player,Ae=Re.element;if(k.push(Oe),this.collectedEnterElements.length){const Ce=Ae[qc];if(Ce&&Ce.setForMove)return void Oe.destroy()}const We=!v||!this.driver.containsElement(v,Ae),Te=R.get(Ae),He=w.get(Ae),Ue=this._buildInstruction(Re,c,He,Te,We);if(Ue.errors&&Ue.errors.length)W.push(Ue);else{if(We)return Oe.onStart(()=>ly(Ae,Ue.fromStyles)),Oe.onDestroy(()=>id(Ae,Ue.toStyles)),void u.push(Oe);if(Re.isFallbackTransition)return Oe.onStart(()=>ly(Ae,Ue.fromStyles)),Oe.onDestroy(()=>id(Ae,Ue.toStyles)),void u.push(Oe);Ue.timelines.forEach(Ce=>Ce.stretchStartingKeyframe=!0),c.append(Ae,Ue.timelines),d.push({instruction:Ue,player:Oe,element:Ae}),Ue.queriedElements.forEach(Ce=>uc(f,Ce,[]).push(Oe)),Ue.preStyleProps.forEach((Ce,xt)=>{const Ye=Object.keys(Ce);if(Ye.length){let Ct=m.get(xt);Ct||m.set(xt,Ct=new Set),Ye.forEach(Ot=>Ct.add(Ot))}}),Ue.postStyleProps.forEach((Ce,xt)=>{const Ye=Object.keys(Ce);let Ct=g.get(xt);Ct||g.set(xt,Ct=new Set),Ye.forEach(Ot=>Ct.add(Ot))})}});if(W.length){const ue=[];W.forEach(ce=>{ue.push(`@${ce.triggerName} has failed due to:\n`),ce.errors.forEach(Re=>ue.push(`- ${Re}\n`))}),k.forEach(ce=>ce.destroy()),this.reportError(ue)}const U=new Map,K=new Map;d.forEach(ue=>{const ce=ue.element;c.has(ce)&&(K.set(ce,ce),this._beforeAnimationBuild(ue.player.namespaceId,ue.instruction,U))}),u.forEach(ue=>{const ce=ue.element;this._getPreviousPlayers(ce,!1,ue.namespaceId,ue.triggerName,null).forEach(Oe=>{uc(U,ce,[]).push(Oe),Oe.destroy()})});const Q=E.filter(ue=>Vse(ue,m,g)),se=new Map;Nse(se,this.driver,x,g,Kd).forEach(ue=>{Vse(ue,m,g)&&Q.push(ue)});const De=new Map;b.forEach((ue,ce)=>{Nse(De,this.driver,new Set(ue),m,"!")}),Q.forEach(ue=>{const ce=se.get(ue),Re=De.get(ue);se.set(ue,Object.assign(Object.assign({},ce),Re))});const de=[],ye=[],_e={};d.forEach(ue=>{const{element:ce,player:Re,instruction:Oe}=ue;if(c.has(ce)){if(y.has(ce))return Re.onDestroy(()=>id(ce,Oe.toStyles)),Re.disabled=!0,Re.overrideTotalTime(Oe.totalTime),void u.push(Re);let Ae=_e;if(K.size>1){let Te=ce;const He=[];for(;Te=Te.parentNode;){const Ue=K.get(Te);if(Ue){Ae=Ue;break}He.push(Te)}He.forEach(Ue=>K.set(Ue,Ae))}const We=this._buildAnimation(Re.namespaceId,Oe,U,h,De,se);if(Re.setRealPlayer(We),Ae===_e)de.push(Re);else{const Te=this.playersByElement.get(Ae);Te&&Te.length&&(Re.parentPlayer=rm(Te)),u.push(Re)}}else ly(ce,Oe.fromStyles),Re.onDestroy(()=>id(ce,Oe.toStyles)),ye.push(Re),y.has(ce)&&u.push(Re)}),ye.forEach(ue=>{const ce=h.get(ue.element);if(ce&&ce.length){const Re=rm(ce);ue.setRealPlayer(Re)}}),u.forEach(ue=>{ue.parentPlayer?ue.syncPlayerEvents(ue.parentPlayer):ue.destroy()});for(let ue=0;ue<E.length;ue++){const ce=E[ue],Re=ce[qc];if(mb(ce,VR),Re&&Re.hasAnimation)continue;let Oe=[];if(f.size){let We=f.get(ce);We&&We.length&&Oe.push(...We);let Te=this.driver.query(ce,V5,!0);for(let He=0;He<Te.length;He++){let Ue=f.get(Te[He]);Ue&&Ue.length&&Oe.push(...Ue)}}const Ae=Oe.filter(We=>!We.destroyed);Ae.length?brt(this,ce,Ae):this.processLeaveNode(ce)}return E.length=0,de.forEach(ue=>{this.players.push(ue),ue.onDone(()=>{ue.destroy();const ce=this.players.indexOf(ue);this.players.splice(ce,1)}),ue.play()}),de}elementContainsData(a,o){let c=!1;const u=o[qc];return u&&u.setForRemoval&&(c=!0),this.playersByElement.has(o)&&(c=!0),this.playersByQueriedElement.has(o)&&(c=!0),this.statesByElement.has(o)&&(c=!0),this._fetchNamespace(a).elementContainsData(o)||c}afterFlush(a){this._flushFns.push(a)}afterFlushAnimationsDone(a){this._whenQuietFns.push(a)}_getPreviousPlayers(a,o,c,u,h){let d=[];if(o){const f=this.playersByQueriedElement.get(a);f&&(d=f)}else{const f=this.playersByElement.get(a);if(f){const m=!h||h==lC;f.forEach(g=>{g.queued||!m&&g.triggerName!=u||d.push(g)})}}return(c||u)&&(d=d.filter(f=>!(c&&c!=f.namespaceId||u&&u!=f.triggerName))),d}_beforeAnimationBuild(a,o,c){const h=o.element,d=o.isRemovalTransition?void 0:a,f=o.isRemovalTransition?void 0:o.triggerName;for(const m of o.timelines){const g=m.element,y=g!==h,v=uc(c,g,[]);this._getPreviousPlayers(g,y,d,f,o.toState).forEach(b=>{const w=b.getRealPlayer();w.beforeDestroy&&w.beforeDestroy(),b.destroy(),v.push(b)})}ly(h,o.fromStyles)}_buildAnimation(a,o,c,u,h,d){const f=o.triggerName,m=o.element,g=[],y=new Set,v=new Set,_=o.timelines.map(w=>{const C=w.element;y.add(C);const E=C[qc];if(E&&E.removedBeforeQueried)return new j_(w.duration,w.delay);const M=C!==m,x=function(l){const a=[];return kse(l,a),a}((c.get(C)||frt).map(U=>U.getRealPlayer())).filter(U=>!!U.element&&U.element===C),R=h.get(C),P=d.get(C),k=lse(0,this._normalizer,0,w.keyframes,R,P),W=this._buildPlayer(w,k,x);if(w.subTimeline&&u&&v.add(C),M){const U=new J5(a,f,C);U.setRealPlayer(W),g.push(U)}return W});g.forEach(w=>{uc(this.playersByQueriedElement,w.element,[]).push(w),w.onDone(()=>function(l,a,o){let c;if(l instanceof Map){if(c=l.get(a),c){if(c.length){const u=c.indexOf(o);c.splice(u,1)}0==c.length&&l.delete(a)}}else if(c=l[a],c){if(c.length){const u=c.indexOf(o);c.splice(u,1)}0==c.length&&delete l[a]}return c}(this.playersByQueriedElement,w.element,w))}),y.forEach(w=>Xc(w,gse));const b=rm(_);return b.onDestroy(()=>{y.forEach(w=>mb(w,gse)),id(m,o.toStyles)}),v.forEach(w=>{uc(u,w,[]).push(b)}),b}_buildPlayer(a,o,c){return o.length>0?this.driver.animate(a.element,o,a.duration,a.delay,a.easing,c):new j_(a.duration,a.delay)}}class J5{constructor(a,o,c){this.namespaceId=a,this.triggerName=o,this.element=c,this._player=new j_,this._containsRealPlayer=!1,this._queuedCallbacks={},this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(a){this._containsRealPlayer||(this._player=a,Object.keys(this._queuedCallbacks).forEach(o=>{this._queuedCallbacks[o].forEach(c=>M5(a,o,void 0,c))}),this._queuedCallbacks={},this._containsRealPlayer=!0,this.overrideTotalTime(a.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(a){this.totalTime=a}syncPlayerEvents(a){const o=this._player;o.triggerCallback&&a.onStart(()=>o.triggerCallback("start")),a.onDone(()=>this.finish()),a.onDestroy(()=>this.destroy())}_queueEvent(a,o){uc(this._queuedCallbacks,a,[]).push(o)}onDone(a){this.queued&&this._queueEvent("done",a),this._player.onDone(a)}onStart(a){this.queued&&this._queueEvent("start",a),this._player.onStart(a)}onDestroy(a){this.queued&&this._queueEvent("destroy",a),this._player.onDestroy(a)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(a){this.queued||this._player.setPosition(a)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(a){const o=this._player;o.triggerCallback&&o.triggerCallback(a)}}function KR(l){return l&&1===l.nodeType}function Ose(l,a){const o=l.style.display;return l.style.display=null!=a?a:"none",o}function Nse(l,a,o,c,u){const h=[];o.forEach(m=>h.push(Ose(m)));const d=[];c.forEach((m,g)=>{const y={};m.forEach(v=>{const _=y[v]=a.computeStyle(g,v,u);(!_||0==_.length)&&(g[qc]=prt,d.push(g))}),l.set(g,y)});let f=0;return o.forEach(m=>Ose(m,h[f++])),d}function Fse(l,a){const o=new Map;if(l.forEach(f=>o.set(f,[])),0==a.length)return o;const u=new Set(a),h=new Map;function d(f){if(!f)return 1;let m=h.get(f);if(m)return m;const g=f.parentNode;return m=o.has(g)?g:u.has(g)?1:d(g),h.set(f,m),m}return a.forEach(f=>{const m=d(f);1!==m&&o.get(m).push(f)}),o}const JR="$$classes";function Xc(l,a){if(l.classList)l.classList.add(a);else{let o=l[JR];o||(o=l[JR]={}),o[a]=!0}}function mb(l,a){if(l.classList)l.classList.remove(a);else{let o=l[JR];o&&delete o[a]}}function brt(l,a,o){rm(o).onDone(()=>l.processLeaveNode(a))}function kse(l,a){for(let o=0;o<l.length;o++){const c=l[o];c instanceof SZ?kse(c.players,a):a.push(c)}}function Vse(l,a,o){const c=o.get(l);if(!c)return!1;let u=a.get(l);return u?c.forEach(h=>u.add(h)):a.set(l,c),o.delete(l),!0}class QR{constructor(a,o,c){this.bodyNode=a,this._driver=o,this._normalizer=c,this._triggerCache={},this.onRemovalComplete=(u,h)=>{},this._transitionEngine=new grt(a,o,c),this._timelineEngine=new crt(a,o,c),this._transitionEngine.onRemovalComplete=(u,h)=>this.onRemovalComplete(u,h)}registerTrigger(a,o,c,u,h){const d=a+"-"+u;let f=this._triggerCache[d];if(!f){const m=[],g=H5(this._driver,h,m);if(m.length)throw new Error(`The animation trigger "${u}" has failed to build due to the following errors:\n - ${m.join("\n - ")}`);f=function(l,a,o){return new ort(l,a,o)}(u,g,this._normalizer),this._triggerCache[d]=f}this._transitionEngine.registerTrigger(o,u,f)}register(a,o){this._transitionEngine.register(a,o)}destroy(a,o){this._transitionEngine.destroy(a,o)}onInsert(a,o,c,u){this._transitionEngine.insertNode(a,o,c,u)}onRemove(a,o,c,u){this._transitionEngine.removeNode(a,o,u||!1,c)}disableAnimations(a,o){this._transitionEngine.markElementAsDisabled(a,o)}process(a,o,c,u){if("@"==c.charAt(0)){const[h,d]=cse(c);this._timelineEngine.command(h,o,d,u)}else this._transitionEngine.trigger(a,o,c,u)}listen(a,o,c,u,h){if("@"==c.charAt(0)){const[d,f]=cse(c);return this._timelineEngine.listen(d,o,f,h)}return this._transitionEngine.listen(a,o,c,u,h)}flush(a=-1){this._transitionEngine.flush(a)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}function Bse(l,a){let o=null,c=null;return Array.isArray(a)&&a.length?(o=Q5(a[0]),a.length>1&&(c=Q5(a[a.length-1]))):a&&(o=Q5(a)),o||c?new wrt(l,o,c):null}let wrt=(()=>{class l{constructor(o,c,u){this._element=o,this._startStyles=c,this._endStyles=u,this._state=0;let h=l.initialStylesByElement.get(o);h||l.initialStylesByElement.set(o,h={}),this._initialStyles=h}start(){this._state<1&&(this._startStyles&&id(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(id(this._element,this._initialStyles),this._endStyles&&(id(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(l.initialStylesByElement.delete(this._element),this._startStyles&&(ly(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(ly(this._element,this._endStyles),this._endStyles=null),id(this._element,this._initialStyles),this._state=3)}}return l.initialStylesByElement=new WeakMap,l})();function Q5(l){let a=null;const o=Object.keys(l);for(let c=0;c<o.length;c++){const u=o[c];Crt(u)&&(a=a||{},a[u]=l[u])}return a}function Crt(l){return"display"===l||"position"===l}const Gse="animationend";class Mrt{constructor(a,o,c,u,h,d,f){this._element=a,this._name=o,this._duration=c,this._delay=u,this._easing=h,this._fillMode=d,this._onDoneFn=f,this._finished=!1,this._destroyed=!1,this._startTime=0,this._position=0,this._eventFn=m=>this._handleCallback(m)}apply(){(function(l,a){const o=tU(l,"").trim();let c=0;o.length&&(function(l,a){let o=0;for(let c=0;c<l.length;c++)","===l.charAt(c)&&o++;return o}(o)+1,a=`${o}, ${a}`),e2(l,"",a)})(this._element,`${this._duration}ms ${this._easing} ${this._delay}ms 1 normal ${this._fillMode} ${this._name}`),jse(this._element,this._eventFn,!1),this._startTime=Date.now()}pause(){zse(this._element,this._name,"paused")}resume(){zse(this._element,this._name,"running")}setPosition(a){const o=Hse(this._element,this._name);this._position=a*this._duration,e2(this._element,"Delay",`-${this._position}ms`,o)}getPosition(){return this._position}_handleCallback(a){const o=a._ngTestManualTimestamp||Date.now(),c=1e3*parseFloat(a.elapsedTime.toFixed(3));a.animationName==this._name&&Math.max(o-this._startTime,0)>=this._delay&&c>=this._duration&&this.finish()}finish(){this._finished||(this._finished=!0,this._onDoneFn(),jse(this._element,this._eventFn,!0))}destroy(){this._destroyed||(this._destroyed=!0,this.finish(),function(l,a){const c=tU(l,"").split(","),u=eU(c,a);u>=0&&(c.splice(u,1),e2(l,"",c.join(",")))}(this._element,this._name))}}function zse(l,a,o){e2(l,"PlayState",o,Hse(l,a))}function Hse(l,a){const o=tU(l,"");return o.indexOf(",")>0?eU(o.split(","),a):eU([o],a)}function eU(l,a){for(let o=0;o<l.length;o++)if(l[o].indexOf(a)>=0)return o;return-1}function jse(l,a,o){o?l.removeEventListener(Gse,a):l.addEventListener(Gse,a)}function e2(l,a,o,c){const u="animation"+a;if(null!=c){const h=l.style[u];if(h.length){const d=h.split(",");d[c]=o,o=d.join(",")}}l.style[u]=o}function tU(l,a){return l.style["animation"+a]||""}class Wse{constructor(a,o,c,u,h,d,f,m){this.element=a,this.keyframes=o,this.animationName=c,this._duration=u,this._delay=h,this._finalStyles=f,this._specialStyles=m,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this.currentSnapshot={},this._state=0,this.easing=d||"linear",this.totalTime=u+h,this._buildStyler()}onStart(a){this._onStartFns.push(a)}onDone(a){this._onDoneFns.push(a)}onDestroy(a){this._onDestroyFns.push(a)}destroy(){this.init(),!(this._state>=4)&&(this._state=4,this._styler.destroy(),this._flushStartFns(),this._flushDoneFns(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(a=>a()),this._onDestroyFns=[])}_flushDoneFns(){this._onDoneFns.forEach(a=>a()),this._onDoneFns=[]}_flushStartFns(){this._onStartFns.forEach(a=>a()),this._onStartFns=[]}finish(){this.init(),!(this._state>=3)&&(this._state=3,this._styler.finish(),this._flushStartFns(),this._specialStyles&&this._specialStyles.finish(),this._flushDoneFns())}setPosition(a){this._styler.setPosition(a)}getPosition(){return this._styler.getPosition()}hasStarted(){return this._state>=2}init(){this._state>=1||(this._state=1,this._styler.apply(),this._delay&&this._styler.pause())}play(){this.init(),this.hasStarted()||(this._flushStartFns(),this._state=2,this._specialStyles&&this._specialStyles.start()),this._styler.resume()}pause(){this.init(),this._styler.pause()}restart(){this.reset(),this.play()}reset(){this._state=0,this._styler.destroy(),this._buildStyler(),this._styler.apply()}_buildStyler(){this._styler=new Mrt(this.element,this.animationName,this._duration,this._delay,this.easing,"forwards",()=>this.finish())}triggerCallback(a){const o="start"==a?this._onStartFns:this._onDoneFns;o.forEach(c=>c()),o.length=0}beforeDestroy(){this.init();const a={};if(this.hasStarted()){const o=this._state>=3;Object.keys(this._finalStyles).forEach(c=>{"offset"!=c&&(a[c]=o?this._finalStyles[c]:z5(this.element,c))})}this.currentSnapshot=a}}class Lrt extends j_{constructor(a,o){super(),this.element=a,this._startingStyles={},this.__initialized=!1,this._styles=fse(o)}init(){this.__initialized||!this._startingStyles||(this.__initialized=!0,Object.keys(this._styles).forEach(a=>{this._startingStyles[a]=this.element.style[a]}),super.init())}play(){!this._startingStyles||(this.init(),Object.keys(this._styles).forEach(a=>this.element.style.setProperty(a,this._styles[a])),super.play())}destroy(){!this._startingStyles||(Object.keys(this._startingStyles).forEach(a=>{const o=this._startingStyles[a];o?this.element.style.setProperty(a,o):this.element.style.removeProperty(a)}),this._startingStyles=null,super.destroy())}}class Xse{constructor(){this._count=0}validateStyleProperty(a){return P5(a)}matchesElement(a,o){return L5(a,o)}containsElement(a,o){return O5(a,o)}query(a,o,c){return N5(a,o,c)}computeStyle(a,o,c){return window.getComputedStyle(a)[o]}buildKeyframeElement(a,o,c){c=c.map(f=>fse(f));let u=`@keyframes ${o} {\n`,h="";c.forEach(f=>{h=" ";const m=parseFloat(f.offset);u+=`${h}${100*m}% {\n`,h+=" ",Object.keys(f).forEach(g=>{const y=f[g];switch(g){case"offset":return;case"easing":return void(y&&(u+=`${h}animation-timing-function: ${y};\n`));default:return void(u+=`${h}${g}: ${y};\n`)}}),u+=`${h}}\n`}),u+="}\n";const d=document.createElement("style");return d.textContent=u,d}animate(a,o,c,u,h,d=[],f){const m=d.filter(E=>E instanceof Wse),g={};Sse(c,u)&&m.forEach(E=>{let M=E.currentSnapshot;Object.keys(M).forEach(x=>g[x]=M[x])});const y=function(l){let a={};return l&&(Array.isArray(l)?l:[l]).forEach(c=>{Object.keys(c).forEach(u=>{"offset"==u||"easing"==u||(a[u]=c[u])})}),a}(o=Tse(a,o,g));if(0==c)return new Lrt(a,y);const v="gen_css_kf_"+this._count++,_=this.buildKeyframeElement(a,v,o);(function(l){var a;const o=null===(a=l.getRootNode)||void 0===a?void 0:a.call(l);return"undefined"!=typeof ShadowRoot&&o instanceof ShadowRoot?o:document.head})(a).appendChild(_);const w=Bse(a,o),C=new Wse(a,o,v,c,u,h,y,w);return C.onDestroy(()=>function(l){l.parentNode.removeChild(l)}(_)),C}}class Yse{constructor(a,o,c,u){this.element=a,this.keyframes=o,this.options=c,this._specialStyles=u,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this.time=0,this.parentPlayer=null,this.currentSnapshot={},this._duration=c.duration,this._delay=c.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(a=>a()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const a=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,a,this.options),this._finalKeyframe=a.length?a[a.length-1]:{},this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_triggerWebAnimation(a,o,c){return a.animate(o,c)}onStart(a){this._onStartFns.push(a)}onDone(a){this._onDoneFns.push(a)}onDestroy(a){this._onDestroyFns.push(a)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(a=>a()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(a=>a()),this._onDestroyFns=[])}setPosition(a){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=a*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const a={};this.hasStarted()&&Object.keys(this._finalKeyframe).forEach(o=>{"offset"!=o&&(a[o]=this._finished?this._finalKeyframe[o]:z5(this.element,o))}),this.currentSnapshot=a}triggerCallback(a){const o="start"==a?this._onStartFns:this._onDoneFns;o.forEach(c=>c()),o.length=0}}class Vrt{constructor(){this._isNativeImpl=/\{\s*\[native\s+code\]\s*\}/.test(Zse().toString()),this._cssKeyframesDriver=new Xse}validateStyleProperty(a){return P5(a)}matchesElement(a,o){return L5(a,o)}containsElement(a,o){return O5(a,o)}query(a,o,c){return N5(a,o,c)}computeStyle(a,o,c){return window.getComputedStyle(a)[o]}overrideWebAnimationsSupport(a){this._isNativeImpl=a}animate(a,o,c,u,h,d=[],f){if(!f&&!this._isNativeImpl)return this._cssKeyframesDriver.animate(a,o,c,u,h,d);const y={duration:c,delay:u,fill:0==u?"both":"forwards"};h&&(y.easing=h);const v={},_=d.filter(w=>w instanceof Yse);Sse(c,u)&&_.forEach(w=>{let C=w.currentSnapshot;Object.keys(C).forEach(E=>v[E]=C[E])});const b=Bse(a,o=Tse(a,o=o.map(w=>im(w,!1)),v));return new Yse(a,o,y,b)}}function Zse(){return ase()&&Element.prototype.animate||{}}let Urt=(()=>{class l extends vZ{constructor(o,c){super(),this._nextAnimationId=0,this._renderer=o.createRenderer(c.body,{id:"0",encapsulation:Ki.None,styles:[],data:{animation:[]}})}build(o){const c=this._nextAnimationId.toString();this._nextAnimationId++;const u=Array.isArray(o)?_Z(o):o;return Kse(this._renderer,null,c,"register",[u]),new Grt(c,this._renderer)}}return l.\u0275fac=function(o){return new(o||l)(be(Bf),be(Xn))},l.\u0275prov=Xe({token:l,factory:l.\u0275fac}),l})();class Grt extends class{}{constructor(a,o){super(),this._id=a,this._renderer=o}create(a,o){return new zrt(this._id,a,o||{},this._renderer)}}class zrt{constructor(a,o,c,u){this.id=a,this.element=o,this._renderer=u,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",c)}_listen(a,o){return this._renderer.listen(this.element,`@@${this.id}:${a}`,o)}_command(a,...o){return Kse(this._renderer,this.element,this.id,a,o)}onDone(a){this._listen("done",a)}onStart(a){this._listen("start",a)}onDestroy(a){this._listen("destroy",a)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(a){this._command("setPosition",a)}getPosition(){var a,o;return null!==(o=null===(a=this._renderer.engine.players[+this.id])||void 0===a?void 0:a.getPosition())&&void 0!==o?o:0}}function Kse(l,a,o,c,u){return l.setProperty(a,`@@${o}:${c}`,u)}const Jse="@.disabled";let Hrt=(()=>{class l{constructor(o,c,u){this.delegate=o,this.engine=c,this._zone=u,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),c.onRemovalComplete=(h,d)=>{d&&d.parentNode(h)&&d.removeChild(h.parentNode,h)}}createRenderer(o,c){const h=this.delegate.createRenderer(o,c);if(!(o&&c&&c.data&&c.data.animation)){let y=this._rendererCache.get(h);return y||(y=new Qse("",h,this.engine),this._rendererCache.set(h,y)),y}const d=c.id,f=c.id+"-"+this._currentId;this._currentId++,this.engine.register(f,o);const m=y=>{Array.isArray(y)?y.forEach(m):this.engine.registerTrigger(d,f,o,y.name,y)};return c.data.animation.forEach(m),new jrt(this,f,h,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(o,c,u){o>=0&&o<this._microtaskId?this._zone.run(()=>c(u)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(h=>{const[d,f]=h;d(f)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([c,u]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return l.\u0275fac=function(o){return new(o||l)(be(Bf),be(QR),be(Fn))},l.\u0275prov=Xe({token:l,factory:l.\u0275fac}),l})();class Qse{constructor(a,o,c){this.namespaceId=a,this.delegate=o,this.engine=c,this.destroyNode=this.delegate.destroyNode?u=>o.destroyNode(u):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(a,o){return this.delegate.createElement(a,o)}createComment(a){return this.delegate.createComment(a)}createText(a){return this.delegate.createText(a)}appendChild(a,o){this.delegate.appendChild(a,o),this.engine.onInsert(this.namespaceId,o,a,!1)}insertBefore(a,o,c,u=!0){this.delegate.insertBefore(a,o,c),this.engine.onInsert(this.namespaceId,o,a,u)}removeChild(a,o,c){this.engine.onRemove(this.namespaceId,o,this.delegate,c)}selectRootElement(a,o){return this.delegate.selectRootElement(a,o)}parentNode(a){return this.delegate.parentNode(a)}nextSibling(a){return this.delegate.nextSibling(a)}setAttribute(a,o,c,u){this.delegate.setAttribute(a,o,c,u)}removeAttribute(a,o,c){this.delegate.removeAttribute(a,o,c)}addClass(a,o){this.delegate.addClass(a,o)}removeClass(a,o){this.delegate.removeClass(a,o)}setStyle(a,o,c,u){this.delegate.setStyle(a,o,c,u)}removeStyle(a,o,c){this.delegate.removeStyle(a,o,c)}setProperty(a,o,c){"@"==o.charAt(0)&&o==Jse?this.disableAnimations(a,!!c):this.delegate.setProperty(a,o,c)}setValue(a,o){this.delegate.setValue(a,o)}listen(a,o,c){return this.delegate.listen(a,o,c)}disableAnimations(a,o){this.engine.disableAnimations(a,o)}}class jrt extends Qse{constructor(a,o,c,u){super(o,c,u),this.factory=a,this.namespaceId=o}setProperty(a,o,c){"@"==o.charAt(0)?"."==o.charAt(1)&&o==Jse?this.disableAnimations(a,c=void 0===c||!!c):this.engine.process(this.namespaceId,a,o.substr(1),c):this.delegate.setProperty(a,o,c)}listen(a,o,c){if("@"==o.charAt(0)){const u=function(l){switch(l){case"body":return document.body;case"document":return document;case"window":return window;default:return l}}(a);let h=o.substr(1),d="";return"@"!=h.charAt(0)&&([h,d]=function(l){const a=l.indexOf(".");return[l.substring(0,a),l.substr(a+1)]}(h)),this.engine.listen(this.namespaceId,u,h,d,f=>{this.factory.scheduleListenerCallback(f._data||-1,c,f)})}return this.delegate.listen(a,o,c)}}let Xrt=(()=>{class l extends QR{constructor(o,c,u){super(o.body,c,u)}ngOnDestroy(){this.flush()}}return l.\u0275fac=function(o){return new(o||l)(be(Xn),be(F5),be($5))},l.\u0275prov=Xe({token:l,factory:l.\u0275fac}),l})();const eoe=new Sn("AnimationModuleType"),toe=[{provide:vZ,useClass:Urt},{provide:$5,useFactory:function(){return new ert}},{provide:QR,useClass:Xrt},{provide:Bf,useFactory:function(l,a,o){return new Hrt(l,a,o)},deps:[aE,QR,Fn]}],noe=[{provide:F5,useFactory:function(){return"function"==typeof Zse()?new Vrt:new Xse}},{provide:eoe,useValue:"BrowserAnimations"},...toe],roe=[{provide:F5,useClass:pse},{provide:eoe,useValue:"NoopAnimations"},...toe];let Krt=(()=>{class l{static withConfig(o){return{ngModule:l,providers:o.disableAnimations?roe:noe}}}return l.\u0275fac=function(o){return new(o||l)},l.\u0275mod=Yt({type:l}),l.\u0275inj=jt({providers:noe,imports:[AO]}),l})(),Jrt=(()=>{class l{constructor(){this.alertSource=new tt,this.alert$=this.alertSource.asObservable()}alert(o){this.alertSource.next(o)}}return l.\u0275fac=function(o){return new(o||l)},l.\u0275prov=Xe({token:l,factory:l.\u0275fac,providedIn:"root"}),l})(),Qrt=(()=>{class l{constructor(){this.progressSource=new tt,this.progress$=this.progressSource.asObservable()}progress(o){this.progressSource.next(o)}}return l.\u0275fac=function(o){return new(o||l)},l.\u0275prov=Xe({token:l,factory:l.\u0275fac,providedIn:"root"}),l})(),eit=(()=>{class l{}return l.\u0275fac=function(o){return new(o||l)},l.\u0275mod=Yt({type:l}),l.\u0275inj=jt({providers:[Jrt,Qrt],imports:[[sr,JA]]}),l})(),tit=(()=>{class l{}return l.\u0275fac=function(o){return new(o||l)},l.\u0275mod=Yt({type:l}),l.\u0275inj=jt({imports:[[sr,JA,kh,b9e,eit]]}),l})(),nit=(()=>{class l{}return l.\u0275fac=function(o){return new(o||l)},l.\u0275mod=Yt({type:l}),l.\u0275inj=jt({imports:[[sr,kh,JA]]}),l})(),rit=(()=>{class l{}return l.\u0275fac=function(o){return new(o||l)},l.\u0275mod=Yt({type:l,bootstrap:[Mnt]}),l.\u0275inj=jt({providers:[ose,VV],imports:[[AO,unt,JA,kh,s3e,Krt,dFe,btt,tit,nit,CHe,J7e]]}),l})();(function(){if(GH)throw new Error("Cannot enable prod mode after platform setup.");UH=!1})(),pve().bootstrapModule(rit).catch(l=>console.error(l))},530:(en,wt,Ve)=>{"use strict";Ve.d(wt,{m:()=>nt});var _t=Ve(402);en=Ve.hmd(en);class nt{constructor(){}getCapabilitiesUrl(fe){return`${fe}?service=WPS&request=GetCapabilities&version=1.0.0`}getDescribeProcessUrl(fe,Ie){return`${fe}?service=WPS&request=DescribeProcess&version=1.0.0&Identifier=${Ie}`}executeUrl(fe,Ie){return`${fe}?service=WPS&request=Execute&version=1.0.0&identifier=${Ie}`}unmarshalCapabilities(fe){const Ie=[];return fe.processOfferings.process.forEach(T=>{Ie.push({id:T.identifier.value})}),Ie}unmarshalProcessDescription(fe){var Ie;const T=fe.processDescription[0],S=[];for(const L of T.dataInputs.input)S.push({description:this.unmarshalInputDescription(L),value:null});const D=[];for(const L of T.processOutputs.output)D.push({description:this.unmarshalOutputDescription(L),value:null});return{id:T.identifier.value,processVersion:T.processVersion,description:null===(Ie=T._abstract)||void 0===Ie?void 0:Ie.value,title:T.title.value,inputs:S,outputs:D}}unmarshalSyncExecuteResponse(fe,Ie,T,S,D){const L=[];if(fe.value.status.processFailed)L.push({description:{id:fe.value.process.identifier.value,title:fe.value.process.title.value,reference:!0,type:"error"},value:fe.value.statusLocation});else if(fe.value.processOutputs)for(const z of fe.value.processOutputs.output){const X=!!z.reference;let Y,re,J;z.reference?(Y="complex",re=z.reference.href||null,J=z.reference.mimeType):(z.data&&z.data.literalData?(Y="literal",J=z.data.literalData.dataType):z.data&&z.data.complexData?(Y="complex",J=z.data.complexData.mimeType):(Y="bbox",J=void 0),re=this.unmarshalOutputData(z.data)),L.push({description:{id:z.identifier.value,title:z.title.value,format:J,reference:X,type:Y},value:re})}else fe.value.statusLocation&&L.push({description:{id:fe.value.process.identifier.value,title:fe.value.process.title.value,reference:!0,type:"status"},value:this.unmarshalGetStateResponse(fe,Ie,T,S,D)});return L}unmarshalOutputData(fe){if(fe.complexData)switch("base64"===fe.complexData.encoding&&fe.complexData.content.map(en.exports?Ie=>Buffer.from(Ie,"base64").toString("ascii"):Ie=>atob(Ie)),fe.complexData.mimeType){case"application/vnd.geo+json":case"application/json":return fe.complexData.content.map(Ie=>JSON.parse(Ie));case"application/WMS":return fe.complexData.content;case"text/xml":case"application/xml":return _t.serializeToString(fe.complexData.content[0]);default:throw new Error(`Cannot unmarshal data of format ${fe.complexData.mimeType}`)}else if(fe.literalData)switch(fe.literalData.dataType){case"string":default:return fe.literalData.value}throw new Error(`Not yet implemented: ${fe}`)}unmarshalInputDescription(fe){var Ie,T,S,D;if(fe.boundingBoxData)return{id:fe.identifier.value,title:fe.title.value,reference:!1,type:"bbox",description:null===(Ie=fe._abstract)||void 0===Ie?void 0:Ie.value,format:"text/plain"};if(fe.complexData)return{id:fe.identifier.value,title:fe.title.value,reference:fe.storeSupported,type:"complex",description:null===(T=fe._abstract)||void 0===T?void 0:T.value,format:fe.complexData._default.format.mimeType};if(fe.literalData)return{id:fe.identifier.value,title:fe.title.value,reference:!1,type:"literal",description:null===(S=fe._abstract)||void 0===S?void 0:S.value,defaultValue:fe.literalData.defaultValue,options:null===(D=fe.literalData.allowedValues)||void 0===D?void 0:D.valueOrRange.map(L=>L.value),format:"text/plain"};throw new Error(`Cannot unmarshal the input-description for ${fe.identifier.value}`)}unmarshalOutputDescription(fe){if(fe.complexOutput)return{id:fe.identifier.value,title:fe.title.value,reference:!0,type:"complex",format:fe.complexOutput._default.format.mimeType};if(fe.boundingBoxOutput)return{id:fe.identifier.value,title:fe.title.value,reference:!1,type:"bbox"};if(fe.literalOutput)return{id:fe.identifier.value,title:fe.title.value,reference:!1,type:"literal"};throw new Error(`Cannot unmarshal the input-description for ${fe.identifier.value}`)}unmarshalAsyncExecuteResponse(fe,Ie,T,S,D){return this.unmarshalGetStateResponse(fe,Ie,T,S,D)}unmarshalGetStateResponse(fe,Ie,T,S,D){const L=fe.value,X={status:L.status.processSucceeded?"Succeeded":L.status.processAccepted?"Accepted":L.status.processStarted?"Running":"Failed",statusLocation:L.statusLocation};return L.processOutputs&&L.processOutputs.output&&(X.results=fe),X}marshalExecBody(fe,Ie,T,S){return{name:{key:"{http://www.opengis.net/wps/1.0.0}Execute",localPart:"Execute",namespaceURI:"http://www.opengis.net/wps/1.0.0",prefix:"wps",string:"{http://www.opengis.net/wps/1.0.0}wps:Execute"},value:{dataInputs:this.marshalInputs(Ie),identifier:fe,responseForm:this.marshalResponseForm(T,S),service:"WPS",version:"1.0.0"}}}marshalResponseForm(fe,Ie=!1){const T=[];for(const L of fe){let z;switch(L.type){case"literal":case"complex":z={identifier:{value:L.id},asReference:L.reference,mimeType:L.format};break;default:throw new Error(`This Wps-outputtype has not been implemented yet! ${L} `)}T.push(z)}return{responseDocument:{output:T,status:!!Ie,storeExecuteResponse:!!Ie}}}marshalInputs(fe){const Ie=[];for(const S of fe){if(null==S.value)throw new Error(`Value for input ${S.description.id} is not set`);const D=this.marshalInput(S);Ie.push(D)}return{input:Ie}}marshalInput(fe){const D={identifier:{value:fe.description.id},title:{value:fe.description.id},_abstract:{value:""}};return fe.description.reference?D.reference=this.marshalReferenceInput(fe):D.data=this.marshalDataInput(fe),D}marshalDataInput(fe){let Ie;switch(fe.description.type){case"literal":Ie={literalData:{value:String(fe.value)}};break;case"bbox":const T=fe.value;Ie={boundingBoxData:{lowerCorner:[T.lllat,T.lllon],upperCorner:[T.urlat,T.urlon]}};break;case"complex":switch(fe.description.format){case"text/xml":Ie={complexData:{content:[fe.value],mimeType:fe.description.format}};break;default:Ie={complexData:{content:[JSON.stringify(fe.value)],mimeType:fe.description.format}}}break;default:throw Error(`This input is of type ${fe.description.type}. We can only marshal input of type literal, bbox or complex.`)}return Ie}marshalReferenceInput(fe){return{href:fe.value,method:"GET",mimeType:fe.description.format}}marshallGetStatusBody(fe,Ie,T){return{}}marshallGetResultBody(fe,Ie,T){return{}}dismissUrl(fe,Ie,T){throw new Error("Wps 1.0 does not support Dismiss-operations.")}marshalDismissBody(fe){throw new Error("Wps 1.0 does not support Dismiss-operations.")}unmarshalDismissResponse(fe,Ie,T){throw new Error("Wps 1.0 does not support Dismiss-operations.")}}},71:(en,wt,Ve)=>{"use strict";Ve.d(wt,{Y:()=>fe});const _t=Ie=>Ie.hasOwnProperty("jobID")&&Ie.hasOwnProperty("status");var Me=Ve(402);en=Ve.hmd(en);class fe{constructor(){}getCapabilitiesUrl(T){return`${T}?service=WPS&request=GetCapabilities&version=2.0.0`}getDescribeProcessUrl(T,S){return`${T}?service=WPS&request=DescribeProcess&version=2.0.0&Identifier=${S}`}unmarshalProcessDescription(T){var S,D;const L=T.processOffering[0],z=[];for(const Y of L.process.input)z.push({description:this.unmarshalInputDescription(Y),value:null});const X=[];for(const Y of L.process.output)X.push({description:this.unmarshalOutputDescription(Y),value:null});return{id:L.process.identifier.value,processVersion:L.processVersion||"",description:null===(S=L.process._abstract)||void 0===S?void 0:S.value,title:(null===(D=L.process.title)||void 0===D?void 0:D.value)||"",inputs:z,outputs:X}}unmarshalInputDescription(T){var S,D,L,z,X,Y;if("BoundingBoxData"===T.dataDescription.name.localPart)return{id:T.identifier.value,title:T.title.value,reference:!1,type:"bbox",description:null===(S=T.abstract)||void 0===S?void 0:S.value};if("LiteralData"===T.dataDescription.name.localPart)return{id:T.identifier.value,title:T.title.value,reference:!1,type:"literal",defaultValue:null===(L=null===(D=T.dataDescription.value.literalDataDomain)||void 0===D?void 0:D.defaultValue)||void 0===L?void 0:L.value,options:null===(z=T.dataDescription.value.literalDataDomain)||void 0===z?void 0:z.allowedValues.valueOrRange.map(re=>re.value),description:null===(X=T.abstract)||void 0===X?void 0:X.value};if("ComplexData"===T.dataDescription.name.localPart)return{id:T.identifier.value,title:T.title.value,reference:!0,type:"complex",format:T.dataDescription.value.format[0].mimeType,description:null===(Y=T.abstract)||void 0===Y?void 0:Y.value};throw new Error(`Cannot unmarshal input-description ${T.identifier.value}`)}unmarshalOutputDescription(T){var S,D,L;if("BoundingBoxData"===T.dataDescription.name.localPart)return{id:T.identifier.value,title:T.title.value,reference:!1,type:"bbox",description:null===(S=T.abstract)||void 0===S?void 0:S.value};if("LiteralData"===T.dataDescription.name.localPart)return{id:T.identifier.value,title:T.title.value,reference:!1,type:"literal",description:null===(D=T.abstract)||void 0===D?void 0:D.value};if("ComplexData"===T.dataDescription.name.localPart)return{id:T.identifier.value,title:T.title.value,reference:!0,type:"complex",format:T.dataDescription.value.format[0].mimeType,description:null===(L=T.abstract)||void 0===L?void 0:L.value};throw new Error(`Cannot unmarshal input-description ${T.identifier.value}`)}executeUrl(T,S){return T}unmarshalCapabilities(T){const S=[];return T.contents.processSummary.forEach(D=>{S.push({id:D.identifier.value})}),S}unmarshalSyncExecuteResponse(T,S,D,L,z){const X=[];if(T.value.hasOwnProperty("output"))for(const Y of T.value.output){const re=z.find(Je=>Je.id===Y.id);if(!re)throw new Error(`Could not find an output-description for the parameter ${Y.id}.`);const J=re.reference,ie=re.type,Se=re.format;let je;if(Y.reference)je=Y.reference.href||null;else{if(!Y.data)throw new Error("Output has neither reference nor data field.");je=this.unmarshalOutputData(Y.data,re)}X.push({description:{id:Y.id,title:re.title,format:Se,reference:J,type:ie},value:je})}else _t(T.value)&&X.push({description:{id:D,title:"",reference:!0,type:"status"},value:{status:T.value.status,jobID:T.value.jobID,percentCompleted:T.value.percentCompleted}});return X}unmarshalOutputData(T,S){if("complex"===S.type)switch("base64"===T.encoding&&T.content.map(en.exports?D=>Buffer.from(D,"base64").toString("ascii"):D=>atob(D)),T.mimeType){case"application/vnd.geo+json":case"application/json":return T.content.map(D=>JSON.parse(D));case"application/WMS":return T.content;case"text/xml":case"application/xml":return Me.serializeToString(T.content[0]);default:throw new Error(`Cannot unmarshal complex data of format ${T.mimeType}`)}else if("literal"===S.type)return T.content;throw new Error(`Not yet implemented: ${T}`)}unmarshalAsyncExecuteResponse(T,S,D,L,z){return this.unmarshalGetStateResponse(T,S,D,L,z)}unmarshalGetStateResponse(T,S,D,L,z){if(_t(T.value))return{status:T.value.status,jobID:T.value.jobID,percentCompleted:T.value.percentCompleted};throw new Error(`Not a status-info: ${T}`)}marshalExecBody(T,S,D,L){return{name:{key:"{http://www.opengis.net/wps/2.0}Execute",localPart:"Execute",namespaceURI:"http://www.opengis.net/wps/2.0",prefix:"wps",string:"{http://www.opengis.net/wps/2.0}wps:Execute"},value:{TYPE_NAME:"WPS_2_0.ExecuteRequestType",service:"WPS",version:"2.0.0",identifier:{value:T},input:this.marshalInputs(S),output:this.marshalOutputs(D),mode:L?"async":"sync",response:"document"}}}marshalInputs(T){return T.map(S=>S.description.reference?{id:S.description.id,reference:{href:S.value,mimeType:S.description.format,schema:S.description.schema,encoding:S.description.encoding||"UTF-8"}}:{id:S.description.id,data:{content:this.marshalInput(S),mimeType:S.description.format}})}marshalInput(T){return"literal"===T.description.type?[T.value]:[JSON.stringify(T.value)]}marshalOutputs(T){return T.map(S=>({id:S.id,mimeType:S.format,transmission:S.reference?"reference":"value"}))}marshallGetStatusBody(T,S,D){return{name:{key:"{http://www.opengis.net/wps/2.0}GetStatus",localPart:"GetStatus",namespaceURI:"http://www.opengis.net/wps/2.0",prefix:"wps",string:"{http://www.opengis.net/wps/2.0}wps:GetStatus"},value:{jobID:D,service:"WPS",version:"2.0.0"}}}marshallGetResultBody(T,S,D){return{name:{key:"{http://www.opengis.net/wps/2.0}GetResult",localPart:"GetResult",namespaceURI:"http://www.opengis.net/wps/2.0",prefix:"wps",string:"{http://www.opengis.net/wps/2.0}wps:GetResult"},value:{service:"WPS",version:"2.0.0",jobID:D}}}dismissUrl(T,S,D){return T}marshalDismissBody(T){return{name:{key:"{http://www.opengis.net/wps/2.0}Dismiss",localPart:"Dismiss",namespaceURI:"http://www.opengis.net/wps/2.0",prefix:"wps",string:"{http://www.opengis.net/wps/2.0}wps:Dismiss"},value:{jobID:T,service:"WPS",version:"2.0.0"}}}unmarshalDismissResponse(T,S,D){return{status:T.value.status,jobID:T.value.jobID}}}},452:en=>{function wt(Ve){return Promise.resolve().then(()=>{var _t=new Error("Cannot find module '"+Ve+"'");throw _t.code="MODULE_NOT_FOUND",_t})}wt.keys=()=>[],wt.resolve=wt,wt.id=452,en.exports=wt}},en=>{en(en.s=251)}]);