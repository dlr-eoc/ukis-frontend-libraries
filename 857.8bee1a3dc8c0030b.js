(self.webpackChunkdemo_maps=self.webpackChunkdemo_maps||[]).push([[857],{351:(ce,gt)=>{gt.read=function(c,V,K,$,Z){var L,b,B=8*Z-$-1,F=(1<<B)-1,E=F>>1,p=-7,_=K?Z-1:0,h=K?-1:1,r=c[V+_];for(_+=h,L=r&(1<<-p)-1,r>>=-p,p+=B;p>0;L=256*L+c[V+_],_+=h,p-=8);for(b=L&(1<<-p)-1,L>>=-p,p+=$;p>0;b=256*b+c[V+_],_+=h,p-=8);if(0===L)L=1-E;else{if(L===F)return b?NaN:1/0*(r?-1:1);b+=Math.pow(2,$),L-=E}return(r?-1:1)*b*Math.pow(2,L-$)},gt.write=function(c,V,K,$,Z,L){var b,B,F,E=8*L-Z-1,p=(1<<E)-1,_=p>>1,h=23===Z?Math.pow(2,-24)-Math.pow(2,-77):0,r=$?0:L-1,u=$?1:-1,o=V<0||0===V&&1/V<0?1:0;for(V=Math.abs(V),isNaN(V)||V===1/0?(B=isNaN(V)?1:0,b=p):(b=Math.floor(Math.log(V)/Math.LN2),V*(F=Math.pow(2,-b))<1&&(b--,F*=2),(V+=b+_>=1?h/F:h*Math.pow(2,1-_))*F>=2&&(b++,F/=2),b+_>=p?(B=0,b=p):b+_>=1?(B=(V*F-1)*Math.pow(2,Z),b+=_):(B=V*Math.pow(2,_-1)*Math.pow(2,Z),b=0));Z>=8;c[K+r]=255&B,r+=u,B/=256,Z-=8);for(b=b<<Z|B,E+=Z;E>0;c[K+r]=255&b,r+=u,b/=256,E-=8);c[K+r-u]|=128*o}},1763:(ce,gt,c)=>{"use strict";ce.exports=K;var V=c(351);function K(T){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(T)?T:new Uint8Array(T||0),this.pos=0,this.type=0,this.length=this.buf.length}K.Varint=0,K.Fixed64=1,K.Bytes=2,K.Fixed32=5;var $=4294967296,Z=1/$,b=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function F(T){return T.type===K.Bytes?T.readVarint()+T.pos:T.pos+1}function r(T,O,R){var A=O<=16383?1:O<=2097151?2:O<=268435455?3:Math.floor(Math.log(O)/(7*Math.LN2));R.realloc(A);for(var M=R.pos-1;M>=T;M--)R.buf[M+A]=R.buf[M]}function u(T,O){for(var R=0;R<T.length;R++)O.writeVarint(T[R])}function o(T,O){for(var R=0;R<T.length;R++)O.writeSVarint(T[R])}function f(T,O){for(var R=0;R<T.length;R++)O.writeFloat(T[R])}function g(T,O){for(var R=0;R<T.length;R++)O.writeDouble(T[R])}function a(T,O){for(var R=0;R<T.length;R++)O.writeBoolean(T[R])}function C(T,O){for(var R=0;R<T.length;R++)O.writeFixed32(T[R])}function y(T,O){for(var R=0;R<T.length;R++)O.writeSFixed32(T[R])}function v(T,O){for(var R=0;R<T.length;R++)O.writeFixed64(T[R])}function U(T,O){for(var R=0;R<T.length;R++)O.writeSFixed64(T[R])}function w(T,O){return(T[O]|T[O+1]<<8|T[O+2]<<16)+16777216*T[O+3]}function z(T,O,R){T[R]=O,T[R+1]=O>>>8,T[R+2]=O>>>16,T[R+3]=O>>>24}function I(T,O){return(T[O]|T[O+1]<<8|T[O+2]<<16)+(T[O+3]<<24)}K.prototype={destroy:function(){this.buf=null},readFields:function(T,O,R){for(R=R||this.length;this.pos<R;){var A=this.readVarint(),M=A>>3,D=this.pos;this.type=7&A,T(M,O,this),this.pos===D&&this.skip(A)}return O},readMessage:function(T,O){return this.readFields(T,O,this.readVarint()+this.pos)},readFixed32:function(){var T=w(this.buf,this.pos);return this.pos+=4,T},readSFixed32:function(){var T=I(this.buf,this.pos);return this.pos+=4,T},readFixed64:function(){var T=w(this.buf,this.pos)+w(this.buf,this.pos+4)*$;return this.pos+=8,T},readSFixed64:function(){var T=w(this.buf,this.pos)+I(this.buf,this.pos+4)*$;return this.pos+=8,T},readFloat:function(){var T=V.read(this.buf,this.pos,!0,23,4);return this.pos+=4,T},readDouble:function(){var T=V.read(this.buf,this.pos,!0,52,8);return this.pos+=8,T},readVarint:function(T){var R,A,O=this.buf;return R=127&(A=O[this.pos++]),A<128||(R|=(127&(A=O[this.pos++]))<<7,A<128)||(R|=(127&(A=O[this.pos++]))<<14,A<128)||(R|=(127&(A=O[this.pos++]))<<21,A<128)?R:function B(T,O,R){var M,D,A=R.buf;if(M=(112&(D=A[R.pos++]))>>4,D<128||(M|=(127&(D=A[R.pos++]))<<3,D<128)||(M|=(127&(D=A[R.pos++]))<<10,D<128)||(M|=(127&(D=A[R.pos++]))<<17,D<128)||(M|=(127&(D=A[R.pos++]))<<24,D<128)||(M|=(1&(D=A[R.pos++]))<<31,D<128))return function E(T,O,R){return R?4294967296*O+(T>>>0):4294967296*(O>>>0)+(T>>>0)}(T,M,O);throw new Error("Expected varint not more than 10 bytes")}(R|=(15&(A=O[this.pos]))<<28,T,this)},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var T=this.readVarint();return T%2==1?(T+1)/-2:T/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var T=this.readVarint()+this.pos,O=this.pos;return this.pos=T,T-O>=12&&b?function j(T,O,R){return b.decode(T.subarray(O,R))}(this.buf,O,T):function P(T,O,R){for(var A="",M=O;M<R;){var lt,xt,At,D=T[M],H=null,it=D>239?4:D>223?3:D>191?2:1;if(M+it>R)break;1===it?D<128&&(H=D):2===it?128==(192&(lt=T[M+1]))&&(H=(31&D)<<6|63&lt)<=127&&(H=null):3===it?(xt=T[M+2],128==(192&(lt=T[M+1]))&&128==(192&xt)&&((H=(15&D)<<12|(63&lt)<<6|63&xt)<=2047||H>=55296&&H<=57343)&&(H=null)):4===it&&(xt=T[M+2],At=T[M+3],128==(192&(lt=T[M+1]))&&128==(192&xt)&&128==(192&At)&&((H=(15&D)<<18|(63&lt)<<12|(63&xt)<<6|63&At)<=65535||H>=1114112)&&(H=null)),null===H?(H=65533,it=1):H>65535&&(H-=65536,A+=String.fromCharCode(H>>>10&1023|55296),H=56320|1023&H),A+=String.fromCharCode(H),M+=it}return A}(this.buf,O,T)},readBytes:function(){var T=this.readVarint()+this.pos,O=this.buf.subarray(this.pos,T);return this.pos=T,O},readPackedVarint:function(T,O){if(this.type!==K.Bytes)return T.push(this.readVarint(O));var R=F(this);for(T=T||[];this.pos<R;)T.push(this.readVarint(O));return T},readPackedSVarint:function(T){if(this.type!==K.Bytes)return T.push(this.readSVarint());var O=F(this);for(T=T||[];this.pos<O;)T.push(this.readSVarint());return T},readPackedBoolean:function(T){if(this.type!==K.Bytes)return T.push(this.readBoolean());var O=F(this);for(T=T||[];this.pos<O;)T.push(this.readBoolean());return T},readPackedFloat:function(T){if(this.type!==K.Bytes)return T.push(this.readFloat());var O=F(this);for(T=T||[];this.pos<O;)T.push(this.readFloat());return T},readPackedDouble:function(T){if(this.type!==K.Bytes)return T.push(this.readDouble());var O=F(this);for(T=T||[];this.pos<O;)T.push(this.readDouble());return T},readPackedFixed32:function(T){if(this.type!==K.Bytes)return T.push(this.readFixed32());var O=F(this);for(T=T||[];this.pos<O;)T.push(this.readFixed32());return T},readPackedSFixed32:function(T){if(this.type!==K.Bytes)return T.push(this.readSFixed32());var O=F(this);for(T=T||[];this.pos<O;)T.push(this.readSFixed32());return T},readPackedFixed64:function(T){if(this.type!==K.Bytes)return T.push(this.readFixed64());var O=F(this);for(T=T||[];this.pos<O;)T.push(this.readFixed64());return T},readPackedSFixed64:function(T){if(this.type!==K.Bytes)return T.push(this.readSFixed64());var O=F(this);for(T=T||[];this.pos<O;)T.push(this.readSFixed64());return T},skip:function(T){var O=7&T;if(O===K.Varint)for(;this.buf[this.pos++]>127;);else if(O===K.Bytes)this.pos=this.readVarint()+this.pos;else if(O===K.Fixed32)this.pos+=4;else{if(O!==K.Fixed64)throw new Error("Unimplemented type: "+O);this.pos+=8}},writeTag:function(T,O){this.writeVarint(T<<3|O)},realloc:function(T){for(var O=this.length||16;O<this.pos+T;)O*=2;if(O!==this.length){var R=new Uint8Array(O);R.set(this.buf),this.buf=R,this.length=O}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(T){this.realloc(4),z(this.buf,T,this.pos),this.pos+=4},writeSFixed32:function(T){this.realloc(4),z(this.buf,T,this.pos),this.pos+=4},writeFixed64:function(T){this.realloc(8),z(this.buf,-1&T,this.pos),z(this.buf,Math.floor(T*Z),this.pos+4),this.pos+=8},writeSFixed64:function(T){this.realloc(8),z(this.buf,-1&T,this.pos),z(this.buf,Math.floor(T*Z),this.pos+4),this.pos+=8},writeVarint:function(T){(T=+T||0)>268435455||T<0?function p(T,O){var R,A;if(T>=0?(R=T%4294967296|0,A=T/4294967296|0):(A=~(-T/4294967296),4294967295^(R=~(-T%4294967296))?R=R+1|0:(R=0,A=A+1|0)),T>=0x10000000000000000||T<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");O.realloc(10),function _(T,O,R){R.buf[R.pos++]=127&T|128,T>>>=7,R.buf[R.pos++]=127&T|128,T>>>=7,R.buf[R.pos++]=127&T|128,T>>>=7,R.buf[R.pos++]=127&T|128,R.buf[R.pos]=127&(T>>>=7)}(R,0,O),function h(T,O){var R=(7&T)<<4;O.buf[O.pos++]|=R|((T>>>=3)?128:0),T&&(O.buf[O.pos++]=127&T|((T>>>=7)?128:0),T&&(O.buf[O.pos++]=127&T|((T>>>=7)?128:0),T&&(O.buf[O.pos++]=127&T|((T>>>=7)?128:0),T&&(O.buf[O.pos++]=127&T|((T>>>=7)?128:0),T&&(O.buf[O.pos++]=127&T)))))}(A,O)}(T,this):(this.realloc(4),this.buf[this.pos++]=127&T|(T>127?128:0),!(T<=127)&&(this.buf[this.pos++]=127&(T>>>=7)|(T>127?128:0),!(T<=127)&&(this.buf[this.pos++]=127&(T>>>=7)|(T>127?128:0),!(T<=127)&&(this.buf[this.pos++]=T>>>7&127))))},writeSVarint:function(T){this.writeVarint(T<0?2*-T-1:2*T)},writeBoolean:function(T){this.writeVarint(!!T)},writeString:function(T){T=String(T),this.realloc(4*T.length),this.pos++;var O=this.pos;this.pos=function Y(T,O,R){for(var M,D,A=0;A<O.length;A++){if((M=O.charCodeAt(A))>55295&&M<57344){if(!D){M>56319||A+1===O.length?(T[R++]=239,T[R++]=191,T[R++]=189):D=M;continue}if(M<56320){T[R++]=239,T[R++]=191,T[R++]=189,D=M;continue}M=D-55296<<10|M-56320|65536,D=null}else D&&(T[R++]=239,T[R++]=191,T[R++]=189,D=null);M<128?T[R++]=M:(M<2048?T[R++]=M>>6|192:(M<65536?T[R++]=M>>12|224:(T[R++]=M>>18|240,T[R++]=M>>12&63|128),T[R++]=M>>6&63|128),T[R++]=63&M|128)}return R}(this.buf,T,this.pos);var R=this.pos-O;R>=128&&r(O,R,this),this.pos=O-1,this.writeVarint(R),this.pos+=R},writeFloat:function(T){this.realloc(4),V.write(this.buf,T,this.pos,!0,23,4),this.pos+=4},writeDouble:function(T){this.realloc(8),V.write(this.buf,T,this.pos,!0,52,8),this.pos+=8},writeBytes:function(T){var O=T.length;this.writeVarint(O),this.realloc(O);for(var R=0;R<O;R++)this.buf[this.pos++]=T[R]},writeRawMessage:function(T,O){this.pos++;var R=this.pos;T(O,this);var A=this.pos-R;A>=128&&r(R,A,this),this.pos=R-1,this.writeVarint(A),this.pos+=A},writeMessage:function(T,O,R){this.writeTag(T,K.Bytes),this.writeRawMessage(O,R)},writePackedVarint:function(T,O){O.length&&this.writeMessage(T,u,O)},writePackedSVarint:function(T,O){O.length&&this.writeMessage(T,o,O)},writePackedBoolean:function(T,O){O.length&&this.writeMessage(T,a,O)},writePackedFloat:function(T,O){O.length&&this.writeMessage(T,f,O)},writePackedDouble:function(T,O){O.length&&this.writeMessage(T,g,O)},writePackedFixed32:function(T,O){O.length&&this.writeMessage(T,C,O)},writePackedSFixed32:function(T,O){O.length&&this.writeMessage(T,y,O)},writePackedFixed64:function(T,O){O.length&&this.writeMessage(T,v,O)},writePackedSFixed64:function(T,O){O.length&&this.writeMessage(T,U,O)},writeBytesField:function(T,O){this.writeTag(T,K.Bytes),this.writeBytes(O)},writeFixed32Field:function(T,O){this.writeTag(T,K.Fixed32),this.writeFixed32(O)},writeSFixed32Field:function(T,O){this.writeTag(T,K.Fixed32),this.writeSFixed32(O)},writeFixed64Field:function(T,O){this.writeTag(T,K.Fixed64),this.writeFixed64(O)},writeSFixed64Field:function(T,O){this.writeTag(T,K.Fixed64),this.writeSFixed64(O)},writeVarintField:function(T,O){this.writeTag(T,K.Varint),this.writeVarint(O)},writeSVarintField:function(T,O){this.writeTag(T,K.Varint),this.writeSVarint(O)},writeStringField:function(T,O){this.writeTag(T,K.Bytes),this.writeString(O)},writeFloatField:function(T,O){this.writeTag(T,K.Fixed32),this.writeFloat(O)},writeDoubleField:function(T,O){this.writeTag(T,K.Fixed64),this.writeDouble(O)},writeBooleanField:function(T,O){this.writeVarintField(T,!!O)}}},176:(ce,gt,c)=>{"use strict";c.d(gt,{A:()=>Va});var K=1,$=2,Z=3,b=5,B=6378137,F=6356752.314,E=.0066943799901413165,p=484813681109536e-20,_=Math.PI/2,o=1e-10,f=.017453292519943295,g=57.29577951308232,a=Math.PI/4,C=2*Math.PI,y=3.14159265359,v={greenwich:0,lisbon:-9.131906111111,paris:2.337229166667,bogota:-74.080916666667,madrid:-3.687938888889,rome:12.452333333333,bern:7.439583333333,jakarta:106.807719444444,ferro:-17.666666666667,brussels:4.367975,stockholm:18.058277777778,athens:23.7163375,oslo:10.722916666667};const U={ft:{to_meter:.3048},"us-ft":{to_meter:1200/3937}};var w=/[\s_\-\/\(\)]/g;function z(i,d){if(i[d])return i[d];for(var J,x=Object.keys(i),X=d.toLowerCase().replace(w,""),G=-1;++G<x.length;)if((J=x[G]).toLowerCase().replace(w,"")===X)return i[J]}function I(i){var X,G,J,d={},x=i.split("+").map(function(q){return q.trim()}).filter(function(q){return q}).reduce(function(q,mt){var Wt=mt.split("=");return Wt.push(!0),q[Wt[0].toLowerCase()]=Wt[1],q},{}),st={proj:"projName",datum:"datumCode",rf:function(q){d.rf=parseFloat(q)},lat_0:function(q){d.lat0=q*f},lat_1:function(q){d.lat1=q*f},lat_2:function(q){d.lat2=q*f},lat_ts:function(q){d.lat_ts=q*f},lon_0:function(q){d.long0=q*f},lon_1:function(q){d.long1=q*f},lon_2:function(q){d.long2=q*f},alpha:function(q){d.alpha=parseFloat(q)*f},gamma:function(q){d.rectified_grid_angle=parseFloat(q)},lonc:function(q){d.longc=q*f},x_0:function(q){d.x0=parseFloat(q)},y_0:function(q){d.y0=parseFloat(q)},k_0:function(q){d.k0=parseFloat(q)},k:function(q){d.k0=parseFloat(q)},a:function(q){d.a=parseFloat(q)},b:function(q){d.b=parseFloat(q)},r:function(q){d.a=d.b=parseFloat(q)},r_a:function(){d.R_A=!0},zone:function(q){d.zone=parseInt(q,10)},south:function(){d.utmSouth=!0},towgs84:function(q){d.datum_params=q.split(",").map(function(mt){return parseFloat(mt)})},to_meter:function(q){d.to_meter=parseFloat(q)},units:function(q){d.units=q;var mt=z(U,q);mt&&(d.to_meter=mt.to_meter)},from_greenwich:function(q){d.from_greenwich=q*f},pm:function(q){var mt=z(v,q);d.from_greenwich=(mt||parseFloat(q))*f},nadgrids:function(q){"@null"===q?d.datumCode="none":d.nadgrids=q},axis:function(q){var mt="ewnsud";3===q.length&&-1!==mt.indexOf(q.substr(0,1))&&-1!==mt.indexOf(q.substr(1,1))&&-1!==mt.indexOf(q.substr(2,1))&&(d.axis=q)},approx:function(){d.approx=!0}};for(X in x)G=x[X],X in st?"function"==typeof(J=st[X])?J(G):d[J]=G:d[X]=G;return"string"==typeof d.datumCode&&"WGS84"!==d.datumCode&&(d.datumCode=d.datumCode.toLowerCase()),d}const P=function At(i){return new xt(i).output()};var j=1,M=/\s/,D=/[A-Za-z]/,H=/[A-Za-z84_]/,it=/[,\]]/,lt=/[\d\.E\-\+]/;function xt(i){if("string"!=typeof i)throw new Error("not a string");this.text=i.trim(),this.level=0,this.place=0,this.root=null,this.stack=[],this.currentObject=null,this.state=j}function St(i,d,x){Array.isArray(d)&&(x.unshift(d),d=null);var G=x.reduce(function(J,st){return Ut(st,J),J},d?{}:i);d&&(i[d]=G)}function Ut(i,d){if(Array.isArray(i)){var x=i.shift();if("PARAMETER"===x&&(x=i.shift()),1===i.length)return Array.isArray(i[0])?(d[x]={},void Ut(i[0],d[x])):void(d[x]=i[0]);if(i.length)if("TOWGS84"!==x){if("AXIS"===x)return x in d||(d[x]=[]),void d[x].push(i);var X;switch(Array.isArray(x)||(d[x]={}),x){case"UNIT":case"PRIMEM":case"VERT_DATUM":return d[x]={name:i[0].toLowerCase(),convert:i[1]},void(3===i.length&&Ut(i[2],d[x]));case"SPHEROID":case"ELLIPSOID":return d[x]={name:i[0],a:i[1],rf:i[2]},void(4===i.length&&Ut(i[3],d[x]));case"PROJECTEDCRS":case"PROJCRS":case"GEOGCS":case"GEOCCS":case"PROJCS":case"LOCAL_CS":case"GEODCRS":case"GEODETICCRS":case"GEODETICDATUM":case"EDATUM":case"ENGINEERINGDATUM":case"VERT_CS":case"VERTCRS":case"VERTICALCRS":case"COMPD_CS":case"COMPOUNDCRS":case"ENGINEERINGCRS":case"ENGCRS":case"FITTED_CS":case"LOCAL_DATUM":case"DATUM":return i[0]=["name",i[0]],void St(d,x,i);default:for(X=-1;++X<i.length;)if(!Array.isArray(i[X]))return Ut(i,d[x]);return St(d,x,i)}}else d[x]=i;else d[x]=!0}else d[i]=!0}xt.prototype.readCharicter=function(){var i=this.text[this.place++];if(4!==this.state)for(;M.test(i);){if(this.place>=this.text.length)return;i=this.text[this.place++]}switch(this.state){case j:return this.neutral(i);case 2:return this.keyword(i);case 4:return this.quoted(i);case 5:return this.afterquote(i);case 3:return this.number(i);case-1:return}},xt.prototype.afterquote=function(i){if('"'===i)return this.word+='"',void(this.state=4);if(it.test(i))return this.word=this.word.trim(),void this.afterItem(i);throw new Error("havn't handled \""+i+'" in afterquote yet, index '+this.place)},xt.prototype.afterItem=function(i){return","===i?(null!==this.word&&this.currentObject.push(this.word),this.word=null,void(this.state=j)):"]"===i?(this.level--,null!==this.word&&(this.currentObject.push(this.word),this.word=null),this.state=j,this.currentObject=this.stack.pop(),void(this.currentObject||(this.state=-1))):void 0},xt.prototype.number=function(i){if(!lt.test(i)){if(it.test(i))return this.word=parseFloat(this.word),void this.afterItem(i);throw new Error("havn't handled \""+i+'" in number yet, index '+this.place)}this.word+=i},xt.prototype.quoted=function(i){'"'!==i?this.word+=i:this.state=5},xt.prototype.keyword=function(i){if(H.test(i))this.word+=i;else{if("["===i){var d=[];return d.push(this.word),this.level++,null===this.root?this.root=d:this.currentObject.push(d),this.stack.push(this.currentObject),this.currentObject=d,void(this.state=j)}if(!it.test(i))throw new Error("havn't handled \""+i+'" in keyword yet, index '+this.place);this.afterItem(i)}},xt.prototype.neutral=function(i){if(D.test(i))return this.word=i,void(this.state=2);if('"'===i)return this.word="",void(this.state=4);if(lt.test(i))return this.word=i,void(this.state=3);if(!it.test(i))throw new Error("havn't handled \""+i+'" in neutral yet, index '+this.place);this.afterItem(i)},xt.prototype.output=function(){for(;this.place<this.text.length;)this.readCharicter();if(-1===this.state)return this.root;throw new Error('unable to parse string "'+this.text+'". State is '+this.state)};var Kt=.017453292519943295;function Tt(i){return i*Kt}function ie(i){var d=P(i),x=d.shift(),X=d.shift();d.unshift(["name",X]),d.unshift(["type",x]);var G={};return Ut(d,G),function Ft(i){if("GEOGCS"===i.type?i.projName="longlat":"LOCAL_CS"===i.type?(i.projName="identity",i.local=!0):i.projName="object"==typeof i.PROJECTION?Object.keys(i.PROJECTION)[0]:i.PROJECTION,i.AXIS){for(var d="",x=0,X=i.AXIS.length;x<X;++x){var G=[i.AXIS[x][0].toLowerCase(),i.AXIS[x][1].toLowerCase()];-1!==G[0].indexOf("north")||("y"===G[0]||"lat"===G[0])&&"north"===G[1]?d+="n":-1!==G[0].indexOf("south")||("y"===G[0]||"lat"===G[0])&&"south"===G[1]?d+="s":-1!==G[0].indexOf("east")||("x"===G[0]||"lon"===G[0])&&"east"===G[1]?d+="e":(-1!==G[0].indexOf("west")||("x"===G[0]||"lon"===G[0])&&"west"===G[1])&&(d+="w")}2===d.length&&(d+="u"),3===d.length&&(i.axis=d)}i.UNIT&&(i.units=i.UNIT.name.toLowerCase(),"metre"===i.units&&(i.units="meter"),i.UNIT.convert&&("GEOGCS"===i.type?i.DATUM&&i.DATUM.SPHEROID&&(i.to_meter=i.UNIT.convert*i.DATUM.SPHEROID.a):i.to_meter=i.UNIT.convert));var J=i.GEOGCS;function st(Wt){return Wt*(i.to_meter||1)}"GEOGCS"===i.type&&(J=i),J&&(i.datumCode=J.DATUM?J.DATUM.name.toLowerCase():J.name.toLowerCase(),"d_"===i.datumCode.slice(0,2)&&(i.datumCode=i.datumCode.slice(2)),("new_zealand_geodetic_datum_1949"===i.datumCode||"new_zealand_1949"===i.datumCode)&&(i.datumCode="nzgd49"),("wgs_1984"===i.datumCode||"world_geodetic_system_1984"===i.datumCode)&&("Mercator_Auxiliary_Sphere"===i.PROJECTION&&(i.sphere=!0),i.datumCode="wgs84"),"_ferro"===i.datumCode.slice(-6)&&(i.datumCode=i.datumCode.slice(0,-6)),"_jakarta"===i.datumCode.slice(-8)&&(i.datumCode=i.datumCode.slice(0,-8)),~i.datumCode.indexOf("belge")&&(i.datumCode="rnb72"),J.DATUM&&J.DATUM.SPHEROID&&(i.ellps=J.DATUM.SPHEROID.name.replace("_19","").replace(/[Cc]larke\_18/,"clrk"),"international"===i.ellps.toLowerCase().slice(0,13)&&(i.ellps="intl"),i.a=J.DATUM.SPHEROID.a,i.rf=parseFloat(J.DATUM.SPHEROID.rf,10)),J.DATUM&&J.DATUM.TOWGS84&&(i.datum_params=J.DATUM.TOWGS84),~i.datumCode.indexOf("osgb_1936")&&(i.datumCode="osgb36"),~i.datumCode.indexOf("osni_1952")&&(i.datumCode="osni52"),(~i.datumCode.indexOf("tm65")||~i.datumCode.indexOf("geodetic_datum_of_1965"))&&(i.datumCode="ire65"),"ch1903+"===i.datumCode&&(i.datumCode="ch1903"),~i.datumCode.indexOf("israel")&&(i.datumCode="isr93")),i.b&&!isFinite(i.b)&&(i.b=i.a),[["standard_parallel_1","Standard_Parallel_1"],["standard_parallel_1","Latitude of 1st standard parallel"],["standard_parallel_2","Standard_Parallel_2"],["standard_parallel_2","Latitude of 2nd standard parallel"],["false_easting","False_Easting"],["false_easting","False easting"],["false-easting","Easting at false origin"],["false_northing","False_Northing"],["false_northing","False northing"],["false_northing","Northing at false origin"],["central_meridian","Central_Meridian"],["central_meridian","Longitude of natural origin"],["central_meridian","Longitude of false origin"],["latitude_of_origin","Latitude_Of_Origin"],["latitude_of_origin","Central_Parallel"],["latitude_of_origin","Latitude of natural origin"],["latitude_of_origin","Latitude of false origin"],["scale_factor","Scale_Factor"],["k0","scale_factor"],["latitude_of_center","Latitude_Of_Center"],["latitude_of_center","Latitude_of_center"],["lat0","latitude_of_center",Tt],["longitude_of_center","Longitude_Of_Center"],["longitude_of_center","Longitude_of_center"],["longc","longitude_of_center",Tt],["x0","false_easting",st],["y0","false_northing",st],["long0","central_meridian",Tt],["lat0","latitude_of_origin",Tt],["lat0","standard_parallel_1",Tt],["lat1","standard_parallel_1",Tt],["lat2","standard_parallel_2",Tt],["azimuth","Azimuth"],["alpha","azimuth",Tt],["srsCode","name"]].forEach(function(Wt){return function ut(i,d){var x=d[0],X=d[1];!(x in i)&&X in i&&(i[x]=i[X],3===d.length&&(i[x]=d[2](i[x])))}(i,Wt)}),!i.long0&&i.longc&&("Albers_Conic_Equal_Area"===i.projName||"Lambert_Azimuthal_Equal_Area"===i.projName)&&(i.long0=i.longc),i.lat_ts||!i.lat1||"Stereographic_South_Pole"!==i.projName&&"Polar Stereographic (variant B)"!==i.projName?!i.lat_ts&&i.lat0&&"Polar_Stereographic"===i.projName&&(i.lat_ts=i.lat0,i.lat0=Tt(i.lat0>0?90:-90)):(i.lat0=Tt(i.lat1>0?90:-90),i.lat_ts=i.lat1)}(G),G}function Zt(i){var d=this;if(2===arguments.length){var x=arguments[1];Zt[i]="string"==typeof x?"+"===x.charAt(0)?I(arguments[1]):ie(arguments[1]):x}else if(1===arguments.length){if(Array.isArray(i))return i.map(function(X){Array.isArray(X)?Zt.apply(d,X):Zt(X)});if("string"==typeof i){if(i in Zt)return Zt[i]}else"EPSG"in i?Zt["EPSG:"+i.EPSG]=i:"ESRI"in i?Zt["ESRI:"+i.ESRI]=i:"IAU2000"in i?Zt["IAU2000:"+i.IAU2000]=i:console.log(i);return}}!function V(i){i("EPSG:4326","+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees"),i("EPSG:4269","+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees"),i("EPSG:3857","+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs"),i.WGS84=i["EPSG:4326"],i["EPSG:3785"]=i["EPSG:3857"],i.GOOGLE=i["EPSG:3857"],i["EPSG:900913"]=i["EPSG:3857"],i["EPSG:102113"]=i["EPSG:3857"]}(Zt);const ge=Zt;var rt=["PROJECTEDCRS","PROJCRS","GEOGCS","GEOCCS","PROJCS","LOCAL_CS","GEODCRS","GEODETICCRS","GEODETICDATUM","ENGCRS","ENGINEERINGCRS"],Yt=["3857","900913","3785","102113"];function ei(i,d){var x,X;if(i=i||{},!d)return i;for(X in d)void 0!==(x=d[X])&&(i[X]=x);return i}function ai(i,d,x){var X=i*d;return x/Math.sqrt(1-X*X)}function Ui(i){return i<0?-1:1}function Ue(i){return Math.abs(i)<=y?i:i-Ui(i)*C}function Oi(i,d,x){var X=i*x;return X=Math.pow((1-X)/(1+X),.5*i),Math.tan(.5*(_-d))/X}function Ai(i,d){for(var X,G,x=.5*i,J=_-2*Math.atan(d),st=0;st<=15;st++)if(X=i*Math.sin(J),J+=G=_-2*Math.atan(d*Math.pow((1-X)/(1+X),x))-J,Math.abs(G)<=1e-10)return J;return-9999}function Pt(i){return i}var Ce=[{init:function an(){var i=this.b/this.a;this.es=1-i*i,"x0"in this||(this.x0=0),"y0"in this||(this.y0=0),this.e=Math.sqrt(this.es),this.lat_ts?this.k0=this.sphere?Math.cos(this.lat_ts):ai(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)):this.k0||(this.k0=this.k?this.k:1)},forward:function Yi(i){var X,G,d=i.x,x=i.y;if(x*g>90&&x*g<-90&&d*g>180&&d*g<-180)return null;if(Math.abs(Math.abs(x)-_)<=o)return null;if(this.sphere)X=this.x0+this.a*this.k0*Ue(d-this.long0),G=this.y0+this.a*this.k0*Math.log(Math.tan(a+.5*x));else{var J=Math.sin(x),st=Oi(this.e,x,J);X=this.x0+this.a*this.k0*Ue(d-this.long0),G=this.y0-this.a*this.k0*Math.log(st)}return i.x=X,i.y=G,i},inverse:function Ct(i){var X,G,d=i.x-this.x0,x=i.y-this.y0;if(this.sphere)G=_-2*Math.atan(Math.exp(-x/(this.a*this.k0)));else{var J=Math.exp(-x/(this.a*this.k0));if(-9999===(G=Ai(this.e,J)))return null}return X=Ue(this.long0+d/(this.a*this.k0)),i.x=X,i.y=G,i},names:["Mercator","Popular Visualisation Pseudo Mercator","Mercator_1SP","Mercator_Auxiliary_Sphere","merc"]},{init:function It(){},forward:Pt,inverse:Pt,names:["longlat","identity"]}],He={},ke=[];function qe(i,d){var x=ke.length;return i.names?(ke[x]=i,i.names.forEach(function(X){He[X.toLowerCase()]=x}),this):(console.log(d),!0)}const Zn={start:function yi(){Ce.forEach(qe)},add:qe,get:function Di(i){if(!i)return!1;var d=i.toLowerCase();return typeof He[d]<"u"&&ke[He[d]]?ke[He[d]]:void 0}};var Ti={MERIT:{a:6378137,rf:298.257,ellipseName:"MERIT 1983"},SGS85:{a:6378136,rf:298.257,ellipseName:"Soviet Geodetic System 85"},GRS80:{a:6378137,rf:298.257222101,ellipseName:"GRS 1980(IUGG, 1980)"},IAU76:{a:6378140,rf:298.257,ellipseName:"IAU 1976"},airy:{a:6377563.396,b:6356256.91,ellipseName:"Airy 1830"},APL4:{a:6378137,rf:298.25,ellipseName:"Appl. Physics. 1965"},NWL9D:{a:6378145,rf:298.25,ellipseName:"Naval Weapons Lab., 1965"},mod_airy:{a:6377340.189,b:6356034.446,ellipseName:"Modified Airy"},andrae:{a:6377104.43,rf:300,ellipseName:"Andrae 1876 (Den., Iclnd.)"},aust_SA:{a:6378160,rf:298.25,ellipseName:"Australian Natl & S. Amer. 1969"},GRS67:{a:6378160,rf:298.247167427,ellipseName:"GRS 67(IUGG 1967)"},bessel:{a:6377397.155,rf:299.1528128,ellipseName:"Bessel 1841"},bess_nam:{a:6377483.865,rf:299.1528128,ellipseName:"Bessel 1841 (Namibia)"},clrk66:{a:6378206.4,b:6356583.8,ellipseName:"Clarke 1866"},clrk80:{a:6378249.145,rf:293.4663,ellipseName:"Clarke 1880 mod."},clrk80ign:{a:6378249.2,b:6356515,rf:293.4660213,ellipseName:"Clarke 1880 (IGN)"},clrk58:{a:6378293.645208759,rf:294.2606763692654,ellipseName:"Clarke 1858"},CPM:{a:6375738.7,rf:334.29,ellipseName:"Comm. des Poids et Mesures 1799"},delmbr:{a:6376428,rf:311.5,ellipseName:"Delambre 1810 (Belgium)"},engelis:{a:6378136.05,rf:298.2566,ellipseName:"Engelis 1985"},evrst30:{a:6377276.345,rf:300.8017,ellipseName:"Everest 1830"},evrst48:{a:6377304.063,rf:300.8017,ellipseName:"Everest 1948"},evrst56:{a:6377301.243,rf:300.8017,ellipseName:"Everest 1956"},evrst69:{a:6377295.664,rf:300.8017,ellipseName:"Everest 1969"},evrstSS:{a:6377298.556,rf:300.8017,ellipseName:"Everest (Sabah & Sarawak)"},fschr60:{a:6378166,rf:298.3,ellipseName:"Fischer (Mercury Datum) 1960"},fschr60m:{a:6378155,rf:298.3,ellipseName:"Fischer 1960"},fschr68:{a:6378150,rf:298.3,ellipseName:"Fischer 1968"},helmert:{a:6378200,rf:298.3,ellipseName:"Helmert 1906"},hough:{a:6378270,rf:297,ellipseName:"Hough"},intl:{a:6378388,rf:297,ellipseName:"International 1909 (Hayford)"},kaula:{a:6378163,rf:298.24,ellipseName:"Kaula 1961"},lerch:{a:6378139,rf:298.257,ellipseName:"Lerch 1979"},mprts:{a:6397300,rf:191,ellipseName:"Maupertius 1738"},new_intl:{a:6378157.5,b:6356772.2,ellipseName:"New International 1967"},plessis:{a:6376523,rf:6355863,ellipseName:"Plessis 1817 (France)"},krass:{a:6378245,rf:298.3,ellipseName:"Krassovsky, 1942"},SEasia:{a:6378155,b:6356773.3205,ellipseName:"Southeast Asia"},walbeck:{a:6376896,b:6355834.8467,ellipseName:"Walbeck"},WGS60:{a:6378165,rf:298.3,ellipseName:"WGS 60"},WGS66:{a:6378145,rf:298.25,ellipseName:"WGS 66"},WGS7:{a:6378135,rf:298.26,ellipseName:"WGS 72"}},Ps=Ti.WGS84={a:6378137,rf:298.257223563,ellipseName:"WGS 84"};Ti.sphere={a:6370997,b:6370997,ellipseName:"Normal Sphere (r=6370997)"};var dn={wgs84:{towgs84:"0,0,0",ellipse:"WGS84",datumName:"WGS84"},ch1903:{towgs84:"674.374,15.056,405.346",ellipse:"bessel",datumName:"swiss"},ggrs87:{towgs84:"-199.87,74.79,246.62",ellipse:"GRS80",datumName:"Greek_Geodetic_Reference_System_1987"},nad83:{towgs84:"0,0,0",ellipse:"GRS80",datumName:"North_American_Datum_1983"},nad27:{nadgrids:"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat",ellipse:"clrk66",datumName:"North_American_Datum_1927"},potsdam:{towgs84:"598.1,73.7,418.2,0.202,0.045,-2.455,6.7",ellipse:"bessel",datumName:"Potsdam Rauenberg 1950 DHDN"},carthage:{towgs84:"-263.0,6.0,431.0",ellipse:"clark80",datumName:"Carthage 1934 Tunisia"},hermannskogel:{towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Hermannskogel"},militargeographische_institut:{towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Militar-Geographische Institut"},osni52:{towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"airy",datumName:"Irish National"},ire65:{towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"mod_airy",datumName:"Ireland 1965"},rassadiran:{towgs84:"-133.63,-157.5,-158.62",ellipse:"intl",datumName:"Rassadiran"},nzgd49:{towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993",ellipse:"intl",datumName:"New Zealand Geodetic Datum 1949"},osgb36:{towgs84:"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894",ellipse:"airy",datumName:"Airy 1830"},s_jtsk:{towgs84:"589,76,480",ellipse:"bessel",datumName:"S-JTSK (Ferro)"},beduaram:{towgs84:"-106,-87,188",ellipse:"clrk80",datumName:"Beduaram"},gunung_segara:{towgs84:"-403,684,41",ellipse:"bessel",datumName:"Gunung Segara Jakarta"},rnb72:{towgs84:"106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1",ellipse:"intl",datumName:"Reseau National Belge 1972"}};var Os={};function Ci(i){if(0===i.length)return null;var d="@"===i[0];return d&&(i=i.slice(1)),"null"===i?{name:"null",mandatory:!d,grid:null,isNull:!0}:{name:i,mandatory:!d,grid:Os[i]||null,isNull:!1}}function Ii(i){return i/3600*Math.PI/180}function dr(i,d,x){return String.fromCharCode.apply(null,new Uint8Array(i.buffer.slice(d,x)))}function tr(i){return i.map(function(d){return[Ii(d.longitudeShift),Ii(d.latitudeShift)]})}function $r(i,d,x){return{name:dr(i,d+8,d+16).trim(),parent:dr(i,d+24,d+24+8).trim(),lowerLatitude:i.getFloat64(d+72,x),upperLatitude:i.getFloat64(d+88,x),lowerLongitude:i.getFloat64(d+104,x),upperLongitude:i.getFloat64(d+120,x),latitudeInterval:i.getFloat64(d+136,x),longitudeInterval:i.getFloat64(d+152,x),gridNodeCount:i.getInt32(d+168,x)}}function Fe(i,d,x,X){for(var G=d+176,st=[],q=0;q<x.gridNodeCount;q++){var mt={latitudeShift:i.getFloat32(G+16*q,X),longitudeShift:i.getFloat32(G+16*q+4,X),latitudeAccuracy:i.getFloat32(G+16*q+8,X),longitudeAccuracy:i.getFloat32(G+16*q+12,X)};st.push(mt)}return st}function xs(i,d){if(!(this instanceof xs))return new xs(i);d=d||function(Wt){if(Wt)throw Wt};var x=function Ze(i){if(!function ne(i){return"string"==typeof i}(i))return i;if(function fe(i){return i in ge}(i))return ge[i];if(function jt(i){return rt.some(function(d){return i.indexOf(d)>-1})}(i)){var d=ie(i);if(function ve(i){var d=z(i,"authority");if(d){var x=z(d,"epsg");return x&&Yt.indexOf(x)>-1}}(d))return ge["EPSG:3857"];var x=function Me(i){var d=z(i,"extension");if(d)return z(d,"proj4")}(d);return x?I(x):d}return function Ye(i){return"+"===i[0]}(i)?I(i):void 0}(i);if("object"==typeof x){var X=xs.projections.get(x.projName);if(X){if(x.datumCode&&"none"!==x.datumCode){var G=z(dn,x.datumCode);G&&(x.datum_params=x.datum_params||(G.towgs84?G.towgs84.split(","):null),x.ellps=G.ellipse,x.datumName=G.datumName?G.datumName:x.datumCode)}x.k0=x.k0||1,x.axis=x.axis||"enu",x.ellps=x.ellps||"wgs84",x.lat1=x.lat1||x.lat0;var J=function Mn(i,d,x,X,G){if(!i){var J=z(Ti,X);J||(J=Ps),i=J.a,d=J.b,x=J.rf}return x&&!d&&(d=(1-1/x)*i),(0===x||Math.abs(i-d)<o)&&(G=!0,d=i),{a:i,b:d,rf:x,sphere:G}}(x.a,x.b,x.rf,x.ellps,x.sphere),st=function Nn(i,d,x,X){var G=i*i,J=d*d,st=(G-J)/G,q=0;return X?(G=(i*=1-st*(.16666666666666666+st*(.04722222222222222+.022156084656084655*st)))*i,st=0):q=Math.sqrt(st),{es:st,e:q,ep2:(G-J)/J}}(J.a,J.b,0,x.R_A),q=function Vi(i){return void 0===i?null:i.split(",").map(Ci)}(x.nadgrids),mt=x.datum||function ur(i,d,x,X,G,J,st){var q={};return q.datum_type=void 0===i||"none"===i?b:4,d&&(q.datum_params=d.map(parseFloat),(0!==q.datum_params[0]||0!==q.datum_params[1]||0!==q.datum_params[2])&&(q.datum_type=K),q.datum_params.length>3&&(0!==q.datum_params[3]||0!==q.datum_params[4]||0!==q.datum_params[5]||0!==q.datum_params[6])&&(q.datum_type=$,q.datum_params[3]*=p,q.datum_params[4]*=p,q.datum_params[5]*=p,q.datum_params[6]=q.datum_params[6]/1e6+1)),st&&(q.datum_type=Z,q.grids=st),q.a=x,q.b=X,q.es=G,q.ep2=J,q}(x.datumCode,x.datum_params,J.a,J.b,st.es,st.ep2,q);ei(this,x),ei(this,X),this.a=J.a,this.b=J.b,this.rf=J.rf,this.sphere=J.sphere,this.es=st.es,this.e=st.e,this.ep2=st.ep2,this.datum=mt,this.init(),d(null,this)}else d("Could not get projection name from: "+i)}else d("Could not parse to valid json: "+i)}(xs.projections=Zn).start();const Ms=xs;function Ns(i,d,x){var st,q,Wt,X=i.x,G=i.y,J=i.z?i.z:0;if(G<-_&&G>-1.001*_)G=-_;else if(G>_&&G<1.001*_)G=_;else{if(G<-_)return{x:-1/0,y:-1/0,z:i.z};if(G>_)return{x:1/0,y:1/0,z:i.z}}return X>Math.PI&&(X-=2*Math.PI),q=Math.sin(G),Wt=Math.cos(G),{x:((st=x/Math.sqrt(1-d*(q*q)))+J)*Wt*Math.cos(X),y:(st+J)*Wt*Math.sin(X),z:(st*(1-d)+J)*q}}function Pr(i,d,x,X){var q,mt,Wt,de,ee,be,je,Ne,Ve,$e,bi,Gi,ji,Kn,lr,hn=i.x,Qi=i.y,on=i.z?i.z:0;if(q=Math.sqrt(hn*hn+Qi*Qi),mt=Math.sqrt(hn*hn+Qi*Qi+on*on),q/x<1e-12){if(Kn=0,mt/x<1e-12)return lr=-X,{x:i.x,y:i.y,z:i.z}}else Kn=Math.atan2(Qi,hn);Wt=on/mt,Ne=(de=q/mt)*(1-d)*(ee=1/Math.sqrt(1-d*(2-d)*de*de)),Ve=Wt*ee,ji=0;do{ji++,be=d*(je=x/Math.sqrt(1-d*Ve*Ve))/(je+(lr=q*Ne+on*Ve-je*(1-d*Ve*Ve))),Gi=(bi=Wt*(ee=1/Math.sqrt(1-be*(2-be)*de*de)))*Ne-($e=de*(1-be)*ee)*Ve,Ne=$e,Ve=bi}while(Gi*Gi>1e-24&&ji<30);return{x:Kn,y:Math.atan(bi/Math.abs($e)),z:lr}}function An(i){return i===K||i===$}function As(i,d,x){if(null===i.grids||0===i.grids.length)return console.log("Grid shift grids not found"),-1;var X={x:-x.x,y:x.y},G={x:Number.NaN,y:Number.NaN},st=[];t:for(var q=0;q<i.grids.length;q++){var mt=i.grids[q];if(st.push(mt.name),mt.isNull){G=X;break}if(null!==mt.grid)for(var Wt=mt.grid.subgrids,de=0,ee=Wt.length;de<ee;de++){var be=Wt[de],je=(Math.abs(be.del[1])+Math.abs(be.del[0]))/1e4;if(!(be.ll[1]-je>X.y||be.ll[0]-je>X.x||be.ll[1]+(be.lim[1]-1)*be.del[1]+je<X.y||be.ll[0]+(be.lim[0]-1)*be.del[0]+je<X.x||(G=br(X,d,be),isNaN(G.x))))break t}else if(mt.mandatory)return console.log("Unable to find mandatory grid '"+mt.name+"'"),-1}return isNaN(G.x)?(console.log("Failed to find a grid shift table for location '"+-X.x*g+" "+X.y*g+" tried: '"+st+"'"),-1):(x.x=-G.x,x.y=G.y,0)}function br(i,d,x){var X={x:Number.NaN,y:Number.NaN};if(isNaN(i.x))return X;var G={x:i.x,y:i.y};G.x-=x.ll[0],G.y-=x.ll[1],G.x=Ue(G.x-Math.PI)+Math.PI;var J=er(G,x);if(d){if(isNaN(J.x))return X;J.x=G.x-J.x,J.y=G.y-J.y;var mt,Wt,st=9;do{if(Wt=er(J,x),isNaN(Wt.x)){console.log("Inverse grid shift iteration failed, presumably at grid edge.  Using first approximation.");break}J.x+=(mt={x:G.x-(Wt.x+J.x),y:G.y-(Wt.y+J.y)}).x,J.y+=mt.y}while(st--&&Math.abs(mt.x)>1e-12&&Math.abs(mt.y)>1e-12);if(st<0)return console.log("Inverse grid shift iterator failed to converge."),X;X.x=Ue(J.x+x.ll[0]),X.y=J.y+x.ll[1]}else isNaN(J.x)||(X.x=i.x+J.x,X.y=i.y+J.y);return X}function er(i,d){var st,x={x:i.x/d.del[0],y:i.y/d.del[1]},X_x=Math.floor(x.x),X_y=Math.floor(x.y),G_x=x.x-1*X_x,G_y=x.y-1*X_y,J={x:Number.NaN,y:Number.NaN};if(X_x<0||X_x>=d.lim[0]||X_y<0||X_y>=d.lim[1])return J;var q_x=d.cvs[st=X_y*d.lim[0]+X_x][0],q_y=d.cvs[st][1];st++;var mt_x=d.cvs[st][0],mt_y=d.cvs[st][1],Wt_x=d.cvs[st+=d.lim[0]][0],Wt_y=d.cvs[st][1];st--;var de_y=d.cvs[st][1],ee=G_x*G_y,be=G_x*(1-G_y),je=(1-G_x)*(1-G_y),Ne=(1-G_x)*G_y;return J.x=je*q_x+be*mt_x+Ne*d.cvs[st][0]+ee*Wt_x,J.y=je*q_y+be*mt_y+Ne*de_y+ee*Wt_y,J}function Wr(i,d,x){var st,q,mt,X=x.x,G=x.y,J=x.z||0,Wt={};for(mt=0;mt<3;mt++)if(!d||2!==mt||void 0!==x.z)switch(0===mt?(st=X,q=-1!=="ew".indexOf(i.axis[mt])?"x":"y"):1===mt?(st=G,q=-1!=="ns".indexOf(i.axis[mt])?"y":"x"):(st=J,q="z"),i.axis[mt]){case"e":case"n":Wt[q]=st;break;case"w":case"s":Wt[q]=-st;break;case"u":void 0!==x[q]&&(Wt.z=st);break;case"d":void 0!==x[q]&&(Wt.z=-st);break;default:return null}return Wt}function kr(i){var d={x:i[0],y:i[1]};return i.length>2&&(d.z=i[2]),i.length>3&&(d.m=i[3]),d}function es(i){if("function"==typeof Number.isFinite){if(Number.isFinite(i))return;throw new TypeError("coordinates must be finite numbers")}if("number"!=typeof i||i!=i||!isFinite(i))throw new TypeError("coordinates must be finite numbers")}function Ei(i,d,x,X){var G,J=void 0!==(x=Array.isArray(x)?kr(x):{x:x.x,y:x.y,z:x.z,m:x.m}).z;if(function bn(i){es(i.x),es(i.y)}(x),i.datum&&d.datum&&function Pn(i,d){return(i.datum.datum_type===K||i.datum.datum_type===$||i.datum.datum_type===Z)&&"WGS84"!==d.datumCode||(d.datum.datum_type===K||d.datum.datum_type===$||d.datum.datum_type===Z)&&"WGS84"!==i.datumCode}(i,d)&&(x=Ei(i,G=new Ms("WGS84"),x,X),i=G),X&&"enu"!==i.axis&&(x=Wr(i,!1,x)),"longlat"===i.projName)x={x:x.x*f,y:x.y*f,z:x.z||0};else if(i.to_meter&&(x={x:x.x*i.to_meter,y:x.y*i.to_meter,z:x.z||0}),!(x=i.inverse(x)))return;if(i.from_greenwich&&(x.x+=i.from_greenwich),x=function Br(i,d,x){if(function Fs(i,d){return!(i.datum_type!==d.datum_type||i.a!==d.a||Math.abs(i.es-d.es)>5e-11)&&(i.datum_type===K?i.datum_params[0]===d.datum_params[0]&&i.datum_params[1]===d.datum_params[1]&&i.datum_params[2]===d.datum_params[2]:i.datum_type!==$||i.datum_params[0]===d.datum_params[0]&&i.datum_params[1]===d.datum_params[1]&&i.datum_params[2]===d.datum_params[2]&&i.datum_params[3]===d.datum_params[3]&&i.datum_params[4]===d.datum_params[4]&&i.datum_params[5]===d.datum_params[5]&&i.datum_params[6]===d.datum_params[6])}(i,d)||i.datum_type===b||d.datum_type===b)return x;var X=i.a,G=i.es;if(i.datum_type===Z){if(0!==As(i,!1,x))return;X=B,G=E}var st=d.a,q=d.b,mt=d.es;return d.datum_type===Z&&(st=B,q=F,mt=E),G!==mt||X!==st||An(i.datum_type)||An(d.datum_type)?(x=Ns(x,G,X),An(i.datum_type)&&(x=function Rr(i,d,x){if(d===K)return{x:i.x+x[0],y:i.y+x[1],z:i.z+x[2]};if(d===$){var st=x[3],q=x[4],mt=x[5],Wt=x[6];return{x:Wt*(i.x-mt*i.y+q*i.z)+x[0],y:Wt*(mt*i.x+i.y-st*i.z)+x[1],z:Wt*(-q*i.x+st*i.y+i.z)+x[2]}}}(x,i.datum_type,i.datum_params)),An(d.datum_type)&&(x=function fr(i,d,x){if(d===K)return{x:i.x-x[0],y:i.y-x[1],z:i.z-x[2]};if(d===$){var st=x[3],q=x[4],mt=x[5],Wt=x[6],de=(i.x-x[0])/Wt,ee=(i.y-x[1])/Wt,be=(i.z-x[2])/Wt;return{x:de+mt*ee-q*be,y:-mt*de+ee+st*be,z:q*de-st*ee+be}}}(x,d.datum_type,d.datum_params)),x=Pr(x,mt,st,q),d.datum_type!==Z||0===As(d,!0,x)?x:void 0):x}(i.datum,d.datum,x))return d.from_greenwich&&(x={x:x.x-d.from_greenwich,y:x.y,z:x.z||0}),"longlat"===d.projName?x={x:x.x*g,y:x.y*g,z:x.z||0}:(x=d.forward(x),d.to_meter&&(x={x:x.x/d.to_meter,y:x.y/d.to_meter,z:x.z||0})),X&&"enu"!==d.axis?Wr(d,!0,x):(x&&!J&&delete x.z,x)}var Wn=Ms("WGS84");function cs(i,d,x,X){var G,J,st;return Array.isArray(x)?(G=Ei(i,d,x,X)||{x:NaN,y:NaN},x.length>2?typeof i.name<"u"&&"geocent"===i.name||typeof d.name<"u"&&"geocent"===d.name?"number"==typeof G.z?[G.x,G.y,G.z].concat(x.slice(3)):[G.x,G.y,x[2]].concat(x.slice(3)):[G.x,G.y].concat(x.slice(2)):[G.x,G.y]):(J=Ei(i,d,x,X),2===(st=Object.keys(x)).length||st.forEach(function(q){if(typeof i.name<"u"&&"geocent"===i.name||typeof d.name<"u"&&"geocent"===d.name){if("x"===q||"y"===q||"z"===q)return}else if("x"===q||"y"===q)return;J[q]=x[q]}),J)}function us(i){return i instanceof Ms?i:i.oProj?i.oProj:Ms(i)}const nn=function fn(i,d,x){i=us(i);var G,X=!1;return typeof d>"u"?(d=i,i=Wn,X=!0):(typeof d.x<"u"||Array.isArray(d))&&(x=d,d=i,i=Wn,X=!0),d=us(d),x?cs(i,d,x):(G={forward:function(J,st){return cs(i,d,J,st)},inverse:function(J,st){return cs(d,i,J,st)}},X&&(G.oProj=d),G)};var kn=6,ir="AJSAJS",gr="AFAFAF",sn=65,Gn=73,ds=79,Un=86,bs=90;const wr={forward:_r,inverse:function fs(i){var d=fo(Bs(i.toUpperCase()));return d.lat&&d.lon?[d.lon,d.lat,d.lon,d.lat]:[d.left,d.bottom,d.right,d.top]},toPoint:Us};function _r(i,d){return d=d||5,function zr(i,d){var x="00000"+i.easting,X="00000"+i.northing;return i.zoneNumber+i.zoneLetter+function mr(i,d,x){var X=ws(x);return function js(i,d,x){var X=x-1,G=ir.charCodeAt(X),J=gr.charCodeAt(X),st=G+i-1,q=J+d,mt=!1;return st>bs&&(st=st-bs+sn-1,mt=!0),(st===Gn||G<Gn&&st>Gn||(st>Gn||G<Gn)&&mt)&&st++,(st===ds||G<ds&&st>ds||(st>ds||G<ds)&&mt)&&++st===Gn&&st++,st>bs&&(st=st-bs+sn-1),q>Un?(q=q-Un+sn-1,mt=!0):mt=!1,(q===Gn||J<Gn&&q>Gn||(q>Gn||J<Gn)&&mt)&&q++,(q===ds||J<ds&&q>ds||(q>ds||J<ds)&&mt)&&++q===Gn&&q++,q>Un&&(q=q-Un+sn-1),String.fromCharCode(st)+String.fromCharCode(q)}(Math.floor(i/1e5),Math.floor(d/1e5)%20,X)}(i.easting,i.northing,i.zoneNumber)+x.substr(x.length-5,d)+X.substr(X.length-5,d)}(function Gr(i){var q,mt,Wt,de,ee,Ve,$e,d=i.lat,x=i.lon,X=6378137,G=.00669438,J=.9996,je=ys(d),Ne=ys(x);$e=Math.floor((x+180)/6)+1,180===x&&($e=60),d>=56&&d<64&&x>=3&&x<12&&($e=32),d>=72&&d<84&&(x>=0&&x<9?$e=31:x>=9&&x<21?$e=33:x>=21&&x<33?$e=35:x>=33&&x<42&&($e=37)),Ve=ys(6*($e-1)-180+3),q=G/(1-G),mt=X/Math.sqrt(1-G*Math.sin(je)*Math.sin(je)),Wt=Math.tan(je)*Math.tan(je),de=q*Math.cos(je)*Math.cos(je);var bi=J*mt*((ee=Math.cos(je)*(Ne-Ve))+(1-Wt+de)*ee*ee*ee/6+(5-18*Wt+Wt*Wt+72*de-58*q)*ee*ee*ee*ee*ee/120)+5e5,Gi=J*(X*(.9983242984503243*je-.002514607064228144*Math.sin(2*je)+2639046602129982e-21*Math.sin(4*je)-35*G*G*G/3072*Math.sin(6*je))+mt*Math.tan(je)*(ee*ee/2+(5-Wt+9*de+4*de*de)*ee*ee*ee*ee/24+(61-58*Wt+Wt*Wt+600*de-330*q)*ee*ee*ee*ee*ee*ee/720));return d<0&&(Gi+=1e7),{northing:Math.round(Gi),easting:Math.round(bi),zoneNumber:$e,zoneLetter:Ko(d)}}({lat:i[1],lon:i[0]}),d)}function Us(i){var d=fo(Bs(i.toUpperCase()));return d.lat&&d.lon?[d.lon,d.lat]:[(d.left+d.right)/2,(d.top+d.bottom)/2]}function ys(i){return i*(Math.PI/180)}function uo(i){return i/Math.PI*180}function fo(i){var d=i.northing,x=i.easting,X=i.zoneLetter,G=i.zoneNumber;if(G<0||G>60)return null;var mt,de,ee,be,je,Ne,$e,bi,Gi,J=.9996,q=.00669438,Wt=(1-Math.sqrt(1-q))/(1+Math.sqrt(1-q)),ji=x-5e5,hn=d;X<"N"&&(hn-=1e7),$e=6*(G-1)-180+3,mt=q/(1-q),Gi=(bi=hn/J/6367449.145945056)+(3*Wt/2-27*Wt*Wt*Wt/32)*Math.sin(2*bi)+(21*Wt*Wt/16-55*Wt*Wt*Wt*Wt/32)*Math.sin(4*bi)+151*Wt*Wt*Wt/96*Math.sin(6*bi),de=6378137/Math.sqrt(1-q*Math.sin(Gi)*Math.sin(Gi)),ee=Math.tan(Gi)*Math.tan(Gi),be=mt*Math.cos(Gi)*Math.cos(Gi),je=6378137*(1-q)/Math.pow(1-q*Math.sin(Gi)*Math.sin(Gi),1.5),Ne=ji/(de*J);var Qi=Gi-de*Math.tan(Gi)/je*(Ne*Ne/2-(5+3*ee+10*be-4*be*be-9*mt)*Ne*Ne*Ne*Ne/24+(61+90*ee+298*be+45*ee*ee-252*mt-3*be*be)*Ne*Ne*Ne*Ne*Ne*Ne/720);Qi=uo(Qi);var Kn,on=(Ne-(1+2*ee+be)*Ne*Ne*Ne/6+(5-2*be+28*ee-3*be*be+8*mt+24*ee*ee)*Ne*Ne*Ne*Ne*Ne/120)/Math.cos(Gi);if(on=$e+uo(on),i.accuracy){var vn=fo({northing:i.northing+i.accuracy,easting:i.easting+i.accuracy,zoneLetter:i.zoneLetter,zoneNumber:i.zoneNumber});Kn={top:vn.lat,right:vn.lon,bottom:Qi,left:on}}else Kn={lat:Qi,lon:on};return Kn}function Ko(i){var d="Z";return 84>=i&&i>=72?d="X":72>i&&i>=64?d="W":64>i&&i>=56?d="V":56>i&&i>=48?d="U":48>i&&i>=40?d="T":40>i&&i>=32?d="S":32>i&&i>=24?d="R":24>i&&i>=16?d="Q":16>i&&i>=8?d="P":8>i&&i>=0?d="N":0>i&&i>=-8?d="M":-8>i&&i>=-16?d="L":-16>i&&i>=-24?d="K":-24>i&&i>=-32?d="J":-32>i&&i>=-40?d="H":-40>i&&i>=-48?d="G":-48>i&&i>=-56?d="F":-56>i&&i>=-64?d="E":-64>i&&i>=-72?d="D":-72>i&&i>=-80&&(d="C"),d}function ws(i){var d=i%kn;return 0===d&&(d=kn),d}function Bs(i){if(i&&0===i.length)throw"MGRSPoint coverting from nothing";for(var G,d=i.length,x=null,X="",J=0;!/[A-Z]/.test(G=i.charAt(J));){if(J>=2)throw"MGRSPoint bad conversion from: "+i;X+=G,J++}var st=parseInt(X,10);if(0===J||J+3>d)throw"MGRSPoint bad conversion from: "+i;var q=i.charAt(J++);if(q<="A"||"B"===q||"Y"===q||q>="Z"||"I"===q||"O"===q)throw"MGRSPoint zone letter "+q+" not handled: "+i;x=i.substring(J,J+=2);for(var mt=ws(st),Wt=function gs(i,d){for(var x=ir.charCodeAt(d-1),X=1e5,G=!1;x!==i.charCodeAt(0);){if(++x===Gn&&x++,x===ds&&x++,x>bs){if(G)throw"Bad character: "+i;x=sn,G=!0}X+=1e5}return X}(x.charAt(0),mt),de=function Hn(i,d){if(i>"V")throw"MGRSPoint given invalid Northing "+i;for(var x=gr.charCodeAt(d-1),X=0,G=!1;x!==i.charCodeAt(0);){if(++x===Gn&&x++,x===ds&&x++,x>Un){if(G)throw"Bad character: "+i;x=sn,G=!0}X+=1e5}return X}(x.charAt(1),mt);de<vs(q);)de+=2e6;var ee=d-J;if(ee%2!=0)throw"MGRSPoint has to have an even number \nof digits after the zone letter and two 100km letters - front \nhalf for easting meters, second half for \nnorthing meters"+i;var Ve,$e,bi,be=ee/2,je=0,Ne=0;return be>0&&(Ve=1e5/Math.pow(10,be),$e=i.substring(J,J+be),je=parseFloat($e)*Ve,bi=i.substring(J+be),Ne=parseFloat(bi)*Ve),{easting:je+Wt,northing:Ne+de,zoneLetter:q,zoneNumber:st,accuracy:Ve}}function vs(i){var d;switch(i){case"C":d=11e5;break;case"D":d=2e6;break;case"E":d=28e5;break;case"F":d=37e5;break;case"G":d=46e5;break;case"H":d=55e5;break;case"J":d=64e5;break;case"K":d=73e5;break;case"L":d=82e5;break;case"M":d=91e5;break;case"N":d=0;break;case"P":d=8e5;break;case"Q":d=17e5;break;case"R":d=26e5;break;case"S":d=35e5;break;case"T":d=44e5;break;case"U":d=53e5;break;case"V":d=62e5;break;case"W":d=7e6;break;case"X":d=79e5;break;default:d=-1}if(d>=0)return d;throw"Invalid zone letter: "+i}function Tn(i,d,x){if(!(this instanceof Tn))return new Tn(i,d,x);if(Array.isArray(i))this.x=i[0],this.y=i[1],this.z=i[2]||0;else if("object"==typeof i)this.x=i.x,this.y=i.y,this.z=i.z||0;else if("string"==typeof i&&typeof d>"u"){var X=i.split(",");this.x=parseFloat(X[0],10),this.y=parseFloat(X[1],10),this.z=parseFloat(X[2],10)||0}else this.x=i,this.y=d,this.z=x||0;console.warn("proj4.Point will be removed in version 3, use proj4.toPoint")}Tn.fromMGRS=function(i){return new Tn(Us(i))},Tn.prototype.toMGRS=function(i){return _r([this.x,this.y],i)};const zn=Tn;var Qr=.01953125,Xr=.01068115234375;function Qe(i){var d=[];d[0]=1-i*(.25+i*(.046875+i*(Qr+i*Xr))),d[1]=i*(.75-i*(.046875+i*(Qr+i*Xr)));var x=i*i;return d[2]=x*(.46875-i*(.013020833333333334+.007120768229166667*i)),d[3]=(x*=i)*(.3645833333333333-.005696614583333333*i),d[4]=x*i*.3076171875,d}function di(i,d,x,X){return X[0]*i-(x*=d)*(X[1]+(d*=d)*(X[2]+d*(X[3]+d*X[4])))}var rn=20;function Zi(i,d,x){for(var X=1/(1-d),G=i,J=rn;J;--J){var st=Math.sin(G),q=1-d*st*st;if(G-=q=(di(G,st,Math.cos(G),x)-i)*(q*Math.sqrt(q))*X,Math.abs(q)<o)return G}return G}const Is={init:function Hi(){this.x0=void 0!==this.x0?this.x0:0,this.y0=void 0!==this.y0?this.y0:0,this.long0=void 0!==this.long0?this.long0:0,this.lat0=void 0!==this.lat0?this.lat0:0,this.es&&(this.en=Qe(this.es),this.ml0=di(this.lat0,Math.sin(this.lat0),Math.cos(this.lat0),this.en))},forward:function Ws(i){var G,J,st,x=i.y,X=Ue(i.x-this.long0),q=Math.sin(x),mt=Math.cos(x);if(this.es){var de=mt*X,ee=Math.pow(de,2),be=this.ep2*Math.pow(mt,2),je=Math.pow(be,2),Ne=Math.abs(mt)>o?Math.tan(x):0,Ve=Math.pow(Ne,2),$e=Math.pow(Ve,2);G=1-this.es*Math.pow(q,2),de/=Math.sqrt(G);var bi=di(x,q,mt,this.en);J=this.a*(this.k0*de*(1+ee/6*(1-Ve+be+ee/20*(5-18*Ve+$e+14*be-58*Ve*be+ee/42*(61+179*$e-$e*Ve-479*Ve)))))+this.x0,st=this.a*(this.k0*(bi-this.ml0+q*X*de/2*(1+ee/12*(5-Ve+9*be+4*je+ee/30*(61+$e-58*Ve+270*be-330*Ve*be+ee/56*(1385+543*$e-$e*Ve-3111*Ve))))))+this.y0}else{var Wt=mt*Math.sin(X);if(Math.abs(Math.abs(Wt)-1)<o)return 93;if(J=.5*this.a*this.k0*Math.log((1+Wt)/(1-Wt))+this.x0,st=mt*Math.cos(X)/Math.sqrt(1-Math.pow(Wt,2)),(Wt=Math.abs(st))>=1){if(Wt-1>o)return 93;st=0}else st=Math.acos(st);x<0&&(st=-st),st=this.a*this.k0*(st-this.lat0)+this.y0}return i.x=J,i.y=st,i},inverse:function gn(i){var d,x,X,G,J=1/this.a*(i.x-this.x0),st=1/this.a*(i.y-this.y0);if(this.es)if(x=Zi(d=this.ml0+st/this.k0,this.es,this.en),Math.abs(x)<_){var ee=Math.sin(x),be=Math.cos(x),je=Math.abs(be)>o?Math.tan(x):0,Ne=this.ep2*Math.pow(be,2),Ve=Math.pow(Ne,2),$e=Math.pow(je,2),bi=Math.pow($e,2);d=1-this.es*Math.pow(ee,2);var Gi=J*Math.sqrt(d)/this.k0,ji=Math.pow(Gi,2);X=x-(d*=je)*ji/(1-this.es)*.5*(1-ji/12*(5+3*$e-9*Ne*$e+Ne-4*Ve-ji/30*(61+90*$e-252*Ne*$e+45*bi+46*Ne-ji/56*(1385+3633*$e+4095*bi+1574*bi*$e)))),G=Ue(this.long0+Gi*(1-ji/6*(1+2*$e+Ne-ji/20*(5+28*$e+24*bi+8*Ne*$e+6*Ne-ji/42*(61+662*$e+1320*bi+720*bi*$e))))/be)}else X=_*Ui(st),G=0;else{var q=Math.exp(J/this.k0),mt=.5*(q-1/q),de=Math.cos(this.lat0+st/this.k0);d=Math.sqrt((1-Math.pow(de,2))/(1+Math.pow(mt,2))),X=Math.asin(d),st<0&&(X=-X),G=0===mt&&0===de?0:Ue(Math.atan2(mt,de)+this.long0)}return i.x=G,i.y=X,i},names:["Fast_Transverse_Mercator","Fast Transverse Mercator"]};function vr(i){var d=Math.exp(i);return(d-1/d)/2}function Wi(i,d){i=Math.abs(i),d=Math.abs(d);var x=Math.max(i,d),X=Math.min(i,d)/(x||1);return x*Math.sqrt(1+Math.pow(X,2))}function is(i,d){for(var st,x=2*Math.cos(2*d),X=i.length-1,G=i[X],J=0;--X>=0;)st=x*G-J+i[X],J=G,G=st;return d+st*Math.sin(2*d)}function at(i,d,x){for(var Ne,Ve,X=Math.sin(d),G=Math.cos(d),J=vr(x),st=function le(i){var d=Math.exp(i);return(d+1/d)/2}(x),q=2*G*st,mt=-2*X*J,Wt=i.length-1,de=i[Wt],ee=0,be=0,je=0;--Wt>=0;)Ne=be,Ve=ee,de=q*(be=de)-Ne-mt*(ee=je)+i[Wt],je=mt*be-Ve+q*ee;return[(q=X*st)*de-(mt=G*J)*je,q*je+mt*de]}const we={init:function ct(){if(!this.approx&&(isNaN(this.es)||this.es<=0))throw new Error('Incorrect elliptical usage. Try using the +approx option in the proj string, or PROJECTION["Fast_Transverse_Mercator"] in the WKT.');this.approx&&(Is.init.apply(this),this.forward=Is.forward,this.inverse=Is.inverse),this.x0=void 0!==this.x0?this.x0:0,this.y0=void 0!==this.y0?this.y0:0,this.long0=void 0!==this.long0?this.long0:0,this.lat0=void 0!==this.lat0?this.lat0:0,this.cgb=[],this.cbg=[],this.utg=[],this.gtu=[];var i=this.es/(1+Math.sqrt(1-this.es)),d=i/(2-i),x=d;this.cgb[0]=d*(2+d*(-2/3+d*(d*(116/45+d*(26/45+d*(-2854/675)))-2))),this.cbg[0]=d*(d*(2/3+d*(4/3+d*(-82/45+d*(32/45+d*(4642/4725)))))-2),this.cgb[1]=(x*=d)*(7/3+d*(d*(-227/45+d*(2704/315+d*(2323/945)))-1.6)),this.cbg[1]=x*(5/3+d*(-16/15+d*(-13/9+d*(904/315+d*(-1522/945))))),this.cgb[2]=(x*=d)*(56/15+d*(-136/35+d*(-1262/105+d*(73814/2835)))),this.cbg[2]=x*(-26/15+d*(34/21+d*(1.6+d*(-12686/2835)))),this.cgb[3]=(x*=d)*(4279/630+d*(-332/35+d*(-399572/14175))),this.cbg[3]=x*(1237/630+d*(d*(-24832/14175)-2.4)),this.cgb[4]=(x*=d)*(4174/315+d*(-144838/6237)),this.cbg[4]=x*(-734/315+d*(109598/31185)),this.cgb[5]=(x*=d)*(601676/22275),this.cbg[5]=x*(444337/155925),x=Math.pow(d,2),this.Qn=this.k0/(1+d)*(1+x*(1/4+x*(1/64+x/256))),this.utg[0]=d*(d*(2/3+d*(-37/96+d*(1/360+d*(81/512+d*(-96199/604800)))))-.5),this.gtu[0]=d*(.5+d*(-2/3+d*(5/16+d*(41/180+d*(-127/288+d*(7891/37800)))))),this.utg[1]=x*(-1/48+d*(-1/15+d*(437/1440+d*(-46/105+d*(1118711/3870720))))),this.gtu[1]=x*(13/48+d*(d*(557/1440+d*(281/630+d*(-1983433/1935360)))-.6)),this.utg[2]=(x*=d)*(-17/480+d*(37/840+d*(209/4480+d*(-5569/90720)))),this.gtu[2]=x*(61/240+d*(-103/140+d*(15061/26880+d*(167603/181440)))),this.utg[3]=(x*=d)*(-4397/161280+d*(11/504+d*(830251/7257600))),this.gtu[3]=x*(49561/161280+d*(-179/168+d*(6601661/7257600))),this.utg[4]=(x*=d)*(-4583/161280+d*(108847/3991680)),this.gtu[4]=x*(34729/80640+d*(-3418889/1995840)),this.utg[5]=(x*=d)*(-20648693/638668800),this.gtu[5]=.6650675310896665*x;var X=is(this.cbg,this.lat0);this.Zb=-this.Qn*(X+function _s(i,d){for(var st,x=2*Math.cos(d),X=i.length-1,G=i[X],J=0;--X>=0;)st=x*G-J+i[X],J=G,G=st;return Math.sin(d)*st}(this.gtu,2*X))},forward:function pt(i){var d=Ue(i.x-this.long0),x=i.y;x=is(this.cbg,x);var X=Math.sin(x),G=Math.cos(x),J=Math.sin(d),st=Math.cos(d);x=Math.atan2(X,st*G),d=Math.atan2(J*G,Wi(X,G*st)),d=function ra(i){var d=Math.abs(i);return d=function _o(i){var d=1+i,x=d-1;return 0===x?i:i*Math.log(d)/x}(d*(1+d/(Wi(1,d)+1))),i<0?-d:d}(Math.tan(d));var mt,Wt,q=at(this.gtu,2*x,2*d);return x+=q[0],d+=q[1],Math.abs(d)<=2.623395162778?(mt=this.a*(this.Qn*d)+this.x0,Wt=this.a*(this.Qn*x+this.Zb)+this.y0):(mt=1/0,Wt=1/0),i.x=mt,i.y=Wt,i},inverse:function Ht(i){var X,G,d=1/this.a*(i.x-this.x0),x=1/this.a*(i.y-this.y0);if(x=(x-this.Zb)/this.Qn,d/=this.Qn,Math.abs(d)<=2.623395162778){var J=at(this.utg,2*x,2*d);x+=J[0],d+=J[1],d=Math.atan(vr(d));var st=Math.sin(x),q=Math.cos(x),mt=Math.sin(d),Wt=Math.cos(d);x=Math.atan2(st*Wt,Wi(mt,Wt*q)),X=Ue((d=Math.atan2(mt,Wt*q))+this.long0),G=is(this.cgb,x)}else X=1/0,G=1/0;return i.x=X,i.y=G,i},names:["Extended_Transverse_Mercator","Extended Transverse Mercator","etmerc","Transverse_Mercator","Transverse Mercator","Gauss Kruger","Gauss_Kruger","tmerc"]},$i={init:function li(){var i=function ze(i,d){if(void 0===i){if((i=Math.floor(30*(Ue(d)+Math.PI)/Math.PI)+1)<0)return 0;if(i>60)return 60}return i}(this.zone,this.long0);if(void 0===i)throw new Error("unknown utm zone");this.lat0=0,this.long0=(6*Math.abs(i)-183)*f,this.x0=5e5,this.y0=this.utmSouth?1e7:0,this.k0=.9996,we.init.apply(this),this.forward=we.forward,this.inverse=we.inverse},names:["Universal Transverse Mercator System","utm"],dependsOn:"etmerc"};function ln(i,d){return Math.pow((1-i)/(1+i),d)}const We={init:function qi(){var i=Math.sin(this.lat0),d=Math.cos(this.lat0);d*=d,this.rc=Math.sqrt(1-this.es)/(1-this.es*i*i),this.C=Math.sqrt(1+this.es*d*d/(1-this.es)),this.phic0=Math.asin(i/this.C),this.ratexp=.5*this.C*this.e,this.K=Math.tan(.5*this.phic0+a)/(Math.pow(Math.tan(.5*this.lat0+a),this.C)*ln(this.e*i,this.ratexp))},forward:function ms(i){var d=i.x,x=i.y;return i.y=2*Math.atan(this.K*Math.pow(Math.tan(.5*x+a),this.C)*ln(this.e*Math.sin(x),this.ratexp))-_,i.x=this.C*d,i},inverse:function Cn(i){for(var x=i.x/this.C,X=i.y,G=Math.pow(Math.tan(.5*X+a)/this.K,1/this.C),J=20;J>0&&(X=2*Math.atan(G*ln(this.e*Math.sin(i.y),-.5*this.e))-_,!(Math.abs(X-i.y)<1e-14));--J)i.y=X;return J?(i.x=x,i.y=X,i):null},names:["gauss"]},Pi={init:function Si(){We.init.apply(this),this.rc&&(this.sinc0=Math.sin(this.phic0),this.cosc0=Math.cos(this.phic0),this.R2=2*this.rc,this.title||(this.title="Oblique Stereographic Alternative"))},forward:function xi(i){var d,x,X,G;return i.x=Ue(i.x-this.long0),We.forward.apply(this,[i]),d=Math.sin(i.y),x=Math.cos(i.y),X=Math.cos(i.x),i.x=(G=this.k0*this.R2/(1+this.sinc0*d+this.cosc0*x*X))*x*Math.sin(i.x),i.y=G*(this.cosc0*d-this.sinc0*x*X),i.x=this.a*i.x+this.x0,i.y=this.a*i.y+this.y0,i},inverse:function ns(i){var d,x,X,G,J;if(i.x=(i.x-this.x0)/this.a,i.y=(i.y-this.y0)/this.a,i.x/=this.k0,i.y/=this.k0,J=Wi(i.x,i.y)){var st=2*Math.atan2(J,this.R2);d=Math.sin(st),x=Math.cos(st),G=Math.asin(x*this.sinc0+i.y*d*this.cosc0/J),X=Math.atan2(i.x*d,J*this.cosc0*x-i.y*this.sinc0*d)}else G=this.phic0,X=0;return i.x=X,i.y=G,We.inverse.apply(this,[i]),i.x=Ue(i.x+this.long0),i},names:["Stereographic_North_Pole","Oblique_Stereographic","sterea","Oblique Stereographic Alternative","Double_Stereographic"]},un={init:function ks(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.coslat0=Math.cos(this.lat0),this.sinlat0=Math.sin(this.lat0),this.sphere?1===this.k0&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=o&&(this.k0=.5*(1+Ui(this.lat0)*Math.sin(this.lat_ts))):(Math.abs(this.coslat0)<=o&&(this.con=this.lat0>0?1:-1),this.cons=Math.sqrt(Math.pow(1+this.e,1+this.e)*Math.pow(1-this.e,1-this.e)),1===this.k0&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=o&&Math.abs(Math.cos(this.lat_ts))>o&&(this.k0=.5*this.cons*ai(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts))/Oi(this.e,this.con*this.lat_ts,this.con*Math.sin(this.lat_ts))),this.ms1=ai(this.e,this.sinlat0,this.coslat0),this.X0=2*Math.atan(this.ssfn_(this.lat0,this.sinlat0,this.e))-_,this.cosX0=Math.cos(this.X0),this.sinX0=Math.sin(this.X0))},forward:function Gs(i){var J,st,q,mt,Wt,de,d=i.x,x=i.y,X=Math.sin(x),G=Math.cos(x),ee=Ue(d-this.long0);return Math.abs(Math.abs(d-this.long0)-Math.PI)<=o&&Math.abs(x+this.lat0)<=o?(i.x=NaN,i.y=NaN,i):this.sphere?(J=2*this.k0/(1+this.sinlat0*X+this.coslat0*G*Math.cos(ee)),i.x=this.a*J*G*Math.sin(ee)+this.x0,i.y=this.a*J*(this.coslat0*X-this.sinlat0*G*Math.cos(ee))+this.y0,i):(st=2*Math.atan(this.ssfn_(x,X,this.e))-_,mt=Math.cos(st),q=Math.sin(st),Math.abs(this.coslat0)<=o?(Wt=Oi(this.e,x*this.con,this.con*X),i.x=this.x0+(de=2*this.a*this.k0*Wt/this.cons)*Math.sin(d-this.long0),i.y=this.y0-this.con*de*Math.cos(d-this.long0),i):(Math.abs(this.sinlat0)<o?(J=2*this.a*this.k0/(1+mt*Math.cos(ee)),i.y=J*q):(J=2*this.a*this.k0*this.ms1/(this.cosX0*(1+this.sinX0*q+this.cosX0*mt*Math.cos(ee))),i.y=J*(this.cosX0*q-this.sinX0*mt*Math.cos(ee))+this.y0),i.x=J*mt*Math.sin(ee)+this.x0,i))},inverse:function sr(i){i.x-=this.x0,i.y-=this.y0;var d,x,G,J,st=Math.sqrt(i.x*i.x+i.y*i.y);if(this.sphere){var q=2*Math.atan(st/(2*this.a*this.k0));return d=this.long0,x=this.lat0,st<=o?(i.x=d,i.y=x,i):(x=Math.asin(Math.cos(q)*this.sinlat0+i.y*Math.sin(q)*this.coslat0/st),d=Math.abs(this.coslat0)<o?Ue(this.lat0>0?this.long0+Math.atan2(i.x,-1*i.y):this.long0+Math.atan2(i.x,i.y)):Ue(this.long0+Math.atan2(i.x*Math.sin(q),st*this.coslat0*Math.cos(q)-i.y*this.sinlat0*Math.sin(q))),i.x=d,i.y=x,i)}if(Math.abs(this.coslat0)<=o){if(st<=o)return x=this.lat0,i.x=d=this.long0,i.y=x,i;i.x*=this.con,i.y*=this.con,x=this.con*Ai(this.e,st*this.cons/(2*this.a*this.k0)),d=this.con*Ue(this.con*this.long0+Math.atan2(i.x,-1*i.y))}else G=2*Math.atan(st*this.cosX0/(2*this.a*this.k0*this.ms1)),d=this.long0,st<=o?J=this.X0:(J=Math.asin(Math.cos(G)*this.sinX0+i.y*Math.sin(G)*this.cosX0/st),d=Ue(this.long0+Math.atan2(i.x*Math.sin(G),st*this.cosX0*Math.cos(G)-i.y*this.sinX0*Math.sin(G)))),x=-1*Ai(this.e,Math.tan(.5*(_+J)));return i.x=d,i.y=x,i},names:["stere","Stereographic_South_Pole","Polar Stereographic (variant B)","Polar_Stereographic"],ssfn_:function Or(i,d,x){return d*=x,Math.tan(.5*(_+i))*Math.pow((1-d)/(1+d),.5*x)}},Xo={init:function Po(){var i=this.lat0;this.lambda0=this.long0;var d=Math.sin(i),x=this.a,G=1/this.rf,J=2*G-Math.pow(G,2),st=this.e=Math.sqrt(J);this.R=this.k0*x*Math.sqrt(1-J)/(1-J*Math.pow(d,2)),this.alpha=Math.sqrt(1+J/(1-J)*Math.pow(Math.cos(i),4)),this.b0=Math.asin(d/this.alpha);var q=Math.log(Math.tan(Math.PI/4+this.b0/2)),mt=Math.log(Math.tan(Math.PI/4+i/2)),Wt=Math.log((1+st*d)/(1-st*d));this.K=q-this.alpha*mt+this.alpha*st/2*Wt},forward:function to(i){var d=Math.log(Math.tan(Math.PI/4-i.y/2)),x=this.e/2*Math.log((1+this.e*Math.sin(i.y))/(1-this.e*Math.sin(i.y))),G=2*(Math.atan(Math.exp(-this.alpha*(d+x)+this.K))-Math.PI/4),J=this.alpha*(i.x-this.lambda0),st=Math.atan(Math.sin(J)/(Math.sin(this.b0)*Math.tan(G)+Math.cos(this.b0)*Math.cos(J))),q=Math.asin(Math.cos(this.b0)*Math.sin(G)-Math.sin(this.b0)*Math.cos(G)*Math.cos(J));return i.y=this.R/2*Math.log((1+Math.sin(q))/(1-Math.sin(q)))+this.y0,i.x=this.R*st+this.x0,i},inverse:function Ro(i){for(var X=(i.x-this.x0)/this.R,G=2*(Math.atan(Math.exp((i.y-this.y0)/this.R))-Math.PI/4),J=Math.asin(Math.cos(this.b0)*Math.sin(G)+Math.sin(this.b0)*Math.cos(G)*Math.cos(X)),st=Math.atan(Math.sin(X)/(Math.cos(this.b0)*Math.cos(X)-Math.sin(this.b0)*Math.tan(G))),q=this.lambda0+st/this.alpha,mt=0,Wt=J,de=-1e3,ee=0;Math.abs(Wt-de)>1e-7;){if(++ee>20)return;mt=1/this.alpha*(Math.log(Math.tan(Math.PI/4+J/2))-this.K)+this.e*Math.log(Math.tan(Math.PI/4+Math.asin(this.e*Math.sin(Wt))/2)),de=Wt,Wt=2*Math.atan(Math.exp(mt))-Math.PI/2}return i.x=q,i.y=Wt,i},names:["somerc"]};var zs=1e-7;const io={init:function rr(){var i,d,x,X,G,J,st,q,mt,Wt,ee,de=0,be=0,je=0,Ne=0,Ve=0,$e=0,bi=0;this.no_off=function rs(i){var x="object"==typeof i.PROJECTION?Object.keys(i.PROJECTION)[0]:i.PROJECTION;return"no_uoff"in i||"no_off"in i||-1!==["Hotine_Oblique_Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin"].indexOf(x)}(this),this.no_rot="no_rot"in this;var ji=!1;"alpha"in this&&(ji=!0);var hn=!1;if("rectified_grid_angle"in this&&(hn=!0),ji&&(bi=this.alpha),hn&&(de=this.rectified_grid_angle*f),ji||hn)be=this.longc;else if(je=this.long1,Ve=this.lat1,Ne=this.long2,$e=this.lat2,Math.abs(Ve-$e)<=zs||(i=Math.abs(Ve))<=zs||Math.abs(i-_)<=zs||Math.abs(Math.abs(this.lat0)-_)<=zs||Math.abs(Math.abs($e)-_)<=zs)throw new Error;var Qi=1-this.es;d=Math.sqrt(Qi),Math.abs(this.lat0)>o?(q=Math.sin(this.lat0),x=Math.cos(this.lat0),i=1-this.es*q*q,this.B=x*x,this.B=Math.sqrt(1+this.es*this.B*this.B/Qi),this.A=this.B*this.k0*d/i,(G=(X=this.B*d/(x*Math.sqrt(i)))*X-1)<=0?G=0:(G=Math.sqrt(G),this.lat0<0&&(G=-G)),this.E=G+=X,this.E*=Math.pow(Oi(this.e,this.lat0,q),this.B)):(this.B=1/d,this.A=this.k0,this.E=X=G=1),ji||hn?(ji?(ee=Math.asin(Math.sin(bi)/X),hn||(de=bi)):(ee=de,bi=Math.asin(X*Math.sin(ee))),this.lam0=be-Math.asin(.5*(G-1/G)*Math.tan(ee))/this.B):(J=Math.pow(Oi(this.e,Ve,Math.sin(Ve)),this.B),st=Math.pow(Oi(this.e,$e,Math.sin($e)),this.B),G=this.E/J,mt=(st-J)/(st+J),Wt=((Wt=this.E*this.E)-st*J)/(Wt+st*J),(i=je-Ne)<-Math.pi?Ne-=C:i>Math.pi&&(Ne+=C),this.lam0=Ue(.5*(je+Ne)-Math.atan(Wt*Math.tan(.5*this.B*(je-Ne))/mt)/this.B),ee=Math.atan(2*Math.sin(this.B*Ue(je-this.lam0))/(G-1/G)),de=bi=Math.asin(X*Math.sin(ee))),this.singam=Math.sin(ee),this.cosgam=Math.cos(ee),this.sinrot=Math.sin(de),this.cosrot=Math.cos(de),this.rB=1/this.B,this.ArB=this.A*this.rB,this.BrA=1/this.ArB,this.no_off?this.u_0=0:(this.u_0=Math.abs(this.ArB*Math.atan(Math.sqrt(X*X-1)/Math.cos(bi))),this.lat0<0&&(this.u_0=-this.u_0)),G=.5*ee,this.v_pole_n=this.ArB*Math.log(Math.tan(a-G)),this.v_pole_s=this.ArB*Math.log(Math.tan(a+G))},forward:function mo(i){var x,X,G,J,st,q,mt,Wt,d={};if(i.x=i.x-this.lam0,Math.abs(Math.abs(i.y)-_)>o){if(x=.5*((st=this.E/Math.pow(Oi(this.e,i.y,Math.sin(i.y)),this.B))-(q=1/st)),X=.5*(st+q),J=Math.sin(this.B*i.x),G=(x*this.singam-J*this.cosgam)/X,Math.abs(Math.abs(G)-1)<o)throw new Error;Wt=.5*this.ArB*Math.log((1-G)/(1+G)),q=Math.cos(this.B*i.x),mt=Math.abs(q)<zs?this.A*i.x:this.ArB*Math.atan2(x*this.cosgam+J*this.singam,q)}else Wt=i.y>0?this.v_pole_n:this.v_pole_s,mt=this.ArB*i.y;return this.no_rot?(d.x=mt,d.y=Wt):(d.x=Wt*this.cosrot+(mt-=this.u_0)*this.sinrot,d.y=mt*this.cosrot-Wt*this.sinrot),d.x=this.a*d.x+this.x0,d.y=this.a*d.y+this.y0,d},inverse:function or(i){var d,x,X,G,J,st,q,mt={};if(i.x=1/this.a*(i.x-this.x0),i.y=1/this.a*(i.y-this.y0),this.no_rot?(x=i.y,d=i.x):(x=i.x*this.cosrot-i.y*this.sinrot,d=i.y*this.cosrot+i.x*this.sinrot+this.u_0),G=.5*((X=Math.exp(-this.BrA*x))-1/X),J=.5*(X+1/X),q=((st=Math.sin(this.BrA*d))*this.cosgam+G*this.singam)/J,Math.abs(Math.abs(q)-1)<o)mt.x=0,mt.y=q<0?-_:_;else{if(mt.y=this.E/Math.sqrt((1+q)/(1-q)),mt.y=Ai(this.e,Math.pow(mt.y,1/this.B)),mt.y===1/0)throw new Error;mt.x=-this.rB*Math.atan2(G*this.cosgam-st*this.singam,Math.cos(this.BrA*d))}return mt.x+=this.lam0,mt},names:["Hotine_Oblique_Mercator","Hotine Oblique Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin","Hotine_Oblique_Mercator_Two_Point_Natural_Origin","Hotine_Oblique_Mercator_Azimuth_Center","Oblique_Mercator","omerc"]},Vo={init:function bo(){if(this.lat2||(this.lat2=this.lat1),this.k0||(this.k0=1),this.x0=this.x0||0,this.y0=this.y0||0,!(Math.abs(this.lat1+this.lat2)<o)){var i=this.b/this.a;this.e=Math.sqrt(1-i*i);var d=Math.sin(this.lat1),x=Math.cos(this.lat1),X=ai(this.e,d,x),G=Oi(this.e,this.lat1,d),J=Math.sin(this.lat2),st=Math.cos(this.lat2),q=ai(this.e,J,st),mt=Oi(this.e,this.lat2,J),Wt=Oi(this.e,this.lat0,Math.sin(this.lat0));this.ns=Math.abs(this.lat1-this.lat2)>o?Math.log(X/q)/Math.log(G/mt):d,isNaN(this.ns)&&(this.ns=d),this.f0=X/(this.ns*Math.pow(G,this.ns)),this.rh=this.a*this.f0*Math.pow(Wt,this.ns),this.title||(this.title="Lambert Conformal Conic")}},forward:function wo(i){var d=i.x,x=i.y;Math.abs(2*Math.abs(x)-Math.PI)<=o&&(x=Ui(x)*(_-2*o));var G,J,X=Math.abs(Math.abs(x)-_);if(X>o)G=Oi(this.e,x,Math.sin(x)),J=this.a*this.f0*Math.pow(G,this.ns);else{if((X=x*this.ns)<=0)return null;J=0}var st=this.ns*Ue(d-this.long0);return i.x=this.k0*(J*Math.sin(st))+this.x0,i.y=this.k0*(this.rh-J*Math.cos(st))+this.y0,i},inverse:function Ks(i){var d,x,X,G,J,st=(i.x-this.x0)/this.k0,q=this.rh-(i.y-this.y0)/this.k0;this.ns>0?(d=Math.sqrt(st*st+q*q),x=1):(d=-Math.sqrt(st*st+q*q),x=-1);var mt=0;if(0!==d&&(mt=Math.atan2(x*st,x*q)),0!==d||this.ns>0){if(x=1/this.ns,X=Math.pow(d/(this.a*this.f0),x),-9999===(G=Ai(this.e,X)))return null}else G=-_;return J=Ue(mt/this.ns+this.long0),i.x=J,i.y=G,i},names:["Lambert Tangential Conformal Conic Projection","Lambert_Conformal_Conic","Lambert_Conformal_Conic_1SP","Lambert_Conformal_Conic_2SP","lcc","Lambert Conic Conformal (1SP)","Lambert Conic Conformal (2SP)"]},So={init:function Io(){this.a=6377397.155,this.es=.006674372230614,this.e=Math.sqrt(this.es),this.lat0||(this.lat0=.863937979737193),this.long0||(this.long0=.4334234309119251),this.k0||(this.k0=.9999),this.s45=.785398163397448,this.s90=2*this.s45,this.fi0=this.lat0,this.e2=this.es,this.e=Math.sqrt(this.e2),this.alfa=Math.sqrt(1+this.e2*Math.pow(Math.cos(this.fi0),4)/(1-this.e2)),this.uq=1.04216856380474,this.u0=Math.asin(Math.sin(this.fi0)/this.alfa),this.g=Math.pow((1+this.e*Math.sin(this.fi0))/(1-this.e*Math.sin(this.fi0)),this.alfa*this.e/2),this.k=Math.tan(this.u0/2+this.s45)/Math.pow(Math.tan(this.fi0/2+this.s45),this.alfa)*this.g,this.k1=this.k0,this.n0=this.a*Math.sqrt(1-this.e2)/(1-this.e2*Math.pow(Math.sin(this.fi0),2)),this.s0=1.37008346281555,this.n=Math.sin(this.s0),this.ro0=this.k1*this.n0/Math.tan(this.s0),this.ad=this.s90-this.uq},forward:function ar(i){var d,x,X,G,J,st,q,Wt=i.y,de=Ue(i.x-this.long0);return d=Math.pow((1+this.e*Math.sin(Wt))/(1-this.e*Math.sin(Wt)),this.alfa*this.e/2),x=2*(Math.atan(this.k*Math.pow(Math.tan(Wt/2+this.s45),this.alfa)/d)-this.s45),X=-de*this.alfa,G=Math.asin(Math.cos(this.ad)*Math.sin(x)+Math.sin(this.ad)*Math.cos(x)*Math.cos(X)),J=Math.asin(Math.cos(x)*Math.sin(X)/Math.cos(G)),st=this.n*J,q=this.ro0*Math.pow(Math.tan(this.s0/2+this.s45),this.n)/Math.pow(Math.tan(G/2+this.s45),this.n),i.y=q*Math.cos(st)/1,i.x=q*Math.sin(st)/1,this.czech||(i.y*=-1,i.x*=-1),i},inverse:function po(i){var d,x,X,G,st,q,mt,Wt=i.x;i.x=i.y,i.y=Wt,this.czech||(i.y*=-1,i.x*=-1),st=Math.sqrt(i.x*i.x+i.y*i.y),G=Math.atan2(i.y,i.x)/Math.sin(this.s0),X=2*(Math.atan(Math.pow(this.ro0/st,1/this.n)*Math.tan(this.s0/2+this.s45))-this.s45),d=Math.asin(Math.cos(this.ad)*Math.sin(X)-Math.sin(this.ad)*Math.cos(X)*Math.cos(G)),x=Math.asin(Math.cos(X)*Math.sin(G)/Math.cos(d)),i.x=this.long0-x/this.alfa,q=d,mt=0;var de=0;do{i.y=2*(Math.atan(Math.pow(this.k,-1/this.alfa)*Math.pow(Math.tan(d/2+this.s45),1/this.alfa)*Math.pow((1+this.e*Math.sin(q))/(1-this.e*Math.sin(q)),this.e/2))-this.s45),Math.abs(q-i.y)<1e-10&&(mt=1),q=i.y,de+=1}while(0===mt&&de<15);return de>=15?null:i},names:["Krovak","krovak"]};function os(i,d,x,X,G){return i*G-d*Math.sin(2*G)+x*Math.sin(4*G)-X*Math.sin(6*G)}function Er(i){return 1-.25*i*(1+i/16*(3+1.25*i))}function Oo(i){return.375*i*(1+.25*i*(1+.46875*i))}function no(i){return.05859375*i*i*(1+.75*i)}function xr(i){return i*i*i*(35/3072)}function Ts(i,d,x){var X=d*x;return i/Math.sqrt(1-X*X)}function Dr(i){return Math.abs(i)<_?i:i-Ui(i)*Math.PI}function Xs(i,d,x,X,G){var J,st;J=i/d;for(var q=0;q<15;q++)if(J+=st=(i-(d*J-x*Math.sin(2*J)+X*Math.sin(4*J)-G*Math.sin(6*J)))/(d-2*x*Math.cos(2*J)+4*X*Math.cos(4*J)-6*G*Math.cos(6*J)),Math.abs(st)<=1e-10)return J;return NaN}const vo={init:function Do(){this.sphere||(this.e0=Er(this.es),this.e1=Oo(this.es),this.e2=no(this.es),this.e3=xr(this.es),this.ml0=this.a*os(this.e0,this.e1,this.e2,this.e3,this.lat0))},forward:function Lr(i){var d,x,X=i.x,G=i.y;if(X=Ue(X-this.long0),this.sphere)d=this.a*Math.asin(Math.cos(G)*Math.sin(X)),x=this.a*(Math.atan2(Math.tan(G),Math.cos(X))-this.lat0);else{var J=Math.sin(G),st=Math.cos(G),q=Ts(this.a,this.e,J),mt=Math.tan(G)*Math.tan(G),Wt=X*Math.cos(G),de=Wt*Wt,ee=this.es*st*st/(1-this.es);d=q*Wt*(1-de*mt*(1/6-(8-mt+8*ee)*de/120)),x=this.a*os(this.e0,this.e1,this.e2,this.e3,G)-this.ml0+q*J/st*de*(.5+(5-mt+6*ee)*de/24)}return i.x=d+this.x0,i.y=x+this.y0,i},inverse:function Yo(i){i.x-=this.x0,i.y-=this.y0;var X,G,d=i.x/this.a,x=i.y/this.a;if(this.sphere){var J=x+this.lat0;X=Math.asin(Math.sin(J)*Math.cos(d)),G=Math.atan2(Math.tan(d),Math.cos(J))}else{var q=Xs(this.ml0/this.a+x,this.e0,this.e1,this.e2,this.e3);if(Math.abs(Math.abs(q)-_)<=o)return i.x=this.long0,i.y=_,x<0&&(i.y*=-1),i;var mt=Ts(this.a,this.e,Math.sin(q)),Wt=mt*mt*mt/this.a/this.a*(1-this.es),de=Math.pow(Math.tan(q),2),ee=d*this.a/mt,be=ee*ee;X=q-mt*Math.tan(q)/Wt*ee*ee*(.5-(1+3*de)*ee*ee/24),G=ee*(1-be*(de/3+(1+3*de)*de*be/15))/Math.cos(q)}return i.x=Ue(G+this.long0),i.y=Dr(X),i},names:["Cassini","Cassini_Soldner","cass"]};function Vs(i,d){var x;return i>1e-7?(1-i*i)*(d/(1-(x=i*d)*x)-.5/i*Math.log((1-x)/(1+x))):2*d}const bt={init:function N(){var d,i=Math.abs(this.lat0);if(this.mode=Math.abs(i-_)<o?this.lat0<0?this.S_POLE:this.N_POLE:Math.abs(i)<o?this.EQUIT:this.OBLIQ,this.es>0)switch(this.qp=Vs(this.e,1),this.mmf=.5/(1-this.es),this.apa=function Lt(i){var d,x=[];return x[0]=.3333333333333333*i,x[0]+=.17222222222222222*(d=i*i),x[1]=.06388888888888888*d,x[0]+=.10257936507936508*(d*=i),x[1]+=.0664021164021164*d,x[2]=.016415012942191543*d,x}(this.es),this.mode){case this.N_POLE:case this.S_POLE:this.dd=1;break;case this.EQUIT:this.rq=Math.sqrt(.5*this.qp),this.dd=1/this.rq,this.xmf=1,this.ymf=.5*this.qp;break;case this.OBLIQ:this.rq=Math.sqrt(.5*this.qp),d=Math.sin(this.lat0),this.sinb1=Vs(this.e,d)/this.qp,this.cosb1=Math.sqrt(1-this.sinb1*this.sinb1),this.dd=Math.cos(this.lat0)/(Math.sqrt(1-this.es*d*d)*this.rq*this.cosb1),this.ymf=(this.xmf=this.rq)/this.dd,this.xmf*=this.dd}else this.mode===this.OBLIQ&&(this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0))},forward:function Q(i){var d,x,X,G,J,st,q,mt,Wt,de,ee=i.x,be=i.y;if(ee=Ue(ee-this.long0),this.sphere){if(J=Math.sin(be),de=Math.cos(be),X=Math.cos(ee),this.mode===this.OBLIQ||this.mode===this.EQUIT){if((x=this.mode===this.EQUIT?1+de*X:1+this.sinph0*J+this.cosph0*de*X)<=o)return null;d=(x=Math.sqrt(2/x))*de*Math.sin(ee),x*=this.mode===this.EQUIT?J:this.cosph0*J-this.sinph0*de*X}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(X=-X),Math.abs(be+this.lat0)<o)return null;x=a-.5*be,d=(x=2*(this.mode===this.S_POLE?Math.cos(x):Math.sin(x)))*Math.sin(ee),x*=X}}else{switch(q=0,mt=0,Wt=0,X=Math.cos(ee),G=Math.sin(ee),J=Math.sin(be),st=Vs(this.e,J),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(q=st/this.qp,mt=Math.sqrt(1-q*q)),this.mode){case this.OBLIQ:Wt=1+this.sinb1*q+this.cosb1*mt*X;break;case this.EQUIT:Wt=1+mt*X;break;case this.N_POLE:Wt=_+be,st=this.qp-st;break;case this.S_POLE:Wt=be-_,st=this.qp+st}if(Math.abs(Wt)<o)return null;switch(this.mode){case this.OBLIQ:case this.EQUIT:Wt=Math.sqrt(2/Wt),x=this.mode===this.OBLIQ?this.ymf*Wt*(this.cosb1*q-this.sinb1*mt*X):(Wt=Math.sqrt(2/(1+mt*X)))*q*this.ymf,d=this.xmf*Wt*mt*G;break;case this.N_POLE:case this.S_POLE:st>=0?(d=(Wt=Math.sqrt(st))*G,x=X*(this.mode===this.S_POLE?Wt:-Wt)):d=x=0}}return i.x=this.a*d+this.x0,i.y=this.a*x+this.y0,i},inverse:function et(i){i.x-=this.x0,i.y-=this.y0;var X,G,J,st,q,mt,Wt,d=i.x/this.a,x=i.y/this.a;if(this.sphere){var ee,de=0,be=0;if((G=.5*(ee=Math.sqrt(d*d+x*x)))>1)return null;switch(G=2*Math.asin(G),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(be=Math.sin(G),de=Math.cos(G)),this.mode){case this.EQUIT:G=Math.abs(ee)<=o?0:Math.asin(x*be/ee),d*=be,x=de*ee;break;case this.OBLIQ:G=Math.abs(ee)<=o?this.lat0:Math.asin(de*this.sinph0+x*be*this.cosph0/ee),d*=be*this.cosph0,x=(de-Math.sin(G)*this.sinph0)*ee;break;case this.N_POLE:x=-x,G=_-G;break;case this.S_POLE:G-=_}X=0!==x||this.mode!==this.EQUIT&&this.mode!==this.OBLIQ?Math.atan2(d,x):0}else{if(Wt=0,this.mode===this.OBLIQ||this.mode===this.EQUIT){if(d/=this.dd,x*=this.dd,(mt=Math.sqrt(d*d+x*x))<o)return i.x=this.long0,i.y=this.lat0,i;st=2*Math.asin(.5*mt/this.rq),J=Math.cos(st),d*=st=Math.sin(st),this.mode===this.OBLIQ?(q=this.qp*(Wt=J*this.sinb1+x*st*this.cosb1/mt),x=mt*this.cosb1*J-x*this.sinb1*st):(q=this.qp*(Wt=x*st/mt),x=mt*J)}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(x=-x),!(q=d*d+x*x))return i.x=this.long0,i.y=this.lat0,i;Wt=1-q/this.qp,this.mode===this.S_POLE&&(Wt=-Wt)}X=Math.atan2(d,x),G=function wt(i,d){var x=i+i;return i+d[0]*Math.sin(x)+d[1]*Math.sin(x+x)+d[2]*Math.sin(x+x+x)}(Math.asin(Wt),this.apa)}return i.x=Ue(this.long0+X),i.y=G,i},names:["Lambert Azimuthal Equal Area","Lambert_Azimuthal_Equal_Area","laea"],S_POLE:1,N_POLE:2,EQUIT:3,OBLIQ:4};function qt(i){return Math.abs(i)>1&&(i=i>1?1:-1),Math.asin(i)}const xe={init:function yt(){Math.abs(this.lat1+this.lat2)<o||(this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e3=Math.sqrt(this.es),this.sin_po=Math.sin(this.lat1),this.cos_po=Math.cos(this.lat1),this.t1=this.sin_po,this.con=this.sin_po,this.ms1=ai(this.e3,this.sin_po,this.cos_po),this.qs1=Vs(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat2),this.cos_po=Math.cos(this.lat2),this.t2=this.sin_po,this.ms2=ai(this.e3,this.sin_po,this.cos_po),this.qs2=Vs(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat0),this.cos_po=Math.cos(this.lat0),this.t3=this.sin_po,this.qs0=Vs(this.e3,this.sin_po),this.ns0=Math.abs(this.lat1-this.lat2)>o?(this.ms1*this.ms1-this.ms2*this.ms2)/(this.qs2-this.qs1):this.con,this.c=this.ms1*this.ms1+this.ns0*this.qs1,this.rh=this.a*Math.sqrt(this.c-this.ns0*this.qs0)/this.ns0)},forward:function Bt(i){var d=i.x,x=i.y;this.sin_phi=Math.sin(x),this.cos_phi=Math.cos(x);var X=Vs(this.e3,this.sin_phi),G=this.a*Math.sqrt(this.c-this.ns0*X)/this.ns0,J=this.ns0*Ue(d-this.long0),st=G*Math.sin(J)+this.x0,q=this.rh-G*Math.cos(J)+this.y0;return i.x=st,i.y=q,i},inverse:function $t(i){var d,X,G,J,st;return i.x-=this.x0,i.y=this.rh-i.y+this.y0,this.ns0>=0?(d=Math.sqrt(i.x*i.x+i.y*i.y),X=1):(d=-Math.sqrt(i.x*i.x+i.y*i.y),X=-1),G=0,0!==d&&(G=Math.atan2(X*i.x,X*i.y)),X=d*this.ns0/this.a,st=this.sphere?Math.asin((this.c-X*X)/(2*this.ns0)):this.phi1z(this.e3,(this.c-X*X)/this.ns0),J=Ue(G/this.ns0+this.long0),i.x=J,i.y=st,i},names:["Albers_Conic_Equal_Area","Albers","aea"],phi1z:function ae(i,d){var x,G,J,st,q=qt(.5*d);if(i<o)return q;for(var mt=i*i,Wt=1;Wt<=25;Wt++)if(q+=st=.5*(J=1-(G=i*(x=Math.sin(q)))*G)*J/Math.cos(q)*(d/(1-mt)-x/J+.5/i*Math.log((1-G)/(1+G))),Math.abs(st)<=1e-7)return q;return null}},he={init:function se(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0),this.infinity_dist=1e3*this.a,this.rc=1},forward:function Re(i){var d,x,X,G,st,q,mt,de=i.y;return X=Ue(i.x-this.long0),d=Math.sin(de),x=Math.cos(de),G=Math.cos(X),(st=this.sin_p14*d+this.cos_p14*x*G)>0||Math.abs(st)<=o?(q=this.x0+1*this.a*x*Math.sin(X)/st,mt=this.y0+1*this.a*(this.cos_p14*d-this.sin_p14*x*G)/st):(q=this.x0+this.infinity_dist*x*Math.sin(X),mt=this.y0+this.infinity_dist*(this.cos_p14*d-this.sin_p14*x*G)),i.x=q,i.y=mt,i},inverse:function oe(i){var d,x,X,G,J,st;return i.x=(i.x-this.x0)/this.a,i.y=(i.y-this.y0)/this.a,i.x/=this.k0,i.y/=this.k0,(d=Math.sqrt(i.x*i.x+i.y*i.y))?(G=Math.atan2(d,this.rc),x=Math.sin(G),st=qt((X=Math.cos(G))*this.sin_p14+i.y*x*this.cos_p14/d),J=Math.atan2(i.x*x,d*this.cos_p14*X-i.y*this.sin_p14*x),J=Ue(this.long0+J)):(st=this.phic0,J=0),i.x=J,i.y=st,i},names:["gnom"]},Qt={init:function Se(){this.sphere||(this.k0=ai(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)))},forward:function Oe(i){var X,G,x=i.y,J=Ue(i.x-this.long0);if(this.sphere)X=this.x0+this.a*J*Math.cos(this.lat_ts),G=this.y0+this.a*Math.sin(x)/Math.cos(this.lat_ts);else{var st=Vs(this.e,Math.sin(x));X=this.x0+this.a*this.k0*J,G=this.y0+this.a*st*.5/this.k0}return i.x=X,i.y=G,i},inverse:function Je(i){var d,x;return i.x-=this.x0,i.y-=this.y0,this.sphere?(d=Ue(this.long0+i.x/this.a/Math.cos(this.lat_ts)),x=Math.asin(i.y/this.a*Math.cos(this.lat_ts))):(x=function Ie(i,d){var x=1-(1-i*i)/(2*i)*Math.log((1-i)/(1+i));if(Math.abs(Math.abs(d)-x)<1e-6)return d<0?-1*_:_;for(var G,J,st,q,X=Math.asin(.5*d),mt=0;mt<30;mt++)if(J=Math.sin(X),st=Math.cos(X),q=i*J,X+=G=Math.pow(1-q*q,2)/(2*st)*(d/(1-i*i)-J/(1-q*q)+.5/i*Math.log((1-q)/(1+q))),Math.abs(G)<=1e-10)return X;return NaN}(this.e,2*i.y*this.k0/this.a),d=Ue(this.long0+i.x/(this.a*this.k0))),i.x=d,i.y=x,i},names:["cea"]},kt={init:function Xt(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Equidistant Cylindrical (Plate Carre)",this.rc=Math.cos(this.lat_ts)},forward:function ye(i){var x=i.y,X=Ue(i.x-this.long0),G=Dr(x-this.lat0);return i.x=this.x0+this.a*X*this.rc,i.y=this.y0+this.a*G,i},inverse:function Nt(i){var x=i.y;return i.x=Ue(this.long0+(i.x-this.x0)/(this.a*this.rc)),i.y=Dr(this.lat0+(x-this.y0)/this.a),i},names:["Equirectangular","Equidistant_Cylindrical","eqc"]},Ke={init:function Te(){this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=Er(this.es),this.e1=Oo(this.es),this.e2=no(this.es),this.e3=xr(this.es),this.ml0=this.a*os(this.e0,this.e1,this.e2,this.e3,this.lat0)},forward:function Ae(i){var X,G,J,x=i.y,st=Ue(i.x-this.long0);if(J=st*Math.sin(x),this.sphere)Math.abs(x)<=o?(X=this.a*st,G=-1*this.a*this.lat0):(X=this.a*Math.sin(J)/Math.tan(x),G=this.a*(Dr(x-this.lat0)+(1-Math.cos(J))/Math.tan(x)));else if(Math.abs(x)<=o)X=this.a*st,G=-1*this.ml0;else{var q=Ts(this.a,this.e,Math.sin(x))/Math.tan(x);X=q*Math.sin(J),G=this.a*os(this.e0,this.e1,this.e2,this.e3,x)-this.ml0+q*(1-Math.cos(J))}return i.x=X+this.x0,i.y=G+this.y0,i},inverse:function pe(i){var d,x,X,G,J,st,q,mt,Wt;if(X=i.x-this.x0,G=i.y-this.y0,this.sphere)if(Math.abs(G+this.a*this.lat0)<=o)d=Ue(X/this.a+this.long0),x=0;else{var de;for(q=X*X/this.a/this.a+(st=this.lat0+G/this.a)*st,mt=st,J=20;J;--J)if(mt+=Wt=-1*(st*(mt*(de=Math.tan(mt))+1)-mt-.5*(mt*mt+q)*de)/((mt-st)/de-1),Math.abs(Wt)<=o){x=mt;break}d=Ue(this.long0+Math.asin(X*Math.tan(mt)/this.a)/Math.sin(x))}else if(Math.abs(G+this.ml0)<=o)x=0,d=Ue(this.long0+X/this.a);else{var ee,be,je,Ne,Ve;for(q=X*X/this.a/this.a+(st=(this.ml0+G)/this.a)*st,mt=st,J=20;J;--J)if(Ve=this.e*Math.sin(mt),ee=Math.sqrt(1-Ve*Ve)*Math.tan(mt),be=this.a*os(this.e0,this.e1,this.e2,this.e3,mt),je=this.e0-2*this.e1*Math.cos(2*mt)+4*this.e2*Math.cos(4*mt)-6*this.e3*Math.cos(6*mt),mt-=Wt=(st*(ee*(Ne=be/this.a)+1)-Ne-.5*ee*(Ne*Ne+q))/(this.es*Math.sin(2*mt)*(Ne*Ne+q-2*st*Ne)/(4*ee)+(st-Ne)*(ee*je-2/Math.sin(2*mt))-je),Math.abs(Wt)<=o){x=mt;break}ee=Math.sqrt(1-this.es*Math.pow(Math.sin(x),2))*Math.tan(x),d=Ue(this.long0+Math.asin(X*ee/this.a)/Math.sin(x))}return i.x=d,i.y=x,i},names:["Polyconic","poly"]},oi={init:function ni(){this.A=[],this.A[1]=.6399175073,this.A[2]=-.1358797613,this.A[3]=.063294409,this.A[4]=-.02526853,this.A[5]=.0117879,this.A[6]=-.0055161,this.A[7]=.0026906,this.A[8]=-.001333,this.A[9]=67e-5,this.A[10]=-34e-5,this.B_re=[],this.B_im=[],this.B_re[1]=.7557853228,this.B_im[1]=0,this.B_re[2]=.249204646,this.B_im[2]=.003371507,this.B_re[3]=-.001541739,this.B_im[3]=.04105856,this.B_re[4]=-.10162907,this.B_im[4]=.01727609,this.B_re[5]=-.26623489,this.B_im[5]=-.36249218,this.B_re[6]=-.6870983,this.B_im[6]=-1.1651967,this.C_re=[],this.C_im=[],this.C_re[1]=1.3231270439,this.C_im[1]=0,this.C_re[2]=-.577245789,this.C_im[2]=-.007809598,this.C_re[3]=.508307513,this.C_im[3]=-.112208952,this.C_re[4]=-.15094762,this.C_im[4]=.18200602,this.C_re[5]=1.01418179,this.C_im[5]=1.64497696,this.C_re[6]=1.9660549,this.C_im[6]=2.5127645,this.D=[],this.D[1]=1.5627014243,this.D[2]=.5185406398,this.D[3]=-.03333098,this.D[4]=-.1052906,this.D[5]=-.0368594,this.D[6]=.007317,this.D[7]=.0122,this.D[8]=.00394,this.D[9]=-.0013},forward:function ii(i){var d,st=(i.y-this.lat0)/p*1e-5,q=i.x-this.long0,mt=1,Wt=0;for(d=1;d<=10;d++)Wt+=this.A[d]*(mt*=st);var Ve,de=Wt,ee=q,be=1,je=0,$e=0,bi=0;for(d=1;d<=6;d++)Ve=je*de+be*ee,$e=$e+this.B_re[d]*(be=be*de-je*ee)-this.B_im[d]*(je=Ve),bi=bi+this.B_im[d]*be+this.B_re[d]*je;return i.x=bi*this.a+this.x0,i.y=$e*this.a+this.y0,i},inverse:function hi(i){var d,ee,st=(i.y-this.y0)/this.a,q=(i.x-this.x0)/this.a,mt=1,Wt=0,be=0,je=0;for(d=1;d<=6;d++)ee=Wt*st+mt*q,be=be+this.C_re[d]*(mt=mt*st-Wt*q)-this.C_im[d]*(Wt=ee),je=je+this.C_im[d]*mt+this.C_re[d]*Wt;for(var Ne=0;Ne<this.iterations;Ne++){var Gi,Ve=be,$e=je,ji=st,hn=q;for(d=2;d<=6;d++)Gi=$e*be+Ve*je,ji+=(d-1)*(this.B_re[d]*(Ve=Ve*be-$e*je)-this.B_im[d]*($e=Gi)),hn+=(d-1)*(this.B_im[d]*Ve+this.B_re[d]*$e);Ve=1,$e=0;var Qi=this.B_re[1],on=this.B_im[1];for(d=2;d<=6;d++)Gi=$e*be+Ve*je,Qi+=d*(this.B_re[d]*(Ve=Ve*be-$e*je)-this.B_im[d]*($e=Gi)),on+=d*(this.B_im[d]*Ve+this.B_re[d]*$e);var Kn=Qi*Qi+on*on;be=(ji*Qi+hn*on)/Kn,je=(hn*Qi-ji*on)/Kn}var vn=be,lr=je,ao=1,lo=0;for(d=1;d<=9;d++)lo+=this.D[d]*(ao*=vn);var ta=this.lat0+lo*p*1e5;return i.x=this.long0+lr,i.y=ta,i},names:["New_Zealand_Map_Grid","nzmg"]},Ni={init:function fi(){},forward:function Xi(i){var x=i.y,X=Ue(i.x-this.long0),G=this.x0+this.a*X,J=this.y0+this.a*Math.log(Math.tan(Math.PI/4+x/2.5))*1.25;return i.x=G,i.y=J,i},inverse:function Ji(i){i.x-=this.x0,i.y-=this.y0;var d=Ue(this.long0+i.x/this.a),x=2.5*(Math.atan(Math.exp(.8*i.y/this.a))-Math.PI/4);return i.x=d,i.y=x,i},names:["Miller_Cylindrical","mill"]},ro={init:function Jn(){this.sphere?(this.n=1,this.m=0,this.es=0,this.C_y=Math.sqrt((this.m+1)/this.n),this.C_x=this.C_y/(this.m+1)):this.en=Qe(this.es)},forward:function In(i){var d,x,X=i.x,G=i.y;if(X=Ue(X-this.long0),this.sphere){if(this.m)for(var J=this.n*Math.sin(G),st=20;st;--st){var q=(this.m*G+Math.sin(G)-J)/(this.m+Math.cos(G));if(G-=q,Math.abs(q)<o)break}else G=1!==this.n?Math.asin(this.n*Math.sin(G)):G;d=this.a*this.C_x*X*(this.m+Math.cos(G)),x=this.a*this.C_y*G}else{var mt=Math.sin(G),Wt=Math.cos(G);x=this.a*di(G,mt,Wt,this.en),d=this.a*X*Wt/Math.sqrt(1-this.es*mt*mt)}return i.x=d,i.y=x,i},inverse:function Sn(i){var d,X,G;return i.x-=this.x0,X=i.x/this.a,i.y-=this.y0,d=i.y/this.a,this.sphere?(d/=this.C_y,X/=this.C_x*(this.m+Math.cos(d)),this.m?d=qt((this.m*d+Math.sin(d))/this.n):1!==this.n&&(d=qt(Math.sin(d)/this.n)),X=Ue(X+this.long0),d=Dr(d)):(d=Zi(i.y/this.a,this.es,this.en),(G=Math.abs(d))<_?(G=Math.sin(d),X=Ue(this.long0+i.x*Math.sqrt(1-this.es*G*G)/(this.a*Math.cos(d)))):G-o<_&&(X=this.long0)),i.x=X,i.y=d,i},names:["Sinusoidal","sinu"]},Ho={init:function Qn(){},forward:function Ys(i){for(var x=i.y,X=Ue(i.x-this.long0),G=x,J=Math.PI*Math.sin(x);;){var st=-(G+Math.sin(G)-J)/(1+Math.cos(G));if(G+=st,Math.abs(st)<o)break}G/=2,Math.PI/2-Math.abs(x)<o&&(X=0);var q=.900316316158*this.a*X*Math.cos(G)+this.x0,mt=1.4142135623731*this.a*Math.sin(G)+this.y0;return i.x=q,i.y=mt,i},inverse:function Zo(i){var d,x;i.x-=this.x0,i.y-=this.y0,x=i.y/(1.4142135623731*this.a),Math.abs(x)>.999999999999&&(x=.999999999999),d=Math.asin(x);var X=Ue(this.long0+i.x/(.900316316158*this.a*Math.cos(d)));X<-Math.PI&&(X=-Math.PI),X>Math.PI&&(X=Math.PI),x=(2*d+Math.sin(2*d))/Math.PI,Math.abs(x)>1&&(x=1);var G=Math.asin(x);return i.x=X,i.y=G,i},names:["Mollweide","moll"]},aa={init:function Fo(){Math.abs(this.lat1+this.lat2)<o||(this.lat2=this.lat2||this.lat1,this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=Er(this.es),this.e1=Oo(this.es),this.e2=no(this.es),this.e3=xr(this.es),this.sinphi=Math.sin(this.lat1),this.cosphi=Math.cos(this.lat1),this.ms1=ai(this.e,this.sinphi,this.cosphi),this.ml1=os(this.e0,this.e1,this.e2,this.e3,this.lat1),Math.abs(this.lat1-this.lat2)<o?this.ns=this.sinphi:(this.sinphi=Math.sin(this.lat2),this.cosphi=Math.cos(this.lat2),this.ms2=ai(this.e,this.sinphi,this.cosphi),this.ml2=os(this.e0,this.e1,this.e2,this.e3,this.lat2),this.ns=(this.ms1-this.ms2)/(this.ml2-this.ml1)),this.g=this.ml1+this.ms1/this.ns,this.ml0=os(this.e0,this.e1,this.e2,this.e3,this.lat0),this.rh=this.a*(this.g-this.ml0))},forward:function oa(i){var X,d=i.x,x=i.y;if(this.sphere)X=this.a*(this.g-x);else{var G=os(this.e0,this.e1,this.e2,this.e3,x);X=this.a*(this.g-G)}var J=this.ns*Ue(d-this.long0),st=this.x0+X*Math.sin(J),q=this.y0+this.rh-X*Math.cos(J);return i.x=st,i.y=q,i},inverse:function No(i){var d,x,X,G;i.x-=this.x0,i.y=this.rh-i.y+this.y0,this.ns>=0?(x=Math.sqrt(i.x*i.x+i.y*i.y),d=1):(x=-Math.sqrt(i.x*i.x+i.y*i.y),d=-1);var J=0;return 0!==x&&(J=Math.atan2(d*i.x,d*i.y)),this.sphere?(G=Ue(this.long0+J/this.ns),X=Dr(this.g-x/this.a),i.x=G,i.y=X,i):(X=Xs(this.g-x/this.a,this.e0,this.e1,this.e2,this.e3),G=Ue(this.long0+J/this.ns),i.x=G,i.y=X,i)},names:["Equidistant_Conic","eqdc"]},ol={init:function sl(){this.R=this.a},forward:function ma(i){var G,J,x=i.y,X=Ue(i.x-this.long0);Math.abs(x)<=o&&(G=this.x0+this.R*X,J=this.y0);var st=qt(2*Math.abs(x/Math.PI));(Math.abs(X)<=o||Math.abs(Math.abs(x)-_)<=o)&&(G=this.x0,J=x>=0?this.y0+Math.PI*this.R*Math.tan(.5*st):this.y0+Math.PI*this.R*-Math.tan(.5*st));var q=.5*Math.abs(Math.PI/X-X/Math.PI),mt=q*q,Wt=Math.sin(st),de=Math.cos(st),ee=de/(Wt+de-1),je=ee*(2/Wt-1),Ne=je*je,Ve=Math.PI*this.R*(q*(ee-Ne)+Math.sqrt(mt*(ee-Ne)*(ee-Ne)-(Ne+mt)*(ee*ee-Ne)))/(Ne+mt);X<0&&(Ve=-Ve),G=this.x0+Ve;var $e=mt+ee;return Ve=Math.PI*this.R*(je*$e-q*Math.sqrt((Ne+mt)*(mt+1)-$e*$e))/(Ne+mt),J=x>=0?this.y0+Ve:this.y0-Ve,i.x=G,i.y=J,i},inverse:function rl(i){var d,x,X,G,J,st,q,mt,Wt,de,ee,be;return i.x-=this.x0,i.y-=this.y0,ee=Math.PI*this.R,J=(X=i.x/ee)*X+(G=i.y/ee)*G,ee=3*(G*G/(mt=-2*(st=-Math.abs(G)*(1+J))+1+2*G*G+J*J)+(2*(q=st-2*G*G+X*X)*q*q/mt/mt/mt-9*st*q/mt/mt)/27)/(Wt=(st-q*q/3/mt)/mt)/(de=2*Math.sqrt(-Wt/3)),Math.abs(ee)>1&&(ee=ee>=0?1:-1),be=Math.acos(ee)/3,x=i.y>=0?(-de*Math.cos(be+Math.PI/3)-q/3/mt)*Math.PI:-(-de*Math.cos(be+Math.PI/3)-q/3/mt)*Math.PI,d=Math.abs(X)<o?this.long0:Ue(this.long0+Math.PI*(J-1+Math.sqrt(1+2*(X*X-G*G)+J*J))/2/X),i.x=d,i.y=x,i},names:["Van_der_Grinten_I","VanDerGrinten","vandg"]},hl={init:function la(){this.sin_p12=Math.sin(this.lat0),this.cos_p12=Math.cos(this.lat0)},forward:function al(i){var st,q,mt,Wt,de,ee,be,je,Ne,Ve,$e,bi,Gi,ji,hn,Qi,on,Kn,vn,lr,ao,lo,d=i.x,x=i.y,X=Math.sin(i.y),G=Math.cos(i.y),J=Ue(d-this.long0);return this.sphere?Math.abs(this.sin_p12-1)<=o?(i.x=this.x0+this.a*(_-x)*Math.sin(J),i.y=this.y0-this.a*(_-x)*Math.cos(J),i):Math.abs(this.sin_p12+1)<=o?(i.x=this.x0+this.a*(_+x)*Math.sin(J),i.y=this.y0+this.a*(_+x)*Math.cos(J),i):(Kn=this.sin_p12*X+this.cos_p12*G*Math.cos(J),on=(Qi=Math.acos(Kn))?Qi/Math.sin(Qi):1,i.x=this.x0+this.a*on*G*Math.sin(J),i.y=this.y0+this.a*on*(this.cos_p12*X-this.sin_p12*G*Math.cos(J)),i):(st=Er(this.es),q=Oo(this.es),mt=no(this.es),Wt=xr(this.es),Math.abs(this.sin_p12-1)<=o?(de=this.a*os(st,q,mt,Wt,_),ee=this.a*os(st,q,mt,Wt,x),i.x=this.x0+(de-ee)*Math.sin(J),i.y=this.y0-(de-ee)*Math.cos(J),i):Math.abs(this.sin_p12+1)<=o?(de=this.a*os(st,q,mt,Wt,_),ee=this.a*os(st,q,mt,Wt,x),i.x=this.x0+(de+ee)*Math.sin(J),i.y=this.y0+(de+ee)*Math.cos(J),i):(be=X/G,je=Ts(this.a,this.e,this.sin_p12),Ne=Ts(this.a,this.e,X),Ve=Math.atan((1-this.es)*be+this.es*je*this.sin_p12/(Ne*G)),vn=0===($e=Math.atan2(Math.sin(J),this.cos_p12*Math.tan(Ve)-this.sin_p12*Math.cos(J)))?Math.asin(this.cos_p12*Math.sin(Ve)-this.sin_p12*Math.cos(Ve)):Math.abs(Math.abs($e)-Math.PI)<=o?-Math.asin(this.cos_p12*Math.sin(Ve)-this.sin_p12*Math.cos(Ve)):Math.asin(Math.sin(J)*Math.cos(Ve)/Math.sin($e)),bi=this.e*this.sin_p12/Math.sqrt(1-this.es),Gi=this.e*this.cos_p12*Math.cos($e)/Math.sqrt(1-this.es),i.x=this.x0+(Qi=je*vn*(1-(lr=vn*vn)*(hn=Gi*Gi)*(1-hn)/6+(ao=lr*vn)/8*(ji=bi*Gi)*(1-2*hn)+(lo=ao*vn)/120*(hn*(4-7*hn)-3*bi*bi*(1-7*hn))-lo*vn/48*ji))*Math.sin($e),i.y=this.y0+Qi*Math.cos($e),i))},inverse:function Oa(i){var d,x,X,G,J,st,q,mt,Wt,de,ee,be,Ne,Ve,$e,bi,Gi,ji,hn,Qi,on,Kn,vn;return i.x-=this.x0,i.y-=this.y0,this.sphere?(d=Math.sqrt(i.x*i.x+i.y*i.y))>2*_*this.a?void 0:(x=d/this.a,X=Math.sin(x),G=Math.cos(x),J=this.long0,Math.abs(d)<=o?st=this.lat0:(st=qt(G*this.sin_p12+i.y*X*this.cos_p12/d),q=Math.abs(this.lat0)-_,J=Math.abs(q)<=o?Ue(this.lat0>=0?this.long0+Math.atan2(i.x,-i.y):this.long0-Math.atan2(-i.x,i.y)):Ue(this.long0+Math.atan2(i.x*X,d*this.cos_p12*G-i.y*this.sin_p12*X))),i.x=J,i.y=st,i):(mt=Er(this.es),Wt=Oo(this.es),de=no(this.es),ee=xr(this.es),Math.abs(this.sin_p12-1)<=o?(st=Xs(((be=this.a*os(mt,Wt,de,ee,_))-(d=Math.sqrt(i.x*i.x+i.y*i.y)))/this.a,mt,Wt,de,ee),J=Ue(this.long0+Math.atan2(i.x,-1*i.y)),i.x=J,i.y=st,i):Math.abs(this.sin_p12+1)<=o?(be=this.a*os(mt,Wt,de,ee,_),st=Xs(((d=Math.sqrt(i.x*i.x+i.y*i.y))-be)/this.a,mt,Wt,de,ee),J=Ue(this.long0+Math.atan2(i.x,i.y)),i.x=J,i.y=st,i):(d=Math.sqrt(i.x*i.x+i.y*i.y),$e=Math.atan2(i.x,i.y),Ne=Ts(this.a,this.e,this.sin_p12),bi=Math.cos($e),hn=3*this.es*(1-(ji=-(Gi=this.e*this.cos_p12*bi)*Gi/(1-this.es)))*this.sin_p12*this.cos_p12*bi/(1-this.es),Kn=1-ji*(on=(Qi=d/Ne)-ji*(1+ji)*Math.pow(Qi,3)/6-hn*(1+3*ji)*Math.pow(Qi,4)/24)*on/2-Qi*on*on*on/6,Ve=Math.asin(this.sin_p12*Math.cos(on)+this.cos_p12*Math.sin(on)*bi),J=Ue(this.long0+Math.asin(Math.sin($e)*Math.sin(on)/Math.cos(Ve))),vn=Math.sin(Ve),st=Math.atan2((vn-this.es*Kn*this.sin_p12)*Math.tan(Ve),vn*(1-this.es)),i.x=J,i.y=st,i))},names:["Azimuthal_Equidistant","aeqd"]},Da={init:function cl(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0)},forward:function ul(i){var d,x,X,G,st,q,mt,de=i.y;return X=Ue(i.x-this.long0),d=Math.sin(de),x=Math.cos(de),G=Math.cos(X),((st=this.sin_p14*d+this.cos_p14*x*G)>0||Math.abs(st)<=o)&&(q=1*this.a*x*Math.sin(X),mt=this.y0+1*this.a*(this.cos_p14*d-this.sin_p14*x*G)),i.x=q,i.y=mt,i},inverse:function dl(i){var d,x,X,G,J,st,q;return i.x-=this.x0,i.y-=this.y0,x=qt((d=Math.sqrt(i.x*i.x+i.y*i.y))/this.a),X=Math.sin(x),G=Math.cos(x),st=this.long0,Math.abs(d)<=o?(q=this.lat0,i.x=st,i.y=q,i):(q=qt(G*this.sin_p14+i.y*X*this.cos_p14/d),J=Math.abs(this.lat0)-_,Math.abs(J)<=o?(st=Ue(this.lat0>=0?this.long0+Math.atan2(i.x,-i.y):this.long0-Math.atan2(-i.x,i.y)),i.x=st,i.y=q,i):(st=Ue(this.long0+Math.atan2(i.x*X,d*this.cos_p14*G-i.y*this.sin_p14*X)),i.x=st,i.y=q,i))},names:["ortho"]};var _n_AREA_0=1,_n_AREA_1=2,_n_AREA_2=3,_n_AREA_3=4;function Vr(i,d,x,X){var G;return i<o?(X.value=_n_AREA_0,G=0):(G=Math.atan2(d,x),Math.abs(G)<=a?X.value=_n_AREA_0:G>a&&G<=_+a?(X.value=_n_AREA_1,G-=_):G>_+a||G<=-(_+a)?(X.value=_n_AREA_2,G=G>=0?G-y:G+y):(X.value=_n_AREA_3,G+=_)),G}function Uo(i,d){var x=i+d;return x<-y?x+=C:x>+y&&(x-=C),x}const yl={init:function gl(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Quadrilateralized Spherical Cube",this.face=this.lat0>=_-a/2?5:this.lat0<=-(_-a/2)?6:Math.abs(this.long0)<=a?1:Math.abs(this.long0)<=_+a?this.long0>0?2:4:3,0!==this.es&&(this.one_minus_f=1-(this.a-this.b)/this.a,this.one_minus_f_squared=this.one_minus_f*this.one_minus_f)},forward:function _l(i){var x,X,G,J,st,q,d={x:0,y:0},mt={value:0};if(i.x-=this.long0,x=0!==this.es?Math.atan(this.one_minus_f_squared*Math.tan(i.y)):i.y,X=i.x,5===this.face)J=_-x,X>=a&&X<=_+a?(mt.value=_n_AREA_0,G=X-_):X>_+a||X<=-(_+a)?(mt.value=_n_AREA_1,G=X>0?X-y:X+y):X>-(_+a)&&X<=-a?(mt.value=_n_AREA_2,G=X+_):(mt.value=_n_AREA_3,G=X);else if(6===this.face)J=_+x,X>=a&&X<=_+a?(mt.value=_n_AREA_0,G=-X+_):X<a&&X>=-a?(mt.value=_n_AREA_1,G=-X):X<-a&&X>=-(_+a)?(mt.value=_n_AREA_2,G=-X-_):(mt.value=_n_AREA_3,G=X>0?-X+y:-X-y);else{var Wt,de,ee,be,je,Ne;2===this.face?X=Uo(X,+_):3===this.face?X=Uo(X,+y):4===this.face&&(X=Uo(X,-_)),be=Math.sin(x),je=Math.cos(x),Ne=Math.sin(X),Wt=je*Math.cos(X),de=je*Ne,ee=be,1===this.face?G=Vr(J=Math.acos(Wt),ee,de,mt):2===this.face?G=Vr(J=Math.acos(de),ee,-Wt,mt):3===this.face?G=Vr(J=Math.acos(-Wt),ee,-de,mt):4===this.face?G=Vr(J=Math.acos(-de),ee,Wt,mt):(J=G=0,mt.value=_n_AREA_0)}return q=Math.atan(12/y*(G+Math.acos(Math.sin(G)*Math.cos(a))-_)),st=Math.sqrt((1-Math.cos(J))/(Math.cos(q)*Math.cos(q))/(1-Math.cos(Math.atan(1/Math.cos(G))))),mt.value===_n_AREA_1?q+=_:mt.value===_n_AREA_2?q+=y:mt.value===_n_AREA_3&&(q+=1.5*y),d.x=st*Math.cos(q),d.y=st*Math.sin(q),d.x=d.x*this.a+this.x0,d.y=d.y*this.a+this.y0,i.x=d.x,i.y=d.y,i},inverse:function ml(i){var x,X,G,J,st,q,mt,Wt,de,Ve,$e,bi,d={lam:0,phi:0},ee={value:0};if(i.x=(i.x-this.x0)/this.a,i.y=(i.y-this.y0)/this.a,X=Math.atan(Math.sqrt(i.x*i.x+i.y*i.y)),x=Math.atan2(i.y,i.x),i.x>=0&&i.x>=Math.abs(i.y)?ee.value=_n_AREA_0:i.y>=0&&i.y>=Math.abs(i.x)?(ee.value=_n_AREA_1,x-=_):i.x<0&&-i.x>=Math.abs(i.y)?(ee.value=_n_AREA_2,x=x<0?x+y:x-y):(ee.value=_n_AREA_3,x+=_),de=y/12*Math.tan(x),st=Math.sin(de)/(Math.cos(de)-1/Math.sqrt(2)),q=Math.atan(st),(mt=1-(G=Math.cos(x))*G*(J=Math.tan(X))*J*(1-Math.cos(Math.atan(1/Math.cos(q)))))<-1?mt=-1:mt>1&&(mt=1),5===this.face)Wt=Math.acos(mt),d.phi=_-Wt,d.lam=ee.value===_n_AREA_0?q+_:ee.value===_n_AREA_1?q<0?q+y:q-y:ee.value===_n_AREA_2?q-_:q;else if(6===this.face)Wt=Math.acos(mt),d.phi=Wt-_,d.lam=ee.value===_n_AREA_0?-q+_:ee.value===_n_AREA_1?-q:ee.value===_n_AREA_2?-q-_:q<0?-q-y:-q+y;else{var be,je,Ne;de=(be=mt)*be,je=(de+=(Ne=de>=1?0:Math.sqrt(1-de)*Math.sin(q))*Ne)>=1?0:Math.sqrt(1-de),ee.value===_n_AREA_1?(de=je,je=-Ne,Ne=de):ee.value===_n_AREA_2?(je=-je,Ne=-Ne):ee.value===_n_AREA_3&&(de=je,je=Ne,Ne=-de),2===this.face?(de=be,be=-je,je=de):3===this.face?(be=-be,je=-je):4===this.face&&(de=be,be=je,je=-de),d.phi=Math.acos(-Ne)-_,d.lam=Math.atan2(je,be),2===this.face?d.lam=Uo(d.lam,-_):3===this.face?d.lam=Uo(d.lam,-y):4===this.face&&(d.lam=Uo(d.lam,+_))}return 0!==this.es&&(Ve=d.phi<0?1:0,$e=Math.tan(d.phi),bi=this.b/Math.sqrt($e*$e+this.one_minus_f_squared),d.phi=Math.atan(Math.sqrt(this.a*this.a-bi*bi)/(this.one_minus_f*bi)),Ve&&(d.phi=-d.phi)),d.lam+=this.long0,i.x=d.lam,i.y=d.phi,i},names:["Quadrilateralized Spherical Cube","Quadrilateralized_Spherical_Cube","qsc"]};var ya=[[1,22199e-21,-715515e-10,31103e-10],[.9986,-482243e-9,-24897e-9,-13309e-10],[.9954,-83103e-8,-448605e-10,-9.86701e-7],[.99,-.00135364,-59661e-9,36777e-10],[.9822,-.00167442,-449547e-11,-572411e-11],[.973,-.00214868,-903571e-10,1.8736e-8],[.96,-.00305085,-900761e-10,164917e-11],[.9427,-.00382792,-653386e-10,-26154e-10],[.9216,-.00467746,-10457e-8,481243e-11],[.8962,-.00536223,-323831e-10,-543432e-11],[.8679,-.00609363,-113898e-9,332484e-11],[.835,-.00698325,-640253e-10,9.34959e-7],[.7986,-.00755338,-500009e-10,9.35324e-7],[.7597,-.00798324,-35971e-9,-227626e-11],[.7186,-.00851367,-701149e-10,-86303e-10],[.6732,-.00986209,-199569e-9,191974e-10],[.6213,-.010418,883923e-10,624051e-11],[.5722,-.00906601,182e-6,624051e-11],[.5322,-.00677797,275608e-9,624051e-11]],$o=[[-520417e-23,.0124,121431e-23,-845284e-16],[.062,.0124,-1.26793e-9,4.22642e-10],[.124,.0124,5.07171e-9,-1.60604e-9],[.186,.0123999,-1.90189e-8,6.00152e-9],[.248,.0124002,7.10039e-8,-2.24e-8],[.31,.0123992,-2.64997e-7,8.35986e-8],[.372,.0124029,9.88983e-7,-3.11994e-7],[.434,.0123893,-369093e-11,-4.35621e-7],[.4958,.0123198,-102252e-10,-3.45523e-7],[.5571,.0121916,-154081e-10,-5.82288e-7],[.6176,.0119938,-241424e-10,-5.25327e-7],[.6769,.011713,-320223e-10,-5.16405e-7],[.7346,.0113541,-397684e-10,-6.09052e-7],[.7903,.0109107,-489042e-10,-104739e-11],[.8435,.0103431,-64615e-9,-1.40374e-9],[.8936,.00969686,-64636e-9,-8547e-9],[.9394,.00840947,-192841e-9,-42106e-10],[.9761,.00616527,-256e-6,-42106e-10],[1,.00328947,-319159e-9,-42106e-10]],ca=g/5,vl=1/ca,Jo=function(i,d){return i[0]+d*(i[1]+d*(i[2]+d*i[3]))};const jo={init:function El(){this.x0=this.x0||0,this.y0=this.y0||0,this.long0=this.long0||0,this.es=0,this.title=this.title||"Robinson"},forward:function xo(i){var d=Ue(i.x-this.long0),x=Math.abs(i.y),X=Math.floor(x*ca);X<0?X=0:X>=18&&(X=17);var G={x:Jo(ya[X],x=g*(x-vl*X))*d,y:Jo($o[X],x)};return i.y<0&&(G.y=-G.y),G.x=G.x*this.a*.8487+this.x0,G.y=G.y*this.a*1.3523+this.y0,G},inverse:function Na(i){var d={x:(i.x-this.x0)/(.8487*this.a),y:Math.abs(i.y-this.y0)/(1.3523*this.a)};if(d.y>=1)d.x/=ya[18][0],d.y=i.y<0?-_:_;else{var x=Math.floor(18*d.y);for(x<0?x=0:x>=18&&(x=17);;)if($o[x][0]>d.y)--x;else{if(!($o[x+1][0]<=d.y))break;++x}var X=$o[x],G=5*(d.y-X[0])/($o[x+1][0]-X[0]);G=function va(i,d,x,X){for(var G=d;X;--X){var J=i(G);if(G-=J,Math.abs(J)<x)break}return G}(function(J){return(Jo(X,J)-d.y)/function(i,d){return i[1]+d*(2*i[2]+3*d*i[3])}(X,J)},G,o,100),d.x/=Jo(ya[x],G),d.y=(5*x+G)*f,i.y<0&&(d.y=-d.y)}return d.x=Ue(d.x+this.long0),d},names:["Robinson","robin"]},Tl={init:function xl(){this.name="geocent"},forward:function Ml(i){return Ns(i,this.es,this.a)},inverse:function Al(i){return Pr(i,this.es,this.a,this.b)},names:["Geocentric","geocentric","geocent","Geocent"]};var Mo={h:{def:1e5,num:!0},azi:{def:0,num:!0,degrees:!0},tilt:{def:0,num:!0,degrees:!0},long0:{def:0,num:!0},lat0:{def:0,num:!0}};const Pl={init:function ja(){if(Object.keys(Mo).forEach(function(x){if(typeof this[x]>"u")this[x]=Mo[x].def;else{if(Mo[x].num&&isNaN(this[x]))throw new Error("Invalid parameter value, must be numeric "+x+" = "+this[x]);Mo[x].num&&(this[x]=parseFloat(this[x]))}Mo[x].degrees&&(this[x]=this[x]*f)}.bind(this)),Math.abs(Math.abs(this.lat0)-_)<o?this.mode=this.lat0<0?1:0:Math.abs(this.lat0)<o?this.mode=2:(this.mode=3,this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0)),this.pn1=this.h/this.a,this.pn1<=0||this.pn1>1e10)throw new Error("Invalid height");this.p=1+this.pn1,this.rp=1/this.p,this.h1=1/this.pn1,this.pfact=(this.p+1)*this.h1,this.es=0;var i=this.tilt,d=this.azi;this.cg=Math.cos(d),this.sg=Math.sin(d),this.cw=Math.cos(i),this.sw=Math.sin(i)},forward:function Ba(i){i.x-=this.long0;var G,J,st,q,d=Math.sin(i.y),x=Math.cos(i.y),X=Math.cos(i.x);switch(this.mode){case 3:J=this.sinph0*d+this.cosph0*x*X;break;case 2:J=x*X;break;case 1:J=-d;break;case 0:J=d}switch(G=(J=this.pn1/(this.p-J))*x*Math.sin(i.x),this.mode){case 3:J*=this.cosph0*d-this.sinph0*x*X;break;case 2:J*=d;break;case 0:J*=-x*X;break;case 1:J*=x*X}return G=(G*this.cg-J*this.sg)*this.cw*(q=1/((st=J*this.cg+G*this.sg)*this.sw*this.h1+this.cw)),J=st*q,i.x=G*this.a,i.y=J*this.a,i},inverse:function Cl(i){i.x/=this.a,i.y/=this.a;var x,X,G,d={x:i.x,y:i.y};i.x=(x=this.pn1*i.x*(G=1/(this.pn1-i.y*this.sw)))*this.cg+(X=this.pn1*i.y*this.cw*G)*this.sg,i.y=X*this.cg-x*this.sg;var J=Wi(i.x,i.y);if(Math.abs(J)<o)d.x=0,d.y=i.y;else{var st,q;switch(q=1-J*J*this.pfact,q=(this.p-Math.sqrt(q))/(this.pn1/J+J/this.pn1),st=Math.sqrt(1-q*q),this.mode){case 3:d.y=Math.asin(st*this.sinph0+i.y*q*this.cosph0/J),i.y=(st-this.sinph0*Math.sin(d.y))*J,i.x*=q*this.cosph0;break;case 2:d.y=Math.asin(i.y*q/J),i.y=st*J,i.x*=q;break;case 0:d.y=Math.asin(st),i.y=-i.y;break;case 1:d.y=-Math.asin(st)}d.x=Math.atan2(i.x,i.y)}return i.x=d.x+this.long0,i.y=d.y,i},names:["Tilted_Perspective","tpers"]},ka={init:function Rl(){if(this.flip_axis="x"===this.sweep?1:0,this.h=Number(this.h),this.radius_g_1=this.h/this.a,this.radius_g_1<=0||this.radius_g_1>1e10)throw new Error;if(this.radius_g=1+this.radius_g_1,this.C=this.radius_g*this.radius_g-1,0!==this.es){var i=1-this.es,d=1/i;this.radius_p=Math.sqrt(i),this.radius_p2=i,this.radius_p_inv2=d,this.shape="ellipse"}else this.radius_p=1,this.radius_p2=1,this.radius_p_inv2=1,this.shape="sphere";this.title||(this.title="Geostationary Satellite View")},forward:function bl(i){var X,G,J,st,d=i.x,x=i.y;if(d-=this.long0,"ellipse"===this.shape){x=Math.atan(this.radius_p2*Math.tan(x));var q=this.radius_p/Wi(this.radius_p*Math.cos(x),Math.sin(x));if(G=q*Math.cos(d)*Math.cos(x),J=q*Math.sin(d)*Math.cos(x),st=q*Math.sin(x),(this.radius_g-G)*G-J*J-st*st*this.radius_p_inv2<0)return i.x=Number.NaN,i.y=Number.NaN,i;X=this.radius_g-G,this.flip_axis?(i.x=this.radius_g_1*Math.atan(J/Wi(st,X)),i.y=this.radius_g_1*Math.atan(st/X)):(i.x=this.radius_g_1*Math.atan(J/X),i.y=this.radius_g_1*Math.atan(st/Wi(J,X)))}else"sphere"===this.shape&&(X=Math.cos(x),G=Math.cos(d)*X,J=Math.sin(d)*X,st=Math.sin(x),X=this.radius_g-G,this.flip_axis?(i.x=this.radius_g_1*Math.atan(J/Wi(st,X)),i.y=this.radius_g_1*Math.atan(st/X)):(i.x=this.radius_g_1*Math.atan(J/X),i.y=this.radius_g_1*Math.atan(st/Wi(J,X))));return i.x=i.x*this.a,i.y=i.y*this.a,i},inverse:function xa(i){var G,J,st,q,d=-1,x=0,X=0;if(i.x=i.x/this.a,i.y=i.y/this.a,"ellipse"===this.shape){this.flip_axis?(X=Math.tan(i.y/this.radius_g_1),x=Math.tan(i.x/this.radius_g_1)*Wi(1,X)):(x=Math.tan(i.x/this.radius_g_1),X=Math.tan(i.y/this.radius_g_1)*Wi(1,x));var mt=X/this.radius_p;if((st=(J=2*this.radius_g*d)*J-4*(G=x*x+mt*mt+d*d)*this.C)<0)return i.x=Number.NaN,i.y=Number.NaN,i;q=(-J-Math.sqrt(st))/(2*G),d=this.radius_g+q*d,x*=q,X*=q,i.x=Math.atan2(x,d),i.y=Math.atan(X*Math.cos(i.x)/d),i.y=Math.atan(this.radius_p_inv2*Math.tan(i.y))}else if("sphere"===this.shape){if(this.flip_axis?(X=Math.tan(i.y/this.radius_g_1),x=Math.tan(i.x/this.radius_g_1)*Math.sqrt(1+X*X)):(x=Math.tan(i.x/this.radius_g_1),X=Math.tan(i.y/this.radius_g_1)*Math.sqrt(1+x*x)),(st=(J=2*this.radius_g*d)*J-4*(G=x*x+X*X+d*d)*this.C)<0)return i.x=Number.NaN,i.y=Number.NaN,i;q=(-J-Math.sqrt(st))/(2*G),d=this.radius_g+q*d,x*=q,X*=q,i.x=Math.atan2(x,d),i.y=Math.atan(X*Math.cos(i.x)/d)}return i.x=i.x+this.long0,i},names:["Geostationary Satellite View","Geostationary_Satellite","geos"]};var Qo=1.340264,qo=-.081106,Bo=893e-6,Wo=.003796,Yr=Math.sqrt(3)/2;const Ga={init:function wl(){this.es=0,this.long0=void 0!==this.long0?this.long0:0},forward:function Il(i){var d=Ue(i.x-this.long0),X=Math.asin(Yr*Math.sin(i.y)),G=X*X,J=G*G*G;return i.x=d*Math.cos(X)/(Yr*(Qo+3*qo*G+J*(7*Bo+9*Wo*G))),i.y=X*(Qo+qo*G+J*(Bo+Wo*G)),i.x=this.a*i.x+this.x0,i.y=this.a*i.y+this.y0,i},inverse:function Sl(i){i.x=(i.x-this.x0)/this.a,i.y=(i.y-this.y0)/this.a;var G,J,mt,Wt,X=i.y;for(Wt=0;Wt<12&&(X-=mt=(X*(Qo+qo*(G=X*X)+(J=G*G*G)*(Bo+Wo*G))-i.y)/(Qo+3*qo*G+J*(7*Bo+9*Wo*G)),!(Math.abs(mt)<1e-9));++Wt);return i.x=Yr*i.x*(Qo+3*qo*(G=X*X)+(J=G*G*G)*(7*Bo+9*Wo*G))/Math.cos(X),i.y=Math.asin(Math.sin(X)/Yr),i.x=Ue(i.x+this.long0),i},names:["eqearth","Equal Earth","Equal_Earth"]};var oo=1e-10;function Dl(i){var X,G,J,d=Ue(i.x-(this.long0||0)),x=i.y;return X=this.am1+this.m1-di(x,G=Math.sin(x),J=Math.cos(x),this.en),G=J*d/(X*Math.sqrt(1-this.es*G*G)),i.x=X*Math.sin(G),i.y=this.am1-X*Math.cos(G),i.x=this.a*i.x+(this.x0||0),i.y=this.a*i.y+(this.y0||0),i}function za(i){var d,x,X,G;if(i.x=(i.x-(this.x0||0))/this.a,i.y=(i.y-(this.y0||0))/this.a,x=Wi(i.x,i.y=this.am1-i.y),G=Zi(this.am1+this.m1-x,this.es,this.en),(d=Math.abs(G))<_)d=Math.sin(G),X=x*Math.atan2(i.x,i.y)*Math.sqrt(1-this.es*d*d)/Math.cos(G);else{if(!(Math.abs(d-_)<=oo))throw new Error;X=0}return i.x=Ue(X+(this.long0||0)),i.y=Dr(G),i}function Ka(i){var X,G,d=Ue(i.x-(this.long0||0)),x=i.y;return G=this.cphi1+this.phi1-x,Math.abs(G)>oo?(i.x=G*Math.sin(X=d*Math.cos(x)/G),i.y=this.cphi1-G*Math.cos(X)):i.x=i.y=0,i.x=this.a*i.x+(this.x0||0),i.y=this.a*i.y+(this.y0||0),i}function da(i){i.x=(i.x-(this.x0||0))/this.a,i.y=(i.y-(this.y0||0))/this.a;var d,x,X=Wi(i.x,i.y=this.cphi1-i.y);if(x=this.cphi1+this.phi1-X,Math.abs(x)>_)throw new Error;return d=Math.abs(Math.abs(x)-_)<=oo?0:X*Math.atan2(i.x,i.y)/Math.cos(x),i.x=Ue(d+(this.long0||0)),i.y=Dr(x),i}const Fl={init:function Ma(){var i;if(this.phi1=this.lat1,Math.abs(this.phi1)<oo)throw new Error;this.es?(this.en=Qe(this.es),this.m1=di(this.phi1,this.am1=Math.sin(this.phi1),i=Math.cos(this.phi1),this.en),this.am1=i/(Math.sqrt(1-this.es*this.am1*this.am1)*this.am1),this.inverse=za,this.forward=Dl):(this.cphi1=Math.abs(this.phi1)+oo>=_?0:1/Math.tan(this.phi1),this.inverse=da,this.forward=Ka)},names:["bonne","Bonne (Werner lat_1=90)"]};nn.defaultDatum="WGS84",nn.Proj=Ms,nn.WGS84=new nn.Proj("WGS84"),nn.Point=zn,nn.toPoint=kr,nn.defs=ge,nn.nadgrid=function hs(i,d){var x=new DataView(d),X=function Ds(i){var d=i.getInt32(8,!1);return 11!==d&&(11!==(d=i.getInt32(8,!0))&&console.warn("Failed to detect nadgrid endian-ness, defaulting to little-endian"),!0)}(x),G=function Ls(i,d){return{nFields:i.getInt32(8,d),nSubgridFields:i.getInt32(24,d),nSubgrids:i.getInt32(40,d),shiftType:dr(i,56,64).trim(),fromSemiMajorAxis:i.getFloat64(120,d),fromSemiMinorAxis:i.getFloat64(136,d),toSemiMajorAxis:i.getFloat64(152,d),toSemiMinorAxis:i.getFloat64(168,d)}}(x,X),J=function Rs(i,d,x){for(var X=176,G=[],J=0;J<d.nSubgrids;J++){var st=$r(i,X,x),q=Fe(i,X,st,x),mt=Math.round(1+(st.upperLongitude-st.lowerLongitude)/st.longitudeInterval),Wt=Math.round(1+(st.upperLatitude-st.lowerLatitude)/st.latitudeInterval);G.push({ll:[Ii(st.lowerLongitude),Ii(st.lowerLatitude)],del:[Ii(st.longitudeInterval),Ii(st.latitudeInterval)],lim:[mt,Wt],count:st.gridNodeCount,cvs:tr(q)}),X+=176+16*st.gridNodeCount}return G}(x,G,X),st={header:G,subgrids:J};return Os[i]=st,st},nn.transform=Ei,nn.mgrs=wr,nn.version="__VERSION__",function Xa(i){i.Proj.projections.add(Is),i.Proj.projections.add(we),i.Proj.projections.add($i),i.Proj.projections.add(Pi),i.Proj.projections.add(un),i.Proj.projections.add(Xo),i.Proj.projections.add(io),i.Proj.projections.add(Vo),i.Proj.projections.add(So),i.Proj.projections.add(vo),i.Proj.projections.add(bt),i.Proj.projections.add(xe),i.Proj.projections.add(he),i.Proj.projections.add(Qt),i.Proj.projections.add(kt),i.Proj.projections.add(Ke),i.Proj.projections.add(oi),i.Proj.projections.add(Ni),i.Proj.projections.add(ro),i.Proj.projections.add(Ho),i.Proj.projections.add(aa),i.Proj.projections.add(ol),i.Proj.projections.add(hl),i.Proj.projections.add(Da),i.Proj.projections.add(yl),i.Proj.projections.add(jo),i.Proj.projections.add(Tl),i.Proj.projections.add(Pl),i.Proj.projections.add(ka),i.Proj.projections.add(Ga),i.Proj.projections.add(Fl)}(nn);const Va=nn},2593:function(ce){ce.exports=function(){"use strict";function gt(o,f,g,a,C){!function y(v,U,w,z,I){for(;z>w;){if(z-w>600){var P=z-w+1,j=U-w+1,Y=Math.log(P),T=.5*Math.exp(2*Y/3),O=.5*Math.sqrt(Y*T*(P-T)/P)*(j-P/2<0?-1:1);y(v,U,Math.max(w,Math.floor(U-j*T/P+O)),Math.min(z,Math.floor(U+(P-j)*T/P+O)),I)}var M=v[U],D=w,H=z;for(c(v,w,U),I(v[z],M)>0&&c(v,w,z);D<H;){for(c(v,D,H),D++,H--;I(v[D],M)<0;)D++;for(;I(v[H],M)>0;)H--}0===I(v[w],M)?c(v,w,H):c(v,++H,z),H<=U&&(w=H+1),U<=H&&(z=H-1)}}(o,f,g||0,a||o.length-1,C||V)}function c(o,f,g){var a=o[f];o[f]=o[g],o[g]=a}function V(o,f){return o<f?-1:o>f?1:0}var K=function(o){void 0===o&&(o=9),this._maxEntries=Math.max(4,o),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function $(o,f,g){if(!g)return f.indexOf(o);for(var a=0;a<f.length;a++)if(g(o,f[a]))return a;return-1}function Z(o,f){L(o,0,o.children.length,f,o)}function L(o,f,g,a,C){C||(C=r(null)),C.minX=1/0,C.minY=1/0,C.maxX=-1/0,C.maxY=-1/0;for(var y=f;y<g;y++){var v=o.children[y];b(C,o.leaf?a(v):v)}return C}function b(o,f){return o.minX=Math.min(o.minX,f.minX),o.minY=Math.min(o.minY,f.minY),o.maxX=Math.max(o.maxX,f.maxX),o.maxY=Math.max(o.maxY,f.maxY),o}function B(o,f){return o.minX-f.minX}function F(o,f){return o.minY-f.minY}function E(o){return(o.maxX-o.minX)*(o.maxY-o.minY)}function p(o){return o.maxX-o.minX+(o.maxY-o.minY)}function _(o,f){return o.minX<=f.minX&&o.minY<=f.minY&&f.maxX<=o.maxX&&f.maxY<=o.maxY}function h(o,f){return f.minX<=o.maxX&&f.minY<=o.maxY&&f.maxX>=o.minX&&f.maxY>=o.minY}function r(o){return{children:o,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function u(o,f,g,a,C){for(var y=[f,g];y.length;)if(!((g=y.pop())-(f=y.pop())<=a)){var v=f+Math.ceil((g-f)/a/2)*a;gt(o,v,f,g,C),y.push(f,v,v,g)}}return K.prototype.all=function(){return this._all(this.data,[])},K.prototype.search=function(o){var f=this.data,g=[];if(!h(o,f))return g;for(var a=this.toBBox,C=[];f;){for(var y=0;y<f.children.length;y++){var v=f.children[y],U=f.leaf?a(v):v;h(o,U)&&(f.leaf?g.push(v):_(o,U)?this._all(v,g):C.push(v))}f=C.pop()}return g},K.prototype.collides=function(o){var f=this.data;if(!h(o,f))return!1;for(var g=[];f;){for(var a=0;a<f.children.length;a++){var C=f.children[a],y=f.leaf?this.toBBox(C):C;if(h(o,y)){if(f.leaf||_(o,y))return!0;g.push(C)}}f=g.pop()}return!1},K.prototype.load=function(o){if(!o||!o.length)return this;if(o.length<this._minEntries){for(var f=0;f<o.length;f++)this.insert(o[f]);return this}var g=this._build(o.slice(),0,o.length-1,0);if(this.data.children.length)if(this.data.height===g.height)this._splitRoot(this.data,g);else{if(this.data.height<g.height){var a=this.data;this.data=g,g=a}this._insert(g,this.data.height-g.height-1,!0)}else this.data=g;return this},K.prototype.insert=function(o){return o&&this._insert(o,this.data.height-1),this},K.prototype.clear=function(){return this.data=r([]),this},K.prototype.remove=function(o,f){if(!o)return this;for(var g,a,C,y=this.data,v=this.toBBox(o),U=[],w=[];y||U.length;){if(y||(y=U.pop(),a=U[U.length-1],g=w.pop(),C=!0),y.leaf){var z=$(o,y.children,f);if(-1!==z)return y.children.splice(z,1),U.push(y),this._condense(U),this}C||y.leaf||!_(y,v)?a?(g++,y=a.children[g],C=!1):y=null:(U.push(y),w.push(g),g=0,a=y,y=y.children[0])}return this},K.prototype.toBBox=function(o){return o},K.prototype.compareMinX=function(o,f){return o.minX-f.minX},K.prototype.compareMinY=function(o,f){return o.minY-f.minY},K.prototype.toJSON=function(){return this.data},K.prototype.fromJSON=function(o){return this.data=o,this},K.prototype._all=function(o,f){for(var g=[];o;)o.leaf?f.push.apply(f,o.children):g.push.apply(g,o.children),o=g.pop();return f},K.prototype._build=function(o,f,g,a){var C,y=g-f+1,v=this._maxEntries;if(y<=v)return Z(C=r(o.slice(f,g+1)),this.toBBox),C;a||(a=Math.ceil(Math.log(y)/Math.log(v)),v=Math.ceil(y/Math.pow(v,a-1))),(C=r([])).leaf=!1,C.height=a;var U=Math.ceil(y/v),w=U*Math.ceil(Math.sqrt(v));u(o,f,g,w,this.compareMinX);for(var z=f;z<=g;z+=w){var I=Math.min(z+w-1,g);u(o,z,I,U,this.compareMinY);for(var P=z;P<=I;P+=U){var j=Math.min(P+U-1,I);C.children.push(this._build(o,P,j,a-1))}}return Z(C,this.toBBox),C},K.prototype._chooseSubtree=function(o,f,g,a){for(;a.push(f),!f.leaf&&a.length-1!==g;){for(var C=1/0,y=1/0,v=void 0,U=0;U<f.children.length;U++){var w=f.children[U],z=E(w),I=(P=o,j=w,(Math.max(j.maxX,P.maxX)-Math.min(j.minX,P.minX))*(Math.max(j.maxY,P.maxY)-Math.min(j.minY,P.minY))-z);I<y?(y=I,C=z<C?z:C,v=w):I===y&&z<C&&(C=z,v=w)}f=v||f.children[0]}var P,j;return f},K.prototype._insert=function(o,f,g){var a=g?o:this.toBBox(o),C=[],y=this._chooseSubtree(a,this.data,f,C);for(y.children.push(o),b(y,a);f>=0&&C[f].children.length>this._maxEntries;)this._split(C,f),f--;this._adjustParentBBoxes(a,C,f)},K.prototype._split=function(o,f){var g=o[f],a=g.children.length,C=this._minEntries;this._chooseSplitAxis(g,C,a);var y=this._chooseSplitIndex(g,C,a),v=r(g.children.splice(y,g.children.length-y));v.height=g.height,v.leaf=g.leaf,Z(g,this.toBBox),Z(v,this.toBBox),f?o[f-1].children.push(v):this._splitRoot(g,v)},K.prototype._splitRoot=function(o,f){this.data=r([o,f]),this.data.height=o.height+1,this.data.leaf=!1,Z(this.data,this.toBBox)},K.prototype._chooseSplitIndex=function(o,f,g){for(var a,C,y,v,U,w,z,I=1/0,P=1/0,j=f;j<=g-f;j++){var Y=L(o,0,j,this.toBBox),T=L(o,j,g,this.toBBox),O=(C=Y,y=T,void 0,void 0,void 0,void 0,v=Math.max(C.minX,y.minX),U=Math.max(C.minY,y.minY),w=Math.min(C.maxX,y.maxX),z=Math.min(C.maxY,y.maxY),Math.max(0,w-v)*Math.max(0,z-U)),R=E(Y)+E(T);O<I?(I=O,a=j,P=R<P?R:P):O===I&&R<P&&(P=R,a=j)}return a||g-f},K.prototype._chooseSplitAxis=function(o,f,g){var a=o.leaf?this.compareMinX:B,C=o.leaf?this.compareMinY:F;this._allDistMargin(o,f,g,a)<this._allDistMargin(o,f,g,C)&&o.children.sort(a)},K.prototype._allDistMargin=function(o,f,g,a){o.children.sort(a);for(var C=this.toBBox,y=L(o,0,f,C),v=L(o,g-f,g,C),U=p(y)+p(v),w=f;w<g-f;w++){var z=o.children[w];b(y,o.leaf?C(z):z),U+=p(y)}for(var I=g-f-1;I>=f;I--){var P=o.children[I];b(v,o.leaf?C(P):P),U+=p(v)}return U},K.prototype._adjustParentBBoxes=function(o,f,g){for(var a=g;a>=0;a--)b(f[a],o)},K.prototype._condense=function(o){for(var f=o.length-1,g=void 0;f>=0;f--)0===o[f].children.length?f>0?(g=o[f-1].children).splice(g.indexOf(o[f]),1):this.clear():Z(o[f],this.toBBox)},K}()},9990:(ce,gt,c)=>{"use strict";c.d(gt,{i:()=>K});var V=c(8503);function K($){return(0,V.p)((Z,L)=>$<=L)}},5857:(ce,gt,c)=>{"use strict";c.d(gt,{L:()=>Lc,t:()=>Ph});var V=c(3279),K=c(1686),$=c(9568),Z=c(6591),L=c(2927),b=c(7477),B=c(9153),F=c(1766),E=c(2383),p=c(1983),_=c(8507),h=c(1705),r=c(8052),u=c(5085);function f(s,t){h.ue.expire()}const g=class o extends B.A{constructor(t){super(),this.map_=t}dispatchRenderEvent(t,e){(0,E.b0)()}calculateMatrices2D(t){const e=t.viewState,n=t.coordinateToPixelTransform,l=t.pixelToCoordinateTransform;(0,p.Zz)(n,t.size[0]/2,t.size[1]/2,1/e.resolution,-1/e.resolution,-e.rotation,-e.center[0],-e.center[1]),(0,p.T9)(l,n)}forEachFeatureAtCoordinate(t,e,n,l,m,S,k,tt){let ot;const Et=e.viewState;function Gt(Mi,_i,Bi,ci){return m.call(S,_i,Mi?Bi:null,ci)}const Jt=Et.projection,Vt=(0,u.Li)(t.slice(),Jt),me=[[0,0]];if(Jt.canWrapX()&&l){const Mi=Jt.getExtent(),_i=(0,_.RG)(Mi);me.push([-_i,0],[_i,0])}const ti=e.layerStatesArray,Be=ti.length,vi=[],Li=[];for(let Mi=0;Mi<me.length;Mi++)for(let _i=Be-1;_i>=0;--_i){const Bi=ti[_i],ci=Bi.layer;if(ci.hasRenderer()&&(0,r.l)(Bi,Et)&&k.call(tt,ci)){const ki=ci.getRenderer(),pn=ci.getSource();if(ki&&pn){const Ln=pn.getWrapX()?Vt:t,Ki=Gt.bind(null,Bi.managed);Li[0]=Ln[0]+me[Mi][0],Li[1]=Ln[1]+me[Mi][1],ot=ki.forEachFeatureAtCoordinate(Li,e,n,Ki,vi)}if(ot)return ot}}if(0===vi.length)return;const zi=1/vi.length;return vi.forEach((Mi,_i)=>Mi.distanceSq+=_i*zi),vi.sort((Mi,_i)=>Mi.distanceSq-_i.distanceSq),vi.some(Mi=>ot=Mi.callback(Mi.feature,Mi.layer,Mi.geometry)),ot}hasFeatureAtCoordinate(t,e,n,l,m,S){return void 0!==this.forEachFeatureAtCoordinate(t,e,n,l,F.rT,this,m,S)}getMap(){return this.map_}renderFrame(t){(0,E.b0)()}scheduleExpireIconCache(t){h.ue.canExpireCache()&&t.postRenderFunctions.push(f)}};var a=c(6058),C=c(2800),y=c(1688),v=c(1776),U=c(2462),w=c(2614),z=c(5551);const P=class I extends g{constructor(t){super(t),this.fontChangeListenerKey_=(0,w.KT)(U.yY,a.A.PROPERTYCHANGE,t.redrawText.bind(t)),this.element_=document.createElement("div");const e=this.element_.style;e.position="absolute",e.width="100%",e.height="100%",e.zIndex="0",this.element_.className=v.XI+" ol-layers";const n=t.getViewport();n.insertBefore(this.element_,n.firstChild||null),this.children_=[],this.renderedVisible_=!0}dispatchRenderEvent(t,e){const n=this.getMap();if(n.hasListener(t)){const l=new C.A(t,void 0,e);n.dispatchEvent(l)}}disposeInternal(){(0,w.JH)(this.fontChangeListenerKey_),this.element_.parentNode.removeChild(this.element_),super.disposeInternal()}renderFrame(t){if(!t)return void(this.renderedVisible_&&(this.element_.style.display="none",this.renderedVisible_=!1));this.calculateMatrices2D(t),this.dispatchRenderEvent(y.A.PRECOMPOSE,t);const e=t.layerStatesArray.sort(function(k,tt){return k.zIndex-tt.zIndex});e.some(k=>k.layer instanceof b.A&&k.layer.getDeclutter())&&(t.declutter={});const l=t.viewState;this.children_.length=0;const m=[];let S=null;for(let k=0,tt=e.length;k<tt;++k){const ot=e[k];t.layerIndex=k;const Et=ot.layer,Gt=Et.getSourceState();if(!(0,r.l)(ot,l)||"ready"!=Gt&&"undefined"!=Gt){Et.unrender();continue}const Jt=Et.render(t,S);Jt&&(Jt!==S&&(this.children_.push(Jt),S=Jt),m.push(ot))}this.declutter(t,m),(0,z.WM)(this.element_,this.children_),this.dispatchRenderEvent(y.A.POSTCOMPOSE,t),this.renderedVisible_||(this.element_.style.display="",this.renderedVisible_=!0),this.scheduleExpireIconCache(t)}declutter(t,e){if(t.declutter){for(let n=e.length-1;n>=0;--n){const l=e[n],m=l.layer;m.getDeclutter()&&m.renderDeclutter(t,l)}e.forEach(n=>n.layer.renderDeferred(t))}}};var j=c(6621),Y=c(3942),T=c(3805);const R=class O extends T.Ay{constructor(t,e,n){super(t),this.map=e,this.frameState=void 0!==n?n:null}},M=class A extends R{constructor(t,e,n,l,m,S){super(t,e,m),this.originalEvent=n,this.pixel_=null,this.coordinate_=null,this.dragging=void 0!==l&&l,this.activePointers=S}get pixel(){return this.pixel_||(this.pixel_=this.map.getEventPixel(this.originalEvent)),this.pixel_}set pixel(t){this.pixel_=t}get coordinate(){return this.coordinate_||(this.coordinate_=this.map.getCoordinateFromPixel(this.pixel)),this.coordinate_}set coordinate(t){this.coordinate_=t}preventDefault(){super.preventDefault(),"preventDefault"in this.originalEvent&&this.originalEvent.preventDefault()}stopPropagation(){super.stopPropagation(),"stopPropagation"in this.originalEvent&&this.originalEvent.stopPropagation()}},D={SINGLECLICK:"singleclick",CLICK:j.A.CLICK,DBLCLICK:j.A.DBLCLICK,POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"};var it=c(1884),lt=c(2531);const At=class xt extends it.A{constructor(t,e){super(t),this.map_=t,this.emulateClicks_=!1,this.dragging_=!1,this.dragListenerKeys_=[],this.moveTolerance_=void 0===e?1:e,this.down_=null;const n=this.map_.getViewport();this.activePointers_=[],this.trackedTouches_={},this.element_=n,this.pointerdownListenerKey_=(0,w.KT)(n,"pointerdown",this.handlePointerDown_,this),this.relayedListenerKey_=(0,w.KT)(n,"pointermove",this.relayMoveEvent_,this),this.boundHandleTouchMove_=this.handleTouchMove_.bind(this),this.element_.addEventListener(j.A.TOUCHMOVE,this.boundHandleTouchMove_,!!lt.FT&&{passive:!1})}emulateClick_(t){let e=new M(D.CLICK,this.map_,t);this.dispatchEvent(e),void 0!==this.clickTimeoutId_?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=void 0,e=new M(D.DBLCLICK,this.map_,t),this.dispatchEvent(e)):this.clickTimeoutId_=setTimeout(()=>{this.clickTimeoutId_=void 0;const n=new M(D.SINGLECLICK,this.map_,t);this.dispatchEvent(n)},250)}updateActivePointers_(t){const e=t,n=e.pointerId;if(e.type==D.POINTERUP||e.type==D.POINTERCANCEL){delete this.trackedTouches_[n];for(const l in this.trackedTouches_)if(this.trackedTouches_[l].target!==e.target){delete this.trackedTouches_[l];break}}else(e.type==D.POINTERDOWN||e.type==D.POINTERMOVE)&&(this.trackedTouches_[n]=e);this.activePointers_=Object.values(this.trackedTouches_)}handlePointerUp_(t){this.updateActivePointers_(t);const e=new M(D.POINTERUP,this.map_,t,void 0,void 0,this.activePointers_);this.dispatchEvent(e),this.emulateClicks_&&!e.defaultPrevented&&!this.dragging_&&this.isMouseActionButton_(t)&&this.emulateClick_(this.down_),0===this.activePointers_.length&&(this.dragListenerKeys_.forEach(w.JH),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null)}isMouseActionButton_(t){return 0===t.button}handlePointerDown_(t){this.emulateClicks_=0===this.activePointers_.length,this.updateActivePointers_(t);const e=new M(D.POINTERDOWN,this.map_,t,void 0,void 0,this.activePointers_);if(this.dispatchEvent(e),this.down_=new PointerEvent(t.type,t),Object.defineProperty(this.down_,"target",{writable:!1,value:t.target}),0===this.dragListenerKeys_.length){const n=this.map_.getOwnerDocument();this.dragListenerKeys_.push((0,w.KT)(n,D.POINTERMOVE,this.handlePointerMove_,this),(0,w.KT)(n,D.POINTERUP,this.handlePointerUp_,this),(0,w.KT)(this.element_,D.POINTERCANCEL,this.handlePointerUp_,this)),this.element_.getRootNode&&this.element_.getRootNode()!==n&&this.dragListenerKeys_.push((0,w.KT)(this.element_.getRootNode(),D.POINTERUP,this.handlePointerUp_,this))}}handlePointerMove_(t){if(this.isMoving_(t)){this.updateActivePointers_(t),this.dragging_=!0;const e=new M(D.POINTERDRAG,this.map_,t,this.dragging_,void 0,this.activePointers_);this.dispatchEvent(e)}}relayMoveEvent_(t){this.originalPointerMoveEvent_=t;const e=!(!this.down_||!this.isMoving_(t));this.dispatchEvent(new M(D.POINTERMOVE,this.map_,t,e))}handleTouchMove_(t){const e=this.originalPointerMoveEvent_;(!e||e.defaultPrevented)&&("boolean"!=typeof t.cancelable||!0===t.cancelable)&&t.preventDefault()}isMoving_(t){return this.dragging_||Math.abs(t.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(t.clientY-this.down_.clientY)>this.moveTolerance_}disposeInternal(){this.relayedListenerKey_&&((0,w.JH)(this.relayedListenerKey_),this.relayedListenerKey_=null),this.element_.removeEventListener(j.A.TOUCHMOVE,this.boundHandleTouchMove_),this.pointerdownListenerKey_&&((0,w.JH)(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(w.JH),this.dragListenerKeys_.length=0,this.element_=null,super.disposeInternal()}};var St=c(5281);var Kt=c(1334),ut=c(3980),Tt=c(6631),Ft=c(5940),ie=c(3308),Zt=c(7412),ge=c(2058);const fe=class ne extends Zt.A{constructor(t){t=t||{},super({element:document.createElement("div"),render:t.render,target:t.target}),this.ulElement_=document.createElement("ul"),this.collapsed_=void 0===t.collapsed||t.collapsed,this.userCollapsed_=this.collapsed_,this.overrideCollapsible_=void 0!==t.collapsible,this.collapsible_=void 0===t.collapsible||t.collapsible,this.collapsible_||(this.collapsed_=!1);const e=void 0!==t.className?t.className:"ol-attribution",n=void 0!==t.tipLabel?t.tipLabel:"Attributions",l=void 0!==t.expandClassName?t.expandClassName:e+"-expand",m=void 0!==t.collapseLabel?t.collapseLabel:"\u203a",S=void 0!==t.collapseClassName?t.collapseClassName:e+"-collapse";"string"==typeof m?(this.collapseLabel_=document.createElement("span"),this.collapseLabel_.textContent=m,this.collapseLabel_.className=S):this.collapseLabel_=m;const k=void 0!==t.label?t.label:"i";"string"==typeof k?(this.label_=document.createElement("span"),this.label_.textContent=k,this.label_.className=l):this.label_=k;const tt=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_;this.toggleButton_=document.createElement("button"),this.toggleButton_.setAttribute("type","button"),this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_)),this.toggleButton_.title=n,this.toggleButton_.appendChild(tt),this.toggleButton_.addEventListener(j.A.CLICK,this.handleClick_.bind(this),!1);const Et=this.element;Et.className=e+" "+v.XI+" "+v.$N+(this.collapsed_&&this.collapsible_?" "+v.nT:"")+(this.collapsible_?"":" ol-uncollapsible"),Et.appendChild(this.toggleButton_),Et.appendChild(this.ulElement_),this.renderedAttributions_=[],this.renderedVisible_=!0}collectSourceAttributions_(t){const e=Array.from(new Set(this.getMap().getAllLayers().flatMap(l=>l.getAttributions(t)))),n=!this.getMap().getAllLayers().some(l=>l.getSource()&&!1===l.getSource().getAttributionsCollapsible());return this.overrideCollapsible_||this.setCollapsible(n),e}updateElement_(t){var e=this;return(0,ie.A)(function*(){if(!t)return void(e.renderedVisible_&&(e.element.style.display="none",e.renderedVisible_=!1));const n=yield Promise.all(e.collectSourceAttributions_(t).map(m=>(0,F.hq)(()=>m))),l=n.length>0;if(e.renderedVisible_!=l&&(e.element.style.display=l?"":"none",e.renderedVisible_=l),!(0,ge.aI)(n,e.renderedAttributions_)){(0,z.gS)(e.ulElement_);for(let m=0,S=n.length;m<S;++m){const k=document.createElement("li");k.innerHTML=n[m],e.ulElement_.appendChild(k)}e.renderedAttributions_=n}})()}handleClick_(t){t.preventDefault(),this.handleToggle_(),this.userCollapsed_=this.collapsed_}handleToggle_(){this.element.classList.toggle(v.nT),this.collapsed_?(0,z.fo)(this.collapseLabel_,this.label_):(0,z.fo)(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_,this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_))}getCollapsible(){return this.collapsible_}setCollapsible(t){this.collapsible_!==t&&(this.collapsible_=t,this.element.classList.toggle("ol-uncollapsible"),this.userCollapsed_&&this.handleToggle_())}setCollapsed(t){this.userCollapsed_=t,this.collapsible_&&this.collapsed_!==t&&this.handleToggle_()}getCollapsed(){return this.collapsed_}render(t){this.updateElement_(t.frameState)}};var rt=c(6378);const Yt=class jt extends Zt.A{constructor(t){t=t||{},super({element:document.createElement("div"),render:t.render,target:t.target});const e=void 0!==t.className?t.className:"ol-rotate",n=void 0!==t.label?t.label:"\u21e7",l=void 0!==t.compassClassName?t.compassClassName:"ol-compass";this.label_=null,"string"==typeof n?(this.label_=document.createElement("span"),this.label_.className=l,this.label_.textContent=n):(this.label_=n,this.label_.classList.add(l));const m=t.tipLabel?t.tipLabel:"Reset rotation",S=document.createElement("button");S.className=e+"-reset",S.setAttribute("type","button"),S.title=m,S.appendChild(this.label_),S.addEventListener(j.A.CLICK,this.handleClick_.bind(this),!1);const tt=this.element;tt.className=e+" "+v.XI+" "+v.$N,tt.appendChild(S),this.callResetNorth_=t.resetNorth?t.resetNorth:void 0,this.duration_=void 0!==t.duration?t.duration:250,this.autoHide_=void 0===t.autoHide||t.autoHide,this.rotation_=void 0,this.autoHide_&&this.element.classList.add(v.Si)}handleClick_(t){t.preventDefault(),void 0!==this.callResetNorth_?this.callResetNorth_():this.resetNorth_()}resetNorth_(){const e=this.getMap().getView();if(!e)return;const n=e.getRotation();void 0!==n&&(this.duration_>0&&n%(2*Math.PI)!=0?e.animate({rotation:0,duration:this.duration_,easing:rt.vT}):e.setRotation(0))}render(t){const e=t.frameState;if(!e)return;const n=e.viewState.rotation;if(n!=this.rotation_){const l="rotate("+n+"rad)";if(this.autoHide_){const m=this.element.classList.contains(v.Si);m||0!==n?m&&0!==n&&this.element.classList.remove(v.Si):this.element.classList.add(v.Si)}this.label_.style.transform=l}this.rotation_=n}},Me=class ve extends Zt.A{constructor(t){t=t||{},super({element:document.createElement("div"),target:t.target});const e=void 0!==t.className?t.className:"ol-zoom",n=void 0!==t.delta?t.delta:1,l=void 0!==t.zoomInClassName?t.zoomInClassName:e+"-in",m=void 0!==t.zoomOutClassName?t.zoomOutClassName:e+"-out",S=void 0!==t.zoomInLabel?t.zoomInLabel:"+",k=void 0!==t.zoomOutLabel?t.zoomOutLabel:"\u2013",tt=void 0!==t.zoomInTipLabel?t.zoomInTipLabel:"Zoom in",ot=void 0!==t.zoomOutTipLabel?t.zoomOutTipLabel:"Zoom out",Et=document.createElement("button");Et.className=l,Et.setAttribute("type","button"),Et.title=tt,Et.appendChild("string"==typeof S?document.createTextNode(S):S),Et.addEventListener(j.A.CLICK,this.handleClick_.bind(this,n),!1);const Gt=document.createElement("button");Gt.className=m,Gt.setAttribute("type","button"),Gt.title=ot,Gt.appendChild("string"==typeof k?document.createTextNode(k):k),Gt.addEventListener(j.A.CLICK,this.handleClick_.bind(this,-n),!1);const Vt=this.element;Vt.className=e+" "+v.XI+" "+v.$N,Vt.appendChild(Et),Vt.appendChild(Gt),this.duration_=void 0!==t.duration?t.duration:250}handleClick_(t,e){e.preventDefault(),this.zoomByDelta_(t)}zoomByDelta_(t){const n=this.getMap().getView();if(!n)return;const l=n.getZoom();if(void 0!==l){const m=n.getConstrainedZoom(l+t);this.duration_>0?(n.getAnimating()&&n.cancelAnimations(),n.animate({zoom:m,duration:this.duration_,easing:rt.vT})):n.setZoom(m)}}};function ai(s,t,e,n){const l=s.getZoom();if(void 0===l)return;const m=s.getConstrainedZoom(l+t),S=s.getResolutionForZoom(m);s.getAnimating()&&s.cancelAnimations(),s.animate({resolution:S,anchor:e,duration:void 0!==n?n:250,easing:rt.vT})}const Ui=class pi extends $.A{constructor(t){super(),t&&t.handleEvent&&(this.handleEvent=t.handleEvent),this.map_=null,this.setActive(!0)}getActive(){return this.get("active")}getMap(){return this.map_}handleEvent(t){return!0}setActive(t){this.set("active",t)}setMap(t){this.map_=t}},Oi=class Ue extends Ui{constructor(t){super(),this.delta_=(t=t||{}).delta?t.delta:1,this.duration_=void 0!==t.duration?t.duration:250}handleEvent(t){let e=!1;if(t.type==D.DBLCLICK){const n=t.originalEvent,m=t.coordinate,S=n.shiftKey?-this.delta_:this.delta_;ai(t.map.getView(),S,m,this.duration_),n.preventDefault(),e=!0}return!e}};function an(s){const t=s.length;let e=0,n=0;for(let l=0;l<t;l++)e+=s[l].clientX,n+=s[l].clientY;return{clientX:e/t,clientY:n/t}}const Yi=class Ai extends Ui{constructor(t){super(t=t||{}),t.handleDownEvent&&(this.handleDownEvent=t.handleDownEvent),t.handleDragEvent&&(this.handleDragEvent=t.handleDragEvent),t.handleMoveEvent&&(this.handleMoveEvent=t.handleMoveEvent),t.handleUpEvent&&(this.handleUpEvent=t.handleUpEvent),t.stopDown&&(this.stopDown=t.stopDown),this.handlingDownUpSequence=!1,this.targetPointers=[]}getPointerCount(){return this.targetPointers.length}handleDownEvent(t){return!1}handleDragEvent(t){}handleEvent(t){if(!t.originalEvent)return!0;let e=!1;if(this.updateTrackedPointers_(t),this.handlingDownUpSequence){if(t.type==D.POINTERDRAG)this.handleDragEvent(t),t.originalEvent.preventDefault();else if(t.type==D.POINTERUP){const n=this.handleUpEvent(t);this.handlingDownUpSequence=n&&this.targetPointers.length>0}}else if(t.type==D.POINTERDOWN){const n=this.handleDownEvent(t);this.handlingDownUpSequence=n,e=this.stopDown(n)}else t.type==D.POINTERMOVE&&this.handleMoveEvent(t);return!e}handleMoveEvent(t){}handleUpEvent(t){return!1}stopDown(t){return t}updateTrackedPointers_(t){t.activePointers&&(this.targetPointers=t.activePointers)}};function Ct(s){const t=arguments;return function(e){let n=!0;for(let l=0,m=t.length;l<m&&(n=n&&t[l](e),n);++l);return n}}const ht=function(s){const t=s.originalEvent;return t.altKey&&!(t.metaKey||t.ctrlKey)&&t.shiftKey},Pt=function(s){return!s.map.getTargetElement().hasAttribute("tabindex")||function(s){const t=s.map.getTargetElement(),e=s.map.getOwnerDocument().activeElement;return t.contains(e)}(s)},dt=F.rT,Ce=function(s){const t=s.originalEvent;return 0==t.button&&!(lt.j&&lt.ew&&t.ctrlKey)},yi=function(s){const t=s.originalEvent;return!t.altKey&&!(t.metaKey||t.ctrlKey)&&!t.shiftKey},Ps=function(s){const t=s.originalEvent;return!t.altKey&&!(t.metaKey||t.ctrlKey)&&t.shiftKey},Nn=function(s){const t=s.originalEvent,e=t.target.tagName;return"INPUT"!==e&&"SELECT"!==e&&"TEXTAREA"!==e&&!t.target.isContentEditable},Mn=function(s){const t=s.originalEvent;return(0,Ft.v)(void 0!==t,"mapBrowserEvent must originate from a pointer event"),"mouse"==t.pointerType},qs=function(s){const t=s.originalEvent;return(0,Ft.v)(void 0!==t,"mapBrowserEvent must originate from a pointer event"),t.isPrimary&&0===t.button},hs=class Os extends Yi{constructor(t){super({stopDown:F.W8}),this.kinetic_=(t=t||{}).kinetic,this.lastCentroid=null,this.panning_=!1;const e=t.condition?t.condition:Ct(yi,qs);this.condition_=t.onFocusOnly?Ct(Pt,e):e,this.noKinetic_=!1}handleDragEvent(t){const e=t.map;this.panning_||(this.panning_=!0,e.getView().beginInteraction());const n=this.targetPointers,l=e.getEventPixel(an(n));if(n.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(l[0],l[1]),this.lastCentroid){const m=[this.lastCentroid[0]-l[0],l[1]-this.lastCentroid[1]],k=t.map.getView();(0,u.hs)(m,k.getResolution()),(0,u.e$)(m,k.getRotation()),k.adjustCenterInternal(m)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=l,this.lastPointersCount_=n.length,t.originalEvent.preventDefault()}handleUpEvent(t){const e=t.map,n=e.getView();if(0===this.targetPointers.length){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){const l=this.kinetic_.getDistance(),m=this.kinetic_.getAngle(),S=n.getCenterInternal(),k=e.getPixelFromCoordinateInternal(S),tt=e.getCoordinateFromPixelInternal([k[0]-l*Math.cos(m),k[1]-l*Math.sin(m)]);n.animateInternal({center:n.getConstrainedCenter(tt),duration:500,easing:rt.vT})}return this.panning_&&(this.panning_=!1,n.endInteraction()),!1}return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0}handleDownEvent(t){if(this.targetPointers.length>0&&this.condition_(t)){const n=t.map.getView();return this.lastCentroid=null,n.getAnimating()&&n.cancelAnimations(),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}return!1}};var Vi=c(3066);const Ii=class Ci extends Yi{constructor(t){t=t||{},super({stopDown:F.W8}),this.condition_=t.condition?t.condition:ht,this.lastAngle_=void 0,this.duration_=void 0!==t.duration?t.duration:250}handleDragEvent(t){if(!Mn(t))return;const e=t.map,n=e.getView();if(n.getConstraints().rotation===Vi.b8)return;const l=e.getSize(),m=t.pixel,S=Math.atan2(l[1]/2-m[1],m[0]-l[0]/2);void 0!==this.lastAngle_&&n.adjustRotationInternal(-(S-this.lastAngle_)),this.lastAngle_=S}handleUpEvent(t){return!Mn(t)||(t.map.getView().endInteraction(this.duration_),!1)}handleDownEvent(t){return!!(Mn(t)&&Ce(t)&&this.condition_(t))&&(t.map.getView().beginInteraction(),this.lastAngle_=void 0,!0)}};var Ds=c(4157);const dr=class Ls extends B.A{constructor(t){super(),this.geometry_=null,this.element_=document.createElement("div"),this.element_.style.position="absolute",this.element_.style.pointerEvents="auto",this.element_.className="ol-box "+t,this.map_=null,this.startPixel_=null,this.endPixel_=null}disposeInternal(){this.setMap(null)}render_(){const t=this.startPixel_,e=this.endPixel_,n="px",l=this.element_.style;l.left=Math.min(t[0],e[0])+n,l.top=Math.min(t[1],e[1])+n,l.width=Math.abs(e[0]-t[0])+n,l.height=Math.abs(e[1]-t[1])+n}setMap(t){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);const e=this.element_.style;e.left="inherit",e.top="inherit",e.width="inherit",e.height="inherit"}this.map_=t,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)}setPixels(t,e){this.startPixel_=t,this.endPixel_=e,this.createOrUpdateGeometry(),this.render_()}createOrUpdateGeometry(){if(!this.map_)return;const t=this.startPixel_,e=this.endPixel_,l=[t,[t[0],e[1]],e,[e[0],t[1]]].map(this.map_.getCoordinateFromPixelInternal,this.map_);l[4]=l[0].slice(),this.geometry_?this.geometry_.setCoordinates([l]):this.geometry_=new Ds.Ay([l])}getGeometry(){return this.geometry_}};class tr extends T.Ay{constructor(t,e,n){super(t),this.coordinate=e,this.mapBrowserEvent=n}}const Fe=class $r extends Yi{constructor(t){super(),this.box_=new dr((t=t||{}).className||"ol-dragbox"),this.minArea_=void 0!==t.minArea?t.minArea:64,t.onBoxEnd&&(this.onBoxEnd=t.onBoxEnd),this.startPixel_=null,this.condition_=t.condition?t.condition:Ce,this.boxEndCondition_=t.boxEndCondition?t.boxEndCondition:this.defaultBoxEndCondition}defaultBoxEndCondition(t,e,n){const l=n[0]-e[0],m=n[1]-e[1];return l*l+m*m>=this.minArea_}getGeometry(){return this.box_.getGeometry()}handleDragEvent(t){this.startPixel_&&(this.box_.setPixels(this.startPixel_,t.pixel),this.dispatchEvent(new tr("boxdrag",t.coordinate,t)))}handleUpEvent(t){if(!this.startPixel_)return!1;this.box_.setMap(null);const e=this.boxEndCondition_(t,this.startPixel_,t.pixel);return e&&this.onBoxEnd(t),this.dispatchEvent(new tr(e?"boxend":"boxcancel",t.coordinate,t)),!1}handleDownEvent(t){return!!this.condition_(t)&&(this.startPixel_=t.pixel,this.box_.setMap(t.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new tr("boxstart",t.coordinate,t)),!0)}onBoxEnd(t){}setActive(t){t||(this.box_.setMap(null),this.startPixel_&&(this.dispatchEvent(new tr("boxcancel",this.startPixel_,null)),this.startPixel_=null)),super.setActive(t)}},Ms=class xs extends Fe{constructor(t){super({condition:(t=t||{}).condition?t.condition:Ps,className:t.className||"ol-dragzoom",minArea:t.minArea}),this.duration_=void 0!==t.duration?t.duration:200,this.out_=void 0!==t.out&&t.out}onBoxEnd(t){const n=this.getMap().getView();let l=this.getGeometry();if(this.out_){const m=n.rotatedExtentForGeometry(l),S=n.getResolutionForExtentInternal(m),k=n.getResolution()/S;l=l.clone(),l.scale(k*k)}n.fitInternal(l,{duration:this.duration_,easing:rt.vT})}},Pr=class Ns extends Ui{constructor(t){super(),t=t||{},this.defaultCondition_=function(e){return yi(e)&&Nn(e)},this.condition_=void 0!==t.condition?t.condition:this.defaultCondition_,this.duration_=void 0!==t.duration?t.duration:100,this.pixelDelta_=void 0!==t.pixelDelta?t.pixelDelta:128}handleEvent(t){let e=!1;if(t.type==j.A.KEYDOWN){const n=t.originalEvent,l=n.key;if(this.condition_(t)&&("ArrowDown"==l||"ArrowLeft"==l||"ArrowRight"==l||"ArrowUp"==l)){const S=t.map.getView(),k=S.getResolution()*this.pixelDelta_;let tt=0,ot=0;"ArrowDown"==l?ot=-k:"ArrowLeft"==l?tt=-k:"ArrowRight"==l?tt=k:ot=k;const Et=[tt,ot];(0,u.e$)(Et,S.getRotation()),function ei(s,t,e){const n=s.getCenterInternal();n&&s.animateInternal({duration:void 0!==e?e:250,easing:rt.sn,center:s.getConstrainedCenter([n[0]+t[0],n[1]+t[1]])})}(S,Et,this.duration_),n.preventDefault(),e=!0}}return!e}},fr=class Rr extends Ui{constructor(t){super(),this.condition_=(t=t||{}).condition?t.condition:function(e){return!function(s){const t=s.originalEvent;return lt.ew?t.metaKey:t.ctrlKey}(e)&&Nn(e)},this.delta_=t.delta?t.delta:1,this.duration_=void 0!==t.duration?t.duration:100}handleEvent(t){let e=!1;if(t.type==j.A.KEYDOWN||t.type==j.A.KEYPRESS){const n=t.originalEvent,l=n.key;if(this.condition_(t)&&("+"===l||"-"===l)){const S="+"===l?this.delta_:-this.delta_;ai(t.map.getView(),S,void 0,this.duration_),n.preventDefault(),e=!0}}return!e}},Br=class An{constructor(t,e,n){this.decay_=t,this.minVelocity_=e,this.delay_=n,this.points_=[],this.angle_=0,this.initialVelocity_=0}begin(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0}update(t,e){this.points_.push(t,e,Date.now())}end(){if(this.points_.length<6)return!1;const t=Date.now()-this.delay_,e=this.points_.length-3;if(this.points_[e+2]<t)return!1;let n=e-3;for(;n>0&&this.points_[n+2]>t;)n-=3;const l=this.points_[e+2]-this.points_[n+2];if(l<1e3/60)return!1;const m=this.points_[e]-this.points_[n],S=this.points_[e+1]-this.points_[n+1];return this.angle_=Math.atan2(S,m),this.initialVelocity_=Math.sqrt(m*m+S*S)/l,this.initialVelocity_>this.minVelocity_}getDistance(){return(this.minVelocity_-this.initialVelocity_)/this.decay_}getAngle(){return this.angle_}};var As=c(9973);const er=class br extends Ui{constructor(t){super(t=t||{}),this.totalDelta_=0,this.lastDelta_=0,this.maxDelta_=void 0!==t.maxDelta?t.maxDelta:1,this.duration_=void 0!==t.duration?t.duration:250,this.timeout_=void 0!==t.timeout?t.timeout:80,this.useAnchor_=void 0===t.useAnchor||t.useAnchor,this.constrainResolution_=void 0!==t.constrainResolution&&t.constrainResolution;const e=t.condition?t.condition:dt;this.condition_=t.onFocusOnly?Ct(Pt,e):e,this.lastAnchor_=null,this.startTime_=void 0,this.mode_=void 0,this.trackpadEventGap_=400,this.deltaPerZoom_=300}endInteraction_(){this.trackpadTimeoutId_=void 0;const t=this.getMap();t&&t.getView().endInteraction(void 0,this.lastDelta_?this.lastDelta_>0?1:-1:0,this.lastAnchor_)}handleEvent(t){if(!this.condition_(t)||t.type!==j.A.WHEEL)return!0;const n=t.map,l=t.originalEvent;let m;if(l.preventDefault(),this.useAnchor_&&(this.lastAnchor_=t.coordinate),t.type==j.A.WHEEL&&(m=l.deltaY,lt._p&&l.deltaMode===WheelEvent.DOM_DELTA_PIXEL&&(m/=lt.cr),l.deltaMode===WheelEvent.DOM_DELTA_LINE&&(m*=40)),0===m)return!1;this.lastDelta_=m;const S=Date.now();void 0===this.startTime_&&(this.startTime_=S),(!this.mode_||S-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(m)<4?"trackpad":"wheel");const k=n.getView();if("trackpad"===this.mode_&&!k.getConstrainResolution()&&!this.constrainResolution_)return this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):(k.getAnimating()&&k.cancelAnimations(),k.beginInteraction()),this.trackpadTimeoutId_=setTimeout(this.endInteraction_.bind(this),this.timeout_),k.adjustZoom(-m/this.deltaPerZoom_,this.lastAnchor_),this.startTime_=S,!1;this.totalDelta_+=m;const tt=Math.max(this.timeout_-(S-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,n),tt),!1}handleWheelZoom_(t){const e=t.getView();e.getAnimating()&&e.cancelAnimations();let n=-(0,As.qE)(this.totalDelta_,-this.maxDelta_*this.deltaPerZoom_,this.maxDelta_*this.deltaPerZoom_)/this.deltaPerZoom_;(e.getConstrainResolution()||this.constrainResolution_)&&(n=n?n>0?1:-1:0),ai(e,n,this.lastAnchor_,this.duration_),this.mode_=void 0,this.totalDelta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0}setMouseAnchor(t){this.useAnchor_=t,t||(this.lastAnchor_=null)}},kr=class Wr extends Yi{constructor(t){const e=t=t||{};e.stopDown||(e.stopDown=F.W8),super(e),this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.threshold_=void 0!==t.threshold?t.threshold:.3,this.duration_=void 0!==t.duration?t.duration:250}handleDragEvent(t){let e=0;const n=this.targetPointers[0],l=this.targetPointers[1],m=Math.atan2(l.clientY-n.clientY,l.clientX-n.clientX);if(void 0!==this.lastAngle_){const tt=m-this.lastAngle_;this.rotationDelta_+=tt,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),e=tt}this.lastAngle_=m;const S=t.map,k=S.getView();k.getConstraints().rotation!==Vi.b8&&(this.anchor_=S.getCoordinateFromPixelInternal(S.getEventPixel(an(this.targetPointers))),this.rotating_&&(S.render(),k.adjustRotationInternal(e,this.anchor_)))}handleUpEvent(t){return!(this.targetPointers.length<2&&(t.map.getView().endInteraction(this.duration_),1))}handleDownEvent(t){if(this.targetPointers.length>=2){const e=t.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||e.getView().beginInteraction(),!0}return!1}},es=class bn extends Yi{constructor(t){const e=t=t||{};e.stopDown||(e.stopDown=F.W8),super(e),this.anchor_=null,this.duration_=void 0!==t.duration?t.duration:400,this.lastDistance_=void 0,this.lastScaleDelta_=1}handleDragEvent(t){let e=1;const n=this.targetPointers[0],l=this.targetPointers[1],m=n.clientX-l.clientX,S=n.clientY-l.clientY,k=Math.sqrt(m*m+S*S);void 0!==this.lastDistance_&&(e=this.lastDistance_/k),this.lastDistance_=k;const tt=t.map,ot=tt.getView();1!=e&&(this.lastScaleDelta_=e),this.anchor_=tt.getCoordinateFromPixelInternal(tt.getEventPixel(an(this.targetPointers))),tt.render(),ot.adjustResolutionInternal(e,this.anchor_)}handleUpEvent(t){return!(this.targetPointers.length<2)||(t.map.getView().endInteraction(this.duration_,this.lastScaleDelta_>1?1:-1),!1)}handleDownEvent(t){if(this.targetPointers.length>=2){const e=t.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||e.getView().beginInteraction(),!0}return!1}};function Pn(s){s=s||{};const t=new Z.A,e=new Br(-.005,.05,100);return(void 0===s.altShiftDragRotate||s.altShiftDragRotate)&&t.push(new Ii),(void 0===s.doubleClickZoom||s.doubleClickZoom)&&t.push(new Oi({delta:s.zoomDelta,duration:s.zoomDuration})),(void 0===s.dragPan||s.dragPan)&&t.push(new hs({onFocusOnly:s.onFocusOnly,kinetic:e})),(void 0===s.pinchRotate||s.pinchRotate)&&t.push(new kr),(void 0===s.pinchZoom||s.pinchZoom)&&t.push(new es({duration:s.zoomDuration})),(void 0===s.keyboard||s.keyboard)&&(t.push(new Pr),t.push(new fr({delta:s.zoomDelta,duration:s.zoomDuration}))),(void 0===s.mouseWheelZoom||s.mouseWheelZoom)&&t.push(new er({onFocusOnly:s.onFocusOnly,duration:s.zoomDuration})),(void 0===s.shiftDragZoom||s.shiftDragZoom)&&t.push(new Ms({duration:s.zoomDuration})),t}var Ei=c(9325),Wn=c(9270),cs=c(5278);function us(s){s instanceof r.A?s.setMapInternal(null):s instanceof Y.A&&s.getLayers().forEach(us)}function fn(s,t){if(s instanceof r.A)s.setMapInternal(t);else if(s instanceof Y.A){const e=s.getLayers().getArray();for(let n=0,l=e.length;n<l;++n)fn(e[n],t)}}const ir=class nn extends $.A{constructor(t){super();const e=function kn(s){let t=null;void 0!==s.keyboardEventTarget&&(t="string"==typeof s.keyboardEventTarget?document.getElementById(s.keyboardEventTarget):s.keyboardEventTarget);const e={},n=s.layers&&"function"==typeof s.layers.getLayers?s.layers:new Y.A({layers:s.layers});let l,m,S;return e.layergroup=n,e.target=s.target,e.view=s.view instanceof ut.Ay?s.view:new ut.Ay,void 0!==s.controls&&(Array.isArray(s.controls)?l=new Z.A(s.controls.slice()):((0,Ft.v)("function"==typeof s.controls.getArray,"Expected `controls` to be an array or an `ol/Collection.js`"),l=s.controls)),void 0!==s.interactions&&(Array.isArray(s.interactions)?m=new Z.A(s.interactions.slice()):((0,Ft.v)("function"==typeof s.interactions.getArray,"Expected `interactions` to be an array or an `ol/Collection.js`"),m=s.interactions)),void 0!==s.overlays?Array.isArray(s.overlays)?S=new Z.A(s.overlays.slice()):((0,Ft.v)("function"==typeof s.overlays.getArray,"Expected `overlays` to be an array or an `ol/Collection.js`"),S=s.overlays):S=new Z.A,{controls:l,interactions:m,keyboardEventTarget:t,overlays:S,values:e}}(t=t||{});this.loaded_=!0,this.boundHandleBrowserEvent_=this.handleBrowserEvent.bind(this),this.maxTilesLoading_=void 0!==t.maxTilesLoading?t.maxTilesLoading:16,this.pixelRatio_=void 0!==t.pixelRatio?t.pixelRatio:lt.cr,this.animationDelay_=this.animationDelay_.bind(this),this.coordinateToPixelTransform_=(0,p.vt)(),this.pixelToCoordinateTransform_=(0,p.vt)(),this.frameIndex_=0,this.frameState_=null,this.previousExtent_=null,this.viewPropertyListenerKey_=null,this.viewChangeListenerKey_=null,this.layerGroupPropertyListenerKeys_=null,this.viewport_=document.createElement("div"),this.viewport_.className="ol-viewport"+("ontouchstart"in window?" ol-touch":""),this.viewport_.style.position="relative",this.viewport_.style.overflow="hidden",this.viewport_.style.width="100%",this.viewport_.style.height="100%",this.overlayContainer_=document.createElement("div"),this.overlayContainer_.style.position="absolute",this.overlayContainer_.style.zIndex="0",this.overlayContainer_.style.width="100%",this.overlayContainer_.style.height="100%",this.overlayContainer_.style.pointerEvents="none",this.overlayContainer_.className="ol-overlaycontainer",this.viewport_.appendChild(this.overlayContainer_),this.overlayContainerStopEvent_=document.createElement("div"),this.overlayContainerStopEvent_.style.position="absolute",this.overlayContainerStopEvent_.style.zIndex="0",this.overlayContainerStopEvent_.style.width="100%",this.overlayContainerStopEvent_.style.height="100%",this.overlayContainerStopEvent_.style.pointerEvents="none",this.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent",this.viewport_.appendChild(this.overlayContainerStopEvent_),this.mapBrowserEventHandler_=null,this.moveTolerance_=t.moveTolerance,this.keyboardEventTarget_=e.keyboardEventTarget,this.targetChangeHandlerKeys_=null,this.targetElement_=null,this.resizeObserver_=new ResizeObserver(()=>this.updateSize()),this.controls=e.controls||function Ye(s){s=s||{};const t=new Z.A;return(void 0===s.zoom||s.zoom)&&t.push(new Me(s.zoomOptions)),(void 0===s.rotate||s.rotate)&&t.push(new Yt(s.rotateOptions)),(void 0===s.attribution||s.attribution)&&t.push(new fe(s.attributionOptions)),t}(),this.interactions=e.interactions||Pn({onFocusOnly:!0}),this.overlays_=e.overlays,this.overlayIdIndex_={},this.renderer_=null,this.postRenderFunctions_=[],this.tileQueue_=new Kt.A(this.getTilePriority.bind(this),this.handleTileChange_.bind(this)),this.addChangeListener("layergroup",this.handleLayerGroupChanged_),this.addChangeListener("view",this.handleViewChanged_),this.addChangeListener("size",this.handleSizeChanged_),this.addChangeListener("target",this.handleTargetChanged_),this.setProperties(e.values);const n=this;t.view&&!(t.view instanceof ut.Ay)&&t.view.then(function(l){n.setView(new ut.Ay(l))}),this.controls.addEventListener(L.A.ADD,l=>{l.element.setMap(this)}),this.controls.addEventListener(L.A.REMOVE,l=>{l.element.setMap(null)}),this.interactions.addEventListener(L.A.ADD,l=>{l.element.setMap(this)}),this.interactions.addEventListener(L.A.REMOVE,l=>{l.element.setMap(null)}),this.overlays_.addEventListener(L.A.ADD,l=>{this.addOverlayInternal_(l.element)}),this.overlays_.addEventListener(L.A.REMOVE,l=>{const m=l.element.getId();void 0!==m&&delete this.overlayIdIndex_[m.toString()],l.element.setMap(null)}),this.controls.forEach(l=>{l.setMap(this)}),this.interactions.forEach(l=>{l.setMap(this)}),this.overlays_.forEach(this.addOverlayInternal_.bind(this))}addControl(t){this.getControls().push(t)}addInteraction(t){this.getInteractions().push(t)}addLayer(t){this.getLayerGroup().getLayers().push(t)}handleLayerAdd_(t){fn(t.layer,this)}addOverlay(t){this.getOverlays().push(t)}addOverlayInternal_(t){const e=t.getId();void 0!==e&&(this.overlayIdIndex_[e.toString()]=t),t.setMap(this)}disposeInternal(){this.controls.clear(),this.interactions.clear(),this.overlays_.clear(),this.resizeObserver_.disconnect(),this.setTarget(null),super.disposeInternal()}forEachFeatureAtPixel(t,e,n){if(!this.frameState_||!this.renderer_)return;const l=this.getCoordinateFromPixelInternal(t);return this.renderer_.forEachFeatureAtCoordinate(l,this.frameState_,void 0!==(n=void 0!==n?n:{}).hitTolerance?n.hitTolerance:0,!1!==n.checkWrapped,e,null,void 0!==n.layerFilter?n.layerFilter:F.rT,null)}getFeaturesAtPixel(t,e){const n=[];return this.forEachFeatureAtPixel(t,function(l){n.push(l)},e),n}getAllLayers(){const t=[];return function e(n){n.forEach(function(l){l instanceof Y.A?e(l.getLayers()):t.push(l)})}(this.getLayers()),t}hasFeatureAtPixel(t,e){if(!this.frameState_||!this.renderer_)return!1;const n=this.getCoordinateFromPixelInternal(t);return this.renderer_.hasFeatureAtCoordinate(n,this.frameState_,void 0!==(e=void 0!==e?e:{}).hitTolerance?e.hitTolerance:0,!1!==e.checkWrapped,void 0!==e.layerFilter?e.layerFilter:F.rT,null)}getEventCoordinate(t){return this.getCoordinateFromPixel(this.getEventPixel(t))}getEventCoordinateInternal(t){return this.getCoordinateFromPixelInternal(this.getEventPixel(t))}getEventPixel(t){const n=this.viewport_.getBoundingClientRect(),l=this.getSize(),k="changedTouches"in t?t.changedTouches[0]:t;return[(k.clientX-n.left)/(n.width/l[0]),(k.clientY-n.top)/(n.height/l[1])]}getTarget(){return this.get("target")}getTargetElement(){return this.targetElement_}getCoordinateFromPixel(t){return(0,Ei.te)(this.getCoordinateFromPixelInternal(t),this.getView().getProjection())}getCoordinateFromPixelInternal(t){const e=this.frameState_;return e?(0,p.Bb)(e.pixelToCoordinateTransform,t.slice()):null}getControls(){return this.controls}getOverlays(){return this.overlays_}getOverlayById(t){const e=this.overlayIdIndex_[t.toString()];return void 0!==e?e:null}getInteractions(){return this.interactions}getLayerGroup(){return this.get("layergroup")}setLayers(t){const e=this.getLayerGroup();if(t instanceof Z.A)return void e.setLayers(t);const n=e.getLayers();n.clear(),n.extend(t)}getLayers(){return this.getLayerGroup().getLayers()}getLoadingOrNotReady(){const t=this.getLayerGroup().getLayerStatesArray();for(let e=0,n=t.length;e<n;++e){const l=t[e];if(!l.visible)continue;const m=l.layer.getRenderer();if(m&&!m.ready)return!0;const S=l.layer.getSource();if(S&&S.loading)return!0}return!1}getPixelFromCoordinate(t){const e=(0,Ei.Ad)(t,this.getView().getProjection());return this.getPixelFromCoordinateInternal(e)}getPixelFromCoordinateInternal(t){const e=this.frameState_;return e?(0,p.Bb)(e.coordinateToPixelTransform,t.slice(0,2)):null}getRenderer(){return this.renderer_}getSize(){return this.get("size")}getView(){return this.get("view")}getViewport(){return this.viewport_}getOverlayContainer(){return this.overlayContainer_}getOverlayContainerStopEvent(){return this.overlayContainerStopEvent_}getOwnerDocument(){const t=this.getTargetElement();return t?t.ownerDocument:document}getTilePriority(t,e,n,l){return(0,Kt.z)(this.frameState_,t,e,n,l)}handleBrowserEvent(t,e){const n=new M(e=e||t.type,this,t);this.handleMapBrowserEvent(n)}handleMapBrowserEvent(t){if(!this.frameState_)return;const e=t.originalEvent,n=e.type;if("pointerdown"===n||n===j.A.WHEEL||n===j.A.KEYDOWN){const l=this.getOwnerDocument(),m=this.viewport_.getRootNode?this.viewport_.getRootNode():l,S=e.target;if(this.overlayContainerStopEvent_.contains(S)||!(m===l?l.documentElement:m).contains(S))return}if(t.frameState=this.frameState_,!1!==this.dispatchEvent(t)){const l=this.getInteractions().getArray().slice();for(let m=l.length-1;m>=0;m--){const S=l[m];if(S.getMap()===this&&S.getActive()&&this.getTargetElement()&&(!S.handleEvent(t)||t.propagationStopped))break}}}handlePostRender(){const t=this.frameState_,e=this.tileQueue_;if(!e.isEmpty()){let l=this.maxTilesLoading_,m=l;if(t){const S=t.viewHints;if(S[Tt.A.ANIMATING]||S[Tt.A.INTERACTING]){const k=Date.now()-t.time>8;l=k?0:8,m=k?0:2}}e.getTilesLoading()<l&&(e.reprioritize(),e.loadMoreTiles(l,m))}t&&this.renderer_&&!t.animate&&(!0===this.renderComplete_?(this.hasListener(y.A.RENDERCOMPLETE)&&this.renderer_.dispatchRenderEvent(y.A.RENDERCOMPLETE,t),!1===this.loaded_&&(this.loaded_=!0,this.dispatchEvent(new R(St.A.LOADEND,this,t)))):!0===this.loaded_&&(this.loaded_=!1,this.dispatchEvent(new R(St.A.LOADSTART,this,t))));const n=this.postRenderFunctions_;for(let l=0,m=n.length;l<m;++l)n[l](this,t);n.length=0}handleSizeChanged_(){this.getView()&&!this.getView().getAnimating()&&this.getView().resolveConstraints(0),this.render()}handleTargetChanged_(){if(this.mapBrowserEventHandler_){for(let n=0,l=this.targetChangeHandlerKeys_.length;n<l;++n)(0,w.JH)(this.targetChangeHandlerKeys_[n]);this.targetChangeHandlerKeys_=null,this.viewport_.removeEventListener(j.A.CONTEXTMENU,this.boundHandleBrowserEvent_),this.viewport_.removeEventListener(j.A.WHEEL,this.boundHandleBrowserEvent_),this.mapBrowserEventHandler_.dispose(),this.mapBrowserEventHandler_=null,(0,z.bf)(this.viewport_)}if(this.targetElement_){this.resizeObserver_.unobserve(this.targetElement_);const n=this.targetElement_.getRootNode();n instanceof ShadowRoot&&this.resizeObserver_.unobserve(n.host),this.setSize(void 0)}const t=this.getTarget(),e="string"==typeof t?document.getElementById(t):t;if(this.targetElement_=e,e){e.appendChild(this.viewport_),this.renderer_||(this.renderer_=new P(this)),this.mapBrowserEventHandler_=new At(this,this.moveTolerance_);for(const m in D)this.mapBrowserEventHandler_.addEventListener(D[m],this.handleMapBrowserEvent.bind(this));this.viewport_.addEventListener(j.A.CONTEXTMENU,this.boundHandleBrowserEvent_,!1),this.viewport_.addEventListener(j.A.WHEEL,this.boundHandleBrowserEvent_,!!lt.FT&&{passive:!1});const n=this.keyboardEventTarget_?this.keyboardEventTarget_:e;this.targetChangeHandlerKeys_=[(0,w.KT)(n,j.A.KEYDOWN,this.handleBrowserEvent,this),(0,w.KT)(n,j.A.KEYPRESS,this.handleBrowserEvent,this)];const l=e.getRootNode();l instanceof ShadowRoot&&this.resizeObserver_.observe(l.host),this.resizeObserver_.observe(e)}else this.renderer_&&(clearTimeout(this.postRenderTimeoutHandle_),this.postRenderTimeoutHandle_=void 0,this.postRenderFunctions_.length=0,this.renderer_.dispose(),this.renderer_=null),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0);this.updateSize()}handleTileChange_(){this.render()}handleViewPropertyChanged_(){this.render()}handleViewChanged_(){this.viewPropertyListenerKey_&&((0,w.JH)(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&((0,w.JH)(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);const t=this.getView();t&&(this.updateViewportSize_(this.getSize()),this.viewPropertyListenerKey_=(0,w.KT)(t,a.A.PROPERTYCHANGE,this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=(0,w.KT)(t,j.A.CHANGE,this.handleViewPropertyChanged_,this),t.resolveConstraints(0)),this.render()}handleLayerGroupChanged_(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(w.JH),this.layerGroupPropertyListenerKeys_=null);const t=this.getLayerGroup();t&&(this.handleLayerAdd_(new Y.i("addlayer",t)),this.layerGroupPropertyListenerKeys_=[(0,w.KT)(t,a.A.PROPERTYCHANGE,this.render,this),(0,w.KT)(t,j.A.CHANGE,this.render,this),(0,w.KT)(t,"addlayer",this.handleLayerAdd_,this),(0,w.KT)(t,"removelayer",this.handleLayerRemove_,this)]),this.render()}isRendered(){return!!this.frameState_}animationDelay_(){this.animationDelayKey_=void 0,this.renderFrame_(Date.now())}renderSync(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()}redrawText(){const t=this.getLayerGroup().getLayerStatesArray();for(let e=0,n=t.length;e<n;++e){const l=t[e].layer;l.hasRenderer()&&l.getRenderer().handleFontsChanged()}}render(){this.renderer_&&void 0===this.animationDelayKey_&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))}removeControl(t){return this.getControls().remove(t)}removeInteraction(t){return this.getInteractions().remove(t)}removeLayer(t){return this.getLayerGroup().getLayers().remove(t)}handleLayerRemove_(t){us(t.layer)}removeOverlay(t){return this.getOverlays().remove(t)}renderFrame_(t){const e=this.getSize(),n=this.getView(),l=this.frameState_;let m=null;if(void 0!==e&&(0,Wn.Ie)(e)&&n&&n.isDef()){const S=n.getHints(this.frameState_?this.frameState_.viewHints:void 0),k=n.getState();if(m={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,declutter:null,extent:(0,_.Bg)(k.center,k.resolution,k.rotation,e),index:this.frameIndex_++,layerIndex:0,layerStatesArray:this.getLayerGroup().getLayerStatesArray(),pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:e,tileQueue:this.tileQueue_,time:t,usedTiles:{},viewState:k,viewHints:S,wantedTiles:{},mapId:(0,E.v6)(this),renderTargets:{}},k.nextCenter&&k.nextResolution){const tt=isNaN(k.nextRotation)?k.rotation:k.nextRotation;m.nextExtent=(0,_.Bg)(k.nextCenter,k.nextResolution,tt,e)}}this.frameState_=m,this.renderer_.renderFrame(m),m&&(m.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,m.postRenderFunctions),l&&(!this.previousExtent_||!(0,_.Im)(this.previousExtent_)&&!(0,_.aI)(m.extent,this.previousExtent_))&&(this.dispatchEvent(new R(St.A.MOVESTART,this,l)),this.previousExtent_=(0,_.aZ)(this.previousExtent_)),this.previousExtent_&&!m.viewHints[Tt.A.ANIMATING]&&!m.viewHints[Tt.A.INTERACTING]&&!(0,_.aI)(m.extent,this.previousExtent_)&&(this.dispatchEvent(new R(St.A.MOVEEND,this,m)),(0,_.o8)(m.extent,this.previousExtent_))),this.dispatchEvent(new R(St.A.POSTRENDER,this,m)),this.renderComplete_=this.hasListener(St.A.LOADSTART)||this.hasListener(St.A.LOADEND)||this.hasListener(y.A.RENDERCOMPLETE)?!this.tileQueue_.getTilesLoading()&&!this.tileQueue_.getCount()&&!this.getLoadingOrNotReady():void 0,this.postRenderTimeoutHandle_||(this.postRenderTimeoutHandle_=setTimeout(()=>{this.postRenderTimeoutHandle_=void 0,this.handlePostRender()},0))}setLayerGroup(t){const e=this.getLayerGroup();e&&this.handleLayerRemove_(new Y.i("removelayer",e)),this.set("layergroup",t)}setSize(t){this.set("size",t)}setTarget(t){this.set("target",t)}setView(t){if(!t||t instanceof ut.Ay)return void this.set("view",t);this.set("view",new ut.Ay);const e=this;t.then(function(n){e.setView(new ut.Ay(n))})}updateSize(){const t=this.getTargetElement();let e;if(t){const l=getComputedStyle(t),m=t.offsetWidth-parseFloat(l.borderLeftWidth)-parseFloat(l.paddingLeft)-parseFloat(l.paddingRight)-parseFloat(l.borderRightWidth),S=t.offsetHeight-parseFloat(l.borderTopWidth)-parseFloat(l.paddingTop)-parseFloat(l.paddingBottom)-parseFloat(l.borderBottomWidth);!isNaN(m)&&!isNaN(S)&&(e=[m,S],!(0,Wn.Ie)(e)&&(t.offsetWidth||t.offsetHeight||t.getClientRects().length)&&(0,cs.R8)("No map visible because the map container's width or height are 0."))}const n=this.getSize();e&&(!n||!(0,ge.aI)(e,n))&&(this.setSize(e),this.updateViewportSize_(e))}updateViewportSize_(t){const e=this.getView();e&&e.setViewportSize(t)}};var gr=c(8324);const ds=class Gn extends $.A{constructor(t){super(),this.options=t,this.id=t.id,this.insertFirst=void 0===t.insertFirst||t.insertFirst,this.stopEvent=void 0===t.stopEvent||t.stopEvent,this.element=document.createElement("div"),this.element.className=void 0!==t.className?t.className:"ol-overlay-container "+v.Q5,this.element.style.position="absolute",this.element.style.pointerEvents="auto",this.autoPan=!0===t.autoPan?{}:t.autoPan||void 0,this.rendered={transform_:"",visible:!0},this.mapPostrenderListenerKey=null,this.addChangeListener("element",this.handleElementChanged),this.addChangeListener("map",this.handleMapChanged),this.addChangeListener("offset",this.handleOffsetChanged),this.addChangeListener("position",this.handlePositionChanged),this.addChangeListener("positioning",this.handlePositioningChanged),void 0!==t.element&&this.setElement(t.element),this.setOffset(void 0!==t.offset?t.offset:[0,0]),this.setPositioning(t.positioning||"top-left"),void 0!==t.position&&this.setPosition(t.position)}getElement(){return this.get("element")}getId(){return this.id}getMap(){return this.get("map")||null}getOffset(){return this.get("offset")}getPosition(){return this.get("position")}getPositioning(){return this.get("positioning")}handleElementChanged(){(0,z.gS)(this.element);const t=this.getElement();t&&this.element.appendChild(t)}handleMapChanged(){this.mapPostrenderListenerKey&&((0,z.bf)(this.element),(0,w.JH)(this.mapPostrenderListenerKey),this.mapPostrenderListenerKey=null);const t=this.getMap();if(t){this.mapPostrenderListenerKey=(0,w.KT)(t,St.A.POSTRENDER,this.render,this),this.updatePixelPosition();const e=this.stopEvent?t.getOverlayContainerStopEvent():t.getOverlayContainer();this.insertFirst?e.insertBefore(this.element,e.childNodes[0]||null):e.appendChild(this.element),this.performAutoPan()}}render(){this.updatePixelPosition()}handleOffsetChanged(){this.updatePixelPosition()}handlePositionChanged(){this.updatePixelPosition(),this.performAutoPan()}handlePositioningChanged(){this.updatePixelPosition()}setElement(t){this.set("element",t)}setMap(t){this.set("map",t)}setOffset(t){this.set("offset",t)}setPosition(t){this.set("position",t)}performAutoPan(){this.autoPan&&this.panIntoView(this.autoPan)}panIntoView(t){const e=this.getMap();if(!e||!e.getTargetElement()||!this.get("position"))return;const n=this.getRect(e.getTargetElement(),e.getSize()),l=this.getElement(),m=this.getRect(l,[(0,z.Gq)(l),(0,z.DK)(l)]),S=void 0===(t=t||{}).margin?20:t.margin;if(!(0,_.ms)(n,m)){const k=m[0]-n[0],tt=n[2]-m[2],ot=m[1]-n[1],Et=n[3]-m[3],Gt=[0,0];if(k<0?Gt[0]=k-S:tt<0&&(Gt[0]=Math.abs(tt)+S),ot<0?Gt[1]=ot-S:Et<0&&(Gt[1]=Math.abs(Et)+S),0!==Gt[0]||0!==Gt[1]){const Jt=e.getView().getCenterInternal(),Vt=e.getPixelFromCoordinateInternal(Jt);if(!Vt)return;const me=[Vt[0]+Gt[0],Vt[1]+Gt[1]],ti=t.animation||{};e.getView().animateInternal({center:e.getCoordinateFromPixelInternal(me),duration:ti.duration,easing:ti.easing})}}}getRect(t,e){const n=t.getBoundingClientRect(),l=n.left+window.pageXOffset,m=n.top+window.pageYOffset;return[l,m,l+e[0],m+e[1]]}setPositioning(t){this.set("positioning",t)}setVisible(t){this.rendered.visible!==t&&(this.element.style.display=t?"":"none",this.rendered.visible=t)}updatePixelPosition(){const t=this.getMap(),e=this.getPosition();if(!t||!t.isRendered()||!e)return void this.setVisible(!1);const n=t.getPixelFromCoordinate(e),l=t.getSize();this.updateRenderedPosition(n,l)}updateRenderedPosition(t,e){const n=this.element.style,l=this.getOffset(),m=this.getPositioning();this.setVisible(!0);let tt="0%",ot="0%";"bottom-right"==m||"center-right"==m||"top-right"==m?tt="-100%":("bottom-center"==m||"center-center"==m||"top-center"==m)&&(tt="-50%"),"bottom-left"==m||"bottom-center"==m||"bottom-right"==m?ot="-100%":("center-left"==m||"center-center"==m||"center-right"==m)&&(ot="-50%");const Et=`translate(${tt}, ${ot}) translate(${Math.round(t[0]+l[0])+"px"}, ${Math.round(t[1]+l[1])+"px"})`;this.rendered.transform_!=Et&&(this.rendered.transform_=Et,n.transform=Et)}getOptions(){return this.options}};var Un=c(1744),bs=c(5715),wr=c(7908),_r=c(8201),fs=c(9346),Us=c(5927),ys=c(6138),uo=c(221),Gr=c(1540),fo=c(5804),Ko=c(2386),zr=c(5409),mr=c(9380),ws=c(730),js=c(9806),Bs=c(9100),gs=c(454),Hn=c(3672),vs=c(9422),Tn=c(9159),zn=c(5534),Kr=c(1992),Ir=c(6151);Error,Error;const yr=class nr extends Kr.A{constructor(t){if(super({attributions:t.attributions,cacheSize:t.cacheSize,crossOrigin:t.crossOrigin,interpolate:t.interpolate,projection:(0,Ei.Jt)("EPSG:3857"),reprojectionErrorThreshold:t.reprojectionErrorThreshold,state:"loading",tileLoadFunction:t.tileLoadFunction,wrapX:void 0===t.wrapX||t.wrapX,transition:t.transition,zDirection:t.zDirection}),this.tileJSON_=null,this.tileSize_=t.tileSize,t.url)if(t.jsonp)!function Jr(s,t,e,n){const l=document.createElement("script"),m="olc_"+(0,E.v6)(t);function S(){delete window[m],l.parentNode.removeChild(l)}l.async=!0,l.src=s+(s.includes("?")?"&":"?")+(n||"callback")+"="+m;const k=setTimeout(function(){S(),e&&e()},1e4);window[m]=function(tt){clearTimeout(k),S(),t(tt)},document.head.appendChild(l)}(t.url,this.handleTileJSONResponse.bind(this),this.handleTileJSONError.bind(this));else{const e=new XMLHttpRequest;e.addEventListener("load",this.onXHRLoad_.bind(this)),e.addEventListener("error",this.onXHRError_.bind(this)),e.open("GET",t.url),e.send()}else{if(!t.tileJSON)throw new Error("Either `url` or `tileJSON` options must be provided");this.handleTileJSONResponse(t.tileJSON)}}onXHRLoad_(t){const e=t.target;if(!e.status||e.status>=200&&e.status<300){let n;try{n=JSON.parse(e.responseText)}catch{return void this.handleTileJSONError()}this.handleTileJSONResponse(n)}else this.handleTileJSONError()}onXHRError_(t){this.handleTileJSONError()}getTileJSON(){return this.tileJSON_}handleTileJSONResponse(t){const e=(0,Ei.Jt)("EPSG:4326"),n=this.getProjection();let l;if(void 0!==t.bounds){const ot=(0,Ei.FO)(e,n);l=(0,_.NW)(t.bounds,ot)}const m=(0,Ir.kZ)(n),tt=(0,Ir.EN)({extent:m,maxZoom:t.maxzoom||22,minZoom:t.minzoom||0,tileSize:this.tileSize_});if(this.tileGrid=tt,this.tileUrlFunction=(0,gs.Qz)(t.tiles,tt),t.attribution&&!this.getAttributions()){const ot=void 0!==l?l:m;this.setAttributions(function(Et){return(0,_.HY)(ot,Et.extent)?[t.attribution]:null})}this.tileJSON_=t,this.setState("ready")}handleTileJSONError(){this.setState("error")}};var Qe=c(6370),di=c(6508),rn=c(7206);function Zi(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var Ws,gn={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function jn(s){return(s=Math.round(s))<0?0:s>255?255:s}function vr(s){return jn("%"===s[s.length-1]?parseFloat(s)/100*255:parseInt(s))}function Wi(s){return function Is(s){return s<0?0:s>1?1:s}("%"===s[s.length-1]?parseFloat(s)/100:parseFloat(s))}function _o(s,t,e){return e<0?e+=1:e>1&&(e-=1),6*e<1?s+(t-s)*e*6:2*e<1?t:3*e<2?s+(t-s)*(2/3-e)*6:s}try{Ws={}.parseCSSColor=function ra(s){var e,t=s.replace(/ /g,"").toLowerCase();if(t in gn)return gn[t].slice();if("#"===t[0])return 4===t.length?(e=parseInt(t.substr(1),16))>=0&&e<=4095?[(3840&e)>>4|(3840&e)>>8,240&e|(240&e)>>4,15&e|(15&e)<<4,1]:null:7===t.length&&(e=parseInt(t.substr(1),16))>=0&&e<=16777215?[(16711680&e)>>16,(65280&e)>>8,255&e,1]:null;var n=t.indexOf("("),l=t.indexOf(")");if(-1!==n&&l+1===t.length){var m=t.substr(0,n),S=t.substr(n+1,l-(n+1)).split(","),k=1;switch(m){case"rgba":if(4!==S.length)return null;k=Wi(S.pop());case"rgb":return 3!==S.length?null:[vr(S[0]),vr(S[1]),vr(S[2]),k];case"hsla":if(4!==S.length)return null;k=Wi(S.pop());case"hsl":if(3!==S.length)return null;var tt=(parseFloat(S[0])%360+360)%360/360,ot=Wi(S[1]),Et=Wi(S[2]),Gt=Et<=.5?Et*(ot+1):Et+ot-Et*ot,Jt=2*Et-Gt;return[jn(255*_o(Jt,Gt,tt+1/3)),jn(255*_o(Jt,Gt,tt)),jn(255*_o(Jt,Gt,tt-1/3)),k];default:return null}}return null}}catch{}class is{constructor(t,e,n,l=1){this.r=t,this.g=e,this.b=n,this.a=l}static parse(t){if(!t)return;if(t instanceof is)return t;if("string"!=typeof t)return;const e=Ws(t);return e?new is(e[0]/255*e[3],e[1]/255*e[3],e[2]/255*e[3],e[3]):void 0}toString(){const[t,e,n,l]=this.toArray();return`rgba(${Math.round(t)},${Math.round(e)},${Math.round(n)},${l})`}toArray(){const{r:t,g:e,b:n,a:l}=this;return 0===l?[0,0,0,0]:[255*t/l,255*e/l,255*n/l,l]}toArray01(){const{r:t,g:e,b:n,a:l}=this;return 0===l?[0,0,0,0]:[t/l,e/l,n/l,l]}toArray01PremultipliedAlpha(){const{r:t,g:e,b:n,a:l}=this;return[t,e,n,l]}}is.black=new is(0,0,0,1),is.white=new is(1,1,1,1),is.transparent=new is(0,0,0,0),is.red=new is(1,0,0,1),is.blue=new is(0,0,1,1);var _s=is;function le(s){return"object"==typeof s?["literal",s]:s}function pt(s){switch(s.colorSpace){case"hcl":return"interpolate-hcl";case"lab":return"interpolate-lab";default:return"interpolate"}}function we(s,t){const e=le(function Pe(s,t){return void 0!==s?s:void 0!==t?t:void 0}(s.default,t.default));return void 0===e&&"resolvedImage"===t.type?"":e}function ze(s,t,e){const n=$i(s,t),l=["get",s.property];if("categorical"===n&&"boolean"==typeof e[0][0]){const m=["case"];for(const S of e)m.push(["==",l,S[0]],S[1]);return m.push(we(s,t)),m}if("categorical"===n){const m=["match",l];for(const S of e)mi(m,S[0],S[1],!1);return m.push(we(s,t)),m}if("interval"===n){const m=["step",["number",l]];for(const S of e)mi(m,S[0],S[1],!0);return li(m),void 0===s.default?m:["case",["==",["typeof",l],"number"],m,le(s.default)]}if("exponential"===n){const m=void 0!==s.base?s.base:1,S=[pt(s),1===m?["linear"]:["exponential",m],["number",l]];for(const k of e)mi(S,k[0],k[1],!1);return void 0===s.default?S:["case",["==",["typeof",l],"number"],S,le(s.default)]}throw new Error(`Unknown property function type ${n}`)}function li(s){"step"===s[0]&&3===s.length&&(s.push(0),s.push(s[3]))}function mi(s,t,e,n){s.length>3&&t===s[s.length-2]||(n&&2===s.length||s.push(t),s.push(e))}function $i(s,t){return s.type?s.type:t.expression.interpolated?"exponential":"interval"}function ln(s){const t=["concat"],e=/{([^{}]+)}/g;let n=0;for(let l=e.exec(s);null!==l;l=e.exec(s)){const m=s.slice(n,e.lastIndex-l[0].length);n=e.lastIndex,m.length>0&&t.push(m),t.push(["get",l[1]])}if(1===t.length)return s;if(n<s.length)t.push(s.slice(n));else if(2===t.length)return["to-string",t[1]];return t}class xn extends Error{constructor(t,e){super(e),this.message=e,this.key=t}}var qi=xn;class ms{constructor(t,e=[]){this.parent=t,this.bindings={};for(const[n,l]of e)this.bindings[n]=l}concat(t){return new ms(this,t)}get(t){if(this.bindings[t])return this.bindings[t];if(this.parent)return this.parent.get(t);throw new Error(`${t} not found in scope.`)}has(t){return!!this.bindings[t]||!!this.parent&&this.parent.has(t)}}var Cn=ms;const Rn={kind:"null"},We={kind:"number"},Si={kind:"string"},xi={kind:"boolean"},ns={kind:"color"},$n={kind:"object"},Pi={kind:"value"},ks={kind:"collator"},Gs={kind:"formatted"},sr={kind:"resolvedImage"};function ss(s,t){return{kind:"array",itemType:s,N:t}}function un(s){if("array"===s.kind){const t=un(s.itemType);return"number"==typeof s.N?`array<${t}, ${s.N}>`:"value"===s.itemType.kind?"array":`array<${t}>`}return s.kind}const Po=[Rn,We,Si,xi,ns,Gs,$n,ss(Pi),sr];function to(s,t){if("error"===t.kind)return null;if("array"===s.kind){if("array"===t.kind&&(0===t.N&&"value"===t.itemType.kind||!to(s.itemType,t.itemType))&&("number"!=typeof s.N||s.N===t.N))return null}else{if(s.kind===t.kind)return null;if("value"===s.kind)for(const e of Po)if(!to(e,t))return null}return`Expected ${un(s)} but found ${un(t)} instead.`}function Ro(s,t){return t.some(e=>e.kind===s.kind)}function eo(s,t){return t.some(e=>"null"===e?null===s:"array"===e?Array.isArray(s):"object"===e?s&&!Array.isArray(s)&&"object"==typeof s:e===typeof s)}class Xo{constructor(t,e,n){this.sensitivity=t?e?"variant":"case":e?"accent":"base",this.locale=n,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(t,e){return this.collator.compare(t,e)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class zs{constructor(t,e,n,l,m){this.text=t.normalize?t.normalize():t,this.image=e,this.scale=n,this.fontStack=l,this.textColor=m}}class rs{constructor(t){this.sections=t}static fromString(t){return new rs([new zs(t,null,null,null,null)])}isEmpty(){return 0===this.sections.length||!this.sections.some(t=>0!==t.text.length||t.image&&0!==t.image.name.length)}static factory(t){return t instanceof rs?t:rs.fromString(t)}toString(){return 0===this.sections.length?"":this.sections.map(t=>t.text).join("")}serialize(){const t=["format"];for(const e of this.sections){if(e.image){t.push(["image",e.image.name]);continue}t.push(e.text);const n={};e.fontStack&&(n["text-font"]=["literal",e.fontStack.split(",")]),e.scale&&(n["font-scale"]=e.scale),e.textColor&&(n["text-color"]=["rgba"].concat(e.textColor.toArray())),t.push(n)}return t}}class rr{constructor(t){this.name=t.name,this.available=t.available}toString(){return this.name}static fromString(t){return t?new rr({name:t,available:!1}):null}serialize(){return["image",this.name]}}function mo(s,t,e,n){return"number"==typeof s&&s>=0&&s<=255&&"number"==typeof t&&t>=0&&t<=255&&"number"==typeof e&&e>=0&&e<=255?typeof n>"u"||"number"==typeof n&&n>=0&&n<=1?null:`Invalid rgba value [${[s,t,e,n].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${("number"==typeof n?[s,t,e,n]:[s,t,e]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function or(s){if(null===s)return!0;if("string"==typeof s)return!0;if("boolean"==typeof s)return!0;if("number"==typeof s)return!0;if(s instanceof _s)return!0;if(s instanceof Xo)return!0;if(s instanceof rs)return!0;if(s instanceof rr)return!0;if(Array.isArray(s)){for(const t of s)if(!or(t))return!1;return!0}if("object"==typeof s){for(const t in s)if(!or(s[t]))return!1;return!0}return!1}function Bn(s){if(null===s)return Rn;if("string"==typeof s)return Si;if("boolean"==typeof s)return xi;if("number"==typeof s)return We;if(s instanceof _s)return ns;if(s instanceof Xo)return ks;if(s instanceof rs)return Gs;if(s instanceof rr)return sr;if(Array.isArray(s)){const t=s.length;let e;for(const n of s){const l=Bn(n);if(e){if(e===l)continue;e=Pi;break}e=l}return ss(e||Pi,t)}return $n}function io(s){const t=typeof s;return null===s?"":"string"===t||"number"===t||"boolean"===t?String(s):s instanceof _s||s instanceof rs||s instanceof rr?s.toString():JSON.stringify(s)}class bo{constructor(t,e){this.type=t,this.value=e}static parse(t,e){if(2!==t.length)return e.error(`'literal' expression requires exactly one argument, but found ${t.length-1} instead.`);if(!or(t[1]))return e.error("invalid value");const n=t[1];let l=Bn(n);const m=e.expectedType;return"array"===l.kind&&0===l.N&&m&&"array"===m.kind&&("number"!=typeof m.N||0===m.N)&&(l=m),new bo(l,n)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}serialize(){return"array"===this.type.kind||"object"===this.type.kind?["literal",this.value]:this.value instanceof _s?["rgba"].concat(this.value.toArray()):this.value instanceof rs?this.value.serialize():this.value}}var wo=bo,wn=class Ks{constructor(t){this.name="ExpressionEvaluationError",this.message=t}toJSON(){return this.message}};const Vo={string:Si,number:We,boolean:xi,object:$n};class Io{constructor(t,e){this.type=t,this.args=e}static parse(t,e){if(t.length<2)return e.error("Expected at least one argument.");let l,n=1;const m=t[0];if("array"===m){let k,tt;if(t.length>2){const ot=t[1];if("string"!=typeof ot||!(ot in Vo)||"object"===ot)return e.error('The item type argument of "array" must be one of string, number, boolean',1);k=Vo[ot],n++}else k=Pi;if(t.length>3){if(null!==t[2]&&("number"!=typeof t[2]||t[2]<0||t[2]!==Math.floor(t[2])))return e.error('The length argument to "array" must be a positive integer literal',2);tt=t[2],n++}l=ss(k,tt)}else l=Vo[m];const S=[];for(;n<t.length;n++){const k=e.parse(t[n],n,Pi);if(!k)return null;S.push(k)}return new Io(l,S)}evaluate(t){for(let e=0;e<this.args.length;e++){const n=this.args[e].evaluate(t);if(!to(this.type,Bn(n)))return n;if(e===this.args.length-1)throw new wn(`Expected value to be of type ${un(this.type)}, but found ${un(Bn(n))} instead.`)}return null}eachChild(t){this.args.forEach(t)}outputDefined(){return this.args.every(t=>t.outputDefined())}serialize(){const t=this.type,e=[t.kind];if("array"===t.kind){const n=t.itemType;if("string"===n.kind||"number"===n.kind||"boolean"===n.kind){e.push(n.kind);const l=t.N;("number"==typeof l||this.args.length>1)&&e.push(l)}}return e.concat(this.args.map(n=>n.serialize()))}}var ar=Io;class po{constructor(t){this.type=Gs,this.sections=t}static parse(t,e){if(t.length<2)return e.error("Expected at least one argument.");const n=t[1];if(!Array.isArray(n)&&"object"==typeof n)return e.error("First argument must be an image or text section.");const l=[];let m=!1;for(let S=1;S<=t.length-1;++S){const k=t[S];if(m&&"object"==typeof k&&!Array.isArray(k)){m=!1;let tt=null;if(k["font-scale"]&&(tt=e.parse(k["font-scale"],1,We),!tt))return null;let ot=null;if(k["text-font"]&&(ot=e.parse(k["text-font"],1,ss(Si)),!ot))return null;let Et=null;if(k["text-color"]&&(Et=e.parse(k["text-color"],1,ns),!Et))return null;const Gt=l[l.length-1];Gt.scale=tt,Gt.font=ot,Gt.textColor=Et}else{const tt=e.parse(t[S],1,Pi);if(!tt)return null;const ot=tt.type.kind;if("string"!==ot&&"value"!==ot&&"null"!==ot&&"resolvedImage"!==ot)return e.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");m=!0,l.push({content:tt,scale:null,font:null,textColor:null})}}return new po(l)}evaluate(t){return new rs(this.sections.map(n=>{const l=n.content.evaluate(t);return Bn(l)===sr?new zs("",l,null,null,null):new zs(io(l),null,n.scale?n.scale.evaluate(t):null,n.font?n.font.evaluate(t).join(","):null,n.textColor?n.textColor.evaluate(t):null)}))}eachChild(t){for(const e of this.sections)t(e.content),e.scale&&t(e.scale),e.font&&t(e.font),e.textColor&&t(e.textColor)}outputDefined(){return!1}serialize(){const t=["format"];for(const e of this.sections){t.push(e.content.serialize());const n={};e.scale&&(n["font-scale"]=e.scale.serialize()),e.font&&(n["text-font"]=e.font.serialize()),e.textColor&&(n["text-color"]=e.textColor.serialize()),t.push(n)}return t}}class yo{constructor(t){this.type=sr,this.input=t}static parse(t,e){if(2!==t.length)return e.error("Expected two arguments.");const n=e.parse(t[1],1,Si);return n?new yo(n):e.error("No image name provided.")}evaluate(t){const e=this.input.evaluate(t),n=rr.fromString(e);return n&&t.availableImages&&(n.available=t.availableImages.indexOf(e)>-1),n}eachChild(t){t(this.input)}outputDefined(){return!1}serialize(){return["image",this.input.serialize()]}}const So={"to-boolean":xi,"to-color":ns,"to-number":We,"to-string":Si};class os{constructor(t,e){this.type=t,this.args=e}static parse(t,e){if(t.length<2)return e.error("Expected at least one argument.");const n=t[0];if(("to-boolean"===n||"to-string"===n)&&2!==t.length)return e.error("Expected one argument.");const l=So[n],m=[];for(let S=1;S<t.length;S++){const k=e.parse(t[S],S,Pi);if(!k)return null;m.push(k)}return new os(l,m)}evaluate(t){if("boolean"===this.type.kind)return!!this.args[0].evaluate(t);if("color"===this.type.kind){let e,n;for(const l of this.args){if(e=l.evaluate(t),n=null,e instanceof _s)return e;if("string"==typeof e){const m=t.parseColor(e);if(m)return m}else if(Array.isArray(e)&&(n=e.length<3||e.length>4?`Invalid rbga value ${JSON.stringify(e)}: expected an array containing either three or four numeric values.`:mo(e[0],e[1],e[2],e[3]),!n))return new _s(e[0]/255,e[1]/255,e[2]/255,e[3])}throw new wn(n||`Could not parse color from value '${"string"==typeof e?e:String(JSON.stringify(e))}'`)}if("number"===this.type.kind){let e=null;for(const n of this.args){if(e=n.evaluate(t),null===e)return 0;const l=Number(e);if(!isNaN(l))return l}throw new wn(`Could not convert ${JSON.stringify(e)} to number.`)}return"formatted"===this.type.kind?rs.fromString(io(this.args[0].evaluate(t))):"resolvedImage"===this.type.kind?rr.fromString(io(this.args[0].evaluate(t))):io(this.args[0].evaluate(t))}eachChild(t){this.args.forEach(t)}outputDefined(){return this.args.every(t=>t.outputDefined())}serialize(){if("formatted"===this.type.kind)return new po([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if("resolvedImage"===this.type.kind)return new yo(this.args[0]).serialize();const t=[`to-${this.type.kind}`];return this.eachChild(e=>{t.push(e.serialize())}),t}}var Er=os;const Oo=["Unknown","Point","LineString","Polygon"];var xr=class no{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null,this.featureTileCoord=null,this.featureDistanceData=null}id(){return this.feature&&void 0!==this.feature.id?this.feature.id:null}geometryType(){return this.feature?"number"==typeof this.feature.type?Oo[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}distanceFromCenter(){if(this.featureTileCoord&&this.featureDistanceData){const t=this.featureDistanceData.center,e=this.featureDistanceData.scale,{x:n,y:l}=this.featureTileCoord;return this.featureDistanceData.bearing[0]*(n*e-t[0])+this.featureDistanceData.bearing[1]*(l*e-t[1])}return 0}parseColor(t){let e=this._parseColorCache[t];return e||(e=this._parseColorCache[t]=_s.parse(t)),e}};class Ts{constructor(t,e,n,l){this.name=t,this.type=e,this._evaluate=n,this.args=l}evaluate(t){return this._evaluate(t,this.args)}eachChild(t){this.args.forEach(t)}outputDefined(){return!1}serialize(){return[this.name].concat(this.args.map(t=>t.serialize()))}static parse(t,e){const n=t[0],l=Ts.definitions[n];if(!l)return e.error(`Unknown expression "${n}". If you wanted a literal array, use ["literal", [...]].`,0);const m=Array.isArray(l)?l[0]:l.type,S=Array.isArray(l)?[[l[1],l[2]]]:l.overloads,k=S.filter(([ot])=>!Array.isArray(ot)||ot.length===t.length-1);let tt=null;for(const[ot,Et]of k){tt=new Ee(e.registry,e.path,null,e.scope);const Gt=[];let Jt=!1;for(let Vt=1;Vt<t.length;Vt++){const me=t[Vt],ti=Array.isArray(ot)?ot[Vt-1]:ot.type,Be=tt.parse(me,1+Gt.length,ti);if(!Be){Jt=!0;break}Gt.push(Be)}if(!Jt){if(Array.isArray(ot)&&ot.length!==Gt.length){tt.error(`Expected ${ot.length} arguments, but found ${Gt.length} instead.`);continue}for(let Vt=0;Vt<Gt.length;Vt++){const me=Array.isArray(ot)?ot[Vt]:ot.type,ti=Gt[Vt];tt.concat(Vt+1).checkSubtype(me,ti.type)}if(0===tt.errors.length)return new Ts(n,m,Et,Gt)}}if(1===k.length)e.errors.push(...tt.errors);else{const Et=(k.length?k:S).map(([Jt])=>function Dr(s){return Array.isArray(s)?`(${s.map(un).join(", ")})`:`(${un(s.type)}...)`}(Jt)).join(" | "),Gt=[];for(let Jt=1;Jt<t.length;Jt++){const Vt=e.parse(t[Jt],1+Gt.length);if(!Vt)return null;Gt.push(un(Vt.type))}e.error(`Expected arguments of type ${Et}, but found (${Gt.join(", ")}) instead.`)}return null}static register(t,e){Ts.definitions=e;for(const n in e)t[n]=Ts}}var Xs=Ts;class Do{constructor(t,e,n){this.type=ks,this.locale=n,this.caseSensitive=t,this.diacriticSensitive=e}static parse(t,e){if(2!==t.length)return e.error("Expected one argument.");const n=t[1];if("object"!=typeof n||Array.isArray(n))return e.error("Collator options argument must be an object.");const l=e.parse(void 0!==n["case-sensitive"]&&n["case-sensitive"],1,xi);if(!l)return null;const m=e.parse(void 0!==n["diacritic-sensitive"]&&n["diacritic-sensitive"],1,xi);if(!m)return null;let S=null;return n.locale&&(S=e.parse(n.locale,1,Si),!S)?null:new Do(l,m,S)}evaluate(t){return new Xo(this.caseSensitive.evaluate(t),this.diacriticSensitive.evaluate(t),this.locale?this.locale.evaluate(t):null)}eachChild(t){t(this.caseSensitive),t(this.diacriticSensitive),this.locale&&t(this.locale)}outputDefined(){return!1}serialize(){const t={};return t["case-sensitive"]=this.caseSensitive.serialize(),t["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(t.locale=this.locale.serialize()),["collator",t]}}const Lr=8192;function Yo(s,t){s[0]=Math.min(s[0],t[0]),s[1]=Math.min(s[1],t[1]),s[2]=Math.max(s[2],t[0]),s[3]=Math.max(s[3],t[1])}function Vs(s,t){return!(s[0]<=t[0]||s[2]>=t[2]||s[1]<=t[1]||s[3]>=t[3])}function ga(s,t){const e=function so(s){return(180+s)/360}(s[0]),n=function vo(s){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+s*Math.PI/360)))/360}(s[1]),l=Math.pow(2,t.z);return[Math.round(e*l*Lr),Math.round(n*l*Lr)]}function Sa(s,t,e){const n=s[0]-t[0],l=s[1]-t[1],m=s[0]-e[0],S=s[1]-e[1];return n*S-m*l==0&&n*m<=0&&l*S<=0}function _a(s,t,e){return t[1]>s[1]!=e[1]>s[1]&&s[0]<(e[0]-t[0])*(s[1]-t[1])/(e[1]-t[1])+t[0]}function W(s,t){let e=!1;for(let n=0,l=t.length;n<l;n++){const m=t[n];for(let S=0,k=m.length;S<k-1;S++){if(Sa(s,m[S],m[S+1]))return!1;_a(s,m[S],m[S+1])&&(e=!e)}}return e}function N(s,t){for(let e=0;e<t.length;e++)if(W(s,t[e]))return!0;return!1}function et(s,t,e,n){const tt=n[0]-e[0],ot=n[1]-e[1],Et=(s[0]-e[0])*ot-tt*(s[1]-e[1]),Gt=(t[0]-e[0])*ot-tt*(t[1]-e[1]);return Et>0&&Gt<0||Et<0&&Gt>0}function ft(s,t,e,n){return 0!==function Q(s,t){return s[0]*t[1]-s[1]*t[0]}([n[0]-e[0],n[1]-e[1]],[t[0]-s[0],t[1]-s[1]])&&!(!et(s,t,e,n)||!et(e,n,s,t))}function Mt(s,t,e){for(const n of e)for(let l=0;l<n.length-1;++l)if(ft(s,t,n[l],n[l+1]))return!0;return!1}function _t(s,t){for(let e=0;e<s.length;++e)if(!W(s[e],t))return!1;for(let e=0;e<s.length-1;++e)if(Mt(s[e],s[e+1],t))return!1;return!0}function Rt(s,t){for(let e=0;e<t.length;e++)if(_t(s,t[e]))return!0;return!1}function zt(s,t,e){const n=[];for(let l=0;l<s.length;l++){const m=[];for(let S=0;S<s[l].length;S++){const k=ga(s[l][S],e);Yo(t,k),m.push(k)}n.push(m)}return n}function vt(s,t,e){const n=[];for(let l=0;l<s.length;l++){const m=zt(s[l],t,e);n.push(m)}return n}function Lt(s,t,e,n){if(s[0]<e[0]||s[0]>e[2]){const l=.5*n;let m=s[0]-e[0]>l?-n:e[0]-s[0]>l?n:0;0===m&&(m=s[0]-e[2]>l?-n:e[2]-s[0]>l?n:0),s[0]+=m}Yo(t,s)}function Dt(s,t,e,n){const l=Math.pow(2,n.z)*Lr,m=[n.x*Lr,n.y*Lr],S=[];if(!s)return S;for(const k of s)for(const tt of k){const ot=[tt.x+m[0],tt.y+m[1]];Lt(ot,t,e,l),S.push(ot)}return S}function bt(s,t,e,n){const l=Math.pow(2,n.z)*Lr,m=[n.x*Lr,n.y*Lr],S=[];if(!s)return S;for(const k of s){const tt=[];for(const ot of k){const Et=[ot.x+m[0],ot.y+m[1]];Yo(t,Et),tt.push(Et)}S.push(tt)}if(t[2]-t[0]<=l/2){!function wt(s){s[0]=s[1]=1/0,s[2]=s[3]=-1/0}(t);for(const k of S)for(const tt of k)Lt(tt,t,e,l)}return S}class Bt{constructor(t,e){this.type=xi,this.geojson=t,this.geometries=e}static parse(t,e){if(2!==t.length)return e.error(`'within' expression requires exactly one argument, but found ${t.length-1} instead.`);if(or(t[1])){const n=t[1];if("FeatureCollection"===n.type)for(let l=0;l<n.features.length;++l){const m=n.features[l].geometry.type;if("Polygon"===m||"MultiPolygon"===m)return new Bt(n,n.features[l].geometry)}else if("Feature"===n.type){const l=n.geometry.type;if("Polygon"===l||"MultiPolygon"===l)return new Bt(n,n.geometry)}else if("Polygon"===n.type||"MultiPolygon"===n.type)return new Bt(n,n)}return e.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(t){if(null!=t.geometry()&&null!=t.canonicalID()){if("Point"===t.geometryType())return function qt(s,t){const e=[1/0,1/0,-1/0,-1/0],n=[1/0,1/0,-1/0,-1/0],l=s.canonicalID();if(!l)return!1;if("Polygon"===t.type){const m=zt(t.coordinates,n,l),S=Dt(s.geometry(),e,n,l);if(!Vs(e,n))return!1;for(const k of S)if(!W(k,m))return!1}if("MultiPolygon"===t.type){const m=vt(t.coordinates,n,l),S=Dt(s.geometry(),e,n,l);if(!Vs(e,n))return!1;for(const k of S)if(!N(k,m))return!1}return!0}(t,this.geometries);if("LineString"===t.geometryType())return function yt(s,t){const e=[1/0,1/0,-1/0,-1/0],n=[1/0,1/0,-1/0,-1/0],l=s.canonicalID();if(!l)return!1;if("Polygon"===t.type){const m=zt(t.coordinates,n,l),S=bt(s.geometry(),e,n,l);if(!Vs(e,n))return!1;for(const k of S)if(!_t(k,m))return!1}if("MultiPolygon"===t.type){const m=vt(t.coordinates,n,l),S=bt(s.geometry(),e,n,l);if(!Vs(e,n))return!1;for(const k of S)if(!Rt(k,m))return!1}return!0}(t,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}serialize(){return["within",this.geojson]}}var $t=Bt;function ae(s){if(s instanceof Xs){if("get"===s.name&&1===s.args.length)return!1;if("feature-state"===s.name)return!1;if("has"===s.name&&1===s.args.length)return!1;if("properties"===s.name||"geometry-type"===s.name||"id"===s.name)return!1;if(/^filter-/.test(s.name))return!1}if(s instanceof $t)return!1;let t=!0;return s.eachChild(e=>{t&&!ae(e)&&(t=!1)}),t}function re(s){if(s instanceof Xs&&"feature-state"===s.name)return!1;let t=!0;return s.eachChild(e=>{t&&!re(e)&&(t=!1)}),t}function xe(s,t){if(s instanceof Xs&&t.indexOf(s.name)>=0)return!1;let e=!0;return s.eachChild(n=>{e&&!xe(n,t)&&(e=!1)}),e}class se{constructor(t,e){this.type=e.type,this.name=t,this.boundExpression=e}static parse(t,e){if(2!==t.length||"string"!=typeof t[1])return e.error("'var' expression requires exactly one string literal argument.");const n=t[1];return e.scope.has(n)?new se(n,e.scope.get(n)):e.error(`Unknown variable "${n}". Make sure "${n}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(t){return this.boundExpression.evaluate(t)}eachChild(){}outputDefined(){return!1}serialize(){return["var",this.name]}}var Re=se;class oe{constructor(t,e=[],n,l=new Cn,m=[]){this.registry=t,this.path=e,this.key=e.map(S=>`[${S}]`).join(""),this.scope=l,this.errors=m,this.expectedType=n}parse(t,e,n,l,m={}){return e?this.concat(e,n,l)._parse(t,m):this._parse(t,m)}_parse(t,e){function n(l,m,S){return"assert"===S?new ar(m,[l]):"coerce"===S?new Er(m,[l]):l}if((null===t||"string"==typeof t||"boolean"==typeof t||"number"==typeof t)&&(t=["literal",t]),Array.isArray(t)){if(0===t.length)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const l=t[0];if("string"!=typeof l)return this.error(`Expression name must be a string, but found ${typeof l} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const m=this.registry[l];if(m){let S=m.parse(t,this);if(!S)return null;if(this.expectedType){const k=this.expectedType,tt=S.type;if("string"!==k.kind&&"number"!==k.kind&&"boolean"!==k.kind&&"object"!==k.kind&&"array"!==k.kind||"value"!==tt.kind)if("color"!==k.kind&&"formatted"!==k.kind&&"resolvedImage"!==k.kind||"value"!==tt.kind&&"string"!==tt.kind){if(this.checkSubtype(k,tt))return null}else S=n(S,k,e.typeAnnotation||"coerce");else S=n(S,k,e.typeAnnotation||"assert")}if(!(S instanceof wo)&&"resolvedImage"!==S.type.kind&&he(S)){const k=new xr;try{S=new wo(S.type,S.evaluate(k))}catch(tt){return this.error(tt.message),null}}return S}return this.error(`Unknown expression "${l}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(typeof t>"u"?"'undefined' value invalid. Use null instead.":"object"==typeof t?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof t} instead.`)}concat(t,e,n){const l="number"==typeof t?this.path.concat(t):this.path,m=n?this.scope.concat(n):this.scope;return new oe(this.registry,l,e||null,m,this.errors)}error(t,...e){const n=`${this.key}${e.map(l=>`[${l}]`).join("")}`;this.errors.push(new qi(n,t))}checkSubtype(t,e){const n=to(t,e);return n&&this.error(n),n}}var Ee=oe;function he(s){if(s instanceof Re)return he(s.boundExpression);if(s instanceof Xs&&"error"===s.name)return!1;if(s instanceof Do)return!1;if(s instanceof $t)return!1;const t=s instanceof Er||s instanceof ar;let e=!0;return s.eachChild(n=>{e=t?e&&he(n):e&&n instanceof wo}),!!e&&ae(s)&&xe(s,["zoom","heatmap-density","line-progress","sky-radial-progress","accumulated","is-supported-script","pitch","distance-from-center"])}function Ie(s,t){const e=s.length-1;let S,k,n=0,l=e,m=0;for(;n<=l;)if(m=Math.floor((n+l)/2),S=s[m],k=s[m+1],S<=t){if(m===e||t<k)return m;n=m+1}else{if(!(S>t))throw new wn("Input is not a number.");l=m-1}return 0}class Se{constructor(t,e,n){this.type=t,this.input=e,this.labels=[],this.outputs=[];for(const[l,m]of n)this.labels.push(l),this.outputs.push(m)}static parse(t,e){if(t.length-1<4)return e.error(`Expected at least 4 arguments, but found only ${t.length-1}.`);if((t.length-1)%2!=0)return e.error("Expected an even number of arguments.");const n=e.parse(t[1],1,We);if(!n)return null;const l=[];let m=null;e.expectedType&&"value"!==e.expectedType.kind&&(m=e.expectedType);for(let S=1;S<t.length;S+=2){const k=1===S?-1/0:t[S],tt=t[S+1],ot=S,Et=S+1;if("number"!=typeof k)return e.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',ot);if(l.length&&l[l.length-1][0]>=k)return e.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',ot);const Gt=e.parse(tt,Et,m);if(!Gt)return null;m=m||Gt.type,l.push([k,Gt])}return new Se(m,n,l)}evaluate(t){const e=this.labels,n=this.outputs;if(1===e.length)return n[0].evaluate(t);const l=this.input.evaluate(t);if(l<=e[0])return n[0].evaluate(t);const m=e.length;return l>=e[m-1]?n[m-1].evaluate(t):n[Ie(e,l)].evaluate(t)}eachChild(t){t(this.input);for(const e of this.outputs)t(e)}outputDefined(){return this.outputs.every(t=>t.outputDefined())}serialize(){const t=["step",this.input.serialize()];for(let e=0;e<this.labels.length;e++)e>0&&t.push(this.labels[e]),t.push(this.outputs[e].serialize());return t}}var Oe=Se,Je=Ot;function Ot(s,t,e,n){this.cx=3*s,this.bx=3*(e-s)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*t,this.by=3*(n-t)-this.cy,this.ay=1-this.cy-this.by,this.p1x=s,this.p1y=n,this.p2x=e,this.p2y=n}Ot.prototype.sampleCurveX=function(s){return((this.ax*s+this.bx)*s+this.cx)*s},Ot.prototype.sampleCurveY=function(s){return((this.ay*s+this.by)*s+this.cy)*s},Ot.prototype.sampleCurveDerivativeX=function(s){return(3*this.ax*s+2*this.bx)*s+this.cx},Ot.prototype.solveCurveX=function(s,t){var e,n,l,m,S;for(typeof t>"u"&&(t=1e-6),l=s,S=0;S<8;S++){if(m=this.sampleCurveX(l)-s,Math.abs(m)<t)return l;var k=this.sampleCurveDerivativeX(l);if(Math.abs(k)<1e-6)break;l-=m/k}if((l=s)<(e=0))return e;if(l>(n=1))return n;for(;e<n;){if(m=this.sampleCurveX(l),Math.abs(m-s)<t)return l;s>m?e=l:n=l,l=.5*(n-e)+e}return l},Ot.prototype.solve=function(s,t){return this.sampleCurveY(this.solveCurveX(s,t))};var Qt=Zi(Je);function Xt(s,t,e){return s*(1-e)+t*e}var te=Object.freeze({__proto__:null,number:Xt,color:function ye(s,t,e){return new _s(Xt(s.r,t.r,e),Xt(s.g,t.g,e),Xt(s.b,t.b,e),Xt(s.a,t.a,e))},array:function Nt(s,t,e){return s.map((n,l)=>Xt(n,t[l],e))}});const Ae=4/29,pe=6/29,De=3*pe*pe,Ke=pe*pe*pe,Le=Math.PI/180,ni=180/Math.PI;function ii(s){return s>Ke?Math.pow(s,1/3):s/De+Ae}function hi(s){return s>pe?s*s*s:De*(s-Ae)}function ri(s){return 255*(s<=.0031308?12.92*s:1.055*Math.pow(s,1/2.4)-.055)}function oi(s){return(s/=255)<=.04045?s/12.92:Math.pow((s+.055)/1.055,2.4)}function fi(s){const t=oi(s.r),e=oi(s.g),n=oi(s.b),l=ii((.4124564*t+.3575761*e+.1804375*n)/.95047),m=ii((.2126729*t+.7151522*e+.072175*n)/1);return{l:116*m-16,a:500*(l-m),b:200*(m-ii((.0193339*t+.119192*e+.9503041*n)/1.08883)),alpha:s.a}}function Xi(s){let t=(s.l+16)/116,e=isNaN(s.a)?t:t+s.a/500,n=isNaN(s.b)?t:t-s.b/200;return t=1*hi(t),e=.95047*hi(e),n=1.08883*hi(n),new _s(ri(3.2404542*e-1.5371385*t-.4985314*n),ri(-.969266*e+1.8760108*t+.041556*n),ri(.0556434*e-.2040259*t+1.0572252*n),s.alpha)}function mn(s,t,e){const n=t-s;return s+e*(n>180||n<-180?n-360*Math.round(n/360):n)}const In={forward:fi,reverse:Xi,interpolate:function Ji(s,t,e){return{l:Xt(s.l,t.l,e),a:Xt(s.a,t.a,e),b:Xt(s.b,t.b,e),alpha:Xt(s.alpha,t.alpha,e)}}},Sn_forward=function Fi(s){const{l:t,a:e,b:n}=fi(s),l=Math.atan2(n,e)*ni;return{h:l<0?l+360:l,c:Math.sqrt(e*e+n*n),l:t,alpha:s.a}},Sn_reverse=function Ni(s){const t=s.h*Le,e=s.c;return Xi({l:s.l,a:Math.cos(t)*e,b:Math.sin(t)*e,alpha:s.alpha})},Sn_interpolate=function Jn(s,t,e){return{h:mn(s.h,t.h,e),c:Xt(s.c,t.c,e),l:Xt(s.l,t.l,e),alpha:Xt(s.alpha,t.alpha,e)}};class On{constructor(t,e,n,l,m){this.type=t,this.operator=e,this.interpolation=n,this.input=l,this.labels=[],this.outputs=[];for(const[S,k]of m)this.labels.push(S),this.outputs.push(k)}static interpolationFactor(t,e,n,l){let m=0;if("exponential"===t.name)m=ro(e,t.base,n,l);else if("linear"===t.name)m=ro(e,1,n,l);else if("cubic-bezier"===t.name){const S=t.controlPoints;m=new Qt(S[0],S[1],S[2],S[3]).solve(ro(e,1,n,l))}return m}static parse(t,e){let[n,l,m,...S]=t;if(!Array.isArray(l)||0===l.length)return e.error("Expected an interpolation type expression.",1);if("linear"===l[0])l={name:"linear"};else if("exponential"===l[0]){const ot=l[1];if("number"!=typeof ot)return e.error("Exponential interpolation requires a numeric base.",1,1);l={name:"exponential",base:ot}}else{if("cubic-bezier"!==l[0])return e.error(`Unknown interpolation type ${String(l[0])}`,1,0);{const ot=l.slice(1);if(4!==ot.length||ot.some(Et=>"number"!=typeof Et||Et<0||Et>1))return e.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);l={name:"cubic-bezier",controlPoints:ot}}}if(t.length-1<4)return e.error(`Expected at least 4 arguments, but found only ${t.length-1}.`);if((t.length-1)%2!=0)return e.error("Expected an even number of arguments.");if(m=e.parse(m,2,We),!m)return null;const k=[];let tt=null;"interpolate-hcl"===n||"interpolate-lab"===n?tt=ns:e.expectedType&&"value"!==e.expectedType.kind&&(tt=e.expectedType);for(let ot=0;ot<S.length;ot+=2){const Et=S[ot],Gt=S[ot+1],Jt=ot+3,Vt=ot+4;if("number"!=typeof Et)return e.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',Jt);if(k.length&&k[k.length-1][0]>=Et)return e.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',Jt);const me=e.parse(Gt,Vt,tt);if(!me)return null;tt=tt||me.type,k.push([Et,me])}return"number"===tt.kind||"color"===tt.kind||"array"===tt.kind&&"number"===tt.itemType.kind&&"number"==typeof tt.N?new On(tt,n,l,m,k):e.error(`Type ${un(tt)} is not interpolatable.`)}evaluate(t){const e=this.labels,n=this.outputs;if(1===e.length)return n[0].evaluate(t);const l=this.input.evaluate(t);if(l<=e[0])return n[0].evaluate(t);const m=e.length;if(l>=e[m-1])return n[m-1].evaluate(t);const S=Ie(e,l),ot=On.interpolationFactor(this.interpolation,l,e[S],e[S+1]),Et=n[S].evaluate(t),Gt=n[S+1].evaluate(t);return"interpolate"===this.operator?te[this.type.kind.toLowerCase()](Et,Gt,ot):"interpolate-hcl"===this.operator?Sn_reverse(Sn_interpolate(Sn_forward(Et),Sn_forward(Gt),ot)):In.reverse(In.interpolate(In.forward(Et),In.forward(Gt),ot))}eachChild(t){t(this.input);for(const e of this.outputs)t(e)}outputDefined(){return this.outputs.every(t=>t.outputDefined())}serialize(){let t;t="linear"===this.interpolation.name?["linear"]:"exponential"===this.interpolation.name?1===this.interpolation.base?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);const e=[this.operator,t,this.input.serialize()];for(let n=0;n<this.labels.length;n++)e.push(this.labels[n],this.outputs[n].serialize());return e}}function ro(s,t,e,n){const l=n-e,m=s-e;return 0===l?0:1===t?m/l:(Math.pow(t,m)-1)/(Math.pow(t,l)-1)}var Qn=On;class Ys{constructor(t,e){this.type=t,this.args=e}static parse(t,e){if(t.length<2)return e.error("Expectected at least one argument.");let n=null;const l=e.expectedType;l&&"value"!==l.kind&&(n=l);const m=[];for(const k of t.slice(1)){const tt=e.parse(k,1+m.length,n,void 0,{typeAnnotation:"omit"});if(!tt)return null;n=n||tt.type,m.push(tt)}return l&&m.some(k=>to(l,k.type))?new Ys(Pi,m):new Ys(n,m)}evaluate(t){let l,e=null,n=0;for(const m of this.args){if(n++,e=m.evaluate(t),e&&e instanceof rr&&!e.available&&(l||(l=e),e=null,n===this.args.length))return l;if(null!==e)break}return e}eachChild(t){this.args.forEach(t)}outputDefined(){return this.args.every(t=>t.outputDefined())}serialize(){const t=["coalesce"];return this.eachChild(e=>{t.push(e.serialize())}),t}}var Zo=Ys;class Lo{constructor(t,e){this.type=e.type,this.bindings=[].concat(t),this.result=e}evaluate(t){return this.result.evaluate(t)}eachChild(t){for(const e of this.bindings)t(e[1]);t(this.result)}static parse(t,e){if(t.length<4)return e.error(`Expected at least 3 arguments, but found ${t.length-1} instead.`);const n=[];for(let m=1;m<t.length-1;m+=2){const S=t[m];if("string"!=typeof S)return e.error(`Expected string, but found ${typeof S} instead.`,m);if(/[^a-zA-Z0-9_]/.test(S))return e.error("Variable names must contain only alphanumeric characters or '_'.",m);const k=e.parse(t[m+1],m+1);if(!k)return null;n.push([S,k])}const l=e.parse(t[t.length-1],t.length-1,e.expectedType,n);return l?new Lo(n,l):null}outputDefined(){return this.result.outputDefined()}serialize(){const t=["let"];for(const[e,n]of this.bindings)t.push(e,n.serialize());return t.push(this.result.serialize()),t}}var Ho=Lo;class Fo{constructor(t,e,n){this.type=t,this.index=e,this.input=n}static parse(t,e){if(3!==t.length)return e.error(`Expected 2 arguments, but found ${t.length-1} instead.`);const n=e.parse(t[1],1,We),l=e.parse(t[2],2,ss(e.expectedType||Pi));return n&&l?new Fo(l.type.itemType,n,l):null}evaluate(t){const e=this.index.evaluate(t),n=this.input.evaluate(t);if(e<0)throw new wn(`Array index out of bounds: ${e} < 0.`);if(e>=n.length)throw new wn(`Array index out of bounds: ${e} > ${n.length-1}.`);if(e!==Math.floor(e))throw new wn(`Array index must be an integer, but found ${e} instead.`);return n[e]}eachChild(t){t(this.index),t(this.input)}outputDefined(){return!1}serialize(){return["at",this.index.serialize(),this.input.serialize()]}}var oa=Fo;class No{constructor(t,e){this.type=xi,this.needle=t,this.haystack=e}static parse(t,e){if(3!==t.length)return e.error(`Expected 2 arguments, but found ${t.length-1} instead.`);const n=e.parse(t[1],1,Pi),l=e.parse(t[2],2,Pi);return n&&l?Ro(n.type,[xi,Si,We,Rn,Pi])?new No(n,l):e.error(`Expected first argument to be of type boolean, string, number or null, but found ${un(n.type)} instead`):null}evaluate(t){const e=this.needle.evaluate(t),n=this.haystack.evaluate(t);if(null==n)return!1;if(!eo(e,["boolean","string","number","null"]))throw new wn(`Expected first argument to be of type boolean, string, number or null, but found ${un(Bn(e))} instead.`);if(!eo(n,["string","array"]))throw new wn(`Expected second argument to be of type array or string, but found ${un(Bn(n))} instead.`);return n.indexOf(e)>=0}eachChild(t){t(this.needle),t(this.haystack)}outputDefined(){return!0}serialize(){return["in",this.needle.serialize(),this.haystack.serialize()]}}var nl=No;class aa{constructor(t,e,n){this.type=We,this.needle=t,this.haystack=e,this.fromIndex=n}static parse(t,e){if(t.length<=2||t.length>=5)return e.error(`Expected 3 or 4 arguments, but found ${t.length-1} instead.`);const n=e.parse(t[1],1,Pi),l=e.parse(t[2],2,Pi);if(!n||!l)return null;if(!Ro(n.type,[xi,Si,We,Rn,Pi]))return e.error(`Expected first argument to be of type boolean, string, number or null, but found ${un(n.type)} instead`);if(4===t.length){const m=e.parse(t[3],3,We);return m?new aa(n,l,m):null}return new aa(n,l)}evaluate(t){const e=this.needle.evaluate(t),n=this.haystack.evaluate(t);if(!eo(e,["boolean","string","number","null"]))throw new wn(`Expected first argument to be of type boolean, string, number or null, but found ${un(Bn(e))} instead.`);if(!eo(n,["string","array"]))throw new wn(`Expected second argument to be of type array or string, but found ${un(Bn(n))} instead.`);if(this.fromIndex){const l=this.fromIndex.evaluate(t);return n.indexOf(e,l)}return n.indexOf(e)}eachChild(t){t(this.needle),t(this.haystack),this.fromIndex&&t(this.fromIndex)}outputDefined(){return!1}serialize(){if(null!=this.fromIndex&&void 0!==this.fromIndex){const t=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),t]}return["index-of",this.needle.serialize(),this.haystack.serialize()]}}var sl=aa;class ma{constructor(t,e,n,l,m,S){this.inputType=t,this.type=e,this.input=n,this.cases=l,this.outputs=m,this.otherwise=S}static parse(t,e){if(t.length<5)return e.error(`Expected at least 4 arguments, but found only ${t.length-1}.`);if(t.length%2!=1)return e.error("Expected an even number of arguments.");let n,l;e.expectedType&&"value"!==e.expectedType.kind&&(l=e.expectedType);const m={},S=[];for(let ot=2;ot<t.length-1;ot+=2){let Et=t[ot];const Gt=t[ot+1];Array.isArray(Et)||(Et=[Et]);const Jt=e.concat(ot);if(0===Et.length)return Jt.error("Expected at least one branch label.");for(const me of Et){if("number"!=typeof me&&"string"!=typeof me)return Jt.error("Branch labels must be numbers or strings.");if("number"==typeof me&&Math.abs(me)>Number.MAX_SAFE_INTEGER)return Jt.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if("number"==typeof me&&Math.floor(me)!==me)return Jt.error("Numeric branch labels must be integer values.");if(n){if(Jt.checkSubtype(n,Bn(me)))return null}else n=Bn(me);if(typeof m[String(me)]<"u")return Jt.error("Branch labels must be unique.");m[String(me)]=S.length}const Vt=e.parse(Gt,ot,l);if(!Vt)return null;l=l||Vt.type,S.push(Vt)}const k=e.parse(t[1],1,Pi);if(!k)return null;const tt=e.parse(t[t.length-1],t.length-1,l);return!tt||"value"!==k.type.kind&&e.concat(1).checkSubtype(n,k.type)?null:new ma(n,l,k,m,S,tt)}evaluate(t){const e=this.input.evaluate(t);return(Bn(e)===this.inputType&&this.outputs[this.cases[e]]||this.otherwise).evaluate(t)}eachChild(t){t(this.input),this.outputs.forEach(t),t(this.otherwise)}outputDefined(){return this.outputs.every(t=>t.outputDefined())&&this.otherwise.outputDefined()}serialize(){const t=["match",this.input.serialize()],e=Object.keys(this.cases).sort(),n=[],l={};for(const S of e){const k=l[this.cases[S]];void 0===k?(l[this.cases[S]]=n.length,n.push([this.cases[S],[S]])):n[k][1].push(S)}const m=S=>"number"===this.inputType.kind?Number(S):S;for(const[S,k]of n)t.push(1===k.length?m(k[0]):k.map(m)),t.push(this.outputs[S].serialize());return t.push(this.otherwise.serialize()),t}}var rl=ma;class pa{constructor(t,e,n){this.type=t,this.branches=e,this.otherwise=n}static parse(t,e){if(t.length<4)return e.error(`Expected at least 3 arguments, but found only ${t.length-1}.`);if(t.length%2!=0)return e.error("Expected an odd number of arguments.");let n;e.expectedType&&"value"!==e.expectedType.kind&&(n=e.expectedType);const l=[];for(let S=1;S<t.length-1;S+=2){const k=e.parse(t[S],S,xi);if(!k)return null;const tt=e.parse(t[S+1],S+1,n);if(!tt)return null;l.push([k,tt]),n=n||tt.type}const m=e.parse(t[t.length-1],t.length-1,n);return m?new pa(n,l,m):null}evaluate(t){for(const[e,n]of this.branches)if(e.evaluate(t))return n.evaluate(t);return this.otherwise.evaluate(t)}eachChild(t){for(const[e,n]of this.branches)t(e),t(n);t(this.otherwise)}outputDefined(){return this.branches.every(([t,e])=>e.outputDefined())&&this.otherwise.outputDefined()}serialize(){const t=["case"];return this.eachChild(e=>{t.push(e.serialize())}),t}}var ol=pa;class la{constructor(t,e,n,l){this.type=t,this.input=e,this.beginIndex=n,this.endIndex=l}static parse(t,e){if(t.length<=2||t.length>=5)return e.error(`Expected 3 or 4 arguments, but found ${t.length-1} instead.`);const n=e.parse(t[1],1,Pi),l=e.parse(t[2],2,We);if(!n||!l)return null;if(!Ro(n.type,[ss(Pi),Si,Pi]))return e.error(`Expected first argument to be of type array or string, but found ${un(n.type)} instead`);if(4===t.length){const m=e.parse(t[3],3,We);return m?new la(n.type,n,l,m):null}return new la(n.type,n,l)}evaluate(t){const e=this.input.evaluate(t),n=this.beginIndex.evaluate(t);if(!eo(e,["string","array"]))throw new wn(`Expected first argument to be of type array or string, but found ${un(Bn(e))} instead.`);if(this.endIndex){const l=this.endIndex.evaluate(t);return e.slice(n,l)}return e.slice(n)}eachChild(t){t(this.input),t(this.beginIndex),this.endIndex&&t(this.endIndex)}outputDefined(){return!1}serialize(){if(null!=this.endIndex&&void 0!==this.endIndex){const t=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),t]}return["slice",this.input.serialize(),this.beginIndex.serialize()]}}var al=la;function Oa(s,t){return"=="===s||"!="===s?"boolean"===t.kind||"string"===t.kind||"number"===t.kind||"null"===t.kind||"value"===t.kind:"string"===t.kind||"number"===t.kind||"value"===t.kind}function Da(s,t,e,n){return 0===n.compare(t,e)}function Vr(s,t,e){const n="=="!==s&&"!="!==s;return class Nh{constructor(m,S,k){this.type=xi,this.lhs=m,this.rhs=S,this.collator=k,this.hasUntypedArgument="value"===m.type.kind||"value"===S.type.kind}static parse(m,S){if(3!==m.length&&4!==m.length)return S.error("Expected two or three arguments.");const k=m[0];let tt=S.parse(m[1],1,Pi);if(!tt)return null;if(!Oa(k,tt.type))return S.concat(1).error(`"${k}" comparisons are not supported for type '${un(tt.type)}'.`);let ot=S.parse(m[2],2,Pi);if(!ot)return null;if(!Oa(k,ot.type))return S.concat(2).error(`"${k}" comparisons are not supported for type '${un(ot.type)}'.`);if(tt.type.kind!==ot.type.kind&&"value"!==tt.type.kind&&"value"!==ot.type.kind)return S.error(`Cannot compare types '${un(tt.type)}' and '${un(ot.type)}'.`);n&&("value"===tt.type.kind&&"value"!==ot.type.kind?tt=new ar(ot.type,[tt]):"value"!==tt.type.kind&&"value"===ot.type.kind&&(ot=new ar(tt.type,[ot])));let Et=null;if(4===m.length){if("string"!==tt.type.kind&&"string"!==ot.type.kind&&"value"!==tt.type.kind&&"value"!==ot.type.kind)return S.error("Cannot use collator to compare non-string types.");if(Et=S.parse(m[3],3,ks),!Et)return null}return new Nh(tt,ot,Et)}evaluate(m){const S=this.lhs.evaluate(m),k=this.rhs.evaluate(m);if(n&&this.hasUntypedArgument){const tt=Bn(S),ot=Bn(k);if(tt.kind!==ot.kind||"string"!==tt.kind&&"number"!==tt.kind)throw new wn(`Expected arguments for "${s}" to be (string, string) or (number, number), but found (${tt.kind}, ${ot.kind}) instead.`)}if(this.collator&&!n&&this.hasUntypedArgument){const tt=Bn(S),ot=Bn(k);if("string"!==tt.kind||"string"!==ot.kind)return t(m,S,k)}return this.collator?e(m,S,k,this.collator.evaluate(m)):t(m,S,k)}eachChild(m){m(this.lhs),m(this.rhs),this.collator&&m(this.collator)}outputDefined(){return!0}serialize(){const m=[s];return this.eachChild(S=>{m.push(S.serialize())}),m}}}const Uo=Vr("==",function ll(s,t,e){return t===e},Da),pl=Vr("!=",function hl(s,t,e){return t!==e},function Dn(s,t,e,n){return!Da(0,t,e,n)}),yl=Vr("<",function cl(s,t,e){return t<e},function _n(s,t,e,n){return n.compare(t,e)<0}),ya=Vr(">",function ul(s,t,e){return t>e},function gl(s,t,e,n){return n.compare(t,e)>0}),$o=Vr("<=",function dl(s,t,e){return t<=e},function _l(s,t,e,n){return n.compare(t,e)<=0}),La=Vr(">=",function fl(s,t,e){return t>=e},function ml(s,t,e,n){return n.compare(t,e)>=0});class ha{constructor(t,e,n,l,m,S){this.type=Si,this.number=t,this.locale=e,this.currency=n,this.unit=l,this.minFractionDigits=m,this.maxFractionDigits=S}static parse(t,e){if(3!==t.length)return e.error("Expected two arguments.");const n=e.parse(t[1],1,We);if(!n)return null;const l=t[2];if("object"!=typeof l||Array.isArray(l))return e.error("NumberFormat options argument must be an object.");let m=null;if(l.locale&&(m=e.parse(l.locale,1,Si),!m))return null;let S=null;if(l.currency&&(S=e.parse(l.currency,1,Si),!S))return null;let k=null;if(l.unit&&(k=e.parse(l.unit,1,Si),!k))return null;let tt=null;if(l["min-fraction-digits"]&&(tt=e.parse(l["min-fraction-digits"],1,We),!tt))return null;let ot=null;return l["max-fraction-digits"]&&(ot=e.parse(l["max-fraction-digits"],1,We),!ot)?null:new ha(n,m,S,k,tt,ot)}evaluate(t){return new Intl.NumberFormat(this.locale?this.locale.evaluate(t):[],{style:(this.currency?"currency":this.unit&&"unit")||"decimal",currency:this.currency?this.currency.evaluate(t):void 0,unit:this.unit?this.unit.evaluate(t):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(t):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(t):void 0}).format(this.number.evaluate(t))}eachChild(t){t(this.number),this.locale&&t(this.locale),this.currency&&t(this.currency),this.unit&&t(this.unit),this.minFractionDigits&&t(this.minFractionDigits),this.maxFractionDigits&&t(this.maxFractionDigits)}outputDefined(){return!1}serialize(){const t={};return this.locale&&(t.locale=this.locale.serialize()),this.currency&&(t.currency=this.currency.serialize()),this.unit&&(t.unit=this.unit.serialize()),this.minFractionDigits&&(t["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(t["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),t]}}class ca{constructor(t){this.type=We,this.input=t}static parse(t,e){if(2!==t.length)return e.error(`Expected 1 argument, but found ${t.length-1} instead.`);const n=e.parse(t[1],1);return n?"array"!==n.type.kind&&"string"!==n.type.kind&&"value"!==n.type.kind?e.error(`Expected argument of type string or array, but found ${un(n.type)} instead.`):new ca(n):null}evaluate(t){const e=this.input.evaluate(t);if("string"==typeof e)return e.length;if(Array.isArray(e))return e.length;throw new wn(`Expected value to be of type string or array, but found ${un(Bn(e))} instead.`)}eachChild(t){t(this.input)}outputDefined(){return!1}serialize(){const t=["length"];return this.eachChild(e=>{t.push(e.serialize())}),t}}const Eo={"==":Uo,"!=":pl,">":ya,"<":yl,">=":La,"<=":$o,array:ar,at:oa,boolean:ar,case:ol,coalesce:Zo,collator:Do,format:po,image:yo,in:nl,"index-of":sl,interpolate:Qn,"interpolate-hcl":Qn,"interpolate-lab":Qn,length:ca,let:Ho,literal:wo,match:rl,number:ar,"number-format":ha,object:ar,slice:al,step:Oe,string:ar,"to-boolean":Er,"to-color":Er,"to-number":Er,"to-string":Er,var:Re,within:$t};function Jo(s,[t,e,n,l]){t=t.evaluate(s),e=e.evaluate(s),n=n.evaluate(s);const m=l?l.evaluate(s):1,S=mo(t,e,n,m);if(S)throw new wn(S);return new _s(t/255*m,e/255*m,n/255*m,m)}function Fa(s,t){return s in t}function va(s,t){const e=t[s];return typeof e>"u"?null:e}function xo(s){return{type:s}}Xs.register(Eo,{error:[{kind:"error"},[Si],(s,[t])=>{throw new wn(t.evaluate(s))}],typeof:[Si,[Pi],(s,[t])=>un(Bn(t.evaluate(s)))],"to-rgba":[ss(We,4),[ns],(s,[t])=>t.evaluate(s).toArray()],rgb:[ns,[We,We,We],Jo],rgba:[ns,[We,We,We,We],Jo],has:{type:xi,overloads:[[[Si],(s,[t])=>Fa(t.evaluate(s),s.properties())],[[Si,$n],(s,[t,e])=>Fa(t.evaluate(s),e.evaluate(s))]]},get:{type:Pi,overloads:[[[Si],(s,[t])=>va(t.evaluate(s),s.properties())],[[Si,$n],(s,[t,e])=>va(t.evaluate(s),e.evaluate(s))]]},"feature-state":[Pi,[Si],(s,[t])=>va(t.evaluate(s),s.featureState||{})],properties:[$n,[],s=>s.properties()],"geometry-type":[Si,[],s=>s.geometryType()],id:[Pi,[],s=>s.id()],zoom:[We,[],s=>s.globals.zoom],pitch:[We,[],s=>s.globals.pitch||0],"distance-from-center":[We,[],s=>s.distanceFromCenter()],"heatmap-density":[We,[],s=>s.globals.heatmapDensity||0],"line-progress":[We,[],s=>s.globals.lineProgress||0],"sky-radial-progress":[We,[],s=>s.globals.skyRadialProgress||0],accumulated:[Pi,[],s=>void 0===s.globals.accumulated?null:s.globals.accumulated],"+":[We,xo(We),(s,t)=>{let e=0;for(const n of t)e+=n.evaluate(s);return e}],"*":[We,xo(We),(s,t)=>{let e=1;for(const n of t)e*=n.evaluate(s);return e}],"-":{type:We,overloads:[[[We,We],(s,[t,e])=>t.evaluate(s)-e.evaluate(s)],[[We],(s,[t])=>-t.evaluate(s)]]},"/":[We,[We,We],(s,[t,e])=>t.evaluate(s)/e.evaluate(s)],"%":[We,[We,We],(s,[t,e])=>t.evaluate(s)%e.evaluate(s)],ln2:[We,[],()=>Math.LN2],pi:[We,[],()=>Math.PI],e:[We,[],()=>Math.E],"^":[We,[We,We],(s,[t,e])=>Math.pow(t.evaluate(s),e.evaluate(s))],sqrt:[We,[We],(s,[t])=>Math.sqrt(t.evaluate(s))],log10:[We,[We],(s,[t])=>Math.log(t.evaluate(s))/Math.LN10],ln:[We,[We],(s,[t])=>Math.log(t.evaluate(s))],log2:[We,[We],(s,[t])=>Math.log(t.evaluate(s))/Math.LN2],sin:[We,[We],(s,[t])=>Math.sin(t.evaluate(s))],cos:[We,[We],(s,[t])=>Math.cos(t.evaluate(s))],tan:[We,[We],(s,[t])=>Math.tan(t.evaluate(s))],asin:[We,[We],(s,[t])=>Math.asin(t.evaluate(s))],acos:[We,[We],(s,[t])=>Math.acos(t.evaluate(s))],atan:[We,[We],(s,[t])=>Math.atan(t.evaluate(s))],min:[We,xo(We),(s,t)=>Math.min(...t.map(e=>e.evaluate(s)))],max:[We,xo(We),(s,t)=>Math.max(...t.map(e=>e.evaluate(s)))],abs:[We,[We],(s,[t])=>Math.abs(t.evaluate(s))],round:[We,[We],(s,[t])=>{const e=t.evaluate(s);return e<0?-Math.round(-e):Math.round(e)}],floor:[We,[We],(s,[t])=>Math.floor(t.evaluate(s))],ceil:[We,[We],(s,[t])=>Math.ceil(t.evaluate(s))],"filter-==":[xi,[Si,Pi],(s,[t,e])=>s.properties()[t.value]===e.value],"filter-id-==":[xi,[Pi],(s,[t])=>s.id()===t.value],"filter-type-==":[xi,[Si],(s,[t])=>s.geometryType()===t.value],"filter-<":[xi,[Si,Pi],(s,[t,e])=>{const n=s.properties()[t.value],l=e.value;return typeof n==typeof l&&n<l}],"filter-id-<":[xi,[Pi],(s,[t])=>{const e=s.id(),n=t.value;return typeof e==typeof n&&e<n}],"filter->":[xi,[Si,Pi],(s,[t,e])=>{const n=s.properties()[t.value],l=e.value;return typeof n==typeof l&&n>l}],"filter-id->":[xi,[Pi],(s,[t])=>{const e=s.id(),n=t.value;return typeof e==typeof n&&e>n}],"filter-<=":[xi,[Si,Pi],(s,[t,e])=>{const n=s.properties()[t.value],l=e.value;return typeof n==typeof l&&n<=l}],"filter-id-<=":[xi,[Pi],(s,[t])=>{const e=s.id(),n=t.value;return typeof e==typeof n&&e<=n}],"filter->=":[xi,[Si,Pi],(s,[t,e])=>{const n=s.properties()[t.value],l=e.value;return typeof n==typeof l&&n>=l}],"filter-id->=":[xi,[Pi],(s,[t])=>{const e=s.id(),n=t.value;return typeof e==typeof n&&e>=n}],"filter-has":[xi,[Pi],(s,[t])=>t.value in s.properties()],"filter-has-id":[xi,[],s=>null!==s.id()&&void 0!==s.id()],"filter-type-in":[xi,[ss(Si)],(s,[t])=>t.value.indexOf(s.geometryType())>=0],"filter-id-in":[xi,[ss(Pi)],(s,[t])=>t.value.indexOf(s.id())>=0],"filter-in-small":[xi,[Si,ss(Pi)],(s,[t,e])=>e.value.indexOf(s.properties()[t.value])>=0],"filter-in-large":[xi,[Si,ss(Pi)],(s,[t,e])=>function El(s,t,e,n){for(;e<=n;){const l=e+n>>1;if(t[l]===s)return!0;t[l]>s?n=l-1:e=l+1}return!1}(s.properties()[t.value],e.value,0,e.value.length-1)],all:{type:xi,overloads:[[[xi,xi],(s,[t,e])=>t.evaluate(s)&&e.evaluate(s)],[xo(xi),(s,t)=>{for(const e of t)if(!e.evaluate(s))return!1;return!0}]]},any:{type:xi,overloads:[[[xi,xi],(s,[t,e])=>t.evaluate(s)||e.evaluate(s)],[xo(xi),(s,t)=>{for(const e of t)if(e.evaluate(s))return!0;return!1}]]},"!":[xi,[xi],(s,[t])=>!t.evaluate(s)],"is-supported-script":[xi,[Si],(s,[t])=>{const e=s.globals&&s.globals.isSupportedScript;return!e||e(t.evaluate(s))}],upcase:[Si,[Si],(s,[t])=>t.evaluate(s).toUpperCase()],downcase:[Si,[Si],(s,[t])=>t.evaluate(s).toLowerCase()],concat:[Si,xo(Pi),(s,t)=>t.map(e=>io(e.evaluate(s))).join("")],"resolved-locale":[Si,[ks],(s,[t])=>t.evaluate(s).resolvedLocale()]});var Na=Eo;function Ea(s){return{result:"success",value:s}}function jo(s){return{result:"error",value:s}}function Ua(s){return"object"==typeof s&&null!==s&&!Array.isArray(s)}class Tl{constructor(t,e){this.expression=t,this._warningHistory={},this._evaluator=new xr,this._defaultValue=e?function Rl(s){return"color"===s.type&&(Ua(s.default)||Array.isArray(s.default))?new _s(0,0,0,0):"color"===s.type?_s.parse(s.default)||null:void 0===s.default?null:s.default}(e):null,this._enumValues=e&&"enum"===e.type?e.values:null}evaluateWithoutErrorHandling(t,e,n,l,m,S,k,tt){return this._evaluator.globals=t,this._evaluator.feature=e,this._evaluator.featureState=n,this._evaluator.canonical=l||null,this._evaluator.availableImages=m||null,this._evaluator.formattedSection=S,this._evaluator.featureTileCoord=k||null,this._evaluator.featureDistanceData=tt||null,this.expression.evaluate(this._evaluator)}evaluate(t,e,n,l,m,S,k,tt){this._evaluator.globals=t,this._evaluator.feature=e||null,this._evaluator.featureState=n||null,this._evaluator.canonical=l||null,this._evaluator.availableImages=m||null,this._evaluator.formattedSection=S||null,this._evaluator.featureTileCoord=k||null,this._evaluator.featureDistanceData=tt||null;try{const ot=this.expression.evaluate(this._evaluator);if(null==ot||"number"==typeof ot&&ot!=ot)return this._defaultValue;if(this._enumValues&&!(ot in this._enumValues))throw new wn(`Expected value to be one of ${Object.keys(this._enumValues).map(Et=>JSON.stringify(Et)).join(", ")}, but found ${JSON.stringify(ot)} instead.`);return ot}catch(ot){return this._warningHistory[ot.message]||(this._warningHistory[ot.message]=!0,typeof console<"u"&&console.warn(ot.message)),this._defaultValue}}}function Mo(s,t){const e=new Ee(Na,[],t?function Pl(s){const t={color:ns,string:Si,number:We,enum:Si,boolean:xi,formatted:Gs,resolvedImage:sr};return"array"===s.type?ss(t[s.value]||Pi,s.length):t[s.type]}(t):void 0),n=e.parse(s,void 0,void 0,void 0,t&&"string"===t.type?{typeAnnotation:"coerce"}:void 0);return n?Ea(new Tl(n,t)):jo(e.errors)}class ja{constructor(t,e){this.kind=t,this._styleExpression=e,this.isStateDependent="constant"!==t&&!re(e.expression)}evaluateWithoutErrorHandling(t,e,n,l,m,S){return this._styleExpression.evaluateWithoutErrorHandling(t,e,n,l,m,S)}evaluate(t,e,n,l,m,S){return this._styleExpression.evaluate(t,e,n,l,m,S)}}class Ba{constructor(t,e,n,l){this.kind=t,this.zoomStops=n,this._styleExpression=e,this.isStateDependent="camera"!==t&&!re(e.expression),this.interpolationType=l}evaluateWithoutErrorHandling(t,e,n,l,m,S){return this._styleExpression.evaluateWithoutErrorHandling(t,e,n,l,m,S)}evaluate(t,e,n,l,m,S){return this._styleExpression.evaluate(t,e,n,l,m,S)}interpolationFactor(t,e,n){return this.interpolationType?Qn.interpolationFactor(this.interpolationType,t,e,n):0}}function Cl(s,t){if("error"===(s=Mo(s,t)).result)return s;const e=s.value.expression,n=ae(e);if(!n&&!function xl(s){return"data-driven"===s["property-type"]}(t))return jo([new qi("","data expressions not supported")]);const l=xe(e,["zoom","pitch","distance-from-center"]);if(!l&&!function Ml(s){return!!s.expression&&s.expression.parameters.indexOf("zoom")>-1}(t))return jo([new qi("","zoom expressions not supported")]);const m=ua(e);if(!m&&!l)return jo([new qi("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')]);if(m instanceof qi)return jo([m]);if(m instanceof Qn&&!function Al(s){return!!s.expression&&s.expression.interpolated}(t))return jo([new qi("",'"interpolate" expressions cannot be used with this property')]);if(!m)return Ea(new ja(n?"constant":"source",s.value));return Ea(new Ba(n?"camera":"composite",s.value,m.labels,m instanceof Qn?m.interpolation:void 0))}function ua(s){let t=null;if(s instanceof Ho)t=ua(s.result);else if(s instanceof Zo){for(const e of s.args)if(t=ua(e),t)break}else(s instanceof Oe||s instanceof Qn)&&s.input instanceof Xs&&"zoom"===s.input.name&&(t=s);return t instanceof qi||s.eachChild(e=>{const n=ua(e);n instanceof qi?t=n:!t&&n?t=new qi("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):t&&n&&t!==n&&(t=new qi("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),t}function xa(s){if(Array.isArray(s))return s.map(xa);if(s instanceof Object&&!(s instanceof Number||s instanceof String||s instanceof Boolean)){const t={};for(const e in s)t[e]=xa(s[e]);return t}return function bl(s){return s instanceof Number||s instanceof String||s instanceof Boolean?s.valueOf():s}(s)}var Wa={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},terrain:{type:"terrain"},fog:{type:"fog"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},projection:{type:"projection"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{},sky:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background","layout_sky"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_sky:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"},"fill-extrusion-edge-radius":{type:"number",private:!0,default:0,minimum:0,maximum:1,"property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_symbol:{type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature","pitch","distance-from-center"]}},filter_fill:{type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},filter_line:{type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},filter_circle:{type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},"filter_fill-extrusion":{type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},filter_heatmap:{type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},expression_name:{type:"enum",values:{let:{group:"Variable binding"},var:{group:"Variable binding"},literal:{group:"Types"},array:{group:"Types"},at:{group:"Lookup"},in:{group:"Lookup"},"index-of":{group:"Lookup"},slice:{group:"Lookup"},case:{group:"Decision"},match:{group:"Decision"},coalesce:{group:"Decision"},step:{group:"Ramps, scales, curves"},interpolate:{group:"Ramps, scales, curves"},"interpolate-hcl":{group:"Ramps, scales, curves"},"interpolate-lab":{group:"Ramps, scales, curves"},ln2:{group:"Math"},pi:{group:"Math"},e:{group:"Math"},typeof:{group:"Types"},string:{group:"Types"},number:{group:"Types"},boolean:{group:"Types"},object:{group:"Types"},collator:{group:"Types"},format:{group:"Types"},image:{group:"Types"},"number-format":{group:"Types"},"to-string":{group:"Types"},"to-number":{group:"Types"},"to-boolean":{group:"Types"},"to-rgba":{group:"Color"},"to-color":{group:"Types"},rgb:{group:"Color"},rgba:{group:"Color"},get:{group:"Lookup"},has:{group:"Lookup"},length:{group:"Lookup"},properties:{group:"Feature data"},"feature-state":{group:"Feature data"},"geometry-type":{group:"Feature data"},id:{group:"Feature data"},zoom:{group:"Camera"},pitch:{group:"Camera"},"distance-from-center":{group:"Camera"},"heatmap-density":{group:"Heatmap"},"line-progress":{group:"Feature data"},"sky-radial-progress":{group:"sky"},accumulated:{group:"Feature data"},"+":{group:"Math"},"*":{group:"Math"},"-":{group:"Math"},"/":{group:"Math"},"%":{group:"Math"},"^":{group:"Math"},sqrt:{group:"Math"},log10:{group:"Math"},ln:{group:"Math"},log2:{group:"Math"},sin:{group:"Math"},cos:{group:"Math"},tan:{group:"Math"},asin:{group:"Math"},acos:{group:"Math"},atan:{group:"Math"},min:{group:"Math"},max:{group:"Math"},round:{group:"Math"},abs:{group:"Math"},ceil:{group:"Math"},floor:{group:"Math"},distance:{group:"Math"},"==":{group:"Decision"},"!=":{group:"Decision"},">":{group:"Decision"},"<":{group:"Decision"},">=":{group:"Decision"},"<=":{group:"Decision"},all:{group:"Decision"},any:{group:"Decision"},"!":{group:"Decision"},within:{group:"Decision"},"is-supported-script":{group:"String"},upcase:{group:"String"},downcase:{group:"String"},concat:{group:"String"},"resolved-locale":{group:"String"}}},fog:{range:{type:"array",default:[.5,10],minimum:-20,maximum:20,length:2,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"high-color":{type:"color","property-type":"data-constant",default:"#245cdf",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"space-color":{type:"color","property-type":"data-constant",default:["interpolate",["linear"],["zoom"],4,"#010b19",7,"#367ab9"],expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-blend":{type:"number","property-type":"data-constant",default:["interpolate",["linear"],["zoom"],4,.2,7,.1],minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"star-intensity":{type:"number","property-type":"data-constant",default:["interpolate",["linear"],["zoom"],5,.35,6,0],minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},projection:{name:{type:"enum",values:{albers:{},equalEarth:{},equirectangular:{},lambertConformalConic:{},mercator:{},naturalEarth:{},winkelTripel:{},globe:{}},default:"mercator",required:!0},center:{type:"array",length:2,value:"number","property-type":"data-constant",minimum:[-180,-90],maximum:[180,90],transition:!1,requires:[{name:["albers","lambertConformalConic"]}]},parallels:{type:"array",length:2,value:"number","property-type":"data-constant",minimum:[-90,-90],maximum:[90,90],transition:!1,requires:[{name:["albers","lambertConformalConic"]}]}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number","property-type":"data-constant",default:1,minimum:0,maximum:1e3,expression:{interpolated:!0,parameters:["zoom"]},transition:!0,requires:["source"]}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background","paint_sky"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!1,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!1,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-ambient-occlusion-intensity":{"property-type":"data-constant",type:"number",private:!0,default:0,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fill-extrusion-ambient-occlusion-radius":{"property-type":"data-constant",type:"number",private:!0,default:3,minimum:0,expression:{interpolated:!0,parameters:["zoom"]},transition:!0,requires:["fill-extrusion-edge-radius"]}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!1,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-pattern":{type:"resolvedImage",transition:!1,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"},"line-trim-offset":{type:"array",value:"number",length:2,default:[0,0],minimum:[0,0],maximum:[1,1],transition:!1,requires:[{source:"geojson",has:{lineMetrics:!0}}],"property-type":"constant"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_sky:{"sky-type":{type:"enum",values:{gradient:{},atmosphere:{}},default:"atmosphere",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun":{type:"array",value:"number",length:2,units:"degrees",minimum:[0,0],maximum:[360,180],transition:!1,requires:[{"sky-type":"atmosphere"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun-intensity":{type:"number",requires:[{"sky-type":"atmosphere"}],default:10,minimum:0,maximum:100,transition:!1,"property-type":"data-constant"},"sky-gradient-center":{type:"array",requires:[{"sky-type":"gradient"}],value:"number",default:[0,0],length:2,units:"degrees",minimum:[0,0],maximum:[360,180],transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-gradient-radius":{type:"number",requires:[{"sky-type":"gradient"}],default:90,minimum:0,maximum:180,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-gradient":{type:"color",default:["interpolate",["linear"],["sky-radial-progress"],.8,"#87ceeb",1,"white"],transition:!1,requires:[{"sky-type":"gradient"}],expression:{interpolated:!0,parameters:["sky-radial-progress"]},"property-type":"color-ramp"},"sky-atmosphere-halo-color":{type:"color",default:"white",transition:!1,requires:[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-atmosphere-color":{type:"color",default:"white",transition:!1,requires:[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};function ka(s){if(!0===s||!1===s)return!0;if(!Array.isArray(s)||0===s.length)return!1;switch(s[0]){case"has":return s.length>=2&&"$id"!==s[1]&&"$type"!==s[1];case"in":return s.length>=3&&("string"!=typeof s[1]||Array.isArray(s[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return 3!==s.length||Array.isArray(s[1])||Array.isArray(s[2]);case"any":case"all":for(const t of s.slice(1))if(!ka(t)&&"boolean"!=typeof t)return!1;return!0;default:return!0}}function Qo(s,t="fill"){if(null==s)return{filter:()=>!0,needGeometry:!1,needFeature:!1};ka(s)||(s=oo(s));const e=s;let n=!0;try{n=function qo(s){if(!Yr(s))return s;let t=xa(s);return Wo(t),t=Bo(t),t}(e)}catch{console.warn(`Failed to extract static filter. Filter will continue working, but at higher memory usage and slower framerate.\nThis is most likely a bug, please report this via https://github.com/mapbox/mapbox-gl-js/issues/new?assignees=&labels=&template=Bug_report.md\nand paste the contents of this message in the report.\nThank you!\nFilter Expression:\n${JSON.stringify(e,null,2)}\n        `)}const l=Wa[`filter_${t}`],m=Mo(n,l);let S=null;if("error"===m.result)throw new Error(m.value.map(Et=>`${Et.key}: ${Et.message}`).join(", "));S=(Et,Gt,Jt)=>m.value.evaluate(Et,Gt,{},Jt);let k=null,tt=null;if(n!==e){const Et=Mo(e,l);if("error"===Et.result)throw new Error(Et.value.map(Gt=>`${Gt.key}: ${Gt.message}`).join(", "));k=(Gt,Jt,Vt,me,ti)=>Et.value.evaluate(Gt,Jt,{},Vt,void 0,void 0,me,ti),tt=!ae(Et.value.expression)}return{filter:S,dynamicFilter:k||void 0,needGeometry:Ga(n),needFeature:!!tt}}function Bo(s){if(!Array.isArray(s))return s;const t=function Sl(s){if(Il.has(s[0]))for(let t=1;t<s.length;t++)if(Yr(s[t]))return!0;return s}(s);return!0===t?t:t.map(e=>Bo(e))}function Wo(s){let t=!1;const e=[];if("case"===s[0]){for(let n=1;n<s.length-1;n+=2)t=t||Yr(s[n]),e.push(s[n+1]);e.push(s[s.length-1])}else if("match"===s[0]){t=t||Yr(s[1]);for(let n=2;n<s.length-1;n+=2)e.push(s[n+1]);e.push(s[s.length-1])}else if("step"===s[0]){t=t||Yr(s[1]);for(let n=1;n<s.length-1;n+=2)e.push(s[n+1])}t&&(s.length=0,s.push("any",...e));for(let n=1;n<s.length;n++)Wo(s[n])}function Yr(s){if(!Array.isArray(s))return!1;if(function wl(s){return"pitch"===s||"distance-from-center"===s}(s[0]))return!0;for(let t=1;t<s.length;t++)if(Yr(s[t]))return!0;return!1}const Il=new Set(["in","==","!=",">",">=","<","<=","to-boolean"]);function Ol(s,t){return s<t?-1:s>t?1:0}function Ga(s){if(!Array.isArray(s))return!1;if("within"===s[0])return!0;for(let t=1;t<s.length;t++)if(Ga(s[t]))return!0;return!1}function oo(s){if(!s)return!0;const t=s[0];return s.length<=1?"any"!==t:"=="===t?Ma(s[1],s[2],"=="):"!="===t?da(Ma(s[1],s[2],"==")):"<"===t||">"===t||"<="===t||">="===t?Ma(s[1],s[2],t):"any"===t?function Dl(s){return["any"].concat(s.map(oo))}(s.slice(1)):"all"===t?["all"].concat(s.slice(1).map(oo)):"none"===t?["all"].concat(s.slice(1).map(oo).map(da)):"in"===t?za(s[1],s.slice(2)):"!in"===t?da(za(s[1],s.slice(2))):"has"===t?Ka(s[1]):"!has"===t?da(Ka(s[1])):"within"!==t||s}function Ma(s,t,e){switch(s){case"$type":return[`filter-type-${e}`,t];case"$id":return[`filter-id-${e}`,t];default:return[`filter-${e}`,s,t]}}function za(s,t){if(0===t.length)return!1;switch(s){case"$type":return["filter-type-in",["literal",t]];case"$id":return["filter-id-in",["literal",t]];default:return t.length>200&&!t.some(e=>typeof e!=typeof t[0])?["filter-in-large",s,["literal",t.sort(Ol)]]:["filter-in-small",s,["literal",t]]}}function Ka(s){switch(s){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",s]}}function da(s){return["!",s]}var Ll=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function Fl(s,t){const e={};for(const n in s)"ref"!==n&&(e[n]=s[n]);return Ll.forEach(n=>{n in t&&(e[n]=t[n])}),e}var Va={thin:100,hairline:100,"ultra-light":200,"extra-light":200,light:300,book:300,regular:400,normal:400,plain:400,roman:400,standard:400,medium:500,"semi-bold":600,"demi-bold":600,bold:700,"extra-bold":800,"ultra-bold":800,heavy:900,black:900,"heavy-black":900,fat:900,poster:900,"ultra-black":950,"extra-black":950},i=" ",d=/(italic|oblique)$/i,x={},G=Zi(function(s,t,e){var n=x[s];if(!n){Array.isArray(s)||(s=[s]);for(var k,tt,l=400,m="normal",S=[],ot=0,Et=s.length;ot<Et;++ot){var Jt=s[ot].split(" "),Vt=Jt[Jt.length-1].toLowerCase();for(var me in"normal"==Vt||"italic"==Vt||"oblique"==Vt?(m=tt?m:Vt,tt=!0,Jt.pop(),Vt=Jt[Jt.length-1].toLowerCase()):d.test(Vt)&&(Vt=Vt.replace(d,""),m=tt?m:Jt[Jt.length-1].replace(Vt,""),tt=!0),Va){var ti=Jt.length>1?Jt[Jt.length-2].toLowerCase():"";if(Vt==me||Vt==me.replace("-","")||ti+"-"+Vt==me){l=k?l:Va[me],Jt.pop(),ti&&me.startsWith(ti)&&Jt.pop();break}}!k&&"number"==typeof Vt&&(l=Vt,k=!0);var Be=Jt.join(i).replace("Klokantech Noto Sans","Noto Sans");-1!==Be.indexOf(i)&&(Be='"'+Be+'"'),S.push(Be)}n=x[s]=[m,l,S]}return n[0]+i+n[1]+i+t+"px"+(e?"/"+e:"")+i+n[2]});const J="https://api.mapbox.com";function st(s){return 0!==s.indexOf("mapbox://")?"":s.slice(9)}function mt(s,t){const e=st(s);if(!e)return decodeURI(new URL(s,location.href).href);if(0!==e.indexOf("styles/"))throw new Error(`unexpected style url: ${s}`);const l=e.slice(7);return`${J}/styles/v1/${l}?&access_token=${t}`}function Wt(s,t,e,n){const l=new URL(s,n),m=st(s);return m?"mapbox.satellite"===m?`https://api.mapbox.com/v4/${m}/{z}/{x}/{y}${window.devicePixelRatio>=1.5?"@2x":""}.webp?access_token=${t}`:`https://{a-d}.tiles.mapbox.com/v4/${m}/{z}/{x}/{y}.vector.pbf?access_token=${t}`:(t&&(l.searchParams.has(e)||l.searchParams.set(e,t)),decodeURI(l.href))}const de={},ee={};let be=0;function je(s){return s.id||(s.id=be++),s.id}function Gi(s){return s*Math.PI/180}const ji=function(){const s=[];for(let t=78271.51696402048;s.length<=24;t/=2)s.push(t);return s}();function hn(s,t){if(typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof OffscreenCanvas<"u")return new OffscreenCanvas(s,t);const e=document.createElement("canvas");return e.width=s,e.height=t,e}function Qi(s,t){let e=0;const n=t.length;for(;e<n;++e)if(t[e]<s&&e+1<n){const m=t[e]/t[e+1];return e+Math.log(t[e]/s)/Math.log(m)}return n-1}const Kn={};function vn(s,t,e={},n){if(t in Kn)return n&&(n.request=Kn[t][0]),Kn[t][1];const l=e.transformRequest&&e.transformRequest(t,s)||t,m=(0,F.hq)(()=>l).then(S=>(S instanceof Request||(S=new Request(S)),S.headers.get("Accept")||S.headers.set("Accept","application/json"),n&&(n.request=S),fetch(S).then(function(k){return delete Kn[t],k.ok?k.json():Promise.reject(new Error("Error fetching source "+t))}).catch(function(k){return delete Kn[t],Promise.reject(new Error("Error fetching source "+t))})));return Kn[t]=[l,m],m}function lr(s,t){if("string"!=typeof s)return Promise.resolve(s);if(!s.trim().startsWith("{"))return vn("Style",s=mt(s,t.accessToken),t);try{const e=JSON.parse(s);return Promise.resolve(e)}catch(e){return Promise.reject(e)}}const ao={};function ta(s,t,e,n){const l=[2*e*t.pixelRatio+t.width,2*e*t.pixelRatio+t.height],m=hn(l[0],l[1]),S=m.getContext("2d");S.drawImage(s,t.x,t.y,t.width,t.height,e*t.pixelRatio,e*t.pixelRatio,t.width,t.height);const k=S.getImageData(0,0,l[0],l[1]);S.globalCompositeOperation="destination-over",S.fillStyle=`rgba(${255*n.r},${255*n.g},${255*n.b},${n.a})`;const tt=k.data;for(let ot=0,Et=k.width;ot<Et;++ot)for(let Gt=0,Jt=k.height;Gt<Jt;++Gt)tt[4*(Gt*Et+ot)+3]>0&&S.arc(ot,Gt,e*t.pixelRatio,0,2*Math.PI);return S.fill(),m}function Nl(s,t,e){const n=Math.max(0,Math.min(1,(e-s)/(t-s)));return n*n*(3-2*n)}function nh(s,t,e){const n=hn(t.width,t.height),l=n.getContext("2d");l.drawImage(s,t.x,t.y,t.width,t.height,0,0,t.width,t.height);const m=l.getImageData(0,0,t.width,t.height),S=m.data;for(let k=0,tt=m.width;k<tt;++k)for(let ot=0,Et=m.height;ot<Et;++ot){const Gt=4*(ot*tt+k),Vt=.75,me=.1,ti=Nl(Vt-me,Vt+me,S[Gt+3]/255);ti>0?(S[Gt+0]=Math.round(255*e.r*ti),S[Gt+1]=Math.round(255*e.g*ti),S[Gt+2]=Math.round(255*e.b*ti),S[Gt+3]=Math.round(255*ti)):S[Gt+3]=0}return l.putImageData(m,0,0),n}const Uh=Array(256).join("\u200a");function Ul(s,t){if(t>=.05){let e="";const n=s.split("\n"),l=Uh.slice(0,Math.round(t/.1));for(let m=0,S=n.length;m<S;++m)m>0&&(e+="\n"),e+=n[m].split("").join(l);return e}return s}let jl;function sh(){return jl||(jl=hn(1,1).getContext("2d")),jl}function ea(s,t){return sh().measureText(s).width+(s.length-1)*t}const rh={};function Bl(s,t,e,n){if(-1!==s.indexOf("\n")){const S=s.split("\n"),k=[];for(let tt=0,ot=S.length;tt<ot;++tt)k.push(Bl(S[tt],t,e,n));return k.join("\n")}const l=e+","+t+","+s+","+n;let m=rh[l];if(!m){const S=s.split(" ");if(S.length>1){const k=sh();k.font=t;const ot=k.measureText("M").width*e;let Et="";const Gt=[];for(let Jt=0,Vt=S.length;Jt<Vt;++Jt){const me=S[Jt],ti=Et+(Et?" ":"")+me;ea(ti,n)<=ot?Et=ti:(Et&&Gt.push(Et),Et=me)}Et&&Gt.push(Et);for(let Jt=0,Vt=Gt.length;Jt<Vt&&Vt>1;++Jt){const me=Gt[Jt];if(ea(me,n)<.35*ot){const ti=Jt>0?ea(Gt[Jt-1],n):1/0,Be=Jt<Vt-1?ea(Gt[Jt+1],n):1/0;Gt.splice(Jt,1),Vt-=1,ti<Be?(Gt[Jt-1]+=" "+me,Jt-=1):Gt[Jt]=me+" "+Gt[Jt]}}for(let Jt=0,Vt=Gt.length-1;Jt<Vt;++Jt){const me=Gt[Jt],ti=Gt[Jt+1];if(ea(me,n)>.7*ot&&ea(ti,n)<.6*ot){const Be=me.split(" "),vi=Be.pop();ea(vi,n)<.2*ot&&(Gt[Jt]=Be.join(" "),Gt[Jt+1]=vi+" "+ti),Vt-=1}}m=Gt.join("\n")}else m=s;m=Ul(m,n),rh[l]=m}return m}const jh=/font-family: ?([^;]*);/,Bh=/("|')/g;let Ya;function Wh(s){if(!Ya){Ya={};const t=document.styleSheets;for(let e=0,n=t.length;e<n;++e){const l=t[e];try{const m=l.rules||l.cssRules;if(m)for(let S=0,k=m.length;S<k;++S){const tt=m[S];if(5==tt.type){const ot=tt.cssText.match(jh);Ya[ot[1].replace(Bh,"")]=!0}}}catch{}}}return s in Ya}const Wl={},Gh={Point:1,MultiPoint:1,LineString:2,MultiLineString:2,Polygon:3,MultiPolygon:3},zh={center:[.5,.5],left:[0,.5],right:[1,.5],top:[.5,0],bottom:[.5,1],"top-left":[0,0],"top-right":[1,0],"bottom-left":[0,1],"bottom-right":[1,1]},Kh=function(s,t){const e=Cl(s,t);if("error"===e.result)throw new Error(e.value.map(n=>`${n.key}: ${n.message}`).join(", "));return e.value},kl={},Za={zoom:0};let Ha,Gl;function wi(s,t,e,n,l,m,S){const k=s.id;m||(m={},console.warn("No functionCache provided to getValue()")),m[k]||(m[k]={});const tt=m[k];if(!tt[e]){let ot=(s[t]||kl)[e];const Et=Wa[`${t}_${s.type}`][e];void 0===ot&&(ot=Et.default);let Gt=function Es(s){return Array.isArray(s)&&s.length>0&&"string"==typeof s[0]&&s[0]in Na}(ot);if(!Gt&&Ua(ot)&&(ot=function at(s,t){let e=s.stops;if(!e)return function ct(s,t){const e=["get",s.property];if(void 0===s.default)return"string"===t.type?["string",e]:e;if("enum"===t.type)return["match",e,Object.keys(t.values),e,s.default];{const n=["color"===t.type?"to-color":t.type,e,le(s.default)];return"array"===t.type&&n.splice(1,0,t.value,t.length||null),n}}(s,t);const n=e&&"object"==typeof e[0][0],l=n||void 0!==s.property,m=n||!l;return e=e.map(S=>!l&&t.tokens&&"string"==typeof S[1]?[S[0],ln(S[1])]:[S[0],le(S[1])]),n?function Ht(s,t,e){const n={},l={},m=[];for(let k=0;k<e.length;k++){const tt=e[k],ot=tt[0].zoom;void 0===n[ot]&&(n[ot]={zoom:ot,type:s.type,property:s.property,default:s.default},l[ot]=[],m.push(ot)),l[ot].push([tt[0].value,tt[1]])}if("exponential"===$i({},t)){const k=[pt(s),["linear"],["zoom"]];for(const tt of m)mi(k,tt,ze(n[tt],t,l[tt]),!1);return k}{const k=["step",["zoom"]];for(const tt of m)mi(k,tt,ze(n[tt],t,l[tt]),!0);return li(k),k}}(s,t,e):m?function Xe(s,t,e,n=["zoom"]){const l=$i(s,t);let m,S=!1;if("interval"===l)m=["step",n],S=!0;else{if("exponential"!==l)throw new Error(`Unknown zoom function type "${l}"`);{const k=void 0!==s.base?s.base:1;m=[pt(s),1===k?["linear"]:["exponential",k],n]}}for(const k of e)mi(m,k[0],k[1],S);return li(m),m}(s,t,e):ze(s,t,e)}(ot,Et),Gt=!0),Gt){const Jt=Kh(ot,Et);tt[e]=Jt.evaluate.bind(Jt)}else"color"==Et.type&&(ot=_s.parse(ot)),tt[e]=function(){return ot}}return Za.zoom=n,tt[e](Za,l,S)}function oh(s,t,e,n,l){return wi(s,"layout",`${n}-allow-overlap`,t,e,l)?wi(s,"layout",`${n}-ignore-placement`,t,e,l)?"none":"obstacle":"declutter"}function Xh(s,t,e,n,l){return l||console.warn("No filterCache provided to evaluateFilter()"),s in l||(l[s]=Qo(t).filter),Za.zoom=n,l[s](Za,e)}let zl=!1;function ko(s,t){if(s){if(!zl&&(0===s.a||0===t))return;const e=s.a;return t=void 0===t?1:t,0===e?"transparent":"rgba("+Math.round(255*s.r/e)+","+Math.round(255*s.g/e)+","+Math.round(255*s.b/e)+","+e*t+")"}return s}const Vh=/\{[^{}}]*\}/g;function Kl(s,t){return s.replace(Vh,function(e){return t[e.slice(1,-1)]||""})}let ah=!1;const $a={};function Ja(s,t,e,n=ji,l=void 0,m=void 0,S=void 0,k=void 0){if("string"==typeof t&&(t=JSON.parse(t)),8!=t.version)throw new Error("glStyle version 8 required.");let tt,ot,Et;if($a[function Ne(s,t){return je(s)+"."+(0,E.v6)(t)}(t,s)]=Array.from(arguments),m)if(typeof Image<"u"){const ci=new Image;let ki;(0,F.hq)(()=>m).then(pn=>{pn instanceof Request?fetch(pn).then(Ln=>Ln.blob()).then(Ln=>{ki=URL.createObjectURL(Ln),ci.src=ki}).catch(()=>{}):(ci.crossOrigin="anonymous",ci.src=pn,ki&&URL.revokeObjectURL(ki))}),ci.onload=function(){tt=ci,ot=[ci.width,ci.height],s.changed(),ci.onload=null}}else if(typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope){const ci=self;ci.postMessage({action:"loadImage",src:m}),ci.addEventListener("message",function(pn){"imageLoaded"===pn.data.action&&pn.data.src===m&&(tt=pn.data.image,ot=[tt.width,tt.height])})}const Gt=function Xa(s){s=s.slice();const t=Object.create(null);for(let e=0;e<s.length;e++)t[s[e].id]=s[e];for(let e=0;e<s.length;e++)"ref"in s[e]&&(s[e]=Fl(s[e],t[s[e].ref]));return s}(t.layers),Jt={},Vt=[],me={},ti={},Be=function Ve(s){let t=de[s.id];return t||(t={},de[je(s)]=t),t}(t),vi=function bi(s){let t=ee[s.id];return t||(t={},ee[je(s)]=t),t}(t);let Li;for(let ci=0,ki=Gt.length;ci<ki;++ci){const pn=Gt[ci],Ln=pn.id;if("string"==typeof e&&pn.source==e||Array.isArray(e)&&-1!==e.indexOf(Ln)){const Ki=pn["source-layer"];if(Li){if(pn.source!==Li)throw new Error(`Layer "${Ln}" does not use source "${Li}`)}else{Li=pn.source;const tn=t.sources[Li];if(!tn)throw new Error(`Source "${Li}" is not defined`);const ui=tn.type;if("vector"!==ui&&"geojson"!==ui)throw new Error(`Source "${Li}" is not of type "vector" or "geojson", but "${ui}"`)}let Ge=Jt[Ki];Ge||(Ge=[],Jt[Ki]=Ge),Ge.push({layer:pn,index:ci}),Vt.push(Ln)}}const zi=new zr.A,Mi=new Gr.A,_i=[],Bi=function(ci,ki,pn){const Ln=ci.getProperties(),Ki=Jt[Ln.layer];if(!Ki)return;let Ge=n.indexOf(ki);-1==Ge&&(Ge=Qi(ki,n));const tn=Gh[ci.getGeometry().getType()],ui={id:ci.getId(),properties:Ln,type:tn},Ri=s.get("mapbox-featurestate")[ci.getId()];let ps,en=-1;for(let Ao=0,na=Ki.length;Ao<na;++Ao){const Hs=Ki[Ao],si=Hs.layer,sa=si.id;if(void 0!==pn&&pn!==sa)continue;const Zr=si.layout||kl,co=si.paint||kl;if("none"===Zr.visibility||"minzoom"in si&&Ge<si.minzoom||"maxzoom"in si&&Ge>=si.maxzoom)continue;const Ca=si.filter;if(!Ca||Xh(sa,Ca,ui,Ge,vi)){let $s,hr,Hr,Tr,To,gi;ps=si;const fa=Hs.index;if(3==tn&&("fill"==si.type||"fill-extrusion"==si.type))if(hr=wi(si,"paint",si.type+"-opacity",Ge,ui,Be,Ri),si.type+"-pattern"in co){const Vn=wi(si,"paint",si.type+"-pattern",Ge,ui,Be,Ri);if(Vn){const Yn="string"==typeof Vn?Kl(Vn,Ln):Vn.toString();if(tt&&l&&l[Yn]){++en,gi=_i[en],(!gi||!gi.getFill()||gi.getStroke()||gi.getText())&&(gi=new mr.Ay({fill:new Gr.A}),_i[en]=gi),Hr=gi.getFill(),gi.setZIndex(fa);const Fn=Yn+"."+hr;let qn=ti[Fn];if(!qn){const cn=l[Yn],yn=hn(cn.width,cn.height),as=yn.getContext("2d");as.globalAlpha=hr,as.drawImage(tt,cn.x,cn.y,cn.width,cn.height,0,0,cn.width,cn.height),qn=as.createPattern(yn,"repeat"),ti[Fn]=qn}Hr.setColor(qn)}}}else $s=ko(wi(si,"paint",si.type+"-color",Ge,ui,Be,Ri),hr),si.type+"-outline-color"in co&&(To=ko(wi(si,"paint",si.type+"-outline-color",Ge,ui,Be,Ri),hr)),To||(To=$s),($s||To)&&(++en,gi=_i[en],(!gi||$s&&!gi.getFill()||!$s&&gi.getFill()||To&&!gi.getStroke()||!To&&gi.getStroke()||gi.getText())&&(gi=new mr.Ay({fill:$s?new Gr.A:void 0,stroke:To?new zr.A:void 0}),_i[en]=gi),$s&&(Hr=gi.getFill(),Hr.setColor($s)),To&&(Tr=gi.getStroke(),Tr.setColor(To),Tr.setWidth(.5)),gi.setZIndex(fa));if(1!=tn&&"line"==si.type){$s="line-pattern"in co?void 0:ko(wi(si,"paint","line-color",Ge,ui,Be,Ri),wi(si,"paint","line-opacity",Ge,ui,Be,Ri));const Vn=wi(si,"paint","line-width",Ge,ui,Be,Ri);$s&&Vn>0&&(++en,gi=_i[en],(!gi||!gi.getStroke()||gi.getFill()||gi.getText())&&(gi=new mr.Ay({stroke:new zr.A}),_i[en]=gi),Tr=gi.getStroke(),Tr.setLineCap(wi(si,"layout","line-cap",Ge,ui,Be,Ri)),Tr.setLineJoin(wi(si,"layout","line-join",Ge,ui,Be,Ri)),Tr.setMiterLimit(wi(si,"layout","line-miter-limit",Ge,ui,Be,Ri)),Tr.setColor($s),Tr.setWidth(Vn),Tr.setLineDash(co["line-dasharray"]?wi(si,"paint","line-dasharray",Ge,ui,Be,Ri).map(function(Yn){return Yn*Vn}):null),gi.setZIndex(fa))}let Pa,Js,eh,Cs,Ra,ba,zo,wa,ih,il=!1,En=null,Fh=0;if((1==tn||2==tn)&&"icon-image"in Zr){const Vn=wi(si,"layout","icon-image",Ge,ui,Be,Ri);if(Vn){let Yn;Pa="string"==typeof Vn?Kl(Vn,Ln):Vn.toString();const Fn=k?k(s,Pa):void 0;if(tt&&l&&l[Pa]||Fn){const qn=wi(si,"layout","icon-rotation-alignment",Ge,ui,Be,Ri);if(2==tn){const cn=ci.getGeometry();if(cn.getFlatMidpoint||cn.getFlatMidpoints){const yn=cn.getExtent();if(Math.sqrt(Math.max(Math.pow((yn[2]-yn[0])/ki,2),Math.pow((yn[3]-yn[1])/ki,2)))>150){const ls="MultiLineString"===cn.getType()?cn.getFlatMidpoints():cn.getFlatMidpoint();if(Gl||(Ha=[NaN,NaN],Gl=new Ko.Ay("Point",Ha,[],2,{},void 0)),Yn=Gl,Ha[0]=ls[0],Ha[1]=ls[1],"line"===wi(si,"layout","symbol-placement",Ge,ui,Be,Ri)&&"map"===qn){const Cr=cn.getStride(),Qs=cn.getFlatCoordinates();for(let cr=0,ts=Qs.length-Cr;cr<ts;cr+=Cr){const Nr=Qs[cr],Ur=Qs[cr+1],jr=Qs[cr+Cr],Ss=Qs[cr+Cr+1],Ia=Math.min(Nr,jr),Fc=Math.min(Ur,Ss),Nc=Math.max(Nr,jr),Uc=Math.max(Ur,Ss);if(ls[0]>=Ia&&ls[0]<=Nc&&ls[1]>=Fc&&ls[1]<=Uc){Fh=Math.atan2(Ur-Ss,jr-Nr);break}}}}}}if(2!==tn||Yn){const cn=wi(si,"layout","icon-size",Ge,ui,Be,Ri),yn=void 0!==co["icon-color"]?wi(si,"paint","icon-color",Ge,ui,Be,Ri):null;if(!yn||0!==yn.a){const as=wi(si,"paint","icon-halo-color",Ge,ui,Be,Ri),ls=wi(si,"paint","icon-halo-width",Ge,ui,Be,Ri);let Fr=`${Pa}.${cn}.${ls}.${as}`;if(null!==yn&&(Fr+=`.${yn}`),Js=me[Fr],!Js){const Cr=oh(si,Ge,ui,"icon",Be);let Qs;"icon-offset"in Zr&&(Qs=wi(si,"layout","icon-offset",Ge,ui,Be,Ri).slice(0),Qs[0]*=cn,Qs[1]*=-cn);let cr=yn?[255*yn.r,255*yn.g,255*yn.b,yn.a]:void 0;if(Fn){const ts={color:cr,rotateWithView:"map"===qn,displacement:Qs,declutterMode:Cr,scale:cn};"string"==typeof Fn?ts.src=Fn:(ts.img=Fn,ts.imgSize=[Fn.width,Fn.height]),Js=new fo.A(ts)}else{const ts=l[Pa];let Nr,Ur,jr;ls?ts.sdf?(Nr=ta(nh(tt,ts,yn||[0,0,0,1]),{x:0,y:0,width:ts.width,height:ts.height,pixelRatio:ts.pixelRatio},ls,as),cr=void 0):Nr=ta(tt,ts,ls,as):(ts.sdf?(Et||(Et=nh(tt,{x:0,y:0,width:ot[0],height:ot[1]},{r:1,g:1,b:1,a:1})),Nr=Et):Nr=tt,Ur=[ts.width,ts.height],jr=[ts.x,ts.y]),Js=new fo.A({color:cr,img:Nr,imgSize:ot,size:Ur,offset:jr,rotateWithView:"map"===qn,scale:cn/ts.pixelRatio,displacement:Qs,declutterMode:Cr})}me[Fr]=Js}}Js&&(++en,gi=_i[en],(!gi||!gi.getImage()||gi.getFill()||gi.getStroke())&&(gi=new mr.Ay,_i[en]=gi),gi.setGeometry(Yn),Js.setRotation(Fh+Gi(wi(si,"layout","icon-rotate",Ge,ui,Be,Ri))),Js.setOpacity(wi(si,"paint","icon-opacity",Ge,ui,Be,Ri)),Js.setAnchor(zh[wi(si,"layout","icon-anchor",Ge,ui,Be,Ri)]),gi.setImage(Js),En=gi.getText(),gi.setText(void 0),gi.setZIndex(fa),il=!0,eh=!1)}else eh=!0}}}if(1==tn&&"circle"===si.type){++en,gi=_i[en],(!gi||!gi.getImage()||gi.getFill()||gi.getStroke())&&(gi=new mr.Ay,_i[en]=gi);const Vn="circle-radius"in co?wi(si,"paint","circle-radius",Ge,ui,Be,Ri):5,Yn=ko(wi(si,"paint","circle-stroke-color",Ge,ui,Be,Ri),wi(si,"paint","circle-stroke-opacity",Ge,ui,Be,Ri)),Fn=wi(si,"paint","circle-translate",Ge,ui,Be,Ri),qn=ko(wi(si,"paint","circle-color",Ge,ui,Be,Ri),wi(si,"paint","circle-opacity",Ge,ui,Be,Ri)),cn=wi(si,"paint","circle-stroke-width",Ge,ui,Be,Ri),yn=Vn+"."+Yn+"."+qn+"."+cn+"."+Fn[0]+"."+Fn[1];Js=me[yn],Js||(Js=new uo.A({radius:Vn,displacement:[Fn[0],-Fn[1]],stroke:Yn&&cn>0?new zr.A({width:cn,color:Yn}):void 0,fill:qn?new Gr.A({color:qn}):void 0,declutterMode:"none"}),me[yn]=Js),gi.setImage(Js),En=gi.getText(),gi.setText(void 0),gi.setGeometry(void 0),gi.setZIndex(fa),il=!0}if("text-field"in Zr){zo=Math.round(wi(si,"layout","text-size",Ge,ui,Be,Ri));const Vn=wi(si,"layout","text-font",Ge,ui,Be,Ri);ba=wi(si,"layout","text-line-height",Ge,ui,Be,Ri),Ra=G(S?S(Vn,t.metadata?t.metadata["ol:webfonts"]:void 0):Vn,zo,ba),Ra.includes("sans-serif")||(Ra+=",sans-serif"),wa=wi(si,"layout","text-letter-spacing",Ge,ui,Be,Ri),ih=wi(si,"layout","text-max-width",Ge,ui,Be,Ri);const Yn=wi(si,"layout","text-field",Ge,ui,Be,Ri);Cs="object"==typeof Yn&&Yn.sections?1===Yn.sections.length?Yn.toString():Yn.sections.reduce((Fn,qn,cn)=>{const yn=qn.fontStack?qn.fontStack.split(","):Vn,as=G(S?S(yn):yn,zo*(qn.scale||1),ba);let ls=qn.text;if("\n"===ls)return Fn.push("\n",""),Fn;if(2!=tn){ls=Bl(ls,as,ih,wa).split("\n");for(let Fr=0,Cr=ls.length;Fr<Cr;++Fr)Fr>0&&Fn.push("\n",""),Fn.push(ls[Fr],as);return Fn}Fn.push(Ul(ls,wa),as)},[]):Kl(Yn,Ln).trim(),hr=wi(si,"paint","text-opacity",Ge,ui,Be,Ri)}if(Cs&&hr&&!eh){il||(++en,gi=_i[en],(!gi||!gi.getText()||gi.getFill()||gi.getStroke())&&(gi=new mr.Ay,_i[en]=gi),gi.setImage(void 0),gi.setGeometry(void 0));const Vn=oh(si,Ge,ui,"text",Be);gi.getText()||gi.setText(En),En=gi.getText(),(!En||"getDeclutterMode"in En&&En.getDeclutterMode()!==Vn)&&(En=new ws.A({padding:[2,2,2,2],declutterMode:Vn}),gi.setText(En));const Yn=wi(si,"layout","text-transform",Ge,ui,Be,Ri);"uppercase"==Yn?Cs=Array.isArray(Cs)?Cs.map((Ss,Ia)=>Ia%2?Ss:Ss.toUpperCase()):Cs.toUpperCase():"lowercase"==Yn&&(Cs=Array.isArray(Cs)?Cs.map((Ss,Ia)=>Ia%2?Ss:Ss.toLowerCase()):Cs.toLowerCase());const Fn=Array.isArray(Cs)?Cs:2==tn?Ul(Cs,wa):Bl(Cs,Ra,ih,wa);En.setText(Fn),En.setFont(Ra),En.setRotation(Gi(wi(si,"layout","text-rotate",Ge,ui,Be,Ri)));const qn=wi(si,"layout","text-anchor",Ge,ui,Be,Ri),cn=il||1==tn?"point":wi(si,"layout","symbol-placement",Ge,ui,Be,Ri);let yn;if("line-center"===cn?(En.setPlacement("line"),yn="center"):En.setPlacement(cn),"line"===cn&&"function"==typeof En.setRepeat){const Ss=wi(si,"layout","symbol-spacing",Ge,ui,Be,Ri);En.setRepeat(2*Ss)}En.setOverflow("point"===cn);let as=wi(si,"paint","text-halo-width",Ge,ui,Be,Ri);const ls=wi(si,"layout","text-offset",Ge,ui,Be,Ri),Fr=wi(si,"paint","text-translate",Ge,ui,Be,Ri);let Cr=0,Qs=0;if("point"==cn){yn="center",-1!==qn.indexOf("left")?(yn="left",Qs=as):-1!==qn.indexOf("right")&&(yn="right",Qs=-as);const Ss=wi(si,"layout","text-rotation-alignment",Ge,ui,Be,Ri);En.setRotateWithView("map"==Ss)}else En.setMaxAngle(Gi(wi(si,"layout","text-max-angle",Ge,ui,Be,Ri))*Cs.length/Fn.length),En.setRotateWithView(!1);En.setTextAlign(yn);let cr="middle";0==qn.indexOf("bottom")?(cr="bottom",Cr=-as-.5*(ba-1)*zo):0==qn.indexOf("top")&&(cr="top",Cr=as+.5*(ba-1)*zo),En.setTextBaseline(cr);const ts=wi(si,"layout","text-justify",Ge,ui,Be,Ri);En.setJustify("auto"===ts?void 0:ts),En.setOffsetX(ls[0]*zo+Qs+Fr[0]),En.setOffsetY(ls[1]*zo+Cr+Fr[1]),Mi.setColor(ko(wi(si,"paint","text-color",Ge,ui,Be,Ri),hr)),En.setFill(Mi);const Nr=ko(wi(si,"paint","text-halo-color",Ge,ui,Be,Ri),hr);if(Nr&&as>0){zi.setColor(Nr),as*=2;const Ss=.5*zo;zi.setWidth(as<=Ss?as:Ss),En.setStroke(zi)}else En.setStroke(void 0);const Ur=wi(si,"layout","text-padding",Ge,ui,Be,Ri),jr=En.getPadding();Ur!==jr[0]&&(jr[0]=Ur,jr[1]=Ur,jr[2]=Ur,jr[3]=Ur),gi.setZIndex(fa)}}}return en>-1?(_i.length=en+1,ah&&("set"in ci?ci.set("mapbox-layer",ps):ci.getProperties()["mapbox-layer"]=ps),_i):void 0};return s.setStyle(Bi),s.set("mapbox-source",Li),s.set("mapbox-layers",Vt),s.set("mapbox-featurestate",s.get("mapbox-featurestate")||{}),Bi}function Zh(s,t=512){return s.getExtent()?(0,Ir.EN)({extent:s.getExtent(),tileSize:t,maxZoom:22}).getResolutions():ji}function Qa(s,t,e="",n={},l=void 0){let m,S,k,tt,ot=!0;return"string"==typeof e||Array.isArray(e)?tt=e:(k=e,tt=k.source||k.layers,n=k),"string"==typeof n?(m=n,k={}):(m=n.styleUrl,k=n),!1===k.updateSource&&(ot=!1),l||(l=k.resolutions),!m&&"string"==typeof t&&!t.trim().startsWith("{")&&(m=t),m&&(m=m.startsWith("data:")?location.href:mt(m,k.accessToken),k=function lh(s,t){return t.accessToken||(t=Object.assign({},t),new URL(s).searchParams.forEach((n,l)=>{t.accessToken=n,t.accessTokenParam=l})),t}(m,k)),new Promise(function(Et,Gt){lr(t,k).then(function(Jt){if(8!=Jt.version)return Gt(new Error("glStyle version 8 required."));if(!(s instanceof fs.A||s instanceof Us.A))return Gt(new Error("Can only apply to VectorLayer or VectorTileLayer"));const Vt=s instanceof Us.A?"vector":"geojson";if(tt?S=Array.isArray(tt)?Jt.layers.find(function(Mi){return Mi.id===tt[0]}).source:tt:(S=Object.keys(Jt.sources).find(function(Mi){return Jt.sources[Mi].type===Vt}),tt=S),!S)return Gt(new Error(`No ${Vt} source found in the glStyle.`));function me(){if(!ot)return Promise.resolve();if(s instanceof Us.A)return function Xl(s,t,e){return new Promise(function(n,l){(function lo(s,t,e={}){const n=[t,JSON.stringify(s)].toString();let l=ao[n];if(!l||e.transformRequest){let m;e.transformRequest&&(m=(k,tt)=>{const ot=e.transformRequest&&e.transformRequest(tt,"Tiles")||tt;if(k instanceof Bs.A)k.setLoader((Et,Gt,Jt)=>{(0,F.hq)(()=>ot).then(Vt=>{fetch(Vt).then(me=>me.arrayBuffer()).then(me=>{const Be=k.getFormat().readFeatures(me,{extent:Et,featureProjection:Jt});k.setFeatures(Be)}).catch(me=>k.setState(js.A.ERROR))})});else{const Et=k.getImage();(0,F.hq)(()=>ot).then(Gt=>{Gt instanceof Request?fetch(Gt).then(Jt=>Jt.blob()).then(Jt=>{const Vt=URL.createObjectURL(Jt);Et.addEventListener("load",()=>URL.revokeObjectURL(Vt)),Et.addEventListener("error",()=>URL.revokeObjectURL(Vt)),Et.src=Vt}).catch(Jt=>k.setState(js.A.ERROR)):Et.src=Gt})}});const S=s.url;if(S&&!s.tiles){const k=Wt(S,e.accessToken,e.accessTokenParam||"access_token",t||location.href);if(S.startsWith("mapbox://"))l=Promise.resolve({tileJson:Object.assign({},s,{url:void 0,tiles:(0,gs.Uu)(k)}),tileLoadFunction:m});else{const tt={};l=vn("Source",k,e,tt).then(function(ot){return ot.tiles=ot.tiles.map(function(Et){return"tms"===ot.scheme&&(Et=Et.replace("{y}","{-y}")),Wt(Et,e.accessToken,e.accessTokenParam||"access_token",tt.request.url)}),Promise.resolve({tileJson:ot,tileLoadFunction:m})})}}else s=Object.assign({},s,{tiles:s.tiles.map(function(k){return"tms"===s.scheme&&(k=k.replace("{y}","{-y}")),Wt(k,e.accessToken,e.accessTokenParam||"access_token",t||location.href)})}),l=Promise.resolve({tileJson:Object.assign({},s),tileLoadFunction:m});ao[n]=l}return l})(s,t,e).then(function({tileJson:m,tileLoadFunction:S}){const k=function uh(s,t,e){const n=new yr({tileJSON:t,tileSize:s.tileSize||t.tileSize||512}),l=n.getTileJSON(),m=n.getTileGrid(),S=(0,Ei.Jt)(e.projection||"EPSG:3857"),k=function $h(s,t){const e=s.bounds;if(e){const n=(0,Ei.Rb)([e[0],e[1]],t),l=(0,Ei.Rb)([e[2],e[3]],t);return[n[0],n[1],l[0],l[1]]}return(0,Ei.Jt)(t).getExtent()}(l,S),tt=S.getExtent(),ot=l.minzoom||0,Et=l.maxzoom||22,Gt={attributions:n.getAttributions(),projection:S,tileGrid:new zn.A({origin:tt?(0,_.Py)(tt):m.getOrigin(0),extent:k||m.getExtent(),minZoom:ot,resolutions:Zh(S,t.tileSize).slice(0,Et+1),tileSize:m.getTileSize(0)})};return Array.isArray(l.tiles)?Gt.urls=l.tiles:Gt.url=l.tiles,Gt}(s,m,e);k.tileLoadFunction=S,k.format=new vs.A,n(new ys.A(k))}).catch(l)})}(Jt.sources[S],m,k).then(function(ci){const ki=s.getSource();ki?ci!==ki&&(ki.setTileUrlFunction(ci.getTileUrlFunction()),"function"==typeof ki.setUrls&&"function"==typeof ci.getUrls&&ki.setUrls(ci.getUrls()),ki.format_||(ki.format_=ci.format_),ki.getAttributions()||ki.setAttributions(ci.getAttributions()),ki.getTileLoadFunction()===ys.Y&&ki.setTileLoadFunction(ci.getTileLoadFunction()),(0,Ei.tI)(ki.getProjection(),ci.getProjection())&&(ki.tileGrid=ci.getTileGrid())):s.setSource(ci);const pn=s.getSource().getTileGrid();!isFinite(s.getMaxResolution())&&!isFinite(s.getMinZoom())&&pn.getMinZoom()>0&&s.setMaxResolution(function on(s,t){const e=Math.floor(s),n=Math.pow(2,s-e);return t[e]/n}(Math.max(0,pn.getMinZoom()-1e-12),pn.getResolutions()))});const Mi=Jt.sources[S];let _i=s.getSource();(!_i||_i.get("mapbox-source")!==Mi)&&(_i=function Vl(s,t,e){const n=e.projection?new Hn.A({dataProjection:e.projection}):new Hn.A,l=s.data,m={};if("string"==typeof l){const k=Wt(l,e.accessToken,e.accessTokenParam||"access_token",t||location.href);if(/\{bbox-[0-9a-z-]+\}/.test(k)){const ot=(Gt,Jt,Vt)=>{const me=function gh(s){return`{bbox-${(s?s.getCode():"EPSG:3857").toLowerCase().replace(/[^a-z0-9]/g,"-")}}`}(Vt);return k.replace(me,`${Gt.join(",")}`)},Et=new Qe.A({attributions:s.attribution,format:n,loader:(Gt,Jt,Vt,me,ti)=>{vn("GeoJSON","function"==typeof ot?ot(Gt,Jt,Vt):ot,e).then(vi=>{const Li=Et.getFormat().readFeatures(vi,{featureProjection:Vt});Et.addFeatures(Li),me(Li)}).catch(vi=>{Et.removeLoadedExtent(Gt),ti()})},strategy:rn.Qk});return Et.set("mapbox-source",s),Et}const tt=new Qe.A({attributions:s.attribution,format:n,url:k,loader:(ot,Et,Gt,Jt,Vt)=>{vn("GeoJSON",k,e).then(me=>{const ti=tt.getFormat().readFeatures(me,{featureProjection:Gt});tt.addFeatures(ti),Jt(ti)}).catch(me=>{tt.removeLoadedExtent(ot),Vt()})}});return tt}m.features=n.readFeatures(l,{featureProjection:(0,Ei.Tf)()||"EPSG:3857"});const S=new Qe.A(Object.assign({attributions:s.attribution,format:n},m));return S.set("mapbox-source",s),S}(Mi,m,k));const Bi=s.getSource();return Bi?_i!==Bi&&(Bi.getAttributions()||Bi.setAttributions(_i.getAttributions()),Bi.format_||(Bi.format_=_i.getFormat()),Bi.url_=_i.getUrl()):s.setSource(_i),Promise.resolve()}let ti,Be,vi,Li;function zi(){if(Li||Jt.sprite&&!Be)Li?(s.setStyle(Li),me().then(Et).catch(Gt)):Gt(new Error("Something went wrong trying to apply style."));else{if(k.projection&&!l){const _i=(0,Ei.Jt)(k.projection).getUnits();"m"!==_i&&(l=ji.map(Bi=>Bi/di.I[_i]))}Li=Ja(s,Jt,tt,l,Be,vi,(Mi,_i=k.webfonts)=>function kh(s,t="https://cdn.jsdelivr.net/npm/@fontsource/{font-family}/{fontweight}{-fontstyle}.css"){const e=s.toString();if(e in Wl)return Wl[e];const n=[];for(let l=0,m=s.length;l<m;++l){s[l]=s[l].replace("Arial Unicode MS","Arial");const k=G(s[l],1);(0,U.fZ)(k);const tt=k.split(" ");n.push([tt.slice(3).join(" ").replace(/"/g,""),tt[1],tt[0]])}for(let l=0,m=n.length;l<m;++l){const S=n[l],k=S[0];if(!Wh(k)&&100!==U.yY.get(`${S[2]}\n${S[1]} \n${k}`)){const tt=t.replace("{font-family}",k.replace(/ /g,"-").toLowerCase()).replace("{Font+Family}",k.replace(/ /g,"+")).replace("{fontweight}",S[1]).replace("{-fontstyle}",S[2].replace("normal","").replace(/(.+)/,"-$1")).replace("{fontstyle}",S[2]);if(!document.querySelector('link[href="'+tt+'"]')){const ot=document.createElement("link");ot.href=tt,ot.rel="stylesheet",document.head.appendChild(ot)}}}return Wl[e]=s,s}(Mi,_i),k.getImage),s.getStyle()?me().then(Et).catch(Gt):Gt(new Error(`Nothing to show for source [${S}]`))}}if(Jt.sprite){const Mi=new URL(function q(s,t,e){const n=st(s);if(!n)return decodeURI(new URL(s,e).href);if(0!==n.indexOf("sprites/"))throw new Error(`unexpected sprites url: ${s}`);const m=n.slice(8);return`${J}/styles/v1/${m}/sprite?access_token=${t}`}(Jt.sprite,k.accessToken,m||location.href));ti=window.devicePixelRatio>=1.5?.5:1;const _i=.5==ti?"@2x":"";let Bi=Mi.origin+Mi.pathname+_i+".json"+Mi.search;new Promise(function(ci,ki){vn("Sprite",Bi,k).then(ci).catch(function(pn){Bi=Mi.origin+Mi.pathname+".json"+Mi.search,vn("Sprite",Bi,k).then(ci).catch(ki)})}).then(function(ci){if(void 0===ci&&Gt(new Error("No sprites found.")),Be=ci,vi=Mi.origin+Mi.pathname+_i+".png"+Mi.search,k.transformRequest){const ki=k.transformRequest(vi,"SpriteImage")||vi;(ki instanceof Request||ki instanceof Promise)&&(vi=ki)}zi()}).catch(function(ci){Gt(new Error(`Sprites cannot be loaded: ${Bi}: ${ci.message}`))})}else zi()}).catch(Gt)})}const Go={};function hh(s,t,e={}){return lr(t,e).then(function(n){!function Hh(s,t,e){t.layers.some(function(n){if("background"===n.type){if(s instanceof r.A)return s.setBackground(function(l){return dh(n,l,e,{})}),!0;if(s instanceof ir||s instanceof Y.A)return s.getLayers().insertAt(0,function fh(s,t,e){const n=document.createElement("div");return n.className="ol-mapbox-style-background",n.style.position="absolute",n.style.width="100%",n.style.height="100%",new r.A({source:new Tn.A({}),render(l){const m=dh(s,l.viewState.resolution,t,e);return n.style.backgroundColor=m,n}})}(n,e,{})),!0}})}(s,n,e)})}function dh(s,t,e,n){const l={id:s.id,type:s.type},m=s.layout||{},S=s.paint||{};l.paint=S;const k=Qi(t,e.resolutions||ji);let tt;const ot=wi(l,"paint","background-color",k,Go,n);return void 0!==S["background-opacity"]&&(tt=wi(l,"paint","background-opacity",k,Go,n)),"none"==m.visibility?void 0:ko(ot,tt)}var oc=c(8518),ac=c(7849),lc=c(1888),hc=c(7659),cc=c(4579),Eh=c(4873);const dc=class uc extends Kr.A{constructor(t){const e=void 0!==t.requestEncoding?t.requestEncoding:"KVP",n=t.tileGrid;let l=t.urls;void 0===l&&void 0!==t.url&&(l=(0,gs.Uu)(t.url)),super({attributions:t.attributions,attributionsCollapsible:t.attributionsCollapsible,cacheSize:t.cacheSize,crossOrigin:t.crossOrigin,interpolate:t.interpolate,projection:t.projection,reprojectionErrorThreshold:t.reprojectionErrorThreshold,tileClass:t.tileClass,tileGrid:n,tileLoadFunction:t.tileLoadFunction,tilePixelRatio:t.tilePixelRatio,urls:l,wrapX:void 0!==t.wrapX&&t.wrapX,transition:t.transition,zDirection:t.zDirection}),this.version_=void 0!==t.version?t.version:"1.0.0",this.format_=void 0!==t.format?t.format:"image/jpeg",this.dimensions_=void 0!==t.dimensions?t.dimensions:{},this.layer_=t.layer,this.matrixSet_=t.matrixSet,this.style_=t.style,this.requestEncoding_=e,this.setKey(this.getKeyForDimensions_()),l&&l.length>0&&(this.tileUrlFunction=(0,gs.FD)(l.map(this.createFromWMTSTemplate.bind(this))))}setUrls(t){this.urls=t;const e=t.join("\n");this.setTileUrlFunction((0,gs.FD)(t.map(this.createFromWMTSTemplate.bind(this))),e)}getDimensions(){return this.dimensions_}getFormat(){return this.format_}getLayer(){return this.layer_}getMatrixSet(){return this.matrixSet_}getRequestEncoding(){return this.requestEncoding_}getStyle(){return this.style_}getVersion(){return this.version_}getKeyForDimensions_(){const t=this.urls?this.urls.slice(0):[];for(const e in this.dimensions_)t.push(e+"-"+this.dimensions_[e]);return t.join("/")}updateDimensions(t){Object.assign(this.dimensions_,t),this.setKey(this.getKeyForDimensions_())}createFromWMTSTemplate(t){const e=this.requestEncoding_,n={layer:this.layer_,style:this.style_,tilematrixset:this.matrixSet_};"KVP"==e&&Object.assign(n,{Service:"WMTS",Request:"GetTile",Version:this.version_,Format:this.format_}),t="KVP"==e?(0,Eh.L)(t,n):t.replace(/\{(\w+?)\}/g,function(S,k){return k.toLowerCase()in n?n[k.toLowerCase()]:S});const l=this.tileGrid,m=this.dimensions_;return function(S,k,tt){if(!S)return;const ot={TileMatrix:l.getMatrixId(S[0]),TileCol:S[1],TileRow:S[2]};Object.assign(ot,m);let Et=t;return Et="KVP"==e?(0,Eh.L)(Et,ot):Et.replace(/\{(\w+?)\}/g,function(Gt,Jt){return ot[Jt]}),Et}}};const fc=class xh extends zn.A{constructor(t){super({extent:t.extent,origin:t.origin,origins:t.origins,resolutions:t.resolutions,tileSize:t.tileSize,tileSizes:t.tileSizes,sizes:t.sizes}),this.matrixIds_=t.matrixIds}getMatrixId(t){return this.matrixIds_[t]}getMatrixIds(){return this.matrixIds_}};var Zl=c(7712),qa=c(1395),Hl=c(1780),Mh=c(206),gc=c(9190),Ah=c(176),Th=c(3139),Ch=c(6104),ho=c(1363);const tl="type",Zs="filtertype",Xn="id",$l="groupID",Jl="groupName",Ql="title",Mr="EPSG:4326",Ar="popup";let Ph=(()=>{class s{constructor(e,n){this.app=e,this.envInjector=n,this.hitTolerance=0,this.hitLayerCurr=null,this.hitLayerPrev=null,this.projectionChange=new Ch.B,this.dynamicPopupComponents=new Map,this.popupEvents=new Ch.B,this.filterLayerNoPopup=l=>{const m=l.get(Ar);let S=!0;return m||(S=!1),m&&this.isPopupObj(m)&&!0===m.filterLayer&&(S=!1),S},this.map=new ir({controls:[]}),this.view=new ut.Ay,this.EPSG="EPSG:3857"}createMap(e){const m=new Y.A({layers:[]});m.set(Zs,"baselayers"),m.set(Ql,"Base maps"),m.set(Xn,"ID_filtertype_baselayers");const S=new Y.A({layers:[]});S.set(Zs,"layers"),S.set(Ql,"Layers"),S.set(Xn,"ID_filtertype_layers");const k=new Y.A({layers:[]});k.set(Zs,"overlays"),k.set(Ql,"Overlays"),k.set(Xn,"ID_filtertype_overlays"),this.viewOptions={center:(0,Ei.pd)([0,0],Mr,this.EPSG),zoom:0,projection:(0,Ei.Jt)(this.EPSG)},this.view.constrainRotation&&(this.viewOptions.constrainRotation=this.view.constrainRotation),this.view.enableRotation&&(this.viewOptions.enableRotation=this.view.enableRotation),this.view.extent&&(this.viewOptions.extent=this.view.extent),this.view.constrainOnlyCenter&&(this.viewOptions.constrainOnlyCenter=this.view.constrainOnlyCenter),this.view.smoothExtentConstraint&&(this.viewOptions.smoothExtentConstraint=this.view.smoothExtentConstraint),this.view.getMaxResolution()&&(this.viewOptions.maxResolution=this.view.getMaxResolution()),this.view.getMinResolution()&&(this.viewOptions.minResolution=this.view.getMinResolution()),this.view.getMaxZoom()&&(this.viewOptions.maxZoom=this.view.getMaxZoom()),this.view.getMinZoom()&&(this.viewOptions.minZoom=this.view.getMinZoom()),this.view.multiWorld&&(this.viewOptions.multiWorld=this.view.multiWorld),this.view.constrainResolution&&(this.viewOptions.constrainResolution=this.view.constrainResolution),this.view.smoothResolutionConstraint&&(this.viewOptions.smoothResolutionConstraint=this.view.smoothResolutionConstraint),this.view.getResolution()&&(this.viewOptions.resolution=this.view.getResolution()),this.view.getResolutions()&&(this.viewOptions.resolutions=this.view.getResolutions()),this.view.rotation&&(this.viewOptions.rotation=this.view.rotation),this.view.zoomFactor&&(this.viewOptions.zoomFactor=this.view.zoomFactor);const tt=new ut.Ay(this.viewOptions);return this.map.getLayerGroup().getLayers().clear(),[m,S,k].map(ot=>this.map.addLayer(ot)),this.map.setView(tt),this.view=this.map.getView(),this.setProjection(this.EPSG),e&&this.map.setTarget(e),{map:this.map,view:this.view}}setHitTolerance(e){this.hitTolerance=e}getHitTolerance(){return this.hitTolerance}addBboxSelection(e,n,l,m){Object.assign({className:"ol-drag-select",condition:e},m);const k=new Fe(m);return n&&k.on("boxstart",tt=>{n(tt)}),l&&k.on("boxend",tt=>{const ot=k.getGeometry().getExtent();l(ot,tt)}),this.map.addInteraction(k),k}getLayers(e){const n=e.toLowerCase();let l;return this.map.getLayers().getArray().forEach(m=>{m.get(Zs)===n&&(l=m.getLayers().getArray())}),l}getLayersFromGroup(e,n,l=!1){const m=e.getLayers().getArray();let S=m;if(l){let k=[].concat(m);m.forEach(tt=>{tt instanceof Y.A&&(k=k.concat(this.getLayersFromGroup(tt,n,!0)))}),S=k}return n?S.filter(k=>k.get(Zs)&&k.get(Zs).toLowerCase()===n.toLowerCase()):S}getLayerByKey(e,n){const l=this.getLayersFromGroup(this.map.getLayerGroup(),n),m=(0,ho.nY)(l),S=[];if(m.forEach(k=>{k.get(e.key)&&k.get(e.key)===e.value&&-1===S.indexOf(k)&&S.push(k)}),!S.length){const k=this.getLayersFromGroup(this.map.getLayerGroup(),n,!0);k.length&&k.forEach(tt=>{tt.get(e.key)&&tt.get(e.key)===e.value&&-1===S.indexOf(tt)&&S.push(tt)})}return 1===S.length?S[0]:null}setRecursiveKey(e,n,l=Zs){e.set(l,n),e instanceof Y.A&&e.getLayers().forEach(m=>{this.setRecursiveKey(m,n,l)})}addLayer(e,n){const l=n.toLowerCase();let m;return this.map.getLayers().getArray().forEach(S=>{S.get(Zs)===l&&(this.isLayerInGroup(e,S)||(m=S.getLayers().getArray(),this.setRecursiveKey(e,l,Zs),m.push(e),S.setLayers(new Z.A(m))))}),m}isLayerInGroup(e,n){return!!n.getLayers().getArray().filter(S=>S.get(Xn)===e.get(Xn)).length}getLayerGroups(e){const n=[];return this.map.getLayers().forEach(l=>{l instanceof Y.A&&(e?l.get(Zs)&&l.get(Zs).toLowerCase()===e.toLowerCase()&&n.push(l):n.push(l))}),n}addLayers(e,n){const l=n.toLocaleLowerCase();let m;return this.getLayerGroups(l).forEach(k=>{k.getLayers().getLength()>0?(m=k.getLayers().getArray(),e.map(ot=>{this.isLayerInGroup(ot,k)||m.push(ot)})):m=e,m.forEach(ot=>{ot instanceof Y.A&&this.setRecursiveKey(ot,l,Zs)}),k.setLayers(new Z.A(m))}),m}setLayers(e,n){const l=n.toLocaleLowerCase(),m=this.getLayerGroups(l);return e.forEach(S=>{S instanceof Y.A&&this.setRecursiveKey(S,n.toLocaleLowerCase(),Zs)}),m.forEach(S=>{this.cleanUpEventListeners(S,e),S.setLayers(new Z.A(e))}),e}cleanUpEventListeners(e,n){const l=e.getLayers().getArray().filter(m=>!n.map(S=>S.get(Xn)).includes(m.get(Xn)));this.removeListenersFromOldLayers(l),l.forEach(m=>e.getLayers().remove(m))}addEventsToLayer(e,n,l){e.events&&(e.events.layer&&e.events.layer.forEach(m=>{n.getListeners(m.event)||n.on(m.event,m.listener)}),e.events.source&&e.events.source.forEach(m=>{l.getListeners(m.event)||l.on(m.event,m.listener)}))}removeListenersFromOldLayers(e){const n=l=>{if("function"==typeof l.getSource){const m=l.getSource();m&&(m instanceof Zl.Ay&&m.dispose(),m.hasListener()&&m.disposeInternal())}l.hasListener()&&l.disposeInternal()};e.forEach(l=>{l instanceof Y.A?l.getLayers().forEach(m=>{n(m)}):l instanceof gr.A&&n(l)})}getLayerGroupForLayer(e){const n=this.getLayersFromGroup(this.map.getLayerGroup(),null,!0);n.push(this.map.getLayerGroup());let l=null;return n.forEach(m=>{if(m instanceof Y.A){const k=this.getLayersFromGroup(m).find(tt=>tt===e);k&&(l={group:m,layer:k})}}),l}removeLayerByKey(e,n){const l=n.toLocaleLowerCase(),m=this.getLayerByKey(e,l);if(m){const S=this.getLayerGroupForLayer(m);if(S.group){const k=this.getLayersFromGroup(S.group).filter(tt=>tt!==m);S.group.setLayers(new Z.A(k))}}}updateLayerByKey(e,n,l){const m=l.toLocaleLowerCase();this.map.getLayers().forEach(S=>{if(S.get(Zs)===m){const k=S.getLayers();k.forEach((tt,ot)=>{if(tt.get(e.key)&&tt.get(e.key)===e.value){const Et=n.getProperties(),Gt=n.getExtent(),Jt=n.getMaxZoom(),Vt=n.getMinZoom(),me=n.getOpacity(),ti=n.getVisible(),Be=n.getZIndex();if(tt instanceof r.A&&n instanceof r.A){const vi=n.getSource();tt.setSource(vi)}Et&&tt.setProperties(Et),Gt&&tt.setExtent(Gt),Jt&&tt.setMaxZoom(Jt),Vt&&tt.setMinZoom(Vt),me&&tt.setOpacity(me),ti&&tt.setVisible(ti),Be&&(0,ho.Sq)(tt,Be),tt.changed(),k.setAt(ot,tt)}}),S.setLayers(k)}})}removeAllLayers(e){const n=e.toLowerCase();let l;this.map.getLayers().getArray().forEach(m=>{m.get(Zs)===n&&(l=m.getLayers(),l.clear())})}setUkisLayers(e,n,l){const m=n.toLowerCase(),S=[];if(e.length<1&&"baselayers"!==m?this.removeAllLayers(m):e.forEach((k,tt)=>{const ot=this.create_layers(k);ot&&((0,ho.Sq)(ot,tt,l),S.push(ot))}),S.length>0)return this.setLayers(S,m),{type:m,layers:S}}setUkisLayer(e,n){n||(n=e.filtertype);const l=n.toLowerCase(),S=this.getLayers(l).find(tt=>tt.get(Xn)===e.id),k=this.create_layers(e);S?(this.removeLayerByKey({key:Xn,value:S.get(Xn)},n),this.addLayer(k,n)):this.addLayer(k,n)}updateUkisLayer(e,n){n||(n=e.filtertype);const l=n.toLowerCase(),S=this.getLayers(l).find(tt=>tt.get(Xn)===e.id),k=this.create_layers(e);k&&this.updateLayerByKey({key:Xn,value:S.get(Xn)},k,n)}create_layers(e){let n;switch(e.type){case K.hq:n=this.create_xyz_layer(e);break;case K.dz:n=this.create_wms_layer(e);break;case K.Tv:n=this.create_wmts_layer(e);break;case K.ag:n=this.create_tms_layer(e);break;case K.jV:n=this.create_geojson_layer(e);break;case K.yA:n=this.create_kml_layer(e);break;case K.M:n=this.create_wfs_layer(e);break;case K.Pm:n=this.create_custom_layer(e);break;case K.fA:n=this.create_stacked_layer(e)}return n}createOlLayerOptions(e,n,l){l&&(e.attribution&&l.setAttributions([e.attribution]),e.continuousWorld&&(l.wrapX_=e.continuousWorld),e.popup&&!e.crossOrigin&&null!==e.crossOrigin&&this.sourceSetCross(l),(e.crossOrigin||null===e.crossOrigin)&&this.sourceSetCross(l));const m={opacity:e.opacity||1,visible:e.visible,zIndex:1,id:e.id,name:e.name,filtertype:e.filtertype,type:n,legendImg:e.legendImg};return l&&(m.source=l),e.popup&&(m.popup=e.popup,m.className=e.id),e.maxResolution&&(m.maxResolution=e.maxResolution),e.minResolution&&(m.minResolution=e.minResolution),e.maxZoom&&(m.maxZoom=e.maxZoom),e.minZoom&&(m.minZoom=e.minZoom),e.bbox&&(m.extent=(0,Ei.DI)(e.bbox.slice(0,4),Mr,this.getProjection().getCode())),m}create_xyz_layer(e){const n={wrapX:!1};e.crossOrigin&&(n.crossOrigin=e.crossOrigin);const l=new oc.A(n),m=this.createOlLayerOptions(e,"xyz",l),k=new _r.A(Object.assign(m,{preload:0,useInterimTilesOnError:!0}));return this.setSubdomains(e,k),this.setCrossOrigin(e,k),this.addEventsToLayer(e,k,l),k}create_tms_layer(e){let n=null;if(e instanceof K.Bk)return n=this.create_xyz_layer(e),n.set("type","tms"),n;if(e instanceof K.vK){const l=new ys.A({format:new vs.A,tileGrid:(0,Ir.EN)({minZoom:e.minZoom||void 0,maxZoom:e.maxZoom||void 0}),url:e.url,wrapX:!1}),m=this.createOlLayerOptions(e,"tms",l);n=new Us.A(Object.assign(m,{declutter:!0,renderMode:"hybrid"})),this.setCrossOrigin(e,n),this.addEventsToLayer(e,n,l);const k=e?.options?.style,tt=e?.options?.styleSource;return k&&tt&&(hh(n,k),Qa(n,k,tt).then(ot=>{this.setSubdomains(e,n)})),n}}create_wms_layer(e){let n;return"true"===e.params?.TILED||null==e.params?.TILED?n=this.create_tiled_wms_layer(e):"false"===e.params?.TILED&&(n=this.create_image_wms_layer(e)),n}create_tiled_wms_layer(e){const n={params:Object.assign({},this.keysToUppercase(e.params)),wrapX:!1};e.tileSize&&(n.tileGrid=this.getTileGrid("default",null,e.tileSize),delete n.params.tileSize),e.crossOrigin&&(n.crossOrigin=e.crossOrigin);const l=new lc.A(n),S=this.createOlLayerOptions(e,"wms",l),k=new _r.A(Object.assign(S,{preload:0,useInterimTilesOnError:!0}));return this.setSubdomains(e,k),this.addEventsToLayer(e,k,l),k}create_image_wms_layer(e){const n={params:Object.assign({},this.keysToUppercase(e.params)),url:e.url},l=new hc.A(n),m=this.createOlLayerOptions(e,"wms",l),k=new wr.A(Object.assign(m,{}));return this.addEventsToLayer(e,k,l),k}create_wmts_layer(e){if(e instanceof K.fn){let n=this.getTileGrid("wmts"),l=this.EPSG;e.params.matrixSetOptions&&(l=e.params.matrixSetOptions.matrixSet,"resolutions"in e.params.matrixSetOptions?n=this.getTileGrid("wmts",null,e.tileSize,null,e.params.matrixSetOptions.resolutions):("resolutionLevels"in e.params.matrixSetOptions||"tileMatrixPrefix"in e.params.matrixSetOptions)&&(n=this.getTileGrid("wmts",e.params.matrixSetOptions.resolutionLevels,e.tileSize,e.params.matrixSetOptions.tileMatrixPrefix,null)),"matrixIds"in e.params.matrixSetOptions&&(n=this.getTileGrid("wmts",null,e.tileSize,null,null,e.params.matrixSetOptions.matrixIds)));let m={url:e.url,tileGrid:n,matrixSet:l,wrapX:!1,layer:e.params.layer,style:e.params.style};m=Object.assign({},m,e.params),e.crossOrigin&&(m.crossOrigin=e.crossOrigin);const S=new dc(m),k=this.createOlLayerOptions(e,"wmts",S),ot=new _r.A(Object.assign(k,{}));return this.setSubdomains(e,ot),this.setCrossOrigin(e,ot),this.addEventsToLayer(e,ot,S),ot}console.error(`layer with id: ${e.id} and type ${e.type} is no instanceof WmtsLayer!`)}create_wfs_layer(e){let n=null;n=0===e.url.indexOf("http://")||0===e.url.indexOf("https://")?new URL(e.url):new URL(e.url,window.location.origin),n.searchParams.set("srsname",this.EPSG);const l=new Qe.A({format:new Hn.A,url:n.toString()}),m=this.createOlLayerOptions(e,"wfs",l),S={};e.options&&Object.assign(S,e.options);const k=new fs.A(Object.assign(m,S));return e.cluster&&this.setCluster(e,k,l,{}),this.setSubdomains(e,k),this.setCrossOrigin(e,k),this.addEventsToLayer(e,k,l),k}create_geojson_layer(e){let n;e.data?n=new Qe.A({features:this.geoJsonToFeatures(e.data),format:new Hn.A,wrapX:!1}):e.url&&(n=new Qe.A({url:e.url,format:new Hn.A({dataProjection:Mr,featureProjection:this.EPSG}),wrapX:!1}));const l=this.createOlLayerOptions(e,"geojson",n),m={};e.options&&Object.assign(m,e.options);const S=new fs.A(Object.assign(l,m));return e.cluster&&this.setCluster(e,S,n,{}),this.setCrossOrigin(e,S),this.addEventsToLayer(e,S,n),S}create_kml_layer(e){let n;e.data?n=new Qe.A({features:new Hl.Ay({extractStyles:!0}).readFeatures(e.data,{dataProjection:Mr,featureProjection:this.EPSG}),format:new Hl.Ay,wrapX:!1}):e.url&&(n=new Qe.A({url:e.url,format:new Hl.Ay({extractStyles:!0,crossOrigin:e.crossOrigin&&null===e.crossOrigin?e.crossOrigin:"anonymous"}),wrapX:!1}));const l=this.createOlLayerOptions(e,"kml",n),m={};e.options&&Object.assign(m,e.options);const S=new fs.A(Object.assign(l,m));return e.cluster&&this.setCluster(e,S,n,{}),this.setCrossOrigin(e,S),this.addEventsToLayer(e,S,l.source),S}setCrossOrigin(e,n){if(n instanceof r.A){const l=n.getSource();e.popup&&!e.crossOrigin&&null!==e.crossOrigin&&this.sourceSetCross(l),(e.crossOrigin||null===e.crossOrigin)&&this.sourceSetCross(l)}}setCluster(e,n,l,m){if(e.cluster){const S={};"object"==typeof e.cluster&&Object.assign(S,e.cluster),S.source=l;const k=new qa.A(S);n.setSource(k),n.setStyle(tt=>{const ot=tt.get("features").length;let Et=m[ot];return Et||(Et=new mr.Ay({image:new uo.A({radius:10,stroke:new zr.A({color:"#fff"}),fill:new Gr.A({color:"#3399CC"})}),text:new ws.A({text:ot.toString(),fill:new Gr.A({color:"#fff"})})}),m[ot]=Et),Et})}}setSubdomains(e,n){if(e instanceof K.vK||e instanceof K.Bk){const l=n.getSource();if(e.subdomains){if("wfs"===e.type&&l instanceof Qe.A)e.url=e.url.replace("{s}",`${e.subdomains[0]}-${e.subdomains[e.subdomains.length-1]}`),l.setUrl(e.url);else if(!(l instanceof Qe.A)){const m=e.subdomains.map(S=>e.url.replace("{s}",`${S}`));l.setUrls(m)}}else l.setUrl(e.url)}}sourceSetCross(e){(e instanceof cc.Ay||e instanceof Kr.A||e instanceof ac.A)&&(e.crossOrigin="anonymous",e.crossOrigin_="anonymous")}create_custom_layer(e){if(e.custom_layer){const n=e.custom_layer;if(n instanceof r.A){const m=n.getSource();e.attribution&&m.setAttributions([e.attribution]),m.wrapX_=!!e.continuousWorld&&e.continuousWorld,this.setCrossOrigin(e,n),this.addEventsToLayer(e,n,m),m instanceof Zl.Ay&&n.on("change:source",S=>{S.oldValue.dispose()})}else n instanceof Y.A?n.getLayers().forEach(m=>{m.set($l,e.id),m.set(Jl,e.name);const S=`${e.id}_${(0,E.v6)(m)}`;if(m.get(Xn)||m.set(Xn,S),m instanceof r.A&&(this.setCrossOrigin(e,m),this.addEventsToLayer(e,m,m.getSource())),e.popup&&!m.get(Ar)&&(m.set(Ar,e.popup),"ol-layer"===m.getClassName()&&(m.className_=S)),e.bbox){const k=(0,Ei.DI)(e.bbox.slice(0,4),Mr,this.getProjection().getCode());m.setExtent(k)}}):console.error(`The custom_layer of ${e.id} in not a openlayers Layer`);e.maxResolution&&n.setMaxResolution(e.maxResolution),e.minResolution&&n.setMinResolution(e.minResolution),e.maxZoom&&n.setMaxZoom(e.maxZoom),e.minZoom&&n.setMinZoom(e.minZoom);const l={type:"custom",name:e.name,id:e.id,visible:e.visible,legendImg:e.legendImg,opacity:e.opacity||1,zIndex:1};if(e.popup&&!(n instanceof Y.A)&&(l.popup=e.popup,n.className_=e.id),e.bbox){const m=(0,Ei.DI)(e.bbox.slice(0,4),Mr,this.getProjection().getCode());n.setExtent(m)}return n.setProperties(l),n}console.log("attribute custom_layer not set on layer type custom!",e)}create_stacked_layer(e){if(e instanceof K.FN){const n=e.layers.map(k=>(k.visible=e.visible,k.opacity=e.opacity,e.popup&&(k.popup=e.popup),e.events&&(k.events=e.events),this.create_layers(k))),l=this.createOlLayerOptions(e,"custom");return n.forEach(k=>{k.set($l,e.id),k.set(Jl,e.name)}),new Y.A(Object.assign(l,{layers:n}))}console.log("layer is not of type StackedLayer!",e)}resolutionsFromExtent(e,n,l){const m=n,S=(0,_.Oq)(e),k=(0,_.RG)(e),tt=Math.max(k/l,S/l),ot=m+1,Et=new Array(ot);for(let Gt=0;Gt<ot;++Gt)Et[Gt]=tt/Math.pow(2,Gt);return Et}matrixIdsFromResolutions(e,n){return Array.from(Array(e).keys()).map(l=>n?`${n}:${l}`:l)}getTileGrid(e="default",n,l,m,S,k){const tt=n||Th.L,ot=l||Th.R,Et=m||"",Gt=this.getProjection().getExtent(),Jt=this.resolutionsFromExtent(Gt,tt,ot),Vt=this.matrixIdsFromResolutions(Jt.length,Et),me={extent:Gt,origin:(0,_.Py)(Gt),resolutions:S||Jt,tileSize:[ot,ot]};return"wmts"===e?(me.matrixIds=k||Vt,new fc(me)):"default"===e?new zn.A(me):void 0}isPopupObj(e){return e&&"object"==typeof e&&!Array.isArray(e)}isPopupObjMove(e){return this.isPopupObj(e)&&"move"===e.event}isPopupObjClick(e){return this.isPopupObj(e)&&"click"===e.event}isPopupObjArray(e){return Array.isArray(e)&&e.length&&this.isPopupObj(e[0])}isPopupStringArray(e){return Array.isArray(e)&&e.length&&"string"==typeof e[0]}eventIsBrowserEvent(e,n){return"move"===e&&"pointermove"===n.type||"click"===e&&"click"===n.type||void 0}layersOnMapEvent(e){let n=!1;const l=this.map.getAllLayers();let m=l.length;const S=new Map;let k=null;for(;m--;){const tt=l[m];let ot=tt.getVisible(),Et=tt.getOpacity();const Gt=tt.get($l);if(Gt){const Vt=this.getLayerByKey({key:Xn,value:Gt});ot=Vt.getVisible(),Et=Vt.getOpacity()}const Jt=tt.get(Ar);if(this.checkForPopupAsObservable(tt,ot,Et,Jt,S),ot&&0!==Et&&this.filterLayerExtent(tt,e.pixel)&&!Jt)break;if(this.filterLayerNoPopup(tt)&&tt.getData&&tt.getData(e.pixel)&&this.checkIsRaster(tt)){const Vt=tt.getData(e.pixel);let me;if((Vt instanceof Uint8ClampedArray||Vt instanceof Uint8Array||Vt instanceof Float32Array)&&(me=Vt[3]),me||Vt instanceof DataView){k={layer:tt,color:Vt};break}}else if(this.filterLayerNoPopup(tt)&&this.filterLayerExtent(tt,e.pixel)&&this.checkIsVector(tt)){const Vt=this.map.getFeaturesAtPixel(e.pixel,{layerFilter:me=>tt.get(Xn)===me.get(Xn)});if(Vt.length){k={layer:tt,feature:Vt[0]};break}}}if(k){const tt=k.layer.get(Ar);this.hitLayerCurr=k.layer.get(Xn),this.hitLayerPrev||(this.hitLayerPrev=this.hitLayerCurr),(k.color||k.feature)&&(n=!0),this.hitLayerPrev&&this.hitLayerPrev!==this.hitLayerCurr&&(n=!1,this.hitLayerPrev=this.hitLayerCurr),this.checkTopLayerEvent(e,tt)&&this.layerOnEvent(e,k.layer,k.color,k.feature)}n?this.map.getTargetElement().style.cursor="pointer":(this.publishNullPropertiesAsObservable(S,e),this.removeAllPopups(tt=>"pointermove"===tt.get("addEvent")),this.map.getTargetElement().style.cursor="")}checkForPopupAsObservable(e,n,l,m,S){n&&0!==l&&m&&(this.isPopupObj(m)&&m.asObservable?S.set(e.get(Xn),e):this.isPopupObjArray(m)&&m.forEach(k=>{k.asObservable&&S.set(e.get(Xn),e)}))}publishNullPropertiesAsObservable(e,n){e.size&&e.forEach(l=>{const m=l.get(Ar),S=[];this.isPopupObj(m)&&m.asObservable?S.push(m):this.isPopupObjArray(m)&&m.forEach(k=>{k.asObservable&&S.push(k)}),S.forEach(k=>{this.eventIsBrowserEvent(k.event||"click",n)&&this.popupEvents.next({popupObj:k,popupParams:{layerId:l.get(Xn),layerName:l.get("name"),mapEvent:n,layer:l,properties:null}})})})}checkTopLayerEvent(e,n){let l=null;const m=(S,k)=>{k.event?this.eventIsBrowserEvent(k.event,S)&&this.isPopupObjClick(k)?l="click":this.eventIsBrowserEvent(k.event,S)&&this.isPopupObjMove(k)&&(l="move"):"click"===S.type&&(l="click")};return"boolean"==typeof n?!0===n&&"click"===e.type&&(l="click"):this.isPopupStringArray(n)?"click"===e.type&&(l="click"):this.isPopupObjArray(n)?n.map(S=>{m(e,S)}):m(e,n),l}checkIsRaster(e){return e instanceof bs.A||e instanceof Un.A}checkIsVector(e){return e instanceof b.A&&!this.checkIsRaster(e)}layerOnEvent(e,n,l,m){this.checkIsRaster(n)?this.rasterOnEvent(e,n,l):this.checkIsVector(n)&&this.vectorOnEvent(e,n,m)}filterLayerExtent(e,n){let l=!0;const m=e.getExtent();if(m){const S=this.map.getCoordinateFromPixel(n);(0,_.Ym)(m,S)||(l=!1)}return l}vectorOnEvent(e,n,l){if(n&&l){const m=n.get(Ar);let S={};const tt=l.getProperties().features;if(tt&&1===tt.length)S=tt[0].getProperties();else{if(tt&&tt.length>1){if("click"===e.type){const ot=this.getFeaturesExtent(tt);return this.setExtent(ot),!1}return!0}S=l.getProperties()}this.prepareAddPopup(n,e,m,l,S)}}rasterOnEvent(e,n,l){const m=n.get(Ar);m&&this.prepareAddPopup(n,e,m,null,null,l)}prepareAddPopup(e,n,l,m,S,k){const tt=e.getProperties(),ot={layerId:tt.id,layerName:tt.name||tt[Jl]||null,mapEvent:n,layer:e,properties:S?Object.assign({},S):{}};ot.properties?.geometry&&delete ot.properties.geometry,m&&(ot.feature=m),k&&(ot.color=k);const Et=Vt=>{Vt&&Vt.filterkeys&&(ot.properties=Object.keys(ot.properties).filter(me=>Vt.filterkeys.includes(me)).reduce((me,ti)=>(me[ti]=ot.properties[ti],me),{}))};this.isPopupStringArray(l)?ot.properties=Object.keys(ot.properties).filter(Vt=>l.includes(Vt)).reduce((Vt,me)=>(Vt[me]=ot.properties[me],Vt),{}):this.isPopupObjArray(l)?Et(l.find(me=>this.eventIsBrowserEvent(me.event,n))):this.isPopupObj(l)&&Et(l);const Gt=Vt=>{if(Vt.properties){const me=Object.keys(Vt.properties);Array.isArray(me)&&(ot.properties=Object.keys(ot.properties).reduce((ti,Be)=>{const vi=Vt.properties[Be];return vi?ti[vi]=ot.properties[Be]:ti[Be]=ot.properties[Be],ti},{}))}};this.isPopupObjArray(l)?l.forEach(Vt=>{this.eventIsBrowserEvent(Vt.event,n)&&Gt(Vt)}):this.isPopupObj(l)&&Gt(l);const Jt=Vt=>{"asyncPopup"in Vt?Vt.asyncPopup(ot,me=>{Vt.asObservable?this.publishPopupEvent(Vt,ot,me):this.addPopup(ot,Vt,me,Vt.event,Vt.single)}):Vt.asObservable?this.publishPopupEvent(Vt,ot):this.addPopup(ot,Vt,null,Vt.event,Vt.single)};"boolean"==typeof l||this.isPopupStringArray(l)?this.addPopup(ot):this.isPopupObjArray(l)?l.forEach(Vt=>{this.eventIsBrowserEvent(Vt.event,n)&&Jt(Vt)}):l&&Jt(l)}publishPopupEvent(e,n,l){l&&(n.properties=Object.assign(n.properties,l)),this.popupEvents.next({popupObj:e,popupParams:n})}addPopup(e,n,l,m,S){const k=e.layer.get(Ar),tt=e.layer.get(Xn),ot="popup_move_ID",Et="move_ID_L_F",Gt=this.getPopups().find(me=>me.getId()===ot),Jt=e.mapEvent;let Vt=null;if("move"===m&&(e.color?Vt=`${tt}:${e.color.toString()}`:e.feature?Vt=`${tt}:${(0,E.v6)(e.feature)}`:e.layer&&(Vt=`${tt}:${(0,E.v6)(e.layer)}`)),"move"===m&&"pointermove"===Jt.type&&Gt){let me;const ti=e.feature;if(me=ti&&"Point"===ti.getGeometry()?.getType()?ti.getGeometry().getCoordinates():Jt.coordinate,Vt!==Gt.get(Et)){const Be=this.createPopupContainer(Gt,e,n,l,m);Gt.setElement(Be)}Gt.setPosition(me),Gt.getElement().parentElement.style.zIndex="1"}else if("pointermove"!==Jt.type||m)if("pointermove"===Jt.type&&"click"===m)Gt&&this.removeAllPopups(me=>"pointermove"===me.get("addEvent"));else{let me=null;me="move"===m?ot:e.feature?`${tt}:${(0,E.v6)(e.feature)}`:e.layer?`${tt}:${(0,E.v6)(e.layer)}`:`${tt}:popup_${(new Date).getTime()}`;const ti={id:me,autoPan:{animation:{duration:250}},positioning:"bottom-center",stopEvent:!0,insertFirst:!1};let Be=ti;if(this.isPopupObjArray(k)){const Bi=k.find(ci=>this.eventIsBrowserEvent(ci.event,Jt));Bi.options&&(Be=Object.assign(ti,Bi.options))}else this.isPopupObj(k)&&k.options&&(Be=Object.assign(ti,k.options));const vi=new ds(Be);Vt&&vi.set(Et,Vt),S&&this.removeAllPopups(Bi=>{const ki=Bi.getId().toString().split(":")[0];return!ki||(tt===ki?tt===ki:void 0)});const Li=this.getPopups().find(Bi=>Bi.getId()===vi.getId()&&vi.getId()!==ot);Li&&(this.map.removeOverlay(Li),this.destroyDynamicPopupComponent(Li.getId().toString()));const zi=this.createPopupContainer(vi,e,n,l,m);let Mi;zi&&(vi.getId()===ot?vi.set("addEvent","pointermove"):vi.set("addEvent",Jt.type),vi.set(tl,Ar),vi.setElement(zi));const _i=e.feature;Mi=_i&&"Point"===_i.getGeometry()?.getType()?_i.getGeometry().getCoordinates():Jt.coordinate,zi?vi.setPosition(Mi):this.map.removeOverlay(vi),Gt&&"move"===m||this.map.addOverlay(vi)}else Gt&&this.removeAllPopups(me=>"pointermove"===me.get("addEvent"))}createPopupContainer(e,n,l,m,S){const k=document.createElement("div");k.className="ol-popup-content";let tt="",ot=!0;if(l?.popupFunction){const Et=l.popupFunction(n);"string"==typeof Et?tt=Et:!1===Et?ot=!1:tt=this.createPopupHtml(Et)}else m?tt="string"==typeof m?m:this.createPopupHtml(m):!1===m?ot=!1:Object.keys(n.properties).length?tt=this.createPopupHtml(n.properties):ot=!1;if(k.innerHTML=tt,l?.dynamicPopup){const Et=e.getId().toString();this.destroyDynamicPopupComponent(Et),this.createDynamicPopupComponent(Et,k,n,l)}if(ot){const Et=document.createElement("div");if(Et.className="ol-popup",Et.id=e.getId().toString(),Et.style.display="block",!S||"move"!==S){const Gt=document.createElement("a");Gt.className="ol-popup-closer",Et.appendChild(Gt);const Jt=()=>{Gt.removeEventListener("click",Jt,!1),this.map.removeOverlay(e),this.destroyDynamicPopupComponent(e.getId().toString())};Gt.addEventListener("click",Jt,!1)}return Et.appendChild(k),Et}}removeAllPopups(e){let n=this.getPopups();e&&(n=this.getPopups().filter(e)),n.forEach(l=>{l.get(tl)===Ar&&(this.map.removeOverlay(l),this.destroyDynamicPopupComponent(l.getId().toString()))})}hideAllPopups(e,n){let l=this.getPopups();n&&(l=this.getPopups().filter(n)),l.forEach(m=>{if(m.get(tl)===Ar){const S=m.getElement();e?S.classList.add("hidden"):S.classList.remove("hidden")}})}createPopupHtml(e){let n="<table>";for(const l in e)e.hasOwnProperty(l)&&(n+='<tr><td style="vertical-align: top; padding-right: 7px;"><b>'+l+": </b></td><td>"+e[l]+"</td></tr>");return n+="</table>",n}getPopups(){const e=[];return this.map.getOverlays().getArray().slice(0).forEach(n=>{n.get(tl)===Ar&&e.push(n)}),e}destroyDynamicPopupComponent(e){this.dynamicPopupComponents.has(e)&&(this.dynamicPopupComponents.get(e).destroy(),this.dynamicPopupComponents.delete(e))}createDynamicPopupComponent(e,n,l,m){const S=(0,V.a0P)(m.dynamicPopup.component,{environmentInjector:this.envInjector,hostElement:n});if(m.dynamicPopup.getAttributes){const k=m.dynamicPopup.getAttributes(l);for(const tt in k)"undefined"!==k[tt]&&(S.instance[tt]=k[tt])}this.app.attachView(S.hostView),this.dynamicPopupComponents.set(e,S)}setExtent(e,n,l){const m=(0,Ei.Jt)(n?Mr:this.EPSG),S=(0,Ei.DI)(e.slice(0,4),m,this.getProjection().getCode()),k={size:this.map.getSize()};return l&&Object.assign(k,l),this.map.getView().fit(S,l),S}setCenter(e,n){const l=(0,Ei.Jt)(n?Mr:this.EPSG),m=(0,Ei.pd)(e,l,this.getProjection().getCode());return this.map.getView().setCenter(m),m}getCenter(e){const n=(0,Ei.Jt)(e?Mr:this.EPSG),l=(0,Ei.Jt)(this.getProjection().getCode());return(0,Ei.pd)(this.map.getView().getCenter(),l,n)}getFeaturesExtent(e,n){const l=e[0].getGeometry().getExtent().slice(0);if(e.forEach(m=>{(0,_.X$)(l,m.getGeometry().getExtent())}),n){const m=(0,Ei.Jt)(Mr);return(0,Ei.DI)(l,this.getProjection().getCode(),m)}return l}getCurrentExtent(e){const n=(0,Ei.Jt)(e?Mr:this.EPSG),l=this.map.getView().calculateExtent();return(0,Ei.DI)(l,this.getProjection().getCode(),n)}setRotation(e){const n=this.map.getView();e*=Math.PI/180,n.setRotation(e)}getRotation(){return this.map.getView().getRotation()*(180/Math.PI)}setZoom(e){this.map.getView().setZoom(e)}getZoom(){return this.map.getView().getZoom()}zoomInOut(e,n){const l=this.map.getView();if(!l)return;const m=n?.zoomStep||1,S="+"===e?m:-1*m,k=l.getZoom();if(void 0!==k){const tt=l.getConstrainedZoom(k+S);l.getAnimating()&&l.cancelAnimations(),l.animate({zoom:tt,duration:n?.duration||250,easing:n?.easing||rt.vT},ot=>{n.callback&&n.callback(ot)})}}geoJsonToFeature(e){return new Hn.A({dataProjection:Mr,featureProjection:this.EPSG}).readFeature(e)}geoJsonToFeatures(e){return new Hn.A({dataProjection:Mr,featureProjection:this.EPSG}).readFeatures(e)}getProjection(){return this.map.getView().getProjection()}reprojectFeatures(e,n,l){e.getFeatures().forEach(m=>{m.getGeometry().transform(n,l)})}setProjection(e){if(e){let n={};if(this.viewOptions&&(n=this.viewOptions,n.minResolution=void 0,n.maxResolution=void 0,n.resolution=void 0,n.resolutions=void 0),e instanceof Mh.A){n.projection=e;const S=(0,Ei.pd)(this.map.getView().getCenter(),this.map.getView().getProjection(),e);n.center=S,n.zoom=this.map.getView().getZoom()}else"string"==typeof e&&(n.projection=e,n.center=this.map.getView().getCenter(),n.zoom=this.map.getView().getZoom());const l=new ut.Ay(n),m=this.EPSG;this.EPSG=l.getProjection().getCode(),this.map.setView(l),this.view=this.map.getView(),this.map.getLayers().getArray().forEach(S=>{S.getLayers().getArray().forEach(k=>{if(k instanceof r.A){let tt=k.getSource();for(;tt.source;)tt=tt.source;tt instanceof Qe.A&&this.reprojectFeatures(tt,m,this.EPSG)}})}),this.projectionChange.next(this.getProjection())}}registerProjection(e){Ah.A.defs(e.code,e.proj4js),(0,gc.kz)(Ah.A)}getOlProjection(e){return new Mh.A({code:e.code,extent:e.extent?e.extent:void 0,worldExtent:e.worldExtent?e.worldExtent:void 0,global:!!e.global&&e.global,units:e.units?e.units:void 0})}keysToUppercase(e){return Object.keys(e).forEach(n=>{const l=n.toUpperCase();l!==n&&(e[l]=e[n],delete e[n])}),e}static{this.\u0275fac=function(n){return new(n||s)(V.KVO(V.o8S),V.KVO(V.uvJ))}}static{this.\u0275prov=V.jDH({token:s,factory:s.\u0275fac,providedIn:"root"})}}return s})();var mc=c(6478),pc=c(9990);const ql="units",yc=[1,2,5],Aa=25.4/.28,Ec=class vc extends Zt.A{constructor(t){t=t||{};const e=document.createElement("div");e.style.pointerEvents="none",super({element:e,render:t.render,target:t.target});const n=void 0!==t.className?t.className:t.bar?"ol-scale-bar":"ol-scale-line";this.innerElement_=document.createElement("div"),this.innerElement_.className=n+"-inner",this.element.className=n+" "+v.XI,this.element.appendChild(this.innerElement_),this.viewState_=null,this.minWidth_=void 0!==t.minWidth?t.minWidth:64,this.maxWidth_=t.maxWidth,this.renderedVisible_=!1,this.renderedWidth_=void 0,this.renderedHTML_="",this.addChangeListener(ql,this.handleUnitsChanged_),this.setUnits(t.units||"metric"),this.scaleBar_=t.bar||!1,this.scaleBarSteps_=t.steps||4,this.scaleBarText_=t.text||!1,this.dpi_=t.dpi||void 0}getUnits(){return this.get(ql)}handleUnitsChanged_(){this.updateElement_()}setUnits(t){this.set(ql,t)}setDpi(t){this.dpi_=t}updateElement_(){const t=this.viewState_;if(!t)return void(this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1));const e=t.center,n=t.projection,l=this.getUnits();let S=(0,Ei.hO)(n,t.resolution,e,"degrees"==l?"degrees":"m");const k=this.minWidth_*(this.dpi_||Aa)/Aa,tt=void 0!==this.maxWidth_?this.maxWidth_*(this.dpi_||Aa)/Aa:void 0;let ot=k*S,Et="";if("degrees"==l){const zi=Ei.Ig.degrees;ot*=zi,ot<zi/60?(Et="\u2033",S*=3600):ot<zi?(Et="\u2032",S*=60):Et="\xb0"}else if("imperial"==l)ot<.9144?(Et="in",S/=.0254):ot<1609.344?(Et="ft",S/=.3048):(Et="mi",S/=1609.344);else if("nautical"==l)S/=1852,Et="NM";else if("metric"==l)ot<1e-6?(Et="nm",S*=1e9):ot<.001?(Et="\u03bcm",S*=1e6):ot<1?(Et="mm",S*=1e3):ot<1e3?Et="m":(Et="km",S/=1e3);else{if("us"!=l)throw new Error("Invalid units");ot<.9144?(Et="in",S*=39.37):ot<1609.344?(Et="ft",S/=.30480061):(Et="mi",S/=1609.3472)}let Jt,Vt,me,ti,Be,vi,Gt=3*Math.floor(Math.log(k*S)/Math.log(10));for(;;){me=Math.floor(Gt/3);const zi=Math.pow(10,me);if(Jt=yc[(Gt%3+3)%3]*zi,Vt=Math.round(Jt/S),isNaN(Vt))return this.element.style.display="none",void(this.renderedVisible_=!1);if(void 0!==tt&&Vt>=tt){Jt=ti,Vt=Be,me=vi;break}if(Vt>=k)break;ti=Jt,Be=Vt,vi=me,++Gt}const Li=this.scaleBar_?this.createScaleBar(Vt,Jt,Et):Jt.toFixed(me<0?-me:0)+" "+Et;this.renderedHTML_!=Li&&(this.innerElement_.innerHTML=Li,this.renderedHTML_=Li),this.renderedWidth_!=Vt&&(this.innerElement_.style.width=Vt+"px",this.renderedWidth_=Vt),this.renderedVisible_||(this.element.style.display="",this.renderedVisible_=!0)}createScaleBar(t,e,n){const l=this.getScaleForResolution(),m=l<1?Math.round(1/l).toLocaleString()+" : 1":"1 : "+Math.round(l).toLocaleString(),S=this.scaleBarSteps_,k=t/S,tt=[this.createMarker("absolute")];for(let Et=0;Et<S;++Et)tt.push(`<div><div class="ol-scale-singlebar ${Et%2==0?"ol-scale-singlebar-odd":"ol-scale-singlebar-even"}" style="width: ${k}px;"></div>`+this.createMarker("relative")+(Et%2==0||2===S?this.createStepText(Et,t,!1,e,n):"")+"</div>");return tt.push(this.createStepText(S,t,!0,e,n)),(this.scaleBarText_?`<div class="ol-scale-text" style="width: ${t}px;">`+m+"</div>":"")+tt.join("")}createMarker(t){return`<div class="ol-scale-step-marker" style="position: ${t}; top: ${"absolute"===t?3:-10}px;"></div>`}createStepText(t,e,n,l,m){const k=(0===t?0:Math.round(l/this.scaleBarSteps_*t*100)/100)+(0===t?"":" "+m);return`<div class="ol-scale-step-text" style="margin-left: ${0===t?-3:e/this.scaleBarSteps_*-1}px;text-align: ${0===t?"left":"center"};min-width: ${0===t?0:e/this.scaleBarSteps_*2}px;left: ${n?e+"px":"unset"};">`+k+"</div>"}getScaleForResolution(){return(0,Ei.hO)(this.viewState_.projection,this.viewState_.resolution,this.viewState_.center,"m")*(1e3/25.4)*(this.dpi_||Aa)}render(t){const e=t.frameState;this.viewState_=e?e.viewState:null,this.updateElement_()}},th="projection",Rh="coordinateFormat",Mc=class xc extends Zt.A{constructor(t){t=t||{};const e=document.createElement("div");e.className=void 0!==t.className?t.className:"ol-mouse-position",super({element:e,render:t.render,target:t.target}),this.addChangeListener(th,this.handleProjectionChanged_),t.coordinateFormat&&this.setCoordinateFormat(t.coordinateFormat),t.projection&&this.setProjection(t.projection),this.renderOnMouseOut_=void 0!==t.placeholder,this.placeholder_=this.renderOnMouseOut_?t.placeholder:"&#160;",this.renderedHTML_=e.innerHTML,this.mapProjection_=null,this.transform_=null,this.wrapX_=!1!==t.wrapX}handleProjectionChanged_(){this.transform_=null}getCoordinateFormat(){return this.get(Rh)}getProjection(){return this.get(th)}handleMouseMove(t){const e=this.getMap();this.updateHTML_(e.getEventPixel(t))}handleMouseOut(t){this.updateHTML_(null)}setMap(t){if(super.setMap(t),t){const e=t.getViewport();this.listenerKeys.push((0,w.KT)(e,"pointermove",this.handleMouseMove,this)),this.renderOnMouseOut_&&this.listenerKeys.push((0,w.KT)(e,"pointerout",this.handleMouseOut,this)),this.updateHTML_(null)}}setCoordinateFormat(t){this.set(Rh,t)}setProjection(t){this.set(th,(0,Ei.Jt)(t))}updateHTML_(t){let e=this.placeholder_;if(t&&this.mapProjection_){if(!this.transform_){const m=this.getProjection();this.transform_=m?(0,Ei.FO)(this.mapProjection_,m):Ei.R6}const l=this.getMap().getCoordinateFromPixelInternal(t);if(l){const m=(0,Ei.Tf)();if(m&&(this.transform_=(0,Ei.FO)(this.mapProjection_,m)),this.transform_(l,l),this.wrapX_){const k=m||this.getProjection()||this.mapProjection_;(0,u.Li)(l,k)}const S=this.getCoordinateFormat();e=S?S(l):l.toString()}}(!this.renderedHTML_||e!==this.renderedHTML_)&&(this.element.innerHTML=e,this.renderedHTML_=e)}render(t){const e=t.frameState;e?this.mapProjection_!=e.viewState.projection&&(this.mapProjection_=e.viewState.projection,this.transform_=null):this.mapProjection_=null}},bh=["fullscreenchange","webkitfullscreenchange","MSFullscreenChange"];function Ih(s){const t=s.body;return!!(t.webkitRequestFullscreen||t.requestFullscreen&&s.fullscreenEnabled)}function Sh(s){return!(!s.webkitIsFullScreen&&!s.fullscreenElement)}function Oh(s){s.requestFullscreen?s.requestFullscreen():s.webkitRequestFullscreen&&s.webkitRequestFullscreen()}const Pc=class Ac extends Zt.A{constructor(t){t=t||{},super({element:document.createElement("div"),target:t.target}),this.keys_=void 0!==t.keys&&t.keys,this.source_=t.source,this.isInFullscreen_=!1,this.boundHandleMapTargetChange_=this.handleMapTargetChange_.bind(this),this.cssClassName_=void 0!==t.className?t.className:"ol-full-screen",this.documentListeners_=[],this.activeClassName_=void 0!==t.activeClassName?t.activeClassName.split(" "):[this.cssClassName_+"-true"],this.inactiveClassName_=void 0!==t.inactiveClassName?t.inactiveClassName.split(" "):[this.cssClassName_+"-false"];const e=void 0!==t.label?t.label:"\u2922";this.labelNode_="string"==typeof e?document.createTextNode(e):e;const n=void 0!==t.labelActive?t.labelActive:"\xd7";this.labelActiveNode_="string"==typeof n?document.createTextNode(n):n;const l=t.tipLabel?t.tipLabel:"Toggle full-screen";this.button_=document.createElement("button"),this.button_.title=l,this.button_.setAttribute("type","button"),this.button_.appendChild(this.labelNode_),this.button_.addEventListener(j.A.CLICK,this.handleClick_.bind(this),!1),this.setClassName_(this.button_,this.isInFullscreen_),this.element.className=`${this.cssClassName_} ${v.XI} ${v.$N}`,this.element.appendChild(this.button_)}handleClick_(t){t.preventDefault(),this.handleFullScreen_()}handleFullScreen_(){const t=this.getMap();if(!t)return;const e=t.getOwnerDocument();if(Ih(e))if(Sh(e))!function Cc(s){s.exitFullscreen?s.exitFullscreen():s.webkitExitFullscreen&&s.webkitExitFullscreen()}(e);else{let n;n=this.source_?"string"==typeof this.source_?e.getElementById(this.source_):this.source_:t.getTargetElement(),this.keys_?function Tc(s){s.webkitRequestFullscreen?s.webkitRequestFullscreen():Oh(s)}(n):Oh(n)}}handleFullScreenChange_(){const t=this.getMap();if(!t)return;const e=this.isInFullscreen_;this.isInFullscreen_=Sh(t.getOwnerDocument()),e!==this.isInFullscreen_&&(this.setClassName_(this.button_,this.isInFullscreen_),this.isInFullscreen_?((0,z.fo)(this.labelActiveNode_,this.labelNode_),this.dispatchEvent("enterfullscreen")):((0,z.fo)(this.labelNode_,this.labelActiveNode_),this.dispatchEvent("leavefullscreen")),t.updateSize())}setClassName_(t,e){e?(t.classList.remove(...this.inactiveClassName_),t.classList.add(...this.activeClassName_)):(t.classList.remove(...this.activeClassName_),t.classList.add(...this.inactiveClassName_))}setMap(t){const e=this.getMap();e&&e.removeChangeListener("target",this.boundHandleMapTargetChange_),super.setMap(t),this.handleMapTargetChange_(),t&&t.addChangeListener("target",this.boundHandleMapTargetChange_)}handleMapTargetChange_(){const t=this.documentListeners_;for(let n=0,l=t.length;n<l;++n)(0,w.JH)(t[n]);t.length=0;const e=this.getMap();if(e){const n=e.getOwnerDocument();Ih(n)?this.element.classList.remove(v.Vv):this.element.classList.add(v.Vv);for(let l=0,m=bh.length;l<m;++l)t.push((0,w.KT)(n,bh[l],this.handleFullScreenChange_,this));this.handleFullScreenChange_()}}};var Dh=c(7903);const bc=class Rc extends Zt.A{constructor(t){t=t||{},super({element:document.createElement("div"),render:t.render,target:t.target}),this.boundHandleRotationChanged_=this.handleRotationChanged_.bind(this),this.collapsed_=void 0===t.collapsed||t.collapsed,this.collapsible_=void 0===t.collapsible||t.collapsible,this.collapsible_||(this.collapsed_=!1),this.rotateWithView_=void 0!==t.rotateWithView&&t.rotateWithView,this.viewExtent_=void 0;const e=void 0!==t.className?t.className:"ol-overviewmap",n=void 0!==t.tipLabel?t.tipLabel:"Overview map",l=void 0!==t.collapseLabel?t.collapseLabel:"\u2039";"string"==typeof l?(this.collapseLabel_=document.createElement("span"),this.collapseLabel_.textContent=l):this.collapseLabel_=l;const m=void 0!==t.label?t.label:"\u203a";"string"==typeof m?(this.label_=document.createElement("span"),this.label_.textContent=m):this.label_=m;const S=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_,k=document.createElement("button");k.setAttribute("type","button"),k.title=n,k.appendChild(S),k.addEventListener(j.A.CLICK,this.handleClick_.bind(this),!1),this.ovmapDiv_=document.createElement("div"),this.ovmapDiv_.className="ol-overviewmap-map",this.view_=t.view;const tt=new ir({view:t.view,controls:new Z.A,interactions:new Z.A});this.ovmap_=tt,t.layers&&t.layers.forEach(function(Li){tt.addLayer(Li)});const ot=document.createElement("div");ot.className="ol-overviewmap-box",ot.style.boxSizing="border-box",this.boxOverlay_=new ds({position:[0,0],positioning:"center-center",element:ot}),this.ovmap_.addOverlay(this.boxOverlay_);const Gt=this.element;Gt.className=e+" "+v.XI+" "+v.$N+(this.collapsed_&&this.collapsible_?" "+v.nT:"")+(this.collapsible_?"":" ol-uncollapsible"),Gt.appendChild(this.ovmapDiv_),Gt.appendChild(k);const Jt=this,Vt=this.boxOverlay_,me=this.boxOverlay_.getElement(),Be=function(Li){const zi=function(Li){return{clientX:Li.clientX,clientY:Li.clientY}}(Li),Mi=tt.getEventCoordinateInternal(zi);Vt.setPosition(Mi)},vi=function(Li){const zi=tt.getEventCoordinateInternal(Li);Jt.getMap().getView().setCenterInternal(zi),window.removeEventListener("mousemove",Be),window.removeEventListener("mouseup",vi)};me.addEventListener("mousedown",function(){window.addEventListener("mousemove",Be),window.addEventListener("mouseup",vi)})}setMap(t){const e=this.getMap();if(t!==e){if(e){const n=e.getView();n&&this.unbindView_(n),this.ovmap_.setTarget(null)}if(super.setMap(t),t){this.ovmap_.setTarget(this.ovmapDiv_),this.listenerKeys.push((0,w.KT)(t,a.A.PROPERTYCHANGE,this.handleMapPropertyChange_,this));const n=t.getView();n&&(this.bindView_(n),n.isDef()&&(this.ovmap_.updateSize(),this.resetExtent_())),this.ovmap_.isRendered()||this.updateBoxAfterOvmapIsRendered_()}}}handleMapPropertyChange_(t){if("view"===t.key){const e=t.oldValue;e&&this.unbindView_(e);const n=this.getMap().getView();this.bindView_(n)}else!this.ovmap_.isRendered()&&("target"===t.key||"size"===t.key)&&this.ovmap_.updateSize()}bindView_(t){if(!this.view_){const e=new ut.Ay({projection:t.getProjection()});this.ovmap_.setView(e)}t.addChangeListener(Dh.A.ROTATION,this.boundHandleRotationChanged_),this.handleRotationChanged_()}unbindView_(t){t.removeChangeListener(Dh.A.ROTATION,this.boundHandleRotationChanged_)}handleRotationChanged_(){this.rotateWithView_&&this.ovmap_.getView().setRotation(this.getMap().getView().getRotation())}validateExtent_(){const t=this.getMap(),e=this.ovmap_;if(!t.isRendered()||!e.isRendered())return;const n=t.getSize(),m=t.getView().calculateExtentInternal(n);if(this.viewExtent_&&(0,_.aI)(m,this.viewExtent_))return;this.viewExtent_=m;const S=e.getSize(),tt=e.getView().calculateExtentInternal(S),ot=e.getPixelFromCoordinateInternal((0,_.Py)(m)),Et=e.getPixelFromCoordinateInternal((0,_.k_)(m)),Gt=Math.abs(ot[0]-Et[0]),Jt=Math.abs(ot[1]-Et[1]),Vt=S[0],me=S[1];Gt<.1*Vt||Jt<.1*me||Gt>.75*Vt||Jt>.75*me?this.resetExtent_():(0,_.ms)(tt,m)||this.recenter_()}resetExtent_(){const t=this.getMap(),e=this.ovmap_,n=t.getSize(),m=t.getView().calculateExtentInternal(n),S=e.getView(),k=Math.log(7.5)/Math.LN2,tt=1/(.1*Math.pow(2,k/2));(0,_.Af)(m,tt),S.fitInternal((0,Ds.VY)(m))}recenter_(){const t=this.getMap(),e=this.ovmap_,n=t.getView();e.getView().setCenterInternal(n.getCenterInternal())}updateBox_(){const t=this.getMap(),e=this.ovmap_;if(!t.isRendered()||!e.isRendered())return;const n=t.getSize(),l=t.getView(),m=e.getView(),S=this.rotateWithView_?0:-l.getRotation(),k=this.boxOverlay_,tt=this.boxOverlay_.getElement(),ot=l.getCenterInternal(),Et=l.getResolution(),Gt=m.getResolution(),Jt=n[0]*Et/Gt,Vt=n[1]*Et/Gt;k.setPosition(ot),tt&&(tt.style.width=Jt+"px",tt.style.height=Vt+"px",tt.style.transform="rotate("+S+"rad)")}updateBoxAfterOvmapIsRendered_(){this.ovmapPostrenderKey_||(this.ovmapPostrenderKey_=(0,w.Jz)(this.ovmap_,St.A.POSTRENDER,function(t){delete this.ovmapPostrenderKey_,this.updateBox_()},this))}handleClick_(t){t.preventDefault(),this.handleToggle_()}handleToggle_(){this.element.classList.toggle(v.nT),this.collapsed_?(0,z.fo)(this.collapseLabel_,this.label_):(0,z.fo)(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_;const t=this.ovmap_;if(!this.collapsed_){if(t.isRendered())return this.viewExtent_=void 0,void t.render();t.updateSize(),this.resetExtent_(),this.updateBoxAfterOvmapIsRendered_()}}getCollapsible(){return this.collapsible_}setCollapsible(t){this.collapsible_!==t&&(this.collapsible_=t,this.element.classList.toggle("ol-uncollapsible"),!t&&this.collapsed_&&this.handleToggle_())}setCollapsed(t){!this.collapsible_||this.collapsed_===t||this.handleToggle_()}getCollapsed(){return this.collapsed_}getRotateWithView(){return this.rotateWithView_}setRotateWithView(t){this.rotateWithView_!==t&&(this.rotateWithView_=t,0!==this.getMap().getView().getRotation()&&(this.rotateWithView_?this.handleRotationChanged_():this.ovmap_.getView().setRotation(0),this.viewExtent_=void 0,this.validateExtent_(),this.updateBox_()))}getOverviewMap(){return this.ovmap_}render(t){this.validateExtent_(),this.updateBox_()}};var wc=c(6160),Ic=c(3982),Sc=c(7421);const Oc=["mapDiv"];function Dc(s,t){1&s&&(V.j41(0,"div",2),V.EFF(1,"+"),V.k0s())}Ic.h.addIcons(Sc.A);let Lc=(()=>{class s{constructor(e,n){this.mapSvc=e,this.ngZone=n,this.subs=[],this.mapSize=[0,0],this.initialMapStateSet=!1,this.removePopupsOnMouseLeave=l=>{this.mapSvc.removeAllPopups(m=>"pointermove"===m.get("addEvent"))}}ngOnInit(){this.subscribeToMapState(),this.initMap(),this.subscribeToLayers()}ngAfterViewInit(){this.map.setTarget(this.mapDivView.nativeElement),this.subscribeToMapEvents(),this.map.getTargetElement().addEventListener("mouseleave",this.removePopupsOnMouseLeave)}ngAfterViewChecked(){this.updateMapSize()}ngOnDestroy(){this.subs.forEach(n=>n.unsubscribe());const e=this.mapStateSvc.getMapState().value;e.options.notifier="user",this.mapStateSvc.setMapState(e),this.map&&(this.map.un("moveend",this.mapOnMoveend),this.map.un("click",this.mapOnClickMove),this.map.un("dblclick",this.mapOnDclick),this.map.getTargetElement().removeEventListener("mouseleave",this.removePopupsOnMouseLeave),this.map.getInteractions().forEach(n=>{this.map.removeInteraction(n)}))}getMapDiv(){return this.mapDivView&&this.mapDivView.nativeElement?{width:this.mapDivView.nativeElement.offsetWidth,height:this.mapDivView.nativeElement.offsetHeight}:null}updateMapSize(){const e=this.getMapDiv();if(e)if(e.width===this.mapSize[0]&&e.height===this.mapSize[1]){if(!this.initialMapStateSet){const n=this.mapStateSvc.getMapState().getValue();this.setMapState(n),this.initialMapStateSet=!0}}else this.ngZone.runOutsideAngular(()=>{this.map.updateSize(),this.mapSize=this.map.getSize()})}addUpdateLayers(e,n,l){const m=this.mapSvc.getLayerGroups(n)[0].getLayers(),S=l.reduce((k,tt)=>k+this.mapSvc.getLayers(tt).length,0);e.length!==this.mapSvc.getLayers(n).length?this.mapSvc.setUkisLayers(e,n,S):this.updateLayers(e,n,S,m)}updateLayers(e,n,l,m){for(const S of e){const k=this.mapSvc.getLayerByKey({key:"id",value:S.id},n);if(k){k.getVisible()!==S.visible&&((0,ho.CO)(k,S.visible,S instanceof K.tr),this.mapSvc.hideAllPopups(!S.visible,Et=>{const Jt=Et.getId().toString().split(":")[0];return!Jt||(Jt===S.id?Jt===S.id:void 0)})),k.getOpacity()!==S.opacity&&(0,ho.f2)(k,S.opacity,S instanceof K.tr),this.updateLayerSource(S,k);const tt=e.indexOf(S),ot=l>0?tt+l:tt;k.getZIndex()!==ot&&((0,ho.m9)(k,tt,m),(0,ho.Sq)(k,tt,l)),this.updateLayerParamsWith(k,S)}}}updateLayerSource(e,n){if(e instanceof K.tr&&n instanceof r.A){const l=e.custom_layer.getSource(),m=n.getSource();l&&(0,E.v6)(m)!==(0,E.v6)(l)&&(n.setSource(l),m instanceof Zl.Ay&&m.dispose())}else if(e instanceof K.tr&&e.custom_layer instanceof Y.A&&n instanceof Y.A){const l=e.custom_layer.getLayers().getArray();n.getLayers().getArray().forEach((S,k)=>{const tt=l[k];if(S instanceof r.A&&tt instanceof r.A){const ot=S.getSource(),Et=tt.getSource();Et&&(0,E.v6)(ot)!==(0,E.v6)(Et)&&S.setSource(Et)}})}}updateLayerParamsWith(e,n){switch(n.type){case K.dz:this.updateWmsLayerParamsWith(e,n);break;case K.Tv:this.updateWmtsLayerParamsWith(e,n);break;case K.jV:this.updateGeojsonLayerParamsWith(e,n);break;case K.M:this.updateWfsLayerParamsWith(e,n);break;case K.ag:this.updateTmsLayerParamsWith(e,n)}}updateTmsLayerParamsWith(e,n){n instanceof K.vK&&Qa(e,n.options.style,n.options.styleSource)}updateWfsLayerParamsWith(e,n){n.options&&n.options.style!==e.getStyle()&&e.setStyle(n.options.style),e.getSource().getUrl()!==n.url&&e.getSource().setUrl(n.url)}updateGeojsonLayerParamsWith(e,n){const l=e.getSource();if(l){if(n.data){const m=this.mapSvc.geoJsonToFeatures(n.data);if(l instanceof qa.A){const S=l.getSource();S.clear(),S.addFeatures(m)}else l.clear(),l.addFeatures(m)}else n.url&&(l instanceof qa.A?l.getSource().setUrl(n.url):l.setUrl(n.url));"object"==typeof n?.cluster&&"distance"in n.cluster&&l instanceof qa.A&&l.setDistance(n.cluster.distance)}n?.options?.style&&e.setStyle(n.options.style)}updateWmsLayerParamsWith(e,n){if(e instanceof r.A){const m=e.getSource().getParams(),S=n.params;this.shallowEqual(m,S)||e.getSource().updateParams(S)}}updateWmtsLayerParamsWith(e,n){if(e instanceof r.A){const l=e.getSource(),m=l.getStyle(),S=l.getFormat(),k=l.getVersion(),tt=l.getMatrixSet(),ot=n.params.style,Et=n.params.format,Gt=n.params.version,Jt=n.params.matrixSetOptions.matrixSet;if(void 0!==ot&&m!==ot||void 0!==Et&&S!==Et||void 0!==Gt&&k!==Gt||void 0!==Jt&&tt!==Jt){const Vt=n.filtertype.toLowerCase();this.mapSvc.updateUkisLayer(n,Vt)}}}shallowEqual(e,n){const l=Object.getOwnPropertyNames(e),m=Object.getOwnPropertyNames(n);if(l.length!==m.length)return!1;for(const S of l)if(e[S]!==n[S])return!1;return!0}addUpdateBaseLayers(e){const n=this.mapSvc.getLayerGroups("baselayers")[0].getLayers();if(e.length!==this.mapSvc.getLayers("baselayers").length){const l=e.filter(m=>!0===m.visible);0===l.length?e[0].visible=!0:l.length>1&&(e.forEach(m=>m.visible=!1),e[0].visible=!0),this.mapSvc.setUkisLayers(e,"baselayers")}else for(const l of e){const m=this.mapSvc.getLayerByKey({key:"id",value:l.id},"baselayers");if(m){const S=e.indexOf(l);m.getVisible()!==l.visible&&(0,ho.CO)(m,l.visible,l instanceof K.tr),m.getZIndex()!==S&&(n.remove(m),n.insertAt(S,m),(0,ho.Sq)(m,S)),m.getOpacity()!==l.opacity&&(0,ho.f2)(m,l.opacity,l instanceof K.tr),this.updateLayerSource(l,m),this.updateLayerParamsWith(m,l)}}}subscribeToLayers(){if(this.layersSvc){const e=this.layersSvc.getBaseLayers().subscribe(m=>this.addUpdateBaseLayers(m));this.subs.push(e);const n=this.layersSvc.getLayers().subscribe(m=>this.addUpdateLayers(m,"layers",["baselayers"]));this.subs.push(n);const l=this.layersSvc.getOverlays().subscribe(m=>this.addUpdateLayers(m,"overlays",["baselayers","layers"]));this.subs.push(l)}}setMapState(e){const n=this.mapStateSvc.getLastAction().getValue();"user"===e.options.notifier&&("setExtent"===n?this.mapSvc.setExtent(e.extent,!0):"setState"===n?(this.mapSvc.setZoom(e.zoom),this.mapSvc.setCenter([e.center.lon,e.center.lat],!0),this.mapSvc.setRotation(e.rotation)):"setRotation"===n&&this.mapSvc.setRotation(e.rotation))}subscribeToMapState(){if(this.mapStateSvc){const e=this.mapStateSvc.getMapState().pipe((0,pc.i)(1)).subscribe(n=>this.setMapState(n));this.subs.push(e)}}subscribeToMapEvents(){this.mapOnMoveend=e=>{const n=this.mapStateSvc.getMapState().getValue(),l=this.mapSvc.getZoom(),m=this.mapSvc.getCenter(!0),S=this.mapSvc.getCurrentExtent(!0),k=this.mapSvc.getRotation(),tt={lat:parseFloat(m[1]),lon:parseFloat(m[0])},ot=new mc.y(l,tt,{notifier:"map"},S,n.time,n.viewAngle,k);this.mapStateSvc.setMapState(ot)},this.map.on("moveend",this.mapOnMoveend),this.mapOnClickMove=e=>{this.mapSvc.layersOnMapEvent(e)},this.map.on(["click","pointermove"],this.mapOnClickMove),this.mapOnDclick=e=>{this.mapSvc.removeAllPopups()},this.map.on("dblclick",this.mapOnDclick)}initMap(){const e=this.mapSvc.createMap();this.map=e.map;const n=this.map.getInteractions();Pn().forEach(m=>{n.getArray().find(k=>k.constructor.name===m.constructor.name)||this.map.addInteraction(m)}),this.setControls(),this.layersSvc||console.log("there is no layersSvc as defined!"),this.mapStateSvc||console.log("there is no mapStateSvc as defined!")}setControls(){const e=[],n=[];if(this.map&&(this.map.getControls().getArray().forEach(m=>n.push(m)),this.map.getControls().clear()),this.controls&&this.map){if(!1!==this.controls.attribution){let l={collapsible:!0,collapsed:!1};"object"==typeof this.controls.attribution&&(l=Object.assign(l,this.controls.attribution));const m=new fe(l);e.push(m)}if(this.controls.scaleLine){let l={};"object"==typeof this.controls.scaleLine&&(l=Object.assign(l,this.controls.scaleLine));const m=new Ec(l);e.push(m)}if(!1!==this.controls.zoom){let l={};"object"==typeof this.controls.zoom&&(l=Object.assign(l,this.controls.zoom));const m=new Me(l);e.push(m)}if(this.controls.mousePosition){let l={coordinateFormat:S=>(0,u.KN)(S,2),projection:"EPSG:4326"};"object"==typeof this.controls.mousePosition&&(l=Object.assign(l,this.controls.mousePosition));const m=new Mc(l);e.push(m)}if(this.controls.fullScreen){let l={};"object"==typeof this.controls.fullScreen&&(l=Object.assign(l,this.controls.fullScreen));const m=new Pc(l);e.push(m)}if(this.controls.overviewMap){const l=document.createElement("spawn");l.innerHTML='<cds-icon shape="world"></cds-icon>';let m={layers:[new _r.A({source:new wc.A})],label:l};"object"==typeof this.controls.overviewMap&&(m=Object.assign(m,this.controls.overviewMap));const S=new bc(m);e.push(S)}if(this.controls.rotate){let l={};"object"==typeof this.controls.rotate&&(l=Object.assign(l,this.controls.rotate));const m=new Yt(l);e.push(m)}e.length&&(n.filter(m=>!e.includes(m)).forEach(m=>e.push(m)),this.map.getControls().extend(e))}}static{this.\u0275fac=function(n){return new(n||s)(V.rXU(Ph),V.rXU(V.SKi))}}static{this.\u0275cmp=V.VBU({type:s,selectors:[["ukis-map-ol"]],viewQuery:function(n,l){if(1&n&&V.GBs(Oc,5),2&n){let m;V.mGM(m=V.lsd())&&(l.mapDivView=m.first)}},inputs:{layersSvc:"layersSvc",mapStateSvc:[0,"mapState","mapStateSvc"],controls:"controls"},standalone:!0,features:[V.aNF],decls:3,vars:1,consts:[["mapDiv",""],["ref","map",1,"map"],[1,"crosshair"]],template:function(n,l){1&n&&(V.j41(0,"div",1,0),V.DNE(2,Dc,2,0,"div",2),V.k0s()),2&n&&(V.R7$(2),V.vxM(l.controls&&l.controls.crosshair?2:-1))},styles:['@charset "UTF-8";:root{--ukis-crosshair-color: #ff0004;--ukis-popup-bg-color: rgb(238, 238, 238);--ukis-drop-shadow: drop-shadow(0 1px 4px rgba(0, 0, 0, .2));--ukis-ol-bbox-bg-color: rgba(255, 255, 255, .4);--ukis-ol-bbox-border-color: rgba(87, 87, 87, .4);--ukis-ol-overviewmap-left: .5em;--ukis-ol-overviewmap-bottom: 3em;--ukis-ol-control-bg-color: rgba(87, 87, 87, .6);--ukis-ol-control-border-color: rgba(87, 87, 87, .4)}.map{width:100%;height:100%;position:relative}.ol-popup{position:absolute;background-color:var(--ukis-popup-bg-color);filter:var(--ukis-drop-shadow);padding:15px;border-radius:2px;bottom:12px;left:-50px;min-width:280px;display:none;z-index:1000000}.ol-popup .ol-popup-closer{text-decoration:none;position:absolute;top:0;right:8px;cursor:pointer}.ol-popup .ol-popup-closer:after{content:"\\2716"}.ol-popup:after,.ol-popup:before{top:100%;border:solid transparent;content:" ";height:0;width:0;position:absolute;pointer-events:none}.ol-popup:after{border-top-color:var(--ukis-popup-bg-color);border-width:10px;left:48px;margin-left:-10px}.ol-popup:before{border-width:11px;left:48px;margin-left:-11px}.ol-popup.hidden{visibility:hidden}.crosshair{top:50%;left:50%;font-size:large;color:var(--ukis-crosshair-color);z-index:1;position:absolute;cursor:default}.ol-control{padding:1px;--ol-subtle-background-color: #fff6}.ol-control button{--ol-subtle-foreground-color: #fff;--ol-foreground-color: #fff;cursor:pointer;background-color:var(--ukis-ol-control-bg-color)}.ol-control button:focus{background-color:var(--ukis-ol-control-bg-color)}.ol-control button:hover{background-color:var(--ukis-ol-control-border-color)}.ol-scale-line{background:#fff6;line-height:1.375em;padding:1px}.ol-scale-line .ol-scale-line-inner{background:var(--ukis-ol-control-bg-color);border-color:var(--ukis-ol-control-bg-color);--ol-foreground-color: #fff}.ol-attribution:not(.ol-collapsed){padding:0 2px}.ol-attribution ul{font-size:.5rem}.ol-box{background-color:var(--ukis-ol-bbox-bg-color);border-color:var(--ukis-ol-bbox-border-color)!important}.ol-box.ol-drag-select{border-color:var(--clr-color-action-600, var(--fallback-color-no-clr))!important}.ol-overviewmap{left:var(--ukis-ol-overviewmap-left)!important;bottom:var(--ukis-ol-overviewmap-bottom)!important}\n'],encapsulation:2})}}return s})()},1363:(ce,gt,c)=>{"use strict";c.d(gt,{n3:()=>Pt,cS:()=>qe,m9:()=>_,nY:()=>$,f2:()=>E,CO:()=>F,Sq:()=>p,Yz:()=>Z,zy:()=>ei});var V=c(3942),K=c(6166);function $(W){let N=[];for(const Q of W)if(Q instanceof V.A){const ft=$(Q.getLayers().getArray());N=Array.prototype.concat(N,ft)}else N.push(Q);return N}function Z(W,N,Q,et=!1){const ft=N.getContext("2d");if(!ft)throw new Error("The target-canvas needs to use a 2d-context.");if(!N.width||!N.height)throw new Error("TargetCanvas: width or height have not been set.");ft instanceof CanvasRenderingContext2D&&ft.clearRect(0,0,N.width,N.height);const Mt=W.getSize();N.width=Mt[0],N.height=Mt[1];const _t=$(W.getLayers().getArray()),Rt=[];for(const zt of _t)if(zt.getVisible()&&zt.getOpacity()>0){const vt=zt.on("postrender",Lt=>{const Dt=Lt.context.canvas;ft instanceof CanvasRenderingContext2D&&(ft.beginPath(),ft.drawImage(Dt,0,0,Dt.clientWidth,Dt.clientHeight,0,0,N.width,N.height),ft.closePath())});Array.isArray(vt)?vt.map(Lt=>Rt.push(Lt)):Rt.push(vt)}et?W.on("rendercomplete",zt=>{Q(N)}):W.once("rendercomplete",zt=>{for(const vt of Rt)(0,K.e)(vt);Q(N)}),W.renderSync()}function F(W,N,Q=!1){W.setVisible(N),!Q&&W instanceof V.A&&W.getLayers().forEach(ft=>{F(ft,N)})}function E(W,N,Q=!1){W.setOpacity(N),!Q&&W instanceof V.A&&W.getLayers().forEach(ft=>{E(ft,N)})}function p(W,N,Q){W.setZIndex(Q>0?N+Q:N),W instanceof V.A&&W.getLayers().forEach(Mt=>{p(Mt,N,Q)})}function _(W,N,Q){Q.remove(W),Q.insertAt(N,W)}var h=c(7908),r=c(9325);const u=W=>{let N=[];for(const Q of W){let et;et=Array.isArray(Q[0])?u(Q):Q,N=Array.prototype.concat(N,et)}return N},f=(W,N)=>Math.log(W)/Math.log(N),g=(W,N)=>f(W,N)%1==0,v=(W,N,Q)=>{const et=W.createShader(N);if(!et)throw new Error("No shader was created");if(W.shaderSource(et,Q),W.compileShader(et),!W.getShaderParameter(et,W.COMPILE_STATUS))throw W.deleteShader(et),new Error(`An error occurred compiling the shader: ${W.getShaderInfoLog(et)}.    \n\n Shader code: ${Q}`);return et},I=(W,N)=>{W.useProgram(N)},R=(W,N,Q)=>{W.bindBuffer(W.ARRAY_BUFFER,Q.buffer),W.enableVertexAttribArray(N),W.vertexAttribPointer(N,Q.vectorSize,Q.type,Q.normalize,Q.stride,Q.offset)},xt=(W,N,Q,et)=>{if(Q>W.getParameter(W.MAX_COMBINED_TEXTURE_IMAGE_UNITS))throw new Error(`There are only ${W.getParameter(W.MAX_COMBINED_TEXTURE_IMAGE_UNITS)} texture bind points, but you tried to bind to point nr. ${Q}.`);7===Q&&console.error(`You are about to bind to the dedicated texture-construction bind point (nr. ${Q}).\n        If after this call another texture is built, your shader will now use that new texture instead of this one!\n        Consider using another bind point.`),W.activeTexture(W.TEXTURE0+Q),W.bindTexture(W.TEXTURE_2D,N),W.uniform1i(et,Q)},Tt=(W,N,Q)=>{const et=W.getUniformLocation(N,Q);if(null===et)throw new Error(`Couldn't find uniform ${Q} in program.`);return et},Ft=(W,N,Q,et)=>{switch(Q){case"bool":case"int":W.uniform1i(N,et[0]);break;case"bvec2":case"ivec2":W.uniform2i(N,et[0],et[1]);break;case"bvec3":case"ivec3":W.uniform3i(N,et[0],et[1],et[2]);break;case"bvec4":case"ivec4":W.uniform4i(N,et[0],et[1],et[2],et[3]);break;case"bool[]":case"int[]":W.uniform1iv(N,et);break;case"bvec2[]":case"ivec2[]":W.uniform2iv(N,et);break;case"bvec3[]":case"ivec3[]":W.uniform3iv(N,et);break;case"bvec4[]":case"ivec4[]":W.uniform4iv(N,et);break;case"float":W.uniform1f(N,et[0]);break;case"vec2":W.uniform2f(N,et[0],et[1]);break;case"vec3":W.uniform3f(N,et[0],et[1],et[2]);break;case"vec4":W.uniform4f(N,et[0],et[1],et[2],et[3]);break;case"float[]":W.uniform1fv(N,et);break;case"vec2[]":W.uniform2fv(N,et);break;case"vec3[]":W.uniform3fv(N,et);break;case"vec4[]":W.uniform4fv(N,et);break;case"mat2":W.uniformMatrix2fv(N,!1,et);break;case"mat3":W.uniformMatrix3fv(N,!1,et);break;case"mat4":W.uniformMatrix4fv(N,!1,et);break;default:throw Error(`Type ${Q} not implemented.`)}};class ne{constructor(N,Q,et){this.vertexShaderSource=Q,this.fragmentShaderSource=et,this.program=((W,N,Q)=>{const et=W.createProgram();if(!et)throw new Error("No program was created");const ft=v(W,W.VERTEX_SHADER,N),Mt=v(W,W.FRAGMENT_SHADER,Q);if(W.attachShader(et,ft),W.attachShader(et,Mt),W.linkProgram(et),W.detachShader(et,ft),W.detachShader(et,Mt),W.deleteShader(ft),W.deleteShader(Mt),!W.getProgramParameter(et,W.LINK_STATUS))throw W.deleteProgram(et),new Error("Unable to initialize the shader program: "+W.getProgramInfoLog(et));return et})(N,Q,et),this.id=function(W){let N=0;for(const Q of W)N+=Q.charCodeAt(0);return`${N}`}(Q+et)}}class fe{constructor(N,Q,et,ft,Mt){this.location=Tt(N,Q.program,et),this.type=ft,this.value=Mt,this.variableName=et}}class rt{constructor(N,Q,et,ft,Mt){this.location=Tt(N,Q.program,et),this.texture=ft instanceof HTMLImageElement||ft instanceof HTMLCanvasElement?((W,N)=>{const Q=W.createTexture();if(!Q)throw new Error("No texture was created");W.activeTexture(W.TEXTURE0+7),W.bindTexture(W.TEXTURE_2D,Q);const ft=W.RGBA,Mt=W.RGBA,_t=W.UNSIGNED_BYTE;let Rt,zt;return W.texImage2D(W.TEXTURE_2D,0,ft,Mt,_t,N),W.generateMipmap(W.TEXTURE_2D),W.bindTexture(W.TEXTURE_2D,null),N instanceof HTMLImageElement?(Rt=N.naturalWidth,zt=N.naturalHeight):(Rt=N.width,zt=N.height),{texture:Q,level:0,internalformat:ft,format:Mt,type:_t,width:Rt,height:zt,border:0}})(N,ft):ft,this.bindPoint=Mt,this.variableName=et}}class jt{constructor(N,Q,et,ft,Mt){this.location=Tt(N,Q.program,et),this.texture=((W,N)=>{const Q=N.length,et=N[0].length,ft=N[0][0].length;if(!g(et,2)||!g(Q,2))throw new Error(`Texture-data-dimensions must be a power of two, but are ${et} x ${Q}`);if(4!==ft)throw new Error(`Expecting 4 channels, but ${ft} provided`);const Mt=W.createTexture();if(!Mt)throw new Error("No texture was created");W.activeTexture(W.TEXTURE0+7),W.bindTexture(W.TEXTURE_2D,Mt);const zt=W.RGBA,vt=W.RGBA,Lt=W.UNSIGNED_BYTE,wt=new Uint8Array(u(N));return 4!==ft&&W.pixelStorei(W.UNPACK_ALIGNMENT,1),W.texImage2D(W.TEXTURE_2D,0,zt,et,Q,0,vt,Lt,wt),W.texParameteri(W.TEXTURE_2D,W.TEXTURE_WRAP_S,W.CLAMP_TO_EDGE),W.texParameteri(W.TEXTURE_2D,W.TEXTURE_WRAP_T,W.CLAMP_TO_EDGE),W.texParameteri(W.TEXTURE_2D,W.TEXTURE_MIN_FILTER,W.NEAREST),W.texParameteri(W.TEXTURE_2D,W.TEXTURE_MAG_FILTER,W.NEAREST),W.bindTexture(W.TEXTURE_2D,null),{texture:Mt,level:0,internalformat:zt,format:vt,type:Lt,width:et,height:Q,border:0}})(N,ft),this.bindPoint=Mt,this.variableName=et}}class Yt{constructor(N,Q,et,ft,Mt="triangles"){let _t;switch(Mt){case"triangles":_t=N.TRIANGLES;break;case"lines":_t=N.LINES;break;case"points":_t=N.POINTS;break;default:throw new Error(`Invalid drawing mode ${Mt}`)}this.location=((W,N,Q)=>{const et=W.getAttribLocation(N,Q);if(-1===et)throw new Error(`Couldn't find attribute ${Q} in program.`);return et})(N,Q.program,et),this.value=((W,N,Q=W.TRIANGLES)=>{const et=new Float32Array(u(N)),ft=W.createBuffer();if(!ft)throw new Error("No buffer was created");return W.bindBuffer(W.ARRAY_BUFFER,ft),W.bufferData(W.ARRAY_BUFFER,et,W.STATIC_DRAW),W.bindBuffer(W.ARRAY_BUFFER,null),{buffer:ft,vectorSize:N[0].length,vectorCount:N.length,type:W.FLOAT,normalize:!1,stride:0,offset:0,drawingMode:Q}})(N,ft,_t),this.variableName=et,this.drawingMode=_t}}class ve{constructor(N,Q,et="triangles"){let ft;switch(et){case"triangles":ft=N.TRIANGLES;break;case"lines":ft=N.LINES;break;case"points":ft=N.POINTS;break;default:throw new Error(`Invalid drawing mode ${et}`)}this.index=((W,N,Q=W.TRIANGLES)=>{const et=new Uint16Array(u(N)),ft=W.createBuffer();if(!ft)throw new Error("No buffer was created");return W.bindBuffer(W.ELEMENT_ARRAY_BUFFER,ft),W.bufferData(W.ELEMENT_ARRAY_BUFFER,et,W.STATIC_DRAW),W.bindBuffer(W.ELEMENT_ARRAY_BUFFER,null),{buffer:ft,count:et.length,type:W.UNSIGNED_SHORT,offset:0,drawingMode:Q}})(N,Q,ft)}}function Me(W,N){for(const Q of W)if(N(Q))return Q;return null}class Ze{constructor(N,Q,et,ft,Mt){this.program=N,this.attributes=Q,this.uniforms=et,this.textures=ft,this.index=Mt;const[_t,Rt,zt,vt]=function Ye(W){const N=/^\s*attribute (int|float|vec2|vec3|vec4|mat2|mat3|mat4) (\w*);/gm,Q=/^\s*uniform (int|float|vec2|vec3|vec4|mat2|mat3|mat4) (\w*)(\[\d\])*;/gm,et=/^\s*uniform sampler2D (\w*);/gm,ft=/^\s*precision (\w*) float;/gm,Mt=W.fragmentShaderSource+"\n\n\n"+W.vertexShaderSource,_t=[];let Rt;for(;null!==(Rt=N.exec(Mt));)_t.push(Rt[2]);const zt=[];let vt;for(;null!==(vt=Q.exec(Mt));)zt.push(vt[2]);const Lt=[];let wt;for(;null!==(wt=et.exec(Mt));)Lt.push(wt[1]);const Dt=[];let bt;for(;null!==(bt=ft.exec(Mt));)Dt.push(bt[1]);return[_t,zt,Lt,Dt]}(N);for(const wt of _t){const Dt=Q.filter(bt=>bt.variableName===wt);if(1!==Dt.length)throw new Error(`Provided ${Dt.length} values for shader's attribute ${wt}.`)}for(const wt of Rt){const Dt=et.filter(bt=>bt.variableName===wt);if(1!==Dt.length)throw new Error(`Provided ${Dt.length} values for shader's uniform ${wt}.`)}for(const wt of zt){const Dt=ft.filter(bt=>bt.variableName===wt);if(1!==Dt.length)throw new Error(`Provided ${Dt.length} values for shader's texture ${wt}.`)}1===vt.length&&console.warn("You have only provided one precision qualifier.\n            This can cause issues when you want to use a uniform in both the vertex- and the fragment-shader.");const Lt=this.attributes.map(wt=>wt.value.vectorCount);if(Math.min(...Lt)!==Math.max(...Lt))throw new Error("Your attributes are not of the same length!")}bind(N){I(N,this.program.program);for(const Q of this.attributes)R(N,Q.location,Q.value);for(const Q of this.uniforms)Ft(N,Q.location,Q.type,Q.value);for(const Q of this.textures)xt(N,Q.texture.texture,Q.bindPoint,Q.location);this.index&&(W=>{W.bindBuffer(W.ELEMENT_ARRAY_BUFFER,this.index.index.buffer)})(N)}render(N,Q,et,ft){et?((W,N,Q)=>{W.bindFramebuffer(W.FRAMEBUFFER,N.framebuffer),Q?(N.width/N.height!=Q[2]/Q[3]&&console.warn("Your viewport-aspect is different from the framebuffer-aspect."),W.viewport(...Q)):W.viewport(0,0,N.width,N.height)})(N,et,ft):((W,N)=>{W.bindFramebuffer(W.FRAMEBUFFER,null),N?(W.canvas.width/W.canvas.height!=N[2]/N[3]&&console.warn("Your viewport-aspect is different from the canvas-aspect."),W.viewport(...N)):W.viewport(0,0,W.canvas.width,W.canvas.height)})(N,ft),Q&&((W,N)=>{W.clearColor(N[0],N[1],N[2],N[3]),W.clearDepth(1),W.clear(W.COLOR_BUFFER_BIT|W.DEPTH_BUFFER_BIT)})(N,Q),this.index?((W,N)=>{W.drawElements(N.drawingMode,N.count,N.type,N.offset)})(N,this.index.index):((W,N)=>{W.drawArrays(N.drawingMode,N.offset,N.vectorCount)})(N,this.attributes[0].value)}updateAttributeData(N,Q,et){const ft=Me(this.attributes,Mt=>Mt.variableName===Q);if(!ft)throw new Error(`No such attribute ${Q} to be updated.`);((W,N,Q)=>{const et=new Float32Array(u(Q));W.bindBuffer(W.ARRAY_BUFFER,N.buffer),W.bufferData(W.ARRAY_BUFFER,et,W.STATIC_DRAW),W.bindBuffer(W.ARRAY_BUFFER,null)})(N,ft.value,et)}updateUniformData(N,Q,et){const ft=Me(this.uniforms,Mt=>Mt.variableName===Q);if(!ft)throw new Error(`No such uniform ${Q} to be updated.`);ft.value=et}updateTextureData(N,Q,et){const ft=Me(this.textures,_t=>_t.variableName===Q);if(!ft)throw new Error(`No such texture ${Q} to be updated.`);const Mt=((W,N,Q)=>{if(W.activeTexture(W.TEXTURE0+7),W.bindTexture(W.TEXTURE_2D,N.texture),Q instanceof HTMLImageElement||Q instanceof HTMLCanvasElement||Q instanceof ImageBitmap)W.texImage2D(W.TEXTURE_2D,0,W.RGBA,W.RGBA,W.UNSIGNED_BYTE,Q);else{const et=Q[0].length,ft=Q.length;if(!g(et,2)||!g(ft,2))throw new Error(`Texture-data-dimensions must be a power of two, but are ${ft} x ${et}`);const Mt=new Uint8Array(u(Q));W.texImage2D(W.TEXTURE_2D,N.level,N.internalformat,N.width,N.height,N.border,N.format,N.type,Mt)}return W.generateMipmap(W.TEXTURE_2D),W.bindTexture(W.TEXTURE_2D,null),Q instanceof HTMLImageElement?(N.width=Q.naturalWidth,N.height=Q.naturalHeight):Q instanceof HTMLCanvasElement||Q instanceof ImageBitmap?(N.width=Q.width,N.height=Q.height):(N.width=Q[0].length,N.height=Q.length),N})(N,ft.texture,et);ft.texture=Mt}}class pi{constructor(N,Q,et){const ft=(W=>{const N=W.createFramebuffer();if(!N)throw new Error("Error creating framebuffer");return N})(N),Mt=((W,N,Q)=>{if(N<=0||Q<=0)throw new Error("Width and height must be positive.");const et=W.createTexture();if(!et)throw new Error("No texture was created");return W.activeTexture(W.TEXTURE0+7),W.bindTexture(W.TEXTURE_2D,et),W.texImage2D(W.TEXTURE_2D,0,W.RGBA,N,Q,0,W.RGBA,W.UNSIGNED_BYTE,null),W.texParameteri(W.TEXTURE_2D,W.TEXTURE_WRAP_S,W.CLAMP_TO_EDGE),W.texParameteri(W.TEXTURE_2D,W.TEXTURE_WRAP_T,W.CLAMP_TO_EDGE),W.texParameteri(W.TEXTURE_2D,W.TEXTURE_MIN_FILTER,W.NEAREST),W.texParameteri(W.TEXTURE_2D,W.TEXTURE_MAG_FILTER,W.NEAREST),W.bindTexture(W.TEXTURE_2D,null),{texture:et,level:0,internalformat:W.RGBA,format:W.RGBA,type:W.UNSIGNED_BYTE,width:N,height:Q,border:0}})(N,Q,et),_t=((W,N,Q)=>{if(W.bindFramebuffer(W.FRAMEBUFFER,Q),W.framebufferTexture2D(W.FRAMEBUFFER,W.COLOR_ATTACHMENT0,W.TEXTURE_2D,N.texture,0),W.checkFramebufferStatus(W.FRAMEBUFFER)!==W.FRAMEBUFFER_COMPLETE)throw new Error(`Error creating framebuffer: framebuffer-status: ${W.checkFramebufferStatus(W.FRAMEBUFFER)} ; error-code: ${W.getError()}`);return W.bindFramebuffer(W.FRAMEBUFFER,null),{framebuffer:Q,texture:N,width:N.width,height:N.height}})(N,Mt,ft);this.fbo=_t}}function ei(W,N){const Q=1e3/W;let ft,Mt,_t,et=Q;const Rt=()=>{ft=window.performance.now(),N(et),Mt=window.performance.now(),et=Mt-ft,_t=Math.max(Q-et,0),setTimeout(()=>{requestAnimationFrame(Rt)},_t)};Rt()}const nt=(W,N)=>({vertices:[[-W/2,N/2,0],[-W/2,-N/2,0],[W/2,-N/2,0],[-W/2,N/2,0],[W/2,-N/2,0],[W/2,N/2,0]],texturePositions:[[0,1],[0,0],[1,0],[0,1],[1,0],[1,1]]});var It=c(4380);class Pt extends h.A{constructor(N){super(N)}createRenderer(){return this.renderer=new dt(this),this.renderer}updateSunAngle(N){this.renderer&&this.renderer.updateSunAngle(N)}}class dt extends It.A{constructor(N){super(N),this.state="loading";const Q=document.createElement("canvas");Q.width=1200,Q.height=800,Q.style.position="absolute";const et=Q.getContext("webgl"),ft=N.getSource(),Mt=ft.getProjection(),_t=ft.getImageExtent(),Rt=this.bboxOntoRectangle(2,2,_t),zt=((W,N=256,Q=256,et="red")=>{const ft=document.createElement("canvas").getContext("2d");if(!ft)throw new Error("no context");return ft.canvas.width=N,ft.canvas.height=Q,ft.font=`bold ${5*Q/6|0}px sans-serif`,ft.textAlign="center",ft.textBaseline="middle",ft.fillStyle=et,ft.fillText(W,N/2,Q/2),ft.canvas})("test",2048,2048,"red"),vt=new ne(et,"\n            attribute vec3 a_position;\n            attribute vec2 a_texturePosition;\n            uniform mat3 u_world2pix;\n            uniform mat3 u_pix2canv;\n            varying vec2 v_texturePosition;\n            void main() {\n                vec3 pixelPosition = u_world2pix * vec3(a_position.x, a_position.y, 1.);\n                vec3 canvasPosition = u_pix2canv * pixelPosition;\n                gl_Position = vec4(canvasPosition.x, canvasPosition.y, 0., 1.);\n                v_texturePosition = a_texturePosition;\n            }\n        ","\n            precision mediump float;\n            uniform sampler2D u_srtm;\n            uniform float u_imageSize;\n            uniform vec3 u_sun;\n            varying vec2 v_texturePosition;\n            void main() {\n                float delta = 4. / u_imageSize;\n                float top = texture2D(u_srtm, vec2(v_texturePosition.x,         1. - v_texturePosition.y + delta)).r;\n                float bot = texture2D(u_srtm, vec2(v_texturePosition.x,         1. - v_texturePosition.y - delta)).r;\n                float lft = texture2D(u_srtm, vec2(v_texturePosition.x + delta, 1. - v_texturePosition.y        )).r;\n                float rgt = texture2D(u_srtm, vec2(v_texturePosition.x - delta, 1. - v_texturePosition.y        )).r;\n\n                vec3 surfaceNormal = vec3(\n                    lft - rgt,\n                    bot - top,\n                    2. * delta\n                );\n                surfaceNormal = normalize(surfaceNormal);\n                vec3 sunNormal = normalize(u_sun);\n                float alignment = abs(dot(sunNormal, surfaceNormal));\n\n                gl_FragColor = vec4(0., 0., 0., 0.5 * alignment);\n            }\n        ");I(et,vt.program);const Lt=new Ze(vt,[new Yt(et,vt,"a_position",Rt.vertices),new Yt(et,vt,"a_texturePosition",Rt.texturePositions)],[new fe(et,vt,"u_imageSize","float",[2048]),new fe(et,vt,"u_sun","vec3",[0,0,1]),new fe(et,vt,"u_world2pix","mat3",u([[1,0,0],[0,1,0],[0,0,1]])),new fe(et,vt,"u_pix2canv","mat3",u([[1/(Q.width/2),0,0],[0,-1/(Q.height/2),0],[-1,1,1]]))],[new rt(et,vt,"u_srtm",zt,0)]);Lt.bind(et),this.shader=Lt,this.canvas=Q,this.gl=et,this.projection=Mt;const wt=ft.getImage(_t,.02197265625,2.440000295639038,Mt);wt.load(),wt.addEventListener("change",Dt=>{const bt=wt.getImage();this.shader.updateTextureData(this.gl,"u_srtm",bt),this.shader.bind(this.gl),this.state="ready",N.changed();const qt=N.get("map");requestAnimationFrame(()=>{qt.render()})})}prepareFrame(N){if("ready"===this.state){const Q=N.coordinateToPixelTransform;this.shader.updateUniformData(this.gl,"u_world2pix",u([[Q[0],Q[1],0],[Q[2],Q[3],0],[Q[4],Q[5],1]])),this.shader.bind(this.gl),N.viewState.projection!==this.projection&&this.reprojectImage(N.viewState.projection)}return!0}renderFrame(N,Q){return"ready"===this.state&&(this.shader.render(this.gl),this.transformCanvas(N)),this.canvas}renderDeclutter(N){}updateSunAngle(N){this.shader.updateUniformData(this.gl,"u_sun",[N[0],N[1],1]),this.shader.bind(this.gl),this.shader.render(this.gl)}bboxOntoRectangle(N,Q,et){const ft=nt(N,Q);for(const Mt of ft.vertices){const Rt=Mt[1];Mt[0]=Mt[0]===N/2?et[2]:et[0],Mt[1]=Rt===Q/2?et[3]:et[1]}return ft}reprojectImage(N){const Q=super.getLayer().getSource(),et=Q.getProjection(),ft=Q.getImageExtent(),Mt=(0,r.DI)(ft,et,N),_t=this.bboxOntoRectangle(2,2,Mt);this.shader.updateAttributeData(this.gl,"a_position",_t.vertices),this.shader.bind(this.gl)}transformCanvas(N){const Q=N.layerStatesArray[N.layerIndex],et=N.pixelRatio,ft=N.size,Mt=Math.round(ft[0]*et),_t=Math.round(ft[1]*et),Rt=Q.opacity;this.canvas.width=Mt,this.canvas.height=_t,this.canvas.style.opacity=`${Rt}`,this.shader.updateUniformData(this.gl,"u_pix2canv",u([[1/(this.canvas.width/2),0,0],[0,-1/(this.canvas.height/2),0],[-1,1,1]]))}}var ue=c(3812),Ce=c(9346),He=c(1395),ke=c(5551);class qe extends Ce.A{constructor(N){super(N),this.options=N}createRenderer(){return new Di(this,this.options.renderSettings)}updateParas(N,Q,et){const ft={colorRamp:this.options.renderSettings.colorRamp,maxEdgeLength:this.options.renderSettings.maxEdgeLength,storeInterpolatedPixelData:this.options.renderSettings.storeInterpolatedPixelData,valueProperty:this.options.renderSettings.valueProperty,power:N,showLabels:et,smooth:Q};super.getRenderer().updateSettings(ft),this.options.renderSettings=ft}}class Di extends ue.A{constructor(N,Q){super(N),this.settings=Q,this.container=document.createElement("div"),this.container.classList.add("ol-layer"),this.container.style.setProperty("position","absolute"),this.container.style.setProperty("width","100%"),this.container.style.setProperty("height","100%"),this.webGlCanvas=document.createElement("canvas"),this.webGlCanvas.style.setProperty("position","absolute"),this.webGlCanvas.style.setProperty("left","0px"),this.webGlCanvas.style.setProperty("top","0px"),this.webGlCanvas.style.setProperty("width","100%"),this.webGlCanvas.style.setProperty("height","100%"),this.webGlCanvas.width=1e3,this.webGlCanvas.height=1e3,this.gl=this.webGlCanvas.getContext("webgl"),this.container.appendChild(this.webGlCanvas),this.pointRenderer=new ue.A(N);const et=N.getSource();this.projection=et.getProjection();const{coords:ft,values:Mt,bboxDelta:_t,maxVal:Rt}=this.parseData(et,this.settings.valueProperty,this.settings.maxEdgeLength),{observationsBbox:zt,maxEdgeLengthBbox:vt}=this.parseDataBbox(_t,ft,Mt,Rt,this.settings.maxEdgeLength);this.bbox=_t;const Lt=[[1,0,0],[0,1,0],[0,0,1]];this.interpolationShader=Zn(this.gl,zt,Rt,this.settings.power,vt),this.valueFb=new pi(this.gl,this.webGlCanvas.width,this.webGlCanvas.height),this.colorizationShader=Ti(this.gl,this.settings.colorRamp,Rt,this.settings.smooth,this.valueFb),this.colorFb=new pi(this.gl,this.webGlCanvas.width,this.webGlCanvas.height),this.arrangementShader=Ps(this.gl,Lt,Lt,_t,this.colorFb),this.runInterpolationShader(this.valueFb.fbo),this.runColorizationShader(this.colorFb.fbo)}prepareFrame(N){if(this.webGlCanvas.style.opacity=`${N.layerStatesArray[N.layerIndex].opacity}`,N.viewState.projection!==this.projection){this.projection=N.viewState.projection;const ft=super.getLayer().getSource(),{coords:Mt,values:_t,bboxDelta:Rt,maxVal:zt}=this.parseData(ft,this.settings.valueProperty,this.settings.maxEdgeLength),{observationsBbox:vt,maxEdgeLengthBbox:Lt}=this.parseDataBbox(Rt,Mt,_t,zt,this.settings.maxEdgeLength);this.updateInterpolationShader(this.settings.power,vt,Lt),this.runInterpolationShader(this.valueFb.fbo),this.runColorizationShader(this.colorFb.fbo),this.bbox=Rt}return this.updateArrangementShader(N.coordinateToPixelTransform,N.size[0],N.size[1],this.bbox),this.pointRenderer.prepareFrame(N),!0}renderFrame(N,Q){if(this.runArrangementShader(),this.settings.showLabels){const et=this.pointRenderer.renderFrame(N,this.container);(0,ke.WM)(this.container,[this.webGlCanvas,et])}else(0,ke.WM)(this.container,[this.webGlCanvas]);return this.container}renderDeclutter(N){}updateSettings(N){const Q=this.settings;this.settings=N,N.power!==Q.power?(this.updateInterpolationShader(N.power),this.runInterpolationShader(this.valueFb.fbo),this.updateColorizationShader(N.smooth),this.runColorizationShader(this.colorFb.fbo)):N.smooth!==Q.smooth&&(this.updateColorizationShader(N.smooth),this.runColorizationShader(this.colorFb.fbo)),super.getLayer().changed()}updateArrangementShader(N,Q,et,ft){const _t=[[1/(Q/2),0,0],[0,-1/(et/2),0],[-1,1,1]];this.arrangementShader.updateUniformData(this.gl,"u_world2pix",u([[N[0],N[1],0],[N[2],N[3],0],[N[4],N[5],1]])),this.arrangementShader.updateUniformData(this.gl,"u_pix2clip",u(_t)),this.arrangementShader.updateUniformData(this.gl,"u_bbox",ft)}runArrangementShader(N){this.arrangementShader.bind(this.gl),this.arrangementShader.render(this.gl,[0,0,0,0],N)}updateInterpolationShader(N,Q,et){this.interpolationShader.updateUniformData(this.gl,"u_power",[N]),Q&&this.interpolationShader.updateTextureData(this.gl,"u_dataTexture",[Q]),et&&this.interpolationShader.updateUniformData(this.gl,"u_maxDistance",[et])}runInterpolationShader(N){this.interpolationShader.bind(this.gl),this.interpolationShader.render(this.gl,[0,0,0,0],N),this.settings.storeInterpolatedPixelData&&(this.interpolatedValues=(W=>{const N=W.getContext("webgl");if(!N)throw new Error("no context");const Q=N.getParameter(N.IMPLEMENTATION_COLOR_READ_FORMAT),et=N.getParameter(N.IMPLEMENTATION_COLOR_READ_TYPE);let ft;if(et===N.UNSIGNED_BYTE)ft=new Uint8Array(N.drawingBufferWidth*N.drawingBufferHeight*4);else if(et===N.UNSIGNED_SHORT_5_6_5||et===N.UNSIGNED_SHORT_4_4_4_4||et===N.UNSIGNED_SHORT_5_5_5_1)ft=new Uint16Array(N.drawingBufferWidth*N.drawingBufferHeight*4);else{if(et!==N.FLOAT)throw new Error(`Did not understand pixel data type ${et} for format ${Q}`);ft=new Float32Array(N.drawingBufferWidth*N.drawingBufferHeight*4)}return N.readPixels(0,0,W.width,W.height,Q,et,ft),ft})(this.webGlCanvas))}updateColorizationShader(N){this.colorizationShader.updateUniformData(this.gl,"u_smooth",[N?1:0])}runColorizationShader(N){this.colorizationShader.bind(this.gl),this.colorizationShader.render(this.gl,[0,0,0,0],N)}parseData(N,Q,et){let ft=N.getFeatures();ft=N instanceof He.A?N.getSource().getFeatures():N.getFeatures();const Mt=ft.map(qt=>qt.getGeometry().getCoordinates()),_t=ft.map(qt=>parseFloat(qt.getProperties()[Q])),Rt=Nn(Mt),zt=Rt[2]-Rt[0],vt=Rt[3]-Rt[1];let Lt,wt;zt>vt?(wt=zt-vt,Lt=0):(wt=0,Lt=vt-zt);const Dt=[Rt[0]-et,Rt[1]-et,Rt[2]+Lt+et,Rt[3]+wt+et],bt=_t.reduce((qt,yt)=>yt>qt?yt:qt,0);return{coords:Mt,values:_t,bboxDelta:Dt,maxVal:bt}}parseDataBbox(N,Q,et,ft,Mt){const _t=Mn(Q,et).map(Dt=>{const bt=yi([Dt[0],Dt[1]],N);return[255*(bt[0]+1)/2,255*(bt[1]+1)/2,255*Dt[2]/ft,255]}),Rt=_t.length,zt=(W=>{const Q=Math.ceil(f(W,2));return Math.pow(2,Q)})(Rt);for(let Dt=0;Dt<zt-Rt;Dt++)_t.push([0,0,0,0]);return{observationsBbox:_t,maxEdgeLengthBbox:Mt/Math.max(N[2]-N[0],N[3]-N[1])}}}const yi=(W,N)=>[(W[0]-N[0])/(N[2]-N[0])*2-1,(W[1]-N[1])/(N[3]-N[1])*2-1],Zn=(W,N,Q,et,ft)=>{const _t=new ne(W,"\n            precision mediump float;\n            attribute vec3 a_position;\n            attribute vec2 a_texturePosition;\n            varying vec2 v_position;\n            varying vec2 v_texturePosition;\n\n            void main() {\n                v_position = a_position.xy;\n                v_texturePosition = a_texturePosition;\n                gl_Position = vec4(a_position.xy, 0.0, 1.0);\n            }\n        ","\n            precision mediump float;\n            uniform float u_power;\n            uniform sampler2D u_dataTexture;\n            uniform int u_nrDataPoints;\n            uniform float u_maxValue;\n            uniform float u_maxDistance;\n            varying vec2 v_position;\n            varying vec2 v_texturePosition;\n\n            void main() {\n\n                float valSum = 0.0;\n                float wSum = 0.0;\n                float minD = 10000.0;\n                for (int i = 0; i < 10000; i++) {\n                    if (i > u_nrDataPoints) {\n                        break;\n                    }\n                    vec4 dataPoint = texture2D(u_dataTexture, vec2(float(i) / float(u_nrDataPoints), 0.5));\n                    if (dataPoint.w > 0.0) {  // texture is padded to next power of two with transparent 0-values.\n                        vec2 coords = dataPoint.xy * 2.0 - 1.0;  // transforming coords from [0, 1] to [-1, 1]\n                        float value = dataPoint.z * u_maxValue;  // transforming value from [0, 1] to [0, maxValue]\n\n                        float d = distance(v_position, coords);\n                        float w = 1.0 / pow(d, u_power);\n                        valSum += value * w;\n                        wSum += w;\n                        if (d < minD) {\n                            minD = d;\n                        }\n                    }\n                }\n                float interpolatedValue = valSum / wSum;\n                float alpha = 1.0;\n                if (minD > u_maxDistance) {\n                    alpha = 0.0;\n                }\n                vec4 color = vec4(interpolatedValue / u_maxValue, 0.0, 0.0, alpha);\n\n                gl_FragColor = color;\n            }\n        "),Rt={vertices:[[-1,1,0],[-1,-1,0],[1,-1,0],[1,1,0]],texturePositions:[[0,1],[0,0],[1,0],[1,1]],vertexIndices:[[0,1,2],[0,2,3]]};return new Ze(_t,[new Yt(W,_t,"a_position",Rt.vertices),new Yt(W,_t,"a_texturePosition",Rt.texturePositions)],[new fe(W,_t,"u_power","float",[et]),new fe(W,_t,"u_nrDataPoints","int",[N.length]),new fe(W,_t,"u_maxValue","float",[Q]),new fe(W,_t,"u_maxDistance","float",[ft])],[new jt(W,_t,"u_dataTexture",[N],0)],new ve(W,Rt.vertexIndices))},Ti=(W,N,Q,et,ft)=>{const _t=new ne(W,"\n            precision mediump float;\n            attribute vec2 a_position;\n            attribute vec2 a_textureCoord;\n            varying vec2 v_textureCoord;\n\n            void main() {\n                v_textureCoord = a_textureCoord;\n                gl_Position = vec4(a_position.xy, 0.0, 1.0);\n            }\n        ","\n            precision mediump float;\n            uniform float u_colorRampValues[15];\n            uniform vec3 u_colorRampColors[15];\n            uniform int u_nrColorRampValues;\n            uniform float u_maxValue;\n            uniform bool u_smooth;\n            uniform sampler2D u_valueTexture;\n            varying vec2 v_textureCoord;\n\n            vec3 valueToSmoothColor(in float value) {\n                if (value < u_colorRampValues[0]) {\n                    return u_colorRampColors[0];\n                }\n                for (int i = 1; i < 15; i++) {\n                    if (i > u_nrColorRampValues) {\n                        break;\n                    }\n                    if (value < u_colorRampValues[i]) {\n                        float alpha = (value - u_colorRampValues[i-1]) / (u_colorRampValues[i] - u_colorRampValues[i-1]);\n                        vec3 color = alpha * (u_colorRampColors[i] - u_colorRampColors[i-1]) + u_colorRampColors[i-1];\n                        return color;\n                    }\n                    if (i == u_nrColorRampValues) {\n                        return u_colorRampColors[i];\n                    }\n                }\n            }\n\n            vec3 valueToStepColor(in float value) {\n                for (int i = 0; i < 15; i++) {\n                    if (i > u_nrColorRampValues) {\n                        break;\n                    }\n                    if (value < u_colorRampValues[i]) {\n                        return u_colorRampColors[i];\n                    }\n                    if (i == u_nrColorRampValues) {\n                        return u_colorRampColors[i];\n                    }\n                }\n            }\n\n            void main() {\n                vec4 pixelData = texture2D(u_valueTexture, v_textureCoord);\n                float val = pixelData.r * u_maxValue;\n                float alpha = pixelData.w;\n                vec3 rgb = vec3(0.0, 0.0, 0.0);\n                if (alpha > 0.01) {\n                    if (u_smooth) {\n                        rgb = valueToSmoothColor(val);\n                    } else {\n                        rgb = valueToStepColor(val);\n                    }\n                }\n                gl_FragColor = vec4(rgb.x / 255.0, rgb.y / 255.0, rgb.z / 255.0, alpha);\n            }\n        ");return new Ze(_t,[new Yt(W,_t,"a_position",nt(2,2).vertices),new Yt(W,_t,"a_textureCoord",nt(2,2).texturePositions)],[new fe(W,_t,"u_colorRampValues","float[]",N.map(zt=>zt.val)),new fe(W,_t,"u_colorRampColors","vec3[]",u(N.map(zt=>zt.rgb))),new fe(W,_t,"u_nrColorRampValues","int",[N.length]),new fe(W,_t,"u_maxValue","float",[Q]),new fe(W,_t,"u_smooth","bool",[et?1:0])],[new rt(W,_t,"u_valueTexture",ft.fbo.texture,0)])},Ps=(W,N,Q,et,ft)=>{const Mt=new ne(W,"\n            precision mediump float;\n            attribute vec3 a_pos;\n            attribute vec2 a_posTexture;\n            uniform mat3 u_world2pix;\n            uniform mat3 u_pix2clip;\n            uniform vec4 u_bbox;\n            varying vec2 v_posTexture;\n\n            vec2 clipBbx2worldCoords(vec2 clipCoords, vec4 bbox) {\n                float xPerct = ( clipCoords.x + 1.0 ) / 2.0;\n                float yPerct = ( clipCoords.y + 1.0 ) / 2.0;\n                float xWorld = xPerct * (bbox.z - bbox.x) + bbox.x;\n                float yWorld = yPerct * (bbox.w - bbox.y) + bbox.y;\n                return vec2(xWorld, yWorld);\n            }\n\n            void main() {\n                v_posTexture = a_posTexture;\n                vec2 worldPos = clipBbx2worldCoords(a_pos.xy, u_bbox);\n                vec3 clipPos = u_pix2clip * u_world2pix * vec3(worldPos.xy, 1.0);\n                gl_Position = vec4(clipPos.xy, 0.0, 1.0);\n            }\n        ","\n            precision mediump float;\n            uniform sampler2D u_texture;\n            varying vec2 v_posTexture;\n\n            void main() {\n                gl_FragColor = texture2D(u_texture, v_posTexture);\n            }\n        ");return new Ze(Mt,[new Yt(W,Mt,"a_pos",nt(2,2).vertices),new Yt(W,Mt,"a_posTexture",nt(2,2).texturePositions)],[new fe(W,Mt,"u_world2pix","mat3",u(N)),new fe(W,Mt,"u_pix2clip","mat3",u(Q)),new fe(W,Mt,"u_bbox","vec4",et)],[new rt(W,Mt,"u_texture",ft.fbo.texture,0)])},Nn=W=>{const N=W.map(Rt=>Rt[0]),Q=W.map(Rt=>Rt[1]),et=Math.min(...N),ft=Math.max(...N);return[et,Math.min(...Q),ft,Math.max(...Q)]},Mn=(W,N)=>{const Q=[];for(let et=0;et<W.length;et++)Q.push(W[et].concat(N[et]));return Q};function Fe(W){return new Float64Array(W)}Fe(4),Fe(8),Fe(12),Fe(16),Fe(4),Fe(4),Fe(4),Fe(4),Fe(4),Fe(4),Fe(4),Fe(4),Fe(4),Fe(4),Fe(8),Fe(8),Fe(8),Fe(4),Fe(8),Fe(8),Fe(8),Fe(12),Fe(192),Fe(192),Fe(4),Fe(4),Fe(4),Fe(4),Fe(4),Fe(4),Fe(4),Fe(4),Fe(8),Fe(8),Fe(8),Fe(8),Fe(8),Fe(8),Fe(8),Fe(8),Fe(8),Fe(4),Fe(4),Fe(4),Fe(8),Fe(16),Fe(16),Fe(16),Fe(32),Fe(32),Fe(48),Fe(64),Fe(1152),Fe(1152),Fe(4),Fe(4),Fe(4),Fe(4),Fe(4),Fe(4),Fe(4),Fe(4),Fe(4),Fe(4),Fe(24),Fe(24),Fe(24),Fe(24),Fe(24),Fe(24),Fe(24),Fe(24),Fe(24),Fe(24),Fe(1152),Fe(1152),Fe(1152),Fe(1152),Fe(1152),Fe(2304),Fe(2304),Fe(3456),Fe(5760),Fe(8),Fe(8),Fe(8),Fe(16),Fe(24),Fe(48),Fe(48),Fe(96),Fe(192),Fe(384),Fe(384),Fe(384),Fe(768),Fe(96),Fe(96),Fe(96),Fe(1152),Math.pow(2,-52),new Uint32Array(512)},6591:(ce,gt,c)=>{"use strict";c.d(gt,{A:()=>B});var V=c(9568),K=c(2927),$=c(3805);class L extends $.Ay{constructor(E,p,_){super(E),this.element=p,this.index=_}}const B=class b extends V.A{constructor(E,p){if(super(),this.unique_=!!(p=p||{}).unique,this.array_=E||[],this.unique_)for(let _=0,h=this.array_.length;_<h;++_)this.assertUnique_(this.array_[_],_);this.updateLength_()}clear(){for(;this.getLength()>0;)this.pop()}extend(E){for(let p=0,_=E.length;p<_;++p)this.push(E[p]);return this}forEach(E){const p=this.array_;for(let _=0,h=p.length;_<h;++_)E(p[_],_,p)}getArray(){return this.array_}item(E){return this.array_[E]}getLength(){return this.get("length")}insertAt(E,p){if(E<0||E>this.getLength())throw new Error("Index out of bounds: "+E);this.unique_&&this.assertUnique_(p),this.array_.splice(E,0,p),this.updateLength_(),this.dispatchEvent(new L(K.A.ADD,p,E))}pop(){return this.removeAt(this.getLength()-1)}push(E){this.unique_&&this.assertUnique_(E);const p=this.getLength();return this.insertAt(p,E),this.getLength()}remove(E){const p=this.array_;for(let _=0,h=p.length;_<h;++_)if(p[_]===E)return this.removeAt(_)}removeAt(E){if(E<0||E>=this.getLength())return;const p=this.array_[E];return this.array_.splice(E,1),this.updateLength_(),this.dispatchEvent(new L(K.A.REMOVE,p,E)),p}setAt(E,p){if(E>=this.getLength())return void this.insertAt(E,p);if(E<0)throw new Error("Index out of bounds: "+E);this.unique_&&this.assertUnique_(p,E);const h=this.array_[E];this.array_[E]=p,this.dispatchEvent(new L(K.A.REMOVE,h,E)),this.dispatchEvent(new L(K.A.ADD,p,E))}updateLength_(){this.set("length",this.array_.length)}assertUnique_(E,p){for(let _=0,h=this.array_.length;_<h;++_)if(this.array_[_]===E&&_!==p)throw new Error("Duplicate item added to a unique collection")}}},2927:(ce,gt,c)=>{"use strict";c.d(gt,{A:()=>V});const V={ADD:"add",REMOVE:"remove"}},9153:(ce,gt,c)=>{"use strict";c.d(gt,{A:()=>K});const K=class V{constructor(){this.disposed=!1}dispose(){this.disposed||(this.disposed=!0,this.disposeInternal())}disposeInternal(){}}},9557:(ce,gt,c)=>{"use strict";c.d(gt,{A:()=>B});var V=c(9568),K=c(6621),$=c(5940),Z=c(2614);class L extends V.A{constructor(E){super(),this.id_=void 0,this.geometryName_="geometry",this.style_=null,this.styleFunction_=void 0,this.geometryChangeKey_=null,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),E&&("function"==typeof E.getSimplifiedGeometry?this.setGeometry(E):this.setProperties(E))}clone(){const E=new L(this.hasProperties()?this.getProperties():null);E.setGeometryName(this.getGeometryName());const p=this.getGeometry();p&&E.setGeometry(p.clone());const _=this.getStyle();return _&&E.setStyle(_),E}getGeometry(){return this.get(this.geometryName_)}getId(){return this.id_}getGeometryName(){return this.geometryName_}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}handleGeometryChange_(){this.changed()}handleGeometryChanged_(){this.geometryChangeKey_&&((0,Z.JH)(this.geometryChangeKey_),this.geometryChangeKey_=null);const E=this.getGeometry();E&&(this.geometryChangeKey_=(0,Z.KT)(E,K.A.CHANGE,this.handleGeometryChange_,this)),this.changed()}setGeometry(E){this.set(this.geometryName_,E)}setStyle(E){this.style_=E,this.styleFunction_=E?function b(F){if("function"==typeof F)return F;let E;return Array.isArray(F)?E=F:((0,$.v)("function"==typeof F.getZIndex,"Expected an `ol/style/Style` or an array of `ol/style/Style.js`"),E=[F]),function(){return E}}(E):void 0,this.changed()}setId(E){this.id_=E,this.changed()}setGeometryName(E){this.removeChangeListener(this.geometryName_,this.handleGeometryChanged_),this.geometryName_=E,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),this.handleGeometryChanged_()}}const B=L},6490:(ce,gt,c)=>{"use strict";c.d(gt,{Ay:()=>h,D4:()=>_,RA:()=>p,f6:()=>F});var V=c(1884),K=c(6621),$=c(2661),Z=c(2531),L=c(2614),b=c(1766);function F(r,u,o){const f=r;let g=!0,a=!1,C=!1;const y=[(0,L.Jz)(f,K.A.LOAD,function(){C=!0,a||u()})];return f.src&&Z.DT?(a=!0,f.decode().then(function(){g&&u()}).catch(function(v){g&&(C?u():o())})):y.push((0,L.Jz)(f,K.A.ERROR,o)),function(){g=!1,y.forEach(L.JH)}}function p(r,u){return u&&(r.src=u),r.src&&Z.DT?new Promise((o,f)=>r.decode().then(()=>o(r)).catch(g=>r.complete&&r.width?o(r):f(g))):function E(r,u){return new Promise((o,f)=>{function g(){C(),o(r)}function a(){C(),f(new Error("Image load error"))}function C(){r.removeEventListener("load",g),r.removeEventListener("error",a)}r.addEventListener("load",g),r.addEventListener("error",a),u&&(r.src=u)})}(r)}function _(r,u){return u&&(r.src=u),r.src&&Z.DT&&Z.XM?r.decode().then(()=>createImageBitmap(r)).catch(o=>{if(r.complete&&r.width)return r;throw o}):p(r)}const h=class B extends V.A{constructor(u,o,f,g){super(),this.extent=u,this.pixelRatio_=f,this.resolution=o,this.state="function"==typeof g?$.A.IDLE:g,this.image_=null,this.loader="function"==typeof g?g:null}changed(){this.dispatchEvent(K.A.CHANGE)}getExtent(){return this.extent}getImage(){return this.image_}getPixelRatio(){return this.pixelRatio_}getResolution(){return this.resolution}getState(){return this.state}load(){if(this.state==$.A.IDLE&&this.loader){this.state=$.A.LOADING,this.changed();const u=this.getResolution(),o=Array.isArray(u)?u[0]:u;(0,b.hq)(()=>this.loader(this.getExtent(),o,this.getPixelRatio())).then(f=>{"image"in f&&(this.image_=f.image),"extent"in f&&(this.extent=f.extent),"resolution"in f&&(this.resolution=f.resolution),"pixelRatio"in f&&(this.pixelRatio_=f.pixelRatio),(f instanceof HTMLImageElement||f instanceof ImageBitmap||f instanceof HTMLCanvasElement||f instanceof HTMLVideoElement)&&(this.image_=f),this.state=$.A.LOADED}).catch(f=>{this.state=$.A.ERROR,console.error(f)}).finally(()=>this.changed())}}setImage(u){this.image_=u}setResolution(u){this.resolution=u}}},1950:(ce,gt,c)=>{"use strict";c.d(gt,{A:()=>Z});var V=c(2661),K=c(6490);const Z=class $ extends K.Ay{constructor(b,B,F,E,p){super(b,B,F,void 0!==p?V.A.IDLE:V.A.LOADED),this.loader_=void 0!==p?p:null,this.canvas_=E,this.error_=null}getError(){return this.error_}handleLoad_(b){b?(this.error_=b,this.state=V.A.ERROR):this.state=V.A.LOADED,this.changed()}load(){this.state==V.A.IDLE&&(this.state=V.A.LOADING,this.changed(),this.loader_(this.handleLoad_.bind(this)))}getImage(){return this.canvas_}}},2661:(ce,gt,c)=>{"use strict";c.d(gt,{A:()=>V});const V={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4}},8118:(ce,gt,c)=>{"use strict";c.d(gt,{A:()=>B});var V=c(7783),K=c(9806),$=c(5551),Z=c(6490);const B=class L extends V.A{constructor(E,p,_,h,r,u){super(E,p,u),this.crossOrigin_=h,this.src_=_,this.key=_,this.image_=new Image,null!==h&&(this.image_.crossOrigin=h),this.unlisten_=null,this.tileLoadFunction_=r}getImage(){return this.image_}setImage(E){this.image_=E,this.state=K.A.LOADED,this.unlistenImage_(),this.changed()}handleImageError_(){this.state=K.A.ERROR,this.unlistenImage_(),this.image_=function b(){const F=(0,$.Y)(1,1);return F.fillStyle="rgba(0,0,0,0)",F.fillRect(0,0,1,1),F.canvas}(),this.changed()}handleImageLoad_(){const E=this.image_;this.state=E.naturalWidth&&E.naturalHeight?K.A.LOADED:K.A.EMPTY,this.unlistenImage_(),this.changed()}load(){this.state==K.A.ERROR&&(this.state=K.A.IDLE,this.image_=new Image,null!==this.crossOrigin_&&(this.image_.crossOrigin=this.crossOrigin_)),this.state==K.A.IDLE&&(this.state=K.A.LOADING,this.changed(),this.tileLoadFunction_(this,this.src_),this.unlisten_=(0,Z.f6)(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))}unlistenImage_(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}}},5281:(ce,gt,c)=>{"use strict";c.d(gt,{A:()=>V});const V={POSTRENDER:"postrender",MOVESTART:"movestart",MOVEEND:"moveend",LOADSTART:"loadstart",LOADEND:"loadend"}},9568:(ce,gt,c)=>{"use strict";c.d(gt,{A:()=>F});var V=c(3805),K=c(6058),$=c(6166),Z=c(2383),L=c(9330);class b extends V.Ay{constructor(p,_,h){super(p),this.key=_,this.oldValue=h}}const F=class B extends $.A{constructor(p){super(),(0,Z.v6)(this),this.values_=null,void 0!==p&&this.setProperties(p)}get(p){let _;return this.values_&&this.values_.hasOwnProperty(p)&&(_=this.values_[p]),_}getKeys(){return this.values_&&Object.keys(this.values_)||[]}getProperties(){return this.values_&&Object.assign({},this.values_)||{}}getPropertiesInternal(){return this.values_}hasProperties(){return!!this.values_}notify(p,_){let h;h=`change:${p}`,this.hasListener(h)&&this.dispatchEvent(new b(h,p,_)),h=K.A.PROPERTYCHANGE,this.hasListener(h)&&this.dispatchEvent(new b(h,p,_))}addChangeListener(p,_){this.addEventListener(`change:${p}`,_)}removeChangeListener(p,_){this.removeEventListener(`change:${p}`,_)}set(p,_,h){const r=this.values_||(this.values_={});if(h)r[p]=_;else{const u=r[p];r[p]=_,u!==_&&this.notify(p,u)}}setProperties(p,_){for(const h in p)this.set(h,p[h],_)}applyProperties(p){p.values_&&Object.assign(this.values_||(this.values_={}),p.values_)}unset(p,_){if(this.values_&&p in this.values_){const h=this.values_[p];delete this.values_[p],(0,L.p)(this.values_)&&(this.values_=null),_||this.notify(p,h)}}}},6058:(ce,gt,c)=>{"use strict";c.d(gt,{A:()=>V});const V={PROPERTYCHANGE:"propertychange"}},6166:(ce,gt,c)=>{"use strict";c.d(gt,{A:()=>b,e:()=>L});var V=c(1884),K=c(6621),$=c(2614);function L(B){if(Array.isArray(B))for(let F=0,E=B.length;F<E;++F)(0,$.JH)(B[F]);else(0,$.JH)(B)}const b=class Z extends V.A{constructor(){super(),this.on=this.onInternal,this.once=this.onceInternal,this.un=this.unInternal,this.revision_=0}changed(){++this.revision_,this.dispatchEvent(K.A.CHANGE)}getRevision(){return this.revision_}onInternal(F,E){if(Array.isArray(F)){const p=F.length,_=new Array(p);for(let h=0;h<p;++h)_[h]=(0,$.KT)(this,F[h],E);return _}return(0,$.KT)(this,F,E)}onceInternal(F,E){let p;if(Array.isArray(F)){const _=F.length;p=new Array(_);for(let h=0;h<_;++h)p[h]=(0,$.Jz)(this,F[h],E)}else p=(0,$.Jz)(this,F,E);return E.ol_key=p,p}unInternal(F,E){const p=E.ol_key;if(p)L(p);else if(Array.isArray(F))for(let _=0,h=F.length;_<h;++_)this.removeEventListener(F[_],E);else this.removeEventListener(F,E)}}},7783:(ce,gt,c)=>{"use strict";c.d(gt,{A:()=>B});var V=c(1884),K=c(6621),$=c(9806),Z=c(2383),L=c(6378);const B=class b extends V.A{constructor(E,p,_){super(),_=_||{},this.tileCoord=E,this.state=p,this.interimTile=null,this.key="",this.transition_=void 0===_.transition?250:_.transition,this.transitionStarts_={},this.interpolate=!!_.interpolate}changed(){this.dispatchEvent(K.A.CHANGE)}release(){this.state===$.A.ERROR&&this.setState($.A.EMPTY)}getKey(){return this.key+"/"+this.tileCoord}getInterimTile(){let E=this.interimTile;if(!E)return this;do{if(E.getState()==$.A.LOADED)return this.transition_=0,E;E=E.interimTile}while(E);return this}refreshInterimChain(){let E=this.interimTile;if(!E)return;let p=this;do{if(E.getState()==$.A.LOADED){E.interimTile=null;break}E.getState()==$.A.LOADING?p=E:E.getState()==$.A.IDLE?p.interimTile=E.interimTile:p=E,E=p.interimTile}while(E)}getTileCoord(){return this.tileCoord}getState(){return this.state}setState(E){if(this.state!==$.A.ERROR&&this.state>E)throw new Error("Tile load sequence violation");this.state=E,this.changed()}load(){(0,Z.b0)()}getAlpha(E,p){if(!this.transition_)return 1;let _=this.transitionStarts_[E];if(_){if(-1===_)return 1}else _=p,this.transitionStarts_[E]=_;const h=p-_+1e3/60;return h>=this.transition_?1:(0,L.a6)(h/this.transition_)}inTransition(E){return!!this.transition_&&-1!==this.transitionStarts_[E]}endTransition(E){this.transition_&&(this.transitionStarts_[E]=-1)}}},9189:(ce,gt,c)=>{"use strict";c.d(gt,{A:()=>Z});var V=c(2529),K=c(6690);const Z=class $ extends V.A{clear(){for(;this.getCount()>0;)this.pop().release();super.clear()}expireCache(b){for(;this.canExpireCache()&&!(this.peekLast().getKey()in b);)this.pop().release()}pruneExceptNewestZ(){if(0===this.getCount())return;const b=this.peekFirstKey(),F=(0,K.K)(b)[0];this.forEach(E=>{E.tileCoord[0]!==F&&(this.remove((0,K.i7)(E.tileCoord)),E.release())})}}},1334:(ce,gt,c)=>{"use strict";c.d(gt,{A:()=>E,z:()=>p});var V=c(6621),K=c(5940),$=c(9330);const Z=1/0,b=class L{constructor(h,r){this.priorityFunction_=h,this.keyFunction_=r,this.elements_=[],this.priorities_=[],this.queuedElements_={}}clear(){this.elements_.length=0,this.priorities_.length=0,(0,$.I)(this.queuedElements_)}dequeue(){const h=this.elements_,r=this.priorities_,u=h[0];1==h.length?(h.length=0,r.length=0):(h[0]=h.pop(),r[0]=r.pop(),this.siftUp_(0));const o=this.keyFunction_(u);return delete this.queuedElements_[o],u}enqueue(h){(0,K.v)(!(this.keyFunction_(h)in this.queuedElements_),"Tried to enqueue an `element` that was already added to the queue");const r=this.priorityFunction_(h);return r!=Z&&(this.elements_.push(h),this.priorities_.push(r),this.queuedElements_[this.keyFunction_(h)]=!0,this.siftDown_(0,this.elements_.length-1),!0)}getCount(){return this.elements_.length}getLeftChildIndex_(h){return 2*h+1}getRightChildIndex_(h){return 2*h+2}getParentIndex_(h){return h-1>>1}heapify_(){let h;for(h=(this.elements_.length>>1)-1;h>=0;h--)this.siftUp_(h)}isEmpty(){return 0===this.elements_.length}isKeyQueued(h){return h in this.queuedElements_}isQueued(h){return this.isKeyQueued(this.keyFunction_(h))}siftUp_(h){const r=this.elements_,u=this.priorities_,o=r.length,f=r[h],g=u[h],a=h;for(;h<o>>1;){const C=this.getLeftChildIndex_(h),y=this.getRightChildIndex_(h),v=y<o&&u[y]<u[C]?y:C;r[h]=r[v],u[h]=u[v],h=v}r[h]=f,u[h]=g,this.siftDown_(a,h)}siftDown_(h,r){const u=this.elements_,o=this.priorities_,f=u[r],g=o[r];for(;r>h;){const a=this.getParentIndex_(r);if(!(o[a]>g))break;u[r]=u[a],o[r]=o[a],r=a}u[r]=f,o[r]=g}reprioritize(){const h=this.priorityFunction_,r=this.elements_,u=this.priorities_;let o=0;const f=r.length;let g,a,C;for(a=0;a<f;++a)g=r[a],C=h(g),C==Z?delete this.queuedElements_[this.keyFunction_(g)]:(u[o]=C,r[o++]=g);r.length=o,u.length=o,this.heapify_()}};var B=c(9806);const E=class F extends b{constructor(h,r){super(function(u){return h.apply(null,u)},function(u){return u[0].getKey()}),this.boundHandleTileChange_=this.handleTileChange.bind(this),this.tileChangeCallback_=r,this.tilesLoading_=0,this.tilesLoadingKeys_={}}enqueue(h){const r=super.enqueue(h);return r&&h[0].addEventListener(V.A.CHANGE,this.boundHandleTileChange_),r}getTilesLoading(){return this.tilesLoading_}handleTileChange(h){const r=h.target,u=r.getState();if(u===B.A.LOADED||u===B.A.ERROR||u===B.A.EMPTY){u!==B.A.ERROR&&r.removeEventListener(V.A.CHANGE,this.boundHandleTileChange_);const o=r.getKey();o in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[o],--this.tilesLoading_),this.tileChangeCallback_()}}loadMoreTiles(h,r){let o,f,g,u=0;for(;this.tilesLoading_<h&&u<r&&this.getCount()>0;)f=this.dequeue()[0],g=f.getKey(),o=f.getState(),o===B.A.IDLE&&!(g in this.tilesLoadingKeys_)&&(this.tilesLoadingKeys_[g]=!0,++this.tilesLoading_,++u,f.load())}};function p(_,h,r,u,o){if(!_||!(r in _.wantedTiles)||!_.wantedTiles[r][h.getKey()])return Z;const f=_.viewState.center,g=u[0]-f[0],a=u[1]-f[1];return 65536*Math.log(o)+Math.sqrt(g*g+a*a)/o}},6990:(ce,gt,c)=>{"use strict";c.d(gt,{A:()=>$,N:()=>K});class V{constructor(L,b,B,F){this.minX=L,this.maxX=b,this.minY=B,this.maxY=F}contains(L){return this.containsXY(L[1],L[2])}containsTileRange(L){return this.minX<=L.minX&&L.maxX<=this.maxX&&this.minY<=L.minY&&L.maxY<=this.maxY}containsXY(L,b){return this.minX<=L&&L<=this.maxX&&this.minY<=b&&b<=this.maxY}equals(L){return this.minX==L.minX&&this.minY==L.minY&&this.maxX==L.maxX&&this.maxY==L.maxY}extend(L){L.minX<this.minX&&(this.minX=L.minX),L.maxX>this.maxX&&(this.maxX=L.maxX),L.minY<this.minY&&(this.minY=L.minY),L.maxY>this.maxY&&(this.maxY=L.maxY)}getHeight(){return this.maxY-this.minY+1}getSize(){return[this.getWidth(),this.getHeight()]}getWidth(){return this.maxX-this.minX+1}intersects(L){return this.minX<=L.maxX&&this.maxX>=L.minX&&this.minY<=L.maxY&&this.maxY>=L.minY}}function K(Z,L,b,B,F){return void 0!==F?(F.minX=Z,F.maxX=L,F.minY=b,F.maxY=B,F):new V(Z,L,b,B)}const $=V},9806:(ce,gt,c)=>{"use strict";c.d(gt,{A:()=>V});const V={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4}},9100:(ce,gt,c)=>{"use strict";c.d(gt,{A:()=>Z});var V=c(7783),K=c(9806);const Z=class $ extends V.A{constructor(b,B,F,E,p,_){super(b,B,_),this.extent=null,this.format_=E,this.features_=null,this.projection=null,this.tileLoadFunction_=p,this.url_=F,this.key=F}getFormat(){return this.format_}getFeatures(){return this.features_}load(){this.state==K.A.IDLE&&(this.setState(K.A.LOADING),this.tileLoadFunction_(this,this.url_),this.loader_&&this.loader_(this.extent,this.resolution,this.projection))}onLoad(b,B){this.setFeatures(b)}onError(){this.setState(K.A.ERROR)}setFeatures(b){this.features_=b,this.setState(K.A.LOADED)}setLoader(b){this.loader_=b}}},3980:(ce,gt,c)=>{"use strict";c.d(gt,{Ay:()=>O});var V=c(9568),K=c(6631),$=c(7903),Z=c(3139),L=c(9325),b=c(1766),B=c(5085),F=c(5940),E=c(9973);function p(R,A,M){return function(D,H,it,lt,xt){if(!D)return;if(!H&&!A)return D;const At=A?0:it[0]*H,St=A?0:it[1]*H,Ut=xt?xt[0]:0,Kt=xt?xt[1]:0;let ut=R[0]+At/2+Ut,Tt=R[2]-At/2+Ut,Ft=R[1]+St/2+Kt,ie=R[3]-St/2+Kt;ut>Tt&&(ut=(Tt+ut)/2,Tt=ut),Ft>ie&&(Ft=(ie+Ft)/2,ie=Ft);let Zt=(0,E.qE)(D[0],ut,Tt),ge=(0,E.qE)(D[1],Ft,ie);if(lt&&M&&H){const ne=30*H;Zt+=-ne*Math.log(1+Math.max(0,ut-D[0])/ne)+ne*Math.log(1+Math.max(0,D[0]-Tt)/ne),ge+=-ne*Math.log(1+Math.max(0,Ft-D[1])/ne)+ne*Math.log(1+Math.max(0,D[1]-ie)/ne)}return[Zt,ge]}}function _(R){return R}var h=c(8507),r=c(2058);function u(R,A,M,D){const H=(0,h.RG)(A)/M[0],it=(0,h.Oq)(A)/M[1];return D?Math.min(R,Math.max(H,it)):Math.min(R,Math.min(H,it))}function o(R,A,M){let D=Math.min(R,A);return D*=Math.log(1+50*Math.max(0,R/A-1))/50+1,M&&(D=Math.max(D,M),D/=Math.log(1+50*Math.max(0,M/R-1))/50+1),(0,E.qE)(D,M/2,2*A)}function a(R,A,M,D,H){return M=void 0===M||M,function(it,lt,xt,At){if(void 0!==it){const St=D?u(R,D,xt,H):R;return M&&At?o(it,St,A):(0,E.qE)(it,A,St)}}}var C=c(3066),y=c(6378),v=c(4157);function z(R,A){setTimeout(function(){R(A)},0)}function T(R,A,M,D,H){const it=Math.cos(-H);let lt=Math.sin(-H),xt=R[0]*it-R[1]*lt,At=R[1]*it+R[0]*lt;return xt+=(A[0]/2-M[0])*D,At+=(M[1]-A[1]/2)*D,lt=-lt,[xt*it-At*lt,At*it+xt*lt]}const O=class w extends V.A{constructor(A){super(),A=Object.assign({},A),this.hints_=[0,0],this.animations_=[],this.projection_=(0,L.Av)(A.projection,"EPSG:3857"),this.viewportSize_=[100,100],this.targetCenter_=null,this.nextCenter_=null,this.cancelAnchor_=void 0,A.projection&&(0,L.RJ)(),A.center&&(A.center=(0,L.Ad)(A.center,this.projection_)),A.extent&&(A.extent=(0,L.SD)(A.extent,this.projection_)),this.applyOptions_(A)}applyOptions_(A){const M=Object.assign({},A);for(const xt in $.A)delete M[xt];this.setProperties(M,!0);const D=function P(R){let A,M,D,lt=void 0!==R.minZoom?R.minZoom:0,xt=void 0!==R.maxZoom?R.maxZoom:28;const At=void 0!==R.zoomFactor?R.zoomFactor:2,St=void 0!==R.multiWorld&&R.multiWorld,Ut=void 0===R.smoothResolutionConstraint||R.smoothResolutionConstraint,Kt=void 0!==R.showFullExtent&&R.showFullExtent,ut=(0,L.Av)(R.projection,"EPSG:3857"),Tt=ut.getExtent();let Ft=R.constrainOnlyCenter,ie=R.extent;if(!St&&!ie&&ut.isGlobal()&&(Ft=!1,ie=Tt),void 0!==R.resolutions){const Zt=R.resolutions;M=Zt[lt],D=void 0!==Zt[xt]?Zt[xt]:Zt[Zt.length-1],A=R.constrainResolution?function f(R,A,M,D){return A=void 0===A||A,function(H,it,lt,xt){if(void 0!==H){const At=R[0],St=R[R.length-1],Ut=M?u(At,M,lt,D):At;if(xt)return A?o(H,Ut,St):(0,E.qE)(H,St,Ut);const Kt=Math.min(Ut,H),ut=Math.floor((0,r.FT)(R,Kt,it));return R[ut]>Ut&&ut<R.length-1?R[ut+1]:R[ut]}}}(Zt,Ut,!Ft&&ie,Kt):a(M,D,Ut,!Ft&&ie,Kt)}else{const ge=(Tt?Math.max((0,h.RG)(Tt),(0,h.Oq)(Tt)):360*L.Ig.degrees/ut.getMetersPerUnit())/Z.R/Math.pow(2,0),ne=ge/Math.pow(2,28);M=R.maxResolution,void 0!==M?lt=0:M=ge/Math.pow(At,lt),D=R.minResolution,void 0===D&&(D=void 0!==R.maxZoom?void 0!==R.maxResolution?M/Math.pow(At,xt):ge/Math.pow(At,xt):ne),xt=lt+Math.floor(Math.log(M/D)/Math.log(At)),D=M/Math.pow(At,xt-lt),A=R.constrainResolution?function g(R,A,M,D,H,it){return D=void 0===D||D,M=void 0!==M?M:0,function(lt,xt,At,St){if(void 0!==lt){const Ut=H?u(A,H,At,it):A;if(St)return D?o(lt,Ut,M):(0,E.qE)(lt,M,Ut);const Kt=1e-9,ut=Math.ceil(Math.log(A/Ut)/Math.log(R)-Kt),Tt=-xt*(.5-Kt)+.5,Ft=Math.min(Ut,lt),ie=Math.floor(Math.log(A/Ft)/Math.log(R)+Tt),Zt=Math.max(ut,ie),ge=A/Math.pow(R,Zt);return(0,E.qE)(ge,M,Ut)}}}(At,M,D,Ut,!Ft&&ie,Kt):a(M,D,Ut,!Ft&&ie,Kt)}return{constraint:A,maxResolution:M,minResolution:D,minZoom:lt,zoomFactor:At}}(A);this.maxResolution_=D.maxResolution,this.minResolution_=D.minResolution,this.zoomFactor_=D.zoomFactor,this.resolutions_=A.resolutions,this.padding_=A.padding,this.minZoom_=D.minZoom;const H=function I(R){if(void 0!==R.extent)return p(R.extent,R.constrainOnlyCenter,void 0===R.smoothExtentConstraint||R.smoothExtentConstraint);const A=(0,L.Av)(R.projection,"EPSG:3857");if(!0!==R.multiWorld&&A.isGlobal()){const M=A.getExtent().slice();return M[0]=-1/0,M[2]=1/0,p(M,!1,!1)}return _}(A),it=D.constraint,lt=function j(R){if(void 0===R.enableRotation||R.enableRotation){const M=R.constrainRotation;return void 0===M||!0===M?(0,C.cq)():!1===M?C.dv:"number"==typeof M?(0,C.a$)(M):C.dv}return C.b8}(A);this.constraints_={center:H,resolution:it,rotation:lt},this.setRotation(void 0!==A.rotation?A.rotation:0),this.setCenterInternal(void 0!==A.center?A.center:null),void 0!==A.resolution?this.setResolution(A.resolution):void 0!==A.zoom&&this.setZoom(A.zoom)}get padding(){return this.padding_}set padding(A){let M=this.padding_;this.padding_=A;const D=this.getCenterInternal();if(D){const H=A||[0,0,0,0];M=M||[0,0,0,0];const it=this.getResolution();this.setCenterInternal([D[0]+it/2*(H[3]-M[3]+M[1]-H[1]),D[1]-it/2*(H[0]-M[0]+M[2]-H[2])])}}getUpdatedOptions_(A){const M=this.getProperties();return void 0!==M.resolution?M.resolution=this.getResolution():M.zoom=this.getZoom(),M.center=this.getCenterInternal(),M.rotation=this.getRotation(),Object.assign({},M,A)}animate(A){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);const M=new Array(arguments.length);for(let D=0;D<M.length;++D){let H=arguments[D];H.center&&(H=Object.assign({},H),H.center=(0,L.Ad)(H.center,this.getProjection())),H.anchor&&(H=Object.assign({},H),H.anchor=(0,L.Ad)(H.anchor,this.getProjection())),M[D]=H}this.animateInternal.apply(this,M)}animateInternal(A){let D,M=arguments.length;M>1&&"function"==typeof arguments[M-1]&&(D=arguments[M-1],--M);let H=0;for(;H<M&&!this.isDef();++H){const Ut=arguments[H];Ut.center&&this.setCenterInternal(Ut.center),void 0!==Ut.zoom?this.setZoom(Ut.zoom):Ut.resolution&&this.setResolution(Ut.resolution),void 0!==Ut.rotation&&this.setRotation(Ut.rotation)}if(H===M)return void(D&&z(D,!0));let it=Date.now(),lt=this.targetCenter_.slice(),xt=this.targetResolution_,At=this.targetRotation_;const St=[];for(;H<M;++H){const Ut=arguments[H],Kt={start:it,complete:!1,anchor:Ut.anchor,duration:void 0!==Ut.duration?Ut.duration:1e3,easing:Ut.easing||y.T9,callback:D};if(Ut.center&&(Kt.sourceCenter=lt,Kt.targetCenter=Ut.center.slice(),lt=Kt.targetCenter),void 0!==Ut.zoom?(Kt.sourceResolution=xt,Kt.targetResolution=this.getResolutionForZoom(Ut.zoom),xt=Kt.targetResolution):Ut.resolution&&(Kt.sourceResolution=xt,Kt.targetResolution=Ut.resolution,xt=Kt.targetResolution),void 0!==Ut.rotation){Kt.sourceRotation=At;const ut=(0,E.xP)(Ut.rotation-At+Math.PI,2*Math.PI)-Math.PI;Kt.targetRotation=At+ut,At=Kt.targetRotation}(R=Kt).sourceCenter&&R.targetCenter&&!(0,B.aI)(R.sourceCenter,R.targetCenter)||R.sourceResolution!==R.targetResolution||R.sourceRotation!==R.targetRotation?it+=Kt.duration:Kt.complete=!0,St.push(Kt)}var R;this.animations_.push(St),this.setHint(K.A.ANIMATING,1),this.updateAnimations_()}getAnimating(){return this.hints_[K.A.ANIMATING]>0}getInteracting(){return this.hints_[K.A.INTERACTING]>0}cancelAnimations(){let A;this.setHint(K.A.ANIMATING,-this.hints_[K.A.ANIMATING]);for(let M=0,D=this.animations_.length;M<D;++M){const H=this.animations_[M];if(H[0].callback&&z(H[0].callback,!1),!A)for(let it=0,lt=H.length;it<lt;++it){const xt=H[it];if(!xt.complete){A=xt.anchor;break}}}this.animations_.length=0,this.cancelAnchor_=A,this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN}updateAnimations_(){if(void 0!==this.updateAnimationKey_&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),!this.getAnimating())return;const A=Date.now();let M=!1;for(let D=this.animations_.length-1;D>=0;--D){const H=this.animations_[D];let it=!0;for(let lt=0,xt=H.length;lt<xt;++lt){const At=H[lt];if(At.complete)continue;let Ut=At.duration>0?(A-At.start)/At.duration:1;Ut>=1?(At.complete=!0,Ut=1):it=!1;const Kt=At.easing(Ut);if(At.sourceCenter){const ut=At.sourceCenter[0],Tt=At.sourceCenter[1],Ft=At.targetCenter[0],ie=At.targetCenter[1];this.nextCenter_=At.targetCenter,this.targetCenter_=[ut+Kt*(Ft-ut),Tt+Kt*(ie-Tt)]}if(At.sourceResolution&&At.targetResolution){const ut=1===Kt?At.targetResolution:At.sourceResolution+Kt*(At.targetResolution-At.sourceResolution);if(At.anchor){const Tt=this.getViewportSize_(this.getRotation()),Ft=this.constraints_.resolution(ut,0,Tt,!0);this.targetCenter_=this.calculateCenterZoom(Ft,At.anchor)}this.nextResolution_=At.targetResolution,this.targetResolution_=ut,this.applyTargetState_(!0)}if(void 0!==At.sourceRotation&&void 0!==At.targetRotation){const ut=1===Kt?(0,E.xP)(At.targetRotation+Math.PI,2*Math.PI)-Math.PI:At.sourceRotation+Kt*(At.targetRotation-At.sourceRotation);if(At.anchor){const Tt=this.constraints_.rotation(ut,!0);this.targetCenter_=this.calculateCenterRotate(Tt,At.anchor)}this.nextRotation_=At.targetRotation,this.targetRotation_=ut}if(this.applyTargetState_(!0),M=!0,!At.complete)break}if(it){this.animations_[D]=null,this.setHint(K.A.ANIMATING,-1),this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN;const lt=H[0].callback;lt&&z(lt,!0)}}this.animations_=this.animations_.filter(Boolean),M&&void 0===this.updateAnimationKey_&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)))}calculateCenterRotate(A,M){let D;const H=this.getCenterInternal();return void 0!==H&&(D=[H[0]-M[0],H[1]-M[1]],(0,B.e$)(D,A-this.getRotation()),(0,B.WQ)(D,M)),D}calculateCenterZoom(A,M){let D;const H=this.getCenterInternal(),it=this.getResolution();return void 0!==H&&void 0!==it&&(D=[M[0]-A*(M[0]-H[0])/it,M[1]-A*(M[1]-H[1])/it]),D}getViewportSize_(A){const M=this.viewportSize_;if(A){const D=M[0],H=M[1];return[Math.abs(D*Math.cos(A))+Math.abs(H*Math.sin(A)),Math.abs(D*Math.sin(A))+Math.abs(H*Math.cos(A))]}return M}setViewportSize(A){this.viewportSize_=Array.isArray(A)?A.slice():[100,100],this.getAnimating()||this.resolveConstraints(0)}getCenter(){const A=this.getCenterInternal();return A&&(0,L.te)(A,this.getProjection())}getCenterInternal(){return this.get($.A.CENTER)}getConstraints(){return this.constraints_}getConstrainResolution(){return this.get("constrainResolution")}getHints(A){return void 0!==A?(A[0]=this.hints_[0],A[1]=this.hints_[1],A):this.hints_.slice()}calculateExtent(A){const M=this.calculateExtentInternal(A);return(0,L.JR)(M,this.getProjection())}calculateExtentInternal(A){A=A||this.getViewportSizeMinusPadding_();const M=this.getCenterInternal();(0,F.v)(M,"The view center is not defined");const D=this.getResolution();(0,F.v)(void 0!==D,"The view resolution is not defined");const H=this.getRotation();return(0,F.v)(void 0!==H,"The view rotation is not defined"),(0,h.Bg)(M,D,H,A)}getMaxResolution(){return this.maxResolution_}getMinResolution(){return this.minResolution_}getMaxZoom(){return this.getZoomForResolution(this.minResolution_)}setMaxZoom(A){this.applyOptions_(this.getUpdatedOptions_({maxZoom:A}))}getMinZoom(){return this.getZoomForResolution(this.maxResolution_)}setMinZoom(A){this.applyOptions_(this.getUpdatedOptions_({minZoom:A}))}setConstrainResolution(A){this.applyOptions_(this.getUpdatedOptions_({constrainResolution:A}))}getProjection(){return this.projection_}getResolution(){return this.get($.A.RESOLUTION)}getResolutions(){return this.resolutions_}getResolutionForExtent(A,M){return this.getResolutionForExtentInternal((0,L.SD)(A,this.getProjection()),M)}getResolutionForExtentInternal(A,M){M=M||this.getViewportSizeMinusPadding_();const D=(0,h.RG)(A)/M[0],H=(0,h.Oq)(A)/M[1];return Math.max(D,H)}getResolutionForValueFunction(A){A=A||2;const M=this.getConstrainedResolution(this.maxResolution_),H=Math.log(M/this.minResolution_)/Math.log(A);return function(it){return M/Math.pow(A,it*H)}}getRotation(){return this.get($.A.ROTATION)}getValueForResolutionFunction(A){const M=Math.log(A||2),D=this.getConstrainedResolution(this.maxResolution_),it=Math.log(D/this.minResolution_)/M;return function(lt){return Math.log(D/lt)/M/it}}getViewportSizeMinusPadding_(A){let M=this.getViewportSize_(A);const D=this.padding_;return D&&(M=[M[0]-D[1]-D[3],M[1]-D[0]-D[2]]),M}getState(){const A=this.getProjection(),M=this.getResolution(),D=this.getRotation();let H=this.getCenterInternal();const it=this.padding_;if(it){const lt=this.getViewportSizeMinusPadding_();H=T(H,this.getViewportSize_(),[lt[0]/2+it[3],lt[1]/2+it[0]],M,D)}return{center:H.slice(0),projection:void 0!==A?A:null,resolution:M,nextCenter:this.nextCenter_,nextResolution:this.nextResolution_,nextRotation:this.nextRotation_,rotation:D,zoom:this.getZoom()}}getViewStateAndExtent(){return{viewState:this.getState(),extent:this.calculateExtent()}}getZoom(){let A;const M=this.getResolution();return void 0!==M&&(A=this.getZoomForResolution(M)),A}getZoomForResolution(A){let D,H,M=this.minZoom_||0;if(this.resolutions_){const it=(0,r.FT)(this.resolutions_,A,1);M=it,D=this.resolutions_[it],H=it==this.resolutions_.length-1?2:D/this.resolutions_[it+1]}else D=this.maxResolution_,H=this.zoomFactor_;return M+Math.log(D/A)/Math.log(H)}getResolutionForZoom(A){if(this.resolutions_){if(this.resolutions_.length<=1)return 0;const M=(0,E.qE)(Math.floor(A),0,this.resolutions_.length-2);return this.resolutions_[M]/Math.pow(this.resolutions_[M]/this.resolutions_[M+1],(0,E.qE)(A-M,0,1))}return this.maxResolution_/Math.pow(this.zoomFactor_,A-this.minZoom_)}fit(A,M){let D;if((0,F.v)(Array.isArray(A)||"function"==typeof A.getSimplifiedGeometry,"Invalid extent or geometry provided as `geometry`"),Array.isArray(A)){(0,F.v)(!(0,h.Im)(A),"Cannot fit empty extent provided as `geometry`");const H=(0,L.SD)(A,this.getProjection());D=(0,v.VY)(H)}else if("Circle"===A.getType()){const H=(0,L.SD)(A.getExtent(),this.getProjection());D=(0,v.VY)(H),D.rotate(this.getRotation(),(0,h.q1)(H))}else{const H=(0,L.Tf)();D=H?A.clone().transform(H,this.getProjection()):A}this.fitInternal(D,M)}rotatedExtentForGeometry(A){const M=this.getRotation(),D=Math.cos(M),H=Math.sin(-M),it=A.getFlatCoordinates(),lt=A.getStride();let xt=1/0,At=1/0,St=-1/0,Ut=-1/0;for(let Kt=0,ut=it.length;Kt<ut;Kt+=lt){const Tt=it[Kt]*D-it[Kt+1]*H,Ft=it[Kt]*H+it[Kt+1]*D;xt=Math.min(xt,Tt),At=Math.min(At,Ft),St=Math.max(St,Tt),Ut=Math.max(Ut,Ft)}return[xt,At,St,Ut]}fitInternal(A,M){let D=(M=M||{}).size;D||(D=this.getViewportSizeMinusPadding_());const H=void 0!==M.padding?M.padding:[0,0,0,0],it=void 0!==M.nearest&&M.nearest;let lt;lt=void 0!==M.minResolution?M.minResolution:void 0!==M.maxZoom?this.getResolutionForZoom(M.maxZoom):0;const xt=this.rotatedExtentForGeometry(A);let At=this.getResolutionForExtentInternal(xt,[D[0]-H[1]-H[3],D[1]-H[0]-H[2]]);At=isNaN(At)?lt:Math.max(At,lt),At=this.getConstrainedResolution(At,it?0:1);const St=this.getRotation(),Ut=Math.sin(St),Kt=Math.cos(St),ut=(0,h.q1)(xt);ut[0]+=(H[1]-H[3])/2*At,ut[1]+=(H[0]-H[2])/2*At;const ie=this.getConstrainedCenter([ut[0]*Kt-ut[1]*Ut,ut[1]*Kt+ut[0]*Ut],At),Zt=M.callback?M.callback:b.tV;void 0!==M.duration?this.animateInternal({resolution:At,center:ie,duration:M.duration,easing:M.easing},Zt):(this.targetResolution_=At,this.targetCenter_=ie,this.applyTargetState_(!1,!0),z(Zt,!0))}centerOn(A,M,D){this.centerOnInternal((0,L.Ad)(A,this.getProjection()),M,D)}centerOnInternal(A,M,D){this.setCenterInternal(T(A,M,D,this.getResolution(),this.getRotation()))}calculateCenterShift(A,M,D,H){let it;const lt=this.padding_;if(lt&&A){const xt=this.getViewportSizeMinusPadding_(-D),At=T(A,H,[xt[0]/2+lt[3],xt[1]/2+lt[0]],M,D);it=[A[0]-At[0],A[1]-At[1]]}return it}isDef(){return!!this.getCenterInternal()&&void 0!==this.getResolution()}adjustCenter(A){const M=(0,L.te)(this.targetCenter_,this.getProjection());this.setCenter([M[0]+A[0],M[1]+A[1]])}adjustCenterInternal(A){const M=this.targetCenter_;this.setCenterInternal([M[0]+A[0],M[1]+A[1]])}adjustResolution(A,M){M=M&&(0,L.Ad)(M,this.getProjection()),this.adjustResolutionInternal(A,M)}adjustResolutionInternal(A,M){const D=this.getAnimating()||this.getInteracting(),H=this.getViewportSize_(this.getRotation()),it=this.constraints_.resolution(this.targetResolution_*A,0,H,D);M&&(this.targetCenter_=this.calculateCenterZoom(it,M)),this.targetResolution_*=A,this.applyTargetState_()}adjustZoom(A,M){this.adjustResolution(Math.pow(this.zoomFactor_,-A),M)}adjustRotation(A,M){M&&(M=(0,L.Ad)(M,this.getProjection())),this.adjustRotationInternal(A,M)}adjustRotationInternal(A,M){const D=this.getAnimating()||this.getInteracting(),H=this.constraints_.rotation(this.targetRotation_+A,D);M&&(this.targetCenter_=this.calculateCenterRotate(H,M)),this.targetRotation_+=A,this.applyTargetState_()}setCenter(A){this.setCenterInternal(A&&(0,L.Ad)(A,this.getProjection()))}setCenterInternal(A){this.targetCenter_=A,this.applyTargetState_()}setHint(A,M){return this.hints_[A]+=M,this.changed(),this.hints_[A]}setResolution(A){this.targetResolution_=A,this.applyTargetState_()}setRotation(A){this.targetRotation_=A,this.applyTargetState_()}setZoom(A){this.setResolution(this.getResolutionForZoom(A))}applyTargetState_(A,M){const D=this.getAnimating()||this.getInteracting()||M,H=this.constraints_.rotation(this.targetRotation_,D),it=this.getViewportSize_(H),lt=this.constraints_.resolution(this.targetResolution_,0,it,D),xt=this.constraints_.center(this.targetCenter_,lt,it,D,this.calculateCenterShift(this.targetCenter_,lt,H,it));this.get($.A.ROTATION)!==H&&this.set($.A.ROTATION,H),this.get($.A.RESOLUTION)!==lt&&(this.set($.A.RESOLUTION,lt),this.set("zoom",this.getZoom(),!0)),(!xt||!this.get($.A.CENTER)||!(0,B.aI)(this.get($.A.CENTER),xt))&&this.set($.A.CENTER,xt),this.getAnimating()&&!A&&this.cancelAnimations(),this.cancelAnchor_=void 0}resolveConstraints(A,M,D){A=void 0!==A?A:200;const H=M||0,it=this.constraints_.rotation(this.targetRotation_),lt=this.getViewportSize_(it),xt=this.constraints_.resolution(this.targetResolution_,H,lt),At=this.constraints_.center(this.targetCenter_,xt,lt,!1,this.calculateCenterShift(this.targetCenter_,xt,it,lt));if(0===A&&!this.cancelAnchor_)return this.targetResolution_=xt,this.targetRotation_=it,this.targetCenter_=At,void this.applyTargetState_();D=D||(0===A?this.cancelAnchor_:void 0),this.cancelAnchor_=void 0,(this.getResolution()!==xt||this.getRotation()!==it||!this.getCenterInternal()||!(0,B.aI)(this.getCenterInternal(),At))&&(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:it,center:At,resolution:xt,duration:A,easing:y.vT,anchor:D}))}beginInteraction(){this.resolveConstraints(0),this.setHint(K.A.INTERACTING,1)}endInteraction(A,M,D){D=D&&(0,L.Ad)(D,this.getProjection()),this.endInteractionInternal(A,M,D)}endInteractionInternal(A,M,D){this.getInteracting()&&(this.setHint(K.A.INTERACTING,-1),this.resolveConstraints(A,M,D))}getConstrainedCenter(A,M){const D=this.getViewportSize_(this.getRotation());return this.constraints_.center(A,M||this.getResolution(),D)}getConstrainedZoom(A,M){const D=this.getResolutionForZoom(A);return this.getZoomForResolution(this.getConstrainedResolution(D,M))}getConstrainedResolution(A,M){M=M||0;const D=this.getViewportSize_(this.getRotation());return this.constraints_.resolution(A,M,D)}}},6631:(ce,gt,c)=>{"use strict";c.d(gt,{A:()=>V});const V={ANIMATING:0,INTERACTING:1}},7903:(ce,gt,c)=>{"use strict";c.d(gt,{A:()=>V});const V={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"}},2058:(ce,gt,c)=>{"use strict";function V(_,h,r){let u,o;r=r||K;let f=0,g=_.length,a=!1;for(;f<g;)u=f+(g-f>>1),o=+r(_[u],h),o<0?f=u+1:(g=u,a=!o);return a?f:~f}function K(_,h){return _>h?1:_<h?-1:0}function $(_,h){return _<h?1:_>h?-1:0}function Z(_,h,r){if(_[0]<=h)return 0;const u=_.length;if(h<=_[u-1])return u-1;if("function"==typeof r){for(let o=1;o<u;++o){const f=_[o];if(f===h)return o;if(f<h)return r(h,_[o-1],f)>0?o-1:o}return u-1}if(r>0){for(let o=1;o<u;++o)if(_[o]<h)return o-1;return u-1}if(r<0){for(let o=1;o<u;++o)if(_[o]<=h)return o;return u-1}for(let o=1;o<u;++o){if(_[o]==h)return o;if(_[o]<h)return _[o-1]-h<h-_[o]?o-1:o}return u-1}function L(_,h,r){for(;h<r;){const u=_[h];_[h]=_[r],_[r]=u,++h,--r}}function b(_,h){const r=Array.isArray(h)?h:[h],u=r.length;for(let o=0;o<u;o++)_[_.length]=r[o]}function F(_,h){const r=_.length;if(r!==h.length)return!1;for(let u=0;u<r;u++)if(_[u]!==h[u])return!1;return!0}function p(_,h,r){const u=h||K;return _.every(function(o,f){if(0===f)return!0;const g=u(_[f-1],o);return!(g>0||r&&0===g)})}c.d(gt,{El:()=>V,FT:()=>Z,V_:()=>K,WC:()=>p,X$:()=>b,aI:()=>F,gI:()=>L,rG:()=>$})},5940:(ce,gt,c)=>{"use strict";function V(K,$){if(!K)throw new Error($)}c.d(gt,{v:()=>V})},1962:(ce,gt,c)=>{"use strict";c.d(gt,{_j:()=>U,oJ:()=>u,sH:()=>v,$C:()=>I,cD:()=>y,S8:()=>w,eE:()=>C,dI:()=>z,fu:()=>a});const V={name:"rgb",min:[0,0,0],max:[255,255,255],channel:["red","green","blue"],alias:["RGB"]};var K={name:"xyz",min:[0,0,0],channel:["X","Y","Z"],alias:["XYZ","ciexyz","cie1931"],whitepoint:{2:{A:[109.85,100,35.585],C:[98.074,100,118.232],D50:[96.422,100,82.521],D55:[95.682,100,92.149],D65:[95.045592705167,100,108.9057750759878],D75:[94.972,100,122.638],F2:[99.187,100,67.395],F7:[95.044,100,108.755],F11:[100.966,100,64.37],E:[100,100,100]},10:{A:[111.144,100,35.2],C:[97.285,100,116.145],D50:[96.72,100,81.427],D55:[95.799,100,90.926],D65:[94.811,100,107.304],D75:[94.416,100,120.641],F2:[103.28,100,69.026],F7:[95.792,100,107.687],F11:[103.866,100,65.627],E:[100,100,100]}}};K.max=K.whitepoint[2].D65,K.rgb=function(P,j){var R,A,M,Y=P[0]/(j=j||K.whitepoint[2].E)[0],T=P[1]/j[1],O=P[2]/j[2];return A=-.96924363628087*Y+1.87596750150772*T+.041555057407175*O,M=.055630079696993*Y+-.20397695888897*T+1.056971514242878*O,R=(R=3.240969941904521*Y+-1.537383177570093*T+-.498610760293*O)>.0031308?1.055*Math.pow(R,1/2.4)-.055:R*=12.92,A=A>.0031308?1.055*Math.pow(A,1/2.4)-.055:A*=12.92,M=M>.0031308?1.055*Math.pow(M,1/2.4)-.055:M*=12.92,[255*(R=Math.min(Math.max(0,R),1)),255*(A=Math.min(Math.max(0,A),1)),255*(M=Math.min(Math.max(0,M),1))]},V.xyz=function(P,j){var Y=P[0]/255,T=P[1]/255,O=P[2]/255;return[(.41239079926595*(Y=Y>.04045?Math.pow((Y+.055)/1.055,2.4):Y/12.92)+.35758433938387*(T=T>.04045?Math.pow((T+.055)/1.055,2.4):T/12.92)+.18048078840183*(O=O>.04045?Math.pow((O+.055)/1.055,2.4):O/12.92))*(j=j||K.whitepoint[2].E)[0],(.21263900587151*Y+.71516867876775*T+.072192315360733*O)*j[1],(.019330818715591*Y+.11919477979462*T+.95053215224966*O)*j[2]]};const $=K,Z={name:"luv",min:[0,-134,-140],max:[100,224,122],channel:["lightness","u","v"],alias:["LUV","cieluv","cie1976"],xyz:function(P,j,Y){var T,O,R,H,lt,xt,At;return 0===(R=P[0])?[0,0,0]:(T=P[1]/(13*R)+4*(lt=$.whitepoint[Y=Y||2][j=j||"D65"][0])/(lt+15*(xt=$.whitepoint[Y][j][1])+3*(At=$.whitepoint[Y][j][2]))||0,O=P[2]/(13*R)+9*xt/(lt+15*xt+3*At)||0,[9*(H=R>8?xt*Math.pow((R+16)/116,3):xt*R*.0011070564598794539)*T/(4*O)||0,H,H*(12-3*T-20*O)/(4*O)||0])}};$.luv=function(P,j,Y){var T,O,R,D,H,it,lt,xt,At,St,Ut;St=4*(lt=$.whitepoint[Y=Y||2][j=j||"D65"][0])/(lt+15*(xt=$.whitepoint[Y][j][1])+3*(At=$.whitepoint[Y][j][2])),Ut=9*xt/(lt+15*xt+3*At),T=4*(D=P[0])/(D+15*(H=P[1])+3*(it=P[2]))||0,O=9*H/(D+15*H+3*it)||0;var Tt=H/xt;return[R=Tt<=.008856451679035631?903.2962962962961*Tt:116*Math.pow(Tt,1/3)-16,13*R*(T-St),13*R*(O-Ut)]};var L={name:"lchuv",channel:["lightness","chroma","hue"],alias:["LCHuv","cielchuv"],min:[0,0,0],max:[100,100,360],luv:function(P){var A,Y=P[1];return A=P[2]/360*2*Math.PI,[P[0],Y*Math.cos(A),Y*Math.sin(A)]},xyz:function(P){return Z.xyz(L.luv(P))}};const b=L;Z.lchuv=function(P){var j=P[0],Y=P[1],T=P[2],O=Math.sqrt(Y*Y+T*T),A=360*Math.atan2(T,Y)/2/Math.PI;return A<0&&(A+=360),[j,O,A]},$.lchuv=function(P){return Z.lchuv($.luv(P))};const B={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},F=function p(P){var j,O,Y=[],T=1;if("number"==typeof P)return{space:"rgb",values:[P>>>16,(65280&P)>>>8,255&P],alpha:1};if("number"==typeof P)return{space:"rgb",values:[P>>>16,(65280&P)>>>8,255&P],alpha:1};if(P=String(P).toLowerCase(),B[P])Y=B[P].slice(),O="rgb";else if("transparent"===P)T=0,O="rgb",Y=[0,0,0];else if("#"===P[0]){var R=P.slice(1),A=R.length;T=1,A<=4?(Y=[parseInt(R[0]+R[0],16),parseInt(R[1]+R[1],16),parseInt(R[2]+R[2],16)],4===A&&(T=parseInt(R[3]+R[3],16)/255)):(Y=[parseInt(R[0]+R[1],16),parseInt(R[2]+R[3],16),parseInt(R[4]+R[5],16)],8===A&&(T=parseInt(R[6]+R[7],16)/255)),Y[0]||(Y[0]=0),Y[1]||(Y[1]=0),Y[2]||(Y[2]=0),O="rgb"}else if(j=/^((?:rgba?|hs[lvb]a?|hwba?|cmyk?|xy[zy]|gray|lab|lchu?v?|[ly]uv|lms|oklch|oklab|color))\s*\(([^\)]*)\)/.exec(P)){var H="cmyk"===(O=j[1].replace(/a$/,""))?4:"gray"===O?1:3;Y=j[2].trim().split(/\s*[,\/]\s*|\s+/),"color"===O&&(O=Y.shift()),T=(Y=Y.map(function(it,lt){if("%"===it[it.length-1])return it=parseFloat(it)/100,3===lt?it:"rgb"===O?255*it:"h"===O[0]||"l"===O[0]&&!lt?100*it:"lab"===O?125*it:"lch"===O?lt<2?150*it:360*it:"o"!==O[0]||lt?"oklab"===O?.4*it:"oklch"===O?lt<2?.4*it:360*it:it:it;if("h"===O[lt]||2===lt&&"h"===O[O.length-1]){if(void 0!==E[it])return E[it];if(it.endsWith("deg"))return parseFloat(it);if(it.endsWith("turn"))return 360*parseFloat(it);if(it.endsWith("grad"))return 360*parseFloat(it)/400;if(it.endsWith("rad"))return 180*parseFloat(it)/Math.PI}return"none"===it?0:parseFloat(it)})).length>H?Y.pop():1}else/[0-9](?:\s|\/|,)/.test(P)&&(Y=P.match(/([0-9]+)/g).map(function(it){return parseFloat(it)}),O=P.match(/([a-z])/gi)?.join("")?.toLowerCase()||"rgb");return{space:O,values:Y,alpha:T}};var E={red:0,orange:60,yellow:120,green:180,blue:240,purple:300};const _={name:"hsl",min:[0,0,0],max:[360,100,100],channel:["hue","saturation","lightness"],alias:["HSL"],rgb:function(P){var O,R,A,M,D,j=P[0]/360,Y=P[1]/100,T=P[2]/100,H=0;if(0===Y)return[D=255*T,D,D];for(O=2*T-(R=T<.5?T*(1+Y):T+Y-T*Y),M=[0,0,0];H<3;)(A=j+1/3*-(H-1))<0?A++:A>1&&A--,M[H++]=255*(D=6*A<1?O+6*(R-O)*A:2*A<1?R:3*A<2?O+(R-O)*(2/3-A)*6:O);return M}};V.hsl=function(P){var M,H,j=P[0]/255,Y=P[1]/255,T=P[2]/255,O=Math.min(j,Y,T),R=Math.max(j,Y,T),A=R-O;return R===O?M=0:j===R?M=(Y-T)/A:Y===R?M=2+(T-j)/A:T===R&&(M=4+(j-Y)/A),(M=Math.min(60*M,360))<0&&(M+=360),H=(O+R)/2,[M,100*(R===O?0:H<=.5?A/(R+O):A/(2-R-O)),100*H]};var r=c(9973);function u(P){return"string"==typeof P?P:z(P)}const o=1024,f={};let g=0;function a(P){if(4===P.length)return P;const j=P.slice();return j[3]=1,j}function C(P){const j=$.lchuv(V.xyz(P));return j[3]=P[3],j}function y(P){const j=$.rgb(b.xyz(P));return j[3]=P[3],j}function v(P){if(f.hasOwnProperty(P))return f[P];if(g>=o){let Y=0;for(const T in f)3&Y++||(delete f[T],--g)}const j=function h(P){Array.isArray(P)&&P.raw&&(P=String.raw(...arguments)),P instanceof Number&&(P=+P);var j,O=F(P);if(!O.space)return[];const R="h"===O.space[0]?_.min:V.min,A="h"===O.space[0]?_.max:V.max;return(j=Array(3))[0]=Math.min(Math.max(O.values[0],R[0]),A[0]),j[1]=Math.min(Math.max(O.values[1],R[1]),A[1]),j[2]=Math.min(Math.max(O.values[2],R[2]),A[2]),"h"===O.space[0]&&(j=_.rgb(j)),j.push(Math.min(Math.max(O.alpha,0),1)),j}(P);if(4!==j.length)throw new Error('Failed to parse "'+P+'" as color');for(const Y of j)if(isNaN(Y))throw new Error('Failed to parse "'+P+'" as color');return w(j),f[P]=j,++g,j}function U(P){return Array.isArray(P)?P:v(P)}function w(P){return P[0]=(0,r.qE)(P[0]+.5|0,0,255),P[1]=(0,r.qE)(P[1]+.5|0,0,255),P[2]=(0,r.qE)(P[2]+.5|0,0,255),P[3]=(0,r.qE)(P[3],0,1),P}function z(P){let j=P[0];j!=(0|j)&&(j=j+.5|0);let Y=P[1];Y!=(0|Y)&&(Y=Y+.5|0);let T=P[2];return T!=(0|T)&&(T=T+.5|0),"rgba("+j+","+Y+","+T+","+(void 0===P[3]?1:Math.round(1e3*P[3])/1e3)+")"}function I(P){try{return v(P),!0}catch{return!1}}},2775:(ce,gt,c)=>{"use strict";c.d(gt,{F:()=>b});var V=c(2661),K=c(5551),$=c(4155),Z=c(1705),L=c(1962);function b(F){return F?Array.isArray(F)?(0,L.dI)(F):"object"==typeof F&&"src"in F?function B(F){if(!F.offset||!F.size)return Z.ue.getPattern(F.src,"anonymous",F.color);const E=F.src+":"+F.offset,p=Z.ue.getPattern(E,void 0,F.color);if(p)return p;const _=Z.ue.get(F.src,"anonymous",null);if(_.getImageState()!==V.A.LOADED)return null;const h=(0,K.Y)(F.size[0],F.size[1]);return h.drawImage(_.getImage(1),F.offset[0],F.offset[1],F.size[0],F.size[1],0,0,F.size[0],F.size[1]),(0,$.J)(h.canvas,E,void 0,V.A.LOADED,F.color,!0),Z.ue.getPattern(E,void 0,F.color)}(F):F:null}},5278:(ce,gt,c)=>{"use strict";c.d(gt,{R8:()=>L});const V={info:1,warn:2,error:3,none:4};let K=V.info;function L(...B){K>V.warn||console.warn(...B)}},7412:(ce,gt,c)=>{"use strict";c.d(gt,{A:()=>B});var V=c(9568),K=c(5281),$=c(1766),Z=c(2614),L=c(5551);const B=class b extends V.A{constructor(E){super();const p=E.element;p&&!E.target&&!p.style.pointerEvents&&(p.style.pointerEvents="auto"),this.element=p||null,this.target_=null,this.map_=null,this.listenerKeys=[],E.render&&(this.render=E.render),E.target&&this.setTarget(E.target)}disposeInternal(){(0,L.bf)(this.element),super.disposeInternal()}getMap(){return this.map_}setMap(E){this.map_&&(0,L.bf)(this.element);for(let p=0,_=this.listenerKeys.length;p<_;++p)(0,Z.JH)(this.listenerKeys[p]);this.listenerKeys.length=0,this.map_=E,E&&((this.target_?this.target_:E.getOverlayContainerStopEvent()).appendChild(this.element),this.render!==$.tV&&this.listenerKeys.push((0,Z.KT)(E,K.A.POSTRENDER,this.render,this)),E.render())}render(E){}setTarget(E){this.target_="string"==typeof E?document.getElementById(E):E}}},5085:(ce,gt,c)=>{"use strict";c.d(gt,{KN:()=>g,Li:()=>a,U$:()=>C,WQ:()=>Z,aI:()=>p,aP:()=>F,e$:()=>_,hs:()=>h});var V=c(8507),K=c(9973),$=c(5454);function Z(y,v){return y[0]+=+v[0],y[1]+=+v[1],y}function F(y,v,U){const w=(0,K.xP)(v+180,360)-180,z=Math.abs(3600*w),I=U||0;let P=Math.floor(z/3600),j=Math.floor((z-3600*P)/60),Y=(0,K.Mg)(z-3600*P-60*j,I);Y>=60&&(Y=0,j+=1),j>=60&&(j=0,P+=1);let T=P+"\xb0";return(0!==j||0!==Y)&&(T+=" "+(0,$.H)(j,2)+"\u2032"),0!==Y&&(T+=" "+(0,$.H)(Y,2,I)+"\u2033"),0!==w&&(T+=" "+y.charAt(w<0?1:0)),T}function p(y,v){let U=!0;for(let w=y.length-1;w>=0;--w)if(y[w]!=v[w]){U=!1;break}return U}function _(y,v){const U=Math.cos(v),w=Math.sin(v),I=y[1]*U+y[0]*w;return y[0]=y[0]*U-y[1]*w,y[1]=I,y}function h(y,v){return y[0]*=v,y[1]*=v,y}function g(y,v){return function E(y,v,U){return y?v.replace("{x}",y[0].toFixed(U)).replace("{y}",y[1].toFixed(U)):""}(y,"{x}, {y}",v)}function a(y,v){if(v.canWrapX()){const U=(0,V.RG)(v.getExtent()),w=C(y,v,U);w&&(y[0]-=w*U)}return y}function C(y,v,U){const w=v.getExtent();let z=0;return v.canWrapX()&&(y[0]<w[0]||y[0]>w[2])&&(U=U||(0,V.RG)(w),z=Math.floor((y[0]-w[0])/U)),z}},1776:(ce,gt,c)=>{"use strict";c.d(gt,{$N:()=>L,K5:()=>E,Q5:()=>K,Si:()=>V,Vv:()=>Z,XI:()=>$,nT:()=>b});const V="ol-hidden",K="ol-selectable",$="ol-unselectable",Z="ol-unsupported",L="ol-control",b="ol-collapsed",B=new RegExp(["^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)","(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?","(?:small|large)|medium|smaller|larger|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))","(?:\\s*\\/\\s*(normal|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])?))","?\\s*([-,\\\"\\'\\sa-z]+?)\\s*$"].join(""),"i"),F=["style","variant","weight","size","lineHeight","family"],E=function(p){const _=p.match(B);if(!_)return null;const h={lineHeight:"normal",size:"1.2em",style:"normal",weight:"normal",variant:"normal"};for(let r=0,u=F.length;r<u;++r){const o=_[r+1];void 0!==o&&(h[F[r]]=o)}return h.families=h.family.split(/,\s?/),h}},5551:(ce,gt,c)=>{"use strict";c.d(gt,{DK:()=>B,Gq:()=>b,WM:()=>_,Y:()=>K,Yg:()=>L,bf:()=>E,fo:()=>F,gS:()=>p,lr:()=>Z});var V=c(2531);function K(h,r,u,o){let f;return f=u&&u.length?u.shift():V.Wl?new OffscreenCanvas(h||300,r||300):document.createElement("canvas"),h&&(f.width=h),r&&(f.height=r),f.getContext("2d",o)}let $;function Z(){return $||($=K(1,1)),$}function L(h){const r=h.canvas;r.width=1,r.height=1,h.clearRect(0,0,1,1)}function b(h){let r=h.offsetWidth;const u=getComputedStyle(h);return r+=parseInt(u.marginLeft,10)+parseInt(u.marginRight,10),r}function B(h){let r=h.offsetHeight;const u=getComputedStyle(h);return r+=parseInt(u.marginTop,10)+parseInt(u.marginBottom,10),r}function F(h,r){const u=r.parentNode;u&&u.replaceChild(h,r)}function E(h){return h&&h.parentNode?h.parentNode.removeChild(h):null}function p(h){for(;h.lastChild;)h.removeChild(h.lastChild)}function _(h,r){const u=h.childNodes;for(let o=0;;++o){const f=u[o],g=r[o];if(!f&&!g)break;if(f!==g){if(!f){h.appendChild(g);continue}if(!g){h.removeChild(f),--o;continue}h.insertBefore(g,f)}}}},6378:(ce,gt,c)=>{"use strict";function V(b){return Math.pow(b,3)}function K(b){return 1-V(1-b)}function $(b){return 3*b*b-2*b*b*b}function Z(b){return b}c.d(gt,{T9:()=>$,a6:()=>V,sn:()=>Z,vT:()=>K})},2614:(ce,gt,c)=>{"use strict";c.d(gt,{JH:()=>Z,Jz:()=>$,KT:()=>K});var V=c(9330);function K(L,b,B,F,E){if(F&&F!==L&&(B=B.bind(F)),E){const _=B;B=function(){L.removeEventListener(b,B),_.apply(this,arguments)}}const p={target:L,type:b,listener:B};return L.addEventListener(b,B),p}function $(L,b,B,F){return K(L,b,B,F,!0)}function Z(L){L&&L.target&&(L.target.removeEventListener(L.type,L.listener),(0,V.I)(L))}},3805:(ce,gt,c)=>{"use strict";c.d(gt,{Ay:()=>Z});const Z=class V{constructor(b){this.type=b,this.target=null}preventDefault(){this.defaultPrevented=!0}stopPropagation(){this.propagationStopped=!0}}},6621:(ce,gt,c)=>{"use strict";c.d(gt,{A:()=>V});const V={CHANGE:"change",ERROR:"error",BLUR:"blur",CLEAR:"clear",CONTEXTMENU:"contextmenu",CLICK:"click",DBLCLICK:"dblclick",DRAGENTER:"dragenter",DRAGOVER:"dragover",DROP:"drop",FOCUS:"focus",KEYDOWN:"keydown",KEYPRESS:"keypress",LOAD:"load",RESIZE:"resize",TOUCHMOVE:"touchmove",WHEEL:"wheel"}},1884:(ce,gt,c)=>{"use strict";c.d(gt,{A:()=>b});var V=c(9153),K=c(3805),$=c(1766),Z=c(9330);const b=class L extends V.A{constructor(F){super(),this.eventTarget_=F,this.pendingRemovals_=null,this.dispatching_=null,this.listeners_=null}addEventListener(F,E){if(!F||!E)return;const p=this.listeners_||(this.listeners_={}),_=p[F]||(p[F]=[]);_.includes(E)||_.push(E)}dispatchEvent(F){const E="string"==typeof F,p=E?F:F.type,_=this.listeners_&&this.listeners_[p];if(!_)return;const h=E?new K.Ay(F):F;h.target||(h.target=this.eventTarget_||this);const r=this.dispatching_||(this.dispatching_={}),u=this.pendingRemovals_||(this.pendingRemovals_={});let o;p in r||(r[p]=0,u[p]=0),++r[p];for(let f=0,g=_.length;f<g;++f)if(o="handleEvent"in _[f]?_[f].handleEvent(h):_[f].call(this,h),!1===o||h.propagationStopped){o=!1;break}if(0==--r[p]){let f=u[p];for(delete u[p];f--;)this.removeEventListener(p,$.tV);delete r[p]}return o}disposeInternal(){this.listeners_&&(0,Z.I)(this.listeners_)}getListeners(F){return this.listeners_&&this.listeners_[F]||void 0}hasListener(F){return!!this.listeners_&&(F?F in this.listeners_:Object.keys(this.listeners_).length>0)}removeEventListener(F,E){if(!this.listeners_)return;const p=this.listeners_[F];if(!p)return;const _=p.indexOf(E);-1!==_&&(this.pendingRemovals_&&F in this.pendingRemovals_?(p[_]=$.tV,++this.pendingRemovals_[F]):(p.splice(_,1),0===p.length&&delete this.listeners_[F]))}}},9625:(ce,gt,c)=>{"use strict";c.d(gt,{DG:()=>C,Fq:()=>E,SR:()=>y,T8:()=>L,Ye:()=>Kt,ZD:()=>w,_D:()=>a,cT:()=>B,go:()=>u,ho:()=>f,mE:()=>F,qA:()=>p,qg:()=>U,wl:()=>b});var V=c(2058),K=c(1962);let $=0;const Z=0,L=1<<$++,b=1<<$++,B=1<<$++,F=1<<$++,E=1<<$++,p=1<<$++,_=Math.pow(2,6)-1,h={[L]:"boolean",[b]:"number",[B]:"string",[F]:"color",[E]:"number[]",[p]:"size"},r=Object.keys(h).map(Number).sort(V.V_);function u(ut){const Tt=[];for(const Ft of r)o(ut,Ft)&&Tt.push(h[Ft]);return 0===Tt.length?"untyped":Tt.length<3?Tt.join(" or "):Tt.slice(0,-1).join(", ")+", or "+Tt[Tt.length-1]}function o(ut,Tt){return(ut&Tt)===Tt}function f(ut,Tt){return!!(ut&Tt)}function g(ut,Tt){return ut===Tt}class a{constructor(Tt,Ft){this.type=Tt,this.value=Ft}}class C{constructor(Tt,Ft,...ie){this.type=Tt,this.operator=Ft,this.args=ie}}function y(){return{variables:new Set,properties:new Set,featureId:!1,geometryType:!1,style:{}}}function U(ut,Tt,Ft){switch(typeof ut){case"boolean":return new a(L,ut);case"number":return new a(Ft===p?p:b,ut);case"string":{let Zt=B;return(0,K.$C)(ut)&&(Zt|=F),g(Zt&Ft,Z)||(Zt&=Ft),new a(Zt,ut)}}if(!Array.isArray(ut))throw new Error("Expression must be an array or a primitive value");if(0===ut.length)throw new Error("Empty expression");if("string"==typeof ut[0])return function Ut(ut,Tt,Ft){const ie=ut[0],Zt=z[ie];if(!Zt)throw new Error(`Unknown operator: ${ie}`);return Zt(ut,Tt,Ft)}(ut,Tt,Ft);for(const Zt of ut)if("number"!=typeof Zt)throw new Error("Expected an array of numbers");let ie=E;return 2===ut.length?ie|=p:(3===ut.length||4===ut.length)&&(ie|=F),Ft&&(ie&=Ft),new a(ie,ut)}const w={Get:"get",Var:"var",Concat:"concat",GeometryType:"geometry-type",Any:"any",All:"all",Not:"!",Resolution:"resolution",Zoom:"zoom",Time:"time",Equal:"==",NotEqual:"!=",GreaterThan:">",GreaterThanOrEqualTo:">=",LessThan:"<",LessThanOrEqualTo:"<=",Multiply:"*",Divide:"/",Add:"+",Subtract:"-",Clamp:"clamp",Mod:"%",Pow:"^",Abs:"abs",Floor:"floor",Ceil:"ceil",Round:"round",Sin:"sin",Cos:"cos",Atan:"atan",Sqrt:"sqrt",Match:"match",Between:"between",Interpolate:"interpolate",Coalesce:"coalesce",Case:"case",In:"in",Number:"number",String:"string",Array:"array",Color:"color",Id:"id",Band:"band",Palette:"palette",ToString:"to-string"},z={[w.Get]:St(([ut,Tt])=>void 0!==Tt?function v(ut){switch(ut){case"string":return B;case"color":return F;case"number":return b;case"boolean":return L;case"number[]":return E;default:throw new Error(`Unrecognized type hint: ${ut}`)}}(Tt.value):_,O(1,2),function I(ut,Tt){const Ft=U(ut[1],Tt);if(!(Ft instanceof a))throw new Error("Expected a literal argument for get operation");if("string"!=typeof Ft.value)throw new Error("Expected a string argument for get operation");return Tt.properties.add(Ft.value),3===ut.length?[Ft,U(ut[2],Tt)]:[Ft]}),[w.Var]:St(([ut])=>ut.type,O(1,1),function P(ut,Tt,Ft,ie){const Zt=ut[1];if("string"!=typeof Zt)throw new Error("Expected a string argument for var operation");if(Tt.variables.add(Zt),!("variables"in Tt.style)||void 0===Tt.style.variables[Zt])return[new a(_,Zt)];const ne=U(Tt.style.variables[Zt],Tt);if(ne.value=Zt,ie&&!f(ie,ne.type))throw new Error(`The variable ${Zt} has type ${u(ne.type)} but the following type was expected: ${u(ie)}`);return[ne]}),[w.Id]:St(b|B,T,function j(ut,Tt){Tt.featureId=!0}),[w.Concat]:St(B,O(2,1/0),R(_)),[w.GeometryType]:St(B,T,function Y(ut,Tt){Tt.geometryType=!0}),[w.Resolution]:St(b,T),[w.Zoom]:St(b,T),[w.Time]:St(b,T),[w.Any]:St(L,O(2,1/0),R(L)),[w.All]:St(L,O(2,1/0),R(L)),[w.Not]:St(L,O(1,1),R(L)),[w.Equal]:St(L,O(2,2),R(_),A),[w.NotEqual]:St(L,O(2,2),R(_),A),[w.GreaterThan]:St(L,O(2,2),R(_),A),[w.GreaterThanOrEqualTo]:St(L,O(2,2),R(_),A),[w.LessThan]:St(L,O(2,2),R(_),A),[w.LessThanOrEqualTo]:St(L,O(2,2),R(_),A),[w.Multiply]:St(ut=>{let Tt=b|F;for(let Ft=0;Ft<ut.length;Ft++)Tt&=ut[Ft].type;return Tt},O(2,1/0),R(b|F),A),[w.Coalesce]:St(ut=>{let Tt=_;for(let Ft=1;Ft<ut.length;Ft+=2)Tt&=ut[Ft].type;return Tt&=ut[ut.length-1].type,Tt},O(2,1/0),R(_),A),[w.Divide]:St(b,O(2,2),R(b)),[w.Add]:St(b,O(2,1/0),R(b)),[w.Subtract]:St(b,O(2,2),R(b)),[w.Clamp]:St(b,O(3,3),R(b)),[w.Mod]:St(b,O(2,2),R(b)),[w.Pow]:St(b,O(2,2),R(b)),[w.Abs]:St(b,O(1,1),R(b)),[w.Floor]:St(b,O(1,1),R(b)),[w.Ceil]:St(b,O(1,1),R(b)),[w.Round]:St(b,O(1,1),R(b)),[w.Sin]:St(b,O(1,1),R(b)),[w.Cos]:St(b,O(1,1),R(b)),[w.Atan]:St(b,O(1,2),R(b)),[w.Sqrt]:St(b,O(1,1),R(b)),[w.Match]:St(ut=>{let Tt=_;for(let Ft=2;Ft<ut.length;Ft+=2)Tt&=ut[Ft].type;return Tt&=ut[ut.length-1].type,Tt},O(4,1/0),D,function H(ut,Tt,Ft,ie){const Zt=ut.length-1;let ne=U(ut[1],Tt).type;const fe=U(ut[ut.length-1],Tt);let rt=void 0!==ie?ie&fe.type:fe.type;const jt=new Array(Zt-2);for(let ve=0;ve<Zt-2;ve+=2){const Me=U(ut[ve+2],Tt),Ye=U(ut[ve+3],Tt);ne&=Me.type,rt&=Ye.type,jt[ve]=Me,jt[ve+1]=Ye}const Yt=B|b|L;if(!f(Yt,ne))throw new Error(`Expected an input of type ${u(Yt)} for the interpolate operation, got ${u(ne)} instead`);if(ne&=Yt,g(rt,Z))throw new Error("Could not find a common output type for the following match operation: "+JSON.stringify(ut));for(let ve=0;ve<Zt-2;ve+=2){const Me=U(ut[ve+2],Tt,ne),Ye=U(ut[ve+3],Tt,rt);jt[ve]=Me,jt[ve+1]=Ye}return[U(ut[1],Tt,ne),...jt,U(ut[ut.length-1],Tt,rt)]}),[w.Between]:St(L,O(3,3),R(b)),[w.Interpolate]:St(ut=>{let Tt=F|b;for(let Ft=3;Ft<ut.length;Ft+=2)Tt&=ut[Ft].type;return Tt},O(6,1/0),D,function it(ut,Tt,Ft,ie){const Zt=ut[1];let ge;switch(Zt[0]){case"linear":ge=1;break;case"exponential":if(ge=Zt[1],"number"!=typeof ge)throw new Error(`Expected a number base for exponential interpolation, got ${JSON.stringify(ge)} instead`);break;default:ge=null}if(!ge)throw new Error(`Invalid interpolation type: ${JSON.stringify(Zt)}`);ge=U(ge,Tt);let ne=U(ut[2],Tt);if(!f(b,ne.type))throw new Error(`Expected an input of type number for the interpolate operation, got ${u(ne.type)} instead`);ne=U(ut[2],Tt,b);const fe=new Array(ut.length-3);for(let rt=0;rt<fe.length;rt+=2){let jt=U(ut[rt+3],Tt);if(!f(b,jt.type))throw new Error(`Expected all stop input values in the interpolate operation to be of type number, got ${u(jt.type)} at position ${rt+2} instead`);let Yt=U(ut[rt+4],Tt);if(!f(b|F,Yt.type))throw new Error(`Expected all stop output values in the interpolate operation to be a number or color, got ${u(Yt.type)} at position ${rt+3} instead`);jt=U(ut[rt+3],Tt,b),Yt=U(ut[rt+4],Tt,b|F),fe[rt]=jt,fe[rt+1]=Yt}return[ge,ne,...fe]}),[w.Case]:St(ut=>{let Tt=_;for(let Ft=1;Ft<ut.length;Ft+=2)Tt&=ut[Ft].type;return Tt&=ut[ut.length-1].type,Tt},O(3,1/0),function M(ut,Tt){const ie=ut.length-1;if(ie%2==0)throw new Error(`An odd amount of arguments was expected for operation ${ut[0]}, got ${JSON.stringify(ie)} instead`)},function lt(ut,Tt,Ft,ie){const Zt=U(ut[ut.length-1],Tt,ie);let ge=void 0!==ie?ie&Zt.type:Zt.type;const ne=new Array(ut.length-1);for(let fe=0;fe<ne.length-1;fe+=2){const rt=U(ut[fe+1],Tt),jt=U(ut[fe+2],Tt,ie);if(!f(L,rt.type))throw new Error(`Expected all conditions in the case operation to be of type boolean, got ${u(rt.type)} at position ${fe} instead`);ge&=jt.type,ne[fe]=rt,ne[fe+1]=jt}if(g(ge,Z))throw new Error("Could not find a common output type for the following case operation: "+JSON.stringify(ut));for(let fe=0;fe<ne.length-1;fe+=2)ne[fe+1]=U(ut[fe+2],Tt,ge);return ne[ne.length-1]=U(ut[ut.length-1],Tt,ge),ne}),[w.In]:St(L,O(2,2),function xt(ut,Tt){let Ft=ut[2];if(!Array.isArray(Ft))throw new Error('The "in" operator was provided a literal value which was not an array as second argument.');if("string"==typeof Ft[0]){if("literal"!==Ft[0])throw new Error('For the "in" operator, a string array should be wrapped in a "literal" operator to disambiguate from expressions.');if(!Array.isArray(Ft[1]))throw new Error('The "in" operator was provided a literal value which was not an array as second argument.');Ft=Ft[1]}let ie=B|b;const Zt=new Array(Ft.length);for(let ne=0;ne<Zt.length;ne++){const fe=U(Ft[ne],Tt);ie&=fe.type,Zt[ne]=fe}if(g(ie,Z))throw new Error("Could not find a common type for the following in operation: "+JSON.stringify(ut));return[U(ut[1],Tt,ie),...Zt]}),[w.Number]:St(b,O(1,1/0),R(_)),[w.String]:St(B,O(1,1/0),R(_)),[w.Array]:St(ut=>2===ut.length?E|p:3===ut.length||4===ut.length?E|F:E,O(1,1/0),R(b)),[w.Color]:St(F,O(1,4),R(b)),[w.Band]:St(b,O(1,3),R(b)),[w.Palette]:St(F,O(2,2),function At(ut,Tt){const Ft=U(ut[1],Tt,b);if(Ft.type!==b)throw new Error(`The first argument of palette must be an number, got ${u(Ft.type)} instead`);const ie=ut[2];if(!Array.isArray(ie))throw new Error("The second argument of palette must be an array");const Zt=new Array(ie.length);for(let ge=0;ge<Zt.length;ge++){const ne=U(ie[ge],Tt,F);if(!(ne instanceof a))throw new Error(`The palette color at index ${ge} must be a literal value`);if(!f(ne.type,F))throw new Error(`The palette color at index ${ge} should be of type color, got ${u(ne.type)} instead`);Zt[ge]=ne}return[Ft,...Zt]}),[w.ToString]:St(B,O(1,1),R(L|b|B|F))};function T(ut,Tt){if(1!==ut.length)throw new Error(`Expected no arguments for ${ut[0]} operation`);return[]}function O(ut,Tt){return function(Ft,ie){const Zt=Ft[0],ge=Ft.length-1;if(ut===Tt){if(ge!==ut)throw new Error(`Expected ${ut} argument${1===ut?"":"s"} for ${Zt}, got ${ge}`)}else if(ge<ut||ge>Tt)throw new Error(`Expected ${Tt===1/0?`${ut} or more`:`${ut} to ${Tt}`} arguments for ${Zt}, got ${ge}`)}}function R(ut){return function(Tt,Ft){const ie=Tt[0],Zt=Tt.length-1,ge=new Array(Zt);for(let ne=0;ne<Zt;++ne){const fe=U(Tt[ne+1],Ft);if(!f(ut,fe.type)){const rt=u(ut),jt=u(fe.type);throw new Error(`Unexpected type for argument ${ne} of ${ie} operation, got ${rt} but expected ${jt}`)}fe.type&=ut,ge[ne]=fe}return ge}}function A(ut,Tt,Ft){const ie=ut[0],Zt=ut.length-1;let ge=_;for(let fe=0;fe<Ft.length;++fe)ge&=Ft[fe].type;if(ge===Z)throw new Error(`No common type could be found for arguments of ${ie} operation`);const ne=new Array(Zt);for(let fe=0;fe<Zt;++fe)ne[fe]=U(ut[fe+1],Tt,ge);return ne}function D(ut,Tt){const ie=ut.length-1;if(ie%2==1)throw new Error(`An even amount of arguments was expected for operation ${ut[0]}, got ${JSON.stringify(ie)} instead`)}function St(ut,...Tt){return function(Ft,ie,Zt){const ge=Ft[0];let ne=[];for(let rt=0;rt<Tt.length;rt++)ne=Tt[rt](Ft,ie,ne,Zt)||ne;let fe="function"==typeof ut?ut(ne):ut;if(void 0!==Zt){if(!f(fe,Zt))throw new Error(`The following expression was expected to return ${u(Zt)}, but returns ${u(fe)} instead: ${JSON.stringify(Ft)}`);fe&=Zt}if(fe===Z)throw new Error(`No matching type was found for the following expression: ${JSON.stringify(Ft)}`);return new C(fe,ge,...ne)}}function Kt(ut){if(!ut)return"";const Tt=ut.getType();switch(Tt){case"Point":case"LineString":case"Polygon":return Tt;case"MultiPoint":case"MultiLineString":case"MultiPolygon":return Tt.substring(5);case"Circle":return"Polygon";case"GeometryCollection":return Kt(ut.getGeometries()[0]);default:return""}}},8507:(ce,gt,c)=>{"use strict";c.d(gt,{$C:()=>v,$u:()=>Ft,Af:()=>ie,Bg:()=>M,HY:()=>ut,Im:()=>Tt,Ld:()=>b,Li:()=>ne,Mx:()=>Zt,N:()=>h,NW:()=>ge,Oq:()=>H,Py:()=>St,QJ:()=>fe,R:()=>Y,R8:()=>w,RG:()=>Kt,Rj:()=>E,S5:()=>_,Tr:()=>K,UG:()=>j,Vy:()=>f,WU:()=>Ut,X$:()=>y,Ym:()=>B,Yw:()=>D,_N:()=>lt,aI:()=>a,aZ:()=>r,bE:()=>C,dP:()=>u,k_:()=>T,ms:()=>F,o8:()=>L,q1:()=>O,qF:()=>R,r:()=>Z,sB:()=>P,vz:()=>p});var V=c(1524);function K(rt){const jt=[1/0,1/0,-1/0,-1/0];for(let Yt=0,ve=rt.length;Yt<ve;++Yt)v(jt,rt[Yt]);return jt}function Z(rt,jt,Yt){return Yt?(Yt[0]=rt[0]-jt,Yt[1]=rt[1]-jt,Yt[2]=rt[2]+jt,Yt[3]=rt[3]+jt,Yt):[rt[0]-jt,rt[1]-jt,rt[2]+jt,rt[3]+jt]}function L(rt,jt){return jt?(jt[0]=rt[0],jt[1]=rt[1],jt[2]=rt[2],jt[3]=rt[3],jt):rt.slice()}function b(rt,jt,Yt){let ve,Me;return ve=jt<rt[0]?rt[0]-jt:rt[2]<jt?jt-rt[2]:0,Me=Yt<rt[1]?rt[1]-Yt:rt[3]<Yt?Yt-rt[3]:0,ve*ve+Me*Me}function B(rt,jt){return E(rt,jt[0],jt[1])}function F(rt,jt){return rt[0]<=jt[0]&&jt[2]<=rt[2]&&rt[1]<=jt[1]&&jt[3]<=rt[3]}function E(rt,jt,Yt){return rt[0]<=jt&&jt<=rt[2]&&rt[1]<=Yt&&Yt<=rt[3]}function p(rt,jt){const Ze=jt[0],pi=jt[1];let ei=V.A.UNKNOWN;return Ze<rt[0]?ei|=V.A.LEFT:Ze>rt[2]&&(ei|=V.A.RIGHT),pi<rt[1]?ei|=V.A.BELOW:pi>rt[3]&&(ei|=V.A.ABOVE),ei===V.A.UNKNOWN&&(ei=V.A.INTERSECTING),ei}function _(){return[1/0,1/0,-1/0,-1/0]}function h(rt,jt,Yt,ve,Me){return Me?(Me[0]=rt,Me[1]=jt,Me[2]=Yt,Me[3]=ve,Me):[rt,jt,Yt,ve]}function r(rt){return h(1/0,1/0,-1/0,-1/0,rt)}function u(rt,jt){const Yt=rt[0],ve=rt[1];return h(Yt,ve,Yt,ve,jt)}function f(rt,jt,Yt,ve,Me){return w(r(Me),rt,jt,Yt,ve)}function a(rt,jt){return rt[0]==jt[0]&&rt[2]==jt[2]&&rt[1]==jt[1]&&rt[3]==jt[3]}function C(rt,jt,Yt){return Math.abs(rt[0]-jt[0])<Yt&&Math.abs(rt[2]-jt[2])<Yt&&Math.abs(rt[1]-jt[1])<Yt&&Math.abs(rt[3]-jt[3])<Yt}function y(rt,jt){return jt[0]<rt[0]&&(rt[0]=jt[0]),jt[2]>rt[2]&&(rt[2]=jt[2]),jt[1]<rt[1]&&(rt[1]=jt[1]),jt[3]>rt[3]&&(rt[3]=jt[3]),rt}function v(rt,jt){jt[0]<rt[0]&&(rt[0]=jt[0]),jt[0]>rt[2]&&(rt[2]=jt[0]),jt[1]<rt[1]&&(rt[1]=jt[1]),jt[1]>rt[3]&&(rt[3]=jt[1])}function w(rt,jt,Yt,ve,Me){for(;Yt<ve;Yt+=Me)I(rt,jt[Yt],jt[Yt+1]);return rt}function I(rt,jt,Yt){rt[0]=Math.min(rt[0],jt),rt[1]=Math.min(rt[1],Yt),rt[2]=Math.max(rt[2],jt),rt[3]=Math.max(rt[3],Yt)}function P(rt,jt){let Yt;return Yt=jt(Y(rt)),!!(Yt||(Yt=jt(T(rt)),Yt)||(Yt=jt(Ut(rt)),Yt)||(Yt=jt(St(rt)),Yt))&&Yt}function j(rt){let jt=0;return Tt(rt)||(jt=Kt(rt)*H(rt)),jt}function Y(rt){return[rt[0],rt[1]]}function T(rt){return[rt[2],rt[1]]}function O(rt){return[(rt[0]+rt[2])/2,(rt[1]+rt[3])/2]}function R(rt,jt){let Yt;if("bottom-left"===jt)Yt=Y(rt);else if("bottom-right"===jt)Yt=T(rt);else if("top-left"===jt)Yt=St(rt);else{if("top-right"!==jt)throw new Error("Invalid corner");Yt=Ut(rt)}return Yt}function M(rt,jt,Yt,ve,Me){const[Ye,Ze,pi,ei,ai,Ui,Ue,Oi]=D(rt,jt,Yt,ve);return h(Math.min(Ye,pi,ai,Ue),Math.min(Ze,ei,Ui,Oi),Math.max(Ye,pi,ai,Ue),Math.max(Ze,ei,Ui,Oi),Me)}function D(rt,jt,Yt,ve){const Me=jt*ve[0]/2,Ye=jt*ve[1]/2,Ze=Math.cos(Yt),pi=Math.sin(Yt),ei=Me*Ze,ai=Me*pi,Ui=Ye*Ze,Ue=Ye*pi,Oi=rt[0],Ai=rt[1];return[Oi-ei+Ue,Ai-ai-Ui,Oi-ei-Ue,Ai-ai+Ui,Oi+ei-Ue,Ai+ai+Ui,Oi+ei+Ue,Ai+ai-Ui,Oi-ei+Ue,Ai-ai-Ui]}function H(rt){return rt[3]-rt[1]}function lt(rt,jt,Yt){const ve=Yt||[1/0,1/0,-1/0,-1/0];return ut(rt,jt)?(ve[0]=rt[0]>jt[0]?rt[0]:jt[0],ve[1]=rt[1]>jt[1]?rt[1]:jt[1],ve[2]=rt[2]<jt[2]?rt[2]:jt[2],ve[3]=rt[3]<jt[3]?rt[3]:jt[3]):r(ve),ve}function St(rt){return[rt[0],rt[3]]}function Ut(rt){return[rt[2],rt[3]]}function Kt(rt){return rt[2]-rt[0]}function ut(rt,jt){return rt[0]<=jt[2]&&rt[2]>=jt[0]&&rt[1]<=jt[3]&&rt[3]>=jt[1]}function Tt(rt){return rt[2]<rt[0]||rt[3]<rt[1]}function Ft(rt,jt){return jt?(jt[0]=rt[0],jt[1]=rt[1],jt[2]=rt[2],jt[3]=rt[3],jt):rt}function ie(rt,jt){const Yt=(rt[2]-rt[0])/2*(jt-1),ve=(rt[3]-rt[1])/2*(jt-1);rt[0]-=Yt,rt[2]+=Yt,rt[1]-=ve,rt[3]+=ve}function Zt(rt,jt,Yt){let ve=!1;const Me=p(rt,jt),Ye=p(rt,Yt);if(Me===V.A.INTERSECTING||Ye===V.A.INTERSECTING)ve=!0;else{const Ze=rt[0],pi=rt[1],ei=rt[2],ai=rt[3],Oi=Yt[0],Ai=Yt[1],an=(Ai-jt[1])/(Oi-jt[0]);let Yi,Ct;Ye&V.A.ABOVE&&!(Me&V.A.ABOVE)&&(Yi=Oi-(Ai-ai)/an,ve=Yi>=Ze&&Yi<=ei),!ve&&Ye&V.A.RIGHT&&!(Me&V.A.RIGHT)&&(Ct=Ai-(Oi-ei)*an,ve=Ct>=pi&&Ct<=ai),!ve&&Ye&V.A.BELOW&&!(Me&V.A.BELOW)&&(Yi=Oi-(Ai-pi)/an,ve=Yi>=Ze&&Yi<=ei),!ve&&Ye&V.A.LEFT&&!(Me&V.A.LEFT)&&(Ct=Ai-(Oi-Ze)*an,ve=Ct>=pi&&Ct<=ai)}return ve}function ge(rt,jt,Yt,ve){if(Tt(rt))return r(Yt);let Me=[];if(ve>1){const pi=rt[2]-rt[0],ei=rt[3]-rt[1];for(let ai=0;ai<ve;++ai)Me.push(rt[0]+pi*ai/ve,rt[1],rt[2],rt[1]+ei*ai/ve,rt[2]-pi*ai/ve,rt[3],rt[0],rt[3]-ei*ai/ve)}else Me=[rt[0],rt[1],rt[2],rt[1],rt[2],rt[3],rt[0],rt[3]];jt(Me,Me,2);const Ye=[],Ze=[];for(let pi=0,ei=Me.length;pi<ei;pi+=2)Ye.push(Me[pi]),Ze.push(Me[pi+1]);return function $(rt,jt,Yt){return h(Math.min.apply(null,rt),Math.min.apply(null,jt),Math.max.apply(null,rt),Math.max.apply(null,jt),Yt)}(Ye,Ze,Yt)}function ne(rt,jt){const Yt=jt.getExtent(),ve=O(rt);if(jt.canWrapX()&&(ve[0]<Yt[0]||ve[0]>=Yt[2])){const Me=Kt(Yt),Ze=Math.floor((ve[0]-Yt[0])/Me)*Me;rt[0]-=Ze,rt[2]-=Ze}return rt}function fe(rt,jt,Yt){if(jt.canWrapX()){const ve=jt.getExtent();if(!isFinite(rt[0])||!isFinite(rt[2]))return[[ve[0],rt[1],ve[2],rt[3]]];ne(rt,jt);const Me=Kt(ve);if(Kt(rt)>Me&&!Yt)return[[ve[0],rt[1],ve[2],rt[3]]];if(rt[0]<ve[0])return[[rt[0]+Me,rt[1],ve[2],rt[3]],[ve[0],rt[1],rt[2],rt[3]]];if(rt[2]>ve[2])return[[rt[0],rt[1],ve[2],rt[3]],[ve[0],rt[1],rt[2]-Me,rt[3]]]}return[rt]}},1524:(ce,gt,c)=>{"use strict";c.d(gt,{A:()=>V});const V={UNKNOWN:0,INTERSECTING:1,ABOVE:2,RIGHT:4,BELOW:8,LEFT:16}},6750:(ce,gt,c)=>{"use strict";c.d(gt,{m8:()=>$,nF:()=>Z});var V=c(1766);let K=!1;function $(b,B,F,E,p,_,h){const r=new XMLHttpRequest;r.open("GET","function"==typeof b?b(F,E,p):b,!0),"arraybuffer"==B.getType()&&(r.responseType="arraybuffer"),r.withCredentials=K,r.onload=function(u){if(!r.status||r.status>=200&&r.status<300){const o=B.getType();try{let f;"text"==o||"json"==o?f=r.responseText:"xml"==o?f=r.responseXML||r.responseText:"arraybuffer"==o&&(f=r.response),f?_(B.readFeatures(f,{extent:F,featureProjection:p}),B.readProjection(f)):h()}catch{h()}}else h()},r.onerror=h,r.send()}function Z(b,B){return function(F,E,p,_,h){const r=this;$(b,B,F,E,p,function(u,o){r.addFeatures(u),void 0!==_&&_(u)},h||V.tV)}}},3777:(ce,gt,c)=>{"use strict";c.d(gt,{Ay:()=>u,Bs:()=>C,hX:()=>o,te:()=>y});var V=c(9557),K=c(2386),$=c(8654),Z=c(4249),L=c(4157),b=c(2879),B=c(5078),F=c(4367),E=c(1434),p=c(2383),_=c(9325),h=c(3834);const u=class r{constructor(){this.dataProjection=void 0,this.defaultFeatureProjection=void 0,this.featureClass=V.A,this.supportedMediaTypes=null}getReadOptions(U,w){if(w){let z=w.dataProjection?(0,_.Jt)(w.dataProjection):this.readProjection(U);w.extent&&z&&"tile-pixels"===z.getUnits()&&(z=(0,_.Jt)(z),z.setWorldExtent(w.extent)),w={dataProjection:z,featureProjection:w.featureProjection}}return this.adaptOptions(w)}adaptOptions(U){return Object.assign({dataProjection:this.dataProjection,featureProjection:this.defaultFeatureProjection,featureClass:this.featureClass},U)}getType(){return(0,p.b0)()}readFeature(U,w){return(0,p.b0)()}readFeatures(U,w){return(0,p.b0)()}readGeometry(U,w){return(0,p.b0)()}readProjection(U){return(0,p.b0)()}writeFeature(U,w){return(0,p.b0)()}writeFeatures(U,w){return(0,p.b0)()}writeGeometry(U,w){return(0,p.b0)()}};function o(v,U,w){const z=w?(0,_.Jt)(w.featureProjection):null,I=w?(0,_.Jt)(w.dataProjection):null;let P=v;if(z&&I&&!(0,_.tI)(z,I)){U&&(P=v.clone());const j=U?z:I,Y=U?I:z;"tile-pixels"===j.getUnits()?P.transform(j,Y):P.applyTransform((0,_.RG)(j,Y))}if(U&&w&&void 0!==w.decimals){const j=Math.pow(10,w.decimals),Y=function(T){for(let O=0,R=T.length;O<R;++O)T[O]=Math.round(T[O]*j)/j;return T};P===v&&(P=v.clone()),P.applyTransform(Y)}return P}const g={Point:$.A,LineString:Z.A,Polygon:L.Ay,MultiPoint:b.A,MultiLineString:B.A,MultiPolygon:F.A};function C(v,U){const w=v.geometry;if(!w)return[];if(Array.isArray(w))return w.map(P=>C({...v,geometry:P})).flat();const z="MultiPolygon"===w.type?"Polygon":w.type;if("GeometryCollection"===z||"Circle"===z)throw new Error("Unsupported geometry type: "+z);const I=w.layout.length;return o(new K.Ay(z,"Polygon"===z?function a(v,U,w){return Array.isArray(U[0])?((0,h.mb)(v,0,U,w)||(v=v.slice(),(0,h.NK)(v,0,U,w)),v):((0,h.PA)(v,0,U,w)||(v=v.slice(),(0,h.ug)(v,0,U,w)),v)}(w.flatCoordinates,w.ends,I):w.flatCoordinates,w.ends?.flat(),I,v.properties||{},v.id).enableSimplifyTransformed(),!1,U)}function y(v,U){if(!v)return null;if(Array.isArray(v)){const z=v.map(I=>y(I,U));return new E.A(z)}return o(new(0,g[v.type])(v.flatCoordinates,v.layout,v.ends),!1,U)}},3672:(ce,gt,c)=>{"use strict";c.d(gt,{A:()=>j});var V=c(9557),K=c(7651),$=c(2386),Z=c(3777),L=c(5625),b=c(1416),B=c(9325),F=c(9330);function p(Y,T){if(!Y)return null;let O;switch(Y.type){case"Point":O=function r(Y){const T=Y.coordinates;return{type:"Point",flatCoordinates:T,layout:(0,b.p0)(T.length)}}(Y);break;case"LineString":O=function u(Y){const T=Y.coordinates,O=T.flat();return{type:"LineString",flatCoordinates:O,ends:[O.length],layout:(0,b.p0)(T[0]?.length||2)}}(Y);break;case"Polygon":O=function a(Y){const T=Y.coordinates,O=[],R=T[0]?.[0]?.length;return{type:"Polygon",flatCoordinates:O,ends:(0,L.KG)(O,0,T,R),layout:(0,b.p0)(R)}}(Y);break;case"MultiPoint":O=function f(Y){const T=Y.coordinates;return{type:"MultiPoint",flatCoordinates:T.flat(),layout:(0,b.p0)(T[0]?.length||2)}}(Y);break;case"MultiLineString":O=function o(Y){const T=Y.coordinates,O=T[0]?.[0]?.length||2,R=[];return{type:"MultiLineString",flatCoordinates:R,ends:(0,L.KG)(R,0,T,O),layout:(0,b.p0)(O)}}(Y);break;case"MultiPolygon":O=function g(Y){const T=Y.coordinates,O=[],R=T[0]?.[0]?.[0].length||2;return{type:"MultiPolygon",flatCoordinates:O,ends:(0,L.d6)(O,0,T,R),layout:(0,b.p0)(R)}}(Y);break;case"GeometryCollection":O=function h(Y){return Y.geometries.map(function(R){return p(R)})}(Y);break;default:throw new Error("Unsupported GeoJSON type: "+Y.type)}return O}function C(Y,T){const O=(Y=(0,Z.hX)(Y,!0,T)).getType();let R;switch(O){case"Point":R=function I(Y){return{type:"Point",coordinates:Y.getCoordinates()}}(Y);break;case"LineString":R=function v(Y){return{type:"LineString",coordinates:Y.getCoordinates()}}(Y);break;case"Polygon":R=function P(Y,T){let O;return T&&(O=T.rightHanded),{type:"Polygon",coordinates:Y.getCoordinates(O)}}(Y,T);break;case"MultiPoint":R=function w(Y){return{type:"MultiPoint",coordinates:Y.getCoordinates()}}(Y);break;case"MultiLineString":R=function U(Y){return{type:"MultiLineString",coordinates:Y.getCoordinates()}}(Y);break;case"MultiPolygon":R=function z(Y,T){let O;return T&&(O=T.rightHanded),{type:"MultiPolygon",coordinates:Y.getCoordinates(O)}}(Y,T);break;case"GeometryCollection":R=function y(Y,T){return delete(T=Object.assign({},T)).featureProjection,{type:"GeometryCollection",geometries:Y.getGeometriesArray().map(function(R){return C(R,T)})}}(Y,T);break;case"Circle":R={type:"GeometryCollection",geometries:[]};break;default:throw new Error("Unsupported geometry type: "+O)}return R}const j=class E extends K.A{constructor(T){T=T||{},super(),this.dataProjection=(0,B.Jt)(T.dataProjection?T.dataProjection:"EPSG:4326"),T.featureProjection&&(this.defaultFeatureProjection=(0,B.Jt)(T.featureProjection)),T.featureClass&&(this.featureClass=T.featureClass),this.geometryName_=T.geometryName,this.extractGeometryName_=T.extractGeometryName,this.supportedMediaTypes=["application/geo+json","application/vnd.geo+json"]}readFeatureFromObject(T,O){let R=null;R="Feature"===T.type?T:{type:"Feature",geometry:T,properties:null};const A=p(R.geometry);if(this.featureClass===$.Ay)return(0,Z.Bs)({geometry:A,id:R.id,properties:R.properties},O);const M=new V.A;return this.geometryName_?M.setGeometryName(this.geometryName_):this.extractGeometryName_&&R.geometry_name&&M.setGeometryName(R.geometry_name),M.setGeometry((0,Z.te)(A,O)),"id"in R&&M.setId(R.id),R.properties&&M.setProperties(R.properties,!0),M}readFeaturesFromObject(T,O){let A=null;if("FeatureCollection"===T.type){A=[];const D=T.features;for(let H=0,it=D.length;H<it;++H){const lt=this.readFeatureFromObject(D[H],O);lt&&A.push(lt)}}else A=[this.readFeatureFromObject(T,O)];return A.flat()}readGeometryFromObject(T,O){return function _(Y,T){const O=p(Y);return(0,Z.te)(O,T)}(T,O)}readProjectionFromObject(T){const O=T.crs;let R;if(O)if("name"==O.type)R=(0,B.Jt)(O.properties.name);else{if("EPSG"!==O.type)throw new Error("Unknown SRS type");R=(0,B.Jt)("EPSG:"+O.properties.code)}else R=this.dataProjection;return R}writeFeatureObject(T,O){O=this.adaptOptions(O);const R={type:"Feature",geometry:null,properties:null},A=T.getId();if(void 0!==A&&(R.id=A),!T.hasProperties())return R;const M=T.getProperties(),D=T.getGeometry();return D&&(R.geometry=C(D,O),delete M[T.getGeometryName()]),(0,F.p)(M)||(R.properties=M),R}writeFeaturesObject(T,O){O=this.adaptOptions(O);const R=[];for(let A=0,M=T.length;A<M;++A)R.push(this.writeFeatureObject(T[A],O));return{type:"FeatureCollection",features:R}}writeGeometryObject(T,O){return C(T,this.adaptOptions(O))}}},7651:(ce,gt,c)=>{"use strict";c.d(gt,{A:()=>L});var V=c(3777),K=c(2383);function Z(b){return"string"==typeof b?JSON.parse(b)||null:null!==b?b:null}const L=class $ extends V.Ay{constructor(){super()}getType(){return"json"}readFeature(B,F){return this.readFeatureFromObject(Z(B),this.getReadOptions(B,F))}readFeatures(B,F){return this.readFeaturesFromObject(Z(B),this.getReadOptions(B,F))}readFeatureFromObject(B,F){return(0,K.b0)()}readFeaturesFromObject(B,F){return(0,K.b0)()}readGeometry(B,F){return this.readGeometryFromObject(Z(B),this.getReadOptions(B,F))}readGeometryFromObject(B,F){return(0,K.b0)()}readProjection(B){return this.readProjectionFromObject(Z(B))}readProjectionFromObject(B){return(0,K.b0)()}writeFeature(B,F){return JSON.stringify(this.writeFeatureObject(B,F))}writeFeatureObject(B,F){return(0,K.b0)()}writeFeatures(B,F){return JSON.stringify(this.writeFeaturesObject(B,F))}writeFeaturesObject(B,F){return(0,K.b0)()}writeGeometry(B,F){return JSON.stringify(this.writeGeometryObject(B,F))}writeGeometryObject(B,F){return(0,K.b0)()}}},1780:(ce,gt,c)=>{"use strict";c.d(gt,{Ay:()=>_s});var V=c(9557),K=c(1540),$=c(1434),Z=c(5804),L=c(2661),b=c(4249),B=c(5078),F=c(2879),E=c(4367),p=c(8654),_=c(4157),h=c(5409),r=c(9380),u=c(730),o=c(3777),f=c(2383),g=c(2058),a=c(3566);const y=class C extends o.Ay{constructor(){super(),this.xmlSerializer_=(0,a.mc)()}getType(){return"xml"}readFeature(at,ct){if(!at)return null;if("string"==typeof at){const pt=(0,a.qg)(at);return this.readFeatureFromDocument(pt,ct)}return(0,a.wz)(at)?this.readFeatureFromDocument(at,ct):this.readFeatureFromNode(at,ct)}readFeatureFromDocument(at,ct){const pt=this.readFeaturesFromDocument(at,ct);return pt.length>0?pt[0]:null}readFeatureFromNode(at,ct){return null}readFeatures(at,ct){if(!at)return[];if("string"==typeof at){const pt=(0,a.qg)(at);return this.readFeaturesFromDocument(pt,ct)}return(0,a.wz)(at)?this.readFeaturesFromDocument(at,ct):this.readFeaturesFromNode(at,ct)}readFeaturesFromDocument(at,ct){const pt=[];for(let Ht=at.firstChild;Ht;Ht=Ht.nextSibling)Ht.nodeType==Node.ELEMENT_NODE&&(0,g.X$)(pt,this.readFeaturesFromNode(Ht,ct));return pt}readFeaturesFromNode(at,ct){return(0,f.b0)()}readGeometry(at,ct){if(!at)return null;if("string"==typeof at){const pt=(0,a.qg)(at);return this.readGeometryFromDocument(pt,ct)}return(0,a.wz)(at)?this.readGeometryFromDocument(at,ct):this.readGeometryFromNode(at,ct)}readGeometryFromDocument(at,ct){return null}readGeometryFromNode(at,ct){return null}readProjection(at){if(!at)return null;if("string"==typeof at){const ct=(0,a.qg)(at);return this.readProjectionFromDocument(ct)}return(0,a.wz)(at)?this.readProjectionFromDocument(at):this.readProjectionFromNode(at)}readProjectionFromDocument(at){return this.dataProjection}readProjectionFromNode(at){return this.dataProjection}writeFeature(at,ct){const pt=this.writeFeatureNode(at,ct);return this.xmlSerializer_.serializeToString(pt)}writeFeatureNode(at,ct){return null}writeFeatures(at,ct){const pt=this.writeFeaturesNode(at,ct);return this.xmlSerializer_.serializeToString(pt)}writeFeaturesNode(at,ct){return null}writeGeometry(at,ct){const pt=this.writeGeometryNode(at,ct);return this.xmlSerializer_.serializeToString(pt)}writeGeometryNode(at,ct){return null}};var v=c(1962),U=c(9325),w=c(4628),z=c(9973);const I=["http://www.google.com/kml/ext/2.2"],P=[null,"http://earth.google.com/kml/2.0","http://earth.google.com/kml/2.1","http://earth.google.com/kml/2.2","http://www.opengis.net/kml/2.2"],Y={fraction:"fraction",pixels:"pixels",insetPixels:"pixels"},T=(0,a.Dm)(P,{ExtendedData:Rr,Region:fr,MultiGeometry:(0,a.kW)(dr,"geometry"),LineString:(0,a.kW)(Ii,"geometry"),LinearRing:(0,a.kW)(Ds,"geometry"),Point:(0,a.kW)(Rs,"geometry"),Polygon:(0,a.kW)($r,"geometry"),Style:(0,a.kW)(xs),StyleMap:function As(le,at){const ct=Pt.call(this,le,at);if(!ct)return;const pt=at[at.length-1];if(Array.isArray(ct))pt.Style=ct;else{if("string"!=typeof ct)throw new Error("`styleMapValue` has an unknown type");pt.styleUrl=ct}},address:(0,a.kW)(w.E3),description:(0,a.kW)(w.E3),name:(0,a.kW)(w.E3),open:(0,a.kW)(w.Vf),phoneNumber:(0,a.kW)(w.E3),styleUrl:(0,a.kW)(Ct),visibility:(0,a.kW)(w.Vf)},(0,a.Dm)(I,{MultiTrack:(0,a.kW)(function Mn(le,at){const ct=(0,a.eY)([],Nn,le,at);if(ct)return new B.A(ct)},"geometry"),Track:(0,a.kW)(ur,"geometry")})),O=(0,a.Dm)(P,{ExtendedData:Rr,Region:fr,Link:function fn(le,at){(0,a.UN)(R,le,at)},address:(0,a.kW)(w.E3),description:(0,a.kW)(w.E3),name:(0,a.kW)(w.E3),open:(0,a.kW)(w.Vf),phoneNumber:(0,a.kW)(w.E3),visibility:(0,a.kW)(w.Vf)}),R=(0,a.Dm)(P,{href:(0,a.kW)(Yi)}),A=(0,a.Dm)(P,{Altitude:(0,a.kW)(w.e4),Longitude:(0,a.kW)(w.e4),Latitude:(0,a.kW)(w.e4),Tilt:(0,a.kW)(w.e4),AltitudeMode:(0,a.kW)(w.E3),Heading:(0,a.kW)(w.e4),Roll:(0,a.kW)(w.e4)}),M=(0,a.Dm)(P,{LatLonAltBox:function bn(le,at){const ct=(0,a.eY)({},kr,le,at);if(!ct)return;const pt=at[at.length-1],Ht=[parseFloat(ct.west),parseFloat(ct.south),parseFloat(ct.east),parseFloat(ct.north)];pt.extent=Ht,pt.altitudeMode=ct.altitudeMode,pt.minAltitude=parseFloat(ct.minAltitude),pt.maxAltitude=parseFloat(ct.maxAltitude)},Lod:function Pn(le,at){const ct=(0,a.eY)({},es,le,at);if(!ct)return;const pt=at[at.length-1];pt.minLodPixels=parseFloat(ct.minLodPixels),pt.maxLodPixels=parseFloat(ct.maxLodPixels),pt.minFadeExtent=parseFloat(ct.minFadeExtent),pt.maxFadeExtent=parseFloat(ct.maxFadeExtent)}}),D=(0,a.Dm)(P,["Document","Placemark"]),H=(0,a.Dm)(P,{Document:(0,a.mm)(function wr(le,at,ct){(0,a.NQ)({node:le},Un,bs,at,ct,void 0,this)}),Placemark:(0,a.mm)(nr)});let it,At,St,Ut,Kt,ut,ie,ne,pi,lt=null,Tt=null,Zt=null,fe=null,jt=null,ve=null;function Ye(le){return 32/Math.min(le[0],le[1])}function ei(le){return le}function Oi(le,at,ct){return Array.isArray(le)?le:"string"==typeof le?Oi(ct[le],at,ct):at}function Ai(le){const at=(0,a.mT)(le,!1),ct=/^\s*#?\s*([0-9A-Fa-f]{8})\s*$/.exec(at);if(ct){const pt=ct[1];return[parseInt(pt.substr(6,2),16),parseInt(pt.substr(4,2),16),parseInt(pt.substr(2,2),16),parseInt(pt.substr(0,2),16)/255]}}function an(le){let at=(0,a.mT)(le,!1);const ct=[];at=at.replace(/\s*,\s*/g,",");const pt=/^\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?),([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)(?:\s+|,|$)(?:([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)(?:\s+|$))?\s*/i;let Ht;for(;Ht=pt.exec(at);){const Pe=parseFloat(Ht[1]),we=parseFloat(Ht[2]),ze=Ht[3]?parseFloat(Ht[3]):0;ct.push(Pe,we,ze),at=at.substr(Ht[0].length)}if(""===at)return ct}function Yi(le){const at=(0,a.mT)(le,!1).trim();let ct=le.baseURI;return(!ct||"about:blank"==ct)&&(ct=window.location.href),ct?new URL(at,ct).href:at}function Ct(le){const at=(0,a.mT)(le,!1).trim().replace(/^(?!.*#)/,"#");let ct=le.baseURI;return(!ct||"about:blank"==ct)&&(ct=window.location.href),ct?new URL(at,ct).href:at}function ht(le){return(0,w.e4)(le)}const It=(0,a.Dm)(P,{Pair:function Br(le,at){const ct=(0,a.eY)({},An,le,at,this);if(!ct)return;const pt=ct.key;if(pt&&"normal"==pt){const Ht=ct.styleUrl;Ht&&(at[at.length-1]=Ht);const Pe=ct.Style;Pe&&(at[at.length-1]=Pe)}}});function Pt(le,at){return(0,a.eY)(void 0,It,le,at,this)}const dt=(0,a.Dm)(P,{Icon:(0,a.kW)(function Os(le,at){return(0,a.eY)({},qs,le,at)||null}),color:(0,a.kW)(Ai),heading:(0,a.kW)(w.e4),hotSpot:(0,a.kW)(function nt(le){const at=le.getAttribute("xunits"),ct=le.getAttribute("yunits");let pt;return pt="insetPixels"!==at?"insetPixels"!==ct?"bottom-left":"top-left":"insetPixels"!==ct?"bottom-right":"top-right",{x:parseFloat(le.getAttribute("x")),xunits:Y[at],y:parseFloat(le.getAttribute("y")),yunits:Y[ct],origin:pt}}),scale:(0,a.kW)(ht)}),Ce=(0,a.Dm)(P,{color:(0,a.kW)(Ai),scale:(0,a.kW)(ht)}),ke=(0,a.Dm)(P,{color:(0,a.kW)(Ai),width:(0,a.kW)(w.e4)}),Di=(0,a.Dm)(P,{color:(0,a.kW)(Ai),fill:(0,a.kW)(w.Vf),outline:(0,a.kW)(w.Vf)}),Zn=(0,a.Dm)(P,{coordinates:(0,a.Tb)(an)});function Ti(le,at){return(0,a.eY)(null,Zn,le,at)}const Nn=(0,a.Dm)(I,{Track:(0,a.VT)(ur)}),dn=(0,a.Dm)(P,{when:function nn(le,at){const pt=at[at.length-1].whens,Ht=(0,a.mT)(le,!1),Pe=Date.parse(Ht);pt.push(isNaN(Pe)?0:Pe)}},(0,a.Dm)(I,{coord:function Ps(le,at){const pt=at[at.length-1].coordinates,Ht=(0,a.mT)(le,!1),we=/^\s*([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s+([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s+([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s*$/i.exec(Ht);if(we){const ze=parseFloat(we[1]),Xe=parseFloat(we[2]),li=parseFloat(we[3]);pt.push([ze,Xe,li])}else pt.push([])}}));function ur(le,at){const ct=(0,a.eY)({coordinates:[],whens:[]},dn,le,at);if(!ct)return;const pt=[],Ht=ct.coordinates,Pe=ct.whens;for(let we=0,ze=Math.min(Ht.length,Pe.length);we<ze;++we)3==Ht[we].length&&pt.push(Ht[we][0],Ht[we][1],Ht[we][2],Pe[we]);return new b.A(pt,"XYZM")}const qs=(0,a.Dm)(P,{href:(0,a.kW)(Yi)},(0,a.Dm)(I,{x:(0,a.kW)(w.e4),y:(0,a.kW)(w.e4),w:(0,a.kW)(w.e4),h:(0,a.kW)(w.e4)})),hs=(0,a.Dm)(P,{coordinates:(0,a.Tb)(an)});function Vi(le,at){return(0,a.eY)(null,hs,le,at)}const Ci=(0,a.Dm)(P,{extrude:(0,a.kW)(w.Vf),tessellate:(0,a.kW)(w.Vf),altitudeMode:(0,a.kW)(w.E3)});function Ii(le,at){const ct=(0,a.eY)({},Ci,le,at),pt=Vi(le,at);if(pt){const Ht=new b.A(pt,"XYZ");return Ht.setProperties(ct,!0),Ht}}function Ds(le,at){const ct=(0,a.eY)({},Ci,le,at),pt=Vi(le,at);if(pt){const Ht=new _.Ay(pt,"XYZ",[pt.length]);return Ht.setProperties(ct,!0),Ht}}const Ls=(0,a.Dm)(P,{LineString:(0,a.VT)(Ii),LinearRing:(0,a.VT)(Ds),MultiGeometry:(0,a.VT)(dr),Point:(0,a.VT)(Rs),Polygon:(0,a.VT)($r)});function dr(le,at){const ct=(0,a.eY)([],Ls,le,at);if(!ct)return null;if(0===ct.length)return new $.A(ct);let pt,Ht=!0;const Pe=ct[0].getType();let we;for(let ze=1,Xe=ct.length;ze<Xe;++ze)if(we=ct[ze],we.getType()!=Pe){Ht=!1;break}if(Ht){let ze,Xe;if("Point"==Pe){const li=ct[0];ze=li.getLayout(),Xe=li.getFlatCoordinates();for(let mi=1,$i=ct.length;mi<$i;++mi)we=ct[mi],(0,g.X$)(Xe,we.getFlatCoordinates());pt=new F.A(Xe,ze),Ms(pt,ct)}else if("LineString"==Pe)pt=new B.A(ct),Ms(pt,ct);else if("Polygon"==Pe)pt=new E.A(ct),Ms(pt,ct);else{if("GeometryCollection"!=Pe)throw new Error("Unknown geometry type found");pt=new $.A(ct)}}else pt=new $.A(ct);return pt}function Rs(le,at){const ct=(0,a.eY)({},Ci,le,at),pt=Vi(le,at);if(pt){const Ht=new p.A(pt,"XYZ");return Ht.setProperties(ct,!0),Ht}}const tr=(0,a.Dm)(P,{innerBoundaryIs:function Wn(le,at){const ct=(0,a.eY)([],Ei,le,at);ct.length>0&&at[at.length-1].push(...ct)},outerBoundaryIs:function us(le,at){const ct=(0,a.eY)(void 0,cs,le,at);ct&&(at[at.length-1][0]=ct)}});function $r(le,at){const ct=(0,a.eY)({},Ci,le,at),pt=(0,a.eY)([null],tr,le,at);if(pt&&pt[0]){const Ht=pt[0],Pe=[Ht.length];for(let ze=1,Xe=pt.length;ze<Xe;++ze)(0,g.X$)(Ht,pt[ze]),Pe.push(Ht.length);const we=new _.Ay(Ht,"XYZ",Pe);return we.setProperties(ct,!0),we}}const Fe=(0,a.Dm)(P,{IconStyle:function ue(le,at){const ct=(0,a.eY)({},dt,le,at);if(!ct)return;const pt=at[at.length-1],Ht="Icon"in ct?ct.Icon:{},Pe=!("Icon"in ct)||Object.keys(Ht).length>0;let we;const ze=Ht.href;ze?we=ze:Pe&&(we=ut);let Xe,li,mi,$i="bottom-left";const ln=ct.hotSpot;let xn;ln?(Xe=[ln.x,ln.y],li=ln.xunits,mi=ln.yunits,$i=ln.origin):/^https?:\/\/maps\.(?:google|gstatic)\.com\//.test(we)&&(we.includes("pushpin")?(Xe=At,li=St,mi=Ut):we.includes("arrow-reverse")?(Xe=[54,42],li=St,mi=Ut):we.includes("paddle")&&(Xe=[32,1],li=St,mi=Ut));const qi=Ht.x,ms=Ht.y;let Cn;void 0!==qi&&void 0!==ms&&(xn=[qi,ms]);const Rn=Ht.w,We=Ht.h;let Si;void 0!==Rn&&void 0!==We&&(Cn=[Rn,We]);const xi=ct.heading;void 0!==xi&&(Si=(0,z.eh)(xi));const $n=ct.color;if(Pe){we==ut&&(Cn=Kt);const Pi=new Z.A({anchor:Xe,anchorOrigin:$i,anchorXUnits:li,anchorYUnits:mi,crossOrigin:this.crossOrigin_,offset:xn,offsetOrigin:"bottom-left",rotation:Si,scale:ct.scale,size:Cn,src:this.iconUrlFunction_(we),color:$n}),Or=Pi.getScaleArray()[0],ks=Pi.getSize();if(null===ks){const Gs=Pi.getImageState();if(Gs===L.A.IDLE||Gs===L.A.LOADING){const sr=function(){const ss=Pi.getImageState();if(ss!==L.A.IDLE&&ss!==L.A.LOADING){const un=Pi.getSize();if(un&&2==un.length){const Po=Ye(un);Pi.setScale(Or*Po)}Pi.unlistenImageChange(sr)}};Pi.listenImageChange(sr),Gs===L.A.IDLE&&Pi.load()}}else if(2==ks.length){const Gs=Ye(ks);Pi.setScale(Or*Gs)}pt.imageStyle=Pi}else pt.imageStyle=ie},LabelStyle:function He(le,at){const ct=(0,a.eY)({},Ce,le,at);if(!ct)return;const pt=at[at.length-1],Ht=new u.A({fill:new K.A({color:"color"in ct?ct.color:it}),scale:ct.scale});pt.textStyle=Ht},LineStyle:function qe(le,at){const ct=(0,a.eY)({},ke,le,at);if(!ct)return;const pt=at[at.length-1],Ht=new h.A({color:"color"in ct?ct.color:it,width:"width"in ct?ct.width:1});pt.strokeStyle=Ht},PolyStyle:function yi(le,at){const ct=(0,a.eY)({},Di,le,at);if(!ct)return;const pt=at[at.length-1],Ht=new K.A({color:"color"in ct?ct.color:it});pt.fillStyle=Ht;const Pe=ct.fill;void 0!==Pe&&(pt.fill=Pe);const we=ct.outline;void 0!==we&&(pt.outline=we)}});function xs(le,at){const ct=(0,a.eY)({},Fe,le,at,this);if(!ct)return null;let pt="fillStyle"in ct?ct.fillStyle:lt;const Ht=ct.fill;let Pe;void 0!==Ht&&!Ht&&(pt=null),"imageStyle"in ct?ct.imageStyle!=ie&&(Pe=ct.imageStyle):Pe=Tt;const we="textStyle"in ct?ct.textStyle:fe,ze="strokeStyle"in ct?ct.strokeStyle:Zt,Xe=ct.outline;return void 0===Xe||Xe?[new r.Ay({fill:pt,image:Pe,stroke:ze,text:we,zIndex:void 0})]:[new r.Ay({geometry:function(li){const mi=li.getGeometry(),$i=mi.getType();return"GeometryCollection"===$i?new $.A(mi.getGeometriesArrayRecursive().filter(function(xn){const qi=xn.getType();return"Polygon"!==qi&&"MultiPolygon"!==qi})):"Polygon"!==$i&&"MultiPolygon"!==$i?mi:void 0},fill:pt,image:Pe,stroke:ze,text:we,zIndex:void 0}),new r.Ay({geometry:function(li){const mi=li.getGeometry(),$i=mi.getType();return"GeometryCollection"===$i?new $.A(mi.getGeometriesArrayRecursive().filter(function(xn){const qi=xn.getType();return"Polygon"===qi||"MultiPolygon"===qi})):"Polygon"===$i||"MultiPolygon"===$i?mi:void 0},fill:pt,stroke:null,zIndex:void 0})]}function Ms(le,at){const ct=at.length,pt=new Array(at.length),Ht=new Array(at.length),Pe=new Array(at.length);let we,ze,Xe;we=!1,ze=!1,Xe=!1;for(let li=0;li<ct;++li){const mi=at[li];pt[li]=mi.get("extrude"),Ht[li]=mi.get("tessellate"),Pe[li]=mi.get("altitudeMode"),we=we||void 0!==pt[li],ze=ze||void 0!==Ht[li],Xe=Xe||Pe[li]}we&&le.set("extrude",pt),ze&&le.set("tessellate",Ht),Xe&&le.set("altitudeMode",Pe)}const Fs=(0,a.Dm)(P,{displayName:(0,a.kW)(w.E3),value:(0,a.kW)(w.E3)}),Pr=(0,a.Dm)(P,{Data:function Ns(le,at){const ct=le.getAttribute("name");(0,a.UN)(Fs,le,at);const pt=at[at.length-1];ct&&pt.displayName?pt[ct]={value:pt.value,displayName:pt.displayName,toString:function(){return pt.value}}:null!==ct?pt[ct]=pt.value:null!==pt.displayName&&(pt[pt.displayName]=pt.value),delete pt.value},SchemaData:function er(le,at){(0,a.UN)(br,le,at)}});function Rr(le,at){(0,a.UN)(Pr,le,at)}function fr(le,at){(0,a.UN)(M,le,at)}const An=(0,a.Dm)(P,{Style:(0,a.kW)(xs),key:(0,a.kW)(w.E3),styleUrl:(0,a.kW)(Ct)}),br=(0,a.Dm)(P,{SimpleData:function Wr(le,at){const ct=le.getAttribute("name");if(null!==ct){const pt=(0,w.E3)(le);at[at.length-1][ct]=pt}}}),kr=(0,a.Dm)(P,{altitudeMode:(0,a.kW)(w.E3),minAltitude:(0,a.kW)(w.e4),maxAltitude:(0,a.kW)(w.e4),north:(0,a.kW)(w.e4),south:(0,a.kW)(w.e4),east:(0,a.kW)(w.e4),west:(0,a.kW)(w.e4)}),es=(0,a.Dm)(P,{minLodPixels:(0,a.kW)(w.e4),maxLodPixels:(0,a.kW)(w.e4),minFadeExtent:(0,a.kW)(w.e4),maxFadeExtent:(0,a.kW)(w.e4)}),Ei=(0,a.Dm)(P,{LinearRing:(0,a.VT)(Ti)}),cs=(0,a.Dm)(P,{LinearRing:(0,a.Tb)(Ti)});function kn(le,at){const ct=(0,v._j)(at),Ht=[255*(4==ct.length?ct[3]:1),ct[2],ct[1],ct[0]];for(let Pe=0;Pe<4;++Pe){const we=Math.floor(Ht[Pe]).toString(16);Ht[Pe]=1==we.length?"0"+we:we}(0,w.uB)(le,Ht.join(""))}const gr=(0,a.Dm)(P,{Data:(0,a.mm)(function sn(le,at,ct){le.setAttribute("name",at.name);const pt={node:le},Ht=at.value;"object"==typeof Ht?(null!==Ht&&Ht.displayName&&(0,a.NQ)(pt,gr,a.OL,[Ht.displayName],ct,["displayName"]),null!==Ht&&Ht.value&&(0,a.NQ)(pt,gr,a.OL,[Ht.value],ct,["value"])):(0,a.NQ)(pt,gr,a.OL,[Ht],ct,["value"])}),value:(0,a.mm)(function ds(le,at){(0,w.uB)(le,at)}),displayName:(0,a.mm)(function Gn(le,at){(0,w.Gc)(le,at)})}),Un=(0,a.Dm)(P,{Placemark:(0,a.mm)(nr)}),bs=function(le,at,ct){return(0,a.qq)(at[at.length-1].node.namespaceURI,"Placemark")},_r=(0,a.X1)("Data"),Us=(0,a.Dm)(P,["href"],(0,a.Dm)(I,["x","y","w","h"])),ys=(0,a.Dm)(P,{href:(0,a.mm)(w.uB)},(0,a.Dm)(I,{x:(0,a.mm)(w.Ko),y:(0,a.mm)(w.Ko),w:(0,a.mm)(w.Ko),h:(0,a.mm)(w.Ko)})),uo=function(le,at,ct){return(0,a.qq)(I[0],"gx:"+ct)},fo=(0,a.Dm)(P,["scale","heading","Icon","color","hotSpot"]),Ko=(0,a.Dm)(P,{Icon:(0,a.mm)(function Gr(le,at,ct){const pt={node:le};let Pe=Us[ct[ct.length-1].node.namespaceURI],we=(0,a.Gl)(at,Pe);(0,a.NQ)(pt,ys,a.OL,we,ct,Pe),Pe=Us[I[0]],we=(0,a.Gl)(at,Pe),(0,a.NQ)(pt,ys,uo,we,ct,Pe)}),color:(0,a.mm)(kn),heading:(0,a.mm)(w.Ko),hotSpot:(0,a.mm)(function is(le,at){le.setAttribute("x",String(at.x)),le.setAttribute("y",String(at.y)),le.setAttribute("xunits",at.xunits),le.setAttribute("yunits",at.yunits)}),scale:(0,a.mm)(vr)}),mr=(0,a.Dm)(P,["color","scale"]),ws=(0,a.Dm)(P,{color:(0,a.mm)(kn),scale:(0,a.mm)(vr)}),Bs=(0,a.Dm)(P,["color","width"]),gs=(0,a.Dm)(P,{color:(0,a.mm)(kn),width:(0,a.mm)(w.Ko)}),vs={Point:"Point",LineString:"LineString",LinearRing:"LinearRing",Polygon:"Polygon",MultiPoint:"MultiGeometry",MultiLineString:"MultiGeometry",MultiPolygon:"MultiGeometry",GeometryCollection:"MultiGeometry"},Tn=function(le,at,ct){if(le)return(0,a.qq)(at[at.length-1].node.namespaceURI,vs[le.getType()])},zn=(0,a.X1)("Point"),Kr=(0,a.X1)("LineString"),Ir=(0,a.X1)("LinearRing"),Jr=(0,a.X1)("Polygon"),Qr=(0,a.Dm)(P,{LineString:(0,a.mm)(di),Point:(0,a.mm)(di),Polygon:(0,a.mm)(gn),GeometryCollection:(0,a.mm)(Xr)});function Xr(le,at,ct){const pt={node:le},Ht=at.getType();let we,Pe=[];if("GeometryCollection"===Ht)at.getGeometriesArrayRecursive().forEach(function(ze){const Xe=ze.getType();if("MultiPoint"===Xe)Pe=Pe.concat(ze.getPoints());else if("MultiLineString"===Xe)Pe=Pe.concat(ze.getLineStrings());else if("MultiPolygon"===Xe)Pe=Pe.concat(ze.getPolygons());else{if("Point"!==Xe&&"LineString"!==Xe&&"Polygon"!==Xe)throw new Error("Unknown geometry type");Pe.push(ze)}}),we=Tn;else if("MultiPoint"===Ht)Pe=at.getPoints(),we=zn;else if("MultiLineString"===Ht)Pe=at.getLineStrings(),we=Kr;else{if("MultiPolygon"!==Ht)throw new Error("Unknown geometry type");Pe=at.getPolygons(),we=Jr}(0,a.NQ)(pt,Qr,we,Pe,ct)}const Co=(0,a.Dm)(P,{LinearRing:(0,a.mm)(di)});function qr(le,at,ct){(0,a.NQ)({node:le},Co,Ir,[at],ct)}const pr=(0,a.Dm)(P,{ExtendedData:(0,a.mm)(function fs(le,at,ct){const pt={node:le},Ht=at.names,Pe=at.values,we=Ht.length;for(let ze=0;ze<we;ze++)(0,a.NQ)(pt,gr,_r,[{name:Ht[ze],value:Pe[ze]}],ct)}),MultiGeometry:(0,a.mm)(Xr),LineString:(0,a.mm)(di),LinearRing:(0,a.mm)(di),Point:(0,a.mm)(di),Polygon:(0,a.mm)(gn),Style:(0,a.mm)(function ra(le,at,ct){const pt={node:le},Ht={};if(at.pointStyles.length){const Xe=at.pointStyles[0].getText();Xe&&(Ht.LabelStyle=Xe);const li=at.pointStyles[0].getImage();li&&"function"==typeof li.getSrc&&(Ht.IconStyle=li)}if(at.lineStyles.length){const Xe=at.lineStyles[0].getStroke();Xe&&(Ht.LineStyle=Xe)}if(at.polyStyles.length){const Xe=at.polyStyles[0].getStroke();Xe&&!Ht.LineStyle&&(Ht.LineStyle=Xe),Ht.PolyStyle=at.polyStyles[0]}const we=Wi[ct[ct.length-1].node.namespaceURI],ze=(0,a.Gl)(Ht,we);(0,a.NQ)(pt,_o,a.OL,ze,ct,we)}),address:(0,a.mm)(w.uB),description:(0,a.mm)(w.uB),name:(0,a.mm)(w.uB),open:(0,a.mm)(w.Z3),phoneNumber:(0,a.mm)(w.uB),styleUrl:(0,a.mm)(w.uB),visibility:(0,a.mm)(w.Z3)}),go=(0,a.Dm)(P,["name","open","visibility","address","phoneNumber","description","styleUrl","Style"]),Sr=(0,a.X1)("ExtendedData");function nr(le,at,ct){const pt={node:le};at.getId()&&le.setAttribute("id",at.getId());const Ht=at.getProperties(),Pe={address:1,description:1,name:1,open:1,phoneNumber:1,styleUrl:1,visibility:1};Pe[at.getGeometryName()]=1;const we=Object.keys(Ht||{}).sort().filter(function(xn){return!Pe[xn]}),ze=at.getStyleFunction();if(ze){const xn=ze(at,0);if(xn){const qi=Array.isArray(xn)?xn:[xn];let ms=qi;if(at.getGeometry()&&(ms=qi.filter(function(Cn){const Rn=Cn.getGeometryFunction()(at);if(Rn){const We=Rn.getType();return"GeometryCollection"===We?Rn.getGeometriesArrayRecursive().filter(function(Si){const xi=Si.getType();return"Point"===xi||"MultiPoint"===xi}).length:"Point"===We||"MultiPoint"===We}})),this.writeStyles_){let Cn=qi,Rn=qi;at.getGeometry()&&(Cn=qi.filter(function(We){const Si=We.getGeometryFunction()(at);if(Si){const xi=Si.getType();return"GeometryCollection"===xi?Si.getGeometriesArrayRecursive().filter(function(ns){const $n=ns.getType();return"LineString"===$n||"MultiLineString"===$n}).length:"LineString"===xi||"MultiLineString"===xi}}),Rn=qi.filter(function(We){const Si=We.getGeometryFunction()(at);if(Si){const xi=Si.getType();return"GeometryCollection"===xi?Si.getGeometriesArrayRecursive().filter(function(ns){const $n=ns.getType();return"Polygon"===$n||"MultiPolygon"===$n}).length:"Polygon"===xi||"MultiPolygon"===xi}})),Ht.Style={pointStyles:ms,lineStyles:Cn,polyStyles:Rn}}if(ms.length&&void 0===Ht.name){const Cn=ms[0].getText();Cn&&(Ht.name=Cn.getText())}}}const li=go[ct[ct.length-1].node.namespaceURI],mi=(0,a.Gl)(Ht,li);if((0,a.NQ)(pt,pr,a.OL,mi,ct,li),we.length>0){const xn=(0,a.Gl)(Ht,we);(0,a.NQ)(pt,pr,Sr,[{names:we,values:xn}],ct)}const $i=ct[0];let ln=at.getGeometry();ln&&(ln=(0,o.hX)(ln,!0,$i)),(0,a.NQ)(pt,pr,Tn,[ln],ct)}const yr=(0,a.Dm)(P,["extrude","tessellate","altitudeMode","coordinates"]),Qe=(0,a.Dm)(P,{extrude:(0,a.mm)(w.Z3),tessellate:(0,a.mm)(w.Z3),altitudeMode:(0,a.mm)(w.uB),coordinates:(0,a.mm)(function ir(le,at,ct){const pt=ct[ct.length-1],Ht=pt.layout,Pe=pt.stride;let we;if("XY"==Ht||"XYM"==Ht)we=2;else{if("XYZ"!=Ht&&"XYZM"!=Ht)throw new Error("Invalid geometry layout");we=3}const ze=at.length;let Xe="";if(ze>0){Xe+=at[0];for(let li=1;li<we;++li)Xe+=","+at[li];for(let li=Pe;li<ze;li+=Pe){Xe+=" "+at[li];for(let mi=1;mi<we;++mi)Xe+=","+at[li+mi]}}(0,w.uB)(le,Xe)})});function di(le,at,ct){const pt=at.getFlatCoordinates(),Ht={node:le};Ht.layout=at.getLayout(),Ht.stride=at.getStride();const Pe=at.getProperties();Pe.coordinates=pt;const ze=yr[ct[ct.length-1].node.namespaceURI],Xe=(0,a.Gl)(Pe,ze);(0,a.NQ)(Ht,Qe,a.OL,Xe,ct,ze)}const rn=(0,a.Dm)(P,["color","fill","outline"]),Zi=(0,a.Dm)(P,{outerBoundaryIs:(0,a.mm)(qr),innerBoundaryIs:(0,a.mm)(qr)}),Hi=(0,a.X1)("innerBoundaryIs"),Ws=(0,a.X1)("outerBoundaryIs");function gn(le,at,ct){const pt=at.getLinearRings(),Ht=pt.shift(),Pe={node:le};(0,a.NQ)(Pe,Zi,Hi,pt,ct),(0,a.NQ)(Pe,Zi,Ws,[Ht],ct)}const jn=(0,a.Dm)(P,{color:(0,a.mm)(kn),fill:(0,a.mm)(w.Z3),outline:(0,a.mm)(w.Z3)});function vr(le,at){(0,w.Ko)(le,Math.round(1e6*at)/1e6)}const Wi=(0,a.Dm)(P,["IconStyle","LabelStyle","LineStyle","PolyStyle"]),_o=(0,a.Dm)(P,{IconStyle:(0,a.mm)(function zr(le,at,ct){const pt={node:le},Ht={},Pe=at.getSrc(),we=at.getSize(),ze=at.getImageSize(),Xe={href:Pe};if(we){Xe.w=we[0],Xe.h=we[1];const Cn=at.getAnchor(),Rn=at.getOrigin();Rn&&ze&&0!==Rn[0]&&Rn[1]!==we[1]&&(Xe.x=Rn[0],Xe.y=ze[1]-(Rn[1]+we[1])),!Cn||Cn[0]===we[0]/2&&Cn[1]===we[1]/2||(Ht.hotSpot={x:Cn[0],xunits:"pixels",y:we[1]-Cn[1],yunits:"pixels"})}Ht.Icon=Xe;let li=at.getScaleArray()[0],mi=we;null===mi&&(mi=Kt),2==mi.length&&(li/=Ye(mi)),1!==li&&(Ht.scale=li);const $i=at.getRotation();0!==$i&&(Ht.heading=$i);const ln=at.getColor();ln&&(Ht.color=ln);const qi=fo[ct[ct.length-1].node.namespaceURI],ms=(0,a.Gl)(Ht,qi);(0,a.NQ)(pt,Ko,a.OL,ms,ct,qi)}),LabelStyle:(0,a.mm)(function js(le,at,ct){const pt={node:le},Ht={},Pe=at.getFill();Pe&&(Ht.color=Pe.getColor());const we=at.getScale();we&&1!==we&&(Ht.scale=we);const Xe=mr[ct[ct.length-1].node.namespaceURI],li=(0,a.Gl)(Ht,Xe);(0,a.NQ)(pt,ws,a.OL,li,ct,Xe)}),LineStyle:(0,a.mm)(function Hn(le,at,ct){const pt={node:le},Ht={color:at.getColor(),width:Number(at.getWidth())||1},we=Bs[ct[ct.length-1].node.namespaceURI],ze=(0,a.Gl)(Ht,we);(0,a.NQ)(pt,gs,a.OL,ze,ct,we)}),PolyStyle:(0,a.mm)(function Is(le,at,ct){const pt={node:le},Ht=at.getFill(),Pe=at.getStroke(),we={color:Ht?Ht.getColor():void 0,fill:!!Ht&&void 0,outline:!!Pe&&void 0},Xe=rn[ct[ct.length-1].node.namespaceURI],li=(0,a.Gl)(we,Xe);(0,a.NQ)(pt,jn,a.OL,li,ct,Xe)})}),_s=class ai extends y{constructor(at){super(),at=at||{},ve||function Ze(){it=[255,255,255,1],lt=new K.A({color:it}),At=[20,2],St="pixels",Ut="pixels",Kt=[64,64],ut="https://maps.google.com/mapfiles/kml/pushpin/ylw-pushpin.png",Tt=new Z.A({anchor:At,anchorOrigin:"bottom-left",anchorXUnits:St,anchorYUnits:Ut,crossOrigin:"anonymous",rotation:0,scale:Ye(Kt),size:Kt,src:ut}),ie="NO_IMAGE",Zt=new h.A({color:it,width:1}),ne=new h.A({color:[51,51,51,1],width:2}),fe=new u.A({font:"bold 16px Helvetica",fill:lt,stroke:ne,scale:.8}),jt=new r.Ay({fill:lt,image:Tt,text:fe,stroke:Zt,zIndex:0}),ve=[jt]}(),this.dataProjection=(0,U.Jt)("EPSG:4326"),this.defaultStyle_=at.defaultStyle?at.defaultStyle:ve,this.extractStyles_=void 0===at.extractStyles||at.extractStyles,this.writeStyles_=void 0===at.writeStyles||at.writeStyles,this.sharedStyles_={},this.showPointNames_=void 0===at.showPointNames||at.showPointNames,this.crossOrigin_=void 0!==at.crossOrigin?at.crossOrigin:"anonymous",this.iconUrlFunction_=at.iconUrlFunction?at.iconUrlFunction:ei,this.supportedMediaTypes=["application/vnd.google-earth.kml+xml"]}readDocumentOrFolder_(at,ct){const pt=(0,a.Dm)(P,{Document:(0,a.Vh)(this.readDocumentOrFolder_,this),Folder:(0,a.Vh)(this.readDocumentOrFolder_,this),Placemark:(0,a.VT)(this.readPlacemark_,this),Style:this.readSharedStyle_.bind(this),StyleMap:this.readSharedStyleMap_.bind(this)}),Ht=(0,a.eY)([],pt,at,ct,this);if(Ht)return Ht}readPlacemark_(at,ct){const pt=(0,a.eY)({geometry:null},T,at,ct,this);if(!pt)return;const Ht=new V.A,Pe=at.getAttribute("id");null!==Pe&&Ht.setId(Pe);const ze=pt.geometry;if(ze&&(0,o.hX)(ze,!1,ct[0]),Ht.setGeometry(ze),delete pt.geometry,this.extractStyles_){const mi=function Ue(le,at,ct,pt,Ht){return function(Pe,we){let ze=Ht,Xe="",li=[];if(ze){const $i=Pe.getGeometry();if($i)if($i instanceof $.A)li=$i.getGeometriesArrayRecursive().filter(function(ln){const xn=ln.getType();return"Point"===xn||"MultiPoint"===xn}),ze=li.length>0;else{const ln=$i.getType();ze="Point"===ln||"MultiPoint"===ln}}ze&&(Xe=Pe.get("name"),ze=ze&&!!Xe,ze&&/&[^&]+;/.test(Xe)&&(pi||(pi=document.createElement("textarea")),pi.innerHTML=Xe,Xe=pi.value));let mi=ct;if(le?mi=le:at&&(mi=Oi(at,ct,pt)),ze){const $i=function Ui(le,at){const ct=[0,0];let pt="start";const Ht=le.getImage();if(Ht){const ze=Ht.getSize();if(ze&&2==ze.length){const Xe=Ht.getScaleArray(),li=Ht.getAnchor();ct[0]=Xe[0]*(ze[0]-li[0]),ct[1]=Xe[1]*(ze[1]/2-li[1]),pt="left"}}let Pe=le.getText();return Pe?(Pe=Pe.clone(),Pe.setFont(Pe.getFont()||fe.getFont()),Pe.setScale(Pe.getScale()||fe.getScale()),Pe.setFill(Pe.getFill()||fe.getFill()),Pe.setStroke(Pe.getStroke()||ne)):Pe=fe.clone(),Pe.setText(at),Pe.setOffsetX(ct[0]),Pe.setOffsetY(ct[1]),Pe.setTextAlign(pt),new r.Ay({image:Ht,text:Pe})}(mi[0],Xe);return li.length>0?($i.setGeometry(new $.A(li)),[$i,new r.Ay({geometry:mi[0].getGeometry(),image:null,fill:mi[0].getFill(),stroke:mi[0].getStroke(),text:null})].concat(mi.slice(1))):$i}return mi}}(pt.Style,pt.styleUrl,this.defaultStyle_,this.sharedStyles_,this.showPointNames_);Ht.setStyle(mi)}return delete pt.Style,Ht.setProperties(pt,!0),Ht}readSharedStyle_(at,ct){const pt=at.getAttribute("id");if(null!==pt){const Ht=xs.call(this,at,ct);if(Ht){let Pe,we=at.baseURI;(!we||"about:blank"==we)&&(we=window.location.href),Pe=we?new URL("#"+pt,we).href:"#"+pt,this.sharedStyles_[Pe]=Ht}}}readSharedStyleMap_(at,ct){const pt=at.getAttribute("id");if(null===pt)return;const Ht=Pt.call(this,at,ct);if(!Ht)return;let Pe,we=at.baseURI;(!we||"about:blank"==we)&&(we=window.location.href),Pe=we?new URL("#"+pt,we).href:"#"+pt,this.sharedStyles_[Pe]=Ht}readFeatureFromNode(at,ct){return P.includes(at.namespaceURI)&&this.readPlacemark_(at,[this.getReadOptions(at,ct)])||null}readFeaturesFromNode(at,ct){if(!P.includes(at.namespaceURI))return[];let pt;const Ht=at.localName;if("Document"==Ht||"Folder"==Ht)return pt=this.readDocumentOrFolder_(at,[this.getReadOptions(at,ct)]),pt||[];if("Placemark"==Ht){const Pe=this.readPlacemark_(at,[this.getReadOptions(at,ct)]);return Pe?[Pe]:[]}if("kml"==Ht){pt=[];for(let Pe=at.firstElementChild;Pe;Pe=Pe.nextElementSibling){const we=this.readFeaturesFromNode(Pe,ct);we&&(0,g.X$)(pt,we)}return pt}return[]}readName(at){if(at){if("string"==typeof at){const ct=(0,a.qg)(at);return this.readNameFromDocument(ct)}return(0,a.wz)(at)?this.readNameFromDocument(at):this.readNameFromNode(at)}}readNameFromDocument(at){for(let ct=at.firstChild;ct;ct=ct.nextSibling)if(ct.nodeType==Node.ELEMENT_NODE){const pt=this.readNameFromNode(ct);if(pt)return pt}}readNameFromNode(at){for(let ct=at.firstElementChild;ct;ct=ct.nextElementSibling)if(P.includes(ct.namespaceURI)&&"name"==ct.localName)return(0,w.E3)(ct);for(let ct=at.firstElementChild;ct;ct=ct.nextElementSibling){const pt=ct.localName;if(P.includes(ct.namespaceURI)&&("Document"==pt||"Folder"==pt||"Placemark"==pt||"kml"==pt)){const Ht=this.readNameFromNode(ct);if(Ht)return Ht}}}readNetworkLinks(at){const ct=[];if("string"==typeof at){const pt=(0,a.qg)(at);(0,g.X$)(ct,this.readNetworkLinksFromDocument(pt))}else(0,a.wz)(at)?(0,g.X$)(ct,this.readNetworkLinksFromDocument(at)):(0,g.X$)(ct,this.readNetworkLinksFromNode(at));return ct}readNetworkLinksFromDocument(at){const ct=[];for(let pt=at.firstChild;pt;pt=pt.nextSibling)pt.nodeType==Node.ELEMENT_NODE&&(0,g.X$)(ct,this.readNetworkLinksFromNode(pt));return ct}readNetworkLinksFromNode(at){const ct=[];for(let pt=at.firstElementChild;pt;pt=pt.nextElementSibling)if(P.includes(pt.namespaceURI)&&"NetworkLink"==pt.localName){const Ht=(0,a.eY)({},O,pt,[]);ct.push(Ht)}for(let pt=at.firstElementChild;pt;pt=pt.nextElementSibling){const Ht=pt.localName;P.includes(pt.namespaceURI)&&("Document"==Ht||"Folder"==Ht||"kml"==Ht)&&(0,g.X$)(ct,this.readNetworkLinksFromNode(pt))}return ct}readRegion(at){const ct=[];if("string"==typeof at){const pt=(0,a.qg)(at);(0,g.X$)(ct,this.readRegionFromDocument(pt))}else(0,a.wz)(at)?(0,g.X$)(ct,this.readRegionFromDocument(at)):(0,g.X$)(ct,this.readRegionFromNode(at));return ct}readRegionFromDocument(at){const ct=[];for(let pt=at.firstChild;pt;pt=pt.nextSibling)pt.nodeType==Node.ELEMENT_NODE&&(0,g.X$)(ct,this.readRegionFromNode(pt));return ct}readRegionFromNode(at){const ct=[];for(let pt=at.firstElementChild;pt;pt=pt.nextElementSibling)if(P.includes(pt.namespaceURI)&&"Region"==pt.localName){const Ht=(0,a.eY)({},M,pt,[]);ct.push(Ht)}for(let pt=at.firstElementChild;pt;pt=pt.nextElementSibling){const Ht=pt.localName;P.includes(pt.namespaceURI)&&("Document"==Ht||"Folder"==Ht||"kml"==Ht)&&(0,g.X$)(ct,this.readRegionFromNode(pt))}return ct}readCamera(at){const ct=[];if("string"==typeof at){const pt=(0,a.qg)(at);(0,g.X$)(ct,this.readCameraFromDocument(pt))}else(0,a.wz)(at)?(0,g.X$)(ct,this.readCameraFromDocument(at)):(0,g.X$)(ct,this.readCameraFromNode(at));return ct}readCameraFromDocument(at){const ct=[];for(let pt=at.firstChild;pt;pt=pt.nextSibling)pt.nodeType===Node.ELEMENT_NODE&&(0,g.X$)(ct,this.readCameraFromNode(pt));return ct}readCameraFromNode(at){const ct=[];for(let pt=at.firstElementChild;pt;pt=pt.nextElementSibling)if(P.includes(pt.namespaceURI)&&"Camera"===pt.localName){const Ht=(0,a.eY)({},A,pt,[]);ct.push(Ht)}for(let pt=at.firstElementChild;pt;pt=pt.nextElementSibling){const Ht=pt.localName;P.includes(pt.namespaceURI)&&("Document"===Ht||"Folder"===Ht||"Placemark"===Ht||"kml"===Ht)&&(0,g.X$)(ct,this.readCameraFromNode(pt))}return ct}writeFeaturesNode(at,ct){ct=this.adaptOptions(ct);const pt=(0,a.qq)(P[4],"kml"),Ht="http://www.w3.org/2000/xmlns/";pt.setAttributeNS(Ht,"xmlns:gx",I[0]),pt.setAttributeNS(Ht,"xmlns:xsi",a.pF),pt.setAttributeNS(a.pF,"xsi:schemaLocation","http://www.opengis.net/kml/2.2 https://developers.google.com/kml/schema/kml22gx.xsd");const Pe={node:pt},we={};at.length>1?we.Document=at:1==at.length&&(we.Placemark=at[0]);const ze=D[pt.namespaceURI],Xe=(0,a.Gl)(we,ze);return(0,a.NQ)(Pe,H,a.OL,Xe,[ct],ze,this),pt}}},9422:(ce,gt,c)=>{"use strict";c.d(gt,{A:()=>C});var V=c(3777),K=c(4249),$=c(5078),Z=c(2879),L=c(4367),b=c(1763),B=c(8654),F=c(4157),E=c(206),p=c(2386),_=c(9325),h=c(3834);function u(y,v,U){if(3===y){const w={keys:[],values:[],features:[]},z=U.readVarint()+U.pos;U.readFields(o,w,z),w.length=w.features.length,w.length&&(v[w.name]=w)}}function o(y,v,U){if(15===y)v.version=U.readVarint();else if(1===y)v.name=U.readString();else if(5===y)v.extent=U.readVarint();else if(2===y)v.features.push(U.pos);else if(3===y)v.keys.push(U.readString());else if(4===y){let w=null;const z=U.readVarint()+U.pos;for(;U.pos<z;)w=1==(y=U.readVarint()>>3)?U.readString():2===y?U.readFloat():3===y?U.readDouble():4===y?U.readVarint64():5===y?U.readVarint():6===y?U.readSVarint():7===y?U.readBoolean():null;v.values.push(w)}}function f(y,v,U){if(1==y)v.id=U.readVarint();else if(2==y){const w=U.readVarint()+U.pos;for(;U.pos<w;){const z=v.layer.keys[U.readVarint()],I=v.layer.values[U.readVarint()];v.properties[z]=I}}else 3==y?v.type=U.readVarint():4==y&&(v.geometry=U.pos)}function g(y,v,U){y.pos=v.features[U];const w=y.readVarint()+y.pos,z={layer:v,type:0,properties:{}};return y.readFields(f,z,w),z}const C=class r extends V.Ay{constructor(v){super(),v=v||{},this.dataProjection=new E.A({code:"",units:"tile-pixels"}),this.featureClass=v.featureClass?v.featureClass:p.Ay,this.geometryName_=v.geometryName,this.layerName_=v.layerName?v.layerName:"layer",this.layers_=v.layers?v.layers:null,this.idProperty_=v.idProperty,this.supportedMediaTypes=["application/vnd.mapbox-vector-tile","application/x-protobuf"]}readRawGeometry_(v,U,w,z){v.pos=U.geometry;const I=v.readVarint()+v.pos;let P=1,j=0,Y=0,T=0,O=0,R=0;for(;v.pos<I;){if(!j){const A=v.readVarint();P=7&A,j=A>>3}if(j--,1===P||2===P)Y+=v.readSVarint(),T+=v.readSVarint(),1===P&&O>R&&(z.push(O),R=O),w.push(Y,T),O+=2;else{if(7!==P)throw new Error("Invalid command found in the PBF");O>R&&(w.push(w[R],w[R+1]),O+=2)}}O>R&&(z.push(O),R=O)}createFeature_(v,U,w){const z=U.type;if(0===z)return null;let I;const P=U.properties;let j;this.idProperty_?(j=P[this.idProperty_],delete P[this.idProperty_]):j=U.id,P[this.layerName_]=U.layer.name;const Y=[],T=[];this.readRawGeometry_(v,U,Y,T);const O=function a(y,v){let U;return 1===y?U=1===v?"Point":"MultiPoint":2===y?U=1===v?"LineString":"MultiLineString":3===y&&(U="Polygon"),U}(z,T.length);if(this.featureClass===p.Ay)I=new this.featureClass(O,Y,T,2,P,j),I.transform(w.dataProjection);else{let R;if("Polygon"==O){const D=(0,h.yJ)(Y,T);R=D.length>1?new L.A(Y,"XY",D):new F.Ay(Y,"XY",T)}else R="Point"===O?new B.A(Y,"XY"):"LineString"===O?new K.A(Y,"XY"):"MultiPoint"===O?new Z.A(Y,"XY"):"MultiLineString"===O?new $.A(Y,"XY",T):null;I=new(0,this.featureClass),this.geometryName_&&I.setGeometryName(this.geometryName_);const M=(0,V.hX)(R,!1,w);I.setGeometry(M),void 0!==j&&I.setId(j),I.setProperties(P,!0)}return I}getType(){return"arraybuffer"}readFeatures(v,U){const w=this.layers_;U=this.adaptOptions(U);const z=(0,_.Jt)(U.dataProjection);z.setWorldExtent(U.extent),U.dataProjection=z;const I=new b(v),P=I.readFields(u,{}),j=[];for(const Y in P){if(w&&!w.includes(Y))continue;const T=P[Y];z.setExtent(T?[0,0,T.extent,T.extent]:null);for(let R=0,A=T.length;R<A;++R){const M=g(I,T,R),D=this.createFeature_(I,M,U);null!==D&&j.push(D)}}return j}readProjection(v){return this.dataProjection}setLayers(v){this.layers_=v}}},4628:(ce,gt,c)=>{"use strict";c.d(gt,{E3:()=>E,Gc:()=>_,Ko:()=>r,P9:()=>b,Vf:()=>K,Z3:()=>p,_X:()=>F,e4:()=>L,gC:()=>$,uB:()=>o,yg:()=>B});var V=c(3566);function K(f){return $((0,V.mT)(f,!1))}function $(f){const g=/^\s*(true|1)|(false|0)\s*$/.exec(f);if(g)return void 0!==g[1]||!1}function L(f){return b((0,V.mT)(f,!1))}function b(f){const g=/^\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)\s*$/i.exec(f);if(g)return parseFloat(g[1])}function B(f){return F((0,V.mT)(f,!1))}function F(f){const g=/^\s*(\d+)\s*$/.exec(f);if(g)return parseInt(g[1],10)}function E(f){return(0,V.mT)(f,!1).trim()}function p(f,g){o(f,g?"1":"0")}function _(f,g){f.appendChild((0,V.YE)().createCDATASection(g))}function r(f,g){const a=g.toPrecision();f.appendChild((0,V.YE)().createTextNode(a))}function o(f,g){f.appendChild((0,V.YE)().createTextNode(g))}},1766:(ce,gt,c)=>{"use strict";c.d(gt,{B4:()=>L,W8:()=>$,hq:()=>b,rT:()=>K,tV:()=>Z});var V=c(2058);function K(){return!0}function $(){return!1}function Z(){}function L(B){let E,p,_,F=!1;return function(){const h=Array.prototype.slice.call(arguments);return(!F||this!==_||!(0,V.aI)(h,p))&&(F=!0,_=this,p=h,E=B.apply(this,arguments)),E}}function b(B){return function F(){let E;try{E=B()}catch(p){return Promise.reject(p)}return E instanceof Promise?E:Promise.resolve(E)}()}},5998:(ce,gt,c)=>{"use strict";c.d(gt,{A:()=>p});var V=c(9568),K=c(2383),$=c(1983),Z=c(8507),L=c(9325),b=c(1766),B=c(9662);const F=(0,$.vt)(),p=class E extends V.A{constructor(){super(),this.extent_=(0,Z.S5)(),this.extentRevision_=-1,this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=0,this.simplifyTransformedInternal=(0,b.B4)((h,r,u)=>{if(!u)return this.getSimplifiedGeometry(r);const o=this.clone();return o.applyTransform(u),o.getSimplifiedGeometry(r)})}simplifyTransformed(h,r){return this.simplifyTransformedInternal(this.getRevision(),h,r)}clone(){return(0,K.b0)()}closestPointXY(h,r,u,o){return(0,K.b0)()}containsXY(h,r){const u=this.getClosestPoint([h,r]);return u[0]===h&&u[1]===r}getClosestPoint(h,r){return this.closestPointXY(h[0],h[1],r=r||[NaN,NaN],1/0),r}intersectsCoordinate(h){return this.containsXY(h[0],h[1])}computeExtent(h){return(0,K.b0)()}getExtent(h){if(this.extentRevision_!=this.getRevision()){const r=this.computeExtent(this.extent_);(isNaN(r[0])||isNaN(r[1]))&&(0,Z.aZ)(r),this.extentRevision_=this.getRevision()}return(0,Z.$u)(this.extent_,h)}rotate(h,r){(0,K.b0)()}scale(h,r,u){(0,K.b0)()}simplify(h){return this.getSimplifiedGeometry(h*h)}getSimplifiedGeometry(h){return(0,K.b0)()}getType(){return(0,K.b0)()}applyTransform(h){(0,K.b0)()}intersectsExtent(h){return(0,K.b0)()}translate(h,r){(0,K.b0)()}transform(h,r){const u=(0,L.Jt)(h),o="tile-pixels"==u.getUnits()?function(f,g,a){const C=u.getExtent(),y=u.getWorldExtent(),v=(0,Z.Oq)(y)/(0,Z.Oq)(C);return(0,$.Zz)(F,y[0],y[3],v,-v,0,0,0),(0,B.Rc)(f,0,f.length,a,F,g),(0,L.RG)(u,r)(f,g,a)}:(0,L.RG)(u,r);return this.applyTransform(o),this}}},1434:(ce,gt,c)=>{"use strict";c.d(gt,{A:()=>B});var V=c(6621),K=c(5998),$=c(8507),Z=c(2614);class L extends K.A{constructor(E){super(),this.geometries_=E,this.changeEventsKeys_=[],this.listenGeometriesChange_()}unlistenGeometriesChange_(){this.changeEventsKeys_.forEach(Z.JH),this.changeEventsKeys_.length=0}listenGeometriesChange_(){const E=this.geometries_;for(let p=0,_=E.length;p<_;++p)this.changeEventsKeys_.push((0,Z.KT)(E[p],V.A.CHANGE,this.changed,this))}clone(){const E=new L(b(this.geometries_));return E.applyProperties(this),E}closestPointXY(E,p,_,h){if(h<(0,$.Ld)(this.getExtent(),E,p))return h;const r=this.geometries_;for(let u=0,o=r.length;u<o;++u)h=r[u].closestPointXY(E,p,_,h);return h}containsXY(E,p){const _=this.geometries_;for(let h=0,r=_.length;h<r;++h)if(_[h].containsXY(E,p))return!0;return!1}computeExtent(E){(0,$.aZ)(E);const p=this.geometries_;for(let _=0,h=p.length;_<h;++_)(0,$.X$)(E,p[_].getExtent());return E}getGeometries(){return b(this.geometries_)}getGeometriesArray(){return this.geometries_}getGeometriesArrayRecursive(){let E=[];const p=this.geometries_;for(let _=0,h=p.length;_<h;++_)p[_].getType()===this.getType()?E=E.concat(p[_].getGeometriesArrayRecursive()):E.push(p[_]);return E}getSimplifiedGeometry(E){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),E<0||0!==this.simplifiedGeometryMaxMinSquaredTolerance&&E<this.simplifiedGeometryMaxMinSquaredTolerance)return this;const p=[],_=this.geometries_;let h=!1;for(let r=0,u=_.length;r<u;++r){const o=_[r],f=o.getSimplifiedGeometry(E);p.push(f),f!==o&&(h=!0)}return h?new L(p):(this.simplifiedGeometryMaxMinSquaredTolerance=E,this)}getType(){return"GeometryCollection"}intersectsExtent(E){const p=this.geometries_;for(let _=0,h=p.length;_<h;++_)if(p[_].intersectsExtent(E))return!0;return!1}isEmpty(){return 0===this.geometries_.length}rotate(E,p){const _=this.geometries_;for(let h=0,r=_.length;h<r;++h)_[h].rotate(E,p);this.changed()}scale(E,p,_){_||(_=(0,$.q1)(this.getExtent()));const h=this.geometries_;for(let r=0,u=h.length;r<u;++r)h[r].scale(E,p,_);this.changed()}setGeometries(E){this.setGeometriesArray(b(E))}setGeometriesArray(E){this.unlistenGeometriesChange_(),this.geometries_=E,this.listenGeometriesChange_(),this.changed()}applyTransform(E){const p=this.geometries_;for(let _=0,h=p.length;_<h;++_)p[_].applyTransform(E);this.changed()}translate(E,p){const _=this.geometries_;for(let h=0,r=_.length;h<r;++h)_[h].translate(E,p);this.changed()}disposeInternal(){this.unlistenGeometriesChange_(),super.disposeInternal()}}function b(F){return F.map(E=>E.clone())}const B=L},4249:(ce,gt,c)=>{"use strict";c.d(gt,{A:()=>r});var V=c(1416),K=c(5721),$=c(8507),Z=c(5625),L=c(463),b=c(2058),B=c(3846),F=c(7697),E=c(9721),p=c(9542),_=c(7696);class h extends V.Ay{constructor(o,f){super(),this.flatMidpoint_=null,this.flatMidpointRevision_=-1,this.maxDelta_=-1,this.maxDeltaRevision_=-1,void 0===f||Array.isArray(o[0])?this.setCoordinates(o,f):this.setFlatCoordinates(f,o)}appendCoordinate(o){(0,b.X$)(this.flatCoordinates,o),this.changed()}clone(){const o=new h(this.flatCoordinates.slice(),this.layout);return o.applyProperties(this),o}closestPointXY(o,f,g,a){return a<(0,$.Ld)(this.getExtent(),o,f)?a:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt((0,K.MD)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),(0,K.n)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!1,o,f,g,a))}forEachSegment(o){return(0,B.j)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,o)}getCoordinateAtM(o,f){return"XYM"!=this.layout&&"XYZM"!=this.layout?null:(0,E.gr)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,o,f=void 0!==f&&f)}getCoordinates(){return(0,F.n2)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinateAt(o,f){return(0,E.SH)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,o,f,this.stride)}getLength(){return(0,_.k)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getFlatMidpoint(){return this.flatMidpointRevision_!=this.getRevision()&&(this.flatMidpoint_=this.getCoordinateAt(.5,this.flatMidpoint_??void 0),this.flatMidpointRevision_=this.getRevision()),this.flatMidpoint_}getSimplifiedGeometryInternal(o){const f=[];return f.length=(0,L.P4)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,o,f,0),new h(f,"XY")}getType(){return"LineString"}intersectsExtent(o){return(0,p.gp)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,o)}setCoordinates(o,f){this.setLayout(f,o,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=(0,Z.z2)(this.flatCoordinates,0,o,this.stride),this.changed()}}const r=h},5078:(ce,gt,c)=>{"use strict";c.d(gt,{A:()=>h});var V=c(4249),K=c(1416),$=c(5721),Z=c(8507),L=c(5625),b=c(463),B=c(2058),F=c(7697),E=c(9721),p=c(9542);class _ extends K.Ay{constructor(u,o,f){if(super(),this.ends_=[],this.maxDelta_=-1,this.maxDeltaRevision_=-1,Array.isArray(u[0]))this.setCoordinates(u,o);else if(void 0!==o&&f)this.setFlatCoordinates(o,u),this.ends_=f;else{const g=u,a=[],C=[];for(let v=0,U=g.length;v<U;++v)(0,B.X$)(a,g[v].getFlatCoordinates()),C.push(a.length);const y=0===g.length?this.getLayout():g[0].getLayout();this.setFlatCoordinates(y,a),this.ends_=C}}appendLineString(u){(0,B.X$)(this.flatCoordinates,u.getFlatCoordinates().slice()),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const u=new _(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return u.applyProperties(this),u}closestPointXY(u,o,f,g){return g<(0,Z.Ld)(this.getExtent(),u,o)?g:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt((0,$.HX)(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),(0,$.oW)(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!1,u,o,f,g))}getCoordinateAtM(u,o,f){return"XYM"!=this.layout&&"XYZM"!=this.layout||0===this.flatCoordinates.length?null:(0,E.L8)(this.flatCoordinates,0,this.ends_,this.stride,u,o=void 0!==o&&o,f=void 0!==f&&f)}getCoordinates(){return(0,F.cD)(this.flatCoordinates,0,this.ends_,this.stride)}getEnds(){return this.ends_}getLineString(u){return u<0||this.ends_.length<=u?null:new V.A(this.flatCoordinates.slice(0===u?0:this.ends_[u-1],this.ends_[u]),this.layout)}getLineStrings(){const u=this.flatCoordinates,o=this.ends_,f=this.layout,g=[];let a=0;for(let C=0,y=o.length;C<y;++C){const v=o[C],U=new V.A(u.slice(a,v),f);g.push(U),a=v}return g}getFlatMidpoints(){const u=[],o=this.flatCoordinates;let f=0;const g=this.ends_,a=this.stride;for(let C=0,y=g.length;C<y;++C){const v=g[C],U=(0,E.SH)(o,f,v,a,.5);(0,B.X$)(u,U),f=v}return u}getSimplifiedGeometryInternal(u){const o=[],f=[];return o.length=(0,b.AL)(this.flatCoordinates,0,this.ends_,this.stride,u,o,0,f),new _(o,"XY",f)}getType(){return"MultiLineString"}intersectsExtent(u){return(0,p.fB)(this.flatCoordinates,0,this.ends_,this.stride,u)}setCoordinates(u,o){this.setLayout(o,u,2),this.flatCoordinates||(this.flatCoordinates=[]);const f=(0,L.KG)(this.flatCoordinates,0,u,this.stride,this.ends_);this.flatCoordinates.length=0===f.length?0:f[f.length-1],this.changed()}}const h=_},2879:(ce,gt,c)=>{"use strict";c.d(gt,{A:()=>E});var V=c(8654),K=c(1416),$=c(8507),Z=c(5625),L=c(2058),b=c(7697),B=c(9973);class F extends K.Ay{constructor(_,h){super(),h&&!Array.isArray(_[0])?this.setFlatCoordinates(h,_):this.setCoordinates(_,h)}appendPoint(_){(0,L.X$)(this.flatCoordinates,_.getFlatCoordinates()),this.changed()}clone(){const _=new F(this.flatCoordinates.slice(),this.layout);return _.applyProperties(this),_}closestPointXY(_,h,r,u){if(u<(0,$.Ld)(this.getExtent(),_,h))return u;const o=this.flatCoordinates,f=this.stride;for(let g=0,a=o.length;g<a;g+=f){const C=(0,B.hG)(_,h,o[g],o[g+1]);if(C<u){u=C;for(let y=0;y<f;++y)r[y]=o[g+y];r.length=f}}return u}getCoordinates(){return(0,b.n2)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getPoint(_){return _<0||this.flatCoordinates.length/this.stride<=_?null:new V.A(this.flatCoordinates.slice(_*this.stride,(_+1)*this.stride),this.layout)}getPoints(){const _=this.flatCoordinates,h=this.layout,r=this.stride,u=[];for(let o=0,f=_.length;o<f;o+=r){const g=new V.A(_.slice(o,o+r),h);u.push(g)}return u}getType(){return"MultiPoint"}intersectsExtent(_){const h=this.flatCoordinates,r=this.stride;for(let u=0,o=h.length;u<o;u+=r)if((0,$.Rj)(_,h[u],h[u+1]))return!0;return!1}setCoordinates(_,h){this.setLayout(h,_,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=(0,Z.z2)(this.flatCoordinates,0,_,this.stride),this.changed()}}const E=F},4367:(ce,gt,c)=>{"use strict";c.d(gt,{A:()=>g});var V=c(2879),K=c(4157),$=c(1416),Z=c(5721),L=c(8507),b=c(5625),B=c(2058),F=c(2544),E=c(7697),p=c(9542),_=c(3834),h=c(2761),r=c(6281),u=c(9749),o=c(463);class f extends $.Ay{constructor(C,y,v){if(super(),this.endss_=[],this.flatInteriorPointsRevision_=-1,this.flatInteriorPoints_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,!v&&!Array.isArray(C[0])){const U=C,w=[],z=[];for(let I=0,P=U.length;I<P;++I){const j=U[I],Y=w.length,T=j.getEnds();for(let O=0,R=T.length;O<R;++O)T[O]+=Y;(0,B.X$)(w,j.getFlatCoordinates()),z.push(T)}y=0===U.length?this.getLayout():U[0].getLayout(),C=w,v=z}void 0!==y&&v?(this.setFlatCoordinates(y,C),this.endss_=v):this.setCoordinates(C,y)}appendPolygon(C){let y;if(this.flatCoordinates){const v=this.flatCoordinates.length;(0,B.X$)(this.flatCoordinates,C.getFlatCoordinates()),y=C.getEnds().slice();for(let U=0,w=y.length;U<w;++U)y[U]+=v}else this.flatCoordinates=C.getFlatCoordinates().slice(),y=C.getEnds().slice(),this.endss_.push();this.endss_.push(y),this.changed()}clone(){const C=this.endss_.length,y=new Array(C);for(let U=0;U<C;++U)y[U]=this.endss_[U].slice();const v=new f(this.flatCoordinates.slice(),this.layout,y);return v.applyProperties(this),v}closestPointXY(C,y,v,U){return U<(0,L.Ld)(this.getExtent(),C,y)?U:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt((0,Z.c)(this.flatCoordinates,0,this.endss_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),(0,Z.te)(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,this.maxDelta_,!0,C,y,v,U))}containsXY(C,y){return(0,u.Gd)(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,C,y)}getArea(){return(0,h.Cs)(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride)}getCoordinates(C){let y;return void 0!==C?(y=this.getOrientedFlatCoordinates().slice(),(0,_.NK)(y,0,this.endss_,this.stride,C)):y=this.flatCoordinates,(0,E.Dz)(y,0,this.endss_,this.stride)}getEndss(){return this.endss_}getFlatInteriorPoints(){if(this.flatInteriorPointsRevision_!=this.getRevision()){const C=(0,r.C)(this.flatCoordinates,0,this.endss_,this.stride);this.flatInteriorPoints_=(0,F.p)(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,C),this.flatInteriorPointsRevision_=this.getRevision()}return this.flatInteriorPoints_}getInteriorPoints(){return new V.A(this.getFlatInteriorPoints().slice(),"XYM")}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const C=this.flatCoordinates;(0,_.mb)(C,0,this.endss_,this.stride)?this.orientedFlatCoordinates_=C:(this.orientedFlatCoordinates_=C.slice(),this.orientedFlatCoordinates_.length=(0,_.NK)(this.orientedFlatCoordinates_,0,this.endss_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(C){const y=[],v=[];return y.length=(0,o.sx)(this.flatCoordinates,0,this.endss_,this.stride,Math.sqrt(C),y,0,v),new f(y,"XY",v)}getPolygon(C){if(C<0||this.endss_.length<=C)return null;let y;if(0===C)y=0;else{const w=this.endss_[C-1];y=w[w.length-1]}const v=this.endss_[C].slice(),U=v[v.length-1];if(0!==y)for(let w=0,z=v.length;w<z;++w)v[w]-=y;return new K.Ay(this.flatCoordinates.slice(y,U),this.layout,v)}getPolygons(){const C=this.layout,y=this.flatCoordinates,v=this.endss_,U=[];let w=0;for(let z=0,I=v.length;z<I;++z){const P=v[z].slice(),j=P[P.length-1];if(0!==w)for(let T=0,O=P.length;T<O;++T)P[T]-=w;const Y=new K.Ay(y.slice(w,j),C,P);U.push(Y),w=j}return U}getType(){return"MultiPolygon"}intersectsExtent(C){return(0,p.Wp)(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,C)}setCoordinates(C,y){this.setLayout(y,C,3),this.flatCoordinates||(this.flatCoordinates=[]);const v=(0,b.d6)(this.flatCoordinates,0,C,this.stride,this.endss_);if(0===v.length)this.flatCoordinates.length=0;else{const U=v[v.length-1];this.flatCoordinates.length=0===U.length?0:U[U.length-1]}this.changed()}}const g=f},8654:(ce,gt,c)=>{"use strict";c.d(gt,{A:()=>b});var V=c(1416),K=c(8507),$=c(5625),Z=c(9973);class L extends V.Ay{constructor(F,E){super(),this.setCoordinates(F,E)}clone(){const F=new L(this.flatCoordinates.slice(),this.layout);return F.applyProperties(this),F}closestPointXY(F,E,p,_){const h=this.flatCoordinates,r=(0,Z.hG)(F,E,h[0],h[1]);if(r<_){const u=this.stride;for(let o=0;o<u;++o)p[o]=h[o];return p.length=u,r}return _}getCoordinates(){return this.flatCoordinates.slice()}computeExtent(F){return(0,K.dP)(this.flatCoordinates,F)}getType(){return"Point"}intersectsExtent(F){return(0,K.Rj)(F,this.flatCoordinates[0],this.flatCoordinates[1])}setCoordinates(F,E){this.setLayout(E,F,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=(0,$._n)(this.flatCoordinates,0,F,this.stride),this.changed()}}const b=L},4157:(ce,gt,c)=>{"use strict";c.d(gt,{Ay:()=>g,VY:()=>C});var V=c(1416),K=c(5721),$=c(8507),Z=c(5625),L=c(463),b=c(7697),B=c(2761);class F extends V.Ay{constructor(w,z){super(),this.maxDelta_=-1,this.maxDeltaRevision_=-1,void 0===z||Array.isArray(w[0])?this.setCoordinates(w,z):this.setFlatCoordinates(z,w)}clone(){return new F(this.flatCoordinates.slice(),this.layout)}closestPointXY(w,z,I,P){return P<(0,$.Ld)(this.getExtent(),w,z)?P:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt((0,K.MD)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),(0,K.n)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,w,z,I,P))}getArea(){return(0,B.eN)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinates(){return(0,b.n2)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getSimplifiedGeometryInternal(w){const z=[];return z.length=(0,L.P4)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,w,z,0),new F(z,"XY")}getType(){return"LinearRing"}intersectsExtent(w){return!1}setCoordinates(w,z){this.setLayout(z,w,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=(0,Z.z2)(this.flatCoordinates,0,w,this.stride),this.changed()}}const E=F;var p=c(8654),_=c(2058),h=c(2544),r=c(9542),u=c(3834),o=c(9749);class f extends V.Ay{constructor(w,z,I){super(),this.ends_=[],this.flatInteriorPointRevision_=-1,this.flatInteriorPoint_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,void 0!==z&&I?(this.setFlatCoordinates(z,w),this.ends_=I):this.setCoordinates(w,z)}appendLinearRing(w){this.flatCoordinates?(0,_.X$)(this.flatCoordinates,w.getFlatCoordinates()):this.flatCoordinates=w.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const w=new f(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return w.applyProperties(this),w}closestPointXY(w,z,I,P){return P<(0,$.Ld)(this.getExtent(),w,z)?P:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt((0,K.HX)(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),(0,K.oW)(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,w,z,I,P))}containsXY(w,z){return(0,o.zb)(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,w,z)}getArea(){return(0,B.PK)(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)}getCoordinates(w){let z;return void 0!==w?(z=this.getOrientedFlatCoordinates().slice(),(0,u.ug)(z,0,this.ends_,this.stride,w)):z=this.flatCoordinates,(0,b.cD)(z,0,this.ends_,this.stride)}getEnds(){return this.ends_}getFlatInteriorPoint(){if(this.flatInteriorPointRevision_!=this.getRevision()){const w=(0,$.q1)(this.getExtent());this.flatInteriorPoint_=(0,h.J)(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,w,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_}getInteriorPoint(){return new p.A(this.getFlatInteriorPoint(),"XYM")}getLinearRingCount(){return this.ends_.length}getLinearRing(w){return w<0||this.ends_.length<=w?null:new E(this.flatCoordinates.slice(0===w?0:this.ends_[w-1],this.ends_[w]),this.layout)}getLinearRings(){const w=this.layout,z=this.flatCoordinates,I=this.ends_,P=[];let j=0;for(let Y=0,T=I.length;Y<T;++Y){const O=I[Y],R=new E(z.slice(j,O),w);P.push(R),j=O}return P}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const w=this.flatCoordinates;(0,u.PA)(w,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=w:(this.orientedFlatCoordinates_=w.slice(),this.orientedFlatCoordinates_.length=(0,u.ug)(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(w){const z=[],I=[];return z.length=(0,L.Hg)(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(w),z,0,I),new f(z,"XY",I)}getType(){return"Polygon"}intersectsExtent(w){return(0,r.HT)(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,w)}setCoordinates(w,z){this.setLayout(z,w,2),this.flatCoordinates||(this.flatCoordinates=[]);const I=(0,Z.KG)(this.flatCoordinates,0,w,this.stride,this.ends_);this.flatCoordinates.length=0===I.length?0:I[I.length-1],this.changed()}}const g=f;function C(U){if((0,$.Im)(U))throw new Error("Cannot create polygon from empty extent");const w=U[0],z=U[1],I=U[2],P=U[3],j=[w,z,w,P,I,P,I,z,w,z];return new f(j,"XY",[j.length])}},1416:(ce,gt,c)=>{"use strict";c.d(gt,{Ay:()=>E,p0:()=>b,v7:()=>F});var V=c(5998),K=c(2383),$=c(8507),Z=c(9662);function b(p){let _;return 2==p?_="XY":3==p?_="XYZ":4==p&&(_="XYZM"),_}function B(p){let _;return"XY"==p?_=2:"XYZ"==p||"XYM"==p?_=3:"XYZM"==p&&(_=4),_}function F(p,_,h){const r=p.getFlatCoordinates();if(!r)return null;const u=p.getStride();return(0,Z.Rc)(r,0,r.length,u,_,h)}const E=class L extends V.A{constructor(){super(),this.layout="XY",this.stride=2}computeExtent(_){return(0,$.Vy)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,_)}getCoordinates(){return(0,K.b0)()}getFirstCoordinate(){return this.flatCoordinates.slice(0,this.stride)}getFlatCoordinates(){return this.flatCoordinates}getLastCoordinate(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)}getLayout(){return this.layout}getSimplifiedGeometry(_){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),_<0||0!==this.simplifiedGeometryMaxMinSquaredTolerance&&_<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;const h=this.getSimplifiedGeometryInternal(_);return h.getFlatCoordinates().length<this.flatCoordinates.length?h:(this.simplifiedGeometryMaxMinSquaredTolerance=_,this)}getSimplifiedGeometryInternal(_){return this}getStride(){return this.stride}setFlatCoordinates(_,h){this.stride=B(_),this.layout=_,this.flatCoordinates=h}setCoordinates(_,h){(0,K.b0)()}setLayout(_,h,r){let u;if(_)u=B(_);else{for(let o=0;o<r;++o){if(0===h.length)return this.layout="XY",void(this.stride=2);h=h[0]}u=h.length,_=b(u)}this.layout=_,this.stride=u}applyTransform(_){this.flatCoordinates&&(_(this.flatCoordinates,this.flatCoordinates,this.stride),this.changed())}rotate(_,h){const r=this.getFlatCoordinates();if(r){const u=this.getStride();(0,Z.e$)(r,0,r.length,u,_,h,r),this.changed()}}scale(_,h,r){void 0===h&&(h=_),r||(r=(0,$.q1)(this.getExtent()));const u=this.getFlatCoordinates();if(u){const o=this.getStride();(0,Z.hs)(u,0,u.length,o,_,h,r,u),this.changed()}}translate(_,h){const r=this.getFlatCoordinates();if(r){const u=this.getStride();(0,Z.Tl)(r,0,r.length,u,_,h,r),this.changed()}}}},2761:(ce,gt,c)=>{"use strict";function V(Z,L,b,B){let F=0,E=Z[b-B],p=Z[b-B+1];for(;L<b;L+=B){const _=Z[L],h=Z[L+1];F+=p*_-E*h,E=_,p=h}return F/2}function K(Z,L,b,B){let F=0;for(let E=0,p=b.length;E<p;++E){const _=b[E];F+=V(Z,L,_,B),L=_}return F}function $(Z,L,b,B){let F=0;for(let E=0,p=b.length;E<p;++E){const _=b[E];F+=K(Z,L,_,B),L=_[_.length-1]}return F}c.d(gt,{Cs:()=>$,PK:()=>K,eN:()=>V})},6281:(ce,gt,c)=>{"use strict";c.d(gt,{C:()=>K});var V=c(8507);function K($,Z,L,b){const B=[];let F=(0,V.S5)();for(let E=0,p=L.length;E<p;++E){const _=L[E];F=(0,V.Vy)($,Z,_[0],b),B.push((F[0]+F[2])/2,(F[1]+F[3])/2),Z=_[_.length-1]}return B}},5721:(ce,gt,c)=>{"use strict";c.d(gt,{HX:()=>Z,MD:()=>$,c:()=>L,n:()=>b,oW:()=>B,te:()=>F});var V=c(9973);function K(E,p,_,h,r,u,o){const f=E[p],g=E[p+1],a=E[_]-f,C=E[_+1]-g;let y;if(0===a&&0===C)y=p;else{const v=((r-f)*a+(u-g)*C)/(a*a+C*C);if(v>1)y=_;else{if(v>0){for(let U=0;U<h;++U)o[U]=(0,V.Cc)(E[p+U],E[_+U],v);return void(o.length=h)}y=p}}for(let v=0;v<h;++v)o[v]=E[y+v];o.length=h}function $(E,p,_,h,r){let u=E[p],o=E[p+1];for(p+=h;p<_;p+=h){const f=E[p],g=E[p+1],a=(0,V.hG)(u,o,f,g);a>r&&(r=a),u=f,o=g}return r}function Z(E,p,_,h,r){for(let u=0,o=_.length;u<o;++u){const f=_[u];r=$(E,p,f,h,r),p=f}return r}function L(E,p,_,h,r){for(let u=0,o=_.length;u<o;++u){const f=_[u];r=Z(E,p,f,h,r),p=f[f.length-1]}return r}function b(E,p,_,h,r,u,o,f,g,a,C){if(p==_)return a;let y,v;if(0===r){if(v=(0,V.hG)(o,f,E[p],E[p+1]),v<a){for(y=0;y<h;++y)g[y]=E[p+y];return g.length=h,v}return a}C=C||[NaN,NaN];let U=p+h;for(;U<_;)if(K(E,U-h,U,h,o,f,C),v=(0,V.hG)(o,f,C[0],C[1]),v<a){for(a=v,y=0;y<h;++y)g[y]=C[y];g.length=h,U+=h}else U+=h*Math.max((Math.sqrt(v)-Math.sqrt(a))/r|0,1);if(u&&(K(E,_-h,p,h,o,f,C),v=(0,V.hG)(o,f,C[0],C[1]),v<a)){for(a=v,y=0;y<h;++y)g[y]=C[y];g.length=h}return a}function B(E,p,_,h,r,u,o,f,g,a,C){C=C||[NaN,NaN];for(let y=0,v=_.length;y<v;++y){const U=_[y];a=b(E,p,U,h,r,u,o,f,g,a,C),p=U}return a}function F(E,p,_,h,r,u,o,f,g,a,C){C=C||[NaN,NaN];for(let y=0,v=_.length;y<v;++y){const U=_[y];a=B(E,p,U,h,r,u,o,f,g,a,C),p=U[U.length-1]}return a}},9749:(ce,gt,c)=>{"use strict";c.d(gt,{Gd:()=>L,a_:()=>$,t7:()=>K,zb:()=>Z});var V=c(8507);function K(b,B,F,E,p){return!(0,V.sB)(p,function(h){return!$(b,B,F,E,h[0],h[1])})}function $(b,B,F,E,p,_){let h=0,r=b[F-E],u=b[F-E+1];for(;B<F;B+=E){const o=b[B],f=b[B+1];u<=_?f>_&&(o-r)*(_-u)-(p-r)*(f-u)>0&&h++:f<=_&&(o-r)*(_-u)-(p-r)*(f-u)<0&&h--,r=o,u=f}return 0!==h}function Z(b,B,F,E,p,_){if(0===F.length||!$(b,B,F[0],E,p,_))return!1;for(let h=1,r=F.length;h<r;++h)if($(b,F[h-1],F[h],E,p,_))return!1;return!0}function L(b,B,F,E,p,_){if(0===F.length)return!1;for(let h=0,r=F.length;h<r;++h){const u=F[h];if(Z(b,B,u,E,p,_))return!0;B=u[u.length-1]}return!1}},5625:(ce,gt,c)=>{"use strict";function V(L,b,B,F){for(let E=0,p=B.length;E<p;++E)L[b++]=B[E];return b}function K(L,b,B,F){for(let E=0,p=B.length;E<p;++E){const _=B[E];for(let h=0;h<F;++h)L[b++]=_[h]}return b}function $(L,b,B,F,E){E=E||[];let p=0;for(let _=0,h=B.length;_<h;++_){const r=K(L,b,B[_],F);E[p++]=r,b=r}return E.length=p,E}function Z(L,b,B,F,E){E=E||[];let p=0;for(let _=0,h=B.length;_<h;++_){const r=$(L,b,B[_],F,E[p]);0===r.length&&(r[0]=b),E[p++]=r,b=r[r.length-1]}return E.length=p,E}c.d(gt,{KG:()=>$,_n:()=>V,d6:()=>Z,z2:()=>K})},7697:(ce,gt,c)=>{"use strict";function V(Z,L,b,B,F){F=void 0!==F?F:[];let E=0;for(let p=L;p<b;p+=B)F[E++]=Z.slice(p,p+B);return F.length=E,F}function K(Z,L,b,B,F){F=void 0!==F?F:[];let E=0;for(let p=0,_=b.length;p<_;++p){const h=b[p];F[E++]=V(Z,L,h,B,F[E]),L=h}return F.length=E,F}function $(Z,L,b,B,F){F=void 0!==F?F:[];let E=0;for(let p=0,_=b.length;p<_;++p){const h=b[p];F[E++]=1===h.length&&h[0]===L?[]:K(Z,L,h,B,F[E]),L=h[h.length-1]}return F.length=E,F}c.d(gt,{Dz:()=>$,cD:()=>K,n2:()=>V})},2544:(ce,gt,c)=>{"use strict";c.d(gt,{J:()=>$,p:()=>Z});var V=c(2058),K=c(9749);function $(L,b,B,F,E,p,_){let h,r,u,o,f,g,a;const C=E[p+1],y=[];for(let w=0,z=B.length;w<z;++w){const I=B[w];for(o=L[I-F],g=L[I-F+1],h=b;h<I;h+=F)f=L[h],a=L[h+1],(C<=g&&a<=C||g<=C&&C<=a)&&(u=(C-g)/(a-g)*(f-o)+o,y.push(u)),o=f,g=a}let v=NaN,U=-1/0;for(y.sort(V.V_),o=y[0],h=1,r=y.length;h<r;++h){f=y[h];const w=Math.abs(f-o);w>U&&(u=(o+f)/2,(0,K.zb)(L,b,B,F,u,C)&&(v=u,U=w)),o=f}return isNaN(v)&&(v=E[p]),_?(_.push(v,C,U),_):[v,C,U]}function Z(L,b,B,F,E){let p=[];for(let _=0,h=B.length;_<h;++_){const r=B[_];p=$(L,b,r,F,E,2*_,p),b=r[r.length-1]}return p}},9721:(ce,gt,c)=>{"use strict";c.d(gt,{L8:()=>L,SH:()=>$,gr:()=>Z});var V=c(2058),K=c(9973);function $(b,B,F,E,p,_,h){let r,u;const o=(F-B)/E;if(1===o)r=B;else if(2===o)r=B,u=p;else if(0!==o){let f=b[B],g=b[B+1],a=0;const C=[0];for(let U=B+E;U<F;U+=E){const w=b[U],z=b[U+1];a+=Math.sqrt((w-f)*(w-f)+(z-g)*(z-g)),C.push(a),f=w,g=z}const y=p*a,v=(0,V.El)(C,y);v<0?(u=(y-C[-v-2])/(C[-v-1]-C[-v-2]),r=B+(-v-2)*E):r=B+v*E}h=h>1?h:2,_=_||new Array(h);for(let f=0;f<h;++f)_[f]=void 0===r?NaN:void 0===u?b[r+f]:(0,K.Cc)(b[r+f],b[r+E+f],u);return _}function Z(b,B,F,E,p,_){if(F==B)return null;let h;if(p<b[B+E-1])return _?(h=b.slice(B,B+E),h[E-1]=p,h):null;if(b[F-1]<p)return _?(h=b.slice(F-E,F),h[E-1]=p,h):null;if(p==b[B+E-1])return b.slice(B,B+E);let r=B/E,u=F/E;for(;r<u;){const a=r+u>>1;p<b[(a+1)*E-1]?u=a:r=a+1}const o=b[r*E-1];if(p==o)return b.slice((r-1)*E,(r-1)*E+E);const g=(p-o)/(b[(r+1)*E-1]-o);h=[];for(let a=0;a<E-1;++a)h.push((0,K.Cc)(b[(r-1)*E+a],b[r*E+a],g));return h.push(p),h}function L(b,B,F,E,p,_,h){if(h)return Z(b,B,F[F.length-1],E,p,_);let r;if(p<b[E-1])return _?(r=b.slice(0,E),r[E-1]=p,r):null;if(b[b.length-1]<p)return _?(r=b.slice(b.length-E),r[E-1]=p,r):null;for(let u=0,o=F.length;u<o;++u){const f=F[u];if(B!=f){if(p<b[B+E-1])return null;if(p<=b[f-1])return Z(b,B,f,E,p,!1);B=f}}return null}},9542:(ce,gt,c)=>{"use strict";c.d(gt,{HT:()=>B,Wp:()=>F,fB:()=>L,gp:()=>Z,sj:()=>b});var V=c(8507),K=c(3846),$=c(9749);function Z(E,p,_,h,r){const u=(0,V.R8)((0,V.S5)(),E,p,_,h);return!!(0,V.HY)(r,u)&&(!!((0,V.ms)(r,u)||u[0]>=r[0]&&u[2]<=r[2]||u[1]>=r[1]&&u[3]<=r[3])||(0,K.j)(E,p,_,h,function(o,f){return(0,V.Mx)(r,o,f)}))}function L(E,p,_,h,r){for(let u=0,o=_.length;u<o;++u){if(Z(E,p,_[u],h,r))return!0;p=_[u]}return!1}function b(E,p,_,h,r){return!!(Z(E,p,_,h,r)||(0,$.a_)(E,p,_,h,r[0],r[1])||(0,$.a_)(E,p,_,h,r[0],r[3])||(0,$.a_)(E,p,_,h,r[2],r[1])||(0,$.a_)(E,p,_,h,r[2],r[3]))}function B(E,p,_,h,r){if(!b(E,p,_[0],h,r))return!1;if(1===_.length)return!0;for(let u=1,o=_.length;u<o;++u)if((0,$.t7)(E,_[u-1],_[u],h,r)&&!Z(E,_[u-1],_[u],h,r))return!1;return!0}function F(E,p,_,h,r){for(let u=0,o=_.length;u<o;++u){const f=_[u];if(B(E,p,f,h,r))return!0;p=f[f.length-1]}return!1}},7696:(ce,gt,c)=>{"use strict";function V($,Z,L,b){let B=$[Z],F=$[Z+1],E=0;for(let p=Z+b;p<L;p+=b){const _=$[p],h=$[p+1];E+=Math.sqrt((_-B)*(_-B)+(h-F)*(h-F)),B=_,F=h}return E}c.d(gt,{k:()=>V})},3834:(ce,gt,c)=>{"use strict";function V(F,E,p,_){for(;E<p-_;){for(let h=0;h<_;++h){const r=F[E+h];F[E+h]=F[p-_+h],F[p-_+h]=r}E+=_,p-=_}}function K(F,E,p,_){let h=0,r=F[p-_],u=F[p-_+1];for(;E<p;E+=_){const o=F[E],f=F[E+1];h+=(o-r)*(f+u),r=o,u=f}return 0===h?void 0:h>0}function $(F,E,p,_,h){h=void 0!==h&&h;for(let r=0,u=p.length;r<u;++r){const o=p[r],f=K(F,E,o,_);if(0===r){if(h&&f||!h&&!f)return!1}else if(h&&!f||!h&&f)return!1;E=o}return!0}function Z(F,E,p,_,h){for(let r=0,u=p.length;r<u;++r){const o=p[r];if(!$(F,E,o,_,h))return!1;o.length&&(E=o[o.length-1])}return!0}function L(F,E,p,_,h){h=void 0!==h&&h;for(let r=0,u=p.length;r<u;++r){const o=p[r],f=K(F,E,o,_);(0===r?h&&f||!h&&!f:h&&!f||!h&&f)&&V(F,E,o,_),E=o}return E}function b(F,E,p,_,h){for(let r=0,u=p.length;r<u;++r)E=L(F,E,p[r],_,h);return E}function B(F,E){const p=[];let r,_=0,h=0;for(let u=0,o=E.length;u<o;++u){const f=E[u],g=K(F,_,f,2);if(void 0===r&&(r=g),g===r)p.push(E.slice(h,u+1));else{if(0===p.length)continue;p[p.length-1].push(E[h])}h=u+1,_=f}return p}c.d(gt,{yJ:()=>B,PA:()=>$,mb:()=>Z,ug:()=>L,NK:()=>b})},3846:(ce,gt,c)=>{"use strict";function V(K,$,Z,L,b){let B;for($+=L;$<Z;$+=L)if(B=b(K.slice($-L,$),K.slice($,$+L)),B)return B;return!1}c.d(gt,{j:()=>V})},463:(ce,gt,c)=>{"use strict";c.d(gt,{AL:()=>Z,Hg:()=>E,P4:()=>$,n$:()=>B,sx:()=>p});var V=c(9973);function $(_,h,r,u,o,f,g){const a=(r-h)/u;if(a<3){for(;h<r;h+=u)f[g++]=_[h],f[g++]=_[h+1];return g}const C=new Array(a);C[0]=1,C[a-1]=1;const y=[h,r-u];let v=0;for(;y.length>0;){const U=y.pop(),w=y.pop();let z=0;const I=_[w],P=_[w+1],j=_[U],Y=_[U+1];for(let T=w+u;T<U;T+=u){const A=(0,V.Q1)(_[T],_[T+1],I,P,j,Y);A>z&&(v=T,z=A)}z>o&&(C[(v-h)/u]=1,w+u<v&&y.push(w,v),v+u<U&&y.push(v,U))}for(let U=0;U<a;++U)C[U]&&(f[g++]=_[h+U*u],f[g++]=_[h+U*u+1]);return g}function Z(_,h,r,u,o,f,g,a){for(let C=0,y=r.length;C<y;++C){const v=r[C];g=$(_,h,v,u,o,f,g),a.push(g),h=v}return g}function B(_,h){return h*Math.round(_/h)}function F(_,h,r,u,o,f,g){if(h==r)return g;let y,v,a=B(_[h],o),C=B(_[h+1],o);h+=u,f[g++]=a,f[g++]=C;do{if(y=B(_[h],o),v=B(_[h+1],o),(h+=u)==r)return f[g++]=y,f[g++]=v,g}while(y==a&&v==C);for(;h<r;){const U=B(_[h],o),w=B(_[h+1],o);if(h+=u,U==y&&w==v)continue;const z=y-a,I=v-C,P=U-a,j=w-C;z*j==I*P&&(z<0&&P<z||z==P||z>0&&P>z)&&(I<0&&j<I||I==j||I>0&&j>I)?(y=U,v=w):(f[g++]=y,f[g++]=v,a=y,C=v,y=U,v=w)}return f[g++]=y,f[g++]=v,g}function E(_,h,r,u,o,f,g,a){for(let C=0,y=r.length;C<y;++C){const v=r[C];g=F(_,h,v,u,o,f,g),a.push(g),h=v}return g}function p(_,h,r,u,o,f,g,a){for(let C=0,y=r.length;C<y;++C){const v=r[C],U=[];g=E(_,h,v,u,o,f,g,U),a.push(U),h=v[v.length-1]}return g}},9662:(ce,gt,c)=>{"use strict";function V(L,b,B,F,E,p){p=p||[];let _=0;for(let h=b;h<B;h+=F){const r=L[h],u=L[h+1];p[_++]=E[0]*r+E[2]*u+E[4],p[_++]=E[1]*r+E[3]*u+E[5]}return p&&p.length!=_&&(p.length=_),p}function K(L,b,B,F,E,p,_){_=_||[];const h=Math.cos(E),r=Math.sin(E),u=p[0],o=p[1];let f=0;for(let g=b;g<B;g+=F){const a=L[g]-u,C=L[g+1]-o;_[f++]=u+a*h-C*r,_[f++]=o+a*r+C*h;for(let y=g+2;y<g+F;++y)_[f++]=L[y]}return _&&_.length!=f&&(_.length=f),_}function $(L,b,B,F,E,p,_,h){h=h||[];const r=_[0],u=_[1];let o=0;for(let f=b;f<B;f+=F){const a=L[f+1]-u;h[o++]=r+E*(L[f]-r),h[o++]=u+p*a;for(let C=f+2;C<f+F;++C)h[o++]=L[C]}return h&&h.length!=o&&(h.length=o),h}function Z(L,b,B,F,E,p,_){_=_||[];let h=0;for(let r=b;r<B;r+=F){_[h++]=L[r]+E,_[h++]=L[r+1]+p;for(let u=r+2;u<r+F;++u)_[h++]=L[u]}return _&&_.length!=h&&(_.length=h),_}c.d(gt,{Rc:()=>V,Tl:()=>Z,e$:()=>K,hs:()=>$})},2531:(ce,gt,c)=>{"use strict";c.d(gt,{DT:()=>E,FT:()=>_,Wl:()=>F,XM:()=>p,_p:()=>K,cr:()=>B,ew:()=>b,j:()=>L,oF:()=>Z});const V=typeof navigator<"u"&&typeof navigator.userAgent<"u"?navigator.userAgent.toLowerCase():"",K=V.includes("firefox"),Z=V.includes("safari")&&!V.includes("chrom")&&(V.includes("version/15.4")||/cpu (os|iphone os) 15_4 like mac os x/.test(V)),L=V.includes("webkit")&&!V.includes("edge"),b=V.includes("macintosh"),B=typeof devicePixelRatio<"u"?devicePixelRatio:1,F=typeof WorkerGlobalScope<"u"&&typeof OffscreenCanvas<"u"&&self instanceof WorkerGlobalScope,E=typeof Image<"u"&&Image.prototype.decode,p="function"==typeof createImageBitmap,_=function(){let h=!1;try{const r=Object.defineProperty({},"passive",{get:function(){h=!0}});window.addEventListener("_",null,r),window.removeEventListener("_",null,r)}catch{}return h}()},8324:(ce,gt,c)=>{"use strict";c.d(gt,{A:()=>B});var V=c(9568),K=c(4860),$=c(2383),Z=c(5940),L=c(9973);const B=class b extends V.A{constructor(E){super(),this.background_=E.background;const p=Object.assign({},E);"object"==typeof E.properties&&(delete p.properties,Object.assign(p,E.properties)),p[K.A.OPACITY]=void 0!==E.opacity?E.opacity:1,(0,Z.v)("number"==typeof p[K.A.OPACITY],"Layer opacity must be a number"),p[K.A.VISIBLE]=void 0===E.visible||E.visible,p[K.A.Z_INDEX]=E.zIndex,p[K.A.MAX_RESOLUTION]=void 0!==E.maxResolution?E.maxResolution:1/0,p[K.A.MIN_RESOLUTION]=void 0!==E.minResolution?E.minResolution:0,p[K.A.MIN_ZOOM]=void 0!==E.minZoom?E.minZoom:-1/0,p[K.A.MAX_ZOOM]=void 0!==E.maxZoom?E.maxZoom:1/0,this.className_=void 0!==p.className?p.className:"ol-layer",delete p.className,this.setProperties(p),this.state_=null}getBackground(){return this.background_}getClassName(){return this.className_}getLayerState(E){const p=this.state_||{layer:this,managed:void 0===E||E},_=this.getZIndex();return p.opacity=(0,L.qE)(Math.round(100*this.getOpacity())/100,0,1),p.visible=this.getVisible(),p.extent=this.getExtent(),p.zIndex=void 0!==_||p.managed?_:1/0,p.maxResolution=this.getMaxResolution(),p.minResolution=Math.max(this.getMinResolution(),0),p.minZoom=this.getMinZoom(),p.maxZoom=this.getMaxZoom(),this.state_=p,p}getLayersArray(E){return(0,$.b0)()}getLayerStatesArray(E){return(0,$.b0)()}getExtent(){return this.get(K.A.EXTENT)}getMaxResolution(){return this.get(K.A.MAX_RESOLUTION)}getMinResolution(){return this.get(K.A.MIN_RESOLUTION)}getMinZoom(){return this.get(K.A.MIN_ZOOM)}getMaxZoom(){return this.get(K.A.MAX_ZOOM)}getOpacity(){return this.get(K.A.OPACITY)}getSourceState(){return(0,$.b0)()}getVisible(){return this.get(K.A.VISIBLE)}getZIndex(){return this.get(K.A.Z_INDEX)}setBackground(E){this.background_=E,this.changed()}setExtent(E){this.set(K.A.EXTENT,E)}setMaxResolution(E){this.set(K.A.MAX_RESOLUTION,E)}setMinResolution(E){this.set(K.A.MIN_RESOLUTION,E)}setMaxZoom(E){this.set(K.A.MAX_ZOOM,E)}setMinZoom(E){this.set(K.A.MIN_ZOOM,E)}setOpacity(E){(0,Z.v)("number"==typeof E,"Layer opacity must be a number"),this.set(K.A.OPACITY,E)}setVisible(E){this.set(K.A.VISIBLE,E)}setZIndex(E){this.set(K.A.Z_INDEX,E)}disposeInternal(){this.state_&&(this.state_.layer=null,this.state_=null),super.disposeInternal()}}},5715:(ce,gt,c)=>{"use strict";c.d(gt,{A:()=>$});var V=c(8052);const $=class K extends V.A{constructor(L){super(L=L||{})}}},1744:(ce,gt,c)=>{"use strict";c.d(gt,{A:()=>Z});var V=c(8052),K=c(6952);const Z=class $ extends V.A{constructor(b){b=b||{};const B=Object.assign({},b);delete B.preload,delete B.useInterimTilesOnError,super(B),this.setPreload(void 0!==b.preload?b.preload:0),this.setUseInterimTilesOnError(void 0===b.useInterimTilesOnError||b.useInterimTilesOnError)}getPreload(){return this.get(K.A.PRELOAD)}setPreload(b){this.set(K.A.PRELOAD,b)}getUseInterimTilesOnError(){return this.get(K.A.USE_INTERIM_TILES_ON_ERROR)}setUseInterimTilesOnError(b){this.set(K.A.USE_INTERIM_TILES_ON_ERROR,b)}getData(b){return super.getData(b)}}},7477:(ce,gt,c)=>{"use strict";c.d(gt,{A:()=>Yi});var V=c(8052),K=c(2593),$=c(9380),Z=c(221),L=c(1540),b=c(5804),B=c(4960),F=c(5409),E=c(730),p=c(9625),_=c(1962);function r(Ct,nt,ht){const It=(0,p.qg)(Ct,ht);if(!(0,p.ho)(nt,It.type)){const Pt=(0,p.go)(nt),dt=(0,p.go)(It.type);throw new Error(`Expected expression to be of type ${Pt}, got ${dt}`)}return u(It,ht)}function u(Ct,nt){if(Ct instanceof p._D){if(Ct.type===p.mE&&"string"==typeof Ct.value){const It=(0,_.sH)(Ct.value);return function(){return It}}return function(){return Ct.value}}const ht=Ct.operator;switch(ht){case p.ZD.Number:case p.ZD.String:case p.ZD.Coalesce:return function o(Ct,nt){const ht=Ct.operator,It=Ct.args.length,Pt=new Array(It);for(let dt=0;dt<It;++dt)Pt[dt]=u(Ct.args[dt],nt);switch(ht){case p.ZD.Coalesce:return dt=>{for(let ue=0;ue<It;++ue){const Ce=Pt[ue](dt);if(typeof Ce<"u"&&null!==Ce)return Ce}throw new Error("Expected one of the values to be non-null")};case p.ZD.Number:case p.ZD.String:return dt=>{for(let ue=0;ue<It;++ue){const Ce=Pt[ue](dt);if(typeof Ce===ht)return Ce}throw new Error(`Expected one of the values to be a ${ht}`)};default:throw new Error(`Unsupported assertion operator ${ht}`)}}(Ct,nt);case p.ZD.Get:case p.ZD.Var:return function f(Ct){const It=Ct.args[0].value;switch(Ct.operator){case p.ZD.Get:return Pt=>Pt.properties[It];case p.ZD.Var:return Pt=>Pt.variables[It];default:throw new Error(`Unsupported accessor operator ${Ct.operator}`)}}(Ct);case p.ZD.Id:return It=>It.featureId;case p.ZD.GeometryType:return It=>It.geometryType;case p.ZD.Concat:{const It=Ct.args.map(Pt=>u(Pt,nt));return Pt=>"".concat(...It.map(dt=>dt(Pt).toString()))}case p.ZD.Resolution:return It=>It.resolution;case p.ZD.Any:case p.ZD.All:case p.ZD.Between:case p.ZD.In:case p.ZD.Not:return function a(Ct,nt){const ht=Ct.operator,It=Ct.args.length,Pt=new Array(It);for(let dt=0;dt<It;++dt)Pt[dt]=u(Ct.args[dt],nt);switch(ht){case p.ZD.Any:return dt=>{for(let ue=0;ue<It;++ue)if(Pt[ue](dt))return!0;return!1};case p.ZD.All:return dt=>{for(let ue=0;ue<It;++ue)if(!Pt[ue](dt))return!1;return!0};case p.ZD.Between:return dt=>{const ue=Pt[0](dt),Ce=Pt[1](dt),He=Pt[2](dt);return ue>=Ce&&ue<=He};case p.ZD.In:return dt=>{const ue=Pt[0](dt);for(let Ce=1;Ce<It;++Ce)if(ue===Pt[Ce](dt))return!0;return!1};case p.ZD.Not:return dt=>!Pt[0](dt);default:throw new Error(`Unsupported logical operator ${ht}`)}}(Ct,nt);case p.ZD.Equal:case p.ZD.NotEqual:case p.ZD.LessThan:case p.ZD.LessThanOrEqualTo:case p.ZD.GreaterThan:case p.ZD.GreaterThanOrEqualTo:return function g(Ct,nt){const ht=Ct.operator,It=u(Ct.args[0],nt),Pt=u(Ct.args[1],nt);switch(ht){case p.ZD.Equal:return dt=>It(dt)===Pt(dt);case p.ZD.NotEqual:return dt=>It(dt)!==Pt(dt);case p.ZD.LessThan:return dt=>It(dt)<Pt(dt);case p.ZD.LessThanOrEqualTo:return dt=>It(dt)<=Pt(dt);case p.ZD.GreaterThan:return dt=>It(dt)>Pt(dt);case p.ZD.GreaterThanOrEqualTo:return dt=>It(dt)>=Pt(dt);default:throw new Error(`Unsupported comparison operator ${ht}`)}}(Ct,nt);case p.ZD.Multiply:case p.ZD.Divide:case p.ZD.Add:case p.ZD.Subtract:case p.ZD.Clamp:case p.ZD.Mod:case p.ZD.Pow:case p.ZD.Abs:case p.ZD.Floor:case p.ZD.Ceil:case p.ZD.Round:case p.ZD.Sin:case p.ZD.Cos:case p.ZD.Atan:case p.ZD.Sqrt:return function C(Ct,nt){const ht=Ct.operator,It=Ct.args.length,Pt=new Array(It);for(let dt=0;dt<It;++dt)Pt[dt]=u(Ct.args[dt],nt);switch(ht){case p.ZD.Multiply:return dt=>{let ue=1;for(let Ce=0;Ce<It;++Ce)ue*=Pt[Ce](dt);return ue};case p.ZD.Divide:return dt=>Pt[0](dt)/Pt[1](dt);case p.ZD.Add:return dt=>{let ue=0;for(let Ce=0;Ce<It;++Ce)ue+=Pt[Ce](dt);return ue};case p.ZD.Subtract:return dt=>Pt[0](dt)-Pt[1](dt);case p.ZD.Clamp:return dt=>{const ue=Pt[0](dt),Ce=Pt[1](dt);if(ue<Ce)return Ce;const He=Pt[2](dt);return ue>He?He:ue};case p.ZD.Mod:return dt=>Pt[0](dt)%Pt[1](dt);case p.ZD.Pow:return dt=>Math.pow(Pt[0](dt),Pt[1](dt));case p.ZD.Abs:return dt=>Math.abs(Pt[0](dt));case p.ZD.Floor:return dt=>Math.floor(Pt[0](dt));case p.ZD.Ceil:return dt=>Math.ceil(Pt[0](dt));case p.ZD.Round:return dt=>Math.round(Pt[0](dt));case p.ZD.Sin:return dt=>Math.sin(Pt[0](dt));case p.ZD.Cos:return dt=>Math.cos(Pt[0](dt));case p.ZD.Atan:return 2===It?dt=>Math.atan2(Pt[0](dt),Pt[1](dt)):dt=>Math.atan(Pt[0](dt));case p.ZD.Sqrt:return dt=>Math.sqrt(Pt[0](dt));default:throw new Error(`Unsupported numeric operator ${ht}`)}}(Ct,nt);case p.ZD.Case:return function y(Ct,nt){const ht=Ct.args.length,It=new Array(ht);for(let Pt=0;Pt<ht;++Pt)It[Pt]=u(Ct.args[Pt],nt);return Pt=>{for(let dt=0;dt<ht-1;dt+=2)if(It[dt](Pt))return It[dt+1](Pt);return It[ht-1](Pt)}}(Ct,nt);case p.ZD.Match:return function v(Ct,nt){const ht=Ct.args.length,It=new Array(ht);for(let Pt=0;Pt<ht;++Pt)It[Pt]=u(Ct.args[Pt],nt);return Pt=>{const dt=It[0](Pt);for(let ue=1;ue<ht;ue+=2)if(dt===It[ue](Pt))return It[ue+1](Pt);return It[ht-1](Pt)}}(Ct,nt);case p.ZD.Interpolate:return function U(Ct,nt){const ht=Ct.args.length,It=new Array(ht);for(let Pt=0;Pt<ht;++Pt)It[Pt]=u(Ct.args[Pt],nt);return Pt=>{const dt=It[0](Pt),ue=It[1](Pt);let Ce,He;for(let ke=2;ke<ht;ke+=2){const qe=It[ke](Pt);let Di=It[ke+1](Pt);const yi=Array.isArray(Di);if(yi&&(Di=(0,_.fu)(Di)),qe>=ue)return 2===ke?Di:yi?I(dt,ue,Ce,He,qe,Di):z(dt,ue,Ce,He,qe,Di);Ce=qe,He=Di}return He}}(Ct,nt);case p.ZD.ToString:return function w(Ct,nt){const ht=Ct.operator,It=Ct.args.length,Pt=new Array(It);for(let dt=0;dt<It;++dt)Pt[dt]=u(Ct.args[dt],nt);if(ht===p.ZD.ToString)return dt=>{const ue=Pt[0](dt);return Ct.args[0].type===p.mE?(0,_.dI)(ue):ue.toString()};throw new Error(`Unsupported convert operator ${ht}`)}(Ct,nt);default:throw new Error(`Unsupported operator ${ht}`)}}function z(Ct,nt,ht,It,Pt,dt){const ue=Pt-ht;if(0===ue)return It;const Ce=nt-ht;return It+(1===Ct?Ce/ue:(Math.pow(Ct,Ce)-1)/(Math.pow(Ct,ue)-1))*(dt-It)}function I(Ct,nt,ht,It,Pt,dt){if(Pt-ht==0)return It;const Ce=(0,_.eE)(It),He=(0,_.eE)(dt);let ke=He[2]-Ce[2];ke>180?ke-=360:ke<-180&&(ke+=360);const qe=[z(Ct,nt,ht,Ce[0],Pt,He[0]),z(Ct,nt,ht,Ce[1],Pt,He[1]),Ce[2]+z(Ct,nt,ht,0,Pt,ke),z(Ct,nt,ht,It[3],Pt,dt[3])];return(0,_.S8)((0,_.cD)(qe))}var P=c(9330),j=c(9270);function Y(Ct){return!0}function O(Ct){const nt=(0,p.SR)(),ht=Ct.length,It=new Array(ht);for(let ue=0;ue<ht;++ue)It[ue]=A(Ct[ue],nt);const Pt={variables:{},properties:{},resolution:NaN,featureId:null,geometryType:""},dt=new Array(ht);return function(ue,Ce){if(Pt.properties=ue.getPropertiesInternal(),Pt.resolution=Ce,nt.featureId){const ke=ue.getId();Pt.featureId=void 0!==ke?ke:null}let He=0;for(let ke=0;ke<ht;++ke){const qe=It[ke](Pt);qe&&(dt[He]=qe,He+=1)}return dt.length=He,dt}}function A(Ct,nt){const ht=M(Ct,"",nt),It=D(Ct,"",nt),Pt=function H(Ct,nt){const ht="text-",It=Ut(Ct,ht+"value",nt);if(!It)return null;const Pt=M(Ct,ht,nt),dt=M(Ct,ht+"background-",nt),ue=D(Ct,ht,nt),Ce=D(Ct,ht+"background-",nt),He=Ut(Ct,ht+"font",nt),ke=St(Ct,ht+"max-angle",nt),qe=St(Ct,ht+"offset-x",nt),Di=St(Ct,ht+"offset-y",nt),yi=ut(Ct,ht+"overflow",nt),Zn=Ut(Ct,ht+"placement",nt),Ti=St(Ct,ht+"repeat",nt),Ps=ge(Ct,ht+"scale",nt),Nn=ut(Ct,ht+"rotate-with-view",nt),Mn=St(Ct,ht+"rotation",nt),dn=Ut(Ct,ht+"align",nt),ur=Ut(Ct,ht+"justify",nt),qs=Ut(Ct,ht+"baseline",nt),Os=Ft(Ct,ht+"padding",nt),hs=Me(Ct,ht+"declutter-mode"),Vi=new E.A({declutterMode:hs});return function(Ci){if(Vi.setText(It(Ci)),Pt&&Vi.setFill(Pt(Ci)),dt&&Vi.setBackgroundFill(dt(Ci)),ue&&Vi.setStroke(ue(Ci)),Ce&&Vi.setBackgroundStroke(Ce(Ci)),He&&Vi.setFont(He(Ci)),ke&&Vi.setMaxAngle(ke(Ci)),qe&&Vi.setOffsetX(qe(Ci)),Di&&Vi.setOffsetY(Di(Ci)),yi&&Vi.setOverflow(yi(Ci)),Zn){const Ii=Zn(Ci);if("point"!==Ii&&"line"!==Ii)throw new Error("Expected point or line for text-placement");Vi.setPlacement(Ii)}if(Ti&&Vi.setRepeat(Ti(Ci)),Ps&&Vi.setScale(Ps(Ci)),Nn&&Vi.setRotateWithView(Nn(Ci)),Mn&&Vi.setRotation(Mn(Ci)),dn){const Ii=dn(Ci);if("left"!==Ii&&"center"!==Ii&&"right"!==Ii&&"end"!==Ii&&"start"!==Ii)throw new Error("Expected left, right, center, start, or end for text-align");Vi.setTextAlign(Ii)}if(ur){const Ii=ur(Ci);if("left"!==Ii&&"right"!==Ii&&"center"!==Ii)throw new Error("Expected left, right, or center for text-justify");Vi.setJustify(Ii)}if(qs){const Ii=qs(Ci);if("bottom"!==Ii&&"top"!==Ii&&"middle"!==Ii&&"alphabetic"!==Ii&&"hanging"!==Ii)throw new Error("Expected bottom, top, middle, alphabetic, or hanging for text-baseline");Vi.setTextBaseline(Ii)}return Os&&Vi.setPadding(Os(Ci)),Vi}}(Ct,nt),dt=function it(Ct,nt){return"icon-src"in Ct?function lt(Ct,nt){const ht="icon-",It=ht+"src",Pt=pi(Ct[It],It),dt=ie(Ct,ht+"anchor",nt),ue=ge(Ct,ht+"scale",nt),Ce=St(Ct,ht+"opacity",nt),He=ie(Ct,ht+"displacement",nt),ke=St(Ct,ht+"rotation",nt),qe=ut(Ct,ht+"rotate-with-view",nt),Di=jt(Ct,ht+"anchor-origin"),yi=Yt(Ct,ht+"anchor-x-units"),Zn=Yt(Ct,ht+"anchor-y-units"),Ti=function Ye(Ct,nt){const ht=Ct[nt];if(void 0!==ht)return ai(ht,nt)}(Ct,ht+"color"),Ps=function rt(Ct,nt){const ht=Ct[nt];if(void 0!==ht){if("string"!=typeof ht)throw new Error(`Expected a string for ${nt}`);return ht}}(Ct,ht+"cross-origin"),Nn=function ve(Ct,nt){const ht=Ct[nt];if(void 0!==ht)return Ze(ht,nt)}(Ct,ht+"offset"),Mn=jt(Ct,ht+"offset-origin"),dn=ne(Ct,ht+"width"),ur=ne(Ct,ht+"height"),qs=function fe(Ct,nt){const ht=Ct[nt];if(void 0!==ht){if("number"==typeof ht)return(0,j.xq)(ht);if(!Array.isArray(ht))throw new Error(`Expected a number or size array for ${nt}`);if(2!==ht.length||"number"!=typeof ht[0]||"number"!=typeof ht[1])throw new Error(`Expected a number or size array for ${nt}`);return ht}}(Ct,ht+"size"),Os=Me(Ct,ht+"declutter-mode"),hs=new b.A({src:Pt,anchorOrigin:Di,anchorXUnits:yi,anchorYUnits:Zn,color:Ti,crossOrigin:Ps,offset:Nn,offsetOrigin:Mn,height:ur,width:dn,size:qs,declutterMode:Os});return function(Vi){return Ce&&hs.setOpacity(Ce(Vi)),He&&hs.setDisplacement(He(Vi)),ke&&hs.setRotation(ke(Vi)),qe&&hs.setRotateWithView(qe(Vi)),ue&&hs.setScale(ue(Vi)),dt&&hs.setAnchor(dt(Vi)),hs}}(Ct,nt):"shape-points"in Ct?function xt(Ct,nt){const ht="shape-",It=ht+"points",Pt=ht+"radius",dt=ei(Ct[It],It),ue=ei(Ct[Pt],Pt),Ce=M(Ct,ht,nt),He=D(Ct,ht,nt),ke=ge(Ct,ht+"scale",nt),qe=ie(Ct,ht+"displacement",nt),Di=St(Ct,ht+"rotation",nt),yi=ut(Ct,ht+"rotate-with-view",nt),Zn=ne(Ct,ht+"radius2"),Ti=ne(Ct,ht+"angle"),Ps=Me(Ct,ht+"declutter-mode"),Nn=new B.A({points:dt,radius:ue,radius2:Zn,angle:Ti,declutterMode:Ps});return function(Mn){return Ce&&Nn.setFill(Ce(Mn)),He&&Nn.setStroke(He(Mn)),qe&&Nn.setDisplacement(qe(Mn)),Di&&Nn.setRotation(Di(Mn)),yi&&Nn.setRotateWithView(yi(Mn)),ke&&Nn.setScale(ke(Mn)),Nn}}(Ct,nt):"circle-radius"in Ct?function At(Ct,nt){const ht="circle-",It=M(Ct,ht,nt),Pt=D(Ct,ht,nt),dt=St(Ct,ht+"radius",nt),ue=ge(Ct,ht+"scale",nt),Ce=ie(Ct,ht+"displacement",nt),He=St(Ct,ht+"rotation",nt),ke=ut(Ct,ht+"rotate-with-view",nt),qe=Me(Ct,ht+"declutter-mode"),Di=new Z.A({radius:5,declutterMode:qe});return function(yi){return dt&&Di.setRadius(dt(yi)),It&&Di.setFill(It(yi)),Pt&&Di.setStroke(Pt(yi)),Ce&&Di.setDisplacement(Ce(yi)),He&&Di.setRotation(He(yi)),ke&&Di.setRotateWithView(ke(yi)),ue&&Di.setScale(ue(yi)),Di}}(Ct,nt):null}(Ct,nt),ue=St(Ct,"z-index",nt);if(!(ht||It||Pt||dt||(0,P.p)(Ct)))throw new Error("No fill, stroke, point, or text symbolizer properties in style: "+JSON.stringify(Ct));const Ce=new $.Ay;return function(He){let ke=!0;if(ht){const qe=ht(He);qe&&(ke=!1),Ce.setFill(qe)}if(It){const qe=It(He);qe&&(ke=!1),Ce.setStroke(qe)}if(Pt){const qe=Pt(He);qe&&(ke=!1),Ce.setText(qe)}if(dt){const qe=dt(He);qe&&(ke=!1),Ce.setImage(qe)}return ue&&Ce.setZIndex(ue(He)),ke?null:Ce}}function M(Ct,nt,ht){let It;if(It=nt+"fill-pattern-src"in Ct?function Kt(Ct,nt,ht){const It=Ut(Ct,nt+"pattern-src",ht),Pt=Zt(Ct,nt+"pattern-offset",ht),dt=Zt(Ct,nt+"pattern-size",ht),ue=Tt(Ct,nt+"color",ht);return function(Ce){return{src:It(Ce),offset:Pt&&Pt(Ce),size:dt&&dt(Ce),color:ue&&ue(Ce)}}}(Ct,nt+"fill-",ht):Tt(Ct,nt+"fill-color",ht),!It)return null;const Pt=new L.A;return function(dt){const ue=It(dt);return"none"===ue?null:(Pt.setColor(ue),Pt)}}function D(Ct,nt,ht){const It=St(Ct,nt+"stroke-width",ht),Pt=Tt(Ct,nt+"stroke-color",ht);if(!It&&!Pt)return null;const dt=Ut(Ct,nt+"stroke-line-cap",ht),ue=Ut(Ct,nt+"stroke-line-join",ht),Ce=Ft(Ct,nt+"stroke-line-dash",ht),He=St(Ct,nt+"stroke-line-dash-offset",ht),ke=St(Ct,nt+"stroke-miter-limit",ht),qe=new F.A;return function(Di){if(Pt){const yi=Pt(Di);if("none"===yi)return null;qe.setColor(yi)}if(It&&qe.setWidth(It(Di)),dt){const yi=dt(Di);if("butt"!==yi&&"round"!==yi&&"square"!==yi)throw new Error("Expected butt, round, or square line cap");qe.setLineCap(yi)}if(ue){const yi=ue(Di);if("bevel"!==yi&&"round"!==yi&&"miter"!==yi)throw new Error("Expected bevel, round, or miter line join");qe.setLineJoin(yi)}return Ce&&qe.setLineDash(Ce(Di)),He&&qe.setLineDashOffset(He(Di)),ke&&qe.setMiterLimit(ke(Di)),qe}}function St(Ct,nt,ht){if(!(nt in Ct))return;const It=r(Ct[nt],p.wl,ht);return function(Pt){return ei(It(Pt),nt)}}function Ut(Ct,nt,ht){if(!(nt in Ct))return null;const It=r(Ct[nt],p.cT,ht);return function(Pt){return pi(It(Pt),nt)}}function ut(Ct,nt,ht){if(!(nt in Ct))return null;const It=r(Ct[nt],p.T8,ht);return function(Pt){const dt=It(Pt);if("boolean"!=typeof dt)throw new Error(`Expected a boolean for ${nt}`);return dt}}function Tt(Ct,nt,ht){if(!(nt in Ct))return null;const It=r(Ct[nt],p.mE|p.cT,ht);return function(Pt){return ai(It(Pt),nt)}}function Ft(Ct,nt,ht){if(!(nt in Ct))return null;const It=r(Ct[nt],p.Fq,ht);return function(Pt){return Ze(It(Pt),nt)}}function ie(Ct,nt,ht){if(!(nt in Ct))return null;const It=r(Ct[nt],p.Fq,ht);return function(Pt){const dt=Ze(It(Pt),nt);if(2!==dt.length)throw new Error(`Expected two numbers for ${nt}`);return dt}}function Zt(Ct,nt,ht){if(!(nt in Ct))return null;const It=r(Ct[nt],p.Fq,ht);return function(Pt){return Ui(It(Pt),nt)}}function ge(Ct,nt,ht){if(!(nt in Ct))return null;const It=r(Ct[nt],p.Fq|p.wl,ht);return function(Pt){return function Ue(Ct,nt){return"number"==typeof Ct?Ct:Ui(Ct,nt)}(It(Pt),nt)}}function ne(Ct,nt){const ht=Ct[nt];if(void 0!==ht){if("number"!=typeof ht)throw new Error(`Expected a number for ${nt}`);return ht}}function jt(Ct,nt){const ht=Ct[nt];if(void 0!==ht){if("bottom-left"!==ht&&"bottom-right"!==ht&&"top-left"!==ht&&"top-right"!==ht)throw new Error(`Expected bottom-left, bottom-right, top-left, or top-right for ${nt}`);return ht}}function Yt(Ct,nt){const ht=Ct[nt];if(void 0!==ht){if("pixels"!==ht&&"fraction"!==ht)throw new Error(`Expected pixels or fraction for ${nt}`);return ht}}function Me(Ct,nt){const ht=Ct[nt];if(void 0!==ht){if("string"!=typeof ht)throw new Error(`Expected a string for ${nt}`);if("declutter"!==ht&&"obstacle"!==ht&&"none"!==ht)throw new Error(`Expected declutter, obstacle, or none for ${nt}`);return ht}}function Ze(Ct,nt){if(!Array.isArray(Ct))throw new Error(`Expected an array for ${nt}`);const ht=Ct.length;for(let It=0;It<ht;++It)if("number"!=typeof Ct[It])throw new Error(`Expected an array of numbers for ${nt}`);return Ct}function pi(Ct,nt){if("string"!=typeof Ct)throw new Error(`Expected a string for ${nt}`);return Ct}function ei(Ct,nt){if("number"!=typeof Ct)throw new Error(`Expected a number for ${nt}`);return Ct}function ai(Ct,nt){if("string"==typeof Ct)return Ct;const ht=Ze(Ct,nt),It=ht.length;if(It<3||It>4)throw new Error(`Expected a color with 3 or 4 values for ${nt}`);return ht}function Ui(Ct,nt){const ht=Ze(Ct,nt);if(2!==ht.length)throw new Error(`Expected an array of two numbers for ${nt}`);return ht}const Yi=class Ai extends V.A{constructor(nt){nt=nt||{};const ht=Object.assign({},nt);delete ht.style,delete ht.renderBuffer,delete ht.updateWhileAnimating,delete ht.updateWhileInteracting,super(ht),this.declutter_=nt.declutter?String(nt.declutter):void 0,this.renderBuffer_=void 0!==nt.renderBuffer?nt.renderBuffer:100,this.style_=null,this.styleFunction_=void 0,this.setStyle(nt.style),this.updateWhileAnimating_=void 0!==nt.updateWhileAnimating&&nt.updateWhileAnimating,this.updateWhileInteracting_=void 0!==nt.updateWhileInteracting&&nt.updateWhileInteracting}getDeclutter(){return this.declutter_}getFeatures(nt){return super.getFeatures(nt)}getRenderBuffer(){return this.renderBuffer_}getRenderOrder(){return this.get("renderOrder")}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}getUpdateWhileAnimating(){return this.updateWhileAnimating_}getUpdateWhileInteracting(){return this.updateWhileInteracting_}renderDeclutter(nt,ht){const It=this.getDeclutter();It in nt.declutter||(nt.declutter[It]=new K(9)),this.getRenderer().renderDeclutter(nt,ht)}setRenderOrder(nt){this.set("renderOrder",nt)}setStyle(nt){this.style_=void 0===nt?$.d1:nt;const ht=function an(Ct){if(void 0===Ct)return $.d1;if(!Ct)return null;if("function"==typeof Ct||Ct instanceof $.Ay)return Ct;if(!Array.isArray(Ct))return O([Ct]);if(0===Ct.length)return[];const nt=Ct.length,ht=Ct[0];if(ht instanceof $.Ay){const Pt=new Array(nt);for(let dt=0;dt<nt;++dt){const ue=Ct[dt];if(!(ue instanceof $.Ay))throw new Error("Expected a list of style instances");Pt[dt]=ue}return Pt}if("style"in ht){const Pt=new Array(nt);for(let dt=0;dt<nt;++dt){const ue=Ct[dt];if(!("style"in ue))throw new Error("Expected a list of rules with a style property");Pt[dt]=ue}return function T(Ct){const nt=(0,p.SR)(),ht=function R(Ct,nt){const ht=Ct.length,It=new Array(ht);for(let Pt=0;Pt<ht;++Pt){const dt=Ct[Pt],ue="filter"in dt?r(dt.filter,p.T8,nt):Y;let Ce;if(Array.isArray(dt.style)){const He=dt.style.length;Ce=new Array(He);for(let ke=0;ke<He;++ke)Ce[ke]=A(dt.style[ke],nt)}else Ce=[A(dt.style,nt)];It[Pt]={filter:ue,styles:Ce}}return function(Pt){const dt=[];let ue=!1;for(let Ce=0;Ce<ht;++Ce)if((0,It[Ce].filter)(Pt)&&(!Ct[Ce].else||!ue)){ue=!0;for(const ke of It[Ce].styles){const qe=ke(Pt);qe&&dt.push(qe)}}return dt}}(Ct,nt),It={variables:{},properties:{},resolution:NaN,featureId:null,geometryType:""};return function(Pt,dt){if(It.properties=Pt.getPropertiesInternal(),It.resolution=dt,nt.featureId){const ue=Pt.getId();It.featureId=void 0!==ue?ue:null}return nt.geometryType&&(It.geometryType=(0,p.Ye)(Pt.getGeometry())),ht(It)}}(Pt)}return O(Ct)}(nt);this.styleFunction_=null===nt?void 0:(0,$.mC)(ht),this.changed()}}},3942:(ce,gt,c)=>{"use strict";c.d(gt,{A:()=>o,i:()=>h});var V=c(8324),K=c(6591),$=c(2927),Z=c(3805),L=c(6621),b=c(6058),B=c(5940),F=c(9330),E=c(8507),p=c(2383),_=c(2614);class h extends Z.Ay{constructor(g,a){super(g),this.layer=a}}class u extends V.A{constructor(g){g=g||{};const a=Object.assign({},g);delete a.layers;let C=g.layers;super(a),this.layersListenerKeys_=[],this.listenerKeys_={},this.addChangeListener("layers",this.handleLayersChanged_),C?Array.isArray(C)?C=new K.A(C.slice(),{unique:!0}):(0,B.v)("function"==typeof C.getArray,"Expected `layers` to be an array or a `Collection`"):C=new K.A(void 0,{unique:!0}),this.setLayers(C)}handleLayerChange_(){this.changed()}handleLayersChanged_(){this.layersListenerKeys_.forEach(_.JH),this.layersListenerKeys_.length=0;const g=this.getLayers();this.layersListenerKeys_.push((0,_.KT)(g,$.A.ADD,this.handleLayersAdd_,this),(0,_.KT)(g,$.A.REMOVE,this.handleLayersRemove_,this));for(const C in this.listenerKeys_)this.listenerKeys_[C].forEach(_.JH);(0,F.I)(this.listenerKeys_);const a=g.getArray();for(let C=0,y=a.length;C<y;C++){const v=a[C];this.registerLayerListeners_(v),this.dispatchEvent(new h("addlayer",v))}this.changed()}registerLayerListeners_(g){const a=[(0,_.KT)(g,b.A.PROPERTYCHANGE,this.handleLayerChange_,this),(0,_.KT)(g,L.A.CHANGE,this.handleLayerChange_,this)];g instanceof u&&a.push((0,_.KT)(g,"addlayer",this.handleLayerGroupAdd_,this),(0,_.KT)(g,"removelayer",this.handleLayerGroupRemove_,this)),this.listenerKeys_[(0,p.v6)(g)]=a}handleLayerGroupAdd_(g){this.dispatchEvent(new h("addlayer",g.layer))}handleLayerGroupRemove_(g){this.dispatchEvent(new h("removelayer",g.layer))}handleLayersAdd_(g){const a=g.element;this.registerLayerListeners_(a),this.dispatchEvent(new h("addlayer",a)),this.changed()}handleLayersRemove_(g){const a=g.element,C=(0,p.v6)(a);this.listenerKeys_[C].forEach(_.JH),delete this.listenerKeys_[C],this.dispatchEvent(new h("removelayer",a)),this.changed()}getLayers(){return this.get("layers")}setLayers(g){const a=this.getLayers();if(a){const C=a.getArray();for(let y=0,v=C.length;y<v;++y)this.dispatchEvent(new h("removelayer",C[y]))}this.set("layers",g)}getLayersArray(g){return g=void 0!==g?g:[],this.getLayers().forEach(function(a){a.getLayersArray(g)}),g}getLayerStatesArray(g){const a=void 0!==g?g:[],C=a.length;this.getLayers().forEach(function(U){U.getLayerStatesArray(a)});const y=this.getLayerState();let v=y.zIndex;!g&&void 0===y.zIndex&&(v=0);for(let U=C,w=a.length;U<w;U++){const z=a[U];z.opacity*=y.opacity,z.visible=z.visible&&y.visible,z.maxResolution=Math.min(z.maxResolution,y.maxResolution),z.minResolution=Math.max(z.minResolution,y.minResolution),z.minZoom=Math.max(z.minZoom,y.minZoom),z.maxZoom=Math.min(z.maxZoom,y.maxZoom),void 0!==y.extent&&(z.extent=void 0!==z.extent?(0,E._N)(z.extent,y.extent):y.extent),void 0===z.zIndex&&(z.zIndex=v)}return a}getSourceState(){return"ready"}}const o=u},7908:(ce,gt,c)=>{"use strict";c.d(gt,{A:()=>Z});var V=c(5715),K=c(4380);const Z=class $ extends V.A{constructor(b){super(b)}createRenderer(){return new K.A(this)}getData(b){return super.getData(b)}}},8052:(ce,gt,c)=>{"use strict";c.d(gt,{A:()=>_,l:()=>p});var V=c(8324),K=c(6621),$=c(4860),Z=c(1688),L=c(3980),b=c(5940),B=c(8507),F=c(2614);function p(h,r){if(!h.visible)return!1;const u=r.resolution;if(u<h.minResolution||u>=h.maxResolution)return!1;const o=r.zoom;return o>h.minZoom&&o<=h.maxZoom}const _=class E extends V.A{constructor(r){const u=Object.assign({},r);delete u.source,super(u),this.mapPrecomposeKey_=null,this.mapRenderKey_=null,this.sourceChangeKey_=null,this.renderer_=null,this.sourceReady_=!1,this.rendered=!1,r.render&&(this.render=r.render),r.map&&this.setMap(r.map),this.addChangeListener($.A.SOURCE,this.handleSourcePropertyChange_),this.setSource(r.source?r.source:null)}getLayersArray(r){return(r=r||[]).push(this),r}getLayerStatesArray(r){return(r=r||[]).push(this.getLayerState()),r}getSource(){return this.get($.A.SOURCE)||null}getRenderSource(){return this.getSource()}getSourceState(){const r=this.getSource();return r?r.getState():"undefined"}handleSourceChange_(){this.changed(),!this.sourceReady_&&"ready"===this.getSource().getState()&&(this.sourceReady_=!0,this.dispatchEvent("sourceready"))}handleSourcePropertyChange_(){this.sourceChangeKey_&&((0,F.JH)(this.sourceChangeKey_),this.sourceChangeKey_=null),this.sourceReady_=!1;const r=this.getSource();r&&(this.sourceChangeKey_=(0,F.KT)(r,K.A.CHANGE,this.handleSourceChange_,this),"ready"===r.getState()&&(this.sourceReady_=!0,setTimeout(()=>{this.dispatchEvent("sourceready")},0))),this.changed()}getFeatures(r){return this.renderer_?this.renderer_.getFeatures(r):Promise.resolve([])}getData(r){return this.renderer_&&this.rendered?this.renderer_.getData(r):null}isVisible(r){let u;const o=this.getMapInternal();let f;!r&&o&&(r=o.getView()),u=r instanceof L.Ay?{viewState:r.getState(),extent:r.calculateExtent()}:r,!u.layerStatesArray&&o&&(u.layerStatesArray=o.getLayerGroup().getLayerStatesArray()),f=u.layerStatesArray?u.layerStatesArray.find(a=>a.layer===this):this.getLayerState();const g=this.getExtent();return p(f,u.viewState)&&(!g||(0,B.HY)(g,u.extent))}getAttributions(r){if(!this.isVisible(r))return[];let u;const o=this.getSource();if(o&&(u=o.getAttributions()),!u)return[];let g=u(r instanceof L.Ay?r.getViewStateAndExtent():r);return Array.isArray(g)||(g=[g]),g}render(r,u){const o=this.getRenderer();return o.prepareFrame(r)?(this.rendered=!0,o.renderFrame(r,u)):null}unrender(){this.rendered=!1}getDeclutter(){}renderDeclutter(r,u){}renderDeferred(r){const u=this.getRenderer();u&&u.renderDeferred(r)}setMapInternal(r){r||this.unrender(),this.set($.A.MAP,r)}getMapInternal(){return this.get($.A.MAP)}setMap(r){this.mapPrecomposeKey_&&((0,F.JH)(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),r||this.changed(),this.mapRenderKey_&&((0,F.JH)(this.mapRenderKey_),this.mapRenderKey_=null),r&&(this.mapPrecomposeKey_=(0,F.KT)(r,Z.A.PRECOMPOSE,function(u){const f=u.frameState.layerStatesArray,g=this.getLayerState(!1);(0,b.v)(!f.some(function(a){return a.layer===g.layer}),"A layer can only be added to the map once. Use either `layer.setMap()` or `map.addLayer()`, not both."),f.push(g)},this),this.mapRenderKey_=(0,F.KT)(this,K.A.CHANGE,r.render,r),this.changed())}setSource(r){this.set($.A.SOURCE,r)}getRenderer(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_}hasRenderer(){return!!this.renderer_}createRenderer(){return null}disposeInternal(){this.renderer_&&(this.renderer_.dispose(),delete this.renderer_),this.setSource(null),super.disposeInternal()}}},4860:(ce,gt,c)=>{"use strict";c.d(gt,{A:()=>V});const V={OPACITY:"opacity",VISIBLE:"visible",EXTENT:"extent",Z_INDEX:"zIndex",MAX_RESOLUTION:"maxResolution",MIN_RESOLUTION:"minResolution",MAX_ZOOM:"maxZoom",MIN_ZOOM:"minZoom",SOURCE:"source",MAP:"map"}},8201:(ce,gt,c)=>{"use strict";c.d(gt,{A:()=>Z});var V=c(1744),K=c(2565);const Z=class $ extends V.A{constructor(b){super(b)}createRenderer(){return new K.A(this)}}},6952:(ce,gt,c)=>{"use strict";c.d(gt,{A:()=>V});const V={PRELOAD:"preload",USE_INTERIM_TILES_ON_ERROR:"useInterimTilesOnError"}},9346:(ce,gt,c)=>{"use strict";c.d(gt,{A:()=>Z});var V=c(7477),K=c(3812);const Z=class $ extends V.A{constructor(b){super(b)}createRenderer(){return new K.A(this)}}},5927:(ce,gt,c)=>{"use strict";c.d(gt,{A:()=>w});var V=c(7477),K=c(99),$=c(3826),Z=c(2565),L=c(9806),b=c(6631),B=c(1120),F=c(3031),E=c(1983),p=c(2058),_=c(8507),h=c(4944),r=c(2383),u=c(9270),o=c(5085);const f={image:["Polygon","Circle","LineString","Image","Text"],hybrid:["Polygon","LineString"],vector:[]},g={hybrid:["Image","Text","Default"],vector:["Polygon","Circle","LineString","Image","Text","Default"]},C=class a extends Z.A{constructor(I){super(I),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.renderedPixelToCoordinateTransform_=null,this.renderedOpacity_=1,this.tmpTransform_=(0,E.vt)(),this.tileClipContexts_=null}prepareTile(I,P,j){let Y;const T=I.getState();return(T===L.A.LOADED||T===L.A.ERROR)&&(this.updateExecutorGroup_(I,P,j),this.tileImageNeedsRender_(I)&&(Y=!0)),Y}getTile(I,P,j,Y){const T=Y.pixelRatio,O=Y.viewState,R=O.resolution,A=O.projection,M=this.getLayer(),D=M.getSource().getTile(I,P,j,T,A),H=Y.viewHints,it=!(H[b.A.ANIMATING]||H[b.A.INTERACTING]);return(it||!D.wantedResolution)&&(D.wantedResolution=R),this.prepareTile(D,T,A)&&(it||Date.now()-Y.time<8)&&"vector"!==M.getRenderMode()&&this.renderTileImage_(D,Y),super.getTile(I,P,j,Y)}isDrawableTile(I){const P=this.getLayer();return super.isDrawableTile(I)&&("vector"===P.getRenderMode()?(0,r.v6)(P)in I.executorGroups:I.hasContext(P))}getTileImage(I){return I.getImage(this.getLayer())}prepareFrame(I){const P=this.getLayer().getRevision();return this.renderedLayerRevision_!==P&&(this.renderedLayerRevision_=P,this.renderedTiles.length=0),super.prepareFrame(I)}updateExecutorGroup_(I,P,j){const Y=this.getLayer(),T=Y.getRevision(),O=Y.getRenderOrder()||null,R=I.wantedResolution,A=I.getReplayState(Y);if(!A.dirty&&A.renderedResolution===R&&A.renderedRevision==T&&A.renderedRenderOrder==O)return;const M=Y.getSource(),D=!!Y.getDeclutter(),H=M.getTileGrid(),lt=M.getTileGridForProjection(j).getTileCoordExtent(I.wrappedTileCoord),xt=M.getSourceTiles(P,j,I),At=(0,r.v6)(Y);delete I.hitDetectionImageData[At],I.executorGroups[At]=[],A.dirty=!1;for(let St=0,Ut=xt.length;St<Ut;++St){const Kt=xt[St];if(Kt.getState()!=L.A.LOADED)continue;const Tt=H.getTileCoordExtent(Kt.tileCoord),Ft=(0,_._N)(lt,Tt),ie=(0,_.r)(Ft,Y.getRenderBuffer()*R,this.tmpExtent),Zt=(0,_.aI)(Tt,Ft)?null:ie,ge=new K.A(0,Ft,R,P),ne=(0,h.j)(R,P),fe=function(Me,Ye){let Ze;const pi=Me.getStyleFunction()||Y.getStyleFunction();if(pi&&(Ze=pi(Me,R)),Ze){const ei=this.renderFeature(Me,ne,Ze,ge,D,Ye);A.dirty=A.dirty||ei}},rt=Kt.getFeatures();O&&O!==A.renderedRenderOrder&&rt.sort(O);for(let Me=0,Ye=rt.length;Me<Ye;++Me){const Ze=rt[Me];(!Zt||(0,_.HY)(Zt,Ze.getGeometry().getExtent()))&&fe.call(this,Ze,Me)}const jt=ge.finish(),Yt="vector"!==Y.getRenderMode()&&D&&1===xt.length?null:Ft,ve=new $.Ay(Yt,R,P,M.getOverlaps(),jt,Y.getRenderBuffer(),!0);I.executorGroups[At].push(ve)}A.renderedRevision=T,A.renderedRenderOrder=O,A.renderedResolution=R}forEachFeatureAtCoordinate(I,P,j,Y,T){const O=P.viewState.resolution,R=P.viewState.rotation;j=j??0;const A=this.getLayer(),D=A.getSource().getTileGridForProjection(P.viewState.projection),H=(0,_.Tr)([I]);(0,_.r)(H,O*j,H);const it={},lt=function(St,Ut,Kt){let ut=St.getId();void 0===ut&&(ut=(0,r.v6)(St));const Tt=it[ut];if(Tt){if(!0!==Tt&&Kt<Tt.distanceSq){if(0===Kt)return it[ut]=!0,T.splice(T.lastIndexOf(Tt),1),Y(St,A,Ut);Tt.geometry=Ut,Tt.distanceSq=Kt}}else{if(0===Kt)return it[ut]=!0,Y(St,A,Ut);T.push(it[ut]={feature:St,layer:A,geometry:Ut,distanceSq:Kt,callback:Y})}},xt=this.renderedTiles;let At;for(let St=0,Ut=xt.length;!At&&St<Ut;++St){const Kt=xt[St],ut=D.getTileCoordExtent(Kt.wrappedTileCoord);if(!(0,_.HY)(ut,H))continue;const Tt=(0,r.v6)(A),Ft=[Kt.executorGroups[Tt]],ie=A.getDeclutter();Ft.some(Zt=>{const ge=ie?P.declutter[ie].all().map(ne=>ne.value):null;for(let ne=0,fe=Zt.length;ne<fe;++ne)if(At=Zt[ne].forEachFeatureAtCoordinate(I,O,R,j,lt,ge),At)return!0})}return At}getFeatures(I){return new Promise((P,j)=>{const Y=this.getLayer(),T=(0,r.v6)(Y),O=Y.getSource(),R=this.renderedProjection,A=R.getExtent(),M=this.renderedResolution,D=O.getTileGridForProjection(R),H=(0,E.Bb)(this.renderedPixelToCoordinateTransform_,I.slice()),it=D.getTileCoordForCoordAndResolution(H,M);let lt;for(let ut=0,Tt=this.renderedTiles.length;ut<Tt;++ut)if(it.toString()===this.renderedTiles[ut].tileCoord.toString()){if(lt=this.renderedTiles[ut],lt.getState()===L.A.LOADED){const Ft=D.getTileCoordExtent(lt.tileCoord);O.getWrapX()&&R.canWrapX()&&!(0,_.ms)(A,Ft)&&(0,o.Li)(H,R);break}lt=void 0}if(!lt||lt.loadingSourceTiles>0)return void P([]);const xt=D.getTileCoordExtent(lt.wrappedTileCoord),At=(0,_.Py)(xt),St=[(H[0]-At[0])/M,(At[1]-H[1])/M],Ut=lt.getSourceTiles().reduce(function(ut,Tt){return ut.concat(Tt.getFeatures())},[]);let Kt=lt.hitDetectionImageData[T];if(!Kt){const ut=(0,u.xq)(D.getTileSize(D.getZForResolution(M,O.zDirection))),Tt=this.renderedRotation_,Ft=[this.getRenderTransform(D.getTileCoordCenter(lt.wrappedTileCoord),M,0,F.tF,ut[0]*F.tF,ut[1]*F.tF,0)];Kt=(0,F._7)(ut,Ft,Ut,Y.getStyleFunction(),D.getTileCoordExtent(lt.wrappedTileCoord),lt.getReplayState(Y).renderedResolution,Tt),lt.hitDetectionImageData[T]=Kt}P((0,F.F8)(St,Ut,Kt))})}handleFontsChanged(){const I=this.getLayer();I.getVisible()&&void 0!==this.renderedLayerRevision_&&I.changed()}handleStyleImageChange_(I){this.renderIfReadyAndVisible()}renderDeclutter(I,P){const j=this.context,Y=j.globalAlpha;j.globalAlpha=P.opacity;const T=I.viewHints,O=!(T[b.A.ANIMATING]||T[b.A.INTERACTING]),R=this.renderedTiles;for(let A=0,M=R.length;A<M;++A){const D=R[A],H=D.executorGroups[(0,r.v6)(this.getLayer())],it=this.getLayer().getDeclutter();if(H)for(let lt=H.length-1;lt>=0;--lt)H[lt].execute(this.context,[this.context.canvas.width,this.context.canvas.height],this.getTileRenderTransform(D,I),I.viewState.rotation,O,$.$i,it?I.declutter[it]:void 0)}j.globalAlpha=Y}renderDeferredInternal(I){const j=this.renderedTiles.reduce((R,A,M)=>(A.executorGroups[(0,r.v6)(this.getLayer())].forEach(D=>R.push({executorGroup:D,index:M})),R),[]),Y=j.map(({executorGroup:R})=>R.getDeferredZIndexContexts()),T={};for(let R=0,A=j.length;R<A;++R){const M=j[R].executorGroup.getDeferredZIndexContexts();for(const D in M)T[D]=!0}Object.keys(T).sort(p.V_).map(Number).forEach(R=>{Y.forEach((A,M)=>{A[R]&&(A[R].forEach(D=>{const{executorGroup:H,index:it}=j[M],lt=H.getRenderedContext(),xt=lt.globalAlpha;lt.globalAlpha=this.renderedOpacity_;const At=this.tileClipContexts_[it];At&&At.draw(lt),D.draw(lt),At&&lt.restore(),lt.globalAlpha=xt,D.clear()}),A[R].length=0)})})}getTileRenderTransform(I,P){const j=P.pixelRatio,Y=P.viewState,T=Y.center,O=Y.resolution,R=Y.rotation,A=P.size,M=Math.round(A[0]*j),D=Math.round(A[1]*j),it=this.getLayer().getSource().getTileGridForProjection(P.viewState.projection),lt=I.tileCoord,xt=it.getTileCoordExtent(I.wrappedTileCoord),At=it.getTileCoordExtent(lt,this.tmpExtent)[0]-xt[0];return(0,E.lw)((0,E.hs)(this.inversePixelTransform.slice(),1/j,1/j),this.getRenderTransform(T,O,R,j,M,D,At))}postRender(I,P){const j=P.viewHints,Y=!(j[b.A.ANIMATING]||j[b.A.INTERACTING]);this.renderedPixelToCoordinateTransform_=P.pixelToCoordinateTransform.slice(),this.renderedRotation_=P.viewState.rotation,this.renderedOpacity_=P.layerStatesArray[P.layerIndex].opacity;const T=this.getLayer(),O=T.getRenderMode(),R=I.globalAlpha;I.globalAlpha=this.renderedOpacity_;const A=T.getDeclutter(),M=A?g[O].filter(Tt=>!$.$i.includes(Tt)):g[O],D=P.viewState,H=D.rotation,it=T.getSource(),xt=it.getTileGridForProjection(D.projection).getZForResolution(D.resolution,it.zDirection),At=this.renderedTiles,St=[],Ut=[],Kt=[];let ut=!0;for(let Tt=At.length-1;Tt>=0;--Tt){const Ft=At[Tt];ut=ut&&!Ft.getReplayState(T).dirty;const ie=Ft.executorGroups[(0,r.v6)(T)].filter(Yt=>Yt.hasExecutors(M));if(0===ie.length)continue;const Zt=this.getTileRenderTransform(Ft,P),ge=Ft.tileCoord[0];let ne=!1;const fe=ie[0].getClipCoords(Zt);let jt,rt=I;if(fe){jt=new B.A,rt=jt.getContext();for(let Yt=0,ve=St.length;Yt<ve;++Yt)if(xt!==ge&&ge<Ut[Yt]){const Me=St[Yt];(0,_.HY)([fe[0],fe[3],fe[4],fe[7]],[Me[0],Me[3],Me[4],Me[7]])&&(ne||(rt.save(),ne=!0),rt.beginPath(),rt.moveTo(fe[0],fe[1]),rt.lineTo(fe[2],fe[3]),rt.lineTo(fe[4],fe[5]),rt.lineTo(fe[6],fe[7]),rt.moveTo(Me[6],Me[7]),rt.lineTo(Me[4],Me[5]),rt.lineTo(Me[2],Me[3]),rt.lineTo(Me[0],Me[1]),rt.clip())}St.push(fe),Ut.push(ge)}for(let Yt=0,ve=ie.length;Yt<ve;++Yt)ie[Yt].execute(I,[I.canvas.width,I.canvas.height],Zt,H,Y,M,P.declutter?.[A]);ne&&(rt===I?rt.restore():Kt[Tt]=jt)}I.globalAlpha=R,this.ready=ut,this.tileClipContexts_=Kt,P.declutter||this.renderDeferredInternal(P),super.postRender(I,P)}renderFeature(I,P,j,Y,T,O){if(!j)return!1;let R=!1;if(Array.isArray(j))for(let A=0,M=j.length;A<M;++A)R=(0,h.nl)(Y,I,j[A],P,this.boundHandleStyleImageChange_,void 0,T,O)||R;else R=(0,h.nl)(Y,I,j,P,this.boundHandleStyleImageChange_,void 0,T,O);return R}tileImageNeedsRender_(I){const P=this.getLayer();if("vector"===P.getRenderMode())return!1;const j=I.getReplayState(P),Y=P.getRevision();return j.renderedTileResolution!==I.wantedResolution||j.renderedTileRevision!==Y}renderTileImage_(I,P){const j=this.getLayer(),Y=I.getReplayState(j),T=j.getRevision(),O=I.executorGroups[(0,r.v6)(j)];Y.renderedTileRevision=T;const R=I.wrappedTileCoord,A=R[0],M=j.getSource();let D=P.pixelRatio;const it=P.viewState.projection,lt=M.getTileGridForProjection(it),xt=lt.getResolution(I.tileCoord[0]),At=P.pixelRatio/I.wantedResolution*xt,St=lt.getResolution(A),Ut=I.getContext(j);D=Math.round(Math.max(D,At/D));const Kt=M.getTilePixelSize(A,D,it);Ut.canvas.width=Kt[0],Ut.canvas.height=Kt[1];const ut=D/At;if(1!==ut){const Zt=(0,E.cL)(this.tmpTransform_);(0,E.hs)(Zt,ut,ut),Ut.setTransform.apply(Ut,Zt)}const Tt=lt.getTileCoordExtent(R,this.tmpExtent),Ft=At/St,ie=(0,E.cL)(this.tmpTransform_);(0,E.hs)(ie,Ft,-Ft),(0,E.Tl)(ie,-Tt[0],-Tt[3]);for(let Zt=0,ge=O.length;Zt<ge;++Zt)O[Zt].execute(Ut,[Ut.canvas.width*ut,Ut.canvas.height*ut],ie,0,!0,f[j.getRenderMode()],null);Y.renderedTileResolution=I.wantedResolution}};var y=c(6952),v=c(5940);const w=class U extends V.A{constructor(I){I=I||{};const P=Object.assign({},I);delete P.preload,delete P.useInterimTilesOnError,super(P);const j=I.renderMode||"hybrid";(0,v.v)("hybrid"==j||"vector"==j,"`renderMode` must be `'hybrid'` or `'vector'`"),this.renderMode_=j,this.setPreload(I.preload?I.preload:0),this.setUseInterimTilesOnError(void 0===I.useInterimTilesOnError||I.useInterimTilesOnError)}createRenderer(){return new C(this)}getFeatures(I){return super.getFeatures(I)}getRenderMode(){return this.renderMode_}getPreload(){return this.get(y.A.PRELOAD)}getUseInterimTilesOnError(){return this.get(y.A.USE_INTERIM_TILES_ON_ERROR)}setPreload(I){this.set(y.A.PRELOAD,I)}setUseInterimTilesOnError(I){this.set(y.A.USE_INTERIM_TILES_ON_ERROR,I)}}},7206:(ce,gt,c)=>{"use strict";function K(L,b){return[[-1/0,-1/0,1/0,1/0]]}function $(L,b){return[L]}c.d(gt,{Q7:()=>K,Qk:()=>$}),c(9325)},9973:(ce,gt,c)=>{"use strict";function V(r,u,o){return Math.min(Math.max(r,u),o)}function K(r,u,o,f,g,a){const C=g-o,y=a-f;if(0!==C||0!==y){const v=((r-o)*C+(u-f)*y)/(C*C+y*y);v>1?(o=g,f=a):v>0&&(o+=C*v,f+=y*v)}return $(r,u,o,f)}function $(r,u,o,f){const g=o-r,a=f-u;return g*g+a*a}function Z(r){const u=r.length;for(let f=0;f<u;f++){let g=f,a=Math.abs(r[f][f]);for(let y=f+1;y<u;y++){const v=Math.abs(r[y][f]);v>a&&(a=v,g=y)}if(0===a)return null;const C=r[g];r[g]=r[f],r[f]=C;for(let y=f+1;y<u;y++){const v=-r[y][f]/r[f][f];for(let U=f;U<u+1;U++)f==U?r[y][U]=0:r[y][U]+=v*r[f][U]}}const o=new Array(u);for(let f=u-1;f>=0;f--){o[f]=r[f][u]/r[f][f];for(let g=f-1;g>=0;g--)r[g][u]-=r[g][f]*o[f]}return o}function b(r){return r*Math.PI/180}function B(r,u){const o=r%u;return o*u<0?o+u:o}function F(r,u,o){return r+o*(u-r)}function E(r,u){const o=Math.pow(10,u);return Math.round(r*o)/o}function p(r,u){return Math.round(E(r,u))}function _(r,u){return Math.floor(E(r,u))}function h(r,u){return Math.ceil(E(r,u))}c.d(gt,{Cc:()=>F,KU:()=>Z,LI:()=>p,Mg:()=>E,Q1:()=>K,RI:()=>_,eh:()=>b,hG:()=>$,mk:()=>h,qE:()=>V,xP:()=>B})},9330:(ce,gt,c)=>{"use strict";function V($){for(const Z in $)delete $[Z]}function K($){let Z;for(Z in $)return!1;return!Z}c.d(gt,{I:()=>V,p:()=>K})},9325:(ce,gt,c)=>{"use strict";c.d(gt,{Ig:()=>f.I,MF:()=>V.A,hB:()=>ie,O3:()=>Ut,bF:()=>lt,Av:()=>Tt,wU:()=>Yi,RJ:()=>D,tI:()=>ne,Rb:()=>Zt,Ad:()=>Ui,SD:()=>Oi,Jt:()=>At,hO:()=>St,RG:()=>rt,FO:()=>fe,Tf:()=>pi,R6:()=>it,te:()=>ai,JR:()=>Ue,vN:()=>Ai,pd:()=>jt,DI:()=>Yt});var V=c(206);const K=6378137,$=Math.PI*K,Z=[-$,-$,$,$],L=[-180,-85,180,85],b=K*Math.log(Math.tan(Math.PI/2));class B extends V.A{constructor(ht){super({code:ht,units:"m",extent:Z,global:!0,worldExtent:L,getPointResolution:function(It,Pt){return It/Math.cosh(Pt[1]/K)}})}}const F=[new B("EPSG:3857"),new B("EPSG:102100"),new B("EPSG:102113"),new B("EPSG:900913"),new B("http://www.opengis.net/def/crs/EPSG/0/3857"),new B("http://www.opengis.net/gml/srs/epsg.xml#3857")];function E(nt,ht,It){const Pt=nt.length;It=It>1?It:2,void 0===ht&&(ht=It>2?nt.slice():new Array(Pt));for(let dt=0;dt<Pt;dt+=It){ht[dt]=$*nt[dt]/180;let ue=K*Math.log(Math.tan(Math.PI*(+nt[dt+1]+90)/360));ue>b?ue=b:ue<-b&&(ue=-b),ht[dt+1]=ue}return ht}function p(nt,ht,It){const Pt=nt.length;It=It>1?It:2,void 0===ht&&(ht=It>2?nt.slice():new Array(Pt));for(let dt=0;dt<Pt;dt+=It)ht[dt]=180*nt[dt]/$,ht[dt+1]=360*Math.atan(Math.exp(nt[dt+1]/K))/Math.PI-90;return ht}const h=[-180,-90,180,90],r=6378137*Math.PI/180;class u extends V.A{constructor(ht,It){super({code:ht,units:"degrees",extent:h,axisOrientation:It,global:!0,metersPerUnit:r,worldExtent:h})}}const o=[new u("CRS:84"),new u("EPSG:4326","neu"),new u("urn:ogc:def:crs:OGC:1.3:CRS84"),new u("urn:ogc:def:crs:OGC:2:84"),new u("http://www.opengis.net/def/crs/OGC/1.3/CRS84"),new u("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new u("http://www.opengis.net/def/crs/EPSG/0/4326","neu")];var f=c(6508);let g={};var v=c(4238),U=c(8507),w=c(9973),z=c(5085);const I=6371008.8;function P(nt,ht,It){It=It||I;const Pt=(0,w.eh)(nt[1]),dt=(0,w.eh)(ht[1]),ue=(dt-Pt)/2,Ce=(0,w.eh)(ht[0]-nt[0])/2,He=Math.sin(ue)*Math.sin(ue)+Math.sin(Ce)*Math.sin(Ce)*Math.cos(Pt)*Math.cos(dt);return 2*It*Math.atan2(Math.sqrt(He),Math.sqrt(1-He))}var A=c(5278);let M=!0;function D(nt){M=!(void 0===nt||nt)}function H(nt,ht){if(void 0!==ht)for(let It=0,Pt=nt.length;It<Pt;++It)ht[It]=nt[It];else ht=nt.slice();return ht}function it(nt,ht){if(void 0!==ht&&nt!==ht){for(let It=0,Pt=nt.length;It<Pt;++It)ht[It]=nt[It];nt=ht}return nt}function lt(nt){(function y(nt,ht){g[nt]=ht})(nt.getCode(),nt),(0,v.WQ)(nt,nt,H)}function At(nt){return"string"==typeof nt?function C(nt){return g[nt]||g[nt.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\w+)$/,"EPSG:$3")]||null}(nt):nt||null}function St(nt,ht,It,Pt){let dt;const ue=(nt=At(nt)).getPointResolutionFunc();if(ue){if(dt=ue(ht,It),Pt&&Pt!==nt.getUnits()){const Ce=nt.getMetersPerUnit();Ce&&(dt=dt*Ce/f.I[Pt])}}else{const Ce=nt.getUnits();if("degrees"==Ce&&!Pt||"degrees"==Pt)dt=ht;else{const He=fe(nt,At("EPSG:4326"));if(He===it&&"degrees"!==Ce)dt=ht*nt.getMetersPerUnit();else{let qe=[It[0]-ht/2,It[1],It[0]+ht/2,It[1],It[0],It[1]-ht/2,It[0],It[1]+ht/2];qe=He(qe,qe,2),dt=(P(qe.slice(0,2),qe.slice(2,4))+P(qe.slice(4,6),qe.slice(6,8)))/2}const ke=Pt?f.I[Pt]:nt.getMetersPerUnit();void 0!==ke&&(dt/=ke)}}return dt}function Ut(nt){(function xt(nt){nt.forEach(lt)})(nt),nt.forEach(function(ht){nt.forEach(function(It){ht!==It&&(0,v.WQ)(ht,It,H)})})}function Tt(nt,ht){return nt?"string"==typeof nt?At(nt):nt:At(ht)}function Ft(nt){return function(ht,It,Pt){const dt=ht.length;Pt=void 0!==Pt?Pt:2,It=void 0!==It?It:new Array(dt);for(let ue=0;ue<dt;ue+=Pt){const Ce=nt(ht.slice(ue,ue+Pt)),He=Ce.length;for(let ke=0,qe=Pt;ke<qe;++ke)It[ue+ke]=ke>=He?ht[ue+ke]:Ce[ke]}return It}}function ie(nt,ht,It,Pt){const dt=At(nt),ue=At(ht);(0,v.WQ)(dt,ue,Ft(It)),(0,v.WQ)(ue,dt,Ft(Pt))}function Zt(nt,ht){return D(),jt(nt,"EPSG:4326",void 0!==ht?ht:"EPSG:3857")}function ne(nt,ht){if(nt===ht)return!0;const It=nt.getUnits()===ht.getUnits();return(nt.getCode()===ht.getCode()||fe(nt,ht)===H)&&It}function fe(nt,ht){const It=nt.getCode(),Pt=ht.getCode();let dt=(0,v.Jt)(It,Pt);return dt||(dt=it),dt}function rt(nt,ht){return fe(At(nt),At(ht))}function jt(nt,ht,It){return rt(ht,It)(nt,void 0,nt.length)}function Yt(nt,ht,It,Pt){const dt=rt(ht,It);return(0,U.NW)(nt,dt,void 0,Pt)}let Me=null;function pi(){return Me}function ai(nt,ht){return Me?jt(nt,ht,Me):nt}function Ui(nt,ht){return Me?jt(nt,Me,ht):(M&&!(0,z.aI)(nt,[0,0])&&nt[0]>=-180&&nt[0]<=180&&nt[1]>=-90&&nt[1]<=90&&(M=!1,(0,A.R8)("Call useGeographic() from ol/proj once to work with [longitude, latitude] coordinates.")),nt)}function Ue(nt,ht){return Me?Yt(nt,ht,Me):nt}function Oi(nt,ht){return Me?Yt(nt,Me,ht):nt}function Ai(nt,ht){if(!Me)return nt;const It=At(ht).getMetersPerUnit(),Pt=Me.getMetersPerUnit();return It&&Pt?nt*It/Pt:nt}function Yi(nt,ht,It){return function(Pt){let dt,ue;if(nt.canWrapX()){const Ce=nt.getExtent(),He=(0,U.RG)(Ce);Pt=Pt.slice(0),ue=(0,z.U$)(Pt,nt,He),ue&&(Pt[0]=Pt[0]-ue*He),Pt[0]=(0,w.qE)(Pt[0],Ce[0],Ce[2]),Pt[1]=(0,w.qE)(Pt[1],Ce[1],Ce[3]),dt=It(Pt)}else dt=It(Pt);return ue&&ht.canWrapX()&&(dt[0]+=ue*(0,U.RG)(ht.getExtent())),dt}}!function Ct(){Ut(F),Ut(o),function Kt(nt,ht,It,Pt){nt.forEach(function(dt){ht.forEach(function(ue){(0,v.WQ)(dt,ue,It),(0,v.WQ)(ue,dt,Pt)})})}(o,F,E,p)}()},206:(ce,gt,c)=>{"use strict";c.d(gt,{A:()=>$});var V=c(6508);const $=class K{constructor(L){this.code_=L.code,this.units_=L.units,this.extent_=void 0!==L.extent?L.extent:null,this.worldExtent_=void 0!==L.worldExtent?L.worldExtent:null,this.axisOrientation_=void 0!==L.axisOrientation?L.axisOrientation:"enu",this.global_=void 0!==L.global&&L.global,this.canWrapX_=!(!this.global_||!this.extent_),this.getPointResolutionFunc_=L.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=L.metersPerUnit}canWrapX(){return this.canWrapX_}getCode(){return this.code_}getExtent(){return this.extent_}getUnits(){return this.units_}getMetersPerUnit(){return this.metersPerUnit_||V.I[this.units_]}getWorldExtent(){return this.worldExtent_}getAxisOrientation(){return this.axisOrientation_}isGlobal(){return this.global_}setGlobal(L){this.global_=L,this.canWrapX_=!(!L||!this.extent_)}getDefaultTileGrid(){return this.defaultTileGrid_}setDefaultTileGrid(L){this.defaultTileGrid_=L}setExtent(L){this.extent_=L,this.canWrapX_=!(!this.global_||!L)}setWorldExtent(L){this.worldExtent_=L}setGetPointResolution(L){this.getPointResolutionFunc_=L}getPointResolutionFunc(){return this.getPointResolutionFunc_}}},6508:(ce,gt,c)=>{"use strict";c.d(gt,{I:()=>$});const $={radians:6370997/(2*Math.PI),degrees:2*Math.PI*6370997/360,ft:.3048,m:1,"us-ft":1200/3937}},9190:(ce,gt,c)=>{"use strict";c.d(gt,{kz:()=>B});var V=c(206),K=c(9325),$=c(4238);let Z=null;function B(u){Z=u;const o=Object.keys(u.defs),f=o.length;let g,a;for(g=0;g<f;++g){const C=o[g];if(!(0,K.Jt)(C)){const y=u.defs(C);let v=y.units;!v&&"longlat"===y.projName&&(v="degrees"),(0,K.bF)(new V.A({code:C,axisOrientation:y.axis,metersPerUnit:y.to_meter,units:v}))}}for(g=0;g<f;++g){const C=o[g],y=(0,K.Jt)(C);for(a=0;a<f;++a){const v=o[a],U=(0,K.Jt)(v);if(!(0,$.Jt)(C,v))if(u.defs[C]===u.defs[v])(0,K.O3)([y,U]);else{const w=u(C,v);(0,K.hB)(y,U,(0,K.wU)(y,U,w.forward),(0,K.wU)(U,y,w.inverse))}}}}},4238:(ce,gt,c)=>{"use strict";c.d(gt,{Jt:()=>L,WQ:()=>$});let V={};function $(b,B,F){const E=b.getCode(),p=B.getCode();E in V||(V[E]={}),V[E][p]=F}function L(b,B){let F;return b in V&&B in V[b]&&(F=V[b][B]),F}},2800:(ce,gt,c)=>{"use strict";c.d(gt,{A:()=>$});var V=c(3805);const $=class K extends V.Ay{constructor(L,b,B,F){super(L),this.inversePixelTransform=b,this.frameState=B,this.context=F}}},1688:(ce,gt,c)=>{"use strict";c.d(gt,{A:()=>V});const V={PRERENDER:"prerender",POSTRENDER:"postrender",PRECOMPOSE:"precompose",POSTCOMPOSE:"postcompose",RENDERCOMPLETE:"rendercomplete"}},2386:(ce,gt,c)=>{"use strict";c.d(gt,{Ay:()=>f});var V=c(1983),K=c(8507),$=c(463),Z=c(2058),L=c(2544),b=c(9325),B=c(3834),F=c(9721),E=c(6281),p=c(1766),_=c(9662);const h=(0,V.vt)();class r{constructor(a,C,y,v,U,w){this.id_=w,this.type_=a,this.flatCoordinates_=C,this.flatInteriorPoints_=null,this.flatMidpoints_=null,this.ends_=y||null,this.properties_=U,this.stride_=v}get(a){return this.properties_[a]}getExtent(){return this.extent_||(this.extent_="Point"===this.type_?(0,K.dP)(this.flatCoordinates_):(0,K.Vy)(this.flatCoordinates_,0,this.flatCoordinates_.length,2)),this.extent_}getFlatInteriorPoint(){if(!this.flatInteriorPoints_){const a=(0,K.q1)(this.getExtent());this.flatInteriorPoints_=(0,L.J)(this.flatCoordinates_,0,this.ends_,2,a,0)}return this.flatInteriorPoints_}getFlatInteriorPoints(){if(!this.flatInteriorPoints_){const a=(0,B.yJ)(this.flatCoordinates_,this.ends_),C=(0,E.C)(this.flatCoordinates_,0,a,2);this.flatInteriorPoints_=(0,L.p)(this.flatCoordinates_,0,a,2,C)}return this.flatInteriorPoints_}getFlatMidpoint(){return this.flatMidpoints_||(this.flatMidpoints_=(0,F.SH)(this.flatCoordinates_,0,this.flatCoordinates_.length,2,.5)),this.flatMidpoints_}getFlatMidpoints(){if(!this.flatMidpoints_){this.flatMidpoints_=[];const a=this.flatCoordinates_;let C=0;const y=this.ends_;for(let v=0,U=y.length;v<U;++v){const w=y[v],z=(0,F.SH)(a,C,w,2,.5);(0,Z.X$)(this.flatMidpoints_,z),C=w}}return this.flatMidpoints_}getId(){return this.id_}getOrientedFlatCoordinates(){return this.flatCoordinates_}getGeometry(){return this}getSimplifiedGeometry(a){return this}simplifyTransformed(a,C){return this}getProperties(){return this.properties_}getPropertiesInternal(){return this.properties_}getStride(){return this.stride_}getStyleFunction(){return this.styleFunction}getType(){return this.type_}transform(a){const C=(a=(0,b.Jt)(a)).getExtent(),y=a.getWorldExtent();if(C&&y){const v=(0,K.Oq)(y)/(0,K.Oq)(C);(0,V.Zz)(h,y[0],y[3],v,-v,0,0,0),(0,_.Rc)(this.flatCoordinates_,0,this.flatCoordinates_.length,2,h,this.flatCoordinates_)}}applyTransform(a){a(this.flatCoordinates_,this.flatCoordinates_,this.stride_)}clone(){return new r(this.type_,this.flatCoordinates_.slice(),this.ends_?.slice(),this.stride_,Object.assign({},this.properties_),this.id_)}getEnds(){return this.ends_}enableSimplifyTransformed(){return this.simplifyTransformed=(0,p.B4)((a,C)=>{if(a===this.squaredTolerance_)return this.simplifiedGeometry_;this.simplifiedGeometry_=this.clone(),C&&this.simplifiedGeometry_.applyTransform(C);const y=this.simplifiedGeometry_.getFlatCoordinates();let v;switch(this.type_){case"LineString":y.length=(0,$.P4)(y,0,this.simplifiedGeometry_.flatCoordinates_.length,this.simplifiedGeometry_.stride_,a,y,0),v=[y.length];break;case"MultiLineString":v=[],y.length=(0,$.AL)(y,0,this.simplifiedGeometry_.ends_,this.simplifiedGeometry_.stride_,a,y,0,v);break;case"Polygon":v=[],y.length=(0,$.Hg)(y,0,this.simplifiedGeometry_.ends_,this.simplifiedGeometry_.stride_,Math.sqrt(a),y,0,v)}return v&&(this.simplifiedGeometry_=new r(this.type_,y,v,2,this.properties_,this.id_)),this.squaredTolerance_=a,this.simplifiedGeometry_}),this}}r.prototype.getFlatCoordinates=r.prototype.getOrientedFlatCoordinates;const f=r},3762:(ce,gt,c)=>{"use strict";c.d(gt,{A:()=>K});const K=class V{drawCustom(Z,L,b,B,F){}drawGeometry(Z){}setStyle(Z){}drawCircle(Z,L,b){}drawFeature(Z,L,b){}drawGeometryCollection(Z,L,b){}drawLineString(Z,L,b){}drawMultiLineString(Z,L,b){}drawMultiPoint(Z,L,b){}drawMultiPolygon(Z,L,b){}drawPoint(Z,L,b){}drawPolygon(Z,L,b){}drawText(Z,L,b){}setFillStrokeStyle(Z,L){}setImageStyle(Z,L){}setTextStyle(Z,L){}}},2462:(ce,gt,c)=>{"use strict";c.d(gt,{Jw:()=>T,M8:()=>o,MY:()=>u,NT:()=>r,Oq:()=>E,TA:()=>P,Tq:()=>f,ZV:()=>b,_K:()=>_,_m:()=>F,aq:()=>g,eL:()=>h,fZ:()=>U,jT:()=>j,qY:()=>B,vk:()=>p,yY:()=>a});var V=c(9568),K=c(2531),$=c(9330),Z=c(5551),L=c(1776);const b="10px sans-serif",B="#000",F="round",E=[],p=0,_="round",h=10,r="#000",u="center",o="middle",f=[0,0,0,0],g=1,a=new V.A;let y,C=null;const v={},U=function(){const A="32px ",M=["monospace","serif"],D=M.length,H="wmytzilWMYTZIL@#/&?$%10\uf013";let it,lt;function xt(St,Ut,Kt){let ut=!0;for(let Tt=0;Tt<D;++Tt){const Ft=M[Tt];if(lt=I(St+" "+Ut+" "+A+Ft,H),Kt!=Ft){const ie=I(St+" "+Ut+" "+A+Kt+","+Ft,H);ut=ut&&ie!=lt}}return!!ut}function At(){let St=!0;const Ut=a.getKeys();for(let Kt=0,ut=Ut.length;Kt<ut;++Kt){const Tt=Ut[Kt];a.get(Tt)<100&&(xt.apply(this,Tt.split("\n"))?((0,$.I)(v),C=null,y=void 0,a.set(Tt,100)):(a.set(Tt,a.get(Tt)+1,!0),St=!1))}St&&(clearInterval(it),it=void 0)}return function(St){const Ut=(0,L.K5)(St);if(!Ut)return;const Kt=Ut.families;for(let ut=0,Tt=Kt.length;ut<Tt;++ut){const Ft=Kt[ut],ie=Ut.style+"\n"+Ut.weight+"\n"+Ft;void 0===a.get(ie)&&(a.set(ie,100,!0),xt(Ut.style,Ut.weight,Ft)||(a.set(ie,0,!0),void 0===it&&(it=setInterval(At,32))))}}}(),w=function(){let R;return function(A){let M=v[A];if(null==M){if(K.Wl){const D=(0,L.K5)(A),H=z(A,"\u017dg");M=(isNaN(Number(D.lineHeight))?1.2:Number(D.lineHeight))*(H.actualBoundingBoxAscent+H.actualBoundingBoxDescent)}else R||(R=document.createElement("div"),R.innerHTML="M",R.style.minHeight="0",R.style.maxHeight="none",R.style.height="auto",R.style.padding="0",R.style.border="none",R.style.position="absolute",R.style.display="block",R.style.left="-99999px"),R.style.font=A,document.body.appendChild(R),M=R.offsetHeight,document.body.removeChild(R);v[A]=M}return M}}();function z(R,A){return C||(C=(0,Z.Y)(1,1)),R!=y&&(C.font=R,y=C.font),C.measureText(A)}function I(R,A){return z(R,A).width}function P(R,A,M){if(A in M)return M[A];const D=A.split("\n").reduce((H,it)=>Math.max(H,I(R,it)),0);return M[A]=D,D}function j(R,A){const M=[],D=[],H=[];let it=0,lt=0,xt=0,At=0;for(let St=0,Ut=A.length;St<=Ut;St+=2){const Kt=A[St];if("\n"===Kt||St===Ut){it=Math.max(it,lt),H.push(lt),lt=0,xt+=At,At=0;continue}const ut=A[St+1]||R.font,Tt=I(ut,Kt);M.push(Tt),lt+=Tt;const Ft=w(ut);D.push(Ft),At=Math.max(At,Ft)}return{width:it,height:xt,widths:M,heights:D,lineWidths:H}}function T(R,A,M,D,H,it,lt,xt,At,St,Ut){R.save(),1!==M&&(void 0===R.globalAlpha?R.globalAlpha=Kt=>Kt.globalAlpha*=M:R.globalAlpha*=M),A&&R.transform.apply(R,A),D.contextInstructions?(R.translate(At,St),R.scale(Ut[0],Ut[1]),function O(R,A){const M=R.contextInstructions;for(let D=0,H=M.length;D<H;D+=2)Array.isArray(M[D+1])?A[M[D]].apply(A,M[D+1]):A[M[D]]=M[D+1]}(D,R)):Ut[0]<0||Ut[1]<0?(R.translate(At,St),R.scale(Ut[0],Ut[1]),R.drawImage(D,H,it,lt,xt,0,0,lt,xt)):R.drawImage(D,H,it,lt,xt,At,St,lt*Ut[0],xt*Ut[1]),R.restore()}},570:(ce,gt,c)=>{"use strict";c.d(gt,{A:()=>p});var V=c(7205),K=c(1524),$=c(3762),Z=c(2775),L=c(8507),b=c(2462),B=c(2058),F=c(7697);const p=class E extends $.A{constructor(h,r,u,o){super(),this.tolerance=h,this.maxExtent=r,this.pixelRatio=o,this.maxLineWidth=0,this.resolution=u,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_=null,this.bufferedMaxExtent_=null,this.instructions=[],this.coordinates=[],this.tmpCoordinate_=[],this.hitDetectionInstructions=[],this.state={}}applyPixelRatio(h){const r=this.pixelRatio;return 1==r?h:h.map(function(u){return u*r})}appendFlatPointCoordinates(h,r){const u=this.getBufferedMaxExtent(),o=this.tmpCoordinate_,f=this.coordinates;let g=f.length;for(let a=0,C=h.length;a<C;a+=r)o[0]=h[a],o[1]=h[a+1],(0,L.Ym)(u,o)&&(f[g++]=o[0],f[g++]=o[1]);return g}appendFlatLineCoordinates(h,r,u,o,f,g){const a=this.coordinates;let C=a.length;const y=this.getBufferedMaxExtent();g&&(r+=o);let v=h[r],U=h[r+1];const w=this.tmpCoordinate_;let I,P,j,z=!0;for(I=r+o;I<u;I+=o)w[0]=h[I],w[1]=h[I+1],j=(0,L.vz)(y,w),j!==P?(z&&(a[C++]=v,a[C++]=U,z=!1),a[C++]=w[0],a[C++]=w[1]):j===K.A.INTERSECTING?(a[C++]=w[0],a[C++]=w[1],z=!1):z=!0,v=w[0],U=w[1],P=j;return(f&&z||I===r+o)&&(a[C++]=v,a[C++]=U),C}drawCustomCoordinates_(h,r,u,o,f){for(let g=0,a=u.length;g<a;++g){const C=u[g],y=this.appendFlatLineCoordinates(h,r,C,o,!1,!1);f.push(y),r=C}return r}drawCustom(h,r,u,o,f){this.beginGeometry(h,r,f);const g=h.getType(),a=h.getStride(),C=this.coordinates.length;let y,v,U,w,z;switch(g){case"MultiPolygon":y=h.getOrientedFlatCoordinates(),w=[];const I=h.getEndss();z=0;for(let P=0,j=I.length;P<j;++P){const Y=[];z=this.drawCustomCoordinates_(y,z,I[P],a,Y),w.push(Y)}this.instructions.push([V.Ay.CUSTOM,C,w,h,u,F.Dz,f]),this.hitDetectionInstructions.push([V.Ay.CUSTOM,C,w,h,o||u,F.Dz,f]);break;case"Polygon":case"MultiLineString":U=[],y="Polygon"==g?h.getOrientedFlatCoordinates():h.getFlatCoordinates(),z=this.drawCustomCoordinates_(y,0,h.getEnds(),a,U),this.instructions.push([V.Ay.CUSTOM,C,U,h,u,F.cD,f]),this.hitDetectionInstructions.push([V.Ay.CUSTOM,C,U,h,o||u,F.cD,f]);break;case"LineString":case"Circle":y=h.getFlatCoordinates(),v=this.appendFlatLineCoordinates(y,0,y.length,a,!1,!1),this.instructions.push([V.Ay.CUSTOM,C,v,h,u,F.n2,f]),this.hitDetectionInstructions.push([V.Ay.CUSTOM,C,v,h,o||u,F.n2,f]);break;case"MultiPoint":y=h.getFlatCoordinates(),v=this.appendFlatPointCoordinates(y,a),v>C&&(this.instructions.push([V.Ay.CUSTOM,C,v,h,u,F.n2,f]),this.hitDetectionInstructions.push([V.Ay.CUSTOM,C,v,h,o||u,F.n2,f]));break;case"Point":y=h.getFlatCoordinates(),this.coordinates.push(y[0],y[1]),v=this.coordinates.length,this.instructions.push([V.Ay.CUSTOM,C,v,h,u,void 0,f]),this.hitDetectionInstructions.push([V.Ay.CUSTOM,C,v,h,o||u,void 0,f])}this.endGeometry(r)}beginGeometry(h,r,u){this.beginGeometryInstruction1_=[V.Ay.BEGIN_GEOMETRY,r,0,h,u],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[V.Ay.BEGIN_GEOMETRY,r,0,h,u],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)}finish(){return{instructions:this.instructions,hitDetectionInstructions:this.hitDetectionInstructions,coordinates:this.coordinates}}reverseHitDetectionInstructions(){const h=this.hitDetectionInstructions;let r;h.reverse();const u=h.length;let o,f,g=-1;for(r=0;r<u;++r)o=h[r],f=o[0],f==V.Ay.END_GEOMETRY?g=r:f==V.Ay.BEGIN_GEOMETRY&&(o[2]=r,(0,B.gI)(this.hitDetectionInstructions,g,r),g=-1)}setFillStrokeStyle(h,r){const u=this.state;if(h){const o=h.getColor();u.fillPatternScale=o&&"object"==typeof o&&"src"in o?this.pixelRatio:1,u.fillStyle=(0,Z.F)(o||b.qY)}else u.fillStyle=void 0;if(r){const o=r.getColor();u.strokeStyle=(0,Z.F)(o||b.NT);const f=r.getLineCap();u.lineCap=void 0!==f?f:b._m;const g=r.getLineDash();u.lineDash=g?g.slice():b.Oq;const a=r.getLineDashOffset();u.lineDashOffset=a||b.vk;const C=r.getLineJoin();u.lineJoin=void 0!==C?C:b._K;const y=r.getWidth();u.lineWidth=void 0!==y?y:b.aq;const v=r.getMiterLimit();u.miterLimit=void 0!==v?v:b.eL,u.lineWidth>this.maxLineWidth&&(this.maxLineWidth=u.lineWidth,this.bufferedMaxExtent_=null)}else u.strokeStyle=void 0,u.lineCap=void 0,u.lineDash=null,u.lineDashOffset=void 0,u.lineJoin=void 0,u.lineWidth=void 0,u.miterLimit=void 0}createFill(h){const r=h.fillStyle,u=[V.Ay.SET_FILL_STYLE,r];return"string"!=typeof r&&u.push(h.fillPatternScale),u}applyStroke(h){this.instructions.push(this.createStroke(h))}createStroke(h){return[V.Ay.SET_STROKE_STYLE,h.strokeStyle,h.lineWidth*this.pixelRatio,h.lineCap,h.lineJoin,h.miterLimit,this.applyPixelRatio(h.lineDash),h.lineDashOffset*this.pixelRatio]}updateFillStyle(h,r){const u=h.fillStyle;("string"!=typeof u||h.currentFillStyle!=u)&&(void 0!==u&&this.instructions.push(r.call(this,h)),h.currentFillStyle=u)}updateStrokeStyle(h,r){const u=h.strokeStyle,o=h.lineCap,f=h.lineDash,g=h.lineDashOffset,a=h.lineJoin,C=h.lineWidth,y=h.miterLimit;(h.currentStrokeStyle!=u||h.currentLineCap!=o||f!=h.currentLineDash&&!(0,B.aI)(h.currentLineDash,f)||h.currentLineDashOffset!=g||h.currentLineJoin!=a||h.currentLineWidth!=C||h.currentMiterLimit!=y)&&(void 0!==u&&r.call(this,h),h.currentStrokeStyle=u,h.currentLineCap=o,h.currentLineDash=f,h.currentLineDashOffset=g,h.currentLineJoin=a,h.currentLineWidth=C,h.currentMiterLimit=y)}endGeometry(h){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;const r=[V.Ay.END_GEOMETRY,h];this.instructions.push(r),this.hitDetectionInstructions.push(r)}getBufferedMaxExtent(){return!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=(0,L.o8)(this.maxExtent),this.maxLineWidth>0)&&(0,L.r)(this.bufferedMaxExtent_,this.resolution*(this.maxLineWidth+1)/2,this.bufferedMaxExtent_),this.bufferedMaxExtent_}}},99:(ce,gt,c)=>{"use strict";c.d(gt,{A:()=>o});var V=c(570),K=c(7205),$=c(8507);var b=c(2462);var E=c(463);const _=class p extends V.A{constructor(g,a,C,y){super(g,a,C,y)}drawFlatCoordinatess_(g,a,C,y){const v=this.state,U=void 0!==v.fillStyle,w=void 0!==v.strokeStyle,z=C.length;this.instructions.push(K.th),this.hitDetectionInstructions.push(K.th);for(let I=0;I<z;++I){const P=C[I],j=this.coordinates.length,Y=this.appendFlatLineCoordinates(g,a,P,y,!0,!w),T=[K.Ay.MOVE_TO_LINE_TO,j,Y];this.instructions.push(T),this.hitDetectionInstructions.push(T),w&&(this.instructions.push(K.kx),this.hitDetectionInstructions.push(K.kx)),a=P}return U&&(this.instructions.push(K.I5),this.hitDetectionInstructions.push(K.I5)),w&&(this.instructions.push(K.VD),this.hitDetectionInstructions.push(K.VD)),a}drawCircle(g,a,C){const y=this.state;if(void 0===y.fillStyle&&void 0===y.strokeStyle)return;this.setFillStrokeStyles_(),this.beginGeometry(g,a,C),void 0!==y.fillStyle&&this.hitDetectionInstructions.push([K.Ay.SET_FILL_STYLE,b.qY]),void 0!==y.strokeStyle&&this.hitDetectionInstructions.push([K.Ay.SET_STROKE_STYLE,y.strokeStyle,y.lineWidth,y.lineCap,y.lineJoin,y.miterLimit,b.Oq,b.vk]);const w=g.getFlatCoordinates(),z=g.getStride(),I=this.coordinates.length;this.appendFlatLineCoordinates(w,0,w.length,z,!1,!1);const P=[K.Ay.CIRCLE,I];this.instructions.push(K.th,P),this.hitDetectionInstructions.push(K.th,P),void 0!==y.fillStyle&&(this.instructions.push(K.I5),this.hitDetectionInstructions.push(K.I5)),void 0!==y.strokeStyle&&(this.instructions.push(K.VD),this.hitDetectionInstructions.push(K.VD)),this.endGeometry(a)}drawPolygon(g,a,C){const y=this.state;if(void 0===y.fillStyle&&void 0===y.strokeStyle)return;this.setFillStrokeStyles_(),this.beginGeometry(g,a,C),void 0!==y.fillStyle&&this.hitDetectionInstructions.push([K.Ay.SET_FILL_STYLE,b.qY]),void 0!==y.strokeStyle&&this.hitDetectionInstructions.push([K.Ay.SET_STROKE_STYLE,y.strokeStyle,y.lineWidth,y.lineCap,y.lineJoin,y.miterLimit,b.Oq,b.vk]);const w=g.getEnds(),z=g.getOrientedFlatCoordinates(),I=g.getStride();this.drawFlatCoordinatess_(z,0,w,I),this.endGeometry(a)}drawMultiPolygon(g,a,C){const y=this.state;if(void 0===y.fillStyle&&void 0===y.strokeStyle)return;this.setFillStrokeStyles_(),this.beginGeometry(g,a,C),void 0!==y.fillStyle&&this.hitDetectionInstructions.push([K.Ay.SET_FILL_STYLE,b.qY]),void 0!==y.strokeStyle&&this.hitDetectionInstructions.push([K.Ay.SET_STROKE_STYLE,y.strokeStyle,y.lineWidth,y.lineCap,y.lineJoin,y.miterLimit,b.Oq,b.vk]);const w=g.getEndss(),z=g.getOrientedFlatCoordinates(),I=g.getStride();let P=0;for(let j=0,Y=w.length;j<Y;++j)P=this.drawFlatCoordinatess_(z,P,w[j],I);this.endGeometry(a)}finish(){this.reverseHitDetectionInstructions(),this.state=null;const g=this.tolerance;if(0!==g){const a=this.coordinates;for(let C=0,y=a.length;C<y;++C)a[C]=(0,E.n$)(a[C],g)}return super.finish()}setFillStrokeStyles_(){const g=this.state;void 0!==g.fillStyle&&this.updateFillStyle(g,this.createFill),void 0!==g.strokeStyle&&this.updateStrokeStyle(g,this.applyStroke)}};var h=c(4848);const r={Circle:_,Default:V.A,Image:class Z extends V.A{constructor(g,a,C,y){super(g,a,C,y),this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.anchorX_=void 0,this.anchorY_=void 0,this.height_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.scale_=void 0,this.width_=void 0,this.declutterMode_=void 0,this.declutterImageWithText_=void 0}drawPoint(g,a,C){if(!this.image_||this.maxExtent&&!(0,$.Ym)(this.maxExtent,g.getFlatCoordinates()))return;this.beginGeometry(g,a,C);const y=g.getFlatCoordinates(),v=g.getStride(),U=this.coordinates.length,w=this.appendFlatPointCoordinates(y,v);this.instructions.push([K.Ay.DRAW_IMAGE,U,w,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([K.Ay.DRAW_IMAGE,U,w,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(a)}drawMultiPoint(g,a,C){if(!this.image_)return;this.beginGeometry(g,a,C);const y=g.getFlatCoordinates(),v=[];for(let z=0,I=y.length;z<I;z+=g.getStride())(!this.maxExtent||(0,$.Ym)(this.maxExtent,y.slice(z,z+2)))&&v.push(y[z],y[z+1]);const U=this.coordinates.length,w=this.appendFlatPointCoordinates(v,2);this.instructions.push([K.Ay.DRAW_IMAGE,U,w,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([K.Ay.DRAW_IMAGE,U,w,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(a)}finish(){return this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0,super.finish()}setImageStyle(g,a){const C=g.getAnchor(),y=g.getSize(),v=g.getOrigin();this.imagePixelRatio_=g.getPixelRatio(this.pixelRatio),this.anchorX_=C[0],this.anchorY_=C[1],this.hitDetectionImage_=g.getHitDetectionImage(),this.image_=g.getImage(this.pixelRatio),this.height_=y[1],this.opacity_=g.getOpacity(),this.originX_=v[0],this.originY_=v[1],this.rotateWithView_=g.getRotateWithView(),this.rotation_=g.getRotation(),this.scale_=g.getScaleArray(),this.width_=y[0],this.declutterMode_=g.getDeclutterMode(),this.declutterImageWithText_=a}},LineString:class B extends V.A{constructor(g,a,C,y){super(g,a,C,y)}drawFlatCoordinates_(g,a,C,y){const v=this.coordinates.length,U=this.appendFlatLineCoordinates(g,a,C,y,!1,!1),w=[K.Ay.MOVE_TO_LINE_TO,v,U];return this.instructions.push(w),this.hitDetectionInstructions.push(w),C}drawLineString(g,a,C){const y=this.state;if(void 0===y.strokeStyle||void 0===y.lineWidth)return;this.updateStrokeStyle(y,this.applyStroke),this.beginGeometry(g,a,C),this.hitDetectionInstructions.push([K.Ay.SET_STROKE_STYLE,y.strokeStyle,y.lineWidth,y.lineCap,y.lineJoin,y.miterLimit,b.Oq,b.vk],K.th);const w=g.getFlatCoordinates(),z=g.getStride();this.drawFlatCoordinates_(w,0,w.length,z),this.hitDetectionInstructions.push(K.VD),this.endGeometry(a)}drawMultiLineString(g,a,C){const y=this.state;if(void 0===y.strokeStyle||void 0===y.lineWidth)return;this.updateStrokeStyle(y,this.applyStroke),this.beginGeometry(g,a,C),this.hitDetectionInstructions.push([K.Ay.SET_STROKE_STYLE,y.strokeStyle,y.lineWidth,y.lineCap,y.lineJoin,y.miterLimit,b.Oq,b.vk],K.th);const w=g.getEnds(),z=g.getFlatCoordinates(),I=g.getStride();let P=0;for(let j=0,Y=w.length;j<Y;++j)P=this.drawFlatCoordinates_(z,P,w[j],I);this.hitDetectionInstructions.push(K.VD),this.endGeometry(a)}finish(){const g=this.state;return null!=g.lastStroke&&g.lastStroke!=this.coordinates.length&&this.instructions.push(K.VD),this.reverseHitDetectionInstructions(),this.state=null,super.finish()}applyStroke(g){null!=g.lastStroke&&g.lastStroke!=this.coordinates.length&&(this.instructions.push(K.VD),g.lastStroke=this.coordinates.length),g.lastStroke=0,super.applyStroke(g),this.instructions.push(K.th)}},Polygon:_,Text:h.A},o=class u{constructor(g,a,C,y){this.tolerance_=g,this.maxExtent_=a,this.pixelRatio_=y,this.resolution_=C,this.buildersByZIndex_={}}finish(){const g={};for(const a in this.buildersByZIndex_){g[a]=g[a]||{};const C=this.buildersByZIndex_[a];for(const y in C){const v=C[y].finish();g[a][y]=v}}return g}getBuilder(g,a){const C=void 0!==g?g.toString():"0";let y=this.buildersByZIndex_[C];void 0===y&&(y={},this.buildersByZIndex_[C]=y);let v=y[a];return void 0===v&&(v=new(0,r[a])(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_),y[a]=v),v}}},3826:(ce,gt,c)=>{"use strict";c.d(gt,{y2:()=>I,$i:()=>P,x$:()=>j,Ay:()=>R});var V=c(7205),K=c(1120),$=c(4848),Z=c(1983),L=c(8507),b=c(2462),B=c(9973),F=c(9662);function E(A,M,D,H,it,lt,xt,At,St,Ut,Kt,ut){let Tt=A[M],Ft=A[M+1],ie=0,Zt=0,ge=0,ne=0;function fe(){ie=Tt,Zt=Ft,Tt=A[M+=H],Ft=A[M+1],ne+=ge,ge=Math.sqrt((Tt-ie)*(Tt-ie)+(Ft-Zt)*(Ft-Zt))}do{fe()}while(M<D-H&&ne+ge<lt);let rt=0===ge?0:(lt-ne)/ge;const jt=(0,B.Cc)(ie,Tt,rt),Yt=(0,B.Cc)(Zt,Ft,rt),ve=M-H,Me=ne,Ye=lt+At*St(Ut,it,Kt);for(;M<D-H&&ne+ge<Ye;)fe();rt=0===ge?0:(Ye-ne)/ge;const Ze=(0,B.Cc)(ie,Tt,rt),pi=(0,B.Cc)(Zt,Ft,rt);let ei;if(ut){const Ai=[jt,Yt,Ze,pi];(0,F.e$)(Ai,0,4,2,ut,Ai,Ai),ei=Ai[0]>Ai[2]}else ei=jt>Ze;const ai=Math.PI,Ui=[],Ue=ve+H===M;let Oi;if(ge=0,ne=Me,Tt=A[M=ve],Ft=A[M+1],Ue)return fe(),Oi=Math.atan2(Ft-Zt,Tt-ie),ei&&(Oi+=Oi>0?-ai:ai),Ui[0]=[(Ze+jt)/2,(pi+Yt)/2,(Ye-lt)/2,Oi,it],Ui;for(let Ai=0,an=(it=it.replace(/\n/g," ")).length;Ai<an;){fe();let Yi=Math.atan2(Ft-Zt,Tt-ie);if(ei&&(Yi+=Yi>0?-ai:ai),void 0!==Oi){let dt=Yi-Oi;if(dt+=dt>ai?-2*ai:dt<-ai?2*ai:0,Math.abs(dt)>xt)return null}Oi=Yi;const Ct=Ai;let nt=0;for(;Ai<an;++Ai){const ue=At*St(Ut,it[ei?an-Ai-1:Ai],Kt);if(M+H<D&&ne+ge<lt+nt+ue/2)break;nt+=ue}if(Ai===Ct)continue;const ht=ei?it.substring(an-Ct,an-Ai):it.substring(Ct,Ai);rt=0===ge?0:(lt+nt/2-ne)/ge;const It=(0,B.Cc)(ie,Tt,rt),Pt=(0,B.Cc)(Zt,Ft,rt);Ui.push([It,Pt,nt/2,Yi,ht]),lt+=nt}return Ui}var p=c(2058),_=c(7696);const h=(0,L.S5)(),r=[],u=[],o=[],f=[];function g(A){return A[3].declutterBox}const a=new RegExp("[\u0591-\u08ff\ufb1d-\ufdff\ufe70-\ufefc\u0800-\u0fff\ue800-\uefff]");function C(A,M){return"start"===M?M=a.test(A)?"right":"left":"end"===M&&(M=a.test(A)?"left":"right"),$.E[M]}function y(A,M,D){return D>0&&A.push("\n",""),A.push(M,""),A}const U=class v{constructor(M,D,H,it,lt){this.overlaps=H,this.pixelRatio=D,this.resolution=M,this.instructions=it.instructions,this.coordinates=it.coordinates,this.coordinateCache_={},this.renderedTransform_=(0,Z.vt)(),this.hitDetectionInstructions=it.hitDetectionInstructions,this.pixelCoordinates_=null,this.viewRotation_=0,this.fillStates=it.fillStates||{},this.strokeStates=it.strokeStates||{},this.textStates=it.textStates||{},this.widths_={},this.labels_={},this.zIndexContext_=lt?new K.A:null}getZIndexContext(){return this.zIndexContext_}createLabel(M,D,H,it){const lt=M+D+H+it;if(this.labels_[lt])return this.labels_[lt];const xt=it?this.strokeStates[it]:null,At=H?this.fillStates[H]:null,St=this.textStates[D],Ut=this.pixelRatio,Kt=[St.scale[0]*Ut,St.scale[1]*Ut],ut=Array.isArray(M),Tt=St.justify?$.E[St.justify]:C(Array.isArray(M)?M[0]:M,St.textAlign||b.MY),Ft=it&&xt.lineWidth?xt.lineWidth:0,ie=ut?M:M.split("\n").reduce(y,[]),{width:Zt,height:ge,widths:ne,heights:fe,lineWidths:rt}=(0,b.jT)(St,ie),jt=Zt+Ft,Yt=[],ve=(jt+2)*Kt[0],Me=(ge+Ft)*Kt[1],Ye={width:ve<0?Math.floor(ve):Math.ceil(ve),height:Me<0?Math.floor(Me):Math.ceil(Me),contextInstructions:Yt};(1!=Kt[0]||1!=Kt[1])&&Yt.push("scale",Kt),it&&(Yt.push("strokeStyle",xt.strokeStyle),Yt.push("lineWidth",Ft),Yt.push("lineCap",xt.lineCap),Yt.push("lineJoin",xt.lineJoin),Yt.push("miterLimit",xt.miterLimit),Yt.push("setLineDash",[xt.lineDash]),Yt.push("lineDashOffset",xt.lineDashOffset)),H&&Yt.push("fillStyle",At.fillStyle),Yt.push("textBaseline","middle"),Yt.push("textAlign","center");const Ze=.5-Tt;let pi=Tt*jt+Ze*Ft;const ei=[],ai=[];let an,Ui=0,Ue=0,Oi=0,Ai=0;for(let Yi=0,Ct=ie.length;Yi<Ct;Yi+=2){const nt=ie[Yi];if("\n"===nt){Ue+=Ui,Ui=0,pi=Tt*jt+Ze*Ft,++Ai;continue}const ht=ie[Yi+1]||St.font;ht!==an&&(it&&ei.push("font",ht),H&&ai.push("font",ht),an=ht),Ui=Math.max(Ui,fe[Oi]);const It=[nt,pi+Ze*ne[Oi]+Tt*(ne[Oi]-rt[Ai]),.5*(Ft+Ui)+Ue];pi+=ne[Oi],it&&ei.push("strokeText",It),H&&ai.push("fillText",It),++Oi}return Array.prototype.push.apply(Yt,ei),Array.prototype.push.apply(Yt,ai),this.labels_[lt]=Ye,Ye}replayTextBackground_(M,D,H,it,lt,xt,At){M.beginPath(),M.moveTo.apply(M,D),M.lineTo.apply(M,H),M.lineTo.apply(M,it),M.lineTo.apply(M,lt),M.lineTo.apply(M,D),xt&&(this.alignAndScaleFill_=xt[2],this.fill_(M)),At&&(this.setStrokeStyle_(M,At),M.stroke())}calculateImageOrLabelDimensions_(M,D,H,it,lt,xt,At,St,Ut,Kt,ut,Tt,Ft,ie,Zt,ge){let ne=H-(At*=Tt[0]),fe=it-(St*=Tt[1]);const rt=lt+Ut>M?M-Ut:lt,jt=xt+Kt>D?D-Kt:xt,Yt=ie[3]+rt*Tt[0]+ie[1],ve=ie[0]+jt*Tt[1]+ie[2],Me=ne-ie[3],Ye=fe-ie[0];let Ze;return(Zt||0!==ut)&&(r[0]=Me,f[0]=Me,r[1]=Ye,u[1]=Ye,u[0]=Me+Yt,o[0]=u[0],o[1]=Ye+ve,f[1]=o[1]),0!==ut?(Ze=(0,Z.Zz)((0,Z.vt)(),H,it,1,1,ut,-H,-it),(0,Z.Bb)(Ze,r),(0,Z.Bb)(Ze,u),(0,Z.Bb)(Ze,o),(0,Z.Bb)(Ze,f),(0,L.N)(Math.min(r[0],u[0],o[0],f[0]),Math.min(r[1],u[1],o[1],f[1]),Math.max(r[0],u[0],o[0],f[0]),Math.max(r[1],u[1],o[1],f[1]),h)):(0,L.N)(Math.min(Me,Me+Yt),Math.min(Ye,Ye+ve),Math.max(Me,Me+Yt),Math.max(Ye,Ye+ve),h),Ft&&(ne=Math.round(ne),fe=Math.round(fe)),{drawImageX:ne,drawImageY:fe,drawImageW:rt,drawImageH:jt,originX:Ut,originY:Kt,declutterBox:{minX:h[0],minY:h[1],maxX:h[2],maxY:h[3],value:ge},canvasTransform:Ze,scale:Tt}}replayImageOrLabel_(M,D,H,it,lt,xt,At){const Ut=it.declutterBox,Kt=At?At[2]*it.scale[0]/2:0;return Ut.minX-Kt<=D[0]&&Ut.maxX+Kt>=0&&Ut.minY-Kt<=D[1]&&Ut.maxY+Kt>=0&&(!(!xt&&!At)&&this.replayTextBackground_(M,r,u,o,f,xt,At),(0,b.Jw)(M,it.canvasTransform,lt,H,it.originX,it.originY,it.drawImageW,it.drawImageH,it.drawImageX,it.drawImageY,it.scale)),!0}fill_(M){const D=this.alignAndScaleFill_;if(D){const H=(0,Z.Bb)(this.renderedTransform_,[0,0]),it=512*this.pixelRatio;M.save(),M.translate(H[0]%it,H[1]%it),1!==D&&M.scale(D,D),M.rotate(this.viewRotation_)}M.fill(),D&&M.restore()}setStrokeStyle_(M,D){M.strokeStyle=D[1],M.lineWidth=D[2],M.lineCap=D[3],M.lineJoin=D[4],M.miterLimit=D[5],M.lineDashOffset=D[7],M.setLineDash(D[6])}drawLabelWithPointPlacement_(M,D,H,it){const lt=this.textStates[D],xt=this.createLabel(M,D,it,H),At=this.strokeStates[H],St=this.pixelRatio,Ut=C(Array.isArray(M)?M[0]:M,lt.textAlign||b.MY),Kt=$.E[lt.textBaseline||b.M8],ut=At&&At.lineWidth?At.lineWidth:0;return{label:xt,anchorX:Ut*(xt.width/St-2*lt.scale[0])+2*(.5-Ut)*ut,anchorY:Kt*xt.height/St+2*(.5-Kt)*ut}}execute_(M,D,H,it,lt,xt,At,St){const Ut=this.zIndexContext_;let Kt;this.pixelCoordinates_&&(0,p.aI)(H,this.renderedTransform_)?Kt=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),Kt=(0,F.Rc)(this.coordinates,0,this.coordinates.length,2,H,this.pixelCoordinates_),(0,Z.k3)(this.renderedTransform_,H));let ut=0;const Tt=it.length;let ie,Zt,ge,ne,fe,rt,jt,Yt,ve,Me,Ye,Ze,pi,Ft=0,ei=0,ai=0,Ui=null,Ue=null;const Oi=this.coordinateCache_,Ai=this.viewRotation_,an=Math.round(1e12*Math.atan2(-H[1],H[0]))/1e12,Yi={context:M,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:Ai},Ct=this.instructions!=it||this.overlaps?0:200;let nt,ht,It,Pt;for(;ut<Tt;){const dt=it[ut];switch(dt[0]){case V.Ay.BEGIN_GEOMETRY:nt=dt[1],Pt=dt[3],nt.getGeometry()?void 0===At||(0,L.HY)(At,Pt.getExtent())?++ut:ut=dt[2]+1:ut=dt[2],Ut&&(Ut.zIndex=dt[4]);break;case V.Ay.BEGIN_PATH:ei>Ct&&(this.fill_(M),ei=0),ai>Ct&&(M.stroke(),ai=0),!ei&&!ai&&(M.beginPath(),fe=NaN,rt=NaN),++ut;break;case V.Ay.CIRCLE:Ft=dt[1];const Ce=Kt[Ft],He=Kt[Ft+1],Di=Kt[Ft+2]-Ce,yi=Kt[Ft+3]-He,Zn=Math.sqrt(Di*Di+yi*yi);M.moveTo(Ce+Zn,He),M.arc(Ce,He,Zn,0,2*Math.PI,!0),++ut;break;case V.Ay.CLOSE_PATH:M.closePath(),++ut;break;case V.Ay.CUSTOM:Ft=dt[1],ie=dt[2];const Ps=dt[4],Nn=dt[5];Yi.geometry=dt[3],Yi.feature=nt,ut in Oi||(Oi[ut]=[]);const Mn=Oi[ut];Nn?Nn(Kt,Ft,ie,2,Mn):(Mn[0]=Kt[Ft],Mn[1]=Kt[Ft+1],Mn.length=2),Ut&&(Ut.zIndex=dt[6]),Ps(Mn,Yi),++ut;break;case V.Ay.DRAW_IMAGE:Ft=dt[1],ie=dt[2],ve=dt[3],Zt=dt[4],ge=dt[5];let dn=dt[6];const ur=dt[7],qs=dt[8],Os=dt[9],hs=dt[10];let Vi=dt[11];const Ci=dt[12];let Ii=dt[13];ne=dt[14]||"declutter";const Ds=dt[15];if(!ve&&dt.length>=20){Me=dt[19],Ye=dt[20],Ze=dt[21],pi=dt[22];const bn=this.drawLabelWithPointPlacement_(Me,Ye,Ze,pi);ve=bn.label,dt[3]=ve,Zt=(bn.anchorX-dt[23])*this.pixelRatio,dt[4]=Zt,ge=(bn.anchorY-dt[24])*this.pixelRatio,dt[5]=ge,dn=ve.height,dt[6]=dn,Ii=ve.width,dt[13]=Ii}let Ls,dr,Rs,tr;dt.length>25&&(Ls=dt[25]),dt.length>17?(dr=dt[16],Rs=dt[17],tr=dt[18]):(dr=b.Tq,Rs=!1,tr=!1),hs&&an?Vi+=Ai:!hs&&!an&&(Vi-=Ai);let $r=0;for(;Ft<ie;Ft+=2){if(Ls&&Ls[$r++]<Ii/this.pixelRatio)continue;const bn=this.calculateImageOrLabelDimensions_(ve.width,ve.height,Kt[Ft],Kt[Ft+1],Ii,dn,Zt,ge,qs,Os,Vi,Ci,lt,dr,Rs||tr,nt),es=[M,D,ve,bn,ur,Rs?Ui:null,tr?Ue:null];if(St){let Pn,Ei,Wn,cs,us;if(Ds){const fn=ie-Ft;if(!Ds[fn]){Ds[fn]={args:es,declutterMode:ne};continue}const nn=Ds[fn];Pn=nn.args,Ei=nn.declutterMode,delete Ds[fn],Wn=g(Pn)}if(Pn&&("declutter"!==Ei||!St.collides(Wn))&&(cs=!0),("declutter"!==ne||!St.collides(bn.declutterBox))&&(us=!0),"declutter"===Ei&&"declutter"===ne){const fn=cs&&us;cs=fn,us=fn}cs&&("none"!==Ei&&St.insert(Wn),this.replayImageOrLabel_.apply(this,Pn)),us&&("none"!==ne&&St.insert(bn.declutterBox),this.replayImageOrLabel_.apply(this,es))}else this.replayImageOrLabel_.apply(this,es)}++ut;break;case V.Ay.DRAW_CHARS:const Fe=dt[1],xs=dt[2],Ms=dt[3],Fs=dt[4];pi=dt[5];const Ns=dt[6],Pr=dt[7],Rr=dt[8];Ze=dt[9];const fr=dt[10];Me=dt[11],Ye=dt[12];const An=[dt[13],dt[13]];ne=dt[14]||"declutter";const Br=this.textStates[Ye],As=Br.font,br=[Br.scale[0]*Pr,Br.scale[1]*Pr];let er;As in this.widths_?er=this.widths_[As]:(er={},this.widths_[As]=er);const Wr=(0,_.k)(Kt,Fe,xs,2),kr=Math.abs(br[0])*(0,b.TA)(As,Me,er);if(Fs||kr<=Wr){const Pn=E(Kt,Fe,xs,2,Me,(Wr-kr)*C(Me,this.textStates[Ye].textAlign),Ns,Math.abs(br[0]),b.TA,As,er,an?0:this.viewRotation_);t:if(Pn){const Ei=[];let Wn,cs,us,fn,nn;if(Ze)for(Wn=0,cs=Pn.length;Wn<cs;++Wn){nn=Pn[Wn],us=nn[4],fn=this.createLabel(us,Ye,"",Ze),Zt=nn[2]+(br[0]<0?-fr:fr),ge=Ms*fn.height+2*(.5-Ms)*fr*br[1]/br[0]-Rr;const kn=this.calculateImageOrLabelDimensions_(fn.width,fn.height,nn[0],nn[1],fn.width,fn.height,Zt,ge,0,0,nn[3],An,!1,b.Tq,!1,nt);if(St&&"declutter"===ne&&St.collides(kn.declutterBox))break t;Ei.push([M,D,fn,kn,1,null,null])}if(pi)for(Wn=0,cs=Pn.length;Wn<cs;++Wn){nn=Pn[Wn],us=nn[4],fn=this.createLabel(us,Ye,pi,""),Zt=nn[2],ge=Ms*fn.height-Rr;const kn=this.calculateImageOrLabelDimensions_(fn.width,fn.height,nn[0],nn[1],fn.width,fn.height,Zt,ge,0,0,nn[3],An,!1,b.Tq,!1,nt);if(St&&"declutter"===ne&&St.collides(kn.declutterBox))break t;Ei.push([M,D,fn,kn,1,null,null])}St&&"none"!==ne&&St.load(Ei.map(g));for(let kn=0,ir=Ei.length;kn<ir;++kn)this.replayImageOrLabel_.apply(this,Ei[kn])}}++ut;break;case V.Ay.END_GEOMETRY:if(void 0!==xt){nt=dt[1];const bn=xt(nt,Pt,ne);if(bn)return bn}++ut;break;case V.Ay.FILL:Ct?ei++:this.fill_(M),++ut;break;case V.Ay.MOVE_TO_LINE_TO:for(Ft=dt[1],ie=dt[2],ht=Kt[Ft],It=Kt[Ft+1],M.moveTo(ht,It),fe=ht+.5|0,rt=It+.5|0,Ft+=2;Ft<ie;Ft+=2)ht=Kt[Ft],It=Kt[Ft+1],jt=ht+.5|0,Yt=It+.5|0,(Ft==ie-2||jt!==fe||Yt!==rt)&&(M.lineTo(ht,It),fe=jt,rt=Yt);++ut;break;case V.Ay.SET_FILL_STYLE:Ui=dt,this.alignAndScaleFill_=dt[2],ei&&(this.fill_(M),ei=0,ai&&(M.stroke(),ai=0)),M.fillStyle=dt[1],++ut;break;case V.Ay.SET_STROKE_STYLE:Ue=dt,ai&&(M.stroke(),ai=0),this.setStrokeStyle_(M,dt),++ut;break;case V.Ay.STROKE:Ct?ai++:M.stroke(),++ut;break;default:++ut}}ei&&this.fill_(M),ai&&M.stroke()}execute(M,D,H,it,lt,xt){this.viewRotation_=it,this.execute_(M,D,H,this.instructions,lt,void 0,void 0,xt)}executeHitDetection(M,D,H,it,lt){return this.viewRotation_=H,this.execute_(M,[M.canvas.width,M.canvas.height],D,this.hitDetectionInstructions,!0,it,lt)}};var w=c(5551),z=c(9330);const I=["Polygon","Circle","LineString","Image","Text","Default"],P=["Image","Text"],j=I.filter(A=>!P.includes(A)),T={},R=class Y{constructor(M,D,H,it,lt,xt,At){this.maxExtent_=M,this.overlaps_=it,this.pixelRatio_=H,this.resolution_=D,this.renderBuffer_=xt,this.executorsByZIndex_={},this.hitDetectionContext_=null,this.hitDetectionTransform_=(0,Z.vt)(),this.renderedContext_=null,this.deferredZIndexContexts_={},this.createExecutors_(lt,At)}clip(M,D){const H=this.getClipCoords(D);M.beginPath(),M.moveTo(H[0],H[1]),M.lineTo(H[2],H[3]),M.lineTo(H[4],H[5]),M.lineTo(H[6],H[7]),M.clip()}createExecutors_(M,D){for(const H in M){let it=this.executorsByZIndex_[H];void 0===it&&(it={},this.executorsByZIndex_[H]=it);const lt=M[H];for(const xt in lt)it[xt]=new U(this.resolution_,this.pixelRatio_,this.overlaps_,lt[xt],D)}}hasExecutors(M){for(const D in this.executorsByZIndex_){const H=this.executorsByZIndex_[D];for(let it=0,lt=M.length;it<lt;++it)if(M[it]in H)return!0}return!1}forEachFeatureAtCoordinate(M,D,H,it,lt,xt){const At=2*(it=Math.round(it))+1,St=(0,Z.Zz)(this.hitDetectionTransform_,it+.5,it+.5,1/D,-1/D,-H,-M[0],-M[1]),Ut=!this.hitDetectionContext_;Ut&&(this.hitDetectionContext_=(0,w.Y)(At,At,void 0,{willReadFrequently:!0}));const Kt=this.hitDetectionContext_;let ut;Kt.canvas.width!==At||Kt.canvas.height!==At?(Kt.canvas.width=At,Kt.canvas.height=At):Ut||Kt.clearRect(0,0,At,At),void 0!==this.renderBuffer_&&(ut=(0,L.S5)(),(0,L.$C)(ut,M),(0,L.r)(ut,D*(this.renderBuffer_+it),ut));const Tt=function O(A){if(void 0!==T[A])return T[A];const M=2*A+1,D=A*A,H=new Array(D+1);for(let lt=0;lt<=A;++lt)for(let xt=0;xt<=A;++xt){const At=lt*lt+xt*xt;if(At>D)break;let St=H[At];St||(St=[],H[At]=St),St.push(4*((A+lt)*M+(A+xt))+3),lt>0&&St.push(4*((A-lt)*M+(A+xt))+3),xt>0&&(St.push(4*((A+lt)*M+(A-xt))+3),lt>0&&St.push(4*((A-lt)*M+(A-xt))+3))}const it=[];for(let lt=0,xt=H.length;lt<xt;++lt)H[lt]&&it.push(...H[lt]);return T[A]=it,it}(it);let Ft;function ie(Yt,ve,Me){const Ye=Kt.getImageData(0,0,At,At).data;for(let Ze=0,pi=Tt.length;Ze<pi;Ze++)if(Ye[Tt[Ze]]>0){if(!xt||"none"===Me||"Image"!==Ft&&"Text"!==Ft||xt.includes(Yt)){const ei=(Tt[Ze]-3)/4,ai=it-ei%At,Ui=it-(ei/At|0),Ue=lt(Yt,ve,ai*ai+Ui*Ui);if(Ue)return Ue}Kt.clearRect(0,0,At,At);break}}const Zt=Object.keys(this.executorsByZIndex_).map(Number);let ge,ne,fe,rt,jt;for(Zt.sort(p.V_),ge=Zt.length-1;ge>=0;--ge){const Yt=Zt[ge].toString();for(fe=this.executorsByZIndex_[Yt],ne=I.length-1;ne>=0;--ne)if(Ft=I[ne],rt=fe[Ft],void 0!==rt&&(jt=rt.executeHitDetection(Kt,St,H,ie,ut),jt))return jt}}getClipCoords(M){const D=this.maxExtent_;if(!D)return null;const H=D[0],it=D[1],lt=D[2],xt=D[3],At=[H,it,H,xt,lt,xt,lt,it];return(0,F.Rc)(At,0,8,2,M,At),At}isEmpty(){return(0,z.p)(this.executorsByZIndex_)}execute(M,D,H,it,lt,xt,At){const St=Object.keys(this.executorsByZIndex_).map(Number);St.sort(p.V_),xt=xt||I;const Ut=I.length;let Kt,ut,Tt,Ft,ie;for(At&&St.reverse(),Kt=0,ut=St.length;Kt<ut;++Kt){const Zt=St[Kt].toString();for(ie=this.executorsByZIndex_[Zt],Tt=0,Ft=xt.length;Tt<Ft;++Tt){const ge=xt[Tt],ne=ie[ge];if(void 0!==ne){const fe=null===At?void 0:ne.getZIndexContext(),rt=fe?fe.getContext():M,jt=this.maxExtent_&&"Image"!==ge&&"Text"!==ge;if(jt&&(rt.save(),this.clip(rt,H)),fe&&"Text"!==ge&&"Image"!==ge?fe.pushFunction(Yt=>ne.execute(Yt,D,H,it,lt,At)):ne.execute(rt,D,H,it,lt,At),jt&&rt.restore(),fe){fe.offset();const Yt=St[Kt]*Ut+Tt;this.deferredZIndexContexts_[Yt]||(this.deferredZIndexContexts_[Yt]=[]),this.deferredZIndexContexts_[Yt].push(fe)}}}}this.renderedContext_=M}getDeferredZIndexContexts(){return this.deferredZIndexContexts_}getRenderedContext(){return this.renderedContext_}renderDeferred(){const M=this.deferredZIndexContexts_,D=Object.keys(M).map(Number).sort(p.V_);for(let H=0,it=D.length;H<it;++H)M[D[H]].forEach(lt=>{lt.draw(this.renderedContext_),lt.clear()}),M[D[H]].length=0}}},4548:(ce,gt,c)=>{"use strict";c.d(gt,{A:()=>_});var V=c(3762),K=c(2775),$=c(1983),Z=c(2462),L=c(2058),b=c(8507),B=c(9973),F=c(9662),E=c(1416);const _=class p extends V.A{constructor(r,u,o,f,g,a,C){super(),this.context_=r,this.pixelRatio_=u,this.extent_=o,this.transform_=f,this.transformRotation_=f?(0,B.Mg)(Math.atan2(f[1],f[0]),10):0,this.viewRotation_=g,this.squaredTolerance_=a,this.userTransform_=C,this.contextFillState_=null,this.contextStrokeState_=null,this.contextTextState_=null,this.fillState_=null,this.strokeState_=null,this.image_=null,this.imageAnchorX_=0,this.imageAnchorY_=0,this.imageHeight_=0,this.imageOpacity_=0,this.imageOriginX_=0,this.imageOriginY_=0,this.imageRotateWithView_=!1,this.imageRotation_=0,this.imageScale_=[0,0],this.imageWidth_=0,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=!1,this.textRotation_=0,this.textScale_=[0,0],this.textFillState_=null,this.textStrokeState_=null,this.textState_=null,this.pixelCoordinates_=[],this.tmpLocalTransform_=(0,$.vt)()}drawImages_(r,u,o,f){if(!this.image_)return;const g=(0,F.Rc)(r,u,o,f,this.transform_,this.pixelCoordinates_),a=this.context_,C=this.tmpLocalTransform_,y=a.globalAlpha;1!=this.imageOpacity_&&(a.globalAlpha=y*this.imageOpacity_);let v=this.imageRotation_;0===this.transformRotation_&&(v-=this.viewRotation_),this.imageRotateWithView_&&(v+=this.viewRotation_);for(let U=0,w=g.length;U<w;U+=2){const z=g[U]-this.imageAnchorX_,I=g[U+1]-this.imageAnchorY_;if(0!==v||1!=this.imageScale_[0]||1!=this.imageScale_[1]){const P=z+this.imageAnchorX_,j=I+this.imageAnchorY_;(0,$.Zz)(C,P,j,1,1,v,-P,-j),a.save(),a.transform.apply(a,C),a.translate(P,j),a.scale(this.imageScale_[0],this.imageScale_[1]),a.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,-this.imageAnchorX_,-this.imageAnchorY_,this.imageWidth_,this.imageHeight_),a.restore()}else a.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,z,I,this.imageWidth_,this.imageHeight_)}1!=this.imageOpacity_&&(a.globalAlpha=y)}drawText_(r,u,o,f){if(!this.textState_||""===this.text_)return;this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);const g=(0,F.Rc)(r,u,o,f,this.transform_,this.pixelCoordinates_),a=this.context_;let C=this.textRotation_;for(0===this.transformRotation_&&(C-=this.viewRotation_),this.textRotateWithView_&&(C+=this.viewRotation_);u<o;u+=f){const y=g[u]+this.textOffsetX_,v=g[u+1]+this.textOffsetY_;0!==C||1!=this.textScale_[0]||1!=this.textScale_[1]?(a.save(),a.translate(y-this.textOffsetX_,v-this.textOffsetY_),a.rotate(C),a.translate(this.textOffsetX_,this.textOffsetY_),a.scale(this.textScale_[0],this.textScale_[1]),this.textStrokeState_&&a.strokeText(this.text_,0,0),this.textFillState_&&a.fillText(this.text_,0,0),a.restore()):(this.textStrokeState_&&a.strokeText(this.text_,y,v),this.textFillState_&&a.fillText(this.text_,y,v))}}moveToLineTo_(r,u,o,f,g){const a=this.context_,C=(0,F.Rc)(r,u,o,f,this.transform_,this.pixelCoordinates_);a.moveTo(C[0],C[1]);let y=C.length;g&&(y-=2);for(let v=2;v<y;v+=2)a.lineTo(C[v],C[v+1]);return g&&a.closePath(),o}drawRings_(r,u,o,f){for(let g=0,a=o.length;g<a;++g)u=this.moveToLineTo_(r,u,o[g],f,!0);return u}drawCircle(r){if(this.squaredTolerance_&&(r=r.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),(0,b.HY)(this.extent_,r.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const u=(0,E.v7)(r,this.transform_,this.pixelCoordinates_),o=u[2]-u[0],f=u[3]-u[1],g=Math.sqrt(o*o+f*f),a=this.context_;a.beginPath(),a.arc(u[0],u[1],g,0,2*Math.PI),this.fillState_&&a.fill(),this.strokeState_&&a.stroke()}""!==this.text_&&this.drawText_(r.getCenter(),0,2,2)}}setStyle(r){this.setFillStrokeStyle(r.getFill(),r.getStroke()),this.setImageStyle(r.getImage()),this.setTextStyle(r.getText())}setTransform(r){this.transform_=r}drawGeometry(r){switch(r.getType()){case"Point":this.drawPoint(r);break;case"LineString":this.drawLineString(r);break;case"Polygon":this.drawPolygon(r);break;case"MultiPoint":this.drawMultiPoint(r);break;case"MultiLineString":this.drawMultiLineString(r);break;case"MultiPolygon":this.drawMultiPolygon(r);break;case"GeometryCollection":this.drawGeometryCollection(r);break;case"Circle":this.drawCircle(r)}}drawFeature(r,u){const o=u.getGeometryFunction()(r);o&&(this.setStyle(u),this.drawGeometry(o))}drawGeometryCollection(r){const u=r.getGeometriesArray();for(let o=0,f=u.length;o<f;++o)this.drawGeometry(u[o])}drawPoint(r){this.squaredTolerance_&&(r=r.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const u=r.getFlatCoordinates(),o=r.getStride();this.image_&&this.drawImages_(u,0,u.length,o),""!==this.text_&&this.drawText_(u,0,u.length,o)}drawMultiPoint(r){this.squaredTolerance_&&(r=r.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const u=r.getFlatCoordinates(),o=r.getStride();this.image_&&this.drawImages_(u,0,u.length,o),""!==this.text_&&this.drawText_(u,0,u.length,o)}drawLineString(r){if(this.squaredTolerance_&&(r=r.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),(0,b.HY)(this.extent_,r.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const u=this.context_,o=r.getFlatCoordinates();u.beginPath(),this.moveToLineTo_(o,0,o.length,r.getStride(),!1),u.stroke()}if(""!==this.text_){const u=r.getFlatMidpoint();this.drawText_(u,0,2,2)}}}drawMultiLineString(r){this.squaredTolerance_&&(r=r.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const u=r.getExtent();if((0,b.HY)(this.extent_,u)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const o=this.context_,f=r.getFlatCoordinates();let g=0;const a=r.getEnds(),C=r.getStride();o.beginPath();for(let y=0,v=a.length;y<v;++y)g=this.moveToLineTo_(f,g,a[y],C,!1);o.stroke()}if(""!==this.text_){const o=r.getFlatMidpoints();this.drawText_(o,0,o.length,2)}}}drawPolygon(r){if(this.squaredTolerance_&&(r=r.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),(0,b.HY)(this.extent_,r.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const u=this.context_;u.beginPath(),this.drawRings_(r.getOrientedFlatCoordinates(),0,r.getEnds(),r.getStride()),this.fillState_&&u.fill(),this.strokeState_&&u.stroke()}if(""!==this.text_){const u=r.getFlatInteriorPoint();this.drawText_(u,0,2,2)}}}drawMultiPolygon(r){if(this.squaredTolerance_&&(r=r.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),(0,b.HY)(this.extent_,r.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const u=this.context_,o=r.getOrientedFlatCoordinates();let f=0;const g=r.getEndss(),a=r.getStride();u.beginPath();for(let C=0,y=g.length;C<y;++C)f=this.drawRings_(o,f,g[C],a);this.fillState_&&u.fill(),this.strokeState_&&u.stroke()}if(""!==this.text_){const u=r.getFlatInteriorPoints();this.drawText_(u,0,u.length,2)}}}setContextFillState_(r){const u=this.context_,o=this.contextFillState_;o?o.fillStyle!=r.fillStyle&&(o.fillStyle=r.fillStyle,u.fillStyle=r.fillStyle):(u.fillStyle=r.fillStyle,this.contextFillState_={fillStyle:r.fillStyle})}setContextStrokeState_(r){const u=this.context_,o=this.contextStrokeState_;o?(o.lineCap!=r.lineCap&&(o.lineCap=r.lineCap,u.lineCap=r.lineCap),(0,L.aI)(o.lineDash,r.lineDash)||u.setLineDash(o.lineDash=r.lineDash),o.lineDashOffset!=r.lineDashOffset&&(o.lineDashOffset=r.lineDashOffset,u.lineDashOffset=r.lineDashOffset),o.lineJoin!=r.lineJoin&&(o.lineJoin=r.lineJoin,u.lineJoin=r.lineJoin),o.lineWidth!=r.lineWidth&&(o.lineWidth=r.lineWidth,u.lineWidth=r.lineWidth),o.miterLimit!=r.miterLimit&&(o.miterLimit=r.miterLimit,u.miterLimit=r.miterLimit),o.strokeStyle!=r.strokeStyle&&(o.strokeStyle=r.strokeStyle,u.strokeStyle=r.strokeStyle)):(u.lineCap=r.lineCap,u.setLineDash(r.lineDash),u.lineDashOffset=r.lineDashOffset,u.lineJoin=r.lineJoin,u.lineWidth=r.lineWidth,u.miterLimit=r.miterLimit,u.strokeStyle=r.strokeStyle,this.contextStrokeState_={lineCap:r.lineCap,lineDash:r.lineDash,lineDashOffset:r.lineDashOffset,lineJoin:r.lineJoin,lineWidth:r.lineWidth,miterLimit:r.miterLimit,strokeStyle:r.strokeStyle})}setContextTextState_(r){const u=this.context_,o=this.contextTextState_,f=r.textAlign?r.textAlign:Z.MY;o?(o.font!=r.font&&(o.font=r.font,u.font=r.font),o.textAlign!=f&&(o.textAlign=f,u.textAlign=f),o.textBaseline!=r.textBaseline&&(o.textBaseline=r.textBaseline,u.textBaseline=r.textBaseline)):(u.font=r.font,u.textAlign=f,u.textBaseline=r.textBaseline,this.contextTextState_={font:r.font,textAlign:f,textBaseline:r.textBaseline})}setFillStrokeStyle(r,u){if(r){const o=r.getColor();this.fillState_={fillStyle:(0,K.F)(o||Z.qY)}}else this.fillState_=null;if(u){const o=u.getColor(),f=u.getLineCap(),g=u.getLineDash(),a=u.getLineDashOffset(),C=u.getLineJoin(),y=u.getWidth(),v=u.getMiterLimit(),U=g||Z.Oq;this.strokeState_={lineCap:void 0!==f?f:Z._m,lineDash:1===this.pixelRatio_?U:U.map(w=>w*this.pixelRatio_),lineDashOffset:(a||Z.vk)*this.pixelRatio_,lineJoin:void 0!==C?C:Z._K,lineWidth:(void 0!==y?y:Z.aq)*this.pixelRatio_,miterLimit:void 0!==v?v:Z.eL,strokeStyle:(0,K.F)(o||Z.NT)}}else this.strokeState_=null}setImageStyle(r){let u;if(!r||!(u=r.getSize()))return void(this.image_=null);const o=r.getPixelRatio(this.pixelRatio_),f=r.getAnchor(),g=r.getOrigin();this.image_=r.getImage(this.pixelRatio_),this.imageAnchorX_=f[0]*o,this.imageAnchorY_=f[1]*o,this.imageHeight_=u[1]*o,this.imageOpacity_=r.getOpacity(),this.imageOriginX_=g[0],this.imageOriginY_=g[1],this.imageRotateWithView_=r.getRotateWithView(),this.imageRotation_=r.getRotation();const a=r.getScaleArray();this.imageScale_=[a[0]*this.pixelRatio_/o,a[1]*this.pixelRatio_/o],this.imageWidth_=u[0]*o}setTextStyle(r){if(r){const u=r.getFill();if(u){const I=u.getColor();this.textFillState_={fillStyle:(0,K.F)(I||Z.qY)}}else this.textFillState_=null;const o=r.getStroke();if(o){const I=o.getColor(),P=o.getLineCap(),j=o.getLineDash(),Y=o.getLineDashOffset(),T=o.getLineJoin(),O=o.getWidth(),R=o.getMiterLimit();this.textStrokeState_={lineCap:void 0!==P?P:Z._m,lineDash:j||Z.Oq,lineDashOffset:Y||Z.vk,lineJoin:void 0!==T?T:Z._K,lineWidth:void 0!==O?O:Z.aq,miterLimit:void 0!==R?R:Z.eL,strokeStyle:(0,K.F)(I||Z.NT)}}else this.textStrokeState_=null;const f=r.getFont(),g=r.getOffsetX(),a=r.getOffsetY(),C=r.getRotateWithView(),y=r.getRotation(),v=r.getScaleArray(),U=r.getText(),w=r.getTextAlign(),z=r.getTextBaseline();this.textState_={font:void 0!==f?f:Z.ZV,textAlign:void 0!==w?w:Z.MY,textBaseline:void 0!==z?z:Z.M8},this.text_=void 0!==U?Array.isArray(U)?U.reduce((I,P,j)=>I+(j%2?" ":P),""):U:"",this.textOffsetX_=void 0!==g?this.pixelRatio_*g:0,this.textOffsetY_=void 0!==a?this.pixelRatio_*a:0,this.textRotateWithView_=void 0!==C&&C,this.textRotation_=void 0!==y?y:0,this.textScale_=[this.pixelRatio_*v[0],this.pixelRatio_*v[1]]}else this.text_=""}}},7205:(ce,gt,c)=>{"use strict";c.d(gt,{Ay:()=>b,I5:()=>K,VD:()=>$,kx:()=>L,th:()=>Z});const V={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},K=[V.FILL],$=[V.STROKE],Z=[V.BEGIN_PATH],L=[V.CLOSE_PATH],b=V},4848:(ce,gt,c)=>{"use strict";c.d(gt,{E:()=>p,A:()=>h});var V=c(570),K=c(7205),$=c(2775),Z=c(2462),L=c(2383),b=c(8507),B=c(9973);function F(r,u,o,f,g){const a=[];let C=o,y=0,v=u.slice(o,2);for(;y<r&&C+g<f;){const[U,w]=v.slice(-2),z=u[C+g],I=u[C+g+1],P=Math.sqrt((z-U)*(z-U)+(I-w)*(I-w));if(y+=P,y>=r){const j=(r-y+P)/P,Y=(0,B.Cc)(U,z,j),T=(0,B.Cc)(w,I,j);v.push(Y,T),a.push(v),v=[Y,T],y==r&&(C+=g),y=0}else if(y<r)v.push(u[C+g],u[C+g+1]),C+=g;else{const j=P-y,Y=(0,B.Cc)(U,z,j/P),T=(0,B.Cc)(w,I,j/P);v.push(Y,T),a.push(v),v=[Y,T],y=0,C+=g}}return y>0&&a.push(v),a}function E(r,u,o,f,g){let w,z,I,P,j,Y,T,O,R,A,a=o,C=o,y=0,v=0,U=o;for(z=o;z<f;z+=g){const M=u[z],D=u[z+1];void 0!==j&&(R=M-j,A=D-Y,P=Math.sqrt(R*R+A*A),void 0!==T&&(v+=I,w=Math.acos((T*R+O*A)/(I*P)),w>r&&(v>y&&(y=v,a=U,C=z),v=0,U=z-g)),I=P,T=R,O=A),j=M,Y=D}return v+=P,v>y?[U,z]:[a,C]}const p={left:0,center:.5,right:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1},h=class _ extends V.A{constructor(u,o,f,g){super(u,o,f,g),this.labels_=null,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=void 0,this.textRotation_=0,this.textFillState_=null,this.fillStates={},this.fillStates[Z.qY]={fillStyle:Z.qY},this.textStrokeState_=null,this.strokeStates={},this.textState_={},this.textStates={},this.textKey_="",this.fillKey_="",this.strokeKey_="",this.declutterMode_=void 0,this.declutterImageWithText_=void 0}finish(){const u=super.finish();return u.textStates=this.textStates,u.fillStates=this.fillStates,u.strokeStates=this.strokeStates,u}drawText(u,o,f){const C=this.textState_;if(""===this.text_||!C||!this.textFillState_&&!this.textStrokeState_)return;const y=this.coordinates;let v=y.length;const U=u.getType();let w=null,z=u.getStride();if("line"!==C.placement||"LineString"!=U&&"MultiLineString"!=U&&"Polygon"!=U&&"MultiPolygon"!=U){let I=C.overflow?null:[];switch(U){case"Point":case"MultiPoint":w=u.getFlatCoordinates();break;case"LineString":w=u.getFlatMidpoint();break;case"Circle":w=u.getCenter();break;case"MultiLineString":w=u.getFlatMidpoints(),z=2;break;case"Polygon":w=u.getFlatInteriorPoint(),C.overflow||I.push(w[2]/this.resolution),z=3;break;case"MultiPolygon":const R=u.getFlatInteriorPoints();w=[];for(let A=0,M=R.length;A<M;A+=3)C.overflow||I.push(R[A+2]/this.resolution),w.push(R[A],R[A+1]);if(0===w.length)return;z=2}const P=this.appendFlatPointCoordinates(w,z);if(P===v)return;if(I&&(P-v)/2!=w.length/z){let R=v/2;I=I.filter((A,M)=>{const D=y[2*(R+M)]===w[M*z]&&y[2*(R+M)+1]===w[M*z+1];return D||--R,D})}this.saveTextStates_(),(C.backgroundFill||C.backgroundStroke)&&(this.setFillStrokeStyle(C.backgroundFill,C.backgroundStroke),C.backgroundFill&&this.updateFillStyle(this.state,this.createFill),C.backgroundStroke&&(this.updateStrokeStyle(this.state,this.applyStroke),this.hitDetectionInstructions.push(this.createStroke(this.state)))),this.beginGeometry(u,o,f);let j=C.padding;if(j!=Z.Tq&&(C.scale[0]<0||C.scale[1]<0)){let R=C.padding[0],A=C.padding[1],M=C.padding[2],D=C.padding[3];C.scale[0]<0&&(A=-A,D=-D),C.scale[1]<0&&(R=-R,M=-M),j=[R,A,M,D]}const Y=this.pixelRatio;this.instructions.push([K.Ay.DRAW_IMAGE,v,P,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[1,1],NaN,this.declutterMode_,this.declutterImageWithText_,j==Z.Tq?Z.Tq:j.map(function(R){return R*Y}),!!C.backgroundFill,!!C.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,I]);const T=1/Y,O=this.state.fillStyle;C.backgroundFill&&(this.state.fillStyle=Z.qY,this.hitDetectionInstructions.push(this.createFill(this.state))),this.hitDetectionInstructions.push([K.Ay.DRAW_IMAGE,v,P,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[T,T],NaN,this.declutterMode_,this.declutterImageWithText_,j,!!C.backgroundFill,!!C.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_?Z.qY:this.fillKey_,this.textOffsetX_,this.textOffsetY_,I]),C.backgroundFill&&(this.state.fillStyle=O,this.hitDetectionInstructions.push(this.createFill(this.state))),this.endGeometry(o)}else{if(!(0,b.HY)(this.maxExtent,u.getExtent()))return;let I;if(w=u.getFlatCoordinates(),"LineString"==U)I=[w.length];else if("MultiLineString"==U)I=u.getEnds();else if("Polygon"==U)I=u.getEnds().slice(0,1);else if("MultiPolygon"==U){const T=u.getEndss();I=[];for(let O=0,R=T.length;O<R;++O)I.push(T[O][0])}this.beginGeometry(u,o,f);const P=C.repeat,j=P?void 0:C.textAlign;let Y=0;for(let T=0,O=I.length;T<O;++T){let R;R=P?F(P*this.resolution,w,Y,I[T],z):[w.slice(Y,I[T])];for(let A=0,M=R.length;A<M;++A){const D=R[A];let H=0,it=D.length;if(null==j){const xt=E(C.maxAngle,D,0,D.length,2);H=xt[0],it=xt[1]}for(let xt=H;xt<it;xt+=z)y.push(D[xt],D[xt+1]);const lt=y.length;Y=I[T],this.drawChars_(v,lt),v=lt}}this.endGeometry(o)}}saveTextStates_(){const u=this.textStrokeState_,o=this.textState_,f=this.textFillState_,g=this.strokeKey_;u&&(g in this.strokeStates||(this.strokeStates[g]={strokeStyle:u.strokeStyle,lineCap:u.lineCap,lineDashOffset:u.lineDashOffset,lineWidth:u.lineWidth,lineJoin:u.lineJoin,miterLimit:u.miterLimit,lineDash:u.lineDash}));const a=this.textKey_;a in this.textStates||(this.textStates[a]={font:o.font,textAlign:o.textAlign||Z.MY,justify:o.justify,textBaseline:o.textBaseline||Z.M8,scale:o.scale});const C=this.fillKey_;f&&(C in this.fillStates||(this.fillStates[C]={fillStyle:f.fillStyle}))}drawChars_(u,o){const f=this.textStrokeState_,g=this.textState_,a=this.strokeKey_,C=this.textKey_,y=this.fillKey_;this.saveTextStates_();const v=this.pixelRatio,U=p[g.textBaseline],w=this.textOffsetY_*v,z=this.text_,I=f?f.lineWidth*Math.abs(g.scale[0])/2:0;this.instructions.push([K.Ay.DRAW_CHARS,u,o,U,g.overflow,y,g.maxAngle,v,w,a,I*v,z,C,1,this.declutterMode_]),this.hitDetectionInstructions.push([K.Ay.DRAW_CHARS,u,o,U,g.overflow,y&&Z.qY,g.maxAngle,v,w,a,I*v,z,C,1/v,this.declutterMode_])}setTextStyle(u,o){let f,g,a;if(u){const C=u.getFill();C?(g=this.textFillState_,g||(g={},this.textFillState_=g),g.fillStyle=(0,$.F)(C.getColor()||Z.qY)):(g=null,this.textFillState_=g);const y=u.getStroke();if(y){a=this.textStrokeState_,a||(a={},this.textStrokeState_=a);const j=y.getLineDash(),Y=y.getLineDashOffset(),T=y.getWidth(),O=y.getMiterLimit();a.lineCap=y.getLineCap()||Z._m,a.lineDash=j?j.slice():Z.Oq,a.lineDashOffset=void 0===Y?Z.vk:Y,a.lineJoin=y.getLineJoin()||Z._K,a.lineWidth=void 0===T?Z.aq:T,a.miterLimit=void 0===O?Z.eL:O,a.strokeStyle=(0,$.F)(y.getColor()||Z.NT)}else a=null,this.textStrokeState_=a;f=this.textState_;const v=u.getFont()||Z.ZV;(0,Z.fZ)(v);const U=u.getScaleArray();f.overflow=u.getOverflow(),f.font=v,f.maxAngle=u.getMaxAngle(),f.placement=u.getPlacement(),f.textAlign=u.getTextAlign(),f.repeat=u.getRepeat(),f.justify=u.getJustify(),f.textBaseline=u.getTextBaseline()||Z.M8,f.backgroundFill=u.getBackgroundFill(),f.backgroundStroke=u.getBackgroundStroke(),f.padding=u.getPadding()||Z.Tq,f.scale=void 0===U?[1,1]:U;const w=u.getOffsetX(),z=u.getOffsetY(),I=u.getRotateWithView(),P=u.getRotation();this.text_=u.getText()||"",this.textOffsetX_=void 0===w?0:w,this.textOffsetY_=void 0===z?0:z,this.textRotateWithView_=void 0!==I&&I,this.textRotation_=void 0===P?0:P,this.strokeKey_=a?("string"==typeof a.strokeStyle?a.strokeStyle:(0,L.v6)(a.strokeStyle))+a.lineCap+a.lineDashOffset+"|"+a.lineWidth+a.lineJoin+a.miterLimit+"["+a.lineDash.join()+"]":"",this.textKey_=f.font+f.scale+(f.textAlign||"?")+(f.repeat||"?")+(f.justify||"?")+(f.textBaseline||"?"),this.fillKey_=g&&g.fillStyle?"string"==typeof g.fillStyle?g.fillStyle:"|"+(0,L.v6)(g.fillStyle):""}else this.text_="";this.declutterMode_=u.getDeclutterMode(),this.declutterImageWithText_=o}}},1120:(ce,gt,c)=>{"use strict";c.d(gt,{A:()=>$});var V=c(5551);const $=class K{constructor(){this.instructions_=[],this.zIndex=0,this.offset_=0,this.context_=new Proxy((0,V.lr)(),{get:(L,b)=>{if("function"==typeof(0,V.lr)()[b])return this.instructions_[this.zIndex+this.offset_]||(this.instructions_[this.zIndex+this.offset_]=[]),this.instructions_[this.zIndex+this.offset_].push(b),this.pushMethodArgs_},set:(L,b,B)=>(this.instructions_[this.zIndex+this.offset_]||(this.instructions_[this.zIndex+this.offset_]=[]),this.instructions_[this.zIndex+this.offset_].push(b,B),!0)})}pushMethodArgs_=(...L)=>(this.instructions_[this.zIndex+this.offset_].push(L),this);pushFunction(L){this.instructions_[this.zIndex+this.offset_].push(L)}getContext(){return this.context_}draw(L){this.instructions_.forEach(b=>{for(let B=0,F=b.length;B<F;++B){const E=b[B];if("function"==typeof E){E(L);continue}const p=b[++B];if("function"==typeof L[E])L[E](...p);else{if("function"==typeof p){L[E]=p(L);continue}L[E]=p}}})}clear(){this.instructions_.length=0,this.zIndex=0,this.offset_=0}offset(){this.offset_=this.instructions_.length,this.zIndex=0}}},3031:(ce,gt,c)=>{"use strict";c.d(gt,{F8:()=>p,_7:()=>E,tF:()=>F});var V=c(4548),K=c(5804),$=c(2058),Z=c(9973),L=c(5551),b=c(9325),B=c(8507);const F=.5;function E(_,h,r,u,o,f,g,a,C){const y=C?(0,b.JR)(o,C):o,w=(0,L.Y)(_[0]*F,_[1]*F);w.imageSmoothingEnabled=!1;const z=w.canvas,I=new V.A(w,F,o,null,g,a,C?(0,b.FO)((0,b.Tf)(),C):null),P=r.length,j=Math.floor(16777215/P),Y={};for(let O=1;O<=P;++O){const R=r[O-1],A=R.getStyleFunction()||u;if(!A)continue;let M=A(R,f);if(!M)continue;Array.isArray(M)||(M=[M]);const H=(O*j).toString(16).padStart(7,"#00000");for(let it=0,lt=M.length;it<lt;++it){const xt=M[it],At=xt.getGeometryFunction()(R);if(!At||!(0,B.HY)(y,At.getExtent()))continue;const St=xt.clone(),Ut=St.getFill();Ut&&Ut.setColor(H);const Kt=St.getStroke();Kt&&(Kt.setColor(H),Kt.setLineDash(null)),St.setText(void 0);const ut=xt.getImage();if(ut){const Zt=ut.getImageSize();if(!Zt)continue;const ge=(0,L.Y)(Zt[0],Zt[1],void 0,{alpha:!1}),ne=ge.canvas;ge.fillStyle=H,ge.fillRect(0,0,ne.width,ne.height),St.setImage(new K.A({img:ne,anchor:ut.getAnchor(),anchorXUnits:"pixels",anchorYUnits:"pixels",offset:ut.getOrigin(),opacity:1,size:ut.getSize(),scale:ut.getScale(),rotation:ut.getRotation(),rotateWithView:ut.getRotateWithView()}))}const Tt=St.getZIndex()||0;let Ft=Y[Tt];Ft||(Ft={},Y[Tt]=Ft,Ft.Polygon=[],Ft.Circle=[],Ft.LineString=[],Ft.Point=[]);const ie=At.getType();if("GeometryCollection"===ie){const Zt=At.getGeometriesArrayRecursive();for(let ge=0,ne=Zt.length;ge<ne;++ge){const fe=Zt[ge];Ft[fe.getType().replace("Multi","")].push(fe,St)}}else Ft[ie.replace("Multi","")].push(At,St)}}const T=Object.keys(Y).map(Number).sort($.V_);for(let O=0,R=T.length;O<R;++O){const A=Y[T[O]];for(const M in A){const D=A[M];for(let H=0,it=D.length;H<it;H+=2){I.setStyle(D[H+1]);for(let lt=0,xt=h.length;lt<xt;++lt)I.setTransform(h[lt]),I.drawGeometry(D[H])}}}return w.getImageData(0,0,z.width,z.height)}function p(_,h,r){const u=[];if(r){const o=Math.floor(Math.round(_[0])*F),f=Math.floor(Math.round(_[1])*F),g=4*((0,Z.qE)(o,0,r.width-1)+(0,Z.qE)(f,0,r.height-1)*r.width),v=r.data[g+2]+256*(r.data[g+1]+256*r.data[g]),U=Math.floor(16777215/h.length);v&&v%U==0&&u.push(h[v/U-1])}return u}},970:(ce,gt,c)=>{"use strict";c.d(gt,{A:()=>b});var V=c(6621),K=c(2661),$=c(6166),Z=c(2383);const b=class L extends $.A{constructor(F){super(),this.ready=!0,this.boundHandleImageChange_=this.handleImageChange_.bind(this),this.layer_=F}getFeatures(F){return(0,Z.b0)()}getData(F){return null}prepareFrame(F){return(0,Z.b0)()}renderFrame(F,E){return(0,Z.b0)()}loadedTileCallback(F,E,p){F[E]||(F[E]={}),F[E][p.tileCoord.toString()]=p}createLoadedTileFinder(F,E,p){return(_,h)=>{const r=this.loadedTileCallback.bind(this,p,_);return F.forEachLoadedTile(E,_,h,r)}}forEachFeatureAtCoordinate(F,E,p,_,h){}getLayer(){return this.layer_}handleFontsChanged(){}handleImageChange_(F){const E=F.target;(E.getState()===K.A.LOADED||E.getState()===K.A.ERROR)&&this.renderIfReadyAndVisible()}loadImage(F){let E=F.getState();return E!=K.A.LOADED&&E!=K.A.ERROR&&F.addEventListener(V.A.CHANGE,this.boundHandleImageChange_),E==K.A.IDLE&&(F.load(),E=F.getState()),E==K.A.LOADED}renderIfReadyAndVisible(){const F=this.getLayer();F&&F.getVisible()&&"ready"===F.getSourceState()&&F.changed()}renderDeferred(F){}disposeInternal(){delete this.layer_,super.disposeInternal()}}},4380:(ce,gt,c)=>{"use strict";c.d(gt,{A:()=>F});var V=c(2041),K=c(2661),$=c(6631),Z=c(1983),L=c(8507),b=c(9325);const F=class B extends V.A{constructor(p){super(p),this.image_=null}getImage(){return this.image_?this.image_.getImage():null}prepareFrame(p){const _=p.layerStatesArray[p.layerIndex],h=p.pixelRatio,r=p.viewState,u=r.resolution,o=this.getLayer().getSource(),f=p.viewHints;let g=p.extent;if(void 0!==_.extent&&(g=(0,L._N)(g,(0,b.SD)(_.extent,r.projection))),!f[$.A.ANIMATING]&&!f[$.A.INTERACTING]&&!(0,L.Im)(g))if(o){const C=o.getImage(g,u,h,r.projection);C&&(this.loadImage(C)?this.image_=C:C.getState()===K.A.EMPTY&&(this.image_=null))}else this.image_=null;return!!this.image_}getData(p){const _=this.frameState;if(!_)return null;const h=this.getLayer(),r=(0,Z.Bb)(_.pixelToCoordinateTransform,p.slice()),u=h.getExtent();if(u&&!(0,L.Ym)(u,r))return null;const o=this.image_.getExtent(),f=this.image_.getImage(),g=(0,L.RG)(o),a=Math.floor(f.width*((r[0]-o[0])/g));if(a<0||a>=f.width)return null;const C=(0,L.Oq)(o),y=Math.floor(f.height*((o[3]-r[1])/C));return y<0||y>=f.height?null:this.getImageData(f,a,y)}renderFrame(p,_){const h=this.image_,r=h.getExtent(),u=h.getResolution(),[o,f]=Array.isArray(u)?u:[u,u],g=h.getPixelRatio(),a=p.layerStatesArray[p.layerIndex],C=p.pixelRatio,y=p.viewState,v=y.center,U=y.resolution,w=C*o/(U*g),z=C*f/(U*g);this.prepareContainer(p,_);const I=this.context.canvas.width,P=this.context.canvas.height,j=this.getRenderContext(p);let Y=!1,T=!0;if(a.extent){const D=(0,b.SD)(a.extent,y.projection);T=(0,L.HY)(D,p.extent),Y=T&&!(0,L.ms)(D,p.extent),Y&&this.clipUnrotated(j,p,D)}const O=h.getImage(),R=(0,Z.Zz)(this.tempTransform,I/2,P/2,w,z,0,g*(r[0]-v[0])/o,g*(v[1]-r[3])/f);this.renderedResolution=f*C/g;const A=O.width*R[0],M=O.height*R[3];if(this.getLayer().getSource().getInterpolate()||(j.imageSmoothingEnabled=!1),this.preRender(j,p),T&&A>=.5&&M>=.5){const D=R[4],H=R[5],it=a.opacity;1!==it&&(j.save(),j.globalAlpha=it),j.drawImage(O,0,0,+O.width,+O.height,D,H,A,M),1!==it&&j.restore()}return this.postRender(this.context,p),Y&&j.restore(),j.imageSmoothingEnabled=!0,this.container}}},2041:(ce,gt,c)=>{"use strict";c.d(gt,{A:()=>u,B:()=>p});var V=c(970),K=c(2800),$=c(1688),Z=c(1120),L=c(1983),b=c(1962),B=c(5551),F=c(2058),E=c(8507);const p=[];let _=null;const u=class r extends V.A{constructor(f){super(f),this.container=null,this.tempTransform=(0,L.vt)(),this.pixelTransform=(0,L.vt)(),this.inversePixelTransform=(0,L.vt)(),this.context=null,this.deferredContext_=null,this.containerReused=!1,this.pixelContext_=null,this.frameState=null}getImageData(f,g,a){let C;_||function h(){_=(0,B.Y)(1,1,void 0,{willReadFrequently:!0})}(),_.clearRect(0,0,1,1);try{_.drawImage(f,g,a,1,1,0,0,1,1),C=_.getImageData(0,0,1,1).data}catch{return _=null,null}return C}getBackground(f){let a=this.getLayer().getBackground();return"function"==typeof a&&(a=a(f.viewState.resolution)),a||void 0}useContainer(f,g,a){const C=this.getLayer().getClassName();let y,v;if(f&&f.className===C&&(!a||f&&f.style.backgroundColor&&(0,F.aI)((0,b._j)(f.style.backgroundColor),(0,b._j)(a)))){const U=f.firstElementChild;U instanceof HTMLCanvasElement&&(v=U.getContext("2d"))}if(v&&v.canvas.style.transform===g?(this.container=f,this.context=v,this.containerReused=!0):this.containerReused?(this.container=null,this.context=null,this.containerReused=!1):this.container&&(this.container.style.backgroundColor=null),!this.container){y=document.createElement("div"),y.className=C;let U=y.style;U.position="absolute",U.width="100%",U.height="100%",v=(0,B.Y)();const w=v.canvas;y.appendChild(w),U=w.style,U.position="absolute",U.left="0",U.transformOrigin="top left",this.container=y,this.context=v}!this.containerReused&&a&&!this.container.style.backgroundColor&&(this.container.style.backgroundColor=a)}clipUnrotated(f,g,a){const C=(0,E.Py)(a),y=(0,E.WU)(a),v=(0,E.k_)(a),U=(0,E.R)(a);(0,L.Bb)(g.coordinateToPixelTransform,C),(0,L.Bb)(g.coordinateToPixelTransform,y),(0,L.Bb)(g.coordinateToPixelTransform,v),(0,L.Bb)(g.coordinateToPixelTransform,U);const w=this.inversePixelTransform;(0,L.Bb)(w,C),(0,L.Bb)(w,y),(0,L.Bb)(w,v),(0,L.Bb)(w,U),f.save(),f.beginPath(),f.moveTo(Math.round(C[0]),Math.round(C[1])),f.lineTo(Math.round(y[0]),Math.round(y[1])),f.lineTo(Math.round(v[0]),Math.round(v[1])),f.lineTo(Math.round(U[0]),Math.round(U[1])),f.clip()}prepareContainer(f,g){const a=f.extent,C=f.viewState.resolution,y=f.viewState.rotation,v=f.pixelRatio,U=Math.round((0,E.RG)(a)/C*v),w=Math.round((0,E.Oq)(a)/C*v);(0,L.Zz)(this.pixelTransform,f.size[0]/2,f.size[1]/2,1/v,1/v,y,-U/2,-w/2),(0,L.T9)(this.inversePixelTransform,this.pixelTransform);const z=(0,L.dI)(this.pixelTransform);if(this.useContainer(g,z,this.getBackground(f)),!this.containerReused){const I=this.context.canvas;I.width!=U||I.height!=w?(I.width=U,I.height=w):this.context.clearRect(0,0,U,w),z!==I.style.transform&&(I.style.transform=z)}}dispatchRenderEvent_(f,g,a){const C=this.getLayer();if(C.hasListener(f)){const y=new K.A(f,this.inversePixelTransform,a,g);C.dispatchEvent(y)}}preRender(f,g){this.frameState=g,!g.declutter&&this.dispatchRenderEvent_($.A.PRERENDER,f,g)}postRender(f,g){g.declutter||this.dispatchRenderEvent_($.A.POSTRENDER,f,g)}renderDeferredInternal(f){}getRenderContext(f){return f.declutter&&!this.deferredContext_&&(this.deferredContext_=new Z.A),f.declutter?this.deferredContext_.getContext():this.context}renderDeferred(f){f.declutter&&(this.dispatchRenderEvent_($.A.PRERENDER,this.context,f),f.declutter&&this.deferredContext_&&(this.deferredContext_.draw(this.context),this.deferredContext_.clear()),this.renderDeferredInternal(f),this.dispatchRenderEvent_($.A.POSTRENDER,this.context,f))}getRenderTransform(f,g,a,C,y,v,U){const I=C/g;return(0,L.Zz)(this.tempTransform,y/2,v/2,I,-I,-a,-f[0]+U,-f[1])}disposeInternal(){delete this.frameState,super.disposeInternal()}}},2565:(ce,gt,c)=>{"use strict";c.d(gt,{A:()=>r});var V=c(2041),K=c(8118),$=c(8836),Z=c(6990),L=c(9806),b=c(1983),B=c(2058),F=c(8507),E=c(9325),p=c(2383),_=c(9270);const r=class h extends V.A{constructor(o){super(o),this.extentChanged=!0,this.renderedExtent_=null,this.renderedProjection=null,this.renderedTiles=[],this.newTiles_=!1,this.tmpExtent=(0,F.S5)(),this.tmpTileRange_=new Z.A(0,0,0,0)}isDrawableTile(o){const f=this.getLayer(),g=o.getState(),a=f.getUseInterimTilesOnError();return g==L.A.LOADED||g==L.A.EMPTY||g==L.A.ERROR&&!a}getTile(o,f,g,a){const C=a.pixelRatio,y=a.viewState.projection,v=this.getLayer();let w=v.getSource().getTile(o,f,g,C,y);return w.getState()==L.A.ERROR&&v.getUseInterimTilesOnError()&&v.getPreload()>0&&(this.newTiles_=!0),this.isDrawableTile(w)||(w=w.getInterimTile()),w}getData(o){const f=this.frameState;if(!f)return null;const g=this.getLayer(),a=(0,b.Bb)(f.pixelToCoordinateTransform,o.slice()),C=g.getExtent();if(C&&!(0,F.Ym)(C,a))return null;const y=f.pixelRatio,v=f.viewState.projection,U=f.viewState,w=g.getRenderSource(),z=w.getTileGridForProjection(U.projection),I=w.getTilePixelRatio(f.pixelRatio);for(let P=z.getZForResolution(U.resolution);P>=z.getMinZoom();--P){const j=z.getTileCoordForCoordAndZ(a,P),Y=w.getTile(P,j[1],j[2],y,v);if(!(Y instanceof K.A||Y instanceof $.A)||Y instanceof $.A&&Y.getState()===L.A.EMPTY)return null;if(Y.getState()!==L.A.LOADED)continue;const T=z.getOrigin(P),O=(0,_.xq)(z.getTileSize(P)),R=z.getResolution(P),A=Math.floor(I*((a[0]-T[0])/R-j[1]*O[0])),M=Math.floor(I*((T[1]-a[1])/R-j[2]*O[1])),D=Math.round(I*w.getGutterForProjection(U.projection));return this.getImageData(Y.getImage(),A+D,M+D)}return null}loadedTileCallback(o,f,g){return!!this.isDrawableTile(g)&&super.loadedTileCallback(o,f,g)}prepareFrame(o){return!!this.getLayer().getSource()}renderFrame(o,f){const g=o.layerStatesArray[o.layerIndex],a=o.viewState,C=a.projection,y=a.resolution,v=a.center,U=a.rotation,w=o.pixelRatio,z=this.getLayer(),I=z.getSource(),P=I.getRevision(),j=I.getTileGridForProjection(C),Y=j.getZForResolution(y,I.zDirection),T=j.getResolution(Y);let O=o.extent;const R=o.viewState.resolution,A=I.getTilePixelRatio(w);this.prepareContainer(o,f);const M=this.context.canvas.width,D=this.context.canvas.height,H=g.extent&&(0,E.SD)(g.extent,C);H&&(O=(0,F._N)(O,(0,E.SD)(g.extent,C)));const it=T*M/2/A,lt=T*D/2/A,xt=[v[0]-it,v[1]-lt,v[0]+it,v[1]+lt],At=j.getTileRangeForExtentAndZ(O,Y),St={};St[Y]={};const Ut=this.createLoadedTileFinder(I,C,St),Kt=this.tmpExtent,ut=this.tmpTileRange_;this.newTiles_=!1;const Tt=U?(0,F.Yw)(a.center,R,U,o.size):void 0;for(let rt=At.minX;rt<=At.maxX;++rt)for(let jt=At.minY;jt<=At.maxY;++jt){if(U&&!j.tileCoordIntersectsViewport([Y,rt,jt],Tt))continue;const Yt=this.getTile(Y,rt,jt,o);if(this.isDrawableTile(Yt)){const Ye=(0,p.v6)(this);if(Yt.getState()==L.A.LOADED){St[Y][Yt.tileCoord.toString()]=Yt;let Ze=Yt.inTransition(Ye);Ze&&1!==g.opacity&&(Yt.endTransition(Ye),Ze=!1),!this.newTiles_&&(Ze||!this.renderedTiles.includes(Yt))&&(this.newTiles_=!0)}if(1===Yt.getAlpha(Ye,o.time))continue}const ve=j.getTileCoordChildTileRange(Yt.tileCoord,ut,Kt);let Me=!1;ve&&(Me=Ut(Y+1,ve)),Me||j.forEachTileCoordParentTileRange(Yt.tileCoord,Ut,ut,Kt)}const Ft=T/y*w/A,ie=this.getRenderContext(o);(0,b.Zz)(this.tempTransform,M/2,D/2,Ft,Ft,0,-M/2,-D/2),H&&this.clipUnrotated(ie,o,H),I.getInterpolate()||(ie.imageSmoothingEnabled=!1),this.preRender(ie,o),this.renderedTiles.length=0;let ge,ne,fe,Zt=Object.keys(St).map(Number);Zt.sort(B.V_),1!==g.opacity||this.containerReused&&!I.getOpaque(o.viewState.projection)?(ge=[],ne=[]):Zt=Zt.reverse();for(let rt=Zt.length-1;rt>=0;--rt){const jt=Zt[rt],Yt=I.getTilePixelSize(jt,w,C),Me=j.getResolution(jt)/T,Ye=Yt[0]*Me*Ft,Ze=Yt[1]*Me*Ft,pi=j.getTileCoordForCoordAndZ((0,F.Py)(xt),jt),ei=j.getTileCoordExtent(pi),ai=(0,b.Bb)(this.tempTransform,[A*(ei[0]-xt[0])/T,A*(xt[3]-ei[3])/T]),Ui=A*I.getGutterForProjection(C),Ue=St[jt];for(const Oi in Ue){const Ai=Ue[Oi],an=Ai.tileCoord,Yi=pi[1]-an[1],Ct=Math.round(ai[0]-(Yi-1)*Ye),nt=pi[2]-an[2],ht=Math.round(ai[1]-(nt-1)*Ze),It=Math.round(ai[0]-Yi*Ye),Pt=Math.round(ai[1]-nt*Ze),dt=Ct-It,ue=ht-Pt,Ce=Y===jt,He=Ce&&1!==Ai.getAlpha((0,p.v6)(this),o.time);let ke=!1;if(!He)if(ge){fe=[It,Pt,It+dt,Pt,It+dt,Pt+ue,It,Pt+ue];for(let qe=0,Di=ge.length;qe<Di;++qe)if(Y!==jt&&jt<ne[qe]){const yi=ge[qe];(0,F.HY)([It,Pt,It+dt,Pt+ue],[yi[0],yi[3],yi[4],yi[7]])&&(ke||(ie.save(),ke=!0),ie.beginPath(),ie.moveTo(fe[0],fe[1]),ie.lineTo(fe[2],fe[3]),ie.lineTo(fe[4],fe[5]),ie.lineTo(fe[6],fe[7]),ie.moveTo(yi[6],yi[7]),ie.lineTo(yi[4],yi[5]),ie.lineTo(yi[2],yi[3]),ie.lineTo(yi[0],yi[1]),ie.clip())}ge.push(fe),ne.push(jt)}else ie.clearRect(It,Pt,dt,ue);this.drawTileImage(Ai,o,It,Pt,dt,ue,Ui,Ce),ge&&!He?(ke&&ie.restore(),this.renderedTiles.unshift(Ai)):this.renderedTiles.push(Ai),this.updateUsedTiles(o.usedTiles,I,Ai)}}return this.renderedRevision=P,this.renderedResolution=T,this.extentChanged=!this.renderedExtent_||!(0,F.aI)(this.renderedExtent_,xt),this.renderedExtent_=xt,this.renderedPixelRatio=w,this.renderedProjection=C,this.manageTilePyramid(o,I,j,w,C,O,Y,z.getPreload()),this.scheduleExpireCache(o,I),this.postRender(this.context,o),g.extent&&ie.restore(),ie.imageSmoothingEnabled=!0,this.container}drawTileImage(o,f,g,a,C,y,v,U){const w=this.getTileImage(o);if(!w)return;const z=this.getRenderContext(f),I=(0,p.v6)(this),P=f.layerStatesArray[f.layerIndex],j=P.opacity*(U?o.getAlpha(I,f.time):1),Y=j!==z.globalAlpha;Y&&(z.save(),z.globalAlpha=j),z.drawImage(w,v,v,w.width-2*v,w.height-2*v,g,a,C,y),Y&&z.restore(),j!==P.opacity?f.animate=!0:U&&o.endTransition(I)}getImage(){const o=this.context;return o?o.canvas:null}getTileImage(o){return o.getImage()}scheduleExpireCache(o,f){if(f.canExpireCache()){const g=function(a,C,y){const v=(0,p.v6)(a);v in y.usedTiles&&a.expireCache(y.viewState.projection,y.usedTiles[v])}.bind(null,f);o.postRenderFunctions.push(g)}}updateUsedTiles(o,f,g){const a=(0,p.v6)(f);a in o||(o[a]={}),o[a][g.getKey()]=!0}manageTilePyramid(o,f,g,a,C,y,v,U,w){const z=(0,p.v6)(f);z in o.wantedTiles||(o.wantedTiles[z]={});const I=o.wantedTiles[z],P=o.tileQueue,j=g.getMinZoom(),Y=o.viewState.rotation,T=Y?(0,F.Yw)(o.viewState.center,o.viewState.resolution,Y,o.size):void 0;let R,A,M,D,H,it,O=0;for(it=j;it<=v;++it)for(A=g.getTileRangeForExtentAndZ(y,it,A),M=g.getResolution(it),D=A.minX;D<=A.maxX;++D)for(H=A.minY;H<=A.maxY;++H)Y&&!g.tileCoordIntersectsViewport([it,D,H],T)||(v-it<=U?(++O,R=f.getTile(it,D,H,a,C),R.getState()==L.A.IDLE&&(I[R.getKey()]=!0,P.isKeyQueued(R.getKey())||P.enqueue([R,z,g.getTileCoordCenter(R.tileCoord),M])),void 0!==w&&w(R)):f.useTile(it,D,H,C));f.updateCacheSize(O,C)}}},3812:(ce,gt,c)=>{"use strict";c.d(gt,{A:()=>o});var V=c(99),K=c(2041),$=c(3826),Z=c(1688),L=c(6631),b=c(3031),B=c(8507),F=c(5551),E=c(4944),p=c(2058),_=c(9325),h=c(2383),r=c(5085);const o=class u extends K.A{constructor(g){super(g),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.hitDetectionImageData_=null,this.clipped_=!1,this.renderedFeatures_=null,this.renderedRevision_=-1,this.renderedResolution_=NaN,this.renderedExtent_=(0,B.S5)(),this.wrappedRenderedExtent_=(0,B.S5)(),this.renderedCenter_=null,this.renderedProjection_=null,this.renderedPixelRatio_=1,this.renderedRenderOrder_=null,this.replayGroup_=null,this.replayGroupChanged=!0,this.clipping=!0,this.targetContext_=null,this.opacity_=1}renderWorlds(g,a,C){const y=a.extent,v=a.viewState,U=v.center,w=v.resolution,z=v.projection,I=v.rotation,P=z.getExtent(),j=this.getLayer().getSource(),Y=this.getLayer().getDeclutter(),T=a.pixelRatio,O=a.viewHints,R=!(O[L.A.ANIMATING]||O[L.A.INTERACTING]),A=this.context,M=Math.round((0,B.RG)(y)/w*T),D=Math.round((0,B.Oq)(y)/w*T),H=j.getWrapX()&&z.canWrapX(),it=H?(0,B.RG)(P):null,lt=H?Math.ceil((y[2]-P[2])/it)+1:1;let xt=H?Math.floor((y[0]-P[0])/it):0;do{let At=this.getRenderTransform(U,w,0,T,M,D,xt*it);a.declutter&&(At=At.slice(0)),g.execute(A,[A.canvas.width,A.canvas.height],At,I,R,void 0===C?$.y2:C?$.$i:$.x$,C?Y&&a.declutter[Y]:void 0)}while(++xt<lt)}setDrawContext_(){1!==this.opacity_&&(this.targetContext_=this.context,this.context=(0,F.Y)(this.context.canvas.width,this.context.canvas.height,K.B))}resetDrawContext_(){if(1!==this.opacity_){const g=this.targetContext_.globalAlpha;this.targetContext_.globalAlpha=this.opacity_,this.targetContext_.drawImage(this.context.canvas,0,0),this.targetContext_.globalAlpha=g,(0,F.Yg)(this.context),K.B.push(this.context.canvas),this.context=this.targetContext_,this.targetContext_=null}}renderDeclutter(g){!this.replayGroup_||!this.getLayer().getDeclutter()||this.renderWorlds(this.replayGroup_,g,!0)}renderDeferredInternal(g){this.replayGroup_&&(this.replayGroup_.renderDeferred(),this.clipped_&&this.context.restore(),this.resetDrawContext_())}renderFrame(g,a){const C=g.layerStatesArray[g.layerIndex];this.opacity_=C.opacity;const y=g.viewState;this.prepareContainer(g,a);const v=this.context,U=this.replayGroup_;let w=U&&!U.isEmpty();if(!w&&!this.getLayer().hasListener(Z.A.PRERENDER)&&!this.getLayer().hasListener(Z.A.POSTRENDER))return null;this.setDrawContext_(),this.preRender(v,g);const z=y.projection;if(this.clipped_=!1,w&&C.extent&&this.clipping){const I=(0,_.SD)(C.extent,z);w=(0,B.HY)(I,g.extent),this.clipped_=w&&!(0,B.ms)(I,g.extent),this.clipped_&&this.clipUnrotated(v,g,I)}return w&&this.renderWorlds(U,g,!this.getLayer().getDeclutter()&&void 0),!g.declutter&&this.clipped_&&v.restore(),this.postRender(v,g),this.renderedRotation_!==y.rotation&&(this.renderedRotation_=y.rotation,this.hitDetectionImageData_=null),g.declutter||this.resetDrawContext_(),this.container}getFeatures(g){return new Promise(a=>{if(this.frameState&&!this.hitDetectionImageData_&&!this.animatingOrInteracting_){const C=this.frameState.size.slice(),y=this.renderedCenter_,v=this.renderedResolution_,U=this.renderedRotation_,w=this.renderedProjection_,z=this.wrappedRenderedExtent_,I=this.getLayer(),P=[],j=C[0]*b.tF,Y=C[1]*b.tF;P.push(this.getRenderTransform(y,v,U,b.tF,j,Y,0).slice());const T=I.getSource(),O=w.getExtent();if(T.getWrapX()&&w.canWrapX()&&!(0,B.ms)(O,z)){let A=z[0];const M=(0,B.RG)(O);let H,D=0;for(;A<O[0];)--D,H=M*D,P.push(this.getRenderTransform(y,v,U,b.tF,j,Y,H).slice()),A+=M;for(D=0,A=z[2];A>O[2];)++D,H=M*D,P.push(this.getRenderTransform(y,v,U,b.tF,j,Y,H).slice()),A-=M}const R=(0,_.Tf)();this.hitDetectionImageData_=(0,b._7)(C,P,this.renderedFeatures_,I.getStyleFunction(),z,v,U,(0,E.j)(v,this.renderedPixelRatio_),R?w:null)}a((0,b.F8)(g,this.renderedFeatures_,this.hitDetectionImageData_))})}forEachFeatureAtCoordinate(g,a,C,y,v){if(!this.replayGroup_)return;const U=a.viewState.resolution,w=a.viewState.rotation,z=this.getLayer(),I={},P=function(O,R,A){const M=(0,h.v6)(O),D=I[M];if(D){if(!0!==D&&A<D.distanceSq){if(0===A)return I[M]=!0,v.splice(v.lastIndexOf(D),1),y(O,z,R);D.geometry=R,D.distanceSq=A}}else{if(0===A)return I[M]=!0,y(O,z,R);v.push(I[M]={feature:O,layer:z,geometry:R,distanceSq:A,callback:y})}};let j;const Y=[this.replayGroup_],T=this.getLayer().getDeclutter();return Y.some(O=>j=O.forEachFeatureAtCoordinate(g,U,w,C,P,T&&a.declutter[T]?a.declutter[T].all().map(R=>R.value):null)),j}handleFontsChanged(){const g=this.getLayer();g.getVisible()&&this.replayGroup_&&g.changed()}handleStyleImageChange_(g){this.renderIfReadyAndVisible()}prepareFrame(g){const a=this.getLayer(),C=a.getSource();if(!C)return!1;const y=g.viewHints[L.A.ANIMATING],v=g.viewHints[L.A.INTERACTING],U=a.getUpdateWhileAnimating(),w=a.getUpdateWhileInteracting();if(this.ready&&!U&&y||!w&&v)return this.animatingOrInteracting_=!0,!0;this.animatingOrInteracting_=!1;const z=g.extent,I=g.viewState,P=I.projection,j=I.resolution,Y=g.pixelRatio,T=a.getRevision(),O=a.getRenderBuffer();let R=a.getRenderOrder();void 0===R&&(R=E.Eo);const A=I.center.slice(),M=(0,B.r)(z,O*j),D=M.slice(),H=[M.slice()],it=P.getExtent();if(C.getWrapX()&&P.canWrapX()&&!(0,B.ms)(it,g.extent)){const Zt=(0,B.RG)(it),ge=Math.max((0,B.RG)(M)/2,Zt);M[0]=it[0]-ge,M[2]=it[2]+ge,(0,r.Li)(A,P);const ne=(0,B.Li)(H[0],P);ne[0]<it[0]&&ne[2]<it[2]?H.push([ne[0]+Zt,ne[1],ne[2]+Zt,ne[3]]):ne[0]>it[0]&&ne[2]>it[2]&&H.push([ne[0]-Zt,ne[1],ne[2]-Zt,ne[3]])}if(this.ready&&this.renderedResolution_==j&&this.renderedRevision_==T&&this.renderedRenderOrder_==R&&this.renderedFrameDeclutter_===!!g.declutter&&(0,B.ms)(this.wrappedRenderedExtent_,M))return(0,p.aI)(this.renderedExtent_,D)||(this.hitDetectionImageData_=null,this.renderedExtent_=D),this.renderedCenter_=A,this.replayGroupChanged=!1,!0;this.replayGroup_=null;const lt=new V.A((0,E.gY)(j,Y),M,j,Y),xt=(0,_.Tf)();let At;if(xt){for(let Zt=0,ge=H.length;Zt<ge;++Zt){const fe=(0,_.JR)(H[Zt],P);C.loadFeatures(fe,(0,_.vN)(j,P),xt)}At=(0,_.FO)(xt,P)}else for(let Zt=0,ge=H.length;Zt<ge;++Zt)C.loadFeatures(H[Zt],j,P);const St=(0,E.j)(j,Y);let Ut=!0;const Kt=(Zt,ge)=>{let ne;const fe=Zt.getStyleFunction()||a.getStyleFunction();if(fe&&(ne=fe(Zt,j)),ne){const rt=this.renderFeature(Zt,St,ne,lt,At,this.getLayer().getDeclutter(),ge);Ut=Ut&&!rt}},ut=(0,_.JR)(M,P),Tt=C.getFeaturesInExtent(ut);R&&Tt.sort(R);for(let Zt=0,ge=Tt.length;Zt<ge;++Zt)Kt(Tt[Zt],Zt);this.renderedFeatures_=Tt,this.ready=Ut;const Ft=lt.finish(),ie=new $.Ay(M,j,Y,C.getOverlaps(),Ft,a.getRenderBuffer(),!!g.declutter);return this.renderedResolution_=j,this.renderedRevision_=T,this.renderedRenderOrder_=R,this.renderedFrameDeclutter_=!!g.declutter,this.renderedExtent_=D,this.wrappedRenderedExtent_=M,this.renderedCenter_=A,this.renderedProjection_=P,this.renderedPixelRatio_=Y,this.replayGroup_=ie,this.hitDetectionImageData_=null,this.replayGroupChanged=!0,!0}renderFeature(g,a,C,y,v,U,w){if(!C)return!1;let z=!1;if(Array.isArray(C))for(let I=0,P=C.length;I<P;++I)z=(0,E.nl)(y,g,C[I],a,this.boundHandleStyleImageChange_,v,U,w)||z;else z=(0,E.nl)(y,g,C,a,this.boundHandleStyleImageChange_,v,U,w);return z}}},4944:(ce,gt,c)=>{"use strict";c.d(gt,{Eo:()=>L,gY:()=>B,j:()=>b,nl:()=>E});var V=c(2661),K=c(2383);const $=.5,Z={Point:function f(C,y,v,U,w,z){const I=v.getImage(),P=v.getText(),j=P&&P.getText(),Y=z&&I&&j?{}:void 0;if(I){if(I.getImageState()!=V.A.LOADED)return;const T=C.getBuilder(v.getZIndex(),"Image");T.setImageStyle(I,Y),T.drawPoint(y,U,w)}if(j){const T=C.getBuilder(v.getZIndex(),"Text");T.setTextStyle(P,Y),T.drawText(y,U,w)}},LineString:function r(C,y,v,U,w){const z=v.getStroke();if(z){const P=C.getBuilder(v.getZIndex(),"LineString");P.setFillStrokeStyle(null,z),P.drawLineString(y,U,w)}const I=v.getText();if(I&&I.getText()){const P=C.getBuilder(v.getZIndex(),"Text");P.setTextStyle(I),P.drawText(y,U,w)}},Polygon:function a(C,y,v,U,w){const z=v.getFill(),I=v.getStroke();if(z||I){const j=C.getBuilder(v.getZIndex(),"Polygon");j.setFillStrokeStyle(z,I),j.drawPolygon(y,U,w)}const P=v.getText();if(P&&P.getText()){const j=C.getBuilder(v.getZIndex(),"Text");j.setTextStyle(P),j.drawText(y,U,w)}},MultiPoint:function g(C,y,v,U,w,z){const I=v.getImage(),P=I&&0!==I.getOpacity(),j=v.getText(),Y=j&&j.getText(),T=z&&P&&Y?{}:void 0;if(P){if(I.getImageState()!=V.A.LOADED)return;const O=C.getBuilder(v.getZIndex(),"Image");O.setImageStyle(I,T),O.drawMultiPoint(y,U,w)}if(Y){const O=C.getBuilder(v.getZIndex(),"Text");O.setTextStyle(j,T),O.drawText(y,U,w)}},MultiLineString:function u(C,y,v,U,w){const z=v.getStroke();if(z){const P=C.getBuilder(v.getZIndex(),"LineString");P.setFillStrokeStyle(null,z),P.drawMultiLineString(y,U,w)}const I=v.getText();if(I&&I.getText()){const P=C.getBuilder(v.getZIndex(),"Text");P.setTextStyle(I),P.drawText(y,U,w)}},MultiPolygon:function o(C,y,v,U,w){const z=v.getFill(),I=v.getStroke();if(I||z){const j=C.getBuilder(v.getZIndex(),"Polygon");j.setFillStrokeStyle(z,I),j.drawMultiPolygon(y,U,w)}const P=v.getText();if(P&&P.getText()){const j=C.getBuilder(v.getZIndex(),"Text");j.setTextStyle(P),j.drawText(y,U,w)}},GeometryCollection:function h(C,y,v,U,w,z){const I=y.getGeometriesArray();let P,j;for(P=0,j=I.length;P<j;++P)(0,Z[I[P].getType()])(C,I[P],v,U,w,z)},Circle:function F(C,y,v,U,w){const z=v.getFill(),I=v.getStroke();if(z||I){const j=C.getBuilder(v.getZIndex(),"Circle");j.setFillStrokeStyle(z,I),j.drawCircle(y,U,w)}const P=v.getText();if(P&&P.getText()){const j=C.getBuilder(v.getZIndex(),"Text");j.setTextStyle(P),j.drawText(y,U)}}};function L(C,y){return parseInt((0,K.v6)(C),10)-parseInt((0,K.v6)(y),10)}function b(C,y){const v=B(C,y);return v*v}function B(C,y){return $*C/y}function E(C,y,v,U,w,z,I,P){const j=[],Y=v.getImage();if(Y){let R=!0;const A=Y.getImageState();A==V.A.LOADED||A==V.A.ERROR?R=!1:A==V.A.IDLE&&Y.load(),R&&j.push(Y.ready())}const T=v.getFill();T&&T.loading()&&j.push(T.ready());const O=j.length>0;return O&&Promise.all(j).then(()=>w(null)),function p(C,y,v,U,w,z,I){const P=v.getGeometryFunction()(y);if(!P)return;const j=P.simplifyTransformed(U,w);v.getRenderer()?_(C,j,v,y,I):(0,Z[j.getType()])(C,j,v,y,I,z)}(C,y,v,U,z,I,P),O}function _(C,y,v,U,w){if("GeometryCollection"!=y.getType())C.getBuilder(v.getZIndex(),"Default").drawCustom(y,U,v.getRenderer(),v.getHitDetectionRenderer(),w);else{const I=y.getGeometries();for(let P=0,j=I.length;P<j;++P)_(C,I[P],v,U,w)}}},2321:(ce,gt,c)=>{"use strict";c.d(gt,{BV:()=>b,KQ:()=>p,XX:()=>h,aY:()=>_});var V=c(8507),K=c(5551),$=c(9325),Z=c(9973);let L;const b=[];function B(r,u,o,f,g){r.beginPath(),r.moveTo(0,0),r.lineTo(u,o),r.lineTo(f,g),r.closePath(),r.save(),r.clip(),r.fillRect(0,0,Math.max(u,f)+1,Math.max(o,g)),r.restore()}function F(r,u){return Math.abs(r[4*u]-210)>2||Math.abs(r[4*u+3]-191.25)>2}function p(r,u,o,f){const g=(0,$.pd)(o,u,r);let a=(0,$.hO)(u,f,o);const C=u.getMetersPerUnit();void 0!==C&&(a*=C);const y=r.getMetersPerUnit();void 0!==y&&(a/=y);const v=r.getExtent();if(!v||(0,V.Ym)(v,g)){const U=(0,$.hO)(r,a,g)/a;isFinite(U)&&U>0&&(a/=U)}return a}function _(r,u,o,f){const g=(0,V.q1)(o);let a=p(r,u,g,f);return(!isFinite(a)||a<=0)&&(0,V.sB)(o,function(C){return a=p(r,u,C,f),isFinite(a)&&a>0}),a}function h(r,u,o,f,g,a,C,y,v,U,w,z,I,P){const j=(0,K.Y)(Math.round(o*r),Math.round(o*u),b);if(z||(j.imageSmoothingEnabled=!1),0===v.length)return j.canvas;function Y(D){return Math.round(D*o)/o}j.scale(o,o),j.globalCompositeOperation="lighter";const T=(0,V.S5)();let O;v.forEach(function(D,H,it){(0,V.X$)(T,D.extent)});const R=o/f,A=(z?1:1+Math.pow(2,-24))/R;if(!I||1!==v.length||0!==U){if(O=(0,K.Y)(Math.round((0,V.RG)(T)*R),Math.round((0,V.Oq)(T)*R),b),z||(O.imageSmoothingEnabled=!1),g&&P){const D=(g[0]-T[0])*R,H=-(g[3]-T[3])*R,it=(0,V.RG)(g)*R,lt=(0,V.Oq)(g)*R;O.rect(D,H,it,lt),O.clip()}v.forEach(function(D,H,it){if(D.image.width>0&&D.image.height>0){if(D.clipExtent){O.save();const Ut=(D.clipExtent[0]-T[0])*R,Kt=-(D.clipExtent[3]-T[3])*R,ut=(0,V.RG)(D.clipExtent)*R,Tt=(0,V.Oq)(D.clipExtent)*R;O.rect(z?Ut:Math.round(Ut),z?Kt:Math.round(Kt),z?ut:Math.round(Ut+ut)-Math.round(Ut),z?Tt:Math.round(Kt+Tt)-Math.round(Kt)),O.clip()}const lt=(D.extent[0]-T[0])*R,xt=-(D.extent[3]-T[3])*R,At=(0,V.RG)(D.extent)*R,St=(0,V.Oq)(D.extent)*R;O.drawImage(D.image,U,U,D.image.width-2*U,D.image.height-2*U,z?lt:Math.round(lt),z?xt:Math.round(xt),z?At:Math.round(lt+At)-Math.round(lt),z?St:Math.round(xt+St)-Math.round(xt)),D.clipExtent&&O.restore()}})}const M=(0,V.Py)(C);return y.getTriangles().forEach(function(D,H,it){const lt=D.source,xt=D.target;let At=lt[0][0],St=lt[0][1],Ut=lt[1][0],Kt=lt[1][1],ut=lt[2][0],Tt=lt[2][1];const Ft=Y((xt[0][0]-M[0])/a),ie=Y(-(xt[0][1]-M[1])/a),Zt=Y((xt[1][0]-M[0])/a),ge=Y(-(xt[1][1]-M[1])/a),ne=Y((xt[2][0]-M[0])/a),fe=Y(-(xt[2][1]-M[1])/a),rt=At,jt=St;At=0,St=0,Ut-=rt,Kt-=jt,ut-=rt,Tt-=jt;const ve=(0,Z.KU)([[Ut,Kt,0,0,Zt-Ft],[ut,Tt,0,0,ne-Ft],[0,0,Ut,Kt,ge-ie],[0,0,ut,Tt,fe-ie]]);if(!ve)return;if(j.save(),j.beginPath(),function E(){if(void 0===L){const r=(0,K.Y)(6,6,b);r.globalCompositeOperation="lighter",r.fillStyle="rgba(210, 0, 0, 0.75)",B(r,4,5,4,0),B(r,4,5,0,5);const u=r.getImageData(0,0,3,3).data;L=F(u,0)||F(u,4)||F(u,8),(0,K.Yg)(r),b.push(r.canvas)}return L}()||!z){j.moveTo(Zt,ge);const Ye=4,Ze=Ft-Zt,pi=ie-ge;for(let ei=0;ei<Ye;ei++)j.lineTo(Zt+Y((ei+1)*Ze/Ye),ge+Y(ei*pi/(Ye-1))),ei!=Ye-1&&j.lineTo(Zt+Y((ei+1)*Ze/Ye),ge+Y((ei+1)*pi/(Ye-1)));j.lineTo(ne,fe)}else j.moveTo(Zt,ge),j.lineTo(Ft,ie),j.lineTo(ne,fe);let Me;if(j.clip(),j.transform(ve[0],ve[2],ve[1],ve[3],Ft,ie),j.translate(T[0]-rt,T[3]-jt),O)Me=O.canvas,j.scale(A,-A);else{const Ye=v[0],Ze=Ye.extent;Me=Ye.image,j.scale((0,V.RG)(Ze)/Me.width,-(0,V.Oq)(Ze)/Me.height)}j.drawImage(Me,0,0),j.restore()}),O&&((0,K.Yg)(O),b.push(O.canvas)),w&&(j.save(),j.globalCompositeOperation="source-over",j.strokeStyle="black",j.lineWidth=1,y.getTriangles().forEach(function(D,H,it){const lt=D.target,xt=(lt[0][0]-M[0])/a,At=-(lt[0][1]-M[1])/a,St=(lt[1][0]-M[0])/a,Ut=-(lt[1][1]-M[1])/a,Kt=(lt[2][0]-M[0])/a,ut=-(lt[2][1]-M[1])/a;j.beginPath(),j.moveTo(St,Ut),j.lineTo(xt,At),j.lineTo(Kt,ut),j.closePath(),j.stroke()}),j.restore()),j.canvas}},8836:(ce,gt,c)=>{"use strict";c.d(gt,{A:()=>h});var V=c(8437),K=c(6621),$=c(7783),Z=c(9806),L=c(7257),b=c(2321),B=c(9973),F=c(8507),E=c(2614),p=c(5551);const h=class _ extends $.A{constructor(u,o,f,g,a,C,y,v,U,w,z,I){super(a,Z.A.IDLE,I),this.renderEdges_=void 0!==z&&z,this.pixelRatio_=y,this.gutter_=v,this.canvas_=null,this.sourceTileGrid_=o,this.targetTileGrid_=g,this.wrappedTileCoord_=C||a,this.sourceTiles_=[],this.sourcesListenerKeys_=null,this.sourceZ_=0,this.clipExtent_=u.canWrapX()?u.getExtent():void 0;const P=g.getTileCoordExtent(this.wrappedTileCoord_),j=this.targetTileGrid_.getExtent();let Y=this.sourceTileGrid_.getExtent();const T=j?(0,F._N)(P,j):P;if(0===(0,F.UG)(T))return void(this.state=Z.A.EMPTY);const O=u.getExtent();O&&(Y=Y?(0,F._N)(Y,O):O);const R=g.getResolution(this.wrappedTileCoord_[0]),A=(0,b.aY)(u,f,T,R);if(!isFinite(A)||A<=0)return void(this.state=Z.A.EMPTY);if(this.triangulation_=new L.A(u,f,T,Y,A*(void 0!==w?w:V.l),R),0===this.triangulation_.getTriangles().length)return void(this.state=Z.A.EMPTY);this.sourceZ_=o.getZForResolution(A);let D=this.triangulation_.calculateSourceExtent();if(Y&&(u.canWrapX()?(D[1]=(0,B.qE)(D[1],Y[1],Y[3]),D[3]=(0,B.qE)(D[3],Y[1],Y[3])):D=(0,F._N)(D,Y)),(0,F.UG)(D)){let H=0,it=0;u.canWrapX()&&(H=(0,F.RG)(O),it=Math.floor((D[0]-O[0])/H)),(0,F.QJ)(D.slice(),u,!0).forEach(xt=>{const At=o.getTileRangeForExtentAndZ(xt,this.sourceZ_);for(let St=At.minX;St<=At.maxX;St++)for(let Ut=At.minY;Ut<=At.maxY;Ut++){const Kt=U(this.sourceZ_,St,Ut,y);Kt&&this.sourceTiles_.push({tile:Kt,offset:it*H})}++it}),0===this.sourceTiles_.length&&(this.state=Z.A.EMPTY)}else this.state=Z.A.EMPTY}getImage(){return this.canvas_}reproject_(){const u=[];if(this.sourceTiles_.forEach(o=>{const f=o.tile;if(f&&f.getState()==Z.A.LOADED){const g=this.sourceTileGrid_.getTileCoordExtent(f.tileCoord);g[0]+=o.offset,g[2]+=o.offset;const a=this.clipExtent_?.slice();a&&(a[0]+=o.offset,a[2]+=o.offset),u.push({extent:g,clipExtent:a,image:f.getImage()})}}),this.sourceTiles_.length=0,0===u.length)this.state=Z.A.ERROR;else{const o=this.wrappedTileCoord_[0],f=this.targetTileGrid_.getTileSize(o),g="number"==typeof f?f:f[0],a="number"==typeof f?f:f[1],C=this.targetTileGrid_.getResolution(o),y=this.sourceTileGrid_.getResolution(this.sourceZ_),v=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=(0,b.XX)(g,a,this.pixelRatio_,y,this.sourceTileGrid_.getExtent(),C,v,this.triangulation_,u,this.gutter_,this.renderEdges_,this.interpolate),this.state=Z.A.LOADED}this.changed()}load(){if(this.state==Z.A.IDLE){this.state=Z.A.LOADING,this.changed();let u=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(({tile:o})=>{const f=o.getState();if(f==Z.A.IDLE||f==Z.A.LOADING){u++;const g=(0,E.KT)(o,K.A.CHANGE,function(a){const C=o.getState();(C==Z.A.LOADED||C==Z.A.ERROR||C==Z.A.EMPTY)&&((0,E.JH)(g),u--,0===u&&(this.unlistenSources_(),this.reproject_()))},this);this.sourcesListenerKeys_.push(g)}}),0===u?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach(function({tile:o},f,g){o.getState()==Z.A.IDLE&&o.load()})}}unlistenSources_(){this.sourcesListenerKeys_.forEach(E.JH),this.sourcesListenerKeys_=null}release(){this.canvas_&&((0,p.Yg)(this.canvas_.getContext("2d")),b.BV.push(this.canvas_),this.canvas_=null),super.release()}}},7257:(ce,gt,c)=>{"use strict";c.d(gt,{A:()=>B});var V=c(8507),K=c(9325),$=c(9973);const B=class b{constructor(E,p,_,h,r,u){this.sourceProj_=E,this.targetProj_=p;let o={};const f=(0,K.RG)(this.targetProj_,this.sourceProj_);this.transformInv_=function(P){const j=P[0]+"/"+P[1];return o[j]||(o[j]=f(P)),o[j]},this.maxSourceExtent_=h,this.errorThresholdSquared_=r*r,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!h&&!!this.sourceProj_.getExtent()&&(0,V.RG)(h)>=(0,V.RG)(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?(0,V.RG)(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?(0,V.RG)(this.targetProj_.getExtent()):null;const g=(0,V.Py)(_),a=(0,V.WU)(_),C=(0,V.k_)(_),y=(0,V.R)(_),v=this.transformInv_(g),U=this.transformInv_(a),w=this.transformInv_(C),z=this.transformInv_(y),I=10+(u?Math.max(0,Math.ceil(Math.log2((0,V.UG)(_)/(u*u*256*256)))):0);if(this.addQuad_(g,a,C,y,v,U,w,z,I),this.wrapsXInSource_){let P=1/0;this.triangles_.forEach(function(j,Y,T){P=Math.min(P,j.source[0][0],j.source[1][0],j.source[2][0])}),this.triangles_.forEach(j=>{if(Math.max(j.source[0][0],j.source[1][0],j.source[2][0])-P>this.sourceWorldWidth_/2){const Y=[[j.source[0][0],j.source[0][1]],[j.source[1][0],j.source[1][1]],[j.source[2][0],j.source[2][1]]];Y[0][0]-P>this.sourceWorldWidth_/2&&(Y[0][0]-=this.sourceWorldWidth_),Y[1][0]-P>this.sourceWorldWidth_/2&&(Y[1][0]-=this.sourceWorldWidth_),Y[2][0]-P>this.sourceWorldWidth_/2&&(Y[2][0]-=this.sourceWorldWidth_);const T=Math.min(Y[0][0],Y[1][0],Y[2][0]);Math.max(Y[0][0],Y[1][0],Y[2][0])-T<this.sourceWorldWidth_/2&&(j.source=Y)}})}o={}}addTriangle_(E,p,_,h,r,u){this.triangles_.push({source:[h,r,u],target:[E,p,_]})}addQuad_(E,p,_,h,r,u,o,f,g){const a=(0,V.Tr)([r,u,o,f]),C=this.sourceWorldWidth_?(0,V.RG)(a)/this.sourceWorldWidth_:null,y=this.sourceWorldWidth_,v=this.sourceProj_.canWrapX()&&C>.5&&C<1;let U=!1;if(g>0){if(this.targetProj_.isGlobal()&&this.targetWorldWidth_){const z=(0,V.Tr)([E,p,_,h]);U=(0,V.RG)(z)/this.targetWorldWidth_>.25||U}!v&&this.sourceProj_.isGlobal()&&C&&(U=C>.25||U)}if(!U&&this.maxSourceExtent_&&isFinite(a[0])&&isFinite(a[1])&&isFinite(a[2])&&isFinite(a[3])&&!(0,V.HY)(a,this.maxSourceExtent_))return;let w=0;if(!(U||isFinite(r[0])&&isFinite(r[1])&&isFinite(u[0])&&isFinite(u[1])&&isFinite(o[0])&&isFinite(o[1])&&isFinite(f[0])&&isFinite(f[1])))if(g>0)U=!0;else if(w=(isFinite(r[0])&&isFinite(r[1])?0:8)+(isFinite(u[0])&&isFinite(u[1])?0:4)+(isFinite(o[0])&&isFinite(o[1])?0:2)+(isFinite(f[0])&&isFinite(f[1])?0:1),1!=w&&2!=w&&4!=w&&8!=w)return;if(g>0){if(!U){const I=this.transformInv_([(E[0]+_[0])/2,(E[1]+_[1])/2]);let P;P=v?((0,$.xP)(r[0],y)+(0,$.xP)(o[0],y))/2-(0,$.xP)(I[0],y):(r[0]+o[0])/2-I[0];const j=(r[1]+o[1])/2-I[1];U=P*P+j*j>this.errorThresholdSquared_}if(U){if(Math.abs(E[0]-_[0])<=Math.abs(E[1]-_[1])){const z=[(p[0]+_[0])/2,(p[1]+_[1])/2],I=this.transformInv_(z),P=[(h[0]+E[0])/2,(h[1]+E[1])/2],j=this.transformInv_(P);this.addQuad_(E,p,z,P,r,u,I,j,g-1),this.addQuad_(P,z,_,h,j,I,o,f,g-1)}else{const z=[(E[0]+p[0])/2,(E[1]+p[1])/2],I=this.transformInv_(z),P=[(_[0]+h[0])/2,(_[1]+h[1])/2],j=this.transformInv_(P);this.addQuad_(E,z,P,h,r,I,j,f,g-1),this.addQuad_(z,p,_,P,I,u,o,j,g-1)}return}}if(v){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}11&w||this.addTriangle_(E,_,h,r,o,f),14&w||this.addTriangle_(E,_,p,r,o,u),w&&(13&w||this.addTriangle_(p,h,E,u,f,r),7&w||this.addTriangle_(p,h,_,u,f,o))}calculateSourceExtent(){const E=(0,V.S5)();return this.triangles_.forEach(function(p,_,h){const r=p.source;(0,V.$C)(E,r[0]),(0,V.$C)(E,r[1]),(0,V.$C)(E,r[2])}),E}getTriangles(){return this.triangles_}}},8437:(ce,gt,c)=>{"use strict";c.d(gt,{l:()=>V});const V=.5},7841:(ce,gt,c)=>{"use strict";function V(K){return Array.isArray(K)?Math.min(...K):K}c.d(gt,{m:()=>V})},3066:(ce,gt,c)=>{"use strict";c.d(gt,{a$:()=>Z,b8:()=>K,cq:()=>L,dv:()=>$});var V=c(9973);function K(b){if(void 0!==b)return 0}function $(b){if(void 0!==b)return b}function Z(b){const B=2*Math.PI/b;return function(F,E){return E?F:void 0!==F?F=Math.floor(F/B+.5)*B:void 0}}function L(b){const B=void 0===b?(0,V.eh)(5):b;return function(F,E){return E||void 0===F?F:Math.abs(F)<=B?0:F}}},9270:(ce,gt,c)=>{"use strict";function K(L){return L[0]>0&&L[1]>0}function $(L,b,B){return void 0===B&&(B=[0,0]),B[0]=L[0]*b+.5|0,B[1]=L[1]*b+.5|0,B}function Z(L,b){return Array.isArray(L)?L:(void 0===b?b=[L,L]:(b[0]=L,b[1]=L),b)}c.d(gt,{Ie:()=>K,hs:()=>$,xq:()=>Z})},1395:(ce,gt,c)=>{"use strict";c.d(gt,{A:()=>p});var V=c(6621),K=c(9557),$=c(8654),Z=c(6370),L=c(5085),b=c(5940),B=c(8507),F=c(2383);const p=class E extends Z.A{constructor(h){super({attributions:(h=h||{}).attributions,wrapX:h.wrapX}),this.resolution=void 0,this.distance=void 0!==h.distance?h.distance:20,this.minDistance=h.minDistance||0,this.interpolationRatio=0,this.features=[],this.geometryFunction=h.geometryFunction||function(r){const u=r.getGeometry();return(0,b.v)(!u||"Point"===u.getType(),"The default `geometryFunction` can only handle `Point` or null geometries"),u},this.createCustomCluster_=h.createCluster,this.source=null,this.boundRefresh_=this.refresh.bind(this),this.updateDistance(this.distance,this.minDistance),this.setSource(h.source||null)}clear(h){this.features.length=0,super.clear(h)}getDistance(){return this.distance}getSource(){return this.source}loadFeatures(h,r,u){this.source?.loadFeatures(h,r,u),r!==this.resolution&&(this.resolution=r,this.refresh())}setDistance(h){this.updateDistance(h,this.minDistance)}setMinDistance(h){this.updateDistance(this.distance,h)}getMinDistance(){return this.minDistance}setSource(h){this.source&&this.source.removeEventListener(V.A.CHANGE,this.boundRefresh_),this.source=h,h&&h.addEventListener(V.A.CHANGE,this.boundRefresh_),this.refresh()}refresh(){this.clear(),this.cluster(),this.addFeatures(this.features)}updateDistance(h,r){const u=0===h?0:Math.min(r,h)/h,o=h!==this.distance||this.interpolationRatio!==u;this.distance=h,this.minDistance=r,this.interpolationRatio=u,o&&this.refresh()}cluster(){if(void 0===this.resolution||!this.source)return;const h=(0,B.S5)(),r=this.distance*this.resolution,u=this.source.getFeatures(),o={};for(let f=0,g=u.length;f<g;f++){const a=u[f];if(!((0,F.v6)(a)in o)){const C=this.geometryFunction(a);if(C){const y=C.getCoordinates();(0,B.dP)(y,h),(0,B.r)(h,r,h);const v=this.source.getFeaturesInExtent(h).filter(function(U){const w=(0,F.v6)(U);return!(w in o)&&(o[w]=!0,!0)});this.features.push(this.createCluster(v,h))}}}}createCluster(h,r){const u=[0,0];for(let a=h.length-1;a>=0;--a){const C=this.geometryFunction(h[a]);C?(0,L.WQ)(u,C.getCoordinates()):h.splice(a,1)}(0,L.hs)(u,1/h.length);const o=(0,B.q1)(r),f=this.interpolationRatio,g=new $.A([u[0]*(1-f)+o[0]*f,u[1]*(1-f)+o[1]*f]);return this.createCustomCluster_?this.createCustomCluster_(g,h):new K.A({geometry:g,features:h})}}},4579:(ce,gt,c)=>{"use strict";c.d(gt,{Ay:()=>w,VV:()=>v,QD:()=>U});var V=c(3805),K=c(6621),$=c(2661),Z=c(6490),L=c(8437),b=c(7257),B=c(2321),F=c(7841),E=c(8507),p=c(2614);const h=class _ extends Z.Ay{constructor(I,P,j,Y,T,O,R){let A=I.getExtent();A&&I.canWrapX()&&(A=A.slice(),A[0]=-1/0,A[2]=1/0);let M=P.getExtent();M&&P.canWrapX()&&(M=M.slice(),M[0]=-1/0,M[2]=1/0);const D=M?(0,E._N)(j,M):j,H=(0,E.q1)(D),it=(0,B.KQ)(I,P,H,Y),xt=new b.A(I,P,D,A,it*L.l,Y),At=xt.calculateSourceExtent(),St=(0,E.Im)(At)?null:O(At,it,T),Ut=St?$.A.IDLE:$.A.EMPTY,Kt=St?St.getPixelRatio():1;super(j,Y,Kt,Ut),this.targetProj_=P,this.maxSourceExtent_=A,this.triangulation_=xt,this.targetResolution_=Y,this.targetExtent_=j,this.sourceImage_=St,this.sourcePixelRatio_=Kt,this.interpolate_=R,this.canvas_=null,this.sourceListenerKey_=null}disposeInternal(){this.state==$.A.LOADING&&this.unlistenSource_(),super.disposeInternal()}getImage(){return this.canvas_}getProjection(){return this.targetProj_}reproject_(){const I=this.sourceImage_.getState();if(I==$.A.LOADED){const P=(0,E.RG)(this.targetExtent_)/this.targetResolution_,j=(0,E.Oq)(this.targetExtent_)/this.targetResolution_;this.canvas_=(0,B.XX)(P,j,this.sourcePixelRatio_,(0,F.m)(this.sourceImage_.getResolution()),this.maxSourceExtent_,this.targetResolution_,this.targetExtent_,this.triangulation_,[{extent:this.sourceImage_.getExtent(),image:this.sourceImage_.getImage()}],0,void 0,this.interpolate_,!0)}this.state=I,this.changed()}load(){if(this.state==$.A.IDLE){this.state=$.A.LOADING,this.changed();const I=this.sourceImage_.getState();I==$.A.LOADED||I==$.A.ERROR?this.reproject_():(this.sourceListenerKey_=(0,p.KT)(this.sourceImage_,K.A.CHANGE,function(P){const j=this.sourceImage_.getState();(j==$.A.LOADED||j==$.A.ERROR)&&(this.unlistenSource_(),this.reproject_())},this),this.sourceImage_.load())}}unlistenSource_(){(0,p.JH)(this.sourceListenerKey_),this.sourceListenerKey_=null}};var r=c(9159),u=c(2344),o=c(9973),f=c(9325),g=c(2058);class C extends V.Ay{constructor(I,P){super(I),this.image=P}}function v(z,I){z.getImage().src=I}function U(z,I,P,j){const Y=I/P,T=(0,E.q1)(z),O=(0,o.mk)((0,E.RG)(z)/Y,u.B),R=(0,o.mk)((0,E.Oq)(z)/Y,u.B),M=O+2*(0,o.mk)((j-1)*O/2,u.B),D=(0,o.mk)((j-1)*R/2,u.B);return(0,E.Bg)(T,Y,0,[M,R+2*D])}const w=class y extends r.A{constructor(I){super({attributions:I.attributions,projection:I.projection,state:I.state,interpolate:void 0===I.interpolate||I.interpolate}),this.loader=I.loader||null,this.resolutions_=void 0!==I.resolutions?I.resolutions:null,this.reprojectedImage_=null,this.reprojectedRevision_=0,this.image=null,this.static_=!!I.loader&&0===I.loader.length,this.wantedProjection_=null}getResolutions(){return this.resolutions_}setResolutions(I){this.resolutions_=I}findNearestResolution(I){const P=this.getResolutions();return P&&(I=P[(0,g.FT)(P,I,0)]),I}getImage(I,P,j,Y){const T=this.getProjection();if(!T||!Y||(0,f.tI)(T,Y))return T&&(Y=T),this.getImageInternal(I,P,j,Y);if(this.reprojectedImage_){if(this.reprojectedRevision_==this.getRevision()&&(0,f.tI)(this.reprojectedImage_.getProjection(),Y)&&this.reprojectedImage_.getResolution()==P&&(0,E.aI)(this.reprojectedImage_.getExtent(),I))return this.reprojectedImage_;this.reprojectedImage_.dispose(),this.reprojectedImage_=null}return this.reprojectedImage_=new h(T,Y,I,P,j,(O,R,A)=>this.getImageInternal(O,R,A,T),this.getInterpolate()),this.reprojectedRevision_=this.getRevision(),this.reprojectedImage_}getImageInternal(I,P,j,Y){if(this.loader){const T=U(I,P,j,1),O=this.findNearestResolution(P);if(this.image&&(this.static_||this.wantedProjection_===Y&&(this.wantedExtent_&&(0,E.ms)(this.wantedExtent_,T)||(0,E.ms)(this.image.getExtent(),T))&&(this.wantedResolution_&&(0,F.m)(this.wantedResolution_)===O||(0,F.m)(this.image.getResolution())===O)))return this.image;this.wantedProjection_=Y,this.wantedExtent_=T,this.wantedResolution_=O,this.image=new Z.Ay(T,O,j,this.loader),this.image.addEventListener(K.A.CHANGE,this.handleImageChange.bind(this))}return this.image}handleImageChange(I){const P=I.target;let j;switch(P.getState()){case $.A.LOADING:this.loading=!0,j="imageloadstart";break;case $.A.LOADED:this.loading=!1,j="imageloadend";break;case $.A.ERROR:this.loading=!1,j="imageloaderror";break;default:return}this.hasListener(j)&&this.dispatchEvent(new C(j,P))}}},7659:(ce,gt,c)=>{"use strict";c.d(gt,{A:()=>B});var V=c(4579),K=c(2321),$=c(2212),Z=c(6490),L=c(9325);const B=class b extends V.Ay{constructor(E){super({attributions:(E=E||{}).attributions,interpolate:E.interpolate,projection:E.projection,resolutions:E.resolutions}),this.crossOrigin_=void 0!==E.crossOrigin?E.crossOrigin:null,this.url_=E.url,this.imageLoadFunction_=void 0!==E.imageLoadFunction?E.imageLoadFunction:V.VV,this.params_=Object.assign({},E.params),this.serverType_=E.serverType,this.hidpi_=void 0===E.hidpi||E.hidpi,this.renderedRevision_=0,this.ratio_=void 0!==E.ratio?E.ratio:1.5,this.loaderProjection_=null}getFeatureInfoUrl(E,p,_,h){const r=(0,L.Jt)(_),u=this.getProjection();u&&u!==r&&(p=(0,K.KQ)(u,r,E,p),E=(0,L.pd)(E,r,u));const o={url:this.url_,params:{...this.params_,...h},projection:u||r};return(0,$.y4)(o,E,p)}getLegendUrl(E,p){return(0,$.$q)({url:this.url_,params:{...this.params_,...p}},E)}getParams(){return this.params_}getImageInternal(E,p,_,h){return void 0===this.url_?null:((!this.loader||this.loaderProjection_!==h)&&(this.loaderProjection_=h,this.loader=(0,$.Eq)({crossOrigin:this.crossOrigin_,params:this.params_,projection:h,serverType:this.serverType_,hidpi:this.hidpi_,url:this.url_,ratio:this.ratio_,load:(r,u)=>(this.image.setImage(r),this.imageLoadFunction_(this.image,u),(0,Z.D4)(r))})),super.getImageInternal(E,p,_,h))}getImageLoadFunction(){return this.imageLoadFunction_}getUrl(){return this.url_}setImageLoadFunction(E){this.imageLoadFunction_=E,this.changed()}setUrl(E){E!=this.url_&&(this.url_=E,this.loader=null,this.changed())}updateParams(E){Object.assign(this.params_,E),this.changed()}changed(){this.image=null,super.changed()}}},6160:(ce,gt,c)=>{"use strict";c.d(gt,{A:()=>Z});var V=c(8518);const Z=class $ extends V.A{constructor(b){let B;B=void 0!==(b=b||{}).attributions?b.attributions:['&#169; <a href="https://www.openstreetmap.org/copyright" target="_blank">OpenStreetMap</a> contributors.'],super({attributions:B,attributionsCollapsible:!1,cacheSize:b.cacheSize,crossOrigin:void 0!==b.crossOrigin?b.crossOrigin:"anonymous",interpolate:b.interpolate,maxZoom:void 0!==b.maxZoom?b.maxZoom:19,opaque:void 0===b.opaque||b.opaque,reprojectionErrorThreshold:b.reprojectionErrorThreshold,tileLoadFunction:b.tileLoadFunction,transition:b.transition,url:void 0!==b.url?b.url:"https://tile.openstreetmap.org/{z}/{x}/{y}.png",wrapX:b.wrapX,zDirection:b.zDirection})}}},7712:(ce,gt,c)=>{"use strict";c.d(gt,{Ay:()=>O});var V=c(9153),K=c(3805),$=c(6621),Z=c(1950),L=c(7908),b=c(4579),B=c(9159),F=c(8201),E=c(1334),p=c(7849),_=c(5551),h=c(1983),r=c(8507),u=c(2383);let f,o=!0;try{new ImageData(10,10)}catch{o=!1}function a(R){let A=!0;try{new ImageData(10,10)}catch{A=!1}function M(D,H,it){return A?new ImageData(D,H,it):{data:D,width:H,height:it}}return function(D){const H=D.buffers,it=D.meta,xt=D.width,At=D.height,St=H.length,Ut=H[0].byteLength;if(D.imageOps){const Ft=new Array(St);for(let Zt=0;Zt<St;++Zt)Ft[Zt]=M(new Uint8ClampedArray(H[Zt]),xt,At);return R(Ft,it).data.buffer}const Kt=new Uint8ClampedArray(Ut),ut=new Array(St),Tt=new Array(St);for(let Ft=0;Ft<St;++Ft)ut[Ft]=new Uint8ClampedArray(H[Ft]),Tt[Ft]=[0,0,0,0];for(let Ft=0;Ft<Ut;Ft+=4){for(let Zt=0;Zt<St;++Zt){const ge=ut[Zt];Tt[Zt][0]=ge[Ft],Tt[Zt][1]=ge[Ft+1],Tt[Zt][2]=ge[Ft+2],Tt[Zt][3]=ge[Ft+3]}const ie=R(Tt,it);Kt[Ft]=ie[0],Kt[Ft+1]=ie[1],Kt[Ft+2]=ie[2],Kt[Ft+3]=ie[3]}return Kt.buffer}}function C(R,A){const D=Object.keys(R.lib||{}).map(function(it){return"const "+it+" = "+R.lib[it].toString()+";"}).concat(["const __minion__ = ("+a.toString()+")(",R.operation.toString(),");",'self.addEventListener("message", function(event) {',"  const buffer = __minion__(event.data);","  self.postMessage({buffer: buffer, meta: event.data.meta}, [buffer]);","});"]),H=new Worker(typeof Blob>"u"?"data:text/javascript;base64,"+Buffer.from(D.join("\n"),"binary").toString("base64"):URL.createObjectURL(new Blob(D,{type:"text/javascript"})));return H.addEventListener("message",A),H}class v extends V.A{constructor(A){let M;super(),this._imageOps=!!A.imageOps,M=0===A.threads?0:this._imageOps?1:A.threads||1;const D=new Array(M);if(M)for(let H=0;H<M;++H)D[H]=C(A,this._onWorkerMessage.bind(this,H));else D[0]=function y(R,A){const M=a(R.operation);let D=!1;return{postMessage:function(H){setTimeout(function(){D||A({data:{buffer:M(H),meta:H.meta}})},0)},terminate:function(){D=!0}}}(A,this._onWorkerMessage.bind(this,0));this._workers=D,this._queue=[],this._maxQueueLength=A.queue||1/0,this._running=0,this._dataLookup={},this._job=null}process(A,M,D){this._enqueue({inputs:A,meta:M,callback:D}),this._dispatch()}_enqueue(A){for(this._queue.push(A);this._queue.length>this._maxQueueLength;)this._queue.shift().callback(null,null)}_dispatch(){if(this._running||0===this._queue.length)return;const A=this._queue.shift();this._job=A;const M=A.inputs[0].width,D=A.inputs[0].height,H=A.inputs.map(function(At){return At.data.buffer}),it=this._workers.length;if(this._running=it,1===it)return void this._workers[0].postMessage({buffers:H,meta:A.meta,imageOps:this._imageOps,width:M,height:D},H);const xt=4*Math.ceil(A.inputs[0].data.length/4/it);for(let At=0;At<it;++At){const St=At*xt,Ut=[];for(let Kt=0,ut=H.length;Kt<ut;++Kt)Ut.push(H[Kt].slice(St,St+xt));this._workers[At].postMessage({buffers:Ut,meta:A.meta,imageOps:this._imageOps,width:M,height:D},Ut)}}_onWorkerMessage(A,M){this.disposed||(this._dataLookup[A]=M.data,--this._running,0===this._running&&this._resolveJob())}_resolveJob(){const A=this._job,M=this._workers.length;let D,H;if(1===M)D=new Uint8ClampedArray(this._dataLookup[0].buffer),H=this._dataLookup[0].meta;else{const it=A.inputs[0].data.length;D=new Uint8ClampedArray(it),H=new Array(M);const lt=4*Math.ceil(it/4/M);for(let xt=0;xt<M;++xt){const St=xt*lt;D.set(new Uint8ClampedArray(this._dataLookup[xt].buffer),St),H[xt]=this._dataLookup[xt].meta}}this._job=null,this._dataLookup={},A.callback(null,function g(R,A,M){if(o)return new ImageData(R,A,M);f||(f=document.createElement("canvas").getContext("2d"));const D=f.createImageData(A,M);return D.data.set(R),D}(D,A.inputs[0].width,A.inputs[0].height),H),this._dispatch()}disposeInternal(){for(let A=0;A<this._workers.length;++A)this._workers[A].terminate();this._workers.length=0}}class w extends K.Ay{constructor(A,M,D){super(A),this.extent=M.extent,this.resolution=M.viewState.resolution/M.pixelRatio,this.data=D}}let I=null;function P(R,A){const M=R.getRenderer();if(!M)throw new Error("Unsupported layer type: "+R);if(!M.prepareFrame(A))return null;const D=A.size[0],H=A.size[1];if(0===D||0===H)return null;const it=M.renderFrame(A,null);let lt;if(it instanceof HTMLCanvasElement)lt=it;else{if(it&&(lt=it.firstElementChild),!(lt instanceof HTMLCanvasElement))throw new Error("Unsupported rendered element: "+lt);if(lt.width===D&&lt.height===H)return lt.getContext("2d").getImageData(0,0,D,H)}if(I){const xt=I.canvas;xt.width!==D||xt.height!==H?I=(0,_.Y)(D,H,void 0,{willReadFrequently:!0}):I.clearRect(0,0,D,H)}else I=(0,_.Y)(D,H,void 0,{willReadFrequently:!0});return I.drawImage(lt,0,0,D,H),I.getImageData(0,0,D,H)}function T(R){let A;return R instanceof B.A?R instanceof p.A?A=new F.A({source:R}):R instanceof b.Ay&&(A=new L.A({source:R})):A=R,A}const O=class z extends b.Ay{constructor(A){super({projection:null}),this.processor_=null,this.operationType_=void 0!==A.operationType?A.operationType:"pixel",this.threads_=void 0!==A.threads?A.threads:1,this.layers_=function Y(R){const A=R.length,M=new Array(A);for(let D=0;D<A;++D)M[D]=T(R[D]);return M}(A.sources);const M=this.changed.bind(this);for(let D=0,H=this.layers_.length;D<H;++D)this.layers_[D].addEventListener($.A.CHANGE,M);var R;this.useResolutions_=null!==A.resolutions,this.tileQueue_=new E.A(function(){return 1},this.processSources_.bind(this)),this.renderedImageCanvas_=null,this.frameState_={animate:!1,coordinateToPixelTransform:(0,h.vt)(),declutter:null,extent:null,index:0,layerIndex:0,layerStatesArray:(R=this.layers_,R.map(function(A){return A.getLayerState()})),pixelRatio:1,pixelToCoordinateTransform:(0,h.vt)(),postRenderFunctions:[],size:[0,0],tileQueue:this.tileQueue_,time:Date.now(),usedTiles:{},viewState:{rotation:0},viewHints:[],wantedTiles:{},mapId:(0,u.v6)(this),renderTargets:{}},this.setAttributions(function(D){const H=[];for(let it=0,lt=A.sources.length;it<lt;++it){const xt=A.sources[it],At=xt instanceof B.A?xt:xt.getSource();if(!At)continue;const St=At.getAttributions();if("function"==typeof St){const Ut=St(D);H.push.apply(H,Ut)}}return 0!==H.length?H:null}),void 0!==A.operation&&this.setOperation(A.operation,A.lib)}setOperation(A,M){this.processor_&&this.processor_.dispose(),this.processor_=new v({operation:A,imageOps:"image"===this.operationType_,queue:1,lib:M,threads:this.threads_}),this.changed()}updateFrameState_(A,M,D){const H=Object.assign({},this.frameState_);H.viewState=Object.assign({},H.viewState);const it=(0,r.q1)(A);H.size[0]=Math.ceil((0,r.RG)(A)/M),H.size[1]=Math.ceil((0,r.Oq)(A)/M),H.extent=[it[0]-H.size[0]*M/2,it[1]-H.size[1]*M/2,it[0]+H.size[0]*M/2,it[1]+H.size[1]*M/2],H.time=Date.now();const lt=H.viewState;return lt.center=it,lt.projection=D,lt.resolution=M,H}allSourcesReady_(){let M,A=!0;for(let D=0,H=this.layers_.length;D<H;++D)if(M=this.layers_[D].getSource(),!M||"ready"!==M.getState()){A=!1;break}return A}getImage(A,M,D,H){if(!this.allSourcesReady_())return null;this.tileQueue_.loadMoreTiles(16,16),M=this.findNearestResolution(M);const it=this.updateFrameState_(A,M,H);if(this.requestedFrameState_=it,this.renderedImageCanvas_){const lt=this.renderedImageCanvas_.getResolution(),xt=this.renderedImageCanvas_.getExtent();(M!==lt||!(0,r.aI)(it.extent,xt))&&(this.renderedImageCanvas_=null)}return(!this.renderedImageCanvas_||this.getRevision()!==this.renderedRevision_)&&this.processSources_(),it.animate&&requestAnimationFrame(this.changed.bind(this)),this.renderedImageCanvas_}processSources_(){const A=this.requestedFrameState_,M=this.layers_.length,D=new Array(M);for(let it=0;it<M;++it){A.layerIndex=it,A.renderTargets={};const lt=P(this.layers_[it],A);if(!lt)return;D[it]=lt}const H={};this.dispatchEvent(new w("beforeoperations",A,H)),this.processor_.process(D,H,this.onWorkerComplete_.bind(this,A))}onWorkerComplete_(A,M,D,H){if(M||!D)return;const it=A.extent,lt=A.viewState.resolution;if(lt!==this.requestedFrameState_.viewState.resolution||!(0,r.aI)(it,this.requestedFrameState_.extent))return;let xt;if(this.renderedImageCanvas_)xt=this.renderedImageCanvas_.getImage().getContext("2d");else{const At=Math.round((0,r.RG)(it)/lt),St=Math.round((0,r.Oq)(it)/lt);xt=(0,_.Y)(At,St),this.renderedImageCanvas_=new Z.A(it,lt,1,xt.canvas)}xt.putImageData(D,0,0),A.animate?requestAnimationFrame(this.changed.bind(this)):this.changed(),this.renderedRevision_=this.getRevision(),this.dispatchEvent(new w("afteroperations",A,H))}getResolutions(A){if(!this.useResolutions_)return null;let M=super.getResolutions();if(!M)for(let D=0,H=this.layers_.length;D<H&&(M=this.layers_[D].getSource().getResolutions(A),!M);++D);return M}disposeInternal(){this.processor_&&this.processor_.dispose(),super.disposeInternal()}}},9159:(ce,gt,c)=>{"use strict";c.d(gt,{A:()=>L});var V=c(9568),K=c(9325);function Z(b){return b?Array.isArray(b)?function(B){return b}:"function"==typeof b?b:function(B){return[b]}:null}const L=class $ extends V.A{constructor(B){super(),this.projection=(0,K.Jt)(B.projection),this.attributions_=Z(B.attributions),this.attributionsCollapsible_=void 0===B.attributionsCollapsible||B.attributionsCollapsible,this.loading=!1,this.state_=void 0!==B.state?B.state:"ready",this.wrapX_=void 0!==B.wrapX&&B.wrapX,this.interpolate_=!!B.interpolate,this.viewResolver=null,this.viewRejector=null;const F=this;this.viewPromise_=new Promise(function(E,p){F.viewResolver=E,F.viewRejector=p})}getAttributions(){return this.attributions_}getAttributionsCollapsible(){return this.attributionsCollapsible_}getProjection(){return this.projection}getResolutions(B){return null}getView(){return this.viewPromise_}getState(){return this.state_}getWrapX(){return this.wrapX_}getInterpolate(){return this.interpolate_}refresh(){this.changed()}setAttributions(B){this.attributions_=Z(B),this.changed()}setState(B){this.state_=B,this.changed()}}},7849:(ce,gt,c)=>{"use strict";c.d(gt,{A:()=>r,c:()=>h});var V=c(3805),K=c(9159),$=c(9189),Z=c(9806),L=c(2383),b=c(5940),B=c(9325),F=c(6690),E=c(6151),p=c(9270);class h extends V.Ay{constructor(o,f){super(o),this.tile=f}}const r=class _ extends K.A{constructor(o){super({attributions:o.attributions,attributionsCollapsible:o.attributionsCollapsible,projection:o.projection,state:o.state,wrapX:o.wrapX,interpolate:o.interpolate}),this.opaque_=void 0!==o.opaque&&o.opaque,this.tilePixelRatio_=void 0!==o.tilePixelRatio?o.tilePixelRatio:1,this.tileGrid=void 0!==o.tileGrid?o.tileGrid:null,this.tileGrid&&(0,p.xq)(this.tileGrid.getTileSize(this.tileGrid.getMinZoom()),[256,256]),this.tileCache=new $.A(o.cacheSize||0),this.tmpSize=[0,0],this.key_=o.key||"",this.tileOptions={transition:o.transition,interpolate:o.interpolate},this.zDirection=o.zDirection?o.zDirection:0}canExpireCache(){return this.tileCache.canExpireCache()}expireCache(o,f){const g=this.getTileCacheForProjection(o);g&&g.expireCache(f)}forEachLoadedTile(o,f,g,a){const C=this.getTileCacheForProjection(o);if(!C)return!1;let v,U,w,y=!0;for(let z=g.minX;z<=g.maxX;++z)for(let I=g.minY;I<=g.maxY;++I)U=(0,F.dp)(f,z,I),w=!1,C.containsKey(U)&&(v=C.get(U),w=v.getState()===Z.A.LOADED,w&&(w=!1!==a(v))),w||(y=!1);return y}getGutterForProjection(o){return 0}getKey(){return this.key_}setKey(o){this.key_!==o&&(this.key_=o,this.changed())}getOpaque(o){return this.opaque_}getResolutions(o){const f=o?this.getTileGridForProjection(o):this.tileGrid;return f?f.getResolutions():null}getTile(o,f,g,a,C){return(0,L.b0)()}getTileGrid(){return this.tileGrid}getTileGridForProjection(o){return this.tileGrid?this.tileGrid:(0,E.pr)(o)}getTileCacheForProjection(o){const f=this.getProjection();return(0,b.v)(null===f||(0,B.tI)(f,o),"A VectorTile source can only be rendered if it has a projection compatible with the view projection."),this.tileCache}getTilePixelRatio(o){return this.tilePixelRatio_}getTilePixelSize(o,f,g){const a=this.getTileGridForProjection(g),C=this.getTilePixelRatio(f),y=(0,p.xq)(a.getTileSize(o),this.tmpSize);return 1==C?y:(0,p.hs)(y,C,this.tmpSize)}getTileCoordForTileUrlFunction(o,f){f=void 0!==f?f:this.getProjection();const g=this.getTileGridForProjection(f);return this.getWrapX()&&f.isGlobal()&&(o=(0,E.Li)(g,o,f)),(0,F.N5)(o,g)?o:null}clear(){this.tileCache.clear()}refresh(){this.clear(),super.refresh()}updateCacheSize(o,f){const g=this.getTileCacheForProjection(f);o>g.highWaterMark&&(g.highWaterMark=o)}useTile(o,f,g,a){}}},1992:(ce,gt,c)=>{"use strict";c.d(gt,{A:()=>r});var V=c(6621),K=c(8118),$=c(8836),Z=c(9189),L=c(9806),b=c(8002),B=c(9325),F=c(6690),E=c(6151),p=c(2383);function h(u,o){u.getImage().src=o}const r=class _ extends b.A{constructor(o){super({attributions:o.attributions,cacheSize:o.cacheSize,opaque:o.opaque,projection:o.projection,state:o.state,tileGrid:o.tileGrid,tileLoadFunction:o.tileLoadFunction?o.tileLoadFunction:h,tilePixelRatio:o.tilePixelRatio,tileUrlFunction:o.tileUrlFunction,url:o.url,urls:o.urls,wrapX:o.wrapX,transition:o.transition,interpolate:void 0===o.interpolate||o.interpolate,key:o.key,attributionsCollapsible:o.attributionsCollapsible,zDirection:o.zDirection}),this.crossOrigin=void 0!==o.crossOrigin?o.crossOrigin:null,this.tileClass=void 0!==o.tileClass?o.tileClass:K.A,this.tileCacheForProjection={},this.tileGridForProjection={},this.reprojectionErrorThreshold_=o.reprojectionErrorThreshold,this.renderReprojectionEdges_=!1}canExpireCache(){if(this.tileCache.canExpireCache())return!0;for(const o in this.tileCacheForProjection)if(this.tileCacheForProjection[o].canExpireCache())return!0;return!1}expireCache(o,f){const g=this.getTileCacheForProjection(o);this.tileCache.expireCache(this.tileCache==g?f:{});for(const a in this.tileCacheForProjection){const C=this.tileCacheForProjection[a];C.expireCache(C==g?f:{})}}getGutterForProjection(o){return this.getProjection()&&o&&!(0,B.tI)(this.getProjection(),o)?0:this.getGutter()}getGutter(){return 0}getKey(){let o=super.getKey();return this.getInterpolate()||(o+=":disable-interpolation"),o}getOpaque(o){return!(this.getProjection()&&o&&!(0,B.tI)(this.getProjection(),o))&&super.getOpaque(o)}getTileGridForProjection(o){const f=this.getProjection();if(this.tileGrid&&(!f||(0,B.tI)(f,o)))return this.tileGrid;const g=(0,p.v6)(o);return g in this.tileGridForProjection||(this.tileGridForProjection[g]=(0,E.pr)(o)),this.tileGridForProjection[g]}getTileCacheForProjection(o){const f=this.getProjection();if(!f||(0,B.tI)(f,o))return this.tileCache;const g=(0,p.v6)(o);return g in this.tileCacheForProjection||(this.tileCacheForProjection[g]=new Z.A(this.tileCache.highWaterMark)),this.tileCacheForProjection[g]}createTile_(o,f,g,a,C,y){const v=[o,f,g],U=this.getTileCoordForTileUrlFunction(v,C),w=U?this.tileUrlFunction(U,a,C):void 0,z=new this.tileClass(v,void 0!==w?L.A.IDLE:L.A.EMPTY,void 0!==w?w:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return z.key=y,z.addEventListener(V.A.CHANGE,this.handleTileChange.bind(this)),z}getTile(o,f,g,a,C){const y=this.getProjection();if(!y||!C||(0,B.tI)(y,C))return this.getTileInternal(o,f,g,a,y||C);const v=this.getTileCacheForProjection(C),U=[o,f,g];let w;const z=(0,F.i7)(U);v.containsKey(z)&&(w=v.get(z));const I=this.getKey();if(w&&w.key==I)return w;const P=this.getTileGridForProjection(y),j=this.getTileGridForProjection(C),Y=this.getTileCoordForTileUrlFunction(U,C),T=new $.A(y,P,C,j,U,Y,this.getTilePixelRatio(a),this.getGutter(),(O,R,A,M)=>this.getTileInternal(O,R,A,M,y),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_,this.tileOptions);return T.key=I,w?(T.interimTile=w,T.refreshInterimChain(),v.replace(z,T)):v.set(z,T),T}getTileInternal(o,f,g,a,C){let y=null;const v=(0,F.dp)(o,f,g),U=this.getKey();if(this.tileCache.containsKey(v)){if(y=this.tileCache.get(v),y.key!=U){const w=y;y=this.createTile_(o,f,g,a,C,U),y.interimTile=w.getState()==L.A.IDLE?w.interimTile:w,y.refreshInterimChain(),this.tileCache.replace(v,y)}}else y=this.createTile_(o,f,g,a,C,U),this.tileCache.set(v,y);return y}setRenderReprojectionEdges(o){if(this.renderReprojectionEdges_!=o){this.renderReprojectionEdges_=o;for(const f in this.tileCacheForProjection)this.tileCacheForProjection[f].clear();this.changed()}}setTileGridForProjection(o,f){const g=(0,B.Jt)(o);if(g){const a=(0,p.v6)(g);a in this.tileGridForProjection||(this.tileGridForProjection[a]=f)}}clear(){super.clear();for(const o in this.tileCacheForProjection)this.tileCacheForProjection[o].clear()}}},1888:(ce,gt,c)=>{"use strict";c.d(gt,{A:()=>_});var V=c(1992),K=c(2212),$=c(4873),Z=c(8507),L=c(2321),b=c(5454),B=c(9325),F=c(9973),E=c(6690);const _=class p extends V.A{constructor(r){r=r||{};const u=Object.assign({},r.params);super({attributions:r.attributions,attributionsCollapsible:r.attributionsCollapsible,cacheSize:r.cacheSize,crossOrigin:r.crossOrigin,interpolate:r.interpolate,opaque:!(!("TRANSPARENT"in u)||u.TRANSPARENT),projection:r.projection,reprojectionErrorThreshold:r.reprojectionErrorThreshold,tileClass:r.tileClass,tileGrid:r.tileGrid,tileLoadFunction:r.tileLoadFunction,url:r.url,urls:r.urls,wrapX:void 0===r.wrapX||r.wrapX,transition:r.transition,zDirection:r.zDirection}),this.gutter_=void 0!==r.gutter?r.gutter:0,this.params_=u,this.v13_=!0,this.serverType_=r.serverType,this.hidpi_=void 0===r.hidpi||r.hidpi,this.tmpExtent_=(0,Z.S5)(),this.updateV13_(),this.setKey(this.getKeyForParams_())}getFeatureInfoUrl(r,u,o,f){const g=(0,B.Jt)(o),a=this.getProjection()||g;let C=this.getTileGrid();C||(C=this.getTileGridForProjection(a));const y=(0,B.pd)(r,g,a),v=(0,L.KQ)(a,g,r,u),U=C.getZForResolution(v,this.zDirection),w=C.getResolution(U),z=C.getTileCoordForCoordAndZ(y,U);if(C.getResolutions().length<=z[0])return;let I=C.getTileCoordExtent(z,this.tmpExtent_);const P=this.gutter_;0!==P&&(I=(0,Z.r)(I,w*P,I));const j={QUERY_LAYERS:this.params_.LAYERS};Object.assign(j,(0,K.W3)(this.params_,"GetFeatureInfo"),f);const Y=Math.floor((y[0]-I[0])/w),T=Math.floor((I[3]-y[1])/w);return j[this.v13_?"I":"X"]=Y,j[this.v13_?"J":"Y"]=T,this.getRequestUrl_(z,I,1,a||g,j)}getLegendUrl(r,u){if(void 0===this.urls[0])return;const o={SERVICE:"WMS",VERSION:K.jD,REQUEST:"GetLegendGraphic",FORMAT:"image/png"};if(void 0===u||void 0===u.LAYER){const f=this.params_.LAYERS;if(Array.isArray(f)&&1!==f.length)return;o.LAYER=f}if(void 0!==r){const f=this.getProjection()?this.getProjection().getMetersPerUnit():1;o.SCALE=r*f/28e-5}return Object.assign(o,u),(0,$.L)(this.urls[0],o)}getGutter(){return this.gutter_}getParams(){return this.params_}getRequestUrl_(r,u,o,f,g){const a=this.urls;if(!a)return;let C;return C=1==a.length?a[0]:a[(0,F.xP)((0,E.tW)(r),a.length)],(0,K.AE)(u,(this.tileGrid||this.getTileGridForProjection(f)).getResolution(r[0]),o,f,C,g,this.serverType_)}getTilePixelRatio(r){return this.hidpi_&&void 0!==this.serverType_?r:1}getKeyForParams_(){let r=0;const u=[];for(const o in this.params_)u[r++]=o+"-"+this.params_[o];return u.join("/")}updateParams(r){Object.assign(this.params_,r),this.updateV13_(),this.setKey(this.getKeyForParams_())}updateV13_(){this.v13_=(0,b.Z)(this.params_.VERSION||K.jD,"1.3")>=0}tileUrlFunction(r,u,o){let f=this.getTileGrid();if(f||(f=this.getTileGridForProjection(o)),f.getResolutions().length<=r[0])return;1!=u&&(!this.hidpi_||void 0===this.serverType_)&&(u=1);const g=f.getResolution(r[0]);let a=f.getTileCoordExtent(r,this.tmpExtent_);const C=this.gutter_;0!==C&&(a=(0,Z.r)(a,g*C,a));const y=Object.assign({},(0,K.W3)(this.params_,"GetMap"));return this.getRequestUrl_(r,a,u,o,y)}}},8002:(ce,gt,c)=>{"use strict";c.d(gt,{A:()=>F});var K=c(7849),$=c(9806),Z=c(454),L=c(6690),b=c(2383);class B extends K.A{constructor(p){super({attributions:p.attributions,cacheSize:p.cacheSize,opaque:p.opaque,projection:p.projection,state:p.state,tileGrid:p.tileGrid,tilePixelRatio:p.tilePixelRatio,wrapX:p.wrapX,transition:p.transition,interpolate:p.interpolate,key:p.key,attributionsCollapsible:p.attributionsCollapsible,zDirection:p.zDirection}),this.generateTileUrlFunction_=this.tileUrlFunction===B.prototype.tileUrlFunction,this.tileLoadFunction=p.tileLoadFunction,p.tileUrlFunction&&(this.tileUrlFunction=p.tileUrlFunction),this.urls=null,p.urls?this.setUrls(p.urls):p.url&&this.setUrl(p.url),this.tileLoadingKeys_={}}getTileLoadFunction(){return this.tileLoadFunction}getTileUrlFunction(){return Object.getPrototypeOf(this).tileUrlFunction===this.tileUrlFunction?this.tileUrlFunction.bind(this):this.tileUrlFunction}getUrls(){return this.urls}handleTileChange(p){const _=p.target,h=(0,b.v6)(_),r=_.getState();let u;r==$.A.LOADING?(this.tileLoadingKeys_[h]=!0,u="tileloadstart"):h in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[h],u=r==$.A.ERROR?"tileloaderror":r==$.A.LOADED?"tileloadend":void 0),null!=u&&this.dispatchEvent(new K.c(u,_))}setTileLoadFunction(p){this.tileCache.clear(),this.tileLoadFunction=p,this.changed()}setTileUrlFunction(p,_){this.tileUrlFunction=p,this.tileCache.pruneExceptNewestZ(),typeof _<"u"?this.setKey(_):this.changed()}setUrl(p){const _=(0,Z.Uu)(p);this.urls=_,this.setUrls(_)}setUrls(p){this.urls=p;const _=p.join("\n");this.generateTileUrlFunction_?this.setTileUrlFunction((0,Z.Qz)(p,this.tileGrid),_):this.setKey(_)}tileUrlFunction(p,_,h){}useTile(p,_,h){const r=(0,L.dp)(p,_,h);this.tileCache.containsKey(r)&&this.tileCache.get(r)}}const F=B},6370:(ce,gt,c)=>{"use strict";c.d(gt,{A:()=>w});var V=c(6591),K=c(2927),$=c(3805),Z=c(6621),L=c(6058),b=c(2593),B=c(8507),F=c(2383),E=c(9330);const _=class p{constructor(I){this.rbush_=new b(I),this.items_={}}insert(I,P){const j={minX:I[0],minY:I[1],maxX:I[2],maxY:I[3],value:P};this.rbush_.insert(j),this.items_[(0,F.v6)(P)]=j}load(I,P){const j=new Array(P.length);for(let Y=0,T=P.length;Y<T;Y++){const O=I[Y],R=P[Y],A={minX:O[0],minY:O[1],maxX:O[2],maxY:O[3],value:R};j[Y]=A,this.items_[(0,F.v6)(R)]=A}this.rbush_.load(j)}remove(I){const P=(0,F.v6)(I),j=this.items_[P];return delete this.items_[P],null!==this.rbush_.remove(j)}update(I,P){const j=this.items_[(0,F.v6)(P)];(0,B.aI)([j.minX,j.minY,j.maxX,j.maxY],I)||(this.remove(P),this.insert(I,P))}getAll(){return this.rbush_.all().map(function(P){return P.value})}getInExtent(I){return this.rbush_.search({minX:I[0],minY:I[1],maxX:I[2],maxY:I[3]}).map(function(Y){return Y.value})}forEach(I){return this.forEach_(this.getAll(),I)}forEachInExtent(I,P){return this.forEach_(this.getInExtent(I),P)}forEach_(I,P){let j;for(let Y=0,T=I.length;Y<T;Y++)if(j=P(I[Y]),j)return j;return j}isEmpty(){return(0,E.p)(this.items_)}clear(){this.rbush_.clear(),this.items_={}}getExtent(I){const P=this.rbush_.toJSON();return(0,B.N)(P.minX,P.minY,P.maxX,P.maxY,I)}concat(I){this.rbush_.load(I.rbush_.all());for(const P in I.items_)this.items_[P]=I.items_[P]}};var h=c(2386),r=c(9159),u=c(9392),o=c(1766),f=c(7206),g=c(5940),a=c(2058),C=c(2614),y=c(6750);class v extends $.Ay{constructor(I,P,j){super(I),this.feature=P,this.features=j}}const w=class U extends r.A{constructor(I){super({attributions:(I=I||{}).attributions,interpolate:!0,projection:void 0,state:"ready",wrapX:void 0===I.wrapX||I.wrapX}),this.loader_=o.tV,this.format_=I.format,this.overlaps_=void 0===I.overlaps||I.overlaps,this.url_=I.url,void 0!==I.loader?this.loader_=I.loader:void 0!==this.url_&&((0,g.v)(this.format_,"`format` must be set when `url` is set"),this.loader_=(0,y.nF)(this.url_,this.format_)),this.strategy_=void 0!==I.strategy?I.strategy:f.Q7;const P=void 0===I.useSpatialIndex||I.useSpatialIndex;let j,Y;this.featuresRtree_=P?new _:null,this.loadedExtentsRtree_=new _,this.loadingExtentsCount_=0,this.nullGeometryFeatures_={},this.idIndex_={},this.uidIndex_={},this.featureChangeKeys_={},this.featuresCollection_=null,Array.isArray(I.features)?Y=I.features:I.features&&(j=I.features,Y=j.getArray()),!P&&void 0===j&&(j=new V.A(Y)),void 0!==Y&&this.addFeaturesInternal(Y),void 0!==j&&this.bindFeaturesCollection_(j)}addFeature(I){this.addFeatureInternal(I),this.changed()}addFeatureInternal(I){const P=(0,F.v6)(I);if(!this.addToIndex_(P,I))return void(this.featuresCollection_&&this.featuresCollection_.remove(I));this.setupChangeEvents_(P,I);const j=I.getGeometry();if(j){const Y=j.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(Y,I)}else this.nullGeometryFeatures_[P]=I;this.dispatchEvent(new v(u.A.ADDFEATURE,I))}setupChangeEvents_(I,P){P instanceof h.Ay||(this.featureChangeKeys_[I]=[(0,C.KT)(P,Z.A.CHANGE,this.handleFeatureChange_,this),(0,C.KT)(P,L.A.PROPERTYCHANGE,this.handleFeatureChange_,this)])}addToIndex_(I,P){let j=!0;if(void 0!==P.getId()){const Y=String(P.getId());if(Y in this.idIndex_)if(P instanceof h.Ay){const T=this.idIndex_[Y];T instanceof h.Ay?Array.isArray(T)?T.push(P):this.idIndex_[Y]=[T,P]:j=!1}else j=!1;else this.idIndex_[Y]=P}return j&&((0,g.v)(!(I in this.uidIndex_),"The passed `feature` was already added to the source"),this.uidIndex_[I]=P),j}addFeatures(I){this.addFeaturesInternal(I),this.changed()}addFeaturesInternal(I){const P=[],j=[],Y=[];for(let T=0,O=I.length;T<O;T++){const R=I[T],A=(0,F.v6)(R);this.addToIndex_(A,R)&&j.push(R)}for(let T=0,O=j.length;T<O;T++){const R=j[T],A=(0,F.v6)(R);this.setupChangeEvents_(A,R);const M=R.getGeometry();if(M){const D=M.getExtent();P.push(D),Y.push(R)}else this.nullGeometryFeatures_[A]=R}if(this.featuresRtree_&&this.featuresRtree_.load(P,Y),this.hasListener(u.A.ADDFEATURE))for(let T=0,O=j.length;T<O;T++)this.dispatchEvent(new v(u.A.ADDFEATURE,j[T]))}bindFeaturesCollection_(I){let P=!1;this.addEventListener(u.A.ADDFEATURE,function(j){P||(P=!0,I.push(j.feature),P=!1)}),this.addEventListener(u.A.REMOVEFEATURE,function(j){P||(P=!0,I.remove(j.feature),P=!1)}),I.addEventListener(K.A.ADD,j=>{P||(P=!0,this.addFeature(j.element),P=!1)}),I.addEventListener(K.A.REMOVE,j=>{P||(P=!0,this.removeFeature(j.element),P=!1)}),this.featuresCollection_=I}clear(I){if(I){for(const j in this.featureChangeKeys_)this.featureChangeKeys_[j].forEach(C.JH);this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.uidIndex_={})}else if(this.featuresRtree_){this.featuresRtree_.forEach(Y=>{this.removeFeatureInternal(Y)});for(const Y in this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[Y])}this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.nullGeometryFeatures_={};const P=new v(u.A.CLEAR);this.dispatchEvent(P),this.changed()}forEachFeature(I){if(this.featuresRtree_)return this.featuresRtree_.forEach(I);this.featuresCollection_&&this.featuresCollection_.forEach(I)}forEachFeatureAtCoordinateDirect(I,P){return this.forEachFeatureInExtent([I[0],I[1],I[0],I[1]],function(Y){const T=Y.getGeometry();if(T instanceof h.Ay||T.intersectsCoordinate(I))return P(Y)})}forEachFeatureInExtent(I,P){if(this.featuresRtree_)return this.featuresRtree_.forEachInExtent(I,P);this.featuresCollection_&&this.featuresCollection_.forEach(P)}forEachFeatureIntersectingExtent(I,P){return this.forEachFeatureInExtent(I,function(j){const Y=j.getGeometry();if(Y instanceof h.Ay||Y.intersectsExtent(I)){const T=P(j);if(T)return T}})}getFeaturesCollection(){return this.featuresCollection_}getFeatures(){let I;return this.featuresCollection_?I=this.featuresCollection_.getArray().slice(0):this.featuresRtree_&&(I=this.featuresRtree_.getAll(),(0,E.p)(this.nullGeometryFeatures_)||(0,a.X$)(I,Object.values(this.nullGeometryFeatures_))),I}getFeaturesAtCoordinate(I){const P=[];return this.forEachFeatureAtCoordinateDirect(I,function(j){P.push(j)}),P}getFeaturesInExtent(I,P){if(this.featuresRtree_){if(!(P&&P.canWrapX()&&this.getWrapX()))return this.featuresRtree_.getInExtent(I);const Y=(0,B.QJ)(I,P);return[].concat(...Y.map(T=>this.featuresRtree_.getInExtent(T)))}return this.featuresCollection_?this.featuresCollection_.getArray().slice(0):[]}getClosestFeatureToCoordinate(I,P){const j=I[0],Y=I[1];let T=null;const O=[NaN,NaN];let R=1/0;const A=[-1/0,-1/0,1/0,1/0];return P=P||o.rT,this.featuresRtree_.forEachInExtent(A,function(M){if(P(M)){const D=M.getGeometry(),H=R;if(R=D instanceof h.Ay?0:D.closestPointXY(j,Y,O,R),R<H){T=M;const it=Math.sqrt(R);A[0]=j-it,A[1]=Y-it,A[2]=j+it,A[3]=Y+it}}}),T}getExtent(I){return this.featuresRtree_.getExtent(I)}getFeatureById(I){const P=this.idIndex_[I.toString()];return void 0!==P?P:null}getFeatureByUid(I){const P=this.uidIndex_[I];return void 0!==P?P:null}getFormat(){return this.format_}getOverlaps(){return this.overlaps_}getUrl(){return this.url_}handleFeatureChange_(I){const P=I.target,j=(0,F.v6)(P),Y=P.getGeometry();if(Y){const O=Y.getExtent();j in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[j],this.featuresRtree_&&this.featuresRtree_.insert(O,P)):this.featuresRtree_&&this.featuresRtree_.update(O,P)}else j in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(P),this.nullGeometryFeatures_[j]=P);const T=P.getId();if(void 0!==T){const O=T.toString();this.idIndex_[O]!==P&&(this.removeFromIdIndex_(P),this.idIndex_[O]=P)}else this.removeFromIdIndex_(P),this.uidIndex_[j]=P;this.changed(),this.dispatchEvent(new v(u.A.CHANGEFEATURE,P))}hasFeature(I){const P=I.getId();return void 0!==P?P in this.idIndex_:(0,F.v6)(I)in this.uidIndex_}isEmpty(){return this.featuresRtree_?this.featuresRtree_.isEmpty()&&(0,E.p)(this.nullGeometryFeatures_):!this.featuresCollection_||0===this.featuresCollection_.getLength()}loadFeatures(I,P,j){const Y=this.loadedExtentsRtree_,T=this.strategy_(I,P,j);for(let O=0,R=T.length;O<R;++O){const A=T[O];Y.forEachInExtent(A,function(D){return(0,B.ms)(D.extent,A)})||(++this.loadingExtentsCount_,this.dispatchEvent(new v(u.A.FEATURESLOADSTART)),this.loader_.call(this,A,P,j,D=>{--this.loadingExtentsCount_,this.dispatchEvent(new v(u.A.FEATURESLOADEND,void 0,D))},()=>{--this.loadingExtentsCount_,this.dispatchEvent(new v(u.A.FEATURESLOADERROR))}),Y.insert(A,{extent:A.slice()}))}this.loading=!(this.loader_.length<4)&&this.loadingExtentsCount_>0}refresh(){this.clear(!0),this.loadedExtentsRtree_.clear(),super.refresh()}removeLoadedExtent(I){const P=this.loadedExtentsRtree_;let j;P.forEachInExtent(I,function(Y){if((0,B.aI)(Y.extent,I))return j=Y,!0}),j&&P.remove(j)}removeFeatures(I){const P=[];for(let j=0,Y=I.length;j<Y;++j){const O=this.removeFeatureInternal(I[j]);O&&P.push(O)}P.length>0&&this.changed()}removeFeature(I){I&&this.removeFeatureInternal(I)&&this.changed()}removeFeatureInternal(I){const P=(0,F.v6)(I);if(!(P in this.uidIndex_))return;P in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[P]:this.featuresRtree_&&this.featuresRtree_.remove(I),this.featureChangeKeys_[P]?.forEach(C.JH),delete this.featureChangeKeys_[P];const Y=I.getId();if(void 0!==Y){const T=Y.toString(),O=this.idIndex_[T];O===I?delete this.idIndex_[T]:Array.isArray(O)&&(O.splice(O.indexOf(I),1),1===O.length&&(this.idIndex_[T]=O[0]))}return delete this.uidIndex_[P],this.hasListener(u.A.REMOVEFEATURE)&&this.dispatchEvent(new v(u.A.REMOVEFEATURE,I)),I}removeFromIdIndex_(I){let P=!1;for(const j in this.idIndex_){const Y=this.idIndex_[j];if(I instanceof h.Ay&&Array.isArray(Y)&&Y.includes(I))Y.splice(Y.indexOf(I),1);else if(this.idIndex_[j]===I){delete this.idIndex_[j],P=!0;break}}return P}setLoader(I){this.loader_=I}setUrl(I){(0,g.v)(this.format_,"`format` must be set when `url` is set"),this.url_=I,this.setLoader((0,y.nF)(I,this.format_))}}},9392:(ce,gt,c)=>{"use strict";c.d(gt,{A:()=>V});const V={ADDFEATURE:"addfeature",CHANGEFEATURE:"changefeature",CLEAR:"clear",REMOVEFEATURE:"removefeature",FEATURESLOADSTART:"featuresloadstart",FEATURESLOADEND:"featuresloadend",FEATURESLOADERROR:"featuresloaderror"}},6138:(ce,gt,c)=>{"use strict";c.d(gt,{A:()=>v,Y:()=>U});var V=c(6621),K=c(9100),$=c(9189),Z=c(5534),L=c(9806),b=c(8002),B=c(7783),F=c(5551),E=c(2383);const p=[],h=class _ extends B.A{constructor(z,I,P,j){super(z,I,{transition:0}),this.context_={},this.executorGroups={},this.loadingSourceTiles=0,this.hitDetectionImageData={},this.replayState_={},this.sourceTiles=[],this.errorTileKeys={},this.getSourceTiles=j.bind(void 0,this),this.wrappedTileCoord=P}getContext(z){const I=(0,E.v6)(z);return I in this.context_||(this.context_[I]=(0,F.Y)(1,1,p)),this.context_[I]}hasContext(z){return(0,E.v6)(z)in this.context_}getImage(z){return this.hasContext(z)?this.getContext(z).canvas:null}getReplayState(z){const I=(0,E.v6)(z);return I in this.replayState_||(this.replayState_[I]={dirty:!1,renderedRenderOrder:null,renderedResolution:NaN,renderedRevision:-1,renderedTileResolution:NaN,renderedTileRevision:-1,renderedTileZ:-1}),this.replayState_[I]}load(){this.getSourceTiles()}release(){for(const z in this.context_){const I=this.context_[z];(0,F.Yg)(I),p.push(I.canvas),delete this.context_[z]}super.release()}};var r=c(3139),u=c(8507),o=c(6151),f=c(6690),g=c(9330),a=c(6750),C=c(9270);const v=class y extends b.A{constructor(z){const I=z.projection||"EPSG:3857",P=z.extent||(0,o.kZ)(I),j=z.tileGrid||(0,o.EN)({extent:P,maxResolution:z.maxResolution,maxZoom:void 0!==z.maxZoom?z.maxZoom:22,minZoom:z.minZoom,tileSize:z.tileSize||512});super({attributions:z.attributions,attributionsCollapsible:z.attributionsCollapsible,cacheSize:z.cacheSize,interpolate:!0,opaque:!1,projection:I,state:z.state,tileGrid:j,tileLoadFunction:z.tileLoadFunction?z.tileLoadFunction:U,tileUrlFunction:z.tileUrlFunction,url:z.url,urls:z.urls,wrapX:void 0===z.wrapX||z.wrapX,transition:z.transition,zDirection:void 0===z.zDirection?1:z.zDirection}),this.format_=z.format?z.format:null,this.sourceTileCache=new $.A(this.tileCache.highWaterMark),this.overlaps_=null==z.overlaps||z.overlaps,this.tileClass=z.tileClass?z.tileClass:K.A,this.tileGrids_={}}getFeaturesInExtent(z){const I=[],P=this.tileCache;if(0===P.getCount())return I;const j=(0,f.K)(P.peekFirstKey())[0],Y=this.tileGrid;return P.forEach(function(T){if(T.tileCoord[0]!==j||T.getState()!==L.A.LOADED)return;const O=T.getSourceTiles();for(let R=0,A=O.length;R<A;++R){const M=O[R];if((0,u.HY)(z,Y.getTileCoordExtent(M.tileCoord))){const H=M.getFeatures();if(H)for(let it=0,lt=H.length;it<lt;++it){const xt=H[it],At=xt.getGeometry();(0,u.HY)(z,At.getExtent())&&I.push(xt)}}}}),I}getOverlaps(){return this.overlaps_}clear(){this.tileCache.clear(),this.sourceTileCache.clear()}expireCache(z,I){const P=this.getTileCacheForProjection(z),j=Object.keys(I).reduce((Y,T)=>{const O=(0,f.gr)(T),R=P.peek(O);if(R){const A=R.sourceTiles;for(let M=0,D=A.length;M<D;++M)Y[A[M].getKey()]=!0}return Y},{});super.expireCache(z,I),this.sourceTileCache.expireCache(j)}getSourceTiles(z,I,P){if(P.getState()===L.A.IDLE){P.setState(L.A.LOADING);const j=P.wrappedTileCoord,Y=this.getTileGridForProjection(I),T=Y.getTileCoordExtent(j),R=Y.getResolution(j[0]);(0,u.r)(T,-R,T);const A=this.tileGrid,M=A.getExtent();M&&(0,u._N)(T,M,T);const D=A.getZForResolution(R,this.zDirection);A.forEachTileCoord(T,D,H=>{const it=this.tileUrlFunction(H,z,I),lt=this.sourceTileCache.containsKey(it)?this.sourceTileCache.get(it):new this.tileClass(H,it?L.A.IDLE:L.A.EMPTY,it,this.format_,this.tileLoadFunction);P.sourceTiles.push(lt);const xt=lt.getState();if(xt<L.A.LOADED){const At=St=>{this.handleTileChange(St);const Ut=lt.getState();if(Ut===L.A.LOADED||Ut===L.A.ERROR){const Kt=lt.getKey();Kt in P.errorTileKeys?lt.getState()===L.A.LOADED&&delete P.errorTileKeys[Kt]:P.loadingSourceTiles--,Ut===L.A.ERROR?P.errorTileKeys[Kt]=!0:lt.removeEventListener(V.A.CHANGE,At),0===P.loadingSourceTiles&&P.setState((0,g.p)(P.errorTileKeys)?L.A.LOADED:L.A.ERROR)}};lt.addEventListener(V.A.CHANGE,At),P.loadingSourceTiles++}xt===L.A.IDLE&&(lt.extent=A.getTileCoordExtent(H),lt.projection=I,lt.resolution=A.getResolution(H[0]),this.sourceTileCache.set(it,lt),lt.load())}),P.loadingSourceTiles||P.setState(P.sourceTiles.some(H=>H.getState()===L.A.ERROR)?L.A.ERROR:L.A.LOADED)}return P.sourceTiles}getTile(z,I,P,j,Y){const T=(0,f.dp)(z,I,P),O=this.getKey();let R;if(this.tileCache.containsKey(T)&&(R=this.tileCache.get(T),R.key===O))return R;const A=[z,I,P];let M=this.getTileCoordForTileUrlFunction(A,Y);const D=this.getTileGrid().getExtent(),H=this.getTileGridForProjection(Y);if(M&&D){const xt=H.getTileCoordExtent(M);(0,u.r)(xt,-H.getResolution(z),xt),(0,u.HY)(D,xt)||(M=null)}let it=!0;if(null!==M){const xt=this.tileGrid,At=H.getResolution(z),St=xt.getZForResolution(At,1),Ut=H.getTileCoordExtent(M);(0,u.r)(Ut,-At,Ut),xt.forEachTileCoord(Ut,St,Kt=>{it=it&&!this.tileUrlFunction(Kt,j,Y)})}const lt=new h(A,it?L.A.EMPTY:L.A.IDLE,M,this.getSourceTiles.bind(this,j,Y));return lt.key=O,R?(lt.interimTile=R,lt.refreshInterimChain(),this.tileCache.replace(T,lt)):this.tileCache.set(T,lt),lt}getTileGridForProjection(z){const I=z.getCode();let P=this.tileGrids_[I];if(!P){const j=this.tileGrid,Y=j.getResolutions().slice(),T=Y.map(function(A,M){return j.getOrigin(M)}),O=Y.map(function(A,M){return j.getTileSize(M)}),R=r.L+1;for(let A=Y.length;A<R;++A)Y.push(Y[A-1]/2),T.push(T[A-1]),O.push(O[A-1]);P=new Z.A({extent:j.getExtent(),origins:T,resolutions:Y,tileSizes:O}),this.tileGrids_[I]=P}return P}getTilePixelRatio(z){return z}getTilePixelSize(z,I,P){const j=this.getTileGridForProjection(P),Y=(0,C.xq)(j.getTileSize(z),this.tmpSize);return[Math.round(Y[0]*I),Math.round(Y[1]*I)]}updateCacheSize(z,I){super.updateCacheSize(2*z,I),this.sourceTileCache.highWaterMark=this.getTileCacheForProjection(I).highWaterMark}};function U(w,z){w.setLoader(function(I,P,j){(0,a.m8)(z,w.getFormat(),I,P,j,w.onLoad.bind(w),w.onError.bind(w))})}},8518:(ce,gt,c)=>{"use strict";c.d(gt,{A:()=>Z});var V=c(1992),K=c(6151);const Z=class $ extends V.A{constructor(b){const B=void 0!==(b=b||{}).projection?b.projection:"EPSG:3857",F=void 0!==b.tileGrid?b.tileGrid:(0,K.EN)({extent:(0,K.kZ)(B),maxResolution:b.maxResolution,maxZoom:b.maxZoom,minZoom:b.minZoom,tileSize:b.tileSize});super({attributions:b.attributions,cacheSize:b.cacheSize,crossOrigin:b.crossOrigin,interpolate:b.interpolate,opaque:b.opaque,projection:B,reprojectionErrorThreshold:b.reprojectionErrorThreshold,tileGrid:F,tileLoadFunction:b.tileLoadFunction,tilePixelRatio:b.tilePixelRatio,tileUrlFunction:b.tileUrlFunction,url:b.url,urls:b.urls,wrapX:void 0===b.wrapX||b.wrapX,transition:b.transition,attributionsCollapsible:b.attributionsCollapsible,zDirection:b.zDirection}),this.gutter_=void 0!==b.gutter?b.gutter:0}getGutter(){return this.gutter_}}},2344:(ce,gt,c)=>{"use strict";c.d(gt,{B:()=>K});const K=4},2212:(ce,gt,c)=>{"use strict";c.d(gt,{$q:()=>f,AE:()=>h,Eq:()=>u,W3:()=>r,jD:()=>E,y4:()=>o});var V=c(2344),K=c(4873),$=c(5454),Z=c(6490),L=c(9973),b=c(8507),B=c(9325),F=c(4579);const E="1.3.0",p=[101,101];function _(g,a,C,y,v){v.WIDTH=C[0],v.HEIGHT=C[1];const U=y.getAxisOrientation();let w;const z=(0,$.Z)(v.VERSION,"1.3")>=0;return v[z?"CRS":"SRS"]=y.getCode(),w=z&&"ne"==U.substr(0,2)?[a[1],a[0],a[3],a[2]]:a,v.BBOX=w.join(","),(0,K.L)(g,v)}function h(g,a,C,y,v,U,w){U=Object.assign({REQUEST:"GetMap"},U);const z=a/C,I=[(0,L.LI)((0,b.RG)(g)/z,V.B),(0,L.LI)((0,b.Oq)(g)/z,V.B)];if(1!=C)switch(w){case"geoserver":const j=90*C+.5|0;"FORMAT_OPTIONS"in U?U.FORMAT_OPTIONS+=";dpi:"+j:U.FORMAT_OPTIONS="dpi:"+j;break;case"mapserver":U.MAP_RESOLUTION=90*C;break;case"carmentaserver":case"qgis":U.DPI=90*C;break;default:throw new Error("Unknown `serverType` configured")}return _(v,g,I,y,U)}function r(g,a){return Object.assign({REQUEST:a,SERVICE:"WMS",VERSION:E,FORMAT:"image/png",STYLES:"",TRANSPARENT:!0},g)}function u(g){const a=void 0===g.hidpi||g.hidpi,C=(0,B.Jt)(g.projection||"EPSG:3857"),y=g.ratio||1.5,v=g.load||Z.D4;return(U,w,z)=>{U=(0,F.QD)(U,w,z,y),1!=z&&(!a||void 0===g.serverType)&&(z=1);const I=h(U,w,z,C,g.url,r(g.params,"GetMap"),g.serverType),P=new Image;return null!==g.crossOrigin&&(P.crossOrigin=g.crossOrigin),v(P,I).then(j=>({image:j,extent:U,pixelRatio:z}))}}function o(g,a,C){if(void 0===g.url)return;const y=(0,B.Jt)(g.projection||"EPSG:3857"),v=(0,b.Bg)(a,C,0,p),U={QUERY_LAYERS:g.params.LAYERS,INFO_FORMAT:"application/json"};Object.assign(U,r(g.params,"GetFeatureInfo"),g.params);const w=(0,L.RI)((a[0]-v[0])/C,V.B),z=(0,L.RI)((v[3]-a[1])/C,V.B),I=(0,$.Z)(U.VERSION,"1.3")>=0;return U[I?"I":"X"]=w,U[I?"J":"Y"]=z,_(g.url,v,p,y,U)}function f(g,a){if(void 0===g.url)return;const C={SERVICE:"WMS",VERSION:E,REQUEST:"GetLegendGraphic",FORMAT:"image/png"};if(void 0===g.params||void 0===g.params.LAYER){const y=g.params.LAYERS;if(Array.isArray(y)&&1!==y.length)return;C.LAYER=y}if(void 0!==a){const y=(0,B.Jt)(g.projection||"EPSG:3857").getMetersPerUnit()||1;C.SCALE=a*y/28e-5}return Object.assign(C,g.params),(0,K.L)(g.url,C)}},5454:(ce,gt,c)=>{"use strict";function V($,Z,L){const b=void 0!==L?$.toFixed(L):""+$;let B=b.indexOf(".");return B=-1===B?b.length:B,B>Z?b:new Array(1+Z-B).join("0")+b}function K($,Z){const L=(""+$).split("."),b=(""+Z).split(".");for(let B=0;B<Math.max(L.length,b.length);B++){const F=parseInt(L[B]||"0",10),E=parseInt(b[B]||"0",10);if(F>E)return 1;if(E>F)return-1}return 0}c.d(gt,{H:()=>V,Z:()=>K})},2529:(ce,gt,c)=>{"use strict";c.d(gt,{A:()=>$});var V=c(5940);const $=class K{constructor(L){this.highWaterMark=void 0!==L?L:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}canExpireCache(){return this.highWaterMark>0&&this.getCount()>this.highWaterMark}expireCache(L){for(;this.canExpireCache();)this.pop()}clear(){this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}containsKey(L){return this.entries_.hasOwnProperty(L)}forEach(L){let b=this.oldest_;for(;b;)L(b.value_,b.key_,this),b=b.newer}get(L,b){const B=this.entries_[L];return(0,V.v)(void 0!==B,"Tried to get a value for a key that does not exist in the cache"),B===this.newest_||(B===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(B.newer.older=B.older,B.older.newer=B.newer),B.newer=null,B.older=this.newest_,this.newest_.newer=B,this.newest_=B),B.value_}remove(L){const b=this.entries_[L];return(0,V.v)(void 0!==b,"Tried to get a value for a key that does not exist in the cache"),b===this.newest_?(this.newest_=b.older,this.newest_&&(this.newest_.newer=null)):b===this.oldest_?(this.oldest_=b.newer,this.oldest_&&(this.oldest_.older=null)):(b.newer.older=b.older,b.older.newer=b.newer),delete this.entries_[L],--this.count_,b.value_}getCount(){return this.count_}getKeys(){const L=new Array(this.count_);let B,b=0;for(B=this.newest_;B;B=B.older)L[b++]=B.key_;return L}getValues(){const L=new Array(this.count_);let B,b=0;for(B=this.newest_;B;B=B.older)L[b++]=B.value_;return L}peekLast(){return this.oldest_.value_}peekLastKey(){return this.oldest_.key_}peekFirstKey(){return this.newest_.key_}peek(L){return this.entries_[L]?.value_}pop(){const L=this.oldest_;return delete this.entries_[L.key_],L.newer&&(L.newer.older=null),this.oldest_=L.newer,this.oldest_||(this.newest_=null),--this.count_,L.value_}replace(L,b){this.get(L),this.entries_[L].value_=b}set(L,b){(0,V.v)(!(L in this.entries_),"Tried to set a value for a key that is used already");const B={key_:L,newer:null,older:this.newest_,value_:b};this.newest_?this.newest_.newer=B:this.oldest_=B,this.newest_=B,this.entries_[L]=B,++this.count_}setSize(L){this.highWaterMark=L}}},221:(ce,gt,c)=>{"use strict";c.d(gt,{A:()=>$});var V=c(4960);class K extends V.A{constructor(L){super({points:1/0,fill:(L=L||{radius:5}).fill,radius:L.radius,stroke:L.stroke,scale:void 0!==L.scale?L.scale:1,rotation:void 0!==L.rotation?L.rotation:0,rotateWithView:void 0!==L.rotateWithView&&L.rotateWithView,displacement:void 0!==L.displacement?L.displacement:[0,0],declutterMode:L.declutterMode})}clone(){const L=this.getScale(),b=new K({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),scale:Array.isArray(L)?L.slice():L,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return b.setOpacity(this.getOpacity()),b}setRadius(L){this.radius_=L,this.render()}}const $=K},1540:(ce,gt,c)=>{"use strict";c.d(gt,{A:()=>Z});var V=c(2661),K=c(4155);class ${constructor(b){b=b||{},this.patternImage_=null,this.color_=null,void 0!==b.color&&this.setColor(b.color)}clone(){const b=this.getColor();return new $({color:Array.isArray(b)?b.slice():b||void 0})}getColor(){return this.color_}setColor(b){if(null!==b&&"object"==typeof b&&"src"in b){const B=(0,K.J)(null,b.src,"anonymous",void 0,b.offset?null:b.color?b.color:null,!(b.offset&&b.size));B.ready().then(()=>{this.patternImage_=null}),B.getImageState()===V.A.IDLE&&B.load(),B.getImageState()===V.A.LOADING&&(this.patternImage_=B)}this.color_=b}loading(){return!!this.patternImage_}ready(){return this.patternImage_?this.patternImage_.ready():Promise.resolve()}}const Z=$},5804:(ce,gt,c)=>{"use strict";c.d(gt,{A:()=>p});var V=c(6621),K=c(2661),$=c(7316),Z=c(1962),L=c(5940),b=c(4155),B=c(2383);function F(_,h,r,u){return void 0!==r&&void 0!==u?[r/_,u/h]:void 0!==r?r/_:void 0!==u?u/h:1}class E extends $.A{constructor(h){super({opacity:void 0!==(h=h||{}).opacity?h.opacity:1,rotation:void 0!==h.rotation?h.rotation:0,scale:void 0!==h.scale?h.scale:1,displacement:void 0!==h.displacement?h.displacement:[0,0],rotateWithView:void 0!==h.rotateWithView&&h.rotateWithView,declutterMode:h.declutterMode}),this.anchor_=void 0!==h.anchor?h.anchor:[.5,.5],this.normalizedAnchor_=null,this.anchorOrigin_=void 0!==h.anchorOrigin?h.anchorOrigin:"top-left",this.anchorXUnits_=void 0!==h.anchorXUnits?h.anchorXUnits:"fraction",this.anchorYUnits_=void 0!==h.anchorYUnits?h.anchorYUnits:"fraction",this.crossOrigin_=void 0!==h.crossOrigin?h.crossOrigin:null;const g=void 0!==h.img?h.img:null;let C,a=h.src;if((0,L.v)(!(void 0!==a&&g),"`image` and `src` cannot be provided at the same time"),(void 0===a||0===a.length)&&g&&(a=g.src||(0,B.v6)(g)),(0,L.v)(void 0!==a&&a.length>0,"A defined and non-empty `src` or `image` must be provided"),(0,L.v)(!((void 0!==h.width||void 0!==h.height)&&void 0!==h.scale),"`width` or `height` cannot be provided together with `scale`"),void 0!==h.src?C=K.A.IDLE:void 0!==g&&(C="complete"in g?g.complete?g.src?K.A.LOADED:K.A.IDLE:K.A.LOADING:K.A.LOADED),this.color_=void 0!==h.color?(0,Z._j)(h.color):null,this.iconImage_=(0,b.J)(g,a,this.crossOrigin_,C,this.color_),this.offset_=void 0!==h.offset?h.offset:[0,0],this.offsetOrigin_=void 0!==h.offsetOrigin?h.offsetOrigin:"top-left",this.origin_=null,this.size_=void 0!==h.size?h.size:null,void 0!==h.width||void 0!==h.height){let y,v;if(h.size)[y,v]=h.size;else{const U=this.getImage(1);if(U.width&&U.height)y=U.width,v=U.height;else if(U instanceof HTMLImageElement){this.initialOptions_=h;const w=()=>{if(this.unlistenImageChange(w),!this.initialOptions_)return;const z=this.iconImage_.getSize();this.setScale(F(z[0],z[1],h.width,h.height))};return void this.listenImageChange(w)}}void 0!==y&&this.setScale(F(y,v,h.width,h.height))}}clone(){let h,r,u;return this.initialOptions_?(r=this.initialOptions_.width,u=this.initialOptions_.height):(h=this.getScale(),h=Array.isArray(h)?h.slice():h),new E({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,crossOrigin:this.crossOrigin_,offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,opacity:this.getOpacity(),rotateWithView:this.getRotateWithView(),rotation:this.getRotation(),scale:h,width:r,height:u,size:null!==this.size_?this.size_.slice():void 0,src:this.getSrc(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getAnchor(){let h=this.normalizedAnchor_;if(!h){h=this.anchor_;const o=this.getSize();if("fraction"==this.anchorXUnits_||"fraction"==this.anchorYUnits_){if(!o)return null;h=this.anchor_.slice(),"fraction"==this.anchorXUnits_&&(h[0]*=o[0]),"fraction"==this.anchorYUnits_&&(h[1]*=o[1])}if("top-left"!=this.anchorOrigin_){if(!o)return null;h===this.anchor_&&(h=this.anchor_.slice()),("top-right"==this.anchorOrigin_||"bottom-right"==this.anchorOrigin_)&&(h[0]=-h[0]+o[0]),("bottom-left"==this.anchorOrigin_||"bottom-right"==this.anchorOrigin_)&&(h[1]=-h[1]+o[1])}this.normalizedAnchor_=h}const r=this.getDisplacement(),u=this.getScaleArray();return[h[0]-r[0]/u[0],h[1]+r[1]/u[1]]}setAnchor(h){this.anchor_=h,this.normalizedAnchor_=null}getColor(){return this.color_}getImage(h){return this.iconImage_.getImage(h)}getPixelRatio(h){return this.iconImage_.getPixelRatio(h)}getImageSize(){return this.iconImage_.getSize()}getImageState(){return this.iconImage_.getImageState()}getHitDetectionImage(){return this.iconImage_.getHitDetectionImage()}getOrigin(){if(this.origin_)return this.origin_;let h=this.offset_;if("top-left"!=this.offsetOrigin_){const r=this.getSize(),u=this.iconImage_.getSize();if(!r||!u)return null;h=h.slice(),("top-right"==this.offsetOrigin_||"bottom-right"==this.offsetOrigin_)&&(h[0]=u[0]-r[0]-h[0]),("bottom-left"==this.offsetOrigin_||"bottom-right"==this.offsetOrigin_)&&(h[1]=u[1]-r[1]-h[1])}return this.origin_=h,this.origin_}getSrc(){return this.iconImage_.getSrc()}getSize(){return this.size_?this.size_:this.iconImage_.getSize()}getWidth(){const h=this.getScaleArray();return this.size_?this.size_[0]*h[0]:this.iconImage_.getImageState()==K.A.LOADED?this.iconImage_.getSize()[0]*h[0]:void 0}getHeight(){const h=this.getScaleArray();return this.size_?this.size_[1]*h[1]:this.iconImage_.getImageState()==K.A.LOADED?this.iconImage_.getSize()[1]*h[1]:void 0}setScale(h){delete this.initialOptions_,super.setScale(h)}listenImageChange(h){this.iconImage_.addEventListener(V.A.CHANGE,h)}load(){this.iconImage_.load()}unlistenImageChange(h){this.iconImage_.removeEventListener(V.A.CHANGE,h)}ready(){return this.iconImage_.ready()}}const p=E},4155:(ce,gt,c)=>{"use strict";c.d(gt,{J:()=>p});var V=c(1884),K=c(6621),$=c(2661),Z=c(1962),L=c(5551),b=c(6490),B=c(1705);let F=null;class E extends V.A{constructor(r,u,o,f,g){super(),this.hitDetectionImage_=null,this.image_=r,this.crossOrigin_=o,this.canvas_={},this.color_=g,this.imageState_=void 0===f?$.A.IDLE:f,this.size_=r&&r.width&&r.height?[r.width,r.height]:null,this.src_=u,this.ready_=null}initializeImage_(){this.image_=new Image,null!==this.crossOrigin_&&(this.image_.crossOrigin=this.crossOrigin_)}isTainted_(){if(void 0===this.tainted_&&this.imageState_===$.A.LOADED){F||(F=(0,L.Y)(1,1,void 0,{willReadFrequently:!0})),F.drawImage(this.image_,0,0);try{F.getImageData(0,0,1,1),this.tainted_=!1}catch{F=null,this.tainted_=!0}}return!0===this.tainted_}dispatchChangeEvent_(){this.dispatchEvent(K.A.CHANGE)}handleImageError_(){this.imageState_=$.A.ERROR,this.dispatchChangeEvent_()}handleImageLoad_(){this.imageState_=$.A.LOADED,this.size_=[this.image_.width,this.image_.height],this.dispatchChangeEvent_()}getImage(r){return this.image_||this.initializeImage_(),this.replaceColor_(r),this.canvas_[r]?this.canvas_[r]:this.image_}getPixelRatio(r){return this.replaceColor_(r),this.canvas_[r]?r:1}getImageState(){return this.imageState_}getHitDetectionImage(){if(this.image_||this.initializeImage_(),!this.hitDetectionImage_)if(this.isTainted_()){const r=this.size_[0],u=this.size_[1],o=(0,L.Y)(r,u);o.fillRect(0,0,r,u),this.hitDetectionImage_=o.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_}getSize(){return this.size_}getSrc(){return this.src_}load(){if(this.imageState_===$.A.IDLE){this.image_||this.initializeImage_(),this.imageState_=$.A.LOADING;try{void 0!==this.src_&&(this.image_.src=this.src_)}catch{this.handleImageError_()}this.image_ instanceof HTMLImageElement&&(0,b.RA)(this.image_,this.src_).then(r=>{this.image_=r,this.handleImageLoad_()}).catch(this.handleImageError_.bind(this))}}replaceColor_(r){if(!this.color_||this.canvas_[r]||this.imageState_!==$.A.LOADED)return;const u=this.image_,o=document.createElement("canvas");o.width=Math.ceil(u.width*r),o.height=Math.ceil(u.height*r);const f=o.getContext("2d");f.scale(r,r),f.drawImage(u,0,0),f.globalCompositeOperation="multiply",f.fillStyle=(0,Z.oJ)(this.color_),f.fillRect(0,0,o.width/r,o.height/r),f.globalCompositeOperation="destination-in",f.drawImage(u,0,0),this.canvas_[r]=o}ready(){return this.ready_||(this.ready_=new Promise(r=>{this.imageState_===$.A.LOADED||this.imageState_===$.A.ERROR?r():this.addEventListener(K.A.CHANGE,function u(){(this.imageState_===$.A.LOADED||this.imageState_===$.A.ERROR)&&(this.removeEventListener(K.A.CHANGE,u),r())})})),this.ready_}}function p(h,r,u,o,f,g){let a=void 0===r?void 0:B.ue.get(r,u,f);return a||(a=new E(h,h&&"src"in h?h.src||void 0:r,u,o,f),B.ue.set(r,u,f,a,g)),g&&a&&!B.ue.getPattern(r,u,f)&&B.ue.set(r,u,f,a,g),a}},1705:(ce,gt,c)=>{"use strict";c.d(gt,{ue:()=>B});var V=c(2661),K=c(1962),$=c(5551);function L(F,E,p){return E+":"+F+":"+(p?(0,K._j)(p):"null")}const B=new class Z{constructor(){this.cache_={},this.patternCache_={},this.cacheSize_=0,this.maxCacheSize_=32}clear(){this.cache_={},this.patternCache_={},this.cacheSize_=0}canExpireCache(){return this.cacheSize_>this.maxCacheSize_}expire(){if(this.canExpireCache()){let E=0;for(const p in this.cache_)!(3&E++)&&!this.cache_[p].hasListener()&&(delete this.cache_[p],delete this.patternCache_[p],--this.cacheSize_)}}get(E,p,_){const h=L(E,p,_);return h in this.cache_?this.cache_[h]:null}getPattern(E,p,_){const h=L(E,p,_);return h in this.patternCache_?this.patternCache_[h]:null}set(E,p,_,h,r){const u=L(E,p,_),o=u in this.cache_;this.cache_[u]=h,r&&(h.getImageState()===V.A.IDLE&&h.load(),h.getImageState()===V.A.LOADING?h.ready().then(()=>{this.patternCache_[u]=(0,$.lr)().createPattern(h.getImage(1),"repeat")}):this.patternCache_[u]=(0,$.lr)().createPattern(h.getImage(1),"repeat")),o||++this.cacheSize_}setSize(E){this.maxCacheSize_=E,this.expire()}}},7316:(ce,gt,c)=>{"use strict";c.d(gt,{A:()=>Z});var V=c(2383),K=c(9270);class ${constructor(b){this.opacity_=b.opacity,this.rotateWithView_=b.rotateWithView,this.rotation_=b.rotation,this.scale_=b.scale,this.scaleArray_=(0,K.xq)(b.scale),this.displacement_=b.displacement,this.declutterMode_=b.declutterMode}clone(){const b=this.getScale();return new $({opacity:this.getOpacity(),scale:Array.isArray(b)?b.slice():b,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getOpacity(){return this.opacity_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getDisplacement(){return this.displacement_}getDeclutterMode(){return this.declutterMode_}getAnchor(){return(0,V.b0)()}getImage(b){return(0,V.b0)()}getHitDetectionImage(){return(0,V.b0)()}getPixelRatio(b){return 1}getImageState(){return(0,V.b0)()}getImageSize(){return(0,V.b0)()}getOrigin(){return(0,V.b0)()}getSize(){return(0,V.b0)()}setDisplacement(b){this.displacement_=b}setOpacity(b){this.opacity_=b}setRotateWithView(b){this.rotateWithView_=b}setRotation(b){this.rotation_=b}setScale(b){this.scale_=b,this.scaleArray_=(0,K.xq)(b)}listenImageChange(b){(0,V.b0)()}load(){(0,V.b0)()}unlistenImageChange(b){(0,V.b0)()}ready(){return Promise.resolve()}}const Z=$},4960:(ce,gt,c)=>{"use strict";c.d(gt,{A:()=>F});var V=c(2661),K=c(7316),$=c(1962),Z=c(2775),L=c(5551),b=c(2462);class B extends K.A{constructor(p){super({opacity:1,rotateWithView:void 0!==p.rotateWithView&&p.rotateWithView,rotation:void 0!==p.rotation?p.rotation:0,scale:void 0!==p.scale?p.scale:1,displacement:void 0!==p.displacement?p.displacement:[0,0],declutterMode:p.declutterMode}),this.hitDetectionCanvas_=null,this.fill_=void 0!==p.fill?p.fill:null,this.origin_=[0,0],this.points_=p.points,this.radius_=p.radius,this.radius2_=p.radius2,this.angle_=void 0!==p.angle?p.angle:0,this.stroke_=void 0!==p.stroke?p.stroke:null,this.imageState_=this.fill_&&this.fill_.loading()?V.A.LOADING:V.A.LOADED,this.imageState_===V.A.LOADING&&this.ready().then(()=>this.imageState_=V.A.LOADED),this.render()}clone(){const p=this.getScale(),_=new B({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(p)?p.slice():p,displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return _.setOpacity(this.getOpacity()),_}getAnchor(){const p=this.size_,_=this.getDisplacement(),h=this.getScaleArray();return[p[0]/2-_[0]/h[0],p[1]/2+_[1]/h[1]]}getAngle(){return this.angle_}getFill(){return this.fill_}setFill(p){this.fill_=p,this.render()}getHitDetectionImage(){return this.hitDetectionCanvas_||(this.hitDetectionCanvas_=this.createHitDetectionCanvas_(this.renderOptions_)),this.hitDetectionCanvas_}getImage(p){let _=this.canvases_[p];if(!_){const h=this.renderOptions_,r=(0,L.Y)(h.size*p,h.size*p);this.draw_(h,r,p),_=r.canvas,this.canvases_[p]=_}return _}getPixelRatio(p){return p}getImageSize(){return this.size_}getImageState(){return this.imageState_}getOrigin(){return this.origin_}getPoints(){return this.points_}getRadius(){return this.radius_}getRadius2(){return this.radius2_}getSize(){return this.size_}getStroke(){return this.stroke_}setStroke(p){this.stroke_=p,this.render()}listenImageChange(p){}load(){}unlistenImageChange(p){}calculateLineJoinSize_(p,_,h){if(0===_||this.points_===1/0||"bevel"!==p&&"miter"!==p)return _;let r=this.radius_,u=void 0===this.radius2_?r:this.radius2_;if(r<u){const R=r;r=u,u=R}const f=2*Math.PI/(void 0===this.radius2_?this.points_:2*this.points_),g=u*Math.sin(f),C=r-Math.sqrt(u*u-g*g),y=Math.sqrt(g*g+C*C),v=y/g;if("miter"===p&&v<=h)return v*_;const U=_/2/v,w=_/2*(C/y),I=Math.sqrt((r+U)*(r+U)+w*w)-r;if(void 0===this.radius2_||"bevel"===p)return 2*I;const P=r*Math.sin(f),Y=u-Math.sqrt(r*r-P*P),O=Math.sqrt(P*P+Y*Y)/P;return O<=h?2*Math.max(I,O*_/2-u-r):2*I}createRenderOptions(){let o,p=b._m,_=b._K,h=0,r=null,u=0,f=0;this.stroke_&&(o=(0,Z.F)(this.stroke_.getColor()??b.NT),f=this.stroke_.getWidth()??b.aq,r=this.stroke_.getLineDash(),u=this.stroke_.getLineDashOffset()??0,_=this.stroke_.getLineJoin()??b._K,p=this.stroke_.getLineCap()??b._m,h=this.stroke_.getMiterLimit()??b.eL);const g=this.calculateLineJoinSize_(_,f,h),a=Math.max(this.radius_,this.radius2_||0);return{strokeStyle:o,strokeWidth:f,size:Math.ceil(2*a+g),lineCap:p,lineDash:r,lineDashOffset:u,lineJoin:_,miterLimit:h}}render(){this.renderOptions_=this.createRenderOptions();const p=this.renderOptions_.size;this.canvases_={},this.hitDetectionCanvas_=null,this.size_=[p,p]}draw_(p,_,h){if(_.scale(h,h),_.translate(p.size/2,p.size/2),this.createPath_(_),this.fill_){let r=this.fill_.getColor();null===r&&(r=b.qY),_.fillStyle=(0,Z.F)(r),_.fill()}p.strokeStyle&&(_.strokeStyle=p.strokeStyle,_.lineWidth=p.strokeWidth,p.lineDash&&(_.setLineDash(p.lineDash),_.lineDashOffset=p.lineDashOffset),_.lineCap=p.lineCap,_.lineJoin=p.lineJoin,_.miterLimit=p.miterLimit,_.stroke())}createHitDetectionCanvas_(p){let _;if(this.fill_){let h=this.fill_.getColor(),r=0;"string"==typeof h&&(h=(0,$._j)(h)),null===h?r=1:Array.isArray(h)&&(r=4===h.length?h[3]:1),0===r&&(_=(0,L.Y)(p.size,p.size),this.drawHitDetectionCanvas_(p,_))}return _?_.canvas:this.getImage(1)}createPath_(p){let _=this.points_;const h=this.radius_;if(_===1/0)p.arc(0,0,h,0,2*Math.PI);else{const r=void 0===this.radius2_?h:this.radius2_;void 0!==this.radius2_&&(_*=2);const u=this.angle_-Math.PI/2,o=2*Math.PI/_;for(let f=0;f<_;f++){const g=u+f*o,a=f%2==0?h:r;p.lineTo(a*Math.cos(g),a*Math.sin(g))}p.closePath()}}drawHitDetectionCanvas_(p,_){_.translate(p.size/2,p.size/2),this.createPath_(_),_.fillStyle=b.qY,_.fill(),p.strokeStyle&&(_.strokeStyle=p.strokeStyle,_.lineWidth=p.strokeWidth,p.lineDash&&(_.setLineDash(p.lineDash),_.lineDashOffset=p.lineDashOffset),_.lineJoin=p.lineJoin,_.miterLimit=p.miterLimit,_.stroke())}ready(){return this.fill_?this.fill_.ready():Promise.resolve()}}const F=B},5409:(ce,gt,c)=>{"use strict";c.d(gt,{A:()=>K});class V{constructor(Z){this.color_=void 0!==(Z=Z||{}).color?Z.color:null,this.lineCap_=Z.lineCap,this.lineDash_=void 0!==Z.lineDash?Z.lineDash:null,this.lineDashOffset_=Z.lineDashOffset,this.lineJoin_=Z.lineJoin,this.miterLimit_=Z.miterLimit,this.width_=Z.width}clone(){const Z=this.getColor();return new V({color:Array.isArray(Z)?Z.slice():Z||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})}getColor(){return this.color_}getLineCap(){return this.lineCap_}getLineDash(){return this.lineDash_}getLineDashOffset(){return this.lineDashOffset_}getLineJoin(){return this.lineJoin_}getMiterLimit(){return this.miterLimit_}getWidth(){return this.width_}setColor(Z){this.color_=Z}setLineCap(Z){this.lineCap_=Z}setLineDash(Z){this.lineDash_=Z}setLineDashOffset(Z){this.lineDashOffset_=Z}setLineJoin(Z){this.lineJoin_=Z}setMiterLimit(Z){this.miterLimit_=Z}setWidth(Z){this.width_=Z}}const K=V},9380:(ce,gt,c)=>{"use strict";c.d(gt,{Ay:()=>_,d1:()=>F,mC:()=>b});var V=c(221),K=c(1540),$=c(5409),Z=c(5940);class L{constructor(r){r=r||{},this.geometry_=null,this.geometryFunction_=p,void 0!==r.geometry&&this.setGeometry(r.geometry),this.fill_=void 0!==r.fill?r.fill:null,this.image_=void 0!==r.image?r.image:null,this.renderer_=void 0!==r.renderer?r.renderer:null,this.hitDetectionRenderer_=void 0!==r.hitDetectionRenderer?r.hitDetectionRenderer:null,this.stroke_=void 0!==r.stroke?r.stroke:null,this.text_=void 0!==r.text?r.text:null,this.zIndex_=r.zIndex}clone(){let r=this.getGeometry();return r&&"object"==typeof r&&(r=r.clone()),new L({geometry:r??void 0,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,renderer:this.getRenderer()??void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})}getRenderer(){return this.renderer_}setRenderer(r){this.renderer_=r}setHitDetectionRenderer(r){this.hitDetectionRenderer_=r}getHitDetectionRenderer(){return this.hitDetectionRenderer_}getGeometry(){return this.geometry_}getGeometryFunction(){return this.geometryFunction_}getFill(){return this.fill_}setFill(r){this.fill_=r}getImage(){return this.image_}setImage(r){this.image_=r}getStroke(){return this.stroke_}setStroke(r){this.stroke_=r}getText(){return this.text_}setText(r){this.text_=r}getZIndex(){return this.zIndex_}setGeometry(r){"function"==typeof r?this.geometryFunction_=r:"string"==typeof r?this.geometryFunction_=function(u){return u.get(r)}:r?void 0!==r&&(this.geometryFunction_=function(){return r}):this.geometryFunction_=p,this.geometry_=r}setZIndex(r){this.zIndex_=r}}function b(h){let r;if("function"==typeof h)r=h;else{let u;Array.isArray(h)?u=h:((0,Z.v)("function"==typeof h.getZIndex,"Expected an `Style` or an array of `Style`"),u=[h]),r=function(){return u}}return r}let B=null;function F(h,r){if(!B){const u=new K.A({color:"rgba(255,255,255,0.4)"}),o=new $.A({color:"#3399CC",width:1.25});B=[new L({image:new V.A({fill:u,stroke:o,radius:5}),fill:u,stroke:o})]}return B}function p(h){return h.getGeometry()}const _=L},730:(ce,gt,c)=>{"use strict";c.d(gt,{A:()=>L});var V=c(1540),K=c(9270);class Z{constructor(B){this.font_=(B=B||{}).font,this.rotation_=B.rotation,this.rotateWithView_=B.rotateWithView,this.scale_=B.scale,this.scaleArray_=(0,K.xq)(void 0!==B.scale?B.scale:1),this.text_=B.text,this.textAlign_=B.textAlign,this.justify_=B.justify,this.repeat_=B.repeat,this.textBaseline_=B.textBaseline,this.fill_=void 0!==B.fill?B.fill:new V.A({color:"#333"}),this.maxAngle_=void 0!==B.maxAngle?B.maxAngle:Math.PI/4,this.placement_=void 0!==B.placement?B.placement:"point",this.overflow_=!!B.overflow,this.stroke_=void 0!==B.stroke?B.stroke:null,this.offsetX_=void 0!==B.offsetX?B.offsetX:0,this.offsetY_=void 0!==B.offsetY?B.offsetY:0,this.backgroundFill_=B.backgroundFill?B.backgroundFill:null,this.backgroundStroke_=B.backgroundStroke?B.backgroundStroke:null,this.padding_=void 0===B.padding?null:B.padding,this.declutterMode_=B.declutterMode}clone(){const B=this.getScale();return new Z({font:this.getFont(),placement:this.getPlacement(),repeat:this.getRepeat(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(B)?B.slice():B,text:this.getText(),textAlign:this.getTextAlign(),justify:this.getJustify(),textBaseline:this.getTextBaseline(),fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():void 0,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0,padding:this.getPadding()||void 0,declutterMode:this.getDeclutterMode()})}getOverflow(){return this.overflow_}getFont(){return this.font_}getMaxAngle(){return this.maxAngle_}getPlacement(){return this.placement_}getRepeat(){return this.repeat_}getOffsetX(){return this.offsetX_}getOffsetY(){return this.offsetY_}getFill(){return this.fill_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getStroke(){return this.stroke_}getText(){return this.text_}getTextAlign(){return this.textAlign_}getJustify(){return this.justify_}getTextBaseline(){return this.textBaseline_}getBackgroundFill(){return this.backgroundFill_}getBackgroundStroke(){return this.backgroundStroke_}getPadding(){return this.padding_}getDeclutterMode(){return this.declutterMode_}setOverflow(B){this.overflow_=B}setFont(B){this.font_=B}setMaxAngle(B){this.maxAngle_=B}setOffsetX(B){this.offsetX_=B}setOffsetY(B){this.offsetY_=B}setPlacement(B){this.placement_=B}setRepeat(B){this.repeat_=B}setRotateWithView(B){this.rotateWithView_=B}setFill(B){this.fill_=B}setRotation(B){this.rotation_=B}setScale(B){this.scale_=B,this.scaleArray_=(0,K.xq)(void 0!==B?B:1)}setStroke(B){this.stroke_=B}setText(B){this.text_=B}setTextAlign(B){this.textAlign_=B}setJustify(B){this.justify_=B}setTextBaseline(B){this.textBaseline_=B}setBackgroundFill(B){this.backgroundFill_=B}setBackgroundStroke(B){this.backgroundStroke_=B}setPadding(B){this.padding_=B}}const L=Z},6690:(ce,gt,c)=>{"use strict";function V(F,E,p,_){return void 0!==_?(_[0]=F,_[1]=E,_[2]=p,_):[F,E,p]}function K(F,E,p){return F+"/"+E+"/"+p}function $(F){return K(F[0],F[1],F[2])}function Z(F){const[E,p,_]=F.substring(F.lastIndexOf("/")+1,F.length).split(",").map(Number);return K(E,p,_)}function L(F){return F.split("/").map(Number)}function b(F){return(F[1]<<F[0])+F[2]}function B(F,E){const p=F[0],_=F[1],h=F[2];if(E.getMinZoom()>p||p>E.getMaxZoom())return!1;const r=E.getFullTileRange(p);return!r||r.containsXY(_,h)}c.d(gt,{K:()=>L,N:()=>V,N5:()=>B,dp:()=>K,gr:()=>Z,i7:()=>$,tW:()=>b})},6151:(ce,gt,c)=>{"use strict";c.d(gt,{EN:()=>E,Li:()=>B,kZ:()=>h,pr:()=>b});var V=c(5534),K=c(3139),$=c(9325),Z=c(8507),L=c(9270);function b(r){let u=r.getDefaultTileGrid();return u||(u=function _(r,u,o,f){return function F(r,u,o,f){f=void 0!==f?f:"top-left";const g=p(r,u,o);return new V.A({extent:r,origin:(0,Z.qF)(r,f),resolutions:g,tileSize:o})}(h(r),u,o,f)}(r),r.setDefaultTileGrid(u)),u}function B(r,u,o){const f=u[0],g=r.getTileCoordCenter(u),a=h(o);if(!(0,Z.Ym)(a,g)){const C=(0,Z.RG)(a),y=Math.ceil((a[0]-g[0])/C);return g[0]+=C*y,r.getTileCoordForCoordAndZ(g,f)}return u}function E(r){const u=r||{},o=u.extent||(0,$.Jt)("EPSG:3857").getExtent(),f={extent:o,minZoom:u.minZoom,tileSize:u.tileSize,resolutions:p(o,u.maxZoom,u.tileSize,u.maxResolution)};return new V.A(f)}function p(r,u,o,f){u=void 0!==u?u:K.L,o=(0,L.xq)(void 0!==o?o:K.R);const g=(0,Z.Oq)(r),a=(0,Z.RG)(r);f=f>0?f:Math.max(a/o[0],g/o[1]);const C=u+1,y=new Array(C);for(let v=0;v<C;++v)y[v]=f/Math.pow(2,v);return y}function h(r){let u=(r=(0,$.Jt)(r)).getExtent();if(!u){const o=180*$.Ig.degrees/r.getMetersPerUnit();u=(0,Z.N)(-o,-o,o,o)}return u}},5534:(ce,gt,c)=>{"use strict";c.d(gt,{A:()=>r});var V=c(6990),K=c(3139),$=c(5940),Z=c(9973),L=c(8507),b=c(6690),B=c(9542),F=c(2058),E=c(9270);const p=[0,0,0],r=class h{constructor(o){let f;if(this.minZoom=void 0!==o.minZoom?o.minZoom:0,this.resolutions_=o.resolutions,(0,$.v)((0,F.WC)(this.resolutions_,(a,C)=>C-a,!0),"`resolutions` must be sorted in descending order"),!o.origins)for(let a=0,C=this.resolutions_.length-1;a<C;++a)if(f){if(this.resolutions_[a]/this.resolutions_[a+1]!==f){f=void 0;break}}else f=this.resolutions_[a]/this.resolutions_[a+1];this.zoomFactor_=f,this.maxZoom=this.resolutions_.length-1,this.origin_=void 0!==o.origin?o.origin:null,this.origins_=null,void 0!==o.origins&&(this.origins_=o.origins,(0,$.v)(this.origins_.length==this.resolutions_.length,"Number of `origins` and `resolutions` must be equal"));const g=o.extent;void 0!==g&&!this.origin_&&!this.origins_&&(this.origin_=(0,L.Py)(g)),(0,$.v)(!this.origin_&&this.origins_||this.origin_&&!this.origins_,"Either `origin` or `origins` must be configured, never both"),this.tileSizes_=null,void 0!==o.tileSizes&&(this.tileSizes_=o.tileSizes,(0,$.v)(this.tileSizes_.length==this.resolutions_.length,"Number of `tileSizes` and `resolutions` must be equal")),this.tileSize_=void 0!==o.tileSize?o.tileSize:this.tileSizes_?null:K.R,(0,$.v)(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,"Either `tileSize` or `tileSizes` must be configured, never both"),this.extent_=void 0!==g?g:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],this.tmpExtent_=[0,0,0,0],void 0!==o.sizes?this.fullTileRanges_=o.sizes.map((a,C)=>{const y=new V.A(Math.min(0,a[0]),Math.max(a[0]-1,-1),Math.min(0,a[1]),Math.max(a[1]-1,-1));if(g){const v=this.getTileRangeForExtentAndZ(g,C);y.minX=Math.max(v.minX,y.minX),y.maxX=Math.min(v.maxX,y.maxX),y.minY=Math.max(v.minY,y.minY),y.maxY=Math.min(v.maxY,y.maxY)}return y}):g&&this.calculateTileRanges_(g)}forEachTileCoord(o,f,g){const a=this.getTileRangeForExtentAndZ(o,f);for(let C=a.minX,y=a.maxX;C<=y;++C)for(let v=a.minY,U=a.maxY;v<=U;++v)g([f,C,v])}forEachTileCoordParentTileRange(o,f,g,a){let C,y,v,U=null,w=o[0]-1;for(2===this.zoomFactor_?(y=o[1],v=o[2]):U=this.getTileCoordExtent(o,a);w>=this.minZoom;){if(void 0!==y&&void 0!==v?(y=Math.floor(y/2),v=Math.floor(v/2),C=(0,V.N)(y,y,v,v,g)):C=this.getTileRangeForExtentAndZ(U,w,g),f(w,C))return!0;--w}return!1}getExtent(){return this.extent_}getMaxZoom(){return this.maxZoom}getMinZoom(){return this.minZoom}getOrigin(o){return this.origin_?this.origin_:this.origins_[o]}getResolution(o){return this.resolutions_[o]}getResolutions(){return this.resolutions_}getTileCoordChildTileRange(o,f,g){if(o[0]<this.maxZoom){if(2===this.zoomFactor_){const C=2*o[1],y=2*o[2];return(0,V.N)(C,C+1,y,y+1,f)}const a=this.getTileCoordExtent(o,g||this.tmpExtent_);return this.getTileRangeForExtentAndZ(a,o[0]+1,f)}return null}getTileRangeForTileCoordAndZ(o,f,g){if(f>this.maxZoom||f<this.minZoom)return null;const a=o[0],C=o[1],y=o[2];if(f===a)return(0,V.N)(C,y,C,y,g);if(this.zoomFactor_){const U=Math.pow(this.zoomFactor_,f-a),w=Math.floor(C*U),z=Math.floor(y*U);if(f<a)return(0,V.N)(w,w,z,z,g);const I=Math.floor(U*(C+1))-1,P=Math.floor(U*(y+1))-1;return(0,V.N)(w,I,z,P,g)}const v=this.getTileCoordExtent(o,this.tmpExtent_);return this.getTileRangeForExtentAndZ(v,f,g)}getTileRangeForExtentAndZ(o,f,g){this.getTileCoordForXYAndZ_(o[0],o[3],f,!1,p);const a=p[1],C=p[2];return this.getTileCoordForXYAndZ_(o[2],o[1],f,!0,p),(0,V.N)(a,p[1],C,p[2],g)}getTileCoordCenter(o){const f=this.getOrigin(o[0]),g=this.getResolution(o[0]),a=(0,E.xq)(this.getTileSize(o[0]),this.tmpSize_);return[f[0]+(o[1]+.5)*a[0]*g,f[1]-(o[2]+.5)*a[1]*g]}getTileCoordExtent(o,f){const g=this.getOrigin(o[0]),a=this.getResolution(o[0]),C=(0,E.xq)(this.getTileSize(o[0]),this.tmpSize_),y=g[0]+o[1]*C[0]*a,v=g[1]-(o[2]+1)*C[1]*a;return(0,L.N)(y,v,y+C[0]*a,v+C[1]*a,f)}getTileCoordForCoordAndResolution(o,f,g){return this.getTileCoordForXYAndResolution_(o[0],o[1],f,!1,g)}getTileCoordForXYAndResolution_(o,f,g,a,C){const y=this.getZForResolution(g),v=g/this.getResolution(y),U=this.getOrigin(y),w=(0,E.xq)(this.getTileSize(y),this.tmpSize_);let z=v*(o-U[0])/g/w[0],I=v*(U[1]-f)/g/w[1];return a?(z=(0,Z.mk)(z,5)-1,I=(0,Z.mk)(I,5)-1):(z=(0,Z.RI)(z,5),I=(0,Z.RI)(I,5)),(0,b.N)(y,z,I,C)}getTileCoordForXYAndZ_(o,f,g,a,C){const y=this.getOrigin(g),v=this.getResolution(g),U=(0,E.xq)(this.getTileSize(g),this.tmpSize_);let w=(o-y[0])/v/U[0],z=(y[1]-f)/v/U[1];return a?(w=(0,Z.mk)(w,5)-1,z=(0,Z.mk)(z,5)-1):(w=(0,Z.RI)(w,5),z=(0,Z.RI)(z,5)),(0,b.N)(g,w,z,C)}getTileCoordForCoordAndZ(o,f,g){return this.getTileCoordForXYAndZ_(o[0],o[1],f,!1,g)}getTileCoordResolution(o){return this.resolutions_[o[0]]}getTileSize(o){return this.tileSize_?this.tileSize_:this.tileSizes_[o]}getFullTileRange(o){return this.fullTileRanges_?this.fullTileRanges_[o]:this.extent_?this.getTileRangeForExtentAndZ(this.extent_,o):null}getZForResolution(o,f){const g=(0,F.FT)(this.resolutions_,o,f||0);return(0,Z.qE)(g,this.minZoom,this.maxZoom)}tileCoordIntersectsViewport(o,f){return(0,B.sj)(f,0,f.length,2,this.getTileCoordExtent(o))}calculateTileRanges_(o){const f=this.resolutions_.length,g=new Array(f);for(let a=this.minZoom;a<f;++a)g[a]=this.getTileRangeForExtentAndZ(o,a);this.fullTileRanges_=g}}},3139:(ce,gt,c)=>{"use strict";c.d(gt,{L:()=>V,R:()=>K});const V=42,K=256},454:(ce,gt,c)=>{"use strict";c.d(gt,{FD:()=>L,Qz:()=>Z,Uu:()=>B});var V=c(9973),K=c(6690);function $(F,E){const p=/\{z\}/g,_=/\{x\}/g,h=/\{y\}/g,r=/\{-y\}/g;return function(u,o,f){if(u)return F.replace(p,u[0].toString()).replace(_,u[1].toString()).replace(h,u[2].toString()).replace(r,function(){const a=E.getFullTileRange(u[0]);if(!a)throw new Error("The {-y} placeholder requires a tile grid with extent");return(a.getHeight()-u[2]-1).toString()})}}function Z(F,E){const p=F.length,_=new Array(p);for(let h=0;h<p;++h)_[h]=$(F[h],E);return L(_)}function L(F){return 1===F.length?F[0]:function(E,p,_){if(!E)return;const h=(0,K.tW)(E),r=(0,V.xP)(h,F.length);return F[r](E,p,_)}}function B(F){const E=[];let p=/\{([a-z])-([a-z])\}/.exec(F);if(p){const _=p[1].charCodeAt(0),h=p[2].charCodeAt(0);let r;for(r=_;r<=h;++r)E.push(F.replace(p[0],String.fromCharCode(r)));return E}if(p=/\{(\d+)-(\d+)\}/.exec(F),p){const _=parseInt(p[2],10);for(let h=parseInt(p[1],10);h<=_;h++)E.push(F.replace(p[0],h.toString()));return E}return E.push(F),E}},1983:(ce,gt,c)=>{"use strict";c.d(gt,{Bb:()=>F,T9:()=>f,Tl:()=>h,Zz:()=>r,cL:()=>Z,dI:()=>C,e$:()=>E,hs:()=>p,k3:()=>B,lw:()=>L,vt:()=>$});var V=c(5940);const K=new Array(6);function $(){return[1,0,0,1,0,0]}function Z(y){return b(y,1,0,0,1,0,0)}function L(y,v){const U=y[0],w=y[1],z=y[2],I=y[3],P=y[4],j=y[5],Y=v[0],T=v[1],O=v[2],R=v[3],A=v[4],M=v[5];return y[0]=U*Y+z*T,y[1]=w*Y+I*T,y[2]=U*O+z*R,y[3]=w*O+I*R,y[4]=U*A+z*M+P,y[5]=w*A+I*M+j,y}function b(y,v,U,w,z,I,P){return y[0]=v,y[1]=U,y[2]=w,y[3]=z,y[4]=I,y[5]=P,y}function B(y,v){return y[0]=v[0],y[1]=v[1],y[2]=v[2],y[3]=v[3],y[4]=v[4],y[5]=v[5],y}function F(y,v){const U=v[0],w=v[1];return v[0]=y[0]*U+y[2]*w+y[4],v[1]=y[1]*U+y[3]*w+y[5],v}function E(y,v){const U=Math.cos(v),w=Math.sin(v);return L(y,b(K,U,w,-w,U,0,0))}function p(y,v,U){return L(y,b(K,v,0,0,U,0,0))}function h(y,v,U){return L(y,b(K,1,0,0,1,v,U))}function r(y,v,U,w,z,I,P,j){const Y=Math.sin(I),T=Math.cos(I);return y[0]=w*T,y[1]=z*Y,y[2]=-w*Y,y[3]=z*T,y[4]=P*w*T-j*w*Y+v,y[5]=P*z*Y+j*z*T+U,y}function f(y,v){const U=function g(y){return y[0]*y[3]-y[1]*y[2]}(v);(0,V.v)(0!==U,"Transformation matrix cannot be inverted");const w=v[0],z=v[1],I=v[2],P=v[3],j=v[4],Y=v[5];return y[0]=P/U,y[1]=-z/U,y[2]=-I/U,y[3]=w/U,y[4]=(I*Y-P*j)/U,y[5]=-(w*Y-z*j)/U,y}const a=[1e6,1e6,1e6,1e6,2,2];function C(y){return"matrix("+y.map((U,w)=>Math.round(U*a[w])/a[w]).join(", ")+")"}},4873:(ce,gt,c)=>{"use strict";function V(K,$){const Z=[];Object.keys($).forEach(function(b){null!=$[b]&&Z.push(b+"="+encodeURIComponent($[b]))});const L=Z.join("&");return K=K.replace(/[?&]$/,""),(K+=K.includes("?")?"&":"?")+L}c.d(gt,{L:()=>V})},2383:(ce,gt,c)=>{"use strict";function V(){throw new Error("Unimplemented abstract method.")}c.d(gt,{b0:()=>V,v6:()=>$});let K=0;function $(L){return L.ol_uid||(L.ol_uid=String(++K))}},3566:(ce,gt,c)=>{"use strict";c.d(gt,{Dm:()=>C,Gl:()=>a,NQ:()=>w,OL:()=>g,Tb:()=>_,UN:()=>y,VT:()=>p,Vh:()=>E,X1:()=>f,YE:()=>T,c4:()=>h,eY:()=>v,kW:()=>r,mT:()=>Z,mc:()=>P,mm:()=>u,pF:()=>K,qg:()=>F,qq:()=>$,wz:()=>b});var V=c(2058);const K="http://www.w3.org/2001/XMLSchema-instance";function $(O,R){return T().createElementNS(O,R)}function Z(O,R){return L(O,R,[]).join("")}function L(O,R,A){if(O.nodeType==Node.CDATA_SECTION_NODE||O.nodeType==Node.TEXT_NODE)A.push(R?String(O.nodeValue).replace(/(\r\n|\r|\n)/g,""):O.nodeValue);else{let M;for(M=O.firstChild;M;M=M.nextSibling)L(M,R,A)}return A}function b(O){return"documentElement"in O}function F(O){return(new DOMParser).parseFromString(O,"application/xml")}function E(O,R){return function(A,M){const D=O.call(void 0!==R?R:this,A,M);void 0!==D&&(0,V.X$)(M[M.length-1],D)}}function p(O,R){return function(A,M){const D=O.call(void 0!==R?R:this,A,M);void 0!==D&&M[M.length-1].push(D)}}function _(O,R){return function(A,M){const D=O.call(void 0!==R?R:this,A,M);void 0!==D&&(M[M.length-1]=D)}}function h(O,R,A){return function(M,D){const H=O.call(void 0!==A?A:this,M,D);if(void 0!==H){const it=D[D.length-1],lt=void 0!==R?R:M.localName;let xt;lt in it?xt=it[lt]:(xt=[],it[lt]=xt),xt.push(H)}}}function r(O,R,A){return function(M,D){const H=O.call(void 0!==A?A:this,M,D);void 0!==H&&(D[D.length-1][void 0!==R?R:M.localName]=H)}}function u(O,R){return function(A,M,D){O.call(void 0!==R?R:this,A,M,D),D[D.length-1].node.appendChild(A)}}function f(O,R){return function(A,M,D){let lt=O;return void 0===lt&&(lt=D),$(void 0!==R?R:M[M.length-1].node.namespaceURI,lt)}}const g=f();function a(O,R){const A=R.length,M=new Array(A);for(let D=0;D<A;++D)M[D]=O[R[D]];return M}function C(O,R,A){let M,D;for(A=void 0!==A?A:{},M=0,D=O.length;M<D;++M)A[O[M]]=R;return A}function y(O,R,A,M){let D;for(D=R.firstElementChild;D;D=D.nextElementSibling){const H=O[D.namespaceURI];if(void 0!==H){const it=H[D.localName];void 0!==it&&it.call(M,D,A)}}}function v(O,R,A,M,D){return M.push(O),y(R,A,M,D),M.pop()}function w(O,R,A,M,D,H,it){return D.push(O),function U(O,R,A,M,D,H){const it=(void 0!==D?D:A).length;let lt,xt;for(let At=0;At<it;++At)lt=A[At],void 0!==lt&&(xt=R.call(void 0!==H?H:this,lt,M,void 0!==D?D[At]:void 0),void 0!==xt&&O[xt.namespaceURI][xt.localName].call(H,xt,lt,M))}(R,A,M,D,H,it),D.pop()}let z,j;function P(){return void 0===z&&typeof XMLSerializer<"u"&&(z=new XMLSerializer),z}function T(){return void 0===j&&typeof document<"u"&&(j=document.implementation.createDocument("","",null)),j}}}]);