(self.webpackChunkdemo_maps=self.webpackChunkdemo_maps||[]).push([[899],{2658:(Bt,ot)=>{ot.read=function(a,G,D,k,z){var U,I,S=8*z-k-1,P=(1<<S)-1,p=P>>1,d=-7,u=D?z-1:0,c=D?-1:1,s=a[G+u];for(u+=c,U=s&(1<<-d)-1,s>>=-d,d+=S;d>0;U=256*U+a[G+u],u+=c,d-=8);for(I=U&(1<<-d)-1,U>>=-d,d+=k;d>0;I=256*I+a[G+u],u+=c,d-=8);if(0===U)U=1-p;else{if(U===P)return I?NaN:1/0*(s?-1:1);I+=Math.pow(2,k),U-=p}return(s?-1:1)*I*Math.pow(2,U-k)},ot.write=function(a,G,D,k,z,U){var I,S,P,p=8*U-z-1,d=(1<<p)-1,u=d>>1,c=23===z?Math.pow(2,-24)-Math.pow(2,-77):0,s=k?0:U-1,f=k?1:-1,n=G<0||0===G&&1/G<0?1:0;for(G=Math.abs(G),isNaN(G)||G===1/0?(S=isNaN(G)?1:0,I=d):(I=Math.floor(Math.log(G)/Math.LN2),G*(P=Math.pow(2,-I))<1&&(I--,P*=2),(G+=I+u>=1?c/P:c*Math.pow(2,1-u))*P>=2&&(I++,P/=2),I+u>=d?(S=0,I=d):I+u>=1?(S=(G*P-1)*Math.pow(2,z),I+=u):(S=G*Math.pow(2,u-1)*Math.pow(2,z),I=0));z>=8;a[D+s]=255&S,s+=f,S/=256,z-=8);for(I=I<<z|S,p+=z;p>0;a[D+s]=255&I,s+=f,I/=256,p-=8);a[D+s-f]|=128*n}},6697:(Bt,ot,a)=>{"use strict";Bt.exports=D;var G=a(2658);function D(A){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(A)?A:new Uint8Array(A||0),this.pos=0,this.type=0,this.length=this.buf.length}D.Varint=0,D.Fixed64=1,D.Bytes=2,D.Fixed32=5;var k=4294967296,z=1/k,I=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function P(A){return A.type===D.Bytes?A.readVarint()+A.pos:A.pos+1}function s(A,L,b){var M=L<=16383?1:L<=2097151?2:L<=268435455?3:Math.floor(Math.log(L)/(7*Math.LN2));b.realloc(M);for(var C=b.pos-1;C>=A;C--)b.buf[C+M]=b.buf[C]}function f(A,L){for(var b=0;b<A.length;b++)L.writeVarint(A[b])}function n(A,L){for(var b=0;b<A.length;b++)L.writeSVarint(A[b])}function h(A,L){for(var b=0;b<A.length;b++)L.writeFloat(A[b])}function g(A,L){for(var b=0;b<A.length;b++)L.writeDouble(A[b])}function e(A,L){for(var b=0;b<A.length;b++)L.writeBoolean(A[b])}function E(A,L){for(var b=0;b<A.length;b++)L.writeFixed32(A[b])}function v(A,L){for(var b=0;b<A.length;b++)L.writeSFixed32(A[b])}function x(A,L){for(var b=0;b<A.length;b++)L.writeFixed64(A[b])}function w(A,L){for(var b=0;b<A.length;b++)L.writeSFixed64(A[b])}function O(A,L){return(A[L]|A[L+1]<<8|A[L+2]<<16)+16777216*A[L+3]}function y(A,L,b){A[b]=L,A[b+1]=L>>>8,A[b+2]=L>>>16,A[b+3]=L>>>24}function R(A,L){return(A[L]|A[L+1]<<8|A[L+2]<<16)+(A[L+3]<<24)}D.prototype={destroy:function(){this.buf=null},readFields:function(A,L,b){for(b=b||this.length;this.pos<b;){var M=this.readVarint(),C=M>>3,N=this.pos;this.type=7&M,A(C,L,this),this.pos===N&&this.skip(M)}return L},readMessage:function(A,L){return this.readFields(A,L,this.readVarint()+this.pos)},readFixed32:function(){var A=O(this.buf,this.pos);return this.pos+=4,A},readSFixed32:function(){var A=R(this.buf,this.pos);return this.pos+=4,A},readFixed64:function(){var A=O(this.buf,this.pos)+O(this.buf,this.pos+4)*k;return this.pos+=8,A},readSFixed64:function(){var A=O(this.buf,this.pos)+R(this.buf,this.pos+4)*k;return this.pos+=8,A},readFloat:function(){var A=G.read(this.buf,this.pos,!0,23,4);return this.pos+=4,A},readDouble:function(){var A=G.read(this.buf,this.pos,!0,52,8);return this.pos+=8,A},readVarint:function(A){var b,M,L=this.buf;return b=127&(M=L[this.pos++]),M<128||(b|=(127&(M=L[this.pos++]))<<7,M<128)||(b|=(127&(M=L[this.pos++]))<<14,M<128)||(b|=(127&(M=L[this.pos++]))<<21,M<128)?b:function S(A,L,b){var C,N,M=b.buf;if(C=(112&(N=M[b.pos++]))>>4,N<128||(C|=(127&(N=M[b.pos++]))<<3,N<128)||(C|=(127&(N=M[b.pos++]))<<10,N<128)||(C|=(127&(N=M[b.pos++]))<<17,N<128)||(C|=(127&(N=M[b.pos++]))<<24,N<128)||(C|=(1&(N=M[b.pos++]))<<31,N<128))return function p(A,L,b){return b?4294967296*L+(A>>>0):4294967296*(L>>>0)+(A>>>0)}(A,C,L);throw new Error("Expected varint not more than 10 bytes")}(b|=(15&(M=L[this.pos]))<<28,A,this)},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var A=this.readVarint();return A%2==1?(A+1)/-2:A/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var A=this.readVarint()+this.pos,L=this.pos;return this.pos=A,A-L>=12&&I?function K(A,L,b){return I.decode(A.subarray(L,b))}(this.buf,L,A):function W(A,L,b){for(var M="",C=L;C<b;){var Y,st,ht,N=A[C],H=null,it=N>239?4:N>223?3:N>191?2:1;if(C+it>b)break;1===it?N<128&&(H=N):2===it?128==(192&(Y=A[C+1]))&&(H=(31&N)<<6|63&Y)<=127&&(H=null):3===it?(st=A[C+2],128==(192&(Y=A[C+1]))&&128==(192&st)&&((H=(15&N)<<12|(63&Y)<<6|63&st)<=2047||H>=55296&&H<=57343)&&(H=null)):4===it&&(st=A[C+2],ht=A[C+3],128==(192&(Y=A[C+1]))&&128==(192&st)&&128==(192&ht)&&((H=(15&N)<<18|(63&Y)<<12|(63&st)<<6|63&ht)<=65535||H>=1114112)&&(H=null)),null===H?(H=65533,it=1):H>65535&&(H-=65536,M+=String.fromCharCode(H>>>10&1023|55296),H=56320|1023&H),M+=String.fromCharCode(H),C+=it}return M}(this.buf,L,A)},readBytes:function(){var A=this.readVarint()+this.pos,L=this.buf.subarray(this.pos,A);return this.pos=A,L},readPackedVarint:function(A,L){if(this.type!==D.Bytes)return A.push(this.readVarint(L));var b=P(this);for(A=A||[];this.pos<b;)A.push(this.readVarint(L));return A},readPackedSVarint:function(A){if(this.type!==D.Bytes)return A.push(this.readSVarint());var L=P(this);for(A=A||[];this.pos<L;)A.push(this.readSVarint());return A},readPackedBoolean:function(A){if(this.type!==D.Bytes)return A.push(this.readBoolean());var L=P(this);for(A=A||[];this.pos<L;)A.push(this.readBoolean());return A},readPackedFloat:function(A){if(this.type!==D.Bytes)return A.push(this.readFloat());var L=P(this);for(A=A||[];this.pos<L;)A.push(this.readFloat());return A},readPackedDouble:function(A){if(this.type!==D.Bytes)return A.push(this.readDouble());var L=P(this);for(A=A||[];this.pos<L;)A.push(this.readDouble());return A},readPackedFixed32:function(A){if(this.type!==D.Bytes)return A.push(this.readFixed32());var L=P(this);for(A=A||[];this.pos<L;)A.push(this.readFixed32());return A},readPackedSFixed32:function(A){if(this.type!==D.Bytes)return A.push(this.readSFixed32());var L=P(this);for(A=A||[];this.pos<L;)A.push(this.readSFixed32());return A},readPackedFixed64:function(A){if(this.type!==D.Bytes)return A.push(this.readFixed64());var L=P(this);for(A=A||[];this.pos<L;)A.push(this.readFixed64());return A},readPackedSFixed64:function(A){if(this.type!==D.Bytes)return A.push(this.readSFixed64());var L=P(this);for(A=A||[];this.pos<L;)A.push(this.readSFixed64());return A},skip:function(A){var L=7&A;if(L===D.Varint)for(;this.buf[this.pos++]>127;);else if(L===D.Bytes)this.pos=this.readVarint()+this.pos;else if(L===D.Fixed32)this.pos+=4;else{if(L!==D.Fixed64)throw new Error("Unimplemented type: "+L);this.pos+=8}},writeTag:function(A,L){this.writeVarint(A<<3|L)},realloc:function(A){for(var L=this.length||16;L<this.pos+A;)L*=2;if(L!==this.length){var b=new Uint8Array(L);b.set(this.buf),this.buf=b,this.length=L}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(A){this.realloc(4),y(this.buf,A,this.pos),this.pos+=4},writeSFixed32:function(A){this.realloc(4),y(this.buf,A,this.pos),this.pos+=4},writeFixed64:function(A){this.realloc(8),y(this.buf,-1&A,this.pos),y(this.buf,Math.floor(A*z),this.pos+4),this.pos+=8},writeSFixed64:function(A){this.realloc(8),y(this.buf,-1&A,this.pos),y(this.buf,Math.floor(A*z),this.pos+4),this.pos+=8},writeVarint:function(A){(A=+A||0)>268435455||A<0?function d(A,L){var b,M;if(A>=0?(b=A%4294967296|0,M=A/4294967296|0):(M=~(-A/4294967296),4294967295^(b=~(-A%4294967296))?b=b+1|0:(b=0,M=M+1|0)),A>=0x10000000000000000||A<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");L.realloc(10),function u(A,L,b){b.buf[b.pos++]=127&A|128,A>>>=7,b.buf[b.pos++]=127&A|128,A>>>=7,b.buf[b.pos++]=127&A|128,A>>>=7,b.buf[b.pos++]=127&A|128,b.buf[b.pos]=127&(A>>>=7)}(b,0,L),function c(A,L){var b=(7&A)<<4;L.buf[L.pos++]|=b|((A>>>=3)?128:0),A&&(L.buf[L.pos++]=127&A|((A>>>=7)?128:0),A&&(L.buf[L.pos++]=127&A|((A>>>=7)?128:0),A&&(L.buf[L.pos++]=127&A|((A>>>=7)?128:0),A&&(L.buf[L.pos++]=127&A|((A>>>=7)?128:0),A&&(L.buf[L.pos++]=127&A)))))}(M,L)}(A,this):(this.realloc(4),this.buf[this.pos++]=127&A|(A>127?128:0),!(A<=127)&&(this.buf[this.pos++]=127&(A>>>=7)|(A>127?128:0),!(A<=127)&&(this.buf[this.pos++]=127&(A>>>=7)|(A>127?128:0),!(A<=127)&&(this.buf[this.pos++]=A>>>7&127))))},writeSVarint:function(A){this.writeVarint(A<0?2*-A-1:2*A)},writeBoolean:function(A){this.writeVarint(Boolean(A))},writeString:function(A){A=String(A),this.realloc(4*A.length),this.pos++;var L=this.pos;this.pos=function nt(A,L,b){for(var C,N,M=0;M<L.length;M++){if((C=L.charCodeAt(M))>55295&&C<57344){if(!N){C>56319||M+1===L.length?(A[b++]=239,A[b++]=191,A[b++]=189):N=C;continue}if(C<56320){A[b++]=239,A[b++]=191,A[b++]=189,N=C;continue}C=N-55296<<10|C-56320|65536,N=null}else N&&(A[b++]=239,A[b++]=191,A[b++]=189,N=null);C<128?A[b++]=C:(C<2048?A[b++]=C>>6|192:(C<65536?A[b++]=C>>12|224:(A[b++]=C>>18|240,A[b++]=C>>12&63|128),A[b++]=C>>6&63|128),A[b++]=63&C|128)}return b}(this.buf,A,this.pos);var b=this.pos-L;b>=128&&s(L,b,this),this.pos=L-1,this.writeVarint(b),this.pos+=b},writeFloat:function(A){this.realloc(4),G.write(this.buf,A,this.pos,!0,23,4),this.pos+=4},writeDouble:function(A){this.realloc(8),G.write(this.buf,A,this.pos,!0,52,8),this.pos+=8},writeBytes:function(A){var L=A.length;this.writeVarint(L),this.realloc(L);for(var b=0;b<L;b++)this.buf[this.pos++]=A[b]},writeRawMessage:function(A,L){this.pos++;var b=this.pos;A(L,this);var M=this.pos-b;M>=128&&s(b,M,this),this.pos=b-1,this.writeVarint(M),this.pos+=M},writeMessage:function(A,L,b){this.writeTag(A,D.Bytes),this.writeRawMessage(L,b)},writePackedVarint:function(A,L){L.length&&this.writeMessage(A,f,L)},writePackedSVarint:function(A,L){L.length&&this.writeMessage(A,n,L)},writePackedBoolean:function(A,L){L.length&&this.writeMessage(A,e,L)},writePackedFloat:function(A,L){L.length&&this.writeMessage(A,h,L)},writePackedDouble:function(A,L){L.length&&this.writeMessage(A,g,L)},writePackedFixed32:function(A,L){L.length&&this.writeMessage(A,E,L)},writePackedSFixed32:function(A,L){L.length&&this.writeMessage(A,v,L)},writePackedFixed64:function(A,L){L.length&&this.writeMessage(A,x,L)},writePackedSFixed64:function(A,L){L.length&&this.writeMessage(A,w,L)},writeBytesField:function(A,L){this.writeTag(A,D.Bytes),this.writeBytes(L)},writeFixed32Field:function(A,L){this.writeTag(A,D.Fixed32),this.writeFixed32(L)},writeSFixed32Field:function(A,L){this.writeTag(A,D.Fixed32),this.writeSFixed32(L)},writeFixed64Field:function(A,L){this.writeTag(A,D.Fixed64),this.writeFixed64(L)},writeSFixed64Field:function(A,L){this.writeTag(A,D.Fixed64),this.writeSFixed64(L)},writeVarintField:function(A,L){this.writeTag(A,D.Varint),this.writeVarint(L)},writeSVarintField:function(A,L){this.writeTag(A,D.Varint),this.writeSVarint(L)},writeStringField:function(A,L){this.writeTag(A,D.Bytes),this.writeString(L)},writeFloatField:function(A,L){this.writeTag(A,D.Fixed32),this.writeFloat(L)},writeDoubleField:function(A,L){this.writeTag(A,D.Fixed64),this.writeDouble(L)},writeBooleanField:function(A,L){this.writeVarintField(A,Boolean(L))}}},3431:(Bt,ot,a)=>{"use strict";a.d(ot,{Z:()=>be});var S=6378137,p=.0066943799901413165,d=484813681109536e-20,u=Math.PI/2,n=1e-10,h=.017453292519943295,g=57.29577951308232,e=Math.PI/4,E=2*Math.PI,v=3.14159265359,x={greenwich:0,lisbon:-9.131906111111,paris:2.337229166667,bogota:-74.080916666667,madrid:-3.687938888889,rome:12.452333333333,bern:7.439583333333,jakarta:106.807719444444,ferro:-17.666666666667,brussels:4.367975,stockholm:18.058277777778,athens:23.7163375,oslo:10.722916666667};const w={ft:{to_meter:.3048},"us-ft":{to_meter:1200/3937}};var O=/[\s_\-\/\(\)]/g;function y(t,l){if(t[l])return t[l];for(var X,_=Object.keys(t),B=l.toLowerCase().replace(O,""),j=-1;++j<_.length;)if((X=_[j]).toLowerCase().replace(O,"")===B)return t[X]}function R(t){var B,j,X,l={},_=t.split("+").map(function(tt){return tt.trim()}).filter(function(tt){return tt}).reduce(function(tt,ut){var Et=ut.split("=");return Et.push(!0),tt[Et[0].toLowerCase()]=Et[1],tt},{}),et={proj:"projName",datum:"datumCode",rf:function(tt){l.rf=parseFloat(tt)},lat_0:function(tt){l.lat0=tt*h},lat_1:function(tt){l.lat1=tt*h},lat_2:function(tt){l.lat2=tt*h},lat_ts:function(tt){l.lat_ts=tt*h},lon_0:function(tt){l.long0=tt*h},lon_1:function(tt){l.long1=tt*h},lon_2:function(tt){l.long2=tt*h},alpha:function(tt){l.alpha=parseFloat(tt)*h},gamma:function(tt){l.rectified_grid_angle=parseFloat(tt)},lonc:function(tt){l.longc=tt*h},x_0:function(tt){l.x0=parseFloat(tt)},y_0:function(tt){l.y0=parseFloat(tt)},k_0:function(tt){l.k0=parseFloat(tt)},k:function(tt){l.k0=parseFloat(tt)},a:function(tt){l.a=parseFloat(tt)},b:function(tt){l.b=parseFloat(tt)},r_a:function(){l.R_A=!0},zone:function(tt){l.zone=parseInt(tt,10)},south:function(){l.utmSouth=!0},towgs84:function(tt){l.datum_params=tt.split(",").map(function(ut){return parseFloat(ut)})},to_meter:function(tt){l.to_meter=parseFloat(tt)},units:function(tt){l.units=tt;var ut=y(w,tt);ut&&(l.to_meter=ut.to_meter)},from_greenwich:function(tt){l.from_greenwich=tt*h},pm:function(tt){var ut=y(x,tt);l.from_greenwich=(ut||parseFloat(tt))*h},nadgrids:function(tt){"@null"===tt?l.datumCode="none":l.nadgrids=tt},axis:function(tt){var ut="ewnsud";3===tt.length&&-1!==ut.indexOf(tt.substr(0,1))&&-1!==ut.indexOf(tt.substr(1,1))&&-1!==ut.indexOf(tt.substr(2,1))&&(l.axis=tt)},approx:function(){l.approx=!0}};for(B in _)j=_[B],B in et?"function"==typeof(X=et[B])?X(j):l[X]=j:l[B]=j;return"string"==typeof l.datumCode&&"WGS84"!==l.datumCode&&(l.datumCode=l.datumCode.toLowerCase()),l}var C=/\s/,N=/[A-Za-z]/,H=/[A-Za-z84_]/,it=/[,\]]/,Y=/[\d\.E\-\+]/;function st(t){if("string"!=typeof t)throw new Error("not a string");this.text=t.trim(),this.level=0,this.place=0,this.root=null,this.stack=[],this.currentObject=null,this.state=1}function Tt(t,l,_){Array.isArray(l)&&(_.unshift(l),l=null);var j=_.reduce(function(X,et){return vt(et,X),X},l?{}:t);l&&(t[l]=j)}function vt(t,l){if(Array.isArray(t)){var _=t.shift();if("PARAMETER"===_&&(_=t.shift()),1===t.length)return Array.isArray(t[0])?(l[_]={},void vt(t[0],l[_])):void(l[_]=t[0]);if(t.length)if("TOWGS84"!==_){if("AXIS"===_)return _ in l||(l[_]=[]),void l[_].push(t);var B;switch(Array.isArray(_)||(l[_]={}),_){case"UNIT":case"PRIMEM":case"VERT_DATUM":return l[_]={name:t[0].toLowerCase(),convert:t[1]},void(3===t.length&&vt(t[2],l[_]));case"SPHEROID":case"ELLIPSOID":return l[_]={name:t[0],a:t[1],rf:t[2]},void(4===t.length&&vt(t[3],l[_]));case"PROJECTEDCRS":case"PROJCRS":case"GEOGCS":case"GEOCCS":case"PROJCS":case"LOCAL_CS":case"GEODCRS":case"GEODETICCRS":case"GEODETICDATUM":case"EDATUM":case"ENGINEERINGDATUM":case"VERT_CS":case"VERTCRS":case"VERTICALCRS":case"COMPD_CS":case"COMPOUNDCRS":case"ENGINEERINGCRS":case"ENGCRS":case"FITTED_CS":case"LOCAL_DATUM":case"DATUM":return t[0]=["name",t[0]],void Tt(l,_,t);default:for(B=-1;++B<t.length;)if(!Array.isArray(t[B]))return vt(t,l[_]);return Tt(l,_,t)}}else l[_]=t;else l[_]=!0}else l[t]=!0}function Gt(t){return.017453292519943295*t}function ie(t){var l=function ht(t){return new st(t).output()}(t),_=l.shift(),B=l.shift();l.unshift(["name",B]),l.unshift(["type",_]);var j={};return vt(l,j),function kt(t){if("GEOGCS"===t.type?t.projName="longlat":"LOCAL_CS"===t.type?(t.projName="identity",t.local=!0):t.projName="object"==typeof t.PROJECTION?Object.keys(t.PROJECTION)[0]:t.PROJECTION,t.AXIS){for(var l="",_=0,B=t.AXIS.length;_<B;++_){var j=[t.AXIS[_][0].toLowerCase(),t.AXIS[_][1].toLowerCase()];-1!==j[0].indexOf("north")||("y"===j[0]||"lat"===j[0])&&"north"===j[1]?l+="n":-1!==j[0].indexOf("south")||("y"===j[0]||"lat"===j[0])&&"south"===j[1]?l+="s":-1!==j[0].indexOf("east")||("x"===j[0]||"lon"===j[0])&&"east"===j[1]?l+="e":(-1!==j[0].indexOf("west")||("x"===j[0]||"lon"===j[0])&&"west"===j[1])&&(l+="w")}2===l.length&&(l+="u"),3===l.length&&(t.axis=l)}t.UNIT&&(t.units=t.UNIT.name.toLowerCase(),"metre"===t.units&&(t.units="meter"),t.UNIT.convert&&("GEOGCS"===t.type?t.DATUM&&t.DATUM.SPHEROID&&(t.to_meter=t.UNIT.convert*t.DATUM.SPHEROID.a):t.to_meter=t.UNIT.convert));var X=t.GEOGCS;function et(Et){return Et*(t.to_meter||1)}"GEOGCS"===t.type&&(X=t),X&&(t.datumCode=X.DATUM?X.DATUM.name.toLowerCase():X.name.toLowerCase(),"d_"===t.datumCode.slice(0,2)&&(t.datumCode=t.datumCode.slice(2)),("new_zealand_geodetic_datum_1949"===t.datumCode||"new_zealand_1949"===t.datumCode)&&(t.datumCode="nzgd49"),("wgs_1984"===t.datumCode||"world_geodetic_system_1984"===t.datumCode)&&("Mercator_Auxiliary_Sphere"===t.PROJECTION&&(t.sphere=!0),t.datumCode="wgs84"),"_ferro"===t.datumCode.slice(-6)&&(t.datumCode=t.datumCode.slice(0,-6)),"_jakarta"===t.datumCode.slice(-8)&&(t.datumCode=t.datumCode.slice(0,-8)),~t.datumCode.indexOf("belge")&&(t.datumCode="rnb72"),X.DATUM&&X.DATUM.SPHEROID&&(t.ellps=X.DATUM.SPHEROID.name.replace("_19","").replace(/[Cc]larke\_18/,"clrk"),"international"===t.ellps.toLowerCase().slice(0,13)&&(t.ellps="intl"),t.a=X.DATUM.SPHEROID.a,t.rf=parseFloat(X.DATUM.SPHEROID.rf,10)),X.DATUM&&X.DATUM.TOWGS84&&(t.datum_params=X.DATUM.TOWGS84),~t.datumCode.indexOf("osgb_1936")&&(t.datumCode="osgb36"),~t.datumCode.indexOf("osni_1952")&&(t.datumCode="osni52"),(~t.datumCode.indexOf("tm65")||~t.datumCode.indexOf("geodetic_datum_of_1965"))&&(t.datumCode="ire65"),"ch1903+"===t.datumCode&&(t.datumCode="ch1903"),~t.datumCode.indexOf("israel")&&(t.datumCode="isr93")),t.b&&!isFinite(t.b)&&(t.b=t.a),[["standard_parallel_1","Standard_Parallel_1"],["standard_parallel_1","Latitude of 1st standard parallel"],["standard_parallel_2","Standard_Parallel_2"],["standard_parallel_2","Latitude of 2nd standard parallel"],["false_easting","False_Easting"],["false_easting","False easting"],["false-easting","Easting at false origin"],["false_northing","False_Northing"],["false_northing","False northing"],["false_northing","Northing at false origin"],["central_meridian","Central_Meridian"],["central_meridian","Longitude of natural origin"],["central_meridian","Longitude of false origin"],["latitude_of_origin","Latitude_Of_Origin"],["latitude_of_origin","Central_Parallel"],["latitude_of_origin","Latitude of natural origin"],["latitude_of_origin","Latitude of false origin"],["scale_factor","Scale_Factor"],["k0","scale_factor"],["latitude_of_center","Latitude_Of_Center"],["latitude_of_center","Latitude_of_center"],["lat0","latitude_of_center",Gt],["longitude_of_center","Longitude_Of_Center"],["longitude_of_center","Longitude_of_center"],["longc","longitude_of_center",Gt],["x0","false_easting",et],["y0","false_northing",et],["long0","central_meridian",Gt],["lat0","latitude_of_origin",Gt],["lat0","standard_parallel_1",Gt],["lat1","standard_parallel_1",Gt],["lat2","standard_parallel_2",Gt],["azimuth","Azimuth"],["alpha","azimuth",Gt],["srsCode","name"]].forEach(function(Et){return function bt(t,l){var _=l[0],B=l[1];!(_ in t)&&B in t&&(t[_]=t[B],3===l.length&&(t[_]=l[2](t[_])))}(t,Et)}),!t.long0&&t.longc&&("Albers_Conic_Equal_Area"===t.projName||"Lambert_Azimuthal_Equal_Area"===t.projName)&&(t.long0=t.longc),t.lat_ts||!t.lat1||"Stereographic_South_Pole"!==t.projName&&"Polar Stereographic (variant B)"!==t.projName?!t.lat_ts&&t.lat0&&"Polar_Stereographic"===t.projName&&(t.lat_ts=t.lat0,t.lat0=Gt(t.lat0>0?90:-90)):(t.lat0=Gt(t.lat1>0?90:-90),t.lat_ts=t.lat1)}(j),j}function zt(t){var l=this;if(2===arguments.length){var _=arguments[1];zt[t]="string"==typeof _?"+"===_.charAt(0)?R(arguments[1]):ie(arguments[1]):_}else if(1===arguments.length){if(Array.isArray(t))return t.map(function(B){Array.isArray(B)?zt.apply(l,B):zt(B)});if("string"==typeof t){if(t in zt)return zt[t]}else"EPSG"in t?zt["EPSG:"+t.EPSG]=t:"ESRI"in t?zt["ESRI:"+t.ESRI]=t:"IAU2000"in t?zt["IAU2000:"+t.IAU2000]=t:console.log(t);return}}st.prototype.readCharicter=function(){var t=this.text[this.place++];if(4!==this.state)for(;C.test(t);){if(this.place>=this.text.length)return;t=this.text[this.place++]}switch(this.state){case 1:return this.neutral(t);case 2:return this.keyword(t);case 4:return this.quoted(t);case 5:return this.afterquote(t);case 3:return this.number(t);case-1:return}},st.prototype.afterquote=function(t){if('"'===t)return this.word+='"',void(this.state=4);if(it.test(t))return this.word=this.word.trim(),void this.afterItem(t);throw new Error("havn't handled \""+t+'" in afterquote yet, index '+this.place)},st.prototype.afterItem=function(t){return","===t?(null!==this.word&&this.currentObject.push(this.word),this.word=null,void(this.state=1)):"]"===t?(this.level--,null!==this.word&&(this.currentObject.push(this.word),this.word=null),this.state=1,this.currentObject=this.stack.pop(),void(this.currentObject||(this.state=-1))):void 0},st.prototype.number=function(t){if(!Y.test(t)){if(it.test(t))return this.word=parseFloat(this.word),void this.afterItem(t);throw new Error("havn't handled \""+t+'" in number yet, index '+this.place)}this.word+=t},st.prototype.quoted=function(t){'"'!==t?this.word+=t:this.state=5},st.prototype.keyword=function(t){if(H.test(t))this.word+=t;else{if("["===t){var l=[];return l.push(this.word),this.level++,null===this.root?this.root=l:this.currentObject.push(l),this.stack.push(this.currentObject),this.currentObject=l,void(this.state=1)}if(!it.test(t))throw new Error("havn't handled \""+t+'" in keyword yet, index '+this.place);this.afterItem(t)}},st.prototype.neutral=function(t){if(N.test(t))return this.word=t,void(this.state=2);if('"'===t)return this.word="",void(this.state=4);if(Y.test(t))return this.word=t,void(this.state=3);if(!it.test(t))throw new Error("havn't handled \""+t+'" in neutral yet, index '+this.place);this.afterItem(t)},st.prototype.output=function(){for(;this.place<this.text.length;)this.readCharicter();if(-1===this.state)return this.root;throw new Error('unable to parse string "'+this.text+'". State is '+this.state)},function G(t){t("EPSG:4326","+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees"),t("EPSG:4269","+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees"),t("EPSG:3857","+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs"),t.WGS84=t["EPSG:4326"],t["EPSG:3785"]=t["EPSG:3857"],t.GOOGLE=t["EPSG:3857"],t["EPSG:900913"]=t["EPSG:3857"],t["EPSG:102113"]=t["EPSG:3857"]}(zt);const ue=zt;var Se=["PROJECTEDCRS","PROJCRS","GEOGCS","GEOCCS","PROJCS","LOCAL_CS","GEODCRS","GEODETICCRS","GEODETICDATUM","ENGCRS","ENGINEERINGCRS"],Ot=["3857","900913","3785","102113"];function Mt(t,l){var _,B;if(t=t||{},!l)return t;for(B in l)void 0!==(_=l[B])&&(t[B]=_);return t}function Zt(t,l,_){var B=t*l;return _/Math.sqrt(1-B*B)}function jt(t){return t<0?-1:1}function Wt(t){return Math.abs(t)<=v?t:t-jt(t)*E}function he(t,l,_){var B=t*_;return B=Math.pow((1-B)/(1+B),.5*t),Math.tan(.5*(u-l))/B}function _e(t,l){for(var B,j,_=.5*t,X=u-2*Math.atan(l),et=0;et<=15;et++)if(B=t*Math.sin(X),X+=j=u-2*Math.atan(l*Math.pow((1-B)/(1+B),_))-X,Math.abs(j)<=1e-10)return X;return-9999}function Q(t){return t}var _t=[{init:function Le(){var t=this.b/this.a;this.es=1-t*t,"x0"in this||(this.x0=0),"y0"in this||(this.y0=0),this.e=Math.sqrt(this.es),this.lat_ts?this.k0=this.sphere?Math.cos(this.lat_ts):Zt(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)):this.k0||(this.k0=this.k?this.k:1)},forward:function Ze(t){var B,j,l=t.x,_=t.y;if(_*g>90&&_*g<-90&&l*g>180&&l*g<-180)return null;if(Math.abs(Math.abs(_)-u)<=n)return null;if(this.sphere)B=this.x0+this.a*this.k0*Wt(l-this.long0),j=this.y0+this.a*this.k0*Math.log(Math.tan(e+.5*_));else{var X=Math.sin(_),et=he(this.e,_,X);B=this.x0+this.a*this.k0*Wt(l-this.long0),j=this.y0-this.a*this.k0*Math.log(et)}return t.x=B,t.y=j,t},inverse:function It(t){var B,j,l=t.x-this.x0,_=t.y-this.y0;if(this.sphere)j=u-2*Math.atan(Math.exp(-_/(this.a*this.k0)));else{var X=Math.exp(-_/(this.a*this.k0));if(-9999===(j=_e(this.e,X)))return null}return B=Wt(this.long0+l/(this.a*this.k0)),t.x=B,t.y=j,t},names:["Mercator","Popular Visualisation Pseudo Mercator","Mercator_1SP","Mercator_Auxiliary_Sphere","merc"]},{init:function F(){},forward:Q,inverse:Q,names:["longlat","identity"]}],St={},Nt=[];function Xt(t,l){var _=Nt.length;return t.names?(Nt[_]=t,t.names.forEach(function(B){St[B.toLowerCase()]=_}),this):(console.log(l),!0)}const se={start:function Ee(){_t.forEach(Xt)},add:Xt,get:function Jt(t){if(!t)return!1;var l=t.toLowerCase();return typeof St[l]<"u"&&Nt[St[l]]?Nt[St[l]]:void 0}};var Qt={MERIT:{a:6378137,rf:298.257,ellipseName:"MERIT 1983"},SGS85:{a:6378136,rf:298.257,ellipseName:"Soviet Geodetic System 85"},GRS80:{a:6378137,rf:298.257222101,ellipseName:"GRS 1980(IUGG, 1980)"},IAU76:{a:6378140,rf:298.257,ellipseName:"IAU 1976"},airy:{a:6377563.396,b:6356256.91,ellipseName:"Airy 1830"},APL4:{a:6378137,rf:298.25,ellipseName:"Appl. Physics. 1965"},NWL9D:{a:6378145,rf:298.25,ellipseName:"Naval Weapons Lab., 1965"},mod_airy:{a:6377340.189,b:6356034.446,ellipseName:"Modified Airy"},andrae:{a:6377104.43,rf:300,ellipseName:"Andrae 1876 (Den., Iclnd.)"},aust_SA:{a:6378160,rf:298.25,ellipseName:"Australian Natl & S. Amer. 1969"},GRS67:{a:6378160,rf:298.247167427,ellipseName:"GRS 67(IUGG 1967)"},bessel:{a:6377397.155,rf:299.1528128,ellipseName:"Bessel 1841"},bess_nam:{a:6377483.865,rf:299.1528128,ellipseName:"Bessel 1841 (Namibia)"},clrk66:{a:6378206.4,b:6356583.8,ellipseName:"Clarke 1866"},clrk80:{a:6378249.145,rf:293.4663,ellipseName:"Clarke 1880 mod."},clrk80ign:{a:6378249.2,b:6356515,rf:293.4660213,ellipseName:"Clarke 1880 (IGN)"},clrk58:{a:6378293.645208759,rf:294.2606763692654,ellipseName:"Clarke 1858"},CPM:{a:6375738.7,rf:334.29,ellipseName:"Comm. des Poids et Mesures 1799"},delmbr:{a:6376428,rf:311.5,ellipseName:"Delambre 1810 (Belgium)"},engelis:{a:6378136.05,rf:298.2566,ellipseName:"Engelis 1985"},evrst30:{a:6377276.345,rf:300.8017,ellipseName:"Everest 1830"},evrst48:{a:6377304.063,rf:300.8017,ellipseName:"Everest 1948"},evrst56:{a:6377301.243,rf:300.8017,ellipseName:"Everest 1956"},evrst69:{a:6377295.664,rf:300.8017,ellipseName:"Everest 1969"},evrstSS:{a:6377298.556,rf:300.8017,ellipseName:"Everest (Sabah & Sarawak)"},fschr60:{a:6378166,rf:298.3,ellipseName:"Fischer (Mercury Datum) 1960"},fschr60m:{a:6378155,rf:298.3,ellipseName:"Fischer 1960"},fschr68:{a:6378150,rf:298.3,ellipseName:"Fischer 1968"},helmert:{a:6378200,rf:298.3,ellipseName:"Helmert 1906"},hough:{a:6378270,rf:297,ellipseName:"Hough"},intl:{a:6378388,rf:297,ellipseName:"International 1909 (Hayford)"},kaula:{a:6378163,rf:298.24,ellipseName:"Kaula 1961"},lerch:{a:6378139,rf:298.257,ellipseName:"Lerch 1979"},mprts:{a:6397300,rf:191,ellipseName:"Maupertius 1738"},new_intl:{a:6378157.5,b:6356772.2,ellipseName:"New International 1967"},plessis:{a:6376523,rf:6355863,ellipseName:"Plessis 1817 (France)"},krass:{a:6378245,rf:298.3,ellipseName:"Krassovsky, 1942"},SEasia:{a:6378155,b:6356773.3205,ellipseName:"Southeast Asia"},walbeck:{a:6376896,b:6355834.8467,ellipseName:"Walbeck"},WGS60:{a:6378165,rf:298.3,ellipseName:"WGS 60"},WGS66:{a:6378145,rf:298.25,ellipseName:"WGS 66"},WGS7:{a:6378135,rf:298.26,ellipseName:"WGS 72"}},Fe=Qt.WGS84={a:6378137,rf:298.257223563,ellipseName:"WGS 84"};Qt.sphere={a:6370997,b:6370997,ellipseName:"Normal Sphere (r=6370997)"};var Ge={wgs84:{towgs84:"0,0,0",ellipse:"WGS84",datumName:"WGS84"},ch1903:{towgs84:"674.374,15.056,405.346",ellipse:"bessel",datumName:"swiss"},ggrs87:{towgs84:"-199.87,74.79,246.62",ellipse:"GRS80",datumName:"Greek_Geodetic_Reference_System_1987"},nad83:{towgs84:"0,0,0",ellipse:"GRS80",datumName:"North_American_Datum_1983"},nad27:{nadgrids:"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat",ellipse:"clrk66",datumName:"North_American_Datum_1927"},potsdam:{towgs84:"598.1,73.7,418.2,0.202,0.045,-2.455,6.7",ellipse:"bessel",datumName:"Potsdam Rauenberg 1950 DHDN"},carthage:{towgs84:"-263.0,6.0,431.0",ellipse:"clark80",datumName:"Carthage 1934 Tunisia"},hermannskogel:{towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Hermannskogel"},osni52:{towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"airy",datumName:"Irish National"},ire65:{towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"mod_airy",datumName:"Ireland 1965"},rassadiran:{towgs84:"-133.63,-157.5,-158.62",ellipse:"intl",datumName:"Rassadiran"},nzgd49:{towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993",ellipse:"intl",datumName:"New Zealand Geodetic Datum 1949"},osgb36:{towgs84:"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894",ellipse:"airy",datumName:"Airy 1830"},s_jtsk:{towgs84:"589,76,480",ellipse:"bessel",datumName:"S-JTSK (Ferro)"},beduaram:{towgs84:"-106,-87,188",ellipse:"clrk80",datumName:"Beduaram"},gunung_segara:{towgs84:"-403,684,41",ellipse:"bessel",datumName:"Gunung Segara Jakarta"},rnb72:{towgs84:"106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1",ellipse:"intl",datumName:"Reseau National Belge 1972"}};var ii={};function q(t){if(0===t.length)return null;var l="@"===t[0];return l&&(t=t.slice(1)),"null"===t?{name:"null",mandatory:!l,grid:null,isNull:!0}:{name:t,mandatory:!l,grid:ii[t]||null,isNull:!1}}function $(t){return t/3600*Math.PI/180}function Rt(t,l,_){return String.fromCharCode.apply(null,new Uint8Array(t.buffer.slice(l,_)))}function ne(t){return t.map(function(l){return[$(l.longitudeShift),$(l.latitudeShift)]})}function me(t,l,_){return{name:Rt(t,l+8,l+16).trim(),parent:Rt(t,l+24,l+24+8).trim(),lowerLatitude:t.getFloat64(l+72,_),upperLatitude:t.getFloat64(l+88,_),lowerLongitude:t.getFloat64(l+104,_),upperLongitude:t.getFloat64(l+120,_),latitudeInterval:t.getFloat64(l+136,_),longitudeInterval:t.getFloat64(l+152,_),gridNodeCount:t.getInt32(l+168,_)}}function Me(t,l,_,B){for(var j=l+176,et=[],tt=0;tt<_.gridNodeCount;tt++){var ut={latitudeShift:t.getFloat32(j+16*tt,B),longitudeShift:t.getFloat32(j+16*tt+4,B),latitudeAccuracy:t.getFloat32(j+16*tt+8,B),longitudeAccuracy:t.getFloat32(j+16*tt+12,B)};et.push(ut)}return et}function Re(t,l){if(!(this instanceof Re))return new Re(t);l=l||function(Et){if(Et)throw Et};var _=function qt(t){if(!function de(t){return"string"==typeof t}(t))return t;if(function ce(t){return t in ue}(t))return ue[t];if(function dt(t){return Se.some(function(l){return t.indexOf(l)>-1})}(t)){var l=ie(t);if(function At(t){var l=y(t,"authority");if(l){var _=y(l,"epsg");return _&&Ot.indexOf(_)>-1}}(l))return ue["EPSG:3857"];var _=function Yt(t){var l=y(t,"extension");if(l)return y(l,"proj4")}(l);return _?R(_):l}return function ge(t){return"+"===t[0]}(t)?R(t):void 0}(t);if("object"==typeof _){var B=Re.projections.get(_.projName);if(B){if(_.datumCode&&"none"!==_.datumCode){var j=y(Ge,_.datumCode);j&&(_.datum_params=_.datum_params||(j.towgs84?j.towgs84.split(","):null),_.ellps=j.ellipse,_.datumName=j.datumName?j.datumName:_.datumCode)}_.k0=_.k0||1,_.axis=_.axis||"enu",_.ellps=_.ellps||"wgs84",_.lat1=_.lat1||_.lat0;var X=function We(t,l,_,B,j){if(!t){var X=y(Qt,B);X||(X=Fe),t=X.a,l=X.b,_=X.rf}return _&&!l&&(l=(1-1/_)*t),(0===_||Math.abs(t-l)<n)&&(j=!0,l=t),{a:t,b:l,rf:_,sphere:j}}(_.a,_.b,_.rf,_.ellps,_.sphere),et=function Ye(t,l,_,B){var j=t*t,X=l*l,et=(j-X)/j,tt=0;return B?(j=(t*=1-et*(.16666666666666666+et*(.04722222222222222+.022156084656084655*et)))*t,et=0):tt=Math.sqrt(et),{es:et,e:tt,ep2:(j-X)/X}}(X.a,X.b,0,_.R_A),tt=function qe(t){return void 0===t?null:t.split(",").map(q)}(_.nadgrids),ut=_.datum||function Ue(t,l,_,B,j,X,et){var tt={};return tt.datum_type=void 0===t||"none"===t?5:4,l&&(tt.datum_params=l.map(parseFloat),(0!==tt.datum_params[0]||0!==tt.datum_params[1]||0!==tt.datum_params[2])&&(tt.datum_type=1),tt.datum_params.length>3&&(0!==tt.datum_params[3]||0!==tt.datum_params[4]||0!==tt.datum_params[5]||0!==tt.datum_params[6])&&(tt.datum_type=2,tt.datum_params[3]*=d,tt.datum_params[4]*=d,tt.datum_params[5]*=d,tt.datum_params[6]=tt.datum_params[6]/1e6+1)),et&&(tt.datum_type=3,tt.grids=et),tt.a=_,tt.b=B,tt.es=j,tt.ep2=X,tt}(_.datumCode,_.datum_params,X.a,X.b,et.es,et.ep2,tt);Mt(this,_),Mt(this,B),this.a=X.a,this.b=X.b,this.rf=X.rf,this.sphere=X.sphere,this.es=et.es,this.e=et.e,this.ep2=et.ep2,this.datum=ut,this.init(),l(null,this)}else l(t)}else l(t)}(Re.projections=se).start();const De=Re;function Xe(t,l,_){var et,tt,Et,B=t.x,j=t.y,X=t.z?t.z:0;if(j<-u&&j>-1.001*u)j=-u;else if(j>u&&j<1.001*u)j=u;else{if(j<-u)return{x:-1/0,y:-1/0,z:t.z};if(j>u)return{x:1/0,y:1/0,z:t.z}}return B>Math.PI&&(B-=2*Math.PI),tt=Math.sin(j),Et=Math.cos(j),{x:((et=_/Math.sqrt(1-l*(tt*tt)))+X)*Et*Math.cos(B),y:(et+X)*Et*Math.sin(B),z:(et*(1-l)+X)*tt}}function ni(t,l,_,B){var tt,ut,Et,Ut,Pt,Vt,ae,re,oe,ye,Te,Ne,Be,Ce,Je,Ke=t.x,pe=t.y,ke=t.z?t.z:0;if(tt=Math.sqrt(Ke*Ke+pe*pe),ut=Math.sqrt(Ke*Ke+pe*pe+ke*ke),tt/_<1e-12){if(Ce=0,ut/_<1e-12)return Je=-B,{x:t.x,y:t.y,z:t.z}}else Ce=Math.atan2(pe,Ke);Et=ke/ut,re=(Ut=tt/ut)*(1-l)*(Pt=1/Math.sqrt(1-l*(2-l)*Ut*Ut)),oe=Et*Pt,Be=0;do{Be++,Vt=l*(ae=_/Math.sqrt(1-l*oe*oe))/(ae+(Je=tt*re+ke*oe-ae*(1-l*oe*oe))),Ne=(Te=Et*(Pt=1/Math.sqrt(1-Vt*(2-Vt)*Ut*Ut)))*re-(ye=Ut*(1-Vt)*Pt)*oe,re=ye,oe=Te}while(Ne*Ne>1e-24&&Be<30);return{x:Ce,y:Math.atan(Te/Math.abs(ye)),z:Je}}function yi(t){return 1===t||2===t}function bi(t,l,_){if(null===t.grids||0===t.grids.length)return console.log("Grid shift grids not found"),-1;for(var B={x:-_.x,y:_.y},j={x:Number.NaN,y:Number.NaN},et=[],tt=0;tt<t.grids.length;tt++){var ut=t.grids[tt];if(et.push(ut.name),ut.isNull){j=B;break}if(null!==ut.grid){var Et=ut.grid.subgrids[0],Ut=(Math.abs(Et.del[1])+Math.abs(Et.del[0]))/1e4;if(!(Et.ll[1]-Ut>B.y||Et.ll[0]-Ut>B.x||Et.ll[1]+(Et.lim[1]-1)*Et.del[1]+Ut<B.y||Et.ll[0]+(Et.lim[0]-1)*Et.del[0]+Ut<B.x||(j=mi(B,l,Et),isNaN(j.x))))break}else if(ut.mandatory)return console.log("Unable to find mandatory grid '"+ut.name+"'"),-1}return isNaN(j.x)?(console.log("Failed to find a grid shift table for location '"+-B.x*g+" "+B.y*g+" tried: '"+et+"'"),-1):(_.x=-j.x,_.y=j.y,0)}function mi(t,l,_){var B={x:Number.NaN,y:Number.NaN};if(isNaN(t.x))return B;var j={x:t.x,y:t.y};j.x-=_.ll[0],j.y-=_.ll[1],j.x=Wt(j.x-Math.PI)+Math.PI;var X=ui(j,_);if(l){if(isNaN(X.x))return B;X.x=j.x-X.x,X.y=j.y-X.y;var ut,Et,et=9;do{if(Et=ui(X,_),isNaN(Et.x)){console.log("Inverse grid shift iteration failed, presumably at grid edge.  Using first approximation.");break}X.x+=(ut={x:j.x-(Et.x+X.x),y:j.y-(Et.y+X.y)}).x,X.y+=ut.y}while(et--&&Math.abs(ut.x)>1e-12&&Math.abs(ut.y)>1e-12);if(et<0)return console.log("Inverse grid shift iterator failed to converge."),B;B.x=Wt(X.x+_.ll[0]),B.y=X.y+_.ll[1]}else isNaN(X.x)||(B.x=t.x+X.x,B.y=t.y+X.y);return B}function ui(t,l){var et,_={x:t.x/l.del[0],y:t.y/l.del[1]},B_x=Math.floor(_.x),B_y=Math.floor(_.y),j_x=_.x-1*B_x,j_y=_.y-1*B_y,X={x:Number.NaN,y:Number.NaN};if(B_x<0||B_x>=l.lim[0]||B_y<0||B_y>=l.lim[1])return X;var tt_x=l.cvs[et=B_y*l.lim[0]+B_x][0],tt_y=l.cvs[et][1];et++;var ut_x=l.cvs[et][0],ut_y=l.cvs[et][1],Et_x=l.cvs[et+=l.lim[0]][0],Et_y=l.cvs[et][1];et--;var Ut_y=l.cvs[et][1],Pt=j_x*j_y,Vt=j_x*(1-j_y),ae=(1-j_x)*(1-j_y),re=(1-j_x)*j_y;return X.x=ae*tt_x+Vt*ut_x+re*l.cvs[et][0]+Pt*Et_x,X.y=ae*tt_y+Vt*ut_y+re*Ut_y+Pt*Et_y,X}function Ei(t,l,_){var et,tt,ut,B=_.x,j=_.y,X=_.z||0,Et={};for(ut=0;ut<3;ut++)if(!l||2!==ut||void 0!==_.z)switch(0===ut?(et=B,tt=-1!=="ew".indexOf(t.axis[ut])?"x":"y"):1===ut?(et=j,tt=-1!=="ns".indexOf(t.axis[ut])?"y":"x"):(et=X,tt="z"),t.axis[ut]){case"e":case"n":Et[tt]=et;break;case"w":case"s":Et[tt]=-et;break;case"u":void 0!==_[tt]&&(Et.z=et);break;case"d":void 0!==_[tt]&&(Et.z=-et);break;default:return null}return Et}function _i(t){var l={x:t[0],y:t[1]};return t.length>2&&(l.z=t[2]),t.length>3&&(l.m=t[3]),l}function Gi(t){if("function"==typeof Number.isFinite){if(Number.isFinite(t))return;throw new TypeError("coordinates must be finite numbers")}if("number"!=typeof t||t!=t||!isFinite(t))throw new TypeError("coordinates must be finite numbers")}function ri(t,l,_,B){var j,X=void 0!==(_=Array.isArray(_)?_i(_):{x:_.x,y:_.y,z:_.z,m:_.m}).z;if(function si(t){Gi(t.x),Gi(t.y)}(_),t.datum&&l.datum&&function Ci(t,l){return(1===t.datum.datum_type||2===t.datum.datum_type||3===t.datum.datum_type)&&"WGS84"!==l.datumCode||(1===l.datum.datum_type||2===l.datum.datum_type||3===l.datum.datum_type)&&"WGS84"!==t.datumCode}(t,l)&&(_=ri(t,j=new De("WGS84"),_,B),t=j),B&&"enu"!==t.axis&&(_=Ei(t,!1,_)),"longlat"===t.projName)_={x:_.x*h,y:_.y*h,z:_.z||0};else if(t.to_meter&&(_={x:_.x*t.to_meter,y:_.y*t.to_meter,z:_.z||0}),!(_=t.inverse(_)))return;if(t.from_greenwich&&(_.x+=t.from_greenwich),_=function Mn(t,l,_){if(function je(t,l){return!(t.datum_type!==l.datum_type||t.a!==l.a||Math.abs(t.es-l.es)>5e-11)&&(1===t.datum_type?t.datum_params[0]===l.datum_params[0]&&t.datum_params[1]===l.datum_params[1]&&t.datum_params[2]===l.datum_params[2]:2!==t.datum_type||t.datum_params[0]===l.datum_params[0]&&t.datum_params[1]===l.datum_params[1]&&t.datum_params[2]===l.datum_params[2]&&t.datum_params[3]===l.datum_params[3]&&t.datum_params[4]===l.datum_params[4]&&t.datum_params[5]===l.datum_params[5]&&t.datum_params[6]===l.datum_params[6])}(t,l)||5===t.datum_type||5===l.datum_type)return _;var B=t.a,j=t.es;if(3===t.datum_type){if(0!==bi(t,!1,_))return;B=S,j=p}var et=l.a,tt=l.b,ut=l.es;return 3===l.datum_type&&(et=S,tt=6356752.314,ut=p),j!==ut||B!==et||yi(t.datum_type)||yi(l.datum_type)?(_=Xe(_,j,B),yi(t.datum_type)&&(_=function vi(t,l,_){if(1===l)return{x:t.x+_[0],y:t.y+_[1],z:t.z+_[2]};if(2===l){var et=_[3],tt=_[4],ut=_[5],Et=_[6];return{x:Et*(t.x-ut*t.y+tt*t.z)+_[0],y:Et*(ut*t.x+t.y-et*t.z)+_[1],z:Et*(-tt*t.x+et*t.y+t.z)+_[2]}}}(_,t.datum_type,t.datum_params)),yi(l.datum_type)&&(_=function gi(t,l,_){if(1===l)return{x:t.x-_[0],y:t.y-_[1],z:t.z-_[2]};if(2===l){var et=_[3],tt=_[4],ut=_[5],Et=_[6],Ut=(t.x-_[0])/Et,Pt=(t.y-_[1])/Et,Vt=(t.z-_[2])/Et;return{x:Ut+ut*Pt-tt*Vt,y:-ut*Ut+Pt+et*Vt,z:tt*Ut-et*Pt+Vt}}}(_,l.datum_type,l.datum_params)),_=ni(_,ut,et,tt),3!==l.datum_type||0===bi(l,!0,_)?_:void 0):_}(t.datum,l.datum,_))return l.from_greenwich&&(_={x:_.x-l.from_greenwich,y:_.y,z:_.z||0}),"longlat"===l.projName?_={x:_.x*g,y:_.y*g,z:_.z||0}:(_=l.forward(_),l.to_meter&&(_={x:_.x/l.to_meter,y:_.y/l.to_meter,z:_.z||0})),B&&"enu"!==l.axis?Ei(l,!0,_):(X||delete _.z,_)}var xi=De("WGS84");function Ri(t,l,_,B){var j,X,et;return Array.isArray(_)?(j=ri(t,l,_,B)||{x:NaN,y:NaN},_.length>2?typeof t.name<"u"&&"geocent"===t.name||typeof l.name<"u"&&"geocent"===l.name?"number"==typeof j.z?[j.x,j.y,j.z].concat(_.splice(3)):[j.x,j.y,_[2]].concat(_.splice(3)):[j.x,j.y].concat(_.splice(2)):[j.x,j.y]):(X=ri(t,l,_,B),2===(et=Object.keys(_)).length||et.forEach(function(tt){if(typeof t.name<"u"&&"geocent"===t.name||typeof l.name<"u"&&"geocent"===l.name){if("x"===tt||"y"===tt||"z"===tt)return}else if("x"===tt||"y"===tt)return;X[tt]=_[tt]}),X)}function Vi(t){return t instanceof De?t:t.oProj?t.oProj:De(t)}const Oi=function Ws(t,l,_){t=Vi(t);var j,B=!1;return typeof l>"u"?(l=t,t=xi,B=!0):(typeof l.x<"u"||Array.isArray(l))&&(_=l,l=t,t=xi,B=!0),l=Vi(l),_?Ri(t,l,_):(j={forward:function(X,et){return Ri(t,l,X,et)},inverse:function(X,et){return Ri(l,t,X,et)}},B&&(j.oProj=l),j)};const Gs={forward:Pn,inverse:function cs(t){var l=zn(On(t.toUpperCase()));return l.lat&&l.lon?[l.lon,l.lat,l.lon,l.lat]:[l.left,l.bottom,l.right,l.top]},toPoint:Cn};function Pn(t,l){return l=l||5,function Bi(t,l){var _="00000"+t.easting,B="00000"+t.northing;return t.zoneNumber+t.zoneLetter+function Kn(t,l,_){var B=cn(_);return function kn(t,l,_){var B=_-1,j="AJSAJS".charCodeAt(B),X="AFAFAF".charCodeAt(B),et=j+t-1,tt=X+l,ut=!1;return et>90&&(et=et-90+65-1,ut=!0),(73===et||j<73&&et>73||(et>73||j<73)&&ut)&&et++,(79===et||j<79&&et>79||(et>79||j<79)&&ut)&&73==++et&&et++,et>90&&(et=et-90+65-1),tt>86?(tt=tt-86+65-1,ut=!0):ut=!1,(73===tt||X<73&&tt>73||(tt>73||X<73)&&ut)&&tt++,(79===tt||X<79&&tt>79||(tt>79||X<79)&&ut)&&73==++tt&&tt++,tt>86&&(tt=tt-86+65-1),String.fromCharCode(et)+String.fromCharCode(tt)}(Math.floor(t/1e5),Math.floor(l/1e5)%20,B)}(t.easting,t.northing,t.zoneNumber)+_.substr(_.length-5,l)+B.substr(B.length-5,l)}(function ds(t){var tt,ut,Et,Ut,Pt,oe,ye,l=t.lat,_=t.lon,B=6378137,j=.00669438,X=.9996,ae=Rn(l),re=Rn(_);ye=Math.floor((_+180)/6)+1,180===_&&(ye=60),l>=56&&l<64&&_>=3&&_<12&&(ye=32),l>=72&&l<84&&(_>=0&&_<9?ye=31:_>=9&&_<21?ye=33:_>=21&&_<33?ye=35:_>=33&&_<42&&(ye=37)),oe=Rn(6*(ye-1)-180+3),tt=j/(1-j),ut=B/Math.sqrt(1-j*Math.sin(ae)*Math.sin(ae)),Et=Math.tan(ae)*Math.tan(ae),Ut=tt*Math.cos(ae)*Math.cos(ae);var Te=X*ut*((Pt=Math.cos(ae)*(re-oe))+(1-Et+Ut)*Pt*Pt*Pt/6+(5-18*Et+Et*Et+72*Ut-58*tt)*Pt*Pt*Pt*Pt*Pt/120)+5e5,Ne=X*(B*(.9983242984503243*ae-.002514607064228144*Math.sin(2*ae)+2639046602129982e-21*Math.sin(4*ae)-35*j*j*j/3072*Math.sin(6*ae))+ut*Math.tan(ae)*(Pt*Pt/2+(5-Et+9*Ut+4*Ut*Ut)*Pt*Pt*Pt*Pt/24+(61-58*Et+Et*Et+600*Ut-330*tt)*Pt*Pt*Pt*Pt*Pt*Pt/720));return l<0&&(Ne+=1e7),{northing:Math.round(Ne),easting:Math.round(Te),zoneNumber:ye,zoneLetter:zs(l)}}({lat:t[1],lon:t[0]}),l)}function Cn(t){var l=zn(On(t.toUpperCase()));return l.lat&&l.lon?[l.lon,l.lat]:[(l.left+l.right)/2,(l.top+l.bottom)/2]}function Rn(t){return t*(Math.PI/180)}function Gn(t){return t/Math.PI*180}function zn(t){var l=t.northing,_=t.easting,B=t.zoneLetter,j=t.zoneNumber;if(j<0||j>60)return null;var ut,Ut,Pt,Vt,ae,re,ye,Te,Ne,X=.9996,tt=.00669438,Et=(1-Math.sqrt(1-tt))/(1+Math.sqrt(1-tt)),Be=_-5e5,Ke=l;B<"N"&&(Ke-=1e7),ye=6*(j-1)-180+3,ut=tt/(1-tt),Ne=(Te=Ke/X/6367449.145945056)+(3*Et/2-27*Et*Et*Et/32)*Math.sin(2*Te)+(21*Et*Et/16-55*Et*Et*Et*Et/32)*Math.sin(4*Te)+151*Et*Et*Et/96*Math.sin(6*Te),Ut=6378137/Math.sqrt(1-tt*Math.sin(Ne)*Math.sin(Ne)),Pt=Math.tan(Ne)*Math.tan(Ne),Vt=ut*Math.cos(Ne)*Math.cos(Ne),ae=6378137*(1-tt)/Math.pow(1-tt*Math.sin(Ne)*Math.sin(Ne),1.5),re=Be/(Ut*X);var pe=Ne-Ut*Math.tan(Ne)/ae*(re*re/2-(5+3*Pt+10*Vt-4*Vt*Vt-9*ut)*re*re*re*re/24+(61+90*Pt+298*Vt+45*Pt*Pt-252*ut-3*Vt*Vt)*re*re*re*re*re*re/720);pe=Gn(pe);var Ce,ke=(re-(1+2*Pt+Vt)*re*re*re/6+(5-2*Vt+28*Pt-3*Vt*Vt+8*ut+24*Pt*Pt)*re*re*re*re*re/120)/Math.cos(Ne);if(ke=ye+Gn(ke),t.accuracy){var Pe=zn({northing:t.northing+t.accuracy,easting:t.easting+t.accuracy,zoneLetter:t.zoneLetter,zoneNumber:t.zoneNumber});Ce={top:Pe.lat,right:Pe.lon,bottom:pe,left:ke}}else Ce={lat:pe,lon:ke};return Ce}function zs(t){var l="Z";return 84>=t&&t>=72?l="X":72>t&&t>=64?l="W":64>t&&t>=56?l="V":56>t&&t>=48?l="U":48>t&&t>=40?l="T":40>t&&t>=32?l="S":32>t&&t>=24?l="R":24>t&&t>=16?l="Q":16>t&&t>=8?l="P":8>t&&t>=0?l="N":0>t&&t>=-8?l="M":-8>t&&t>=-16?l="L":-16>t&&t>=-24?l="K":-24>t&&t>=-32?l="J":-32>t&&t>=-40?l="H":-40>t&&t>=-48?l="G":-48>t&&t>=-56?l="F":-56>t&&t>=-64?l="E":-64>t&&t>=-72?l="D":-72>t&&t>=-80&&(l="C"),l}function cn(t){var l=t%6;return 0===l&&(l=6),l}function On(t){if(t&&0===t.length)throw"MGRSPoint coverting from nothing";for(var j,l=t.length,_=null,B="",X=0;!/[A-Z]/.test(j=t.charAt(X));){if(X>=2)throw"MGRSPoint bad conversion from: "+t;B+=j,X++}var et=parseInt(B,10);if(0===X||X+3>l)throw"MGRSPoint bad conversion from: "+t;var tt=t.charAt(X++);if(tt<="A"||"B"===tt||"Y"===tt||tt>="Z"||"I"===tt||"O"===tt)throw"MGRSPoint zone letter "+tt+" not handled: "+t;_=t.substring(X,X+=2);for(var ut=cn(et),Et=function Yi(t,l){for(var _="AJSAJS".charCodeAt(l-1),B=1e5,j=!1;_!==t.charCodeAt(0);){if(73==++_&&_++,79===_&&_++,_>90){if(j)throw"Bad character: "+t;_=65,j=!0}B+=1e5}return B}(_.charAt(0),ut),Ut=function fs(t,l){if(t>"V")throw"MGRSPoint given invalid Northing "+t;for(var _="AFAFAF".charCodeAt(l-1),B=0,j=!1;_!==t.charCodeAt(0);){if(73==++_&&_++,79===_&&_++,_>86){if(j)throw"Bad character: "+t;_=65,j=!0}B+=1e5}return B}(_.charAt(1),ut);Ut<Hi(tt);)Ut+=2e6;var Pt=l-X;if(Pt%2!=0)throw"MGRSPoint has to have an even number \nof digits after the zone letter and two 100km letters - front \nhalf for easting meters, second half for \nnorthing meters"+t;var oe,ye,Te,Vt=Pt/2,ae=0,re=0;return Vt>0&&(oe=1e5/Math.pow(10,Vt),ye=t.substring(X,X+Vt),ae=parseFloat(ye)*oe,Te=t.substring(X+Vt),re=parseFloat(Te)*oe),{easting:ae+Et,northing:re+Ut,zoneLetter:tt,zoneNumber:et,accuracy:oe}}function Hi(t){var l;switch(t){case"C":l=11e5;break;case"D":l=2e6;break;case"E":l=28e5;break;case"F":l=37e5;break;case"G":l=46e5;break;case"H":l=55e5;break;case"J":l=64e5;break;case"K":l=73e5;break;case"L":l=82e5;break;case"M":l=91e5;break;case"N":l=0;break;case"P":l=8e5;break;case"Q":l=17e5;break;case"R":l=26e5;break;case"S":l=35e5;break;case"T":l=44e5;break;case"U":l=53e5;break;case"V":l=62e5;break;case"W":l=7e6;break;case"X":l=79e5;break;default:l=-1}if(l>=0)return l;throw"Invalid zone letter: "+t}function zi(t,l,_){if(!(this instanceof zi))return new zi(t,l,_);if(Array.isArray(t))this.x=t[0],this.y=t[1],this.z=t[2]||0;else if("object"==typeof t)this.x=t.x,this.y=t.y,this.z=t.z||0;else if("string"==typeof t&&typeof l>"u"){var B=t.split(",");this.x=parseFloat(B[0],10),this.y=parseFloat(B[1],10),this.z=parseFloat(B[2],10)||0}else this.x=t,this.y=l,this.z=_||0;console.warn("proj4.Point will be removed in version 3, use proj4.toPoint")}zi.fromMGRS=function(t){return new zi(Cn(t))},zi.prototype.toMGRS=function(t){return Pn([this.x,this.y],t)};const Xn=zi;var _s=.01953125,Ki=.01068115234375;function Jn(t){var l=[];l[0]=1-t*(.25+t*(.046875+t*(_s+t*Ki))),l[1]=t*(.75-t*(.046875+t*(_s+t*Ki)));var _=t*t;return l[2]=_*(.46875-t*(.013020833333333334+.007120768229166667*t)),l[3]=(_*=t)*(.3645833333333333-.005696614583333333*t),l[4]=_*t*.3076171875,l}function Ti(t,l,_,B){return B[0]*t-(_*=l)*(B[1]+(l*=l)*(B[2]+l*(B[3]+l*B[4])))}function Qn(t,l,_){for(var B=1/(1-l),j=t,X=20;X;--X){var et=Math.sin(j),tt=1-l*et*et;if(j-=tt=(Ti(j,et,Math.cos(j),_)-t)*(tt*Math.sqrt(tt))*B,Math.abs(tt)<n)return j}return j}const en={init:function ks(){this.x0=void 0!==this.x0?this.x0:0,this.y0=void 0!==this.y0?this.y0:0,this.long0=void 0!==this.long0?this.long0:0,this.lat0=void 0!==this.lat0?this.lat0:0,this.es&&(this.en=Jn(this.es),this.ml0=Ti(this.lat0,Math.sin(this.lat0),Math.cos(this.lat0),this.en))},forward:function Xs(t){var j,X,et,_=t.y,B=Wt(t.x-this.long0),tt=Math.sin(_),ut=Math.cos(_);if(this.es){var Ut=ut*B,Pt=Math.pow(Ut,2),Vt=this.ep2*Math.pow(ut,2),ae=Math.pow(Vt,2),re=Math.abs(ut)>n?Math.tan(_):0,oe=Math.pow(re,2),ye=Math.pow(oe,2);j=1-this.es*Math.pow(tt,2),Ut/=Math.sqrt(j);var Te=Ti(_,tt,ut,this.en);X=this.a*(this.k0*Ut*(1+Pt/6*(1-oe+Vt+Pt/20*(5-18*oe+ye+14*Vt-58*oe*Vt+Pt/42*(61+179*ye-ye*oe-479*oe)))))+this.x0,et=this.a*(this.k0*(Te-this.ml0+tt*B*Ut/2*(1+Pt/12*(5-oe+9*Vt+4*ae+Pt/30*(61+ye-58*oe+270*Vt-330*oe*Vt+Pt/56*(1385+543*ye-ye*oe-3111*oe))))))+this.y0}else{var Et=ut*Math.sin(B);if(Math.abs(Math.abs(Et)-1)<n)return 93;if(X=.5*this.a*this.k0*Math.log((1+Et)/(1-Et))+this.x0,et=ut*Math.cos(B)/Math.sqrt(1-Math.pow(Et,2)),(Et=Math.abs(et))>=1){if(Et-1>n)return 93;et=0}else et=Math.acos(et);_<0&&(et=-et),et=this.a*this.k0*(et-this.lat0)+this.y0}return t.x=X,t.y=et,t},inverse:function Sn(t){var l,_,B,j,X=1/this.a*(t.x-this.x0),et=1/this.a*(t.y-this.y0);if(this.es)if(_=Qn(l=this.ml0+et/this.k0,this.es,this.en),Math.abs(_)<u){var Pt=Math.sin(_),Vt=Math.cos(_),ae=Math.abs(Vt)>n?Math.tan(_):0,re=this.ep2*Math.pow(Vt,2),oe=Math.pow(re,2),ye=Math.pow(ae,2),Te=Math.pow(ye,2);l=1-this.es*Math.pow(Pt,2);var Ne=X*Math.sqrt(l)/this.k0,Be=Math.pow(Ne,2);B=_-(l*=ae)*Be/(1-this.es)*.5*(1-Be/12*(5+3*ye-9*re*ye+re-4*oe-Be/30*(61+90*ye-252*re*ye+45*Te+46*re-Be/56*(1385+3633*ye+4095*Te+1574*Te*ye)))),j=Wt(this.long0+Ne*(1-Be/6*(1+2*ye+re-Be/20*(5+28*ye+24*Te+8*re*ye+6*re-Be/42*(61+662*ye+1320*Te+720*Te*ye))))/Vt)}else B=u*jt(et),j=0;else{var tt=Math.exp(X/this.k0),ut=.5*(tt-1/tt),Ut=Math.cos(this.lat0+et/this.k0);l=Math.sqrt((1-Math.pow(Ut,2))/(1+Math.pow(ut,2))),B=Math.asin(l),et<0&&(B=-B),j=0===ut&&0===Ut?0:Wt(Math.atan2(ut,Ut)+this.long0)}return t.x=j,t.y=B,t},names:["Fast_Transverse_Mercator","Fast Transverse Mercator"]};function dn(t){var l=Math.exp(t);return(l-1/l)/2}function wi(t,l){t=Math.abs(t),l=Math.abs(l);var _=Math.max(t,l),B=Math.min(t,l)/(_||1);return _*Math.sqrt(1+Math.pow(B,2))}function qn(t,l){for(var et,_=2*Math.cos(2*l),B=t.length-1,j=t[B],X=0;--B>=0;)et=_*j-X+t[B],X=j,j=et;return l+et*Math.sin(2*l)}function at(t,l,_){for(var re,oe,B=Math.sin(l),j=Math.cos(l),X=dn(_),et=function Kt(t){var l=Math.exp(t);return(l+1/l)/2}(_),tt=2*j*et,ut=-2*B*X,Et=t.length-1,Ut=t[Et],Pt=0,Vt=0,ae=0;--Et>=0;)re=Vt,oe=Pt,Ut=tt*(Vt=Ut)-re-ut*(Pt=ae)+t[Et],ae=ut*Vt-oe+tt*Pt;return[(tt=B*et)*Ut-(ut=j*X)*ae,tt*ae+ut*Ut]}const ee={init:function ft(){if(!this.approx&&(isNaN(this.es)||this.es<=0))throw new Error('Incorrect elliptical usage. Try using the +approx option in the proj string, or PROJECTION["Fast_Transverse_Mercator"] in the WKT.');this.approx&&(en.init.apply(this),this.forward=en.forward,this.inverse=en.inverse),this.x0=void 0!==this.x0?this.x0:0,this.y0=void 0!==this.y0?this.y0:0,this.long0=void 0!==this.long0?this.long0:0,this.lat0=void 0!==this.lat0?this.lat0:0,this.cgb=[],this.cbg=[],this.utg=[],this.gtu=[];var t=this.es/(1+Math.sqrt(1-this.es)),l=t/(2-t),_=l;this.cgb[0]=l*(2+l*(-2/3+l*(l*(116/45+l*(26/45+l*(-2854/675)))-2))),this.cbg[0]=l*(l*(2/3+l*(4/3+l*(-82/45+l*(32/45+l*(4642/4725)))))-2),this.cgb[1]=(_*=l)*(7/3+l*(l*(-227/45+l*(2704/315+l*(2323/945)))-1.6)),this.cbg[1]=_*(5/3+l*(-16/15+l*(-13/9+l*(904/315+l*(-1522/945))))),this.cgb[2]=(_*=l)*(56/15+l*(-136/35+l*(-1262/105+l*(73814/2835)))),this.cbg[2]=_*(-26/15+l*(34/21+l*(1.6+l*(-12686/2835)))),this.cgb[3]=(_*=l)*(4279/630+l*(-332/35+l*(-399572/14175))),this.cbg[3]=_*(1237/630+l*(l*(-24832/14175)-2.4)),this.cgb[4]=(_*=l)*(4174/315+l*(-144838/6237)),this.cbg[4]=_*(-734/315+l*(109598/31185)),this.cgb[5]=(_*=l)*(601676/22275),this.cbg[5]=_*(444337/155925),_=Math.pow(l,2),this.Qn=this.k0/(1+l)*(1+_*(1/4+_*(1/64+_/256))),this.utg[0]=l*(l*(2/3+l*(-37/96+l*(1/360+l*(81/512+l*(-96199/604800)))))-.5),this.gtu[0]=l*(.5+l*(-2/3+l*(5/16+l*(41/180+l*(-127/288+l*(7891/37800)))))),this.utg[1]=_*(-1/48+l*(-1/15+l*(437/1440+l*(-46/105+l*(1118711/3870720))))),this.gtu[1]=_*(13/48+l*(l*(557/1440+l*(281/630+l*(-1983433/1935360)))-.6)),this.utg[2]=(_*=l)*(-17/480+l*(37/840+l*(209/4480+l*(-5569/90720)))),this.gtu[2]=_*(61/240+l*(-103/140+l*(15061/26880+l*(167603/181440)))),this.utg[3]=(_*=l)*(-4397/161280+l*(11/504+l*(830251/7257600))),this.gtu[3]=_*(49561/161280+l*(-179/168+l*(6601661/7257600))),this.utg[4]=(_*=l)*(-4583/161280+l*(108847/3991680)),this.gtu[4]=_*(34729/80640+l*(-3418889/1995840)),this.utg[5]=(_*=l)*(-20648693/638668800),this.gtu[5]=.6650675310896665*_;var B=qn(this.cbg,this.lat0);this.Zb=-this.Qn*(B+function Ys(t,l){for(var et,_=2*Math.cos(l),B=t.length-1,j=t[B],X=0;--B>=0;)et=_*j-X+t[B],X=j,j=et;return Math.sin(l)*et}(this.gtu,2*B))},forward:function yt(t){var l=Wt(t.x-this.long0),_=t.y;_=qn(this.cbg,_);var B=Math.sin(_),j=Math.cos(_),X=Math.sin(l),et=Math.cos(l);_=Math.atan2(B,et*j),l=Math.atan2(X*j,wi(B,j*et)),l=function Vs(t){var l=Math.abs(t);return l=function Es(t){var l=1+t,_=l-1;return 0===_?t:t*Math.log(l)/_}(l*(1+l/(wi(1,l)+1))),t<0?-l:l}(Math.tan(l));var ut,Et,tt=at(this.gtu,2*_,2*l);return _+=tt[0],l+=tt[1],Math.abs(l)<=2.623395162778?(ut=this.a*(this.Qn*l)+this.x0,Et=this.a*(this.Qn*_+this.Zb)+this.y0):(ut=1/0,Et=1/0),t.x=ut,t.y=Et,t},inverse:function wt(t){var B,j,l=1/this.a*(t.x-this.x0),_=1/this.a*(t.y-this.y0);if(_=(_-this.Zb)/this.Qn,l/=this.Qn,Math.abs(l)<=2.623395162778){var X=at(this.utg,2*_,2*l);_+=X[0],l+=X[1],l=Math.atan(dn(l));var et=Math.sin(_),tt=Math.cos(_),ut=Math.sin(l),Et=Math.cos(l);_=Math.atan2(et*Et,wi(ut,Et*tt)),B=Wt((l=Math.atan2(ut,Et*tt))+this.long0),j=qn(this.cgb,_)}else B=1/0,j=1/0;return t.x=B,t.y=j,t},names:["Extended_Transverse_Mercator","Extended Transverse Mercator","etmerc","Transverse_Mercator","Transverse Mercator","tmerc"]},He={init:function Oe(){var t=function ve(t,l){if(void 0===t){if((t=Math.floor(30*(Wt(l)+Math.PI)/Math.PI)+1)<0)return 0;if(t>60)return 60}return t}(this.zone,this.long0);if(void 0===t)throw new Error("unknown utm zone");this.lat0=0,this.long0=(6*Math.abs(t)-183)*h,this.x0=5e5,this.y0=this.utmSouth?1e7:0,this.k0=.9996,ee.init.apply(this),this.forward=ee.forward,this.inverse=ee.inverse},names:["Universal Transverse Mercator System","utm"],dependsOn:"etmerc"};function ti(t,l){return Math.pow((1-t)/(1+t),l)}const Pi={init:function li(){var t=Math.sin(this.lat0),l=Math.cos(this.lat0);l*=l,this.rc=Math.sqrt(1-this.es)/(1-this.es*t*t),this.C=Math.sqrt(1+this.es*l*l/(1-this.es)),this.phic0=Math.asin(t/this.C),this.ratexp=.5*this.C*this.e,this.K=Math.tan(.5*this.phic0+e)/(Math.pow(Math.tan(.5*this.lat0+e),this.C)*ti(this.e*t,this.ratexp))},forward:function pi(t){var l=t.x,_=t.y;return t.y=2*Math.atan(this.K*Math.pow(Math.tan(.5*_+e),this.C)*ti(this.e*Math.sin(_),this.ratexp))-u,t.x=this.C*l,t},inverse:function ci(t){for(var _=t.x/this.C,B=t.y,j=Math.pow(Math.tan(.5*B+e)/this.K,1/this.C),X=20;X>0&&(B=2*Math.atan(j*ti(this.e*Math.sin(t.y),-.5*this.e))-u,!(Math.abs(B-t.y)<1e-14));--X)t.y=B;return X?(t.x=_,t.y=B,t):null},names:["gauss"]},Fi={init:function fi(){Pi.init.apply(this),this.rc&&(this.sinc0=Math.sin(this.phic0),this.cosc0=Math.cos(this.phic0),this.R2=2*this.rc,this.title||(this.title="Oblique Stereographic Alternative"))},forward:function Ii(t){var l,_,B,j;return t.x=Wt(t.x-this.long0),Pi.forward.apply(this,[t]),l=Math.sin(t.y),_=Math.cos(t.y),B=Math.cos(t.x),t.x=(j=this.k0*this.R2/(1+this.sinc0*l+this.cosc0*_*B))*_*Math.sin(t.x),t.y=j*(this.cosc0*l-this.sinc0*_*B),t.x=this.a*t.x+this.x0,t.y=this.a*t.y+this.y0,t},inverse:function Di(t){var l,_,B,j,X;if(t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,t.x/=this.k0,t.y/=this.k0,X=Math.sqrt(t.x*t.x+t.y*t.y)){var et=2*Math.atan2(X,this.R2);l=Math.sin(et),_=Math.cos(et),j=Math.asin(_*this.sinc0+t.y*l*this.cosc0/X),B=Math.atan2(t.x*l,X*this.cosc0*_-t.y*this.sinc0*l)}else j=this.phic0,B=0;return t.x=B,t.y=j,Pi.inverse.apply(this,[t]),t.x=Wt(t.x+this.long0),t},names:["Stereographic_North_Pole","Oblique_Stereographic","Polar_Stereographic","sterea","Oblique Stereographic Alternative","Double_Stereographic"]},es={init:function ts(){this.coslat0=Math.cos(this.lat0),this.sinlat0=Math.sin(this.lat0),this.sphere?1===this.k0&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=n&&(this.k0=.5*(1+jt(this.lat0)*Math.sin(this.lat_ts))):(Math.abs(this.coslat0)<=n&&(this.con=this.lat0>0?1:-1),this.cons=Math.sqrt(Math.pow(1+this.e,1+this.e)*Math.pow(1-this.e,1-this.e)),1===this.k0&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=n&&(this.k0=.5*this.cons*Zt(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts))/he(this.e,this.con*this.lat_ts,this.con*Math.sin(this.lat_ts))),this.ms1=Zt(this.e,this.sinlat0,this.coslat0),this.X0=2*Math.atan(this.ssfn_(this.lat0,this.sinlat0,this.e))-u,this.cosX0=Math.cos(this.X0),this.sinX0=Math.sin(this.X0))},forward:function fn(t){var X,et,tt,ut,Et,Ut,l=t.x,_=t.y,B=Math.sin(_),j=Math.cos(_),Pt=Wt(l-this.long0);return Math.abs(Math.abs(l-this.long0)-Math.PI)<=n&&Math.abs(_+this.lat0)<=n?(t.x=NaN,t.y=NaN,t):this.sphere?(X=2*this.k0/(1+this.sinlat0*B+this.coslat0*j*Math.cos(Pt)),t.x=this.a*X*j*Math.sin(Pt)+this.x0,t.y=this.a*X*(this.coslat0*B-this.sinlat0*j*Math.cos(Pt))+this.y0,t):(et=2*Math.atan(this.ssfn_(_,B,this.e))-u,ut=Math.cos(et),tt=Math.sin(et),Math.abs(this.coslat0)<=n?(Et=he(this.e,_*this.con,this.con*B),t.x=this.x0+(Ut=2*this.a*this.k0*Et/this.cons)*Math.sin(l-this.long0),t.y=this.y0-this.con*Ut*Math.cos(l-this.long0),t):(Math.abs(this.sinlat0)<n?(X=2*this.a*this.k0/(1+ut*Math.cos(Pt)),t.y=X*tt):(X=2*this.a*this.k0*this.ms1/(this.cosX0*(1+this.sinX0*tt+this.cosX0*ut*Math.cos(Pt))),t.y=X*(this.cosX0*tt-this.sinX0*ut*Math.cos(Pt))+this.y0),t.x=X*ut*Math.sin(Pt)+this.x0,t))},inverse:function Ms(t){t.x-=this.x0,t.y-=this.y0;var l,_,j,X,et=Math.sqrt(t.x*t.x+t.y*t.y);if(this.sphere){var tt=2*Math.atan(et/(2*this.a*this.k0));return l=this.long0,_=this.lat0,et<=n?(t.x=l,t.y=_,t):(_=Math.asin(Math.cos(tt)*this.sinlat0+t.y*Math.sin(tt)*this.coslat0/et),l=Math.abs(this.coslat0)<n?Wt(this.lat0>0?this.long0+Math.atan2(t.x,-1*t.y):this.long0+Math.atan2(t.x,t.y)):Wt(this.long0+Math.atan2(t.x*Math.sin(tt),et*this.coslat0*Math.cos(tt)-t.y*this.sinlat0*Math.sin(tt))),t.x=l,t.y=_,t)}if(Math.abs(this.coslat0)<=n){if(et<=n)return _=this.lat0,t.x=l=this.long0,t.y=_,t;t.x*=this.con,t.y*=this.con,_=this.con*_e(this.e,et*this.cons/(2*this.a*this.k0)),l=this.con*Wt(this.con*this.long0+Math.atan2(t.x,-1*t.y))}else j=2*Math.atan(et*this.cosX0/(2*this.a*this.k0*this.ms1)),l=this.long0,et<=n?X=this.X0:(X=Math.asin(Math.cos(j)*this.sinX0+t.y*Math.sin(j)*this.cosX0/et),l=Wt(this.long0+Math.atan2(t.x*Math.sin(j),et*this.cosX0*Math.cos(j)-t.y*this.sinX0*Math.sin(j)))),_=-1*_e(this.e,Math.tan(.5*(u+X)));return t.x=l,t.y=_,t},names:["stere","Stereographic_South_Pole","Polar Stereographic (variant B)"],ssfn_:function xs(t,l,_){return l*=_,Math.tan(.5*(u+t))*Math.pow((1-l)/(1+l),.5*_)}},pa={init:function Ps(){var t=this.lat0;this.lambda0=this.long0;var l=Math.sin(t),_=this.a,j=1/this.rf,X=2*j-Math.pow(j,2),et=this.e=Math.sqrt(X);this.R=this.k0*_*Math.sqrt(1-X)/(1-X*Math.pow(l,2)),this.alpha=Math.sqrt(1+X/(1-X)*Math.pow(Math.cos(t),4)),this.b0=Math.asin(l/this.alpha);var tt=Math.log(Math.tan(Math.PI/4+this.b0/2)),ut=Math.log(Math.tan(Math.PI/4+t/2)),Et=Math.log((1+et*l)/(1-et*l));this.K=tt-this.alpha*ut+this.alpha*et/2*Et},forward:function ga(t){var l=Math.log(Math.tan(Math.PI/4-t.y/2)),_=this.e/2*Math.log((1+this.e*Math.sin(t.y))/(1-this.e*Math.sin(t.y))),j=2*(Math.atan(Math.exp(-this.alpha*(l+_)+this.K))-Math.PI/4),X=this.alpha*(t.x-this.lambda0),et=Math.atan(Math.sin(X)/(Math.sin(this.b0)*Math.tan(j)+Math.cos(this.b0)*Math.cos(X))),tt=Math.asin(Math.cos(this.b0)*Math.sin(j)-Math.sin(this.b0)*Math.cos(j)*Math.cos(X));return t.y=this.R/2*Math.log((1+Math.sin(tt))/(1-Math.sin(tt)))+this.y0,t.x=this.R*et+this.x0,t},inverse:function _a(t){for(var B=(t.x-this.x0)/this.R,j=2*(Math.atan(Math.exp((t.y-this.y0)/this.R))-Math.PI/4),X=Math.asin(Math.cos(this.b0)*Math.sin(j)+Math.sin(this.b0)*Math.cos(j)*Math.cos(B)),et=Math.atan(Math.sin(B)/(Math.cos(this.b0)*Math.cos(B)-Math.sin(this.b0)*Math.tan(j))),tt=this.lambda0+et/this.alpha,ut=0,Et=X,Ut=-1e3,Pt=0;Math.abs(Et-Ut)>1e-7;){if(++Pt>20)return;ut=1/this.alpha*(Math.log(Math.tan(Math.PI/4+X/2))-this.K)+this.e*Math.log(Math.tan(Math.PI/4+Math.asin(this.e*Math.sin(Et))/2)),Ut=Et,Et=2*Math.atan(Math.exp(ut))-Math.PI/2}return t.x=tt,t.y=Et,t},names:["somerc"]};var In=1e-7;const Ma={init:function va(){var t,l,_,B,j,X,et,tt,ut,Et,Pt,Ut=0,Vt=0,ae=0,re=0,oe=0,ye=0,Te=0;this.no_off=function An(t){var _="object"==typeof t.PROJECTION?Object.keys(t.PROJECTION)[0]:t.PROJECTION;return"no_uoff"in t||"no_off"in t||-1!==["Hotine_Oblique_Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin"].indexOf(_)}(this),this.no_rot="no_rot"in this;var Be=!1;"alpha"in this&&(Be=!0);var Ke=!1;if("rectified_grid_angle"in this&&(Ke=!0),Be&&(Te=this.alpha),Ke&&(Ut=this.rectified_grid_angle*h),Be||Ke)Vt=this.longc;else if(ae=this.long1,oe=this.lat1,re=this.long2,ye=this.lat2,Math.abs(oe-ye)<=In||(t=Math.abs(oe))<=In||Math.abs(t-u)<=In||Math.abs(Math.abs(this.lat0)-u)<=In||Math.abs(Math.abs(ye)-u)<=In)throw new Error;var pe=1-this.es;l=Math.sqrt(pe),Math.abs(this.lat0)>n?(tt=Math.sin(this.lat0),_=Math.cos(this.lat0),t=1-this.es*tt*tt,this.B=_*_,this.B=Math.sqrt(1+this.es*this.B*this.B/pe),this.A=this.B*this.k0*l/t,(j=(B=this.B*l/(_*Math.sqrt(t)))*B-1)<=0?j=0:(j=Math.sqrt(j),this.lat0<0&&(j=-j)),this.E=j+=B,this.E*=Math.pow(he(this.e,this.lat0,tt),this.B)):(this.B=1/l,this.A=this.k0,this.E=B=j=1),Be||Ke?(Be?(Pt=Math.asin(Math.sin(Te)/B),Ke||(Ut=Te)):(Pt=Ut,Te=Math.asin(B*Math.sin(Pt))),this.lam0=Vt-Math.asin(.5*(j-1/j)*Math.tan(Pt))/this.B):(X=Math.pow(he(this.e,oe,Math.sin(oe)),this.B),et=Math.pow(he(this.e,ye,Math.sin(ye)),this.B),j=this.E/X,ut=(et-X)/(et+X),Et=((Et=this.E*this.E)-et*X)/(Et+et*X),(t=ae-re)<-Math.pi?re-=E:t>Math.pi&&(re+=E),this.lam0=Wt(.5*(ae+re)-Math.atan(Et*Math.tan(.5*this.B*(ae-re))/ut)/this.B),Pt=Math.atan(2*Math.sin(this.B*Wt(ae-this.lam0))/(j-1/j)),Ut=Te=Math.asin(B*Math.sin(Pt))),this.singam=Math.sin(Pt),this.cosgam=Math.cos(Pt),this.sinrot=Math.sin(Ut),this.cosrot=Math.cos(Ut),this.rB=1/this.B,this.ArB=this.A*this.rB,this.BrA=1/this.ArB,this.no_off?this.u_0=0:(this.u_0=Math.abs(this.ArB*Math.atan(Math.sqrt(B*B-1)/Math.cos(Te))),this.lat0<0&&(this.u_0=-this.u_0)),j=.5*Pt,this.v_pole_n=this.ArB*Math.log(Math.tan(e-j)),this.v_pole_s=this.ArB*Math.log(Math.tan(e+j))},forward:function ya(t){var _,B,j,X,et,tt,ut,Et,l={};if(t.x=t.x-this.lam0,Math.abs(Math.abs(t.y)-u)>n){if(_=.5*((et=this.E/Math.pow(he(this.e,t.y,Math.sin(t.y)),this.B))-(tt=1/et)),B=.5*(et+tt),X=Math.sin(this.B*t.x),j=(_*this.singam-X*this.cosgam)/B,Math.abs(Math.abs(j)-1)<n)throw new Error;Et=.5*this.ArB*Math.log((1-j)/(1+j)),tt=Math.cos(this.B*t.x),ut=Math.abs(tt)<In?this.A*t.x:this.ArB*Math.atan2(_*this.cosgam+X*this.singam,tt)}else Et=t.y>0?this.v_pole_n:this.v_pole_s,ut=this.ArB*t.y;return this.no_rot?(l.x=ut,l.y=Et):(l.x=Et*this.cosrot+(ut-=this.u_0)*this.sinrot,l.y=ut*this.cosrot-Et*this.sinrot),l.x=this.a*l.x+this.x0,l.y=this.a*l.y+this.y0,l},inverse:function Ea(t){var l,_,B,j,X,et,tt,ut={};if(t.x=1/this.a*(t.x-this.x0),t.y=1/this.a*(t.y-this.y0),this.no_rot?(_=t.y,l=t.x):(_=t.x*this.cosrot-t.y*this.sinrot,l=t.y*this.cosrot+t.x*this.sinrot+this.u_0),j=.5*((B=Math.exp(-this.BrA*_))-1/B),X=.5*(B+1/B),tt=((et=Math.sin(this.BrA*l))*this.cosgam+j*this.singam)/X,Math.abs(Math.abs(tt)-1)<n)ut.x=0,ut.y=tt<0?-u:u;else{if(ut.y=this.E/Math.sqrt((1+tt)/(1-tt)),ut.y=_e(this.e,Math.pow(ut.y,1/this.B)),ut.y===1/0)throw new Error;ut.x=-this.rB*Math.atan2(j*this.cosgam-et*this.singam,Math.cos(this.BrA*l))}return ut.x+=this.lam0,ut},names:["Hotine_Oblique_Mercator","Hotine Oblique Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin","Hotine_Oblique_Mercator_Two_Point_Natural_Origin","Hotine_Oblique_Mercator_Azimuth_Center","Oblique_Mercator","omerc"]},Ca={init:function Ta(){if(this.lat2||(this.lat2=this.lat1),this.k0||(this.k0=1),this.x0=this.x0||0,this.y0=this.y0||0,!(Math.abs(this.lat1+this.lat2)<n)){var t=this.b/this.a;this.e=Math.sqrt(1-t*t);var l=Math.sin(this.lat1),_=Math.cos(this.lat1),B=Zt(this.e,l,_),j=he(this.e,this.lat1,l),X=Math.sin(this.lat2),et=Math.cos(this.lat2),tt=Zt(this.e,X,et),ut=he(this.e,this.lat2,X),Et=he(this.e,this.lat0,Math.sin(this.lat0));this.ns=Math.abs(this.lat1-this.lat2)>n?Math.log(B/tt)/Math.log(j/ut):l,isNaN(this.ns)&&(this.ns=l),this.f0=B/(this.ns*Math.pow(j,this.ns)),this.rh=this.a*this.f0*Math.pow(Et,this.ns),this.title||(this.title="Lambert Conformal Conic")}},forward:function gn(t){var l=t.x,_=t.y;Math.abs(2*Math.abs(_)-Math.PI)<=n&&(_=jt(_)*(u-2*n));var j,X,B=Math.abs(Math.abs(_)-u);if(B>n)j=he(this.e,_,Math.sin(_)),X=this.a*this.f0*Math.pow(j,this.ns);else{if((B=_*this.ns)<=0)return null;X=0}var et=this.ns*Wt(l-this.long0);return t.x=this.k0*(X*Math.sin(et))+this.x0,t.y=this.k0*(this.rh-X*Math.cos(et))+this.y0,t},inverse:function Pa(t){var l,_,B,j,X,et=(t.x-this.x0)/this.k0,tt=this.rh-(t.y-this.y0)/this.k0;this.ns>0?(l=Math.sqrt(et*et+tt*tt),_=1):(l=-Math.sqrt(et*et+tt*tt),_=-1);var ut=0;if(0!==l&&(ut=Math.atan2(_*et,_*tt)),0!==l||this.ns>0){if(_=1/this.ns,B=Math.pow(l/(this.a*this.f0),_),-9999===(j=_e(this.e,B)))return null}else j=-u;return X=Wt(ut/this.ns+this.long0),t.x=X,t.y=j,t},names:["Lambert Tangential Conformal Conic Projection","Lambert_Conformal_Conic","Lambert_Conformal_Conic_1SP","Lambert_Conformal_Conic_2SP","lcc","Lambert Conic Conformal (1SP)","Lambert Conic Conformal (2SP)"]},Ra={init:function Cr(){this.a=6377397.155,this.es=.006674372230614,this.e=Math.sqrt(this.es),this.lat0||(this.lat0=.863937979737193),this.long0||(this.long0=.4334234309119251),this.k0||(this.k0=.9999),this.s45=.785398163397448,this.s90=2*this.s45,this.fi0=this.lat0,this.e2=this.es,this.e=Math.sqrt(this.e2),this.alfa=Math.sqrt(1+this.e2*Math.pow(Math.cos(this.fi0),4)/(1-this.e2)),this.uq=1.04216856380474,this.u0=Math.asin(Math.sin(this.fi0)/this.alfa),this.g=Math.pow((1+this.e*Math.sin(this.fi0))/(1-this.e*Math.sin(this.fi0)),this.alfa*this.e/2),this.k=Math.tan(this.u0/2+this.s45)/Math.pow(Math.tan(this.fi0/2+this.s45),this.alfa)*this.g,this.k1=this.k0,this.n0=this.a*Math.sqrt(1-this.e2)/(1-this.e2*Math.pow(Math.sin(this.fi0),2)),this.s0=1.37008346281555,this.n=Math.sin(this.s0),this.ro0=this.k1*this.n0/Math.tan(this.s0),this.ad=this.s90-this.uq},forward:function Rr(t){var l,_,B,j,X,et,tt,Et=t.y,Ut=Wt(t.x-this.long0);return l=Math.pow((1+this.e*Math.sin(Et))/(1-this.e*Math.sin(Et)),this.alfa*this.e/2),_=2*(Math.atan(this.k*Math.pow(Math.tan(Et/2+this.s45),this.alfa)/l)-this.s45),B=-Ut*this.alfa,j=Math.asin(Math.cos(this.ad)*Math.sin(_)+Math.sin(this.ad)*Math.cos(_)*Math.cos(B)),X=Math.asin(Math.cos(_)*Math.sin(B)/Math.cos(j)),et=this.n*X,tt=this.ro0*Math.pow(Math.tan(this.s0/2+this.s45),this.n)/Math.pow(Math.tan(j/2+this.s45),this.n),t.y=tt*Math.cos(et)/1,t.x=tt*Math.sin(et)/1,this.czech||(t.y*=-1,t.x*=-1),t},inverse:function Or(t){var l,_,B,j,et,tt,ut,Et=t.x;t.x=t.y,t.y=Et,this.czech||(t.y*=-1,t.x*=-1),et=Math.sqrt(t.x*t.x+t.y*t.y),j=Math.atan2(t.y,t.x)/Math.sin(this.s0),B=2*(Math.atan(Math.pow(this.ro0/et,1/this.n)*Math.tan(this.s0/2+this.s45))-this.s45),l=Math.asin(Math.cos(this.ad)*Math.sin(B)-Math.sin(this.ad)*Math.cos(B)*Math.cos(j)),_=Math.asin(Math.cos(B)*Math.sin(j)/Math.cos(l)),t.x=this.long0-_/this.alfa,tt=l,ut=0;var Ut=0;do{t.y=2*(Math.atan(Math.pow(this.k,-1/this.alfa)*Math.pow(Math.tan(l/2+this.s45),1/this.alfa)*Math.pow((1+this.e*Math.sin(tt))/(1-this.e*Math.sin(tt)),this.e/2))-this.s45),Math.abs(tt-t.y)<1e-10&&(ut=1),tt=t.y,Ut+=1}while(0===ut&&Ut<15);return Ut>=15?null:t},names:["Krovak","krovak"]};function di(t,l,_,B,j){return t*j-l*Math.sin(2*j)+_*Math.sin(4*j)-B*Math.sin(6*j)}function bn(t){return 1-.25*t*(1+t/16*(3+1.25*t))}function mn(t){return.375*t*(1+.25*t*(1+.46875*t))}function ki(t){return.05859375*t*t*(1+.75*t)}function is(t){return t*t*t*(35/3072)}function Ln(t,l,_){var B=l*_;return t/Math.sqrt(1-B*B)}function wn(t){return Math.abs(t)<u?t:t-jt(t)*Math.PI}function ns(t,l,_,B,j){var X,et;X=t/l;for(var tt=0;tt<15;tt++)if(X+=et=(t-(l*X-_*Math.sin(2*X)+B*Math.sin(4*X)-j*Math.sin(6*X)))/(l-2*_*Math.cos(2*X)+4*B*Math.cos(4*X)-6*j*Math.cos(6*X)),Math.abs(et)<=1e-10)return X;return NaN}const ss={init:function Js(){this.sphere||(this.e0=bn(this.es),this.e1=mn(this.es),this.e2=ki(this.es),this.e3=is(this.es),this.ml0=this.a*di(this.e0,this.e1,this.e2,this.e3,this.lat0))},forward:function Oa(t){var l,_,B=t.x,j=t.y;if(B=Wt(B-this.long0),this.sphere)l=this.a*Math.asin(Math.cos(j)*Math.sin(B)),_=this.a*(Math.atan2(Math.tan(j),Math.cos(B))-this.lat0);else{var X=Math.sin(j),et=Math.cos(j),tt=Ln(this.a,this.e,X),ut=Math.tan(j)*Math.tan(j),Et=B*Math.cos(j),Ut=Et*Et,Pt=this.es*et*et/(1-this.es);l=tt*Et*(1-Ut*ut*(1/6-(8-ut+8*Pt)*Ut/120)),_=this.a*di(this.e0,this.e1,this.e2,this.e3,j)-this.ml0+tt*X/et*Ut*(.5+(5-ut+6*Pt)*Ut/24)}return t.x=l+this.x0,t.y=_+this.y0,t},inverse:function Qs(t){t.x-=this.x0,t.y-=this.y0;var B,j,l=t.x/this.a,_=t.y/this.a;if(this.sphere){var X=_+this.lat0;B=Math.asin(Math.sin(X)*Math.cos(l)),j=Math.atan2(Math.tan(l),Math.cos(X))}else{var tt=ns(this.ml0/this.a+_,this.e0,this.e1,this.e2,this.e3);if(Math.abs(Math.abs(tt)-u)<=n)return t.x=this.long0,t.y=u,_<0&&(t.y*=-1),t;var ut=Ln(this.a,this.e,Math.sin(tt)),Et=ut*ut*ut/this.a/this.a*(1-this.es),Ut=Math.pow(Math.tan(tt),2),Pt=l*this.a/ut,Vt=Pt*Pt;B=tt-ut*Math.tan(tt)/Et*Pt*Pt*(.5-(1+3*Ut)*Pt*Pt/24),j=Pt*(1-Vt*(Ut/3+(1+3*Ut)*Ut*Vt/15))/Math.cos(tt)}return t.x=Wt(j+this.long0),t.y=wn(B),t},names:["Cassini","Cassini_Soldner","cass"]};function nn(t,l){var _;return t>1e-7?(1-t*t)*(l/(1-(_=t*l)*_)-.5/t*Math.log((1-_)/(1+_))):2*l}const Lr={init:function $s(){var l,t=Math.abs(this.lat0);if(this.mode=Math.abs(t-u)<n?this.lat0<0?this.S_POLE:this.N_POLE:Math.abs(t)<n?this.EQUIT:this.OBLIQ,this.es>0)switch(this.qp=nn(this.e,1),this.mmf=.5/(1-this.es),this.apa=function Da(t){var l,_=[];return _[0]=.3333333333333333*t,_[0]+=.17222222222222222*(l=t*t),_[1]=.06388888888888888*l,_[0]+=.10257936507936508*(l*=t),_[1]+=.0664021164021164*l,_[2]=.016415012942191543*l,_}(this.es),this.mode){case this.N_POLE:case this.S_POLE:this.dd=1;break;case this.EQUIT:this.rq=Math.sqrt(.5*this.qp),this.dd=1/this.rq,this.xmf=1,this.ymf=.5*this.qp;break;case this.OBLIQ:this.rq=Math.sqrt(.5*this.qp),l=Math.sin(this.lat0),this.sinb1=nn(this.e,l)/this.qp,this.cosb1=Math.sqrt(1-this.sinb1*this.sinb1),this.dd=Math.cos(this.lat0)/(Math.sqrt(1-this.es*l*l)*this.rq*this.cosb1),this.ymf=(this.xmf=this.rq)/this.dd,this.xmf*=this.dd}else this.mode===this.OBLIQ&&(this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0))},forward:function Sr(t){var l,_,B,j,X,et,tt,ut,Et,Ut,Pt=t.x,Vt=t.y;if(Pt=Wt(Pt-this.long0),this.sphere){if(X=Math.sin(Vt),Ut=Math.cos(Vt),B=Math.cos(Pt),this.mode===this.OBLIQ||this.mode===this.EQUIT){if((_=this.mode===this.EQUIT?1+Ut*B:1+this.sinph0*X+this.cosph0*Ut*B)<=n)return null;l=(_=Math.sqrt(2/_))*Ut*Math.sin(Pt),_*=this.mode===this.EQUIT?X:this.cosph0*X-this.sinph0*Ut*B}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(B=-B),Math.abs(Vt+this.lat0)<n)return null;_=e-.5*Vt,l=(_=2*(this.mode===this.S_POLE?Math.cos(_):Math.sin(_)))*Math.sin(Pt),_*=B}}else{switch(tt=0,ut=0,Et=0,B=Math.cos(Pt),j=Math.sin(Pt),X=Math.sin(Vt),et=nn(this.e,X),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(tt=et/this.qp,ut=Math.sqrt(1-tt*tt)),this.mode){case this.OBLIQ:Et=1+this.sinb1*tt+this.cosb1*ut*B;break;case this.EQUIT:Et=1+ut*B;break;case this.N_POLE:Et=u+Vt,et=this.qp-et;break;case this.S_POLE:Et=Vt-u,et=this.qp+et}if(Math.abs(Et)<n)return null;switch(this.mode){case this.OBLIQ:case this.EQUIT:Et=Math.sqrt(2/Et),_=this.mode===this.OBLIQ?this.ymf*Et*(this.cosb1*tt-this.sinb1*ut*B):(Et=Math.sqrt(2/(1+ut*B)))*tt*this.ymf,l=this.xmf*Et*ut*j;break;case this.N_POLE:case this.S_POLE:et>=0?(l=(Et=Math.sqrt(et))*j,_=B*(this.mode===this.S_POLE?Et:-Et)):l=_=0}}return t.x=this.a*l+this.x0,t.y=this.a*_+this.y0,t},inverse:function Ir(t){t.x-=this.x0,t.y-=this.y0;var B,j,X,et,tt,ut,Et,l=t.x/this.a,_=t.y/this.a;if(this.sphere){var Pt,Ut=0,Vt=0;if((j=.5*(Pt=Math.sqrt(l*l+_*_)))>1)return null;switch(j=2*Math.asin(j),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(Vt=Math.sin(j),Ut=Math.cos(j)),this.mode){case this.EQUIT:j=Math.abs(Pt)<=n?0:Math.asin(_*Vt/Pt),l*=Vt,_=Ut*Pt;break;case this.OBLIQ:j=Math.abs(Pt)<=n?this.lat0:Math.asin(Ut*this.sinph0+_*Vt*this.cosph0/Pt),l*=Vt*this.cosph0,_=(Ut-Math.sin(j)*this.sinph0)*Pt;break;case this.N_POLE:_=-_,j=u-j;break;case this.S_POLE:j-=u}B=0!==_||this.mode!==this.EQUIT&&this.mode!==this.OBLIQ?Math.atan2(l,_):0}else{if(Et=0,this.mode===this.OBLIQ||this.mode===this.EQUIT){if(l/=this.dd,_*=this.dd,(ut=Math.sqrt(l*l+_*_))<n)return t.x=this.long0,t.y=this.lat0,t;et=2*Math.asin(.5*ut/this.rq),X=Math.cos(et),l*=et=Math.sin(et),this.mode===this.OBLIQ?(tt=this.qp*(Et=X*this.sinb1+_*et*this.cosb1/ut),_=ut*this.cosb1*X-_*this.sinb1*et):(tt=this.qp*(Et=_*et/ut),_=ut*X)}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(_=-_),!(tt=l*l+_*_))return t.x=this.long0,t.y=this.lat0,t;Et=1-tt/this.qp,this.mode===this.S_POLE&&(Et=-Et)}B=Math.atan2(l,_),j=function Fa(t,l){var _=t+t;return t+l[0]*Math.sin(_)+l[1]*Math.sin(_+_)+l[2]*Math.sin(_+_+_)}(Math.asin(Et),this.apa)}return t.x=Wt(this.long0+B),t.y=j,t},names:["Lambert Azimuthal Equal Area","Lambert_Azimuthal_Equal_Area","laea"],S_POLE:1,N_POLE:2,EQUIT:3,OBLIQ:4};function Wi(t){return Math.abs(t)>1&&(t=t>1?1:-1),Math.asin(t)}const Ua={init:function qs(){Math.abs(this.lat1+this.lat2)<n||(this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e3=Math.sqrt(this.es),this.sin_po=Math.sin(this.lat1),this.cos_po=Math.cos(this.lat1),this.t1=this.sin_po,this.con=this.sin_po,this.ms1=Zt(this.e3,this.sin_po,this.cos_po),this.qs1=nn(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat2),this.cos_po=Math.cos(this.lat2),this.t2=this.sin_po,this.ms2=Zt(this.e3,this.sin_po,this.cos_po),this.qs2=nn(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat0),this.cos_po=Math.cos(this.lat0),this.t3=this.sin_po,this.qs0=nn(this.e3,this.sin_po),this.ns0=Math.abs(this.lat1-this.lat2)>n?(this.ms1*this.ms1-this.ms2*this.ms2)/(this.qs2-this.qs1):this.con,this.c=this.ms1*this.ms1+this.ns0*this.qs1,this.rh=this.a*Math.sqrt(this.c-this.ns0*this.qs0)/this.ns0)},forward:function Za(t){var l=t.x,_=t.y;this.sin_phi=Math.sin(_),this.cos_phi=Math.cos(_);var B=nn(this.e3,this.sin_phi),j=this.a*Math.sqrt(this.c-this.ns0*B)/this.ns0,X=this.ns0*Wt(l-this.long0),et=j*Math.sin(X)+this.x0,tt=this.rh-j*Math.cos(X)+this.y0;return t.x=et,t.y=tt,t},inverse:function wr(t){var l,B,j,X,et;return t.x-=this.x0,t.y=this.rh-t.y+this.y0,this.ns0>=0?(l=Math.sqrt(t.x*t.x+t.y*t.y),B=1):(l=-Math.sqrt(t.x*t.x+t.y*t.y),B=-1),j=0,0!==l&&(j=Math.atan2(B*t.x,B*t.y)),B=l*this.ns0/this.a,et=this.sphere?Math.asin((this.c-B*B)/(2*this.ns0)):this.phi1z(this.e3,(this.c-B*B)/this.ns0),X=Wt(j/this.ns0+this.long0),t.x=X,t.y=et,t},names:["Albers_Conic_Equal_Area","Albers","aea"],phi1z:function Dr(t,l){var _,j,X,et,tt=Wi(.5*l);if(t<n)return tt;for(var ut=t*t,Et=1;Et<=25;Et++)if(tt+=et=.5*(X=1-(j=t*(_=Math.sin(tt)))*j)*X/Math.cos(tt)*(l/(1-ut)-_/X+.5/t*Math.log((1-j)/(1+j))),Math.abs(et)<=1e-7)return tt;return null}},Nr={init:function ja(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0),this.infinity_dist=1e3*this.a,this.rc=1},forward:function Ba(t){var l,_,B,j,et,tt,ut,Ut=t.y;return B=Wt(t.x-this.long0),l=Math.sin(Ut),_=Math.cos(Ut),j=Math.cos(B),(et=this.sin_p14*l+this.cos_p14*_*j)>0||Math.abs(et)<=n?(tt=this.x0+1*this.a*_*Math.sin(B)/et,ut=this.y0+1*this.a*(this.cos_p14*l-this.sin_p14*_*j)/et):(tt=this.x0+this.infinity_dist*_*Math.sin(B),ut=this.y0+this.infinity_dist*(this.cos_p14*l-this.sin_p14*_*j)),t.x=tt,t.y=ut,t},inverse:function Fr(t){var l,_,B,j,X,et;return t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,t.x/=this.k0,t.y/=this.k0,(l=Math.sqrt(t.x*t.x+t.y*t.y))?(j=Math.atan2(l,this.rc),_=Math.sin(j),et=Wi((B=Math.cos(j))*this.sin_p14+t.y*_*this.cos_p14/l),X=Math.atan2(t.x*_,l*this.cos_p14*B-t.y*this.sin_p14*_),X=Wt(this.long0+X)):(et=this.phic0,X=0),t.x=X,t.y=et,t},names:["gnom"]},Ss={init:function tr(){this.sphere||(this.k0=Zt(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)))},forward:function Ur(t){var B,j,_=t.y,X=Wt(t.x-this.long0);if(this.sphere)B=this.x0+this.a*X*Math.cos(this.lat_ts),j=this.y0+this.a*Math.sin(_)/Math.cos(this.lat_ts);else{var et=nn(this.e,Math.sin(_));B=this.x0+this.a*this.k0*X,j=this.y0+this.a*et*.5/this.k0}return t.x=B,t.y=j,t},inverse:function er(t){var l,_;return t.x-=this.x0,t.y-=this.y0,this.sphere?(l=Wt(this.long0+t.x/this.a/Math.cos(this.lat_ts)),_=Math.asin(t.y/this.a*Math.cos(this.lat_ts))):(_=function Zr(t,l){var _=1-(1-t*t)/(2*t)*Math.log((1-t)/(1+t));if(Math.abs(Math.abs(l)-_)<1e-6)return l<0?-1*u:u;for(var j,X,et,tt,B=Math.asin(.5*l),ut=0;ut<30;ut++)if(X=Math.sin(B),et=Math.cos(B),tt=t*X,B+=j=Math.pow(1-tt*tt,2)/(2*et)*(l/(1-t*t)-X/(1-tt*tt)+.5/t*Math.log((1-tt)/(1+tt))),Math.abs(j)<=1e-10)return B;return NaN}(this.e,2*t.y*this.k0/this.a),l=Wt(this.long0+t.x/(this.a*this.k0))),t.x=l,t.y=_,t},names:["cea"]},ir={init:function Is(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Equidistant Cylindrical (Plate Carre)",this.rc=Math.cos(this.lat_ts)},forward:function jr(t){var _=t.y,B=Wt(t.x-this.long0),j=wn(_-this.lat0);return t.x=this.x0+this.a*B*this.rc,t.y=this.y0+this.a*j,t},inverse:function Ga(t){var _=t.y;return t.x=Wt(this.long0+(t.x-this.x0)/(this.a*this.rc)),t.y=wn(this.lat0+(_-this.y0)/this.a),t},names:["Equirectangular","Equidistant_Cylindrical","eqc"]},Fn={init:function sr(){this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=bn(this.es),this.e1=mn(this.es),this.e2=ki(this.es),this.e3=is(this.es),this.ml0=this.a*di(this.e0,this.e1,this.e2,this.e3,this.lat0)},forward:function Xi(t){var B,j,X,_=t.y,et=Wt(t.x-this.long0);if(X=et*Math.sin(_),this.sphere)Math.abs(_)<=n?(B=this.a*et,j=-1*this.a*this.lat0):(B=this.a*Math.sin(X)/Math.tan(_),j=this.a*(wn(_-this.lat0)+(1-Math.cos(X))/Math.tan(_)));else if(Math.abs(_)<=n)B=this.a*et,j=-1*this.ml0;else{var tt=Ln(this.a,this.e,Math.sin(_))/Math.tan(_);B=tt*Math.sin(X),j=this.a*di(this.e0,this.e1,this.e2,this.e3,_)-this.ml0+tt*(1-Math.cos(X))}return t.x=B+this.x0,t.y=j+this.y0,t},inverse:function Br(t){var l,_,B,j,X,et,tt,ut,Et;if(B=t.x-this.x0,j=t.y-this.y0,this.sphere)if(Math.abs(j+this.a*this.lat0)<=n)l=Wt(B/this.a+this.long0),_=0;else{var Ut;for(tt=B*B/this.a/this.a+(et=this.lat0+j/this.a)*et,ut=et,X=20;X;--X)if(ut+=Et=-1*(et*(ut*(Ut=Math.tan(ut))+1)-ut-.5*(ut*ut+tt)*Ut)/((ut-et)/Ut-1),Math.abs(Et)<=n){_=ut;break}l=Wt(this.long0+Math.asin(B*Math.tan(ut)/this.a)/Math.sin(_))}else if(Math.abs(j+this.ml0)<=n)_=0,l=Wt(this.long0+B/this.a);else{var Pt,Vt,ae,re,oe;for(tt=B*B/this.a/this.a+(et=(this.ml0+j)/this.a)*et,ut=et,X=20;X;--X)if(oe=this.e*Math.sin(ut),Pt=Math.sqrt(1-oe*oe)*Math.tan(ut),Vt=this.a*di(this.e0,this.e1,this.e2,this.e3,ut),ae=this.e0-2*this.e1*Math.cos(2*ut)+4*this.e2*Math.cos(4*ut)-6*this.e3*Math.cos(6*ut),ut-=Et=(et*(Pt*(re=Vt/this.a)+1)-re-.5*Pt*(re*re+tt))/(this.es*Math.sin(2*ut)*(re*re+tt-2*et*re)/(4*Pt)+(et-re)*(Pt*ae-2/Math.sin(2*ut))-ae),Math.abs(Et)<=n){_=ut;break}Pt=Math.sqrt(1-this.es*Math.pow(Math.sin(_),2))*Math.tan(_),l=Wt(this.long0+Math.asin(B*Pt/this.a)/Math.sin(_))}return t.x=l,t.y=_,t},names:["Polyconic","poly"]},Ka={init:function or(){this.A=[],this.A[1]=.6399175073,this.A[2]=-.1358797613,this.A[3]=.063294409,this.A[4]=-.02526853,this.A[5]=.0117879,this.A[6]=-.0055161,this.A[7]=.0026906,this.A[8]=-.001333,this.A[9]=67e-5,this.A[10]=-34e-5,this.B_re=[],this.B_im=[],this.B_re[1]=.7557853228,this.B_im[1]=0,this.B_re[2]=.249204646,this.B_im[2]=.003371507,this.B_re[3]=-.001541739,this.B_im[3]=.04105856,this.B_re[4]=-.10162907,this.B_im[4]=.01727609,this.B_re[5]=-.26623489,this.B_im[5]=-.36249218,this.B_re[6]=-.6870983,this.B_im[6]=-1.1651967,this.C_re=[],this.C_im=[],this.C_re[1]=1.3231270439,this.C_im[1]=0,this.C_re[2]=-.577245789,this.C_im[2]=-.007809598,this.C_re[3]=.508307513,this.C_im[3]=-.112208952,this.C_re[4]=-.15094762,this.C_im[4]=.18200602,this.C_re[5]=1.01418179,this.C_im[5]=1.64497696,this.C_re[6]=1.9660549,this.C_im[6]=2.5127645,this.D=[],this.D[1]=1.5627014243,this.D[2]=.5185406398,this.D[3]=-.03333098,this.D[4]=-.1052906,this.D[5]=-.0368594,this.D[6]=.007317,this.D[7]=.0122,this.D[8]=.00394,this.D[9]=-.0013},forward:function Wr(t){var l,et=(t.y-this.lat0)/d*1e-5,tt=t.x-this.long0,ut=1,Et=0;for(l=1;l<=10;l++)Et+=this.A[l]*(ut*=et);var oe,Ut=Et,Pt=tt,Vt=1,ae=0,ye=0,Te=0;for(l=1;l<=6;l++)oe=ae*Ut+Vt*Pt,ye=ye+this.B_re[l]*(Vt=Vt*Ut-ae*Pt)-this.B_im[l]*(ae=oe),Te=Te+this.B_im[l]*Vt+this.B_re[l]*ae;return t.x=Te*this.a+this.x0,t.y=ye*this.a+this.y0,t},inverse:function Gr(t){var l,Pt,et=(t.y-this.y0)/this.a,tt=(t.x-this.x0)/this.a,ut=1,Et=0,Vt=0,ae=0;for(l=1;l<=6;l++)Pt=Et*et+ut*tt,Vt=Vt+this.C_re[l]*(ut=ut*et-Et*tt)-this.C_im[l]*(Et=Pt),ae=ae+this.C_im[l]*ut+this.C_re[l]*Et;for(var re=0;re<this.iterations;re++){var Ne,oe=Vt,ye=ae,Be=et,Ke=tt;for(l=2;l<=6;l++)Ne=ye*Vt+oe*ae,Be+=(l-1)*(this.B_re[l]*(oe=oe*Vt-ye*ae)-this.B_im[l]*(ye=Ne)),Ke+=(l-1)*(this.B_im[l]*oe+this.B_re[l]*ye);oe=1,ye=0;var pe=this.B_re[1],ke=this.B_im[1];for(l=2;l<=6;l++)Ne=ye*Vt+oe*ae,pe+=l*(this.B_re[l]*(oe=oe*Vt-ye*ae)-this.B_im[l]*(ye=Ne)),ke+=l*(this.B_im[l]*oe+this.B_re[l]*ye);var Ce=pe*pe+ke*ke;Vt=(Be*pe+Ke*ke)/Ce,ae=(Ke*pe-Be*ke)/Ce}var Pe=Vt,Je=ae,Ui=1,Ni=0;for(l=1;l<=9;l++)Ni+=this.D[l]*(Ui*=Pe);var an=this.lat0+Ni*d*1e5;return t.x=this.long0+Je,t.y=an,t},names:["New_Zealand_Map_Grid","nzmg"]},pn={init:function ka(){},forward:function lr(t){var _=t.y,B=Wt(t.x-this.long0),j=this.x0+this.a*B,X=this.y0+this.a*Math.log(Math.tan(Math.PI/4+_/2.5))*1.25;return t.x=j,t.y=X,t},inverse:function hr(t){t.x-=this.x0,t.y-=this.y0;var l=Wt(this.long0+t.x/this.a),_=2.5*(Math.atan(Math.exp(.8*t.y/this.a))-Math.PI/4);return t.x=l,t.y=_,t},names:["Miller_Cylindrical","mill"]},Ya={init:function ur(){this.sphere?(this.n=1,this.m=0,this.es=0,this.C_y=Math.sqrt((this.m+1)/this.n),this.C_x=this.C_y/(this.m+1)):this.en=Jn(this.es)},forward:function Xa(t){var l,_,B=t.x,j=t.y;if(B=Wt(B-this.long0),this.sphere){if(this.m)for(var X=this.n*Math.sin(j),et=20;et;--et){var tt=(this.m*j+Math.sin(j)-X)/(this.m+Math.cos(j));if(j-=tt,Math.abs(tt)<n)break}else j=1!==this.n?Math.asin(this.n*Math.sin(j)):j;l=this.a*this.C_x*B*(this.m+Math.cos(j)),_=this.a*this.C_y*j}else{var ut=Math.sin(j),Et=Math.cos(j);_=this.a*Ti(j,ut,Et,this.en),l=this.a*B*Et/Math.sqrt(1-this.es*ut*ut)}return t.x=l,t.y=_,t},inverse:function Va(t){var l,B,j;return t.x-=this.x0,B=t.x/this.a,t.y-=this.y0,l=t.y/this.a,this.sphere?(l/=this.C_y,B/=this.C_x*(this.m+Math.cos(l)),this.m?l=Wi((this.m*l+Math.sin(l))/this.n):1!==this.n&&(l=Wi(Math.sin(l)/this.n)),B=Wt(B+this.long0),l=wn(l)):(l=Qn(t.y/this.a,this.es,this.en),(j=Math.abs(l))<u?(j=Math.sin(l),B=Wt(this.long0+t.x*Math.sqrt(1-this.es*j*j)/(this.a*Math.cos(l)))):j-n<u&&(B=this.long0)),t.x=B,t.y=l,t},names:["Sinusoidal","sinu"]},$a={init:function cr(){},forward:function Ha(t){for(var _=t.y,B=Wt(t.x-this.long0),j=_,X=Math.PI*Math.sin(_);;){var et=-(j+Math.sin(j)-X)/(1+Math.cos(j));if(j+=et,Math.abs(et)<n)break}j/=2,Math.PI/2-Math.abs(_)<n&&(B=0);var tt=.900316316158*this.a*B*Math.cos(j)+this.x0,ut=1.4142135623731*this.a*Math.sin(j)+this.y0;return t.x=tt,t.y=ut,t},inverse:function Ja(t){var l,_;t.x-=this.x0,t.y-=this.y0,_=t.y/(1.4142135623731*this.a),Math.abs(_)>.999999999999&&(_=.999999999999),l=Math.asin(_);var B=Wt(this.long0+t.x/(.900316316158*this.a*Math.cos(l)));B<-Math.PI&&(B=-Math.PI),B>Math.PI&&(B=Math.PI),_=(2*l+Math.sin(2*l))/Math.PI,Math.abs(_)>1&&(_=1);var j=Math.asin(_);return t.x=B,t.y=j,t},names:["Mollweide","moll"]},we={init:function dr(){Math.abs(this.lat1+this.lat2)<n||(this.lat2=this.lat2||this.lat1,this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=bn(this.es),this.e1=mn(this.es),this.e2=ki(this.es),this.e3=is(this.es),this.sinphi=Math.sin(this.lat1),this.cosphi=Math.cos(this.lat1),this.ms1=Zt(this.e,this.sinphi,this.cosphi),this.ml1=di(this.e0,this.e1,this.e2,this.e3,this.lat1),Math.abs(this.lat1-this.lat2)<n?this.ns=this.sinphi:(this.sinphi=Math.sin(this.lat2),this.cosphi=Math.cos(this.lat2),this.ms2=Zt(this.e,this.sinphi,this.cosphi),this.ml2=di(this.e0,this.e1,this.e2,this.e3,this.lat2),this.ns=(this.ms1-this.ms2)/(this.ml2-this.ml1)),this.g=this.ml1+this.ms1/this.ns,this.ml0=di(this.e0,this.e1,this.e2,this.e3,this.lat0),this.rh=this.a*(this.g-this.ml0))},forward:function bs(t){var B,l=t.x,_=t.y;if(this.sphere)B=this.a*(this.g-_);else{var j=di(this.e0,this.e1,this.e2,this.e3,_);B=this.a*(this.g-j)}var X=this.ns*Wt(l-this.long0),et=this.x0+B*Math.sin(X),tt=this.y0+this.rh-B*Math.cos(X);return t.x=et,t.y=tt,t},inverse:function Ls(t){var l,_,B,j;t.x-=this.x0,t.y=this.rh-t.y+this.y0,this.ns>=0?(_=Math.sqrt(t.x*t.x+t.y*t.y),l=1):(_=-Math.sqrt(t.x*t.x+t.y*t.y),l=-1);var X=0;return 0!==_&&(X=Math.atan2(l*t.x,l*t.y)),this.sphere?(j=Wt(this.long0+X/this.ns),B=wn(this.g-_/this.a),t.x=j,t.y=B,t):(B=ns(this.g-_/this.a,this.e0,this.e1,this.e2,this.e3),j=Wt(this.long0+X/this.ns),t.x=j,t.y=B,t)},names:["Equidistant_Conic","eqdc"]},sn={init:function qa(){this.R=this.a},forward:function to(t){var j,X,_=t.y,B=Wt(t.x-this.long0);Math.abs(_)<=n&&(j=this.x0+this.R*B,X=this.y0);var et=Wi(2*Math.abs(_/Math.PI));(Math.abs(B)<=n||Math.abs(Math.abs(_)-u)<=n)&&(j=this.x0,X=_>=0?this.y0+Math.PI*this.R*Math.tan(.5*et):this.y0+Math.PI*this.R*-Math.tan(.5*et));var tt=.5*Math.abs(Math.PI/B-B/Math.PI),ut=tt*tt,Et=Math.sin(et),Ut=Math.cos(et),Pt=Ut/(Et+Ut-1),ae=Pt*(2/Et-1),re=ae*ae,oe=Math.PI*this.R*(tt*(Pt-re)+Math.sqrt(ut*(Pt-re)*(Pt-re)-(re+ut)*(Pt*Pt-re)))/(re+ut);B<0&&(oe=-oe),j=this.x0+oe;var ye=ut+Pt;return oe=Math.PI*this.R*(ae*ye-tt*Math.sqrt((re+ut)*(ut+1)-ye*ye))/(re+ut),X=_>=0?this.y0+oe:this.y0-oe,t.x=j,t.y=X,t},inverse:function Xr(t){var l,_,B,j,X,et,tt,ut,Et,Ut,Pt,Vt;return t.x-=this.x0,t.y-=this.y0,Pt=Math.PI*this.R,X=(B=t.x/Pt)*B+(j=t.y/Pt)*j,Pt=3*(j*j/(ut=-2*(et=-Math.abs(j)*(1+X))+1+2*j*j+X*X)+(2*(tt=et-2*j*j+B*B)*tt*tt/ut/ut/ut-9*et*tt/ut/ut)/27)/(Et=(et-tt*tt/3/ut)/ut)/(Ut=2*Math.sqrt(-Et/3)),Math.abs(Pt)>1&&(Pt=Pt>=0?1:-1),Vt=Math.acos(Pt)/3,_=t.y>=0?(-Ut*Math.cos(Vt+Math.PI/3)-tt/3/ut)*Math.PI:-(-Ut*Math.cos(Vt+Math.PI/3)-tt/3/ut)*Math.PI,l=Math.abs(B)<n?this.long0:Wt(this.long0+Math.PI*(X-1+Math.sqrt(1+2*(B*B-j*j)+X*X))/2/B),t.x=l,t.y=_,t},names:["Van_der_Grinten_I","VanDerGrinten","vandg"]},io={init:function eo(){this.sin_p12=Math.sin(this.lat0),this.cos_p12=Math.cos(this.lat0)},forward:function gr(t){var et,tt,ut,Et,Ut,Pt,Vt,ae,re,oe,ye,Te,Ne,Be,Ke,pe,ke,Ce,Pe,Je,Ui,Ni,l=t.x,_=t.y,B=Math.sin(t.y),j=Math.cos(t.y),X=Wt(l-this.long0);return this.sphere?Math.abs(this.sin_p12-1)<=n?(t.x=this.x0+this.a*(u-_)*Math.sin(X),t.y=this.y0-this.a*(u-_)*Math.cos(X),t):Math.abs(this.sin_p12+1)<=n?(t.x=this.x0+this.a*(u+_)*Math.sin(X),t.y=this.y0+this.a*(u+_)*Math.cos(X),t):(Ce=this.sin_p12*B+this.cos_p12*j*Math.cos(X),ke=(pe=Math.acos(Ce))?pe/Math.sin(pe):1,t.x=this.x0+this.a*ke*j*Math.sin(X),t.y=this.y0+this.a*ke*(this.cos_p12*B-this.sin_p12*j*Math.cos(X)),t):(et=bn(this.es),tt=mn(this.es),ut=ki(this.es),Et=is(this.es),Math.abs(this.sin_p12-1)<=n?(Ut=this.a*di(et,tt,ut,Et,u),Pt=this.a*di(et,tt,ut,Et,_),t.x=this.x0+(Ut-Pt)*Math.sin(X),t.y=this.y0-(Ut-Pt)*Math.cos(X),t):Math.abs(this.sin_p12+1)<=n?(Ut=this.a*di(et,tt,ut,Et,u),Pt=this.a*di(et,tt,ut,Et,_),t.x=this.x0+(Ut+Pt)*Math.sin(X),t.y=this.y0+(Ut+Pt)*Math.cos(X),t):(Vt=B/j,ae=Ln(this.a,this.e,this.sin_p12),re=Ln(this.a,this.e,B),oe=Math.atan((1-this.es)*Vt+this.es*ae*this.sin_p12/(re*j)),Pe=0===(ye=Math.atan2(Math.sin(X),this.cos_p12*Math.tan(oe)-this.sin_p12*Math.cos(X)))?Math.asin(this.cos_p12*Math.sin(oe)-this.sin_p12*Math.cos(oe)):Math.abs(Math.abs(ye)-Math.PI)<=n?-Math.asin(this.cos_p12*Math.sin(oe)-this.sin_p12*Math.cos(oe)):Math.asin(Math.sin(X)*Math.cos(oe)/Math.sin(ye)),Te=this.e*this.sin_p12/Math.sqrt(1-this.es),Ne=this.e*this.cos_p12*Math.cos(ye)/Math.sqrt(1-this.es),t.x=this.x0+(pe=ae*Pe*(1-(Je=Pe*Pe)*(Ke=Ne*Ne)*(1-Ke)/6+(Ui=Je*Pe)/8*(Be=Te*Ne)*(1-2*Ke)+(Ni=Ui*Pe)/120*(Ke*(4-7*Ke)-3*Te*Te*(1-7*Ke))-Ni*Pe/48*Be))*Math.sin(ye),t.y=this.y0+pe*Math.cos(ye),t))},inverse:function Vr(t){var l,_,B,j,X,et,tt,ut,Et,Ut,Pt,Vt,re,oe,ye,Te,Ne,Be,Ke,pe,ke,Ce,Pe;return t.x-=this.x0,t.y-=this.y0,this.sphere?(l=Math.sqrt(t.x*t.x+t.y*t.y))>2*u*this.a?void 0:(_=l/this.a,B=Math.sin(_),j=Math.cos(_),X=this.long0,Math.abs(l)<=n?et=this.lat0:(et=Wi(j*this.sin_p12+t.y*B*this.cos_p12/l),tt=Math.abs(this.lat0)-u,X=Math.abs(tt)<=n?Wt(this.lat0>=0?this.long0+Math.atan2(t.x,-t.y):this.long0-Math.atan2(-t.x,t.y)):Wt(this.long0+Math.atan2(t.x*B,l*this.cos_p12*j-t.y*this.sin_p12*B))),t.x=X,t.y=et,t):(ut=bn(this.es),Et=mn(this.es),Ut=ki(this.es),Pt=is(this.es),Math.abs(this.sin_p12-1)<=n?(et=ns(((Vt=this.a*di(ut,Et,Ut,Pt,u))-(l=Math.sqrt(t.x*t.x+t.y*t.y)))/this.a,ut,Et,Ut,Pt),X=Wt(this.long0+Math.atan2(t.x,-1*t.y)),t.x=X,t.y=et,t):Math.abs(this.sin_p12+1)<=n?(Vt=this.a*di(ut,Et,Ut,Pt,u),et=ns(((l=Math.sqrt(t.x*t.x+t.y*t.y))-Vt)/this.a,ut,Et,Ut,Pt),X=Wt(this.long0+Math.atan2(t.x,t.y)),t.x=X,t.y=et,t):(l=Math.sqrt(t.x*t.x+t.y*t.y),ye=Math.atan2(t.x,t.y),re=Ln(this.a,this.e,this.sin_p12),Te=Math.cos(ye),Ke=3*this.es*(1-(Be=-(Ne=this.e*this.cos_p12*Te)*Ne/(1-this.es)))*this.sin_p12*this.cos_p12*Te/(1-this.es),Ce=1-Be*(ke=(pe=l/re)-Be*(1+Be)*Math.pow(pe,3)/6-Ke*(1+3*Be)*Math.pow(pe,4)/24)*ke/2-pe*ke*ke*ke/6,oe=Math.asin(this.sin_p12*Math.cos(ke)+this.cos_p12*Math.sin(ke)*Te),X=Wt(this.long0+Math.asin(Math.sin(ye)*Math.sin(ke)/Math.cos(oe))),Pe=Math.sin(oe),et=Math.atan2((Pe-this.es*Ce*this.sin_p12)*Math.tan(oe),Pe*(1-this.es)),t.x=X,t.y=et,t))},names:["Azimuthal_Equidistant","aeqd"]},rn={init:function no(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0)},forward:function so(t){var l,_,B,j,et,tt,ut,Ut=t.y;return B=Wt(t.x-this.long0),l=Math.sin(Ut),_=Math.cos(Ut),j=Math.cos(B),((et=this.sin_p14*l+this.cos_p14*_*j)>0||Math.abs(et)<=n)&&(tt=1*this.a*_*Math.sin(B),ut=this.y0+1*this.a*(this.cos_p14*l-this.sin_p14*_*j)),t.x=tt,t.y=ut,t},inverse:function Yr(t){var l,_,B,j,X,et,tt;return t.x-=this.x0,t.y-=this.y0,_=Wi((l=Math.sqrt(t.x*t.x+t.y*t.y))/this.a),B=Math.sin(_),j=Math.cos(_),et=this.long0,Math.abs(l)<=n?(tt=this.lat0,t.x=et,t.y=tt,t):(tt=Wi(j*this.sin_p14+t.y*B*this.cos_p14/l),X=Math.abs(this.lat0)-u,Math.abs(X)<=n?(et=Wt(this.lat0>=0?this.long0+Math.atan2(t.x,-t.y):this.long0-Math.atan2(-t.x,t.y)),t.x=et,t.y=tt,t):(et=Wt(this.long0+Math.atan2(t.x*B,l*this.cos_p14*j-t.y*this.sin_p14*B)),t.x=et,t.y=tt,t))},names:["ortho"]};function as(t,l,_,B){var j;return t<n?(B.value=1,j=0):(j=Math.atan2(l,_),Math.abs(j)<=e?B.value=1:j>e&&j<=u+e?(B.value=2,j-=u):j>u+e||j<=-(u+e)?(B.value=3,j=j>=0?j-v:j+v):(B.value=4,j+=u)),j}function vn(t,l){var _=t+l;return _<-v?_+=E:_>+v&&(_-=E),_}const oo={init:function ro(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Quadrilateralized Spherical Cube",this.face=this.lat0>=u-e/2?5:this.lat0<=-(u-e/2)?6:Math.abs(this.long0)<=e?1:Math.abs(this.long0)<=u+e?this.long0>0?2:4:3,0!==this.es&&(this.one_minus_f=1-(this.a-this.b)/this.a,this.one_minus_f_squared=this.one_minus_f*this.one_minus_f)},forward:function ao(t){var _,B,j,X,et,tt,l={x:0,y:0},ut={value:0};if(t.x-=this.long0,_=0!==this.es?Math.atan(this.one_minus_f_squared*Math.tan(t.y)):t.y,B=t.x,5===this.face)X=u-_,B>=e&&B<=u+e?(ut.value=1,j=B-u):B>u+e||B<=-(u+e)?(ut.value=2,j=B>0?B-v:B+v):B>-(u+e)&&B<=-e?(ut.value=3,j=B+u):(ut.value=4,j=B);else if(6===this.face)X=u+_,B>=e&&B<=u+e?(ut.value=1,j=-B+u):B<e&&B>=-e?(ut.value=2,j=-B):B<-e&&B>=-(u+e)?(ut.value=3,j=-B-u):(ut.value=4,j=B>0?-B+v:-B-v);else{var Et,Ut,Pt,Vt,ae,re;2===this.face?B=vn(B,+u):3===this.face?B=vn(B,+v):4===this.face&&(B=vn(B,-u)),Vt=Math.sin(_),ae=Math.cos(_),re=Math.sin(B),Et=ae*Math.cos(B),Ut=ae*re,Pt=Vt,1===this.face?j=as(X=Math.acos(Et),Pt,Ut,ut):2===this.face?j=as(X=Math.acos(Ut),Pt,-Et,ut):3===this.face?j=as(X=Math.acos(-Et),Pt,-Ut,ut):4===this.face?j=as(X=Math.acos(-Ut),Pt,Et,ut):(X=j=0,ut.value=1)}return tt=Math.atan(12/v*(j+Math.acos(Math.sin(j)*Math.cos(e))-u)),et=Math.sqrt((1-Math.cos(X))/(Math.cos(tt)*Math.cos(tt))/(1-Math.cos(Math.atan(1/Math.cos(j))))),2===ut.value?tt+=u:3===ut.value?tt+=v:4===ut.value&&(tt+=1.5*v),l.x=et*Math.cos(tt),l.y=et*Math.sin(tt),l.x=l.x*this.a+this.x0,l.y=l.y*this.a+this.y0,t.x=l.x,t.y=l.y,t},inverse:function Jr(t){var _,B,j,X,et,tt,ut,Et,Ut,oe,ye,Te,l={lam:0,phi:0},Pt={value:0};if(t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,B=Math.atan(Math.sqrt(t.x*t.x+t.y*t.y)),_=Math.atan2(t.y,t.x),t.x>=0&&t.x>=Math.abs(t.y)?Pt.value=1:t.y>=0&&t.y>=Math.abs(t.x)?(Pt.value=2,_-=u):t.x<0&&-t.x>=Math.abs(t.y)?(Pt.value=3,_=_<0?_+v:_-v):(Pt.value=4,_+=u),Ut=v/12*Math.tan(_),et=Math.sin(Ut)/(Math.cos(Ut)-1/Math.sqrt(2)),tt=Math.atan(et),(ut=1-(j=Math.cos(_))*j*(X=Math.tan(B))*X*(1-Math.cos(Math.atan(1/Math.cos(tt)))))<-1?ut=-1:ut>1&&(ut=1),5===this.face)Et=Math.acos(ut),l.phi=u-Et,l.lam=1===Pt.value?tt+u:2===Pt.value?tt<0?tt+v:tt-v:3===Pt.value?tt-u:tt;else if(6===this.face)Et=Math.acos(ut),l.phi=Et-u,l.lam=1===Pt.value?-tt+u:2===Pt.value?-tt:3===Pt.value?-tt-u:tt<0?-tt-v:-tt+v;else{var Vt,ae,re;Ut=(Vt=ut)*Vt,ae=(Ut+=(re=Ut>=1?0:Math.sqrt(1-Ut)*Math.sin(tt))*re)>=1?0:Math.sqrt(1-Ut),2===Pt.value?(Ut=ae,ae=-re,re=Ut):3===Pt.value?(ae=-ae,re=-re):4===Pt.value&&(Ut=ae,ae=re,re=-Ut),2===this.face?(Ut=Vt,Vt=-ae,ae=Ut):3===this.face?(Vt=-Vt,ae=-ae):4===this.face&&(Ut=Vt,Vt=ae,ae=-Ut),l.phi=Math.acos(-re)-u,l.lam=Math.atan2(ae,Vt),2===this.face?l.lam=vn(l.lam,-u):3===this.face?l.lam=vn(l.lam,-v):4===this.face&&(l.lam=vn(l.lam,+u))}return 0!==this.es&&(oe=l.phi<0?1:0,ye=Math.tan(l.phi),Te=this.b/Math.sqrt(ye*ye+this.one_minus_f_squared),l.phi=Math.atan(Math.sqrt(this.a*this.a-Te*Te)/(this.one_minus_f*Te)),oe&&(l.phi=-l.phi)),l.lam+=this.long0,t.x=l.lam,t.y=l.phi,t},names:["Quadrilateralized Spherical Cube","Quadrilateralized_Spherical_Cube","qsc"]};var ws=[[1,22199e-21,-715515e-10,31103e-10],[.9986,-482243e-9,-24897e-9,-13309e-10],[.9954,-83103e-8,-448605e-10,-9.86701e-7],[.99,-.00135364,-59661e-9,36777e-10],[.9822,-.00167442,-449547e-11,-572411e-11],[.973,-.00214868,-903571e-10,1.8736e-8],[.96,-.00305085,-900761e-10,164917e-11],[.9427,-.00382792,-653386e-10,-26154e-10],[.9216,-.00467746,-10457e-8,481243e-11],[.8962,-.00536223,-323831e-10,-543432e-11],[.8679,-.00609363,-113898e-9,332484e-11],[.835,-.00698325,-640253e-10,9.34959e-7],[.7986,-.00755338,-500009e-10,9.35324e-7],[.7597,-.00798324,-35971e-9,-227626e-11],[.7186,-.00851367,-701149e-10,-86303e-10],[.6732,-.00986209,-199569e-9,191974e-10],[.6213,-.010418,883923e-10,624051e-11],[.5722,-.00906601,182e-6,624051e-11],[.5322,-.00677797,275608e-9,624051e-11]],Nn=[[-520417e-23,.0124,121431e-23,-845284e-16],[.062,.0124,-1.26793e-9,4.22642e-10],[.124,.0124,5.07171e-9,-1.60604e-9],[.186,.0123999,-1.90189e-8,6.00152e-9],[.248,.0124002,7.10039e-8,-2.24e-8],[.31,.0123992,-2.64997e-7,8.35986e-8],[.372,.0124029,9.88983e-7,-3.11994e-7],[.434,.0123893,-369093e-11,-4.35621e-7],[.4958,.0123198,-102252e-10,-3.45523e-7],[.5571,.0121916,-154081e-10,-5.82288e-7],[.6176,.0119938,-241424e-10,-5.25327e-7],[.6769,.011713,-320223e-10,-5.16405e-7],[.7346,.0113541,-397684e-10,-6.09052e-7],[.7903,.0109107,-489042e-10,-104739e-11],[.8435,.0103431,-64615e-9,-1.40374e-9],[.8936,.00969686,-64636e-9,-8547e-9],[.9394,.00840947,-192841e-9,-42106e-10],[.9761,.00616527,-256e-6,-42106e-10],[1,.00328947,-319159e-9,-42106e-10]],Ds=function(t,l){return t[0]+l*(t[1]+l*(t[2]+l*t[3]))};const Bo={init:function ta(){this.x0=this.x0||0,this.y0=this.y0||0,this.long0=this.long0||0,this.es=0,this.title=this.title||"Robinson"},forward:function ho(t){var l=Wt(t.x-this.long0),_=Math.abs(t.y),B=Math.floor(11.459155902616464*_);B<0?B=0:B>=18&&(B=17);var j={x:Ds(ws[B],_=g*(_-.08726646259971647*B))*l,y:Ds(Nn[B],_)};return t.y<0&&(j.y=-j.y),j.x=j.x*this.a*.8487+this.x0,j.y=j.y*this.a*1.3523+this.y0,j},inverse:function ea(t){var l={x:(t.x-this.x0)/(.8487*this.a),y:Math.abs(t.y-this.y0)/(1.3523*this.a)};if(l.y>=1)l.x/=ws[18][0],l.y=t.y<0?-u:u;else{var _=Math.floor(18*l.y);for(_<0?_=0:_>=18&&(_=17);;)if(Nn[_][0]>l.y)--_;else{if(!(Nn[_+1][0]<=l.y))break;++_}var B=Nn[_],j=5*(l.y-B[0])/(Nn[_+1][0]-B[0]);j=function Uo(t,l,_,B){for(var j=l;B;--B){var X=t(j);if(j-=X,Math.abs(X)<_)break}return j}(function(X){return(Ds(B,X)-l.y)/function(t,l){return t[1]+l*(2*t[2]+3*l*t[3])}(B,X)},j,n,100),l.x/=Ds(ws[_],j),l.y=(5*_+j)*h,t.y<0&&(l.y=-l.y)}return l.x=Wt(l.x+this.long0),l},names:["Robinson","robin"]},r={init:function Wo(){this.name="geocent"},forward:function uo(t){return Xe(t,this.es,this.a)},inverse:function Go(t){return ni(t,this.es,this.a,this.b)},names:["Geocentric","geocentric","geocent","Geocent"]};var o={h:{def:1e5,num:!0},azi:{def:0,num:!0,degrees:!0},tilt:{def:0,num:!0,degrees:!0},long0:{def:0,num:!0},lat0:{def:0,num:!0}};const xt={init:function T(){if(Object.keys(o).forEach(function(_){if(typeof this[_]>"u")this[_]=o[_].def;else{if(o[_].num&&isNaN(this[_]))throw new Error("Invalid parameter value, must be numeric "+_+" = "+this[_]);o[_].num&&(this[_]=parseFloat(this[_]))}o[_].degrees&&(this[_]=this[_]*h)}.bind(this)),Math.abs(Math.abs(this.lat0)-u)<n?this.mode=this.lat0<0?1:0:Math.abs(this.lat0)<n?this.mode=2:(this.mode=3,this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0)),this.pn1=this.h/this.a,this.pn1<=0||this.pn1>1e10)throw new Error("Invalid height");this.p=1+this.pn1,this.rp=1/this.p,this.h1=1/this.pn1,this.pfact=(this.p+1)*this.h1,this.es=0;var t=this.tilt,l=this.azi;this.cg=Math.cos(l),this.sg=Math.sin(l),this.cw=Math.cos(t),this.sw=Math.sin(t)},forward:function Z(t){t.x-=this.long0;var j,X,et,tt,l=Math.sin(t.y),_=Math.cos(t.y),B=Math.cos(t.x);switch(this.mode){case 3:X=this.sinph0*l+this.cosph0*_*B;break;case 2:X=_*B;break;case 1:X=-l;break;case 0:X=l}switch(j=(X=this.pn1/(this.p-X))*_*Math.sin(t.x),this.mode){case 3:X*=this.cosph0*l-this.sinph0*_*B;break;case 2:X*=l;break;case 0:X*=-_*B;break;case 1:X*=_*B}return j=(j*this.cg-X*this.sg)*this.cw*(tt=1/((et=X*this.cg+j*this.sg)*this.sw*this.h1+this.cw)),X=et*tt,t.x=j*this.a,t.y=X*this.a,t},inverse:function J(t){t.x/=this.a,t.y/=this.a;var _,B,j,l={x:t.x,y:t.y};t.x=(_=this.pn1*t.x*(j=1/(this.pn1-t.y*this.sw)))*this.cg+(B=this.pn1*t.y*this.cw*j)*this.sg,t.y=B*this.cg-_*this.sg;var X=wi(t.x,t.y);if(Math.abs(X)<n)l.x=0,l.y=t.y;else{var et,tt;switch(tt=1-X*X*this.pfact,tt=(this.p-Math.sqrt(tt))/(this.pn1/X+X/this.pn1),et=Math.sqrt(1-tt*tt),this.mode){case 3:l.y=Math.asin(et*this.sinph0+t.y*tt*this.cosph0/X),t.y=(et-this.sinph0*Math.sin(l.y))*X,t.x*=tt*this.cosph0;break;case 2:l.y=Math.asin(t.y*tt/X),t.y=et*X,t.x*=tt;break;case 0:l.y=Math.asin(et),t.y=-t.y;break;case 1:l.y=-Math.asin(et)}l.x=Math.atan2(t.x,t.y)}return t.x=l.x+this.long0,t.y=l.y,t},names:["Tilted_Perspective","tpers"]},le={init:function Lt(){if(this.flip_axis="x"===this.sweep?1:0,this.h=Number(this.h),this.radius_g_1=this.h/this.a,this.radius_g_1<=0||this.radius_g_1>1e10)throw new Error;if(this.radius_g=1+this.radius_g_1,this.C=this.radius_g*this.radius_g-1,0!==this.es){var t=1-this.es,l=1/t;this.radius_p=Math.sqrt(t),this.radius_p2=t,this.radius_p_inv2=l,this.shape="ellipse"}else this.radius_p=1,this.radius_p2=1,this.radius_p_inv2=1,this.shape="sphere";this.title||(this.title="Geostationary Satellite View")},forward:function Dt(t){var B,j,X,et,l=t.x,_=t.y;if(l-=this.long0,"ellipse"===this.shape){_=Math.atan(this.radius_p2*Math.tan(_));var tt=this.radius_p/wi(this.radius_p*Math.cos(_),Math.sin(_));if(j=tt*Math.cos(l)*Math.cos(_),X=tt*Math.sin(l)*Math.cos(_),et=tt*Math.sin(_),(this.radius_g-j)*j-X*X-et*et*this.radius_p_inv2<0)return t.x=Number.NaN,t.y=Number.NaN,t;B=this.radius_g-j,this.flip_axis?(t.x=this.radius_g_1*Math.atan(X/wi(et,B)),t.y=this.radius_g_1*Math.atan(et/B)):(t.x=this.radius_g_1*Math.atan(X/B),t.y=this.radius_g_1*Math.atan(et/wi(X,B)))}else"sphere"===this.shape&&(B=Math.cos(_),j=Math.cos(l)*B,X=Math.sin(l)*B,et=Math.sin(_),B=this.radius_g-j,this.flip_axis?(t.x=this.radius_g_1*Math.atan(X/wi(et,B)),t.y=this.radius_g_1*Math.atan(et/B)):(t.x=this.radius_g_1*Math.atan(X/B),t.y=this.radius_g_1*Math.atan(et/wi(X,B))));return t.x=t.x*this.a,t.y=t.y*this.a,t},inverse:function Ft(t){var j,X,et,tt,l=-1,_=0,B=0;if(t.x=t.x/this.a,t.y=t.y/this.a,"ellipse"===this.shape){this.flip_axis?(B=Math.tan(t.y/this.radius_g_1),_=Math.tan(t.x/this.radius_g_1)*wi(1,B)):(_=Math.tan(t.x/this.radius_g_1),B=Math.tan(t.y/this.radius_g_1)*wi(1,_));var ut=B/this.radius_p;if((et=(X=2*this.radius_g*l)*X-4*(j=_*_+ut*ut+l*l)*this.C)<0)return t.x=Number.NaN,t.y=Number.NaN,t;tt=(-X-Math.sqrt(et))/(2*j),l=this.radius_g+tt*l,_*=tt,B*=tt,t.x=Math.atan2(_,l),t.y=Math.atan(B*Math.cos(t.x)/l),t.y=Math.atan(this.radius_p_inv2*Math.tan(t.y))}else if("sphere"===this.shape){if(this.flip_axis?(B=Math.tan(t.y/this.radius_g_1),_=Math.tan(t.x/this.radius_g_1)*Math.sqrt(1+B*B)):(_=Math.tan(t.x/this.radius_g_1),B=Math.tan(t.y/this.radius_g_1)*Math.sqrt(1+_*_)),(et=(X=2*this.radius_g*l)*X-4*(j=_*_+B*B+l*l)*this.C)<0)return t.x=Number.NaN,t.y=Number.NaN,t;tt=(-X-Math.sqrt(et))/(2*j),l=this.radius_g+tt*l,_*=tt,B*=tt,t.x=Math.atan2(_,l),t.y=Math.atan(B*Math.cos(t.x)/l)}return t.x=t.x+this.long0,t},names:["Geostationary Satellite View","Geostationary_Satellite","geos"]};Oi.defaultDatum="WGS84",Oi.Proj=De,Oi.WGS84=new Oi.Proj("WGS84"),Oi.Point=Xn,Oi.toPoint=_i,Oi.defs=ue,Oi.nadgrid=function Qe(t,l){var _=new DataView(l),B=function mt(t){var l=t.getInt32(8,!1);return 11!==l&&(11!==(l=t.getInt32(8,!0))&&console.warn("Failed to detect nadgrid endian-ness, defaulting to little-endian"),!0)}(_),j=function pt(t,l){return{nFields:t.getInt32(8,l),nSubgridFields:t.getInt32(24,l),nSubgrids:t.getInt32(40,l),shiftType:Rt(t,56,64).trim(),fromSemiMajorAxis:t.getFloat64(120,l),fromSemiMinorAxis:t.getFloat64(136,l),toSemiMajorAxis:t.getFloat64(152,l),toSemiMinorAxis:t.getFloat64(168,l)}}(_,B);j.nSubgrids>1&&console.log("Only single NTv2 subgrids are currently supported, subsequent sub grids are ignored");var X=function Ht(t,l,_){for(var j=[],X=0;X<l.nSubgrids;X++){var et=me(t,176,_),tt=Me(t,176,et,_),ut=Math.round(1+(et.upperLongitude-et.lowerLongitude)/et.longitudeInterval),Et=Math.round(1+(et.upperLatitude-et.lowerLatitude)/et.latitudeInterval);j.push({ll:[$(et.lowerLongitude),$(et.lowerLatitude)],del:[$(et.longitudeInterval),$(et.latitudeInterval)],lim:[ut,Et],count:et.gridNodeCount,cvs:ne(tt)})}return j}(_,j,B),et={header:j,subgrids:X};return ii[t]=et,et},Oi.transform=ri,Oi.mgrs=Gs,Oi.version="__VERSION__",function fe(t){t.Proj.projections.add(en),t.Proj.projections.add(ee),t.Proj.projections.add(He),t.Proj.projections.add(Fi),t.Proj.projections.add(es),t.Proj.projections.add(pa),t.Proj.projections.add(Ma),t.Proj.projections.add(Ca),t.Proj.projections.add(Ra),t.Proj.projections.add(ss),t.Proj.projections.add(Lr),t.Proj.projections.add(Ua),t.Proj.projections.add(Nr),t.Proj.projections.add(Ss),t.Proj.projections.add(ir),t.Proj.projections.add(Fn),t.Proj.projections.add(Ka),t.Proj.projections.add(pn),t.Proj.projections.add(Ya),t.Proj.projections.add($a),t.Proj.projections.add(we),t.Proj.projections.add(sn),t.Proj.projections.add(io),t.Proj.projections.add(rn),t.Proj.projections.add(oo),t.Proj.projections.add(Bo),t.Proj.projections.add(r),t.Proj.projections.add(xt),t.Proj.projections.add(le)}(Oi);const be=Oi},3036:function(Bt){Bt.exports=function(){"use strict";function ot(n,h,g,e,E){!function v(x,w,O,y,R){for(;y>O;){if(y-O>600){var W=y-O+1,K=w-O+1,nt=Math.log(W),A=.5*Math.exp(2*nt/3),L=.5*Math.sqrt(nt*A*(W-A)/W)*(K-W/2<0?-1:1);v(x,w,Math.max(O,Math.floor(w-K*A/W+L)),Math.min(y,Math.floor(w+(W-K)*A/W+L)),R)}var C=x[w],N=O,H=y;for(a(x,O,w),R(x[y],C)>0&&a(x,O,y);N<H;){for(a(x,N,H),N++,H--;R(x[N],C)<0;)N++;for(;R(x[H],C)>0;)H--}0===R(x[O],C)?a(x,O,H):a(x,++H,y),H<=w&&(O=H+1),w<=H&&(y=H-1)}}(n,h,g||0,e||n.length-1,E||G)}function a(n,h,g){var e=n[h];n[h]=n[g],n[g]=e}function G(n,h){return n<h?-1:n>h?1:0}var D=function(n){void 0===n&&(n=9),this._maxEntries=Math.max(4,n),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function k(n,h,g){if(!g)return h.indexOf(n);for(var e=0;e<h.length;e++)if(g(n,h[e]))return e;return-1}function z(n,h){U(n,0,n.children.length,h,n)}function U(n,h,g,e,E){E||(E=s(null)),E.minX=1/0,E.minY=1/0,E.maxX=-1/0,E.maxY=-1/0;for(var v=h;v<g;v++){var x=n.children[v];I(E,n.leaf?e(x):x)}return E}function I(n,h){return n.minX=Math.min(n.minX,h.minX),n.minY=Math.min(n.minY,h.minY),n.maxX=Math.max(n.maxX,h.maxX),n.maxY=Math.max(n.maxY,h.maxY),n}function S(n,h){return n.minX-h.minX}function P(n,h){return n.minY-h.minY}function p(n){return(n.maxX-n.minX)*(n.maxY-n.minY)}function d(n){return n.maxX-n.minX+(n.maxY-n.minY)}function u(n,h){return n.minX<=h.minX&&n.minY<=h.minY&&h.maxX<=n.maxX&&h.maxY<=n.maxY}function c(n,h){return h.minX<=n.maxX&&h.minY<=n.maxY&&h.maxX>=n.minX&&h.maxY>=n.minY}function s(n){return{children:n,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function f(n,h,g,e,E){for(var v=[h,g];v.length;)if(!((g=v.pop())-(h=v.pop())<=e)){var x=h+Math.ceil((g-h)/e/2)*e;ot(n,x,h,g,E),v.push(h,x,x,g)}}return D.prototype.all=function(){return this._all(this.data,[])},D.prototype.search=function(n){var h=this.data,g=[];if(!c(n,h))return g;for(var e=this.toBBox,E=[];h;){for(var v=0;v<h.children.length;v++){var x=h.children[v],w=h.leaf?e(x):x;c(n,w)&&(h.leaf?g.push(x):u(n,w)?this._all(x,g):E.push(x))}h=E.pop()}return g},D.prototype.collides=function(n){var h=this.data;if(!c(n,h))return!1;for(var g=[];h;){for(var e=0;e<h.children.length;e++){var E=h.children[e],v=h.leaf?this.toBBox(E):E;if(c(n,v)){if(h.leaf||u(n,v))return!0;g.push(E)}}h=g.pop()}return!1},D.prototype.load=function(n){if(!n||!n.length)return this;if(n.length<this._minEntries){for(var h=0;h<n.length;h++)this.insert(n[h]);return this}var g=this._build(n.slice(),0,n.length-1,0);if(this.data.children.length)if(this.data.height===g.height)this._splitRoot(this.data,g);else{if(this.data.height<g.height){var e=this.data;this.data=g,g=e}this._insert(g,this.data.height-g.height-1,!0)}else this.data=g;return this},D.prototype.insert=function(n){return n&&this._insert(n,this.data.height-1),this},D.prototype.clear=function(){return this.data=s([]),this},D.prototype.remove=function(n,h){if(!n)return this;for(var g,e,E,v=this.data,x=this.toBBox(n),w=[],O=[];v||w.length;){if(v||(v=w.pop(),e=w[w.length-1],g=O.pop(),E=!0),v.leaf){var y=k(n,v.children,h);if(-1!==y)return v.children.splice(y,1),w.push(v),this._condense(w),this}E||v.leaf||!u(v,x)?e?(g++,v=e.children[g],E=!1):v=null:(w.push(v),O.push(g),g=0,e=v,v=v.children[0])}return this},D.prototype.toBBox=function(n){return n},D.prototype.compareMinX=function(n,h){return n.minX-h.minX},D.prototype.compareMinY=function(n,h){return n.minY-h.minY},D.prototype.toJSON=function(){return this.data},D.prototype.fromJSON=function(n){return this.data=n,this},D.prototype._all=function(n,h){for(var g=[];n;)n.leaf?h.push.apply(h,n.children):g.push.apply(g,n.children),n=g.pop();return h},D.prototype._build=function(n,h,g,e){var E,v=g-h+1,x=this._maxEntries;if(v<=x)return z(E=s(n.slice(h,g+1)),this.toBBox),E;e||(e=Math.ceil(Math.log(v)/Math.log(x)),x=Math.ceil(v/Math.pow(x,e-1))),(E=s([])).leaf=!1,E.height=e;var w=Math.ceil(v/x),O=w*Math.ceil(Math.sqrt(x));f(n,h,g,O,this.compareMinX);for(var y=h;y<=g;y+=O){var R=Math.min(y+O-1,g);f(n,y,R,w,this.compareMinY);for(var W=y;W<=R;W+=w){var K=Math.min(W+w-1,R);E.children.push(this._build(n,W,K,e-1))}}return z(E,this.toBBox),E},D.prototype._chooseSubtree=function(n,h,g,e){for(;e.push(h),!h.leaf&&e.length-1!==g;){for(var E=1/0,v=1/0,x=void 0,w=0;w<h.children.length;w++){var O=h.children[w],y=p(O),R=(W=n,K=O,(Math.max(K.maxX,W.maxX)-Math.min(K.minX,W.minX))*(Math.max(K.maxY,W.maxY)-Math.min(K.minY,W.minY))-y);R<v?(v=R,E=y<E?y:E,x=O):R===v&&y<E&&(E=y,x=O)}h=x||h.children[0]}var W,K;return h},D.prototype._insert=function(n,h,g){var e=g?n:this.toBBox(n),E=[],v=this._chooseSubtree(e,this.data,h,E);for(v.children.push(n),I(v,e);h>=0&&E[h].children.length>this._maxEntries;)this._split(E,h),h--;this._adjustParentBBoxes(e,E,h)},D.prototype._split=function(n,h){var g=n[h],e=g.children.length,E=this._minEntries;this._chooseSplitAxis(g,E,e);var v=this._chooseSplitIndex(g,E,e),x=s(g.children.splice(v,g.children.length-v));x.height=g.height,x.leaf=g.leaf,z(g,this.toBBox),z(x,this.toBBox),h?n[h-1].children.push(x):this._splitRoot(g,x)},D.prototype._splitRoot=function(n,h){this.data=s([n,h]),this.data.height=n.height+1,this.data.leaf=!1,z(this.data,this.toBBox)},D.prototype._chooseSplitIndex=function(n,h,g){for(var e,E,v,x,w,O,y,R=1/0,W=1/0,K=h;K<=g-h;K++){var nt=U(n,0,K,this.toBBox),A=U(n,K,g,this.toBBox),L=(E=nt,v=A,void 0,void 0,void 0,void 0,x=Math.max(E.minX,v.minX),w=Math.max(E.minY,v.minY),O=Math.min(E.maxX,v.maxX),y=Math.min(E.maxY,v.maxY),Math.max(0,O-x)*Math.max(0,y-w)),b=p(nt)+p(A);L<R?(R=L,e=K,W=b<W?b:W):L===R&&b<W&&(W=b,e=K)}return e||g-h},D.prototype._chooseSplitAxis=function(n,h,g){var e=n.leaf?this.compareMinX:S,E=n.leaf?this.compareMinY:P;this._allDistMargin(n,h,g,e)<this._allDistMargin(n,h,g,E)&&n.children.sort(e)},D.prototype._allDistMargin=function(n,h,g,e){n.children.sort(e);for(var E=this.toBBox,v=U(n,0,h,E),x=U(n,g-h,g,E),w=d(v)+d(x),O=h;O<g-h;O++){var y=n.children[O];I(v,n.leaf?E(y):y),w+=d(v)}for(var R=g-h-1;R>=h;R--){var W=n.children[R];I(x,n.leaf?E(W):W),w+=d(x)}return w},D.prototype._adjustParentBBoxes=function(n,h,g){for(var e=g;e>=0;e--)I(h[e],n)},D.prototype._condense=function(n){for(var h=n.length-1,g=void 0;h>=0;h--)0===n[h].children.length?h>0?(g=n[h-1].children).splice(g.indexOf(n[h]),1):this.clear():z(n[h],this.toBBox)},D}()},3307:(Bt,ot,a)=>{"use strict";a.d(ot,{j:()=>It});var G=a(790),D=a(7393);class z{constructor(m){this.total=m}call(m,F){return F.subscribe(new U(m,this.total))}}class U extends D.L{constructor(m,F){super(m),this.total=F,this.count=0}_next(m){++this.count>this.total&&this.destination.next(m)}}var I=a(5548),S=a(513),P=a(7521),p=a(1591),d=a(9633),u=a(6581),c=a(1119),s=a(9015),f=a(992);const n="units",h=[1,2,5],g=25.4/.28,E=class e extends u.Z{constructor(m){m=m||{};const F=document.createElement("div");F.style.pointerEvents="none",super({element:F,render:m.render,target:m.target});const Q=void 0!==m.className?m.className:m.bar?"ol-scale-bar":"ol-scale-line";this.innerElement_=document.createElement("div"),this.innerElement_.className=Q+"-inner",this.element.className=Q+" "+c.XV,this.element.appendChild(this.innerElement_),this.viewState_=null,this.minWidth_=void 0!==m.minWidth?m.minWidth:64,this.maxWidth_=m.maxWidth,this.renderedVisible_=!1,this.renderedWidth_=void 0,this.renderedHTML_="",this.addChangeListener(n,this.handleUnitsChanged_),this.setUnits(m.units||"metric"),this.scaleBar_=m.bar||!1,this.scaleBarSteps_=m.steps||4,this.scaleBarText_=m.text||!1,this.dpi_=m.dpi||void 0}getUnits(){return this.get(n)}handleUnitsChanged_(){this.updateElement_()}setUnits(m){this.set(n,m)}setDpi(m){this.dpi_=m}updateElement_(){const m=this.viewState_;if(!m)return void(this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1));const F=m.center,Q=m.projection,V=this.getUnits();let _t=(0,s._Q)(Q,m.resolution,F,"degrees"==V?"degrees":"m");const St=this.minWidth_*(this.dpi_||g)/g,Nt=void 0!==this.maxWidth_?this.maxWidth_*(this.dpi_||g)/g:void 0;let Xt=St*_t,Jt="";if("degrees"==V){const Ve=s.Wm.degrees;Xt*=Ve,Xt<Ve/60?(Jt="\u2033",_t*=3600):Xt<Ve?(Jt="\u2032",_t*=60):Jt="\xb0"}else"imperial"==V?Xt<.9144?(Jt="in",_t/=.0254):Xt<1609.344?(Jt="ft",_t/=.3048):(Jt="mi",_t/=1609.344):"nautical"==V?(_t/=1852,Jt="NM"):"metric"==V?Xt<.001?(Jt="\u03bcm",_t*=1e6):Xt<1?(Jt="mm",_t*=1e3):Xt<1e3?Jt="m":(Jt="km",_t/=1e3):"us"==V?Xt<.9144?(Jt="in",_t*=39.37):Xt<1609.344?(Jt="ft",_t/=.30480061):(Jt="mi",_t/=1609.3472):(0,f.h)(!1,33);let se,Qt,Fe,Ye,We,Ge,Ee=3*Math.floor(Math.log(St*_t)/Math.log(10));for(;;){Fe=Math.floor(Ee/3);const Ve=Math.pow(10,Fe);if(se=h[(Ee%3+3)%3]*Ve,Qt=Math.round(se/_t),isNaN(Qt))return this.element.style.display="none",void(this.renderedVisible_=!1);if(void 0!==Nt&&Qt>=Nt){se=Ye,Qt=We,Fe=Ge;break}if(Qt>=St)break;Ye=se,We=Qt,Ge=Fe,++Ee}const Ue=this.scaleBar_?this.createScaleBar(Qt,se,Jt):se.toFixed(Fe<0?-Fe:0)+" "+Jt;this.renderedHTML_!=Ue&&(this.innerElement_.innerHTML=Ue,this.renderedHTML_=Ue),this.renderedWidth_!=Qt&&(this.innerElement_.style.width=Qt+"px",this.renderedWidth_=Qt),this.renderedVisible_||(this.element.style.display="",this.renderedVisible_=!0)}createScaleBar(m,F,Q){const V=this.getScaleForResolution(),lt=V<1?Math.round(1/V).toLocaleString()+" : 1":"1 : "+Math.round(V).toLocaleString(),_t=this.scaleBarSteps_,St=m/_t,Nt=[this.createMarker("absolute")];for(let Jt=0;Jt<_t;++Jt)Nt.push(`<div><div class="ol-scale-singlebar ${Jt%2==0?"ol-scale-singlebar-odd":"ol-scale-singlebar-even"}" style="width: ${St}px;"></div>`+this.createMarker("relative")+(Jt%2==0||2===_t?this.createStepText(Jt,m,!1,F,Q):"")+"</div>");return Nt.push(this.createStepText(_t,m,!0,F,Q)),(this.scaleBarText_?`<div class="ol-scale-text" style="width: ${m}px;">`+lt+"</div>":"")+Nt.join("")}createMarker(m){return`<div class="ol-scale-step-marker" style="position: ${m}; top: ${"absolute"===m?3:-10}px;"></div>`}createStepText(m,F,Q,V,lt){const St=(0===m?0:Math.round(V/this.scaleBarSteps_*m*100)/100)+(0===m?"":" "+lt);return`<div class="ol-scale-step-text" style="margin-left: ${0===m?-3:F/this.scaleBarSteps_*-1}px;text-align: ${0===m?"left":"center"};min-width: ${0===m?0:F/this.scaleBarSteps_*2}px;left: ${Q?F+"px":"unset"};">`+St+"</div>"}getScaleForResolution(){return(0,s._Q)(this.viewState_.projection,this.viewState_.resolution,this.viewState_.center,"m")*(1e3/25.4)*(this.dpi_||g)}render(m){const F=m.frameState;this.viewState_=F?F.viewState:null,this.updateElement_()}};var v=a(1014),x=a(5622),w=a(2716),O=a(5415);const y="projection",R="coordinateFormat",K=class W extends u.Z{constructor(m){m=m||{};const F=document.createElement("div");F.className=void 0!==m.className?m.className:"ol-mouse-position",super({element:F,render:m.render,target:m.target}),this.addChangeListener(y,this.handleProjectionChanged_),m.coordinateFormat&&this.setCoordinateFormat(m.coordinateFormat),m.projection&&this.setProjection(m.projection),this.renderOnMouseOut_=void 0!==m.placeholder,this.placeholder_=this.renderOnMouseOut_?m.placeholder:"&#160;",this.renderedHTML_=F.innerHTML,this.mapProjection_=null,this.transform_=null,this.wrapX_=!1!==m.wrapX}handleProjectionChanged_(){this.transform_=null}getCoordinateFormat(){return this.get(R)}getProjection(){return this.get(y)}handleMouseMove(m){const F=this.getMap();this.updateHTML_(F.getEventPixel(m))}handleMouseOut(m){this.updateHTML_(null)}setMap(m){if(super.setMap(m),m){const F=m.getViewport();this.listenerKeys.push((0,w.oL)(F,x.Z.POINTERMOVE,this.handleMouseMove,this)),this.renderOnMouseOut_&&this.listenerKeys.push((0,w.oL)(F,x.Z.POINTEROUT,this.handleMouseOut,this)),this.updateHTML_(null)}}setCoordinateFormat(m){this.set(R,m)}setProjection(m){this.set(y,(0,s.U2)(m))}updateHTML_(m){let F=this.placeholder_;if(m&&this.mapProjection_){if(!this.transform_){const lt=this.getProjection();this.transform_=lt?(0,s.WO)(this.mapProjection_,lt):s.gD}const V=this.getMap().getCoordinateFromPixelInternal(m);if(V){const lt=(0,s.Cs)();if(lt&&(this.transform_=(0,s.WO)(this.mapProjection_,lt)),this.transform_(V,V),this.wrapX_){const St=lt||this.getProjection()||this.mapProjection_;(0,O.Cf)(V,St)}const _t=this.getCoordinateFormat();F=_t?_t(V):V.toString()}}(!this.renderedHTML_||F!==this.renderedHTML_)&&(this.element.innerHTML=F,this.renderedHTML_=F)}render(m){const F=m.frameState;F?this.mapProjection_!=F.viewState.projection&&(this.mapProjection_=F.viewState.projection,this.transform_=null):this.mapProjection_=null}};var nt=a(3044),A=a(3161),L=a(3842);const b=["fullscreenchange","webkitfullscreenchange","MSFullscreenChange"];function N(ct){const m=ct.body;return!!(m.webkitRequestFullscreen||m.requestFullscreen&&ct.fullscreenEnabled)}function H(ct){return!(!ct.webkitIsFullScreen&&!ct.fullscreenElement)}function it(ct){ct.requestFullscreen?ct.requestFullscreen():ct.webkitRequestFullscreen&&ct.webkitRequestFullscreen()}const ht=class C extends u.Z{constructor(m){m=m||{},super({element:document.createElement("div"),target:m.target}),this.keys_=void 0!==m.keys&&m.keys,this.source_=m.source,this.isInFullscreen_=!1,this.boundHandleMapTargetChange_=this.handleMapTargetChange_.bind(this),this.cssClassName_=void 0!==m.className?m.className:"ol-full-screen",this.documentListeners_=[],this.activeClassName_=void 0!==m.activeClassName?m.activeClassName.split(" "):[this.cssClassName_+"-true"],this.inactiveClassName_=void 0!==m.inactiveClassName?m.inactiveClassName.split(" "):[this.cssClassName_+"-false"];const F=void 0!==m.label?m.label:"\u2922";this.labelNode_="string"==typeof F?document.createTextNode(F):F;const Q=void 0!==m.labelActive?m.labelActive:"\xd7";this.labelActiveNode_="string"==typeof Q?document.createTextNode(Q):Q;const V=m.tipLabel?m.tipLabel:"Toggle full-screen";this.button_=document.createElement("button"),this.button_.title=V,this.button_.setAttribute("type","button"),this.button_.appendChild(this.labelNode_),this.button_.addEventListener(nt.Z.CLICK,this.handleClick_.bind(this),!1),this.setClassName_(this.button_,this.isInFullscreen_),this.element.className=`${this.cssClassName_} ${c.XV} ${c.hg}`,this.element.appendChild(this.button_)}handleClick_(m){m.preventDefault(),this.handleFullScreen_()}handleFullScreen_(){const m=this.getMap();if(!m)return;const F=m.getOwnerDocument();if(N(F))if(H(F))!function st(ct){ct.exitFullscreen?ct.exitFullscreen():ct.webkitExitFullscreen&&ct.webkitExitFullscreen()}(F);else{let Q;Q=this.source_?"string"==typeof this.source_?F.getElementById(this.source_):this.source_:m.getTargetElement(),this.keys_?function Y(ct){ct.webkitRequestFullscreen?ct.webkitRequestFullscreen():it(ct)}(Q):it(Q)}}handleFullScreenChange_(){const m=this.getMap();if(!m)return;const F=this.isInFullscreen_;this.isInFullscreen_=H(m.getOwnerDocument()),F!==this.isInFullscreen_&&(this.setClassName_(this.button_,this.isInFullscreen_),this.isInFullscreen_?((0,L.$H)(this.labelActiveNode_,this.labelNode_),this.dispatchEvent("enterfullscreen")):((0,L.$H)(this.labelNode_,this.labelActiveNode_),this.dispatchEvent("leavefullscreen")),m.updateSize())}setClassName_(m,F){F?(m.classList.remove(...this.inactiveClassName_),m.classList.add(...this.activeClassName_)):(m.classList.remove(...this.activeClassName_),m.classList.add(...this.inactiveClassName_))}setMap(m){const F=this.getMap();F&&F.removeChangeListener(A.Z.TARGET,this.boundHandleMapTargetChange_),super.setMap(m),this.handleMapTargetChange_(),m&&m.addChangeListener(A.Z.TARGET,this.boundHandleMapTargetChange_)}handleMapTargetChange_(){const m=this.documentListeners_;for(let Q=0,V=m.length;Q<V;++Q)(0,w.bN)(m[Q]);m.length=0;const F=this.getMap();if(F){const Q=F.getOwnerDocument();N(Q)?this.element.classList.remove(c.Qi):this.element.classList.add(c.Qi);for(let V=0,lt=b.length;V<lt;++V)m.push((0,w.oL)(Q,b[V],this.handleFullScreenChange_,this));this.handleFullScreenChange_()}}};var Tt=a(9573),vt=a(6942),Ct=a(9806),bt=a(8296),Gt=a(2417),kt=a(5109),ie=a(1266),zt=a(9543),ue=a(7464);const dt=class Se extends u.Z{constructor(m){m=m||{},super({element:document.createElement("div"),render:m.render,target:m.target}),this.boundHandleRotationChanged_=this.handleRotationChanged_.bind(this),this.collapsed_=void 0===m.collapsed||m.collapsed,this.collapsible_=void 0===m.collapsible||m.collapsible,this.collapsible_||(this.collapsed_=!1),this.rotateWithView_=void 0!==m.rotateWithView&&m.rotateWithView,this.viewExtent_=void 0;const F=void 0!==m.className?m.className:"ol-overviewmap",Q=void 0!==m.tipLabel?m.tipLabel:"Overview map",V=void 0!==m.collapseLabel?m.collapseLabel:"\u2039";"string"==typeof V?(this.collapseLabel_=document.createElement("span"),this.collapseLabel_.textContent=V):this.collapseLabel_=V;const lt=void 0!==m.label?m.label:"\u203a";"string"==typeof lt?(this.label_=document.createElement("span"),this.label_.textContent=lt):this.label_=lt;const _t=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_,St=document.createElement("button");St.setAttribute("type","button"),St.title=Q,St.appendChild(_t),St.addEventListener(nt.Z.CLICK,this.handleClick_.bind(this),!1),this.ovmapDiv_=document.createElement("div"),this.ovmapDiv_.className="ol-overviewmap-map",this.view_=m.view;const Nt=new vt.Z({view:m.view,controls:new Tt.Z,interactions:new Tt.Z});this.ovmap_=Nt,m.layers&&m.layers.forEach(function(Ue){Nt.addLayer(Ue)});const Xt=document.createElement("div");Xt.className="ol-overviewmap-box",Xt.style.boxSizing="border-box",this.boxOverlay_=new Gt.Z({position:[0,0],positioning:"center-center",element:Xt}),this.ovmap_.addOverlay(this.boxOverlay_);const Ee=this.element;Ee.className=F+" "+c.XV+" "+c.hg+(this.collapsed_&&this.collapsible_?" "+c.hN:"")+(this.collapsible_?"":" ol-uncollapsible"),Ee.appendChild(this.ovmapDiv_),Ee.appendChild(St);const se=this,Qt=this.boxOverlay_,Fe=this.boxOverlay_.getElement(),We=function(Ue){const Ve=function(Ue){return{clientX:Ue.clientX,clientY:Ue.clientY}}(Ue),ii=Nt.getEventCoordinateInternal(Ve);Qt.setPosition(ii)},Ge=function(Ue){const Ve=Nt.getEventCoordinateInternal(Ue);se.getMap().getView().setCenterInternal(Ve),window.removeEventListener("mousemove",We),window.removeEventListener("mouseup",Ge)};Fe.addEventListener("mousedown",function(){window.addEventListener("mousemove",We),window.addEventListener("mouseup",Ge)})}setMap(m){const F=this.getMap();if(m!==F){if(F){const Q=F.getView();Q&&this.unbindView_(Q),this.ovmap_.setTarget(null)}if(super.setMap(m),m){this.ovmap_.setTarget(this.ovmapDiv_),this.listenerKeys.push((0,w.oL)(m,bt.Z.PROPERTYCHANGE,this.handleMapPropertyChange_,this));const Q=m.getView();Q&&(this.bindView_(Q),Q.isDef()&&(this.ovmap_.updateSize(),this.resetExtent_())),this.ovmap_.isRendered()||this.updateBoxAfterOvmapIsRendered_()}}}handleMapPropertyChange_(m){if(m.key===A.Z.VIEW){const F=m.oldValue;F&&this.unbindView_(F);const Q=this.getMap().getView();this.bindView_(Q)}else!this.ovmap_.isRendered()&&(m.key===A.Z.TARGET||m.key===A.Z.SIZE)&&this.ovmap_.updateSize()}bindView_(m){if(!this.view_){const F=new kt.ZP({projection:m.getProjection()});this.ovmap_.setView(F)}m.addChangeListener(ie.Z.ROTATION,this.boundHandleRotationChanged_),this.handleRotationChanged_()}unbindView_(m){m.removeChangeListener(ie.Z.ROTATION,this.boundHandleRotationChanged_)}handleRotationChanged_(){this.rotateWithView_&&this.ovmap_.getView().setRotation(this.getMap().getView().getRotation())}validateExtent_(){const m=this.getMap(),F=this.ovmap_;if(!m.isRendered()||!F.isRendered())return;const Q=m.getSize(),lt=m.getView().calculateExtentInternal(Q);if(this.viewExtent_&&(0,zt.fS)(lt,this.viewExtent_))return;this.viewExtent_=lt;const _t=F.getSize(),Nt=F.getView().calculateExtentInternal(_t),Xt=F.getPixelFromCoordinateInternal((0,zt.rL)(lt)),Jt=F.getPixelFromCoordinateInternal((0,zt.w$)(lt)),Ee=Math.abs(Xt[0]-Jt[0]),se=Math.abs(Xt[1]-Jt[1]),Qt=_t[0],Fe=_t[1];Ee<.1*Qt||se<.1*Fe||Ee>.75*Qt||se>.75*Fe?this.resetExtent_():(0,zt.r4)(Nt,lt)||this.recenter_()}resetExtent_(){const m=this.getMap(),F=this.ovmap_,Q=m.getSize(),lt=m.getView().calculateExtentInternal(Q),_t=F.getView(),St=Math.log(7.5)/Math.LN2,Nt=1/(.1*Math.pow(2,St/2));(0,zt.H9)(lt,Nt),_t.fitInternal((0,ue.oJ)(lt))}recenter_(){const m=this.getMap(),F=this.ovmap_,Q=m.getView();F.getView().setCenterInternal(Q.getCenterInternal())}updateBox_(){const m=this.getMap(),F=this.ovmap_;if(!m.isRendered()||!F.isRendered())return;const Q=m.getSize(),V=m.getView(),lt=F.getView(),_t=this.rotateWithView_?0:-V.getRotation(),St=this.boxOverlay_,Nt=this.boxOverlay_.getElement(),Xt=V.getCenterInternal(),Jt=V.getResolution(),Ee=lt.getResolution(),se=Q[0]*Jt/Ee,Qt=Q[1]*Jt/Ee;St.setPosition(Xt),Nt&&(Nt.style.width=se+"px",Nt.style.height=Qt+"px",Nt.style.transform="rotate("+_t+"rad)")}updateBoxAfterOvmapIsRendered_(){this.ovmapPostrenderKey_||(this.ovmapPostrenderKey_=(0,w.Vx)(this.ovmap_,Ct.Z.POSTRENDER,function(m){delete this.ovmapPostrenderKey_,this.updateBox_()},this))}handleClick_(m){m.preventDefault(),this.handleToggle_()}handleToggle_(){this.element.classList.toggle(c.hN),this.collapsed_?(0,L.$H)(this.collapseLabel_,this.label_):(0,L.$H)(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_;const m=this.ovmap_;if(!this.collapsed_){if(m.isRendered())return this.viewExtent_=void 0,void m.render();m.updateSize(),this.resetExtent_(),this.updateBoxAfterOvmapIsRendered_()}}getCollapsible(){return this.collapsible_}setCollapsible(m){this.collapsible_!==m&&(this.collapsible_=m,this.element.classList.toggle("ol-uncollapsible"),!m&&this.collapsed_&&this.handleToggle_())}setCollapsed(m){!this.collapsible_||this.collapsed_===m||this.handleToggle_()}getCollapsed(){return this.collapsed_}getRotateWithView(){return this.rotateWithView_}setRotateWithView(m){this.rotateWithView_!==m&&(this.rotateWithView_=m,0!==this.getMap().getView().getRotation()&&(this.rotateWithView_?this.handleRotationChanged_():this.ovmap_.getView().setRotation(0),this.viewExtent_=void 0,this.validateExtent_(),this.updateBox_()))}getOverviewMap(){return this.ovmap_}render(m){this.validateExtent_(),this.updateBox_()}};var Ot=a(993),At=a(7274),Yt=a(5267),ge=a(524),qt=a(2663),gt=a(5338),Mt=a(4879),Zt=a(1179),jt=a(4537),Wt=a(7560),he=a(8692);const _e=["mapDiv"];function Le(ct,m){1&ct&&(jt.TgZ(0,"div",3),jt._uU(1,"+"),jt.qZA())}let It=(()=>{class ct{constructor(F,Q){this.mapSvc=F,this.ngZone=Q,this.subs=[],this.mapSize=[0,0],this.initialMapStateSet=!1,this.removePopupsOnMouseLeave=V=>{this.mapSvc.removeAllPopups(lt=>"pointermove"===lt.get("addEvent"))}}ngOnInit(){this.subscribeToMapState(),this.initMap(),this.subscribeToLayers()}ngAfterViewInit(){this.map.setTarget(this.mapDivView.nativeElement),this.subscribeToMapEvents(),this.map.getTargetElement().addEventListener("mouseleave",this.removePopupsOnMouseLeave)}ngAfterViewChecked(){this.updateMapSize()}ngOnDestroy(){this.subs.forEach(Q=>Q.unsubscribe());const F=this.mapStateSvc.getMapState().value;F.options.notifier="user",this.mapStateSvc.setMapState(F),this.map&&(this.map.un("moveend",this.mapOnMoveend),this.map.un("click",this.mapOnClickMove),this.map.un("dblclick",this.mapOnDclick),this.map.getTargetElement().removeEventListener("mouseleave",this.removePopupsOnMouseLeave),this.map.getInteractions().forEach(Q=>{this.map.removeInteraction(Q)}))}getMapDiv(){return this.mapDivView&&this.mapDivView.nativeElement?{width:this.mapDivView.nativeElement.offsetWidth,height:this.mapDivView.nativeElement.offsetHeight}:null}updateMapSize(){const F=this.getMapDiv();if(F)if(F.width===this.mapSize[0]&&F.height===this.mapSize[1]){if(!this.initialMapStateSet){const Q=this.mapStateSvc.getMapState().getValue();this.setMapState(Q),this.initialMapStateSet=!0}}else this.ngZone.runOutsideAngular(()=>{this.map.updateSize(),this.mapSize=this.map.getSize()})}addUpdateLayers(F,Q,V){const lt=this.mapSvc.getLayerGroups(Q)[0].getLayers(),_t=V.reduce((St,Nt)=>St+this.mapSvc.getLayers(Nt).length,0);F.length!==this.mapSvc.getLayers(Q).length?this.mapSvc.setUkisLayers(F,Q,_t):this.updateLayers(F,Q,_t,lt)}updateLayers(F,Q,V,lt){for(const _t of F){const St=this.mapSvc.getLayerByKey({key:"id",value:_t.id},Q);if(St){St.getVisible()!==_t.visible&&((0,Mt.f$)(St,_t.visible,_t instanceof I.AO),this.mapSvc.hideAllPopups(!_t.visible,Jt=>{const se=Jt.getId().toString().split(":")[0];return!se||(se===_t.id?se===_t.id:void 0)})),St.getOpacity()!==_t.opacity&&(0,Mt.yv)(St,_t.opacity,_t instanceof I.AO),this.updateLayerSource(_t,St);const Nt=F.indexOf(_t),Xt=V>0?Nt+V:Nt;St.getZIndex()!==Xt&&((0,Mt.n8)(St,Nt,lt),(0,Mt.AH)(St,Nt,V)),this.updateLayerParamsWith(St,_t)}}}updateLayerSource(F,Q){if(F instanceof I.AO&&Q instanceof P.Z){const V=F.custom_layer.getSource(),lt=Q.getSource();V&&(0,S.sq)(lt)!==(0,S.sq)(V)&&(Q.setSource(V),lt instanceof ge.ZP&&lt.dispose())}else if(F instanceof I.AO&&F.custom_layer instanceof p.Z&&Q instanceof p.Z){const V=F.custom_layer.getLayers().getArray();Q.getLayers().getArray().forEach((_t,St)=>{const Nt=V[St];if(_t instanceof P.Z&&Nt instanceof P.Z){const Xt=_t.getSource(),Jt=Nt.getSource();Jt&&(0,S.sq)(Xt)!==(0,S.sq)(Jt)&&_t.setSource(Jt)}})}}updateLayerParamsWith(F,Q){switch(Q.type){case I.MR:this.updateWmsLayerParamsWith(F,Q);break;case I.$6:this.updateWmtsLayerParamsWith(F,Q);break;case I.Sw:this.updateGeojsonLayerParamsWith(F,Q);break;case I.KF:this.updateWfsLayerParamsWith(F,Q);break;case I.CY:this.updateTmsLayerParamsWith(F,Q)}}updateTmsLayerParamsWith(F,Q){Q instanceof I.DJ&&(0,gt.bg)(F,Q.options.style,Q.options.styleSource)}updateWfsLayerParamsWith(F,Q){Q.options&&Q.options.style!==F.getStyle()&&F.setStyle(Q.options.style),F.getSource().getUrl()!==Q.url&&F.getSource().setUrl(Q.url)}updateGeojsonLayerParamsWith(F,Q){const V=F.getSource();if(V){if(Q.data){const lt=this.mapSvc.geoJsonToFeatures(Q.data);if(V instanceof qt.Z){const _t=V.getSource();_t.clear(),_t.addFeatures(lt)}else V.clear(),V.addFeatures(lt)}else Q.url&&(V instanceof qt.Z?V.getSource().setUrl(Q.url):V.setUrl(Q.url));"object"==typeof Q?.cluster&&"distance"in Q.cluster&&V instanceof qt.Z&&V.setDistance(Q.cluster.distance)}Q?.options?.style&&F.setStyle(Q.options.style)}updateWmsLayerParamsWith(F,Q){if(F instanceof P.Z){const lt=F.getSource().getParams(),_t=Q.params;this.shallowEqual(lt,_t)||F.getSource().updateParams(_t)}}updateWmtsLayerParamsWith(F,Q){if(F instanceof P.Z){const V=F.getSource(),lt=V.getStyle(),_t=V.getFormat(),St=V.getVersion(),Nt=V.getMatrixSet(),Xt=Q.params.style,Jt=Q.params.format,Ee=Q.params.version,se=Q.params.matrixSetOptions.matrixSet;if(void 0!==Xt&&lt!==Xt||void 0!==Jt&&_t!==Jt||void 0!==Ee&&St!==Ee||void 0!==se&&Nt!==se){const Qt=Q.filtertype.toLowerCase();this.mapSvc.updateUkisLayer(Q,Qt)}}}shallowEqual(F,Q){const V=Object.getOwnPropertyNames(F),lt=Object.getOwnPropertyNames(Q);if(V.length!==lt.length)return!1;for(const _t of V)if(F[_t]!==Q[_t])return!1;return!0}addUpdateBaseLayers(F){const Q=this.mapSvc.getLayerGroups("baselayers")[0].getLayers();if(F.length!==this.mapSvc.getLayers("baselayers").length){const V=F.filter(lt=>!0===lt.visible);0===V.length?F[0].visible=!0:V.length>1&&(F.forEach(lt=>lt.visible=!1),F[0].visible=!0),this.mapSvc.setUkisLayers(F,"baselayers")}else for(const V of F){const lt=this.mapSvc.getLayerByKey({key:"id",value:V.id},"baselayers");if(lt){const _t=F.indexOf(V);lt.getVisible()!==V.visible&&(0,Mt.f$)(lt,V.visible,V instanceof I.AO),lt.getZIndex()!==_t&&(Q.remove(lt),Q.insertAt(_t,lt),(0,Mt.AH)(lt,_t)),lt.getOpacity()!==V.opacity&&(0,Mt.yv)(lt,V.opacity,V instanceof I.AO),this.updateLayerSource(V,lt),this.updateLayerParamsWith(lt,V)}}}subscribeToLayers(){if(this.layersSvc){const F=this.layersSvc.getBaseLayers().subscribe(lt=>this.addUpdateBaseLayers(lt));this.subs.push(F);const Q=this.layersSvc.getLayers().subscribe(lt=>this.addUpdateLayers(lt,"layers",["baselayers"]));this.subs.push(Q);const V=this.layersSvc.getOverlays().subscribe(lt=>this.addUpdateLayers(lt,"overlays",["baselayers","layers"]));this.subs.push(V)}}setMapState(F){const Q=this.mapStateSvc.getLastAction().getValue();"user"===F.options.notifier&&("setExtent"===Q?this.mapSvc.setExtent(F.extent,!0):"setState"===Q&&(this.mapSvc.setZoom(F.zoom),this.mapSvc.setCenter([F.center.lon,F.center.lat],!0)))}subscribeToMapState(){if(this.mapStateSvc){const F=this.mapStateSvc.getMapState().pipe(function k(ct){return m=>m.lift(new z(ct))}(1)).subscribe(Q=>this.setMapState(Q));this.subs.push(F)}}subscribeToMapEvents(){this.mapOnMoveend=F=>{const Q=this.mapStateSvc.getMapState().getValue(),V=this.mapSvc.getZoom(),lt=this.mapSvc.getCenter(!0),_t=this.mapSvc.getCurrentExtent(!0),St={lat:parseFloat(lt[1]),lon:parseFloat(lt[0])},Nt=new G.U5(V,St,{notifier:"map"},_t,Q.time);this.mapStateSvc.setMapState(Nt)},this.map.on("moveend",this.mapOnMoveend),this.mapOnClickMove=F=>{this.mapSvc.layersOnMapEvent(F)},this.map.on(["click","pointermove"],this.mapOnClickMove),this.mapOnDclick=F=>{this.mapSvc.removeAllPopups()},this.map.on("dblclick",this.mapOnDclick)}initMap(){const F=this.mapSvc.createMap();this.map=F.map;const Q=this.map.getInteractions();(0,Zt.c)().forEach(lt=>{Q.getArray().find(St=>St.constructor.name===lt.constructor.name)||this.map.addInteraction(lt)}),this.setControls(),this.layersSvc||console.log("there is no layersSvc as defined!"),this.mapStateSvc||console.log("there is no mapStateSvc as defined!")}setControls(){const F=[],Q=[];if(this.map&&(this.map.getControls().getArray().forEach(lt=>Q.push(lt)),this.map.getControls().clear()),this.controls&&this.map){if(!1!==this.controls.attribution){let V={collapsible:!0,collapsed:!1};"object"==typeof this.controls.attribution&&(V=Object.assign(V,this.controls.attribution));const lt=new d.Z(V);F.push(lt)}if(this.controls.scaleLine){let V={};"object"==typeof this.controls.scaleLine&&(V=Object.assign(V,this.controls.scaleLine));const lt=new E(V);F.push(lt)}if(!1!==this.controls.zoom){let V={};"object"==typeof this.controls.zoom&&(V=Object.assign(V,this.controls.zoom));const lt=new v.Z(V);F.push(lt)}if(this.controls.mousePosition){let V={coordinateFormat:_t=>(0,O.yZ)(_t,2),projection:"EPSG:4326"};"object"==typeof this.controls.mousePosition&&(V=Object.assign(V,this.controls.mousePosition));const lt=new K(V);F.push(lt)}if(this.controls.fullScreen){let V={};"object"==typeof this.controls.fullScreen&&(V=Object.assign(V,this.controls.fullScreen));const lt=new ht(V);F.push(lt)}if(this.controls.overviewMap){const V=document.createElement("spawn");V.innerHTML='<clr-icon shape="world"></clr-icon>';let lt={layers:[new Ot.Z({source:new At.Z})],label:V};"object"==typeof this.controls.overviewMap&&(lt=Object.assign(lt,this.controls.overviewMap));const _t=new dt(lt);F.push(_t)}if(this.controls.rotate){let V={};"object"==typeof this.controls.rotate&&(V=Object.assign(V,this.controls.rotate));const lt=new Yt.Z(V);F.push(lt)}F.length&&(Q.filter(lt=>!F.includes(lt)).forEach(lt=>F.push(lt)),this.map.getControls().extend(F))}}}return ct.\u0275fac=function(F){return new(F||ct)(jt.Y36(Wt.B),jt.Y36(jt.R0b))},ct.\u0275cmp=jt.Xpm({type:ct,selectors:[["ukis-map-ol"]],viewQuery:function(F,Q){if(1&F&&jt.Gf(_e,5),2&F){let V;jt.iGM(V=jt.CRH())&&(Q.mapDivView=V.first)}},inputs:{layersSvc:"layersSvc",mapStateSvc:["mapState","mapStateSvc"],controls:"controls"},decls:3,vars:1,consts:[["ref","map",1,"map"],["mapDiv",""],["class","crosshair",4,"ngIf"],[1,"crosshair"]],template:function(F,Q){1&F&&(jt.TgZ(0,"div",0,1),jt.YNc(2,Le,2,0,"div",2),jt.qZA()),2&F&&(jt.xp6(2),jt.Q6J("ngIf",Q.controls&&Q.controls.crosshair))},dependencies:[he.O5],styles:['@charset "UTF-8";:root{--ukis-crosshair-color: #ff0004;--ukis-popup-bg-color: rgb(238, 238, 238);--ukis-drop-shadow: drop-shadow(0 1px 4px rgba(0, 0, 0, .2));--ukis-ol-bbox-bg-color: rgba(255, 255, 255, .4);--ukis-ol-bbox-border-color: rgba(87, 87, 87, .4);--ukis-ol-overviewmap-left: .5em;--ukis-ol-overviewmap-bottom: 3em;--ukis-ol-control-bg-color: rgba(87, 87, 87, .6);--ukis-ol-control-border-color: rgba(87, 87, 87, .4)}.map{width:100%;height:100%;position:relative}.ol-popup{position:absolute;background-color:var(--ukis-popup-bg-color);filter:var(--ukis-drop-shadow);padding:15px;border-radius:2px;bottom:12px;left:-50px;min-width:280px;display:none;z-index:1000000}.ol-popup .ol-popup-closer{text-decoration:none;position:absolute;top:0;right:8px;cursor:pointer}.ol-popup .ol-popup-closer:after{content:"\\2716"}.ol-popup:after,.ol-popup:before{top:100%;border:solid transparent;content:" ";height:0;width:0;position:absolute;pointer-events:none}.ol-popup:after{border-top-color:var(--ukis-popup-bg-color);border-width:10px;left:48px;margin-left:-10px}.ol-popup:before{border-width:11px;left:48px;margin-left:-11px}.ol-popup.hidden{visibility:hidden}.crosshair{top:50%;left:50%;font-size:large;color:var(--ukis-crosshair-color);z-index:1;position:absolute;cursor:default}.ol-control{padding:1px;--ol-subtle-background-color: #fff6}.ol-control button{--ol-subtle-foreground-color: #fff;--ol-foreground-color: #fff;cursor:pointer;background-color:var(--ukis-ol-control-bg-color)}.ol-control button:focus{background-color:var(--ukis-ol-control-bg-color)}.ol-control button:hover{background-color:var(--ukis-ol-control-border-color)}.ol-scale-line{background:rgba(255,255,255,.4);line-height:1.375em;padding:1px}.ol-scale-line .ol-scale-line-inner{background:var(--ukis-ol-control-bg-color);border-color:var(--ukis-ol-control-bg-color);--ol-foreground-color: #fff}.ol-attribution:not(.ol-collapsed){padding:0 2px}.ol-attribution ul{font-size:.5rem}.ol-box{background-color:var(--ukis-ol-bbox-bg-color);border-color:var(--ukis-ol-bbox-border-color)!important}.ol-box.ol-drag-select{border-color:var(--clr-color-action-600, var(--fallback-color-no-clr))!important}.ol-overviewmap{left:var(--ukis-ol-overviewmap-left)!important;bottom:var(--ukis-ol-overviewmap-bottom)!important}\n'],encapsulation:2}),ct})()},7560:(Bt,ot,a)=>{"use strict";a.d(ot,{B:()=>Ze});var G=a(4537),D=a(5548),k=a(6942),z=a(5109),U=a(2462),I=a(7521),S=a(1591),P=a(2417),p=a(7319),d=a(4420),u=a(3998),c=a(6906),s=a(993),f=a(7356),n=a(585),h=a(978),g=a(5338),e=a(2705),E=a(6114),v=a(6290),x=a(6027),w=a(3298),O=a(6819),y=a(3242),R=a(9375),W=a(6941),K=a(5809),nt=a(9015);const L=class A extends y.Z{constructor(ct){const m=void 0!==ct.requestEncoding?ct.requestEncoding:"KVP",F=ct.tileGrid;let Q=ct.urls;void 0===Q&&void 0!==ct.url&&(Q=(0,K.Gk)(ct.url)),super({attributions:ct.attributions,attributionsCollapsible:ct.attributionsCollapsible,cacheSize:ct.cacheSize,crossOrigin:ct.crossOrigin,interpolate:ct.interpolate,projection:ct.projection,reprojectionErrorThreshold:ct.reprojectionErrorThreshold,tileClass:ct.tileClass,tileGrid:F,tileLoadFunction:ct.tileLoadFunction,tilePixelRatio:ct.tilePixelRatio,urls:Q,wrapX:void 0!==ct.wrapX&&ct.wrapX,transition:ct.transition,zDirection:ct.zDirection}),this.version_=void 0!==ct.version?ct.version:"1.0.0",this.format_=void 0!==ct.format?ct.format:"image/jpeg",this.dimensions_=void 0!==ct.dimensions?ct.dimensions:{},this.layer_=ct.layer,this.matrixSet_=ct.matrixSet,this.style_=ct.style,this.requestEncoding_=m,this.setKey(this.getKeyForDimensions_()),Q&&Q.length>0&&(this.tileUrlFunction=(0,K.Un)(Q.map(this.createFromWMTSTemplate.bind(this))))}setUrls(ct){this.urls=ct;const m=ct.join("\n");this.setTileUrlFunction((0,K.Un)(ct.map(this.createFromWMTSTemplate.bind(this))),m)}getDimensions(){return this.dimensions_}getFormat(){return this.format_}getLayer(){return this.layer_}getMatrixSet(){return this.matrixSet_}getRequestEncoding(){return this.requestEncoding_}getStyle(){return this.style_}getVersion(){return this.version_}getKeyForDimensions_(){const ct=this.urls?this.urls.slice(0):[];for(const m in this.dimensions_)ct.push(m+"-"+this.dimensions_[m]);return ct.join("/")}updateDimensions(ct){Object.assign(this.dimensions_,ct),this.setKey(this.getKeyForDimensions_())}createFromWMTSTemplate(ct){const m=this.requestEncoding_,F={layer:this.layer_,style:this.style_,tilematrixset:this.matrixSet_};"KVP"==m&&Object.assign(F,{Service:"WMTS",Request:"GetTile",Version:this.version_,Format:this.format_}),ct="KVP"==m?(0,W.B)(ct,F):ct.replace(/\{(\w+?)\}/g,function(lt,_t){return _t.toLowerCase()in F?F[_t.toLowerCase()]:lt});const Q=this.tileGrid,V=this.dimensions_;return function(lt,_t,St){if(!lt)return;const Nt={TileMatrix:Q.getMatrixId(lt[0]),TileCol:lt[1],TileRow:lt[2]};Object.assign(Nt,V);let Xt=ct;return Xt="KVP"==m?(0,W.B)(Xt,Nt):Xt.replace(/\{(\w+?)\}/g,function(Jt,Ee){return Nt[Ee]}),Xt}}};var M=a(1053);const N=class C extends M.Z{constructor(ct){super({extent:ct.extent,origin:ct.origin,origins:ct.origins,resolutions:ct.resolutions,tileSize:ct.tileSize,tileSizes:ct.tileSizes,sizes:ct.sizes}),this.matrixIds_=ct.matrixIds}getMatrixId(ct){return this.matrixIds_[ct]}getMatrixIds(){return this.matrixIds_}};var it=a(3149),Y=a(524),st=a(2663),ht=a(9573),Tt=a(8898),vt=a(4007),Ct=a(2632),bt=a(3669),Gt=a(3431),kt=a(9543),ie=a(2258),zt=a(4720),ue=a(1786),de=a(8185),ce=a(694),Se=a(795),dt=a(5253),Ot=a(2659),At=a(513),Yt=a(9765),ge=a(4879);const qt="type",gt="filtertype",Mt="id",Zt="groupID",jt="groupName",Wt="title",_e="EPSG:4326",Le="popup";let Ze=(()=>{class It{constructor(m,F){this.app=m,this.envInjector=F,this.hitTolerance=0,this.hitLayerCurr=null,this.hitLayerPrev=null,this.projectionChange=new Yt.xQ,this.dynamicPopupComponents=new Map,this.popupEvents=new Yt.xQ,this.filterLayerNoPopup=Q=>{const V=Q.get(Le);let lt=!0;return V||(lt=!1),V&&this.isPopupObj(V)&&!0===V.filterLayer&&(lt=!1),lt},this.map=new k.Z({controls:[]}),this.view=new z.ZP,this.EPSG="EPSG:3857"}createMap(m){const V=new S.Z({layers:[]});V.set(gt,"baselayers"),V.set(Wt,"Base maps"),V.set(Mt,"ID_filtertype_baselayers");const lt=new S.Z({layers:[]});lt.set(gt,"layers"),lt.set(Wt,"Layers"),lt.set(Mt,"ID_filtertype_layers");const _t=new S.Z({layers:[]});_t.set(gt,"overlays"),_t.set(Wt,"Overlays"),_t.set(Mt,"ID_filtertype_overlays"),this.viewOptions={center:(0,nt.vs)([0,0],_e,this.EPSG),zoom:0,projection:(0,nt.U2)(this.EPSG)},this.view.constrainRotation&&(this.viewOptions.constrainRotation=this.view.constrainRotation),this.view.enableRotation&&(this.viewOptions.enableRotation=this.view.enableRotation),this.view.extent&&(this.viewOptions.extent=this.view.extent),this.view.constrainOnlyCenter&&(this.viewOptions.constrainOnlyCenter=this.view.constrainOnlyCenter),this.view.smoothExtentConstraint&&(this.viewOptions.smoothExtentConstraint=this.view.smoothExtentConstraint),this.view.getMaxResolution()&&(this.viewOptions.maxResolution=this.view.getMaxResolution()),this.view.getMinResolution()&&(this.viewOptions.minResolution=this.view.getMinResolution()),this.view.getMaxZoom()&&(this.viewOptions.maxZoom=this.view.getMaxZoom()),this.view.getMinZoom()&&(this.viewOptions.minZoom=this.view.getMinZoom()),this.view.multiWorld&&(this.viewOptions.multiWorld=this.view.multiWorld),this.view.constrainResolution&&(this.viewOptions.constrainResolution=this.view.constrainResolution),this.view.smoothResolutionConstraint&&(this.viewOptions.smoothResolutionConstraint=this.view.smoothResolutionConstraint),this.view.getResolution()&&(this.viewOptions.resolution=this.view.getResolution()),this.view.getResolutions()&&(this.viewOptions.resolutions=this.view.getResolutions()),this.view.rotation&&(this.viewOptions.rotation=this.view.rotation),this.view.zoomFactor&&(this.viewOptions.zoomFactor=this.view.zoomFactor);const St=new z.ZP(this.viewOptions);return this.map.getLayerGroup().getLayers().clear(),[V,lt,_t].map(Nt=>this.map.addLayer(Nt)),this.map.setView(St),this.view=this.map.getView(),this.setProjection(this.EPSG),m&&this.map.setTarget(m),{map:this.map,view:this.view}}setHitTolerance(m){this.hitTolerance=m}getHitTolerance(){return this.hitTolerance}addBboxSelection(m,F,Q,V){Object.assign({className:"ol-drag-select",condition:m},V);const _t=new Ot.Z(V);return F&&_t.on("boxstart",St=>{F(St)}),Q&&_t.on("boxend",St=>{const Nt=_t.getGeometry().getExtent();Q(Nt,St)}),this.map.addInteraction(_t),_t}getLayers(m){const F=m.toLowerCase();let Q;return this.map.getLayers().getArray().forEach(V=>{V.get(gt)===F&&(Q=V.getLayers().getArray())}),Q}getLayersFromGroup(m,F,Q=!1){const V=m.getLayers().getArray();let lt=V;if(Q){let _t=[].concat(V);V.forEach(St=>{St instanceof S.Z&&(_t=_t.concat(this.getLayersFromGroup(St,F,!0)))}),lt=_t}return F?lt.filter(_t=>_t.get(gt)&&_t.get(gt).toLowerCase()===F.toLowerCase()):lt}getLayerByKey(m,F){const Q=this.getLayersFromGroup(this.map.getLayerGroup(),F),V=(0,ge.fA)(Q),lt=[];if(V.forEach(_t=>{_t.get(m.key)&&_t.get(m.key)===m.value&&-1===lt.indexOf(_t)&&lt.push(_t)}),!lt.length){const _t=this.getLayersFromGroup(this.map.getLayerGroup(),F,!0);_t.length&&_t.forEach(St=>{St.get(m.key)&&St.get(m.key)===m.value&&-1===lt.indexOf(St)&&lt.push(St)})}return 1===lt.length?lt[0]:null}setRecursiveKey(m,F,Q=gt){m.set(Q,F),m instanceof S.Z&&m.getLayers().forEach(V=>{this.setRecursiveKey(V,F,Q)})}addLayer(m,F){const Q=F.toLowerCase();let V;return this.map.getLayers().getArray().forEach(lt=>{lt.get(gt)===Q&&(this.isLayerInGroup(m,lt)||(V=lt.getLayers().getArray(),this.setRecursiveKey(m,Q,gt),V.push(m),lt.setLayers(new ht.Z(V))))}),V}isLayerInGroup(m,F){return!!F.getLayers().getArray().filter(lt=>lt.get(Mt)===m.get(Mt)).length}getLayerGroups(m){const F=[];return this.map.getLayers().forEach(Q=>{Q instanceof S.Z&&(m?Q.get(gt)&&Q.get(gt).toLowerCase()===m.toLowerCase()&&F.push(Q):F.push(Q))}),F}addLayers(m,F){const Q=F.toLocaleLowerCase();let V;return this.getLayerGroups(Q).forEach(_t=>{_t.getLayers().getLength()>0?(V=_t.getLayers().getArray(),m.map(Nt=>{this.isLayerInGroup(Nt,_t)||V.push(Nt)})):V=m,V.forEach(Nt=>{Nt instanceof S.Z&&this.setRecursiveKey(Nt,Q,gt)}),_t.setLayers(new ht.Z(V))}),V}setLayers(m,F){const Q=F.toLocaleLowerCase(),V=this.getLayerGroups(Q);return m.forEach(lt=>{lt instanceof S.Z&&this.setRecursiveKey(lt,F.toLocaleLowerCase(),gt)}),V.forEach(lt=>{this.cleanUpEventListeners(lt,m),lt.setLayers(new ht.Z(m))}),m}cleanUpEventListeners(m,F){const Q=m.getLayers().getArray().filter(V=>!F.map(lt=>lt.get(Mt)).includes(V.get(Mt)));this.removeListenersFromOldLayers(Q),Q.forEach(V=>m.getLayers().remove(V))}addEventsToLayer(m,F,Q){m.events&&(m.events.layer&&m.events.layer.forEach(V=>{F.getListeners(V.event)||F.on(V.event,V.listener)}),m.events.source&&m.events.source.forEach(V=>{Q.getListeners(V.event)||Q.on(V.event,V.listener)}))}removeListenersFromOldLayers(m){const F=Q=>{if("function"==typeof Q.getSource){const V=Q.getSource();V&&(V instanceof Y.ZP&&V.dispose(),V.hasListener()&&V.disposeInternal())}Q.hasListener()&&Q.disposeInternal()};m.forEach(Q=>{Q instanceof S.Z?Q.getLayers().forEach(V=>{F(V)}):Q instanceof U.Z&&F(Q)})}getLayerGroupForLayer(m){const F=this.getLayersFromGroup(this.map.getLayerGroup(),null,!0);F.push(this.map.getLayerGroup());let Q=null;return F.forEach(V=>{if(V instanceof S.Z){const _t=this.getLayersFromGroup(V).find(St=>St===m);_t&&(Q={group:V,layer:_t})}}),Q}removeLayerByKey(m,F){const Q=F.toLocaleLowerCase(),V=this.getLayerByKey(m,Q);if(V){const lt=this.getLayerGroupForLayer(V);if(lt.group){const _t=this.getLayersFromGroup(lt.group).filter(St=>St!==V);lt.group.setLayers(new ht.Z(_t))}}}updateLayerByKey(m,F,Q){const V=Q.toLocaleLowerCase();this.map.getLayers().forEach(lt=>{if(lt.get(gt)===V){const _t=lt.getLayers();_t.forEach((St,Nt)=>{if(St.get(m.key)&&St.get(m.key)===m.value){const Xt=F.getProperties(),Jt=F.getExtent(),Ee=F.getMaxZoom(),se=F.getMinZoom(),Qt=F.getOpacity(),Fe=F.getVisible(),Ye=F.getZIndex();if(St instanceof I.Z&&F instanceof I.Z){const We=F.getSource();St.setSource(We)}Xt&&St.setProperties(Xt),Jt&&St.setExtent(Jt),Ee&&St.setMaxZoom(Ee),se&&St.setMinZoom(se),Qt&&St.setOpacity(Qt),Fe&&St.setVisible(Fe),Ye&&(0,ge.AH)(St,Ye),St.changed(),_t.setAt(Nt,St)}}),lt.setLayers(_t)}})}removeAllLayers(m){const F=m.toLowerCase();let Q;this.map.getLayers().getArray().forEach(V=>{V.get(gt)===F&&(Q=V.getLayers(),Q.clear())})}setUkisLayers(m,F,Q){const V=F.toLowerCase(),lt=[];if(m.length<1&&"baselayers"!==V?this.removeAllLayers(V):m.forEach((_t,St)=>{const Nt=this.create_layers(_t);Nt&&((0,ge.AH)(Nt,St,Q),lt.push(Nt))}),lt.length>0)return this.setLayers(lt,V),{type:V,layers:lt}}setUkisLayer(m,F){F||(F=m.filtertype);const Q=F.toLowerCase(),lt=this.getLayers(Q).find(St=>St.get(Mt)===m.id),_t=this.create_layers(m);lt?(this.removeLayerByKey({key:Mt,value:lt.get(Mt)},F),this.addLayer(_t,F)):this.addLayer(_t,F)}updateUkisLayer(m,F){F||(F=m.filtertype);const Q=F.toLowerCase(),lt=this.getLayers(Q).find(St=>St.get(Mt)===m.id),_t=this.create_layers(m);_t&&this.updateLayerByKey({key:Mt,value:lt.get(Mt)},_t,F)}create_layers(m){let F;switch(m.type){case D.Aq:F=this.create_xyz_layer(m);break;case D.MR:F=this.create_wms_layer(m);break;case D.$6:F=this.create_wmts_layer(m);break;case D.CY:F=this.create_tms_layer(m);break;case D.Sw:F=this.create_geojson_layer(m);break;case D.R6:F=this.create_kml_layer(m);break;case D.KF:F=this.create_wfs_layer(m);break;case D.ED:F=this.create_custom_layer(m);break;case D.jn:F=this.create_stacked_layer(m)}return F}createOlLayerOptions(m,F,Q){Q&&(m.attribution&&Q.setAttributions([m.attribution]),m.continuousWorld&&(Q.wrapX_=m.continuousWorld),m.popup&&!m.crossOrigin&&null!==m.crossOrigin&&this.sourceSetCross(Q),(m.crossOrigin||null===m.crossOrigin)&&this.sourceSetCross(Q));const V={opacity:m.opacity||1,visible:m.visible,zIndex:1,id:m.id,name:m.name,filtertype:m.filtertype,type:F,legendImg:m.legendImg};return Q&&(V.source=Q),m.popup&&(V.popup=m.popup,V.className=m.id),m.maxResolution&&(V.maxResolution=m.maxResolution),m.minResolution&&(V.minResolution=m.minResolution),m.maxZoom&&(V.maxZoom=m.maxZoom),m.minZoom&&(V.minZoom=m.minZoom),m.bbox&&(V.extent=(0,nt.$A)(m.bbox.slice(0,4),_e,this.getProjection().getCode())),V}create_xyz_layer(m){const F={wrapX:!1};m.crossOrigin&&(F.crossOrigin=m.crossOrigin);const Q=new v.Z(F),V=this.createOlLayerOptions(m,"xyz",Q),_t=new s.Z(Object.assign(V,{preload:0,useInterimTilesOnError:!0}));return this.setSubdomains(m,_t),this.setCrossOrigin(m,_t),this.addEventsToLayer(m,_t,Q),_t}create_tms_layer(m){let F=null;if(m instanceof D.YY)return F=this.create_xyz_layer(m),F.set("type","tms"),F;if(m instanceof D.DJ){const Q=new h.Z({format:new E.Z,tileGrid:(0,e.dl)({minZoom:m.minZoom||void 0,maxZoom:m.maxZoom||void 0}),url:m.url,wrapX:!1}),V=this.createOlLayerOptions(m,"tms",Q);F=new n.Z(Object.assign(V,{declutter:!0,renderMode:"hybrid"})),this.setCrossOrigin(m,F),this.addEventsToLayer(m,F,Q);const _t=m?.options?.style,St=m?.options?.styleSource;return _t&&St&&((0,g.h0)(F,_t),(0,g.bg)(F,_t,St).then(Nt=>{this.setSubdomains(m,F)})),F}}create_wms_layer(m){let F;return"true"===m.params?.TILED||null==m.params?.TILED?F=this.create_tiled_wms_layer(m):"false"===m.params?.TILED&&(F=this.create_image_wms_layer(m)),F}create_tiled_wms_layer(m){const F={params:Object.assign({},this.keysToUppercase(m.params)),wrapX:!1};m.tileSize&&(F.tileGrid=this.getTileGrid("default",null,m.tileSize),delete F.params.tileSize),m.crossOrigin&&(F.crossOrigin=m.crossOrigin);const Q=new w.Z(F),lt=this.createOlLayerOptions(m,"wms",Q),_t=new s.Z(Object.assign(lt,{preload:0,useInterimTilesOnError:!0}));return this.setSubdomains(m,_t),this.addEventsToLayer(m,_t,Q),_t}create_image_wms_layer(m){const F={params:Object.assign({},this.keysToUppercase(m.params)),url:m.url},Q=new O.Z(F),V=this.createOlLayerOptions(m,"wms",Q),_t=new c.Z(Object.assign(V,{}));return this.addEventsToLayer(m,_t,Q),_t}create_wmts_layer(m){if(m instanceof D.RC){let F=this.getTileGrid("wmts"),Q=this.EPSG;m.params.matrixSetOptions&&(Q=m.params.matrixSetOptions.matrixSet,"resolutions"in m.params.matrixSetOptions?F=this.getTileGrid("wmts",null,m.tileSize,null,m.params.matrixSetOptions.resolutions):("resolutionLevels"in m.params.matrixSetOptions||"tileMatrixPrefix"in m.params.matrixSetOptions)&&(F=this.getTileGrid("wmts",m.params.matrixSetOptions.resolutionLevels,m.tileSize,m.params.matrixSetOptions.tileMatrixPrefix,null)),"matrixIds"in m.params.matrixSetOptions&&(F=this.getTileGrid("wmts",null,m.tileSize,null,null,m.params.matrixSetOptions.matrixIds)));let V={url:m.url,tileGrid:F,matrixSet:Q,wrapX:!1,layer:m.params.layer,style:m.params.style};V=Object.assign({},V,m.params),m.crossOrigin&&(V.crossOrigin=m.crossOrigin);const lt=new L(V),_t=this.createOlLayerOptions(m,"wmts",lt),Nt=new s.Z(Object.assign(_t,{}));return this.setSubdomains(m,Nt),this.setCrossOrigin(m,Nt),this.addEventsToLayer(m,Nt,lt),Nt}console.error(`layer with id: ${m.id} and type ${m.type} is no instanceof WmtsLayer!`)}create_wfs_layer(m){let F=null;F=0===m.url.indexOf("http://")||0===m.url.indexOf("https://")?new URL(m.url):new URL(m.url,window.location.origin),F.searchParams.set("srsname",this.EPSG);const Q=new it.Z({format:new Tt.Z,url:F.toString()}),V=this.createOlLayerOptions(m,"wfs",Q),lt={};m.options&&Object.assign(lt,m.options);const _t=new f.Z(Object.assign(V,lt));return m.cluster&&this.setCluster(m,_t,Q,{}),this.setSubdomains(m,_t),this.setCrossOrigin(m,_t),this.addEventsToLayer(m,_t,Q),_t}create_geojson_layer(m){let F;m.data?F=new it.Z({features:this.geoJsonToFeatures(m.data),format:new Tt.Z,wrapX:!1}):m.url&&(F=new it.Z({url:m.url,format:new Tt.Z({dataProjection:_e,featureProjection:this.EPSG}),wrapX:!1}));const Q=this.createOlLayerOptions(m,"geojson",F),V={};m.options&&Object.assign(V,m.options);const lt=new f.Z(Object.assign(Q,V));return m.cluster&&this.setCluster(m,lt,F,{}),this.setCrossOrigin(m,lt),this.addEventsToLayer(m,lt,F),lt}create_kml_layer(m){let F;m.data?F=new it.Z({features:new vt.ZP({extractStyles:!0}).readFeatures(m.data,{dataProjection:_e,featureProjection:this.EPSG}),format:new vt.ZP,wrapX:!1}):m.url&&(F=new it.Z({url:m.url,format:new vt.ZP({extractStyles:!0,crossOrigin:m.crossOrigin&&null===m.crossOrigin?m.crossOrigin:"anonymous"}),wrapX:!1}));const Q=this.createOlLayerOptions(m,"kml",F),V={};m.options&&Object.assign(V,m.options);const lt=new f.Z(Object.assign(Q,V));return m.cluster&&this.setCluster(m,lt,F,{}),this.setCrossOrigin(m,lt),this.addEventsToLayer(m,lt,Q.source),lt}setCrossOrigin(m,F){if(F instanceof I.Z){const Q=F.getSource();m.popup&&!m.crossOrigin&&null!==m.crossOrigin&&this.sourceSetCross(Q),(m.crossOrigin||null===m.crossOrigin)&&this.sourceSetCross(Q)}}setCluster(m,F,Q,V){if(m.cluster){const lt={};"object"==typeof m.cluster&&Object.assign(lt,m.cluster),lt.source=Q;const _t=new st.Z(lt);F.setSource(_t),F.setStyle(St=>{const Nt=St.get("features").length;let Xt=V[Nt];return Xt||(Xt=new ue.ZP({image:new Se.Z({radius:10,stroke:new dt.Z({color:"#fff"}),fill:new ce.Z({color:"#3399CC"})}),text:new de.Z({text:Nt.toString(),fill:new ce.Z({color:"#fff"})})}),V[Nt]=Xt),Xt})}}setSubdomains(m,F){if(m instanceof D.DJ||m instanceof D.YY){const Q=F.getSource();if(m.subdomains){if("wfs"===m.type&&Q instanceof it.Z)m.url=m.url.replace("{s}",`${m.subdomains[0]}-${m.subdomains[m.subdomains.length-1]}`),Q.setUrl(m.url);else if(!(Q instanceof it.Z)){const V=m.subdomains.map(lt=>m.url.replace("{s}",`${lt}`));Q.setUrls(V)}}else Q.setUrl(m.url)}}sourceSetCross(m){(m instanceof R.ZP||m instanceof y.Z||m instanceof x.Z)&&(m.crossOrigin="anonymous",m.crossOrigin_="anonymous")}create_custom_layer(m){if(m.custom_layer){const F=m.custom_layer;if(F instanceof I.Z){const V=F.getSource();m.attribution&&V.setAttributions([m.attribution]),V.wrapX_=!!m.continuousWorld&&m.continuousWorld,this.setCrossOrigin(m,F),this.addEventsToLayer(m,F,V),V instanceof Y.ZP&&F.on("change:source",lt=>{lt.oldValue.dispose()})}else F instanceof S.Z?F.getLayers().forEach(V=>{V.set(Zt,m.id),V.set(jt,m.name);const lt=`${m.id}_${(0,At.sq)(V)}`;if(V.get(Mt)||V.set(Mt,lt),V instanceof I.Z&&(this.setCrossOrigin(m,V),this.addEventsToLayer(m,V,V.getSource())),m.popup&&!V.get(Le)&&(V.set(Le,m.popup),"ol-layer"===V.getClassName()&&(V.className_=lt)),m.bbox){const _t=(0,nt.$A)(m.bbox.slice(0,4),_e,this.getProjection().getCode());V.setExtent(_t)}}):console.error(`The custom_layer of ${m.id} in not a openlayers Layer`);m.maxResolution&&F.setMaxResolution(m.maxResolution),m.minResolution&&F.setMinResolution(m.minResolution),m.maxZoom&&F.setMaxZoom(m.maxZoom),m.minZoom&&F.setMinZoom(m.minZoom);const Q={type:"custom",name:m.name,id:m.id,visible:m.visible,legendImg:m.legendImg,opacity:m.opacity||1,zIndex:1};if(m.popup&&!(F instanceof S.Z)&&(Q.popup=m.popup,F.className_=m.id),m.bbox){const V=(0,nt.$A)(m.bbox.slice(0,4),_e,this.getProjection().getCode());F.setExtent(V)}return F.setProperties(Q),F}console.log("attribute custom_layer not set on layer type custom!",m)}create_stacked_layer(m){if(m instanceof D.WQ){const F=m.layers.map(_t=>(_t.visible=m.visible,_t.opacity=m.opacity,m.popup&&(_t.popup=m.popup),m.events&&(_t.events=m.events),this.create_layers(_t))),Q=this.createOlLayerOptions(m,"custom");return F.forEach(_t=>{_t.set(Zt,m.id),_t.set(jt,m.name)}),new S.Z(Object.assign(Q,{layers:F}))}console.log("layer is not of type StackedLayer!",m)}resolutionsFromExtent(m,F,Q){const V=F,lt=(0,kt.Cr)(m),_t=(0,kt.dz)(m),St=Math.max(_t/Q,lt/Q),Nt=V+1,Xt=new Array(Nt);for(let Jt=0;Jt<Nt;++Jt)Xt[Jt]=St/Math.pow(2,Jt);return Xt}matrixIdsFromResolutions(m,F){return Array.from(Array(m).keys()).map(Q=>F?`${F}:${Q}`:Q)}getTileGrid(m="default",F,Q,V,lt,_t){const St=F||ie.e,Nt=Q||ie.S,Xt=V||"",Jt=this.getProjection().getExtent(),Ee=this.resolutionsFromExtent(Jt,St,Nt),se=this.matrixIdsFromResolutions(Ee.length,Xt),Qt={extent:Jt,origin:(0,kt.rL)(Jt),resolutions:lt||Ee,tileSize:[Nt,Nt]};return"wmts"===m?(Qt.matrixIds=_t||se,new N(Qt)):"default"===m?new M.Z(Qt):void 0}isPopupObj(m){return m&&"object"==typeof m&&!Array.isArray(m)}isPopupObjMove(m){return this.isPopupObj(m)&&"move"===m.event}isPopupObjClick(m){return this.isPopupObj(m)&&"click"===m.event}isPopupObjArray(m){return Array.isArray(m)&&m.length&&this.isPopupObj(m[0])}isPopupStringArray(m){return Array.isArray(m)&&m.length&&"string"==typeof m[0]}eventIsBrowserEvent(m,F){return"move"===m&&"pointermove"===F.type||"click"===m&&"click"===F.type||void 0}layersOnMapEvent(m){let F=!1;const Q=this.map.getAllLayers();let V=Q.length;const lt=new Map;let _t=null;for(;V--;){const St=Q[V];let Nt=St.getVisible(),Xt=St.getOpacity();const Jt=St.get(Zt);if(Jt){const se=this.getLayerByKey({key:Mt,value:Jt});Nt=se.getVisible(),Xt=se.getOpacity()}const Ee=St.get(Le);if(this.checkForPopupAsObservable(St,Nt,Xt,Ee,lt),Nt&&0!==Xt&&this.filterLayerExtent(St,m.pixel)&&!Ee)break;if(this.filterLayerNoPopup(St)&&St.getData&&St.getData(m.pixel)&&this.checkIsRaster(St)){const se=St.getData(m.pixel);let Qt;if((se instanceof Uint8ClampedArray||se instanceof Uint8Array||se instanceof Float32Array)&&(Qt=se[3]),Qt||se instanceof DataView){_t={layer:St,color:se};break}}else if(this.filterLayerNoPopup(St)&&this.filterLayerExtent(St,m.pixel)&&this.checkIsVector(St)){const se=this.map.getFeaturesAtPixel(m.pixel,{layerFilter:Qt=>St.get(Mt)===Qt.get(Mt)});if(se.length){_t={layer:St,feature:se[0]};break}}}if(_t){const St=_t.layer.get(Le);this.hitLayerCurr=_t.layer.get(Mt),this.hitLayerPrev||(this.hitLayerPrev=this.hitLayerCurr),(_t.color||_t.feature)&&(F=!0),this.hitLayerPrev&&this.hitLayerPrev!==this.hitLayerCurr&&(F=!1,this.hitLayerPrev=this.hitLayerCurr),this.checkTopLayerEvent(m,St)&&this.layerOnEvent(m,_t.layer,_t.color,_t.feature)}F?this.map.getTargetElement().style.cursor="pointer":(this.publishNullPropertiesAsObservable(lt,m),this.removeAllPopups(St=>"pointermove"===St.get("addEvent")),this.map.getTargetElement().style.cursor="")}checkForPopupAsObservable(m,F,Q,V,lt){F&&0!==Q&&V&&(this.isPopupObj(V)&&V.asObservable?lt.set(m.get(Mt),m):this.isPopupObjArray(V)&&V.forEach(_t=>{_t.asObservable&&lt.set(m.get(Mt),m)}))}publishNullPropertiesAsObservable(m,F){m.size&&m.forEach(Q=>{const V=Q.get(Le),lt=[];this.isPopupObj(V)&&V.asObservable?lt.push(V):this.isPopupObjArray(V)&&V.forEach(_t=>{_t.asObservable&&lt.push(_t)}),lt.forEach(_t=>{this.eventIsBrowserEvent(_t.event||"click",F)&&this.popupEvents.next({popupObj:_t,popupParams:{layerId:Q.get(Mt),layerName:Q.get("name"),mapEvent:F,layer:Q,properties:null}})})})}checkTopLayerEvent(m,F){let Q=null;const V=(lt,_t)=>{_t.event?this.eventIsBrowserEvent(_t.event,lt)&&this.isPopupObjClick(_t)?Q="click":this.eventIsBrowserEvent(_t.event,lt)&&this.isPopupObjMove(_t)&&(Q="move"):"click"===lt.type&&(Q="click")};return"boolean"==typeof F?!0===F&&"click"===m.type&&(Q="click"):this.isPopupStringArray(F)?"click"===m.type&&(Q="click"):this.isPopupObjArray(F)?F.map(lt=>{V(m,lt)}):V(m,F),Q}checkIsRaster(m){return m instanceof u.Z||m instanceof p.Z}checkIsVector(m){return m instanceof d.Z&&!this.checkIsRaster(m)}layerOnEvent(m,F,Q,V){this.checkIsRaster(F)?this.rasterOnEvent(m,F,Q):this.checkIsVector(F)&&this.vectorOnEvent(m,F,V)}filterLayerExtent(m,F){let Q=!0;const V=m.getExtent();if(V){const lt=this.map.getCoordinateFromPixel(F);(0,kt.b8)(V,lt)||(Q=!1)}return Q}vectorOnEvent(m,F,Q){if(F&&Q){const V=F.get(Le);let lt={};const St=Q.getProperties().features;if(St&&1===St.length)lt=St[0].getProperties();else{if(St&&St.length>1){if("click"===m.type){const Nt=this.getFeaturesExtent(St);return this.setExtent(Nt),!1}return!0}lt=Q.getProperties()}this.prepareAddPopup(F,m,V,Q,lt)}}rasterOnEvent(m,F,Q){const V=F.get(Le);V&&this.prepareAddPopup(F,m,V,null,null,Q)}prepareAddPopup(m,F,Q,V,lt,_t){const St=m.getProperties(),Nt={layerId:St.id,layerName:St.name||St[jt]||null,mapEvent:F,layer:m,properties:lt?Object.assign({},lt):{}};Nt.properties?.geometry&&delete Nt.properties.geometry,V&&(Nt.feature=V),_t&&(Nt.color=_t);const Xt=se=>{se&&se.filterkeys&&(Nt.properties=Object.keys(Nt.properties).filter(Qt=>se.filterkeys.includes(Qt)).reduce((Qt,Fe)=>(Qt[Fe]=Nt.properties[Fe],Qt),{}))};this.isPopupStringArray(Q)?Nt.properties=Object.keys(Nt.properties).filter(se=>Q.includes(se)).reduce((se,Qt)=>(se[Qt]=Nt.properties[Qt],se),{}):this.isPopupObjArray(Q)?Xt(Q.find(Qt=>this.eventIsBrowserEvent(Qt.event,F))):this.isPopupObj(Q)&&Xt(Q);const Jt=se=>{if(se.properties){const Qt=Object.keys(se.properties);Array.isArray(Qt)&&(Nt.properties=Object.keys(Nt.properties).reduce((Fe,Ye)=>{const We=se.properties[Ye];return We?Fe[We]=Nt.properties[Ye]:Fe[Ye]=Nt.properties[Ye],Fe},{}))}};this.isPopupObjArray(Q)?Q.forEach(se=>{this.eventIsBrowserEvent(se.event,F)&&Jt(se)}):this.isPopupObj(Q)&&Jt(Q);const Ee=se=>{"asyncPopup"in se?se.asyncPopup(Nt,Qt=>{se.asObservable?this.publishPopupEvent(se,Nt,Qt):this.addPopup(Nt,se,Qt,se.event,se.single)}):se.asObservable?this.publishPopupEvent(se,Nt):this.addPopup(Nt,se,null,se.event,se.single)};"boolean"==typeof Q||this.isPopupStringArray(Q)?this.addPopup(Nt):this.isPopupObjArray(Q)?Q.forEach(se=>{this.eventIsBrowserEvent(se.event,F)&&Ee(se)}):Q&&Ee(Q)}publishPopupEvent(m,F,Q){Q&&(F.properties=Object.assign(F.properties,Q)),this.popupEvents.next({popupObj:m,popupParams:F})}addPopup(m,F,Q,V,lt){const _t=m.layer.get(Le),St=m.layer.get(Mt),Nt="popup_move_ID",Xt="move_ID_L_F",Jt=this.getPopups().find(Qt=>Qt.getId()===Nt),Ee=m.mapEvent;let se=null;if("move"===V&&(m.color?se=`${St}:${m.color.toString()}`:m.feature?se=`${St}:${(0,At.sq)(m.feature)}`:m.layer&&(se=`${St}:${(0,At.sq)(m.layer)}`)),"move"===V&&"pointermove"===Ee.type&&Jt){let Qt;const Fe=m.feature;if(Qt=Fe&&"Point"===Fe.getGeometry()?.getType()?Fe.getGeometry().getCoordinates():Ee.coordinate,se!==Jt.get(Xt)){const Ye=this.createPopupContainer(Jt,m,F,Q,V);Jt.setElement(Ye)}Jt.setPosition(Qt),Jt.getElement().parentElement.style.zIndex="1"}else if("pointermove"!==Ee.type||V)if("pointermove"===Ee.type&&"click"===V)Jt&&this.removeAllPopups(Qt=>"pointermove"===Qt.get("addEvent"));else{let Qt=null;Qt="move"===V?Nt:m.feature?`${St}:${(0,At.sq)(m.feature)}`:m.layer?`${St}:${(0,At.sq)(m.layer)}`:`${St}:popup_${(new Date).getTime()}`;const Fe={id:Qt,autoPan:{animation:{duration:250}},positioning:"bottom-center",stopEvent:!0,insertFirst:!1};let Ye=Fe;if(this.isPopupObjArray(_t)){const Qe=_t.find(qe=>this.eventIsBrowserEvent(qe.event,Ee));Qe.options&&(Ye=Object.assign(Fe,Qe.options))}else this.isPopupObj(_t)&&_t.options&&(Ye=Object.assign(Fe,_t.options));const We=new P.Z(Ye);se&&We.set(Xt,se),lt&&this.removeAllPopups(Qe=>{const q=Qe.getId().toString().split(":")[0];return!q||(St===q?St===q:void 0)});const Ge=this.getPopups().find(Qe=>Qe.getId()===We.getId()&&We.getId()!==Nt);Ge&&(this.map.removeOverlay(Ge),this.destroyDynamicPopupComponent(Ge.getId().toString()));const Ue=this.createPopupContainer(We,m,F,Q,V);let Ve;We.getId()===Nt?We.set("addEvent","pointermove"):We.set("addEvent",Ee.type),We.set(qt,Le),We.setElement(Ue);const ii=m.feature;Ve=ii&&"Point"===ii.getGeometry()?.getType()?ii.getGeometry().getCoordinates():Ee.coordinate,We.setPosition(Ve),Jt&&"move"===V||this.map.addOverlay(We)}else Jt&&this.removeAllPopups(Qt=>"pointermove"===Qt.get("addEvent"))}createPopupContainer(m,F,Q,V,lt){const _t=document.createElement("div");_t.className="ol-popup-content";let St="";if(Q?.popupFunction){const Xt=Q.popupFunction(F);St="string"==typeof Xt?Xt:this.createPopupHtml(Xt)}else V?St="string"==typeof V?V:this.createPopupHtml(V):Object.keys(F.properties).length&&(St=this.createPopupHtml(F.properties));if(_t.innerHTML=St,Q?.dynamicPopup){const Xt=m.getId().toString();this.destroyDynamicPopupComponent(Xt),this.createDynamicPopupComponent(Xt,_t,F,Q)}const Nt=document.createElement("div");if(Nt.className="ol-popup",Nt.id=m.getId().toString(),Nt.style.display="block",!lt||"move"!==lt){const Xt=document.createElement("a");Xt.className="ol-popup-closer",Nt.appendChild(Xt);const Jt=()=>{Xt.removeEventListener("click",Jt,!1),this.map.removeOverlay(m),this.destroyDynamicPopupComponent(m.getId().toString())};Xt.addEventListener("click",Jt,!1)}return Nt.appendChild(_t),Nt}removeAllPopups(m){let F=this.getPopups();m&&(F=this.getPopups().filter(m)),F.forEach(Q=>{Q.get(qt)===Le&&(this.map.removeOverlay(Q),this.destroyDynamicPopupComponent(Q.getId().toString()))})}hideAllPopups(m,F){let Q=this.getPopups();F&&(Q=this.getPopups().filter(F)),Q.forEach(V=>{if(V.get(qt)===Le){const lt=V.getElement();m?lt.classList.add("hidden"):lt.classList.remove("hidden")}})}createPopupHtml(m){let F="<table>";for(const Q in m)m.hasOwnProperty(Q)&&(F+='<tr><td style="vertical-align: top; padding-right: 7px;"><b>'+Q+": </b></td><td>"+m[Q]+"</td></tr>");return F+="</table>",F}getPopups(){const m=[];return this.map.getOverlays().getArray().slice(0).forEach(F=>{F.get(qt)===Le&&m.push(F)}),m}destroyDynamicPopupComponent(m){this.dynamicPopupComponents.has(m)&&(this.dynamicPopupComponents.get(m).destroy(),this.dynamicPopupComponents.delete(m))}createDynamicPopupComponent(m,F,Q,V){const lt=(0,G.LMc)(V.dynamicPopup.component,{environmentInjector:this.envInjector,hostElement:F});if(V.dynamicPopup.getAttributes){const _t=V.dynamicPopup.getAttributes(Q);for(const St in _t)"undefined"!==_t[St]&&(lt.instance[St]=_t[St])}this.app.attachView(lt.hostView),this.dynamicPopupComponents.set(m,lt)}setExtent(m,F,Q){const V=(0,nt.U2)(F?_e:this.EPSG),lt=(0,nt.$A)(m.slice(0,4),V,this.getProjection().getCode()),_t={size:this.map.getSize()};return Q&&Object.assign(_t,Q),this.map.getView().fit(lt,Q),lt}setCenter(m,F){const Q=(0,nt.U2)(F?_e:this.EPSG),V=(0,nt.vs)(m,Q,this.getProjection().getCode());return this.map.getView().setCenter(V),V}getCenter(m){const F=(0,nt.U2)(m?_e:this.EPSG),Q=(0,nt.U2)(this.getProjection().getCode());return(0,nt.vs)(this.map.getView().getCenter(),Q,F)}getFeaturesExtent(m,F){const Q=m[0].getGeometry().getExtent().slice(0);if(m.forEach(V=>{(0,kt.l7)(Q,V.getGeometry().getExtent())}),F){const V=(0,nt.U2)(_e);return(0,nt.$A)(Q,this.getProjection().getCode(),V)}return Q}getCurrentExtent(m){const F=(0,nt.U2)(m?_e:this.EPSG),Q=this.map.getView().calculateExtent();return(0,nt.$A)(Q,this.getProjection().getCode(),F)}setZoom(m){this.map.getView().setZoom(m)}getZoom(){return this.map.getView().getZoom()}zoomInOut(m,F){const Q=this.map.getView();if(!Q)return;const V=F?.zoomStep||1,lt="+"===m?V:-1*V,_t=Q.getZoom();if(void 0!==_t){const St=Q.getConstrainedZoom(_t+lt);Q.getAnimating()&&Q.cancelAnimations(),Q.animate({zoom:St,duration:F?.duration||250,easing:F?.easing||zt.Vv},Nt=>{F.callback&&F.callback(Nt)})}}geoJsonToFeature(m){return new Tt.Z({dataProjection:_e,featureProjection:this.EPSG}).readFeature(m)}geoJsonToFeatures(m){return new Tt.Z({dataProjection:_e,featureProjection:this.EPSG}).readFeatures(m)}getProjection(){return this.map.getView().getProjection()}reprojectFeatures(m,F,Q){m.getFeatures().forEach(V=>{V.getGeometry().transform(F,Q)})}setProjection(m){if(m){let F={};if(this.viewOptions&&(F=this.viewOptions,F.minResolution=void 0,F.maxResolution=void 0,F.resolution=void 0,F.resolutions=void 0),m instanceof Ct.Z){F.projection=m;const lt=(0,nt.vs)(this.map.getView().getCenter(),this.map.getView().getProjection(),m);F.center=lt,F.zoom=this.map.getView().getZoom()}else"string"==typeof m&&(F.projection=m,F.center=this.map.getView().getCenter(),F.zoom=this.map.getView().getZoom());const Q=new z.ZP(F),V=this.EPSG;this.EPSG=Q.getProjection().getCode(),this.map.setView(Q),this.view=this.map.getView(),this.map.getLayers().getArray().forEach(lt=>{lt.getLayers().getArray().forEach(_t=>{if(_t instanceof I.Z){let St=_t.getSource();for(;St.source;)St=St.source;St instanceof it.Z&&this.reprojectFeatures(St,V,this.EPSG)}})}),this.projectionChange.next(this.getProjection())}}registerProjection(m){Gt.Z.defs(m.code,m.proj4js),(0,bt.z2)(Gt.Z)}getOlProjection(m){return new Ct.Z({code:m.code,extent:m.extent?m.extent:void 0,worldExtent:m.worldExtent?m.worldExtent:void 0,global:!!m.global&&m.global,units:m.units?m.units:void 0})}keysToUppercase(m){return Object.keys(m).forEach(F=>{const Q=F.toUpperCase();Q!==F&&(m[Q]=m[F],delete m[F])}),m}}return It.\u0275fac=function(m){return new(m||It)(G.LFG(G.z2F),G.LFG(G.lqb))},It.\u0275prov=G.Yz7({token:It,factory:It.\u0275fac,providedIn:"root"}),It})()},1899:(Bt,ot,a)=>{"use strict";a.d(ot,{oC:()=>U,BR:()=>G.B});var G=a(7560),k=(a(3307),a(8692)),z=a(4537);let U=(()=>{class I{}return I.\u0275fac=function(P){return new(P||I)},I.\u0275mod=z.oAB({type:I}),I.\u0275inj=z.cJS({providers:[G.B],imports:[k.ez]}),I})()},4879:(Bt,ot,a)=>{"use strict";a.d(ot,{UT:()=>Q,qS:()=>Xt,n8:()=>u,fA:()=>k,yv:()=>p,f$:()=>P,AH:()=>d,vK:()=>z,f_:()=>Zt});var G=a(1591),D=a(8975);function k(q){let $=[];for(const mt of q)if(mt instanceof G.Z){const Rt=k(mt.getLayers().getArray());$=Array.prototype.concat($,Rt)}else $.push(mt);return $}function z(q,$,mt,pt=!1){const Rt=$.getContext("2d");if(!Rt)throw new Error("The target-canvas needs to use a 2d-context.");if(!$.width||!$.height)throw new Error("TargetCanvas: width or height have not been set.");Rt instanceof CanvasRenderingContext2D&&Rt.clearRect(0,0,$.width,$.height);const Ht=q.getSize();$.width=Ht[0],$.height=Ht[1];const ne=k(q.getLayers().getArray()),me=[];for(const Me of ne)if(Me.getVisible()&&Me.getOpacity()>0){const Re=Me.on("postrender",De=>{const Xe=De.context.canvas;Rt instanceof CanvasRenderingContext2D&&(Rt.beginPath(),Rt.drawImage(Xe,0,0,Xe.clientWidth,Xe.clientHeight,0,0,$.width,$.height),Rt.closePath())});Array.isArray(Re)?Re.map(De=>me.push(De)):me.push(Re)}pt?q.on("rendercomplete",Me=>{mt($)}):q.once("rendercomplete",Me=>{for(const Re of me)(0,D.B)(Re);mt($)}),q.renderSync()}function P(q,$,mt=!1){q.setVisible($),!mt&&q instanceof G.Z&&q.getLayers().forEach(Rt=>{P(Rt,$)})}function p(q,$,mt=!1){q.setOpacity($),!mt&&q instanceof G.Z&&q.getLayers().forEach(Rt=>{p(Rt,$)})}function d(q,$,mt){q.setZIndex(mt>0?$+mt:$),q instanceof G.Z&&q.getLayers().forEach(Ht=>{d(Ht,$,mt)})}function u(q,$,mt){mt.remove(q),mt.insertAt($,q)}var c=a(6555),s=a(6906),f=a(9015);const n=q=>{let $=[];for(const mt of q){let pt;pt=Array.isArray(mt[0])?n(mt):mt,$=Array.prototype.concat($,pt)}return $},g=(q,$)=>Math.log(q)/Math.log($),e=(q,$)=>g(q,$)%1==0,w=(q,$,mt)=>{const pt=q.createShader($);if(!pt)throw new Error("No shader was created");if(q.shaderSource(pt,mt),q.compileShader(pt),!q.getShaderParameter(pt,q.COMPILE_STATUS))throw q.deleteShader(pt),new Error(`An error occurred compiling the shader: ${q.getShaderInfoLog(pt)}.    \n\n Shader code: ${mt}`);return pt},W=(q,$)=>{q.useProgram($)},M=(q,$,mt)=>{q.bindBuffer(q.ARRAY_BUFFER,mt.buffer),q.enableVertexAttribArray($),q.vertexAttribPointer($,mt.vectorSize,mt.type,mt.normalize,mt.stride,mt.offset)},ht=(q,$,mt,pt)=>{if(mt>q.getParameter(q.MAX_COMBINED_TEXTURE_IMAGE_UNITS))throw new Error(`There are only ${q.getParameter(q.MAX_COMBINED_TEXTURE_IMAGE_UNITS)} texture bind points, but you tried to bind to point nr. ${mt}.`);7===mt&&console.error(`You are about to bind to the dedicated texture-construction bind point (nr. ${mt}).\n        If after this call another texture is built, your shader will now use that new texture instead of this one!\n        Consider using another bind point.`),q.activeTexture(q.TEXTURE0+mt),q.bindTexture(q.TEXTURE_2D,$),q.uniform1i(pt,mt)},kt=(q,$,mt)=>{const pt=q.getUniformLocation($,mt);if(null===pt)throw new Error(`Couldn't find uniform ${mt} in program.`);return pt},ie=(q,$,mt,pt)=>{switch(mt){case"bool":case"int":q.uniform1i($,pt[0]);break;case"bvec2":case"ivec2":q.uniform2i($,pt[0],pt[1]);break;case"bvec3":case"ivec3":q.uniform3i($,pt[0],pt[1],pt[2]);break;case"bvec4":case"ivec4":q.uniform4i($,pt[0],pt[1],pt[2],pt[3]);break;case"bool[]":case"int[]":q.uniform1iv($,pt);break;case"bvec2[]":case"ivec2[]":q.uniform2iv($,pt);break;case"bvec3[]":case"ivec3[]":q.uniform3iv($,pt);break;case"bvec4[]":case"ivec4[]":q.uniform4iv($,pt);break;case"float":q.uniform1f($,pt[0]);break;case"vec2":q.uniform2f($,pt[0],pt[1]);break;case"vec3":q.uniform3f($,pt[0],pt[1],pt[2]);break;case"vec4":q.uniform4f($,pt[0],pt[1],pt[2],pt[3]);break;case"float[]":q.uniform1fv($,pt);break;case"vec2[]":q.uniform2fv($,pt);break;case"vec3[]":q.uniform3fv($,pt);break;case"vec4[]":q.uniform4fv($,pt);break;case"mat2":q.uniformMatrix2fv($,!1,pt);break;case"mat3":q.uniformMatrix3fv($,!1,pt);break;case"mat4":q.uniformMatrix4fv($,!1,pt);break;default:throw Error(`Type ${mt} not implemented.`)}};class ce{constructor($,mt,pt){this.vertexShaderSource=mt,this.fragmentShaderSource=pt,this.program=((q,$,mt)=>{const pt=q.createProgram();if(!pt)throw new Error("No program was created");const Rt=w(q,q.VERTEX_SHADER,$),Ht=w(q,q.FRAGMENT_SHADER,mt);if(q.attachShader(pt,Rt),q.attachShader(pt,Ht),q.linkProgram(pt),q.detachShader(pt,Rt),q.detachShader(pt,Ht),q.deleteShader(Rt),q.deleteShader(Ht),!q.getProgramParameter(pt,q.LINK_STATUS))throw q.deleteProgram(pt),new Error("Unable to initialize the shader program: "+q.getProgramInfoLog(pt));return pt})($,mt,pt),this.id=function(q){let $=0;for(const mt of q)$+=mt.charCodeAt(0);return`${$}`}(mt+pt)}}class Se{constructor($,mt,pt,Rt,Ht){this.location=kt($,mt.program,pt),this.type=Rt,this.value=Ht,this.variableName=pt}}class dt{constructor($,mt,pt,Rt,Ht){this.location=kt($,mt.program,pt),this.texture=Rt instanceof HTMLImageElement||Rt instanceof HTMLCanvasElement?((q,$)=>{const mt=q.createTexture();if(!mt)throw new Error("No texture was created");q.activeTexture(q.TEXTURE0+7),q.bindTexture(q.TEXTURE_2D,mt);const Rt=q.RGBA,Ht=q.RGBA,ne=q.UNSIGNED_BYTE;let me,Me;return q.texImage2D(q.TEXTURE_2D,0,Rt,Ht,ne,$),q.generateMipmap(q.TEXTURE_2D),q.bindTexture(q.TEXTURE_2D,null),$ instanceof HTMLImageElement?(me=$.naturalWidth,Me=$.naturalHeight):(me=$.width,Me=$.height),{texture:mt,level:0,internalformat:Rt,format:Ht,type:ne,width:me,height:Me,border:0}})($,Rt):Rt,this.bindPoint=Ht,this.variableName=pt}}class Ot{constructor($,mt,pt,Rt,Ht){this.location=kt($,mt.program,pt),this.texture=((q,$)=>{const mt=$.length,pt=$[0].length,Rt=$[0][0].length;if(!e(pt,2)||!e(mt,2))throw new Error(`Texture-data-dimensions must be a power of two, but are ${pt} x ${mt}`);if(4!==Rt)throw new Error(`Expecting 4 channels, but ${Rt} provided`);const Ht=q.createTexture();if(!Ht)throw new Error("No texture was created");q.activeTexture(q.TEXTURE0+7),q.bindTexture(q.TEXTURE_2D,Ht);const Me=q.RGBA,Re=q.RGBA,De=q.UNSIGNED_BYTE,je=new Uint8Array(n($));return 4!==Rt&&q.pixelStorei(q.UNPACK_ALIGNMENT,1),q.texImage2D(q.TEXTURE_2D,0,Me,pt,mt,0,Re,De,je),q.texParameteri(q.TEXTURE_2D,q.TEXTURE_WRAP_S,q.CLAMP_TO_EDGE),q.texParameteri(q.TEXTURE_2D,q.TEXTURE_WRAP_T,q.CLAMP_TO_EDGE),q.texParameteri(q.TEXTURE_2D,q.TEXTURE_MIN_FILTER,q.NEAREST),q.texParameteri(q.TEXTURE_2D,q.TEXTURE_MAG_FILTER,q.NEAREST),q.bindTexture(q.TEXTURE_2D,null),{texture:Ht,level:0,internalformat:Me,format:Re,type:De,width:pt,height:mt,border:0}})($,Rt),this.bindPoint=Ht,this.variableName=pt}}class At{constructor($,mt,pt,Rt,Ht="triangles"){let ne;switch(Ht){case"triangles":ne=$.TRIANGLES;break;case"lines":ne=$.LINES;break;case"points":ne=$.POINTS;break;default:throw new Error(`Invalid drawing mode ${Ht}`)}this.location=((q,$,mt)=>{const pt=q.getAttribLocation($,mt);if(-1===pt)throw new Error(`Couldn't find attribute ${mt} in program.`);return pt})($,mt.program,pt),this.value=((q,$,mt=q.TRIANGLES)=>{const pt=new Float32Array(n($)),Rt=q.createBuffer();if(!Rt)throw new Error("No buffer was created");return q.bindBuffer(q.ARRAY_BUFFER,Rt),q.bufferData(q.ARRAY_BUFFER,pt,q.STATIC_DRAW),q.bindBuffer(q.ARRAY_BUFFER,null),{buffer:Rt,vectorSize:$[0].length,vectorCount:$.length,type:q.FLOAT,normalize:!1,stride:0,offset:0,drawingMode:mt}})($,Rt,ne),this.variableName=pt,this.drawingMode=ne}}class Yt{constructor($,mt,pt="triangles"){let Rt;switch(pt){case"triangles":Rt=$.TRIANGLES;break;case"lines":Rt=$.LINES;break;case"points":Rt=$.POINTS;break;default:throw new Error(`Invalid drawing mode ${pt}`)}this.index=((q,$,mt=q.TRIANGLES)=>{const pt=new Uint16Array(n($)),Rt=q.createBuffer();if(!Rt)throw new Error("No buffer was created");return q.bindBuffer(q.ELEMENT_ARRAY_BUFFER,Rt),q.bufferData(q.ELEMENT_ARRAY_BUFFER,pt,q.STATIC_DRAW),q.bindBuffer(q.ELEMENT_ARRAY_BUFFER,null),{buffer:Rt,count:pt.length,type:q.UNSIGNED_SHORT,offset:0,drawingMode:mt}})($,mt,Rt)}}function ge(q,$){for(const mt of q)if($(mt))return mt;return null}class gt{constructor($,mt,pt,Rt,Ht){this.program=$,this.attributes=mt,this.uniforms=pt,this.textures=Rt,this.index=Ht;const[ne,me,Me,Re]=function qt(q){const $=/^\s*attribute (int|float|vec2|vec3|vec4|mat2|mat3|mat4) (\w*);/gm,mt=/^\s*uniform (int|float|vec2|vec3|vec4|mat2|mat3|mat4) (\w*)(\[\d\])*;/gm,pt=/^\s*uniform sampler2D (\w*);/gm,Rt=/^\s*precision (\w*) float;/gm,Ht=q.fragmentShaderSource+"\n\n\n"+q.vertexShaderSource,ne=[];let me;for(;null!==(me=$.exec(Ht));)ne.push(me[2]);const Me=[];let Re;for(;null!==(Re=mt.exec(Ht));)Me.push(Re[2]);const De=[];let je;for(;null!==(je=pt.exec(Ht));)De.push(je[1]);const Xe=[];let ni;for(;null!==(ni=Rt.exec(Ht));)Xe.push(ni[1]);return[ne,Me,De,Xe]}($);for(const je of ne){const Xe=mt.filter(ni=>ni.variableName===je);if(1!==Xe.length)throw new Error(`Provided ${Xe.length} values for shader's attribute ${je}.`)}for(const je of me){const Xe=pt.filter(ni=>ni.variableName===je);if(1!==Xe.length)throw new Error(`Provided ${Xe.length} values for shader's uniform ${je}.`)}for(const je of Me){const Xe=Rt.filter(ni=>ni.variableName===je);if(1!==Xe.length)throw new Error(`Provided ${Xe.length} values for shader's texture ${je}.`)}1===Re.length&&console.warn("You have only provided one precision qualifier.\n            This can cause issues when you want to use a uniform in both the vertex- and the fragment-shader.");const De=this.attributes.map(je=>je.value.vectorCount);if(Math.min(...De)!==Math.max(...De))throw new Error("Your attributes are not of the same length!")}bind($){W($,this.program.program);for(const mt of this.attributes)M($,mt.location,mt.value);for(const mt of this.uniforms)ie($,mt.location,mt.type,mt.value);for(const mt of this.textures)ht($,mt.texture.texture,mt.bindPoint,mt.location);this.index&&((q,$)=>{q.bindBuffer(q.ELEMENT_ARRAY_BUFFER,this.index.index.buffer)})($)}render($,mt,pt,Rt){pt?((q,$,mt)=>{q.bindFramebuffer(q.FRAMEBUFFER,$.framebuffer),mt?($.width/$.height!=mt[2]/mt[3]&&console.warn("Your viewport-aspect is different from the framebuffer-aspect."),q.viewport(...mt)):q.viewport(0,0,$.width,$.height)})($,pt,Rt):((q,$)=>{q.bindFramebuffer(q.FRAMEBUFFER,null),$?(q.canvas.width/q.canvas.height!=$[2]/$[3]&&console.warn("Your viewport-aspect is different from the canvas-aspect."),q.viewport(...$)):q.viewport(0,0,q.canvas.width,q.canvas.height)})($,Rt),mt&&((q,$)=>{q.clearColor($[0],$[1],$[2],$[3]),q.clearDepth(1),q.clear(q.COLOR_BUFFER_BIT|q.DEPTH_BUFFER_BIT)})($,mt),this.index?((q,$)=>{q.drawElements($.drawingMode,$.count,$.type,$.offset)})($,this.index.index):((q,$)=>{q.drawArrays($.drawingMode,$.offset,$.vectorCount)})($,this.attributes[0].value)}updateAttributeData($,mt,pt){const Rt=ge(this.attributes,Ht=>Ht.variableName===mt);if(!Rt)throw new Error(`No such attribute ${mt} to be updated.`);((q,$,mt)=>{const pt=new Float32Array(n(mt));q.bindBuffer(q.ARRAY_BUFFER,$.buffer),q.bufferData(q.ARRAY_BUFFER,pt,q.STATIC_DRAW),q.bindBuffer(q.ARRAY_BUFFER,null)})($,Rt.value,pt)}updateUniformData($,mt,pt){const Rt=ge(this.uniforms,Ht=>Ht.variableName===mt);if(!Rt)throw new Error(`No such uniform ${mt} to be updated.`);Rt.value=pt}updateTextureData($,mt,pt){const Rt=ge(this.textures,ne=>ne.variableName===mt);if(!Rt)throw new Error(`No such texture ${mt} to be updated.`);const Ht=((q,$,mt)=>{if(q.activeTexture(q.TEXTURE0+7),q.bindTexture(q.TEXTURE_2D,$.texture),mt instanceof HTMLImageElement||mt instanceof HTMLCanvasElement)q.texImage2D(q.TEXTURE_2D,0,q.RGBA,q.RGBA,q.UNSIGNED_BYTE,mt);else{const pt=mt[0].length,Rt=mt.length;if(!e(pt,2)||!e(Rt,2))throw new Error(`Texture-data-dimensions must be a power of two, but are ${Rt} x ${pt}`);const Ht=new Uint8Array(n(mt));q.texImage2D(q.TEXTURE_2D,$.level,$.internalformat,$.width,$.height,$.border,$.format,$.type,Ht)}return q.generateMipmap(q.TEXTURE_2D),q.bindTexture(q.TEXTURE_2D,null),mt instanceof HTMLImageElement?($.width=mt.naturalWidth,$.height=mt.naturalHeight):mt instanceof HTMLCanvasElement?($.width=mt.width,$.height=mt.height):($.width=mt[0].length,$.height=mt.length),$})($,Rt.texture,pt);Rt.texture=Ht}}class Mt{constructor($,mt,pt){const Rt=(q=>{const $=q.createFramebuffer();if(!$)throw new Error("Error creating framebuffer");return $})($),Ht=((q,$,mt)=>{if($<=0||mt<=0)throw new Error("Width and height must be positive.");const pt=q.createTexture();if(!pt)throw new Error("No texture was created");return q.activeTexture(q.TEXTURE0+7),q.bindTexture(q.TEXTURE_2D,pt),q.texImage2D(q.TEXTURE_2D,0,q.RGBA,$,mt,0,q.RGBA,q.UNSIGNED_BYTE,null),q.texParameteri(q.TEXTURE_2D,q.TEXTURE_WRAP_S,q.CLAMP_TO_EDGE),q.texParameteri(q.TEXTURE_2D,q.TEXTURE_WRAP_T,q.CLAMP_TO_EDGE),q.texParameteri(q.TEXTURE_2D,q.TEXTURE_MIN_FILTER,q.NEAREST),q.texParameteri(q.TEXTURE_2D,q.TEXTURE_MAG_FILTER,q.NEAREST),q.bindTexture(q.TEXTURE_2D,null),{texture:pt,level:0,internalformat:q.RGBA,format:q.RGBA,type:q.UNSIGNED_BYTE,width:$,height:mt,border:0}})($,mt,pt),ne=((q,$,mt)=>{if(q.bindFramebuffer(q.FRAMEBUFFER,mt),q.framebufferTexture2D(q.FRAMEBUFFER,q.COLOR_ATTACHMENT0,q.TEXTURE_2D,$.texture,0),q.checkFramebufferStatus(q.FRAMEBUFFER)!==q.FRAMEBUFFER_COMPLETE)throw new Error(`Error creating framebuffer: framebuffer-status: ${q.checkFramebufferStatus(q.FRAMEBUFFER)} ; error-code: ${q.getError()}`);return q.bindFramebuffer(q.FRAMEBUFFER,null),{framebuffer:mt,texture:$,width:$.width,height:$.height}})($,Ht,Rt);this.fbo=ne}}function Zt(q,$){const mt=1e3/q;let Rt,Ht,ne,pt=mt;const me=()=>{Rt=window.performance.now(),$(pt),Ht=window.performance.now(),pt=Ht-Rt,ne=Math.max(mt-pt,0),setTimeout(()=>{requestAnimationFrame(me)},ne)};me()}const m=(q,$)=>({vertices:[[-q/2,$/2,0],[-q/2,-$/2,0],[q/2,-$/2,0],[-q/2,$/2,0],[q/2,-$/2,0],[q/2,$/2,0]],texturePositions:[[0,1],[0,0],[1,0],[0,1],[1,0],[1,1]]});class Q extends s.Z{constructor($){super($)}createRenderer(){return this.renderer=new V(this),this.renderer}updateSunAngle($){this.renderer.updateSunAngle($)}}class V extends c.Z{constructor($){super($),this.state="loading";const mt=document.createElement("canvas");mt.width=1200,mt.height=800,mt.style.position="absolute";const pt=mt.getContext("webgl"),Rt=$.getSource(),Ht=Rt.getProjection(),ne=Rt.getImageExtent(),me=this.bboxOntoRectangle(2,2,ne),Me=((q,$=256,mt=256,pt="red")=>{const Rt=document.createElement("canvas").getContext("2d");if(!Rt)throw new Error("no context");return Rt.canvas.width=$,Rt.canvas.height=mt,Rt.font=`bold ${5*mt/6|0}px sans-serif`,Rt.textAlign="center",Rt.textBaseline="middle",Rt.fillStyle=pt,Rt.fillText(q,$/2,mt/2),Rt.canvas})("test",2048,2048,"red"),Re=new ce(pt,"\n            attribute vec3 a_position;\n            attribute vec2 a_texturePosition;\n            uniform mat3 u_world2pix;\n            uniform mat3 u_pix2canv;\n            varying vec2 v_texturePosition;\n            void main() {\n                vec3 pixelPosition = u_world2pix * vec3(a_position.x, a_position.y, 1.);\n                vec3 canvasPosition = u_pix2canv * pixelPosition;\n                gl_Position = vec4(canvasPosition.x, canvasPosition.y, 0., 1.);\n                v_texturePosition = a_texturePosition;\n            }\n        ","\n            precision mediump float;\n            uniform sampler2D u_srtm;\n            uniform float u_imageSize;\n            uniform vec3 u_sun;\n            varying vec2 v_texturePosition;\n            void main() {\n                float delta = 4. / u_imageSize;\n                float top = texture2D(u_srtm, vec2(v_texturePosition.x,         1. - v_texturePosition.y + delta)).r;\n                float bot = texture2D(u_srtm, vec2(v_texturePosition.x,         1. - v_texturePosition.y - delta)).r;\n                float lft = texture2D(u_srtm, vec2(v_texturePosition.x + delta, 1. - v_texturePosition.y        )).r;\n                float rgt = texture2D(u_srtm, vec2(v_texturePosition.x - delta, 1. - v_texturePosition.y        )).r;\n\n                vec3 surfaceNormal = vec3(\n                    lft - rgt,\n                    bot - top,\n                    2. * delta\n                );\n                surfaceNormal = normalize(surfaceNormal);\n                vec3 sunNormal = normalize(u_sun);\n                float alignment = abs(dot(sunNormal, surfaceNormal));\n\n                gl_FragColor = vec4(0., 0., 0., 0.5 * alignment);\n            }\n        ");W(pt,Re.program);const De=new gt(Re,[new At(pt,Re,"a_position",me.vertices),new At(pt,Re,"a_texturePosition",me.texturePositions)],[new Se(pt,Re,"u_imageSize","float",[2048]),new Se(pt,Re,"u_sun","vec3",[0,0,1]),new Se(pt,Re,"u_world2pix","mat3",n([[1,0,0],[0,1,0],[0,0,1]])),new Se(pt,Re,"u_pix2canv","mat3",n([[1/(mt.width/2),0,0],[0,-1/(mt.height/2),0],[-1,1,1]]))],[new dt(pt,Re,"u_srtm",Me,0)]);De.bind(pt),this.shader=De,this.canvas=mt,this.gl=pt,this.projection=Ht;const je=Rt.getImage(ne,.02197265625,2.440000295639038,Ht);je.addEventListener("change",Xe=>{const ni=je.getImage();this.shader.updateTextureData(this.gl,"u_srtm",ni),this.shader.bind(this.gl),this.state="ready",super.getLayer().changed()}),je.load()}prepareFrame($){if("ready"===this.state){const mt=$.coordinateToPixelTransform;this.shader.updateUniformData(this.gl,"u_world2pix",n([[mt[0],mt[1],0],[mt[2],mt[3],0],[mt[4],mt[5],1]])),this.shader.bind(this.gl),$.viewState.projection!==this.projection&&this.reprojectImage($.viewState.projection)}return!0}renderFrame($,mt){return"ready"===this.state&&(this.shader.render(this.gl),this.transformCanvas($)),this.canvas}renderDeclutter($){}updateSunAngle($){this.shader.updateUniformData(this.gl,"u_sun",[$[0],$[1],1]),this.shader.bind(this.gl),this.shader.render(this.gl)}bboxOntoRectangle($,mt,pt){const Rt=m($,mt);for(const Ht of Rt.vertices){const me=Ht[1];Ht[0]=Ht[0]===$/2?pt[2]:pt[0],Ht[1]=me===mt/2?pt[3]:pt[1]}return Rt}reprojectImage($){const mt=super.getLayer().getSource(),pt=mt.getProjection(),Rt=mt.getImageExtent(),Ht=(0,f.$A)(Rt,pt,$),ne=this.bboxOntoRectangle(2,2,Ht);this.shader.updateAttributeData(this.gl,"a_position",ne.vertices),this.shader.bind(this.gl)}transformCanvas($){const mt=$.layerStatesArray[$.layerIndex],pt=$.pixelRatio,Rt=$.size,Ht=Math.round(Rt[0]*pt),ne=Math.round(Rt[1]*pt),me=mt.opacity;this.canvas.width=Ht,this.canvas.height=ne,this.canvas.style.opacity=`${me}`,this.shader.updateUniformData(this.gl,"u_pix2canv",n([[1/(this.canvas.width/2),0,0],[0,-1/(this.canvas.height/2),0],[-1,1,1]]))}}var lt=a(2308),_t=a(7356),St=a(2663),Nt=a(3842);class Xt extends _t.Z{constructor($){super($),this.options=$}createRenderer(){return new Jt(this,this.options.renderSettings)}updateParas($,mt,pt){const Rt={colorRamp:this.options.renderSettings.colorRamp,maxEdgeLength:this.options.renderSettings.maxEdgeLength,storeInterpolatedPixelData:this.options.renderSettings.storeInterpolatedPixelData,valueProperty:this.options.renderSettings.valueProperty,power:$,showLabels:pt,smooth:mt};super.getRenderer().updateSettings(Rt),this.options.renderSettings=Rt}}class Jt extends lt.Z{constructor($,mt){super($),this.settings=mt,this.container=document.createElement("div"),this.container.classList.add("ol-layer"),this.container.style.setProperty("position","absolute"),this.container.style.setProperty("width","100%"),this.container.style.setProperty("height","100%"),this.webGlCanvas=document.createElement("canvas"),this.webGlCanvas.style.setProperty("position","absolute"),this.webGlCanvas.style.setProperty("left","0px"),this.webGlCanvas.style.setProperty("top","0px"),this.webGlCanvas.style.setProperty("width","100%"),this.webGlCanvas.style.setProperty("height","100%"),this.webGlCanvas.width=1e3,this.webGlCanvas.height=1e3,this.gl=this.webGlCanvas.getContext("webgl"),this.container.appendChild(this.webGlCanvas),this.pointRenderer=new lt.Z($);const pt=$.getSource();this.projection=pt.getProjection();const{coords:Rt,values:Ht,bboxDelta:ne,maxVal:me}=this.parseData(pt,this.settings.valueProperty,this.settings.maxEdgeLength),{observationsBbox:Me,maxEdgeLengthBbox:Re}=this.parseDataBbox(ne,Rt,Ht,me,this.settings.maxEdgeLength);this.bbox=ne;const De=[[1,0,0],[0,1,0],[0,0,1]];this.interpolationShader=se(this.gl,Me,me,this.settings.power,Re),this.valueFb=new Mt(this.gl,this.webGlCanvas.width,this.webGlCanvas.height),this.colorizationShader=Qt(this.gl,this.settings.colorRamp,me,this.settings.smooth,this.valueFb),this.colorFb=new Mt(this.gl,this.webGlCanvas.width,this.webGlCanvas.height),this.arrangementShader=Fe(this.gl,De,De,ne,this.colorFb),this.runInterpolationShader(this.valueFb.fbo),this.runColorizationShader(this.colorFb.fbo)}prepareFrame($){if(this.webGlCanvas.style.opacity=`${$.layerStatesArray[$.layerIndex].opacity}`,$.viewState.projection!==this.projection){this.projection=$.viewState.projection;const Rt=super.getLayer().getSource(),{coords:Ht,values:ne,bboxDelta:me,maxVal:Me}=this.parseData(Rt,this.settings.valueProperty,this.settings.maxEdgeLength),{observationsBbox:Re,maxEdgeLengthBbox:De}=this.parseDataBbox(me,Ht,ne,Me,this.settings.maxEdgeLength);this.updateInterpolationShader(this.settings.power,Re,De),this.runInterpolationShader(this.valueFb.fbo),this.runColorizationShader(this.colorFb.fbo),this.bbox=me}return this.updateArrangementShader($.coordinateToPixelTransform,$.size[0],$.size[1],this.bbox),this.pointRenderer.prepareFrame($),!0}renderFrame($,mt){if(this.runArrangementShader(),this.settings.showLabels){const pt=this.pointRenderer.renderFrame($,this.container);(0,Nt.hF)(this.container,[this.webGlCanvas,pt])}else(0,Nt.hF)(this.container,[this.webGlCanvas]);return this.container}renderDeclutter($){}updateSettings($){const mt=this.settings;this.settings=$,$.power!==mt.power?(this.updateInterpolationShader($.power),this.runInterpolationShader(this.valueFb.fbo),this.updateColorizationShader($.smooth),this.runColorizationShader(this.colorFb.fbo)):$.smooth!==mt.smooth&&(this.updateColorizationShader($.smooth),this.runColorizationShader(this.colorFb.fbo)),super.getLayer().changed()}updateArrangementShader($,mt,pt,Rt){const ne=[[1/(mt/2),0,0],[0,-1/(pt/2),0],[-1,1,1]];this.arrangementShader.updateUniformData(this.gl,"u_world2pix",n([[$[0],$[1],0],[$[2],$[3],0],[$[4],$[5],1]])),this.arrangementShader.updateUniformData(this.gl,"u_pix2clip",n(ne)),this.arrangementShader.updateUniformData(this.gl,"u_bbox",Rt)}runArrangementShader($){this.arrangementShader.bind(this.gl),this.arrangementShader.render(this.gl,[0,0,0,0],$)}updateInterpolationShader($,mt,pt){this.interpolationShader.updateUniformData(this.gl,"u_power",[$]),mt&&this.interpolationShader.updateTextureData(this.gl,"u_dataTexture",[mt]),pt&&this.interpolationShader.updateUniformData(this.gl,"u_maxDistance",[pt])}runInterpolationShader($){this.interpolationShader.bind(this.gl),this.interpolationShader.render(this.gl,[0,0,0,0],$),this.settings.storeInterpolatedPixelData&&(this.interpolatedValues=(q=>{const $=q.getContext("webgl");if(!$)throw new Error("no context");const mt=$.getParameter($.IMPLEMENTATION_COLOR_READ_FORMAT),pt=$.getParameter($.IMPLEMENTATION_COLOR_READ_TYPE);let Rt;if(pt===$.UNSIGNED_BYTE)Rt=new Uint8Array($.drawingBufferWidth*$.drawingBufferHeight*4);else if(pt===$.UNSIGNED_SHORT_5_6_5||pt===$.UNSIGNED_SHORT_4_4_4_4||pt===$.UNSIGNED_SHORT_5_5_5_1)Rt=new Uint16Array($.drawingBufferWidth*$.drawingBufferHeight*4);else{if(pt!==$.FLOAT)throw new Error(`Did not understand pixel data type ${pt} for format ${mt}`);Rt=new Float32Array($.drawingBufferWidth*$.drawingBufferHeight*4)}return $.readPixels(0,0,q.width,q.height,mt,pt,Rt),Rt})(this.webGlCanvas))}updateColorizationShader($){this.colorizationShader.updateUniformData(this.gl,"u_smooth",[$?1:0])}runColorizationShader($){this.colorizationShader.bind(this.gl),this.colorizationShader.render(this.gl,[0,0,0,0],$)}parseData($,mt,pt){let Rt=$.getFeatures();Rt=$ instanceof St.Z?$.getSource().getFeatures():$.getFeatures();const Ht=Rt.map(vi=>vi.getGeometry().getCoordinates()),ne=Rt.map(vi=>parseFloat(vi.getProperties()[mt])),me=Ye(Ht),Me=me[2]-me[0],Re=me[3]-me[1];let De,je;Me>Re?(je=Me-Re,De=0):(je=0,De=Re-Me);const Xe=[me[0]-pt,me[1]-pt,me[2]+De+pt,me[3]+je+pt],ni=ne.reduce((vi,gi)=>gi>vi?gi:vi,0);return{coords:Ht,values:ne,bboxDelta:Xe,maxVal:ni}}parseDataBbox($,mt,pt,Rt,Ht){const ne=We(mt,pt).map(Xe=>{const ni=Ee([Xe[0],Xe[1]],$);return[255*(ni[0]+1)/2,255*(ni[1]+1)/2,255*Xe[2]/Rt,255]}),me=ne.length,Me=((q,$)=>{const mt=Math.ceil(g(q,2));return Math.pow(2,mt)})(me);for(let Xe=0;Xe<Me-me;Xe++)ne.push([0,0,0,0]);return{observationsBbox:ne,maxEdgeLengthBbox:Ht/Math.max($[2]-$[0],$[3]-$[1])}}}const Ee=(q,$)=>[(q[0]-$[0])/($[2]-$[0])*2-1,(q[1]-$[1])/($[3]-$[1])*2-1],se=(q,$,mt,pt,Rt)=>{const ne=new ce(q,"\n            precision mediump float;\n            attribute vec3 a_position;\n            attribute vec2 a_texturePosition;\n            varying vec2 v_position;\n            varying vec2 v_texturePosition;\n\n            void main() {\n                v_position = a_position.xy;\n                v_texturePosition = a_texturePosition;\n                gl_Position = vec4(a_position.xy, 0.0, 1.0);\n            }\n        ","\n            precision mediump float;\n            uniform float u_power;\n            uniform sampler2D u_dataTexture;\n            uniform int u_nrDataPoints;\n            uniform float u_maxValue;\n            uniform float u_maxDistance;\n            varying vec2 v_position;\n            varying vec2 v_texturePosition;\n\n            void main() {\n\n                float valSum = 0.0;\n                float wSum = 0.0;\n                float minD = 10000.0;\n                for (int i = 0; i < 10000; i++) {\n                    if (i > u_nrDataPoints) {\n                        break;\n                    }\n                    vec4 dataPoint = texture2D(u_dataTexture, vec2(float(i) / float(u_nrDataPoints), 0.5));\n                    if (dataPoint.w > 0.0) {  // texture is padded to next power of two with transparent 0-values.\n                        vec2 coords = dataPoint.xy * 2.0 - 1.0;  // transforming coords from [0, 1] to [-1, 1]\n                        float value = dataPoint.z * u_maxValue;  // transforming value from [0, 1] to [0, maxValue]\n\n                        float d = distance(v_position, coords);\n                        float w = 1.0 / pow(d, u_power);\n                        valSum += value * w;\n                        wSum += w;\n                        if (d < minD) {\n                            minD = d;\n                        }\n                    }\n                }\n                float interpolatedValue = valSum / wSum;\n                float alpha = 1.0;\n                if (minD > u_maxDistance) {\n                    alpha = 0.0;\n                }\n                vec4 color = vec4(interpolatedValue / u_maxValue, 0.0, 0.0, alpha);\n\n                gl_FragColor = color;\n            }\n        "),me={vertices:[[-1,1,0],[-1,-1,0],[1,-1,0],[1,1,0]],texturePositions:[[0,1],[0,0],[1,0],[1,1]],vertexIndices:[[0,1,2],[0,2,3]]};return new gt(ne,[new At(q,ne,"a_position",me.vertices),new At(q,ne,"a_texturePosition",me.texturePositions)],[new Se(q,ne,"u_power","float",[pt]),new Se(q,ne,"u_nrDataPoints","int",[$.length]),new Se(q,ne,"u_maxValue","float",[mt]),new Se(q,ne,"u_maxDistance","float",[Rt])],[new Ot(q,ne,"u_dataTexture",[$],0)],new Yt(q,me.vertexIndices))},Qt=(q,$,mt,pt,Rt)=>{const ne=new ce(q,"\n            precision mediump float;\n            attribute vec2 a_position;\n            attribute vec2 a_textureCoord;\n            varying vec2 v_textureCoord;\n\n            void main() {\n                v_textureCoord = a_textureCoord;\n                gl_Position = vec4(a_position.xy, 0.0, 1.0);\n            }\n        ","\n            precision mediump float;\n            uniform float u_colorRampValues[15];\n            uniform vec3 u_colorRampColors[15];\n            uniform int u_nrColorRampValues;\n            uniform float u_maxValue;\n            uniform bool u_smooth;\n            uniform sampler2D u_valueTexture;\n            varying vec2 v_textureCoord;\n\n            vec3 valueToSmoothColor(in float value) {\n                if (value < u_colorRampValues[0]) {\n                    return u_colorRampColors[0];\n                }\n                for (int i = 1; i < 15; i++) {\n                    if (i > u_nrColorRampValues) {\n                        break;\n                    }\n                    if (value < u_colorRampValues[i]) {\n                        float alpha = (value - u_colorRampValues[i-1]) / (u_colorRampValues[i] - u_colorRampValues[i-1]);\n                        vec3 color = alpha * (u_colorRampColors[i] - u_colorRampColors[i-1]) + u_colorRampColors[i-1];\n                        return color;\n                    }\n                    if (i == u_nrColorRampValues) {\n                        return u_colorRampColors[i];\n                    }\n                }\n            }\n\n            vec3 valueToStepColor(in float value) {\n                for (int i = 0; i < 15; i++) {\n                    if (i > u_nrColorRampValues) {\n                        break;\n                    }\n                    if (value < u_colorRampValues[i]) {\n                        return u_colorRampColors[i];\n                    }\n                    if (i == u_nrColorRampValues) {\n                        return u_colorRampColors[i];\n                    }\n                }\n            }\n\n            void main() {\n                vec4 pixelData = texture2D(u_valueTexture, v_textureCoord);\n                float val = pixelData.r * u_maxValue;\n                float alpha = pixelData.w;\n                vec3 rgb = vec3(0.0, 0.0, 0.0);\n                if (alpha > 0.01) {\n                    if (u_smooth) {\n                        rgb = valueToSmoothColor(val);\n                    } else {\n                        rgb = valueToStepColor(val);\n                    }\n                }\n                gl_FragColor = vec4(rgb.x / 255.0, rgb.y / 255.0, rgb.z / 255.0, alpha);\n            }\n        ");return new gt(ne,[new At(q,ne,"a_position",m(2,2).vertices),new At(q,ne,"a_textureCoord",m(2,2).texturePositions)],[new Se(q,ne,"u_colorRampValues","float[]",$.map(Me=>Me.val)),new Se(q,ne,"u_colorRampColors","vec3[]",n($.map(Me=>Me.rgb))),new Se(q,ne,"u_nrColorRampValues","int",[$.length]),new Se(q,ne,"u_maxValue","float",[mt]),new Se(q,ne,"u_smooth","bool",[pt?1:0])],[new dt(q,ne,"u_valueTexture",Rt.fbo.texture,0)])},Fe=(q,$,mt,pt,Rt)=>{const Ht=new ce(q,"\n            precision mediump float;\n            attribute vec3 a_pos;\n            attribute vec2 a_posTexture;\n            uniform mat3 u_world2pix;\n            uniform mat3 u_pix2clip;\n            uniform vec4 u_bbox;\n            varying vec2 v_posTexture;\n\n            vec2 clipBbx2worldCoords(vec2 clipCoords, vec4 bbox) {\n                float xPerct = ( clipCoords.x + 1.0 ) / 2.0;\n                float yPerct = ( clipCoords.y + 1.0 ) / 2.0;\n                float xWorld = xPerct * (bbox.z - bbox.x) + bbox.x;\n                float yWorld = yPerct * (bbox.w - bbox.y) + bbox.y;\n                return vec2(xWorld, yWorld);\n            }\n\n            void main() {\n                v_posTexture = a_posTexture;\n                vec2 worldPos = clipBbx2worldCoords(a_pos.xy, u_bbox);\n                vec3 clipPos = u_pix2clip * u_world2pix * vec3(worldPos.xy, 1.0);\n                gl_Position = vec4(clipPos.xy, 0.0, 1.0);\n            }\n        ","\n            precision mediump float;\n            uniform sampler2D u_texture;\n            varying vec2 v_posTexture;\n\n            void main() {\n                gl_FragColor = texture2D(u_texture, v_posTexture);\n            }\n        ");return new gt(Ht,[new At(q,Ht,"a_pos",m(2,2).vertices),new At(q,Ht,"a_posTexture",m(2,2).texturePositions)],[new Se(q,Ht,"u_world2pix","mat3",n($)),new Se(q,Ht,"u_pix2clip","mat3",n(mt)),new Se(q,Ht,"u_bbox","vec4",pt)],[new dt(q,Ht,"u_texture",Rt.fbo.texture,0)])},Ye=q=>{const $=q.map(me=>me[0]),mt=q.map(me=>me[1]),pt=Math.min(...$),Rt=Math.max(...$);return[pt,Math.min(...mt),Rt,Math.max(...mt)]},We=(q,$)=>{const mt=[];for(let pt=0;pt<q.length;pt++)mt.push(q[pt].concat($[pt]));return mt}},5338:(Bt,ot,a)=>{"use strict";a.d(ot,{h0:()=>$e,bg:()=>Hr});var G=a(795),D=a(694),k=a(5999),z=a(2929),U=a(5253),I=a(1786),S=a(8185),P=a(2768),p=a(5809),d=a(8898),u=a(7521),c=a(1591),s=a(6114),f=a(6942),n=a(2673),h=a(1053),g=a(3242),e=a(9543),E=a(992),v=a(2705),x=a(9015),w=a(513);Error,Error;const M=class b extends g.Z{constructor(i){if(super({attributions:i.attributions,cacheSize:i.cacheSize,crossOrigin:i.crossOrigin,interpolate:i.interpolate,projection:(0,x.U2)("EPSG:3857"),reprojectionErrorThreshold:i.reprojectionErrorThreshold,state:"loading",tileLoadFunction:i.tileLoadFunction,wrapX:void 0===i.wrapX||i.wrapX,transition:i.transition,zDirection:i.zDirection}),this.tileJSON_=null,this.tileSize_=i.tileSize,i.url)if(i.jsonp)!function O(r,i,o,T){const Z=document.createElement("script"),J="olc_"+(0,w.sq)(i);function rt(){delete window[J],Z.parentNode.removeChild(Z)}Z.async=!0,Z.src=r+(r.includes("?")?"&":"?")+(T||"callback")+"="+J;const xt=setTimeout(function(){rt(),o&&o()},1e4);window[J]=function(Lt){clearTimeout(xt),rt(),i(Lt)},document.head.appendChild(Z)}(i.url,this.handleTileJSONResponse.bind(this),this.handleTileJSONError.bind(this));else{const o=new XMLHttpRequest;o.addEventListener("load",this.onXHRLoad_.bind(this)),o.addEventListener("error",this.onXHRError_.bind(this)),o.open("GET",i.url),o.send()}else i.tileJSON?this.handleTileJSONResponse(i.tileJSON):(0,E.h)(!1,51)}onXHRLoad_(i){const o=i.target;if(!o.status||o.status>=200&&o.status<300){let T;try{T=JSON.parse(o.responseText)}catch{return void this.handleTileJSONError()}this.handleTileJSONResponse(T)}else this.handleTileJSONError()}onXHRError_(i){this.handleTileJSONError()}getTileJSON(){return this.tileJSON_}handleTileJSONResponse(i){const o=(0,x.U2)("EPSG:4326"),T=this.getProjection();let Z;if(void 0!==i.bounds){const Dt=(0,x.WO)(o,T);Z=(0,e.Ne)(i.bounds,Dt)}const J=(0,v.Tl)(T),Lt=(0,v.dl)({extent:J,maxZoom:i.maxzoom||22,minZoom:i.minzoom||0,tileSize:this.tileSize_});if(this.tileGrid=Lt,this.tileUrlFunction=(0,p.uR)(i.tiles,Lt),i.attribution&&!this.getAttributions()){const Dt=void 0!==Z?Z:J;this.setAttributions(function(Ft){return(0,e.kK)(Dt,Ft.extent)?[i.attribution]:null})}this.tileJSON_=i,this.setState("ready")}handleTileJSONError(){this.setState("error")}};var ht,C=a(7356),N=a(3149),H=a(585),it=a(978),Y=a(8742),Tt={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function vt(r){return(r=Math.round(r))<0?0:r>255?255:r}function bt(r){return vt("%"===r[r.length-1]?parseFloat(r)/100*255:parseInt(r))}function Gt(r){return function Ct(r){return r<0?0:r>1?1:r}("%"===r[r.length-1]?parseFloat(r)/100:parseFloat(r))}function kt(r,i,o){return o<0?o+=1:o>1&&(o-=1),6*o<1?r+(i-r)*o*6:2*o<1?i:3*o<2?r+(i-r)*(2/3-o)*6:r}try{ht={}.parseCSSColor=function ie(r){var o,i=r.replace(/ /g,"").toLowerCase();if(i in Tt)return Tt[i].slice();if("#"===i[0])return 4===i.length?(o=parseInt(i.substr(1),16))>=0&&o<=4095?[(3840&o)>>4|(3840&o)>>8,240&o|(240&o)>>4,15&o|(15&o)<<4,1]:null:7===i.length&&(o=parseInt(i.substr(1),16))>=0&&o<=16777215?[(16711680&o)>>16,(65280&o)>>8,255&o,1]:null;var T=i.indexOf("("),Z=i.indexOf(")");if(-1!==T&&Z+1===i.length){var J=i.substr(0,T),rt=i.substr(T+1,Z-(T+1)).split(","),xt=1;switch(J){case"rgba":if(4!==rt.length)return null;xt=Gt(rt.pop());case"rgb":return 3!==rt.length?null:[bt(rt[0]),bt(rt[1]),bt(rt[2]),xt];case"hsla":if(4!==rt.length)return null;xt=Gt(rt.pop());case"hsl":if(3!==rt.length)return null;var Lt=(parseFloat(rt[0])%360+360)%360/360,Dt=Gt(rt[1]),Ft=Gt(rt[2]),$t=Ft<=.5?Ft*(Dt+1):Ft+Dt-Ft*Dt,le=2*Ft-$t;return[vt(255*kt(le,$t,Lt+1/3)),vt(255*kt(le,$t,Lt)),vt(255*kt(le,$t,Lt-1/3)),xt];default:return null}}return null}}catch{}var zt=function(i,o,T,Z){void 0===Z&&(Z=1),this.r=i,this.g=o,this.b=T,this.a=Z};zt.parse=function(i){if(i){if(i instanceof zt)return i;if("string"==typeof i){var o=ht(i);if(o)return new zt(o[0]/255*o[3],o[1]/255*o[3],o[2]/255*o[3],o[3])}}},zt.prototype.toString=function(){var i=this.toArray(),T=i[1],Z=i[2],J=i[3];return"rgba("+Math.round(i[0])+","+Math.round(T)+","+Math.round(Z)+","+J+")"},zt.prototype.toArray=function(){var i=this,J=i.a;return 0===J?[0,0,0,0]:[255*i.r/J,255*i.g/J,255*i.b/J,J]},zt.prototype.toArray01=function(){var i=this,J=i.a;return 0===J?[0,0,0,0]:[i.r/J,i.g/J,i.b/J,J]},zt.prototype.toArray01PremultipliedAlpha=function(){var i=this;return[i.r,i.g,i.b,i.a]},zt.black=new zt(0,0,0,1),zt.white=new zt(1,1,1,1),zt.transparent=new zt(0,0,0,0),zt.red=new zt(1,0,0,1),zt.blue=new zt(0,0,1,1);var ue=zt;function de(r){return"object"==typeof r?["literal",r]:r}function dt(r){switch(r.colorSpace){case"hcl":return"interpolate-hcl";case"lab":return"interpolate-lab";default:return"interpolate"}}function Yt(r,i){var o=de(function At(r,i){return void 0!==r?r:void 0!==i?i:void 0}(r.default,i.default));return void 0===o&&"resolvedImage"===i.type?"":o}function ge(r,i,o){var T=Zt(r,i),Z=["get",r.property];if("categorical"===T&&"boolean"==typeof o[0][0]){for(var J=["case"],rt=0,xt=o;rt<xt.length;rt+=1){var Lt=xt[rt];J.push(["==",Z,Lt[0]],Lt[1])}return J.push(Yt(r,i)),J}if("categorical"===T){for(var Dt=["match",Z],Ft=0,$t=o;Ft<$t.length;Ft+=1){var le=$t[Ft];Mt(Dt,le[0],le[1],!1)}return Dt.push(Yt(r,i)),Dt}if("interval"===T){for(var fe=["step",["number",Z]],be=0,t=o;be<t.length;be+=1){var l=t[be];Mt(fe,l[0],l[1],!0)}return gt(fe),void 0===r.default?fe:["case",["==",["typeof",Z],"number"],fe,de(r.default)]}if("exponential"===T){for(var _=void 0!==r.base?r.base:1,B=[dt(r),1===_?["linear"]:["exponential",_],["number",Z]],j=0,X=o;j<X.length;j+=1){var et=X[j];Mt(B,et[0],et[1],!1)}return void 0===r.default?B:["case",["==",["typeof",Z],"number"],B,de(r.default)]}throw new Error("Unknown property function type "+T)}function gt(r){"step"===r[0]&&3===r.length&&(r.push(0),r.push(r[3]))}function Mt(r,i,o,T){r.length>3&&i===r[r.length-2]||(T&&2===r.length||r.push(i),r.push(o))}function Zt(r,i){return r.type?r.type:i.expression.interpolated?"exponential":"interval"}function jt(r){for(var i=["concat"],o=/{([^{}]+)}/g,T=0,Z=o.exec(r);null!==Z;Z=o.exec(r)){var J=r.slice(T,o.lastIndex-Z[0].length);T=o.lastIndex,J.length>0&&i.push(J),i.push(["get",Z[1]])}if(1===i.length)return r;if(T<r.length)i.push(r.slice(T));else if(2===i.length)return["to-string",i[1]];return i}var he=function(r){function i(o,T){r.call(this,T),this.message=T,this.key=o}return r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i,i}(Error),_e=function(i,o){void 0===o&&(o=[]),this.parent=i,this.bindings={};for(var T=0,Z=o;T<Z.length;T+=1){var J=Z[T];this.bindings[J[0]]=J[1]}};_e.prototype.concat=function(i){return new _e(this,i)},_e.prototype.get=function(i){if(this.bindings[i])return this.bindings[i];if(this.parent)return this.parent.get(i);throw new Error(i+" not found in scope.")},_e.prototype.has=function(i){return!!this.bindings[i]||!!this.parent&&this.parent.has(i)};var Le=_e,Ze={kind:"null"},It={kind:"number"},ct={kind:"string"},m={kind:"boolean"},F={kind:"color"},Q={kind:"object"},V={kind:"value"},_t={kind:"collator"},St={kind:"formatted"},Nt={kind:"resolvedImage"};function Xt(r,i){return{kind:"array",itemType:r,N:i}}function Jt(r){if("array"===r.kind){var i=Jt(r.itemType);return"number"==typeof r.N?"array<"+i+", "+r.N+">":"value"===r.itemType.kind?"array":"array<"+i+">"}return r.kind}var Ee=[Ze,It,ct,m,F,St,Q,Xt(V),Nt];function se(r,i){if("error"===i.kind)return null;if("array"===r.kind){if("array"===i.kind&&(0===i.N&&"value"===i.itemType.kind||!se(r.itemType,i.itemType))&&("number"!=typeof r.N||r.N===i.N))return null}else{if(r.kind===i.kind)return null;if("value"===r.kind)for(var o=0,T=Ee;o<T.length;o+=1)if(!se(T[o],i))return null}return"Expected "+Jt(r)+" but found "+Jt(i)+" instead."}function Qt(r,i){return i.some(function(o){return o.kind===r.kind})}function Fe(r,i){return i.some(function(o){return"null"===o?null===r:"array"===o?Array.isArray(r):"object"===o?r&&!Array.isArray(r)&&"object"==typeof r:o===typeof r})}var Ye=function(i,o,T){this.sensitivity=i?o?"variant":"case":o?"accent":"base",this.locale=T,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})};Ye.prototype.compare=function(i,o){return this.collator.compare(i,o)},Ye.prototype.resolvedLocale=function(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale};var We=Ye,Ge=function(i,o,T,Z,J){this.text=i.normalize?i.normalize():i,this.image=o,this.scale=T,this.fontStack=Z,this.textColor=J},Ue=function(i){this.sections=i};Ue.fromString=function(i){return new Ue([new Ge(i,null,null,null,null)])},Ue.prototype.isEmpty=function(){return 0===this.sections.length||!this.sections.some(function(i){return 0!==i.text.length||i.image&&0!==i.image.name.length})},Ue.factory=function(i){return i instanceof Ue?i:Ue.fromString(i)},Ue.prototype.toString=function(){return 0===this.sections.length?"":this.sections.map(function(i){return i.text}).join("")},Ue.prototype.serialize=function(){for(var i=["format"],o=0,T=this.sections;o<T.length;o+=1){var Z=T[o];if(Z.image)i.push(["image",Z.image.name]);else{i.push(Z.text);var J={};Z.fontStack&&(J["text-font"]=["literal",Z.fontStack.split(",")]),Z.scale&&(J["font-scale"]=Z.scale),Z.textColor&&(J["text-color"]=["rgba"].concat(Z.textColor.toArray())),i.push(J)}}return i};var Ve=Ue,ii=function(i){this.name=i.name,this.available=i.available};ii.prototype.toString=function(){return this.name},ii.fromString=function(i){return i?new ii({name:i,available:!1}):null},ii.prototype.serialize=function(){return["image",this.name]};var Qe=ii;function qe(r,i,o,T){return"number"==typeof r&&r>=0&&r<=255&&"number"==typeof i&&i>=0&&i<=255&&"number"==typeof o&&o>=0&&o<=255?typeof T>"u"||"number"==typeof T&&T>=0&&T<=1?null:"Invalid rgba value ["+[r,i,o,T].join(", ")+"]: 'a' must be between 0 and 1.":"Invalid rgba value ["+("number"==typeof T?[r,i,o,T]:[r,i,o]).join(", ")+"]: 'r', 'g', and 'b' must be between 0 and 255."}function q(r){if(null===r)return!0;if("string"==typeof r)return!0;if("boolean"==typeof r)return!0;if("number"==typeof r)return!0;if(r instanceof ue)return!0;if(r instanceof We)return!0;if(r instanceof Ve)return!0;if(r instanceof Qe)return!0;if(Array.isArray(r)){for(var i=0,o=r;i<o.length;i+=1)if(!q(o[i]))return!1;return!0}if("object"==typeof r){for(var Z in r)if(!q(r[Z]))return!1;return!0}return!1}function $(r){if(null===r)return Ze;if("string"==typeof r)return ct;if("boolean"==typeof r)return m;if("number"==typeof r)return It;if(r instanceof ue)return F;if(r instanceof We)return _t;if(r instanceof Ve)return St;if(r instanceof Qe)return Nt;if(Array.isArray(r)){for(var o,i=r.length,T=0,Z=r;T<Z.length;T+=1){var rt=$(Z[T]);if(o){if(o===rt)continue;o=V;break}o=rt}return Xt(o||V,i)}return Q}function mt(r){var i=typeof r;return null===r?"":"string"===i||"number"===i||"boolean"===i?String(r):r instanceof ue||r instanceof Ve||r instanceof Qe?r.toString():JSON.stringify(r)}var pt=function(i,o){this.type=i,this.value=o};pt.parse=function(i,o){if(2!==i.length)return o.error("'literal' expression requires exactly one argument, but found "+(i.length-1)+" instead.");if(!q(i[1]))return o.error("invalid value");var T=i[1],Z=$(T),J=o.expectedType;return"array"===Z.kind&&0===Z.N&&J&&"array"===J.kind&&("number"!=typeof J.N||0===J.N)&&(Z=J),new pt(Z,T)},pt.prototype.evaluate=function(){return this.value},pt.prototype.eachChild=function(){},pt.prototype.outputDefined=function(){return!0},pt.prototype.serialize=function(){return"array"===this.type.kind||"object"===this.type.kind?["literal",this.value]:this.value instanceof ue?["rgba"].concat(this.value.toArray()):this.value instanceof Ve?this.value.serialize():this.value};var Rt=pt,Ht=function(i){this.name="ExpressionEvaluationError",this.message=i};Ht.prototype.toJSON=function(){return this.message};var ne=Ht,me={string:ct,number:It,boolean:m,object:Q},Me=function(i,o){this.type=i,this.args=o};Me.parse=function(i,o){if(i.length<2)return o.error("Expected at least one argument.");var Z,T=1,J=i[0];if("array"===J){var rt,Lt;if(i.length>2){var xt=i[1];if("string"!=typeof xt||!(xt in me)||"object"===xt)return o.error('The item type argument of "array" must be one of string, number, boolean',1);rt=me[xt],T++}else rt=V;if(i.length>3){if(null!==i[2]&&("number"!=typeof i[2]||i[2]<0||i[2]!==Math.floor(i[2])))return o.error('The length argument to "array" must be a positive integer literal',2);Lt=i[2],T++}Z=Xt(rt,Lt)}else Z=me[J];for(var Dt=[];T<i.length;T++){var Ft=o.parse(i[T],T,V);if(!Ft)return null;Dt.push(Ft)}return new Me(Z,Dt)},Me.prototype.evaluate=function(i){for(var o=0;o<this.args.length;o++){var T=this.args[o].evaluate(i);if(!se(this.type,$(T)))return T;if(o===this.args.length-1)throw new ne("Expected value to be of type "+Jt(this.type)+", but found "+Jt($(T))+" instead.")}return null},Me.prototype.eachChild=function(i){this.args.forEach(i)},Me.prototype.outputDefined=function(){return this.args.every(function(i){return i.outputDefined()})},Me.prototype.serialize=function(){var i=this.type,o=[i.kind];if("array"===i.kind){var T=i.itemType;if("string"===T.kind||"number"===T.kind||"boolean"===T.kind){o.push(T.kind);var Z=i.N;("number"==typeof Z||this.args.length>1)&&o.push(Z)}}return o.concat(this.args.map(function(J){return J.serialize()}))};var Re=Me,De=function(i){this.type=St,this.sections=i};De.parse=function(i,o){if(i.length<2)return o.error("Expected at least one argument.");var T=i[1];if(!Array.isArray(T)&&"object"==typeof T)return o.error("First argument must be an image or text section.");for(var Z=[],J=!1,rt=1;rt<=i.length-1;++rt){var xt=i[rt];if(J&&"object"==typeof xt&&!Array.isArray(xt)){J=!1;var Lt=null;if(xt["font-scale"]&&!(Lt=o.parse(xt["font-scale"],1,It)))return null;var Dt=null;if(xt["text-font"]&&!(Dt=o.parse(xt["text-font"],1,Xt(ct))))return null;var Ft=null;if(xt["text-color"]&&!(Ft=o.parse(xt["text-color"],1,F)))return null;var $t=Z[Z.length-1];$t.scale=Lt,$t.font=Dt,$t.textColor=Ft}else{var le=o.parse(i[rt],1,V);if(!le)return null;var fe=le.type.kind;if("string"!==fe&&"value"!==fe&&"null"!==fe&&"resolvedImage"!==fe)return o.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");J=!0,Z.push({content:le,scale:null,font:null,textColor:null})}}return new De(Z)},De.prototype.evaluate=function(i){return new Ve(this.sections.map(function(T){var Z=T.content.evaluate(i);return $(Z)===Nt?new Ge("",Z,null,null,null):new Ge(mt(Z),null,T.scale?T.scale.evaluate(i):null,T.font?T.font.evaluate(i).join(","):null,T.textColor?T.textColor.evaluate(i):null)}))},De.prototype.eachChild=function(i){for(var o=0,T=this.sections;o<T.length;o+=1){var Z=T[o];i(Z.content),Z.scale&&i(Z.scale),Z.font&&i(Z.font),Z.textColor&&i(Z.textColor)}},De.prototype.outputDefined=function(){return!1},De.prototype.serialize=function(){for(var i=["format"],o=0,T=this.sections;o<T.length;o+=1){var Z=T[o];i.push(Z.content.serialize());var J={};Z.scale&&(J["font-scale"]=Z.scale.serialize()),Z.font&&(J["text-font"]=Z.font.serialize()),Z.textColor&&(J["text-color"]=Z.textColor.serialize()),i.push(J)}return i};var je=De,Xe=function(i){this.type=Nt,this.input=i};Xe.parse=function(i,o){if(2!==i.length)return o.error("Expected two arguments.");var T=o.parse(i[1],1,ct);return T?new Xe(T):o.error("No image name provided.")},Xe.prototype.evaluate=function(i){var o=this.input.evaluate(i),T=Qe.fromString(o);return T&&i.availableImages&&(T.available=i.availableImages.indexOf(o)>-1),T},Xe.prototype.eachChild=function(i){i(this.input)},Xe.prototype.outputDefined=function(){return!1},Xe.prototype.serialize=function(){return["image",this.input.serialize()]};var ni=Xe,vi={"to-boolean":m,"to-color":F,"to-number":It,"to-string":ct},gi=function(i,o){this.type=i,this.args=o};gi.parse=function(i,o){if(i.length<2)return o.error("Expected at least one argument.");var T=i[0];if(("to-boolean"===T||"to-string"===T)&&2!==i.length)return o.error("Expected one argument.");for(var Z=vi[T],J=[],rt=1;rt<i.length;rt++){var xt=o.parse(i[rt],rt,V);if(!xt)return null;J.push(xt)}return new gi(Z,J)},gi.prototype.evaluate=function(i){if("boolean"===this.type.kind)return Boolean(this.args[0].evaluate(i));if("color"===this.type.kind){for(var o,T,Z=0,J=this.args;Z<J.length;Z+=1){if(T=null,(o=J[Z].evaluate(i))instanceof ue)return o;if("string"==typeof o){var xt=i.parseColor(o);if(xt)return xt}else if(Array.isArray(o)&&!(T=o.length<3||o.length>4?"Invalid rbga value "+JSON.stringify(o)+": expected an array containing either three or four numeric values.":qe(o[0],o[1],o[2],o[3])))return new ue(o[0]/255,o[1]/255,o[2]/255,o[3])}throw new ne(T||"Could not parse color from value '"+("string"==typeof o?o:String(JSON.stringify(o)))+"'")}if("number"===this.type.kind){for(var Lt=null,Dt=0,Ft=this.args;Dt<Ft.length;Dt+=1){if(null===(Lt=Ft[Dt].evaluate(i)))return 0;var le=Number(Lt);if(!isNaN(le))return le}throw new ne("Could not convert "+JSON.stringify(Lt)+" to number.")}return"formatted"===this.type.kind?Ve.fromString(mt(this.args[0].evaluate(i))):"resolvedImage"===this.type.kind?Qe.fromString(mt(this.args[0].evaluate(i))):mt(this.args[0].evaluate(i))},gi.prototype.eachChild=function(i){this.args.forEach(i)},gi.prototype.outputDefined=function(){return this.args.every(function(i){return i.outputDefined()})},gi.prototype.serialize=function(){if("formatted"===this.type.kind)return new je([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if("resolvedImage"===this.type.kind)return new ni(this.args[0]).serialize();var i=["to-"+this.type.kind];return this.eachChild(function(o){i.push(o.serialize())}),i};var yi=gi,Mn=["Unknown","Point","LineString","Polygon"],bi=function(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null,this.featureTileCoord=null,this.featureDistanceData=null};bi.prototype.id=function(){return this.feature&&void 0!==this.feature.id?this.feature.id:null},bi.prototype.geometryType=function(){return this.feature?"number"==typeof this.feature.type?Mn[this.feature.type]:this.feature.type:null},bi.prototype.geometry=function(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null},bi.prototype.canonicalID=function(){return this.canonical},bi.prototype.properties=function(){return this.feature&&this.feature.properties||{}},bi.prototype.distanceFromCenter=function(){if(this.featureTileCoord&&this.featureDistanceData){var i=this.featureDistanceData.center,o=this.featureDistanceData.scale,T=this.featureTileCoord;return this.featureDistanceData.bearing[0]*(T.x*o-i[0])+this.featureDistanceData.bearing[1]*(T.y*o-i[1])}return 0},bi.prototype.parseColor=function(i){var o=this._parseColorCache[i];return o||(o=this._parseColorCache[i]=ue.parse(i)),o};var mi=bi,ui=function(i,o,T,Z){this.name=i,this.type=o,this._evaluate=T,this.args=Z};ui.prototype.evaluate=function(i){return this._evaluate(i,this.args)},ui.prototype.eachChild=function(i){this.args.forEach(i)},ui.prototype.outputDefined=function(){return!1},ui.prototype.serialize=function(){return[this.name].concat(this.args.map(function(i){return i.serialize()}))},ui.parse=function(i,o){var T,Z=i[0],J=ui.definitions[Z];if(!J)return o.error('Unknown expression "'+Z+'". If you wanted a literal array, use ["literal", [...]].',0);for(var rt=Array.isArray(J)?J[0]:J.type,xt=Array.isArray(J)?[[J[1],J[2]]]:J.overloads,Lt=xt.filter(function(re){var oe=re[0];return!Array.isArray(oe)||oe.length===i.length-1}),Dt=null,Ft=0,$t=Lt;Ft<$t.length;Ft+=1){var le=$t[Ft],fe=le[0],be=le[1];Dt=new zi(o.registry,o.path,null,o.scope);for(var t=[],l=!1,_=1;_<i.length;_++){var B=i[_],j=Array.isArray(fe)?fe[_-1]:fe.type,X=Dt.parse(B,1+t.length,j);if(!X){l=!0;break}t.push(X)}if(!l){if(Array.isArray(fe)&&fe.length!==t.length){Dt.error("Expected "+fe.length+" arguments, but found "+t.length+" instead.");continue}for(var et=0;et<t.length;et++){var tt=Array.isArray(fe)?fe[et]:fe.type,ut=t[et];Dt.concat(et+1).checkSubtype(tt,ut.type)}if(0===Dt.errors.length)return new ui(Z,rt,be,t)}}if(1===Lt.length)(T=o.errors).push.apply(T,Dt.errors);else{for(var Ut=(Lt.length?Lt:xt).map(function(re){return function Ei(r){return Array.isArray(r)?"("+r.map(Jt).join(", ")+")":"("+Jt(r.type)+"...)"}(re[0])}).join(" | "),Pt=[],Vt=1;Vt<i.length;Vt++){var ae=o.parse(i[Vt],1+Pt.length);if(!ae)return null;Pt.push(Jt(ae.type))}o.error("Expected arguments of type "+Ut+", but found ("+Pt.join(", ")+") instead.")}return null},ui.register=function(i,o){for(var T in ui.definitions=o,o)i[T]=ui};var _i=ui,si=function(i,o,T){this.type=_t,this.locale=T,this.caseSensitive=i,this.diacriticSensitive=o};si.parse=function(i,o){if(2!==i.length)return o.error("Expected one argument.");var T=i[1];if("object"!=typeof T||Array.isArray(T))return o.error("Collator options argument must be an object.");var Z=o.parse(void 0!==T["case-sensitive"]&&T["case-sensitive"],1,m);if(!Z)return null;var J=o.parse(void 0!==T["diacritic-sensitive"]&&T["diacritic-sensitive"],1,m);if(!J)return null;var rt=null;return T.locale&&!(rt=o.parse(T.locale,1,ct))?null:new si(Z,J,rt)},si.prototype.evaluate=function(i){return new We(this.caseSensitive.evaluate(i),this.diacriticSensitive.evaluate(i),this.locale?this.locale.evaluate(i):null)},si.prototype.eachChild=function(i){i(this.caseSensitive),i(this.diacriticSensitive),this.locale&&i(this.locale)},si.prototype.outputDefined=function(){return!1},si.prototype.serialize=function(){var i={};return i["case-sensitive"]=this.caseSensitive.serialize(),i["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(i.locale=this.locale.serialize()),["collator",i]};var Gi=si,Ci=8192;function ri(r,i){r[0]=Math.min(r[0],i[0]),r[1]=Math.min(r[1],i[1]),r[2]=Math.max(r[2],i[0]),r[3]=Math.max(r[3],i[1])}function Vi(r,i){return!(r[0]<=i[0]||r[2]>=i[2]||r[1]<=i[1]||r[3]>=i[3])}function Ws(r,i){var o=function xi(r){return(180+r)/360}(r[0]),T=function Ri(r){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+r*Math.PI/360)))/360}(r[1]),Z=Math.pow(2,i.z);return[Math.round(o*Z*Ci),Math.round(T*Z*Ci)]}function Oi(r,i,o){var T=r[0]-i[0],Z=r[1]-i[1],J=r[0]-o[0],rt=r[1]-o[1];return T*rt-J*Z==0&&T*J<=0&&Z*rt<=0}function ln(r,i,o){return i[1]>r[1]!=o[1]>r[1]&&r[0]<(o[0]-i[0])*(r[1]-i[1])/(o[1]-i[1])+i[0]}function Tn(r,i){for(var o=!1,T=0,Z=i.length;T<Z;T++)for(var J=i[T],rt=0,xt=J.length;rt<xt-1;rt++){if(Oi(r,J[rt],J[rt+1]))return!1;ln(r,J[rt],J[rt+1])&&(o=!o)}return o}function hn(r,i){for(var o=0;o<i.length;o++)if(Tn(r,i[o]))return!0;return!1}function Mi(r,i,o,T){var Lt=T[0]-o[0],Dt=T[1]-o[1],Ft=(r[0]-o[0])*Dt-Lt*(r[1]-o[1]),$t=(i[0]-o[0])*Dt-Lt*(i[1]-o[1]);return Ft>0&&$t<0||Ft<0&&$t>0}function Li(r,i,o,T){return 0!==function qi(r,i){return r[0]*i[1]-r[1]*i[0]}([T[0]-o[0],T[1]-o[1]],[i[0]-r[0],i[1]-r[1]])&&!(!Mi(r,i,o,T)||!Mi(o,T,r,i))}function un(r,i,o){for(var T=0,Z=o;T<Z.length;T+=1)for(var J=Z[T],rt=0;rt<J.length-1;++rt)if(Li(r,i,J[rt],J[rt+1]))return!0;return!1}function tn(r,i){for(var o=0;o<r.length;++o)if(!Tn(r[o],i))return!1;for(var T=0;T<r.length-1;++T)if(un(r[T],r[T+1],i))return!1;return!0}function Gs(r,i){for(var o=0;o<i.length;o++)if(tn(r,i[o]))return!0;return!1}function Pn(r,i,o){for(var T=[],Z=0;Z<r.length;Z++){for(var J=[],rt=0;rt<r[Z].length;rt++){var xt=Ws(r[Z][rt],o);ri(i,xt),J.push(xt)}T.push(J)}return T}function cs(r,i,o){for(var T=[],Z=0;Z<r.length;Z++){var J=Pn(r[Z],i,o);T.push(J)}return T}function Cn(r,i,o,T){if(r[0]<o[0]||r[0]>o[2]){var Z=.5*T,J=r[0]-o[0]>Z?-T:o[0]-r[0]>Z?T:0;0===J&&(J=r[0]-o[2]>Z?-T:o[2]-r[0]>Z?T:0),r[0]+=J}ri(i,r)}function Gn(r,i,o,T){var Z=Math.pow(2,T.z)*Ci,J=[T.x*Ci,T.y*Ci],rt=[];if(!r)return rt;for(var xt=0,Lt=r;xt<Lt.length;xt+=1)for(var Ft=0,$t=Lt[xt];Ft<$t.length;Ft+=1){var le=$t[Ft],fe=[le.x+J[0],le.y+J[1]];Cn(fe,i,o,Z),rt.push(fe)}return rt}function ds(r,i,o,T){var Z=Math.pow(2,T.z)*Ci,J=[T.x*Ci,T.y*Ci],rt=[];if(!r)return rt;for(var xt=0,Lt=r;xt<Lt.length;xt+=1){for(var Ft=[],$t=0,le=Lt[xt];$t<le.length;$t+=1){var fe=le[$t],be=[fe.x+J[0],fe.y+J[1]];ri(i,be),Ft.push(be)}rt.push(Ft)}if(i[2]-i[0]<=Z/2){!function Rn(r){r[0]=r[1]=1/0,r[2]=r[3]=-1/0}(i);for(var t=0,l=rt;t<l.length;t+=1)for(var B=0,j=l[t];B<j.length;B+=1)Cn(j[B],i,o,Z)}return rt}var Bi=function(i,o){this.type=m,this.geojson=i,this.geometries=o};Bi.parse=function(i,o){if(2!==i.length)return o.error("'within' expression requires exactly one argument, but found "+(i.length-1)+" instead.");if(q(i[1])){var T=i[1];if("FeatureCollection"===T.type)for(var Z=0;Z<T.features.length;++Z){var J=T.features[Z].geometry.type;if("Polygon"===J||"MultiPolygon"===J)return new Bi(T,T.features[Z].geometry)}else if("Feature"===T.type){var rt=T.geometry.type;if("Polygon"===rt||"MultiPolygon"===rt)return new Bi(T,T.geometry)}else if("Polygon"===T.type||"MultiPolygon"===T.type)return new Bi(T,T)}return o.error("'within' expression requires valid geojson object that contains polygon geometry type.")},Bi.prototype.evaluate=function(i){if(null!=i.geometry()&&null!=i.canonicalID()){if("Point"===i.geometryType())return function zn(r,i){var o=[1/0,1/0,-1/0,-1/0],T=[1/0,1/0,-1/0,-1/0],Z=r.canonicalID();if(!Z)return!1;if("Polygon"===i.type){var J=Pn(i.coordinates,T,Z),rt=Gn(r.geometry(),o,T,Z);if(!Vi(o,T))return!1;for(var xt=0,Lt=rt;xt<Lt.length;xt+=1)if(!Tn(Lt[xt],J))return!1}if("MultiPolygon"===i.type){var Ft=cs(i.coordinates,T,Z),$t=Gn(r.geometry(),o,T,Z);if(!Vi(o,T))return!1;for(var le=0,fe=$t;le<fe.length;le+=1)if(!hn(fe[le],Ft))return!1}return!0}(i,this.geometries);if("LineString"===i.geometryType())return function zs(r,i){var o=[1/0,1/0,-1/0,-1/0],T=[1/0,1/0,-1/0,-1/0],Z=r.canonicalID();if(!Z)return!1;if("Polygon"===i.type){var J=Pn(i.coordinates,T,Z),rt=ds(r.geometry(),o,T,Z);if(!Vi(o,T))return!1;for(var xt=0,Lt=rt;xt<Lt.length;xt+=1)if(!tn(Lt[xt],J))return!1}if("MultiPolygon"===i.type){var Ft=cs(i.coordinates,T,Z),$t=ds(r.geometry(),o,T,Z);if(!Vi(o,T))return!1;for(var le=0,fe=$t;le<fe.length;le+=1)if(!Gs(fe[le],Ft))return!1}return!0}(i,this.geometries)}return!1},Bi.prototype.eachChild=function(){},Bi.prototype.outputDefined=function(){return!0},Bi.prototype.serialize=function(){return["within",this.geojson]};var Kn=Bi;function cn(r){if(r instanceof _i){if("get"===r.name&&1===r.args.length)return!1;if("feature-state"===r.name)return!1;if("has"===r.name&&1===r.args.length)return!1;if("properties"===r.name||"geometry-type"===r.name||"id"===r.name)return!1;if(/^filter-/.test(r.name))return!1}if(r instanceof Kn)return!1;var i=!0;return r.eachChild(function(o){i&&!cn(o)&&(i=!1)}),i}function kn(r){if(r instanceof _i&&"feature-state"===r.name)return!1;var i=!0;return r.eachChild(function(o){i&&!kn(o)&&(i=!1)}),i}function On(r,i){if(r instanceof _i&&i.indexOf(r.name)>=0)return!1;var o=!0;return r.eachChild(function(T){o&&!On(T,i)&&(o=!1)}),o}var Yi=function(i,o){this.type=o.type,this.name=i,this.boundExpression=o};Yi.parse=function(i,o){if(2!==i.length||"string"!=typeof i[1])return o.error("'var' expression requires exactly one string literal argument.");var T=i[1];return o.scope.has(T)?new Yi(T,o.scope.get(T)):o.error('Unknown variable "'+T+'". Make sure "'+T+'" has been bound in an enclosing "let" expression before using it.',1)},Yi.prototype.evaluate=function(i){return this.boundExpression.evaluate(i)},Yi.prototype.eachChild=function(){},Yi.prototype.outputDefined=function(){return!1},Yi.prototype.serialize=function(){return["var",this.name]};var fs=Yi,Hi=function(i,o,T,Z,J){void 0===o&&(o=[]),void 0===Z&&(Z=new Le),void 0===J&&(J=[]),this.registry=i,this.path=o,this.key=o.map(function(rt){return"["+rt+"]"}).join(""),this.scope=Z,this.errors=J,this.expectedType=T};Hi.prototype.parse=function(i,o,T,Z,J){return void 0===J&&(J={}),o?this.concat(o,T,Z)._parse(i,J):this._parse(i,J)},Hi.prototype._parse=function(i,o){function T(Ft,$t,le){return"assert"===le?new Re($t,[Ft]):"coerce"===le?new yi($t,[Ft]):Ft}if((null===i||"string"==typeof i||"boolean"==typeof i||"number"==typeof i)&&(i=["literal",i]),Array.isArray(i)){if(0===i.length)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');var Z=i[0];if("string"!=typeof Z)return this.error("Expression name must be a string, but found "+typeof Z+' instead. If you wanted a literal array, use ["literal", [...]].',0),null;var J=this.registry[Z];if(J){var rt=J.parse(i,this);if(!rt)return null;if(this.expectedType){var xt=this.expectedType,Lt=rt.type;if("string"!==xt.kind&&"number"!==xt.kind&&"boolean"!==xt.kind&&"object"!==xt.kind&&"array"!==xt.kind||"value"!==Lt.kind)if("color"!==xt.kind&&"formatted"!==xt.kind&&"resolvedImage"!==xt.kind||"value"!==Lt.kind&&"string"!==Lt.kind){if(this.checkSubtype(xt,Lt))return null}else rt=T(rt,xt,o.typeAnnotation||"coerce");else rt=T(rt,xt,o.typeAnnotation||"assert")}if(!(rt instanceof Rt)&&"resolvedImage"!==rt.type.kind&&Xn(rt)){var Dt=new mi;try{rt=new Rt(rt.type,rt.evaluate(Dt))}catch(Ft){return this.error(Ft.message),null}}return rt}return this.error('Unknown expression "'+Z+'". If you wanted a literal array, use ["literal", [...]].',0)}return this.error(typeof i>"u"?"'undefined' value invalid. Use null instead.":"object"==typeof i?'Bare objects invalid. Use ["literal", {...}] instead.':"Expected an array, but found "+typeof i+" instead.")},Hi.prototype.concat=function(i,o,T){var Z="number"==typeof i?this.path.concat(i):this.path,J=T?this.scope.concat(T):this.scope;return new Hi(this.registry,Z,o||null,J,this.errors)},Hi.prototype.error=function(i){for(var o=[],T=arguments.length-1;T-- >0;)o[T]=arguments[T+1];var Z=""+this.key+o.map(function(J){return"["+J+"]"}).join("");this.errors.push(new he(Z,i))},Hi.prototype.checkSubtype=function(i,o){var T=se(i,o);return T&&this.error(T),T};var zi=Hi;function Xn(r){if(r instanceof fs)return Xn(r.boundExpression);if(r instanceof _i&&"error"===r.name)return!1;if(r instanceof Gi)return!1;if(r instanceof Kn)return!1;var i=r instanceof yi||r instanceof Re,o=!0;return r.eachChild(function(T){o=i?o&&Xn(T):o&&T instanceof Rt}),!!o&&cn(r)&&On(r,["zoom","heatmap-density","line-progress","sky-radial-progress","accumulated","is-supported-script","pitch","distance-from-center"])}function gs(r,i){for(var rt,o=r.length-1,T=0,Z=o,J=0;T<=Z;)if((rt=r[J=Math.floor((T+Z)/2)])<=i){if(J===o||i<r[J+1])return J;T=J+1}else{if(!(rt>i))throw new ne("Input is not a number.");Z=J-1}return 0}var Ji=function(i,o,T){this.type=i,this.input=o,this.labels=[],this.outputs=[];for(var Z=0,J=T;Z<J.length;Z+=1){var rt=J[Z],Lt=rt[1];this.labels.push(rt[0]),this.outputs.push(Lt)}};Ji.parse=function(i,o){if(i.length-1<4)return o.error("Expected at least 4 arguments, but found only "+(i.length-1)+".");if((i.length-1)%2!=0)return o.error("Expected an even number of arguments.");var T=o.parse(i[1],1,It);if(!T)return null;var Z=[],J=null;o.expectedType&&"value"!==o.expectedType.kind&&(J=o.expectedType);for(var rt=1;rt<i.length;rt+=2){var xt=1===rt?-1/0:i[rt],Lt=i[rt+1],Dt=rt,Ft=rt+1;if("number"!=typeof xt)return o.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',Dt);if(Z.length&&Z[Z.length-1][0]>=xt)return o.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',Dt);var $t=o.parse(Lt,Ft,J);if(!$t)return null;J=J||$t.type,Z.push([xt,$t])}return new Ji(J,T,Z)},Ji.prototype.evaluate=function(i){var o=this.labels,T=this.outputs;if(1===o.length)return T[0].evaluate(i);var Z=this.input.evaluate(i);if(Z<=o[0])return T[0].evaluate(i);var J=o.length;return Z>=o[J-1]?T[J-1].evaluate(i):T[gs(o,Z)].evaluate(i)},Ji.prototype.eachChild=function(i){i(this.input);for(var o=0,T=this.outputs;o<T.length;o+=1)i(T[o])},Ji.prototype.outputDefined=function(){return this.outputs.every(function(i){return i.outputDefined()})},Ji.prototype.serialize=function(){for(var i=["step",this.input.serialize()],o=0;o<this.labels.length;o++)o>0&&i.push(this.labels[o]),i.push(this.outputs[o].serialize());return i};var Vn=Ji,_s=Ki;function Ki(r,i,o,T){this.cx=3*r,this.bx=3*(o-r)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*i,this.by=3*(T-i)-this.cy,this.ay=1-this.cy-this.by,this.p1x=r,this.p1y=T,this.p2x=o,this.p2y=T}function Si(r,i,o){return r*(1-o)+i*o}Ki.prototype.sampleCurveX=function(r){return((this.ax*r+this.bx)*r+this.cx)*r},Ki.prototype.sampleCurveY=function(r){return((this.ay*r+this.by)*r+this.cy)*r},Ki.prototype.sampleCurveDerivativeX=function(r){return(3*this.ax*r+2*this.bx)*r+this.cx},Ki.prototype.solveCurveX=function(r,i){var o,T,Z,J,rt;for(typeof i>"u"&&(i=1e-6),Z=r,rt=0;rt<8;rt++){if(J=this.sampleCurveX(Z)-r,Math.abs(J)<i)return Z;var xt=this.sampleCurveDerivativeX(Z);if(Math.abs(xt)<1e-6)break;Z-=J/xt}if((Z=r)<(o=0))return o;if(Z>(T=1))return T;for(;o<T;){if(J=this.sampleCurveX(Z),Math.abs(J-r)<i)return Z;r>J?o=Z:T=Z,Z=.5*(T-o)+o}return Z},Ki.prototype.solve=function(r,i){return this.sampleCurveY(this.solveCurveX(r,i))};var Ks=Object.freeze({__proto__:null,number:Si,color:function ms(r,i,o){return new ue(Si(r.r,i.r,o),Si(r.g,i.g,o),Si(r.b,i.b,o),Si(r.a,i.a,o))},array:function Yn(r,i,o){return r.map(function(T,Z){return Si(T,i[Z],o)})}}),Jn=4/29,Ti=6/29,ys=3*Ti*Ti,ks=Math.PI/180,Xs=180/Math.PI;function Sn(r){return r>.008856451679035631?Math.pow(r,1/3):r/ys+Jn}function $n(r){return r>Ti?r*r*r:ys*(r-Jn)}function en(r){return 255*(r<=.0031308?12.92*r:1.055*Math.pow(r,1/2.4)-.055)}function dn(r){return(r/=255)<=.04045?r/12.92:Math.pow((r+.055)/1.055,2.4)}function wi(r){var i=dn(r.r),o=dn(r.g),T=dn(r.b),Z=Sn((.4124564*i+.3575761*o+.1804375*T)/.95047),J=Sn((.2126729*i+.7151522*o+.072175*T)/1);return{l:116*J-16,a:500*(Z-J),b:200*(J-Sn((.0193339*i+.119192*o+.9503041*T)/1.08883)),alpha:r.a}}function Es(r){var i=(r.l+16)/116,o=isNaN(r.a)?i:i+r.a/500,T=isNaN(r.b)?i:i-r.b/200;return i=1*$n(i),o=.95047*$n(o),T=1.08883*$n(T),new ue(en(3.2404542*o-1.5371385*i-.4985314*T),en(-.969266*o+1.8760108*i+.041556*T),en(.0556434*o-.2040259*i+1.0572252*T),r.alpha)}function Kt(r,i,o){var T=i-r;return r+o*(T>180||T<-180?T-360*Math.round(T/360):T)}var ft={forward:wi,reverse:Es,interpolate:function Vs(r,i,o){return{l:Si(r.l,i.l,o),a:Si(r.a,i.a,o),b:Si(r.b,i.b,o),alpha:Si(r.alpha,i.alpha,o)}}},yt_forward=function qn(r){var i=wi(r),o=i.l,T=i.a,Z=i.b,J=Math.atan2(Z,T)*Xs;return{h:J<0?J+360:J,c:Math.sqrt(T*T+Z*Z),l:o,alpha:r.a}},yt_reverse=function Ys(r){var i=r.h*ks,o=r.c;return Es({l:r.l,a:Math.cos(i)*o,b:Math.sin(i)*o,alpha:r.alpha})},yt_interpolate=function at(r,i,o){return{h:Kt(r.h,i.h,o),c:Si(r.c,i.c,o),l:Si(r.l,i.l,o),alpha:Si(r.alpha,i.alpha,o)}},wt=function(i,o,T,Z,J){this.type=i,this.operator=o,this.interpolation=T,this.input=Z,this.labels=[],this.outputs=[];for(var rt=0,xt=J;rt<xt.length;rt+=1){var Lt=xt[rt],Ft=Lt[1];this.labels.push(Lt[0]),this.outputs.push(Ft)}};function te(r,i,o,T){var Z=T-o,J=r-o;return 0===Z?0:1===i?J/Z:(Math.pow(i,J)-1)/(Math.pow(i,Z)-1)}wt.interpolationFactor=function(i,o,T,Z){var J=0;if("exponential"===i.name)J=te(o,i.base,T,Z);else if("linear"===i.name)J=te(o,1,T,Z);else if("cubic-bezier"===i.name){var rt=i.controlPoints;J=new _s(rt[0],rt[1],rt[2],rt[3]).solve(te(o,1,T,Z))}return J},wt.parse=function(i,o){var T=i[0],Z=i[1],J=i[2],rt=i.slice(3);if(!Array.isArray(Z)||0===Z.length)return o.error("Expected an interpolation type expression.",1);if("linear"===Z[0])Z={name:"linear"};else if("exponential"===Z[0]){var xt=Z[1];if("number"!=typeof xt)return o.error("Exponential interpolation requires a numeric base.",1,1);Z={name:"exponential",base:xt}}else{if("cubic-bezier"!==Z[0])return o.error("Unknown interpolation type "+String(Z[0]),1,0);var Lt=Z.slice(1);if(4!==Lt.length||Lt.some(function(_){return"number"!=typeof _||_<0||_>1}))return o.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);Z={name:"cubic-bezier",controlPoints:Lt}}if(i.length-1<4)return o.error("Expected at least 4 arguments, but found only "+(i.length-1)+".");if((i.length-1)%2!=0)return o.error("Expected an even number of arguments.");if(!(J=o.parse(J,2,It)))return null;var Dt=[],Ft=null;"interpolate-hcl"===T||"interpolate-lab"===T?Ft=F:o.expectedType&&"value"!==o.expectedType.kind&&(Ft=o.expectedType);for(var $t=0;$t<rt.length;$t+=2){var le=rt[$t],fe=rt[$t+1],be=$t+3,t=$t+4;if("number"!=typeof le)return o.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',be);if(Dt.length&&Dt[Dt.length-1][0]>=le)return o.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',be);var l=o.parse(fe,t,Ft);if(!l)return null;Ft=Ft||l.type,Dt.push([le,l])}return"number"===Ft.kind||"color"===Ft.kind||"array"===Ft.kind&&"number"===Ft.itemType.kind&&"number"==typeof Ft.N?new wt(Ft,T,Z,J,Dt):o.error("Type "+Jt(Ft)+" is not interpolatable.")},wt.prototype.evaluate=function(i){var o=this.labels,T=this.outputs;if(1===o.length)return T[0].evaluate(i);var Z=this.input.evaluate(i);if(Z<=o[0])return T[0].evaluate(i);var J=o.length;if(Z>=o[J-1])return T[J-1].evaluate(i);var rt=gs(o,Z),Dt=wt.interpolationFactor(this.interpolation,Z,o[rt],o[rt+1]),Ft=T[rt].evaluate(i),$t=T[rt+1].evaluate(i);return"interpolate"===this.operator?Ks[this.type.kind.toLowerCase()](Ft,$t,Dt):"interpolate-hcl"===this.operator?yt_reverse(yt_interpolate(yt_forward(Ft),yt_forward($t),Dt)):ft.reverse(ft.interpolate(ft.forward(Ft),ft.forward($t),Dt))},wt.prototype.eachChild=function(i){i(this.input);for(var o=0,T=this.outputs;o<T.length;o+=1)i(T[o])},wt.prototype.outputDefined=function(){return this.outputs.every(function(i){return i.outputDefined()})},wt.prototype.serialize=function(){var i;i="linear"===this.interpolation.name?["linear"]:"exponential"===this.interpolation.name?1===this.interpolation.base?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);for(var o=[this.operator,i,this.input.serialize()],T=0;T<this.labels.length;T++)o.push(this.labels[T],this.outputs[T].serialize());return o};var ee=wt,ve=function(i,o){this.type=i,this.args=o};ve.parse=function(i,o){if(i.length<2)return o.error("Expectected at least one argument.");var T=null,Z=o.expectedType;Z&&"value"!==Z.kind&&(T=Z);for(var J=[],rt=0,xt=i.slice(1);rt<xt.length;rt+=1){var Dt=o.parse(xt[rt],1+J.length,T,void 0,{typeAnnotation:"omit"});if(!Dt)return null;T=T||Dt.type,J.push(Dt)}var Ft=Z&&J.some(function($t){return se(Z,$t.type)});return new ve(Ft?V:T,J)},ve.prototype.evaluate=function(i){for(var Z,o=null,T=0,J=0,rt=this.args;J<rt.length;J+=1){if(T++,(o=rt[J].evaluate(i))&&o instanceof Qe&&!o.available&&(Z||(Z=o),o=null,T===this.args.length))return Z;if(null!==o)break}return o},ve.prototype.eachChild=function(i){this.args.forEach(i)},ve.prototype.outputDefined=function(){return this.args.every(function(i){return i.outputDefined()})},ve.prototype.serialize=function(){var i=["coalesce"];return this.eachChild(function(o){i.push(o.serialize())}),i};var xe=ve,Oe=function(i,o){this.type=o.type,this.bindings=[].concat(i),this.result=o};Oe.prototype.evaluate=function(i){return this.result.evaluate(i)},Oe.prototype.eachChild=function(i){for(var o=0,T=this.bindings;o<T.length;o+=1)i(T[o][1]);i(this.result)},Oe.parse=function(i,o){if(i.length<4)return o.error("Expected at least 3 arguments, but found "+(i.length-1)+" instead.");for(var T=[],Z=1;Z<i.length-1;Z+=2){var J=i[Z];if("string"!=typeof J)return o.error("Expected string, but found "+typeof J+" instead.",Z);if(/[^a-zA-Z0-9_]/.test(J))return o.error("Variable names must contain only alphanumeric characters or '_'.",Z);var rt=o.parse(i[Z+1],Z+1);if(!rt)return null;T.push([J,rt])}var xt=o.parse(i[i.length-1],i.length-1,o.expectedType,T);return xt?new Oe(T,xt):null},Oe.prototype.outputDefined=function(){return this.result.outputDefined()},Oe.prototype.serialize=function(){for(var i=["let"],o=0,T=this.bindings;o<T.length;o+=1){var Z=T[o];i.push(Z[0],Z[1].serialize())}return i.push(this.result.serialize()),i};var ze=Oe,He=function(i,o,T){this.type=i,this.index=o,this.input=T};He.parse=function(i,o){if(3!==i.length)return o.error("Expected 2 arguments, but found "+(i.length-1)+" instead.");var T=o.parse(i[1],1,It),Z=o.parse(i[2],2,Xt(o.expectedType||V));return T&&Z?new He(Z.type.itemType,T,Z):null},He.prototype.evaluate=function(i){var o=this.index.evaluate(i),T=this.input.evaluate(i);if(o<0)throw new ne("Array index out of bounds: "+o+" < 0.");if(o>=T.length)throw new ne("Array index out of bounds: "+o+" > "+(T.length-1)+".");if(o!==Math.floor(o))throw new ne("Array index must be an integer, but found "+o+" instead.");return T[o]},He.prototype.eachChild=function(i){i(this.index),i(this.input)},He.prototype.outputDefined=function(){return!1},He.prototype.serialize=function(){return["at",this.index.serialize(),this.input.serialize()]};var ti=He,ei=function(i,o){this.type=m,this.needle=i,this.haystack=o};ei.parse=function(i,o){if(3!==i.length)return o.error("Expected 2 arguments, but found "+(i.length-1)+" instead.");var T=o.parse(i[1],1,V),Z=o.parse(i[2],2,V);return T&&Z?Qt(T.type,[m,ct,It,Ze,V])?new ei(T,Z):o.error("Expected first argument to be of type boolean, string, number or null, but found "+Jt(T.type)+" instead"):null},ei.prototype.evaluate=function(i){var o=this.needle.evaluate(i),T=this.haystack.evaluate(i);if(null==T)return!1;if(!Fe(o,["boolean","string","number","null"]))throw new ne("Expected first argument to be of type boolean, string, number or null, but found "+Jt($(o))+" instead.");if(!Fe(T,["string","array"]))throw new ne("Expected second argument to be of type array or string, but found "+Jt($(T))+" instead.");return T.indexOf(o)>=0},ei.prototype.eachChild=function(i){i(this.needle),i(this.haystack)},ei.prototype.outputDefined=function(){return!0},ei.prototype.serialize=function(){return["in",this.needle.serialize(),this.haystack.serialize()]};var li=ei,pi=function(i,o,T){this.type=It,this.needle=i,this.haystack=o,this.fromIndex=T};pi.parse=function(i,o){if(i.length<=2||i.length>=5)return o.error("Expected 3 or 4 arguments, but found "+(i.length-1)+" instead.");var T=o.parse(i[1],1,V),Z=o.parse(i[2],2,V);if(!T||!Z)return null;if(!Qt(T.type,[m,ct,It,Ze,V]))return o.error("Expected first argument to be of type boolean, string, number or null, but found "+Jt(T.type)+" instead");if(4===i.length){var J=o.parse(i[3],3,It);return J?new pi(T,Z,J):null}return new pi(T,Z)},pi.prototype.evaluate=function(i){var o=this.needle.evaluate(i),T=this.haystack.evaluate(i);if(!Fe(o,["boolean","string","number","null"]))throw new ne("Expected first argument to be of type boolean, string, number or null, but found "+Jt($(o))+" instead.");if(!Fe(T,["string","array"]))throw new ne("Expected second argument to be of type array or string, but found "+Jt($(T))+" instead.");if(this.fromIndex){var Z=this.fromIndex.evaluate(i);return T.indexOf(o,Z)}return T.indexOf(o)},pi.prototype.eachChild=function(i){i(this.needle),i(this.haystack),this.fromIndex&&i(this.fromIndex)},pi.prototype.outputDefined=function(){return!1},pi.prototype.serialize=function(){if(null!=this.fromIndex&&void 0!==this.fromIndex){var i=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),i]}return["index-of",this.needle.serialize(),this.haystack.serialize()]};var ci=pi,ai=function(i,o,T,Z,J,rt){this.inputType=i,this.type=o,this.input=T,this.cases=Z,this.outputs=J,this.otherwise=rt};ai.parse=function(i,o){if(i.length<5)return o.error("Expected at least 4 arguments, but found only "+(i.length-1)+".");if(i.length%2!=1)return o.error("Expected an even number of arguments.");var T,Z;o.expectedType&&"value"!==o.expectedType.kind&&(Z=o.expectedType);for(var J={},rt=[],xt=2;xt<i.length-1;xt+=2){var Lt=i[xt],Dt=i[xt+1];Array.isArray(Lt)||(Lt=[Lt]);var Ft=o.concat(xt);if(0===Lt.length)return Ft.error("Expected at least one branch label.");for(var $t=0,le=Lt;$t<le.length;$t+=1){var fe=le[$t];if("number"!=typeof fe&&"string"!=typeof fe)return Ft.error("Branch labels must be numbers or strings.");if("number"==typeof fe&&Math.abs(fe)>Number.MAX_SAFE_INTEGER)return Ft.error("Branch labels must be integers no larger than "+Number.MAX_SAFE_INTEGER+".");if("number"==typeof fe&&Math.floor(fe)!==fe)return Ft.error("Numeric branch labels must be integer values.");if(T){if(Ft.checkSubtype(T,$(fe)))return null}else T=$(fe);if(typeof J[String(fe)]<"u")return Ft.error("Branch labels must be unique.");J[String(fe)]=rt.length}var be=o.parse(Dt,xt,Z);if(!be)return null;Z=Z||be.type,rt.push(be)}var t=o.parse(i[1],1,V);if(!t)return null;var l=o.parse(i[i.length-1],i.length-1,Z);return!l||"value"!==t.type.kind&&o.concat(1).checkSubtype(T,t.type)?null:new ai(T,Z,t,J,rt,l)},ai.prototype.evaluate=function(i){var o=this.input.evaluate(i);return($(o)===this.inputType&&this.outputs[this.cases[o]]||this.otherwise).evaluate(i)},ai.prototype.eachChild=function(i){i(this.input),this.outputs.forEach(i),i(this.otherwise)},ai.prototype.outputDefined=function(){return this.outputs.every(function(i){return i.outputDefined()})&&this.otherwise.outputDefined()},ai.prototype.serialize=function(){for(var i=this,o=["match",this.input.serialize()],Z=[],J={},rt=0,xt=Object.keys(this.cases).sort();rt<xt.length;rt+=1){var Lt=xt[rt];void 0===(Dt=J[this.cases[Lt]])?(J[this.cases[Lt]]=Z.length,Z.push([this.cases[Lt],[Lt]])):Z[Dt][1].push(Lt)}for(var Ft=function(t){return"number"===i.inputType.kind?Number(t):t},$t=0,le=Z;$t<le.length;$t+=1){var fe=le[$t],Dt=fe[0],be=fe[1];o.push(1===be.length?Ft(be[0]):be.map(Ft)),o.push(this.outputs[outputIndex$1].serialize())}return o.push(this.otherwise.serialize()),o};var Pi=ai,fi=function(i,o,T){this.type=i,this.branches=o,this.otherwise=T};fi.parse=function(i,o){if(i.length<4)return o.error("Expected at least 3 arguments, but found only "+(i.length-1)+".");if(i.length%2!=0)return o.error("Expected an odd number of arguments.");var T;o.expectedType&&"value"!==o.expectedType.kind&&(T=o.expectedType);for(var Z=[],J=1;J<i.length-1;J+=2){var rt=o.parse(i[J],J,m);if(!rt)return null;var xt=o.parse(i[J+1],J+1,T);if(!xt)return null;Z.push([rt,xt]),T=T||xt.type}var Lt=o.parse(i[i.length-1],i.length-1,T);return Lt?new fi(T,Z,Lt):null},fi.prototype.evaluate=function(i){for(var o=0,T=this.branches;o<T.length;o+=1){var Z=T[o],rt=Z[1];if(Z[0].evaluate(i))return rt.evaluate(i)}return this.otherwise.evaluate(i)},fi.prototype.eachChild=function(i){for(var o=0,T=this.branches;o<T.length;o+=1){var Z=T[o],rt=Z[1];i(Z[0]),i(rt)}i(this.otherwise)},fi.prototype.outputDefined=function(){return this.branches.every(function(i){return i[1].outputDefined()})&&this.otherwise.outputDefined()},fi.prototype.serialize=function(){var i=["case"];return this.eachChild(function(o){i.push(o.serialize())}),i};var Ii=fi,Di=function(i,o,T,Z){this.type=i,this.input=o,this.beginIndex=T,this.endIndex=Z};Di.parse=function(i,o){if(i.length<=2||i.length>=5)return o.error("Expected 3 or 4 arguments, but found "+(i.length-1)+" instead.");var T=o.parse(i[1],1,V),Z=o.parse(i[2],2,It);if(!T||!Z)return null;if(!Qt(T.type,[Xt(V),ct,V]))return o.error("Expected first argument to be of type array or string, but found "+Jt(T.type)+" instead");if(4===i.length){var J=o.parse(i[3],3,It);return J?new Di(T.type,T,Z,J):null}return new Di(T.type,T,Z)},Di.prototype.evaluate=function(i){var o=this.input.evaluate(i),T=this.beginIndex.evaluate(i);if(!Fe(o,["string","array"]))throw new ne("Expected first argument to be of type array or string, but found "+Jt($(o))+" instead.");if(this.endIndex){var Z=this.endIndex.evaluate(i);return o.slice(T,Z)}return o.slice(T)},Di.prototype.eachChild=function(i){i(this.input),i(this.beginIndex),this.endIndex&&i(this.endIndex)},Di.prototype.outputDefined=function(){return!1},Di.prototype.serialize=function(){if(null!=this.endIndex&&void 0!==this.endIndex){var i=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),i]}return["slice",this.input.serialize(),this.beginIndex.serialize()]};var Qi=Di;function Fi(r,i){return"=="===r||"!="===r?"boolean"===i.kind||"string"===i.kind||"number"===i.kind||"null"===i.kind||"value"===i.kind:"string"===i.kind||"number"===i.kind||"value"===i.kind}function Ps(r,i,o,T){return 0===T.compare(i,o)}function An(r,i,o){var T="=="!==r&&"!="!==r;return function(){function Z(J,rt,xt){this.type=m,this.lhs=J,this.rhs=rt,this.collator=xt,this.hasUntypedArgument="value"===J.type.kind||"value"===rt.type.kind}return Z.parse=function(rt,xt){if(3!==rt.length&&4!==rt.length)return xt.error("Expected two or three arguments.");var Lt=rt[0],Dt=xt.parse(rt[1],1,V);if(!Dt)return null;if(!Fi(Lt,Dt.type))return xt.concat(1).error('"'+Lt+"\" comparisons are not supported for type '"+Jt(Dt.type)+"'.");var Ft=xt.parse(rt[2],2,V);if(!Ft)return null;if(!Fi(Lt,Ft.type))return xt.concat(2).error('"'+Lt+"\" comparisons are not supported for type '"+Jt(Ft.type)+"'.");if(Dt.type.kind!==Ft.type.kind&&"value"!==Dt.type.kind&&"value"!==Ft.type.kind)return xt.error("Cannot compare types '"+Jt(Dt.type)+"' and '"+Jt(Ft.type)+"'.");T&&("value"===Dt.type.kind&&"value"!==Ft.type.kind?Dt=new Re(Ft.type,[Dt]):"value"!==Dt.type.kind&&"value"===Ft.type.kind&&(Ft=new Re(Dt.type,[Ft])));var $t=null;if(4===rt.length){if("string"!==Dt.type.kind&&"string"!==Ft.type.kind&&"value"!==Dt.type.kind&&"value"!==Ft.type.kind)return xt.error("Cannot use collator to compare non-string types.");if(!($t=xt.parse(rt[3],3,_t)))return null}return new Z(Dt,Ft,$t)},Z.prototype.evaluate=function(rt){var xt=this.lhs.evaluate(rt),Lt=this.rhs.evaluate(rt);if(T&&this.hasUntypedArgument){var Dt=$(xt),Ft=$(Lt);if(Dt.kind!==Ft.kind||"string"!==Dt.kind&&"number"!==Dt.kind)throw new ne('Expected arguments for "'+r+'" to be (string, string) or (number, number), but found ('+Dt.kind+", "+Ft.kind+") instead.")}if(this.collator&&!T&&this.hasUntypedArgument){var $t=$(xt),le=$(Lt);if("string"!==$t.kind||"string"!==le.kind)return i(rt,xt,Lt)}return this.collator?o(rt,xt,Lt,this.collator.evaluate(rt)):i(rt,xt,Lt)},Z.prototype.eachChild=function(rt){rt(this.lhs),rt(this.rhs),this.collator&&rt(this.collator)},Z.prototype.outputDefined=function(){return!0},Z.prototype.serialize=function(){var rt=[r];return this.eachChild(function(xt){rt.push(xt.serialize())}),rt},Z}()}var va=An("==",function xs(r,i,o){return i===o},Ps),ya=An("!=",function ts(r,i,o){return i!==o},function ga(r,i,o,T){return!Ps(0,i,o,T)}),Ea=An("<",function fn(r,i,o){return i<o},function _a(r,i,o,T){return T.compare(i,o)<0}),xa=An(">",function Ms(r,i,o){return i>o},function ma(r,i,o,T){return T.compare(i,o)>0}),Ma=An("<=",function Ts(r,i,o){return i<=o},function pa(r,i,o,T){return T.compare(i,o)<=0}),Ta=An(">=",function es(r,i,o){return i>=o},function In(r,i,o,T){return T.compare(i,o)>=0}),gn=function(i,o,T,Z,J,rt){this.type=ct,this.number=i,this.locale=o,this.currency=T,this.unit=Z,this.minFractionDigits=J,this.maxFractionDigits=rt};gn.parse=function(i,o){if(3!==i.length)return o.error("Expected two arguments.");var T=o.parse(i[1],1,It);if(!T)return null;var Z=i[2];if("object"!=typeof Z||Array.isArray(Z))return o.error("NumberFormat options argument must be an object.");var J=null;if(Z.locale&&!(J=o.parse(Z.locale,1,ct)))return null;var rt=null;if(Z.currency&&!(rt=o.parse(Z.currency,1,ct)))return null;var xt=null;if(Z.unit&&!(xt=o.parse(Z.unit,1,ct)))return null;var Lt=null;if(Z["min-fraction-digits"]&&!(Lt=o.parse(Z["min-fraction-digits"],1,It)))return null;var Dt=null;return Z["max-fraction-digits"]&&!(Dt=o.parse(Z["max-fraction-digits"],1,It))?null:new gn(T,J,rt,xt,Lt,Dt)},gn.prototype.evaluate=function(i){return new Intl.NumberFormat(this.locale?this.locale.evaluate(i):[],{style:(this.currency?"currency":this.unit&&"unit")||"decimal",currency:this.currency?this.currency.evaluate(i):void 0,unit:this.unit?this.unit.evaluate(i):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(i):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(i):void 0}).format(this.number.evaluate(i))},gn.prototype.eachChild=function(i){i(this.number),this.locale&&i(this.locale),this.currency&&i(this.currency),this.unit&&i(this.unit),this.minFractionDigits&&i(this.minFractionDigits),this.maxFractionDigits&&i(this.maxFractionDigits)},gn.prototype.outputDefined=function(){return!1},gn.prototype.serialize=function(){var i={};return this.locale&&(i.locale=this.locale.serialize()),this.currency&&(i.currency=this.currency.serialize()),this.unit&&(i.unit=this.unit.serialize()),this.minFractionDigits&&(i["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(i["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),i]};var Pa=gn,_n=function(i){this.type=It,this.input=i};_n.parse=function(i,o){if(2!==i.length)return o.error("Expected 1 argument, but found "+(i.length-1)+" instead.");var T=o.parse(i[1],1);return T?"array"!==T.type.kind&&"string"!==T.type.kind&&"value"!==T.type.kind?o.error("Expected argument of type string or array, but found "+Jt(T.type)+" instead."):new _n(T):null},_n.prototype.evaluate=function(i){var o=this.input.evaluate(i);if("string"==typeof o)return o.length;if(Array.isArray(o))return o.length;throw new ne("Expected value to be of type string or array, but found "+Jt($(o))+" instead.")},_n.prototype.eachChild=function(i){i(this.input)},_n.prototype.outputDefined=function(){return!1},_n.prototype.serialize=function(){var i=["length"];return this.eachChild(function(o){i.push(o.serialize())}),i};var Cr={"==":va,"!=":ya,">":xa,"<":Ea,">=":Ta,"<=":Ma,array:Re,at:ti,boolean:Re,case:Ii,coalesce:xe,collator:Gi,format:je,image:ni,in:li,"index-of":ci,interpolate:ee,"interpolate-hcl":ee,"interpolate-lab":ee,length:_n,let:ze,literal:Rt,match:Pi,number:Re,"number-format":Pa,object:Re,slice:Qi,step:Vn,string:Re,"to-boolean":yi,"to-color":yi,"to-number":yi,"to-string":yi,var:fs,within:Kn};function Rr(r,i){var o=i[0],T=i[1],Z=i[2],J=i[3];o=o.evaluate(r),T=T.evaluate(r),Z=Z.evaluate(r);var rt=J?J.evaluate(r):1,xt=qe(o,T,Z,rt);if(xt)throw new ne(xt);return new ue(o/255*rt,T/255*rt,Z/255*rt,rt)}function Or(r,i){return r in i}function Hs(r,i){var o=i[r];return typeof o>"u"?null:o}function di(r){return{type:r}}_i.register(Cr,{error:[{kind:"error"},[ct],function(r,i){throw new ne(i[0].evaluate(r))}],typeof:[ct,[V],function(r,i){return Jt($(i[0].evaluate(r)))}],"to-rgba":[Xt(It,4),[F],function(r,i){return i[0].evaluate(r).toArray()}],rgb:[F,[It,It,It],Rr],rgba:[F,[It,It,It,It],Rr],has:{type:m,overloads:[[[ct],function(r,i){return Or(i[0].evaluate(r),r.properties())}],[[ct,Q],function(r,i){var T=i[1];return Or(i[0].evaluate(r),T.evaluate(r))}]]},get:{type:V,overloads:[[[ct],function(r,i){return Hs(i[0].evaluate(r),r.properties())}],[[ct,Q],function(r,i){var T=i[1];return Hs(i[0].evaluate(r),T.evaluate(r))}]]},"feature-state":[V,[ct],function(r,i){return Hs(i[0].evaluate(r),r.featureState||{})}],properties:[Q,[],function(r){return r.properties()}],"geometry-type":[ct,[],function(r){return r.geometryType()}],id:[V,[],function(r){return r.id()}],zoom:[It,[],function(r){return r.globals.zoom}],pitch:[It,[],function(r){return r.globals.pitch||0}],"distance-from-center":[It,[],function(r){return r.distanceFromCenter()}],"heatmap-density":[It,[],function(r){return r.globals.heatmapDensity||0}],"line-progress":[It,[],function(r){return r.globals.lineProgress||0}],"sky-radial-progress":[It,[],function(r){return r.globals.skyRadialProgress||0}],accumulated:[V,[],function(r){return void 0===r.globals.accumulated?null:r.globals.accumulated}],"+":[It,di(It),function(r,i){for(var o=0,T=0,Z=i;T<Z.length;T+=1)o+=Z[T].evaluate(r);return o}],"*":[It,di(It),function(r,i){for(var o=1,T=0,Z=i;T<Z.length;T+=1)o*=Z[T].evaluate(r);return o}],"-":{type:It,overloads:[[[It,It],function(r,i){var T=i[1];return i[0].evaluate(r)-T.evaluate(r)}],[[It],function(r,i){return-i[0].evaluate(r)}]]},"/":[It,[It,It],function(r,i){var T=i[1];return i[0].evaluate(r)/T.evaluate(r)}],"%":[It,[It,It],function(r,i){var T=i[1];return i[0].evaluate(r)%T.evaluate(r)}],ln2:[It,[],function(){return Math.LN2}],pi:[It,[],function(){return Math.PI}],e:[It,[],function(){return Math.E}],"^":[It,[It,It],function(r,i){var T=i[1];return Math.pow(i[0].evaluate(r),T.evaluate(r))}],sqrt:[It,[It],function(r,i){return Math.sqrt(i[0].evaluate(r))}],log10:[It,[It],function(r,i){return Math.log(i[0].evaluate(r))/Math.LN10}],ln:[It,[It],function(r,i){return Math.log(i[0].evaluate(r))}],log2:[It,[It],function(r,i){return Math.log(i[0].evaluate(r))/Math.LN2}],sin:[It,[It],function(r,i){return Math.sin(i[0].evaluate(r))}],cos:[It,[It],function(r,i){return Math.cos(i[0].evaluate(r))}],tan:[It,[It],function(r,i){return Math.tan(i[0].evaluate(r))}],asin:[It,[It],function(r,i){return Math.asin(i[0].evaluate(r))}],acos:[It,[It],function(r,i){return Math.acos(i[0].evaluate(r))}],atan:[It,[It],function(r,i){return Math.atan(i[0].evaluate(r))}],min:[It,di(It),function(r,i){return Math.min.apply(Math,i.map(function(o){return o.evaluate(r)}))}],max:[It,di(It),function(r,i){return Math.max.apply(Math,i.map(function(o){return o.evaluate(r)}))}],abs:[It,[It],function(r,i){return Math.abs(i[0].evaluate(r))}],round:[It,[It],function(r,i){var T=i[0].evaluate(r);return T<0?-Math.round(-T):Math.round(T)}],floor:[It,[It],function(r,i){return Math.floor(i[0].evaluate(r))}],ceil:[It,[It],function(r,i){return Math.ceil(i[0].evaluate(r))}],"filter-==":[m,[ct,V],function(r,i){var o=i[0],T=i[1];return r.properties()[o.value]===T.value}],"filter-id-==":[m,[V],function(r,i){var o=i[0];return r.id()===o.value}],"filter-type-==":[m,[ct],function(r,i){var o=i[0];return r.geometryType()===o.value}],"filter-<":[m,[ct,V],function(r,i){var o=i[0],T=i[1],Z=r.properties()[o.value],J=T.value;return typeof Z==typeof J&&Z<J}],"filter-id-<":[m,[V],function(r,i){var o=i[0],T=r.id(),Z=o.value;return typeof T==typeof Z&&T<Z}],"filter->":[m,[ct,V],function(r,i){var o=i[0],T=i[1],Z=r.properties()[o.value],J=T.value;return typeof Z==typeof J&&Z>J}],"filter-id->":[m,[V],function(r,i){var o=i[0],T=r.id(),Z=o.value;return typeof T==typeof Z&&T>Z}],"filter-<=":[m,[ct,V],function(r,i){var o=i[0],T=i[1],Z=r.properties()[o.value],J=T.value;return typeof Z==typeof J&&Z<=J}],"filter-id-<=":[m,[V],function(r,i){var o=i[0],T=r.id(),Z=o.value;return typeof T==typeof Z&&T<=Z}],"filter->=":[m,[ct,V],function(r,i){var o=i[0],T=i[1],Z=r.properties()[o.value],J=T.value;return typeof Z==typeof J&&Z>=J}],"filter-id->=":[m,[V],function(r,i){var o=i[0],T=r.id(),Z=o.value;return typeof T==typeof Z&&T>=Z}],"filter-has":[m,[V],function(r,i){return i[0].value in r.properties()}],"filter-has-id":[m,[],function(r){return null!==r.id()&&void 0!==r.id()}],"filter-type-in":[m,[Xt(ct)],function(r,i){return i[0].value.indexOf(r.geometryType())>=0}],"filter-id-in":[m,[Xt(V)],function(r,i){return i[0].value.indexOf(r.id())>=0}],"filter-in-small":[m,[ct,Xt(V)],function(r,i){var o=i[0];return i[1].value.indexOf(r.properties()[o.value])>=0}],"filter-in-large":[m,[ct,Xt(V)],function(r,i){var o=i[0],T=i[1];return function Ra(r,i,o,T){for(;o<=T;){var Z=o+T>>1;if(i[Z]===r)return!0;i[Z]>r?T=Z-1:o=Z+1}return!1}(r.properties()[o.value],T.value,0,T.value.length-1)}],all:{type:m,overloads:[[[m,m],function(r,i){var T=i[1];return i[0].evaluate(r)&&T.evaluate(r)}],[di(m),function(r,i){for(var o=0,T=i;o<T.length;o+=1)if(!T[o].evaluate(r))return!1;return!0}]]},any:{type:m,overloads:[[[m,m],function(r,i){var T=i[1];return i[0].evaluate(r)||T.evaluate(r)}],[di(m),function(r,i){for(var o=0,T=i;o<T.length;o+=1)if(T[o].evaluate(r))return!0;return!1}]]},"!":[m,[m],function(r,i){return!i[0].evaluate(r)}],"is-supported-script":[m,[ct],function(r,i){var T=r.globals&&r.globals.isSupportedScript;return!T||T(i[0].evaluate(r))}],upcase:[ct,[ct],function(r,i){return i[0].evaluate(r).toUpperCase()}],downcase:[ct,[ct],function(r,i){return i[0].evaluate(r).toLowerCase()}],concat:[ct,di(V),function(r,i){return i.map(function(o){return mt(o.evaluate(r))}).join("")}],"resolved-locale":[ct,[_t],function(r,i){return i[0].evaluate(r).resolvedLocale()}]});var bn=Cr;function mn(r){return{result:"success",value:r}}function ki(r){return{result:"error",value:r}}function ns(r){return"object"==typeof r&&null!==r&&!Array.isArray(r)}var Js=function(i,o){this.expression=i,this._warningHistory={},this._evaluator=new mi,this._defaultValue=o?function Ia(r){return"color"===r.type&&(ns(r.default)||Array.isArray(r.default))?new ue(0,0,0,0):"color"===r.type?ue.parse(r.default)||null:void 0===r.default?null:r.default}(o):null,this._enumValues=o&&"enum"===o.type?o.values:null};function Qs(r,i){var o=new zi(bn,[],i?function Sa(r){var i={color:F,string:ct,number:It,enum:ct,boolean:m,formatted:St,resolvedImage:Nt};return"array"===r.type?Xt(i[r.value]||V,r.length):i[r.type]}(i):void 0),T=o.parse(r,void 0,void 0,void 0,i&&"string"===i.type?{typeAnnotation:"coerce"}:void 0);return T?mn(new Js(T,i)):ki(o.errors)}Js.prototype.evaluateWithoutErrorHandling=function(i,o,T,Z,J,rt,xt,Lt){return this._evaluator.globals=i,this._evaluator.feature=o,this._evaluator.featureState=T,this._evaluator.canonical=Z||null,this._evaluator.availableImages=J||null,this._evaluator.formattedSection=rt,this._evaluator.featureTileCoord=xt||null,this._evaluator.featureDistanceData=Lt||null,this.expression.evaluate(this._evaluator)},Js.prototype.evaluate=function(i,o,T,Z,J,rt,xt,Lt){this._evaluator.globals=i,this._evaluator.feature=o||null,this._evaluator.featureState=T||null,this._evaluator.canonical=Z||null,this._evaluator.availableImages=J||null,this._evaluator.formattedSection=rt||null,this._evaluator.featureTileCoord=xt||null,this._evaluator.featureDistanceData=Lt||null;try{var Dt=this.expression.evaluate(this._evaluator);if(null==Dt||"number"==typeof Dt&&Dt!=Dt)return this._defaultValue;if(this._enumValues&&!(Dt in this._enumValues))throw new ne("Expected value to be one of "+Object.keys(this._enumValues).map(function(Ft){return JSON.stringify(Ft)}).join(", ")+", but found "+JSON.stringify(Dt)+" instead.");return Dt}catch(Ft){return this._warningHistory[Ft.message]||(this._warningHistory[Ft.message]=!0,typeof console<"u"&&console.warn(Ft.message)),this._defaultValue}};var Cs=function(i,o){this.kind=i,this._styleExpression=o,this.isStateDependent="constant"!==i&&!kn(o.expression)};Cs.prototype.evaluateWithoutErrorHandling=function(i,o,T,Z,J,rt){return this._styleExpression.evaluateWithoutErrorHandling(i,o,T,Z,J,rt)},Cs.prototype.evaluate=function(i,o,T,Z,J,rt){return this._styleExpression.evaluate(i,o,T,Z,J,rt)};var ss=function(i,o,T,Z){this.kind=i,this.zoomStops=T,this._styleExpression=o,this.isStateDependent="camera"!==i&&!kn(o.expression),this.interpolationType=Z};function nn(r,i){if("error"===(r=Qs(r,i)).result)return r;var o=r.value.expression,T=cn(o);if(!T&&!function is(r){return"data-driven"===r["property-type"]}(i))return ki([new he("","data expressions not supported")]);var Z=On(o,["zoom","pitch","distance-from-center"]);if(!Z&&!function Ln(r){return!!r.expression&&r.expression.parameters.indexOf("zoom")>-1}(i))return ki([new he("","zoom expressions not supported")]);var J=Rs(o);return J||Z?J instanceof he?ki([J]):J instanceof ee&&!function wn(r){return!!r.expression&&r.expression.interpolated}(i)?ki([new he("",'"interpolate" expressions cannot be used with this property')]):mn(J?new ss(T?"camera":"composite",r.value,J.labels,J instanceof ee?J.interpolation:void 0):new Cs(T?"constant":"source",r.value)):ki([new he("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}function Rs(r){var i=null;if(r instanceof ze)i=Rs(r.result);else if(r instanceof xe)for(var o=0,T=r.args;o<T.length&&!(i=Rs(T[o]));o+=1);else(r instanceof Vn||r instanceof ee)&&r.input instanceof _i&&"zoom"===r.input.name&&(i=r);return i instanceof he||r.eachChild(function(J){var rt=Rs(J);rt instanceof he?i=rt:!i&&rt?i=new he("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):i&&rt&&i!==rt&&(i=new he("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),i}function $s(r){if(Array.isArray(r))return r.map($s);if(r instanceof Object&&!(r instanceof Number||r instanceof String||r instanceof Boolean)){var i={};for(var o in r)i[o]=$s(r[o]);return i}return function Aa(r){return r instanceof Number||r instanceof String||r instanceof Boolean?r.valueOf():r}(r)}ss.prototype.evaluateWithoutErrorHandling=function(i,o,T,Z,J,rt){return this._styleExpression.evaluateWithoutErrorHandling(i,o,T,Z,J,rt)},ss.prototype.evaluate=function(i,o,T,Z,J,rt){return this._styleExpression.evaluate(i,o,T,Z,J,rt)},ss.prototype.interpolationFactor=function(i,o,T){return this.interpolationType?ee.interpolationFactor(this.interpolationType,i,o,T):0};var Sr={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},terrain:{type:"terrain"},fog:{type:"fog"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},projection:{type:"projection"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{},sky:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background","layout_sky"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_sky:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"},"fill-extrusion-edge-radius":{type:"number",private:!0,default:0,minimum:0,maximum:1,"property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_symbol:{type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature","pitch","distance-from-center"]}},filter_fill:{type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},filter_line:{type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},filter_circle:{type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},"filter_fill-extrusion":{type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},filter_heatmap:{type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},expression_name:{type:"enum",values:{let:{group:"Variable binding"},var:{group:"Variable binding"},literal:{group:"Types"},array:{group:"Types"},at:{group:"Lookup"},in:{group:"Lookup"},"index-of":{group:"Lookup"},slice:{group:"Lookup"},case:{group:"Decision"},match:{group:"Decision"},coalesce:{group:"Decision"},step:{group:"Ramps, scales, curves"},interpolate:{group:"Ramps, scales, curves"},"interpolate-hcl":{group:"Ramps, scales, curves"},"interpolate-lab":{group:"Ramps, scales, curves"},ln2:{group:"Math"},pi:{group:"Math"},e:{group:"Math"},typeof:{group:"Types"},string:{group:"Types"},number:{group:"Types"},boolean:{group:"Types"},object:{group:"Types"},collator:{group:"Types"},format:{group:"Types"},image:{group:"Types"},"number-format":{group:"Types"},"to-string":{group:"Types"},"to-number":{group:"Types"},"to-boolean":{group:"Types"},"to-rgba":{group:"Color"},"to-color":{group:"Types"},rgb:{group:"Color"},rgba:{group:"Color"},get:{group:"Lookup"},has:{group:"Lookup"},length:{group:"Lookup"},properties:{group:"Feature data"},"feature-state":{group:"Feature data"},"geometry-type":{group:"Feature data"},id:{group:"Feature data"},zoom:{group:"Camera"},pitch:{group:"Camera"},"distance-from-center":{group:"Camera"},"heatmap-density":{group:"Heatmap"},"line-progress":{group:"Feature data"},"sky-radial-progress":{group:"sky"},accumulated:{group:"Feature data"},"+":{group:"Math"},"*":{group:"Math"},"-":{group:"Math"},"/":{group:"Math"},"%":{group:"Math"},"^":{group:"Math"},sqrt:{group:"Math"},log10:{group:"Math"},ln:{group:"Math"},log2:{group:"Math"},sin:{group:"Math"},cos:{group:"Math"},tan:{group:"Math"},asin:{group:"Math"},acos:{group:"Math"},atan:{group:"Math"},min:{group:"Math"},max:{group:"Math"},round:{group:"Math"},abs:{group:"Math"},ceil:{group:"Math"},floor:{group:"Math"},distance:{group:"Math"},"==":{group:"Decision"},"!=":{group:"Decision"},">":{group:"Decision"},"<":{group:"Decision"},">=":{group:"Decision"},"<=":{group:"Decision"},all:{group:"Decision"},any:{group:"Decision"},"!":{group:"Decision"},within:{group:"Decision"},"is-supported-script":{group:"String"},upcase:{group:"String"},downcase:{group:"String"},concat:{group:"String"},"resolved-locale":{group:"String"}}},fog:{range:{type:"array",default:[.5,10],minimum:-20,maximum:20,length:2,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"high-color":{type:"color","property-type":"data-constant",default:"#245cdf",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"space-color":{type:"color","property-type":"data-constant",default:["interpolate",["linear"],["zoom"],4,"#010b19",7,"#367ab9"],expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-blend":{type:"number","property-type":"data-constant",default:["interpolate",["linear"],["zoom"],4,.2,7,.1],minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"star-intensity":{type:"number","property-type":"data-constant",default:["interpolate",["linear"],["zoom"],5,.35,6,0],minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},projection:{name:{type:"enum",values:{albers:{},equalEarth:{},equirectangular:{},lambertConformalConic:{},mercator:{},naturalEarth:{},winkelTripel:{},globe:{}},default:"mercator",required:!0},center:{type:"array",length:2,value:"number","property-type":"data-constant",minimum:[-180,-90],maximum:[180,90],transition:!1,requires:[{name:["albers","lambertConformalConic"]}]},parallels:{type:"array",length:2,value:"number","property-type":"data-constant",minimum:[-90,-90],maximum:[90,90],transition:!1,requires:[{name:["albers","lambertConformalConic"]}]}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number","property-type":"data-constant",default:1,minimum:0,maximum:1e3,expression:{interpolated:!0,parameters:["zoom"]},transition:!0,requires:["source"]}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background","paint_sky"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!1,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!1,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-ambient-occlusion-intensity":{"property-type":"data-constant",type:"number",private:!0,default:0,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fill-extrusion-ambient-occlusion-radius":{"property-type":"data-constant",type:"number",private:!0,default:3,minimum:0,expression:{interpolated:!0,parameters:["zoom"]},transition:!0,requires:["fill-extrusion-edge-radius"]}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!1,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-pattern":{type:"resolvedImage",transition:!1,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"},"line-trim-offset":{type:"array",value:"number",length:2,default:[0,0],minimum:[0,0],maximum:[1,1],transition:!1,requires:[{source:"geojson",has:{lineMetrics:!0}}],"property-type":"constant"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_sky:{"sky-type":{type:"enum",values:{gradient:{},atmosphere:{}},default:"atmosphere",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun":{type:"array",value:"number",length:2,units:"degrees",minimum:[0,0],maximum:[360,180],transition:!1,requires:[{"sky-type":"atmosphere"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun-intensity":{type:"number",requires:[{"sky-type":"atmosphere"}],default:10,minimum:0,maximum:100,transition:!1,"property-type":"data-constant"},"sky-gradient-center":{type:"array",requires:[{"sky-type":"gradient"}],value:"number",default:[0,0],length:2,units:"degrees",minimum:[0,0],maximum:[360,180],transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-gradient-radius":{type:"number",requires:[{"sky-type":"gradient"}],default:90,minimum:0,maximum:180,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-gradient":{type:"color",default:["interpolate",["linear"],["sky-radial-progress"],.8,"#87ceeb",1,"white"],transition:!1,requires:[{"sky-type":"gradient"}],expression:{interpolated:!0,parameters:["sky-radial-progress"]},"property-type":"color-ramp"},"sky-atmosphere-halo-color":{type:"color",default:"white",transition:!1,requires:[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-atmosphere-color":{type:"color",default:"white",transition:!1,requires:[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};function Ir(r){if(!0===r||!1===r)return!0;if(!Array.isArray(r)||0===r.length)return!1;switch(r[0]){case"has":return r.length>=2&&"$id"!==r[1]&&"$type"!==r[1];case"in":return r.length>=3&&("string"!=typeof r[1]||Array.isArray(r[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return 3!==r.length||Array.isArray(r[1])||Array.isArray(r[2]);case"any":case"all":for(var i=0,o=r.slice(1);i<o.length;i+=1){var T=o[i];if(!Ir(T)&&"boolean"!=typeof T)return!1}return!0;default:return!0}}function ba(r,i){if(void 0===i&&(i="fill"),null==r)return{filter:function(){return!0},needGeometry:!1,needFeature:!1};Ir(r)||(r=Wi(r));var o=r,T=!0;try{T=function La(r){if(!Dn(r))return r;var i=$s(r);return br(i),Ar(i)}(o)}catch{console.warn("Failed to extract static filter. Filter will continue working, but at higher memory usage and slower framerate.\nThis is most likely a bug, please report this via https://github.com/mapbox/mapbox-gl-js/issues/new?assignees=&labels=&template=Bug_report.md\nand paste the contents of this message in the report.\nThank you!\nFilter Expression:\n"+JSON.stringify(o,null,2)+"\n        ")}var rt,Z=Sr["filter_"+i],J=Qs(T,Z);if("error"===J.result)throw new Error(J.value.map(function($t){return $t.key+": "+$t.message}).join(", "));rt=function($t,le,fe){return J.value.evaluate($t,le,{},fe)};var xt=null,Lt=null;if(T!==o){var Dt=Qs(o,Z);if("error"===Dt.result)throw new Error(Dt.value.map(function($t){return $t.key+": "+$t.message}).join(", "));xt=function($t,le,fe,be,t){return Dt.value.evaluate($t,le,{},fe,void 0,void 0,be,t)},Lt=!cn(Dt.value.expression)}return{filter:rt,dynamicFilter:xt||void 0,needGeometry:Lr(T),needFeature:!!Lt}}function Ar(r){if(!Array.isArray(r))return r;var i=function Fa(r){if(Da.has(r[0]))for(var i=1;i<r.length;i++)if(Dn(r[i]))return!0;return r}(r);return!0===i?i:i.map(function(o){return Ar(o)})}function br(r){var i=!1,o=[];if("case"===r[0]){for(var T=1;T<r.length-1;T+=2)i=i||Dn(r[T]),o.push(r[T+1]);o.push(r[r.length-1])}else if("match"===r[0]){i=i||Dn(r[1]);for(var Z=2;Z<r.length-1;Z+=2)o.push(r[Z+1]);o.push(r[r.length-1])}else if("step"===r[0]){i=i||Dn(r[1]);for(var J=1;J<r.length-1;J+=2)o.push(r[J+1])}i&&(r.length=0,r.push.apply(r,["any"].concat(o)));for(var rt=1;rt<r.length;rt++)br(r[rt])}function Dn(r){if(!Array.isArray(r))return!1;if(function wa(r){return"pitch"===r||"distance-from-center"===r}(r[0]))return!0;for(var i=1;i<r.length;i++)if(Dn(r[i]))return!0;return!1}var Da=new Set(["in","==","!=",">",">=","<","<=","to-boolean"]);function Na(r,i){return r<i?-1:r>i?1:0}function Lr(r){if(!Array.isArray(r))return!1;if("within"===r[0])return!0;for(var i=1;i<r.length;i++)if(Lr(r[i]))return!0;return!1}function Wi(r){if(!r)return!0;var i=r[0];return r.length<=1?"any"!==i:"=="===i?qs(r[1],r[2],"=="):"!="===i?Os(qs(r[1],r[2],"==")):"<"===i||">"===i||"<="===i||">="===i?qs(r[1],r[2],i):"any"===i?function Za(r){return["any"].concat(r.map(Wi))}(r.slice(1)):"all"===i?["all"].concat(r.slice(1).map(Wi)):"none"===i?["all"].concat(r.slice(1).map(Wi).map(Os)):"in"===i?wr(r[1],r.slice(2)):"!in"===i?Os(wr(r[1],r.slice(2))):"has"===i?Dr(r[1]):"!has"===i?Os(Dr(r[1])):"within"!==i||r}function qs(r,i,o){switch(r){case"$type":return["filter-type-"+o,i];case"$id":return["filter-id-"+o,i];default:return["filter-"+o,r,i]}}function wr(r,i){if(0===i.length)return!1;switch(r){case"$type":return["filter-type-in",["literal",i]];case"$id":return["filter-id-in",["literal",i]];default:return i.length>200&&!i.some(function(o){return typeof o!=typeof i[0]})?["filter-in-large",r,["literal",i.sort(Na)]]:["filter-in-small",r,["literal",i]]}}function Dr(r){switch(r){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",r]}}function Os(r){return["!",r]}var Ua=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function ja(r,i){var o={};for(var T in r)"ref"!==T&&(o[T]=r[T]);return Ua.forEach(function(Z){Z in i&&(o[Z]=i[Z])}),o}var Fr={thin:100,hairline:100,"ultra-light":100,"extra-light":100,light:200,book:300,regular:400,normal:400,plain:400,roman:400,standard:400,medium:500,"semi-bold":600,"demi-bold":600,bold:700,heavy:800,black:800,"extra-bold":800,"ultra-black":900,"extra-black":900,"ultra-bold":900,"heavy-black":900,fat:900,poster:900},Nr=/(italic|oblique)$/i,Zr={},tr=function(r,i,o){var T=Zr[r];if(!T){Array.isArray(r)||(r=[r]);for(var Z=400,J="normal",rt=[],Dt=0,Ft=r.length;Dt<Ft;++Dt){var le=r[Dt].split(" "),fe=le[le.length-1].toLowerCase();for(var be in"normal"==fe||"italic"==fe||"oblique"==fe?(J=fe,le.pop(),fe=le[le.length-1].toLowerCase()):Nr.test(fe)&&(fe=fe.replace(Nr,""),J=le[le.length-1].replace(fe,"")),Fr){var t=le.length>1?le[le.length-2].toLowerCase():"";if(fe==be||fe==be.replace("-","")||t+"-"+fe==be){Z=Fr[be],le.pop(),t&&be.startsWith(t)&&le.pop();break}}"number"==typeof fe&&(Z=fe);var l=le.join(" ").replace("Klokantech Noto Sans","Noto Sans");-1!==l.indexOf(" ")&&(l='"'+l+'"'),rt.push(l)}T=Zr[r]=[J,Z,rt]}return T[0]+" "+T[1]+" "+i+"px"+(o?"/"+o:"")+" "+T[2]},Ur="https://api.mapbox.com";function er(r){var i="mapbox://";return 0!==r.indexOf(i)?"":r.slice(i.length)}function Ss(r,i){var o=er(r);if(!o)return decodeURI(new URL(r,location.href).href);var T="styles/";if(0!==o.indexOf(T))throw new Error("unexpected style url: "+r);var Z=o.slice(T.length);return Ur+"/styles/v1/"+Z+"?&access_token="+i}function Is(r,i,o,T){var Z=new URL(r,T),J=er(r);return J?"mapbox.satellite"===J?"https://api.mapbox.com/v4/"+J+"/{z}/{x}/{y}"+(window.devicePixelRatio>=1.5?"@2x":"")+".webp?access_token="+i:"https://{a-d}.tiles.mapbox.com/v4/"+J+"/{z}/{x}/{y}.vector.pbf?access_token="+i:(i&&Z.searchParams.set(o,i),decodeURI(Z.href))}var jr=0,Ga={},za={};function sr(r){return r*Math.PI/180}var Xi=function(){for(var r=[],i=78271.51696402048;r.length<=24;i/=2)r.push(i);return r}();function Br(r,i){if(typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof OffscreenCanvas<"u")return new OffscreenCanvas(r,i);var o=document.createElement("canvas");return o.width=r,o.height=i,o}function rr(r,i){for(var o=0,T=i.length;o<T;++o)if(i[o]<r&&o+1<T){var J=i[o]/i[o+1];return o+Math.log(i[o]/r)/Math.log(J)}return T-1}var Fn={};function ar(r,i,o,T){if(void 0===o&&(o={}),i in Fn)return T&&(T.request=Fn[i][0]),Fn[i][1];var Z=o.transformRequest&&o.transformRequest(i,r)||new Request(i);Z.headers.get("Accept")||Z.headers.set("Accept","application/json"),T&&(T.request=Z);var J=fetch(Z).then(function(rt){return delete Fn[i],rt.ok?rt.json():Promise.reject(new Error("Error fetching source "+i))}).catch(function(rt){return delete Fn[i],Promise.reject(new Error("Error fetching source "+i))});return Fn[i]=[Z,J],J}function or(r,i){if("string"!=typeof r)return Promise.resolve(r);if(!r.trim().startsWith("{"))return ar("Style",r=Ss(r,i.accessToken),i);try{var o=JSON.parse(r);return Promise.resolve(o)}catch(T){return Promise.reject(T)}}function Wr(r,i){if(i.transformRequest){var o=i.transformRequest(r,"Tiles");if(o instanceof Request)return decodeURI(o.url)}return r}var Gr={};function Ka(r,i,o,T){var Z=document.createElement("canvas"),J=[2*o*i.pixelRatio+i.width,2*o*i.pixelRatio+i.height];Z.width=J[0],Z.height=J[1];var rt=Z.getContext("2d");rt.drawImage(r,i.x,i.y,i.width,i.height,o*i.pixelRatio,o*i.pixelRatio,i.width,i.height);var xt=rt.getImageData(0,0,J[0],J[1]);rt.globalCompositeOperation="destination-over",rt.fillStyle="rgba("+255*T.r+","+255*T.g+","+255*T.b+","+T.a+")";for(var Lt=xt.data,Dt=0,Ft=xt.width;Dt<Ft;++Dt)for(var $t=0,le=xt.height;$t<le;++$t)Lt[4*($t*Ft+Dt)+3]>0&&rt.arc(Dt,$t,o*i.pixelRatio,0,2*Math.PI);return rt.fill(),Z}var hr,ka=Array(256).join("\u200a");function lr(r,i){if(i>=.05){for(var o="",T=r.split("\n"),Z=ka.slice(0,Math.round(i/.1)),J=0,rt=T.length;J<rt;++J)J>0&&(o+="\n"),o+=T[J].split("").join(Z);return o}return r}function Kr(){return hr||(hr=Br(1,1).getContext("2d")),hr}function pn(r,i){return Kr().measureText(r).width+(r.length-1)*i}var kr={};function ur(r,i,o,T){if(-1!==r.indexOf("\n")){for(var Z=r.split("\n"),J=[],rt=0,xt=Z.length;rt<xt;++rt)J.push(ur(Z[rt],i,o,T));return J.join("\n")}var Lt=o+","+i+","+r+","+T,Dt=kr[Lt];if(!Dt){var Ft=r.split(" ");if(Ft.length>1){var $t=Kr();$t.font=i;for(var fe=$t.measureText("M").width*o,be="",t=[],l=0,_=Ft.length;l<_;++l){var B=Ft[l],j=be+(be?" ":"")+B;pn(j,T)<=fe?be=j:(be&&t.push(be),be=B)}be&&t.push(be);for(var X=0,et=t.length;X<et&&et>1;++X){var tt=t[X];if(pn(tt,T)<.35*fe){var ut=X>0?pn(t[X-1],T):1/0,Et=X<et-1?pn(t[X+1],T):1/0;t.splice(X,1),et-=1,ut<Et?(t[X-1]+=" "+tt,X-=1):t[X]=tt+" "+t[X]}}for(var Ut=0,Pt=t.length-1;Ut<Pt;++Ut){var Vt=t[Ut],ae=t[Ut+1];if(pn(Vt,T)>.7*fe&&pn(ae,T)<.6*fe){var re=Vt.split(" "),oe=re.pop();pn(oe,T)<.2*fe&&(t[Ut]=re.join(" "),t[Ut+1]=oe+" "+ae),Pt-=1}}Dt=t.join("\n")}else Dt=r;Dt=lr(Dt,T),kr[Lt]=Dt}return Dt}var As,Xa=/font-family: ?([^;]*);/,Va=/("|')/g;function Ya(r){if(!As){As={};for(var i=document.styleSheets,o=0,T=i.length;o<T;++o){var Z=i[o];try{var J=Z.rules||Z.cssRules;if(J)for(var rt=0,xt=J.length;rt<xt;++rt){var Lt=J[rt];if(5==Lt.type){var Dt=Lt.cssText.match(Xa);As[Dt[1].replace(Va,"")]=!0}}}catch{}}}return r in As}var cr={};function Ha(r){var i=r.toString();if(i in cr)return cr[i];for(var o=[],T=0,Z=r.length;T<Z;++T){r[T]=r[T].replace("Arial Unicode MS","Arial");var rt=tr(r[T],1);(0,P.Qx)(rt);var xt=rt.split(" ");o.push([xt.slice(3).join(" ").replace(/"/g,""),xt[1],xt[0]])}for(var Lt=0,Dt=o.length;Lt<Dt;++Lt){var Ft=o[Lt],$t=Ft[0];if(!Ya($t)&&100!==P.sG.get(Ft[2]+"\n"+Ft[1]+" \n"+$t)){var le="https://fonts.googleapis.com/css?family="+$t.replace(/ /g,"+")+":"+Ft[1]+Ft[2];if(!document.querySelector('link[href="'+le+'"]')){var fe=document.createElement("link");fe.href=le,fe.rel="stylesheet",document.head.appendChild(fe)}}}return cr[i]=r,r}var Ls,fr,Ja={Point:1,MultiPoint:1,LineString:2,MultiLineString:2,Polygon:3,MultiPolygon:3},Qa={center:[.5,.5],left:[0,.5],right:[1,.5],top:[.5,0],bottom:[.5,1],"top-left":[0,0],"top-right":[1,0],"bottom-left":[0,1],"bottom-right":[1,1]},dr={},bs={zoom:0};function we(r,i,o,T,Z,J,rt){var xt=r.id;J||(J={},console.warn("No functionCache provided to getValue()")),J[xt]||(J[xt]={});var Lt=J[xt];if(!Lt[o]){var Dt=(r[i]||dr)[o],Ft=Sr[i+"_"+r.type][o];void 0===Dt&&(Dt=Ft.default);var $t=function Oa(r){return Array.isArray(r)&&r.length>0&&"string"==typeof r[0]&&r[0]in bn}(Dt);if(!$t&&ns(Dt)&&(Dt=function ce(r,i){var o=r.stops;if(!o)return function Se(r,i){var o=["get",r.property];if(void 0===r.default)return"string"===i.type?["string",o]:o;if("enum"===i.type)return["match",o,Object.keys(i.values),o,r.default];var T=["color"===i.type?"to-color":i.type,o,de(r.default)];return"array"===i.type&&T.splice(1,0,i.value,i.length||null),T}(r,i);var T=o&&"object"==typeof o[0][0],Z=T||void 0!==r.property,J=T||!Z;return o=o.map(function(rt){return!Z&&i.tokens&&"string"==typeof rt[1]?[rt[0],jt(rt[1])]:[rt[0],de(rt[1])]}),T?function Ot(r,i,o){for(var T={},Z={},J=[],rt=0;rt<o.length;rt++){var xt=o[rt],Lt=xt[0].zoom;void 0===T[Lt]&&(T[Lt]={zoom:Lt,type:r.type,property:r.property,default:r.default},Z[Lt]=[],J.push(Lt)),Z[Lt].push([xt[0].value,xt[1]])}if("exponential"===Zt({},i)){for(var Ft=[dt(r),["linear"],["zoom"]],$t=0,le=J;$t<le.length;$t+=1){var fe=le[$t];Mt(Ft,fe,ge(T[fe],i,Z[fe]),!1)}return Ft}for(var t=["step",["zoom"]],l=0,_=J;l<_.length;l+=1){var B=_[l];Mt(t,B,ge(T[B],i,Z[B]),!0)}return gt(t),t}(r,i,o):J?function qt(r,i,o,T){void 0===T&&(T=["zoom"]);var J,Z=Zt(r,i),rt=!1;if("interval"===Z)J=["step",T],rt=!0;else{if("exponential"!==Z)throw new Error('Unknown zoom function type "'+Z+'"');var xt=void 0!==r.base?r.base:1;J=[dt(r),1===xt?["linear"]:["exponential",xt],T]}for(var Lt=0,Dt=o;Lt<Dt.length;Lt+=1){var Ft=Dt[Lt];Mt(J,Ft[0],Ft[1],rt)}return gt(J),J}(r,i,o):ge(r,i,o)}(Dt,Ft),$t=!0),$t){var le=function(r,i){var o=nn(r,i);if("error"===o.result)throw new Error(o.value.map(function(T){return T.key+": "+T.message}).join(", "));return o.value}(Dt,Ft);Lt[o]=le.evaluate.bind(le)}else"color"==Ft.type&&(Dt=ue.parse(Dt)),Lt[o]=function(){return Dt}}return bs.zoom=T,Lt[o](bs,Z,rt)}function qa(r,i,o,T){return we(r,"layout","icon-allow-overlap",i,o,T)?we(r,"layout","icon-ignore-placement",i,o,T)?"none":"obstacle":"declutter"}function to(r,i,o,T,Z){return Z||console.warn("No filterCache provided to evaluateFilter()"),r in Z||(Z[r]=ba(i).filter),bs.zoom=T,Z[r](bs,o)}function sn(r,i){if(r){if(0===r.a||0===i)return;var o=r.a;return i=void 0===i?1:i,0===o?"transparent":"rgba("+Math.round(255*r.r/o)+","+Math.round(255*r.g/o)+","+Math.round(255*r.b/o)+","+o*i+")"}return r}var eo=/\{[^{}}]*\}/g;function gr(r,i){return r.replace(eo,function(o){return i[o.slice(1,-1)]||""})}function io(r,i,o,T,Z,J,rt,xt){if(void 0===T&&(T=Xi),void 0===Z&&(Z=void 0),void 0===J&&(J=void 0),void 0===rt&&(rt=void 0),void 0===xt&&(xt=void 0),"string"==typeof i&&(i=JSON.parse(i)),8!=i.version)throw new Error("glStyle version 8 required.");var Lt,Dt;if(J)if(typeof Image<"u"){var Ft=new Image;Ft.crossOrigin="anonymous",Ft.onload=function(){Lt=Ft,Dt=[Ft.width,Ft.height],r.changed(),Ft.onload=null},Ft.src=J}else if(typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope){var $t=self;$t.postMessage({action:"loadImage",src:J}),$t.addEventListener("message",function(Ne){"imageLoaded"===Ne.data.action&&Ne.data.src===J&&(Dt=[(Lt=Ne.data.image).width,Lt.height])})}for(var j,le=function Ba(r){r=r.slice();for(var i=Object.create(null),o=0;o<r.length;o++)i[r[o].id]=r[o];for(var T=0;T<r.length;T++)"ref"in r[T]&&(r[T]=ja(r[T],i[r[T].ref]));return r}(i.layers),fe={},be=[],t={},l={},_=function ir(r){r.id||(r.id=jr++);var i={};return Ga[r.id]=i,i}(i),B=function nr(r){r.id||(r.id=jr++);var i={};return za[r.id]=i,i}(i),X=0,et=le.length;X<et;++X){var tt=le[X],ut=tt.id;if("string"==typeof o&&tt.source==o||-1!==o.indexOf(ut)){var Et=tt["source-layer"];if(j){if(tt.source!==j)throw new Error('Layer "'+ut+'" does not use source "'+j)}else{var Ut=i.sources[j=tt.source];if(!Ut)throw new Error('Source "'+j+'" is not defined');var Pt=Ut.type;if("vector"!==Pt&&"geojson"!==Pt)throw new Error('Source "'+j+'" is not of type "vector" or "geojson", but "'+Pt+'"')}var Vt=fe[Et];Vt||(fe[Et]=Vt=[]),Vt.push({layer:tt,index:X}),be.push(ut)}}var ae=new U.Z,re=new D.Z,oe=[],ye=function(Te,Ne){var Be=Te.getProperties(),Ke=fe[Be.layer];if(Ke){var pe=T.indexOf(Ne);-1==pe&&(pe=rr(Ne,T));for(var ke=Ja[Te.getGeometry().getType()],Ce={properties:Be,type:ke},Pe=r.get("mapbox-featurestate")[Te.getId()],Je=-1,Ni=0,an=Ke.length;Ni<an;++Ni){var ia=Ke[Ni],Ie=ia.layer,mr=Ie.layout||dr,ls=Ie.paint||dr;if(!("none"===mr.visibility||"minzoom"in Ie&&pe<Ie.minzoom||"maxzoom"in Ie&&pe>=Ie.maxzoom)){var Ko=Ie.filter;if(!Ko||to(Ie.id,Ko,Ce,pe,B)){Ie;var $i=void 0,yn=void 0,na=void 0,on=void 0,En=void 0,Ae=void 0,Fs=ia.index;if(3==ke&&("fill"==Ie.type||"fill-extrusion"==Ie.type))if(yn=we(Ie,"paint",Ie.type+"-opacity",pe,Ce,_,Pe),Ie.type+"-pattern"in ls){var sa=we(Ie,"paint",Ie.type+"-pattern",pe,Ce,_,Pe);if(sa){var co="string"==typeof sa?gr(sa,Be):sa.toString();if(Lt&&Z&&Z[co]){++Je,(!(Ae=oe[Je])||!Ae.getFill()||Ae.getStroke()||Ae.getText())&&(Ae=new I.ZP({fill:new D.Z}),oe[Je]=Ae),na=Ae.getFill(),Ae.setZIndex(Fs);var ko=co+"."+yn,ra=l[ko];if(!ra){var Un=Z[co],Xo=Br(Un.width,Un.height),fo=Xo.getContext("2d");fo.globalAlpha=yn,fo.drawImage(Lt,Un.x,Un.y,Un.width,Un.height,0,0,Un.width,Un.height),ra=fo.createPattern(Xo,"repeat"),l[ko]=ra}na.setColor(ra)}}}else $i=sn(we(Ie,"paint",Ie.type+"-color",pe,Ce,_,Pe),yn),Ie.type+"-outline-color"in ls&&(En=sn(we(Ie,"paint",Ie.type+"-outline-color",pe,Ce,_,Pe),yn)),En||(En=$i),($i||En)&&(++Je,(!(Ae=oe[Je])||$i&&!Ae.getFill()||!$i&&Ae.getFill()||En&&!Ae.getStroke()||!En&&Ae.getStroke()||Ae.getText())&&(Ae=new I.ZP({fill:$i?new D.Z:void 0,stroke:En?new U.Z:void 0}),oe[Je]=Ae),$i&&(na=Ae.getFill()).setColor($i),En&&((on=Ae.getStroke()).setColor(En),on.setWidth(.5)),Ae.setZIndex(Fs));if(1!=ke&&"line"==Ie.type){$i=!("line-pattern"in ls)&&"line-color"in ls?sn(we(Ie,"paint","line-color",pe,Ce,_,Pe),we(Ie,"paint","line-opacity",pe,Ce,_,Pe)):void 0;var go=we(Ie,"paint","line-width",pe,Ce,_,Pe);$i&&go>0&&(++Je,(!(Ae=oe[Je])||!Ae.getStroke()||Ae.getFill()||Ae.getText())&&(Ae=new I.ZP({stroke:new U.Z}),oe[Je]=Ae),(on=Ae.getStroke()).setLineCap(we(Ie,"layout","line-cap",pe,Ce,_,Pe)),on.setLineJoin(we(Ie,"layout","line-join",pe,Ce,_,Pe)),on.setMiterLimit(we(Ie,"layout","line-miter-limit",pe,Ce,_,Pe)),on.setColor($i),on.setWidth(go),on.setLineDash(ls["line-dasharray"]?we(Ie,"paint","line-dasharray",pe,Ce,_,Pe).map(function(ji){return ji*go}):null),Ae.setZIndex(Fs))}var aa=!1,hi=null,Vo=0,pr=void 0,Zi=void 0,_o=void 0;if((1==ke||2==ke)&&"icon-image"in mr){var oa=we(Ie,"layout","icon-image",pe,Ce,_,Pe);if(oa){pr="string"==typeof oa?gr(oa,Be):oa.toString();var mo=void 0,hs=xt?xt(r,pr):void 0;if(Lt&&Z&&Z[pr]||hs){var po=we(Ie,"layout","icon-rotation-alignment",pe,Ce,_,Pe);if(2==ke){var jn=Te.getGeometry();if(jn.getFlatMidpoint||jn.getFlatMidpoints){var la=jn.getExtent();if(Math.sqrt(Math.max(Math.pow((la[2]-la[0])/Ne,2),Math.pow((la[3]-la[1])/Ne,2)))>150){var Ns="MultiLineString"===jn.getType()?jn.getFlatMidpoints():jn.getFlatMidpoint();if(fr||(fr=new z.ZP("Point",Ls=[NaN,NaN],[],{},null)),mo=fr,Ls[0]=Ns[0],Ls[1]=Ns[1],"line"===we(Ie,"layout","symbol-placement",pe,Ce,_,Pe)&&"map"===po)for(var ha=jn.getStride(),vr=jn.getFlatCoordinates(),Zs=0,fl=vr.length-ha;Zs<fl;Zs+=ha){var vo=vr[Zs],yo=vr[Zs+1],Eo=vr[Zs+ha],xo=vr[Zs+ha+1],gl=Math.min(vo,Eo),_l=Math.min(yo,xo),ml=Math.max(vo,Eo),pl=Math.max(yo,xo);if(Ns[0]>=gl&&Ns[0]<=ml&&Ns[1]>=_l&&Ns[1]<=pl){Vo=Math.atan2(yo-xo,Eo-vo);break}}}}}if(2!==ke||mo){var Yo=we(Ie,"layout","icon-size",pe,Ce,_,Pe),xn=void 0!==ls["icon-color"]?we(Ie,"paint","icon-color",pe,Ce,_,Pe):null;if(!xn||0!==xn.a){var Ho=we(Ie,"paint","icon-halo-color",pe,Ce,_,Pe),Mo=we(Ie,"paint","icon-halo-width",pe,Ce,_,Pe),To=pr+"."+Yo+"."+Mo+"."+Ho;if(null!==xn&&(To+="."+xn),!(Zi=t[To])){var Jo=qa(Ie,pe,Ce,_),ua=void 0;"icon-offset"in mr&&((ua=we(Ie,"layout","icon-offset",pe,Ce,_,Pe))[1]*=-1);var Qo=xn?[255*xn.r,255*xn.g,255*xn.b,xn.a]:void 0;if(hs){var ca={color:Qo,rotateWithView:"map"===po,displacement:ua,declutterMode:Jo};"string"==typeof hs?ca.src=hs:(ca.img=hs,ca.imgSize=[hs.width,hs.height]),Zi=new k.Z(ca)}else{var Us=Z[pr],yr=void 0,Po=void 0,$o=void 0,qo=void 0;Mo?Po=[(yr=Ka(Lt,Us,Mo,Ho)).width,yr.height]:(yr=Lt,Po=Dt,$o=[Us.width,Us.height],qo=[Us.x,Us.y]),Zi=new k.Z({color:Qo,img:yr,imgSize:Po,size:$o,offset:qo,rotateWithView:"map"===po,scale:Yo/Us.pixelRatio,displacement:ua,declutterMode:Jo})}t[To]=Zi}}Zi&&(++Je,(!(Ae=oe[Je])||!Ae.getImage()||Ae.getFill()||Ae.getStroke())&&(Ae=new I.ZP,oe[Je]=Ae),Ae.setGeometry(mo),Zi.setRotation(Vo+sr(we(Ie,"layout","icon-rotate",pe,Ce,_,Pe))),Zi.setOpacity(we(Ie,"paint","icon-opacity",pe,Ce,_,Pe)),Zi.setAnchor(Qa[we(Ie,"layout","icon-anchor",pe,Ce,_,Pe)]),Ae.setImage(Zi),hi=Ae.getText(),Ae.setText(void 0),Ae.setZIndex(Fs),aa=!0,_o=!1)}else _o=!0}}}if(1==ke&&"circle"===Ie.type){++Je,(!(Ae=oe[Je])||!Ae.getImage()||Ae.getFill()||Ae.getStroke())&&(Ae=new I.ZP,oe[Je]=Ae);var tl="circle-radius"in ls?we(Ie,"paint","circle-radius",pe,Ce,_,Pe):5,Co=sn(we(Ie,"paint","circle-stroke-color",pe,Ce,_,Pe),we(Ie,"paint","circle-stroke-opacity",pe,Ce,_,Pe)),Ro=sn(we(Ie,"paint","circle-color",pe,Ce,_,Pe),we(Ie,"paint","circle-opacity",pe,Ce,_,Pe)),Oo=we(Ie,"paint","circle-stroke-width",pe,Ce,_,Pe),el=tl+"."+Co+"."+Ro+"."+Oo;(Zi=t[el])||(Zi=new G.Z({radius:tl,stroke:Co&&Oo>0?new U.Z({width:Oo,color:Co}):void 0,fill:Ro?new D.Z({color:Ro}):void 0,declutterMode:"none"}),t[el]=Zi),Ae.setImage(Zi),hi=Ae.getText(),Ae.setText(void 0),Ae.setGeometry(void 0),Ae.setZIndex(Fs),aa=!0}var Ai=void 0,Er=void 0,xr=void 0,Bn=void 0,Mr=void 0,So=void 0;if("text-field"in mr){Bn=Math.round(we(Ie,"layout","text-size",pe,Ce,_,Pe));var Io=we(Ie,"layout","text-font",pe,Ce,_,Pe);xr=we(Ie,"layout","text-line-height",pe,Ce,_,Pe),(Er=tr(rt?rt(Io):Io,Bn,xr)).includes("sans-serif")||(Er+=",sans-serif"),Mr=we(Ie,"layout","text-letter-spacing",pe,Ce,_,Pe),So=we(Ie,"layout","text-max-width",pe,Ce,_,Pe);var js=we(Ie,"layout","text-field",pe,Ce,_,Pe);Ai="object"==typeof js&&js.sections?1===js.sections.length?js.toString():js.sections.reduce(function(ji,Wn,xl){var hl=Wn.fontStack?Wn.fontStack.split(","):Io,Fo=tr(rt?rt(hl):hl,Bn*(Wn.scale||1),xr),Bs=Wn.text;if("\n"===Bs)return ji.push("\n",""),ji;if(2!=ke){for(var fa=0,El=(Bs=ur(Bs,Fo,So,Mr).split("\n")).length;fa<El;++fa)fa>0&&ji.push("\n",""),ji.push(Bs[fa],Fo);return ji}ji.push(lr(Bs,Mr),Fo)},[]):gr(js,Be).trim(),yn=we(Ie,"paint","text-opacity",pe,Ce,_,Pe)}if(Ai&&yn&&!_o){aa||(++Je,(!(Ae=oe[Je])||!Ae.getText()||Ae.getFill()||Ae.getStroke())&&(Ae=new I.ZP,oe[Je]=Ae),Ae.setImage(void 0),Ae.setGeometry(void 0)),Ae.getText()||Ae.setText(hi||new S.Z({padding:[2,2,2,2]})),hi=Ae.getText();var il=mr["text-transform"];"uppercase"==il?Ai=Array.isArray(Ai)?Ai.map(function(ji,Wn){return Wn%2?ji:ji.toUpperCase()}):Ai.toUpperCase():"lowercase"==il&&(Ai=Array.isArray(Ai)?Ai.map(function(ji,Wn){return Wn%2?ji:ji.toLowerCase()}):Ai.toLowerCase());var nl=Array.isArray(Ai)?Ai:2==ke?lr(Ai,Mr):ur(Ai,Er,So,Mr);hi.setText(nl),hi.setFont(Er),hi.setRotation(sr(we(Ie,"layout","text-rotate",pe,Ce,_,Pe)));var da=we(Ie,"layout","text-anchor",pe,Ce,_,Pe),Ao=aa||1==ke?"point":we(Ie,"layout","symbol-placement",pe,Ce,_,Pe);if(hi.setPlacement(Ao),"function"==typeof hi.setRepeat){var vl=we(Ie,"layout","symbol-spacing",pe,Ce,_,Pe);hi.setRepeat(2*vl)}hi.setOverflow("point"===Ao);var us=we(Ie,"paint","text-halo-width",pe,Ce,_,Pe),sl=we(Ie,"layout","text-offset",pe,Ce,_,Pe),rl=we(Ie,"paint","text-translate",pe,Ce,_,Pe),bo=0,Lo=0;if("point"==Ao){var wo="center";-1!==da.indexOf("left")?(wo="left",Lo=us):-1!==da.indexOf("right")&&(wo="right",Lo=-us),hi.setTextAlign(wo);var yl=we(Ie,"layout","text-rotation-alignment",pe,Ce,_,Pe);hi.setRotateWithView("map"==yl)}else hi.setMaxAngle(sr(we(Ie,"layout","text-max-angle",pe,Ce,_,Pe))*Ai.length/nl.length),hi.setTextAlign(),hi.setRotateWithView(!1);var Do="middle";0==da.indexOf("bottom")?(Do="bottom",bo=-us-.5*(xr-1)*Bn):0==da.indexOf("top")&&(Do="top",bo=us+.5*(xr-1)*Bn),hi.setTextBaseline(Do);var al=we(Ie,"layout","text-justify",pe,Ce,_,Pe);hi.setJustify("auto"===al?void 0:al),hi.setOffsetX(sl[0]*Bn+Lo+rl[0]),hi.setOffsetY(sl[1]*Bn+bo+rl[1]),re.setColor(sn(we(Ie,"paint","text-color",pe,Ce,_,Pe),yn)),hi.setFill(re);var ol=sn(we(Ie,"paint","text-halo-color",pe,Ce,_,Pe),yn);if(ol){ae.setColor(ol);var ll=.5*Bn;ae.setWidth((us*=2)<=ll?us:ll),hi.setStroke(ae)}else hi.setStroke(void 0);var Tr=we(Ie,"layout","text-padding",pe,Ce,_,Pe),Pr=hi.getPadding();Tr!==Pr[0]&&(Pr[0]=Tr,Pr[1]=Tr,Pr[2]=Tr,Pr[3]=Tr),Ae.setZIndex(Fs)}}}}if(Je>-1)return oe.length=Je+1,oe}};return r.setStyle(ye),r.set("mapbox-source",j),r.set("mapbox-layers",be),r.set("mapbox-featurestate",{}),ye}function so(r,i){return void 0===i&&(i=512),r.getExtent()?(0,v.dl)({extent:r.getExtent(),tileSize:i,maxZoom:22}).getResolutions():Xi}function Hr(r,i,o,T,Z){void 0===o&&(o=""),void 0===T&&(T={}),void 0===Z&&(Z=void 0);var J,rt,xt,Lt,Dt=!0;return"string"==typeof o||Array.isArray(o)?Lt=o:(Lt=(xt=o).source||xt.layers,T=xt),"string"==typeof T?(J=T,xt={}):(J=T.styleUrl,xt=T),!1===xt.updateSource&&(Dt=!1),Z||(Z=xt.resolutions),!J&&"string"==typeof i&&!i.trim().startsWith("{")&&(J=i),J&&(J=J.startsWith("data:")?location.href:Ss(J,xt.accessToken),xt=function Yr(r,i){return i.accessToken||(i=Object.assign({},i),new URL(r).searchParams.forEach(function(T,Z){i.accessToken=T,i.accessTokenParam=Z})),i}(J,xt)),new Promise(function(Ft,$t){or(i,xt).then(function(le){if(8!=le.version)return $t(new Error("glStyle version 8 required."));if(!(r instanceof C.Z||r instanceof H.Z))return $t(new Error("Can only apply to VectorLayer or VectorTileLayer"));var l,_,B,fe=r instanceof H.Z?"vector":"geojson";if(Lt?rt=Array.isArray(Lt)?le.layers.find(function(ut){return ut.id===Lt[0]}).source:Lt:(rt=Object.keys(le.sources).find(function(ut){return le.sources[ut].type===fe}),Lt=rt),!rt)return $t(new Error("No "+fe+" source found in the glStyle."));function be(){if(!Dt)return Promise.resolve();if(r instanceof H.Z)return function Qr(r,i,o){return new Promise(function(T,Z){(function zr(r,i,o){void 0===o&&(o={});var T=[i,JSON.stringify(r)].toString(),Z=Gr[T];if(!Z||o.transformRequest){var J=r.url;if(J&&!r.tiles){var rt=Is(J,o.accessToken,o.accessTokenParam||"access_token",i||location.href);if(J.startsWith("mapbox://"))Z=Promise.resolve(Object.assign({},r,{url:void 0,tiles:(0,p.Gk)(rt)}));else{var xt={};Z=ar("Source",rt,o,xt).then(function(Lt){return Lt.tiles=Lt.tiles.map(function(Dt){return Wr(Is(Dt,o.accessToken,o.accessTokenParam||"access_token",xt.request.url),o)}),Promise.resolve(Lt)})}}else r=Object.assign({},r,{tiles:r.tiles.map(function(Lt){return Wr(Is(Lt,o.accessToken,o.accessTokenParam||"access_token",i||location.href),o)})}),Z=Promise.resolve(Object.assign({},r));Gr[T]=Z}return Z})(r,i,o).then(function(J){var rt=function Jr(r,i,o){var T=new M({tileJSON:i,tileSize:r.tileSize||i.tileSize||512}),Z=T.getTileJSON(),J=T.getTileGrid(),rt=(0,x.U2)(o.projection||"EPSG:3857"),xt=function ao(r,i){var o=r.bounds;if(o){var T=(0,x.mi)([o[0],o[1]],i),Z=(0,x.mi)([o[2],o[3]],i);return[T[0],T[1],Z[0],Z[1]]}return(0,x.U2)(i).getExtent()}(Z,rt),Lt=rt.getExtent(),Dt=Z.minzoom||0,Ft=Z.maxzoom||22,$t={attributions:T.getAttributions(),projection:rt,tileGrid:new h.Z({origin:Lt?(0,e.rL)(Lt):J.getOrigin(0),extent:xt||J.getExtent(),minZoom:Dt,resolutions:so(rt,i.tileSize).slice(0,Ft+1),tileSize:J.getTileSize(0)})};return Array.isArray(Z.tiles)?$t.urls=Z.tiles:$t.url=Z.tiles,$t}(r,J,o);rt.format=new s.Z,Array.isArray(J.tiles)?rt.urls=J.tiles:rt.url=J.tiles,T(new it.Z(rt))}).catch(Z)})}(le.sources[rt],J,xt).then(function(Pt){var Vt=r.getSource();if(Vt?Pt!==Vt&&(Vt.setTileUrlFunction(Pt.getTileUrlFunction()),Vt.format_||(Vt.format_=Pt.format_),Vt.getAttributions()||Vt.setAttributions(Pt.getAttributions()),Vt.getTileLoadFunction()===it.I&&Vt.setTileLoadFunction(Pt.getTileLoadFunction()),(0,x.OP)(Vt.getProjection(),Pt.getProjection())&&(Vt.tileGrid=Pt.getTileGrid())):r.setSource(Pt),!isFinite(r.getMaxResolution())&&!isFinite(r.getMinZoom())){var ae=r.getSource().getTileGrid();r.setMaxResolution(ae.getResolution(ae.getMinZoom()))}});var ut=le.sources[rt],Et=r.getSource();(!Et||Et.get("mapbox-source")!==ut)&&(Et=function _r(r,i,o){var T=r.data,Z={};if("string"==typeof T){var J=Is(T,o.accessToken,o.accessTokenParam||"access_token",i||location.href);if(o.transformRequest){var rt=o.transformRequest(J,"GeoJSON");rt instanceof Request&&(J=decodeURI(rt.url))}if(/\{bbox-[0-9a-z-]+\}/.test(J)){var Lt=new N.Z({attributions:r.attribution,format:os,url:function(Ft,$t,le){var fe=function ws(r){return"{bbox-"+(r?r.getCode():"EPSG:3857").toLowerCase().replace(/[^a-z0-9]/g,"-")+"}"}(le);return J.replace(fe,Ft.join(",")+","+le.getCode())},strategy:Y.VW});return Lt.set("mapbox-source",r),Lt}return new N.Z({attributions:r.attribution,format:os,url:J})}Z.features=os.readFeatures(T,{featureProjection:(0,x.Cs)()||"EPSG:3857"});var Dt=new N.Z(Object.assign({attributions:r.attribution,format:os},Z));return Dt.set("mapbox-source",r),Dt}(ut,J,xt));var Ut=r.getSource();return Ut?Et!==Ut&&(Ut.getAttributions()||Ut.setAttributions(Et.getAttributions()),Ut.format_||(Ut.format_=Et.getFormat()),Ut.url_=Et.getUrl()):r.setSource(Et),Promise.resolve()}function j(){if(B||le.sprite&&!l)B?(r.setStyle(B),be().then(Ft).catch($t)):$t(new Error("Something went wrong trying to apply style."));else{if(xt.projection&&!Z){var Et=(0,x.U2)(xt.projection).getUnits();"m"!==Et&&(Z=Xi.map(function(Ut){return Ut/x.Wm[Et]}))}B=io(r,le,Lt,Z,l,_,Ha,xt.getImage),r.getStyle()?be().then(Ft).catch($t):$t(new Error("Nothing to show for source ["+rt+"]"))}}if(le.sprite){var X=new URL(function Wa(r,i,o){var T=er(r);if(!T)return decodeURI(new URL(r,o).href);var Z="sprites/";if(0!==T.indexOf(Z))throw new Error("unexpected sprites url: "+r);var J=T.slice(Z.length);return Ur+"/styles/v1/"+J+"/sprite?access_token="+i}(le.sprite,xt.accessToken,J||location.href)),et=.5==(window.devicePixelRatio>=1.5?.5:1)?"@2x":"",tt=X.origin+X.pathname+et+".json"+X.search;new Promise(function(ut,Et){ar("Sprite",tt,xt).then(ut).catch(function(Ut){ar("Sprite",tt=X.origin+X.pathname+".json"+X.search,xt).then(ut).catch(Et)})}).then(function(ut){if(void 0===ut&&$t(new Error("No sprites found.")),l=ut,_=X.origin+X.pathname+et+".png"+X.search,xt.transformRequest){var Et=xt.transformRequest(_,"SpriteImage");Et instanceof Request&&(_=encodeURI(Et.url))}j()}).catch(function(ut){$t(new Error("Sprites cannot be loaded: "+tt+": "+ut.message))})}else j()}).catch($t)})}var rn={};function $e(r,i,o){return void 0===o&&(o={}),or(i,o).then(function(T){!function oi(r,i,o){i.layers.some(function(T){if("background"===T.type){if(r instanceof u.Z)return r.setBackground(function(Z){return as(T,Z,o,{})}),!0;if(r instanceof f.Z||r instanceof c.Z)return r.getLayers().push(function vn(r,i,o){var T=document.createElement("div");return T.className="ol-mapbox-style-background",T.style.position="absolute",T.style.width="100%",T.style.height="100%",new u.Z({source:new n.Z({}),render:function(J){var rt=as(r,J.viewState.resolution,i,o);return T.style.backgroundColor=rt,T}})}(T,o,{})),!0}})}(r,T,o)})}function as(r,i,o,T){var Z={id:r.id,type:r.type},J=r.layout||{},rt=r.paint||{};Z.paint=rt;var Lt,Dt,xt=rr(i,o.resolutions||Xi);return void 0!==rt["background-color"]&&(Lt=we(Z,"paint","background-color",xt,rn,T)),void 0!==rt["background-opacity"]&&(Dt=we(Z,"paint","background-opacity",xt,rn,T)),"none"==J.visibility?void 0:sn(Lt,Dt)}var os=new d.Z},1955:(Bt,ot,a)=>{"use strict";a.d(ot,{Z:()=>k});const G={1:"The view center is not defined",2:"The view resolution is not defined",3:"The view rotation is not defined",4:"`image` and `src` cannot be provided at the same time",5:"`imgSize` must be set when `image` is provided",7:"`format` must be set when `url` is set",8:"Unknown `serverType` configured",9:"`url` must be configured or set using `#setUrl()`",10:"The default `geometryFunction` can only handle `Point` geometries",11:"`options.featureTypes` must be an Array",12:"`options.geometryName` must also be provided when `options.bbox` is set",13:"Invalid corner",14:"Invalid color",15:"Tried to get a value for a key that does not exist in the cache",16:"Tried to set a value for a key that is used already",17:"`resolutions` must be sorted in descending order",18:"Either `origin` or `origins` must be configured, never both",19:"Number of `tileSizes` and `resolutions` must be equal",20:"Number of `origins` and `resolutions` must be equal",22:"Either `tileSize` or `tileSizes` must be configured, never both",24:"Invalid extent or geometry provided as `geometry`",25:"Cannot fit empty extent provided as `geometry`",26:"Features must have an id set",27:"Features must have an id set",28:'`renderMode` must be `"hybrid"` or `"vector"`',30:"The passed `feature` was already added to the source",31:"Tried to enqueue an `element` that was already added to the queue",32:"Transformation matrix cannot be inverted",33:"Invalid units",34:"Invalid geometry layout",36:"Unknown SRS type",37:"Unknown geometry type found",38:"`styleMapValue` has an unknown type",39:"Unknown geometry type",40:"Expected `feature` to have a geometry",41:"Expected an `ol/style/Style` or an array of `ol/style/Style.js`",42:"Question unknown, the answer is 42",43:"Expected `layers` to be an array or a `Collection`",47:"Expected `controls` to be an array or an `ol/Collection`",48:"Expected `interactions` to be an array or an `ol/Collection`",49:"Expected `overlays` to be an array or an `ol/Collection`",50:"`options.featureTypes` should be an Array",51:"Either `url` or `tileJSON` options must be provided",52:"Unknown `serverType` configured",53:"Unknown `tierSizeCalculation` configured",55:"The {-y} placeholder requires a tile grid with extent",56:"mapBrowserEvent must originate from a pointer event",57:"At least 2 conditions are required",59:"Invalid command found in the PBF",60:"Missing or invalid `size`",61:"Cannot determine IIIF Image API version from provided image information JSON",62:"A `WebGLArrayBuffer` must either be of type `ELEMENT_ARRAY_BUFFER` or `ARRAY_BUFFER`",64:"Layer opacity must be a number",66:"`forEachFeatureAtCoordinate` cannot be used on a WebGL layer if the hit detection logic has not been enabled. This is done by providing adequate shaders using the `hitVertexShader` and `hitFragmentShader` properties of `WebGLPointsLayerRenderer`",67:"A layer can only be added to the map once. Use either `layer.setMap()` or `map.addLayer()`, not both",68:"A VectorTile source can only be rendered if it has a projection compatible with the view projection",69:"`width` or `height` cannot be provided together with `scale`"};class D extends Error{constructor(U){const I=G[U];super(I),this.code=U,this.name="AssertionError",this.message=I}}const k=D},9573:(Bt,ot,a)=>{"use strict";a.d(ot,{Z:()=>P});var G=a(1955),D=a(4115),k=a(448),z=a(3615);class I extends z.ZP{constructor(d,u,c){super(d),this.element=u,this.index=c}}const P=class S extends D.Z{constructor(d,u){if(super(),this.unique_=!!(u=u||{}).unique,this.array_=d||[],this.unique_)for(let c=0,s=this.array_.length;c<s;++c)this.assertUnique_(this.array_[c],c);this.updateLength_()}clear(){for(;this.getLength()>0;)this.pop()}extend(d){for(let u=0,c=d.length;u<c;++u)this.push(d[u]);return this}forEach(d){const u=this.array_;for(let c=0,s=u.length;c<s;++c)d(u[c],c,u)}getArray(){return this.array_}item(d){return this.array_[d]}getLength(){return this.get("length")}insertAt(d,u){if(d<0||d>this.getLength())throw new Error("Index out of bounds: "+d);this.unique_&&this.assertUnique_(u),this.array_.splice(d,0,u),this.updateLength_(),this.dispatchEvent(new I(k.Z.ADD,u,d))}pop(){return this.removeAt(this.getLength()-1)}push(d){this.unique_&&this.assertUnique_(d);const u=this.getLength();return this.insertAt(u,d),this.getLength()}remove(d){const u=this.array_;for(let c=0,s=u.length;c<s;++c)if(u[c]===d)return this.removeAt(c)}removeAt(d){if(d<0||d>=this.getLength())return;const u=this.array_[d];return this.array_.splice(d,1),this.updateLength_(),this.dispatchEvent(new I(k.Z.REMOVE,u,d)),u}setAt(d,u){if(d>=this.getLength())return void this.insertAt(d,u);if(d<0)throw new Error("Index out of bounds: "+d);this.unique_&&this.assertUnique_(u,d);const s=this.array_[d];this.array_[d]=u,this.dispatchEvent(new I(k.Z.REMOVE,s,d)),this.dispatchEvent(new I(k.Z.ADD,u,d))}updateLength_(){this.set("length",this.array_.length)}assertUnique_(d,u){for(let c=0,s=this.array_.length;c<s;++c)if(this.array_[c]===d&&c!==u)throw new G.Z(58)}}},448:(Bt,ot,a)=>{"use strict";a.d(ot,{Z:()=>G});const G={ADD:"add",REMOVE:"remove"}},6450:(Bt,ot,a)=>{"use strict";a.d(ot,{Z:()=>D});const D=class G{constructor(){this.disposed=!1}dispose(){this.disposed||(this.disposed=!0,this.disposeInternal())}disposeInternal(){}}},3413:(Bt,ot,a)=>{"use strict";a.d(ot,{Z:()=>S});var G=a(4115),D=a(3044),k=a(992),z=a(2716);class U extends G.Z{constructor(p){super(),this.id_=void 0,this.geometryName_="geometry",this.style_=null,this.styleFunction_=void 0,this.geometryChangeKey_=null,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),p&&("function"==typeof p.getSimplifiedGeometry?this.setGeometry(p):this.setProperties(p))}clone(){const p=new U(this.hasProperties()?this.getProperties():null);p.setGeometryName(this.getGeometryName());const d=this.getGeometry();d&&p.setGeometry(d.clone());const u=this.getStyle();return u&&p.setStyle(u),p}getGeometry(){return this.get(this.geometryName_)}getId(){return this.id_}getGeometryName(){return this.geometryName_}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}handleGeometryChange_(){this.changed()}handleGeometryChanged_(){this.geometryChangeKey_&&((0,z.bN)(this.geometryChangeKey_),this.geometryChangeKey_=null);const p=this.getGeometry();p&&(this.geometryChangeKey_=(0,z.oL)(p,D.Z.CHANGE,this.handleGeometryChange_,this)),this.changed()}setGeometry(p){this.set(this.geometryName_,p)}setStyle(p){this.style_=p,this.styleFunction_=p?function I(P){if("function"==typeof P)return P;let p;return Array.isArray(P)?p=P:((0,k.h)("function"==typeof P.getZIndex,41),p=[P]),function(){return p}}(p):void 0,this.changed()}setId(p){this.id_=p,this.changed()}setGeometryName(p){this.removeChangeListener(this.geometryName_,this.handleGeometryChanged_),this.geometryName_=p,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),this.handleGeometryChanged_()}}const S=U},1309:(Bt,ot,a)=>{"use strict";a.d(ot,{K:()=>P,Z:()=>p});var G=a(3044),D=a(1649),k=a(1501),z=a(5063),U=a(9543),I=a(2716);function P(d,u,c){const s=d;let f=!0,n=!1,h=!1;const g=[(0,I.Vx)(s,G.Z.LOAD,function(){h=!0,n||u()})];return s.src&&z.Tp?(n=!0,s.decode().then(function(){f&&u()}).catch(function(e){f&&(h?u():c())})):g.push((0,I.Vx)(s,G.Z.ERROR,c)),function(){f=!1,g.forEach(I.bN)}}const p=class S extends D.Z{constructor(u,c,s,f,n,h,g){super(u,c,s,k.Z.IDLE),this.src_=f,this.image_=new Image,null!==n&&(this.image_.crossOrigin=n),this.context_=g,this.unlisten_=null,this.state=k.Z.IDLE,this.imageLoadFunction_=h}getImage(){if(this.state==k.Z.LOADED&&this.context_&&!(this.image_ instanceof HTMLCanvasElement)){const u=this.context_.canvas;u.width=this.image_.width,u.height=this.image_.height,this.context_.drawImage(this.image_,0,0),this.image_=this.context_.canvas}return this.image_}handleImageError_(){this.state=k.Z.ERROR,this.unlistenImage_(),this.changed()}handleImageLoad_(){void 0===this.resolution&&(this.resolution=(0,U.Cr)(this.extent)/this.image_.height),this.state=k.Z.LOADED,this.unlistenImage_(),this.changed()}load(){(this.state==k.Z.IDLE||this.state==k.Z.ERROR)&&(this.state=k.Z.LOADING,this.changed(),this.imageLoadFunction_(this,this.src_),this.unlisten_=P(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))}setImage(u){this.image_=u,this.resolution=(0,U.Cr)(this.extent)/this.image_.height}unlistenImage_(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}}},1649:(Bt,ot,a)=>{"use strict";a.d(ot,{Z:()=>U});var G=a(1398),D=a(3044),k=a(513);const U=class z extends G.Z{constructor(S,P,p,d){super(),this.extent=S,this.pixelRatio_=p,this.resolution=P,this.state=d}changed(){this.dispatchEvent(D.Z.CHANGE)}getExtent(){return this.extent}getImage(){return(0,k.O3)()}getPixelRatio(){return this.pixelRatio_}getResolution(){return this.resolution}getState(){return this.state}load(){(0,k.O3)()}}},443:(Bt,ot,a)=>{"use strict";a.d(ot,{Z:()=>z});var G=a(1649),D=a(1501);const z=class k extends G.Z{constructor(I,S,P,p,d){super(I,S,P,void 0!==d?D.Z.IDLE:D.Z.LOADED),this.loader_=void 0!==d?d:null,this.canvas_=p,this.error_=null}getError(){return this.error_}handleLoad_(I){I?(this.error_=I,this.state=D.Z.ERROR):this.state=D.Z.LOADED,this.changed()}load(){this.state==D.Z.IDLE&&(this.state=D.Z.LOADING,this.changed(),this.loader_(this.handleLoad_.bind(this)))}getImage(){return this.canvas_}}},1501:(Bt,ot,a)=>{"use strict";a.d(ot,{Z:()=>G});const G={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4}},8879:(Bt,ot,a)=>{"use strict";a.d(ot,{Z:()=>S});var G=a(8786),D=a(4700),k=a(3842),z=a(1309);const S=class U extends G.Z{constructor(p,d,u,c,s,f){super(p,d,f),this.crossOrigin_=c,this.src_=u,this.key=u,this.image_=new Image,null!==c&&(this.image_.crossOrigin=c),this.unlisten_=null,this.tileLoadFunction_=s}getImage(){return this.image_}setImage(p){this.image_=p,this.state=D.Z.LOADED,this.unlistenImage_(),this.changed()}handleImageError_(){this.state=D.Z.ERROR,this.unlistenImage_(),this.image_=function I(){const P=(0,k.E4)(1,1);return P.fillStyle="rgba(0,0,0,0)",P.fillRect(0,0,1,1),P.canvas}(),this.changed()}handleImageLoad_(){const p=this.image_;this.state=p.naturalWidth&&p.naturalHeight?D.Z.LOADED:D.Z.EMPTY,this.unlistenImage_(),this.changed()}load(){this.state==D.Z.ERROR&&(this.state=D.Z.IDLE,this.image_=new Image,null!==this.crossOrigin_&&(this.image_.crossOrigin=this.crossOrigin_)),this.state==D.Z.IDLE&&(this.state=D.Z.LOADING,this.changed(),this.tileLoadFunction_(this,this.src_),this.unlisten_=(0,z.K)(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))}unlistenImage_(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}}},6942:(Bt,ot,a)=>{"use strict";a.d(ot,{Z:()=>ge});var G=a(4115),D=a(9573),k=a(448),z=a(6450),U=a(1334),I=a(513),S=a(7139),P=a(9543),p=a(9118),d=a(7521),u=a(5415);function s(qt,gt){p.c.expire()}const f=class c extends z.Z{constructor(gt){super(),this.map_=gt}dispatchRenderEvent(gt,Mt){(0,I.O3)()}calculateMatrices2D(gt){const Mt=gt.viewState,Zt=gt.coordinateToPixelTransform,jt=gt.pixelToCoordinateTransform;(0,S.qC)(Zt,gt.size[0]/2,gt.size[1]/2,1/Mt.resolution,-1/Mt.resolution,-Mt.rotation,-Mt.center[0],-Mt.center[1]),(0,S.nb)(jt,Zt)}forEachFeatureAtCoordinate(gt,Mt,Zt,jt,Wt,he,_e,Le){let Ze;const It=Mt.viewState;function ct(Xt,Jt,Ee,se){return Wt.call(he,Jt,Xt?Ee:null,se)}const m=It.projection,F=(0,u.Cf)(gt.slice(),m),Q=[[0,0]];if(m.canWrapX()&&jt){const Xt=m.getExtent(),Jt=(0,P.dz)(Xt);Q.push([-Jt,0],[Jt,0])}const V=Mt.layerStatesArray,lt=V.length,_t=[],St=[];for(let Xt=0;Xt<Q.length;Xt++)for(let Jt=lt-1;Jt>=0;--Jt){const Ee=V[Jt],se=Ee.layer;if(se.hasRenderer()&&(0,d.j)(Ee,It)&&_e.call(Le,se)){const Qt=se.getRenderer(),Fe=se.getSource();if(Qt&&Fe){const Ye=Fe.getWrapX()?F:gt,We=ct.bind(null,Ee.managed);St[0]=Ye[0]+Q[Xt][0],St[1]=Ye[1]+Q[Xt][1],Ze=Qt.forEachFeatureAtCoordinate(St,Mt,Zt,We,_t)}if(Ze)return Ze}}if(0===_t.length)return;const Nt=1/_t.length;return _t.forEach((Xt,Jt)=>Xt.distanceSq+=Jt*Nt),_t.sort((Xt,Jt)=>Xt.distanceSq-Jt.distanceSq),_t.some(Xt=>Ze=Xt.callback(Xt.feature,Xt.layer,Xt.geometry)),Ze}hasFeatureAtCoordinate(gt,Mt,Zt,jt,Wt,he){return void 0!==this.forEachFeatureAtCoordinate(gt,Mt,Zt,jt,U.uX,this,Wt,he)}getMap(){return this.map_}renderFrame(gt){(0,I.O3)()}scheduleExpireIconCache(gt){p.c.canExpireCache()&&gt.postRenderFunctions.push(s)}};var n=a(8296),h=a(9683),g=a(8779),e=a(1119),E=a(2768),v=a(2716),x=a(3842);const O=class w extends f{constructor(gt){super(gt),this.fontChangeListenerKey_=(0,v.oL)(E.sG,n.Z.PROPERTYCHANGE,gt.redrawText.bind(gt)),this.element_=document.createElement("div");const Mt=this.element_.style;Mt.position="absolute",Mt.width="100%",Mt.height="100%",Mt.zIndex="0",this.element_.className=e.XV+" ol-layers";const Zt=gt.getViewport();Zt.insertBefore(this.element_,Zt.firstChild||null),this.children_=[],this.renderedVisible_=!0}dispatchRenderEvent(gt,Mt){const Zt=this.getMap();if(Zt.hasListener(gt)){const jt=new h.Z(gt,void 0,Mt);Zt.dispatchEvent(jt)}}disposeInternal(){(0,v.bN)(this.fontChangeListenerKey_),this.element_.parentNode.removeChild(this.element_),super.disposeInternal()}renderFrame(gt){if(!gt)return void(this.renderedVisible_&&(this.element_.style.display="none",this.renderedVisible_=!1));this.calculateMatrices2D(gt),this.dispatchRenderEvent(g.Z.PRECOMPOSE,gt);const Mt=gt.layerStatesArray.sort(function(he,_e){return he.zIndex-_e.zIndex}),Zt=gt.viewState;this.children_.length=0;const jt=[];let Wt=null;for(let he=0,_e=Mt.length;he<_e;++he){const Le=Mt[he];gt.layerIndex=he;const Ze=Le.layer,It=Ze.getSourceState();if(!(0,d.j)(Le,Zt)||"ready"!=It&&"undefined"!=It){Ze.unrender();continue}const ct=Ze.render(gt,Wt);!ct||(ct!==Wt&&(this.children_.push(ct),Wt=ct),"getDeclutter"in Ze&&jt.push(Ze))}for(let he=jt.length-1;he>=0;--he)jt[he].renderDeclutter(gt);(0,x.hF)(this.element_,this.children_),this.dispatchRenderEvent(g.Z.POSTCOMPOSE,gt),this.renderedVisible_||(this.element_.style.display="",this.renderedVisible_=!0),this.scheduleExpireIconCache(gt)}};var y=a(3044),R=a(1591),W=a(3615);const nt=class K extends W.ZP{constructor(gt,Mt,Zt){super(gt),this.map=Mt,this.frameState=void 0!==Zt?Zt:null}},L=class A extends nt{constructor(gt,Mt,Zt,jt,Wt,he){super(gt,Mt,Wt),this.originalEvent=Zt,this.pixel_=null,this.coordinate_=null,this.dragging=void 0!==jt&&jt,this.activePointers=he}get pixel(){return this.pixel_||(this.pixel_=this.map.getEventPixel(this.originalEvent)),this.pixel_}set pixel(gt){this.pixel_=gt}get coordinate(){return this.coordinate_||(this.coordinate_=this.map.getCoordinateFromPixel(this.pixel)),this.coordinate_}set coordinate(gt){this.coordinate_=gt}preventDefault(){super.preventDefault(),"preventDefault"in this.originalEvent&&this.originalEvent.preventDefault()}stopPropagation(){super.stopPropagation(),"stopPropagation"in this.originalEvent&&this.originalEvent.stopPropagation()}};var b=a(1590),M=a(5622),C=a(1398),N=a(5063);const it=class H extends C.Z{constructor(gt,Mt){super(gt),this.map_=gt,this.emulateClicks_=!1,this.dragging_=!1,this.dragListenerKeys_=[],this.moveTolerance_=void 0===Mt?1:Mt,this.down_=null;const Zt=this.map_.getViewport();this.activePointers_=[],this.trackedTouches_={},this.element_=Zt,this.pointerdownListenerKey_=(0,v.oL)(Zt,M.Z.POINTERDOWN,this.handlePointerDown_,this),this.relayedListenerKey_=(0,v.oL)(Zt,M.Z.POINTERMOVE,this.relayMoveEvent_,this),this.boundHandleTouchMove_=this.handleTouchMove_.bind(this),this.element_.addEventListener(y.Z.TOUCHMOVE,this.boundHandleTouchMove_,!!N.bM&&{passive:!1})}emulateClick_(gt){let Mt=new L(b.Z.CLICK,this.map_,gt);this.dispatchEvent(Mt),void 0!==this.clickTimeoutId_?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=void 0,Mt=new L(b.Z.DBLCLICK,this.map_,gt),this.dispatchEvent(Mt)):this.clickTimeoutId_=setTimeout(()=>{this.clickTimeoutId_=void 0;const Zt=new L(b.Z.SINGLECLICK,this.map_,gt);this.dispatchEvent(Zt)},250)}updateActivePointers_(gt){const Mt=gt,Zt=Mt.pointerId;if(Mt.type==b.Z.POINTERUP||Mt.type==b.Z.POINTERCANCEL){delete this.trackedTouches_[Zt];for(const jt in this.trackedTouches_)if(this.trackedTouches_[jt].target!==Mt.target){delete this.trackedTouches_[jt];break}}else(Mt.type==b.Z.POINTERDOWN||Mt.type==b.Z.POINTERMOVE)&&(this.trackedTouches_[Zt]=Mt);this.activePointers_=Object.values(this.trackedTouches_)}handlePointerUp_(gt){this.updateActivePointers_(gt);const Mt=new L(b.Z.POINTERUP,this.map_,gt,void 0,void 0,this.activePointers_);this.dispatchEvent(Mt),this.emulateClicks_&&!Mt.defaultPrevented&&!this.dragging_&&this.isMouseActionButton_(gt)&&this.emulateClick_(this.down_),0===this.activePointers_.length&&(this.dragListenerKeys_.forEach(v.bN),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null)}isMouseActionButton_(gt){return 0===gt.button}handlePointerDown_(gt){this.emulateClicks_=0===this.activePointers_.length,this.updateActivePointers_(gt);const Mt=new L(b.Z.POINTERDOWN,this.map_,gt,void 0,void 0,this.activePointers_);if(this.dispatchEvent(Mt),this.down_=new PointerEvent(gt.type,gt),Object.defineProperty(this.down_,"target",{writable:!1,value:gt.target}),0===this.dragListenerKeys_.length){const Zt=this.map_.getOwnerDocument();this.dragListenerKeys_.push((0,v.oL)(Zt,b.Z.POINTERMOVE,this.handlePointerMove_,this),(0,v.oL)(Zt,b.Z.POINTERUP,this.handlePointerUp_,this),(0,v.oL)(this.element_,b.Z.POINTERCANCEL,this.handlePointerUp_,this)),this.element_.getRootNode&&this.element_.getRootNode()!==Zt&&this.dragListenerKeys_.push((0,v.oL)(this.element_.getRootNode(),b.Z.POINTERUP,this.handlePointerUp_,this))}}handlePointerMove_(gt){if(this.isMoving_(gt)){this.updateActivePointers_(gt),this.dragging_=!0;const Mt=new L(b.Z.POINTERDRAG,this.map_,gt,this.dragging_,void 0,this.activePointers_);this.dispatchEvent(Mt)}}relayMoveEvent_(gt){this.originalPointerMoveEvent_=gt;const Mt=!(!this.down_||!this.isMoving_(gt));this.dispatchEvent(new L(b.Z.POINTERMOVE,this.map_,gt,Mt))}handleTouchMove_(gt){const Mt=this.originalPointerMoveEvent_;(!Mt||Mt.defaultPrevented)&&("boolean"!=typeof gt.cancelable||!0===gt.cancelable)&&gt.preventDefault()}isMoving_(gt){return this.dragging_||Math.abs(gt.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(gt.clientY-this.down_.clientY)>this.moveTolerance_}disposeInternal(){this.relayedListenerKey_&&((0,v.bN)(this.relayedListenerKey_),this.relayedListenerKey_=null),this.element_.removeEventListener(y.Z.TOUCHMOVE,this.boundHandleTouchMove_),this.pointerdownListenerKey_&&((0,v.bN)(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(v.bN),this.dragListenerKeys_.length=0,this.element_=null,super.disposeInternal()}};var Y=a(9806),st=a(3161),ht=a(2988),Tt=a(5109),vt=a(9500),Ct=a(992),bt=a(9633),Gt=a(5267),kt=a(1014),zt=a(1179),ue=a(142),de=a(9015),ce=a(931),Se=a(246);function dt(qt){qt instanceof d.Z?qt.setMapInternal(null):qt instanceof R.Z&&qt.getLayers().forEach(dt)}function Ot(qt,gt){if(qt instanceof d.Z)qt.setMapInternal(gt);else if(qt instanceof R.Z){const Mt=qt.getLayers().getArray();for(let Zt=0,jt=Mt.length;Zt<jt;++Zt)Ot(Mt[Zt],gt)}}const ge=class At extends G.Z{constructor(gt){super();const Mt=function Yt(qt){let gt=null;void 0!==qt.keyboardEventTarget&&(gt="string"==typeof qt.keyboardEventTarget?document.getElementById(qt.keyboardEventTarget):qt.keyboardEventTarget);const Mt={},Zt=qt.layers&&"function"==typeof qt.layers.getLayers?qt.layers:new R.Z({layers:qt.layers});let jt,Wt,he;return Mt[st.Z.LAYERGROUP]=Zt,Mt[st.Z.TARGET]=qt.target,Mt[st.Z.VIEW]=qt.view instanceof Tt.ZP?qt.view:new Tt.ZP,void 0!==qt.controls&&(Array.isArray(qt.controls)?jt=new D.Z(qt.controls.slice()):((0,Ct.h)("function"==typeof qt.controls.getArray,47),jt=qt.controls)),void 0!==qt.interactions&&(Array.isArray(qt.interactions)?Wt=new D.Z(qt.interactions.slice()):((0,Ct.h)("function"==typeof qt.interactions.getArray,48),Wt=qt.interactions)),void 0!==qt.overlays?Array.isArray(qt.overlays)?he=new D.Z(qt.overlays.slice()):((0,Ct.h)("function"==typeof qt.overlays.getArray,49),he=qt.overlays):he=new D.Z,{controls:jt,interactions:Wt,keyboardEventTarget:gt,overlays:he,values:Mt}}(gt=gt||{});this.loaded_=!0,this.boundHandleBrowserEvent_=this.handleBrowserEvent.bind(this),this.maxTilesLoading_=void 0!==gt.maxTilesLoading?gt.maxTilesLoading:16,this.pixelRatio_=void 0!==gt.pixelRatio?gt.pixelRatio:N.MP,this.animationDelay_=this.animationDelay_.bind(this),this.coordinateToPixelTransform_=(0,S.Ue)(),this.pixelToCoordinateTransform_=(0,S.Ue)(),this.frameIndex_=0,this.frameState_=null,this.previousExtent_=null,this.viewPropertyListenerKey_=null,this.viewChangeListenerKey_=null,this.layerGroupPropertyListenerKeys_=null,this.viewport_=document.createElement("div"),this.viewport_.className="ol-viewport"+("ontouchstart"in window?" ol-touch":""),this.viewport_.style.position="relative",this.viewport_.style.overflow="hidden",this.viewport_.style.width="100%",this.viewport_.style.height="100%",this.overlayContainer_=document.createElement("div"),this.overlayContainer_.style.position="absolute",this.overlayContainer_.style.zIndex="0",this.overlayContainer_.style.width="100%",this.overlayContainer_.style.height="100%",this.overlayContainer_.style.pointerEvents="none",this.overlayContainer_.className="ol-overlaycontainer",this.viewport_.appendChild(this.overlayContainer_),this.overlayContainerStopEvent_=document.createElement("div"),this.overlayContainerStopEvent_.style.position="absolute",this.overlayContainerStopEvent_.style.zIndex="0",this.overlayContainerStopEvent_.style.width="100%",this.overlayContainerStopEvent_.style.height="100%",this.overlayContainerStopEvent_.style.pointerEvents="none",this.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent",this.viewport_.appendChild(this.overlayContainerStopEvent_),this.mapBrowserEventHandler_=null,this.moveTolerance_=gt.moveTolerance,this.keyboardEventTarget_=Mt.keyboardEventTarget,this.targetChangeHandlerKeys_=null,this.targetElement_=null,this.resizeObserver_=new ResizeObserver(()=>this.updateSize()),this.controls=Mt.controls||function ie(qt){qt=qt||{};const gt=new D.Z;return(void 0===qt.zoom||qt.zoom)&&gt.push(new kt.Z(qt.zoomOptions)),(void 0===qt.rotate||qt.rotate)&&gt.push(new Gt.Z(qt.rotateOptions)),(void 0===qt.attribution||qt.attribution)&&gt.push(new bt.Z(qt.attributionOptions)),gt}(),this.interactions=Mt.interactions||(0,zt.c)({onFocusOnly:!0}),this.overlays_=Mt.overlays,this.overlayIdIndex_={},this.renderer_=null,this.postRenderFunctions_=[],this.tileQueue_=new ht.Z(this.getTilePriority.bind(this),this.handleTileChange_.bind(this)),this.addChangeListener(st.Z.LAYERGROUP,this.handleLayerGroupChanged_),this.addChangeListener(st.Z.VIEW,this.handleViewChanged_),this.addChangeListener(st.Z.SIZE,this.handleSizeChanged_),this.addChangeListener(st.Z.TARGET,this.handleTargetChanged_),this.setProperties(Mt.values);const Zt=this;gt.view&&!(gt.view instanceof Tt.ZP)&&gt.view.then(function(jt){Zt.setView(new Tt.ZP(jt))}),this.controls.addEventListener(k.Z.ADD,jt=>{jt.element.setMap(this)}),this.controls.addEventListener(k.Z.REMOVE,jt=>{jt.element.setMap(null)}),this.interactions.addEventListener(k.Z.ADD,jt=>{jt.element.setMap(this)}),this.interactions.addEventListener(k.Z.REMOVE,jt=>{jt.element.setMap(null)}),this.overlays_.addEventListener(k.Z.ADD,jt=>{this.addOverlayInternal_(jt.element)}),this.overlays_.addEventListener(k.Z.REMOVE,jt=>{const Wt=jt.element.getId();void 0!==Wt&&delete this.overlayIdIndex_[Wt.toString()],jt.element.setMap(null)}),this.controls.forEach(jt=>{jt.setMap(this)}),this.interactions.forEach(jt=>{jt.setMap(this)}),this.overlays_.forEach(this.addOverlayInternal_.bind(this))}addControl(gt){this.getControls().push(gt)}addInteraction(gt){this.getInteractions().push(gt)}addLayer(gt){this.getLayerGroup().getLayers().push(gt)}handleLayerAdd_(gt){Ot(gt.layer,this)}addOverlay(gt){this.getOverlays().push(gt)}addOverlayInternal_(gt){const Mt=gt.getId();void 0!==Mt&&(this.overlayIdIndex_[Mt.toString()]=gt),gt.setMap(this)}disposeInternal(){this.controls.clear(),this.interactions.clear(),this.overlays_.clear(),this.resizeObserver_.disconnect(),this.setTarget(null),super.disposeInternal()}forEachFeatureAtPixel(gt,Mt,Zt){if(!this.frameState_||!this.renderer_)return;const jt=this.getCoordinateFromPixelInternal(gt);return this.renderer_.forEachFeatureAtCoordinate(jt,this.frameState_,void 0!==(Zt=void 0!==Zt?Zt:{}).hitTolerance?Zt.hitTolerance:0,!1!==Zt.checkWrapped,Mt,null,void 0!==Zt.layerFilter?Zt.layerFilter:U.uX,null)}getFeaturesAtPixel(gt,Mt){const Zt=[];return this.forEachFeatureAtPixel(gt,function(jt){Zt.push(jt)},Mt),Zt}getAllLayers(){const gt=[];return function Mt(Zt){Zt.forEach(function(jt){jt instanceof R.Z?Mt(jt.getLayers()):gt.push(jt)})}(this.getLayers()),gt}hasFeatureAtPixel(gt,Mt){if(!this.frameState_||!this.renderer_)return!1;const Zt=this.getCoordinateFromPixelInternal(gt);return this.renderer_.hasFeatureAtCoordinate(Zt,this.frameState_,void 0!==(Mt=void 0!==Mt?Mt:{}).hitTolerance?Mt.hitTolerance:0,!1!==Mt.checkWrapped,void 0!==Mt.layerFilter?Mt.layerFilter:U.uX,null)}getEventCoordinate(gt){return this.getCoordinateFromPixel(this.getEventPixel(gt))}getEventCoordinateInternal(gt){return this.getCoordinateFromPixelInternal(this.getEventPixel(gt))}getEventPixel(gt){const Zt=this.viewport_.getBoundingClientRect(),jt=this.getSize(),_e="changedTouches"in gt?gt.changedTouches[0]:gt;return[(_e.clientX-Zt.left)/(Zt.width/jt[0]),(_e.clientY-Zt.top)/(Zt.height/jt[1])]}getTarget(){return this.get(st.Z.TARGET)}getTargetElement(){return this.targetElement_}getCoordinateFromPixel(gt){return(0,de.lO)(this.getCoordinateFromPixelInternal(gt),this.getView().getProjection())}getCoordinateFromPixelInternal(gt){const Mt=this.frameState_;return Mt?(0,S.nn)(Mt.pixelToCoordinateTransform,gt.slice()):null}getControls(){return this.controls}getOverlays(){return this.overlays_}getOverlayById(gt){const Mt=this.overlayIdIndex_[gt.toString()];return void 0!==Mt?Mt:null}getInteractions(){return this.interactions}getLayerGroup(){return this.get(st.Z.LAYERGROUP)}setLayers(gt){const Mt=this.getLayerGroup();if(gt instanceof D.Z)return void Mt.setLayers(gt);const Zt=Mt.getLayers();Zt.clear(),Zt.extend(gt)}getLayers(){return this.getLayerGroup().getLayers()}getLoadingOrNotReady(){const gt=this.getLayerGroup().getLayerStatesArray();for(let Mt=0,Zt=gt.length;Mt<Zt;++Mt){const jt=gt[Mt];if(!jt.visible)continue;const Wt=jt.layer.getRenderer();if(Wt&&!Wt.ready)return!0;const he=jt.layer.getSource();if(he&&he.loading)return!0}return!1}getPixelFromCoordinate(gt){const Mt=(0,de.Vs)(gt,this.getView().getProjection());return this.getPixelFromCoordinateInternal(Mt)}getPixelFromCoordinateInternal(gt){const Mt=this.frameState_;return Mt?(0,S.nn)(Mt.coordinateToPixelTransform,gt.slice(0,2)):null}getRenderer(){return this.renderer_}getSize(){return this.get(st.Z.SIZE)}getView(){return this.get(st.Z.VIEW)}getViewport(){return this.viewport_}getOverlayContainer(){return this.overlayContainer_}getOverlayContainerStopEvent(){return this.overlayContainerStopEvent_}getOwnerDocument(){const gt=this.getTargetElement();return gt?gt.ownerDocument:document}getTilePriority(gt,Mt,Zt,jt){return(0,ht.R)(this.frameState_,gt,Mt,Zt,jt)}handleBrowserEvent(gt,Mt){const Zt=new L(Mt=Mt||gt.type,this,gt);this.handleMapBrowserEvent(Zt)}handleMapBrowserEvent(gt){if(!this.frameState_)return;const Mt=gt.originalEvent,Zt=Mt.type;if(Zt===M.Z.POINTERDOWN||Zt===y.Z.WHEEL||Zt===y.Z.KEYDOWN){const jt=this.getOwnerDocument(),Wt=this.viewport_.getRootNode?this.viewport_.getRootNode():jt,he=Mt.target;if(this.overlayContainerStopEvent_.contains(he)||!(Wt===jt?jt.documentElement:Wt).contains(he))return}if(gt.frameState=this.frameState_,!1!==this.dispatchEvent(gt)){const jt=this.getInteractions().getArray().slice();for(let Wt=jt.length-1;Wt>=0;Wt--){const he=jt[Wt];if(he.getMap()===this&&he.getActive()&&this.getTargetElement()&&(!he.handleEvent(gt)||gt.propagationStopped))break}}}handlePostRender(){const gt=this.frameState_,Mt=this.tileQueue_;if(!Mt.isEmpty()){let jt=this.maxTilesLoading_,Wt=jt;if(gt){const he=gt.viewHints;if(he[vt.Z.ANIMATING]||he[vt.Z.INTERACTING]){const _e=Date.now()-gt.time>8;jt=_e?0:8,Wt=_e?0:2}}Mt.getTilesLoading()<jt&&(Mt.reprioritize(),Mt.loadMoreTiles(jt,Wt))}gt&&this.renderer_&&!gt.animate&&(!0===this.renderComplete_?(this.hasListener(g.Z.RENDERCOMPLETE)&&this.renderer_.dispatchRenderEvent(g.Z.RENDERCOMPLETE,gt),!1===this.loaded_&&(this.loaded_=!0,this.dispatchEvent(new nt(Y.Z.LOADEND,this,gt)))):!0===this.loaded_&&(this.loaded_=!1,this.dispatchEvent(new nt(Y.Z.LOADSTART,this,gt))));const Zt=this.postRenderFunctions_;for(let jt=0,Wt=Zt.length;jt<Wt;++jt)Zt[jt](this,gt);Zt.length=0}handleSizeChanged_(){this.getView()&&!this.getView().getAnimating()&&this.getView().resolveConstraints(0),this.render()}handleTargetChanged_(){if(this.mapBrowserEventHandler_){for(let Zt=0,jt=this.targetChangeHandlerKeys_.length;Zt<jt;++Zt)(0,v.bN)(this.targetChangeHandlerKeys_[Zt]);this.targetChangeHandlerKeys_=null,this.viewport_.removeEventListener(y.Z.CONTEXTMENU,this.boundHandleBrowserEvent_),this.viewport_.removeEventListener(y.Z.WHEEL,this.boundHandleBrowserEvent_),this.mapBrowserEventHandler_.dispose(),this.mapBrowserEventHandler_=null,(0,x.ZF)(this.viewport_)}if(this.targetElement_){this.resizeObserver_.unobserve(this.targetElement_);const Zt=this.targetElement_.getRootNode();Zt instanceof ShadowRoot&&this.resizeObserver_.unobserve(Zt.host)}const gt=this.getTarget(),Mt="string"==typeof gt?document.getElementById(gt):gt;if(this.targetElement_=Mt,Mt){Mt.appendChild(this.viewport_),this.renderer_||(this.renderer_=new O(this)),this.mapBrowserEventHandler_=new it(this,this.moveTolerance_);for(const Wt in b.Z)this.mapBrowserEventHandler_.addEventListener(b.Z[Wt],this.handleMapBrowserEvent.bind(this));this.viewport_.addEventListener(y.Z.CONTEXTMENU,this.boundHandleBrowserEvent_,!1),this.viewport_.addEventListener(y.Z.WHEEL,this.boundHandleBrowserEvent_,!!N.bM&&{passive:!1});const Zt=this.keyboardEventTarget_?this.keyboardEventTarget_:Mt;this.targetChangeHandlerKeys_=[(0,v.oL)(Zt,y.Z.KEYDOWN,this.handleBrowserEvent,this),(0,v.oL)(Zt,y.Z.KEYPRESS,this.handleBrowserEvent,this)];const jt=Mt.getRootNode();jt instanceof ShadowRoot&&this.resizeObserver_.observe(jt.host),this.resizeObserver_.observe(Mt)}else this.renderer_&&(clearTimeout(this.postRenderTimeoutHandle_),this.postRenderTimeoutHandle_=void 0,this.postRenderFunctions_.length=0,this.renderer_.dispose(),this.renderer_=null),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0);this.updateSize()}handleTileChange_(){this.render()}handleViewPropertyChanged_(){this.render()}handleViewChanged_(){this.viewPropertyListenerKey_&&((0,v.bN)(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&((0,v.bN)(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);const gt=this.getView();gt&&(this.updateViewportSize_(),this.viewPropertyListenerKey_=(0,v.oL)(gt,n.Z.PROPERTYCHANGE,this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=(0,v.oL)(gt,y.Z.CHANGE,this.handleViewPropertyChanged_,this),gt.resolveConstraints(0)),this.render()}handleLayerGroupChanged_(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(v.bN),this.layerGroupPropertyListenerKeys_=null);const gt=this.getLayerGroup();gt&&(this.handleLayerAdd_(new R.V("addlayer",gt)),this.layerGroupPropertyListenerKeys_=[(0,v.oL)(gt,n.Z.PROPERTYCHANGE,this.render,this),(0,v.oL)(gt,y.Z.CHANGE,this.render,this),(0,v.oL)(gt,"addlayer",this.handleLayerAdd_,this),(0,v.oL)(gt,"removelayer",this.handleLayerRemove_,this)]),this.render()}isRendered(){return!!this.frameState_}animationDelay_(){this.animationDelayKey_=void 0,this.renderFrame_(Date.now())}renderSync(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()}redrawText(){const gt=this.getLayerGroup().getLayerStatesArray();for(let Mt=0,Zt=gt.length;Mt<Zt;++Mt){const jt=gt[Mt].layer;jt.hasRenderer()&&jt.getRenderer().handleFontsChanged()}}render(){this.renderer_&&void 0===this.animationDelayKey_&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))}removeControl(gt){return this.getControls().remove(gt)}removeInteraction(gt){return this.getInteractions().remove(gt)}removeLayer(gt){return this.getLayerGroup().getLayers().remove(gt)}handleLayerRemove_(gt){dt(gt.layer)}removeOverlay(gt){return this.getOverlays().remove(gt)}renderFrame_(gt){const Mt=this.getSize(),Zt=this.getView(),jt=this.frameState_;let Wt=null;if(void 0!==Mt&&(0,ce.py)(Mt)&&Zt&&Zt.isDef()){const he=Zt.getHints(this.frameState_?this.frameState_.viewHints:void 0),_e=Zt.getState();if(Wt={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,declutterTree:null,extent:(0,P.p8)(_e.center,_e.resolution,_e.rotation,Mt),index:this.frameIndex_++,layerIndex:0,layerStatesArray:this.getLayerGroup().getLayerStatesArray(),pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:Mt,tileQueue:this.tileQueue_,time:gt,usedTiles:{},viewState:_e,viewHints:he,wantedTiles:{},mapId:(0,I.sq)(this),renderTargets:{}},_e.nextCenter&&_e.nextResolution){const Le=isNaN(_e.nextRotation)?_e.rotation:_e.nextRotation;Wt.nextExtent=(0,P.p8)(_e.nextCenter,_e.nextResolution,Le,Mt)}}this.frameState_=Wt,this.renderer_.renderFrame(Wt),Wt&&(Wt.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,Wt.postRenderFunctions),jt&&(!this.previousExtent_||!(0,P.xb)(this.previousExtent_)&&!(0,P.fS)(Wt.extent,this.previousExtent_))&&(this.dispatchEvent(new nt(Y.Z.MOVESTART,this,jt)),this.previousExtent_=(0,P.YN)(this.previousExtent_)),this.previousExtent_&&!Wt.viewHints[vt.Z.ANIMATING]&&!Wt.viewHints[vt.Z.INTERACTING]&&!(0,P.fS)(Wt.extent,this.previousExtent_)&&(this.dispatchEvent(new nt(Y.Z.MOVEEND,this,Wt)),(0,P.d9)(Wt.extent,this.previousExtent_))),this.dispatchEvent(new nt(Y.Z.POSTRENDER,this,Wt)),this.renderComplete_=this.hasListener(Y.Z.LOADSTART)||this.hasListener(Y.Z.LOADEND)||this.hasListener(g.Z.RENDERCOMPLETE)?!this.tileQueue_.getTilesLoading()&&!this.tileQueue_.getCount()&&!this.getLoadingOrNotReady():void 0,this.postRenderTimeoutHandle_||(this.postRenderTimeoutHandle_=setTimeout(()=>{this.postRenderTimeoutHandle_=void 0,this.handlePostRender()},0))}setLayerGroup(gt){const Mt=this.getLayerGroup();Mt&&this.handleLayerRemove_(new R.V("removelayer",Mt)),this.set(st.Z.LAYERGROUP,gt)}setSize(gt){this.set(st.Z.SIZE,gt)}setTarget(gt){this.set(st.Z.TARGET,gt)}setView(gt){if(!gt||gt instanceof Tt.ZP)return void this.set(st.Z.VIEW,gt);this.set(st.Z.VIEW,new Tt.ZP);const Mt=this;gt.then(function(Zt){Mt.setView(new Tt.ZP(Zt))})}updateSize(){const gt=this.getTargetElement();let Mt;if(gt){const jt=getComputedStyle(gt),Wt=gt.offsetWidth-parseFloat(jt.borderLeftWidth)-parseFloat(jt.paddingLeft)-parseFloat(jt.paddingRight)-parseFloat(jt.borderRightWidth),he=gt.offsetHeight-parseFloat(jt.borderTopWidth)-parseFloat(jt.paddingTop)-parseFloat(jt.paddingBottom)-parseFloat(jt.borderBottomWidth);!isNaN(Wt)&&!isNaN(he)&&(Mt=[Wt,he],!(0,ce.py)(Mt)&&(gt.offsetWidth||gt.offsetHeight||gt.getClientRects().length)&&(0,Se.ZK)("No map visible because the map container's width or height are 0."))}const Zt=this.getSize();Mt&&(!Zt||!(0,ue.fS)(Mt,Zt))&&(this.setSize(Mt),this.updateViewportSize_())}updateViewportSize_(){const gt=this.getView();if(gt){let Mt;const Zt=getComputedStyle(this.viewport_);Zt.width&&Zt.height&&(Mt=[parseInt(Zt.width,10),parseInt(Zt.height,10)]),gt.setViewportSize(Mt)}}}},1590:(Bt,ot,a)=>{"use strict";a.d(ot,{Z:()=>D});var G=a(3044);const D={SINGLECLICK:"singleclick",CLICK:G.Z.CLICK,DBLCLICK:G.Z.DBLCLICK,POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"}},9806:(Bt,ot,a)=>{"use strict";a.d(ot,{Z:()=>G});const G={POSTRENDER:"postrender",MOVESTART:"movestart",MOVEEND:"moveend",LOADSTART:"loadstart",LOADEND:"loadend"}},3161:(Bt,ot,a)=>{"use strict";a.d(ot,{Z:()=>G});const G={LAYERGROUP:"layergroup",SIZE:"size",TARGET:"target",VIEW:"view"}},4115:(Bt,ot,a)=>{"use strict";a.d(ot,{Z:()=>P});var G=a(3615),D=a(8296),k=a(8975),z=a(513),U=a(9306);class I extends G.ZP{constructor(d,u,c){super(d),this.key=u,this.oldValue=c}}const P=class S extends k.Z{constructor(d){super(),(0,z.sq)(this),this.values_=null,void 0!==d&&this.setProperties(d)}get(d){let u;return this.values_&&this.values_.hasOwnProperty(d)&&(u=this.values_[d]),u}getKeys(){return this.values_&&Object.keys(this.values_)||[]}getProperties(){return this.values_&&Object.assign({},this.values_)||{}}hasProperties(){return!!this.values_}notify(d,u){let c;c=`change:${d}`,this.hasListener(c)&&this.dispatchEvent(new I(c,d,u)),c=D.Z.PROPERTYCHANGE,this.hasListener(c)&&this.dispatchEvent(new I(c,d,u))}addChangeListener(d,u){this.addEventListener(`change:${d}`,u)}removeChangeListener(d,u){this.removeEventListener(`change:${d}`,u)}set(d,u,c){const s=this.values_||(this.values_={});if(c)s[d]=u;else{const f=s[d];s[d]=u,f!==u&&this.notify(d,f)}}setProperties(d,u){for(const c in d)this.set(c,d[c],u)}applyProperties(d){!d.values_||Object.assign(this.values_||(this.values_={}),d.values_)}unset(d,u){if(this.values_&&d in this.values_){const c=this.values_[d];delete this.values_[d],(0,U.x)(this.values_)&&(this.values_=null),u||this.notify(d,c)}}}},8296:(Bt,ot,a)=>{"use strict";a.d(ot,{Z:()=>G});const G={PROPERTYCHANGE:"propertychange"}},8975:(Bt,ot,a)=>{"use strict";a.d(ot,{B:()=>U,Z:()=>I});var G=a(1398),D=a(3044),k=a(2716);function U(S){if(Array.isArray(S))for(let P=0,p=S.length;P<p;++P)(0,k.bN)(S[P]);else(0,k.bN)(S)}const I=class z extends G.Z{constructor(){super(),this.on=this.onInternal,this.once=this.onceInternal,this.un=this.unInternal,this.revision_=0}changed(){++this.revision_,this.dispatchEvent(D.Z.CHANGE)}getRevision(){return this.revision_}onInternal(P,p){if(Array.isArray(P)){const d=P.length,u=new Array(d);for(let c=0;c<d;++c)u[c]=(0,k.oL)(this,P[c],p);return u}return(0,k.oL)(this,P,p)}onceInternal(P,p){let d;if(Array.isArray(P)){const u=P.length;d=new Array(u);for(let c=0;c<u;++c)d[c]=(0,k.Vx)(this,P[c],p)}else d=(0,k.Vx)(this,P,p);return p.ol_key=d,d}unInternal(P,p){const d=p.ol_key;if(d)U(d);else if(Array.isArray(P))for(let u=0,c=P.length;u<c;++u)this.removeEventListener(P[u],p);else this.removeEventListener(P,p)}}},2417:(Bt,ot,a)=>{"use strict";a.d(ot,{Z:()=>p});var G=a(4115),D=a(9806),k=a(1119),z=a(9543),U=a(2716),I=a(3842);const p=class P extends G.Z{constructor(u){super(),this.options=u,this.id=u.id,this.insertFirst=void 0===u.insertFirst||u.insertFirst,this.stopEvent=void 0===u.stopEvent||u.stopEvent,this.element=document.createElement("div"),this.element.className=void 0!==u.className?u.className:"ol-overlay-container "+k.$A,this.element.style.position="absolute",this.element.style.pointerEvents="auto",this.autoPan=!0===u.autoPan?{}:u.autoPan||void 0,this.rendered={transform_:"",visible:!0},this.mapPostrenderListenerKey=null,this.addChangeListener("element",this.handleElementChanged),this.addChangeListener("map",this.handleMapChanged),this.addChangeListener("offset",this.handleOffsetChanged),this.addChangeListener("position",this.handlePositionChanged),this.addChangeListener("positioning",this.handlePositioningChanged),void 0!==u.element&&this.setElement(u.element),this.setOffset(void 0!==u.offset?u.offset:[0,0]),this.setPositioning(u.positioning||"top-left"),void 0!==u.position&&this.setPosition(u.position)}getElement(){return this.get("element")}getId(){return this.id}getMap(){return this.get("map")||null}getOffset(){return this.get("offset")}getPosition(){return this.get("position")}getPositioning(){return this.get("positioning")}handleElementChanged(){(0,I.ep)(this.element);const u=this.getElement();u&&this.element.appendChild(u)}handleMapChanged(){this.mapPostrenderListenerKey&&((0,I.ZF)(this.element),(0,U.bN)(this.mapPostrenderListenerKey),this.mapPostrenderListenerKey=null);const u=this.getMap();if(u){this.mapPostrenderListenerKey=(0,U.oL)(u,D.Z.POSTRENDER,this.render,this),this.updatePixelPosition();const c=this.stopEvent?u.getOverlayContainerStopEvent():u.getOverlayContainer();this.insertFirst?c.insertBefore(this.element,c.childNodes[0]||null):c.appendChild(this.element),this.performAutoPan()}}render(){this.updatePixelPosition()}handleOffsetChanged(){this.updatePixelPosition()}handlePositionChanged(){this.updatePixelPosition(),this.performAutoPan()}handlePositioningChanged(){this.updatePixelPosition()}setElement(u){this.set("element",u)}setMap(u){this.set("map",u)}setOffset(u){this.set("offset",u)}setPosition(u){this.set("position",u)}performAutoPan(){this.autoPan&&this.panIntoView(this.autoPan)}panIntoView(u){const c=this.getMap();if(!c||!c.getTargetElement()||!this.get("position"))return;const s=this.getRect(c.getTargetElement(),c.getSize()),f=this.getElement(),n=this.getRect(f,[(0,I.iO)(f),(0,I.Pb)(f)]),h=void 0===(u=u||{}).margin?20:u.margin;if(!(0,z.r4)(s,n)){const g=n[0]-s[0],e=s[2]-n[2],E=n[1]-s[1],v=s[3]-n[3],x=[0,0];if(g<0?x[0]=g-h:e<0&&(x[0]=Math.abs(e)+h),E<0?x[1]=E-h:v<0&&(x[1]=Math.abs(v)+h),0!==x[0]||0!==x[1]){const w=c.getView().getCenterInternal(),O=c.getPixelFromCoordinateInternal(w);if(!O)return;const y=[O[0]+x[0],O[1]+x[1]],R=u.animation||{};c.getView().animateInternal({center:c.getCoordinateFromPixelInternal(y),duration:R.duration,easing:R.easing})}}}getRect(u,c){const s=u.getBoundingClientRect(),f=s.left+window.pageXOffset,n=s.top+window.pageYOffset;return[f,n,f+c[0],n+c[1]]}setPositioning(u){this.set("positioning",u)}setVisible(u){this.rendered.visible!==u&&(this.element.style.display=u?"":"none",this.rendered.visible=u)}updatePixelPosition(){const u=this.getMap(),c=this.getPosition();if(!u||!u.isRendered()||!c)return void this.setVisible(!1);const s=u.getPixelFromCoordinate(c),f=u.getSize();this.updateRenderedPosition(s,f)}updateRenderedPosition(u,c){const s=this.element.style,f=this.getOffset(),n=this.getPositioning();this.setVisible(!0);let e="0%",E="0%";"bottom-right"==n||"center-right"==n||"top-right"==n?e="-100%":("bottom-center"==n||"center-center"==n||"top-center"==n)&&(e="-50%"),"bottom-left"==n||"bottom-center"==n||"bottom-right"==n?E="-100%":("center-left"==n||"center-center"==n||"center-right"==n)&&(E="-50%");const v=`translate(${e}, ${E}) translate(${Math.round(u[0]+f[0])+"px"}, ${Math.round(u[1]+f[1])+"px"})`;this.rendered.transform_!=v&&(this.rendered.transform_=v,s.transform=v)}getOptions(){return this.options}}},8786:(Bt,ot,a)=>{"use strict";a.d(ot,{Z:()=>S});var G=a(1398),D=a(3044),k=a(4700),z=a(513),U=a(4720);const S=class I extends G.Z{constructor(p,d,u){super(),u=u||{},this.tileCoord=p,this.state=d,this.interimTile=null,this.key="",this.transition_=void 0===u.transition?250:u.transition,this.transitionStarts_={},this.interpolate=!!u.interpolate}changed(){this.dispatchEvent(D.Z.CHANGE)}release(){this.state===k.Z.ERROR&&this.setState(k.Z.EMPTY)}getKey(){return this.key+"/"+this.tileCoord}getInterimTile(){if(!this.interimTile)return this;let p=this.interimTile;do{if(p.getState()==k.Z.LOADED)return this.transition_=0,p;p=p.interimTile}while(p);return this}refreshInterimChain(){if(!this.interimTile)return;let p=this.interimTile,d=this;do{if(p.getState()==k.Z.LOADED){p.interimTile=null;break}p.getState()==k.Z.LOADING?d=p:p.getState()==k.Z.IDLE?d.interimTile=p.interimTile:d=p,p=d.interimTile}while(p)}getTileCoord(){return this.tileCoord}getState(){return this.state}setState(p){if(this.state!==k.Z.ERROR&&this.state>p)throw new Error("Tile load sequence violation");this.state=p,this.changed()}load(){(0,z.O3)()}getAlpha(p,d){if(!this.transition_)return 1;let u=this.transitionStarts_[p];if(u){if(-1===u)return 1}else u=d,this.transitionStarts_[p]=u;const c=d-u+1e3/60;return c>=this.transition_?1:(0,U.YQ)(c/this.transition_)}inTransition(p){return!!this.transition_&&-1!==this.transitionStarts_[p]}endTransition(p){this.transition_&&(this.transitionStarts_[p]=-1)}}},7450:(Bt,ot,a)=>{"use strict";a.d(ot,{Z:()=>I});var G=a(992);var z=a(5474);const I=class U extends class D{constructor(P){this.highWaterMark=void 0!==P?P:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}canExpireCache(){return this.highWaterMark>0&&this.getCount()>this.highWaterMark}expireCache(P){for(;this.canExpireCache();)this.pop()}clear(){this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}containsKey(P){return this.entries_.hasOwnProperty(P)}forEach(P){let p=this.oldest_;for(;p;)P(p.value_,p.key_,this),p=p.newer}get(P,p){const d=this.entries_[P];return(0,G.h)(void 0!==d,15),d===this.newest_||(d===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(d.newer.older=d.older,d.older.newer=d.newer),d.newer=null,d.older=this.newest_,this.newest_.newer=d,this.newest_=d),d.value_}remove(P){const p=this.entries_[P];return(0,G.h)(void 0!==p,15),p===this.newest_?(this.newest_=p.older,this.newest_&&(this.newest_.newer=null)):p===this.oldest_?(this.oldest_=p.newer,this.oldest_&&(this.oldest_.older=null)):(p.newer.older=p.older,p.older.newer=p.newer),delete this.entries_[P],--this.count_,p.value_}getCount(){return this.count_}getKeys(){const P=new Array(this.count_);let d,p=0;for(d=this.newest_;d;d=d.older)P[p++]=d.key_;return P}getValues(){const P=new Array(this.count_);let d,p=0;for(d=this.newest_;d;d=d.older)P[p++]=d.value_;return P}peekLast(){return this.oldest_.value_}peekLastKey(){return this.oldest_.key_}peekFirstKey(){return this.newest_.key_}peek(P){if(this.containsKey(P))return this.entries_[P].value_}pop(){const P=this.oldest_;return delete this.entries_[P.key_],P.newer&&(P.newer.older=null),this.oldest_=P.newer,this.oldest_||(this.newest_=null),--this.count_,P.value_}replace(P,p){this.get(P),this.entries_[P].value_=p}set(P,p){(0,G.h)(!(P in this.entries_),16);const d={key_:P,newer:null,older:this.newest_,value_:p};this.newest_?this.newest_.newer=d:this.oldest_=d,this.newest_=d,this.entries_[P]=d,++this.count_}setSize(P){this.highWaterMark=P}}{clear(){for(;this.getCount()>0;)this.pop().release();super.clear()}expireCache(P){for(;this.canExpireCache()&&!(this.peekLast().getKey()in P);)this.pop().release()}pruneExceptNewestZ(){if(0===this.getCount())return;const P=this.peekFirstKey(),d=(0,z.Ul)(P)[0];this.forEach(u=>{u.tileCoord[0]!==d&&(this.remove((0,z.km)(u.tileCoord)),u.release())})}}},2988:(Bt,ot,a)=>{"use strict";a.d(ot,{Z:()=>p,R:()=>d});var G=a(3044),D=a(992),k=a(9306);const z=1/0;var S=a(4700);const p=class P extends class U{constructor(c,s){this.priorityFunction_=c,this.keyFunction_=s,this.elements_=[],this.priorities_=[],this.queuedElements_={}}clear(){this.elements_.length=0,this.priorities_.length=0,(0,k.Z)(this.queuedElements_)}dequeue(){const c=this.elements_,s=this.priorities_,f=c[0];1==c.length?(c.length=0,s.length=0):(c[0]=c.pop(),s[0]=s.pop(),this.siftUp_(0));const n=this.keyFunction_(f);return delete this.queuedElements_[n],f}enqueue(c){(0,D.h)(!(this.keyFunction_(c)in this.queuedElements_),31);const s=this.priorityFunction_(c);return s!=z&&(this.elements_.push(c),this.priorities_.push(s),this.queuedElements_[this.keyFunction_(c)]=!0,this.siftDown_(0,this.elements_.length-1),!0)}getCount(){return this.elements_.length}getLeftChildIndex_(c){return 2*c+1}getRightChildIndex_(c){return 2*c+2}getParentIndex_(c){return c-1>>1}heapify_(){let c;for(c=(this.elements_.length>>1)-1;c>=0;c--)this.siftUp_(c)}isEmpty(){return 0===this.elements_.length}isKeyQueued(c){return c in this.queuedElements_}isQueued(c){return this.isKeyQueued(this.keyFunction_(c))}siftUp_(c){const s=this.elements_,f=this.priorities_,n=s.length,h=s[c],g=f[c],e=c;for(;c<n>>1;){const E=this.getLeftChildIndex_(c),v=this.getRightChildIndex_(c),x=v<n&&f[v]<f[E]?v:E;s[c]=s[x],f[c]=f[x],c=x}s[c]=h,f[c]=g,this.siftDown_(e,c)}siftDown_(c,s){const f=this.elements_,n=this.priorities_,h=f[s],g=n[s];for(;s>c;){const e=this.getParentIndex_(s);if(!(n[e]>g))break;f[s]=f[e],n[s]=n[e],s=e}f[s]=h,n[s]=g}reprioritize(){const c=this.priorityFunction_,s=this.elements_,f=this.priorities_;let n=0;const h=s.length;let g,e,E;for(e=0;e<h;++e)g=s[e],E=c(g),E==z?delete this.queuedElements_[this.keyFunction_(g)]:(f[n]=E,s[n++]=g);s.length=n,f.length=n,this.heapify_()}}{constructor(c,s){super(function(f){return c.apply(null,f)},function(f){return f[0].getKey()}),this.boundHandleTileChange_=this.handleTileChange.bind(this),this.tileChangeCallback_=s,this.tilesLoading_=0,this.tilesLoadingKeys_={}}enqueue(c){const s=super.enqueue(c);return s&&c[0].addEventListener(G.Z.CHANGE,this.boundHandleTileChange_),s}getTilesLoading(){return this.tilesLoading_}handleTileChange(c){const s=c.target,f=s.getState();if(f===S.Z.LOADED||f===S.Z.ERROR||f===S.Z.EMPTY){f!==S.Z.ERROR&&s.removeEventListener(G.Z.CHANGE,this.boundHandleTileChange_);const n=s.getKey();n in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[n],--this.tilesLoading_),this.tileChangeCallback_()}}loadMoreTiles(c,s){let n,h,g,f=0;for(;this.tilesLoading_<c&&f<s&&this.getCount()>0;)h=this.dequeue()[0],g=h.getKey(),n=h.getState(),n===S.Z.IDLE&&!(g in this.tilesLoadingKeys_)&&(this.tilesLoadingKeys_[g]=!0,++this.tilesLoading_,++f,h.load())}};function d(u,c,s,f,n){if(!u||!(s in u.wantedTiles)||!u.wantedTiles[s][c.getKey()])return z;const h=u.viewState.center,g=f[0]-h[0],e=f[1]-h[1];return 65536*Math.log(n)+Math.sqrt(g*g+e*e)/n}},828:(Bt,ot,a)=>{"use strict";a.d(ot,{T:()=>D,Z:()=>k});class G{constructor(U,I,S,P){this.minX=U,this.maxX=I,this.minY=S,this.maxY=P}contains(U){return this.containsXY(U[1],U[2])}containsTileRange(U){return this.minX<=U.minX&&U.maxX<=this.maxX&&this.minY<=U.minY&&U.maxY<=this.maxY}containsXY(U,I){return this.minX<=U&&U<=this.maxX&&this.minY<=I&&I<=this.maxY}equals(U){return this.minX==U.minX&&this.minY==U.minY&&this.maxX==U.maxX&&this.maxY==U.maxY}extend(U){U.minX<this.minX&&(this.minX=U.minX),U.maxX>this.maxX&&(this.maxX=U.maxX),U.minY<this.minY&&(this.minY=U.minY),U.maxY>this.maxY&&(this.maxY=U.maxY)}getHeight(){return this.maxY-this.minY+1}getSize(){return[this.getWidth(),this.getHeight()]}getWidth(){return this.maxX-this.minX+1}intersects(U){return this.minX<=U.maxX&&this.maxX>=U.minX&&this.minY<=U.maxY&&this.maxY>=U.minY}}function D(z,U,I,S,P){return void 0!==P?(P.minX=z,P.maxX=U,P.minY=I,P.maxY=S,P):new G(z,U,I,S)}const k=G},4700:(Bt,ot,a)=>{"use strict";a.d(ot,{Z:()=>G});const G={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4}},5109:(Bt,ot,a)=>{"use strict";a.d(ot,{ZP:()=>L});var G=a(4115),D=a(9500),k=a(1266),z=a(2258),U=a(9015),I=a(1334),S=a(5415),P=a(992),p=a(4331);function d(b,M,C){return function(N,H,it,Y,st){if(!N)return;if(!H&&!M)return N;const ht=M?0:it[0]*H,Tt=M?0:it[1]*H,vt=st?st[0]:0,Ct=st?st[1]:0;let bt=b[0]+ht/2+vt,Gt=b[2]-ht/2+vt,kt=b[1]+Tt/2+Ct,ie=b[3]-Tt/2+Ct;bt>Gt&&(bt=(Gt+bt)/2,Gt=bt),kt>ie&&(kt=(ie+kt)/2,ie=kt);let zt=(0,p.uZ)(N[0],bt,Gt),ue=(0,p.uZ)(N[1],kt,ie);if(Y&&C&&H){const de=30*H;zt+=-de*Math.log(1+Math.max(0,bt-N[0])/de)+de*Math.log(1+Math.max(0,N[0]-Gt)/de),ue+=-de*Math.log(1+Math.max(0,kt-N[1])/de)+de*Math.log(1+Math.max(0,N[1]-ie)/de)}return[zt,ue]}}function u(b){return b}var c=a(9543),s=a(142);function f(b,M,C,N){const H=(0,c.dz)(M)/C[0],it=(0,c.Cr)(M)/C[1];return N?Math.min(b,Math.max(H,it)):Math.min(b,Math.min(H,it))}function n(b,M,C){let N=Math.min(b,M);return N*=Math.log(1+50*Math.max(0,b/M-1))/50+1,C&&(N=Math.max(N,C),N/=Math.log(1+50*Math.max(0,C/b-1))/50+1),(0,p.uZ)(N,C/2,2*M)}function e(b,M,C,N,H){return C=void 0===C||C,function(it,Y,st,ht){if(void 0!==it){const Tt=N?f(b,N,st,H):b;return C&&ht?n(it,Tt,M):(0,p.uZ)(it,M,Tt)}}}var E=a(7011),v=a(4720),x=a(7464);function y(b,M){setTimeout(function(){b(M)},0)}function A(b,M,C,N,H){const it=Math.cos(-H);let Y=Math.sin(-H),st=b[0]*it-b[1]*Y,ht=b[1]*it+b[0]*Y;return st+=(M[0]/2-C[0])*N,ht+=(C[1]-M[1]/2)*N,Y=-Y,[st*it-ht*Y,ht*it+st*Y]}const L=class O extends G.Z{constructor(M){super(),M=Object.assign({},M),this.hints_=[0,0],this.animations_=[],this.projection_=(0,U.UQ)(M.projection,"EPSG:3857"),this.viewportSize_=[100,100],this.targetCenter_=null,this.nextCenter_=null,this.cancelAnchor_=void 0,M.projection&&(0,U.h_)(),M.center&&(M.center=(0,U.Vs)(M.center,this.projection_)),M.extent&&(M.extent=(0,U.dY)(M.extent,this.projection_)),this.applyOptions_(M)}applyOptions_(M){const C=Object.assign({},M);for(const st in k.Z)delete C[st];this.setProperties(C,!0);const N=function W(b){let M,C,N,Y=void 0!==b.minZoom?b.minZoom:0,st=void 0!==b.maxZoom?b.maxZoom:28;const ht=void 0!==b.zoomFactor?b.zoomFactor:2,Tt=void 0!==b.multiWorld&&b.multiWorld,vt=void 0===b.smoothResolutionConstraint||b.smoothResolutionConstraint,Ct=void 0!==b.showFullExtent&&b.showFullExtent,bt=(0,U.UQ)(b.projection,"EPSG:3857"),Gt=bt.getExtent();let kt=b.constrainOnlyCenter,ie=b.extent;if(!Tt&&!ie&&bt.isGlobal()&&(kt=!1,ie=Gt),void 0!==b.resolutions){const zt=b.resolutions;C=zt[Y],N=void 0!==zt[st]?zt[st]:zt[zt.length-1],M=b.constrainResolution?function h(b,M,C,N){return M=void 0===M||M,function(H,it,Y,st){if(void 0!==H){const ht=b[0],Tt=b[b.length-1],vt=C?f(ht,C,Y,N):ht;if(st)return M?n(H,vt,Tt):(0,p.uZ)(H,Tt,vt);const Ct=Math.min(vt,H),bt=Math.floor((0,s.h7)(b,Ct,it));return b[bt]>vt&&bt<b.length-1?b[bt+1]:b[bt]}}}(zt,vt,!kt&&ie,Ct):e(C,N,vt,!kt&&ie,Ct)}else{const ue=(Gt?Math.max((0,c.dz)(Gt),(0,c.Cr)(Gt)):360*U.Wm.degrees/bt.getMetersPerUnit())/z.S/Math.pow(2,0),de=ue/Math.pow(2,28);C=b.maxResolution,void 0!==C?Y=0:C=ue/Math.pow(ht,Y),N=b.minResolution,void 0===N&&(N=void 0!==b.maxZoom?void 0!==b.maxResolution?C/Math.pow(ht,st):ue/Math.pow(ht,st):de),st=Y+Math.floor(Math.log(C/N)/Math.log(ht)),N=C/Math.pow(ht,st-Y),M=b.constrainResolution?function g(b,M,C,N,H,it){return N=void 0===N||N,C=void 0!==C?C:0,function(Y,st,ht,Tt){if(void 0!==Y){const vt=H?f(M,H,ht,it):M;if(Tt)return N?n(Y,vt,C):(0,p.uZ)(Y,C,vt);const Ct=1e-9,bt=Math.ceil(Math.log(M/vt)/Math.log(b)-Ct),Gt=-st*(.5-Ct)+.5,kt=Math.min(vt,Y),ie=Math.floor(Math.log(M/kt)/Math.log(b)+Gt),zt=Math.max(bt,ie),ue=M/Math.pow(b,zt);return(0,p.uZ)(ue,C,vt)}}}(ht,C,N,vt,!kt&&ie,Ct):e(C,N,vt,!kt&&ie,Ct)}return{constraint:M,maxResolution:C,minResolution:N,minZoom:Y,zoomFactor:ht}}(M);this.maxResolution_=N.maxResolution,this.minResolution_=N.minResolution,this.zoomFactor_=N.zoomFactor,this.resolutions_=M.resolutions,this.padding_=M.padding,this.minZoom_=N.minZoom;const H=function R(b){if(void 0!==b.extent)return d(b.extent,b.constrainOnlyCenter,void 0===b.smoothExtentConstraint||b.smoothExtentConstraint);const M=(0,U.UQ)(b.projection,"EPSG:3857");if(!0!==b.multiWorld&&M.isGlobal()){const C=M.getExtent().slice();return C[0]=-1/0,C[2]=1/0,d(C,!1,!1)}return u}(M),it=N.constraint,Y=function K(b){if(void 0===b.enableRotation||b.enableRotation){const C=b.constrainRotation;return void 0===C||!0===C?(0,E.Gw)():!1===C?E.YP:"number"==typeof C?(0,E.gE)(C):E.YP}return E.h$}(M);this.constraints_={center:H,resolution:it,rotation:Y},this.setRotation(void 0!==M.rotation?M.rotation:0),this.setCenterInternal(void 0!==M.center?M.center:null),void 0!==M.resolution?this.setResolution(M.resolution):void 0!==M.zoom&&this.setZoom(M.zoom)}get padding(){return this.padding_}set padding(M){let C=this.padding_;this.padding_=M;const N=this.getCenterInternal();if(N){const H=M||[0,0,0,0];C=C||[0,0,0,0];const it=this.getResolution();this.setCenterInternal([N[0]+it/2*(H[3]-C[3]+C[1]-H[1]),N[1]-it/2*(H[0]-C[0]+C[2]-H[2])])}}getUpdatedOptions_(M){const C=this.getProperties();return void 0!==C.resolution?C.resolution=this.getResolution():C.zoom=this.getZoom(),C.center=this.getCenterInternal(),C.rotation=this.getRotation(),Object.assign({},C,M)}animate(M){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);const C=new Array(arguments.length);for(let N=0;N<C.length;++N){let H=arguments[N];H.center&&(H=Object.assign({},H),H.center=(0,U.Vs)(H.center,this.getProjection())),H.anchor&&(H=Object.assign({},H),H.anchor=(0,U.Vs)(H.anchor,this.getProjection())),C[N]=H}this.animateInternal.apply(this,C)}animateInternal(M){let N,C=arguments.length;C>1&&"function"==typeof arguments[C-1]&&(N=arguments[C-1],--C);let H=0;for(;H<C&&!this.isDef();++H){const vt=arguments[H];vt.center&&this.setCenterInternal(vt.center),void 0!==vt.zoom?this.setZoom(vt.zoom):vt.resolution&&this.setResolution(vt.resolution),void 0!==vt.rotation&&this.setRotation(vt.rotation)}if(H===C)return void(N&&y(N,!0));let it=Date.now(),Y=this.targetCenter_.slice(),st=this.targetResolution_,ht=this.targetRotation_;const Tt=[];for(;H<C;++H){const vt=arguments[H],Ct={start:it,complete:!1,anchor:vt.anchor,duration:void 0!==vt.duration?vt.duration:1e3,easing:vt.easing||v.rd,callback:N};if(vt.center&&(Ct.sourceCenter=Y,Ct.targetCenter=vt.center.slice(),Y=Ct.targetCenter),void 0!==vt.zoom?(Ct.sourceResolution=st,Ct.targetResolution=this.getResolutionForZoom(vt.zoom),st=Ct.targetResolution):vt.resolution&&(Ct.sourceResolution=st,Ct.targetResolution=vt.resolution,st=Ct.targetResolution),void 0!==vt.rotation){Ct.sourceRotation=ht;const bt=(0,p.$W)(vt.rotation-ht+Math.PI,2*Math.PI)-Math.PI;Ct.targetRotation=ht+bt,ht=Ct.targetRotation}(b=Ct).sourceCenter&&b.targetCenter&&!(0,S.fS)(b.sourceCenter,b.targetCenter)||b.sourceResolution!==b.targetResolution||b.sourceRotation!==b.targetRotation?it+=Ct.duration:Ct.complete=!0,Tt.push(Ct)}var b;this.animations_.push(Tt),this.setHint(D.Z.ANIMATING,1),this.updateAnimations_()}getAnimating(){return this.hints_[D.Z.ANIMATING]>0}getInteracting(){return this.hints_[D.Z.INTERACTING]>0}cancelAnimations(){let M;this.setHint(D.Z.ANIMATING,-this.hints_[D.Z.ANIMATING]);for(let C=0,N=this.animations_.length;C<N;++C){const H=this.animations_[C];if(H[0].callback&&y(H[0].callback,!1),!M)for(let it=0,Y=H.length;it<Y;++it){const st=H[it];if(!st.complete){M=st.anchor;break}}}this.animations_.length=0,this.cancelAnchor_=M,this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN}updateAnimations_(){if(void 0!==this.updateAnimationKey_&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),!this.getAnimating())return;const M=Date.now();let C=!1;for(let N=this.animations_.length-1;N>=0;--N){const H=this.animations_[N];let it=!0;for(let Y=0,st=H.length;Y<st;++Y){const ht=H[Y];if(ht.complete)continue;const Tt=M-ht.start;let vt=ht.duration>0?Tt/ht.duration:1;vt>=1?(ht.complete=!0,vt=1):it=!1;const Ct=ht.easing(vt);if(ht.sourceCenter){const bt=ht.sourceCenter[0],Gt=ht.sourceCenter[1],kt=ht.targetCenter[0],ie=ht.targetCenter[1];this.nextCenter_=ht.targetCenter,this.targetCenter_=[bt+Ct*(kt-bt),Gt+Ct*(ie-Gt)]}if(ht.sourceResolution&&ht.targetResolution){const bt=1===Ct?ht.targetResolution:ht.sourceResolution+Ct*(ht.targetResolution-ht.sourceResolution);if(ht.anchor){const Gt=this.getViewportSize_(this.getRotation()),kt=this.constraints_.resolution(bt,0,Gt,!0);this.targetCenter_=this.calculateCenterZoom(kt,ht.anchor)}this.nextResolution_=ht.targetResolution,this.targetResolution_=bt,this.applyTargetState_(!0)}if(void 0!==ht.sourceRotation&&void 0!==ht.targetRotation){const bt=1===Ct?(0,p.$W)(ht.targetRotation+Math.PI,2*Math.PI)-Math.PI:ht.sourceRotation+Ct*(ht.targetRotation-ht.sourceRotation);if(ht.anchor){const Gt=this.constraints_.rotation(bt,!0);this.targetCenter_=this.calculateCenterRotate(Gt,ht.anchor)}this.nextRotation_=ht.targetRotation,this.targetRotation_=bt}if(this.applyTargetState_(!0),C=!0,!ht.complete)break}if(it){this.animations_[N]=null,this.setHint(D.Z.ANIMATING,-1),this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN;const Y=H[0].callback;Y&&y(Y,!0)}}this.animations_=this.animations_.filter(Boolean),C&&void 0===this.updateAnimationKey_&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)))}calculateCenterRotate(M,C){let N;const H=this.getCenterInternal();return void 0!==H&&(N=[H[0]-C[0],H[1]-C[1]],(0,S.U1)(N,M-this.getRotation()),(0,S.IH)(N,C)),N}calculateCenterZoom(M,C){let N;const H=this.getCenterInternal(),it=this.getResolution();return void 0!==H&&void 0!==it&&(N=[C[0]-M*(C[0]-H[0])/it,C[1]-M*(C[1]-H[1])/it]),N}getViewportSize_(M){const C=this.viewportSize_;if(M){const N=C[0],H=C[1];return[Math.abs(N*Math.cos(M))+Math.abs(H*Math.sin(M)),Math.abs(N*Math.sin(M))+Math.abs(H*Math.cos(M))]}return C}setViewportSize(M){this.viewportSize_=Array.isArray(M)?M.slice():[100,100],this.getAnimating()||this.resolveConstraints(0)}getCenter(){const M=this.getCenterInternal();return M&&(0,U.lO)(M,this.getProjection())}getCenterInternal(){return this.get(k.Z.CENTER)}getConstraints(){return this.constraints_}getConstrainResolution(){return this.get("constrainResolution")}getHints(M){return void 0!==M?(M[0]=this.hints_[0],M[1]=this.hints_[1],M):this.hints_.slice()}calculateExtent(M){const C=this.calculateExtentInternal(M);return(0,U.Fj)(C,this.getProjection())}calculateExtentInternal(M){M=M||this.getViewportSizeMinusPadding_();const C=this.getCenterInternal();(0,P.h)(C,1);const N=this.getResolution();(0,P.h)(void 0!==N,2);const H=this.getRotation();return(0,P.h)(void 0!==H,3),(0,c.p8)(C,N,H,M)}getMaxResolution(){return this.maxResolution_}getMinResolution(){return this.minResolution_}getMaxZoom(){return this.getZoomForResolution(this.minResolution_)}setMaxZoom(M){this.applyOptions_(this.getUpdatedOptions_({maxZoom:M}))}getMinZoom(){return this.getZoomForResolution(this.maxResolution_)}setMinZoom(M){this.applyOptions_(this.getUpdatedOptions_({minZoom:M}))}setConstrainResolution(M){this.applyOptions_(this.getUpdatedOptions_({constrainResolution:M}))}getProjection(){return this.projection_}getResolution(){return this.get(k.Z.RESOLUTION)}getResolutions(){return this.resolutions_}getResolutionForExtent(M,C){return this.getResolutionForExtentInternal((0,U.dY)(M,this.getProjection()),C)}getResolutionForExtentInternal(M,C){C=C||this.getViewportSizeMinusPadding_();const N=(0,c.dz)(M)/C[0],H=(0,c.Cr)(M)/C[1];return Math.max(N,H)}getResolutionForValueFunction(M){M=M||2;const C=this.getConstrainedResolution(this.maxResolution_),H=Math.log(C/this.minResolution_)/Math.log(M);return function(it){return C/Math.pow(M,it*H)}}getRotation(){return this.get(k.Z.ROTATION)}getValueForResolutionFunction(M){const C=Math.log(M||2),N=this.getConstrainedResolution(this.maxResolution_),it=Math.log(N/this.minResolution_)/C;return function(Y){return Math.log(N/Y)/C/it}}getViewportSizeMinusPadding_(M){let C=this.getViewportSize_(M);const N=this.padding_;return N&&(C=[C[0]-N[1]-N[3],C[1]-N[0]-N[2]]),C}getState(){const M=this.getProjection(),C=this.getResolution(),N=this.getRotation();let H=this.getCenterInternal();const it=this.padding_;if(it){const Y=this.getViewportSizeMinusPadding_();H=A(H,this.getViewportSize_(),[Y[0]/2+it[3],Y[1]/2+it[0]],C,N)}return{center:H.slice(0),projection:void 0!==M?M:null,resolution:C,nextCenter:this.nextCenter_,nextResolution:this.nextResolution_,nextRotation:this.nextRotation_,rotation:N,zoom:this.getZoom()}}getViewStateAndExtent(){return{viewState:this.getState(),extent:this.calculateExtent()}}getZoom(){let M;const C=this.getResolution();return void 0!==C&&(M=this.getZoomForResolution(C)),M}getZoomForResolution(M){let N,H,C=this.minZoom_||0;if(this.resolutions_){const it=(0,s.h7)(this.resolutions_,M,1);C=it,N=this.resolutions_[it],H=it==this.resolutions_.length-1?2:N/this.resolutions_[it+1]}else N=this.maxResolution_,H=this.zoomFactor_;return C+Math.log(N/M)/Math.log(H)}getResolutionForZoom(M){if(this.resolutions_){if(this.resolutions_.length<=1)return 0;const C=(0,p.uZ)(Math.floor(M),0,this.resolutions_.length-2);return this.resolutions_[C]/Math.pow(this.resolutions_[C]/this.resolutions_[C+1],(0,p.uZ)(M-C,0,1))}return this.maxResolution_/Math.pow(this.zoomFactor_,M-this.minZoom_)}fit(M,C){let N;if((0,P.h)(Array.isArray(M)||"function"==typeof M.getSimplifiedGeometry,24),Array.isArray(M)){(0,P.h)(!(0,c.xb)(M),25);const H=(0,U.dY)(M,this.getProjection());N=(0,x.oJ)(H)}else if("Circle"===M.getType()){const H=(0,U.dY)(M.getExtent(),this.getProjection());N=(0,x.oJ)(H),N.rotate(this.getRotation(),(0,c.qg)(H))}else{const H=(0,U.Cs)();N=H?M.clone().transform(H,this.getProjection()):M}this.fitInternal(N,C)}rotatedExtentForGeometry(M){const C=this.getRotation(),N=Math.cos(C),H=Math.sin(-C),it=M.getFlatCoordinates(),Y=M.getStride();let st=1/0,ht=1/0,Tt=-1/0,vt=-1/0;for(let Ct=0,bt=it.length;Ct<bt;Ct+=Y){const Gt=it[Ct]*N-it[Ct+1]*H,kt=it[Ct]*H+it[Ct+1]*N;st=Math.min(st,Gt),ht=Math.min(ht,kt),Tt=Math.max(Tt,Gt),vt=Math.max(vt,kt)}return[st,ht,Tt,vt]}fitInternal(M,C){let N=(C=C||{}).size;N||(N=this.getViewportSizeMinusPadding_());const H=void 0!==C.padding?C.padding:[0,0,0,0],it=void 0!==C.nearest&&C.nearest;let Y;Y=void 0!==C.minResolution?C.minResolution:void 0!==C.maxZoom?this.getResolutionForZoom(C.maxZoom):0;const st=this.rotatedExtentForGeometry(M);let ht=this.getResolutionForExtentInternal(st,[N[0]-H[1]-H[3],N[1]-H[0]-H[2]]);ht=isNaN(ht)?Y:Math.max(ht,Y),ht=this.getConstrainedResolution(ht,it?0:1);const Tt=this.getRotation(),vt=Math.sin(Tt),Ct=Math.cos(Tt),bt=(0,c.qg)(st);bt[0]+=(H[1]-H[3])/2*ht,bt[1]+=(H[0]-H[2])/2*ht;const ie=this.getConstrainedCenter([bt[0]*Ct-bt[1]*vt,bt[1]*Ct+bt[0]*vt],ht),zt=C.callback?C.callback:I.Zn;void 0!==C.duration?this.animateInternal({resolution:ht,center:ie,duration:C.duration,easing:C.easing},zt):(this.targetResolution_=ht,this.targetCenter_=ie,this.applyTargetState_(!1,!0),y(zt,!0))}centerOn(M,C,N){this.centerOnInternal((0,U.Vs)(M,this.getProjection()),C,N)}centerOnInternal(M,C,N){this.setCenterInternal(A(M,C,N,this.getResolution(),this.getRotation()))}calculateCenterShift(M,C,N,H){let it;const Y=this.padding_;if(Y&&M){const st=this.getViewportSizeMinusPadding_(-N),ht=A(M,H,[st[0]/2+Y[3],st[1]/2+Y[0]],C,N);it=[M[0]-ht[0],M[1]-ht[1]]}return it}isDef(){return!!this.getCenterInternal()&&void 0!==this.getResolution()}adjustCenter(M){const C=(0,U.lO)(this.targetCenter_,this.getProjection());this.setCenter([C[0]+M[0],C[1]+M[1]])}adjustCenterInternal(M){const C=this.targetCenter_;this.setCenterInternal([C[0]+M[0],C[1]+M[1]])}adjustResolution(M,C){C=C&&(0,U.Vs)(C,this.getProjection()),this.adjustResolutionInternal(M,C)}adjustResolutionInternal(M,C){const N=this.getAnimating()||this.getInteracting(),H=this.getViewportSize_(this.getRotation()),it=this.constraints_.resolution(this.targetResolution_*M,0,H,N);C&&(this.targetCenter_=this.calculateCenterZoom(it,C)),this.targetResolution_*=M,this.applyTargetState_()}adjustZoom(M,C){this.adjustResolution(Math.pow(this.zoomFactor_,-M),C)}adjustRotation(M,C){C&&(C=(0,U.Vs)(C,this.getProjection())),this.adjustRotationInternal(M,C)}adjustRotationInternal(M,C){const N=this.getAnimating()||this.getInteracting(),H=this.constraints_.rotation(this.targetRotation_+M,N);C&&(this.targetCenter_=this.calculateCenterRotate(H,C)),this.targetRotation_+=M,this.applyTargetState_()}setCenter(M){this.setCenterInternal(M&&(0,U.Vs)(M,this.getProjection()))}setCenterInternal(M){this.targetCenter_=M,this.applyTargetState_()}setHint(M,C){return this.hints_[M]+=C,this.changed(),this.hints_[M]}setResolution(M){this.targetResolution_=M,this.applyTargetState_()}setRotation(M){this.targetRotation_=M,this.applyTargetState_()}setZoom(M){this.setResolution(this.getResolutionForZoom(M))}applyTargetState_(M,C){const N=this.getAnimating()||this.getInteracting()||C,H=this.constraints_.rotation(this.targetRotation_,N),it=this.getViewportSize_(H),Y=this.constraints_.resolution(this.targetResolution_,0,it,N),st=this.constraints_.center(this.targetCenter_,Y,it,N,this.calculateCenterShift(this.targetCenter_,Y,H,it));this.get(k.Z.ROTATION)!==H&&this.set(k.Z.ROTATION,H),this.get(k.Z.RESOLUTION)!==Y&&(this.set(k.Z.RESOLUTION,Y),this.set("zoom",this.getZoom(),!0)),(!st||!this.get(k.Z.CENTER)||!(0,S.fS)(this.get(k.Z.CENTER),st))&&this.set(k.Z.CENTER,st),this.getAnimating()&&!M&&this.cancelAnimations(),this.cancelAnchor_=void 0}resolveConstraints(M,C,N){M=void 0!==M?M:200;const H=C||0,it=this.constraints_.rotation(this.targetRotation_),Y=this.getViewportSize_(it),st=this.constraints_.resolution(this.targetResolution_,H,Y),ht=this.constraints_.center(this.targetCenter_,st,Y,!1,this.calculateCenterShift(this.targetCenter_,st,it,Y));if(0===M&&!this.cancelAnchor_)return this.targetResolution_=st,this.targetRotation_=it,this.targetCenter_=ht,void this.applyTargetState_();N=N||(0===M?this.cancelAnchor_:void 0),this.cancelAnchor_=void 0,(this.getResolution()!==st||this.getRotation()!==it||!this.getCenterInternal()||!(0,S.fS)(this.getCenterInternal(),ht))&&(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:it,center:ht,resolution:st,duration:M,easing:v.Vv,anchor:N}))}beginInteraction(){this.resolveConstraints(0),this.setHint(D.Z.INTERACTING,1)}endInteraction(M,C,N){N=N&&(0,U.Vs)(N,this.getProjection()),this.endInteractionInternal(M,C,N)}endInteractionInternal(M,C,N){!this.getInteracting()||(this.setHint(D.Z.INTERACTING,-1),this.resolveConstraints(M,C,N))}getConstrainedCenter(M,C){const N=this.getViewportSize_(this.getRotation());return this.constraints_.center(M,C||this.getResolution(),N)}getConstrainedZoom(M,C){const N=this.getResolutionForZoom(M);return this.getZoomForResolution(this.getConstrainedResolution(N,C))}getConstrainedResolution(M,C){C=C||0;const N=this.getViewportSize_(this.getRotation());return this.constraints_.resolution(M,C,N)}}},9500:(Bt,ot,a)=>{"use strict";a.d(ot,{Z:()=>G});const G={ANIMATING:0,INTERACTING:1}},1266:(Bt,ot,a)=>{"use strict";a.d(ot,{Z:()=>G});const G={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"}},142:(Bt,ot,a)=>{"use strict";function G(d,u,c){let s,f;c=c||D;let n=0,h=d.length,g=!1;for(;n<h;)s=n+(h-n>>1),f=+c(d[s],u),f<0?n=s+1:(h=s,g=!f);return g?n:~n}function D(d,u){return d>u?1:d<u?-1:0}function k(d,u,c){const s=d.length;if(d[0]<=u)return 0;if(u<=d[s-1])return s-1;let f;if(c>0){for(f=1;f<s;++f)if(d[f]<u)return f-1}else if(c<0){for(f=1;f<s;++f)if(d[f]<=u)return f}else for(f=1;f<s;++f){if(d[f]==u)return f;if(d[f]<u)return"function"==typeof c?c(u,d[f-1],d[f])>0?f-1:f:d[f-1]-u<u-d[f]?f-1:f}return s-1}function z(d,u,c){for(;u<c;){const s=d[u];d[u]=d[c],d[c]=s,++u,--c}}function U(d,u){const c=Array.isArray(u)?u:[u],s=c.length;for(let f=0;f<s;f++)d[d.length]=c[f]}function S(d,u){const c=d.length;if(c!==u.length)return!1;for(let s=0;s<c;s++)if(d[s]!==u[s])return!1;return!0}function p(d,u,c){const s=u||D;return d.every(function(f,n){if(0===n)return!0;const h=s(d[n-1],f);return!(h>0||c&&0===h)})}a.d(ot,{FZ:()=>z,fS:()=>S,h7:()=>k,j2:()=>D,l7:()=>U,pT:()=>p,ry:()=>G})},992:(Bt,ot,a)=>{"use strict";a.d(ot,{h:()=>D});var G=a(1955);function D(k,z){if(!k)throw new G.Z(z)}},866:(Bt,ot,a)=>{"use strict";a.d(ot,{BB:()=>u,XC:()=>U,_2:()=>P});var G=a(992),D=a(4331);const k=/^#([a-f0-9]{3}|[a-f0-9]{4}(?:[a-f0-9]{2}){0,2})$/i,z=/^([a-z]*)$|^hsla?\(.*\)$/i;function U(s){return"string"==typeof s?s:u(s)}const S=function(){const f={};let n=0;return function(h){let g;if(f.hasOwnProperty(h))g=f[h];else{if(n>=1024){let e=0;for(const E in f)0==(3&e++)&&(delete f[E],--n)}g=function p(s){let f,n,h,g,e;if(z.exec(s)&&(s=function I(s){const f=document.createElement("div");if(f.style.color=s,""!==f.style.color){document.body.appendChild(f);const n=getComputedStyle(f).color;return document.body.removeChild(f),n}return""}(s)),k.exec(s)){const E=s.length-1;let v;v=E<=4?1:2;const x=4===E||8===E;f=parseInt(s.substr(1+0*v,v),16),n=parseInt(s.substr(1+1*v,v),16),h=parseInt(s.substr(1+2*v,v),16),g=x?parseInt(s.substr(1+3*v,v),16):255,1==v&&(f=(f<<4)+f,n=(n<<4)+n,h=(h<<4)+h,x&&(g=(g<<4)+g)),e=[f,n,h,g/255]}else s.startsWith("rgba(")?(e=s.slice(5,-1).split(",").map(Number),d(e)):s.startsWith("rgb(")?(e=s.slice(4,-1).split(",").map(Number),e.push(1),d(e)):(0,G.h)(!1,14);return e}(h),f[h]=g,++n}return g}}();function P(s){return Array.isArray(s)?s:S(s)}function d(s){return s[0]=(0,D.uZ)(s[0]+.5|0,0,255),s[1]=(0,D.uZ)(s[1]+.5|0,0,255),s[2]=(0,D.uZ)(s[2]+.5|0,0,255),s[3]=(0,D.uZ)(s[3],0,1),s}function u(s){let f=s[0];f!=(0|f)&&(f=f+.5|0);let n=s[1];n!=(0|n)&&(n=n+.5|0);let h=s[2];return h!=(0|h)&&(h=h+.5|0),"rgba("+f+","+n+","+h+","+(void 0===s[3]?1:Math.round(100*s[3])/100)+")"}},4890:(Bt,ot,a)=>{"use strict";a.d(ot,{y:()=>D});var G=a(866);function D(k){return Array.isArray(k)?(0,G.BB)(k):k}},246:(Bt,ot,a)=>{"use strict";a.d(ot,{ZK:()=>U});const G_warn=2;let D=1;function U(...S){D>G_warn||console.warn(...S)}},9633:(Bt,ot,a)=>{"use strict";a.d(ot,{Z:()=>S});var G=a(6581),D=a(3044),k=a(1119),z=a(142),U=a(3842);const S=class I extends G.Z{constructor(p){p=p||{},super({element:document.createElement("div"),render:p.render,target:p.target}),this.ulElement_=document.createElement("ul"),this.collapsed_=void 0===p.collapsed||p.collapsed,this.userCollapsed_=this.collapsed_,this.overrideCollapsible_=void 0!==p.collapsible,this.collapsible_=void 0===p.collapsible||p.collapsible,this.collapsible_||(this.collapsed_=!1);const d=void 0!==p.className?p.className:"ol-attribution",u=void 0!==p.tipLabel?p.tipLabel:"Attributions",c=void 0!==p.expandClassName?p.expandClassName:d+"-expand",s=void 0!==p.collapseLabel?p.collapseLabel:"\u203a",f=void 0!==p.collapseClassName?p.collapseClassName:d+"-collapse";"string"==typeof s?(this.collapseLabel_=document.createElement("span"),this.collapseLabel_.textContent=s,this.collapseLabel_.className=f):this.collapseLabel_=s;const n=void 0!==p.label?p.label:"i";"string"==typeof n?(this.label_=document.createElement("span"),this.label_.textContent=n,this.label_.className=c):this.label_=n;const h=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_;this.toggleButton_=document.createElement("button"),this.toggleButton_.setAttribute("type","button"),this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_)),this.toggleButton_.title=u,this.toggleButton_.appendChild(h),this.toggleButton_.addEventListener(D.Z.CLICK,this.handleClick_.bind(this),!1);const e=this.element;e.className=d+" "+k.XV+" "+k.hg+(this.collapsed_&&this.collapsible_?" "+k.hN:"")+(this.collapsible_?"":" ol-uncollapsible"),e.appendChild(this.toggleButton_),e.appendChild(this.ulElement_),this.renderedAttributions_=[],this.renderedVisible_=!0}collectSourceAttributions_(p){const d=Array.from(new Set(this.getMap().getAllLayers().flatMap(c=>c.getAttributions(p)))),u=!this.getMap().getAllLayers().some(c=>c.getSource()&&!1===c.getSource().getAttributionsCollapsible());return this.overrideCollapsible_||this.setCollapsible(u),d}updateElement_(p){if(!p)return void(this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1));const d=this.collectSourceAttributions_(p),u=d.length>0;if(this.renderedVisible_!=u&&(this.element.style.display=u?"":"none",this.renderedVisible_=u),!(0,z.fS)(d,this.renderedAttributions_)){(0,U.ep)(this.ulElement_);for(let c=0,s=d.length;c<s;++c){const f=document.createElement("li");f.innerHTML=d[c],this.ulElement_.appendChild(f)}this.renderedAttributions_=d}}handleClick_(p){p.preventDefault(),this.handleToggle_(),this.userCollapsed_=this.collapsed_}handleToggle_(){this.element.classList.toggle(k.hN),this.collapsed_?(0,U.$H)(this.collapseLabel_,this.label_):(0,U.$H)(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_,this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_))}getCollapsible(){return this.collapsible_}setCollapsible(p){this.collapsible_!==p&&(this.collapsible_=p,this.element.classList.toggle("ol-uncollapsible"),this.userCollapsed_&&this.handleToggle_())}setCollapsed(p){this.userCollapsed_=p,this.collapsible_&&this.collapsed_!==p&&this.handleToggle_()}getCollapsed(){return this.collapsed_}render(p){this.updateElement_(p.frameState)}}},6581:(Bt,ot,a)=>{"use strict";a.d(ot,{Z:()=>S});var G=a(4115),D=a(9806),k=a(1334),z=a(2716),U=a(3842);const S=class I extends G.Z{constructor(p){super();const d=p.element;d&&!p.target&&!d.style.pointerEvents&&(d.style.pointerEvents="auto"),this.element=d||null,this.target_=null,this.map_=null,this.listenerKeys=[],p.render&&(this.render=p.render),p.target&&this.setTarget(p.target)}disposeInternal(){(0,U.ZF)(this.element),super.disposeInternal()}getMap(){return this.map_}setMap(p){this.map_&&(0,U.ZF)(this.element);for(let d=0,u=this.listenerKeys.length;d<u;++d)(0,z.bN)(this.listenerKeys[d]);this.listenerKeys.length=0,this.map_=p,p&&((this.target_?this.target_:p.getOverlayContainerStopEvent()).appendChild(this.element),this.render!==k.Zn&&this.listenerKeys.push((0,z.oL)(p,D.Z.POSTRENDER,this.render,this)),p.render())}render(p){}setTarget(p){this.target_="string"==typeof p?document.getElementById(p):p}}},5267:(Bt,ot,a)=>{"use strict";a.d(ot,{Z:()=>I});var G=a(6581),D=a(3044),k=a(1119),z=a(4720);const I=class U extends G.Z{constructor(P){P=P||{},super({element:document.createElement("div"),render:P.render,target:P.target});const p=void 0!==P.className?P.className:"ol-rotate",d=void 0!==P.label?P.label:"\u21e7",u=void 0!==P.compassClassName?P.compassClassName:"ol-compass";this.label_=null,"string"==typeof d?(this.label_=document.createElement("span"),this.label_.className=u,this.label_.textContent=d):(this.label_=d,this.label_.classList.add(u));const c=P.tipLabel?P.tipLabel:"Reset rotation",s=document.createElement("button");s.className=p+"-reset",s.setAttribute("type","button"),s.title=c,s.appendChild(this.label_),s.addEventListener(D.Z.CLICK,this.handleClick_.bind(this),!1);const n=this.element;n.className=p+" "+k.XV+" "+k.hg,n.appendChild(s),this.callResetNorth_=P.resetNorth?P.resetNorth:void 0,this.duration_=void 0!==P.duration?P.duration:250,this.autoHide_=void 0===P.autoHide||P.autoHide,this.rotation_=void 0,this.autoHide_&&this.element.classList.add(k.oj)}handleClick_(P){P.preventDefault(),void 0!==this.callResetNorth_?this.callResetNorth_():this.resetNorth_()}resetNorth_(){const p=this.getMap().getView();if(!p)return;const d=p.getRotation();void 0!==d&&(this.duration_>0&&d%(2*Math.PI)!=0?p.animate({rotation:0,duration:this.duration_,easing:z.Vv}):p.setRotation(0))}render(P){const p=P.frameState;if(!p)return;const d=p.viewState.rotation;if(d!=this.rotation_){const u="rotate("+d+"rad)";if(this.autoHide_){const c=this.element.classList.contains(k.oj);c||0!==d?c&&0!==d&&this.element.classList.remove(k.oj):this.element.classList.add(k.oj)}this.label_.style.transform=u}this.rotation_=d}}},1014:(Bt,ot,a)=>{"use strict";a.d(ot,{Z:()=>I});var G=a(6581),D=a(3044),k=a(1119),z=a(4720);const I=class U extends G.Z{constructor(P){P=P||{},super({element:document.createElement("div"),target:P.target});const p=void 0!==P.className?P.className:"ol-zoom",d=void 0!==P.delta?P.delta:1,u=void 0!==P.zoomInClassName?P.zoomInClassName:p+"-in",c=void 0!==P.zoomOutClassName?P.zoomOutClassName:p+"-out",s=void 0!==P.zoomInLabel?P.zoomInLabel:"+",f=void 0!==P.zoomOutLabel?P.zoomOutLabel:"\u2013",n=void 0!==P.zoomInTipLabel?P.zoomInTipLabel:"Zoom in",h=void 0!==P.zoomOutTipLabel?P.zoomOutTipLabel:"Zoom out",g=document.createElement("button");g.className=u,g.setAttribute("type","button"),g.title=n,g.appendChild("string"==typeof s?document.createTextNode(s):s),g.addEventListener(D.Z.CLICK,this.handleClick_.bind(this,d),!1);const e=document.createElement("button");e.className=c,e.setAttribute("type","button"),e.title=h,e.appendChild("string"==typeof f?document.createTextNode(f):f),e.addEventListener(D.Z.CLICK,this.handleClick_.bind(this,-d),!1);const v=this.element;v.className=p+" "+k.XV+" "+k.hg,v.appendChild(g),v.appendChild(e),this.duration_=void 0!==P.duration?P.duration:250}handleClick_(P,p){p.preventDefault(),this.zoomByDelta_(P)}zoomByDelta_(P){const d=this.getMap().getView();if(!d)return;const u=d.getZoom();if(void 0!==u){const c=d.getConstrainedZoom(u+P);this.duration_>0?(d.getAnimating()&&d.cancelAnimations(),d.animate({zoom:c,duration:this.duration_,easing:z.Vv})):d.setZoom(c)}}}},5415:(Bt,ot,a)=>{"use strict";a.d(ot,{Cf:()=>e,I8:()=>P,IH:()=>z,U1:()=>u,bA:()=>c,fS:()=>d,jk:()=>E,yZ:()=>g});var G=a(9543),D=a(4331),k=a(7531);function z(v,x){return v[0]+=+x[0],v[1]+=+x[1],v}function P(v,x,w){const O=(0,D.$W)(x+180,360)-180,y=Math.abs(3600*O),R=w||0;let W=Math.floor(y/3600),K=Math.floor((y-3600*W)/60),nt=(0,D.FH)(y-3600*W-60*K,R);nt>=60&&(nt=0,K+=1),K>=60&&(K=0,W+=1);let A=W+"\xb0";return(0!==K||0!==nt)&&(A+=" "+(0,k.v)(K,2)+"\u2032"),0!==nt&&(A+=" "+(0,k.v)(nt,2,R)+"\u2033"),0!==O&&(A+=" "+v.charAt(O<0?1:0)),A}function d(v,x){let w=!0;for(let O=v.length-1;O>=0;--O)if(v[O]!=x[O]){w=!1;break}return w}function u(v,x){const w=Math.cos(x),O=Math.sin(x),R=v[1]*w+v[0]*O;return v[0]=v[0]*w-v[1]*O,v[1]=R,v}function c(v,x){return v[0]*=x,v[1]*=x,v}function g(v,x){return function p(v,x,w){return v?x.replace("{x}",v[0].toFixed(w)).replace("{y}",v[1].toFixed(w)):""}(v,"{x}, {y}",x)}function e(v,x){if(x.canWrapX()){const w=(0,G.dz)(x.getExtent()),O=E(v,x,w);O&&(v[0]-=O*w)}return v}function E(v,x,w){const O=x.getExtent();let y=0;return x.canWrapX()&&(v[0]<O[0]||v[0]>O[2])&&(w=w||(0,G.dz)(O),y=Math.floor((v[0]-O[0])/w)),y}},1119:(Bt,ot,a)=>{"use strict";a.d(ot,{$A:()=>D,Qi:()=>z,XV:()=>k,hN:()=>I,hg:()=>U,oj:()=>G,p:()=>p});const G="ol-hidden",D="ol-selectable",k="ol-unselectable",z="ol-unsupported",U="ol-control",I="ol-collapsed",S=new RegExp(["^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)","(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?","(?:small|large)|medium|smaller|larger|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))","(?:\\s*\\/\\s*(normal|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])?))","?\\s*([-,\\\"\\'\\sa-z]+?)\\s*$"].join(""),"i"),P=["style","variant","weight","size","lineHeight","family"],p=function(d){const u=d.match(S);if(!u)return null;const c={lineHeight:"normal",size:"1.2em",style:"normal",weight:"normal",variant:"normal"};for(let s=0,f=P.length;s<f;++s){const n=u[s+1];void 0!==n&&(c[P[s]]=n)}return c.families=c.family.split(/,\s?/),c}},3842:(Bt,ot,a)=>{"use strict";a.d(ot,{$H:()=>I,E4:()=>D,Pb:()=>U,ZF:()=>S,ep:()=>P,hF:()=>p,iO:()=>z,jy:()=>k});var G=a(5063);function D(d,u,c,s){let f;return f=c&&c.length?c.shift():G.Id?new OffscreenCanvas(d||300,u||300):document.createElement("canvas"),d&&(f.width=d),u&&(f.height=u),f.getContext("2d",s)}function k(d){const u=d.canvas;u.width=1,u.height=1,d.clearRect(0,0,1,1)}function z(d){let u=d.offsetWidth;const c=getComputedStyle(d);return u+=parseInt(c.marginLeft,10)+parseInt(c.marginRight,10),u}function U(d){let u=d.offsetHeight;const c=getComputedStyle(d);return u+=parseInt(c.marginTop,10)+parseInt(c.marginBottom,10),u}function I(d,u){const c=u.parentNode;c&&c.replaceChild(d,u)}function S(d){return d&&d.parentNode?d.parentNode.removeChild(d):null}function P(d){for(;d.lastChild;)d.removeChild(d.lastChild)}function p(d,u){const c=d.childNodes;for(let s=0;;++s){const f=c[s],n=u[s];if(!f&&!n)break;if(f!==n){if(!f){d.appendChild(n);continue}if(!n){d.removeChild(f),--s;continue}d.insertBefore(n,f)}}}},4720:(Bt,ot,a)=>{"use strict";function G(I){return Math.pow(I,3)}function D(I){return 1-G(1-I)}function k(I){return 3*I*I-2*I*I*I}function z(I){return I}a.d(ot,{GE:()=>z,Vv:()=>D,YQ:()=>G,rd:()=>k})},2716:(Bt,ot,a)=>{"use strict";a.d(ot,{Vx:()=>k,bN:()=>z,oL:()=>D});var G=a(9306);function D(U,I,S,P,p){if(P&&P!==U&&(S=S.bind(P)),p){const u=S;S=function(){U.removeEventListener(I,S),u.apply(this,arguments)}}const d={target:U,type:I,listener:S};return U.addEventListener(I,S),d}function k(U,I,S,P){return D(U,I,S,P,!0)}function z(U){U&&U.target&&(U.target.removeEventListener(U.type,U.listener),(0,G.Z)(U))}},3615:(Bt,ot,a)=>{"use strict";a.d(ot,{ZP:()=>z});const z=class G{constructor(I){this.type=I,this.target=null}preventDefault(){this.defaultPrevented=!0}stopPropagation(){this.propagationStopped=!0}}},3044:(Bt,ot,a)=>{"use strict";a.d(ot,{Z:()=>G});const G={CHANGE:"change",ERROR:"error",BLUR:"blur",CLEAR:"clear",CONTEXTMENU:"contextmenu",CLICK:"click",DBLCLICK:"dblclick",DRAGENTER:"dragenter",DRAGOVER:"dragover",DROP:"drop",FOCUS:"focus",KEYDOWN:"keydown",KEYPRESS:"keypress",LOAD:"load",RESIZE:"resize",TOUCHMOVE:"touchmove",WHEEL:"wheel"}},1398:(Bt,ot,a)=>{"use strict";a.d(ot,{Z:()=>I});var G=a(6450),D=a(3615),k=a(1334),z=a(9306);const I=class U extends G.Z{constructor(P){super(),this.eventTarget_=P,this.pendingRemovals_=null,this.dispatching_=null,this.listeners_=null}addEventListener(P,p){if(!P||!p)return;const d=this.listeners_||(this.listeners_={}),u=d[P]||(d[P]=[]);u.includes(p)||u.push(p)}dispatchEvent(P){const p="string"==typeof P,d=p?P:P.type,u=this.listeners_&&this.listeners_[d];if(!u)return;const c=p?new D.ZP(P):P;c.target||(c.target=this.eventTarget_||this);const s=this.dispatching_||(this.dispatching_={}),f=this.pendingRemovals_||(this.pendingRemovals_={});let n;d in s||(s[d]=0,f[d]=0),++s[d];for(let h=0,g=u.length;h<g;++h)if(n="handleEvent"in u[h]?u[h].handleEvent(c):u[h].call(this,c),!1===n||c.propagationStopped){n=!1;break}if(0==--s[d]){let h=f[d];for(delete f[d];h--;)this.removeEventListener(d,k.Zn);delete s[d]}return n}disposeInternal(){this.listeners_&&(0,z.Z)(this.listeners_)}getListeners(P){return this.listeners_&&this.listeners_[P]||void 0}hasListener(P){return!!this.listeners_&&(P?P in this.listeners_:Object.keys(this.listeners_).length>0)}removeEventListener(P,p){const d=this.listeners_&&this.listeners_[P];if(d){const u=d.indexOf(p);-1!==u&&(this.pendingRemovals_&&P in this.pendingRemovals_?(d[u]=k.Zn,++this.pendingRemovals_[P]):(d.splice(u,1),0===d.length&&delete this.listeners_[P]))}}}},7963:(Bt,ot,a)=>{"use strict";a.d(ot,{$6:()=>z,Bx:()=>p,QL:()=>v,TN:()=>E,Xp:()=>O,aj:()=>I,rM:()=>h,v8:()=>u,vY:()=>e,yZ:()=>P});var G=a(1334),D=a(5063),k=a(992);function z(y){const R=arguments;return function(W){let K=!0;for(let nt=0,A=R.length;nt<A&&(K=K&&R[nt](W),K);++nt);return K}}const I=function(y){const R=y.originalEvent;return R.altKey&&!(R.metaKey||R.ctrlKey)&&R.shiftKey},P=function(y){return!y.map.getTargetElement().hasAttribute("tabindex")||function(y){const R=y.map.getTargetElement(),W=y.map.getOwnerDocument().activeElement;return R.contains(W)}(y)},p=G.uX,u=function(y){const R=y.originalEvent;return 0==R.button&&!(D.G$&&D.tK&&R.ctrlKey)},h=function(y){const R=y.originalEvent;return!R.altKey&&!(R.metaKey||R.ctrlKey)&&!R.shiftKey},e=function(y){const R=y.originalEvent;return!R.altKey&&!(R.metaKey||R.ctrlKey)&&R.shiftKey},E=function(y){const R=y.originalEvent,W=R.target.tagName;return"INPUT"!==W&&"SELECT"!==W&&"TEXTAREA"!==W&&!R.target.isContentEditable},v=function(y){const R=y.originalEvent;return(0,k.h)(void 0!==R,56),"mouse"==R.pointerType},O=function(y){const R=y.originalEvent;return(0,k.h)(void 0!==R,56),R.isPrimary&&0===R.button}},9543:(Bt,ot,a)=>{"use strict";a.d(ot,{Cf:()=>ce,Cr:()=>it,EO:()=>ie,Ed:()=>st,GN:()=>g,H6:()=>K,H9:()=>zt,HK:()=>n,I7:()=>ue,MV:()=>Se,Ne:()=>de,T9:()=>s,Wj:()=>w,Xv:()=>Ct,YN:()=>f,b8:()=>P,bg:()=>nt,d9:()=>I,dY:()=>H,dz:()=>bt,f3:()=>U,fS:()=>E,g0:()=>M,hC:()=>A,hI:()=>k,iW:()=>v,jE:()=>d,kK:()=>Gt,l7:()=>x,lJ:()=>c,p8:()=>N,pX:()=>u,qP:()=>y,qf:()=>S,qg:()=>b,r4:()=>p,rL:()=>vt,w$:()=>L,xb:()=>kt});var G=a(8326),D=a(992);function k(dt){const Ot=[1/0,1/0,-1/0,-1/0];for(let At=0,Yt=dt.length;At<Yt;++At)w(Ot,dt[At]);return Ot}function U(dt,Ot,At){return At?(At[0]=dt[0]-Ot,At[1]=dt[1]-Ot,At[2]=dt[2]+Ot,At[3]=dt[3]+Ot,At):[dt[0]-Ot,dt[1]-Ot,dt[2]+Ot,dt[3]+Ot]}function I(dt,Ot){return Ot?(Ot[0]=dt[0],Ot[1]=dt[1],Ot[2]=dt[2],Ot[3]=dt[3],Ot):dt.slice()}function S(dt,Ot,At){let Yt,ge;return Yt=Ot<dt[0]?dt[0]-Ot:dt[2]<Ot?Ot-dt[2]:0,ge=At<dt[1]?dt[1]-At:dt[3]<At?At-dt[3]:0,Yt*Yt+ge*ge}function P(dt,Ot){return d(dt,Ot[0],Ot[1])}function p(dt,Ot){return dt[0]<=Ot[0]&&Ot[2]<=dt[2]&&dt[1]<=Ot[1]&&Ot[3]<=dt[3]}function d(dt,Ot,At){return dt[0]<=Ot&&Ot<=dt[2]&&dt[1]<=At&&At<=dt[3]}function u(dt,Ot){const gt=Ot[0],Mt=Ot[1];let Zt=G.Z.UNKNOWN;return gt<dt[0]?Zt|=G.Z.LEFT:gt>dt[2]&&(Zt|=G.Z.RIGHT),Mt<dt[1]?Zt|=G.Z.BELOW:Mt>dt[3]&&(Zt|=G.Z.ABOVE),Zt===G.Z.UNKNOWN&&(Zt=G.Z.INTERSECTING),Zt}function c(){return[1/0,1/0,-1/0,-1/0]}function s(dt,Ot,At,Yt,ge){return ge?(ge[0]=dt,ge[1]=Ot,ge[2]=At,ge[3]=Yt,ge):[dt,Ot,At,Yt]}function f(dt){return s(1/0,1/0,-1/0,-1/0,dt)}function n(dt,Ot){const At=dt[0],Yt=dt[1];return s(At,Yt,At,Yt,Ot)}function g(dt,Ot,At,Yt,ge){return y(f(ge),dt,Ot,At,Yt)}function E(dt,Ot){return dt[0]==Ot[0]&&dt[2]==Ot[2]&&dt[1]==Ot[1]&&dt[3]==Ot[3]}function v(dt,Ot,At){return Math.abs(dt[0]-Ot[0])<At&&Math.abs(dt[2]-Ot[2])<At&&Math.abs(dt[1]-Ot[1])<At&&Math.abs(dt[3]-Ot[3])<At}function x(dt,Ot){return Ot[0]<dt[0]&&(dt[0]=Ot[0]),Ot[2]>dt[2]&&(dt[2]=Ot[2]),Ot[1]<dt[1]&&(dt[1]=Ot[1]),Ot[3]>dt[3]&&(dt[3]=Ot[3]),dt}function w(dt,Ot){Ot[0]<dt[0]&&(dt[0]=Ot[0]),Ot[0]>dt[2]&&(dt[2]=Ot[0]),Ot[1]<dt[1]&&(dt[1]=Ot[1]),Ot[1]>dt[3]&&(dt[3]=Ot[1])}function y(dt,Ot,At,Yt,ge){for(;At<Yt;At+=ge)W(dt,Ot[At],Ot[At+1]);return dt}function W(dt,Ot,At){dt[0]=Math.min(dt[0],Ot),dt[1]=Math.min(dt[1],At),dt[2]=Math.max(dt[2],Ot),dt[3]=Math.max(dt[3],At)}function K(dt,Ot){let At;return At=Ot(A(dt)),!!(At||(At=Ot(L(dt)),At)||(At=Ot(Ct(dt)),At)||(At=Ot(vt(dt)),At))&&At}function nt(dt){let Ot=0;return kt(dt)||(Ot=bt(dt)*it(dt)),Ot}function A(dt){return[dt[0],dt[1]]}function L(dt){return[dt[2],dt[1]]}function b(dt){return[(dt[0]+dt[2])/2,(dt[1]+dt[3])/2]}function M(dt,Ot){let At;return"bottom-left"===Ot?At=A(dt):"bottom-right"===Ot?At=L(dt):"top-left"===Ot?At=vt(dt):"top-right"===Ot?At=Ct(dt):(0,D.h)(!1,13),At}function N(dt,Ot,At,Yt,ge){const[qt,gt,Mt,Zt,jt,Wt,he,_e]=H(dt,Ot,At,Yt);return s(Math.min(qt,Mt,jt,he),Math.min(gt,Zt,Wt,_e),Math.max(qt,Mt,jt,he),Math.max(gt,Zt,Wt,_e),ge)}function H(dt,Ot,At,Yt){const ge=Ot*Yt[0]/2,qt=Ot*Yt[1]/2,gt=Math.cos(At),Mt=Math.sin(At),Zt=ge*gt,jt=ge*Mt,Wt=qt*gt,he=qt*Mt,_e=dt[0],Le=dt[1];return[_e-Zt+he,Le-jt-Wt,_e-Zt-he,Le-jt+Wt,_e+Zt-he,Le+jt+Wt,_e+Zt+he,Le+jt-Wt,_e-Zt+he,Le-jt-Wt]}function it(dt){return dt[3]-dt[1]}function st(dt,Ot,At){const Yt=At||[1/0,1/0,-1/0,-1/0];return Gt(dt,Ot)?(Yt[0]=dt[0]>Ot[0]?dt[0]:Ot[0],Yt[1]=dt[1]>Ot[1]?dt[1]:Ot[1],Yt[2]=dt[2]<Ot[2]?dt[2]:Ot[2],Yt[3]=dt[3]<Ot[3]?dt[3]:Ot[3]):f(Yt),Yt}function vt(dt){return[dt[0],dt[3]]}function Ct(dt){return[dt[2],dt[3]]}function bt(dt){return dt[2]-dt[0]}function Gt(dt,Ot){return dt[0]<=Ot[2]&&dt[2]>=Ot[0]&&dt[1]<=Ot[3]&&dt[3]>=Ot[1]}function kt(dt){return dt[2]<dt[0]||dt[3]<dt[1]}function ie(dt,Ot){return Ot?(Ot[0]=dt[0],Ot[1]=dt[1],Ot[2]=dt[2],Ot[3]=dt[3],Ot):dt}function zt(dt,Ot){const At=(dt[2]-dt[0])/2*(Ot-1),Yt=(dt[3]-dt[1])/2*(Ot-1);dt[0]-=At,dt[2]+=At,dt[1]-=Yt,dt[3]+=Yt}function ue(dt,Ot,At){let Yt=!1;const ge=u(dt,Ot),qt=u(dt,At);if(ge===G.Z.INTERSECTING||qt===G.Z.INTERSECTING)Yt=!0;else{const gt=dt[0],Mt=dt[1],Zt=dt[2],jt=dt[3],_e=At[0],Le=At[1],Ze=(Le-Ot[1])/(_e-Ot[0]);let It,ct;!!(qt&G.Z.ABOVE)&&!(ge&G.Z.ABOVE)&&(It=_e-(Le-jt)/Ze,Yt=It>=gt&&It<=Zt),!Yt&&!!(qt&G.Z.RIGHT)&&!(ge&G.Z.RIGHT)&&(ct=Le-(_e-Zt)*Ze,Yt=ct>=Mt&&ct<=jt),!Yt&&!!(qt&G.Z.BELOW)&&!(ge&G.Z.BELOW)&&(It=_e-(Le-Mt)/Ze,Yt=It>=gt&&It<=Zt),!Yt&&qt&G.Z.LEFT&&!(ge&G.Z.LEFT)&&(ct=Le-(_e-gt)*Ze,Yt=ct>=Mt&&ct<=jt)}return Yt}function de(dt,Ot,At,Yt){let ge=[];if(Yt>1){const Mt=dt[2]-dt[0],Zt=dt[3]-dt[1];for(let jt=0;jt<Yt;++jt)ge.push(dt[0]+Mt*jt/Yt,dt[1],dt[2],dt[1]+Zt*jt/Yt,dt[2]-Mt*jt/Yt,dt[3],dt[0],dt[3]-Zt*jt/Yt)}else ge=[dt[0],dt[1],dt[2],dt[1],dt[2],dt[3],dt[0],dt[3]];Ot(ge,ge,2);const qt=[],gt=[];for(let Mt=0,Zt=ge.length;Mt<Zt;Mt+=2)qt.push(ge[Mt]),gt.push(ge[Mt+1]);return function z(dt,Ot,At){return s(Math.min.apply(null,dt),Math.min.apply(null,Ot),Math.max.apply(null,dt),Math.max.apply(null,Ot),At)}(qt,gt,At)}function ce(dt,Ot){const At=Ot.getExtent(),Yt=b(dt);if(Ot.canWrapX()&&(Yt[0]<At[0]||Yt[0]>=At[2])){const ge=bt(At),gt=Math.floor((Yt[0]-At[0])/ge)*ge;dt[0]-=gt,dt[2]-=gt}return dt}function Se(dt,Ot){if(Ot.canWrapX()){const At=Ot.getExtent();if(!isFinite(dt[0])||!isFinite(dt[2]))return[[At[0],dt[1],At[2],dt[3]]];ce(dt,Ot);const Yt=bt(At);if(bt(dt)>Yt)return[[At[0],dt[1],At[2],dt[3]]];if(dt[0]<At[0])return[[dt[0]+Yt,dt[1],At[2],dt[3]],[At[0],dt[1],dt[2],dt[3]]];if(dt[2]>At[2])return[[dt[0],dt[1],At[2],dt[3]],[At[0],dt[1],dt[2]-Yt,dt[3]]]}return[dt]}},8326:(Bt,ot,a)=>{"use strict";a.d(ot,{Z:()=>G});const G={UNKNOWN:0,INTERSECTING:1,ABOVE:2,RIGHT:4,BELOW:8,LEFT:16}},75:(Bt,ot,a)=>{"use strict";a.d(ot,{Be:()=>z,ov:()=>k});var G=a(1334);function k(I,S,P,p,d,u,c){const s=new XMLHttpRequest;s.open("GET","function"==typeof I?I(P,p,d):I,!0),"arraybuffer"==S.getType()&&(s.responseType="arraybuffer"),s.withCredentials=false,s.onload=function(f){if(!s.status||s.status>=200&&s.status<300){const n=S.getType();let h;"json"==n||"text"==n?h=s.responseText:"xml"==n?(h=s.responseXML,h||(h=(new DOMParser).parseFromString(s.responseText,"application/xml"))):"arraybuffer"==n&&(h=s.response),h?u(S.readFeatures(h,{extent:P,featureProjection:d}),S.readProjection(h)):c()}else c()},s.onerror=c,s.send()}function z(I,S){return function(P,p,d,u,c){const s=this;k(I,S,P,p,d,function(f,n){s.addFeatures(f),void 0!==u&&u(f)},c||G.Zn)}}},1122:(Bt,ot,a)=>{"use strict";a.d(ot,{ZP:()=>z,fI:()=>U});var G=a(513),D=a(9015);const z=class k{constructor(){this.dataProjection=void 0,this.defaultFeatureProjection=void 0,this.supportedMediaTypes=null}getReadOptions(P,p){if(p){let d=p.dataProjection?(0,D.U2)(p.dataProjection):this.readProjection(P);p.extent&&d&&"tile-pixels"===d.getUnits()&&(d=(0,D.U2)(d),d.setWorldExtent(p.extent)),p={dataProjection:d,featureProjection:p.featureProjection}}return this.adaptOptions(p)}adaptOptions(P){return Object.assign({dataProjection:this.dataProjection,featureProjection:this.defaultFeatureProjection},P)}getType(){return(0,G.O3)()}readFeature(P,p){return(0,G.O3)()}readFeatures(P,p){return(0,G.O3)()}readGeometry(P,p){return(0,G.O3)()}readProjection(P){return(0,G.O3)()}writeFeature(P,p){return(0,G.O3)()}writeFeatures(P,p){return(0,G.O3)()}writeGeometry(P,p){return(0,G.O3)()}};function U(S,P,p){const d=p?(0,D.U2)(p.featureProjection):null,u=p?(0,D.U2)(p.dataProjection):null;let c;if(c=d&&u&&!(0,D.OP)(d,u)?(P?S.clone():S).transform(P?d:u,P?u:d):S,P&&p&&void 0!==p.decimals){const s=Math.pow(10,p.decimals),f=function(n){for(let h=0,g=n.length;h<g;++h)n[h]=Math.round(n[h]*s)/s;return n};c===S&&(c=S.clone()),c.applyTransform(f)}return c}},8898:(Bt,ot,a)=>{"use strict";a.d(ot,{Z:()=>b});var G=a(3413),D=a(4505),k=a(7680),z=a(23),U=a(7090),I=a(1537),S=a(4034),P=a(7026),p=a(7464),d=a(992),u=a(9015),c=a(9306),s=a(1122);function n(M,C){if(!M)return null;let N;switch(M.type){case"Point":N=function g(M){return new P.Z(M.coordinates)}(M);break;case"LineString":N=function e(M){return new z.Z(M.coordinates)}(M);break;case"Polygon":N=function w(M){return new p.ZP(M.coordinates)}(M);break;case"MultiPoint":N=function v(M){return new I.Z(M.coordinates)}(M);break;case"MultiLineString":N=function E(M){return new U.Z(M.coordinates)}(M);break;case"MultiPolygon":N=function x(M){return new S.Z(M.coordinates)}(M);break;case"GeometryCollection":N=function h(M,C){const N=M.geometries.map(function(H){return n(H,C)});return new D.Z(N)}(M);break;default:throw new Error("Unsupported GeoJSON type: "+M.type)}return(0,s.fI)(N,!1,C)}function O(M,C){const N=(M=(0,s.fI)(M,!0,C)).getType();let H;switch(N){case"Point":H=function A(M,C){return{type:"Point",coordinates:M.getCoordinates()}}(M);break;case"LineString":H=function R(M,C){return{type:"LineString",coordinates:M.getCoordinates()}}(M);break;case"Polygon":H=function L(M,C){let N;return C&&(N=C.rightHanded),{type:"Polygon",coordinates:M.getCoordinates(N)}}(M,C);break;case"MultiPoint":H=function K(M,C){return{type:"MultiPoint",coordinates:M.getCoordinates()}}(M);break;case"MultiLineString":H=function W(M,C){return{type:"MultiLineString",coordinates:M.getCoordinates()}}(M);break;case"MultiPolygon":H=function nt(M,C){let N;return C&&(N=C.rightHanded),{type:"MultiPolygon",coordinates:M.getCoordinates(N)}}(M,C);break;case"GeometryCollection":H=function y(M,C){delete(C=Object.assign({},C)).featureProjection;const N=M.getGeometriesArray().map(function(H){return O(H,C)});return{type:"GeometryCollection",geometries:N}}(M,C);break;case"Circle":H={type:"GeometryCollection",geometries:[]};break;default:throw new Error("Unsupported geometry type: "+N)}return H}const b=class f extends k.Z{constructor(C){C=C||{},super(),this.dataProjection=(0,u.U2)(C.dataProjection?C.dataProjection:"EPSG:4326"),C.featureProjection&&(this.defaultFeatureProjection=(0,u.U2)(C.featureProjection)),this.geometryName_=C.geometryName,this.extractGeometryName_=C.extractGeometryName,this.supportedMediaTypes=["application/geo+json","application/vnd.geo+json"]}readFeatureFromObject(C,N){let H=null;H="Feature"===C.type?C:{type:"Feature",geometry:C,properties:null};const it=n(H.geometry,N),Y=new G.Z;return this.geometryName_?Y.setGeometryName(this.geometryName_):this.extractGeometryName_&&"geometry_name"in H!==void 0&&Y.setGeometryName(H.geometry_name),Y.setGeometry(it),"id"in H&&Y.setId(H.id),H.properties&&Y.setProperties(H.properties,!0),Y}readFeaturesFromObject(C,N){let it=null;if("FeatureCollection"===C.type){it=[];const st=C.features;for(let ht=0,Tt=st.length;ht<Tt;++ht)it.push(this.readFeatureFromObject(st[ht],N))}else it=[this.readFeatureFromObject(C,N)];return it}readGeometryFromObject(C,N){return n(C,N)}readProjectionFromObject(C){const N=C.crs;let H;return N?"name"==N.type?H=(0,u.U2)(N.properties.name):"EPSG"===N.type?H=(0,u.U2)("EPSG:"+N.properties.code):(0,d.h)(!1,36):H=this.dataProjection,H}writeFeatureObject(C,N){N=this.adaptOptions(N);const H={type:"Feature",geometry:null,properties:null},it=C.getId();if(void 0!==it&&(H.id=it),!C.hasProperties())return H;const Y=C.getProperties(),st=C.getGeometry();return st&&(H.geometry=O(st,N),delete Y[C.getGeometryName()]),(0,c.x)(Y)||(H.properties=Y),H}writeFeaturesObject(C,N){N=this.adaptOptions(N);const H=[];for(let it=0,Y=C.length;it<Y;++it)H.push(this.writeFeatureObject(C[it],N));return{type:"FeatureCollection",features:H}}writeGeometryObject(C,N){return O(C,this.adaptOptions(N))}}},7680:(Bt,ot,a)=>{"use strict";a.d(ot,{Z:()=>U});var G=a(1122),D=a(513);function z(I){return"string"==typeof I?JSON.parse(I)||null:null!==I?I:null}const U=class k extends G.ZP{constructor(){super()}getType(){return"json"}readFeature(S,P){return this.readFeatureFromObject(z(S),this.getReadOptions(S,P))}readFeatures(S,P){return this.readFeaturesFromObject(z(S),this.getReadOptions(S,P))}readFeatureFromObject(S,P){return(0,D.O3)()}readFeaturesFromObject(S,P){return(0,D.O3)()}readGeometry(S,P){return this.readGeometryFromObject(z(S),this.getReadOptions(S,P))}readGeometryFromObject(S,P){return(0,D.O3)()}readProjection(S){return this.readProjectionFromObject(z(S))}readProjectionFromObject(S){return(0,D.O3)()}writeFeature(S,P){return JSON.stringify(this.writeFeatureObject(S,P))}writeFeatureObject(S,P){return(0,D.O3)()}writeFeatures(S,P){return JSON.stringify(this.writeFeaturesObject(S,P))}writeFeaturesObject(S,P){return(0,D.O3)()}writeGeometry(S,P){return JSON.stringify(this.writeGeometryObject(S,P))}writeGeometryObject(S,P){return(0,D.O3)()}}},4007:(Bt,ot,a)=>{"use strict";a.d(ot,{ZP:()=>Ys});var G=a(3413),D=a(694),k=a(4505),z=a(5999),U=a(1501),I=a(23),S=a(7090),P=a(1537),p=a(4034),d=a(7026),u=a(7464),c=a(5253),s=a(1786),f=a(8185),n=a(1122),h=a(513),g=a(142),e=a(8809);const v=class E extends n.ZP{constructor(){super(),this.xmlSerializer_=(0,e.xc)()}getType(){return"xml"}readFeature(at,ft){if(!at)return null;if("string"==typeof at){const yt=(0,e.Qc)(at);return this.readFeatureFromDocument(yt,ft)}return(0,e.qk)(at)?this.readFeatureFromDocument(at,ft):this.readFeatureFromNode(at,ft)}readFeatureFromDocument(at,ft){const yt=this.readFeaturesFromDocument(at,ft);return yt.length>0?yt[0]:null}readFeatureFromNode(at,ft){return null}readFeatures(at,ft){if(!at)return[];if("string"==typeof at){const yt=(0,e.Qc)(at);return this.readFeaturesFromDocument(yt,ft)}return(0,e.qk)(at)?this.readFeaturesFromDocument(at,ft):this.readFeaturesFromNode(at,ft)}readFeaturesFromDocument(at,ft){const yt=[];for(let wt=at.firstChild;wt;wt=wt.nextSibling)wt.nodeType==Node.ELEMENT_NODE&&(0,g.l7)(yt,this.readFeaturesFromNode(wt,ft));return yt}readFeaturesFromNode(at,ft){return(0,h.O3)()}readGeometry(at,ft){if(!at)return null;if("string"==typeof at){const yt=(0,e.Qc)(at);return this.readGeometryFromDocument(yt,ft)}return(0,e.qk)(at)?this.readGeometryFromDocument(at,ft):this.readGeometryFromNode(at,ft)}readGeometryFromDocument(at,ft){return null}readGeometryFromNode(at,ft){return null}readProjection(at){if(!at)return null;if("string"==typeof at){const ft=(0,e.Qc)(at);return this.readProjectionFromDocument(ft)}return(0,e.qk)(at)?this.readProjectionFromDocument(at):this.readProjectionFromNode(at)}readProjectionFromDocument(at){return this.dataProjection}readProjectionFromNode(at){return this.dataProjection}writeFeature(at,ft){const yt=this.writeFeatureNode(at,ft);return this.xmlSerializer_.serializeToString(yt)}writeFeatureNode(at,ft){return null}writeFeatures(at,ft){const yt=this.writeFeaturesNode(at,ft);return this.xmlSerializer_.serializeToString(yt)}writeFeaturesNode(at,ft){return null}writeGeometry(at,ft){const yt=this.writeGeometryNode(at,ft);return this.xmlSerializer_.serializeToString(yt)}writeGeometryNode(at,ft){return null}};var x=a(866),w=a(992),O=a(9015),y=a(52),R=a(4331);const W=["http://www.google.com/kml/ext/2.2"],K=[null,"http://earth.google.com/kml/2.0","http://earth.google.com/kml/2.1","http://earth.google.com/kml/2.2","http://www.opengis.net/kml/2.2"],A={fraction:"fraction",pixels:"pixels",insetPixels:"pixels"},L=(0,e.C5)(K,{ExtendedData:vi,Region:gi,MultiGeometry:(0,e.Pr)(Rt,"geometry"),LineString:(0,e.Pr)($,"geometry"),LinearRing:(0,e.Pr)(mt,"geometry"),Point:(0,e.Pr)(Ht,"geometry"),Polygon:(0,e.Pr)(me,"geometry"),Style:(0,e.Pr)(Re),StyleMap:function bi(Kt,at){const ft=Q.call(this,Kt,at);if(!ft)return;const yt=at[at.length-1];Array.isArray(ft)?yt.Style=ft:"string"==typeof ft?yt.styleUrl=ft:(0,w.h)(!1,38)},address:(0,e.Pr)(y.s2),description:(0,e.Pr)(y.s2),name:(0,e.Pr)(y.s2),open:(0,e.Pr)(y.ud),phoneNumber:(0,e.Pr)(y.s2),styleUrl:(0,e.Pr)(It),visibility:(0,e.Pr)(y.ud)},(0,e.C5)(W,{MultiTrack:(0,e.Pr)(function We(Kt,at){const ft=(0,e.O)([],Ye,Kt,at);if(ft)return new S.Z(ft)},"geometry"),Track:(0,e.Pr)(Ue,"geometry")})),b=(0,e.C5)(K,{ExtendedData:vi,Region:gi,Link:function Ws(Kt,at){(0,e.T3)(M,Kt,at)},address:(0,e.Pr)(y.s2),description:(0,e.Pr)(y.s2),name:(0,e.Pr)(y.s2),open:(0,e.Pr)(y.ud),phoneNumber:(0,e.Pr)(y.s2),visibility:(0,e.Pr)(y.ud)}),M=(0,e.C5)(K,{href:(0,e.Pr)(Ze)}),C=(0,e.C5)(K,{LatLonAltBox:function si(Kt,at){const ft=(0,e.O)({},_i,Kt,at);if(!ft)return;const yt=at[at.length-1],wt=[parseFloat(ft.west),parseFloat(ft.south),parseFloat(ft.east),parseFloat(ft.north)];yt.extent=wt,yt.altitudeMode=ft.altitudeMode,yt.minAltitude=parseFloat(ft.minAltitude),yt.maxAltitude=parseFloat(ft.maxAltitude)},Lod:function Ci(Kt,at){const ft=(0,e.O)({},Gi,Kt,at);if(!ft)return;const yt=at[at.length-1];yt.minLodPixels=parseFloat(ft.minLodPixels),yt.maxLodPixels=parseFloat(ft.maxLodPixels),yt.minFadeExtent=parseFloat(ft.minFadeExtent),yt.maxFadeExtent=parseFloat(ft.maxFadeExtent)}}),N=(0,e.C5)(K,["Document","Placemark"]),H=(0,e.C5)(K,{Document:(0,e.A4)(function Gs(Kt,at,ft){(0,e.ZL)({node:Kt},un,tn,at,ft,void 0,this)}),Placemark:(0,e.A4)(Hn)});let it,ht,Tt,vt,Ct,bt,ie,de,gt,Y=null,Gt=null,zt=null,ce=null,dt=null,At=null;function ge(Kt){return 32/Math.min(Kt[0],Kt[1])}function Mt(Kt){return Kt}function he(Kt,at,ft){return Array.isArray(Kt)?Kt:"string"==typeof Kt?he(ft[Kt],at,ft):at}function _e(Kt){const at=(0,e.Ve)(Kt,!1),ft=/^\s*#?\s*([0-9A-Fa-f]{8})\s*$/.exec(at);if(ft){const yt=ft[1];return[parseInt(yt.substr(6,2),16),parseInt(yt.substr(4,2),16),parseInt(yt.substr(2,2),16),parseInt(yt.substr(0,2),16)/255]}}function Le(Kt){let at=(0,e.Ve)(Kt,!1);const ft=[];at=at.replace(/\s*,\s*/g,",");const yt=/^\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?),([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)(?:\s+|,|$)(?:([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)(?:\s+|$))?\s*/i;let wt;for(;wt=yt.exec(at);){const te=parseFloat(wt[1]),ee=parseFloat(wt[2]),ve=wt[3]?parseFloat(wt[3]):0;ft.push(te,ee,ve),at=at.substr(wt[0].length)}if(""===at)return ft}function Ze(Kt){const at=(0,e.Ve)(Kt,!1).trim();let ft=Kt.baseURI;return(!ft||"about:blank"==ft)&&(ft=window.location.href),ft?new URL(at,ft).href:at}function It(Kt){const at=(0,e.Ve)(Kt,!1).trim().replace(/^(?!.*#)/,"#");let ft=Kt.baseURI;return(!ft||"about:blank"==ft)&&(ft=window.location.href),ft?new URL(at,ft).href:at}function m(Kt){return(0,y.fy)(Kt)}const F=(0,e.C5)(K,{Pair:function Mn(Kt,at){const ft=(0,e.O)({},yi,Kt,at,this);if(!ft)return;const yt=ft.key;if(yt&&"normal"==yt){const wt=ft.styleUrl;wt&&(at[at.length-1]=wt);const te=ft.Style;te&&(at[at.length-1]=te)}}});function Q(Kt,at){return(0,e.O)(void 0,F,Kt,at,this)}const V=(0,e.C5)(K,{Icon:(0,e.Pr)(function ii(Kt,at){return(0,e.O)({},Ve,Kt,at)||null}),color:(0,e.Pr)(_e),heading:(0,e.Pr)(y.fy),hotSpot:(0,e.Pr)(function ct(Kt){const at=Kt.getAttribute("xunits"),ft=Kt.getAttribute("yunits");let yt;return yt="insetPixels"!==at?"insetPixels"!==ft?"bottom-left":"top-left":"insetPixels"!==ft?"bottom-right":"top-right",{x:parseFloat(Kt.getAttribute("x")),xunits:A[at],y:parseFloat(Kt.getAttribute("y")),yunits:A[ft],origin:yt}}),scale:(0,e.Pr)(m)}),_t=(0,e.C5)(K,{color:(0,e.Pr)(_e),scale:(0,e.Pr)(m)}),Nt=(0,e.C5)(K,{color:(0,e.Pr)(_e),width:(0,e.Pr)(y.fy)}),Jt=(0,e.C5)(K,{color:(0,e.Pr)(_e),fill:(0,e.Pr)(y.ud),outline:(0,e.Pr)(y.ud)}),se=(0,e.C5)(K,{coordinates:(0,e.z)(Le)});function Qt(Kt,at){return(0,e.O)(null,se,Kt,at)}const Ye=(0,e.C5)(W,{Track:(0,e.Ei)(Ue)}),Ge=(0,e.C5)(K,{when:function Oi(Kt,at){const yt=at[at.length-1].whens,wt=(0,e.Ve)(Kt,!1),te=Date.parse(wt);yt.push(isNaN(te)?0:te)}},(0,e.C5)(W,{coord:function Fe(Kt,at){const yt=at[at.length-1].coordinates,wt=(0,e.Ve)(Kt,!1),ee=/^\s*([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s+([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s+([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s*$/i.exec(wt);if(ee){const ve=parseFloat(ee[1]),xe=parseFloat(ee[2]),Oe=parseFloat(ee[3]);yt.push([ve,xe,Oe])}else yt.push([])}}));function Ue(Kt,at){const ft=(0,e.O)({coordinates:[],whens:[]},Ge,Kt,at);if(!ft)return;const yt=[],wt=ft.coordinates,te=ft.whens;for(let ee=0,ve=Math.min(wt.length,te.length);ee<ve;++ee)3==wt[ee].length&&yt.push(wt[ee][0],wt[ee][1],wt[ee][2],te[ee]);return new I.Z(yt,"XYZM")}const Ve=(0,e.C5)(K,{href:(0,e.Pr)(Ze)},(0,e.C5)(W,{x:(0,e.Pr)(y.fy),y:(0,e.Pr)(y.fy),w:(0,e.Pr)(y.fy),h:(0,e.Pr)(y.fy)})),Qe=(0,e.C5)(K,{coordinates:(0,e.z)(Le)});function qe(Kt,at){return(0,e.O)(null,Qe,Kt,at)}const q=(0,e.C5)(K,{extrude:(0,e.Pr)(y.ud),tessellate:(0,e.Pr)(y.ud),altitudeMode:(0,e.Pr)(y.s2)});function $(Kt,at){const ft=(0,e.O)({},q,Kt,at),yt=qe(Kt,at);if(yt){const wt=new I.Z(yt,"XYZ");return wt.setProperties(ft,!0),wt}}function mt(Kt,at){const ft=(0,e.O)({},q,Kt,at),yt=qe(Kt,at);if(yt){const wt=new u.ZP(yt,"XYZ",[yt.length]);return wt.setProperties(ft,!0),wt}}const pt=(0,e.C5)(K,{LineString:(0,e.Ei)($),LinearRing:(0,e.Ei)(mt),MultiGeometry:(0,e.Ei)(Rt),Point:(0,e.Ei)(Ht),Polygon:(0,e.Ei)(me)});function Rt(Kt,at){const ft=(0,e.O)([],pt,Kt,at);if(!ft)return null;if(0===ft.length)return new k.Z(ft);let yt,wt=!0;const te=ft[0].getType();let ee;for(let ve=1,xe=ft.length;ve<xe;++ve)if(ee=ft[ve],ee.getType()!=te){wt=!1;break}if(wt){let ve,xe;if("Point"==te){const Oe=ft[0];ve=Oe.getLayout(),xe=Oe.getFlatCoordinates();for(let ze=1,He=ft.length;ze<He;++ze)ee=ft[ze],(0,g.l7)(xe,ee.getFlatCoordinates());yt=new P.Z(xe,ve),De(yt,ft)}else"LineString"==te?(yt=new S.Z(ft),De(yt,ft)):"Polygon"==te?(yt=new p.Z(ft),De(yt,ft)):"GeometryCollection"==te?yt=new k.Z(ft):(0,w.h)(!1,37)}else yt=new k.Z(ft);return yt}function Ht(Kt,at){const ft=(0,e.O)({},q,Kt,at),yt=qe(Kt,at);if(yt){const wt=new d.Z(yt,"XYZ");return wt.setProperties(ft,!0),wt}}const ne=(0,e.C5)(K,{innerBoundaryIs:function xi(Kt,at){const ft=(0,e.O)([],ri,Kt,at);ft.length>0&&at[at.length-1].push(...ft)},outerBoundaryIs:function Vi(Kt,at){const ft=(0,e.O)(void 0,Ri,Kt,at);ft&&(at[at.length-1][0]=ft)}});function me(Kt,at){const ft=(0,e.O)({},q,Kt,at),yt=(0,e.O)([null],ne,Kt,at);if(yt&&yt[0]){const wt=yt[0],te=[wt.length];for(let ve=1,xe=yt.length;ve<xe;++ve)(0,g.l7)(wt,yt[ve]),te.push(wt.length);const ee=new u.ZP(wt,"XYZ",te);return ee.setProperties(ft,!0),ee}}const Me=(0,e.C5)(K,{IconStyle:function lt(Kt,at){const ft=(0,e.O)({},V,Kt,at);if(!ft)return;const yt=at[at.length-1],wt="Icon"in ft?ft.Icon:{},te=!("Icon"in ft)||Object.keys(wt).length>0;let ee;const ve=wt.href;ve?ee=ve:te&&(ee=bt);let xe,Oe,ze,He="bottom-left";const ti=ft.hotSpot;let ei;ti?(xe=[ti.x,ti.y],Oe=ti.xunits,ze=ti.yunits,He=ti.origin):/^https?:\/\/maps\.(?:google|gstatic)\.com\//.test(ee)&&(ee.includes("pushpin")?(xe=ht,Oe=Tt,ze=vt):ee.includes("arrow-reverse")?(xe=[54,42],Oe=Tt,ze=vt):ee.includes("paddle")&&(xe=[32,1],Oe=Tt,ze=vt));const li=wt.x,pi=wt.y;let ci;void 0!==li&&void 0!==pi&&(ei=[li,pi]);const ai=wt.w,Pi=wt.h;let fi;void 0!==ai&&void 0!==Pi&&(ci=[ai,Pi]);const Ii=ft.heading;void 0!==Ii&&(fi=(0,R.Yr)(Ii));const Qi=ft.color;if(te){ee==bt&&(ci=Ct);const Fi=new z.Z({anchor:xe,anchorOrigin:He,anchorXUnits:Oe,anchorYUnits:ze,crossOrigin:this.crossOrigin_,offset:ei,offsetOrigin:"bottom-left",rotation:fi,scale:ft.scale,size:ci,src:this.iconUrlFunction_(ee),color:Qi}),xs=Fi.getScaleArray()[0],ts=Fi.getSize();if(null===ts){const fn=Fi.getImageState();if(fn===U.Z.IDLE||fn===U.Z.LOADING){const Ms=function(){const Ts=Fi.getImageState();if(Ts!==U.Z.IDLE&&Ts!==U.Z.LOADING){const es=Fi.getSize();if(es&&2==es.length){const Ps=ge(es);Fi.setScale(xs*Ps)}Fi.unlistenImageChange(Ms)}};Fi.listenImageChange(Ms),fn===U.Z.IDLE&&Fi.load()}}else if(2==ts.length){const fn=ge(ts);Fi.setScale(xs*fn)}yt.imageStyle=Fi}else yt.imageStyle=ie},LabelStyle:function St(Kt,at){const ft=(0,e.O)({},_t,Kt,at);if(!ft)return;const yt=at[at.length-1],wt=new f.Z({fill:new D.Z({color:"color"in ft?ft.color:it}),scale:ft.scale});yt.textStyle=wt},LineStyle:function Xt(Kt,at){const ft=(0,e.O)({},Nt,Kt,at);if(!ft)return;const yt=at[at.length-1],wt=new c.Z({color:"color"in ft?ft.color:it,width:"width"in ft?ft.width:1});yt.strokeStyle=wt},PolyStyle:function Ee(Kt,at){const ft=(0,e.O)({},Jt,Kt,at);if(!ft)return;const yt=at[at.length-1],wt=new D.Z({color:"color"in ft?ft.color:it});yt.fillStyle=wt;const te=ft.fill;void 0!==te&&(yt.fill=te);const ee=ft.outline;void 0!==ee&&(yt.outline=ee)}});function Re(Kt,at){const ft=(0,e.O)({},Me,Kt,at,this);if(!ft)return null;let yt="fillStyle"in ft?ft.fillStyle:Y;const wt=ft.fill;let te;void 0!==wt&&!wt&&(yt=null),"imageStyle"in ft?ft.imageStyle!=ie&&(te=ft.imageStyle):te=Gt;const ee="textStyle"in ft?ft.textStyle:ce,ve="strokeStyle"in ft?ft.strokeStyle:zt,xe=ft.outline;return void 0===xe||xe?[new s.ZP({fill:yt,image:te,stroke:ve,text:ee,zIndex:void 0})]:[new s.ZP({geometry:function(Oe){const ze=Oe.getGeometry(),He=ze.getType();return"GeometryCollection"===He?new k.Z(ze.getGeometriesArrayRecursive().filter(function(ei){const li=ei.getType();return"Polygon"!==li&&"MultiPolygon"!==li})):"Polygon"!==He&&"MultiPolygon"!==He?ze:void 0},fill:yt,image:te,stroke:ve,text:ee,zIndex:void 0}),new s.ZP({geometry:function(Oe){const ze=Oe.getGeometry(),He=ze.getType();return"GeometryCollection"===He?new k.Z(ze.getGeometriesArrayRecursive().filter(function(ei){const li=ei.getType();return"Polygon"===li||"MultiPolygon"===li})):"Polygon"===He||"MultiPolygon"===He?ze:void 0},fill:yt,stroke:null,zIndex:void 0})]}function De(Kt,at){const ft=at.length,yt=new Array(at.length),wt=new Array(at.length),te=new Array(at.length);let ee,ve,xe;ee=!1,ve=!1,xe=!1;for(let Oe=0;Oe<ft;++Oe){const ze=at[Oe];yt[Oe]=ze.get("extrude"),wt[Oe]=ze.get("tessellate"),te[Oe]=ze.get("altitudeMode"),ee=ee||void 0!==yt[Oe],ve=ve||void 0!==wt[Oe],xe=xe||te[Oe]}ee&&Kt.set("extrude",yt),ve&&Kt.set("tessellate",wt),xe&&Kt.set("altitudeMode",te)}const je=(0,e.C5)(K,{displayName:(0,e.Pr)(y.s2),value:(0,e.Pr)(y.s2)}),ni=(0,e.C5)(K,{Data:function Xe(Kt,at){const ft=Kt.getAttribute("name");(0,e.T3)(je,Kt,at);const yt=at[at.length-1];ft&&yt.displayName?yt[ft]={value:yt.value,displayName:yt.displayName,toString:function(){return yt.value}}:null!==ft?yt[ft]=yt.value:null!==yt.displayName&&(yt[yt.displayName]=yt.value),delete yt.value},SchemaData:function ui(Kt,at){(0,e.T3)(mi,Kt,at)}});function vi(Kt,at){(0,e.T3)(ni,Kt,at)}function gi(Kt,at){(0,e.T3)(C,Kt,at)}const yi=(0,e.C5)(K,{Style:(0,e.Pr)(Re),key:(0,e.Pr)(y.s2),styleUrl:(0,e.Pr)(It)}),mi=(0,e.C5)(K,{SimpleData:function Ei(Kt,at){const ft=Kt.getAttribute("name");if(null!==ft){const yt=(0,y.s2)(Kt);at[at.length-1][ft]=yt}}}),_i=(0,e.C5)(K,{altitudeMode:(0,e.Pr)(y.s2),minAltitude:(0,e.Pr)(y.fy),maxAltitude:(0,e.Pr)(y.fy),north:(0,e.Pr)(y.fy),south:(0,e.Pr)(y.fy),east:(0,e.Pr)(y.fy),west:(0,e.Pr)(y.fy)}),Gi=(0,e.C5)(K,{minLodPixels:(0,e.Pr)(y.fy),maxLodPixels:(0,e.Pr)(y.fy),minFadeExtent:(0,e.Pr)(y.fy),maxFadeExtent:(0,e.Pr)(y.fy)}),ri=(0,e.C5)(K,{LinearRing:(0,e.Ei)(Qt)}),Ri=(0,e.C5)(K,{LinearRing:(0,e.z)(Qt)});function ln(Kt,at){const ft=(0,x._2)(at),wt=[255*(4==ft.length?ft[3]:1),ft[2],ft[1],ft[0]];for(let te=0;te<4;++te){const ee=Math.floor(wt[te]).toString(16);wt[te]=1==ee.length?"0"+ee:ee}(0,y.bZ)(Kt,wt.join(""))}const hn=(0,e.C5)(K,{Data:(0,e.A4)(function qi(Kt,at,ft){Kt.setAttribute("name",at.name);const yt={node:Kt},wt=at.value;"object"==typeof wt?(null!==wt&&wt.displayName&&(0,e.ZL)(yt,hn,e.hg,[wt.displayName],ft,["displayName"]),null!==wt&&wt.value&&(0,e.ZL)(yt,hn,e.hg,[wt.value],ft,["value"])):(0,e.ZL)(yt,hn,e.hg,[wt],ft,["value"])}),value:(0,e.A4)(function Li(Kt,at){(0,y.bZ)(Kt,at)}),displayName:(0,e.A4)(function Mi(Kt,at){(0,y.xO)(Kt,at)})}),un=(0,e.C5)(K,{Placemark:(0,e.A4)(Hn)}),tn=function(Kt,at,ft){return(0,e.c)(at[at.length-1].node.namespaceURI,"Placemark")},Pn=(0,e.G3)("Data"),Cn=(0,e.C5)(K,["href"],(0,e.C5)(W,["x","y","w","h"])),Rn=(0,e.C5)(K,{href:(0,e.A4)(y.bZ)},(0,e.C5)(W,{x:(0,e.A4)(y.f3),y:(0,e.A4)(y.f3),w:(0,e.A4)(y.f3),h:(0,e.A4)(y.f3)})),Gn=function(Kt,at,ft){return(0,e.c)(W[0],"gx:"+ft)},zn=(0,e.C5)(K,["scale","heading","Icon","color","hotSpot"]),zs=(0,e.C5)(K,{Icon:(0,e.A4)(function ds(Kt,at,ft){const yt={node:Kt};let te=Cn[ft[ft.length-1].node.namespaceURI],ee=(0,e.RA)(at,te);(0,e.ZL)(yt,Rn,e.hg,ee,ft,te),te=Cn[W[0]],ee=(0,e.RA)(at,te),(0,e.ZL)(yt,Rn,Gn,ee,ft,te)}),color:(0,e.A4)(ln),heading:(0,e.A4)(y.f3),hotSpot:(0,e.A4)(function qn(Kt,at){Kt.setAttribute("x",String(at.x)),Kt.setAttribute("y",String(at.y)),Kt.setAttribute("xunits",at.xunits),Kt.setAttribute("yunits",at.yunits)}),scale:(0,e.A4)(dn)}),Kn=(0,e.C5)(K,["color","scale"]),cn=(0,e.C5)(K,{color:(0,e.A4)(ln),scale:(0,e.A4)(dn)}),On=(0,e.C5)(K,["color","width"]),Yi=(0,e.C5)(K,{color:(0,e.A4)(ln),width:(0,e.A4)(y.f3)}),Hi={Point:"Point",LineString:"LineString",LinearRing:"LinearRing",Polygon:"Polygon",MultiPoint:"MultiGeometry",MultiLineString:"MultiGeometry",MultiPolygon:"MultiGeometry",GeometryCollection:"MultiGeometry"},zi=function(Kt,at,ft){if(Kt)return(0,e.c)(at[at.length-1].node.namespaceURI,Hi[Kt.getType()])},Xn=(0,e.G3)("Point"),gs=(0,e.G3)("LineString"),Ji=(0,e.G3)("LinearRing"),Vn=(0,e.G3)("Polygon"),_s=(0,e.C5)(K,{LineString:(0,e.A4)(Ti),Point:(0,e.A4)(Ti),Polygon:(0,e.A4)(Sn),GeometryCollection:(0,e.A4)(Ki)});function Ki(Kt,at,ft){const yt={node:Kt},wt=at.getType();let ee,te=[];"GeometryCollection"===wt?(at.getGeometriesArrayRecursive().forEach(function(ve){const xe=ve.getType();"MultiPoint"===xe?te=te.concat(ve.getPoints()):"MultiLineString"===xe?te=te.concat(ve.getLineStrings()):"MultiPolygon"===xe?te=te.concat(ve.getPolygons()):"Point"===xe||"LineString"===xe||"Polygon"===xe?te.push(ve):(0,w.h)(!1,39)}),ee=zi):"MultiPoint"===wt?(te=at.getPoints(),ee=Xn):"MultiLineString"===wt?(te=at.getLineStrings(),ee=gs):"MultiPolygon"===wt?(te=at.getPolygons(),ee=Vn):(0,w.h)(!1,39),(0,e.ZL)(yt,_s,ee,te,ft)}const Si=(0,e.C5)(K,{LinearRing:(0,e.A4)(Ti)});function ms(Kt,at,ft){(0,e.ZL)({node:Kt},Si,Ji,[at],ft)}const Yn=(0,e.C5)(K,{ExtendedData:(0,e.A4)(function cs(Kt,at,ft){const yt={node:Kt},wt=at.names,te=at.values,ee=wt.length;for(let ve=0;ve<ee;ve++)(0,e.ZL)(yt,hn,Pn,[{name:wt[ve],value:te[ve]}],ft)}),MultiGeometry:(0,e.A4)(Ki),LineString:(0,e.A4)(Ti),LinearRing:(0,e.A4)(Ti),Point:(0,e.A4)(Ti),Polygon:(0,e.A4)(Sn),Style:(0,e.A4)(function Vs(Kt,at,ft){const yt={node:Kt},wt={};if(at.pointStyles.length){const xe=at.pointStyles[0].getText();xe&&(wt.LabelStyle=xe);const Oe=at.pointStyles[0].getImage();Oe&&"function"==typeof Oe.getSrc&&(wt.IconStyle=Oe)}if(at.lineStyles.length){const xe=at.lineStyles[0].getStroke();xe&&(wt.LineStyle=xe)}if(at.polyStyles.length){const xe=at.polyStyles[0].getStroke();xe&&!wt.LineStyle&&(wt.LineStyle=xe),wt.PolyStyle=at.polyStyles[0]}const ee=wi[ft[ft.length-1].node.namespaceURI],ve=(0,e.RA)(wt,ee);(0,e.ZL)(yt,Es,e.hg,ve,ft,ee)}),address:(0,e.A4)(y.bZ),description:(0,e.A4)(y.bZ),name:(0,e.A4)(y.bZ),open:(0,e.A4)(y.Vi),phoneNumber:(0,e.A4)(y.bZ),styleUrl:(0,e.A4)(y.bZ),visibility:(0,e.A4)(y.Vi)}),Ks=(0,e.C5)(K,["name","open","visibility","address","phoneNumber","description","styleUrl","Style"]),ps=(0,e.G3)("ExtendedData");function Hn(Kt,at,ft){const yt={node:Kt};at.getId()&&Kt.setAttribute("id",at.getId());const wt=at.getProperties(),te={address:1,description:1,name:1,open:1,phoneNumber:1,styleUrl:1,visibility:1};te[at.getGeometryName()]=1;const ee=Object.keys(wt||{}).sort().filter(function(ei){return!te[ei]}),ve=at.getStyleFunction();if(ve){const ei=ve(at,0);if(ei){const li=Array.isArray(ei)?ei:[ei];let pi=li;if(at.getGeometry()&&(pi=li.filter(function(ci){const ai=ci.getGeometryFunction()(at);if(ai){const Pi=ai.getType();return"GeometryCollection"===Pi?ai.getGeometriesArrayRecursive().filter(function(fi){const Ii=fi.getType();return"Point"===Ii||"MultiPoint"===Ii}).length:"Point"===Pi||"MultiPoint"===Pi}})),this.writeStyles_){let ci=li,ai=li;at.getGeometry()&&(ci=li.filter(function(Pi){const fi=Pi.getGeometryFunction()(at);if(fi){const Ii=fi.getType();return"GeometryCollection"===Ii?fi.getGeometriesArrayRecursive().filter(function(Di){const Qi=Di.getType();return"LineString"===Qi||"MultiLineString"===Qi}).length:"LineString"===Ii||"MultiLineString"===Ii}}),ai=li.filter(function(Pi){const fi=Pi.getGeometryFunction()(at);if(fi){const Ii=fi.getType();return"GeometryCollection"===Ii?fi.getGeometriesArrayRecursive().filter(function(Di){const Qi=Di.getType();return"Polygon"===Qi||"MultiPolygon"===Qi}).length:"Polygon"===Ii||"MultiPolygon"===Ii}})),wt.Style={pointStyles:pi,lineStyles:ci,polyStyles:ai}}if(pi.length&&void 0===wt.name){const ci=pi[0].getText();ci&&(wt.name=ci.getText())}}}const Oe=Ks[ft[ft.length-1].node.namespaceURI],ze=(0,e.RA)(wt,Oe);if((0,e.ZL)(yt,Yn,e.hg,ze,ft,Oe),ee.length>0){const ei=(0,e.RA)(wt,ee);(0,e.ZL)(yt,Yn,ps,[{names:ee,values:ei}],ft)}const He=ft[0];let ti=at.getGeometry();ti&&(ti=(0,n.fI)(ti,!0,He)),(0,e.ZL)(yt,Yn,zi,[ti],ft)}const vs=(0,e.C5)(K,["extrude","tessellate","altitudeMode","coordinates"]),Jn=(0,e.C5)(K,{extrude:(0,e.A4)(y.Vi),tessellate:(0,e.A4)(y.Vi),altitudeMode:(0,e.A4)(y.bZ),coordinates:(0,e.A4)(function Tn(Kt,at,ft){const yt=ft[ft.length-1],wt=yt.layout,te=yt.stride;let ee;"XY"==wt||"XYM"==wt?ee=2:"XYZ"==wt||"XYZM"==wt?ee=3:(0,w.h)(!1,34);const ve=at.length;let xe="";if(ve>0){xe+=at[0];for(let Oe=1;Oe<ee;++Oe)xe+=","+at[Oe];for(let Oe=te;Oe<ve;Oe+=te){xe+=" "+at[Oe];for(let ze=1;ze<ee;++ze)xe+=","+at[Oe+ze]}}(0,y.bZ)(Kt,xe)})});function Ti(Kt,at,ft){const yt=at.getFlatCoordinates(),wt={node:Kt};wt.layout=at.getLayout(),wt.stride=at.getStride();const te=at.getProperties();te.coordinates=yt;const ve=vs[ft[ft.length-1].node.namespaceURI],xe=(0,e.RA)(te,ve);(0,e.ZL)(wt,Jn,e.hg,xe,ft,ve)}const ys=(0,e.C5)(K,["color","fill","outline"]),Qn=(0,e.C5)(K,{outerBoundaryIs:(0,e.A4)(ms),innerBoundaryIs:(0,e.A4)(ms)}),ks=(0,e.G3)("innerBoundaryIs"),Xs=(0,e.G3)("outerBoundaryIs");function Sn(Kt,at,ft){const yt=at.getLinearRings(),wt=yt.shift(),te={node:Kt};(0,e.ZL)(te,Qn,ks,yt,ft),(0,e.ZL)(te,Qn,Xs,[wt],ft)}const $n=(0,e.C5)(K,{color:(0,e.A4)(ln),fill:(0,e.A4)(y.Vi),outline:(0,e.A4)(y.Vi)});function dn(Kt,at){(0,y.f3)(Kt,Math.round(1e6*at)/1e6)}const wi=(0,e.C5)(K,["IconStyle","LabelStyle","LineStyle","PolyStyle"]),Es=(0,e.C5)(K,{IconStyle:(0,e.A4)(function Bi(Kt,at,ft){const yt={node:Kt},wt={},te=at.getSrc(),ee=at.getSize(),ve=at.getImageSize(),xe={href:te};if(ee){xe.w=ee[0],xe.h=ee[1];const ci=at.getAnchor(),ai=at.getOrigin();ai&&ve&&0!==ai[0]&&ai[1]!==ee[1]&&(xe.x=ai[0],xe.y=ve[1]-(ai[1]+ee[1])),!ci||ci[0]===ee[0]/2&&ci[1]===ee[1]/2||(wt.hotSpot={x:ci[0],xunits:"pixels",y:ee[1]-ci[1],yunits:"pixels"})}wt.Icon=xe;let Oe=at.getScaleArray()[0],ze=ee;null===ze&&(ze=Ct),2==ze.length&&(Oe/=ge(ze)),1!==Oe&&(wt.scale=Oe);const He=at.getRotation();0!==He&&(wt.heading=He);const ti=at.getColor();ti&&(wt.color=ti);const li=zn[ft[ft.length-1].node.namespaceURI],pi=(0,e.RA)(wt,li);(0,e.ZL)(yt,zs,e.hg,pi,ft,li)}),LabelStyle:(0,e.A4)(function kn(Kt,at,ft){const yt={node:Kt},wt={},te=at.getFill();te&&(wt.color=te.getColor());const ee=at.getScale();ee&&1!==ee&&(wt.scale=ee);const xe=Kn[ft[ft.length-1].node.namespaceURI],Oe=(0,e.RA)(wt,xe);(0,e.ZL)(yt,cn,e.hg,Oe,ft,xe)}),LineStyle:(0,e.A4)(function fs(Kt,at,ft){const yt={node:Kt},wt={color:at.getColor(),width:Number(at.getWidth())||1},ee=On[ft[ft.length-1].node.namespaceURI],ve=(0,e.RA)(wt,ee);(0,e.ZL)(yt,Yi,e.hg,ve,ft,ee)}),PolyStyle:(0,e.A4)(function en(Kt,at,ft){const yt={node:Kt},wt=at.getFill(),te=at.getStroke(),ee={color:wt?wt.getColor():void 0,fill:!!wt&&void 0,outline:!!te&&void 0},xe=ys[ft[ft.length-1].node.namespaceURI],Oe=(0,e.RA)(ee,xe);(0,e.ZL)(yt,$n,e.hg,Oe,ft,xe)})}),Ys=class Zt extends v{constructor(at){super(),at=at||{},At||function qt(){it=[255,255,255,1],Y=new D.Z({color:it}),ht=[20,2],Tt="pixels",vt="pixels",Ct=[64,64],bt="https://maps.google.com/mapfiles/kml/pushpin/ylw-pushpin.png",Gt=new z.Z({anchor:ht,anchorOrigin:"bottom-left",anchorXUnits:Tt,anchorYUnits:vt,crossOrigin:"anonymous",rotation:0,scale:ge(Ct),size:Ct,src:bt}),ie="NO_IMAGE",zt=new c.Z({color:it,width:1}),de=new c.Z({color:[51,51,51,1],width:2}),ce=new f.Z({font:"bold 16px Helvetica",fill:Y,stroke:de,scale:.8}),dt=new s.ZP({fill:Y,image:Gt,text:ce,stroke:zt,zIndex:0}),At=[dt]}(),this.dataProjection=(0,O.U2)("EPSG:4326"),this.defaultStyle_=at.defaultStyle?at.defaultStyle:At,this.extractStyles_=void 0===at.extractStyles||at.extractStyles,this.writeStyles_=void 0===at.writeStyles||at.writeStyles,this.sharedStyles_={},this.showPointNames_=void 0===at.showPointNames||at.showPointNames,this.crossOrigin_=void 0!==at.crossOrigin?at.crossOrigin:"anonymous",this.iconUrlFunction_=at.iconUrlFunction?at.iconUrlFunction:Mt,this.supportedMediaTypes=["application/vnd.google-earth.kml+xml"]}readDocumentOrFolder_(at,ft){const yt=(0,e.C5)(K,{Document:(0,e.pc)(this.readDocumentOrFolder_,this),Folder:(0,e.pc)(this.readDocumentOrFolder_,this),Placemark:(0,e.Ei)(this.readPlacemark_,this),Style:this.readSharedStyle_.bind(this),StyleMap:this.readSharedStyleMap_.bind(this)}),wt=(0,e.O)([],yt,at,ft,this);if(wt)return wt}readPlacemark_(at,ft){const yt=(0,e.O)({geometry:null},L,at,ft,this);if(!yt)return;const wt=new G.Z,te=at.getAttribute("id");null!==te&&wt.setId(te);const ve=yt.geometry;if(ve&&(0,n.fI)(ve,!1,ft[0]),wt.setGeometry(ve),delete yt.geometry,this.extractStyles_){const ze=function Wt(Kt,at,ft,yt,wt){return function(te,ee){let ve=wt,xe="",Oe=[];if(ve){const He=te.getGeometry();if(He)if(He instanceof k.Z)Oe=He.getGeometriesArrayRecursive().filter(function(ti){const ei=ti.getType();return"Point"===ei||"MultiPoint"===ei}),ve=Oe.length>0;else{const ti=He.getType();ve="Point"===ti||"MultiPoint"===ti}}ve&&(xe=te.get("name"),ve=ve&&!!xe,ve&&/&[^&]+;/.test(xe)&&(gt||(gt=document.createElement("textarea")),gt.innerHTML=xe,xe=gt.value));let ze=ft;if(Kt?ze=Kt:at&&(ze=he(at,ft,yt)),ve){const He=function jt(Kt,at){const ft=[0,0];let yt="start";const wt=Kt.getImage();if(wt){const ve=wt.getSize();if(ve&&2==ve.length){const xe=wt.getScaleArray(),Oe=wt.getAnchor();ft[0]=xe[0]*(ve[0]-Oe[0]),ft[1]=xe[1]*(ve[1]/2-Oe[1]),yt="left"}}let te=Kt.getText();return te?(te=te.clone(),te.setFont(te.getFont()||ce.getFont()),te.setScale(te.getScale()||ce.getScale()),te.setFill(te.getFill()||ce.getFill()),te.setStroke(te.getStroke()||de)):te=ce.clone(),te.setText(at),te.setOffsetX(ft[0]),te.setOffsetY(ft[1]),te.setTextAlign(yt),new s.ZP({image:wt,text:te})}(ze[0],xe);return Oe.length>0?(He.setGeometry(new k.Z(Oe)),[He,new s.ZP({geometry:ze[0].getGeometry(),image:null,fill:ze[0].getFill(),stroke:ze[0].getStroke(),text:null})].concat(ze.slice(1))):He}return ze}}(yt.Style,yt.styleUrl,this.defaultStyle_,this.sharedStyles_,this.showPointNames_);wt.setStyle(ze)}return delete yt.Style,wt.setProperties(yt,!0),wt}readSharedStyle_(at,ft){const yt=at.getAttribute("id");if(null!==yt){const wt=Re.call(this,at,ft);if(wt){let te,ee=at.baseURI;(!ee||"about:blank"==ee)&&(ee=window.location.href),te=ee?new URL("#"+yt,ee).href:"#"+yt,this.sharedStyles_[te]=wt}}}readSharedStyleMap_(at,ft){const yt=at.getAttribute("id");if(null===yt)return;const wt=Q.call(this,at,ft);if(!wt)return;let te,ee=at.baseURI;(!ee||"about:blank"==ee)&&(ee=window.location.href),te=ee?new URL("#"+yt,ee).href:"#"+yt,this.sharedStyles_[te]=wt}readFeatureFromNode(at,ft){return K.includes(at.namespaceURI)&&this.readPlacemark_(at,[this.getReadOptions(at,ft)])||null}readFeaturesFromNode(at,ft){if(!K.includes(at.namespaceURI))return[];let yt;const wt=at.localName;if("Document"==wt||"Folder"==wt)return yt=this.readDocumentOrFolder_(at,[this.getReadOptions(at,ft)]),yt||[];if("Placemark"==wt){const te=this.readPlacemark_(at,[this.getReadOptions(at,ft)]);return te?[te]:[]}if("kml"==wt){yt=[];for(let te=at.firstElementChild;te;te=te.nextElementSibling){const ee=this.readFeaturesFromNode(te,ft);ee&&(0,g.l7)(yt,ee)}return yt}return[]}readName(at){if(at){if("string"==typeof at){const ft=(0,e.Qc)(at);return this.readNameFromDocument(ft)}return(0,e.qk)(at)?this.readNameFromDocument(at):this.readNameFromNode(at)}}readNameFromDocument(at){for(let ft=at.firstChild;ft;ft=ft.nextSibling)if(ft.nodeType==Node.ELEMENT_NODE){const yt=this.readNameFromNode(ft);if(yt)return yt}}readNameFromNode(at){for(let ft=at.firstElementChild;ft;ft=ft.nextElementSibling)if(K.includes(ft.namespaceURI)&&"name"==ft.localName)return(0,y.s2)(ft);for(let ft=at.firstElementChild;ft;ft=ft.nextElementSibling){const yt=ft.localName;if(K.includes(ft.namespaceURI)&&("Document"==yt||"Folder"==yt||"Placemark"==yt||"kml"==yt)){const wt=this.readNameFromNode(ft);if(wt)return wt}}}readNetworkLinks(at){const ft=[];if("string"==typeof at){const yt=(0,e.Qc)(at);(0,g.l7)(ft,this.readNetworkLinksFromDocument(yt))}else(0,e.qk)(at)?(0,g.l7)(ft,this.readNetworkLinksFromDocument(at)):(0,g.l7)(ft,this.readNetworkLinksFromNode(at));return ft}readNetworkLinksFromDocument(at){const ft=[];for(let yt=at.firstChild;yt;yt=yt.nextSibling)yt.nodeType==Node.ELEMENT_NODE&&(0,g.l7)(ft,this.readNetworkLinksFromNode(yt));return ft}readNetworkLinksFromNode(at){const ft=[];for(let yt=at.firstElementChild;yt;yt=yt.nextElementSibling)if(K.includes(yt.namespaceURI)&&"NetworkLink"==yt.localName){const wt=(0,e.O)({},b,yt,[]);ft.push(wt)}for(let yt=at.firstElementChild;yt;yt=yt.nextElementSibling){const wt=yt.localName;K.includes(yt.namespaceURI)&&("Document"==wt||"Folder"==wt||"kml"==wt)&&(0,g.l7)(ft,this.readNetworkLinksFromNode(yt))}return ft}readRegion(at){const ft=[];if("string"==typeof at){const yt=(0,e.Qc)(at);(0,g.l7)(ft,this.readRegionFromDocument(yt))}else(0,e.qk)(at)?(0,g.l7)(ft,this.readRegionFromDocument(at)):(0,g.l7)(ft,this.readRegionFromNode(at));return ft}readRegionFromDocument(at){const ft=[];for(let yt=at.firstChild;yt;yt=yt.nextSibling)yt.nodeType==Node.ELEMENT_NODE&&(0,g.l7)(ft,this.readRegionFromNode(yt));return ft}readRegionFromNode(at){const ft=[];for(let yt=at.firstElementChild;yt;yt=yt.nextElementSibling)if(K.includes(yt.namespaceURI)&&"Region"==yt.localName){const wt=(0,e.O)({},C,yt,[]);ft.push(wt)}for(let yt=at.firstElementChild;yt;yt=yt.nextElementSibling){const wt=yt.localName;K.includes(yt.namespaceURI)&&("Document"==wt||"Folder"==wt||"kml"==wt)&&(0,g.l7)(ft,this.readRegionFromNode(yt))}return ft}writeFeaturesNode(at,ft){ft=this.adaptOptions(ft);const yt=(0,e.c)(K[4],"kml"),wt="http://www.w3.org/2000/xmlns/";yt.setAttributeNS(wt,"xmlns:gx",W[0]),yt.setAttributeNS(wt,"xmlns:xsi",e.fJ),yt.setAttributeNS(e.fJ,"xsi:schemaLocation","http://www.opengis.net/kml/2.2 https://developers.google.com/kml/schema/kml22gx.xsd");const te={node:yt},ee={};at.length>1?ee.Document=at:1==at.length&&(ee.Placemark=at[0]);const ve=N[yt.namespaceURI],xe=(0,e.RA)(ee,ve);return(0,e.ZL)(te,H,e.hg,xe,[ft],ve,this),yt}}},6114:(Bt,ot,a)=>{"use strict";a.d(ot,{Z:()=>v});var G=a(1122),D=a(23),k=a(7090),z=a(1537),U=a(4034),I=a(6697),S=a(7026),P=a(7464),p=a(2632),d=a(2929),u=a(992),c=a(9015),s=a(5784);function n(x,w,O){if(3===x){const y={keys:[],values:[],features:[]},R=O.readVarint()+O.pos;O.readFields(h,y,R),y.length=y.features.length,y.length&&(w[y.name]=y)}}function h(x,w,O){if(15===x)w.version=O.readVarint();else if(1===x)w.name=O.readString();else if(5===x)w.extent=O.readVarint();else if(2===x)w.features.push(O.pos);else if(3===x)w.keys.push(O.readString());else if(4===x){let y=null;const R=O.readVarint()+O.pos;for(;O.pos<R;)y=1==(x=O.readVarint()>>3)?O.readString():2===x?O.readFloat():3===x?O.readDouble():4===x?O.readVarint64():5===x?O.readVarint():6===x?O.readSVarint():7===x?O.readBoolean():null;w.values.push(y)}}function g(x,w,O){if(1==x)w.id=O.readVarint();else if(2==x){const y=O.readVarint()+O.pos;for(;O.pos<y;){const R=w.layer.keys[O.readVarint()],W=w.layer.values[O.readVarint()];w.properties[R]=W}}else 3==x?w.type=O.readVarint():4==x&&(w.geometry=O.pos)}function e(x,w,O){x.pos=w.features[O];const y=x.readVarint()+x.pos,R={layer:w,type:0,properties:{}};return x.readFields(g,R,y),R}const v=class f extends G.ZP{constructor(w){super(),w=w||{},this.dataProjection=new p.Z({code:"",units:"tile-pixels"}),this.featureClass_=w.featureClass?w.featureClass:d.ZP,this.geometryName_=w.geometryName,this.layerName_=w.layerName?w.layerName:"layer",this.layers_=w.layers?w.layers:null,this.idProperty_=w.idProperty,this.supportedMediaTypes=["application/vnd.mapbox-vector-tile","application/x-protobuf"]}readRawGeometry_(w,O,y,R){w.pos=O.geometry;const W=w.readVarint()+w.pos;let K=1,nt=0,A=0,L=0,b=0,M=0;for(;w.pos<W;){if(!nt){const C=w.readVarint();K=7&C,nt=C>>3}nt--,1===K||2===K?(A+=w.readSVarint(),L+=w.readSVarint(),1===K&&b>M&&(R.push(b),M=b),y.push(A,L),b+=2):7===K?b>M&&(y.push(y[M],y[M+1]),b+=2):(0,u.h)(!1,59)}b>M&&(R.push(b),M=b)}createFeature_(w,O,y){const R=O.type;if(0===R)return null;let W;const K=O.properties;let nt;this.idProperty_?(nt=K[this.idProperty_],delete K[this.idProperty_]):nt=O.id,K[this.layerName_]=O.layer.name;const A=[],L=[];this.readRawGeometry_(w,O,A,L);const b=function E(x,w){let O;return 1===x?O=1===w?"Point":"MultiPoint":2===x?O=1===w?"LineString":"MultiLineString":3===x&&(O="Polygon"),O}(R,L.length);if(this.featureClass_===d.ZP)W=new this.featureClass_(b,A,L,K,nt),W.transform(y.dataProjection);else{let M;if("Polygon"==b){const H=(0,s.Q3)(A,L);M=H.length>1?new U.Z(A,"XY",H):new P.ZP(A,"XY",L)}else M="Point"===b?new S.Z(A,"XY"):"LineString"===b?new D.Z(A,"XY"):"MultiPoint"===b?new z.Z(A,"XY"):"MultiLineString"===b?new k.Z(A,"XY",L):null;W=new(0,this.featureClass_),this.geometryName_&&W.setGeometryName(this.geometryName_);const N=(0,G.fI)(M,!1,y);W.setGeometry(N),void 0!==nt&&W.setId(nt),W.setProperties(K,!0)}return W}getType(){return"arraybuffer"}readFeatures(w,O){const y=this.layers_;O=this.adaptOptions(O);const R=(0,c.U2)(O.dataProjection);R.setWorldExtent(O.extent),O.dataProjection=R;const W=new I(w),K=W.readFields(n,{}),nt=[];for(const A in K){if(y&&!y.includes(A))continue;const L=K[A];R.setExtent(L?[0,0,L.extent,L.extent]:null);for(let M=0,C=L.length;M<C;++M){const N=e(W,L,M),H=this.createFeature_(W,N,O);null!==H&&nt.push(H)}}return nt}readProjection(w){return this.dataProjection}setLayers(w){this.layers_=w}}},52:(Bt,ot,a)=>{"use strict";a.d(ot,{$L:()=>S,Vi:()=>d,_E:()=>P,bZ:()=>n,ej:()=>I,f3:()=>s,fy:()=>U,s2:()=>p,ud:()=>D,v$:()=>k,xO:()=>u});var G=a(8809);function D(h){return k((0,G.Ve)(h,!1))}function k(h){const g=/^\s*(true|1)|(false|0)\s*$/.exec(h);if(g)return void 0!==g[1]||!1}function U(h){return I((0,G.Ve)(h,!1))}function I(h){const g=/^\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)\s*$/i.exec(h);if(g)return parseFloat(g[1])}function S(h){return P((0,G.Ve)(h,!1))}function P(h){const g=/^\s*(\d+)\s*$/.exec(h);if(g)return parseInt(g[1],10)}function p(h){return(0,G.Ve)(h,!1).trim()}function d(h,g){n(h,g?"1":"0")}function u(h,g){h.appendChild((0,G.Me)().createCDATASection(g))}function s(h,g){const e=g.toPrecision();h.appendChild((0,G.Me)().createTextNode(e))}function n(h,g){h.appendChild((0,G.Me)().createTextNode(g))}},1334:(Bt,ot,a)=>{"use strict";a.d(ot,{Dv:()=>k,Zn:()=>z,qe:()=>U,uX:()=>D});var G=a(142);function D(){return!0}function k(){return!1}function z(){}function U(S){let p,d,u,P=!1;return function(){const c=Array.prototype.slice.call(arguments);return(!P||this!==u||!(0,G.fS)(c,d))&&(P=!0,u=this,d=c,p=S.apply(this,arguments)),p}}},4023:(Bt,ot,a)=>{"use strict";a.d(ot,{Z:()=>d});var G=a(4115),D=a(513),k=a(7139),z=a(9543),U=a(9015),I=a(1334),S=a(3904);const P=(0,k.Ue)(),d=class p extends G.Z{constructor(){super(),this.extent_=(0,z.lJ)(),this.extentRevision_=-1,this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=0,this.simplifyTransformedInternal=(0,I.qe)(function(c,s,f){if(!f)return this.getSimplifiedGeometry(s);const n=this.clone();return n.applyTransform(f),n.getSimplifiedGeometry(s)})}simplifyTransformed(c,s){return this.simplifyTransformedInternal(this.getRevision(),c,s)}clone(){return(0,D.O3)()}closestPointXY(c,s,f,n){return(0,D.O3)()}containsXY(c,s){const f=this.getClosestPoint([c,s]);return f[0]===c&&f[1]===s}getClosestPoint(c,s){return this.closestPointXY(c[0],c[1],s=s||[NaN,NaN],1/0),s}intersectsCoordinate(c){return this.containsXY(c[0],c[1])}computeExtent(c){return(0,D.O3)()}getExtent(c){if(this.extentRevision_!=this.getRevision()){const s=this.computeExtent(this.extent_);(isNaN(s[0])||isNaN(s[1]))&&(0,z.YN)(s),this.extentRevision_=this.getRevision()}return(0,z.EO)(this.extent_,c)}rotate(c,s){(0,D.O3)()}scale(c,s,f){(0,D.O3)()}simplify(c){return this.getSimplifiedGeometry(c*c)}getSimplifiedGeometry(c){return(0,D.O3)()}getType(){return(0,D.O3)()}applyTransform(c){(0,D.O3)()}intersectsExtent(c){return(0,D.O3)()}translate(c,s){(0,D.O3)()}transform(c,s){const f=(0,U.U2)(c),n="tile-pixels"==f.getUnits()?function(h,g,e){const E=f.getExtent(),v=f.getWorldExtent(),x=(0,z.Cr)(v)/(0,z.Cr)(E);return(0,k.qC)(P,v[0],v[3],x,-x,0,0,0),(0,S.vT)(h,0,h.length,e,P,g),(0,U.Ck)(f,s)(h,g,e)}:(0,U.Ck)(f,s);return this.applyTransform(n),this}}},4505:(Bt,ot,a)=>{"use strict";a.d(ot,{Z:()=>S});var G=a(3044),D=a(4023),k=a(9543),z=a(2716);class U extends D.Z{constructor(p){super(),this.geometries_=p||null,this.changeEventsKeys_=[],this.listenGeometriesChange_()}unlistenGeometriesChange_(){this.changeEventsKeys_.forEach(z.bN),this.changeEventsKeys_.length=0}listenGeometriesChange_(){if(this.geometries_)for(let p=0,d=this.geometries_.length;p<d;++p)this.changeEventsKeys_.push((0,z.oL)(this.geometries_[p],G.Z.CHANGE,this.changed,this))}clone(){const p=new U(null);return p.setGeometries(this.geometries_),p.applyProperties(this),p}closestPointXY(p,d,u,c){if(c<(0,k.qf)(this.getExtent(),p,d))return c;const s=this.geometries_;for(let f=0,n=s.length;f<n;++f)c=s[f].closestPointXY(p,d,u,c);return c}containsXY(p,d){const u=this.geometries_;for(let c=0,s=u.length;c<s;++c)if(u[c].containsXY(p,d))return!0;return!1}computeExtent(p){(0,k.YN)(p);const d=this.geometries_;for(let u=0,c=d.length;u<c;++u)(0,k.l7)(p,d[u].getExtent());return p}getGeometries(){return I(this.geometries_)}getGeometriesArray(){return this.geometries_}getGeometriesArrayRecursive(){let p=[];const d=this.geometries_;for(let u=0,c=d.length;u<c;++u)d[u].getType()===this.getType()?p=p.concat(d[u].getGeometriesArrayRecursive()):p.push(d[u]);return p}getSimplifiedGeometry(p){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),p<0||0!==this.simplifiedGeometryMaxMinSquaredTolerance&&p<this.simplifiedGeometryMaxMinSquaredTolerance)return this;const d=[],u=this.geometries_;let c=!1;for(let s=0,f=u.length;s<f;++s){const n=u[s],h=n.getSimplifiedGeometry(p);d.push(h),h!==n&&(c=!0)}if(c){const s=new U(null);return s.setGeometriesArray(d),s}return this.simplifiedGeometryMaxMinSquaredTolerance=p,this}getType(){return"GeometryCollection"}intersectsExtent(p){const d=this.geometries_;for(let u=0,c=d.length;u<c;++u)if(d[u].intersectsExtent(p))return!0;return!1}isEmpty(){return 0===this.geometries_.length}rotate(p,d){const u=this.geometries_;for(let c=0,s=u.length;c<s;++c)u[c].rotate(p,d);this.changed()}scale(p,d,u){u||(u=(0,k.qg)(this.getExtent()));const c=this.geometries_;for(let s=0,f=c.length;s<f;++s)c[s].scale(p,d,u);this.changed()}setGeometries(p){this.setGeometriesArray(I(p))}setGeometriesArray(p){this.unlistenGeometriesChange_(),this.geometries_=p,this.listenGeometriesChange_(),this.changed()}applyTransform(p){const d=this.geometries_;for(let u=0,c=d.length;u<c;++u)d[u].applyTransform(p);this.changed()}translate(p,d){const u=this.geometries_;for(let c=0,s=u.length;c<s;++c)u[c].translate(p,d);this.changed()}disposeInternal(){this.unlistenGeometriesChange_(),super.disposeInternal()}}function I(P){const p=[];for(let d=0,u=P.length;d<u;++d)p.push(P[d].clone());return p}const S=U},23:(Bt,ot,a)=>{"use strict";a.d(ot,{Z:()=>s});var G=a(1790),D=a(4558),k=a(9543),z=a(9216),U=a(1757),I=a(142),S=a(8665),P=a(4850),p=a(7170),d=a(4429),u=a(8575);class c extends G.ZP{constructor(n,h){super(),this.flatMidpoint_=null,this.flatMidpointRevision_=-1,this.maxDelta_=-1,this.maxDeltaRevision_=-1,void 0===h||Array.isArray(n[0])?this.setCoordinates(n,h):this.setFlatCoordinates(h,n)}appendCoordinate(n){this.flatCoordinates?(0,I.l7)(this.flatCoordinates,n):this.flatCoordinates=n.slice(),this.changed()}clone(){const n=new c(this.flatCoordinates.slice(),this.layout);return n.applyProperties(this),n}closestPointXY(n,h,g,e){return e<(0,k.qf)(this.getExtent(),n,h)?e:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt((0,D.Bv)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),(0,D.H$)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!1,n,h,g,e))}forEachSegment(n){return(0,S.E)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,n)}getCoordinateAtM(n,h){return"XYM"!=this.layout&&"XYZM"!=this.layout?null:(0,p.iJ)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,n,h=void 0!==h&&h)}getCoordinates(){return(0,P.Ml)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinateAt(n,h){return(0,p.WW)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,n,h,this.stride)}getLength(){return(0,u.W)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getFlatMidpoint(){return this.flatMidpointRevision_!=this.getRevision()&&(this.flatMidpoint_=this.getCoordinateAt(.5,this.flatMidpoint_),this.flatMidpointRevision_=this.getRevision()),this.flatMidpoint_}getSimplifiedGeometryInternal(n){const h=[];return h.length=(0,U.dt)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,n,h,0),new c(h,"XY")}getType(){return"LineString"}intersectsExtent(n){return(0,d.Kz)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,n)}setCoordinates(n,h){this.setLayout(h,n,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=(0,z.Sg)(this.flatCoordinates,0,n,this.stride),this.changed()}}const s=c},7090:(Bt,ot,a)=>{"use strict";a.d(ot,{Z:()=>c});var G=a(23),D=a(1790),k=a(4558),z=a(9543),U=a(9216),I=a(1757),S=a(142),P=a(4850),p=a(7170),d=a(4429);class u extends D.ZP{constructor(f,n,h){if(super(),this.ends_=[],this.maxDelta_=-1,this.maxDeltaRevision_=-1,Array.isArray(f[0]))this.setCoordinates(f,n);else if(void 0!==n&&h)this.setFlatCoordinates(n,f),this.ends_=h;else{let g=this.getLayout();const e=f,E=[],v=[];for(let x=0,w=e.length;x<w;++x){const O=e[x];0===x&&(g=O.getLayout()),(0,S.l7)(E,O.getFlatCoordinates()),v.push(E.length)}this.setFlatCoordinates(g,E),this.ends_=v}}appendLineString(f){this.flatCoordinates?(0,S.l7)(this.flatCoordinates,f.getFlatCoordinates().slice()):this.flatCoordinates=f.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const f=new u(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return f.applyProperties(this),f}closestPointXY(f,n,h,g){return g<(0,z.qf)(this.getExtent(),f,n)?g:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt((0,k.Af)(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),(0,k.Xl)(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!1,f,n,h,g))}getCoordinateAtM(f,n,h){return"XYM"!=this.layout&&"XYZM"!=this.layout||0===this.flatCoordinates.length?null:(0,p.dG)(this.flatCoordinates,0,this.ends_,this.stride,f,n=void 0!==n&&n,h=void 0!==h&&h)}getCoordinates(){return(0,P.o1)(this.flatCoordinates,0,this.ends_,this.stride)}getEnds(){return this.ends_}getLineString(f){return f<0||this.ends_.length<=f?null:new G.Z(this.flatCoordinates.slice(0===f?0:this.ends_[f-1],this.ends_[f]),this.layout)}getLineStrings(){const f=this.flatCoordinates,n=this.ends_,h=this.layout,g=[];let e=0;for(let E=0,v=n.length;E<v;++E){const x=n[E],w=new G.Z(f.slice(e,x),h);g.push(w),e=x}return g}getFlatMidpoints(){const f=[],n=this.flatCoordinates;let h=0;const g=this.ends_,e=this.stride;for(let E=0,v=g.length;E<v;++E){const x=g[E],w=(0,p.WW)(n,h,x,e,.5);(0,S.l7)(f,w),h=x}return f}getSimplifiedGeometryInternal(f){const n=[],h=[];return n.length=(0,I.UJ)(this.flatCoordinates,0,this.ends_,this.stride,f,n,0,h),new u(n,"XY",h)}getType(){return"MultiLineString"}intersectsExtent(f){return(0,d.AW)(this.flatCoordinates,0,this.ends_,this.stride,f)}setCoordinates(f,n){this.setLayout(n,f,2),this.flatCoordinates||(this.flatCoordinates=[]);const h=(0,U._5)(this.flatCoordinates,0,f,this.stride,this.ends_);this.flatCoordinates.length=0===h.length?0:h[h.length-1],this.changed()}}const c=u},1537:(Bt,ot,a)=>{"use strict";a.d(ot,{Z:()=>p});var G=a(7026),D=a(1790),k=a(9543),z=a(9216),U=a(142),I=a(4850),S=a(4331);class P extends D.ZP{constructor(u,c){super(),c&&!Array.isArray(u[0])?this.setFlatCoordinates(c,u):this.setCoordinates(u,c)}appendPoint(u){this.flatCoordinates?(0,U.l7)(this.flatCoordinates,u.getFlatCoordinates()):this.flatCoordinates=u.getFlatCoordinates().slice(),this.changed()}clone(){const u=new P(this.flatCoordinates.slice(),this.layout);return u.applyProperties(this),u}closestPointXY(u,c,s,f){if(f<(0,k.qf)(this.getExtent(),u,c))return f;const n=this.flatCoordinates,h=this.stride;for(let g=0,e=n.length;g<e;g+=h){const E=(0,S.bI)(u,c,n[g],n[g+1]);if(E<f){f=E;for(let v=0;v<h;++v)s[v]=n[g+v];s.length=h}}return f}getCoordinates(){return(0,I.Ml)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getPoint(u){return u<0||(this.flatCoordinates?this.flatCoordinates.length/this.stride:0)<=u?null:new G.Z(this.flatCoordinates.slice(u*this.stride,(u+1)*this.stride),this.layout)}getPoints(){const u=this.flatCoordinates,c=this.layout,s=this.stride,f=[];for(let n=0,h=u.length;n<h;n+=s){const g=new G.Z(u.slice(n,n+s),c);f.push(g)}return f}getType(){return"MultiPoint"}intersectsExtent(u){const c=this.flatCoordinates,s=this.stride;for(let f=0,n=c.length;f<n;f+=s)if((0,k.jE)(u,c[f],c[f+1]))return!0;return!1}setCoordinates(u,c){this.setLayout(c,u,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=(0,z.Sg)(this.flatCoordinates,0,u,this.stride),this.changed()}}const p=P},4034:(Bt,ot,a)=>{"use strict";a.d(ot,{Z:()=>g});var G=a(1537),D=a(7464),k=a(1790),z=a(4558),U=a(9543),I=a(9216),S=a(142),P=a(5577),p=a(4850),d=a(4429),u=a(5784),c=a(4793),s=a(2783),f=a(5101),n=a(1757);class h extends k.ZP{constructor(E,v,x){if(super(),this.endss_=[],this.flatInteriorPointsRevision_=-1,this.flatInteriorPoints_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,!x&&!Array.isArray(E[0])){let w=this.getLayout();const O=E,y=[],R=[];for(let W=0,K=O.length;W<K;++W){const nt=O[W];0===W&&(w=nt.getLayout());const A=y.length,L=nt.getEnds();for(let b=0,M=L.length;b<M;++b)L[b]+=A;(0,S.l7)(y,nt.getFlatCoordinates()),R.push(L)}v=w,E=y,x=R}void 0!==v&&x?(this.setFlatCoordinates(v,E),this.endss_=x):this.setCoordinates(E,v)}appendPolygon(E){let v;if(this.flatCoordinates){const x=this.flatCoordinates.length;(0,S.l7)(this.flatCoordinates,E.getFlatCoordinates()),v=E.getEnds().slice();for(let w=0,O=v.length;w<O;++w)v[w]+=x}else this.flatCoordinates=E.getFlatCoordinates().slice(),v=E.getEnds().slice(),this.endss_.push();this.endss_.push(v),this.changed()}clone(){const E=this.endss_.length,v=new Array(E);for(let w=0;w<E;++w)v[w]=this.endss_[w].slice();const x=new h(this.flatCoordinates.slice(),this.layout,v);return x.applyProperties(this),x}closestPointXY(E,v,x,w){return w<(0,U.qf)(this.getExtent(),E,v)?w:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt((0,z.sD)(this.flatCoordinates,0,this.endss_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),(0,z.gI)(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,this.maxDelta_,!0,E,v,x,w))}containsXY(E,v){return(0,f.Zl)(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,E,v)}getArea(){return(0,c.Eu)(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride)}getCoordinates(E){let v;return void 0!==E?(v=this.getOrientedFlatCoordinates().slice(),(0,u.dL)(v,0,this.endss_,this.stride,E)):v=this.flatCoordinates,(0,p.ug)(v,0,this.endss_,this.stride)}getEndss(){return this.endss_}getFlatInteriorPoints(){if(this.flatInteriorPointsRevision_!=this.getRevision()){const E=(0,s.E)(this.flatCoordinates,0,this.endss_,this.stride);this.flatInteriorPoints_=(0,P.U)(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,E),this.flatInteriorPointsRevision_=this.getRevision()}return this.flatInteriorPoints_}getInteriorPoints(){return new G.Z(this.getFlatInteriorPoints().slice(),"XYM")}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const E=this.flatCoordinates;(0,u.Oj)(E,0,this.endss_,this.stride)?this.orientedFlatCoordinates_=E:(this.orientedFlatCoordinates_=E.slice(),this.orientedFlatCoordinates_.length=(0,u.dL)(this.orientedFlatCoordinates_,0,this.endss_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(E){const v=[],x=[];return v.length=(0,n.Pp)(this.flatCoordinates,0,this.endss_,this.stride,Math.sqrt(E),v,0,x),new h(v,"XY",x)}getPolygon(E){if(E<0||this.endss_.length<=E)return null;let v;if(0===E)v=0;else{const O=this.endss_[E-1];v=O[O.length-1]}const x=this.endss_[E].slice(),w=x[x.length-1];if(0!==v)for(let O=0,y=x.length;O<y;++O)x[O]-=v;return new D.ZP(this.flatCoordinates.slice(v,w),this.layout,x)}getPolygons(){const E=this.layout,v=this.flatCoordinates,x=this.endss_,w=[];let O=0;for(let y=0,R=x.length;y<R;++y){const W=x[y].slice(),K=W[W.length-1];if(0!==O)for(let A=0,L=W.length;A<L;++A)W[A]-=O;const nt=new D.ZP(v.slice(O,K),E,W);w.push(nt),O=K}return w}getType(){return"MultiPolygon"}intersectsExtent(E){return(0,d.oW)(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,E)}setCoordinates(E,v){this.setLayout(v,E,3),this.flatCoordinates||(this.flatCoordinates=[]);const x=(0,I.QT)(this.flatCoordinates,0,E,this.stride,this.endss_);if(0===x.length)this.flatCoordinates.length=0;else{const w=x[x.length-1];this.flatCoordinates.length=0===w.length?0:w[w.length-1]}this.changed()}}const g=h},7026:(Bt,ot,a)=>{"use strict";a.d(ot,{Z:()=>I});var G=a(1790),D=a(9543),k=a(9216),z=a(4331);class U extends G.ZP{constructor(P,p){super(),this.setCoordinates(P,p)}clone(){const P=new U(this.flatCoordinates.slice(),this.layout);return P.applyProperties(this),P}closestPointXY(P,p,d,u){const c=this.flatCoordinates,s=(0,z.bI)(P,p,c[0],c[1]);if(s<u){const f=this.stride;for(let n=0;n<f;++n)d[n]=c[n];return d.length=f,s}return u}getCoordinates(){return this.flatCoordinates?this.flatCoordinates.slice():[]}computeExtent(P){return(0,D.HK)(this.flatCoordinates,P)}getType(){return"Point"}intersectsExtent(P){return(0,D.jE)(P,this.flatCoordinates[0],this.flatCoordinates[1])}setCoordinates(P,p){this.setLayout(p,P,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=(0,k.IG)(this.flatCoordinates,0,P,this.stride),this.changed()}}const I=U},7464:(Bt,ot,a)=>{"use strict";a.d(ot,{ZP:()=>g,oJ:()=>E});var G=a(1790),D=a(4558),k=a(9543),z=a(9216),U=a(1757),I=a(4850),S=a(4793);class P extends G.ZP{constructor(O,y){super(),this.maxDelta_=-1,this.maxDeltaRevision_=-1,void 0===y||Array.isArray(O[0])?this.setCoordinates(O,y):this.setFlatCoordinates(y,O)}clone(){return new P(this.flatCoordinates.slice(),this.layout)}closestPointXY(O,y,R,W){return W<(0,k.qf)(this.getExtent(),O,y)?W:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt((0,D.Bv)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),(0,D.H$)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,O,y,R,W))}getArea(){return(0,S.QQ)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinates(){return(0,I.Ml)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getSimplifiedGeometryInternal(O){const y=[];return y.length=(0,U.dt)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,O,y,0),new P(y,"XY")}getType(){return"LinearRing"}intersectsExtent(O){return!1}setCoordinates(O,y){this.setLayout(y,O,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=(0,z.Sg)(this.flatCoordinates,0,O,this.stride),this.changed()}}const p=P;var d=a(7026),u=a(142),c=a(5577),s=a(4429),f=a(5784),n=a(5101);class h extends G.ZP{constructor(O,y,R){super(),this.ends_=[],this.flatInteriorPointRevision_=-1,this.flatInteriorPoint_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,void 0!==y&&R?(this.setFlatCoordinates(y,O),this.ends_=R):this.setCoordinates(O,y)}appendLinearRing(O){this.flatCoordinates?(0,u.l7)(this.flatCoordinates,O.getFlatCoordinates()):this.flatCoordinates=O.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const O=new h(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return O.applyProperties(this),O}closestPointXY(O,y,R,W){return W<(0,k.qf)(this.getExtent(),O,y)?W:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt((0,D.Af)(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),(0,D.Xl)(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,O,y,R,W))}containsXY(O,y){return(0,n.wY)(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,O,y)}getArea(){return(0,S.KP)(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)}getCoordinates(O){let y;return void 0!==O?(y=this.getOrientedFlatCoordinates().slice(),(0,f.zX)(y,0,this.ends_,this.stride,O)):y=this.flatCoordinates,(0,I.o1)(y,0,this.ends_,this.stride)}getEnds(){return this.ends_}getFlatInteriorPoint(){if(this.flatInteriorPointRevision_!=this.getRevision()){const O=(0,k.qg)(this.getExtent());this.flatInteriorPoint_=(0,c.X)(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,O,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_}getInteriorPoint(){return new d.Z(this.getFlatInteriorPoint(),"XYM")}getLinearRingCount(){return this.ends_.length}getLinearRing(O){return O<0||this.ends_.length<=O?null:new p(this.flatCoordinates.slice(0===O?0:this.ends_[O-1],this.ends_[O]),this.layout)}getLinearRings(){const O=this.layout,y=this.flatCoordinates,R=this.ends_,W=[];let K=0;for(let nt=0,A=R.length;nt<A;++nt){const L=R[nt],b=new p(y.slice(K,L),O);W.push(b),K=L}return W}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const O=this.flatCoordinates;(0,f.$v)(O,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=O:(this.orientedFlatCoordinates_=O.slice(),this.orientedFlatCoordinates_.length=(0,f.zX)(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(O){const y=[],R=[];return y.length=(0,U.Zh)(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(O),y,0,R),new h(y,"XY",R)}getType(){return"Polygon"}intersectsExtent(O){return(0,s.ac)(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,O)}setCoordinates(O,y){this.setLayout(y,O,2),this.flatCoordinates||(this.flatCoordinates=[]);const R=(0,z._5)(this.flatCoordinates,0,O,this.stride,this.ends_);this.flatCoordinates.length=0===R.length?0:R[R.length-1],this.changed()}}const g=h;function E(w){const O=w[0],y=w[1],R=w[2],W=w[3],K=[O,y,O,W,R,W,R,y,O,y];return new h(K,"XY",[K.length])}},1790:(Bt,ot,a)=>{"use strict";a.d(ot,{Kr:()=>P,ZP:()=>p});var G=a(4023),D=a(513),k=a(9543),z=a(3904);function S(d){let u;return"XY"==d?u=2:"XYZ"==d||"XYM"==d?u=3:"XYZM"==d&&(u=4),u}function P(d,u,c){const s=d.getFlatCoordinates();if(!s)return null;const f=d.getStride();return(0,z.vT)(s,0,s.length,f,u,c)}const p=class U extends G.Z{constructor(){super(),this.layout="XY",this.stride=2,this.flatCoordinates=null}computeExtent(u){return(0,k.GN)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,u)}getCoordinates(){return(0,D.O3)()}getFirstCoordinate(){return this.flatCoordinates.slice(0,this.stride)}getFlatCoordinates(){return this.flatCoordinates}getLastCoordinate(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)}getLayout(){return this.layout}getSimplifiedGeometry(u){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),u<0||0!==this.simplifiedGeometryMaxMinSquaredTolerance&&u<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;const c=this.getSimplifiedGeometryInternal(u);return c.getFlatCoordinates().length<this.flatCoordinates.length?c:(this.simplifiedGeometryMaxMinSquaredTolerance=u,this)}getSimplifiedGeometryInternal(u){return this}getStride(){return this.stride}setFlatCoordinates(u,c){this.stride=S(u),this.layout=u,this.flatCoordinates=c}setCoordinates(u,c){(0,D.O3)()}setLayout(u,c,s){let f;if(u)f=S(u);else{for(let n=0;n<s;++n){if(0===c.length)return this.layout="XY",void(this.stride=2);c=c[0]}f=c.length,u=function I(d){let u;return 2==d?u="XY":3==d?u="XYZ":4==d&&(u="XYZM"),u}(f)}this.layout=u,this.stride=f}applyTransform(u){this.flatCoordinates&&(u(this.flatCoordinates,this.flatCoordinates,this.stride),this.changed())}rotate(u,c){const s=this.getFlatCoordinates();if(s){const f=this.getStride();(0,z.U1)(s,0,s.length,f,u,c,s),this.changed()}}scale(u,c,s){void 0===c&&(c=u),s||(s=(0,k.qg)(this.getExtent()));const f=this.getFlatCoordinates();if(f){const n=this.getStride();(0,z.bA)(f,0,f.length,n,u,c,s,f),this.changed()}}translate(u,c){const s=this.getFlatCoordinates();if(s){const f=this.getStride();(0,z.Iu)(s,0,s.length,f,u,c,s),this.changed()}}}},4793:(Bt,ot,a)=>{"use strict";function G(z,U,I,S){let P=0,p=z[I-S],d=z[I-S+1];for(;U<I;U+=S){const u=z[U],c=z[U+1];P+=d*u-p*c,p=u,d=c}return P/2}function D(z,U,I,S){let P=0;for(let p=0,d=I.length;p<d;++p){const u=I[p];P+=G(z,U,u,S),U=u}return P}function k(z,U,I,S){let P=0;for(let p=0,d=I.length;p<d;++p){const u=I[p];P+=D(z,U,u,S),U=u[u.length-1]}return P}a.d(ot,{Eu:()=>k,KP:()=>D,QQ:()=>G})},2783:(Bt,ot,a)=>{"use strict";a.d(ot,{E:()=>D});var G=a(9543);function D(k,z,U,I){const S=[];let P=(0,G.lJ)();for(let p=0,d=U.length;p<d;++p){const u=U[p];P=(0,G.GN)(k,z,u[0],I),S.push((P[0]+P[2])/2,(P[1]+P[3])/2),z=u[u.length-1]}return S}},4558:(Bt,ot,a)=>{"use strict";a.d(ot,{Af:()=>z,Bv:()=>k,H$:()=>I,Xl:()=>S,gI:()=>P,sD:()=>U});var G=a(4331);function D(p,d,u,c,s,f,n){const h=p[d],g=p[d+1],e=p[u]-h,E=p[u+1]-g;let v;if(0===e&&0===E)v=d;else{const x=((s-h)*e+(f-g)*E)/(e*e+E*E);if(x>1)v=u;else{if(x>0){for(let w=0;w<c;++w)n[w]=(0,G.t7)(p[d+w],p[u+w],x);return void(n.length=c)}v=d}}for(let x=0;x<c;++x)n[x]=p[v+x];n.length=c}function k(p,d,u,c,s){let f=p[d],n=p[d+1];for(d+=c;d<u;d+=c){const h=p[d],g=p[d+1],e=(0,G.bI)(f,n,h,g);e>s&&(s=e),f=h,n=g}return s}function z(p,d,u,c,s){for(let f=0,n=u.length;f<n;++f){const h=u[f];s=k(p,d,h,c,s),d=h}return s}function U(p,d,u,c,s){for(let f=0,n=u.length;f<n;++f){const h=u[f];s=z(p,d,h,c,s),d=h[h.length-1]}return s}function I(p,d,u,c,s,f,n,h,g,e,E){if(d==u)return e;let v,x;if(0===s){if(x=(0,G.bI)(n,h,p[d],p[d+1]),x<e){for(v=0;v<c;++v)g[v]=p[d+v];return g.length=c,x}return e}E=E||[NaN,NaN];let w=d+c;for(;w<u;)if(D(p,w-c,w,c,n,h,E),x=(0,G.bI)(n,h,E[0],E[1]),x<e){for(e=x,v=0;v<c;++v)g[v]=E[v];g.length=c,w+=c}else w+=c*Math.max((Math.sqrt(x)-Math.sqrt(e))/s|0,1);if(f&&(D(p,u-c,d,c,n,h,E),x=(0,G.bI)(n,h,E[0],E[1]),x<e)){for(e=x,v=0;v<c;++v)g[v]=E[v];g.length=c}return e}function S(p,d,u,c,s,f,n,h,g,e,E){E=E||[NaN,NaN];for(let v=0,x=u.length;v<x;++v){const w=u[v];e=I(p,d,w,c,s,f,n,h,g,e,E),d=w}return e}function P(p,d,u,c,s,f,n,h,g,e,E){E=E||[NaN,NaN];for(let v=0,x=u.length;v<x;++v){const w=u[v];e=S(p,d,w,c,s,f,n,h,g,e,E),d=w[w.length-1]}return e}},5101:(Bt,ot,a)=>{"use strict";a.d(ot,{TG:()=>k,Zl:()=>U,uG:()=>D,wY:()=>z});var G=a(9543);function D(I,S,P,p,d){return!(0,G.H6)(d,function(c){return!k(I,S,P,p,c[0],c[1])})}function k(I,S,P,p,d,u){let c=0,s=I[P-p],f=I[P-p+1];for(;S<P;S+=p){const n=I[S],h=I[S+1];f<=u?h>u&&(n-s)*(u-f)-(d-s)*(h-f)>0&&c++:h<=u&&(n-s)*(u-f)-(d-s)*(h-f)<0&&c--,s=n,f=h}return 0!==c}function z(I,S,P,p,d,u){if(0===P.length||!k(I,S,P[0],p,d,u))return!1;for(let c=1,s=P.length;c<s;++c)if(k(I,P[c-1],P[c],p,d,u))return!1;return!0}function U(I,S,P,p,d,u){if(0===P.length)return!1;for(let c=0,s=P.length;c<s;++c){const f=P[c];if(z(I,S,f,p,d,u))return!0;S=f[f.length-1]}return!1}},9216:(Bt,ot,a)=>{"use strict";function G(U,I,S,P){for(let p=0,d=S.length;p<d;++p)U[I++]=S[p];return I}function D(U,I,S,P){for(let p=0,d=S.length;p<d;++p){const u=S[p];for(let c=0;c<P;++c)U[I++]=u[c]}return I}function k(U,I,S,P,p){p=p||[];let d=0;for(let u=0,c=S.length;u<c;++u){const s=D(U,I,S[u],P);p[d++]=s,I=s}return p.length=d,p}function z(U,I,S,P,p){p=p||[];let d=0;for(let u=0,c=S.length;u<c;++u){const s=k(U,I,S[u],P,p[d]);0===s.length&&(s[0]=I),p[d++]=s,I=s[s.length-1]}return p.length=d,p}a.d(ot,{IG:()=>G,QT:()=>z,Sg:()=>D,_5:()=>k})},4850:(Bt,ot,a)=>{"use strict";function G(z,U,I,S,P){P=void 0!==P?P:[];let p=0;for(let d=U;d<I;d+=S)P[p++]=z.slice(d,d+S);return P.length=p,P}function D(z,U,I,S,P){P=void 0!==P?P:[];let p=0;for(let d=0,u=I.length;d<u;++d){const c=I[d];P[p++]=G(z,U,c,S,P[p]),U=c}return P.length=p,P}function k(z,U,I,S,P){P=void 0!==P?P:[];let p=0;for(let d=0,u=I.length;d<u;++d){const c=I[d];P[p++]=1===c.length&&c[0]===U?[]:D(z,U,c,S,P[p]),U=c[c.length-1]}return P.length=p,P}a.d(ot,{Ml:()=>G,o1:()=>D,ug:()=>k})},5577:(Bt,ot,a)=>{"use strict";a.d(ot,{U:()=>z,X:()=>k});var G=a(142),D=a(5101);function k(U,I,S,P,p,d,u){let c,s,f,n,h,g,e;const E=p[d+1],v=[];for(let O=0,y=S.length;O<y;++O){const R=S[O];for(n=U[R-P],g=U[R-P+1],c=I;c<R;c+=P)h=U[c],e=U[c+1],(E<=g&&e<=E||g<=E&&E<=e)&&(f=(E-g)/(e-g)*(h-n)+n,v.push(f)),n=h,g=e}let x=NaN,w=-1/0;for(v.sort(G.j2),n=v[0],c=1,s=v.length;c<s;++c){h=v[c];const O=Math.abs(h-n);O>w&&(f=(n+h)/2,(0,D.wY)(U,I,S,P,f,E)&&(x=f,w=O)),n=h}return isNaN(x)&&(x=p[d]),u?(u.push(x,E,w),u):[x,E,w]}function z(U,I,S,P,p){let d=[];for(let u=0,c=S.length;u<c;++u){const s=S[u];d=k(U,I,s,P,p,2*u,d),I=s[s.length-1]}return d}},7170:(Bt,ot,a)=>{"use strict";a.d(ot,{WW:()=>k,dG:()=>U,iJ:()=>z});var G=a(142),D=a(4331);function k(I,S,P,p,d,u,c){let s,f;const n=(P-S)/p;if(1===n)s=S;else if(2===n)s=S,f=d;else if(0!==n){let h=I[S],g=I[S+1],e=0;const E=[0];for(let w=S+p;w<P;w+=p){const O=I[w],y=I[w+1];e+=Math.sqrt((O-h)*(O-h)+(y-g)*(y-g)),E.push(e),h=O,g=y}const v=d*e,x=(0,G.ry)(E,v);x<0?(f=(v-E[-x-2])/(E[-x-1]-E[-x-2]),s=S+(-x-2)*p):s=S+x*p}c=c>1?c:2,u=u||new Array(c);for(let h=0;h<c;++h)u[h]=void 0===s?NaN:void 0===f?I[s+h]:(0,D.t7)(I[s+h],I[s+p+h],f);return u}function z(I,S,P,p,d,u){if(P==S)return null;let c;if(d<I[S+p-1])return u?(c=I.slice(S,S+p),c[p-1]=d,c):null;if(I[P-1]<d)return u?(c=I.slice(P-p,P),c[p-1]=d,c):null;if(d==I[S+p-1])return I.slice(S,S+p);let s=S/p,f=P/p;for(;s<f;){const e=s+f>>1;d<I[(e+1)*p-1]?f=e:s=e+1}const n=I[s*p-1];if(d==n)return I.slice((s-1)*p,(s-1)*p+p);const g=(d-n)/(I[(s+1)*p-1]-n);c=[];for(let e=0;e<p-1;++e)c.push((0,D.t7)(I[(s-1)*p+e],I[s*p+e],g));return c.push(d),c}function U(I,S,P,p,d,u,c){if(c)return z(I,S,P[P.length-1],p,d,u);let s;if(d<I[p-1])return u?(s=I.slice(0,p),s[p-1]=d,s):null;if(I[I.length-1]<d)return u?(s=I.slice(I.length-p),s[p-1]=d,s):null;for(let f=0,n=P.length;f<n;++f){const h=P[f];if(S!=h){if(d<I[S+p-1])return null;if(d<=I[h-1])return z(I,S,h,p,d,!1);S=h}}return null}},4429:(Bt,ot,a)=>{"use strict";a.d(ot,{AW:()=>U,Kz:()=>z,ac:()=>S,mV:()=>I,oW:()=>P});var G=a(9543),D=a(8665),k=a(5101);function z(p,d,u,c,s){const f=(0,G.qP)((0,G.lJ)(),p,d,u,c);return!!(0,G.kK)(s,f)&&(!!((0,G.r4)(s,f)||f[0]>=s[0]&&f[2]<=s[2]||f[1]>=s[1]&&f[3]<=s[3])||(0,D.E)(p,d,u,c,function(n,h){return(0,G.I7)(s,n,h)}))}function U(p,d,u,c,s){for(let f=0,n=u.length;f<n;++f){if(z(p,d,u[f],c,s))return!0;d=u[f]}return!1}function I(p,d,u,c,s){return!!(z(p,d,u,c,s)||(0,k.TG)(p,d,u,c,s[0],s[1])||(0,k.TG)(p,d,u,c,s[0],s[3])||(0,k.TG)(p,d,u,c,s[2],s[1])||(0,k.TG)(p,d,u,c,s[2],s[3]))}function S(p,d,u,c,s){if(!I(p,d,u[0],c,s))return!1;if(1===u.length)return!0;for(let f=1,n=u.length;f<n;++f)if((0,k.uG)(p,u[f-1],u[f],c,s)&&!z(p,u[f-1],u[f],c,s))return!1;return!0}function P(p,d,u,c,s){for(let f=0,n=u.length;f<n;++f){const h=u[f];if(S(p,d,h,c,s))return!0;d=h[h.length-1]}return!1}},8575:(Bt,ot,a)=>{"use strict";function G(k,z,U,I){let S=k[z],P=k[z+1],p=0;for(let d=z+I;d<U;d+=I){const u=k[d],c=k[d+1];p+=Math.sqrt((u-S)*(u-S)+(c-P)*(c-P)),S=u,P=c}return p}a.d(ot,{W:()=>G})},5784:(Bt,ot,a)=>{"use strict";function G(P,p,d,u){for(;p<d-u;){for(let c=0;c<u;++c){const s=P[p+c];P[p+c]=P[d-u+c],P[d-u+c]=s}p+=u,d-=u}}function D(P,p,d,u){let c=0,s=P[d-u],f=P[d-u+1];for(;p<d;p+=u){const n=P[p],h=P[p+1];c+=(n-s)*(h+f),s=n,f=h}return 0===c?void 0:c>0}function k(P,p,d,u,c){c=void 0!==c&&c;for(let s=0,f=d.length;s<f;++s){const n=d[s],h=D(P,p,n,u);if(0===s){if(c&&h||!c&&!h)return!1}else if(c&&!h||!c&&h)return!1;p=n}return!0}function z(P,p,d,u,c){for(let s=0,f=d.length;s<f;++s){const n=d[s];if(!k(P,p,n,u,c))return!1;n.length&&(p=n[n.length-1])}return!0}function U(P,p,d,u,c){c=void 0!==c&&c;for(let s=0,f=d.length;s<f;++s){const n=d[s],h=D(P,p,n,u);(0===s?c&&h||!c&&!h:c&&!h||!c&&h)&&G(P,p,n,u),p=n}return p}function I(P,p,d,u,c){for(let s=0,f=d.length;s<f;++s)p=U(P,p,d[s],u,c);return p}function S(P,p){const d=[];let u=0,c=0;for(let s=0,f=p.length;s<f;++s){const n=p[s];if(D(P,u,n,2)){if(0===d.length)continue;d[d.length-1].push(p[c])}else d.push(p.slice(c,s+1));c=s+1,u=n}return d}a.d(ot,{Q3:()=>S,$v:()=>k,Oj:()=>z,zX:()=>U,dL:()=>I})},8665:(Bt,ot,a)=>{"use strict";function G(D,k,z,U,I){let S;for(k+=U;k<z;k+=U)if(S=I(D.slice(k-U,k),D.slice(k,k+U)),S)return S;return!1}a.d(ot,{E:()=>G})},1757:(Bt,ot,a)=>{"use strict";a.d(ot,{Pp:()=>d,UJ:()=>z,Zh:()=>p,dt:()=>k,uZ:()=>S});var G=a(4331);function k(u,c,s,f,n,h,g){const e=(s-c)/f;if(e<3){for(;c<s;c+=f)h[g++]=u[c],h[g++]=u[c+1];return g}const E=new Array(e);E[0]=1,E[e-1]=1;const v=[c,s-f];let x=0;for(;v.length>0;){const w=v.pop(),O=v.pop();let y=0;const R=u[O],W=u[O+1],K=u[w],nt=u[w+1];for(let A=O+f;A<w;A+=f){const M=(0,G.rU)(u[A],u[A+1],R,W,K,nt);M>y&&(x=A,y=M)}y>n&&(E[(x-c)/f]=1,O+f<x&&v.push(O,x),x+f<w&&v.push(x,w))}for(let w=0;w<e;++w)E[w]&&(h[g++]=u[c+w*f],h[g++]=u[c+w*f+1]);return g}function z(u,c,s,f,n,h,g,e){for(let E=0,v=s.length;E<v;++E){const x=s[E];g=k(u,c,x,f,n,h,g),e.push(g),c=x}return g}function S(u,c){return c*Math.round(u/c)}function P(u,c,s,f,n,h,g){if(c==s)return g;let v,x,e=S(u[c],n),E=S(u[c+1],n);c+=f,h[g++]=e,h[g++]=E;do{if(v=S(u[c],n),x=S(u[c+1],n),(c+=f)==s)return h[g++]=v,h[g++]=x,g}while(v==e&&x==E);for(;c<s;){const w=S(u[c],n),O=S(u[c+1],n);if(c+=f,w==v&&O==x)continue;const y=v-e,R=x-E,W=w-e,K=O-E;y*K==R*W&&(y<0&&W<y||y==W||y>0&&W>y)&&(R<0&&K<R||R==K||R>0&&K>R)?(v=w,x=O):(h[g++]=v,h[g++]=x,e=v,E=x,v=w,x=O)}return h[g++]=v,h[g++]=x,g}function p(u,c,s,f,n,h,g,e){for(let E=0,v=s.length;E<v;++E){const x=s[E];g=P(u,c,x,f,n,h,g),e.push(g),c=x}return g}function d(u,c,s,f,n,h,g,e){for(let E=0,v=s.length;E<v;++E){const x=s[E],w=[];g=p(u,c,x,f,n,h,g,w),e.push(w),c=x[x.length-1]}return g}},3904:(Bt,ot,a)=>{"use strict";function G(U,I,S,P,p,d){d=d||[];let u=0;for(let c=I;c<S;c+=P){const s=U[c],f=U[c+1];d[u++]=p[0]*s+p[2]*f+p[4],d[u++]=p[1]*s+p[3]*f+p[5]}return d&&d.length!=u&&(d.length=u),d}function D(U,I,S,P,p,d,u){u=u||[];const c=Math.cos(p),s=Math.sin(p),f=d[0],n=d[1];let h=0;for(let g=I;g<S;g+=P){const e=U[g]-f,E=U[g+1]-n;u[h++]=f+e*c-E*s,u[h++]=n+e*s+E*c;for(let v=g+2;v<g+P;++v)u[h++]=U[v]}return u&&u.length!=h&&(u.length=h),u}function k(U,I,S,P,p,d,u,c){c=c||[];const s=u[0],f=u[1];let n=0;for(let h=I;h<S;h+=P){const e=U[h+1]-f;c[n++]=s+p*(U[h]-s),c[n++]=f+d*e;for(let E=h+2;E<h+P;++E)c[n++]=U[E]}return c&&c.length!=n&&(c.length=n),c}function z(U,I,S,P,p,d,u){u=u||[];let c=0;for(let s=I;s<S;s+=P){u[c++]=U[s]+p,u[c++]=U[s+1]+d;for(let f=s+2;f<s+P;++f)u[c++]=U[f]}return u&&u.length!=c&&(u.length=c),u}a.d(ot,{Iu:()=>z,U1:()=>D,bA:()=>k,vT:()=>G})},5063:(Bt,ot,a)=>{"use strict";a.d(ot,{G$:()=>U,Id:()=>P,ME:()=>z,MP:()=>S,Tp:()=>p,V:()=>D,bM:()=>d,tK:()=>I});const G=typeof navigator<"u"&&typeof navigator.userAgent<"u"?navigator.userAgent.toLowerCase():"",D=G.includes("firefox"),z=G.includes("safari")&&!G.includes("chrom")&&(G.includes("version/15.4")||/cpu (os|iphone os) 15_4 like mac os x/.test(G)),U=G.includes("webkit")&&!G.includes("edge"),I=G.includes("macintosh"),S=typeof devicePixelRatio<"u"?devicePixelRatio:1,P=typeof WorkerGlobalScope<"u"&&typeof OffscreenCanvas<"u"&&self instanceof WorkerGlobalScope,p=typeof Image<"u"&&Image.prototype.decode,d=function(){let u=!1;try{const c=Object.defineProperty({},"passive",{get:function(){u=!0}});window.addEventListener("_",null,c),window.removeEventListener("_",null,c)}catch{}return u}()},2659:(Bt,ot,a)=>{"use strict";a.d(ot,{Z:()=>u});var G=a(3615),D=a(8437),k=a(6450),z=a(7464);const I=class U extends k.Z{constructor(s){super(),this.geometry_=null,this.element_=document.createElement("div"),this.element_.style.position="absolute",this.element_.style.pointerEvents="auto",this.element_.className="ol-box "+s,this.map_=null,this.startPixel_=null,this.endPixel_=null}disposeInternal(){this.setMap(null)}render_(){const s=this.startPixel_,f=this.endPixel_,n="px",h=this.element_.style;h.left=Math.min(s[0],f[0])+n,h.top=Math.min(s[1],f[1])+n,h.width=Math.abs(f[0]-s[0])+n,h.height=Math.abs(f[1]-s[1])+n}setMap(s){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);const f=this.element_.style;f.left="inherit",f.top="inherit",f.width="inherit",f.height="inherit"}this.map_=s,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)}setPixels(s,f){this.startPixel_=s,this.endPixel_=f,this.createOrUpdateGeometry(),this.render_()}createOrUpdateGeometry(){const s=this.startPixel_,f=this.endPixel_,h=[s,[s[0],f[1]],f,[f[0],s[1]]].map(this.map_.getCoordinateFromPixelInternal,this.map_);h[4]=h[0].slice(),this.geometry_?this.geometry_.setCoordinates([h]):this.geometry_=new z.ZP([h])}getGeometry(){return this.geometry_}};var S=a(7963);class p extends G.ZP{constructor(s,f,n){super(s),this.coordinate=f,this.mapBrowserEvent=n}}const u=class d extends D.Z{constructor(s){super(),this.box_=new I((s=s||{}).className||"ol-dragbox"),this.minArea_=void 0!==s.minArea?s.minArea:64,s.onBoxEnd&&(this.onBoxEnd=s.onBoxEnd),this.startPixel_=null,this.condition_=s.condition?s.condition:S.v8,this.boxEndCondition_=s.boxEndCondition?s.boxEndCondition:this.defaultBoxEndCondition}defaultBoxEndCondition(s,f,n){const h=n[0]-f[0],g=n[1]-f[1];return h*h+g*g>=this.minArea_}getGeometry(){return this.box_.getGeometry()}handleDragEvent(s){this.box_.setPixels(this.startPixel_,s.pixel),this.dispatchEvent(new p("boxdrag",s.coordinate,s))}handleUpEvent(s){this.box_.setMap(null);const f=this.boxEndCondition_(s,this.startPixel_,s.pixel);return f&&this.onBoxEnd(s),this.dispatchEvent(new p(f?"boxend":"boxcancel",s.coordinate,s)),!1}handleDownEvent(s){return!!this.condition_(s)&&(this.startPixel_=s.pixel,this.box_.setMap(s.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new p("boxstart",s.coordinate,s)),!0)}onBoxEnd(s){}}},3181:(Bt,ot,a)=>{"use strict";a.d(ot,{ZP:()=>S,Cv:()=>U,FW:()=>I});var G=a(4115);var k=a(4720);function U(P,p,d){const u=P.getCenterInternal();u&&P.animateInternal({duration:void 0!==d?d:250,easing:k.GE,center:P.getConstrainedCenter([u[0]+p[0],u[1]+p[1]])})}function I(P,p,d,u){const c=P.getZoom();if(void 0===c)return;const s=P.getConstrainedZoom(c+p),f=P.getResolutionForZoom(s);P.getAnimating()&&P.cancelAnimations(),P.animate({resolution:f,anchor:d,duration:void 0!==u?u:250,easing:k.Vv})}const S=class z extends G.Z{constructor(p){super(),p&&p.handleEvent&&(this.handleEvent=p.handleEvent),this.map_=null,this.setActive(!0)}getActive(){return this.get("active")}getMap(){return this.map_}handleEvent(p){return!0}setActive(p){this.set("active",p)}setMap(p){this.map_=p}}},8437:(Bt,ot,a)=>{"use strict";a.d(ot,{S:()=>z,Z:()=>U});var G=a(3181),D=a(1590);function z(I){const S=I.length;let P=0,p=0;for(let d=0;d<S;d++)P+=I[d].clientX,p+=I[d].clientY;return{clientX:P/S,clientY:p/S}}const U=class k extends G.ZP{constructor(S){super(S=S||{}),S.handleDownEvent&&(this.handleDownEvent=S.handleDownEvent),S.handleDragEvent&&(this.handleDragEvent=S.handleDragEvent),S.handleMoveEvent&&(this.handleMoveEvent=S.handleMoveEvent),S.handleUpEvent&&(this.handleUpEvent=S.handleUpEvent),S.stopDown&&(this.stopDown=S.stopDown),this.handlingDownUpSequence=!1,this.targetPointers=[]}getPointerCount(){return this.targetPointers.length}handleDownEvent(S){return!1}handleDragEvent(S){}handleEvent(S){if(!S.originalEvent)return!0;let P=!1;if(this.updateTrackedPointers_(S),this.handlingDownUpSequence){if(S.type==D.Z.POINTERDRAG)this.handleDragEvent(S),S.originalEvent.preventDefault();else if(S.type==D.Z.POINTERUP){const p=this.handleUpEvent(S);this.handlingDownUpSequence=p&&this.targetPointers.length>0}}else if(S.type==D.Z.POINTERDOWN){const p=this.handleDownEvent(S);this.handlingDownUpSequence=p,P=this.stopDown(p)}else S.type==D.Z.POINTERMOVE&&this.handleMoveEvent(S);return!P}handleMoveEvent(S){}handleUpEvent(S){return!1}stopDown(S){return S}updateTrackedPointers_(S){S.activePointers&&(this.targetPointers=S.activePointers)}}},1179:(Bt,ot,a)=>{"use strict";a.d(ot,{c:()=>H});var G=a(9573),D=a(3181),k=a(1590);const U=class z extends D.ZP{constructor(Y){super(),this.delta_=(Y=Y||{}).delta?Y.delta:1,this.duration_=void 0!==Y.duration?Y.duration:250}handleEvent(Y){let st=!1;if(Y.type==k.Z.DBLCLICK){const ht=Y.originalEvent,vt=Y.coordinate,Ct=ht.shiftKey?-this.delta_:this.delta_,bt=Y.map.getView();(0,D.FW)(bt,Ct,vt,this.duration_),ht.preventDefault(),st=!0}return!st}};var I=a(8437),S=a(1334),P=a(7963),p=a(4720),d=a(5415);const c=class u extends I.Z{constructor(Y){super({stopDown:S.Dv}),this.kinetic_=(Y=Y||{}).kinetic,this.lastCentroid=null,this.panning_=!1;const st=Y.condition?Y.condition:(0,P.$6)(P.rM,P.Xp);this.condition_=Y.onFocusOnly?(0,P.$6)(P.yZ,st):st,this.noKinetic_=!1}handleDragEvent(Y){const st=Y.map;this.panning_||(this.panning_=!0,st.getView().beginInteraction());const ht=this.targetPointers,Tt=st.getEventPixel((0,I.S)(ht));if(ht.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(Tt[0],Tt[1]),this.lastCentroid){const vt=[this.lastCentroid[0]-Tt[0],Tt[1]-this.lastCentroid[1]],bt=Y.map.getView();(0,d.bA)(vt,bt.getResolution()),(0,d.U1)(vt,bt.getRotation()),bt.adjustCenterInternal(vt)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=Tt,this.lastPointersCount_=ht.length,Y.originalEvent.preventDefault()}handleUpEvent(Y){const st=Y.map,ht=st.getView();if(0===this.targetPointers.length){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){const Tt=this.kinetic_.getDistance(),vt=this.kinetic_.getAngle(),Ct=ht.getCenterInternal(),bt=st.getPixelFromCoordinateInternal(Ct),Gt=st.getCoordinateFromPixelInternal([bt[0]-Tt*Math.cos(vt),bt[1]-Tt*Math.sin(vt)]);ht.animateInternal({center:ht.getConstrainedCenter(Gt),duration:500,easing:p.Vv})}return this.panning_&&(this.panning_=!1,ht.endInteraction()),!1}return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0}handleDownEvent(Y){if(this.targetPointers.length>0&&this.condition_(Y)){const ht=Y.map.getView();return this.lastCentroid=null,ht.getAnimating()&&ht.cancelAnimations(),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}return!1}};var s=a(7011);const n=class f extends I.Z{constructor(Y){Y=Y||{},super({stopDown:S.Dv}),this.condition_=Y.condition?Y.condition:P.aj,this.lastAngle_=void 0,this.duration_=void 0!==Y.duration?Y.duration:250}handleDragEvent(Y){if(!(0,P.QL)(Y))return;const st=Y.map,ht=st.getView();if(ht.getConstraints().rotation===s.h$)return;const Tt=st.getSize(),vt=Y.pixel,Ct=Math.atan2(Tt[1]/2-vt[1],vt[0]-Tt[0]/2);void 0!==this.lastAngle_&&ht.adjustRotationInternal(-(Ct-this.lastAngle_)),this.lastAngle_=Ct}handleUpEvent(Y){return!(0,P.QL)(Y)||(Y.map.getView().endInteraction(this.duration_),!1)}handleDownEvent(Y){return!!((0,P.QL)(Y)&&(0,P.v8)(Y)&&this.condition_(Y))&&(Y.map.getView().beginInteraction(),this.lastAngle_=void 0,!0)}};var h=a(2659);const e=class g extends h.Z{constructor(Y){super({condition:(Y=Y||{}).condition?Y.condition:P.vY,className:Y.className||"ol-dragzoom",minArea:Y.minArea}),this.duration_=void 0!==Y.duration?Y.duration:200,this.out_=void 0!==Y.out&&Y.out}onBoxEnd(Y){const ht=this.getMap().getView();let Tt=this.getGeometry();if(this.out_){const vt=ht.rotatedExtentForGeometry(Tt),Ct=ht.getResolutionForExtentInternal(vt),bt=ht.getResolution()/Ct;Tt=Tt.clone(),Tt.scale(bt*bt)}ht.fitInternal(Tt,{duration:this.duration_,easing:p.Vv})}};var E=a(3044);const w=class x extends D.ZP{constructor(Y){super(),Y=Y||{},this.defaultCondition_=function(st){return(0,P.rM)(st)&&(0,P.TN)(st)},this.condition_=void 0!==Y.condition?Y.condition:this.defaultCondition_,this.duration_=void 0!==Y.duration?Y.duration:100,this.pixelDelta_=void 0!==Y.pixelDelta?Y.pixelDelta:128}handleEvent(Y){let st=!1;if(Y.type==E.Z.KEYDOWN){const ht=Y.originalEvent,Tt=ht.keyCode;if(this.condition_(Y)&&(40==Tt||37==Tt||39==Tt||38==Tt)){const Ct=Y.map.getView(),bt=Ct.getResolution()*this.pixelDelta_;let Gt=0,kt=0;40==Tt?kt=-bt:37==Tt?Gt=-bt:39==Tt?Gt=bt:kt=bt;const ie=[Gt,kt];(0,d.U1)(ie,Ct.getRotation()),(0,D.Cv)(Ct,ie,this.duration_),ht.preventDefault(),st=!0}}return!st}},y=class O extends D.ZP{constructor(Y){super(),this.condition_=(Y=Y||{}).condition?Y.condition:P.TN,this.delta_=Y.delta?Y.delta:1,this.duration_=void 0!==Y.duration?Y.duration:100}handleEvent(Y){let st=!1;if(Y.type==E.Z.KEYDOWN||Y.type==E.Z.KEYPRESS){const ht=Y.originalEvent,Tt=ht.key;if(this.condition_(Y)&&("+"===Tt||"-"===Tt)){const Ct="+"===Tt?this.delta_:-this.delta_,bt=Y.map.getView();(0,D.FW)(bt,Ct,void 0,this.duration_),ht.preventDefault(),st=!0}}return!st}};var K=a(5063),nt=a(4331);const L=class A extends D.ZP{constructor(Y){super(Y=Y||{}),this.totalDelta_=0,this.lastDelta_=0,this.maxDelta_=void 0!==Y.maxDelta?Y.maxDelta:1,this.duration_=void 0!==Y.duration?Y.duration:250,this.timeout_=void 0!==Y.timeout?Y.timeout:80,this.useAnchor_=void 0===Y.useAnchor||Y.useAnchor,this.constrainResolution_=void 0!==Y.constrainResolution&&Y.constrainResolution;const st=Y.condition?Y.condition:P.Bx;this.condition_=Y.onFocusOnly?(0,P.$6)(P.yZ,st):st,this.lastAnchor_=null,this.startTime_=void 0,this.mode_=void 0,this.trackpadEventGap_=400,this.deltaPerZoom_=300}endInteraction_(){this.trackpadTimeoutId_=void 0;const Y=this.getMap();Y&&Y.getView().endInteraction(void 0,this.lastDelta_?this.lastDelta_>0?1:-1:0,this.lastAnchor_)}handleEvent(Y){if(!this.condition_(Y)||Y.type!==E.Z.WHEEL)return!0;const ht=Y.map,Tt=Y.originalEvent;let vt;if(Tt.preventDefault(),this.useAnchor_&&(this.lastAnchor_=Y.coordinate),Y.type==E.Z.WHEEL&&(vt=Tt.deltaY,K.V&&Tt.deltaMode===WheelEvent.DOM_DELTA_PIXEL&&(vt/=K.MP),Tt.deltaMode===WheelEvent.DOM_DELTA_LINE&&(vt*=40)),0===vt)return!1;this.lastDelta_=vt;const Ct=Date.now();void 0===this.startTime_&&(this.startTime_=Ct),(!this.mode_||Ct-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(vt)<4?"trackpad":"wheel");const bt=ht.getView();if("trackpad"===this.mode_&&!bt.getConstrainResolution()&&!this.constrainResolution_)return this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):(bt.getAnimating()&&bt.cancelAnimations(),bt.beginInteraction()),this.trackpadTimeoutId_=setTimeout(this.endInteraction_.bind(this),this.timeout_),bt.adjustZoom(-vt/this.deltaPerZoom_,this.lastAnchor_),this.startTime_=Ct,!1;this.totalDelta_+=vt;const Gt=Math.max(this.timeout_-(Ct-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,ht),Gt),!1}handleWheelZoom_(Y){const st=Y.getView();st.getAnimating()&&st.cancelAnimations();let ht=-(0,nt.uZ)(this.totalDelta_,-this.maxDelta_*this.deltaPerZoom_,this.maxDelta_*this.deltaPerZoom_)/this.deltaPerZoom_;(st.getConstrainResolution()||this.constrainResolution_)&&(ht=ht?ht>0?1:-1:0),(0,D.FW)(st,ht,this.lastAnchor_,this.duration_),this.mode_=void 0,this.totalDelta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0}setMouseAnchor(Y){this.useAnchor_=Y,Y||(this.lastAnchor_=null)}},M=class b extends I.Z{constructor(Y){const st=Y=Y||{};st.stopDown||(st.stopDown=S.Dv),super(st),this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.threshold_=void 0!==Y.threshold?Y.threshold:.3,this.duration_=void 0!==Y.duration?Y.duration:250}handleDragEvent(Y){let st=0;const ht=this.targetPointers[0],Tt=this.targetPointers[1],vt=Math.atan2(Tt.clientY-ht.clientY,Tt.clientX-ht.clientX);if(void 0!==this.lastAngle_){const Gt=vt-this.lastAngle_;this.rotationDelta_+=Gt,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),st=Gt}this.lastAngle_=vt;const Ct=Y.map,bt=Ct.getView();bt.getConstraints().rotation!==s.h$&&(this.anchor_=Ct.getCoordinateFromPixelInternal(Ct.getEventPixel((0,I.S)(this.targetPointers))),this.rotating_&&(Ct.render(),bt.adjustRotationInternal(st,this.anchor_)))}handleUpEvent(Y){return!(this.targetPointers.length<2&&(Y.map.getView().endInteraction(this.duration_),1))}handleDownEvent(Y){if(this.targetPointers.length>=2){const st=Y.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||st.getView().beginInteraction(),!0}return!1}},N=class C extends I.Z{constructor(Y){const st=Y=Y||{};st.stopDown||(st.stopDown=S.Dv),super(st),this.anchor_=null,this.duration_=void 0!==Y.duration?Y.duration:400,this.lastDistance_=void 0,this.lastScaleDelta_=1}handleDragEvent(Y){let st=1;const ht=this.targetPointers[0],Tt=this.targetPointers[1],vt=ht.clientX-Tt.clientX,Ct=ht.clientY-Tt.clientY,bt=Math.sqrt(vt*vt+Ct*Ct);void 0!==this.lastDistance_&&(st=this.lastDistance_/bt),this.lastDistance_=bt;const Gt=Y.map,kt=Gt.getView();1!=st&&(this.lastScaleDelta_=st),this.anchor_=Gt.getCoordinateFromPixelInternal(Gt.getEventPixel((0,I.S)(this.targetPointers))),Gt.render(),kt.adjustResolutionInternal(st,this.anchor_)}handleUpEvent(Y){return!(this.targetPointers.length<2)||(Y.map.getView().endInteraction(this.duration_,this.lastScaleDelta_>1?1:-1),!1)}handleDownEvent(Y){if(this.targetPointers.length>=2){const st=Y.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||st.getView().beginInteraction(),!0}return!1}};function H(it){it=it||{};const Y=new G.Z,st=new class R{constructor(Y,st,ht){this.decay_=Y,this.minVelocity_=st,this.delay_=ht,this.points_=[],this.angle_=0,this.initialVelocity_=0}begin(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0}update(Y,st){this.points_.push(Y,st,Date.now())}end(){if(this.points_.length<6)return!1;const Y=Date.now()-this.delay_,st=this.points_.length-3;if(this.points_[st+2]<Y)return!1;let ht=st-3;for(;ht>0&&this.points_[ht+2]>Y;)ht-=3;const Tt=this.points_[st+2]-this.points_[ht+2];if(Tt<1e3/60)return!1;const vt=this.points_[st]-this.points_[ht],Ct=this.points_[st+1]-this.points_[ht+1];return this.angle_=Math.atan2(Ct,vt),this.initialVelocity_=Math.sqrt(vt*vt+Ct*Ct)/Tt,this.initialVelocity_>this.minVelocity_}getDistance(){return(this.minVelocity_-this.initialVelocity_)/this.decay_}getAngle(){return this.angle_}}(-.005,.05,100);return(void 0===it.altShiftDragRotate||it.altShiftDragRotate)&&Y.push(new n),(void 0===it.doubleClickZoom||it.doubleClickZoom)&&Y.push(new U({delta:it.zoomDelta,duration:it.zoomDuration})),(void 0===it.dragPan||it.dragPan)&&Y.push(new c({onFocusOnly:it.onFocusOnly,kinetic:st})),(void 0===it.pinchRotate||it.pinchRotate)&&Y.push(new M),(void 0===it.pinchZoom||it.pinchZoom)&&Y.push(new N({duration:it.zoomDuration})),(void 0===it.keyboard||it.keyboard)&&(Y.push(new w),Y.push(new y({delta:it.zoomDelta,duration:it.zoomDuration}))),(void 0===it.mouseWheelZoom||it.mouseWheelZoom)&&Y.push(new L({onFocusOnly:it.onFocusOnly,duration:it.zoomDuration})),(void 0===it.shiftDragZoom||it.shiftDragZoom)&&Y.push(new e({duration:it.zoomDuration})),Y}},2462:(Bt,ot,a)=>{"use strict";a.d(ot,{Z:()=>S});var G=a(4115),D=a(3570),k=a(513),z=a(992),U=a(4331);const S=class I extends G.Z{constructor(p){super(),this.background_=p.background;const d=Object.assign({},p);"object"==typeof p.properties&&(delete d.properties,Object.assign(d,p.properties)),d[D.Z.OPACITY]=void 0!==p.opacity?p.opacity:1,(0,z.h)("number"==typeof d[D.Z.OPACITY],64),d[D.Z.VISIBLE]=void 0===p.visible||p.visible,d[D.Z.Z_INDEX]=p.zIndex,d[D.Z.MAX_RESOLUTION]=void 0!==p.maxResolution?p.maxResolution:1/0,d[D.Z.MIN_RESOLUTION]=void 0!==p.minResolution?p.minResolution:0,d[D.Z.MIN_ZOOM]=void 0!==p.minZoom?p.minZoom:-1/0,d[D.Z.MAX_ZOOM]=void 0!==p.maxZoom?p.maxZoom:1/0,this.className_=void 0!==d.className?d.className:"ol-layer",delete d.className,this.setProperties(d),this.state_=null}getBackground(){return this.background_}getClassName(){return this.className_}getLayerState(p){const d=this.state_||{layer:this,managed:void 0===p||p},u=this.getZIndex();return d.opacity=(0,U.uZ)(Math.round(100*this.getOpacity())/100,0,1),d.visible=this.getVisible(),d.extent=this.getExtent(),d.zIndex=void 0!==u||d.managed?u:1/0,d.maxResolution=this.getMaxResolution(),d.minResolution=Math.max(this.getMinResolution(),0),d.minZoom=this.getMinZoom(),d.maxZoom=this.getMaxZoom(),this.state_=d,d}getLayersArray(p){return(0,k.O3)()}getLayerStatesArray(p){return(0,k.O3)()}getExtent(){return this.get(D.Z.EXTENT)}getMaxResolution(){return this.get(D.Z.MAX_RESOLUTION)}getMinResolution(){return this.get(D.Z.MIN_RESOLUTION)}getMinZoom(){return this.get(D.Z.MIN_ZOOM)}getMaxZoom(){return this.get(D.Z.MAX_ZOOM)}getOpacity(){return this.get(D.Z.OPACITY)}getSourceState(){return(0,k.O3)()}getVisible(){return this.get(D.Z.VISIBLE)}getZIndex(){return this.get(D.Z.Z_INDEX)}setBackground(p){this.background_=p,this.changed()}setExtent(p){this.set(D.Z.EXTENT,p)}setMaxResolution(p){this.set(D.Z.MAX_RESOLUTION,p)}setMinResolution(p){this.set(D.Z.MIN_RESOLUTION,p)}setMaxZoom(p){this.set(D.Z.MAX_ZOOM,p)}setMinZoom(p){this.set(D.Z.MIN_ZOOM,p)}setOpacity(p){(0,z.h)("number"==typeof p,64),this.set(D.Z.OPACITY,p)}setVisible(p){this.set(D.Z.VISIBLE,p)}setZIndex(p){this.set(D.Z.Z_INDEX,p)}disposeInternal(){this.state_&&(this.state_.layer=null,this.state_=null),super.disposeInternal()}}},3998:(Bt,ot,a)=>{"use strict";a.d(ot,{Z:()=>k});var G=a(7521);const k=class D extends G.Z{constructor(U){super(U=U||{})}}},7319:(Bt,ot,a)=>{"use strict";a.d(ot,{Z:()=>z});var G=a(7521),D=a(3332);const z=class k extends G.Z{constructor(I){I=I||{};const S=Object.assign({},I);delete S.preload,delete S.useInterimTilesOnError,super(S),this.setPreload(void 0!==I.preload?I.preload:0),this.setUseInterimTilesOnError(void 0===I.useInterimTilesOnError||I.useInterimTilesOnError)}getPreload(){return this.get(D.Z.PRELOAD)}setPreload(I){this.set(D.Z.PRELOAD,I)}getUseInterimTilesOnError(){return this.get(D.Z.USE_INTERIM_TILES_ON_ERROR)}setUseInterimTilesOnError(I){this.set(D.Z.USE_INTERIM_TILES_ON_ERROR,I)}getData(I){return super.getData(I)}}},4420:(Bt,ot,a)=>{"use strict";a.d(ot,{Z:()=>g});var G=a(7521),D=a(3036),k=a(1786),z=a(795),U=a(694),I=a(5999),S=a(2682),P=a(5253),p=a(8185);function d(e){return new k.ZP({fill:u(e,""),stroke:c(e,""),text:s(e),image:f(e)})}function u(e,E){const v=e[E+"fill-color"];if(v)return new U.Z({color:v})}function c(e,E){const v=e[E+"stroke-width"],x=e[E+"stroke-color"];if(v||x)return new P.Z({width:v,color:x,lineCap:e[E+"stroke-line-cap"],lineJoin:e[E+"stroke-line-join"],lineDash:e[E+"stroke-line-dash"],lineDashOffset:e[E+"stroke-line-dash-offset"],miterLimit:e[E+"stroke-miter-limit"]})}function s(e){const E=e["text-value"];return E?new p.Z({text:E,font:e["text-font"],maxAngle:e["text-max-angle"],offsetX:e["text-offset-x"],offsetY:e["text-offset-y"],overflow:e["text-overflow"],placement:e["text-placement"],repeat:e["text-repeat"],scale:e["text-scale"],rotateWithView:e["text-rotate-with-view"],rotation:e["text-rotation"],textAlign:e["text-align"],justify:e["text-justify"],textBaseline:e["text-baseline"],padding:e["text-padding"],fill:u(e,"text-"),backgroundFill:u(e,"text-background-"),stroke:c(e,"text-"),backgroundStroke:c(e,"text-background-")}):void 0}function f(e){const E=e["icon-src"],v=e["icon-img"];if(E||v)return new I.Z({src:E,img:v,imgSize:e["icon-img-size"],anchor:e["icon-anchor"],anchorOrigin:e["icon-anchor-origin"],anchorXUnits:e["icon-anchor-x-units"],anchorYUnits:e["icon-anchor-y-units"],color:e["icon-color"],crossOrigin:e["icon-cross-origin"],offset:e["icon-offset"],displacement:e["icon-displacement"],opacity:e["icon-opacity"],scale:e["icon-scale"],rotation:e["icon-rotation"],rotateWithView:e["icon-rotate-with-view"],size:e["icon-size"],declutterMode:e["icon-declutter-mode"]});const x=e["shape-points"];if(x){const O="shape-";return new S.Z({points:x,fill:u(e,O),stroke:c(e,O),radius:e["shape-radius"],radius1:e["shape-radius1"],radius2:e["shape-radius2"],angle:e["shape-angle"],displacement:e["shape-displacement"],rotation:e["shape-rotation"],rotateWithView:e["shape-rotate-with-view"],scale:e["shape-scale"],declutterMode:e["shape-declutter-mode"]})}const w=e["circle-radius"];if(w){const O="circle-";return new z.Z({radius:w,fill:u(e,O),stroke:c(e,O),displacement:e["circle-displacement"],scale:e["circle-scale"],rotation:e["circle-rotation"],rotateWithView:e["circle-rotate-with-view"],declutterMode:e["circle-declutter-mode"]})}}const g=class h extends G.Z{constructor(E){E=E||{};const v=Object.assign({},E);delete v.style,delete v.renderBuffer,delete v.updateWhileAnimating,delete v.updateWhileInteracting,super(v),this.declutter_=void 0!==E.declutter&&E.declutter,this.renderBuffer_=void 0!==E.renderBuffer?E.renderBuffer:100,this.style_=null,this.styleFunction_=void 0,this.setStyle(E.style),this.updateWhileAnimating_=void 0!==E.updateWhileAnimating&&E.updateWhileAnimating,this.updateWhileInteracting_=void 0!==E.updateWhileInteracting&&E.updateWhileInteracting}getDeclutter(){return this.declutter_}getFeatures(E){return super.getFeatures(E)}getRenderBuffer(){return this.renderBuffer_}getRenderOrder(){return this.get("renderOrder")}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}getUpdateWhileAnimating(){return this.updateWhileAnimating_}getUpdateWhileInteracting(){return this.updateWhileInteracting_}renderDeclutter(E){E.declutterTree||(E.declutterTree=new D(9)),this.getRenderer().renderDeclutter(E)}setRenderOrder(E){this.set("renderOrder",E)}setStyle(E){let v;if(void 0===E)v=k.yF;else if(null===E)v=null;else if("function"==typeof E)v=E;else if(E instanceof k.ZP)v=E;else if(Array.isArray(E)){const x=E.length,w=new Array(x);for(let O=0;O<x;++O){const y=E[O];w[O]=y instanceof k.ZP?y:d(y)}v=w}else v=d(E);this.style_=v,this.styleFunction_=null===E?void 0:(0,k.J$)(this.style_),this.changed()}}},1591:(Bt,ot,a)=>{"use strict";a.d(ot,{V:()=>c,Z:()=>n});var G=a(2462),D=a(9573),k=a(448),z=a(3615),U=a(3044),I=a(8296),S=a(992),P=a(9306),p=a(9543),d=a(513),u=a(2716);class c extends z.ZP{constructor(g,e){super(g),this.layer=e}}class f extends G.Z{constructor(g){g=g||{};const e=Object.assign({},g);delete e.layers;let E=g.layers;super(e),this.layersListenerKeys_=[],this.listenerKeys_={},this.addChangeListener("layers",this.handleLayersChanged_),E?Array.isArray(E)?E=new D.Z(E.slice(),{unique:!0}):(0,S.h)("function"==typeof E.getArray,43):E=new D.Z(void 0,{unique:!0}),this.setLayers(E)}handleLayerChange_(){this.changed()}handleLayersChanged_(){this.layersListenerKeys_.forEach(u.bN),this.layersListenerKeys_.length=0;const g=this.getLayers();this.layersListenerKeys_.push((0,u.oL)(g,k.Z.ADD,this.handleLayersAdd_,this),(0,u.oL)(g,k.Z.REMOVE,this.handleLayersRemove_,this));for(const E in this.listenerKeys_)this.listenerKeys_[E].forEach(u.bN);(0,P.Z)(this.listenerKeys_);const e=g.getArray();for(let E=0,v=e.length;E<v;E++){const x=e[E];this.registerLayerListeners_(x),this.dispatchEvent(new c("addlayer",x))}this.changed()}registerLayerListeners_(g){const e=[(0,u.oL)(g,I.Z.PROPERTYCHANGE,this.handleLayerChange_,this),(0,u.oL)(g,U.Z.CHANGE,this.handleLayerChange_,this)];g instanceof f&&e.push((0,u.oL)(g,"addlayer",this.handleLayerGroupAdd_,this),(0,u.oL)(g,"removelayer",this.handleLayerGroupRemove_,this)),this.listenerKeys_[(0,d.sq)(g)]=e}handleLayerGroupAdd_(g){this.dispatchEvent(new c("addlayer",g.layer))}handleLayerGroupRemove_(g){this.dispatchEvent(new c("removelayer",g.layer))}handleLayersAdd_(g){const e=g.element;this.registerLayerListeners_(e),this.dispatchEvent(new c("addlayer",e)),this.changed()}handleLayersRemove_(g){const e=g.element,E=(0,d.sq)(e);this.listenerKeys_[E].forEach(u.bN),delete this.listenerKeys_[E],this.dispatchEvent(new c("removelayer",e)),this.changed()}getLayers(){return this.get("layers")}setLayers(g){const e=this.getLayers();if(e){const E=e.getArray();for(let v=0,x=E.length;v<x;++v)this.dispatchEvent(new c("removelayer",E[v]))}this.set("layers",g)}getLayersArray(g){return g=void 0!==g?g:[],this.getLayers().forEach(function(e){e.getLayersArray(g)}),g}getLayerStatesArray(g){const e=void 0!==g?g:[],E=e.length;this.getLayers().forEach(function(w){w.getLayerStatesArray(e)});const v=this.getLayerState();let x=v.zIndex;!g&&void 0===v.zIndex&&(x=0);for(let w=E,O=e.length;w<O;w++){const y=e[w];y.opacity*=v.opacity,y.visible=y.visible&&v.visible,y.maxResolution=Math.min(y.maxResolution,v.maxResolution),y.minResolution=Math.max(y.minResolution,v.minResolution),y.minZoom=Math.max(y.minZoom,v.minZoom),y.maxZoom=Math.min(y.maxZoom,v.maxZoom),void 0!==v.extent&&(y.extent=void 0!==y.extent?(0,p.Ed)(y.extent,v.extent):v.extent),void 0===y.zIndex&&(y.zIndex=x)}return e}getSourceState(){return"ready"}}const n=f},6906:(Bt,ot,a)=>{"use strict";a.d(ot,{Z:()=>z});var G=a(3998),D=a(8915);const z=class k extends G.Z{constructor(I){super(I)}createRenderer(){return new D.Z(this)}getData(I){return super.getData(I)}}},7521:(Bt,ot,a)=>{"use strict";a.d(ot,{Z:()=>u,j:()=>d});var G=a(2462),D=a(3044),k=a(3570),z=a(8779),U=a(5109),I=a(992),S=a(9543),P=a(2716);function d(c,s){if(!c.visible)return!1;const f=s.resolution;if(f<c.minResolution||f>=c.maxResolution)return!1;const n=s.zoom;return n>c.minZoom&&n<=c.maxZoom}const u=class p extends G.Z{constructor(s){const f=Object.assign({},s);delete f.source,super(f),this.mapPrecomposeKey_=null,this.mapRenderKey_=null,this.sourceChangeKey_=null,this.renderer_=null,this.sourceReady_=!1,this.rendered=!1,s.render&&(this.render=s.render),s.map&&this.setMap(s.map),this.addChangeListener(k.Z.SOURCE,this.handleSourcePropertyChange_),this.setSource(s.source?s.source:null)}getLayersArray(s){return(s=s||[]).push(this),s}getLayerStatesArray(s){return(s=s||[]).push(this.getLayerState()),s}getSource(){return this.get(k.Z.SOURCE)||null}getRenderSource(){return this.getSource()}getSourceState(){const s=this.getSource();return s?s.getState():"undefined"}handleSourceChange_(){this.changed(),!this.sourceReady_&&"ready"===this.getSource().getState()&&(this.sourceReady_=!0,this.dispatchEvent("sourceready"))}handleSourcePropertyChange_(){this.sourceChangeKey_&&((0,P.bN)(this.sourceChangeKey_),this.sourceChangeKey_=null),this.sourceReady_=!1;const s=this.getSource();s&&(this.sourceChangeKey_=(0,P.oL)(s,D.Z.CHANGE,this.handleSourceChange_,this),"ready"===s.getState()&&(this.sourceReady_=!0,setTimeout(()=>{this.dispatchEvent("sourceready")},0))),this.changed()}getFeatures(s){return this.renderer_?this.renderer_.getFeatures(s):Promise.resolve([])}getData(s){return this.renderer_&&this.rendered?this.renderer_.getData(s):null}isVisible(s){let f;f=s instanceof U.ZP?{viewState:s.getState(),extent:s.calculateExtent()}:s;const n=this.getExtent();return this.getVisible()&&d(this.getLayerState(),f.viewState)&&(!n||(0,S.kK)(n,f.extent))}getAttributions(s){if(!this.isVisible(s))return[];let f;const n=this.getSource();if(n&&(f=n.getAttributions()),!f)return[];let g=f(s instanceof U.ZP?s.getViewStateAndExtent():s);return Array.isArray(g)||(g=[g]),g}render(s,f){const n=this.getRenderer();if(n.prepareFrame(s))return this.rendered=!0,n.renderFrame(s,f)}unrender(){this.rendered=!1}setMapInternal(s){s||this.unrender(),this.set(k.Z.MAP,s)}getMapInternal(){return this.get(k.Z.MAP)}setMap(s){this.mapPrecomposeKey_&&((0,P.bN)(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),s||this.changed(),this.mapRenderKey_&&((0,P.bN)(this.mapRenderKey_),this.mapRenderKey_=null),s&&(this.mapPrecomposeKey_=(0,P.oL)(s,z.Z.PRECOMPOSE,function(f){const h=f.frameState.layerStatesArray,g=this.getLayerState(!1);(0,I.h)(!h.some(function(e){return e.layer===g.layer}),67),h.push(g)},this),this.mapRenderKey_=(0,P.oL)(this,D.Z.CHANGE,s.render,s),this.changed())}setSource(s){this.set(k.Z.SOURCE,s)}getRenderer(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_}hasRenderer(){return!!this.renderer_}createRenderer(){return null}disposeInternal(){this.renderer_&&(this.renderer_.dispose(),delete this.renderer_),this.setSource(null),super.disposeInternal()}}},3570:(Bt,ot,a)=>{"use strict";a.d(ot,{Z:()=>G});const G={OPACITY:"opacity",VISIBLE:"visible",EXTENT:"extent",Z_INDEX:"zIndex",MAX_RESOLUTION:"maxResolution",MIN_RESOLUTION:"minResolution",MAX_ZOOM:"maxZoom",MIN_ZOOM:"minZoom",SOURCE:"source",MAP:"map"}},993:(Bt,ot,a)=>{"use strict";a.d(ot,{Z:()=>z});var G=a(7319),D=a(6257);const z=class k extends G.Z{constructor(I){super(I)}createRenderer(){return new D.Z(this)}}},3332:(Bt,ot,a)=>{"use strict";a.d(ot,{Z:()=>G});const G={PRELOAD:"preload",USE_INTERIM_TILES_ON_ERROR:"useInterimTilesOnError"}},7356:(Bt,ot,a)=>{"use strict";a.d(ot,{Z:()=>z});var G=a(4420),D=a(2308);const z=class k extends G.Z{constructor(I){super(I)}createRenderer(){return new D.Z(this)}}},585:(Bt,ot,a)=>{"use strict";a.d(ot,{Z:()=>x});var G=a(4420),D=a(7599),k=a(1015),z=a(6257),U=a(4700),I=a(9500),S=a(7713),P=a(7139),p=a(9543),d=a(7707),u=a(513),c=a(931),s=a(5415);const f={image:["Polygon","Circle","LineString","Image","Text"],hybrid:["Polygon","LineString"],vector:[]},n={hybrid:["Image","Text","Default"],vector:["Polygon","Circle","LineString","Image","Text","Default"]},g=class h extends z.Z{constructor(O){super(O),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.renderedPixelToCoordinateTransform_=null,this.tmpTransform_=(0,P.Ue)()}prepareTile(O,y,R){let W;const K=O.getState();return(K===U.Z.LOADED||K===U.Z.ERROR)&&(this.updateExecutorGroup_(O,y,R),this.tileImageNeedsRender_(O)&&(W=!0)),W}getTile(O,y,R,W){const K=W.pixelRatio,nt=W.viewState,A=nt.resolution,L=nt.projection,b=this.getLayer(),M=b.getSource().getTile(O,y,R,K,L),C=W.viewHints,N=!(C[I.Z.ANIMATING]||C[I.Z.INTERACTING]);return(N||!M.wantedResolution)&&(M.wantedResolution=A),this.prepareTile(M,K,L)&&(N||Date.now()-W.time<8)&&"vector"!==b.getRenderMode()&&this.renderTileImage_(M,W),super.getTile(O,y,R,W)}isDrawableTile(O){const y=this.getLayer();return super.isDrawableTile(O)&&("vector"===y.getRenderMode()?(0,u.sq)(y)in O.executorGroups:O.hasContext(y))}getTileImage(O){return O.getImage(this.getLayer())}prepareFrame(O){const y=this.getLayer().getRevision();return this.renderedLayerRevision_!==y&&(this.renderedLayerRevision_=y,this.renderedTiles.length=0),super.prepareFrame(O)}updateExecutorGroup_(O,y,R){const W=this.getLayer(),K=W.getRevision(),nt=W.getRenderOrder()||null,A=O.wantedResolution,L=O.getReplayState(W);if(!L.dirty&&L.renderedResolution===A&&L.renderedRevision==K&&L.renderedRenderOrder==nt)return;const b=W.getSource(),M=W.getDeclutter(),C=b.getTileGrid(),H=b.getTileGridForProjection(R).getTileCoordExtent(O.wrappedTileCoord),it=b.getSourceTiles(y,R,O),Y=(0,u.sq)(W);delete O.hitDetectionImageData[Y],O.executorGroups[Y]=[],M&&(O.declutterExecutorGroups[Y]=[]),L.dirty=!1;for(let st=0,ht=it.length;st<ht;++st){const Tt=it[st];if(Tt.getState()!=U.Z.LOADED)continue;const Ct=C.getTileCoordExtent(Tt.tileCoord),bt=(0,p.Ed)(H,Ct),Gt=(0,p.f3)(bt,W.getRenderBuffer()*A,this.tmpExtent),kt=(0,p.fS)(Ct,bt)?null:Gt,ie=new D.Z(0,Gt,A,y),zt=M?new D.Z(0,bt,A,y):void 0,ue=(0,d.se)(A,y),de=function(At){let Yt;const ge=At.getStyleFunction()||W.getStyleFunction();if(ge&&(Yt=ge(At,A)),Yt){const qt=this.renderFeature(At,ue,Yt,ie,zt);L.dirty=L.dirty||qt}},ce=Tt.getFeatures();nt&&nt!==L.renderedRenderOrder&&ce.sort(nt);for(let At=0,Yt=ce.length;At<Yt;++At){const ge=ce[At];(!kt||(0,p.kK)(kt,ge.getGeometry().getExtent()))&&de.call(this,ge)}const Se=ie.finish(),dt="vector"!==W.getRenderMode()&&M&&1===it.length?null:bt,Ot=new k.Z(dt,A,y,b.getOverlaps(),Se,W.getRenderBuffer());if(O.executorGroups[Y].push(Ot),zt){const At=new k.Z(null,A,y,b.getOverlaps(),zt.finish(),W.getRenderBuffer());O.declutterExecutorGroups[Y].push(At)}}L.renderedRevision=K,L.renderedRenderOrder=nt,L.renderedResolution=A}forEachFeatureAtCoordinate(O,y,R,W,K){const nt=y.viewState.resolution,A=y.viewState.rotation;R=R??0;const L=this.getLayer(),M=L.getSource().getTileGridForProjection(y.viewState.projection),C=(0,p.hI)([O]);(0,p.f3)(C,nt*R,C);const N={},H=function(st,ht,Tt){let vt=st.getId();void 0===vt&&(vt=(0,u.sq)(st));const Ct=N[vt];if(Ct){if(!0!==Ct&&Tt<Ct.distanceSq){if(0===Tt)return N[vt]=!0,K.splice(K.lastIndexOf(Ct),1),W(st,L,ht);Ct.geometry=ht,Ct.distanceSq=Tt}}else{if(0===Tt)return N[vt]=!0,W(st,L,ht);K.push(N[vt]={feature:st,layer:L,geometry:ht,distanceSq:Tt,callback:W})}},it=this.renderedTiles;let Y;for(let st=0,ht=it.length;!Y&&st<ht;++st){const Tt=it[st],vt=M.getTileCoordExtent(Tt.wrappedTileCoord);if(!(0,p.kK)(vt,C))continue;const Ct=(0,u.sq)(L),bt=[Tt.executorGroups[Ct]],Gt=Tt.declutterExecutorGroups[Ct];Gt&&bt.push(Gt),bt.some(kt=>{const ie=kt===Gt?y.declutterTree.all().map(zt=>zt.value):null;for(let zt=0,ue=kt.length;zt<ue;++zt)if(Y=kt[zt].forEachFeatureAtCoordinate(O,nt,A,R,H,ie),Y)return!0})}return Y}getFeatures(O){return new Promise((y,R)=>{const W=this.getLayer(),K=(0,u.sq)(W),nt=W.getSource(),A=this.renderedProjection,L=A.getExtent(),b=this.renderedResolution,M=nt.getTileGridForProjection(A),C=(0,P.nn)(this.renderedPixelToCoordinateTransform_,O.slice()),N=M.getTileCoordForCoordAndResolution(C,b);let H;for(let vt=0,Ct=this.renderedTiles.length;vt<Ct;++vt)if(N.toString()===this.renderedTiles[vt].tileCoord.toString()){if(H=this.renderedTiles[vt],H.getState()===U.Z.LOADED){const bt=M.getTileCoordExtent(H.tileCoord);nt.getWrapX()&&A.canWrapX()&&!(0,p.r4)(L,bt)&&(0,s.Cf)(C,A);break}H=void 0}if(!H||H.loadingSourceTiles>0)return void y([]);const it=M.getTileCoordExtent(H.wrappedTileCoord),Y=(0,p.rL)(it),st=[(C[0]-Y[0])/b,(Y[1]-C[1])/b],ht=H.getSourceTiles().reduce(function(vt,Ct){return vt.concat(Ct.getFeatures())},[]);let Tt=H.hitDetectionImageData[K];if(!Tt){const vt=(0,c.Pq)(M.getTileSize(M.getZForResolution(b,nt.zDirection))),Ct=this.renderedRotation_,bt=[this.getRenderTransform(M.getTileCoordCenter(H.wrappedTileCoord),b,0,S.UN,vt[0]*S.UN,vt[1]*S.UN,0)];Tt=(0,S.TU)(vt,bt,ht,W.getStyleFunction(),M.getTileCoordExtent(H.wrappedTileCoord),H.getReplayState(W).renderedResolution,Ct),H.hitDetectionImageData[K]=Tt}y((0,S.ix)(st,ht,Tt))})}handleFontsChanged(){const O=this.getLayer();O.getVisible()&&void 0!==this.renderedLayerRevision_&&O.changed()}handleStyleImageChange_(O){this.renderIfReadyAndVisible()}renderDeclutter(O){const y=this.context,R=y.globalAlpha;y.globalAlpha=this.getLayer().getOpacity();const W=O.viewHints,K=!(W[I.Z.ANIMATING]||W[I.Z.INTERACTING]),nt=this.renderedTiles;for(let A=0,L=nt.length;A<L;++A){const b=nt[A],M=b.declutterExecutorGroups[(0,u.sq)(this.getLayer())];if(M)for(let C=M.length-1;C>=0;--C)M[C].execute(this.context,1,this.getTileRenderTransform(b,O),O.viewState.rotation,K,void 0,O.declutterTree)}y.globalAlpha=R}getTileRenderTransform(O,y){const R=y.pixelRatio,W=y.viewState,K=W.center,nt=W.resolution,A=W.rotation,L=y.size,b=Math.round(L[0]*R),M=Math.round(L[1]*R),N=this.getLayer().getSource().getTileGridForProjection(y.viewState.projection),H=O.tileCoord,it=N.getTileCoordExtent(O.wrappedTileCoord),Y=N.getTileCoordExtent(H,this.tmpExtent)[0]-it[0];return(0,P.Jp)((0,P.bA)(this.inversePixelTransform.slice(),1/R,1/R),this.getRenderTransform(K,nt,A,R,b,M,Y))}postRender(O,y){const R=y.viewHints,W=!(R[I.Z.ANIMATING]||R[I.Z.INTERACTING]);this.renderedPixelToCoordinateTransform_=y.pixelToCoordinateTransform.slice(),this.renderedRotation_=y.viewState.rotation;const K=this.getLayer(),nt=K.getRenderMode(),A=O.globalAlpha;O.globalAlpha=K.getOpacity();const L=n[nt],b=y.viewState,M=b.rotation,C=K.getSource(),H=C.getTileGridForProjection(b.projection).getZForResolution(b.resolution,C.zDirection),it=this.renderedTiles,Y=[],st=[];let ht=!0;for(let Tt=it.length-1;Tt>=0;--Tt){const vt=it[Tt];ht=ht&&!vt.getReplayState(K).dirty;const Ct=vt.executorGroups[(0,u.sq)(K)].filter(zt=>zt.hasExecutors(L));if(0===Ct.length)continue;const bt=this.getTileRenderTransform(vt,y),Gt=vt.tileCoord[0];let kt=!1;const ie=Ct[0].getClipCoords(bt);if(ie){for(let zt=0,ue=Y.length;zt<ue;++zt)if(H!==Gt&&Gt<st[zt]){const de=Y[zt];(0,p.kK)([ie[0],ie[3],ie[4],ie[7]],[de[0],de[3],de[4],de[7]])&&(kt||(O.save(),kt=!0),O.beginPath(),O.moveTo(ie[0],ie[1]),O.lineTo(ie[2],ie[3]),O.lineTo(ie[4],ie[5]),O.lineTo(ie[6],ie[7]),O.moveTo(de[6],de[7]),O.lineTo(de[4],de[5]),O.lineTo(de[2],de[3]),O.lineTo(de[0],de[1]),O.clip())}Y.push(ie),st.push(Gt)}for(let zt=0,ue=Ct.length;zt<ue;++zt)Ct[zt].execute(O,1,bt,M,W,L);kt&&O.restore()}O.globalAlpha=A,this.ready=ht,super.postRender(O,y)}renderFeature(O,y,R,W,K){if(!R)return!1;let nt=!1;if(Array.isArray(R))for(let A=0,L=R.length;A<L;++A)nt=(0,d.Pn)(W,O,R[A],y,this.boundHandleStyleImageChange_,void 0,K)||nt;else nt=(0,d.Pn)(W,O,R,y,this.boundHandleStyleImageChange_,void 0,K);return nt}tileImageNeedsRender_(O){const y=this.getLayer();if("vector"===y.getRenderMode())return!1;const R=O.getReplayState(y),W=y.getRevision();return R.renderedTileResolution!==O.wantedResolution||R.renderedTileRevision!==W}renderTileImage_(O,y){const R=this.getLayer(),W=O.getReplayState(R),K=R.getRevision(),nt=O.executorGroups[(0,u.sq)(R)];W.renderedTileRevision=K;const A=O.wrappedTileCoord,L=A[0],b=R.getSource();let M=y.pixelRatio;const N=y.viewState.projection,H=b.getTileGridForProjection(N),it=H.getResolution(O.tileCoord[0]),Y=y.pixelRatio/O.wantedResolution*it,st=H.getResolution(L),ht=O.getContext(R);M=Math.round(Math.max(M,Y/M));const Tt=b.getTilePixelSize(L,M,N);ht.canvas.width=Tt[0],ht.canvas.height=Tt[1];const vt=M/Y;if(1!==vt){const kt=(0,P.mc)(this.tmpTransform_);(0,P.bA)(kt,vt,vt),ht.setTransform.apply(ht,kt)}const Ct=H.getTileCoordExtent(A,this.tmpExtent),bt=Y/st,Gt=(0,P.mc)(this.tmpTransform_);(0,P.bA)(Gt,bt,-bt),(0,P.Iu)(Gt,-Ct[0],-Ct[3]);for(let kt=0,ie=nt.length;kt<ie;++kt)nt[kt].execute(ht,vt,Gt,0,!0,f[R.getRenderMode()]);W.renderedTileResolution=O.wantedResolution}};var e=a(3332),E=a(992);const x=class v extends G.Z{constructor(O){O=O||{};const y=Object.assign({},O);delete y.preload,delete y.useInterimTilesOnError,super(y);const R=O.renderMode||"hybrid";(0,E.h)("hybrid"==R||"vector"==R,28),this.renderMode_=R,this.setPreload(O.preload?O.preload:0),this.setUseInterimTilesOnError(void 0===O.useInterimTilesOnError||O.useInterimTilesOnError)}createRenderer(){return new g(this)}getFeatures(O){return super.getFeatures(O)}getRenderMode(){return this.renderMode_}getPreload(){return this.get(e.Z.PRELOAD)}getUseInterimTilesOnError(){return this.get(e.Z.USE_INTERIM_TILES_ON_ERROR)}setPreload(O){this.set(e.Z.PRELOAD,O)}setUseInterimTilesOnError(O){this.set(e.Z.USE_INTERIM_TILES_ON_ERROR,O)}}},8742:(Bt,ot,a)=>{"use strict";function D(U,I){return[[-1/0,-1/0,1/0,1/0]]}function k(U,I){return[U]}a.d(ot,{$6:()=>D,VW:()=>k}),a(9015)},4331:(Bt,ot,a)=>{"use strict";function G(s,f,n){return Math.min(Math.max(s,f),n)}function D(s,f,n,h,g,e){const E=g-n,v=e-h;if(0!==E||0!==v){const x=((s-n)*E+(f-h)*v)/(E*E+v*v);x>1?(n=g,h=e):x>0&&(n+=E*x,h+=v*x)}return k(s,f,n,h)}function k(s,f,n,h){const g=n-s,e=h-f;return g*g+e*e}function z(s){const f=s.length;for(let h=0;h<f;h++){let g=h,e=Math.abs(s[h][h]);for(let v=h+1;v<f;v++){const x=Math.abs(s[v][h]);x>e&&(e=x,g=v)}if(0===e)return null;const E=s[g];s[g]=s[h],s[h]=E;for(let v=h+1;v<f;v++){const x=-s[v][h]/s[h][h];for(let w=h;w<f+1;w++)h==w?s[v][w]=0:s[v][w]+=x*s[h][w]}}const n=new Array(f);for(let h=f-1;h>=0;h--){n[h]=s[h][f]/s[h][h];for(let g=h-1;g>=0;g--)s[g][f]-=s[g][h]*n[h]}return n}function I(s){return s*Math.PI/180}function S(s,f){const n=s%f;return n*f<0?n+f:n}function P(s,f,n){return s+n*(f-s)}function p(s,f){const n=Math.pow(10,f);return Math.round(s*n)/n}function d(s,f){return Math.round(p(s,f))}function u(s,f){return Math.floor(p(s,f))}function c(s,f){return Math.ceil(p(s,f))}a.d(ot,{$W:()=>S,FH:()=>p,GW:()=>u,NM:()=>d,SV:()=>z,Yr:()=>I,bI:()=>k,mD:()=>c,rU:()=>D,t7:()=>P,uZ:()=>G})},9306:(Bt,ot,a)=>{"use strict";function G(k){for(const z in k)delete k[z]}function D(k){let z;for(z in k)return!1;return!z}a.d(ot,{Z:()=>G,x:()=>D})},5622:(Bt,ot,a)=>{"use strict";a.d(ot,{Z:()=>G});const G={POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"}},9015:(Bt,ot,a)=>{"use strict";a.d(ot,{Wm:()=>h.W,kv:()=>G.Z,zY:()=>ie,rM:()=>vt,Sx:()=>Y,UQ:()=>Gt,uA:()=>Ze,h_:()=>N,OP:()=>de,mi:()=>zt,Vs:()=>jt,dY:()=>he,U2:()=>ht,_Q:()=>Tt,Ck:()=>Se,WO:()=>ce,Cs:()=>gt,gD:()=>it,lO:()=>Zt,Fj:()=>Wt,on:()=>_e,vs:()=>dt,$A:()=>Ot});var G=a(2632);const D=6378137,k=Math.PI*D,z=[-k,-k,k,k],U=[-180,-85,180,85],I=D*Math.log(Math.tan(Math.PI/2));class S extends G.Z{constructor(m){super({code:m,units:"m",extent:z,global:!0,worldExtent:U,getPointResolution:function(F,Q){return F/Math.cosh(Q[1]/D)}})}}const P=[new S("EPSG:3857"),new S("EPSG:102100"),new S("EPSG:102113"),new S("EPSG:900913"),new S("http://www.opengis.net/def/crs/EPSG/0/3857"),new S("http://www.opengis.net/gml/srs/epsg.xml#3857")];function p(ct,m,F){const Q=ct.length;F=F>1?F:2,void 0===m&&(m=F>2?ct.slice():new Array(Q));for(let V=0;V<Q;V+=F){m[V]=k*ct[V]/180;let lt=D*Math.log(Math.tan(Math.PI*(+ct[V+1]+90)/360));lt>I?lt=I:lt<-I&&(lt=-I),m[V+1]=lt}return m}function d(ct,m,F){const Q=ct.length;F=F>1?F:2,void 0===m&&(m=F>2?ct.slice():new Array(Q));for(let V=0;V<Q;V+=F)m[V]=180*ct[V]/k,m[V+1]=360*Math.atan(Math.exp(ct[V+1]/D))/Math.PI-90;return m}const c=[-180,-90,180,90],s=6378137*Math.PI/180;class f extends G.Z{constructor(m,F){super({code:m,units:"degrees",extent:c,axisOrientation:F,global:!0,metersPerUnit:s,worldExtent:c})}}const n=[new f("CRS:84"),new f("EPSG:4326","neu"),new f("urn:ogc:def:crs:OGC:1.3:CRS84"),new f("urn:ogc:def:crs:OGC:2:84"),new f("http://www.opengis.net/def/crs/OGC/1.3/CRS84"),new f("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new f("http://www.opengis.net/def/crs/EPSG/0/4326","neu")];var h=a(1285);let g={};var x=a(6794),w=a(9543),O=a(4331),y=a(5415);function W(ct,m,F){F=F||6371008.8;const Q=(0,O.Yr)(ct[1]),V=(0,O.Yr)(m[1]),lt=(V-Q)/2,_t=(0,O.Yr)(m[0]-ct[0])/2,St=Math.sin(lt)*Math.sin(lt)+Math.sin(_t)*Math.sin(_t)*Math.cos(Q)*Math.cos(V);return 2*F*Math.atan2(Math.sqrt(St),Math.sqrt(1-St))}var M=a(246);let C=!0;function N(ct){C=!(void 0===ct||ct)}function H(ct,m){if(void 0!==m)for(let F=0,Q=ct.length;F<Q;++F)m[F]=ct[F];else m=ct.slice();return m}function it(ct,m){if(void 0!==m&&ct!==m){for(let F=0,Q=ct.length;F<Q;++F)m[F]=ct[F];ct=m}return ct}function Y(ct){(function v(ct,m){g[ct]=m})(ct.getCode(),ct),(0,x.IH)(ct,ct,H)}function ht(ct){return"string"==typeof ct?function E(ct){return g[ct]||g[ct.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\w+)$/,"EPSG:$3")]||null}(ct):ct||null}function Tt(ct,m,F,Q){let V;const lt=(ct=ht(ct)).getPointResolutionFunc();if(lt){if(V=lt(m,F),Q&&Q!==ct.getUnits()){const _t=ct.getMetersPerUnit();_t&&(V=V*_t/h.W[Q])}}else{const _t=ct.getUnits();if("degrees"==_t&&!Q||"degrees"==Q)V=m;else{const St=ce(ct,ht("EPSG:4326"));if(St===it&&"degrees"!==_t)V=m*ct.getMetersPerUnit();else{let Xt=[F[0]-m/2,F[1],F[0]+m/2,F[1],F[0],F[1]-m/2,F[0],F[1]+m/2];Xt=St(Xt,Xt,2),V=(W(Xt.slice(0,2),Xt.slice(2,4))+W(Xt.slice(4,6),Xt.slice(6,8)))/2}const Nt=Q?h.W[Q]:ct.getMetersPerUnit();void 0!==Nt&&(V/=Nt)}}return V}function vt(ct){(function st(ct){ct.forEach(Y)})(ct),ct.forEach(function(m){ct.forEach(function(F){m!==F&&(0,x.IH)(m,F,H)})})}function Gt(ct,m){return ct?"string"==typeof ct?ht(ct):ct:ht(m)}function kt(ct){return function(m,F,Q){const V=m.length;Q=void 0!==Q?Q:2,F=void 0!==F?F:new Array(V);for(let lt=0;lt<V;lt+=Q){const _t=ct(m.slice(lt,lt+Q)),St=_t.length;for(let Nt=0,Xt=Q;Nt<Xt;++Nt)F[lt+Nt]=Nt>=St?m[lt+Nt]:_t[Nt]}return F}}function ie(ct,m,F,Q){const V=ht(ct),lt=ht(m);(0,x.IH)(V,lt,kt(F)),(0,x.IH)(lt,V,kt(Q))}function zt(ct,m){return N(),dt(ct,"EPSG:4326",void 0!==m?m:"EPSG:3857")}function de(ct,m){if(ct===m)return!0;const F=ct.getUnits()===m.getUnits();return(ct.getCode()===m.getCode()||ce(ct,m)===H)&&F}function ce(ct,m){const F=ct.getCode(),Q=m.getCode();let V=(0,x.U2)(F,Q);return V||(V=it),V}function Se(ct,m){return ce(ht(ct),ht(m))}function dt(ct,m,F){return Se(m,F)(ct,void 0,ct.length)}function Ot(ct,m,F,Q){const V=Se(m,F);return(0,w.Ne)(ct,V,void 0,Q)}let Yt=null;function gt(){return Yt}function Zt(ct,m){return ct}function jt(ct,m){return C&&!(0,y.fS)(ct,[0,0])&&ct[0]>=-180&&ct[0]<=180&&ct[1]>=-90&&ct[1]<=90&&(C=!1,(0,M.ZK)("Call useGeographic() from ol/proj once to work with [longitude, latitude] coordinates.")),ct}function Wt(ct,m){return ct}function he(ct,m){return ct}function _e(ct,m){return ct}function Ze(ct,m,F){return function(Q){let V,lt;if(ct.canWrapX()){const _t=ct.getExtent(),St=(0,w.dz)(_t);Q=Q.slice(0),lt=(0,y.jk)(Q,ct,St),lt&&(Q[0]=Q[0]-lt*St),Q[0]=(0,O.uZ)(Q[0],_t[0],_t[2]),Q[1]=(0,O.uZ)(Q[1],_t[1],_t[3]),V=F(Q)}else V=F(Q);return lt&&m.canWrapX()&&(V[0]+=lt*(0,w.dz)(m.getExtent())),V}}!function It(){vt(P),vt(n),function Ct(ct,m,F,Q){ct.forEach(function(V){m.forEach(function(lt){(0,x.IH)(V,lt,F),(0,x.IH)(lt,V,Q)})})}(n,P,p,d)}()},2632:(Bt,ot,a)=>{"use strict";a.d(ot,{Z:()=>k});var G=a(1285);const k=class D{constructor(U){this.code_=U.code,this.units_=U.units,this.extent_=void 0!==U.extent?U.extent:null,this.worldExtent_=void 0!==U.worldExtent?U.worldExtent:null,this.axisOrientation_=void 0!==U.axisOrientation?U.axisOrientation:"enu",this.global_=void 0!==U.global&&U.global,this.canWrapX_=!(!this.global_||!this.extent_),this.getPointResolutionFunc_=U.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=U.metersPerUnit}canWrapX(){return this.canWrapX_}getCode(){return this.code_}getExtent(){return this.extent_}getUnits(){return this.units_}getMetersPerUnit(){return this.metersPerUnit_||G.W[this.units_]}getWorldExtent(){return this.worldExtent_}getAxisOrientation(){return this.axisOrientation_}isGlobal(){return this.global_}setGlobal(U){this.global_=U,this.canWrapX_=!(!U||!this.extent_)}getDefaultTileGrid(){return this.defaultTileGrid_}setDefaultTileGrid(U){this.defaultTileGrid_=U}setExtent(U){this.extent_=U,this.canWrapX_=!(!this.global_||!U)}setWorldExtent(U){this.worldExtent_=U}setGetPointResolution(U){this.getPointResolutionFunc_=U}getPointResolutionFunc(){return this.getPointResolutionFunc_}}},1285:(Bt,ot,a)=>{"use strict";a.d(ot,{W:()=>k});const k={radians:6370997/(2*Math.PI),degrees:2*Math.PI*6370997/360,ft:.3048,m:1,"us-ft":1200/3937}},3669:(Bt,ot,a)=>{"use strict";a.d(ot,{z2:()=>S});var G=a(2632),D=a(9015),k=a(6794);let z=null;function S(s){z=s;const f=Object.keys(s.defs),n=f.length;let h,g;for(h=0;h<n;++h){const e=f[h];if(!(0,D.U2)(e)){const E=s.defs(e);let v=E.units;!v&&"longlat"===E.projName&&(v="degrees"),(0,D.Sx)(new G.Z({code:e,axisOrientation:E.axis,metersPerUnit:E.to_meter,units:v}))}}for(h=0;h<n;++h){const e=f[h],E=(0,D.U2)(e);for(g=0;g<n;++g){const v=f[g],x=(0,D.U2)(v);if(!(0,k.U2)(e,v))if(s.defs[e]===s.defs[v])(0,D.rM)([E,x]);else{const w=s(e,v);(0,D.zY)(E,x,(0,D.uA)(E,x,w.forward),(0,D.uA)(x,E,w.inverse))}}}}},6794:(Bt,ot,a)=>{"use strict";a.d(ot,{IH:()=>k,U2:()=>U});let G={};function k(I,S,P){const p=I.getCode(),d=S.getCode();p in G||(G[p]={}),G[p][d]=P}function U(I,S){let P;return I in G&&S in G[I]&&(P=G[I][S]),P}},9683:(Bt,ot,a)=>{"use strict";a.d(ot,{Z:()=>k});var G=a(3615);const k=class D extends G.ZP{constructor(U,I,S,P){super(U),this.inversePixelTransform=I,this.frameState=S,this.context=P}}},8779:(Bt,ot,a)=>{"use strict";a.d(ot,{Z:()=>G});const G={PRERENDER:"prerender",POSTRENDER:"postrender",PRECOMPOSE:"precompose",POSTCOMPOSE:"postcompose",RENDERCOMPLETE:"rendercomplete"}},2929:(Bt,ot,a)=>{"use strict";a.d(ot,{ZP:()=>s});var G=a(7139),D=a(9543),k=a(142),z=a(5577),U=a(9015),I=a(7170),S=a(2783),P=a(3904);const p=(0,G.Ue)();class d{constructor(n,h,g,e,E){this.id_=E,this.type_=n,this.flatCoordinates_=h,this.flatInteriorPoints_=null,this.flatMidpoints_=null,this.ends_=g,this.properties_=e}get(n){return this.properties_[n]}getExtent(){return this.extent_||(this.extent_="Point"===this.type_?(0,D.HK)(this.flatCoordinates_):(0,D.GN)(this.flatCoordinates_,0,this.flatCoordinates_.length,2)),this.extent_}getFlatInteriorPoint(){if(!this.flatInteriorPoints_){const n=(0,D.qg)(this.getExtent());this.flatInteriorPoints_=(0,z.X)(this.flatCoordinates_,0,this.ends_,2,n,0)}return this.flatInteriorPoints_}getFlatInteriorPoints(){if(!this.flatInteriorPoints_){const n=(0,S.E)(this.flatCoordinates_,0,this.ends_,2);this.flatInteriorPoints_=(0,z.U)(this.flatCoordinates_,0,this.ends_,2,n)}return this.flatInteriorPoints_}getFlatMidpoint(){return this.flatMidpoints_||(this.flatMidpoints_=(0,I.WW)(this.flatCoordinates_,0,this.flatCoordinates_.length,2,.5)),this.flatMidpoints_}getFlatMidpoints(){if(!this.flatMidpoints_){this.flatMidpoints_=[];const n=this.flatCoordinates_;let h=0;const g=this.ends_;for(let e=0,E=g.length;e<E;++e){const v=g[e],x=(0,I.WW)(n,h,v,2,.5);(0,k.l7)(this.flatMidpoints_,x),h=v}}return this.flatMidpoints_}getId(){return this.id_}getOrientedFlatCoordinates(){return this.flatCoordinates_}getGeometry(){return this}getSimplifiedGeometry(n){return this}simplifyTransformed(n,h){return this}getProperties(){return this.properties_}getStride(){return 2}getStyleFunction(){return this.styleFunction}getType(){return this.type_}transform(n){const h=(n=(0,U.U2)(n)).getExtent(),g=n.getWorldExtent();if(h&&g){const e=(0,D.Cr)(g)/(0,D.Cr)(h);(0,G.qC)(p,g[0],g[3],e,-e,0,0,0),(0,P.vT)(this.flatCoordinates_,0,this.flatCoordinates_.length,2,p,this.flatCoordinates_)}}getEnds(){return this.ends_}}d.prototype.getEndss=d.prototype.getEnds,d.prototype.getFlatCoordinates=d.prototype.getOrientedFlatCoordinates;const s=d},8110:(Bt,ot,a)=>{"use strict";a.d(ot,{Z:()=>D});const D=class G{drawCustom(z,U,I,S){}drawGeometry(z){}setStyle(z){}drawCircle(z,U){}drawFeature(z,U){}drawGeometryCollection(z,U){}drawLineString(z,U){}drawMultiLineString(z,U){}drawMultiPoint(z,U){}drawMultiPolygon(z,U){}drawPoint(z,U){}drawPolygon(z,U){}drawText(z,U){}setFillStrokeStyle(z,U){}setImageStyle(z,U){}setTextStyle(z,U){}}},2768:(Bt,ot,a)=>{"use strict";a.d(ot,{Df:()=>I,He:()=>d,Kd:()=>W,PH:()=>f,Qx:()=>w,Tx:()=>s,V4:()=>c,X9:()=>p,Zw:()=>K,_f:()=>A,bL:()=>S,mb:()=>P,oB:()=>h,rc:()=>u,ru:()=>n,sG:()=>e,yC:()=>g});var G=a(4115),D=a(5063),k=a(9306),z=a(3842),U=a(1119);const I="10px sans-serif",S="#000",P="round",p=[],d=0,u="round",c=10,s="#000",f="center",n="middle",h=[0,0,0,0],g=1,e=new G.Z;let v,E=null;const x={},w=function(){const M="32px ",C=["monospace","serif"],N=C.length,H="wmytzilWMYTZIL@#/&?$%10\uf013";let it,Y;function st(Tt,vt,Ct){let bt=!0;for(let Gt=0;Gt<N;++Gt){const kt=C[Gt];if(Y=R(Tt+" "+vt+" "+M+kt,H),Ct!=kt){const ie=R(Tt+" "+vt+" "+M+Ct+","+kt,H);bt=bt&&ie!=Y}}return!!bt}function ht(){let Tt=!0;const vt=e.getKeys();for(let Ct=0,bt=vt.length;Ct<bt;++Ct){const Gt=vt[Ct];e.get(Gt)<100&&(st.apply(this,Gt.split("\n"))?((0,k.Z)(x),E=null,v=void 0,e.set(Gt,100)):(e.set(Gt,e.get(Gt)+1,!0),Tt=!1))}Tt&&(clearInterval(it),it=void 0)}return function(Tt){const vt=(0,U.p)(Tt);if(!vt)return;const Ct=vt.families;for(let bt=0,Gt=Ct.length;bt<Gt;++bt){const kt=Ct[bt],ie=vt.style+"\n"+vt.weight+"\n"+kt;void 0===e.get(ie)&&(e.set(ie,100,!0),st(vt.style,vt.weight,kt)||(e.set(ie,0,!0),void 0===it&&(it=setInterval(ht,32))))}}}(),O=function(){let b;return function(M){let C=x[M];if(null==C){if(D.Id){const N=(0,U.p)(M),H=y(M,"\u017dg");C=(isNaN(Number(N.lineHeight))?1.2:Number(N.lineHeight))*(H.actualBoundingBoxAscent+H.actualBoundingBoxDescent)}else b||(b=document.createElement("div"),b.innerHTML="M",b.style.minHeight="0",b.style.maxHeight="none",b.style.height="auto",b.style.padding="0",b.style.border="none",b.style.position="absolute",b.style.display="block",b.style.left="-99999px"),b.style.font=M,document.body.appendChild(b),C=b.offsetHeight,document.body.removeChild(b);x[M]=C}return C}}();function y(b,M){return E||(E=(0,z.E4)(1,1)),b!=v&&(E.font=b,v=E.font),E.measureText(M)}function R(b,M){return y(b,M).width}function W(b,M,C){if(M in C)return C[M];const N=M.split("\n").reduce((H,it)=>Math.max(H,R(b,it)),0);return C[M]=N,N}function K(b,M){const C=[],N=[],H=[];let it=0,Y=0,st=0,ht=0;for(let Tt=0,vt=M.length;Tt<=vt;Tt+=2){const Ct=M[Tt];if("\n"===Ct||Tt===vt){it=Math.max(it,Y),H.push(Y),Y=0,st+=ht;continue}const bt=M[Tt+1]||b.font,Gt=R(bt,Ct);C.push(Gt),Y+=Gt;const kt=O(bt);N.push(kt),ht=Math.max(ht,kt)}return{width:it,height:st,widths:C,heights:N,lineWidths:H}}function A(b,M,C,N,H,it,Y,st,ht,Tt,vt){b.save(),1!==C&&(b.globalAlpha*=C),M&&b.setTransform.apply(b,M),N.contextInstructions?(b.translate(ht,Tt),b.scale(vt[0],vt[1]),function L(b,M){const C=b.contextInstructions;for(let N=0,H=C.length;N<H;N+=2)Array.isArray(C[N+1])?M[C[N]].apply(M,C[N+1]):M[C[N]]=C[N+1]}(N,b)):vt[0]<0||vt[1]<0?(b.translate(ht,Tt),b.scale(vt[0],vt[1]),b.drawImage(N,H,it,Y,st,0,0,Y,st)):b.drawImage(N,H,it,Y,st,ht,Tt,Y*vt[0],st*vt[1]),b.restore()}},1211:(Bt,ot,a)=>{"use strict";a.d(ot,{Z:()=>d});var G=a(3430),D=a(8326),k=a(8110),z=a(4890),U=a(9543),I=a(2768),S=a(142),P=a(4850);const d=class p extends k.Z{constructor(c,s,f,n){super(),this.tolerance=c,this.maxExtent=s,this.pixelRatio=n,this.maxLineWidth=0,this.resolution=f,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_=null,this.bufferedMaxExtent_=null,this.instructions=[],this.coordinates=[],this.tmpCoordinate_=[],this.hitDetectionInstructions=[],this.state={}}applyPixelRatio(c){const s=this.pixelRatio;return 1==s?c:c.map(function(f){return f*s})}appendFlatPointCoordinates(c,s){const f=this.getBufferedMaxExtent(),n=this.tmpCoordinate_,h=this.coordinates;let g=h.length;for(let e=0,E=c.length;e<E;e+=s)n[0]=c[e],n[1]=c[e+1],(0,U.b8)(f,n)&&(h[g++]=n[0],h[g++]=n[1]);return g}appendFlatLineCoordinates(c,s,f,n,h,g){const e=this.coordinates;let E=e.length;const v=this.getBufferedMaxExtent();g&&(s+=n);let x=c[s],w=c[s+1];const O=this.tmpCoordinate_;let R,W,K,y=!0;for(R=s+n;R<f;R+=n)O[0]=c[R],O[1]=c[R+1],K=(0,U.pX)(v,O),K!==W?(y&&(e[E++]=x,e[E++]=w,y=!1),e[E++]=O[0],e[E++]=O[1]):K===D.Z.INTERSECTING?(e[E++]=O[0],e[E++]=O[1],y=!1):y=!0,x=O[0],w=O[1],W=K;return(h&&y||R===s+n)&&(e[E++]=x,e[E++]=w),E}drawCustomCoordinates_(c,s,f,n,h){for(let g=0,e=f.length;g<e;++g){const E=f[g],v=this.appendFlatLineCoordinates(c,s,E,n,!1,!1);h.push(v),s=E}return s}drawCustom(c,s,f,n){this.beginGeometry(c,s);const h=c.getType(),g=c.getStride(),e=this.coordinates.length;let E,v,x,w,O;switch(h){case"MultiPolygon":E=c.getOrientedFlatCoordinates(),w=[];const y=c.getEndss();O=0;for(let R=0,W=y.length;R<W;++R){const K=[];O=this.drawCustomCoordinates_(E,O,y[R],g,K),w.push(K)}this.instructions.push([G.ZP.CUSTOM,e,w,c,f,P.ug]),this.hitDetectionInstructions.push([G.ZP.CUSTOM,e,w,c,n||f,P.ug]);break;case"Polygon":case"MultiLineString":x=[],E="Polygon"==h?c.getOrientedFlatCoordinates():c.getFlatCoordinates(),O=this.drawCustomCoordinates_(E,0,c.getEnds(),g,x),this.instructions.push([G.ZP.CUSTOM,e,x,c,f,P.o1]),this.hitDetectionInstructions.push([G.ZP.CUSTOM,e,x,c,n||f,P.o1]);break;case"LineString":case"Circle":E=c.getFlatCoordinates(),v=this.appendFlatLineCoordinates(E,0,E.length,g,!1,!1),this.instructions.push([G.ZP.CUSTOM,e,v,c,f,P.Ml]),this.hitDetectionInstructions.push([G.ZP.CUSTOM,e,v,c,n||f,P.Ml]);break;case"MultiPoint":E=c.getFlatCoordinates(),v=this.appendFlatPointCoordinates(E,g),v>e&&(this.instructions.push([G.ZP.CUSTOM,e,v,c,f,P.Ml]),this.hitDetectionInstructions.push([G.ZP.CUSTOM,e,v,c,n||f,P.Ml]));break;case"Point":E=c.getFlatCoordinates(),this.coordinates.push(E[0],E[1]),v=this.coordinates.length,this.instructions.push([G.ZP.CUSTOM,e,v,c,f]),this.hitDetectionInstructions.push([G.ZP.CUSTOM,e,v,c,n||f])}this.endGeometry(s)}beginGeometry(c,s){this.beginGeometryInstruction1_=[G.ZP.BEGIN_GEOMETRY,s,0,c],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[G.ZP.BEGIN_GEOMETRY,s,0,c],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)}finish(){return{instructions:this.instructions,hitDetectionInstructions:this.hitDetectionInstructions,coordinates:this.coordinates}}reverseHitDetectionInstructions(){const c=this.hitDetectionInstructions;let s;c.reverse();const f=c.length;let n,h,g=-1;for(s=0;s<f;++s)n=c[s],h=n[0],h==G.ZP.END_GEOMETRY?g=s:h==G.ZP.BEGIN_GEOMETRY&&(n[2]=s,(0,S.FZ)(this.hitDetectionInstructions,g,s),g=-1)}setFillStrokeStyle(c,s){const f=this.state;if(c){const n=c.getColor();f.fillStyle=(0,z.y)(n||I.bL)}else f.fillStyle=void 0;if(s){const n=s.getColor();f.strokeStyle=(0,z.y)(n||I.Tx);const h=s.getLineCap();f.lineCap=void 0!==h?h:I.mb;const g=s.getLineDash();f.lineDash=g?g.slice():I.X9;const e=s.getLineDashOffset();f.lineDashOffset=e||I.He;const E=s.getLineJoin();f.lineJoin=void 0!==E?E:I.rc;const v=s.getWidth();f.lineWidth=void 0!==v?v:I.yC;const x=s.getMiterLimit();f.miterLimit=void 0!==x?x:I.V4,f.lineWidth>this.maxLineWidth&&(this.maxLineWidth=f.lineWidth,this.bufferedMaxExtent_=null)}else f.strokeStyle=void 0,f.lineCap=void 0,f.lineDash=null,f.lineDashOffset=void 0,f.lineJoin=void 0,f.lineWidth=void 0,f.miterLimit=void 0}createFill(c){const s=c.fillStyle,f=[G.ZP.SET_FILL_STYLE,s];return"string"!=typeof s&&f.push(!0),f}applyStroke(c){this.instructions.push(this.createStroke(c))}createStroke(c){return[G.ZP.SET_STROKE_STYLE,c.strokeStyle,c.lineWidth*this.pixelRatio,c.lineCap,c.lineJoin,c.miterLimit,this.applyPixelRatio(c.lineDash),c.lineDashOffset*this.pixelRatio]}updateFillStyle(c,s){const f=c.fillStyle;("string"!=typeof f||c.currentFillStyle!=f)&&(void 0!==f&&this.instructions.push(s.call(this,c)),c.currentFillStyle=f)}updateStrokeStyle(c,s){const f=c.strokeStyle,n=c.lineCap,h=c.lineDash,g=c.lineDashOffset,e=c.lineJoin,E=c.lineWidth,v=c.miterLimit;(c.currentStrokeStyle!=f||c.currentLineCap!=n||h!=c.currentLineDash&&!(0,S.fS)(c.currentLineDash,h)||c.currentLineDashOffset!=g||c.currentLineJoin!=e||c.currentLineWidth!=E||c.currentMiterLimit!=v)&&(void 0!==f&&s.call(this,c),c.currentStrokeStyle=f,c.currentLineCap=n,c.currentLineDash=h,c.currentLineDashOffset=g,c.currentLineJoin=e,c.currentLineWidth=E,c.currentMiterLimit=v)}endGeometry(c){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;const s=[G.ZP.END_GEOMETRY,c];this.instructions.push(s),this.hitDetectionInstructions.push(s)}getBufferedMaxExtent(){return!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=(0,U.d9)(this.maxExtent),this.maxLineWidth>0)&&(0,U.f3)(this.bufferedMaxExtent_,this.resolution*(this.maxLineWidth+1)/2,this.bufferedMaxExtent_),this.bufferedMaxExtent_}}},7599:(Bt,ot,a)=>{"use strict";a.d(ot,{Z:()=>f});var G=a(1211),D=a(3430);var U=a(2768);var P=a(1757);const d=class p extends G.Z{constructor(h,g,e,E){super(h,g,e,E)}drawFlatCoordinatess_(h,g,e,E){const v=this.state,x=void 0!==v.fillStyle,w=void 0!==v.strokeStyle,O=e.length;this.instructions.push(D.$O),this.hitDetectionInstructions.push(D.$O);for(let y=0;y<O;++y){const R=e[y],W=this.coordinates.length,K=this.appendFlatLineCoordinates(h,g,R,E,!0,!w),nt=[D.ZP.MOVE_TO_LINE_TO,W,K];this.instructions.push(nt),this.hitDetectionInstructions.push(nt),w&&(this.instructions.push(D.s3),this.hitDetectionInstructions.push(D.s3)),g=R}return x&&(this.instructions.push(D.gO),this.hitDetectionInstructions.push(D.gO)),w&&(this.instructions.push(D.Yc),this.hitDetectionInstructions.push(D.Yc)),g}drawCircle(h,g){const e=this.state;if(void 0===e.fillStyle&&void 0===e.strokeStyle)return;this.setFillStrokeStyles_(),this.beginGeometry(h,g),void 0!==e.fillStyle&&this.hitDetectionInstructions.push([D.ZP.SET_FILL_STYLE,U.bL]),void 0!==e.strokeStyle&&this.hitDetectionInstructions.push([D.ZP.SET_STROKE_STYLE,e.strokeStyle,e.lineWidth,e.lineCap,e.lineJoin,e.miterLimit,e.lineDash,e.lineDashOffset]);const x=h.getFlatCoordinates(),w=h.getStride(),O=this.coordinates.length;this.appendFlatLineCoordinates(x,0,x.length,w,!1,!1);const y=[D.ZP.CIRCLE,O];this.instructions.push(D.$O,y),this.hitDetectionInstructions.push(D.$O,y),void 0!==e.fillStyle&&(this.instructions.push(D.gO),this.hitDetectionInstructions.push(D.gO)),void 0!==e.strokeStyle&&(this.instructions.push(D.Yc),this.hitDetectionInstructions.push(D.Yc)),this.endGeometry(g)}drawPolygon(h,g){const e=this.state;if(void 0===e.fillStyle&&void 0===e.strokeStyle)return;this.setFillStrokeStyles_(),this.beginGeometry(h,g),void 0!==e.fillStyle&&this.hitDetectionInstructions.push([D.ZP.SET_FILL_STYLE,U.bL]),void 0!==e.strokeStyle&&this.hitDetectionInstructions.push([D.ZP.SET_STROKE_STYLE,e.strokeStyle,e.lineWidth,e.lineCap,e.lineJoin,e.miterLimit,e.lineDash,e.lineDashOffset]);const x=h.getEnds(),w=h.getOrientedFlatCoordinates(),O=h.getStride();this.drawFlatCoordinatess_(w,0,x,O),this.endGeometry(g)}drawMultiPolygon(h,g){const e=this.state;if(void 0===e.fillStyle&&void 0===e.strokeStyle)return;this.setFillStrokeStyles_(),this.beginGeometry(h,g),void 0!==e.fillStyle&&this.hitDetectionInstructions.push([D.ZP.SET_FILL_STYLE,U.bL]),void 0!==e.strokeStyle&&this.hitDetectionInstructions.push([D.ZP.SET_STROKE_STYLE,e.strokeStyle,e.lineWidth,e.lineCap,e.lineJoin,e.miterLimit,e.lineDash,e.lineDashOffset]);const x=h.getEndss(),w=h.getOrientedFlatCoordinates(),O=h.getStride();let y=0;for(let R=0,W=x.length;R<W;++R)y=this.drawFlatCoordinatess_(w,y,x[R],O);this.endGeometry(g)}finish(){this.reverseHitDetectionInstructions(),this.state=null;const h=this.tolerance;if(0!==h){const g=this.coordinates;for(let e=0,E=g.length;e<E;++e)g[e]=(0,P.uZ)(g[e],h)}return super.finish()}setFillStrokeStyles_(){const h=this.state;void 0!==h.fillStyle&&this.updateFillStyle(h,this.createFill),void 0!==h.strokeStyle&&this.updateStrokeStyle(h,this.applyStroke)}};var u=a(8840);const c={Circle:d,Default:G.Z,Image:class k extends G.Z{constructor(h,g,e,E){super(h,g,e,E),this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.anchorX_=void 0,this.anchorY_=void 0,this.height_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.scale_=void 0,this.width_=void 0,this.declutterMode_=void 0,this.declutterImageWithText_=void 0}drawPoint(h,g){if(!this.image_)return;this.beginGeometry(h,g);const e=h.getFlatCoordinates(),E=h.getStride(),v=this.coordinates.length,x=this.appendFlatPointCoordinates(e,E);this.instructions.push([D.ZP.DRAW_IMAGE,v,x,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([D.ZP.DRAW_IMAGE,v,x,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(g)}drawMultiPoint(h,g){if(!this.image_)return;this.beginGeometry(h,g);const e=h.getFlatCoordinates(),E=h.getStride(),v=this.coordinates.length,x=this.appendFlatPointCoordinates(e,E);this.instructions.push([D.ZP.DRAW_IMAGE,v,x,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([D.ZP.DRAW_IMAGE,v,x,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(g)}finish(){return this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0,super.finish()}setImageStyle(h,g){const e=h.getAnchor(),E=h.getSize(),v=h.getOrigin();this.imagePixelRatio_=h.getPixelRatio(this.pixelRatio),this.anchorX_=e[0],this.anchorY_=e[1],this.hitDetectionImage_=h.getHitDetectionImage(),this.image_=h.getImage(this.pixelRatio),this.height_=E[1],this.opacity_=h.getOpacity(),this.originX_=v[0],this.originY_=v[1],this.rotateWithView_=h.getRotateWithView(),this.rotation_=h.getRotation(),this.scale_=h.getScaleArray(),this.width_=E[0],this.declutterMode_=h.getDeclutterMode(),this.declutterImageWithText_=g}},LineString:class I extends G.Z{constructor(h,g,e,E){super(h,g,e,E)}drawFlatCoordinates_(h,g,e,E){const v=this.coordinates.length,x=this.appendFlatLineCoordinates(h,g,e,E,!1,!1),w=[D.ZP.MOVE_TO_LINE_TO,v,x];return this.instructions.push(w),this.hitDetectionInstructions.push(w),e}drawLineString(h,g){const e=this.state;if(void 0===e.strokeStyle||void 0===e.lineWidth)return;this.updateStrokeStyle(e,this.applyStroke),this.beginGeometry(h,g),this.hitDetectionInstructions.push([D.ZP.SET_STROKE_STYLE,e.strokeStyle,e.lineWidth,e.lineCap,e.lineJoin,e.miterLimit,U.X9,U.He],D.$O);const x=h.getFlatCoordinates(),w=h.getStride();this.drawFlatCoordinates_(x,0,x.length,w),this.hitDetectionInstructions.push(D.Yc),this.endGeometry(g)}drawMultiLineString(h,g){const e=this.state;if(void 0===e.strokeStyle||void 0===e.lineWidth)return;this.updateStrokeStyle(e,this.applyStroke),this.beginGeometry(h,g),this.hitDetectionInstructions.push([D.ZP.SET_STROKE_STYLE,e.strokeStyle,e.lineWidth,e.lineCap,e.lineJoin,e.miterLimit,e.lineDash,e.lineDashOffset],D.$O);const x=h.getEnds(),w=h.getFlatCoordinates(),O=h.getStride();let y=0;for(let R=0,W=x.length;R<W;++R)y=this.drawFlatCoordinates_(w,y,x[R],O);this.hitDetectionInstructions.push(D.Yc),this.endGeometry(g)}finish(){const h=this.state;return null!=h.lastStroke&&h.lastStroke!=this.coordinates.length&&this.instructions.push(D.Yc),this.reverseHitDetectionInstructions(),this.state=null,super.finish()}applyStroke(h){null!=h.lastStroke&&h.lastStroke!=this.coordinates.length&&(this.instructions.push(D.Yc),h.lastStroke=this.coordinates.length),h.lastStroke=0,super.applyStroke(h),this.instructions.push(D.$O)}},Polygon:d,Text:u.Z},f=class s{constructor(h,g,e,E){this.tolerance_=h,this.maxExtent_=g,this.pixelRatio_=E,this.resolution_=e,this.buildersByZIndex_={}}finish(){const h={};for(const g in this.buildersByZIndex_){h[g]=h[g]||{};const e=this.buildersByZIndex_[g];for(const E in e){const v=e[E].finish();h[g][E]=v}}return h}getBuilder(h,g){const e=void 0!==h?h.toString():"0";let E=this.buildersByZIndex_[e];void 0===E&&(E={},this.buildersByZIndex_[e]=E);let v=E[g];return void 0===v&&(v=new(0,c[g])(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_),E[g]=v),v}}},1015:(Bt,ot,a)=>{"use strict";a.d(ot,{Z:()=>nt});var G=a(3430),D=a(8840),k=a(7139),z=a(9543),U=a(2768),I=a(4331),S=a(3904);function P(A,L,b,M,C,N,H,it,Y,st,ht,Tt){let vt=A[L],Ct=A[L+1],bt=0,Gt=0,kt=0,ie=0;function zt(){bt=vt,Gt=Ct,vt=A[L+=M],Ct=A[L+1],ie+=kt,kt=Math.sqrt((vt-bt)*(vt-bt)+(Ct-Gt)*(Ct-Gt))}do{zt()}while(L<b-M&&ie+kt<N);let ue=0===kt?0:(N-ie)/kt;const de=(0,I.t7)(bt,vt,ue),ce=(0,I.t7)(Gt,Ct,ue),Se=L-M,dt=ie,Ot=N+it*Y(st,C,ht);for(;L<b-M&&ie+kt<Ot;)zt();ue=0===kt?0:(Ot-ie)/kt;const At=(0,I.t7)(bt,vt,ue),Yt=(0,I.t7)(Gt,Ct,ue);let ge;if(Tt){const jt=[de,ce,At,Yt];(0,S.U1)(jt,0,4,2,Tt,jt,jt),ge=jt[0]>jt[2]}else ge=de>At;const qt=Math.PI,gt=[],Mt=Se+M===L;let Zt;if(kt=0,ie=dt,vt=A[L=Se],Ct=A[L+1],Mt)return zt(),Zt=Math.atan2(Ct-Gt,vt-bt),ge&&(Zt+=Zt>0?-qt:qt),gt[0]=[(At+de)/2,(Yt+ce)/2,(Ot-N)/2,Zt,C],gt;for(let jt=0,Wt=(C=C.replace(/\n/g," ")).length;jt<Wt;){zt();let he=Math.atan2(Ct-Gt,vt-bt);if(ge&&(he+=he>0?-qt:qt),void 0!==Zt){let m=he-Zt;if(m+=m>qt?-2*qt:m<-qt?2*qt:0,Math.abs(m)>H)return null}Zt=he;const _e=jt;let Le=0;for(;jt<Wt;++jt){const F=it*Y(st,C[ge?Wt-jt-1:jt],ht);if(L+M<b&&ie+kt<N+Le+F/2)break;Le+=F}if(jt===_e)continue;const Ze=ge?C.substring(Wt-_e,Wt-jt):C.substring(_e,jt);ue=0===kt?0:(N+Le/2-ie)/kt;const It=(0,I.t7)(bt,vt,ue),ct=(0,I.t7)(Gt,Ct,ue);gt.push([It,ct,Le/2,he,Ze]),N+=Le}return gt}var p=a(142),d=a(8575);const u=(0,z.lJ)(),c=[],s=[],f=[],n=[];function h(A){return A[3].declutterBox}const g=new RegExp("["+String.fromCharCode(1425)+"-"+String.fromCharCode(2303)+String.fromCharCode(64285)+"-"+String.fromCharCode(65023)+String.fromCharCode(65136)+"-"+String.fromCharCode(65276)+String.fromCharCode(67584)+"-"+String.fromCharCode(69631)+String.fromCharCode(124928)+"-"+String.fromCharCode(126975)+"]");function e(A,L){return("start"===L||"end"===L)&&!g.test(A)&&(L="start"===L?"left":"right"),D.I[L]}function E(A,L,b){return b>0&&A.push("\n",""),A.push(L,""),A}const x=class v{constructor(L,b,M,C){this.overlaps=M,this.pixelRatio=b,this.resolution=L,this.instructions=C.instructions,this.coordinates=C.coordinates,this.coordinateCache_={},this.renderedTransform_=(0,k.Ue)(),this.hitDetectionInstructions=C.hitDetectionInstructions,this.pixelCoordinates_=null,this.viewRotation_=0,this.fillStates=C.fillStates||{},this.strokeStates=C.strokeStates||{},this.textStates=C.textStates||{},this.widths_={},this.labels_={}}createLabel(L,b,M,C){const N=L+b+M+C;if(this.labels_[N])return this.labels_[N];const H=C?this.strokeStates[C]:null,it=M?this.fillStates[M]:null,Y=this.textStates[b],st=this.pixelRatio,ht=[Y.scale[0]*st,Y.scale[1]*st],Tt=Array.isArray(L),vt=Y.justify?D.I[Y.justify]:e(Array.isArray(L)?L[0]:L,Y.textAlign||U.PH),Ct=C&&H.lineWidth?H.lineWidth:0,bt=Tt?L:L.split("\n").reduce(E,[]),{width:Gt,height:kt,widths:ie,heights:zt,lineWidths:ue}=(0,U.Zw)(Y,bt),de=Gt+Ct,ce=[],Se=(de+2)*ht[0],dt=(kt+Ct)*ht[1],Ot={width:Se<0?Math.floor(Se):Math.ceil(Se),height:dt<0?Math.floor(dt):Math.ceil(dt),contextInstructions:ce};(1!=ht[0]||1!=ht[1])&&ce.push("scale",ht),C&&(ce.push("strokeStyle",H.strokeStyle),ce.push("lineWidth",Ct),ce.push("lineCap",H.lineCap),ce.push("lineJoin",H.lineJoin),ce.push("miterLimit",H.miterLimit),ce.push("setLineDash",[H.lineDash]),ce.push("lineDashOffset",H.lineDashOffset)),M&&ce.push("fillStyle",it.fillStyle),ce.push("textBaseline","middle"),ce.push("textAlign","center");const At=.5-vt;let Yt=vt*de+At*Ct;const ge=[],qt=[];let Wt,gt=0,Mt=0,Zt=0,jt=0;for(let he=0,_e=bt.length;he<_e;he+=2){const Le=bt[he];if("\n"===Le){Mt+=gt,gt=0,Yt=vt*de+At*Ct,++jt;continue}const Ze=bt[he+1]||Y.font;Ze!==Wt&&(C&&ge.push("font",Ze),M&&qt.push("font",Ze),Wt=Ze),gt=Math.max(gt,zt[Zt]);const It=[Le,Yt+At*ie[Zt]+vt*(ie[Zt]-ue[jt]),.5*(Ct+gt)+Mt];Yt+=ie[Zt],C&&ge.push("strokeText",It),M&&qt.push("fillText",It),++Zt}return Array.prototype.push.apply(ce,ge),Array.prototype.push.apply(ce,qt),this.labels_[N]=Ot,Ot}replayTextBackground_(L,b,M,C,N,H,it){L.beginPath(),L.moveTo.apply(L,b),L.lineTo.apply(L,M),L.lineTo.apply(L,C),L.lineTo.apply(L,N),L.lineTo.apply(L,b),H&&(this.alignFill_=H[2],this.fill_(L)),it&&(this.setStrokeStyle_(L,it),L.stroke())}calculateImageOrLabelDimensions_(L,b,M,C,N,H,it,Y,st,ht,Tt,vt,Ct,bt,Gt,kt){let ie=M-(it*=vt[0]),zt=C-(Y*=vt[1]);const ue=N+st>L?L-st:N,de=H+ht>b?b-ht:H,ce=bt[3]+ue*vt[0]+bt[1],Se=bt[0]+de*vt[1]+bt[2],dt=ie-bt[3],Ot=zt-bt[0];let At;return(Gt||0!==Tt)&&(c[0]=dt,n[0]=dt,c[1]=Ot,s[1]=Ot,s[0]=dt+ce,f[0]=s[0],f[1]=Ot+Se,n[1]=f[1]),0!==Tt?(At=(0,k.qC)((0,k.Ue)(),M,C,1,1,Tt,-M,-C),(0,k.nn)(At,c),(0,k.nn)(At,s),(0,k.nn)(At,f),(0,k.nn)(At,n),(0,z.T9)(Math.min(c[0],s[0],f[0],n[0]),Math.min(c[1],s[1],f[1],n[1]),Math.max(c[0],s[0],f[0],n[0]),Math.max(c[1],s[1],f[1],n[1]),u)):(0,z.T9)(Math.min(dt,dt+ce),Math.min(Ot,Ot+Se),Math.max(dt,dt+ce),Math.max(Ot,Ot+Se),u),Ct&&(ie=Math.round(ie),zt=Math.round(zt)),{drawImageX:ie,drawImageY:zt,drawImageW:ue,drawImageH:de,originX:st,originY:ht,declutterBox:{minX:u[0],minY:u[1],maxX:u[2],maxY:u[3],value:kt},canvasTransform:At,scale:vt}}replayImageOrLabel_(L,b,M,C,N,H,it){const st=C.declutterBox,ht=L.canvas,Tt=it?it[2]*C.scale[0]/2:0;return st.minX-Tt<=ht.width/b&&st.maxX+Tt>=0&&st.minY-Tt<=ht.height/b&&st.maxY+Tt>=0&&(!(!H&&!it)&&this.replayTextBackground_(L,c,s,f,n,H,it),(0,U._f)(L,C.canvasTransform,N,M,C.originX,C.originY,C.drawImageW,C.drawImageH,C.drawImageX,C.drawImageY,C.scale)),!0}fill_(L){if(this.alignFill_){const b=(0,k.nn)(this.renderedTransform_,[0,0]),M=512*this.pixelRatio;L.save(),L.translate(b[0]%M,b[1]%M),L.rotate(this.viewRotation_)}L.fill(),this.alignFill_&&L.restore()}setStrokeStyle_(L,b){L.strokeStyle=b[1],L.lineWidth=b[2],L.lineCap=b[3],L.lineJoin=b[4],L.miterLimit=b[5],L.lineDashOffset=b[7],L.setLineDash(b[6])}drawLabelWithPointPlacement_(L,b,M,C){const N=this.textStates[b],H=this.createLabel(L,b,C,M),it=this.strokeStates[M],Y=this.pixelRatio,st=e(Array.isArray(L)?L[0]:L,N.textAlign||U.PH),ht=D.I[N.textBaseline||U.ru],Tt=it&&it.lineWidth?it.lineWidth:0;return{label:H,anchorX:st*(H.width/Y-2*N.scale[0])+2*(.5-st)*Tt,anchorY:ht*H.height/Y+2*(.5-ht)*Tt}}execute_(L,b,M,C,N,H,it,Y){let st;this.pixelCoordinates_&&(0,p.fS)(M,this.renderedTransform_)?st=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),st=(0,S.vT)(this.coordinates,0,this.coordinates.length,2,M,this.pixelCoordinates_),(0,k.lk)(this.renderedTransform_,M));let ht=0;const Tt=C.length;let Ct,bt,Gt,kt,ie,zt,ue,de,ce,Se,dt,Ot,vt=0,At=0,Yt=0,ge=null,qt=null;const gt=this.coordinateCache_,Mt=this.viewRotation_,Zt=Math.round(1e12*Math.atan2(-M[1],M[0]))/1e12,jt={context:L,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:Mt},Wt=this.instructions!=C||this.overlaps?0:200;let he,_e,Le,Ze;for(;ht<Tt;){const It=C[ht];switch(It[0]){case G.ZP.BEGIN_GEOMETRY:he=It[1],Ze=It[3],he.getGeometry()?void 0===it||(0,z.kK)(it,Ze.getExtent())?++ht:ht=It[2]+1:ht=It[2];break;case G.ZP.BEGIN_PATH:At>Wt&&(this.fill_(L),At=0),Yt>Wt&&(L.stroke(),Yt=0),!At&&!Yt&&(L.beginPath(),kt=NaN,ie=NaN),++ht;break;case G.ZP.CIRCLE:vt=It[1];const m=st[vt],F=st[vt+1],lt=st[vt+2]-m,_t=st[vt+3]-F,St=Math.sqrt(lt*lt+_t*_t);L.moveTo(m+St,F),L.arc(m,F,St,0,2*Math.PI,!0),++ht;break;case G.ZP.CLOSE_PATH:L.closePath(),++ht;break;case G.ZP.CUSTOM:vt=It[1],Ct=It[2];const Xt=It[4],Jt=6==It.length?It[5]:void 0;jt.geometry=It[3],jt.feature=he,ht in gt||(gt[ht]=[]);const Ee=gt[ht];Jt?Jt(st,vt,Ct,2,Ee):(Ee[0]=st[vt],Ee[1]=st[vt+1],Ee.length=2),Xt(Ee,jt),++ht;break;case G.ZP.DRAW_IMAGE:vt=It[1],Ct=It[2],de=It[3],bt=It[4],Gt=It[5];let se=It[6];const Qt=It[7],Fe=It[8],Ye=It[9],We=It[10];let Ge=It[11];const Ue=It[12];let Ve=It[13];const ii=It[14],Qe=It[15];if(!de&&It.length>=20){ce=It[19],Se=It[20],dt=It[21],Ot=It[22];const mi=this.drawLabelWithPointPlacement_(ce,Se,dt,Ot);de=mi.label,It[3]=de,bt=(mi.anchorX-It[23])*this.pixelRatio,It[4]=bt,Gt=(mi.anchorY-It[24])*this.pixelRatio,It[5]=Gt,se=de.height,It[6]=se,Ve=de.width,It[13]=Ve}let qe,q,$,mt;It.length>25&&(qe=It[25]),It.length>17?(q=It[16],$=It[17],mt=It[18]):(q=U.oB,$=!1,mt=!1),We&&Zt?Ge+=Mt:!We&&!Zt&&(Ge-=Mt);let pt=0;for(;vt<Ct;vt+=2){if(qe&&qe[pt++]<Ve/this.pixelRatio)continue;const mi=this.calculateImageOrLabelDimensions_(de.width,de.height,st[vt],st[vt+1],Ve,se,bt,Gt,Fe,Ye,Ge,Ue,N,q,$||mt,he),ui=[L,b,de,mi,Qt,$?ge:null,mt?qt:null];if(Y){if("none"===ii)continue;if("obstacle"===ii){Y.insert(mi.declutterBox);continue}{let Ei,_i;if(Qe){const si=Ct-vt;if(!Qe[si]){Qe[si]=ui;continue}if(Ei=Qe[si],delete Qe[si],_i=h(Ei),Y.collides(_i))continue}if(Y.collides(mi.declutterBox))continue;Ei&&(Y.insert(_i),this.replayImageOrLabel_.apply(this,Ei)),Y.insert(mi.declutterBox)}}this.replayImageOrLabel_.apply(this,ui)}++ht;break;case G.ZP.DRAW_CHARS:const Rt=It[1],Ht=It[2],ne=It[3],me=It[4];Ot=It[5];const Me=It[6],Re=It[7],De=It[8];dt=It[9];const je=It[10];ce=It[11],Se=It[12];const Xe=[It[13],It[13]],ni=this.textStates[Se],vi=ni.font,gi=[ni.scale[0]*Re,ni.scale[1]*Re];let yi;vi in this.widths_?yi=this.widths_[vi]:(yi={},this.widths_[vi]=yi);const Mn=(0,d.W)(st,Rt,Ht,2),bi=Math.abs(gi[0])*(0,U.Kd)(vi,ce,yi);if(me||bi<=Mn){const Ei=P(st,Rt,Ht,2,ce,(Mn-bi)*D.I[this.textStates[Se].textAlign],Me,Math.abs(gi[0]),U.Kd,vi,yi,Zt?0:this.viewRotation_);t:if(Ei){const _i=[];let si,Gi,Ci,ri,xi;if(dt)for(si=0,Gi=Ei.length;si<Gi;++si){xi=Ei[si],Ci=xi[4],ri=this.createLabel(Ci,Se,"",dt),bt=xi[2]+(gi[0]<0?-je:je),Gt=ne*ri.height+2*(.5-ne)*je*gi[1]/gi[0]-De;const Ri=this.calculateImageOrLabelDimensions_(ri.width,ri.height,xi[0],xi[1],ri.width,ri.height,bt,Gt,0,0,xi[3],Xe,!1,U.oB,!1,he);if(Y&&Y.collides(Ri.declutterBox))break t;_i.push([L,b,ri,Ri,1,null,null])}if(Ot)for(si=0,Gi=Ei.length;si<Gi;++si){xi=Ei[si],Ci=xi[4],ri=this.createLabel(Ci,Se,Ot,""),bt=xi[2],Gt=ne*ri.height-De;const Ri=this.calculateImageOrLabelDimensions_(ri.width,ri.height,xi[0],xi[1],ri.width,ri.height,bt,Gt,0,0,xi[3],Xe,!1,U.oB,!1,he);if(Y&&Y.collides(Ri.declutterBox))break t;_i.push([L,b,ri,Ri,1,null,null])}Y&&Y.load(_i.map(h));for(let Ri=0,Vi=_i.length;Ri<Vi;++Ri)this.replayImageOrLabel_.apply(this,_i[Ri])}}++ht;break;case G.ZP.END_GEOMETRY:if(void 0!==H){he=It[1];const mi=H(he,Ze);if(mi)return mi}++ht;break;case G.ZP.FILL:Wt?At++:this.fill_(L),++ht;break;case G.ZP.MOVE_TO_LINE_TO:for(vt=It[1],Ct=It[2],_e=st[vt],Le=st[vt+1],zt=_e+.5|0,ue=Le+.5|0,(zt!==kt||ue!==ie)&&(L.moveTo(_e,Le),kt=zt,ie=ue),vt+=2;vt<Ct;vt+=2)_e=st[vt],Le=st[vt+1],zt=_e+.5|0,ue=Le+.5|0,(vt==Ct-2||zt!==kt||ue!==ie)&&(L.lineTo(_e,Le),kt=zt,ie=ue);++ht;break;case G.ZP.SET_FILL_STYLE:ge=It,this.alignFill_=It[2],At&&(this.fill_(L),At=0,Yt&&(L.stroke(),Yt=0)),L.fillStyle=It[1],++ht;break;case G.ZP.SET_STROKE_STYLE:qt=It,Yt&&(L.stroke(),Yt=0),this.setStrokeStyle_(L,It),++ht;break;case G.ZP.STROKE:Wt?Yt++:L.stroke(),++ht;break;default:++ht}}At&&this.fill_(L),Yt&&L.stroke()}execute(L,b,M,C,N,H){this.viewRotation_=C,this.execute_(L,b,M,this.instructions,N,void 0,void 0,H)}executeHitDetection(L,b,M,C,N){return this.viewRotation_=M,this.execute_(L,1,b,this.hitDetectionInstructions,!0,C,N)}};var w=a(3842),O=a(9306);const y=["Polygon","Circle","LineString","Image","Text","Default"],W={},nt=class R{constructor(L,b,M,C,N,H){this.maxExtent_=L,this.overlaps_=C,this.pixelRatio_=M,this.resolution_=b,this.renderBuffer_=H,this.executorsByZIndex_={},this.hitDetectionContext_=null,this.hitDetectionTransform_=(0,k.Ue)(),this.createExecutors_(N)}clip(L,b){const M=this.getClipCoords(b);L.beginPath(),L.moveTo(M[0],M[1]),L.lineTo(M[2],M[3]),L.lineTo(M[4],M[5]),L.lineTo(M[6],M[7]),L.clip()}createExecutors_(L){for(const b in L){let M=this.executorsByZIndex_[b];void 0===M&&(M={},this.executorsByZIndex_[b]=M);const C=L[b];for(const N in C)M[N]=new x(this.resolution_,this.pixelRatio_,this.overlaps_,C[N])}}hasExecutors(L){for(const b in this.executorsByZIndex_){const M=this.executorsByZIndex_[b];for(let C=0,N=L.length;C<N;++C)if(L[C]in M)return!0}return!1}forEachFeatureAtCoordinate(L,b,M,C,N,H){const it=2*(C=Math.round(C))+1,Y=(0,k.qC)(this.hitDetectionTransform_,C+.5,C+.5,1/b,-1/b,-M,-L[0],-L[1]),st=!this.hitDetectionContext_;st&&(this.hitDetectionContext_=(0,w.E4)(it,it,void 0,{willReadFrequently:!0}));const ht=this.hitDetectionContext_;let Tt;ht.canvas.width!==it||ht.canvas.height!==it?(ht.canvas.width=it,ht.canvas.height=it):st||ht.clearRect(0,0,it,it),void 0!==this.renderBuffer_&&(Tt=(0,z.lJ)(),(0,z.Wj)(Tt,L),(0,z.f3)(Tt,b*(this.renderBuffer_+C),Tt));const vt=function K(A){if(void 0!==W[A])return W[A];const L=2*A+1,b=A*A,M=new Array(b+1);for(let N=0;N<=A;++N)for(let H=0;H<=A;++H){const it=N*N+H*H;if(it>b)break;let Y=M[it];Y||(Y=[],M[it]=Y),Y.push(4*((A+N)*L+(A+H))+3),N>0&&Y.push(4*((A-N)*L+(A+H))+3),H>0&&(Y.push(4*((A+N)*L+(A-H))+3),N>0&&Y.push(4*((A-N)*L+(A-H))+3))}const C=[];for(let N=0,H=M.length;N<H;++N)M[N]&&C.push(...M[N]);return W[A]=C,C}(C);let Ct;function bt(ce,Se){const dt=ht.getImageData(0,0,it,it).data;for(let Ot=0,At=vt.length;Ot<At;Ot++)if(dt[vt[Ot]]>0){if(!H||"Image"!==Ct&&"Text"!==Ct||H.includes(ce)){const Yt=(vt[Ot]-3)/4,ge=C-Yt%it,qt=C-(Yt/it|0),gt=N(ce,Se,ge*ge+qt*qt);if(gt)return gt}ht.clearRect(0,0,it,it);break}}const Gt=Object.keys(this.executorsByZIndex_).map(Number);let kt,ie,zt,ue,de;for(Gt.sort(p.j2),kt=Gt.length-1;kt>=0;--kt){const ce=Gt[kt].toString();for(zt=this.executorsByZIndex_[ce],ie=y.length-1;ie>=0;--ie)if(Ct=y[ie],ue=zt[Ct],void 0!==ue&&(de=ue.executeHitDetection(ht,Y,M,bt,Tt),de))return de}}getClipCoords(L){const b=this.maxExtent_;if(!b)return null;const M=b[0],C=b[1],N=b[2],H=b[3],it=[M,C,M,H,N,H,N,C];return(0,S.vT)(it,0,8,2,L,it),it}isEmpty(){return(0,O.x)(this.executorsByZIndex_)}execute(L,b,M,C,N,H,it){const Y=Object.keys(this.executorsByZIndex_).map(Number);let st,ht,Tt,vt,Ct,bt;for(Y.sort(p.j2),this.maxExtent_&&(L.save(),this.clip(L,M)),H=H||y,it&&Y.reverse(),st=0,ht=Y.length;st<ht;++st){const Gt=Y[st].toString();for(Ct=this.executorsByZIndex_[Gt],Tt=0,vt=H.length;Tt<vt;++Tt)bt=Ct[H[Tt]],void 0!==bt&&bt.execute(L,b,M,C,N,it)}this.maxExtent_&&L.restore()}}},3455:(Bt,ot,a)=>{"use strict";a.d(ot,{Z:()=>u});var G=a(8110),D=a(4890),k=a(7139),z=a(2768),U=a(142),I=a(9543),S=a(4331),P=a(3904),p=a(1790);const u=class d extends G.Z{constructor(s,f,n,h,g,e,E){super(),this.context_=s,this.pixelRatio_=f,this.extent_=n,this.transform_=h,this.transformRotation_=h?(0,S.FH)(Math.atan2(h[1],h[0]),10):0,this.viewRotation_=g,this.squaredTolerance_=e,this.userTransform_=E,this.contextFillState_=null,this.contextStrokeState_=null,this.contextTextState_=null,this.fillState_=null,this.strokeState_=null,this.image_=null,this.imageAnchorX_=0,this.imageAnchorY_=0,this.imageHeight_=0,this.imageOpacity_=0,this.imageOriginX_=0,this.imageOriginY_=0,this.imageRotateWithView_=!1,this.imageRotation_=0,this.imageScale_=[0,0],this.imageWidth_=0,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=!1,this.textRotation_=0,this.textScale_=[0,0],this.textFillState_=null,this.textStrokeState_=null,this.textState_=null,this.pixelCoordinates_=[],this.tmpLocalTransform_=(0,k.Ue)()}drawImages_(s,f,n,h){if(!this.image_)return;const g=(0,P.vT)(s,f,n,h,this.transform_,this.pixelCoordinates_),e=this.context_,E=this.tmpLocalTransform_,v=e.globalAlpha;1!=this.imageOpacity_&&(e.globalAlpha=v*this.imageOpacity_);let x=this.imageRotation_;0===this.transformRotation_&&(x-=this.viewRotation_),this.imageRotateWithView_&&(x+=this.viewRotation_);for(let w=0,O=g.length;w<O;w+=2){const y=g[w]-this.imageAnchorX_,R=g[w+1]-this.imageAnchorY_;if(0!==x||1!=this.imageScale_[0]||1!=this.imageScale_[1]){const W=y+this.imageAnchorX_,K=R+this.imageAnchorY_;(0,k.qC)(E,W,K,1,1,x,-W,-K),e.setTransform.apply(e,E),e.translate(W,K),e.scale(this.imageScale_[0],this.imageScale_[1]),e.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,-this.imageAnchorX_,-this.imageAnchorY_,this.imageWidth_,this.imageHeight_),e.setTransform(1,0,0,1,0,0)}else e.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,y,R,this.imageWidth_,this.imageHeight_)}1!=this.imageOpacity_&&(e.globalAlpha=v)}drawText_(s,f,n,h){if(!this.textState_||""===this.text_)return;this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);const g=(0,P.vT)(s,f,n,h,this.transform_,this.pixelCoordinates_),e=this.context_;let E=this.textRotation_;for(0===this.transformRotation_&&(E-=this.viewRotation_),this.textRotateWithView_&&(E+=this.viewRotation_);f<n;f+=h){const v=g[f]+this.textOffsetX_,x=g[f+1]+this.textOffsetY_;0!==E||1!=this.textScale_[0]||1!=this.textScale_[1]?(e.translate(v-this.textOffsetX_,x-this.textOffsetY_),e.rotate(E),e.translate(this.textOffsetX_,this.textOffsetY_),e.scale(this.textScale_[0],this.textScale_[1]),this.textStrokeState_&&e.strokeText(this.text_,0,0),this.textFillState_&&e.fillText(this.text_,0,0),e.setTransform(1,0,0,1,0,0)):(this.textStrokeState_&&e.strokeText(this.text_,v,x),this.textFillState_&&e.fillText(this.text_,v,x))}}moveToLineTo_(s,f,n,h,g){const e=this.context_,E=(0,P.vT)(s,f,n,h,this.transform_,this.pixelCoordinates_);e.moveTo(E[0],E[1]);let v=E.length;g&&(v-=2);for(let x=2;x<v;x+=2)e.lineTo(E[x],E[x+1]);return g&&e.closePath(),n}drawRings_(s,f,n,h){for(let g=0,e=n.length;g<e;++g)f=this.moveToLineTo_(s,f,n[g],h,!0);return f}drawCircle(s){if((0,I.kK)(this.extent_,s.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const f=(0,p.Kr)(s,this.transform_,this.pixelCoordinates_),n=f[2]-f[0],h=f[3]-f[1],g=Math.sqrt(n*n+h*h),e=this.context_;e.beginPath(),e.arc(f[0],f[1],g,0,2*Math.PI),this.fillState_&&e.fill(),this.strokeState_&&e.stroke()}""!==this.text_&&this.drawText_(s.getCenter(),0,2,2)}}setStyle(s){this.setFillStrokeStyle(s.getFill(),s.getStroke()),this.setImageStyle(s.getImage()),this.setTextStyle(s.getText())}setTransform(s){this.transform_=s}drawGeometry(s){switch(s.getType()){case"Point":this.drawPoint(s);break;case"LineString":this.drawLineString(s);break;case"Polygon":this.drawPolygon(s);break;case"MultiPoint":this.drawMultiPoint(s);break;case"MultiLineString":this.drawMultiLineString(s);break;case"MultiPolygon":this.drawMultiPolygon(s);break;case"GeometryCollection":this.drawGeometryCollection(s);break;case"Circle":this.drawCircle(s)}}drawFeature(s,f){const n=f.getGeometryFunction()(s);!n||!(0,I.kK)(this.extent_,n.getExtent())||(this.setStyle(f),this.drawGeometry(n))}drawGeometryCollection(s){const f=s.getGeometriesArray();for(let n=0,h=f.length;n<h;++n)this.drawGeometry(f[n])}drawPoint(s){this.squaredTolerance_&&(s=s.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const f=s.getFlatCoordinates(),n=s.getStride();this.image_&&this.drawImages_(f,0,f.length,n),""!==this.text_&&this.drawText_(f,0,f.length,n)}drawMultiPoint(s){this.squaredTolerance_&&(s=s.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const f=s.getFlatCoordinates(),n=s.getStride();this.image_&&this.drawImages_(f,0,f.length,n),""!==this.text_&&this.drawText_(f,0,f.length,n)}drawLineString(s){if(this.squaredTolerance_&&(s=s.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),(0,I.kK)(this.extent_,s.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const f=this.context_,n=s.getFlatCoordinates();f.beginPath(),this.moveToLineTo_(n,0,n.length,s.getStride(),!1),f.stroke()}if(""!==this.text_){const f=s.getFlatMidpoint();this.drawText_(f,0,2,2)}}}drawMultiLineString(s){this.squaredTolerance_&&(s=s.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const f=s.getExtent();if((0,I.kK)(this.extent_,f)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const n=this.context_,h=s.getFlatCoordinates();let g=0;const e=s.getEnds(),E=s.getStride();n.beginPath();for(let v=0,x=e.length;v<x;++v)g=this.moveToLineTo_(h,g,e[v],E,!1);n.stroke()}if(""!==this.text_){const n=s.getFlatMidpoints();this.drawText_(n,0,n.length,2)}}}drawPolygon(s){if(this.squaredTolerance_&&(s=s.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),(0,I.kK)(this.extent_,s.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const f=this.context_;f.beginPath(),this.drawRings_(s.getOrientedFlatCoordinates(),0,s.getEnds(),s.getStride()),this.fillState_&&f.fill(),this.strokeState_&&f.stroke()}if(""!==this.text_){const f=s.getFlatInteriorPoint();this.drawText_(f,0,2,2)}}}drawMultiPolygon(s){if(this.squaredTolerance_&&(s=s.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),(0,I.kK)(this.extent_,s.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const f=this.context_,n=s.getOrientedFlatCoordinates();let h=0;const g=s.getEndss(),e=s.getStride();f.beginPath();for(let E=0,v=g.length;E<v;++E)h=this.drawRings_(n,h,g[E],e);this.fillState_&&f.fill(),this.strokeState_&&f.stroke()}if(""!==this.text_){const f=s.getFlatInteriorPoints();this.drawText_(f,0,f.length,2)}}}setContextFillState_(s){const f=this.context_,n=this.contextFillState_;n?n.fillStyle!=s.fillStyle&&(n.fillStyle=s.fillStyle,f.fillStyle=s.fillStyle):(f.fillStyle=s.fillStyle,this.contextFillState_={fillStyle:s.fillStyle})}setContextStrokeState_(s){const f=this.context_,n=this.contextStrokeState_;n?(n.lineCap!=s.lineCap&&(n.lineCap=s.lineCap,f.lineCap=s.lineCap),(0,U.fS)(n.lineDash,s.lineDash)||f.setLineDash(n.lineDash=s.lineDash),n.lineDashOffset!=s.lineDashOffset&&(n.lineDashOffset=s.lineDashOffset,f.lineDashOffset=s.lineDashOffset),n.lineJoin!=s.lineJoin&&(n.lineJoin=s.lineJoin,f.lineJoin=s.lineJoin),n.lineWidth!=s.lineWidth&&(n.lineWidth=s.lineWidth,f.lineWidth=s.lineWidth),n.miterLimit!=s.miterLimit&&(n.miterLimit=s.miterLimit,f.miterLimit=s.miterLimit),n.strokeStyle!=s.strokeStyle&&(n.strokeStyle=s.strokeStyle,f.strokeStyle=s.strokeStyle)):(f.lineCap=s.lineCap,f.setLineDash(s.lineDash),f.lineDashOffset=s.lineDashOffset,f.lineJoin=s.lineJoin,f.lineWidth=s.lineWidth,f.miterLimit=s.miterLimit,f.strokeStyle=s.strokeStyle,this.contextStrokeState_={lineCap:s.lineCap,lineDash:s.lineDash,lineDashOffset:s.lineDashOffset,lineJoin:s.lineJoin,lineWidth:s.lineWidth,miterLimit:s.miterLimit,strokeStyle:s.strokeStyle})}setContextTextState_(s){const f=this.context_,n=this.contextTextState_,h=s.textAlign?s.textAlign:z.PH;n?(n.font!=s.font&&(n.font=s.font,f.font=s.font),n.textAlign!=h&&(n.textAlign=h,f.textAlign=h),n.textBaseline!=s.textBaseline&&(n.textBaseline=s.textBaseline,f.textBaseline=s.textBaseline)):(f.font=s.font,f.textAlign=h,f.textBaseline=s.textBaseline,this.contextTextState_={font:s.font,textAlign:h,textBaseline:s.textBaseline})}setFillStrokeStyle(s,f){if(s){const n=s.getColor();this.fillState_={fillStyle:(0,D.y)(n||z.bL)}}else this.fillState_=null;if(f){const n=f.getColor(),h=f.getLineCap(),g=f.getLineDash(),e=f.getLineDashOffset(),E=f.getLineJoin(),v=f.getWidth(),x=f.getMiterLimit(),w=g||z.X9;this.strokeState_={lineCap:void 0!==h?h:z.mb,lineDash:1===this.pixelRatio_?w:w.map(O=>O*this.pixelRatio_),lineDashOffset:(e||z.He)*this.pixelRatio_,lineJoin:void 0!==E?E:z.rc,lineWidth:(void 0!==v?v:z.yC)*this.pixelRatio_,miterLimit:void 0!==x?x:z.V4,strokeStyle:(0,D.y)(n||z.Tx)}}else this.strokeState_=null}setImageStyle(s){let f;if(!s||!(f=s.getSize()))return void(this.image_=null);const n=s.getPixelRatio(this.pixelRatio_),h=s.getAnchor(),g=s.getOrigin();this.image_=s.getImage(this.pixelRatio_),this.imageAnchorX_=h[0]*n,this.imageAnchorY_=h[1]*n,this.imageHeight_=f[1]*n,this.imageOpacity_=s.getOpacity(),this.imageOriginX_=g[0],this.imageOriginY_=g[1],this.imageRotateWithView_=s.getRotateWithView(),this.imageRotation_=s.getRotation();const e=s.getScaleArray();this.imageScale_=[e[0]*this.pixelRatio_/n,e[1]*this.pixelRatio_/n],this.imageWidth_=f[0]*n}setTextStyle(s){if(s){const f=s.getFill();if(f){const R=f.getColor();this.textFillState_={fillStyle:(0,D.y)(R||z.bL)}}else this.textFillState_=null;const n=s.getStroke();if(n){const R=n.getColor(),W=n.getLineCap(),K=n.getLineDash(),nt=n.getLineDashOffset(),A=n.getLineJoin(),L=n.getWidth(),b=n.getMiterLimit();this.textStrokeState_={lineCap:void 0!==W?W:z.mb,lineDash:K||z.X9,lineDashOffset:nt||z.He,lineJoin:void 0!==A?A:z.rc,lineWidth:void 0!==L?L:z.yC,miterLimit:void 0!==b?b:z.V4,strokeStyle:(0,D.y)(R||z.Tx)}}else this.textStrokeState_=null;const h=s.getFont(),g=s.getOffsetX(),e=s.getOffsetY(),E=s.getRotateWithView(),v=s.getRotation(),x=s.getScaleArray(),w=s.getText(),O=s.getTextAlign(),y=s.getTextBaseline();this.textState_={font:void 0!==h?h:z.Df,textAlign:void 0!==O?O:z.PH,textBaseline:void 0!==y?y:z.ru},this.text_=void 0!==w?Array.isArray(w)?w.reduce((R,W,K)=>R+(K%2?" ":W),""):w:"",this.textOffsetX_=void 0!==g?this.pixelRatio_*g:0,this.textOffsetY_=void 0!==e?this.pixelRatio_*e:0,this.textRotateWithView_=void 0!==E&&E,this.textRotation_=void 0!==v?v:0,this.textScale_=[this.pixelRatio_*x[0],this.pixelRatio_*x[1]]}else this.text_=""}}},3430:(Bt,ot,a)=>{"use strict";a.d(ot,{$O:()=>z,Yc:()=>k,ZP:()=>I,gO:()=>D,s3:()=>U});const G={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},D=[G.FILL],k=[G.STROKE],z=[G.BEGIN_PATH],U=[G.CLOSE_PATH],I=G},8840:(Bt,ot,a)=>{"use strict";a.d(ot,{I:()=>d,Z:()=>c});var G=a(1211),D=a(3430),k=a(4890),z=a(2768),U=a(513),I=a(9543),S=a(4331);function P(s,f,n,h,g){const e=[];let E=n,v=0,x=f.slice(n,2);for(;v<s&&E+g<h;){const[w,O]=x.slice(-2),y=f[E+g],R=f[E+g+1],W=Math.sqrt((y-w)*(y-w)+(R-O)*(R-O));if(v+=W,v>=s){const K=(s-v+W)/W,nt=(0,S.t7)(w,y,K),A=(0,S.t7)(O,R,K);x.push(nt,A),e.push(x),x=[nt,A],v==s&&(E+=g),v=0}else if(v<s)x.push(f[E+g],f[E+g+1]),E+=g;else{const K=W-v,nt=(0,S.t7)(w,y,K/W),A=(0,S.t7)(O,R,K/W);x.push(nt,A),e.push(x),x=[nt,A],v=0,E+=g}}return v>0&&e.push(x),e}function p(s,f,n,h,g){let O,y,R,W,K,nt,A,L,b,M,e=n,E=n,v=0,x=0,w=n;for(y=n;y<h;y+=g){const C=f[y],N=f[y+1];void 0!==K&&(b=C-K,M=N-nt,W=Math.sqrt(b*b+M*M),void 0!==A&&(x+=R,O=Math.acos((A*b+L*M)/(R*W)),O>s&&(x>v&&(v=x,e=w,E=y),x=0,w=y-g)),R=W,A=b,L=M),K=C,nt=N}return x+=W,x>v?[w,y]:[e,E]}const d={left:0,end:0,center:.5,right:1,start:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1},c=class u extends G.Z{constructor(f,n,h,g){super(f,n,h,g),this.labels_=null,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=void 0,this.textRotation_=0,this.textFillState_=null,this.fillStates={},this.textStrokeState_=null,this.strokeStates={},this.textState_={},this.textStates={},this.textKey_="",this.fillKey_="",this.strokeKey_="",this.declutterImageWithText_=void 0}finish(){const f=super.finish();return f.textStates=this.textStates,f.fillStates=this.fillStates,f.strokeStates=this.strokeStates,f}drawText(f,n){const e=this.textState_;if(""===this.text_||!e||!this.textFillState_&&!this.textStrokeState_)return;const E=this.coordinates;let v=E.length;const x=f.getType();let w=null,O=f.getStride();if("line"!==e.placement||"LineString"!=x&&"MultiLineString"!=x&&"Polygon"!=x&&"MultiPolygon"!=x){let y=e.overflow?null:[];switch(x){case"Point":case"MultiPoint":w=f.getFlatCoordinates();break;case"LineString":w=f.getFlatMidpoint();break;case"Circle":w=f.getCenter();break;case"MultiLineString":w=f.getFlatMidpoints(),O=2;break;case"Polygon":w=f.getFlatInteriorPoint(),e.overflow||y.push(w[2]/this.resolution),O=3;break;case"MultiPolygon":const A=f.getFlatInteriorPoints();w=[];for(let L=0,b=A.length;L<b;L+=3)e.overflow||y.push(A[L+2]/this.resolution),w.push(A[L],A[L+1]);if(0===w.length)return;O=2}const R=this.appendFlatPointCoordinates(w,O);if(R===v)return;if(y&&(R-v)/2!=w.length/O){let A=v/2;y=y.filter((L,b)=>{const M=E[2*(A+b)]===w[b*O]&&E[2*(A+b)+1]===w[b*O+1];return M||--A,M})}this.saveTextStates_(),(e.backgroundFill||e.backgroundStroke)&&(this.setFillStrokeStyle(e.backgroundFill,e.backgroundStroke),e.backgroundFill&&(this.updateFillStyle(this.state,this.createFill),this.hitDetectionInstructions.push(this.createFill(this.state))),e.backgroundStroke&&(this.updateStrokeStyle(this.state,this.applyStroke),this.hitDetectionInstructions.push(this.createStroke(this.state)))),this.beginGeometry(f,n);let W=e.padding;if(W!=z.oB&&(e.scale[0]<0||e.scale[1]<0)){let A=e.padding[0],L=e.padding[1],b=e.padding[2],M=e.padding[3];e.scale[0]<0&&(L=-L,M=-M),e.scale[1]<0&&(A=-A,b=-b),W=[A,L,b,M]}const K=this.pixelRatio;this.instructions.push([D.ZP.DRAW_IMAGE,v,R,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[1,1],NaN,void 0,this.declutterImageWithText_,W==z.oB?z.oB:W.map(function(A){return A*K}),!!e.backgroundFill,!!e.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,y]);const nt=1/K;this.hitDetectionInstructions.push([D.ZP.DRAW_IMAGE,v,R,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[nt,nt],NaN,void 0,this.declutterImageWithText_,W,!!e.backgroundFill,!!e.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,y]),this.endGeometry(n)}else{if(!(0,I.kK)(this.getBufferedMaxExtent(),f.getExtent()))return;let y;if(w=f.getFlatCoordinates(),"LineString"==x)y=[w.length];else if("MultiLineString"==x)y=f.getEnds();else if("Polygon"==x)y=f.getEnds().slice(0,1);else if("MultiPolygon"==x){const nt=f.getEndss();y=[];for(let A=0,L=nt.length;A<L;++A)y.push(nt[A][0])}this.beginGeometry(f,n);const R=e.repeat,W=R?void 0:e.textAlign;let K=0;for(let nt=0,A=y.length;nt<A;++nt){let L;L=R?P(R*this.resolution,w,K,y[nt],O):[w.slice(K,y[nt])];for(let b=0,M=L.length;b<M;++b){const C=L[b];let N=0,H=C.length;if(null==W){const Y=p(e.maxAngle,C,0,C.length,2);N=Y[0],H=Y[1]}for(let Y=N;Y<H;Y+=O)E.push(C[Y],C[Y+1]);const it=E.length;K=y[nt],this.drawChars_(v,it),v=it}}this.endGeometry(n)}}saveTextStates_(){const f=this.textStrokeState_,n=this.textState_,h=this.textFillState_,g=this.strokeKey_;f&&(g in this.strokeStates||(this.strokeStates[g]={strokeStyle:f.strokeStyle,lineCap:f.lineCap,lineDashOffset:f.lineDashOffset,lineWidth:f.lineWidth,lineJoin:f.lineJoin,miterLimit:f.miterLimit,lineDash:f.lineDash}));const e=this.textKey_;e in this.textStates||(this.textStates[e]={font:n.font,textAlign:n.textAlign||z.PH,justify:n.justify,textBaseline:n.textBaseline||z.ru,scale:n.scale});const E=this.fillKey_;h&&(E in this.fillStates||(this.fillStates[E]={fillStyle:h.fillStyle}))}drawChars_(f,n){const h=this.textStrokeState_,g=this.textState_,e=this.strokeKey_,E=this.textKey_,v=this.fillKey_;this.saveTextStates_();const x=this.pixelRatio,w=d[g.textBaseline],O=this.textOffsetY_*x,y=this.text_,R=h?h.lineWidth*Math.abs(g.scale[0])/2:0;this.instructions.push([D.ZP.DRAW_CHARS,f,n,w,g.overflow,v,g.maxAngle,x,O,e,R*x,y,E,1]),this.hitDetectionInstructions.push([D.ZP.DRAW_CHARS,f,n,w,g.overflow,v,g.maxAngle,1,O,e,R,y,E,1/x])}setTextStyle(f,n){let h,g,e;if(f){const E=f.getFill();E?(g=this.textFillState_,g||(g={},this.textFillState_=g),g.fillStyle=(0,k.y)(E.getColor()||z.bL)):(g=null,this.textFillState_=g);const v=f.getStroke();if(v){e=this.textStrokeState_,e||(e={},this.textStrokeState_=e);const K=v.getLineDash(),nt=v.getLineDashOffset(),A=v.getWidth(),L=v.getMiterLimit();e.lineCap=v.getLineCap()||z.mb,e.lineDash=K?K.slice():z.X9,e.lineDashOffset=void 0===nt?z.He:nt,e.lineJoin=v.getLineJoin()||z.rc,e.lineWidth=void 0===A?z.yC:A,e.miterLimit=void 0===L?z.V4:L,e.strokeStyle=(0,k.y)(v.getColor()||z.Tx)}else e=null,this.textStrokeState_=e;h=this.textState_;const x=f.getFont()||z.Df;(0,z.Qx)(x);const w=f.getScaleArray();h.overflow=f.getOverflow(),h.font=x,h.maxAngle=f.getMaxAngle(),h.placement=f.getPlacement(),h.textAlign=f.getTextAlign(),h.repeat=f.getRepeat(),h.justify=f.getJustify(),h.textBaseline=f.getTextBaseline()||z.ru,h.backgroundFill=f.getBackgroundFill(),h.backgroundStroke=f.getBackgroundStroke(),h.padding=f.getPadding()||z.oB,h.scale=void 0===w?[1,1]:w;const O=f.getOffsetX(),y=f.getOffsetY(),R=f.getRotateWithView(),W=f.getRotation();this.text_=f.getText()||"",this.textOffsetX_=void 0===O?0:O,this.textOffsetY_=void 0===y?0:y,this.textRotateWithView_=void 0!==R&&R,this.textRotation_=void 0===W?0:W,this.strokeKey_=e?("string"==typeof e.strokeStyle?e.strokeStyle:(0,U.sq)(e.strokeStyle))+e.lineCap+e.lineDashOffset+"|"+e.lineWidth+e.lineJoin+e.miterLimit+"["+e.lineDash.join()+"]":"",this.textKey_=h.font+h.scale+(h.textAlign||"?")+(h.repeat||"?")+(h.justify||"?")+(h.textBaseline||"?"),this.fillKey_=g?"string"==typeof g.fillStyle?g.fillStyle:"|"+(0,U.sq)(g.fillStyle):""}else this.text_="";this.declutterImageWithText_=n}}},7713:(Bt,ot,a)=>{"use strict";a.d(ot,{TU:()=>P,UN:()=>S,ix:()=>p});var G=a(3455),D=a(5999),k=a(142),z=a(4331),U=a(3842),I=a(9543);const S=.5;function P(d,u,c,s,f,n,h){const E=(0,U.E4)(d[0]*S,d[1]*S);E.imageSmoothingEnabled=!1;const v=E.canvas,x=new G.Z(E,S,f,null,h),w=c.length,O=Math.floor(16777215/w),y={};for(let W=1;W<=w;++W){const K=c[W-1],nt=K.getStyleFunction()||s;if(!s)continue;let A=nt(K,n);if(!A)continue;Array.isArray(A)||(A=[A]);const b=(W*O).toString(16).padStart(7,"#00000");for(let M=0,C=A.length;M<C;++M){const N=A[M],H=N.getGeometryFunction()(K);if(!H||!(0,I.kK)(f,H.getExtent()))continue;const it=N.clone(),Y=it.getFill();Y&&Y.setColor(b);const st=it.getStroke();st&&(st.setColor(b),st.setLineDash(null)),it.setText(void 0);const ht=N.getImage();if(ht&&0!==ht.getOpacity()){const bt=ht.getImageSize();if(!bt)continue;const Gt=(0,U.E4)(bt[0],bt[1],void 0,{alpha:!1}),kt=Gt.canvas;Gt.fillStyle=b,Gt.fillRect(0,0,kt.width,kt.height),it.setImage(new D.Z({img:kt,imgSize:bt,anchor:ht.getAnchor(),anchorXUnits:"pixels",anchorYUnits:"pixels",offset:ht.getOrigin(),opacity:1,size:ht.getSize(),scale:ht.getScale(),rotation:ht.getRotation(),rotateWithView:ht.getRotateWithView()}))}const Tt=it.getZIndex()||0;let vt=y[Tt];vt||(vt={},y[Tt]=vt,vt.Polygon=[],vt.Circle=[],vt.LineString=[],vt.Point=[]);const Ct=H.getType();if("GeometryCollection"===Ct){const bt=H.getGeometriesArrayRecursive();for(let Gt=0,kt=bt.length;Gt<kt;++Gt){const ie=bt[Gt];vt[ie.getType().replace("Multi","")].push(ie,it)}}else vt[Ct.replace("Multi","")].push(H,it)}}const R=Object.keys(y).map(Number).sort(k.j2);for(let W=0,K=R.length;W<K;++W){const nt=y[R[W]];for(const A in nt){const L=nt[A];for(let b=0,M=L.length;b<M;b+=2){x.setStyle(L[b+1]);for(let C=0,N=u.length;C<N;++C)x.setTransform(u[C]),x.drawGeometry(L[b])}}}return E.getImageData(0,0,v.width,v.height)}function p(d,u,c){const s=[];if(c){const f=Math.floor(Math.round(d[0])*S),n=Math.floor(Math.round(d[1])*S),h=4*((0,z.uZ)(f,0,c.width-1)+(0,z.uZ)(n,0,c.height-1)*c.width),v=c.data[h+2]+256*(c.data[h+1]+256*c.data[h]),x=Math.floor(16777215/u.length);v&&v%x==0&&s.push(u[v/x-1])}return s}},6555:(Bt,ot,a)=>{"use strict";a.d(ot,{Z:()=>I});var G=a(3044),D=a(1501),k=a(8975),z=a(513);const I=class U extends k.Z{constructor(P){super(),this.ready=!0,this.boundHandleImageChange_=this.handleImageChange_.bind(this),this.layer_=P,this.declutterExecutorGroup=null}getFeatures(P){return(0,z.O3)()}getData(P){return null}prepareFrame(P){return(0,z.O3)()}renderFrame(P,p){return(0,z.O3)()}loadedTileCallback(P,p,d){P[p]||(P[p]={}),P[p][d.tileCoord.toString()]=d}createLoadedTileFinder(P,p,d){return(u,c)=>{const s=this.loadedTileCallback.bind(this,d,u);return P.forEachLoadedTile(p,u,c,s)}}forEachFeatureAtCoordinate(P,p,d,u,c){}getLayer(){return this.layer_}handleFontsChanged(){}handleImageChange_(P){P.target.getState()===D.Z.LOADED&&this.renderIfReadyAndVisible()}loadImage(P){let p=P.getState();return p!=D.Z.LOADED&&p!=D.Z.ERROR&&P.addEventListener(G.Z.CHANGE,this.boundHandleImageChange_),p==D.Z.IDLE&&(P.load(),p=P.getState()),p==D.Z.LOADED}renderIfReadyAndVisible(){const P=this.getLayer();P&&P.getVisible()&&"ready"===P.getSourceState()&&P.changed()}disposeInternal(){delete this.layer_,super.disposeInternal()}}},8915:(Bt,ot,a)=>{"use strict";a.d(ot,{Z:()=>P});var G=a(6691),D=a(1501),k=a(9500),z=a(7139),U=a(9543),I=a(9015);const P=class S extends G.Z{constructor(d){super(d),this.image_=null}getImage(){return this.image_?this.image_.getImage():null}prepareFrame(d){const u=d.layerStatesArray[d.layerIndex],c=d.pixelRatio,s=d.viewState,f=s.resolution,n=this.getLayer().getSource(),h=d.viewHints;let g=d.extent;if(void 0!==u.extent&&(g=(0,U.Ed)(g,(0,I.dY)(u.extent,s.projection))),!h[k.Z.ANIMATING]&&!h[k.Z.INTERACTING]&&!(0,U.xb)(g))if(n){const E=n.getImage(g,f,c,s.projection);E&&(this.loadImage(E)?this.image_=E:E.getState()===D.Z.EMPTY&&(this.image_=null))}else this.image_=null;return!!this.image_}getData(d){const u=this.frameState;if(!u)return null;const c=this.getLayer(),s=(0,z.nn)(u.pixelToCoordinateTransform,d.slice()),f=c.getExtent();if(f&&!(0,U.b8)(f,s))return null;const n=this.image_.getExtent(),h=this.getImage(),g=(0,U.dz)(n),e=Math.floor(h.width*((s[0]-n[0])/g));if(e<0||e>=h.width)return null;const E=(0,U.Cr)(n),v=Math.floor(h.height*((n[3]-s[1])/E));return v<0||v>=h.height?null:this.getImageData(h,e,v)}renderFrame(d,u){const c=this.image_,s=c.getExtent(),f=c.getResolution(),n=c.getPixelRatio(),h=d.layerStatesArray[d.layerIndex],g=d.pixelRatio,e=d.viewState,E=e.center,x=g*f/(e.resolution*n),w=d.extent,O=e.resolution,y=e.rotation,R=Math.round((0,U.dz)(w)/O*g),W=Math.round((0,U.Cr)(w)/O*g);(0,z.qC)(this.pixelTransform,d.size[0]/2,d.size[1]/2,1/g,1/g,y,-R/2,-W/2),(0,z.nb)(this.inversePixelTransform,this.pixelTransform);const K=(0,z.BB)(this.pixelTransform);this.useContainer(u,K,this.getBackground(d));const nt=this.context,A=nt.canvas;A.width!=R||A.height!=W?(A.width=R,A.height=W):this.containerReused||nt.clearRect(0,0,R,W);let L=!1,b=!0;if(h.extent){const it=(0,I.dY)(h.extent,e.projection);b=(0,U.kK)(it,d.extent),L=b&&!(0,U.r4)(it,d.extent),L&&this.clipUnrotated(nt,d,it)}const M=this.getImage(),C=(0,z.qC)(this.tempTransform,R/2,W/2,x,x,0,n*(s[0]-E[0])/f,n*(E[1]-s[3])/f);this.renderedResolution=f*g/n;const N=M.width*C[0],H=M.height*C[3];if(this.getLayer().getSource().getInterpolate()||(nt.imageSmoothingEnabled=!1),this.preRender(nt,d),b&&N>=.5&&H>=.5){const it=C[4],Y=C[5],st=h.opacity;let ht;1!==st&&(ht=nt.globalAlpha,nt.globalAlpha=st),nt.drawImage(M,0,0,+M.width,+M.height,it,Y,N,H),1!==st&&(nt.globalAlpha=ht)}return this.postRender(nt,d),L&&nt.restore(),nt.imageSmoothingEnabled=!0,K!==A.style.transform&&(A.style.transform=K),this.container}}},6691:(Bt,ot,a)=>{"use strict";a.d(ot,{Z:()=>s,r:()=>p});var G=a(6555),D=a(9683),k=a(8779),z=a(7139),U=a(866),I=a(3842),S=a(142),P=a(9543);const p=[];let d=null;const s=class c extends G.Z{constructor(n){super(n),this.container=null,this.tempTransform=(0,z.Ue)(),this.pixelTransform=(0,z.Ue)(),this.inversePixelTransform=(0,z.Ue)(),this.context=null,this.containerReused=!1,this.pixelContext_=null,this.frameState=null}getImageData(n,h,g){let e;d||function u(){d=(0,I.E4)(1,1,void 0,{willReadFrequently:!0})}(),d.clearRect(0,0,1,1);try{d.drawImage(n,h,g,1,1,0,0,1,1),e=d.getImageData(0,0,1,1).data}catch{return d=null,null}return e}getBackground(n){let g=this.getLayer().getBackground();return"function"==typeof g&&(g=g(n.viewState.resolution)),g||void 0}useContainer(n,h,g){const e=this.getLayer().getClassName();let E,v;if(n&&n.className===e&&(!g||n&&n.style.backgroundColor&&(0,S.fS)((0,U._2)(n.style.backgroundColor),(0,U._2)(g)))){const x=n.firstElementChild;x instanceof HTMLCanvasElement&&(v=x.getContext("2d"))}if(v&&v.canvas.style.transform===h?(this.container=n,this.context=v,this.containerReused=!0):this.containerReused&&(this.container=null,this.context=null,this.containerReused=!1),!this.container){E=document.createElement("div"),E.className=e;let x=E.style;x.position="absolute",x.width="100%",x.height="100%",v=(0,I.E4)();const w=v.canvas;E.appendChild(w),x=w.style,x.position="absolute",x.left="0",x.transformOrigin="top left",this.container=E,this.context=v}!this.containerReused&&g&&!this.container.style.backgroundColor&&(this.container.style.backgroundColor=g)}clipUnrotated(n,h,g){const e=(0,P.rL)(g),E=(0,P.Xv)(g),v=(0,P.w$)(g),x=(0,P.hC)(g);(0,z.nn)(h.coordinateToPixelTransform,e),(0,z.nn)(h.coordinateToPixelTransform,E),(0,z.nn)(h.coordinateToPixelTransform,v),(0,z.nn)(h.coordinateToPixelTransform,x);const w=this.inversePixelTransform;(0,z.nn)(w,e),(0,z.nn)(w,E),(0,z.nn)(w,v),(0,z.nn)(w,x),n.save(),n.beginPath(),n.moveTo(Math.round(e[0]),Math.round(e[1])),n.lineTo(Math.round(E[0]),Math.round(E[1])),n.lineTo(Math.round(v[0]),Math.round(v[1])),n.lineTo(Math.round(x[0]),Math.round(x[1])),n.clip()}dispatchRenderEvent_(n,h,g){const e=this.getLayer();if(e.hasListener(n)){const E=new D.Z(n,this.inversePixelTransform,g,h);e.dispatchEvent(E)}}preRender(n,h){this.frameState=h,this.dispatchRenderEvent_(k.Z.PRERENDER,n,h)}postRender(n,h){this.dispatchRenderEvent_(k.Z.POSTRENDER,n,h)}getRenderTransform(n,h,g,e,E,v,x){const y=e/h;return(0,z.qC)(this.tempTransform,E/2,v/2,y,-y,-g,-n[0]+x,-n[1])}disposeInternal(){delete this.frameState,super.disposeInternal()}}},6257:(Bt,ot,a)=>{"use strict";a.d(ot,{Z:()=>s});var G=a(6691),D=a(8879),k=a(4353),z=a(828),U=a(4700),I=a(7139),S=a(142),P=a(9543),p=a(9015),d=a(513),u=a(931);const s=class c extends G.Z{constructor(n){super(n),this.extentChanged=!0,this.renderedExtent_=null,this.renderedProjection=null,this.renderedTiles=[],this.newTiles_=!1,this.tmpExtent=(0,P.lJ)(),this.tmpTileRange_=new z.Z(0,0,0,0)}isDrawableTile(n){const h=this.getLayer(),g=n.getState(),e=h.getUseInterimTilesOnError();return g==U.Z.LOADED||g==U.Z.EMPTY||g==U.Z.ERROR&&!e}getTile(n,h,g,e){const E=e.pixelRatio,v=e.viewState.projection,x=this.getLayer();let O=x.getSource().getTile(n,h,g,E,v);return O.getState()==U.Z.ERROR&&x.getUseInterimTilesOnError()&&x.getPreload()>0&&(this.newTiles_=!0),this.isDrawableTile(O)||(O=O.getInterimTile()),O}getData(n){const h=this.frameState;if(!h)return null;const g=this.getLayer(),e=(0,I.nn)(h.pixelToCoordinateTransform,n.slice()),E=g.getExtent();if(E&&!(0,P.b8)(E,e))return null;const v=h.pixelRatio,x=h.viewState.projection,w=h.viewState,O=g.getRenderSource(),y=O.getTileGridForProjection(w.projection),R=O.getTilePixelRatio(h.pixelRatio);for(let W=y.getZForResolution(w.resolution);W>=y.getMinZoom();--W){const K=y.getTileCoordForCoordAndZ(e,W),nt=O.getTile(W,K[1],K[2],v,x);if(!(nt instanceof D.Z||nt instanceof k.Z)||nt instanceof k.Z&&nt.getState()===U.Z.EMPTY)return null;if(nt.getState()!==U.Z.LOADED)continue;const A=y.getOrigin(W),L=(0,u.Pq)(y.getTileSize(W)),b=y.getResolution(W),M=Math.floor(R*((e[0]-A[0])/b-K[1]*L[0])),C=Math.floor(R*((A[1]-e[1])/b-K[2]*L[1])),N=Math.round(R*O.getGutterForProjection(w.projection));return this.getImageData(nt.getImage(),M+N,C+N)}return null}loadedTileCallback(n,h,g){return!!this.isDrawableTile(g)&&super.loadedTileCallback(n,h,g)}prepareFrame(n){return!!this.getLayer().getSource()}renderFrame(n,h){const g=n.layerStatesArray[n.layerIndex],e=n.viewState,E=e.projection,v=e.resolution,x=e.center,w=e.rotation,O=n.pixelRatio,y=this.getLayer(),R=y.getSource(),W=R.getRevision(),K=R.getTileGridForProjection(E),nt=K.getZForResolution(v,R.zDirection),A=K.getResolution(nt);let L=n.extent;const b=n.viewState.resolution,M=R.getTilePixelRatio(O),C=Math.round((0,P.dz)(L)/b*O),N=Math.round((0,P.Cr)(L)/b*O),H=g.extent&&(0,p.dY)(g.extent,E);H&&(L=(0,P.Ed)(L,(0,p.dY)(g.extent,E)));const it=A*C/2/M,Y=A*N/2/M,st=[x[0]-it,x[1]-Y,x[0]+it,x[1]+Y],ht=K.getTileRangeForExtentAndZ(L,nt),Tt={};Tt[nt]={};const vt=this.createLoadedTileFinder(R,E,Tt),Ct=this.tmpExtent,bt=this.tmpTileRange_;this.newTiles_=!1;const Gt=w?(0,P.dY)(e.center,b,w,n.size):void 0;for(let Ot=ht.minX;Ot<=ht.maxX;++Ot)for(let At=ht.minY;At<=ht.maxY;++At){if(w&&!K.tileCoordIntersectsViewport([nt,Ot,At],Gt))continue;const Yt=this.getTile(nt,Ot,At,n);if(this.isDrawableTile(Yt)){const gt=(0,d.sq)(this);if(Yt.getState()==U.Z.LOADED){Tt[nt][Yt.tileCoord.toString()]=Yt;let Mt=Yt.inTransition(gt);Mt&&1!==g.opacity&&(Yt.endTransition(gt),Mt=!1),!this.newTiles_&&(Mt||!this.renderedTiles.includes(Yt))&&(this.newTiles_=!0)}if(1===Yt.getAlpha(gt,n.time))continue}const ge=K.getTileCoordChildTileRange(Yt.tileCoord,bt,Ct);let qt=!1;ge&&(qt=vt(nt+1,ge)),qt||K.forEachTileCoordParentTileRange(Yt.tileCoord,vt,bt,Ct)}const kt=A/v*O/M;(0,I.qC)(this.pixelTransform,n.size[0]/2,n.size[1]/2,1/O,1/O,w,-C/2,-N/2);const ie=(0,I.BB)(this.pixelTransform);this.useContainer(h,ie,this.getBackground(n));const zt=this.context,ue=zt.canvas;(0,I.nb)(this.inversePixelTransform,this.pixelTransform),(0,I.qC)(this.tempTransform,C/2,N/2,kt,kt,0,-C/2,-N/2),ue.width!=C||ue.height!=N?(ue.width=C,ue.height=N):this.containerReused||zt.clearRect(0,0,C,N),H&&this.clipUnrotated(zt,n,H),R.getInterpolate()||(zt.imageSmoothingEnabled=!1),this.preRender(zt,n),this.renderedTiles.length=0;let ce,Se,dt,de=Object.keys(Tt).map(Number);de.sort(S.j2),1!==g.opacity||this.containerReused&&!R.getOpaque(n.viewState.projection)?(ce=[],Se=[]):de=de.reverse();for(let Ot=de.length-1;Ot>=0;--Ot){const At=de[Ot],Yt=R.getTilePixelSize(At,O,E),qt=K.getResolution(At)/A,gt=Yt[0]*qt*kt,Mt=Yt[1]*qt*kt,Zt=K.getTileCoordForCoordAndZ((0,P.rL)(st),At),jt=K.getTileCoordExtent(Zt),Wt=(0,I.nn)(this.tempTransform,[M*(jt[0]-st[0])/A,M*(st[3]-jt[3])/A]),he=M*R.getGutterForProjection(E),_e=Tt[At];for(const Le in _e){const Ze=_e[Le],It=Ze.tileCoord,ct=Zt[1]-It[1],m=Math.round(Wt[0]-(ct-1)*gt),F=Zt[2]-It[2],Q=Math.round(Wt[1]-(F-1)*Mt),V=Math.round(Wt[0]-ct*gt),lt=Math.round(Wt[1]-F*Mt),_t=m-V,St=Q-lt,Nt=nt===At,Xt=Nt&&1!==Ze.getAlpha((0,d.sq)(this),n.time);let Jt=!1;if(!Xt)if(ce){dt=[V,lt,V+_t,lt,V+_t,lt+St,V,lt+St];for(let Ee=0,se=ce.length;Ee<se;++Ee)if(nt!==At&&At<Se[Ee]){const Qt=ce[Ee];(0,P.kK)([V,lt,V+_t,lt+St],[Qt[0],Qt[3],Qt[4],Qt[7]])&&(Jt||(zt.save(),Jt=!0),zt.beginPath(),zt.moveTo(dt[0],dt[1]),zt.lineTo(dt[2],dt[3]),zt.lineTo(dt[4],dt[5]),zt.lineTo(dt[6],dt[7]),zt.moveTo(Qt[6],Qt[7]),zt.lineTo(Qt[4],Qt[5]),zt.lineTo(Qt[2],Qt[3]),zt.lineTo(Qt[0],Qt[1]),zt.clip())}ce.push(dt),Se.push(At)}else zt.clearRect(V,lt,_t,St);this.drawTileImage(Ze,n,V,lt,_t,St,he,Nt),ce&&!Xt?(Jt&&zt.restore(),this.renderedTiles.unshift(Ze)):this.renderedTiles.push(Ze),this.updateUsedTiles(n.usedTiles,R,Ze)}}return this.renderedRevision=W,this.renderedResolution=A,this.extentChanged=!this.renderedExtent_||!(0,P.fS)(this.renderedExtent_,st),this.renderedExtent_=st,this.renderedPixelRatio=O,this.renderedProjection=E,this.manageTilePyramid(n,R,K,O,E,L,nt,y.getPreload()),this.scheduleExpireCache(n,R),this.postRender(zt,n),g.extent&&zt.restore(),zt.imageSmoothingEnabled=!0,ie!==ue.style.transform&&(ue.style.transform=ie),this.container}drawTileImage(n,h,g,e,E,v,x,w){const O=this.getTileImage(n);if(!O)return;const y=(0,d.sq)(this),R=h.layerStatesArray[h.layerIndex],W=R.opacity*(w?n.getAlpha(y,h.time):1),K=W!==this.context.globalAlpha;K&&(this.context.save(),this.context.globalAlpha=W),this.context.drawImage(O,x,x,O.width-2*x,O.height-2*x,g,e,E,v),K&&this.context.restore(),W!==R.opacity?h.animate=!0:w&&n.endTransition(y)}getImage(){const n=this.context;return n?n.canvas:null}getTileImage(n){return n.getImage()}scheduleExpireCache(n,h){if(h.canExpireCache()){const g=function(e,E,v){const x=(0,d.sq)(e);x in v.usedTiles&&e.expireCache(v.viewState.projection,v.usedTiles[x])}.bind(null,h);n.postRenderFunctions.push(g)}}updateUsedTiles(n,h,g){const e=(0,d.sq)(h);e in n||(n[e]={}),n[e][g.getKey()]=!0}manageTilePyramid(n,h,g,e,E,v,x,w,O){const y=(0,d.sq)(h);y in n.wantedTiles||(n.wantedTiles[y]={});const R=n.wantedTiles[y],W=n.tileQueue,K=g.getMinZoom(),nt=n.viewState.rotation,A=nt?(0,P.dY)(n.viewState.center,n.viewState.resolution,nt,n.size):void 0;let b,M,C,N,H,it,L=0;for(it=K;it<=x;++it)for(M=g.getTileRangeForExtentAndZ(v,it,M),C=g.getResolution(it),N=M.minX;N<=M.maxX;++N)for(H=M.minY;H<=M.maxY;++H)nt&&!g.tileCoordIntersectsViewport([it,N,H],A)||(x-it<=w?(++L,b=h.getTile(it,N,H,e,E),b.getState()==U.Z.IDLE&&(R[b.getKey()]=!0,W.isKeyQueued(b.getKey())||W.enqueue([b,y,g.getTileCoordCenter(b.tileCoord),C])),void 0!==O&&O(b)):h.useTile(it,N,H,E));h.updateCacheSize(L,E)}}},2308:(Bt,ot,a)=>{"use strict";a.d(ot,{Z:()=>n});var G=a(7599),D=a(6691),k=a(1015),z=a(9500),U=a(7713),I=a(7139),S=a(9543),P=a(3842),p=a(7707),d=a(142),u=a(9015),c=a(513),s=a(5415);const n=class f extends D.Z{constructor(g){super(g),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.hitDetectionImageData_=null,this.renderedFeatures_=null,this.renderedRevision_=-1,this.renderedResolution_=NaN,this.renderedExtent_=(0,S.lJ)(),this.wrappedRenderedExtent_=(0,S.lJ)(),this.renderedCenter_=null,this.renderedProjection_=null,this.renderedRenderOrder_=null,this.replayGroup_=null,this.replayGroupChanged=!0,this.declutterExecutorGroup=null,this.clipping=!0,this.compositionContext_=null,this.opacity_=1}renderWorlds(g,e,E){const v=e.extent,x=e.viewState,w=x.center,O=x.resolution,y=x.projection,R=x.rotation,W=y.getExtent(),K=this.getLayer().getSource(),nt=e.pixelRatio,A=e.viewHints,L=!(A[z.Z.ANIMATING]||A[z.Z.INTERACTING]),b=this.compositionContext_,M=Math.round(e.size[0]*nt),C=Math.round(e.size[1]*nt),N=K.getWrapX()&&y.canWrapX(),H=N?(0,S.dz)(W):null,it=N?Math.ceil((v[2]-W[2])/H)+1:1;let Y=N?Math.floor((v[0]-W[0])/H):0;do{const st=this.getRenderTransform(w,O,R,nt,M,C,Y*H);g.execute(b,1,st,R,L,void 0,E)}while(++Y<it)}setupCompositionContext_(){if(1!==this.opacity_){const g=(0,P.E4)(this.context.canvas.width,this.context.canvas.height,D.r);this.compositionContext_=g}else this.compositionContext_=this.context}releaseCompositionContext_(){if(1!==this.opacity_){const g=this.context.globalAlpha;this.context.globalAlpha=this.opacity_,this.context.drawImage(this.compositionContext_.canvas,0,0),this.context.globalAlpha=g,(0,P.jy)(this.compositionContext_),D.r.push(this.compositionContext_.canvas),this.compositionContext_=null}}renderDeclutter(g){this.declutterExecutorGroup&&(this.setupCompositionContext_(),this.renderWorlds(this.declutterExecutorGroup,g,g.declutterTree),this.releaseCompositionContext_())}renderFrame(g,e){const E=g.pixelRatio,v=g.layerStatesArray[g.layerIndex];(0,I.n3)(this.pixelTransform,1/E,1/E),(0,I.nb)(this.inversePixelTransform,this.pixelTransform);const x=(0,I.BB)(this.pixelTransform);this.useContainer(e,x,this.getBackground(g));const w=this.context,O=w.canvas,y=this.replayGroup_,R=this.declutterExecutorGroup;if((!y||y.isEmpty())&&(!R||R.isEmpty()))return null;const W=Math.round(g.size[0]*E),K=Math.round(g.size[1]*E);O.width!=W||O.height!=K?(O.width=W,O.height=K,O.style.transform!==x&&(O.style.transform=x)):this.containerReused||w.clearRect(0,0,W,K),this.preRender(w,g);const nt=g.viewState,A=nt.projection;this.opacity_=v.opacity,this.setupCompositionContext_();let L=!1,b=!0;if(v.extent&&this.clipping){const M=(0,u.dY)(v.extent,A);b=(0,S.kK)(M,g.extent),L=b&&!(0,S.r4)(M,g.extent),L&&this.clipUnrotated(this.compositionContext_,g,M)}return b&&this.renderWorlds(y,g),L&&this.compositionContext_.restore(),this.releaseCompositionContext_(),this.postRender(w,g),this.renderedRotation_!==nt.rotation&&(this.renderedRotation_=nt.rotation,this.hitDetectionImageData_=null),this.container}getFeatures(g){return new Promise(e=>{if(!this.hitDetectionImageData_&&!this.animatingOrInteracting_){const E=[this.context.canvas.width,this.context.canvas.height];(0,I.nn)(this.pixelTransform,E);const v=this.renderedCenter_,x=this.renderedResolution_,w=this.renderedRotation_,O=this.renderedProjection_,y=this.wrappedRenderedExtent_,R=this.getLayer(),W=[],K=E[0]*U.UN,nt=E[1]*U.UN;W.push(this.getRenderTransform(v,x,w,U.UN,K,nt,0).slice());const A=R.getSource(),L=O.getExtent();if(A.getWrapX()&&O.canWrapX()&&!(0,S.r4)(L,y)){let b=y[0];const M=(0,S.dz)(L);let N,C=0;for(;b<L[0];)--C,N=M*C,W.push(this.getRenderTransform(v,x,w,U.UN,K,nt,N).slice()),b+=M;for(C=0,b=y[2];b>L[2];)++C,N=M*C,W.push(this.getRenderTransform(v,x,w,U.UN,K,nt,N).slice()),b-=M}this.hitDetectionImageData_=(0,U.TU)(E,W,this.renderedFeatures_,R.getStyleFunction(),y,x,w)}e((0,U.ix)(g,this.renderedFeatures_,this.hitDetectionImageData_))})}forEachFeatureAtCoordinate(g,e,E,v,x){if(!this.replayGroup_)return;const w=e.viewState.resolution,O=e.viewState.rotation,y=this.getLayer(),R={},W=function(A,L,b){const M=(0,c.sq)(A),C=R[M];if(C){if(!0!==C&&b<C.distanceSq){if(0===b)return R[M]=!0,x.splice(x.lastIndexOf(C),1),v(A,y,L);C.geometry=L,C.distanceSq=b}}else{if(0===b)return R[M]=!0,v(A,y,L);x.push(R[M]={feature:A,layer:y,geometry:L,distanceSq:b,callback:v})}};let K;const nt=[this.replayGroup_];return this.declutterExecutorGroup&&nt.push(this.declutterExecutorGroup),nt.some(A=>K=A.forEachFeatureAtCoordinate(g,w,O,E,W,A===this.declutterExecutorGroup&&e.declutterTree?e.declutterTree.all().map(L=>L.value):null)),K}handleFontsChanged(){const g=this.getLayer();g.getVisible()&&this.replayGroup_&&g.changed()}handleStyleImageChange_(g){this.renderIfReadyAndVisible()}prepareFrame(g){const e=this.getLayer(),E=e.getSource();if(!E)return!1;const v=g.viewHints[z.Z.ANIMATING],x=g.viewHints[z.Z.INTERACTING],w=e.getUpdateWhileAnimating(),O=e.getUpdateWhileInteracting();if(this.ready&&!w&&v||!O&&x)return this.animatingOrInteracting_=!0,!0;this.animatingOrInteracting_=!1;const y=g.extent,R=g.viewState,W=R.projection,K=R.resolution,nt=g.pixelRatio,A=e.getRevision(),L=e.getRenderBuffer();let b=e.getRenderOrder();void 0===b&&(b=p.eR);const M=R.center.slice(),C=(0,S.f3)(y,L*K),N=C.slice(),H=[C.slice()],it=W.getExtent();if(E.getWrapX()&&W.canWrapX()&&!(0,S.r4)(it,g.extent)){const ue=(0,S.dz)(it),de=Math.max((0,S.dz)(C)/2,ue);C[0]=it[0]-de,C[2]=it[2]+de,(0,s.Cf)(M,W);const ce=(0,S.Cf)(H[0],W);ce[0]<it[0]&&ce[2]<it[2]?H.push([ce[0]+ue,ce[1],ce[2]+ue,ce[3]]):ce[0]>it[0]&&ce[2]>it[2]&&H.push([ce[0]-ue,ce[1],ce[2]-ue,ce[3]])}if(this.ready&&this.renderedResolution_==K&&this.renderedRevision_==A&&this.renderedRenderOrder_==b&&(0,S.r4)(this.wrappedRenderedExtent_,C))return(0,d.fS)(this.renderedExtent_,N)||(this.hitDetectionImageData_=null,this.renderedExtent_=N),this.renderedCenter_=M,this.replayGroupChanged=!1,!0;this.replayGroup_=null;const Y=new G.Z((0,p.Qz)(K,nt),C,K,nt);let st;this.getLayer().getDeclutter()&&(st=new G.Z((0,p.Qz)(K,nt),C,K,nt));const ht=(0,u.Cs)();let Tt;if(ht){for(let ue=0,de=H.length;ue<de;++ue){const Se=(0,u.Fj)(H[ue],W);E.loadFeatures(Se,(0,u.on)(K,W),ht)}Tt=(0,u.WO)(ht,W)}else for(let ue=0,de=H.length;ue<de;++ue)E.loadFeatures(H[ue],K,W);const vt=(0,p.se)(K,nt);let Ct=!0;const bt=ue=>{let de;const ce=ue.getStyleFunction()||e.getStyleFunction();if(ce&&(de=ce(ue,K)),de){const Se=this.renderFeature(ue,vt,de,Y,Tt,st);Ct=Ct&&!Se}},Gt=(0,u.Fj)(C,W),kt=E.getFeaturesInExtent(Gt);b&&kt.sort(b);for(let ue=0,de=kt.length;ue<de;++ue)bt(kt[ue]);this.renderedFeatures_=kt,this.ready=Ct;const ie=Y.finish(),zt=new k.Z(C,K,nt,E.getOverlaps(),ie,e.getRenderBuffer());return st&&(this.declutterExecutorGroup=new k.Z(C,K,nt,E.getOverlaps(),st.finish(),e.getRenderBuffer())),this.renderedResolution_=K,this.renderedRevision_=A,this.renderedRenderOrder_=b,this.renderedExtent_=N,this.wrappedRenderedExtent_=C,this.renderedCenter_=M,this.renderedProjection_=W,this.replayGroup_=zt,this.hitDetectionImageData_=null,this.replayGroupChanged=!0,!0}renderFeature(g,e,E,v,x,w){if(!E)return!1;let O=!1;if(Array.isArray(E))for(let y=0,R=E.length;y<R;++y)O=(0,p.Pn)(v,g,E[y],e,this.boundHandleStyleImageChange_,x,w)||O;else O=(0,p.Pn)(v,g,E,e,this.boundHandleStyleImageChange_,x,w);return O}}},7707:(Bt,ot,a)=>{"use strict";a.d(ot,{Pn:()=>p,Qz:()=>S,eR:()=>U,se:()=>I});var G=a(1501),D=a(513);const z={Point:function h(E,v,x,w,O){const y=x.getImage(),R=x.getText();let W;if(y){if(y.getImageState()!=G.Z.LOADED)return;let K=E;if(O){const A=y.getDeclutterMode();if("none"!==A)if(K=O,"obstacle"===A){const L=E.getBuilder(x.getZIndex(),"Image");L.setImageStyle(y,W),L.drawPoint(v,w)}else R&&R.getText()&&(W={})}const nt=K.getBuilder(x.getZIndex(),"Image");nt.setImageStyle(y,W),nt.drawPoint(v,w)}if(R&&R.getText()){let K=E;O&&(K=O);const nt=K.getBuilder(x.getZIndex(),"Text");nt.setTextStyle(R,W),nt.drawText(v,w)}},LineString:function s(E,v,x,w,O){const y=x.getStroke();if(y){const W=E.getBuilder(x.getZIndex(),"LineString");W.setFillStrokeStyle(null,y),W.drawLineString(v,w)}const R=x.getText();if(R&&R.getText()){const W=(O||E).getBuilder(x.getZIndex(),"Text");W.setTextStyle(R),W.drawText(v,w)}},Polygon:function e(E,v,x,w,O){const y=x.getFill(),R=x.getStroke();if(y||R){const K=E.getBuilder(x.getZIndex(),"Polygon");K.setFillStrokeStyle(y,R),K.drawPolygon(v,w)}const W=x.getText();if(W&&W.getText()){const K=(O||E).getBuilder(x.getZIndex(),"Text");K.setTextStyle(W),K.drawText(v,w)}},MultiPoint:function g(E,v,x,w,O){const y=x.getImage(),R=x.getText();let W;if(y){if(y.getImageState()!=G.Z.LOADED)return;let K=E;if(O){const A=y.getDeclutterMode();if("none"!==A)if(K=O,"obstacle"===A){const L=E.getBuilder(x.getZIndex(),"Image");L.setImageStyle(y,W),L.drawMultiPoint(v,w)}else R&&R.getText()&&(W={})}const nt=K.getBuilder(x.getZIndex(),"Image");nt.setImageStyle(y,W),nt.drawMultiPoint(v,w)}if(R&&R.getText()){let K=E;O&&(K=O);const nt=K.getBuilder(x.getZIndex(),"Text");nt.setTextStyle(R,W),nt.drawText(v,w)}},MultiLineString:function f(E,v,x,w,O){const y=x.getStroke();if(y){const W=E.getBuilder(x.getZIndex(),"LineString");W.setFillStrokeStyle(null,y),W.drawMultiLineString(v,w)}const R=x.getText();if(R&&R.getText()){const W=(O||E).getBuilder(x.getZIndex(),"Text");W.setTextStyle(R),W.drawText(v,w)}},MultiPolygon:function n(E,v,x,w,O){const y=x.getFill(),R=x.getStroke();if(R||y){const K=E.getBuilder(x.getZIndex(),"Polygon");K.setFillStrokeStyle(y,R),K.drawMultiPolygon(v,w)}const W=x.getText();if(W&&W.getText()){const K=(O||E).getBuilder(x.getZIndex(),"Text");K.setTextStyle(W),K.drawText(v,w)}},GeometryCollection:function c(E,v,x,w,O){const y=v.getGeometriesArray();let R,W;for(R=0,W=y.length;R<W;++R)(0,z[y[R].getType()])(E,y[R],x,w,O)},Circle:function P(E,v,x,w,O){const y=x.getFill(),R=x.getStroke();if(y||R){const K=E.getBuilder(x.getZIndex(),"Circle");K.setFillStrokeStyle(y,R),K.drawCircle(v,w)}const W=x.getText();if(W&&W.getText()){const K=(O||E).getBuilder(x.getZIndex(),"Text");K.setTextStyle(W),K.drawText(v,w)}}};function U(E,v){return parseInt((0,D.sq)(E),10)-parseInt((0,D.sq)(v),10)}function I(E,v){const x=S(E,v);return x*x}function S(E,v){return.5*E/v}function p(E,v,x,w,O,y,R){let W=!1;const K=x.getImage();if(K){const nt=K.getImageState();nt==G.Z.LOADED||nt==G.Z.ERROR?K.unlistenImageChange(O):(nt==G.Z.IDLE&&K.load(),K.listenImageChange(O),W=!0)}return function d(E,v,x,w,O,y){const R=x.getGeometryFunction()(v);if(!R)return;const W=R.simplifyTransformed(w,O);x.getRenderer()?u(E,W,x,v):(0,z[W.getType()])(E,W,x,v,y)}(E,v,x,w,y,R),W}function u(E,v,x,w){if("GeometryCollection"!=v.getType())E.getBuilder(x.getZIndex(),"Default").drawCustom(v,w,x.getRenderer(),x.getHitDetectionRenderer());else{const y=v.getGeometries();for(let R=0,W=y.length;R<W;++R)u(E,y[R],x,w)}}},5114:(Bt,ot,a)=>{"use strict";a.d(ot,{Co:()=>u,aA:()=>d,rX:()=>I,sY:()=>c});var G=a(9543),D=a(3842),k=a(9015),z=a(4331);let U;const I=[];function S(s,f,n,h,g){s.beginPath(),s.moveTo(0,0),s.lineTo(f,n),s.lineTo(h,g),s.closePath(),s.save(),s.clip(),s.fillRect(0,0,Math.max(f,h)+1,Math.max(n,g)),s.restore()}function P(s,f){return Math.abs(s[4*f]-210)>2||Math.abs(s[4*f+3]-191.25)>2}function d(s,f,n,h){const g=(0,k.vs)(n,f,s);let e=(0,k._Q)(f,h,n);const E=f.getMetersPerUnit();void 0!==E&&(e*=E);const v=s.getMetersPerUnit();void 0!==v&&(e/=v);const x=s.getExtent();if(!x||(0,G.b8)(x,g)){const w=(0,k._Q)(s,e,g)/e;isFinite(w)&&w>0&&(e/=w)}return e}function u(s,f,n,h){const g=(0,G.qg)(n);let e=d(s,f,g,h);return(!isFinite(e)||e<=0)&&(0,G.H6)(n,function(E){return e=d(s,f,E,h),isFinite(e)&&e>0}),e}function c(s,f,n,h,g,e,E,v,x,w,O,y){const R=(0,D.E4)(Math.round(n*s),Math.round(n*f),I);if(y||(R.imageSmoothingEnabled=!1),0===x.length)return R.canvas;function W(C){return Math.round(C*n)/n}R.scale(n,n),R.globalCompositeOperation="lighter";const K=(0,G.lJ)();x.forEach(function(C,N,H){(0,G.l7)(K,C.extent)});const nt=(0,G.dz)(K),A=(0,G.Cr)(K),L=(0,D.E4)(Math.round(n*nt/h),Math.round(n*A/h),I);y||(L.imageSmoothingEnabled=!1);const b=n/h;x.forEach(function(C,N,H){const it=C.extent[0]-K[0],Y=-(C.extent[3]-K[3]),st=(0,G.dz)(C.extent),ht=(0,G.Cr)(C.extent);C.image.width>0&&C.image.height>0&&L.drawImage(C.image,w,w,C.image.width-2*w,C.image.height-2*w,it*b,Y*b,st*b,ht*b)});const M=(0,G.rL)(E);return v.getTriangles().forEach(function(C,N,H){const it=C.source,Y=C.target;let st=it[0][0],ht=it[0][1],Tt=it[1][0],vt=it[1][1],Ct=it[2][0],bt=it[2][1];const Gt=W((Y[0][0]-M[0])/e),kt=W(-(Y[0][1]-M[1])/e),ie=W((Y[1][0]-M[0])/e),zt=W(-(Y[1][1]-M[1])/e),ue=W((Y[2][0]-M[0])/e),de=W(-(Y[2][1]-M[1])/e),ce=st,Se=ht;st=0,ht=0,Tt-=ce,vt-=Se,Ct-=ce,bt-=Se;const Ot=(0,z.SV)([[Tt,vt,0,0,ie-Gt],[Ct,bt,0,0,ue-Gt],[0,0,Tt,vt,zt-kt],[0,0,Ct,bt,de-kt]]);if(Ot){if(R.save(),R.beginPath(),function p(){if(void 0===U){const s=(0,D.E4)(6,6,I);s.globalCompositeOperation="lighter",s.fillStyle="rgba(210, 0, 0, 0.75)",S(s,4,5,4,0),S(s,4,5,0,5);const f=s.getImageData(0,0,3,3).data;U=P(f,0)||P(f,4)||P(f,8),(0,D.jy)(s),I.push(s.canvas)}return U}()||!y){R.moveTo(ie,zt);const At=4,Yt=Gt-ie,ge=kt-zt;for(let qt=0;qt<At;qt++)R.lineTo(ie+W((qt+1)*Yt/At),zt+W(qt*ge/(At-1))),qt!=At-1&&R.lineTo(ie+W((qt+1)*Yt/At),zt+W((qt+1)*ge/(At-1)));R.lineTo(ue,de)}else R.moveTo(ie,zt),R.lineTo(Gt,kt),R.lineTo(ue,de);R.clip(),R.transform(Ot[0],Ot[2],Ot[1],Ot[3],Gt,kt),R.translate(K[0]-ce,K[3]-Se),R.scale(h/n,-h/n),R.drawImage(L.canvas,0,0),R.restore()}}),(0,D.jy)(L),I.push(L.canvas),O&&(R.save(),R.globalCompositeOperation="source-over",R.strokeStyle="black",R.lineWidth=1,v.getTriangles().forEach(function(C,N,H){const it=C.target,Y=(it[0][0]-M[0])/e,st=-(it[0][1]-M[1])/e,ht=(it[1][0]-M[0])/e,Tt=-(it[1][1]-M[1])/e,vt=(it[2][0]-M[0])/e,Ct=-(it[2][1]-M[1])/e;R.beginPath(),R.moveTo(ht,Tt),R.lineTo(Y,st),R.lineTo(vt,Ct),R.closePath(),R.stroke()}),R.restore()),R.canvas}},4353:(Bt,ot,a)=>{"use strict";a.d(ot,{Z:()=>c});var G=a(3094),D=a(3044),k=a(8786),z=a(4700),U=a(6887),I=a(5114),S=a(4331),P=a(9543),p=a(2716),d=a(3842);const c=class u extends k.Z{constructor(f,n,h,g,e,E,v,x,w,O,y,R){super(e,z.Z.IDLE,{interpolate:!!R}),this.renderEdges_=void 0!==y&&y,this.pixelRatio_=v,this.gutter_=x,this.canvas_=null,this.sourceTileGrid_=n,this.targetTileGrid_=g,this.wrappedTileCoord_=E||e,this.sourceTiles_=[],this.sourcesListenerKeys_=null,this.sourceZ_=0;const W=g.getTileCoordExtent(this.wrappedTileCoord_),K=this.targetTileGrid_.getExtent();let nt=this.sourceTileGrid_.getExtent();const A=K?(0,P.Ed)(W,K):W;if(0===(0,P.bg)(A))return void(this.state=z.Z.EMPTY);const L=f.getExtent();L&&(nt=nt?(0,P.Ed)(nt,L):L);const b=g.getResolution(this.wrappedTileCoord_[0]),M=(0,I.Co)(f,h,A,b);if(!isFinite(M)||M<=0)return void(this.state=z.Z.EMPTY);if(this.triangulation_=new U.Z(f,h,A,nt,M*(void 0!==O?O:G.m),b),0===this.triangulation_.getTriangles().length)return void(this.state=z.Z.EMPTY);this.sourceZ_=n.getZForResolution(M);let N=this.triangulation_.calculateSourceExtent();if(nt&&(f.canWrapX()?(N[1]=(0,S.uZ)(N[1],nt[1],nt[3]),N[3]=(0,S.uZ)(N[3],nt[1],nt[3])):N=(0,P.Ed)(N,nt)),(0,P.bg)(N)){const H=n.getTileRangeForExtentAndZ(N,this.sourceZ_);for(let it=H.minX;it<=H.maxX;it++)for(let Y=H.minY;Y<=H.maxY;Y++){const st=w(this.sourceZ_,it,Y,v);st&&this.sourceTiles_.push(st)}0===this.sourceTiles_.length&&(this.state=z.Z.EMPTY)}else this.state=z.Z.EMPTY}getImage(){return this.canvas_}reproject_(){const f=[];if(this.sourceTiles_.forEach(n=>{n&&n.getState()==z.Z.LOADED&&f.push({extent:this.sourceTileGrid_.getTileCoordExtent(n.tileCoord),image:n.getImage()})}),this.sourceTiles_.length=0,0===f.length)this.state=z.Z.ERROR;else{const n=this.wrappedTileCoord_[0],h=this.targetTileGrid_.getTileSize(n),g="number"==typeof h?h:h[0],e="number"==typeof h?h:h[1],E=this.targetTileGrid_.getResolution(n),v=this.sourceTileGrid_.getResolution(this.sourceZ_),x=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=(0,I.sY)(g,e,this.pixelRatio_,v,this.sourceTileGrid_.getExtent(),E,x,this.triangulation_,f,this.gutter_,this.renderEdges_,this.interpolate),this.state=z.Z.LOADED}this.changed()}load(){if(this.state==z.Z.IDLE){this.state=z.Z.LOADING,this.changed();let f=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(n=>{const h=n.getState();if(h==z.Z.IDLE||h==z.Z.LOADING){f++;const g=(0,p.oL)(n,D.Z.CHANGE,function(e){const E=n.getState();(E==z.Z.LOADED||E==z.Z.ERROR||E==z.Z.EMPTY)&&((0,p.bN)(g),f--,0===f&&(this.unlistenSources_(),this.reproject_()))},this);this.sourcesListenerKeys_.push(g)}}),0===f?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach(function(n,h,g){n.getState()==z.Z.IDLE&&n.load()})}}unlistenSources_(){this.sourcesListenerKeys_.forEach(p.bN),this.sourcesListenerKeys_=null}release(){this.canvas_&&((0,d.jy)(this.canvas_.getContext("2d")),I.rX.push(this.canvas_),this.canvas_=null),super.release()}}},6887:(Bt,ot,a)=>{"use strict";a.d(ot,{Z:()=>S});var G=a(9543),D=a(9015),k=a(4331);const S=class I{constructor(p,d,u,c,s,f){this.sourceProj_=p,this.targetProj_=d;let n={};const h=(0,D.Ck)(this.targetProj_,this.sourceProj_);this.transformInv_=function(W){const K=W[0]+"/"+W[1];return n[K]||(n[K]=h(W)),n[K]},this.maxSourceExtent_=c,this.errorThresholdSquared_=s*s,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!c&&!!this.sourceProj_.getExtent()&&(0,G.dz)(c)==(0,G.dz)(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?(0,G.dz)(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?(0,G.dz)(this.targetProj_.getExtent()):null;const g=(0,G.rL)(u),e=(0,G.Xv)(u),E=(0,G.w$)(u),v=(0,G.hC)(u),x=this.transformInv_(g),w=this.transformInv_(e),O=this.transformInv_(E),y=this.transformInv_(v),R=10+(f?Math.max(0,Math.ceil(Math.log2((0,G.bg)(u)/(f*f*256*256)))):0);if(this.addQuad_(g,e,E,v,x,w,O,y,R),this.wrapsXInSource_){let W=1/0;this.triangles_.forEach(function(K,nt,A){W=Math.min(W,K.source[0][0],K.source[1][0],K.source[2][0])}),this.triangles_.forEach(K=>{if(Math.max(K.source[0][0],K.source[1][0],K.source[2][0])-W>this.sourceWorldWidth_/2){const nt=[[K.source[0][0],K.source[0][1]],[K.source[1][0],K.source[1][1]],[K.source[2][0],K.source[2][1]]];nt[0][0]-W>this.sourceWorldWidth_/2&&(nt[0][0]-=this.sourceWorldWidth_),nt[1][0]-W>this.sourceWorldWidth_/2&&(nt[1][0]-=this.sourceWorldWidth_),nt[2][0]-W>this.sourceWorldWidth_/2&&(nt[2][0]-=this.sourceWorldWidth_);const A=Math.min(nt[0][0],nt[1][0],nt[2][0]);Math.max(nt[0][0],nt[1][0],nt[2][0])-A<this.sourceWorldWidth_/2&&(K.source=nt)}})}n={}}addTriangle_(p,d,u,c,s,f){this.triangles_.push({source:[c,s,f],target:[p,d,u]})}addQuad_(p,d,u,c,s,f,n,h,g){const e=(0,G.hI)([s,f,n,h]),E=this.sourceWorldWidth_?(0,G.dz)(e)/this.sourceWorldWidth_:null,v=this.sourceWorldWidth_,x=this.sourceProj_.canWrapX()&&E>.5&&E<1;let w=!1;if(g>0){if(this.targetProj_.isGlobal()&&this.targetWorldWidth_){const y=(0,G.hI)([p,d,u,c]);w=(0,G.dz)(y)/this.targetWorldWidth_>.25||w}!x&&this.sourceProj_.isGlobal()&&E&&(w=E>.25||w)}if(!w&&this.maxSourceExtent_&&isFinite(e[0])&&isFinite(e[1])&&isFinite(e[2])&&isFinite(e[3])&&!(0,G.kK)(e,this.maxSourceExtent_))return;let O=0;if(!(w||isFinite(s[0])&&isFinite(s[1])&&isFinite(f[0])&&isFinite(f[1])&&isFinite(n[0])&&isFinite(n[1])&&isFinite(h[0])&&isFinite(h[1])))if(g>0)w=!0;else if(O=(isFinite(s[0])&&isFinite(s[1])?0:8)+(isFinite(f[0])&&isFinite(f[1])?0:4)+(isFinite(n[0])&&isFinite(n[1])?0:2)+(isFinite(h[0])&&isFinite(h[1])?0:1),1!=O&&2!=O&&4!=O&&8!=O)return;if(g>0){if(!w){const R=this.transformInv_([(p[0]+u[0])/2,(p[1]+u[1])/2]);let W;W=x?((0,k.$W)(s[0],v)+(0,k.$W)(n[0],v))/2-(0,k.$W)(R[0],v):(s[0]+n[0])/2-R[0];const K=(s[1]+n[1])/2-R[1];w=W*W+K*K>this.errorThresholdSquared_}if(w){if(Math.abs(p[0]-u[0])<=Math.abs(p[1]-u[1])){const y=[(d[0]+u[0])/2,(d[1]+u[1])/2],R=this.transformInv_(y),W=[(c[0]+p[0])/2,(c[1]+p[1])/2],K=this.transformInv_(W);this.addQuad_(p,d,y,W,s,f,R,K,g-1),this.addQuad_(W,y,u,c,K,R,n,h,g-1)}else{const y=[(p[0]+d[0])/2,(p[1]+d[1])/2],R=this.transformInv_(y),W=[(u[0]+c[0])/2,(u[1]+c[1])/2],K=this.transformInv_(W);this.addQuad_(p,y,W,c,s,R,K,h,g-1),this.addQuad_(y,d,u,W,R,f,n,K,g-1)}return}}if(x){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}0==(11&O)&&this.addTriangle_(p,u,c,s,n,h),0==(14&O)&&this.addTriangle_(p,u,d,s,n,f),O&&(0==(13&O)&&this.addTriangle_(d,c,p,f,h,s),0==(7&O)&&this.addTriangle_(d,c,u,f,h,n))}calculateSourceExtent(){const p=(0,G.lJ)();return this.triangles_.forEach(function(d,u,c){const s=d.source;(0,G.Wj)(p,s[0]),(0,G.Wj)(p,s[1]),(0,G.Wj)(p,s[2])}),p}getTriangles(){return this.triangles_}}},3094:(Bt,ot,a)=>{"use strict";a.d(ot,{m:()=>G});const G=.5},7011:(Bt,ot,a)=>{"use strict";a.d(ot,{Gw:()=>U,YP:()=>k,gE:()=>z,h$:()=>D});var G=a(4331);function D(I){if(void 0!==I)return 0}function k(I){if(void 0!==I)return I}function z(I){const S=2*Math.PI/I;return function(P,p){return p?P:void 0!==P?P=Math.floor(P/S+.5)*S:void 0}}function U(I){return I=I||(0,G.Yr)(5),function(S,P){return P?S:void 0!==S?Math.abs(S)<=I?0:S:void 0}}},931:(Bt,ot,a)=>{"use strict";function G(U,I,S){return void 0===S&&(S=[0,0]),S[0]=U[0]+2*I,S[1]=U[1]+2*I,S}function D(U){return U[0]>0&&U[1]>0}function k(U,I,S){return void 0===S&&(S=[0,0]),S[0]=U[0]*I+.5|0,S[1]=U[1]*I+.5|0,S}function z(U,I){return Array.isArray(U)?U:(void 0===I?I=[U,U]:(I[0]=U,I[1]=U),I)}a.d(ot,{Pq:()=>z,bA:()=>k,f3:()=>G,py:()=>D})},2663:(Bt,ot,a)=>{"use strict";a.d(ot,{Z:()=>d});var G=a(3044),D=a(3413),k=a(7026),z=a(3149),U=a(5415),I=a(992),S=a(9543),P=a(513);const d=class p extends z.Z{constructor(c){super({attributions:c.attributions,wrapX:c.wrapX}),this.resolution=void 0,this.distance=void 0!==c.distance?c.distance:20,this.minDistance=c.minDistance||0,this.interpolationRatio=0,this.features=[],this.geometryFunction=c.geometryFunction||function(s){const f=s.getGeometry();return(0,I.h)("Point"==f.getType(),10),f},this.createCustomCluster_=c.createCluster,this.source=null,this.boundRefresh_=this.refresh.bind(this),this.updateDistance(this.distance,this.minDistance),this.setSource(c.source||null)}clear(c){this.features.length=0,super.clear(c)}getDistance(){return this.distance}getSource(){return this.source}loadFeatures(c,s,f){this.source.loadFeatures(c,s,f),s!==this.resolution&&(this.resolution=s,this.refresh())}setDistance(c){this.updateDistance(c,this.minDistance)}setMinDistance(c){this.updateDistance(this.distance,c)}getMinDistance(){return this.minDistance}setSource(c){this.source&&this.source.removeEventListener(G.Z.CHANGE,this.boundRefresh_),this.source=c,c&&c.addEventListener(G.Z.CHANGE,this.boundRefresh_),this.refresh()}refresh(){this.clear(),this.cluster(),this.addFeatures(this.features)}updateDistance(c,s){const f=0===c?0:Math.min(s,c)/c,n=c!==this.distance||this.interpolationRatio!==f;this.distance=c,this.minDistance=s,this.interpolationRatio=f,n&&this.refresh()}cluster(){if(void 0===this.resolution||!this.source)return;const c=(0,S.lJ)(),s=this.distance*this.resolution,f=this.source.getFeatures(),n={};for(let h=0,g=f.length;h<g;h++){const e=f[h];if(!((0,P.sq)(e)in n)){const E=this.geometryFunction(e);if(E){const v=E.getCoordinates();(0,S.HK)(v,c),(0,S.f3)(c,s,c);const x=this.source.getFeaturesInExtent(c).filter(function(w){const O=(0,P.sq)(w);return!(O in n)&&(n[O]=!0,!0)});this.features.push(this.createCluster(x,c))}}}}createCluster(c,s){const f=[0,0];for(let e=c.length-1;e>=0;--e){const E=this.geometryFunction(c[e]);E?(0,U.IH)(f,E.getCoordinates()):c.splice(e,1)}(0,U.bA)(f,1/c.length);const n=(0,S.qg)(s),h=this.interpolationRatio,g=new k.Z([f[0]*(1-h)+n[0]*h,f[1]*(1-h)+n[1]*h]);return this.createCustomCluster_?this.createCustomCluster_(g,c):new D.Z({geometry:g,features:c})}}},9375:(Bt,ot,a)=>{"use strict";a.d(ot,{ZP:()=>v,r6:()=>E});var G=a(3615),D=a(1501),k=a(3094),z=a(3044),U=a(1649),I=a(6887),S=a(5114),P=a(9543),p=a(2716);const u=class d extends U.Z{constructor(w,O,y,R,W,K,nt){const A=w.getExtent(),L=O.getExtent(),b=L?(0,P.Ed)(y,L):y,M=(0,P.qg)(b),C=(0,S.aA)(w,O,M,R),H=new I.Z(w,O,b,A,C*k.m,R),Y=K(H.calculateSourceExtent(),C,W),st=Y?D.Z.IDLE:D.Z.EMPTY,ht=Y?Y.getPixelRatio():1;super(y,R,ht,st),this.targetProj_=O,this.maxSourceExtent_=A,this.triangulation_=H,this.targetResolution_=R,this.targetExtent_=y,this.sourceImage_=Y,this.sourcePixelRatio_=ht,this.interpolate_=nt,this.canvas_=null,this.sourceListenerKey_=null}disposeInternal(){this.state==D.Z.LOADING&&this.unlistenSource_(),super.disposeInternal()}getImage(){return this.canvas_}getProjection(){return this.targetProj_}reproject_(){const w=this.sourceImage_.getState();if(w==D.Z.LOADED){const O=(0,P.dz)(this.targetExtent_)/this.targetResolution_,y=(0,P.Cr)(this.targetExtent_)/this.targetResolution_;this.canvas_=(0,S.sY)(O,y,this.sourcePixelRatio_,this.sourceImage_.getResolution(),this.maxSourceExtent_,this.targetResolution_,this.targetExtent_,this.triangulation_,[{extent:this.sourceImage_.getExtent(),image:this.sourceImage_.getImage()}],0,void 0,this.interpolate_)}this.state=w,this.changed()}load(){if(this.state==D.Z.IDLE){this.state=D.Z.LOADING,this.changed();const w=this.sourceImage_.getState();w==D.Z.LOADED||w==D.Z.ERROR?this.reproject_():(this.sourceListenerKey_=(0,p.oL)(this.sourceImage_,z.Z.CHANGE,function(O){const y=this.sourceImage_.getState();(y==D.Z.LOADED||y==D.Z.ERROR)&&(this.unlistenSource_(),this.reproject_())},this),this.sourceImage_.load())}}unlistenSource_(){(0,p.bN)(this.sourceListenerKey_),this.sourceListenerKey_=null}};var c=a(2673),s=a(513),f=a(9015),n=a(142);class g extends G.ZP{constructor(w,O){super(w),this.image=O}}function E(x,w){x.getImage().src=w}const v=class e extends c.Z{constructor(w){super({attributions:w.attributions,projection:w.projection,state:w.state,interpolate:void 0===w.interpolate||w.interpolate}),this.resolutions_=void 0!==w.resolutions?w.resolutions:null,this.reprojectedImage_=null,this.reprojectedRevision_=0}getResolutions(){return this.resolutions_}setResolutions(w){this.resolutions_=w}findNearestResolution(w){const O=this.getResolutions();return O&&(w=O[(0,n.h7)(O,w,0)]),w}getImage(w,O,y,R){const W=this.getProjection();if(!W||!R||(0,f.OP)(W,R))return W&&(R=W),this.getImageInternal(w,O,y,R);if(this.reprojectedImage_){if(this.reprojectedRevision_==this.getRevision()&&(0,f.OP)(this.reprojectedImage_.getProjection(),R)&&this.reprojectedImage_.getResolution()==O&&(0,P.fS)(this.reprojectedImage_.getExtent(),w))return this.reprojectedImage_;this.reprojectedImage_.dispose(),this.reprojectedImage_=null}return this.reprojectedImage_=new u(W,R,w,O,y,(K,nt,A)=>this.getImageInternal(K,nt,A,W),this.getInterpolate()),this.reprojectedRevision_=this.getRevision(),this.reprojectedImage_}getImageInternal(w,O,y,R){return(0,s.O3)()}handleImageChange(w){const O=w.target;let y;switch(O.getState()){case D.Z.LOADING:this.loading=!0,y="imageloadstart";break;case D.Z.LOADED:this.loading=!1,y="imageloadend";break;case D.Z.ERROR:this.loading=!1,y="imageloaderror";break;default:return}this.hasListener(y)&&this.dispatchEvent(new g(y,O))}}},6819:(Bt,ot,a)=>{"use strict";a.d(ot,{Z:()=>h});var G=a(3044),D=a(9375),k=a(1309),z=a(4910),U=a(6941),I=a(992),S=a(5114),P=a(4331),p=a(7531),d=a(9543),u=a(3842),c=a(9015);const f=[101,101],h=class n extends D.ZP{constructor(e){super({attributions:(e=e||{}).attributions,interpolate:e.interpolate,projection:e.projection,resolutions:e.resolutions}),this.context_=(0,u.E4)(1,1),this.crossOrigin_=void 0!==e.crossOrigin?e.crossOrigin:null,this.url_=e.url,this.imageLoadFunction_=void 0!==e.imageLoadFunction?e.imageLoadFunction:D.r6,this.params_=Object.assign({},e.params),this.v13_=!0,this.updateV13_(),this.serverType_=e.serverType,this.hidpi_=void 0===e.hidpi||e.hidpi,this.image_=null,this.imageSize_=[0,0],this.renderedRevision_=0,this.ratio_=void 0!==e.ratio?e.ratio:1.5}getFeatureInfoUrl(e,E,v,x){if(void 0===this.url_)return;const w=(0,c.U2)(v),O=this.getProjection();O&&O!==w&&(E=(0,S.aA)(O,w,e,E),e=(0,c.vs)(e,w,O));const y=(0,d.p8)(e,E,0,f),R={SERVICE:"WMS",VERSION:z.e,REQUEST:"GetFeatureInfo",FORMAT:"image/png",TRANSPARENT:!0,QUERY_LAYERS:this.params_.LAYERS};Object.assign(R,this.params_,x);const W=(0,P.GW)((e[0]-y[0])/E,4),K=(0,P.GW)((y[3]-e[1])/E,4);return R[this.v13_?"I":"X"]=W,R[this.v13_?"J":"Y"]=K,this.getRequestUrl_(y,f,1,O||w,R)}getLegendUrl(e,E){if(void 0===this.url_)return;const v={SERVICE:"WMS",VERSION:z.e,REQUEST:"GetLegendGraphic",FORMAT:"image/png"};if(void 0===E||void 0===E.LAYER){const x=this.params_.LAYERS;if(Array.isArray(x)&&1!==x.length)return;v.LAYER=x}if(void 0!==e){const x=this.getProjection()?this.getProjection().getMetersPerUnit():1;v.SCALE=e*x/28e-5}return Object.assign(v,E),(0,U.B)(this.url_,v)}getParams(){return this.params_}getImageInternal(e,E,v,x){if(void 0===this.url_)return null;E=this.findNearestResolution(E),1!=v&&(!this.hidpi_||void 0===this.serverType_)&&(v=1);const w=E/v,O=(0,d.qg)(e),y=(0,P.mD)((0,d.dz)(e)/w,4),R=(0,P.mD)((0,d.Cr)(e)/w,4),W=(0,d.p8)(O,w,0,[y,R]),K=(0,P.mD)(this.ratio_*(0,d.dz)(e)/w,4),nt=(0,P.mD)(this.ratio_*(0,d.Cr)(e)/w,4),A=(0,d.p8)(O,w,0,[K,nt]),L=this.image_;if(L&&this.renderedRevision_==this.getRevision()&&L.getResolution()==E&&L.getPixelRatio()==v&&(0,d.r4)(L.getExtent(),W))return L;const b={SERVICE:"WMS",VERSION:z.e,REQUEST:"GetMap",FORMAT:"image/png",TRANSPARENT:!0};Object.assign(b,this.params_),this.imageSize_[0]=(0,P.NM)((0,d.dz)(A)/w,4),this.imageSize_[1]=(0,P.NM)((0,d.Cr)(A)/w,4);const M=this.getRequestUrl_(A,this.imageSize_,v,x,b);return this.image_=new k.Z(A,E,v,M,this.crossOrigin_,this.imageLoadFunction_,this.context_),this.renderedRevision_=this.getRevision(),this.image_.addEventListener(G.Z.CHANGE,this.handleImageChange.bind(this)),this.image_}getImageLoadFunction(){return this.imageLoadFunction_}getRequestUrl_(e,E,v,x,w){if((0,I.h)(void 0!==this.url_,9),w[this.v13_?"CRS":"SRS"]=x.getCode(),"STYLES"in this.params_||(w.STYLES=""),1!=v)switch(this.serverType_){case"geoserver":const R=90*v+.5|0;"FORMAT_OPTIONS"in w?w.FORMAT_OPTIONS+=";dpi:"+R:w.FORMAT_OPTIONS="dpi:"+R;break;case"mapserver":w.MAP_RESOLUTION=90*v;break;case"carmentaserver":case"qgis":w.DPI=90*v;break;default:(0,I.h)(!1,8)}w.WIDTH=E[0],w.HEIGHT=E[1];const O=x.getAxisOrientation();let y;return y=this.v13_&&"ne"==O.substr(0,2)?[e[1],e[0],e[3],e[2]]:e,w.BBOX=y.join(","),(0,U.B)(this.url_,w)}getUrl(){return this.url_}setImageLoadFunction(e){this.image_=null,this.imageLoadFunction_=e,this.changed()}setUrl(e){e!=this.url_&&(this.url_=e,this.image_=null,this.changed())}updateParams(e){Object.assign(this.params_,e),this.updateV13_(),this.image_=null,this.changed()}updateV13_(){this.v13_=(0,p.n)(this.params_.VERSION||z.e,"1.3")>=0}}},7274:(Bt,ot,a)=>{"use strict";a.d(ot,{Z:()=>z});var G=a(6290);const z=class k extends G.Z{constructor(I){let S;S=void 0!==(I=I||{}).attributions?I.attributions:['&#169; <a href="https://www.openstreetmap.org/copyright" target="_blank">OpenStreetMap</a> contributors.'],super({attributions:S,attributionsCollapsible:!1,cacheSize:I.cacheSize,crossOrigin:void 0!==I.crossOrigin?I.crossOrigin:"anonymous",interpolate:I.interpolate,maxZoom:void 0!==I.maxZoom?I.maxZoom:19,opaque:void 0===I.opaque||I.opaque,reprojectionErrorThreshold:I.reprojectionErrorThreshold,tileLoadFunction:I.tileLoadFunction,transition:I.transition,url:void 0!==I.url?I.url:"https://tile.openstreetmap.org/{z}/{x}/{y}.png",wrapX:I.wrapX,zDirection:I.zDirection})}}},524:(Bt,ot,a)=>{"use strict";a.d(ot,{ZP:()=>L});var G=a(6450),D=a(3615),k=a(3044),z=a(443),U=a(6906),I=a(9375),S=a(2673),P=a(993),p=a(2988),d=a(6027),u=a(3842),c=a(7139),s=a(9543),f=a(513);let h,n=!0;try{new ImageData(10,10)}catch{n=!1}function e(b){let M=!0;try{new ImageData(10,10)}catch{M=!1}function C(N,H,it){return M?new ImageData(N,H,it):{data:N,width:H,height:it}}return function(N){const H=N.buffers,it=N.meta,st=N.width,ht=N.height,Tt=H.length,vt=H[0].byteLength;if(N.imageOps){const kt=new Array(Tt);for(let zt=0;zt<Tt;++zt)kt[zt]=C(new Uint8ClampedArray(H[zt]),st,ht);return b(kt,it).data.buffer}const Ct=new Uint8ClampedArray(vt),bt=new Array(Tt),Gt=new Array(Tt);for(let kt=0;kt<Tt;++kt)bt[kt]=new Uint8ClampedArray(H[kt]),Gt[kt]=[0,0,0,0];for(let kt=0;kt<vt;kt+=4){for(let zt=0;zt<Tt;++zt){const ue=bt[zt];Gt[zt][0]=ue[kt],Gt[zt][1]=ue[kt+1],Gt[zt][2]=ue[kt+2],Gt[zt][3]=ue[kt+3]}const ie=b(Gt,it);Ct[kt]=ie[0],Ct[kt+1]=ie[1],Ct[kt+2]=ie[2],Ct[kt+3]=ie[3]}return Ct.buffer}}function E(b,M){const N=Object.keys(b.lib||{}).map(function(it){return"const "+it+" = "+b.lib[it].toString()+";"}).concat(["const __minion__ = ("+e.toString()+")(",b.operation.toString(),");",'self.addEventListener("message", function(event) {',"  const buffer = __minion__(event.data);","  self.postMessage({buffer: buffer, meta: event.data.meta}, [buffer]);","});"]),H=new Worker(typeof Blob>"u"?"data:text/javascript;base64,"+Buffer.from(N.join("\n"),"binary").toString("base64"):URL.createObjectURL(new Blob(N,{type:"text/javascript"})));return H.addEventListener("message",M),H}class x extends G.Z{constructor(M){let C;super(),this._imageOps=!!M.imageOps,C=0===M.threads?0:this._imageOps?1:M.threads||1;const N=new Array(C);if(C)for(let H=0;H<C;++H)N[H]=E(M,this._onWorkerMessage.bind(this,H));else N[0]=function v(b,M){const C=e(b.operation);let N=!1;return{postMessage:function(H){setTimeout(function(){N||M({data:{buffer:C(H),meta:H.meta}})},0)},terminate:function(){N=!0}}}(M,this._onWorkerMessage.bind(this,0));this._workers=N,this._queue=[],this._maxQueueLength=M.queue||1/0,this._running=0,this._dataLookup={},this._job=null}process(M,C,N){this._enqueue({inputs:M,meta:C,callback:N}),this._dispatch()}_enqueue(M){for(this._queue.push(M);this._queue.length>this._maxQueueLength;)this._queue.shift().callback(null,null)}_dispatch(){if(this._running||0===this._queue.length)return;const M=this._queue.shift();this._job=M;const C=M.inputs[0].width,N=M.inputs[0].height,H=M.inputs.map(function(ht){return ht.data.buffer}),it=this._workers.length;if(this._running=it,1===it)return void this._workers[0].postMessage({buffers:H,meta:M.meta,imageOps:this._imageOps,width:C,height:N},H);const st=4*Math.ceil(M.inputs[0].data.length/4/it);for(let ht=0;ht<it;++ht){const Tt=ht*st,vt=[];for(let Ct=0,bt=H.length;Ct<bt;++Ct)vt.push(H[Ct].slice(Tt,Tt+st));this._workers[ht].postMessage({buffers:vt,meta:M.meta,imageOps:this._imageOps,width:C,height:N},vt)}}_onWorkerMessage(M,C){this.disposed||(this._dataLookup[M]=C.data,--this._running,0===this._running&&this._resolveJob())}_resolveJob(){const M=this._job,C=this._workers.length;let N,H;if(1===C)N=new Uint8ClampedArray(this._dataLookup[0].buffer),H=this._dataLookup[0].meta;else{const it=M.inputs[0].data.length;N=new Uint8ClampedArray(it),H=new Array(C);const Y=4*Math.ceil(it/4/C);for(let st=0;st<C;++st){const Tt=st*Y;N.set(new Uint8ClampedArray(this._dataLookup[st].buffer),Tt),H[st]=this._dataLookup[st].meta}}this._job=null,this._dataLookup={},M.callback(null,function g(b,M,C){if(n)return new ImageData(b,M,C);h||(h=document.createElement("canvas").getContext("2d"));const N=h.createImageData(M,C);return N.data.set(b),N}(N,M.inputs[0].width,M.inputs[0].height),H),this._dispatch()}disposeInternal(){for(let M=0;M<this._workers.length;++M)this._workers[M].terminate();this._workers.length=0}}class O extends D.ZP{constructor(M,C,N){super(M),this.extent=C.extent,this.resolution=C.viewState.resolution/C.pixelRatio,this.data=N}}let R=null;function W(b,M){const C=b.getRenderer();if(!C)throw new Error("Unsupported layer type: "+b);if(!C.prepareFrame(M))return null;const N=M.size[0],H=M.size[1];if(0===N||0===H)return null;const it=C.renderFrame(M,null);let Y;if(it instanceof HTMLCanvasElement)Y=it;else{if(it&&(Y=it.firstElementChild),!(Y instanceof HTMLCanvasElement))throw new Error("Unsupported rendered element: "+Y);if(Y.width===N&&Y.height===H)return Y.getContext("2d").getImageData(0,0,N,H)}if(R){const st=R.canvas;st.width!==N||st.height!==H?R=(0,u.E4)(N,H,void 0,{willReadFrequently:!0}):R.clearRect(0,0,N,H)}else R=(0,u.E4)(N,H,void 0,{willReadFrequently:!0});return R.drawImage(Y,0,0,N,H),R.getImageData(0,0,N,H)}function A(b){let M;return b instanceof S.Z?b instanceof d.Z?M=new P.Z({source:b}):b instanceof I.ZP&&(M=new U.Z({source:b})):M=b,M}const L=class y extends I.ZP{constructor(M){super({projection:null}),this.processor_=null,this.operationType_=void 0!==M.operationType?M.operationType:"pixel",this.threads_=void 0!==M.threads?M.threads:1,this.layers_=function nt(b){const M=b.length,C=new Array(M);for(let N=0;N<M;++N)C[N]=A(b[N]);return C}(M.sources);const C=this.changed.bind(this);for(let N=0,H=this.layers_.length;N<H;++N)this.layers_[N].addEventListener(k.Z.CHANGE,C);var b;this.useResolutions_=null!==M.resolutions,this.tileQueue_=new p.Z(function(){return 1},this.changed.bind(this)),this.renderedImageCanvas_=null,this.frameState_={animate:!1,coordinateToPixelTransform:(0,c.Ue)(),declutterTree:null,extent:null,index:0,layerIndex:0,layerStatesArray:(b=this.layers_,b.map(function(M){return M.getLayerState()})),pixelRatio:1,pixelToCoordinateTransform:(0,c.Ue)(),postRenderFunctions:[],size:[0,0],tileQueue:this.tileQueue_,time:Date.now(),usedTiles:{},viewState:{rotation:0},viewHints:[],wantedTiles:{},mapId:(0,f.sq)(this),renderTargets:{}},this.setAttributions(function(N){const H=[];for(let it=0,Y=M.sources.length;it<Y;++it){const st=M.sources[it],ht=st instanceof S.Z?st:st.getSource();if(!ht)continue;const Tt=ht.getAttributions();if("function"==typeof Tt){const vt=Tt(N);H.push.apply(H,vt)}}return 0!==H.length?H:null}),void 0!==M.operation&&this.setOperation(M.operation,M.lib)}setOperation(M,C){this.processor_&&this.processor_.dispose(),this.processor_=new x({operation:M,imageOps:"image"===this.operationType_,queue:1,lib:C,threads:this.threads_}),this.changed()}updateFrameState_(M,C,N){const H=Object.assign({},this.frameState_);H.viewState=Object.assign({},H.viewState);const it=(0,s.qg)(M);H.size[0]=Math.ceil((0,s.dz)(M)/C),H.size[1]=Math.ceil((0,s.Cr)(M)/C),H.extent=[it[0]-H.size[0]*C/2,it[1]-H.size[1]*C/2,it[0]+H.size[0]*C/2,it[1]+H.size[1]*C/2],H.time=Date.now();const Y=H.viewState;return Y.center=it,Y.projection=N,Y.resolution=C,H}allSourcesReady_(){let C,M=!0;for(let N=0,H=this.layers_.length;N<H;++N)if(C=this.layers_[N].getSource(),!C||"ready"!==C.getState()){M=!1;break}return M}getImage(M,C,N,H){if(!this.allSourcesReady_())return null;C=this.findNearestResolution(C);const it=this.updateFrameState_(M,C,H);if(this.requestedFrameState_=it,this.renderedImageCanvas_){const Y=this.renderedImageCanvas_.getResolution(),st=this.renderedImageCanvas_.getExtent();(C!==Y||!(0,s.fS)(it.extent,st))&&(this.renderedImageCanvas_=null)}return(!this.renderedImageCanvas_||this.getRevision()!==this.renderedRevision_)&&this.processSources_(),it.tileQueue.loadMoreTiles(16,16),it.animate&&requestAnimationFrame(this.changed.bind(this)),this.renderedImageCanvas_}processSources_(){const M=this.requestedFrameState_,C=this.layers_.length,N=new Array(C);for(let it=0;it<C;++it){M.layerIndex=it,M.renderTargets={};const Y=W(this.layers_[it],M);if(!Y)return;N[it]=Y}const H={};this.dispatchEvent(new O("beforeoperations",M,H)),this.processor_.process(N,H,this.onWorkerComplete_.bind(this,M))}onWorkerComplete_(M,C,N,H){if(C||!N)return;const it=M.extent,Y=M.viewState.resolution;if(Y!==this.requestedFrameState_.viewState.resolution||!(0,s.fS)(it,this.requestedFrameState_.extent))return;let st;if(this.renderedImageCanvas_)st=this.renderedImageCanvas_.getImage().getContext("2d");else{const ht=Math.round((0,s.dz)(it)/Y),Tt=Math.round((0,s.Cr)(it)/Y);st=(0,u.E4)(ht,Tt),this.renderedImageCanvas_=new z.Z(it,Y,1,st.canvas)}st.putImageData(N,0,0),this.changed(),this.renderedRevision_=this.getRevision(),this.dispatchEvent(new O("afteroperations",M,H)),M.animate&&requestAnimationFrame(this.changed.bind(this))}getResolutions(M){if(!this.useResolutions_)return null;let C=super.getResolutions();if(!C)for(let N=0,H=this.layers_.length;N<H&&(C=this.layers_[N].getSource().getResolutions(M),!C);++N);return C}disposeInternal(){this.processor_&&this.processor_.dispose(),super.disposeInternal()}}},2673:(Bt,ot,a)=>{"use strict";a.d(ot,{Z:()=>U});var G=a(4115),D=a(9015);function z(I){return I?Array.isArray(I)?function(S){return I}:"function"==typeof I?I:function(S){return[I]}:null}const U=class k extends G.Z{constructor(S){super(),this.projection=(0,D.U2)(S.projection),this.attributions_=z(S.attributions),this.attributionsCollapsible_=void 0===S.attributionsCollapsible||S.attributionsCollapsible,this.loading=!1,this.state_=void 0!==S.state?S.state:"ready",this.wrapX_=void 0!==S.wrapX&&S.wrapX,this.interpolate_=!!S.interpolate,this.viewResolver=null,this.viewRejector=null;const P=this;this.viewPromise_=new Promise(function(p,d){P.viewResolver=p,P.viewRejector=d})}getAttributions(){return this.attributions_}getAttributionsCollapsible(){return this.attributionsCollapsible_}getProjection(){return this.projection}getResolutions(S){return null}getView(){return this.viewPromise_}getState(){return this.state_}getWrapX(){return this.wrapX_}getInterpolate(){return this.interpolate_}refresh(){this.changed()}setAttributions(S){this.attributions_=z(S),this.changed()}setState(S){this.state_=S,this.changed()}}},6027:(Bt,ot,a)=>{"use strict";a.d(ot,{Z:()=>s,s:()=>c});var G=a(3615),D=a(2673),k=a(7450),z=a(4700),U=a(513),I=a(992),S=a(9015),P=a(5474),p=a(2705),d=a(931);class c extends G.ZP{constructor(n,h){super(n),this.tile=h}}const s=class u extends D.Z{constructor(n){super({attributions:n.attributions,attributionsCollapsible:n.attributionsCollapsible,projection:n.projection,state:n.state,wrapX:n.wrapX,interpolate:n.interpolate}),this.opaque_=void 0!==n.opaque&&n.opaque,this.tilePixelRatio_=void 0!==n.tilePixelRatio?n.tilePixelRatio:1,this.tileGrid=void 0!==n.tileGrid?n.tileGrid:null,this.tileGrid&&(0,d.Pq)(this.tileGrid.getTileSize(this.tileGrid.getMinZoom()),[256,256]),this.tileCache=new k.Z(n.cacheSize||0),this.tmpSize=[0,0],this.key_=n.key||"",this.tileOptions={transition:n.transition,interpolate:n.interpolate},this.zDirection=n.zDirection?n.zDirection:0}canExpireCache(){return this.tileCache.canExpireCache()}expireCache(n,h){const g=this.getTileCacheForProjection(n);g&&g.expireCache(h)}forEachLoadedTile(n,h,g,e){const E=this.getTileCacheForProjection(n);if(!E)return!1;let x,w,O,v=!0;for(let y=g.minX;y<=g.maxX;++y)for(let R=g.minY;R<=g.maxY;++R)w=(0,P.lg)(h,y,R),O=!1,E.containsKey(w)&&(x=E.get(w),O=x.getState()===z.Z.LOADED,O&&(O=!1!==e(x))),O||(v=!1);return v}getGutterForProjection(n){return 0}getKey(){return this.key_}setKey(n){this.key_!==n&&(this.key_=n,this.changed())}getOpaque(n){return this.opaque_}getResolutions(n){const h=n?this.getTileGridForProjection(n):this.tileGrid;return h?h.getResolutions():null}getTile(n,h,g,e,E){return(0,U.O3)()}getTileGrid(){return this.tileGrid}getTileGridForProjection(n){return this.tileGrid?this.tileGrid:(0,p.X$)(n)}getTileCacheForProjection(n){const h=this.getProjection();return(0,I.h)(null===h||(0,S.OP)(h,n),68),this.tileCache}getTilePixelRatio(n){return this.tilePixelRatio_}getTilePixelSize(n,h,g){const e=this.getTileGridForProjection(g),E=this.getTilePixelRatio(h),v=(0,d.Pq)(e.getTileSize(n),this.tmpSize);return 1==E?v:(0,d.bA)(v,E,this.tmpSize)}getTileCoordForTileUrlFunction(n,h){h=void 0!==h?h:this.getProjection();const g=this.getTileGridForProjection(h);return this.getWrapX()&&h.isGlobal()&&(n=(0,p.Cf)(g,n,h)),(0,P.tE)(n,g)?n:null}clear(){this.tileCache.clear()}refresh(){this.clear(),super.refresh()}updateCacheSize(n,h){const g=this.getTileCacheForProjection(h);n>g.highWaterMark&&(g.highWaterMark=n)}useTile(n,h,g,e){}}},3242:(Bt,ot,a)=>{"use strict";a.d(ot,{Z:()=>s});var G=a(3044),D=a(8879),k=a(4353),z=a(7450),U=a(4700),I=a(886),S=a(9015),P=a(5474),p=a(2705),d=a(513);function c(f,n){f.getImage().src=n}const s=class u extends I.Z{constructor(n){super({attributions:n.attributions,cacheSize:n.cacheSize,opaque:n.opaque,projection:n.projection,state:n.state,tileGrid:n.tileGrid,tileLoadFunction:n.tileLoadFunction?n.tileLoadFunction:c,tilePixelRatio:n.tilePixelRatio,tileUrlFunction:n.tileUrlFunction,url:n.url,urls:n.urls,wrapX:n.wrapX,transition:n.transition,interpolate:void 0===n.interpolate||n.interpolate,key:n.key,attributionsCollapsible:n.attributionsCollapsible,zDirection:n.zDirection}),this.crossOrigin=void 0!==n.crossOrigin?n.crossOrigin:null,this.tileClass=void 0!==n.tileClass?n.tileClass:D.Z,this.tileCacheForProjection={},this.tileGridForProjection={},this.reprojectionErrorThreshold_=n.reprojectionErrorThreshold,this.renderReprojectionEdges_=!1}canExpireCache(){if(this.tileCache.canExpireCache())return!0;for(const n in this.tileCacheForProjection)if(this.tileCacheForProjection[n].canExpireCache())return!0;return!1}expireCache(n,h){const g=this.getTileCacheForProjection(n);this.tileCache.expireCache(this.tileCache==g?h:{});for(const e in this.tileCacheForProjection){const E=this.tileCacheForProjection[e];E.expireCache(E==g?h:{})}}getGutterForProjection(n){return this.getProjection()&&n&&!(0,S.OP)(this.getProjection(),n)?0:this.getGutter()}getGutter(){return 0}getKey(){let n=super.getKey();return this.getInterpolate()||(n+=":disable-interpolation"),n}getOpaque(n){return!(this.getProjection()&&n&&!(0,S.OP)(this.getProjection(),n))&&super.getOpaque(n)}getTileGridForProjection(n){const h=this.getProjection();if(this.tileGrid&&(!h||(0,S.OP)(h,n)))return this.tileGrid;const g=(0,d.sq)(n);return g in this.tileGridForProjection||(this.tileGridForProjection[g]=(0,p.X$)(n)),this.tileGridForProjection[g]}getTileCacheForProjection(n){const h=this.getProjection();if(!h||(0,S.OP)(h,n))return this.tileCache;const g=(0,d.sq)(n);return g in this.tileCacheForProjection||(this.tileCacheForProjection[g]=new z.Z(this.tileCache.highWaterMark)),this.tileCacheForProjection[g]}createTile_(n,h,g,e,E,v){const x=[n,h,g],w=this.getTileCoordForTileUrlFunction(x,E),O=w?this.tileUrlFunction(w,e,E):void 0,y=new this.tileClass(x,void 0!==O?U.Z.IDLE:U.Z.EMPTY,void 0!==O?O:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return y.key=v,y.addEventListener(G.Z.CHANGE,this.handleTileChange.bind(this)),y}getTile(n,h,g,e,E){const v=this.getProjection();if(!v||!E||(0,S.OP)(v,E))return this.getTileInternal(n,h,g,e,v||E);const x=this.getTileCacheForProjection(E),w=[n,h,g];let O;const y=(0,P.km)(w);x.containsKey(y)&&(O=x.get(y));const R=this.getKey();if(O&&O.key==R)return O;const W=this.getTileGridForProjection(v),K=this.getTileGridForProjection(E),nt=this.getTileCoordForTileUrlFunction(w,E),A=new k.Z(v,W,E,K,w,nt,this.getTilePixelRatio(e),this.getGutter(),(L,b,M,C)=>this.getTileInternal(L,b,M,C,v),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_,this.getInterpolate());return A.key=R,O?(A.interimTile=O,A.refreshInterimChain(),x.replace(y,A)):x.set(y,A),A}getTileInternal(n,h,g,e,E){let v=null;const x=(0,P.lg)(n,h,g),w=this.getKey();if(this.tileCache.containsKey(x)){if(v=this.tileCache.get(x),v.key!=w){const O=v;v=this.createTile_(n,h,g,e,E,w),v.interimTile=O.getState()==U.Z.IDLE?O.interimTile:O,v.refreshInterimChain(),this.tileCache.replace(x,v)}}else v=this.createTile_(n,h,g,e,E,w),this.tileCache.set(x,v);return v}setRenderReprojectionEdges(n){if(this.renderReprojectionEdges_!=n){this.renderReprojectionEdges_=n;for(const h in this.tileCacheForProjection)this.tileCacheForProjection[h].clear();this.changed()}}setTileGridForProjection(n,h){const g=(0,S.U2)(n);if(g){const e=(0,d.sq)(g);e in this.tileGridForProjection||(this.tileGridForProjection[e]=h)}}clear(){super.clear();for(const n in this.tileCacheForProjection)this.tileCacheForProjection[n].clear()}}},3298:(Bt,ot,a)=>{"use strict";a.d(ot,{Z:()=>s});var G=a(3242),D=a(4910),k=a(6941),z=a(992),U=a(9543),I=a(931),S=a(5114),P=a(7531),p=a(9015),d=a(4331),u=a(5474);const s=class c extends G.Z{constructor(n){n=n||{};const h=Object.assign({},n.params);super({attributions:n.attributions,attributionsCollapsible:n.attributionsCollapsible,cacheSize:n.cacheSize,crossOrigin:n.crossOrigin,interpolate:n.interpolate,opaque:!(!("TRANSPARENT"in h)||h.TRANSPARENT),projection:n.projection,reprojectionErrorThreshold:n.reprojectionErrorThreshold,tileClass:n.tileClass,tileGrid:n.tileGrid,tileLoadFunction:n.tileLoadFunction,url:n.url,urls:n.urls,wrapX:void 0===n.wrapX||n.wrapX,transition:n.transition,zDirection:n.zDirection}),this.gutter_=void 0!==n.gutter?n.gutter:0,this.params_=h,this.v13_=!0,this.serverType_=n.serverType,this.hidpi_=void 0===n.hidpi||n.hidpi,this.tmpExtent_=(0,U.lJ)(),this.updateV13_(),this.setKey(this.getKeyForParams_())}getFeatureInfoUrl(n,h,g,e){const E=(0,p.U2)(g),v=this.getProjection();let x=this.getTileGrid();x||(x=this.getTileGridForProjection(E));const w=x.getZForResolution(h,this.zDirection),O=x.getTileCoordForCoordAndZ(n,w);if(x.getResolutions().length<=O[0])return;let y=x.getResolution(O[0]),R=x.getTileCoordExtent(O,this.tmpExtent_),W=(0,I.Pq)(x.getTileSize(O[0]),this.tmpSize);const K=this.gutter_;0!==K&&(W=(0,I.f3)(W,K,this.tmpSize),R=(0,U.f3)(R,y*K,R)),v&&v!==E&&(y=(0,S.aA)(v,E,n,y),R=(0,p.$A)(R,E,v),n=(0,p.vs)(n,E,v));const nt={SERVICE:"WMS",VERSION:D.e,REQUEST:"GetFeatureInfo",FORMAT:"image/png",TRANSPARENT:!0,QUERY_LAYERS:this.params_.LAYERS};Object.assign(nt,this.params_,e);const A=Math.floor((n[0]-R[0])/y),L=Math.floor((R[3]-n[1])/y);return nt[this.v13_?"I":"X"]=A,nt[this.v13_?"J":"Y"]=L,this.getRequestUrl_(O,W,R,1,v||E,nt)}getLegendUrl(n,h){if(void 0===this.urls[0])return;const g={SERVICE:"WMS",VERSION:D.e,REQUEST:"GetLegendGraphic",FORMAT:"image/png"};if(void 0===h||void 0===h.LAYER){const e=this.params_.LAYERS;if(Array.isArray(e)&&1!==e.length)return;g.LAYER=e}if(void 0!==n){const e=this.getProjection()?this.getProjection().getMetersPerUnit():1;g.SCALE=n*e/28e-5}return Object.assign(g,h),(0,k.B)(this.urls[0],g)}getGutter(){return this.gutter_}getParams(){return this.params_}getRequestUrl_(n,h,g,e,E,v){const x=this.urls;if(!x)return;if(v.WIDTH=h[0],v.HEIGHT=h[1],v[this.v13_?"CRS":"SRS"]=E.getCode(),"STYLES"in this.params_||(v.STYLES=""),1!=e)switch(this.serverType_){case"geoserver":const R=90*e+.5|0;"FORMAT_OPTIONS"in v?v.FORMAT_OPTIONS+=";dpi:"+R:v.FORMAT_OPTIONS="dpi:"+R;break;case"mapserver":v.MAP_RESOLUTION=90*e;break;case"carmentaserver":case"qgis":v.DPI=90*e;break;default:(0,z.h)(!1,52)}const w=E.getAxisOrientation(),O=g;if(this.v13_&&"ne"==w.substr(0,2)){let R;R=g[0],O[0]=g[1],O[1]=R,R=g[2],O[2]=g[3],O[3]=R}let y;return v.BBOX=O.join(","),y=1==x.length?x[0]:x[(0,d.$W)((0,u.vp)(n),x.length)],(0,k.B)(y,v)}getTilePixelRatio(n){return this.hidpi_&&void 0!==this.serverType_?n:1}getKeyForParams_(){let n=0;const h=[];for(const g in this.params_)h[n++]=g+"-"+this.params_[g];return h.join("/")}updateParams(n){Object.assign(this.params_,n),this.updateV13_(),this.setKey(this.getKeyForParams_())}updateV13_(){this.v13_=(0,P.n)(this.params_.VERSION||D.e,"1.3")>=0}tileUrlFunction(n,h,g){let e=this.getTileGrid();if(e||(e=this.getTileGridForProjection(g)),e.getResolutions().length<=n[0])return;1!=h&&(!this.hidpi_||void 0===this.serverType_)&&(h=1);const E=e.getResolution(n[0]);let v=e.getTileCoordExtent(n,this.tmpExtent_),x=(0,I.Pq)(e.getTileSize(n[0]),this.tmpSize);const w=this.gutter_;0!==w&&(x=(0,I.f3)(x,w,this.tmpSize),v=(0,U.f3)(v,E*w,v)),1!=h&&(x=(0,I.bA)(x,h,this.tmpSize));const O={SERVICE:"WMS",VERSION:D.e,REQUEST:"GetMap",FORMAT:"image/png",TRANSPARENT:!0};return Object.assign(O,this.params_),this.getRequestUrl_(n,x,v,h,g,O)}}},886:(Bt,ot,a)=>{"use strict";a.d(ot,{Z:()=>P});var D=a(6027),k=a(4700),z=a(5809),U=a(5474),I=a(513);class S extends D.Z{constructor(d){super({attributions:d.attributions,cacheSize:d.cacheSize,opaque:d.opaque,projection:d.projection,state:d.state,tileGrid:d.tileGrid,tilePixelRatio:d.tilePixelRatio,wrapX:d.wrapX,transition:d.transition,interpolate:d.interpolate,key:d.key,attributionsCollapsible:d.attributionsCollapsible,zDirection:d.zDirection}),this.generateTileUrlFunction_=this.tileUrlFunction===S.prototype.tileUrlFunction,this.tileLoadFunction=d.tileLoadFunction,d.tileUrlFunction&&(this.tileUrlFunction=d.tileUrlFunction),this.urls=null,d.urls?this.setUrls(d.urls):d.url&&this.setUrl(d.url),this.tileLoadingKeys_={}}getTileLoadFunction(){return this.tileLoadFunction}getTileUrlFunction(){return Object.getPrototypeOf(this).tileUrlFunction===this.tileUrlFunction?this.tileUrlFunction.bind(this):this.tileUrlFunction}getUrls(){return this.urls}handleTileChange(d){const u=d.target,c=(0,I.sq)(u),s=u.getState();let f;s==k.Z.LOADING?(this.tileLoadingKeys_[c]=!0,f="tileloadstart"):c in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[c],f=s==k.Z.ERROR?"tileloaderror":s==k.Z.LOADED?"tileloadend":void 0),null!=f&&this.dispatchEvent(new D.s(f,u))}setTileLoadFunction(d){this.tileCache.clear(),this.tileLoadFunction=d,this.changed()}setTileUrlFunction(d,u){this.tileUrlFunction=d,this.tileCache.pruneExceptNewestZ(),typeof u<"u"?this.setKey(u):this.changed()}setUrl(d){const u=(0,z.Gk)(d);this.urls=u,this.setUrls(u)}setUrls(d){this.urls=d;const u=d.join("\n");this.generateTileUrlFunction_?this.setTileUrlFunction((0,z.uR)(d,this.tileGrid),u):this.setKey(u)}tileUrlFunction(d,u,c){}useTile(d,u,c){const s=(0,U.lg)(d,u,c);this.tileCache.containsKey(s)&&this.tileCache.get(s)}}const P=S},3149:(Bt,ot,a)=>{"use strict";a.d(ot,{Z:()=>w});var G=a(9573),D=a(448),k=a(3615),z=a(3044),U=a(8296),I=a(3036),S=a(9543),P=a(513),p=a(9306);const u=class d{constructor(y){this.rbush_=new I(y),this.items_={}}insert(y,R){const W={minX:y[0],minY:y[1],maxX:y[2],maxY:y[3],value:R};this.rbush_.insert(W),this.items_[(0,P.sq)(R)]=W}load(y,R){const W=new Array(R.length);for(let K=0,nt=R.length;K<nt;K++){const A=y[K],L=R[K],b={minX:A[0],minY:A[1],maxX:A[2],maxY:A[3],value:L};W[K]=b,this.items_[(0,P.sq)(L)]=b}this.rbush_.load(W)}remove(y){const R=(0,P.sq)(y),W=this.items_[R];return delete this.items_[R],null!==this.rbush_.remove(W)}update(y,R){const W=this.items_[(0,P.sq)(R)];(0,S.fS)([W.minX,W.minY,W.maxX,W.maxY],y)||(this.remove(R),this.insert(y,R))}getAll(){return this.rbush_.all().map(function(R){return R.value})}getInExtent(y){return this.rbush_.search({minX:y[0],minY:y[1],maxX:y[2],maxY:y[3]}).map(function(K){return K.value})}forEach(y){return this.forEach_(this.getAll(),y)}forEachInExtent(y,R){return this.forEach_(this.getInExtent(y),R)}forEach_(y,R){let W;for(let K=0,nt=y.length;K<nt;K++)if(W=R(y[K]),W)return W;return W}isEmpty(){return(0,p.x)(this.items_)}clear(){this.rbush_.clear(),this.items_={}}getExtent(y){const R=this.rbush_.toJSON();return(0,S.T9)(R.minX,R.minY,R.maxX,R.maxY,y)}concat(y){this.rbush_.load(y.rbush_.all());for(const R in y.items_)this.items_[R]=y.items_[R]}};var c=a(2673),s=a(8051),f=a(1334),n=a(8742),h=a(992),g=a(142),e=a(2716),E=a(75);class v extends k.ZP{constructor(y,R,W){super(y),this.feature=R,this.features=W}}const w=class x extends c.Z{constructor(y){super({attributions:(y=y||{}).attributions,interpolate:!0,projection:void 0,state:"ready",wrapX:void 0===y.wrapX||y.wrapX}),this.loader_=f.Zn,this.format_=y.format,this.overlaps_=void 0===y.overlaps||y.overlaps,this.url_=y.url,void 0!==y.loader?this.loader_=y.loader:void 0!==this.url_&&((0,h.h)(this.format_,7),this.loader_=(0,E.Be)(this.url_,this.format_)),this.strategy_=void 0!==y.strategy?y.strategy:n.$6;const R=void 0===y.useSpatialIndex||y.useSpatialIndex;let W,K;this.featuresRtree_=R?new u:null,this.loadedExtentsRtree_=new u,this.loadingExtentsCount_=0,this.nullGeometryFeatures_={},this.idIndex_={},this.uidIndex_={},this.featureChangeKeys_={},this.featuresCollection_=null,Array.isArray(y.features)?K=y.features:y.features&&(W=y.features,K=W.getArray()),!R&&void 0===W&&(W=new G.Z(K)),void 0!==K&&this.addFeaturesInternal(K),void 0!==W&&this.bindFeaturesCollection_(W)}addFeature(y){this.addFeatureInternal(y),this.changed()}addFeatureInternal(y){const R=(0,P.sq)(y);if(!this.addToIndex_(R,y))return void(this.featuresCollection_&&this.featuresCollection_.remove(y));this.setupChangeEvents_(R,y);const W=y.getGeometry();if(W){const K=W.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(K,y)}else this.nullGeometryFeatures_[R]=y;this.dispatchEvent(new v(s.Z.ADDFEATURE,y))}setupChangeEvents_(y,R){this.featureChangeKeys_[y]=[(0,e.oL)(R,z.Z.CHANGE,this.handleFeatureChange_,this),(0,e.oL)(R,U.Z.PROPERTYCHANGE,this.handleFeatureChange_,this)]}addToIndex_(y,R){let W=!0;const K=R.getId();return void 0!==K&&(K.toString()in this.idIndex_?W=!1:this.idIndex_[K.toString()]=R),W&&((0,h.h)(!(y in this.uidIndex_),30),this.uidIndex_[y]=R),W}addFeatures(y){this.addFeaturesInternal(y),this.changed()}addFeaturesInternal(y){const R=[],W=[],K=[];for(let nt=0,A=y.length;nt<A;nt++){const L=y[nt],b=(0,P.sq)(L);this.addToIndex_(b,L)&&W.push(L)}for(let nt=0,A=W.length;nt<A;nt++){const L=W[nt],b=(0,P.sq)(L);this.setupChangeEvents_(b,L);const M=L.getGeometry();if(M){const C=M.getExtent();R.push(C),K.push(L)}else this.nullGeometryFeatures_[b]=L}if(this.featuresRtree_&&this.featuresRtree_.load(R,K),this.hasListener(s.Z.ADDFEATURE))for(let nt=0,A=W.length;nt<A;nt++)this.dispatchEvent(new v(s.Z.ADDFEATURE,W[nt]))}bindFeaturesCollection_(y){let R=!1;this.addEventListener(s.Z.ADDFEATURE,function(W){R||(R=!0,y.push(W.feature),R=!1)}),this.addEventListener(s.Z.REMOVEFEATURE,function(W){R||(R=!0,y.remove(W.feature),R=!1)}),y.addEventListener(D.Z.ADD,W=>{R||(R=!0,this.addFeature(W.element),R=!1)}),y.addEventListener(D.Z.REMOVE,W=>{R||(R=!0,this.removeFeature(W.element),R=!1)}),this.featuresCollection_=y}clear(y){if(y){for(const W in this.featureChangeKeys_)this.featureChangeKeys_[W].forEach(e.bN);this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.uidIndex_={})}else if(this.featuresRtree_){this.featuresRtree_.forEach(K=>{this.removeFeatureInternal(K)});for(const K in this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[K])}this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.nullGeometryFeatures_={};const R=new v(s.Z.CLEAR);this.dispatchEvent(R),this.changed()}forEachFeature(y){if(this.featuresRtree_)return this.featuresRtree_.forEach(y);this.featuresCollection_&&this.featuresCollection_.forEach(y)}forEachFeatureAtCoordinateDirect(y,R){return this.forEachFeatureInExtent([y[0],y[1],y[0],y[1]],function(K){if(K.getGeometry().intersectsCoordinate(y))return R(K)})}forEachFeatureInExtent(y,R){if(this.featuresRtree_)return this.featuresRtree_.forEachInExtent(y,R);this.featuresCollection_&&this.featuresCollection_.forEach(R)}forEachFeatureIntersectingExtent(y,R){return this.forEachFeatureInExtent(y,function(W){if(W.getGeometry().intersectsExtent(y)){const nt=R(W);if(nt)return nt}})}getFeaturesCollection(){return this.featuresCollection_}getFeatures(){let y;return this.featuresCollection_?y=this.featuresCollection_.getArray().slice(0):this.featuresRtree_&&(y=this.featuresRtree_.getAll(),(0,p.x)(this.nullGeometryFeatures_)||(0,g.l7)(y,Object.values(this.nullGeometryFeatures_))),y}getFeaturesAtCoordinate(y){const R=[];return this.forEachFeatureAtCoordinateDirect(y,function(W){R.push(W)}),R}getFeaturesInExtent(y,R){if(this.featuresRtree_){if(!(R&&R.canWrapX()&&this.getWrapX()))return this.featuresRtree_.getInExtent(y);const K=(0,S.MV)(y,R);return[].concat(...K.map(nt=>this.featuresRtree_.getInExtent(nt)))}return this.featuresCollection_?this.featuresCollection_.getArray().slice(0):[]}getClosestFeatureToCoordinate(y,R){const W=y[0],K=y[1];let nt=null;const A=[NaN,NaN];let L=1/0;const b=[-1/0,-1/0,1/0,1/0];return R=R||f.uX,this.featuresRtree_.forEachInExtent(b,function(M){if(R(M)){const C=M.getGeometry(),N=L;if(L=C.closestPointXY(W,K,A,L),L<N){nt=M;const H=Math.sqrt(L);b[0]=W-H,b[1]=K-H,b[2]=W+H,b[3]=K+H}}}),nt}getExtent(y){return this.featuresRtree_.getExtent(y)}getFeatureById(y){const R=this.idIndex_[y.toString()];return void 0!==R?R:null}getFeatureByUid(y){const R=this.uidIndex_[y];return void 0!==R?R:null}getFormat(){return this.format_}getOverlaps(){return this.overlaps_}getUrl(){return this.url_}handleFeatureChange_(y){const R=y.target,W=(0,P.sq)(R),K=R.getGeometry();if(K){const A=K.getExtent();W in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[W],this.featuresRtree_&&this.featuresRtree_.insert(A,R)):this.featuresRtree_&&this.featuresRtree_.update(A,R)}else W in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(R),this.nullGeometryFeatures_[W]=R);const nt=R.getId();if(void 0!==nt){const A=nt.toString();this.idIndex_[A]!==R&&(this.removeFromIdIndex_(R),this.idIndex_[A]=R)}else this.removeFromIdIndex_(R),this.uidIndex_[W]=R;this.changed(),this.dispatchEvent(new v(s.Z.CHANGEFEATURE,R))}hasFeature(y){const R=y.getId();return void 0!==R?R in this.idIndex_:(0,P.sq)(y)in this.uidIndex_}isEmpty(){return this.featuresRtree_?this.featuresRtree_.isEmpty()&&(0,p.x)(this.nullGeometryFeatures_):!this.featuresCollection_||0===this.featuresCollection_.getLength()}loadFeatures(y,R,W){const K=this.loadedExtentsRtree_,nt=this.strategy_(y,R,W);for(let A=0,L=nt.length;A<L;++A){const b=nt[A];K.forEachInExtent(b,function(C){return(0,S.r4)(C.extent,b)})||(++this.loadingExtentsCount_,this.dispatchEvent(new v(s.Z.FEATURESLOADSTART)),this.loader_.call(this,b,R,W,C=>{--this.loadingExtentsCount_,this.dispatchEvent(new v(s.Z.FEATURESLOADEND,void 0,C))},()=>{--this.loadingExtentsCount_,this.dispatchEvent(new v(s.Z.FEATURESLOADERROR))}),K.insert(b,{extent:b.slice()}))}this.loading=!(this.loader_.length<4)&&this.loadingExtentsCount_>0}refresh(){this.clear(!0),this.loadedExtentsRtree_.clear(),super.refresh()}removeLoadedExtent(y){const R=this.loadedExtentsRtree_;let W;R.forEachInExtent(y,function(K){if((0,S.fS)(K.extent,y))return W=K,!0}),W&&R.remove(W)}removeFeature(y){if(!y)return;const R=(0,P.sq)(y);R in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[R]:this.featuresRtree_&&this.featuresRtree_.remove(y),this.removeFeatureInternal(y)&&this.changed()}removeFeatureInternal(y){const R=(0,P.sq)(y),W=this.featureChangeKeys_[R];if(!W)return;W.forEach(e.bN),delete this.featureChangeKeys_[R];const K=y.getId();return void 0!==K&&delete this.idIndex_[K.toString()],delete this.uidIndex_[R],this.dispatchEvent(new v(s.Z.REMOVEFEATURE,y)),y}removeFromIdIndex_(y){let R=!1;for(const W in this.idIndex_)if(this.idIndex_[W]===y){delete this.idIndex_[W],R=!0;break}return R}setLoader(y){this.loader_=y}setUrl(y){(0,h.h)(this.format_,7),this.url_=y,this.setLoader((0,E.Be)(y,this.format_))}}},8051:(Bt,ot,a)=>{"use strict";a.d(ot,{Z:()=>G});const G={ADDFEATURE:"addfeature",CHANGEFEATURE:"changefeature",CLEAR:"clear",REMOVEFEATURE:"removefeature",FEATURESLOADSTART:"featuresloadstart",FEATURESLOADEND:"featuresloadend",FEATURESLOADERROR:"featuresloaderror"}},978:(Bt,ot,a)=>{"use strict";a.d(ot,{Z:()=>w,I:()=>O});var G=a(3044),D=a(8786),k=a(4700);const U=class z extends D.Z{constructor(R,W,K,nt,A,L){super(R,W,L),this.extent=null,this.format_=nt,this.features_=null,this.projection=null,this.tileLoadFunction_=A,this.url_=K,this.key=K}getFormat(){return this.format_}getFeatures(){return this.features_}load(){this.state==k.Z.IDLE&&(this.setState(k.Z.LOADING),this.tileLoadFunction_(this,this.url_),this.loader_&&this.loader_(this.extent,this.resolution,this.projection))}onLoad(R,W){this.setFeatures(R)}onError(){this.setState(k.Z.ERROR)}setFeatures(R){this.features_=R,this.setState(k.Z.LOADED)}setLoader(R){this.loader_=R}};var I=a(7450),S=a(1053),P=a(886),p=a(3842),d=a(513);const u=[],s=class c extends D.Z{constructor(R,W,K,nt){super(R,W,{transition:0}),this.context_={},this.executorGroups={},this.declutterExecutorGroups={},this.loadingSourceTiles=0,this.hitDetectionImageData={},this.replayState_={},this.sourceTiles=[],this.errorTileKeys={},this.getSourceTiles=nt.bind(void 0,this),this.wrappedTileCoord=K}getContext(R){const W=(0,d.sq)(R);return W in this.context_||(this.context_[W]=(0,p.E4)(1,1,u)),this.context_[W]}hasContext(R){return(0,d.sq)(R)in this.context_}getImage(R){return this.hasContext(R)?this.getContext(R).canvas:null}getReplayState(R){const W=(0,d.sq)(R);return W in this.replayState_||(this.replayState_[W]={dirty:!1,renderedRenderOrder:null,renderedResolution:NaN,renderedRevision:-1,renderedTileResolution:NaN,renderedTileRevision:-1,renderedTileZ:-1}),this.replayState_[W]}load(){this.getSourceTiles()}release(){for(const R in this.context_){const W=this.context_[R];(0,p.jy)(W),u.push(W.canvas),delete this.context_[R]}super.release()}};var f=a(2258),n=a(9543),h=a(2705),g=a(5474),e=a(9306),E=a(75),v=a(931);const w=class x extends P.Z{constructor(R){const W=R.projection||"EPSG:3857",K=R.extent||(0,h.Tl)(W),nt=R.tileGrid||(0,h.dl)({extent:K,maxResolution:R.maxResolution,maxZoom:void 0!==R.maxZoom?R.maxZoom:22,minZoom:R.minZoom,tileSize:R.tileSize||512});super({attributions:R.attributions,attributionsCollapsible:R.attributionsCollapsible,cacheSize:R.cacheSize,interpolate:!0,opaque:!1,projection:W,state:R.state,tileGrid:nt,tileLoadFunction:R.tileLoadFunction?R.tileLoadFunction:O,tileUrlFunction:R.tileUrlFunction,url:R.url,urls:R.urls,wrapX:void 0===R.wrapX||R.wrapX,transition:R.transition,zDirection:void 0===R.zDirection?1:R.zDirection}),this.format_=R.format?R.format:null,this.sourceTileCache=new I.Z(this.tileCache.highWaterMark),this.overlaps_=R.overlaps??!0,this.tileClass=R.tileClass?R.tileClass:U,this.tileGrids_={}}getFeaturesInExtent(R){const W=[],K=this.tileCache;if(0===K.getCount())return W;const nt=(0,g.Ul)(K.peekFirstKey())[0],A=this.tileGrid;return K.forEach(function(L){if(L.tileCoord[0]!==nt||L.getState()!==k.Z.LOADED)return;const b=L.getSourceTiles();for(let M=0,C=b.length;M<C;++M){const N=b[M];if((0,n.kK)(R,A.getTileCoordExtent(N.tileCoord))){const it=N.getFeatures();if(it)for(let Y=0,st=it.length;Y<st;++Y){const ht=it[Y],Tt=ht.getGeometry();(0,n.kK)(R,Tt.getExtent())&&W.push(ht)}}}}),W}getOverlaps(){return this.overlaps_}clear(){this.tileCache.clear(),this.sourceTileCache.clear()}expireCache(R,W){const K=this.getTileCacheForProjection(R),nt=Object.keys(W).reduce((A,L)=>{const b=(0,g.MY)(L),M=K.peek(b);if(M){const C=M.sourceTiles;for(let N=0,H=C.length;N<H;++N)A[C[N].getKey()]=!0}return A},{});super.expireCache(R,W),this.sourceTileCache.expireCache(nt)}getSourceTiles(R,W,K){if(K.getState()===k.Z.IDLE){K.setState(k.Z.LOADING);const nt=K.wrappedTileCoord,A=this.getTileGridForProjection(W),L=A.getTileCoordExtent(nt),M=A.getResolution(nt[0]);(0,n.f3)(L,-M,L);const C=this.tileGrid,N=C.getExtent();N&&(0,n.Ed)(L,N,L);const H=C.getZForResolution(M,this.zDirection);C.forEachTileCoord(L,H,it=>{const Y=this.tileUrlFunction(it,R,W),st=this.sourceTileCache.containsKey(Y)?this.sourceTileCache.get(Y):new this.tileClass(it,Y?k.Z.IDLE:k.Z.EMPTY,Y,this.format_,this.tileLoadFunction);K.sourceTiles.push(st);const ht=st.getState();if(ht<k.Z.LOADED){const Tt=vt=>{this.handleTileChange(vt);const Ct=st.getState();if(Ct===k.Z.LOADED||Ct===k.Z.ERROR){const bt=st.getKey();bt in K.errorTileKeys?st.getState()===k.Z.LOADED&&delete K.errorTileKeys[bt]:K.loadingSourceTiles--,Ct===k.Z.ERROR?K.errorTileKeys[bt]=!0:st.removeEventListener(G.Z.CHANGE,Tt),0===K.loadingSourceTiles&&K.setState((0,e.x)(K.errorTileKeys)?k.Z.LOADED:k.Z.ERROR)}};st.addEventListener(G.Z.CHANGE,Tt),K.loadingSourceTiles++}ht===k.Z.IDLE&&(st.extent=C.getTileCoordExtent(it),st.projection=W,st.resolution=C.getResolution(it[0]),this.sourceTileCache.set(Y,st),st.load())}),K.loadingSourceTiles||K.setState(K.sourceTiles.some(it=>it.getState()===k.Z.ERROR)?k.Z.ERROR:k.Z.LOADED)}return K.sourceTiles}getTile(R,W,K,nt,A){const L=(0,g.lg)(R,W,K),b=this.getKey();let M;if(this.tileCache.containsKey(L)&&(M=this.tileCache.get(L),M.key===b))return M;const C=[R,W,K];let N=this.getTileCoordForTileUrlFunction(C,A);const H=this.getTileGrid().getExtent(),it=this.getTileGridForProjection(A);if(N&&H){const ht=it.getTileCoordExtent(N);(0,n.f3)(ht,-it.getResolution(R),ht),(0,n.kK)(H,ht)||(N=null)}let Y=!0;if(null!==N){const ht=this.tileGrid,Tt=it.getResolution(R),vt=ht.getZForResolution(Tt,1),Ct=it.getTileCoordExtent(N);(0,n.f3)(Ct,-Tt,Ct),ht.forEachTileCoord(Ct,vt,bt=>{Y=Y&&!this.tileUrlFunction(bt,nt,A)})}const st=new s(C,Y?k.Z.EMPTY:k.Z.IDLE,N,this.getSourceTiles.bind(this,nt,A));return st.key=b,M?(st.interimTile=M,st.refreshInterimChain(),this.tileCache.replace(L,st)):this.tileCache.set(L,st),st}getTileGridForProjection(R){const W=R.getCode();let K=this.tileGrids_[W];if(!K){const nt=this.tileGrid,A=nt.getResolutions().slice(),L=A.map(function(C,N){return nt.getOrigin(N)}),b=A.map(function(C,N){return nt.getTileSize(N)}),M=f.e+1;for(let C=A.length;C<M;++C)A.push(A[C-1]/2),L.push(L[C-1]),b.push(b[C-1]);K=new S.Z({extent:nt.getExtent(),origins:L,resolutions:A,tileSizes:b}),this.tileGrids_[W]=K}return K}getTilePixelRatio(R){return R}getTilePixelSize(R,W,K){const nt=this.getTileGridForProjection(K),A=(0,v.Pq)(nt.getTileSize(R),this.tmpSize);return[Math.round(A[0]*W),Math.round(A[1]*W)]}updateCacheSize(R,W){super.updateCacheSize(2*R,W),this.sourceTileCache.highWaterMark=this.getTileCacheForProjection(W).highWaterMark}};function O(y,R){y.setLoader(function(W,K,nt){(0,E.ov)(R,y.getFormat(),W,K,nt,y.onLoad.bind(y),y.onError.bind(y))})}},6290:(Bt,ot,a)=>{"use strict";a.d(ot,{Z:()=>z});var G=a(3242),D=a(2705);const z=class k extends G.Z{constructor(I){const S=void 0!==(I=I||{}).projection?I.projection:"EPSG:3857",P=void 0!==I.tileGrid?I.tileGrid:(0,D.dl)({extent:(0,D.Tl)(S),maxResolution:I.maxResolution,maxZoom:I.maxZoom,minZoom:I.minZoom,tileSize:I.tileSize});super({attributions:I.attributions,cacheSize:I.cacheSize,crossOrigin:I.crossOrigin,interpolate:I.interpolate,opaque:I.opaque,projection:S,reprojectionErrorThreshold:I.reprojectionErrorThreshold,tileGrid:P,tileLoadFunction:I.tileLoadFunction,tilePixelRatio:I.tilePixelRatio,tileUrlFunction:I.tileUrlFunction,url:I.url,urls:I.urls,wrapX:void 0===I.wrapX||I.wrapX,transition:I.transition,attributionsCollapsible:I.attributionsCollapsible,zDirection:I.zDirection}),this.gutter_=void 0!==I.gutter?I.gutter:0}getGutter(){return this.gutter_}}},4910:(Bt,ot,a)=>{"use strict";a.d(ot,{e:()=>G});const G="1.3.0"},7531:(Bt,ot,a)=>{"use strict";function G(k,z,U){const I=void 0!==U?k.toFixed(U):""+k;let S=I.indexOf(".");return S=-1===S?I.length:S,S>z?I:new Array(1+z-S).join("0")+I}function D(k,z){const U=(""+k).split("."),I=(""+z).split(".");for(let S=0;S<Math.max(U.length,I.length);S++){const P=parseInt(U[S]||"0",10),p=parseInt(I[S]||"0",10);if(P>p)return 1;if(p>P)return-1}return 0}a.d(ot,{n:()=>D,v:()=>G})},795:(Bt,ot,a)=>{"use strict";a.d(ot,{Z:()=>k});var G=a(2682);class D extends G.Z{constructor(U){super({points:1/0,fill:(U=U||{radius:5}).fill,radius:U.radius,stroke:U.stroke,scale:void 0!==U.scale?U.scale:1,rotation:void 0!==U.rotation?U.rotation:0,rotateWithView:void 0!==U.rotateWithView&&U.rotateWithView,displacement:void 0!==U.displacement?U.displacement:[0,0],declutterMode:U.declutterMode})}clone(){const U=this.getScale(),I=new D({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),scale:Array.isArray(U)?U.slice():U,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return I.setOpacity(this.getOpacity()),I}setRadius(U){this.radius_=U,this.render()}}const k=D},694:(Bt,ot,a)=>{"use strict";a.d(ot,{Z:()=>D});class G{constructor(z){this.color_=void 0!==(z=z||{}).color?z.color:null}clone(){const z=this.getColor();return new G({color:Array.isArray(z)?z.slice():z||void 0})}getColor(){return this.color_}setColor(z){this.color_=z}}const D=G},5999:(Bt,ot,a)=>{"use strict";a.d(ot,{Z:()=>h});var G=a(3044),D=a(1501),k=a(7182),z=a(866),U=a(992),I=a(1398),S=a(3842),P=a(9118),p=a(1309);let d=null;class u extends I.Z{constructor(e,E,v,x,w,O){super(),this.hitDetectionImage_=null,this.image_=e,this.crossOrigin_=x,this.canvas_={},this.color_=O,this.unlisten_=null,this.imageState_=w,this.size_=v,this.src_=E}initializeImage_(){this.image_=new Image,null!==this.crossOrigin_&&(this.image_.crossOrigin=this.crossOrigin_)}isTainted_(){if(void 0===this.tainted_&&this.imageState_===D.Z.LOADED){d||(d=(0,S.E4)(1,1,void 0,{willReadFrequently:!0})),d.drawImage(this.image_,0,0);try{d.getImageData(0,0,1,1),this.tainted_=!1}catch{d=null,this.tainted_=!0}}return!0===this.tainted_}dispatchChangeEvent_(){this.dispatchEvent(G.Z.CHANGE)}handleImageError_(){this.imageState_=D.Z.ERROR,this.unlistenImage_(),this.dispatchChangeEvent_()}handleImageLoad_(){this.imageState_=D.Z.LOADED,this.size_?(this.image_.width=this.size_[0],this.image_.height=this.size_[1]):this.size_=[this.image_.width,this.image_.height],this.unlistenImage_(),this.dispatchChangeEvent_()}getImage(e){return this.image_||this.initializeImage_(),this.replaceColor_(e),this.canvas_[e]?this.canvas_[e]:this.image_}getPixelRatio(e){return this.replaceColor_(e),this.canvas_[e]?e:1}getImageState(){return this.imageState_}getHitDetectionImage(){if(this.image_||this.initializeImage_(),!this.hitDetectionImage_)if(this.isTainted_()){const e=this.size_[0],E=this.size_[1],v=(0,S.E4)(e,E);v.fillRect(0,0,e,E),this.hitDetectionImage_=v.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_}getSize(){return this.size_}getSrc(){return this.src_}load(){if(this.imageState_===D.Z.IDLE){this.image_||this.initializeImage_(),this.imageState_=D.Z.LOADING;try{this.image_.src=this.src_}catch{this.handleImageError_()}this.unlisten_=(0,p.K)(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this))}}replaceColor_(e){if(!this.color_||this.canvas_[e]||this.imageState_!==D.Z.LOADED)return;const E=this.image_,v=document.createElement("canvas");v.width=Math.ceil(E.width*e),v.height=Math.ceil(E.height*e);const x=v.getContext("2d");x.scale(e,e),x.drawImage(E,0,0),x.globalCompositeOperation="multiply",x.fillStyle=(0,z.XC)(this.color_),x.fillRect(0,0,v.width/e,v.height/e),x.globalCompositeOperation="destination-in",x.drawImage(E,0,0),this.canvas_[e]=v}unlistenImage_(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}}var f=a(513);class n extends k.Z{constructor(e){super({opacity:void 0!==(e=e||{}).opacity?e.opacity:1,rotation:void 0!==e.rotation?e.rotation:0,scale:void 0!==e.scale?e.scale:1,displacement:void 0!==e.displacement?e.displacement:[0,0],rotateWithView:void 0!==e.rotateWithView&&e.rotateWithView,declutterMode:e.declutterMode}),this.anchor_=void 0!==e.anchor?e.anchor:[.5,.5],this.normalizedAnchor_=null,this.anchorOrigin_=void 0!==e.anchorOrigin?e.anchorOrigin:"top-left",this.anchorXUnits_=void 0!==e.anchorXUnits?e.anchorXUnits:"fraction",this.anchorYUnits_=void 0!==e.anchorYUnits?e.anchorYUnits:"fraction",this.crossOrigin_=void 0!==e.crossOrigin?e.crossOrigin:null;const O=void 0!==e.img?e.img:null;this.imgSize_=e.imgSize;let y=e.src;(0,U.h)(!(void 0!==y&&O),4),(0,U.h)(!O||O&&this.imgSize_,5),(void 0===y||0===y.length)&&O&&(y=O.src||(0,f.sq)(O)),(0,U.h)(void 0!==y&&y.length>0,6),(0,U.h)(!((void 0!==e.width||void 0!==e.height)&&void 0!==e.scale),69);const R=void 0!==e.src?D.Z.IDLE:D.Z.LOADED;if(this.color_=void 0!==e.color?(0,z._2)(e.color):null,this.iconImage_=function c(g,e,E,v,x,w){let O=P.c.get(e,v,w);return O||(O=new u(g,e,E,v,x,w),P.c.set(e,v,w,O)),O}(O,y,void 0!==this.imgSize_?this.imgSize_:null,this.crossOrigin_,R,this.color_),this.offset_=void 0!==e.offset?e.offset:[0,0],this.offsetOrigin_=void 0!==e.offsetOrigin?e.offsetOrigin:"top-left",this.origin_=null,this.size_=void 0!==e.size?e.size:null,this.width_=e.width,this.height_=e.height,void 0!==this.width_||void 0!==this.height_){const W=this.getImage(1),K=()=>{this.updateScaleFromWidthAndHeight(this.width_,this.height_)};W.width>0?this.updateScaleFromWidthAndHeight(this.width_,this.height_):W.addEventListener("load",K)}}clone(){let e=this.getScale();return e=Array.isArray(e)?e.slice():e,(void 0!==this.width_||void 0!==this.height_)&&(e=void 0),new n({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,crossOrigin:this.crossOrigin_,imgSize:this.imgSize_,offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,opacity:this.getOpacity(),rotateWithView:this.getRotateWithView(),rotation:this.getRotation(),scale:e,size:null!==this.size_?this.size_.slice():void 0,src:this.getSrc(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode(),width:this.width_,height:this.height_})}updateScaleFromWidthAndHeight(e,E){const v=this.getImage(1);super.setScale(void 0!==e&&void 0!==E?[e/v.width,E/v.height]:void 0!==e?[e/v.width,e/v.width]:void 0!==E?[E/v.height,E/v.height]:[1,1])}getAnchor(){let e=this.normalizedAnchor_;if(!e){e=this.anchor_;const x=this.getSize();if("fraction"==this.anchorXUnits_||"fraction"==this.anchorYUnits_){if(!x)return null;e=this.anchor_.slice(),"fraction"==this.anchorXUnits_&&(e[0]*=x[0]),"fraction"==this.anchorYUnits_&&(e[1]*=x[1])}if("top-left"!=this.anchorOrigin_){if(!x)return null;e===this.anchor_&&(e=this.anchor_.slice()),("top-right"==this.anchorOrigin_||"bottom-right"==this.anchorOrigin_)&&(e[0]=-e[0]+x[0]),("bottom-left"==this.anchorOrigin_||"bottom-right"==this.anchorOrigin_)&&(e[1]=-e[1]+x[1])}this.normalizedAnchor_=e}const E=this.getDisplacement(),v=this.getScaleArray();return[e[0]-E[0]/v[0],e[1]+E[1]/v[1]]}setAnchor(e){this.anchor_=e,this.normalizedAnchor_=null}getColor(){return this.color_}getImage(e){return this.iconImage_.getImage(e)}getPixelRatio(e){return this.iconImage_.getPixelRatio(e)}getImageSize(){return this.iconImage_.getSize()}getImageState(){return this.iconImage_.getImageState()}getHitDetectionImage(){return this.iconImage_.getHitDetectionImage()}getOrigin(){if(this.origin_)return this.origin_;let e=this.offset_;if("top-left"!=this.offsetOrigin_){const E=this.getSize(),v=this.iconImage_.getSize();if(!E||!v)return null;e=e.slice(),("top-right"==this.offsetOrigin_||"bottom-right"==this.offsetOrigin_)&&(e[0]=v[0]-E[0]-e[0]),("bottom-left"==this.offsetOrigin_||"bottom-right"==this.offsetOrigin_)&&(e[1]=v[1]-E[1]-e[1])}return this.origin_=e,this.origin_}getSrc(){return this.iconImage_.getSrc()}getSize(){return this.size_?this.size_:this.iconImage_.getSize()}getWidth(){return this.width_}getHeight(){return this.height_}setWidth(e){this.width_=e,this.updateScaleFromWidthAndHeight(e,this.height_)}setHeight(e){this.height_=e,this.updateScaleFromWidthAndHeight(this.width_,e)}setScale(e){super.setScale(e);const E=this.getImage(1);if(E){const v=Array.isArray(e)?e[0]:e;void 0!==v&&(this.width_=v*E.width);const x=Array.isArray(e)?e[1]:e;void 0!==x&&(this.height_=x*E.height)}}listenImageChange(e){this.iconImage_.addEventListener(G.Z.CHANGE,e)}load(){this.iconImage_.load()}unlistenImageChange(e){this.iconImage_.removeEventListener(G.Z.CHANGE,e)}}const h=n},9118:(Bt,ot,a)=>{"use strict";a.d(ot,{c:()=>U});var G=a(866);function k(I,S,P){return S+":"+I+":"+(P?(0,G.XC)(P):"null")}const U=new class D{constructor(){this.cache_={},this.cacheSize_=0,this.maxCacheSize_=32}clear(){this.cache_={},this.cacheSize_=0}canExpireCache(){return this.cacheSize_>this.maxCacheSize_}expire(){if(this.canExpireCache()){let S=0;for(const P in this.cache_){const p=this.cache_[P];0==(3&S++)&&!p.hasListener()&&(delete this.cache_[P],--this.cacheSize_)}}}get(S,P,p){const d=k(S,P,p);return d in this.cache_?this.cache_[d]:null}set(S,P,p,d){const u=k(S,P,p);this.cache_[u]=d,++this.cacheSize_}setSize(S){this.maxCacheSize_=S,this.expire()}}},7182:(Bt,ot,a)=>{"use strict";a.d(ot,{Z:()=>z});var G=a(513),D=a(931);class k{constructor(I){this.opacity_=I.opacity,this.rotateWithView_=I.rotateWithView,this.rotation_=I.rotation,this.scale_=I.scale,this.scaleArray_=(0,D.Pq)(I.scale),this.displacement_=I.displacement,this.declutterMode_=I.declutterMode}clone(){const I=this.getScale();return new k({opacity:this.getOpacity(),scale:Array.isArray(I)?I.slice():I,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getOpacity(){return this.opacity_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getDisplacement(){return this.displacement_}getDeclutterMode(){return this.declutterMode_}getAnchor(){return(0,G.O3)()}getImage(I){return(0,G.O3)()}getHitDetectionImage(){return(0,G.O3)()}getPixelRatio(I){return 1}getImageState(){return(0,G.O3)()}getImageSize(){return(0,G.O3)()}getOrigin(){return(0,G.O3)()}getSize(){return(0,G.O3)()}setDisplacement(I){this.displacement_=I}setOpacity(I){this.opacity_=I}setRotateWithView(I){this.rotateWithView_=I}setRotation(I){this.rotation_=I}setScale(I){this.scale_=I,this.scaleArray_=(0,D.Pq)(I)}listenImageChange(I){(0,G.O3)()}load(){(0,G.O3)()}unlistenImageChange(I){(0,G.O3)()}}const z=k},2682:(Bt,ot,a)=>{"use strict";a.d(ot,{Z:()=>P});var G=a(1501),D=a(7182),k=a(866),z=a(4890),U=a(3842),I=a(2768);class S extends D.Z{constructor(d){super({opacity:1,rotateWithView:void 0!==d.rotateWithView&&d.rotateWithView,rotation:void 0!==d.rotation?d.rotation:0,scale:void 0!==d.scale?d.scale:1,displacement:void 0!==d.displacement?d.displacement:[0,0],declutterMode:d.declutterMode}),this.canvas_=void 0,this.hitDetectionCanvas_=null,this.fill_=void 0!==d.fill?d.fill:null,this.origin_=[0,0],this.points_=d.points,this.radius_=void 0!==d.radius?d.radius:d.radius1,this.radius2_=d.radius2,this.angle_=void 0!==d.angle?d.angle:0,this.stroke_=void 0!==d.stroke?d.stroke:null,this.size_=null,this.renderOptions_=null,this.render()}clone(){const d=this.getScale(),u=new S({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(d)?d.slice():d,displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return u.setOpacity(this.getOpacity()),u}getAnchor(){const d=this.size_;if(!d)return null;const u=this.getDisplacement(),c=this.getScaleArray();return[d[0]/2-u[0]/c[0],d[1]/2+u[1]/c[1]]}getAngle(){return this.angle_}getFill(){return this.fill_}setFill(d){this.fill_=d,this.render()}getHitDetectionImage(){return this.hitDetectionCanvas_||this.createHitDetectionCanvas_(this.renderOptions_),this.hitDetectionCanvas_}getImage(d){let u=this.canvas_[d];if(!u){const c=this.renderOptions_,s=(0,U.E4)(c.size*d,c.size*d);this.draw_(c,s,d),u=s.canvas,this.canvas_[d]=u}return u}getPixelRatio(d){return d}getImageSize(){return this.size_}getImageState(){return G.Z.LOADED}getOrigin(){return this.origin_}getPoints(){return this.points_}getRadius(){return this.radius_}getRadius2(){return this.radius2_}getSize(){return this.size_}getStroke(){return this.stroke_}setStroke(d){this.stroke_=d,this.render()}listenImageChange(d){}load(){}unlistenImageChange(d){}calculateLineJoinSize_(d,u,c){if(0===u||this.points_===1/0||"bevel"!==d&&"miter"!==d)return u;let s=this.radius_,f=void 0===this.radius2_?s:this.radius2_;if(s<f){const b=s;s=f,f=b}const h=2*Math.PI/(void 0===this.radius2_?this.points_:2*this.points_),g=f*Math.sin(h),E=s-Math.sqrt(f*f-g*g),v=Math.sqrt(g*g+E*E),x=v/g;if("miter"===d&&x<=c)return x*u;const w=u/2/x,O=u/2*(E/v),R=Math.sqrt((s+w)*(s+w)+O*O)-s;if(void 0===this.radius2_||"bevel"===d)return 2*R;const W=s*Math.sin(h),nt=f-Math.sqrt(s*s-W*W),L=Math.sqrt(W*W+nt*nt)/W;return L<=c?2*Math.max(R,L*u/2-f-s):2*R}createRenderOptions(){let f,d=I.rc,u=0,c=null,s=0,n=0;this.stroke_&&(f=this.stroke_.getColor(),null===f&&(f=I.Tx),f=(0,z.y)(f),n=this.stroke_.getWidth(),void 0===n&&(n=I.yC),c=this.stroke_.getLineDash(),s=this.stroke_.getLineDashOffset(),d=this.stroke_.getLineJoin(),void 0===d&&(d=I.rc),u=this.stroke_.getMiterLimit(),void 0===u&&(u=I.V4));const h=this.calculateLineJoinSize_(d,n,u),g=Math.max(this.radius_,this.radius2_||0);return{strokeStyle:f,strokeWidth:n,size:Math.ceil(2*g+h),lineDash:c,lineDashOffset:s,lineJoin:d,miterLimit:u}}render(){this.renderOptions_=this.createRenderOptions();const d=this.renderOptions_.size;this.canvas_={},this.size_=[d,d]}draw_(d,u,c){if(u.scale(c,c),u.translate(d.size/2,d.size/2),this.createPath_(u),this.fill_){let s=this.fill_.getColor();null===s&&(s=I.bL),u.fillStyle=(0,z.y)(s),u.fill()}this.stroke_&&(u.strokeStyle=d.strokeStyle,u.lineWidth=d.strokeWidth,d.lineDash&&(u.setLineDash(d.lineDash),u.lineDashOffset=d.lineDashOffset),u.lineJoin=d.lineJoin,u.miterLimit=d.miterLimit,u.stroke())}createHitDetectionCanvas_(d){if(this.fill_){let u=this.fill_.getColor(),c=0;if("string"==typeof u&&(u=(0,k._2)(u)),null===u?c=1:Array.isArray(u)&&(c=4===u.length?u[3]:1),0===c){const s=(0,U.E4)(d.size,d.size);this.hitDetectionCanvas_=s.canvas,this.drawHitDetectionCanvas_(d,s)}}this.hitDetectionCanvas_||(this.hitDetectionCanvas_=this.getImage(1))}createPath_(d){let u=this.points_;const c=this.radius_;if(u===1/0)d.arc(0,0,c,0,2*Math.PI);else{const s=void 0===this.radius2_?c:this.radius2_;void 0!==this.radius2_&&(u*=2);const f=this.angle_-Math.PI/2,n=2*Math.PI/u;for(let h=0;h<u;h++){const g=f+h*n,e=h%2==0?c:s;d.lineTo(e*Math.cos(g),e*Math.sin(g))}d.closePath()}}drawHitDetectionCanvas_(d,u){u.translate(d.size/2,d.size/2),this.createPath_(u),u.fillStyle=I.bL,u.fill(),this.stroke_&&(u.strokeStyle=d.strokeStyle,u.lineWidth=d.strokeWidth,d.lineDash&&(u.setLineDash(d.lineDash),u.lineDashOffset=d.lineDashOffset),u.lineJoin=d.lineJoin,u.miterLimit=d.miterLimit,u.stroke())}}const P=S},5253:(Bt,ot,a)=>{"use strict";a.d(ot,{Z:()=>D});class G{constructor(z){this.color_=void 0!==(z=z||{}).color?z.color:null,this.lineCap_=z.lineCap,this.lineDash_=void 0!==z.lineDash?z.lineDash:null,this.lineDashOffset_=z.lineDashOffset,this.lineJoin_=z.lineJoin,this.miterLimit_=z.miterLimit,this.width_=z.width}clone(){const z=this.getColor();return new G({color:Array.isArray(z)?z.slice():z||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})}getColor(){return this.color_}getLineCap(){return this.lineCap_}getLineDash(){return this.lineDash_}getLineDashOffset(){return this.lineDashOffset_}getLineJoin(){return this.lineJoin_}getMiterLimit(){return this.miterLimit_}getWidth(){return this.width_}setColor(z){this.color_=z}setLineCap(z){this.lineCap_=z}setLineDash(z){this.lineDash_=z}setLineDashOffset(z){this.lineDashOffset_=z}setLineJoin(z){this.lineJoin_=z}setMiterLimit(z){this.miterLimit_=z}setWidth(z){this.width_=z}}const D=G},1786:(Bt,ot,a)=>{"use strict";a.d(ot,{J$:()=>I,ZP:()=>u,yF:()=>P});var G=a(795),D=a(694),k=a(5253),z=a(992);class U{constructor(s){s=s||{},this.geometry_=null,this.geometryFunction_=d,void 0!==s.geometry&&this.setGeometry(s.geometry),this.fill_=void 0!==s.fill?s.fill:null,this.image_=void 0!==s.image?s.image:null,this.renderer_=void 0!==s.renderer?s.renderer:null,this.hitDetectionRenderer_=void 0!==s.hitDetectionRenderer?s.hitDetectionRenderer:null,this.stroke_=void 0!==s.stroke?s.stroke:null,this.text_=void 0!==s.text?s.text:null,this.zIndex_=s.zIndex}clone(){let s=this.getGeometry();return s&&"object"==typeof s&&(s=s.clone()),new U({geometry:s,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,renderer:this.getRenderer(),stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})}getRenderer(){return this.renderer_}setRenderer(s){this.renderer_=s}setHitDetectionRenderer(s){this.hitDetectionRenderer_=s}getHitDetectionRenderer(){return this.hitDetectionRenderer_}getGeometry(){return this.geometry_}getGeometryFunction(){return this.geometryFunction_}getFill(){return this.fill_}setFill(s){this.fill_=s}getImage(){return this.image_}setImage(s){this.image_=s}getStroke(){return this.stroke_}setStroke(s){this.stroke_=s}getText(){return this.text_}setText(s){this.text_=s}getZIndex(){return this.zIndex_}setGeometry(s){"function"==typeof s?this.geometryFunction_=s:"string"==typeof s?this.geometryFunction_=function(f){return f.get(s)}:s?void 0!==s&&(this.geometryFunction_=function(){return s}):this.geometryFunction_=d,this.geometry_=s}setZIndex(s){this.zIndex_=s}}function I(c){let s;if("function"==typeof c)s=c;else{let f;Array.isArray(c)?f=c:((0,z.h)("function"==typeof c.getZIndex,41),f=[c]),s=function(){return f}}return s}let S=null;function P(c,s){if(!S){const f=new D.Z({color:"rgba(255,255,255,0.4)"}),n=new k.Z({color:"#3399CC",width:1.25});S=[new U({image:new G.Z({fill:f,stroke:n,radius:5}),fill:f,stroke:n})]}return S}function d(c){return c.getGeometry()}const u=U},8185:(Bt,ot,a)=>{"use strict";a.d(ot,{Z:()=>U});var G=a(694),D=a(931);class z{constructor(S){this.font_=(S=S||{}).font,this.rotation_=S.rotation,this.rotateWithView_=S.rotateWithView,this.scale_=S.scale,this.scaleArray_=(0,D.Pq)(void 0!==S.scale?S.scale:1),this.text_=S.text,this.textAlign_=S.textAlign,this.justify_=S.justify,this.repeat_=S.repeat,this.textBaseline_=S.textBaseline,this.fill_=void 0!==S.fill?S.fill:new G.Z({color:"#333"}),this.maxAngle_=void 0!==S.maxAngle?S.maxAngle:Math.PI/4,this.placement_=void 0!==S.placement?S.placement:"point",this.overflow_=!!S.overflow,this.stroke_=void 0!==S.stroke?S.stroke:null,this.offsetX_=void 0!==S.offsetX?S.offsetX:0,this.offsetY_=void 0!==S.offsetY?S.offsetY:0,this.backgroundFill_=S.backgroundFill?S.backgroundFill:null,this.backgroundStroke_=S.backgroundStroke?S.backgroundStroke:null,this.padding_=void 0===S.padding?null:S.padding}clone(){const S=this.getScale();return new z({font:this.getFont(),placement:this.getPlacement(),repeat:this.getRepeat(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(S)?S.slice():S,text:this.getText(),textAlign:this.getTextAlign(),justify:this.getJustify(),textBaseline:this.getTextBaseline(),fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():void 0,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0,padding:this.getPadding()||void 0})}getOverflow(){return this.overflow_}getFont(){return this.font_}getMaxAngle(){return this.maxAngle_}getPlacement(){return this.placement_}getRepeat(){return this.repeat_}getOffsetX(){return this.offsetX_}getOffsetY(){return this.offsetY_}getFill(){return this.fill_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getStroke(){return this.stroke_}getText(){return this.text_}getTextAlign(){return this.textAlign_}getJustify(){return this.justify_}getTextBaseline(){return this.textBaseline_}getBackgroundFill(){return this.backgroundFill_}getBackgroundStroke(){return this.backgroundStroke_}getPadding(){return this.padding_}setOverflow(S){this.overflow_=S}setFont(S){this.font_=S}setMaxAngle(S){this.maxAngle_=S}setOffsetX(S){this.offsetX_=S}setOffsetY(S){this.offsetY_=S}setPlacement(S){this.placement_=S}setRepeat(S){this.repeat_=S}setRotateWithView(S){this.rotateWithView_=S}setFill(S){this.fill_=S}setRotation(S){this.rotation_=S}setScale(S){this.scale_=S,this.scaleArray_=(0,D.Pq)(void 0!==S?S:1)}setStroke(S){this.stroke_=S}setText(S){this.text_=S}setTextAlign(S){this.textAlign_=S}setJustify(S){this.justify_=S}setTextBaseline(S){this.textBaseline_=S}setBackgroundFill(S){this.backgroundFill_=S}setBackgroundStroke(S){this.backgroundStroke_=S}setPadding(S){this.padding_=S}}const U=z},5474:(Bt,ot,a)=>{"use strict";function G(P,p,d,u){return void 0!==u?(u[0]=P,u[1]=p,u[2]=d,u):[P,p,d]}function D(P,p,d){return P+"/"+p+"/"+d}function k(P){return D(P[0],P[1],P[2])}function z(P){const[p,d,u]=P.substring(P.lastIndexOf("/")+1,P.length).split(",").map(Number);return D(p,d,u)}function U(P){return P.split("/").map(Number)}function I(P){return(P[1]<<P[0])+P[2]}function S(P,p){const d=P[0],u=P[1],c=P[2];if(p.getMinZoom()>d||d>p.getMaxZoom())return!1;const s=p.getFullTileRange(d);return!s||s.containsXY(u,c)}a.d(ot,{MY:()=>z,T9:()=>G,Ul:()=>U,km:()=>k,lg:()=>D,tE:()=>S,vp:()=>I})},2705:(Bt,ot,a)=>{"use strict";a.d(ot,{Cf:()=>S,Tl:()=>c,X$:()=>I,dl:()=>p});var G=a(1053),D=a(2258),k=a(9015),z=a(9543),U=a(931);function I(s){let f=s.getDefaultTileGrid();return f||(f=function u(s,f,n,h){return function P(s,f,n,h){h=void 0!==h?h:"top-left";const g=d(s,f,n);return new G.Z({extent:s,origin:(0,z.g0)(s,h),resolutions:g,tileSize:n})}(c(s),f,n,h)}(s),s.setDefaultTileGrid(f)),f}function S(s,f,n){const h=f[0],g=s.getTileCoordCenter(f),e=c(n);if(!(0,z.b8)(e,g)){const E=(0,z.dz)(e),v=Math.ceil((e[0]-g[0])/E);return g[0]+=E*v,s.getTileCoordForCoordAndZ(g,h)}return f}function p(s){const f=s||{},n=f.extent||(0,k.U2)("EPSG:3857").getExtent(),h={extent:n,minZoom:f.minZoom,tileSize:f.tileSize,resolutions:d(n,f.maxZoom,f.tileSize,f.maxResolution)};return new G.Z(h)}function d(s,f,n,h){f=void 0!==f?f:D.e,n=(0,U.Pq)(void 0!==n?n:D.S);const g=(0,z.Cr)(s),e=(0,z.dz)(s);h=h>0?h:Math.max(e/n[0],g/n[1]);const E=f+1,v=new Array(E);for(let x=0;x<E;++x)v[x]=h/Math.pow(2,x);return v}function c(s){let f=(s=(0,k.U2)(s)).getExtent();if(!f){const n=180*k.Wm.degrees/s.getMetersPerUnit();f=(0,z.T9)(-n,-n,n,n)}return f}},1053:(Bt,ot,a)=>{"use strict";a.d(ot,{Z:()=>s});var G=a(828),D=a(2258),k=a(992),z=a(4331),U=a(9543),I=a(5474),S=a(4429),P=a(142),p=a(931);const d=[0,0,0],s=class c{constructor(n){let h;if(this.minZoom=void 0!==n.minZoom?n.minZoom:0,this.resolutions_=n.resolutions,(0,k.h)((0,P.pT)(this.resolutions_,function(e,E){return E-e},!0),17),!n.origins)for(let e=0,E=this.resolutions_.length-1;e<E;++e)if(h){if(this.resolutions_[e]/this.resolutions_[e+1]!==h){h=void 0;break}}else h=this.resolutions_[e]/this.resolutions_[e+1];this.zoomFactor_=h,this.maxZoom=this.resolutions_.length-1,this.origin_=void 0!==n.origin?n.origin:null,this.origins_=null,void 0!==n.origins&&(this.origins_=n.origins,(0,k.h)(this.origins_.length==this.resolutions_.length,20));const g=n.extent;void 0!==g&&!this.origin_&&!this.origins_&&(this.origin_=(0,U.rL)(g)),(0,k.h)(!this.origin_&&this.origins_||this.origin_&&!this.origins_,18),this.tileSizes_=null,void 0!==n.tileSizes&&(this.tileSizes_=n.tileSizes,(0,k.h)(this.tileSizes_.length==this.resolutions_.length,19)),this.tileSize_=void 0!==n.tileSize?n.tileSize:this.tileSizes_?null:D.S,(0,k.h)(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,22),this.extent_=void 0!==g?g:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],this.tmpExtent_=[0,0,0,0],void 0!==n.sizes?this.fullTileRanges_=n.sizes.map(function(e,E){const v=new G.Z(Math.min(0,e[0]),Math.max(e[0]-1,-1),Math.min(0,e[1]),Math.max(e[1]-1,-1));if(g){const x=this.getTileRangeForExtentAndZ(g,E);v.minX=Math.max(x.minX,v.minX),v.maxX=Math.min(x.maxX,v.maxX),v.minY=Math.max(x.minY,v.minY),v.maxY=Math.min(x.maxY,v.maxY)}return v},this):g&&this.calculateTileRanges_(g)}forEachTileCoord(n,h,g){const e=this.getTileRangeForExtentAndZ(n,h);for(let E=e.minX,v=e.maxX;E<=v;++E)for(let x=e.minY,w=e.maxY;x<=w;++x)g([h,E,x])}forEachTileCoordParentTileRange(n,h,g,e){let E,v,x,w=null,O=n[0]-1;for(2===this.zoomFactor_?(v=n[1],x=n[2]):w=this.getTileCoordExtent(n,e);O>=this.minZoom;){if(2===this.zoomFactor_?(v=Math.floor(v/2),x=Math.floor(x/2),E=(0,G.T)(v,v,x,x,g)):E=this.getTileRangeForExtentAndZ(w,O,g),h(O,E))return!0;--O}return!1}getExtent(){return this.extent_}getMaxZoom(){return this.maxZoom}getMinZoom(){return this.minZoom}getOrigin(n){return this.origin_?this.origin_:this.origins_[n]}getResolution(n){return this.resolutions_[n]}getResolutions(){return this.resolutions_}getTileCoordChildTileRange(n,h,g){if(n[0]<this.maxZoom){if(2===this.zoomFactor_){const E=2*n[1],v=2*n[2];return(0,G.T)(E,E+1,v,v+1,h)}const e=this.getTileCoordExtent(n,g||this.tmpExtent_);return this.getTileRangeForExtentAndZ(e,n[0]+1,h)}return null}getTileRangeForTileCoordAndZ(n,h,g){if(h>this.maxZoom||h<this.minZoom)return null;const e=n[0],E=n[1],v=n[2];if(h===e)return(0,G.T)(E,v,E,v,g);if(this.zoomFactor_){const w=Math.pow(this.zoomFactor_,h-e),O=Math.floor(E*w),y=Math.floor(v*w);if(h<e)return(0,G.T)(O,O,y,y,g);const R=Math.floor(w*(E+1))-1,W=Math.floor(w*(v+1))-1;return(0,G.T)(O,R,y,W,g)}const x=this.getTileCoordExtent(n,this.tmpExtent_);return this.getTileRangeForExtentAndZ(x,h,g)}getTileRangeExtent(n,h,g){const e=this.getOrigin(n),E=this.getResolution(n),v=(0,p.Pq)(this.getTileSize(n),this.tmpSize_);return(0,U.T9)(e[0]+h.minX*v[0]*E,e[1]+h.minY*v[1]*E,e[0]+(h.maxX+1)*v[0]*E,e[1]+(h.maxY+1)*v[1]*E,g)}getTileRangeForExtentAndZ(n,h,g){this.getTileCoordForXYAndZ_(n[0],n[3],h,!1,d);const e=d[1],E=d[2];return this.getTileCoordForXYAndZ_(n[2],n[1],h,!0,d),(0,G.T)(e,d[1],E,d[2],g)}getTileCoordCenter(n){const h=this.getOrigin(n[0]),g=this.getResolution(n[0]),e=(0,p.Pq)(this.getTileSize(n[0]),this.tmpSize_);return[h[0]+(n[1]+.5)*e[0]*g,h[1]-(n[2]+.5)*e[1]*g]}getTileCoordExtent(n,h){const g=this.getOrigin(n[0]),e=this.getResolution(n[0]),E=(0,p.Pq)(this.getTileSize(n[0]),this.tmpSize_),v=g[0]+n[1]*E[0]*e,x=g[1]-(n[2]+1)*E[1]*e;return(0,U.T9)(v,x,v+E[0]*e,x+E[1]*e,h)}getTileCoordForCoordAndResolution(n,h,g){return this.getTileCoordForXYAndResolution_(n[0],n[1],h,!1,g)}getTileCoordForXYAndResolution_(n,h,g,e,E){const v=this.getZForResolution(g),x=g/this.getResolution(v),w=this.getOrigin(v),O=(0,p.Pq)(this.getTileSize(v),this.tmpSize_);let y=x*(n-w[0])/g/O[0],R=x*(w[1]-h)/g/O[1];return e?(y=(0,z.mD)(y,5)-1,R=(0,z.mD)(R,5)-1):(y=(0,z.GW)(y,5),R=(0,z.GW)(R,5)),(0,I.T9)(v,y,R,E)}getTileCoordForXYAndZ_(n,h,g,e,E){const v=this.getOrigin(g),x=this.getResolution(g),w=(0,p.Pq)(this.getTileSize(g),this.tmpSize_);let O=(n-v[0])/x/w[0],y=(v[1]-h)/x/w[1];return e?(O=(0,z.mD)(O,5)-1,y=(0,z.mD)(y,5)-1):(O=(0,z.GW)(O,5),y=(0,z.GW)(y,5)),(0,I.T9)(g,O,y,E)}getTileCoordForCoordAndZ(n,h,g){return this.getTileCoordForXYAndZ_(n[0],n[1],h,!1,g)}getTileCoordResolution(n){return this.resolutions_[n[0]]}getTileSize(n){return this.tileSize_?this.tileSize_:this.tileSizes_[n]}getFullTileRange(n){return this.fullTileRanges_?this.fullTileRanges_[n]:this.extent_?this.getTileRangeForExtentAndZ(this.extent_,n):null}getZForResolution(n,h){const g=(0,P.h7)(this.resolutions_,n,h||0);return(0,z.uZ)(g,this.minZoom,this.maxZoom)}tileCoordIntersectsViewport(n,h){return(0,S.mV)(h,0,h.length,2,this.getTileCoordExtent(n))}calculateTileRanges_(n){const h=this.resolutions_.length,g=new Array(h);for(let e=this.minZoom;e<h;++e)g[e]=this.getTileRangeForExtentAndZ(n,e);this.fullTileRanges_=g}}},2258:(Bt,ot,a)=>{"use strict";a.d(ot,{S:()=>D,e:()=>G});const G=42,D=256},5809:(Bt,ot,a)=>{"use strict";a.d(ot,{Gk:()=>P,Un:()=>I,uR:()=>U});var G=a(992),D=a(4331),k=a(5474);function z(p,d){const u=/\{z\}/g,c=/\{x\}/g,s=/\{y\}/g,f=/\{-y\}/g;return function(n,h,g){if(n)return p.replace(u,n[0].toString()).replace(c,n[1].toString()).replace(s,n[2].toString()).replace(f,function(){const E=d.getFullTileRange(n[0]);return(0,G.h)(E,55),(E.getHeight()-n[2]-1).toString()})}}function U(p,d){const u=p.length,c=new Array(u);for(let s=0;s<u;++s)c[s]=z(p[s],d);return I(c)}function I(p){return 1===p.length?p[0]:function(d,u,c){if(!d)return;const s=(0,k.vp)(d),f=(0,D.$W)(s,p.length);return p[f](d,u,c)}}function P(p){const d=[];let u=/\{([a-z])-([a-z])\}/.exec(p);if(u){const c=u[1].charCodeAt(0),s=u[2].charCodeAt(0);let f;for(f=c;f<=s;++f)d.push(p.replace(u[0],String.fromCharCode(f)));return d}if(u=/\{(\d+)-(\d+)\}/.exec(p),u){const c=parseInt(u[2],10);for(let s=parseInt(u[1],10);s<=c;s++)d.push(p.replace(u[0],s.toString()));return d}return d.push(p),d}},7139:(Bt,ot,a)=>{"use strict";a.d(ot,{BB:()=>v,Iu:()=>s,Jp:()=>I,U1:()=>d,Ue:()=>z,bA:()=>u,lk:()=>P,mc:()=>U,n3:()=>c,nb:()=>g,nn:()=>p,qC:()=>f});var G=a(5063),D=a(992);const k=new Array(6);function z(){return[1,0,0,1,0,0]}function U(x){return S(x,1,0,0,1,0,0)}function I(x,w){const O=x[0],y=x[1],R=x[2],W=x[3],K=x[4],nt=x[5],A=w[0],L=w[1],b=w[2],M=w[3],C=w[4],N=w[5];return x[0]=O*A+R*L,x[1]=y*A+W*L,x[2]=O*b+R*M,x[3]=y*b+W*M,x[4]=O*C+R*N+K,x[5]=y*C+W*N+nt,x}function S(x,w,O,y,R,W,K){return x[0]=w,x[1]=O,x[2]=y,x[3]=R,x[4]=W,x[5]=K,x}function P(x,w){return x[0]=w[0],x[1]=w[1],x[2]=w[2],x[3]=w[3],x[4]=w[4],x[5]=w[5],x}function p(x,w){const O=w[0],y=w[1];return w[0]=x[0]*O+x[2]*y+x[4],w[1]=x[1]*O+x[3]*y+x[5],w}function d(x,w){const O=Math.cos(w),y=Math.sin(w);return I(x,S(k,O,y,-y,O,0,0))}function u(x,w,O){return I(x,S(k,w,0,0,O,0,0))}function c(x,w,O){return S(x,w,0,0,O,0,0)}function s(x,w,O){return I(x,S(k,1,0,0,1,w,O))}function f(x,w,O,y,R,W,K,nt){const A=Math.sin(W),L=Math.cos(W);return x[0]=y*L,x[1]=R*A,x[2]=-y*A,x[3]=R*L,x[4]=K*y*L-nt*y*A+w,x[5]=K*R*A+nt*R*L+O,x}function g(x,w){const O=function e(x){return x[0]*x[3]-x[1]*x[2]}(w);(0,D.h)(0!==O,32);const y=w[0],R=w[1],W=w[2],K=w[3],nt=w[4],A=w[5];return x[0]=K/O,x[1]=-R/O,x[2]=-W/O,x[3]=y/O,x[4]=(W*A-K*nt)/O,x[5]=-(y*A-R*nt)/O,x}let E;function v(x){const w="matrix("+x.join(", ")+")";if(G.Id)return w;const O=E||(E=document.createElement("div"));return O.style.transform=w,O.style.transform}},6941:(Bt,ot,a)=>{"use strict";function G(D,k){const z=[];Object.keys(k).forEach(function(I){null!=k[I]&&z.push(I+"="+encodeURIComponent(k[I]))});const U=z.join("&");return D=D.replace(/[?&]$/,""),(D+=D.includes("?")?"&":"?")+U}a.d(ot,{B:()=>G})},513:(Bt,ot,a)=>{"use strict";function G(){throw new Error("Unimplemented abstract method.")}a.d(ot,{O3:()=>G,sq:()=>k});let D=0;function k(U){return U.ol_uid||(U.ol_uid=String(++D))}},8809:(Bt,ot,a)=>{"use strict";a.d(ot,{A4:()=>f,C5:()=>E,Ei:()=>d,G3:()=>h,Me:()=>A,O:()=>x,Pr:()=>s,Qc:()=>P,RA:()=>e,T3:()=>v,Ve:()=>z,ZL:()=>O,c:()=>k,fJ:()=>D,hg:()=>g,ke:()=>c,pc:()=>p,qk:()=>I,xc:()=>W,z:()=>u});var G=a(142);const D="http://www.w3.org/2001/XMLSchema-instance";function k(L,b){return A().createElementNS(L,b)}function z(L,b){return U(L,b,[]).join("")}function U(L,b,M){if(L.nodeType==Node.CDATA_SECTION_NODE||L.nodeType==Node.TEXT_NODE)M.push(b?String(L.nodeValue).replace(/(\r\n|\r|\n)/g,""):L.nodeValue);else{let C;for(C=L.firstChild;C;C=C.nextSibling)U(C,b,M)}return M}function I(L){return"documentElement"in L}function P(L){return(new DOMParser).parseFromString(L,"application/xml")}function p(L,b){return function(M,C){const N=L.call(void 0!==b?b:this,M,C);void 0!==N&&(0,G.l7)(C[C.length-1],N)}}function d(L,b){return function(M,C){const N=L.call(void 0!==b?b:this,M,C);void 0!==N&&C[C.length-1].push(N)}}function u(L,b){return function(M,C){const N=L.call(void 0!==b?b:this,M,C);void 0!==N&&(C[C.length-1]=N)}}function c(L,b,M){return function(C,N){const H=L.call(void 0!==M?M:this,C,N);if(void 0!==H){const it=N[N.length-1],Y=void 0!==b?b:C.localName;let st;Y in it?st=it[Y]:(st=[],it[Y]=st),st.push(H)}}}function s(L,b,M){return function(C,N){const H=L.call(void 0!==M?M:this,C,N);void 0!==H&&(N[N.length-1][void 0!==b?b:C.localName]=H)}}function f(L,b){return function(M,C,N){L.call(void 0!==b?b:this,M,C,N),N[N.length-1].node.appendChild(M)}}function h(L,b){return function(M,C,N){let Y=L;return void 0===Y&&(Y=N),k(void 0!==b?b:C[C.length-1].node.namespaceURI,Y)}}const g=h();function e(L,b){const M=b.length,C=new Array(M);for(let N=0;N<M;++N)C[N]=L[b[N]];return C}function E(L,b,M){let C,N;for(M=void 0!==M?M:{},C=0,N=L.length;C<N;++C)M[L[C]]=b;return M}function v(L,b,M,C){let N;for(N=b.firstElementChild;N;N=N.nextElementSibling){const H=L[N.namespaceURI];if(void 0!==H){const it=H[N.localName];void 0!==it&&it.call(C,N,M)}}}function x(L,b,M,C,N){return C.push(L),v(b,M,C,N),C.pop()}function O(L,b,M,C,N,H,it){return N.push(L),function w(L,b,M,C,N,H){const it=(void 0!==N?N:M).length;let Y,st;for(let ht=0;ht<it;++ht)Y=M[ht],void 0!==Y&&(st=b.call(void 0!==H?H:this,Y,C,void 0!==N?N[ht]:void 0),void 0!==st&&L[st.namespaceURI][st.localName].call(H,st,Y,C))}(b,M,C,N,H,it),N.pop()}let y,K;function W(){return void 0===y&&typeof XMLSerializer<"u"&&(y=new XMLSerializer),y}function A(){return void 0===K&&typeof document<"u"&&(K=document.implementation.createDocument("","",null)),K}}}]);