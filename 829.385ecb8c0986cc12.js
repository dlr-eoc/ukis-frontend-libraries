(self.webpackChunkdemo_maps=self.webpackChunkdemo_maps||[]).push([[829],{9176:(jt,ht)=>{ht.read=function(a,W,F,k,G){var Z,b,S=8*G-k-1,P=(1<<S)-1,v=P>>1,f=-7,u=F?G-1:0,c=F?-1:1,r=a[W+u];for(u+=c,Z=r&(1<<-f)-1,r>>=-f,f+=S;f>0;Z=256*Z+a[W+u],u+=c,f-=8);for(b=Z&(1<<-f)-1,Z>>=-f,f+=k;f>0;b=256*b+a[W+u],u+=c,f-=8);if(0===Z)Z=1-v;else{if(Z===P)return b?NaN:1/0*(r?-1:1);b+=Math.pow(2,k),Z-=v}return(r?-1:1)*b*Math.pow(2,Z-k)},ht.write=function(a,W,F,k,G,Z){var b,S,P,v=8*Z-G-1,f=(1<<v)-1,u=f>>1,c=23===G?Math.pow(2,-24)-Math.pow(2,-77):0,r=k?0:Z-1,d=k?1:-1,e=W<0||0===W&&1/W<0?1:0;for(W=Math.abs(W),isNaN(W)||W===1/0?(S=isNaN(W)?1:0,b=f):(b=Math.floor(Math.log(W)/Math.LN2),W*(P=Math.pow(2,-b))<1&&(b--,P*=2),(W+=b+u>=1?c/P:c*Math.pow(2,1-u))*P>=2&&(b++,P/=2),b+u>=f?(S=0,b=f):b+u>=1?(S=(W*P-1)*Math.pow(2,G),b+=u):(S=W*Math.pow(2,u-1)*Math.pow(2,G),b=0));G>=8;a[F+r]=255&S,r+=d,S/=256,G-=8);for(b=b<<G|S,v+=G;v>0;a[F+r]=255&b,r+=d,b/=256,v-=8);a[F+r-d]|=128*e}},1492:(jt,ht,a)=>{"use strict";jt.exports=F;var W=a(9176);function F(A){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(A)?A:new Uint8Array(A||0),this.pos=0,this.type=0,this.length=this.buf.length}F.Varint=0,F.Fixed64=1,F.Bytes=2,F.Fixed32=5;var k=4294967296,G=1/k,b=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function P(A){return A.type===F.Bytes?A.readVarint()+A.pos:A.pos+1}function r(A,L,w){var x=L<=16383?1:L<=2097151?2:L<=268435455?3:Math.floor(Math.log(L)/(7*Math.LN2));w.realloc(x);for(var C=w.pos-1;C>=A;C--)w.buf[C+x]=w.buf[C]}function d(A,L){for(var w=0;w<A.length;w++)L.writeVarint(A[w])}function e(A,L){for(var w=0;w<A.length;w++)L.writeSVarint(A[w])}function l(A,L){for(var w=0;w<A.length;w++)L.writeFloat(A[w])}function _(A,L){for(var w=0;w<A.length;w++)L.writeDouble(A[w])}function n(A,L){for(var w=0;w<A.length;w++)L.writeBoolean(A[w])}function g(A,L){for(var w=0;w<A.length;w++)L.writeFixed32(A[w])}function m(A,L){for(var w=0;w<A.length;w++)L.writeSFixed32(A[w])}function y(A,L){for(var w=0;w<A.length;w++)L.writeFixed64(A[w])}function I(A,L){for(var w=0;w<A.length;w++)L.writeSFixed64(A[w])}function O(A,L){return(A[L]|A[L+1]<<8|A[L+2]<<16)+16777216*A[L+3]}function E(A,L,w){A[w]=L,A[w+1]=L>>>8,A[w+2]=L>>>16,A[w+3]=L>>>24}function R(A,L){return(A[L]|A[L+1]<<8|A[L+2]<<16)+(A[L+3]<<24)}F.prototype={destroy:function(){this.buf=null},readFields:function(A,L,w){for(w=w||this.length;this.pos<w;){var x=this.readVarint(),C=x>>3,D=this.pos;this.type=7&x,A(C,L,this),this.pos===D&&this.skip(x)}return L},readMessage:function(A,L){return this.readFields(A,L,this.readVarint()+this.pos)},readFixed32:function(){var A=O(this.buf,this.pos);return this.pos+=4,A},readSFixed32:function(){var A=R(this.buf,this.pos);return this.pos+=4,A},readFixed64:function(){var A=O(this.buf,this.pos)+O(this.buf,this.pos+4)*k;return this.pos+=8,A},readSFixed64:function(){var A=O(this.buf,this.pos)+R(this.buf,this.pos+4)*k;return this.pos+=8,A},readFloat:function(){var A=W.read(this.buf,this.pos,!0,23,4);return this.pos+=4,A},readDouble:function(){var A=W.read(this.buf,this.pos,!0,52,8);return this.pos+=8,A},readVarint:function(A){var w,x,L=this.buf;return w=127&(x=L[this.pos++]),x<128||(w|=(127&(x=L[this.pos++]))<<7,x<128)||(w|=(127&(x=L[this.pos++]))<<14,x<128)||(w|=(127&(x=L[this.pos++]))<<21,x<128)?w:function S(A,L,w){var C,D,x=w.buf;if(C=(112&(D=x[w.pos++]))>>4,D<128||(C|=(127&(D=x[w.pos++]))<<3,D<128)||(C|=(127&(D=x[w.pos++]))<<10,D<128)||(C|=(127&(D=x[w.pos++]))<<17,D<128)||(C|=(127&(D=x[w.pos++]))<<24,D<128)||(C|=(1&(D=x[w.pos++]))<<31,D<128))return function v(A,L,w){return w?4294967296*L+(A>>>0):4294967296*(L>>>0)+(A>>>0)}(A,C,L);throw new Error("Expected varint not more than 10 bytes")}(w|=(15&(x=L[this.pos]))<<28,A,this)},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var A=this.readVarint();return A%2==1?(A+1)/-2:A/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var A=this.readVarint()+this.pos,L=this.pos;return this.pos=A,A-L>=12&&b?function z(A,L,w){return b.decode(A.subarray(L,w))}(this.buf,L,A):function N(A,L,w){for(var x="",C=L;C<w;){var V,at,ut,D=A[C],Y=null,nt=D>239?4:D>223?3:D>191?2:1;if(C+nt>w)break;1===nt?D<128&&(Y=D):2===nt?128==(192&(V=A[C+1]))&&(Y=(31&D)<<6|63&V)<=127&&(Y=null):3===nt?(at=A[C+2],128==(192&(V=A[C+1]))&&128==(192&at)&&((Y=(15&D)<<12|(63&V)<<6|63&at)<=2047||Y>=55296&&Y<=57343)&&(Y=null)):4===nt&&(at=A[C+2],ut=A[C+3],128==(192&(V=A[C+1]))&&128==(192&at)&&128==(192&ut)&&((Y=(15&D)<<18|(63&V)<<12|(63&at)<<6|63&ut)<=65535||Y>=1114112)&&(Y=null)),null===Y?(Y=65533,nt=1):Y>65535&&(Y-=65536,x+=String.fromCharCode(Y>>>10&1023|55296),Y=56320|1023&Y),x+=String.fromCharCode(Y),C+=nt}return x}(this.buf,L,A)},readBytes:function(){var A=this.readVarint()+this.pos,L=this.buf.subarray(this.pos,A);return this.pos=A,L},readPackedVarint:function(A,L){if(this.type!==F.Bytes)return A.push(this.readVarint(L));var w=P(this);for(A=A||[];this.pos<w;)A.push(this.readVarint(L));return A},readPackedSVarint:function(A){if(this.type!==F.Bytes)return A.push(this.readSVarint());var L=P(this);for(A=A||[];this.pos<L;)A.push(this.readSVarint());return A},readPackedBoolean:function(A){if(this.type!==F.Bytes)return A.push(this.readBoolean());var L=P(this);for(A=A||[];this.pos<L;)A.push(this.readBoolean());return A},readPackedFloat:function(A){if(this.type!==F.Bytes)return A.push(this.readFloat());var L=P(this);for(A=A||[];this.pos<L;)A.push(this.readFloat());return A},readPackedDouble:function(A){if(this.type!==F.Bytes)return A.push(this.readDouble());var L=P(this);for(A=A||[];this.pos<L;)A.push(this.readDouble());return A},readPackedFixed32:function(A){if(this.type!==F.Bytes)return A.push(this.readFixed32());var L=P(this);for(A=A||[];this.pos<L;)A.push(this.readFixed32());return A},readPackedSFixed32:function(A){if(this.type!==F.Bytes)return A.push(this.readSFixed32());var L=P(this);for(A=A||[];this.pos<L;)A.push(this.readSFixed32());return A},readPackedFixed64:function(A){if(this.type!==F.Bytes)return A.push(this.readFixed64());var L=P(this);for(A=A||[];this.pos<L;)A.push(this.readFixed64());return A},readPackedSFixed64:function(A){if(this.type!==F.Bytes)return A.push(this.readSFixed64());var L=P(this);for(A=A||[];this.pos<L;)A.push(this.readSFixed64());return A},skip:function(A){var L=7&A;if(L===F.Varint)for(;this.buf[this.pos++]>127;);else if(L===F.Bytes)this.pos=this.readVarint()+this.pos;else if(L===F.Fixed32)this.pos+=4;else{if(L!==F.Fixed64)throw new Error("Unimplemented type: "+L);this.pos+=8}},writeTag:function(A,L){this.writeVarint(A<<3|L)},realloc:function(A){for(var L=this.length||16;L<this.pos+A;)L*=2;if(L!==this.length){var w=new Uint8Array(L);w.set(this.buf),this.buf=w,this.length=L}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(A){this.realloc(4),E(this.buf,A,this.pos),this.pos+=4},writeSFixed32:function(A){this.realloc(4),E(this.buf,A,this.pos),this.pos+=4},writeFixed64:function(A){this.realloc(8),E(this.buf,-1&A,this.pos),E(this.buf,Math.floor(A*G),this.pos+4),this.pos+=8},writeSFixed64:function(A){this.realloc(8),E(this.buf,-1&A,this.pos),E(this.buf,Math.floor(A*G),this.pos+4),this.pos+=8},writeVarint:function(A){(A=+A||0)>268435455||A<0?function f(A,L){var w,x;if(A>=0?(w=A%4294967296|0,x=A/4294967296|0):(x=~(-A/4294967296),4294967295^(w=~(-A%4294967296))?w=w+1|0:(w=0,x=x+1|0)),A>=0x10000000000000000||A<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");L.realloc(10),function u(A,L,w){w.buf[w.pos++]=127&A|128,A>>>=7,w.buf[w.pos++]=127&A|128,A>>>=7,w.buf[w.pos++]=127&A|128,A>>>=7,w.buf[w.pos++]=127&A|128,w.buf[w.pos]=127&(A>>>=7)}(w,0,L),function c(A,L){var w=(7&A)<<4;L.buf[L.pos++]|=w|((A>>>=3)?128:0),A&&(L.buf[L.pos++]=127&A|((A>>>=7)?128:0),A&&(L.buf[L.pos++]=127&A|((A>>>=7)?128:0),A&&(L.buf[L.pos++]=127&A|((A>>>=7)?128:0),A&&(L.buf[L.pos++]=127&A|((A>>>=7)?128:0),A&&(L.buf[L.pos++]=127&A)))))}(x,L)}(A,this):(this.realloc(4),this.buf[this.pos++]=127&A|(A>127?128:0),!(A<=127)&&(this.buf[this.pos++]=127&(A>>>=7)|(A>127?128:0),!(A<=127)&&(this.buf[this.pos++]=127&(A>>>=7)|(A>127?128:0),!(A<=127)&&(this.buf[this.pos++]=A>>>7&127))))},writeSVarint:function(A){this.writeVarint(A<0?2*-A-1:2*A)},writeBoolean:function(A){this.writeVarint(!!A)},writeString:function(A){A=String(A),this.realloc(4*A.length),this.pos++;var L=this.pos;this.pos=function st(A,L,w){for(var C,D,x=0;x<L.length;x++){if((C=L.charCodeAt(x))>55295&&C<57344){if(!D){C>56319||x+1===L.length?(A[w++]=239,A[w++]=191,A[w++]=189):D=C;continue}if(C<56320){A[w++]=239,A[w++]=191,A[w++]=189,D=C;continue}C=D-55296<<10|C-56320|65536,D=null}else D&&(A[w++]=239,A[w++]=191,A[w++]=189,D=null);C<128?A[w++]=C:(C<2048?A[w++]=C>>6|192:(C<65536?A[w++]=C>>12|224:(A[w++]=C>>18|240,A[w++]=C>>12&63|128),A[w++]=C>>6&63|128),A[w++]=63&C|128)}return w}(this.buf,A,this.pos);var w=this.pos-L;w>=128&&r(L,w,this),this.pos=L-1,this.writeVarint(w),this.pos+=w},writeFloat:function(A){this.realloc(4),W.write(this.buf,A,this.pos,!0,23,4),this.pos+=4},writeDouble:function(A){this.realloc(8),W.write(this.buf,A,this.pos,!0,52,8),this.pos+=8},writeBytes:function(A){var L=A.length;this.writeVarint(L),this.realloc(L);for(var w=0;w<L;w++)this.buf[this.pos++]=A[w]},writeRawMessage:function(A,L){this.pos++;var w=this.pos;A(L,this);var x=this.pos-w;x>=128&&r(w,x,this),this.pos=w-1,this.writeVarint(x),this.pos+=x},writeMessage:function(A,L,w){this.writeTag(A,F.Bytes),this.writeRawMessage(L,w)},writePackedVarint:function(A,L){L.length&&this.writeMessage(A,d,L)},writePackedSVarint:function(A,L){L.length&&this.writeMessage(A,e,L)},writePackedBoolean:function(A,L){L.length&&this.writeMessage(A,n,L)},writePackedFloat:function(A,L){L.length&&this.writeMessage(A,l,L)},writePackedDouble:function(A,L){L.length&&this.writeMessage(A,_,L)},writePackedFixed32:function(A,L){L.length&&this.writeMessage(A,g,L)},writePackedSFixed32:function(A,L){L.length&&this.writeMessage(A,m,L)},writePackedFixed64:function(A,L){L.length&&this.writeMessage(A,y,L)},writePackedSFixed64:function(A,L){L.length&&this.writeMessage(A,I,L)},writeBytesField:function(A,L){this.writeTag(A,F.Bytes),this.writeBytes(L)},writeFixed32Field:function(A,L){this.writeTag(A,F.Fixed32),this.writeFixed32(L)},writeSFixed32Field:function(A,L){this.writeTag(A,F.Fixed32),this.writeSFixed32(L)},writeFixed64Field:function(A,L){this.writeTag(A,F.Fixed64),this.writeFixed64(L)},writeSFixed64Field:function(A,L){this.writeTag(A,F.Fixed64),this.writeSFixed64(L)},writeVarintField:function(A,L){this.writeTag(A,F.Varint),this.writeVarint(L)},writeSVarintField:function(A,L){this.writeTag(A,F.Varint),this.writeSVarint(L)},writeStringField:function(A,L){this.writeTag(A,F.Bytes),this.writeString(L)},writeFloatField:function(A,L){this.writeTag(A,F.Fixed32),this.writeFloat(L)},writeDoubleField:function(A,L){this.writeTag(A,F.Fixed64),this.writeDouble(L)},writeBooleanField:function(A,L){this.writeVarintField(A,!!L)}}},5661:(jt,ht,a)=>{"use strict";a.d(ht,{Z:()=>we});var F=1,k=2,G=3,b=5,S=6378137,P=6356752.314,v=.0066943799901413165,f=484813681109536e-20,u=Math.PI/2,e=1e-10,l=.017453292519943295,_=57.29577951308232,n=Math.PI/4,g=2*Math.PI,m=3.14159265359,y={greenwich:0,lisbon:-9.131906111111,paris:2.337229166667,bogota:-74.080916666667,madrid:-3.687938888889,rome:12.452333333333,bern:7.439583333333,jakarta:106.807719444444,ferro:-17.666666666667,brussels:4.367975,stockholm:18.058277777778,athens:23.7163375,oslo:10.722916666667};const I={ft:{to_meter:.3048},"us-ft":{to_meter:1200/3937}};var O=/[\s_\-\/\(\)]/g;function E(t,h){if(t[h])return t[h];for(var X,p=Object.keys(t),B=h.toLowerCase().replace(O,""),j=-1;++j<p.length;)if((X=p[j]).toLowerCase().replace(O,"")===B)return t[X]}function R(t){var B,j,X,h={},p=t.split("+").map(function(Q){return Q.trim()}).filter(function(Q){return Q}).reduce(function(Q,ct){var xt=ct.split("=");return xt.push(!0),Q[xt[0].toLowerCase()]=xt[1],Q},{}),tt={proj:"projName",datum:"datumCode",rf:function(Q){h.rf=parseFloat(Q)},lat_0:function(Q){h.lat0=Q*l},lat_1:function(Q){h.lat1=Q*l},lat_2:function(Q){h.lat2=Q*l},lat_ts:function(Q){h.lat_ts=Q*l},lon_0:function(Q){h.long0=Q*l},lon_1:function(Q){h.long1=Q*l},lon_2:function(Q){h.long2=Q*l},alpha:function(Q){h.alpha=parseFloat(Q)*l},gamma:function(Q){h.rectified_grid_angle=parseFloat(Q)},lonc:function(Q){h.longc=Q*l},x_0:function(Q){h.x0=parseFloat(Q)},y_0:function(Q){h.y0=parseFloat(Q)},k_0:function(Q){h.k0=parseFloat(Q)},k:function(Q){h.k0=parseFloat(Q)},a:function(Q){h.a=parseFloat(Q)},b:function(Q){h.b=parseFloat(Q)},r_a:function(){h.R_A=!0},zone:function(Q){h.zone=parseInt(Q,10)},south:function(){h.utmSouth=!0},towgs84:function(Q){h.datum_params=Q.split(",").map(function(ct){return parseFloat(ct)})},to_meter:function(Q){h.to_meter=parseFloat(Q)},units:function(Q){h.units=Q;var ct=E(I,Q);ct&&(h.to_meter=ct.to_meter)},from_greenwich:function(Q){h.from_greenwich=Q*l},pm:function(Q){var ct=E(y,Q);h.from_greenwich=(ct||parseFloat(Q))*l},nadgrids:function(Q){"@null"===Q?h.datumCode="none":h.nadgrids=Q},axis:function(Q){var ct="ewnsud";3===Q.length&&-1!==ct.indexOf(Q.substr(0,1))&&-1!==ct.indexOf(Q.substr(1,1))&&-1!==ct.indexOf(Q.substr(2,1))&&(h.axis=Q)},approx:function(){h.approx=!0}};for(B in p)j=p[B],B in tt?"function"==typeof(X=tt[B])?X(j):h[X]=j:h[B]=j;return"string"==typeof h.datumCode&&"WGS84"!==h.datumCode&&(h.datumCode=h.datumCode.toLowerCase()),h}const N=function ut(t){return new at(t).output()};var z=1,C=/\s/,D=/[A-Za-z]/,Y=/[A-Za-z84_]/,nt=/[,\]]/,V=/[\d\.E\-\+]/;function at(t){if("string"!=typeof t)throw new Error("not a string");this.text=t.trim(),this.level=0,this.place=0,this.root=null,this.stack=[],this.currentObject=null,this.state=z}function Ct(t,h,p){Array.isArray(h)&&(p.unshift(h),h=null);var j=p.reduce(function(X,tt){return vt(tt,X),X},h?{}:t);h&&(t[h]=j)}function vt(t,h){if(Array.isArray(t)){var p=t.shift();if("PARAMETER"===p&&(p=t.shift()),1===t.length)return Array.isArray(t[0])?(h[p]={},void vt(t[0],h[p])):void(h[p]=t[0]);if(t.length)if("TOWGS84"!==p){if("AXIS"===p)return p in h||(h[p]=[]),void h[p].push(t);var B;switch(Array.isArray(p)||(h[p]={}),p){case"UNIT":case"PRIMEM":case"VERT_DATUM":return h[p]={name:t[0].toLowerCase(),convert:t[1]},void(3===t.length&&vt(t[2],h[p]));case"SPHEROID":case"ELLIPSOID":return h[p]={name:t[0],a:t[1],rf:t[2]},void(4===t.length&&vt(t[3],h[p]));case"PROJECTEDCRS":case"PROJCRS":case"GEOGCS":case"GEOCCS":case"PROJCS":case"LOCAL_CS":case"GEODCRS":case"GEODETICCRS":case"GEODETICDATUM":case"EDATUM":case"ENGINEERINGDATUM":case"VERT_CS":case"VERTCRS":case"VERTICALCRS":case"COMPD_CS":case"COMPOUNDCRS":case"ENGINEERINGCRS":case"ENGCRS":case"FITTED_CS":case"LOCAL_DATUM":case"DATUM":return t[0]=["name",t[0]],void Ct(h,p,t);default:for(B=-1;++B<t.length;)if(!Array.isArray(t[B]))return vt(t,h[p]);return Ct(h,p,t)}}else h[p]=t;else h[p]=!0}else h[t]=!0}at.prototype.readCharicter=function(){var t=this.text[this.place++];if(4!==this.state)for(;C.test(t);){if(this.place>=this.text.length)return;t=this.text[this.place++]}switch(this.state){case z:return this.neutral(t);case 2:return this.keyword(t);case 4:return this.quoted(t);case 5:return this.afterquote(t);case 3:return this.number(t);case-1:return}},at.prototype.afterquote=function(t){if('"'===t)return this.word+='"',void(this.state=4);if(nt.test(t))return this.word=this.word.trim(),void this.afterItem(t);throw new Error("havn't handled \""+t+'" in afterquote yet, index '+this.place)},at.prototype.afterItem=function(t){return","===t?(null!==this.word&&this.currentObject.push(this.word),this.word=null,void(this.state=z)):"]"===t?(this.level--,null!==this.word&&(this.currentObject.push(this.word),this.word=null),this.state=z,this.currentObject=this.stack.pop(),void(this.currentObject||(this.state=-1))):void 0},at.prototype.number=function(t){if(!V.test(t)){if(nt.test(t))return this.word=parseFloat(this.word),void this.afterItem(t);throw new Error("havn't handled \""+t+'" in number yet, index '+this.place)}this.word+=t},at.prototype.quoted=function(t){'"'!==t?this.word+=t:this.state=5},at.prototype.keyword=function(t){if(Y.test(t))this.word+=t;else{if("["===t){var h=[];return h.push(this.word),this.level++,null===this.root?this.root=h:this.currentObject.push(h),this.stack.push(this.currentObject),this.currentObject=h,void(this.state=z)}if(!nt.test(t))throw new Error("havn't handled \""+t+'" in keyword yet, index '+this.place);this.afterItem(t)}},at.prototype.neutral=function(t){if(D.test(t))return this.word=t,void(this.state=2);if('"'===t)return this.word="",void(this.state=4);if(V.test(t))return this.word=t,void(this.state=3);if(!nt.test(t))throw new Error("havn't handled \""+t+'" in neutral yet, index '+this.place);this.afterItem(t)},at.prototype.output=function(){for(;this.place<this.text.length;)this.readCharicter();if(-1===this.state)return this.root;throw new Error('unable to parse string "'+this.text+'". State is '+this.state)};var St=.017453292519943295;function Gt(t){return t*St}function te(t){var h=N(t),p=h.shift(),B=h.shift();h.unshift(["name",B]),h.unshift(["type",p]);var j={};return vt(h,j),function Xt(t){if("GEOGCS"===t.type?t.projName="longlat":"LOCAL_CS"===t.type?(t.projName="identity",t.local=!0):t.projName="object"==typeof t.PROJECTION?Object.keys(t.PROJECTION)[0]:t.PROJECTION,t.AXIS){for(var h="",p=0,B=t.AXIS.length;p<B;++p){var j=[t.AXIS[p][0].toLowerCase(),t.AXIS[p][1].toLowerCase()];-1!==j[0].indexOf("north")||("y"===j[0]||"lat"===j[0])&&"north"===j[1]?h+="n":-1!==j[0].indexOf("south")||("y"===j[0]||"lat"===j[0])&&"south"===j[1]?h+="s":-1!==j[0].indexOf("east")||("x"===j[0]||"lon"===j[0])&&"east"===j[1]?h+="e":(-1!==j[0].indexOf("west")||("x"===j[0]||"lon"===j[0])&&"west"===j[1])&&(h+="w")}2===h.length&&(h+="u"),3===h.length&&(t.axis=h)}t.UNIT&&(t.units=t.UNIT.name.toLowerCase(),"metre"===t.units&&(t.units="meter"),t.UNIT.convert&&("GEOGCS"===t.type?t.DATUM&&t.DATUM.SPHEROID&&(t.to_meter=t.UNIT.convert*t.DATUM.SPHEROID.a):t.to_meter=t.UNIT.convert));var X=t.GEOGCS;function tt(xt){return xt*(t.to_meter||1)}"GEOGCS"===t.type&&(X=t),X&&(t.datumCode=X.DATUM?X.DATUM.name.toLowerCase():X.name.toLowerCase(),"d_"===t.datumCode.slice(0,2)&&(t.datumCode=t.datumCode.slice(2)),("new_zealand_geodetic_datum_1949"===t.datumCode||"new_zealand_1949"===t.datumCode)&&(t.datumCode="nzgd49"),("wgs_1984"===t.datumCode||"world_geodetic_system_1984"===t.datumCode)&&("Mercator_Auxiliary_Sphere"===t.PROJECTION&&(t.sphere=!0),t.datumCode="wgs84"),"_ferro"===t.datumCode.slice(-6)&&(t.datumCode=t.datumCode.slice(0,-6)),"_jakarta"===t.datumCode.slice(-8)&&(t.datumCode=t.datumCode.slice(0,-8)),~t.datumCode.indexOf("belge")&&(t.datumCode="rnb72"),X.DATUM&&X.DATUM.SPHEROID&&(t.ellps=X.DATUM.SPHEROID.name.replace("_19","").replace(/[Cc]larke\_18/,"clrk"),"international"===t.ellps.toLowerCase().slice(0,13)&&(t.ellps="intl"),t.a=X.DATUM.SPHEROID.a,t.rf=parseFloat(X.DATUM.SPHEROID.rf,10)),X.DATUM&&X.DATUM.TOWGS84&&(t.datum_params=X.DATUM.TOWGS84),~t.datumCode.indexOf("osgb_1936")&&(t.datumCode="osgb36"),~t.datumCode.indexOf("osni_1952")&&(t.datumCode="osni52"),(~t.datumCode.indexOf("tm65")||~t.datumCode.indexOf("geodetic_datum_of_1965"))&&(t.datumCode="ire65"),"ch1903+"===t.datumCode&&(t.datumCode="ch1903"),~t.datumCode.indexOf("israel")&&(t.datumCode="isr93")),t.b&&!isFinite(t.b)&&(t.b=t.a),[["standard_parallel_1","Standard_Parallel_1"],["standard_parallel_1","Latitude of 1st standard parallel"],["standard_parallel_2","Standard_Parallel_2"],["standard_parallel_2","Latitude of 2nd standard parallel"],["false_easting","False_Easting"],["false_easting","False easting"],["false-easting","Easting at false origin"],["false_northing","False_Northing"],["false_northing","False northing"],["false_northing","Northing at false origin"],["central_meridian","Central_Meridian"],["central_meridian","Longitude of natural origin"],["central_meridian","Longitude of false origin"],["latitude_of_origin","Latitude_Of_Origin"],["latitude_of_origin","Central_Parallel"],["latitude_of_origin","Latitude of natural origin"],["latitude_of_origin","Latitude of false origin"],["scale_factor","Scale_Factor"],["k0","scale_factor"],["latitude_of_center","Latitude_Of_Center"],["latitude_of_center","Latitude_of_center"],["lat0","latitude_of_center",Gt],["longitude_of_center","Longitude_Of_Center"],["longitude_of_center","Longitude_of_center"],["longc","longitude_of_center",Gt],["x0","false_easting",tt],["y0","false_northing",tt],["long0","central_meridian",Gt],["lat0","latitude_of_origin",Gt],["lat0","standard_parallel_1",Gt],["lat1","standard_parallel_1",Gt],["lat2","standard_parallel_2",Gt],["azimuth","Azimuth"],["alpha","azimuth",Gt],["srsCode","name"]].forEach(function(xt){return function bt(t,h){var p=h[0],B=h[1];!(p in t)&&B in t&&(t[p]=t[B],3===h.length&&(t[p]=h[2](t[p])))}(t,xt)}),!t.long0&&t.longc&&("Albers_Conic_Equal_Area"===t.projName||"Lambert_Azimuthal_Equal_Area"===t.projName)&&(t.long0=t.longc),t.lat_ts||!t.lat1||"Stereographic_South_Pole"!==t.projName&&"Polar Stereographic (variant B)"!==t.projName?!t.lat_ts&&t.lat0&&"Polar_Stereographic"===t.projName&&(t.lat_ts=t.lat0,t.lat0=Gt(t.lat0>0?90:-90)):(t.lat0=Gt(t.lat1>0?90:-90),t.lat_ts=t.lat1)}(j),j}function Vt(t){var h=this;if(2===arguments.length){var p=arguments[1];Vt[t]="string"==typeof p?"+"===p.charAt(0)?R(arguments[1]):te(arguments[1]):p}else if(1===arguments.length){if(Array.isArray(t))return t.map(function(B){Array.isArray(B)?Vt.apply(h,B):Vt(B)});if("string"==typeof t){if(t in Vt)return Vt[t]}else"EPSG"in t?Vt["EPSG:"+t.EPSG]=t:"ESRI"in t?Vt["ESRI:"+t.ESRI]=t:"IAU2000"in t?Vt["IAU2000:"+t.IAU2000]=t:console.log(t);return}}!function W(t){t("EPSG:4326","+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees"),t("EPSG:4269","+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees"),t("EPSG:3857","+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs"),t.WGS84=t["EPSG:4326"],t["EPSG:3785"]=t["EPSG:3857"],t.GOOGLE=t["EPSG:3857"],t["EPSG:900913"]=t["EPSG:3857"],t["EPSG:102113"]=t["EPSG:3857"]}(Vt);const _e=Vt;var Re=["PROJECTEDCRS","PROJCRS","GEOGCS","GEOCCS","PROJCS","LOCAL_CS","GEODCRS","GEODETICCRS","GEODETICDATUM","ENGCRS","ENGINEERINGCRS"],Rt=["3857","900913","3785","102113"];function Pt(t,h){var p,B;if(t=t||{},!h)return t;for(B in h)void 0!==(p=h[B])&&(t[B]=p);return t}function Nt(t,h,p){var B=t*h;return p/Math.sqrt(1-B*B)}function zt(t){return t<0?-1:1}function Bt(t){return Math.abs(t)<=m?t:t-zt(t)*g}function ue(t,h,p){var B=t*p;return B=Math.pow((1-B)/(1+B),.5*t),Math.tan(.5*(u-h))/B}function ve(t,h){for(var B,j,p=.5*t,X=u-2*Math.atan(h),tt=0;tt<=15;tt++)if(B=t*Math.sin(X),X+=j=u-2*Math.atan(h*Math.pow((1-B)/(1+B),p))-X,Math.abs(j)<=1e-10)return X;return-9999}function et(t){return t}var Et=[{init:function Ee(){var t=this.b/this.a;this.es=1-t*t,"x0"in this||(this.x0=0),"y0"in this||(this.y0=0),this.e=Math.sqrt(this.es),this.lat_ts?this.k0=this.sphere?Math.cos(this.lat_ts):Nt(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)):this.k0||(this.k0=this.k?this.k:1)},forward:function Mt(t){var B,j,h=t.x,p=t.y;if(p*_>90&&p*_<-90&&h*_>180&&h*_<-180)return null;if(Math.abs(Math.abs(p)-u)<=e)return null;if(this.sphere)B=this.x0+this.a*this.k0*Bt(h-this.long0),j=this.y0+this.a*this.k0*Math.log(Math.tan(n+.5*p));else{var X=Math.sin(p),tt=ue(this.e,p,X);B=this.x0+this.a*this.k0*Bt(h-this.long0),j=this.y0-this.a*this.k0*Math.log(tt)}return t.x=B,t.y=j,t},inverse:function rt(t){var B,j,h=t.x-this.x0,p=t.y-this.y0;if(this.sphere)j=u-2*Math.atan(Math.exp(-p/(this.a*this.k0)));else{var X=Math.exp(-p/(this.a*this.k0));if(-9999===(j=ve(this.e,X)))return null}return B=Bt(this.long0+h/(this.a*this.k0)),t.x=B,t.y=j,t},names:["Mercator","Popular Visualisation Pseudo Mercator","Mercator_1SP","Mercator_Auxiliary_Sphere","merc"]},{init:function K(){},forward:et,inverse:et,names:["longlat","identity"]}],At={},Wt=[];function Ht(t,h){var p=Wt.length;return t.names?(Wt[p]=t,t.names.forEach(function(B){At[B.toLowerCase()]=p}),this):(console.log(h),!0)}const ce={start:function Te(){Et.forEach(Ht)},add:Ht,get:function se(t){if(!t)return!1;var h=t.toLowerCase();return typeof At[h]<"u"&&Wt[At[h]]?Wt[At[h]]:void 0}};var ee={MERIT:{a:6378137,rf:298.257,ellipseName:"MERIT 1983"},SGS85:{a:6378136,rf:298.257,ellipseName:"Soviet Geodetic System 85"},GRS80:{a:6378137,rf:298.257222101,ellipseName:"GRS 1980(IUGG, 1980)"},IAU76:{a:6378140,rf:298.257,ellipseName:"IAU 1976"},airy:{a:6377563.396,b:6356256.91,ellipseName:"Airy 1830"},APL4:{a:6378137,rf:298.25,ellipseName:"Appl. Physics. 1965"},NWL9D:{a:6378145,rf:298.25,ellipseName:"Naval Weapons Lab., 1965"},mod_airy:{a:6377340.189,b:6356034.446,ellipseName:"Modified Airy"},andrae:{a:6377104.43,rf:300,ellipseName:"Andrae 1876 (Den., Iclnd.)"},aust_SA:{a:6378160,rf:298.25,ellipseName:"Australian Natl & S. Amer. 1969"},GRS67:{a:6378160,rf:298.247167427,ellipseName:"GRS 67(IUGG 1967)"},bessel:{a:6377397.155,rf:299.1528128,ellipseName:"Bessel 1841"},bess_nam:{a:6377483.865,rf:299.1528128,ellipseName:"Bessel 1841 (Namibia)"},clrk66:{a:6378206.4,b:6356583.8,ellipseName:"Clarke 1866"},clrk80:{a:6378249.145,rf:293.4663,ellipseName:"Clarke 1880 mod."},clrk80ign:{a:6378249.2,b:6356515,rf:293.4660213,ellipseName:"Clarke 1880 (IGN)"},clrk58:{a:6378293.645208759,rf:294.2606763692654,ellipseName:"Clarke 1858"},CPM:{a:6375738.7,rf:334.29,ellipseName:"Comm. des Poids et Mesures 1799"},delmbr:{a:6376428,rf:311.5,ellipseName:"Delambre 1810 (Belgium)"},engelis:{a:6378136.05,rf:298.2566,ellipseName:"Engelis 1985"},evrst30:{a:6377276.345,rf:300.8017,ellipseName:"Everest 1830"},evrst48:{a:6377304.063,rf:300.8017,ellipseName:"Everest 1948"},evrst56:{a:6377301.243,rf:300.8017,ellipseName:"Everest 1956"},evrst69:{a:6377295.664,rf:300.8017,ellipseName:"Everest 1969"},evrstSS:{a:6377298.556,rf:300.8017,ellipseName:"Everest (Sabah & Sarawak)"},fschr60:{a:6378166,rf:298.3,ellipseName:"Fischer (Mercury Datum) 1960"},fschr60m:{a:6378155,rf:298.3,ellipseName:"Fischer 1960"},fschr68:{a:6378150,rf:298.3,ellipseName:"Fischer 1968"},helmert:{a:6378200,rf:298.3,ellipseName:"Helmert 1906"},hough:{a:6378270,rf:297,ellipseName:"Hough"},intl:{a:6378388,rf:297,ellipseName:"International 1909 (Hayford)"},kaula:{a:6378163,rf:298.24,ellipseName:"Kaula 1961"},lerch:{a:6378139,rf:298.257,ellipseName:"Lerch 1979"},mprts:{a:6397300,rf:191,ellipseName:"Maupertius 1738"},new_intl:{a:6378157.5,b:6356772.2,ellipseName:"New International 1967"},plessis:{a:6376523,rf:6355863,ellipseName:"Plessis 1817 (France)"},krass:{a:6378245,rf:298.3,ellipseName:"Krassovsky, 1942"},SEasia:{a:6378155,b:6356773.3205,ellipseName:"Southeast Asia"},walbeck:{a:6376896,b:6355834.8467,ellipseName:"Walbeck"},WGS60:{a:6378165,rf:298.3,ellipseName:"WGS 60"},WGS66:{a:6378145,rf:298.25,ellipseName:"WGS 66"},WGS7:{a:6378135,rf:298.26,ellipseName:"WGS 72"}},We=ee.WGS84={a:6378137,rf:298.257223563,ellipseName:"WGS 84"};ee.sphere={a:6370997,b:6370997,ellipseName:"Normal Sphere (r=6370997)"};var ke={wgs84:{towgs84:"0,0,0",ellipse:"WGS84",datumName:"WGS84"},ch1903:{towgs84:"674.374,15.056,405.346",ellipse:"bessel",datumName:"swiss"},ggrs87:{towgs84:"-199.87,74.79,246.62",ellipse:"GRS80",datumName:"Greek_Geodetic_Reference_System_1987"},nad83:{towgs84:"0,0,0",ellipse:"GRS80",datumName:"North_American_Datum_1983"},nad27:{nadgrids:"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat",ellipse:"clrk66",datumName:"North_American_Datum_1927"},potsdam:{towgs84:"598.1,73.7,418.2,0.202,0.045,-2.455,6.7",ellipse:"bessel",datumName:"Potsdam Rauenberg 1950 DHDN"},carthage:{towgs84:"-263.0,6.0,431.0",ellipse:"clark80",datumName:"Carthage 1934 Tunisia"},hermannskogel:{towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Hermannskogel"},osni52:{towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"airy",datumName:"Irish National"},ire65:{towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"mod_airy",datumName:"Ireland 1965"},rassadiran:{towgs84:"-133.63,-157.5,-158.62",ellipse:"intl",datumName:"Rassadiran"},nzgd49:{towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993",ellipse:"intl",datumName:"New Zealand Geodetic Datum 1949"},osgb36:{towgs84:"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894",ellipse:"airy",datumName:"Airy 1830"},s_jtsk:{towgs84:"589,76,480",ellipse:"bessel",datumName:"S-JTSK (Ferro)"},beduaram:{towgs84:"-106,-87,188",ellipse:"clrk80",datumName:"Beduaram"},gunung_segara:{towgs84:"-403,684,41",ellipse:"bessel",datumName:"Gunung Segara Jakarta"},rnb72:{towgs84:"106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1",ellipse:"intl",datumName:"Reseau National Belge 1972"}};var si={};function $(t){if(0===t.length)return null;var h="@"===t[0];return h&&(t=t.slice(1)),"null"===t?{name:"null",mandatory:!h,grid:null,isNull:!0}:{name:t,mandatory:!h,grid:si[t]||null,isNull:!1}}function J(t){return t/3600*Math.PI/180}function It(t,h,p){return String.fromCharCode.apply(null,new Uint8Array(t.buffer.slice(h,p)))}function ie(t){return t.map(function(h){return[J(h.longitudeShift),J(h.latitudeShift)]})}function ye(t,h,p){return{name:It(t,h+8,h+16).trim(),parent:It(t,h+24,h+24+8).trim(),lowerLatitude:t.getFloat64(h+72,p),upperLatitude:t.getFloat64(h+88,p),lowerLongitude:t.getFloat64(h+104,p),upperLongitude:t.getFloat64(h+120,p),latitudeInterval:t.getFloat64(h+136,p),longitudeInterval:t.getFloat64(h+152,p),gridNodeCount:t.getInt32(h+168,p)}}function Pe(t,h,p,B){for(var j=h+176,tt=[],Q=0;Q<p.gridNodeCount;Q++){var ct={latitudeShift:t.getFloat32(j+16*Q,B),longitudeShift:t.getFloat32(j+16*Q+4,B),latitudeAccuracy:t.getFloat32(j+16*Q+8,B),longitudeAccuracy:t.getFloat32(j+16*Q+12,B)};tt.push(ct)}return tt}function Ie(t,h){if(!(this instanceof Ie))return new Ie(t);h=h||function(xt){if(xt)throw xt};var p=function $t(t){if(!function he(t){return"string"==typeof t}(t))return t;if(function de(t){return t in _e}(t))return _e[t];if(function gt(t){return Re.some(function(h){return t.indexOf(h)>-1})}(t)){var h=te(t);if(function Ft(t){var h=E(t,"authority");if(h){var p=E(h,"epsg");return p&&Rt.indexOf(p)>-1}}(h))return _e["EPSG:3857"];var p=function Yt(t){var h=E(t,"extension");if(h)return E(h,"proj4")}(h);return p?R(p):h}return function ge(t){return"+"===t[0]}(t)?R(t):void 0}(t);if("object"==typeof p){var B=Ie.projections.get(p.projName);if(B){if(p.datumCode&&"none"!==p.datumCode){var j=E(ke,p.datumCode);j&&(p.datum_params=p.datum_params||(j.towgs84?j.towgs84.split(","):null),p.ellps=j.ellipse,p.datumName=j.datumName?j.datumName:p.datumCode)}p.k0=p.k0||1,p.axis=p.axis||"enu",p.ellps=p.ellps||"wgs84",p.lat1=p.lat1||p.lat0;var X=function Ze(t,h,p,B,j){if(!t){var X=E(ee,B);X||(X=We),t=X.a,h=X.b,p=X.rf}return p&&!h&&(h=(1-1/p)*t),(0===p||Math.abs(t-h)<e)&&(j=!0,h=t),{a:t,b:h,rf:p,sphere:j}}(p.a,p.b,p.rf,p.ellps,p.sphere),tt=function Ge(t,h,p,B){var j=t*t,X=h*h,tt=(j-X)/j,Q=0;return B?(j=(t*=1-tt*(.16666666666666666+tt*(.04722222222222222+.022156084656084655*tt)))*t,tt=0):Q=Math.sqrt(tt),{es:tt,e:Q,ep2:(j-X)/X}}(X.a,X.b,0,p.R_A),Q=function ei(t){return void 0===t?null:t.split(",").map($)}(p.nadgrids),ct=p.datum||function Ve(t,h,p,B,j,X,tt){var Q={};return Q.datum_type=void 0===t||"none"===t?b:4,h&&(Q.datum_params=h.map(parseFloat),(0!==Q.datum_params[0]||0!==Q.datum_params[1]||0!==Q.datum_params[2])&&(Q.datum_type=F),Q.datum_params.length>3&&(0!==Q.datum_params[3]||0!==Q.datum_params[4]||0!==Q.datum_params[5]||0!==Q.datum_params[6])&&(Q.datum_type=k,Q.datum_params[3]*=f,Q.datum_params[4]*=f,Q.datum_params[5]*=f,Q.datum_params[6]=Q.datum_params[6]/1e6+1)),tt&&(Q.datum_type=G,Q.grids=tt),Q.a=p,Q.b=B,Q.es=j,Q.ep2=X,Q}(p.datumCode,p.datum_params,X.a,X.b,tt.es,tt.ep2,Q);Pt(this,p),Pt(this,B),this.a=X.a,this.b=X.b,this.rf=X.rf,this.sphere=X.sphere,this.es=tt.es,this.e=tt.e,this.ep2=tt.ep2,this.datum=ct,this.init(),h(null,this)}else h(t)}else h(t)}(Ie.projections=ce).start();const Fe=Ie;function Xe(t,h,p){var tt,Q,xt,B=t.x,j=t.y,X=t.z?t.z:0;if(j<-u&&j>-1.001*u)j=-u;else if(j>u&&j<1.001*u)j=u;else{if(j<-u)return{x:-1/0,y:-1/0,z:t.z};if(j>u)return{x:1/0,y:1/0,z:t.z}}return B>Math.PI&&(B-=2*Math.PI),Q=Math.sin(j),xt=Math.cos(j),{x:((tt=p/Math.sqrt(1-h*(Q*Q)))+X)*xt*Math.cos(B),y:(tt+X)*xt*Math.sin(B),z:(tt*(1-h)+X)*Q}}function ni(t,h,p,B){var Q,ct,xt,Ut,Ot,kt,re,ae,oe,me,Ce,Ne,Be,Se,He,ze=t.x,pe=t.y,Ke=t.z?t.z:0;if(Q=Math.sqrt(ze*ze+pe*pe),ct=Math.sqrt(ze*ze+pe*pe+Ke*Ke),Q/p<1e-12){if(Se=0,ct/p<1e-12)return He=-B,{x:t.x,y:t.y,z:t.z}}else Se=Math.atan2(pe,ze);xt=Ke/ct,ae=(Ut=Q/ct)*(1-h)*(Ot=1/Math.sqrt(1-h*(2-h)*Ut*Ut)),oe=xt*Ot,Be=0;do{Be++,kt=h*(re=p/Math.sqrt(1-h*oe*oe))/(re+(He=Q*ae+Ke*oe-re*(1-h*oe*oe))),Ne=(Ce=xt*(Ot=1/Math.sqrt(1-kt*(2-kt)*Ut*Ut)))*ae-(me=Ut*(1-kt)*Ot)*oe,ae=me,oe=Ce}while(Ne*Ne>1e-24&&Be<30);return{x:Se,y:Math.atan(Ce/Math.abs(me)),z:He}}function pi(t){return t===F||t===k}function Ii(t,h,p){if(null===t.grids||0===t.grids.length)return console.log("Grid shift grids not found"),-1;var B={x:-p.x,y:p.y},j={x:Number.NaN,y:Number.NaN},tt=[];t:for(var Q=0;Q<t.grids.length;Q++){var ct=t.grids[Q];if(tt.push(ct.name),ct.isNull){j=B;break}if(null!==ct.grid)for(var xt=ct.grid.subgrids,Ut=0,Ot=xt.length;Ut<Ot;Ut++){var kt=xt[Ut],re=(Math.abs(kt.del[1])+Math.abs(kt.del[0]))/1e4;if(!(kt.ll[1]-re>B.y||kt.ll[0]-re>B.x||kt.ll[1]+(kt.lim[1]-1)*kt.del[1]+re<B.y||kt.ll[0]+(kt.lim[0]-1)*kt.del[0]+re<B.x||(j=vi(B,h,kt),isNaN(j.x))))break t}else if(ct.mandatory)return console.log("Unable to find mandatory grid '"+ct.name+"'"),-1}return isNaN(j.x)?(console.log("Failed to find a grid shift table for location '"+-B.x*_+" "+B.y*_+" tried: '"+tt+"'"),-1):(p.x=-j.x,p.y=j.y,0)}function vi(t,h,p){var B={x:Number.NaN,y:Number.NaN};if(isNaN(t.x))return B;var j={x:t.x,y:t.y};j.x-=p.ll[0],j.y-=p.ll[1],j.x=Bt(j.x-Math.PI)+Math.PI;var X=ci(j,p);if(h){if(isNaN(X.x))return B;X.x=j.x-X.x,X.y=j.y-X.y;var ct,xt,tt=9;do{if(xt=ci(X,p),isNaN(xt.x)){console.log("Inverse grid shift iteration failed, presumably at grid edge.  Using first approximation.");break}X.x+=(ct={x:j.x-(xt.x+X.x),y:j.y-(xt.y+X.y)}).x,X.y+=ct.y}while(tt--&&Math.abs(ct.x)>1e-12&&Math.abs(ct.y)>1e-12);if(tt<0)return console.log("Inverse grid shift iterator failed to converge."),B;B.x=Bt(X.x+p.ll[0]),B.y=X.y+p.ll[1]}else isNaN(X.x)||(B.x=t.x+X.x,B.y=t.y+X.y);return B}function ci(t,h){var tt,p={x:t.x/h.del[0],y:t.y/h.del[1]},B_x=Math.floor(p.x),B_y=Math.floor(p.y),j_x=p.x-1*B_x,j_y=p.y-1*B_y,X={x:Number.NaN,y:Number.NaN};if(B_x<0||B_x>=h.lim[0]||B_y<0||B_y>=h.lim[1])return X;var Q_x=h.cvs[tt=B_y*h.lim[0]+B_x][0],Q_y=h.cvs[tt][1];tt++;var ct_x=h.cvs[tt][0],ct_y=h.cvs[tt][1],xt_x=h.cvs[tt+=h.lim[0]][0],xt_y=h.cvs[tt][1];tt--;var Ut_y=h.cvs[tt][1],Ot=j_x*j_y,kt=j_x*(1-j_y),re=(1-j_x)*(1-j_y),ae=(1-j_x)*j_y;return X.x=re*Q_x+kt*ct_x+ae*h.cvs[tt][0]+Ot*xt_x,X.y=re*Q_y+kt*ct_y+ae*Ut_y+Ot*xt_y,X}function yi(t,h,p){var tt,Q,ct,B=p.x,j=p.y,X=p.z||0,xt={};for(ct=0;ct<3;ct++)if(!h||2!==ct||void 0!==p.z)switch(0===ct?(tt=B,Q=-1!=="ew".indexOf(t.axis[ct])?"x":"y"):1===ct?(tt=j,Q=-1!=="ns".indexOf(t.axis[ct])?"y":"x"):(tt=X,Q="z"),t.axis[ct]){case"e":case"n":xt[Q]=tt;break;case"w":case"s":xt[Q]=-tt;break;case"u":void 0!==p[Q]&&(xt.z=tt);break;case"d":void 0!==p[Q]&&(xt.z=-tt);break;default:return null}return xt}function _i(t){var h={x:t[0],y:t[1]};return t.length>2&&(h.z=t[2]),t.length>3&&(h.m=t[3]),h}function Gi(t){if("function"==typeof Number.isFinite){if(Number.isFinite(t))return;throw new TypeError("coordinates must be finite numbers")}if("number"!=typeof t||t!=t||!isFinite(t))throw new TypeError("coordinates must be finite numbers")}function ai(t,h,p,B){var j,X=void 0!==(p=Array.isArray(p)?_i(p):{x:p.x,y:p.y,z:p.z,m:p.m}).z;if(function ri(t){Gi(t.x),Gi(t.y)}(p),t.datum&&h.datum&&function Pi(t,h){return(t.datum.datum_type===F||t.datum.datum_type===k||t.datum.datum_type===G)&&"WGS84"!==h.datumCode||(h.datum.datum_type===F||h.datum.datum_type===k||h.datum.datum_type===G)&&"WGS84"!==t.datumCode}(t,h)&&(p=ai(t,j=new Fe("WGS84"),p,B),t=j),B&&"enu"!==t.axis&&(p=yi(t,!1,p)),"longlat"===t.projName)p={x:p.x*l,y:p.y*l,z:p.z||0};else if(t.to_meter&&(p={x:p.x*t.to_meter,y:p.y*t.to_meter,z:p.z||0}),!(p=t.inverse(p)))return;if(t.from_greenwich&&(p.x+=t.from_greenwich),p=function xn(t,h,p){if(function je(t,h){return!(t.datum_type!==h.datum_type||t.a!==h.a||Math.abs(t.es-h.es)>5e-11)&&(t.datum_type===F?t.datum_params[0]===h.datum_params[0]&&t.datum_params[1]===h.datum_params[1]&&t.datum_params[2]===h.datum_params[2]:t.datum_type!==k||t.datum_params[0]===h.datum_params[0]&&t.datum_params[1]===h.datum_params[1]&&t.datum_params[2]===h.datum_params[2]&&t.datum_params[3]===h.datum_params[3]&&t.datum_params[4]===h.datum_params[4]&&t.datum_params[5]===h.datum_params[5]&&t.datum_params[6]===h.datum_params[6])}(t,h)||t.datum_type===b||h.datum_type===b)return p;var B=t.a,j=t.es;if(t.datum_type===G){if(0!==Ii(t,!1,p))return;B=S,j=v}var tt=h.a,Q=h.b,ct=h.es;return h.datum_type===G&&(tt=S,Q=P,ct=v),j!==ct||B!==tt||pi(t.datum_type)||pi(h.datum_type)?(p=Xe(p,j,B),pi(t.datum_type)&&(p=function Mi(t,h,p){if(h===F)return{x:t.x+p[0],y:t.y+p[1],z:t.z+p[2]};if(h===k){var tt=p[3],Q=p[4],ct=p[5],xt=p[6];return{x:xt*(t.x-ct*t.y+Q*t.z)+p[0],y:xt*(ct*t.x+t.y-tt*t.z)+p[1],z:xt*(-Q*t.x+tt*t.y+t.z)+p[2]}}}(p,t.datum_type,t.datum_params)),pi(h.datum_type)&&(p=function gi(t,h,p){if(h===F)return{x:t.x-p[0],y:t.y-p[1],z:t.z-p[2]};if(h===k){var tt=p[3],Q=p[4],ct=p[5],xt=p[6],Ut=(t.x-p[0])/xt,Ot=(t.y-p[1])/xt,kt=(t.z-p[2])/xt;return{x:Ut+ct*Ot-Q*kt,y:-ct*Ut+Ot+tt*kt,z:Q*Ut-tt*Ot+kt}}}(p,h.datum_type,h.datum_params)),p=ni(p,ct,tt,Q),h.datum_type!==G||0===Ii(h,!0,p)?p:void 0):p}(t.datum,h.datum,p))return h.from_greenwich&&(p={x:p.x-h.from_greenwich,y:p.y,z:p.z||0}),"longlat"===h.projName?p={x:p.x*_,y:p.y*_,z:p.z||0}:(p=h.forward(p),h.to_meter&&(p={x:p.x/h.to_meter,y:p.y/h.to_meter,z:p.z||0})),B&&"enu"!==h.axis?yi(h,!0,p):(p&&!X&&delete p.z,p)}var Ei=Fe("WGS84");function Ci(t,h,p,B){var j,X,tt;return Array.isArray(p)?(j=ai(t,h,p,B)||{x:NaN,y:NaN},p.length>2?typeof t.name<"u"&&"geocent"===t.name||typeof h.name<"u"&&"geocent"===h.name?"number"==typeof j.z?[j.x,j.y,j.z].concat(p.splice(3)):[j.x,j.y,p[2]].concat(p.splice(3)):[j.x,j.y].concat(p.splice(2)):[j.x,j.y]):(X=ai(t,h,p,B),2===(tt=Object.keys(p)).length||tt.forEach(function(Q){if(typeof t.name<"u"&&"geocent"===t.name||typeof h.name<"u"&&"geocent"===h.name){if("x"===Q||"y"===Q||"z"===Q)return}else if("x"===Q||"y"===Q)return;X[Q]=p[Q]}),X)}function Xi(t){return t instanceof Fe?t:t.oProj?t.oProj:Fe(t)}const Ri=function Ws(t,h,p){t=Xi(t);var j,B=!1;return typeof h>"u"?(h=t,t=Ei,B=!0):(typeof h.x<"u"||Array.isArray(h))&&(p=h,h=t,t=Ei,B=!0),h=Xi(h),p?Ci(t,h,p):(j={forward:function(X,tt){return Ci(t,h,X,tt)},inverse:function(X,tt){return Ci(h,t,X,tt)}},B&&(j.oProj=h),j)};var hs=6,Vi="AJSAJS",us="AFAFAF",Zi=65,xi=73,Ai=79,hn=86,en=90;const Gs={forward:Mn,inverse:function cs(t){var h=Kn(Cn(t.toUpperCase()));return h.lat&&h.lon?[h.lon,h.lat,h.lon,h.lat]:[h.left,h.bottom,h.right,h.top]},toPoint:zn};function Mn(t,h){return h=h||5,function Ui(t,h){var p="00000"+t.easting,B="00000"+t.northing;return t.zoneNumber+t.zoneLetter+function kn(t,h,p){var B=un(p);return function Xn(t,h,p){var B=p-1,j=Vi.charCodeAt(B),X=us.charCodeAt(B),tt=j+t-1,Q=X+h,ct=!1;return tt>en&&(tt=tt-en+Zi-1,ct=!0),(tt===xi||j<xi&&tt>xi||(tt>xi||j<xi)&&ct)&&tt++,(tt===Ai||j<Ai&&tt>Ai||(tt>Ai||j<Ai)&&ct)&&++tt===xi&&tt++,tt>en&&(tt=tt-en+Zi-1),Q>hn?(Q=Q-hn+Zi-1,ct=!0):ct=!1,(Q===xi||X<xi&&Q>xi||(Q>xi||X<xi)&&ct)&&Q++,(Q===Ai||X<Ai&&Q>Ai||(Q>Ai||X<Ai)&&ct)&&++Q===xi&&Q++,Q>hn&&(Q=Q-hn+Zi-1),String.fromCharCode(tt)+String.fromCharCode(Q)}(Math.floor(t/1e5),Math.floor(h/1e5)%20,B)}(t.easting,t.northing,t.zoneNumber)+p.substr(p.length-5,h)+B.substr(B.length-5,h)}(function ds(t){var Q,ct,xt,Ut,Ot,oe,me,h=t.lat,p=t.lon,B=6378137,j=.00669438,X=.9996,re=Tn(h),ae=Tn(p);me=Math.floor((p+180)/6)+1,180===p&&(me=60),h>=56&&h<64&&p>=3&&p<12&&(me=32),h>=72&&h<84&&(p>=0&&p<9?me=31:p>=9&&p<21?me=33:p>=21&&p<33?me=35:p>=33&&p<42&&(me=37)),oe=Tn(6*(me-1)-180+3),Q=j/(1-j),ct=B/Math.sqrt(1-j*Math.sin(re)*Math.sin(re)),xt=Math.tan(re)*Math.tan(re),Ut=Q*Math.cos(re)*Math.cos(re);var Ce=X*ct*((Ot=Math.cos(re)*(ae-oe))+(1-xt+Ut)*Ot*Ot*Ot/6+(5-18*xt+xt*xt+72*Ut-58*Q)*Ot*Ot*Ot*Ot*Ot/120)+5e5,Ne=X*(B*(.9983242984503243*re-.002514607064228144*Math.sin(2*re)+2639046602129982e-21*Math.sin(4*re)-35*j*j*j/3072*Math.sin(6*re))+ct*Math.tan(re)*(Ot*Ot/2+(5-xt+9*Ut+4*Ut*Ut)*Ot*Ot*Ot*Ot/24+(61-58*xt+xt*xt+600*Ut-330*Q)*Ot*Ot*Ot*Ot*Ot*Ot/720));return h<0&&(Ne+=1e7),{northing:Math.round(Ne),easting:Math.round(Ce),zoneNumber:me,zoneLetter:zs(h)}}({lat:t[1],lon:t[0]}),h)}function zn(t){var h=Kn(Cn(t.toUpperCase()));return h.lat&&h.lon?[h.lon,h.lat]:[(h.left+h.right)/2,(h.top+h.bottom)/2]}function Tn(t){return t*(Math.PI/180)}function Pn(t){return t/Math.PI*180}function Kn(t){var h=t.northing,p=t.easting,B=t.zoneLetter,j=t.zoneNumber;if(j<0||j>60)return null;var ct,Ut,Ot,kt,re,ae,me,Ce,Ne,X=.9996,Q=.00669438,xt=(1-Math.sqrt(1-Q))/(1+Math.sqrt(1-Q)),Be=p-5e5,ze=h;B<"N"&&(ze-=1e7),me=6*(j-1)-180+3,ct=Q/(1-Q),Ne=(Ce=ze/X/6367449.145945056)+(3*xt/2-27*xt*xt*xt/32)*Math.sin(2*Ce)+(21*xt*xt/16-55*xt*xt*xt*xt/32)*Math.sin(4*Ce)+151*xt*xt*xt/96*Math.sin(6*Ce),Ut=6378137/Math.sqrt(1-Q*Math.sin(Ne)*Math.sin(Ne)),Ot=Math.tan(Ne)*Math.tan(Ne),kt=ct*Math.cos(Ne)*Math.cos(Ne),re=6378137*(1-Q)/Math.pow(1-Q*Math.sin(Ne)*Math.sin(Ne),1.5),ae=Be/(Ut*X);var pe=Ne-Ut*Math.tan(Ne)/re*(ae*ae/2-(5+3*Ot+10*kt-4*kt*kt-9*ct)*ae*ae*ae*ae/24+(61+90*Ot+298*kt+45*Ot*Ot-252*ct-3*kt*kt)*ae*ae*ae*ae*ae*ae/720);pe=Pn(pe);var Se,Ke=(ae-(1+2*Ot+kt)*ae*ae*ae/6+(5-2*kt+28*Ot-3*kt*kt+8*ct+24*Ot*Ot)*ae*ae*ae*ae*ae/120)/Math.cos(Ne);if(Ke=me+Pn(Ke),t.accuracy){var Oe=Kn({northing:t.northing+t.accuracy,easting:t.easting+t.accuracy,zoneLetter:t.zoneLetter,zoneNumber:t.zoneNumber});Se={top:Oe.lat,right:Oe.lon,bottom:pe,left:Ke}}else Se={lat:pe,lon:Ke};return Se}function zs(t){var h="Z";return 84>=t&&t>=72?h="X":72>t&&t>=64?h="W":64>t&&t>=56?h="V":56>t&&t>=48?h="U":48>t&&t>=40?h="T":40>t&&t>=32?h="S":32>t&&t>=24?h="R":24>t&&t>=16?h="Q":16>t&&t>=8?h="P":8>t&&t>=0?h="N":0>t&&t>=-8?h="M":-8>t&&t>=-16?h="L":-16>t&&t>=-24?h="K":-24>t&&t>=-32?h="J":-32>t&&t>=-40?h="H":-40>t&&t>=-48?h="G":-48>t&&t>=-56?h="F":-56>t&&t>=-64?h="E":-64>t&&t>=-72?h="D":-72>t&&t>=-80&&(h="C"),h}function un(t){var h=t%hs;return 0===h&&(h=hs),h}function Cn(t){if(t&&0===t.length)throw"MGRSPoint coverting from nothing";for(var j,h=t.length,p=null,B="",X=0;!/[A-Z]/.test(j=t.charAt(X));){if(X>=2)throw"MGRSPoint bad conversion from: "+t;B+=j,X++}var tt=parseInt(B,10);if(0===X||X+3>h)throw"MGRSPoint bad conversion from: "+t;var Q=t.charAt(X++);if(Q<="A"||"B"===Q||"Y"===Q||Q>="Z"||"I"===Q||"O"===Q)throw"MGRSPoint zone letter "+Q+" not handled: "+t;p=t.substring(X,X+=2);for(var ct=un(tt),xt=function Yi(t,h){for(var p=Vi.charCodeAt(h-1),B=1e5,j=!1;p!==t.charCodeAt(0);){if(++p===xi&&p++,p===Ai&&p++,p>en){if(j)throw"Bad character: "+t;p=Zi,j=!0}B+=1e5}return B}(p.charAt(0),ct),Ut=function fs(t,h){if(t>"V")throw"MGRSPoint given invalid Northing "+t;for(var p=us.charCodeAt(h-1),B=0,j=!1;p!==t.charCodeAt(0);){if(++p===xi&&p++,p===Ai&&p++,p>hn){if(j)throw"Bad character: "+t;p=Zi,j=!0}B+=1e5}return B}(p.charAt(1),ct);Ut<Hi(Q);)Ut+=2e6;var Ot=h-X;if(Ot%2!=0)throw"MGRSPoint has to have an even number \nof digits after the zone letter and two 100km letters - front \nhalf for easting meters, second half for \nnorthing meters"+t;var oe,me,Ce,kt=Ot/2,re=0,ae=0;return kt>0&&(oe=1e5/Math.pow(10,kt),me=t.substring(X,X+kt),re=parseFloat(me)*oe,Ce=t.substring(X+kt),ae=parseFloat(Ce)*oe),{easting:re+xt,northing:ae+Ut,zoneLetter:Q,zoneNumber:tt,accuracy:oe}}function Hi(t){var h;switch(t){case"C":h=11e5;break;case"D":h=2e6;break;case"E":h=28e5;break;case"F":h=37e5;break;case"G":h=46e5;break;case"H":h=55e5;break;case"J":h=64e5;break;case"K":h=73e5;break;case"L":h=82e5;break;case"M":h=91e5;break;case"N":h=0;break;case"P":h=8e5;break;case"Q":h=17e5;break;case"R":h=26e5;break;case"S":h=35e5;break;case"T":h=44e5;break;case"U":h=53e5;break;case"V":h=62e5;break;case"W":h=7e6;break;case"X":h=79e5;break;default:h=-1}if(h>=0)return h;throw"Invalid zone letter: "+t}function Ji(t,h,p){if(!(this instanceof Ji))return new Ji(t,h,p);if(Array.isArray(t))this.x=t[0],this.y=t[1],this.z=t[2]||0;else if("object"==typeof t)this.x=t.x,this.y=t.y,this.z=t.z||0;else if("string"==typeof t&&typeof h>"u"){var B=t.split(",");this.x=parseFloat(B[0],10),this.y=parseFloat(B[1],10),this.z=parseFloat(B[2],10)||0}else this.x=t,this.y=h,this.z=p||0;console.warn("proj4.Point will be removed in version 3, use proj4.toPoint")}Ji.fromMGRS=function(t){return new Ji(zn(t))},Ji.prototype.toMGRS=function(t){return Mn([this.x,this.y],t)};const Rn=Ji;var _s=.01953125,$i=.01068115234375;function Jn(t){var h=[];h[0]=1-t*(.25+t*(.046875+t*(_s+t*$i))),h[1]=t*(.75-t*(.046875+t*(_s+t*$i)));var p=t*t;return h[2]=p*(.46875-t*(.013020833333333334+.007120768229166667*t)),h[3]=(p*=t)*(.3645833333333333-.005696614583333333*t),h[4]=p*t*.3076171875,h}function ji(t,h,p,B){return B[0]*t-(p*=h)*(B[1]+(h*=h)*(B[2]+h*(B[3]+h*B[4])))}function ys(t,h,p){for(var B=1/(1-h),j=t,X=20;X;--X){var tt=Math.sin(j),Q=1-h*tt*tt;if(j-=Q=(ji(j,tt,Math.cos(j),p)-t)*(Q*Math.sqrt(Q))*B,Math.abs(Q)<e)return j}return j}const nn={init:function Es(){this.x0=void 0!==this.x0?this.x0:0,this.y0=void 0!==this.y0?this.y0:0,this.long0=void 0!==this.long0?this.long0:0,this.lat0=void 0!==this.lat0?this.lat0:0,this.es&&(this.en=Jn(this.es),this.ml0=ji(this.lat0,Math.sin(this.lat0),Math.cos(this.lat0),this.en))},forward:function ks(t){var j,X,tt,p=t.y,B=Bt(t.x-this.long0),Q=Math.sin(p),ct=Math.cos(p);if(this.es){var Ut=ct*B,Ot=Math.pow(Ut,2),kt=this.ep2*Math.pow(ct,2),re=Math.pow(kt,2),ae=Math.abs(ct)>e?Math.tan(p):0,oe=Math.pow(ae,2),me=Math.pow(oe,2);j=1-this.es*Math.pow(Q,2),Ut/=Math.sqrt(j);var Ce=ji(p,Q,ct,this.en);X=this.a*(this.k0*Ut*(1+Ot/6*(1-oe+kt+Ot/20*(5-18*oe+me+14*kt-58*oe*kt+Ot/42*(61+179*me-me*oe-479*oe)))))+this.x0,tt=this.a*(this.k0*(Ce-this.ml0+Q*B*Ut/2*(1+Ot/12*(5-oe+9*kt+4*re+Ot/30*(61+me-58*oe+270*kt-330*oe*kt+Ot/56*(1385+543*me-me*oe-3111*oe))))))+this.y0}else{var xt=ct*Math.sin(B);if(Math.abs(Math.abs(xt)-1)<e)return 93;if(X=.5*this.a*this.k0*Math.log((1+xt)/(1-xt))+this.x0,tt=ct*Math.cos(B)/Math.sqrt(1-Math.pow(xt,2)),(xt=Math.abs(tt))>=1){if(xt-1>e)return 93;tt=0}else tt=Math.acos(tt);p<0&&(tt=-tt),tt=this.a*this.k0*(tt-this.lat0)+this.y0}return t.x=X,t.y=tt,t},inverse:function Qn(t){var h,p,B,j,X=1/this.a*(t.x-this.x0),tt=1/this.a*(t.y-this.y0);if(this.es)if(p=ys(h=this.ml0+tt/this.k0,this.es,this.en),Math.abs(p)<u){var Ot=Math.sin(p),kt=Math.cos(p),re=Math.abs(kt)>e?Math.tan(p):0,ae=this.ep2*Math.pow(kt,2),oe=Math.pow(ae,2),me=Math.pow(re,2),Ce=Math.pow(me,2);h=1-this.es*Math.pow(Ot,2);var Ne=X*Math.sqrt(h)/this.k0,Be=Math.pow(Ne,2);B=p-(h*=re)*Be/(1-this.es)*.5*(1-Be/12*(5+3*me-9*ae*me+ae-4*oe-Be/30*(61+90*me-252*ae*me+45*Ce+46*ae-Be/56*(1385+3633*me+4095*Ce+1574*Ce*me)))),j=Bt(this.long0+Ne*(1-Be/6*(1+2*me+ae-Be/20*(5+28*me+24*Ce+8*ae*me+6*ae-Be/42*(61+662*me+1320*Ce+720*Ce*me))))/kt)}else B=u*zt(tt),j=0;else{var Q=Math.exp(X/this.k0),ct=.5*(Q-1/Q),Ut=Math.cos(this.lat0+tt/this.k0);h=Math.sqrt((1-Math.pow(Ut,2))/(1+Math.pow(ct,2))),B=Math.asin(h),tt<0&&(B=-B),j=0===ct&&0===Ut?0:Bt(Math.atan2(ct,Ut)+this.long0)}return t.x=j,t.y=B,t},names:["Fast_Transverse_Mercator","Fast Transverse Mercator"]};function Sn(t){var h=Math.exp(t);return(h-1/h)/2}function Oi(t,h){t=Math.abs(t),h=Math.abs(h);var p=Math.max(t,h),B=Math.min(t,h)/(p||1);return p*Math.sqrt(1+Math.pow(B,2))}function $n(t,h){for(var tt,p=2*Math.cos(2*h),B=t.length-1,j=t[B],X=0;--B>=0;)tt=p*j-X+t[B],X=j,j=tt;return h+tt*Math.sin(2*h)}function Kt(t,h,p){for(var ae,oe,B=Math.sin(h),j=Math.cos(h),X=Sn(p),tt=function Ys(t){var h=Math.exp(t);return(h+1/h)/2}(p),Q=2*j*tt,ct=-2*B*X,xt=t.length-1,Ut=t[xt],Ot=0,kt=0,re=0;--xt>=0;)ae=kt,oe=Ot,Ut=Q*(kt=Ut)-ae-ct*(Ot=re)+t[xt],re=ct*kt-oe+Q*Ot;return[(Q=B*tt)*Ut-(ct=j*X)*re,Q*re+ct*Ut]}const Qt={init:function ot(){if(!this.approx&&(isNaN(this.es)||this.es<=0))throw new Error('Incorrect elliptical usage. Try using the +approx option in the proj string, or PROJECTION["Fast_Transverse_Mercator"] in the WKT.');this.approx&&(nn.init.apply(this),this.forward=nn.forward,this.inverse=nn.inverse),this.x0=void 0!==this.x0?this.x0:0,this.y0=void 0!==this.y0?this.y0:0,this.long0=void 0!==this.long0?this.long0:0,this.lat0=void 0!==this.lat0?this.lat0:0,this.cgb=[],this.cbg=[],this.utg=[],this.gtu=[];var t=this.es/(1+Math.sqrt(1-this.es)),h=t/(2-t),p=h;this.cgb[0]=h*(2+h*(-2/3+h*(h*(116/45+h*(26/45+h*(-2854/675)))-2))),this.cbg[0]=h*(h*(2/3+h*(4/3+h*(-82/45+h*(32/45+h*(4642/4725)))))-2),this.cgb[1]=(p*=h)*(7/3+h*(h*(-227/45+h*(2704/315+h*(2323/945)))-1.6)),this.cbg[1]=p*(5/3+h*(-16/15+h*(-13/9+h*(904/315+h*(-1522/945))))),this.cgb[2]=(p*=h)*(56/15+h*(-136/35+h*(-1262/105+h*(73814/2835)))),this.cbg[2]=p*(-26/15+h*(34/21+h*(1.6+h*(-12686/2835)))),this.cgb[3]=(p*=h)*(4279/630+h*(-332/35+h*(-399572/14175))),this.cbg[3]=p*(1237/630+h*(h*(-24832/14175)-2.4)),this.cgb[4]=(p*=h)*(4174/315+h*(-144838/6237)),this.cbg[4]=p*(-734/315+h*(109598/31185)),this.cgb[5]=(p*=h)*(601676/22275),this.cbg[5]=p*(444337/155925),p=Math.pow(h,2),this.Qn=this.k0/(1+h)*(1+p*(1/4+p*(1/64+p/256))),this.utg[0]=h*(h*(2/3+h*(-37/96+h*(1/360+h*(81/512+h*(-96199/604800)))))-.5),this.gtu[0]=h*(.5+h*(-2/3+h*(5/16+h*(41/180+h*(-127/288+h*(7891/37800)))))),this.utg[1]=p*(-1/48+h*(-1/15+h*(437/1440+h*(-46/105+h*(1118711/3870720))))),this.gtu[1]=p*(13/48+h*(h*(557/1440+h*(281/630+h*(-1983433/1935360)))-.6)),this.utg[2]=(p*=h)*(-17/480+h*(37/840+h*(209/4480+h*(-5569/90720)))),this.gtu[2]=p*(61/240+h*(-103/140+h*(15061/26880+h*(167603/181440)))),this.utg[3]=(p*=h)*(-4397/161280+h*(11/504+h*(830251/7257600))),this.gtu[3]=p*(49561/161280+h*(-179/168+h*(6601661/7257600))),this.utg[4]=(p*=h)*(-4583/161280+h*(108847/3991680)),this.gtu[4]=p*(34729/80640+h*(-3418889/1995840)),this.utg[5]=(p*=h)*(-20648693/638668800),this.gtu[5]=.6650675310896665*p;var B=$n(this.cbg,this.lat0);this.Zb=-this.Qn*(B+function Vs(t,h){for(var tt,p=2*Math.cos(h),B=t.length-1,j=t[B],X=0;--B>=0;)tt=p*j-X+t[B],X=j,j=tt;return Math.sin(h)*tt}(this.gtu,2*B))},forward:function dt(t){var h=Bt(t.x-this.long0),p=t.y;p=$n(this.cbg,p);var B=Math.sin(p),j=Math.cos(p),X=Math.sin(h),tt=Math.cos(h);p=Math.atan2(B,tt*j),h=Math.atan2(X*j,Oi(B,j*tt)),h=function Xs(t){var h=Math.abs(t);return h=function xs(t){var h=1+t,p=h-1;return 0===p?t:t*Math.log(h)/p}(h*(1+h/(Oi(1,h)+1))),t<0?-h:h}(Math.tan(h));var ct,xt,Q=Kt(this.gtu,2*p,2*h);return p+=Q[0],h+=Q[1],Math.abs(h)<=2.623395162778?(ct=this.a*(this.Qn*h)+this.x0,xt=this.a*(this.Qn*p+this.Zb)+this.y0):(ct=1/0,xt=1/0),t.x=ct,t.y=xt,t},inverse:function mt(t){var B,j,h=1/this.a*(t.x-this.x0),p=1/this.a*(t.y-this.y0);if(p=(p-this.Zb)/this.Qn,h/=this.Qn,Math.abs(h)<=2.623395162778){var X=Kt(this.utg,2*p,2*h);p+=X[0],h+=X[1],h=Math.atan(Sn(h));var tt=Math.sin(p),Q=Math.cos(p),ct=Math.sin(h),xt=Math.cos(h);p=Math.atan2(tt*xt,Oi(ct,xt*Q)),B=Bt((h=Math.atan2(ct,xt*Q))+this.long0),j=$n(this.cgb,p)}else B=1/0,j=1/0;return t.x=B,t.y=j,t},names:["Extended_Transverse_Mercator","Extended Transverse Mercator","etmerc","Transverse_Mercator","Transverse Mercator","tmerc"]},Ue={init:function Me(){var t=function ne(t,h){if(void 0===t){if((t=Math.floor(30*(Bt(h)+Math.PI)/Math.PI)+1)<0)return 0;if(t>60)return 60}return t}(this.zone,this.long0);if(void 0===t)throw new Error("unknown utm zone");this.lat0=0,this.long0=(6*Math.abs(t)-183)*l,this.x0=5e5,this.y0=this.utmSouth?1e7:0,this.k0=.9996,Qt.init.apply(this),this.forward=Qt.forward,this.inverse=Qt.inverse},names:["Universal Transverse Mercator System","utm"],dependsOn:"etmerc"};function $e(t,h){return Math.pow((1-t)/(1+t),h)}const mi={init:function li(){var t=Math.sin(this.lat0),h=Math.cos(this.lat0);h*=h,this.rc=Math.sqrt(1-this.es)/(1-this.es*t*t),this.C=Math.sqrt(1+this.es*h*h/(1-this.es)),this.phic0=Math.asin(t/this.C),this.ratexp=.5*this.C*this.e,this.K=Math.tan(.5*this.phic0+n)/(Math.pow(Math.tan(.5*this.lat0+n),this.C)*$e(this.e*t,this.ratexp))},forward:function ti(t){var h=t.x,p=t.y;return t.y=2*Math.atan(this.K*Math.pow(Math.tan(.5*p+n),this.C)*$e(this.e*Math.sin(p),this.ratexp))-u,t.x=this.C*h,t},inverse:function Bi(t){for(var p=t.x/this.C,B=t.y,j=Math.pow(Math.tan(.5*B+n)/this.K,1/this.C),X=20;X>0&&(B=2*Math.atan(j*$e(this.e*Math.sin(t.y),-.5*this.e))-u,!(Math.abs(B-t.y)<1e-14));--X)t.y=B;return X?(t.x=p,t.y=B,t):null},names:["gauss"]},zi={init:function fi(){mi.init.apply(this),this.rc&&(this.sinc0=Math.sin(this.phic0),this.cosc0=Math.cos(this.phic0),this.R2=2*this.rc,this.title||(this.title="Oblique Stereographic Alternative"))},forward:function bi(t){var h,p,B,j;return t.x=Bt(t.x-this.long0),mi.forward.apply(this,[t]),h=Math.sin(t.y),p=Math.cos(t.y),B=Math.cos(t.x),t.x=(j=this.k0*this.R2/(1+this.sinc0*h+this.cosc0*p*B))*p*Math.sin(t.x),t.y=j*(this.cosc0*h-this.sinc0*p*B),t.x=this.a*t.x+this.x0,t.y=this.a*t.y+this.y0,t},inverse:function hi(t){var h,p,B,j,X;if(t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,t.x/=this.k0,t.y/=this.k0,X=Math.sqrt(t.x*t.x+t.y*t.y)){var tt=2*Math.atan2(X,this.R2);h=Math.sin(tt),p=Math.cos(tt),j=Math.asin(p*this.sinc0+t.y*h*this.cosc0/X),B=Math.atan2(t.x*h,X*this.cosc0*p-t.y*this.sinc0*h)}else j=this.phic0,B=0;return t.x=B,t.y=j,mi.inverse.apply(this,[t]),t.x=Bt(t.x+this.long0),t},names:["Stereographic_North_Pole","Oblique_Stereographic","sterea","Oblique Stereographic Alternative","Double_Stereographic"]},Ps={init:function Ms(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.coslat0=Math.cos(this.lat0),this.sinlat0=Math.sin(this.lat0),this.sphere?1===this.k0&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=e&&(this.k0=.5*(1+zt(this.lat0)*Math.sin(this.lat_ts))):(Math.abs(this.coslat0)<=e&&(this.con=this.lat0>0?1:-1),this.cons=Math.sqrt(Math.pow(1+this.e,1+this.e)*Math.pow(1-this.e,1-this.e)),1===this.k0&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=e&&Math.abs(Math.cos(this.lat_ts))>e&&(this.k0=.5*this.cons*Nt(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts))/ue(this.e,this.con*this.lat_ts,this.con*Math.sin(this.lat_ts))),this.ms1=Nt(this.e,this.sinlat0,this.coslat0),this.X0=2*Math.atan(this.ssfn_(this.lat0,this.sinlat0,this.e))-u,this.cosX0=Math.cos(this.X0),this.sinX0=Math.sin(this.X0))},forward:function qn(t){var X,tt,Q,ct,xt,Ut,h=t.x,p=t.y,B=Math.sin(p),j=Math.cos(p),Ot=Bt(h-this.long0);return Math.abs(Math.abs(h-this.long0)-Math.PI)<=e&&Math.abs(p+this.lat0)<=e?(t.x=NaN,t.y=NaN,t):this.sphere?(X=2*this.k0/(1+this.sinlat0*B+this.coslat0*j*Math.cos(Ot)),t.x=this.a*X*j*Math.sin(Ot)+this.x0,t.y=this.a*X*(this.coslat0*B-this.sinlat0*j*Math.cos(Ot))+this.y0,t):(tt=2*Math.atan(this.ssfn_(p,B,this.e))-u,ct=Math.cos(tt),Q=Math.sin(tt),Math.abs(this.coslat0)<=e?(xt=ue(this.e,p*this.con,this.con*B),t.x=this.x0+(Ut=2*this.a*this.k0*xt/this.cons)*Math.sin(h-this.long0),t.y=this.y0-this.con*Ut*Math.cos(h-this.long0),t):(Math.abs(this.sinlat0)<e?(X=2*this.a*this.k0/(1+ct*Math.cos(Ot)),t.y=X*Q):(X=2*this.a*this.k0*this.ms1/(this.cosX0*(1+this.sinX0*Q+this.cosX0*ct*Math.cos(Ot))),t.y=X*(this.cosX0*Q-this.sinX0*ct*Math.cos(Ot))+this.y0),t.x=X*ct*Math.sin(Ot)+this.x0,t))},inverse:function dn(t){t.x-=this.x0,t.y-=this.y0;var h,p,j,X,tt=Math.sqrt(t.x*t.x+t.y*t.y);if(this.sphere){var Q=2*Math.atan(tt/(2*this.a*this.k0));return h=this.long0,p=this.lat0,tt<=e?(t.x=h,t.y=p,t):(p=Math.asin(Math.cos(Q)*this.sinlat0+t.y*Math.sin(Q)*this.coslat0/tt),h=Math.abs(this.coslat0)<e?Bt(this.lat0>0?this.long0+Math.atan2(t.x,-1*t.y):this.long0+Math.atan2(t.x,t.y)):Bt(this.long0+Math.atan2(t.x*Math.sin(Q),tt*this.coslat0*Math.cos(Q)-t.y*this.sinlat0*Math.sin(Q))),t.x=h,t.y=p,t)}if(Math.abs(this.coslat0)<=e){if(tt<=e)return p=this.lat0,t.x=h=this.long0,t.y=p,t;t.x*=this.con,t.y*=this.con,p=this.con*ve(this.e,tt*this.cons/(2*this.a*this.k0)),h=this.con*Bt(this.con*this.long0+Math.atan2(t.x,-1*t.y))}else j=2*Math.atan(tt*this.cosX0/(2*this.a*this.k0*this.ms1)),h=this.long0,tt<=e?X=this.X0:(X=Math.asin(Math.cos(j)*this.sinX0+t.y*Math.sin(j)*this.cosX0/tt),h=Bt(this.long0+Math.atan2(t.x*Math.sin(j),tt*this.cosX0*Math.cos(j)-t.y*this.sinX0*Math.sin(j)))),p=-1*ve(this.e,Math.tan(.5*(u+X)));return t.x=h,t.y=p,t},names:["stere","Stereographic_South_Pole","Polar Stereographic (variant B)","Polar_Stereographic"],ssfn_:function wi(t,h,p){return h*=p,Math.tan(.5*(u+t))*Math.pow((1-h)/(1+h),.5*p)}},pa={init:function In(){var t=this.lat0;this.lambda0=this.long0;var h=Math.sin(t),p=this.a,j=1/this.rf,X=2*j-Math.pow(j,2),tt=this.e=Math.sqrt(X);this.R=this.k0*p*Math.sqrt(1-X)/(1-X*Math.pow(h,2)),this.alpha=Math.sqrt(1+X/(1-X)*Math.pow(Math.cos(t),4)),this.b0=Math.asin(h/this.alpha);var Q=Math.log(Math.tan(Math.PI/4+this.b0/2)),ct=Math.log(Math.tan(Math.PI/4+t/2)),xt=Math.log((1+tt*h)/(1-tt*h));this.K=Q-this.alpha*ct+this.alpha*tt/2*xt},forward:function Hs(t){var h=Math.log(Math.tan(Math.PI/4-t.y/2)),p=this.e/2*Math.log((1+this.e*Math.sin(t.y))/(1-this.e*Math.sin(t.y))),j=2*(Math.atan(Math.exp(-this.alpha*(h+p)+this.K))-Math.PI/4),X=this.alpha*(t.x-this.lambda0),tt=Math.atan(Math.sin(X)/(Math.sin(this.b0)*Math.tan(j)+Math.cos(this.b0)*Math.cos(X))),Q=Math.asin(Math.cos(this.b0)*Math.sin(j)-Math.sin(this.b0)*Math.cos(j)*Math.cos(X));return t.y=this.R/2*Math.log((1+Math.sin(Q))/(1-Math.sin(Q)))+this.y0,t.x=this.R*tt+this.x0,t},inverse:function _a(t){for(var B=(t.x-this.x0)/this.R,j=2*(Math.atan(Math.exp((t.y-this.y0)/this.R))-Math.PI/4),X=Math.asin(Math.cos(this.b0)*Math.sin(j)+Math.sin(this.b0)*Math.cos(j)*Math.cos(B)),tt=Math.atan(Math.sin(B)/(Math.cos(this.b0)*Math.cos(B)-Math.sin(this.b0)*Math.tan(j))),Q=this.lambda0+tt/this.alpha,ct=0,xt=X,Ut=-1e3,Ot=0;Math.abs(xt-Ut)>1e-7;){if(++Ot>20)return;ct=1/this.alpha*(Math.log(Math.tan(Math.PI/4+X/2))-this.K)+this.e*Math.log(Math.tan(Math.PI/4+Math.asin(this.e*Math.sin(xt))/2)),Ut=xt,xt=2*Math.atan(Math.exp(ct))-Math.PI/2}return t.x=Q,t.y=xt,t},names:["somerc"]};var An=1e-7;const Ma={init:function va(){var t,h,p,B,j,X,tt,Q,ct,xt,Ot,Ut=0,kt=0,re=0,ae=0,oe=0,me=0,Ce=0;this.no_off=function bn(t){var p="object"==typeof t.PROJECTION?Object.keys(t.PROJECTION)[0]:t.PROJECTION;return"no_uoff"in t||"no_off"in t||-1!==["Hotine_Oblique_Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin"].indexOf(p)}(this),this.no_rot="no_rot"in this;var Be=!1;"alpha"in this&&(Be=!0);var ze=!1;if("rectified_grid_angle"in this&&(ze=!0),Be&&(Ce=this.alpha),ze&&(Ut=this.rectified_grid_angle*l),Be||ze)kt=this.longc;else if(re=this.long1,oe=this.lat1,ae=this.long2,me=this.lat2,Math.abs(oe-me)<=An||(t=Math.abs(oe))<=An||Math.abs(t-u)<=An||Math.abs(Math.abs(this.lat0)-u)<=An||Math.abs(Math.abs(me)-u)<=An)throw new Error;var pe=1-this.es;h=Math.sqrt(pe),Math.abs(this.lat0)>e?(Q=Math.sin(this.lat0),p=Math.cos(this.lat0),t=1-this.es*Q*Q,this.B=p*p,this.B=Math.sqrt(1+this.es*this.B*this.B/pe),this.A=this.B*this.k0*h/t,(j=(B=this.B*h/(p*Math.sqrt(t)))*B-1)<=0?j=0:(j=Math.sqrt(j),this.lat0<0&&(j=-j)),this.E=j+=B,this.E*=Math.pow(ue(this.e,this.lat0,Q),this.B)):(this.B=1/h,this.A=this.k0,this.E=B=j=1),Be||ze?(Be?(Ot=Math.asin(Math.sin(Ce)/B),ze||(Ut=Ce)):(Ot=Ut,Ce=Math.asin(B*Math.sin(Ot))),this.lam0=kt-Math.asin(.5*(j-1/j)*Math.tan(Ot))/this.B):(X=Math.pow(ue(this.e,oe,Math.sin(oe)),this.B),tt=Math.pow(ue(this.e,me,Math.sin(me)),this.B),j=this.E/X,ct=(tt-X)/(tt+X),xt=((xt=this.E*this.E)-tt*X)/(xt+tt*X),(t=re-ae)<-Math.pi?ae-=g:t>Math.pi&&(ae+=g),this.lam0=Bt(.5*(re+ae)-Math.atan(xt*Math.tan(.5*this.B*(re-ae))/ct)/this.B),Ot=Math.atan(2*Math.sin(this.B*Bt(re-this.lam0))/(j-1/j)),Ut=Ce=Math.asin(B*Math.sin(Ot))),this.singam=Math.sin(Ot),this.cosgam=Math.cos(Ot),this.sinrot=Math.sin(Ut),this.cosrot=Math.cos(Ut),this.rB=1/this.B,this.ArB=this.A*this.rB,this.BrA=1/this.ArB,this.no_off?this.u_0=0:(this.u_0=Math.abs(this.ArB*Math.atan(Math.sqrt(B*B-1)/Math.cos(Ce))),this.lat0<0&&(this.u_0=-this.u_0)),j=.5*Ot,this.v_pole_n=this.ArB*Math.log(Math.tan(n-j)),this.v_pole_s=this.ArB*Math.log(Math.tan(n+j))},forward:function ya(t){var p,B,j,X,tt,Q,ct,xt,h={};if(t.x=t.x-this.lam0,Math.abs(Math.abs(t.y)-u)>e){if(p=.5*((tt=this.E/Math.pow(ue(this.e,t.y,Math.sin(t.y)),this.B))-(Q=1/tt)),B=.5*(tt+Q),X=Math.sin(this.B*t.x),j=(p*this.singam-X*this.cosgam)/B,Math.abs(Math.abs(j)-1)<e)throw new Error;xt=.5*this.ArB*Math.log((1-j)/(1+j)),Q=Math.cos(this.B*t.x),ct=Math.abs(Q)<An?this.A*t.x:this.ArB*Math.atan2(p*this.cosgam+X*this.singam,Q)}else xt=t.y>0?this.v_pole_n:this.v_pole_s,ct=this.ArB*t.y;return this.no_rot?(h.x=ct,h.y=xt):(h.x=xt*this.cosrot+(ct-=this.u_0)*this.sinrot,h.y=ct*this.cosrot-xt*this.sinrot),h.x=this.a*h.x+this.x0,h.y=this.a*h.y+this.y0,h},inverse:function Ea(t){var h,p,B,j,X,tt,Q,ct={};if(t.x=1/this.a*(t.x-this.x0),t.y=1/this.a*(t.y-this.y0),this.no_rot?(p=t.y,h=t.x):(p=t.x*this.cosrot-t.y*this.sinrot,h=t.y*this.cosrot+t.x*this.sinrot+this.u_0),j=.5*((B=Math.exp(-this.BrA*p))-1/B),X=.5*(B+1/B),Q=((tt=Math.sin(this.BrA*h))*this.cosgam+j*this.singam)/X,Math.abs(Math.abs(Q)-1)<e)ct.x=0,ct.y=Q<0?-u:u;else{if(ct.y=this.E/Math.sqrt((1+Q)/(1-Q)),ct.y=ve(this.e,Math.pow(ct.y,1/this.B)),ct.y===1/0)throw new Error;ct.x=-this.rB*Math.atan2(j*this.cosgam-tt*this.singam,Math.cos(this.BrA*h))}return ct.x+=this.lam0,ct},names:["Hotine_Oblique_Mercator","Hotine Oblique Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin","Hotine_Oblique_Mercator_Two_Point_Natural_Origin","Hotine_Oblique_Mercator_Azimuth_Center","Oblique_Mercator","omerc"]},Ca={init:function Ta(){if(this.lat2||(this.lat2=this.lat1),this.k0||(this.k0=1),this.x0=this.x0||0,this.y0=this.y0||0,!(Math.abs(this.lat1+this.lat2)<e)){var t=this.b/this.a;this.e=Math.sqrt(1-t*t);var h=Math.sin(this.lat1),p=Math.cos(this.lat1),B=Nt(this.e,h,p),j=ue(this.e,this.lat1,h),X=Math.sin(this.lat2),tt=Math.cos(this.lat2),Q=Nt(this.e,X,tt),ct=ue(this.e,this.lat2,X),xt=ue(this.e,this.lat0,Math.sin(this.lat0));this.ns=Math.abs(this.lat1-this.lat2)>e?Math.log(B/Q)/Math.log(j/ct):h,isNaN(this.ns)&&(this.ns=h),this.f0=B/(this.ns*Math.pow(j,this.ns)),this.rh=this.a*this.f0*Math.pow(xt,this.ns),this.title||(this.title="Lambert Conformal Conic")}},forward:function fn(t){var h=t.x,p=t.y;Math.abs(2*Math.abs(p)-Math.PI)<=e&&(p=zt(p)*(u-2*e));var j,X,B=Math.abs(Math.abs(p)-u);if(B>e)j=ue(this.e,p,Math.sin(p)),X=this.a*this.f0*Math.pow(j,this.ns);else{if((B=p*this.ns)<=0)return null;X=0}var tt=this.ns*Bt(h-this.long0);return t.x=this.k0*(X*Math.sin(tt))+this.x0,t.y=this.k0*(this.rh-X*Math.cos(tt))+this.y0,t},inverse:function Pa(t){var h,p,B,j,X,tt=(t.x-this.x0)/this.k0,Q=this.rh-(t.y-this.y0)/this.k0;this.ns>0?(h=Math.sqrt(tt*tt+Q*Q),p=1):(h=-Math.sqrt(tt*tt+Q*Q),p=-1);var ct=0;if(0!==h&&(ct=Math.atan2(p*tt,p*Q)),0!==h||this.ns>0){if(p=1/this.ns,B=Math.pow(h/(this.a*this.f0),p),-9999===(j=ve(this.e,B)))return null}else j=-u;return X=Bt(ct/this.ns+this.long0),t.x=X,t.y=j,t},names:["Lambert Tangential Conformal Conic Projection","Lambert_Conformal_Conic","Lambert_Conformal_Conic_1SP","Lambert_Conformal_Conic_2SP","lcc","Lambert Conic Conformal (1SP)","Lambert Conic Conformal (2SP)"]},Ra={init:function Rr(){this.a=6377397.155,this.es=.006674372230614,this.e=Math.sqrt(this.es),this.lat0||(this.lat0=.863937979737193),this.long0||(this.long0=.4334234309119251),this.k0||(this.k0=.9999),this.s45=.785398163397448,this.s90=2*this.s45,this.fi0=this.lat0,this.e2=this.es,this.e=Math.sqrt(this.e2),this.alfa=Math.sqrt(1+this.e2*Math.pow(Math.cos(this.fi0),4)/(1-this.e2)),this.uq=1.04216856380474,this.u0=Math.asin(Math.sin(this.fi0)/this.alfa),this.g=Math.pow((1+this.e*Math.sin(this.fi0))/(1-this.e*Math.sin(this.fi0)),this.alfa*this.e/2),this.k=Math.tan(this.u0/2+this.s45)/Math.pow(Math.tan(this.fi0/2+this.s45),this.alfa)*this.g,this.k1=this.k0,this.n0=this.a*Math.sqrt(1-this.e2)/(1-this.e2*Math.pow(Math.sin(this.fi0),2)),this.s0=1.37008346281555,this.n=Math.sin(this.s0),this.ro0=this.k1*this.n0/Math.tan(this.s0),this.ad=this.s90-this.uq},forward:function Or(t){var h,p,B,j,X,tt,Q,xt=t.y,Ut=Bt(t.x-this.long0);return h=Math.pow((1+this.e*Math.sin(xt))/(1-this.e*Math.sin(xt)),this.alfa*this.e/2),p=2*(Math.atan(this.k*Math.pow(Math.tan(xt/2+this.s45),this.alfa)/h)-this.s45),B=-Ut*this.alfa,j=Math.asin(Math.cos(this.ad)*Math.sin(p)+Math.sin(this.ad)*Math.cos(p)*Math.cos(B)),X=Math.asin(Math.cos(p)*Math.sin(B)/Math.cos(j)),tt=this.n*X,Q=this.ro0*Math.pow(Math.tan(this.s0/2+this.s45),this.n)/Math.pow(Math.tan(j/2+this.s45),this.n),t.y=Q*Math.cos(tt)/1,t.x=Q*Math.sin(tt)/1,this.czech||(t.y*=-1,t.x*=-1),t},inverse:function Sr(t){var h,p,B,j,tt,Q,ct,xt=t.x;t.x=t.y,t.y=xt,this.czech||(t.y*=-1,t.x*=-1),tt=Math.sqrt(t.x*t.x+t.y*t.y),j=Math.atan2(t.y,t.x)/Math.sin(this.s0),B=2*(Math.atan(Math.pow(this.ro0/tt,1/this.n)*Math.tan(this.s0/2+this.s45))-this.s45),h=Math.asin(Math.cos(this.ad)*Math.sin(B)-Math.sin(this.ad)*Math.cos(B)*Math.cos(j)),p=Math.asin(Math.cos(B)*Math.sin(j)/Math.cos(h)),t.x=this.long0-p/this.alfa,Q=h,ct=0;var Ut=0;do{t.y=2*(Math.atan(Math.pow(this.k,-1/this.alfa)*Math.pow(Math.tan(h/2+this.s45),1/this.alfa)*Math.pow((1+this.e*Math.sin(Q))/(1-this.e*Math.sin(Q)),this.e/2))-this.s45),Math.abs(Q-t.y)<1e-10&&(ct=1),Q=t.y,Ut+=1}while(0===ct&&Ut<15);return Ut>=15?null:t},names:["Krovak","krovak"]};function di(t,h,p,B,j){return t*j-h*Math.sin(2*j)+p*Math.sin(4*j)-B*Math.sin(6*j)}function Ln(t){return 1-.25*t*(1+t/16*(3+1.25*t))}function _n(t){return.375*t*(1+.25*t*(1+.46875*t))}function Ki(t){return.05859375*t*t*(1+.75*t)}function ts(t){return t*t*t*(35/3072)}function wn(t,h,p){var B=h*p;return t/Math.sqrt(1-B*B)}function Dn(t){return Math.abs(t)<u?t:t-zt(t)*Math.PI}function es(t,h,p,B,j){var X,tt;X=t/h;for(var Q=0;Q<15;Q++)if(X+=tt=(t-(h*X-p*Math.sin(2*X)+B*Math.sin(4*X)-j*Math.sin(6*X)))/(h-2*p*Math.cos(2*X)+4*B*Math.cos(4*X)-6*j*Math.cos(6*X)),Math.abs(tt)<=1e-10)return X;return NaN}const is={init:function Qs(){this.sphere||(this.e0=Ln(this.es),this.e1=_n(this.es),this.e2=Ki(this.es),this.e3=ts(this.es),this.ml0=this.a*di(this.e0,this.e1,this.e2,this.e3,this.lat0))},forward:function Oa(t){var h,p,B=t.x,j=t.y;if(B=Bt(B-this.long0),this.sphere)h=this.a*Math.asin(Math.cos(j)*Math.sin(B)),p=this.a*(Math.atan2(Math.tan(j),Math.cos(B))-this.lat0);else{var X=Math.sin(j),tt=Math.cos(j),Q=wn(this.a,this.e,X),ct=Math.tan(j)*Math.tan(j),xt=B*Math.cos(j),Ut=xt*xt,Ot=this.es*tt*tt/(1-this.es);h=Q*xt*(1-Ut*ct*(1/6-(8-ct+8*Ot)*Ut/120)),p=this.a*di(this.e0,this.e1,this.e2,this.e3,j)-this.ml0+Q*X/tt*Ut*(.5+(5-ct+6*Ot)*Ut/24)}return t.x=h+this.x0,t.y=p+this.y0,t},inverse:function $s(t){t.x-=this.x0,t.y-=this.y0;var B,j,h=t.x/this.a,p=t.y/this.a;if(this.sphere){var X=p+this.lat0;B=Math.asin(Math.sin(X)*Math.cos(h)),j=Math.atan2(Math.tan(h),Math.cos(X))}else{var Q=es(this.ml0/this.a+p,this.e0,this.e1,this.e2,this.e3);if(Math.abs(Math.abs(Q)-u)<=e)return t.x=this.long0,t.y=u,p<0&&(t.y*=-1),t;var ct=wn(this.a,this.e,Math.sin(Q)),xt=ct*ct*ct/this.a/this.a*(1-this.es),Ut=Math.pow(Math.tan(Q),2),Ot=h*this.a/ct,kt=Ot*Ot;B=Q-ct*Math.tan(Q)/xt*Ot*Ot*(.5-(1+3*Ut)*Ot*Ot/24),j=Ot*(1-kt*(Ut/3+(1+3*Ut)*Ut*kt/15))/Math.cos(Q)}return t.x=Bt(j+this.long0),t.y=Dn(B),t},names:["Cassini","Cassini_Soldner","cass"]};function sn(t,h){var p;return t>1e-7?(1-t*t)*(h/(1-(p=t*h)*p)-.5/t*Math.log((1-p)/(1+p))):2*h}const wr={init:function qs(){var h,t=Math.abs(this.lat0);if(this.mode=Math.abs(t-u)<e?this.lat0<0?this.S_POLE:this.N_POLE:Math.abs(t)<e?this.EQUIT:this.OBLIQ,this.es>0)switch(this.qp=sn(this.e,1),this.mmf=.5/(1-this.es),this.apa=function Da(t){var h,p=[];return p[0]=.3333333333333333*t,p[0]+=.17222222222222222*(h=t*t),p[1]=.06388888888888888*h,p[0]+=.10257936507936508*(h*=t),p[1]+=.0664021164021164*h,p[2]=.016415012942191543*h,p}(this.es),this.mode){case this.N_POLE:case this.S_POLE:this.dd=1;break;case this.EQUIT:this.rq=Math.sqrt(.5*this.qp),this.dd=1/this.rq,this.xmf=1,this.ymf=.5*this.qp;break;case this.OBLIQ:this.rq=Math.sqrt(.5*this.qp),h=Math.sin(this.lat0),this.sinb1=sn(this.e,h)/this.qp,this.cosb1=Math.sqrt(1-this.sinb1*this.sinb1),this.dd=Math.cos(this.lat0)/(Math.sqrt(1-this.es*h*h)*this.rq*this.cosb1),this.ymf=(this.xmf=this.rq)/this.dd,this.xmf*=this.dd}else this.mode===this.OBLIQ&&(this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0))},forward:function Ir(t){var h,p,B,j,X,tt,Q,ct,xt,Ut,Ot=t.x,kt=t.y;if(Ot=Bt(Ot-this.long0),this.sphere){if(X=Math.sin(kt),Ut=Math.cos(kt),B=Math.cos(Ot),this.mode===this.OBLIQ||this.mode===this.EQUIT){if((p=this.mode===this.EQUIT?1+Ut*B:1+this.sinph0*X+this.cosph0*Ut*B)<=e)return null;h=(p=Math.sqrt(2/p))*Ut*Math.sin(Ot),p*=this.mode===this.EQUIT?X:this.cosph0*X-this.sinph0*Ut*B}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(B=-B),Math.abs(kt+this.lat0)<e)return null;p=n-.5*kt,h=(p=2*(this.mode===this.S_POLE?Math.cos(p):Math.sin(p)))*Math.sin(Ot),p*=B}}else{switch(Q=0,ct=0,xt=0,B=Math.cos(Ot),j=Math.sin(Ot),X=Math.sin(kt),tt=sn(this.e,X),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(Q=tt/this.qp,ct=Math.sqrt(1-Q*Q)),this.mode){case this.OBLIQ:xt=1+this.sinb1*Q+this.cosb1*ct*B;break;case this.EQUIT:xt=1+ct*B;break;case this.N_POLE:xt=u+kt,tt=this.qp-tt;break;case this.S_POLE:xt=kt-u,tt=this.qp+tt}if(Math.abs(xt)<e)return null;switch(this.mode){case this.OBLIQ:case this.EQUIT:xt=Math.sqrt(2/xt),p=this.mode===this.OBLIQ?this.ymf*xt*(this.cosb1*Q-this.sinb1*ct*B):(xt=Math.sqrt(2/(1+ct*B)))*Q*this.ymf,h=this.xmf*xt*ct*j;break;case this.N_POLE:case this.S_POLE:tt>=0?(h=(xt=Math.sqrt(tt))*j,p=B*(this.mode===this.S_POLE?xt:-xt)):h=p=0}}return t.x=this.a*h+this.x0,t.y=this.a*p+this.y0,t},inverse:function Ar(t){t.x-=this.x0,t.y-=this.y0;var B,j,X,tt,Q,ct,xt,h=t.x/this.a,p=t.y/this.a;if(this.sphere){var Ot,Ut=0,kt=0;if((j=.5*(Ot=Math.sqrt(h*h+p*p)))>1)return null;switch(j=2*Math.asin(j),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(kt=Math.sin(j),Ut=Math.cos(j)),this.mode){case this.EQUIT:j=Math.abs(Ot)<=e?0:Math.asin(p*kt/Ot),h*=kt,p=Ut*Ot;break;case this.OBLIQ:j=Math.abs(Ot)<=e?this.lat0:Math.asin(Ut*this.sinph0+p*kt*this.cosph0/Ot),h*=kt*this.cosph0,p=(Ut-Math.sin(j)*this.sinph0)*Ot;break;case this.N_POLE:p=-p,j=u-j;break;case this.S_POLE:j-=u}B=0!==p||this.mode!==this.EQUIT&&this.mode!==this.OBLIQ?Math.atan2(h,p):0}else{if(xt=0,this.mode===this.OBLIQ||this.mode===this.EQUIT){if(h/=this.dd,p*=this.dd,(ct=Math.sqrt(h*h+p*p))<e)return t.x=this.long0,t.y=this.lat0,t;tt=2*Math.asin(.5*ct/this.rq),X=Math.cos(tt),h*=tt=Math.sin(tt),this.mode===this.OBLIQ?(Q=this.qp*(xt=X*this.sinb1+p*tt*this.cosb1/ct),p=ct*this.cosb1*X-p*this.sinb1*tt):(Q=this.qp*(xt=p*tt/ct),p=ct*X)}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(p=-p),!(Q=h*h+p*p))return t.x=this.long0,t.y=this.lat0,t;xt=1-Q/this.qp,this.mode===this.S_POLE&&(xt=-xt)}B=Math.atan2(h,p),j=function Fa(t,h){var p=t+t;return t+h[0]*Math.sin(p)+h[1]*Math.sin(p+p)+h[2]*Math.sin(p+p+p)}(Math.asin(xt),this.apa)}return t.x=Bt(this.long0+B),t.y=j,t},names:["Lambert Azimuthal Equal Area","Lambert_Azimuthal_Equal_Area","laea"],S_POLE:1,N_POLE:2,EQUIT:3,OBLIQ:4};function Wi(t){return Math.abs(t)>1&&(t=t>1?1:-1),Math.asin(t)}const Ua={init:function tr(){Math.abs(this.lat1+this.lat2)<e||(this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e3=Math.sqrt(this.es),this.sin_po=Math.sin(this.lat1),this.cos_po=Math.cos(this.lat1),this.t1=this.sin_po,this.con=this.sin_po,this.ms1=Nt(this.e3,this.sin_po,this.cos_po),this.qs1=sn(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat2),this.cos_po=Math.cos(this.lat2),this.t2=this.sin_po,this.ms2=Nt(this.e3,this.sin_po,this.cos_po),this.qs2=sn(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat0),this.cos_po=Math.cos(this.lat0),this.t3=this.sin_po,this.qs0=sn(this.e3,this.sin_po),this.ns0=Math.abs(this.lat1-this.lat2)>e?(this.ms1*this.ms1-this.ms2*this.ms2)/(this.qs2-this.qs1):this.con,this.c=this.ms1*this.ms1+this.ns0*this.qs1,this.rh=this.a*Math.sqrt(this.c-this.ns0*this.qs0)/this.ns0)},forward:function Za(t){var h=t.x,p=t.y;this.sin_phi=Math.sin(p),this.cos_phi=Math.cos(p);var B=sn(this.e3,this.sin_phi),j=this.a*Math.sqrt(this.c-this.ns0*B)/this.ns0,X=this.ns0*Bt(h-this.long0),tt=j*Math.sin(X)+this.x0,Q=this.rh-j*Math.cos(X)+this.y0;return t.x=tt,t.y=Q,t},inverse:function Dr(t){var h,B,j,X,tt;return t.x-=this.x0,t.y=this.rh-t.y+this.y0,this.ns0>=0?(h=Math.sqrt(t.x*t.x+t.y*t.y),B=1):(h=-Math.sqrt(t.x*t.x+t.y*t.y),B=-1),j=0,0!==h&&(j=Math.atan2(B*t.x,B*t.y)),B=h*this.ns0/this.a,tt=this.sphere?Math.asin((this.c-B*B)/(2*this.ns0)):this.phi1z(this.e3,(this.c-B*B)/this.ns0),X=Bt(j/this.ns0+this.long0),t.x=X,t.y=tt,t},names:["Albers_Conic_Equal_Area","Albers","aea"],phi1z:function Fr(t,h){var p,j,X,tt,Q=Wi(.5*h);if(t<e)return Q;for(var ct=t*t,xt=1;xt<=25;xt++)if(Q+=tt=.5*(X=1-(j=t*(p=Math.sin(Q)))*j)*X/Math.cos(Q)*(h/(1-ct)-p/X+.5/t*Math.log((1-j)/(1+j))),Math.abs(tt)<=1e-7)return Q;return null}},Zr={init:function ja(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0),this.infinity_dist=1e3*this.a,this.rc=1},forward:function Ba(t){var h,p,B,j,tt,Q,ct,Ut=t.y;return B=Bt(t.x-this.long0),h=Math.sin(Ut),p=Math.cos(Ut),j=Math.cos(B),(tt=this.sin_p14*h+this.cos_p14*p*j)>0||Math.abs(tt)<=e?(Q=this.x0+1*this.a*p*Math.sin(B)/tt,ct=this.y0+1*this.a*(this.cos_p14*h-this.sin_p14*p*j)/tt):(Q=this.x0+this.infinity_dist*p*Math.sin(B),ct=this.y0+this.infinity_dist*(this.cos_p14*h-this.sin_p14*p*j)),t.x=Q,t.y=ct,t},inverse:function Nr(t){var h,p,B,j,X,tt;return t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,t.x/=this.k0,t.y/=this.k0,(h=Math.sqrt(t.x*t.x+t.y*t.y))?(j=Math.atan2(h,this.rc),p=Math.sin(j),tt=Wi((B=Math.cos(j))*this.sin_p14+t.y*p*this.cos_p14/h),X=Math.atan2(t.x*p,h*this.cos_p14*B-t.y*this.sin_p14*p),X=Bt(this.long0+X)):(tt=this.phic0,X=0),t.x=X,t.y=tt,t},names:["gnom"]},Ss={init:function er(){this.sphere||(this.k0=Nt(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)))},forward:function jr(t){var B,j,p=t.y,X=Bt(t.x-this.long0);if(this.sphere)B=this.x0+this.a*X*Math.cos(this.lat_ts),j=this.y0+this.a*Math.sin(p)/Math.cos(this.lat_ts);else{var tt=sn(this.e,Math.sin(p));B=this.x0+this.a*this.k0*X,j=this.y0+this.a*tt*.5/this.k0}return t.x=B,t.y=j,t},inverse:function ir(t){var h,p;return t.x-=this.x0,t.y-=this.y0,this.sphere?(h=Bt(this.long0+t.x/this.a/Math.cos(this.lat_ts)),p=Math.asin(t.y/this.a*Math.cos(this.lat_ts))):(p=function Ur(t,h){var p=1-(1-t*t)/(2*t)*Math.log((1-t)/(1+t));if(Math.abs(Math.abs(h)-p)<1e-6)return h<0?-1*u:u;for(var j,X,tt,Q,B=Math.asin(.5*h),ct=0;ct<30;ct++)if(X=Math.sin(B),tt=Math.cos(B),Q=t*X,B+=j=Math.pow(1-Q*Q,2)/(2*tt)*(h/(1-t*t)-X/(1-Q*Q)+.5/t*Math.log((1-Q)/(1+Q))),Math.abs(j)<=1e-10)return B;return NaN}(this.e,2*t.y*this.k0/this.a),h=Bt(this.long0+t.x/(this.a*this.k0))),t.x=h,t.y=p,t},names:["cea"]},nr={init:function Is(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Equidistant Cylindrical (Plate Carre)",this.rc=Math.cos(this.lat_ts)},forward:function Br(t){var p=t.y,B=Bt(t.x-this.long0),j=Dn(p-this.lat0);return t.x=this.x0+this.a*B*this.rc,t.y=this.y0+this.a*j,t},inverse:function Ga(t){var p=t.y;return t.x=Bt(this.long0+(t.x-this.x0)/(this.a*this.rc)),t.y=Dn(this.lat0+(p-this.y0)/this.a),t},names:["Equirectangular","Equidistant_Cylindrical","eqc"]},Nn={init:function rr(){this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=Ln(this.es),this.e1=_n(this.es),this.e2=Ki(this.es),this.e3=ts(this.es),this.ml0=this.a*di(this.e0,this.e1,this.e2,this.e3,this.lat0)},forward:function ki(t){var B,j,X,p=t.y,tt=Bt(t.x-this.long0);if(X=tt*Math.sin(p),this.sphere)Math.abs(p)<=e?(B=this.a*tt,j=-1*this.a*this.lat0):(B=this.a*Math.sin(X)/Math.tan(p),j=this.a*(Dn(p-this.lat0)+(1-Math.cos(X))/Math.tan(p)));else if(Math.abs(p)<=e)B=this.a*tt,j=-1*this.ml0;else{var Q=wn(this.a,this.e,Math.sin(p))/Math.tan(p);B=Q*Math.sin(X),j=this.a*di(this.e0,this.e1,this.e2,this.e3,p)-this.ml0+Q*(1-Math.cos(X))}return t.x=B+this.x0,t.y=j+this.y0,t},inverse:function Wr(t){var h,p,B,j,X,tt,Q,ct,xt;if(B=t.x-this.x0,j=t.y-this.y0,this.sphere)if(Math.abs(j+this.a*this.lat0)<=e)h=Bt(B/this.a+this.long0),p=0;else{var Ut;for(Q=B*B/this.a/this.a+(tt=this.lat0+j/this.a)*tt,ct=tt,X=20;X;--X)if(ct+=xt=-1*(tt*(ct*(Ut=Math.tan(ct))+1)-ct-.5*(ct*ct+Q)*Ut)/((ct-tt)/Ut-1),Math.abs(xt)<=e){p=ct;break}h=Bt(this.long0+Math.asin(B*Math.tan(ct)/this.a)/Math.sin(p))}else if(Math.abs(j+this.ml0)<=e)p=0,h=Bt(this.long0+B/this.a);else{var Ot,kt,re,ae,oe;for(Q=B*B/this.a/this.a+(tt=(this.ml0+j)/this.a)*tt,ct=tt,X=20;X;--X)if(oe=this.e*Math.sin(ct),Ot=Math.sqrt(1-oe*oe)*Math.tan(ct),kt=this.a*di(this.e0,this.e1,this.e2,this.e3,ct),re=this.e0-2*this.e1*Math.cos(2*ct)+4*this.e2*Math.cos(4*ct)-6*this.e3*Math.cos(6*ct),ct-=xt=(tt*(Ot*(ae=kt/this.a)+1)-ae-.5*Ot*(ae*ae+Q))/(this.es*Math.sin(2*ct)*(ae*ae+Q-2*tt*ae)/(4*Ot)+(tt-ae)*(Ot*re-2/Math.sin(2*ct))-re),Math.abs(xt)<=e){p=ct;break}Ot=Math.sqrt(1-this.es*Math.pow(Math.sin(p),2))*Math.tan(p),h=Bt(this.long0+Math.asin(B*Ot/this.a)/Math.sin(p))}return t.x=h,t.y=p,t},names:["Polyconic","poly"]},Ka={init:function lr(){this.A=[],this.A[1]=.6399175073,this.A[2]=-.1358797613,this.A[3]=.063294409,this.A[4]=-.02526853,this.A[5]=.0117879,this.A[6]=-.0055161,this.A[7]=.0026906,this.A[8]=-.001333,this.A[9]=67e-5,this.A[10]=-34e-5,this.B_re=[],this.B_im=[],this.B_re[1]=.7557853228,this.B_im[1]=0,this.B_re[2]=.249204646,this.B_im[2]=.003371507,this.B_re[3]=-.001541739,this.B_im[3]=.04105856,this.B_re[4]=-.10162907,this.B_im[4]=.01727609,this.B_re[5]=-.26623489,this.B_im[5]=-.36249218,this.B_re[6]=-.6870983,this.B_im[6]=-1.1651967,this.C_re=[],this.C_im=[],this.C_re[1]=1.3231270439,this.C_im[1]=0,this.C_re[2]=-.577245789,this.C_im[2]=-.007809598,this.C_re[3]=.508307513,this.C_im[3]=-.112208952,this.C_re[4]=-.15094762,this.C_im[4]=.18200602,this.C_re[5]=1.01418179,this.C_im[5]=1.64497696,this.C_re[6]=1.9660549,this.C_im[6]=2.5127645,this.D=[],this.D[1]=1.5627014243,this.D[2]=.5185406398,this.D[3]=-.03333098,this.D[4]=-.1052906,this.D[5]=-.0368594,this.D[6]=.007317,this.D[7]=.0122,this.D[8]=.00394,this.D[9]=-.0013},forward:function Gr(t){var h,tt=(t.y-this.lat0)/f*1e-5,Q=t.x-this.long0,ct=1,xt=0;for(h=1;h<=10;h++)xt+=this.A[h]*(ct*=tt);var oe,Ut=xt,Ot=Q,kt=1,re=0,me=0,Ce=0;for(h=1;h<=6;h++)oe=re*Ut+kt*Ot,me=me+this.B_re[h]*(kt=kt*Ut-re*Ot)-this.B_im[h]*(re=oe),Ce=Ce+this.B_im[h]*kt+this.B_re[h]*re;return t.x=Ce*this.a+this.x0,t.y=me*this.a+this.y0,t},inverse:function zr(t){var h,Ot,tt=(t.y-this.y0)/this.a,Q=(t.x-this.x0)/this.a,ct=1,xt=0,kt=0,re=0;for(h=1;h<=6;h++)Ot=xt*tt+ct*Q,kt=kt+this.C_re[h]*(ct=ct*tt-xt*Q)-this.C_im[h]*(xt=Ot),re=re+this.C_im[h]*ct+this.C_re[h]*xt;for(var ae=0;ae<this.iterations;ae++){var Ne,oe=kt,me=re,Be=tt,ze=Q;for(h=2;h<=6;h++)Ne=me*kt+oe*re,Be+=(h-1)*(this.B_re[h]*(oe=oe*kt-me*re)-this.B_im[h]*(me=Ne)),ze+=(h-1)*(this.B_im[h]*oe+this.B_re[h]*me);oe=1,me=0;var pe=this.B_re[1],Ke=this.B_im[1];for(h=2;h<=6;h++)Ne=me*kt+oe*re,pe+=h*(this.B_re[h]*(oe=oe*kt-me*re)-this.B_im[h]*(me=Ne)),Ke+=h*(this.B_im[h]*oe+this.B_re[h]*me);var Se=pe*pe+Ke*Ke;kt=(Be*pe+ze*Ke)/Se,re=(ze*pe-Be*Ke)/Se}var Oe=kt,He=re,Fi=1,Li=0;for(h=1;h<=9;h++)Li+=this.D[h]*(Fi*=Oe);var on=this.lat0+Li*f*1e5;return t.x=this.long0+He,t.y=on,t},names:["New_Zealand_Map_Grid","nzmg"]},mn={init:function ka(){},forward:function hr(t){var p=t.y,B=Bt(t.x-this.long0),j=this.x0+this.a*B,X=this.y0+this.a*Math.log(Math.tan(Math.PI/4+p/2.5))*1.25;return t.x=j,t.y=X,t},inverse:function ur(t){t.x-=this.x0,t.y-=this.y0;var h=Bt(this.long0+t.x/this.a),p=2.5*(Math.atan(Math.exp(.8*t.y/this.a))-Math.PI/4);return t.x=h,t.y=p,t},names:["Miller_Cylindrical","mill"]},Ya={init:function cr(){this.sphere?(this.n=1,this.m=0,this.es=0,this.C_y=Math.sqrt((this.m+1)/this.n),this.C_x=this.C_y/(this.m+1)):this.en=Jn(this.es)},forward:function Xa(t){var h,p,B=t.x,j=t.y;if(B=Bt(B-this.long0),this.sphere){if(this.m)for(var X=this.n*Math.sin(j),tt=20;tt;--tt){var Q=(this.m*j+Math.sin(j)-X)/(this.m+Math.cos(j));if(j-=Q,Math.abs(Q)<e)break}else j=1!==this.n?Math.asin(this.n*Math.sin(j)):j;h=this.a*this.C_x*B*(this.m+Math.cos(j)),p=this.a*this.C_y*j}else{var ct=Math.sin(j),xt=Math.cos(j);p=this.a*ji(j,ct,xt,this.en),h=this.a*B*xt/Math.sqrt(1-this.es*ct*ct)}return t.x=h,t.y=p,t},inverse:function Va(t){var h,B,j;return t.x-=this.x0,B=t.x/this.a,t.y-=this.y0,h=t.y/this.a,this.sphere?(h/=this.C_y,B/=this.C_x*(this.m+Math.cos(h)),this.m?h=Wi((this.m*h+Math.sin(h))/this.n):1!==this.n&&(h=Wi(Math.sin(h)/this.n)),B=Bt(B+this.long0),h=Dn(h)):(h=ys(t.y/this.a,this.es,this.en),(j=Math.abs(h))<u?(j=Math.sin(h),B=Bt(this.long0+t.x*Math.sqrt(1-this.es*j*j)/(this.a*Math.cos(h)))):j-e<u&&(B=this.long0)),t.x=B,t.y=h,t},names:["Sinusoidal","sinu"]},$a={init:function dr(){},forward:function Ha(t){for(var p=t.y,B=Bt(t.x-this.long0),j=p,X=Math.PI*Math.sin(p);;){var tt=-(j+Math.sin(j)-X)/(1+Math.cos(j));if(j+=tt,Math.abs(tt)<e)break}j/=2,Math.PI/2-Math.abs(p)<e&&(B=0);var Q=.900316316158*this.a*B*Math.cos(j)+this.x0,ct=1.4142135623731*this.a*Math.sin(j)+this.y0;return t.x=Q,t.y=ct,t},inverse:function Ja(t){var h,p;t.x-=this.x0,t.y-=this.y0,p=t.y/(1.4142135623731*this.a),Math.abs(p)>.999999999999&&(p=.999999999999),h=Math.asin(p);var B=Bt(this.long0+t.x/(.900316316158*this.a*Math.cos(h)));B<-Math.PI&&(B=-Math.PI),B>Math.PI&&(B=Math.PI),p=(2*h+Math.sin(2*h))/Math.PI,Math.abs(p)>1&&(p=1);var j=Math.asin(p);return t.x=B,t.y=j,t},names:["Mollweide","moll"]},De={init:function fr(){Math.abs(this.lat1+this.lat2)<e||(this.lat2=this.lat2||this.lat1,this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=Ln(this.es),this.e1=_n(this.es),this.e2=Ki(this.es),this.e3=ts(this.es),this.sinphi=Math.sin(this.lat1),this.cosphi=Math.cos(this.lat1),this.ms1=Nt(this.e,this.sinphi,this.cosphi),this.ml1=di(this.e0,this.e1,this.e2,this.e3,this.lat1),Math.abs(this.lat1-this.lat2)<e?this.ns=this.sinphi:(this.sinphi=Math.sin(this.lat2),this.cosphi=Math.cos(this.lat2),this.ms2=Nt(this.e,this.sinphi,this.cosphi),this.ml2=di(this.e0,this.e1,this.e2,this.e3,this.lat2),this.ns=(this.ms1-this.ms2)/(this.ml2-this.ml1)),this.g=this.ml1+this.ms1/this.ns,this.ml0=di(this.e0,this.e1,this.e2,this.e3,this.lat0),this.rh=this.a*(this.g-this.ml0))},forward:function bs(t){var B,h=t.x,p=t.y;if(this.sphere)B=this.a*(this.g-p);else{var j=di(this.e0,this.e1,this.e2,this.e3,p);B=this.a*(this.g-j)}var X=this.ns*Bt(h-this.long0),tt=this.x0+B*Math.sin(X),Q=this.y0+this.rh-B*Math.cos(X);return t.x=tt,t.y=Q,t},inverse:function Ls(t){var h,p,B,j;t.x-=this.x0,t.y=this.rh-t.y+this.y0,this.ns>=0?(p=Math.sqrt(t.x*t.x+t.y*t.y),h=1):(p=-Math.sqrt(t.x*t.x+t.y*t.y),h=-1);var X=0;return 0!==p&&(X=Math.atan2(h*t.x,h*t.y)),this.sphere?(j=Bt(this.long0+X/this.ns),B=Dn(this.g-p/this.a),t.x=j,t.y=B,t):(B=es(this.g-p/this.a,this.e0,this.e1,this.e2,this.e3),j=Bt(this.long0+X/this.ns),t.x=j,t.y=B,t)},names:["Equidistant_Conic","eqdc"]},rn={init:function qa(){this.R=this.a},forward:function to(t){var j,X,p=t.y,B=Bt(t.x-this.long0);Math.abs(p)<=e&&(j=this.x0+this.R*B,X=this.y0);var tt=Wi(2*Math.abs(p/Math.PI));(Math.abs(B)<=e||Math.abs(Math.abs(p)-u)<=e)&&(j=this.x0,X=p>=0?this.y0+Math.PI*this.R*Math.tan(.5*tt):this.y0+Math.PI*this.R*-Math.tan(.5*tt));var Q=.5*Math.abs(Math.PI/B-B/Math.PI),ct=Q*Q,xt=Math.sin(tt),Ut=Math.cos(tt),Ot=Ut/(xt+Ut-1),re=Ot*(2/xt-1),ae=re*re,oe=Math.PI*this.R*(Q*(Ot-ae)+Math.sqrt(ct*(Ot-ae)*(Ot-ae)-(ae+ct)*(Ot*Ot-ae)))/(ae+ct);B<0&&(oe=-oe),j=this.x0+oe;var me=ct+Ot;return oe=Math.PI*this.R*(re*me-Q*Math.sqrt((ae+ct)*(ct+1)-me*me))/(ae+ct),X=p>=0?this.y0+oe:this.y0-oe,t.x=j,t.y=X,t},inverse:function Vr(t){var h,p,B,j,X,tt,Q,ct,xt,Ut,Ot,kt;return t.x-=this.x0,t.y-=this.y0,Ot=Math.PI*this.R,X=(B=t.x/Ot)*B+(j=t.y/Ot)*j,Ot=3*(j*j/(ct=-2*(tt=-Math.abs(j)*(1+X))+1+2*j*j+X*X)+(2*(Q=tt-2*j*j+B*B)*Q*Q/ct/ct/ct-9*tt*Q/ct/ct)/27)/(xt=(tt-Q*Q/3/ct)/ct)/(Ut=2*Math.sqrt(-xt/3)),Math.abs(Ot)>1&&(Ot=Ot>=0?1:-1),kt=Math.acos(Ot)/3,p=t.y>=0?(-Ut*Math.cos(kt+Math.PI/3)-Q/3/ct)*Math.PI:-(-Ut*Math.cos(kt+Math.PI/3)-Q/3/ct)*Math.PI,h=Math.abs(B)<e?this.long0:Bt(this.long0+Math.PI*(X-1+Math.sqrt(1+2*(B*B-j*j)+X*X))/2/B),t.x=h,t.y=p,t},names:["Van_der_Grinten_I","VanDerGrinten","vandg"]},io={init:function eo(){this.sin_p12=Math.sin(this.lat0),this.cos_p12=Math.cos(this.lat0)},forward:function _r(t){var tt,Q,ct,xt,Ut,Ot,kt,re,ae,oe,me,Ce,Ne,Be,ze,pe,Ke,Se,Oe,He,Fi,Li,h=t.x,p=t.y,B=Math.sin(t.y),j=Math.cos(t.y),X=Bt(h-this.long0);return this.sphere?Math.abs(this.sin_p12-1)<=e?(t.x=this.x0+this.a*(u-p)*Math.sin(X),t.y=this.y0-this.a*(u-p)*Math.cos(X),t):Math.abs(this.sin_p12+1)<=e?(t.x=this.x0+this.a*(u+p)*Math.sin(X),t.y=this.y0+this.a*(u+p)*Math.cos(X),t):(Se=this.sin_p12*B+this.cos_p12*j*Math.cos(X),Ke=(pe=Math.acos(Se))?pe/Math.sin(pe):1,t.x=this.x0+this.a*Ke*j*Math.sin(X),t.y=this.y0+this.a*Ke*(this.cos_p12*B-this.sin_p12*j*Math.cos(X)),t):(tt=Ln(this.es),Q=_n(this.es),ct=Ki(this.es),xt=ts(this.es),Math.abs(this.sin_p12-1)<=e?(Ut=this.a*di(tt,Q,ct,xt,u),Ot=this.a*di(tt,Q,ct,xt,p),t.x=this.x0+(Ut-Ot)*Math.sin(X),t.y=this.y0-(Ut-Ot)*Math.cos(X),t):Math.abs(this.sin_p12+1)<=e?(Ut=this.a*di(tt,Q,ct,xt,u),Ot=this.a*di(tt,Q,ct,xt,p),t.x=this.x0+(Ut+Ot)*Math.sin(X),t.y=this.y0+(Ut+Ot)*Math.cos(X),t):(kt=B/j,re=wn(this.a,this.e,this.sin_p12),ae=wn(this.a,this.e,B),oe=Math.atan((1-this.es)*kt+this.es*re*this.sin_p12/(ae*j)),Oe=0===(me=Math.atan2(Math.sin(X),this.cos_p12*Math.tan(oe)-this.sin_p12*Math.cos(X)))?Math.asin(this.cos_p12*Math.sin(oe)-this.sin_p12*Math.cos(oe)):Math.abs(Math.abs(me)-Math.PI)<=e?-Math.asin(this.cos_p12*Math.sin(oe)-this.sin_p12*Math.cos(oe)):Math.asin(Math.sin(X)*Math.cos(oe)/Math.sin(me)),Ce=this.e*this.sin_p12/Math.sqrt(1-this.es),Ne=this.e*this.cos_p12*Math.cos(me)/Math.sqrt(1-this.es),t.x=this.x0+(pe=re*Oe*(1-(He=Oe*Oe)*(ze=Ne*Ne)*(1-ze)/6+(Fi=He*Oe)/8*(Be=Ce*Ne)*(1-2*ze)+(Li=Fi*Oe)/120*(ze*(4-7*ze)-3*Ce*Ce*(1-7*ze))-Li*Oe/48*Be))*Math.sin(me),t.y=this.y0+pe*Math.cos(me),t))},inverse:function Yr(t){var h,p,B,j,X,tt,Q,ct,xt,Ut,Ot,kt,ae,oe,me,Ce,Ne,Be,ze,pe,Ke,Se,Oe;return t.x-=this.x0,t.y-=this.y0,this.sphere?(h=Math.sqrt(t.x*t.x+t.y*t.y))>2*u*this.a?void 0:(p=h/this.a,B=Math.sin(p),j=Math.cos(p),X=this.long0,Math.abs(h)<=e?tt=this.lat0:(tt=Wi(j*this.sin_p12+t.y*B*this.cos_p12/h),Q=Math.abs(this.lat0)-u,X=Math.abs(Q)<=e?Bt(this.lat0>=0?this.long0+Math.atan2(t.x,-t.y):this.long0-Math.atan2(-t.x,t.y)):Bt(this.long0+Math.atan2(t.x*B,h*this.cos_p12*j-t.y*this.sin_p12*B))),t.x=X,t.y=tt,t):(ct=Ln(this.es),xt=_n(this.es),Ut=Ki(this.es),Ot=ts(this.es),Math.abs(this.sin_p12-1)<=e?(tt=es(((kt=this.a*di(ct,xt,Ut,Ot,u))-(h=Math.sqrt(t.x*t.x+t.y*t.y)))/this.a,ct,xt,Ut,Ot),X=Bt(this.long0+Math.atan2(t.x,-1*t.y)),t.x=X,t.y=tt,t):Math.abs(this.sin_p12+1)<=e?(kt=this.a*di(ct,xt,Ut,Ot,u),tt=es(((h=Math.sqrt(t.x*t.x+t.y*t.y))-kt)/this.a,ct,xt,Ut,Ot),X=Bt(this.long0+Math.atan2(t.x,t.y)),t.x=X,t.y=tt,t):(h=Math.sqrt(t.x*t.x+t.y*t.y),me=Math.atan2(t.x,t.y),ae=wn(this.a,this.e,this.sin_p12),Ce=Math.cos(me),ze=3*this.es*(1-(Be=-(Ne=this.e*this.cos_p12*Ce)*Ne/(1-this.es)))*this.sin_p12*this.cos_p12*Ce/(1-this.es),Se=1-Be*(Ke=(pe=h/ae)-Be*(1+Be)*Math.pow(pe,3)/6-ze*(1+3*Be)*Math.pow(pe,4)/24)*Ke/2-pe*Ke*Ke*Ke/6,oe=Math.asin(this.sin_p12*Math.cos(Ke)+this.cos_p12*Math.sin(Ke)*Ce),X=Bt(this.long0+Math.asin(Math.sin(me)*Math.sin(Ke)/Math.cos(oe))),Oe=Math.sin(oe),tt=Math.atan2((Oe-this.es*Se*this.sin_p12)*Math.tan(oe),Oe*(1-this.es)),t.x=X,t.y=tt,t))},names:["Azimuthal_Equidistant","aeqd"]},an={init:function no(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0)},forward:function so(t){var h,p,B,j,tt,Q,ct,Ut=t.y;return B=Bt(t.x-this.long0),h=Math.sin(Ut),p=Math.cos(Ut),j=Math.cos(B),((tt=this.sin_p14*h+this.cos_p14*p*j)>0||Math.abs(tt)<=e)&&(Q=1*this.a*p*Math.sin(B),ct=this.y0+1*this.a*(this.cos_p14*h-this.sin_p14*p*j)),t.x=Q,t.y=ct,t},inverse:function Hr(t){var h,p,B,j,X,tt,Q;return t.x-=this.x0,t.y-=this.y0,p=Wi((h=Math.sqrt(t.x*t.x+t.y*t.y))/this.a),B=Math.sin(p),j=Math.cos(p),tt=this.long0,Math.abs(h)<=e?(Q=this.lat0,t.x=tt,t.y=Q,t):(Q=Wi(j*this.sin_p14+t.y*B*this.cos_p14/h),X=Math.abs(this.lat0)-u,Math.abs(X)<=e?(tt=Bt(this.lat0>=0?this.long0+Math.atan2(t.x,-t.y):this.long0-Math.atan2(-t.x,t.y)),t.x=tt,t.y=Q,t):(tt=Bt(this.long0+Math.atan2(t.x*B,h*this.cos_p14*j-t.y*this.sin_p14*B)),t.x=tt,t.y=Q,t))},names:["ortho"]};var qe_AREA_0=1,qe_AREA_1=2,qe_AREA_2=3,qe_AREA_3=4;function ss(t,h,p,B){var j;return t<e?(B.value=qe_AREA_0,j=0):(j=Math.atan2(h,p),Math.abs(j)<=n?B.value=qe_AREA_0:j>n&&j<=u+n?(B.value=qe_AREA_1,j-=u):j>u+n||j<=-(u+n)?(B.value=qe_AREA_2,j=j>=0?j-m:j+m):(B.value=qe_AREA_3,j+=u)),j}function pn(t,h){var p=t+h;return p<-m?p+=g:p>+m&&(p-=g),p}const oo={init:function ro(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Quadrilateralized Spherical Cube",this.face=this.lat0>=u-n/2?5:this.lat0<=-(u-n/2)?6:Math.abs(this.long0)<=n?1:Math.abs(this.long0)<=u+n?this.long0>0?2:4:3,0!==this.es&&(this.one_minus_f=1-(this.a-this.b)/this.a,this.one_minus_f_squared=this.one_minus_f*this.one_minus_f)},forward:function ao(t){var p,B,j,X,tt,Q,h={x:0,y:0},ct={value:0};if(t.x-=this.long0,p=0!==this.es?Math.atan(this.one_minus_f_squared*Math.tan(t.y)):t.y,B=t.x,5===this.face)X=u-p,B>=n&&B<=u+n?(ct.value=qe_AREA_0,j=B-u):B>u+n||B<=-(u+n)?(ct.value=qe_AREA_1,j=B>0?B-m:B+m):B>-(u+n)&&B<=-n?(ct.value=qe_AREA_2,j=B+u):(ct.value=qe_AREA_3,j=B);else if(6===this.face)X=u+p,B>=n&&B<=u+n?(ct.value=qe_AREA_0,j=-B+u):B<n&&B>=-n?(ct.value=qe_AREA_1,j=-B):B<-n&&B>=-(u+n)?(ct.value=qe_AREA_2,j=-B-u):(ct.value=qe_AREA_3,j=B>0?-B+m:-B-m);else{var xt,Ut,Ot,kt,re,ae;2===this.face?B=pn(B,+u):3===this.face?B=pn(B,+m):4===this.face&&(B=pn(B,-u)),kt=Math.sin(p),re=Math.cos(p),ae=Math.sin(B),xt=re*Math.cos(B),Ut=re*ae,Ot=kt,1===this.face?j=ss(X=Math.acos(xt),Ot,Ut,ct):2===this.face?j=ss(X=Math.acos(Ut),Ot,-xt,ct):3===this.face?j=ss(X=Math.acos(-xt),Ot,-Ut,ct):4===this.face?j=ss(X=Math.acos(-Ut),Ot,xt,ct):(X=j=0,ct.value=qe_AREA_0)}return Q=Math.atan(12/m*(j+Math.acos(Math.sin(j)*Math.cos(n))-u)),tt=Math.sqrt((1-Math.cos(X))/(Math.cos(Q)*Math.cos(Q))/(1-Math.cos(Math.atan(1/Math.cos(j))))),ct.value===qe_AREA_1?Q+=u:ct.value===qe_AREA_2?Q+=m:ct.value===qe_AREA_3&&(Q+=1.5*m),h.x=tt*Math.cos(Q),h.y=tt*Math.sin(Q),h.x=h.x*this.a+this.x0,h.y=h.y*this.a+this.y0,t.x=h.x,t.y=h.y,t},inverse:function Qr(t){var p,B,j,X,tt,Q,ct,xt,Ut,oe,me,Ce,h={lam:0,phi:0},Ot={value:0};if(t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,B=Math.atan(Math.sqrt(t.x*t.x+t.y*t.y)),p=Math.atan2(t.y,t.x),t.x>=0&&t.x>=Math.abs(t.y)?Ot.value=qe_AREA_0:t.y>=0&&t.y>=Math.abs(t.x)?(Ot.value=qe_AREA_1,p-=u):t.x<0&&-t.x>=Math.abs(t.y)?(Ot.value=qe_AREA_2,p=p<0?p+m:p-m):(Ot.value=qe_AREA_3,p+=u),Ut=m/12*Math.tan(p),tt=Math.sin(Ut)/(Math.cos(Ut)-1/Math.sqrt(2)),Q=Math.atan(tt),(ct=1-(j=Math.cos(p))*j*(X=Math.tan(B))*X*(1-Math.cos(Math.atan(1/Math.cos(Q)))))<-1?ct=-1:ct>1&&(ct=1),5===this.face)xt=Math.acos(ct),h.phi=u-xt,h.lam=Ot.value===qe_AREA_0?Q+u:Ot.value===qe_AREA_1?Q<0?Q+m:Q-m:Ot.value===qe_AREA_2?Q-u:Q;else if(6===this.face)xt=Math.acos(ct),h.phi=xt-u,h.lam=Ot.value===qe_AREA_0?-Q+u:Ot.value===qe_AREA_1?-Q:Ot.value===qe_AREA_2?-Q-u:Q<0?-Q-m:-Q+m;else{var kt,re,ae;Ut=(kt=ct)*kt,re=(Ut+=(ae=Ut>=1?0:Math.sqrt(1-Ut)*Math.sin(Q))*ae)>=1?0:Math.sqrt(1-Ut),Ot.value===qe_AREA_1?(Ut=re,re=-ae,ae=Ut):Ot.value===qe_AREA_2?(re=-re,ae=-ae):Ot.value===qe_AREA_3&&(Ut=re,re=ae,ae=-Ut),2===this.face?(Ut=kt,kt=-re,re=Ut):3===this.face?(kt=-kt,re=-re):4===this.face&&(Ut=kt,kt=re,re=-Ut),h.phi=Math.acos(-ae)-u,h.lam=Math.atan2(re,kt),2===this.face?h.lam=pn(h.lam,-u):3===this.face?h.lam=pn(h.lam,-m):4===this.face&&(h.lam=pn(h.lam,+u))}return 0!==this.es&&(oe=h.phi<0?1:0,me=Math.tan(h.phi),Ce=this.b/Math.sqrt(me*me+this.one_minus_f_squared),h.phi=Math.atan(Math.sqrt(this.a*this.a-Ce*Ce)/(this.one_minus_f*Ce)),oe&&(h.phi=-h.phi)),h.lam+=this.long0,t.x=h.lam,t.y=h.phi,t},names:["Quadrilateralized Spherical Cube","Quadrilateralized_Spherical_Cube","qsc"]};var ws=[[1,22199e-21,-715515e-10,31103e-10],[.9986,-482243e-9,-24897e-9,-13309e-10],[.9954,-83103e-8,-448605e-10,-9.86701e-7],[.99,-.00135364,-59661e-9,36777e-10],[.9822,-.00167442,-449547e-11,-572411e-11],[.973,-.00214868,-903571e-10,1.8736e-8],[.96,-.00305085,-900761e-10,164917e-11],[.9427,-.00382792,-653386e-10,-26154e-10],[.9216,-.00467746,-10457e-8,481243e-11],[.8962,-.00536223,-323831e-10,-543432e-11],[.8679,-.00609363,-113898e-9,332484e-11],[.835,-.00698325,-640253e-10,9.34959e-7],[.7986,-.00755338,-500009e-10,9.35324e-7],[.7597,-.00798324,-35971e-9,-227626e-11],[.7186,-.00851367,-701149e-10,-86303e-10],[.6732,-.00986209,-199569e-9,191974e-10],[.6213,-.010418,883923e-10,624051e-11],[.5722,-.00906601,182e-6,624051e-11],[.5322,-.00677797,275608e-9,624051e-11]],Zn=[[-520417e-23,.0124,121431e-23,-845284e-16],[.062,.0124,-1.26793e-9,4.22642e-10],[.124,.0124,5.07171e-9,-1.60604e-9],[.186,.0123999,-1.90189e-8,6.00152e-9],[.248,.0124002,7.10039e-8,-2.24e-8],[.31,.0123992,-2.64997e-7,8.35986e-8],[.372,.0124029,9.88983e-7,-3.11994e-7],[.434,.0123893,-369093e-11,-4.35621e-7],[.4958,.0123198,-102252e-10,-3.45523e-7],[.5571,.0121916,-154081e-10,-5.82288e-7],[.6176,.0119938,-241424e-10,-5.25327e-7],[.6769,.011713,-320223e-10,-5.16405e-7],[.7346,.0113541,-397684e-10,-6.09052e-7],[.7903,.0109107,-489042e-10,-104739e-11],[.8435,.0103431,-64615e-9,-1.40374e-9],[.8936,.00969686,-64636e-9,-8547e-9],[.9394,.00840947,-192841e-9,-42106e-10],[.9761,.00616527,-256e-6,-42106e-10],[1,.00328947,-319159e-9,-42106e-10]],mr=_/5,lo=1/mr,Ds=function(t,h){return t[0]+h*(t[1]+h*(t[2]+h*t[3]))};const Bo={init:function ea(){this.x0=this.x0||0,this.y0=this.y0||0,this.long0=this.long0||0,this.es=0,this.title=this.title||"Robinson"},forward:function ho(t){var h=Bt(t.x-this.long0),p=Math.abs(t.y),B=Math.floor(p*mr);B<0?B=0:B>=18&&(B=17);var j={x:Ds(ws[B],p=_*(p-lo*B))*h,y:Ds(Zn[B],p)};return t.y<0&&(j.y=-j.y),j.x=j.x*this.a*.8487+this.x0,j.y=j.y*this.a*1.3523+this.y0,j},inverse:function ia(t){var h={x:(t.x-this.x0)/(.8487*this.a),y:Math.abs(t.y-this.y0)/(1.3523*this.a)};if(h.y>=1)h.x/=ws[18][0],h.y=t.y<0?-u:u;else{var p=Math.floor(18*h.y);for(p<0?p=0:p>=18&&(p=17);;)if(Zn[p][0]>h.y)--p;else{if(!(Zn[p+1][0]<=h.y))break;++p}var B=Zn[p],j=5*(h.y-B[0])/(Zn[p+1][0]-B[0]);j=function Uo(t,h,p,B){for(var j=h;B;--B){var X=t(j);if(j-=X,Math.abs(X)<p)break}return j}(function(X){return(Ds(B,X)-h.y)/function(t,h){return t[1]+h*(2*t[2]+3*h*t[3])}(B,X)},j,e,100),h.x/=Ds(ws[p],j),h.y=(5*p+j)*l,t.y<0&&(h.y=-h.y)}return h.x=Bt(h.x+this.long0),h},names:["Robinson","robin"]},s={init:function Wo(){this.name="geocent"},forward:function uo(t){return Xe(t,this.es,this.a)},inverse:function Go(t){return ni(t,this.es,this.a,this.b)},names:["Geocentric","geocentric","geocent","Geocent"]};var o={h:{def:1e5,num:!0},azi:{def:0,num:!0,degrees:!0},tilt:{def:0,num:!0,degrees:!0},long0:{def:0,num:!0},lat0:{def:0,num:!0}};const Tt={init:function T(){if(Object.keys(o).forEach(function(p){if(typeof this[p]>"u")this[p]=o[p].def;else{if(o[p].num&&isNaN(this[p]))throw new Error("Invalid parameter value, must be numeric "+p+" = "+this[p]);o[p].num&&(this[p]=parseFloat(this[p]))}o[p].degrees&&(this[p]=this[p]*l)}.bind(this)),Math.abs(Math.abs(this.lat0)-u)<e?this.mode=this.lat0<0?1:0:Math.abs(this.lat0)<e?this.mode=2:(this.mode=3,this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0)),this.pn1=this.h/this.a,this.pn1<=0||this.pn1>1e10)throw new Error("Invalid height");this.p=1+this.pn1,this.rp=1/this.p,this.h1=1/this.pn1,this.pfact=(this.p+1)*this.h1,this.es=0;var t=this.tilt,h=this.azi;this.cg=Math.cos(h),this.sg=Math.sin(h),this.cw=Math.cos(t),this.sw=Math.sin(t)},forward:function U(t){t.x-=this.long0;var j,X,tt,Q,h=Math.sin(t.y),p=Math.cos(t.y),B=Math.cos(t.x);switch(this.mode){case 3:X=this.sinph0*h+this.cosph0*p*B;break;case 2:X=p*B;break;case 1:X=-h;break;case 0:X=h}switch(j=(X=this.pn1/(this.p-X))*p*Math.sin(t.x),this.mode){case 3:X*=this.cosph0*h-this.sinph0*p*B;break;case 2:X*=h;break;case 0:X*=-p*B;break;case 1:X*=p*B}return j=(j*this.cg-X*this.sg)*this.cw*(Q=1/((tt=X*this.cg+j*this.sg)*this.sw*this.h1+this.cw)),X=tt*Q,t.x=j*this.a,t.y=X*this.a,t},inverse:function H(t){t.x/=this.a,t.y/=this.a;var p,B,j,h={x:t.x,y:t.y};t.x=(p=this.pn1*t.x*(j=1/(this.pn1-t.y*this.sw)))*this.cg+(B=this.pn1*t.y*this.cw*j)*this.sg,t.y=B*this.cg-p*this.sg;var X=Oi(t.x,t.y);if(Math.abs(X)<e)h.x=0,h.y=t.y;else{var tt,Q;switch(Q=1-X*X*this.pfact,Q=(this.p-Math.sqrt(Q))/(this.pn1/X+X/this.pn1),tt=Math.sqrt(1-Q*Q),this.mode){case 3:h.y=Math.asin(tt*this.sinph0+t.y*Q*this.cosph0/X),t.y=(tt-this.sinph0*Math.sin(h.y))*X,t.x*=Q*this.cosph0;break;case 2:h.y=Math.asin(t.y*Q/X),t.y=tt*X,t.x*=Q;break;case 0:h.y=Math.asin(tt),t.y=-t.y;break;case 1:h.y=-Math.asin(tt)}h.x=Math.atan2(t.x,t.y)}return t.x=h.x+this.long0,t.y=h.y,t},names:["Tilted_Perspective","tpers"]},le={init:function Lt(){if(this.flip_axis="x"===this.sweep?1:0,this.h=Number(this.h),this.radius_g_1=this.h/this.a,this.radius_g_1<=0||this.radius_g_1>1e10)throw new Error;if(this.radius_g=1+this.radius_g_1,this.C=this.radius_g*this.radius_g-1,0!==this.es){var t=1-this.es,h=1/t;this.radius_p=Math.sqrt(t),this.radius_p2=t,this.radius_p_inv2=h,this.shape="ellipse"}else this.radius_p=1,this.radius_p2=1,this.radius_p_inv2=1,this.shape="sphere";this.title||(this.title="Geostationary Satellite View")},forward:function Dt(t){var B,j,X,tt,h=t.x,p=t.y;if(h-=this.long0,"ellipse"===this.shape){p=Math.atan(this.radius_p2*Math.tan(p));var Q=this.radius_p/Oi(this.radius_p*Math.cos(p),Math.sin(p));if(j=Q*Math.cos(h)*Math.cos(p),X=Q*Math.sin(h)*Math.cos(p),tt=Q*Math.sin(p),(this.radius_g-j)*j-X*X-tt*tt*this.radius_p_inv2<0)return t.x=Number.NaN,t.y=Number.NaN,t;B=this.radius_g-j,this.flip_axis?(t.x=this.radius_g_1*Math.atan(X/Oi(tt,B)),t.y=this.radius_g_1*Math.atan(tt/B)):(t.x=this.radius_g_1*Math.atan(X/B),t.y=this.radius_g_1*Math.atan(tt/Oi(X,B)))}else"sphere"===this.shape&&(B=Math.cos(p),j=Math.cos(h)*B,X=Math.sin(h)*B,tt=Math.sin(p),B=this.radius_g-j,this.flip_axis?(t.x=this.radius_g_1*Math.atan(X/Oi(tt,B)),t.y=this.radius_g_1*Math.atan(tt/B)):(t.x=this.radius_g_1*Math.atan(X/B),t.y=this.radius_g_1*Math.atan(tt/Oi(X,B))));return t.x=t.x*this.a,t.y=t.y*this.a,t},inverse:function Zt(t){var j,X,tt,Q,h=-1,p=0,B=0;if(t.x=t.x/this.a,t.y=t.y/this.a,"ellipse"===this.shape){this.flip_axis?(B=Math.tan(t.y/this.radius_g_1),p=Math.tan(t.x/this.radius_g_1)*Oi(1,B)):(p=Math.tan(t.x/this.radius_g_1),B=Math.tan(t.y/this.radius_g_1)*Oi(1,p));var ct=B/this.radius_p;if((tt=(X=2*this.radius_g*h)*X-4*(j=p*p+ct*ct+h*h)*this.C)<0)return t.x=Number.NaN,t.y=Number.NaN,t;Q=(-X-Math.sqrt(tt))/(2*j),h=this.radius_g+Q*h,p*=Q,B*=Q,t.x=Math.atan2(p,h),t.y=Math.atan(B*Math.cos(t.x)/h),t.y=Math.atan(this.radius_p_inv2*Math.tan(t.y))}else if("sphere"===this.shape){if(this.flip_axis?(B=Math.tan(t.y/this.radius_g_1),p=Math.tan(t.x/this.radius_g_1)*Math.sqrt(1+B*B)):(p=Math.tan(t.x/this.radius_g_1),B=Math.tan(t.y/this.radius_g_1)*Math.sqrt(1+p*p)),(tt=(X=2*this.radius_g*h)*X-4*(j=p*p+B*B+h*h)*this.C)<0)return t.x=Number.NaN,t.y=Number.NaN,t;Q=(-X-Math.sqrt(tt))/(2*j),h=this.radius_g+Q*h,p*=Q,B*=Q,t.x=Math.atan2(p,h),t.y=Math.atan(B*Math.cos(t.x)/h)}return t.x=t.x+this.long0,t},names:["Geostationary Satellite View","Geostationary_Satellite","geos"]};Ri.defaultDatum="WGS84",Ri.Proj=Fe,Ri.WGS84=new Ri.Proj("WGS84"),Ri.Point=Rn,Ri.toPoint=_i,Ri.defs=_e,Ri.nadgrid=function Qe(t,h){var p=new DataView(h),B=function _t(t){var h=t.getInt32(8,!1);return 11!==h&&(11!==(h=t.getInt32(8,!0))&&console.warn("Failed to detect nadgrid endian-ness, defaulting to little-endian"),!0)}(p),j=function pt(t,h){return{nFields:t.getInt32(8,h),nSubgridFields:t.getInt32(24,h),nSubgrids:t.getInt32(40,h),shiftType:It(t,56,64).trim(),fromSemiMajorAxis:t.getFloat64(120,h),fromSemiMinorAxis:t.getFloat64(136,h),toSemiMajorAxis:t.getFloat64(152,h),toSemiMinorAxis:t.getFloat64(168,h)}}(p,B),X=function Jt(t,h,p){for(var B=176,j=[],X=0;X<h.nSubgrids;X++){var tt=ye(t,B,p),Q=Pe(t,B,tt,p),ct=Math.round(1+(tt.upperLongitude-tt.lowerLongitude)/tt.longitudeInterval),xt=Math.round(1+(tt.upperLatitude-tt.lowerLatitude)/tt.latitudeInterval);j.push({ll:[J(tt.lowerLongitude),J(tt.lowerLatitude)],del:[J(tt.longitudeInterval),J(tt.latitudeInterval)],lim:[ct,xt],count:tt.gridNodeCount,cvs:ie(Q)}),B+=176+16*tt.gridNodeCount}return j}(p,j,B),tt={header:j,subgrids:X};return si[t]=tt,tt},Ri.transform=ai,Ri.mgrs=Gs,Ri.version="__VERSION__",function fe(t){t.Proj.projections.add(nn),t.Proj.projections.add(Qt),t.Proj.projections.add(Ue),t.Proj.projections.add(zi),t.Proj.projections.add(Ps),t.Proj.projections.add(pa),t.Proj.projections.add(Ma),t.Proj.projections.add(Ca),t.Proj.projections.add(Ra),t.Proj.projections.add(is),t.Proj.projections.add(wr),t.Proj.projections.add(Ua),t.Proj.projections.add(Zr),t.Proj.projections.add(Ss),t.Proj.projections.add(nr),t.Proj.projections.add(Nn),t.Proj.projections.add(Ka),t.Proj.projections.add(mn),t.Proj.projections.add(Ya),t.Proj.projections.add($a),t.Proj.projections.add(De),t.Proj.projections.add(rn),t.Proj.projections.add(io),t.Proj.projections.add(an),t.Proj.projections.add(oo),t.Proj.projections.add(Bo),t.Proj.projections.add(s),t.Proj.projections.add(Tt),t.Proj.projections.add(le)}(Ri);const we=Ri},5604:function(jt){jt.exports=function(){"use strict";function ht(e,l,_,n,g){!function m(y,I,O,E,R){for(;E>O;){if(E-O>600){var N=E-O+1,z=I-O+1,st=Math.log(N),A=.5*Math.exp(2*st/3),L=.5*Math.sqrt(st*A*(N-A)/N)*(z-N/2<0?-1:1);m(y,I,Math.max(O,Math.floor(I-z*A/N+L)),Math.min(E,Math.floor(I+(N-z)*A/N+L)),R)}var C=y[I],D=O,Y=E;for(a(y,O,I),R(y[E],C)>0&&a(y,O,E);D<Y;){for(a(y,D,Y),D++,Y--;R(y[D],C)<0;)D++;for(;R(y[Y],C)>0;)Y--}0===R(y[O],C)?a(y,O,Y):a(y,++Y,E),Y<=I&&(O=Y+1),I<=Y&&(E=Y-1)}}(e,l,_||0,n||e.length-1,g||W)}function a(e,l,_){var n=e[l];e[l]=e[_],e[_]=n}function W(e,l){return e<l?-1:e>l?1:0}var F=function(e){void 0===e&&(e=9),this._maxEntries=Math.max(4,e),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function k(e,l,_){if(!_)return l.indexOf(e);for(var n=0;n<l.length;n++)if(_(e,l[n]))return n;return-1}function G(e,l){Z(e,0,e.children.length,l,e)}function Z(e,l,_,n,g){g||(g=r(null)),g.minX=1/0,g.minY=1/0,g.maxX=-1/0,g.maxY=-1/0;for(var m=l;m<_;m++){var y=e.children[m];b(g,e.leaf?n(y):y)}return g}function b(e,l){return e.minX=Math.min(e.minX,l.minX),e.minY=Math.min(e.minY,l.minY),e.maxX=Math.max(e.maxX,l.maxX),e.maxY=Math.max(e.maxY,l.maxY),e}function S(e,l){return e.minX-l.minX}function P(e,l){return e.minY-l.minY}function v(e){return(e.maxX-e.minX)*(e.maxY-e.minY)}function f(e){return e.maxX-e.minX+(e.maxY-e.minY)}function u(e,l){return e.minX<=l.minX&&e.minY<=l.minY&&l.maxX<=e.maxX&&l.maxY<=e.maxY}function c(e,l){return l.minX<=e.maxX&&l.minY<=e.maxY&&l.maxX>=e.minX&&l.maxY>=e.minY}function r(e){return{children:e,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function d(e,l,_,n,g){for(var m=[l,_];m.length;)if(!((_=m.pop())-(l=m.pop())<=n)){var y=l+Math.ceil((_-l)/n/2)*n;ht(e,y,l,_,g),m.push(l,y,y,_)}}return F.prototype.all=function(){return this._all(this.data,[])},F.prototype.search=function(e){var l=this.data,_=[];if(!c(e,l))return _;for(var n=this.toBBox,g=[];l;){for(var m=0;m<l.children.length;m++){var y=l.children[m],I=l.leaf?n(y):y;c(e,I)&&(l.leaf?_.push(y):u(e,I)?this._all(y,_):g.push(y))}l=g.pop()}return _},F.prototype.collides=function(e){var l=this.data;if(!c(e,l))return!1;for(var _=[];l;){for(var n=0;n<l.children.length;n++){var g=l.children[n],m=l.leaf?this.toBBox(g):g;if(c(e,m)){if(l.leaf||u(e,m))return!0;_.push(g)}}l=_.pop()}return!1},F.prototype.load=function(e){if(!e||!e.length)return this;if(e.length<this._minEntries){for(var l=0;l<e.length;l++)this.insert(e[l]);return this}var _=this._build(e.slice(),0,e.length-1,0);if(this.data.children.length)if(this.data.height===_.height)this._splitRoot(this.data,_);else{if(this.data.height<_.height){var n=this.data;this.data=_,_=n}this._insert(_,this.data.height-_.height-1,!0)}else this.data=_;return this},F.prototype.insert=function(e){return e&&this._insert(e,this.data.height-1),this},F.prototype.clear=function(){return this.data=r([]),this},F.prototype.remove=function(e,l){if(!e)return this;for(var _,n,g,m=this.data,y=this.toBBox(e),I=[],O=[];m||I.length;){if(m||(m=I.pop(),n=I[I.length-1],_=O.pop(),g=!0),m.leaf){var E=k(e,m.children,l);if(-1!==E)return m.children.splice(E,1),I.push(m),this._condense(I),this}g||m.leaf||!u(m,y)?n?(_++,m=n.children[_],g=!1):m=null:(I.push(m),O.push(_),_=0,n=m,m=m.children[0])}return this},F.prototype.toBBox=function(e){return e},F.prototype.compareMinX=function(e,l){return e.minX-l.minX},F.prototype.compareMinY=function(e,l){return e.minY-l.minY},F.prototype.toJSON=function(){return this.data},F.prototype.fromJSON=function(e){return this.data=e,this},F.prototype._all=function(e,l){for(var _=[];e;)e.leaf?l.push.apply(l,e.children):_.push.apply(_,e.children),e=_.pop();return l},F.prototype._build=function(e,l,_,n){var g,m=_-l+1,y=this._maxEntries;if(m<=y)return G(g=r(e.slice(l,_+1)),this.toBBox),g;n||(n=Math.ceil(Math.log(m)/Math.log(y)),y=Math.ceil(m/Math.pow(y,n-1))),(g=r([])).leaf=!1,g.height=n;var I=Math.ceil(m/y),O=I*Math.ceil(Math.sqrt(y));d(e,l,_,O,this.compareMinX);for(var E=l;E<=_;E+=O){var R=Math.min(E+O-1,_);d(e,E,R,I,this.compareMinY);for(var N=E;N<=R;N+=I){var z=Math.min(N+I-1,R);g.children.push(this._build(e,N,z,n-1))}}return G(g,this.toBBox),g},F.prototype._chooseSubtree=function(e,l,_,n){for(;n.push(l),!l.leaf&&n.length-1!==_;){for(var g=1/0,m=1/0,y=void 0,I=0;I<l.children.length;I++){var O=l.children[I],E=v(O),R=(N=e,z=O,(Math.max(z.maxX,N.maxX)-Math.min(z.minX,N.minX))*(Math.max(z.maxY,N.maxY)-Math.min(z.minY,N.minY))-E);R<m?(m=R,g=E<g?E:g,y=O):R===m&&E<g&&(g=E,y=O)}l=y||l.children[0]}var N,z;return l},F.prototype._insert=function(e,l,_){var n=_?e:this.toBBox(e),g=[],m=this._chooseSubtree(n,this.data,l,g);for(m.children.push(e),b(m,n);l>=0&&g[l].children.length>this._maxEntries;)this._split(g,l),l--;this._adjustParentBBoxes(n,g,l)},F.prototype._split=function(e,l){var _=e[l],n=_.children.length,g=this._minEntries;this._chooseSplitAxis(_,g,n);var m=this._chooseSplitIndex(_,g,n),y=r(_.children.splice(m,_.children.length-m));y.height=_.height,y.leaf=_.leaf,G(_,this.toBBox),G(y,this.toBBox),l?e[l-1].children.push(y):this._splitRoot(_,y)},F.prototype._splitRoot=function(e,l){this.data=r([e,l]),this.data.height=e.height+1,this.data.leaf=!1,G(this.data,this.toBBox)},F.prototype._chooseSplitIndex=function(e,l,_){for(var n,g,m,y,I,O,E,R=1/0,N=1/0,z=l;z<=_-l;z++){var st=Z(e,0,z,this.toBBox),A=Z(e,z,_,this.toBBox),L=(g=st,m=A,void 0,void 0,void 0,void 0,y=Math.max(g.minX,m.minX),I=Math.max(g.minY,m.minY),O=Math.min(g.maxX,m.maxX),E=Math.min(g.maxY,m.maxY),Math.max(0,O-y)*Math.max(0,E-I)),w=v(st)+v(A);L<R?(R=L,n=z,N=w<N?w:N):L===R&&w<N&&(N=w,n=z)}return n||_-l},F.prototype._chooseSplitAxis=function(e,l,_){var n=e.leaf?this.compareMinX:S,g=e.leaf?this.compareMinY:P;this._allDistMargin(e,l,_,n)<this._allDistMargin(e,l,_,g)&&e.children.sort(n)},F.prototype._allDistMargin=function(e,l,_,n){e.children.sort(n);for(var g=this.toBBox,m=Z(e,0,l,g),y=Z(e,_-l,_,g),I=f(m)+f(y),O=l;O<_-l;O++){var E=e.children[O];b(m,e.leaf?g(E):E),I+=f(m)}for(var R=_-l-1;R>=l;R--){var N=e.children[R];b(y,e.leaf?g(N):N),I+=f(y)}return I},F.prototype._adjustParentBBoxes=function(e,l,_){for(var n=_;n>=0;n--)b(l[n],e)},F.prototype._condense=function(e){for(var l=e.length-1,_=void 0;l>=0;l--)0===e[l].children.length?l>0?(_=e[l-1].children).splice(_.indexOf(e[l]),1):this.clear():G(e[l],this.toBBox)},F}()},4776:(jt,ht,a)=>{"use strict";a.d(ht,{T:()=>F});var W=a(5333);function F(k){return(0,W.h)((G,Z)=>k<=Z)}},4149:(jt,ht,a)=>{"use strict";a.d(ht,{j:()=>ve});var W=a(5118),F=a(4776),k=a(9265),G=a(3089),Z=a(5209),b=a(1590),S=a(9854),P=a(2421),v=a(4118),f=a(7021),u=a(9219);const c="units",r=[1,2,5],d=25.4/.28,l=class e extends P.Z{constructor(Mt){Mt=Mt||{};const rt=document.createElement("div");rt.style.pointerEvents="none",super({element:rt,render:Mt.render,target:Mt.target});const q=void 0!==Mt.className?Mt.className:Mt.bar?"ol-scale-bar":"ol-scale-line";this.innerElement_=document.createElement("div"),this.innerElement_.className=q+"-inner",this.element.className=q+" "+v.XV,this.element.appendChild(this.innerElement_),this.viewState_=null,this.minWidth_=void 0!==Mt.minWidth?Mt.minWidth:64,this.maxWidth_=Mt.maxWidth,this.renderedVisible_=!1,this.renderedWidth_=void 0,this.renderedHTML_="",this.addChangeListener(c,this.handleUnitsChanged_),this.setUnits(Mt.units||"metric"),this.scaleBar_=Mt.bar||!1,this.scaleBarSteps_=Mt.steps||4,this.scaleBarText_=Mt.text||!1,this.dpi_=Mt.dpi||void 0}getUnits(){return this.get(c)}handleUnitsChanged_(){this.updateElement_()}setUnits(Mt){this.set(c,Mt)}setDpi(Mt){this.dpi_=Mt}updateElement_(){const Mt=this.viewState_;if(!Mt)return void(this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1));const rt=Mt.center,q=Mt.projection,M=this.getUnits();let et=(0,f._Q)(q,Mt.resolution,rt,"degrees"==M?"degrees":"m");const it=this.minWidth_*(this.dpi_||d)/d,yt=void 0!==this.maxWidth_?this.maxWidth_*(this.dpi_||d)/d:void 0;let Et=it*et,At="";if("degrees"==M){const Ze=f.Wm.degrees;Et*=Ze,Et<Ze/60?(At="\u2033",et*=3600):Et<Ze?(At="\u2032",et*=60):At="\xb0"}else"imperial"==M?Et<.9144?(At="in",et/=.0254):Et<1609.344?(At="ft",et/=.3048):(At="mi",et/=1609.344):"nautical"==M?(et/=1852,At="NM"):"metric"==M?Et<.001?(At="\u03bcm",et*=1e6):Et<1?(At="mm",et*=1e3):Et<1e3?At="m":(At="km",et/=1e3):"us"==M?Et<.9144?(At="in",et*=39.37):Et<1609.344?(At="ft",et/=.30480061):(At="mi",et/=1609.3472):(0,u.h)(!1,33);let Ht,se,Te,ce,ee,We,Wt=3*Math.floor(Math.log(it*et)/Math.log(10));for(;;){Te=Math.floor(Wt/3);const Ze=Math.pow(10,Te);if(Ht=r[(Wt%3+3)%3]*Ze,se=Math.round(Ht/et),isNaN(se))return this.element.style.display="none",void(this.renderedVisible_=!1);if(void 0!==yt&&se>=yt){Ht=ce,se=ee,Te=We;break}if(se>=it)break;ce=Ht,ee=se,We=Te,++Wt}const Ge=this.scaleBar_?this.createScaleBar(se,Ht,At):Ht.toFixed(Te<0?-Te:0)+" "+At;this.renderedHTML_!=Ge&&(this.innerElement_.innerHTML=Ge,this.renderedHTML_=Ge),this.renderedWidth_!=se&&(this.innerElement_.style.width=se+"px",this.renderedWidth_=se),this.renderedVisible_||(this.element.style.display="",this.renderedVisible_=!0)}createScaleBar(Mt,rt,q){const M=this.getScaleForResolution(),K=M<1?Math.round(1/M).toLocaleString()+" : 1":"1 : "+Math.round(M).toLocaleString(),et=this.scaleBarSteps_,it=Mt/et,yt=[this.createMarker("absolute")];for(let At=0;At<et;++At)yt.push(`<div><div class="ol-scale-singlebar ${At%2==0?"ol-scale-singlebar-odd":"ol-scale-singlebar-even"}" style="width: ${it}px;"></div>`+this.createMarker("relative")+(At%2==0||2===et?this.createStepText(At,Mt,!1,rt,q):"")+"</div>");return yt.push(this.createStepText(et,Mt,!0,rt,q)),(this.scaleBarText_?`<div class="ol-scale-text" style="width: ${Mt}px;">`+K+"</div>":"")+yt.join("")}createMarker(Mt){return`<div class="ol-scale-step-marker" style="position: ${Mt}; top: ${"absolute"===Mt?3:-10}px;"></div>`}createStepText(Mt,rt,q,M,K){const it=(0===Mt?0:Math.round(M/this.scaleBarSteps_*Mt*100)/100)+(0===Mt?"":" "+K);return`<div class="ol-scale-step-text" style="margin-left: ${0===Mt?-3:rt/this.scaleBarSteps_*-1}px;text-align: ${0===Mt?"left":"center"};min-width: ${0===Mt?0:rt/this.scaleBarSteps_*2}px;left: ${q?rt+"px":"unset"};">`+it+"</div>"}getScaleForResolution(){return(0,f._Q)(this.viewState_.projection,this.viewState_.resolution,this.viewState_.center,"m")*(1e3/25.4)*(this.dpi_||d)}render(Mt){const rt=Mt.frameState;this.viewState_=rt?rt.viewState:null,this.updateElement_()}};var _=a(8284),n=a(4256),g=a(7847),m=a(1242);const y="projection",I="coordinateFormat",E=class O extends P.Z{constructor(Mt){Mt=Mt||{};const rt=document.createElement("div");rt.className=void 0!==Mt.className?Mt.className:"ol-mouse-position",super({element:rt,render:Mt.render,target:Mt.target}),this.addChangeListener(y,this.handleProjectionChanged_),Mt.coordinateFormat&&this.setCoordinateFormat(Mt.coordinateFormat),Mt.projection&&this.setProjection(Mt.projection),this.renderOnMouseOut_=void 0!==Mt.placeholder,this.placeholder_=this.renderOnMouseOut_?Mt.placeholder:"&#160;",this.renderedHTML_=rt.innerHTML,this.mapProjection_=null,this.transform_=null,this.wrapX_=!1!==Mt.wrapX}handleProjectionChanged_(){this.transform_=null}getCoordinateFormat(){return this.get(I)}getProjection(){return this.get(y)}handleMouseMove(Mt){const rt=this.getMap();this.updateHTML_(rt.getEventPixel(Mt))}handleMouseOut(Mt){this.updateHTML_(null)}setMap(Mt){if(super.setMap(Mt),Mt){const rt=Mt.getViewport();this.listenerKeys.push((0,g.oL)(rt,n.Z.POINTERMOVE,this.handleMouseMove,this)),this.renderOnMouseOut_&&this.listenerKeys.push((0,g.oL)(rt,n.Z.POINTEROUT,this.handleMouseOut,this)),this.updateHTML_(null)}}setCoordinateFormat(Mt){this.set(I,Mt)}setProjection(Mt){this.set(y,(0,f.U2)(Mt))}updateHTML_(Mt){let rt=this.placeholder_;if(Mt&&this.mapProjection_){if(!this.transform_){const K=this.getProjection();this.transform_=K?(0,f.WO)(this.mapProjection_,K):f.gD}const M=this.getMap().getCoordinateFromPixelInternal(Mt);if(M){const K=(0,f.Cs)();if(K&&(this.transform_=(0,f.WO)(this.mapProjection_,K)),this.transform_(M,M),this.wrapX_){const it=K||this.getProjection()||this.mapProjection_;(0,m.Cf)(M,it)}const et=this.getCoordinateFormat();rt=et?et(M):M.toString()}}(!this.renderedHTML_||rt!==this.renderedHTML_)&&(this.element.innerHTML=rt,this.renderedHTML_=rt)}render(Mt){const rt=Mt.frameState;rt?this.mapProjection_!=rt.viewState.projection&&(this.mapProjection_=rt.viewState.projection,this.transform_=null):this.mapProjection_=null}};var R=a(2431),N=a(8963),z=a(4211);const st=["fullscreenchange","webkitfullscreenchange","MSFullscreenChange"];function w(Ee){const Mt=Ee.body;return!!(Mt.webkitRequestFullscreen||Mt.requestFullscreen&&Ee.fullscreenEnabled)}function x(Ee){return!(!Ee.webkitIsFullScreen&&!Ee.fullscreenElement)}function C(Ee){Ee.requestFullscreen?Ee.requestFullscreen():Ee.webkitRequestFullscreen&&Ee.webkitRequestFullscreen()}const nt=class L extends P.Z{constructor(Mt){Mt=Mt||{},super({element:document.createElement("div"),target:Mt.target}),this.keys_=void 0!==Mt.keys&&Mt.keys,this.source_=Mt.source,this.isInFullscreen_=!1,this.boundHandleMapTargetChange_=this.handleMapTargetChange_.bind(this),this.cssClassName_=void 0!==Mt.className?Mt.className:"ol-full-screen",this.documentListeners_=[],this.activeClassName_=void 0!==Mt.activeClassName?Mt.activeClassName.split(" "):[this.cssClassName_+"-true"],this.inactiveClassName_=void 0!==Mt.inactiveClassName?Mt.inactiveClassName.split(" "):[this.cssClassName_+"-false"];const rt=void 0!==Mt.label?Mt.label:"\u2922";this.labelNode_="string"==typeof rt?document.createTextNode(rt):rt;const q=void 0!==Mt.labelActive?Mt.labelActive:"\xd7";this.labelActiveNode_="string"==typeof q?document.createTextNode(q):q;const M=Mt.tipLabel?Mt.tipLabel:"Toggle full-screen";this.button_=document.createElement("button"),this.button_.title=M,this.button_.setAttribute("type","button"),this.button_.appendChild(this.labelNode_),this.button_.addEventListener(R.Z.CLICK,this.handleClick_.bind(this),!1),this.setClassName_(this.button_,this.isInFullscreen_),this.element.className=`${this.cssClassName_} ${v.XV} ${v.hg}`,this.element.appendChild(this.button_)}handleClick_(Mt){Mt.preventDefault(),this.handleFullScreen_()}handleFullScreen_(){const Mt=this.getMap();if(!Mt)return;const rt=Mt.getOwnerDocument();if(w(rt))if(x(rt))!function Y(Ee){Ee.exitFullscreen?Ee.exitFullscreen():Ee.webkitExitFullscreen&&Ee.webkitExitFullscreen()}(rt);else{let q;q=this.source_?"string"==typeof this.source_?rt.getElementById(this.source_):this.source_:Mt.getTargetElement(),this.keys_?function D(Ee){Ee.webkitRequestFullscreen?Ee.webkitRequestFullscreen():C(Ee)}(q):C(q)}}handleFullScreenChange_(){const Mt=this.getMap();if(!Mt)return;const rt=this.isInFullscreen_;this.isInFullscreen_=x(Mt.getOwnerDocument()),rt!==this.isInFullscreen_&&(this.setClassName_(this.button_,this.isInFullscreen_),this.isInFullscreen_?((0,z.$H)(this.labelActiveNode_,this.labelNode_),this.dispatchEvent("enterfullscreen")):((0,z.$H)(this.labelNode_,this.labelActiveNode_),this.dispatchEvent("leavefullscreen")),Mt.updateSize())}setClassName_(Mt,rt){rt?(Mt.classList.remove(...this.inactiveClassName_),Mt.classList.add(...this.activeClassName_)):(Mt.classList.remove(...this.activeClassName_),Mt.classList.add(...this.inactiveClassName_))}setMap(Mt){const rt=this.getMap();rt&&rt.removeChangeListener(N.Z.TARGET,this.boundHandleMapTargetChange_),super.setMap(Mt),this.handleMapTargetChange_(),Mt&&Mt.addChangeListener(N.Z.TARGET,this.boundHandleMapTargetChange_)}handleMapTargetChange_(){const Mt=this.documentListeners_;for(let q=0,M=Mt.length;q<M;++q)(0,g.bN)(Mt[q]);Mt.length=0;const rt=this.getMap();if(rt){const q=rt.getOwnerDocument();w(q)?this.element.classList.remove(v.Qi):this.element.classList.add(v.Qi);for(let M=0,K=st.length;M<K;++M)Mt.push((0,g.oL)(q,st[M],this.handleFullScreenChange_,this));this.handleFullScreenChange_()}}};var V=a(6108),at=a(4792),ut=a(5465),Ct=a(1858),vt=a(5681),St=a(6715),bt=a(1409),Gt=a(1316),Xt=a(3435);const he=class _e extends P.Z{constructor(Mt){Mt=Mt||{},super({element:document.createElement("div"),render:Mt.render,target:Mt.target}),this.boundHandleRotationChanged_=this.handleRotationChanged_.bind(this),this.collapsed_=void 0===Mt.collapsed||Mt.collapsed,this.collapsible_=void 0===Mt.collapsible||Mt.collapsible,this.collapsible_||(this.collapsed_=!1),this.rotateWithView_=void 0!==Mt.rotateWithView&&Mt.rotateWithView,this.viewExtent_=void 0;const rt=void 0!==Mt.className?Mt.className:"ol-overviewmap",q=void 0!==Mt.tipLabel?Mt.tipLabel:"Overview map",M=void 0!==Mt.collapseLabel?Mt.collapseLabel:"\u2039";"string"==typeof M?(this.collapseLabel_=document.createElement("span"),this.collapseLabel_.textContent=M):this.collapseLabel_=M;const K=void 0!==Mt.label?Mt.label:"\u203a";"string"==typeof K?(this.label_=document.createElement("span"),this.label_.textContent=K):this.label_=K;const et=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_,it=document.createElement("button");it.setAttribute("type","button"),it.title=q,it.appendChild(et),it.addEventListener(R.Z.CLICK,this.handleClick_.bind(this),!1),this.ovmapDiv_=document.createElement("div"),this.ovmapDiv_.className="ol-overviewmap-map",this.view_=Mt.view;const yt=new at.Z({view:Mt.view,controls:new V.Z,interactions:new V.Z});this.ovmap_=yt,Mt.layers&&Mt.layers.forEach(function(Ge){yt.addLayer(Ge)});const Et=document.createElement("div");Et.className="ol-overviewmap-box",Et.style.boxSizing="border-box",this.boxOverlay_=new vt.Z({position:[0,0],positioning:"center-center",element:Et}),this.ovmap_.addOverlay(this.boxOverlay_);const Wt=this.element;Wt.className=rt+" "+v.XV+" "+v.hg+(this.collapsed_&&this.collapsible_?" "+v.hN:"")+(this.collapsible_?"":" ol-uncollapsible"),Wt.appendChild(this.ovmapDiv_),Wt.appendChild(it);const Ht=this,se=this.boxOverlay_,Te=this.boxOverlay_.getElement(),ee=function(Ge){const Ze=function(Ge){return{clientX:Ge.clientX,clientY:Ge.clientY}}(Ge),ke=yt.getEventCoordinateInternal(Ze);se.setPosition(ke)},We=function(Ge){const Ze=yt.getEventCoordinateInternal(Ge);Ht.getMap().getView().setCenterInternal(Ze),window.removeEventListener("mousemove",ee),window.removeEventListener("mouseup",We)};Te.addEventListener("mousedown",function(){window.addEventListener("mousemove",ee),window.addEventListener("mouseup",We)})}setMap(Mt){const rt=this.getMap();if(Mt!==rt){if(rt){const q=rt.getView();q&&this.unbindView_(q),this.ovmap_.setTarget(null)}if(super.setMap(Mt),Mt){this.ovmap_.setTarget(this.ovmapDiv_),this.listenerKeys.push((0,g.oL)(Mt,Ct.Z.PROPERTYCHANGE,this.handleMapPropertyChange_,this));const q=Mt.getView();q&&(this.bindView_(q),q.isDef()&&(this.ovmap_.updateSize(),this.resetExtent_())),this.ovmap_.isRendered()||this.updateBoxAfterOvmapIsRendered_()}}}handleMapPropertyChange_(Mt){if(Mt.key===N.Z.VIEW){const rt=Mt.oldValue;rt&&this.unbindView_(rt);const q=this.getMap().getView();this.bindView_(q)}else!this.ovmap_.isRendered()&&(Mt.key===N.Z.TARGET||Mt.key===N.Z.SIZE)&&this.ovmap_.updateSize()}bindView_(Mt){if(!this.view_){const rt=new St.ZP({projection:Mt.getProjection()});this.ovmap_.setView(rt)}Mt.addChangeListener(bt.Z.ROTATION,this.boundHandleRotationChanged_),this.handleRotationChanged_()}unbindView_(Mt){Mt.removeChangeListener(bt.Z.ROTATION,this.boundHandleRotationChanged_)}handleRotationChanged_(){this.rotateWithView_&&this.ovmap_.getView().setRotation(this.getMap().getView().getRotation())}validateExtent_(){const Mt=this.getMap(),rt=this.ovmap_;if(!Mt.isRendered()||!rt.isRendered())return;const q=Mt.getSize(),K=Mt.getView().calculateExtentInternal(q);if(this.viewExtent_&&(0,Gt.fS)(K,this.viewExtent_))return;this.viewExtent_=K;const et=rt.getSize(),yt=rt.getView().calculateExtentInternal(et),Et=rt.getPixelFromCoordinateInternal((0,Gt.rL)(K)),At=rt.getPixelFromCoordinateInternal((0,Gt.w$)(K)),Wt=Math.abs(Et[0]-At[0]),Ht=Math.abs(Et[1]-At[1]),se=et[0],Te=et[1];Wt<.1*se||Ht<.1*Te||Wt>.75*se||Ht>.75*Te?this.resetExtent_():(0,Gt.r4)(yt,K)||this.recenter_()}resetExtent_(){const Mt=this.getMap(),rt=this.ovmap_,q=Mt.getSize(),K=Mt.getView().calculateExtentInternal(q),et=rt.getView(),it=Math.log(7.5)/Math.LN2,yt=1/(.1*Math.pow(2,it/2));(0,Gt.H9)(K,yt),et.fitInternal((0,Xt.oJ)(K))}recenter_(){const Mt=this.getMap(),rt=this.ovmap_,q=Mt.getView();rt.getView().setCenterInternal(q.getCenterInternal())}updateBox_(){const Mt=this.getMap(),rt=this.ovmap_;if(!Mt.isRendered()||!rt.isRendered())return;const q=Mt.getSize(),M=Mt.getView(),K=rt.getView(),et=this.rotateWithView_?0:-M.getRotation(),it=this.boxOverlay_,yt=this.boxOverlay_.getElement(),Et=M.getCenterInternal(),At=M.getResolution(),Wt=K.getResolution(),Ht=q[0]*At/Wt,se=q[1]*At/Wt;it.setPosition(Et),yt&&(yt.style.width=Ht+"px",yt.style.height=se+"px",yt.style.transform="rotate("+et+"rad)")}updateBoxAfterOvmapIsRendered_(){this.ovmapPostrenderKey_||(this.ovmapPostrenderKey_=(0,g.Vx)(this.ovmap_,ut.Z.POSTRENDER,function(Mt){delete this.ovmapPostrenderKey_,this.updateBox_()},this))}handleClick_(Mt){Mt.preventDefault(),this.handleToggle_()}handleToggle_(){this.element.classList.toggle(v.hN),this.collapsed_?(0,z.$H)(this.collapseLabel_,this.label_):(0,z.$H)(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_;const Mt=this.ovmap_;if(!this.collapsed_){if(Mt.isRendered())return this.viewExtent_=void 0,void Mt.render();Mt.updateSize(),this.resetExtent_(),this.updateBoxAfterOvmapIsRendered_()}}getCollapsible(){return this.collapsible_}setCollapsible(Mt){this.collapsible_!==Mt&&(this.collapsible_=Mt,this.element.classList.toggle("ol-uncollapsible"),!Mt&&this.collapsed_&&this.handleToggle_())}setCollapsed(Mt){!this.collapsible_||this.collapsed_===Mt||this.handleToggle_()}getCollapsed(){return this.collapsed_}getRotateWithView(){return this.rotateWithView_}setRotateWithView(Mt){this.rotateWithView_!==Mt&&(this.rotateWithView_=Mt,0!==this.getMap().getView().getRotation()&&(this.rotateWithView_?this.handleRotationChanged_():this.ovmap_.getView().setRotation(0),this.viewExtent_=void 0,this.validateExtent_(),this.updateBox_()))}getOverviewMap(){return this.ovmap_}render(Mt){this.validateExtent_(),this.updateBox_()}};var de=a(7729),Re=a(1978),gt=a(8861),Rt=a(8099),Ft=a(5240),Yt=a(7590),ge=a(3829),$t=a(9813),ft=a(755),Pt=a(7180),Nt=a(6733);const zt=["mapDiv"];function Bt(Ee,Mt){1&Ee&&(ft.TgZ(0,"div",3),ft._uU(1,"+"),ft.qZA())}let ve=(()=>{class Ee{constructor(rt,q){this.mapSvc=rt,this.ngZone=q,this.subs=[],this.mapSize=[0,0],this.initialMapStateSet=!1,this.removePopupsOnMouseLeave=M=>{this.mapSvc.removeAllPopups(K=>"pointermove"===K.get("addEvent"))}}ngOnInit(){this.subscribeToMapState(),this.initMap(),this.subscribeToLayers()}ngAfterViewInit(){this.map.setTarget(this.mapDivView.nativeElement),this.subscribeToMapEvents(),this.map.getTargetElement().addEventListener("mouseleave",this.removePopupsOnMouseLeave)}ngAfterViewChecked(){this.updateMapSize()}ngOnDestroy(){this.subs.forEach(q=>q.unsubscribe());const rt=this.mapStateSvc.getMapState().value;rt.options.notifier="user",this.mapStateSvc.setMapState(rt),this.map&&(this.map.un("moveend",this.mapOnMoveend),this.map.un("click",this.mapOnClickMove),this.map.un("dblclick",this.mapOnDclick),this.map.getTargetElement().removeEventListener("mouseleave",this.removePopupsOnMouseLeave),this.map.getInteractions().forEach(q=>{this.map.removeInteraction(q)}))}getMapDiv(){return this.mapDivView&&this.mapDivView.nativeElement?{width:this.mapDivView.nativeElement.offsetWidth,height:this.mapDivView.nativeElement.offsetHeight}:null}updateMapSize(){const rt=this.getMapDiv();if(rt)if(rt.width===this.mapSize[0]&&rt.height===this.mapSize[1]){if(!this.initialMapStateSet){const q=this.mapStateSvc.getMapState().getValue();this.setMapState(q),this.initialMapStateSet=!0}}else this.ngZone.runOutsideAngular(()=>{this.map.updateSize(),this.mapSize=this.map.getSize()})}addUpdateLayers(rt,q,M){const K=this.mapSvc.getLayerGroups(q)[0].getLayers(),et=M.reduce((it,yt)=>it+this.mapSvc.getLayers(yt).length,0);rt.length!==this.mapSvc.getLayers(q).length?this.mapSvc.setUkisLayers(rt,q,et):this.updateLayers(rt,q,et,K)}updateLayers(rt,q,M,K){for(const et of rt){const it=this.mapSvc.getLayerByKey({key:"id",value:et.id},q);if(it){it.getVisible()!==et.visible&&((0,ge.f$)(it,et.visible,et instanceof k.AO),this.mapSvc.hideAllPopups(!et.visible,At=>{const Ht=At.getId().toString().split(":")[0];return!Ht||(Ht===et.id?Ht===et.id:void 0)})),it.getOpacity()!==et.opacity&&(0,ge.yv)(it,et.opacity,et instanceof k.AO),this.updateLayerSource(et,it);const yt=rt.indexOf(et),Et=M>0?yt+M:yt;it.getZIndex()!==Et&&((0,ge.n8)(it,yt,K),(0,ge.AH)(it,yt,M)),this.updateLayerParamsWith(it,et)}}}updateLayerSource(rt,q){if(rt instanceof k.AO&&q instanceof Z.Z){const M=rt.custom_layer.getSource(),K=q.getSource();M&&(0,G.sq)(K)!==(0,G.sq)(M)&&(q.setSource(M),K instanceof Rt.ZP&&K.dispose())}else if(rt instanceof k.AO&&rt.custom_layer instanceof b.Z&&q instanceof b.Z){const M=rt.custom_layer.getLayers().getArray();q.getLayers().getArray().forEach((et,it)=>{const yt=M[it];if(et instanceof Z.Z&&yt instanceof Z.Z){const Et=et.getSource(),At=yt.getSource();At&&(0,G.sq)(Et)!==(0,G.sq)(At)&&et.setSource(At)}})}}updateLayerParamsWith(rt,q){switch(q.type){case k.MR:this.updateWmsLayerParamsWith(rt,q);break;case k.$6:this.updateWmtsLayerParamsWith(rt,q);break;case k.Sw:this.updateGeojsonLayerParamsWith(rt,q);break;case k.KF:this.updateWfsLayerParamsWith(rt,q);break;case k.CY:this.updateTmsLayerParamsWith(rt,q)}}updateTmsLayerParamsWith(rt,q){q instanceof k.DJ&&(0,Yt.bg)(rt,q.options.style,q.options.styleSource)}updateWfsLayerParamsWith(rt,q){q.options&&q.options.style!==rt.getStyle()&&rt.setStyle(q.options.style),rt.getSource().getUrl()!==q.url&&rt.getSource().setUrl(q.url)}updateGeojsonLayerParamsWith(rt,q){const M=rt.getSource();if(M){if(q.data){const K=this.mapSvc.geoJsonToFeatures(q.data);if(M instanceof Ft.Z){const et=M.getSource();et.clear(),et.addFeatures(K)}else M.clear(),M.addFeatures(K)}else q.url&&(M instanceof Ft.Z?M.getSource().setUrl(q.url):M.setUrl(q.url));"object"==typeof q?.cluster&&"distance"in q.cluster&&M instanceof Ft.Z&&M.setDistance(q.cluster.distance)}q?.options?.style&&rt.setStyle(q.options.style)}updateWmsLayerParamsWith(rt,q){if(rt instanceof Z.Z){const K=rt.getSource().getParams(),et=q.params;this.shallowEqual(K,et)||rt.getSource().updateParams(et)}}updateWmtsLayerParamsWith(rt,q){if(rt instanceof Z.Z){const M=rt.getSource(),K=M.getStyle(),et=M.getFormat(),it=M.getVersion(),yt=M.getMatrixSet(),Et=q.params.style,At=q.params.format,Wt=q.params.version,Ht=q.params.matrixSetOptions.matrixSet;if(void 0!==Et&&K!==Et||void 0!==At&&et!==At||void 0!==Wt&&it!==Wt||void 0!==Ht&&yt!==Ht){const se=q.filtertype.toLowerCase();this.mapSvc.updateUkisLayer(q,se)}}}shallowEqual(rt,q){const M=Object.getOwnPropertyNames(rt),K=Object.getOwnPropertyNames(q);if(M.length!==K.length)return!1;for(const et of M)if(rt[et]!==q[et])return!1;return!0}addUpdateBaseLayers(rt){const q=this.mapSvc.getLayerGroups("baselayers")[0].getLayers();if(rt.length!==this.mapSvc.getLayers("baselayers").length){const M=rt.filter(K=>!0===K.visible);0===M.length?rt[0].visible=!0:M.length>1&&(rt.forEach(K=>K.visible=!1),rt[0].visible=!0),this.mapSvc.setUkisLayers(rt,"baselayers")}else for(const M of rt){const K=this.mapSvc.getLayerByKey({key:"id",value:M.id},"baselayers");if(K){const et=rt.indexOf(M);K.getVisible()!==M.visible&&(0,ge.f$)(K,M.visible,M instanceof k.AO),K.getZIndex()!==et&&(q.remove(K),q.insertAt(et,K),(0,ge.AH)(K,et)),K.getOpacity()!==M.opacity&&(0,ge.yv)(K,M.opacity,M instanceof k.AO),this.updateLayerSource(M,K),this.updateLayerParamsWith(K,M)}}}subscribeToLayers(){if(this.layersSvc){const rt=this.layersSvc.getBaseLayers().subscribe(K=>this.addUpdateBaseLayers(K));this.subs.push(rt);const q=this.layersSvc.getLayers().subscribe(K=>this.addUpdateLayers(K,"layers",["baselayers"]));this.subs.push(q);const M=this.layersSvc.getOverlays().subscribe(K=>this.addUpdateLayers(K,"overlays",["baselayers","layers"]));this.subs.push(M)}}setMapState(rt){const q=this.mapStateSvc.getLastAction().getValue();"user"===rt.options.notifier&&("setExtent"===q?this.mapSvc.setExtent(rt.extent,!0):"setState"===q?(this.mapSvc.setZoom(rt.zoom),this.mapSvc.setCenter([rt.center.lon,rt.center.lat],!0),this.mapSvc.setRotation(rt.rotation)):"setRotation"===q&&this.mapSvc.setRotation(rt.rotation))}subscribeToMapState(){if(this.mapStateSvc){const rt=this.mapStateSvc.getMapState().pipe((0,F.T)(1)).subscribe(q=>this.setMapState(q));this.subs.push(rt)}}subscribeToMapEvents(){this.mapOnMoveend=rt=>{const q=this.mapStateSvc.getMapState().getValue(),M=this.mapSvc.getZoom(),K=this.mapSvc.getCenter(!0),et=this.mapSvc.getCurrentExtent(!0),it=this.mapSvc.getRotation(),yt={lat:parseFloat(K[1]),lon:parseFloat(K[0])},Et=new W.U5(M,yt,{notifier:"map"},et,q.time,q.viewAngle,it);this.mapStateSvc.setMapState(Et)},this.map.on("moveend",this.mapOnMoveend),this.mapOnClickMove=rt=>{this.mapSvc.layersOnMapEvent(rt)},this.map.on(["click","pointermove"],this.mapOnClickMove),this.mapOnDclick=rt=>{this.mapSvc.removeAllPopups()},this.map.on("dblclick",this.mapOnDclick)}initMap(){const rt=this.mapSvc.createMap();this.map=rt.map;const q=this.map.getInteractions();(0,$t.c)().forEach(K=>{q.getArray().find(it=>it.constructor.name===K.constructor.name)||this.map.addInteraction(K)}),this.setControls(),this.layersSvc||console.log("there is no layersSvc as defined!"),this.mapStateSvc||console.log("there is no mapStateSvc as defined!")}setControls(){const rt=[],q=[];if(this.map&&(this.map.getControls().getArray().forEach(K=>q.push(K)),this.map.getControls().clear()),this.controls&&this.map){if(!1!==this.controls.attribution){let M={collapsible:!0,collapsed:!1};"object"==typeof this.controls.attribution&&(M=Object.assign(M,this.controls.attribution));const K=new S.Z(M);rt.push(K)}if(this.controls.scaleLine){let M={};"object"==typeof this.controls.scaleLine&&(M=Object.assign(M,this.controls.scaleLine));const K=new l(M);rt.push(K)}if(!1!==this.controls.zoom){let M={};"object"==typeof this.controls.zoom&&(M=Object.assign(M,this.controls.zoom));const K=new _.Z(M);rt.push(K)}if(this.controls.mousePosition){let M={coordinateFormat:et=>(0,m.yZ)(et,2),projection:"EPSG:4326"};"object"==typeof this.controls.mousePosition&&(M=Object.assign(M,this.controls.mousePosition));const K=new E(M);rt.push(K)}if(this.controls.fullScreen){let M={};"object"==typeof this.controls.fullScreen&&(M=Object.assign(M,this.controls.fullScreen));const K=new nt(M);rt.push(K)}if(this.controls.overviewMap){const M=document.createElement("spawn");M.innerHTML='<clr-icon shape="world"></clr-icon>';let K={layers:[new de.Z({source:new Re.Z})],label:M};"object"==typeof this.controls.overviewMap&&(K=Object.assign(K,this.controls.overviewMap));const et=new he(K);rt.push(et)}if(this.controls.rotate){let M={};"object"==typeof this.controls.rotate&&(M=Object.assign(M,this.controls.rotate));const K=new gt.Z(M);rt.push(K)}rt.length&&(q.filter(K=>!rt.includes(K)).forEach(K=>rt.push(K)),this.map.getControls().extend(rt))}}static#t=this.\u0275fac=function(q){return new(q||Ee)(ft.Y36(Pt.B),ft.Y36(ft.R0b))};static#e=this.\u0275cmp=ft.Xpm({type:Ee,selectors:[["ukis-map-ol"]],viewQuery:function(q,M){if(1&q&&ft.Gf(zt,5),2&q){let K;ft.iGM(K=ft.CRH())&&(M.mapDivView=K.first)}},inputs:{layersSvc:"layersSvc",mapStateSvc:["mapState","mapStateSvc"],controls:"controls"},decls:3,vars:1,consts:[["ref","map",1,"map"],["mapDiv",""],["class","crosshair",4,"ngIf"],[1,"crosshair"]],template:function(q,M){1&q&&(ft.TgZ(0,"div",0,1),ft.YNc(2,Bt,2,0,"div",2),ft.qZA()),2&q&&(ft.xp6(2),ft.Q6J("ngIf",M.controls&&M.controls.crosshair))},dependencies:[Nt.O5],styles:['@charset "UTF-8";:root{--ukis-crosshair-color: #ff0004;--ukis-popup-bg-color: rgb(238, 238, 238);--ukis-drop-shadow: drop-shadow(0 1px 4px rgba(0, 0, 0, .2));--ukis-ol-bbox-bg-color: rgba(255, 255, 255, .4);--ukis-ol-bbox-border-color: rgba(87, 87, 87, .4);--ukis-ol-overviewmap-left: .5em;--ukis-ol-overviewmap-bottom: 3em;--ukis-ol-control-bg-color: rgba(87, 87, 87, .6);--ukis-ol-control-border-color: rgba(87, 87, 87, .4)}.map{width:100%;height:100%;position:relative}.ol-popup{position:absolute;background-color:var(--ukis-popup-bg-color);filter:var(--ukis-drop-shadow);padding:15px;border-radius:2px;bottom:12px;left:-50px;min-width:280px;display:none;z-index:1000000}.ol-popup .ol-popup-closer{text-decoration:none;position:absolute;top:0;right:8px;cursor:pointer}.ol-popup .ol-popup-closer:after{content:"\\2716"}.ol-popup:after,.ol-popup:before{top:100%;border:solid transparent;content:" ";height:0;width:0;position:absolute;pointer-events:none}.ol-popup:after{border-top-color:var(--ukis-popup-bg-color);border-width:10px;left:48px;margin-left:-10px}.ol-popup:before{border-width:11px;left:48px;margin-left:-11px}.ol-popup.hidden{visibility:hidden}.crosshair{top:50%;left:50%;font-size:large;color:var(--ukis-crosshair-color);z-index:1;position:absolute;cursor:default}.ol-control{padding:1px;--ol-subtle-background-color: #fff6}.ol-control button{--ol-subtle-foreground-color: #fff;--ol-foreground-color: #fff;cursor:pointer;background-color:var(--ukis-ol-control-bg-color)}.ol-control button:focus{background-color:var(--ukis-ol-control-bg-color)}.ol-control button:hover{background-color:var(--ukis-ol-control-border-color)}.ol-scale-line{background:rgba(255,255,255,.4);line-height:1.375em;padding:1px}.ol-scale-line .ol-scale-line-inner{background:var(--ukis-ol-control-bg-color);border-color:var(--ukis-ol-control-bg-color);--ol-foreground-color: #fff}.ol-attribution:not(.ol-collapsed){padding:0 2px}.ol-attribution ul{font-size:.5rem}.ol-box{background-color:var(--ukis-ol-bbox-bg-color);border-color:var(--ukis-ol-bbox-border-color)!important}.ol-box.ol-drag-select{border-color:var(--clr-color-action-600, var(--fallback-color-no-clr))!important}.ol-overviewmap{left:var(--ukis-ol-overviewmap-left)!important;bottom:var(--ukis-ol-overviewmap-bottom)!important}\n'],encapsulation:2})}return Ee})()},7180:(jt,ht,a)=>{"use strict";a.d(ht,{B:()=>Mt});var W=a(755),F=a(9265),k=a(4792),G=a(6715),Z=a(4199),b=a(5209),S=a(1590),P=a(5681),v=a(2920),f=a(4203),u=a(9107),c=a(450),r=a(7729),d=a(640),e=a(8412),l=a(2889),_=a(7590),n=a(1180),g=a(3053),m=a(3640),y=a(6902),I=a(8311),O=a(3298),E=a(719),R=a(7273),N=a(8625),z=a(7835),st=a(7021);const L=class A extends E.Z{constructor(q){const M=void 0!==q.requestEncoding?q.requestEncoding:"KVP",K=q.tileGrid;let et=q.urls;void 0===et&&void 0!==q.url&&(et=(0,z.Gk)(q.url)),super({attributions:q.attributions,attributionsCollapsible:q.attributionsCollapsible,cacheSize:q.cacheSize,crossOrigin:q.crossOrigin,interpolate:q.interpolate,projection:q.projection,reprojectionErrorThreshold:q.reprojectionErrorThreshold,tileClass:q.tileClass,tileGrid:K,tileLoadFunction:q.tileLoadFunction,tilePixelRatio:q.tilePixelRatio,urls:et,wrapX:void 0!==q.wrapX&&q.wrapX,transition:q.transition,zDirection:q.zDirection}),this.version_=void 0!==q.version?q.version:"1.0.0",this.format_=void 0!==q.format?q.format:"image/jpeg",this.dimensions_=void 0!==q.dimensions?q.dimensions:{},this.layer_=q.layer,this.matrixSet_=q.matrixSet,this.style_=q.style,this.requestEncoding_=M,this.setKey(this.getKeyForDimensions_()),et&&et.length>0&&(this.tileUrlFunction=(0,z.Un)(et.map(this.createFromWMTSTemplate.bind(this))))}setUrls(q){this.urls=q;const M=q.join("\n");this.setTileUrlFunction((0,z.Un)(q.map(this.createFromWMTSTemplate.bind(this))),M)}getDimensions(){return this.dimensions_}getFormat(){return this.format_}getLayer(){return this.layer_}getMatrixSet(){return this.matrixSet_}getRequestEncoding(){return this.requestEncoding_}getStyle(){return this.style_}getVersion(){return this.version_}getKeyForDimensions_(){const q=this.urls?this.urls.slice(0):[];for(const M in this.dimensions_)q.push(M+"-"+this.dimensions_[M]);return q.join("/")}updateDimensions(q){Object.assign(this.dimensions_,q),this.setKey(this.getKeyForDimensions_())}createFromWMTSTemplate(q){const M=this.requestEncoding_,K={layer:this.layer_,style:this.style_,tilematrixset:this.matrixSet_};"KVP"==M&&Object.assign(K,{Service:"WMTS",Request:"GetTile",Version:this.version_,Format:this.format_}),q="KVP"==M?(0,N.B)(q,K):q.replace(/\{(\w+?)\}/g,function(yt,Et){return Et.toLowerCase()in K?K[Et.toLowerCase()]:yt});const et=this.tileGrid,it=this.dimensions_;return function(yt,Et,At){if(!yt)return;const Wt={TileMatrix:et.getMatrixId(yt[0]),TileCol:yt[1],TileRow:yt[2]};Object.assign(Wt,it);let Ht=q;return Ht="KVP"==M?(0,N.B)(Ht,Wt):Ht.replace(/\{(\w+?)\}/g,function(se,Te){return Wt[Te]}),Ht}}};var x=a(8398);const D=class C extends x.Z{constructor(q){super({extent:q.extent,origin:q.origin,origins:q.origins,resolutions:q.resolutions,tileSize:q.tileSize,tileSizes:q.tileSizes,sizes:q.sizes}),this.matrixIds_=q.matrixIds}getMatrixId(q){return this.matrixIds_[q]}getMatrixIds(){return this.matrixIds_}};var nt=a(5105),V=a(8099),at=a(5240),ut=a(6108),Ct=a(1539),vt=a(6377),St=a(8340),bt=a(7498),Gt=a(5661),Xt=a(1316),te=a(8220),Vt=a(53),_e=a(1949),he=a(7202),de=a(5505),Re=a(3009),gt=a(4396),Rt=a(7946),Ft=a(3089),Yt=a(8748),ge=a(3829);const $t="type",ft="filtertype",Pt="id",Nt="groupID",zt="groupName",Bt="title",ve="EPSG:4326",Ee="popup";let Mt=(()=>{class rt{constructor(M,K){this.app=M,this.envInjector=K,this.hitTolerance=0,this.hitLayerCurr=null,this.hitLayerPrev=null,this.projectionChange=new Yt.x,this.dynamicPopupComponents=new Map,this.popupEvents=new Yt.x,this.filterLayerNoPopup=et=>{const it=et.get(Ee);let yt=!0;return it||(yt=!1),it&&this.isPopupObj(it)&&!0===it.filterLayer&&(yt=!1),yt},this.map=new k.Z({controls:[]}),this.view=new G.ZP,this.EPSG="EPSG:3857"}createMap(M){const it=new S.Z({layers:[]});it.set(ft,"baselayers"),it.set(Bt,"Base maps"),it.set(Pt,"ID_filtertype_baselayers");const yt=new S.Z({layers:[]});yt.set(ft,"layers"),yt.set(Bt,"Layers"),yt.set(Pt,"ID_filtertype_layers");const Et=new S.Z({layers:[]});Et.set(ft,"overlays"),Et.set(Bt,"Overlays"),Et.set(Pt,"ID_filtertype_overlays"),this.viewOptions={center:(0,st.vs)([0,0],ve,this.EPSG),zoom:0,projection:(0,st.U2)(this.EPSG)},this.view.constrainRotation&&(this.viewOptions.constrainRotation=this.view.constrainRotation),this.view.enableRotation&&(this.viewOptions.enableRotation=this.view.enableRotation),this.view.extent&&(this.viewOptions.extent=this.view.extent),this.view.constrainOnlyCenter&&(this.viewOptions.constrainOnlyCenter=this.view.constrainOnlyCenter),this.view.smoothExtentConstraint&&(this.viewOptions.smoothExtentConstraint=this.view.smoothExtentConstraint),this.view.getMaxResolution()&&(this.viewOptions.maxResolution=this.view.getMaxResolution()),this.view.getMinResolution()&&(this.viewOptions.minResolution=this.view.getMinResolution()),this.view.getMaxZoom()&&(this.viewOptions.maxZoom=this.view.getMaxZoom()),this.view.getMinZoom()&&(this.viewOptions.minZoom=this.view.getMinZoom()),this.view.multiWorld&&(this.viewOptions.multiWorld=this.view.multiWorld),this.view.constrainResolution&&(this.viewOptions.constrainResolution=this.view.constrainResolution),this.view.smoothResolutionConstraint&&(this.viewOptions.smoothResolutionConstraint=this.view.smoothResolutionConstraint),this.view.getResolution()&&(this.viewOptions.resolution=this.view.getResolution()),this.view.getResolutions()&&(this.viewOptions.resolutions=this.view.getResolutions()),this.view.rotation&&(this.viewOptions.rotation=this.view.rotation),this.view.zoomFactor&&(this.viewOptions.zoomFactor=this.view.zoomFactor);const At=new G.ZP(this.viewOptions);return this.map.getLayerGroup().getLayers().clear(),[it,yt,Et].map(Wt=>this.map.addLayer(Wt)),this.map.setView(At),this.view=this.map.getView(),this.setProjection(this.EPSG),M&&this.map.setTarget(M),{map:this.map,view:this.view}}setHitTolerance(M){this.hitTolerance=M}getHitTolerance(){return this.hitTolerance}addBboxSelection(M,K,et,it){Object.assign({className:"ol-drag-select",condition:M},it);const Et=new Rt.Z(it);return K&&Et.on("boxstart",At=>{K(At)}),et&&Et.on("boxend",At=>{const Wt=Et.getGeometry().getExtent();et(Wt,At)}),this.map.addInteraction(Et),Et}getLayers(M){const K=M.toLowerCase();let et;return this.map.getLayers().getArray().forEach(it=>{it.get(ft)===K&&(et=it.getLayers().getArray())}),et}getLayersFromGroup(M,K,et=!1){const it=M.getLayers().getArray();let yt=it;if(et){let Et=[].concat(it);it.forEach(At=>{At instanceof S.Z&&(Et=Et.concat(this.getLayersFromGroup(At,K,!0)))}),yt=Et}return K?yt.filter(Et=>Et.get(ft)&&Et.get(ft).toLowerCase()===K.toLowerCase()):yt}getLayerByKey(M,K){const et=this.getLayersFromGroup(this.map.getLayerGroup(),K),it=(0,ge.fA)(et),yt=[];if(it.forEach(Et=>{Et.get(M.key)&&Et.get(M.key)===M.value&&-1===yt.indexOf(Et)&&yt.push(Et)}),!yt.length){const Et=this.getLayersFromGroup(this.map.getLayerGroup(),K,!0);Et.length&&Et.forEach(At=>{At.get(M.key)&&At.get(M.key)===M.value&&-1===yt.indexOf(At)&&yt.push(At)})}return 1===yt.length?yt[0]:null}setRecursiveKey(M,K,et=ft){M.set(et,K),M instanceof S.Z&&M.getLayers().forEach(it=>{this.setRecursiveKey(it,K,et)})}addLayer(M,K){const et=K.toLowerCase();let it;return this.map.getLayers().getArray().forEach(yt=>{yt.get(ft)===et&&(this.isLayerInGroup(M,yt)||(it=yt.getLayers().getArray(),this.setRecursiveKey(M,et,ft),it.push(M),yt.setLayers(new ut.Z(it))))}),it}isLayerInGroup(M,K){return!!K.getLayers().getArray().filter(yt=>yt.get(Pt)===M.get(Pt)).length}getLayerGroups(M){const K=[];return this.map.getLayers().forEach(et=>{et instanceof S.Z&&(M?et.get(ft)&&et.get(ft).toLowerCase()===M.toLowerCase()&&K.push(et):K.push(et))}),K}addLayers(M,K){const et=K.toLocaleLowerCase();let it;return this.getLayerGroups(et).forEach(Et=>{Et.getLayers().getLength()>0?(it=Et.getLayers().getArray(),M.map(Wt=>{this.isLayerInGroup(Wt,Et)||it.push(Wt)})):it=M,it.forEach(Wt=>{Wt instanceof S.Z&&this.setRecursiveKey(Wt,et,ft)}),Et.setLayers(new ut.Z(it))}),it}setLayers(M,K){const et=K.toLocaleLowerCase(),it=this.getLayerGroups(et);return M.forEach(yt=>{yt instanceof S.Z&&this.setRecursiveKey(yt,K.toLocaleLowerCase(),ft)}),it.forEach(yt=>{this.cleanUpEventListeners(yt,M),yt.setLayers(new ut.Z(M))}),M}cleanUpEventListeners(M,K){const et=M.getLayers().getArray().filter(it=>!K.map(yt=>yt.get(Pt)).includes(it.get(Pt)));this.removeListenersFromOldLayers(et),et.forEach(it=>M.getLayers().remove(it))}addEventsToLayer(M,K,et){M.events&&(M.events.layer&&M.events.layer.forEach(it=>{K.getListeners(it.event)||K.on(it.event,it.listener)}),M.events.source&&M.events.source.forEach(it=>{et.getListeners(it.event)||et.on(it.event,it.listener)}))}removeListenersFromOldLayers(M){const K=et=>{if("function"==typeof et.getSource){const it=et.getSource();it&&(it instanceof V.ZP&&it.dispose(),it.hasListener()&&it.disposeInternal())}et.hasListener()&&et.disposeInternal()};M.forEach(et=>{et instanceof S.Z?et.getLayers().forEach(it=>{K(it)}):et instanceof Z.Z&&K(et)})}getLayerGroupForLayer(M){const K=this.getLayersFromGroup(this.map.getLayerGroup(),null,!0);K.push(this.map.getLayerGroup());let et=null;return K.forEach(it=>{if(it instanceof S.Z){const Et=this.getLayersFromGroup(it).find(At=>At===M);Et&&(et={group:it,layer:Et})}}),et}removeLayerByKey(M,K){const et=K.toLocaleLowerCase(),it=this.getLayerByKey(M,et);if(it){const yt=this.getLayerGroupForLayer(it);if(yt.group){const Et=this.getLayersFromGroup(yt.group).filter(At=>At!==it);yt.group.setLayers(new ut.Z(Et))}}}updateLayerByKey(M,K,et){const it=et.toLocaleLowerCase();this.map.getLayers().forEach(yt=>{if(yt.get(ft)===it){const Et=yt.getLayers();Et.forEach((At,Wt)=>{if(At.get(M.key)&&At.get(M.key)===M.value){const Ht=K.getProperties(),se=K.getExtent(),Te=K.getMaxZoom(),ce=K.getMinZoom(),ee=K.getOpacity(),We=K.getVisible(),Ge=K.getZIndex();if(At instanceof b.Z&&K instanceof b.Z){const Ze=K.getSource();At.setSource(Ze)}Ht&&At.setProperties(Ht),se&&At.setExtent(se),Te&&At.setMaxZoom(Te),ce&&At.setMinZoom(ce),ee&&At.setOpacity(ee),We&&At.setVisible(We),Ge&&(0,ge.AH)(At,Ge),At.changed(),Et.setAt(Wt,At)}}),yt.setLayers(Et)}})}removeAllLayers(M){const K=M.toLowerCase();let et;this.map.getLayers().getArray().forEach(it=>{it.get(ft)===K&&(et=it.getLayers(),et.clear())})}setUkisLayers(M,K,et){const it=K.toLowerCase(),yt=[];if(M.length<1&&"baselayers"!==it?this.removeAllLayers(it):M.forEach((Et,At)=>{const Wt=this.create_layers(Et);Wt&&((0,ge.AH)(Wt,At,et),yt.push(Wt))}),yt.length>0)return this.setLayers(yt,it),{type:it,layers:yt}}setUkisLayer(M,K){K||(K=M.filtertype);const et=K.toLowerCase(),yt=this.getLayers(et).find(At=>At.get(Pt)===M.id),Et=this.create_layers(M);yt?(this.removeLayerByKey({key:Pt,value:yt.get(Pt)},K),this.addLayer(Et,K)):this.addLayer(Et,K)}updateUkisLayer(M,K){K||(K=M.filtertype);const et=K.toLowerCase(),yt=this.getLayers(et).find(At=>At.get(Pt)===M.id),Et=this.create_layers(M);Et&&this.updateLayerByKey({key:Pt,value:yt.get(Pt)},Et,K)}create_layers(M){let K;switch(M.type){case F.Aq:K=this.create_xyz_layer(M);break;case F.MR:K=this.create_wms_layer(M);break;case F.$6:K=this.create_wmts_layer(M);break;case F.CY:K=this.create_tms_layer(M);break;case F.Sw:K=this.create_geojson_layer(M);break;case F.R6:K=this.create_kml_layer(M);break;case F.KF:K=this.create_wfs_layer(M);break;case F.ED:K=this.create_custom_layer(M);break;case F.jn:K=this.create_stacked_layer(M)}return K}createOlLayerOptions(M,K,et){et&&(M.attribution&&et.setAttributions([M.attribution]),M.continuousWorld&&(et.wrapX_=M.continuousWorld),M.popup&&!M.crossOrigin&&null!==M.crossOrigin&&this.sourceSetCross(et),(M.crossOrigin||null===M.crossOrigin)&&this.sourceSetCross(et));const it={opacity:M.opacity||1,visible:M.visible,zIndex:1,id:M.id,name:M.name,filtertype:M.filtertype,type:K,legendImg:M.legendImg};return et&&(it.source=et),M.popup&&(it.popup=M.popup,it.className=M.id),M.maxResolution&&(it.maxResolution=M.maxResolution),M.minResolution&&(it.minResolution=M.minResolution),M.maxZoom&&(it.maxZoom=M.maxZoom),M.minZoom&&(it.minZoom=M.minZoom),M.bbox&&(it.extent=(0,st.$A)(M.bbox.slice(0,4),ve,this.getProjection().getCode())),it}create_xyz_layer(M){const K={wrapX:!1};M.crossOrigin&&(K.crossOrigin=M.crossOrigin);const et=new m.Z(K),it=this.createOlLayerOptions(M,"xyz",et),Et=new r.Z(Object.assign(it,{preload:0,useInterimTilesOnError:!0}));return this.setSubdomains(M,Et),this.setCrossOrigin(M,Et),this.addEventsToLayer(M,Et,et),Et}create_tms_layer(M){let K=null;if(M instanceof F.YY)return K=this.create_xyz_layer(M),K.set("type","tms"),K;if(M instanceof F.DJ){const et=new l.Z({format:new g.Z,tileGrid:(0,n.dl)({minZoom:M.minZoom||void 0,maxZoom:M.maxZoom||void 0}),url:M.url,wrapX:!1}),it=this.createOlLayerOptions(M,"tms",et);K=new e.Z(Object.assign(it,{declutter:!0,renderMode:"hybrid"})),this.setCrossOrigin(M,K),this.addEventsToLayer(M,K,et);const Et=M?.options?.style,At=M?.options?.styleSource;return Et&&At&&((0,_.h0)(K,Et),(0,_.bg)(K,Et,At).then(Wt=>{this.setSubdomains(M,K)})),K}}create_wms_layer(M){let K;return"true"===M.params?.TILED||null==M.params?.TILED?K=this.create_tiled_wms_layer(M):"false"===M.params?.TILED&&(K=this.create_image_wms_layer(M)),K}create_tiled_wms_layer(M){const K={params:Object.assign({},this.keysToUppercase(M.params)),wrapX:!1};M.tileSize&&(K.tileGrid=this.getTileGrid("default",null,M.tileSize),delete K.params.tileSize),M.crossOrigin&&(K.crossOrigin=M.crossOrigin);const et=new I.Z(K),yt=this.createOlLayerOptions(M,"wms",et),Et=new r.Z(Object.assign(yt,{preload:0,useInterimTilesOnError:!0}));return this.setSubdomains(M,Et),this.addEventsToLayer(M,Et,et),Et}create_image_wms_layer(M){const K={params:Object.assign({},this.keysToUppercase(M.params)),url:M.url},et=new O.Z(K),it=this.createOlLayerOptions(M,"wms",et),Et=new c.Z(Object.assign(it,{}));return this.addEventsToLayer(M,Et,et),Et}create_wmts_layer(M){if(M instanceof F.RC){let K=this.getTileGrid("wmts"),et=this.EPSG;M.params.matrixSetOptions&&(et=M.params.matrixSetOptions.matrixSet,"resolutions"in M.params.matrixSetOptions?K=this.getTileGrid("wmts",null,M.tileSize,null,M.params.matrixSetOptions.resolutions):("resolutionLevels"in M.params.matrixSetOptions||"tileMatrixPrefix"in M.params.matrixSetOptions)&&(K=this.getTileGrid("wmts",M.params.matrixSetOptions.resolutionLevels,M.tileSize,M.params.matrixSetOptions.tileMatrixPrefix,null)),"matrixIds"in M.params.matrixSetOptions&&(K=this.getTileGrid("wmts",null,M.tileSize,null,null,M.params.matrixSetOptions.matrixIds)));let it={url:M.url,tileGrid:K,matrixSet:et,wrapX:!1,layer:M.params.layer,style:M.params.style};it=Object.assign({},it,M.params),M.crossOrigin&&(it.crossOrigin=M.crossOrigin);const yt=new L(it),Et=this.createOlLayerOptions(M,"wmts",yt),Wt=new r.Z(Object.assign(Et,{}));return this.setSubdomains(M,Wt),this.setCrossOrigin(M,Wt),this.addEventsToLayer(M,Wt,yt),Wt}console.error(`layer with id: ${M.id} and type ${M.type} is no instanceof WmtsLayer!`)}create_wfs_layer(M){let K=null;K=0===M.url.indexOf("http://")||0===M.url.indexOf("https://")?new URL(M.url):new URL(M.url,window.location.origin),K.searchParams.set("srsname",this.EPSG);const et=new nt.Z({format:new Ct.Z,url:K.toString()}),it=this.createOlLayerOptions(M,"wfs",et),yt={};M.options&&Object.assign(yt,M.options);const Et=new d.Z(Object.assign(it,yt));return M.cluster&&this.setCluster(M,Et,et,{}),this.setSubdomains(M,Et),this.setCrossOrigin(M,Et),this.addEventsToLayer(M,Et,et),Et}create_geojson_layer(M){let K;M.data?K=new nt.Z({features:this.geoJsonToFeatures(M.data),format:new Ct.Z,wrapX:!1}):M.url&&(K=new nt.Z({url:M.url,format:new Ct.Z({dataProjection:ve,featureProjection:this.EPSG}),wrapX:!1}));const et=this.createOlLayerOptions(M,"geojson",K),it={};M.options&&Object.assign(it,M.options);const yt=new d.Z(Object.assign(et,it));return M.cluster&&this.setCluster(M,yt,K,{}),this.setCrossOrigin(M,yt),this.addEventsToLayer(M,yt,K),yt}create_kml_layer(M){let K;M.data?K=new nt.Z({features:new vt.ZP({extractStyles:!0}).readFeatures(M.data,{dataProjection:ve,featureProjection:this.EPSG}),format:new vt.ZP,wrapX:!1}):M.url&&(K=new nt.Z({url:M.url,format:new vt.ZP({extractStyles:!0,crossOrigin:M.crossOrigin&&null===M.crossOrigin?M.crossOrigin:"anonymous"}),wrapX:!1}));const et=this.createOlLayerOptions(M,"kml",K),it={};M.options&&Object.assign(it,M.options);const yt=new d.Z(Object.assign(et,it));return M.cluster&&this.setCluster(M,yt,K,{}),this.setCrossOrigin(M,yt),this.addEventsToLayer(M,yt,et.source),yt}setCrossOrigin(M,K){if(K instanceof b.Z){const et=K.getSource();M.popup&&!M.crossOrigin&&null!==M.crossOrigin&&this.sourceSetCross(et),(M.crossOrigin||null===M.crossOrigin)&&this.sourceSetCross(et)}}setCluster(M,K,et,it){if(M.cluster){const yt={};"object"==typeof M.cluster&&Object.assign(yt,M.cluster),yt.source=et;const Et=new at.Z(yt);K.setSource(Et),K.setStyle(At=>{const Wt=At.get("features").length;let Ht=it[Wt];return Ht||(Ht=new _e.ZP({image:new Re.Z({radius:10,stroke:new gt.Z({color:"#fff"}),fill:new de.Z({color:"#3399CC"})}),text:new he.Z({text:Wt.toString(),fill:new de.Z({color:"#fff"})})}),it[Wt]=Ht),Ht})}}setSubdomains(M,K){if(M instanceof F.DJ||M instanceof F.YY){const et=K.getSource();if(M.subdomains){if("wfs"===M.type&&et instanceof nt.Z)M.url=M.url.replace("{s}",`${M.subdomains[0]}-${M.subdomains[M.subdomains.length-1]}`),et.setUrl(M.url);else if(!(et instanceof nt.Z)){const it=M.subdomains.map(yt=>M.url.replace("{s}",`${yt}`));et.setUrls(it)}}else et.setUrl(M.url)}}sourceSetCross(M){(M instanceof R.ZP||M instanceof E.Z||M instanceof y.Z)&&(M.crossOrigin="anonymous",M.crossOrigin_="anonymous")}create_custom_layer(M){if(M.custom_layer){const K=M.custom_layer;if(K instanceof b.Z){const it=K.getSource();M.attribution&&it.setAttributions([M.attribution]),it.wrapX_=!!M.continuousWorld&&M.continuousWorld,this.setCrossOrigin(M,K),this.addEventsToLayer(M,K,it),it instanceof V.ZP&&K.on("change:source",yt=>{yt.oldValue.dispose()})}else K instanceof S.Z?K.getLayers().forEach(it=>{it.set(Nt,M.id),it.set(zt,M.name);const yt=`${M.id}_${(0,Ft.sq)(it)}`;if(it.get(Pt)||it.set(Pt,yt),it instanceof b.Z&&(this.setCrossOrigin(M,it),this.addEventsToLayer(M,it,it.getSource())),M.popup&&!it.get(Ee)&&(it.set(Ee,M.popup),"ol-layer"===it.getClassName()&&(it.className_=yt)),M.bbox){const Et=(0,st.$A)(M.bbox.slice(0,4),ve,this.getProjection().getCode());it.setExtent(Et)}}):console.error(`The custom_layer of ${M.id} in not a openlayers Layer`);M.maxResolution&&K.setMaxResolution(M.maxResolution),M.minResolution&&K.setMinResolution(M.minResolution),M.maxZoom&&K.setMaxZoom(M.maxZoom),M.minZoom&&K.setMinZoom(M.minZoom);const et={type:"custom",name:M.name,id:M.id,visible:M.visible,legendImg:M.legendImg,opacity:M.opacity||1,zIndex:1};if(M.popup&&!(K instanceof S.Z)&&(et.popup=M.popup,K.className_=M.id),M.bbox){const it=(0,st.$A)(M.bbox.slice(0,4),ve,this.getProjection().getCode());K.setExtent(it)}return K.setProperties(et),K}console.log("attribute custom_layer not set on layer type custom!",M)}create_stacked_layer(M){if(M instanceof F.WQ){const K=M.layers.map(Et=>(Et.visible=M.visible,Et.opacity=M.opacity,M.popup&&(Et.popup=M.popup),M.events&&(Et.events=M.events),this.create_layers(Et))),et=this.createOlLayerOptions(M,"custom");return K.forEach(Et=>{Et.set(Nt,M.id),Et.set(zt,M.name)}),new S.Z(Object.assign(et,{layers:K}))}console.log("layer is not of type StackedLayer!",M)}resolutionsFromExtent(M,K,et){const it=K,yt=(0,Xt.Cr)(M),Et=(0,Xt.dz)(M),At=Math.max(Et/et,yt/et),Wt=it+1,Ht=new Array(Wt);for(let se=0;se<Wt;++se)Ht[se]=At/Math.pow(2,se);return Ht}matrixIdsFromResolutions(M,K){return Array.from(Array(M).keys()).map(et=>K?`${K}:${et}`:et)}getTileGrid(M="default",K,et,it,yt,Et){const At=K||te.e,Wt=et||te.S,Ht=it||"",se=this.getProjection().getExtent(),Te=this.resolutionsFromExtent(se,At,Wt),ce=this.matrixIdsFromResolutions(Te.length,Ht),ee={extent:se,origin:(0,Xt.rL)(se),resolutions:yt||Te,tileSize:[Wt,Wt]};return"wmts"===M?(ee.matrixIds=Et||ce,new D(ee)):"default"===M?new x.Z(ee):void 0}isPopupObj(M){return M&&"object"==typeof M&&!Array.isArray(M)}isPopupObjMove(M){return this.isPopupObj(M)&&"move"===M.event}isPopupObjClick(M){return this.isPopupObj(M)&&"click"===M.event}isPopupObjArray(M){return Array.isArray(M)&&M.length&&this.isPopupObj(M[0])}isPopupStringArray(M){return Array.isArray(M)&&M.length&&"string"==typeof M[0]}eventIsBrowserEvent(M,K){return"move"===M&&"pointermove"===K.type||"click"===M&&"click"===K.type||void 0}layersOnMapEvent(M){let K=!1;const et=this.map.getAllLayers();let it=et.length;const yt=new Map;let Et=null;for(;it--;){const At=et[it];let Wt=At.getVisible(),Ht=At.getOpacity();const se=At.get(Nt);if(se){const ce=this.getLayerByKey({key:Pt,value:se});Wt=ce.getVisible(),Ht=ce.getOpacity()}const Te=At.get(Ee);if(this.checkForPopupAsObservable(At,Wt,Ht,Te,yt),Wt&&0!==Ht&&this.filterLayerExtent(At,M.pixel)&&!Te)break;if(this.filterLayerNoPopup(At)&&At.getData&&At.getData(M.pixel)&&this.checkIsRaster(At)){const ce=At.getData(M.pixel);let ee;if((ce instanceof Uint8ClampedArray||ce instanceof Uint8Array||ce instanceof Float32Array)&&(ee=ce[3]),ee||ce instanceof DataView){Et={layer:At,color:ce};break}}else if(this.filterLayerNoPopup(At)&&this.filterLayerExtent(At,M.pixel)&&this.checkIsVector(At)){const ce=this.map.getFeaturesAtPixel(M.pixel,{layerFilter:ee=>At.get(Pt)===ee.get(Pt)});if(ce.length){Et={layer:At,feature:ce[0]};break}}}if(Et){const At=Et.layer.get(Ee);this.hitLayerCurr=Et.layer.get(Pt),this.hitLayerPrev||(this.hitLayerPrev=this.hitLayerCurr),(Et.color||Et.feature)&&(K=!0),this.hitLayerPrev&&this.hitLayerPrev!==this.hitLayerCurr&&(K=!1,this.hitLayerPrev=this.hitLayerCurr),this.checkTopLayerEvent(M,At)&&this.layerOnEvent(M,Et.layer,Et.color,Et.feature)}K?this.map.getTargetElement().style.cursor="pointer":(this.publishNullPropertiesAsObservable(yt,M),this.removeAllPopups(At=>"pointermove"===At.get("addEvent")),this.map.getTargetElement().style.cursor="")}checkForPopupAsObservable(M,K,et,it,yt){K&&0!==et&&it&&(this.isPopupObj(it)&&it.asObservable?yt.set(M.get(Pt),M):this.isPopupObjArray(it)&&it.forEach(Et=>{Et.asObservable&&yt.set(M.get(Pt),M)}))}publishNullPropertiesAsObservable(M,K){M.size&&M.forEach(et=>{const it=et.get(Ee),yt=[];this.isPopupObj(it)&&it.asObservable?yt.push(it):this.isPopupObjArray(it)&&it.forEach(Et=>{Et.asObservable&&yt.push(Et)}),yt.forEach(Et=>{this.eventIsBrowserEvent(Et.event||"click",K)&&this.popupEvents.next({popupObj:Et,popupParams:{layerId:et.get(Pt),layerName:et.get("name"),mapEvent:K,layer:et,properties:null}})})})}checkTopLayerEvent(M,K){let et=null;const it=(yt,Et)=>{Et.event?this.eventIsBrowserEvent(Et.event,yt)&&this.isPopupObjClick(Et)?et="click":this.eventIsBrowserEvent(Et.event,yt)&&this.isPopupObjMove(Et)&&(et="move"):"click"===yt.type&&(et="click")};return"boolean"==typeof K?!0===K&&"click"===M.type&&(et="click"):this.isPopupStringArray(K)?"click"===M.type&&(et="click"):this.isPopupObjArray(K)?K.map(yt=>{it(M,yt)}):it(M,K),et}checkIsRaster(M){return M instanceof u.Z||M instanceof v.Z}checkIsVector(M){return M instanceof f.Z&&!this.checkIsRaster(M)}layerOnEvent(M,K,et,it){this.checkIsRaster(K)?this.rasterOnEvent(M,K,et):this.checkIsVector(K)&&this.vectorOnEvent(M,K,it)}filterLayerExtent(M,K){let et=!0;const it=M.getExtent();if(it){const yt=this.map.getCoordinateFromPixel(K);(0,Xt.b8)(it,yt)||(et=!1)}return et}vectorOnEvent(M,K,et){if(K&&et){const it=K.get(Ee);let yt={};const At=et.getProperties().features;if(At&&1===At.length)yt=At[0].getProperties();else{if(At&&At.length>1){if("click"===M.type){const Wt=this.getFeaturesExtent(At);return this.setExtent(Wt),!1}return!0}yt=et.getProperties()}this.prepareAddPopup(K,M,it,et,yt)}}rasterOnEvent(M,K,et){const it=K.get(Ee);it&&this.prepareAddPopup(K,M,it,null,null,et)}prepareAddPopup(M,K,et,it,yt,Et){const At=M.getProperties(),Wt={layerId:At.id,layerName:At.name||At[zt]||null,mapEvent:K,layer:M,properties:yt?Object.assign({},yt):{}};Wt.properties?.geometry&&delete Wt.properties.geometry,it&&(Wt.feature=it),Et&&(Wt.color=Et);const Ht=ce=>{ce&&ce.filterkeys&&(Wt.properties=Object.keys(Wt.properties).filter(ee=>ce.filterkeys.includes(ee)).reduce((ee,We)=>(ee[We]=Wt.properties[We],ee),{}))};this.isPopupStringArray(et)?Wt.properties=Object.keys(Wt.properties).filter(ce=>et.includes(ce)).reduce((ce,ee)=>(ce[ee]=Wt.properties[ee],ce),{}):this.isPopupObjArray(et)?Ht(et.find(ee=>this.eventIsBrowserEvent(ee.event,K))):this.isPopupObj(et)&&Ht(et);const se=ce=>{if(ce.properties){const ee=Object.keys(ce.properties);Array.isArray(ee)&&(Wt.properties=Object.keys(Wt.properties).reduce((We,Ge)=>{const Ze=ce.properties[Ge];return Ze?We[Ze]=Wt.properties[Ge]:We[Ge]=Wt.properties[Ge],We},{}))}};this.isPopupObjArray(et)?et.forEach(ce=>{this.eventIsBrowserEvent(ce.event,K)&&se(ce)}):this.isPopupObj(et)&&se(et);const Te=ce=>{"asyncPopup"in ce?ce.asyncPopup(Wt,ee=>{ce.asObservable?this.publishPopupEvent(ce,Wt,ee):this.addPopup(Wt,ce,ee,ce.event,ce.single)}):ce.asObservable?this.publishPopupEvent(ce,Wt):this.addPopup(Wt,ce,null,ce.event,ce.single)};"boolean"==typeof et||this.isPopupStringArray(et)?this.addPopup(Wt):this.isPopupObjArray(et)?et.forEach(ce=>{this.eventIsBrowserEvent(ce.event,K)&&Te(ce)}):et&&Te(et)}publishPopupEvent(M,K,et){et&&(K.properties=Object.assign(K.properties,et)),this.popupEvents.next({popupObj:M,popupParams:K})}addPopup(M,K,et,it,yt){const Et=M.layer.get(Ee),At=M.layer.get(Pt),Wt="popup_move_ID",Ht="move_ID_L_F",se=this.getPopups().find(ee=>ee.getId()===Wt),Te=M.mapEvent;let ce=null;if("move"===it&&(M.color?ce=`${At}:${M.color.toString()}`:M.feature?ce=`${At}:${(0,Ft.sq)(M.feature)}`:M.layer&&(ce=`${At}:${(0,Ft.sq)(M.layer)}`)),"move"===it&&"pointermove"===Te.type&&se){let ee;const We=M.feature;if(ee=We&&"Point"===We.getGeometry()?.getType()?We.getGeometry().getCoordinates():Te.coordinate,ce!==se.get(Ht)){const Ge=this.createPopupContainer(se,M,K,et,it);se.setElement(Ge)}se.setPosition(ee),se.getElement().parentElement.style.zIndex="1"}else if("pointermove"!==Te.type||it)if("pointermove"===Te.type&&"click"===it)se&&this.removeAllPopups(ee=>"pointermove"===ee.get("addEvent"));else{let ee=null;ee="move"===it?Wt:M.feature?`${At}:${(0,Ft.sq)(M.feature)}`:M.layer?`${At}:${(0,Ft.sq)(M.layer)}`:`${At}:popup_${(new Date).getTime()}`;const We={id:ee,autoPan:{animation:{duration:250}},positioning:"bottom-center",stopEvent:!0,insertFirst:!1};let Ge=We;if(this.isPopupObjArray(Et)){const Qe=Et.find(ei=>this.eventIsBrowserEvent(ei.event,Te));Qe.options&&(Ge=Object.assign(We,Qe.options))}else this.isPopupObj(Et)&&Et.options&&(Ge=Object.assign(We,Et.options));const Ze=new P.Z(Ge);ce&&Ze.set(Ht,ce),yt&&this.removeAllPopups(Qe=>{const $=Qe.getId().toString().split(":")[0];return!$||(At===$?At===$:void 0)});const ke=this.getPopups().find(Qe=>Qe.getId()===Ze.getId()&&Ze.getId()!==Wt);ke&&(this.map.removeOverlay(ke),this.destroyDynamicPopupComponent(ke.getId().toString()));const Ve=this.createPopupContainer(Ze,M,K,et,it);let Je;Ze.getId()===Wt?Ze.set("addEvent","pointermove"):Ze.set("addEvent",Te.type),Ze.set($t,Ee),Ze.setElement(Ve);const si=M.feature;Je=si&&"Point"===si.getGeometry()?.getType()?si.getGeometry().getCoordinates():Te.coordinate,Ze.setPosition(Je),se&&"move"===it||this.map.addOverlay(Ze)}else se&&this.removeAllPopups(ee=>"pointermove"===ee.get("addEvent"))}createPopupContainer(M,K,et,it,yt){const Et=document.createElement("div");Et.className="ol-popup-content";let At="";if(et?.popupFunction){const Ht=et.popupFunction(K);At="string"==typeof Ht?Ht:this.createPopupHtml(Ht)}else it?At="string"==typeof it?it:this.createPopupHtml(it):Object.keys(K.properties).length&&(At=this.createPopupHtml(K.properties));if(Et.innerHTML=At,et?.dynamicPopup){const Ht=M.getId().toString();this.destroyDynamicPopupComponent(Ht),this.createDynamicPopupComponent(Ht,Et,K,et)}const Wt=document.createElement("div");if(Wt.className="ol-popup",Wt.id=M.getId().toString(),Wt.style.display="block",!yt||"move"!==yt){const Ht=document.createElement("a");Ht.className="ol-popup-closer",Wt.appendChild(Ht);const se=()=>{Ht.removeEventListener("click",se,!1),this.map.removeOverlay(M),this.destroyDynamicPopupComponent(M.getId().toString())};Ht.addEventListener("click",se,!1)}return Wt.appendChild(Et),Wt}removeAllPopups(M){let K=this.getPopups();M&&(K=this.getPopups().filter(M)),K.forEach(et=>{et.get($t)===Ee&&(this.map.removeOverlay(et),this.destroyDynamicPopupComponent(et.getId().toString()))})}hideAllPopups(M,K){let et=this.getPopups();K&&(et=this.getPopups().filter(K)),et.forEach(it=>{if(it.get($t)===Ee){const yt=it.getElement();M?yt.classList.add("hidden"):yt.classList.remove("hidden")}})}createPopupHtml(M){let K="<table>";for(const et in M)M.hasOwnProperty(et)&&(K+='<tr><td style="vertical-align: top; padding-right: 7px;"><b>'+et+": </b></td><td>"+M[et]+"</td></tr>");return K+="</table>",K}getPopups(){const M=[];return this.map.getOverlays().getArray().slice(0).forEach(K=>{K.get($t)===Ee&&M.push(K)}),M}destroyDynamicPopupComponent(M){this.dynamicPopupComponents.has(M)&&(this.dynamicPopupComponents.get(M).destroy(),this.dynamicPopupComponents.delete(M))}createDynamicPopupComponent(M,K,et,it){const yt=(0,W.LMc)(it.dynamicPopup.component,{environmentInjector:this.envInjector,hostElement:K});if(it.dynamicPopup.getAttributes){const Et=it.dynamicPopup.getAttributes(et);for(const At in Et)"undefined"!==Et[At]&&(yt.instance[At]=Et[At])}this.app.attachView(yt.hostView),this.dynamicPopupComponents.set(M,yt)}setExtent(M,K,et){const it=(0,st.U2)(K?ve:this.EPSG),yt=(0,st.$A)(M.slice(0,4),it,this.getProjection().getCode()),Et={size:this.map.getSize()};return et&&Object.assign(Et,et),this.map.getView().fit(yt,et),yt}setCenter(M,K){const et=(0,st.U2)(K?ve:this.EPSG),it=(0,st.vs)(M,et,this.getProjection().getCode());return this.map.getView().setCenter(it),it}getCenter(M){const K=(0,st.U2)(M?ve:this.EPSG),et=(0,st.U2)(this.getProjection().getCode());return(0,st.vs)(this.map.getView().getCenter(),et,K)}getFeaturesExtent(M,K){const et=M[0].getGeometry().getExtent().slice(0);if(M.forEach(it=>{(0,Xt.l7)(et,it.getGeometry().getExtent())}),K){const it=(0,st.U2)(ve);return(0,st.$A)(et,this.getProjection().getCode(),it)}return et}getCurrentExtent(M){const K=(0,st.U2)(M?ve:this.EPSG),et=this.map.getView().calculateExtent();return(0,st.$A)(et,this.getProjection().getCode(),K)}setRotation(M){const K=this.map.getView();M*=Math.PI/180,K.setRotation(M)}getRotation(){return this.map.getView().getRotation()*(180/Math.PI)}setZoom(M){this.map.getView().setZoom(M)}getZoom(){return this.map.getView().getZoom()}zoomInOut(M,K){const et=this.map.getView();if(!et)return;const it=K?.zoomStep||1,yt="+"===M?it:-1*it,Et=et.getZoom();if(void 0!==Et){const At=et.getConstrainedZoom(Et+yt);et.getAnimating()&&et.cancelAnimations(),et.animate({zoom:At,duration:K?.duration||250,easing:K?.easing||Vt.Vv},Wt=>{K.callback&&K.callback(Wt)})}}geoJsonToFeature(M){return new Ct.Z({dataProjection:ve,featureProjection:this.EPSG}).readFeature(M)}geoJsonToFeatures(M){return new Ct.Z({dataProjection:ve,featureProjection:this.EPSG}).readFeatures(M)}getProjection(){return this.map.getView().getProjection()}reprojectFeatures(M,K,et){M.getFeatures().forEach(it=>{it.getGeometry().transform(K,et)})}setProjection(M){if(M){let K={};if(this.viewOptions&&(K=this.viewOptions,K.minResolution=void 0,K.maxResolution=void 0,K.resolution=void 0,K.resolutions=void 0),M instanceof St.Z){K.projection=M;const yt=(0,st.vs)(this.map.getView().getCenter(),this.map.getView().getProjection(),M);K.center=yt,K.zoom=this.map.getView().getZoom()}else"string"==typeof M&&(K.projection=M,K.center=this.map.getView().getCenter(),K.zoom=this.map.getView().getZoom());const et=new G.ZP(K),it=this.EPSG;this.EPSG=et.getProjection().getCode(),this.map.setView(et),this.view=this.map.getView(),this.map.getLayers().getArray().forEach(yt=>{yt.getLayers().getArray().forEach(Et=>{if(Et instanceof b.Z){let At=Et.getSource();for(;At.source;)At=At.source;At instanceof nt.Z&&this.reprojectFeatures(At,it,this.EPSG)}})}),this.projectionChange.next(this.getProjection())}}registerProjection(M){Gt.Z.defs(M.code,M.proj4js),(0,bt.z2)(Gt.Z)}getOlProjection(M){return new St.Z({code:M.code,extent:M.extent?M.extent:void 0,worldExtent:M.worldExtent?M.worldExtent:void 0,global:!!M.global&&M.global,units:M.units?M.units:void 0})}keysToUppercase(M){return Object.keys(M).forEach(K=>{const et=K.toUpperCase();et!==K&&(M[et]=M[K],delete M[K])}),M}static#t=this.\u0275fac=function(K){return new(K||rt)(W.LFG(W.z2F),W.LFG(W.lqb))};static#e=this.\u0275prov=W.Yz7({token:rt,factory:rt.\u0275fac,providedIn:"root"})}return rt})()},5829:(jt,ht,a)=>{"use strict";a.d(ht,{oC:()=>Z,BR:()=>W.B});var W=a(7180),k=(a(4149),a(6733)),G=a(755);let Z=(()=>{class b{static#t=this.\u0275fac=function(v){return new(v||b)};static#e=this.\u0275mod=G.oAB({type:b});static#i=this.\u0275inj=G.cJS({providers:[W.B],imports:[k.ez]})}return b})()},3829:(jt,ht,a)=>{"use strict";a.d(ht,{UT:()=>et,qS:()=>Ht,n8:()=>u,fA:()=>k,yv:()=>v,f$:()=>P,AH:()=>f,vK:()=>G,f_:()=>Pt});var W=a(1590),F=a(2224);function k($){let J=[];for(const _t of $)if(_t instanceof W.Z){const It=k(_t.getLayers().getArray());J=Array.prototype.concat(J,It)}else J.push(_t);return J}function G($,J,_t,pt=!1){const It=J.getContext("2d");if(!It)throw new Error("The target-canvas needs to use a 2d-context.");if(!J.width||!J.height)throw new Error("TargetCanvas: width or height have not been set.");It instanceof CanvasRenderingContext2D&&It.clearRect(0,0,J.width,J.height);const Jt=$.getSize();J.width=Jt[0],J.height=Jt[1];const ie=k($.getLayers().getArray()),ye=[];for(const Pe of ie)if(Pe.getVisible()&&Pe.getOpacity()>0){const Ie=Pe.on("postrender",Fe=>{const Xe=Fe.context.canvas;It instanceof CanvasRenderingContext2D&&(It.beginPath(),It.drawImage(Xe,0,0,Xe.clientWidth,Xe.clientHeight,0,0,J.width,J.height),It.closePath())});Array.isArray(Ie)?Ie.map(Fe=>ye.push(Fe)):ye.push(Ie)}pt?$.on("rendercomplete",Pe=>{_t(J)}):$.once("rendercomplete",Pe=>{for(const Ie of ye)(0,F.B)(Ie);_t(J)}),$.renderSync()}function P($,J,_t=!1){$.setVisible(J),!_t&&$ instanceof W.Z&&$.getLayers().forEach(It=>{P(It,J)})}function v($,J,_t=!1){$.setOpacity(J),!_t&&$ instanceof W.Z&&$.getLayers().forEach(It=>{v(It,J)})}function f($,J,_t){$.setZIndex(_t>0?J+_t:J),$ instanceof W.Z&&$.getLayers().forEach(Jt=>{f(Jt,J,_t)})}function u($,J,_t){_t.remove($),_t.insertAt(J,$)}var c=a(450),r=a(7021);const d=$=>{let J=[];for(const _t of $){let pt;pt=Array.isArray(_t[0])?d(_t):_t,J=Array.prototype.concat(J,pt)}return J},l=($,J)=>Math.log($)/Math.log(J),_=($,J)=>l($,J)%1==0,y=($,J,_t)=>{const pt=$.createShader(J);if(!pt)throw new Error("No shader was created");if($.shaderSource(pt,_t),$.compileShader(pt),!$.getShaderParameter(pt,$.COMPILE_STATUS))throw $.deleteShader(pt),new Error(`An error occurred compiling the shader: ${$.getShaderInfoLog(pt)}.    \n\n Shader code: ${_t}`);return pt},R=($,J)=>{$.useProgram(J)},w=($,J,_t)=>{$.bindBuffer($.ARRAY_BUFFER,_t.buffer),$.enableVertexAttribArray(J),$.vertexAttribPointer(J,_t.vectorSize,_t.type,_t.normalize,_t.stride,_t.offset)},at=($,J,_t,pt)=>{if(_t>$.getParameter($.MAX_COMBINED_TEXTURE_IMAGE_UNITS))throw new Error(`There are only ${$.getParameter($.MAX_COMBINED_TEXTURE_IMAGE_UNITS)} texture bind points, but you tried to bind to point nr. ${_t}.`);7===_t&&console.error(`You are about to bind to the dedicated texture-construction bind point (nr. ${_t}).\n        If after this call another texture is built, your shader will now use that new texture instead of this one!\n        Consider using another bind point.`),$.activeTexture($.TEXTURE0+_t),$.bindTexture($.TEXTURE_2D,J),$.uniform1i(pt,_t)},Gt=($,J,_t)=>{const pt=$.getUniformLocation(J,_t);if(null===pt)throw new Error(`Couldn't find uniform ${_t} in program.`);return pt},Xt=($,J,_t,pt)=>{switch(_t){case"bool":case"int":$.uniform1i(J,pt[0]);break;case"bvec2":case"ivec2":$.uniform2i(J,pt[0],pt[1]);break;case"bvec3":case"ivec3":$.uniform3i(J,pt[0],pt[1],pt[2]);break;case"bvec4":case"ivec4":$.uniform4i(J,pt[0],pt[1],pt[2],pt[3]);break;case"bool[]":case"int[]":$.uniform1iv(J,pt);break;case"bvec2[]":case"ivec2[]":$.uniform2iv(J,pt);break;case"bvec3[]":case"ivec3[]":$.uniform3iv(J,pt);break;case"bvec4[]":case"ivec4[]":$.uniform4iv(J,pt);break;case"float":$.uniform1f(J,pt[0]);break;case"vec2":$.uniform2f(J,pt[0],pt[1]);break;case"vec3":$.uniform3f(J,pt[0],pt[1],pt[2]);break;case"vec4":$.uniform4f(J,pt[0],pt[1],pt[2],pt[3]);break;case"float[]":$.uniform1fv(J,pt);break;case"vec2[]":$.uniform2fv(J,pt);break;case"vec3[]":$.uniform3fv(J,pt);break;case"vec4[]":$.uniform4fv(J,pt);break;case"mat2":$.uniformMatrix2fv(J,!1,pt);break;case"mat3":$.uniformMatrix3fv(J,!1,pt);break;case"mat4":$.uniformMatrix4fv(J,!1,pt);break;default:throw Error(`Type ${_t} not implemented.`)}};class he{constructor(J,_t,pt){this.vertexShaderSource=_t,this.fragmentShaderSource=pt,this.program=(($,J,_t)=>{const pt=$.createProgram();if(!pt)throw new Error("No program was created");const It=y($,$.VERTEX_SHADER,J),Jt=y($,$.FRAGMENT_SHADER,_t);if($.attachShader(pt,It),$.attachShader(pt,Jt),$.linkProgram(pt),$.detachShader(pt,It),$.detachShader(pt,Jt),$.deleteShader(It),$.deleteShader(Jt),!$.getProgramParameter(pt,$.LINK_STATUS))throw $.deleteProgram(pt),new Error("Unable to initialize the shader program: "+$.getProgramInfoLog(pt));return pt})(J,_t,pt),this.id=function($){let J=0;for(const _t of $)J+=_t.charCodeAt(0);return`${J}`}(_t+pt)}}class de{constructor(J,_t,pt,It,Jt){this.location=Gt(J,_t.program,pt),this.type=It,this.value=Jt,this.variableName=pt}}class Re{constructor(J,_t,pt,It,Jt){this.location=Gt(J,_t.program,pt),this.texture=It instanceof HTMLImageElement||It instanceof HTMLCanvasElement?(($,J)=>{const _t=$.createTexture();if(!_t)throw new Error("No texture was created");$.activeTexture($.TEXTURE0+7),$.bindTexture($.TEXTURE_2D,_t);const It=$.RGBA,Jt=$.RGBA,ie=$.UNSIGNED_BYTE;let ye,Pe;return $.texImage2D($.TEXTURE_2D,0,It,Jt,ie,J),$.generateMipmap($.TEXTURE_2D),$.bindTexture($.TEXTURE_2D,null),J instanceof HTMLImageElement?(ye=J.naturalWidth,Pe=J.naturalHeight):(ye=J.width,Pe=J.height),{texture:_t,level:0,internalformat:It,format:Jt,type:ie,width:ye,height:Pe,border:0}})(J,It):It,this.bindPoint=Jt,this.variableName=pt}}class gt{constructor(J,_t,pt,It,Jt){this.location=Gt(J,_t.program,pt),this.texture=(($,J)=>{const _t=J.length,pt=J[0].length,It=J[0][0].length;if(!_(pt,2)||!_(_t,2))throw new Error(`Texture-data-dimensions must be a power of two, but are ${pt} x ${_t}`);if(4!==It)throw new Error(`Expecting 4 channels, but ${It} provided`);const Jt=$.createTexture();if(!Jt)throw new Error("No texture was created");$.activeTexture($.TEXTURE0+7),$.bindTexture($.TEXTURE_2D,Jt);const Pe=$.RGBA,Ie=$.RGBA,Fe=$.UNSIGNED_BYTE,je=new Uint8Array(d(J));return 4!==It&&$.pixelStorei($.UNPACK_ALIGNMENT,1),$.texImage2D($.TEXTURE_2D,0,Pe,pt,_t,0,Ie,Fe,je),$.texParameteri($.TEXTURE_2D,$.TEXTURE_WRAP_S,$.CLAMP_TO_EDGE),$.texParameteri($.TEXTURE_2D,$.TEXTURE_WRAP_T,$.CLAMP_TO_EDGE),$.texParameteri($.TEXTURE_2D,$.TEXTURE_MIN_FILTER,$.NEAREST),$.texParameteri($.TEXTURE_2D,$.TEXTURE_MAG_FILTER,$.NEAREST),$.bindTexture($.TEXTURE_2D,null),{texture:Jt,level:0,internalformat:Pe,format:Ie,type:Fe,width:pt,height:_t,border:0}})(J,It),this.bindPoint=Jt,this.variableName=pt}}class Rt{constructor(J,_t,pt,It,Jt="triangles"){let ie;switch(Jt){case"triangles":ie=J.TRIANGLES;break;case"lines":ie=J.LINES;break;case"points":ie=J.POINTS;break;default:throw new Error(`Invalid drawing mode ${Jt}`)}this.location=(($,J,_t)=>{const pt=$.getAttribLocation(J,_t);if(-1===pt)throw new Error(`Couldn't find attribute ${_t} in program.`);return pt})(J,_t.program,pt),this.value=(($,J,_t=$.TRIANGLES)=>{const pt=new Float32Array(d(J)),It=$.createBuffer();if(!It)throw new Error("No buffer was created");return $.bindBuffer($.ARRAY_BUFFER,It),$.bufferData($.ARRAY_BUFFER,pt,$.STATIC_DRAW),$.bindBuffer($.ARRAY_BUFFER,null),{buffer:It,vectorSize:J[0].length,vectorCount:J.length,type:$.FLOAT,normalize:!1,stride:0,offset:0,drawingMode:_t}})(J,It,ie),this.variableName=pt,this.drawingMode=ie}}class Ft{constructor(J,_t,pt="triangles"){let It;switch(pt){case"triangles":It=J.TRIANGLES;break;case"lines":It=J.LINES;break;case"points":It=J.POINTS;break;default:throw new Error(`Invalid drawing mode ${pt}`)}this.index=(($,J,_t=$.TRIANGLES)=>{const pt=new Uint16Array(d(J)),It=$.createBuffer();if(!It)throw new Error("No buffer was created");return $.bindBuffer($.ELEMENT_ARRAY_BUFFER,It),$.bufferData($.ELEMENT_ARRAY_BUFFER,pt,$.STATIC_DRAW),$.bindBuffer($.ELEMENT_ARRAY_BUFFER,null),{buffer:It,count:pt.length,type:$.UNSIGNED_SHORT,offset:0,drawingMode:_t}})(J,_t,It)}}function Yt($,J){for(const _t of $)if(J(_t))return _t;return null}class $t{constructor(J,_t,pt,It,Jt){this.program=J,this.attributes=_t,this.uniforms=pt,this.textures=It,this.index=Jt;const[ie,ye,Pe,Ie]=function ge($){const J=/^\s*attribute (int|float|vec2|vec3|vec4|mat2|mat3|mat4) (\w*);/gm,_t=/^\s*uniform (int|float|vec2|vec3|vec4|mat2|mat3|mat4) (\w*)(\[\d\])*;/gm,pt=/^\s*uniform sampler2D (\w*);/gm,It=/^\s*precision (\w*) float;/gm,Jt=$.fragmentShaderSource+"\n\n\n"+$.vertexShaderSource,ie=[];let ye;for(;null!==(ye=J.exec(Jt));)ie.push(ye[2]);const Pe=[];let Ie;for(;null!==(Ie=_t.exec(Jt));)Pe.push(Ie[2]);const Fe=[];let je;for(;null!==(je=pt.exec(Jt));)Fe.push(je[1]);const Xe=[];let ni;for(;null!==(ni=It.exec(Jt));)Xe.push(ni[1]);return[ie,Pe,Fe,Xe]}(J);for(const je of ie){const Xe=_t.filter(ni=>ni.variableName===je);if(1!==Xe.length)throw new Error(`Provided ${Xe.length} values for shader's attribute ${je}.`)}for(const je of ye){const Xe=pt.filter(ni=>ni.variableName===je);if(1!==Xe.length)throw new Error(`Provided ${Xe.length} values for shader's uniform ${je}.`)}for(const je of Pe){const Xe=It.filter(ni=>ni.variableName===je);if(1!==Xe.length)throw new Error(`Provided ${Xe.length} values for shader's texture ${je}.`)}1===Ie.length&&console.warn("You have only provided one precision qualifier.\n            This can cause issues when you want to use a uniform in both the vertex- and the fragment-shader.");const Fe=this.attributes.map(je=>je.value.vectorCount);if(Math.min(...Fe)!==Math.max(...Fe))throw new Error("Your attributes are not of the same length!")}bind(J){R(J,this.program.program);for(const _t of this.attributes)w(J,_t.location,_t.value);for(const _t of this.uniforms)Xt(J,_t.location,_t.type,_t.value);for(const _t of this.textures)at(J,_t.texture.texture,_t.bindPoint,_t.location);this.index&&(($,J)=>{$.bindBuffer($.ELEMENT_ARRAY_BUFFER,this.index.index.buffer)})(J)}render(J,_t,pt,It){pt?(($,J,_t)=>{$.bindFramebuffer($.FRAMEBUFFER,J.framebuffer),_t?(J.width/J.height!=_t[2]/_t[3]&&console.warn("Your viewport-aspect is different from the framebuffer-aspect."),$.viewport(..._t)):$.viewport(0,0,J.width,J.height)})(J,pt,It):(($,J)=>{$.bindFramebuffer($.FRAMEBUFFER,null),J?($.canvas.width/$.canvas.height!=J[2]/J[3]&&console.warn("Your viewport-aspect is different from the canvas-aspect."),$.viewport(...J)):$.viewport(0,0,$.canvas.width,$.canvas.height)})(J,It),_t&&(($,J)=>{$.clearColor(J[0],J[1],J[2],J[3]),$.clearDepth(1),$.clear($.COLOR_BUFFER_BIT|$.DEPTH_BUFFER_BIT)})(J,_t),this.index?(($,J)=>{$.drawElements(J.drawingMode,J.count,J.type,J.offset)})(J,this.index.index):(($,J)=>{$.drawArrays(J.drawingMode,J.offset,J.vectorCount)})(J,this.attributes[0].value)}updateAttributeData(J,_t,pt){const It=Yt(this.attributes,Jt=>Jt.variableName===_t);if(!It)throw new Error(`No such attribute ${_t} to be updated.`);(($,J,_t)=>{const pt=new Float32Array(d(_t));$.bindBuffer($.ARRAY_BUFFER,J.buffer),$.bufferData($.ARRAY_BUFFER,pt,$.STATIC_DRAW),$.bindBuffer($.ARRAY_BUFFER,null)})(J,It.value,pt)}updateUniformData(J,_t,pt){const It=Yt(this.uniforms,Jt=>Jt.variableName===_t);if(!It)throw new Error(`No such uniform ${_t} to be updated.`);It.value=pt}updateTextureData(J,_t,pt){const It=Yt(this.textures,ie=>ie.variableName===_t);if(!It)throw new Error(`No such texture ${_t} to be updated.`);const Jt=(($,J,_t)=>{if($.activeTexture($.TEXTURE0+7),$.bindTexture($.TEXTURE_2D,J.texture),_t instanceof HTMLImageElement||_t instanceof HTMLCanvasElement)$.texImage2D($.TEXTURE_2D,0,$.RGBA,$.RGBA,$.UNSIGNED_BYTE,_t);else{const pt=_t[0].length,It=_t.length;if(!_(pt,2)||!_(It,2))throw new Error(`Texture-data-dimensions must be a power of two, but are ${It} x ${pt}`);const Jt=new Uint8Array(d(_t));$.texImage2D($.TEXTURE_2D,J.level,J.internalformat,J.width,J.height,J.border,J.format,J.type,Jt)}return $.generateMipmap($.TEXTURE_2D),$.bindTexture($.TEXTURE_2D,null),_t instanceof HTMLImageElement?(J.width=_t.naturalWidth,J.height=_t.naturalHeight):_t instanceof HTMLCanvasElement?(J.width=_t.width,J.height=_t.height):(J.width=_t[0].length,J.height=_t.length),J})(J,It.texture,pt);It.texture=Jt}}class ft{constructor(J,_t,pt){const It=($=>{const J=$.createFramebuffer();if(!J)throw new Error("Error creating framebuffer");return J})(J),Jt=(($,J,_t)=>{if(J<=0||_t<=0)throw new Error("Width and height must be positive.");const pt=$.createTexture();if(!pt)throw new Error("No texture was created");return $.activeTexture($.TEXTURE0+7),$.bindTexture($.TEXTURE_2D,pt),$.texImage2D($.TEXTURE_2D,0,$.RGBA,J,_t,0,$.RGBA,$.UNSIGNED_BYTE,null),$.texParameteri($.TEXTURE_2D,$.TEXTURE_WRAP_S,$.CLAMP_TO_EDGE),$.texParameteri($.TEXTURE_2D,$.TEXTURE_WRAP_T,$.CLAMP_TO_EDGE),$.texParameteri($.TEXTURE_2D,$.TEXTURE_MIN_FILTER,$.NEAREST),$.texParameteri($.TEXTURE_2D,$.TEXTURE_MAG_FILTER,$.NEAREST),$.bindTexture($.TEXTURE_2D,null),{texture:pt,level:0,internalformat:$.RGBA,format:$.RGBA,type:$.UNSIGNED_BYTE,width:J,height:_t,border:0}})(J,_t,pt),ie=(($,J,_t)=>{if($.bindFramebuffer($.FRAMEBUFFER,_t),$.framebufferTexture2D($.FRAMEBUFFER,$.COLOR_ATTACHMENT0,$.TEXTURE_2D,J.texture,0),$.checkFramebufferStatus($.FRAMEBUFFER)!==$.FRAMEBUFFER_COMPLETE)throw new Error(`Error creating framebuffer: framebuffer-status: ${$.checkFramebufferStatus($.FRAMEBUFFER)} ; error-code: ${$.getError()}`);return $.bindFramebuffer($.FRAMEBUFFER,null),{framebuffer:_t,texture:J,width:J.width,height:J.height}})(J,Jt,It);this.fbo=ie}}function Pt($,J){const _t=1e3/$;let It,Jt,ie,pt=_t;const ye=()=>{It=window.performance.now(),J(pt),Jt=window.performance.now(),pt=Jt-It,ie=Math.max(_t-pt,0),setTimeout(()=>{requestAnimationFrame(ye)},ie)};ye()}const q=($,J)=>({vertices:[[-$/2,J/2,0],[-$/2,-J/2,0],[$/2,-J/2,0],[-$/2,J/2,0],[$/2,-J/2,0],[$/2,J/2,0]],texturePositions:[[0,1],[0,0],[1,0],[0,1],[1,0],[1,1]]});var K=a(4696);class et extends c.Z{constructor(J){super(J)}createRenderer(){return this.renderer=new it(this),this.renderer}updateSunAngle(J){this.renderer&&this.renderer.updateSunAngle(J)}}class it extends K.Z{constructor(J){super(J),this.state="loading";const _t=document.createElement("canvas");_t.width=1200,_t.height=800,_t.style.position="absolute";const pt=_t.getContext("webgl"),It=J.getSource(),Jt=It.getProjection(),ie=It.getImageExtent(),ye=this.bboxOntoRectangle(2,2,ie),Pe=(($,J=256,_t=256,pt="red")=>{const It=document.createElement("canvas").getContext("2d");if(!It)throw new Error("no context");return It.canvas.width=J,It.canvas.height=_t,It.font=`bold ${5*_t/6|0}px sans-serif`,It.textAlign="center",It.textBaseline="middle",It.fillStyle=pt,It.fillText($,J/2,_t/2),It.canvas})("test",2048,2048,"red"),Ie=new he(pt,"\n            attribute vec3 a_position;\n            attribute vec2 a_texturePosition;\n            uniform mat3 u_world2pix;\n            uniform mat3 u_pix2canv;\n            varying vec2 v_texturePosition;\n            void main() {\n                vec3 pixelPosition = u_world2pix * vec3(a_position.x, a_position.y, 1.);\n                vec3 canvasPosition = u_pix2canv * pixelPosition;\n                gl_Position = vec4(canvasPosition.x, canvasPosition.y, 0., 1.);\n                v_texturePosition = a_texturePosition;\n            }\n        ","\n            precision mediump float;\n            uniform sampler2D u_srtm;\n            uniform float u_imageSize;\n            uniform vec3 u_sun;\n            varying vec2 v_texturePosition;\n            void main() {\n                float delta = 4. / u_imageSize;\n                float top = texture2D(u_srtm, vec2(v_texturePosition.x,         1. - v_texturePosition.y + delta)).r;\n                float bot = texture2D(u_srtm, vec2(v_texturePosition.x,         1. - v_texturePosition.y - delta)).r;\n                float lft = texture2D(u_srtm, vec2(v_texturePosition.x + delta, 1. - v_texturePosition.y        )).r;\n                float rgt = texture2D(u_srtm, vec2(v_texturePosition.x - delta, 1. - v_texturePosition.y        )).r;\n\n                vec3 surfaceNormal = vec3(\n                    lft - rgt,\n                    bot - top,\n                    2. * delta\n                );\n                surfaceNormal = normalize(surfaceNormal);\n                vec3 sunNormal = normalize(u_sun);\n                float alignment = abs(dot(sunNormal, surfaceNormal));\n\n                gl_FragColor = vec4(0., 0., 0., 0.5 * alignment);\n            }\n        ");R(pt,Ie.program);const Fe=new $t(Ie,[new Rt(pt,Ie,"a_position",ye.vertices),new Rt(pt,Ie,"a_texturePosition",ye.texturePositions)],[new de(pt,Ie,"u_imageSize","float",[2048]),new de(pt,Ie,"u_sun","vec3",[0,0,1]),new de(pt,Ie,"u_world2pix","mat3",d([[1,0,0],[0,1,0],[0,0,1]])),new de(pt,Ie,"u_pix2canv","mat3",d([[1/(_t.width/2),0,0],[0,-1/(_t.height/2),0],[-1,1,1]]))],[new Re(pt,Ie,"u_srtm",Pe,0)]);Fe.bind(pt),this.shader=Fe,this.canvas=_t,this.gl=pt,this.projection=Jt;const je=It.getImage(ie,.02197265625,2.440000295639038,Jt);je.addEventListener("change",Xe=>{const ni=je.getImage();this.shader.updateTextureData(this.gl,"u_srtm",ni),this.shader.bind(this.gl),this.state="ready",super.getLayer().changed()}),je.load()}prepareFrame(J){if("ready"===this.state){const _t=J.coordinateToPixelTransform;this.shader.updateUniformData(this.gl,"u_world2pix",d([[_t[0],_t[1],0],[_t[2],_t[3],0],[_t[4],_t[5],1]])),this.shader.bind(this.gl),J.viewState.projection!==this.projection&&this.reprojectImage(J.viewState.projection)}return!0}renderFrame(J,_t){return"ready"===this.state&&(this.shader.render(this.gl),this.transformCanvas(J)),this.canvas}renderDeclutter(J){}updateSunAngle(J){this.shader.updateUniformData(this.gl,"u_sun",[J[0],J[1],1]),this.shader.bind(this.gl),this.shader.render(this.gl)}bboxOntoRectangle(J,_t,pt){const It=q(J,_t);for(const Jt of It.vertices){const ye=Jt[1];Jt[0]=Jt[0]===J/2?pt[2]:pt[0],Jt[1]=ye===_t/2?pt[3]:pt[1]}return It}reprojectImage(J){const _t=super.getLayer().getSource(),pt=_t.getProjection(),It=_t.getImageExtent(),Jt=(0,r.$A)(It,pt,J),ie=this.bboxOntoRectangle(2,2,Jt);this.shader.updateAttributeData(this.gl,"a_position",ie.vertices),this.shader.bind(this.gl)}transformCanvas(J){const _t=J.layerStatesArray[J.layerIndex],pt=J.pixelRatio,It=J.size,Jt=Math.round(It[0]*pt),ie=Math.round(It[1]*pt),ye=_t.opacity;this.canvas.width=Jt,this.canvas.height=ie,this.canvas.style.opacity=`${ye}`,this.shader.updateUniformData(this.gl,"u_pix2canv",d([[1/(this.canvas.width/2),0,0],[0,-1/(this.canvas.height/2),0],[-1,1,1]]))}}var yt=a(5564),Et=a(640),At=a(5240),Wt=a(4211);class Ht extends Et.Z{constructor(J){super(J),this.options=J}createRenderer(){return new se(this,this.options.renderSettings)}updateParas(J,_t,pt){const It={colorRamp:this.options.renderSettings.colorRamp,maxEdgeLength:this.options.renderSettings.maxEdgeLength,storeInterpolatedPixelData:this.options.renderSettings.storeInterpolatedPixelData,valueProperty:this.options.renderSettings.valueProperty,power:J,showLabels:pt,smooth:_t};super.getRenderer().updateSettings(It),this.options.renderSettings=It}}class se extends yt.Z{constructor(J,_t){super(J),this.settings=_t,this.container=document.createElement("div"),this.container.classList.add("ol-layer"),this.container.style.setProperty("position","absolute"),this.container.style.setProperty("width","100%"),this.container.style.setProperty("height","100%"),this.webGlCanvas=document.createElement("canvas"),this.webGlCanvas.style.setProperty("position","absolute"),this.webGlCanvas.style.setProperty("left","0px"),this.webGlCanvas.style.setProperty("top","0px"),this.webGlCanvas.style.setProperty("width","100%"),this.webGlCanvas.style.setProperty("height","100%"),this.webGlCanvas.width=1e3,this.webGlCanvas.height=1e3,this.gl=this.webGlCanvas.getContext("webgl"),this.container.appendChild(this.webGlCanvas),this.pointRenderer=new yt.Z(J);const pt=J.getSource();this.projection=pt.getProjection();const{coords:It,values:Jt,bboxDelta:ie,maxVal:ye}=this.parseData(pt,this.settings.valueProperty,this.settings.maxEdgeLength),{observationsBbox:Pe,maxEdgeLengthBbox:Ie}=this.parseDataBbox(ie,It,Jt,ye,this.settings.maxEdgeLength);this.bbox=ie;const Fe=[[1,0,0],[0,1,0],[0,0,1]];this.interpolationShader=ce(this.gl,Pe,ye,this.settings.power,Ie),this.valueFb=new ft(this.gl,this.webGlCanvas.width,this.webGlCanvas.height),this.colorizationShader=ee(this.gl,this.settings.colorRamp,ye,this.settings.smooth,this.valueFb),this.colorFb=new ft(this.gl,this.webGlCanvas.width,this.webGlCanvas.height),this.arrangementShader=We(this.gl,Fe,Fe,ie,this.colorFb),this.runInterpolationShader(this.valueFb.fbo),this.runColorizationShader(this.colorFb.fbo)}prepareFrame(J){if(this.webGlCanvas.style.opacity=`${J.layerStatesArray[J.layerIndex].opacity}`,J.viewState.projection!==this.projection){this.projection=J.viewState.projection;const It=super.getLayer().getSource(),{coords:Jt,values:ie,bboxDelta:ye,maxVal:Pe}=this.parseData(It,this.settings.valueProperty,this.settings.maxEdgeLength),{observationsBbox:Ie,maxEdgeLengthBbox:Fe}=this.parseDataBbox(ye,Jt,ie,Pe,this.settings.maxEdgeLength);this.updateInterpolationShader(this.settings.power,Ie,Fe),this.runInterpolationShader(this.valueFb.fbo),this.runColorizationShader(this.colorFb.fbo),this.bbox=ye}return this.updateArrangementShader(J.coordinateToPixelTransform,J.size[0],J.size[1],this.bbox),this.pointRenderer.prepareFrame(J),!0}renderFrame(J,_t){if(this.runArrangementShader(),this.settings.showLabels){const pt=this.pointRenderer.renderFrame(J,this.container);(0,Wt.hF)(this.container,[this.webGlCanvas,pt])}else(0,Wt.hF)(this.container,[this.webGlCanvas]);return this.container}renderDeclutter(J){}updateSettings(J){const _t=this.settings;this.settings=J,J.power!==_t.power?(this.updateInterpolationShader(J.power),this.runInterpolationShader(this.valueFb.fbo),this.updateColorizationShader(J.smooth),this.runColorizationShader(this.colorFb.fbo)):J.smooth!==_t.smooth&&(this.updateColorizationShader(J.smooth),this.runColorizationShader(this.colorFb.fbo)),super.getLayer().changed()}updateArrangementShader(J,_t,pt,It){const ie=[[1/(_t/2),0,0],[0,-1/(pt/2),0],[-1,1,1]];this.arrangementShader.updateUniformData(this.gl,"u_world2pix",d([[J[0],J[1],0],[J[2],J[3],0],[J[4],J[5],1]])),this.arrangementShader.updateUniformData(this.gl,"u_pix2clip",d(ie)),this.arrangementShader.updateUniformData(this.gl,"u_bbox",It)}runArrangementShader(J){this.arrangementShader.bind(this.gl),this.arrangementShader.render(this.gl,[0,0,0,0],J)}updateInterpolationShader(J,_t,pt){this.interpolationShader.updateUniformData(this.gl,"u_power",[J]),_t&&this.interpolationShader.updateTextureData(this.gl,"u_dataTexture",[_t]),pt&&this.interpolationShader.updateUniformData(this.gl,"u_maxDistance",[pt])}runInterpolationShader(J){this.interpolationShader.bind(this.gl),this.interpolationShader.render(this.gl,[0,0,0,0],J),this.settings.storeInterpolatedPixelData&&(this.interpolatedValues=($=>{const J=$.getContext("webgl");if(!J)throw new Error("no context");const _t=J.getParameter(J.IMPLEMENTATION_COLOR_READ_FORMAT),pt=J.getParameter(J.IMPLEMENTATION_COLOR_READ_TYPE);let It;if(pt===J.UNSIGNED_BYTE)It=new Uint8Array(J.drawingBufferWidth*J.drawingBufferHeight*4);else if(pt===J.UNSIGNED_SHORT_5_6_5||pt===J.UNSIGNED_SHORT_4_4_4_4||pt===J.UNSIGNED_SHORT_5_5_5_1)It=new Uint16Array(J.drawingBufferWidth*J.drawingBufferHeight*4);else{if(pt!==J.FLOAT)throw new Error(`Did not understand pixel data type ${pt} for format ${_t}`);It=new Float32Array(J.drawingBufferWidth*J.drawingBufferHeight*4)}return J.readPixels(0,0,$.width,$.height,_t,pt,It),It})(this.webGlCanvas))}updateColorizationShader(J){this.colorizationShader.updateUniformData(this.gl,"u_smooth",[J?1:0])}runColorizationShader(J){this.colorizationShader.bind(this.gl),this.colorizationShader.render(this.gl,[0,0,0,0],J)}parseData(J,_t,pt){let It=J.getFeatures();It=J instanceof At.Z?J.getSource().getFeatures():J.getFeatures();const Jt=It.map(Mi=>Mi.getGeometry().getCoordinates()),ie=It.map(Mi=>parseFloat(Mi.getProperties()[_t])),ye=Ge(Jt),Pe=ye[2]-ye[0],Ie=ye[3]-ye[1];let Fe,je;Pe>Ie?(je=Pe-Ie,Fe=0):(je=0,Fe=Ie-Pe);const Xe=[ye[0]-pt,ye[1]-pt,ye[2]+Fe+pt,ye[3]+je+pt],ni=ie.reduce((Mi,gi)=>gi>Mi?gi:Mi,0);return{coords:Jt,values:ie,bboxDelta:Xe,maxVal:ni}}parseDataBbox(J,_t,pt,It,Jt){const ie=Ze(_t,pt).map(Xe=>{const ni=Te([Xe[0],Xe[1]],J);return[255*(ni[0]+1)/2,255*(ni[1]+1)/2,255*Xe[2]/It,255]}),ye=ie.length,Pe=(($,J)=>{const _t=Math.ceil(l($,2));return Math.pow(2,_t)})(ye);for(let Xe=0;Xe<Pe-ye;Xe++)ie.push([0,0,0,0]);return{observationsBbox:ie,maxEdgeLengthBbox:Jt/Math.max(J[2]-J[0],J[3]-J[1])}}}const Te=($,J)=>[($[0]-J[0])/(J[2]-J[0])*2-1,($[1]-J[1])/(J[3]-J[1])*2-1],ce=($,J,_t,pt,It)=>{const ie=new he($,"\n            precision mediump float;\n            attribute vec3 a_position;\n            attribute vec2 a_texturePosition;\n            varying vec2 v_position;\n            varying vec2 v_texturePosition;\n\n            void main() {\n                v_position = a_position.xy;\n                v_texturePosition = a_texturePosition;\n                gl_Position = vec4(a_position.xy, 0.0, 1.0);\n            }\n        ","\n            precision mediump float;\n            uniform float u_power;\n            uniform sampler2D u_dataTexture;\n            uniform int u_nrDataPoints;\n            uniform float u_maxValue;\n            uniform float u_maxDistance;\n            varying vec2 v_position;\n            varying vec2 v_texturePosition;\n\n            void main() {\n\n                float valSum = 0.0;\n                float wSum = 0.0;\n                float minD = 10000.0;\n                for (int i = 0; i < 10000; i++) {\n                    if (i > u_nrDataPoints) {\n                        break;\n                    }\n                    vec4 dataPoint = texture2D(u_dataTexture, vec2(float(i) / float(u_nrDataPoints), 0.5));\n                    if (dataPoint.w > 0.0) {  // texture is padded to next power of two with transparent 0-values.\n                        vec2 coords = dataPoint.xy * 2.0 - 1.0;  // transforming coords from [0, 1] to [-1, 1]\n                        float value = dataPoint.z * u_maxValue;  // transforming value from [0, 1] to [0, maxValue]\n\n                        float d = distance(v_position, coords);\n                        float w = 1.0 / pow(d, u_power);\n                        valSum += value * w;\n                        wSum += w;\n                        if (d < minD) {\n                            minD = d;\n                        }\n                    }\n                }\n                float interpolatedValue = valSum / wSum;\n                float alpha = 1.0;\n                if (minD > u_maxDistance) {\n                    alpha = 0.0;\n                }\n                vec4 color = vec4(interpolatedValue / u_maxValue, 0.0, 0.0, alpha);\n\n                gl_FragColor = color;\n            }\n        "),ye={vertices:[[-1,1,0],[-1,-1,0],[1,-1,0],[1,1,0]],texturePositions:[[0,1],[0,0],[1,0],[1,1]],vertexIndices:[[0,1,2],[0,2,3]]};return new $t(ie,[new Rt($,ie,"a_position",ye.vertices),new Rt($,ie,"a_texturePosition",ye.texturePositions)],[new de($,ie,"u_power","float",[pt]),new de($,ie,"u_nrDataPoints","int",[J.length]),new de($,ie,"u_maxValue","float",[_t]),new de($,ie,"u_maxDistance","float",[It])],[new gt($,ie,"u_dataTexture",[J],0)],new Ft($,ye.vertexIndices))},ee=($,J,_t,pt,It)=>{const ie=new he($,"\n            precision mediump float;\n            attribute vec2 a_position;\n            attribute vec2 a_textureCoord;\n            varying vec2 v_textureCoord;\n\n            void main() {\n                v_textureCoord = a_textureCoord;\n                gl_Position = vec4(a_position.xy, 0.0, 1.0);\n            }\n        ","\n            precision mediump float;\n            uniform float u_colorRampValues[15];\n            uniform vec3 u_colorRampColors[15];\n            uniform int u_nrColorRampValues;\n            uniform float u_maxValue;\n            uniform bool u_smooth;\n            uniform sampler2D u_valueTexture;\n            varying vec2 v_textureCoord;\n\n            vec3 valueToSmoothColor(in float value) {\n                if (value < u_colorRampValues[0]) {\n                    return u_colorRampColors[0];\n                }\n                for (int i = 1; i < 15; i++) {\n                    if (i > u_nrColorRampValues) {\n                        break;\n                    }\n                    if (value < u_colorRampValues[i]) {\n                        float alpha = (value - u_colorRampValues[i-1]) / (u_colorRampValues[i] - u_colorRampValues[i-1]);\n                        vec3 color = alpha * (u_colorRampColors[i] - u_colorRampColors[i-1]) + u_colorRampColors[i-1];\n                        return color;\n                    }\n                    if (i == u_nrColorRampValues) {\n                        return u_colorRampColors[i];\n                    }\n                }\n            }\n\n            vec3 valueToStepColor(in float value) {\n                for (int i = 0; i < 15; i++) {\n                    if (i > u_nrColorRampValues) {\n                        break;\n                    }\n                    if (value < u_colorRampValues[i]) {\n                        return u_colorRampColors[i];\n                    }\n                    if (i == u_nrColorRampValues) {\n                        return u_colorRampColors[i];\n                    }\n                }\n            }\n\n            void main() {\n                vec4 pixelData = texture2D(u_valueTexture, v_textureCoord);\n                float val = pixelData.r * u_maxValue;\n                float alpha = pixelData.w;\n                vec3 rgb = vec3(0.0, 0.0, 0.0);\n                if (alpha > 0.01) {\n                    if (u_smooth) {\n                        rgb = valueToSmoothColor(val);\n                    } else {\n                        rgb = valueToStepColor(val);\n                    }\n                }\n                gl_FragColor = vec4(rgb.x / 255.0, rgb.y / 255.0, rgb.z / 255.0, alpha);\n            }\n        ");return new $t(ie,[new Rt($,ie,"a_position",q(2,2).vertices),new Rt($,ie,"a_textureCoord",q(2,2).texturePositions)],[new de($,ie,"u_colorRampValues","float[]",J.map(Pe=>Pe.val)),new de($,ie,"u_colorRampColors","vec3[]",d(J.map(Pe=>Pe.rgb))),new de($,ie,"u_nrColorRampValues","int",[J.length]),new de($,ie,"u_maxValue","float",[_t]),new de($,ie,"u_smooth","bool",[pt?1:0])],[new Re($,ie,"u_valueTexture",It.fbo.texture,0)])},We=($,J,_t,pt,It)=>{const Jt=new he($,"\n            precision mediump float;\n            attribute vec3 a_pos;\n            attribute vec2 a_posTexture;\n            uniform mat3 u_world2pix;\n            uniform mat3 u_pix2clip;\n            uniform vec4 u_bbox;\n            varying vec2 v_posTexture;\n\n            vec2 clipBbx2worldCoords(vec2 clipCoords, vec4 bbox) {\n                float xPerct = ( clipCoords.x + 1.0 ) / 2.0;\n                float yPerct = ( clipCoords.y + 1.0 ) / 2.0;\n                float xWorld = xPerct * (bbox.z - bbox.x) + bbox.x;\n                float yWorld = yPerct * (bbox.w - bbox.y) + bbox.y;\n                return vec2(xWorld, yWorld);\n            }\n\n            void main() {\n                v_posTexture = a_posTexture;\n                vec2 worldPos = clipBbx2worldCoords(a_pos.xy, u_bbox);\n                vec3 clipPos = u_pix2clip * u_world2pix * vec3(worldPos.xy, 1.0);\n                gl_Position = vec4(clipPos.xy, 0.0, 1.0);\n            }\n        ","\n            precision mediump float;\n            uniform sampler2D u_texture;\n            varying vec2 v_posTexture;\n\n            void main() {\n                gl_FragColor = texture2D(u_texture, v_posTexture);\n            }\n        ");return new $t(Jt,[new Rt($,Jt,"a_pos",q(2,2).vertices),new Rt($,Jt,"a_posTexture",q(2,2).texturePositions)],[new de($,Jt,"u_world2pix","mat3",d(J)),new de($,Jt,"u_pix2clip","mat3",d(_t)),new de($,Jt,"u_bbox","vec4",pt)],[new Re($,Jt,"u_texture",It.fbo.texture,0)])},Ge=$=>{const J=$.map(ye=>ye[0]),_t=$.map(ye=>ye[1]),pt=Math.min(...J),It=Math.max(...J);return[pt,Math.min(..._t),It,Math.max(..._t)]},Ze=($,J)=>{const _t=[];for(let pt=0;pt<$.length;pt++)_t.push($[pt].concat(J[pt]));return _t}},1677:(jt,ht,a)=>{"use strict";a.d(ht,{Z:()=>k});const W={1:"The view center is not defined",2:"The view resolution is not defined",3:"The view rotation is not defined",4:"`image` and `src` cannot be provided at the same time",5:"`imgSize` must be set when `image` is provided",7:"`format` must be set when `url` is set",8:"Unknown `serverType` configured",9:"`url` must be configured or set using `#setUrl()`",10:"The default `geometryFunction` can only handle `Point` geometries",11:"`options.featureTypes` must be an Array",12:"`options.geometryName` must also be provided when `options.bbox` is set",13:"Invalid corner",14:"Invalid color",15:"Tried to get a value for a key that does not exist in the cache",16:"Tried to set a value for a key that is used already",17:"`resolutions` must be sorted in descending order",18:"Either `origin` or `origins` must be configured, never both",19:"Number of `tileSizes` and `resolutions` must be equal",20:"Number of `origins` and `resolutions` must be equal",22:"Either `tileSize` or `tileSizes` must be configured, never both",24:"Invalid extent or geometry provided as `geometry`",25:"Cannot fit empty extent provided as `geometry`",26:"Features must have an id set",27:"Features must have an id set",28:'`renderMode` must be `"hybrid"` or `"vector"`',30:"The passed `feature` was already added to the source",31:"Tried to enqueue an `element` that was already added to the queue",32:"Transformation matrix cannot be inverted",33:"Invalid units",34:"Invalid geometry layout",36:"Unknown SRS type",37:"Unknown geometry type found",38:"`styleMapValue` has an unknown type",39:"Unknown geometry type",40:"Expected `feature` to have a geometry",41:"Expected an `ol/style/Style` or an array of `ol/style/Style.js`",42:"Question unknown, the answer is 42",43:"Expected `layers` to be an array or a `Collection`",47:"Expected `controls` to be an array or an `ol/Collection`",48:"Expected `interactions` to be an array or an `ol/Collection`",49:"Expected `overlays` to be an array or an `ol/Collection`",50:"`options.featureTypes` should be an Array",51:"Either `url` or `tileJSON` options must be provided",52:"Unknown `serverType` configured",53:"Unknown `tierSizeCalculation` configured",55:"The {-y} placeholder requires a tile grid with extent",56:"mapBrowserEvent must originate from a pointer event",57:"At least 2 conditions are required",59:"Invalid command found in the PBF",60:"Missing or invalid `size`",61:"Cannot determine IIIF Image API version from provided image information JSON",62:"A `WebGLArrayBuffer` must either be of type `ELEMENT_ARRAY_BUFFER` or `ARRAY_BUFFER`",64:"Layer opacity must be a number",66:"`forEachFeatureAtCoordinate` cannot be used on a WebGL layer if the hit detection logic has not been enabled. This is done by providing adequate shaders using the `hitVertexShader` and `hitFragmentShader` properties of `WebGLPointsLayerRenderer`",67:"A layer can only be added to the map once. Use either `layer.setMap()` or `map.addLayer()`, not both",68:"A VectorTile source can only be rendered if it has a projection compatible with the view projection",69:"`width` or `height` cannot be provided together with `scale`"};class F extends Error{constructor(Z){const b=W[Z];super(b),this.code=Z,this.name="AssertionError",this.message=b}}const k=F},6108:(jt,ht,a)=>{"use strict";a.d(ht,{Z:()=>P});var W=a(1677),F=a(7300),k=a(1892),G=a(8802);class b extends G.ZP{constructor(f,u,c){super(f),this.element=u,this.index=c}}const P=class S extends F.Z{constructor(f,u){if(super(),this.unique_=!!(u=u||{}).unique,this.array_=f||[],this.unique_)for(let c=0,r=this.array_.length;c<r;++c)this.assertUnique_(this.array_[c],c);this.updateLength_()}clear(){for(;this.getLength()>0;)this.pop()}extend(f){for(let u=0,c=f.length;u<c;++u)this.push(f[u]);return this}forEach(f){const u=this.array_;for(let c=0,r=u.length;c<r;++c)f(u[c],c,u)}getArray(){return this.array_}item(f){return this.array_[f]}getLength(){return this.get("length")}insertAt(f,u){if(f<0||f>this.getLength())throw new Error("Index out of bounds: "+f);this.unique_&&this.assertUnique_(u),this.array_.splice(f,0,u),this.updateLength_(),this.dispatchEvent(new b(k.Z.ADD,u,f))}pop(){return this.removeAt(this.getLength()-1)}push(f){this.unique_&&this.assertUnique_(f);const u=this.getLength();return this.insertAt(u,f),this.getLength()}remove(f){const u=this.array_;for(let c=0,r=u.length;c<r;++c)if(u[c]===f)return this.removeAt(c)}removeAt(f){if(f<0||f>=this.getLength())return;const u=this.array_[f];return this.array_.splice(f,1),this.updateLength_(),this.dispatchEvent(new b(k.Z.REMOVE,u,f)),u}setAt(f,u){if(f>=this.getLength())return void this.insertAt(f,u);if(f<0)throw new Error("Index out of bounds: "+f);this.unique_&&this.assertUnique_(u,f);const r=this.array_[f];this.array_[f]=u,this.dispatchEvent(new b(k.Z.REMOVE,r,f)),this.dispatchEvent(new b(k.Z.ADD,u,f))}updateLength_(){this.set("length",this.array_.length)}assertUnique_(f,u){for(let c=0,r=this.array_.length;c<r;++c)if(this.array_[c]===f&&c!==u)throw new W.Z(58)}}},1892:(jt,ht,a)=>{"use strict";a.d(ht,{Z:()=>W});const W={ADD:"add",REMOVE:"remove"}},5337:(jt,ht,a)=>{"use strict";a.d(ht,{Z:()=>F});const F=class W{constructor(){this.disposed=!1}dispose(){this.disposed||(this.disposed=!0,this.disposeInternal())}disposeInternal(){}}},6626:(jt,ht,a)=>{"use strict";a.d(ht,{Z:()=>S});var W=a(7300),F=a(2431),k=a(9219),G=a(7847);class Z extends W.Z{constructor(v){super(),this.id_=void 0,this.geometryName_="geometry",this.style_=null,this.styleFunction_=void 0,this.geometryChangeKey_=null,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),v&&("function"==typeof v.getSimplifiedGeometry?this.setGeometry(v):this.setProperties(v))}clone(){const v=new Z(this.hasProperties()?this.getProperties():null);v.setGeometryName(this.getGeometryName());const f=this.getGeometry();f&&v.setGeometry(f.clone());const u=this.getStyle();return u&&v.setStyle(u),v}getGeometry(){return this.get(this.geometryName_)}getId(){return this.id_}getGeometryName(){return this.geometryName_}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}handleGeometryChange_(){this.changed()}handleGeometryChanged_(){this.geometryChangeKey_&&((0,G.bN)(this.geometryChangeKey_),this.geometryChangeKey_=null);const v=this.getGeometry();v&&(this.geometryChangeKey_=(0,G.oL)(v,F.Z.CHANGE,this.handleGeometryChange_,this)),this.changed()}setGeometry(v){this.set(this.geometryName_,v)}setStyle(v){this.style_=v,this.styleFunction_=v?function b(P){if("function"==typeof P)return P;let v;return Array.isArray(P)?v=P:((0,k.h)("function"==typeof P.getZIndex,41),v=[P]),function(){return v}}(v):void 0,this.changed()}setId(v){this.id_=v,this.changed()}setGeometryName(v){this.removeChangeListener(this.geometryName_,this.handleGeometryChanged_),this.geometryName_=v,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),this.handleGeometryChanged_()}}const S=Z},4499:(jt,ht,a)=>{"use strict";a.d(ht,{K:()=>P,Z:()=>v});var W=a(2431),F=a(6908),k=a(4847),G=a(3233),Z=a(1316),b=a(7847);function P(f,u,c){const r=f;let d=!0,e=!1,l=!1;const _=[(0,b.Vx)(r,W.Z.LOAD,function(){l=!0,e||u()})];return r.src&&G.Tp?(e=!0,r.decode().then(function(){d&&u()}).catch(function(n){d&&(l?u():c())})):_.push((0,b.Vx)(r,W.Z.ERROR,c)),function(){d=!1,_.forEach(b.bN)}}const v=class S extends F.Z{constructor(u,c,r,d,e,l,_){super(u,c,r,k.Z.IDLE),this.src_=d,this.image_=new Image,null!==e&&(this.image_.crossOrigin=e),this.context_=_,this.unlisten_=null,this.state=k.Z.IDLE,this.imageLoadFunction_=l}getImage(){if(this.state==k.Z.LOADED&&this.context_&&!(this.image_ instanceof HTMLCanvasElement)){const u=this.context_.canvas;u.width=this.image_.width,u.height=this.image_.height,this.context_.drawImage(this.image_,0,0),this.image_=this.context_.canvas}return this.image_}handleImageError_(){this.state=k.Z.ERROR,this.unlistenImage_(),this.changed()}handleImageLoad_(){void 0===this.resolution&&(this.resolution=(0,Z.Cr)(this.extent)/this.image_.height),this.state=k.Z.LOADED,this.unlistenImage_(),this.changed()}load(){(this.state==k.Z.IDLE||this.state==k.Z.ERROR)&&(this.state=k.Z.LOADING,this.changed(),this.imageLoadFunction_(this,this.src_),this.unlisten_=P(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))}setImage(u){this.image_=u,this.resolution=(0,Z.Cr)(this.extent)/this.image_.height}unlistenImage_(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}}},6908:(jt,ht,a)=>{"use strict";a.d(ht,{Z:()=>Z});var W=a(9608),F=a(2431),k=a(3089);const Z=class G extends W.Z{constructor(S,P,v,f){super(),this.extent=S,this.pixelRatio_=v,this.resolution=P,this.state=f}changed(){this.dispatchEvent(F.Z.CHANGE)}getExtent(){return this.extent}getImage(){return(0,k.O3)()}getPixelRatio(){return this.pixelRatio_}getResolution(){return this.resolution}getState(){return this.state}load(){(0,k.O3)()}}},6696:(jt,ht,a)=>{"use strict";a.d(ht,{Z:()=>G});var W=a(6908),F=a(4847);const G=class k extends W.Z{constructor(b,S,P,v,f){super(b,S,P,void 0!==f?F.Z.IDLE:F.Z.LOADED),this.loader_=void 0!==f?f:null,this.canvas_=v,this.error_=null}getError(){return this.error_}handleLoad_(b){b?(this.error_=b,this.state=F.Z.ERROR):this.state=F.Z.LOADED,this.changed()}load(){this.state==F.Z.IDLE&&(this.state=F.Z.LOADING,this.changed(),this.loader_(this.handleLoad_.bind(this)))}getImage(){return this.canvas_}}},4847:(jt,ht,a)=>{"use strict";a.d(ht,{Z:()=>W});const W={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4}},3968:(jt,ht,a)=>{"use strict";a.d(ht,{Z:()=>S});var W=a(6381),F=a(5399),k=a(4211),G=a(4499);const S=class Z extends W.Z{constructor(v,f,u,c,r,d){super(v,f,d),this.crossOrigin_=c,this.src_=u,this.key=u,this.image_=new Image,null!==c&&(this.image_.crossOrigin=c),this.unlisten_=null,this.tileLoadFunction_=r}getImage(){return this.image_}setImage(v){this.image_=v,this.state=F.Z.LOADED,this.unlistenImage_(),this.changed()}handleImageError_(){this.state=F.Z.ERROR,this.unlistenImage_(),this.image_=function b(){const P=(0,k.E4)(1,1);return P.fillStyle="rgba(0,0,0,0)",P.fillRect(0,0,1,1),P.canvas}(),this.changed()}handleImageLoad_(){const v=this.image_;this.state=v.naturalWidth&&v.naturalHeight?F.Z.LOADED:F.Z.EMPTY,this.unlistenImage_(),this.changed()}load(){this.state==F.Z.ERROR&&(this.state=F.Z.IDLE,this.image_=new Image,null!==this.crossOrigin_&&(this.image_.crossOrigin=this.crossOrigin_)),this.state==F.Z.IDLE&&(this.state=F.Z.LOADING,this.changed(),this.tileLoadFunction_(this,this.src_),this.unlisten_=(0,G.K)(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))}unlistenImage_(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}}},4792:(jt,ht,a)=>{"use strict";a.d(ht,{Z:()=>ge});var W=a(7300),F=a(6108),k=a(1892),G=a(5337),Z=a(6077),b=a(3089),S=a(6412),P=a(1316),v=a(8823),f=a(5209),u=a(1242);function r($t,ft){v.c.expire()}const d=class c extends G.Z{constructor(ft){super(),this.map_=ft}dispatchRenderEvent(ft,Pt){(0,b.O3)()}calculateMatrices2D(ft){const Pt=ft.viewState,Nt=ft.coordinateToPixelTransform,zt=ft.pixelToCoordinateTransform;(0,S.qC)(Nt,ft.size[0]/2,ft.size[1]/2,1/Pt.resolution,-1/Pt.resolution,-Pt.rotation,-Pt.center[0],-Pt.center[1]),(0,S.nb)(zt,Nt)}forEachFeatureAtCoordinate(ft,Pt,Nt,zt,Bt,ue,ve,Ee){let Mt;const rt=Pt.viewState;function q(Ht,se,Te,ce){return Bt.call(ue,se,Ht?Te:null,ce)}const M=rt.projection,K=(0,u.Cf)(ft.slice(),M),et=[[0,0]];if(M.canWrapX()&&zt){const Ht=M.getExtent(),se=(0,P.dz)(Ht);et.push([-se,0],[se,0])}const it=Pt.layerStatesArray,yt=it.length,Et=[],At=[];for(let Ht=0;Ht<et.length;Ht++)for(let se=yt-1;se>=0;--se){const Te=it[se],ce=Te.layer;if(ce.hasRenderer()&&(0,f.j)(Te,rt)&&ve.call(Ee,ce)){const ee=ce.getRenderer(),We=ce.getSource();if(ee&&We){const Ge=We.getWrapX()?K:ft,Ze=q.bind(null,Te.managed);At[0]=Ge[0]+et[Ht][0],At[1]=Ge[1]+et[Ht][1],Mt=ee.forEachFeatureAtCoordinate(At,Pt,Nt,Ze,Et)}if(Mt)return Mt}}if(0===Et.length)return;const Wt=1/Et.length;return Et.forEach((Ht,se)=>Ht.distanceSq+=se*Wt),Et.sort((Ht,se)=>Ht.distanceSq-se.distanceSq),Et.some(Ht=>Mt=Ht.callback(Ht.feature,Ht.layer,Ht.geometry)),Mt}hasFeatureAtCoordinate(ft,Pt,Nt,zt,Bt,ue){return void 0!==this.forEachFeatureAtCoordinate(ft,Pt,Nt,zt,Z.uX,this,Bt,ue)}getMap(){return this.map_}renderFrame(ft){(0,b.O3)()}flushDeclutterItems(ft){}scheduleExpireIconCache(ft){v.c.canExpireCache()&&ft.postRenderFunctions.push(r)}};var e=a(1858),l=a(891),_=a(8934),n=a(4118),g=a(6380),m=a(7847),y=a(4211);const O=class I extends d{constructor(ft){super(ft),this.fontChangeListenerKey_=(0,m.oL)(g.sG,e.Z.PROPERTYCHANGE,ft.redrawText.bind(ft)),this.element_=document.createElement("div");const Pt=this.element_.style;Pt.position="absolute",Pt.width="100%",Pt.height="100%",Pt.zIndex="0",this.element_.className=n.XV+" ol-layers";const Nt=ft.getViewport();Nt.insertBefore(this.element_,Nt.firstChild||null),this.children_=[],this.renderedVisible_=!0,this.declutterLayers_=[]}dispatchRenderEvent(ft,Pt){const Nt=this.getMap();if(Nt.hasListener(ft)){const zt=new l.Z(ft,void 0,Pt);Nt.dispatchEvent(zt)}}disposeInternal(){(0,m.bN)(this.fontChangeListenerKey_),this.element_.parentNode.removeChild(this.element_),super.disposeInternal()}renderFrame(ft){if(!ft)return void(this.renderedVisible_&&(this.element_.style.display="none",this.renderedVisible_=!1));this.calculateMatrices2D(ft),this.dispatchRenderEvent(_.Z.PRECOMPOSE,ft);const Pt=ft.layerStatesArray.sort(function(ue,ve){return ue.zIndex-ve.zIndex}),Nt=ft.viewState;this.children_.length=0;const zt=this.declutterLayers_;zt.length=0;let Bt=null;for(let ue=0,ve=Pt.length;ue<ve;++ue){const Ee=Pt[ue];ft.layerIndex=ue;const Mt=Ee.layer,rt=Mt.getSourceState();if(!(0,f.j)(Ee,Nt)||"ready"!=rt&&"undefined"!=rt){Mt.unrender();continue}const q=Mt.render(ft,Bt);q&&(q!==Bt&&(this.children_.push(q),Bt=q),"getDeclutter"in Mt&&zt.push(Mt))}this.flushDeclutterItems(ft),(0,y.hF)(this.element_,this.children_),this.dispatchRenderEvent(_.Z.POSTCOMPOSE,ft),this.renderedVisible_||(this.element_.style.display="",this.renderedVisible_=!0),this.scheduleExpireIconCache(ft)}flushDeclutterItems(ft){const Pt=this.declutterLayers_;for(let Nt=Pt.length-1;Nt>=0;--Nt)Pt[Nt].renderDeclutter(ft);Pt.length=0}};var E=a(2431),R=a(1590),N=a(8802);const st=class z extends N.ZP{constructor(ft,Pt,Nt){super(ft),this.map=Pt,this.frameState=void 0!==Nt?Nt:null}},L=class A extends st{constructor(ft,Pt,Nt,zt,Bt,ue){super(ft,Pt,Bt),this.originalEvent=Nt,this.pixel_=null,this.coordinate_=null,this.dragging=void 0!==zt&&zt,this.activePointers=ue}get pixel(){return this.pixel_||(this.pixel_=this.map.getEventPixel(this.originalEvent)),this.pixel_}set pixel(ft){this.pixel_=ft}get coordinate(){return this.coordinate_||(this.coordinate_=this.map.getCoordinateFromPixel(this.pixel)),this.coordinate_}set coordinate(ft){this.coordinate_=ft}preventDefault(){super.preventDefault(),"preventDefault"in this.originalEvent&&this.originalEvent.preventDefault()}stopPropagation(){super.stopPropagation(),"stopPropagation"in this.originalEvent&&this.originalEvent.stopPropagation()}};var w=a(6990),x=a(4256),C=a(9608),D=a(3233);const nt=class Y extends C.Z{constructor(ft,Pt){super(ft),this.map_=ft,this.emulateClicks_=!1,this.dragging_=!1,this.dragListenerKeys_=[],this.moveTolerance_=void 0===Pt?1:Pt,this.down_=null;const Nt=this.map_.getViewport();this.activePointers_=[],this.trackedTouches_={},this.element_=Nt,this.pointerdownListenerKey_=(0,m.oL)(Nt,x.Z.POINTERDOWN,this.handlePointerDown_,this),this.relayedListenerKey_=(0,m.oL)(Nt,x.Z.POINTERMOVE,this.relayMoveEvent_,this),this.boundHandleTouchMove_=this.handleTouchMove_.bind(this),this.element_.addEventListener(E.Z.TOUCHMOVE,this.boundHandleTouchMove_,!!D.bM&&{passive:!1})}emulateClick_(ft){let Pt=new L(w.Z.CLICK,this.map_,ft);this.dispatchEvent(Pt),void 0!==this.clickTimeoutId_?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=void 0,Pt=new L(w.Z.DBLCLICK,this.map_,ft),this.dispatchEvent(Pt)):this.clickTimeoutId_=setTimeout(()=>{this.clickTimeoutId_=void 0;const Nt=new L(w.Z.SINGLECLICK,this.map_,ft);this.dispatchEvent(Nt)},250)}updateActivePointers_(ft){const Pt=ft,Nt=Pt.pointerId;if(Pt.type==w.Z.POINTERUP||Pt.type==w.Z.POINTERCANCEL){delete this.trackedTouches_[Nt];for(const zt in this.trackedTouches_)if(this.trackedTouches_[zt].target!==Pt.target){delete this.trackedTouches_[zt];break}}else(Pt.type==w.Z.POINTERDOWN||Pt.type==w.Z.POINTERMOVE)&&(this.trackedTouches_[Nt]=Pt);this.activePointers_=Object.values(this.trackedTouches_)}handlePointerUp_(ft){this.updateActivePointers_(ft);const Pt=new L(w.Z.POINTERUP,this.map_,ft,void 0,void 0,this.activePointers_);this.dispatchEvent(Pt),this.emulateClicks_&&!Pt.defaultPrevented&&!this.dragging_&&this.isMouseActionButton_(ft)&&this.emulateClick_(this.down_),0===this.activePointers_.length&&(this.dragListenerKeys_.forEach(m.bN),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null)}isMouseActionButton_(ft){return 0===ft.button}handlePointerDown_(ft){this.emulateClicks_=0===this.activePointers_.length,this.updateActivePointers_(ft);const Pt=new L(w.Z.POINTERDOWN,this.map_,ft,void 0,void 0,this.activePointers_);if(this.dispatchEvent(Pt),this.down_=new PointerEvent(ft.type,ft),Object.defineProperty(this.down_,"target",{writable:!1,value:ft.target}),0===this.dragListenerKeys_.length){const Nt=this.map_.getOwnerDocument();this.dragListenerKeys_.push((0,m.oL)(Nt,w.Z.POINTERMOVE,this.handlePointerMove_,this),(0,m.oL)(Nt,w.Z.POINTERUP,this.handlePointerUp_,this),(0,m.oL)(this.element_,w.Z.POINTERCANCEL,this.handlePointerUp_,this)),this.element_.getRootNode&&this.element_.getRootNode()!==Nt&&this.dragListenerKeys_.push((0,m.oL)(this.element_.getRootNode(),w.Z.POINTERUP,this.handlePointerUp_,this))}}handlePointerMove_(ft){if(this.isMoving_(ft)){this.updateActivePointers_(ft),this.dragging_=!0;const Pt=new L(w.Z.POINTERDRAG,this.map_,ft,this.dragging_,void 0,this.activePointers_);this.dispatchEvent(Pt)}}relayMoveEvent_(ft){this.originalPointerMoveEvent_=ft;const Pt=!(!this.down_||!this.isMoving_(ft));this.dispatchEvent(new L(w.Z.POINTERMOVE,this.map_,ft,Pt))}handleTouchMove_(ft){const Pt=this.originalPointerMoveEvent_;(!Pt||Pt.defaultPrevented)&&("boolean"!=typeof ft.cancelable||!0===ft.cancelable)&&ft.preventDefault()}isMoving_(ft){return this.dragging_||Math.abs(ft.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(ft.clientY-this.down_.clientY)>this.moveTolerance_}disposeInternal(){this.relayedListenerKey_&&((0,m.bN)(this.relayedListenerKey_),this.relayedListenerKey_=null),this.element_.removeEventListener(E.Z.TOUCHMOVE,this.boundHandleTouchMove_),this.pointerdownListenerKey_&&((0,m.bN)(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(m.bN),this.dragListenerKeys_.length=0,this.element_=null,super.disposeInternal()}};var V=a(5465),at=a(8963),ut=a(857),Ct=a(6715),vt=a(3701),St=a(9219),bt=a(9854),Gt=a(8861),Xt=a(8284),Vt=a(9813),_e=a(9363),he=a(7021),de=a(7298),Re=a(6518);function gt($t){$t instanceof f.Z?$t.setMapInternal(null):$t instanceof R.Z&&$t.getLayers().forEach(gt)}function Rt($t,ft){if($t instanceof f.Z)$t.setMapInternal(ft);else if($t instanceof R.Z){const Pt=$t.getLayers().getArray();for(let Nt=0,zt=Pt.length;Nt<zt;++Nt)Rt(Pt[Nt],ft)}}const ge=class Ft extends W.Z{constructor(ft){super();const Pt=function Yt($t){let ft=null;void 0!==$t.keyboardEventTarget&&(ft="string"==typeof $t.keyboardEventTarget?document.getElementById($t.keyboardEventTarget):$t.keyboardEventTarget);const Pt={},Nt=$t.layers&&"function"==typeof $t.layers.getLayers?$t.layers:new R.Z({layers:$t.layers});let zt,Bt,ue;return Pt[at.Z.LAYERGROUP]=Nt,Pt[at.Z.TARGET]=$t.target,Pt[at.Z.VIEW]=$t.view instanceof Ct.ZP?$t.view:new Ct.ZP,void 0!==$t.controls&&(Array.isArray($t.controls)?zt=new F.Z($t.controls.slice()):((0,St.h)("function"==typeof $t.controls.getArray,47),zt=$t.controls)),void 0!==$t.interactions&&(Array.isArray($t.interactions)?Bt=new F.Z($t.interactions.slice()):((0,St.h)("function"==typeof $t.interactions.getArray,48),Bt=$t.interactions)),void 0!==$t.overlays?Array.isArray($t.overlays)?ue=new F.Z($t.overlays.slice()):((0,St.h)("function"==typeof $t.overlays.getArray,49),ue=$t.overlays):ue=new F.Z,{controls:zt,interactions:Bt,keyboardEventTarget:ft,overlays:ue,values:Pt}}(ft=ft||{});this.loaded_=!0,this.boundHandleBrowserEvent_=this.handleBrowserEvent.bind(this),this.maxTilesLoading_=void 0!==ft.maxTilesLoading?ft.maxTilesLoading:16,this.pixelRatio_=void 0!==ft.pixelRatio?ft.pixelRatio:D.MP,this.animationDelay_=this.animationDelay_.bind(this),this.coordinateToPixelTransform_=(0,S.Ue)(),this.pixelToCoordinateTransform_=(0,S.Ue)(),this.frameIndex_=0,this.frameState_=null,this.previousExtent_=null,this.viewPropertyListenerKey_=null,this.viewChangeListenerKey_=null,this.layerGroupPropertyListenerKeys_=null,this.viewport_=document.createElement("div"),this.viewport_.className="ol-viewport"+("ontouchstart"in window?" ol-touch":""),this.viewport_.style.position="relative",this.viewport_.style.overflow="hidden",this.viewport_.style.width="100%",this.viewport_.style.height="100%",this.overlayContainer_=document.createElement("div"),this.overlayContainer_.style.position="absolute",this.overlayContainer_.style.zIndex="0",this.overlayContainer_.style.width="100%",this.overlayContainer_.style.height="100%",this.overlayContainer_.style.pointerEvents="none",this.overlayContainer_.className="ol-overlaycontainer",this.viewport_.appendChild(this.overlayContainer_),this.overlayContainerStopEvent_=document.createElement("div"),this.overlayContainerStopEvent_.style.position="absolute",this.overlayContainerStopEvent_.style.zIndex="0",this.overlayContainerStopEvent_.style.width="100%",this.overlayContainerStopEvent_.style.height="100%",this.overlayContainerStopEvent_.style.pointerEvents="none",this.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent",this.viewport_.appendChild(this.overlayContainerStopEvent_),this.mapBrowserEventHandler_=null,this.moveTolerance_=ft.moveTolerance,this.keyboardEventTarget_=Pt.keyboardEventTarget,this.targetChangeHandlerKeys_=null,this.targetElement_=null,this.resizeObserver_=new ResizeObserver(()=>this.updateSize()),this.controls=Pt.controls||function te($t){$t=$t||{};const ft=new F.Z;return(void 0===$t.zoom||$t.zoom)&&ft.push(new Xt.Z($t.zoomOptions)),(void 0===$t.rotate||$t.rotate)&&ft.push(new Gt.Z($t.rotateOptions)),(void 0===$t.attribution||$t.attribution)&&ft.push(new bt.Z($t.attributionOptions)),ft}(),this.interactions=Pt.interactions||(0,Vt.c)({onFocusOnly:!0}),this.overlays_=Pt.overlays,this.overlayIdIndex_={},this.renderer_=null,this.postRenderFunctions_=[],this.tileQueue_=new ut.Z(this.getTilePriority.bind(this),this.handleTileChange_.bind(this)),this.addChangeListener(at.Z.LAYERGROUP,this.handleLayerGroupChanged_),this.addChangeListener(at.Z.VIEW,this.handleViewChanged_),this.addChangeListener(at.Z.SIZE,this.handleSizeChanged_),this.addChangeListener(at.Z.TARGET,this.handleTargetChanged_),this.setProperties(Pt.values);const Nt=this;ft.view&&!(ft.view instanceof Ct.ZP)&&ft.view.then(function(zt){Nt.setView(new Ct.ZP(zt))}),this.controls.addEventListener(k.Z.ADD,zt=>{zt.element.setMap(this)}),this.controls.addEventListener(k.Z.REMOVE,zt=>{zt.element.setMap(null)}),this.interactions.addEventListener(k.Z.ADD,zt=>{zt.element.setMap(this)}),this.interactions.addEventListener(k.Z.REMOVE,zt=>{zt.element.setMap(null)}),this.overlays_.addEventListener(k.Z.ADD,zt=>{this.addOverlayInternal_(zt.element)}),this.overlays_.addEventListener(k.Z.REMOVE,zt=>{const Bt=zt.element.getId();void 0!==Bt&&delete this.overlayIdIndex_[Bt.toString()],zt.element.setMap(null)}),this.controls.forEach(zt=>{zt.setMap(this)}),this.interactions.forEach(zt=>{zt.setMap(this)}),this.overlays_.forEach(this.addOverlayInternal_.bind(this))}addControl(ft){this.getControls().push(ft)}addInteraction(ft){this.getInteractions().push(ft)}addLayer(ft){this.getLayerGroup().getLayers().push(ft)}handleLayerAdd_(ft){Rt(ft.layer,this)}addOverlay(ft){this.getOverlays().push(ft)}addOverlayInternal_(ft){const Pt=ft.getId();void 0!==Pt&&(this.overlayIdIndex_[Pt.toString()]=ft),ft.setMap(this)}disposeInternal(){this.controls.clear(),this.interactions.clear(),this.overlays_.clear(),this.resizeObserver_.disconnect(),this.setTarget(null),super.disposeInternal()}forEachFeatureAtPixel(ft,Pt,Nt){if(!this.frameState_||!this.renderer_)return;const zt=this.getCoordinateFromPixelInternal(ft);return this.renderer_.forEachFeatureAtCoordinate(zt,this.frameState_,void 0!==(Nt=void 0!==Nt?Nt:{}).hitTolerance?Nt.hitTolerance:0,!1!==Nt.checkWrapped,Pt,null,void 0!==Nt.layerFilter?Nt.layerFilter:Z.uX,null)}getFeaturesAtPixel(ft,Pt){const Nt=[];return this.forEachFeatureAtPixel(ft,function(zt){Nt.push(zt)},Pt),Nt}getAllLayers(){const ft=[];return function Pt(Nt){Nt.forEach(function(zt){zt instanceof R.Z?Pt(zt.getLayers()):ft.push(zt)})}(this.getLayers()),ft}hasFeatureAtPixel(ft,Pt){if(!this.frameState_||!this.renderer_)return!1;const Nt=this.getCoordinateFromPixelInternal(ft);return this.renderer_.hasFeatureAtCoordinate(Nt,this.frameState_,void 0!==(Pt=void 0!==Pt?Pt:{}).hitTolerance?Pt.hitTolerance:0,!1!==Pt.checkWrapped,void 0!==Pt.layerFilter?Pt.layerFilter:Z.uX,null)}getEventCoordinate(ft){return this.getCoordinateFromPixel(this.getEventPixel(ft))}getEventCoordinateInternal(ft){return this.getCoordinateFromPixelInternal(this.getEventPixel(ft))}getEventPixel(ft){const Nt=this.viewport_.getBoundingClientRect(),zt=this.getSize(),ve="changedTouches"in ft?ft.changedTouches[0]:ft;return[(ve.clientX-Nt.left)/(Nt.width/zt[0]),(ve.clientY-Nt.top)/(Nt.height/zt[1])]}getTarget(){return this.get(at.Z.TARGET)}getTargetElement(){return this.targetElement_}getCoordinateFromPixel(ft){return(0,he.lO)(this.getCoordinateFromPixelInternal(ft),this.getView().getProjection())}getCoordinateFromPixelInternal(ft){const Pt=this.frameState_;return Pt?(0,S.nn)(Pt.pixelToCoordinateTransform,ft.slice()):null}getControls(){return this.controls}getOverlays(){return this.overlays_}getOverlayById(ft){const Pt=this.overlayIdIndex_[ft.toString()];return void 0!==Pt?Pt:null}getInteractions(){return this.interactions}getLayerGroup(){return this.get(at.Z.LAYERGROUP)}setLayers(ft){const Pt=this.getLayerGroup();if(ft instanceof F.Z)return void Pt.setLayers(ft);const Nt=Pt.getLayers();Nt.clear(),Nt.extend(ft)}getLayers(){return this.getLayerGroup().getLayers()}getLoadingOrNotReady(){const ft=this.getLayerGroup().getLayerStatesArray();for(let Pt=0,Nt=ft.length;Pt<Nt;++Pt){const zt=ft[Pt];if(!zt.visible)continue;const Bt=zt.layer.getRenderer();if(Bt&&!Bt.ready)return!0;const ue=zt.layer.getSource();if(ue&&ue.loading)return!0}return!1}getPixelFromCoordinate(ft){const Pt=(0,he.Vs)(ft,this.getView().getProjection());return this.getPixelFromCoordinateInternal(Pt)}getPixelFromCoordinateInternal(ft){const Pt=this.frameState_;return Pt?(0,S.nn)(Pt.coordinateToPixelTransform,ft.slice(0,2)):null}getRenderer(){return this.renderer_}getSize(){return this.get(at.Z.SIZE)}getView(){return this.get(at.Z.VIEW)}getViewport(){return this.viewport_}getOverlayContainer(){return this.overlayContainer_}getOverlayContainerStopEvent(){return this.overlayContainerStopEvent_}getOwnerDocument(){const ft=this.getTargetElement();return ft?ft.ownerDocument:document}getTilePriority(ft,Pt,Nt,zt){return(0,ut.R)(this.frameState_,ft,Pt,Nt,zt)}handleBrowserEvent(ft,Pt){const Nt=new L(Pt=Pt||ft.type,this,ft);this.handleMapBrowserEvent(Nt)}handleMapBrowserEvent(ft){if(!this.frameState_)return;const Pt=ft.originalEvent,Nt=Pt.type;if(Nt===x.Z.POINTERDOWN||Nt===E.Z.WHEEL||Nt===E.Z.KEYDOWN){const zt=this.getOwnerDocument(),Bt=this.viewport_.getRootNode?this.viewport_.getRootNode():zt,ue=Pt.target;if(this.overlayContainerStopEvent_.contains(ue)||!(Bt===zt?zt.documentElement:Bt).contains(ue))return}if(ft.frameState=this.frameState_,!1!==this.dispatchEvent(ft)){const zt=this.getInteractions().getArray().slice();for(let Bt=zt.length-1;Bt>=0;Bt--){const ue=zt[Bt];if(ue.getMap()===this&&ue.getActive()&&this.getTargetElement()&&(!ue.handleEvent(ft)||ft.propagationStopped))break}}}handlePostRender(){const ft=this.frameState_,Pt=this.tileQueue_;if(!Pt.isEmpty()){let zt=this.maxTilesLoading_,Bt=zt;if(ft){const ue=ft.viewHints;if(ue[vt.Z.ANIMATING]||ue[vt.Z.INTERACTING]){const ve=Date.now()-ft.time>8;zt=ve?0:8,Bt=ve?0:2}}Pt.getTilesLoading()<zt&&(Pt.reprioritize(),Pt.loadMoreTiles(zt,Bt))}ft&&this.renderer_&&!ft.animate&&(!0===this.renderComplete_?(this.hasListener(_.Z.RENDERCOMPLETE)&&this.renderer_.dispatchRenderEvent(_.Z.RENDERCOMPLETE,ft),!1===this.loaded_&&(this.loaded_=!0,this.dispatchEvent(new st(V.Z.LOADEND,this,ft)))):!0===this.loaded_&&(this.loaded_=!1,this.dispatchEvent(new st(V.Z.LOADSTART,this,ft))));const Nt=this.postRenderFunctions_;for(let zt=0,Bt=Nt.length;zt<Bt;++zt)Nt[zt](this,ft);Nt.length=0}handleSizeChanged_(){this.getView()&&!this.getView().getAnimating()&&this.getView().resolveConstraints(0),this.render()}handleTargetChanged_(){if(this.mapBrowserEventHandler_){for(let Nt=0,zt=this.targetChangeHandlerKeys_.length;Nt<zt;++Nt)(0,m.bN)(this.targetChangeHandlerKeys_[Nt]);this.targetChangeHandlerKeys_=null,this.viewport_.removeEventListener(E.Z.CONTEXTMENU,this.boundHandleBrowserEvent_),this.viewport_.removeEventListener(E.Z.WHEEL,this.boundHandleBrowserEvent_),this.mapBrowserEventHandler_.dispose(),this.mapBrowserEventHandler_=null,(0,y.ZF)(this.viewport_)}if(this.targetElement_){this.resizeObserver_.unobserve(this.targetElement_);const Nt=this.targetElement_.getRootNode();Nt instanceof ShadowRoot&&this.resizeObserver_.unobserve(Nt.host),this.setSize(void 0)}const ft=this.getTarget(),Pt="string"==typeof ft?document.getElementById(ft):ft;if(this.targetElement_=Pt,Pt){Pt.appendChild(this.viewport_),this.renderer_||(this.renderer_=new O(this)),this.mapBrowserEventHandler_=new nt(this,this.moveTolerance_);for(const Bt in w.Z)this.mapBrowserEventHandler_.addEventListener(w.Z[Bt],this.handleMapBrowserEvent.bind(this));this.viewport_.addEventListener(E.Z.CONTEXTMENU,this.boundHandleBrowserEvent_,!1),this.viewport_.addEventListener(E.Z.WHEEL,this.boundHandleBrowserEvent_,!!D.bM&&{passive:!1});const Nt=this.keyboardEventTarget_?this.keyboardEventTarget_:Pt;this.targetChangeHandlerKeys_=[(0,m.oL)(Nt,E.Z.KEYDOWN,this.handleBrowserEvent,this),(0,m.oL)(Nt,E.Z.KEYPRESS,this.handleBrowserEvent,this)];const zt=Pt.getRootNode();zt instanceof ShadowRoot&&this.resizeObserver_.observe(zt.host),this.resizeObserver_.observe(Pt)}else this.renderer_&&(clearTimeout(this.postRenderTimeoutHandle_),this.postRenderTimeoutHandle_=void 0,this.postRenderFunctions_.length=0,this.renderer_.dispose(),this.renderer_=null),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0);this.updateSize()}handleTileChange_(){this.render()}handleViewPropertyChanged_(){this.render()}handleViewChanged_(){this.viewPropertyListenerKey_&&((0,m.bN)(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&((0,m.bN)(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);const ft=this.getView();ft&&(this.updateViewportSize_(),this.viewPropertyListenerKey_=(0,m.oL)(ft,e.Z.PROPERTYCHANGE,this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=(0,m.oL)(ft,E.Z.CHANGE,this.handleViewPropertyChanged_,this),ft.resolveConstraints(0)),this.render()}handleLayerGroupChanged_(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(m.bN),this.layerGroupPropertyListenerKeys_=null);const ft=this.getLayerGroup();ft&&(this.handleLayerAdd_(new R.V("addlayer",ft)),this.layerGroupPropertyListenerKeys_=[(0,m.oL)(ft,e.Z.PROPERTYCHANGE,this.render,this),(0,m.oL)(ft,E.Z.CHANGE,this.render,this),(0,m.oL)(ft,"addlayer",this.handleLayerAdd_,this),(0,m.oL)(ft,"removelayer",this.handleLayerRemove_,this)]),this.render()}isRendered(){return!!this.frameState_}animationDelay_(){this.animationDelayKey_=void 0,this.renderFrame_(Date.now())}renderSync(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()}redrawText(){const ft=this.getLayerGroup().getLayerStatesArray();for(let Pt=0,Nt=ft.length;Pt<Nt;++Pt){const zt=ft[Pt].layer;zt.hasRenderer()&&zt.getRenderer().handleFontsChanged()}}render(){this.renderer_&&void 0===this.animationDelayKey_&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))}flushDeclutterItems(){const ft=this.frameState_;ft&&this.renderer_.flushDeclutterItems(ft)}removeControl(ft){return this.getControls().remove(ft)}removeInteraction(ft){return this.getInteractions().remove(ft)}removeLayer(ft){return this.getLayerGroup().getLayers().remove(ft)}handleLayerRemove_(ft){gt(ft.layer)}removeOverlay(ft){return this.getOverlays().remove(ft)}renderFrame_(ft){const Pt=this.getSize(),Nt=this.getView(),zt=this.frameState_;let Bt=null;if(void 0!==Pt&&(0,de.py)(Pt)&&Nt&&Nt.isDef()){const ue=Nt.getHints(this.frameState_?this.frameState_.viewHints:void 0),ve=Nt.getState();if(Bt={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,declutterTree:null,extent:(0,P.p8)(ve.center,ve.resolution,ve.rotation,Pt),index:this.frameIndex_++,layerIndex:0,layerStatesArray:this.getLayerGroup().getLayerStatesArray(),pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:Pt,tileQueue:this.tileQueue_,time:ft,usedTiles:{},viewState:ve,viewHints:ue,wantedTiles:{},mapId:(0,b.sq)(this),renderTargets:{}},ve.nextCenter&&ve.nextResolution){const Ee=isNaN(ve.nextRotation)?ve.rotation:ve.nextRotation;Bt.nextExtent=(0,P.p8)(ve.nextCenter,ve.nextResolution,Ee,Pt)}}this.frameState_=Bt,this.renderer_.renderFrame(Bt),Bt&&(Bt.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,Bt.postRenderFunctions),zt&&(!this.previousExtent_||!(0,P.xb)(this.previousExtent_)&&!(0,P.fS)(Bt.extent,this.previousExtent_))&&(this.dispatchEvent(new st(V.Z.MOVESTART,this,zt)),this.previousExtent_=(0,P.YN)(this.previousExtent_)),this.previousExtent_&&!Bt.viewHints[vt.Z.ANIMATING]&&!Bt.viewHints[vt.Z.INTERACTING]&&!(0,P.fS)(Bt.extent,this.previousExtent_)&&(this.dispatchEvent(new st(V.Z.MOVEEND,this,Bt)),(0,P.d9)(Bt.extent,this.previousExtent_))),this.dispatchEvent(new st(V.Z.POSTRENDER,this,Bt)),this.renderComplete_=this.hasListener(V.Z.LOADSTART)||this.hasListener(V.Z.LOADEND)||this.hasListener(_.Z.RENDERCOMPLETE)?!this.tileQueue_.getTilesLoading()&&!this.tileQueue_.getCount()&&!this.getLoadingOrNotReady():void 0,this.postRenderTimeoutHandle_||(this.postRenderTimeoutHandle_=setTimeout(()=>{this.postRenderTimeoutHandle_=void 0,this.handlePostRender()},0))}setLayerGroup(ft){const Pt=this.getLayerGroup();Pt&&this.handleLayerRemove_(new R.V("removelayer",Pt)),this.set(at.Z.LAYERGROUP,ft)}setSize(ft){this.set(at.Z.SIZE,ft)}setTarget(ft){this.set(at.Z.TARGET,ft)}setView(ft){if(!ft||ft instanceof Ct.ZP)return void this.set(at.Z.VIEW,ft);this.set(at.Z.VIEW,new Ct.ZP);const Pt=this;ft.then(function(Nt){Pt.setView(new Ct.ZP(Nt))})}updateSize(){const ft=this.getTargetElement();let Pt;if(ft){const zt=getComputedStyle(ft),Bt=ft.offsetWidth-parseFloat(zt.borderLeftWidth)-parseFloat(zt.paddingLeft)-parseFloat(zt.paddingRight)-parseFloat(zt.borderRightWidth),ue=ft.offsetHeight-parseFloat(zt.borderTopWidth)-parseFloat(zt.paddingTop)-parseFloat(zt.paddingBottom)-parseFloat(zt.borderBottomWidth);!isNaN(Bt)&&!isNaN(ue)&&(Pt=[Bt,ue],!(0,de.py)(Pt)&&(ft.offsetWidth||ft.offsetHeight||ft.getClientRects().length)&&(0,Re.ZK)("No map visible because the map container's width or height are 0."))}const Nt=this.getSize();Pt&&(!Nt||!(0,_e.fS)(Pt,Nt))&&(this.setSize(Pt),this.updateViewportSize_())}updateViewportSize_(){const ft=this.getView();if(ft){let Pt;const Nt=getComputedStyle(this.viewport_);Nt.width&&Nt.height&&(Pt=[parseInt(Nt.width,10),parseInt(Nt.height,10)]),ft.setViewportSize(Pt)}}}},6990:(jt,ht,a)=>{"use strict";a.d(ht,{Z:()=>F});var W=a(2431);const F={SINGLECLICK:"singleclick",CLICK:W.Z.CLICK,DBLCLICK:W.Z.DBLCLICK,POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"}},5465:(jt,ht,a)=>{"use strict";a.d(ht,{Z:()=>W});const W={POSTRENDER:"postrender",MOVESTART:"movestart",MOVEEND:"moveend",LOADSTART:"loadstart",LOADEND:"loadend"}},8963:(jt,ht,a)=>{"use strict";a.d(ht,{Z:()=>W});const W={LAYERGROUP:"layergroup",SIZE:"size",TARGET:"target",VIEW:"view"}},7300:(jt,ht,a)=>{"use strict";a.d(ht,{Z:()=>P});var W=a(8802),F=a(1858),k=a(2224),G=a(3089),Z=a(5526);class b extends W.ZP{constructor(f,u,c){super(f),this.key=u,this.oldValue=c}}const P=class S extends k.Z{constructor(f){super(),(0,G.sq)(this),this.values_=null,void 0!==f&&this.setProperties(f)}get(f){let u;return this.values_&&this.values_.hasOwnProperty(f)&&(u=this.values_[f]),u}getKeys(){return this.values_&&Object.keys(this.values_)||[]}getProperties(){return this.values_&&Object.assign({},this.values_)||{}}hasProperties(){return!!this.values_}notify(f,u){let c;c=`change:${f}`,this.hasListener(c)&&this.dispatchEvent(new b(c,f,u)),c=F.Z.PROPERTYCHANGE,this.hasListener(c)&&this.dispatchEvent(new b(c,f,u))}addChangeListener(f,u){this.addEventListener(`change:${f}`,u)}removeChangeListener(f,u){this.removeEventListener(`change:${f}`,u)}set(f,u,c){const r=this.values_||(this.values_={});if(c)r[f]=u;else{const d=r[f];r[f]=u,d!==u&&this.notify(f,d)}}setProperties(f,u){for(const c in f)this.set(c,f[c],u)}applyProperties(f){f.values_&&Object.assign(this.values_||(this.values_={}),f.values_)}unset(f,u){if(this.values_&&f in this.values_){const c=this.values_[f];delete this.values_[f],(0,Z.x)(this.values_)&&(this.values_=null),u||this.notify(f,c)}}}},1858:(jt,ht,a)=>{"use strict";a.d(ht,{Z:()=>W});const W={PROPERTYCHANGE:"propertychange"}},2224:(jt,ht,a)=>{"use strict";a.d(ht,{B:()=>Z,Z:()=>b});var W=a(9608),F=a(2431),k=a(7847);function Z(S){if(Array.isArray(S))for(let P=0,v=S.length;P<v;++P)(0,k.bN)(S[P]);else(0,k.bN)(S)}const b=class G extends W.Z{constructor(){super(),this.on=this.onInternal,this.once=this.onceInternal,this.un=this.unInternal,this.revision_=0}changed(){++this.revision_,this.dispatchEvent(F.Z.CHANGE)}getRevision(){return this.revision_}onInternal(P,v){if(Array.isArray(P)){const f=P.length,u=new Array(f);for(let c=0;c<f;++c)u[c]=(0,k.oL)(this,P[c],v);return u}return(0,k.oL)(this,P,v)}onceInternal(P,v){let f;if(Array.isArray(P)){const u=P.length;f=new Array(u);for(let c=0;c<u;++c)f[c]=(0,k.Vx)(this,P[c],v)}else f=(0,k.Vx)(this,P,v);return v.ol_key=f,f}unInternal(P,v){const f=v.ol_key;if(f)Z(f);else if(Array.isArray(P))for(let u=0,c=P.length;u<c;++u)this.removeEventListener(P[u],v);else this.removeEventListener(P,v)}}},5681:(jt,ht,a)=>{"use strict";a.d(ht,{Z:()=>v});var W=a(7300),F=a(5465),k=a(4118),G=a(1316),Z=a(7847),b=a(4211);const v=class P extends W.Z{constructor(u){super(),this.options=u,this.id=u.id,this.insertFirst=void 0===u.insertFirst||u.insertFirst,this.stopEvent=void 0===u.stopEvent||u.stopEvent,this.element=document.createElement("div"),this.element.className=void 0!==u.className?u.className:"ol-overlay-container "+k.$A,this.element.style.position="absolute",this.element.style.pointerEvents="auto",this.autoPan=!0===u.autoPan?{}:u.autoPan||void 0,this.rendered={transform_:"",visible:!0},this.mapPostrenderListenerKey=null,this.addChangeListener("element",this.handleElementChanged),this.addChangeListener("map",this.handleMapChanged),this.addChangeListener("offset",this.handleOffsetChanged),this.addChangeListener("position",this.handlePositionChanged),this.addChangeListener("positioning",this.handlePositioningChanged),void 0!==u.element&&this.setElement(u.element),this.setOffset(void 0!==u.offset?u.offset:[0,0]),this.setPositioning(u.positioning||"top-left"),void 0!==u.position&&this.setPosition(u.position)}getElement(){return this.get("element")}getId(){return this.id}getMap(){return this.get("map")||null}getOffset(){return this.get("offset")}getPosition(){return this.get("position")}getPositioning(){return this.get("positioning")}handleElementChanged(){(0,b.ep)(this.element);const u=this.getElement();u&&this.element.appendChild(u)}handleMapChanged(){this.mapPostrenderListenerKey&&((0,b.ZF)(this.element),(0,Z.bN)(this.mapPostrenderListenerKey),this.mapPostrenderListenerKey=null);const u=this.getMap();if(u){this.mapPostrenderListenerKey=(0,Z.oL)(u,F.Z.POSTRENDER,this.render,this),this.updatePixelPosition();const c=this.stopEvent?u.getOverlayContainerStopEvent():u.getOverlayContainer();this.insertFirst?c.insertBefore(this.element,c.childNodes[0]||null):c.appendChild(this.element),this.performAutoPan()}}render(){this.updatePixelPosition()}handleOffsetChanged(){this.updatePixelPosition()}handlePositionChanged(){this.updatePixelPosition(),this.performAutoPan()}handlePositioningChanged(){this.updatePixelPosition()}setElement(u){this.set("element",u)}setMap(u){this.set("map",u)}setOffset(u){this.set("offset",u)}setPosition(u){this.set("position",u)}performAutoPan(){this.autoPan&&this.panIntoView(this.autoPan)}panIntoView(u){const c=this.getMap();if(!c||!c.getTargetElement()||!this.get("position"))return;const r=this.getRect(c.getTargetElement(),c.getSize()),d=this.getElement(),e=this.getRect(d,[(0,b.iO)(d),(0,b.Pb)(d)]),l=void 0===(u=u||{}).margin?20:u.margin;if(!(0,G.r4)(r,e)){const _=e[0]-r[0],n=r[2]-e[2],g=e[1]-r[1],m=r[3]-e[3],y=[0,0];if(_<0?y[0]=_-l:n<0&&(y[0]=Math.abs(n)+l),g<0?y[1]=g-l:m<0&&(y[1]=Math.abs(m)+l),0!==y[0]||0!==y[1]){const I=c.getView().getCenterInternal(),O=c.getPixelFromCoordinateInternal(I);if(!O)return;const E=[O[0]+y[0],O[1]+y[1]],R=u.animation||{};c.getView().animateInternal({center:c.getCoordinateFromPixelInternal(E),duration:R.duration,easing:R.easing})}}}getRect(u,c){const r=u.getBoundingClientRect(),d=r.left+window.pageXOffset,e=r.top+window.pageYOffset;return[d,e,d+c[0],e+c[1]]}setPositioning(u){this.set("positioning",u)}setVisible(u){this.rendered.visible!==u&&(this.element.style.display=u?"":"none",this.rendered.visible=u)}updatePixelPosition(){const u=this.getMap(),c=this.getPosition();if(!u||!u.isRendered()||!c)return void this.setVisible(!1);const r=u.getPixelFromCoordinate(c),d=u.getSize();this.updateRenderedPosition(r,d)}updateRenderedPosition(u,c){const r=this.element.style,d=this.getOffset(),e=this.getPositioning();this.setVisible(!0);let n="0%",g="0%";"bottom-right"==e||"center-right"==e||"top-right"==e?n="-100%":("bottom-center"==e||"center-center"==e||"top-center"==e)&&(n="-50%"),"bottom-left"==e||"bottom-center"==e||"bottom-right"==e?g="-100%":("center-left"==e||"center-center"==e||"center-right"==e)&&(g="-50%");const m=`translate(${n}, ${g}) translate(${Math.round(u[0]+d[0])+"px"}, ${Math.round(u[1]+d[1])+"px"})`;this.rendered.transform_!=m&&(this.rendered.transform_=m,r.transform=m)}getOptions(){return this.options}}},6381:(jt,ht,a)=>{"use strict";a.d(ht,{Z:()=>S});var W=a(9608),F=a(2431),k=a(5399),G=a(3089),Z=a(53);const S=class b extends W.Z{constructor(v,f,u){super(),u=u||{},this.tileCoord=v,this.state=f,this.interimTile=null,this.key="",this.transition_=void 0===u.transition?250:u.transition,this.transitionStarts_={},this.interpolate=!!u.interpolate}changed(){this.dispatchEvent(F.Z.CHANGE)}release(){this.state===k.Z.ERROR&&this.setState(k.Z.EMPTY)}getKey(){return this.key+"/"+this.tileCoord}getInterimTile(){if(!this.interimTile)return this;let v=this.interimTile;do{if(v.getState()==k.Z.LOADED)return this.transition_=0,v;v=v.interimTile}while(v);return this}refreshInterimChain(){if(!this.interimTile)return;let v=this.interimTile,f=this;do{if(v.getState()==k.Z.LOADED){v.interimTile=null;break}v.getState()==k.Z.LOADING?f=v:v.getState()==k.Z.IDLE?f.interimTile=v.interimTile:f=v,v=f.interimTile}while(v)}getTileCoord(){return this.tileCoord}getState(){return this.state}setState(v){if(this.state!==k.Z.ERROR&&this.state>v)throw new Error("Tile load sequence violation");this.state=v,this.changed()}load(){(0,G.O3)()}getAlpha(v,f){if(!this.transition_)return 1;let u=this.transitionStarts_[v];if(u){if(-1===u)return 1}else u=f,this.transitionStarts_[v]=u;const c=f-u+1e3/60;return c>=this.transition_?1:(0,Z.YQ)(c/this.transition_)}inTransition(v){return!!this.transition_&&-1!==this.transitionStarts_[v]}endTransition(v){this.transition_&&(this.transitionStarts_[v]=-1)}}},8525:(jt,ht,a)=>{"use strict";a.d(ht,{Z:()=>b});var W=a(9219);const k=class F{constructor(P){this.highWaterMark=void 0!==P?P:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}canExpireCache(){return this.highWaterMark>0&&this.getCount()>this.highWaterMark}expireCache(P){for(;this.canExpireCache();)this.pop()}clear(){this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}containsKey(P){return this.entries_.hasOwnProperty(P)}forEach(P){let v=this.oldest_;for(;v;)P(v.value_,v.key_,this),v=v.newer}get(P,v){const f=this.entries_[P];return(0,W.h)(void 0!==f,15),f===this.newest_||(f===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(f.newer.older=f.older,f.older.newer=f.newer),f.newer=null,f.older=this.newest_,this.newest_.newer=f,this.newest_=f),f.value_}remove(P){const v=this.entries_[P];return(0,W.h)(void 0!==v,15),v===this.newest_?(this.newest_=v.older,this.newest_&&(this.newest_.newer=null)):v===this.oldest_?(this.oldest_=v.newer,this.oldest_&&(this.oldest_.older=null)):(v.newer.older=v.older,v.older.newer=v.newer),delete this.entries_[P],--this.count_,v.value_}getCount(){return this.count_}getKeys(){const P=new Array(this.count_);let f,v=0;for(f=this.newest_;f;f=f.older)P[v++]=f.key_;return P}getValues(){const P=new Array(this.count_);let f,v=0;for(f=this.newest_;f;f=f.older)P[v++]=f.value_;return P}peekLast(){return this.oldest_.value_}peekLastKey(){return this.oldest_.key_}peekFirstKey(){return this.newest_.key_}peek(P){if(this.containsKey(P))return this.entries_[P].value_}pop(){const P=this.oldest_;return delete this.entries_[P.key_],P.newer&&(P.newer.older=null),this.oldest_=P.newer,this.oldest_||(this.newest_=null),--this.count_,P.value_}replace(P,v){this.get(P),this.entries_[P].value_=v}set(P,v){(0,W.h)(!(P in this.entries_),16);const f={key_:P,newer:null,older:this.newest_,value_:v};this.newest_?this.newest_.newer=f:this.oldest_=f,this.newest_=f,this.entries_[P]=f,++this.count_}setSize(P){this.highWaterMark=P}};var G=a(3936);const b=class Z extends k{clear(){for(;this.getCount()>0;)this.pop().release();super.clear()}expireCache(P){for(;this.canExpireCache()&&!(this.peekLast().getKey()in P);)this.pop().release()}pruneExceptNewestZ(){if(0===this.getCount())return;const P=this.peekFirstKey(),f=(0,G.Ul)(P)[0];this.forEach(u=>{u.tileCoord[0]!==f&&(this.remove((0,G.km)(u.tileCoord)),u.release())})}}},857:(jt,ht,a)=>{"use strict";a.d(ht,{Z:()=>v,R:()=>f});var W=a(2431),F=a(9219),k=a(5526);const G=1/0,b=class Z{constructor(c,r){this.priorityFunction_=c,this.keyFunction_=r,this.elements_=[],this.priorities_=[],this.queuedElements_={}}clear(){this.elements_.length=0,this.priorities_.length=0,(0,k.Z)(this.queuedElements_)}dequeue(){const c=this.elements_,r=this.priorities_,d=c[0];1==c.length?(c.length=0,r.length=0):(c[0]=c.pop(),r[0]=r.pop(),this.siftUp_(0));const e=this.keyFunction_(d);return delete this.queuedElements_[e],d}enqueue(c){(0,F.h)(!(this.keyFunction_(c)in this.queuedElements_),31);const r=this.priorityFunction_(c);return r!=G&&(this.elements_.push(c),this.priorities_.push(r),this.queuedElements_[this.keyFunction_(c)]=!0,this.siftDown_(0,this.elements_.length-1),!0)}getCount(){return this.elements_.length}getLeftChildIndex_(c){return 2*c+1}getRightChildIndex_(c){return 2*c+2}getParentIndex_(c){return c-1>>1}heapify_(){let c;for(c=(this.elements_.length>>1)-1;c>=0;c--)this.siftUp_(c)}isEmpty(){return 0===this.elements_.length}isKeyQueued(c){return c in this.queuedElements_}isQueued(c){return this.isKeyQueued(this.keyFunction_(c))}siftUp_(c){const r=this.elements_,d=this.priorities_,e=r.length,l=r[c],_=d[c],n=c;for(;c<e>>1;){const g=this.getLeftChildIndex_(c),m=this.getRightChildIndex_(c),y=m<e&&d[m]<d[g]?m:g;r[c]=r[y],d[c]=d[y],c=y}r[c]=l,d[c]=_,this.siftDown_(n,c)}siftDown_(c,r){const d=this.elements_,e=this.priorities_,l=d[r],_=e[r];for(;r>c;){const n=this.getParentIndex_(r);if(!(e[n]>_))break;d[r]=d[n],e[r]=e[n],r=n}d[r]=l,e[r]=_}reprioritize(){const c=this.priorityFunction_,r=this.elements_,d=this.priorities_;let e=0;const l=r.length;let _,n,g;for(n=0;n<l;++n)_=r[n],g=c(_),g==G?delete this.queuedElements_[this.keyFunction_(_)]:(d[e]=g,r[e++]=_);r.length=e,d.length=e,this.heapify_()}};var S=a(5399);const v=class P extends b{constructor(c,r){super(function(d){return c.apply(null,d)},function(d){return d[0].getKey()}),this.boundHandleTileChange_=this.handleTileChange.bind(this),this.tileChangeCallback_=r,this.tilesLoading_=0,this.tilesLoadingKeys_={}}enqueue(c){const r=super.enqueue(c);return r&&c[0].addEventListener(W.Z.CHANGE,this.boundHandleTileChange_),r}getTilesLoading(){return this.tilesLoading_}handleTileChange(c){const r=c.target,d=r.getState();if(d===S.Z.LOADED||d===S.Z.ERROR||d===S.Z.EMPTY){d!==S.Z.ERROR&&r.removeEventListener(W.Z.CHANGE,this.boundHandleTileChange_);const e=r.getKey();e in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[e],--this.tilesLoading_),this.tileChangeCallback_()}}loadMoreTiles(c,r){let e,l,_,d=0;for(;this.tilesLoading_<c&&d<r&&this.getCount()>0;)l=this.dequeue()[0],_=l.getKey(),e=l.getState(),e===S.Z.IDLE&&!(_ in this.tilesLoadingKeys_)&&(this.tilesLoadingKeys_[_]=!0,++this.tilesLoading_,++d,l.load())}};function f(u,c,r,d,e){if(!u||!(r in u.wantedTiles)||!u.wantedTiles[r][c.getKey()])return G;const l=u.viewState.center,_=d[0]-l[0],n=d[1]-l[1];return 65536*Math.log(e)+Math.sqrt(_*_+n*n)/e}},6025:(jt,ht,a)=>{"use strict";a.d(ht,{T:()=>F,Z:()=>k});class W{constructor(Z,b,S,P){this.minX=Z,this.maxX=b,this.minY=S,this.maxY=P}contains(Z){return this.containsXY(Z[1],Z[2])}containsTileRange(Z){return this.minX<=Z.minX&&Z.maxX<=this.maxX&&this.minY<=Z.minY&&Z.maxY<=this.maxY}containsXY(Z,b){return this.minX<=Z&&Z<=this.maxX&&this.minY<=b&&b<=this.maxY}equals(Z){return this.minX==Z.minX&&this.minY==Z.minY&&this.maxX==Z.maxX&&this.maxY==Z.maxY}extend(Z){Z.minX<this.minX&&(this.minX=Z.minX),Z.maxX>this.maxX&&(this.maxX=Z.maxX),Z.minY<this.minY&&(this.minY=Z.minY),Z.maxY>this.maxY&&(this.maxY=Z.maxY)}getHeight(){return this.maxY-this.minY+1}getSize(){return[this.getWidth(),this.getHeight()]}getWidth(){return this.maxX-this.minX+1}intersects(Z){return this.minX<=Z.maxX&&this.maxX>=Z.minX&&this.minY<=Z.maxY&&this.maxY>=Z.minY}}function F(G,Z,b,S,P){return void 0!==P?(P.minX=G,P.maxX=Z,P.minY=b,P.maxY=S,P):new W(G,Z,b,S)}const k=W},5399:(jt,ht,a)=>{"use strict";a.d(ht,{Z:()=>W});const W={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4}},6715:(jt,ht,a)=>{"use strict";a.d(ht,{ZP:()=>L});var W=a(7300),F=a(3701),k=a(1409),G=a(8220),Z=a(7021),b=a(6077),S=a(1242),P=a(9219),v=a(3026);function f(w,x,C){return function(D,Y,nt,V,at){if(!D)return;if(!Y&&!x)return D;const ut=x?0:nt[0]*Y,Ct=x?0:nt[1]*Y,vt=at?at[0]:0,St=at?at[1]:0;let bt=w[0]+ut/2+vt,Gt=w[2]-ut/2+vt,Xt=w[1]+Ct/2+St,te=w[3]-Ct/2+St;bt>Gt&&(bt=(Gt+bt)/2,Gt=bt),Xt>te&&(Xt=(te+Xt)/2,te=Xt);let Vt=(0,v.uZ)(D[0],bt,Gt),_e=(0,v.uZ)(D[1],Xt,te);if(V&&C&&Y){const he=30*Y;Vt+=-he*Math.log(1+Math.max(0,bt-D[0])/he)+he*Math.log(1+Math.max(0,D[0]-Gt)/he),_e+=-he*Math.log(1+Math.max(0,Xt-D[1])/he)+he*Math.log(1+Math.max(0,D[1]-te)/he)}return[Vt,_e]}}function u(w){return w}var c=a(1316),r=a(9363);function d(w,x,C,D){const Y=(0,c.dz)(x)/C[0],nt=(0,c.Cr)(x)/C[1];return D?Math.min(w,Math.max(Y,nt)):Math.min(w,Math.min(Y,nt))}function e(w,x,C){let D=Math.min(w,x);return D*=Math.log(1+50*Math.max(0,w/x-1))/50+1,C&&(D=Math.max(D,C),D/=Math.log(1+50*Math.max(0,C/w-1))/50+1),(0,v.uZ)(D,C/2,2*x)}function n(w,x,C,D,Y){return C=void 0===C||C,function(nt,V,at,ut){if(void 0!==nt){const Ct=D?d(w,D,at,Y):w;return C&&ut?e(nt,Ct,x):(0,v.uZ)(nt,x,Ct)}}}var g=a(3616),m=a(53),y=a(3435);function E(w,x){setTimeout(function(){w(x)},0)}function A(w,x,C,D,Y){const nt=Math.cos(-Y);let V=Math.sin(-Y),at=w[0]*nt-w[1]*V,ut=w[1]*nt+w[0]*V;return at+=(x[0]/2-C[0])*D,ut+=(C[1]-x[1]/2)*D,V=-V,[at*nt-ut*V,ut*nt+at*V]}const L=class O extends W.Z{constructor(x){super(),x=Object.assign({},x),this.hints_=[0,0],this.animations_=[],this.projection_=(0,Z.UQ)(x.projection,"EPSG:3857"),this.viewportSize_=[100,100],this.targetCenter_=null,this.nextCenter_=null,this.cancelAnchor_=void 0,x.projection&&(0,Z.h_)(),x.center&&(x.center=(0,Z.Vs)(x.center,this.projection_)),x.extent&&(x.extent=(0,Z.dY)(x.extent,this.projection_)),this.applyOptions_(x)}applyOptions_(x){const C=Object.assign({},x);for(const at in k.Z)delete C[at];this.setProperties(C,!0);const D=function N(w){let x,C,D,V=void 0!==w.minZoom?w.minZoom:0,at=void 0!==w.maxZoom?w.maxZoom:28;const ut=void 0!==w.zoomFactor?w.zoomFactor:2,Ct=void 0!==w.multiWorld&&w.multiWorld,vt=void 0===w.smoothResolutionConstraint||w.smoothResolutionConstraint,St=void 0!==w.showFullExtent&&w.showFullExtent,bt=(0,Z.UQ)(w.projection,"EPSG:3857"),Gt=bt.getExtent();let Xt=w.constrainOnlyCenter,te=w.extent;if(!Ct&&!te&&bt.isGlobal()&&(Xt=!1,te=Gt),void 0!==w.resolutions){const Vt=w.resolutions;C=Vt[V],D=void 0!==Vt[at]?Vt[at]:Vt[Vt.length-1],x=w.constrainResolution?function l(w,x,C,D){return x=void 0===x||x,function(Y,nt,V,at){if(void 0!==Y){const ut=w[0],Ct=w[w.length-1],vt=C?d(ut,C,V,D):ut;if(at)return x?e(Y,vt,Ct):(0,v.uZ)(Y,Ct,vt);const St=Math.min(vt,Y),bt=Math.floor((0,r.h7)(w,St,nt));return w[bt]>vt&&bt<w.length-1?w[bt+1]:w[bt]}}}(Vt,vt,!Xt&&te,St):n(C,D,vt,!Xt&&te,St)}else{const _e=(Gt?Math.max((0,c.dz)(Gt),(0,c.Cr)(Gt)):360*Z.Wm.degrees/bt.getMetersPerUnit())/G.S/Math.pow(2,0),he=_e/Math.pow(2,28);C=w.maxResolution,void 0!==C?V=0:C=_e/Math.pow(ut,V),D=w.minResolution,void 0===D&&(D=void 0!==w.maxZoom?void 0!==w.maxResolution?C/Math.pow(ut,at):_e/Math.pow(ut,at):he),at=V+Math.floor(Math.log(C/D)/Math.log(ut)),D=C/Math.pow(ut,at-V),x=w.constrainResolution?function _(w,x,C,D,Y,nt){return D=void 0===D||D,C=void 0!==C?C:0,function(V,at,ut,Ct){if(void 0!==V){const vt=Y?d(x,Y,ut,nt):x;if(Ct)return D?e(V,vt,C):(0,v.uZ)(V,C,vt);const St=1e-9,bt=Math.ceil(Math.log(x/vt)/Math.log(w)-St),Gt=-at*(.5-St)+.5,Xt=Math.min(vt,V),te=Math.floor(Math.log(x/Xt)/Math.log(w)+Gt),Vt=Math.max(bt,te),_e=x/Math.pow(w,Vt);return(0,v.uZ)(_e,C,vt)}}}(ut,C,D,vt,!Xt&&te,St):n(C,D,vt,!Xt&&te,St)}return{constraint:x,maxResolution:C,minResolution:D,minZoom:V,zoomFactor:ut}}(x);this.maxResolution_=D.maxResolution,this.minResolution_=D.minResolution,this.zoomFactor_=D.zoomFactor,this.resolutions_=x.resolutions,this.padding_=x.padding,this.minZoom_=D.minZoom;const Y=function R(w){if(void 0!==w.extent)return f(w.extent,w.constrainOnlyCenter,void 0===w.smoothExtentConstraint||w.smoothExtentConstraint);const x=(0,Z.UQ)(w.projection,"EPSG:3857");if(!0!==w.multiWorld&&x.isGlobal()){const C=x.getExtent().slice();return C[0]=-1/0,C[2]=1/0,f(C,!1,!1)}return u}(x),nt=D.constraint,V=function z(w){if(void 0===w.enableRotation||w.enableRotation){const C=w.constrainRotation;return void 0===C||!0===C?(0,g.Gw)():!1===C?g.YP:"number"==typeof C?(0,g.gE)(C):g.YP}return g.h$}(x);this.constraints_={center:Y,resolution:nt,rotation:V},this.setRotation(void 0!==x.rotation?x.rotation:0),this.setCenterInternal(void 0!==x.center?x.center:null),void 0!==x.resolution?this.setResolution(x.resolution):void 0!==x.zoom&&this.setZoom(x.zoom)}get padding(){return this.padding_}set padding(x){let C=this.padding_;this.padding_=x;const D=this.getCenterInternal();if(D){const Y=x||[0,0,0,0];C=C||[0,0,0,0];const nt=this.getResolution();this.setCenterInternal([D[0]+nt/2*(Y[3]-C[3]+C[1]-Y[1]),D[1]-nt/2*(Y[0]-C[0]+C[2]-Y[2])])}}getUpdatedOptions_(x){const C=this.getProperties();return void 0!==C.resolution?C.resolution=this.getResolution():C.zoom=this.getZoom(),C.center=this.getCenterInternal(),C.rotation=this.getRotation(),Object.assign({},C,x)}animate(x){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);const C=new Array(arguments.length);for(let D=0;D<C.length;++D){let Y=arguments[D];Y.center&&(Y=Object.assign({},Y),Y.center=(0,Z.Vs)(Y.center,this.getProjection())),Y.anchor&&(Y=Object.assign({},Y),Y.anchor=(0,Z.Vs)(Y.anchor,this.getProjection())),C[D]=Y}this.animateInternal.apply(this,C)}animateInternal(x){let D,C=arguments.length;C>1&&"function"==typeof arguments[C-1]&&(D=arguments[C-1],--C);let Y=0;for(;Y<C&&!this.isDef();++Y){const vt=arguments[Y];vt.center&&this.setCenterInternal(vt.center),void 0!==vt.zoom?this.setZoom(vt.zoom):vt.resolution&&this.setResolution(vt.resolution),void 0!==vt.rotation&&this.setRotation(vt.rotation)}if(Y===C)return void(D&&E(D,!0));let nt=Date.now(),V=this.targetCenter_.slice(),at=this.targetResolution_,ut=this.targetRotation_;const Ct=[];for(;Y<C;++Y){const vt=arguments[Y],St={start:nt,complete:!1,anchor:vt.anchor,duration:void 0!==vt.duration?vt.duration:1e3,easing:vt.easing||m.rd,callback:D};if(vt.center&&(St.sourceCenter=V,St.targetCenter=vt.center.slice(),V=St.targetCenter),void 0!==vt.zoom?(St.sourceResolution=at,St.targetResolution=this.getResolutionForZoom(vt.zoom),at=St.targetResolution):vt.resolution&&(St.sourceResolution=at,St.targetResolution=vt.resolution,at=St.targetResolution),void 0!==vt.rotation){St.sourceRotation=ut;const bt=(0,v.$W)(vt.rotation-ut+Math.PI,2*Math.PI)-Math.PI;St.targetRotation=ut+bt,ut=St.targetRotation}(w=St).sourceCenter&&w.targetCenter&&!(0,S.fS)(w.sourceCenter,w.targetCenter)||w.sourceResolution!==w.targetResolution||w.sourceRotation!==w.targetRotation?nt+=St.duration:St.complete=!0,Ct.push(St)}var w;this.animations_.push(Ct),this.setHint(F.Z.ANIMATING,1),this.updateAnimations_()}getAnimating(){return this.hints_[F.Z.ANIMATING]>0}getInteracting(){return this.hints_[F.Z.INTERACTING]>0}cancelAnimations(){let x;this.setHint(F.Z.ANIMATING,-this.hints_[F.Z.ANIMATING]);for(let C=0,D=this.animations_.length;C<D;++C){const Y=this.animations_[C];if(Y[0].callback&&E(Y[0].callback,!1),!x)for(let nt=0,V=Y.length;nt<V;++nt){const at=Y[nt];if(!at.complete){x=at.anchor;break}}}this.animations_.length=0,this.cancelAnchor_=x,this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN}updateAnimations_(){if(void 0!==this.updateAnimationKey_&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),!this.getAnimating())return;const x=Date.now();let C=!1;for(let D=this.animations_.length-1;D>=0;--D){const Y=this.animations_[D];let nt=!0;for(let V=0,at=Y.length;V<at;++V){const ut=Y[V];if(ut.complete)continue;let vt=ut.duration>0?(x-ut.start)/ut.duration:1;vt>=1?(ut.complete=!0,vt=1):nt=!1;const St=ut.easing(vt);if(ut.sourceCenter){const bt=ut.sourceCenter[0],Gt=ut.sourceCenter[1],Xt=ut.targetCenter[0],te=ut.targetCenter[1];this.nextCenter_=ut.targetCenter,this.targetCenter_=[bt+St*(Xt-bt),Gt+St*(te-Gt)]}if(ut.sourceResolution&&ut.targetResolution){const bt=1===St?ut.targetResolution:ut.sourceResolution+St*(ut.targetResolution-ut.sourceResolution);if(ut.anchor){const Gt=this.getViewportSize_(this.getRotation()),Xt=this.constraints_.resolution(bt,0,Gt,!0);this.targetCenter_=this.calculateCenterZoom(Xt,ut.anchor)}this.nextResolution_=ut.targetResolution,this.targetResolution_=bt,this.applyTargetState_(!0)}if(void 0!==ut.sourceRotation&&void 0!==ut.targetRotation){const bt=1===St?(0,v.$W)(ut.targetRotation+Math.PI,2*Math.PI)-Math.PI:ut.sourceRotation+St*(ut.targetRotation-ut.sourceRotation);if(ut.anchor){const Gt=this.constraints_.rotation(bt,!0);this.targetCenter_=this.calculateCenterRotate(Gt,ut.anchor)}this.nextRotation_=ut.targetRotation,this.targetRotation_=bt}if(this.applyTargetState_(!0),C=!0,!ut.complete)break}if(nt){this.animations_[D]=null,this.setHint(F.Z.ANIMATING,-1),this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN;const V=Y[0].callback;V&&E(V,!0)}}this.animations_=this.animations_.filter(Boolean),C&&void 0===this.updateAnimationKey_&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)))}calculateCenterRotate(x,C){let D;const Y=this.getCenterInternal();return void 0!==Y&&(D=[Y[0]-C[0],Y[1]-C[1]],(0,S.U1)(D,x-this.getRotation()),(0,S.IH)(D,C)),D}calculateCenterZoom(x,C){let D;const Y=this.getCenterInternal(),nt=this.getResolution();return void 0!==Y&&void 0!==nt&&(D=[C[0]-x*(C[0]-Y[0])/nt,C[1]-x*(C[1]-Y[1])/nt]),D}getViewportSize_(x){const C=this.viewportSize_;if(x){const D=C[0],Y=C[1];return[Math.abs(D*Math.cos(x))+Math.abs(Y*Math.sin(x)),Math.abs(D*Math.sin(x))+Math.abs(Y*Math.cos(x))]}return C}setViewportSize(x){this.viewportSize_=Array.isArray(x)?x.slice():[100,100],this.getAnimating()||this.resolveConstraints(0)}getCenter(){const x=this.getCenterInternal();return x&&(0,Z.lO)(x,this.getProjection())}getCenterInternal(){return this.get(k.Z.CENTER)}getConstraints(){return this.constraints_}getConstrainResolution(){return this.get("constrainResolution")}getHints(x){return void 0!==x?(x[0]=this.hints_[0],x[1]=this.hints_[1],x):this.hints_.slice()}calculateExtent(x){const C=this.calculateExtentInternal(x);return(0,Z.Fj)(C,this.getProjection())}calculateExtentInternal(x){x=x||this.getViewportSizeMinusPadding_();const C=this.getCenterInternal();(0,P.h)(C,1);const D=this.getResolution();(0,P.h)(void 0!==D,2);const Y=this.getRotation();return(0,P.h)(void 0!==Y,3),(0,c.p8)(C,D,Y,x)}getMaxResolution(){return this.maxResolution_}getMinResolution(){return this.minResolution_}getMaxZoom(){return this.getZoomForResolution(this.minResolution_)}setMaxZoom(x){this.applyOptions_(this.getUpdatedOptions_({maxZoom:x}))}getMinZoom(){return this.getZoomForResolution(this.maxResolution_)}setMinZoom(x){this.applyOptions_(this.getUpdatedOptions_({minZoom:x}))}setConstrainResolution(x){this.applyOptions_(this.getUpdatedOptions_({constrainResolution:x}))}getProjection(){return this.projection_}getResolution(){return this.get(k.Z.RESOLUTION)}getResolutions(){return this.resolutions_}getResolutionForExtent(x,C){return this.getResolutionForExtentInternal((0,Z.dY)(x,this.getProjection()),C)}getResolutionForExtentInternal(x,C){C=C||this.getViewportSizeMinusPadding_();const D=(0,c.dz)(x)/C[0],Y=(0,c.Cr)(x)/C[1];return Math.max(D,Y)}getResolutionForValueFunction(x){x=x||2;const C=this.getConstrainedResolution(this.maxResolution_),Y=Math.log(C/this.minResolution_)/Math.log(x);return function(nt){return C/Math.pow(x,nt*Y)}}getRotation(){return this.get(k.Z.ROTATION)}getValueForResolutionFunction(x){const C=Math.log(x||2),D=this.getConstrainedResolution(this.maxResolution_),nt=Math.log(D/this.minResolution_)/C;return function(V){return Math.log(D/V)/C/nt}}getViewportSizeMinusPadding_(x){let C=this.getViewportSize_(x);const D=this.padding_;return D&&(C=[C[0]-D[1]-D[3],C[1]-D[0]-D[2]]),C}getState(){const x=this.getProjection(),C=this.getResolution(),D=this.getRotation();let Y=this.getCenterInternal();const nt=this.padding_;if(nt){const V=this.getViewportSizeMinusPadding_();Y=A(Y,this.getViewportSize_(),[V[0]/2+nt[3],V[1]/2+nt[0]],C,D)}return{center:Y.slice(0),projection:void 0!==x?x:null,resolution:C,nextCenter:this.nextCenter_,nextResolution:this.nextResolution_,nextRotation:this.nextRotation_,rotation:D,zoom:this.getZoom()}}getViewStateAndExtent(){return{viewState:this.getState(),extent:this.calculateExtent()}}getZoom(){let x;const C=this.getResolution();return void 0!==C&&(x=this.getZoomForResolution(C)),x}getZoomForResolution(x){let D,Y,C=this.minZoom_||0;if(this.resolutions_){const nt=(0,r.h7)(this.resolutions_,x,1);C=nt,D=this.resolutions_[nt],Y=nt==this.resolutions_.length-1?2:D/this.resolutions_[nt+1]}else D=this.maxResolution_,Y=this.zoomFactor_;return C+Math.log(D/x)/Math.log(Y)}getResolutionForZoom(x){if(this.resolutions_){if(this.resolutions_.length<=1)return 0;const C=(0,v.uZ)(Math.floor(x),0,this.resolutions_.length-2);return this.resolutions_[C]/Math.pow(this.resolutions_[C]/this.resolutions_[C+1],(0,v.uZ)(x-C,0,1))}return this.maxResolution_/Math.pow(this.zoomFactor_,x-this.minZoom_)}fit(x,C){let D;if((0,P.h)(Array.isArray(x)||"function"==typeof x.getSimplifiedGeometry,24),Array.isArray(x)){(0,P.h)(!(0,c.xb)(x),25);const Y=(0,Z.dY)(x,this.getProjection());D=(0,y.oJ)(Y)}else if("Circle"===x.getType()){const Y=(0,Z.dY)(x.getExtent(),this.getProjection());D=(0,y.oJ)(Y),D.rotate(this.getRotation(),(0,c.qg)(Y))}else{const Y=(0,Z.Cs)();D=Y?x.clone().transform(Y,this.getProjection()):x}this.fitInternal(D,C)}rotatedExtentForGeometry(x){const C=this.getRotation(),D=Math.cos(C),Y=Math.sin(-C),nt=x.getFlatCoordinates(),V=x.getStride();let at=1/0,ut=1/0,Ct=-1/0,vt=-1/0;for(let St=0,bt=nt.length;St<bt;St+=V){const Gt=nt[St]*D-nt[St+1]*Y,Xt=nt[St]*Y+nt[St+1]*D;at=Math.min(at,Gt),ut=Math.min(ut,Xt),Ct=Math.max(Ct,Gt),vt=Math.max(vt,Xt)}return[at,ut,Ct,vt]}fitInternal(x,C){let D=(C=C||{}).size;D||(D=this.getViewportSizeMinusPadding_());const Y=void 0!==C.padding?C.padding:[0,0,0,0],nt=void 0!==C.nearest&&C.nearest;let V;V=void 0!==C.minResolution?C.minResolution:void 0!==C.maxZoom?this.getResolutionForZoom(C.maxZoom):0;const at=this.rotatedExtentForGeometry(x);let ut=this.getResolutionForExtentInternal(at,[D[0]-Y[1]-Y[3],D[1]-Y[0]-Y[2]]);ut=isNaN(ut)?V:Math.max(ut,V),ut=this.getConstrainedResolution(ut,nt?0:1);const Ct=this.getRotation(),vt=Math.sin(Ct),St=Math.cos(Ct),bt=(0,c.qg)(at);bt[0]+=(Y[1]-Y[3])/2*ut,bt[1]+=(Y[0]-Y[2])/2*ut;const te=this.getConstrainedCenter([bt[0]*St-bt[1]*vt,bt[1]*St+bt[0]*vt],ut),Vt=C.callback?C.callback:b.Zn;void 0!==C.duration?this.animateInternal({resolution:ut,center:te,duration:C.duration,easing:C.easing},Vt):(this.targetResolution_=ut,this.targetCenter_=te,this.applyTargetState_(!1,!0),E(Vt,!0))}centerOn(x,C,D){this.centerOnInternal((0,Z.Vs)(x,this.getProjection()),C,D)}centerOnInternal(x,C,D){this.setCenterInternal(A(x,C,D,this.getResolution(),this.getRotation()))}calculateCenterShift(x,C,D,Y){let nt;const V=this.padding_;if(V&&x){const at=this.getViewportSizeMinusPadding_(-D),ut=A(x,Y,[at[0]/2+V[3],at[1]/2+V[0]],C,D);nt=[x[0]-ut[0],x[1]-ut[1]]}return nt}isDef(){return!!this.getCenterInternal()&&void 0!==this.getResolution()}adjustCenter(x){const C=(0,Z.lO)(this.targetCenter_,this.getProjection());this.setCenter([C[0]+x[0],C[1]+x[1]])}adjustCenterInternal(x){const C=this.targetCenter_;this.setCenterInternal([C[0]+x[0],C[1]+x[1]])}adjustResolution(x,C){C=C&&(0,Z.Vs)(C,this.getProjection()),this.adjustResolutionInternal(x,C)}adjustResolutionInternal(x,C){const D=this.getAnimating()||this.getInteracting(),Y=this.getViewportSize_(this.getRotation()),nt=this.constraints_.resolution(this.targetResolution_*x,0,Y,D);C&&(this.targetCenter_=this.calculateCenterZoom(nt,C)),this.targetResolution_*=x,this.applyTargetState_()}adjustZoom(x,C){this.adjustResolution(Math.pow(this.zoomFactor_,-x),C)}adjustRotation(x,C){C&&(C=(0,Z.Vs)(C,this.getProjection())),this.adjustRotationInternal(x,C)}adjustRotationInternal(x,C){const D=this.getAnimating()||this.getInteracting(),Y=this.constraints_.rotation(this.targetRotation_+x,D);C&&(this.targetCenter_=this.calculateCenterRotate(Y,C)),this.targetRotation_+=x,this.applyTargetState_()}setCenter(x){this.setCenterInternal(x&&(0,Z.Vs)(x,this.getProjection()))}setCenterInternal(x){this.targetCenter_=x,this.applyTargetState_()}setHint(x,C){return this.hints_[x]+=C,this.changed(),this.hints_[x]}setResolution(x){this.targetResolution_=x,this.applyTargetState_()}setRotation(x){this.targetRotation_=x,this.applyTargetState_()}setZoom(x){this.setResolution(this.getResolutionForZoom(x))}applyTargetState_(x,C){const D=this.getAnimating()||this.getInteracting()||C,Y=this.constraints_.rotation(this.targetRotation_,D),nt=this.getViewportSize_(Y),V=this.constraints_.resolution(this.targetResolution_,0,nt,D),at=this.constraints_.center(this.targetCenter_,V,nt,D,this.calculateCenterShift(this.targetCenter_,V,Y,nt));this.get(k.Z.ROTATION)!==Y&&this.set(k.Z.ROTATION,Y),this.get(k.Z.RESOLUTION)!==V&&(this.set(k.Z.RESOLUTION,V),this.set("zoom",this.getZoom(),!0)),(!at||!this.get(k.Z.CENTER)||!(0,S.fS)(this.get(k.Z.CENTER),at))&&this.set(k.Z.CENTER,at),this.getAnimating()&&!x&&this.cancelAnimations(),this.cancelAnchor_=void 0}resolveConstraints(x,C,D){x=void 0!==x?x:200;const Y=C||0,nt=this.constraints_.rotation(this.targetRotation_),V=this.getViewportSize_(nt),at=this.constraints_.resolution(this.targetResolution_,Y,V),ut=this.constraints_.center(this.targetCenter_,at,V,!1,this.calculateCenterShift(this.targetCenter_,at,nt,V));if(0===x&&!this.cancelAnchor_)return this.targetResolution_=at,this.targetRotation_=nt,this.targetCenter_=ut,void this.applyTargetState_();D=D||(0===x?this.cancelAnchor_:void 0),this.cancelAnchor_=void 0,(this.getResolution()!==at||this.getRotation()!==nt||!this.getCenterInternal()||!(0,S.fS)(this.getCenterInternal(),ut))&&(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:nt,center:ut,resolution:at,duration:x,easing:m.Vv,anchor:D}))}beginInteraction(){this.resolveConstraints(0),this.setHint(F.Z.INTERACTING,1)}endInteraction(x,C,D){D=D&&(0,Z.Vs)(D,this.getProjection()),this.endInteractionInternal(x,C,D)}endInteractionInternal(x,C,D){this.getInteracting()&&(this.setHint(F.Z.INTERACTING,-1),this.resolveConstraints(x,C,D))}getConstrainedCenter(x,C){const D=this.getViewportSize_(this.getRotation());return this.constraints_.center(x,C||this.getResolution(),D)}getConstrainedZoom(x,C){const D=this.getResolutionForZoom(x);return this.getZoomForResolution(this.getConstrainedResolution(D,C))}getConstrainedResolution(x,C){C=C||0;const D=this.getViewportSize_(this.getRotation());return this.constraints_.resolution(x,C,D)}}},3701:(jt,ht,a)=>{"use strict";a.d(ht,{Z:()=>W});const W={ANIMATING:0,INTERACTING:1}},1409:(jt,ht,a)=>{"use strict";a.d(ht,{Z:()=>W});const W={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"}},9363:(jt,ht,a)=>{"use strict";function W(u,c,r){let d,e;r=r||F;let l=0,_=u.length,n=!1;for(;l<_;)d=l+(_-l>>1),e=+r(u[d],c),e<0?l=d+1:(_=d,n=!e);return n?l:~l}function F(u,c){return u>c?1:u<c?-1:0}function G(u,c,r){if(u[0]<=c)return 0;const d=u.length;if(c<=u[d-1])return d-1;if("function"==typeof r){for(let e=1;e<d;++e){const l=u[e];if(l===c)return e;if(l<c)return r(c,u[e-1],l)>0?e-1:e}return d-1}if(r>0){for(let e=1;e<d;++e)if(u[e]<c)return e-1;return d-1}if(r<0){for(let e=1;e<d;++e)if(u[e]<=c)return e;return d-1}for(let e=1;e<d;++e){if(u[e]==c)return e;if(u[e]<c)return u[e-1]-c<c-u[e]?e-1:e}return d-1}function Z(u,c,r){for(;c<r;){const d=u[c];u[c]=u[r],u[r]=d,++c,--r}}function b(u,c){const r=Array.isArray(c)?c:[c],d=r.length;for(let e=0;e<d;e++)u[u.length]=r[e]}function P(u,c){const r=u.length;if(r!==c.length)return!1;for(let d=0;d<r;d++)if(u[d]!==c[d])return!1;return!0}function f(u,c,r){const d=c||F;return u.every(function(e,l){if(0===l)return!0;const _=d(u[l-1],e);return!(_>0||r&&0===_)})}a.d(ht,{FZ:()=>Z,fS:()=>P,h7:()=>G,j2:()=>F,l7:()=>b,pT:()=>f,ry:()=>W})},9219:(jt,ht,a)=>{"use strict";a.d(ht,{h:()=>F});var W=a(1677);function F(k,G){if(!k)throw new W.Z(G)}},9818:(jt,ht,a)=>{"use strict";a.d(ht,{BB:()=>u,XC:()=>Z,_2:()=>P});var W=a(9219),F=a(3026);const k=/^#([a-f0-9]{3}|[a-f0-9]{4}(?:[a-f0-9]{2}){0,2})$/i,G=/^([a-z]*)$|^hsla?\(.*\)$/i;function Z(r){return"string"==typeof r?r:u(r)}const S=function(){const d={};let e=0;return function(l){let _;if(d.hasOwnProperty(l))_=d[l];else{if(e>=1024){let n=0;for(const g in d)3&n++||(delete d[g],--e)}_=function v(r){let d,e,l,_,n;if(G.exec(r)&&(r=function b(r){const d=document.createElement("div");if(d.style.color=r,""!==d.style.color){document.body.appendChild(d);const e=getComputedStyle(d).color;return document.body.removeChild(d),e}return""}(r)),k.exec(r)){const g=r.length-1;let m;m=g<=4?1:2;const y=4===g||8===g;d=parseInt(r.substr(1+0*m,m),16),e=parseInt(r.substr(1+1*m,m),16),l=parseInt(r.substr(1+2*m,m),16),_=y?parseInt(r.substr(1+3*m,m),16):255,1==m&&(d=(d<<4)+d,e=(e<<4)+e,l=(l<<4)+l,y&&(_=(_<<4)+_)),n=[d,e,l,_/255]}else r.startsWith("rgba(")?(n=r.slice(5,-1).split(",").map(Number),f(n)):r.startsWith("rgb(")?(n=r.slice(4,-1).split(",").map(Number),n.push(1),f(n)):(0,W.h)(!1,14);return n}(l),d[l]=_,++e}return _}}();function P(r){return Array.isArray(r)?r:S(r)}function f(r){return r[0]=(0,F.uZ)(r[0]+.5|0,0,255),r[1]=(0,F.uZ)(r[1]+.5|0,0,255),r[2]=(0,F.uZ)(r[2]+.5|0,0,255),r[3]=(0,F.uZ)(r[3],0,1),r}function u(r){let d=r[0];d!=(0|d)&&(d=d+.5|0);let e=r[1];e!=(0|e)&&(e=e+.5|0);let l=r[2];return l!=(0|l)&&(l=l+.5|0),"rgba("+d+","+e+","+l+","+(void 0===r[3]?1:Math.round(100*r[3])/100)+")"}},3836:(jt,ht,a)=>{"use strict";a.d(ht,{y:()=>F});var W=a(9818);function F(k){return Array.isArray(k)?(0,W.BB)(k):k}},6518:(jt,ht,a)=>{"use strict";a.d(ht,{ZK:()=>Z});const W={info:1,warn:2,error:3,none:4};let F=W.info;function Z(...S){F>W.warn||console.warn(...S)}},9854:(jt,ht,a)=>{"use strict";a.d(ht,{Z:()=>S});var W=a(2421),F=a(2431),k=a(4118),G=a(9363),Z=a(4211);const S=class b extends W.Z{constructor(v){v=v||{},super({element:document.createElement("div"),render:v.render,target:v.target}),this.ulElement_=document.createElement("ul"),this.collapsed_=void 0===v.collapsed||v.collapsed,this.userCollapsed_=this.collapsed_,this.overrideCollapsible_=void 0!==v.collapsible,this.collapsible_=void 0===v.collapsible||v.collapsible,this.collapsible_||(this.collapsed_=!1);const f=void 0!==v.className?v.className:"ol-attribution",u=void 0!==v.tipLabel?v.tipLabel:"Attributions",c=void 0!==v.expandClassName?v.expandClassName:f+"-expand",r=void 0!==v.collapseLabel?v.collapseLabel:"\u203a",d=void 0!==v.collapseClassName?v.collapseClassName:f+"-collapse";"string"==typeof r?(this.collapseLabel_=document.createElement("span"),this.collapseLabel_.textContent=r,this.collapseLabel_.className=d):this.collapseLabel_=r;const e=void 0!==v.label?v.label:"i";"string"==typeof e?(this.label_=document.createElement("span"),this.label_.textContent=e,this.label_.className=c):this.label_=e;const l=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_;this.toggleButton_=document.createElement("button"),this.toggleButton_.setAttribute("type","button"),this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_)),this.toggleButton_.title=u,this.toggleButton_.appendChild(l),this.toggleButton_.addEventListener(F.Z.CLICK,this.handleClick_.bind(this),!1);const n=this.element;n.className=f+" "+k.XV+" "+k.hg+(this.collapsed_&&this.collapsible_?" "+k.hN:"")+(this.collapsible_?"":" ol-uncollapsible"),n.appendChild(this.toggleButton_),n.appendChild(this.ulElement_),this.renderedAttributions_=[],this.renderedVisible_=!0}collectSourceAttributions_(v){const f=Array.from(new Set(this.getMap().getAllLayers().flatMap(c=>c.getAttributions(v)))),u=!this.getMap().getAllLayers().some(c=>c.getSource()&&!1===c.getSource().getAttributionsCollapsible());return this.overrideCollapsible_||this.setCollapsible(u),f}updateElement_(v){if(!v)return void(this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1));const f=this.collectSourceAttributions_(v),u=f.length>0;if(this.renderedVisible_!=u&&(this.element.style.display=u?"":"none",this.renderedVisible_=u),!(0,G.fS)(f,this.renderedAttributions_)){(0,Z.ep)(this.ulElement_);for(let c=0,r=f.length;c<r;++c){const d=document.createElement("li");d.innerHTML=f[c],this.ulElement_.appendChild(d)}this.renderedAttributions_=f}}handleClick_(v){v.preventDefault(),this.handleToggle_(),this.userCollapsed_=this.collapsed_}handleToggle_(){this.element.classList.toggle(k.hN),this.collapsed_?(0,Z.$H)(this.collapseLabel_,this.label_):(0,Z.$H)(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_,this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_))}getCollapsible(){return this.collapsible_}setCollapsible(v){this.collapsible_!==v&&(this.collapsible_=v,this.element.classList.toggle("ol-uncollapsible"),this.userCollapsed_&&this.handleToggle_())}setCollapsed(v){this.userCollapsed_=v,this.collapsible_&&this.collapsed_!==v&&this.handleToggle_()}getCollapsed(){return this.collapsed_}render(v){this.updateElement_(v.frameState)}}},2421:(jt,ht,a)=>{"use strict";a.d(ht,{Z:()=>S});var W=a(7300),F=a(5465),k=a(6077),G=a(7847),Z=a(4211);const S=class b extends W.Z{constructor(v){super();const f=v.element;f&&!v.target&&!f.style.pointerEvents&&(f.style.pointerEvents="auto"),this.element=f||null,this.target_=null,this.map_=null,this.listenerKeys=[],v.render&&(this.render=v.render),v.target&&this.setTarget(v.target)}disposeInternal(){(0,Z.ZF)(this.element),super.disposeInternal()}getMap(){return this.map_}setMap(v){this.map_&&(0,Z.ZF)(this.element);for(let f=0,u=this.listenerKeys.length;f<u;++f)(0,G.bN)(this.listenerKeys[f]);this.listenerKeys.length=0,this.map_=v,v&&((this.target_?this.target_:v.getOverlayContainerStopEvent()).appendChild(this.element),this.render!==k.Zn&&this.listenerKeys.push((0,G.oL)(v,F.Z.POSTRENDER,this.render,this)),v.render())}render(v){}setTarget(v){this.target_="string"==typeof v?document.getElementById(v):v}}},8861:(jt,ht,a)=>{"use strict";a.d(ht,{Z:()=>b});var W=a(2421),F=a(2431),k=a(4118),G=a(53);const b=class Z extends W.Z{constructor(P){P=P||{},super({element:document.createElement("div"),render:P.render,target:P.target});const v=void 0!==P.className?P.className:"ol-rotate",f=void 0!==P.label?P.label:"\u21e7",u=void 0!==P.compassClassName?P.compassClassName:"ol-compass";this.label_=null,"string"==typeof f?(this.label_=document.createElement("span"),this.label_.className=u,this.label_.textContent=f):(this.label_=f,this.label_.classList.add(u));const c=P.tipLabel?P.tipLabel:"Reset rotation",r=document.createElement("button");r.className=v+"-reset",r.setAttribute("type","button"),r.title=c,r.appendChild(this.label_),r.addEventListener(F.Z.CLICK,this.handleClick_.bind(this),!1);const e=this.element;e.className=v+" "+k.XV+" "+k.hg,e.appendChild(r),this.callResetNorth_=P.resetNorth?P.resetNorth:void 0,this.duration_=void 0!==P.duration?P.duration:250,this.autoHide_=void 0===P.autoHide||P.autoHide,this.rotation_=void 0,this.autoHide_&&this.element.classList.add(k.oj)}handleClick_(P){P.preventDefault(),void 0!==this.callResetNorth_?this.callResetNorth_():this.resetNorth_()}resetNorth_(){const v=this.getMap().getView();if(!v)return;const f=v.getRotation();void 0!==f&&(this.duration_>0&&f%(2*Math.PI)!=0?v.animate({rotation:0,duration:this.duration_,easing:G.Vv}):v.setRotation(0))}render(P){const v=P.frameState;if(!v)return;const f=v.viewState.rotation;if(f!=this.rotation_){const u="rotate("+f+"rad)";if(this.autoHide_){const c=this.element.classList.contains(k.oj);c||0!==f?c&&0!==f&&this.element.classList.remove(k.oj):this.element.classList.add(k.oj)}this.label_.style.transform=u}this.rotation_=f}}},8284:(jt,ht,a)=>{"use strict";a.d(ht,{Z:()=>b});var W=a(2421),F=a(2431),k=a(4118),G=a(53);const b=class Z extends W.Z{constructor(P){P=P||{},super({element:document.createElement("div"),target:P.target});const v=void 0!==P.className?P.className:"ol-zoom",f=void 0!==P.delta?P.delta:1,u=void 0!==P.zoomInClassName?P.zoomInClassName:v+"-in",c=void 0!==P.zoomOutClassName?P.zoomOutClassName:v+"-out",r=void 0!==P.zoomInLabel?P.zoomInLabel:"+",d=void 0!==P.zoomOutLabel?P.zoomOutLabel:"\u2013",e=void 0!==P.zoomInTipLabel?P.zoomInTipLabel:"Zoom in",l=void 0!==P.zoomOutTipLabel?P.zoomOutTipLabel:"Zoom out",_=document.createElement("button");_.className=u,_.setAttribute("type","button"),_.title=e,_.appendChild("string"==typeof r?document.createTextNode(r):r),_.addEventListener(F.Z.CLICK,this.handleClick_.bind(this,f),!1);const n=document.createElement("button");n.className=c,n.setAttribute("type","button"),n.title=l,n.appendChild("string"==typeof d?document.createTextNode(d):d),n.addEventListener(F.Z.CLICK,this.handleClick_.bind(this,-f),!1);const m=this.element;m.className=v+" "+k.XV+" "+k.hg,m.appendChild(_),m.appendChild(n),this.duration_=void 0!==P.duration?P.duration:250}handleClick_(P,v){v.preventDefault(),this.zoomByDelta_(P)}zoomByDelta_(P){const f=this.getMap().getView();if(!f)return;const u=f.getZoom();if(void 0!==u){const c=f.getConstrainedZoom(u+P);this.duration_>0?(f.getAnimating()&&f.cancelAnimations(),f.animate({zoom:c,duration:this.duration_,easing:G.Vv})):f.setZoom(c)}}}},1242:(jt,ht,a)=>{"use strict";a.d(ht,{Cf:()=>n,I8:()=>P,IH:()=>G,U1:()=>u,bA:()=>c,fS:()=>f,jk:()=>g,yZ:()=>_});var W=a(1316),F=a(3026),k=a(9258);function G(m,y){return m[0]+=+y[0],m[1]+=+y[1],m}function P(m,y,I){const O=(0,F.$W)(y+180,360)-180,E=Math.abs(3600*O),R=I||0;let N=Math.floor(E/3600),z=Math.floor((E-3600*N)/60),st=(0,F.FH)(E-3600*N-60*z,R);st>=60&&(st=0,z+=1),z>=60&&(z=0,N+=1);let A=N+"\xb0";return(0!==z||0!==st)&&(A+=" "+(0,k.v)(z,2)+"\u2032"),0!==st&&(A+=" "+(0,k.v)(st,2,R)+"\u2033"),0!==O&&(A+=" "+m.charAt(O<0?1:0)),A}function f(m,y){let I=!0;for(let O=m.length-1;O>=0;--O)if(m[O]!=y[O]){I=!1;break}return I}function u(m,y){const I=Math.cos(y),O=Math.sin(y),R=m[1]*I+m[0]*O;return m[0]=m[0]*I-m[1]*O,m[1]=R,m}function c(m,y){return m[0]*=y,m[1]*=y,m}function _(m,y){return function v(m,y,I){return m?y.replace("{x}",m[0].toFixed(I)).replace("{y}",m[1].toFixed(I)):""}(m,"{x}, {y}",y)}function n(m,y){if(y.canWrapX()){const I=(0,W.dz)(y.getExtent()),O=g(m,y,I);O&&(m[0]-=O*I)}return m}function g(m,y,I){const O=y.getExtent();let E=0;return y.canWrapX()&&(m[0]<O[0]||m[0]>O[2])&&(I=I||(0,W.dz)(O),E=Math.floor((m[0]-O[0])/I)),E}},4118:(jt,ht,a)=>{"use strict";a.d(ht,{$A:()=>F,Qi:()=>G,XV:()=>k,hN:()=>b,hg:()=>Z,oj:()=>W,p:()=>v});const W="ol-hidden",F="ol-selectable",k="ol-unselectable",G="ol-unsupported",Z="ol-control",b="ol-collapsed",S=new RegExp(["^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)","(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?","(?:small|large)|medium|smaller|larger|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))","(?:\\s*\\/\\s*(normal|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])?))","?\\s*([-,\\\"\\'\\sa-z]+?)\\s*$"].join(""),"i"),P=["style","variant","weight","size","lineHeight","family"],v=function(f){const u=f.match(S);if(!u)return null;const c={lineHeight:"normal",size:"1.2em",style:"normal",weight:"normal",variant:"normal"};for(let r=0,d=P.length;r<d;++r){const e=u[r+1];void 0!==e&&(c[P[r]]=e)}return c.families=c.family.split(/,\s?/),c}},4211:(jt,ht,a)=>{"use strict";a.d(ht,{$H:()=>b,E4:()=>F,Pb:()=>Z,ZF:()=>S,ep:()=>P,hF:()=>v,iO:()=>G,jy:()=>k});var W=a(3233);function F(f,u,c,r){let d;return d=c&&c.length?c.shift():W.Id?new OffscreenCanvas(f||300,u||300):document.createElement("canvas"),f&&(d.width=f),u&&(d.height=u),d.getContext("2d",r)}function k(f){const u=f.canvas;u.width=1,u.height=1,f.clearRect(0,0,1,1)}function G(f){let u=f.offsetWidth;const c=getComputedStyle(f);return u+=parseInt(c.marginLeft,10)+parseInt(c.marginRight,10),u}function Z(f){let u=f.offsetHeight;const c=getComputedStyle(f);return u+=parseInt(c.marginTop,10)+parseInt(c.marginBottom,10),u}function b(f,u){const c=u.parentNode;c&&c.replaceChild(f,u)}function S(f){return f&&f.parentNode?f.parentNode.removeChild(f):null}function P(f){for(;f.lastChild;)f.removeChild(f.lastChild)}function v(f,u){const c=f.childNodes;for(let r=0;;++r){const d=c[r],e=u[r];if(!d&&!e)break;if(d!==e){if(!d){f.appendChild(e);continue}if(!e){f.removeChild(d),--r;continue}f.insertBefore(e,d)}}}},53:(jt,ht,a)=>{"use strict";function W(b){return Math.pow(b,3)}function F(b){return 1-W(1-b)}function k(b){return 3*b*b-2*b*b*b}function G(b){return b}a.d(ht,{GE:()=>G,Vv:()=>F,YQ:()=>W,rd:()=>k})},7847:(jt,ht,a)=>{"use strict";a.d(ht,{Vx:()=>k,bN:()=>G,oL:()=>F});var W=a(5526);function F(Z,b,S,P,v){if(P&&P!==Z&&(S=S.bind(P)),v){const u=S;S=function(){Z.removeEventListener(b,S),u.apply(this,arguments)}}const f={target:Z,type:b,listener:S};return Z.addEventListener(b,S),f}function k(Z,b,S,P){return F(Z,b,S,P,!0)}function G(Z){Z&&Z.target&&(Z.target.removeEventListener(Z.type,Z.listener),(0,W.Z)(Z))}},8802:(jt,ht,a)=>{"use strict";a.d(ht,{ZP:()=>G});const G=class W{constructor(b){this.type=b,this.target=null}preventDefault(){this.defaultPrevented=!0}stopPropagation(){this.propagationStopped=!0}}},2431:(jt,ht,a)=>{"use strict";a.d(ht,{Z:()=>W});const W={CHANGE:"change",ERROR:"error",BLUR:"blur",CLEAR:"clear",CONTEXTMENU:"contextmenu",CLICK:"click",DBLCLICK:"dblclick",DRAGENTER:"dragenter",DRAGOVER:"dragover",DROP:"drop",FOCUS:"focus",KEYDOWN:"keydown",KEYPRESS:"keypress",LOAD:"load",RESIZE:"resize",TOUCHMOVE:"touchmove",WHEEL:"wheel"}},9608:(jt,ht,a)=>{"use strict";a.d(ht,{Z:()=>b});var W=a(5337),F=a(8802),k=a(6077),G=a(5526);const b=class Z extends W.Z{constructor(P){super(),this.eventTarget_=P,this.pendingRemovals_=null,this.dispatching_=null,this.listeners_=null}addEventListener(P,v){if(!P||!v)return;const f=this.listeners_||(this.listeners_={}),u=f[P]||(f[P]=[]);u.includes(v)||u.push(v)}dispatchEvent(P){const v="string"==typeof P,f=v?P:P.type,u=this.listeners_&&this.listeners_[f];if(!u)return;const c=v?new F.ZP(P):P;c.target||(c.target=this.eventTarget_||this);const r=this.dispatching_||(this.dispatching_={}),d=this.pendingRemovals_||(this.pendingRemovals_={});let e;f in r||(r[f]=0,d[f]=0),++r[f];for(let l=0,_=u.length;l<_;++l)if(e="handleEvent"in u[l]?u[l].handleEvent(c):u[l].call(this,c),!1===e||c.propagationStopped){e=!1;break}if(0==--r[f]){let l=d[f];for(delete d[f];l--;)this.removeEventListener(f,k.Zn);delete r[f]}return e}disposeInternal(){this.listeners_&&(0,G.Z)(this.listeners_)}getListeners(P){return this.listeners_&&this.listeners_[P]||void 0}hasListener(P){return!!this.listeners_&&(P?P in this.listeners_:Object.keys(this.listeners_).length>0)}removeEventListener(P,v){const f=this.listeners_&&this.listeners_[P];if(f){const u=f.indexOf(v);-1!==u&&(this.pendingRemovals_&&P in this.pendingRemovals_?(f[u]=k.Zn,++this.pendingRemovals_[P]):(f.splice(u,1),0===f.length&&delete this.listeners_[P]))}}}},3990:(jt,ht,a)=>{"use strict";a.d(ht,{$6:()=>G,Bx:()=>v,QL:()=>y,TN:()=>m,Xp:()=>E,a5:()=>n,aj:()=>b,rM:()=>l,v8:()=>u,vY:()=>g,yZ:()=>P});var W=a(6077),F=a(3233),k=a(9219);function G(R){const N=arguments;return function(z){let st=!0;for(let A=0,L=N.length;A<L&&(st=st&&N[A](z),st);++A);return st}}const b=function(R){const N=R.originalEvent;return N.altKey&&!(N.metaKey||N.ctrlKey)&&N.shiftKey},P=function(R){return!R.map.getTargetElement().hasAttribute("tabindex")||function(R){const N=R.map.getTargetElement(),z=R.map.getOwnerDocument().activeElement;return N.contains(z)}(R)},v=W.uX,u=function(R){const N=R.originalEvent;return 0==N.button&&!(F.G$&&F.tK&&N.ctrlKey)},l=function(R){const N=R.originalEvent;return!N.altKey&&!(N.metaKey||N.ctrlKey)&&!N.shiftKey},n=function(R){const N=R.originalEvent;return F.tK?N.metaKey:N.ctrlKey},g=function(R){const N=R.originalEvent;return!N.altKey&&!(N.metaKey||N.ctrlKey)&&N.shiftKey},m=function(R){const N=R.originalEvent,z=N.target.tagName;return"INPUT"!==z&&"SELECT"!==z&&"TEXTAREA"!==z&&!N.target.isContentEditable},y=function(R){const N=R.originalEvent;return(0,k.h)(void 0!==N,56),"mouse"==N.pointerType},E=function(R){const N=R.originalEvent;return(0,k.h)(void 0!==N,56),N.isPrimary&&0===N.button}},1316:(jt,ht,a)=>{"use strict";a.d(ht,{Cf:()=>de,Cr:()=>nt,EO:()=>te,Ed:()=>at,GN:()=>_,H6:()=>z,H9:()=>Vt,HK:()=>e,I7:()=>_e,MV:()=>Re,Ne:()=>he,T9:()=>r,Wj:()=>I,Xv:()=>St,YN:()=>d,b8:()=>P,bg:()=>st,d9:()=>b,dY:()=>Y,dz:()=>bt,f3:()=>Z,fS:()=>g,g0:()=>x,hC:()=>A,hI:()=>k,iW:()=>m,jE:()=>f,kK:()=>Gt,l7:()=>y,lJ:()=>c,p8:()=>D,pX:()=>u,qP:()=>E,qf:()=>S,qg:()=>w,r4:()=>v,rL:()=>vt,w$:()=>L,xb:()=>Xt});var W=a(6600),F=a(9219);function k(gt){const Rt=[1/0,1/0,-1/0,-1/0];for(let Ft=0,Yt=gt.length;Ft<Yt;++Ft)I(Rt,gt[Ft]);return Rt}function Z(gt,Rt,Ft){return Ft?(Ft[0]=gt[0]-Rt,Ft[1]=gt[1]-Rt,Ft[2]=gt[2]+Rt,Ft[3]=gt[3]+Rt,Ft):[gt[0]-Rt,gt[1]-Rt,gt[2]+Rt,gt[3]+Rt]}function b(gt,Rt){return Rt?(Rt[0]=gt[0],Rt[1]=gt[1],Rt[2]=gt[2],Rt[3]=gt[3],Rt):gt.slice()}function S(gt,Rt,Ft){let Yt,ge;return Yt=Rt<gt[0]?gt[0]-Rt:gt[2]<Rt?Rt-gt[2]:0,ge=Ft<gt[1]?gt[1]-Ft:gt[3]<Ft?Ft-gt[3]:0,Yt*Yt+ge*ge}function P(gt,Rt){return f(gt,Rt[0],Rt[1])}function v(gt,Rt){return gt[0]<=Rt[0]&&Rt[2]<=gt[2]&&gt[1]<=Rt[1]&&Rt[3]<=gt[3]}function f(gt,Rt,Ft){return gt[0]<=Rt&&Rt<=gt[2]&&gt[1]<=Ft&&Ft<=gt[3]}function u(gt,Rt){const ft=Rt[0],Pt=Rt[1];let Nt=W.Z.UNKNOWN;return ft<gt[0]?Nt|=W.Z.LEFT:ft>gt[2]&&(Nt|=W.Z.RIGHT),Pt<gt[1]?Nt|=W.Z.BELOW:Pt>gt[3]&&(Nt|=W.Z.ABOVE),Nt===W.Z.UNKNOWN&&(Nt=W.Z.INTERSECTING),Nt}function c(){return[1/0,1/0,-1/0,-1/0]}function r(gt,Rt,Ft,Yt,ge){return ge?(ge[0]=gt,ge[1]=Rt,ge[2]=Ft,ge[3]=Yt,ge):[gt,Rt,Ft,Yt]}function d(gt){return r(1/0,1/0,-1/0,-1/0,gt)}function e(gt,Rt){const Ft=gt[0],Yt=gt[1];return r(Ft,Yt,Ft,Yt,Rt)}function _(gt,Rt,Ft,Yt,ge){return E(d(ge),gt,Rt,Ft,Yt)}function g(gt,Rt){return gt[0]==Rt[0]&&gt[2]==Rt[2]&&gt[1]==Rt[1]&&gt[3]==Rt[3]}function m(gt,Rt,Ft){return Math.abs(gt[0]-Rt[0])<Ft&&Math.abs(gt[2]-Rt[2])<Ft&&Math.abs(gt[1]-Rt[1])<Ft&&Math.abs(gt[3]-Rt[3])<Ft}function y(gt,Rt){return Rt[0]<gt[0]&&(gt[0]=Rt[0]),Rt[2]>gt[2]&&(gt[2]=Rt[2]),Rt[1]<gt[1]&&(gt[1]=Rt[1]),Rt[3]>gt[3]&&(gt[3]=Rt[3]),gt}function I(gt,Rt){Rt[0]<gt[0]&&(gt[0]=Rt[0]),Rt[0]>gt[2]&&(gt[2]=Rt[0]),Rt[1]<gt[1]&&(gt[1]=Rt[1]),Rt[1]>gt[3]&&(gt[3]=Rt[1])}function E(gt,Rt,Ft,Yt,ge){for(;Ft<Yt;Ft+=ge)N(gt,Rt[Ft],Rt[Ft+1]);return gt}function N(gt,Rt,Ft){gt[0]=Math.min(gt[0],Rt),gt[1]=Math.min(gt[1],Ft),gt[2]=Math.max(gt[2],Rt),gt[3]=Math.max(gt[3],Ft)}function z(gt,Rt){let Ft;return Ft=Rt(A(gt)),!!(Ft||(Ft=Rt(L(gt)),Ft)||(Ft=Rt(St(gt)),Ft)||(Ft=Rt(vt(gt)),Ft))&&Ft}function st(gt){let Rt=0;return Xt(gt)||(Rt=bt(gt)*nt(gt)),Rt}function A(gt){return[gt[0],gt[1]]}function L(gt){return[gt[2],gt[1]]}function w(gt){return[(gt[0]+gt[2])/2,(gt[1]+gt[3])/2]}function x(gt,Rt){let Ft;return"bottom-left"===Rt?Ft=A(gt):"bottom-right"===Rt?Ft=L(gt):"top-left"===Rt?Ft=vt(gt):"top-right"===Rt?Ft=St(gt):(0,F.h)(!1,13),Ft}function D(gt,Rt,Ft,Yt,ge){const[$t,ft,Pt,Nt,zt,Bt,ue,ve]=Y(gt,Rt,Ft,Yt);return r(Math.min($t,Pt,zt,ue),Math.min(ft,Nt,Bt,ve),Math.max($t,Pt,zt,ue),Math.max(ft,Nt,Bt,ve),ge)}function Y(gt,Rt,Ft,Yt){const ge=Rt*Yt[0]/2,$t=Rt*Yt[1]/2,ft=Math.cos(Ft),Pt=Math.sin(Ft),Nt=ge*ft,zt=ge*Pt,Bt=$t*ft,ue=$t*Pt,ve=gt[0],Ee=gt[1];return[ve-Nt+ue,Ee-zt-Bt,ve-Nt-ue,Ee-zt+Bt,ve+Nt-ue,Ee+zt+Bt,ve+Nt+ue,Ee+zt-Bt,ve-Nt+ue,Ee-zt-Bt]}function nt(gt){return gt[3]-gt[1]}function at(gt,Rt,Ft){const Yt=Ft||[1/0,1/0,-1/0,-1/0];return Gt(gt,Rt)?(Yt[0]=gt[0]>Rt[0]?gt[0]:Rt[0],Yt[1]=gt[1]>Rt[1]?gt[1]:Rt[1],Yt[2]=gt[2]<Rt[2]?gt[2]:Rt[2],Yt[3]=gt[3]<Rt[3]?gt[3]:Rt[3]):d(Yt),Yt}function vt(gt){return[gt[0],gt[3]]}function St(gt){return[gt[2],gt[3]]}function bt(gt){return gt[2]-gt[0]}function Gt(gt,Rt){return gt[0]<=Rt[2]&&gt[2]>=Rt[0]&&gt[1]<=Rt[3]&&gt[3]>=Rt[1]}function Xt(gt){return gt[2]<gt[0]||gt[3]<gt[1]}function te(gt,Rt){return Rt?(Rt[0]=gt[0],Rt[1]=gt[1],Rt[2]=gt[2],Rt[3]=gt[3],Rt):gt}function Vt(gt,Rt){const Ft=(gt[2]-gt[0])/2*(Rt-1),Yt=(gt[3]-gt[1])/2*(Rt-1);gt[0]-=Ft,gt[2]+=Ft,gt[1]-=Yt,gt[3]+=Yt}function _e(gt,Rt,Ft){let Yt=!1;const ge=u(gt,Rt),$t=u(gt,Ft);if(ge===W.Z.INTERSECTING||$t===W.Z.INTERSECTING)Yt=!0;else{const ft=gt[0],Pt=gt[1],Nt=gt[2],zt=gt[3],ve=Ft[0],Ee=Ft[1],Mt=(Ee-Rt[1])/(ve-Rt[0]);let rt,q;$t&W.Z.ABOVE&&!(ge&W.Z.ABOVE)&&(rt=ve-(Ee-zt)/Mt,Yt=rt>=ft&&rt<=Nt),!Yt&&$t&W.Z.RIGHT&&!(ge&W.Z.RIGHT)&&(q=Ee-(ve-Nt)*Mt,Yt=q>=Pt&&q<=zt),!Yt&&$t&W.Z.BELOW&&!(ge&W.Z.BELOW)&&(rt=ve-(Ee-Pt)/Mt,Yt=rt>=ft&&rt<=Nt),!Yt&&$t&W.Z.LEFT&&!(ge&W.Z.LEFT)&&(q=Ee-(ve-ft)*Mt,Yt=q>=Pt&&q<=zt)}return Yt}function he(gt,Rt,Ft,Yt){if(Xt(gt))return d(Ft);let ge=[];if(Yt>1){const Pt=gt[2]-gt[0],Nt=gt[3]-gt[1];for(let zt=0;zt<Yt;++zt)ge.push(gt[0]+Pt*zt/Yt,gt[1],gt[2],gt[1]+Nt*zt/Yt,gt[2]-Pt*zt/Yt,gt[3],gt[0],gt[3]-Nt*zt/Yt)}else ge=[gt[0],gt[1],gt[2],gt[1],gt[2],gt[3],gt[0],gt[3]];Rt(ge,ge,2);const $t=[],ft=[];for(let Pt=0,Nt=ge.length;Pt<Nt;Pt+=2)$t.push(ge[Pt]),ft.push(ge[Pt+1]);return function G(gt,Rt,Ft){return r(Math.min.apply(null,gt),Math.min.apply(null,Rt),Math.max.apply(null,gt),Math.max.apply(null,Rt),Ft)}($t,ft,Ft)}function de(gt,Rt){const Ft=Rt.getExtent(),Yt=w(gt);if(Rt.canWrapX()&&(Yt[0]<Ft[0]||Yt[0]>=Ft[2])){const ge=bt(Ft),ft=Math.floor((Yt[0]-Ft[0])/ge)*ge;gt[0]-=ft,gt[2]-=ft}return gt}function Re(gt,Rt){if(Rt.canWrapX()){const Ft=Rt.getExtent();if(!isFinite(gt[0])||!isFinite(gt[2]))return[[Ft[0],gt[1],Ft[2],gt[3]]];de(gt,Rt);const Yt=bt(Ft);if(bt(gt)>Yt)return[[Ft[0],gt[1],Ft[2],gt[3]]];if(gt[0]<Ft[0])return[[gt[0]+Yt,gt[1],Ft[2],gt[3]],[Ft[0],gt[1],gt[2],gt[3]]];if(gt[2]>Ft[2])return[[gt[0],gt[1],Ft[2],gt[3]],[Ft[0],gt[1],gt[2]-Yt,gt[3]]]}return[gt]}},6600:(jt,ht,a)=>{"use strict";a.d(ht,{Z:()=>W});const W={UNKNOWN:0,INTERSECTING:1,ABOVE:2,RIGHT:4,BELOW:8,LEFT:16}},6634:(jt,ht,a)=>{"use strict";a.d(ht,{Be:()=>G,ov:()=>k});var W=a(6077);let F=!1;function k(b,S,P,v,f,u,c){const r=new XMLHttpRequest;r.open("GET","function"==typeof b?b(P,v,f):b,!0),"arraybuffer"==S.getType()&&(r.responseType="arraybuffer"),r.withCredentials=F,r.onload=function(d){if(!r.status||r.status>=200&&r.status<300){const e=S.getType();let l;"json"==e||"text"==e?l=r.responseText:"xml"==e?(l=r.responseXML,l||(l=(new DOMParser).parseFromString(r.responseText,"application/xml"))):"arraybuffer"==e&&(l=r.response),l?u(S.readFeatures(l,{extent:P,featureProjection:f}),S.readProjection(l)):c()}else c()},r.onerror=c,r.send()}function G(b,S){return function(P,v,f,u,c){const r=this;k(b,S,P,v,f,function(d,e){r.addFeatures(d),void 0!==u&&u(d)},c||W.Zn)}}},8387:(jt,ht,a)=>{"use strict";a.d(ht,{ZP:()=>G,fI:()=>Z});var W=a(3089),F=a(7021);const G=class k{constructor(){this.dataProjection=void 0,this.defaultFeatureProjection=void 0,this.supportedMediaTypes=null}getReadOptions(P,v){if(v){let f=v.dataProjection?(0,F.U2)(v.dataProjection):this.readProjection(P);v.extent&&f&&"tile-pixels"===f.getUnits()&&(f=(0,F.U2)(f),f.setWorldExtent(v.extent)),v={dataProjection:f,featureProjection:v.featureProjection}}return this.adaptOptions(v)}adaptOptions(P){return Object.assign({dataProjection:this.dataProjection,featureProjection:this.defaultFeatureProjection},P)}getType(){return(0,W.O3)()}readFeature(P,v){return(0,W.O3)()}readFeatures(P,v){return(0,W.O3)()}readGeometry(P,v){return(0,W.O3)()}readProjection(P){return(0,W.O3)()}writeFeature(P,v){return(0,W.O3)()}writeFeatures(P,v){return(0,W.O3)()}writeGeometry(P,v){return(0,W.O3)()}};function Z(S,P,v){const f=v?(0,F.U2)(v.featureProjection):null,u=v?(0,F.U2)(v.dataProjection):null;let c;if(c=f&&u&&!(0,F.OP)(f,u)?(P?S.clone():S).transform(P?f:u,P?u:f):S,P&&v&&void 0!==v.decimals){const r=Math.pow(10,v.decimals),d=function(e){for(let l=0,_=e.length;l<_;++l)e[l]=Math.round(e[l]*r)/r;return e};c===S&&(c=S.clone()),c.applyTransform(d)}return c}},1539:(jt,ht,a)=>{"use strict";a.d(ht,{Z:()=>w});var W=a(6626),F=a(3007),k=a(6415),G=a(5934),Z=a(1684),b=a(1506),S=a(2973),P=a(8382),v=a(3435),f=a(9219),u=a(7021),c=a(5526),r=a(8387);function e(x,C){if(!x)return null;let D;switch(x.type){case"Point":D=function _(x){return new P.Z(x.coordinates)}(x);break;case"LineString":D=function n(x){return new G.Z(x.coordinates)}(x);break;case"Polygon":D=function I(x){return new v.ZP(x.coordinates)}(x);break;case"MultiPoint":D=function m(x){return new b.Z(x.coordinates)}(x);break;case"MultiLineString":D=function g(x){return new Z.Z(x.coordinates)}(x);break;case"MultiPolygon":D=function y(x){return new S.Z(x.coordinates)}(x);break;case"GeometryCollection":D=function l(x,C){const D=x.geometries.map(function(Y){return e(Y,C)});return new F.Z(D)}(x);break;default:throw new Error("Unsupported GeoJSON type: "+x.type)}return(0,r.fI)(D,!1,C)}function O(x,C){const D=(x=(0,r.fI)(x,!0,C)).getType();let Y;switch(D){case"Point":Y=function A(x,C){return{type:"Point",coordinates:x.getCoordinates()}}(x);break;case"LineString":Y=function R(x,C){return{type:"LineString",coordinates:x.getCoordinates()}}(x);break;case"Polygon":Y=function L(x,C){let D;return C&&(D=C.rightHanded),{type:"Polygon",coordinates:x.getCoordinates(D)}}(x,C);break;case"MultiPoint":Y=function z(x,C){return{type:"MultiPoint",coordinates:x.getCoordinates()}}(x);break;case"MultiLineString":Y=function N(x,C){return{type:"MultiLineString",coordinates:x.getCoordinates()}}(x);break;case"MultiPolygon":Y=function st(x,C){let D;return C&&(D=C.rightHanded),{type:"MultiPolygon",coordinates:x.getCoordinates(D)}}(x,C);break;case"GeometryCollection":Y=function E(x,C){return delete(C=Object.assign({},C)).featureProjection,{type:"GeometryCollection",geometries:x.getGeometriesArray().map(function(Y){return O(Y,C)})}}(x,C);break;case"Circle":Y={type:"GeometryCollection",geometries:[]};break;default:throw new Error("Unsupported geometry type: "+D)}return Y}const w=class d extends k.Z{constructor(C){C=C||{},super(),this.dataProjection=(0,u.U2)(C.dataProjection?C.dataProjection:"EPSG:4326"),C.featureProjection&&(this.defaultFeatureProjection=(0,u.U2)(C.featureProjection)),this.geometryName_=C.geometryName,this.extractGeometryName_=C.extractGeometryName,this.supportedMediaTypes=["application/geo+json","application/vnd.geo+json"]}readFeatureFromObject(C,D){let Y=null;Y="Feature"===C.type?C:{type:"Feature",geometry:C,properties:null};const nt=e(Y.geometry,D),V=new W.Z;return this.geometryName_?V.setGeometryName(this.geometryName_):this.extractGeometryName_&&"geometry_name"in Y!==void 0&&V.setGeometryName(Y.geometry_name),V.setGeometry(nt),"id"in Y&&V.setId(Y.id),Y.properties&&V.setProperties(Y.properties,!0),V}readFeaturesFromObject(C,D){let nt=null;if("FeatureCollection"===C.type){nt=[];const at=C.features;for(let ut=0,Ct=at.length;ut<Ct;++ut)nt.push(this.readFeatureFromObject(at[ut],D))}else nt=[this.readFeatureFromObject(C,D)];return nt}readGeometryFromObject(C,D){return e(C,D)}readProjectionFromObject(C){const D=C.crs;let Y;return D?"name"==D.type?Y=(0,u.U2)(D.properties.name):"EPSG"===D.type?Y=(0,u.U2)("EPSG:"+D.properties.code):(0,f.h)(!1,36):Y=this.dataProjection,Y}writeFeatureObject(C,D){D=this.adaptOptions(D);const Y={type:"Feature",geometry:null,properties:null},nt=C.getId();if(void 0!==nt&&(Y.id=nt),!C.hasProperties())return Y;const V=C.getProperties(),at=C.getGeometry();return at&&(Y.geometry=O(at,D),delete V[C.getGeometryName()]),(0,c.x)(V)||(Y.properties=V),Y}writeFeaturesObject(C,D){D=this.adaptOptions(D);const Y=[];for(let nt=0,V=C.length;nt<V;++nt)Y.push(this.writeFeatureObject(C[nt],D));return{type:"FeatureCollection",features:Y}}writeGeometryObject(C,D){return O(C,this.adaptOptions(D))}}},6415:(jt,ht,a)=>{"use strict";a.d(ht,{Z:()=>Z});var W=a(8387),F=a(3089);function G(b){return"string"==typeof b?JSON.parse(b)||null:null!==b?b:null}const Z=class k extends W.ZP{constructor(){super()}getType(){return"json"}readFeature(S,P){return this.readFeatureFromObject(G(S),this.getReadOptions(S,P))}readFeatures(S,P){return this.readFeaturesFromObject(G(S),this.getReadOptions(S,P))}readFeatureFromObject(S,P){return(0,F.O3)()}readFeaturesFromObject(S,P){return(0,F.O3)()}readGeometry(S,P){return this.readGeometryFromObject(G(S),this.getReadOptions(S,P))}readGeometryFromObject(S,P){return(0,F.O3)()}readProjection(S){return this.readProjectionFromObject(G(S))}readProjectionFromObject(S){return(0,F.O3)()}writeFeature(S,P){return JSON.stringify(this.writeFeatureObject(S,P))}writeFeatureObject(S,P){return(0,F.O3)()}writeFeatures(S,P){return JSON.stringify(this.writeFeaturesObject(S,P))}writeFeaturesObject(S,P){return(0,F.O3)()}writeGeometry(S,P){return JSON.stringify(this.writeGeometryObject(S,P))}writeGeometryObject(S,P){return(0,F.O3)()}}},6377:(jt,ht,a)=>{"use strict";a.d(ht,{ZP:()=>Ys});var W=a(6626),F=a(5505),k=a(3007),G=a(1485),Z=a(4847),b=a(5934),S=a(1684),P=a(1506),v=a(2973),f=a(8382),u=a(3435),c=a(4396),r=a(1949),d=a(7202),e=a(8387),l=a(3089),_=a(9363),n=a(2659);const m=class g extends e.ZP{constructor(){super(),this.xmlSerializer_=(0,n.xc)()}getType(){return"xml"}readFeature(ot,dt){if(!ot)return null;if("string"==typeof ot){const mt=(0,n.Qc)(ot);return this.readFeatureFromDocument(mt,dt)}return(0,n.qk)(ot)?this.readFeatureFromDocument(ot,dt):this.readFeatureFromNode(ot,dt)}readFeatureFromDocument(ot,dt){const mt=this.readFeaturesFromDocument(ot,dt);return mt.length>0?mt[0]:null}readFeatureFromNode(ot,dt){return null}readFeatures(ot,dt){if(!ot)return[];if("string"==typeof ot){const mt=(0,n.Qc)(ot);return this.readFeaturesFromDocument(mt,dt)}return(0,n.qk)(ot)?this.readFeaturesFromDocument(ot,dt):this.readFeaturesFromNode(ot,dt)}readFeaturesFromDocument(ot,dt){const mt=[];for(let wt=ot.firstChild;wt;wt=wt.nextSibling)wt.nodeType==Node.ELEMENT_NODE&&(0,_.l7)(mt,this.readFeaturesFromNode(wt,dt));return mt}readFeaturesFromNode(ot,dt){return(0,l.O3)()}readGeometry(ot,dt){if(!ot)return null;if("string"==typeof ot){const mt=(0,n.Qc)(ot);return this.readGeometryFromDocument(mt,dt)}return(0,n.qk)(ot)?this.readGeometryFromDocument(ot,dt):this.readGeometryFromNode(ot,dt)}readGeometryFromDocument(ot,dt){return null}readGeometryFromNode(ot,dt){return null}readProjection(ot){if(!ot)return null;if("string"==typeof ot){const dt=(0,n.Qc)(ot);return this.readProjectionFromDocument(dt)}return(0,n.qk)(ot)?this.readProjectionFromDocument(ot):this.readProjectionFromNode(ot)}readProjectionFromDocument(ot){return this.dataProjection}readProjectionFromNode(ot){return this.dataProjection}writeFeature(ot,dt){const mt=this.writeFeatureNode(ot,dt);return this.xmlSerializer_.serializeToString(mt)}writeFeatureNode(ot,dt){return null}writeFeatures(ot,dt){const mt=this.writeFeaturesNode(ot,dt);return this.xmlSerializer_.serializeToString(mt)}writeFeaturesNode(ot,dt){return null}writeGeometry(ot,dt){const mt=this.writeGeometryNode(ot,dt);return this.xmlSerializer_.serializeToString(mt)}writeGeometryNode(ot,dt){return null}};var y=a(9818),I=a(9219),O=a(7021),E=a(1005),R=a(3026);const N=["http://www.google.com/kml/ext/2.2"],z=[null,"http://earth.google.com/kml/2.0","http://earth.google.com/kml/2.1","http://earth.google.com/kml/2.2","http://www.opengis.net/kml/2.2"],A={fraction:"fraction",pixels:"pixels",insetPixels:"pixels"},L=(0,n.C5)(z,{ExtendedData:gi,Region:pi,MultiGeometry:(0,n.Pr)(Jt,"geometry"),LineString:(0,n.Pr)(_t,"geometry"),LinearRing:(0,n.Pr)(pt,"geometry"),Point:(0,n.Pr)(ie,"geometry"),Polygon:(0,n.Pr)(Pe,"geometry"),Style:(0,n.Pr)(Fe),StyleMap:function vi(Kt,ot){const dt=it.call(this,Kt,ot);if(!dt)return;const mt=ot[ot.length-1];Array.isArray(dt)?mt.Style=dt:"string"==typeof dt?mt.styleUrl=dt:(0,I.h)(!1,38)},address:(0,n.Pr)(E.s2),description:(0,n.Pr)(E.s2),name:(0,n.Pr)(E.s2),open:(0,n.Pr)(E.ud),phoneNumber:(0,n.Pr)(E.s2),styleUrl:(0,n.Pr)(q),visibility:(0,n.Pr)(E.ud)},(0,n.C5)(N,{MultiTrack:(0,n.Pr)(function ke(Kt,ot){const dt=(0,n.O)([],Ze,Kt,ot);if(dt)return new S.Z(dt)},"geometry"),Track:(0,n.Pr)(Je,"geometry")})),w=(0,n.C5)(z,{ExtendedData:gi,Region:pi,Link:function Ri(Kt,ot){(0,n.T3)(x,Kt,ot)},address:(0,n.Pr)(E.s2),description:(0,n.Pr)(E.s2),name:(0,n.Pr)(E.s2),open:(0,n.Pr)(E.ud),phoneNumber:(0,n.Pr)(E.s2),visibility:(0,n.Pr)(E.ud)}),x=(0,n.C5)(z,{href:(0,n.Pr)(rt)}),C=(0,n.C5)(z,{Altitude:(0,n.Pr)(E.fy),Longitude:(0,n.Pr)(E.fy),Latitude:(0,n.Pr)(E.fy),Tilt:(0,n.Pr)(E.fy),AltitudeMode:(0,n.Pr)(E.s2),Heading:(0,n.Pr)(E.fy),Roll:(0,n.Pr)(E.fy)}),D=(0,n.C5)(z,{LatLonAltBox:function Gi(Kt,ot){const dt=(0,n.O)({},ri,Kt,ot);if(!dt)return;const mt=ot[ot.length-1],wt=[parseFloat(dt.west),parseFloat(dt.south),parseFloat(dt.east),parseFloat(dt.north)];mt.extent=wt,mt.altitudeMode=dt.altitudeMode,mt.minAltitude=parseFloat(dt.minAltitude),mt.maxAltitude=parseFloat(dt.maxAltitude)},Lod:function ai(Kt,ot){const dt=(0,n.O)({},Pi,Kt,ot);if(!dt)return;const mt=ot[ot.length-1];mt.minLodPixels=parseFloat(dt.minLodPixels),mt.maxLodPixels=parseFloat(dt.maxLodPixels),mt.minFadeExtent=parseFloat(dt.minFadeExtent),mt.maxFadeExtent=parseFloat(dt.maxFadeExtent)}}),Y=(0,n.C5)(z,["Document","Placemark"]),nt=(0,n.C5)(z,{Document:(0,n.A4)(function Mn(Kt,ot,dt){(0,n.ZL)({node:Kt},en,Gs,ot,dt,void 0,this)}),Placemark:(0,n.A4)(Hn)});let V,Ct,vt,St,bt,Gt,Vt,de,Pt,at=null,Xt=null,_e=null,Re=null,Rt=null,Yt=null;function $t(Kt){return 32/Math.min(Kt[0],Kt[1])}function Nt(Kt){return Kt}function ve(Kt,ot,dt){return Array.isArray(Kt)?Kt:"string"==typeof Kt?ve(dt[Kt],ot,dt):ot}function Ee(Kt){const ot=(0,n.Ve)(Kt,!1),dt=/^\s*#?\s*([0-9A-Fa-f]{8})\s*$/.exec(ot);if(dt){const mt=dt[1];return[parseInt(mt.substr(6,2),16),parseInt(mt.substr(4,2),16),parseInt(mt.substr(2,2),16),parseInt(mt.substr(0,2),16)/255]}}function Mt(Kt){let ot=(0,n.Ve)(Kt,!1);const dt=[];ot=ot.replace(/\s*,\s*/g,",");const mt=/^\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?),([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)(?:\s+|,|$)(?:([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)(?:\s+|$))?\s*/i;let wt;for(;wt=mt.exec(ot);){const Qt=parseFloat(wt[1]),ne=parseFloat(wt[2]),xe=wt[3]?parseFloat(wt[3]):0;dt.push(Qt,ne,xe),ot=ot.substr(wt[0].length)}if(""===ot)return dt}function rt(Kt){const ot=(0,n.Ve)(Kt,!1).trim();let dt=Kt.baseURI;return(!dt||"about:blank"==dt)&&(dt=window.location.href),dt?new URL(ot,dt).href:ot}function q(Kt){const ot=(0,n.Ve)(Kt,!1).trim().replace(/^(?!.*#)/,"#");let dt=Kt.baseURI;return(!dt||"about:blank"==dt)&&(dt=window.location.href),dt?new URL(ot,dt).href:ot}function K(Kt){return(0,E.fy)(Kt)}const et=(0,n.C5)(z,{Pair:function Ii(Kt,ot){const dt=(0,n.O)({},xn,Kt,ot,this);if(!dt)return;const mt=dt.key;if(mt&&"normal"==mt){const wt=dt.styleUrl;wt&&(ot[ot.length-1]=wt);const Qt=dt.Style;Qt&&(ot[ot.length-1]=Qt)}}});function it(Kt,ot){return(0,n.O)(void 0,et,Kt,ot,this)}const yt=(0,n.C5)(z,{Icon:(0,n.Pr)(function Qe(Kt,ot){return(0,n.O)({},si,Kt,ot)||null}),color:(0,n.Pr)(Ee),heading:(0,n.Pr)(E.fy),hotSpot:(0,n.Pr)(function M(Kt){const ot=Kt.getAttribute("xunits"),dt=Kt.getAttribute("yunits");let mt;return mt="insetPixels"!==ot?"insetPixels"!==dt?"bottom-left":"top-left":"insetPixels"!==dt?"bottom-right":"top-right",{x:parseFloat(Kt.getAttribute("x")),xunits:A[ot],y:parseFloat(Kt.getAttribute("y")),yunits:A[dt],origin:mt}}),scale:(0,n.Pr)(K)}),At=(0,n.C5)(z,{color:(0,n.Pr)(Ee),scale:(0,n.Pr)(K)}),Ht=(0,n.C5)(z,{color:(0,n.Pr)(Ee),width:(0,n.Pr)(E.fy)}),Te=(0,n.C5)(z,{color:(0,n.Pr)(Ee),fill:(0,n.Pr)(E.ud),outline:(0,n.Pr)(E.ud)}),ee=(0,n.C5)(z,{coordinates:(0,n.z)(Mt)});function We(Kt,ot){return(0,n.O)(null,ee,Kt,ot)}const Ze=(0,n.C5)(N,{Track:(0,n.Ei)(Je)}),Ve=(0,n.C5)(z,{when:function hs(Kt,ot){const mt=ot[ot.length-1].whens,wt=(0,n.Ve)(Kt,!1),Qt=Date.parse(wt);mt.push(isNaN(Qt)?0:Qt)}},(0,n.C5)(N,{coord:function Ge(Kt,ot){const mt=ot[ot.length-1].coordinates,wt=(0,n.Ve)(Kt,!1),ne=/^\s*([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s+([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s+([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s*$/i.exec(wt);if(ne){const xe=parseFloat(ne[1]),Me=parseFloat(ne[2]),Le=parseFloat(ne[3]);mt.push([xe,Me,Le])}else mt.push([])}}));function Je(Kt,ot){const dt=(0,n.O)({coordinates:[],whens:[]},Ve,Kt,ot);if(!dt)return;const mt=[],wt=dt.coordinates,Qt=dt.whens;for(let ne=0,xe=Math.min(wt.length,Qt.length);ne<xe;++ne)3==wt[ne].length&&mt.push(wt[ne][0],wt[ne][1],wt[ne][2],Qt[ne]);return new b.Z(mt,"XYZM")}const si=(0,n.C5)(z,{href:(0,n.Pr)(rt)},(0,n.C5)(N,{x:(0,n.Pr)(E.fy),y:(0,n.Pr)(E.fy),w:(0,n.Pr)(E.fy),h:(0,n.Pr)(E.fy)})),ei=(0,n.C5)(z,{coordinates:(0,n.z)(Mt)});function $(Kt,ot){return(0,n.O)(null,ei,Kt,ot)}const J=(0,n.C5)(z,{extrude:(0,n.Pr)(E.ud),tessellate:(0,n.Pr)(E.ud),altitudeMode:(0,n.Pr)(E.s2)});function _t(Kt,ot){const dt=(0,n.O)({},J,Kt,ot),mt=$(Kt,ot);if(mt){const wt=new b.Z(mt,"XYZ");return wt.setProperties(dt,!0),wt}}function pt(Kt,ot){const dt=(0,n.O)({},J,Kt,ot),mt=$(Kt,ot);if(mt){const wt=new u.ZP(mt,"XYZ",[mt.length]);return wt.setProperties(dt,!0),wt}}const It=(0,n.C5)(z,{LineString:(0,n.Ei)(_t),LinearRing:(0,n.Ei)(pt),MultiGeometry:(0,n.Ei)(Jt),Point:(0,n.Ei)(ie),Polygon:(0,n.Ei)(Pe)});function Jt(Kt,ot){const dt=(0,n.O)([],It,Kt,ot);if(!dt)return null;if(0===dt.length)return new k.Z(dt);let mt,wt=!0;const Qt=dt[0].getType();let ne;for(let xe=1,Me=dt.length;xe<Me;++xe)if(ne=dt[xe],ne.getType()!=Qt){wt=!1;break}if(wt){let xe,Me;if("Point"==Qt){const Le=dt[0];xe=Le.getLayout(),Me=Le.getFlatCoordinates();for(let Ue=1,$e=dt.length;Ue<$e;++Ue)ne=dt[Ue],(0,_.l7)(Me,ne.getFlatCoordinates());mt=new P.Z(Me,xe),je(mt,dt)}else"LineString"==Qt?(mt=new S.Z(dt),je(mt,dt)):"Polygon"==Qt?(mt=new v.Z(dt),je(mt,dt)):"GeometryCollection"==Qt?mt=new k.Z(dt):(0,I.h)(!1,37)}else mt=new k.Z(dt);return mt}function ie(Kt,ot){const dt=(0,n.O)({},J,Kt,ot),mt=$(Kt,ot);if(mt){const wt=new f.Z(mt,"XYZ");return wt.setProperties(dt,!0),wt}}const ye=(0,n.C5)(z,{innerBoundaryIs:function Ci(Kt,ot){const dt=(0,n.O)([],Ei,Kt,ot);dt.length>0&&ot[ot.length-1].push(...dt)},outerBoundaryIs:function Ws(Kt,ot){const dt=(0,n.O)(void 0,Xi,Kt,ot);dt&&(ot[ot.length-1][0]=dt)}});function Pe(Kt,ot){const dt=(0,n.O)({},J,Kt,ot),mt=(0,n.O)([null],ye,Kt,ot);if(mt&&mt[0]){const wt=mt[0],Qt=[wt.length];for(let xe=1,Me=mt.length;xe<Me;++xe)(0,_.l7)(wt,mt[xe]),Qt.push(wt.length);const ne=new u.ZP(wt,"XYZ",Qt);return ne.setProperties(dt,!0),ne}}const Ie=(0,n.C5)(z,{IconStyle:function Et(Kt,ot){const dt=(0,n.O)({},yt,Kt,ot);if(!dt)return;const mt=ot[ot.length-1],wt="Icon"in dt?dt.Icon:{},Qt=!("Icon"in dt)||Object.keys(wt).length>0;let ne;const xe=wt.href;xe?ne=xe:Qt&&(ne=Gt);let Me,Le,Ue,$e="bottom-left";const Ye=dt.hotSpot;let li;Ye?(Me=[Ye.x,Ye.y],Le=Ye.xunits,Ue=Ye.yunits,$e=Ye.origin):/^https?:\/\/maps\.(?:google|gstatic)\.com\//.test(ne)&&(ne.includes("pushpin")?(Me=Ct,Le=vt,Ue=St):ne.includes("arrow-reverse")?(Me=[54,42],Le=vt,Ue=St):ne.includes("paddle")&&(Me=[32,1],Le=vt,Ue=St));const ti=wt.x,Bi=wt.y;let ii;void 0!==ti&&void 0!==Bi&&(li=[ti,Bi]);const mi=wt.w,fi=wt.h;let bi;void 0!==mi&&void 0!==fi&&(ii=[mi,fi]);const hi=dt.heading;void 0!==hi&&(bi=(0,R.Yr)(hi));const zi=dt.color;if(Qt){ne==Gt&&(ii=bt);const wi=new G.Z({anchor:Me,anchorOrigin:$e,anchorXUnits:Le,anchorYUnits:Ue,crossOrigin:this.crossOrigin_,offset:li,offsetOrigin:"bottom-left",rotation:bi,scale:dt.scale,size:ii,src:this.iconUrlFunction_(ne),color:zi}),Ms=wi.getScaleArray()[0],qn=wi.getSize();if(null===qn){const dn=wi.getImageState();if(dn===Z.Z.IDLE||dn===Z.Z.LOADING){const Ts=function(){const Ps=wi.getImageState();if(Ps!==Z.Z.IDLE&&Ps!==Z.Z.LOADING){const In=wi.getSize();if(In&&2==In.length){const Hs=$t(In);wi.setScale(Ms*Hs)}wi.unlistenImageChange(Ts)}};wi.listenImageChange(Ts),dn===Z.Z.IDLE&&wi.load()}}else if(2==qn.length){const dn=$t(qn);wi.setScale(Ms*dn)}mt.imageStyle=wi}else mt.imageStyle=Vt},LabelStyle:function Wt(Kt,ot){const dt=(0,n.O)({},At,Kt,ot);if(!dt)return;const mt=ot[ot.length-1],wt=new d.Z({fill:new F.Z({color:"color"in dt?dt.color:V}),scale:dt.scale});mt.textStyle=wt},LineStyle:function se(Kt,ot){const dt=(0,n.O)({},Ht,Kt,ot);if(!dt)return;const mt=ot[ot.length-1],wt=new c.Z({color:"color"in dt?dt.color:V,width:"width"in dt?dt.width:1});mt.strokeStyle=wt},PolyStyle:function ce(Kt,ot){const dt=(0,n.O)({},Te,Kt,ot);if(!dt)return;const mt=ot[ot.length-1],wt=new F.Z({color:"color"in dt?dt.color:V});mt.fillStyle=wt;const Qt=dt.fill;void 0!==Qt&&(mt.fill=Qt);const ne=dt.outline;void 0!==ne&&(mt.outline=ne)}});function Fe(Kt,ot){const dt=(0,n.O)({},Ie,Kt,ot,this);if(!dt)return null;let mt="fillStyle"in dt?dt.fillStyle:at;const wt=dt.fill;let Qt;void 0!==wt&&!wt&&(mt=null),"imageStyle"in dt?dt.imageStyle!=Vt&&(Qt=dt.imageStyle):Qt=Xt;const ne="textStyle"in dt?dt.textStyle:Re,xe="strokeStyle"in dt?dt.strokeStyle:_e,Me=dt.outline;return void 0===Me||Me?[new r.ZP({fill:mt,image:Qt,stroke:xe,text:ne,zIndex:void 0})]:[new r.ZP({geometry:function(Le){const Ue=Le.getGeometry(),$e=Ue.getType();return"GeometryCollection"===$e?new k.Z(Ue.getGeometriesArrayRecursive().filter(function(li){const ti=li.getType();return"Polygon"!==ti&&"MultiPolygon"!==ti})):"Polygon"!==$e&&"MultiPolygon"!==$e?Ue:void 0},fill:mt,image:Qt,stroke:xe,text:ne,zIndex:void 0}),new r.ZP({geometry:function(Le){const Ue=Le.getGeometry(),$e=Ue.getType();return"GeometryCollection"===$e?new k.Z(Ue.getGeometriesArrayRecursive().filter(function(li){const ti=li.getType();return"Polygon"===ti||"MultiPolygon"===ti})):"Polygon"===$e||"MultiPolygon"===$e?Ue:void 0},fill:mt,stroke:null,zIndex:void 0})]}function je(Kt,ot){const dt=ot.length,mt=new Array(ot.length),wt=new Array(ot.length),Qt=new Array(ot.length);let ne,xe,Me;ne=!1,xe=!1,Me=!1;for(let Le=0;Le<dt;++Le){const Ue=ot[Le];mt[Le]=Ue.get("extrude"),wt[Le]=Ue.get("tessellate"),Qt[Le]=Ue.get("altitudeMode"),ne=ne||void 0!==mt[Le],xe=xe||void 0!==wt[Le],Me=Me||Qt[Le]}ne&&Kt.set("extrude",mt),xe&&Kt.set("tessellate",wt),Me&&Kt.set("altitudeMode",Qt)}const Xe=(0,n.C5)(z,{displayName:(0,n.Pr)(E.s2),value:(0,n.Pr)(E.s2)}),Mi=(0,n.C5)(z,{Data:function ni(Kt,ot){const dt=Kt.getAttribute("name");(0,n.T3)(Xe,Kt,ot);const mt=ot[ot.length-1];dt&&mt.displayName?mt[dt]={value:mt.value,displayName:mt.displayName,toString:function(){return mt.value}}:null!==dt?mt[dt]=mt.value:null!==mt.displayName&&(mt[mt.displayName]=mt.value),delete mt.value},SchemaData:function yi(Kt,ot){(0,n.T3)(ci,Kt,ot)}});function gi(Kt,ot){(0,n.T3)(Mi,Kt,ot)}function pi(Kt,ot){(0,n.T3)(D,Kt,ot)}const xn=(0,n.C5)(z,{Style:(0,n.Pr)(Fe),key:(0,n.Pr)(E.s2),styleUrl:(0,n.Pr)(q)}),ci=(0,n.C5)(z,{SimpleData:function _i(Kt,ot){const dt=Kt.getAttribute("name");if(null!==dt){const mt=(0,E.s2)(Kt);ot[ot.length-1][dt]=mt}}}),ri=(0,n.C5)(z,{altitudeMode:(0,n.Pr)(E.s2),minAltitude:(0,n.Pr)(E.fy),maxAltitude:(0,n.Pr)(E.fy),north:(0,n.Pr)(E.fy),south:(0,n.Pr)(E.fy),east:(0,n.Pr)(E.fy),west:(0,n.Pr)(E.fy)}),Pi=(0,n.C5)(z,{minLodPixels:(0,n.Pr)(E.fy),maxLodPixels:(0,n.Pr)(E.fy),minFadeExtent:(0,n.Pr)(E.fy),maxFadeExtent:(0,n.Pr)(E.fy)}),Ei=(0,n.C5)(z,{LinearRing:(0,n.Ei)(We)}),Xi=(0,n.C5)(z,{LinearRing:(0,n.z)(We)});function Vi(Kt,ot){const dt=(0,y._2)(ot),wt=[255*(4==dt.length?dt[3]:1),dt[2],dt[1],dt[0]];for(let Qt=0;Qt<4;++Qt){const ne=Math.floor(wt[Qt]).toString(16);wt[Qt]=1==ne.length?"0"+ne:ne}(0,E.bZ)(Kt,wt.join(""))}const Zi=(0,n.C5)(z,{Data:(0,n.A4)(function xi(Kt,ot,dt){Kt.setAttribute("name",ot.name);const mt={node:Kt},wt=ot.value;"object"==typeof wt?(null!==wt&&wt.displayName&&(0,n.ZL)(mt,Zi,n.hg,[wt.displayName],dt,["displayName"]),null!==wt&&wt.value&&(0,n.ZL)(mt,Zi,n.hg,[wt.value],dt,["value"])):(0,n.ZL)(mt,Zi,n.hg,[wt],dt,["value"])}),value:(0,n.A4)(function hn(Kt,ot){(0,E.bZ)(Kt,ot)}),displayName:(0,n.A4)(function Ai(Kt,ot){(0,E.xO)(Kt,ot)})}),en=(0,n.C5)(z,{Placemark:(0,n.A4)(Hn)}),Gs=function(Kt,ot,dt){return(0,n.c)(ot[ot.length-1].node.namespaceURI,"Placemark")},cs=(0,n.G3)("Data"),Tn=(0,n.C5)(z,["href"],(0,n.C5)(N,["x","y","w","h"])),Pn=(0,n.C5)(z,{href:(0,n.A4)(E.bZ)},(0,n.C5)(N,{x:(0,n.A4)(E.f3),y:(0,n.A4)(E.f3),w:(0,n.A4)(E.f3),h:(0,n.A4)(E.f3)})),ds=function(Kt,ot,dt){return(0,n.c)(N[0],"gx:"+dt)},zs=(0,n.C5)(z,["scale","heading","Icon","color","hotSpot"]),Ui=(0,n.C5)(z,{Icon:(0,n.A4)(function Kn(Kt,ot,dt){const mt={node:Kt};let Qt=Tn[dt[dt.length-1].node.namespaceURI],ne=(0,n.RA)(ot,Qt);(0,n.ZL)(mt,Pn,n.hg,ne,dt,Qt),Qt=Tn[N[0]],ne=(0,n.RA)(ot,Qt),(0,n.ZL)(mt,Pn,ds,ne,dt,Qt)}),color:(0,n.A4)(Vi),heading:(0,n.A4)(E.f3),hotSpot:(0,n.A4)(function Vs(Kt,ot){Kt.setAttribute("x",String(ot.x)),Kt.setAttribute("y",String(ot.y)),Kt.setAttribute("xunits",ot.xunits),Kt.setAttribute("yunits",ot.yunits)}),scale:(0,n.A4)(Oi)}),un=(0,n.C5)(z,["color","scale"]),Xn=(0,n.C5)(z,{color:(0,n.A4)(Vi),scale:(0,n.A4)(Oi)}),Yi=(0,n.C5)(z,["color","width"]),fs=(0,n.C5)(z,{color:(0,n.A4)(Vi),width:(0,n.A4)(E.f3)}),Ji={Point:"Point",LineString:"LineString",LinearRing:"LinearRing",Polygon:"Polygon",MultiPoint:"MultiGeometry",MultiLineString:"MultiGeometry",MultiPolygon:"MultiGeometry",GeometryCollection:"MultiGeometry"},Rn=function(Kt,ot,dt){if(Kt)return(0,n.c)(ot[ot.length-1].node.namespaceURI,Ji[Kt.getType()])},gs=(0,n.G3)("Point"),Qi=(0,n.G3)("LineString"),Vn=(0,n.G3)("LinearRing"),_s=(0,n.G3)("Polygon"),$i=(0,n.C5)(z,{LineString:(0,n.A4)(qi),Point:(0,n.A4)(qi),Polygon:(0,n.A4)(On),GeometryCollection:(0,n.A4)(Ti)});function Ti(Kt,ot,dt){const mt={node:Kt},wt=ot.getType();let ne,Qt=[];"GeometryCollection"===wt?(ot.getGeometriesArrayRecursive().forEach(function(xe){const Me=xe.getType();"MultiPoint"===Me?Qt=Qt.concat(xe.getPoints()):"MultiLineString"===Me?Qt=Qt.concat(xe.getLineStrings()):"MultiPolygon"===Me?Qt=Qt.concat(xe.getPolygons()):"Point"===Me||"LineString"===Me||"Polygon"===Me?Qt.push(xe):(0,I.h)(!1,39)}),ne=Rn):"MultiPoint"===wt?(Qt=ot.getPoints(),ne=gs):"MultiLineString"===wt?(Qt=ot.getLineStrings(),ne=Qi):"MultiPolygon"===wt?(Qt=ot.getPolygons(),ne=_s):(0,I.h)(!1,39),(0,n.ZL)(mt,$i,ne,Qt,dt)}const Ks=(0,n.C5)(z,{LinearRing:(0,n.A4)(qi)});function ms(Kt,ot,dt){(0,n.ZL)({node:Kt},Ks,Vn,[ot],dt)}const Yn=(0,n.C5)(z,{ExtendedData:(0,n.A4)(function zn(Kt,ot,dt){const mt={node:Kt},wt=ot.names,Qt=ot.values,ne=wt.length;for(let xe=0;xe<ne;xe++)(0,n.ZL)(mt,Zi,cs,[{name:wt[xe],value:Qt[xe]}],dt)}),MultiGeometry:(0,n.A4)(Ti),LineString:(0,n.A4)(qi),LinearRing:(0,n.A4)(qi),Point:(0,n.A4)(qi),Polygon:(0,n.A4)(On),Style:(0,n.A4)(function $n(Kt,ot,dt){const mt={node:Kt},wt={};if(ot.pointStyles.length){const Me=ot.pointStyles[0].getText();Me&&(wt.LabelStyle=Me);const Le=ot.pointStyles[0].getImage();Le&&"function"==typeof Le.getSrc&&(wt.IconStyle=Le)}if(ot.lineStyles.length){const Me=ot.lineStyles[0].getStroke();Me&&(wt.LineStyle=Me)}if(ot.polyStyles.length){const Me=ot.polyStyles[0].getStroke();Me&&!wt.LineStyle&&(wt.LineStyle=Me),wt.PolyStyle=ot.polyStyles[0]}const ne=xs[dt[dt.length-1].node.namespaceURI],xe=(0,n.RA)(wt,ne);(0,n.ZL)(mt,Xs,n.hg,xe,dt,ne)}),address:(0,n.A4)(E.bZ),description:(0,n.A4)(E.bZ),name:(0,n.A4)(E.bZ),open:(0,n.A4)(E.Vi),phoneNumber:(0,n.A4)(E.bZ),styleUrl:(0,n.A4)(E.bZ),visibility:(0,n.A4)(E.Vi)}),ps=(0,n.C5)(z,["name","open","visibility","address","phoneNumber","description","styleUrl","Style"]),vs=(0,n.G3)("ExtendedData");function Hn(Kt,ot,dt){const mt={node:Kt};ot.getId()&&Kt.setAttribute("id",ot.getId());const wt=ot.getProperties(),Qt={address:1,description:1,name:1,open:1,phoneNumber:1,styleUrl:1,visibility:1};Qt[ot.getGeometryName()]=1;const ne=Object.keys(wt||{}).sort().filter(function(li){return!Qt[li]}),xe=ot.getStyleFunction();if(xe){const li=xe(ot,0);if(li){const ti=Array.isArray(li)?li:[li];let Bi=ti;if(ot.getGeometry()&&(Bi=ti.filter(function(ii){const mi=ii.getGeometryFunction()(ot);if(mi){const fi=mi.getType();return"GeometryCollection"===fi?mi.getGeometriesArrayRecursive().filter(function(bi){const hi=bi.getType();return"Point"===hi||"MultiPoint"===hi}).length:"Point"===fi||"MultiPoint"===fi}})),this.writeStyles_){let ii=ti,mi=ti;ot.getGeometry()&&(ii=ti.filter(function(fi){const bi=fi.getGeometryFunction()(ot);if(bi){const hi=bi.getType();return"GeometryCollection"===hi?bi.getGeometriesArrayRecursive().filter(function(cn){const zi=cn.getType();return"LineString"===zi||"MultiLineString"===zi}).length:"LineString"===hi||"MultiLineString"===hi}}),mi=ti.filter(function(fi){const bi=fi.getGeometryFunction()(ot);if(bi){const hi=bi.getType();return"GeometryCollection"===hi?bi.getGeometriesArrayRecursive().filter(function(cn){const zi=cn.getType();return"Polygon"===zi||"MultiPolygon"===zi}).length:"Polygon"===hi||"MultiPolygon"===hi}})),wt.Style={pointStyles:Bi,lineStyles:ii,polyStyles:mi}}if(Bi.length&&void 0===wt.name){const ii=Bi[0].getText();ii&&(wt.name=ii.getText())}}}const Le=ps[dt[dt.length-1].node.namespaceURI],Ue=(0,n.RA)(wt,Le);if((0,n.ZL)(mt,Yn,n.hg,Ue,dt,Le),ne.length>0){const li=(0,n.RA)(wt,ne);(0,n.ZL)(mt,Yn,vs,[{names:ne,values:li}],dt)}const $e=dt[0];let Ye=ot.getGeometry();Ye&&(Ye=(0,e.fI)(Ye,!0,$e)),(0,n.ZL)(mt,Yn,Rn,[Ye],dt)}const Jn=(0,n.C5)(z,["extrude","tessellate","altitudeMode","coordinates"]),ji=(0,n.C5)(z,{extrude:(0,n.A4)(E.Vi),tessellate:(0,n.A4)(E.Vi),altitudeMode:(0,n.A4)(E.bZ),coordinates:(0,n.A4)(function us(Kt,ot,dt){const mt=dt[dt.length-1],wt=mt.layout,Qt=mt.stride;let ne;"XY"==wt||"XYM"==wt?ne=2:"XYZ"==wt||"XYZM"==wt?ne=3:(0,I.h)(!1,34);const xe=ot.length;let Me="";if(xe>0){Me+=ot[0];for(let Le=1;Le<ne;++Le)Me+=","+ot[Le];for(let Le=Qt;Le<xe;Le+=Qt){Me+=" "+ot[Le];for(let Ue=1;Ue<ne;++Ue)Me+=","+ot[Le+Ue]}}(0,E.bZ)(Kt,Me)})});function qi(Kt,ot,dt){const mt=ot.getFlatCoordinates(),wt={node:Kt};wt.layout=ot.getLayout(),wt.stride=ot.getStride();const Qt=ot.getProperties();Qt.coordinates=mt;const xe=Jn[dt[dt.length-1].node.namespaceURI],Me=(0,n.RA)(Qt,xe);(0,n.ZL)(wt,ji,n.hg,Me,dt,xe)}const ys=(0,n.C5)(z,["color","fill","outline"]),Es=(0,n.C5)(z,{outerBoundaryIs:(0,n.A4)(ms),innerBoundaryIs:(0,n.A4)(ms)}),ks=(0,n.G3)("innerBoundaryIs"),Qn=(0,n.G3)("outerBoundaryIs");function On(Kt,ot,dt){const mt=ot.getLinearRings(),wt=mt.shift(),Qt={node:Kt};(0,n.ZL)(Qt,Es,ks,mt,dt),(0,n.ZL)(Qt,Es,Qn,[wt],dt)}const nn=(0,n.C5)(z,{color:(0,n.A4)(Vi),fill:(0,n.A4)(E.Vi),outline:(0,n.A4)(E.Vi)});function Oi(Kt,ot){(0,E.f3)(Kt,Math.round(1e6*ot)/1e6)}const xs=(0,n.C5)(z,["IconStyle","LabelStyle","LineStyle","PolyStyle"]),Xs=(0,n.C5)(z,{IconStyle:(0,n.A4)(function kn(Kt,ot,dt){const mt={node:Kt},wt={},Qt=ot.getSrc(),ne=ot.getSize(),xe=ot.getImageSize(),Me={href:Qt};if(ne){Me.w=ne[0],Me.h=ne[1];const ii=ot.getAnchor(),mi=ot.getOrigin();mi&&xe&&0!==mi[0]&&mi[1]!==ne[1]&&(Me.x=mi[0],Me.y=xe[1]-(mi[1]+ne[1])),!ii||ii[0]===ne[0]/2&&ii[1]===ne[1]/2||(wt.hotSpot={x:ii[0],xunits:"pixels",y:ne[1]-ii[1],yunits:"pixels"})}wt.Icon=Me;let Le=ot.getScaleArray()[0],Ue=ne;null===Ue&&(Ue=bt),2==Ue.length&&(Le/=$t(Ue)),1!==Le&&(wt.scale=Le);const $e=ot.getRotation();0!==$e&&(wt.heading=$e);const Ye=ot.getColor();Ye&&(wt.color=Ye);const ti=zs[dt[dt.length-1].node.namespaceURI],Bi=(0,n.RA)(wt,ti);(0,n.ZL)(mt,Ui,n.hg,Bi,dt,ti)}),LabelStyle:(0,n.A4)(function Cn(Kt,ot,dt){const mt={node:Kt},wt={},Qt=ot.getFill();Qt&&(wt.color=Qt.getColor());const ne=ot.getScale();ne&&1!==ne&&(wt.scale=ne);const Me=un[dt[dt.length-1].node.namespaceURI],Le=(0,n.RA)(wt,Me);(0,n.ZL)(mt,Xn,n.hg,Le,dt,Me)}),LineStyle:(0,n.A4)(function Hi(Kt,ot,dt){const mt={node:Kt},wt={color:ot.getColor(),width:Number(ot.getWidth())||1},ne=Yi[dt[dt.length-1].node.namespaceURI],xe=(0,n.RA)(wt,ne);(0,n.ZL)(mt,fs,n.hg,xe,dt,ne)}),PolyStyle:(0,n.A4)(function Sn(Kt,ot,dt){const mt={node:Kt},wt=ot.getFill(),Qt=ot.getStroke(),ne={color:wt?wt.getColor():void 0,fill:!!wt&&void 0,outline:!!Qt&&void 0},Me=ys[dt[dt.length-1].node.namespaceURI],Le=(0,n.RA)(ne,Me);(0,n.ZL)(mt,nn,n.hg,Le,dt,Me)})}),Ys=class zt extends m{constructor(ot){super(),ot=ot||{},Yt||function ft(){V=[255,255,255,1],at=new F.Z({color:V}),Ct=[20,2],vt="pixels",St="pixels",bt=[64,64],Gt="https://maps.google.com/mapfiles/kml/pushpin/ylw-pushpin.png",Xt=new G.Z({anchor:Ct,anchorOrigin:"bottom-left",anchorXUnits:vt,anchorYUnits:St,crossOrigin:"anonymous",rotation:0,scale:$t(bt),size:bt,src:Gt}),Vt="NO_IMAGE",_e=new c.Z({color:V,width:1}),de=new c.Z({color:[51,51,51,1],width:2}),Re=new d.Z({font:"bold 16px Helvetica",fill:at,stroke:de,scale:.8}),Rt=new r.ZP({fill:at,image:Xt,text:Re,stroke:_e,zIndex:0}),Yt=[Rt]}(),this.dataProjection=(0,O.U2)("EPSG:4326"),this.defaultStyle_=ot.defaultStyle?ot.defaultStyle:Yt,this.extractStyles_=void 0===ot.extractStyles||ot.extractStyles,this.writeStyles_=void 0===ot.writeStyles||ot.writeStyles,this.sharedStyles_={},this.showPointNames_=void 0===ot.showPointNames||ot.showPointNames,this.crossOrigin_=void 0!==ot.crossOrigin?ot.crossOrigin:"anonymous",this.iconUrlFunction_=ot.iconUrlFunction?ot.iconUrlFunction:Nt,this.supportedMediaTypes=["application/vnd.google-earth.kml+xml"]}readDocumentOrFolder_(ot,dt){const mt=(0,n.C5)(z,{Document:(0,n.pc)(this.readDocumentOrFolder_,this),Folder:(0,n.pc)(this.readDocumentOrFolder_,this),Placemark:(0,n.Ei)(this.readPlacemark_,this),Style:this.readSharedStyle_.bind(this),StyleMap:this.readSharedStyleMap_.bind(this)}),wt=(0,n.O)([],mt,ot,dt,this);if(wt)return wt}readPlacemark_(ot,dt){const mt=(0,n.O)({geometry:null},L,ot,dt,this);if(!mt)return;const wt=new W.Z,Qt=ot.getAttribute("id");null!==Qt&&wt.setId(Qt);const xe=mt.geometry;if(xe&&(0,e.fI)(xe,!1,dt[0]),wt.setGeometry(xe),delete mt.geometry,this.extractStyles_){const Ue=function ue(Kt,ot,dt,mt,wt){return function(Qt,ne){let xe=wt,Me="",Le=[];if(xe){const $e=Qt.getGeometry();if($e)if($e instanceof k.Z)Le=$e.getGeometriesArrayRecursive().filter(function(Ye){const li=Ye.getType();return"Point"===li||"MultiPoint"===li}),xe=Le.length>0;else{const Ye=$e.getType();xe="Point"===Ye||"MultiPoint"===Ye}}xe&&(Me=Qt.get("name"),xe=xe&&!!Me,xe&&/&[^&]+;/.test(Me)&&(Pt||(Pt=document.createElement("textarea")),Pt.innerHTML=Me,Me=Pt.value));let Ue=dt;if(Kt?Ue=Kt:ot&&(Ue=ve(ot,dt,mt)),xe){const $e=function Bt(Kt,ot){const dt=[0,0];let mt="start";const wt=Kt.getImage();if(wt){const xe=wt.getSize();if(xe&&2==xe.length){const Me=wt.getScaleArray(),Le=wt.getAnchor();dt[0]=Me[0]*(xe[0]-Le[0]),dt[1]=Me[1]*(xe[1]/2-Le[1]),mt="left"}}let Qt=Kt.getText();return Qt?(Qt=Qt.clone(),Qt.setFont(Qt.getFont()||Re.getFont()),Qt.setScale(Qt.getScale()||Re.getScale()),Qt.setFill(Qt.getFill()||Re.getFill()),Qt.setStroke(Qt.getStroke()||de)):Qt=Re.clone(),Qt.setText(ot),Qt.setOffsetX(dt[0]),Qt.setOffsetY(dt[1]),Qt.setTextAlign(mt),new r.ZP({image:wt,text:Qt})}(Ue[0],Me);return Le.length>0?($e.setGeometry(new k.Z(Le)),[$e,new r.ZP({geometry:Ue[0].getGeometry(),image:null,fill:Ue[0].getFill(),stroke:Ue[0].getStroke(),text:null})].concat(Ue.slice(1))):$e}return Ue}}(mt.Style,mt.styleUrl,this.defaultStyle_,this.sharedStyles_,this.showPointNames_);wt.setStyle(Ue)}return delete mt.Style,wt.setProperties(mt,!0),wt}readSharedStyle_(ot,dt){const mt=ot.getAttribute("id");if(null!==mt){const wt=Fe.call(this,ot,dt);if(wt){let Qt,ne=ot.baseURI;(!ne||"about:blank"==ne)&&(ne=window.location.href),Qt=ne?new URL("#"+mt,ne).href:"#"+mt,this.sharedStyles_[Qt]=wt}}}readSharedStyleMap_(ot,dt){const mt=ot.getAttribute("id");if(null===mt)return;const wt=it.call(this,ot,dt);if(!wt)return;let Qt,ne=ot.baseURI;(!ne||"about:blank"==ne)&&(ne=window.location.href),Qt=ne?new URL("#"+mt,ne).href:"#"+mt,this.sharedStyles_[Qt]=wt}readFeatureFromNode(ot,dt){return z.includes(ot.namespaceURI)&&this.readPlacemark_(ot,[this.getReadOptions(ot,dt)])||null}readFeaturesFromNode(ot,dt){if(!z.includes(ot.namespaceURI))return[];let mt;const wt=ot.localName;if("Document"==wt||"Folder"==wt)return mt=this.readDocumentOrFolder_(ot,[this.getReadOptions(ot,dt)]),mt||[];if("Placemark"==wt){const Qt=this.readPlacemark_(ot,[this.getReadOptions(ot,dt)]);return Qt?[Qt]:[]}if("kml"==wt){mt=[];for(let Qt=ot.firstElementChild;Qt;Qt=Qt.nextElementSibling){const ne=this.readFeaturesFromNode(Qt,dt);ne&&(0,_.l7)(mt,ne)}return mt}return[]}readName(ot){if(ot){if("string"==typeof ot){const dt=(0,n.Qc)(ot);return this.readNameFromDocument(dt)}return(0,n.qk)(ot)?this.readNameFromDocument(ot):this.readNameFromNode(ot)}}readNameFromDocument(ot){for(let dt=ot.firstChild;dt;dt=dt.nextSibling)if(dt.nodeType==Node.ELEMENT_NODE){const mt=this.readNameFromNode(dt);if(mt)return mt}}readNameFromNode(ot){for(let dt=ot.firstElementChild;dt;dt=dt.nextElementSibling)if(z.includes(dt.namespaceURI)&&"name"==dt.localName)return(0,E.s2)(dt);for(let dt=ot.firstElementChild;dt;dt=dt.nextElementSibling){const mt=dt.localName;if(z.includes(dt.namespaceURI)&&("Document"==mt||"Folder"==mt||"Placemark"==mt||"kml"==mt)){const wt=this.readNameFromNode(dt);if(wt)return wt}}}readNetworkLinks(ot){const dt=[];if("string"==typeof ot){const mt=(0,n.Qc)(ot);(0,_.l7)(dt,this.readNetworkLinksFromDocument(mt))}else(0,n.qk)(ot)?(0,_.l7)(dt,this.readNetworkLinksFromDocument(ot)):(0,_.l7)(dt,this.readNetworkLinksFromNode(ot));return dt}readNetworkLinksFromDocument(ot){const dt=[];for(let mt=ot.firstChild;mt;mt=mt.nextSibling)mt.nodeType==Node.ELEMENT_NODE&&(0,_.l7)(dt,this.readNetworkLinksFromNode(mt));return dt}readNetworkLinksFromNode(ot){const dt=[];for(let mt=ot.firstElementChild;mt;mt=mt.nextElementSibling)if(z.includes(mt.namespaceURI)&&"NetworkLink"==mt.localName){const wt=(0,n.O)({},w,mt,[]);dt.push(wt)}for(let mt=ot.firstElementChild;mt;mt=mt.nextElementSibling){const wt=mt.localName;z.includes(mt.namespaceURI)&&("Document"==wt||"Folder"==wt||"kml"==wt)&&(0,_.l7)(dt,this.readNetworkLinksFromNode(mt))}return dt}readRegion(ot){const dt=[];if("string"==typeof ot){const mt=(0,n.Qc)(ot);(0,_.l7)(dt,this.readRegionFromDocument(mt))}else(0,n.qk)(ot)?(0,_.l7)(dt,this.readRegionFromDocument(ot)):(0,_.l7)(dt,this.readRegionFromNode(ot));return dt}readRegionFromDocument(ot){const dt=[];for(let mt=ot.firstChild;mt;mt=mt.nextSibling)mt.nodeType==Node.ELEMENT_NODE&&(0,_.l7)(dt,this.readRegionFromNode(mt));return dt}readRegionFromNode(ot){const dt=[];for(let mt=ot.firstElementChild;mt;mt=mt.nextElementSibling)if(z.includes(mt.namespaceURI)&&"Region"==mt.localName){const wt=(0,n.O)({},D,mt,[]);dt.push(wt)}for(let mt=ot.firstElementChild;mt;mt=mt.nextElementSibling){const wt=mt.localName;z.includes(mt.namespaceURI)&&("Document"==wt||"Folder"==wt||"kml"==wt)&&(0,_.l7)(dt,this.readRegionFromNode(mt))}return dt}readCamera(ot){const dt=[];if("string"==typeof ot){const mt=(0,n.Qc)(ot);(0,_.l7)(dt,this.readCameraFromDocument(mt))}else(0,n.qk)(ot)?(0,_.l7)(dt,this.readCameraFromDocument(ot)):(0,_.l7)(dt,this.readCameraFromNode(ot));return dt}readCameraFromDocument(ot){const dt=[];for(let mt=ot.firstChild;mt;mt=mt.nextSibling)mt.nodeType===Node.ELEMENT_NODE&&(0,_.l7)(dt,this.readCameraFromNode(mt));return dt}readCameraFromNode(ot){const dt=[];for(let mt=ot.firstElementChild;mt;mt=mt.nextElementSibling)if(z.includes(mt.namespaceURI)&&"Camera"===mt.localName){const wt=(0,n.O)({},C,mt,[]);dt.push(wt)}for(let mt=ot.firstElementChild;mt;mt=mt.nextElementSibling){const wt=mt.localName;z.includes(mt.namespaceURI)&&("Document"===wt||"Folder"===wt||"Placemark"===wt||"kml"===wt)&&(0,_.l7)(dt,this.readCameraFromNode(mt))}return dt}writeFeaturesNode(ot,dt){dt=this.adaptOptions(dt);const mt=(0,n.c)(z[4],"kml"),wt="http://www.w3.org/2000/xmlns/";mt.setAttributeNS(wt,"xmlns:gx",N[0]),mt.setAttributeNS(wt,"xmlns:xsi",n.fJ),mt.setAttributeNS(n.fJ,"xsi:schemaLocation","http://www.opengis.net/kml/2.2 https://developers.google.com/kml/schema/kml22gx.xsd");const Qt={node:mt},ne={};ot.length>1?ne.Document=ot:1==ot.length&&(ne.Placemark=ot[0]);const xe=Y[mt.namespaceURI],Me=(0,n.RA)(ne,xe);return(0,n.ZL)(Qt,nt,n.hg,Me,[dt],xe,this),mt}}},3053:(jt,ht,a)=>{"use strict";a.d(ht,{Z:()=>m});var W=a(8387),F=a(5934),k=a(1684),G=a(1506),Z=a(2973),b=a(1492),S=a(8382),P=a(3435),v=a(8340),f=a(6198),u=a(9219),c=a(7021),r=a(3093);function e(y,I,O){if(3===y){const E={keys:[],values:[],features:[]},R=O.readVarint()+O.pos;O.readFields(l,E,R),E.length=E.features.length,E.length&&(I[E.name]=E)}}function l(y,I,O){if(15===y)I.version=O.readVarint();else if(1===y)I.name=O.readString();else if(5===y)I.extent=O.readVarint();else if(2===y)I.features.push(O.pos);else if(3===y)I.keys.push(O.readString());else if(4===y){let E=null;const R=O.readVarint()+O.pos;for(;O.pos<R;)E=1==(y=O.readVarint()>>3)?O.readString():2===y?O.readFloat():3===y?O.readDouble():4===y?O.readVarint64():5===y?O.readVarint():6===y?O.readSVarint():7===y?O.readBoolean():null;I.values.push(E)}}function _(y,I,O){if(1==y)I.id=O.readVarint();else if(2==y){const E=O.readVarint()+O.pos;for(;O.pos<E;){const R=I.layer.keys[O.readVarint()],N=I.layer.values[O.readVarint()];I.properties[R]=N}}else 3==y?I.type=O.readVarint():4==y&&(I.geometry=O.pos)}function n(y,I,O){y.pos=I.features[O];const E=y.readVarint()+y.pos,R={layer:I,type:0,properties:{}};return y.readFields(_,R,E),R}const m=class d extends W.ZP{constructor(I){super(),I=I||{},this.dataProjection=new v.Z({code:"",units:"tile-pixels"}),this.featureClass_=I.featureClass?I.featureClass:f.ZP,this.geometryName_=I.geometryName,this.layerName_=I.layerName?I.layerName:"layer",this.layers_=I.layers?I.layers:null,this.idProperty_=I.idProperty,this.supportedMediaTypes=["application/vnd.mapbox-vector-tile","application/x-protobuf"]}readRawGeometry_(I,O,E,R){I.pos=O.geometry;const N=I.readVarint()+I.pos;let z=1,st=0,A=0,L=0,w=0,x=0;for(;I.pos<N;){if(!st){const C=I.readVarint();z=7&C,st=C>>3}st--,1===z||2===z?(A+=I.readSVarint(),L+=I.readSVarint(),1===z&&w>x&&(R.push(w),x=w),E.push(A,L),w+=2):7===z?w>x&&(E.push(E[x],E[x+1]),w+=2):(0,u.h)(!1,59)}w>x&&(R.push(w),x=w)}createFeature_(I,O,E){const R=O.type;if(0===R)return null;let N;const z=O.properties;let st;this.idProperty_?(st=z[this.idProperty_],delete z[this.idProperty_]):st=O.id,z[this.layerName_]=O.layer.name;const A=[],L=[];this.readRawGeometry_(I,O,A,L);const w=function g(y,I){let O;return 1===y?O=1===I?"Point":"MultiPoint":2===y?O=1===I?"LineString":"MultiLineString":3===y&&(O="Polygon"),O}(R,L.length);if(this.featureClass_===f.ZP)N=new this.featureClass_(w,A,L,z,st),N.transform(E.dataProjection);else{let x;if("Polygon"==w){const Y=(0,r.Q3)(A,L);x=Y.length>1?new Z.Z(A,"XY",Y):new P.ZP(A,"XY",L)}else x="Point"===w?new S.Z(A,"XY"):"LineString"===w?new F.Z(A,"XY"):"MultiPoint"===w?new G.Z(A,"XY"):"MultiLineString"===w?new k.Z(A,"XY",L):null;N=new(0,this.featureClass_),this.geometryName_&&N.setGeometryName(this.geometryName_);const D=(0,W.fI)(x,!1,E);N.setGeometry(D),void 0!==st&&N.setId(st),N.setProperties(z,!0)}return N}getType(){return"arraybuffer"}readFeatures(I,O){const E=this.layers_;O=this.adaptOptions(O);const R=(0,c.U2)(O.dataProjection);R.setWorldExtent(O.extent),O.dataProjection=R;const N=new b(I),z=N.readFields(e,{}),st=[];for(const A in z){if(E&&!E.includes(A))continue;const L=z[A];R.setExtent(L?[0,0,L.extent,L.extent]:null);for(let x=0,C=L.length;x<C;++x){const D=n(N,L,x),Y=this.createFeature_(N,D,O);null!==Y&&st.push(Y)}}return st}readProjection(I){return this.dataProjection}setLayers(I){this.layers_=I}}},1005:(jt,ht,a)=>{"use strict";a.d(ht,{$L:()=>S,Vi:()=>f,_E:()=>P,bZ:()=>e,ej:()=>b,f3:()=>r,fy:()=>Z,s2:()=>v,ud:()=>F,v$:()=>k,xO:()=>u});var W=a(2659);function F(l){return k((0,W.Ve)(l,!1))}function k(l){const _=/^\s*(true|1)|(false|0)\s*$/.exec(l);if(_)return void 0!==_[1]||!1}function Z(l){return b((0,W.Ve)(l,!1))}function b(l){const _=/^\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)\s*$/i.exec(l);if(_)return parseFloat(_[1])}function S(l){return P((0,W.Ve)(l,!1))}function P(l){const _=/^\s*(\d+)\s*$/.exec(l);if(_)return parseInt(_[1],10)}function v(l){return(0,W.Ve)(l,!1).trim()}function f(l,_){e(l,_?"1":"0")}function u(l,_){l.appendChild((0,W.Me)().createCDATASection(_))}function r(l,_){const n=_.toPrecision();l.appendChild((0,W.Me)().createTextNode(n))}function e(l,_){l.appendChild((0,W.Me)().createTextNode(_))}},6077:(jt,ht,a)=>{"use strict";a.d(ht,{Dv:()=>k,Zn:()=>G,qe:()=>Z,uX:()=>F});var W=a(9363);function F(){return!0}function k(){return!1}function G(){}function Z(S){let v,f,u,P=!1;return function(){const c=Array.prototype.slice.call(arguments);return(!P||this!==u||!(0,W.fS)(c,f))&&(P=!0,u=this,f=c,v=S.apply(this,arguments)),v}}},6788:(jt,ht,a)=>{"use strict";a.d(ht,{Z:()=>f});var W=a(7300),F=a(3089),k=a(6412),G=a(1316),Z=a(7021),b=a(6077),S=a(342);const P=(0,k.Ue)(),f=class v extends W.Z{constructor(){super(),this.extent_=(0,G.lJ)(),this.extentRevision_=-1,this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=0,this.simplifyTransformedInternal=(0,b.qe)(function(c,r,d){if(!d)return this.getSimplifiedGeometry(r);const e=this.clone();return e.applyTransform(d),e.getSimplifiedGeometry(r)})}simplifyTransformed(c,r){return this.simplifyTransformedInternal(this.getRevision(),c,r)}clone(){return(0,F.O3)()}closestPointXY(c,r,d,e){return(0,F.O3)()}containsXY(c,r){const d=this.getClosestPoint([c,r]);return d[0]===c&&d[1]===r}getClosestPoint(c,r){return this.closestPointXY(c[0],c[1],r=r||[NaN,NaN],1/0),r}intersectsCoordinate(c){return this.containsXY(c[0],c[1])}computeExtent(c){return(0,F.O3)()}getExtent(c){if(this.extentRevision_!=this.getRevision()){const r=this.computeExtent(this.extent_);(isNaN(r[0])||isNaN(r[1]))&&(0,G.YN)(r),this.extentRevision_=this.getRevision()}return(0,G.EO)(this.extent_,c)}rotate(c,r){(0,F.O3)()}scale(c,r,d){(0,F.O3)()}simplify(c){return this.getSimplifiedGeometry(c*c)}getSimplifiedGeometry(c){return(0,F.O3)()}getType(){return(0,F.O3)()}applyTransform(c){(0,F.O3)()}intersectsExtent(c){return(0,F.O3)()}translate(c,r){(0,F.O3)()}transform(c,r){const d=(0,Z.U2)(c),e="tile-pixels"==d.getUnits()?function(l,_,n){const g=d.getExtent(),m=d.getWorldExtent(),y=(0,G.Cr)(m)/(0,G.Cr)(g);return(0,k.qC)(P,m[0],m[3],y,-y,0,0,0),(0,S.vT)(l,0,l.length,n,P,_),(0,Z.Ck)(d,r)(l,_,n)}:(0,Z.Ck)(d,r);return this.applyTransform(e),this}}},3007:(jt,ht,a)=>{"use strict";a.d(ht,{Z:()=>S});var W=a(2431),F=a(6788),k=a(1316),G=a(7847);class Z extends F.Z{constructor(v){super(),this.geometries_=v||null,this.changeEventsKeys_=[],this.listenGeometriesChange_()}unlistenGeometriesChange_(){this.changeEventsKeys_.forEach(G.bN),this.changeEventsKeys_.length=0}listenGeometriesChange_(){if(this.geometries_)for(let v=0,f=this.geometries_.length;v<f;++v)this.changeEventsKeys_.push((0,G.oL)(this.geometries_[v],W.Z.CHANGE,this.changed,this))}clone(){const v=new Z(null);return v.setGeometries(this.geometries_),v.applyProperties(this),v}closestPointXY(v,f,u,c){if(c<(0,k.qf)(this.getExtent(),v,f))return c;const r=this.geometries_;for(let d=0,e=r.length;d<e;++d)c=r[d].closestPointXY(v,f,u,c);return c}containsXY(v,f){const u=this.geometries_;for(let c=0,r=u.length;c<r;++c)if(u[c].containsXY(v,f))return!0;return!1}computeExtent(v){(0,k.YN)(v);const f=this.geometries_;for(let u=0,c=f.length;u<c;++u)(0,k.l7)(v,f[u].getExtent());return v}getGeometries(){return b(this.geometries_)}getGeometriesArray(){return this.geometries_}getGeometriesArrayRecursive(){let v=[];const f=this.geometries_;for(let u=0,c=f.length;u<c;++u)f[u].getType()===this.getType()?v=v.concat(f[u].getGeometriesArrayRecursive()):v.push(f[u]);return v}getSimplifiedGeometry(v){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),v<0||0!==this.simplifiedGeometryMaxMinSquaredTolerance&&v<this.simplifiedGeometryMaxMinSquaredTolerance)return this;const f=[],u=this.geometries_;let c=!1;for(let r=0,d=u.length;r<d;++r){const e=u[r],l=e.getSimplifiedGeometry(v);f.push(l),l!==e&&(c=!0)}if(c){const r=new Z(null);return r.setGeometriesArray(f),r}return this.simplifiedGeometryMaxMinSquaredTolerance=v,this}getType(){return"GeometryCollection"}intersectsExtent(v){const f=this.geometries_;for(let u=0,c=f.length;u<c;++u)if(f[u].intersectsExtent(v))return!0;return!1}isEmpty(){return 0===this.geometries_.length}rotate(v,f){const u=this.geometries_;for(let c=0,r=u.length;c<r;++c)u[c].rotate(v,f);this.changed()}scale(v,f,u){u||(u=(0,k.qg)(this.getExtent()));const c=this.geometries_;for(let r=0,d=c.length;r<d;++r)c[r].scale(v,f,u);this.changed()}setGeometries(v){this.setGeometriesArray(b(v))}setGeometriesArray(v){this.unlistenGeometriesChange_(),this.geometries_=v,this.listenGeometriesChange_(),this.changed()}applyTransform(v){const f=this.geometries_;for(let u=0,c=f.length;u<c;++u)f[u].applyTransform(v);this.changed()}translate(v,f){const u=this.geometries_;for(let c=0,r=u.length;c<r;++c)u[c].translate(v,f);this.changed()}disposeInternal(){this.unlistenGeometriesChange_(),super.disposeInternal()}}function b(P){const v=[];for(let f=0,u=P.length;f<u;++f)v.push(P[f].clone());return v}const S=Z},5934:(jt,ht,a)=>{"use strict";a.d(ht,{Z:()=>r});var W=a(1245),F=a(7631),k=a(1316),G=a(4212),Z=a(7904),b=a(9363),S=a(2302),P=a(2754),v=a(6735),f=a(4505),u=a(2460);class c extends W.ZP{constructor(e,l){super(),this.flatMidpoint_=null,this.flatMidpointRevision_=-1,this.maxDelta_=-1,this.maxDeltaRevision_=-1,void 0===l||Array.isArray(e[0])?this.setCoordinates(e,l):this.setFlatCoordinates(l,e)}appendCoordinate(e){this.flatCoordinates?(0,b.l7)(this.flatCoordinates,e):this.flatCoordinates=e.slice(),this.changed()}clone(){const e=new c(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,l,_,n){return n<(0,k.qf)(this.getExtent(),e,l)?n:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt((0,F.Bv)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),(0,F.H$)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!1,e,l,_,n))}forEachSegment(e){return(0,S.E)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)}getCoordinateAtM(e,l){return"XYM"!=this.layout&&"XYZM"!=this.layout?null:(0,v.iJ)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,l=void 0!==l&&l)}getCoordinates(){return(0,P.Ml)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinateAt(e,l){return(0,v.WW)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,l,this.stride)}getLength(){return(0,u.W)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getFlatMidpoint(){return this.flatMidpointRevision_!=this.getRevision()&&(this.flatMidpoint_=this.getCoordinateAt(.5,this.flatMidpoint_),this.flatMidpointRevision_=this.getRevision()),this.flatMidpoint_}getSimplifiedGeometryInternal(e){const l=[];return l.length=(0,Z.dt)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,l,0),new c(l,"XY")}getType(){return"LineString"}intersectsExtent(e){return(0,f.Kz)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)}setCoordinates(e,l){this.setLayout(l,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=(0,G.Sg)(this.flatCoordinates,0,e,this.stride),this.changed()}}const r=c},1684:(jt,ht,a)=>{"use strict";a.d(ht,{Z:()=>c});var W=a(5934),F=a(1245),k=a(7631),G=a(1316),Z=a(4212),b=a(7904),S=a(9363),P=a(2754),v=a(6735),f=a(4505);class u extends F.ZP{constructor(d,e,l){if(super(),this.ends_=[],this.maxDelta_=-1,this.maxDeltaRevision_=-1,Array.isArray(d[0]))this.setCoordinates(d,e);else if(void 0!==e&&l)this.setFlatCoordinates(e,d),this.ends_=l;else{let _=this.getLayout();const n=d,g=[],m=[];for(let y=0,I=n.length;y<I;++y){const O=n[y];0===y&&(_=O.getLayout()),(0,S.l7)(g,O.getFlatCoordinates()),m.push(g.length)}this.setFlatCoordinates(_,g),this.ends_=m}}appendLineString(d){this.flatCoordinates?(0,S.l7)(this.flatCoordinates,d.getFlatCoordinates().slice()):this.flatCoordinates=d.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const d=new u(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return d.applyProperties(this),d}closestPointXY(d,e,l,_){return _<(0,G.qf)(this.getExtent(),d,e)?_:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt((0,k.Af)(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),(0,k.Xl)(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!1,d,e,l,_))}getCoordinateAtM(d,e,l){return"XYM"!=this.layout&&"XYZM"!=this.layout||0===this.flatCoordinates.length?null:(0,v.dG)(this.flatCoordinates,0,this.ends_,this.stride,d,e=void 0!==e&&e,l=void 0!==l&&l)}getCoordinates(){return(0,P.o1)(this.flatCoordinates,0,this.ends_,this.stride)}getEnds(){return this.ends_}getLineString(d){return d<0||this.ends_.length<=d?null:new W.Z(this.flatCoordinates.slice(0===d?0:this.ends_[d-1],this.ends_[d]),this.layout)}getLineStrings(){const d=this.flatCoordinates,e=this.ends_,l=this.layout,_=[];let n=0;for(let g=0,m=e.length;g<m;++g){const y=e[g],I=new W.Z(d.slice(n,y),l);_.push(I),n=y}return _}getFlatMidpoints(){const d=[],e=this.flatCoordinates;let l=0;const _=this.ends_,n=this.stride;for(let g=0,m=_.length;g<m;++g){const y=_[g],I=(0,v.WW)(e,l,y,n,.5);(0,S.l7)(d,I),l=y}return d}getSimplifiedGeometryInternal(d){const e=[],l=[];return e.length=(0,b.UJ)(this.flatCoordinates,0,this.ends_,this.stride,d,e,0,l),new u(e,"XY",l)}getType(){return"MultiLineString"}intersectsExtent(d){return(0,f.AW)(this.flatCoordinates,0,this.ends_,this.stride,d)}setCoordinates(d,e){this.setLayout(e,d,2),this.flatCoordinates||(this.flatCoordinates=[]);const l=(0,Z._5)(this.flatCoordinates,0,d,this.stride,this.ends_);this.flatCoordinates.length=0===l.length?0:l[l.length-1],this.changed()}}const c=u},1506:(jt,ht,a)=>{"use strict";a.d(ht,{Z:()=>v});var W=a(8382),F=a(1245),k=a(1316),G=a(4212),Z=a(9363),b=a(2754),S=a(3026);class P extends F.ZP{constructor(u,c){super(),c&&!Array.isArray(u[0])?this.setFlatCoordinates(c,u):this.setCoordinates(u,c)}appendPoint(u){this.flatCoordinates?(0,Z.l7)(this.flatCoordinates,u.getFlatCoordinates()):this.flatCoordinates=u.getFlatCoordinates().slice(),this.changed()}clone(){const u=new P(this.flatCoordinates.slice(),this.layout);return u.applyProperties(this),u}closestPointXY(u,c,r,d){if(d<(0,k.qf)(this.getExtent(),u,c))return d;const e=this.flatCoordinates,l=this.stride;for(let _=0,n=e.length;_<n;_+=l){const g=(0,S.bI)(u,c,e[_],e[_+1]);if(g<d){d=g;for(let m=0;m<l;++m)r[m]=e[_+m];r.length=l}}return d}getCoordinates(){return(0,b.Ml)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getPoint(u){return u<0||(this.flatCoordinates?this.flatCoordinates.length/this.stride:0)<=u?null:new W.Z(this.flatCoordinates.slice(u*this.stride,(u+1)*this.stride),this.layout)}getPoints(){const u=this.flatCoordinates,c=this.layout,r=this.stride,d=[];for(let e=0,l=u.length;e<l;e+=r){const _=new W.Z(u.slice(e,e+r),c);d.push(_)}return d}getType(){return"MultiPoint"}intersectsExtent(u){const c=this.flatCoordinates,r=this.stride;for(let d=0,e=c.length;d<e;d+=r)if((0,k.jE)(u,c[d],c[d+1]))return!0;return!1}setCoordinates(u,c){this.setLayout(c,u,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=(0,G.Sg)(this.flatCoordinates,0,u,this.stride),this.changed()}}const v=P},2973:(jt,ht,a)=>{"use strict";a.d(ht,{Z:()=>_});var W=a(1506),F=a(3435),k=a(1245),G=a(7631),Z=a(1316),b=a(4212),S=a(9363),P=a(6937),v=a(2754),f=a(4505),u=a(3093),c=a(2645),r=a(1758),d=a(712),e=a(7904);class l extends k.ZP{constructor(g,m,y){if(super(),this.endss_=[],this.flatInteriorPointsRevision_=-1,this.flatInteriorPoints_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,!y&&!Array.isArray(g[0])){let I=this.getLayout();const O=g,E=[],R=[];for(let N=0,z=O.length;N<z;++N){const st=O[N];0===N&&(I=st.getLayout());const A=E.length,L=st.getEnds();for(let w=0,x=L.length;w<x;++w)L[w]+=A;(0,S.l7)(E,st.getFlatCoordinates()),R.push(L)}m=I,g=E,y=R}void 0!==m&&y?(this.setFlatCoordinates(m,g),this.endss_=y):this.setCoordinates(g,m)}appendPolygon(g){let m;if(this.flatCoordinates){const y=this.flatCoordinates.length;(0,S.l7)(this.flatCoordinates,g.getFlatCoordinates()),m=g.getEnds().slice();for(let I=0,O=m.length;I<O;++I)m[I]+=y}else this.flatCoordinates=g.getFlatCoordinates().slice(),m=g.getEnds().slice(),this.endss_.push();this.endss_.push(m),this.changed()}clone(){const g=this.endss_.length,m=new Array(g);for(let I=0;I<g;++I)m[I]=this.endss_[I].slice();const y=new l(this.flatCoordinates.slice(),this.layout,m);return y.applyProperties(this),y}closestPointXY(g,m,y,I){return I<(0,Z.qf)(this.getExtent(),g,m)?I:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt((0,G.sD)(this.flatCoordinates,0,this.endss_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),(0,G.gI)(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,this.maxDelta_,!0,g,m,y,I))}containsXY(g,m){return(0,d.Zl)(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,g,m)}getArea(){return(0,c.Eu)(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride)}getCoordinates(g){let m;return void 0!==g?(m=this.getOrientedFlatCoordinates().slice(),(0,u.dL)(m,0,this.endss_,this.stride,g)):m=this.flatCoordinates,(0,v.ug)(m,0,this.endss_,this.stride)}getEndss(){return this.endss_}getFlatInteriorPoints(){if(this.flatInteriorPointsRevision_!=this.getRevision()){const g=(0,r.E)(this.flatCoordinates,0,this.endss_,this.stride);this.flatInteriorPoints_=(0,P.U)(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,g),this.flatInteriorPointsRevision_=this.getRevision()}return this.flatInteriorPoints_}getInteriorPoints(){return new W.Z(this.getFlatInteriorPoints().slice(),"XYM")}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const g=this.flatCoordinates;(0,u.Oj)(g,0,this.endss_,this.stride)?this.orientedFlatCoordinates_=g:(this.orientedFlatCoordinates_=g.slice(),this.orientedFlatCoordinates_.length=(0,u.dL)(this.orientedFlatCoordinates_,0,this.endss_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(g){const m=[],y=[];return m.length=(0,e.Pp)(this.flatCoordinates,0,this.endss_,this.stride,Math.sqrt(g),m,0,y),new l(m,"XY",y)}getPolygon(g){if(g<0||this.endss_.length<=g)return null;let m;if(0===g)m=0;else{const O=this.endss_[g-1];m=O[O.length-1]}const y=this.endss_[g].slice(),I=y[y.length-1];if(0!==m)for(let O=0,E=y.length;O<E;++O)y[O]-=m;return new F.ZP(this.flatCoordinates.slice(m,I),this.layout,y)}getPolygons(){const g=this.layout,m=this.flatCoordinates,y=this.endss_,I=[];let O=0;for(let E=0,R=y.length;E<R;++E){const N=y[E].slice(),z=N[N.length-1];if(0!==O)for(let A=0,L=N.length;A<L;++A)N[A]-=O;const st=new F.ZP(m.slice(O,z),g,N);I.push(st),O=z}return I}getType(){return"MultiPolygon"}intersectsExtent(g){return(0,f.oW)(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,g)}setCoordinates(g,m){this.setLayout(m,g,3),this.flatCoordinates||(this.flatCoordinates=[]);const y=(0,b.QT)(this.flatCoordinates,0,g,this.stride,this.endss_);if(0===y.length)this.flatCoordinates.length=0;else{const I=y[y.length-1];this.flatCoordinates.length=0===I.length?0:I[I.length-1]}this.changed()}}const _=l},8382:(jt,ht,a)=>{"use strict";a.d(ht,{Z:()=>b});var W=a(1245),F=a(1316),k=a(4212),G=a(3026);class Z extends W.ZP{constructor(P,v){super(),this.setCoordinates(P,v)}clone(){const P=new Z(this.flatCoordinates.slice(),this.layout);return P.applyProperties(this),P}closestPointXY(P,v,f,u){const c=this.flatCoordinates,r=(0,G.bI)(P,v,c[0],c[1]);if(r<u){const d=this.stride;for(let e=0;e<d;++e)f[e]=c[e];return f.length=d,r}return u}getCoordinates(){return this.flatCoordinates?this.flatCoordinates.slice():[]}computeExtent(P){return(0,F.HK)(this.flatCoordinates,P)}getType(){return"Point"}intersectsExtent(P){return(0,F.jE)(P,this.flatCoordinates[0],this.flatCoordinates[1])}setCoordinates(P,v){this.setLayout(v,P,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=(0,k.IG)(this.flatCoordinates,0,P,this.stride),this.changed()}}const b=Z},3435:(jt,ht,a)=>{"use strict";a.d(ht,{ZP:()=>_,oJ:()=>g});var W=a(1245),F=a(7631),k=a(1316),G=a(4212),Z=a(7904),b=a(2754),S=a(2645);class P extends W.ZP{constructor(O,E){super(),this.maxDelta_=-1,this.maxDeltaRevision_=-1,void 0===E||Array.isArray(O[0])?this.setCoordinates(O,E):this.setFlatCoordinates(E,O)}clone(){return new P(this.flatCoordinates.slice(),this.layout)}closestPointXY(O,E,R,N){return N<(0,k.qf)(this.getExtent(),O,E)?N:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt((0,F.Bv)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),(0,F.H$)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,O,E,R,N))}getArea(){return(0,S.QQ)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinates(){return(0,b.Ml)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getSimplifiedGeometryInternal(O){const E=[];return E.length=(0,Z.dt)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,O,E,0),new P(E,"XY")}getType(){return"LinearRing"}intersectsExtent(O){return!1}setCoordinates(O,E){this.setLayout(E,O,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=(0,G.Sg)(this.flatCoordinates,0,O,this.stride),this.changed()}}const v=P;var f=a(8382),u=a(9363),c=a(6937),r=a(4505),d=a(3093),e=a(712);class l extends W.ZP{constructor(O,E,R){super(),this.ends_=[],this.flatInteriorPointRevision_=-1,this.flatInteriorPoint_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,void 0!==E&&R?(this.setFlatCoordinates(E,O),this.ends_=R):this.setCoordinates(O,E)}appendLinearRing(O){this.flatCoordinates?(0,u.l7)(this.flatCoordinates,O.getFlatCoordinates()):this.flatCoordinates=O.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const O=new l(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return O.applyProperties(this),O}closestPointXY(O,E,R,N){return N<(0,k.qf)(this.getExtent(),O,E)?N:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt((0,F.Af)(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),(0,F.Xl)(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,O,E,R,N))}containsXY(O,E){return(0,e.wY)(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,O,E)}getArea(){return(0,S.KP)(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)}getCoordinates(O){let E;return void 0!==O?(E=this.getOrientedFlatCoordinates().slice(),(0,d.zX)(E,0,this.ends_,this.stride,O)):E=this.flatCoordinates,(0,b.o1)(E,0,this.ends_,this.stride)}getEnds(){return this.ends_}getFlatInteriorPoint(){if(this.flatInteriorPointRevision_!=this.getRevision()){const O=(0,k.qg)(this.getExtent());this.flatInteriorPoint_=(0,c.X)(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,O,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_}getInteriorPoint(){return new f.Z(this.getFlatInteriorPoint(),"XYM")}getLinearRingCount(){return this.ends_.length}getLinearRing(O){return O<0||this.ends_.length<=O?null:new v(this.flatCoordinates.slice(0===O?0:this.ends_[O-1],this.ends_[O]),this.layout)}getLinearRings(){const O=this.layout,E=this.flatCoordinates,R=this.ends_,N=[];let z=0;for(let st=0,A=R.length;st<A;++st){const L=R[st],w=new v(E.slice(z,L),O);N.push(w),z=L}return N}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const O=this.flatCoordinates;(0,d.$v)(O,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=O:(this.orientedFlatCoordinates_=O.slice(),this.orientedFlatCoordinates_.length=(0,d.zX)(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(O){const E=[],R=[];return E.length=(0,Z.Zh)(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(O),E,0,R),new l(E,"XY",R)}getType(){return"Polygon"}intersectsExtent(O){return(0,r.ac)(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,O)}setCoordinates(O,E){this.setLayout(E,O,2),this.flatCoordinates||(this.flatCoordinates=[]);const R=(0,G._5)(this.flatCoordinates,0,O,this.stride,this.ends_);this.flatCoordinates.length=0===R.length?0:R[R.length-1],this.changed()}}const _=l;function g(I){if((0,k.xb)(I))throw new Error("Cannot create polygon from empty extent");const O=I[0],E=I[1],R=I[2],N=I[3],z=[O,E,O,N,R,N,R,E,O,E];return new l(z,"XY",[z.length])}},1245:(jt,ht,a)=>{"use strict";a.d(ht,{Kr:()=>P,ZP:()=>v});var W=a(6788),F=a(3089),k=a(1316),G=a(342);function S(f){let u;return"XY"==f?u=2:"XYZ"==f||"XYM"==f?u=3:"XYZM"==f&&(u=4),u}function P(f,u,c){const r=f.getFlatCoordinates();if(!r)return null;const d=f.getStride();return(0,G.vT)(r,0,r.length,d,u,c)}const v=class Z extends W.Z{constructor(){super(),this.layout="XY",this.stride=2,this.flatCoordinates=null}computeExtent(u){return(0,k.GN)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,u)}getCoordinates(){return(0,F.O3)()}getFirstCoordinate(){return this.flatCoordinates.slice(0,this.stride)}getFlatCoordinates(){return this.flatCoordinates}getLastCoordinate(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)}getLayout(){return this.layout}getSimplifiedGeometry(u){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),u<0||0!==this.simplifiedGeometryMaxMinSquaredTolerance&&u<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;const c=this.getSimplifiedGeometryInternal(u);return c.getFlatCoordinates().length<this.flatCoordinates.length?c:(this.simplifiedGeometryMaxMinSquaredTolerance=u,this)}getSimplifiedGeometryInternal(u){return this}getStride(){return this.stride}setFlatCoordinates(u,c){this.stride=S(u),this.layout=u,this.flatCoordinates=c}setCoordinates(u,c){(0,F.O3)()}setLayout(u,c,r){let d;if(u)d=S(u);else{for(let e=0;e<r;++e){if(0===c.length)return this.layout="XY",void(this.stride=2);c=c[0]}d=c.length,u=function b(f){let u;return 2==f?u="XY":3==f?u="XYZ":4==f&&(u="XYZM"),u}(d)}this.layout=u,this.stride=d}applyTransform(u){this.flatCoordinates&&(u(this.flatCoordinates,this.flatCoordinates,this.stride),this.changed())}rotate(u,c){const r=this.getFlatCoordinates();if(r){const d=this.getStride();(0,G.U1)(r,0,r.length,d,u,c,r),this.changed()}}scale(u,c,r){void 0===c&&(c=u),r||(r=(0,k.qg)(this.getExtent()));const d=this.getFlatCoordinates();if(d){const e=this.getStride();(0,G.bA)(d,0,d.length,e,u,c,r,d),this.changed()}}translate(u,c){const r=this.getFlatCoordinates();if(r){const d=this.getStride();(0,G.Iu)(r,0,r.length,d,u,c,r),this.changed()}}}},2645:(jt,ht,a)=>{"use strict";function W(G,Z,b,S){let P=0,v=G[b-S],f=G[b-S+1];for(;Z<b;Z+=S){const u=G[Z],c=G[Z+1];P+=f*u-v*c,v=u,f=c}return P/2}function F(G,Z,b,S){let P=0;for(let v=0,f=b.length;v<f;++v){const u=b[v];P+=W(G,Z,u,S),Z=u}return P}function k(G,Z,b,S){let P=0;for(let v=0,f=b.length;v<f;++v){const u=b[v];P+=F(G,Z,u,S),Z=u[u.length-1]}return P}a.d(ht,{Eu:()=>k,KP:()=>F,QQ:()=>W})},1758:(jt,ht,a)=>{"use strict";a.d(ht,{E:()=>F});var W=a(1316);function F(k,G,Z,b){const S=[];let P=(0,W.lJ)();for(let v=0,f=Z.length;v<f;++v){const u=Z[v];P=(0,W.GN)(k,G,u[0],b),S.push((P[0]+P[2])/2,(P[1]+P[3])/2),G=u[u.length-1]}return S}},7631:(jt,ht,a)=>{"use strict";a.d(ht,{Af:()=>G,Bv:()=>k,H$:()=>b,Xl:()=>S,gI:()=>P,sD:()=>Z});var W=a(3026);function F(v,f,u,c,r,d,e){const l=v[f],_=v[f+1],n=v[u]-l,g=v[u+1]-_;let m;if(0===n&&0===g)m=f;else{const y=((r-l)*n+(d-_)*g)/(n*n+g*g);if(y>1)m=u;else{if(y>0){for(let I=0;I<c;++I)e[I]=(0,W.t7)(v[f+I],v[u+I],y);return void(e.length=c)}m=f}}for(let y=0;y<c;++y)e[y]=v[m+y];e.length=c}function k(v,f,u,c,r){let d=v[f],e=v[f+1];for(f+=c;f<u;f+=c){const l=v[f],_=v[f+1],n=(0,W.bI)(d,e,l,_);n>r&&(r=n),d=l,e=_}return r}function G(v,f,u,c,r){for(let d=0,e=u.length;d<e;++d){const l=u[d];r=k(v,f,l,c,r),f=l}return r}function Z(v,f,u,c,r){for(let d=0,e=u.length;d<e;++d){const l=u[d];r=G(v,f,l,c,r),f=l[l.length-1]}return r}function b(v,f,u,c,r,d,e,l,_,n,g){if(f==u)return n;let m,y;if(0===r){if(y=(0,W.bI)(e,l,v[f],v[f+1]),y<n){for(m=0;m<c;++m)_[m]=v[f+m];return _.length=c,y}return n}g=g||[NaN,NaN];let I=f+c;for(;I<u;)if(F(v,I-c,I,c,e,l,g),y=(0,W.bI)(e,l,g[0],g[1]),y<n){for(n=y,m=0;m<c;++m)_[m]=g[m];_.length=c,I+=c}else I+=c*Math.max((Math.sqrt(y)-Math.sqrt(n))/r|0,1);if(d&&(F(v,u-c,f,c,e,l,g),y=(0,W.bI)(e,l,g[0],g[1]),y<n)){for(n=y,m=0;m<c;++m)_[m]=g[m];_.length=c}return n}function S(v,f,u,c,r,d,e,l,_,n,g){g=g||[NaN,NaN];for(let m=0,y=u.length;m<y;++m){const I=u[m];n=b(v,f,I,c,r,d,e,l,_,n,g),f=I}return n}function P(v,f,u,c,r,d,e,l,_,n,g){g=g||[NaN,NaN];for(let m=0,y=u.length;m<y;++m){const I=u[m];n=S(v,f,I,c,r,d,e,l,_,n,g),f=I[I.length-1]}return n}},712:(jt,ht,a)=>{"use strict";a.d(ht,{TG:()=>k,Zl:()=>Z,uG:()=>F,wY:()=>G});var W=a(1316);function F(b,S,P,v,f){return!(0,W.H6)(f,function(c){return!k(b,S,P,v,c[0],c[1])})}function k(b,S,P,v,f,u){let c=0,r=b[P-v],d=b[P-v+1];for(;S<P;S+=v){const e=b[S],l=b[S+1];d<=u?l>u&&(e-r)*(u-d)-(f-r)*(l-d)>0&&c++:l<=u&&(e-r)*(u-d)-(f-r)*(l-d)<0&&c--,r=e,d=l}return 0!==c}function G(b,S,P,v,f,u){if(0===P.length||!k(b,S,P[0],v,f,u))return!1;for(let c=1,r=P.length;c<r;++c)if(k(b,P[c-1],P[c],v,f,u))return!1;return!0}function Z(b,S,P,v,f,u){if(0===P.length)return!1;for(let c=0,r=P.length;c<r;++c){const d=P[c];if(G(b,S,d,v,f,u))return!0;S=d[d.length-1]}return!1}},4212:(jt,ht,a)=>{"use strict";function W(Z,b,S,P){for(let v=0,f=S.length;v<f;++v)Z[b++]=S[v];return b}function F(Z,b,S,P){for(let v=0,f=S.length;v<f;++v){const u=S[v];for(let c=0;c<P;++c)Z[b++]=u[c]}return b}function k(Z,b,S,P,v){v=v||[];let f=0;for(let u=0,c=S.length;u<c;++u){const r=F(Z,b,S[u],P);v[f++]=r,b=r}return v.length=f,v}function G(Z,b,S,P,v){v=v||[];let f=0;for(let u=0,c=S.length;u<c;++u){const r=k(Z,b,S[u],P,v[f]);0===r.length&&(r[0]=b),v[f++]=r,b=r[r.length-1]}return v.length=f,v}a.d(ht,{IG:()=>W,QT:()=>G,Sg:()=>F,_5:()=>k})},2754:(jt,ht,a)=>{"use strict";function W(G,Z,b,S,P){P=void 0!==P?P:[];let v=0;for(let f=Z;f<b;f+=S)P[v++]=G.slice(f,f+S);return P.length=v,P}function F(G,Z,b,S,P){P=void 0!==P?P:[];let v=0;for(let f=0,u=b.length;f<u;++f){const c=b[f];P[v++]=W(G,Z,c,S,P[v]),Z=c}return P.length=v,P}function k(G,Z,b,S,P){P=void 0!==P?P:[];let v=0;for(let f=0,u=b.length;f<u;++f){const c=b[f];P[v++]=1===c.length&&c[0]===Z?[]:F(G,Z,c,S,P[v]),Z=c[c.length-1]}return P.length=v,P}a.d(ht,{Ml:()=>W,o1:()=>F,ug:()=>k})},6937:(jt,ht,a)=>{"use strict";a.d(ht,{U:()=>G,X:()=>k});var W=a(9363),F=a(712);function k(Z,b,S,P,v,f,u){let c,r,d,e,l,_,n;const g=v[f+1],m=[];for(let O=0,E=S.length;O<E;++O){const R=S[O];for(e=Z[R-P],_=Z[R-P+1],c=b;c<R;c+=P)l=Z[c],n=Z[c+1],(g<=_&&n<=g||_<=g&&g<=n)&&(d=(g-_)/(n-_)*(l-e)+e,m.push(d)),e=l,_=n}let y=NaN,I=-1/0;for(m.sort(W.j2),e=m[0],c=1,r=m.length;c<r;++c){l=m[c];const O=Math.abs(l-e);O>I&&(d=(e+l)/2,(0,F.wY)(Z,b,S,P,d,g)&&(y=d,I=O)),e=l}return isNaN(y)&&(y=v[f]),u?(u.push(y,g,I),u):[y,g,I]}function G(Z,b,S,P,v){let f=[];for(let u=0,c=S.length;u<c;++u){const r=S[u];f=k(Z,b,r,P,v,2*u,f),b=r[r.length-1]}return f}},6735:(jt,ht,a)=>{"use strict";a.d(ht,{WW:()=>k,dG:()=>Z,iJ:()=>G});var W=a(9363),F=a(3026);function k(b,S,P,v,f,u,c){let r,d;const e=(P-S)/v;if(1===e)r=S;else if(2===e)r=S,d=f;else if(0!==e){let l=b[S],_=b[S+1],n=0;const g=[0];for(let I=S+v;I<P;I+=v){const O=b[I],E=b[I+1];n+=Math.sqrt((O-l)*(O-l)+(E-_)*(E-_)),g.push(n),l=O,_=E}const m=f*n,y=(0,W.ry)(g,m);y<0?(d=(m-g[-y-2])/(g[-y-1]-g[-y-2]),r=S+(-y-2)*v):r=S+y*v}c=c>1?c:2,u=u||new Array(c);for(let l=0;l<c;++l)u[l]=void 0===r?NaN:void 0===d?b[r+l]:(0,F.t7)(b[r+l],b[r+v+l],d);return u}function G(b,S,P,v,f,u){if(P==S)return null;let c;if(f<b[S+v-1])return u?(c=b.slice(S,S+v),c[v-1]=f,c):null;if(b[P-1]<f)return u?(c=b.slice(P-v,P),c[v-1]=f,c):null;if(f==b[S+v-1])return b.slice(S,S+v);let r=S/v,d=P/v;for(;r<d;){const n=r+d>>1;f<b[(n+1)*v-1]?d=n:r=n+1}const e=b[r*v-1];if(f==e)return b.slice((r-1)*v,(r-1)*v+v);const _=(f-e)/(b[(r+1)*v-1]-e);c=[];for(let n=0;n<v-1;++n)c.push((0,F.t7)(b[(r-1)*v+n],b[r*v+n],_));return c.push(f),c}function Z(b,S,P,v,f,u,c){if(c)return G(b,S,P[P.length-1],v,f,u);let r;if(f<b[v-1])return u?(r=b.slice(0,v),r[v-1]=f,r):null;if(b[b.length-1]<f)return u?(r=b.slice(b.length-v),r[v-1]=f,r):null;for(let d=0,e=P.length;d<e;++d){const l=P[d];if(S!=l){if(f<b[S+v-1])return null;if(f<=b[l-1])return G(b,S,l,v,f,!1);S=l}}return null}},4505:(jt,ht,a)=>{"use strict";a.d(ht,{AW:()=>Z,Kz:()=>G,ac:()=>S,mV:()=>b,oW:()=>P});var W=a(1316),F=a(2302),k=a(712);function G(v,f,u,c,r){const d=(0,W.qP)((0,W.lJ)(),v,f,u,c);return!!(0,W.kK)(r,d)&&(!!((0,W.r4)(r,d)||d[0]>=r[0]&&d[2]<=r[2]||d[1]>=r[1]&&d[3]<=r[3])||(0,F.E)(v,f,u,c,function(e,l){return(0,W.I7)(r,e,l)}))}function Z(v,f,u,c,r){for(let d=0,e=u.length;d<e;++d){if(G(v,f,u[d],c,r))return!0;f=u[d]}return!1}function b(v,f,u,c,r){return!!(G(v,f,u,c,r)||(0,k.TG)(v,f,u,c,r[0],r[1])||(0,k.TG)(v,f,u,c,r[0],r[3])||(0,k.TG)(v,f,u,c,r[2],r[1])||(0,k.TG)(v,f,u,c,r[2],r[3]))}function S(v,f,u,c,r){if(!b(v,f,u[0],c,r))return!1;if(1===u.length)return!0;for(let d=1,e=u.length;d<e;++d)if((0,k.uG)(v,u[d-1],u[d],c,r)&&!G(v,u[d-1],u[d],c,r))return!1;return!0}function P(v,f,u,c,r){for(let d=0,e=u.length;d<e;++d){const l=u[d];if(S(v,f,l,c,r))return!0;f=l[l.length-1]}return!1}},2460:(jt,ht,a)=>{"use strict";function W(k,G,Z,b){let S=k[G],P=k[G+1],v=0;for(let f=G+b;f<Z;f+=b){const u=k[f],c=k[f+1];v+=Math.sqrt((u-S)*(u-S)+(c-P)*(c-P)),S=u,P=c}return v}a.d(ht,{W:()=>W})},3093:(jt,ht,a)=>{"use strict";function W(P,v,f,u){for(;v<f-u;){for(let c=0;c<u;++c){const r=P[v+c];P[v+c]=P[f-u+c],P[f-u+c]=r}v+=u,f-=u}}function F(P,v,f,u){let c=0,r=P[f-u],d=P[f-u+1];for(;v<f;v+=u){const e=P[v],l=P[v+1];c+=(e-r)*(l+d),r=e,d=l}return 0===c?void 0:c>0}function k(P,v,f,u,c){c=void 0!==c&&c;for(let r=0,d=f.length;r<d;++r){const e=f[r],l=F(P,v,e,u);if(0===r){if(c&&l||!c&&!l)return!1}else if(c&&!l||!c&&l)return!1;v=e}return!0}function G(P,v,f,u,c){for(let r=0,d=f.length;r<d;++r){const e=f[r];if(!k(P,v,e,u,c))return!1;e.length&&(v=e[e.length-1])}return!0}function Z(P,v,f,u,c){c=void 0!==c&&c;for(let r=0,d=f.length;r<d;++r){const e=f[r],l=F(P,v,e,u);(0===r?c&&l||!c&&!l:c&&!l||!c&&l)&&W(P,v,e,u),v=e}return v}function b(P,v,f,u,c){for(let r=0,d=f.length;r<d;++r)v=Z(P,v,f[r],u,c);return v}function S(P,v){const f=[];let u=0,c=0;for(let r=0,d=v.length;r<d;++r){const e=v[r];if(F(P,u,e,2)){if(0===f.length)continue;f[f.length-1].push(v[c])}else f.push(v.slice(c,r+1));c=r+1,u=e}return f}a.d(ht,{Q3:()=>S,$v:()=>k,Oj:()=>G,zX:()=>Z,dL:()=>b})},2302:(jt,ht,a)=>{"use strict";function W(F,k,G,Z,b){let S;for(k+=Z;k<G;k+=Z)if(S=b(F.slice(k-Z,k),F.slice(k,k+Z)),S)return S;return!1}a.d(ht,{E:()=>W})},7904:(jt,ht,a)=>{"use strict";a.d(ht,{Pp:()=>f,UJ:()=>G,Zh:()=>v,dt:()=>k,uZ:()=>S});var W=a(3026);function k(u,c,r,d,e,l,_){const n=(r-c)/d;if(n<3){for(;c<r;c+=d)l[_++]=u[c],l[_++]=u[c+1];return _}const g=new Array(n);g[0]=1,g[n-1]=1;const m=[c,r-d];let y=0;for(;m.length>0;){const I=m.pop(),O=m.pop();let E=0;const R=u[O],N=u[O+1],z=u[I],st=u[I+1];for(let A=O+d;A<I;A+=d){const x=(0,W.rU)(u[A],u[A+1],R,N,z,st);x>E&&(y=A,E=x)}E>e&&(g[(y-c)/d]=1,O+d<y&&m.push(O,y),y+d<I&&m.push(y,I))}for(let I=0;I<n;++I)g[I]&&(l[_++]=u[c+I*d],l[_++]=u[c+I*d+1]);return _}function G(u,c,r,d,e,l,_,n){for(let g=0,m=r.length;g<m;++g){const y=r[g];_=k(u,c,y,d,e,l,_),n.push(_),c=y}return _}function S(u,c){return c*Math.round(u/c)}function P(u,c,r,d,e,l,_){if(c==r)return _;let m,y,n=S(u[c],e),g=S(u[c+1],e);c+=d,l[_++]=n,l[_++]=g;do{if(m=S(u[c],e),y=S(u[c+1],e),(c+=d)==r)return l[_++]=m,l[_++]=y,_}while(m==n&&y==g);for(;c<r;){const I=S(u[c],e),O=S(u[c+1],e);if(c+=d,I==m&&O==y)continue;const E=m-n,R=y-g,N=I-n,z=O-g;E*z==R*N&&(E<0&&N<E||E==N||E>0&&N>E)&&(R<0&&z<R||R==z||R>0&&z>R)?(m=I,y=O):(l[_++]=m,l[_++]=y,n=m,g=y,m=I,y=O)}return l[_++]=m,l[_++]=y,_}function v(u,c,r,d,e,l,_,n){for(let g=0,m=r.length;g<m;++g){const y=r[g];_=P(u,c,y,d,e,l,_),n.push(_),c=y}return _}function f(u,c,r,d,e,l,_,n){for(let g=0,m=r.length;g<m;++g){const y=r[g],I=[];_=v(u,c,y,d,e,l,_,I),n.push(I),c=y[y.length-1]}return _}},342:(jt,ht,a)=>{"use strict";function W(Z,b,S,P,v,f){f=f||[];let u=0;for(let c=b;c<S;c+=P){const r=Z[c],d=Z[c+1];f[u++]=v[0]*r+v[2]*d+v[4],f[u++]=v[1]*r+v[3]*d+v[5]}return f&&f.length!=u&&(f.length=u),f}function F(Z,b,S,P,v,f,u){u=u||[];const c=Math.cos(v),r=Math.sin(v),d=f[0],e=f[1];let l=0;for(let _=b;_<S;_+=P){const n=Z[_]-d,g=Z[_+1]-e;u[l++]=d+n*c-g*r,u[l++]=e+n*r+g*c;for(let m=_+2;m<_+P;++m)u[l++]=Z[m]}return u&&u.length!=l&&(u.length=l),u}function k(Z,b,S,P,v,f,u,c){c=c||[];const r=u[0],d=u[1];let e=0;for(let l=b;l<S;l+=P){const n=Z[l+1]-d;c[e++]=r+v*(Z[l]-r),c[e++]=d+f*n;for(let g=l+2;g<l+P;++g)c[e++]=Z[g]}return c&&c.length!=e&&(c.length=e),c}function G(Z,b,S,P,v,f,u){u=u||[];let c=0;for(let r=b;r<S;r+=P){u[c++]=Z[r]+v,u[c++]=Z[r+1]+f;for(let d=r+2;d<r+P;++d)u[c++]=Z[d]}return u&&u.length!=c&&(u.length=c),u}a.d(ht,{Iu:()=>G,U1:()=>F,bA:()=>k,vT:()=>W})},3233:(jt,ht,a)=>{"use strict";a.d(ht,{G$:()=>Z,Id:()=>P,ME:()=>G,MP:()=>S,Tp:()=>v,V:()=>F,bM:()=>f,tK:()=>b});const W=typeof navigator<"u"&&typeof navigator.userAgent<"u"?navigator.userAgent.toLowerCase():"",F=W.includes("firefox"),G=W.includes("safari")&&!W.includes("chrom")&&(W.includes("version/15.4")||/cpu (os|iphone os) 15_4 like mac os x/.test(W)),Z=W.includes("webkit")&&!W.includes("edge"),b=W.includes("macintosh"),S=typeof devicePixelRatio<"u"?devicePixelRatio:1,P=typeof WorkerGlobalScope<"u"&&typeof OffscreenCanvas<"u"&&self instanceof WorkerGlobalScope,v=typeof Image<"u"&&Image.prototype.decode,f=function(){let u=!1;try{const c=Object.defineProperty({},"passive",{get:function(){u=!0}});window.addEventListener("_",null,c),window.removeEventListener("_",null,c)}catch{}return u}()},7946:(jt,ht,a)=>{"use strict";a.d(ht,{Z:()=>u});var W=a(8802),F=a(6613),k=a(5337),G=a(3435);const b=class Z extends k.Z{constructor(r){super(),this.geometry_=null,this.element_=document.createElement("div"),this.element_.style.position="absolute",this.element_.style.pointerEvents="auto",this.element_.className="ol-box "+r,this.map_=null,this.startPixel_=null,this.endPixel_=null}disposeInternal(){this.setMap(null)}render_(){const r=this.startPixel_,d=this.endPixel_,e="px",l=this.element_.style;l.left=Math.min(r[0],d[0])+e,l.top=Math.min(r[1],d[1])+e,l.width=Math.abs(d[0]-r[0])+e,l.height=Math.abs(d[1]-r[1])+e}setMap(r){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);const d=this.element_.style;d.left="inherit",d.top="inherit",d.width="inherit",d.height="inherit"}this.map_=r,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)}setPixels(r,d){this.startPixel_=r,this.endPixel_=d,this.createOrUpdateGeometry(),this.render_()}createOrUpdateGeometry(){const r=this.startPixel_,d=this.endPixel_,l=[r,[r[0],d[1]],d,[d[0],r[1]]].map(this.map_.getCoordinateFromPixelInternal,this.map_);l[4]=l[0].slice(),this.geometry_?this.geometry_.setCoordinates([l]):this.geometry_=new G.ZP([l])}getGeometry(){return this.geometry_}};var S=a(3990);class v extends W.ZP{constructor(r,d,e){super(r),this.coordinate=d,this.mapBrowserEvent=e}}const u=class f extends F.Z{constructor(r){super(),this.box_=new b((r=r||{}).className||"ol-dragbox"),this.minArea_=void 0!==r.minArea?r.minArea:64,r.onBoxEnd&&(this.onBoxEnd=r.onBoxEnd),this.startPixel_=null,this.condition_=r.condition?r.condition:S.v8,this.boxEndCondition_=r.boxEndCondition?r.boxEndCondition:this.defaultBoxEndCondition}defaultBoxEndCondition(r,d,e){const l=e[0]-d[0],_=e[1]-d[1];return l*l+_*_>=this.minArea_}getGeometry(){return this.box_.getGeometry()}handleDragEvent(r){this.box_.setPixels(this.startPixel_,r.pixel),this.dispatchEvent(new v("boxdrag",r.coordinate,r))}handleUpEvent(r){this.box_.setMap(null);const d=this.boxEndCondition_(r,this.startPixel_,r.pixel);return d&&this.onBoxEnd(r),this.dispatchEvent(new v(d?"boxend":"boxcancel",r.coordinate,r)),!1}handleDownEvent(r){return!!this.condition_(r)&&(this.startPixel_=r.pixel,this.box_.setMap(r.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new v("boxstart",r.coordinate,r)),!0)}onBoxEnd(r){}}},9715:(jt,ht,a)=>{"use strict";a.d(ht,{ZP:()=>S,Cv:()=>Z,FW:()=>b});var W=a(7300);var k=a(53);function Z(P,v,f){const u=P.getCenterInternal();u&&P.animateInternal({duration:void 0!==f?f:250,easing:k.GE,center:P.getConstrainedCenter([u[0]+v[0],u[1]+v[1]])})}function b(P,v,f,u){const c=P.getZoom();if(void 0===c)return;const r=P.getConstrainedZoom(c+v),d=P.getResolutionForZoom(r);P.getAnimating()&&P.cancelAnimations(),P.animate({resolution:d,anchor:f,duration:void 0!==u?u:250,easing:k.Vv})}const S=class G extends W.Z{constructor(v){super(),v&&v.handleEvent&&(this.handleEvent=v.handleEvent),this.map_=null,this.setActive(!0)}getActive(){return this.get("active")}getMap(){return this.map_}handleEvent(v){return!0}setActive(v){this.set("active",v)}setMap(v){this.map_=v}}},6613:(jt,ht,a)=>{"use strict";a.d(ht,{S:()=>G,Z:()=>Z});var W=a(9715),F=a(6990);function G(b){const S=b.length;let P=0,v=0;for(let f=0;f<S;f++)P+=b[f].clientX,v+=b[f].clientY;return{clientX:P/S,clientY:v/S}}const Z=class k extends W.ZP{constructor(S){super(S=S||{}),S.handleDownEvent&&(this.handleDownEvent=S.handleDownEvent),S.handleDragEvent&&(this.handleDragEvent=S.handleDragEvent),S.handleMoveEvent&&(this.handleMoveEvent=S.handleMoveEvent),S.handleUpEvent&&(this.handleUpEvent=S.handleUpEvent),S.stopDown&&(this.stopDown=S.stopDown),this.handlingDownUpSequence=!1,this.targetPointers=[]}getPointerCount(){return this.targetPointers.length}handleDownEvent(S){return!1}handleDragEvent(S){}handleEvent(S){if(!S.originalEvent)return!0;let P=!1;if(this.updateTrackedPointers_(S),this.handlingDownUpSequence){if(S.type==F.Z.POINTERDRAG)this.handleDragEvent(S),S.originalEvent.preventDefault();else if(S.type==F.Z.POINTERUP){const v=this.handleUpEvent(S);this.handlingDownUpSequence=v&&this.targetPointers.length>0}}else if(S.type==F.Z.POINTERDOWN){const v=this.handleDownEvent(S);this.handlingDownUpSequence=v,P=this.stopDown(v)}else S.type==F.Z.POINTERMOVE&&this.handleMoveEvent(S);return!P}handleMoveEvent(S){}handleUpEvent(S){return!1}stopDown(S){return S}updateTrackedPointers_(S){S.activePointers&&(this.targetPointers=S.activePointers)}}},9813:(jt,ht,a)=>{"use strict";a.d(ht,{c:()=>Y});var W=a(6108),F=a(9715),k=a(6990);const Z=class G extends F.ZP{constructor(V){super(),this.delta_=(V=V||{}).delta?V.delta:1,this.duration_=void 0!==V.duration?V.duration:250}handleEvent(V){let at=!1;if(V.type==k.Z.DBLCLICK){const ut=V.originalEvent,vt=V.coordinate,St=ut.shiftKey?-this.delta_:this.delta_,bt=V.map.getView();(0,F.FW)(bt,St,vt,this.duration_),ut.preventDefault(),at=!0}return!at}};var b=a(6613),S=a(6077),P=a(3990),v=a(53),f=a(1242);const c=class u extends b.Z{constructor(V){super({stopDown:S.Dv}),this.kinetic_=(V=V||{}).kinetic,this.lastCentroid=null,this.panning_=!1;const at=V.condition?V.condition:(0,P.$6)(P.rM,P.Xp);this.condition_=V.onFocusOnly?(0,P.$6)(P.yZ,at):at,this.noKinetic_=!1}handleDragEvent(V){const at=V.map;this.panning_||(this.panning_=!0,at.getView().beginInteraction());const ut=this.targetPointers,Ct=at.getEventPixel((0,b.S)(ut));if(ut.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(Ct[0],Ct[1]),this.lastCentroid){const vt=[this.lastCentroid[0]-Ct[0],Ct[1]-this.lastCentroid[1]],bt=V.map.getView();(0,f.bA)(vt,bt.getResolution()),(0,f.U1)(vt,bt.getRotation()),bt.adjustCenterInternal(vt)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=Ct,this.lastPointersCount_=ut.length,V.originalEvent.preventDefault()}handleUpEvent(V){const at=V.map,ut=at.getView();if(0===this.targetPointers.length){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){const Ct=this.kinetic_.getDistance(),vt=this.kinetic_.getAngle(),St=ut.getCenterInternal(),bt=at.getPixelFromCoordinateInternal(St),Gt=at.getCoordinateFromPixelInternal([bt[0]-Ct*Math.cos(vt),bt[1]-Ct*Math.sin(vt)]);ut.animateInternal({center:ut.getConstrainedCenter(Gt),duration:500,easing:v.Vv})}return this.panning_&&(this.panning_=!1,ut.endInteraction()),!1}return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0}handleDownEvent(V){if(this.targetPointers.length>0&&this.condition_(V)){const ut=V.map.getView();return this.lastCentroid=null,ut.getAnimating()&&ut.cancelAnimations(),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}return!1}};var r=a(3616);const e=class d extends b.Z{constructor(V){V=V||{},super({stopDown:S.Dv}),this.condition_=V.condition?V.condition:P.aj,this.lastAngle_=void 0,this.duration_=void 0!==V.duration?V.duration:250}handleDragEvent(V){if(!(0,P.QL)(V))return;const at=V.map,ut=at.getView();if(ut.getConstraints().rotation===r.h$)return;const Ct=at.getSize(),vt=V.pixel,St=Math.atan2(Ct[1]/2-vt[1],vt[0]-Ct[0]/2);void 0!==this.lastAngle_&&ut.adjustRotationInternal(-(St-this.lastAngle_)),this.lastAngle_=St}handleUpEvent(V){return!(0,P.QL)(V)||(V.map.getView().endInteraction(this.duration_),!1)}handleDownEvent(V){return!!((0,P.QL)(V)&&(0,P.v8)(V)&&this.condition_(V))&&(V.map.getView().beginInteraction(),this.lastAngle_=void 0,!0)}};var l=a(7946);const n=class _ extends l.Z{constructor(V){super({condition:(V=V||{}).condition?V.condition:P.vY,className:V.className||"ol-dragzoom",minArea:V.minArea}),this.duration_=void 0!==V.duration?V.duration:200,this.out_=void 0!==V.out&&V.out}onBoxEnd(V){const ut=this.getMap().getView();let Ct=this.getGeometry();if(this.out_){const vt=ut.rotatedExtentForGeometry(Ct),St=ut.getResolutionForExtentInternal(vt),bt=ut.getResolution()/St;Ct=Ct.clone(),Ct.scale(bt*bt)}ut.fitInternal(Ct,{duration:this.duration_,easing:v.Vv})}};var g=a(2431);const I=class y extends F.ZP{constructor(V){super(),V=V||{},this.defaultCondition_=function(at){return(0,P.rM)(at)&&(0,P.TN)(at)},this.condition_=void 0!==V.condition?V.condition:this.defaultCondition_,this.duration_=void 0!==V.duration?V.duration:100,this.pixelDelta_=void 0!==V.pixelDelta?V.pixelDelta:128}handleEvent(V){let at=!1;if(V.type==g.Z.KEYDOWN){const ut=V.originalEvent,Ct=ut.key;if(this.condition_(V)&&("ArrowDown"==Ct||"ArrowLeft"==Ct||"ArrowRight"==Ct||"ArrowUp"==Ct)){const St=V.map.getView(),bt=St.getResolution()*this.pixelDelta_;let Gt=0,Xt=0;"ArrowDown"==Ct?Xt=-bt:"ArrowLeft"==Ct?Gt=-bt:"ArrowRight"==Ct?Gt=bt:Xt=bt;const te=[Gt,Xt];(0,f.U1)(te,St.getRotation()),(0,F.Cv)(St,te,this.duration_),ut.preventDefault(),at=!0}}return!at}},E=class O extends F.ZP{constructor(V){super(),this.condition_=(V=V||{}).condition?V.condition:function(at){return!(0,P.a5)(at)&&(0,P.TN)(at)},this.delta_=V.delta?V.delta:1,this.duration_=void 0!==V.duration?V.duration:100}handleEvent(V){let at=!1;if(V.type==g.Z.KEYDOWN||V.type==g.Z.KEYPRESS){const ut=V.originalEvent,Ct=ut.key;if(this.condition_(V)&&("+"===Ct||"-"===Ct)){const St="+"===Ct?this.delta_:-this.delta_,bt=V.map.getView();(0,F.FW)(bt,St,void 0,this.duration_),ut.preventDefault(),at=!0}}return!at}},N=class R{constructor(V,at,ut){this.decay_=V,this.minVelocity_=at,this.delay_=ut,this.points_=[],this.angle_=0,this.initialVelocity_=0}begin(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0}update(V,at){this.points_.push(V,at,Date.now())}end(){if(this.points_.length<6)return!1;const V=Date.now()-this.delay_,at=this.points_.length-3;if(this.points_[at+2]<V)return!1;let ut=at-3;for(;ut>0&&this.points_[ut+2]>V;)ut-=3;const Ct=this.points_[at+2]-this.points_[ut+2];if(Ct<1e3/60)return!1;const vt=this.points_[at]-this.points_[ut],St=this.points_[at+1]-this.points_[ut+1];return this.angle_=Math.atan2(St,vt),this.initialVelocity_=Math.sqrt(vt*vt+St*St)/Ct,this.initialVelocity_>this.minVelocity_}getDistance(){return(this.minVelocity_-this.initialVelocity_)/this.decay_}getAngle(){return this.angle_}};var z=a(3233),st=a(3026);const L=class A extends F.ZP{constructor(V){super(V=V||{}),this.totalDelta_=0,this.lastDelta_=0,this.maxDelta_=void 0!==V.maxDelta?V.maxDelta:1,this.duration_=void 0!==V.duration?V.duration:250,this.timeout_=void 0!==V.timeout?V.timeout:80,this.useAnchor_=void 0===V.useAnchor||V.useAnchor,this.constrainResolution_=void 0!==V.constrainResolution&&V.constrainResolution;const at=V.condition?V.condition:P.Bx;this.condition_=V.onFocusOnly?(0,P.$6)(P.yZ,at):at,this.lastAnchor_=null,this.startTime_=void 0,this.mode_=void 0,this.trackpadEventGap_=400,this.deltaPerZoom_=300}endInteraction_(){this.trackpadTimeoutId_=void 0;const V=this.getMap();V&&V.getView().endInteraction(void 0,this.lastDelta_?this.lastDelta_>0?1:-1:0,this.lastAnchor_)}handleEvent(V){if(!this.condition_(V)||V.type!==g.Z.WHEEL)return!0;const ut=V.map,Ct=V.originalEvent;let vt;if(Ct.preventDefault(),this.useAnchor_&&(this.lastAnchor_=V.coordinate),V.type==g.Z.WHEEL&&(vt=Ct.deltaY,z.V&&Ct.deltaMode===WheelEvent.DOM_DELTA_PIXEL&&(vt/=z.MP),Ct.deltaMode===WheelEvent.DOM_DELTA_LINE&&(vt*=40)),0===vt)return!1;this.lastDelta_=vt;const St=Date.now();void 0===this.startTime_&&(this.startTime_=St),(!this.mode_||St-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(vt)<4?"trackpad":"wheel");const bt=ut.getView();if("trackpad"===this.mode_&&!bt.getConstrainResolution()&&!this.constrainResolution_)return this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):(bt.getAnimating()&&bt.cancelAnimations(),bt.beginInteraction()),this.trackpadTimeoutId_=setTimeout(this.endInteraction_.bind(this),this.timeout_),bt.adjustZoom(-vt/this.deltaPerZoom_,this.lastAnchor_),this.startTime_=St,!1;this.totalDelta_+=vt;const Gt=Math.max(this.timeout_-(St-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,ut),Gt),!1}handleWheelZoom_(V){const at=V.getView();at.getAnimating()&&at.cancelAnimations();let ut=-(0,st.uZ)(this.totalDelta_,-this.maxDelta_*this.deltaPerZoom_,this.maxDelta_*this.deltaPerZoom_)/this.deltaPerZoom_;(at.getConstrainResolution()||this.constrainResolution_)&&(ut=ut?ut>0?1:-1:0),(0,F.FW)(at,ut,this.lastAnchor_,this.duration_),this.mode_=void 0,this.totalDelta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0}setMouseAnchor(V){this.useAnchor_=V,V||(this.lastAnchor_=null)}},x=class w extends b.Z{constructor(V){const at=V=V||{};at.stopDown||(at.stopDown=S.Dv),super(at),this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.threshold_=void 0!==V.threshold?V.threshold:.3,this.duration_=void 0!==V.duration?V.duration:250}handleDragEvent(V){let at=0;const ut=this.targetPointers[0],Ct=this.targetPointers[1],vt=Math.atan2(Ct.clientY-ut.clientY,Ct.clientX-ut.clientX);if(void 0!==this.lastAngle_){const Gt=vt-this.lastAngle_;this.rotationDelta_+=Gt,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),at=Gt}this.lastAngle_=vt;const St=V.map,bt=St.getView();bt.getConstraints().rotation!==r.h$&&(this.anchor_=St.getCoordinateFromPixelInternal(St.getEventPixel((0,b.S)(this.targetPointers))),this.rotating_&&(St.render(),bt.adjustRotationInternal(at,this.anchor_)))}handleUpEvent(V){return!(this.targetPointers.length<2&&(V.map.getView().endInteraction(this.duration_),1))}handleDownEvent(V){if(this.targetPointers.length>=2){const at=V.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||at.getView().beginInteraction(),!0}return!1}},D=class C extends b.Z{constructor(V){const at=V=V||{};at.stopDown||(at.stopDown=S.Dv),super(at),this.anchor_=null,this.duration_=void 0!==V.duration?V.duration:400,this.lastDistance_=void 0,this.lastScaleDelta_=1}handleDragEvent(V){let at=1;const ut=this.targetPointers[0],Ct=this.targetPointers[1],vt=ut.clientX-Ct.clientX,St=ut.clientY-Ct.clientY,bt=Math.sqrt(vt*vt+St*St);void 0!==this.lastDistance_&&(at=this.lastDistance_/bt),this.lastDistance_=bt;const Gt=V.map,Xt=Gt.getView();1!=at&&(this.lastScaleDelta_=at),this.anchor_=Gt.getCoordinateFromPixelInternal(Gt.getEventPixel((0,b.S)(this.targetPointers))),Gt.render(),Xt.adjustResolutionInternal(at,this.anchor_)}handleUpEvent(V){return!(this.targetPointers.length<2)||(V.map.getView().endInteraction(this.duration_,this.lastScaleDelta_>1?1:-1),!1)}handleDownEvent(V){if(this.targetPointers.length>=2){const at=V.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||at.getView().beginInteraction(),!0}return!1}};function Y(nt){nt=nt||{};const V=new W.Z,at=new N(-.005,.05,100);return(void 0===nt.altShiftDragRotate||nt.altShiftDragRotate)&&V.push(new e),(void 0===nt.doubleClickZoom||nt.doubleClickZoom)&&V.push(new Z({delta:nt.zoomDelta,duration:nt.zoomDuration})),(void 0===nt.dragPan||nt.dragPan)&&V.push(new c({onFocusOnly:nt.onFocusOnly,kinetic:at})),(void 0===nt.pinchRotate||nt.pinchRotate)&&V.push(new x),(void 0===nt.pinchZoom||nt.pinchZoom)&&V.push(new D({duration:nt.zoomDuration})),(void 0===nt.keyboard||nt.keyboard)&&(V.push(new I),V.push(new E({delta:nt.zoomDelta,duration:nt.zoomDuration}))),(void 0===nt.mouseWheelZoom||nt.mouseWheelZoom)&&V.push(new L({onFocusOnly:nt.onFocusOnly,duration:nt.zoomDuration})),(void 0===nt.shiftDragZoom||nt.shiftDragZoom)&&V.push(new n({duration:nt.zoomDuration})),V}},4199:(jt,ht,a)=>{"use strict";a.d(ht,{Z:()=>S});var W=a(7300),F=a(916),k=a(3089),G=a(9219),Z=a(3026);const S=class b extends W.Z{constructor(v){super(),this.background_=v.background;const f=Object.assign({},v);"object"==typeof v.properties&&(delete f.properties,Object.assign(f,v.properties)),f[F.Z.OPACITY]=void 0!==v.opacity?v.opacity:1,(0,G.h)("number"==typeof f[F.Z.OPACITY],64),f[F.Z.VISIBLE]=void 0===v.visible||v.visible,f[F.Z.Z_INDEX]=v.zIndex,f[F.Z.MAX_RESOLUTION]=void 0!==v.maxResolution?v.maxResolution:1/0,f[F.Z.MIN_RESOLUTION]=void 0!==v.minResolution?v.minResolution:0,f[F.Z.MIN_ZOOM]=void 0!==v.minZoom?v.minZoom:-1/0,f[F.Z.MAX_ZOOM]=void 0!==v.maxZoom?v.maxZoom:1/0,this.className_=void 0!==f.className?f.className:"ol-layer",delete f.className,this.setProperties(f),this.state_=null}getBackground(){return this.background_}getClassName(){return this.className_}getLayerState(v){const f=this.state_||{layer:this,managed:void 0===v||v},u=this.getZIndex();return f.opacity=(0,Z.uZ)(Math.round(100*this.getOpacity())/100,0,1),f.visible=this.getVisible(),f.extent=this.getExtent(),f.zIndex=void 0!==u||f.managed?u:1/0,f.maxResolution=this.getMaxResolution(),f.minResolution=Math.max(this.getMinResolution(),0),f.minZoom=this.getMinZoom(),f.maxZoom=this.getMaxZoom(),this.state_=f,f}getLayersArray(v){return(0,k.O3)()}getLayerStatesArray(v){return(0,k.O3)()}getExtent(){return this.get(F.Z.EXTENT)}getMaxResolution(){return this.get(F.Z.MAX_RESOLUTION)}getMinResolution(){return this.get(F.Z.MIN_RESOLUTION)}getMinZoom(){return this.get(F.Z.MIN_ZOOM)}getMaxZoom(){return this.get(F.Z.MAX_ZOOM)}getOpacity(){return this.get(F.Z.OPACITY)}getSourceState(){return(0,k.O3)()}getVisible(){return this.get(F.Z.VISIBLE)}getZIndex(){return this.get(F.Z.Z_INDEX)}setBackground(v){this.background_=v,this.changed()}setExtent(v){this.set(F.Z.EXTENT,v)}setMaxResolution(v){this.set(F.Z.MAX_RESOLUTION,v)}setMinResolution(v){this.set(F.Z.MIN_RESOLUTION,v)}setMaxZoom(v){this.set(F.Z.MAX_ZOOM,v)}setMinZoom(v){this.set(F.Z.MIN_ZOOM,v)}setOpacity(v){(0,G.h)("number"==typeof v,64),this.set(F.Z.OPACITY,v)}setVisible(v){this.set(F.Z.VISIBLE,v)}setZIndex(v){this.set(F.Z.Z_INDEX,v)}disposeInternal(){this.state_&&(this.state_.layer=null,this.state_=null),super.disposeInternal()}}},9107:(jt,ht,a)=>{"use strict";a.d(ht,{Z:()=>k});var W=a(5209);const k=class F extends W.Z{constructor(Z){super(Z=Z||{})}}},2920:(jt,ht,a)=>{"use strict";a.d(ht,{Z:()=>G});var W=a(5209),F=a(5962);const G=class k extends W.Z{constructor(b){b=b||{};const S=Object.assign({},b);delete S.preload,delete S.useInterimTilesOnError,super(S),this.setPreload(void 0!==b.preload?b.preload:0),this.setUseInterimTilesOnError(void 0===b.useInterimTilesOnError||b.useInterimTilesOnError)}getPreload(){return this.get(F.Z.PRELOAD)}setPreload(b){this.set(F.Z.PRELOAD,b)}getUseInterimTilesOnError(){return this.get(F.Z.USE_INTERIM_TILES_ON_ERROR)}setUseInterimTilesOnError(b){this.set(F.Z.USE_INTERIM_TILES_ON_ERROR,b)}getData(b){return super.getData(b)}}},4203:(jt,ht,a)=>{"use strict";a.d(ht,{Z:()=>n});var W=a(5209),F=a(5604),k=a(1949),G=a(3009),Z=a(5505),b=a(1485),S=a(8929),P=a(4396),v=a(7202);function f(g){return new k.ZP({fill:u(g,""),stroke:c(g,""),text:r(g),image:d(g)})}function u(g,m){const y=g[m+"fill-color"];if(y)return"none"===y?null:new Z.Z({color:y})}function c(g,m){const y=g[m+"stroke-width"],I=g[m+"stroke-color"];if(y||I)return new P.Z({width:y,color:I,lineCap:g[m+"stroke-line-cap"],lineJoin:g[m+"stroke-line-join"],lineDash:g[m+"stroke-line-dash"],lineDashOffset:g[m+"stroke-line-dash-offset"],miterLimit:g[m+"stroke-miter-limit"]})}function r(g){const m=g["text-value"];return m?new v.Z({text:m,font:g["text-font"],maxAngle:g["text-max-angle"],offsetX:g["text-offset-x"],offsetY:g["text-offset-y"],overflow:g["text-overflow"],placement:g["text-placement"],repeat:g["text-repeat"],scale:g["text-scale"],rotateWithView:g["text-rotate-with-view"],rotation:g["text-rotation"],textAlign:g["text-align"],justify:g["text-justify"],textBaseline:g["text-baseline"],padding:g["text-padding"],fill:u(g,"text-"),backgroundFill:u(g,"text-background-"),stroke:c(g,"text-"),backgroundStroke:c(g,"text-background-")}):void 0}function d(g){const m=g["icon-src"],y=g["icon-img"];if(m||y)return new b.Z({src:m,img:y,imgSize:g["icon-img-size"],anchor:g["icon-anchor"],anchorOrigin:g["icon-anchor-origin"],anchorXUnits:g["icon-anchor-x-units"],anchorYUnits:g["icon-anchor-y-units"],color:g["icon-color"],crossOrigin:g["icon-cross-origin"],offset:g["icon-offset"],displacement:g["icon-displacement"],opacity:g["icon-opacity"],scale:g["icon-scale"],width:g["icon-width"],height:g["icon-height"],rotation:g["icon-rotation"],rotateWithView:g["icon-rotate-with-view"],size:g["icon-size"],declutterMode:g["icon-declutter-mode"]});const I=g["shape-points"];if(I){const E="shape-";return new S.Z({points:I,fill:u(g,E),stroke:c(g,E),radius:g["shape-radius"],radius1:g["shape-radius1"],radius2:g["shape-radius2"],angle:g["shape-angle"],displacement:g["shape-displacement"],rotation:g["shape-rotation"],rotateWithView:g["shape-rotate-with-view"],scale:g["shape-scale"],declutterMode:g["shape-declutter-mode"]})}const O=g["circle-radius"];if(O){const E="circle-";return new G.Z({radius:O,fill:u(g,E),stroke:c(g,E),displacement:g["circle-displacement"],scale:g["circle-scale"],rotation:g["circle-rotation"],rotateWithView:g["circle-rotate-with-view"],declutterMode:g["circle-declutter-mode"]})}}const n=class _ extends W.Z{constructor(m){m=m||{};const y=Object.assign({},m);delete y.style,delete y.renderBuffer,delete y.updateWhileAnimating,delete y.updateWhileInteracting,super(y),this.declutter_=void 0!==m.declutter&&m.declutter,this.renderBuffer_=void 0!==m.renderBuffer?m.renderBuffer:100,this.style_=null,this.styleFunction_=void 0,this.setStyle(m.style),this.updateWhileAnimating_=void 0!==m.updateWhileAnimating&&m.updateWhileAnimating,this.updateWhileInteracting_=void 0!==m.updateWhileInteracting&&m.updateWhileInteracting}getDeclutter(){return this.declutter_}getFeatures(m){return super.getFeatures(m)}getRenderBuffer(){return this.renderBuffer_}getRenderOrder(){return this.get("renderOrder")}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}getUpdateWhileAnimating(){return this.updateWhileAnimating_}getUpdateWhileInteracting(){return this.updateWhileInteracting_}renderDeclutter(m){m.declutterTree||(m.declutterTree=new F(9)),this.getRenderer().renderDeclutter(m)}setRenderOrder(m){this.set("renderOrder",m)}setStyle(m){let y;if(void 0===m)y=k.yF;else if(null===m)y=null;else if("function"==typeof m)y=m;else if(m instanceof k.ZP)y=m;else if(Array.isArray(m)){const I=m.length,O=new Array(I);for(let E=0;E<I;++E){const R=m[E];O[E]=R instanceof k.ZP?R:f(R)}y=O}else y=f(m);this.style_=y,this.styleFunction_=null===m?void 0:(0,k.J$)(this.style_),this.changed()}}},1590:(jt,ht,a)=>{"use strict";a.d(ht,{V:()=>c,Z:()=>e});var W=a(4199),F=a(6108),k=a(1892),G=a(8802),Z=a(2431),b=a(1858),S=a(9219),P=a(5526),v=a(1316),f=a(3089),u=a(7847);class c extends G.ZP{constructor(_,n){super(_),this.layer=n}}class d extends W.Z{constructor(_){_=_||{};const n=Object.assign({},_);delete n.layers;let g=_.layers;super(n),this.layersListenerKeys_=[],this.listenerKeys_={},this.addChangeListener("layers",this.handleLayersChanged_),g?Array.isArray(g)?g=new F.Z(g.slice(),{unique:!0}):(0,S.h)("function"==typeof g.getArray,43):g=new F.Z(void 0,{unique:!0}),this.setLayers(g)}handleLayerChange_(){this.changed()}handleLayersChanged_(){this.layersListenerKeys_.forEach(u.bN),this.layersListenerKeys_.length=0;const _=this.getLayers();this.layersListenerKeys_.push((0,u.oL)(_,k.Z.ADD,this.handleLayersAdd_,this),(0,u.oL)(_,k.Z.REMOVE,this.handleLayersRemove_,this));for(const g in this.listenerKeys_)this.listenerKeys_[g].forEach(u.bN);(0,P.Z)(this.listenerKeys_);const n=_.getArray();for(let g=0,m=n.length;g<m;g++){const y=n[g];this.registerLayerListeners_(y),this.dispatchEvent(new c("addlayer",y))}this.changed()}registerLayerListeners_(_){const n=[(0,u.oL)(_,b.Z.PROPERTYCHANGE,this.handleLayerChange_,this),(0,u.oL)(_,Z.Z.CHANGE,this.handleLayerChange_,this)];_ instanceof d&&n.push((0,u.oL)(_,"addlayer",this.handleLayerGroupAdd_,this),(0,u.oL)(_,"removelayer",this.handleLayerGroupRemove_,this)),this.listenerKeys_[(0,f.sq)(_)]=n}handleLayerGroupAdd_(_){this.dispatchEvent(new c("addlayer",_.layer))}handleLayerGroupRemove_(_){this.dispatchEvent(new c("removelayer",_.layer))}handleLayersAdd_(_){const n=_.element;this.registerLayerListeners_(n),this.dispatchEvent(new c("addlayer",n)),this.changed()}handleLayersRemove_(_){const n=_.element,g=(0,f.sq)(n);this.listenerKeys_[g].forEach(u.bN),delete this.listenerKeys_[g],this.dispatchEvent(new c("removelayer",n)),this.changed()}getLayers(){return this.get("layers")}setLayers(_){const n=this.getLayers();if(n){const g=n.getArray();for(let m=0,y=g.length;m<y;++m)this.dispatchEvent(new c("removelayer",g[m]))}this.set("layers",_)}getLayersArray(_){return _=void 0!==_?_:[],this.getLayers().forEach(function(n){n.getLayersArray(_)}),_}getLayerStatesArray(_){const n=void 0!==_?_:[],g=n.length;this.getLayers().forEach(function(I){I.getLayerStatesArray(n)});const m=this.getLayerState();let y=m.zIndex;!_&&void 0===m.zIndex&&(y=0);for(let I=g,O=n.length;I<O;I++){const E=n[I];E.opacity*=m.opacity,E.visible=E.visible&&m.visible,E.maxResolution=Math.min(E.maxResolution,m.maxResolution),E.minResolution=Math.max(E.minResolution,m.minResolution),E.minZoom=Math.max(E.minZoom,m.minZoom),E.maxZoom=Math.min(E.maxZoom,m.maxZoom),void 0!==m.extent&&(E.extent=void 0!==E.extent?(0,v.Ed)(E.extent,m.extent):m.extent),void 0===E.zIndex&&(E.zIndex=y)}return n}getSourceState(){return"ready"}}const e=d},450:(jt,ht,a)=>{"use strict";a.d(ht,{Z:()=>G});var W=a(9107),F=a(4696);const G=class k extends W.Z{constructor(b){super(b)}createRenderer(){return new F.Z(this)}getData(b){return super.getData(b)}}},5209:(jt,ht,a)=>{"use strict";a.d(ht,{Z:()=>u,j:()=>f});var W=a(4199),F=a(2431),k=a(916),G=a(8934),Z=a(6715),b=a(9219),S=a(1316),P=a(7847);function f(c,r){if(!c.visible)return!1;const d=r.resolution;if(d<c.minResolution||d>=c.maxResolution)return!1;const e=r.zoom;return e>c.minZoom&&e<=c.maxZoom}const u=class v extends W.Z{constructor(r){const d=Object.assign({},r);delete d.source,super(d),this.mapPrecomposeKey_=null,this.mapRenderKey_=null,this.sourceChangeKey_=null,this.renderer_=null,this.sourceReady_=!1,this.rendered=!1,r.render&&(this.render=r.render),r.map&&this.setMap(r.map),this.addChangeListener(k.Z.SOURCE,this.handleSourcePropertyChange_),this.setSource(r.source?r.source:null)}getLayersArray(r){return(r=r||[]).push(this),r}getLayerStatesArray(r){return(r=r||[]).push(this.getLayerState()),r}getSource(){return this.get(k.Z.SOURCE)||null}getRenderSource(){return this.getSource()}getSourceState(){const r=this.getSource();return r?r.getState():"undefined"}handleSourceChange_(){this.changed(),!this.sourceReady_&&"ready"===this.getSource().getState()&&(this.sourceReady_=!0,this.dispatchEvent("sourceready"))}handleSourcePropertyChange_(){this.sourceChangeKey_&&((0,P.bN)(this.sourceChangeKey_),this.sourceChangeKey_=null),this.sourceReady_=!1;const r=this.getSource();r&&(this.sourceChangeKey_=(0,P.oL)(r,F.Z.CHANGE,this.handleSourceChange_,this),"ready"===r.getState()&&(this.sourceReady_=!0,setTimeout(()=>{this.dispatchEvent("sourceready")},0))),this.changed()}getFeatures(r){return this.renderer_?this.renderer_.getFeatures(r):Promise.resolve([])}getData(r){return this.renderer_&&this.rendered?this.renderer_.getData(r):null}isVisible(r){let d;const e=this.getMapInternal();let l;!r&&e&&(r=e.getView()),d=r instanceof Z.ZP?{viewState:r.getState(),extent:r.calculateExtent()}:r,!d.layerStatesArray&&e&&(d.layerStatesArray=e.getLayerGroup().getLayerStatesArray()),l=d.layerStatesArray?d.layerStatesArray.find(n=>n.layer===this):this.getLayerState();const _=this.getExtent();return f(l,d.viewState)&&(!_||(0,S.kK)(_,d.extent))}getAttributions(r){if(!this.isVisible(r))return[];let d;const e=this.getSource();if(e&&(d=e.getAttributions()),!d)return[];let _=d(r instanceof Z.ZP?r.getViewStateAndExtent():r);return Array.isArray(_)||(_=[_]),_}render(r,d){const e=this.getRenderer();return e.prepareFrame(r)?(this.rendered=!0,e.renderFrame(r,d)):null}unrender(){this.rendered=!1}setMapInternal(r){r||this.unrender(),this.set(k.Z.MAP,r)}getMapInternal(){return this.get(k.Z.MAP)}setMap(r){this.mapPrecomposeKey_&&((0,P.bN)(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),r||this.changed(),this.mapRenderKey_&&((0,P.bN)(this.mapRenderKey_),this.mapRenderKey_=null),r&&(this.mapPrecomposeKey_=(0,P.oL)(r,G.Z.PRECOMPOSE,function(d){const l=d.frameState.layerStatesArray,_=this.getLayerState(!1);(0,b.h)(!l.some(function(n){return n.layer===_.layer}),67),l.push(_)},this),this.mapRenderKey_=(0,P.oL)(this,F.Z.CHANGE,r.render,r),this.changed())}setSource(r){this.set(k.Z.SOURCE,r)}getRenderer(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_}hasRenderer(){return!!this.renderer_}createRenderer(){return null}disposeInternal(){this.renderer_&&(this.renderer_.dispose(),delete this.renderer_),this.setSource(null),super.disposeInternal()}}},916:(jt,ht,a)=>{"use strict";a.d(ht,{Z:()=>W});const W={OPACITY:"opacity",VISIBLE:"visible",EXTENT:"extent",Z_INDEX:"zIndex",MAX_RESOLUTION:"maxResolution",MIN_RESOLUTION:"minResolution",MAX_ZOOM:"maxZoom",MIN_ZOOM:"minZoom",SOURCE:"source",MAP:"map"}},7729:(jt,ht,a)=>{"use strict";a.d(ht,{Z:()=>G});var W=a(2920),F=a(3083);const G=class k extends W.Z{constructor(b){super(b)}createRenderer(){return new F.Z(this)}}},5962:(jt,ht,a)=>{"use strict";a.d(ht,{Z:()=>W});const W={PRELOAD:"preload",USE_INTERIM_TILES_ON_ERROR:"useInterimTilesOnError"}},640:(jt,ht,a)=>{"use strict";a.d(ht,{Z:()=>G});var W=a(4203),F=a(5564);const G=class k extends W.Z{constructor(b){super(b)}createRenderer(){return new F.Z(this)}}},8412:(jt,ht,a)=>{"use strict";a.d(ht,{Z:()=>y});var W=a(4203),F=a(223),k=a(341),G=a(3083),Z=a(5399),b=a(3701),S=a(1693),P=a(6412),v=a(1316),f=a(6259),u=a(3089),c=a(7298),r=a(1242);const d={image:["Polygon","Circle","LineString","Image","Text"],hybrid:["Polygon","LineString"],vector:[]},e={hybrid:["Image","Text","Default"],vector:["Polygon","Circle","LineString","Image","Text","Default"]},_=class l extends G.Z{constructor(O){super(O),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.renderedPixelToCoordinateTransform_=null,this.tmpTransform_=(0,P.Ue)()}prepareTile(O,E,R){let N;const z=O.getState();return(z===Z.Z.LOADED||z===Z.Z.ERROR)&&(this.updateExecutorGroup_(O,E,R),this.tileImageNeedsRender_(O)&&(N=!0)),N}getTile(O,E,R,N){const z=N.pixelRatio,st=N.viewState,A=st.resolution,L=st.projection,w=this.getLayer(),x=w.getSource().getTile(O,E,R,z,L),C=N.viewHints,D=!(C[b.Z.ANIMATING]||C[b.Z.INTERACTING]);return(D||!x.wantedResolution)&&(x.wantedResolution=A),this.prepareTile(x,z,L)&&(D||Date.now()-N.time<8)&&"vector"!==w.getRenderMode()&&this.renderTileImage_(x,N),super.getTile(O,E,R,N)}isDrawableTile(O){const E=this.getLayer();return super.isDrawableTile(O)&&("vector"===E.getRenderMode()?(0,u.sq)(E)in O.executorGroups:O.hasContext(E))}getTileImage(O){return O.getImage(this.getLayer())}prepareFrame(O){const E=this.getLayer().getRevision();return this.renderedLayerRevision_!==E&&(this.renderedLayerRevision_=E,this.renderedTiles.length=0),super.prepareFrame(O)}updateExecutorGroup_(O,E,R){const N=this.getLayer(),z=N.getRevision(),st=N.getRenderOrder()||null,A=O.wantedResolution,L=O.getReplayState(N);if(!L.dirty&&L.renderedResolution===A&&L.renderedRevision==z&&L.renderedRenderOrder==st)return;const w=N.getSource(),x=N.getDeclutter(),C=w.getTileGrid(),Y=w.getTileGridForProjection(R).getTileCoordExtent(O.wrappedTileCoord),nt=w.getSourceTiles(E,R,O),V=(0,u.sq)(N);delete O.hitDetectionImageData[V],O.executorGroups[V]=[],x&&(O.declutterExecutorGroups[V]=[]),L.dirty=!1;for(let at=0,ut=nt.length;at<ut;++at){const Ct=nt[at];if(Ct.getState()!=Z.Z.LOADED)continue;const St=C.getTileCoordExtent(Ct.tileCoord),bt=(0,v.Ed)(Y,St),Gt=(0,v.f3)(bt,N.getRenderBuffer()*A,this.tmpExtent),Xt=(0,v.fS)(St,bt)?null:Gt,te=new F.Z(0,Gt,A,E),Vt=x?new F.Z(0,bt,A,E):void 0,_e=(0,f.se)(A,E),he=function(Ft){let Yt;const ge=Ft.getStyleFunction()||N.getStyleFunction();if(ge&&(Yt=ge(Ft,A)),Yt){const $t=this.renderFeature(Ft,_e,Yt,te,Vt);L.dirty=L.dirty||$t}},de=Ct.getFeatures();st&&st!==L.renderedRenderOrder&&de.sort(st);for(let Ft=0,Yt=de.length;Ft<Yt;++Ft){const ge=de[Ft];(!Xt||(0,v.kK)(Xt,ge.getGeometry().getExtent()))&&he.call(this,ge)}const Re=te.finish(),gt="vector"!==N.getRenderMode()&&x&&1===nt.length?null:bt,Rt=new k.Z(gt,A,E,w.getOverlaps(),Re,N.getRenderBuffer());if(O.executorGroups[V].push(Rt),Vt){const Ft=new k.Z(null,A,E,w.getOverlaps(),Vt.finish(),N.getRenderBuffer());O.declutterExecutorGroups[V].push(Ft)}}L.renderedRevision=z,L.renderedRenderOrder=st,L.renderedResolution=A}forEachFeatureAtCoordinate(O,E,R,N,z){const st=E.viewState.resolution,A=E.viewState.rotation;R=R??0;const L=this.getLayer(),x=L.getSource().getTileGridForProjection(E.viewState.projection),C=(0,v.hI)([O]);(0,v.f3)(C,st*R,C);const D={},Y=function(at,ut,Ct){let vt=at.getId();void 0===vt&&(vt=(0,u.sq)(at));const St=D[vt];if(St){if(!0!==St&&Ct<St.distanceSq){if(0===Ct)return D[vt]=!0,z.splice(z.lastIndexOf(St),1),N(at,L,ut);St.geometry=ut,St.distanceSq=Ct}}else{if(0===Ct)return D[vt]=!0,N(at,L,ut);z.push(D[vt]={feature:at,layer:L,geometry:ut,distanceSq:Ct,callback:N})}},nt=this.renderedTiles;let V;for(let at=0,ut=nt.length;!V&&at<ut;++at){const Ct=nt[at],vt=x.getTileCoordExtent(Ct.wrappedTileCoord);if(!(0,v.kK)(vt,C))continue;const St=(0,u.sq)(L),bt=[Ct.executorGroups[St]],Gt=Ct.declutterExecutorGroups[St];Gt&&bt.push(Gt),bt.some(Xt=>{const te=Xt===Gt?E.declutterTree.all().map(Vt=>Vt.value):null;for(let Vt=0,_e=Xt.length;Vt<_e;++Vt)if(V=Xt[Vt].forEachFeatureAtCoordinate(O,st,A,R,Y,te),V)return!0})}return V}getFeatures(O){return new Promise((E,R)=>{const N=this.getLayer(),z=(0,u.sq)(N),st=N.getSource(),A=this.renderedProjection,L=A.getExtent(),w=this.renderedResolution,x=st.getTileGridForProjection(A),C=(0,P.nn)(this.renderedPixelToCoordinateTransform_,O.slice()),D=x.getTileCoordForCoordAndResolution(C,w);let Y;for(let vt=0,St=this.renderedTiles.length;vt<St;++vt)if(D.toString()===this.renderedTiles[vt].tileCoord.toString()){if(Y=this.renderedTiles[vt],Y.getState()===Z.Z.LOADED){const bt=x.getTileCoordExtent(Y.tileCoord);st.getWrapX()&&A.canWrapX()&&!(0,v.r4)(L,bt)&&(0,r.Cf)(C,A);break}Y=void 0}if(!Y||Y.loadingSourceTiles>0)return void E([]);const nt=x.getTileCoordExtent(Y.wrappedTileCoord),V=(0,v.rL)(nt),at=[(C[0]-V[0])/w,(V[1]-C[1])/w],ut=Y.getSourceTiles().reduce(function(vt,St){return vt.concat(St.getFeatures())},[]);let Ct=Y.hitDetectionImageData[z];if(!Ct){const vt=(0,c.Pq)(x.getTileSize(x.getZForResolution(w,st.zDirection))),St=this.renderedRotation_,bt=[this.getRenderTransform(x.getTileCoordCenter(Y.wrappedTileCoord),w,0,S.UN,vt[0]*S.UN,vt[1]*S.UN,0)];Ct=(0,S.TU)(vt,bt,ut,N.getStyleFunction(),x.getTileCoordExtent(Y.wrappedTileCoord),Y.getReplayState(N).renderedResolution,St),Y.hitDetectionImageData[z]=Ct}E((0,S.ix)(at,ut,Ct))})}handleFontsChanged(){const O=this.getLayer();O.getVisible()&&void 0!==this.renderedLayerRevision_&&O.changed()}handleStyleImageChange_(O){this.renderIfReadyAndVisible()}renderDeclutter(O){const E=this.context,R=E.globalAlpha;E.globalAlpha=this.getLayer().getOpacity();const N=O.viewHints,z=!(N[b.Z.ANIMATING]||N[b.Z.INTERACTING]),st=this.renderedTiles;for(let A=0,L=st.length;A<L;++A){const w=st[A],x=w.declutterExecutorGroups[(0,u.sq)(this.getLayer())];if(x)for(let C=x.length-1;C>=0;--C)x[C].execute(this.context,1,this.getTileRenderTransform(w,O),O.viewState.rotation,z,void 0,O.declutterTree)}E.globalAlpha=R}getTileRenderTransform(O,E){const R=E.pixelRatio,N=E.viewState,z=N.center,st=N.resolution,A=N.rotation,L=E.size,w=Math.round(L[0]*R),x=Math.round(L[1]*R),D=this.getLayer().getSource().getTileGridForProjection(E.viewState.projection),Y=O.tileCoord,nt=D.getTileCoordExtent(O.wrappedTileCoord),V=D.getTileCoordExtent(Y,this.tmpExtent)[0]-nt[0];return(0,P.Jp)((0,P.bA)(this.inversePixelTransform.slice(),1/R,1/R),this.getRenderTransform(z,st,A,R,w,x,V))}postRender(O,E){const R=E.viewHints,N=!(R[b.Z.ANIMATING]||R[b.Z.INTERACTING]);this.renderedPixelToCoordinateTransform_=E.pixelToCoordinateTransform.slice(),this.renderedRotation_=E.viewState.rotation;const z=this.getLayer(),st=z.getRenderMode(),A=O.globalAlpha;O.globalAlpha=z.getOpacity();const L=e[st],w=E.viewState,x=w.rotation,C=z.getSource(),Y=C.getTileGridForProjection(w.projection).getZForResolution(w.resolution,C.zDirection),nt=this.renderedTiles,V=[],at=[];let ut=!0;for(let Ct=nt.length-1;Ct>=0;--Ct){const vt=nt[Ct];ut=ut&&!vt.getReplayState(z).dirty;const St=vt.executorGroups[(0,u.sq)(z)].filter(Vt=>Vt.hasExecutors(L));if(0===St.length)continue;const bt=this.getTileRenderTransform(vt,E),Gt=vt.tileCoord[0];let Xt=!1;const te=St[0].getClipCoords(bt);if(te){for(let Vt=0,_e=V.length;Vt<_e;++Vt)if(Y!==Gt&&Gt<at[Vt]){const he=V[Vt];(0,v.kK)([te[0],te[3],te[4],te[7]],[he[0],he[3],he[4],he[7]])&&(Xt||(O.save(),Xt=!0),O.beginPath(),O.moveTo(te[0],te[1]),O.lineTo(te[2],te[3]),O.lineTo(te[4],te[5]),O.lineTo(te[6],te[7]),O.moveTo(he[6],he[7]),O.lineTo(he[4],he[5]),O.lineTo(he[2],he[3]),O.lineTo(he[0],he[1]),O.clip())}V.push(te),at.push(Gt)}for(let Vt=0,_e=St.length;Vt<_e;++Vt)St[Vt].execute(O,1,bt,x,N,L);Xt&&O.restore()}O.globalAlpha=A,this.ready=ut,super.postRender(O,E)}renderFeature(O,E,R,N,z){if(!R)return!1;let st=!1;if(Array.isArray(R))for(let A=0,L=R.length;A<L;++A)st=(0,f.Pn)(N,O,R[A],E,this.boundHandleStyleImageChange_,void 0,z)||st;else st=(0,f.Pn)(N,O,R,E,this.boundHandleStyleImageChange_,void 0,z);return st}tileImageNeedsRender_(O){const E=this.getLayer();if("vector"===E.getRenderMode())return!1;const R=O.getReplayState(E),N=E.getRevision();return R.renderedTileResolution!==O.wantedResolution||R.renderedTileRevision!==N}renderTileImage_(O,E){const R=this.getLayer(),N=O.getReplayState(R),z=R.getRevision(),st=O.executorGroups[(0,u.sq)(R)];N.renderedTileRevision=z;const A=O.wrappedTileCoord,L=A[0],w=R.getSource();let x=E.pixelRatio;const D=E.viewState.projection,Y=w.getTileGridForProjection(D),nt=Y.getResolution(O.tileCoord[0]),V=E.pixelRatio/O.wantedResolution*nt,at=Y.getResolution(L),ut=O.getContext(R);x=Math.round(Math.max(x,V/x));const Ct=w.getTilePixelSize(L,x,D);ut.canvas.width=Ct[0],ut.canvas.height=Ct[1];const vt=x/V;if(1!==vt){const Xt=(0,P.mc)(this.tmpTransform_);(0,P.bA)(Xt,vt,vt),ut.setTransform.apply(ut,Xt)}const St=Y.getTileCoordExtent(A,this.tmpExtent),bt=V/at,Gt=(0,P.mc)(this.tmpTransform_);(0,P.bA)(Gt,bt,-bt),(0,P.Iu)(Gt,-St[0],-St[3]);for(let Xt=0,te=st.length;Xt<te;++Xt)st[Xt].execute(ut,vt,Gt,0,!0,d[R.getRenderMode()]);N.renderedTileResolution=O.wantedResolution}};var n=a(5962),g=a(9219);const y=class m extends W.Z{constructor(O){O=O||{};const E=Object.assign({},O);delete E.preload,delete E.useInterimTilesOnError,super(E);const R=O.renderMode||"hybrid";(0,g.h)("hybrid"==R||"vector"==R,28),this.renderMode_=R,this.setPreload(O.preload?O.preload:0),this.setUseInterimTilesOnError(void 0===O.useInterimTilesOnError||O.useInterimTilesOnError)}createRenderer(){return new _(this)}getFeatures(O){return super.getFeatures(O)}getRenderMode(){return this.renderMode_}getPreload(){return this.get(n.Z.PRELOAD)}getUseInterimTilesOnError(){return this.get(n.Z.USE_INTERIM_TILES_ON_ERROR)}setPreload(O){this.set(n.Z.PRELOAD,O)}setUseInterimTilesOnError(O){this.set(n.Z.USE_INTERIM_TILES_ON_ERROR,O)}}},1318:(jt,ht,a)=>{"use strict";function F(Z,b){return[[-1/0,-1/0,1/0,1/0]]}function k(Z,b){return[Z]}a.d(ht,{$6:()=>F,VW:()=>k}),a(7021)},3026:(jt,ht,a)=>{"use strict";function W(r,d,e){return Math.min(Math.max(r,d),e)}function F(r,d,e,l,_,n){const g=_-e,m=n-l;if(0!==g||0!==m){const y=((r-e)*g+(d-l)*m)/(g*g+m*m);y>1?(e=_,l=n):y>0&&(e+=g*y,l+=m*y)}return k(r,d,e,l)}function k(r,d,e,l){const _=e-r,n=l-d;return _*_+n*n}function G(r){const d=r.length;for(let l=0;l<d;l++){let _=l,n=Math.abs(r[l][l]);for(let m=l+1;m<d;m++){const y=Math.abs(r[m][l]);y>n&&(n=y,_=m)}if(0===n)return null;const g=r[_];r[_]=r[l],r[l]=g;for(let m=l+1;m<d;m++){const y=-r[m][l]/r[l][l];for(let I=l;I<d+1;I++)l==I?r[m][I]=0:r[m][I]+=y*r[l][I]}}const e=new Array(d);for(let l=d-1;l>=0;l--){e[l]=r[l][d]/r[l][l];for(let _=l-1;_>=0;_--)r[_][d]-=r[_][l]*e[l]}return e}function b(r){return r*Math.PI/180}function S(r,d){const e=r%d;return e*d<0?e+d:e}function P(r,d,e){return r+e*(d-r)}function v(r,d){const e=Math.pow(10,d);return Math.round(r*e)/e}function f(r,d){return Math.round(v(r,d))}function u(r,d){return Math.floor(v(r,d))}function c(r,d){return Math.ceil(v(r,d))}a.d(ht,{$W:()=>S,FH:()=>v,GW:()=>u,NM:()=>f,SV:()=>G,Yr:()=>b,bI:()=>k,mD:()=>c,rU:()=>F,t7:()=>P,uZ:()=>W})},5526:(jt,ht,a)=>{"use strict";function W(k){for(const G in k)delete k[G]}function F(k){let G;for(G in k)return!1;return!G}a.d(ht,{Z:()=>W,x:()=>F})},4256:(jt,ht,a)=>{"use strict";a.d(ht,{Z:()=>W});const W={POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"}},7021:(jt,ht,a)=>{"use strict";a.d(ht,{Wm:()=>l.W,kv:()=>W.Z,zY:()=>te,rM:()=>vt,Sx:()=>V,UQ:()=>Gt,uA:()=>Mt,h_:()=>D,OP:()=>he,mi:()=>Vt,Vs:()=>zt,dY:()=>ue,U2:()=>ut,_Q:()=>Ct,Ck:()=>Re,WO:()=>de,Cs:()=>ft,gD:()=>nt,lO:()=>Nt,Fj:()=>Bt,on:()=>ve,vs:()=>gt,$A:()=>Rt});var W=a(8340);const F=6378137,k=Math.PI*F,G=[-k,-k,k,k],Z=[-180,-85,180,85],b=F*Math.log(Math.tan(Math.PI/2));class S extends W.Z{constructor(M){super({code:M,units:"m",extent:G,global:!0,worldExtent:Z,getPointResolution:function(K,et){return K/Math.cosh(et[1]/F)}})}}const P=[new S("EPSG:3857"),new S("EPSG:102100"),new S("EPSG:102113"),new S("EPSG:900913"),new S("http://www.opengis.net/def/crs/EPSG/0/3857"),new S("http://www.opengis.net/gml/srs/epsg.xml#3857")];function v(q,M,K){const et=q.length;K=K>1?K:2,void 0===M&&(M=K>2?q.slice():new Array(et));for(let it=0;it<et;it+=K){M[it]=k*q[it]/180;let yt=F*Math.log(Math.tan(Math.PI*(+q[it+1]+90)/360));yt>b?yt=b:yt<-b&&(yt=-b),M[it+1]=yt}return M}function f(q,M,K){const et=q.length;K=K>1?K:2,void 0===M&&(M=K>2?q.slice():new Array(et));for(let it=0;it<et;it+=K)M[it]=180*q[it]/k,M[it+1]=360*Math.atan(Math.exp(q[it+1]/F))/Math.PI-90;return M}const c=[-180,-90,180,90],r=6378137*Math.PI/180;class d extends W.Z{constructor(M,K){super({code:M,units:"degrees",extent:c,axisOrientation:K,global:!0,metersPerUnit:r,worldExtent:c})}}const e=[new d("CRS:84"),new d("EPSG:4326","neu"),new d("urn:ogc:def:crs:OGC:1.3:CRS84"),new d("urn:ogc:def:crs:OGC:2:84"),new d("http://www.opengis.net/def/crs/OGC/1.3/CRS84"),new d("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new d("http://www.opengis.net/def/crs/EPSG/0/4326","neu")];var l=a(932);let _={};var y=a(808),I=a(1316),O=a(3026),E=a(1242);const R=6371008.8;function N(q,M,K){K=K||R;const et=(0,O.Yr)(q[1]),it=(0,O.Yr)(M[1]),yt=(it-et)/2,Et=(0,O.Yr)(M[0]-q[0])/2,At=Math.sin(yt)*Math.sin(yt)+Math.sin(Et)*Math.sin(Et)*Math.cos(et)*Math.cos(it);return 2*K*Math.atan2(Math.sqrt(At),Math.sqrt(1-At))}var x=a(6518);let C=!0;function D(q){C=!(void 0===q||q)}function Y(q,M){if(void 0!==M)for(let K=0,et=q.length;K<et;++K)M[K]=q[K];else M=q.slice();return M}function nt(q,M){if(void 0!==M&&q!==M){for(let K=0,et=q.length;K<et;++K)M[K]=q[K];q=M}return q}function V(q){(function m(q,M){_[q]=M})(q.getCode(),q),(0,y.IH)(q,q,Y)}function ut(q){return"string"==typeof q?function g(q){return _[q]||_[q.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\w+)$/,"EPSG:$3")]||null}(q):q||null}function Ct(q,M,K,et){let it;const yt=(q=ut(q)).getPointResolutionFunc();if(yt){if(it=yt(M,K),et&&et!==q.getUnits()){const Et=q.getMetersPerUnit();Et&&(it=it*Et/l.W[et])}}else{const Et=q.getUnits();if("degrees"==Et&&!et||"degrees"==et)it=M;else{const At=de(q,ut("EPSG:4326"));if(At===nt&&"degrees"!==Et)it=M*q.getMetersPerUnit();else{let Ht=[K[0]-M/2,K[1],K[0]+M/2,K[1],K[0],K[1]-M/2,K[0],K[1]+M/2];Ht=At(Ht,Ht,2),it=(N(Ht.slice(0,2),Ht.slice(2,4))+N(Ht.slice(4,6),Ht.slice(6,8)))/2}const Wt=et?l.W[et]:q.getMetersPerUnit();void 0!==Wt&&(it/=Wt)}}return it}function vt(q){(function at(q){q.forEach(V)})(q),q.forEach(function(M){q.forEach(function(K){M!==K&&(0,y.IH)(M,K,Y)})})}function Gt(q,M){return q?"string"==typeof q?ut(q):q:ut(M)}function Xt(q){return function(M,K,et){const it=M.length;et=void 0!==et?et:2,K=void 0!==K?K:new Array(it);for(let yt=0;yt<it;yt+=et){const Et=q(M.slice(yt,yt+et)),At=Et.length;for(let Wt=0,Ht=et;Wt<Ht;++Wt)K[yt+Wt]=Wt>=At?M[yt+Wt]:Et[Wt]}return K}}function te(q,M,K,et){const it=ut(q),yt=ut(M);(0,y.IH)(it,yt,Xt(K)),(0,y.IH)(yt,it,Xt(et))}function Vt(q,M){return D(),gt(q,"EPSG:4326",void 0!==M?M:"EPSG:3857")}function he(q,M){if(q===M)return!0;const K=q.getUnits()===M.getUnits();return(q.getCode()===M.getCode()||de(q,M)===Y)&&K}function de(q,M){const K=q.getCode(),et=M.getCode();let it=(0,y.U2)(K,et);return it||(it=nt),it}function Re(q,M){return de(ut(q),ut(M))}function gt(q,M,K){return Re(M,K)(q,void 0,q.length)}function Rt(q,M,K,et){const it=Re(M,K);return(0,I.Ne)(q,it,void 0,et)}let Yt=null;function ft(){return Yt}function Nt(q,M){return Yt?gt(q,M,Yt):q}function zt(q,M){return Yt?gt(q,Yt,M):(C&&!(0,E.fS)(q,[0,0])&&q[0]>=-180&&q[0]<=180&&q[1]>=-90&&q[1]<=90&&(C=!1,(0,x.ZK)("Call useGeographic() from ol/proj once to work with [longitude, latitude] coordinates.")),q)}function Bt(q,M){return Yt?Rt(q,M,Yt):q}function ue(q,M){return Yt?Rt(q,Yt,M):q}function ve(q,M){if(!Yt)return q;const K=ut(M).getUnits(),et=Yt.getUnits();return K&&et?q*l.W[K]/l.W[et]:q}function Mt(q,M,K){return function(et){let it,yt;if(q.canWrapX()){const Et=q.getExtent(),At=(0,I.dz)(Et);et=et.slice(0),yt=(0,E.jk)(et,q,At),yt&&(et[0]=et[0]-yt*At),et[0]=(0,O.uZ)(et[0],Et[0],Et[2]),et[1]=(0,O.uZ)(et[1],Et[1],Et[3]),it=K(et)}else it=K(et);return yt&&M.canWrapX()&&(it[0]+=yt*(0,I.dz)(M.getExtent())),it}}!function rt(){vt(P),vt(e),function St(q,M,K,et){q.forEach(function(it){M.forEach(function(yt){(0,y.IH)(it,yt,K),(0,y.IH)(yt,it,et)})})}(e,P,v,f)}()},8340:(jt,ht,a)=>{"use strict";a.d(ht,{Z:()=>k});var W=a(932);const k=class F{constructor(Z){this.code_=Z.code,this.units_=Z.units,this.extent_=void 0!==Z.extent?Z.extent:null,this.worldExtent_=void 0!==Z.worldExtent?Z.worldExtent:null,this.axisOrientation_=void 0!==Z.axisOrientation?Z.axisOrientation:"enu",this.global_=void 0!==Z.global&&Z.global,this.canWrapX_=!(!this.global_||!this.extent_),this.getPointResolutionFunc_=Z.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=Z.metersPerUnit}canWrapX(){return this.canWrapX_}getCode(){return this.code_}getExtent(){return this.extent_}getUnits(){return this.units_}getMetersPerUnit(){return this.metersPerUnit_||W.W[this.units_]}getWorldExtent(){return this.worldExtent_}getAxisOrientation(){return this.axisOrientation_}isGlobal(){return this.global_}setGlobal(Z){this.global_=Z,this.canWrapX_=!(!Z||!this.extent_)}getDefaultTileGrid(){return this.defaultTileGrid_}setDefaultTileGrid(Z){this.defaultTileGrid_=Z}setExtent(Z){this.extent_=Z,this.canWrapX_=!(!this.global_||!Z)}setWorldExtent(Z){this.worldExtent_=Z}setGetPointResolution(Z){this.getPointResolutionFunc_=Z}getPointResolutionFunc(){return this.getPointResolutionFunc_}}},932:(jt,ht,a)=>{"use strict";a.d(ht,{W:()=>k});const k={radians:6370997/(2*Math.PI),degrees:2*Math.PI*6370997/360,ft:.3048,m:1,"us-ft":1200/3937}},7498:(jt,ht,a)=>{"use strict";a.d(ht,{z2:()=>S});var W=a(8340),F=a(7021),k=a(808);let G=null;function S(d){G=d;const e=Object.keys(d.defs),l=e.length;let _,n;for(_=0;_<l;++_){const g=e[_];if(!(0,F.U2)(g)){const m=d.defs(g);let y=m.units;!y&&"longlat"===m.projName&&(y="degrees"),(0,F.Sx)(new W.Z({code:g,axisOrientation:m.axis,metersPerUnit:m.to_meter,units:y}))}}for(_=0;_<l;++_){const g=e[_],m=(0,F.U2)(g);for(n=0;n<l;++n){const y=e[n],I=(0,F.U2)(y);if(!(0,k.U2)(g,y))if(d.defs[g]===d.defs[y])(0,F.rM)([m,I]);else{const O=d(g,y);(0,F.zY)(m,I,(0,F.uA)(m,I,O.forward),(0,F.uA)(I,m,O.inverse))}}}}},808:(jt,ht,a)=>{"use strict";a.d(ht,{IH:()=>k,U2:()=>Z});let W={};function k(b,S,P){const v=b.getCode(),f=S.getCode();v in W||(W[v]={}),W[v][f]=P}function Z(b,S){let P;return b in W&&S in W[b]&&(P=W[b][S]),P}},891:(jt,ht,a)=>{"use strict";a.d(ht,{Z:()=>k});var W=a(8802);const k=class F extends W.ZP{constructor(Z,b,S,P){super(Z),this.inversePixelTransform=b,this.frameState=S,this.context=P}}},8934:(jt,ht,a)=>{"use strict";a.d(ht,{Z:()=>W});const W={PRERENDER:"prerender",POSTRENDER:"postrender",PRECOMPOSE:"precompose",POSTCOMPOSE:"postcompose",RENDERCOMPLETE:"rendercomplete"}},6198:(jt,ht,a)=>{"use strict";a.d(ht,{ZP:()=>r});var W=a(6412),F=a(1316),k=a(9363),G=a(6937),Z=a(7021),b=a(6735),S=a(1758),P=a(342);const v=(0,W.Ue)();class f{constructor(e,l,_,n,g){this.id_=g,this.type_=e,this.flatCoordinates_=l,this.flatInteriorPoints_=null,this.flatMidpoints_=null,this.ends_=_,this.properties_=n}get(e){return this.properties_[e]}getExtent(){return this.extent_||(this.extent_="Point"===this.type_?(0,F.HK)(this.flatCoordinates_):(0,F.GN)(this.flatCoordinates_,0,this.flatCoordinates_.length,2)),this.extent_}getFlatInteriorPoint(){if(!this.flatInteriorPoints_){const e=(0,F.qg)(this.getExtent());this.flatInteriorPoints_=(0,G.X)(this.flatCoordinates_,0,this.ends_,2,e,0)}return this.flatInteriorPoints_}getFlatInteriorPoints(){if(!this.flatInteriorPoints_){const e=(0,S.E)(this.flatCoordinates_,0,this.ends_,2);this.flatInteriorPoints_=(0,G.U)(this.flatCoordinates_,0,this.ends_,2,e)}return this.flatInteriorPoints_}getFlatMidpoint(){return this.flatMidpoints_||(this.flatMidpoints_=(0,b.WW)(this.flatCoordinates_,0,this.flatCoordinates_.length,2,.5)),this.flatMidpoints_}getFlatMidpoints(){if(!this.flatMidpoints_){this.flatMidpoints_=[];const e=this.flatCoordinates_;let l=0;const _=this.ends_;for(let n=0,g=_.length;n<g;++n){const m=_[n],y=(0,b.WW)(e,l,m,2,.5);(0,k.l7)(this.flatMidpoints_,y),l=m}}return this.flatMidpoints_}getId(){return this.id_}getOrientedFlatCoordinates(){return this.flatCoordinates_}getGeometry(){return this}getSimplifiedGeometry(e){return this}simplifyTransformed(e,l){return this}getProperties(){return this.properties_}getStride(){return 2}getStyleFunction(){return this.styleFunction}getType(){return this.type_}transform(e){const l=(e=(0,Z.U2)(e)).getExtent(),_=e.getWorldExtent();if(l&&_){const n=(0,F.Cr)(_)/(0,F.Cr)(l);(0,W.qC)(v,_[0],_[3],n,-n,0,0,0),(0,P.vT)(this.flatCoordinates_,0,this.flatCoordinates_.length,2,v,this.flatCoordinates_)}}getEnds(){return this.ends_}}f.prototype.getEndss=f.prototype.getEnds,f.prototype.getFlatCoordinates=f.prototype.getOrientedFlatCoordinates;const r=f},3903:(jt,ht,a)=>{"use strict";a.d(ht,{Z:()=>F});const F=class W{drawCustom(G,Z,b,S){}drawGeometry(G){}setStyle(G){}drawCircle(G,Z){}drawFeature(G,Z){}drawGeometryCollection(G,Z){}drawLineString(G,Z){}drawMultiLineString(G,Z){}drawMultiPoint(G,Z){}drawMultiPolygon(G,Z){}drawPoint(G,Z){}drawPolygon(G,Z){}drawText(G,Z){}setFillStrokeStyle(G,Z){}setImageStyle(G,Z){}setTextStyle(G,Z){}}},6380:(jt,ht,a)=>{"use strict";a.d(ht,{Df:()=>b,He:()=>f,Kd:()=>N,PH:()=>d,Qx:()=>I,Tx:()=>r,V4:()=>c,X9:()=>v,Zw:()=>z,_f:()=>A,bL:()=>S,mb:()=>P,oB:()=>l,rc:()=>u,ru:()=>e,sG:()=>n,yC:()=>_});var W=a(7300),F=a(3233),k=a(5526),G=a(4211),Z=a(4118);const b="10px sans-serif",S="#000",P="round",v=[],f=0,u="round",c=10,r="#000",d="center",e="middle",l=[0,0,0,0],_=1,n=new W.Z;let m,g=null;const y={},I=function(){const x="32px ",C=["monospace","serif"],D=C.length,Y="wmytzilWMYTZIL@#/&?$%10\uf013";let nt,V;function at(Ct,vt,St){let bt=!0;for(let Gt=0;Gt<D;++Gt){const Xt=C[Gt];if(V=R(Ct+" "+vt+" "+x+Xt,Y),St!=Xt){const te=R(Ct+" "+vt+" "+x+St+","+Xt,Y);bt=bt&&te!=V}}return!!bt}function ut(){let Ct=!0;const vt=n.getKeys();for(let St=0,bt=vt.length;St<bt;++St){const Gt=vt[St];n.get(Gt)<100&&(at.apply(this,Gt.split("\n"))?((0,k.Z)(y),g=null,m=void 0,n.set(Gt,100)):(n.set(Gt,n.get(Gt)+1,!0),Ct=!1))}Ct&&(clearInterval(nt),nt=void 0)}return function(Ct){const vt=(0,Z.p)(Ct);if(!vt)return;const St=vt.families;for(let bt=0,Gt=St.length;bt<Gt;++bt){const Xt=St[bt],te=vt.style+"\n"+vt.weight+"\n"+Xt;void 0===n.get(te)&&(n.set(te,100,!0),at(vt.style,vt.weight,Xt)||(n.set(te,0,!0),void 0===nt&&(nt=setInterval(ut,32))))}}}(),O=function(){let w;return function(x){let C=y[x];if(null==C){if(F.Id){const D=(0,Z.p)(x),Y=E(x,"\u017dg");C=(isNaN(Number(D.lineHeight))?1.2:Number(D.lineHeight))*(Y.actualBoundingBoxAscent+Y.actualBoundingBoxDescent)}else w||(w=document.createElement("div"),w.innerHTML="M",w.style.minHeight="0",w.style.maxHeight="none",w.style.height="auto",w.style.padding="0",w.style.border="none",w.style.position="absolute",w.style.display="block",w.style.left="-99999px"),w.style.font=x,document.body.appendChild(w),C=w.offsetHeight,document.body.removeChild(w);y[x]=C}return C}}();function E(w,x){return g||(g=(0,G.E4)(1,1)),w!=m&&(g.font=w,m=g.font),g.measureText(x)}function R(w,x){return E(w,x).width}function N(w,x,C){if(x in C)return C[x];const D=x.split("\n").reduce((Y,nt)=>Math.max(Y,R(w,nt)),0);return C[x]=D,D}function z(w,x){const C=[],D=[],Y=[];let nt=0,V=0,at=0,ut=0;for(let Ct=0,vt=x.length;Ct<=vt;Ct+=2){const St=x[Ct];if("\n"===St||Ct===vt){nt=Math.max(nt,V),Y.push(V),V=0,at+=ut;continue}const bt=x[Ct+1]||w.font,Gt=R(bt,St);C.push(Gt),V+=Gt;const Xt=O(bt);D.push(Xt),ut=Math.max(ut,Xt)}return{width:nt,height:at,widths:C,heights:D,lineWidths:Y}}function A(w,x,C,D,Y,nt,V,at,ut,Ct,vt){w.save(),1!==C&&(w.globalAlpha*=C),x&&w.setTransform.apply(w,x),D.contextInstructions?(w.translate(ut,Ct),w.scale(vt[0],vt[1]),function L(w,x){const C=w.contextInstructions;for(let D=0,Y=C.length;D<Y;D+=2)Array.isArray(C[D+1])?x[C[D]].apply(x,C[D+1]):x[C[D]]=C[D+1]}(D,w)):vt[0]<0||vt[1]<0?(w.translate(ut,Ct),w.scale(vt[0],vt[1]),w.drawImage(D,Y,nt,V,at,0,0,V,at)):w.drawImage(D,Y,nt,V,at,ut,Ct,V*vt[0],at*vt[1]),w.restore()}},7231:(jt,ht,a)=>{"use strict";a.d(ht,{Z:()=>f});var W=a(8626),F=a(6600),k=a(3903),G=a(3836),Z=a(1316),b=a(6380),S=a(9363),P=a(2754);const f=class v extends k.Z{constructor(c,r,d,e){super(),this.tolerance=c,this.maxExtent=r,this.pixelRatio=e,this.maxLineWidth=0,this.resolution=d,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_=null,this.bufferedMaxExtent_=null,this.instructions=[],this.coordinates=[],this.tmpCoordinate_=[],this.hitDetectionInstructions=[],this.state={}}applyPixelRatio(c){const r=this.pixelRatio;return 1==r?c:c.map(function(d){return d*r})}appendFlatPointCoordinates(c,r){const d=this.getBufferedMaxExtent(),e=this.tmpCoordinate_,l=this.coordinates;let _=l.length;for(let n=0,g=c.length;n<g;n+=r)e[0]=c[n],e[1]=c[n+1],(0,Z.b8)(d,e)&&(l[_++]=e[0],l[_++]=e[1]);return _}appendFlatLineCoordinates(c,r,d,e,l,_){const n=this.coordinates;let g=n.length;const m=this.getBufferedMaxExtent();_&&(r+=e);let y=c[r],I=c[r+1];const O=this.tmpCoordinate_;let R,N,z,E=!0;for(R=r+e;R<d;R+=e)O[0]=c[R],O[1]=c[R+1],z=(0,Z.pX)(m,O),z!==N?(E&&(n[g++]=y,n[g++]=I,E=!1),n[g++]=O[0],n[g++]=O[1]):z===F.Z.INTERSECTING?(n[g++]=O[0],n[g++]=O[1],E=!1):E=!0,y=O[0],I=O[1],N=z;return(l&&E||R===r+e)&&(n[g++]=y,n[g++]=I),g}drawCustomCoordinates_(c,r,d,e,l){for(let _=0,n=d.length;_<n;++_){const g=d[_],m=this.appendFlatLineCoordinates(c,r,g,e,!1,!1);l.push(m),r=g}return r}drawCustom(c,r,d,e){this.beginGeometry(c,r);const l=c.getType(),_=c.getStride(),n=this.coordinates.length;let g,m,y,I,O;switch(l){case"MultiPolygon":g=c.getOrientedFlatCoordinates(),I=[];const E=c.getEndss();O=0;for(let R=0,N=E.length;R<N;++R){const z=[];O=this.drawCustomCoordinates_(g,O,E[R],_,z),I.push(z)}this.instructions.push([W.ZP.CUSTOM,n,I,c,d,P.ug]),this.hitDetectionInstructions.push([W.ZP.CUSTOM,n,I,c,e||d,P.ug]);break;case"Polygon":case"MultiLineString":y=[],g="Polygon"==l?c.getOrientedFlatCoordinates():c.getFlatCoordinates(),O=this.drawCustomCoordinates_(g,0,c.getEnds(),_,y),this.instructions.push([W.ZP.CUSTOM,n,y,c,d,P.o1]),this.hitDetectionInstructions.push([W.ZP.CUSTOM,n,y,c,e||d,P.o1]);break;case"LineString":case"Circle":g=c.getFlatCoordinates(),m=this.appendFlatLineCoordinates(g,0,g.length,_,!1,!1),this.instructions.push([W.ZP.CUSTOM,n,m,c,d,P.Ml]),this.hitDetectionInstructions.push([W.ZP.CUSTOM,n,m,c,e||d,P.Ml]);break;case"MultiPoint":g=c.getFlatCoordinates(),m=this.appendFlatPointCoordinates(g,_),m>n&&(this.instructions.push([W.ZP.CUSTOM,n,m,c,d,P.Ml]),this.hitDetectionInstructions.push([W.ZP.CUSTOM,n,m,c,e||d,P.Ml]));break;case"Point":g=c.getFlatCoordinates(),this.coordinates.push(g[0],g[1]),m=this.coordinates.length,this.instructions.push([W.ZP.CUSTOM,n,m,c,d]),this.hitDetectionInstructions.push([W.ZP.CUSTOM,n,m,c,e||d])}this.endGeometry(r)}beginGeometry(c,r){this.beginGeometryInstruction1_=[W.ZP.BEGIN_GEOMETRY,r,0,c],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[W.ZP.BEGIN_GEOMETRY,r,0,c],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)}finish(){return{instructions:this.instructions,hitDetectionInstructions:this.hitDetectionInstructions,coordinates:this.coordinates}}reverseHitDetectionInstructions(){const c=this.hitDetectionInstructions;let r;c.reverse();const d=c.length;let e,l,_=-1;for(r=0;r<d;++r)e=c[r],l=e[0],l==W.ZP.END_GEOMETRY?_=r:l==W.ZP.BEGIN_GEOMETRY&&(e[2]=r,(0,S.FZ)(this.hitDetectionInstructions,_,r),_=-1)}setFillStrokeStyle(c,r){const d=this.state;if(c){const e=c.getColor();d.fillStyle=(0,G.y)(e||b.bL)}else d.fillStyle=void 0;if(r){const e=r.getColor();d.strokeStyle=(0,G.y)(e||b.Tx);const l=r.getLineCap();d.lineCap=void 0!==l?l:b.mb;const _=r.getLineDash();d.lineDash=_?_.slice():b.X9;const n=r.getLineDashOffset();d.lineDashOffset=n||b.He;const g=r.getLineJoin();d.lineJoin=void 0!==g?g:b.rc;const m=r.getWidth();d.lineWidth=void 0!==m?m:b.yC;const y=r.getMiterLimit();d.miterLimit=void 0!==y?y:b.V4,d.lineWidth>this.maxLineWidth&&(this.maxLineWidth=d.lineWidth,this.bufferedMaxExtent_=null)}else d.strokeStyle=void 0,d.lineCap=void 0,d.lineDash=null,d.lineDashOffset=void 0,d.lineJoin=void 0,d.lineWidth=void 0,d.miterLimit=void 0}createFill(c){const r=c.fillStyle,d=[W.ZP.SET_FILL_STYLE,r];return"string"!=typeof r&&d.push(!0),d}applyStroke(c){this.instructions.push(this.createStroke(c))}createStroke(c){return[W.ZP.SET_STROKE_STYLE,c.strokeStyle,c.lineWidth*this.pixelRatio,c.lineCap,c.lineJoin,c.miterLimit,this.applyPixelRatio(c.lineDash),c.lineDashOffset*this.pixelRatio]}updateFillStyle(c,r){const d=c.fillStyle;("string"!=typeof d||c.currentFillStyle!=d)&&(void 0!==d&&this.instructions.push(r.call(this,c)),c.currentFillStyle=d)}updateStrokeStyle(c,r){const d=c.strokeStyle,e=c.lineCap,l=c.lineDash,_=c.lineDashOffset,n=c.lineJoin,g=c.lineWidth,m=c.miterLimit;(c.currentStrokeStyle!=d||c.currentLineCap!=e||l!=c.currentLineDash&&!(0,S.fS)(c.currentLineDash,l)||c.currentLineDashOffset!=_||c.currentLineJoin!=n||c.currentLineWidth!=g||c.currentMiterLimit!=m)&&(void 0!==d&&r.call(this,c),c.currentStrokeStyle=d,c.currentLineCap=e,c.currentLineDash=l,c.currentLineDashOffset=_,c.currentLineJoin=n,c.currentLineWidth=g,c.currentMiterLimit=m)}endGeometry(c){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;const r=[W.ZP.END_GEOMETRY,c];this.instructions.push(r),this.hitDetectionInstructions.push(r)}getBufferedMaxExtent(){return!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=(0,Z.d9)(this.maxExtent),this.maxLineWidth>0)&&(0,Z.f3)(this.bufferedMaxExtent_,this.resolution*(this.maxLineWidth+1)/2,this.bufferedMaxExtent_),this.bufferedMaxExtent_}}},223:(jt,ht,a)=>{"use strict";a.d(ht,{Z:()=>d});var W=a(7231),F=a(8626);var Z=a(6380);var P=a(7904);const f=class v extends W.Z{constructor(l,_,n,g){super(l,_,n,g)}drawFlatCoordinatess_(l,_,n,g){const m=this.state,y=void 0!==m.fillStyle,I=void 0!==m.strokeStyle,O=n.length;this.instructions.push(F.$O),this.hitDetectionInstructions.push(F.$O);for(let E=0;E<O;++E){const R=n[E],N=this.coordinates.length,z=this.appendFlatLineCoordinates(l,_,R,g,!0,!I),st=[F.ZP.MOVE_TO_LINE_TO,N,z];this.instructions.push(st),this.hitDetectionInstructions.push(st),I&&(this.instructions.push(F.s3),this.hitDetectionInstructions.push(F.s3)),_=R}return y&&(this.instructions.push(F.gO),this.hitDetectionInstructions.push(F.gO)),I&&(this.instructions.push(F.Yc),this.hitDetectionInstructions.push(F.Yc)),_}drawCircle(l,_){const n=this.state;if(void 0===n.fillStyle&&void 0===n.strokeStyle)return;this.setFillStrokeStyles_(),this.beginGeometry(l,_),void 0!==n.fillStyle&&this.hitDetectionInstructions.push([F.ZP.SET_FILL_STYLE,Z.bL]),void 0!==n.strokeStyle&&this.hitDetectionInstructions.push([F.ZP.SET_STROKE_STYLE,n.strokeStyle,n.lineWidth,n.lineCap,n.lineJoin,n.miterLimit,Z.X9,Z.He]);const y=l.getFlatCoordinates(),I=l.getStride(),O=this.coordinates.length;this.appendFlatLineCoordinates(y,0,y.length,I,!1,!1);const E=[F.ZP.CIRCLE,O];this.instructions.push(F.$O,E),this.hitDetectionInstructions.push(F.$O,E),void 0!==n.fillStyle&&(this.instructions.push(F.gO),this.hitDetectionInstructions.push(F.gO)),void 0!==n.strokeStyle&&(this.instructions.push(F.Yc),this.hitDetectionInstructions.push(F.Yc)),this.endGeometry(_)}drawPolygon(l,_){const n=this.state;if(void 0===n.fillStyle&&void 0===n.strokeStyle)return;this.setFillStrokeStyles_(),this.beginGeometry(l,_),void 0!==n.fillStyle&&this.hitDetectionInstructions.push([F.ZP.SET_FILL_STYLE,Z.bL]),void 0!==n.strokeStyle&&this.hitDetectionInstructions.push([F.ZP.SET_STROKE_STYLE,n.strokeStyle,n.lineWidth,n.lineCap,n.lineJoin,n.miterLimit,Z.X9,Z.He]);const y=l.getEnds(),I=l.getOrientedFlatCoordinates(),O=l.getStride();this.drawFlatCoordinatess_(I,0,y,O),this.endGeometry(_)}drawMultiPolygon(l,_){const n=this.state;if(void 0===n.fillStyle&&void 0===n.strokeStyle)return;this.setFillStrokeStyles_(),this.beginGeometry(l,_),void 0!==n.fillStyle&&this.hitDetectionInstructions.push([F.ZP.SET_FILL_STYLE,Z.bL]),void 0!==n.strokeStyle&&this.hitDetectionInstructions.push([F.ZP.SET_STROKE_STYLE,n.strokeStyle,n.lineWidth,n.lineCap,n.lineJoin,n.miterLimit,Z.X9,Z.He]);const y=l.getEndss(),I=l.getOrientedFlatCoordinates(),O=l.getStride();let E=0;for(let R=0,N=y.length;R<N;++R)E=this.drawFlatCoordinatess_(I,E,y[R],O);this.endGeometry(_)}finish(){this.reverseHitDetectionInstructions(),this.state=null;const l=this.tolerance;if(0!==l){const _=this.coordinates;for(let n=0,g=_.length;n<g;++n)_[n]=(0,P.uZ)(_[n],l)}return super.finish()}setFillStrokeStyles_(){const l=this.state;void 0!==l.fillStyle&&this.updateFillStyle(l,this.createFill),void 0!==l.strokeStyle&&this.updateStrokeStyle(l,this.applyStroke)}};var u=a(7407);const c={Circle:f,Default:W.Z,Image:class k extends W.Z{constructor(l,_,n,g){super(l,_,n,g),this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.anchorX_=void 0,this.anchorY_=void 0,this.height_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.scale_=void 0,this.width_=void 0,this.declutterMode_=void 0,this.declutterImageWithText_=void 0}drawPoint(l,_){if(!this.image_)return;this.beginGeometry(l,_);const n=l.getFlatCoordinates(),g=l.getStride(),m=this.coordinates.length,y=this.appendFlatPointCoordinates(n,g);this.instructions.push([F.ZP.DRAW_IMAGE,m,y,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([F.ZP.DRAW_IMAGE,m,y,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(_)}drawMultiPoint(l,_){if(!this.image_)return;this.beginGeometry(l,_);const n=l.getFlatCoordinates(),g=l.getStride(),m=this.coordinates.length,y=this.appendFlatPointCoordinates(n,g);this.instructions.push([F.ZP.DRAW_IMAGE,m,y,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([F.ZP.DRAW_IMAGE,m,y,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(_)}finish(){return this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0,super.finish()}setImageStyle(l,_){const n=l.getAnchor(),g=l.getSize(),m=l.getOrigin();this.imagePixelRatio_=l.getPixelRatio(this.pixelRatio),this.anchorX_=n[0],this.anchorY_=n[1],this.hitDetectionImage_=l.getHitDetectionImage(),this.image_=l.getImage(this.pixelRatio),this.height_=g[1],this.opacity_=l.getOpacity(),this.originX_=m[0],this.originY_=m[1],this.rotateWithView_=l.getRotateWithView(),this.rotation_=l.getRotation(),this.scale_=l.getScaleArray(),this.width_=g[0],this.declutterMode_=l.getDeclutterMode(),this.declutterImageWithText_=_}},LineString:class b extends W.Z{constructor(l,_,n,g){super(l,_,n,g)}drawFlatCoordinates_(l,_,n,g){const m=this.coordinates.length,y=this.appendFlatLineCoordinates(l,_,n,g,!1,!1),I=[F.ZP.MOVE_TO_LINE_TO,m,y];return this.instructions.push(I),this.hitDetectionInstructions.push(I),n}drawLineString(l,_){const n=this.state;if(void 0===n.strokeStyle||void 0===n.lineWidth)return;this.updateStrokeStyle(n,this.applyStroke),this.beginGeometry(l,_),this.hitDetectionInstructions.push([F.ZP.SET_STROKE_STYLE,n.strokeStyle,n.lineWidth,n.lineCap,n.lineJoin,n.miterLimit,Z.X9,Z.He],F.$O);const y=l.getFlatCoordinates(),I=l.getStride();this.drawFlatCoordinates_(y,0,y.length,I),this.hitDetectionInstructions.push(F.Yc),this.endGeometry(_)}drawMultiLineString(l,_){const n=this.state;if(void 0===n.strokeStyle||void 0===n.lineWidth)return;this.updateStrokeStyle(n,this.applyStroke),this.beginGeometry(l,_),this.hitDetectionInstructions.push([F.ZP.SET_STROKE_STYLE,n.strokeStyle,n.lineWidth,n.lineCap,n.lineJoin,n.miterLimit,Z.X9,Z.He],F.$O);const y=l.getEnds(),I=l.getFlatCoordinates(),O=l.getStride();let E=0;for(let R=0,N=y.length;R<N;++R)E=this.drawFlatCoordinates_(I,E,y[R],O);this.hitDetectionInstructions.push(F.Yc),this.endGeometry(_)}finish(){const l=this.state;return null!=l.lastStroke&&l.lastStroke!=this.coordinates.length&&this.instructions.push(F.Yc),this.reverseHitDetectionInstructions(),this.state=null,super.finish()}applyStroke(l){null!=l.lastStroke&&l.lastStroke!=this.coordinates.length&&(this.instructions.push(F.Yc),l.lastStroke=this.coordinates.length),l.lastStroke=0,super.applyStroke(l),this.instructions.push(F.$O)}},Polygon:f,Text:u.Z},d=class r{constructor(l,_,n,g){this.tolerance_=l,this.maxExtent_=_,this.pixelRatio_=g,this.resolution_=n,this.buildersByZIndex_={}}finish(){const l={};for(const _ in this.buildersByZIndex_){l[_]=l[_]||{};const n=this.buildersByZIndex_[_];for(const g in n){const m=n[g].finish();l[_][g]=m}}return l}getBuilder(l,_){const n=void 0!==l?l.toString():"0";let g=this.buildersByZIndex_[n];void 0===g&&(g={},this.buildersByZIndex_[n]=g);let m=g[_];return void 0===m&&(m=new(0,c[_])(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_),g[_]=m),m}}},341:(jt,ht,a)=>{"use strict";a.d(ht,{Z:()=>st});var W=a(8626),F=a(7407),k=a(6412),G=a(1316),Z=a(6380),b=a(3026),S=a(342);function P(A,L,w,x,C,D,Y,nt,V,at,ut,Ct){let vt=A[L],St=A[L+1],bt=0,Gt=0,Xt=0,te=0;function Vt(){bt=vt,Gt=St,vt=A[L+=x],St=A[L+1],te+=Xt,Xt=Math.sqrt((vt-bt)*(vt-bt)+(St-Gt)*(St-Gt))}do{Vt()}while(L<w-x&&te+Xt<D);let _e=0===Xt?0:(D-te)/Xt;const he=(0,b.t7)(bt,vt,_e),de=(0,b.t7)(Gt,St,_e),Re=L-x,gt=te,Rt=D+nt*V(at,C,ut);for(;L<w-x&&te+Xt<Rt;)Vt();_e=0===Xt?0:(Rt-te)/Xt;const Ft=(0,b.t7)(bt,vt,_e),Yt=(0,b.t7)(Gt,St,_e);let ge;if(Ct){const zt=[he,de,Ft,Yt];(0,S.U1)(zt,0,4,2,Ct,zt,zt),ge=zt[0]>zt[2]}else ge=he>Ft;const $t=Math.PI,ft=[],Pt=Re+x===L;let Nt;if(Xt=0,te=gt,vt=A[L=Re],St=A[L+1],Pt)return Vt(),Nt=Math.atan2(St-Gt,vt-bt),ge&&(Nt+=Nt>0?-$t:$t),ft[0]=[(Ft+he)/2,(Yt+de)/2,(Rt-D)/2,Nt,C],ft;for(let zt=0,Bt=(C=C.replace(/\n/g," ")).length;zt<Bt;){Vt();let ue=Math.atan2(St-Gt,vt-bt);if(ge&&(ue+=ue>0?-$t:$t),void 0!==Nt){let M=ue-Nt;if(M+=M>$t?-2*$t:M<-$t?2*$t:0,Math.abs(M)>Y)return null}Nt=ue;const ve=zt;let Ee=0;for(;zt<Bt;++zt){const K=nt*V(at,C[ge?Bt-zt-1:zt],ut);if(L+x<w&&te+Xt<D+Ee+K/2)break;Ee+=K}if(zt===ve)continue;const Mt=ge?C.substring(Bt-ve,Bt-zt):C.substring(ve,zt);_e=0===Xt?0:(D+Ee/2-te)/Xt;const rt=(0,b.t7)(bt,vt,_e),q=(0,b.t7)(Gt,St,_e);ft.push([rt,q,Ee/2,ue,Mt]),D+=Ee}return ft}var v=a(9363),f=a(2460);const u=(0,G.lJ)(),c=[],r=[],d=[],e=[];function l(A){return A[3].declutterBox}const _=new RegExp("["+String.fromCharCode(1425)+"-"+String.fromCharCode(2303)+String.fromCharCode(64285)+"-"+String.fromCharCode(65023)+String.fromCharCode(65136)+"-"+String.fromCharCode(65276)+String.fromCharCode(67584)+"-"+String.fromCharCode(69631)+String.fromCharCode(124928)+"-"+String.fromCharCode(126975)+"]");function n(A,L){return"start"===L?L=_.test(A)?"right":"left":"end"===L&&(L=_.test(A)?"left":"right"),F.I[L]}function g(A,L,w){return w>0&&A.push("\n",""),A.push(L,""),A}const y=class m{constructor(L,w,x,C){this.overlaps=x,this.pixelRatio=w,this.resolution=L,this.instructions=C.instructions,this.coordinates=C.coordinates,this.coordinateCache_={},this.renderedTransform_=(0,k.Ue)(),this.hitDetectionInstructions=C.hitDetectionInstructions,this.pixelCoordinates_=null,this.viewRotation_=0,this.fillStates=C.fillStates||{},this.strokeStates=C.strokeStates||{},this.textStates=C.textStates||{},this.widths_={},this.labels_={}}createLabel(L,w,x,C){const D=L+w+x+C;if(this.labels_[D])return this.labels_[D];const Y=C?this.strokeStates[C]:null,nt=x?this.fillStates[x]:null,V=this.textStates[w],at=this.pixelRatio,ut=[V.scale[0]*at,V.scale[1]*at],Ct=Array.isArray(L),vt=V.justify?F.I[V.justify]:n(Array.isArray(L)?L[0]:L,V.textAlign||Z.PH),St=C&&Y.lineWidth?Y.lineWidth:0,bt=Ct?L:L.split("\n").reduce(g,[]),{width:Gt,height:Xt,widths:te,heights:Vt,lineWidths:_e}=(0,Z.Zw)(V,bt),he=Gt+St,de=[],Re=(he+2)*ut[0],gt=(Xt+St)*ut[1],Rt={width:Re<0?Math.floor(Re):Math.ceil(Re),height:gt<0?Math.floor(gt):Math.ceil(gt),contextInstructions:de};(1!=ut[0]||1!=ut[1])&&de.push("scale",ut),C&&(de.push("strokeStyle",Y.strokeStyle),de.push("lineWidth",St),de.push("lineCap",Y.lineCap),de.push("lineJoin",Y.lineJoin),de.push("miterLimit",Y.miterLimit),de.push("setLineDash",[Y.lineDash]),de.push("lineDashOffset",Y.lineDashOffset)),x&&de.push("fillStyle",nt.fillStyle),de.push("textBaseline","middle"),de.push("textAlign","center");const Ft=.5-vt;let Yt=vt*he+Ft*St;const ge=[],$t=[];let Bt,ft=0,Pt=0,Nt=0,zt=0;for(let ue=0,ve=bt.length;ue<ve;ue+=2){const Ee=bt[ue];if("\n"===Ee){Pt+=ft,ft=0,Yt=vt*he+Ft*St,++zt;continue}const Mt=bt[ue+1]||V.font;Mt!==Bt&&(C&&ge.push("font",Mt),x&&$t.push("font",Mt),Bt=Mt),ft=Math.max(ft,Vt[Nt]);const rt=[Ee,Yt+Ft*te[Nt]+vt*(te[Nt]-_e[zt]),.5*(St+ft)+Pt];Yt+=te[Nt],C&&ge.push("strokeText",rt),x&&$t.push("fillText",rt),++Nt}return Array.prototype.push.apply(de,ge),Array.prototype.push.apply(de,$t),this.labels_[D]=Rt,Rt}replayTextBackground_(L,w,x,C,D,Y,nt){L.beginPath(),L.moveTo.apply(L,w),L.lineTo.apply(L,x),L.lineTo.apply(L,C),L.lineTo.apply(L,D),L.lineTo.apply(L,w),Y&&(this.alignFill_=Y[2],this.fill_(L)),nt&&(this.setStrokeStyle_(L,nt),L.stroke())}calculateImageOrLabelDimensions_(L,w,x,C,D,Y,nt,V,at,ut,Ct,vt,St,bt,Gt,Xt){let te=x-(nt*=vt[0]),Vt=C-(V*=vt[1]);const _e=D+at>L?L-at:D,he=Y+ut>w?w-ut:Y,de=bt[3]+_e*vt[0]+bt[1],Re=bt[0]+he*vt[1]+bt[2],gt=te-bt[3],Rt=Vt-bt[0];let Ft;return(Gt||0!==Ct)&&(c[0]=gt,e[0]=gt,c[1]=Rt,r[1]=Rt,r[0]=gt+de,d[0]=r[0],d[1]=Rt+Re,e[1]=d[1]),0!==Ct?(Ft=(0,k.qC)((0,k.Ue)(),x,C,1,1,Ct,-x,-C),(0,k.nn)(Ft,c),(0,k.nn)(Ft,r),(0,k.nn)(Ft,d),(0,k.nn)(Ft,e),(0,G.T9)(Math.min(c[0],r[0],d[0],e[0]),Math.min(c[1],r[1],d[1],e[1]),Math.max(c[0],r[0],d[0],e[0]),Math.max(c[1],r[1],d[1],e[1]),u)):(0,G.T9)(Math.min(gt,gt+de),Math.min(Rt,Rt+Re),Math.max(gt,gt+de),Math.max(Rt,Rt+Re),u),St&&(te=Math.round(te),Vt=Math.round(Vt)),{drawImageX:te,drawImageY:Vt,drawImageW:_e,drawImageH:he,originX:at,originY:ut,declutterBox:{minX:u[0],minY:u[1],maxX:u[2],maxY:u[3],value:Xt},canvasTransform:Ft,scale:vt}}replayImageOrLabel_(L,w,x,C,D,Y,nt){const at=C.declutterBox,ut=L.canvas,Ct=nt?nt[2]*C.scale[0]/2:0;return at.minX-Ct<=ut.width/w&&at.maxX+Ct>=0&&at.minY-Ct<=ut.height/w&&at.maxY+Ct>=0&&(!(!Y&&!nt)&&this.replayTextBackground_(L,c,r,d,e,Y,nt),(0,Z._f)(L,C.canvasTransform,D,x,C.originX,C.originY,C.drawImageW,C.drawImageH,C.drawImageX,C.drawImageY,C.scale)),!0}fill_(L){if(this.alignFill_){const w=(0,k.nn)(this.renderedTransform_,[0,0]),x=512*this.pixelRatio;L.save(),L.translate(w[0]%x,w[1]%x),L.rotate(this.viewRotation_)}L.fill(),this.alignFill_&&L.restore()}setStrokeStyle_(L,w){L.strokeStyle=w[1],L.lineWidth=w[2],L.lineCap=w[3],L.lineJoin=w[4],L.miterLimit=w[5],L.lineDashOffset=w[7],L.setLineDash(w[6])}drawLabelWithPointPlacement_(L,w,x,C){const D=this.textStates[w],Y=this.createLabel(L,w,C,x),nt=this.strokeStates[x],V=this.pixelRatio,at=n(Array.isArray(L)?L[0]:L,D.textAlign||Z.PH),ut=F.I[D.textBaseline||Z.ru],Ct=nt&&nt.lineWidth?nt.lineWidth:0;return{label:Y,anchorX:at*(Y.width/V-2*D.scale[0])+2*(.5-at)*Ct,anchorY:ut*Y.height/V+2*(.5-ut)*Ct}}execute_(L,w,x,C,D,Y,nt,V){let at;this.pixelCoordinates_&&(0,v.fS)(x,this.renderedTransform_)?at=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),at=(0,S.vT)(this.coordinates,0,this.coordinates.length,2,x,this.pixelCoordinates_),(0,k.lk)(this.renderedTransform_,x));let ut=0;const Ct=C.length;let St,bt,Gt,Xt,te,Vt,_e,he,de,Re,gt,Rt,vt=0,Ft=0,Yt=0,ge=null,$t=null;const ft=this.coordinateCache_,Pt=this.viewRotation_,Nt=Math.round(1e12*Math.atan2(-x[1],x[0]))/1e12,zt={context:L,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:Pt},Bt=this.instructions!=C||this.overlaps?0:200;let ue,ve,Ee,Mt;for(;ut<Ct;){const rt=C[ut];switch(rt[0]){case W.ZP.BEGIN_GEOMETRY:ue=rt[1],Mt=rt[3],ue.getGeometry()?void 0===nt||(0,G.kK)(nt,Mt.getExtent())?++ut:ut=rt[2]+1:ut=rt[2];break;case W.ZP.BEGIN_PATH:Ft>Bt&&(this.fill_(L),Ft=0),Yt>Bt&&(L.stroke(),Yt=0),!Ft&&!Yt&&(L.beginPath(),Xt=NaN,te=NaN),++ut;break;case W.ZP.CIRCLE:vt=rt[1];const M=at[vt],K=at[vt+1],yt=at[vt+2]-M,Et=at[vt+3]-K,At=Math.sqrt(yt*yt+Et*Et);L.moveTo(M+At,K),L.arc(M,K,At,0,2*Math.PI,!0),++ut;break;case W.ZP.CLOSE_PATH:L.closePath(),++ut;break;case W.ZP.CUSTOM:vt=rt[1],St=rt[2];const Ht=rt[4],se=6==rt.length?rt[5]:void 0;zt.geometry=rt[3],zt.feature=ue,ut in ft||(ft[ut]=[]);const Te=ft[ut];se?se(at,vt,St,2,Te):(Te[0]=at[vt],Te[1]=at[vt+1],Te.length=2),Ht(Te,zt),++ut;break;case W.ZP.DRAW_IMAGE:vt=rt[1],St=rt[2],he=rt[3],bt=rt[4],Gt=rt[5];let ce=rt[6];const ee=rt[7],We=rt[8],Ge=rt[9],Ze=rt[10];let ke=rt[11];const Ve=rt[12];let Je=rt[13];const si=rt[14],Qe=rt[15];if(!he&&rt.length>=20){de=rt[19],Re=rt[20],gt=rt[21],Rt=rt[22];const vi=this.drawLabelWithPointPlacement_(de,Re,gt,Rt);he=vi.label,rt[3]=he,bt=(vi.anchorX-rt[23])*this.pixelRatio,rt[4]=bt,Gt=(vi.anchorY-rt[24])*this.pixelRatio,rt[5]=Gt,ce=he.height,rt[6]=ce,Je=he.width,rt[13]=Je}let ei,$,J,_t;rt.length>25&&(ei=rt[25]),rt.length>17?($=rt[16],J=rt[17],_t=rt[18]):($=Z.oB,J=!1,_t=!1),Ze&&Nt?ke+=Pt:!Ze&&!Nt&&(ke-=Pt);let pt=0;for(;vt<St;vt+=2){if(ei&&ei[pt++]<Je/this.pixelRatio)continue;const vi=this.calculateImageOrLabelDimensions_(he.width,he.height,at[vt],at[vt+1],Je,ce,bt,Gt,We,Ge,ke,Ve,D,$,J||_t,ue),ci=[L,w,he,vi,ee,J?ge:null,_t?$t:null];if(V){if("none"===si)continue;if("obstacle"===si){V.insert(vi.declutterBox);continue}{let yi,_i;if(Qe){const ri=St-vt;if(!Qe[ri]){Qe[ri]=ci;continue}if(yi=Qe[ri],delete Qe[ri],_i=l(yi),V.collides(_i))continue}if(V.collides(vi.declutterBox))continue;yi&&(V.insert(_i),this.replayImageOrLabel_.apply(this,yi)),V.insert(vi.declutterBox)}}this.replayImageOrLabel_.apply(this,ci)}++ut;break;case W.ZP.DRAW_CHARS:const It=rt[1],Jt=rt[2],ie=rt[3],ye=rt[4];Rt=rt[5];const Pe=rt[6],Ie=rt[7],Fe=rt[8];gt=rt[9];const je=rt[10];de=rt[11],Re=rt[12];const Xe=[rt[13],rt[13]],ni=this.textStates[Re],Mi=ni.font,gi=[ni.scale[0]*Ie,ni.scale[1]*Ie];let pi;Mi in this.widths_?pi=this.widths_[Mi]:(pi={},this.widths_[Mi]=pi);const xn=(0,f.W)(at,It,Jt,2),Ii=Math.abs(gi[0])*(0,Z.Kd)(Mi,de,pi);if(ye||Ii<=xn){const yi=P(at,It,Jt,2,de,(xn-Ii)*n(de,this.textStates[Re].textAlign),Pe,Math.abs(gi[0]),Z.Kd,Mi,pi,Nt?0:this.viewRotation_);t:if(yi){const _i=[];let ri,Gi,Pi,ai,Ei;if(gt)for(ri=0,Gi=yi.length;ri<Gi;++ri){Ei=yi[ri],Pi=Ei[4],ai=this.createLabel(Pi,Re,"",gt),bt=Ei[2]+(gi[0]<0?-je:je),Gt=ie*ai.height+2*(.5-ie)*je*gi[1]/gi[0]-Fe;const Ci=this.calculateImageOrLabelDimensions_(ai.width,ai.height,Ei[0],Ei[1],ai.width,ai.height,bt,Gt,0,0,Ei[3],Xe,!1,Z.oB,!1,ue);if(V&&V.collides(Ci.declutterBox))break t;_i.push([L,w,ai,Ci,1,null,null])}if(Rt)for(ri=0,Gi=yi.length;ri<Gi;++ri){Ei=yi[ri],Pi=Ei[4],ai=this.createLabel(Pi,Re,Rt,""),bt=Ei[2],Gt=ie*ai.height-Fe;const Ci=this.calculateImageOrLabelDimensions_(ai.width,ai.height,Ei[0],Ei[1],ai.width,ai.height,bt,Gt,0,0,Ei[3],Xe,!1,Z.oB,!1,ue);if(V&&V.collides(Ci.declutterBox))break t;_i.push([L,w,ai,Ci,1,null,null])}V&&V.load(_i.map(l));for(let Ci=0,Xi=_i.length;Ci<Xi;++Ci)this.replayImageOrLabel_.apply(this,_i[Ci])}}++ut;break;case W.ZP.END_GEOMETRY:if(void 0!==Y){ue=rt[1];const vi=Y(ue,Mt);if(vi)return vi}++ut;break;case W.ZP.FILL:Bt?Ft++:this.fill_(L),++ut;break;case W.ZP.MOVE_TO_LINE_TO:for(vt=rt[1],St=rt[2],ve=at[vt],Ee=at[vt+1],Vt=ve+.5|0,_e=Ee+.5|0,(Vt!==Xt||_e!==te)&&(L.moveTo(ve,Ee),Xt=Vt,te=_e),vt+=2;vt<St;vt+=2)ve=at[vt],Ee=at[vt+1],Vt=ve+.5|0,_e=Ee+.5|0,(vt==St-2||Vt!==Xt||_e!==te)&&(L.lineTo(ve,Ee),Xt=Vt,te=_e);++ut;break;case W.ZP.SET_FILL_STYLE:ge=rt,this.alignFill_=rt[2],Ft&&(this.fill_(L),Ft=0,Yt&&(L.stroke(),Yt=0)),L.fillStyle=rt[1],++ut;break;case W.ZP.SET_STROKE_STYLE:$t=rt,Yt&&(L.stroke(),Yt=0),this.setStrokeStyle_(L,rt),++ut;break;case W.ZP.STROKE:Bt?Yt++:L.stroke(),++ut;break;default:++ut}}Ft&&this.fill_(L),Yt&&L.stroke()}execute(L,w,x,C,D,Y){this.viewRotation_=C,this.execute_(L,w,x,this.instructions,D,void 0,void 0,Y)}executeHitDetection(L,w,x,C,D){return this.viewRotation_=x,this.execute_(L,1,w,this.hitDetectionInstructions,!0,C,D)}};var I=a(4211),O=a(5526);const E=["Polygon","Circle","LineString","Image","Text","Default"],N={},st=class R{constructor(L,w,x,C,D,Y){this.maxExtent_=L,this.overlaps_=C,this.pixelRatio_=x,this.resolution_=w,this.renderBuffer_=Y,this.executorsByZIndex_={},this.hitDetectionContext_=null,this.hitDetectionTransform_=(0,k.Ue)(),this.createExecutors_(D)}clip(L,w){const x=this.getClipCoords(w);L.beginPath(),L.moveTo(x[0],x[1]),L.lineTo(x[2],x[3]),L.lineTo(x[4],x[5]),L.lineTo(x[6],x[7]),L.clip()}createExecutors_(L){for(const w in L){let x=this.executorsByZIndex_[w];void 0===x&&(x={},this.executorsByZIndex_[w]=x);const C=L[w];for(const D in C)x[D]=new y(this.resolution_,this.pixelRatio_,this.overlaps_,C[D])}}hasExecutors(L){for(const w in this.executorsByZIndex_){const x=this.executorsByZIndex_[w];for(let C=0,D=L.length;C<D;++C)if(L[C]in x)return!0}return!1}forEachFeatureAtCoordinate(L,w,x,C,D,Y){const nt=2*(C=Math.round(C))+1,V=(0,k.qC)(this.hitDetectionTransform_,C+.5,C+.5,1/w,-1/w,-x,-L[0],-L[1]),at=!this.hitDetectionContext_;at&&(this.hitDetectionContext_=(0,I.E4)(nt,nt,void 0,{willReadFrequently:!0}));const ut=this.hitDetectionContext_;let Ct;ut.canvas.width!==nt||ut.canvas.height!==nt?(ut.canvas.width=nt,ut.canvas.height=nt):at||ut.clearRect(0,0,nt,nt),void 0!==this.renderBuffer_&&(Ct=(0,G.lJ)(),(0,G.Wj)(Ct,L),(0,G.f3)(Ct,w*(this.renderBuffer_+C),Ct));const vt=function z(A){if(void 0!==N[A])return N[A];const L=2*A+1,w=A*A,x=new Array(w+1);for(let D=0;D<=A;++D)for(let Y=0;Y<=A;++Y){const nt=D*D+Y*Y;if(nt>w)break;let V=x[nt];V||(V=[],x[nt]=V),V.push(4*((A+D)*L+(A+Y))+3),D>0&&V.push(4*((A-D)*L+(A+Y))+3),Y>0&&(V.push(4*((A+D)*L+(A-Y))+3),D>0&&V.push(4*((A-D)*L+(A-Y))+3))}const C=[];for(let D=0,Y=x.length;D<Y;++D)x[D]&&C.push(...x[D]);return N[A]=C,C}(C);let St;function bt(de,Re){const gt=ut.getImageData(0,0,nt,nt).data;for(let Rt=0,Ft=vt.length;Rt<Ft;Rt++)if(gt[vt[Rt]]>0){if(!Y||"Image"!==St&&"Text"!==St||Y.includes(de)){const Yt=(vt[Rt]-3)/4,ge=C-Yt%nt,$t=C-(Yt/nt|0),ft=D(de,Re,ge*ge+$t*$t);if(ft)return ft}ut.clearRect(0,0,nt,nt);break}}const Gt=Object.keys(this.executorsByZIndex_).map(Number);let Xt,te,Vt,_e,he;for(Gt.sort(v.j2),Xt=Gt.length-1;Xt>=0;--Xt){const de=Gt[Xt].toString();for(Vt=this.executorsByZIndex_[de],te=E.length-1;te>=0;--te)if(St=E[te],_e=Vt[St],void 0!==_e&&(he=_e.executeHitDetection(ut,V,x,bt,Ct),he))return he}}getClipCoords(L){const w=this.maxExtent_;if(!w)return null;const x=w[0],C=w[1],D=w[2],Y=w[3],nt=[x,C,x,Y,D,Y,D,C];return(0,S.vT)(nt,0,8,2,L,nt),nt}isEmpty(){return(0,O.x)(this.executorsByZIndex_)}execute(L,w,x,C,D,Y,nt){const V=Object.keys(this.executorsByZIndex_).map(Number);let at,ut,Ct,vt,St,bt;for(V.sort(v.j2),this.maxExtent_&&(L.save(),this.clip(L,x)),Y=Y||E,nt&&V.reverse(),at=0,ut=V.length;at<ut;++at){const Gt=V[at].toString();for(St=this.executorsByZIndex_[Gt],Ct=0,vt=Y.length;Ct<vt;++Ct)bt=St[Y[Ct]],void 0!==bt&&bt.execute(L,w,x,C,D,nt)}this.maxExtent_&&L.restore()}}},6861:(jt,ht,a)=>{"use strict";a.d(ht,{Z:()=>u});var W=a(3903),F=a(3836),k=a(6412),G=a(6380),Z=a(9363),b=a(1316),S=a(3026),P=a(342),v=a(1245);const u=class f extends W.Z{constructor(r,d,e,l,_,n,g){super(),this.context_=r,this.pixelRatio_=d,this.extent_=e,this.transform_=l,this.transformRotation_=l?(0,S.FH)(Math.atan2(l[1],l[0]),10):0,this.viewRotation_=_,this.squaredTolerance_=n,this.userTransform_=g,this.contextFillState_=null,this.contextStrokeState_=null,this.contextTextState_=null,this.fillState_=null,this.strokeState_=null,this.image_=null,this.imageAnchorX_=0,this.imageAnchorY_=0,this.imageHeight_=0,this.imageOpacity_=0,this.imageOriginX_=0,this.imageOriginY_=0,this.imageRotateWithView_=!1,this.imageRotation_=0,this.imageScale_=[0,0],this.imageWidth_=0,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=!1,this.textRotation_=0,this.textScale_=[0,0],this.textFillState_=null,this.textStrokeState_=null,this.textState_=null,this.pixelCoordinates_=[],this.tmpLocalTransform_=(0,k.Ue)()}drawImages_(r,d,e,l){if(!this.image_)return;const _=(0,P.vT)(r,d,e,l,this.transform_,this.pixelCoordinates_),n=this.context_,g=this.tmpLocalTransform_,m=n.globalAlpha;1!=this.imageOpacity_&&(n.globalAlpha=m*this.imageOpacity_);let y=this.imageRotation_;0===this.transformRotation_&&(y-=this.viewRotation_),this.imageRotateWithView_&&(y+=this.viewRotation_);for(let I=0,O=_.length;I<O;I+=2){const E=_[I]-this.imageAnchorX_,R=_[I+1]-this.imageAnchorY_;if(0!==y||1!=this.imageScale_[0]||1!=this.imageScale_[1]){const N=E+this.imageAnchorX_,z=R+this.imageAnchorY_;(0,k.qC)(g,N,z,1,1,y,-N,-z),n.setTransform.apply(n,g),n.translate(N,z),n.scale(this.imageScale_[0],this.imageScale_[1]),n.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,-this.imageAnchorX_,-this.imageAnchorY_,this.imageWidth_,this.imageHeight_),n.setTransform(1,0,0,1,0,0)}else n.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,E,R,this.imageWidth_,this.imageHeight_)}1!=this.imageOpacity_&&(n.globalAlpha=m)}drawText_(r,d,e,l){if(!this.textState_||""===this.text_)return;this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);const _=(0,P.vT)(r,d,e,l,this.transform_,this.pixelCoordinates_),n=this.context_;let g=this.textRotation_;for(0===this.transformRotation_&&(g-=this.viewRotation_),this.textRotateWithView_&&(g+=this.viewRotation_);d<e;d+=l){const m=_[d]+this.textOffsetX_,y=_[d+1]+this.textOffsetY_;0!==g||1!=this.textScale_[0]||1!=this.textScale_[1]?(n.translate(m-this.textOffsetX_,y-this.textOffsetY_),n.rotate(g),n.translate(this.textOffsetX_,this.textOffsetY_),n.scale(this.textScale_[0],this.textScale_[1]),this.textStrokeState_&&n.strokeText(this.text_,0,0),this.textFillState_&&n.fillText(this.text_,0,0),n.setTransform(1,0,0,1,0,0)):(this.textStrokeState_&&n.strokeText(this.text_,m,y),this.textFillState_&&n.fillText(this.text_,m,y))}}moveToLineTo_(r,d,e,l,_){const n=this.context_,g=(0,P.vT)(r,d,e,l,this.transform_,this.pixelCoordinates_);n.moveTo(g[0],g[1]);let m=g.length;_&&(m-=2);for(let y=2;y<m;y+=2)n.lineTo(g[y],g[y+1]);return _&&n.closePath(),e}drawRings_(r,d,e,l){for(let _=0,n=e.length;_<n;++_)d=this.moveToLineTo_(r,d,e[_],l,!0);return d}drawCircle(r){if(this.squaredTolerance_&&(r=r.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),(0,b.kK)(this.extent_,r.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const d=(0,v.Kr)(r,this.transform_,this.pixelCoordinates_),e=d[2]-d[0],l=d[3]-d[1],_=Math.sqrt(e*e+l*l),n=this.context_;n.beginPath(),n.arc(d[0],d[1],_,0,2*Math.PI),this.fillState_&&n.fill(),this.strokeState_&&n.stroke()}""!==this.text_&&this.drawText_(r.getCenter(),0,2,2)}}setStyle(r){this.setFillStrokeStyle(r.getFill(),r.getStroke()),this.setImageStyle(r.getImage()),this.setTextStyle(r.getText())}setTransform(r){this.transform_=r}drawGeometry(r){switch(r.getType()){case"Point":this.drawPoint(r);break;case"LineString":this.drawLineString(r);break;case"Polygon":this.drawPolygon(r);break;case"MultiPoint":this.drawMultiPoint(r);break;case"MultiLineString":this.drawMultiLineString(r);break;case"MultiPolygon":this.drawMultiPolygon(r);break;case"GeometryCollection":this.drawGeometryCollection(r);break;case"Circle":this.drawCircle(r)}}drawFeature(r,d){const e=d.getGeometryFunction()(r);e&&(this.setStyle(d),this.drawGeometry(e))}drawGeometryCollection(r){const d=r.getGeometriesArray();for(let e=0,l=d.length;e<l;++e)this.drawGeometry(d[e])}drawPoint(r){this.squaredTolerance_&&(r=r.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const d=r.getFlatCoordinates(),e=r.getStride();this.image_&&this.drawImages_(d,0,d.length,e),""!==this.text_&&this.drawText_(d,0,d.length,e)}drawMultiPoint(r){this.squaredTolerance_&&(r=r.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const d=r.getFlatCoordinates(),e=r.getStride();this.image_&&this.drawImages_(d,0,d.length,e),""!==this.text_&&this.drawText_(d,0,d.length,e)}drawLineString(r){if(this.squaredTolerance_&&(r=r.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),(0,b.kK)(this.extent_,r.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const d=this.context_,e=r.getFlatCoordinates();d.beginPath(),this.moveToLineTo_(e,0,e.length,r.getStride(),!1),d.stroke()}if(""!==this.text_){const d=r.getFlatMidpoint();this.drawText_(d,0,2,2)}}}drawMultiLineString(r){this.squaredTolerance_&&(r=r.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const d=r.getExtent();if((0,b.kK)(this.extent_,d)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const e=this.context_,l=r.getFlatCoordinates();let _=0;const n=r.getEnds(),g=r.getStride();e.beginPath();for(let m=0,y=n.length;m<y;++m)_=this.moveToLineTo_(l,_,n[m],g,!1);e.stroke()}if(""!==this.text_){const e=r.getFlatMidpoints();this.drawText_(e,0,e.length,2)}}}drawPolygon(r){if(this.squaredTolerance_&&(r=r.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),(0,b.kK)(this.extent_,r.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const d=this.context_;d.beginPath(),this.drawRings_(r.getOrientedFlatCoordinates(),0,r.getEnds(),r.getStride()),this.fillState_&&d.fill(),this.strokeState_&&d.stroke()}if(""!==this.text_){const d=r.getFlatInteriorPoint();this.drawText_(d,0,2,2)}}}drawMultiPolygon(r){if(this.squaredTolerance_&&(r=r.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),(0,b.kK)(this.extent_,r.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const d=this.context_,e=r.getOrientedFlatCoordinates();let l=0;const _=r.getEndss(),n=r.getStride();d.beginPath();for(let g=0,m=_.length;g<m;++g)l=this.drawRings_(e,l,_[g],n);this.fillState_&&d.fill(),this.strokeState_&&d.stroke()}if(""!==this.text_){const d=r.getFlatInteriorPoints();this.drawText_(d,0,d.length,2)}}}setContextFillState_(r){const d=this.context_,e=this.contextFillState_;e?e.fillStyle!=r.fillStyle&&(e.fillStyle=r.fillStyle,d.fillStyle=r.fillStyle):(d.fillStyle=r.fillStyle,this.contextFillState_={fillStyle:r.fillStyle})}setContextStrokeState_(r){const d=this.context_,e=this.contextStrokeState_;e?(e.lineCap!=r.lineCap&&(e.lineCap=r.lineCap,d.lineCap=r.lineCap),(0,Z.fS)(e.lineDash,r.lineDash)||d.setLineDash(e.lineDash=r.lineDash),e.lineDashOffset!=r.lineDashOffset&&(e.lineDashOffset=r.lineDashOffset,d.lineDashOffset=r.lineDashOffset),e.lineJoin!=r.lineJoin&&(e.lineJoin=r.lineJoin,d.lineJoin=r.lineJoin),e.lineWidth!=r.lineWidth&&(e.lineWidth=r.lineWidth,d.lineWidth=r.lineWidth),e.miterLimit!=r.miterLimit&&(e.miterLimit=r.miterLimit,d.miterLimit=r.miterLimit),e.strokeStyle!=r.strokeStyle&&(e.strokeStyle=r.strokeStyle,d.strokeStyle=r.strokeStyle)):(d.lineCap=r.lineCap,d.setLineDash(r.lineDash),d.lineDashOffset=r.lineDashOffset,d.lineJoin=r.lineJoin,d.lineWidth=r.lineWidth,d.miterLimit=r.miterLimit,d.strokeStyle=r.strokeStyle,this.contextStrokeState_={lineCap:r.lineCap,lineDash:r.lineDash,lineDashOffset:r.lineDashOffset,lineJoin:r.lineJoin,lineWidth:r.lineWidth,miterLimit:r.miterLimit,strokeStyle:r.strokeStyle})}setContextTextState_(r){const d=this.context_,e=this.contextTextState_,l=r.textAlign?r.textAlign:G.PH;e?(e.font!=r.font&&(e.font=r.font,d.font=r.font),e.textAlign!=l&&(e.textAlign=l,d.textAlign=l),e.textBaseline!=r.textBaseline&&(e.textBaseline=r.textBaseline,d.textBaseline=r.textBaseline)):(d.font=r.font,d.textAlign=l,d.textBaseline=r.textBaseline,this.contextTextState_={font:r.font,textAlign:l,textBaseline:r.textBaseline})}setFillStrokeStyle(r,d){if(r){const e=r.getColor();this.fillState_={fillStyle:(0,F.y)(e||G.bL)}}else this.fillState_=null;if(d){const e=d.getColor(),l=d.getLineCap(),_=d.getLineDash(),n=d.getLineDashOffset(),g=d.getLineJoin(),m=d.getWidth(),y=d.getMiterLimit(),I=_||G.X9;this.strokeState_={lineCap:void 0!==l?l:G.mb,lineDash:1===this.pixelRatio_?I:I.map(O=>O*this.pixelRatio_),lineDashOffset:(n||G.He)*this.pixelRatio_,lineJoin:void 0!==g?g:G.rc,lineWidth:(void 0!==m?m:G.yC)*this.pixelRatio_,miterLimit:void 0!==y?y:G.V4,strokeStyle:(0,F.y)(e||G.Tx)}}else this.strokeState_=null}setImageStyle(r){let d;if(!r||!(d=r.getSize()))return void(this.image_=null);const e=r.getPixelRatio(this.pixelRatio_),l=r.getAnchor(),_=r.getOrigin();this.image_=r.getImage(this.pixelRatio_),this.imageAnchorX_=l[0]*e,this.imageAnchorY_=l[1]*e,this.imageHeight_=d[1]*e,this.imageOpacity_=r.getOpacity(),this.imageOriginX_=_[0],this.imageOriginY_=_[1],this.imageRotateWithView_=r.getRotateWithView(),this.imageRotation_=r.getRotation();const n=r.getScaleArray();this.imageScale_=[n[0]*this.pixelRatio_/e,n[1]*this.pixelRatio_/e],this.imageWidth_=d[0]*e}setTextStyle(r){if(r){const d=r.getFill();if(d){const R=d.getColor();this.textFillState_={fillStyle:(0,F.y)(R||G.bL)}}else this.textFillState_=null;const e=r.getStroke();if(e){const R=e.getColor(),N=e.getLineCap(),z=e.getLineDash(),st=e.getLineDashOffset(),A=e.getLineJoin(),L=e.getWidth(),w=e.getMiterLimit();this.textStrokeState_={lineCap:void 0!==N?N:G.mb,lineDash:z||G.X9,lineDashOffset:st||G.He,lineJoin:void 0!==A?A:G.rc,lineWidth:void 0!==L?L:G.yC,miterLimit:void 0!==w?w:G.V4,strokeStyle:(0,F.y)(R||G.Tx)}}else this.textStrokeState_=null;const l=r.getFont(),_=r.getOffsetX(),n=r.getOffsetY(),g=r.getRotateWithView(),m=r.getRotation(),y=r.getScaleArray(),I=r.getText(),O=r.getTextAlign(),E=r.getTextBaseline();this.textState_={font:void 0!==l?l:G.Df,textAlign:void 0!==O?O:G.PH,textBaseline:void 0!==E?E:G.ru},this.text_=void 0!==I?Array.isArray(I)?I.reduce((R,N,z)=>R+(z%2?" ":N),""):I:"",this.textOffsetX_=void 0!==_?this.pixelRatio_*_:0,this.textOffsetY_=void 0!==n?this.pixelRatio_*n:0,this.textRotateWithView_=void 0!==g&&g,this.textRotation_=void 0!==m?m:0,this.textScale_=[this.pixelRatio_*y[0],this.pixelRatio_*y[1]]}else this.text_=""}}},8626:(jt,ht,a)=>{"use strict";a.d(ht,{$O:()=>G,Yc:()=>k,ZP:()=>b,gO:()=>F,s3:()=>Z});const W={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},F=[W.FILL],k=[W.STROKE],G=[W.BEGIN_PATH],Z=[W.CLOSE_PATH],b=W},7407:(jt,ht,a)=>{"use strict";a.d(ht,{I:()=>f,Z:()=>c});var W=a(7231),F=a(8626),k=a(3836),G=a(6380),Z=a(3089),b=a(1316),S=a(3026);function P(r,d,e,l,_){const n=[];let g=e,m=0,y=d.slice(e,2);for(;m<r&&g+_<l;){const[I,O]=y.slice(-2),E=d[g+_],R=d[g+_+1],N=Math.sqrt((E-I)*(E-I)+(R-O)*(R-O));if(m+=N,m>=r){const z=(r-m+N)/N,st=(0,S.t7)(I,E,z),A=(0,S.t7)(O,R,z);y.push(st,A),n.push(y),y=[st,A],m==r&&(g+=_),m=0}else if(m<r)y.push(d[g+_],d[g+_+1]),g+=_;else{const z=N-m,st=(0,S.t7)(I,E,z/N),A=(0,S.t7)(O,R,z/N);y.push(st,A),n.push(y),y=[st,A],m=0,g+=_}}return m>0&&n.push(y),n}function v(r,d,e,l,_){let O,E,R,N,z,st,A,L,w,x,n=e,g=e,m=0,y=0,I=e;for(E=e;E<l;E+=_){const C=d[E],D=d[E+1];void 0!==z&&(w=C-z,x=D-st,N=Math.sqrt(w*w+x*x),void 0!==A&&(y+=R,O=Math.acos((A*w+L*x)/(R*N)),O>r&&(y>m&&(m=y,n=I,g=E),y=0,I=E-_)),R=N,A=w,L=x),z=C,st=D}return y+=N,y>m?[I,E]:[n,g]}const f={left:0,center:.5,right:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1},c=class u extends W.Z{constructor(d,e,l,_){super(d,e,l,_),this.labels_=null,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=void 0,this.textRotation_=0,this.textFillState_=null,this.fillStates={},this.fillStates[G.bL]={fillStyle:G.bL},this.textStrokeState_=null,this.strokeStates={},this.textState_={},this.textStates={},this.textKey_="",this.fillKey_="",this.strokeKey_="",this.declutterImageWithText_=void 0}finish(){const d=super.finish();return d.textStates=this.textStates,d.fillStates=this.fillStates,d.strokeStates=this.strokeStates,d}drawText(d,e){const n=this.textState_;if(""===this.text_||!n||!this.textFillState_&&!this.textStrokeState_)return;const g=this.coordinates;let m=g.length;const y=d.getType();let I=null,O=d.getStride();if("line"!==n.placement||"LineString"!=y&&"MultiLineString"!=y&&"Polygon"!=y&&"MultiPolygon"!=y){let E=n.overflow?null:[];switch(y){case"Point":case"MultiPoint":I=d.getFlatCoordinates();break;case"LineString":I=d.getFlatMidpoint();break;case"Circle":I=d.getCenter();break;case"MultiLineString":I=d.getFlatMidpoints(),O=2;break;case"Polygon":I=d.getFlatInteriorPoint(),n.overflow||E.push(I[2]/this.resolution),O=3;break;case"MultiPolygon":const L=d.getFlatInteriorPoints();I=[];for(let w=0,x=L.length;w<x;w+=3)n.overflow||E.push(L[w+2]/this.resolution),I.push(L[w],L[w+1]);if(0===I.length)return;O=2}const R=this.appendFlatPointCoordinates(I,O);if(R===m)return;if(E&&(R-m)/2!=I.length/O){let L=m/2;E=E.filter((w,x)=>{const C=g[2*(L+x)]===I[x*O]&&g[2*(L+x)+1]===I[x*O+1];return C||--L,C})}this.saveTextStates_(),(n.backgroundFill||n.backgroundStroke)&&(this.setFillStrokeStyle(n.backgroundFill,n.backgroundStroke),n.backgroundFill&&this.updateFillStyle(this.state,this.createFill),n.backgroundStroke&&(this.updateStrokeStyle(this.state,this.applyStroke),this.hitDetectionInstructions.push(this.createStroke(this.state)))),this.beginGeometry(d,e);let N=n.padding;if(N!=G.oB&&(n.scale[0]<0||n.scale[1]<0)){let L=n.padding[0],w=n.padding[1],x=n.padding[2],C=n.padding[3];n.scale[0]<0&&(w=-w,C=-C),n.scale[1]<0&&(L=-L,x=-x),N=[L,w,x,C]}const z=this.pixelRatio;this.instructions.push([F.ZP.DRAW_IMAGE,m,R,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[1,1],NaN,void 0,this.declutterImageWithText_,N==G.oB?G.oB:N.map(function(L){return L*z}),!!n.backgroundFill,!!n.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,E]);const st=1/z,A=this.state.fillStyle;n.backgroundFill&&(this.state.fillStyle=G.bL,this.hitDetectionInstructions.push(this.createFill(this.state))),this.hitDetectionInstructions.push([F.ZP.DRAW_IMAGE,m,R,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[st,st],NaN,void 0,this.declutterImageWithText_,N,!!n.backgroundFill,!!n.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_?G.bL:this.fillKey_,this.textOffsetX_,this.textOffsetY_,E]),n.backgroundFill&&(this.state.fillStyle=A,this.hitDetectionInstructions.push(this.createFill(this.state))),this.endGeometry(e)}else{if(!(0,b.kK)(this.getBufferedMaxExtent(),d.getExtent()))return;let E;if(I=d.getFlatCoordinates(),"LineString"==y)E=[I.length];else if("MultiLineString"==y)E=d.getEnds();else if("Polygon"==y)E=d.getEnds().slice(0,1);else if("MultiPolygon"==y){const st=d.getEndss();E=[];for(let A=0,L=st.length;A<L;++A)E.push(st[A][0])}this.beginGeometry(d,e);const R=n.repeat,N=R?void 0:n.textAlign;let z=0;for(let st=0,A=E.length;st<A;++st){let L;L=R?P(R*this.resolution,I,z,E[st],O):[I.slice(z,E[st])];for(let w=0,x=L.length;w<x;++w){const C=L[w];let D=0,Y=C.length;if(null==N){const V=v(n.maxAngle,C,0,C.length,2);D=V[0],Y=V[1]}for(let V=D;V<Y;V+=O)g.push(C[V],C[V+1]);const nt=g.length;z=E[st],this.drawChars_(m,nt),m=nt}}this.endGeometry(e)}}saveTextStates_(){const d=this.textStrokeState_,e=this.textState_,l=this.textFillState_,_=this.strokeKey_;d&&(_ in this.strokeStates||(this.strokeStates[_]={strokeStyle:d.strokeStyle,lineCap:d.lineCap,lineDashOffset:d.lineDashOffset,lineWidth:d.lineWidth,lineJoin:d.lineJoin,miterLimit:d.miterLimit,lineDash:d.lineDash}));const n=this.textKey_;n in this.textStates||(this.textStates[n]={font:e.font,textAlign:e.textAlign||G.PH,justify:e.justify,textBaseline:e.textBaseline||G.ru,scale:e.scale});const g=this.fillKey_;l&&(g in this.fillStates||(this.fillStates[g]={fillStyle:l.fillStyle}))}drawChars_(d,e){const l=this.textStrokeState_,_=this.textState_,n=this.strokeKey_,g=this.textKey_,m=this.fillKey_;this.saveTextStates_();const y=this.pixelRatio,I=f[_.textBaseline],O=this.textOffsetY_*y,E=this.text_,R=l?l.lineWidth*Math.abs(_.scale[0])/2:0;this.instructions.push([F.ZP.DRAW_CHARS,d,e,I,_.overflow,m,_.maxAngle,y,O,n,R*y,E,g,1]),this.hitDetectionInstructions.push([F.ZP.DRAW_CHARS,d,e,I,_.overflow,m&&G.bL,_.maxAngle,1,O,n,R,E,g,1/y])}setTextStyle(d,e){let l,_,n;if(d){const g=d.getFill();g?(_=this.textFillState_,_||(_={},this.textFillState_=_),_.fillStyle=(0,k.y)(g.getColor()||G.bL)):(_=null,this.textFillState_=_);const m=d.getStroke();if(m){n=this.textStrokeState_,n||(n={},this.textStrokeState_=n);const z=m.getLineDash(),st=m.getLineDashOffset(),A=m.getWidth(),L=m.getMiterLimit();n.lineCap=m.getLineCap()||G.mb,n.lineDash=z?z.slice():G.X9,n.lineDashOffset=void 0===st?G.He:st,n.lineJoin=m.getLineJoin()||G.rc,n.lineWidth=void 0===A?G.yC:A,n.miterLimit=void 0===L?G.V4:L,n.strokeStyle=(0,k.y)(m.getColor()||G.Tx)}else n=null,this.textStrokeState_=n;l=this.textState_;const y=d.getFont()||G.Df;(0,G.Qx)(y);const I=d.getScaleArray();l.overflow=d.getOverflow(),l.font=y,l.maxAngle=d.getMaxAngle(),l.placement=d.getPlacement(),l.textAlign=d.getTextAlign(),l.repeat=d.getRepeat(),l.justify=d.getJustify(),l.textBaseline=d.getTextBaseline()||G.ru,l.backgroundFill=d.getBackgroundFill(),l.backgroundStroke=d.getBackgroundStroke(),l.padding=d.getPadding()||G.oB,l.scale=void 0===I?[1,1]:I;const O=d.getOffsetX(),E=d.getOffsetY(),R=d.getRotateWithView(),N=d.getRotation();this.text_=d.getText()||"",this.textOffsetX_=void 0===O?0:O,this.textOffsetY_=void 0===E?0:E,this.textRotateWithView_=void 0!==R&&R,this.textRotation_=void 0===N?0:N,this.strokeKey_=n?("string"==typeof n.strokeStyle?n.strokeStyle:(0,Z.sq)(n.strokeStyle))+n.lineCap+n.lineDashOffset+"|"+n.lineWidth+n.lineJoin+n.miterLimit+"["+n.lineDash.join()+"]":"",this.textKey_=l.font+l.scale+(l.textAlign||"?")+(l.repeat||"?")+(l.justify||"?")+(l.textBaseline||"?"),this.fillKey_=_?"string"==typeof _.fillStyle?_.fillStyle:"|"+(0,Z.sq)(_.fillStyle):""}else this.text_="";this.declutterImageWithText_=e}}},1693:(jt,ht,a)=>{"use strict";a.d(ht,{TU:()=>P,UN:()=>S,ix:()=>v});var W=a(6861),F=a(1485),k=a(9363),G=a(3026),Z=a(4211),b=a(1316);const S=.5;function P(f,u,c,r,d,e,l){const g=(0,Z.E4)(f[0]*S,f[1]*S);g.imageSmoothingEnabled=!1;const m=g.canvas,y=new W.Z(g,S,d,null,l),I=c.length,O=Math.floor(16777215/I),E={};for(let N=1;N<=I;++N){const z=c[N-1],st=z.getStyleFunction()||r;if(!st)continue;let A=st(z,e);if(!A)continue;Array.isArray(A)||(A=[A]);const w=(N*O).toString(16).padStart(7,"#00000");for(let x=0,C=A.length;x<C;++x){const D=A[x],Y=D.getGeometryFunction()(z);if(!Y||!(0,b.kK)(d,Y.getExtent()))continue;const nt=D.clone(),V=nt.getFill();V&&V.setColor(w);const at=nt.getStroke();at&&(at.setColor(w),at.setLineDash(null)),nt.setText(void 0);const ut=D.getImage();if(ut){const bt=ut.getImageSize();if(!bt)continue;const Gt=(0,Z.E4)(bt[0],bt[1],void 0,{alpha:!1}),Xt=Gt.canvas;Gt.fillStyle=w,Gt.fillRect(0,0,Xt.width,Xt.height),nt.setImage(new F.Z({img:Xt,imgSize:bt,anchor:ut.getAnchor(),anchorXUnits:"pixels",anchorYUnits:"pixels",offset:ut.getOrigin(),opacity:1,size:ut.getSize(),scale:ut.getScale(),rotation:ut.getRotation(),rotateWithView:ut.getRotateWithView()}))}const Ct=nt.getZIndex()||0;let vt=E[Ct];vt||(vt={},E[Ct]=vt,vt.Polygon=[],vt.Circle=[],vt.LineString=[],vt.Point=[]);const St=Y.getType();if("GeometryCollection"===St){const bt=Y.getGeometriesArrayRecursive();for(let Gt=0,Xt=bt.length;Gt<Xt;++Gt){const te=bt[Gt];vt[te.getType().replace("Multi","")].push(te,nt)}}else vt[St.replace("Multi","")].push(Y,nt)}}const R=Object.keys(E).map(Number).sort(k.j2);for(let N=0,z=R.length;N<z;++N){const st=E[R[N]];for(const A in st){const L=st[A];for(let w=0,x=L.length;w<x;w+=2){y.setStyle(L[w+1]);for(let C=0,D=u.length;C<D;++C)y.setTransform(u[C]),y.drawGeometry(L[w])}}}return g.getImageData(0,0,m.width,m.height)}function v(f,u,c){const r=[];if(c){const d=Math.floor(Math.round(f[0])*S),e=Math.floor(Math.round(f[1])*S),l=4*((0,G.uZ)(d,0,c.width-1)+(0,G.uZ)(e,0,c.height-1)*c.width),m=c.data[l+2]+256*(c.data[l+1]+256*c.data[l]),y=Math.floor(16777215/u.length);m&&m%y==0&&r.push(u[m/y-1])}return r}},1576:(jt,ht,a)=>{"use strict";a.d(ht,{Z:()=>b});var W=a(2431),F=a(4847),k=a(2224),G=a(3089);const b=class Z extends k.Z{constructor(P){super(),this.ready=!0,this.boundHandleImageChange_=this.handleImageChange_.bind(this),this.layer_=P,this.declutterExecutorGroup=null}getFeatures(P){return(0,G.O3)()}getData(P){return null}prepareFrame(P){return(0,G.O3)()}renderFrame(P,v){return(0,G.O3)()}loadedTileCallback(P,v,f){P[v]||(P[v]={}),P[v][f.tileCoord.toString()]=f}createLoadedTileFinder(P,v,f){return(u,c)=>{const r=this.loadedTileCallback.bind(this,f,u);return P.forEachLoadedTile(v,u,c,r)}}forEachFeatureAtCoordinate(P,v,f,u,c){}getLayer(){return this.layer_}handleFontsChanged(){}handleImageChange_(P){const v=P.target;(v.getState()===F.Z.LOADED||v.getState()===F.Z.ERROR)&&this.renderIfReadyAndVisible()}loadImage(P){let v=P.getState();return v!=F.Z.LOADED&&v!=F.Z.ERROR&&P.addEventListener(W.Z.CHANGE,this.boundHandleImageChange_),v==F.Z.IDLE&&(P.load(),v=P.getState()),v==F.Z.LOADED}renderIfReadyAndVisible(){const P=this.getLayer();P&&P.getVisible()&&"ready"===P.getSourceState()&&P.changed()}disposeInternal(){delete this.layer_,super.disposeInternal()}}},4696:(jt,ht,a)=>{"use strict";a.d(ht,{Z:()=>P});var W=a(7864),F=a(4847),k=a(3701),G=a(6412),Z=a(1316),b=a(7021);const P=class S extends W.Z{constructor(f){super(f),this.image_=null}getImage(){return this.image_?this.image_.getImage():null}prepareFrame(f){const u=f.layerStatesArray[f.layerIndex],c=f.pixelRatio,r=f.viewState,d=r.resolution,e=this.getLayer().getSource(),l=f.viewHints;let _=f.extent;if(void 0!==u.extent&&(_=(0,Z.Ed)(_,(0,b.dY)(u.extent,r.projection))),!l[k.Z.ANIMATING]&&!l[k.Z.INTERACTING]&&!(0,Z.xb)(_))if(e){const g=e.getImage(_,d,c,r.projection);g&&(this.loadImage(g)?this.image_=g:g.getState()===F.Z.EMPTY&&(this.image_=null))}else this.image_=null;return!!this.image_}getData(f){const u=this.frameState;if(!u)return null;const c=this.getLayer(),r=(0,G.nn)(u.pixelToCoordinateTransform,f.slice()),d=c.getExtent();if(d&&!(0,Z.b8)(d,r))return null;const e=this.image_.getExtent(),l=this.getImage(),_=(0,Z.dz)(e),n=Math.floor(l.width*((r[0]-e[0])/_));if(n<0||n>=l.width)return null;const g=(0,Z.Cr)(e),m=Math.floor(l.height*((e[3]-r[1])/g));return m<0||m>=l.height?null:this.getImageData(l,n,m)}renderFrame(f,u){const c=this.image_,r=c.getExtent(),d=c.getResolution(),e=c.getPixelRatio(),l=f.layerStatesArray[f.layerIndex],_=f.pixelRatio,n=f.viewState,g=n.center,y=_*d/(n.resolution*e),I=f.extent,O=n.resolution,E=n.rotation,R=Math.round((0,Z.dz)(I)/O*_),N=Math.round((0,Z.Cr)(I)/O*_);(0,G.qC)(this.pixelTransform,f.size[0]/2,f.size[1]/2,1/_,1/_,E,-R/2,-N/2),(0,G.nb)(this.inversePixelTransform,this.pixelTransform);const z=(0,G.BB)(this.pixelTransform);this.useContainer(u,z,this.getBackground(f));const st=this.context,A=st.canvas;A.width!=R||A.height!=N?(A.width=R,A.height=N):this.containerReused||st.clearRect(0,0,R,N);let L=!1,w=!0;if(l.extent){const nt=(0,b.dY)(l.extent,n.projection);w=(0,Z.kK)(nt,f.extent),L=w&&!(0,Z.r4)(nt,f.extent),L&&this.clipUnrotated(st,f,nt)}const x=this.getImage(),C=(0,G.qC)(this.tempTransform,R/2,N/2,y,y,0,e*(r[0]-g[0])/d,e*(g[1]-r[3])/d);this.renderedResolution=d*_/e;const D=x.width*C[0],Y=x.height*C[3];if(this.getLayer().getSource().getInterpolate()||(st.imageSmoothingEnabled=!1),this.preRender(st,f),w&&D>=.5&&Y>=.5){const nt=C[4],V=C[5],at=l.opacity;let ut;1!==at&&(ut=st.globalAlpha,st.globalAlpha=at),st.drawImage(x,0,0,+x.width,+x.height,nt,V,D,Y),1!==at&&(st.globalAlpha=ut)}return this.postRender(st,f),L&&st.restore(),st.imageSmoothingEnabled=!0,z!==A.style.transform&&(A.style.transform=z),this.container}}},7864:(jt,ht,a)=>{"use strict";a.d(ht,{Z:()=>r,r:()=>v});var W=a(1576),F=a(891),k=a(8934),G=a(6412),Z=a(9818),b=a(4211),S=a(9363),P=a(1316);const v=[];let f=null;const r=class c extends W.Z{constructor(e){super(e),this.container=null,this.tempTransform=(0,G.Ue)(),this.pixelTransform=(0,G.Ue)(),this.inversePixelTransform=(0,G.Ue)(),this.context=null,this.containerReused=!1,this.pixelContext_=null,this.frameState=null}getImageData(e,l,_){let n;f||function u(){f=(0,b.E4)(1,1,void 0,{willReadFrequently:!0})}(),f.clearRect(0,0,1,1);try{f.drawImage(e,l,_,1,1,0,0,1,1),n=f.getImageData(0,0,1,1).data}catch{return f=null,null}return n}getBackground(e){let _=this.getLayer().getBackground();return"function"==typeof _&&(_=_(e.viewState.resolution)),_||void 0}useContainer(e,l,_){const n=this.getLayer().getClassName();let g,m;if(e&&e.className===n&&(!_||e&&e.style.backgroundColor&&(0,S.fS)((0,Z._2)(e.style.backgroundColor),(0,Z._2)(_)))){const y=e.firstElementChild;y instanceof HTMLCanvasElement&&(m=y.getContext("2d"))}if(m&&m.canvas.style.transform===l?(this.container=e,this.context=m,this.containerReused=!0):this.containerReused?(this.container=null,this.context=null,this.containerReused=!1):this.container&&(this.container.style.backgroundColor=null),!this.container){g=document.createElement("div"),g.className=n;let y=g.style;y.position="absolute",y.width="100%",y.height="100%",m=(0,b.E4)();const I=m.canvas;g.appendChild(I),y=I.style,y.position="absolute",y.left="0",y.transformOrigin="top left",this.container=g,this.context=m}!this.containerReused&&_&&!this.container.style.backgroundColor&&(this.container.style.backgroundColor=_)}clipUnrotated(e,l,_){const n=(0,P.rL)(_),g=(0,P.Xv)(_),m=(0,P.w$)(_),y=(0,P.hC)(_);(0,G.nn)(l.coordinateToPixelTransform,n),(0,G.nn)(l.coordinateToPixelTransform,g),(0,G.nn)(l.coordinateToPixelTransform,m),(0,G.nn)(l.coordinateToPixelTransform,y);const I=this.inversePixelTransform;(0,G.nn)(I,n),(0,G.nn)(I,g),(0,G.nn)(I,m),(0,G.nn)(I,y),e.save(),e.beginPath(),e.moveTo(Math.round(n[0]),Math.round(n[1])),e.lineTo(Math.round(g[0]),Math.round(g[1])),e.lineTo(Math.round(m[0]),Math.round(m[1])),e.lineTo(Math.round(y[0]),Math.round(y[1])),e.clip()}dispatchRenderEvent_(e,l,_){const n=this.getLayer();if(n.hasListener(e)){const g=new F.Z(e,this.inversePixelTransform,_,l);n.dispatchEvent(g)}}preRender(e,l){this.frameState=l,this.dispatchRenderEvent_(k.Z.PRERENDER,e,l)}postRender(e,l){this.dispatchRenderEvent_(k.Z.POSTRENDER,e,l)}getRenderTransform(e,l,_,n,g,m,y){const E=n/l;return(0,G.qC)(this.tempTransform,g/2,m/2,E,-E,-_,-e[0]+y,-e[1])}disposeInternal(){delete this.frameState,super.disposeInternal()}}},3083:(jt,ht,a)=>{"use strict";a.d(ht,{Z:()=>r});var W=a(7864),F=a(3968),k=a(8857),G=a(6025),Z=a(5399),b=a(6412),S=a(9363),P=a(1316),v=a(7021),f=a(3089),u=a(7298);const r=class c extends W.Z{constructor(e){super(e),this.extentChanged=!0,this.renderedExtent_=null,this.renderedProjection=null,this.renderedTiles=[],this.newTiles_=!1,this.tmpExtent=(0,P.lJ)(),this.tmpTileRange_=new G.Z(0,0,0,0)}isDrawableTile(e){const l=this.getLayer(),_=e.getState(),n=l.getUseInterimTilesOnError();return _==Z.Z.LOADED||_==Z.Z.EMPTY||_==Z.Z.ERROR&&!n}getTile(e,l,_,n){const g=n.pixelRatio,m=n.viewState.projection,y=this.getLayer();let O=y.getSource().getTile(e,l,_,g,m);return O.getState()==Z.Z.ERROR&&y.getUseInterimTilesOnError()&&y.getPreload()>0&&(this.newTiles_=!0),this.isDrawableTile(O)||(O=O.getInterimTile()),O}getData(e){const l=this.frameState;if(!l)return null;const _=this.getLayer(),n=(0,b.nn)(l.pixelToCoordinateTransform,e.slice()),g=_.getExtent();if(g&&!(0,P.b8)(g,n))return null;const m=l.pixelRatio,y=l.viewState.projection,I=l.viewState,O=_.getRenderSource(),E=O.getTileGridForProjection(I.projection),R=O.getTilePixelRatio(l.pixelRatio);for(let N=E.getZForResolution(I.resolution);N>=E.getMinZoom();--N){const z=E.getTileCoordForCoordAndZ(n,N),st=O.getTile(N,z[1],z[2],m,y);if(!(st instanceof F.Z||st instanceof k.Z)||st instanceof k.Z&&st.getState()===Z.Z.EMPTY)return null;if(st.getState()!==Z.Z.LOADED)continue;const A=E.getOrigin(N),L=(0,u.Pq)(E.getTileSize(N)),w=E.getResolution(N),x=Math.floor(R*((n[0]-A[0])/w-z[1]*L[0])),C=Math.floor(R*((A[1]-n[1])/w-z[2]*L[1])),D=Math.round(R*O.getGutterForProjection(I.projection));return this.getImageData(st.getImage(),x+D,C+D)}return null}loadedTileCallback(e,l,_){return!!this.isDrawableTile(_)&&super.loadedTileCallback(e,l,_)}prepareFrame(e){return!!this.getLayer().getSource()}renderFrame(e,l){const _=e.layerStatesArray[e.layerIndex],n=e.viewState,g=n.projection,m=n.resolution,y=n.center,I=n.rotation,O=e.pixelRatio,E=this.getLayer(),R=E.getSource(),N=R.getRevision(),z=R.getTileGridForProjection(g),st=z.getZForResolution(m,R.zDirection),A=z.getResolution(st);let L=e.extent;const w=e.viewState.resolution,x=R.getTilePixelRatio(O),C=Math.round((0,P.dz)(L)/w*O),D=Math.round((0,P.Cr)(L)/w*O),Y=_.extent&&(0,v.dY)(_.extent,g);Y&&(L=(0,P.Ed)(L,(0,v.dY)(_.extent,g)));const nt=A*C/2/x,V=A*D/2/x,at=[y[0]-nt,y[1]-V,y[0]+nt,y[1]+V],ut=z.getTileRangeForExtentAndZ(L,st),Ct={};Ct[st]={};const vt=this.createLoadedTileFinder(R,g,Ct),St=this.tmpExtent,bt=this.tmpTileRange_;this.newTiles_=!1;const Gt=I?(0,P.dY)(n.center,w,I,e.size):void 0;for(let Rt=ut.minX;Rt<=ut.maxX;++Rt)for(let Ft=ut.minY;Ft<=ut.maxY;++Ft){if(I&&!z.tileCoordIntersectsViewport([st,Rt,Ft],Gt))continue;const Yt=this.getTile(st,Rt,Ft,e);if(this.isDrawableTile(Yt)){const ft=(0,f.sq)(this);if(Yt.getState()==Z.Z.LOADED){Ct[st][Yt.tileCoord.toString()]=Yt;let Pt=Yt.inTransition(ft);Pt&&1!==_.opacity&&(Yt.endTransition(ft),Pt=!1),!this.newTiles_&&(Pt||!this.renderedTiles.includes(Yt))&&(this.newTiles_=!0)}if(1===Yt.getAlpha(ft,e.time))continue}const ge=z.getTileCoordChildTileRange(Yt.tileCoord,bt,St);let $t=!1;ge&&($t=vt(st+1,ge)),$t||z.forEachTileCoordParentTileRange(Yt.tileCoord,vt,bt,St)}const Xt=A/m*O/x;(0,b.qC)(this.pixelTransform,e.size[0]/2,e.size[1]/2,1/O,1/O,I,-C/2,-D/2);const te=(0,b.BB)(this.pixelTransform);this.useContainer(l,te,this.getBackground(e));const Vt=this.context,_e=Vt.canvas;(0,b.nb)(this.inversePixelTransform,this.pixelTransform),(0,b.qC)(this.tempTransform,C/2,D/2,Xt,Xt,0,-C/2,-D/2),_e.width!=C||_e.height!=D?(_e.width=C,_e.height=D):this.containerReused||Vt.clearRect(0,0,C,D),Y&&this.clipUnrotated(Vt,e,Y),R.getInterpolate()||(Vt.imageSmoothingEnabled=!1),this.preRender(Vt,e),this.renderedTiles.length=0;let de,Re,gt,he=Object.keys(Ct).map(Number);he.sort(S.j2),1!==_.opacity||this.containerReused&&!R.getOpaque(e.viewState.projection)?(de=[],Re=[]):he=he.reverse();for(let Rt=he.length-1;Rt>=0;--Rt){const Ft=he[Rt],Yt=R.getTilePixelSize(Ft,O,g),$t=z.getResolution(Ft)/A,ft=Yt[0]*$t*Xt,Pt=Yt[1]*$t*Xt,Nt=z.getTileCoordForCoordAndZ((0,P.rL)(at),Ft),zt=z.getTileCoordExtent(Nt),Bt=(0,b.nn)(this.tempTransform,[x*(zt[0]-at[0])/A,x*(at[3]-zt[3])/A]),ue=x*R.getGutterForProjection(g),ve=Ct[Ft];for(const Ee in ve){const Mt=ve[Ee],rt=Mt.tileCoord,q=Nt[1]-rt[1],M=Math.round(Bt[0]-(q-1)*ft),K=Nt[2]-rt[2],et=Math.round(Bt[1]-(K-1)*Pt),it=Math.round(Bt[0]-q*ft),yt=Math.round(Bt[1]-K*Pt),Et=M-it,At=et-yt,Wt=st===Ft,Ht=Wt&&1!==Mt.getAlpha((0,f.sq)(this),e.time);let se=!1;if(!Ht)if(de){gt=[it,yt,it+Et,yt,it+Et,yt+At,it,yt+At];for(let Te=0,ce=de.length;Te<ce;++Te)if(st!==Ft&&Ft<Re[Te]){const ee=de[Te];(0,P.kK)([it,yt,it+Et,yt+At],[ee[0],ee[3],ee[4],ee[7]])&&(se||(Vt.save(),se=!0),Vt.beginPath(),Vt.moveTo(gt[0],gt[1]),Vt.lineTo(gt[2],gt[3]),Vt.lineTo(gt[4],gt[5]),Vt.lineTo(gt[6],gt[7]),Vt.moveTo(ee[6],ee[7]),Vt.lineTo(ee[4],ee[5]),Vt.lineTo(ee[2],ee[3]),Vt.lineTo(ee[0],ee[1]),Vt.clip())}de.push(gt),Re.push(Ft)}else Vt.clearRect(it,yt,Et,At);this.drawTileImage(Mt,e,it,yt,Et,At,ue,Wt),de&&!Ht?(se&&Vt.restore(),this.renderedTiles.unshift(Mt)):this.renderedTiles.push(Mt),this.updateUsedTiles(e.usedTiles,R,Mt)}}return this.renderedRevision=N,this.renderedResolution=A,this.extentChanged=!this.renderedExtent_||!(0,P.fS)(this.renderedExtent_,at),this.renderedExtent_=at,this.renderedPixelRatio=O,this.renderedProjection=g,this.manageTilePyramid(e,R,z,O,g,L,st,E.getPreload()),this.scheduleExpireCache(e,R),this.postRender(Vt,e),_.extent&&Vt.restore(),Vt.imageSmoothingEnabled=!0,te!==_e.style.transform&&(_e.style.transform=te),this.container}drawTileImage(e,l,_,n,g,m,y,I){const O=this.getTileImage(e);if(!O)return;const E=(0,f.sq)(this),R=l.layerStatesArray[l.layerIndex],N=R.opacity*(I?e.getAlpha(E,l.time):1),z=N!==this.context.globalAlpha;z&&(this.context.save(),this.context.globalAlpha=N),this.context.drawImage(O,y,y,O.width-2*y,O.height-2*y,_,n,g,m),z&&this.context.restore(),N!==R.opacity?l.animate=!0:I&&e.endTransition(E)}getImage(){const e=this.context;return e?e.canvas:null}getTileImage(e){return e.getImage()}scheduleExpireCache(e,l){if(l.canExpireCache()){const _=function(n,g,m){const y=(0,f.sq)(n);y in m.usedTiles&&n.expireCache(m.viewState.projection,m.usedTiles[y])}.bind(null,l);e.postRenderFunctions.push(_)}}updateUsedTiles(e,l,_){const n=(0,f.sq)(l);n in e||(e[n]={}),e[n][_.getKey()]=!0}manageTilePyramid(e,l,_,n,g,m,y,I,O){const E=(0,f.sq)(l);E in e.wantedTiles||(e.wantedTiles[E]={});const R=e.wantedTiles[E],N=e.tileQueue,z=_.getMinZoom(),st=e.viewState.rotation,A=st?(0,P.dY)(e.viewState.center,e.viewState.resolution,st,e.size):void 0;let w,x,C,D,Y,nt,L=0;for(nt=z;nt<=y;++nt)for(x=_.getTileRangeForExtentAndZ(m,nt,x),C=_.getResolution(nt),D=x.minX;D<=x.maxX;++D)for(Y=x.minY;Y<=x.maxY;++Y)st&&!_.tileCoordIntersectsViewport([nt,D,Y],A)||(y-nt<=I?(++L,w=l.getTile(nt,D,Y,n,g),w.getState()==Z.Z.IDLE&&(R[w.getKey()]=!0,N.isKeyQueued(w.getKey())||N.enqueue([w,E,_.getTileCoordCenter(w.tileCoord),C])),void 0!==O&&O(w)):l.useTile(nt,D,Y,g));l.updateCacheSize(L,g)}}},5564:(jt,ht,a)=>{"use strict";a.d(ht,{Z:()=>l});var W=a(223),F=a(7864),k=a(341),G=a(8934),Z=a(3701),b=a(1693),S=a(6412),P=a(1316),v=a(4211),f=a(6259),u=a(9363),c=a(7021),r=a(3089),d=a(1242);const l=class e extends F.Z{constructor(n){super(n),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.hitDetectionImageData_=null,this.renderedFeatures_=null,this.renderedRevision_=-1,this.renderedResolution_=NaN,this.renderedExtent_=(0,P.lJ)(),this.wrappedRenderedExtent_=(0,P.lJ)(),this.renderedCenter_=null,this.renderedProjection_=null,this.renderedRenderOrder_=null,this.replayGroup_=null,this.replayGroupChanged=!0,this.declutterExecutorGroup=null,this.clipping=!0,this.compositionContext_=null,this.opacity_=1}renderWorlds(n,g,m){const y=g.extent,I=g.viewState,O=I.center,E=I.resolution,R=I.projection,N=I.rotation,z=R.getExtent(),st=this.getLayer().getSource(),A=g.pixelRatio,L=g.viewHints,w=!(L[Z.Z.ANIMATING]||L[Z.Z.INTERACTING]),x=this.compositionContext_,C=Math.round(g.size[0]*A),D=Math.round(g.size[1]*A),Y=st.getWrapX()&&R.canWrapX(),nt=Y?(0,P.dz)(z):null,V=Y?Math.ceil((y[2]-z[2])/nt)+1:1;let at=Y?Math.floor((y[0]-z[0])/nt):0;do{const ut=this.getRenderTransform(O,E,N,A,C,D,at*nt);n.execute(x,1,ut,N,w,void 0,m)}while(++at<V)}setupCompositionContext_(){if(1!==this.opacity_){const n=(0,v.E4)(this.context.canvas.width,this.context.canvas.height,F.r);this.compositionContext_=n}else this.compositionContext_=this.context}releaseCompositionContext_(){if(1!==this.opacity_){const n=this.context.globalAlpha;this.context.globalAlpha=this.opacity_,this.context.drawImage(this.compositionContext_.canvas,0,0),this.context.globalAlpha=n,(0,v.jy)(this.compositionContext_),F.r.push(this.compositionContext_.canvas),this.compositionContext_=null}}renderDeclutter(n){this.declutterExecutorGroup&&(this.setupCompositionContext_(),this.renderWorlds(this.declutterExecutorGroup,n,n.declutterTree),this.releaseCompositionContext_())}renderFrame(n,g){const m=n.pixelRatio,y=n.layerStatesArray[n.layerIndex];(0,S.n3)(this.pixelTransform,1/m,1/m),(0,S.nb)(this.inversePixelTransform,this.pixelTransform);const I=(0,S.BB)(this.pixelTransform);this.useContainer(g,I,this.getBackground(n));const O=this.context,E=O.canvas,R=this.replayGroup_,N=this.declutterExecutorGroup;let z=R&&!R.isEmpty()||N&&!N.isEmpty();if(!z&&!this.getLayer().hasListener(G.Z.PRERENDER)&&!this.getLayer().hasListener(G.Z.POSTRENDER))return null;const st=Math.round(n.size[0]*m),A=Math.round(n.size[1]*m);E.width!=st||E.height!=A?(E.width=st,E.height=A,E.style.transform!==I&&(E.style.transform=I)):this.containerReused||O.clearRect(0,0,st,A),this.preRender(O,n);const L=n.viewState,w=L.projection;this.opacity_=y.opacity,this.setupCompositionContext_();let x=!1;if(z&&y.extent&&this.clipping){const C=(0,c.dY)(y.extent,w);z=(0,P.kK)(C,n.extent),x=z&&!(0,P.r4)(C,n.extent),x&&this.clipUnrotated(this.compositionContext_,n,C)}return z&&this.renderWorlds(R,n),x&&this.compositionContext_.restore(),this.releaseCompositionContext_(),this.postRender(O,n),this.renderedRotation_!==L.rotation&&(this.renderedRotation_=L.rotation,this.hitDetectionImageData_=null),this.container}getFeatures(n){return new Promise(g=>{if(!this.hitDetectionImageData_&&!this.animatingOrInteracting_){const m=[this.context.canvas.width,this.context.canvas.height];(0,S.nn)(this.pixelTransform,m);const y=this.renderedCenter_,I=this.renderedResolution_,O=this.renderedRotation_,E=this.renderedProjection_,R=this.wrappedRenderedExtent_,N=this.getLayer(),z=[],st=m[0]*b.UN,A=m[1]*b.UN;z.push(this.getRenderTransform(y,I,O,b.UN,st,A,0).slice());const L=N.getSource(),w=E.getExtent();if(L.getWrapX()&&E.canWrapX()&&!(0,P.r4)(w,R)){let x=R[0];const C=(0,P.dz)(w);let Y,D=0;for(;x<w[0];)--D,Y=C*D,z.push(this.getRenderTransform(y,I,O,b.UN,st,A,Y).slice()),x+=C;for(D=0,x=R[2];x>w[2];)++D,Y=C*D,z.push(this.getRenderTransform(y,I,O,b.UN,st,A,Y).slice()),x-=C}this.hitDetectionImageData_=(0,b.TU)(m,z,this.renderedFeatures_,N.getStyleFunction(),R,I,O)}g((0,b.ix)(n,this.renderedFeatures_,this.hitDetectionImageData_))})}forEachFeatureAtCoordinate(n,g,m,y,I){if(!this.replayGroup_)return;const O=g.viewState.resolution,E=g.viewState.rotation,R=this.getLayer(),N={},z=function(L,w,x){const C=(0,r.sq)(L),D=N[C];if(D){if(!0!==D&&x<D.distanceSq){if(0===x)return N[C]=!0,I.splice(I.lastIndexOf(D),1),y(L,R,w);D.geometry=w,D.distanceSq=x}}else{if(0===x)return N[C]=!0,y(L,R,w);I.push(N[C]={feature:L,layer:R,geometry:w,distanceSq:x,callback:y})}};let st;const A=[this.replayGroup_];return this.declutterExecutorGroup&&A.push(this.declutterExecutorGroup),A.some(L=>st=L.forEachFeatureAtCoordinate(n,O,E,m,z,L===this.declutterExecutorGroup&&g.declutterTree?g.declutterTree.all().map(w=>w.value):null)),st}handleFontsChanged(){const n=this.getLayer();n.getVisible()&&this.replayGroup_&&n.changed()}handleStyleImageChange_(n){this.renderIfReadyAndVisible()}prepareFrame(n){const g=this.getLayer(),m=g.getSource();if(!m)return!1;const y=n.viewHints[Z.Z.ANIMATING],I=n.viewHints[Z.Z.INTERACTING],O=g.getUpdateWhileAnimating(),E=g.getUpdateWhileInteracting();if(this.ready&&!O&&y||!E&&I)return this.animatingOrInteracting_=!0,!0;this.animatingOrInteracting_=!1;const R=n.extent,N=n.viewState,z=N.projection,st=N.resolution,A=n.pixelRatio,L=g.getRevision(),w=g.getRenderBuffer();let x=g.getRenderOrder();void 0===x&&(x=f.eR);const C=N.center.slice(),D=(0,P.f3)(R,w*st),Y=D.slice(),nt=[D.slice()],V=z.getExtent();if(m.getWrapX()&&z.canWrapX()&&!(0,P.r4)(V,n.extent)){const he=(0,P.dz)(V),de=Math.max((0,P.dz)(D)/2,he);D[0]=V[0]-de,D[2]=V[2]+de,(0,d.Cf)(C,z);const Re=(0,P.Cf)(nt[0],z);Re[0]<V[0]&&Re[2]<V[2]?nt.push([Re[0]+he,Re[1],Re[2]+he,Re[3]]):Re[0]>V[0]&&Re[2]>V[2]&&nt.push([Re[0]-he,Re[1],Re[2]-he,Re[3]])}if(this.ready&&this.renderedResolution_==st&&this.renderedRevision_==L&&this.renderedRenderOrder_==x&&(0,P.r4)(this.wrappedRenderedExtent_,D))return(0,u.fS)(this.renderedExtent_,Y)||(this.hitDetectionImageData_=null,this.renderedExtent_=Y),this.renderedCenter_=C,this.replayGroupChanged=!1,!0;this.replayGroup_=null;const at=new W.Z((0,f.Qz)(st,A),D,st,A);let ut;this.getLayer().getDeclutter()&&(ut=new W.Z((0,f.Qz)(st,A),D,st,A));const Ct=(0,c.Cs)();let vt;if(Ct){for(let he=0,de=nt.length;he<de;++he){const gt=(0,c.Fj)(nt[he],z);m.loadFeatures(gt,(0,c.on)(st,z),Ct)}vt=(0,c.WO)(Ct,z)}else for(let he=0,de=nt.length;he<de;++he)m.loadFeatures(nt[he],st,z);const St=(0,f.se)(st,A);let bt=!0;const Gt=he=>{let de;const Re=he.getStyleFunction()||g.getStyleFunction();if(Re&&(de=Re(he,st)),de){const gt=this.renderFeature(he,St,de,at,vt,ut);bt=bt&&!gt}},Xt=(0,c.Fj)(D,z),te=m.getFeaturesInExtent(Xt);x&&te.sort(x);for(let he=0,de=te.length;he<de;++he)Gt(te[he]);this.renderedFeatures_=te,this.ready=bt;const Vt=at.finish(),_e=new k.Z(D,st,A,m.getOverlaps(),Vt,g.getRenderBuffer());return ut&&(this.declutterExecutorGroup=new k.Z(D,st,A,m.getOverlaps(),ut.finish(),g.getRenderBuffer())),this.renderedResolution_=st,this.renderedRevision_=L,this.renderedRenderOrder_=x,this.renderedExtent_=Y,this.wrappedRenderedExtent_=D,this.renderedCenter_=C,this.renderedProjection_=z,this.replayGroup_=_e,this.hitDetectionImageData_=null,this.replayGroupChanged=!0,!0}renderFeature(n,g,m,y,I,O){if(!m)return!1;let E=!1;if(Array.isArray(m))for(let R=0,N=m.length;R<N;++R)E=(0,f.Pn)(y,n,m[R],g,this.boundHandleStyleImageChange_,I,O)||E;else E=(0,f.Pn)(y,n,m,g,this.boundHandleStyleImageChange_,I,O);return E}}},6259:(jt,ht,a)=>{"use strict";a.d(ht,{Pn:()=>v,Qz:()=>S,eR:()=>Z,se:()=>b});var W=a(4847),F=a(3089);const k=.5,G={Point:function l(g,m,y,I,O){const E=y.getImage(),R=y.getText();let N;if(E){if(E.getImageState()!=W.Z.LOADED)return;let z=g;if(O){const A=E.getDeclutterMode();if("none"!==A)if(z=O,"obstacle"===A){const L=g.getBuilder(y.getZIndex(),"Image");L.setImageStyle(E,N),L.drawPoint(m,I)}else R&&R.getText()&&(N={})}const st=z.getBuilder(y.getZIndex(),"Image");st.setImageStyle(E,N),st.drawPoint(m,I)}if(R&&R.getText()){let z=g;O&&(z=O);const st=z.getBuilder(y.getZIndex(),"Text");st.setTextStyle(R,N),st.drawText(m,I)}},LineString:function r(g,m,y,I,O){const E=y.getStroke();if(E){const N=g.getBuilder(y.getZIndex(),"LineString");N.setFillStrokeStyle(null,E),N.drawLineString(m,I)}const R=y.getText();if(R&&R.getText()){const N=(O||g).getBuilder(y.getZIndex(),"Text");N.setTextStyle(R),N.drawText(m,I)}},Polygon:function n(g,m,y,I,O){const E=y.getFill(),R=y.getStroke();if(E||R){const z=g.getBuilder(y.getZIndex(),"Polygon");z.setFillStrokeStyle(E,R),z.drawPolygon(m,I)}const N=y.getText();if(N&&N.getText()){const z=(O||g).getBuilder(y.getZIndex(),"Text");z.setTextStyle(N),z.drawText(m,I)}},MultiPoint:function _(g,m,y,I,O){const E=y.getImage(),R=y.getText();let N;if(E){if(E.getImageState()!=W.Z.LOADED)return;let z=g;if(O){const A=E.getDeclutterMode();if("none"!==A)if(z=O,"obstacle"===A){const L=g.getBuilder(y.getZIndex(),"Image");L.setImageStyle(E,N),L.drawMultiPoint(m,I)}else R&&R.getText()&&(N={})}const st=z.getBuilder(y.getZIndex(),"Image");st.setImageStyle(E,N),st.drawMultiPoint(m,I)}if(R&&R.getText()){let z=g;O&&(z=O);const st=z.getBuilder(y.getZIndex(),"Text");st.setTextStyle(R,N),st.drawText(m,I)}},MultiLineString:function d(g,m,y,I,O){const E=y.getStroke();if(E){const N=g.getBuilder(y.getZIndex(),"LineString");N.setFillStrokeStyle(null,E),N.drawMultiLineString(m,I)}const R=y.getText();if(R&&R.getText()){const N=(O||g).getBuilder(y.getZIndex(),"Text");N.setTextStyle(R),N.drawText(m,I)}},MultiPolygon:function e(g,m,y,I,O){const E=y.getFill(),R=y.getStroke();if(R||E){const z=g.getBuilder(y.getZIndex(),"Polygon");z.setFillStrokeStyle(E,R),z.drawMultiPolygon(m,I)}const N=y.getText();if(N&&N.getText()){const z=(O||g).getBuilder(y.getZIndex(),"Text");z.setTextStyle(N),z.drawText(m,I)}},GeometryCollection:function c(g,m,y,I,O){const E=m.getGeometriesArray();let R,N;for(R=0,N=E.length;R<N;++R)(0,G[E[R].getType()])(g,E[R],y,I,O)},Circle:function P(g,m,y,I,O){const E=y.getFill(),R=y.getStroke();if(E||R){const z=g.getBuilder(y.getZIndex(),"Circle");z.setFillStrokeStyle(E,R),z.drawCircle(m,I)}const N=y.getText();if(N&&N.getText()){const z=(O||g).getBuilder(y.getZIndex(),"Text");z.setTextStyle(N),z.drawText(m,I)}}};function Z(g,m){return parseInt((0,F.sq)(g),10)-parseInt((0,F.sq)(m),10)}function b(g,m){const y=S(g,m);return y*y}function S(g,m){return k*g/m}function v(g,m,y,I,O,E,R){let N=!1;const z=y.getImage();if(z){const st=z.getImageState();st==W.Z.LOADED||st==W.Z.ERROR?z.unlistenImageChange(O):(st==W.Z.IDLE&&z.load(),z.listenImageChange(O),N=!0)}return function f(g,m,y,I,O,E){const R=y.getGeometryFunction()(m);if(!R)return;const N=R.simplifyTransformed(I,O);y.getRenderer()?u(g,N,y,m):(0,G[N.getType()])(g,N,y,m,E)}(g,m,y,I,E,R),N}function u(g,m,y,I){if("GeometryCollection"!=m.getType())g.getBuilder(y.getZIndex(),"Default").drawCustom(m,I,y.getRenderer(),y.getHitDetectionRenderer());else{const E=m.getGeometries();for(let R=0,N=E.length;R<N;++R)u(g,E[R],y,I)}}},6230:(jt,ht,a)=>{"use strict";a.d(ht,{Co:()=>u,aA:()=>f,rX:()=>b,sY:()=>c});var W=a(1316),F=a(4211),k=a(7021),G=a(3026);let Z;const b=[];function S(r,d,e,l,_){r.beginPath(),r.moveTo(0,0),r.lineTo(d,e),r.lineTo(l,_),r.closePath(),r.save(),r.clip(),r.fillRect(0,0,Math.max(d,l)+1,Math.max(e,_)),r.restore()}function P(r,d){return Math.abs(r[4*d]-210)>2||Math.abs(r[4*d+3]-191.25)>2}function f(r,d,e,l){const _=(0,k.vs)(e,d,r);let n=(0,k._Q)(d,l,e);const g=d.getMetersPerUnit();void 0!==g&&(n*=g);const m=r.getMetersPerUnit();void 0!==m&&(n/=m);const y=r.getExtent();if(!y||(0,W.b8)(y,_)){const I=(0,k._Q)(r,n,_)/n;isFinite(I)&&I>0&&(n/=I)}return n}function u(r,d,e,l){const _=(0,W.qg)(e);let n=f(r,d,_,l);return(!isFinite(n)||n<=0)&&(0,W.H6)(e,function(g){return n=f(r,d,g,l),isFinite(n)&&n>0}),n}function c(r,d,e,l,_,n,g,m,y,I,O,E){const R=(0,F.E4)(Math.round(e*r),Math.round(e*d),b);if(E||(R.imageSmoothingEnabled=!1),0===y.length)return R.canvas;function N(C){return Math.round(C*e)/e}R.scale(e,e),R.globalCompositeOperation="lighter";const z=(0,W.lJ)();y.forEach(function(C,D,Y){(0,W.l7)(z,C.extent)});const st=(0,W.dz)(z),A=(0,W.Cr)(z),L=(0,F.E4)(Math.round(e*st/l),Math.round(e*A/l),b);E||(L.imageSmoothingEnabled=!1);const w=e/l;y.forEach(function(C,D,Y){const nt=C.extent[0]-z[0],V=-(C.extent[3]-z[3]),at=(0,W.dz)(C.extent),ut=(0,W.Cr)(C.extent);C.image.width>0&&C.image.height>0&&L.drawImage(C.image,I,I,C.image.width-2*I,C.image.height-2*I,nt*w,V*w,at*w,ut*w)});const x=(0,W.rL)(g);return m.getTriangles().forEach(function(C,D,Y){const nt=C.source,V=C.target;let at=nt[0][0],ut=nt[0][1],Ct=nt[1][0],vt=nt[1][1],St=nt[2][0],bt=nt[2][1];const Gt=N((V[0][0]-x[0])/n),Xt=N(-(V[0][1]-x[1])/n),te=N((V[1][0]-x[0])/n),Vt=N(-(V[1][1]-x[1])/n),_e=N((V[2][0]-x[0])/n),he=N(-(V[2][1]-x[1])/n),de=at,Re=ut;at=0,ut=0,Ct-=de,vt-=Re,St-=de,bt-=Re;const Rt=(0,G.SV)([[Ct,vt,0,0,te-Gt],[St,bt,0,0,_e-Gt],[0,0,Ct,vt,Vt-Xt],[0,0,St,bt,he-Xt]]);if(Rt){if(R.save(),R.beginPath(),function v(){if(void 0===Z){const r=(0,F.E4)(6,6,b);r.globalCompositeOperation="lighter",r.fillStyle="rgba(210, 0, 0, 0.75)",S(r,4,5,4,0),S(r,4,5,0,5);const d=r.getImageData(0,0,3,3).data;Z=P(d,0)||P(d,4)||P(d,8),(0,F.jy)(r),b.push(r.canvas)}return Z}()||!E){R.moveTo(te,Vt);const Ft=4,Yt=Gt-te,ge=Xt-Vt;for(let $t=0;$t<Ft;$t++)R.lineTo(te+N(($t+1)*Yt/Ft),Vt+N($t*ge/(Ft-1))),$t!=Ft-1&&R.lineTo(te+N(($t+1)*Yt/Ft),Vt+N(($t+1)*ge/(Ft-1)));R.lineTo(_e,he)}else R.moveTo(te,Vt),R.lineTo(Gt,Xt),R.lineTo(_e,he);R.clip(),R.transform(Rt[0],Rt[2],Rt[1],Rt[3],Gt,Xt),R.translate(z[0]-de,z[3]-Re),R.scale(l/e,-l/e),R.drawImage(L.canvas,0,0),R.restore()}}),(0,F.jy)(L),b.push(L.canvas),O&&(R.save(),R.globalCompositeOperation="source-over",R.strokeStyle="black",R.lineWidth=1,m.getTriangles().forEach(function(C,D,Y){const nt=C.target,V=(nt[0][0]-x[0])/n,at=-(nt[0][1]-x[1])/n,ut=(nt[1][0]-x[0])/n,Ct=-(nt[1][1]-x[1])/n,vt=(nt[2][0]-x[0])/n,St=-(nt[2][1]-x[1])/n;R.beginPath(),R.moveTo(ut,Ct),R.lineTo(V,at),R.lineTo(vt,St),R.closePath(),R.stroke()}),R.restore()),R.canvas}},8857:(jt,ht,a)=>{"use strict";a.d(ht,{Z:()=>c});var W=a(6149),F=a(2431),k=a(6381),G=a(5399),Z=a(1909),b=a(6230),S=a(3026),P=a(1316),v=a(7847),f=a(4211);const c=class u extends k.Z{constructor(d,e,l,_,n,g,m,y,I,O,E,R){super(n,G.Z.IDLE,{interpolate:!!R}),this.renderEdges_=void 0!==E&&E,this.pixelRatio_=m,this.gutter_=y,this.canvas_=null,this.sourceTileGrid_=e,this.targetTileGrid_=_,this.wrappedTileCoord_=g||n,this.sourceTiles_=[],this.sourcesListenerKeys_=null,this.sourceZ_=0;const N=_.getTileCoordExtent(this.wrappedTileCoord_),z=this.targetTileGrid_.getExtent();let st=this.sourceTileGrid_.getExtent();const A=z?(0,P.Ed)(N,z):N;if(0===(0,P.bg)(A))return void(this.state=G.Z.EMPTY);const L=d.getExtent();L&&(st=st?(0,P.Ed)(st,L):L);const w=_.getResolution(this.wrappedTileCoord_[0]),x=(0,b.Co)(d,l,A,w);if(!isFinite(x)||x<=0)return void(this.state=G.Z.EMPTY);if(this.triangulation_=new Z.Z(d,l,A,st,x*(void 0!==O?O:W.m),w),0===this.triangulation_.getTriangles().length)return void(this.state=G.Z.EMPTY);this.sourceZ_=e.getZForResolution(x);let D=this.triangulation_.calculateSourceExtent();if(st&&(d.canWrapX()?(D[1]=(0,S.uZ)(D[1],st[1],st[3]),D[3]=(0,S.uZ)(D[3],st[1],st[3])):D=(0,P.Ed)(D,st)),(0,P.bg)(D)){const Y=e.getTileRangeForExtentAndZ(D,this.sourceZ_);for(let nt=Y.minX;nt<=Y.maxX;nt++)for(let V=Y.minY;V<=Y.maxY;V++){const at=I(this.sourceZ_,nt,V,m);at&&this.sourceTiles_.push(at)}0===this.sourceTiles_.length&&(this.state=G.Z.EMPTY)}else this.state=G.Z.EMPTY}getImage(){return this.canvas_}reproject_(){const d=[];if(this.sourceTiles_.forEach(e=>{e&&e.getState()==G.Z.LOADED&&d.push({extent:this.sourceTileGrid_.getTileCoordExtent(e.tileCoord),image:e.getImage()})}),this.sourceTiles_.length=0,0===d.length)this.state=G.Z.ERROR;else{const e=this.wrappedTileCoord_[0],l=this.targetTileGrid_.getTileSize(e),_="number"==typeof l?l:l[0],n="number"==typeof l?l:l[1],g=this.targetTileGrid_.getResolution(e),m=this.sourceTileGrid_.getResolution(this.sourceZ_),y=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=(0,b.sY)(_,n,this.pixelRatio_,m,this.sourceTileGrid_.getExtent(),g,y,this.triangulation_,d,this.gutter_,this.renderEdges_,this.interpolate),this.state=G.Z.LOADED}this.changed()}load(){if(this.state==G.Z.IDLE){this.state=G.Z.LOADING,this.changed();let d=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(e=>{const l=e.getState();if(l==G.Z.IDLE||l==G.Z.LOADING){d++;const _=(0,v.oL)(e,F.Z.CHANGE,function(n){const g=e.getState();(g==G.Z.LOADED||g==G.Z.ERROR||g==G.Z.EMPTY)&&((0,v.bN)(_),d--,0===d&&(this.unlistenSources_(),this.reproject_()))},this);this.sourcesListenerKeys_.push(_)}}),0===d?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach(function(e,l,_){e.getState()==G.Z.IDLE&&e.load()})}}unlistenSources_(){this.sourcesListenerKeys_.forEach(v.bN),this.sourcesListenerKeys_=null}release(){this.canvas_&&((0,f.jy)(this.canvas_.getContext("2d")),b.rX.push(this.canvas_),this.canvas_=null),super.release()}}},1909:(jt,ht,a)=>{"use strict";a.d(ht,{Z:()=>S});var W=a(1316),F=a(7021),k=a(3026);const S=class b{constructor(v,f,u,c,r,d){this.sourceProj_=v,this.targetProj_=f;let e={};const l=(0,F.Ck)(this.targetProj_,this.sourceProj_);this.transformInv_=function(N){const z=N[0]+"/"+N[1];return e[z]||(e[z]=l(N)),e[z]},this.maxSourceExtent_=c,this.errorThresholdSquared_=r*r,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!c&&!!this.sourceProj_.getExtent()&&(0,W.dz)(c)>=(0,W.dz)(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?(0,W.dz)(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?(0,W.dz)(this.targetProj_.getExtent()):null;const _=(0,W.rL)(u),n=(0,W.Xv)(u),g=(0,W.w$)(u),m=(0,W.hC)(u),y=this.transformInv_(_),I=this.transformInv_(n),O=this.transformInv_(g),E=this.transformInv_(m),R=10+(d?Math.max(0,Math.ceil(Math.log2((0,W.bg)(u)/(d*d*256*256)))):0);if(this.addQuad_(_,n,g,m,y,I,O,E,R),this.wrapsXInSource_){let N=1/0;this.triangles_.forEach(function(z,st,A){N=Math.min(N,z.source[0][0],z.source[1][0],z.source[2][0])}),this.triangles_.forEach(z=>{if(Math.max(z.source[0][0],z.source[1][0],z.source[2][0])-N>this.sourceWorldWidth_/2){const st=[[z.source[0][0],z.source[0][1]],[z.source[1][0],z.source[1][1]],[z.source[2][0],z.source[2][1]]];st[0][0]-N>this.sourceWorldWidth_/2&&(st[0][0]-=this.sourceWorldWidth_),st[1][0]-N>this.sourceWorldWidth_/2&&(st[1][0]-=this.sourceWorldWidth_),st[2][0]-N>this.sourceWorldWidth_/2&&(st[2][0]-=this.sourceWorldWidth_);const A=Math.min(st[0][0],st[1][0],st[2][0]);Math.max(st[0][0],st[1][0],st[2][0])-A<this.sourceWorldWidth_/2&&(z.source=st)}})}e={}}addTriangle_(v,f,u,c,r,d){this.triangles_.push({source:[c,r,d],target:[v,f,u]})}addQuad_(v,f,u,c,r,d,e,l,_){const n=(0,W.hI)([r,d,e,l]),g=this.sourceWorldWidth_?(0,W.dz)(n)/this.sourceWorldWidth_:null,m=this.sourceWorldWidth_,y=this.sourceProj_.canWrapX()&&g>.5&&g<1;let I=!1;if(_>0){if(this.targetProj_.isGlobal()&&this.targetWorldWidth_){const E=(0,W.hI)([v,f,u,c]);I=(0,W.dz)(E)/this.targetWorldWidth_>.25||I}!y&&this.sourceProj_.isGlobal()&&g&&(I=g>.25||I)}if(!I&&this.maxSourceExtent_&&isFinite(n[0])&&isFinite(n[1])&&isFinite(n[2])&&isFinite(n[3])&&!(0,W.kK)(n,this.maxSourceExtent_))return;let O=0;if(!(I||isFinite(r[0])&&isFinite(r[1])&&isFinite(d[0])&&isFinite(d[1])&&isFinite(e[0])&&isFinite(e[1])&&isFinite(l[0])&&isFinite(l[1])))if(_>0)I=!0;else if(O=(isFinite(r[0])&&isFinite(r[1])?0:8)+(isFinite(d[0])&&isFinite(d[1])?0:4)+(isFinite(e[0])&&isFinite(e[1])?0:2)+(isFinite(l[0])&&isFinite(l[1])?0:1),1!=O&&2!=O&&4!=O&&8!=O)return;if(_>0){if(!I){const R=this.transformInv_([(v[0]+u[0])/2,(v[1]+u[1])/2]);let N;N=y?((0,k.$W)(r[0],m)+(0,k.$W)(e[0],m))/2-(0,k.$W)(R[0],m):(r[0]+e[0])/2-R[0];const z=(r[1]+e[1])/2-R[1];I=N*N+z*z>this.errorThresholdSquared_}if(I){if(Math.abs(v[0]-u[0])<=Math.abs(v[1]-u[1])){const E=[(f[0]+u[0])/2,(f[1]+u[1])/2],R=this.transformInv_(E),N=[(c[0]+v[0])/2,(c[1]+v[1])/2],z=this.transformInv_(N);this.addQuad_(v,f,E,N,r,d,R,z,_-1),this.addQuad_(N,E,u,c,z,R,e,l,_-1)}else{const E=[(v[0]+f[0])/2,(v[1]+f[1])/2],R=this.transformInv_(E),N=[(u[0]+c[0])/2,(u[1]+c[1])/2],z=this.transformInv_(N);this.addQuad_(v,E,N,c,r,R,z,l,_-1),this.addQuad_(E,f,u,N,R,d,e,z,_-1)}return}}if(y){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}11&O||this.addTriangle_(v,u,c,r,e,l),14&O||this.addTriangle_(v,u,f,r,e,d),O&&(13&O||this.addTriangle_(f,c,v,d,l,r),7&O||this.addTriangle_(f,c,u,d,l,e))}calculateSourceExtent(){const v=(0,W.lJ)();return this.triangles_.forEach(function(f,u,c){const r=f.source;(0,W.Wj)(v,r[0]),(0,W.Wj)(v,r[1]),(0,W.Wj)(v,r[2])}),v}getTriangles(){return this.triangles_}}},6149:(jt,ht,a)=>{"use strict";a.d(ht,{m:()=>W});const W=.5},3616:(jt,ht,a)=>{"use strict";a.d(ht,{Gw:()=>Z,YP:()=>k,gE:()=>G,h$:()=>F});var W=a(3026);function F(b){if(void 0!==b)return 0}function k(b){if(void 0!==b)return b}function G(b){const S=2*Math.PI/b;return function(P,v){return v?P:void 0!==P?P=Math.floor(P/S+.5)*S:void 0}}function Z(b){return b=b||(0,W.Yr)(5),function(S,P){return P?S:void 0!==S?Math.abs(S)<=b?0:S:void 0}}},7298:(jt,ht,a)=>{"use strict";function W(Z,b,S){return void 0===S&&(S=[0,0]),S[0]=Z[0]+2*b,S[1]=Z[1]+2*b,S}function F(Z){return Z[0]>0&&Z[1]>0}function k(Z,b,S){return void 0===S&&(S=[0,0]),S[0]=Z[0]*b+.5|0,S[1]=Z[1]*b+.5|0,S}function G(Z,b){return Array.isArray(Z)?Z:(void 0===b?b=[Z,Z]:(b[0]=Z,b[1]=Z),b)}a.d(ht,{Pq:()=>G,bA:()=>k,f3:()=>W,py:()=>F})},5240:(jt,ht,a)=>{"use strict";a.d(ht,{Z:()=>f});var W=a(2431),F=a(6626),k=a(8382),G=a(5105),Z=a(1242),b=a(9219),S=a(1316),P=a(3089);const f=class v extends G.Z{constructor(c){super({attributions:c.attributions,wrapX:c.wrapX}),this.resolution=void 0,this.distance=void 0!==c.distance?c.distance:20,this.minDistance=c.minDistance||0,this.interpolationRatio=0,this.features=[],this.geometryFunction=c.geometryFunction||function(r){const d=r.getGeometry();return(0,b.h)(!d||"Point"===d.getType(),10),d},this.createCustomCluster_=c.createCluster,this.source=null,this.boundRefresh_=this.refresh.bind(this),this.updateDistance(this.distance,this.minDistance),this.setSource(c.source||null)}clear(c){this.features.length=0,super.clear(c)}getDistance(){return this.distance}getSource(){return this.source}loadFeatures(c,r,d){this.source.loadFeatures(c,r,d),r!==this.resolution&&(this.resolution=r,this.refresh())}setDistance(c){this.updateDistance(c,this.minDistance)}setMinDistance(c){this.updateDistance(this.distance,c)}getMinDistance(){return this.minDistance}setSource(c){this.source&&this.source.removeEventListener(W.Z.CHANGE,this.boundRefresh_),this.source=c,c&&c.addEventListener(W.Z.CHANGE,this.boundRefresh_),this.refresh()}refresh(){this.clear(),this.cluster(),this.addFeatures(this.features)}updateDistance(c,r){const d=0===c?0:Math.min(r,c)/c,e=c!==this.distance||this.interpolationRatio!==d;this.distance=c,this.minDistance=r,this.interpolationRatio=d,e&&this.refresh()}cluster(){if(void 0===this.resolution||!this.source)return;const c=(0,S.lJ)(),r=this.distance*this.resolution,d=this.source.getFeatures(),e={};for(let l=0,_=d.length;l<_;l++){const n=d[l];if(!((0,P.sq)(n)in e)){const g=this.geometryFunction(n);if(g){const m=g.getCoordinates();(0,S.HK)(m,c),(0,S.f3)(c,r,c);const y=this.source.getFeaturesInExtent(c).filter(function(I){const O=(0,P.sq)(I);return!(O in e)&&(e[O]=!0,!0)});this.features.push(this.createCluster(y,c))}}}}createCluster(c,r){const d=[0,0];for(let n=c.length-1;n>=0;--n){const g=this.geometryFunction(c[n]);g?(0,Z.IH)(d,g.getCoordinates()):c.splice(n,1)}(0,Z.bA)(d,1/c.length);const e=(0,S.qg)(r),l=this.interpolationRatio,_=new k.Z([d[0]*(1-l)+e[0]*l,d[1]*(1-l)+e[1]*l]);return this.createCustomCluster_?this.createCustomCluster_(_,c):new F.Z({geometry:_,features:c})}}},7273:(jt,ht,a)=>{"use strict";a.d(ht,{ZP:()=>m,r6:()=>g});var W=a(8802),F=a(4847),k=a(6149),G=a(2431),Z=a(6908),b=a(1909),S=a(6230),P=a(1316),v=a(7847);const u=class f extends Z.Z{constructor(I,O,E,R,N,z,st){let A=I.getExtent();A&&I.canWrapX()&&(A=A.slice(),A[0]=-1/0,A[2]=1/0);let L=O.getExtent();L&&O.canWrapX()&&(L=L.slice(),L[0]=-1/0,L[2]=1/0);const w=L?(0,P.Ed)(E,L):E,x=(0,P.qg)(w),C=(0,S.aA)(I,O,x,R),Y=new b.Z(I,O,w,A,C*k.m,R),nt=Y.calculateSourceExtent(),V=(0,P.xb)(nt)?null:z(nt,C,N),at=V?F.Z.IDLE:F.Z.EMPTY,ut=V?V.getPixelRatio():1;super(E,R,ut,at),this.targetProj_=O,this.maxSourceExtent_=A,this.triangulation_=Y,this.targetResolution_=R,this.targetExtent_=E,this.sourceImage_=V,this.sourcePixelRatio_=ut,this.interpolate_=st,this.canvas_=null,this.sourceListenerKey_=null}disposeInternal(){this.state==F.Z.LOADING&&this.unlistenSource_(),super.disposeInternal()}getImage(){return this.canvas_}getProjection(){return this.targetProj_}reproject_(){const I=this.sourceImage_.getState();if(I==F.Z.LOADED){const O=(0,P.dz)(this.targetExtent_)/this.targetResolution_,E=(0,P.Cr)(this.targetExtent_)/this.targetResolution_;this.canvas_=(0,S.sY)(O,E,this.sourcePixelRatio_,this.sourceImage_.getResolution(),this.maxSourceExtent_,this.targetResolution_,this.targetExtent_,this.triangulation_,[{extent:this.sourceImage_.getExtent(),image:this.sourceImage_.getImage()}],0,void 0,this.interpolate_)}this.state=I,this.changed()}load(){if(this.state==F.Z.IDLE){this.state=F.Z.LOADING,this.changed();const I=this.sourceImage_.getState();I==F.Z.LOADED||I==F.Z.ERROR?this.reproject_():(this.sourceListenerKey_=(0,v.oL)(this.sourceImage_,G.Z.CHANGE,function(O){const E=this.sourceImage_.getState();(E==F.Z.LOADED||E==F.Z.ERROR)&&(this.unlistenSource_(),this.reproject_())},this),this.sourceImage_.load())}}unlistenSource_(){(0,v.bN)(this.sourceListenerKey_),this.sourceListenerKey_=null}};var c=a(4074),r=a(3089),d=a(7021),e=a(9363);class _ extends W.ZP{constructor(I,O){super(I),this.image=O}}function g(y,I){y.getImage().src=I}const m=class n extends c.Z{constructor(I){super({attributions:I.attributions,projection:I.projection,state:I.state,interpolate:void 0===I.interpolate||I.interpolate}),this.resolutions_=void 0!==I.resolutions?I.resolutions:null,this.reprojectedImage_=null,this.reprojectedRevision_=0}getResolutions(){return this.resolutions_}setResolutions(I){this.resolutions_=I}findNearestResolution(I){const O=this.getResolutions();return O&&(I=O[(0,e.h7)(O,I,0)]),I}getImage(I,O,E,R){const N=this.getProjection();if(!N||!R||(0,d.OP)(N,R))return N&&(R=N),this.getImageInternal(I,O,E,R);if(this.reprojectedImage_){if(this.reprojectedRevision_==this.getRevision()&&(0,d.OP)(this.reprojectedImage_.getProjection(),R)&&this.reprojectedImage_.getResolution()==O&&(0,P.fS)(this.reprojectedImage_.getExtent(),I))return this.reprojectedImage_;this.reprojectedImage_.dispose(),this.reprojectedImage_=null}return this.reprojectedImage_=new u(N,R,I,O,E,(z,st,A)=>this.getImageInternal(z,st,A,N),this.getInterpolate()),this.reprojectedRevision_=this.getRevision(),this.reprojectedImage_}getImageInternal(I,O,E,R){return(0,r.O3)()}handleImageChange(I){const O=I.target;let E;switch(O.getState()){case F.Z.LOADING:this.loading=!0,E="imageloadstart";break;case F.Z.LOADED:this.loading=!1,E="imageloadend";break;case F.Z.ERROR:this.loading=!1,E="imageloaderror";break;default:return}this.hasListener(E)&&this.dispatchEvent(new _(E,O))}}},3298:(jt,ht,a)=>{"use strict";a.d(ht,{Z:()=>l});var W=a(2431),F=a(7273),k=a(4499),G=a(3271),Z=a(8625),b=a(9219),S=a(6230),P=a(3026),v=a(9258),f=a(1316),u=a(4211),c=a(7021);const d=[101,101],l=class e extends F.ZP{constructor(n){super({attributions:(n=n||{}).attributions,interpolate:n.interpolate,projection:n.projection,resolutions:n.resolutions}),this.context_=(0,u.E4)(1,1),this.crossOrigin_=void 0!==n.crossOrigin?n.crossOrigin:null,this.url_=n.url,this.imageLoadFunction_=void 0!==n.imageLoadFunction?n.imageLoadFunction:F.r6,this.params_=Object.assign({},n.params),this.v13_=!0,this.updateV13_(),this.serverType_=n.serverType,this.hidpi_=void 0===n.hidpi||n.hidpi,this.image_=null,this.imageSize_=[0,0],this.renderedRevision_=0,this.ratio_=void 0!==n.ratio?n.ratio:1.5}getFeatureInfoUrl(n,g,m,y){if(void 0===this.url_)return;const I=(0,c.U2)(m),O=this.getProjection();O&&O!==I&&(g=(0,S.aA)(O,I,n,g),n=(0,c.vs)(n,I,O));const E=(0,f.p8)(n,g,0,d),R={SERVICE:"WMS",VERSION:G.e,REQUEST:"GetFeatureInfo",FORMAT:"image/png",TRANSPARENT:!0,QUERY_LAYERS:this.params_.LAYERS};Object.assign(R,this.params_,y);const N=(0,P.GW)((n[0]-E[0])/g,4),z=(0,P.GW)((E[3]-n[1])/g,4);return R[this.v13_?"I":"X"]=N,R[this.v13_?"J":"Y"]=z,this.getRequestUrl_(E,d,1,O||I,R)}getLegendUrl(n,g){if(void 0===this.url_)return;const m={SERVICE:"WMS",VERSION:G.e,REQUEST:"GetLegendGraphic",FORMAT:"image/png"};if(void 0===g||void 0===g.LAYER){const y=this.params_.LAYERS;if(Array.isArray(y)&&1!==y.length)return;m.LAYER=y}if(void 0!==n){const y=this.getProjection()?this.getProjection().getMetersPerUnit():1;m.SCALE=n*y/28e-5}return Object.assign(m,g),(0,Z.B)(this.url_,m)}getParams(){return this.params_}getImageInternal(n,g,m,y){if(void 0===this.url_)return null;g=this.findNearestResolution(g),1!=m&&(!this.hidpi_||void 0===this.serverType_)&&(m=1);const I=g/m,O=(0,f.qg)(n),E=(0,P.mD)((0,f.dz)(n)/I,4),R=(0,P.mD)((0,f.Cr)(n)/I,4),N=(0,f.p8)(O,I,0,[E,R]),st=E+2*(0,P.mD)((this.ratio_-1)*E/2,4),A=(0,P.mD)((this.ratio_-1)*R/2,4),w=(0,f.p8)(O,I,0,[st,R+2*A]),x=this.image_;if(x&&this.renderedRevision_==this.getRevision()&&x.getResolution()==g&&x.getPixelRatio()==m&&(0,f.r4)(x.getExtent(),N))return x;const C={SERVICE:"WMS",VERSION:G.e,REQUEST:"GetMap",FORMAT:"image/png",TRANSPARENT:!0};Object.assign(C,this.params_),this.imageSize_[0]=(0,P.NM)((0,f.dz)(w)/I,4),this.imageSize_[1]=(0,P.NM)((0,f.Cr)(w)/I,4);const D=this.getRequestUrl_(w,this.imageSize_,m,y,C);return this.image_=new k.Z(w,g,m,D,this.crossOrigin_,this.imageLoadFunction_,this.context_),this.renderedRevision_=this.getRevision(),this.image_.addEventListener(W.Z.CHANGE,this.handleImageChange.bind(this)),this.image_}getImageLoadFunction(){return this.imageLoadFunction_}getRequestUrl_(n,g,m,y,I){if((0,b.h)(void 0!==this.url_,9),I[this.v13_?"CRS":"SRS"]=y.getCode(),"STYLES"in this.params_||(I.STYLES=""),1!=m)switch(this.serverType_){case"geoserver":const R=90*m+.5|0;"FORMAT_OPTIONS"in I?I.FORMAT_OPTIONS+=";dpi:"+R:I.FORMAT_OPTIONS="dpi:"+R;break;case"mapserver":I.MAP_RESOLUTION=90*m;break;case"carmentaserver":case"qgis":I.DPI=90*m;break;default:(0,b.h)(!1,8)}I.WIDTH=g[0],I.HEIGHT=g[1];const O=y.getAxisOrientation();let E;return E=this.v13_&&"ne"==O.substr(0,2)?[n[1],n[0],n[3],n[2]]:n,I.BBOX=E.join(","),(0,Z.B)(this.url_,I)}getUrl(){return this.url_}setImageLoadFunction(n){this.image_=null,this.imageLoadFunction_=n,this.changed()}setUrl(n){n!=this.url_&&(this.url_=n,this.image_=null,this.changed())}updateParams(n){Object.assign(this.params_,n),this.updateV13_(),this.image_=null,this.changed()}updateV13_(){this.v13_=(0,v.n)(this.params_.VERSION||G.e,"1.3")>=0}}},1978:(jt,ht,a)=>{"use strict";a.d(ht,{Z:()=>G});var W=a(3640);const G=class k extends W.Z{constructor(b){let S;S=void 0!==(b=b||{}).attributions?b.attributions:['&#169; <a href="https://www.openstreetmap.org/copyright" target="_blank">OpenStreetMap</a> contributors.'],super({attributions:S,attributionsCollapsible:!1,cacheSize:b.cacheSize,crossOrigin:void 0!==b.crossOrigin?b.crossOrigin:"anonymous",interpolate:b.interpolate,maxZoom:void 0!==b.maxZoom?b.maxZoom:19,opaque:void 0===b.opaque||b.opaque,reprojectionErrorThreshold:b.reprojectionErrorThreshold,tileLoadFunction:b.tileLoadFunction,transition:b.transition,url:void 0!==b.url?b.url:"https://tile.openstreetmap.org/{z}/{x}/{y}.png",wrapX:b.wrapX,zDirection:b.zDirection})}}},8099:(jt,ht,a)=>{"use strict";a.d(ht,{ZP:()=>L});var W=a(5337),F=a(8802),k=a(2431),G=a(6696),Z=a(450),b=a(7273),S=a(4074),P=a(7729),v=a(857),f=a(6902),u=a(4211),c=a(6412),r=a(1316),d=a(3089);let l,e=!0;try{new ImageData(10,10)}catch{e=!1}function n(w){let x=!0;try{new ImageData(10,10)}catch{x=!1}function C(D,Y,nt){return x?new ImageData(D,Y,nt):{data:D,width:Y,height:nt}}return function(D){const Y=D.buffers,nt=D.meta,at=D.width,ut=D.height,Ct=Y.length,vt=Y[0].byteLength;if(D.imageOps){const Xt=new Array(Ct);for(let Vt=0;Vt<Ct;++Vt)Xt[Vt]=C(new Uint8ClampedArray(Y[Vt]),at,ut);return w(Xt,nt).data.buffer}const St=new Uint8ClampedArray(vt),bt=new Array(Ct),Gt=new Array(Ct);for(let Xt=0;Xt<Ct;++Xt)bt[Xt]=new Uint8ClampedArray(Y[Xt]),Gt[Xt]=[0,0,0,0];for(let Xt=0;Xt<vt;Xt+=4){for(let Vt=0;Vt<Ct;++Vt){const _e=bt[Vt];Gt[Vt][0]=_e[Xt],Gt[Vt][1]=_e[Xt+1],Gt[Vt][2]=_e[Xt+2],Gt[Vt][3]=_e[Xt+3]}const te=w(Gt,nt);St[Xt]=te[0],St[Xt+1]=te[1],St[Xt+2]=te[2],St[Xt+3]=te[3]}return St.buffer}}function g(w,x){const D=Object.keys(w.lib||{}).map(function(nt){return"const "+nt+" = "+w.lib[nt].toString()+";"}).concat(["const __minion__ = ("+n.toString()+")(",w.operation.toString(),");",'self.addEventListener("message", function(event) {',"  const buffer = __minion__(event.data);","  self.postMessage({buffer: buffer, meta: event.data.meta}, [buffer]);","});"]),Y=new Worker(typeof Blob>"u"?"data:text/javascript;base64,"+Buffer.from(D.join("\n"),"binary").toString("base64"):URL.createObjectURL(new Blob(D,{type:"text/javascript"})));return Y.addEventListener("message",x),Y}class y extends W.Z{constructor(x){let C;super(),this._imageOps=!!x.imageOps,C=0===x.threads?0:this._imageOps?1:x.threads||1;const D=new Array(C);if(C)for(let Y=0;Y<C;++Y)D[Y]=g(x,this._onWorkerMessage.bind(this,Y));else D[0]=function m(w,x){const C=n(w.operation);let D=!1;return{postMessage:function(Y){setTimeout(function(){D||x({data:{buffer:C(Y),meta:Y.meta}})},0)},terminate:function(){D=!0}}}(x,this._onWorkerMessage.bind(this,0));this._workers=D,this._queue=[],this._maxQueueLength=x.queue||1/0,this._running=0,this._dataLookup={},this._job=null}process(x,C,D){this._enqueue({inputs:x,meta:C,callback:D}),this._dispatch()}_enqueue(x){for(this._queue.push(x);this._queue.length>this._maxQueueLength;)this._queue.shift().callback(null,null)}_dispatch(){if(this._running||0===this._queue.length)return;const x=this._queue.shift();this._job=x;const C=x.inputs[0].width,D=x.inputs[0].height,Y=x.inputs.map(function(ut){return ut.data.buffer}),nt=this._workers.length;if(this._running=nt,1===nt)return void this._workers[0].postMessage({buffers:Y,meta:x.meta,imageOps:this._imageOps,width:C,height:D},Y);const at=4*Math.ceil(x.inputs[0].data.length/4/nt);for(let ut=0;ut<nt;++ut){const Ct=ut*at,vt=[];for(let St=0,bt=Y.length;St<bt;++St)vt.push(Y[St].slice(Ct,Ct+at));this._workers[ut].postMessage({buffers:vt,meta:x.meta,imageOps:this._imageOps,width:C,height:D},vt)}}_onWorkerMessage(x,C){this.disposed||(this._dataLookup[x]=C.data,--this._running,0===this._running&&this._resolveJob())}_resolveJob(){const x=this._job,C=this._workers.length;let D,Y;if(1===C)D=new Uint8ClampedArray(this._dataLookup[0].buffer),Y=this._dataLookup[0].meta;else{const nt=x.inputs[0].data.length;D=new Uint8ClampedArray(nt),Y=new Array(C);const V=4*Math.ceil(nt/4/C);for(let at=0;at<C;++at){const Ct=at*V;D.set(new Uint8ClampedArray(this._dataLookup[at].buffer),Ct),Y[at]=this._dataLookup[at].meta}}this._job=null,this._dataLookup={},x.callback(null,function _(w,x,C){if(e)return new ImageData(w,x,C);l||(l=document.createElement("canvas").getContext("2d"));const D=l.createImageData(x,C);return D.data.set(w),D}(D,x.inputs[0].width,x.inputs[0].height),Y),this._dispatch()}disposeInternal(){for(let x=0;x<this._workers.length;++x)this._workers[x].terminate();this._workers.length=0}}class O extends F.ZP{constructor(x,C,D){super(x),this.extent=C.extent,this.resolution=C.viewState.resolution/C.pixelRatio,this.data=D}}let R=null;function N(w,x){const C=w.getRenderer();if(!C)throw new Error("Unsupported layer type: "+w);if(!C.prepareFrame(x))return null;const D=x.size[0],Y=x.size[1];if(0===D||0===Y)return null;const nt=C.renderFrame(x,null);let V;if(nt instanceof HTMLCanvasElement)V=nt;else{if(nt&&(V=nt.firstElementChild),!(V instanceof HTMLCanvasElement))throw new Error("Unsupported rendered element: "+V);if(V.width===D&&V.height===Y)return V.getContext("2d").getImageData(0,0,D,Y)}if(R){const at=R.canvas;at.width!==D||at.height!==Y?R=(0,u.E4)(D,Y,void 0,{willReadFrequently:!0}):R.clearRect(0,0,D,Y)}else R=(0,u.E4)(D,Y,void 0,{willReadFrequently:!0});return R.drawImage(V,0,0,D,Y),R.getImageData(0,0,D,Y)}function A(w){let x;return w instanceof S.Z?w instanceof f.Z?x=new P.Z({source:w}):w instanceof b.ZP&&(x=new Z.Z({source:w})):x=w,x}const L=class E extends b.ZP{constructor(x){super({projection:null}),this.processor_=null,this.operationType_=void 0!==x.operationType?x.operationType:"pixel",this.threads_=void 0!==x.threads?x.threads:1,this.layers_=function st(w){const x=w.length,C=new Array(x);for(let D=0;D<x;++D)C[D]=A(w[D]);return C}(x.sources);const C=this.changed.bind(this);for(let D=0,Y=this.layers_.length;D<Y;++D)this.layers_[D].addEventListener(k.Z.CHANGE,C);var w;this.useResolutions_=null!==x.resolutions,this.tileQueue_=new v.Z(function(){return 1},this.processSources_.bind(this)),this.renderedImageCanvas_=null,this.frameState_={animate:!1,coordinateToPixelTransform:(0,c.Ue)(),declutterTree:null,extent:null,index:0,layerIndex:0,layerStatesArray:(w=this.layers_,w.map(function(x){return x.getLayerState()})),pixelRatio:1,pixelToCoordinateTransform:(0,c.Ue)(),postRenderFunctions:[],size:[0,0],tileQueue:this.tileQueue_,time:Date.now(),usedTiles:{},viewState:{rotation:0},viewHints:[],wantedTiles:{},mapId:(0,d.sq)(this),renderTargets:{}},this.setAttributions(function(D){const Y=[];for(let nt=0,V=x.sources.length;nt<V;++nt){const at=x.sources[nt],ut=at instanceof S.Z?at:at.getSource();if(!ut)continue;const Ct=ut.getAttributions();if("function"==typeof Ct){const vt=Ct(D);Y.push.apply(Y,vt)}}return 0!==Y.length?Y:null}),void 0!==x.operation&&this.setOperation(x.operation,x.lib)}setOperation(x,C){this.processor_&&this.processor_.dispose(),this.processor_=new y({operation:x,imageOps:"image"===this.operationType_,queue:1,lib:C,threads:this.threads_}),this.changed()}updateFrameState_(x,C,D){const Y=Object.assign({},this.frameState_);Y.viewState=Object.assign({},Y.viewState);const nt=(0,r.qg)(x);Y.size[0]=Math.ceil((0,r.dz)(x)/C),Y.size[1]=Math.ceil((0,r.Cr)(x)/C),Y.extent=[nt[0]-Y.size[0]*C/2,nt[1]-Y.size[1]*C/2,nt[0]+Y.size[0]*C/2,nt[1]+Y.size[1]*C/2],Y.time=Date.now();const V=Y.viewState;return V.center=nt,V.projection=D,V.resolution=C,Y}allSourcesReady_(){let C,x=!0;for(let D=0,Y=this.layers_.length;D<Y;++D)if(C=this.layers_[D].getSource(),!C||"ready"!==C.getState()){x=!1;break}return x}getImage(x,C,D,Y){if(!this.allSourcesReady_())return null;this.tileQueue_.loadMoreTiles(16,16),C=this.findNearestResolution(C);const nt=this.updateFrameState_(x,C,Y);if(this.requestedFrameState_=nt,this.renderedImageCanvas_){const V=this.renderedImageCanvas_.getResolution(),at=this.renderedImageCanvas_.getExtent();(C!==V||!(0,r.fS)(nt.extent,at))&&(this.renderedImageCanvas_=null)}return(!this.renderedImageCanvas_||this.getRevision()!==this.renderedRevision_)&&this.processSources_(),nt.animate&&requestAnimationFrame(this.changed.bind(this)),this.renderedImageCanvas_}processSources_(){const x=this.requestedFrameState_,C=this.layers_.length,D=new Array(C);for(let nt=0;nt<C;++nt){x.layerIndex=nt,x.renderTargets={};const V=N(this.layers_[nt],x);if(!V)return;D[nt]=V}const Y={};this.dispatchEvent(new O("beforeoperations",x,Y)),this.processor_.process(D,Y,this.onWorkerComplete_.bind(this,x))}onWorkerComplete_(x,C,D,Y){if(C||!D)return;const nt=x.extent,V=x.viewState.resolution;if(V!==this.requestedFrameState_.viewState.resolution||!(0,r.fS)(nt,this.requestedFrameState_.extent))return;let at;if(this.renderedImageCanvas_)at=this.renderedImageCanvas_.getImage().getContext("2d");else{const ut=Math.round((0,r.dz)(nt)/V),Ct=Math.round((0,r.Cr)(nt)/V);at=(0,u.E4)(ut,Ct),this.renderedImageCanvas_=new G.Z(nt,V,1,at.canvas)}at.putImageData(D,0,0),x.animate?requestAnimationFrame(this.changed.bind(this)):this.changed(),this.renderedRevision_=this.getRevision(),this.dispatchEvent(new O("afteroperations",x,Y))}getResolutions(x){if(!this.useResolutions_)return null;let C=super.getResolutions();if(!C)for(let D=0,Y=this.layers_.length;D<Y&&(C=this.layers_[D].getSource().getResolutions(x),!C);++D);return C}disposeInternal(){this.processor_&&this.processor_.dispose(),super.disposeInternal()}}},4074:(jt,ht,a)=>{"use strict";a.d(ht,{Z:()=>Z});var W=a(7300),F=a(7021);function G(b){return b?Array.isArray(b)?function(S){return b}:"function"==typeof b?b:function(S){return[b]}:null}const Z=class k extends W.Z{constructor(S){super(),this.projection=(0,F.U2)(S.projection),this.attributions_=G(S.attributions),this.attributionsCollapsible_=void 0===S.attributionsCollapsible||S.attributionsCollapsible,this.loading=!1,this.state_=void 0!==S.state?S.state:"ready",this.wrapX_=void 0!==S.wrapX&&S.wrapX,this.interpolate_=!!S.interpolate,this.viewResolver=null,this.viewRejector=null;const P=this;this.viewPromise_=new Promise(function(v,f){P.viewResolver=v,P.viewRejector=f})}getAttributions(){return this.attributions_}getAttributionsCollapsible(){return this.attributionsCollapsible_}getProjection(){return this.projection}getResolutions(S){return null}getView(){return this.viewPromise_}getState(){return this.state_}getWrapX(){return this.wrapX_}getInterpolate(){return this.interpolate_}refresh(){this.changed()}setAttributions(S){this.attributions_=G(S),this.changed()}setState(S){this.state_=S,this.changed()}}},6902:(jt,ht,a)=>{"use strict";a.d(ht,{Z:()=>r,s:()=>c});var W=a(8802),F=a(4074),k=a(8525),G=a(5399),Z=a(3089),b=a(9219),S=a(7021),P=a(3936),v=a(1180),f=a(7298);class c extends W.ZP{constructor(e,l){super(e),this.tile=l}}const r=class u extends F.Z{constructor(e){super({attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,projection:e.projection,state:e.state,wrapX:e.wrapX,interpolate:e.interpolate}),this.opaque_=void 0!==e.opaque&&e.opaque,this.tilePixelRatio_=void 0!==e.tilePixelRatio?e.tilePixelRatio:1,this.tileGrid=void 0!==e.tileGrid?e.tileGrid:null,this.tileGrid&&(0,f.Pq)(this.tileGrid.getTileSize(this.tileGrid.getMinZoom()),[256,256]),this.tileCache=new k.Z(e.cacheSize||0),this.tmpSize=[0,0],this.key_=e.key||"",this.tileOptions={transition:e.transition,interpolate:e.interpolate},this.zDirection=e.zDirection?e.zDirection:0}canExpireCache(){return this.tileCache.canExpireCache()}expireCache(e,l){const _=this.getTileCacheForProjection(e);_&&_.expireCache(l)}forEachLoadedTile(e,l,_,n){const g=this.getTileCacheForProjection(e);if(!g)return!1;let y,I,O,m=!0;for(let E=_.minX;E<=_.maxX;++E)for(let R=_.minY;R<=_.maxY;++R)I=(0,P.lg)(l,E,R),O=!1,g.containsKey(I)&&(y=g.get(I),O=y.getState()===G.Z.LOADED,O&&(O=!1!==n(y))),O||(m=!1);return m}getGutterForProjection(e){return 0}getKey(){return this.key_}setKey(e){this.key_!==e&&(this.key_=e,this.changed())}getOpaque(e){return this.opaque_}getResolutions(e){const l=e?this.getTileGridForProjection(e):this.tileGrid;return l?l.getResolutions():null}getTile(e,l,_,n,g){return(0,Z.O3)()}getTileGrid(){return this.tileGrid}getTileGridForProjection(e){return this.tileGrid?this.tileGrid:(0,v.X$)(e)}getTileCacheForProjection(e){const l=this.getProjection();return(0,b.h)(null===l||(0,S.OP)(l,e),68),this.tileCache}getTilePixelRatio(e){return this.tilePixelRatio_}getTilePixelSize(e,l,_){const n=this.getTileGridForProjection(_),g=this.getTilePixelRatio(l),m=(0,f.Pq)(n.getTileSize(e),this.tmpSize);return 1==g?m:(0,f.bA)(m,g,this.tmpSize)}getTileCoordForTileUrlFunction(e,l){l=void 0!==l?l:this.getProjection();const _=this.getTileGridForProjection(l);return this.getWrapX()&&l.isGlobal()&&(e=(0,v.Cf)(_,e,l)),(0,P.tE)(e,_)?e:null}clear(){this.tileCache.clear()}refresh(){this.clear(),super.refresh()}updateCacheSize(e,l){const _=this.getTileCacheForProjection(l);e>_.highWaterMark&&(_.highWaterMark=e)}useTile(e,l,_,n){}}},719:(jt,ht,a)=>{"use strict";a.d(ht,{Z:()=>r});var W=a(2431),F=a(3968),k=a(8857),G=a(8525),Z=a(5399),b=a(6946),S=a(7021),P=a(3936),v=a(1180),f=a(3089);function c(d,e){d.getImage().src=e}const r=class u extends b.Z{constructor(e){super({attributions:e.attributions,cacheSize:e.cacheSize,opaque:e.opaque,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tileLoadFunction:e.tileLoadFunction?e.tileLoadFunction:c,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX,transition:e.transition,interpolate:void 0===e.interpolate||e.interpolate,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.crossOrigin=void 0!==e.crossOrigin?e.crossOrigin:null,this.tileClass=void 0!==e.tileClass?e.tileClass:F.Z,this.tileCacheForProjection={},this.tileGridForProjection={},this.reprojectionErrorThreshold_=e.reprojectionErrorThreshold,this.renderReprojectionEdges_=!1}canExpireCache(){if(this.tileCache.canExpireCache())return!0;for(const e in this.tileCacheForProjection)if(this.tileCacheForProjection[e].canExpireCache())return!0;return!1}expireCache(e,l){const _=this.getTileCacheForProjection(e);this.tileCache.expireCache(this.tileCache==_?l:{});for(const n in this.tileCacheForProjection){const g=this.tileCacheForProjection[n];g.expireCache(g==_?l:{})}}getGutterForProjection(e){return this.getProjection()&&e&&!(0,S.OP)(this.getProjection(),e)?0:this.getGutter()}getGutter(){return 0}getKey(){let e=super.getKey();return this.getInterpolate()||(e+=":disable-interpolation"),e}getOpaque(e){return!(this.getProjection()&&e&&!(0,S.OP)(this.getProjection(),e))&&super.getOpaque(e)}getTileGridForProjection(e){const l=this.getProjection();if(this.tileGrid&&(!l||(0,S.OP)(l,e)))return this.tileGrid;const _=(0,f.sq)(e);return _ in this.tileGridForProjection||(this.tileGridForProjection[_]=(0,v.X$)(e)),this.tileGridForProjection[_]}getTileCacheForProjection(e){const l=this.getProjection();if(!l||(0,S.OP)(l,e))return this.tileCache;const _=(0,f.sq)(e);return _ in this.tileCacheForProjection||(this.tileCacheForProjection[_]=new G.Z(this.tileCache.highWaterMark)),this.tileCacheForProjection[_]}createTile_(e,l,_,n,g,m){const y=[e,l,_],I=this.getTileCoordForTileUrlFunction(y,g),O=I?this.tileUrlFunction(I,n,g):void 0,E=new this.tileClass(y,void 0!==O?Z.Z.IDLE:Z.Z.EMPTY,void 0!==O?O:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return E.key=m,E.addEventListener(W.Z.CHANGE,this.handleTileChange.bind(this)),E}getTile(e,l,_,n,g){const m=this.getProjection();if(!m||!g||(0,S.OP)(m,g))return this.getTileInternal(e,l,_,n,m||g);const y=this.getTileCacheForProjection(g),I=[e,l,_];let O;const E=(0,P.km)(I);y.containsKey(E)&&(O=y.get(E));const R=this.getKey();if(O&&O.key==R)return O;const N=this.getTileGridForProjection(m),z=this.getTileGridForProjection(g),st=this.getTileCoordForTileUrlFunction(I,g),A=new k.Z(m,N,g,z,I,st,this.getTilePixelRatio(n),this.getGutter(),(L,w,x,C)=>this.getTileInternal(L,w,x,C,m),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_,this.getInterpolate());return A.key=R,O?(A.interimTile=O,A.refreshInterimChain(),y.replace(E,A)):y.set(E,A),A}getTileInternal(e,l,_,n,g){let m=null;const y=(0,P.lg)(e,l,_),I=this.getKey();if(this.tileCache.containsKey(y)){if(m=this.tileCache.get(y),m.key!=I){const O=m;m=this.createTile_(e,l,_,n,g,I),m.interimTile=O.getState()==Z.Z.IDLE?O.interimTile:O,m.refreshInterimChain(),this.tileCache.replace(y,m)}}else m=this.createTile_(e,l,_,n,g,I),this.tileCache.set(y,m);return m}setRenderReprojectionEdges(e){if(this.renderReprojectionEdges_!=e){this.renderReprojectionEdges_=e;for(const l in this.tileCacheForProjection)this.tileCacheForProjection[l].clear();this.changed()}}setTileGridForProjection(e,l){const _=(0,S.U2)(e);if(_){const n=(0,f.sq)(_);n in this.tileGridForProjection||(this.tileGridForProjection[n]=l)}}clear(){super.clear();for(const e in this.tileCacheForProjection)this.tileCacheForProjection[e].clear()}}},8311:(jt,ht,a)=>{"use strict";a.d(ht,{Z:()=>r});var W=a(719),F=a(3271),k=a(8625),G=a(9219),Z=a(1316),b=a(7298),S=a(6230),P=a(9258),v=a(7021),f=a(3026),u=a(3936);const r=class c extends W.Z{constructor(e){e=e||{};const l=Object.assign({},e.params);super({attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,interpolate:e.interpolate,opaque:!(!("TRANSPARENT"in l)||l.TRANSPARENT),projection:e.projection,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileClass:e.tileClass,tileGrid:e.tileGrid,tileLoadFunction:e.tileLoadFunction,url:e.url,urls:e.urls,wrapX:void 0===e.wrapX||e.wrapX,transition:e.transition,zDirection:e.zDirection}),this.gutter_=void 0!==e.gutter?e.gutter:0,this.params_=l,this.v13_=!0,this.serverType_=e.serverType,this.hidpi_=void 0===e.hidpi||e.hidpi,this.tmpExtent_=(0,Z.lJ)(),this.updateV13_(),this.setKey(this.getKeyForParams_())}getFeatureInfoUrl(e,l,_,n){const g=(0,v.U2)(_),m=this.getProjection();let y=this.getTileGrid();y||(y=this.getTileGridForProjection(g));const I=y.getZForResolution(l,this.zDirection),O=y.getTileCoordForCoordAndZ(e,I);if(y.getResolutions().length<=O[0])return;let E=y.getResolution(O[0]),R=y.getTileCoordExtent(O,this.tmpExtent_),N=(0,b.Pq)(y.getTileSize(O[0]),this.tmpSize);const z=this.gutter_;0!==z&&(N=(0,b.f3)(N,z,this.tmpSize),R=(0,Z.f3)(R,E*z,R)),m&&m!==g&&(E=(0,S.aA)(m,g,e,E),R=(0,v.$A)(R,g,m),e=(0,v.vs)(e,g,m));const st={SERVICE:"WMS",VERSION:F.e,REQUEST:"GetFeatureInfo",FORMAT:"image/png",TRANSPARENT:!0,QUERY_LAYERS:this.params_.LAYERS};Object.assign(st,this.params_,n);const A=Math.floor((e[0]-R[0])/E),L=Math.floor((R[3]-e[1])/E);return st[this.v13_?"I":"X"]=A,st[this.v13_?"J":"Y"]=L,this.getRequestUrl_(O,N,R,1,m||g,st)}getLegendUrl(e,l){if(void 0===this.urls[0])return;const _={SERVICE:"WMS",VERSION:F.e,REQUEST:"GetLegendGraphic",FORMAT:"image/png"};if(void 0===l||void 0===l.LAYER){const n=this.params_.LAYERS;if(Array.isArray(n)&&1!==n.length)return;_.LAYER=n}if(void 0!==e){const n=this.getProjection()?this.getProjection().getMetersPerUnit():1;_.SCALE=e*n/28e-5}return Object.assign(_,l),(0,k.B)(this.urls[0],_)}getGutter(){return this.gutter_}getParams(){return this.params_}getRequestUrl_(e,l,_,n,g,m){const y=this.urls;if(!y)return;if(m.WIDTH=l[0],m.HEIGHT=l[1],m[this.v13_?"CRS":"SRS"]=g.getCode(),"STYLES"in this.params_||(m.STYLES=""),1!=n)switch(this.serverType_){case"geoserver":const R=90*n+.5|0;"FORMAT_OPTIONS"in m?m.FORMAT_OPTIONS+=";dpi:"+R:m.FORMAT_OPTIONS="dpi:"+R;break;case"mapserver":m.MAP_RESOLUTION=90*n;break;case"carmentaserver":case"qgis":m.DPI=90*n;break;default:(0,G.h)(!1,52)}const I=g.getAxisOrientation(),O=_;if(this.v13_&&"ne"==I.substr(0,2)){let R;R=_[0],O[0]=_[1],O[1]=R,R=_[2],O[2]=_[3],O[3]=R}let E;return m.BBOX=O.join(","),E=1==y.length?y[0]:y[(0,f.$W)((0,u.vp)(e),y.length)],(0,k.B)(E,m)}getTilePixelRatio(e){return this.hidpi_&&void 0!==this.serverType_?e:1}getKeyForParams_(){let e=0;const l=[];for(const _ in this.params_)l[e++]=_+"-"+this.params_[_];return l.join("/")}updateParams(e){Object.assign(this.params_,e),this.updateV13_(),this.setKey(this.getKeyForParams_())}updateV13_(){this.v13_=(0,P.n)(this.params_.VERSION||F.e,"1.3")>=0}tileUrlFunction(e,l,_){let n=this.getTileGrid();if(n||(n=this.getTileGridForProjection(_)),n.getResolutions().length<=e[0])return;1!=l&&(!this.hidpi_||void 0===this.serverType_)&&(l=1);const g=n.getResolution(e[0]);let m=n.getTileCoordExtent(e,this.tmpExtent_),y=(0,b.Pq)(n.getTileSize(e[0]),this.tmpSize);const I=this.gutter_;0!==I&&(y=(0,b.f3)(y,I,this.tmpSize),m=(0,Z.f3)(m,g*I,m)),1!=l&&(y=(0,b.bA)(y,l,this.tmpSize));const O={SERVICE:"WMS",VERSION:F.e,REQUEST:"GetMap",FORMAT:"image/png",TRANSPARENT:!0};return Object.assign(O,this.params_),this.getRequestUrl_(e,y,m,l,_,O)}}},6946:(jt,ht,a)=>{"use strict";a.d(ht,{Z:()=>P});var F=a(6902),k=a(5399),G=a(7835),Z=a(3936),b=a(3089);class S extends F.Z{constructor(f){super({attributions:f.attributions,cacheSize:f.cacheSize,opaque:f.opaque,projection:f.projection,state:f.state,tileGrid:f.tileGrid,tilePixelRatio:f.tilePixelRatio,wrapX:f.wrapX,transition:f.transition,interpolate:f.interpolate,key:f.key,attributionsCollapsible:f.attributionsCollapsible,zDirection:f.zDirection}),this.generateTileUrlFunction_=this.tileUrlFunction===S.prototype.tileUrlFunction,this.tileLoadFunction=f.tileLoadFunction,f.tileUrlFunction&&(this.tileUrlFunction=f.tileUrlFunction),this.urls=null,f.urls?this.setUrls(f.urls):f.url&&this.setUrl(f.url),this.tileLoadingKeys_={}}getTileLoadFunction(){return this.tileLoadFunction}getTileUrlFunction(){return Object.getPrototypeOf(this).tileUrlFunction===this.tileUrlFunction?this.tileUrlFunction.bind(this):this.tileUrlFunction}getUrls(){return this.urls}handleTileChange(f){const u=f.target,c=(0,b.sq)(u),r=u.getState();let d;r==k.Z.LOADING?(this.tileLoadingKeys_[c]=!0,d="tileloadstart"):c in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[c],d=r==k.Z.ERROR?"tileloaderror":r==k.Z.LOADED?"tileloadend":void 0),null!=d&&this.dispatchEvent(new F.s(d,u))}setTileLoadFunction(f){this.tileCache.clear(),this.tileLoadFunction=f,this.changed()}setTileUrlFunction(f,u){this.tileUrlFunction=f,this.tileCache.pruneExceptNewestZ(),typeof u<"u"?this.setKey(u):this.changed()}setUrl(f){const u=(0,G.Gk)(f);this.urls=u,this.setUrls(u)}setUrls(f){this.urls=f;const u=f.join("\n");this.generateTileUrlFunction_?this.setTileUrlFunction((0,G.uR)(f,this.tileGrid),u):this.setKey(u)}tileUrlFunction(f,u,c){}useTile(f,u,c){const r=(0,Z.lg)(f,u,c);this.tileCache.containsKey(r)&&this.tileCache.get(r)}}const P=S},5105:(jt,ht,a)=>{"use strict";a.d(ht,{Z:()=>I});var W=a(6108),F=a(1892),k=a(8802),G=a(2431),Z=a(1858),b=a(5604),S=a(1316),P=a(3089),v=a(5526);const u=class f{constructor(E){this.rbush_=new b(E),this.items_={}}insert(E,R){const N={minX:E[0],minY:E[1],maxX:E[2],maxY:E[3],value:R};this.rbush_.insert(N),this.items_[(0,P.sq)(R)]=N}load(E,R){const N=new Array(R.length);for(let z=0,st=R.length;z<st;z++){const A=E[z],L=R[z],w={minX:A[0],minY:A[1],maxX:A[2],maxY:A[3],value:L};N[z]=w,this.items_[(0,P.sq)(L)]=w}this.rbush_.load(N)}remove(E){const R=(0,P.sq)(E),N=this.items_[R];return delete this.items_[R],null!==this.rbush_.remove(N)}update(E,R){const N=this.items_[(0,P.sq)(R)];(0,S.fS)([N.minX,N.minY,N.maxX,N.maxY],E)||(this.remove(R),this.insert(E,R))}getAll(){return this.rbush_.all().map(function(R){return R.value})}getInExtent(E){return this.rbush_.search({minX:E[0],minY:E[1],maxX:E[2],maxY:E[3]}).map(function(z){return z.value})}forEach(E){return this.forEach_(this.getAll(),E)}forEachInExtent(E,R){return this.forEach_(this.getInExtent(E),R)}forEach_(E,R){let N;for(let z=0,st=E.length;z<st;z++)if(N=R(E[z]),N)return N;return N}isEmpty(){return(0,v.x)(this.items_)}clear(){this.rbush_.clear(),this.items_={}}getExtent(E){const R=this.rbush_.toJSON();return(0,S.T9)(R.minX,R.minY,R.maxX,R.maxY,E)}concat(E){this.rbush_.load(E.rbush_.all());for(const R in E.items_)this.items_[R]=E.items_[R]}};var c=a(4074),r=a(7698),d=a(6077),e=a(1318),l=a(9219),_=a(9363),n=a(7847),g=a(6634);class m extends k.ZP{constructor(E,R,N){super(E),this.feature=R,this.features=N}}const I=class y extends c.Z{constructor(E){super({attributions:(E=E||{}).attributions,interpolate:!0,projection:void 0,state:"ready",wrapX:void 0===E.wrapX||E.wrapX}),this.loader_=d.Zn,this.format_=E.format,this.overlaps_=void 0===E.overlaps||E.overlaps,this.url_=E.url,void 0!==E.loader?this.loader_=E.loader:void 0!==this.url_&&((0,l.h)(this.format_,7),this.loader_=(0,g.Be)(this.url_,this.format_)),this.strategy_=void 0!==E.strategy?E.strategy:e.$6;const R=void 0===E.useSpatialIndex||E.useSpatialIndex;let N,z;this.featuresRtree_=R?new u:null,this.loadedExtentsRtree_=new u,this.loadingExtentsCount_=0,this.nullGeometryFeatures_={},this.idIndex_={},this.uidIndex_={},this.featureChangeKeys_={},this.featuresCollection_=null,Array.isArray(E.features)?z=E.features:E.features&&(N=E.features,z=N.getArray()),!R&&void 0===N&&(N=new W.Z(z)),void 0!==z&&this.addFeaturesInternal(z),void 0!==N&&this.bindFeaturesCollection_(N)}addFeature(E){this.addFeatureInternal(E),this.changed()}addFeatureInternal(E){const R=(0,P.sq)(E);if(!this.addToIndex_(R,E))return void(this.featuresCollection_&&this.featuresCollection_.remove(E));this.setupChangeEvents_(R,E);const N=E.getGeometry();if(N){const z=N.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(z,E)}else this.nullGeometryFeatures_[R]=E;this.dispatchEvent(new m(r.Z.ADDFEATURE,E))}setupChangeEvents_(E,R){this.featureChangeKeys_[E]=[(0,n.oL)(R,G.Z.CHANGE,this.handleFeatureChange_,this),(0,n.oL)(R,Z.Z.PROPERTYCHANGE,this.handleFeatureChange_,this)]}addToIndex_(E,R){let N=!0;const z=R.getId();return void 0!==z&&(z.toString()in this.idIndex_?N=!1:this.idIndex_[z.toString()]=R),N&&((0,l.h)(!(E in this.uidIndex_),30),this.uidIndex_[E]=R),N}addFeatures(E){this.addFeaturesInternal(E),this.changed()}addFeaturesInternal(E){const R=[],N=[],z=[];for(let st=0,A=E.length;st<A;st++){const L=E[st],w=(0,P.sq)(L);this.addToIndex_(w,L)&&N.push(L)}for(let st=0,A=N.length;st<A;st++){const L=N[st],w=(0,P.sq)(L);this.setupChangeEvents_(w,L);const x=L.getGeometry();if(x){const C=x.getExtent();R.push(C),z.push(L)}else this.nullGeometryFeatures_[w]=L}if(this.featuresRtree_&&this.featuresRtree_.load(R,z),this.hasListener(r.Z.ADDFEATURE))for(let st=0,A=N.length;st<A;st++)this.dispatchEvent(new m(r.Z.ADDFEATURE,N[st]))}bindFeaturesCollection_(E){let R=!1;this.addEventListener(r.Z.ADDFEATURE,function(N){R||(R=!0,E.push(N.feature),R=!1)}),this.addEventListener(r.Z.REMOVEFEATURE,function(N){R||(R=!0,E.remove(N.feature),R=!1)}),E.addEventListener(F.Z.ADD,N=>{R||(R=!0,this.addFeature(N.element),R=!1)}),E.addEventListener(F.Z.REMOVE,N=>{R||(R=!0,this.removeFeature(N.element),R=!1)}),this.featuresCollection_=E}clear(E){if(E){for(const N in this.featureChangeKeys_)this.featureChangeKeys_[N].forEach(n.bN);this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.uidIndex_={})}else if(this.featuresRtree_){this.featuresRtree_.forEach(z=>{this.removeFeatureInternal(z)});for(const z in this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[z])}this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.nullGeometryFeatures_={};const R=new m(r.Z.CLEAR);this.dispatchEvent(R),this.changed()}forEachFeature(E){if(this.featuresRtree_)return this.featuresRtree_.forEach(E);this.featuresCollection_&&this.featuresCollection_.forEach(E)}forEachFeatureAtCoordinateDirect(E,R){return this.forEachFeatureInExtent([E[0],E[1],E[0],E[1]],function(z){if(z.getGeometry().intersectsCoordinate(E))return R(z)})}forEachFeatureInExtent(E,R){if(this.featuresRtree_)return this.featuresRtree_.forEachInExtent(E,R);this.featuresCollection_&&this.featuresCollection_.forEach(R)}forEachFeatureIntersectingExtent(E,R){return this.forEachFeatureInExtent(E,function(N){if(N.getGeometry().intersectsExtent(E)){const st=R(N);if(st)return st}})}getFeaturesCollection(){return this.featuresCollection_}getFeatures(){let E;return this.featuresCollection_?E=this.featuresCollection_.getArray().slice(0):this.featuresRtree_&&(E=this.featuresRtree_.getAll(),(0,v.x)(this.nullGeometryFeatures_)||(0,_.l7)(E,Object.values(this.nullGeometryFeatures_))),E}getFeaturesAtCoordinate(E){const R=[];return this.forEachFeatureAtCoordinateDirect(E,function(N){R.push(N)}),R}getFeaturesInExtent(E,R){if(this.featuresRtree_){if(!(R&&R.canWrapX()&&this.getWrapX()))return this.featuresRtree_.getInExtent(E);const z=(0,S.MV)(E,R);return[].concat(...z.map(st=>this.featuresRtree_.getInExtent(st)))}return this.featuresCollection_?this.featuresCollection_.getArray().slice(0):[]}getClosestFeatureToCoordinate(E,R){const N=E[0],z=E[1];let st=null;const A=[NaN,NaN];let L=1/0;const w=[-1/0,-1/0,1/0,1/0];return R=R||d.uX,this.featuresRtree_.forEachInExtent(w,function(x){if(R(x)){const C=x.getGeometry(),D=L;if(L=C.closestPointXY(N,z,A,L),L<D){st=x;const Y=Math.sqrt(L);w[0]=N-Y,w[1]=z-Y,w[2]=N+Y,w[3]=z+Y}}}),st}getExtent(E){return this.featuresRtree_.getExtent(E)}getFeatureById(E){const R=this.idIndex_[E.toString()];return void 0!==R?R:null}getFeatureByUid(E){const R=this.uidIndex_[E];return void 0!==R?R:null}getFormat(){return this.format_}getOverlaps(){return this.overlaps_}getUrl(){return this.url_}handleFeatureChange_(E){const R=E.target,N=(0,P.sq)(R),z=R.getGeometry();if(z){const A=z.getExtent();N in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[N],this.featuresRtree_&&this.featuresRtree_.insert(A,R)):this.featuresRtree_&&this.featuresRtree_.update(A,R)}else N in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(R),this.nullGeometryFeatures_[N]=R);const st=R.getId();if(void 0!==st){const A=st.toString();this.idIndex_[A]!==R&&(this.removeFromIdIndex_(R),this.idIndex_[A]=R)}else this.removeFromIdIndex_(R),this.uidIndex_[N]=R;this.changed(),this.dispatchEvent(new m(r.Z.CHANGEFEATURE,R))}hasFeature(E){const R=E.getId();return void 0!==R?R in this.idIndex_:(0,P.sq)(E)in this.uidIndex_}isEmpty(){return this.featuresRtree_?this.featuresRtree_.isEmpty()&&(0,v.x)(this.nullGeometryFeatures_):!this.featuresCollection_||0===this.featuresCollection_.getLength()}loadFeatures(E,R,N){const z=this.loadedExtentsRtree_,st=this.strategy_(E,R,N);for(let A=0,L=st.length;A<L;++A){const w=st[A];z.forEachInExtent(w,function(C){return(0,S.r4)(C.extent,w)})||(++this.loadingExtentsCount_,this.dispatchEvent(new m(r.Z.FEATURESLOADSTART)),this.loader_.call(this,w,R,N,C=>{--this.loadingExtentsCount_,this.dispatchEvent(new m(r.Z.FEATURESLOADEND,void 0,C))},()=>{--this.loadingExtentsCount_,this.dispatchEvent(new m(r.Z.FEATURESLOADERROR))}),z.insert(w,{extent:w.slice()}))}this.loading=!(this.loader_.length<4)&&this.loadingExtentsCount_>0}refresh(){this.clear(!0),this.loadedExtentsRtree_.clear(),super.refresh()}removeLoadedExtent(E){const R=this.loadedExtentsRtree_;let N;R.forEachInExtent(E,function(z){if((0,S.fS)(z.extent,E))return N=z,!0}),N&&R.remove(N)}removeFeature(E){if(!E)return;const R=(0,P.sq)(E);R in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[R]:this.featuresRtree_&&this.featuresRtree_.remove(E),this.removeFeatureInternal(E)&&this.changed()}removeFeatureInternal(E){const R=(0,P.sq)(E),N=this.featureChangeKeys_[R];if(!N)return;N.forEach(n.bN),delete this.featureChangeKeys_[R];const z=E.getId();return void 0!==z&&delete this.idIndex_[z.toString()],delete this.uidIndex_[R],this.dispatchEvent(new m(r.Z.REMOVEFEATURE,E)),E}removeFromIdIndex_(E){let R=!1;for(const N in this.idIndex_)if(this.idIndex_[N]===E){delete this.idIndex_[N],R=!0;break}return R}setLoader(E){this.loader_=E}setUrl(E){(0,l.h)(this.format_,7),this.url_=E,this.setLoader((0,g.Be)(E,this.format_))}}},7698:(jt,ht,a)=>{"use strict";a.d(ht,{Z:()=>W});const W={ADDFEATURE:"addfeature",CHANGEFEATURE:"changefeature",CLEAR:"clear",REMOVEFEATURE:"removefeature",FEATURESLOADSTART:"featuresloadstart",FEATURESLOADEND:"featuresloadend",FEATURESLOADERROR:"featuresloaderror"}},2889:(jt,ht,a)=>{"use strict";a.d(ht,{Z:()=>I,I:()=>O});var W=a(2431),F=a(6381),k=a(5399);const Z=class G extends F.Z{constructor(R,N,z,st,A,L){super(R,N,L),this.extent=null,this.format_=st,this.features_=null,this.projection=null,this.tileLoadFunction_=A,this.url_=z,this.key=z}getFormat(){return this.format_}getFeatures(){return this.features_}load(){this.state==k.Z.IDLE&&(this.setState(k.Z.LOADING),this.tileLoadFunction_(this,this.url_),this.loader_&&this.loader_(this.extent,this.resolution,this.projection))}onLoad(R,N){this.setFeatures(R)}onError(){this.setState(k.Z.ERROR)}setFeatures(R){this.features_=R,this.setState(k.Z.LOADED)}setLoader(R){this.loader_=R}};var b=a(8525),S=a(8398),P=a(6946),v=a(4211),f=a(3089);const u=[],r=class c extends F.Z{constructor(R,N,z,st){super(R,N,{transition:0}),this.context_={},this.executorGroups={},this.declutterExecutorGroups={},this.loadingSourceTiles=0,this.hitDetectionImageData={},this.replayState_={},this.sourceTiles=[],this.errorTileKeys={},this.getSourceTiles=st.bind(void 0,this),this.wrappedTileCoord=z}getContext(R){const N=(0,f.sq)(R);return N in this.context_||(this.context_[N]=(0,v.E4)(1,1,u)),this.context_[N]}hasContext(R){return(0,f.sq)(R)in this.context_}getImage(R){return this.hasContext(R)?this.getContext(R).canvas:null}getReplayState(R){const N=(0,f.sq)(R);return N in this.replayState_||(this.replayState_[N]={dirty:!1,renderedRenderOrder:null,renderedResolution:NaN,renderedRevision:-1,renderedTileResolution:NaN,renderedTileRevision:-1,renderedTileZ:-1}),this.replayState_[N]}load(){this.getSourceTiles()}release(){for(const R in this.context_){const N=this.context_[R];(0,v.jy)(N),u.push(N.canvas),delete this.context_[R]}super.release()}};var d=a(8220),e=a(1316),l=a(1180),_=a(3936),n=a(5526),g=a(6634),m=a(7298);const I=class y extends P.Z{constructor(R){const N=R.projection||"EPSG:3857",z=R.extent||(0,l.Tl)(N),st=R.tileGrid||(0,l.dl)({extent:z,maxResolution:R.maxResolution,maxZoom:void 0!==R.maxZoom?R.maxZoom:22,minZoom:R.minZoom,tileSize:R.tileSize||512});super({attributions:R.attributions,attributionsCollapsible:R.attributionsCollapsible,cacheSize:R.cacheSize,interpolate:!0,opaque:!1,projection:N,state:R.state,tileGrid:st,tileLoadFunction:R.tileLoadFunction?R.tileLoadFunction:O,tileUrlFunction:R.tileUrlFunction,url:R.url,urls:R.urls,wrapX:void 0===R.wrapX||R.wrapX,transition:R.transition,zDirection:void 0===R.zDirection?1:R.zDirection}),this.format_=R.format?R.format:null,this.sourceTileCache=new b.Z(this.tileCache.highWaterMark),this.overlaps_=null==R.overlaps||R.overlaps,this.tileClass=R.tileClass?R.tileClass:Z,this.tileGrids_={}}getFeaturesInExtent(R){const N=[],z=this.tileCache;if(0===z.getCount())return N;const st=(0,_.Ul)(z.peekFirstKey())[0],A=this.tileGrid;return z.forEach(function(L){if(L.tileCoord[0]!==st||L.getState()!==k.Z.LOADED)return;const w=L.getSourceTiles();for(let x=0,C=w.length;x<C;++x){const D=w[x];if((0,e.kK)(R,A.getTileCoordExtent(D.tileCoord))){const nt=D.getFeatures();if(nt)for(let V=0,at=nt.length;V<at;++V){const ut=nt[V],Ct=ut.getGeometry();(0,e.kK)(R,Ct.getExtent())&&N.push(ut)}}}}),N}getOverlaps(){return this.overlaps_}clear(){this.tileCache.clear(),this.sourceTileCache.clear()}expireCache(R,N){const z=this.getTileCacheForProjection(R),st=Object.keys(N).reduce((A,L)=>{const w=(0,_.MY)(L),x=z.peek(w);if(x){const C=x.sourceTiles;for(let D=0,Y=C.length;D<Y;++D)A[C[D].getKey()]=!0}return A},{});super.expireCache(R,N),this.sourceTileCache.expireCache(st)}getSourceTiles(R,N,z){if(z.getState()===k.Z.IDLE){z.setState(k.Z.LOADING);const st=z.wrappedTileCoord,A=this.getTileGridForProjection(N),L=A.getTileCoordExtent(st),x=A.getResolution(st[0]);(0,e.f3)(L,-x,L);const C=this.tileGrid,D=C.getExtent();D&&(0,e.Ed)(L,D,L);const Y=C.getZForResolution(x,this.zDirection);C.forEachTileCoord(L,Y,nt=>{const V=this.tileUrlFunction(nt,R,N),at=this.sourceTileCache.containsKey(V)?this.sourceTileCache.get(V):new this.tileClass(nt,V?k.Z.IDLE:k.Z.EMPTY,V,this.format_,this.tileLoadFunction);z.sourceTiles.push(at);const ut=at.getState();if(ut<k.Z.LOADED){const Ct=vt=>{this.handleTileChange(vt);const St=at.getState();if(St===k.Z.LOADED||St===k.Z.ERROR){const bt=at.getKey();bt in z.errorTileKeys?at.getState()===k.Z.LOADED&&delete z.errorTileKeys[bt]:z.loadingSourceTiles--,St===k.Z.ERROR?z.errorTileKeys[bt]=!0:at.removeEventListener(W.Z.CHANGE,Ct),0===z.loadingSourceTiles&&z.setState((0,n.x)(z.errorTileKeys)?k.Z.LOADED:k.Z.ERROR)}};at.addEventListener(W.Z.CHANGE,Ct),z.loadingSourceTiles++}ut===k.Z.IDLE&&(at.extent=C.getTileCoordExtent(nt),at.projection=N,at.resolution=C.getResolution(nt[0]),this.sourceTileCache.set(V,at),at.load())}),z.loadingSourceTiles||z.setState(z.sourceTiles.some(nt=>nt.getState()===k.Z.ERROR)?k.Z.ERROR:k.Z.LOADED)}return z.sourceTiles}getTile(R,N,z,st,A){const L=(0,_.lg)(R,N,z),w=this.getKey();let x;if(this.tileCache.containsKey(L)&&(x=this.tileCache.get(L),x.key===w))return x;const C=[R,N,z];let D=this.getTileCoordForTileUrlFunction(C,A);const Y=this.getTileGrid().getExtent(),nt=this.getTileGridForProjection(A);if(D&&Y){const ut=nt.getTileCoordExtent(D);(0,e.f3)(ut,-nt.getResolution(R),ut),(0,e.kK)(Y,ut)||(D=null)}let V=!0;if(null!==D){const ut=this.tileGrid,Ct=nt.getResolution(R),vt=ut.getZForResolution(Ct,1),St=nt.getTileCoordExtent(D);(0,e.f3)(St,-Ct,St),ut.forEachTileCoord(St,vt,bt=>{V=V&&!this.tileUrlFunction(bt,st,A)})}const at=new r(C,V?k.Z.EMPTY:k.Z.IDLE,D,this.getSourceTiles.bind(this,st,A));return at.key=w,x?(at.interimTile=x,at.refreshInterimChain(),this.tileCache.replace(L,at)):this.tileCache.set(L,at),at}getTileGridForProjection(R){const N=R.getCode();let z=this.tileGrids_[N];if(!z){const st=this.tileGrid,A=st.getResolutions().slice(),L=A.map(function(C,D){return st.getOrigin(D)}),w=A.map(function(C,D){return st.getTileSize(D)}),x=d.e+1;for(let C=A.length;C<x;++C)A.push(A[C-1]/2),L.push(L[C-1]),w.push(w[C-1]);z=new S.Z({extent:st.getExtent(),origins:L,resolutions:A,tileSizes:w}),this.tileGrids_[N]=z}return z}getTilePixelRatio(R){return R}getTilePixelSize(R,N,z){const st=this.getTileGridForProjection(z),A=(0,m.Pq)(st.getTileSize(R),this.tmpSize);return[Math.round(A[0]*N),Math.round(A[1]*N)]}updateCacheSize(R,N){super.updateCacheSize(2*R,N),this.sourceTileCache.highWaterMark=this.getTileCacheForProjection(N).highWaterMark}};function O(E,R){E.setLoader(function(N,z,st){(0,g.ov)(R,E.getFormat(),N,z,st,E.onLoad.bind(E),E.onError.bind(E))})}},3640:(jt,ht,a)=>{"use strict";a.d(ht,{Z:()=>G});var W=a(719),F=a(1180);const G=class k extends W.Z{constructor(b){const S=void 0!==(b=b||{}).projection?b.projection:"EPSG:3857",P=void 0!==b.tileGrid?b.tileGrid:(0,F.dl)({extent:(0,F.Tl)(S),maxResolution:b.maxResolution,maxZoom:b.maxZoom,minZoom:b.minZoom,tileSize:b.tileSize});super({attributions:b.attributions,cacheSize:b.cacheSize,crossOrigin:b.crossOrigin,interpolate:b.interpolate,opaque:b.opaque,projection:S,reprojectionErrorThreshold:b.reprojectionErrorThreshold,tileGrid:P,tileLoadFunction:b.tileLoadFunction,tilePixelRatio:b.tilePixelRatio,tileUrlFunction:b.tileUrlFunction,url:b.url,urls:b.urls,wrapX:void 0===b.wrapX||b.wrapX,transition:b.transition,attributionsCollapsible:b.attributionsCollapsible,zDirection:b.zDirection}),this.gutter_=void 0!==b.gutter?b.gutter:0}getGutter(){return this.gutter_}}},3271:(jt,ht,a)=>{"use strict";a.d(ht,{e:()=>W});const W="1.3.0"},9258:(jt,ht,a)=>{"use strict";function W(k,G,Z){const b=void 0!==Z?k.toFixed(Z):""+k;let S=b.indexOf(".");return S=-1===S?b.length:S,S>G?b:new Array(1+G-S).join("0")+b}function F(k,G){const Z=(""+k).split("."),b=(""+G).split(".");for(let S=0;S<Math.max(Z.length,b.length);S++){const P=parseInt(Z[S]||"0",10),v=parseInt(b[S]||"0",10);if(P>v)return 1;if(v>P)return-1}return 0}a.d(ht,{n:()=>F,v:()=>W})},3009:(jt,ht,a)=>{"use strict";a.d(ht,{Z:()=>k});var W=a(8929);class F extends W.Z{constructor(Z){super({points:1/0,fill:(Z=Z||{radius:5}).fill,radius:Z.radius,stroke:Z.stroke,scale:void 0!==Z.scale?Z.scale:1,rotation:void 0!==Z.rotation?Z.rotation:0,rotateWithView:void 0!==Z.rotateWithView&&Z.rotateWithView,displacement:void 0!==Z.displacement?Z.displacement:[0,0],declutterMode:Z.declutterMode})}clone(){const Z=this.getScale(),b=new F({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),scale:Array.isArray(Z)?Z.slice():Z,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return b.setOpacity(this.getOpacity()),b}setRadius(Z){this.radius_=Z,this.render()}}const k=F},5505:(jt,ht,a)=>{"use strict";a.d(ht,{Z:()=>F});class W{constructor(G){this.color_=void 0!==(G=G||{}).color?G.color:null}clone(){const G=this.getColor();return new W({color:Array.isArray(G)?G.slice():G||void 0})}getColor(){return this.color_}setColor(G){this.color_=G}}const F=W},1485:(jt,ht,a)=>{"use strict";a.d(ht,{Z:()=>_});var W=a(2431),F=a(4847),k=a(3837),G=a(9818),Z=a(9219),b=a(9608),S=a(4211),P=a(8823),v=a(4499);let f=null;class u extends b.Z{constructor(g,m,y,I,O,E){super(),this.hitDetectionImage_=null,this.image_=g,this.crossOrigin_=I,this.canvas_={},this.color_=E,this.unlisten_=null,this.imageState_=O,this.size_=y,this.src_=m}initializeImage_(){this.image_=new Image,null!==this.crossOrigin_&&(this.image_.crossOrigin=this.crossOrigin_)}isTainted_(){if(void 0===this.tainted_&&this.imageState_===F.Z.LOADED){f||(f=(0,S.E4)(1,1,void 0,{willReadFrequently:!0})),f.drawImage(this.image_,0,0);try{f.getImageData(0,0,1,1),this.tainted_=!1}catch{f=null,this.tainted_=!0}}return!0===this.tainted_}dispatchChangeEvent_(){this.dispatchEvent(W.Z.CHANGE)}handleImageError_(){this.imageState_=F.Z.ERROR,this.unlistenImage_(),this.dispatchChangeEvent_()}handleImageLoad_(){this.imageState_=F.Z.LOADED,this.size_?(this.image_.width=this.size_[0],this.image_.height=this.size_[1]):this.size_=[this.image_.width,this.image_.height],this.unlistenImage_(),this.dispatchChangeEvent_()}getImage(g){return this.image_||this.initializeImage_(),this.replaceColor_(g),this.canvas_[g]?this.canvas_[g]:this.image_}getPixelRatio(g){return this.replaceColor_(g),this.canvas_[g]?g:1}getImageState(){return this.imageState_}getHitDetectionImage(){if(this.image_||this.initializeImage_(),!this.hitDetectionImage_)if(this.isTainted_()){const g=this.size_[0],m=this.size_[1],y=(0,S.E4)(g,m);y.fillRect(0,0,g,m),this.hitDetectionImage_=y.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_}getSize(){return this.size_}getSrc(){return this.src_}load(){if(this.imageState_===F.Z.IDLE){this.image_||this.initializeImage_(),this.imageState_=F.Z.LOADING;try{this.image_.src=this.src_}catch{this.handleImageError_()}this.unlisten_=(0,v.K)(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this))}}replaceColor_(g){if(!this.color_||this.canvas_[g]||this.imageState_!==F.Z.LOADED)return;const m=this.image_,y=document.createElement("canvas");y.width=Math.ceil(m.width*g),y.height=Math.ceil(m.height*g);const I=y.getContext("2d");I.scale(g,g),I.drawImage(m,0,0),I.globalCompositeOperation="multiply",I.fillStyle=(0,G.XC)(this.color_),I.fillRect(0,0,y.width/g,y.height/g),I.globalCompositeOperation="destination-in",I.drawImage(m,0,0),this.canvas_[g]=y}unlistenImage_(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}}var d=a(3089);function e(n,g,m,y){return void 0!==m&&void 0!==y?[m/n,y/g]:void 0!==m?m/n:void 0!==y?y/g:1}class l extends k.Z{constructor(g){super({opacity:void 0!==(g=g||{}).opacity?g.opacity:1,rotation:void 0!==g.rotation?g.rotation:0,scale:void 0!==g.scale?g.scale:1,displacement:void 0!==g.displacement?g.displacement:[0,0],rotateWithView:void 0!==g.rotateWithView&&g.rotateWithView,declutterMode:g.declutterMode}),this.anchor_=void 0!==g.anchor?g.anchor:[.5,.5],this.normalizedAnchor_=null,this.anchorOrigin_=void 0!==g.anchorOrigin?g.anchorOrigin:"top-left",this.anchorXUnits_=void 0!==g.anchorXUnits?g.anchorXUnits:"fraction",this.anchorYUnits_=void 0!==g.anchorYUnits?g.anchorYUnits:"fraction",this.crossOrigin_=void 0!==g.crossOrigin?g.crossOrigin:null;const E=void 0!==g.img?g.img:null;this.imgSize_=g.imgSize;let R=g.src;(0,Z.h)(!(void 0!==R&&E),4),(0,Z.h)(!E||E&&this.imgSize_,5),(void 0===R||0===R.length)&&E&&(R=E.src||(0,d.sq)(E)),(0,Z.h)(void 0!==R&&R.length>0,6),(0,Z.h)(!((void 0!==g.width||void 0!==g.height)&&void 0!==g.scale),69);const N=void 0!==g.src?F.Z.IDLE:F.Z.LOADED;if(this.color_=void 0!==g.color?(0,G._2)(g.color):null,this.iconImage_=function c(n,g,m,y,I,O){let E=P.c.get(g,y,O);return E||(E=new u(n,g,m,y,I,O),P.c.set(g,y,O,E)),E}(E,R,void 0!==this.imgSize_?this.imgSize_:null,this.crossOrigin_,N,this.color_),this.offset_=void 0!==g.offset?g.offset:[0,0],this.offsetOrigin_=void 0!==g.offsetOrigin?g.offsetOrigin:"top-left",this.origin_=null,this.size_=void 0!==g.size?g.size:null,void 0!==g.width||void 0!==g.height){let z,st;if(g.size)[z,st]=g.size;else{const A=this.getImage(1);if(!(A instanceof HTMLCanvasElement||A.src&&A.complete)){this.initialOptions_=g;const L=()=>{if(this.unlistenImageChange(L),!this.initialOptions_)return;const w=this.iconImage_.getSize();this.setScale(e(w[0],w[1],g.width,g.height))};return void this.listenImageChange(L)}z=A.width,st=A.height}void 0!==z&&this.setScale(e(z,st,g.width,g.height))}}clone(){let g,m,y;return this.initialOptions_?(m=this.initialOptions_.width,y=this.initialOptions_.height):(g=this.getScale(),g=Array.isArray(g)?g.slice():g),new l({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,crossOrigin:this.crossOrigin_,imgSize:this.imgSize_,offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,opacity:this.getOpacity(),rotateWithView:this.getRotateWithView(),rotation:this.getRotation(),scale:g,width:m,height:y,size:null!==this.size_?this.size_.slice():void 0,src:this.getSrc(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getAnchor(){let g=this.normalizedAnchor_;if(!g){g=this.anchor_;const I=this.getSize();if("fraction"==this.anchorXUnits_||"fraction"==this.anchorYUnits_){if(!I)return null;g=this.anchor_.slice(),"fraction"==this.anchorXUnits_&&(g[0]*=I[0]),"fraction"==this.anchorYUnits_&&(g[1]*=I[1])}if("top-left"!=this.anchorOrigin_){if(!I)return null;g===this.anchor_&&(g=this.anchor_.slice()),("top-right"==this.anchorOrigin_||"bottom-right"==this.anchorOrigin_)&&(g[0]=-g[0]+I[0]),("bottom-left"==this.anchorOrigin_||"bottom-right"==this.anchorOrigin_)&&(g[1]=-g[1]+I[1])}this.normalizedAnchor_=g}const m=this.getDisplacement(),y=this.getScaleArray();return[g[0]-m[0]/y[0],g[1]+m[1]/y[1]]}setAnchor(g){this.anchor_=g,this.normalizedAnchor_=null}getColor(){return this.color_}getImage(g){return this.iconImage_.getImage(g)}getPixelRatio(g){return this.iconImage_.getPixelRatio(g)}getImageSize(){return this.iconImage_.getSize()}getImageState(){return this.iconImage_.getImageState()}getHitDetectionImage(){return this.iconImage_.getHitDetectionImage()}getOrigin(){if(this.origin_)return this.origin_;let g=this.offset_;if("top-left"!=this.offsetOrigin_){const m=this.getSize(),y=this.iconImage_.getSize();if(!m||!y)return null;g=g.slice(),("top-right"==this.offsetOrigin_||"bottom-right"==this.offsetOrigin_)&&(g[0]=y[0]-m[0]-g[0]),("bottom-left"==this.offsetOrigin_||"bottom-right"==this.offsetOrigin_)&&(g[1]=y[1]-m[1]-g[1])}return this.origin_=g,this.origin_}getSrc(){return this.iconImage_.getSrc()}getSize(){return this.size_?this.size_:this.iconImage_.getSize()}getWidth(){const g=this.getScaleArray();return this.size_?this.size_[0]*g[0]:this.iconImage_.getImageState()==F.Z.LOADED?this.iconImage_.getSize()[0]*g[0]:void 0}getHeight(){const g=this.getScaleArray();return this.size_?this.size_[1]*g[1]:this.iconImage_.getImageState()==F.Z.LOADED?this.iconImage_.getSize()[1]*g[1]:void 0}setScale(g){delete this.initialOptions_,super.setScale(g)}listenImageChange(g){this.iconImage_.addEventListener(W.Z.CHANGE,g)}load(){this.iconImage_.load()}unlistenImageChange(g){this.iconImage_.removeEventListener(W.Z.CHANGE,g)}}const _=l},8823:(jt,ht,a)=>{"use strict";a.d(ht,{c:()=>Z});var W=a(9818);function k(b,S,P){return S+":"+b+":"+(P?(0,W.XC)(P):"null")}const Z=new class F{constructor(){this.cache_={},this.cacheSize_=0,this.maxCacheSize_=32}clear(){this.cache_={},this.cacheSize_=0}canExpireCache(){return this.cacheSize_>this.maxCacheSize_}expire(){if(this.canExpireCache()){let S=0;for(const P in this.cache_)!(3&S++)&&!this.cache_[P].hasListener()&&(delete this.cache_[P],--this.cacheSize_)}}get(S,P,v){const f=k(S,P,v);return f in this.cache_?this.cache_[f]:null}set(S,P,v,f){const u=k(S,P,v);this.cache_[u]=f,++this.cacheSize_}setSize(S){this.maxCacheSize_=S,this.expire()}}},3837:(jt,ht,a)=>{"use strict";a.d(ht,{Z:()=>G});var W=a(3089),F=a(7298);class k{constructor(b){this.opacity_=b.opacity,this.rotateWithView_=b.rotateWithView,this.rotation_=b.rotation,this.scale_=b.scale,this.scaleArray_=(0,F.Pq)(b.scale),this.displacement_=b.displacement,this.declutterMode_=b.declutterMode}clone(){const b=this.getScale();return new k({opacity:this.getOpacity(),scale:Array.isArray(b)?b.slice():b,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getOpacity(){return this.opacity_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getDisplacement(){return this.displacement_}getDeclutterMode(){return this.declutterMode_}getAnchor(){return(0,W.O3)()}getImage(b){return(0,W.O3)()}getHitDetectionImage(){return(0,W.O3)()}getPixelRatio(b){return 1}getImageState(){return(0,W.O3)()}getImageSize(){return(0,W.O3)()}getOrigin(){return(0,W.O3)()}getSize(){return(0,W.O3)()}setDisplacement(b){this.displacement_=b}setOpacity(b){this.opacity_=b}setRotateWithView(b){this.rotateWithView_=b}setRotation(b){this.rotation_=b}setScale(b){this.scale_=b,this.scaleArray_=(0,F.Pq)(b)}listenImageChange(b){(0,W.O3)()}load(){(0,W.O3)()}unlistenImageChange(b){(0,W.O3)()}}const G=k},8929:(jt,ht,a)=>{"use strict";a.d(ht,{Z:()=>P});var W=a(4847),F=a(3837),k=a(9818),G=a(3836),Z=a(4211),b=a(6380);class S extends F.Z{constructor(f){super({opacity:1,rotateWithView:void 0!==f.rotateWithView&&f.rotateWithView,rotation:void 0!==f.rotation?f.rotation:0,scale:void 0!==f.scale?f.scale:1,displacement:void 0!==f.displacement?f.displacement:[0,0],declutterMode:f.declutterMode}),this.canvas_=void 0,this.hitDetectionCanvas_=null,this.fill_=void 0!==f.fill?f.fill:null,this.origin_=[0,0],this.points_=f.points,this.radius_=void 0!==f.radius?f.radius:f.radius1,this.radius2_=f.radius2,this.angle_=void 0!==f.angle?f.angle:0,this.stroke_=void 0!==f.stroke?f.stroke:null,this.size_=null,this.renderOptions_=null,this.render()}clone(){const f=this.getScale(),u=new S({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(f)?f.slice():f,displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return u.setOpacity(this.getOpacity()),u}getAnchor(){const f=this.size_;if(!f)return null;const u=this.getDisplacement(),c=this.getScaleArray();return[f[0]/2-u[0]/c[0],f[1]/2+u[1]/c[1]]}getAngle(){return this.angle_}getFill(){return this.fill_}setFill(f){this.fill_=f,this.render()}getHitDetectionImage(){return this.hitDetectionCanvas_||this.createHitDetectionCanvas_(this.renderOptions_),this.hitDetectionCanvas_}getImage(f){let u=this.canvas_[f];if(!u){const c=this.renderOptions_,r=(0,Z.E4)(c.size*f,c.size*f);this.draw_(c,r,f),u=r.canvas,this.canvas_[f]=u}return u}getPixelRatio(f){return f}getImageSize(){return this.size_}getImageState(){return W.Z.LOADED}getOrigin(){return this.origin_}getPoints(){return this.points_}getRadius(){return this.radius_}getRadius2(){return this.radius2_}getSize(){return this.size_}getStroke(){return this.stroke_}setStroke(f){this.stroke_=f,this.render()}listenImageChange(f){}load(){}unlistenImageChange(f){}calculateLineJoinSize_(f,u,c){if(0===u||this.points_===1/0||"bevel"!==f&&"miter"!==f)return u;let r=this.radius_,d=void 0===this.radius2_?r:this.radius2_;if(r<d){const w=r;r=d,d=w}const l=2*Math.PI/(void 0===this.radius2_?this.points_:2*this.points_),_=d*Math.sin(l),g=r-Math.sqrt(d*d-_*_),m=Math.sqrt(_*_+g*g),y=m/_;if("miter"===f&&y<=c)return y*u;const I=u/2/y,O=u/2*(g/m),R=Math.sqrt((r+I)*(r+I)+O*O)-r;if(void 0===this.radius2_||"bevel"===f)return 2*R;const N=r*Math.sin(l),st=d-Math.sqrt(r*r-N*N),L=Math.sqrt(N*N+st*st)/N;return L<=c?2*Math.max(R,L*u/2-d-r):2*R}createRenderOptions(){let d,f=b.rc,u=0,c=null,r=0,e=0;this.stroke_&&(d=this.stroke_.getColor(),null===d&&(d=b.Tx),d=(0,G.y)(d),e=this.stroke_.getWidth(),void 0===e&&(e=b.yC),c=this.stroke_.getLineDash(),r=this.stroke_.getLineDashOffset(),f=this.stroke_.getLineJoin(),void 0===f&&(f=b.rc),u=this.stroke_.getMiterLimit(),void 0===u&&(u=b.V4));const l=this.calculateLineJoinSize_(f,e,u),_=Math.max(this.radius_,this.radius2_||0);return{strokeStyle:d,strokeWidth:e,size:Math.ceil(2*_+l),lineDash:c,lineDashOffset:r,lineJoin:f,miterLimit:u}}render(){this.renderOptions_=this.createRenderOptions();const f=this.renderOptions_.size;this.canvas_={},this.size_=[f,f]}draw_(f,u,c){if(u.scale(c,c),u.translate(f.size/2,f.size/2),this.createPath_(u),this.fill_){let r=this.fill_.getColor();null===r&&(r=b.bL),u.fillStyle=(0,G.y)(r),u.fill()}this.stroke_&&(u.strokeStyle=f.strokeStyle,u.lineWidth=f.strokeWidth,f.lineDash&&(u.setLineDash(f.lineDash),u.lineDashOffset=f.lineDashOffset),u.lineJoin=f.lineJoin,u.miterLimit=f.miterLimit,u.stroke())}createHitDetectionCanvas_(f){if(this.fill_){let u=this.fill_.getColor(),c=0;if("string"==typeof u&&(u=(0,k._2)(u)),null===u?c=1:Array.isArray(u)&&(c=4===u.length?u[3]:1),0===c){const r=(0,Z.E4)(f.size,f.size);this.hitDetectionCanvas_=r.canvas,this.drawHitDetectionCanvas_(f,r)}}this.hitDetectionCanvas_||(this.hitDetectionCanvas_=this.getImage(1))}createPath_(f){let u=this.points_;const c=this.radius_;if(u===1/0)f.arc(0,0,c,0,2*Math.PI);else{const r=void 0===this.radius2_?c:this.radius2_;void 0!==this.radius2_&&(u*=2);const d=this.angle_-Math.PI/2,e=2*Math.PI/u;for(let l=0;l<u;l++){const _=d+l*e,n=l%2==0?c:r;f.lineTo(n*Math.cos(_),n*Math.sin(_))}f.closePath()}}drawHitDetectionCanvas_(f,u){u.translate(f.size/2,f.size/2),this.createPath_(u),u.fillStyle=b.bL,u.fill(),this.stroke_&&(u.strokeStyle=f.strokeStyle,u.lineWidth=f.strokeWidth,f.lineDash&&(u.setLineDash(f.lineDash),u.lineDashOffset=f.lineDashOffset),u.lineJoin=f.lineJoin,u.miterLimit=f.miterLimit,u.stroke())}}const P=S},4396:(jt,ht,a)=>{"use strict";a.d(ht,{Z:()=>F});class W{constructor(G){this.color_=void 0!==(G=G||{}).color?G.color:null,this.lineCap_=G.lineCap,this.lineDash_=void 0!==G.lineDash?G.lineDash:null,this.lineDashOffset_=G.lineDashOffset,this.lineJoin_=G.lineJoin,this.miterLimit_=G.miterLimit,this.width_=G.width}clone(){const G=this.getColor();return new W({color:Array.isArray(G)?G.slice():G||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})}getColor(){return this.color_}getLineCap(){return this.lineCap_}getLineDash(){return this.lineDash_}getLineDashOffset(){return this.lineDashOffset_}getLineJoin(){return this.lineJoin_}getMiterLimit(){return this.miterLimit_}getWidth(){return this.width_}setColor(G){this.color_=G}setLineCap(G){this.lineCap_=G}setLineDash(G){this.lineDash_=G}setLineDashOffset(G){this.lineDashOffset_=G}setLineJoin(G){this.lineJoin_=G}setMiterLimit(G){this.miterLimit_=G}setWidth(G){this.width_=G}}const F=W},1949:(jt,ht,a)=>{"use strict";a.d(ht,{J$:()=>b,ZP:()=>u,yF:()=>P});var W=a(3009),F=a(5505),k=a(4396),G=a(9219);class Z{constructor(r){r=r||{},this.geometry_=null,this.geometryFunction_=f,void 0!==r.geometry&&this.setGeometry(r.geometry),this.fill_=void 0!==r.fill?r.fill:null,this.image_=void 0!==r.image?r.image:null,this.renderer_=void 0!==r.renderer?r.renderer:null,this.hitDetectionRenderer_=void 0!==r.hitDetectionRenderer?r.hitDetectionRenderer:null,this.stroke_=void 0!==r.stroke?r.stroke:null,this.text_=void 0!==r.text?r.text:null,this.zIndex_=r.zIndex}clone(){let r=this.getGeometry();return r&&"object"==typeof r&&(r=r.clone()),new Z({geometry:r,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,renderer:this.getRenderer(),stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})}getRenderer(){return this.renderer_}setRenderer(r){this.renderer_=r}setHitDetectionRenderer(r){this.hitDetectionRenderer_=r}getHitDetectionRenderer(){return this.hitDetectionRenderer_}getGeometry(){return this.geometry_}getGeometryFunction(){return this.geometryFunction_}getFill(){return this.fill_}setFill(r){this.fill_=r}getImage(){return this.image_}setImage(r){this.image_=r}getStroke(){return this.stroke_}setStroke(r){this.stroke_=r}getText(){return this.text_}setText(r){this.text_=r}getZIndex(){return this.zIndex_}setGeometry(r){"function"==typeof r?this.geometryFunction_=r:"string"==typeof r?this.geometryFunction_=function(d){return d.get(r)}:r?void 0!==r&&(this.geometryFunction_=function(){return r}):this.geometryFunction_=f,this.geometry_=r}setZIndex(r){this.zIndex_=r}}function b(c){let r;if("function"==typeof c)r=c;else{let d;Array.isArray(c)?d=c:((0,G.h)("function"==typeof c.getZIndex,41),d=[c]),r=function(){return d}}return r}let S=null;function P(c,r){if(!S){const d=new F.Z({color:"rgba(255,255,255,0.4)"}),e=new k.Z({color:"#3399CC",width:1.25});S=[new Z({image:new W.Z({fill:d,stroke:e,radius:5}),fill:d,stroke:e})]}return S}function f(c){return c.getGeometry()}const u=Z},7202:(jt,ht,a)=>{"use strict";a.d(ht,{Z:()=>Z});var W=a(5505),F=a(7298);class G{constructor(S){this.font_=(S=S||{}).font,this.rotation_=S.rotation,this.rotateWithView_=S.rotateWithView,this.scale_=S.scale,this.scaleArray_=(0,F.Pq)(void 0!==S.scale?S.scale:1),this.text_=S.text,this.textAlign_=S.textAlign,this.justify_=S.justify,this.repeat_=S.repeat,this.textBaseline_=S.textBaseline,this.fill_=void 0!==S.fill?S.fill:new W.Z({color:"#333"}),this.maxAngle_=void 0!==S.maxAngle?S.maxAngle:Math.PI/4,this.placement_=void 0!==S.placement?S.placement:"point",this.overflow_=!!S.overflow,this.stroke_=void 0!==S.stroke?S.stroke:null,this.offsetX_=void 0!==S.offsetX?S.offsetX:0,this.offsetY_=void 0!==S.offsetY?S.offsetY:0,this.backgroundFill_=S.backgroundFill?S.backgroundFill:null,this.backgroundStroke_=S.backgroundStroke?S.backgroundStroke:null,this.padding_=void 0===S.padding?null:S.padding}clone(){const S=this.getScale();return new G({font:this.getFont(),placement:this.getPlacement(),repeat:this.getRepeat(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(S)?S.slice():S,text:this.getText(),textAlign:this.getTextAlign(),justify:this.getJustify(),textBaseline:this.getTextBaseline(),fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():void 0,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0,padding:this.getPadding()||void 0})}getOverflow(){return this.overflow_}getFont(){return this.font_}getMaxAngle(){return this.maxAngle_}getPlacement(){return this.placement_}getRepeat(){return this.repeat_}getOffsetX(){return this.offsetX_}getOffsetY(){return this.offsetY_}getFill(){return this.fill_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getStroke(){return this.stroke_}getText(){return this.text_}getTextAlign(){return this.textAlign_}getJustify(){return this.justify_}getTextBaseline(){return this.textBaseline_}getBackgroundFill(){return this.backgroundFill_}getBackgroundStroke(){return this.backgroundStroke_}getPadding(){return this.padding_}setOverflow(S){this.overflow_=S}setFont(S){this.font_=S}setMaxAngle(S){this.maxAngle_=S}setOffsetX(S){this.offsetX_=S}setOffsetY(S){this.offsetY_=S}setPlacement(S){this.placement_=S}setRepeat(S){this.repeat_=S}setRotateWithView(S){this.rotateWithView_=S}setFill(S){this.fill_=S}setRotation(S){this.rotation_=S}setScale(S){this.scale_=S,this.scaleArray_=(0,F.Pq)(void 0!==S?S:1)}setStroke(S){this.stroke_=S}setText(S){this.text_=S}setTextAlign(S){this.textAlign_=S}setJustify(S){this.justify_=S}setTextBaseline(S){this.textBaseline_=S}setBackgroundFill(S){this.backgroundFill_=S}setBackgroundStroke(S){this.backgroundStroke_=S}setPadding(S){this.padding_=S}}const Z=G},3936:(jt,ht,a)=>{"use strict";function W(P,v,f,u){return void 0!==u?(u[0]=P,u[1]=v,u[2]=f,u):[P,v,f]}function F(P,v,f){return P+"/"+v+"/"+f}function k(P){return F(P[0],P[1],P[2])}function G(P){const[v,f,u]=P.substring(P.lastIndexOf("/")+1,P.length).split(",").map(Number);return F(v,f,u)}function Z(P){return P.split("/").map(Number)}function b(P){return(P[1]<<P[0])+P[2]}function S(P,v){const f=P[0],u=P[1],c=P[2];if(v.getMinZoom()>f||f>v.getMaxZoom())return!1;const r=v.getFullTileRange(f);return!r||r.containsXY(u,c)}a.d(ht,{MY:()=>G,T9:()=>W,Ul:()=>Z,km:()=>k,lg:()=>F,tE:()=>S,vp:()=>b})},1180:(jt,ht,a)=>{"use strict";a.d(ht,{Cf:()=>S,Tl:()=>c,X$:()=>b,dl:()=>v});var W=a(8398),F=a(8220),k=a(7021),G=a(1316),Z=a(7298);function b(r){let d=r.getDefaultTileGrid();return d||(d=function u(r,d,e,l){return function P(r,d,e,l){l=void 0!==l?l:"top-left";const _=f(r,d,e);return new W.Z({extent:r,origin:(0,G.g0)(r,l),resolutions:_,tileSize:e})}(c(r),d,e,l)}(r),r.setDefaultTileGrid(d)),d}function S(r,d,e){const l=d[0],_=r.getTileCoordCenter(d),n=c(e);if(!(0,G.b8)(n,_)){const g=(0,G.dz)(n),m=Math.ceil((n[0]-_[0])/g);return _[0]+=g*m,r.getTileCoordForCoordAndZ(_,l)}return d}function v(r){const d=r||{},e=d.extent||(0,k.U2)("EPSG:3857").getExtent(),l={extent:e,minZoom:d.minZoom,tileSize:d.tileSize,resolutions:f(e,d.maxZoom,d.tileSize,d.maxResolution)};return new W.Z(l)}function f(r,d,e,l){d=void 0!==d?d:F.e,e=(0,Z.Pq)(void 0!==e?e:F.S);const _=(0,G.Cr)(r),n=(0,G.dz)(r);l=l>0?l:Math.max(n/e[0],_/e[1]);const g=d+1,m=new Array(g);for(let y=0;y<g;++y)m[y]=l/Math.pow(2,y);return m}function c(r){let d=(r=(0,k.U2)(r)).getExtent();if(!d){const e=180*k.Wm.degrees/r.getMetersPerUnit();d=(0,G.T9)(-e,-e,e,e)}return d}},8398:(jt,ht,a)=>{"use strict";a.d(ht,{Z:()=>r});var W=a(6025),F=a(8220),k=a(9219),G=a(3026),Z=a(1316),b=a(3936),S=a(4505),P=a(9363),v=a(7298);const f=[0,0,0],r=class c{constructor(e){let l;if(this.minZoom=void 0!==e.minZoom?e.minZoom:0,this.resolutions_=e.resolutions,(0,k.h)((0,P.pT)(this.resolutions_,function(n,g){return g-n},!0),17),!e.origins)for(let n=0,g=this.resolutions_.length-1;n<g;++n)if(l){if(this.resolutions_[n]/this.resolutions_[n+1]!==l){l=void 0;break}}else l=this.resolutions_[n]/this.resolutions_[n+1];this.zoomFactor_=l,this.maxZoom=this.resolutions_.length-1,this.origin_=void 0!==e.origin?e.origin:null,this.origins_=null,void 0!==e.origins&&(this.origins_=e.origins,(0,k.h)(this.origins_.length==this.resolutions_.length,20));const _=e.extent;void 0!==_&&!this.origin_&&!this.origins_&&(this.origin_=(0,Z.rL)(_)),(0,k.h)(!this.origin_&&this.origins_||this.origin_&&!this.origins_,18),this.tileSizes_=null,void 0!==e.tileSizes&&(this.tileSizes_=e.tileSizes,(0,k.h)(this.tileSizes_.length==this.resolutions_.length,19)),this.tileSize_=void 0!==e.tileSize?e.tileSize:this.tileSizes_?null:F.S,(0,k.h)(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,22),this.extent_=void 0!==_?_:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],this.tmpExtent_=[0,0,0,0],void 0!==e.sizes?this.fullTileRanges_=e.sizes.map(function(n,g){const m=new W.Z(Math.min(0,n[0]),Math.max(n[0]-1,-1),Math.min(0,n[1]),Math.max(n[1]-1,-1));if(_){const y=this.getTileRangeForExtentAndZ(_,g);m.minX=Math.max(y.minX,m.minX),m.maxX=Math.min(y.maxX,m.maxX),m.minY=Math.max(y.minY,m.minY),m.maxY=Math.min(y.maxY,m.maxY)}return m},this):_&&this.calculateTileRanges_(_)}forEachTileCoord(e,l,_){const n=this.getTileRangeForExtentAndZ(e,l);for(let g=n.minX,m=n.maxX;g<=m;++g)for(let y=n.minY,I=n.maxY;y<=I;++y)_([l,g,y])}forEachTileCoordParentTileRange(e,l,_,n){let g,m,y,I=null,O=e[0]-1;for(2===this.zoomFactor_?(m=e[1],y=e[2]):I=this.getTileCoordExtent(e,n);O>=this.minZoom;){if(2===this.zoomFactor_?(m=Math.floor(m/2),y=Math.floor(y/2),g=(0,W.T)(m,m,y,y,_)):g=this.getTileRangeForExtentAndZ(I,O,_),l(O,g))return!0;--O}return!1}getExtent(){return this.extent_}getMaxZoom(){return this.maxZoom}getMinZoom(){return this.minZoom}getOrigin(e){return this.origin_?this.origin_:this.origins_[e]}getResolution(e){return this.resolutions_[e]}getResolutions(){return this.resolutions_}getTileCoordChildTileRange(e,l,_){if(e[0]<this.maxZoom){if(2===this.zoomFactor_){const g=2*e[1],m=2*e[2];return(0,W.T)(g,g+1,m,m+1,l)}const n=this.getTileCoordExtent(e,_||this.tmpExtent_);return this.getTileRangeForExtentAndZ(n,e[0]+1,l)}return null}getTileRangeForTileCoordAndZ(e,l,_){if(l>this.maxZoom||l<this.minZoom)return null;const n=e[0],g=e[1],m=e[2];if(l===n)return(0,W.T)(g,m,g,m,_);if(this.zoomFactor_){const I=Math.pow(this.zoomFactor_,l-n),O=Math.floor(g*I),E=Math.floor(m*I);if(l<n)return(0,W.T)(O,O,E,E,_);const R=Math.floor(I*(g+1))-1,N=Math.floor(I*(m+1))-1;return(0,W.T)(O,R,E,N,_)}const y=this.getTileCoordExtent(e,this.tmpExtent_);return this.getTileRangeForExtentAndZ(y,l,_)}getTileRangeForExtentAndZ(e,l,_){this.getTileCoordForXYAndZ_(e[0],e[3],l,!1,f);const n=f[1],g=f[2];return this.getTileCoordForXYAndZ_(e[2],e[1],l,!0,f),(0,W.T)(n,f[1],g,f[2],_)}getTileCoordCenter(e){const l=this.getOrigin(e[0]),_=this.getResolution(e[0]),n=(0,v.Pq)(this.getTileSize(e[0]),this.tmpSize_);return[l[0]+(e[1]+.5)*n[0]*_,l[1]-(e[2]+.5)*n[1]*_]}getTileCoordExtent(e,l){const _=this.getOrigin(e[0]),n=this.getResolution(e[0]),g=(0,v.Pq)(this.getTileSize(e[0]),this.tmpSize_),m=_[0]+e[1]*g[0]*n,y=_[1]-(e[2]+1)*g[1]*n;return(0,Z.T9)(m,y,m+g[0]*n,y+g[1]*n,l)}getTileCoordForCoordAndResolution(e,l,_){return this.getTileCoordForXYAndResolution_(e[0],e[1],l,!1,_)}getTileCoordForXYAndResolution_(e,l,_,n,g){const m=this.getZForResolution(_),y=_/this.getResolution(m),I=this.getOrigin(m),O=(0,v.Pq)(this.getTileSize(m),this.tmpSize_);let E=y*(e-I[0])/_/O[0],R=y*(I[1]-l)/_/O[1];return n?(E=(0,G.mD)(E,5)-1,R=(0,G.mD)(R,5)-1):(E=(0,G.GW)(E,5),R=(0,G.GW)(R,5)),(0,b.T9)(m,E,R,g)}getTileCoordForXYAndZ_(e,l,_,n,g){const m=this.getOrigin(_),y=this.getResolution(_),I=(0,v.Pq)(this.getTileSize(_),this.tmpSize_);let O=(e-m[0])/y/I[0],E=(m[1]-l)/y/I[1];return n?(O=(0,G.mD)(O,5)-1,E=(0,G.mD)(E,5)-1):(O=(0,G.GW)(O,5),E=(0,G.GW)(E,5)),(0,b.T9)(_,O,E,g)}getTileCoordForCoordAndZ(e,l,_){return this.getTileCoordForXYAndZ_(e[0],e[1],l,!1,_)}getTileCoordResolution(e){return this.resolutions_[e[0]]}getTileSize(e){return this.tileSize_?this.tileSize_:this.tileSizes_[e]}getFullTileRange(e){return this.fullTileRanges_?this.fullTileRanges_[e]:this.extent_?this.getTileRangeForExtentAndZ(this.extent_,e):null}getZForResolution(e,l){const _=(0,P.h7)(this.resolutions_,e,l||0);return(0,G.uZ)(_,this.minZoom,this.maxZoom)}tileCoordIntersectsViewport(e,l){return(0,S.mV)(l,0,l.length,2,this.getTileCoordExtent(e))}calculateTileRanges_(e){const l=this.resolutions_.length,_=new Array(l);for(let n=this.minZoom;n<l;++n)_[n]=this.getTileRangeForExtentAndZ(e,n);this.fullTileRanges_=_}}},8220:(jt,ht,a)=>{"use strict";a.d(ht,{S:()=>F,e:()=>W});const W=42,F=256},7835:(jt,ht,a)=>{"use strict";a.d(ht,{Gk:()=>P,Un:()=>b,uR:()=>Z});var W=a(9219),F=a(3026),k=a(3936);function G(v,f){const u=/\{z\}/g,c=/\{x\}/g,r=/\{y\}/g,d=/\{-y\}/g;return function(e,l,_){if(e)return v.replace(u,e[0].toString()).replace(c,e[1].toString()).replace(r,e[2].toString()).replace(d,function(){const g=f.getFullTileRange(e[0]);return(0,W.h)(g,55),(g.getHeight()-e[2]-1).toString()})}}function Z(v,f){const u=v.length,c=new Array(u);for(let r=0;r<u;++r)c[r]=G(v[r],f);return b(c)}function b(v){return 1===v.length?v[0]:function(f,u,c){if(!f)return;const r=(0,k.vp)(f),d=(0,F.$W)(r,v.length);return v[d](f,u,c)}}function P(v){const f=[];let u=/\{([a-z])-([a-z])\}/.exec(v);if(u){const c=u[1].charCodeAt(0),r=u[2].charCodeAt(0);let d;for(d=c;d<=r;++d)f.push(v.replace(u[0],String.fromCharCode(d)));return f}if(u=/\{(\d+)-(\d+)\}/.exec(v),u){const c=parseInt(u[2],10);for(let r=parseInt(u[1],10);r<=c;r++)f.push(v.replace(u[0],r.toString()));return f}return f.push(v),f}},6412:(jt,ht,a)=>{"use strict";a.d(ht,{BB:()=>m,Iu:()=>r,Jp:()=>b,U1:()=>f,Ue:()=>G,bA:()=>u,lk:()=>P,mc:()=>Z,n3:()=>c,nb:()=>_,nn:()=>v,qC:()=>d});var W=a(3233),F=a(9219);const k=new Array(6);function G(){return[1,0,0,1,0,0]}function Z(y){return S(y,1,0,0,1,0,0)}function b(y,I){const O=y[0],E=y[1],R=y[2],N=y[3],z=y[4],st=y[5],A=I[0],L=I[1],w=I[2],x=I[3],C=I[4],D=I[5];return y[0]=O*A+R*L,y[1]=E*A+N*L,y[2]=O*w+R*x,y[3]=E*w+N*x,y[4]=O*C+R*D+z,y[5]=E*C+N*D+st,y}function S(y,I,O,E,R,N,z){return y[0]=I,y[1]=O,y[2]=E,y[3]=R,y[4]=N,y[5]=z,y}function P(y,I){return y[0]=I[0],y[1]=I[1],y[2]=I[2],y[3]=I[3],y[4]=I[4],y[5]=I[5],y}function v(y,I){const O=I[0],E=I[1];return I[0]=y[0]*O+y[2]*E+y[4],I[1]=y[1]*O+y[3]*E+y[5],I}function f(y,I){const O=Math.cos(I),E=Math.sin(I);return b(y,S(k,O,E,-E,O,0,0))}function u(y,I,O){return b(y,S(k,I,0,0,O,0,0))}function c(y,I,O){return S(y,I,0,0,O,0,0)}function r(y,I,O){return b(y,S(k,1,0,0,1,I,O))}function d(y,I,O,E,R,N,z,st){const A=Math.sin(N),L=Math.cos(N);return y[0]=E*L,y[1]=R*A,y[2]=-E*A,y[3]=R*L,y[4]=z*E*L-st*E*A+I,y[5]=z*R*A+st*R*L+O,y}function _(y,I){const O=function n(y){return y[0]*y[3]-y[1]*y[2]}(I);(0,F.h)(0!==O,32);const E=I[0],R=I[1],N=I[2],z=I[3],st=I[4],A=I[5];return y[0]=z/O,y[1]=-R/O,y[2]=-N/O,y[3]=E/O,y[4]=(N*A-z*st)/O,y[5]=-(E*A-R*st)/O,y}let g;function m(y){const I="matrix("+y.join(", ")+")";if(W.Id)return I;const O=g||(g=document.createElement("div"));return O.style.transform=I,O.style.transform}},8625:(jt,ht,a)=>{"use strict";function W(F,k){const G=[];Object.keys(k).forEach(function(b){null!=k[b]&&G.push(b+"="+encodeURIComponent(k[b]))});const Z=G.join("&");return F=F.replace(/[?&]$/,""),(F+=F.includes("?")?"&":"?")+Z}a.d(ht,{B:()=>W})},3089:(jt,ht,a)=>{"use strict";function W(){throw new Error("Unimplemented abstract method.")}a.d(ht,{O3:()=>W,sq:()=>k});let F=0;function k(Z){return Z.ol_uid||(Z.ol_uid=String(++F))}},2659:(jt,ht,a)=>{"use strict";a.d(ht,{A4:()=>d,C5:()=>g,Ei:()=>f,G3:()=>l,Me:()=>A,O:()=>y,Pr:()=>r,Qc:()=>P,RA:()=>n,T3:()=>m,Ve:()=>G,ZL:()=>O,c:()=>k,fJ:()=>F,hg:()=>_,ke:()=>c,pc:()=>v,qk:()=>b,xc:()=>N,z:()=>u});var W=a(9363);const F="http://www.w3.org/2001/XMLSchema-instance";function k(L,w){return A().createElementNS(L,w)}function G(L,w){return Z(L,w,[]).join("")}function Z(L,w,x){if(L.nodeType==Node.CDATA_SECTION_NODE||L.nodeType==Node.TEXT_NODE)x.push(w?String(L.nodeValue).replace(/(\r\n|\r|\n)/g,""):L.nodeValue);else{let C;for(C=L.firstChild;C;C=C.nextSibling)Z(C,w,x)}return x}function b(L){return"documentElement"in L}function P(L){return(new DOMParser).parseFromString(L,"application/xml")}function v(L,w){return function(x,C){const D=L.call(void 0!==w?w:this,x,C);void 0!==D&&(0,W.l7)(C[C.length-1],D)}}function f(L,w){return function(x,C){const D=L.call(void 0!==w?w:this,x,C);void 0!==D&&C[C.length-1].push(D)}}function u(L,w){return function(x,C){const D=L.call(void 0!==w?w:this,x,C);void 0!==D&&(C[C.length-1]=D)}}function c(L,w,x){return function(C,D){const Y=L.call(void 0!==x?x:this,C,D);if(void 0!==Y){const nt=D[D.length-1],V=void 0!==w?w:C.localName;let at;V in nt?at=nt[V]:(at=[],nt[V]=at),at.push(Y)}}}function r(L,w,x){return function(C,D){const Y=L.call(void 0!==x?x:this,C,D);void 0!==Y&&(D[D.length-1][void 0!==w?w:C.localName]=Y)}}function d(L,w){return function(x,C,D){L.call(void 0!==w?w:this,x,C,D),D[D.length-1].node.appendChild(x)}}function l(L,w){return function(x,C,D){let V=L;return void 0===V&&(V=D),k(void 0!==w?w:C[C.length-1].node.namespaceURI,V)}}const _=l();function n(L,w){const x=w.length,C=new Array(x);for(let D=0;D<x;++D)C[D]=L[w[D]];return C}function g(L,w,x){let C,D;for(x=void 0!==x?x:{},C=0,D=L.length;C<D;++C)x[L[C]]=w;return x}function m(L,w,x,C){let D;for(D=w.firstElementChild;D;D=D.nextElementSibling){const Y=L[D.namespaceURI];if(void 0!==Y){const nt=Y[D.localName];void 0!==nt&&nt.call(C,D,x)}}}function y(L,w,x,C,D){return C.push(L),m(w,x,C,D),C.pop()}function O(L,w,x,C,D,Y,nt){return D.push(L),function I(L,w,x,C,D,Y){const nt=(void 0!==D?D:x).length;let V,at;for(let ut=0;ut<nt;++ut)V=x[ut],void 0!==V&&(at=w.call(void 0!==Y?Y:this,V,C,void 0!==D?D[ut]:void 0),void 0!==at&&L[at.namespaceURI][at.localName].call(Y,at,V,C))}(w,x,C,D,Y,nt),D.pop()}let E,z;function N(){return void 0===E&&typeof XMLSerializer<"u"&&(E=new XMLSerializer),E}function A(){return void 0===z&&typeof document<"u"&&(z=document.implementation.createDocument("","",null)),z}},7590:(jt,ht,a)=>{"use strict";a.d(ht,{h0:()=>qe,bg:()=>Jr});var W=a(3009),F=a(5505),k=a(1485),G=a(6198),Z=a(4396),b=a(1949),S=a(7202),P=a(6380),v=a(7835),f=a(1539),u=a(5209),c=a(1590),r=a(3053),d=a(4792),e=a(4074),l=a(8398),_=a(719),n=a(1316),g=a(9219),m=a(1180),y=a(7021),I=a(3089);const x=class w extends _.Z{constructor(i){if(super({attributions:i.attributions,cacheSize:i.cacheSize,crossOrigin:i.crossOrigin,interpolate:i.interpolate,projection:(0,y.U2)("EPSG:3857"),reprojectionErrorThreshold:i.reprojectionErrorThreshold,state:"loading",tileLoadFunction:i.tileLoadFunction,wrapX:void 0===i.wrapX||i.wrapX,transition:i.transition,zDirection:i.zDirection}),this.tileJSON_=null,this.tileSize_=i.tileSize,i.url)if(i.jsonp)!function O(s,i,o,T){const U=document.createElement("script"),H="olc_"+(0,I.sq)(i);function lt(){delete window[H],U.parentNode.removeChild(U)}U.async=!0,U.src=s+(s.includes("?")?"&":"?")+(T||"callback")+"="+H;const Tt=setTimeout(function(){lt(),o&&o()},1e4);window[H]=function(Lt){clearTimeout(Tt),lt(),i(Lt)},document.head.appendChild(U)}(i.url,this.handleTileJSONResponse.bind(this),this.handleTileJSONError.bind(this));else{const o=new XMLHttpRequest;o.addEventListener("load",this.onXHRLoad_.bind(this)),o.addEventListener("error",this.onXHRError_.bind(this)),o.open("GET",i.url),o.send()}else i.tileJSON?this.handleTileJSONResponse(i.tileJSON):(0,g.h)(!1,51)}onXHRLoad_(i){const o=i.target;if(!o.status||o.status>=200&&o.status<300){let T;try{T=JSON.parse(o.responseText)}catch{return void this.handleTileJSONError()}this.handleTileJSONResponse(T)}else this.handleTileJSONError()}onXHRError_(i){this.handleTileJSONError()}getTileJSON(){return this.tileJSON_}handleTileJSONResponse(i){const o=(0,y.U2)("EPSG:4326"),T=this.getProjection();let U;if(void 0!==i.bounds){const Dt=(0,y.WO)(o,T);U=(0,n.Ne)(i.bounds,Dt)}const H=(0,m.Tl)(T),Lt=(0,m.dl)({extent:H,maxZoom:i.maxzoom||22,minZoom:i.minzoom||0,tileSize:this.tileSize_});if(this.tileGrid=Lt,this.tileUrlFunction=(0,v.uR)(i.tiles,Lt),i.attribution&&!this.getAttributions()){const Dt=void 0!==U?U:H;this.setAttributions(function(Zt){return(0,n.kK)(Dt,Zt.extent)?[i.attribution]:null})}this.tileJSON_=i,this.setState("ready")}handleTileJSONError(){this.setState("error")}};var ut,C=a(640),D=a(5105),Y=a(8412),nt=a(2889),V=a(1318),Ct={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function vt(s){return(s=Math.round(s))<0?0:s>255?255:s}function bt(s){return vt("%"===s[s.length-1]?parseFloat(s)/100*255:parseInt(s))}function Gt(s){return function St(s){return s<0?0:s>1?1:s}("%"===s[s.length-1]?parseFloat(s)/100:parseFloat(s))}function Xt(s,i,o){return o<0?o+=1:o>1&&(o-=1),6*o<1?s+(i-s)*o*6:2*o<1?i:3*o<2?s+(i-s)*(2/3-o)*6:s}try{ut={}.parseCSSColor=function te(s){var o,i=s.replace(/ /g,"").toLowerCase();if(i in Ct)return Ct[i].slice();if("#"===i[0])return 4===i.length?(o=parseInt(i.substr(1),16))>=0&&o<=4095?[(3840&o)>>4|(3840&o)>>8,240&o|(240&o)>>4,15&o|(15&o)<<4,1]:null:7===i.length&&(o=parseInt(i.substr(1),16))>=0&&o<=16777215?[(16711680&o)>>16,(65280&o)>>8,255&o,1]:null;var T=i.indexOf("("),U=i.indexOf(")");if(-1!==T&&U+1===i.length){var H=i.substr(0,T),lt=i.substr(T+1,U-(T+1)).split(","),Tt=1;switch(H){case"rgba":if(4!==lt.length)return null;Tt=Gt(lt.pop());case"rgb":return 3!==lt.length?null:[bt(lt[0]),bt(lt[1]),bt(lt[2]),Tt];case"hsla":if(4!==lt.length)return null;Tt=Gt(lt.pop());case"hsl":if(3!==lt.length)return null;var Lt=(parseFloat(lt[0])%360+360)%360/360,Dt=Gt(lt[1]),Zt=Gt(lt[2]),qt=Zt<=.5?Zt*(Dt+1):Zt+Dt-Zt*Dt,le=2*Zt-qt;return[vt(255*Xt(le,qt,Lt+1/3)),vt(255*Xt(le,qt,Lt)),vt(255*Xt(le,qt,Lt-1/3)),Tt];default:return null}}return null}}catch{}var Vt=function(i,o,T,U){void 0===U&&(U=1),this.r=i,this.g=o,this.b=T,this.a=U};Vt.parse=function(i){if(i){if(i instanceof Vt)return i;if("string"==typeof i){var o=ut(i);if(o)return new Vt(o[0]/255*o[3],o[1]/255*o[3],o[2]/255*o[3],o[3])}}},Vt.prototype.toString=function(){var i=this.toArray(),T=i[1],U=i[2],H=i[3];return"rgba("+Math.round(i[0])+","+Math.round(T)+","+Math.round(U)+","+H+")"},Vt.prototype.toArray=function(){var i=this,H=i.a;return 0===H?[0,0,0,0]:[255*i.r/H,255*i.g/H,255*i.b/H,H]},Vt.prototype.toArray01=function(){var i=this,H=i.a;return 0===H?[0,0,0,0]:[i.r/H,i.g/H,i.b/H,H]},Vt.prototype.toArray01PremultipliedAlpha=function(){var i=this;return[i.r,i.g,i.b,i.a]},Vt.black=new Vt(0,0,0,1),Vt.white=new Vt(1,1,1,1),Vt.transparent=new Vt(0,0,0,0),Vt.red=new Vt(1,0,0,1),Vt.blue=new Vt(0,0,1,1);var _e=Vt;function he(s){return"object"==typeof s?["literal",s]:s}function gt(s){switch(s.colorSpace){case"hcl":return"interpolate-hcl";case"lab":return"interpolate-lab";default:return"interpolate"}}function Yt(s,i){var o=he(function Ft(s,i){return void 0!==s?s:void 0!==i?i:void 0}(s.default,i.default));return void 0===o&&"resolvedImage"===i.type?"":o}function ge(s,i,o){var T=Nt(s,i),U=["get",s.property];if("categorical"===T&&"boolean"==typeof o[0][0]){for(var H=["case"],lt=0,Tt=o;lt<Tt.length;lt+=1){var Lt=Tt[lt];H.push(["==",U,Lt[0]],Lt[1])}return H.push(Yt(s,i)),H}if("categorical"===T){for(var Dt=["match",U],Zt=0,qt=o;Zt<qt.length;Zt+=1){var le=qt[Zt];Pt(Dt,le[0],le[1],!1)}return Dt.push(Yt(s,i)),Dt}if("interval"===T){for(var fe=["step",["number",U]],we=0,t=o;we<t.length;we+=1){var h=t[we];Pt(fe,h[0],h[1],!0)}return ft(fe),void 0===s.default?fe:["case",["==",["typeof",U],"number"],fe,he(s.default)]}if("exponential"===T){for(var p=void 0!==s.base?s.base:1,B=[gt(s),1===p?["linear"]:["exponential",p],["number",U]],j=0,X=o;j<X.length;j+=1){var tt=X[j];Pt(B,tt[0],tt[1],!1)}return void 0===s.default?B:["case",["==",["typeof",U],"number"],B,he(s.default)]}throw new Error("Unknown property function type "+T)}function ft(s){"step"===s[0]&&3===s.length&&(s.push(0),s.push(s[3]))}function Pt(s,i,o,T){s.length>3&&i===s[s.length-2]||(T&&2===s.length||s.push(i),s.push(o))}function Nt(s,i){return s.type?s.type:i.expression.interpolated?"exponential":"interval"}function zt(s){for(var i=["concat"],o=/{([^{}]+)}/g,T=0,U=o.exec(s);null!==U;U=o.exec(s)){var H=s.slice(T,o.lastIndex-U[0].length);T=o.lastIndex,H.length>0&&i.push(H),i.push(["get",U[1]])}if(1===i.length)return s;if(T<s.length)i.push(s.slice(T));else if(2===i.length)return["to-string",i[1]];return i}var ue=function(s){function i(o,T){s.call(this,T),this.message=T,this.key=o}return s&&(i.__proto__=s),(i.prototype=Object.create(s&&s.prototype)).constructor=i,i}(Error),ve=function(i,o){void 0===o&&(o=[]),this.parent=i,this.bindings={};for(var T=0,U=o;T<U.length;T+=1){var H=U[T];this.bindings[H[0]]=H[1]}};ve.prototype.concat=function(i){return new ve(this,i)},ve.prototype.get=function(i){if(this.bindings[i])return this.bindings[i];if(this.parent)return this.parent.get(i);throw new Error(i+" not found in scope.")},ve.prototype.has=function(i){return!!this.bindings[i]||!!this.parent&&this.parent.has(i)};var Ee=ve,Mt={kind:"null"},rt={kind:"number"},q={kind:"string"},M={kind:"boolean"},K={kind:"color"},et={kind:"object"},it={kind:"value"},Et={kind:"collator"},At={kind:"formatted"},Wt={kind:"resolvedImage"};function Ht(s,i){return{kind:"array",itemType:s,N:i}}function se(s){if("array"===s.kind){var i=se(s.itemType);return"number"==typeof s.N?"array<"+i+", "+s.N+">":"value"===s.itemType.kind?"array":"array<"+i+">"}return s.kind}var Te=[Mt,rt,q,M,K,At,et,Ht(it),Wt];function ce(s,i){if("error"===i.kind)return null;if("array"===s.kind){if("array"===i.kind&&(0===i.N&&"value"===i.itemType.kind||!ce(s.itemType,i.itemType))&&("number"!=typeof s.N||s.N===i.N))return null}else{if(s.kind===i.kind)return null;if("value"===s.kind)for(var o=0,T=Te;o<T.length;o+=1)if(!ce(T[o],i))return null}return"Expected "+se(s)+" but found "+se(i)+" instead."}function ee(s,i){return i.some(function(o){return o.kind===s.kind})}function We(s,i){return i.some(function(o){return"null"===o?null===s:"array"===o?Array.isArray(s):"object"===o?s&&!Array.isArray(s)&&"object"==typeof s:o===typeof s})}var Ge=function(i,o,T){this.sensitivity=i?o?"variant":"case":o?"accent":"base",this.locale=T,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})};Ge.prototype.compare=function(i,o){return this.collator.compare(i,o)},Ge.prototype.resolvedLocale=function(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale};var Ze=Ge,ke=function(i,o,T,U,H){this.text=i.normalize?i.normalize():i,this.image=o,this.scale=T,this.fontStack=U,this.textColor=H},Ve=function(i){this.sections=i};Ve.fromString=function(i){return new Ve([new ke(i,null,null,null,null)])},Ve.prototype.isEmpty=function(){return 0===this.sections.length||!this.sections.some(function(i){return 0!==i.text.length||i.image&&0!==i.image.name.length})},Ve.factory=function(i){return i instanceof Ve?i:Ve.fromString(i)},Ve.prototype.toString=function(){return 0===this.sections.length?"":this.sections.map(function(i){return i.text}).join("")},Ve.prototype.serialize=function(){for(var i=["format"],o=0,T=this.sections;o<T.length;o+=1){var U=T[o];if(U.image)i.push(["image",U.image.name]);else{i.push(U.text);var H={};U.fontStack&&(H["text-font"]=["literal",U.fontStack.split(",")]),U.scale&&(H["font-scale"]=U.scale),U.textColor&&(H["text-color"]=["rgba"].concat(U.textColor.toArray())),i.push(H)}}return i};var Je=Ve,si=function(i){this.name=i.name,this.available=i.available};si.prototype.toString=function(){return this.name},si.fromString=function(i){return i?new si({name:i,available:!1}):null},si.prototype.serialize=function(){return["image",this.name]};var Qe=si;function ei(s,i,o,T){return"number"==typeof s&&s>=0&&s<=255&&"number"==typeof i&&i>=0&&i<=255&&"number"==typeof o&&o>=0&&o<=255?typeof T>"u"||"number"==typeof T&&T>=0&&T<=1?null:"Invalid rgba value ["+[s,i,o,T].join(", ")+"]: 'a' must be between 0 and 1.":"Invalid rgba value ["+("number"==typeof T?[s,i,o,T]:[s,i,o]).join(", ")+"]: 'r', 'g', and 'b' must be between 0 and 255."}function $(s){if(null===s)return!0;if("string"==typeof s)return!0;if("boolean"==typeof s)return!0;if("number"==typeof s)return!0;if(s instanceof _e)return!0;if(s instanceof Ze)return!0;if(s instanceof Je)return!0;if(s instanceof Qe)return!0;if(Array.isArray(s)){for(var i=0,o=s;i<o.length;i+=1)if(!$(o[i]))return!1;return!0}if("object"==typeof s){for(var U in s)if(!$(s[U]))return!1;return!0}return!1}function J(s){if(null===s)return Mt;if("string"==typeof s)return q;if("boolean"==typeof s)return M;if("number"==typeof s)return rt;if(s instanceof _e)return K;if(s instanceof Ze)return Et;if(s instanceof Je)return At;if(s instanceof Qe)return Wt;if(Array.isArray(s)){for(var o,i=s.length,T=0,U=s;T<U.length;T+=1){var lt=J(U[T]);if(o){if(o===lt)continue;o=it;break}o=lt}return Ht(o||it,i)}return et}function _t(s){var i=typeof s;return null===s?"":"string"===i||"number"===i||"boolean"===i?String(s):s instanceof _e||s instanceof Je||s instanceof Qe?s.toString():JSON.stringify(s)}var pt=function(i,o){this.type=i,this.value=o};pt.parse=function(i,o){if(2!==i.length)return o.error("'literal' expression requires exactly one argument, but found "+(i.length-1)+" instead.");if(!$(i[1]))return o.error("invalid value");var T=i[1],U=J(T),H=o.expectedType;return"array"===U.kind&&0===U.N&&H&&"array"===H.kind&&("number"!=typeof H.N||0===H.N)&&(U=H),new pt(U,T)},pt.prototype.evaluate=function(){return this.value},pt.prototype.eachChild=function(){},pt.prototype.outputDefined=function(){return!0},pt.prototype.serialize=function(){return"array"===this.type.kind||"object"===this.type.kind?["literal",this.value]:this.value instanceof _e?["rgba"].concat(this.value.toArray()):this.value instanceof Je?this.value.serialize():this.value};var It=pt,Jt=function(i){this.name="ExpressionEvaluationError",this.message=i};Jt.prototype.toJSON=function(){return this.message};var ie=Jt,ye={string:q,number:rt,boolean:M,object:et},Pe=function(i,o){this.type=i,this.args=o};Pe.parse=function(i,o){if(i.length<2)return o.error("Expected at least one argument.");var U,T=1,H=i[0];if("array"===H){var lt,Lt;if(i.length>2){var Tt=i[1];if("string"!=typeof Tt||!(Tt in ye)||"object"===Tt)return o.error('The item type argument of "array" must be one of string, number, boolean',1);lt=ye[Tt],T++}else lt=it;if(i.length>3){if(null!==i[2]&&("number"!=typeof i[2]||i[2]<0||i[2]!==Math.floor(i[2])))return o.error('The length argument to "array" must be a positive integer literal',2);Lt=i[2],T++}U=Ht(lt,Lt)}else U=ye[H];for(var Dt=[];T<i.length;T++){var Zt=o.parse(i[T],T,it);if(!Zt)return null;Dt.push(Zt)}return new Pe(U,Dt)},Pe.prototype.evaluate=function(i){for(var o=0;o<this.args.length;o++){var T=this.args[o].evaluate(i);if(!ce(this.type,J(T)))return T;if(o===this.args.length-1)throw new ie("Expected value to be of type "+se(this.type)+", but found "+se(J(T))+" instead.")}return null},Pe.prototype.eachChild=function(i){this.args.forEach(i)},Pe.prototype.outputDefined=function(){return this.args.every(function(i){return i.outputDefined()})},Pe.prototype.serialize=function(){var i=this.type,o=[i.kind];if("array"===i.kind){var T=i.itemType;if("string"===T.kind||"number"===T.kind||"boolean"===T.kind){o.push(T.kind);var U=i.N;("number"==typeof U||this.args.length>1)&&o.push(U)}}return o.concat(this.args.map(function(H){return H.serialize()}))};var Ie=Pe,Fe=function(i){this.type=At,this.sections=i};Fe.parse=function(i,o){if(i.length<2)return o.error("Expected at least one argument.");var T=i[1];if(!Array.isArray(T)&&"object"==typeof T)return o.error("First argument must be an image or text section.");for(var U=[],H=!1,lt=1;lt<=i.length-1;++lt){var Tt=i[lt];if(H&&"object"==typeof Tt&&!Array.isArray(Tt)){H=!1;var Lt=null;if(Tt["font-scale"]&&!(Lt=o.parse(Tt["font-scale"],1,rt)))return null;var Dt=null;if(Tt["text-font"]&&!(Dt=o.parse(Tt["text-font"],1,Ht(q))))return null;var Zt=null;if(Tt["text-color"]&&!(Zt=o.parse(Tt["text-color"],1,K)))return null;var qt=U[U.length-1];qt.scale=Lt,qt.font=Dt,qt.textColor=Zt}else{var le=o.parse(i[lt],1,it);if(!le)return null;var fe=le.type.kind;if("string"!==fe&&"value"!==fe&&"null"!==fe&&"resolvedImage"!==fe)return o.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");H=!0,U.push({content:le,scale:null,font:null,textColor:null})}}return new Fe(U)},Fe.prototype.evaluate=function(i){return new Je(this.sections.map(function(T){var U=T.content.evaluate(i);return J(U)===Wt?new ke("",U,null,null,null):new ke(_t(U),null,T.scale?T.scale.evaluate(i):null,T.font?T.font.evaluate(i).join(","):null,T.textColor?T.textColor.evaluate(i):null)}))},Fe.prototype.eachChild=function(i){for(var o=0,T=this.sections;o<T.length;o+=1){var U=T[o];i(U.content),U.scale&&i(U.scale),U.font&&i(U.font),U.textColor&&i(U.textColor)}},Fe.prototype.outputDefined=function(){return!1},Fe.prototype.serialize=function(){for(var i=["format"],o=0,T=this.sections;o<T.length;o+=1){var U=T[o];i.push(U.content.serialize());var H={};U.scale&&(H["font-scale"]=U.scale.serialize()),U.font&&(H["text-font"]=U.font.serialize()),U.textColor&&(H["text-color"]=U.textColor.serialize()),i.push(H)}return i};var je=Fe,Xe=function(i){this.type=Wt,this.input=i};Xe.parse=function(i,o){if(2!==i.length)return o.error("Expected two arguments.");var T=o.parse(i[1],1,q);return T?new Xe(T):o.error("No image name provided.")},Xe.prototype.evaluate=function(i){var o=this.input.evaluate(i),T=Qe.fromString(o);return T&&i.availableImages&&(T.available=i.availableImages.indexOf(o)>-1),T},Xe.prototype.eachChild=function(i){i(this.input)},Xe.prototype.outputDefined=function(){return!1},Xe.prototype.serialize=function(){return["image",this.input.serialize()]};var ni=Xe,Mi={"to-boolean":M,"to-color":K,"to-number":rt,"to-string":q},gi=function(i,o){this.type=i,this.args=o};gi.parse=function(i,o){if(i.length<2)return o.error("Expected at least one argument.");var T=i[0];if(("to-boolean"===T||"to-string"===T)&&2!==i.length)return o.error("Expected one argument.");for(var U=Mi[T],H=[],lt=1;lt<i.length;lt++){var Tt=o.parse(i[lt],lt,it);if(!Tt)return null;H.push(Tt)}return new gi(U,H)},gi.prototype.evaluate=function(i){if("boolean"===this.type.kind)return!!this.args[0].evaluate(i);if("color"===this.type.kind){for(var o,T,U=0,H=this.args;U<H.length;U+=1){if(T=null,(o=H[U].evaluate(i))instanceof _e)return o;if("string"==typeof o){var Tt=i.parseColor(o);if(Tt)return Tt}else if(Array.isArray(o)&&!(T=o.length<3||o.length>4?"Invalid rbga value "+JSON.stringify(o)+": expected an array containing either three or four numeric values.":ei(o[0],o[1],o[2],o[3])))return new _e(o[0]/255,o[1]/255,o[2]/255,o[3])}throw new ie(T||"Could not parse color from value '"+("string"==typeof o?o:String(JSON.stringify(o)))+"'")}if("number"===this.type.kind){for(var Lt=null,Dt=0,Zt=this.args;Dt<Zt.length;Dt+=1){if(null===(Lt=Zt[Dt].evaluate(i)))return 0;var le=Number(Lt);if(!isNaN(le))return le}throw new ie("Could not convert "+JSON.stringify(Lt)+" to number.")}return"formatted"===this.type.kind?Je.fromString(_t(this.args[0].evaluate(i))):"resolvedImage"===this.type.kind?Qe.fromString(_t(this.args[0].evaluate(i))):_t(this.args[0].evaluate(i))},gi.prototype.eachChild=function(i){this.args.forEach(i)},gi.prototype.outputDefined=function(){return this.args.every(function(i){return i.outputDefined()})},gi.prototype.serialize=function(){if("formatted"===this.type.kind)return new je([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if("resolvedImage"===this.type.kind)return new ni(this.args[0]).serialize();var i=["to-"+this.type.kind];return this.eachChild(function(o){i.push(o.serialize())}),i};var pi=gi,xn=["Unknown","Point","LineString","Polygon"],Ii=function(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null,this.featureTileCoord=null,this.featureDistanceData=null};Ii.prototype.id=function(){return this.feature&&void 0!==this.feature.id?this.feature.id:null},Ii.prototype.geometryType=function(){return this.feature?"number"==typeof this.feature.type?xn[this.feature.type]:this.feature.type:null},Ii.prototype.geometry=function(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null},Ii.prototype.canonicalID=function(){return this.canonical},Ii.prototype.properties=function(){return this.feature&&this.feature.properties||{}},Ii.prototype.distanceFromCenter=function(){if(this.featureTileCoord&&this.featureDistanceData){var i=this.featureDistanceData.center,o=this.featureDistanceData.scale,T=this.featureTileCoord;return this.featureDistanceData.bearing[0]*(T.x*o-i[0])+this.featureDistanceData.bearing[1]*(T.y*o-i[1])}return 0},Ii.prototype.parseColor=function(i){var o=this._parseColorCache[i];return o||(o=this._parseColorCache[i]=_e.parse(i)),o};var vi=Ii,ci=function(i,o,T,U){this.name=i,this.type=o,this._evaluate=T,this.args=U};ci.prototype.evaluate=function(i){return this._evaluate(i,this.args)},ci.prototype.eachChild=function(i){this.args.forEach(i)},ci.prototype.outputDefined=function(){return!1},ci.prototype.serialize=function(){return[this.name].concat(this.args.map(function(i){return i.serialize()}))},ci.parse=function(i,o){var T,U=i[0],H=ci.definitions[U];if(!H)return o.error('Unknown expression "'+U+'". If you wanted a literal array, use ["literal", [...]].',0);for(var lt=Array.isArray(H)?H[0]:H.type,Tt=Array.isArray(H)?[[H[1],H[2]]]:H.overloads,Lt=Tt.filter(function(ae){var oe=ae[0];return!Array.isArray(oe)||oe.length===i.length-1}),Dt=null,Zt=0,qt=Lt;Zt<qt.length;Zt+=1){var le=qt[Zt],fe=le[0],we=le[1];Dt=new Ji(o.registry,o.path,null,o.scope);for(var t=[],h=!1,p=1;p<i.length;p++){var B=i[p],j=Array.isArray(fe)?fe[p-1]:fe.type,X=Dt.parse(B,1+t.length,j);if(!X){h=!0;break}t.push(X)}if(!h){if(Array.isArray(fe)&&fe.length!==t.length){Dt.error("Expected "+fe.length+" arguments, but found "+t.length+" instead.");continue}for(var tt=0;tt<t.length;tt++){var Q=Array.isArray(fe)?fe[tt]:fe.type,ct=t[tt];Dt.concat(tt+1).checkSubtype(Q,ct.type)}if(0===Dt.errors.length)return new ci(U,lt,we,t)}}if(1===Lt.length)(T=o.errors).push.apply(T,Dt.errors);else{for(var Ut=(Lt.length?Lt:Tt).map(function(ae){return function yi(s){return Array.isArray(s)?"("+s.map(se).join(", ")+")":"("+se(s.type)+"...)"}(ae[0])}).join(" | "),Ot=[],kt=1;kt<i.length;kt++){var re=o.parse(i[kt],1+Ot.length);if(!re)return null;Ot.push(se(re.type))}o.error("Expected arguments of type "+Ut+", but found ("+Ot.join(", ")+") instead.")}return null},ci.register=function(i,o){for(var T in ci.definitions=o,o)i[T]=ci};var _i=ci,ri=function(i,o,T){this.type=Et,this.locale=T,this.caseSensitive=i,this.diacriticSensitive=o};ri.parse=function(i,o){if(2!==i.length)return o.error("Expected one argument.");var T=i[1];if("object"!=typeof T||Array.isArray(T))return o.error("Collator options argument must be an object.");var U=o.parse(void 0!==T["case-sensitive"]&&T["case-sensitive"],1,M);if(!U)return null;var H=o.parse(void 0!==T["diacritic-sensitive"]&&T["diacritic-sensitive"],1,M);if(!H)return null;var lt=null;return T.locale&&!(lt=o.parse(T.locale,1,q))?null:new ri(U,H,lt)},ri.prototype.evaluate=function(i){return new Ze(this.caseSensitive.evaluate(i),this.diacriticSensitive.evaluate(i),this.locale?this.locale.evaluate(i):null)},ri.prototype.eachChild=function(i){i(this.caseSensitive),i(this.diacriticSensitive),this.locale&&i(this.locale)},ri.prototype.outputDefined=function(){return!1},ri.prototype.serialize=function(){var i={};return i["case-sensitive"]=this.caseSensitive.serialize(),i["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(i.locale=this.locale.serialize()),["collator",i]};var Gi=ri,Pi=8192;function ai(s,i){s[0]=Math.min(s[0],i[0]),s[1]=Math.min(s[1],i[1]),s[2]=Math.max(s[2],i[0]),s[3]=Math.max(s[3],i[1])}function Xi(s,i){return!(s[0]<=i[0]||s[2]>=i[2]||s[1]<=i[1]||s[3]>=i[3])}function Ws(s,i){var o=function Ei(s){return(180+s)/360}(s[0]),T=function Ci(s){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+s*Math.PI/360)))/360}(s[1]),U=Math.pow(2,i.z);return[Math.round(o*U*Pi),Math.round(T*U*Pi)]}function Ri(s,i,o){var T=s[0]-i[0],U=s[1]-i[1],H=s[0]-o[0],lt=s[1]-o[1];return T*lt-H*U==0&&T*H<=0&&U*lt<=0}function hs(s,i,o){return i[1]>s[1]!=o[1]>s[1]&&s[0]<(o[0]-i[0])*(s[1]-i[1])/(o[1]-i[1])+i[0]}function Vi(s,i){for(var o=!1,T=0,U=i.length;T<U;T++)for(var H=i[T],lt=0,Tt=H.length;lt<Tt-1;lt++){if(Ri(s,H[lt],H[lt+1]))return!1;hs(s,H[lt],H[lt+1])&&(o=!o)}return o}function us(s,i){for(var o=0;o<i.length;o++)if(Vi(s,i[o]))return!0;return!1}function xi(s,i,o,T){var Lt=T[0]-o[0],Dt=T[1]-o[1],Zt=(s[0]-o[0])*Dt-Lt*(s[1]-o[1]),qt=(i[0]-o[0])*Dt-Lt*(i[1]-o[1]);return Zt>0&&qt<0||Zt<0&&qt>0}function Ai(s,i,o,T){return 0!==function Zi(s,i){return s[0]*i[1]-s[1]*i[0]}([T[0]-o[0],T[1]-o[1]],[i[0]-s[0],i[1]-s[1]])&&!(!xi(s,i,o,T)||!xi(o,T,s,i))}function hn(s,i,o){for(var T=0,U=o;T<U.length;T+=1)for(var H=U[T],lt=0;lt<H.length-1;++lt)if(Ai(s,i,H[lt],H[lt+1]))return!0;return!1}function en(s,i){for(var o=0;o<s.length;++o)if(!Vi(s[o],i))return!1;for(var T=0;T<s.length-1;++T)if(hn(s[T],s[T+1],i))return!1;return!0}function Gs(s,i){for(var o=0;o<i.length;o++)if(en(s,i[o]))return!0;return!1}function Mn(s,i,o){for(var T=[],U=0;U<s.length;U++){for(var H=[],lt=0;lt<s[U].length;lt++){var Tt=Ws(s[U][lt],o);ai(i,Tt),H.push(Tt)}T.push(H)}return T}function cs(s,i,o){for(var T=[],U=0;U<s.length;U++){var H=Mn(s[U],i,o);T.push(H)}return T}function zn(s,i,o,T){if(s[0]<o[0]||s[0]>o[2]){var U=.5*T,H=s[0]-o[0]>U?-T:o[0]-s[0]>U?T:0;0===H&&(H=s[0]-o[2]>U?-T:o[2]-s[0]>U?T:0),s[0]+=H}ai(i,s)}function Pn(s,i,o,T){var U=Math.pow(2,T.z)*Pi,H=[T.x*Pi,T.y*Pi],lt=[];if(!s)return lt;for(var Tt=0,Lt=s;Tt<Lt.length;Tt+=1)for(var Zt=0,qt=Lt[Tt];Zt<qt.length;Zt+=1){var le=qt[Zt],fe=[le.x+H[0],le.y+H[1]];zn(fe,i,o,U),lt.push(fe)}return lt}function ds(s,i,o,T){var U=Math.pow(2,T.z)*Pi,H=[T.x*Pi,T.y*Pi],lt=[];if(!s)return lt;for(var Tt=0,Lt=s;Tt<Lt.length;Tt+=1){for(var Zt=[],qt=0,le=Lt[Tt];qt<le.length;qt+=1){var fe=le[qt],we=[fe.x+H[0],fe.y+H[1]];ai(i,we),Zt.push(we)}lt.push(Zt)}if(i[2]-i[0]<=U/2){!function Tn(s){s[0]=s[1]=1/0,s[2]=s[3]=-1/0}(i);for(var t=0,h=lt;t<h.length;t+=1)for(var B=0,j=h[t];B<j.length;B+=1)zn(j[B],i,o,U)}return lt}var Ui=function(i,o){this.type=M,this.geojson=i,this.geometries=o};Ui.parse=function(i,o){if(2!==i.length)return o.error("'within' expression requires exactly one argument, but found "+(i.length-1)+" instead.");if($(i[1])){var T=i[1];if("FeatureCollection"===T.type)for(var U=0;U<T.features.length;++U){var H=T.features[U].geometry.type;if("Polygon"===H||"MultiPolygon"===H)return new Ui(T,T.features[U].geometry)}else if("Feature"===T.type){var lt=T.geometry.type;if("Polygon"===lt||"MultiPolygon"===lt)return new Ui(T,T.geometry)}else if("Polygon"===T.type||"MultiPolygon"===T.type)return new Ui(T,T)}return o.error("'within' expression requires valid geojson object that contains polygon geometry type.")},Ui.prototype.evaluate=function(i){if(null!=i.geometry()&&null!=i.canonicalID()){if("Point"===i.geometryType())return function Kn(s,i){var o=[1/0,1/0,-1/0,-1/0],T=[1/0,1/0,-1/0,-1/0],U=s.canonicalID();if(!U)return!1;if("Polygon"===i.type){var H=Mn(i.coordinates,T,U),lt=Pn(s.geometry(),o,T,U);if(!Xi(o,T))return!1;for(var Tt=0,Lt=lt;Tt<Lt.length;Tt+=1)if(!Vi(Lt[Tt],H))return!1}if("MultiPolygon"===i.type){var Zt=cs(i.coordinates,T,U),qt=Pn(s.geometry(),o,T,U);if(!Xi(o,T))return!1;for(var le=0,fe=qt;le<fe.length;le+=1)if(!us(fe[le],Zt))return!1}return!0}(i,this.geometries);if("LineString"===i.geometryType())return function zs(s,i){var o=[1/0,1/0,-1/0,-1/0],T=[1/0,1/0,-1/0,-1/0],U=s.canonicalID();if(!U)return!1;if("Polygon"===i.type){var H=Mn(i.coordinates,T,U),lt=ds(s.geometry(),o,T,U);if(!Xi(o,T))return!1;for(var Tt=0,Lt=lt;Tt<Lt.length;Tt+=1)if(!en(Lt[Tt],H))return!1}if("MultiPolygon"===i.type){var Zt=cs(i.coordinates,T,U),qt=ds(s.geometry(),o,T,U);if(!Xi(o,T))return!1;for(var le=0,fe=qt;le<fe.length;le+=1)if(!Gs(fe[le],Zt))return!1}return!0}(i,this.geometries)}return!1},Ui.prototype.eachChild=function(){},Ui.prototype.outputDefined=function(){return!0},Ui.prototype.serialize=function(){return["within",this.geojson]};var kn=Ui;function un(s){if(s instanceof _i){if("get"===s.name&&1===s.args.length)return!1;if("feature-state"===s.name)return!1;if("has"===s.name&&1===s.args.length)return!1;if("properties"===s.name||"geometry-type"===s.name||"id"===s.name)return!1;if(/^filter-/.test(s.name))return!1}if(s instanceof kn)return!1;var i=!0;return s.eachChild(function(o){i&&!un(o)&&(i=!1)}),i}function Xn(s){if(s instanceof _i&&"feature-state"===s.name)return!1;var i=!0;return s.eachChild(function(o){i&&!Xn(o)&&(i=!1)}),i}function Cn(s,i){if(s instanceof _i&&i.indexOf(s.name)>=0)return!1;var o=!0;return s.eachChild(function(T){o&&!Cn(T,i)&&(o=!1)}),o}var Yi=function(i,o){this.type=o.type,this.name=i,this.boundExpression=o};Yi.parse=function(i,o){if(2!==i.length||"string"!=typeof i[1])return o.error("'var' expression requires exactly one string literal argument.");var T=i[1];return o.scope.has(T)?new Yi(T,o.scope.get(T)):o.error('Unknown variable "'+T+'". Make sure "'+T+'" has been bound in an enclosing "let" expression before using it.',1)},Yi.prototype.evaluate=function(i){return this.boundExpression.evaluate(i)},Yi.prototype.eachChild=function(){},Yi.prototype.outputDefined=function(){return!1},Yi.prototype.serialize=function(){return["var",this.name]};var fs=Yi,Hi=function(i,o,T,U,H){void 0===o&&(o=[]),void 0===U&&(U=new Ee),void 0===H&&(H=[]),this.registry=i,this.path=o,this.key=o.map(function(lt){return"["+lt+"]"}).join(""),this.scope=U,this.errors=H,this.expectedType=T};Hi.prototype.parse=function(i,o,T,U,H){return void 0===H&&(H={}),o?this.concat(o,T,U)._parse(i,H):this._parse(i,H)},Hi.prototype._parse=function(i,o){function T(Zt,qt,le){return"assert"===le?new Ie(qt,[Zt]):"coerce"===le?new pi(qt,[Zt]):Zt}if((null===i||"string"==typeof i||"boolean"==typeof i||"number"==typeof i)&&(i=["literal",i]),Array.isArray(i)){if(0===i.length)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');var U=i[0];if("string"!=typeof U)return this.error("Expression name must be a string, but found "+typeof U+' instead. If you wanted a literal array, use ["literal", [...]].',0),null;var H=this.registry[U];if(H){var lt=H.parse(i,this);if(!lt)return null;if(this.expectedType){var Tt=this.expectedType,Lt=lt.type;if("string"!==Tt.kind&&"number"!==Tt.kind&&"boolean"!==Tt.kind&&"object"!==Tt.kind&&"array"!==Tt.kind||"value"!==Lt.kind)if("color"!==Tt.kind&&"formatted"!==Tt.kind&&"resolvedImage"!==Tt.kind||"value"!==Lt.kind&&"string"!==Lt.kind){if(this.checkSubtype(Tt,Lt))return null}else lt=T(lt,Tt,o.typeAnnotation||"coerce");else lt=T(lt,Tt,o.typeAnnotation||"assert")}if(!(lt instanceof It)&&"resolvedImage"!==lt.type.kind&&Rn(lt)){var Dt=new vi;try{lt=new It(lt.type,lt.evaluate(Dt))}catch(Zt){return this.error(Zt.message),null}}return lt}return this.error('Unknown expression "'+U+'". If you wanted a literal array, use ["literal", [...]].',0)}return this.error(typeof i>"u"?"'undefined' value invalid. Use null instead.":"object"==typeof i?'Bare objects invalid. Use ["literal", {...}] instead.':"Expected an array, but found "+typeof i+" instead.")},Hi.prototype.concat=function(i,o,T){var U="number"==typeof i?this.path.concat(i):this.path,H=T?this.scope.concat(T):this.scope;return new Hi(this.registry,U,o||null,H,this.errors)},Hi.prototype.error=function(i){for(var o=[],T=arguments.length-1;T-- >0;)o[T]=arguments[T+1];var U=""+this.key+o.map(function(H){return"["+H+"]"}).join("");this.errors.push(new ue(U,i))},Hi.prototype.checkSubtype=function(i,o){var T=ce(i,o);return T&&this.error(T),T};var Ji=Hi;function Rn(s){if(s instanceof fs)return Rn(s.boundExpression);if(s instanceof _i&&"error"===s.name)return!1;if(s instanceof Gi)return!1;if(s instanceof kn)return!1;var i=s instanceof pi||s instanceof Ie,o=!0;return s.eachChild(function(T){o=i?o&&Rn(T):o&&T instanceof It}),!!o&&un(s)&&Cn(s,["zoom","heatmap-density","line-progress","sky-radial-progress","accumulated","is-supported-script","pitch","distance-from-center"])}function gs(s,i){for(var lt,o=s.length-1,T=0,U=o,H=0;T<=U;)if((lt=s[H=Math.floor((T+U)/2)])<=i){if(H===o||i<s[H+1])return H;T=H+1}else{if(!(lt>i))throw new ie("Input is not a number.");U=H-1}return 0}var Qi=function(i,o,T){this.type=i,this.input=o,this.labels=[],this.outputs=[];for(var U=0,H=T;U<H.length;U+=1){var lt=H[U],Lt=lt[1];this.labels.push(lt[0]),this.outputs.push(Lt)}};Qi.parse=function(i,o){if(i.length-1<4)return o.error("Expected at least 4 arguments, but found only "+(i.length-1)+".");if((i.length-1)%2!=0)return o.error("Expected an even number of arguments.");var T=o.parse(i[1],1,rt);if(!T)return null;var U=[],H=null;o.expectedType&&"value"!==o.expectedType.kind&&(H=o.expectedType);for(var lt=1;lt<i.length;lt+=2){var Tt=1===lt?-1/0:i[lt],Lt=i[lt+1],Dt=lt,Zt=lt+1;if("number"!=typeof Tt)return o.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',Dt);if(U.length&&U[U.length-1][0]>=Tt)return o.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',Dt);var qt=o.parse(Lt,Zt,H);if(!qt)return null;H=H||qt.type,U.push([Tt,qt])}return new Qi(H,T,U)},Qi.prototype.evaluate=function(i){var o=this.labels,T=this.outputs;if(1===o.length)return T[0].evaluate(i);var U=this.input.evaluate(i);if(U<=o[0])return T[0].evaluate(i);var H=o.length;return U>=o[H-1]?T[H-1].evaluate(i):T[gs(o,U)].evaluate(i)},Qi.prototype.eachChild=function(i){i(this.input);for(var o=0,T=this.outputs;o<T.length;o+=1)i(T[o])},Qi.prototype.outputDefined=function(){return this.outputs.every(function(i){return i.outputDefined()})},Qi.prototype.serialize=function(){for(var i=["step",this.input.serialize()],o=0;o<this.labels.length;o++)o>0&&i.push(this.labels[o]),i.push(this.outputs[o].serialize());return i};var Vn=Qi,_s=$i;function $i(s,i,o,T){this.cx=3*s,this.bx=3*(o-s)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*i,this.by=3*(T-i)-this.cy,this.ay=1-this.cy-this.by,this.p1x=s,this.p1y=T,this.p2x=o,this.p2y=T}function Ti(s,i,o){return s*(1-o)+i*o}$i.prototype.sampleCurveX=function(s){return((this.ax*s+this.bx)*s+this.cx)*s},$i.prototype.sampleCurveY=function(s){return((this.ay*s+this.by)*s+this.cy)*s},$i.prototype.sampleCurveDerivativeX=function(s){return(3*this.ax*s+2*this.bx)*s+this.cx},$i.prototype.solveCurveX=function(s,i){var o,T,U,H,lt;for(typeof i>"u"&&(i=1e-6),U=s,lt=0;lt<8;lt++){if(H=this.sampleCurveX(U)-s,Math.abs(H)<i)return U;var Tt=this.sampleCurveDerivativeX(U);if(Math.abs(Tt)<1e-6)break;U-=H/Tt}if((U=s)<(o=0))return o;if(U>(T=1))return T;for(;o<T;){if(H=this.sampleCurveX(U),Math.abs(H-s)<i)return U;s>H?o=U:T=U,U=.5*(T-o)+o}return U},$i.prototype.solve=function(s,i){return this.sampleCurveY(this.solveCurveX(s,i))};var Yn=Object.freeze({__proto__:null,number:Ti,color:function Ks(s,i,o){return new _e(Ti(s.r,i.r,o),Ti(s.g,i.g,o),Ti(s.b,i.b,o),Ti(s.a,i.a,o))},array:function ms(s,i,o){return s.map(function(T,U){return Ti(T,i[U],o)})}}),Jn=4/29,ji=6/29,qi=3*ji*ji,ys=ji*ji*ji,Es=Math.PI/180,ks=180/Math.PI;function Qn(s){return s>ys?Math.pow(s,1/3):s/qi+Jn}function On(s){return s>ji?s*s*s:qi*(s-Jn)}function nn(s){return 255*(s<=.0031308?12.92*s:1.055*Math.pow(s,1/2.4)-.055)}function Sn(s){return(s/=255)<=.04045?s/12.92:Math.pow((s+.055)/1.055,2.4)}function Oi(s){var i=Sn(s.r),o=Sn(s.g),T=Sn(s.b),U=Qn((.4124564*i+.3575761*o+.1804375*T)/.95047),H=Qn((.2126729*i+.7151522*o+.072175*T)/1);return{l:116*H-16,a:500*(U-H),b:200*(H-Qn((.0193339*i+.119192*o+.9503041*T)/1.08883)),alpha:s.a}}function xs(s){var i=(s.l+16)/116,o=isNaN(s.a)?i:i+s.a/500,T=isNaN(s.b)?i:i-s.b/200;return i=1*On(i),o=.95047*On(o),T=1.08883*On(T),new _e(nn(3.2404542*o-1.5371385*i-.4985314*T),nn(-.969266*o+1.8760108*i+.041556*T),nn(.0556434*o-.2040259*i+1.0572252*T),s.alpha)}function Ys(s,i,o){var T=i-s;return s+o*(T>180||T<-180?T-360*Math.round(T/360):T)}var ot={forward:Oi,reverse:xs,interpolate:function Xs(s,i,o){return{l:Ti(s.l,i.l,o),a:Ti(s.a,i.a,o),b:Ti(s.b,i.b,o),alpha:Ti(s.alpha,i.alpha,o)}}},dt_forward=function $n(s){var i=Oi(s),o=i.l,T=i.a,U=i.b,H=Math.atan2(U,T)*ks;return{h:H<0?H+360:H,c:Math.sqrt(T*T+U*U),l:o,alpha:s.a}},dt_reverse=function Vs(s){var i=s.h*Es,o=s.c;return xs({l:s.l,a:Math.cos(i)*o,b:Math.sin(i)*o,alpha:s.alpha})},dt_interpolate=function Kt(s,i,o){return{h:Ys(s.h,i.h,o),c:Ti(s.c,i.c,o),l:Ti(s.l,i.l,o),alpha:Ti(s.alpha,i.alpha,o)}},mt=function(i,o,T,U,H){this.type=i,this.operator=o,this.interpolation=T,this.input=U,this.labels=[],this.outputs=[];for(var lt=0,Tt=H;lt<Tt.length;lt+=1){var Lt=Tt[lt],Zt=Lt[1];this.labels.push(Lt[0]),this.outputs.push(Zt)}};function wt(s,i,o,T){var U=T-o,H=s-o;return 0===U?0:1===i?H/U:(Math.pow(i,H)-1)/(Math.pow(i,U)-1)}mt.interpolationFactor=function(i,o,T,U){var H=0;if("exponential"===i.name)H=wt(o,i.base,T,U);else if("linear"===i.name)H=wt(o,1,T,U);else if("cubic-bezier"===i.name){var lt=i.controlPoints;H=new _s(lt[0],lt[1],lt[2],lt[3]).solve(wt(o,1,T,U))}return H},mt.parse=function(i,o){var T=i[0],U=i[1],H=i[2],lt=i.slice(3);if(!Array.isArray(U)||0===U.length)return o.error("Expected an interpolation type expression.",1);if("linear"===U[0])U={name:"linear"};else if("exponential"===U[0]){var Tt=U[1];if("number"!=typeof Tt)return o.error("Exponential interpolation requires a numeric base.",1,1);U={name:"exponential",base:Tt}}else{if("cubic-bezier"!==U[0])return o.error("Unknown interpolation type "+String(U[0]),1,0);var Lt=U.slice(1);if(4!==Lt.length||Lt.some(function(p){return"number"!=typeof p||p<0||p>1}))return o.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);U={name:"cubic-bezier",controlPoints:Lt}}if(i.length-1<4)return o.error("Expected at least 4 arguments, but found only "+(i.length-1)+".");if((i.length-1)%2!=0)return o.error("Expected an even number of arguments.");if(!(H=o.parse(H,2,rt)))return null;var Dt=[],Zt=null;"interpolate-hcl"===T||"interpolate-lab"===T?Zt=K:o.expectedType&&"value"!==o.expectedType.kind&&(Zt=o.expectedType);for(var qt=0;qt<lt.length;qt+=2){var le=lt[qt],fe=lt[qt+1],we=qt+3,t=qt+4;if("number"!=typeof le)return o.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',we);if(Dt.length&&Dt[Dt.length-1][0]>=le)return o.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',we);var h=o.parse(fe,t,Zt);if(!h)return null;Zt=Zt||h.type,Dt.push([le,h])}return"number"===Zt.kind||"color"===Zt.kind||"array"===Zt.kind&&"number"===Zt.itemType.kind&&"number"==typeof Zt.N?new mt(Zt,T,U,H,Dt):o.error("Type "+se(Zt)+" is not interpolatable.")},mt.prototype.evaluate=function(i){var o=this.labels,T=this.outputs;if(1===o.length)return T[0].evaluate(i);var U=this.input.evaluate(i);if(U<=o[0])return T[0].evaluate(i);var H=o.length;if(U>=o[H-1])return T[H-1].evaluate(i);var lt=gs(o,U),Dt=mt.interpolationFactor(this.interpolation,U,o[lt],o[lt+1]),Zt=T[lt].evaluate(i),qt=T[lt+1].evaluate(i);return"interpolate"===this.operator?Yn[this.type.kind.toLowerCase()](Zt,qt,Dt):"interpolate-hcl"===this.operator?dt_reverse(dt_interpolate(dt_forward(Zt),dt_forward(qt),Dt)):ot.reverse(ot.interpolate(ot.forward(Zt),ot.forward(qt),Dt))},mt.prototype.eachChild=function(i){i(this.input);for(var o=0,T=this.outputs;o<T.length;o+=1)i(T[o])},mt.prototype.outputDefined=function(){return this.outputs.every(function(i){return i.outputDefined()})},mt.prototype.serialize=function(){var i;i="linear"===this.interpolation.name?["linear"]:"exponential"===this.interpolation.name?1===this.interpolation.base?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);for(var o=[this.operator,i,this.input.serialize()],T=0;T<this.labels.length;T++)o.push(this.labels[T],this.outputs[T].serialize());return o};var Qt=mt,ne=function(i,o){this.type=i,this.args=o};ne.parse=function(i,o){if(i.length<2)return o.error("Expectected at least one argument.");var T=null,U=o.expectedType;U&&"value"!==U.kind&&(T=U);for(var H=[],lt=0,Tt=i.slice(1);lt<Tt.length;lt+=1){var Dt=o.parse(Tt[lt],1+H.length,T,void 0,{typeAnnotation:"omit"});if(!Dt)return null;T=T||Dt.type,H.push(Dt)}var Zt=U&&H.some(function(qt){return ce(U,qt.type)});return new ne(Zt?it:T,H)},ne.prototype.evaluate=function(i){for(var U,o=null,T=0,H=0,lt=this.args;H<lt.length;H+=1){if(T++,(o=lt[H].evaluate(i))&&o instanceof Qe&&!o.available&&(U||(U=o),o=null,T===this.args.length))return U;if(null!==o)break}return o},ne.prototype.eachChild=function(i){this.args.forEach(i)},ne.prototype.outputDefined=function(){return this.args.every(function(i){return i.outputDefined()})},ne.prototype.serialize=function(){var i=["coalesce"];return this.eachChild(function(o){i.push(o.serialize())}),i};var xe=ne,Me=function(i,o){this.type=o.type,this.bindings=[].concat(i),this.result=o};Me.prototype.evaluate=function(i){return this.result.evaluate(i)},Me.prototype.eachChild=function(i){for(var o=0,T=this.bindings;o<T.length;o+=1)i(T[o][1]);i(this.result)},Me.parse=function(i,o){if(i.length<4)return o.error("Expected at least 3 arguments, but found "+(i.length-1)+" instead.");for(var T=[],U=1;U<i.length-1;U+=2){var H=i[U];if("string"!=typeof H)return o.error("Expected string, but found "+typeof H+" instead.",U);if(/[^a-zA-Z0-9_]/.test(H))return o.error("Variable names must contain only alphanumeric characters or '_'.",U);var lt=o.parse(i[U+1],U+1);if(!lt)return null;T.push([H,lt])}var Tt=o.parse(i[i.length-1],i.length-1,o.expectedType,T);return Tt?new Me(T,Tt):null},Me.prototype.outputDefined=function(){return this.result.outputDefined()},Me.prototype.serialize=function(){for(var i=["let"],o=0,T=this.bindings;o<T.length;o+=1){var U=T[o];i.push(U[0],U[1].serialize())}return i.push(this.result.serialize()),i};var Le=Me,Ue=function(i,o,T){this.type=i,this.index=o,this.input=T};Ue.parse=function(i,o){if(3!==i.length)return o.error("Expected 2 arguments, but found "+(i.length-1)+" instead.");var T=o.parse(i[1],1,rt),U=o.parse(i[2],2,Ht(o.expectedType||it));return T&&U?new Ue(U.type.itemType,T,U):null},Ue.prototype.evaluate=function(i){var o=this.index.evaluate(i),T=this.input.evaluate(i);if(o<0)throw new ie("Array index out of bounds: "+o+" < 0.");if(o>=T.length)throw new ie("Array index out of bounds: "+o+" > "+(T.length-1)+".");if(o!==Math.floor(o))throw new ie("Array index must be an integer, but found "+o+" instead.");return T[o]},Ue.prototype.eachChild=function(i){i(this.index),i(this.input)},Ue.prototype.outputDefined=function(){return!1},Ue.prototype.serialize=function(){return["at",this.index.serialize(),this.input.serialize()]};var $e=Ue,Ye=function(i,o){this.type=M,this.needle=i,this.haystack=o};Ye.parse=function(i,o){if(3!==i.length)return o.error("Expected 2 arguments, but found "+(i.length-1)+" instead.");var T=o.parse(i[1],1,it),U=o.parse(i[2],2,it);return T&&U?ee(T.type,[M,q,rt,Mt,it])?new Ye(T,U):o.error("Expected first argument to be of type boolean, string, number or null, but found "+se(T.type)+" instead"):null},Ye.prototype.evaluate=function(i){var o=this.needle.evaluate(i),T=this.haystack.evaluate(i);if(null==T)return!1;if(!We(o,["boolean","string","number","null"]))throw new ie("Expected first argument to be of type boolean, string, number or null, but found "+se(J(o))+" instead.");if(!We(T,["string","array"]))throw new ie("Expected second argument to be of type array or string, but found "+se(J(T))+" instead.");return T.indexOf(o)>=0},Ye.prototype.eachChild=function(i){i(this.needle),i(this.haystack)},Ye.prototype.outputDefined=function(){return!0},Ye.prototype.serialize=function(){return["in",this.needle.serialize(),this.haystack.serialize()]};var li=Ye,ti=function(i,o,T){this.type=rt,this.needle=i,this.haystack=o,this.fromIndex=T};ti.parse=function(i,o){if(i.length<=2||i.length>=5)return o.error("Expected 3 or 4 arguments, but found "+(i.length-1)+" instead.");var T=o.parse(i[1],1,it),U=o.parse(i[2],2,it);if(!T||!U)return null;if(!ee(T.type,[M,q,rt,Mt,it]))return o.error("Expected first argument to be of type boolean, string, number or null, but found "+se(T.type)+" instead");if(4===i.length){var H=o.parse(i[3],3,rt);return H?new ti(T,U,H):null}return new ti(T,U)},ti.prototype.evaluate=function(i){var o=this.needle.evaluate(i),T=this.haystack.evaluate(i);if(!We(o,["boolean","string","number","null"]))throw new ie("Expected first argument to be of type boolean, string, number or null, but found "+se(J(o))+" instead.");if(!We(T,["string","array"]))throw new ie("Expected second argument to be of type array or string, but found "+se(J(T))+" instead.");if(this.fromIndex){var U=this.fromIndex.evaluate(i);return T.indexOf(o,U)}return T.indexOf(o)},ti.prototype.eachChild=function(i){i(this.needle),i(this.haystack),this.fromIndex&&i(this.fromIndex)},ti.prototype.outputDefined=function(){return!1},ti.prototype.serialize=function(){if(null!=this.fromIndex&&void 0!==this.fromIndex){var i=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),i]}return["index-of",this.needle.serialize(),this.haystack.serialize()]};var Bi=ti,ii=function(i,o,T,U,H,lt){this.inputType=i,this.type=o,this.input=T,this.cases=U,this.outputs=H,this.otherwise=lt};ii.parse=function(i,o){if(i.length<5)return o.error("Expected at least 4 arguments, but found only "+(i.length-1)+".");if(i.length%2!=1)return o.error("Expected an even number of arguments.");var T,U;o.expectedType&&"value"!==o.expectedType.kind&&(U=o.expectedType);for(var H={},lt=[],Tt=2;Tt<i.length-1;Tt+=2){var Lt=i[Tt],Dt=i[Tt+1];Array.isArray(Lt)||(Lt=[Lt]);var Zt=o.concat(Tt);if(0===Lt.length)return Zt.error("Expected at least one branch label.");for(var qt=0,le=Lt;qt<le.length;qt+=1){var fe=le[qt];if("number"!=typeof fe&&"string"!=typeof fe)return Zt.error("Branch labels must be numbers or strings.");if("number"==typeof fe&&Math.abs(fe)>Number.MAX_SAFE_INTEGER)return Zt.error("Branch labels must be integers no larger than "+Number.MAX_SAFE_INTEGER+".");if("number"==typeof fe&&Math.floor(fe)!==fe)return Zt.error("Numeric branch labels must be integer values.");if(T){if(Zt.checkSubtype(T,J(fe)))return null}else T=J(fe);if(typeof H[String(fe)]<"u")return Zt.error("Branch labels must be unique.");H[String(fe)]=lt.length}var we=o.parse(Dt,Tt,U);if(!we)return null;U=U||we.type,lt.push(we)}var t=o.parse(i[1],1,it);if(!t)return null;var h=o.parse(i[i.length-1],i.length-1,U);return!h||"value"!==t.type.kind&&o.concat(1).checkSubtype(T,t.type)?null:new ii(T,U,t,H,lt,h)},ii.prototype.evaluate=function(i){var o=this.input.evaluate(i);return(J(o)===this.inputType&&this.outputs[this.cases[o]]||this.otherwise).evaluate(i)},ii.prototype.eachChild=function(i){i(this.input),this.outputs.forEach(i),i(this.otherwise)},ii.prototype.outputDefined=function(){return this.outputs.every(function(i){return i.outputDefined()})&&this.otherwise.outputDefined()},ii.prototype.serialize=function(){for(var i=this,o=["match",this.input.serialize()],U=[],H={},lt=0,Tt=Object.keys(this.cases).sort();lt<Tt.length;lt+=1){var Lt=Tt[lt];void 0===(Dt=H[this.cases[Lt]])?(H[this.cases[Lt]]=U.length,U.push([this.cases[Lt],[Lt]])):U[Dt][1].push(Lt)}for(var Zt=function(t){return"number"===i.inputType.kind?Number(t):t},qt=0,le=U;qt<le.length;qt+=1){var fe=le[qt],Dt=fe[0],we=fe[1];o.push(1===we.length?Zt(we[0]):we.map(Zt)),o.push(this.outputs[outputIndex$1].serialize())}return o.push(this.otherwise.serialize()),o};var mi=ii,fi=function(i,o,T){this.type=i,this.branches=o,this.otherwise=T};fi.parse=function(i,o){if(i.length<4)return o.error("Expected at least 3 arguments, but found only "+(i.length-1)+".");if(i.length%2!=0)return o.error("Expected an odd number of arguments.");var T;o.expectedType&&"value"!==o.expectedType.kind&&(T=o.expectedType);for(var U=[],H=1;H<i.length-1;H+=2){var lt=o.parse(i[H],H,M);if(!lt)return null;var Tt=o.parse(i[H+1],H+1,T);if(!Tt)return null;U.push([lt,Tt]),T=T||Tt.type}var Lt=o.parse(i[i.length-1],i.length-1,T);return Lt?new fi(T,U,Lt):null},fi.prototype.evaluate=function(i){for(var o=0,T=this.branches;o<T.length;o+=1){var U=T[o],lt=U[1];if(U[0].evaluate(i))return lt.evaluate(i)}return this.otherwise.evaluate(i)},fi.prototype.eachChild=function(i){for(var o=0,T=this.branches;o<T.length;o+=1){var U=T[o],lt=U[1];i(U[0]),i(lt)}i(this.otherwise)},fi.prototype.outputDefined=function(){return this.branches.every(function(i){return i[1].outputDefined()})&&this.otherwise.outputDefined()},fi.prototype.serialize=function(){var i=["case"];return this.eachChild(function(o){i.push(o.serialize())}),i};var bi=fi,hi=function(i,o,T,U){this.type=i,this.input=o,this.beginIndex=T,this.endIndex=U};hi.parse=function(i,o){if(i.length<=2||i.length>=5)return o.error("Expected 3 or 4 arguments, but found "+(i.length-1)+" instead.");var T=o.parse(i[1],1,it),U=o.parse(i[2],2,rt);if(!T||!U)return null;if(!ee(T.type,[Ht(it),q,it]))return o.error("Expected first argument to be of type array or string, but found "+se(T.type)+" instead");if(4===i.length){var H=o.parse(i[3],3,rt);return H?new hi(T.type,T,U,H):null}return new hi(T.type,T,U)},hi.prototype.evaluate=function(i){var o=this.input.evaluate(i),T=this.beginIndex.evaluate(i);if(!We(o,["string","array"]))throw new ie("Expected first argument to be of type array or string, but found "+se(J(o))+" instead.");if(this.endIndex){var U=this.endIndex.evaluate(i);return o.slice(T,U)}return o.slice(T)},hi.prototype.eachChild=function(i){i(this.input),i(this.beginIndex),this.endIndex&&i(this.endIndex)},hi.prototype.outputDefined=function(){return!1},hi.prototype.serialize=function(){if(null!=this.endIndex&&void 0!==this.endIndex){var i=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),i]}return["slice",this.input.serialize(),this.beginIndex.serialize()]};var cn=hi;function zi(s,i){return"=="===s||"!="===s?"boolean"===i.kind||"string"===i.kind||"number"===i.kind||"null"===i.kind||"value"===i.kind:"string"===i.kind||"number"===i.kind||"value"===i.kind}function In(s,i,o,T){return 0===T.compare(i,o)}function bn(s,i,o){var T="=="!==s&&"!="!==s;return function(){function U(H,lt,Tt){this.type=M,this.lhs=H,this.rhs=lt,this.collator=Tt,this.hasUntypedArgument="value"===H.type.kind||"value"===lt.type.kind}return U.parse=function(lt,Tt){if(3!==lt.length&&4!==lt.length)return Tt.error("Expected two or three arguments.");var Lt=lt[0],Dt=Tt.parse(lt[1],1,it);if(!Dt)return null;if(!zi(Lt,Dt.type))return Tt.concat(1).error('"'+Lt+"\" comparisons are not supported for type '"+se(Dt.type)+"'.");var Zt=Tt.parse(lt[2],2,it);if(!Zt)return null;if(!zi(Lt,Zt.type))return Tt.concat(2).error('"'+Lt+"\" comparisons are not supported for type '"+se(Zt.type)+"'.");if(Dt.type.kind!==Zt.type.kind&&"value"!==Dt.type.kind&&"value"!==Zt.type.kind)return Tt.error("Cannot compare types '"+se(Dt.type)+"' and '"+se(Zt.type)+"'.");T&&("value"===Dt.type.kind&&"value"!==Zt.type.kind?Dt=new Ie(Zt.type,[Dt]):"value"!==Dt.type.kind&&"value"===Zt.type.kind&&(Zt=new Ie(Dt.type,[Zt])));var qt=null;if(4===lt.length){if("string"!==Dt.type.kind&&"string"!==Zt.type.kind&&"value"!==Dt.type.kind&&"value"!==Zt.type.kind)return Tt.error("Cannot use collator to compare non-string types.");if(!(qt=Tt.parse(lt[3],3,Et)))return null}return new U(Dt,Zt,qt)},U.prototype.evaluate=function(lt){var Tt=this.lhs.evaluate(lt),Lt=this.rhs.evaluate(lt);if(T&&this.hasUntypedArgument){var Dt=J(Tt),Zt=J(Lt);if(Dt.kind!==Zt.kind||"string"!==Dt.kind&&"number"!==Dt.kind)throw new ie('Expected arguments for "'+s+'" to be (string, string) or (number, number), but found ('+Dt.kind+", "+Zt.kind+") instead.")}if(this.collator&&!T&&this.hasUntypedArgument){var qt=J(Tt),le=J(Lt);if("string"!==qt.kind||"string"!==le.kind)return i(lt,Tt,Lt)}return this.collator?o(lt,Tt,Lt,this.collator.evaluate(lt)):i(lt,Tt,Lt)},U.prototype.eachChild=function(lt){lt(this.lhs),lt(this.rhs),this.collator&&lt(this.collator)},U.prototype.outputDefined=function(){return!0},U.prototype.serialize=function(){var lt=[s];return this.eachChild(function(Tt){lt.push(Tt.serialize())}),lt},U}()}var va=bn("==",function wi(s,i,o){return i===o},In),ya=bn("!=",function Ms(s,i,o){return i!==o},function Hs(s,i,o,T){return!In(0,i,o,T)}),Ea=bn("<",function qn(s,i,o){return i<o},function _a(s,i,o,T){return T.compare(i,o)<0}),xa=bn(">",function dn(s,i,o){return i>o},function ma(s,i,o,T){return T.compare(i,o)>0}),Ma=bn("<=",function Ts(s,i,o){return i<=o},function pa(s,i,o,T){return T.compare(i,o)<=0}),Ta=bn(">=",function Ps(s,i,o){return i>=o},function An(s,i,o,T){return T.compare(i,o)>=0}),fn=function(i,o,T,U,H,lt){this.type=q,this.number=i,this.locale=o,this.currency=T,this.unit=U,this.minFractionDigits=H,this.maxFractionDigits=lt};fn.parse=function(i,o){if(3!==i.length)return o.error("Expected two arguments.");var T=o.parse(i[1],1,rt);if(!T)return null;var U=i[2];if("object"!=typeof U||Array.isArray(U))return o.error("NumberFormat options argument must be an object.");var H=null;if(U.locale&&!(H=o.parse(U.locale,1,q)))return null;var lt=null;if(U.currency&&!(lt=o.parse(U.currency,1,q)))return null;var Tt=null;if(U.unit&&!(Tt=o.parse(U.unit,1,q)))return null;var Lt=null;if(U["min-fraction-digits"]&&!(Lt=o.parse(U["min-fraction-digits"],1,rt)))return null;var Dt=null;return U["max-fraction-digits"]&&!(Dt=o.parse(U["max-fraction-digits"],1,rt))?null:new fn(T,H,lt,Tt,Lt,Dt)},fn.prototype.evaluate=function(i){return new Intl.NumberFormat(this.locale?this.locale.evaluate(i):[],{style:(this.currency?"currency":this.unit&&"unit")||"decimal",currency:this.currency?this.currency.evaluate(i):void 0,unit:this.unit?this.unit.evaluate(i):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(i):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(i):void 0}).format(this.number.evaluate(i))},fn.prototype.eachChild=function(i){i(this.number),this.locale&&i(this.locale),this.currency&&i(this.currency),this.unit&&i(this.unit),this.minFractionDigits&&i(this.minFractionDigits),this.maxFractionDigits&&i(this.maxFractionDigits)},fn.prototype.outputDefined=function(){return!1},fn.prototype.serialize=function(){var i={};return this.locale&&(i.locale=this.locale.serialize()),this.currency&&(i.currency=this.currency.serialize()),this.unit&&(i.unit=this.unit.serialize()),this.minFractionDigits&&(i["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(i["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),i]};var Pa=fn,gn=function(i){this.type=rt,this.input=i};gn.parse=function(i,o){if(2!==i.length)return o.error("Expected 1 argument, but found "+(i.length-1)+" instead.");var T=o.parse(i[1],1);return T?"array"!==T.type.kind&&"string"!==T.type.kind&&"value"!==T.type.kind?o.error("Expected argument of type string or array, but found "+se(T.type)+" instead."):new gn(T):null},gn.prototype.evaluate=function(i){var o=this.input.evaluate(i);if("string"==typeof o)return o.length;if(Array.isArray(o))return o.length;throw new ie("Expected value to be of type string or array, but found "+se(J(o))+" instead.")},gn.prototype.eachChild=function(i){i(this.input)},gn.prototype.outputDefined=function(){return!1},gn.prototype.serialize=function(){var i=["length"];return this.eachChild(function(o){i.push(o.serialize())}),i};var Rr={"==":va,"!=":ya,">":xa,"<":Ea,">=":Ta,"<=":Ma,array:Ie,at:$e,boolean:Ie,case:bi,coalesce:xe,collator:Gi,format:je,image:ni,in:li,"index-of":Bi,interpolate:Qt,"interpolate-hcl":Qt,"interpolate-lab":Qt,length:gn,let:Le,literal:It,match:mi,number:Ie,"number-format":Pa,object:Ie,slice:cn,step:Vn,string:Ie,"to-boolean":pi,"to-color":pi,"to-number":pi,"to-string":pi,var:fs,within:kn};function Or(s,i){var o=i[0],T=i[1],U=i[2],H=i[3];o=o.evaluate(s),T=T.evaluate(s),U=U.evaluate(s);var lt=H?H.evaluate(s):1,Tt=ei(o,T,U,lt);if(Tt)throw new ie(Tt);return new _e(o/255*lt,T/255*lt,U/255*lt,lt)}function Sr(s,i){return s in i}function Js(s,i){var o=i[s];return typeof o>"u"?null:o}function di(s){return{type:s}}_i.register(Rr,{error:[{kind:"error"},[q],function(s,i){throw new ie(i[0].evaluate(s))}],typeof:[q,[it],function(s,i){return se(J(i[0].evaluate(s)))}],"to-rgba":[Ht(rt,4),[K],function(s,i){return i[0].evaluate(s).toArray()}],rgb:[K,[rt,rt,rt],Or],rgba:[K,[rt,rt,rt,rt],Or],has:{type:M,overloads:[[[q],function(s,i){return Sr(i[0].evaluate(s),s.properties())}],[[q,et],function(s,i){var T=i[1];return Sr(i[0].evaluate(s),T.evaluate(s))}]]},get:{type:it,overloads:[[[q],function(s,i){return Js(i[0].evaluate(s),s.properties())}],[[q,et],function(s,i){var T=i[1];return Js(i[0].evaluate(s),T.evaluate(s))}]]},"feature-state":[it,[q],function(s,i){return Js(i[0].evaluate(s),s.featureState||{})}],properties:[et,[],function(s){return s.properties()}],"geometry-type":[q,[],function(s){return s.geometryType()}],id:[it,[],function(s){return s.id()}],zoom:[rt,[],function(s){return s.globals.zoom}],pitch:[rt,[],function(s){return s.globals.pitch||0}],"distance-from-center":[rt,[],function(s){return s.distanceFromCenter()}],"heatmap-density":[rt,[],function(s){return s.globals.heatmapDensity||0}],"line-progress":[rt,[],function(s){return s.globals.lineProgress||0}],"sky-radial-progress":[rt,[],function(s){return s.globals.skyRadialProgress||0}],accumulated:[it,[],function(s){return void 0===s.globals.accumulated?null:s.globals.accumulated}],"+":[rt,di(rt),function(s,i){for(var o=0,T=0,U=i;T<U.length;T+=1)o+=U[T].evaluate(s);return o}],"*":[rt,di(rt),function(s,i){for(var o=1,T=0,U=i;T<U.length;T+=1)o*=U[T].evaluate(s);return o}],"-":{type:rt,overloads:[[[rt,rt],function(s,i){var T=i[1];return i[0].evaluate(s)-T.evaluate(s)}],[[rt],function(s,i){return-i[0].evaluate(s)}]]},"/":[rt,[rt,rt],function(s,i){var T=i[1];return i[0].evaluate(s)/T.evaluate(s)}],"%":[rt,[rt,rt],function(s,i){var T=i[1];return i[0].evaluate(s)%T.evaluate(s)}],ln2:[rt,[],function(){return Math.LN2}],pi:[rt,[],function(){return Math.PI}],e:[rt,[],function(){return Math.E}],"^":[rt,[rt,rt],function(s,i){var T=i[1];return Math.pow(i[0].evaluate(s),T.evaluate(s))}],sqrt:[rt,[rt],function(s,i){return Math.sqrt(i[0].evaluate(s))}],log10:[rt,[rt],function(s,i){return Math.log(i[0].evaluate(s))/Math.LN10}],ln:[rt,[rt],function(s,i){return Math.log(i[0].evaluate(s))}],log2:[rt,[rt],function(s,i){return Math.log(i[0].evaluate(s))/Math.LN2}],sin:[rt,[rt],function(s,i){return Math.sin(i[0].evaluate(s))}],cos:[rt,[rt],function(s,i){return Math.cos(i[0].evaluate(s))}],tan:[rt,[rt],function(s,i){return Math.tan(i[0].evaluate(s))}],asin:[rt,[rt],function(s,i){return Math.asin(i[0].evaluate(s))}],acos:[rt,[rt],function(s,i){return Math.acos(i[0].evaluate(s))}],atan:[rt,[rt],function(s,i){return Math.atan(i[0].evaluate(s))}],min:[rt,di(rt),function(s,i){return Math.min.apply(Math,i.map(function(o){return o.evaluate(s)}))}],max:[rt,di(rt),function(s,i){return Math.max.apply(Math,i.map(function(o){return o.evaluate(s)}))}],abs:[rt,[rt],function(s,i){return Math.abs(i[0].evaluate(s))}],round:[rt,[rt],function(s,i){var T=i[0].evaluate(s);return T<0?-Math.round(-T):Math.round(T)}],floor:[rt,[rt],function(s,i){return Math.floor(i[0].evaluate(s))}],ceil:[rt,[rt],function(s,i){return Math.ceil(i[0].evaluate(s))}],"filter-==":[M,[q,it],function(s,i){var o=i[0],T=i[1];return s.properties()[o.value]===T.value}],"filter-id-==":[M,[it],function(s,i){var o=i[0];return s.id()===o.value}],"filter-type-==":[M,[q],function(s,i){var o=i[0];return s.geometryType()===o.value}],"filter-<":[M,[q,it],function(s,i){var o=i[0],T=i[1],U=s.properties()[o.value],H=T.value;return typeof U==typeof H&&U<H}],"filter-id-<":[M,[it],function(s,i){var o=i[0],T=s.id(),U=o.value;return typeof T==typeof U&&T<U}],"filter->":[M,[q,it],function(s,i){var o=i[0],T=i[1],U=s.properties()[o.value],H=T.value;return typeof U==typeof H&&U>H}],"filter-id->":[M,[it],function(s,i){var o=i[0],T=s.id(),U=o.value;return typeof T==typeof U&&T>U}],"filter-<=":[M,[q,it],function(s,i){var o=i[0],T=i[1],U=s.properties()[o.value],H=T.value;return typeof U==typeof H&&U<=H}],"filter-id-<=":[M,[it],function(s,i){var o=i[0],T=s.id(),U=o.value;return typeof T==typeof U&&T<=U}],"filter->=":[M,[q,it],function(s,i){var o=i[0],T=i[1],U=s.properties()[o.value],H=T.value;return typeof U==typeof H&&U>=H}],"filter-id->=":[M,[it],function(s,i){var o=i[0],T=s.id(),U=o.value;return typeof T==typeof U&&T>=U}],"filter-has":[M,[it],function(s,i){return i[0].value in s.properties()}],"filter-has-id":[M,[],function(s){return null!==s.id()&&void 0!==s.id()}],"filter-type-in":[M,[Ht(q)],function(s,i){return i[0].value.indexOf(s.geometryType())>=0}],"filter-id-in":[M,[Ht(it)],function(s,i){return i[0].value.indexOf(s.id())>=0}],"filter-in-small":[M,[q,Ht(it)],function(s,i){var o=i[0];return i[1].value.indexOf(s.properties()[o.value])>=0}],"filter-in-large":[M,[q,Ht(it)],function(s,i){var o=i[0],T=i[1];return function Ra(s,i,o,T){for(;o<=T;){var U=o+T>>1;if(i[U]===s)return!0;i[U]>s?T=U-1:o=U+1}return!1}(s.properties()[o.value],T.value,0,T.value.length-1)}],all:{type:M,overloads:[[[M,M],function(s,i){var T=i[1];return i[0].evaluate(s)&&T.evaluate(s)}],[di(M),function(s,i){for(var o=0,T=i;o<T.length;o+=1)if(!T[o].evaluate(s))return!1;return!0}]]},any:{type:M,overloads:[[[M,M],function(s,i){var T=i[1];return i[0].evaluate(s)||T.evaluate(s)}],[di(M),function(s,i){for(var o=0,T=i;o<T.length;o+=1)if(T[o].evaluate(s))return!0;return!1}]]},"!":[M,[M],function(s,i){return!i[0].evaluate(s)}],"is-supported-script":[M,[q],function(s,i){var T=s.globals&&s.globals.isSupportedScript;return!T||T(i[0].evaluate(s))}],upcase:[q,[q],function(s,i){return i[0].evaluate(s).toUpperCase()}],downcase:[q,[q],function(s,i){return i[0].evaluate(s).toLowerCase()}],concat:[q,di(it),function(s,i){return i.map(function(o){return _t(o.evaluate(s))}).join("")}],"resolved-locale":[q,[Et],function(s,i){return i[0].evaluate(s).resolvedLocale()}]});var Ln=Rr;function _n(s){return{result:"success",value:s}}function Ki(s){return{result:"error",value:s}}function es(s){return"object"==typeof s&&null!==s&&!Array.isArray(s)}var Qs=function(i,o){this.expression=i,this._warningHistory={},this._evaluator=new vi,this._defaultValue=o?function Ia(s){return"color"===s.type&&(es(s.default)||Array.isArray(s.default))?new _e(0,0,0,0):"color"===s.type?_e.parse(s.default)||null:void 0===s.default?null:s.default}(o):null,this._enumValues=o&&"enum"===o.type?o.values:null};function $s(s,i){var o=new Ji(Ln,[],i?function Sa(s){var i={color:K,string:q,number:rt,enum:q,boolean:M,formatted:At,resolvedImage:Wt};return"array"===s.type?Ht(i[s.value]||it,s.length):i[s.type]}(i):void 0),T=o.parse(s,void 0,void 0,void 0,i&&"string"===i.type?{typeAnnotation:"coerce"}:void 0);return T?_n(new Qs(T,i)):Ki(o.errors)}Qs.prototype.evaluateWithoutErrorHandling=function(i,o,T,U,H,lt,Tt,Lt){return this._evaluator.globals=i,this._evaluator.feature=o,this._evaluator.featureState=T,this._evaluator.canonical=U||null,this._evaluator.availableImages=H||null,this._evaluator.formattedSection=lt,this._evaluator.featureTileCoord=Tt||null,this._evaluator.featureDistanceData=Lt||null,this.expression.evaluate(this._evaluator)},Qs.prototype.evaluate=function(i,o,T,U,H,lt,Tt,Lt){this._evaluator.globals=i,this._evaluator.feature=o||null,this._evaluator.featureState=T||null,this._evaluator.canonical=U||null,this._evaluator.availableImages=H||null,this._evaluator.formattedSection=lt||null,this._evaluator.featureTileCoord=Tt||null,this._evaluator.featureDistanceData=Lt||null;try{var Dt=this.expression.evaluate(this._evaluator);if(null==Dt||"number"==typeof Dt&&Dt!=Dt)return this._defaultValue;if(this._enumValues&&!(Dt in this._enumValues))throw new ie("Expected value to be one of "+Object.keys(this._enumValues).map(function(Zt){return JSON.stringify(Zt)}).join(", ")+", but found "+JSON.stringify(Dt)+" instead.");return Dt}catch(Zt){return this._warningHistory[Zt.message]||(this._warningHistory[Zt.message]=!0,typeof console<"u"&&console.warn(Zt.message)),this._defaultValue}};var Cs=function(i,o){this.kind=i,this._styleExpression=o,this.isStateDependent="constant"!==i&&!Xn(o.expression)};Cs.prototype.evaluateWithoutErrorHandling=function(i,o,T,U,H,lt){return this._styleExpression.evaluateWithoutErrorHandling(i,o,T,U,H,lt)},Cs.prototype.evaluate=function(i,o,T,U,H,lt){return this._styleExpression.evaluate(i,o,T,U,H,lt)};var is=function(i,o,T,U){this.kind=i,this.zoomStops=T,this._styleExpression=o,this.isStateDependent="camera"!==i&&!Xn(o.expression),this.interpolationType=U};function sn(s,i){if("error"===(s=$s(s,i)).result)return s;var o=s.value.expression,T=un(o);if(!T&&!function ts(s){return"data-driven"===s["property-type"]}(i))return Ki([new ue("","data expressions not supported")]);var U=Cn(o,["zoom","pitch","distance-from-center"]);if(!U&&!function wn(s){return!!s.expression&&s.expression.parameters.indexOf("zoom")>-1}(i))return Ki([new ue("","zoom expressions not supported")]);var H=Rs(o);return H||U?H instanceof ue?Ki([H]):H instanceof Qt&&!function Dn(s){return!!s.expression&&s.expression.interpolated}(i)?Ki([new ue("",'"interpolate" expressions cannot be used with this property')]):_n(H?new is(T?"camera":"composite",s.value,H.labels,H instanceof Qt?H.interpolation:void 0):new Cs(T?"constant":"source",s.value)):Ki([new ue("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}function Rs(s){var i=null;if(s instanceof Le)i=Rs(s.result);else if(s instanceof xe)for(var o=0,T=s.args;o<T.length&&!(i=Rs(T[o]));o+=1);else(s instanceof Vn||s instanceof Qt)&&s.input instanceof _i&&"zoom"===s.input.name&&(i=s);return i instanceof ue||s.eachChild(function(H){var lt=Rs(H);lt instanceof ue?i=lt:!i&&lt?i=new ue("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):i&&lt&&i!==lt&&(i=new ue("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),i}function qs(s){if(Array.isArray(s))return s.map(qs);if(s instanceof Object&&!(s instanceof Number||s instanceof String||s instanceof Boolean)){var i={};for(var o in s)i[o]=qs(s[o]);return i}return function Aa(s){return s instanceof Number||s instanceof String||s instanceof Boolean?s.valueOf():s}(s)}is.prototype.evaluateWithoutErrorHandling=function(i,o,T,U,H,lt){return this._styleExpression.evaluateWithoutErrorHandling(i,o,T,U,H,lt)},is.prototype.evaluate=function(i,o,T,U,H,lt){return this._styleExpression.evaluate(i,o,T,U,H,lt)},is.prototype.interpolationFactor=function(i,o,T){return this.interpolationType?Qt.interpolationFactor(this.interpolationType,i,o,T):0};var Ir={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},terrain:{type:"terrain"},fog:{type:"fog"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},projection:{type:"projection"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{},sky:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background","layout_sky"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_sky:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"},"fill-extrusion-edge-radius":{type:"number",private:!0,default:0,minimum:0,maximum:1,"property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_symbol:{type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature","pitch","distance-from-center"]}},filter_fill:{type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},filter_line:{type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},filter_circle:{type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},"filter_fill-extrusion":{type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},filter_heatmap:{type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},expression_name:{type:"enum",values:{let:{group:"Variable binding"},var:{group:"Variable binding"},literal:{group:"Types"},array:{group:"Types"},at:{group:"Lookup"},in:{group:"Lookup"},"index-of":{group:"Lookup"},slice:{group:"Lookup"},case:{group:"Decision"},match:{group:"Decision"},coalesce:{group:"Decision"},step:{group:"Ramps, scales, curves"},interpolate:{group:"Ramps, scales, curves"},"interpolate-hcl":{group:"Ramps, scales, curves"},"interpolate-lab":{group:"Ramps, scales, curves"},ln2:{group:"Math"},pi:{group:"Math"},e:{group:"Math"},typeof:{group:"Types"},string:{group:"Types"},number:{group:"Types"},boolean:{group:"Types"},object:{group:"Types"},collator:{group:"Types"},format:{group:"Types"},image:{group:"Types"},"number-format":{group:"Types"},"to-string":{group:"Types"},"to-number":{group:"Types"},"to-boolean":{group:"Types"},"to-rgba":{group:"Color"},"to-color":{group:"Types"},rgb:{group:"Color"},rgba:{group:"Color"},get:{group:"Lookup"},has:{group:"Lookup"},length:{group:"Lookup"},properties:{group:"Feature data"},"feature-state":{group:"Feature data"},"geometry-type":{group:"Feature data"},id:{group:"Feature data"},zoom:{group:"Camera"},pitch:{group:"Camera"},"distance-from-center":{group:"Camera"},"heatmap-density":{group:"Heatmap"},"line-progress":{group:"Feature data"},"sky-radial-progress":{group:"sky"},accumulated:{group:"Feature data"},"+":{group:"Math"},"*":{group:"Math"},"-":{group:"Math"},"/":{group:"Math"},"%":{group:"Math"},"^":{group:"Math"},sqrt:{group:"Math"},log10:{group:"Math"},ln:{group:"Math"},log2:{group:"Math"},sin:{group:"Math"},cos:{group:"Math"},tan:{group:"Math"},asin:{group:"Math"},acos:{group:"Math"},atan:{group:"Math"},min:{group:"Math"},max:{group:"Math"},round:{group:"Math"},abs:{group:"Math"},ceil:{group:"Math"},floor:{group:"Math"},distance:{group:"Math"},"==":{group:"Decision"},"!=":{group:"Decision"},">":{group:"Decision"},"<":{group:"Decision"},">=":{group:"Decision"},"<=":{group:"Decision"},all:{group:"Decision"},any:{group:"Decision"},"!":{group:"Decision"},within:{group:"Decision"},"is-supported-script":{group:"String"},upcase:{group:"String"},downcase:{group:"String"},concat:{group:"String"},"resolved-locale":{group:"String"}}},fog:{range:{type:"array",default:[.5,10],minimum:-20,maximum:20,length:2,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"high-color":{type:"color","property-type":"data-constant",default:"#245cdf",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"space-color":{type:"color","property-type":"data-constant",default:["interpolate",["linear"],["zoom"],4,"#010b19",7,"#367ab9"],expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-blend":{type:"number","property-type":"data-constant",default:["interpolate",["linear"],["zoom"],4,.2,7,.1],minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"star-intensity":{type:"number","property-type":"data-constant",default:["interpolate",["linear"],["zoom"],5,.35,6,0],minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},projection:{name:{type:"enum",values:{albers:{},equalEarth:{},equirectangular:{},lambertConformalConic:{},mercator:{},naturalEarth:{},winkelTripel:{},globe:{}},default:"mercator",required:!0},center:{type:"array",length:2,value:"number","property-type":"data-constant",minimum:[-180,-90],maximum:[180,90],transition:!1,requires:[{name:["albers","lambertConformalConic"]}]},parallels:{type:"array",length:2,value:"number","property-type":"data-constant",minimum:[-90,-90],maximum:[90,90],transition:!1,requires:[{name:["albers","lambertConformalConic"]}]}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number","property-type":"data-constant",default:1,minimum:0,maximum:1e3,expression:{interpolated:!0,parameters:["zoom"]},transition:!0,requires:["source"]}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background","paint_sky"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!1,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!1,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-ambient-occlusion-intensity":{"property-type":"data-constant",type:"number",private:!0,default:0,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fill-extrusion-ambient-occlusion-radius":{"property-type":"data-constant",type:"number",private:!0,default:3,minimum:0,expression:{interpolated:!0,parameters:["zoom"]},transition:!0,requires:["fill-extrusion-edge-radius"]}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!1,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-pattern":{type:"resolvedImage",transition:!1,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"},"line-trim-offset":{type:"array",value:"number",length:2,default:[0,0],minimum:[0,0],maximum:[1,1],transition:!1,requires:[{source:"geojson",has:{lineMetrics:!0}}],"property-type":"constant"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_sky:{"sky-type":{type:"enum",values:{gradient:{},atmosphere:{}},default:"atmosphere",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun":{type:"array",value:"number",length:2,units:"degrees",minimum:[0,0],maximum:[360,180],transition:!1,requires:[{"sky-type":"atmosphere"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun-intensity":{type:"number",requires:[{"sky-type":"atmosphere"}],default:10,minimum:0,maximum:100,transition:!1,"property-type":"data-constant"},"sky-gradient-center":{type:"array",requires:[{"sky-type":"gradient"}],value:"number",default:[0,0],length:2,units:"degrees",minimum:[0,0],maximum:[360,180],transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-gradient-radius":{type:"number",requires:[{"sky-type":"gradient"}],default:90,minimum:0,maximum:180,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-gradient":{type:"color",default:["interpolate",["linear"],["sky-radial-progress"],.8,"#87ceeb",1,"white"],transition:!1,requires:[{"sky-type":"gradient"}],expression:{interpolated:!0,parameters:["sky-radial-progress"]},"property-type":"color-ramp"},"sky-atmosphere-halo-color":{type:"color",default:"white",transition:!1,requires:[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-atmosphere-color":{type:"color",default:"white",transition:!1,requires:[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};function Ar(s){if(!0===s||!1===s)return!0;if(!Array.isArray(s)||0===s.length)return!1;switch(s[0]){case"has":return s.length>=2&&"$id"!==s[1]&&"$type"!==s[1];case"in":return s.length>=3&&("string"!=typeof s[1]||Array.isArray(s[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return 3!==s.length||Array.isArray(s[1])||Array.isArray(s[2]);case"any":case"all":for(var i=0,o=s.slice(1);i<o.length;i+=1){var T=o[i];if(!Ar(T)&&"boolean"!=typeof T)return!1}return!0;default:return!0}}function ba(s,i){if(void 0===i&&(i="fill"),null==s)return{filter:function(){return!0},needGeometry:!1,needFeature:!1};Ar(s)||(s=Wi(s));var o=s,T=!0;try{T=function La(s){if(!Fn(s))return s;var i=qs(s);return Lr(i),i=br(i)}(o)}catch{console.warn("Failed to extract static filter. Filter will continue working, but at higher memory usage and slower framerate.\nThis is most likely a bug, please report this via https://github.com/mapbox/mapbox-gl-js/issues/new?assignees=&labels=&template=Bug_report.md\nand paste the contents of this message in the report.\nThank you!\nFilter Expression:\n"+JSON.stringify(o,null,2)+"\n        ")}var lt,U=Ir["filter_"+i],H=$s(T,U);if("error"===H.result)throw new Error(H.value.map(function(qt){return qt.key+": "+qt.message}).join(", "));lt=function(qt,le,fe){return H.value.evaluate(qt,le,{},fe)};var Tt=null,Lt=null;if(T!==o){var Dt=$s(o,U);if("error"===Dt.result)throw new Error(Dt.value.map(function(qt){return qt.key+": "+qt.message}).join(", "));Tt=function(qt,le,fe,we,t){return Dt.value.evaluate(qt,le,{},fe,void 0,void 0,we,t)},Lt=!un(Dt.value.expression)}return{filter:lt,dynamicFilter:Tt||void 0,needGeometry:wr(T),needFeature:!!Lt}}function br(s){if(!Array.isArray(s))return s;var i=function Fa(s){if(Da.has(s[0]))for(var i=1;i<s.length;i++)if(Fn(s[i]))return!0;return s}(s);return!0===i?i:i.map(function(o){return br(o)})}function Lr(s){var i=!1,o=[];if("case"===s[0]){for(var T=1;T<s.length-1;T+=2)i=i||Fn(s[T]),o.push(s[T+1]);o.push(s[s.length-1])}else if("match"===s[0]){i=i||Fn(s[1]);for(var U=2;U<s.length-1;U+=2)o.push(s[U+1]);o.push(s[s.length-1])}else if("step"===s[0]){i=i||Fn(s[1]);for(var H=1;H<s.length-1;H+=2)o.push(s[H+1])}i&&(s.length=0,s.push.apply(s,["any"].concat(o)));for(var lt=1;lt<s.length;lt++)Lr(s[lt])}function Fn(s){if(!Array.isArray(s))return!1;if(function wa(s){return"pitch"===s||"distance-from-center"===s}(s[0]))return!0;for(var i=1;i<s.length;i++)if(Fn(s[i]))return!0;return!1}var Da=new Set(["in","==","!=",">",">=","<","<=","to-boolean"]);function Na(s,i){return s<i?-1:s>i?1:0}function wr(s){if(!Array.isArray(s))return!1;if("within"===s[0])return!0;for(var i=1;i<s.length;i++)if(wr(s[i]))return!0;return!1}function Wi(s){if(!s)return!0;var i=s[0];return s.length<=1?"any"!==i:"=="===i?tr(s[1],s[2],"=="):"!="===i?Os(tr(s[1],s[2],"==")):"<"===i||">"===i||"<="===i||">="===i?tr(s[1],s[2],i):"any"===i?function Za(s){return["any"].concat(s.map(Wi))}(s.slice(1)):"all"===i?["all"].concat(s.slice(1).map(Wi)):"none"===i?["all"].concat(s.slice(1).map(Wi).map(Os)):"in"===i?Dr(s[1],s.slice(2)):"!in"===i?Os(Dr(s[1],s.slice(2))):"has"===i?Fr(s[1]):"!has"===i?Os(Fr(s[1])):"within"!==i||s}function tr(s,i,o){switch(s){case"$type":return["filter-type-"+o,i];case"$id":return["filter-id-"+o,i];default:return["filter-"+o,s,i]}}function Dr(s,i){if(0===i.length)return!1;switch(s){case"$type":return["filter-type-in",["literal",i]];case"$id":return["filter-id-in",["literal",i]];default:return i.length>200&&!i.some(function(o){return typeof o!=typeof i[0]})?["filter-in-large",s,["literal",i.sort(Na)]]:["filter-in-small",s,["literal",i]]}}function Fr(s){switch(s){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",s]}}function Os(s){return["!",s]}var Ua=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function ja(s,i){var o={};for(var T in s)"ref"!==T&&(o[T]=s[T]);return Ua.forEach(function(U){U in i&&(o[U]=i[U])}),o}var Nr={thin:100,hairline:100,"ultra-light":100,"extra-light":100,light:200,book:300,regular:400,normal:400,plain:400,roman:400,standard:400,medium:500,"semi-bold":600,"demi-bold":600,bold:700,heavy:800,black:800,"extra-bold":800,"ultra-black":900,"extra-black":900,"ultra-bold":900,"heavy-black":900,fat:900,poster:900},Zr=/(italic|oblique)$/i,Ur={},er=function(s,i,o){var T=Ur[s];if(!T){Array.isArray(s)||(s=[s]);for(var U=400,H="normal",lt=[],Dt=0,Zt=s.length;Dt<Zt;++Dt){var le=s[Dt].split(" "),fe=le[le.length-1].toLowerCase();for(var we in"normal"==fe||"italic"==fe||"oblique"==fe?(H=fe,le.pop(),fe=le[le.length-1].toLowerCase()):Zr.test(fe)&&(fe=fe.replace(Zr,""),H=le[le.length-1].replace(fe,"")),Nr){var t=le.length>1?le[le.length-2].toLowerCase():"";if(fe==we||fe==we.replace("-","")||t+"-"+fe==we){U=Nr[we],le.pop(),t&&we.startsWith(t)&&le.pop();break}}"number"==typeof fe&&(U=fe);var h=le.join(" ").replace("Klokantech Noto Sans","Noto Sans");-1!==h.indexOf(" ")&&(h='"'+h+'"'),lt.push(h)}T=Ur[s]=[H,U,lt]}return T[0]+" "+T[1]+" "+i+"px"+(o?"/"+o:"")+" "+T[2]},jr="https://api.mapbox.com";function ir(s){return 0!==s.indexOf("mapbox://")?"":s.slice(9)}function Ss(s,i){var o=ir(s);if(!o)return decodeURI(new URL(s,location.href).href);if(0!==o.indexOf("styles/"))throw new Error("unexpected style url: "+s);var U=o.slice(7);return jr+"/styles/v1/"+U+"?&access_token="+i}function Is(s,i,o,T){var U=new URL(s,T),H=ir(s);return H?"mapbox.satellite"===H?"https://api.mapbox.com/v4/"+H+"/{z}/{x}/{y}"+(window.devicePixelRatio>=1.5?"@2x":"")+".webp?access_token="+i:"https://{a-d}.tiles.mapbox.com/v4/"+H+"/{z}/{x}/{y}.vector.pbf?access_token="+i:(i&&U.searchParams.set(o,i),decodeURI(U.href))}var Br=0,Ga={},za={};function rr(s){return s*Math.PI/180}var ki=function(){for(var s=[],i=78271.51696402048;s.length<=24;i/=2)s.push(i);return s}();function Wr(s,i){if(typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof OffscreenCanvas<"u")return new OffscreenCanvas(s,i);var o=document.createElement("canvas");return o.width=s,o.height=i,o}function ar(s,i){for(var o=0,T=i.length;o<T;++o)if(i[o]<s&&o+1<T){var H=i[o]/i[o+1];return o+Math.log(i[o]/s)/Math.log(H)}return T-1}var Nn={};function or(s,i,o,T){if(void 0===o&&(o={}),i in Nn)return T&&(T.request=Nn[i][0]),Nn[i][1];var U=o.transformRequest&&o.transformRequest(i,s)||new Request(i);U.headers.get("Accept")||U.headers.set("Accept","application/json"),T&&(T.request=U);var H=fetch(U).then(function(lt){return delete Nn[i],lt.ok?lt.json():Promise.reject(new Error("Error fetching source "+i))}).catch(function(lt){return delete Nn[i],Promise.reject(new Error("Error fetching source "+i))});return Nn[i]=[U,H],H}function lr(s,i){if("string"!=typeof s)return Promise.resolve(s);if(!s.trim().startsWith("{"))return or("Style",s=Ss(s,i.accessToken),i);try{var o=JSON.parse(s);return Promise.resolve(o)}catch(T){return Promise.reject(T)}}function Gr(s,i){if(i.transformRequest){var o=i.transformRequest(s,"Tiles");if(o instanceof Request)return decodeURI(o.url)}return s}var zr={};function Ka(s,i,o,T){var U=document.createElement("canvas"),H=[2*o*i.pixelRatio+i.width,2*o*i.pixelRatio+i.height];U.width=H[0],U.height=H[1];var lt=U.getContext("2d");lt.drawImage(s,i.x,i.y,i.width,i.height,o*i.pixelRatio,o*i.pixelRatio,i.width,i.height);var Tt=lt.getImageData(0,0,H[0],H[1]);lt.globalCompositeOperation="destination-over",lt.fillStyle="rgba("+255*T.r+","+255*T.g+","+255*T.b+","+T.a+")";for(var Lt=Tt.data,Dt=0,Zt=Tt.width;Dt<Zt;++Dt)for(var qt=0,le=Tt.height;qt<le;++qt)Lt[4*(qt*Zt+Dt)+3]>0&&lt.arc(Dt,qt,o*i.pixelRatio,0,2*Math.PI);return lt.fill(),U}var ur,ka=Array(256).join("\u200a");function hr(s,i){if(i>=.05){for(var o="",T=s.split("\n"),U=ka.slice(0,Math.round(i/.1)),H=0,lt=T.length;H<lt;++H)H>0&&(o+="\n"),o+=T[H].split("").join(U);return o}return s}function kr(){return ur||(ur=Wr(1,1).getContext("2d")),ur}function mn(s,i){return kr().measureText(s).width+(s.length-1)*i}var Xr={};function cr(s,i,o,T){if(-1!==s.indexOf("\n")){for(var U=s.split("\n"),H=[],lt=0,Tt=U.length;lt<Tt;++lt)H.push(cr(U[lt],i,o,T));return H.join("\n")}var Lt=o+","+i+","+s+","+T,Dt=Xr[Lt];if(!Dt){var Zt=s.split(" ");if(Zt.length>1){var qt=kr();qt.font=i;for(var fe=qt.measureText("M").width*o,we="",t=[],h=0,p=Zt.length;h<p;++h){var B=Zt[h],j=we+(we?" ":"")+B;mn(j,T)<=fe?we=j:(we&&t.push(we),we=B)}we&&t.push(we);for(var X=0,tt=t.length;X<tt&&tt>1;++X){var Q=t[X];if(mn(Q,T)<.35*fe){var ct=X>0?mn(t[X-1],T):1/0,xt=X<tt-1?mn(t[X+1],T):1/0;t.splice(X,1),tt-=1,ct<xt?(t[X-1]+=" "+Q,X-=1):t[X]=Q+" "+t[X]}}for(var Ut=0,Ot=t.length-1;Ut<Ot;++Ut){var kt=t[Ut],re=t[Ut+1];if(mn(kt,T)>.7*fe&&mn(re,T)<.6*fe){var ae=kt.split(" "),oe=ae.pop();mn(oe,T)<.2*fe&&(t[Ut]=ae.join(" "),t[Ut+1]=oe+" "+re),Ot-=1}}Dt=t.join("\n")}else Dt=s;Dt=hr(Dt,T),Xr[Lt]=Dt}return Dt}var As,Xa=/font-family: ?([^;]*);/,Va=/("|')/g;function Ya(s){if(!As){As={};for(var i=document.styleSheets,o=0,T=i.length;o<T;++o){var U=i[o];try{var H=U.rules||U.cssRules;if(H)for(var lt=0,Tt=H.length;lt<Tt;++lt){var Lt=H[lt];if(5==Lt.type){var Dt=Lt.cssText.match(Xa);As[Dt[1].replace(Va,"")]=!0}}}catch{}}}return s in As}var dr={};function Ha(s){var i=s.toString();if(i in dr)return dr[i];for(var o=[],T=0,U=s.length;T<U;++T){s[T]=s[T].replace("Arial Unicode MS","Arial");var lt=er(s[T],1);(0,P.Qx)(lt);var Tt=lt.split(" ");o.push([Tt.slice(3).join(" ").replace(/"/g,""),Tt[1],Tt[0]])}for(var Lt=0,Dt=o.length;Lt<Dt;++Lt){var Zt=o[Lt],qt=Zt[0];if(!Ya(qt)&&100!==P.sG.get(Zt[2]+"\n"+Zt[1]+" \n"+qt)){var le="https://fonts.googleapis.com/css?family="+qt.replace(/ /g,"+")+":"+Zt[1]+Zt[2];if(!document.querySelector('link[href="'+le+'"]')){var fe=document.createElement("link");fe.href=le,fe.rel="stylesheet",document.head.appendChild(fe)}}}return dr[i]=s,s}var Ls,gr,Ja={Point:1,MultiPoint:1,LineString:2,MultiLineString:2,Polygon:3,MultiPolygon:3},Qa={center:[.5,.5],left:[0,.5],right:[1,.5],top:[.5,0],bottom:[.5,1],"top-left":[0,0],"top-right":[1,0],"bottom-left":[0,1],"bottom-right":[1,1]},$a=function(s,i){var o=sn(s,i);if("error"===o.result)throw new Error(o.value.map(function(T){return T.key+": "+T.message}).join(", "));return o.value},fr={},bs={zoom:0};function De(s,i,o,T,U,H,lt){var Tt=s.id;H||(H={},console.warn("No functionCache provided to getValue()")),H[Tt]||(H[Tt]={});var Lt=H[Tt];if(!Lt[o]){var Dt=(s[i]||fr)[o],Zt=Ir[i+"_"+s.type][o];void 0===Dt&&(Dt=Zt.default);var qt=function Oa(s){return Array.isArray(s)&&s.length>0&&"string"==typeof s[0]&&s[0]in Ln}(Dt);if(!qt&&es(Dt)&&(Dt=function de(s,i){var o=s.stops;if(!o)return function Re(s,i){var o=["get",s.property];if(void 0===s.default)return"string"===i.type?["string",o]:o;if("enum"===i.type)return["match",o,Object.keys(i.values),o,s.default];var T=["color"===i.type?"to-color":i.type,o,he(s.default)];return"array"===i.type&&T.splice(1,0,i.value,i.length||null),T}(s,i);var T=o&&"object"==typeof o[0][0],U=T||void 0!==s.property,H=T||!U;return o=o.map(function(lt){return!U&&i.tokens&&"string"==typeof lt[1]?[lt[0],zt(lt[1])]:[lt[0],he(lt[1])]}),T?function Rt(s,i,o){for(var T={},U={},H=[],lt=0;lt<o.length;lt++){var Tt=o[lt],Lt=Tt[0].zoom;void 0===T[Lt]&&(T[Lt]={zoom:Lt,type:s.type,property:s.property,default:s.default},U[Lt]=[],H.push(Lt)),U[Lt].push([Tt[0].value,Tt[1]])}if("exponential"===Nt({},i)){for(var Zt=[gt(s),["linear"],["zoom"]],qt=0,le=H;qt<le.length;qt+=1){var fe=le[qt];Pt(Zt,fe,ge(T[fe],i,U[fe]),!1)}return Zt}for(var t=["step",["zoom"]],h=0,p=H;h<p.length;h+=1){var B=p[h];Pt(t,B,ge(T[B],i,U[B]),!0)}return ft(t),t}(s,i,o):H?function $t(s,i,o,T){void 0===T&&(T=["zoom"]);var H,U=Nt(s,i),lt=!1;if("interval"===U)H=["step",T],lt=!0;else{if("exponential"!==U)throw new Error('Unknown zoom function type "'+U+'"');var Tt=void 0!==s.base?s.base:1;H=[gt(s),1===Tt?["linear"]:["exponential",Tt],T]}for(var Lt=0,Dt=o;Lt<Dt.length;Lt+=1){var Zt=Dt[Lt];Pt(H,Zt[0],Zt[1],lt)}return ft(H),H}(s,i,o):ge(s,i,o)}(Dt,Zt),qt=!0),qt){var le=$a(Dt,Zt);Lt[o]=le.evaluate.bind(le)}else"color"==Zt.type&&(Dt=_e.parse(Dt)),Lt[o]=function(){return Dt}}return bs.zoom=T,Lt[o](bs,U,lt)}function qa(s,i,o,T){return De(s,"layout","icon-allow-overlap",i,o,T)?De(s,"layout","icon-ignore-placement",i,o,T)?"none":"obstacle":"declutter"}function to(s,i,o,T,U){return U||console.warn("No filterCache provided to evaluateFilter()"),s in U||(U[s]=ba(i).filter),bs.zoom=T,U[s](bs,o)}var Vr=!1;function rn(s,i){if(s){if(!Vr&&(0===s.a||0===i))return;var o=s.a;return i=void 0===i?1:i,0===o?"transparent":"rgba("+Math.round(255*s.r/o)+","+Math.round(255*s.g/o)+","+Math.round(255*s.b/o)+","+o*i+")"}return s}var eo=/\{[^{}}]*\}/g;function _r(s,i){return s.replace(eo,function(o){return i[o.slice(1,-1)]||""})}var Yr=!1;function io(s,i,o,T,U,H,lt,Tt){if(void 0===T&&(T=ki),void 0===U&&(U=void 0),void 0===H&&(H=void 0),void 0===lt&&(lt=void 0),void 0===Tt&&(Tt=void 0),"string"==typeof i&&(i=JSON.parse(i)),8!=i.version)throw new Error("glStyle version 8 required.");var Lt,Dt;if(H)if(typeof Image<"u"){var Zt=new Image;Zt.crossOrigin="anonymous",Zt.onload=function(){Lt=Zt,Dt=[Zt.width,Zt.height],s.changed(),Zt.onload=null},Zt.src=H}else if(typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope){var qt=self;qt.postMessage({action:"loadImage",src:H}),qt.addEventListener("message",function(Ne){"imageLoaded"===Ne.data.action&&Ne.data.src===H&&(Dt=[(Lt=Ne.data.image).width,Lt.height])})}for(var j,le=function Ba(s){s=s.slice();for(var i=Object.create(null),o=0;o<s.length;o++)i[s[o].id]=s[o];for(var T=0;T<s.length;T++)"ref"in s[T]&&(s[T]=ja(s[T],i[s[T].ref]));return s}(i.layers),fe={},we=[],t={},h={},p=function nr(s){s.id||(s.id=Br++);var i={};return Ga[s.id]=i,i}(i),B=function sr(s){s.id||(s.id=Br++);var i={};return za[s.id]=i,i}(i),X=0,tt=le.length;X<tt;++X){var Q=le[X],ct=Q.id;if("string"==typeof o&&Q.source==o||-1!==o.indexOf(ct)){var xt=Q["source-layer"];if(j){if(Q.source!==j)throw new Error('Layer "'+ct+'" does not use source "'+j)}else{var Ut=i.sources[j=Q.source];if(!Ut)throw new Error('Source "'+j+'" is not defined');var Ot=Ut.type;if("vector"!==Ot&&"geojson"!==Ot)throw new Error('Source "'+j+'" is not of type "vector" or "geojson", but "'+Ot+'"')}var kt=fe[xt];kt||(fe[xt]=kt=[]),kt.push({layer:Q,index:X}),we.push(ct)}}var re=new Z.Z,ae=new F.Z,oe=[],me=function(Ce,Ne){var Be=Ce.getProperties(),ze=fe[Be.layer];if(ze){var pe=T.indexOf(Ne);-1==pe&&(pe=ar(Ne,T));for(var Fi,Ke=Ja[Ce.getGeometry().getType()],Se={properties:Be,type:Ke},Oe=s.get("mapbox-featurestate")[Ce.getId()],He=-1,Li=0,on=ze.length;Li<on;++Li){var na=ze[Li],Ae=na.layer,pr=Ae.layout||fr,as=Ae.paint||fr;if(!("none"===pr.visibility||"minzoom"in Ae&&pe<Ae.minzoom||"maxzoom"in Ae&&pe>=Ae.maxzoom)){var Ko=Ae.filter;if(!Ko||to(Ae.id,Ko,Se,pe,B)){Fi=Ae;var tn=void 0,vn=void 0,sa=void 0,ln=void 0,yn=void 0,be=void 0,Fs=na.index;if(3==Ke&&("fill"==Ae.type||"fill-extrusion"==Ae.type))if(vn=De(Ae,"paint",Ae.type+"-opacity",pe,Se,p,Oe),Ae.type+"-pattern"in as){var ra=De(Ae,"paint",Ae.type+"-pattern",pe,Se,p,Oe);if(ra){var co="string"==typeof ra?_r(ra,Be):ra.toString();if(Lt&&U&&U[co]){++He,(!(be=oe[He])||!be.getFill()||be.getStroke()||be.getText())&&(be=new b.ZP({fill:new F.Z}),oe[He]=be),sa=be.getFill(),be.setZIndex(Fs);var ko=co+"."+vn,aa=h[ko];if(!aa){var jn=U[co],Xo=Wr(jn.width,jn.height),fo=Xo.getContext("2d");fo.globalAlpha=vn,fo.drawImage(Lt,jn.x,jn.y,jn.width,jn.height,0,0,jn.width,jn.height),aa=fo.createPattern(Xo,"repeat"),h[ko]=aa}sa.setColor(aa)}}}else tn=rn(De(Ae,"paint",Ae.type+"-color",pe,Se,p,Oe),vn),Ae.type+"-outline-color"in as&&(yn=rn(De(Ae,"paint",Ae.type+"-outline-color",pe,Se,p,Oe),vn)),yn||(yn=tn),(tn||yn)&&(++He,(!(be=oe[He])||tn&&!be.getFill()||!tn&&be.getFill()||yn&&!be.getStroke()||!yn&&be.getStroke()||be.getText())&&(be=new b.ZP({fill:tn?new F.Z:void 0,stroke:yn?new Z.Z:void 0}),oe[He]=be),tn&&(sa=be.getFill()).setColor(tn),yn&&((ln=be.getStroke()).setColor(yn),ln.setWidth(.5)),be.setZIndex(Fs));if(1!=Ke&&"line"==Ae.type){tn=!("line-pattern"in as)&&"line-color"in as?rn(De(Ae,"paint","line-color",pe,Se,p,Oe),De(Ae,"paint","line-opacity",pe,Se,p,Oe)):void 0;var go=De(Ae,"paint","line-width",pe,Se,p,Oe);tn&&go>0&&(++He,(!(be=oe[He])||!be.getStroke()||be.getFill()||be.getText())&&(be=new b.ZP({stroke:new Z.Z}),oe[He]=be),(ln=be.getStroke()).setLineCap(De(Ae,"layout","line-cap",pe,Se,p,Oe)),ln.setLineJoin(De(Ae,"layout","line-join",pe,Se,p,Oe)),ln.setMiterLimit(De(Ae,"layout","line-miter-limit",pe,Se,p,Oe)),ln.setColor(tn),ln.setWidth(go),ln.setLineDash(as["line-dasharray"]?De(Ae,"paint","line-dasharray",pe,Se,p,Oe).map(function(Ni){return Ni*go}):null),be.setZIndex(Fs))}var oa=!1,ui=null,Vo=0,vr=void 0,Di=void 0,_o=void 0;if((1==Ke||2==Ke)&&"icon-image"in pr){var la=De(Ae,"layout","icon-image",pe,Se,p,Oe);if(la){vr="string"==typeof la?_r(la,Be):la.toString();var mo=void 0,os=Tt?Tt(s,vr):void 0;if(Lt&&U&&U[vr]||os){var po=De(Ae,"layout","icon-rotation-alignment",pe,Se,p,Oe);if(2==Ke){var Bn=Ce.getGeometry();if(Bn.getFlatMidpoint||Bn.getFlatMidpoints){var ha=Bn.getExtent();if(Math.sqrt(Math.max(Math.pow((ha[2]-ha[0])/Ne,2),Math.pow((ha[3]-ha[1])/Ne,2)))>150){var Ns="MultiLineString"===Bn.getType()?Bn.getFlatMidpoints():Bn.getFlatMidpoint();if(gr||(gr=new G.ZP("Point",Ls=[NaN,NaN],[],{},null)),mo=gr,Ls[0]=Ns[0],Ls[1]=Ns[1],"line"===De(Ae,"layout","symbol-placement",pe,Se,p,Oe)&&"map"===po)for(var ua=Bn.getStride(),yr=Bn.getFlatCoordinates(),Zs=0,fl=yr.length-ua;Zs<fl;Zs+=ua){var vo=yr[Zs],yo=yr[Zs+1],Eo=yr[Zs+ua],xo=yr[Zs+ua+1],gl=Math.min(vo,Eo),_l=Math.min(yo,xo),ml=Math.max(vo,Eo),pl=Math.max(yo,xo);if(Ns[0]>=gl&&Ns[0]<=ml&&Ns[1]>=_l&&Ns[1]<=pl){Vo=Math.atan2(yo-xo,Eo-vo);break}}}}}if(2!==Ke||mo){var Yo=De(Ae,"layout","icon-size",pe,Se,p,Oe),En=void 0!==as["icon-color"]?De(Ae,"paint","icon-color",pe,Se,p,Oe):null;if(!En||0!==En.a){var Ho=De(Ae,"paint","icon-halo-color",pe,Se,p,Oe),Mo=De(Ae,"paint","icon-halo-width",pe,Se,p,Oe),To=vr+"."+Yo+"."+Mo+"."+Ho;if(null!==En&&(To+="."+En),!(Di=t[To])){var Jo=qa(Ae,pe,Se,p),ca=void 0;"icon-offset"in pr&&((ca=De(Ae,"layout","icon-offset",pe,Se,p,Oe))[1]*=-1);var Qo=En?[255*En.r,255*En.g,255*En.b,En.a]:void 0;if(os){var da={color:Qo,rotateWithView:"map"===po,displacement:ca,declutterMode:Jo};"string"==typeof os?da.src=os:(da.img=os,da.imgSize=[os.width,os.height]),Di=new k.Z(da)}else{var Us=U[vr],Er=void 0,Po=void 0,$o=void 0,qo=void 0;Mo?Po=[(Er=Ka(Lt,Us,Mo,Ho)).width,Er.height]:(Er=Lt,Po=Dt,$o=[Us.width,Us.height],qo=[Us.x,Us.y]),Di=new k.Z({color:Qo,img:Er,imgSize:Po,size:$o,offset:qo,rotateWithView:"map"===po,scale:Yo/Us.pixelRatio,displacement:ca,declutterMode:Jo})}t[To]=Di}}Di&&(++He,(!(be=oe[He])||!be.getImage()||be.getFill()||be.getStroke())&&(be=new b.ZP,oe[He]=be),be.setGeometry(mo),Di.setRotation(Vo+rr(De(Ae,"layout","icon-rotate",pe,Se,p,Oe))),Di.setOpacity(De(Ae,"paint","icon-opacity",pe,Se,p,Oe)),Di.setAnchor(Qa[De(Ae,"layout","icon-anchor",pe,Se,p,Oe)]),be.setImage(Di),ui=be.getText(),be.setText(void 0),be.setZIndex(Fs),oa=!0,_o=!1)}else _o=!0}}}if(1==Ke&&"circle"===Ae.type){++He,(!(be=oe[He])||!be.getImage()||be.getFill()||be.getStroke())&&(be=new b.ZP,oe[He]=be);var tl="circle-radius"in as?De(Ae,"paint","circle-radius",pe,Se,p,Oe):5,Co=rn(De(Ae,"paint","circle-stroke-color",pe,Se,p,Oe),De(Ae,"paint","circle-stroke-opacity",pe,Se,p,Oe)),Ro=rn(De(Ae,"paint","circle-color",pe,Se,p,Oe),De(Ae,"paint","circle-opacity",pe,Se,p,Oe)),Oo=De(Ae,"paint","circle-stroke-width",pe,Se,p,Oe),el=tl+"."+Co+"."+Ro+"."+Oo;(Di=t[el])||(Di=new W.Z({radius:tl,stroke:Co&&Oo>0?new Z.Z({width:Oo,color:Co}):void 0,fill:Ro?new F.Z({color:Ro}):void 0,declutterMode:"none"}),t[el]=Di),be.setImage(Di),ui=be.getText(),be.setText(void 0),be.setGeometry(void 0),be.setZIndex(Fs),oa=!0}var Si=void 0,xr=void 0,Mr=void 0,Wn=void 0,Tr=void 0,So=void 0;if("text-field"in pr){Wn=Math.round(De(Ae,"layout","text-size",pe,Se,p,Oe));var Io=De(Ae,"layout","text-font",pe,Se,p,Oe);Mr=De(Ae,"layout","text-line-height",pe,Se,p,Oe),(xr=er(lt?lt(Io):Io,Wn,Mr)).includes("sans-serif")||(xr+=",sans-serif"),Tr=De(Ae,"layout","text-letter-spacing",pe,Se,p,Oe),So=De(Ae,"layout","text-max-width",pe,Se,p,Oe);var js=De(Ae,"layout","text-field",pe,Se,p,Oe);Si="object"==typeof js&&js.sections?1===js.sections.length?js.toString():js.sections.reduce(function(Ni,Gn,xl){var hl=Gn.fontStack?Gn.fontStack.split(","):Io,Fo=er(lt?lt(hl):hl,Wn*(Gn.scale||1),Mr),Bs=Gn.text;if("\n"===Bs)return Ni.push("\n",""),Ni;if(2!=Ke){for(var ga=0,El=(Bs=cr(Bs,Fo,So,Tr).split("\n")).length;ga<El;++ga)ga>0&&Ni.push("\n",""),Ni.push(Bs[ga],Fo);return Ni}Ni.push(hr(Bs,Tr),Fo)},[]):_r(js,Be).trim(),vn=De(Ae,"paint","text-opacity",pe,Se,p,Oe)}if(Si&&vn&&!_o){oa||(++He,(!(be=oe[He])||!be.getText()||be.getFill()||be.getStroke())&&(be=new b.ZP,oe[He]=be),be.setImage(void 0),be.setGeometry(void 0)),be.getText()||be.setText(ui||new S.Z({padding:[2,2,2,2]})),ui=be.getText();var il=pr["text-transform"];"uppercase"==il?Si=Array.isArray(Si)?Si.map(function(Ni,Gn){return Gn%2?Ni:Ni.toUpperCase()}):Si.toUpperCase():"lowercase"==il&&(Si=Array.isArray(Si)?Si.map(function(Ni,Gn){return Gn%2?Ni:Ni.toLowerCase()}):Si.toLowerCase());var nl=Array.isArray(Si)?Si:2==Ke?hr(Si,Tr):cr(Si,xr,So,Tr);ui.setText(nl),ui.setFont(xr),ui.setRotation(rr(De(Ae,"layout","text-rotate",pe,Se,p,Oe)));var fa=De(Ae,"layout","text-anchor",pe,Se,p,Oe),Ao=oa||1==Ke?"point":De(Ae,"layout","symbol-placement",pe,Se,p,Oe);if(ui.setPlacement(Ao),"function"==typeof ui.setRepeat){var vl=De(Ae,"layout","symbol-spacing",pe,Se,p,Oe);ui.setRepeat(2*vl)}ui.setOverflow("point"===Ao);var ls=De(Ae,"paint","text-halo-width",pe,Se,p,Oe),sl=De(Ae,"layout","text-offset",pe,Se,p,Oe),rl=De(Ae,"paint","text-translate",pe,Se,p,Oe),bo=0,Lo=0;if("point"==Ao){var wo="center";-1!==fa.indexOf("left")?(wo="left",Lo=ls):-1!==fa.indexOf("right")&&(wo="right",Lo=-ls),ui.setTextAlign(wo);var yl=De(Ae,"layout","text-rotation-alignment",pe,Se,p,Oe);ui.setRotateWithView("map"==yl)}else ui.setMaxAngle(rr(De(Ae,"layout","text-max-angle",pe,Se,p,Oe))*Si.length/nl.length),ui.setTextAlign(),ui.setRotateWithView(!1);var Do="middle";0==fa.indexOf("bottom")?(Do="bottom",bo=-ls-.5*(Mr-1)*Wn):0==fa.indexOf("top")&&(Do="top",bo=ls+.5*(Mr-1)*Wn),ui.setTextBaseline(Do);var al=De(Ae,"layout","text-justify",pe,Se,p,Oe);ui.setJustify("auto"===al?void 0:al),ui.setOffsetX(sl[0]*Wn+Lo+rl[0]),ui.setOffsetY(sl[1]*Wn+bo+rl[1]),ae.setColor(rn(De(Ae,"paint","text-color",pe,Se,p,Oe),vn)),ui.setFill(ae);var ol=rn(De(Ae,"paint","text-halo-color",pe,Se,p,Oe),vn);if(ol){re.setColor(ol);var ll=.5*Wn;re.setWidth((ls*=2)<=ll?ls:ll),ui.setStroke(re)}else ui.setStroke(void 0);var Pr=De(Ae,"layout","text-padding",pe,Se,p,Oe),Cr=ui.getPadding();Pr!==Cr[0]&&(Cr[0]=Pr,Cr[1]=Pr,Cr[2]=Pr,Cr[3]=Pr),be.setZIndex(Fs)}}}}if(He>-1)return oe.length=He+1,Yr&&("function"==typeof Ce.set?Ce.set("mapbox-layer",Fi):Ce.getProperties()["mapbox-layer"]=Fi),oe}};return s.setStyle(me),s.set("mapbox-source",j),s.set("mapbox-layers",we),s.set("mapbox-featurestate",{}),me}function so(s,i){return void 0===i&&(i=512),s.getExtent()?(0,m.dl)({extent:s.getExtent(),tileSize:i,maxZoom:22}).getResolutions():ki}function Jr(s,i,o,T,U){void 0===o&&(o=""),void 0===T&&(T={}),void 0===U&&(U=void 0);var H,lt,Tt,Lt,Dt=!0;return"string"==typeof o||Array.isArray(o)?Lt=o:(Lt=(Tt=o).source||Tt.layers,T=Tt),"string"==typeof T?(H=T,Tt={}):(H=T.styleUrl,Tt=T),!1===Tt.updateSource&&(Dt=!1),U||(U=Tt.resolutions),!H&&"string"==typeof i&&!i.trim().startsWith("{")&&(H=i),H&&(H=H.startsWith("data:")?location.href:Ss(H,Tt.accessToken),Tt=function Hr(s,i){return i.accessToken||(i=Object.assign({},i),new URL(s).searchParams.forEach(function(T,U){i.accessToken=T,i.accessTokenParam=U})),i}(H,Tt)),new Promise(function(Zt,qt){lr(i,Tt).then(function(le){if(8!=le.version)return qt(new Error("glStyle version 8 required."));if(!(s instanceof C.Z||s instanceof Y.Z))return qt(new Error("Can only apply to VectorLayer or VectorTileLayer"));var h,p,B,fe=s instanceof Y.Z?"vector":"geojson";if(Lt?lt=Array.isArray(Lt)?le.layers.find(function(ct){return ct.id===Lt[0]}).source:Lt:(lt=Object.keys(le.sources).find(function(ct){return le.sources[ct].type===fe}),Lt=lt),!lt)return qt(new Error("No "+fe+" source found in the glStyle."));function we(){if(!Dt)return Promise.resolve();if(s instanceof Y.Z)return function $r(s,i,o){return new Promise(function(T,U){(function Kr(s,i,o){void 0===o&&(o={});var T=[i,JSON.stringify(s)].toString(),U=zr[T];if(!U||o.transformRequest){var H=s.url;if(H&&!s.tiles){var lt=Is(H,o.accessToken,o.accessTokenParam||"access_token",i||location.href);if(H.startsWith("mapbox://"))U=Promise.resolve(Object.assign({},s,{url:void 0,tiles:(0,v.Gk)(lt)}));else{var Tt={};U=or("Source",lt,o,Tt).then(function(Lt){return Lt.tiles=Lt.tiles.map(function(Dt){return Gr(Is(Dt,o.accessToken,o.accessTokenParam||"access_token",Tt.request.url),o)}),Promise.resolve(Lt)})}}else s=Object.assign({},s,{tiles:s.tiles.map(function(Lt){return Gr(Is(Lt,o.accessToken,o.accessTokenParam||"access_token",i||location.href),o)})}),U=Promise.resolve(Object.assign({},s));zr[T]=U}return U})(s,i,o).then(function(H){var lt=function Qr(s,i,o){var T=new x({tileJSON:i,tileSize:s.tileSize||i.tileSize||512}),U=T.getTileJSON(),H=T.getTileGrid(),lt=(0,y.U2)(o.projection||"EPSG:3857"),Tt=function ao(s,i){var o=s.bounds;if(o){var T=(0,y.mi)([o[0],o[1]],i),U=(0,y.mi)([o[2],o[3]],i);return[T[0],T[1],U[0],U[1]]}return(0,y.U2)(i).getExtent()}(U,lt),Lt=lt.getExtent(),Dt=U.minzoom||0,Zt=U.maxzoom||22,qt={attributions:T.getAttributions(),projection:lt,tileGrid:new l.Z({origin:Lt?(0,n.rL)(Lt):H.getOrigin(0),extent:Tt||H.getExtent(),minZoom:Dt,resolutions:so(lt,i.tileSize).slice(0,Zt+1),tileSize:H.getTileSize(0)})};return Array.isArray(U.tiles)?qt.urls=U.tiles:qt.url=U.tiles,qt}(s,H,o);lt.format=new r.Z,Array.isArray(H.tiles)?lt.urls=H.tiles:lt.url=H.tiles,T(new nt.Z(lt))}).catch(U)})}(le.sources[lt],H,Tt).then(function(Ot){var kt=s.getSource();if(kt?Ot!==kt&&(kt.setTileUrlFunction(Ot.getTileUrlFunction()),kt.format_||(kt.format_=Ot.format_),kt.getAttributions()||kt.setAttributions(Ot.getAttributions()),kt.getTileLoadFunction()===nt.I&&kt.setTileLoadFunction(Ot.getTileLoadFunction()),(0,y.OP)(kt.getProjection(),Ot.getProjection())&&(kt.tileGrid=Ot.getTileGrid())):s.setSource(Ot),!isFinite(s.getMaxResolution())&&!isFinite(s.getMinZoom())){var re=s.getSource().getTileGrid();s.setMaxResolution(re.getResolution(re.getMinZoom()))}});var ct=le.sources[lt],xt=s.getSource();(!xt||xt.get("mapbox-source")!==ct)&&(xt=function mr(s,i,o){var T=s.data,U={};if("string"==typeof T){var H=Is(T,o.accessToken,o.accessTokenParam||"access_token",i||location.href);if(o.transformRequest){var lt=o.transformRequest(H,"GeoJSON");lt instanceof Request&&(H=decodeURI(lt.url))}if(/\{bbox-[0-9a-z-]+\}/.test(H)){var Lt=new D.Z({attributions:s.attribution,format:rs,url:function(Zt,qt,le){var fe=function ws(s){return"{bbox-"+(s?s.getCode():"EPSG:3857").toLowerCase().replace(/[^a-z0-9]/g,"-")+"}"}(le);return H.replace(fe,Zt.join(",")+","+le.getCode())},strategy:V.VW});return Lt.set("mapbox-source",s),Lt}return new D.Z({attributions:s.attribution,format:rs,url:H})}U.features=rs.readFeatures(T,{featureProjection:(0,y.Cs)()||"EPSG:3857"});var Dt=new D.Z(Object.assign({attributions:s.attribution,format:rs},U));return Dt.set("mapbox-source",s),Dt}(ct,H,Tt));var Ut=s.getSource();return Ut?xt!==Ut&&(Ut.getAttributions()||Ut.setAttributions(xt.getAttributions()),Ut.format_||(Ut.format_=xt.getFormat()),Ut.url_=xt.getUrl()):s.setSource(xt),Promise.resolve()}function j(){if(B||le.sprite&&!h)B?(s.setStyle(B),we().then(Zt).catch(qt)):qt(new Error("Something went wrong trying to apply style."));else{if(Tt.projection&&!U){var xt=(0,y.U2)(Tt.projection).getUnits();"m"!==xt&&(U=ki.map(function(Ut){return Ut/y.Wm[xt]}))}B=io(s,le,Lt,U,h,p,Ha,Tt.getImage),s.getStyle()?we().then(Zt).catch(qt):qt(new Error("Nothing to show for source ["+lt+"]"))}}if(le.sprite){var X=new URL(function Wa(s,i,o){var T=ir(s);if(!T)return decodeURI(new URL(s,o).href);if(0!==T.indexOf("sprites/"))throw new Error("unexpected sprites url: "+s);var H=T.slice(8);return jr+"/styles/v1/"+H+"/sprite?access_token="+i}(le.sprite,Tt.accessToken,H||location.href)),tt=.5==(window.devicePixelRatio>=1.5?.5:1)?"@2x":"",Q=X.origin+X.pathname+tt+".json"+X.search;new Promise(function(ct,xt){or("Sprite",Q,Tt).then(ct).catch(function(Ut){or("Sprite",Q=X.origin+X.pathname+".json"+X.search,Tt).then(ct).catch(xt)})}).then(function(ct){if(void 0===ct&&qt(new Error("No sprites found.")),h=ct,p=X.origin+X.pathname+tt+".png"+X.search,Tt.transformRequest){var xt=Tt.transformRequest(p,"SpriteImage");xt instanceof Request&&(p=encodeURI(xt.url))}j()}).catch(function(ct){qt(new Error("Sprites cannot be loaded: "+Q+": "+ct.message))})}else j()}).catch(qt)})}var an={};function qe(s,i,o){return void 0===o&&(o={}),lr(i,o).then(function(T){!function oi(s,i,o){i.layers.some(function(T){if("background"===T.type){if(s instanceof u.Z)return s.setBackground(function(U){return ss(T,U,o,{})}),!0;if(s instanceof d.Z||s instanceof c.Z)return s.getLayers().push(function pn(s,i,o){var T=document.createElement("div");return T.className="ol-mapbox-style-background",T.style.position="absolute",T.style.width="100%",T.style.height="100%",new u.Z({source:new e.Z({}),render:function(H){var lt=ss(s,H.viewState.resolution,i,o);return T.style.backgroundColor=lt,T}})}(T,o,{})),!0}})}(s,T,o)})}function ss(s,i,o,T){var U={id:s.id,type:s.type},H=s.layout||{},lt=s.paint||{};U.paint=lt;var Lt,Dt,Tt=ar(i,o.resolutions||ki);return void 0!==lt["background-color"]&&(Lt=De(U,"paint","background-color",Tt,an,T)),void 0!==lt["background-opacity"]&&(Dt=De(U,"paint","background-opacity",Tt,an,T)),"none"==H.visibility?void 0:rn(Lt,Dt)}var rs=new f.Z}}]);